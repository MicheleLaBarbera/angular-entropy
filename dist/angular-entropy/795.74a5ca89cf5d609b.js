(self.webpackChunkangular_entropy=self.webpackChunkangular_entropy||[]).push([[795],{1718:(y,_,o)=>{"use strict";o.d(_,{$:()=>m});var s=o(1571);class m{transform(g){const c=new Date(1e3*g);return c.toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"})+" - "+String(c.getHours()).padStart(2,"0")+":"+String(c.getMinutes()).padStart(2,"0")}}m.\u0275fac=function(g){return new(g||m)},m.\u0275pipe=s.Yjl({name:"dateLabel",type:m,pure:!0})},1795:(y,_,o)=>{"use strict";o.r(_),o.d(_,{ClassroomModule:()=>bt});var s=o(6895),m=o(3135),p=o(9181),g=o(7315),c=o(4415),f=o(7618),i=o(1571),a=o(301);class l{constructor(at,et,gt,Tt){this._route=at,this._classroomService=et,this._alertService=gt,this._router=Tt}ngOnInit(){this.invite_token=this._route.snapshot.paramMap.get("invite_token"),this.invite_token&&this._classroomService.joinStudentClassroom(this.invite_token).subscribe(at=>{at.hasOwnProperty("error")||this._alertService.success("Class successfully joined"),this._router.navigate(["/"])})}}l.\u0275fac=function(at){return new(at||l)(i.Y36(c.gz),i.Y36(g.u),i.Y36(a.c),i.Y36(c.F0))},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-classroom-invite-link"]],decls:0,vars:0,template:function(at,et){},encapsulation:2});var d,ot,t=o(4696),h=o(433);(ot=d||(d={}))[ot.CREATE=0]="CREATE",ot[ot.UPDATE=1]="UPDATE",ot[ot.DELETE=2]="DELETE";var x=o(4937);function w(ot,at){1&ot&&(i.TgZ(0,"div",23),i._UZ(1,"div",24),i.TgZ(2,"div",25),i._UZ(3,"div",26),i.qZA()())}function C(ot,at){if(1&ot&&(i.TgZ(0,"button",27),i._uU(1,"Create"),i.qZA()),2&ot){const et=i.oxw();i.Q6J("disabled",!et.classroomHomeworkCreateForm.valid)}}const M=ot=>parseInt(ot.get("node_min").value)>parseInt(ot.get("node_max").value)?{inRange:!1}:null;class k{constructor(at,et,gt){this._classroomHomeworkService=at,this._alertService=et,this._route=gt,this.classroomHomeworkCreateForm=new h.cw({title:new h.NI(null,h.kI.required),body:new h.NI(null,h.kI.required),node_min:new h.NI(null,[h.kI.required,h.kI.min(1)]),node_max:new h.NI(null,[h.kI.required,h.kI.max(30)]),start_date:new h.NI(null,h.kI.required),expire_date:new h.NI(null,h.kI.required)},M),this.loading=!1}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id")}onSubmit(){const at=new Date(this.classroomHomeworkCreateForm.value.start_date).getTime()/1e3,et=new Date(this.classroomHomeworkCreateForm.value.expire_date).getTime()/1e3;if(at>et)return this._alertService.error("Enter an expiration date greater than the start date");let gt={classroom_id:this.classroom_id,title:this.classroomHomeworkCreateForm.value.title,body:this.classroomHomeworkCreateForm.value.body,node_min:this.classroomHomeworkCreateForm.value.node_min,node_max:this.classroomHomeworkCreateForm.value.node_max,start_datetime:at,expire_datetime:et};this.loading=!0,this._classroomHomeworkService.createClassroomHomework(gt).subscribe(Tt=>{Tt.hasOwnProperty("error")||(this._alertService.success("Homework successfully created"),this._classroomHomeworkService.updatedClassroomHomeworks$.emit(d.CREATE),this.classroomHomeworkCreateForm.reset()),this.loading=!1})}}k.\u0275fac=function(at){return new(at||k)(i.Y36(x.c),i.Y36(a.c),i.Y36(c.gz))},k.\u0275cmp=i.Xpm({type:k,selectors:[["app-classroom-homework-create"]],decls:35,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-file-pen"],[1,"mb-3",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","name","homework_title","placeholder","Enter the homework title","formControlName","title",1,"form-control"],["for","body",1,"form-label"],["rows","3","id","body","name","homework_body","placeholder","Enter the homework text","formControlName","body",1,"form-control"],[1,"row","mb-3"],[1,"col-6"],["for","node_min",1,"form-label"],["type","text","id","node_min","name","homework_node_min","placeholder","Enter a number above 1","formControlName","node_min",1,"form-control"],["for","node_max",1,"form-label"],["type","text","id","node_max","name","homework_node_max","placeholder","Enter a number equal or below 30","formControlName","node_max",1,"form-control"],["for","start_date",1,"form-label"],["type","datetime-local","id","start_date","name","homework_start_date","formControlName","start_date",1,"form-control"],["for","expire_date",1,"form-label"],["type","datetime-local","id","expire_date","name","homework_expire_date","formControlName","expire_date",1,"form-control"],[1,"text-center"],["class","row mt-3",4,"ngIf"],["class","btn btn-primary d-grid w-100 mb-3","type","submit",3,"disabled",4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["type","submit",1,"btn","btn-primary","d-grid","w-100","mb-3",3,"disabled"]],template:function(at,et){1&at&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),i._UZ(3,"i",3),i._uU(4," Create Homework"),i.qZA(),i.TgZ(5,"form",4),i.NdJ("ngSubmit",function(){return et.onSubmit()}),i.TgZ(6,"div",5)(7,"label",6),i._uU(8,"Title:"),i.qZA(),i._UZ(9,"input",7),i.qZA(),i.TgZ(10,"div",5)(11,"label",8),i._uU(12,"Body:"),i.qZA(),i._UZ(13,"textarea",9),i.qZA(),i.TgZ(14,"div",10)(15,"div",11)(16,"label",12),i._uU(17,"Concept Map Minimum Nodes Count:"),i.qZA(),i._UZ(18,"input",13),i.qZA(),i.TgZ(19,"div",11)(20,"label",14),i._uU(21,"Concept Map Maximum Nodes Count:"),i.qZA(),i._UZ(22,"input",15),i.qZA()(),i.TgZ(23,"div",10)(24,"div",11)(25,"label",16),i._uU(26,"Start date:"),i.qZA(),i._UZ(27,"input",17),i.qZA(),i.TgZ(28,"div",11)(29,"label",18),i._uU(30,"Expire date:"),i.qZA(),i._UZ(31,"input",19),i.qZA()(),i.TgZ(32,"div",20),i.YNc(33,w,4,0,"div",21),i.YNc(34,C,2,1,"button",22),i.qZA()()()()),2&at&&(i.xp6(5),i.Q6J("formGroup",et.classroomHomeworkCreateForm),i.xp6(28),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading))},dependencies:[s.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u],encapsulation:2});var I=o(427),A=o(1718);function P(ot,at){1&ot&&(i.TgZ(0,"div",6),i._UZ(1,"div",7),i.TgZ(2,"div",8),i._UZ(3,"div",9),i.qZA()())}function H(ot,at){1&ot&&(i.TgZ(0,"div")(1,"p",11),i._uU(2,"There are no homeworks."),i.qZA()())}function V(ot,at){1&ot&&(i.TgZ(0,"th"),i._uU(1,"Students Completion"),i.qZA())}function U(ot,at){if(1&ot&&(i.TgZ(0,"td"),i._uU(1),i.qZA()),2&ot){const et=i.oxw().$implicit,gt=i.oxw(3);i.xp6(1),i.AsE("",null==et.maps?null:et.maps.length," / ",gt.classroom.size,"")}}const Y=function(ot){return[ot]};function N(ot,at){if(1&ot&&(i.TgZ(0,"tr",11)(1,"td"),i._uU(2),i.qZA(),i.YNc(3,U,2,2,"td",5),i.TgZ(4,"td"),i._uU(5),i.ALo(6,"dateLabel"),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.ALo(9,"dateLabel"),i.qZA(),i.TgZ(10,"td"),i._UZ(11,"i",14),i.qZA()()),2&ot){const et=at.$implicit,gt=i.oxw(3);i.xp6(2),i.Oqu(et.title),i.xp6(1),i.Q6J("ngIf",gt.classroom),i.xp6(2),i.Oqu(i.lcZ(6,5,et.start_datetime)),i.xp6(3),i.Oqu(i.lcZ(9,7,et.expire_datetime)),i.xp6(3),i.Q6J("routerLink",i.VKq(9,Y,"homeworks/"+et._id.$oid))}}function O(ot,at){if(1&ot&&(i.TgZ(0,"table",12)(1,"thead")(2,"tr",11)(3,"th"),i._uU(4,"Title"),i.qZA(),i.YNc(5,V,2,0,"th",5),i.TgZ(6,"th"),i._uU(7,"Start Datetime"),i.qZA(),i.TgZ(8,"th"),i._uU(9,"Expire Datetime"),i.qZA(),i._UZ(10,"th"),i.qZA()(),i.TgZ(11,"tbody"),i.YNc(12,N,12,11,"tr",13),i.qZA()()),2&ot){const et=i.oxw(2);i.xp6(5),i.Q6J("ngIf",et.classroom),i.xp6(7),i.Q6J("ngForOf",et.homeworks)}}function L(ot,at){if(1&ot&&(i.TgZ(0,"div"),i.YNc(1,H,3,0,"div",5),i.YNc(2,O,13,2,"table",10),i.qZA()),2&ot){const et=i.oxw();i.xp6(1),i.Q6J("ngIf",et.homeworks&&0==et.homeworks.length),i.xp6(1),i.Q6J("ngIf",et.homeworks&&et.homeworks.length>0)}}class F{constructor(at,et,gt){this._classroomHomeworkService=at,this._router=et,this._userService=gt,this.loading=!1,this.homeworks=[];let Tt=JSON.parse(localStorage.getItem("currentUserData"));Tt||this._router.navigate(["/users/auth"]),this.user=Tt,this._classroomHomeworkService.updatedClassroomHomeworks$.subscribe(wt=>{wt==d.CREATE&&this.getClassroomHomeworks()})}ngOnInit(){this.getClassroomHomeworks()}getClassroomHomeworks(){this.loading=!0,this.classroom?this._classroomHomeworkService.getClassroomHomeworks(this.classroom._id?.$oid).subscribe(at=>{at.hasOwnProperty("error")||(this.homeworks=at,this.homeworks&&this.homeworks.sort((et,gt)=>0==this.user.role?et.expire_datetime-gt.expire_datetime:gt.expire_datetime-et.expire_datetime)),this.loading=!1}):this._userService.getCurrentUserHomeworks().subscribe(at=>{at.hasOwnProperty("error")||(this.homeworks=at,this.homeworks&&this.homeworks.sort((et,gt)=>0==this.user.role?et.expire_datetime-gt.expire_datetime:gt.expire_datetime-et.expire_datetime)),this.loading=!1})}}function G(ot,at){if(1&ot&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&ot){const et=i.oxw(2);i.xp6(1),i.AsE("(",et.students.length," / ",et.classroom.size,")")}}function z(ot,at){1&ot&&(i.TgZ(0,"div",7),i._UZ(1,"div",8),i.TgZ(2,"div",9),i._UZ(3,"div",10),i.qZA()())}function K(ot,at){1&ot&&(i.TgZ(0,"div")(1,"p",12),i._uU(2,"There are no students in this class."),i.qZA()())}function B(ot,at){if(1&ot&&(i.TgZ(0,"tr",12)(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA(),i._UZ(5,"td"),i.qZA()),2&ot){const et=at.$implicit;i.xp6(2),i.AsE("",et.lastname," ",et.firstname," "),i.xp6(2),i.Oqu(et.email)}}function Z(ot,at){if(1&ot&&(i.TgZ(0,"table",13)(1,"thead")(2,"tr",12)(3,"th"),i._uU(4,"Name"),i.qZA(),i.TgZ(5,"th"),i._uU(6,"E-Mail"),i.qZA(),i._UZ(7,"th"),i.qZA()(),i.TgZ(8,"tbody"),i.YNc(9,B,6,3,"tr",14),i.qZA()()),2&ot){const et=i.oxw(3);i.xp6(9),i.Q6J("ngForOf",et.students)}}function X(ot,at){if(1&ot&&(i.TgZ(0,"div"),i.YNc(1,K,3,0,"div",5),i.YNc(2,Z,10,1,"table",11),i.qZA()),2&ot){const et=i.oxw(2);i.xp6(1),i.Q6J("ngIf",et.students&&0==et.students.length),i.xp6(1),i.Q6J("ngIf",et.students&&et.students.length>0)}}function W(ot,at){if(1&ot&&(i.TgZ(0,"div",1)(1,"div",2)(2,"h4",3),i._UZ(3,"i",4),i._uU(4," Students List "),i.YNc(5,G,2,2,"span",5),i.qZA(),i.YNc(6,z,4,0,"div",6),i.YNc(7,X,3,2,"div",5),i.qZA()()),2&ot){const et=i.oxw();i.xp6(5),i.Q6J("ngIf",et.students),i.xp6(1),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading)}}F.\u0275fac=function(at){return new(at||F)(i.Y36(x.c),i.Y36(c.F0),i.Y36(I.K))},F.\u0275cmp=i.Xpm({type:F,selectors:[["app-classroom-homework-list"]],inputs:{classroom:"classroom"},decls:7,vars:2,consts:[[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-graduation-cap"],["class","row mt-3",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["class","table table-hover",4,"ngIf"],[1,"text-center"],[1,"table","table-hover"],["class","text-center",4,"ngFor","ngForOf"],["title","Enter homework",1,"pe-clickable","fa-solid","fa-right-to-bracket",2,"color","darkgreen",3,"routerLink"]],template:function(at,et){1&at&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),i._UZ(3,"i",3),i._uU(4," Homeworks List"),i.qZA(),i.YNc(5,P,4,0,"div",4),i.YNc(6,L,3,2,"div",5),i.qZA()()),2&at&&(i.xp6(5),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading))},dependencies:[s.sg,s.O5,c.rH,A.$],encapsulation:2});class it{constructor(at,et){this._classroomService=at,this._router=et,this.loading=!1,this.students=[];let gt=JSON.parse(localStorage.getItem("currentUserData"));gt||this._router.navigate(["/users/auth"]),this.user=gt}ngOnInit(){this.getClassroomStudents()}getClassroomStudents(){this.loading=!0,this._classroomService.getClassroomStudents(this.classroom._id?.$oid).subscribe(at=>{at.hasOwnProperty("error")||(this.students=at,this.students&&this.students.sort((et,gt)=>et.lastname.localeCompare(gt.lastname)||et.firstname.localeCompare(gt.firstname))),this.loading=!1})}}function tt(ot,at){1&ot&&(i.TgZ(0,"div",2),i._UZ(1,"div",3),i.TgZ(2,"div",4),i._UZ(3,"div",5),i.qZA()())}function ut(ot,at){if(1&ot&&(i.TgZ(0,"div",17),i._UZ(1,"app-classroom-homework-list",18),i.qZA()),2&ot){const et=i.oxw(3);i.xp6(1),i.Q6J("classroom",et.classroom)}}function ct(ot,at){if(1&ot&&(i.TgZ(0,"div",12)(1,"div",13),i._UZ(2,"app-classroom-homework-create"),i.qZA(),i.TgZ(3,"div",13)(4,"div",14),i.YNc(5,ut,2,1,"div",15),i.qZA(),i.TgZ(6,"div",16)(7,"div",17),i._UZ(8,"app-classroom-student-list",18),i.qZA()()()()),2&ot){const et=i.oxw(2);i.xp6(5),i.Q6J("ngIf",et.classroom),i.xp6(3),i.Q6J("classroom",et.classroom)}}function xt(ot,at){if(1&ot&&(i.TgZ(0,"div",13),i._UZ(1,"app-classroom-homework-list",18),i.qZA()),2&ot){const et=i.oxw(3);i.xp6(1),i.Q6J("classroom",et.classroom)}}function J(ot,at){if(1&ot&&(i.TgZ(0,"div",13),i._UZ(1,"app-classroom-student-list",18),i.qZA()),2&ot){const et=i.oxw(3);i.xp6(1),i.Q6J("classroom",et.classroom)}}function Q(ot,at){if(1&ot&&(i.TgZ(0,"div",12),i.YNc(1,xt,2,1,"div",19),i.YNc(2,J,2,1,"div",19),i.qZA()),2&ot){const et=i.oxw(2);i.xp6(1),i.Q6J("ngIf",et.classroom),i.xp6(1),i.Q6J("ngIf",et.classroom)}}function rt(ot,at){if(1&ot&&(i.TgZ(0,"div",6)(1,"div",7),i._UZ(2,"div",8),i.TgZ(3,"div",9)(4,"div",10)(5,"strong"),i._uU(6,"Class:"),i.qZA(),i._uU(7),i._UZ(8,"br"),i.TgZ(9,"strong"),i._uU(10,"Teacher:"),i.qZA(),i._uU(11),i.qZA()()(),i.YNc(12,ct,9,2,"div",11),i.YNc(13,Q,3,2,"div",11),i.qZA()),2&ot){const et=i.oxw();i.xp6(7),i.hij(" ",et.classroom.name," "),i.xp6(4),i.lnq(" ",null==et.classroom.teacher?null:et.classroom.teacher.firstname," ",null==et.classroom.teacher?null:et.classroom.teacher.lastname," (",null==et.classroom.teacher?null:et.classroom.teacher.email,") "),i.xp6(1),i.Q6J("ngIf",1==et.user.role),i.xp6(1),i.Q6J("ngIf",0==et.user.role)}}it.\u0275fac=function(at){return new(at||it)(i.Y36(g.u),i.Y36(c.F0))},it.\u0275cmp=i.Xpm({type:it,selectors:[["app-classroom-student-list"]],inputs:{classroom:"classroom"},decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-graduation-cap"],[4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["class","table table-hover",4,"ngIf"],[1,"text-center"],[1,"table","table-hover"],["class","text-center",4,"ngFor","ngForOf"]],template:function(at,et){1&at&&i.YNc(0,W,8,3,"div",0),2&at&&i.Q6J("ngIf",et.classroom)},dependencies:[s.sg,s.O5],encapsulation:2});class lt{constructor(at,et,gt){this._route=at,this._classroomService=et,this._router=gt,this.loading=!1;let Tt=JSON.parse(localStorage.getItem("currentUserData"));Tt||this._router.navigate(["/users/auth"]),this.user=Tt}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id"),this.getClassroom()}getClassroom(){this.loading=!0,this._classroomService.getClassroom(this.classroom_id).subscribe(at=>{at.hasOwnProperty("error")?this._router.navigate(["/"]):this.classroom=at,this.loading=!1})}}lt.\u0275fac=function(at){return new(at||lt)(i.Y36(c.gz),i.Y36(g.u),i.Y36(c.F0))},lt.\u0275cmp=i.Xpm({type:lt,selectors:[["app-classroom-view"]],decls:3,vars:2,consts:[["class","row mt-5 g-0",4,"ngIf"],["class","mt-4 container-fluid",4,"ngIf"],[1,"row","mt-5","g-0"],[1,"col-5"],[1,"col-2","ms-5","mt-5"],[1,"ms-3","custom-big-loader","mt-5"],[1,"mt-4","container-fluid"],[1,"row","px-2","mb-1"],[1,"col-3"],[1,"col-6","text-center"],["role","alert",1,"alert","alert-primary"],["class","row px-2",4,"ngIf"],[1,"row","px-2"],[1,"col-6"],[1,"row","mb-4"],["class","col-12",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"classroom"],["class","col-6",4,"ngIf"]],template:function(at,et){1&at&&(i._UZ(0,"app-navbar"),i.YNc(1,tt,4,0,"div",0),i.YNc(2,rt,14,6,"div",1)),2&at&&(i.xp6(1),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading&&et.classroom))},dependencies:[s.O5,t.S,k,F,it],encapsulation:2});const mt=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:"invite/:invite_token",component:l,canActivate:[f.a]},{path:":classroom_id",canActivate:[f.a],children:[{path:"",pathMatch:"full",component:lt},{path:"homeworks",loadChildren:()=>Promise.resolve().then(o.bind(o,20)).then(ot=>ot.ClassroomHomeworkModule)}]}];class dt{}dt.\u0275fac=function(at){return new(at||dt)},dt.\u0275mod=i.oAB({type:dt}),dt.\u0275inj=i.cJS({imports:[c.Bz.forChild(mt),c.Bz]});var _t=o(20);class bt{}bt.\u0275fac=function(at){return new(at||bt)},bt.\u0275mod=i.oAB({type:bt}),bt.\u0275inj=i.cJS({providers:[g.u],imports:[s.ez,m.m,p.UserModule,dt,_t.ClassroomHomeworkModule]})},20:(y,_,o)=>{"use strict";o.r(_),o.d(_,{ClassroomHomeworkModule:()=>we});var s={};o.r(s),o.d(s,{forceCenter:()=>Zs,forceCollide:()=>Ur,forceLink:()=>Yr,forceManyBody:()=>$r,forceRadial:()=>ca,forceSimulation:()=>jr,forceX:()=>fa,forceY:()=>da});var m={};o.r(m),o.d(m,{dispatch:()=>pn});var p={};o.r(p),o.d(p,{interval:()=>ga,now:()=>fe,timeout:()=>mn,timer:()=>Ke,timerFlush:()=>Kn});var g=o(6895),c=o(3135),f=o(9181),i=o(4937),a=o(4415),l=o(7618),t=o(1571),h=o(655),d=o(7340);function x(){}function w(e){return null==e?x:function(){return this.querySelector(e)}}function M(){return[]}function k(e){return null==e?M:function(){return this.querySelectorAll(e)}}function A(e){return function(){return this.matches(e)}}function H(e){return new Array(e.length)}function U(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}U.prototype={constructor:U,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function O(e,n,r,u,v,b){for(var T,E=0,S=n.length,D=b.length;E<D;++E)(T=n[E])?(T.__data__=b[E],u[E]=T):r[E]=new U(e,b[E]);for(;E<S;++E)(T=n[E])&&(v[E]=T)}function L(e,n,r,u,v,b,E){var T,S,nt,D={},R=n.length,$=b.length,j=new Array(R);for(T=0;T<R;++T)(S=n[T])&&(j[T]=nt="$"+E.call(S,S.__data__,T,n),nt in D?v[T]=S:D[nt]=S);for(T=0;T<$;++T)(S=D[nt="$"+E.call(e,b[T],T,b)])?(u[T]=S,S.__data__=b[T],D[nt]=null):r[T]=new U(e,b[T]);for(T=0;T<R;++T)(S=n[T])&&D[j[T]]===S&&(v[T]=S)}function X(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}var J="http://www.w3.org/1999/xhtml";const Q={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rt(e){var n=e+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=e.slice(0,r))&&(e=e.slice(r+1)),Q.hasOwnProperty(n)?{space:Q[n],local:e}:e}function lt(e){return function(){this.removeAttribute(e)}}function mt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dt(e,n){return function(){this.setAttribute(e,n)}}function _t(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function bt(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function ot(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function et(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gt(e){return function(){this.style.removeProperty(e)}}function Tt(e,n,r){return function(){this.style.setProperty(e,n,r)}}function wt(e,n,r){return function(){var u=n.apply(this,arguments);null==u?this.style.removeProperty(e):this.style.setProperty(e,u,r)}}function Ft(e,n){return e.style.getPropertyValue(n)||et(e).getComputedStyle(e,null).getPropertyValue(n)}function hn(e){return function(){delete this[e]}}function le(e,n){return function(){this[e]=n}}function Ut(e,n){return function(){var r=n.apply(this,arguments);null==r?delete this[e]:this[e]=r}}function ne(e){return e.trim().split(/^|\s+/)}function Qt(e){return e.classList||new Re(e)}function Re(e){this._node=e,this._names=ne(e.getAttribute("class")||"")}function be(e,n){for(var r=Qt(e),u=-1,v=n.length;++u<v;)r.add(n[u])}function zt(e,n){for(var r=Qt(e),u=-1,v=n.length;++u<v;)r.remove(n[u])}function Ve(e){return function(){be(this,e)}}function ze(e){return function(){zt(this,e)}}function ln(e,n){return function(){(n.apply(this,arguments)?be:zt)(this,e)}}function Ht(){this.textContent=""}function Yt(e){return function(){this.textContent=e}}function ni(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function ii(){this.innerHTML=""}function oi(e){return function(){this.innerHTML=e}}function si(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function ui(){this.nextSibling&&this.parentNode.appendChild(this)}function li(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fi(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===J&&n.documentElement.namespaceURI===J?n.createElement(e):n.createElementNS(r,e)}}function di(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fn(e){var n=rt(e);return(n.local?di:fi)(n)}function gi(){return null}function vi(){var e=this.parentNode;e&&e.removeChild(this)}function xi(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function _i(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}Re.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Pn={},re=null;typeof document<"u"&&("onmouseenter"in document.documentElement||(Pn={mouseenter:"mouseover",mouseleave:"mouseout"}));function Ci(e,n,r){return e=Dn(e,n,r),function(u){var v=u.relatedTarget;(!v||v!==this&&!(8&v.compareDocumentPosition(this)))&&e.call(this,u)}}function Dn(e,n,r){return function(u){var v=re;re=u;try{e.call(this,this.__data__,n,r)}finally{re=v}}}function Ti(e){return e.trim().split(/^|\s+/).map(function(n){var r="",u=n.indexOf(".");return u>=0&&(r=n.slice(u+1),n=n.slice(0,u)),{type:n,name:r}})}function Mi(e){return function(){var n=this.__on;if(n){for(var b,r=0,u=-1,v=n.length;r<v;++r)b=n[r],e.type&&b.type!==e.type||b.name!==e.name?n[++u]=b:this.removeEventListener(b.type,b.listener,b.capture);++u?n.length=u:delete this.__on}}}function ki(e,n,r){var u=Pn.hasOwnProperty(e.type)?Ci:Dn;return function(v,b,E){var S,T=this.__on,D=u(n,b,E);if(T)for(var R=0,$=T.length;R<$;++R)if((S=T[R]).type===e.type&&S.name===e.name)return this.removeEventListener(S.type,S.listener,S.capture),this.addEventListener(S.type,S.listener=D,S.capture=r),void(S.value=n);this.addEventListener(e.type,D,r),S={type:e.type,name:e.name,value:n,listener:D,capture:r},T?T.push(S):this.__on=[S]}}function Gn(e,n,r){var u=et(e),v=u.CustomEvent;"function"==typeof v?v=new v(n,r):(v=u.document.createEvent("Event"),r?(v.initEvent(n,r.bubbles,r.cancelable),v.detail=r.detail):v.initEvent(n,!1,!1)),e.dispatchEvent(v)}function Ii(e,n){return function(){return Gn(this,e,n)}}function Si(e,n){return function(){return Gn(this,e,n.apply(this,arguments))}}var Zn=[null];function Pt(e,n){this._groups=e,this._parents=n}function Bn(){return new Pt([[document.documentElement]],Zn)}Pt.prototype=Bn.prototype={constructor:Pt,select:function C(e){"function"!=typeof e&&(e=w(e));for(var n=this._groups,r=n.length,u=new Array(r),v=0;v<r;++v)for(var S,D,b=n[v],E=b.length,T=u[v]=new Array(E),R=0;R<E;++R)(S=b[R])&&(D=e.call(S,S.__data__,R,b))&&("__data__"in S&&(D.__data__=S.__data__),T[R]=D);return new Pt(u,this._parents)},selectAll:function I(e){"function"!=typeof e&&(e=k(e));for(var n=this._groups,r=n.length,u=[],v=[],b=0;b<r;++b)for(var S,E=n[b],T=E.length,D=0;D<T;++D)(S=E[D])&&(u.push(e.call(S,S.__data__,D,E)),v.push(S));return new Pt(u,v)},filter:function P(e){"function"!=typeof e&&(e=A(e));for(var n=this._groups,r=n.length,u=new Array(r),v=0;v<r;++v)for(var S,b=n[v],E=b.length,T=u[v]=[],D=0;D<E;++D)(S=b[D])&&e.call(S,S.__data__,D,b)&&T.push(S);return new Pt(u,this._parents)},data:function F(e,n){if(!e)return nt=new Array(this.size()),D=-1,this.each(function(Lt){nt[++D]=Lt}),nt;var r=n?L:O,u=this._parents,v=this._groups;"function"!=typeof e&&(e=function Y(e){return function(){return e}}(e));for(var b=v.length,E=new Array(b),T=new Array(b),S=new Array(b),D=0;D<b;++D){var R=u[D],$=v[D],j=$.length,nt=e.call(R,R&&R.__data__,D,u),q=nt.length,st=T[D]=new Array(q),ht=E[D]=new Array(q);r(R,$,st,ht,S[D]=new Array(j),nt,n);for(var Et,Ct,yt=0,pt=0;yt<q;++yt)if(Et=st[yt]){for(yt>=pt&&(pt=yt+1);!(Ct=ht[pt])&&++pt<q;);Et._next=Ct||null}}return(E=new Pt(E,u))._enter=T,E._exit=S,E},enter:function V(){return new Pt(this._enter||this._groups.map(H),this._parents)},exit:function G(){return new Pt(this._exit||this._groups.map(H),this._parents)},join:function z(e,n,r){var u=this.enter(),v=this,b=this.exit();return u="function"==typeof e?e(u):u.append(e+""),null!=n&&(v=n(v)),null==r?b.remove():r(b),u&&v?u.merge(v).order():v},merge:function K(e){for(var n=this._groups,r=e._groups,u=n.length,v=r.length,b=Math.min(u,v),E=new Array(u),T=0;T<b;++T)for(var j,S=n[T],D=r[T],R=S.length,$=E[T]=new Array(R),nt=0;nt<R;++nt)(j=S[nt]||D[nt])&&($[nt]=j);for(;T<u;++T)E[T]=n[T];return new Pt(E,this._parents)},order:function B(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var E,u=e[n],v=u.length-1,b=u[v];--v>=0;)(E=u[v])&&(b&&4^E.compareDocumentPosition(b)&&b.parentNode.insertBefore(E,b),b=E);return this},sort:function Z(e){function n($,j){return $&&j?e($.__data__,j.__data__):!$-!j}e||(e=X);for(var r=this._groups,u=r.length,v=new Array(u),b=0;b<u;++b){for(var D,E=r[b],T=E.length,S=v[b]=new Array(T),R=0;R<T;++R)(D=E[R])&&(S[R]=D);S.sort(n)}return new Pt(v,this._parents).order()},call:function W(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function it(){var e=new Array(this.size()),n=-1;return this.each(function(){e[++n]=this}),e},node:function tt(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var u=e[n],v=0,b=u.length;v<b;++v){var E=u[v];if(E)return E}return null},size:function ut(){var e=0;return this.each(function(){++e}),e},empty:function ct(){return!this.node()},each:function xt(e){for(var n=this._groups,r=0,u=n.length;r<u;++r)for(var T,v=n[r],b=0,E=v.length;b<E;++b)(T=v[b])&&e.call(T,T.__data__,b,v);return this},attr:function at(e,n){var r=rt(e);if(arguments.length<2){var u=this.node();return r.local?u.getAttributeNS(r.space,r.local):u.getAttribute(r)}return this.each((null==n?r.local?mt:lt:"function"==typeof n?r.local?ot:bt:r.local?_t:dt)(r,n))},style:function Wt(e,n,r){return arguments.length>1?this.each((null==n?gt:"function"==typeof n?wt:Tt)(e,n,r??"")):Ft(this.node(),e)},property:function St(e,n){return arguments.length>1?this.each((null==n?hn:"function"==typeof n?Ut:le)(e,n)):this.node()[e]},classed:function Ye(e,n){var r=ne(e+"");if(arguments.length<2){for(var u=Qt(this.node()),v=-1,b=r.length;++v<b;)if(!u.contains(r[v]))return!1;return!0}return this.each(("function"==typeof n?ln:n?Ve:ze)(r,n))},text:function ri(e){return arguments.length?this.each(null==e?Ht:("function"==typeof e?ni:Yt)(e)):this.node().textContent},html:function ai(e){return arguments.length?this.each(null==e?ii:("function"==typeof e?si:oi)(e)):this.node().innerHTML},raise:function hi(){return this.each(ui)},lower:function ci(){return this.each(li)},append:function pi(e){var n="function"==typeof e?e:Fn(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function mi(e,n){var r="function"==typeof e?e:Fn(e),u=null==n?gi:"function"==typeof n?n:w(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),u.apply(this,arguments)||null)})},remove:function yi(){return this.each(vi)},clone:function wi(e){return this.select(e?_i:xi)},datum:function bi(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function Ai(e,n,r){var v,E,u=Ti(e+""),b=u.length;if(!(arguments.length<2)){for(T=n?ki:Mi,null==r&&(r=!1),v=0;v<b;++v)this.each(T(u[v],n,r));return this}var T=this.node().__on;if(T)for(var R,S=0,D=T.length;S<D;++S)for(v=0,R=T[S];v<b;++v)if((E=u[v]).type===R.type&&E.name===R.name)return R.value},dispatch:function Ni(e,n){return this.each(("function"==typeof n?Si:Ii)(e,n))}};const Ee=Bn;function Un(e){return"string"==typeof e?new Pt([[document.querySelector(e)]],[document.documentElement]):new Pt([[e]],Zn)}function Hn(e,n,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+r)/6)}function je(e){this._context=e}function Rn(e,n){this._basis=new je(e),this._beta=n}je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hn(this,e,n)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}},Rn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,r=e.length-1;if(r>0)for(var S,u=e[0],v=n[0],b=e[r]-u,E=n[r]-v,T=-1;++T<=r;)S=T/r,this._basis.point(this._beta*e[T]+(1-this._beta)*(u+S*b),this._beta*n[T]+(1-this._beta)*(v+S*E));this._x=this._y=null,this._basis.lineEnd()},point:function(e,n){this._x.push(+e),this._y.push(+n)}};const Oi=function e(n){function r(u){return 1===n?new je(u):new Rn(u,n)}return r.beta=function(u){return e(+u)},r}(.85);var cn=Math.PI,fn=2*cn,ie=1e-6,Li=fn-ie;function dn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Vn(){return new dn}dn.prototype=Vn.prototype={constructor:dn,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,r,u){this._+="Q"+ +e+","+ +n+","+(this._x1=+r)+","+(this._y1=+u)},bezierCurveTo:function(e,n,r,u,v,b){this._+="C"+ +e+","+ +n+","+ +r+","+ +u+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(e,n,r,u,v){e=+e,n=+n,r=+r,u=+u,v=+v;var b=this._x1,E=this._y1,T=r-e,S=u-n,D=b-e,R=E-n,$=D*D+R*R;if(v<0)throw new Error("negative radius: "+v);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if($>ie)if(Math.abs(R*T-S*D)>ie&&v){var j=r-b,nt=u-E,q=T*T+S*S,st=j*j+nt*nt,ht=Math.sqrt(q),ft=Math.sqrt($),yt=v*Math.tan((cn-Math.acos((q+$-st)/(2*ht*ft)))/2),pt=yt/ft,Et=yt/ht;Math.abs(pt-1)>ie&&(this._+="L"+(e+pt*D)+","+(n+pt*R)),this._+="A"+v+","+v+",0,0,"+ +(R*j>D*nt)+","+(this._x1=e+Et*T)+","+(this._y1=n+Et*S)}else this._+="L"+(this._x1=e)+","+(this._y1=n)},arc:function(e,n,r,u,v,b){e=+e,n=+n,b=!!b;var E=(r=+r)*Math.cos(u),T=r*Math.sin(u),S=e+E,D=n+T,R=1^b,$=b?u-v:v-u;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+S+","+D:(Math.abs(this._x1-S)>ie||Math.abs(this._y1-D)>ie)&&(this._+="L"+S+","+D),r&&($<0&&($=$%fn+fn),$>Li?this._+="A"+r+","+r+",0,1,"+R+","+(e-E)+","+(n-T)+"A"+r+","+r+",0,1,"+R+","+(this._x1=S)+","+(this._y1=D):$>ie&&(this._+="A"+r+","+r+",0,"+ +($>=cn)+","+R+","+(this._x1=e+r*Math.cos(v))+","+(this._y1=n+r*Math.sin(v))))},rect:function(e,n,r,u){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +r+"v"+ +u+"h"+-r+"Z"},toString:function(){return this._}};const Fi=Vn;function $e(e){return function(){return e}}function zn(e){this._context=e}function Pi(e){return new zn(e)}function Di(e){return e[0]}function Gi(e){return e[1]}zn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n)}}};var Yn=Math.PI;function $n(e){return(1-Math.cos(Yn*e))/2}var Bi={value:function(){}};function Jn(){for(var u,e=0,n=arguments.length,r={};e<n;++e){if(!(u=arguments[e]+"")||u in r||/[\s.]/.test(u))throw new Error("illegal type: "+u);r[u]=[]}return new Je(r)}function Je(e){this._=e}function Ui(e,n){return e.trim().split(/^|\s+/).map(function(r){var u="",v=r.indexOf(".");if(v>=0&&(u=r.slice(v+1),r=r.slice(0,v)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:u}})}function Hi(e,n){for(var v,r=0,u=e.length;r<u;++r)if((v=e[r]).name===n)return v.value}function Xn(e,n,r){for(var u=0,v=e.length;u<v;++u)if(e[u].name===n){e[u]=Bi,e=e.slice(0,u).concat(e.slice(u+1));break}return null!=r&&e.push({name:n,value:r}),e}Je.prototype=Jn.prototype={constructor:Je,on:function(e,n){var v,r=this._,u=Ui(e+"",r),b=-1,E=u.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++b<E;)if(v=(e=u[b]).type)r[v]=Xn(r[v],e.name,n);else if(null==n)for(v in r)r[v]=Xn(r[v],e.name,null);return this}for(;++b<E;)if((v=(e=u[b]).type)&&(v=Hi(r[v],e.name)))return v},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Je(e)},call:function(e,n){if((v=arguments.length-2)>0)for(var v,b,r=new Array(v),u=0;u<v;++u)r[u]=arguments[u+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=0,v=(b=this._[e]).length;u<v;++u)b[u].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var u=this._[e],v=0,b=u.length;v<b;++v)u[v].value.apply(n,r)}};const pn=Jn;var Xe,Me,ce=0,Ce=0,Te=0,We=0,oe=0,Qe=0,ke="object"==typeof performance&&performance.now?performance:Date,Qn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fe(){return oe||(Qn(Ri),oe=ke.now()+Qe)}function Ri(){oe=0}function Ae(){this._call=this._time=this._next=null}function Ke(e,n,r){var u=new Ae;return u.restart(e,n,r),u}function Kn(){fe(),++ce;for(var n,e=Xe;e;)(n=oe-e._time)>=0&&e._call.call(null,n),e=e._next;--ce}function qn(){oe=(We=ke.now())+Qe,ce=Ce=0;try{Kn()}finally{ce=0,function zi(){for(var e,r,n=Xe,u=1/0;n;)n._call?(u>n._time&&(u=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Xe=r);Me=e,gn(u)}(),oe=0}}function Vi(){var e=ke.now(),n=e-We;n>1e3&&(Qe-=n,We=e)}function gn(e){ce||(Ce&&(Ce=clearTimeout(Ce)),e-oe>24?(e<1/0&&(Ce=setTimeout(qn,e-ke.now()-Qe)),Te&&(Te=clearInterval(Te))):(Te||(We=ke.now(),Te=setInterval(Vi,1e3)),ce=1,Qn(qn)))}function mn(e,n,r){var u=new Ae;return n=null==n?0:+n,u.restart(function(v){u.stop(),e(v+n)},n,r),u}Ae.prototype=Ke.prototype={constructor:Ae,restart:function(e,n,r){if("function"!=typeof e)throw new TypeError("callback is not a function");r=(null==r?fe():+r)+(null==n?0:+n),!this._next&&Me!==this&&(Me?Me._next=this:Xe=this,Me=this),this._call=e,this._time=r,gn()},stop:function(){this._call&&(this._call=null,this._time=1/0,gn())}};var Yi=pn("start","end","cancel","interrupt"),ji=[];function en(e,n,r,u,v,b){var E=e.__transition;if(E){if(r in E)return}else e.__transition={};!function $i(e,n,r){var v,u=e.__transition;function b(D){r.state=1,r.timer.restart(E,r.delay,r.time),r.delay<=D&&E(D-r.delay)}function E(D){var R,$,j,nt;if(1!==r.state)return S();for(R in u)if((nt=u[R]).name===r.name){if(3===nt.state)return mn(E);4===nt.state?(nt.state=6,nt.timer.stop(),nt.on.call("interrupt",e,e.__data__,nt.index,nt.group),delete u[R]):+R<n&&(nt.state=6,nt.timer.stop(),nt.on.call("cancel",e,e.__data__,nt.index,nt.group),delete u[R])}if(mn(function(){3===r.state&&(r.state=4,r.timer.restart(T,r.delay,r.time),T(D))}),r.state=2,r.on.call("start",e,e.__data__,r.index,r.group),2===r.state){for(r.state=3,v=new Array(j=r.tween.length),R=0,$=-1;R<j;++R)(nt=r.tween[R].value.call(e,e.__data__,r.index,r.group))&&(v[++$]=nt);v.length=$+1}}function T(D){for(var R=D<r.duration?r.ease.call(null,D/r.duration):(r.timer.restart(S),r.state=5,1),$=-1,j=v.length;++$<j;)v[$].call(e,R);5===r.state&&(r.on.call("end",e,e.__data__,r.index,r.group),S())}function S(){for(var D in r.state=6,r.timer.stop(),delete u[n],u)return;delete e.__transition}u[n]=r,r.timer=Ke(b,0,r.time)}(e,r,{name:n,index:u,group:v,on:Yi,tween:ji,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:0})}function xn(e,n){var r=Zt(e,n);if(r.state>0)throw new Error("too late; already scheduled");return r}function jt(e,n){var r=Zt(e,n);if(r.state>3)throw new Error("too late; already running");return r}function Zt(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function Kt(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var Ie,wn,or,nn,rr=180/Math.PI,_n={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ir(e,n,r,u,v,b){var E,T,S;return(E=Math.sqrt(e*e+n*n))&&(e/=E,n/=E),(S=e*r+n*u)&&(r-=e*S,u-=n*S),(T=Math.sqrt(r*r+u*u))&&(r/=T,u/=T,S/=T),e*u<n*r&&(e=-e,n=-n,S=-S,E=-E),{translateX:v,translateY:b,rotate:Math.atan2(n,e)*rr,skewX:Math.atan(S)*rr,scaleX:E,scaleY:T}}function sr(e,n,r,u){function v(D){return D.length?D.pop()+" ":""}return function(D,R){var $=[],j=[];return D=e(D),R=e(R),function b(D,R,$,j,nt,q){if(D!==$||R!==j){var st=nt.push("translate(",null,n,null,r);q.push({i:st-4,x:Kt(D,$)},{i:st-2,x:Kt(R,j)})}else($||j)&&nt.push("translate("+$+n+j+r)}(D.translateX,D.translateY,R.translateX,R.translateY,$,j),function E(D,R,$,j){D!==R?(D-R>180?R+=360:R-D>180&&(D+=360),j.push({i:$.push(v($)+"rotate(",null,u)-2,x:Kt(D,R)})):R&&$.push(v($)+"rotate("+R+u)}(D.rotate,R.rotate,$,j),function T(D,R,$,j){D!==R?j.push({i:$.push(v($)+"skewX(",null,u)-2,x:Kt(D,R)}):R&&$.push(v($)+"skewX("+R+u)}(D.skewX,R.skewX,$,j),function S(D,R,$,j,nt,q){if(D!==$||R!==j){var st=nt.push(v(nt)+"scale(",null,",",null,")");q.push({i:st-4,x:Kt(D,$)},{i:st-2,x:Kt(R,j)})}else(1!==$||1!==j)&&nt.push(v(nt)+"scale("+$+","+j+")")}(D.scaleX,D.scaleY,R.scaleX,R.scaleY,$,j),D=R=null,function(nt){for(var ht,q=-1,st=j.length;++q<st;)$[(ht=j[q]).i]=ht.x(nt);return $.join("")}}}var Ki=sr(function Wi(e){return"none"===e?_n:(Ie||(Ie=document.createElement("DIV"),wn=document.documentElement,or=document.defaultView),Ie.style.transform=e,e=or.getComputedStyle(wn.appendChild(Ie),null).getPropertyValue("transform"),wn.removeChild(Ie),ir(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),qi=sr(function Qi(e){return null!=e&&(nn||(nn=document.createElementNS("http://www.w3.org/2000/svg","g")),nn.setAttribute("transform",e),e=nn.transform.baseVal.consolidate())?ir((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):_n},", ",")",")");function to(e,n){var r,u;return function(){var v=jt(this,e),b=v.tween;if(b!==r)for(var E=0,T=(u=r=b).length;E<T;++E)if(u[E].name===n){(u=u.slice()).splice(E,1);break}v.tween=u}}function eo(e,n,r){var u,v;if("function"!=typeof r)throw new Error;return function(){var b=jt(this,e),E=b.tween;if(E!==u){v=(u=E).slice();for(var T={name:n,value:r},S=0,D=v.length;S<D;++S)if(v[S].name===n){v[S]=T;break}S===D&&v.push(T)}b.tween=v}}function bn(e,n,r){var u=e._id;return e.each(function(){var v=jt(this,u);(v.value||(v.value={}))[n]=r.apply(this,arguments)}),function(v){return Zt(v,u).value[n]}}function En(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function ar(e,n){var r=Object.create(e.prototype);for(var u in n)r[u]=n[u];return r}function Se(){}var rn=1/.7,de="\\s*([+-]?\\d+)\\s*",Oe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ro=/^#([0-9a-f]{3,8})$/,io=new RegExp("^rgb\\("+[de,de,de]+"\\)$"),oo=new RegExp("^rgb\\("+[Rt,Rt,Rt]+"\\)$"),so=new RegExp("^rgba\\("+[de,de,de,Oe]+"\\)$"),ao=new RegExp("^rgba\\("+[Rt,Rt,Rt,Oe]+"\\)$"),uo=new RegExp("^hsl\\("+[Oe,Rt,Rt]+"\\)$"),ho=new RegExp("^hsla\\("+[Oe,Rt,Rt,Oe]+"\\)$"),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hr(){return this.rgb().formatHex()}function lr(){return this.rgb().formatRgb()}function Le(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=ro.exec(e))?(r=n[1].length,n=parseInt(n[1],16),6===r?cr(n):3===r?new Dt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===r?on(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===r?on(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=io.exec(e))?new Dt(n[1],n[2],n[3],1):(n=oo.exec(e))?new Dt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=so.exec(e))?on(n[1],n[2],n[3],n[4]):(n=ao.exec(e))?on(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=uo.exec(e))?pr(n[1],n[2]/100,n[3]/100,1):(n=ho.exec(e))?pr(n[1],n[2]/100,n[3]/100,n[4]):ur.hasOwnProperty(e)?cr(ur[e]):"transparent"===e?new Dt(NaN,NaN,NaN,0):null}function cr(e){return new Dt(e>>16&255,e>>8&255,255&e,1)}function on(e,n,r,u){return u<=0&&(e=n=r=NaN),new Dt(e,n,r,u)}function co(e){return e instanceof Se||(e=Le(e)),e?new Dt((e=e.rgb()).r,e.g,e.b,e.opacity):new Dt}function sn(e,n,r,u){return 1===arguments.length?co(e):new Dt(e,n,r,u??1)}function Dt(e,n,r,u){this.r=+e,this.g=+n,this.b=+r,this.opacity=+u}function fr(){return"#"+Cn(this.r)+Cn(this.g)+Cn(this.b)}function dr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Cn(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function pr(e,n,r,u){return u<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new Vt(e,n,r,u)}function gr(e){if(e instanceof Vt)return new Vt(e.h,e.s,e.l,e.opacity);if(e instanceof Se||(e=Le(e)),!e)return new Vt;if(e instanceof Vt)return e;var n=(e=e.rgb()).r/255,r=e.g/255,u=e.b/255,v=Math.min(n,r,u),b=Math.max(n,r,u),E=NaN,T=b-v,S=(b+v)/2;return T?(E=n===b?(r-u)/T+6*(r<u):r===b?(u-n)/T+2:(n-r)/T+4,T/=S<.5?b+v:2-b-v,E*=60):T=S>0&&S<1?0:E,new Vt(E,T,S,e.opacity)}function Vt(e,n,r,u){this.h=+e,this.s=+n,this.l=+r,this.opacity=+u}function Tn(e,n,r){return 255*(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)}function mr(e,n,r,u,v){var b=e*e,E=b*e;return((1-3*e+3*b-E)*n+(4-6*b+3*E)*r+(1+3*e+3*b-3*E)*u+E*v)/6}function vr(e){return function(){return e}}function yr(e,n){return function(r){return e+r*n}}function vo(e){return 1==(e=+e)?xr:function(n,r){return r-n?function mo(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(u){return Math.pow(e+u*n,r)}}(n,r,e):vr(isNaN(n)?r:n)}}function xr(e,n){var r=n-e;return r?yr(e,r):vr(isNaN(e)?n:e)}En(Se,Le,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:hr,formatHex:hr,formatHsl:function lo(){return gr(this).formatHsl()},formatRgb:lr,toString:lr}),En(Dt,sn,ar(Se,{brighter:function(e){return e=null==e?rn:Math.pow(rn,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fr,formatHex:fr,formatRgb:dr,toString:dr})),En(Vt,function fo(e,n,r,u){return 1===arguments.length?gr(e):new Vt(e,n,r,u??1)},ar(Se,{brighter:function(e){return e=null==e?rn:Math.pow(rn,e),new Vt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Vt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,u=r+(r<.5?r:1-r)*n,v=2*r-u;return new Dt(Tn(e>=240?e-240:e+120,v,u),Tn(e,v,u),Tn(e<120?e+240:e-120,v,u),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const _r=function e(n){var r=vo(n);function u(v,b){var E=r((v=sn(v)).r,(b=sn(b)).r),T=r(v.g,b.g),S=r(v.b,b.b),D=xr(v.opacity,b.opacity);return function(R){return v.r=E(R),v.g=T(R),v.b=S(R),v.opacity=D(R),v+""}}return u.gamma=e,u}(1);function wr(e){return function(n){var E,T,r=n.length,u=new Array(r),v=new Array(r),b=new Array(r);for(E=0;E<r;++E)T=sn(n[E]),u[E]=T.r||0,v[E]=T.g||0,b[E]=T.b||0;return u=e(u),v=e(v),b=e(b),T.opacity=1,function(S){return T.r=u(S),T.g=v(S),T.b=b(S),T+""}}}wr(function po(e){var n=e.length-1;return function(r){var u=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),v=e[u],b=e[u+1],E=u>0?e[u-1]:2*v-b,T=u<n-1?e[u+2]:2*b-v;return mr((r-u/n)*n,E,v,b,T)}}),wr(function go(e){var n=e.length;return function(r){var u=Math.floor(((r%=1)<0?++r:r)*n),v=e[(u+n-1)%n],b=e[u%n],E=e[(u+1)%n],T=e[(u+2)%n];return mr((r-u/n)*n,v,b,E,T)}});var Mn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kn=new RegExp(Mn.source,"g");function _o(e,n){var u,v,b,r=Mn.lastIndex=kn.lastIndex=0,E=-1,T=[],S=[];for(e+="",n+="";(u=Mn.exec(e))&&(v=kn.exec(n));)(b=v.index)>r&&(b=n.slice(r,b),T[E]?T[E]+=b:T[++E]=b),(u=u[0])===(v=v[0])?T[E]?T[E]+=v:T[++E]=v:(T[++E]=null,S.push({i:E,x:Kt(u,v)})),r=kn.lastIndex;return r<n.length&&(b=n.slice(r),T[E]?T[E]+=b:T[++E]=b),T.length<2?S[0]?function xo(e){return function(n){return e(n)+""}}(S[0].x):function yo(e){return function(){return e}}(n):(n=S.length,function(D){for(var $,R=0;R<n;++R)T[($=S[R]).i]=$.x(D);return T.join("")})}function br(e,n){var r;return("number"==typeof n?Kt:n instanceof Le?_r:(r=Le(n))?(n=r,_r):_o)(e,n)}function wo(e){return function(){this.removeAttribute(e)}}function bo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Eo(e,n,r){var u,b,v=r+"";return function(){var E=this.getAttribute(e);return E===v?null:E===u?b:b=n(u=E,r)}}function Co(e,n,r){var u,b,v=r+"";return function(){var E=this.getAttributeNS(e.space,e.local);return E===v?null:E===u?b:b=n(u=E,r)}}function To(e,n,r){var u,v,b;return function(){var E,S,T=r(this);return null==T?void this.removeAttribute(e):(E=this.getAttribute(e))===(S=T+"")?null:E===u&&S===v?b:(v=S,b=n(u=E,T))}}function Mo(e,n,r){var u,v,b;return function(){var E,S,T=r(this);return null==T?void this.removeAttributeNS(e.space,e.local):(E=this.getAttributeNS(e.space,e.local))===(S=T+"")?null:E===u&&S===v?b:(v=S,b=n(u=E,T))}}function Ao(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function Io(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function So(e,n){var r,u;function v(){var b=n.apply(this,arguments);return b!==u&&(r=(u=b)&&Io(e,b)),r}return v._value=n,v}function No(e,n){var r,u;function v(){var b=n.apply(this,arguments);return b!==u&&(r=(u=b)&&Ao(e,b)),r}return v._value=n,v}function Lo(e,n){return function(){xn(this,e).delay=+n.apply(this,arguments)}}function Fo(e,n){return n=+n,function(){xn(this,e).delay=n}}function Do(e,n){return function(){jt(this,e).duration=+n.apply(this,arguments)}}function Go(e,n){return n=+n,function(){jt(this,e).duration=n}}function Bo(e,n){if("function"!=typeof n)throw new Error;return function(){jt(this,e).ease=n}}function zo(e,n,r){var u,v,b=function Vo(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||"start"===n})}(n)?xn:jt;return function(){var E=b(this,e),T=E.on;T!==u&&(v=(u=T).copy()).on(n,r),E.on=v}}var Wo=Ee.prototype.constructor;function Er(e){return function(){this.style.removeProperty(e)}}function rs(e,n,r){return function(u){this.style.setProperty(e,n.call(this,u),r)}}function is(e,n,r){var u,v;function b(){var E=n.apply(this,arguments);return E!==v&&(u=(v=E)&&rs(e,E,r)),u}return b._value=n,b}function hs(e){return function(n){this.textContent=e.call(this,n)}}function ls(e){var n,r;function u(){var v=e.apply(this,arguments);return v!==r&&(n=(r=v)&&hs(v)),n}return u._value=e,u}var ps=0;function $t(e,n,r,u){this._groups=e,this._parents=n,this._name=r,this._id=u}function Cr(){return++ps}var pe=Ee.prototype;$t.prototype=function gs(e){return Ee().transition(e)}.prototype={constructor:$t,select:function Jo(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=w(e));for(var u=this._groups,v=u.length,b=new Array(v),E=0;E<v;++E)for(var R,$,T=u[E],S=T.length,D=b[E]=new Array(S),j=0;j<S;++j)(R=T[j])&&($=e.call(R,R.__data__,j,T))&&("__data__"in R&&($.__data__=R.__data__),D[j]=$,en(D[j],n,r,j,D,Zt(R,r)));return new $t(b,this._parents,n,r)},selectAll:function Xo(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=k(e));for(var u=this._groups,v=u.length,b=[],E=[],T=0;T<v;++T)for(var R,S=u[T],D=S.length,$=0;$<D;++$)if(R=S[$]){for(var nt,j=e.call(R,R.__data__,$,S),q=Zt(R,r),st=0,ht=j.length;st<ht;++st)(nt=j[st])&&en(nt,n,r,st,j,q);b.push(j),E.push(R)}return new $t(b,E,n,r)},filter:function Ho(e){"function"!=typeof e&&(e=A(e));for(var n=this._groups,r=n.length,u=new Array(r),v=0;v<r;++v)for(var S,b=n[v],E=b.length,T=u[v]=[],D=0;D<E;++D)(S=b[D])&&e.call(S,S.__data__,D,b)&&T.push(S);return new $t(u,this._parents,this._name,this._id)},merge:function Ro(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,u=n.length,v=r.length,b=Math.min(u,v),E=new Array(u),T=0;T<b;++T)for(var j,S=n[T],D=r[T],R=S.length,$=E[T]=new Array(R),nt=0;nt<R;++nt)(j=S[nt]||D[nt])&&($[nt]=j);for(;T<u;++T)E[T]=n[T];return new $t(E,this._parents,this._name,this._id)},selection:function Qo(){return new Wo(this._groups,this._parents)},transition:function fs(){for(var e=this._name,n=this._id,r=Cr(),u=this._groups,v=u.length,b=0;b<v;++b)for(var S,E=u[b],T=E.length,D=0;D<T;++D)if(S=E[D]){var R=Zt(S,n);en(S,e,r,D,E,{time:R.time+R.delay+R.duration,delay:0,duration:R.duration,ease:R.ease})}return new $t(u,this._parents,e,r)},call:pe.call,nodes:pe.nodes,node:pe.node,size:pe.size,empty:pe.empty,each:pe.each,on:function Yo(e,n){var r=this._id;return arguments.length<2?Zt(this.node(),r).on.on(e):this.each(zo(r,e,n))},attr:function ko(e,n){var r=rt(e),u="transform"===r?qi:br;return this.attrTween(e,"function"==typeof n?(r.local?Mo:To)(r,u,bn(this,"attr."+e,n)):null==n?(r.local?bo:wo)(r):(r.local?Co:Eo)(r,u,n))},attrTween:function Oo(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;var u=rt(e);return this.tween(r,(u.local?So:No)(u,n))},style:function ns(e,n,r){var u="transform"==(e+="")?Ki:br;return null==n?this.styleTween(e,function Ko(e,n){var r,u,v;return function(){var b=Ft(this,e),E=(this.style.removeProperty(e),Ft(this,e));return b===E?null:b===r&&E===u?v:v=n(r=b,u=E)}}(e,u)).on("end.style."+e,Er(e)):"function"==typeof n?this.styleTween(e,function ts(e,n,r){var u,v,b;return function(){var E=Ft(this,e),T=r(this),S=T+"";return null==T&&(this.style.removeProperty(e),S=T=Ft(this,e)),E===S?null:E===u&&S===v?b:(v=S,b=n(u=E,T))}}(e,u,bn(this,"style."+e,n))).each(function es(e,n){var r,u,v,T,b="style."+n,E="end."+b;return function(){var S=jt(this,e),D=S.on,R=null==S.value[b]?T||(T=Er(n)):void 0;(D!==r||v!==R)&&(u=(r=D).copy()).on(E,v=R),S.on=u}}(this._id,e)):this.styleTween(e,function qo(e,n,r){var u,b,v=r+"";return function(){var E=Ft(this,e);return E===v?null:E===u?b:b=n(u=E,r)}}(e,u,n),r).on("end.style."+e,null)},styleTween:function os(e,n,r){var u="style."+(e+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==n)return this.tween(u,null);if("function"!=typeof n)throw new Error;return this.tween(u,is(e,n,r??""))},text:function us(e){return this.tween("text","function"==typeof e?function as(e){return function(){var n=e(this);this.textContent=n??""}}(bn(this,"text",e)):function ss(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function cs(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,ls(e))},remove:function $o(){return this.on("end.remove",function jo(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}(this._id))},tween:function no(e,n){var r=this._id;if(e+="",arguments.length<2){for(var E,u=Zt(this.node(),r).tween,v=0,b=u.length;v<b;++v)if((E=u[v]).name===e)return E.value;return null}return this.each((null==n?to:eo)(r,e,n))},delay:function Po(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?Lo:Fo)(n,e)):Zt(this.node(),n).delay},duration:function Zo(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?Do:Go)(n,e)):Zt(this.node(),n).duration},ease:function Uo(e){var n=this._id;return arguments.length?this.each(Bo(n,e)):Zt(this.node(),n).ease},end:function ds(){var e,n,r=this,u=r._id,v=r.size();return new Promise(function(b,E){var T={value:E},S={value:function(){0==--v&&b()}};r.each(function(){var D=jt(this,u),R=D.on;R!==e&&((n=(e=R).copy())._.cancel.push(T),n._.interrupt.push(T),n._.end.push(S)),D.on=n})})}};var An={time:null,delay:0,duration:250,ease:function ms(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function vs(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))return An.time=fe(),An;return r}Ee.prototype.interrupt=function Xi(e){return this.each(function(){!function Ji(e,n){var u,v,E,r=e.__transition,b=!0;if(r){for(E in n=null==n?null:n+"",r)(u=r[E]).name===n?(v=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(v?"interrupt":"cancel",e,e.__data__,u.index,u.group),delete r[E]):b=!1;b&&delete e.__transition}}(this,e)})},Ee.prototype.transition=function ys(e){var n,r;e instanceof $t?(n=e._id,e=e._name):(n=Cr(),(r=An).time=fe(),e=null==e?null:e+"");for(var u=this._groups,v=u.length,b=0;b<v;++b)for(var S,E=u[b],T=E.length,D=0;D<T;++D)(S=E[D])&&en(S,e,n,D,E,r||vs(S,n));return new $t(u,this._parents,e,n)};var Tr=o(7579),Mr=o(727),kr=o(9751),Ar=o(9646),_s=o(4968),ws=o(590),bs=o(8372);"function"==typeof Symbol&&Symbol.iterator;Math.cos,Math.sin,Math.PI;function Ss(e){return typeof e>"u"}Math.tan;function Sr(e){return"matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")"}function Fs(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)}function Ps(e){return Array.isArray(e)?e:Array.from(e)}function Fe(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var u=function($,j){return{a:$.a*j.a+$.c*j.b,c:$.a*j.c+$.c*j.d,e:$.a*j.e+$.c*j.f+$.e,b:$.b*j.a+$.d*j.b,d:$.b*j.c+$.d*j.d,f:$.b*j.e+$.d*j.f+$.f}};switch((n=Array.isArray(n[0])?n[0]:n).length){case 0:throw new Error("no matrices provided");case 1:return n[0];case 2:return u(n[0],n[1]);default:var v=n,b=Ps(v),E=b[0],T=b[1],S=b.slice(2),D=u(E,T);return Fe.apply(void 0,[D].concat(Fs(S)))}}function Nr(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e,b:0,d:1,f:n}}class Or extends Map{constructor(n,r=Pr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),null!=n)for(const[u,v]of n)this.set(u,v)}get(n){return super.get(In(this,n))}has(n){return super.has(In(this,n))}set(n,r){return super.set(Lr(this,n),r)}delete(n){return super.delete(Fr(this,n))}}class Lu extends Set{constructor(n,r=Pr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),null!=n)for(const u of n)this.add(u)}has(n){return super.has(In(this,n))}add(n){return super.add(Lr(this,n))}delete(n){return super.delete(Fr(this,n))}}function In({_intern:e,_key:n},r){const u=n(r);return e.has(u)?e.get(u):r}function Lr({_intern:e,_key:n},r){const u=n(r);return e.has(u)?e.get(u):(e.set(u,r),r)}function Fr({_intern:e,_key:n},r){const u=n(r);return e.has(u)&&(r=e.get(u),e.delete(u)),r}function Pr(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Gs(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e)}return this}const Dr=Symbol("implicit");function Gr(){var e=new Or,n=[],r=[],u=Dr;function v(b){let E=e.get(b);if(void 0===E){if(u!==Dr)return u;e.set(b,E=n.push(b)-1)}return r[E%r.length]}return v.domain=function(b){if(!arguments.length)return n.slice();n=[],e=new Or;for(const E of b)e.has(E)||e.set(E,n.push(E)-1);return v},v.range=function(b){return arguments.length?(r=Array.from(b),v):r.slice()},v.unknown=function(b){return arguments.length?(u=b,v):u},v.copy=function(){return Gr(n,r).unknown(u)},Gs.apply(v,arguments),v}var me=o(9695);function Zs(e,n){var r;function u(){var v,E,b=r.length,T=0,S=0;for(v=0;v<b;++v)T+=(E=r[v]).x,S+=E.y;for(T=T/b-e,S=S/b-n,v=0;v<b;++v)(E=r[v]).x-=T,E.y-=S}return null==e&&(e=0),null==n&&(n=0),u.initialize=function(v){r=v},u.x=function(v){return arguments.length?(e=+v,u):e},u.y=function(v){return arguments.length?(n=+v,u):n},u}function Mt(e){return function(){return e}}function qt(){return 1e-6*(Math.random()-.5)}function Zr(e,n,r,u){if(isNaN(n)||isNaN(r))return e;var v,$,j,nt,q,st,ht,ft,yt,b=e._root,E={data:u},T=e._x0,S=e._y0,D=e._x1,R=e._y1;if(!b)return e._root=E,e;for(;b.length;)if((st=n>=($=(T+D)/2))?T=$:D=$,(ht=r>=(j=(S+R)/2))?S=j:R=j,v=b,!(b=b[ft=ht<<1|st]))return v[ft]=E,e;if(nt=+e._x.call(null,b.data),q=+e._y.call(null,b.data),n===nt&&r===q)return E.next=b,v?v[ft]=E:e._root=E,e;do{v=v?v[ft]=new Array(4):e._root=new Array(4),(st=n>=($=(T+D)/2))?T=$:D=$,(ht=r>=(j=(S+R)/2))?S=j:R=j}while((ft=ht<<1|st)==(yt=(q>=j)<<1|nt>=$));return v[yt]=b,v[ft]=E,e}function Nt(e,n,r,u,v){this.node=e,this.x0=n,this.y0=r,this.x1=u,this.y1=v}function Qs(e){return e[0]}function qs(e){return e[1]}function Sn(e,n,r){var u=new Nn(n??Qs,r??qs,NaN,NaN,NaN,NaN);return null==e?u:u.addAll(e)}function Nn(e,n,r,u,v,b){this._x=e,this._y=n,this._x0=r,this._y0=u,this._x1=v,this._y1=b,this._root=void 0}function Br(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Ot=Sn.prototype=Nn.prototype;function ea(e){return e.x+e.vx}function na(e){return e.y+e.vy}function Ur(e){var n,r,u=1,v=1;function b(){for(var S,R,$,j,nt,q,st,D=n.length,ht=0;ht<v;++ht)for(R=Sn(n,ea,na).visitAfter(E),S=0;S<D;++S)$=n[S],q=r[$.index],st=q*q,j=$.x+$.vx,nt=$.y+$.vy,R.visit(ft);function ft(yt,pt,Et,Ct,Lt){var kt=yt.data,Bt=yt.r,At=q+Bt;if(!kt)return pt>j+At||Ct<j-At||Et>nt+At||Lt<nt-At;if(kt.index>$.index){var te=j-kt.x-kt.vx,ee=nt-kt.y-kt.vy,Xt=te*te+ee*ee;Xt<At*At&&(0===te&&(Xt+=(te=qt())*te),0===ee&&(Xt+=(ee=qt())*ee),Xt=(At-(Xt=Math.sqrt(Xt)))/Xt*u,$.vx+=(te*=Xt)*(At=(Bt*=Bt)/(st+Bt)),$.vy+=(ee*=Xt)*At,kt.vx-=te*(At=1-At),kt.vy-=ee*At)}}}function E(S){if(S.data)return S.r=r[S.data.index];for(var D=S.r=0;D<4;++D)S[D]&&S[D].r>S.r&&(S.r=S[D].r)}function T(){if(n){var S,R,D=n.length;for(r=new Array(D),S=0;S<D;++S)R=n[S],r[R.index]=+e(R,S,n)}}return"function"!=typeof e&&(e=Mt(null==e?1:+e)),b.initialize=function(S){n=S,T()},b.iterations=function(S){return arguments.length?(v=+S,b):v},b.strength=function(S){return arguments.length?(u=+S,b):u},b.radius=function(S){return arguments.length?(e="function"==typeof S?S:Mt(+S),T(),b):e},b}Ot.copy=function(){var r,u,e=new Nn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return e;if(!n.length)return e._root=Br(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var v=0;v<4;++v)(u=n.source[v])&&(u.length?r.push({source:u,target:n.target[v]=new Array(4)}):n.target[v]=Br(u));return e},Ot.add=function Bs(e){var n=+this._x.call(null,e),r=+this._y.call(null,e);return Zr(this.cover(n,r),n,r,e)},Ot.addAll=function Us(e){var n,r,v,b,u=e.length,E=new Array(u),T=new Array(u),S=1/0,D=1/0,R=-1/0,$=-1/0;for(r=0;r<u;++r)isNaN(v=+this._x.call(null,n=e[r]))||isNaN(b=+this._y.call(null,n))||(E[r]=v,T[r]=b,v<S&&(S=v),v>R&&(R=v),b<D&&(D=b),b>$&&($=b));if(S>R||D>$)return this;for(this.cover(S,D).cover(R,$),r=0;r<u;++r)Zr(this,E[r],T[r],e[r]);return this},Ot.cover=function Hs(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,u=this._y0,v=this._x1,b=this._y1;if(isNaN(r))v=(r=Math.floor(e))+1,b=(u=Math.floor(n))+1;else{for(var S,D,E=v-r,T=this._root;r>e||e>=v||u>n||n>=b;)switch(D=(n<u)<<1|e<r,S=new Array(4),S[D]=T,T=S,E*=2,D){case 0:v=r+E,b=u+E;break;case 1:r=v-E,b=u+E;break;case 2:v=r+E,u=b-E;break;case 3:r=v-E,u=b-E}this._root&&this._root.length&&(this._root=T)}return this._x0=r,this._y0=u,this._x1=v,this._y1=b,this},Ot.data=function Rs(){var e=[];return this.visit(function(n){if(!n.length)do{e.push(n.data)}while(n=n.next)}),e},Ot.extent=function Vs(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ot.find=function zs(e,n,r){var u,E,T,S,D,q,st,v=this._x0,b=this._y0,R=this._x1,$=this._y1,j=[],nt=this._root;for(nt&&j.push(new Nt(nt,v,b,R,$)),null==r?r=1/0:(v=e-r,b=n-r,R=e+r,$=n+r,r*=r);q=j.pop();)if(!(!(nt=q.node)||(E=q.x0)>R||(T=q.y0)>$||(S=q.x1)<v||(D=q.y1)<b))if(nt.length){var ht=(E+S)/2,ft=(T+D)/2;j.push(new Nt(nt[3],ht,ft,S,D),new Nt(nt[2],E,ft,ht,D),new Nt(nt[1],ht,T,S,ft),new Nt(nt[0],E,T,ht,ft)),(st=(n>=ft)<<1|e>=ht)&&(q=j[j.length-1],j[j.length-1]=j[j.length-1-st],j[j.length-1-st]=q)}else{var yt=e-+this._x.call(null,nt.data),pt=n-+this._y.call(null,nt.data),Et=yt*yt+pt*pt;if(Et<r){var Ct=Math.sqrt(r=Et);v=e-Ct,b=n-Ct,R=e+Ct,$=n+Ct,u=nt.data}}return u},Ot.remove=function Ys(e){if(isNaN(R=+this._x.call(null,e))||isNaN($=+this._y.call(null,e)))return this;var n,u,v,b,R,$,j,nt,q,st,ht,ft,r=this._root,E=this._x0,T=this._y0,S=this._x1,D=this._y1;if(!r)return this;if(r.length)for(;;){if((q=R>=(j=(E+S)/2))?E=j:S=j,(st=$>=(nt=(T+D)/2))?T=nt:D=nt,n=r,!(r=r[ht=st<<1|q]))return this;if(!r.length)break;(n[ht+1&3]||n[ht+2&3]||n[ht+3&3])&&(u=n,ft=ht)}for(;r.data!==e;)if(v=r,!(r=r.next))return this;return(b=r.next)&&delete r.next,v?(b?v.next=b:delete v.next,this):n?(b?n[ht]=b:delete n[ht],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(u?u[ft]=r:this._root=r),this):(this._root=b,this)},Ot.removeAll=function js(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},Ot.root=function $s(){return this._root},Ot.size=function Js(){var e=0;return this.visit(function(n){if(!n.length)do{++e}while(n=n.next)}),e},Ot.visit=function Xs(e){var r,v,b,E,T,S,n=[],u=this._root;for(u&&n.push(new Nt(u,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(u=r.node,b=r.x0,E=r.y0,T=r.x1,S=r.y1)&&u.length){var D=(b+T)/2,R=(E+S)/2;(v=u[3])&&n.push(new Nt(v,D,R,T,S)),(v=u[2])&&n.push(new Nt(v,b,R,D,S)),(v=u[1])&&n.push(new Nt(v,D,E,T,R)),(v=u[0])&&n.push(new Nt(v,b,E,D,R))}return this},Ot.visitAfter=function Ws(e){var u,n=[],r=[];for(this._root&&n.push(new Nt(this._root,this._x0,this._y0,this._x1,this._y1));u=n.pop();){var v=u.node;if(v.length){var b,E=u.x0,T=u.y0,S=u.x1,D=u.y1,R=(E+S)/2,$=(T+D)/2;(b=v[0])&&n.push(new Nt(b,E,T,R,$)),(b=v[1])&&n.push(new Nt(b,R,T,S,$)),(b=v[2])&&n.push(new Nt(b,E,$,R,D)),(b=v[3])&&n.push(new Nt(b,R,$,S,D))}r.push(u)}for(;u=r.pop();)e(u.node,u.x0,u.y0,u.x1,u.y1);return this},Ot.x=function Ks(e){return arguments.length?(this._x=e,this):this._x},Ot.y=function ta(e){return arguments.length?(this._y=e,this):this._y};var Gt="$";function an(){}function Hr(e,n){var r=new an;if(e instanceof an)e.each(function(T,S){r.set(S,T)});else if(Array.isArray(e)){var b,u=-1,v=e.length;if(null==n)for(;++u<v;)r.set(u,e[u]);else for(;++u<v;)r.set(n(b=e[u],u,e),b)}else if(e)for(var E in e)r.set(E,e[E]);return r}an.prototype=Hr.prototype={constructor:an,has:function(e){return Gt+e in this},get:function(e){return this[Gt+e]},set:function(e,n){return this[Gt+e]=n,this},remove:function(e){var n=Gt+e;return n in this&&delete this[n]},clear:function(){for(var e in this)e[0]===Gt&&delete this[e]},keys:function(){var e=[];for(var n in this)n[0]===Gt&&e.push(n.slice(1));return e},values:function(){var e=[];for(var n in this)n[0]===Gt&&e.push(this[n]);return e},entries:function(){var e=[];for(var n in this)n[0]===Gt&&e.push({key:n.slice(1),value:this[n]});return e},size:function(){var e=0;for(var n in this)n[0]===Gt&&++e;return e},empty:function(){for(var e in this)if(e[0]===Gt)return!1;return!0},each:function(e){for(var n in this)n[0]===Gt&&e(this[n],n.slice(1),this)}};const On=Hr;function un(){}var se=On.prototype;un.prototype=function oa(e,n){var r=new un;if(e instanceof un)e.each(function(b){r.add(b)});else if(e){var u=-1,v=e.length;if(null==n)for(;++u<v;)r.add(e[u]);else for(;++u<v;)r.add(n(e[u],u,e))}return r}.prototype={constructor:un,has:se.has,add:function(e){return this[Gt+(e+="")]=e,this},remove:se.remove,clear:se.clear,values:se.keys,size:se.size,empty:se.empty,each:se.each};function sa(e){return e.index}function zr(e,n){var r=e.get(n);if(!r)throw new Error("missing: "+n);return r}function Yr(e){var u,b,E,T,S,n=sa,r=function R(st){return 1/Math.min(T[st.source.index],T[st.target.index])},v=Mt(30),D=1;function $(st){for(var ht=0,ft=e.length;ht<D;++ht)for(var pt,Et,Ct,Lt,kt,Bt,At,yt=0;yt<ft;++yt)Et=(pt=e[yt]).source,Lt=(Ct=pt.target).x+Ct.vx-Et.x-Et.vx||qt(),kt=Ct.y+Ct.vy-Et.y-Et.vy||qt(),Lt*=Bt=((Bt=Math.sqrt(Lt*Lt+kt*kt))-b[yt])/Bt*st*u[yt],kt*=Bt,Ct.vx-=Lt*(At=S[yt]),Ct.vy-=kt*At,Et.vx+=Lt*(At=1-At),Et.vy+=kt*At}function j(){if(E){var st,pt,ht=E.length,ft=e.length,yt=On(E,n);for(st=0,T=new Array(ht);st<ft;++st)(pt=e[st]).index=st,"object"!=typeof pt.source&&(pt.source=zr(yt,pt.source)),"object"!=typeof pt.target&&(pt.target=zr(yt,pt.target)),T[pt.source.index]=(T[pt.source.index]||0)+1,T[pt.target.index]=(T[pt.target.index]||0)+1;for(st=0,S=new Array(ft);st<ft;++st)pt=e[st],S[st]=T[pt.source.index]/(T[pt.source.index]+T[pt.target.index]);u=new Array(ft),nt(),b=new Array(ft),q()}}function nt(){if(E)for(var st=0,ht=e.length;st<ht;++st)u[st]=+r(e[st],st,e)}function q(){if(E)for(var st=0,ht=e.length;st<ht;++st)b[st]=+v(e[st],st,e)}return null==e&&(e=[]),$.initialize=function(st){E=st,j()},$.links=function(st){return arguments.length?(e=st,j(),$):e},$.id=function(st){return arguments.length?(n=st,$):n},$.iterations=function(st){return arguments.length?(D=+st,$):D},$.strength=function(st){return arguments.length?(r="function"==typeof st?st:Mt(+st),nt(),$):r},$.distance=function(st){return arguments.length?(v="function"==typeof st?st:Mt(+st),q(),$):v},$}function aa(e){return e.x}function ua(e){return e.y}var la=Math.PI*(3-Math.sqrt(5));function jr(e){var n,r=1,u=.001,v=1-Math.pow(u,1/300),b=0,E=.6,T=On(),S=Ke(R),D=pn("tick","end");function R(){$(),D.call("tick",n),r<u&&(S.stop(),D.call("end",n))}function $(q){var st,ft,ht=e.length;void 0===q&&(q=1);for(var yt=0;yt<q;++yt)for(r+=(b-r)*v,T.each(function(pt){pt(r)}),st=0;st<ht;++st)null==(ft=e[st]).fx?ft.x+=ft.vx*=E:(ft.x=ft.fx,ft.vx=0),null==ft.fy?ft.y+=ft.vy*=E:(ft.y=ft.fy,ft.vy=0);return n}function j(){for(var ht,q=0,st=e.length;q<st;++q){if((ht=e[q]).index=q,null!=ht.fx&&(ht.x=ht.fx),null!=ht.fy&&(ht.y=ht.fy),isNaN(ht.x)||isNaN(ht.y)){var ft=10*Math.sqrt(q),yt=q*la;ht.x=ft*Math.cos(yt),ht.y=ft*Math.sin(yt)}(isNaN(ht.vx)||isNaN(ht.vy))&&(ht.vx=ht.vy=0)}}function nt(q){return q.initialize&&q.initialize(e),q}return null==e&&(e=[]),j(),n={tick:$,restart:function(){return S.restart(R),n},stop:function(){return S.stop(),n},nodes:function(q){return arguments.length?(e=q,j(),T.each(nt),n):e},alpha:function(q){return arguments.length?(r=+q,n):r},alphaMin:function(q){return arguments.length?(u=+q,n):u},alphaDecay:function(q){return arguments.length?(v=+q,n):+v},alphaTarget:function(q){return arguments.length?(b=+q,n):b},velocityDecay:function(q){return arguments.length?(E=1-q,n):1-E},force:function(q,st){return arguments.length>1?(null==st?T.remove(q):T.set(q,nt(st)),n):T.get(q)},find:function(q,st,ht){var pt,Et,Ct,Lt,kt,ft=0,yt=e.length;for(null==ht?ht=1/0:ht*=ht,ft=0;ft<yt;++ft)(Ct=(pt=q-(Lt=e[ft]).x)*pt+(Et=st-Lt.y)*Et)<ht&&(kt=Lt,ht=Ct);return kt},on:function(q,st){return arguments.length>1?(D.on(q,st),n):D.on(q)}}}function $r(){var e,n,r,v,u=Mt(-30),b=1,E=1/0,T=.81;function S(j){var nt,q=e.length,st=Sn(e,aa,ua).visitAfter(R);for(r=j,nt=0;nt<q;++nt)n=e[nt],st.visit($)}function D(){if(e){var j,q,nt=e.length;for(v=new Array(nt),j=0;j<nt;++j)q=e[j],v[q.index]=+u(q,j,e)}}function R(j){var q,st,ft,yt,pt,nt=0,ht=0;if(j.length){for(ft=yt=pt=0;pt<4;++pt)(q=j[pt])&&(st=Math.abs(q.value))&&(nt+=q.value,ht+=st,ft+=st*q.x,yt+=st*q.y);j.x=ft/ht,j.y=yt/ht}else{(q=j).x=q.data.x,q.y=q.data.y;do{nt+=v[q.data.index]}while(q=q.next)}j.value=nt}function $(j,nt,q,st){if(!j.value)return!0;var ht=j.x-n.x,ft=j.y-n.y,yt=st-nt,pt=ht*ht+ft*ft;if(yt*yt/T<pt)return pt<E&&(0===ht&&(pt+=(ht=qt())*ht),0===ft&&(pt+=(ft=qt())*ft),pt<b&&(pt=Math.sqrt(b*pt)),n.vx+=ht*j.value*r/pt,n.vy+=ft*j.value*r/pt),!0;if(!(j.length||pt>=E)){(j.data!==n||j.next)&&(0===ht&&(pt+=(ht=qt())*ht),0===ft&&(pt+=(ft=qt())*ft),pt<b&&(pt=Math.sqrt(b*pt)));do{j.data!==n&&(yt=v[j.data.index]*r/pt,n.vx+=ht*yt,n.vy+=ft*yt)}while(j=j.next)}}return S.initialize=function(j){e=j,D()},S.strength=function(j){return arguments.length?(u="function"==typeof j?j:Mt(+j),D(),S):u},S.distanceMin=function(j){return arguments.length?(b=j*j,S):Math.sqrt(b)},S.distanceMax=function(j){return arguments.length?(E=j*j,S):Math.sqrt(E)},S.theta=function(j){return arguments.length?(T=j*j,S):Math.sqrt(T)},S}function ca(e,n,r){var u,b,E,v=Mt(.1);function T(D){for(var R=0,$=u.length;R<$;++R){var j=u[R],nt=j.x-n||1e-6,q=j.y-r||1e-6,st=Math.sqrt(nt*nt+q*q),ht=(E[R]-st)*b[R]*D/st;j.vx+=nt*ht,j.vy+=q*ht}}function S(){if(u){var D,R=u.length;for(b=new Array(R),E=new Array(R),D=0;D<R;++D)E[D]=+e(u[D],D,u),b[D]=isNaN(E[D])?0:+v(u[D],D,u)}}return"function"!=typeof e&&(e=Mt(+e)),null==n&&(n=0),null==r&&(r=0),T.initialize=function(D){u=D,S()},T.strength=function(D){return arguments.length?(v="function"==typeof D?D:Mt(+D),S(),T):v},T.radius=function(D){return arguments.length?(e="function"==typeof D?D:Mt(+D),S(),T):e},T.x=function(D){return arguments.length?(n=+D,T):n},T.y=function(D){return arguments.length?(r=+D,T):r},T}function fa(e){var r,u,v,n=Mt(.1);function b(T){for(var R,S=0,D=r.length;S<D;++S)(R=r[S]).vx+=(v[S]-R.x)*u[S]*T}function E(){if(r){var T,S=r.length;for(u=new Array(S),v=new Array(S),T=0;T<S;++T)u[T]=isNaN(v[T]=+e(r[T],T,r))?0:+n(r[T],T,r)}}return"function"!=typeof e&&(e=Mt(null==e?0:+e)),b.initialize=function(T){r=T,E()},b.strength=function(T){return arguments.length?(n="function"==typeof T?T:Mt(+T),E(),b):n},b.x=function(T){return arguments.length?(e="function"==typeof T?T:Mt(+T),E(),b):e},b}function da(e){var r,u,v,n=Mt(.1);function b(T){for(var R,S=0,D=r.length;S<D;++S)(R=r[S]).vy+=(v[S]-R.y)*u[S]*T}function E(){if(r){var T,S=r.length;for(u=new Array(S),v=new Array(S),T=0;T<S;++T)u[T]=isNaN(v[T]=+e(r[T],T,r))?0:+n(r[T],T,r)}}return"function"!=typeof e&&(e=Mt(null==e?0:+e)),b.initialize=function(T){r=T,E()},b.strength=function(T){return arguments.length?(n="function"==typeof T?T:Mt(+T),E(),b):n},b.y=function(T){return arguments.length?(e="function"==typeof T?T:Mt(+T),E(),b):e},b}var pa=o(7824);function ga(e,n,r){var u=new Ae,v=n;return null==n?(u.restart(e,n,r),u):(n=+n,r=null==r?fe():+r,u.restart(function b(E){E+=v,u.restart(b,v+=n,r),e(E)},n,r),u)}const ma=["linkTemplate"],va=["nodeTemplate"],ya=["clusterTemplate"],xa=["defsTemplate"],_a=["miniMapNodeTemplate"],wa=["nodeElement"],ba=["linkElement"];function Ea(e,n){if(1&e&&(t.O4$(),t.GkF(0,14)),2&e){const r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.defsTemplate)}}function Ca(e,n){if(1&e&&(t.O4$(),t._UZ(0,"path",15)),2&e){const r=n.$implicit;t.uIk("d",r.textPath)("id",r.id)}}const Pe=function(e){return{$implicit:e}};function Ta(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,r))}}function Ma(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA()()),2&e){const r=t.oxw().$implicit;t.xp6(1),t.uIk("width",r.dimension.width)("height",r.dimension.height)("fill",null==r.data?null:r.data.color),t.xp6(1),t.uIk("x",10)("y",r.dimension.height/2),t.xp6(1),t.hij(" ",r.label," ")}}function ka(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const b=t.CHM(r).$implicit,E=t.oxw(2);return t.KtG(E.onClick(b))}),t.YNc(2,Ta,1,4,"ng-container",18),t.YNc(3,Ma,4,6,"g",19),t.qZA()}if(2&e){const r=n.$implicit,u=t.oxw(2);t.ekj("old-node",u.animate&&u.oldClusters.has(r.id)),t.Q6J("id",r.id),t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",u.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!u.clusterTemplate)}}function Aa(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.linkTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,r))}}function Ia(e,n){if(1&e&&(t.O4$(),t._UZ(0,"path",26)),2&e){const r=t.oxw().$implicit;t.uIk("d",r.line)}}function Sa(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,Aa,1,4,"ng-container",18),t.YNc(3,Ia,1,1,"path",25),t.qZA()),2&e){const r=n.$implicit,u=t.oxw(2);t.Q6J("id",r.id),t.xp6(2),t.Q6J("ngIf",u.linkTemplate),t.xp6(1),t.Q6J("ngIf",!u.linkTemplate)}}function Na(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,r))}}function Oa(e,n){if(1&e&&(t.O4$(),t._UZ(0,"circle",30)),2&e){const r=t.oxw().$implicit;t.uIk("cx",r.dimension.width/2)("cy",r.dimension.height/2)("fill",null==r.data?null:r.data.color)}}function La(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const b=t.CHM(r).$implicit,E=t.oxw(2);return t.KtG(E.onClick(b))})("mousedown",function(v){const E=t.CHM(r).$implicit,T=t.oxw(2);return t.KtG(T.onNodeMouseDown(v,E))}),t.YNc(2,Na,1,4,"ng-container",18),t.YNc(3,Oa,1,3,"circle",29),t.qZA()}if(2&e){const r=n.$implicit,u=t.oxw(2);t.ekj("old-node",u.animate&&u.oldNodes.has(r.id)),t.Q6J("id",r.id),t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",u.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!u.nodeTemplate)}}function Fa(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(v){t.CHM(r);const b=t.oxw();return t.KtG(b.onTouchStart(v))})("touchend",function(v){t.CHM(r);const b=t.oxw();return t.KtG(b.onTouchEnd(v))}),t.TgZ(1,"defs"),t.YNc(2,Ea,1,1,"ng-container",5),t.YNc(3,Ca,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.isPanning=!0)}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,ka,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,Sa,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,La,4,6,"g",13),t.qZA()()}if(2&e){const r=t.oxw();t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",r.defsTemplate),t.xp6(1),t.Q6J("ngForOf",r.graph.edges),t.xp6(1),t.uIk("width",100*r.dims.width)("height",100*r.dims.height)("transform","translate("+50*(-r.dims.width||0)+","+50*(-r.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",r.graph.clusters)("ngForTrackBy",r.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",r.graph.edges)("ngForTrackBy",r.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",r.graph.nodes)("ngForTrackBy",r.trackNodeBy)}}function Pa(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,r))}}function Da(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Pe,r))}}function Ga(e,n){if(1&e&&(t.O4$(),t._UZ(0,"circle",30)),2&e){const r=t.oxw().$implicit,u=t.oxw(2);t.uIk("cx",r.dimension.width/2/u.minimapScaleCoefficient)("cy",r.dimension.height/2/u.minimapScaleCoefficient)("fill",null==r.data?null:r.data.color)}}function Za(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,Pa,1,4,"ng-container",18),t.YNc(3,Da,1,4,"ng-container",18),t.YNc(4,Ga,1,3,"circle",29),t.qZA()),2&e){const r=n.$implicit,u=t.oxw(2);t.ekj("old-node",u.animate&&u.oldNodes.has(r.id)),t.Q6J("id",r.id),t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",u.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!u.miniMapNodeTemplate&&u.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!u.nodeTemplate&&!u.miniMapNodeTemplate)}}function Ba(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",31)(1,"rect",32),t.NdJ("mousedown",function(v){t.CHM(r);const b=t.oxw();return t.KtG(b.onMinimapPanTo(v))}),t.qZA(),t.TgZ(2,"g")(3,"g",33),t.YNc(4,Za,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.onMinimapDragMouseDown())}),t.qZA()()()}if(2&e){const r=t.oxw();t.uIk("transform",r.minimapTransform)("clip-path","url(#"+r.minimapClipPathId+")"),t.xp6(1),t.uIk("width",r.graphDims.width/r.minimapScaleCoefficient)("height",r.graphDims.height/r.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-r.minimapOffsetX/r.minimapScaleCoefficient+"px,"+-r.minimapOffsetY/r.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/r.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",r.graph.nodes)("ngForTrackBy",r.trackNodeBy),t.xp6(1),t.ekj("panning",r.isMinimapPanning),t.uIk("transform","translate("+r.panOffsetX/r.zoomLevel/-r.minimapScaleCoefficient+","+r.panOffsetY/r.zoomLevel/-r.minimapScaleCoefficient+")")("width",r.width/r.minimapScaleCoefficient/r.zoomLevel)("height",r.height/r.minimapScaleCoefficient/r.zoomLevel)}}const Jr={};function Jt(){let e=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return e=`a${e}`,Jr[e]?Jt():(Jr[e]=!0,e)}var De,e,Ge;function Ha(e,n,r){r=r||{};let u,v,b,E=null,T=0;function S(){T=!1===r.leading?0:+new Date,E=null,b=e.apply(u,v)}return function(...D){const R=+new Date;!T&&!1===r.leading&&(T=R);const $=n-(R-T);return u=this,v=D,$<=0?(clearTimeout(E),E=null,T=R,b=e.apply(u,v)):!E&&!1!==r.trailing&&(E=setTimeout(S,$)),b}}(e=De||(De={})).Both="both",e.Horizontal="horizontal",e.Vertical="vertical",function(e){e.UpperLeft="UpperLeft",e.UpperRight="UpperRight"}(Ge||(Ge={}));const Xr=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class Va{constructor(n,r,u){"string"==typeof n&&(n=Xr.find(v=>v.name===n)),this.colorDomain=n.domain,this.domain=r,this.customColors=u,this.scale=this.generateColorScheme(n,this.domain)}generateColorScheme(n,r){return"string"==typeof n&&(n=Xr.find(u=>u.name===n)),Gr().range(n.domain).domain(r)}getColor(n){if(null==n)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(n);const r=n.toString();let u;return this.customColors&&this.customColors.length>0&&(u=this.customColors.find(v=>v.name.toLowerCase()===r.toLowerCase())),u?u.value:this.scale(n)}}class Ze{constructor(n,r){this.element=n,this.zone=r,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const n=()=>{if(!this.element)return;const{offsetHeight:r,offsetWidth:u}=this.element.nativeElement;r&&u?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n())})}}var ae,Wr;Ze.\u0275fac=function(n){return new(n||Ze)(t.Y36(t.SBq),t.Y36(t.R0b))},Ze.\u0275dir=t.lG2({type:Ze,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),function(e){e.LEFT_TO_RIGHT="LR",e.RIGHT_TO_LEFT="RL",e.TOP_TO_BOTTOM="TB",e.BOTTOM_TO_TOM="BT"}(ae||(ae={})),function(e){e.CENTER="C",e.UP_LEFT="UL",e.UP_RIGHT="UR",e.DOWN_LEFT="DL",e.DOWN_RIGHT="DR"}(Wr||(Wr={}));function ve(e){return"string"==typeof e?{id:e,x:0,y:0}:e}function Kr(e,n){return"number"==typeof n?e[n]:n}const qr={dagre:class Ya{constructor(){this.defaultSettings={orientation:ae.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(n){this.createDagreGraph(n),me.layout(this.dagreGraph),n.edgeLabels=this.dagreGraph._edgeLabels;for(const r in this.dagreGraph._nodes){const u=this.dagreGraph._nodes[r],v=n.nodes.find(b=>b.id===u.id);v.position={x:u.x,y:u.y},v.dimension={width:u.width,height:u.height}}return n}updateEdge(n,r){const u=n.nodes.find(S=>S.id===r.source),v=n.nodes.find(S=>S.id===r.target),b=u.position.y<=v.position.y?-1:1,E={x:u.position.x,y:u.position.y-b*(u.dimension.height/2)},T={x:v.position.x,y:v.position.y+b*(v.dimension.height/2)};return r.points=[E,T],n}createDagreGraph(n){const r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new me.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=n.nodes.map(u=>{const v=Object.assign({},u);return v.width=u.dimension.width,v.height=u.dimension.height,v.x=u.position.x,v.y=u.position.y,v}),this.dagreEdges=n.edges.map(u=>{const v=Object.assign({},u);return v.id||(v.id=Jt()),v});for(const u of this.dagreNodes)u.width||(u.width=20),u.height||(u.height=30),this.dagreGraph.setNode(u.id,u);for(const u of this.dagreEdges)r.multigraph?this.dagreGraph.setEdge(u.source,u.target,u,u.id):this.dagreGraph.setEdge(u.source,u.target);return this.dagreGraph}},dagreCluster:class ja{constructor(){this.defaultSettings={orientation:ae.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(n){this.createDagreGraph(n),me.layout(this.dagreGraph),n.edgeLabels=this.dagreGraph._edgeLabels;const r=u=>{const v=this.dagreGraph._nodes[u.id];return{...u,position:{x:v.x,y:v.y},dimension:{width:v.width,height:v.height}}};return n.clusters=(n.clusters||[]).map(r),n.nodes=n.nodes.map(r),n}updateEdge(n,r){const u=n.nodes.find(S=>S.id===r.source),v=n.nodes.find(S=>S.id===r.target),b=u.position.y<=v.position.y?-1:1,E={x:u.position.x,y:u.position.y-b*(u.dimension.height/2)},T={x:v.position.x,y:v.position.y+b*(v.dimension.height/2)};return r.points=[E,T],n}createDagreGraph(n){const r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new me.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=n.nodes.map(u=>{const v=Object.assign({},u);return v.width=u.dimension.width,v.height=u.dimension.height,v.x=u.position.x,v.y=u.position.y,v}),this.dagreClusters=n.clusters||[],this.dagreEdges=n.edges.map(u=>{const v=Object.assign({},u);return v.id||(v.id=Jt()),v});for(const u of this.dagreNodes)this.dagreGraph.setNode(u.id,u);for(const u of this.dagreClusters)this.dagreGraph.setNode(u.id,u),u.childNodeIds.forEach(v=>{this.dagreGraph.setParent(v,u.id)});for(const u of this.dagreEdges)r.multigraph?this.dagreGraph.setEdge(u.source,u.target,u,u.id):this.dagreGraph.setEdge(u.source,u.target);return this.dagreGraph}},dagreNodesOnly:class Ja{constructor(){this.defaultSettings={orientation:ae.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(n){this.createDagreGraph(n),me.layout(this.dagreGraph),n.edgeLabels=this.dagreGraph._edgeLabels;for(const r in this.dagreGraph._nodes){const u=this.dagreGraph._nodes[r],v=n.nodes.find(b=>b.id===u.id);v.position={x:u.x,y:u.y},v.dimension={width:u.width,height:u.height}}for(const r of n.edges)this.updateEdge(n,r);return n}updateEdge(n,r){const u=n.nodes.find(q=>q.id===r.source),v=n.nodes.find(q=>q.id===r.target),b="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",E="y"===b?"x":"y",T="y"===b?"height":"width",S=u.position[b]<=v.position[b]?-1:1,D={[E]:u.position[E],[b]:u.position[b]-S*(u.dimension[T]/2)},R={[E]:v.position[E],[b]:v.position[b]+S*(v.dimension[T]/2)},$=this.settings.curveDistance||this.defaultSettings.curveDistance;r.points=[D,{[E]:D[E],[b]:D[b]-S*$},{[E]:R[E],[b]:R[b]+S*$},R];const j=`${r.source}\x01${r.target}\x01\0`,nt=n.edgeLabels[j];return nt&&(nt.points=r.points),n}createDagreGraph(n){const r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new me.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=n.nodes.map(u=>{const v=Object.assign({},u);return v.width=u.dimension.width,v.height=u.dimension.height,v.x=u.position.x,v.y=u.position.y,v}),this.dagreEdges=n.edges.map(u=>{const v=Object.assign({},u);return v.id||(v.id=Jt()),v});for(const u of this.dagreNodes)u.width||(u.width=20),u.height||(u.height=30),this.dagreGraph.setNode(u.id,u);for(const u of this.dagreEdges)r.multigraph?this.dagreGraph.setEdge(u.source,u.target,u,u.id):this.dagreGraph.setEdge(u.source,u.target);return this.dagreGraph}},d3ForceDirected:class Xa{constructor(){this.defaultSettings={force:jr().force("charge",$r().strength(-150)).force("collide",Ur(5)),forceLink:Yr().id(n=>n.id).distance(()=>100)},this.settings={},this.outputGraph$=new Tr.x}run(n){return this.inputGraph=n,this.d3Graph={nodes:[...this.inputGraph.nodes.map(r=>({...r}))],edges:[...this.inputGraph.edges.map(r=>({...r}))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(n,r){const u=Object.assign({},this.defaultSettings,this.settings);return u.force&&u.force.nodes(this.d3Graph.nodes).force("link",u.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(n){return this.outputGraph.nodes=this.d3Graph.nodes.map(r=>({...r,id:r.id||Jt(),position:{x:r.x,y:r.y},dimension:{width:r.dimension&&r.dimension.width||20,height:r.dimension&&r.dimension.height||20},transform:`translate(${r.x-(r.dimension&&r.dimension.width||20)/2||0}, ${r.y-(r.dimension&&r.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(r=>({...r,source:ve(r.source).id,target:ve(r.target).id,points:[{x:ve(r.source).x,y:ve(r.source).y},{x:ve(r.target).x,y:ve(r.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(n,r){this.settings.force.alphaTarget(.3).restart();const u=this.d3Graph.nodes.find(v=>v.id===n.id);u&&(this.draggingStart={x:r.x-u.x,y:r.y-u.y},u.fx=r.x-this.draggingStart.x,u.fy=r.y-this.draggingStart.y)}onDrag(n,r){if(!n)return;const u=this.d3Graph.nodes.find(v=>v.id===n.id);u&&(u.fx=r.x-this.draggingStart.x,u.fy=r.y-this.draggingStart.y)}onDragEnd(n,r){if(!n)return;const u=this.d3Graph.nodes.find(v=>v.id===n.id);u&&(this.settings.force.alphaTarget(0),u.fx=void 0,u.fy=void 0)}},colaForceDirected:class Wa{constructor(){this.defaultSettings={force:(0,pa.d3adaptor)({...m,...s,...p}).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new Tr.x}run(n){return this.inputGraph=n,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(r=>({...r,width:r.dimension?r.dimension.width:20,height:r.dimension?r.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(r=>({padding:5,groups:r.childNodeIds.map(u=>this.inputGraph.clusters.findIndex(v=>v.id===u)).filter(u=>u>=0),leaves:r.childNodeIds.map(u=>this.inputGraph.nodes.findIndex(v=>v.id===u)).filter(u=>u>=0)}))],links:[...this.inputGraph.edges.map(r=>{const u=this.inputGraph.nodes.findIndex(b=>r.source===b.id),v=this.inputGraph.nodes.findIndex(b=>r.target===b.id);if(-1!==u&&-1!==v)return{...r,source:u,target:v}}).filter(r=>!!r)],groupLinks:[...this.inputGraph.edges.map(r=>{const u=this.inputGraph.nodes.findIndex(b=>r.source===b.id),v=this.inputGraph.nodes.findIndex(b=>r.target===b.id);if(!(u>=0&&v>=0))return r}).filter(r=>!!r)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(n,r){const u=Object.assign({},this.defaultSettings,this.settings);return u.force&&u.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(n){return this.outputGraph.nodes=n.nodes.map(r=>({...r,id:r.id||Jt(),position:{x:r.x,y:r.y},dimension:{width:r.dimension&&r.dimension.width||20,height:r.dimension&&r.dimension.height||20},transform:`translate(${r.x-(r.dimension&&r.dimension.width||20)/2||0}, ${r.y-(r.dimension&&r.dimension.height||20)/2||0})`})),this.outputGraph.edges=n.links.map(r=>{const u=Kr(n.nodes,r.source),v=Kr(n.nodes,r.target);return{...r,source:u.id,target:v.id,points:[u.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(u.bounds.cx(),u.bounds.cy())]}}).concat(n.groupLinks.map(r=>{const u=n.nodes.find(T=>T.id===r.source),v=n.nodes.find(T=>T.id===r.target),b=u||n.groups.find(T=>T.id===r.source),E=v||n.groups.find(T=>T.id===r.target);return{...r,source:b.id,target:E.id,points:[b.bounds.rayIntersection(E.bounds.cx(),E.bounds.cy()),E.bounds.rayIntersection(b.bounds.cx(),b.bounds.cy())]}})),this.outputGraph.clusters=n.groups.map((r,u)=>({...this.inputGraph.clusters[u],dimension:{width:r.bounds?r.bounds.width():20,height:r.bounds?r.bounds.height():20},position:{x:r.bounds?r.bounds.x+r.bounds.width()/2:0,y:r.bounds?r.bounds.y+r.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(n,r){const u=this.outputGraph.nodes.findIndex(b=>b.id===n.id),v=this.internalGraph.nodes[u];v&&(this.draggingStart={x:v.x-r.x,y:v.y-r.y},v.fixed=1,this.settings.force.start())}onDrag(n,r){if(!n)return;const u=this.outputGraph.nodes.findIndex(b=>b.id===n.id),v=this.internalGraph.nodes[u];v&&(v.x=this.draggingStart.x+r.x,v.y=this.draggingStart.y+r.y)}onDragEnd(n,r){if(!n)return;const u=this.outputGraph.nodes.findIndex(b=>b.id===n.id),v=this.internalGraph.nodes[u];v&&(v.fixed=0)}}};class ue{getLayout(n){if(qr[n])return new qr[n];throw new Error(`Unknown layout type '${n}'`)}}ue.\u0275fac=function(n){return new(n||ue)},ue.\u0275prov=t.Yz7({token:ue,factory:ue.\u0275fac});class Be{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(n){this.mouseWheelFunc(n)}onMouseWheelFirefox(n){this.mouseWheelFunc(n)}onWheel(n){this.mouseWheelFunc(n)}onMouseWheelIE(n){this.mouseWheelFunc(n)}mouseWheelFunc(n){window.event&&(n=window.event);const r=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail||n.deltaY||n.deltaX)),u=n.wheelDelta?r>0:r<0,v=n.wheelDelta?r<0:r>0;u?this.mouseWheelUp.emit(n):v&&this.mouseWheelDown.emit(n),n.returnValue=!1,n.preventDefault&&n.preventDefault()}}Be.\u0275fac=function(n){return new(n||Be)},Be.\u0275dir=t.lG2({type:Be,selectors:[["","mouseWheel",""]],hostBindings:function(n,r){1&n&&t.NdJ("mousewheel",function(v){return r.onMouseWheelChrome(v)})("DOMMouseScroll",function(v){return r.onMouseWheelFirefox(v)})("wheel",function(v){return r.onWheel(v)})("onmousewheel",function(v){return r.onMouseWheelIE(v)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}});class he{constructor(n,r,u,v){this.el=n,this.zone=r,this.cd=u,this.layoutService=v,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=De.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=Ge.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new Mr.w0,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=b=>b.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(n){this.zoomTo(Number(n))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(n){this.panTo(Number(n),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(n){this.panTo(null,Number(n))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(n=>{this.panToNodeId(n)})),this.minimapClipPathId=`minimapClip${Jt()}`}ngOnChanges(n){this.basicUpdate();const{layout:r,layoutSettings:u,nodes:v,clusters:b,links:E}=n;this.setLayout(this.layout),u&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(n){this.initialized=!1,n||(n="dagre"),"string"==typeof n&&(this.layout=this.layoutService.getLayout(n),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(n){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=n)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const n of this.subscriptions)n.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new Ze(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=Oi.beta(1)),this.zone.run(()=>{this.dims=function za({width:e,height:n}){let r=e,u=n;return r=Math.max(0,r),u=Math.max(0,u),{width:Math.floor(r),height:Math.floor(u)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new Mr.w0;const n=r=>(r.meta||(r.meta={}),r.id||(r.id=Jt()),r.dimension?r.meta.forceDimensions=void 0===r.meta.forceDimensions||r.meta.forceDimensions:(r.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},r.meta.forceDimensions=!1),r.position={x:0,y:0},r.data=r.data?r.data:{},r);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(n):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(n):[],edges:this.links.length>0?[...this.links].map(r=>(r.id||(r.id=Jt()),r)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const n=this.layout.run(this.graph),r=n instanceof kr.y?n:(0,Ar.of)(n);this.graphSubscription.add(r.subscribe(u=>{this.graph=u,this.tick()})),0!==this.graph.nodes.length&&r.pipe((0,ws.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const n=new Set;this.graph.nodes.map(v=>{v.transform=`translate(${v.position.x-v.dimension.width/2||0}, ${v.position.y-v.dimension.height/2||0})`,v.data||(v.data={}),v.data.color=this.colors.getColor(this.groupResultsBy(v)),n.add(v.id)});const r=new Set;(this.graph.clusters||[]).map(v=>{v.transform=`translate(${v.position.x-v.dimension.width/2||0}, ${v.position.y-v.dimension.height/2||0})`,v.data||(v.data={}),v.data.color=this.colors.getColor(this.groupResultsBy(v)),r.add(v.id)}),setTimeout(()=>{this.oldNodes=n,this.oldClusters=r},500);const u=[];for(const v in this.graph.edgeLabels){const b=this.graph.edgeLabels[v],E=v.replace(/[^\w-]*/g,""),T=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let S=T?this._oldLinks.find(q=>`${q.source}${q.target}${q.id}`===E):this._oldLinks.find(q=>`${q.source}${q.target}`===E);const D=T?this.graph.edges.find(q=>`${q.source}${q.target}${q.id}`===E):this.graph.edges.find(q=>`${q.source}${q.target}`===E);S?S.data&&D&&D.data&&JSON.stringify(S.data)!==JSON.stringify(D.data)&&(S.data=D.data):S=D||b,S.oldLine=S.line;const R=b.points,$=this.generateLine(R),j=Object.assign({},S);j.line=$,j.points=R,this.updateMidpointOnEdge(j,R);const nt=R[Math.floor(R.length/2)];nt&&(j.textTransform=`translate(${nt.x||0},${nt.y||0})`),j.textAngle=0,j.oldLine||(j.oldLine=j.line),this.calcDominantBaseline(j),u.push(j)}this.graph.edges=u,this.graph.edges&&(this._oldLinks=this.graph.edges.map(v=>{const b=Object.assign({},v);return b.oldLine=v.line,b})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case Ge.UpperLeft:return"";case Ge.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let n=1/0,r=-1/0,u=1/0,v=-1/0;for(let b=0;b<this.graph.nodes.length;b++){const E=this.graph.nodes[b];n=E.position.x<n?E.position.x:n,u=E.position.y<u?E.position.y:u,r=E.position.x+E.dimension.width>r?E.position.x+E.dimension.width:r,v=E.position.y+E.dimension.height>v?E.position.y+E.dimension.height:v}n-=100,u-=100,r+=100,v+=100,this.graphDims.width=r-n,this.graphDims.height=v-u,this.minimapOffsetX=n,this.minimapOffsetY=u}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(n=>{const r=n.nativeElement,u=this.graph.nodes.find(b=>b.id===r.id);if(!u)return;let v;try{if(v=r.getBBox(),!v.width||!v.height)return}catch{return}if(this.nodeHeight?u.dimension.height=u.dimension.height&&u.meta.forceDimensions?u.dimension.height:this.nodeHeight:u.dimension.height=u.dimension.height&&u.meta.forceDimensions?u.dimension.height:v.height,this.nodeMaxHeight&&(u.dimension.height=Math.max(u.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(u.dimension.height=Math.min(u.dimension.height,this.nodeMinHeight)),this.nodeWidth)u.dimension.width=u.dimension.width&&u.meta.forceDimensions?u.dimension.width:this.nodeWidth;else if(r.getElementsByTagName("text").length){let b;try{for(const E of r.getElementsByTagName("text")){const T=E.getBBox();b?(T.width>b.width&&(b.width=T.width),T.height>b.height&&(b.height=T.height)):b=T}}catch{return}u.dimension.width=u.dimension.width&&u.meta.forceDimensions?u.dimension.width:b.width+20}else u.dimension.width=u.dimension.width&&u.meta.forceDimensions?u.dimension.width:v.width;this.nodeMaxWidth&&(u.dimension.width=Math.max(u.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(u.dimension.width=Math.min(u.dimension.width,this.nodeMinWidth))})}redrawLines(n=this.animate){this.linkElements.map(r=>{const u=this.graph.edges.find(v=>v.id===r.nativeElement.id);u&&(Un(r.nativeElement).select(".line").attr("d",u.oldLine).transition().ease($n).duration(n?500:0).attr("d",u.line),Un(this.el.nativeElement).select(`#${u.id}`).attr("d",u.oldTextPath).transition().ease($n).duration(n?500:0).attr("d",u.textPath),this.updateMidpointOnEdge(u,u.points))})}calcDominantBaseline(n){const r=n.points[0],u=n.points[n.points.length-1];n.oldTextPath=n.textPath,u.x<r.x?(n.dominantBaseline="text-before-edge",n.textPath=this.generateLine([...n.points].reverse())):(n.dominantBaseline="text-after-edge",n.textPath=n.line)}generateLine(n){return function Zi(){var e=Di,n=Gi,r=$e(!0),u=null,v=Pi,b=null;function E(T){var S,R,j,D=T.length,$=!1;for(null==u&&(b=v(j=Fi())),S=0;S<=D;++S)!(S<D&&r(R=T[S],S,T))===$&&(($=!$)?b.lineStart():b.lineEnd()),$&&b.point(+e(R,S,T),+n(R,S,T));if(j)return b=null,j+""||null}return E.x=function(T){return arguments.length?(e="function"==typeof T?T:$e(+T),E):e},E.y=function(T){return arguments.length?(n="function"==typeof T?T:$e(+T),E):n},E.defined=function(T){return arguments.length?(r="function"==typeof T?T:$e(!!T),E):r},E.curve=function(T){return arguments.length?(v=T,null!=u&&(b=v(u)),E):v},E.context=function(T){return arguments.length?(null==T?u=b=null:b=v(u=T),E):u},E}().x(u=>u.x).y(u=>u.y).curve(this.curve)(n)}onZoom(n,r){if(this.enableTrackpadSupport&&!n.ctrlKey)return void this.pan(-1*n.deltaX,-1*n.deltaY);const u=1+("in"===r?this.zoomSpeed:-this.zoomSpeed),v=this.zoomLevel*u;if(!(v<=this.minZoomLevel||v>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&n){const b=n.clientX,E=n.clientY,T=this.el.nativeElement.querySelector("svg"),S=T.querySelector("g.chart"),D=T.createSVGPoint();D.x=b,D.y=E;const R=D.matrixTransform(S.getScreenCTM().inverse());this.pan(R.x,R.y,!0),this.zoom(u),this.pan(-R.x,-R.y,!0)}else this.zoom(u)}pan(n,r,u=!1){const v=u?1:this.zoomLevel;this.transformationMatrix=Fe(this.transformationMatrix,Nr(n/v,r/v)),this.updateTransform()}panTo(n,r){if(null==n||isNaN(n)||null==r||isNaN(r))return;const u=-this.panOffsetX-n*this.zoomLevel+this.dims.width/2,v=-this.panOffsetY-r*this.zoomLevel+this.dims.height/2;this.transformationMatrix=Fe(this.transformationMatrix,Nr(u/this.zoomLevel,v/this.zoomLevel)),this.updateTransform()}zoom(n){this.transformationMatrix=Fe(this.transformationMatrix,function Ns(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Ss(n)&&(n=e),{a:e,c:0,e:0,b:0,d:n,f:0}}(n,n)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(n){this.transformationMatrix.a=isNaN(n)?this.transformationMatrix.a:Number(n),this.transformationMatrix.d=isNaN(n)?this.transformationMatrix.d:Number(n),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(n){if(!this.draggingEnabled)return;const r=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(r,n),r.position.x+=n.movementX/this.zoomLevel,r.position.y+=n.movementY/this.zoomLevel;const u=r.position.x-r.dimension.width/2,v=r.position.y-r.dimension.height/2;r.transform=`translate(${u}, ${v})`;for(const b of this.graph.edges)if((b.target===r.id||b.source===r.id||b.target.id===r.id||b.source.id===r.id)&&this.layout&&"string"!=typeof this.layout){const E=this.layout.updateEdge(this.graph,b),T=E instanceof kr.y?E:(0,Ar.of)(E);this.graphSubscription.add(T.subscribe(S=>{this.graph=S,this.redrawEdge(b)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(n){const r=this.generateLine(n.points);this.calcDominantBaseline(n),n.oldLine=n.line,n.line=r}updateTransform(){this.transform=function Ls(e){return Sr(e)}(function Ds(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(e.a*n)/n,b:Math.round(e.b*n)/n,c:Math.round(e.c*n)/n,d:Math.round(e.d*n)/n,e:Math.round(e.e*n)/n,f:Math.round(e.f*n)/n}}(this.transformationMatrix,100))}onClick(n){this.select.emit(n)}onActivate(n){this.activeEntries.indexOf(n)>-1||(this.activeEntries=[n,...this.activeEntries],this.activate.emit({value:n,entries:this.activeEntries}))}onDeactivate(n){const r=this.activeEntries.indexOf(n);this.activeEntries.splice(r,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:n,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(n=>this.groupResultsBy(n)).reduce((n,r)=>-1!==n.indexOf(r)?n:n.concat([r]),[]).sort()}trackLinkBy(n,r){return r.id}trackNodeBy(n,r){return r.id}setColors(){this.colors=new Va(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(n){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,n):this.isDragging&&this.draggingEnabled&&this.onDrag(n)}onMouseDown(n){this.isMouseMoveCalled=!1}graphClick(n){this.isMouseMoveCalled||this.clickHandler.emit(n)}onTouchStart(n){this._touchLastX=n.changedTouches[0].clientX,this._touchLastY=n.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(n){if(this.isPanning&&this.panningEnabled){const r=n.changedTouches[0].clientX,u=n.changedTouches[0].clientY,v=r-this._touchLastX,b=u-this._touchLastY;this._touchLastX=r,this._touchLastY=u,this.pan(v,b)}}onTouchEnd(n){this.isPanning=!1}onMouseUp(n){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,n)}onNodeMouseDown(n,r){this.draggingEnabled&&(this.isDragging=!0,this.draggingNode=r,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(r,n))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(n){const r=n.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient),u=n.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient;this.panTo(r*this.minimapScaleCoefficient,u*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){const n=this.dims.height/this.graphDims.height,r=this.dims.width/this.graphDims.width;let u=Math.min(n,r,1);u<this.minZoomLevel&&(u=this.minZoomLevel),u>this.maxZoomLevel&&(u=this.maxZoomLevel),u!==this.zoomLevel&&(this.zoomLevel=u,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(n){const r=this.graph.nodes.find(u=>u.id===n);r&&this.panTo(r.position.x,r.position.y)}panWithConstraints(n,r){let u=r.movementX,v=r.movementY;switch(this.isMinimapPanning&&(u=-this.minimapScaleCoefficient*u*this.zoomLevel,v=-this.minimapScaleCoefficient*v*this.zoomLevel),n){case De.Horizontal:this.pan(u,0);break;case De.Vertical:this.pan(0,v);break;default:this.pan(u,v)}}updateMidpointOnEdge(n,r){if(n&&r)if(r.length%2==1)n.midPoint=r[Math.floor(r.length/2)];else{const u=r[r.length/2],v=r[r.length/2-1];n.midPoint={x:(u.x+v.x)/2,y:(u.y+v.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const n=this.getContainerDims();n&&(this.width=n.width,this.height=n.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let n,r;const u=this.el.nativeElement;if(null!==u.parentNode){const v=u.parentNode.getBoundingClientRect();n=v.width,r=v.height}return n&&r?{width:n,height:r}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const r=(0,_s.R)(window,"resize").pipe((0,bs.b)(200)).subscribe(u=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=r}}he.\u0275fac=function(n){return new(n||he)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(ue))},he.\u0275cmp=t.Xpm({type:he,selectors:[["ngx-graph"]],contentQueries:function(n,r,u){if(1&n&&(t.Suo(u,ma,5),t.Suo(u,va,5),t.Suo(u,ya,5),t.Suo(u,xa,5),t.Suo(u,_a,5)),2&n){let v;t.iGM(v=t.CRH())&&(r.linkTemplate=v.first),t.iGM(v=t.CRH())&&(r.nodeTemplate=v.first),t.iGM(v=t.CRH())&&(r.clusterTemplate=v.first),t.iGM(v=t.CRH())&&(r.defsTemplate=v.first),t.iGM(v=t.CRH())&&(r.miniMapNodeTemplate=v.first)}},viewQuery:function(n,r){if(1&n&&(t.Gf(wa,5),t.Gf(ba,5)),2&n){let u;t.iGM(u=t.CRH())&&(r.nodeElements=u),t.iGM(u=t.CRH())&&(r.linkElements=u)}},hostBindings:function(n,r){1&n&&t.NdJ("mousemove",function(v){return r.onMouseMove(v)},!1,t.evT)("mousedown",function(v){return r.onMouseDown(v)},!1,t.evT)("click",function(v){return r.graphClick(v)},!1,t.evT)("touchmove",function(v){return r.onTouchMove(v)},!1,t.evT)("mouseup",function(v){return r.onMouseUp(v)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:["*"],decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(n,r){1&n&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(v){return r.onZoom(v,"in")})("mouseWheelDown",function(v){return r.onZoom(v,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,Fa,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,Ba,6,15,"g",3),t.qZA()()),2&n&&(t.Udp("width",r.width,"px"),t.Q6J("@animationState","active")("@.disabled",!r.animations),t.xp6(1),t.uIk("width",r.width)("height",r.height),t.xp6(1),t.Q6J("ngIf",r.initialized&&r.graph),t.xp6(1),t.uIk("id",r.minimapClipPathId),t.xp6(1),t.uIk("width",r.graphDims.width/r.minimapScaleCoefficient)("height",r.graphDims.height/r.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",r.showMiniMap))},dependencies:[Be,g.O5,g.tP,g.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,d.X$)("animationState",[(0,d.eR)(":enter",[(0,d.oB)({opacity:0}),(0,d.jt)("500ms 100ms",(0,d.oB)({opacity:1}))])])]},changeDetection:0}),(0,h.gn)([function Ra(e,n){return function(u,v,b){return{configurable:!0,enumerable:b.enumerable,get:function(){return Object.defineProperty(this,v,{configurable:!0,enumerable:b.enumerable,value:Ha(b.value,e,n)}),this[v]}}}}(500)],he.prototype,"updateMinimap",null);class ye{}ye.\u0275fac=function(n){return new(n||ye)},ye.\u0275mod=t.oAB({type:ye}),ye.\u0275inj=t.cJS({providers:[ue],imports:[[g.ez]]});class xe{}xe.\u0275fac=function(n){return new(n||xe)},xe.\u0275mod=t.oAB({type:xe}),xe.\u0275inj=t.cJS({imports:[[g.ez],ye]});var vt=o(433),ti=o(9102),ei=o(9886);function Qa(e,n){1&e&&(t.O4$(),t.TgZ(0,"marker",9),t._UZ(1,"path",10),t.qZA())}function Ka(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",11),t._UZ(1,"rect",12),t.TgZ(2,"text",13),t._uU(3),t.qZA()()),2&e){const r=n.$implicit;t.xp6(1),t.uIk("width",r.dimension.width)("height",r.dimension.height)("fill",r.data.color),t.xp6(1),t.uIk("x",10)("y",r.dimension.height/2),t.xp6(1),t.hij(" ",r.label," ")}}function qa(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16)(3,"textPath",17),t._uU(4),t.qZA()()()),2&e){const r=n.$implicit;t.xp6(3),t.Udp("dominant-baseline",r.dominantBaseline),t.uIk("href","#"+r.id),t.xp6(1),t.hij(" ",r.label," ")}}class Ue{constructor(n){this._modalService=n,this.layoutSettings={orientation:ae.TOP_TO_BOTTOM},this.nodesCount=0,this.linksCount=0,this.nodes=[],this.links=[],this.isModal=!1}ngOnInit(){for(let n of this.map.nodes_labels)this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:n}],this.nodesCount++;for(let n=0;n<this.map.adjacency_matrix.length;n++)for(let r=0;r<this.map.adjacency_matrix[n].length;r++)this.map.adjacency_matrix[n][r]&&(this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:"node"+n,target:"node"+r,label:this.map.adjacency_matrix_labels[n][r]}],this.linksCount++)}hideModal(){this._modalService.hide("ClassroomHomeworkMapViewComponent")}}Ue.\u0275fac=function(n){return new(n||Ue)(t.Y36(ei.tT))},Ue.\u0275cmp=t.Xpm({type:Ue,selectors:[["app-classroom-homework-map-view"]],decls:14,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn-close","close","pull-right",3,"click"],[1,"visually-hidden"],[1,"modal-body"],[1,"chart-container",3,"showMiniMap","layoutSettings","links","nodes"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["rx","15"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Map Graph"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.hideModal()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"ngx-graph",5),t.YNc(8,Qa,2,0,"ng-template",null,6,t.W1O),t.YNc(10,Ka,4,6,"ng-template",null,7,t.W1O),t.YNc(12,qa,5,4,"ng-template",null,8,t.W1O),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("showMiniMap",!1)("layoutSettings",r.layoutSettings)("links",r.links)("nodes",r.nodes))},dependencies:[he],encapsulation:2});var tu=o(301),eu=o(3059),nu=o(4696),ru=o(1718);function iu(e,n){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"div",6),t.TgZ(2,"div",7),t._UZ(3,"div",8),t.qZA()())}function ou(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){t.CHM(r);const v=t.oxw(2);return t.KtG(v.submitHomework())}),t._uU(2,"Submit"),t.qZA()()}if(2&e){const r=t.oxw(2);t.xp6(1),t.Q6J("disabled",!r.isValidGraph)}}function su(e,n){if(1&e&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14)(6,"strong"),t._uU(7,"Start Datetime:"),t.qZA(),t._uU(8),t.ALo(9,"dateLabel"),t._UZ(10,"br"),t.TgZ(11,"strong"),t._uU(12,"Expire Datetime:"),t.qZA(),t._uU(13),t.ALo(14,"dateLabel"),t._UZ(15,"br"),t.TgZ(16,"strong"),t._uU(17,"Node Min:"),t.qZA(),t._uU(18),t._UZ(19,"br"),t.TgZ(20,"strong"),t._uU(21,"Node Max:"),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"div",15)(24,"strong"),t._uU(25,"Title:"),t.qZA(),t._uU(26),t._UZ(27,"br"),t.TgZ(28,"strong"),t._uU(29,"Description:"),t.qZA(),t._uU(30),t.qZA(),t.YNc(31,ou,3,1,"div",16),t.qZA()()()()()),2&e){const r=t.oxw();t.xp6(8),t.hij(" ",t.lcZ(9,7,r.homework.start_datetime),""),t.xp6(5),t.hij(" ",t.lcZ(14,9,r.homework.expire_datetime),""),t.xp6(5),t.hij(" ",r.homework.node_min,""),t.xp6(4),t.hij(" ",r.homework.node_max," "),t.xp6(4),t.hij(" ",r.homework.title," "),t.xp6(4),t.hij(" ",r.homework.body," "),t.xp6(1),t.Q6J("ngIf",!r.homework.student_map&&0==r.user.role)}}function au(e,n){if(1&e&&(t.TgZ(0,"div",51)(1,"p",48),t._UZ(2,"i",52),t._uU(3," Number of Maps: "),t.TgZ(4,"span",53),t._uU(5),t.qZA()(),t.TgZ(6,"p",54),t._UZ(7,"i",52),t._uU(8," Minimum Nodes Count: "),t.TgZ(9,"span",53),t._uU(10),t.qZA()(),t.TgZ(11,"p",48),t._UZ(12,"i",52),t._uU(13," Maximum Nodes Count: "),t.TgZ(14,"span",53),t._uU(15),t.qZA()(),t.TgZ(16,"p",54),t._UZ(17,"i",52),t._uU(18," Minimum Edges Count: "),t.TgZ(19,"span",53),t._uU(20),t.qZA()(),t.TgZ(21,"p",48),t._UZ(22,"i",52),t._uU(23," Maximum Edges Count: "),t.TgZ(24,"span",53),t._uU(25),t.qZA()()()),2&e){const r=t.oxw(2);t.xp6(5),t.Oqu(null==r.simulation.maps?null:r.simulation.maps.length),t.xp6(5),t.Oqu(r.simulation.node_min),t.xp6(5),t.Oqu(r.simulation.node_max),t.xp6(5),t.Oqu(r.simulation.node_min-1),t.xp6(5),t.Oqu(r.maxMapsValues.edges)}}const Ln=function(e){return{"btn-primary":e}},uu=function(e){return{"d-none":e}};function hu(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",12),t.YNc(6,au,26,5,"div",24),t.TgZ(7,"label",25),t._uU(8,"Scatter Plot Param:"),t.qZA(),t.TgZ(9,"div")(10,"button",26),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.updateChartType(0))}),t._uU(11,"Entropy"),t.qZA(),t.TgZ(12,"button",26),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.updateChartType(1))}),t._uU(13,"Entropy Percent"),t.qZA(),t.TgZ(14,"button",27),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.updateChartType(2))}),t._uU(15,"Effort"),t.qZA()(),t.TgZ(16,"form",28),t.NdJ("ngSubmit",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.renderScatterPlot(v.current_chart_type))}),t.TgZ(17,"div",13)(18,"div",15)(19,"label",29),t._uU(20,"Nodes Min:"),t.qZA(),t._UZ(21,"input",30),t.qZA(),t.TgZ(22,"div",15)(23,"label",31),t._uU(24,"Nodes Max:"),t.qZA(),t._UZ(25,"input",32),t.qZA()(),t.TgZ(26,"div",33)(27,"div",15)(28,"label",34),t._uU(29,"Edges Min:"),t.qZA(),t._UZ(30,"input",35),t.qZA(),t.TgZ(31,"div",15)(32,"label",36),t._uU(33,"Edges Max:"),t.qZA(),t._UZ(34,"input",37),t.qZA()(),t.TgZ(35,"div",33)(36,"div",15)(37,"label",38),t._uU(38),t.qZA(),t._UZ(39,"input",39),t.qZA(),t.TgZ(40,"div",15)(41,"label",40),t._uU(42),t.qZA(),t._UZ(43,"input",41),t.qZA()(),t.TgZ(44,"div",42)(45,"div",43)(46,"button",44),t._uU(47,"Filter"),t.qZA(),t.TgZ(48,"button",45),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.resetFilterForm(v.current_chart_type))}),t._uU(49,"Reset"),t.qZA()()()()()()()()(),t.TgZ(50,"div",46)(51,"div",11)(52,"div",47)(53,"h5",48),t._uU(54,"Scatter Plot: "),t.TgZ(55,"small"),t._uU(56),t.qZA()()(),t.TgZ(57,"div",49),t._UZ(58,"div",50),t.qZA()()()()}if(2&e){const r=t.oxw();t.xp6(6),t.Q6J("ngIf",r.simulation),t.xp6(4),t.Q6J("ngClass",t.VKq(9,Ln,0==r.current_chart_type)),t.xp6(2),t.Q6J("ngClass",t.VKq(11,Ln,1==r.current_chart_type)),t.xp6(2),t.Q6J("ngClass",t.VKq(13,Ln,2==r.current_chart_type)),t.xp6(2),t.Q6J("formGroup",r.simulationFilterForm),t.xp6(22),t.hij("",r.getChartTypeLabel(r.current_chart_type)," Min:"),t.xp6(4),t.hij("",r.getChartTypeLabel(r.current_chart_type)," Max:"),t.xp6(8),t.Q6J("ngClass",t.VKq(15,uu,r.loading)),t.xp6(6),t.Oqu(r.getChartTypeLabel(r.current_chart_type))}}function lu(e,n){if(1&e&&(t.TgZ(0,"div",14)(1,"div",62)(2,"div",12)(3,"strong"),t._uU(4,"Submitted at:"),t.qZA(),t._uU(5),t.ALo(6,"dateLabel"),t._UZ(7,"br")(8,"br"),t.TgZ(9,"strong"),t._uU(10,"Entropy (H):"),t.qZA(),t._uU(11),t._UZ(12,"br"),t.TgZ(13,"strong"),t._uU(14,"Entropy Percent (Hr):"),t.qZA(),t._uU(15),t._UZ(16,"br"),t.TgZ(17,"strong"),t._uU(18,"Effort (M):"),t.qZA(),t._uU(19),t._UZ(20,"br"),t.qZA()()()),2&e){const r=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,4,r.homework.student_map.created_at),""),t.xp6(6),t.hij(" ",r.homework.student_map.entropy.toFixed(2),""),t.xp6(4),t.hij(" ",r.homework.student_map.entropy_percent.toFixed(2),""),t.xp6(4),t.hij(" ",r.homework.student_map.effort.toFixed(2),"")}}function cu(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",14)(1,"div",62)(2,"div",12)(3,"form",63),t.NdJ("ngSubmit",function(){t.CHM(r);const v=t.oxw(2);return t.KtG(v.onSubmitNode())}),t.TgZ(4,"div",64)(5,"label",65),t._uU(6,"Node Name:"),t.qZA(),t._UZ(7,"input",66),t.qZA(),t.TgZ(8,"div",67)(9,"button",68),t._uU(10,"Add"),t.qZA()()()()(),t.TgZ(11,"div",11)(12,"div",12)(13,"div",64)(14,"label",69),t._uU(15,"Source Node:"),t.qZA(),t.TgZ(16,"ng-select",70),t.NdJ("ngModelChange",function(v){t.CHM(r);const b=t.oxw(2);return t.KtG(b.sourceLinkNodeId=v)}),t.qZA()(),t.TgZ(17,"div",64)(18,"label",71),t._uU(19,"Target Node:"),t.qZA(),t.TgZ(20,"ng-select",72),t.NdJ("ngModelChange",function(v){t.CHM(r);const b=t.oxw(2);return t.KtG(b.targetLinkNodeId=v)}),t.qZA()(),t.TgZ(21,"div",64)(22,"label",73),t._uU(23,"Label:"),t.qZA(),t.TgZ(24,"input",74),t.NdJ("ngModelChange",function(v){t.CHM(r);const b=t.oxw(2);return t.KtG(b.labelLink=v)}),t.qZA()(),t.TgZ(25,"div",67)(26,"button",75),t.NdJ("click",function(){t.CHM(r);const v=t.oxw(2);return t.KtG(v.linkNodes())}),t._uU(27,"Link"),t.qZA()()()()()}if(2&e){const r=t.oxw(2);t.xp6(3),t.Q6J("formGroup",r.nodeCreateForm),t.xp6(6),t.Q6J("disabled",!r.nodeCreateForm.valid),t.xp6(7),t.Q6J("items",r.nodes)("ngModel",r.sourceLinkNodeId),t.xp6(4),t.Q6J("items",r.nodes)("ngModel",r.targetLinkNodeId),t.xp6(4),t.Q6J("ngModel",r.labelLink),t.xp6(2),t.Q6J("disabled",!r.sourceLinkNodeId||!r.targetLinkNodeId||!r.labelLink)}}function fu(e,n){1&e&&(t.O4$(),t.TgZ(0,"marker",76),t._UZ(1,"path",77),t.qZA())}function du(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",78),t._UZ(1,"rect",79),t.TgZ(2,"text",80),t._uU(3),t.qZA()()),2&e){const r=n.$implicit;t.xp6(1),t.uIk("width",r.dimension.width)("height",r.dimension.height)("fill",r.data.color),t.xp6(1),t.uIk("x",10)("y",r.dimension.height/2),t.xp6(1),t.hij(" ",r.label," ")}}function pu(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",81),t._UZ(1,"path",82),t.TgZ(2,"text",83)(3,"textPath",84),t._uU(4),t.qZA()()()),2&e){const r=n.$implicit;t.xp6(3),t.Udp("dominant-baseline",r.dominantBaseline),t.uIk("href","#"+r.id),t.xp6(1),t.hij(" ",r.label," ")}}function gu(e,n){if(1&e&&(t.TgZ(0,"div",55),t.YNc(1,lu,21,6,"div",56),t.YNc(2,cu,28,8,"div",56),t.TgZ(3,"div",57)(4,"ngx-graph",58),t.YNc(5,fu,2,0,"ng-template",null,59,t.W1O),t.YNc(7,du,4,6,"ng-template",null,60,t.W1O),t.YNc(9,pu,5,4,"ng-template",null,61,t.W1O),t.qZA()()()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.homework.student_map),t.xp6(1),t.Q6J("ngIf",!r.homework.student_map),t.xp6(2),t.Q6J("showMiniMap",!1)("layoutSettings",r.layoutSettings)("links",r.links)("nodes",r.nodes)}}var It;!function(e){e[e.Entropy=0]="Entropy",e[e.EntropyPercent=1]="EntropyPercent",e[e.Effort=2]="Effort"}(It||(It={}));const mu=e=>{const n=parseInt(e.get("node_min").value),r=parseInt(e.get("node_max").value),u=parseInt(e.get("edge_min").value),v=parseInt(e.get("edge_max").value),b=parseInt(e.get("param_min").value),E=parseInt(e.get("param_max").value);return n>r||u>v||b>E?{inRange:!1}:null};class He{constructor(n,r,u,v,b){this._route=n,this._classroomHomeworkService=r,this._router=u,this._alertService=v,this._modalService=b,this.layoutSettings={orientation:ae.TOP_TO_BOTTOM},this.nodeCreateForm=new vt.cw({name:new vt.NI(null,vt.kI.required)}),this.simulationFilterForm=new vt.cw({node_min:new vt.NI(0,vt.kI.required),node_max:new vt.NI(0,vt.kI.required),edge_min:new vt.NI(0,vt.kI.required),edge_max:new vt.NI(0,vt.kI.required),param_min:new vt.NI(0,vt.kI.required),param_max:new vt.NI(0,vt.kI.required)},mu),this.loading=!1,this.loadingAddNode=!1,this.nodesCount=0,this.linksCount=0,this.nodes=[],this.links=[],this.sourceLinkNodeId=null,this.targetLinkNodeId=null,this.labelLink=null,this.isValidGraph=!1,this.simulation=null,this.currentMap=null,this.current_chart_type=It.Entropy,this.maxMapsValues={nodes:0,edges:0,entropy:0,entropy_percent:0,effort:0};let E=JSON.parse(localStorage.getItem("currentUserData"));E||this._router.navigate(["/users/auth"]),this.user=E}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id"),this.homework_id=this._route.snapshot.paramMap.get("homework_id"),0==this.user.role?this.getClassroomHomework():this._classroomHomeworkService.getClassroomHomework(this.classroom_id,this.homework_id).subscribe(n=>{if(this.loading=!1,n.hasOwnProperty("error"))return void this._router.navigate(["/not-found"]);this.homework=n;let r=[];console.log(this.homework.maps);for(let u of this.homework.maps)r=[...r,{_id:u._id,color_entropy:0,color_entropy_percent:0,color_effort:0,edges_count:u.edges_count,entropy:u.entropy,entropy_percent:u.entropy_percent,effort:u.effort,nodes_count:u.nodes_count,homework_id:u.homework_id,adjacency_matrix:u.adjacency_matrix,created_at:0,nodes_labels:u.nodes_labels,adjacency_matrix_labels:u.adjacency_matrix_labels}];if(this.simulation={classroom_id:this.homework.classroom_id,title:this.homework.title,node_min:this.homework.node_min,node_max:this.homework.node_max,maps:r,body:this.homework.body,start_datetime:this.homework.start_datetime,expire_datetime:this.homework.expire_datetime},this.simulation?.maps){this.simulationFilterForm.get("node_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min-1}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),this.simulationFilterForm.get("node_max").setValidators([vt.kI.max(this.simulation.node_max),vt.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity();for(let u of this.simulation.maps)u.nodes_count>this.maxMapsValues.nodes&&(this.maxMapsValues.nodes=u.nodes_count),u.edges_count>this.maxMapsValues.edges&&(this.maxMapsValues.edges=u.edges_count),u.entropy&&u.entropy>this.maxMapsValues.entropy&&(this.maxMapsValues.entropy=u.entropy),u.entropy_percent&&u.entropy_percent>this.maxMapsValues.entropy_percent&&(this.maxMapsValues.entropy_percent=u.entropy_percent),u.effort&&u.effort>this.maxMapsValues.effort&&(this.maxMapsValues.effort=u.effort);this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}})}getClassroomHomework(){this.loading=!0,this._classroomHomeworkService.getClassroomHomework(this.classroom_id,this.homework_id).subscribe(n=>{if(n.hasOwnProperty("error"))this._router.navigate(["/"]);else if(this.homework=n,this.homework.student_map){for(let r of this.homework.student_map.nodes_labels)this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:r}],this.nodesCount++;for(let r=0;r<this.homework.student_map.adjacency_matrix.length;r++)for(let u=0;u<this.homework.student_map.adjacency_matrix[r].length;u++)this.homework.student_map.adjacency_matrix[r][u]&&(this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:"node"+r,target:"node"+u,label:this.homework.student_map.adjacency_matrix_labels[r][u]}],this.linksCount++)}this.loading=!1})}onSubmitNode(){if(this.nodes.length==this.homework.node_max)return this._alertService.error("You have reached the maximum amount of nodes.");this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:this.nodeCreateForm.value.name}],this.nodesCount++,this.nodeCreateForm.reset(),this.isValidGraph=this.checkDAG()}linkNodes(){this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:this.sourceLinkNodeId,target:this.targetLinkNodeId,label:this.labelLink}],this.linksCount++,this.sourceLinkNodeId=null,this.targetLinkNodeId=null,this.labelLink=null,this.isValidGraph=this.checkDAG()}submitHomework(){let n=[],r=Array.from(Array(this.nodes.length),v=>Array(this.nodes.length).fill(""));for(let v of this.links){let b=parseInt(v.source.replace("node","")),E=parseInt(v.target.replace("node",""));r[b][E]=v.label}for(let v of this.nodes)n.push(v.label);let u={homework_id:this.homework_id,nodes_count:this.nodes.length,edges_count:this.links.length,nodes_labels:n,adjacency_matrix:this.adjacencyMatrix,adjacency_matrix_labels:r};this._classroomHomeworkService.createClassroomHomeworkMap(this.classroom_id,this.homework_id,u).subscribe(v=>{window.location.reload(),this._alertService.success("Homework submitted.")})}checkDAG(){if(this.nodes.length<this.homework.node_min)return!1;this.adjacencyMatrix=Array.from(Array(this.nodes.length),n=>Array(this.nodes.length).fill(0));for(let n of this.links){let r=parseInt(n.source.replace("node","")),u=parseInt(n.target.replace("node",""));this.adjacencyMatrix[r][u]=1}return!!this.isConnected(this.adjacencyMatrix)&&this.isDAG(this.adjacencyMatrix)}isDAG(n){const r=n.length,u=Array(r).fill(!1),v=Array(r).fill(!1);for(let b=0;b<r;b++)if(!u[b]&&this.isCyclic(b,u,v,n))return!1;return!0}isCyclic(n,r,u,v){r[n]=!0,u[n]=!0;for(let b=0;b<v[n].length;b++)if(1===v[n][b]){if(!r[b]&&this.isCyclic(b,r,u,v))return!0;if(u[b])return!0}return u[n]=!1,!1}isConnected(n){const r=n.length,u=Array(r).fill(!1),v=[];for(v.push(0),u[0]=!0;v.length>0;){const b=v.pop();for(let E=0;E<r;E++)1===n[b][E]&&!u[E]&&(v.push(E),u[E]=!0)}return u.every(b=>b)}unpack(n,r){return n.map(function(u){return u[r]})}resetFilterForm(n){this.simulationFilterForm.get("node_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min-1}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),n==It.Entropy?(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.entropy),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):n==It.EntropyPercent?(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.entropy_percent),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy_percent}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):n==It.Effort&&(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.effort),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.effort}),this.simulationFilterForm.get("param_max").updateValueAndValidity()),this.simulationFilterForm.get("node_max").setValidators([vt.kI.max(this.simulation.node_max),vt.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity(),this.simulationFilterForm.get("edge_max").setValidators([vt.kI.max(this.maxMapsValues.edges),vt.kI.required]),this.simulationFilterForm.patchValue({edge_max:this.maxMapsValues.edges}),this.simulationFilterForm.get("edge_max").updateValueAndValidity()}getCoordsDatum(n,r){let u=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"edges_count"),b=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"entropy");return n==It.EntropyPercent?(u=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"edges_count"),b=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"entropy_percent")):n==It.Effort&&(u=this.unpack(this.simulation.maps.filter(E=>E.color_effort==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_effort==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"edges_count"),b=this.unpack(this.simulation.maps.filter(E=>E.color_effort==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"effort")),[u,v,b]}renderScatterPlot(n){ti.purge("container");const r=["rgba(168, 50, 50, 0.95)","rgba(161, 158, 157, 0.95)","rgba(86, 199, 30, 0.95)"];let u={x:this.getCoordsDatum(n,0)[0],y:this.getCoordsDatum(n,0)[1],z:this.getCoordsDatum(n,0)[2],mode:"markers",marker:{size:5,line:{color:r[0],width:.5},opacity:.8},type:"scatter3d"};console.log(u);let E=[u,{x:this.getCoordsDatum(n,1)[0],y:this.getCoordsDatum(n,1)[1],z:this.getCoordsDatum(n,1)[2],mode:"markers",marker:{size:5,line:{color:r[1],width:.5},opacity:.8},type:"scatter3d"},{x:this.getCoordsDatum(n,2)[0],y:this.getCoordsDatum(n,2)[1],z:this.getCoordsDatum(n,2)[2],mode:"markers",marker:{size:5,line:{color:r[2],width:.5},opacity:.8},type:"scatter3d"}],T={margin:{l:0,r:0,b:0,t:50},width:window.innerWidth-window.innerWidth/2.5,height:window.innerHeight-200,colorway:r,scene:{xaxis:{title:"Nodes",range:[0,this.maxMapsValues.nodes]},yaxis:{title:"Edges",range:[0,this.maxMapsValues.edges]},zaxis:{title:this.getChartTypeLabel(this.current_chart_type)}}};ti.newPlot("container",E,T,{responsive:!0}),document.getElementById("container").on("plotly_click",D=>{this.current_chart_type==It.Entropy?this.currentMap=this.simulation?.maps?.filter(R=>D.points[0].x==R.nodes_count&&D.points[0].y==R.edges_count&&D.points[0].z==R.entropy)[0]:this.current_chart_type==It.EntropyPercent?this.currentMap=this.simulation?.maps?.filter(R=>D.points[0].x==R.nodes_count&&D.points[0].y==R.edges_count&&D.points[0].z==R.entropy_percent)[0]:this.current_chart_type==It.Effort&&(this.currentMap=this.simulation?.maps?.filter(R=>D.points[0].x==R.nodes_count&&D.points[0].y==R.edges_count&&D.points[0].z==R.effort)[0]),this.showCurrentMap()})}getChartTypeLabel(n){switch(n){case It.Entropy:return"Entropy (H)";case It.EntropyPercent:return"Entropy Percent (Hr)";case It.Effort:return"Effort (M)"}}getChartId(n){switch(n){case It.Entropy:return"chartHolderEntropy";case It.EntropyPercent:return"chartHolderEntropyPercent";case It.Effort:return"chartHolderEffort"}}updateChartType(n){this.current_chart_type=n,this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}downloadJson(){var n=JSON.stringify(this.simulation),r=document.createElement("a");r.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(n)),r.setAttribute("download",this.simulation?.title?this.simulation?.title+".json":"undefined.json"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}showCurrentMap(){const n={map:this.currentMap,isModal:!0};this._modalService.show(Ue,{id:"ClassroomHomeworkMapViewComponent",class:"modal-lg",initialState:n})}}He.\u0275fac=function(n){return new(n||He)(t.Y36(a.gz),t.Y36(i.c),t.Y36(a.F0),t.Y36(tu.c),t.Y36(ei.tT))},He.\u0275cmp=t.Xpm({type:He,selectors:[["app-classroom-homework-view"]],decls:6,vars:4,consts:[["class","row mt-5 g-0",4,"ngIf"],[1,"mt-4","container-fluid","h-75"],["class","row px-2 mb-4",4,"ngIf"],["class","row h-90 my-4 mx-2",4,"ngIf"],["class","row px-2 h-100",4,"ngIf"],[1,"row","mt-5","g-0"],[1,"col-5"],[1,"col-2","ms-5","mt-5"],[1,"ms-3","custom-big-loader","mt-5"],[1,"row","px-2","mb-4"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-3"],[1,"col-6"],["class","col-3 d-flex align-items-center",4,"ngIf"],[1,"col-3","d-flex","align-items-center"],[1,"btn","btn-success","d-grid","w-100",3,"disabled","click"],[1,"row","h-90","my-4","mx-2"],[1,"col-4","h-100"],[1,"row","h-100"],[1,"col-12","h-100","ps-0"],[1,"card","mb-4","h-100"],["class","alert alert-primary mb-2","role","alert",4,"ngIf"],[1,"form-label"],[1,"me-3","btn","btn-secondary",3,"ngClass","click"],[1,"btn","btn-secondary",3,"ngClass","click"],[1,"mt-3",3,"formGroup","ngSubmit"],["for","node_min",1,"form-label"],["type","text","id","node_min","name","simulation_node_min","placeholder","","formControlName","node_min",1,"form-control"],["for","node_max",1,"form-label"],["type","text","id","node_max","name","simulation_node_max","placeholder","","formControlName","node_max",1,"form-control"],[1,"row","mt-2"],["for","edge_min",1,"form-label"],["type","text","id","edge_min","name","simulation_edge_min","placeholder","","formControlName","edge_min",1,"form-control"],["for","edge_max",1,"form-label"],["type","text","id","edge_max","name","simulation_edge_max","placeholder","","formControlName","edge_max",1,"form-control"],["for","param_min",1,"form-label"],["type","text","id","param_min","name","simulation_param_min","placeholder","","formControlName","param_min",1,"form-control"],["for","param_max",1,"form-label"],["type","text","id","param_max","name","simulation_param_max","placeholder","","formControlName","param_max",1,"form-control"],[1,"row","mt-4"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-primary","me-3"],[1,"btn","btn-secondary",3,"click"],[1,"col-8","pe-0",3,"ngClass"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"card-body","text-center","p-0"],["id","container"],["role","alert",1,"alert","alert-primary","mb-2"],[1,"fa-solid","fa-genderless"],[1,"ms-2"],[1,"mb-0","mt-2"],[1,"row","px-2","h-100"],["class","col-3",4,"ngIf"],[1,"col-8"],[1,"chart-container",3,"showMiniMap","layoutSettings","links","nodes"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],[1,"card","mb-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","node_name","name","node_name","formControlName","name",1,"form-control"],[1,"text-center"],["type","submit",1,"btn","btn-primary","d-grid","w-100",3,"disabled"],["for","source_node",1,"form-label"],["id","source_node","name","source_node","bindLabel","label","bindValue","id",3,"items","ngModel","ngModelChange"],["for","target_node",1,"form-label"],["id","target_node","name","target_node","bindLabel","label","bindValue","id",3,"items","ngModel","ngModelChange"],["for","link_label",1,"form-label"],["type","text","id","link_label","name","link_label",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","d-grid","w-100",3,"disabled","click"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["rx","15"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"]],template:function(n,r){1&n&&(t._UZ(0,"app-navbar"),t.YNc(1,iu,4,0,"div",0),t.TgZ(2,"div",1),t.YNc(3,su,32,11,"div",2),t.YNc(4,hu,59,17,"div",3),t.YNc(5,gu,11,6,"div",4),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",r.loading),t.xp6(2),t.Q6J("ngIf",r.homework),t.xp6(1),t.Q6J("ngIf",1==r.user.role),t.xp6(1),t.Q6J("ngIf",0==r.user.role&&r.homework))},dependencies:[g.mk,g.O5,vt._Y,vt.Fj,vt.JJ,vt.JL,vt.On,vt.sg,vt.u,eu.w9,nu.S,he,ru.$],encapsulation:2});const vu=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:":homework_id",component:He,canActivate:[l.a]}];class _e{}_e.\u0275fac=function(n){return new(n||_e)},_e.\u0275mod=t.oAB({type:_e}),_e.\u0275inj=t.cJS({imports:[a.Bz.forChild(vu),a.Bz]});class we{}we.\u0275fac=function(n){return new(n||we)},we.\u0275mod=t.oAB({type:we}),we.\u0275inj=t.cJS({providers:[i.c],imports:[g.ez,c.m,f.UserModule,_e,xe]})},4937:(y,_,o)=>{"use strict";o.d(_,{c:()=>f});var s=o(1571),m=o(2340),p=o(5059),g=o(529),c=o(9985);class f{constructor(a,l){this._http=a,this._httpErrorHandler=l,this._classroomEndpointUrl=m.N.apiEndpointUrl+"classrooms/",this.updatedClassroomHomeworks$=new s.vpe,this._handleError=this._httpErrorHandler.createHandleError("UserService")}createClassroomHomework(a){let l=a.classroom_id;return this._http.post(this._classroomEndpointUrl+l+"/homeworks/",{title:a.title,body:a.body,node_min:a.node_min,node_max:a.node_max,start_datetime:a.start_datetime,expire_datetime:a.expire_datetime}).pipe((0,p.K)(this._handleError("createClassroomHomework",{error:!0})))}getClassroomHomeworks(a){return this._http.get(this._classroomEndpointUrl+a+"/homeworks").pipe((0,p.K)(this._handleError("getClassroomHomeworks",{error:!0})))}getClassroomHomework(a,l){return this._http.get(this._classroomEndpointUrl+a+"/homeworks/"+l).pipe((0,p.K)(this._handleError("getClassroomHomework",{error:!0})))}createClassroomHomeworkMap(a,l,t){return this._http.post(this._classroomEndpointUrl+a+"/homeworks/"+l,t).pipe((0,p.K)(this._handleError("createClassroomHomeworkMap",{error:!0})))}}f.\u0275fac=function(a){return new(a||f)(s.LFG(g.eN),s.LFG(c.G))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},7315:(y,_,o)=>{"use strict";o.d(_,{u:()=>f});var s=o(1571),m=o(2340),p=o(5059),g=o(529),c=o(9985);class f{constructor(a,l){this._http=a,this._httpErrorHandler=l,this._classroomEndpointUrl=m.N.apiEndpointUrl+"classrooms/",this.updatedClassrooms$=new s.vpe,this._handleError=this._httpErrorHandler.createHandleError("UserService")}getClassrooms(){return this._http.get(this._classroomEndpointUrl).pipe((0,p.K)(this._handleError("getClassrooms",{error:!0})))}getClassroom(a){return this._http.get(this._classroomEndpointUrl+a).pipe((0,p.K)(this._handleError("getClassroom",{error:!0})))}joinStudentClassroom(a){return this._http.get(this._classroomEndpointUrl+"invite/"+a).pipe((0,p.K)(this._handleError("joinStudentClassroom",{error:!0})))}createClassroom(a){return this._http.post(this._classroomEndpointUrl,a).pipe((0,p.K)(this._handleError("createClassroom",{error:!0})))}getClassroomStudents(a){return this._http.get(this._classroomEndpointUrl+a+"/students").pipe((0,p.K)(this._handleError("getClassroomStudents",{error:!0})))}}f.\u0275fac=function(a){return new(a||f)(s.LFG(g.eN),s.LFG(c.G))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},9695:(y,_,o)=>{y.exports={graphlib:o(6456),layout:o(4850),debug:o(1914),util:{time:o(1510).time,notime:o(1510).notime},version:o(8126)}},2234:(y,_,o)=>{"use strict";var s=o(5760),m=o(7365);y.exports={run:function p(f){var i="greedy"===f.graph().acyclicer?m(f,function a(l){return function(t){return l.edge(t).weight}}(f)):function g(f){var i=[],a={},l={};function t(h){s.has(l,h)||(l[h]=!0,a[h]=!0,s.forEach(f.outEdges(h),function(d){s.has(a,d.w)?i.push(d):t(d.w)}),delete a[h])}return s.forEach(f.nodes(),t),i}(f);s.forEach(i,function(l){var t=f.edge(l);f.removeEdge(l),t.forwardName=l.name,t.reversed=!0,f.setEdge(l.w,l.v,t,s.uniqueId("rev"))})},undo:function c(f){s.forEach(f.edges(),function(i){var a=f.edge(i);if(a.reversed){f.removeEdge(i);var l=a.forwardName;delete a.reversed,delete a.forwardName,f.setEdge(i.w,i.v,a,l)}})}}},9999:(y,_,o)=>{var s=o(5760),m=o(1510);function g(c,f,i,a,l,t){var h={width:0,height:0,rank:t,borderType:f},d=l[f][t-1],x=m.addDummyNode(c,"border",h,i);l[f][t]=x,c.setParent(x,a),d&&c.setEdge(d,x,{weight:1})}y.exports=function p(c){s.forEach(c.children(),function f(i){var a=c.children(i),l=c.node(i);if(a.length&&s.forEach(a,f),s.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var t=l.minRank,h=l.maxRank+1;t<h;++t)g(c,"borderLeft","_bl",i,l,t),g(c,"borderRight","_br",i,l,t)}})}},3870:(y,_,o)=>{"use strict";var s=o(5760);function g(t){s.forEach(t.nodes(),function(h){c(t.node(h))}),s.forEach(t.edges(),function(h){c(t.edge(h))})}function c(t){var h=t.width;t.width=t.height,t.height=h}function i(t){t.y=-t.y}function l(t){var h=t.x;t.x=t.y,t.y=h}y.exports={adjust:function m(t){var h=t.graph().rankdir.toLowerCase();("lr"===h||"rl"===h)&&g(t)},undo:function p(t){var h=t.graph().rankdir.toLowerCase();("bt"===h||"rl"===h)&&function f(t){s.forEach(t.nodes(),function(h){i(t.node(h))}),s.forEach(t.edges(),function(h){var d=t.edge(h);s.forEach(d.points,i),s.has(d,"y")&&i(d)})}(t),("lr"===h||"rl"===h)&&(function a(t){s.forEach(t.nodes(),function(h){l(t.node(h))}),s.forEach(t.edges(),function(h){var d=t.edge(h);s.forEach(d.points,l),s.has(d,"x")&&l(d)})}(t),g(t))}}},3226:y=>{function _(){var m={};m._next=m._prev=m,this._sentinel=m}function o(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function s(m,p){if("_next"!==m&&"_prev"!==m)return p}y.exports=_,_.prototype.dequeue=function(){var m=this._sentinel,p=m._prev;if(p!==m)return o(p),p},_.prototype.enqueue=function(m){var p=this._sentinel;m._prev&&m._next&&o(m),m._next=p._next,p._next._prev=m,p._next=m,m._prev=p},_.prototype.toString=function(){for(var m=[],p=this._sentinel,g=p._prev;g!==p;)m.push(JSON.stringify(g,s)),g=g._prev;return"["+m.join(", ")+"]"}},1914:(y,_,o)=>{var s=o(5760),m=o(1510),p=o(6456).Graph;y.exports={debugOrdering:function g(c){var f=m.buildLayerMatrix(c),i=new p({compound:!0,multigraph:!0}).setGraph({});return s.forEach(c.nodes(),function(a){i.setNode(a,{label:a}),i.setParent(a,"layer"+c.node(a).rank)}),s.forEach(c.edges(),function(a){i.setEdge(a.v,a.w,{},a.name)}),s.forEach(f,function(a,l){var t="layer"+l;i.setNode(t,{rank:"same"}),s.reduce(a,function(h,d){return i.setEdge(h,d,{style:"invis"}),d})}),i}}},6456:(y,_,o)=>{var s;try{s=o(5510)}catch{}s||(s=window.graphlib),y.exports=s},7365:(y,_,o)=>{var s=o(5760),m=o(6456).Graph,p=o(3226);y.exports=function c(t,h){if(t.nodeCount()<=1)return[];var d=function a(t,h){var d=new m,x=0,w=0;s.forEach(t.nodes(),function(k){d.setNode(k,{v:k,in:0,out:0})}),s.forEach(t.edges(),function(k){var I=d.edge(k.v,k.w)||0,A=h(k),P=I+A;d.setEdge(k.v,k.w,P),w=Math.max(w,d.node(k.v).out+=A),x=Math.max(x,d.node(k.w).in+=A)});var C=s.range(w+x+3).map(function(){return new p}),M=x+1;return s.forEach(d.nodes(),function(k){l(C,M,d.node(k))}),{graph:d,buckets:C,zeroIdx:M}}(t,h||g),x=function f(t,h,d){for(var M,x=[],w=h[h.length-1],C=h[0];t.nodeCount();){for(;M=C.dequeue();)i(t,h,d,M);for(;M=w.dequeue();)i(t,h,d,M);if(t.nodeCount())for(var k=h.length-2;k>0;--k)if(M=h[k].dequeue()){x=x.concat(i(t,h,d,M,!0));break}}return x}(d.graph,d.buckets,d.zeroIdx);return s.flatten(s.map(x,function(w){return t.outEdges(w.v,w.w)}),!0)};var g=s.constant(1);function i(t,h,d,x,w){var C=w?[]:void 0;return s.forEach(t.inEdges(x.v),function(M){var k=t.edge(M),I=t.node(M.v);w&&C.push({v:M.v,w:M.w}),I.out-=k,l(h,d,I)}),s.forEach(t.outEdges(x.v),function(M){var k=t.edge(M),I=M.w,A=t.node(I);A.in-=k,l(h,d,A)}),t.removeNode(x.v),C}function l(t,h,d){d.out?d.in?t[d.out-d.in+h].enqueue(d):t[t.length-1].enqueue(d):t[0].enqueue(d)}},4850:(y,_,o)=>{"use strict";var s=o(5760),m=o(2234),p=o(1496),g=o(4124),c=o(1510).normalizeRanks,f=o(162),i=o(1510).removeEmptyRanks,a=o(1230),l=o(9999),t=o(3870),h=o(2974),d=o(8226),x=o(1510),w=o(6456).Graph;y.exports=function C(J,Q){var rt=Q&&Q.debugTiming?x.time:x.notime;rt("layout",function(){var lt=rt("  buildLayoutGraph",function(){return function O(J){var Q=new w({multigraph:!0,compound:!0}),rt=xt(J.graph());return Q.setGraph(s.merge({},A,ct(rt,I),s.pick(rt,P))),s.forEach(J.nodes(),function(lt){var mt=xt(J.node(lt));Q.setNode(lt,s.defaults(ct(mt,H),V)),Q.setParent(lt,J.parent(lt))}),s.forEach(J.edges(),function(lt){var mt=xt(J.edge(lt));Q.setEdge(lt,s.merge({},Y,ct(mt,U),s.pick(mt,N)))}),Q}(J)});rt("  runLayout",function(){!function M(J,Q){Q("    makeSpaceForEdgeLabels",function(){!function L(J){var Q=J.graph();Q.ranksep/=2,s.forEach(J.edges(),function(rt){var lt=J.edge(rt);lt.minlen*=2,"c"!==lt.labelpos.toLowerCase()&&("TB"===Q.rankdir||"BT"===Q.rankdir?lt.width+=lt.labeloffset:lt.height+=lt.labeloffset)})}(J)}),Q("    removeSelfEdges",function(){!function it(J){s.forEach(J.edges(),function(Q){if(Q.v===Q.w){var rt=J.node(Q.v);rt.selfEdges||(rt.selfEdges=[]),rt.selfEdges.push({e:Q,label:J.edge(Q)}),J.removeEdge(Q)}})}(J)}),Q("    acyclic",function(){m.run(J)}),Q("    nestingGraph.run",function(){a.run(J)}),Q("    rank",function(){g(x.asNonCompoundGraph(J))}),Q("    injectEdgeLabelProxies",function(){!function F(J){s.forEach(J.edges(),function(Q){var rt=J.edge(Q);if(rt.width&&rt.height){var lt=J.node(Q.v),dt={rank:(J.node(Q.w).rank-lt.rank)/2+lt.rank,e:Q};x.addDummyNode(J,"edge-proxy",dt,"_ep")}})}(J)}),Q("    removeEmptyRanks",function(){i(J)}),Q("    nestingGraph.cleanup",function(){a.cleanup(J)}),Q("    normalizeRanks",function(){c(J)}),Q("    assignRankMinMax",function(){!function G(J){var Q=0;s.forEach(J.nodes(),function(rt){var lt=J.node(rt);lt.borderTop&&(lt.minRank=J.node(lt.borderTop).rank,lt.maxRank=J.node(lt.borderBottom).rank,Q=s.max(Q,lt.maxRank))}),J.graph().maxRank=Q}(J)}),Q("    removeEdgeLabelProxies",function(){!function z(J){s.forEach(J.nodes(),function(Q){var rt=J.node(Q);"edge-proxy"===rt.dummy&&(J.edge(rt.e).labelRank=rt.rank,J.removeNode(Q))})}(J)}),Q("    normalize.run",function(){p.run(J)}),Q("    parentDummyChains",function(){f(J)}),Q("    addBorderSegments",function(){l(J)}),Q("    order",function(){h(J)}),Q("    insertSelfEdges",function(){!function tt(J){var Q=x.buildLayerMatrix(J);s.forEach(Q,function(rt){var lt=0;s.forEach(rt,function(mt,dt){var _t=J.node(mt);_t.order=dt+lt,s.forEach(_t.selfEdges,function(bt){x.addDummyNode(J,"selfedge",{width:bt.label.width,height:bt.label.height,rank:_t.rank,order:dt+ ++lt,e:bt.e,label:bt.label},"_se")}),delete _t.selfEdges})})}(J)}),Q("    adjustCoordinateSystem",function(){t.adjust(J)}),Q("    position",function(){d(J)}),Q("    positionSelfEdges",function(){!function ut(J){s.forEach(J.nodes(),function(Q){var rt=J.node(Q);if("selfedge"===rt.dummy){var lt=J.node(rt.e.v),mt=lt.x+lt.width/2,dt=lt.y,_t=rt.x-mt,bt=lt.height/2;J.setEdge(rt.e,rt.label),J.removeNode(Q),rt.label.points=[{x:mt+2*_t/3,y:dt-bt},{x:mt+5*_t/6,y:dt-bt},{x:mt+_t,y:dt},{x:mt+5*_t/6,y:dt+bt},{x:mt+2*_t/3,y:dt+bt}],rt.label.x=rt.x,rt.label.y=rt.y}})}(J)}),Q("    removeBorderNodes",function(){!function W(J){s.forEach(J.nodes(),function(Q){if(J.children(Q).length){var rt=J.node(Q),lt=J.node(rt.borderTop),mt=J.node(rt.borderBottom),dt=J.node(s.last(rt.borderLeft)),_t=J.node(s.last(rt.borderRight));rt.width=Math.abs(_t.x-dt.x),rt.height=Math.abs(mt.y-lt.y),rt.x=dt.x+rt.width/2,rt.y=lt.y+rt.height/2}}),s.forEach(J.nodes(),function(Q){"border"===J.node(Q).dummy&&J.removeNode(Q)})}(J)}),Q("    normalize.undo",function(){p.undo(J)}),Q("    fixupEdgeLabelCoords",function(){!function Z(J){s.forEach(J.edges(),function(Q){var rt=J.edge(Q);if(s.has(rt,"x"))switch(("l"===rt.labelpos||"r"===rt.labelpos)&&(rt.width-=rt.labeloffset),rt.labelpos){case"l":rt.x-=rt.width/2+rt.labeloffset;break;case"r":rt.x+=rt.width/2+rt.labeloffset}})}(J)}),Q("    undoCoordinateSystem",function(){t.undo(J)}),Q("    translateGraph",function(){!function K(J){var Q=Number.POSITIVE_INFINITY,rt=0,lt=Number.POSITIVE_INFINITY,mt=0,dt=J.graph(),_t=dt.marginx||0,bt=dt.marginy||0;function ot(at){var et=at.x,gt=at.y,Tt=at.width,wt=at.height;Q=Math.min(Q,et-Tt/2),rt=Math.max(rt,et+Tt/2),lt=Math.min(lt,gt-wt/2),mt=Math.max(mt,gt+wt/2)}s.forEach(J.nodes(),function(at){ot(J.node(at))}),s.forEach(J.edges(),function(at){var et=J.edge(at);s.has(et,"x")&&ot(et)}),Q-=_t,lt-=bt,s.forEach(J.nodes(),function(at){var et=J.node(at);et.x-=Q,et.y-=lt}),s.forEach(J.edges(),function(at){var et=J.edge(at);s.forEach(et.points,function(gt){gt.x-=Q,gt.y-=lt}),s.has(et,"x")&&(et.x-=Q),s.has(et,"y")&&(et.y-=lt)}),dt.width=rt-Q+_t,dt.height=mt-lt+bt}(J)}),Q("    assignNodeIntersects",function(){!function B(J){s.forEach(J.edges(),function(Q){var dt,_t,rt=J.edge(Q),lt=J.node(Q.v),mt=J.node(Q.w);rt.points?(dt=rt.points[0],_t=rt.points[rt.points.length-1]):(rt.points=[],dt=mt,_t=lt),rt.points.unshift(x.intersectRect(lt,dt)),rt.points.push(x.intersectRect(mt,_t))})}(J)}),Q("    reversePoints",function(){!function X(J){s.forEach(J.edges(),function(Q){var rt=J.edge(Q);rt.reversed&&rt.points.reverse()})}(J)}),Q("    acyclic.undo",function(){m.undo(J)})}(lt,rt)}),rt("  updateInputGraph",function(){!function k(J,Q){s.forEach(J.nodes(),function(rt){var lt=J.node(rt),mt=Q.node(rt);lt&&(lt.x=mt.x,lt.y=mt.y,Q.children(rt).length&&(lt.width=mt.width,lt.height=mt.height))}),s.forEach(J.edges(),function(rt){var lt=J.edge(rt),mt=Q.edge(rt);lt.points=mt.points,s.has(mt,"x")&&(lt.x=mt.x,lt.y=mt.y)}),J.graph().width=Q.graph().width,J.graph().height=Q.graph().height}(J,lt)})})};var I=["nodesep","edgesep","ranksep","marginx","marginy"],A={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},P=["acyclicer","ranker","rankdir","align"],H=["width","height"],V={width:0,height:0},U=["minlen","weight","width","height","labeloffset"],Y={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},N=["labelpos"];function ct(J,Q){return s.mapValues(s.pick(J,Q),Number)}function xt(J){var Q={};return s.forEach(J,function(rt,lt){Q[lt.toLowerCase()]=rt}),Q}},5760:(y,_,o)=>{var s;try{s={cloneDeep:o(733),constant:o(6684),defaults:o(8800),each:o(5474),filter:o(5281),find:o(2516),flatten:o(2274),forEach:o(9851),forIn:o(1176),has:o(4842),isUndefined:o(4235),last:o(5809),map:o(9984),mapValues:o(203),max:o(8176),merge:o(567),min:o(9439),minBy:o(9525),now:o(1710),pick:o(6372),range:o(361),reduce:o(1337),sortBy:o(2906),uniqueId:o(1541),values:o(377),zipObject:o(1617)}}catch{}s||(s=window._),y.exports=s},1230:(y,_,o)=>{var s=o(5760),m=o(1510);function g(a,l,t,h,d,x,w){var C=a.children(w);if(C.length){var M=m.addBorderNode(a,"_bt"),k=m.addBorderNode(a,"_bb"),I=a.node(w);a.setParent(M,w),I.borderTop=M,a.setParent(k,w),I.borderBottom=k,s.forEach(C,function(A){g(a,l,t,h,d,x,A);var P=a.node(A),H=P.borderTop?P.borderTop:A,V=P.borderBottom?P.borderBottom:A,U=P.borderTop?h:2*h,Y=H!==V?1:d-x[w]+1;a.setEdge(M,H,{weight:U,minlen:Y,nestingEdge:!0}),a.setEdge(V,k,{weight:U,minlen:Y,nestingEdge:!0})}),a.parent(w)||a.setEdge(l,M,{weight:0,minlen:d+x[w]})}else w!==l&&a.setEdge(l,w,{weight:0,minlen:t})}y.exports={run:function p(a){var l=m.addDummyNode(a,"root",{},"_root"),t=function c(a){var l={};function t(h,d){var x=a.children(h);x&&x.length&&s.forEach(x,function(w){t(w,d+1)}),l[h]=d}return s.forEach(a.children(),function(h){t(h,1)}),l}(a),h=s.max(s.values(t))-1,d=2*h+1;a.graph().nestingRoot=l,s.forEach(a.edges(),function(w){a.edge(w).minlen*=d});var x=function f(a){return s.reduce(a.edges(),function(l,t){return l+a.edge(t).weight},0)}(a)+1;s.forEach(a.children(),function(w){g(a,l,d,x,h,t,w)}),a.graph().nodeRankFactor=d},cleanup:function i(a){var l=a.graph();a.removeNode(l.nestingRoot),delete l.nestingRoot,s.forEach(a.edges(),function(t){a.edge(t).nestingEdge&&a.removeEdge(t)})}}},1496:(y,_,o)=>{"use strict";var s=o(5760),m=o(1510);y.exports={run:function p(f){f.graph().dummyChains=[],s.forEach(f.edges(),function(i){!function g(f,i){var a=i.v,l=f.node(a).rank,t=i.w,h=f.node(t).rank,d=i.name,x=f.edge(i),w=x.labelRank;if(h!==l+1){var C,M,k;for(f.removeEdge(i),k=0,++l;l<h;++k,++l)x.points=[],M={width:0,height:0,edgeLabel:x,edgeObj:i,rank:l},C=m.addDummyNode(f,"edge",M,"_d"),l===w&&(M.width=x.width,M.height=x.height,M.dummy="edge-label",M.labelpos=x.labelpos),f.setEdge(a,C,{weight:x.weight},d),0===k&&f.graph().dummyChains.push(C),a=C;f.setEdge(a,t,{weight:x.weight},d)}}(f,i)})},undo:function c(f){s.forEach(f.graph().dummyChains,function(i){var t,a=f.node(i),l=a.edgeLabel;for(f.setEdge(a.edgeObj,l);a.dummy;)t=f.successors(i)[0],f.removeNode(i),l.points.push({x:a.x,y:a.y}),"edge-label"===a.dummy&&(l.x=a.x,l.y=a.y,l.width=a.width,l.height=a.height),i=t,a=f.node(i)})}}},3034:(y,_,o)=>{var s=o(5760);y.exports=function m(p,g,c){var i,f={};s.forEach(c,function(a){for(var t,h,l=p.parent(a);l;){if((t=p.parent(l))?(h=f[t],f[t]=l):(h=i,i=l),h&&h!==l)return void g.setEdge(h,l);l=t}})}},1323:(y,_,o)=>{var s=o(5760);y.exports=function m(p,g){return s.map(g,function(c){var f=p.inEdges(c);if(f.length){var i=s.reduce(f,function(a,l){var t=p.edge(l),h=p.node(l.v);return{sum:a.sum+t.weight*h.order,weight:a.weight+t.weight}},{sum:0,weight:0});return{v:c,barycenter:i.sum/i.weight,weight:i.weight}}return{v:c}})}},1686:(y,_,o)=>{var s=o(5760),m=o(6456).Graph;y.exports=function p(c,f,i){var a=function g(c){for(var f;c.hasNode(f=s.uniqueId("_root")););return f}(c),l=new m({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(t){return c.node(t)});return s.forEach(c.nodes(),function(t){var h=c.node(t),d=c.parent(t);(h.rank===f||h.minRank<=f&&f<=h.maxRank)&&(l.setNode(t),l.setParent(t,d||a),s.forEach(c[i](t),function(x){var w=x.v===t?x.w:x.v,C=l.edge(w,t),M=s.isUndefined(C)?0:C.weight;l.setEdge(w,t,{weight:c.edge(x).weight+M})}),s.has(h,"minRank")&&l.setNode(t,{borderLeft:h.borderLeft[f],borderRight:h.borderRight[f]}))}),l}},8796:(y,_,o)=>{"use strict";var s=o(5760);function p(g,c,f){for(var i=s.zipObject(f,s.map(f,function(x,w){return w})),a=s.flatten(s.map(c,function(x){return s.sortBy(s.map(g.outEdges(x),function(w){return{pos:i[w.w],weight:g.edge(w).weight}}),"pos")}),!0),l=1;l<f.length;)l<<=1;var t=2*l-1;l-=1;var h=s.map(new Array(t),function(){return 0}),d=0;return s.forEach(a.forEach(function(x){var w=x.pos+l;h[w]+=x.weight;for(var C=0;w>0;)w%2&&(C+=h[w+1]),h[w=w-1>>1]+=x.weight;d+=x.weight*C})),d}y.exports=function m(g,c){for(var f=0,i=1;i<c.length;++i)f+=p(g,c[i-1],c[i]);return f}},2974:(y,_,o)=>{"use strict";var s=o(5760),m=o(9402),p=o(8796),g=o(1057),c=o(1686),f=o(3034),i=o(6456).Graph,a=o(1510);function t(x,w,C){return s.map(w,function(M){return c(x,M,C)})}function h(x,w){var C=new i;s.forEach(x,function(M){var k=M.graph().root,I=g(M,k,C,w);s.forEach(I.vs,function(A,P){M.node(A).order=P}),f(M,C,I.vs)})}function d(x,w){s.forEach(w,function(C){s.forEach(C,function(M,k){x.node(M).order=k})})}y.exports=function l(x){var w=a.maxRank(x),C=t(x,s.range(1,w+1),"inEdges"),M=t(x,s.range(w-1,-1,-1),"outEdges"),k=m(x);d(x,k);for(var A,I=Number.POSITIVE_INFINITY,P=0,H=0;H<4;++P,++H){h(P%2?C:M,P%4>=2),k=a.buildLayerMatrix(x);var V=p(x,k);V<I&&(H=0,A=s.cloneDeep(k),I=V)}d(x,A)}},9402:(y,_,o)=>{"use strict";var s=o(5760);y.exports=function m(p){var g={},c=s.filter(p.nodes(),function(t){return!p.children(t).length}),f=s.max(s.map(c,function(t){return p.node(t).rank})),i=s.map(s.range(f+1),function(){return[]});var l=s.sortBy(c,function(t){return p.node(t).rank});return s.forEach(l,function a(t){if(!s.has(g,t)){g[t]=!0;var h=p.node(t);i[h.rank].push(t),s.forEach(p.successors(t),a)}}),i}},3826:(y,_,o)=>{"use strict";var s=o(5760);y.exports=function m(c,f){var i={};return s.forEach(c,function(l,t){var h=i[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:t};s.isUndefined(l.barycenter)||(h.barycenter=l.barycenter,h.weight=l.weight)}),s.forEach(f.edges(),function(l){var t=i[l.v],h=i[l.w];!s.isUndefined(t)&&!s.isUndefined(h)&&(h.indegree++,t.out.push(i[l.w]))}),function p(c){var f=[];function i(t){return function(h){h.merged||(s.isUndefined(h.barycenter)||s.isUndefined(t.barycenter)||h.barycenter>=t.barycenter)&&function g(c,f){var i=0,a=0;c.weight&&(i+=c.barycenter*c.weight,a+=c.weight),f.weight&&(i+=f.barycenter*f.weight,a+=f.weight),c.vs=f.vs.concat(c.vs),c.barycenter=i/a,c.weight=a,c.i=Math.min(f.i,c.i),f.merged=!0}(t,h)}}function a(t){return function(h){h.in.push(t),0==--h.indegree&&c.push(h)}}for(;c.length;){var l=c.pop();f.push(l),s.forEach(l.in.reverse(),i(l)),s.forEach(l.out,a(l))}return s.map(s.filter(f,function(t){return!t.merged}),function(t){return s.pick(t,["vs","i","barycenter","weight"])})}(s.filter(i,function(l){return!l.indegree}))}},1057:(y,_,o)=>{var s=o(5760),m=o(1323),p=o(3826),g=o(3803);y.exports=function c(a,l,t,h){var d=a.children(l),x=a.node(l),w=x?x.borderLeft:void 0,C=x?x.borderRight:void 0,M={};w&&(d=s.filter(d,function(V){return V!==w&&V!==C}));var k=m(a,d);s.forEach(k,function(V){if(a.children(V.v).length){var U=c(a,V.v,t,h);M[V.v]=U,s.has(U,"barycenter")&&function i(a,l){s.isUndefined(a.barycenter)?(a.barycenter=l.barycenter,a.weight=l.weight):(a.barycenter=(a.barycenter*a.weight+l.barycenter*l.weight)/(a.weight+l.weight),a.weight+=l.weight)}(V,U)}});var I=p(k,t);!function f(a,l){s.forEach(a,function(t){t.vs=s.flatten(t.vs.map(function(h){return l[h]?l[h].vs:h}),!0)})}(I,M);var A=g(I,h);if(w&&(A.vs=s.flatten([w,A.vs,C],!0),a.predecessors(w).length)){var P=a.node(a.predecessors(w)[0]),H=a.node(a.predecessors(C)[0]);s.has(A,"barycenter")||(A.barycenter=0,A.weight=0),A.barycenter=(A.barycenter*A.weight+P.order+H.order)/(A.weight+2),A.weight+=2}return A}},3803:(y,_,o)=>{var s=o(5760),m=o(1510);function g(f,i,a){for(var l;i.length&&(l=s.last(i)).i<=a;)i.pop(),f.push(l.vs),a++;return a}y.exports=function p(f,i){var a=m.partition(f,function(M){return s.has(M,"barycenter")}),l=a.lhs,t=s.sortBy(a.rhs,function(M){return-M.i}),h=[],d=0,x=0,w=0;l.sort(function c(f){return function(i,a){return i.barycenter<a.barycenter?-1:i.barycenter>a.barycenter?1:f?a.i-i.i:i.i-a.i}}(!!i)),w=g(h,t,w),s.forEach(l,function(M){w+=M.vs.length,h.push(M.vs),d+=M.barycenter*M.weight,x+=M.weight,w=g(h,t,w)});var C={vs:s.flatten(h,!0)};return x&&(C.barycenter=d/x,C.weight=x),C}},162:(y,_,o)=>{var s=o(5760);y.exports=function m(c){var f=function g(c){var f={},i=0;function a(l){var t=i;s.forEach(c.children(l),a),f[l]={low:t,lim:i++}}return s.forEach(c.children(),a),f}(c);s.forEach(c.graph().dummyChains,function(i){for(var a=c.node(i),l=a.edgeObj,t=function p(c,f,i,a){var x,w,l=[],t=[],h=Math.min(f[i].low,f[a].low),d=Math.max(f[i].lim,f[a].lim);x=i;do{x=c.parent(x),l.push(x)}while(x&&(f[x].low>h||d>f[x].lim));for(w=x,x=a;(x=c.parent(x))!==w;)t.push(x);return{path:l.concat(t.reverse()),lca:w}}(c,f,l.v,l.w),h=t.path,d=t.lca,x=0,w=h[x],C=!0;i!==l.w;){if(a=c.node(i),C){for(;(w=h[x])!==d&&c.node(w).maxRank<a.rank;)x++;w===d&&(C=!1)}if(!C){for(;x<h.length-1&&c.node(w=h[x+1]).minRank<=a.rank;)x++;w=h[x]}c.setParent(i,w),i=c.successors(i)[0]}})}},4058:(y,_,o)=>{"use strict";var s=o(5760),m=o(6456).Graph,p=o(1510);function g(I,A){var P={};return s.reduce(A,function H(V,U){var Y=0,N=0,O=V.length,L=s.last(U);return s.forEach(U,function(F,G){var z=function f(I,A){if(I.node(A).dummy)return s.find(I.predecessors(A),function(P){return I.node(P).dummy})}(I,F),K=z?I.node(z).order:O;(z||F===L)&&(s.forEach(U.slice(N,G+1),function(B){s.forEach(I.predecessors(B),function(Z){var X=I.node(Z),W=X.order;(W<Y||K<W)&&(!X.dummy||!I.node(B).dummy)&&i(P,Z,B)})}),N=G+1,Y=K)}),U}),P}function c(I,A){var P={};function H(U,Y,N,O,L){var F;s.forEach(s.range(Y,N),function(G){F=U[G],I.node(F).dummy&&s.forEach(I.predecessors(F),function(z){var K=I.node(z);K.dummy&&(K.order<O||K.order>L)&&i(P,z,F)})})}return s.reduce(A,function V(U,Y){var O,N=-1,L=0;return s.forEach(Y,function(F,G){if("border"===I.node(F).dummy){var z=I.predecessors(F);z.length&&(O=I.node(z[0]).order,H(Y,L,G,N,O),L=G,N=O)}H(Y,L,Y.length,O,U.length)}),Y}),P}function i(I,A,P){if(A>P){var H=A;A=P,P=H}var V=I[A];V||(I[A]=V={}),V[P]=!0}function a(I,A,P){if(A>P){var H=A;A=P,P=H}return s.has(I[A],P)}function l(I,A,P,H){var V={},U={},Y={};return s.forEach(A,function(N){s.forEach(N,function(O,L){V[O]=O,U[O]=O,Y[O]=L})}),s.forEach(A,function(N){var O=-1;s.forEach(N,function(L){var F=H(L);if(F.length)for(var G=((F=s.sortBy(F,function(Z){return Y[Z]})).length-1)/2,z=Math.floor(G),K=Math.ceil(G);z<=K;++z){var B=F[z];U[L]===L&&O<Y[B]&&!a(P,L,B)&&(U[B]=L,U[L]=V[L]=V[B],O=Y[B])}})}),{root:V,align:U}}function t(I,A,P,H,V){var U={},Y=function h(I,A,P,H){var V=new m,U=I.graph(),Y=function M(I,A,P){return function(H,V,U){var L,Y=H.node(V),N=H.node(U),O=0;if(O+=Y.width/2,s.has(Y,"labelpos"))switch(Y.labelpos.toLowerCase()){case"l":L=-Y.width/2;break;case"r":L=Y.width/2}if(L&&(O+=P?L:-L),L=0,O+=(Y.dummy?A:I)/2,O+=(N.dummy?A:I)/2,O+=N.width/2,s.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":L=N.width/2;break;case"r":L=-N.width/2}return L&&(O+=P?L:-L),L=0,O}}(U.nodesep,U.edgesep,H);return s.forEach(A,function(N){var O;s.forEach(N,function(L){var F=P[L];if(V.setNode(F),O){var G=P[O],z=V.edge(G,F);V.setEdge(G,F,Math.max(Y(I,L,O),z||0))}O=L})}),V}(I,A,P,V),N=V?"borderLeft":"borderRight";function O(G,z){for(var K=Y.nodes(),B=K.pop(),Z={};B;)Z[B]?G(B):(Z[B]=!0,K.push(B),K=K.concat(z(B))),B=K.pop()}return O(function L(G){U[G]=Y.inEdges(G).reduce(function(z,K){return Math.max(z,U[K.v]+Y.edge(K))},0)},Y.predecessors.bind(Y)),O(function F(G){var z=Y.outEdges(G).reduce(function(B,Z){return Math.min(B,U[Z.w]-Y.edge(Z))},Number.POSITIVE_INFINITY),K=I.node(G);z!==Number.POSITIVE_INFINITY&&K.borderType!==N&&(U[G]=Math.max(U[G],z))},Y.successors.bind(Y)),s.forEach(H,function(G){U[G]=U[P[G]]}),U}function d(I,A){return s.minBy(s.values(A),function(P){var H=Number.NEGATIVE_INFINITY,V=Number.POSITIVE_INFINITY;return s.forIn(P,function(U,Y){var N=function k(I,A){return I.node(A).width}(I,Y)/2;H=Math.max(U+N,H),V=Math.min(U-N,V)}),H-V})}function x(I,A){var P=s.values(A),H=s.min(P),V=s.max(P);s.forEach(["u","d"],function(U){s.forEach(["l","r"],function(Y){var L,N=U+Y,O=I[N];if(O!==A){var F=s.values(O);(L="l"===Y?H-s.min(F):V-s.max(F))&&(I[N]=s.mapValues(O,function(G){return G+L}))}})})}function w(I,A){return s.mapValues(I.ul,function(P,H){if(A)return I[A.toLowerCase()][H];var V=s.sortBy(s.map(I,H));return(V[1]+V[2])/2})}y.exports={positionX:function C(I){var V,A=p.buildLayerMatrix(I),P=s.merge(g(I,A),c(I,A)),H={};s.forEach(["u","d"],function(Y){V="u"===Y?A:s.values(A).reverse(),s.forEach(["l","r"],function(N){"r"===N&&(V=s.map(V,function(G){return s.values(G).reverse()}));var O=("u"===Y?I.predecessors:I.successors).bind(I),L=l(I,V,P,O),F=t(I,V,L.root,L.align,"r"===N);"r"===N&&(F=s.mapValues(F,function(G){return-G})),H[Y+N]=F})});var U=d(I,H);return x(H,U),w(H,I.graph().align)},findType1Conflicts:g,findType2Conflicts:c,addConflict:i,hasConflict:a,verticalAlignment:l,horizontalCompaction:t,alignCoordinates:x,findSmallestWidthAlignment:d,balance:w}},8226:(y,_,o)=>{"use strict";var s=o(5760),m=o(1510),p=o(4058).positionX;y.exports=function g(f){(function c(f){var i=m.buildLayerMatrix(f),a=f.graph().ranksep,l=0;s.forEach(i,function(t){var h=s.max(s.map(t,function(d){return f.node(d).height}));s.forEach(t,function(d){f.node(d).y=l+h/2}),l+=h+a})})(f=m.asNonCompoundGraph(f)),s.forEach(p(f),function(i,a){f.node(a).x=i})}},6632:(y,_,o)=>{"use strict";var s=o(5760),m=o(6456).Graph,p=o(1916).slack;function c(a,l){return s.forEach(a.nodes(),function t(h){s.forEach(l.nodeEdges(h),function(d){var x=d.v,w=h===x?d.w:x;!a.hasNode(w)&&!p(l,d)&&(a.setNode(w,{}),a.setEdge(h,w,{}),t(w))})}),a.nodeCount()}function f(a,l){return s.minBy(l.edges(),function(t){if(a.hasNode(t.v)!==a.hasNode(t.w))return p(l,t)})}function i(a,l,t){s.forEach(a.nodes(),function(h){l.node(h).rank+=t})}y.exports=function g(a){var d,x,l=new m({directed:!1}),t=a.nodes()[0],h=a.nodeCount();for(l.setNode(t,{});c(l,a)<h;)d=f(l,a),x=l.hasNode(d.v)?p(a,d):-p(a,d),i(l,a,x);return l}},4124:(y,_,o)=>{"use strict";var m=o(1916).longestPath,p=o(6632),g=o(3804);y.exports=function c(l){switch(l.graph().ranker){case"network-simplex":default:a(l);break;case"tight-tree":!function i(l){m(l),p(l)}(l);break;case"longest-path":f(l)}};var f=m;function a(l){g(l)}},3804:(y,_,o)=>{"use strict";var s=o(5760),m=o(6632),p=o(1916).slack,g=o(1916).longestPath,c=o(6456).alg.preorder,f=o(6456).alg.postorder,i=o(1510).simplify;function a(P){P=i(P),g(P);var V,H=m(P);for(d(H),l(H,P);V=w(H);)M(H,P,V,C(H,P,V))}function l(P,H){var V=f(P,P.nodes());V=V.slice(0,V.length-1),s.forEach(V,function(U){!function t(P,H,V){var U=P.node(V),Y=U.parent;P.edge(V,Y).cutvalue=h(P,H,V)}(P,H,U)})}function h(P,H,V){var Y=P.node(V).parent,N=!0,O=H.edge(V,Y),L=0;return O||(N=!1,O=H.edge(Y,V)),L=O.weight,s.forEach(H.nodeEdges(V),function(F){var G=F.v===V,z=G?F.w:F.v;if(z!==Y){var K=G===N,B=H.edge(F).weight;if(L+=K?B:-B,function I(P,H,V){return P.hasEdge(H,V)}(P,V,z)){var Z=P.edge(V,z).cutvalue;L+=K?-Z:Z}}}),L}function d(P,H){arguments.length<2&&(H=P.nodes()[0]),x(P,{},1,H)}function x(P,H,V,U,Y){var N=V,O=P.node(U);return H[U]=!0,s.forEach(P.neighbors(U),function(L){s.has(H,L)||(V=x(P,H,V,L,U))}),O.low=N,O.lim=V++,Y?O.parent=Y:delete O.parent,V}function w(P){return s.find(P.edges(),function(H){return P.edge(H).cutvalue<0})}function C(P,H,V){var U=V.v,Y=V.w;H.hasEdge(U,Y)||(U=V.w,Y=V.v);var N=P.node(U),O=P.node(Y),L=N,F=!1;N.lim>O.lim&&(L=O,F=!0);var G=s.filter(H.edges(),function(z){return F===A(P,P.node(z.v),L)&&F!==A(P,P.node(z.w),L)});return s.minBy(G,function(z){return p(H,z)})}function M(P,H,V,U){var Y=V.v,N=V.w;P.removeEdge(Y,N),P.setEdge(U.v,U.w,{}),d(P),l(P,H),function k(P,H){var V=s.find(P.nodes(),function(Y){return!H.node(Y).parent}),U=c(P,V);U=U.slice(1),s.forEach(U,function(Y){var N=P.node(Y).parent,O=H.edge(Y,N),L=!1;O||(O=H.edge(N,Y),L=!0),H.node(Y).rank=H.node(N).rank+(L?O.minlen:-O.minlen)})}(P,H)}function A(P,H,V){return V.low<=H.lim&&H.lim<=V.lim}y.exports=a,a.initLowLimValues=d,a.initCutValues=l,a.calcCutValue=h,a.leaveEdge=w,a.enterEdge=C,a.exchangeEdges=M},1916:(y,_,o)=>{"use strict";var s=o(5760);y.exports={longestPath:function m(g){var c={};s.forEach(g.sources(),function f(i){var a=g.node(i);if(s.has(c,i))return a.rank;c[i]=!0;var l=s.min(s.map(g.outEdges(i),function(t){return f(t.w)-g.edge(t).minlen}));return(l===Number.POSITIVE_INFINITY||null==l)&&(l=0),a.rank=l})},slack:function p(g,c){return g.node(c.w).rank-g.node(c.v).rank-g.edge(c).minlen}}},1510:(y,_,o)=>{"use strict";var s=o(5760),m=o(6456).Graph;function p(k,I,A,P){var H;do{H=s.uniqueId(P)}while(k.hasNode(H));return A.dummy=I,k.setNode(H,A),H}function x(k){return s.max(s.map(k.nodes(),function(I){var A=k.node(I).rank;if(!s.isUndefined(A))return A}))}y.exports={addDummyNode:p,simplify:function g(k){var I=(new m).setGraph(k.graph());return s.forEach(k.nodes(),function(A){I.setNode(A,k.node(A))}),s.forEach(k.edges(),function(A){var P=I.edge(A.v,A.w)||{weight:0,minlen:1},H=k.edge(A);I.setEdge(A.v,A.w,{weight:P.weight+H.weight,minlen:Math.max(P.minlen,H.minlen)})}),I},asNonCompoundGraph:function c(k){var I=new m({multigraph:k.isMultigraph()}).setGraph(k.graph());return s.forEach(k.nodes(),function(A){k.children(A).length||I.setNode(A,k.node(A))}),s.forEach(k.edges(),function(A){I.setEdge(A,k.edge(A))}),I},successorWeights:function f(k){var I=s.map(k.nodes(),function(A){var P={};return s.forEach(k.outEdges(A),function(H){P[H.w]=(P[H.w]||0)+k.edge(H).weight}),P});return s.zipObject(k.nodes(),I)},predecessorWeights:function i(k){var I=s.map(k.nodes(),function(A){var P={};return s.forEach(k.inEdges(A),function(H){P[H.v]=(P[H.v]||0)+k.edge(H).weight}),P});return s.zipObject(k.nodes(),I)},intersectRect:function a(k,I){var N,O,A=k.x,P=k.y,H=I.x-A,V=I.y-P,U=k.width/2,Y=k.height/2;if(!H&&!V)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(V)*U>Math.abs(H)*Y?(V<0&&(Y=-Y),N=Y*H/V,O=Y):(H<0&&(U=-U),N=U,O=U*V/H),{x:A+N,y:P+O}},buildLayerMatrix:function l(k){var I=s.map(s.range(x(k)+1),function(){return[]});return s.forEach(k.nodes(),function(A){var P=k.node(A),H=P.rank;s.isUndefined(H)||(I[H][P.order]=A)}),I},normalizeRanks:function t(k){var I=s.min(s.map(k.nodes(),function(A){return k.node(A).rank}));s.forEach(k.nodes(),function(A){var P=k.node(A);s.has(P,"rank")&&(P.rank-=I)})},removeEmptyRanks:function h(k){var I=s.min(s.map(k.nodes(),function(V){return k.node(V).rank})),A=[];s.forEach(k.nodes(),function(V){var U=k.node(V).rank-I;A[U]||(A[U]=[]),A[U].push(V)});var P=0,H=k.graph().nodeRankFactor;s.forEach(A,function(V,U){s.isUndefined(V)&&U%H!=0?--P:P&&s.forEach(V,function(Y){k.node(Y).rank+=P})})},addBorderNode:function d(k,I,A,P){var H={width:0,height:0};return arguments.length>=4&&(H.rank=A,H.order=P),p(k,"border",H,I)},maxRank:x,partition:function w(k,I){var A={lhs:[],rhs:[]};return s.forEach(k,function(P){I(P)?A.lhs.push(P):A.rhs.push(P)}),A},time:function C(k,I){var A=s.now();try{return I()}finally{console.log(k+" time: "+(s.now()-A)+"ms")}},notime:function M(k,I){return I()}}},8126:y=>{y.exports="0.8.5"},5510:(y,_,o)=>{var s=o(1838);y.exports={Graph:s.Graph,json:o(1088),alg:o(3430),version:s.version}},6730:(y,_,o)=>{var s=o(9138);y.exports=function m(p){var f,g={},c=[];function i(a){s.has(g,a)||(g[a]=!0,f.push(a),s.each(p.successors(a),i),s.each(p.predecessors(a),i))}return s.each(p.nodes(),function(a){f=[],i(a),f.length&&c.push(f)}),c}},2163:(y,_,o)=>{var s=o(9138);function p(g,c,f,i,a,l){s.has(i,c)||(i[c]=!0,f||l.push(c),s.each(a(c),function(t){p(g,t,f,i,a,l)}),f&&l.push(c))}y.exports=function m(g,c,f){s.isArray(c)||(c=[c]);var i=(g.isDirected()?g.successors:g.neighbors).bind(g),a=[],l={};return s.each(c,function(t){if(!g.hasNode(t))throw new Error("Graph does not have node: "+t);p(g,t,"post"===f,l,i,a)}),a}},5668:(y,_,o)=>{var s=o(8969),m=o(9138);y.exports=function p(g,c,f){return m.transform(g.nodes(),function(i,a){i[a]=s(g,a,c,f)},{})}},8969:(y,_,o)=>{var s=o(9138),m=o(1919);y.exports=function g(f,i,a,l){return function c(f,i,a,l){var d,x,t={},h=new m,w=function(C){var M=C.v!==d?C.v:C.w,k=t[M],I=a(C),A=x.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+C+" Weight: "+I);A<k.distance&&(k.distance=A,k.predecessor=d,h.decrease(M,A))};for(f.nodes().forEach(function(C){var M=C===i?0:Number.POSITIVE_INFINITY;t[C]={distance:M},h.add(C,M)});h.size()>0&&(d=h.removeMin(),(x=t[d]).distance!==Number.POSITIVE_INFINITY);)l(d).forEach(w);return t}(f,String(i),a||p,l||function(t){return f.outEdges(t)})};var p=s.constant(1)},9611:(y,_,o)=>{var s=o(9138),m=o(3585);y.exports=function p(g){return s.filter(m(g),function(c){return c.length>1||1===c.length&&g.hasEdge(c[0],c[0])})}},2881:(y,_,o)=>{var s=o(9138);y.exports=function p(c,f,i){return function g(c,f,i){var a={},l=c.nodes();return l.forEach(function(t){a[t]={},a[t][t]={distance:0},l.forEach(function(h){t!==h&&(a[t][h]={distance:Number.POSITIVE_INFINITY})}),i(t).forEach(function(h){var d=h.v===t?h.w:h.v,x=f(h);a[t][d]={distance:x,predecessor:t}})}),l.forEach(function(t){var h=a[t];l.forEach(function(d){var x=a[d];l.forEach(function(w){var C=x[t],M=h[w],k=x[w],I=C.distance+M.distance;I<k.distance&&(k.distance=I,k.predecessor=M.predecessor)})})}),a}(c,f||m,i||function(a){return c.outEdges(a)})};var m=s.constant(1)},3430:(y,_,o)=>{y.exports={components:o(6730),dijkstra:o(8969),dijkstraAll:o(5668),findCycles:o(9611),floydWarshall:o(2881),isAcyclic:o(6693),postorder:o(6694),preorder:o(5330),prim:o(6823),tarjan:o(3585),topsort:o(2180)}},6693:(y,_,o)=>{var s=o(2180);y.exports=function m(p){try{s(p)}catch(g){if(g instanceof s.CycleException)return!1;throw g}return!0}},6694:(y,_,o)=>{var s=o(2163);y.exports=function m(p,g){return s(p,g,"post")}},5330:(y,_,o)=>{var s=o(2163);y.exports=function m(p,g){return s(p,g,"pre")}},6823:(y,_,o)=>{var s=o(9138),m=o(6568),p=o(1919);y.exports=function g(c,f){var t,i=new m,a={},l=new p;function h(x){var w=x.v===t?x.w:x.v,C=l.priority(w);if(void 0!==C){var M=f(x);M<C&&(a[w]=t,l.decrease(w,M))}}if(0===c.nodeCount())return i;s.each(c.nodes(),function(x){l.add(x,Number.POSITIVE_INFINITY),i.setNode(x)}),l.decrease(c.nodes()[0],0);for(var d=!1;l.size()>0;){if(t=l.removeMin(),s.has(a,t))i.setEdge(t,a[t]);else{if(d)throw new Error("Input graph is not connected: "+c);d=!0}c.nodeEdges(t).forEach(h)}return i}},3585:(y,_,o)=>{var s=o(9138);y.exports=function m(p){var g=0,c=[],f={},i=[];function a(l){var t=f[l]={onStack:!0,lowlink:g,index:g++};if(c.push(l),p.successors(l).forEach(function(x){s.has(f,x)?f[x].onStack&&(t.lowlink=Math.min(t.lowlink,f[x].index)):(a(x),t.lowlink=Math.min(t.lowlink,f[x].lowlink))}),t.lowlink===t.index){var d,h=[];do{d=c.pop(),f[d].onStack=!1,h.push(d)}while(l!==d);i.push(h)}}return p.nodes().forEach(function(l){s.has(f,l)||a(l)}),i}},2180:(y,_,o)=>{var s=o(9138);function m(g){var c={},f={},i=[];if(s.each(g.sinks(),function a(l){if(s.has(f,l))throw new p;s.has(c,l)||(f[l]=!0,c[l]=!0,s.each(g.predecessors(l),a),delete f[l],i.push(l))}),s.size(c)!==g.nodeCount())throw new p;return i}function p(){}y.exports=m,m.CycleException=p,p.prototype=new Error},1919:(y,_,o)=>{var s=o(9138);function m(){this._arr=[],this._keyIndices={}}y.exports=m,m.prototype.size=function(){return this._arr.length},m.prototype.keys=function(){return this._arr.map(function(p){return p.key})},m.prototype.has=function(p){return s.has(this._keyIndices,p)},m.prototype.priority=function(p){var g=this._keyIndices[p];if(void 0!==g)return this._arr[g].priority},m.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},m.prototype.add=function(p,g){var c=this._keyIndices;if(p=String(p),!s.has(c,p)){var f=this._arr,i=f.length;return c[p]=i,f.push({key:p,priority:g}),this._decrease(i),!0}return!1},m.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var p=this._arr.pop();return delete this._keyIndices[p.key],this._heapify(0),p.key},m.prototype.decrease=function(p,g){var c=this._keyIndices[p];if(g>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+p+" Old: "+this._arr[c].priority+" New: "+g);this._arr[c].priority=g,this._decrease(c)},m.prototype._heapify=function(p){var g=this._arr,c=2*p,f=c+1,i=p;c<g.length&&(i=g[c].priority<g[i].priority?c:i,f<g.length&&(i=g[f].priority<g[i].priority?f:i),i!==p&&(this._swap(p,i),this._heapify(i)))},m.prototype._decrease=function(p){for(var f,g=this._arr,c=g[p].priority;0!==p&&!(g[f=p>>1].priority<c);)this._swap(p,f),p=f},m.prototype._swap=function(p,g){var c=this._arr,f=this._keyIndices,i=c[p],a=c[g];c[p]=a,c[g]=i,f[a.key]=p,f[i.key]=g}},6568:(y,_,o)=>{"use strict";var s=o(9138);y.exports=c;var p="\0";function c(h){this._isDirected=!s.has(h,"directed")||h.directed,this._isMultigraph=!!s.has(h,"multigraph")&&h.multigraph,this._isCompound=!!s.has(h,"compound")&&h.compound,this._label=void 0,this._defaultNodeLabelFn=s.constant(void 0),this._defaultEdgeLabelFn=s.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[p]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function f(h,d){h[d]?h[d]++:h[d]=1}function i(h,d){--h[d]||delete h[d]}function a(h,d,x,w){var C=""+d,M=""+x;if(!h&&C>M){var k=C;C=M,M=k}return C+"\x01"+M+"\x01"+(s.isUndefined(w)?"\0":w)}function l(h,d,x,w){var C=""+d,M=""+x;if(!h&&C>M){var k=C;C=M,M=k}var I={v:C,w:M};return w&&(I.name=w),I}function t(h,d){return a(h,d.v,d.w,d.name)}c.prototype._nodeCount=0,c.prototype._edgeCount=0,c.prototype.isDirected=function(){return this._isDirected},c.prototype.isMultigraph=function(){return this._isMultigraph},c.prototype.isCompound=function(){return this._isCompound},c.prototype.setGraph=function(h){return this._label=h,this},c.prototype.graph=function(){return this._label},c.prototype.setDefaultNodeLabel=function(h){return s.isFunction(h)||(h=s.constant(h)),this._defaultNodeLabelFn=h,this},c.prototype.nodeCount=function(){return this._nodeCount},c.prototype.nodes=function(){return s.keys(this._nodes)},c.prototype.sources=function(){var h=this;return s.filter(this.nodes(),function(d){return s.isEmpty(h._in[d])})},c.prototype.sinks=function(){var h=this;return s.filter(this.nodes(),function(d){return s.isEmpty(h._out[d])})},c.prototype.setNodes=function(h,d){var x=arguments,w=this;return s.each(h,function(C){x.length>1?w.setNode(C,d):w.setNode(C)}),this},c.prototype.setNode=function(h,d){return s.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=d),this):(this._nodes[h]=arguments.length>1?d:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=p,this._children[h]={},this._children[p][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},c.prototype.node=function(h){return this._nodes[h]},c.prototype.hasNode=function(h){return s.has(this._nodes,h)},c.prototype.removeNode=function(h){var d=this;if(s.has(this._nodes,h)){var x=function(w){d.removeEdge(d._edgeObjs[w])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],s.each(this.children(h),function(w){d.setParent(w)}),delete this._children[h]),s.each(s.keys(this._in[h]),x),delete this._in[h],delete this._preds[h],s.each(s.keys(this._out[h]),x),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},c.prototype.setParent=function(h,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(s.isUndefined(d))d=p;else{for(var x=d+="";!s.isUndefined(x);x=this.parent(x))if(x===h)throw new Error("Setting "+d+" as parent of "+h+" would create a cycle");this.setNode(d)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=d,this._children[d][h]=!0,this},c.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},c.prototype.parent=function(h){if(this._isCompound){var d=this._parent[h];if(d!==p)return d}},c.prototype.children=function(h){if(s.isUndefined(h)&&(h=p),this._isCompound){var d=this._children[h];if(d)return s.keys(d)}else{if(h===p)return this.nodes();if(this.hasNode(h))return[]}},c.prototype.predecessors=function(h){var d=this._preds[h];if(d)return s.keys(d)},c.prototype.successors=function(h){var d=this._sucs[h];if(d)return s.keys(d)},c.prototype.neighbors=function(h){var d=this.predecessors(h);if(d)return s.union(d,this.successors(h))},c.prototype.isLeaf=function(h){return 0===(this.isDirected()?this.successors(h):this.neighbors(h)).length},c.prototype.filterNodes=function(h){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var x=this;s.each(this._nodes,function(M,k){h(k)&&d.setNode(k,M)}),s.each(this._edgeObjs,function(M){d.hasNode(M.v)&&d.hasNode(M.w)&&d.setEdge(M,x.edge(M))});var w={};function C(M){var k=x.parent(M);return void 0===k||d.hasNode(k)?(w[M]=k,k):k in w?w[k]:C(k)}return this._isCompound&&s.each(d.nodes(),function(M){d.setParent(M,C(M))}),d},c.prototype.setDefaultEdgeLabel=function(h){return s.isFunction(h)||(h=s.constant(h)),this._defaultEdgeLabelFn=h,this},c.prototype.edgeCount=function(){return this._edgeCount},c.prototype.edges=function(){return s.values(this._edgeObjs)},c.prototype.setPath=function(h,d){var x=this,w=arguments;return s.reduce(h,function(C,M){return w.length>1?x.setEdge(C,M,d):x.setEdge(C,M),M}),this},c.prototype.setEdge=function(){var h,d,x,w,C=!1,M=arguments[0];"object"==typeof M&&null!==M&&"v"in M?(h=M.v,d=M.w,x=M.name,2===arguments.length&&(w=arguments[1],C=!0)):(h=M,d=arguments[1],x=arguments[3],arguments.length>2&&(w=arguments[2],C=!0)),h=""+h,d=""+d,s.isUndefined(x)||(x=""+x);var k=a(this._isDirected,h,d,x);if(s.has(this._edgeLabels,k))return C&&(this._edgeLabels[k]=w),this;if(!s.isUndefined(x)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(d),this._edgeLabels[k]=C?w:this._defaultEdgeLabelFn(h,d,x);var I=l(this._isDirected,h,d,x);return h=I.v,d=I.w,Object.freeze(I),this._edgeObjs[k]=I,f(this._preds[d],h),f(this._sucs[h],d),this._in[d][k]=I,this._out[h][k]=I,this._edgeCount++,this},c.prototype.edge=function(h,d,x){var w=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,h,d,x);return this._edgeLabels[w]},c.prototype.hasEdge=function(h,d,x){var w=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,h,d,x);return s.has(this._edgeLabels,w)},c.prototype.removeEdge=function(h,d,x){var w=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,h,d,x),C=this._edgeObjs[w];return C&&(h=C.v,d=C.w,delete this._edgeLabels[w],delete this._edgeObjs[w],i(this._preds[d],h),i(this._sucs[h],d),delete this._in[d][w],delete this._out[h][w],this._edgeCount--),this},c.prototype.inEdges=function(h,d){var x=this._in[h];if(x){var w=s.values(x);return d?s.filter(w,function(C){return C.v===d}):w}},c.prototype.outEdges=function(h,d){var x=this._out[h];if(x){var w=s.values(x);return d?s.filter(w,function(C){return C.w===d}):w}},c.prototype.nodeEdges=function(h,d){var x=this.inEdges(h,d);if(x)return x.concat(this.outEdges(h,d))}},1838:(y,_,o)=>{y.exports={Graph:o(6568),version:o(5089)}},1088:(y,_,o)=>{var s=o(9138),m=o(6568);function g(i){return s.map(i.nodes(),function(a){var l=i.node(a),t=i.parent(a),h={v:a};return s.isUndefined(l)||(h.value=l),s.isUndefined(t)||(h.parent=t),h})}function c(i){return s.map(i.edges(),function(a){var l=i.edge(a),t={v:a.v,w:a.w};return s.isUndefined(a.name)||(t.name=a.name),s.isUndefined(l)||(t.value=l),t})}y.exports={write:function p(i){var a={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:g(i),edges:c(i)};return s.isUndefined(i.graph())||(a.value=s.clone(i.graph())),a},read:function f(i){var a=new m(i.options).setGraph(i.value);return s.each(i.nodes,function(l){a.setNode(l.v,l.value),l.parent&&a.setParent(l.v,l.parent)}),s.each(i.edges,function(l){a.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),a}}},9138:(y,_,o)=>{var s;try{s={clone:o(1094),constant:o(6684),each:o(5474),filter:o(5281),has:o(4842),isArray:o(1503),isEmpty:o(1973),isFunction:o(5946),isUndefined:o(4235),keys:o(118),map:o(9984),reduce:o(1337),size:o(5637),transform:o(9416),union:o(8921),values:o(377)}}catch{}s||(s=window._),y.exports=s},5089:y=>{y.exports="2.1.8"},7244:(y,_,o)=>{var p=o(3436)(o(2119),"DataView");y.exports=p},4994:(y,_,o)=>{var s=o(4312),m=o(6421),p=o(5764),g=o(8685),c=o(6676);function f(i){var a=-1,l=null==i?0:i.length;for(this.clear();++a<l;){var t=i[a];this.set(t[0],t[1])}}f.prototype.clear=s,f.prototype.delete=m,f.prototype.get=p,f.prototype.has=g,f.prototype.set=c,y.exports=f},9215:(y,_,o)=>{var s=o(1840),m=o(4378),p=o(4981),g=o(7343),c=o(8895);function f(i){var a=-1,l=null==i?0:i.length;for(this.clear();++a<l;){var t=i[a];this.set(t[0],t[1])}}f.prototype.clear=s,f.prototype.delete=m,f.prototype.get=p,f.prototype.has=g,f.prototype.set=c,y.exports=f},1501:(y,_,o)=>{var p=o(3436)(o(2119),"Map");y.exports=p},9850:(y,_,o)=>{var s=o(638),m=o(1184),p=o(866),g=o(3771),c=o(1772);function f(i){var a=-1,l=null==i?0:i.length;for(this.clear();++a<l;){var t=i[a];this.set(t[0],t[1])}}f.prototype.clear=s,f.prototype.delete=m,f.prototype.get=p,f.prototype.has=g,f.prototype.set=c,y.exports=f},4267:(y,_,o)=>{var p=o(3436)(o(2119),"Promise");y.exports=p},6323:(y,_,o)=>{var p=o(3436)(o(2119),"Set");y.exports=p},8849:(y,_,o)=>{var s=o(9850),m=o(4600),p=o(1387);function g(c){var f=-1,i=null==c?0:c.length;for(this.__data__=new s;++f<i;)this.add(c[f])}g.prototype.add=g.prototype.push=m,g.prototype.has=p,y.exports=g},2858:(y,_,o)=>{var s=o(9215),m=o(3720),p=o(4410),g=o(5576),c=o(2247),f=o(1585);function i(a){var l=this.__data__=new s(a);this.size=l.size}i.prototype.clear=m,i.prototype.delete=p,i.prototype.get=g,i.prototype.has=c,i.prototype.set=f,y.exports=i},443:(y,_,o)=>{var m=o(2119).Symbol;y.exports=m},3457:(y,_,o)=>{var m=o(2119).Uint8Array;y.exports=m},4243:(y,_,o)=>{var p=o(3436)(o(2119),"WeakMap");y.exports=p},6999:y=>{y.exports=function _(o,s,m){switch(m.length){case 0:return o.call(s);case 1:return o.call(s,m[0]);case 2:return o.call(s,m[0],m[1]);case 3:return o.call(s,m[0],m[1],m[2])}return o.apply(s,m)}},6837:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length;++m<p&&!1!==s(o[m],m,o););return o}},9779:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length,g=0,c=[];++m<p;){var f=o[m];s(f,m,o)&&(c[g++]=f)}return c}},1253:(y,_,o)=>{var s=o(4164);y.exports=function m(p,g){return!!(null==p?0:p.length)&&s(p,g,0)>-1}},177:y=>{y.exports=function _(o,s,m){for(var p=-1,g=null==o?0:o.length;++p<g;)if(m(s,o[p]))return!0;return!1}},2271:(y,_,o)=>{var s=o(5334),m=o(7151),p=o(1503),g=o(891),c=o(8442),f=o(8159),a=Object.prototype.hasOwnProperty;y.exports=function l(t,h){var d=p(t),x=!d&&m(t),w=!d&&!x&&g(t),C=!d&&!x&&!w&&f(t),M=d||x||w||C,k=M?s(t.length,String):[],I=k.length;for(var A in t)(h||a.call(t,A))&&(!M||!("length"==A||w&&("offset"==A||"parent"==A)||C&&("buffer"==A||"byteLength"==A||"byteOffset"==A)||c(A,I)))&&k.push(A);return k}},4633:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length,g=Array(p);++m<p;)g[m]=s(o[m],m,o);return g}},4883:y=>{y.exports=function _(o,s){for(var m=-1,p=s.length,g=o.length;++m<p;)o[g+m]=s[m];return o}},8745:y=>{y.exports=function _(o,s,m,p){var g=-1,c=null==o?0:o.length;for(p&&c&&(m=o[++g]);++g<c;)m=s(m,o[g],g,o);return m}},9503:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length;++m<p;)if(s(o[m],m,o))return!0;return!1}},5481:(y,_,o)=>{var m=o(1384)("length");y.exports=m},9276:(y,_,o)=>{var s=o(5683),m=o(217);y.exports=function p(g,c,f){(void 0!==f&&!m(g[c],f)||void 0===f&&!(c in g))&&s(g,c,f)}},9719:(y,_,o)=>{var s=o(5683),m=o(217),g=Object.prototype.hasOwnProperty;y.exports=function c(f,i,a){var l=f[i];(!g.call(f,i)||!m(l,a)||void 0===a&&!(i in f))&&s(f,i,a)}},3503:(y,_,o)=>{var s=o(217);y.exports=function m(p,g){for(var c=p.length;c--;)if(s(p[c][0],g))return c;return-1}},4121:(y,_,o)=>{var s=o(1989),m=o(118);y.exports=function p(g,c){return g&&s(c,m(c),g)}},9287:(y,_,o)=>{var s=o(1989),m=o(6555);y.exports=function p(g,c){return g&&s(c,m(c),g)}},5683:(y,_,o)=>{var s=o(6713);y.exports=function m(p,g,c){"__proto__"==g&&s?s(p,g,{configurable:!0,enumerable:!0,value:c,writable:!0}):p[g]=c}},4462:(y,_,o)=>{var s=o(2858),m=o(6837),p=o(9719),g=o(4121),c=o(9287),f=o(9292),i=o(9454),a=o(4444),l=o(9905),t=o(7597),h=o(6967),d=o(8794),x=o(6782),w=o(7878),C=o(4264),M=o(1503),k=o(891),I=o(3222),A=o(5940),P=o(799),H=o(118),V=o(6555),O="[object Arguments]",K="[object Function]",W="[object Object]",gt={};gt[O]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object DataView]"]=gt["[object Boolean]"]=gt["[object Date]"]=gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Map]"]=gt["[object Number]"]=gt[W]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object Symbol]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Error]"]=gt[K]=gt["[object WeakMap]"]=!1,y.exports=function Tt(wt,Wt,Ft,hn,le,Ut){var St,ne=1&Wt,Qt=2&Wt,Re=4&Wt;if(Ft&&(St=le?Ft(wt,hn,le,Ut):Ft(wt)),void 0!==St)return St;if(!A(wt))return wt;var be=M(wt);if(be){if(St=x(wt),!ne)return i(wt,St)}else{var zt=d(wt),Ve=zt==K||"[object GeneratorFunction]"==zt;if(k(wt))return f(wt,ne);if(zt==W||zt==O||Ve&&!le){if(St=Qt||Ve?{}:C(wt),!ne)return Qt?l(wt,c(St,wt)):a(wt,g(St,wt))}else{if(!gt[zt])return le?wt:{};St=w(wt,zt,ne)}}Ut||(Ut=new s);var ze=Ut.get(wt);if(ze)return ze;Ut.set(wt,St),P(wt)?wt.forEach(function(Ht){St.add(Tt(Ht,Wt,Ft,Ht,wt,Ut))}):I(wt)&&wt.forEach(function(Ht,Yt){St.set(Yt,Tt(Ht,Wt,Ft,Yt,wt,Ut))});var Ye=be?void 0:(Re?Qt?h:t:Qt?V:H)(wt);return m(Ye||wt,function(Ht,Yt){Ye&&(Ht=wt[Yt=Ht]),p(St,Yt,Tt(Ht,Wt,Ft,Yt,wt,Ut))}),St}},8858:(y,_,o)=>{var s=o(5940),m=Object.create,p=function(){function g(){}return function(c){if(!s(c))return{};if(m)return m(c);g.prototype=c;var f=new g;return g.prototype=void 0,f}}();y.exports=p},3132:(y,_,o)=>{var s=o(5184),p=o(6539)(s);y.exports=p},7308:(y,_,o)=>{var s=o(4129);y.exports=function m(p,g,c){for(var f=-1,i=p.length;++f<i;){var a=p[f],l=g(a);if(null!=l&&(void 0===t?l==l&&!s(l):c(l,t)))var t=l,h=a}return h}},3609:(y,_,o)=>{var s=o(3132);y.exports=function m(p,g){var c=[];return s(p,function(f,i,a){g(f,i,a)&&c.push(f)}),c}},5317:y=>{y.exports=function _(o,s,m,p){for(var g=o.length,c=m+(p?1:-1);p?c--:++c<g;)if(s(o[c],c,o))return c;return-1}},686:(y,_,o)=>{var s=o(4883),m=o(5039);y.exports=function p(g,c,f,i,a){var l=-1,t=g.length;for(f||(f=m),a||(a=[]);++l<t;){var h=g[l];c>0&&f(h)?c>1?p(h,c-1,f,i,a):s(a,h):i||(a[a.length]=h)}return a}},755:(y,_,o)=>{var m=o(456)();y.exports=m},5184:(y,_,o)=>{var s=o(755),m=o(118);y.exports=function p(g,c){return g&&s(g,c,m)}},5456:(y,_,o)=>{var s=o(6884),m=o(8533);y.exports=function p(g,c){for(var f=0,i=(c=s(c,g)).length;null!=g&&f<i;)g=g[m(c[f++])];return f&&f==i?g:void 0}},8247:(y,_,o)=>{var s=o(4883),m=o(1503);y.exports=function p(g,c,f){var i=c(g);return m(g)?i:s(i,f(g))}},3337:(y,_,o)=>{var s=o(443),m=o(1318),p=o(2902),f=s?s.toStringTag:void 0;y.exports=function i(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":f&&f in Object(a)?m(a):p(a)}},1100:y=>{y.exports=function _(o,s){return o>s}},4781:y=>{var o=Object.prototype.hasOwnProperty;y.exports=function s(m,p){return null!=m&&o.call(m,p)}},9989:y=>{y.exports=function _(o,s){return null!=o&&s in Object(o)}},4164:(y,_,o)=>{var s=o(5317),m=o(968),p=o(4977);y.exports=function g(c,f,i){return f==f?p(c,f,i):s(c,m,i)}},186:(y,_,o)=>{var s=o(3337),m=o(2671);y.exports=function g(c){return m(c)&&"[object Arguments]"==s(c)}},5740:(y,_,o)=>{var s=o(8325),m=o(2671);y.exports=function p(g,c,f,i,a){return g===c||(null==g||null==c||!m(g)&&!m(c)?g!=g&&c!=c:s(g,c,f,i,p,a))}},8325:(y,_,o)=>{var s=o(2858),m=o(3914),p=o(7058),g=o(2286),c=o(8794),f=o(1503),i=o(891),a=o(8159),t="[object Arguments]",h="[object Array]",d="[object Object]",w=Object.prototype.hasOwnProperty;y.exports=function C(M,k,I,A,P,H){var V=f(M),U=f(k),Y=V?h:c(M),N=U?h:c(k),O=(Y=Y==t?d:Y)==d,L=(N=N==t?d:N)==d,F=Y==N;if(F&&i(M)){if(!i(k))return!1;V=!0,O=!1}if(F&&!O)return H||(H=new s),V||a(M)?m(M,k,I,A,P,H):p(M,k,Y,I,A,P,H);if(!(1&I)){var G=O&&w.call(M,"__wrapped__"),z=L&&w.call(k,"__wrapped__");if(G||z){var K=G?M.value():M,B=z?k.value():k;return H||(H=new s),P(K,B,I,A,H)}}return!!F&&(H||(H=new s),g(M,k,I,A,P,H))}},7021:(y,_,o)=>{var s=o(8794),m=o(2671);y.exports=function g(c){return m(c)&&"[object Map]"==s(c)}},431:(y,_,o)=>{var s=o(2858),m=o(5740);y.exports=function c(f,i,a,l){var t=a.length,h=t,d=!l;if(null==f)return!h;for(f=Object(f);t--;){var x=a[t];if(d&&x[2]?x[1]!==f[x[0]]:!(x[0]in f))return!1}for(;++t<h;){var w=(x=a[t])[0],C=f[w],M=x[1];if(d&&x[2]){if(void 0===C&&!(w in f))return!1}else{var k=new s;if(l)var I=l(C,M,w,f,i,k);if(!(void 0===I?m(M,C,3,l,k):I))return!1}}return!0}},968:y=>{y.exports=function _(o){return o!=o}},7304:(y,_,o)=>{var s=o(5946),m=o(1943),p=o(5940),g=o(2827),f=/^\[object .+?Constructor\]$/,i=Function.prototype,a=Object.prototype,l=i.toString,t=a.hasOwnProperty,h=RegExp("^"+l.call(t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");y.exports=function d(x){return!(!p(x)||m(x))&&(s(x)?h:f).test(g(x))}},771:(y,_,o)=>{var s=o(8794),m=o(2671);y.exports=function g(c){return m(c)&&"[object Set]"==s(c)}},1083:(y,_,o)=>{var s=o(3337),m=o(6231),p=o(2671),F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1,y.exports=function G(z){return p(z)&&m(z.length)&&!!F[s(z)]}},6517:(y,_,o)=>{var s=o(8133),m=o(9458),p=o(2608),g=o(1503),c=o(7495);y.exports=function f(i){return"function"==typeof i?i:null==i?p:"object"==typeof i?g(i)?m(i[0],i[1]):s(i):c(i)}},1172:(y,_,o)=>{var s=o(5488),m=o(5491),g=Object.prototype.hasOwnProperty;y.exports=function c(f){if(!s(f))return m(f);var i=[];for(var a in Object(f))g.call(f,a)&&"constructor"!=a&&i.push(a);return i}},2809:(y,_,o)=>{var s=o(5940),m=o(5488),p=o(2158),c=Object.prototype.hasOwnProperty;y.exports=function f(i){if(!s(i))return p(i);var a=m(i),l=[];for(var t in i)"constructor"==t&&(a||!c.call(i,t))||l.push(t);return l}},9069:y=>{y.exports=function _(o,s){return o<s}},2046:(y,_,o)=>{var s=o(3132),m=o(6507);y.exports=function p(g,c){var f=-1,i=m(g)?Array(g.length):[];return s(g,function(a,l,t){i[++f]=c(a,l,t)}),i}},8133:(y,_,o)=>{var s=o(431),m=o(2379),p=o(642);y.exports=function g(c){var f=m(c);return 1==f.length&&f[0][2]?p(f[0][0],f[0][1]):function(i){return i===c||s(i,c,f)}}},9458:(y,_,o)=>{var s=o(5740),m=o(8817),p=o(8492),g=o(5352),c=o(2442),f=o(642),i=o(8533);y.exports=function t(h,d){return g(h)&&c(d)?f(i(h),d):function(x){var w=m(x,h);return void 0===w&&w===d?p(x,h):s(d,w,3)}}},3842:(y,_,o)=>{var s=o(2858),m=o(9276),p=o(755),g=o(3675),c=o(5940),f=o(6555),i=o(9351);y.exports=function a(l,t,h,d,x){l!==t&&p(t,function(w,C){if(x||(x=new s),c(w))g(l,t,C,h,a,d,x);else{var M=d?d(i(l,C),w,C+"",l,t,x):void 0;void 0===M&&(M=w),m(l,C,M)}},f)}},3675:(y,_,o)=>{var s=o(9276),m=o(9292),p=o(5208),g=o(9454),c=o(4264),f=o(7151),i=o(1503),a=o(1330),l=o(891),t=o(5946),h=o(5940),d=o(7614),x=o(8159),w=o(9351),C=o(8067);y.exports=function M(k,I,A,P,H,V,U){var Y=w(k,A),N=w(I,A),O=U.get(N);if(O)s(k,A,O);else{var L=V?V(Y,N,A+"",k,I,U):void 0,F=void 0===L;if(F){var G=i(N),z=!G&&l(N),K=!G&&!z&&x(N);L=N,G||z||K?i(Y)?L=Y:a(Y)?L=g(Y):z?(F=!1,L=m(N,!0)):K?(F=!1,L=p(N,!0)):L=[]:d(N)||f(N)?(L=Y,f(Y)?L=C(Y):(!h(Y)||t(Y))&&(L=c(N))):F=!1}F&&(U.set(N,L),H(L,N,P,V,U),U.delete(N)),s(k,A,L)}}},6119:(y,_,o)=>{var s=o(4633),m=o(5456),p=o(6517),g=o(2046),c=o(8750),f=o(5647),i=o(1215),a=o(2608),l=o(1503);y.exports=function t(h,d,x){d=d.length?s(d,function(M){return l(M)?function(k){return m(k,1===M.length?M[0]:M)}:M}):[a];var w=-1;d=s(d,f(p));var C=g(h,function(M,k,I){return{criteria:s(d,function(P){return P(M)}),index:++w,value:M}});return c(C,function(M,k){return i(M,k,x)})}},3021:(y,_,o)=>{var s=o(5495),m=o(8492);y.exports=function p(g,c){return s(g,c,function(f,i){return m(g,i)})}},5495:(y,_,o)=>{var s=o(5456),m=o(5963),p=o(6884);y.exports=function g(c,f,i){for(var a=-1,l=f.length,t={};++a<l;){var h=f[a],d=s(c,h);i(d,h)&&m(t,p(h,c),d)}return t}},1384:y=>{y.exports=function _(o){return function(s){return s?.[o]}}},9222:(y,_,o)=>{var s=o(5456);y.exports=function m(p){return function(g){return s(g,p)}}},6307:y=>{var _=Math.ceil,o=Math.max;y.exports=function s(m,p,g,c){for(var f=-1,i=o(_((p-m)/(g||1)),0),a=Array(i);i--;)a[c?i:++f]=m,m+=g;return a}},3570:y=>{y.exports=function _(o,s,m,p,g){return g(o,function(c,f,i){m=p?(p=!1,c):s(m,c,f,i)}),m}},6652:(y,_,o)=>{var s=o(2608),m=o(3983),p=o(2185);y.exports=function g(c,f){return p(m(c,f,s),c+"")}},5963:(y,_,o)=>{var s=o(9719),m=o(6884),p=o(8442),g=o(5940),c=o(8533);y.exports=function f(i,a,l,t){if(!g(i))return i;for(var h=-1,d=(a=m(a,i)).length,x=d-1,w=i;null!=w&&++h<d;){var C=c(a[h]),M=l;if("__proto__"===C||"constructor"===C||"prototype"===C)return i;if(h!=x){var k=w[C];void 0===(M=t?t(k,C,w):void 0)&&(M=g(k)?k:p(a[h+1])?[]:{})}s(w,C,M),w=w[C]}return i}},9510:(y,_,o)=>{var s=o(6684),m=o(6713),p=o(2608),g=m?function(c,f){return m(c,"toString",{configurable:!0,enumerable:!1,value:s(f),writable:!0})}:p;y.exports=g},8750:y=>{y.exports=function _(o,s){var m=o.length;for(o.sort(s);m--;)o[m]=o[m].value;return o}},5334:y=>{y.exports=function _(o,s){for(var m=-1,p=Array(o);++m<o;)p[m]=s(m);return p}},3935:(y,_,o)=>{var s=o(443),m=o(4633),p=o(1503),g=o(4129),f=s?s.prototype:void 0,i=f?f.toString:void 0;y.exports=function a(l){if("string"==typeof l)return l;if(p(l))return m(l,a)+"";if(g(l))return i?i.call(l):"";var t=l+"";return"0"==t&&1/l==-Infinity?"-0":t}},3348:(y,_,o)=>{var s=o(2760),m=/^\s+/;y.exports=function p(g){return g&&g.slice(0,s(g)+1).replace(m,"")}},5647:y=>{y.exports=function _(o){return function(s){return o(s)}}},707:(y,_,o)=>{var s=o(8849),m=o(1253),p=o(177),g=o(5972),c=o(4575),f=o(4174);y.exports=function a(l,t,h){var d=-1,x=m,w=l.length,C=!0,M=[],k=M;if(h)C=!1,x=p;else if(w>=200){var I=t?null:c(l);if(I)return f(I);C=!1,x=g,k=new s}else k=t?[]:M;t:for(;++d<w;){var A=l[d],P=t?t(A):A;if(A=h||0!==A?A:0,C&&P==P){for(var H=k.length;H--;)if(k[H]===P)continue t;t&&k.push(P),M.push(A)}else x(k,P,h)||(k!==M&&k.push(P),M.push(A))}return M}},9179:(y,_,o)=>{var s=o(4633);y.exports=function m(p,g){return s(g,function(c){return p[c]})}},8645:y=>{y.exports=function _(o,s,m){for(var p=-1,g=o.length,c=s.length,f={};++p<g;){var i=p<c?s[p]:void 0;m(f,o[p],i)}return f}},5972:y=>{y.exports=function _(o,s){return o.has(s)}},2132:(y,_,o)=>{var s=o(2608);y.exports=function m(p){return"function"==typeof p?p:s}},6884:(y,_,o)=>{var s=o(1503),m=o(5352),p=o(2855),g=o(3943);y.exports=function c(f,i){return s(f)?f:m(f,i)?[f]:p(g(f))}},3362:(y,_,o)=>{var s=o(3457);y.exports=function m(p){var g=new p.constructor(p.byteLength);return new s(g).set(new s(p)),g}},9292:(y,_,o)=>{y=o.nmd(y);var s=o(2119),m=_&&!_.nodeType&&_,p=m&&y&&!y.nodeType&&y,c=p&&p.exports===m?s.Buffer:void 0,f=c?c.allocUnsafe:void 0;y.exports=function i(a,l){if(l)return a.slice();var t=a.length,h=f?f(t):new a.constructor(t);return a.copy(h),h}},7e3:(y,_,o)=>{var s=o(3362);y.exports=function m(p,g){var c=g?s(p.buffer):p.buffer;return new p.constructor(c,p.byteOffset,p.byteLength)}},4098:y=>{var _=/\w*$/;y.exports=function o(s){var m=new s.constructor(s.source,_.exec(s));return m.lastIndex=s.lastIndex,m}},2533:(y,_,o)=>{var s=o(443),m=s?s.prototype:void 0,p=m?m.valueOf:void 0;y.exports=function g(c){return p?Object(p.call(c)):{}}},5208:(y,_,o)=>{var s=o(3362);y.exports=function m(p,g){var c=g?s(p.buffer):p.buffer;return new p.constructor(c,p.byteOffset,p.length)}},3443:(y,_,o)=>{var s=o(4129);y.exports=function m(p,g){if(p!==g){var c=void 0!==p,f=null===p,i=p==p,a=s(p),l=void 0!==g,t=null===g,h=g==g,d=s(g);if(!t&&!d&&!a&&p>g||a&&l&&h&&!t&&!d||f&&l&&h||!c&&h||!i)return 1;if(!f&&!a&&!d&&p<g||d&&c&&i&&!f&&!a||t&&c&&i||!l&&i||!h)return-1}return 0}},1215:(y,_,o)=>{var s=o(3443);y.exports=function m(p,g,c){for(var f=-1,i=p.criteria,a=g.criteria,l=i.length,t=c.length;++f<l;){var h=s(i[f],a[f]);if(h)return f>=t?h:h*("desc"==c[f]?-1:1)}return p.index-g.index}},9454:y=>{y.exports=function _(o,s){var m=-1,p=o.length;for(s||(s=Array(p));++m<p;)s[m]=o[m];return s}},1989:(y,_,o)=>{var s=o(9719),m=o(5683);y.exports=function p(g,c,f,i){var a=!f;f||(f={});for(var l=-1,t=c.length;++l<t;){var h=c[l],d=i?i(f[h],g[h],h,f,g):void 0;void 0===d&&(d=g[h]),a?m(f,h,d):s(f,h,d)}return f}},4444:(y,_,o)=>{var s=o(1989),m=o(9383);y.exports=function p(g,c){return s(g,m(g),c)}},9905:(y,_,o)=>{var s=o(1989),m=o(3051);y.exports=function p(g,c){return s(g,m(g),c)}},4610:(y,_,o)=>{var m=o(2119)["__core-js_shared__"];y.exports=m},4944:(y,_,o)=>{var s=o(6652),m=o(3342);y.exports=function p(g){return s(function(c,f){var i=-1,a=f.length,l=a>1?f[a-1]:void 0,t=a>2?f[2]:void 0;for(l=g.length>3&&"function"==typeof l?(a--,l):void 0,t&&m(f[0],f[1],t)&&(l=a<3?void 0:l,a=1),c=Object(c);++i<a;){var h=f[i];h&&g(c,h,i,l)}return c})}},6539:(y,_,o)=>{var s=o(6507);y.exports=function m(p,g){return function(c,f){if(null==c)return c;if(!s(c))return p(c,f);for(var i=c.length,a=g?i:-1,l=Object(c);(g?a--:++a<i)&&!1!==f(l[a],a,l););return c}}},456:y=>{y.exports=function _(o){return function(s,m,p){for(var g=-1,c=Object(s),f=p(s),i=f.length;i--;){var a=f[o?i:++g];if(!1===m(c[a],a,c))break}return s}}},4653:(y,_,o)=>{var s=o(6517),m=o(6507),p=o(118);y.exports=function g(c){return function(f,i,a){var l=Object(f);if(!m(f)){var t=s(i,3);f=p(f),i=function(d){return t(l[d],d,l)}}var h=c(f,i,a);return h>-1?l[t?f[h]:h]:void 0}}},7509:(y,_,o)=>{var s=o(6307),m=o(3342),p=o(2232);y.exports=function g(c){return function(f,i,a){return a&&"number"!=typeof a&&m(f,i,a)&&(i=a=void 0),f=p(f),void 0===i?(i=f,f=0):i=p(i),a=void 0===a?f<i?1:-1:p(a),s(f,i,a,c)}}},4575:(y,_,o)=>{var s=o(6323),m=o(2552),p=o(4174),c=s&&1/p(new s([,-0]))[1]==1/0?function(f){return new s(f)}:m;y.exports=c},6713:(y,_,o)=>{var s=o(3436),m=function(){try{var p=s(Object,"defineProperty");return p({},"",{}),p}catch{}}();y.exports=m},3914:(y,_,o)=>{var s=o(8849),m=o(9503),p=o(5972);y.exports=function f(i,a,l,t,h,d){var x=1&l,w=i.length,C=a.length;if(w!=C&&!(x&&C>w))return!1;var M=d.get(i),k=d.get(a);if(M&&k)return M==a&&k==i;var I=-1,A=!0,P=2&l?new s:void 0;for(d.set(i,a),d.set(a,i);++I<w;){var H=i[I],V=a[I];if(t)var U=x?t(V,H,I,a,i,d):t(H,V,I,i,a,d);if(void 0!==U){if(U)continue;A=!1;break}if(P){if(!m(a,function(Y,N){if(!p(P,N)&&(H===Y||h(H,Y,l,t,d)))return P.push(N)})){A=!1;break}}else if(H!==V&&!h(H,V,l,t,d)){A=!1;break}}return d.delete(i),d.delete(a),A}},7058:(y,_,o)=>{var s=o(443),m=o(3457),p=o(217),g=o(3914),c=o(3205),f=o(4174),P=s?s.prototype:void 0,H=P?P.valueOf:void 0;y.exports=function V(U,Y,N,O,L,F,G){switch(N){case"[object DataView]":if(U.byteLength!=Y.byteLength||U.byteOffset!=Y.byteOffset)return!1;U=U.buffer,Y=Y.buffer;case"[object ArrayBuffer]":return!(U.byteLength!=Y.byteLength||!F(new m(U),new m(Y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+U,+Y);case"[object Error]":return U.name==Y.name&&U.message==Y.message;case"[object RegExp]":case"[object String]":return U==Y+"";case"[object Map]":var z=c;case"[object Set]":var K=1&O;if(z||(z=f),U.size!=Y.size&&!K)return!1;var B=G.get(U);if(B)return B==Y;O|=2,G.set(U,Y);var Z=g(z(U),z(Y),O,L,F,G);return G.delete(U),Z;case"[object Symbol]":if(H)return H.call(U)==H.call(Y)}return!1}},2286:(y,_,o)=>{var s=o(7597),g=Object.prototype.hasOwnProperty;y.exports=function c(f,i,a,l,t,h){var d=1&a,x=s(f),w=x.length;if(w!=s(i).length&&!d)return!1;for(var k=w;k--;){var I=x[k];if(!(d?I in i:g.call(i,I)))return!1}var A=h.get(f),P=h.get(i);if(A&&P)return A==i&&P==f;var H=!0;h.set(f,i),h.set(i,f);for(var V=d;++k<w;){var U=f[I=x[k]],Y=i[I];if(l)var N=d?l(Y,U,I,i,f,h):l(U,Y,I,f,i,h);if(!(void 0===N?U===Y||t(U,Y,a,l,h):N)){H=!1;break}V||(V="constructor"==I)}if(H&&!V){var O=f.constructor,L=i.constructor;O!=L&&"constructor"in f&&"constructor"in i&&!("function"==typeof O&&O instanceof O&&"function"==typeof L&&L instanceof L)&&(H=!1)}return h.delete(f),h.delete(i),H}},3975:(y,_,o)=>{var s=o(2274),m=o(3983),p=o(2185);y.exports=function g(c){return p(m(c,void 0,s),c+"")}},9122:y=>{var _="object"==typeof global&&global&&global.Object===Object&&global;y.exports=_},7597:(y,_,o)=>{var s=o(8247),m=o(9383),p=o(118);y.exports=function g(c){return s(c,p,m)}},6967:(y,_,o)=>{var s=o(8247),m=o(3051),p=o(6555);y.exports=function g(c){return s(c,p,m)}},4537:(y,_,o)=>{var s=o(3819);y.exports=function m(p,g){var c=p.__data__;return s(g)?c["string"==typeof g?"string":"hash"]:c.map}},2379:(y,_,o)=>{var s=o(2442),m=o(118);y.exports=function p(g){for(var c=m(g),f=c.length;f--;){var i=c[f],a=g[i];c[f]=[i,a,s(a)]}return c}},3436:(y,_,o)=>{var s=o(7304),m=o(1990);y.exports=function p(g,c){var f=m(g,c);return s(f)?f:void 0}},9519:(y,_,o)=>{var m=o(9385)(Object.getPrototypeOf,Object);y.exports=m},1318:(y,_,o)=>{var s=o(443),m=Object.prototype,p=m.hasOwnProperty,g=m.toString,c=s?s.toStringTag:void 0;y.exports=function f(i){var a=p.call(i,c),l=i[c];try{i[c]=void 0;var t=!0}catch{}var h=g.call(i);return t&&(a?i[c]=l:delete i[c]),h}},9383:(y,_,o)=>{var s=o(9779),m=o(9975),g=Object.prototype.propertyIsEnumerable,c=Object.getOwnPropertySymbols,f=c?function(i){return null==i?[]:(i=Object(i),s(c(i),function(a){return g.call(i,a)}))}:m;y.exports=f},3051:(y,_,o)=>{var s=o(4883),m=o(9519),p=o(9383),g=o(9975),f=Object.getOwnPropertySymbols?function(i){for(var a=[];i;)s(a,p(i)),i=m(i);return a}:g;y.exports=f},8794:(y,_,o)=>{var s=o(7244),m=o(1501),p=o(4267),g=o(6323),c=o(4243),f=o(3337),i=o(2827),a="[object Map]",t="[object Promise]",h="[object Set]",d="[object WeakMap]",x="[object DataView]",w=i(s),C=i(m),M=i(p),k=i(g),I=i(c),A=f;(s&&A(new s(new ArrayBuffer(1)))!=x||m&&A(new m)!=a||p&&A(p.resolve())!=t||g&&A(new g)!=h||c&&A(new c)!=d)&&(A=function(P){var H=f(P),V="[object Object]"==H?P.constructor:void 0,U=V?i(V):"";if(U)switch(U){case w:return x;case C:return a;case M:return t;case k:return h;case I:return d}return H}),y.exports=A},1990:y=>{y.exports=function _(o,s){return o?.[s]}},7283:(y,_,o)=>{var s=o(6884),m=o(7151),p=o(1503),g=o(8442),c=o(6231),f=o(8533);y.exports=function i(a,l,t){for(var h=-1,d=(l=s(l,a)).length,x=!1;++h<d;){var w=f(l[h]);if(!(x=null!=a&&t(a,w)))break;a=a[w]}return x||++h!=d?x:!!(d=null==a?0:a.length)&&c(d)&&g(w,d)&&(p(a)||m(a))}},7609:y=>{var f=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");y.exports=function i(a){return f.test(a)}},4312:(y,_,o)=>{var s=o(862);y.exports=function m(){this.__data__=s?s(null):{},this.size=0}},6421:y=>{y.exports=function _(o){var s=this.has(o)&&delete this.__data__[o];return this.size-=s?1:0,s}},5764:(y,_,o)=>{var s=o(862),g=Object.prototype.hasOwnProperty;y.exports=function c(f){var i=this.__data__;if(s){var a=i[f];return"__lodash_hash_undefined__"===a?void 0:a}return g.call(i,f)?i[f]:void 0}},8685:(y,_,o)=>{var s=o(862),p=Object.prototype.hasOwnProperty;y.exports=function g(c){var f=this.__data__;return s?void 0!==f[c]:p.call(f,c)}},6676:(y,_,o)=>{var s=o(862);y.exports=function p(g,c){var f=this.__data__;return this.size+=this.has(g)?0:1,f[g]=s&&void 0===c?"__lodash_hash_undefined__":c,this}},6782:y=>{var o=Object.prototype.hasOwnProperty;y.exports=function s(m){var p=m.length,g=new m.constructor(p);return p&&"string"==typeof m[0]&&o.call(m,"index")&&(g.index=m.index,g.input=m.input),g}},7878:(y,_,o)=>{var s=o(3362),m=o(7e3),p=o(4098),g=o(2533),c=o(5208);y.exports=function N(O,L,F){var G=O.constructor;switch(L){case"[object ArrayBuffer]":return s(O);case"[object Boolean]":case"[object Date]":return new G(+O);case"[object DataView]":return m(O,F);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(O,F);case"[object Map]":case"[object Set]":return new G;case"[object Number]":case"[object String]":return new G(O);case"[object RegExp]":return p(O);case"[object Symbol]":return g(O)}}},4264:(y,_,o)=>{var s=o(8858),m=o(9519),p=o(5488);y.exports=function g(c){return"function"!=typeof c.constructor||p(c)?{}:s(m(c))}},5039:(y,_,o)=>{var s=o(443),m=o(7151),p=o(1503),g=s?s.isConcatSpreadable:void 0;y.exports=function c(f){return p(f)||m(f)||!!(g&&f&&f[g])}},8442:y=>{var o=/^(?:0|[1-9]\d*)$/;y.exports=function s(m,p){var g=typeof m;return!!(p=p??9007199254740991)&&("number"==g||"symbol"!=g&&o.test(m))&&m>-1&&m%1==0&&m<p}},3342:(y,_,o)=>{var s=o(217),m=o(6507),p=o(8442),g=o(5940);y.exports=function c(f,i,a){if(!g(a))return!1;var l=typeof i;return!!("number"==l?m(a)&&p(i,a.length):"string"==l&&i in a)&&s(a[i],f)}},5352:(y,_,o)=>{var s=o(1503),m=o(4129),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;y.exports=function c(f,i){if(s(f))return!1;var a=typeof f;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=f&&!m(f))||(g.test(f)||!p.test(f)||null!=i&&f in Object(i))}},3819:y=>{y.exports=function _(o){var s=typeof o;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==o:null===o}},1943:(y,_,o)=>{var g,s=o(4610),m=(g=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";y.exports=function p(g){return!!m&&m in g}},5488:y=>{var _=Object.prototype;y.exports=function o(s){var m=s&&s.constructor;return s===("function"==typeof m&&m.prototype||_)}},2442:(y,_,o)=>{var s=o(5940);y.exports=function m(p){return p==p&&!s(p)}},1840:y=>{y.exports=function _(){this.__data__=[],this.size=0}},4378:(y,_,o)=>{var s=o(3503),p=Array.prototype.splice;y.exports=function g(c){var f=this.__data__,i=s(f,c);return!(i<0)&&(i==f.length-1?f.pop():p.call(f,i,1),--this.size,!0)}},4981:(y,_,o)=>{var s=o(3503);y.exports=function m(p){var g=this.__data__,c=s(g,p);return c<0?void 0:g[c][1]}},7343:(y,_,o)=>{var s=o(3503);y.exports=function m(p){return s(this.__data__,p)>-1}},8895:(y,_,o)=>{var s=o(3503);y.exports=function m(p,g){var c=this.__data__,f=s(c,p);return f<0?(++this.size,c.push([p,g])):c[f][1]=g,this}},638:(y,_,o)=>{var s=o(4994),m=o(9215),p=o(1501);y.exports=function g(){this.size=0,this.__data__={hash:new s,map:new(p||m),string:new s}}},1184:(y,_,o)=>{var s=o(4537);y.exports=function m(p){var g=s(this,p).delete(p);return this.size-=g?1:0,g}},866:(y,_,o)=>{var s=o(4537);y.exports=function m(p){return s(this,p).get(p)}},3771:(y,_,o)=>{var s=o(4537);y.exports=function m(p){return s(this,p).has(p)}},1772:(y,_,o)=>{var s=o(4537);y.exports=function m(p,g){var c=s(this,p),f=c.size;return c.set(p,g),this.size+=c.size==f?0:1,this}},3205:y=>{y.exports=function _(o){var s=-1,m=Array(o.size);return o.forEach(function(p,g){m[++s]=[g,p]}),m}},642:y=>{y.exports=function _(o,s){return function(m){return null!=m&&(m[o]===s&&(void 0!==s||o in Object(m)))}}},719:(y,_,o)=>{var s=o(535);y.exports=function p(g){var c=s(g,function(i){return 500===f.size&&f.clear(),i}),f=c.cache;return c}},862:(y,_,o)=>{var m=o(3436)(Object,"create");y.exports=m},5491:(y,_,o)=>{var m=o(9385)(Object.keys,Object);y.exports=m},2158:y=>{y.exports=function _(o){var s=[];if(null!=o)for(var m in Object(o))s.push(m);return s}},3597:(y,_,o)=>{y=o.nmd(y);var s=o(9122),m=_&&!_.nodeType&&_,p=m&&y&&!y.nodeType&&y,c=p&&p.exports===m&&s.process,f=function(){try{return p&&p.require&&p.require("util").types||c&&c.binding&&c.binding("util")}catch{}}();y.exports=f},2902:y=>{var o=Object.prototype.toString;y.exports=function s(m){return o.call(m)}},9385:y=>{y.exports=function _(o,s){return function(m){return o(s(m))}}},3983:(y,_,o)=>{var s=o(6999),m=Math.max;y.exports=function p(g,c,f){return c=m(void 0===c?g.length-1:c,0),function(){for(var i=arguments,a=-1,l=m(i.length-c,0),t=Array(l);++a<l;)t[a]=i[c+a];a=-1;for(var h=Array(c+1);++a<c;)h[a]=i[a];return h[c]=f(t),s(g,this,h)}}},2119:(y,_,o)=>{var s=o(9122),m="object"==typeof self&&self&&self.Object===Object&&self,p=s||m||Function("return this")();y.exports=p},9351:y=>{y.exports=function _(o,s){if(("constructor"!==s||"function"!=typeof o[s])&&"__proto__"!=s)return o[s]}},4600:y=>{y.exports=function o(s){return this.__data__.set(s,"__lodash_hash_undefined__"),this}},1387:y=>{y.exports=function _(o){return this.__data__.has(o)}},4174:y=>{y.exports=function _(o){var s=-1,m=Array(o.size);return o.forEach(function(p){m[++s]=p}),m}},2185:(y,_,o)=>{var s=o(9510),p=o(29)(s);y.exports=p},29:y=>{var s=Date.now;y.exports=function m(p){var g=0,c=0;return function(){var f=s(),i=16-(f-c);if(c=f,i>0){if(++g>=800)return arguments[0]}else g=0;return p.apply(void 0,arguments)}}},3720:(y,_,o)=>{var s=o(9215);y.exports=function m(){this.__data__=new s,this.size=0}},4410:y=>{y.exports=function _(o){var s=this.__data__,m=s.delete(o);return this.size=s.size,m}},5576:y=>{y.exports=function _(o){return this.__data__.get(o)}},2247:y=>{y.exports=function _(o){return this.__data__.has(o)}},1585:(y,_,o)=>{var s=o(9215),m=o(1501),p=o(9850);y.exports=function c(f,i){var a=this.__data__;if(a instanceof s){var l=a.__data__;if(!m||l.length<199)return l.push([f,i]),this.size=++a.size,this;a=this.__data__=new p(l)}return a.set(f,i),this.size=a.size,this}},4977:y=>{y.exports=function _(o,s,m){for(var p=m-1,g=o.length;++p<g;)if(o[p]===s)return p;return-1}},2315:(y,_,o)=>{var s=o(5481),m=o(7609),p=o(1149);y.exports=function g(c){return m(c)?p(c):s(c)}},2855:(y,_,o)=>{var s=o(719),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=s(function(c){var f=[];return 46===c.charCodeAt(0)&&f.push(""),c.replace(m,function(i,a,l,t){f.push(l?t.replace(p,"$1"):a||i)}),f});y.exports=g},8533:(y,_,o)=>{var s=o(4129);y.exports=function p(g){if("string"==typeof g||s(g))return g;var c=g+"";return"0"==c&&1/g==-Infinity?"-0":c}},2827:y=>{var o=Function.prototype.toString;y.exports=function s(m){if(null!=m){try{return o.call(m)}catch{}try{return m+""}catch{}}return""}},2760:y=>{var _=/\s/;y.exports=function o(s){for(var m=s.length;m--&&_.test(s.charAt(m)););return m}},1149:y=>{var _="\\ud800-\\udfff",c="["+_+"]",f="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",l="[^"+_+"]",t="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",x="(?:"+f+"|"+i+")"+"?",w="[\\ufe0e\\ufe0f]?",M=w+x+("(?:\\u200d(?:"+[l,t,h].join("|")+")"+w+x+")*"),k="(?:"+[l+f+"?",f,t,h,c].join("|")+")",I=RegExp(i+"(?="+i+")|"+k+M,"g");y.exports=function A(P){for(var H=I.lastIndex=0;I.test(P);)++H;return H}},1094:(y,_,o)=>{var s=o(4462);y.exports=function p(g){return s(g,4)}},733:(y,_,o)=>{var s=o(4462);y.exports=function g(c){return s(c,5)}},6684:y=>{y.exports=function _(o){return function(){return o}}},8800:(y,_,o)=>{var s=o(6652),m=o(217),p=o(3342),g=o(6555),c=Object.prototype,f=c.hasOwnProperty,i=s(function(a,l){a=Object(a);var t=-1,h=l.length,d=h>2?l[2]:void 0;for(d&&p(l[0],l[1],d)&&(h=1);++t<h;)for(var x=l[t],w=g(x),C=-1,M=w.length;++C<M;){var k=w[C],I=a[k];(void 0===I||m(I,c[k])&&!f.call(a,k))&&(a[k]=x[k])}return a});y.exports=i},5474:(y,_,o)=>{y.exports=o(9851)},217:y=>{y.exports=function _(o,s){return o===s||o!=o&&s!=s}},5281:(y,_,o)=>{var s=o(9779),m=o(3609),p=o(6517),g=o(1503);y.exports=function c(f,i){return(g(f)?s:m)(f,p(i,3))}},2516:(y,_,o)=>{var p=o(4653)(o(6397));y.exports=p},6397:(y,_,o)=>{var s=o(5317),m=o(6517),p=o(4401),g=Math.max;y.exports=function c(f,i,a){var l=null==f?0:f.length;if(!l)return-1;var t=null==a?0:p(a);return t<0&&(t=g(l+t,0)),s(f,m(i,3),t)}},2274:(y,_,o)=>{var s=o(686);y.exports=function m(p){return(null==p?0:p.length)?s(p,1):[]}},9851:(y,_,o)=>{var s=o(6837),m=o(3132),p=o(2132),g=o(1503);y.exports=function c(f,i){return(g(f)?s:m)(f,p(i))}},1176:(y,_,o)=>{var s=o(755),m=o(2132),p=o(6555);y.exports=function g(c,f){return null==c?c:s(c,m(f),p)}},8817:(y,_,o)=>{var s=o(5456);y.exports=function m(p,g,c){var f=null==p?void 0:s(p,g);return void 0===f?c:f}},4842:(y,_,o)=>{var s=o(4781),m=o(7283);y.exports=function p(g,c){return null!=g&&m(g,c,s)}},8492:(y,_,o)=>{var s=o(9989),m=o(7283);y.exports=function p(g,c){return null!=g&&m(g,c,s)}},2608:y=>{y.exports=function _(o){return o}},7151:(y,_,o)=>{var s=o(186),m=o(2671),p=Object.prototype,g=p.hasOwnProperty,c=p.propertyIsEnumerable,f=s(function(){return arguments}())?s:function(i){return m(i)&&g.call(i,"callee")&&!c.call(i,"callee")};y.exports=f},1503:y=>{var _=Array.isArray;y.exports=_},6507:(y,_,o)=>{var s=o(5946),m=o(6231);y.exports=function p(g){return null!=g&&m(g.length)&&!s(g)}},1330:(y,_,o)=>{var s=o(6507),m=o(2671);y.exports=function p(g){return m(g)&&s(g)}},891:(y,_,o)=>{y=o.nmd(y);var s=o(2119),m=o(3580),p=_&&!_.nodeType&&_,g=p&&y&&!y.nodeType&&y,f=g&&g.exports===p?s.Buffer:void 0,a=(f?f.isBuffer:void 0)||m;y.exports=a},1973:(y,_,o)=>{var s=o(1172),m=o(8794),p=o(7151),g=o(1503),c=o(6507),f=o(891),i=o(5488),a=o(8159),d=Object.prototype.hasOwnProperty;y.exports=function x(w){if(null==w)return!0;if(c(w)&&(g(w)||"string"==typeof w||"function"==typeof w.splice||f(w)||a(w)||p(w)))return!w.length;var C=m(w);if("[object Map]"==C||"[object Set]"==C)return!w.size;if(i(w))return!s(w).length;for(var M in w)if(d.call(w,M))return!1;return!0}},5946:(y,_,o)=>{var s=o(3337),m=o(5940);y.exports=function i(a){if(!m(a))return!1;var l=s(a);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}},6231:y=>{y.exports=function o(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991}},3222:(y,_,o)=>{var s=o(7021),m=o(5647),p=o(3597),g=p&&p.isMap,c=g?m(g):s;y.exports=c},5940:y=>{y.exports=function _(o){var s=typeof o;return null!=o&&("object"==s||"function"==s)}},2671:y=>{y.exports=function _(o){return null!=o&&"object"==typeof o}},7614:(y,_,o)=>{var s=o(3337),m=o(9519),p=o(2671),c=Function.prototype,f=Object.prototype,i=c.toString,a=f.hasOwnProperty,l=i.call(Object);y.exports=function t(h){if(!p(h)||"[object Object]"!=s(h))return!1;var d=m(h);if(null===d)return!0;var x=a.call(d,"constructor")&&d.constructor;return"function"==typeof x&&x instanceof x&&i.call(x)==l}},799:(y,_,o)=>{var s=o(771),m=o(5647),p=o(3597),g=p&&p.isSet,c=g?m(g):s;y.exports=c},248:(y,_,o)=>{var s=o(3337),m=o(1503),p=o(2671);y.exports=function c(f){return"string"==typeof f||!m(f)&&p(f)&&"[object String]"==s(f)}},4129:(y,_,o)=>{var s=o(3337),m=o(2671);y.exports=function g(c){return"symbol"==typeof c||m(c)&&"[object Symbol]"==s(c)}},8159:(y,_,o)=>{var s=o(1083),m=o(5647),p=o(3597),g=p&&p.isTypedArray,c=g?m(g):s;y.exports=c},4235:y=>{y.exports=function _(o){return void 0===o}},118:(y,_,o)=>{var s=o(2271),m=o(1172),p=o(6507);y.exports=function g(c){return p(c)?s(c):m(c)}},6555:(y,_,o)=>{var s=o(2271),m=o(2809),p=o(6507);y.exports=function g(c){return p(c)?s(c,!0):m(c)}},5809:y=>{y.exports=function _(o){var s=null==o?0:o.length;return s?o[s-1]:void 0}},9984:(y,_,o)=>{var s=o(4633),m=o(6517),p=o(2046),g=o(1503);y.exports=function c(f,i){return(g(f)?s:p)(f,m(i,3))}},203:(y,_,o)=>{var s=o(5683),m=o(5184),p=o(6517);y.exports=function g(c,f){var i={};return f=p(f,3),m(c,function(a,l,t){s(i,l,f(a,l,t))}),i}},8176:(y,_,o)=>{var s=o(7308),m=o(1100),p=o(2608);y.exports=function g(c){return c&&c.length?s(c,p,m):void 0}},535:(y,_,o)=>{var s=o(9850);function p(g,c){if("function"!=typeof g||null!=c&&"function"!=typeof c)throw new TypeError("Expected a function");var f=function(){var i=arguments,a=c?c.apply(this,i):i[0],l=f.cache;if(l.has(a))return l.get(a);var t=g.apply(this,i);return f.cache=l.set(a,t)||l,t};return f.cache=new(p.Cache||s),f}p.Cache=s,y.exports=p},567:(y,_,o)=>{var s=o(3842),p=o(4944)(function(g,c,f){s(g,c,f)});y.exports=p},9439:(y,_,o)=>{var s=o(7308),m=o(9069),p=o(2608);y.exports=function g(c){return c&&c.length?s(c,p,m):void 0}},9525:(y,_,o)=>{var s=o(7308),m=o(6517),p=o(9069);y.exports=function g(c,f){return c&&c.length?s(c,m(f,2),p):void 0}},2552:y=>{y.exports=function _(){}},1710:(y,_,o)=>{var s=o(2119);y.exports=function(){return s.Date.now()}},6372:(y,_,o)=>{var s=o(3021),p=o(3975)(function(g,c){return null==g?{}:s(g,c)});y.exports=p},7495:(y,_,o)=>{var s=o(1384),m=o(9222),p=o(5352),g=o(8533);y.exports=function c(f){return p(f)?s(g(f)):m(f)}},361:(y,_,o)=>{var m=o(7509)();y.exports=m},1337:(y,_,o)=>{var s=o(8745),m=o(3132),p=o(6517),g=o(3570),c=o(1503);y.exports=function f(i,a,l){var t=c(i)?s:g,h=arguments.length<3;return t(i,p(a,4),l,h,m)}},5637:(y,_,o)=>{var s=o(1172),m=o(8794),p=o(6507),g=o(248),c=o(2315);y.exports=function a(l){if(null==l)return 0;if(p(l))return g(l)?c(l):l.length;var t=m(l);return"[object Map]"==t||"[object Set]"==t?l.size:s(l).length}},2906:(y,_,o)=>{var s=o(686),m=o(6119),p=o(6652),g=o(3342),c=p(function(f,i){if(null==f)return[];var a=i.length;return a>1&&g(f,i[0],i[1])?i=[]:a>2&&g(i[0],i[1],i[2])&&(i=[i[0]]),m(f,s(i,1),[])});y.exports=c},9975:y=>{y.exports=function _(){return[]}},3580:y=>{y.exports=function _(){return!1}},2232:(y,_,o)=>{var s=o(1467),m=1/0;y.exports=function g(c){return c?(c=s(c))===m||c===-m?17976931348623157e292*(c<0?-1:1):c==c?c:0:0===c?c:0}},4401:(y,_,o)=>{var s=o(2232);y.exports=function m(p){var g=s(p),c=g%1;return g==g?c?g-c:g:0}},1467:(y,_,o)=>{var s=o(3348),m=o(5940),p=o(4129),c=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt;y.exports=function l(t){if("number"==typeof t)return t;if(p(t))return NaN;if(m(t)){var h="function"==typeof t.valueOf?t.valueOf():t;t=m(h)?h+"":h}if("string"!=typeof t)return 0===t?t:+t;t=s(t);var d=f.test(t);return d||i.test(t)?a(t.slice(2),d?2:8):c.test(t)?NaN:+t}},8067:(y,_,o)=>{var s=o(1989),m=o(6555);y.exports=function p(g){return s(g,m(g))}},3943:(y,_,o)=>{var s=o(3935);y.exports=function m(p){return null==p?"":s(p)}},9416:(y,_,o)=>{var s=o(6837),m=o(8858),p=o(5184),g=o(6517),c=o(9519),f=o(1503),i=o(891),a=o(5946),l=o(5940),t=o(8159);y.exports=function h(d,x,w){var C=f(d),M=C||i(d)||t(d);if(x=g(x,4),null==w){var k=d&&d.constructor;w=M?C?new k:[]:l(d)&&a(k)?m(c(d)):{}}return(M?s:p)(d,function(I,A,P){return x(w,I,A,P)}),w}},8921:(y,_,o)=>{var s=o(686),m=o(6652),p=o(707),g=o(1330),c=m(function(f){return p(s(f,1,g,!0))});y.exports=c},1541:(y,_,o)=>{var s=o(3943),m=0;y.exports=function p(g){var c=++m;return s(g)+c}},377:(y,_,o)=>{var s=o(9179),m=o(118);y.exports=function p(g){return null==g?[]:s(g,m(g))}},1617:(y,_,o)=>{var s=o(9719),m=o(8645);y.exports=function p(g,c){return m(g||[],c||[],s)}},7824:(y,_,o)=>{"use strict";function s(m){for(var p in m)_.hasOwnProperty(p)||(_[p]=m[p])}Object.defineProperty(_,"__esModule",{value:!0}),s(o(5085)),s(o(6243)),s(o(1786)),s(o(225)),s(o(6767)),s(o(345)),s(o(5675)),s(o(6461)),s(o(8802)),s(o(3900)),s(o(8866)),s(o(4655)),s(o(4068)),s(o(3858)),s(o(8237)),s(o(3292))},5085:function(y,_,o){"use strict";var c,s=this&&this.__extends||(c=function(f,i){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(f,i)},function(f,i){function a(){this.constructor=f}c(f,i),f.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(5675),p=function(c){function f(i){var a=c.call(this)||this,t=i;return t.trigger&&(a.trigger=t.trigger),t.kick&&(a.kick=t.kick),t.drag&&(a.drag=t.drag),t.on&&(a.on=t.on),a.dragstart=a.dragStart=m.Layout.dragStart,a.dragend=a.dragEnd=m.Layout.dragEnd,a}return s(f,c),f.prototype.trigger=function(i){},f.prototype.kick=function(){},f.prototype.drag=function(){},f.prototype.on=function(i,a){return this},f}(m.Layout);_.LayoutAdaptor=p,_.adaptor=function g(c){return new p(c)}},3292:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(5675),m=o(6767);_.gridify=function p(f,i,a,l){return f.cola.start(0,0,0,10,!1),function g(f,i,a,l){f.forEach(function(h){h.routerNode={name:h.name,bounds:h.bounds.inflate(-a)}}),i.forEach(function(h){h.routerNode={bounds:h.bounds.inflate(-l),children:(typeof h.groups<"u"?h.groups.map(function(d){return f.length+d.id}):[]).concat(typeof h.leaves<"u"?h.leaves.map(function(d){return d.index}):[])}});var t=f.concat(i).map(function(h,d){return h.routerNode.id=d,h.routerNode});return new m.GridRouter(t,{getChildren:function(h){return h.children},getBounds:function(h){return h.bounds}},a-l)}(f.cola.nodes(),f.cola.groups(),a,l).routeEdges(f.powerGraph.powerEdges,i,function(h){return h.source.routerNode.id},function(h){return h.target.routerNode.id})},_.powerGraphGridLayout=function c(f,i,a){var l;f.nodes.forEach(function(x,w){return x.index=w}),(new s.Layout).avoidOverlaps(!1).nodes(f.nodes).links(f.links).powerGraphGroups(function(x){(l=x).groups.forEach(function(w){return w.padding=a})});var t=f.nodes.length,h=[],d=f.nodes.slice(0);return d.forEach(function(x,w){return x.index=w}),l.groups.forEach(function(x){var w=x.index=x.id+t;d.push(x),typeof x.leaves<"u"&&x.leaves.forEach(function(C){return h.push({source:w,target:C.index})}),typeof x.groups<"u"&&x.groups.forEach(function(C){return h.push({source:w,target:C.id+t})})}),l.powerEdges.forEach(function(x){h.push({source:x.source.index,target:x.target.index})}),(new s.Layout).size(i).nodes(d).links(h).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new s.Layout).convergenceThreshold(.001).size(i).avoidOverlaps(!0).nodes(f.nodes).links(f.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(x){(l=x).groups.forEach(function(w){w.padding=a})}).start(50,0,100,0,!1),powerGraph:l}}},6243:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(9346),m=o(2487);_.d3adaptor=function p(c){return!c||function g(c){var f=/^3\./;return c.version&&null!==c.version.match(f)}(c)?new s.D3StyleLayoutAdaptor:new m.D3StyleLayoutAdaptor(c)}},9346:function(y,_,o){"use strict";var c,s=this&&this.__extends||(c=function(f,i){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(f,i)},function(f,i){function a(){this.constructor=f}c(f,i),f.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(5675),p=function(c){function f(){var i=c.call(this)||this;i.event=d3.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=i;return i.drag=function(){if(!t)var t=d3.behavior.drag().origin(m.Layout.dragOrigin).on("dragstart.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(h){m.Layout.drag(h,d3.event),a.resume()}).on("dragend.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},i}return s(f,c),f.prototype.trigger=function(i){var a={type:m.EventType[i.type],alpha:i.alpha,stress:i.stress};this.event[a.type](a)},f.prototype.kick=function(){var i=this;d3.timer(function(){return c.prototype.tick.call(i)})},f.prototype.on=function(i,a){return"string"==typeof i?this.event.on(i,a):this.event.on(m.EventType[i],a),this},f}(m.Layout);_.D3StyleLayoutAdaptor=p,_.d3adaptor=function g(){return new p}},2487:function(y,_,o){"use strict";var g,s=this&&this.__extends||(g=function(c,f){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l])})(c,f)},function(c,f){function i(){this.constructor=c}g(c,f),c.prototype=null===f?Object.create(f):(i.prototype=f.prototype,new i)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(5675),p=function(g){function c(f){var i=g.call(this)||this;i.d3Context=f,i.event=f.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=i;return i.drag=function(){if(!t)var t=f.drag().subject(m.Layout.dragOrigin).on("start.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(h){m.Layout.drag(h,f.event),a.resume()}).on("end.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},i}return s(c,g),c.prototype.trigger=function(f){var i={type:m.EventType[f.type],alpha:f.alpha,stress:f.stress};this.event.call(i.type,i)},c.prototype.kick=function(){var f=this,i=this.d3Context.timer(function(){return g.prototype.tick.call(f)&&i.stop()})},c.prototype.on=function(f,i){return"string"==typeof f?this.event.on(f,i):this.event.on(m.EventType[f],i),this},c}(m.Layout);_.D3StyleLayoutAdaptor=p},1786:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function(){function p(){this.locks={}}return p.prototype.add=function(g,c){this.locks[g]=c},p.prototype.clear=function(){this.locks={}},p.prototype.isEmpty=function(){for(var g in this.locks)return!1;return!0},p.prototype.apply=function(g){for(var c in this.locks)g(Number(c),this.locks[c])},p}();_.Locks=o;var s=function(){function p(g,c,f){void 0===f&&(f=null),this.D=c,this.G=f,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new m,this.project=null,this.x=g,this.k=g.length;var i=this.n=g[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new o,this.minD=Number.MAX_VALUE;for(var l,a=i;a--;)for(l=i;--l>a;){var t=c[a][l];t>0&&t<this.minD&&(this.minD=t)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(i),this.H[a]=new Array(i),l=i;l--;)this.H[a][l]=new Array(i);this.Hd[a]=new Array(i),this.a[a]=new Array(i),this.b[a]=new Array(i),this.c[a]=new Array(i),this.d[a]=new Array(i),this.e[a]=new Array(i),this.ia[a]=new Array(i),this.ib[a]=new Array(i),this.xtmp[a]=new Array(i)}}return p.createSquareMatrix=function(g,c){for(var f=new Array(g),i=0;i<g;++i){f[i]=new Array(g);for(var a=0;a<g;++a)f[i][a]=c(i,a)}return f},p.prototype.offsetDir=function(){for(var g=this,c=new Array(this.k),f=0,i=0;i<this.k;++i){var a=c[i]=this.random.getNextBetween(.01,1)-.5;f+=a*a}return f=Math.sqrt(f),c.map(function(l){return l*(g.minD/f)})},p.prototype.computeDerivatives=function(g){var c=this,f=this.n;if(!(f<1)){for(var i,a=new Array(this.k),l=new Array(this.k),t=new Array(this.k),h=0,d=0;d<f;++d){for(i=0;i<this.k;++i)t[i]=this.g[i][d]=0;for(var x=0;x<f;++x)if(d!==x){for(var w=f;w--;){var C=0;for(i=0;i<this.k;++i){var M=a[i]=g[i][d]-g[i][x];C+=l[i]=M*M}if(C>1e-9)break;var k=this.offsetDir();for(i=0;i<this.k;++i)g[i][x]+=k[i]}var I=Math.sqrt(C),A=this.D[d][x],P=null!=this.G?this.G[d][x]:1;if(P>1&&I>A||!isFinite(A)){for(i=0;i<this.k;++i)this.H[i][d][x]=0;continue}P>1&&(P=1);var H=A*A,V=2*P*(I-A)/(H*I),U=I*I*I,Y=2*-P/(H*U);for(isFinite(V)||console.log(V),i=0;i<this.k;++i)this.g[i][d]+=a[i]*V,t[i]-=this.H[i][d][x]=Y*(U+A*(l[i]-C)+I*C)}for(i=0;i<this.k;++i)h=Math.max(h,this.H[i][d][d]=t[i])}var N=this.snapGridSize/2,O=this.snapGridSize,F=this.snapStrength/(N*N),G=this.numGridSnapNodes;for(d=0;d<G;++d)for(i=0;i<this.k;++i){var z=this.x[i][d],K=z/O,B=K%1,Z=K-B;-N<(M=Math.abs(B)<=.5?z-Z*O:z>0?z-(Z+1)*O:z-(Z-1)*O)&&M<=N&&(this.scaleSnapByMaxH?(this.g[i][d]+=h*F*M,this.H[i][d][d]+=h*F):(this.g[i][d]+=F*M,this.H[i][d][d]+=F))}this.locks.isEmpty()||this.locks.apply(function(W,it){for(i=0;i<c.k;++i)c.H[i][W][W]+=h,c.g[i][W]-=h*(it[i]-g[i][W])})}},p.dotProd=function(g,c){for(var f=0,i=g.length;i--;)f+=g[i]*c[i];return f},p.rightMultiply=function(g,c,f){for(var i=g.length;i--;)f[i]=p.dotProd(g[i],c)},p.prototype.computeStepSize=function(g){for(var c=0,f=0,i=0;i<this.k;++i)c+=p.dotProd(this.g[i],g[i]),p.rightMultiply(this.H[i],g[i],this.Hd[i]),f+=p.dotProd(g[i],this.Hd[i]);return 0!==f&&isFinite(f)?1*c/f:0},p.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var g=this.computeStepSize(this.g),c=0;c<this.k;++c)this.takeDescentStep(this.x[c],this.g[c],g);return this.computeStress()},p.copy=function(g,c){for(var f=g.length,i=c[0].length,a=0;a<f;++a)for(var l=0;l<i;++l)c[a][l]=g[a][l]},p.prototype.stepAndProject=function(g,c,f,i){p.copy(g,c),this.takeDescentStep(c[0],f[0],i),this.project&&this.project[0](g[0],g[1],c[0]),this.takeDescentStep(c[1],f[1],i),this.project&&this.project[1](c[0],g[1],c[1]);for(var a=2;a<this.k;a++)this.takeDescentStep(c[a],f[a],i)},p.mApply=function(g,c,f){for(var i=g;i-- >0;)for(var a=c;a-- >0;)f(i,a)},p.prototype.matrixApply=function(g){p.mApply(this.k,this.n,g)},p.prototype.computeNextPosition=function(g,c){var f=this;this.computeDerivatives(g);var i=this.computeStepSize(this.g);if(this.stepAndProject(g,c,this.g,i),this.project){this.matrixApply(function(l,t){return f.e[l][t]=g[l][t]-c[l][t]});var a=this.computeStepSize(this.e);a=Math.max(.2,Math.min(a,1)),this.stepAndProject(g,c,this.e,a)}},p.prototype.run=function(g){for(var c=Number.MAX_VALUE,f=!1;!f&&g-- >0;){var i=this.rungeKutta();f=Math.abs(c/i-1)<this.threshold,c=i}return c},p.prototype.rungeKutta=function(){var g=this;this.computeNextPosition(this.x,this.a),p.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),p.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var c=0;return this.matrixApply(function(f,i){var a=(g.a[f][i]+2*g.b[f][i]+2*g.c[f][i]+g.d[f][i])/6,l=g.x[f][i]-a;c+=l*l,g.x[f][i]=a}),c},p.mid=function(g,c,f){p.mApply(g.length,g[0].length,function(i,a){return f[i][a]=g[i][a]+(c[i][a]-g[i][a])/2})},p.prototype.takeDescentStep=function(g,c,f){for(var i=0;i<this.n;++i)g[i]=g[i]-f*c[i]},p.prototype.computeStress=function(){for(var g=0,c=0,f=this.n-1;c<f;++c)for(var i=c+1,a=this.n;i<a;++i){for(var l=0,t=0;t<this.k;++t){var h=this.x[t][c]-this.x[t][i];l+=h*h}l=Math.sqrt(l);var d=this.D[c][i];if(isFinite(d)){var x=d-l;g+=x*x/(d*d)}}return g},p.zeroDistance=1e-10,p}();_.Descent=s;var m=function(){function p(g){void 0===g&&(g=1),this.seed=g,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return p.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},p.prototype.getNextBetween=function(g,c){return g+this.getNext()*(c-g)},p}();_.PseudoRandom=m},225:function(y,_,o){"use strict";var B,s=this&&this.__extends||(B=function(Z,X){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,it){W.__proto__=it}||function(W,it){for(var tt in it)it.hasOwnProperty(tt)&&(W[tt]=it[tt])})(Z,X)},function(Z,X){function W(){this.constructor=Z}B(Z,X),Z.prototype=null===X?Object.create(X):(W.prototype=X.prototype,new W)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(4068),p=function B(){};_.Point=p;var g=function B(Z,X,W,it){this.x1=Z,this.y1=X,this.x2=W,this.y2=it};_.LineSegment=g;var c=function(B){function Z(){return null!==B&&B.apply(this,arguments)||this}return s(Z,B),Z}(p);function f(B,Z,X){return(Z.x-B.x)*(X.y-B.y)-(X.x-B.x)*(Z.y-B.y)}function i(B,Z,X){return f(B,Z,X)>0}function a(B,Z,X){return f(B,Z,X)<0}function x(B,Z){var X=Z.slice(0);return X.push(Z[0]),{rtan:w(B,X),ltan:C(B,X)}}function w(B,Z){var W,it,tt,ct,X=Z.length-1;if(a(B,Z[1],Z[0])&&!i(B,Z[X-1],Z[0]))return 0;for(W=0,it=X;;){if(it-W==1)return i(B,Z[W],Z[it])?W:it;if((ct=a(B,Z[(tt=Math.floor((W+it)/2))+1],Z[tt]))&&!i(B,Z[tt-1],Z[tt]))return tt;i(B,Z[W+1],Z[W])?ct||i(B,Z[W],Z[tt])?it=tt:W=tt:ct&&a(B,Z[W],Z[tt])?it=tt:W=tt}}function C(B,Z){var W,it,tt,ct,X=Z.length-1;if(i(B,Z[X-1],Z[0])&&!a(B,Z[1],Z[0]))return 0;for(W=0,it=X;;){if(it-W==1)return a(B,Z[W],Z[it])?W:it;if(ct=a(B,Z[(tt=Math.floor((W+it)/2))+1],Z[tt]),i(B,Z[tt-1],Z[tt])&&!ct)return tt;a(B,Z[W+1],Z[W])?ct?a(B,Z[W],Z[tt])?it=tt:W=tt:it=tt:ct?W=tt:i(B,Z[W],Z[tt])?it=tt:W=tt}}function M(B,Z,X,W,it,tt){var ut,ct;ct=W(B[ut=X(Z[0],B)],Z);for(var xt=!1;!xt;){for(xt=!0;ut===B.length-1&&(ut=0),!it(Z[ct],B[ut],B[ut+1]);)++ut;for(;0===ct&&(ct=Z.length-1),!tt(B[ut],Z[ct],Z[ct-1]);)--ct,xt=!1}return{t1:ut,t2:ct}}function I(B,Z){return M(B,Z,w,C,i,a)}_.PolyPoint=c,_.isLeft=f,_.ConvexHull=function l(B){var W,Z=B.slice(0).sort(function(lt,mt){return lt.x!==mt.x?mt.x-lt.x:mt.y-lt.y}),X=B.length,tt=Z[0].x;for(W=1;W<X&&Z[W].x===tt;++W);var ut=W-1,ct=[];if(ct.push(Z[0]),ut===X-1)Z[ut].y!==Z[0].y&&ct.push(Z[ut]);else{var xt,J=X-1,Q=Z[X-1].x;for(W=X-2;W>=0&&Z[W].x===Q;W--);for(xt=W+1,W=ut;++W<=xt;)if(!(f(Z[0],Z[xt],Z[W])>=0&&W<xt)){for(;ct.length>1&&!(f(ct[ct.length-2],ct[ct.length-1],Z[W])>0);)ct.length-=1;0!=W&&ct.push(Z[W])}J!=xt&&ct.push(Z[J]);var rt=ct.length;for(W=xt;--W>=ut;)if(!(f(Z[J],Z[ut],Z[W])>=0&&W>ut)){for(;ct.length>rt&&!(f(ct[ct.length-2],ct[ct.length-1],Z[W])>0);)ct.length-=1;0!=W&&ct.push(Z[W])}}return ct},_.clockwiseRadialSweep=function t(B,Z,X){Z.slice(0).sort(function(W,it){return Math.atan2(W.y-B.y,W.x-B.x)-Math.atan2(it.y-B.y,it.x-B.x)}).forEach(X)},_.tangent_PolyPolyC=M,_.LRtangent_PolyPolyC=function k(B,Z){var X=I(Z,B);return{t1:X.t2,t2:X.t1}},_.RLtangent_PolyPolyC=I,_.LLtangent_PolyPolyC=function A(B,Z){return M(B,Z,C,C,a,a)},_.RRtangent_PolyPolyC=function P(B,Z){return M(B,Z,w,w,i,i)};var H=function B(Z,X){this.t1=Z,this.t2=X};_.BiTangent=H;var V=function B(){};_.BiTangents=V;var U=function(B){function Z(){return null!==B&&B.apply(this,arguments)||this}return s(Z,B),Z}(p);_.TVGPoint=U;var Y=function B(Z,X,W,it){this.id=Z,this.polyid=X,this.polyvertid=W,this.p=it,it.vv=this};_.VisibilityVertex=Y;var N=function(){function B(Z,X){this.source=Z,this.target=X}return B.prototype.length=function(){var Z=this.source.p.x-this.target.p.x,X=this.source.p.y-this.target.p.y;return Math.sqrt(Z*Z+X*X)},B}();_.VisibilityEdge=N;var O=function(){function B(Z,X){if(this.P=Z,this.V=[],this.E=[],X)this.V=X.V.slice(0),this.E=X.E.slice(0);else{for(var W=Z.length,it=0;it<W;it++){for(var tt=Z[it],ut=0;ut<tt.length;++ut){var ct=tt[ut],xt=new Y(this.V.length,it,ut,ct);this.V.push(xt),ut>0&&this.E.push(new N(tt[ut-1].vv,xt))}tt.length>1&&this.E.push(new N(tt[0].vv,tt[tt.length-1].vv))}for(it=0;it<W-1;it++){var J=Z[it];for(ut=it+1;ut<W;ut++){var Q=Z[ut],rt=F(J,Q);for(var lt in rt){var mt=rt[lt],dt=J[mt.t1],_t=Q[mt.t2];this.addEdgeIfVisible(dt,_t,it,ut)}}}}}return B.prototype.addEdgeIfVisible=function(Z,X,W,it){this.intersectsPolys(new g(Z.x,Z.y,X.x,X.y),W,it)||this.E.push(new N(Z.vv,X.vv))},B.prototype.addPoint=function(Z,X){var W=this.P.length;this.V.push(new Y(this.V.length,W,0,Z));for(var it=0;it<W;++it)if(it!==X){var tt=this.P[it],ut=x(Z,tt);this.addEdgeIfVisible(Z,tt[ut.ltan],X,it),this.addEdgeIfVisible(Z,tt[ut.rtan],X,it)}return Z.vv},B.prototype.intersectsPolys=function(Z,X,W){for(var it=0,tt=this.P.length;it<tt;++it)if(it!=X&&it!=W&&L(Z,this.P[it]).length>0)return!0;return!1},B}();function L(B,Z){for(var X=[],W=1,it=Z.length;W<it;++W){var tt=m.Rectangle.lineIntersection(B.x1,B.y1,B.x2,B.y2,Z[W-1].x,Z[W-1].y,Z[W].x,Z[W].y);tt&&X.push(tt)}return X}function F(B,Z){for(var X=B.length-1,W=Z.length-1,it=new V,tt=0;tt<X;++tt)for(var ut=0;ut<W;++ut){var ct=B[0==tt?X-1:tt-1],xt=B[tt],J=B[tt+1],Q=Z[0==ut?W-1:ut-1],rt=Z[ut],lt=Z[ut+1],mt=f(ct,xt,rt),dt=f(xt,Q,rt),_t=f(xt,rt,lt),bt=f(Q,rt,xt),ot=f(rt,ct,xt),at=f(rt,xt,J);mt>=0&&dt>=0&&_t<0&&bt>=0&&ot>=0&&at<0?it.ll=new H(tt,ut):mt<=0&&dt<=0&&_t>0&&bt<=0&&ot<=0&&at>0?it.rr=new H(tt,ut):mt<=0&&dt>0&&_t<=0&&bt>=0&&ot<0&&at>=0?it.rl=new H(tt,ut):mt>=0&&dt<0&&_t>=0&&bt<=0&&ot>0&&at<=0&&(it.lr=new H(tt,ut))}return it}function z(B,Z){return!B.every(function(X){return!function G(B,Z){for(var X=1,W=Z.length;X<W;++X)if(a(Z[X-1],Z[X],B))return!1;return!0}(X,Z)})}_.TangentVisibilityGraph=O,_.tangents=F,_.polysOverlap=function K(B,Z){if(z(B,Z)||z(Z,B))return!0;for(var X=1,W=B.length;X<W;++X){var it=B[X],tt=B[X-1];if(L(new g(tt.x,tt.y,it.x,it.y),Z).length>0)return!0}return!1}},6767:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(4068),m=o(8237),p=o(3858),g=function a(l,t,h){this.id=l,this.rect=t,this.children=h,this.leaf=typeof h>"u"||0===h.length};_.NodeWrapper=g;var c=function a(l,t,h,d,x){void 0===d&&(d=null),void 0===x&&(x=null),this.id=l,this.x=t,this.y=h,this.node=d,this.line=x};_.Vert=c;var f=function(){function a(l,t){this.s=l,this.t=t;var h=a.findMatch(l,t),d=t.slice(0).reverse(),x=a.findMatch(l,d);h.length>=x.length?(this.length=h.length,this.si=h.si,this.ti=h.ti,this.reversed=!1):(this.length=x.length,this.si=x.si,this.ti=t.length-x.ti-x.length,this.reversed=!0)}return a.findMatch=function(l,t){for(var h=l.length,d=t.length,x={length:0,si:-1,ti:-1},w=new Array(h),C=0;C<h;C++){w[C]=new Array(d);for(var M=0;M<d;M++)if(l[C]===t[M]){var k=w[C][M]=0===C||0===M?1:w[C-1][M-1]+1;k>x.length&&(x.length=k,x.si=C-k+1,x.ti=M-k+1)}else w[C][M]=0}return x},a.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},a}();_.LongestCommonSubsequence=f;var i=function(){function a(l,t,h){var d=this;void 0===h&&(h=12),this.originalnodes=l,this.groupPadding=h,this.leaves=null,this.nodes=l.map(function(U,Y){return new g(Y,t.getBounds(U),t.getChildren(U))}),this.leaves=this.nodes.filter(function(U){return U.leaf}),this.groups=this.nodes.filter(function(U){return!U.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(U){return U.children.forEach(function(Y){return d.nodes[Y].parent=U})}),this.root={children:[]},this.nodes.forEach(function(U){typeof U.parent>"u"&&(U.parent=d.root,d.root.children.push(U.id)),U.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(U,Y){return d.getDepth(U)-d.getDepth(Y)}),this.backToFront.slice(0).reverse().filter(function(U){return!U.leaf}).forEach(function(U){var Y=s.Rectangle.empty();U.children.forEach(function(N){return Y=Y.union(d.nodes[N].rect)}),U.rect=Y.inflate(d.groupPadding)});var w=this.midPoints(this.cols.map(function(U){return U.pos})),C=this.midPoints(this.rows.map(function(U){return U.pos})),M=w[0],k=w[w.length-1],I=C[0],A=C[C.length-1],P=this.rows.map(function(U){return{x1:M,x2:k,y1:U.pos,y2:U.pos}}).concat(C.map(function(U){return{x1:M,x2:k,y1:U,y2:U}})),H=this.cols.map(function(U){return{x1:U.pos,x2:U.pos,y1:I,y2:A}}).concat(w.map(function(U){return{x1:U,x2:U,y1:I,y2:A}})),V=P.concat(H);V.forEach(function(U){return U.verts=[]}),this.verts=[],this.edges=[],P.forEach(function(U){return H.forEach(function(Y){var N=new c(d.verts.length,Y.x1,U.y1);U.verts.push(N),Y.verts.push(N),d.verts.push(N);for(var O=d.backToFront.length;O-- >0;){var L=d.backToFront[O],F=L.rect,G=Math.abs(N.x-F.cx()),z=Math.abs(N.y-F.cy());if(G<F.width()/2&&z<F.height()/2){N.node=L;break}}})}),V.forEach(function(U,Y){d.nodes.forEach(function(z,K){z.rect.lineIntersections(U.x1,U.y1,U.x2,U.y2).forEach(function(B,Z){var X=new c(d.verts.length,B.x,B.y,z,U);d.verts.push(X),U.verts.push(X),z.ports.push(X)})});var N=Math.abs(U.y1-U.y2)<.1,O=function(z,K){return N?K.x-z.x:K.y-z.y};U.verts.sort(O);for(var L=1;L<U.verts.length;L++){var F=U.verts[L-1],G=U.verts[L];F.node&&F.node===G.node&&F.node.leaf||d.edges.push({source:F.id,target:G.id,length:Math.abs(O(F,G))})}})}return a.prototype.avg=function(l){return l.reduce(function(t,h){return t+h})/l.length},a.prototype.getGridLines=function(l){for(var t=[],h=this.leaves.slice(0,this.leaves.length);h.length>0;){var d=h.filter(function(w){return w.rect["overlap"+l.toUpperCase()](h[0].rect)}),x={nodes:d,pos:this.avg(d.map(function(w){return w.rect["c"+l]()}))};t.push(x),x.nodes.forEach(function(w){return h.splice(h.indexOf(w),1)})}return t.sort(function(w,C){return w.pos-C.pos}),t},a.prototype.getDepth=function(l){for(var t=0;l.parent!==this.root;)t++,l=l.parent;return t},a.prototype.midPoints=function(l){for(var t=l[1]-l[0],h=[l[0]-t/2],d=1;d<l.length;d++)h.push((l[d]+l[d-1])/2);return h.push(l[l.length-1]+t/2),h},a.prototype.findLineage=function(l){var t=[l];do{l=l.parent,t.push(l)}while(l!==this.root);return t.reverse()},a.prototype.findAncestorPathBetween=function(l,t){for(var h=this.findLineage(l),d=this.findLineage(t),x=0;h[x]===d[x];)x++;return{commonAncestor:h[x-1],lineages:h.slice(x).concat(d.slice(x))}},a.prototype.siblingObstacles=function(l,t){var h=this,d=this.findAncestorPathBetween(l,t),x={};d.lineages.forEach(function(C){return x[C.id]={}});var w=d.commonAncestor.children.filter(function(C){return!(C in x)});return d.lineages.filter(function(C){return C.parent!==d.commonAncestor}).forEach(function(C){return w=w.concat(C.parent.children.filter(function(M){return M!==C.id}))}),w.map(function(C){return h.nodes[C]})},a.getSegmentSets=function(l,t,h){for(var d=[],x=0;x<l.length;x++)for(var w=l[x],C=0;C<w.length;C++){(M=w[C]).edgeid=x,M.i=C;var k=M[1][t]-M[0][t];Math.abs(k)<.1&&d.push(M)}d.sort(function(H,V){return H[0][t]-V[0][t]});for(var I=[],A=null,P=0;P<d.length;P++){var M=d[P];(!A||Math.abs(M[0][t]-A.pos)>.1)&&(A={pos:M[0][t],segments:[]},I.push(A)),A.segments.push(M)}return I},a.nudgeSegs=function(l,t,h,d,x,w){var C=d.length;if(!(C<=1)){for(var M=d.map(function(L){return new m.Variable(L[0][l])}),k=[],I=0;I<C;I++)for(var A=0;A<C;A++)if(I!==A){var P=d[I],H=d[A],V=P.edgeid,U=H.edgeid,Y=-1,N=-1;"x"==l?x(V,U)&&(P[0][t]<P[1][t]?(Y=A,N=I):(Y=I,N=A)):x(V,U)&&(P[0][t]<P[1][t]?(Y=I,N=A):(Y=A,N=I)),Y>=0&&k.push(new m.Constraint(M[Y],M[N],w))}new m.Solver(M,k).solve(),M.forEach(function(L,F){var G=d[F],z=L.position();G[0][l]=G[1][l]=z;var K=h[G.edgeid];G.i>0&&(K[G.i-1][1][l]=z),G.i<K.length-1&&(K[G.i+1][0][l]=z)})}},a.nudgeSegments=function(l,t,h,d,x){for(var w=a.getSegmentSets(l,t,h),C=0;C<w.length;C++){for(var M=w[C],k=[],I=0;I<M.segments.length;I++){var A=M.segments[I];k.push({type:0,s:A,pos:Math.min(A[0][h],A[1][h])}),k.push({type:1,s:A,pos:Math.max(A[0][h],A[1][h])})}k.sort(function(V,U){return V.pos-U.pos+V.type-U.type});var P=[],H=0;k.forEach(function(V){0===V.type?(P.push(V.s),H++):H--,0==H&&(a.nudgeSegs(t,h,l,P,d,x),P=[])})}},a.prototype.routeEdges=function(l,t,h,d){var x=this,w=l.map(function(k){return x.route(h(k),d(k))}),C=a.orderEdges(w),M=w.map(function(k){return a.makeSegments(k)});return a.nudgeSegments(M,"x","y",C,t),a.nudgeSegments(M,"y","x",C,t),a.unreverseEdges(M,w),M},a.unreverseEdges=function(l,t){l.forEach(function(h,d){t[d].reversed&&(h.reverse(),h.forEach(function(w){w.reverse()}))})},a.angleBetween2Lines=function(l,t){var h=Math.atan2(l[0].y-l[1].y,l[0].x-l[1].x),d=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),x=h-d;return(x>Math.PI||x<-Math.PI)&&(x=d-h),x},a.isLeft=function(l,t,h){return(t.x-l.x)*(h.y-l.y)-(t.y-l.y)*(h.x-l.x)<=0},a.getOrder=function(l){for(var t={},h=0;h<l.length;h++){var d=l[h];typeof t[d.l]>"u"&&(t[d.l]={}),t[d.l][d.r]=!0}return function(x,w){return typeof t[x]<"u"&&t[x][w]}},a.orderEdges=function(l){for(var t=[],h=0;h<l.length-1;h++)for(var d=h+1;d<l.length;d++){var M,k,I,x=l[h],w=l[d],C=new f(x,w);if(0!==C.length){if(C.reversed&&(w.reverse(),w.reversed=!0,C=new f(x,w)),(C.si<=0||C.ti<=0)&&(C.si+C.length>=x.length||C.ti+C.length>=w.length)){t.push({l:h,r:d});continue}C.si+C.length>=x.length||C.ti+C.length>=w.length?(M=x[C.si+1],I=x[C.si-1],k=w[C.ti-1]):(M=x[C.si+C.length-2],k=x[C.si+C.length],I=w[C.ti+C.length]),a.isLeft(M,k,I)?t.push({l:d,r:h}):t.push({l:h,r:d})}}return a.getOrder(t)},a.makeSegments=function(l){function t(k){return{x:k.x,y:k.y}}for(var d=[],x=t(l[0]),w=1;w<l.length;w++){var C=t(l[w]),M=w<l.length-1?l[w+1]:null;(!M||(k=x,I=C,A=M,!(Math.abs((I.x-k.x)*(A.y-k.y)-(I.y-k.y)*(A.x-k.x))<.001)))&&(d.push([x,C]),x=C)}var k,I,A;return d},a.prototype.route=function(l,t){var h=this,d=this.nodes[l],x=this.nodes[t];this.obstacles=this.siblingObstacles(d,x);var w={};this.obstacles.forEach(function(N){return w[N.id]=N}),this.passableEdges=this.edges.filter(function(N){var O=h.verts[N.source],L=h.verts[N.target];return!(O.node&&O.node.id in w||L.node&&L.node.id in w)});for(var C=1;C<d.ports.length;C++){var M=d.ports[0].id,k=d.ports[C].id;this.passableEdges.push({source:M,target:k,length:0})}for(C=1;C<x.ports.length;C++){M=x.ports[0].id,k=x.ports[C].id;this.passableEdges.push({source:M,target:k,length:0})}var Y=new p.Calculator(this.verts.length,this.passableEdges,function(N){return N.source},function(N){return N.target},function(N){return N.length}).PathFromNodeToNodeWithPrevCost(d.ports[0].id,x.ports[0].id,function(N,O,L){var F=h.verts[N],G=h.verts[O],z=h.verts[L],K=Math.abs(z.x-F.x),B=Math.abs(z.y-F.y);return F.node===d&&F.node===G.node||G.node===x&&G.node===z.node?0:K>1&&B>1?1e3:0}).reverse().map(function(N){return h.verts[N]});return Y.push(this.nodes[x.id].ports[0]),Y.filter(function(N,O){return!(O<Y.length-1&&Y[O+1].node===d&&N.node===d||O>0&&N.node===x&&Y[O-1].node===x)})},a.getRoutePath=function(l,t,h,d){var x={routepath:"M "+l[0][0].x+" "+l[0][0].y+" ",arrowpath:""};if(l.length>1)for(var w=0;w<l.length;w++){var M=(C=l[w])[1].x,k=C[1].y,I=M-C[0].x,A=k-C[0].y;if(w<l.length-1){Math.abs(I)>0?M-=I/Math.abs(I)*t:k-=A/Math.abs(A)*t,x.routepath+="L "+M+" "+k+" ";var P=l[w+1],H=P[0].x,V=P[0].y;I=P[1].x-H,A=P[1].y-V;var O,L,N=a.angleBetween2Lines(C,P)<0?1:0;Math.abs(I)>0?(O=H+I/Math.abs(I)*t,L=V):(O=H,L=V+A/Math.abs(A)*t);var F=Math.abs(O-M),G=Math.abs(L-k);x.routepath+="A "+F+" "+G+" 0 0 "+N+" "+O+" "+L+" "}else{var z=[M,k];Math.abs(I)>0?(K=[M-=I/Math.abs(I)*d,k+h],B=[M,k-h]):(K=[M+h,k-=A/Math.abs(A)*d],B=[M-h,k]),x.routepath+="L "+M+" "+k+" ",d>0&&(x.arrowpath="M "+z[0]+" "+z[1]+" L "+K[0]+" "+K[1]+" L "+B[0]+" "+B[1])}}else{var C,K,B;M=(C=l[0])[1].x,k=C[1].y,I=M-C[0].x,A=k-C[0].y,z=[M,k];Math.abs(I)>0?(K=[M-=I/Math.abs(I)*d,k+h],B=[M,k-h]):(K=[M+h,k-=A/Math.abs(A)*d],B=[M-h,k]),x.routepath+="L "+M+" "+k+" ",d>0&&(x.arrowpath="M "+z[0]+" "+z[1]+" L "+K[0]+" "+K[1]+" L "+B[0]+" "+B[1])}return x},a}();_.GridRouter=i},345:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o_PADDING=10,o_GOLDEN_SECTION=(1+Math.sqrt(5))/2,o_FLOAT_EPSILON=1e-4;_.applyPacking=function s(p,g,c,w,x,a){void 0===x&&(x=1),void 0===a&&(a=!0);var h=g,d=c,C=(x=typeof x<"u"?x:1,w=typeof w<"u"?w:0,0),M=0,k=0,I=0,A=[];function U(L,F){A=[],C=0,M=0,I=0;for(var G=0;G<L.length;G++){Y(L[G],F)}return Math.abs(function O(){return C/M}()-x)}function Y(L,F){for(var G=void 0,z=0;z<A.length;z++)if(A[z].space_left>=L.height&&A[z].x+A[z].width+L.width+o_PADDING-F<=o_FLOAT_EPSILON){G=A[z];break}A.push(L),void 0!==G?(L.x=G.x+G.width+o_PADDING,L.y=G.bottom,L.space_left=L.height,L.bottom=L.y,G.space_left-=L.height+o_PADDING,G.bottom+=L.height+o_PADDING):(L.y=I,I+=L.height+o_PADDING,L.x=0,L.bottom=L.y,L.space_left=L.height),L.y+L.height-M>-o_FLOAT_EPSILON&&(M=L.y+L.height-0),L.x+L.width-C>-o_FLOAT_EPSILON&&(C=L.x+L.width-0)}0!=p.length&&(function P(L){L.forEach(function(G){!function F(G){var z=Number.MAX_VALUE,K=Number.MAX_VALUE,B=0,Z=0;G.array.forEach(function(X){var W=typeof X.width<"u"?X.width:w,it=typeof X.height<"u"?X.height:w;W/=2,it/=2,B=Math.max(X.x+W,B),z=Math.min(X.x-W,z),Z=Math.max(X.y+it,Z),K=Math.min(X.y-it,K)}),G.width=B-z,G.height=Z-K}(G)})}(p),function V(L,F){var G=Number.POSITIVE_INFINITY,z=0;L.sort(function(J,Q){return Q.height-J.height}),k=L.reduce(function(J,Q){return J.width<Q.width?J.width:Q.width});for(var K=ct=k,B=xt=function N(L){var F=0;return L.forEach(function(G){return F+=G.width+o_PADDING}),F}(L),Z=0,X=Number.MAX_VALUE,W=Number.MAX_VALUE,it=-1,tt=Number.MAX_VALUE,ut=Number.MAX_VALUE;tt>k||ut>o_FLOAT_EPSILON;){if(1!=it){var ct=B-(B-K)/o_GOLDEN_SECTION;X=U(L,ct)}if(0!=it){var xt=K+(B-K)/o_GOLDEN_SECTION;W=U(L,xt)}if(tt=Math.abs(ct-xt),ut=Math.abs(X-W),X<G&&(G=X,z=ct),W<G&&(G=W,z=xt),X>W?(K=ct,ct=xt,X=W,it=1):(B=xt,xt=ct,W=X,it=0),Z++>100)break}U(L,z)}(p),a&&function H(L){L.forEach(function(F){var G={x:0,y:0};F.array.forEach(function(B){G.x+=B.x,G.y+=B.y}),G.x/=F.array.length,G.y/=F.array.length;var z_x=G.x-F.width/2,z_y=G.y-F.height/2,K_x=F.x-z_x+h/2-C/2,K_y=F.y-z_y+d/2-M/2;F.array.forEach(function(B){B.x+=K_x,B.y+=K_y})})}(p))},_.separateGraphs=function m(p,g){for(var c={},f={},i=[],a=0,l=0;l<g.length;l++){var t=g[l],h=t.source,d=t.target;f[h.index]?f[h.index].push(d):f[h.index]=[d],f[d.index]?f[d.index].push(h):f[d.index]=[h]}for(l=0;l<p.length;l++){var x=p[l];c[x.index]||w(x,!0)}function w(C,M){if(void 0===c[C.index]){M&&(a++,i.push({array:[]})),c[C.index]=a,i[a-1].array.push(C);var k=f[C.index];if(k)for(var I=0;I<k.length;I++)w(k[I],!1)}}return i}},5675:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var a,h,s=o(3900),m=o(8802),p=o(1786),g=o(4068),c=o(3858),f=o(225),i=o(345);function l(h){return typeof h.leaves<"u"||typeof h.groups<"u"}(h=a=_.EventType||(_.EventType={}))[h.start=0]="start",h[h.tick=1]="tick",h[h.end=2]="end";var t=function(){function h(){var d=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:h.getSourceIndex,getTargetIndex:h.getTargetIndex,setLength:h.setLinkLength,getType:function(x){return"function"==typeof d._linkType?d._linkType(x):0}}}return h.prototype.on=function(d,x){return this.event||(this.event={}),"string"==typeof d?this.event[a[d]]=x:this.event[d]=x,this},h.prototype.trigger=function(d){this.event&&typeof this.event[d.type]<"u"&&this.event[d.type](d)},h.prototype.kick=function(){for(;!this.tick(););},h.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:a.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var w,C,d=this._nodes.length;this._links.length;for(this._descent.locks.clear(),C=0;C<d;++C)if((w=this._nodes[C]).fixed){(typeof w.px>"u"||typeof w.py>"u")&&(w.px=w.x,w.py=w.y);var M=[w.px,w.py];this._descent.locks.add(C,M)}var k=this._descent.rungeKutta();return 0===k?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=k),this._lastStress=k,this.updateNodePositions(),this.trigger({type:a.tick,alpha:this._alpha,stress:this._lastStress}),!1},h.prototype.updateNodePositions=function(){for(var w,d=this._descent.x[0],x=this._descent.x[1],C=this._nodes.length;C--;)(w=this._nodes[C]).x=d[C],w.y=x[C]},h.prototype.nodes=function(d){if(!d){if(0===this._nodes.length&&this._links.length>0){var x=0;this._links.forEach(function(C){x=Math.max(x,C.source,C.target)}),this._nodes=new Array(++x);for(var w=0;w<x;++w)this._nodes[w]={}}return this._nodes}return this._nodes=d,this},h.prototype.groups=function(d){var x=this;return d?(this._groups=d,this._rootGroup={},this._groups.forEach(function(w){typeof w.padding>"u"&&(w.padding=1),typeof w.leaves<"u"&&w.leaves.forEach(function(C,M){"number"==typeof C&&((w.leaves[M]=x._nodes[C]).parent=w)}),typeof w.groups<"u"&&w.groups.forEach(function(C,M){"number"==typeof C&&((w.groups[M]=x._groups[C]).parent=w)})}),this._rootGroup.leaves=this._nodes.filter(function(w){return typeof w.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(w){return typeof w.parent>"u"}),this):this._groups},h.prototype.powerGraphGroups=function(d){var x=s.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(x.groups),d(x),this},h.prototype.avoidOverlaps=function(d){return arguments.length?(this._avoidOverlaps=d,this):this._avoidOverlaps},h.prototype.handleDisconnected=function(d){return arguments.length?(this._handleDisconnected=d,this):this._handleDisconnected},h.prototype.flowLayout=function(d,x){return arguments.length||(d="y"),this._directedLinkConstraints={axis:d,getMinSeparation:"number"==typeof x?function(){return x}:x},this},h.prototype.links=function(d){return arguments.length?(this._links=d,this):this._links},h.prototype.constraints=function(d){return arguments.length?(this._constraints=d,this):this._constraints},h.prototype.distanceMatrix=function(d){return arguments.length?(this._distanceMatrix=d,this):this._distanceMatrix},h.prototype.size=function(d){return d?(this._canvasSize=d,this):this._canvasSize},h.prototype.defaultNodeSize=function(d){return d?(this._defaultNodeSize=d,this):this._defaultNodeSize},h.prototype.groupCompactness=function(d){return d?(this._groupCompactness=d,this):this._groupCompactness},h.prototype.linkDistance=function(d){return d?(this._linkDistance="function"==typeof d?d:+d,this._linkLengthCalculator=null,this):this._linkDistance},h.prototype.linkType=function(d){return this._linkType=d,this},h.prototype.convergenceThreshold=function(d){return d?(this._threshold="function"==typeof d?d:+d,this):this._threshold},h.prototype.alpha=function(d){return arguments.length?(d=+d,this._alpha?this._alpha=d>0?d:0:d>0&&(this._running||(this._running=!0,this.trigger({type:a.start,alpha:this._alpha=d}),this.kick())),this):this._alpha},h.prototype.getLinkLength=function(d){return"function"==typeof this._linkDistance?+this._linkDistance(d):this._linkDistance},h.setLinkLength=function(d,x){d.length=x},h.prototype.getLinkType=function(d){return"function"==typeof this._linkType?this._linkType(d):0},h.prototype.symmetricDiffLinkLengths=function(d,x){var w=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.symmetricDiffLinkLengths(w._links,w.linkAccessor,x)},this},h.prototype.jaccardLinkLengths=function(d,x){var w=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.jaccardLinkLengths(w._links,w.linkAccessor,x)},this},h.prototype.start=function(d,x,w,C,M,k){var I=this;void 0===d&&(d=0),void 0===x&&(x=0),void 0===w&&(w=0),void 0===C&&(C=0),void 0===M&&(M=!0),void 0===k&&(k=!0);var z,H=this.nodes().length,V=H+2*this._groups.length,Y=(this._links.length,this._canvasSize[0]),N=this._canvasSize[1],O=new Array(V),L=new Array(V),F=null,G=this._avoidOverlaps;this._nodes.forEach(function(tt,ut){tt.index=ut,typeof tt.x>"u"&&(tt.x=Y/2,tt.y=N/2),O[ut]=tt.x,L[ut]=tt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?z=this._distanceMatrix:(z=new c.Calculator(V,this._links,h.getSourceIndex,h.getTargetIndex,function(tt){return I.getLinkLength(tt)}).DistanceMatrix(),F=p.Descent.createSquareMatrix(V,function(){return 2}),this._links.forEach(function(tt){"number"==typeof tt.source&&(tt.source=I._nodes[tt.source]),"number"==typeof tt.target&&(tt.target=I._nodes[tt.target])}),this._links.forEach(function(tt){var ut=h.getSourceIndex(tt),ct=h.getTargetIndex(tt);F[ut][ct]=F[ct][ut]=tt.weight||1}));var K=p.Descent.createSquareMatrix(V,function(tt,ut){return z[tt][ut]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var A=H;this._groups.forEach(function(ut){(function(ut,ct,xt,J){F[ut][ct]=F[ct][ut]=xt,K[ut][ct]=K[ct][ut]=J})(A,A+1,I._groupCompactness,.1),O[A]=0,L[A++]=0,O[A]=0,L[A++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var Z=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,Z=Z.concat(m.generateDirectedEdgeConstraints(H,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new p.Descent([O,L],K),this._descent.locks.clear();for(A=0;A<H;++A){var X=this._nodes[A];if(X.fixed){X.px=X.x,X.py=X.y;var W=[X.x,X.y];this._descent.locks.add(A,W)}}if(this._descent.threshold=this._threshold,this.initialLayout(d,O,L),Z.length>0&&(this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,Z).projectFunctions()),this._descent.run(x),this.separateOverlappingComponents(Y,N,k),this.avoidOverlaps(G),G&&(this._nodes.forEach(function(tt,ut){tt.x=O[ut],tt.y=L[ut]}),this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,Z,!0).projectFunctions(),this._nodes.forEach(function(tt,ut){O[ut]=tt.x,L[ut]=tt.y})),this._descent.G=F,this._descent.run(w),C){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=H,this._descent.scaleSnapByMaxH=H!=V;var it=p.Descent.createSquareMatrix(V,function(tt,ut){return tt>=H||ut>=H?F[tt][ut]:0});this._descent.G=it,this._descent.run(C)}return this.updateNodePositions(),this.separateOverlappingComponents(Y,N,k),M?this.resume():this},h.prototype.initialLayout=function(d,x,w){if(this._groups.length>0&&d>0){var C=this._nodes.length,M=this._links.map(function(I){return{source:I.source.index,target:I.target.index}}),k=this._nodes.map(function(I){return{index:I.index}});this._groups.forEach(function(I,A){k.push({index:I.index=C+A})}),this._groups.forEach(function(I,A){typeof I.leaves<"u"&&I.leaves.forEach(function(P){return M.push({source:I.index,target:P.index})}),typeof I.groups<"u"&&I.groups.forEach(function(P){return M.push({source:I.index,target:P.index})})}),(new h).size(this.size()).nodes(k).links(M).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(d,0,0,0,!1),this._nodes.forEach(function(I){x[I.index]=k[I.index].x,w[I.index]=k[I.index].y})}else this._descent.run(d)},h.prototype.separateOverlappingComponents=function(d,x,w){var C=this;if(void 0===w&&(w=!0),!this._distanceMatrix&&this._handleDisconnected){var M=this._descent.x[0],k=this._descent.x[1];this._nodes.forEach(function(A,P){A.x=M[P],A.y=k[P]});var I=i.separateGraphs(this._nodes,this._links);i.applyPacking(I,d,x,this._defaultNodeSize,1,w),this._nodes.forEach(function(A,P){C._descent.x[0][P]=A.x,C._descent.x[1][P]=A.y,A.bounds&&(A.bounds.setXCentre(A.x),A.bounds.setYCentre(A.y))})}},h.prototype.resume=function(){return this.alpha(.1)},h.prototype.stop=function(){return this.alpha(0)},h.prototype.prepareEdgeRouting=function(d){void 0===d&&(d=0),this._visibilityGraph=new f.TangentVisibilityGraph(this._nodes.map(function(x){return x.bounds.inflate(-d).vertices()}))},h.prototype.routeEdge=function(d,x,w){void 0===x&&(x=5);var C=[],M=new f.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),k={x:d.source.x,y:d.source.y},I={x:d.target.x,y:d.target.y},A=M.addPoint(k,d.source.index),P=M.addPoint(I,d.target.index);M.addEdgeIfVisible(k,I,d.source.index,d.target.index),typeof w<"u"&&w(M);var N=new c.Calculator(M.V.length,M.E,function(K){return K.source.id},function(K){return K.target.id},function(K){return K.length()}).PathFromNodeToNode(A.id,P.id);if(1===N.length||N.length===M.V.length){var O=g.makeEdgeBetween(d.source.innerBounds,d.target.innerBounds,x);C=[O.sourceIntersection,O.arrowStart]}else{for(var L=N.length-2,F=M.V[N[L]].p,G=M.V[N[0]].p,z=(C=[d.source.innerBounds.rayIntersection(F.x,F.y)],L);z>=0;--z)C.push(M.V[N[z]].p);C.push(g.makeEdgeTo(G,d.target.innerBounds,x))}return C},h.getSourceIndex=function(d){return"number"==typeof d.source?d.source:d.source.index},h.getTargetIndex=function(d){return"number"==typeof d.target?d.target:d.target.index},h.linkId=function(d){return h.getSourceIndex(d)+"-"+h.getTargetIndex(d)},h.dragStart=function(d){l(d)?h.storeOffset(d,h.dragOrigin(d)):(h.stopNode(d),d.fixed|=2)},h.stopNode=function(d){d.px=d.x,d.py=d.y},h.storeOffset=function(d,x){typeof d.leaves<"u"&&d.leaves.forEach(function(w){w.fixed|=2,h.stopNode(w),w._dragGroupOffsetX=w.x-x.x,w._dragGroupOffsetY=w.y-x.y}),typeof d.groups<"u"&&d.groups.forEach(function(w){return h.storeOffset(w,x)})},h.dragOrigin=function(d){return l(d)?{x:d.bounds.cx(),y:d.bounds.cy()}:d},h.drag=function(d,x){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(w){d.bounds.setXCentre(x.x),d.bounds.setYCentre(x.y),w.px=w._dragGroupOffsetX+x.x,w.py=w._dragGroupOffsetY+x.y}),typeof d.groups<"u"&&d.groups.forEach(function(w){return h.drag(w,x)})):(d.px=x.x,d.py=x.y)},h.dragEnd=function(d){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(x){h.dragEnd(x),delete x._dragGroupOffsetX,delete x._dragGroupOffsetY}),typeof d.groups<"u"&&d.groups.forEach(h.dragEnd)):d.fixed&=-7},h.mouseOver=function(d){d.fixed|=4,d.px=d.x,d.py=d.y},h.mouseOut=function(d){d.fixed&=-5},h}();_.Layout=t},6461:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(3858),m=o(1786),p=o(4068),g=o(8802),c=function(){function l(t,h){this.source=t,this.target=h}return l.prototype.actualLength=function(t){var h=this;return Math.sqrt(t.reduce(function(d,x){var w=x[h.target]-x[h.source];return d+w*w},0))},l}();_.Link3D=c;var f=function l(t,h,d){void 0===t&&(t=0),void 0===h&&(h=0),void 0===d&&(d=0),this.x=t,this.y=h,this.z=d};_.Node3D=f;var i=function(){function l(t,h,d){var x=this;void 0===d&&(d=1),this.nodes=t,this.links=h,this.idealLinkLength=d,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(l.k);for(var w=0;w<l.k;++w)this.result[w]=new Array(t.length);t.forEach(function(C,M){for(var k=0,I=l.dims;k<I.length;k++){var A=I[k];typeof C[A]>"u"&&(C[A]=Math.random())}x.result[0][M]=C.x,x.result[1][M]=C.y,x.result[2][M]=C.z})}return l.prototype.linkLength=function(t){return t.actualLength(this.result)},l.prototype.start=function(t){var h=this;void 0===t&&(t=100);var d=this.nodes.length,x=new a;this.useJaccardLinkLengths&&g.jaccardLinkLengths(this.links,x,1.5),this.links.forEach(function(A){return A.length*=h.idealLinkLength});var w=new s.Calculator(d,this.links,function(A){return A.source},function(A){return A.target},function(A){return A.length}).DistanceMatrix(),C=m.Descent.createSquareMatrix(d,function(A,P){return w[A][P]}),M=m.Descent.createSquareMatrix(d,function(){return 2});this.links.forEach(function(A){var P=A.source,H=A.target;return M[P][H]=M[H][P]=1}),this.descent=new m.Descent(this.result,C),this.descent.threshold=.001,this.descent.G=M,this.constraints&&(this.descent.project=new p.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var k=0;k<this.nodes.length;k++){var I=this.nodes[k];I.fixed&&this.descent.locks.add(k,[I.x,I.y,I.z])}return this.descent.run(t),this},l.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var h=this.nodes[t];h.fixed&&this.descent.locks.add(t,[h.x,h.y,h.z])}return this.descent.rungeKutta()},l.dims=["x","y","z"],l.k=l.dims.length,l}();_.Layout3D=i;var a=function(){function l(){}return l.prototype.getSourceIndex=function(t){return t.source},l.prototype.getTargetIndex=function(t){return t.target},l.prototype.getLength=function(t){return t.length},l.prototype.setLength=function(t,h){t.length=h},l}()},8802:(y,_)=>{"use strict";function o(a,l){var t={};for(var h in a)t[h]={};for(var h in l)t[h]={};return Object.keys(t).length}function s(a,l){var t=0;for(var h in a)typeof l[h]<"u"&&++t;return t}function p(a,l,t,h){var d=function m(a,l){var t={},h=function(d,x){typeof t[d]>"u"&&(t[d]={}),t[d][x]={}};return a.forEach(function(d){var x=l.getSourceIndex(d),w=l.getTargetIndex(d);h(x,w),h(w,x)}),t}(a,h);a.forEach(function(x){var w=d[h.getSourceIndex(x)],C=d[h.getTargetIndex(x)];h.setLength(x,1+l*t(w,C))})}function i(a,l,t){var h=[],d=0,x=[],w=[];function C(N){N.index=N.lowlink=d++,x.push(N),N.onStack=!0;for(var O=0,L=N.out;O<L.length;O++){var F=L[O];typeof F.index>"u"?(C(F),N.lowlink=Math.min(N.lowlink,F.lowlink)):F.onStack&&(N.lowlink=Math.min(N.lowlink,F.index))}if(N.lowlink===N.index){for(var G=[];x.length&&((F=x.pop()).onStack=!1,G.push(F),F!==N););w.push(G.map(function(z){return z.id}))}}for(var M=0;M<a;M++)h.push({id:M,out:[]});for(var k=0,I=l;k<I.length;k++){var A=I[k],P=h[t.getSourceIndex(A)],H=h[t.getTargetIndex(A)];P.out.push(H)}for(var V=0,U=h;V<U.length;V++){var Y=U[V];typeof Y.index>"u"&&C(Y)}return w}Object.defineProperty(_,"__esModule",{value:!0}),_.symmetricDiffLinkLengths=function g(a,l,t){void 0===t&&(t=1),p(a,t,function(h,d){return Math.sqrt(o(h,d)-s(h,d))},l)},_.jaccardLinkLengths=function c(a,l,t){void 0===t&&(t=1),p(a,t,function(h,d){return Math.min(Object.keys(h).length,Object.keys(d).length)<1.1?0:s(h,d)/o(h,d)},l)},_.generateDirectedEdgeConstraints=function f(a,l,t,h){var d=i(a,l,h),x={};d.forEach(function(C,M){return C.forEach(function(k){return x[k]=M})});var w=[];return l.forEach(function(C){var M=h.getSourceIndex(C),k=h.getTargetIndex(C);x[M]!==x[k]&&w.push({axis:t,left:M,right:k,gap:h.getMinSeparation(C)})}),w},_.stronglyConnectedComponents=i},3900:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function l(t,h,d){this.source=t,this.target=h,this.type=d};_.PowerEdge=o;var s=function(){function l(t,h,d,x){var w=this;if(this.linkAccessor=d,this.modules=new Array(t),this.roots=[],x)this.initModulesFromGroup(x);else{this.roots.push(new c);for(var C=0;C<t;++C)this.roots[0].add(this.modules[C]=new p(C))}this.R=h.length,h.forEach(function(M){var k=w.modules[d.getSourceIndex(M)],I=w.modules[d.getTargetIndex(M)],A=d.getType(M);k.outgoing.add(A,I),I.incoming.add(A,k)})}return l.prototype.initModulesFromGroup=function(t){var h=new c;this.roots.push(h);for(var d=0;d<t.leaves.length;++d){var x=t.leaves[d],w=new p(x.id);this.modules[x.id]=w,h.add(w)}if(t.groups)for(var C=0;C<t.groups.length;++C){var M=t.groups[C],k={};for(var I in M)"leaves"!==I&&"groups"!==I&&M.hasOwnProperty(I)&&(k[I]=M[I]);h.add(new p(-1-C,new f,new f,this.initModulesFromGroup(M),k))}return h},l.prototype.merge=function(t,h,d){void 0===d&&(d=0);var x=t.incoming.intersection(h.incoming),w=t.outgoing.intersection(h.outgoing),C=new c;C.add(t),C.add(h);var M=new p(this.modules.length,w,x,C);this.modules.push(M);var k=function(I,A,P){I.forAll(function(H,V){H.forAll(function(U){var Y=U[A];Y.add(V,M),Y.remove(V,t),Y.remove(V,h),t[P].remove(V,U),h[P].remove(V,U)})})};return k(w,"incoming","outgoing"),k(x,"outgoing","incoming"),this.R-=x.count()+w.count(),this.roots[d].remove(t),this.roots[d].remove(h),this.roots[d].add(M),M},l.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var h=this.roots[t].modules(),d=h.length,x=new Array(d*(d-1)),w=0,C=0,M=d-1;C<M;++C)for(var k=C+1;k<d;++k){var I=h[C],A=h[k];x[w]={id:w,nEdges:this.nEdges(I,A),a:I,b:A},w++}return x},l.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var d=this.rootMerges(t).sort(function(x,w){return x.nEdges==w.nEdges?x.id-w.id:x.nEdges-w.nEdges})[0];if(!(d.nEdges>=this.R))return this.merge(d.a,d.b,t),!0}},l.prototype.nEdges=function(t,h){var d=t.incoming.intersection(h.incoming),x=t.outgoing.intersection(h.outgoing);return this.R-d.count()-x.count()},l.prototype.getGroupHierarchy=function(t){var h=this,d=[];return m(this.roots[0],{},d),this.allEdges().forEach(function(C){var M=h.modules[C.source],k=h.modules[C.target];t.push(new o(typeof M.gid>"u"?C.source:d[M.gid],typeof k.gid>"u"?C.target:d[k.gid],C.type))}),d},l.prototype.allEdges=function(){var t=[];return l.getEdges(this.roots[0],t),t},l.getEdges=function(t,h){t.forAll(function(d){d.getEdges(h),l.getEdges(d.children,h)})},l}();function m(l,t,h){l.forAll(function(d){if(d.isLeaf())t.leaves||(t.leaves=[]),t.leaves.push(d.id);else{var x=t;if(d.gid=h.length,!d.isIsland()||d.isPredefined()){if(x={id:d.gid},d.isPredefined())for(var w in d.definition)x[w]=d.definition[w];t.groups||(t.groups=[]),t.groups.push(d.gid),h.push(x)}m(d.children,x,h)}})}_.Configuration=s;var p=function(){function l(t,h,d,x,w){void 0===h&&(h=new f),void 0===d&&(d=new f),void 0===x&&(x=new c),this.id=t,this.outgoing=h,this.incoming=d,this.children=x,this.definition=w}return l.prototype.getEdges=function(t){var h=this;this.outgoing.forAll(function(d,x){d.forAll(function(w){t.push(new o(h.id,w.id,x))})})},l.prototype.isLeaf=function(){return 0===this.children.count()},l.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},l.prototype.isPredefined=function(){return typeof this.definition<"u"},l}();function g(l,t){var h={};for(var d in l)d in t&&(h[d]=l[d]);return h}_.Module=p;var c=function(){function l(){this.table={}}return l.prototype.count=function(){return Object.keys(this.table).length},l.prototype.intersection=function(t){var h=new l;return h.table=g(this.table,t.table),h},l.prototype.intersectionCount=function(t){return this.intersection(t).count()},l.prototype.contains=function(t){return t in this.table},l.prototype.add=function(t){this.table[t.id]=t},l.prototype.remove=function(t){delete this.table[t.id]},l.prototype.forAll=function(t){for(var h in this.table)t(this.table[h])},l.prototype.modules=function(){var t=[];return this.forAll(function(h){h.isPredefined()||t.push(h)}),t},l}();_.ModuleSet=c;var f=function(){function l(){this.sets={},this.n=0}return l.prototype.count=function(){return this.n},l.prototype.contains=function(t){var h=!1;return this.forAllModules(function(d){!h&&d.id==t&&(h=!0)}),h},l.prototype.add=function(t,h){(t in this.sets?this.sets[t]:this.sets[t]=new c).add(h),++this.n},l.prototype.remove=function(t,h){var d=this.sets[t];d.remove(h),0===d.count()&&delete this.sets[t],--this.n},l.prototype.forAll=function(t){for(var h in this.sets)t(this.sets[h],Number(h))},l.prototype.forAllModules=function(t){this.forAll(function(h,d){return h.forAll(t)})},l.prototype.intersection=function(t){var h=new l;return this.forAll(function(d,x){if(x in t.sets){var w=d.intersection(t.sets[x]),C=w.count();C>0&&(h.sets[x]=w,h.n+=C)}}),h},l}();_.LinkSets=f,_.getGroups=function a(l,t,h,d){for(var x=l.length,w=new s(x,t,h,d);w.greedyMerge(););var C=[],M=w.getGroupHierarchy(C);return C.forEach(function(k){var I=function(A){var P=k[A];"number"==typeof P&&(k[A]=l[P])};I("source"),I("target")}),{groups:M,powerEdges:C}}},8866:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function(){function m(p){this.elem=p,this.subheaps=[]}return m.prototype.toString=function(p){for(var g="",c=!1,f=0;f<this.subheaps.length;++f){var i=this.subheaps[f];i.elem?(c&&(g+=","),g+=i.toString(p),c=!0):c=!1}return""!==g&&(g="("+g+")"),(this.elem?p(this.elem):"")+g},m.prototype.forEach=function(p){this.empty()||(p(this.elem,this),this.subheaps.forEach(function(g){return g.forEach(p)}))},m.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(p,g){return p+g.count()},0)},m.prototype.min=function(){return this.elem},m.prototype.empty=function(){return null==this.elem},m.prototype.contains=function(p){if(this===p)return!0;for(var g=0;g<this.subheaps.length;g++)if(this.subheaps[g].contains(p))return!0;return!1},m.prototype.isHeap=function(p){var g=this;return this.subheaps.every(function(c){return p(g.elem,c.elem)&&c.isHeap(p)})},m.prototype.insert=function(p,g){return this.merge(new m(p),g)},m.prototype.merge=function(p,g){return this.empty()?p:p.empty()?this:g(this.elem,p.elem)?(this.subheaps.push(p),this):(p.subheaps.push(this),p)},m.prototype.removeMin=function(p){return this.empty()?null:this.mergePairs(p)},m.prototype.mergePairs=function(p){if(0==this.subheaps.length)return new m(null);if(1==this.subheaps.length)return this.subheaps[0];var g=this.subheaps.pop().merge(this.subheaps.pop(),p),c=this.mergePairs(p);return g.merge(c,p)},m.prototype.decreaseKey=function(p,g,c,f){var i=p.removeMin(f);p.elem=i.elem,p.subheaps=i.subheaps,null!==c&&null!==i.elem&&c(p.elem,p);var a=new m(g);return null!==c&&c(g,a),this.merge(a,f)},m}();_.PairingHeap=o;var s=function(){function m(p){this.lessThan=p}return m.prototype.top=function(){return this.empty()?null:this.root.elem},m.prototype.push=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];for(var c,i,f=0;i=p[f];++f)c=new o(i),this.root=this.empty()?c:this.root.merge(c,this.lessThan);return c},m.prototype.empty=function(){return!this.root||!this.root.elem},m.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},m.prototype.forEach=function(p){this.root.forEach(p)},m.prototype.pop=function(){if(this.empty())return null;var p=this.root.min();return this.root=this.root.removeMin(this.lessThan),p},m.prototype.reduceKey=function(p,g,c){void 0===c&&(c=null),this.root=this.root.decreaseKey(p,g,c,this.lessThan)},m.prototype.toString=function(p){return this.root.toString(p)},m.prototype.count=function(){return this.root.count()},m}();_.PriorityQueue=s},4655:function(y,_){"use strict";var c,o=this&&this.__extends||(c=function(f,i){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(f,i)},function(f,i){function a(){this.constructor=f}c(f,i),f.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0});var s=function(){function c(){this.findIter=function(f){for(var i=this._root,a=this.iterator();null!==i;){var l=this._comparator(f,i.data);if(0===l)return a._cursor=i,a;a._ancestors.push(i),i=i.get_child(l>0)}return null}}return c.prototype.clear=function(){this._root=null,this.size=0},c.prototype.find=function(f){for(var i=this._root;null!==i;){var a=this._comparator(f,i.data);if(0===a)return i.data;i=i.get_child(a>0)}return null},c.prototype.lowerBound=function(f){return this._bound(f,this._comparator)},c.prototype.upperBound=function(f){var i=this._comparator;return this._bound(f,function a(l,t){return i(t,l)})},c.prototype.min=function(){var f=this._root;if(null===f)return null;for(;null!==f.left;)f=f.left;return f.data},c.prototype.max=function(){var f=this._root;if(null===f)return null;for(;null!==f.right;)f=f.right;return f.data},c.prototype.iterator=function(){return new m(this)},c.prototype.each=function(f){for(var a,i=this.iterator();null!==(a=i.next());)f(a)},c.prototype.reach=function(f){for(var a,i=this.iterator();null!==(a=i.prev());)f(a)},c.prototype._bound=function(f,i){for(var a=this._root,l=this.iterator();null!==a;){var t=this._comparator(f,a.data);if(0===t)return l._cursor=a,l;l._ancestors.push(a),a=a.get_child(t>0)}for(var h=l._ancestors.length-1;h>=0;--h)if(i(f,(a=l._ancestors[h]).data)>0)return l._cursor=a,l._ancestors.length=h,l;return l._ancestors.length=0,l},c}();_.TreeBase=s;var m=function(){function c(f){this._tree=f,this._ancestors=[],this._cursor=null}return c.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},c.prototype.next=function(){if(null===this._cursor){var f=this._tree._root;null!==f&&this._minNode(f)}else if(null===this._cursor.right){var i;do{if(i=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===i)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},c.prototype.prev=function(){if(null===this._cursor){var f=this._tree._root;null!==f&&this._maxNode(f)}else if(null===this._cursor.left){var i;do{if(i=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===i)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},c.prototype._minNode=function(f){for(;null!==f.left;)this._ancestors.push(f),f=f.left;this._cursor=f},c.prototype._maxNode=function(f){for(;null!==f.right;)this._ancestors.push(f),f=f.right;this._cursor=f},c}();_.Iterator=m;var p=function(){function c(f){this.data=f,this.left=null,this.right=null,this.red=!0}return c.prototype.get_child=function(f){return f?this.right:this.left},c.prototype.set_child=function(f,i){f?this.right=i:this.left=i},c}(),g=function(c){function f(i){var a=c.call(this)||this;return a._root=null,a._comparator=i,a.size=0,a}return o(f,c),f.prototype.insert=function(i){var a=!1;if(null===this._root)this._root=new p(i),a=!0,this.size++;else{var l=new p(void 0),t=!1,h=!1,d=null,x=l,w=null,C=this._root;for(x.right=this._root;;){if(null===C?(C=new p(i),w.set_child(t,C),a=!0,this.size++):f.is_red(C.left)&&f.is_red(C.right)&&(C.red=!0,C.left.red=!1,C.right.red=!1),f.is_red(C)&&f.is_red(w)){var M=x.right===d;C===w.get_child(h)?x.set_child(M,f.single_rotate(d,!h)):x.set_child(M,f.double_rotate(d,!h))}var k=this._comparator(C.data,i);if(0===k)break;h=t,t=k<0,null!==d&&(x=d),d=w,w=C,C=C.get_child(t)}this._root=l.right}return this._root.red=!1,a},f.prototype.remove=function(i){if(null===this._root)return!1;var a=new p(void 0),l=a;l.right=this._root;for(var t=null,h=null,d=null,x=!0;null!==l.get_child(x);){var w=x;h=t,t=l,l=l.get_child(x);var C=this._comparator(i,l.data);if(x=C>0,0===C&&(d=l),!f.is_red(l)&&!f.is_red(l.get_child(x)))if(f.is_red(l.get_child(!x))){var M=f.single_rotate(l,x);t.set_child(w,M),t=M}else if(!f.is_red(l.get_child(!x))){var k=t.get_child(!w);if(null!==k)if(f.is_red(k.get_child(!w))||f.is_red(k.get_child(w))){var I=h.right===t;f.is_red(k.get_child(w))?h.set_child(I,f.double_rotate(t,w)):f.is_red(k.get_child(!w))&&h.set_child(I,f.single_rotate(t,w));var A=h.get_child(I);A.red=!0,l.red=!0,A.left.red=!1,A.right.red=!1}else t.red=!1,k.red=!0,l.red=!0}}return null!==d&&(d.data=l.data,t.set_child(t.right===l,l.get_child(null===l.left)),this.size--),this._root=a.right,null!==this._root&&(this._root.red=!1),null!==d},f.is_red=function(i){return null!==i&&i.red},f.single_rotate=function(i,a){var l=i.get_child(!a);return i.set_child(!a,l.get_child(a)),l.set_child(a,i),i.red=!0,l.red=!1,l},f.double_rotate=function(i,a){return i.set_child(!a,f.single_rotate(i.get_child(!a),!a)),f.single_rotate(i,a)},f}(s);_.RBTree=g},4068:function(y,_,o){"use strict";var N,s=this&&this.__extends||(N=function(O,L){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,G){F.__proto__=G}||function(F,G){for(var z in G)G.hasOwnProperty(z)&&(F[z]=G[z])})(O,L)},function(O,L){function F(){this.constructor=O}N(O,L),O.prototype=null===L?Object.create(L):(F.prototype=L.prototype,new F)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(8237),p=o(4655);function g(N){return N.bounds=typeof N.leaves<"u"?N.leaves.reduce(function(O,L){return L.bounds.union(O)},c.empty()):c.empty(),typeof N.groups<"u"&&(N.bounds=N.groups.reduce(function(O,L){return g(L).union(O)},N.bounds)),N.bounds=N.bounds.inflate(N.padding),N.bounds}_.computeGroupBounds=g;var c=function(){function N(O,L,F,G){this.x=O,this.X=L,this.y=F,this.Y=G}return N.empty=function(){return new N(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},N.prototype.cx=function(){return(this.x+this.X)/2},N.prototype.cy=function(){return(this.y+this.Y)/2},N.prototype.overlapX=function(O){var L=this.cx(),F=O.cx();return L<=F&&O.x<this.X?this.X-O.x:F<=L&&this.x<O.X?O.X-this.x:0},N.prototype.overlapY=function(O){var L=this.cy(),F=O.cy();return L<=F&&O.y<this.Y?this.Y-O.y:F<=L&&this.y<O.Y?O.Y-this.y:0},N.prototype.setXCentre=function(O){var L=O-this.cx();this.x+=L,this.X+=L},N.prototype.setYCentre=function(O){var L=O-this.cy();this.y+=L,this.Y+=L},N.prototype.width=function(){return this.X-this.x},N.prototype.height=function(){return this.Y-this.y},N.prototype.union=function(O){return new N(Math.min(this.x,O.x),Math.max(this.X,O.X),Math.min(this.y,O.y),Math.max(this.Y,O.Y))},N.prototype.lineIntersections=function(O,L,F,G){for(var z=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],K=[],B=0;B<4;++B){var Z=N.lineIntersection(O,L,F,G,z[B][0],z[B][1],z[B][2],z[B][3]);null!==Z&&K.push({x:Z.x,y:Z.y})}return K},N.prototype.rayIntersection=function(O,L){var F=this.lineIntersections(this.cx(),this.cy(),O,L);return F.length>0?F[0]:null},N.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},N.lineIntersection=function(O,L,F,G,z,K,B,Z){var X=F-O,W=B-z,it=G-L,tt=Z-K,ut=tt*X-W*it;if(0==ut)return null;var ct=O-z,xt=L-K,Q=(W*xt-tt*ct)/ut,lt=(X*xt-it*ct)/ut;return Q>=0&&Q<=1&&lt>=0&&lt<=1?{x:O+Q*X,y:L+Q*it}:null},N.prototype.inflate=function(O){return new N(this.x-O,this.X+O,this.y-O,this.Y+O)},N}();_.Rectangle=c,_.makeEdgeBetween=function f(N,O,L){var F=N.rayIntersection(O.cx(),O.cy())||{x:N.cx(),y:N.cy()},G=O.rayIntersection(N.cx(),N.cy())||{x:O.cx(),y:O.cy()},z=G.x-F.x,K=G.y-F.y,B=Math.sqrt(z*z+K*K),Z=B-L;return{sourceIntersection:F,targetIntersection:G,arrowStart:{x:F.x+Z*z/B,y:F.y+Z*K/B}}},_.makeEdgeTo=function i(N,O,L){var F=O.rayIntersection(N.x,N.y);F||(F={x:O.cx(),y:O.cy()});var G=F.x-N.x,z=F.y-N.y,K=Math.sqrt(G*G+z*z);return{x:F.x-L*G/K,y:F.y-L*z/K}};var a=function N(O,L,F){this.v=O,this.r=L,this.pos=F,this.prev=h(),this.next=h()},l=function N(O,L,F){this.isOpen=O,this.v=L,this.pos=F};function t(N,O){return N.pos>O.pos?1:N.pos<O.pos||N.isOpen?-1:O.isOpen?1:0}function h(){return new p.RBTree(function(N,O){return N.pos-O.pos})}var d={getCentre:function(N){return N.cx()},getOpen:function(N){return N.y},getClose:function(N){return N.Y},getSize:function(N){return N.width()},makeRect:function(N,O,L,F){return new c(L-F/2,L+F/2,N,O)},findNeighbours:function M(N,O){var L=function(F,G){for(var K,z=O.findIter(N);null!==(K=z[F]());){var B=K.r.overlapX(N.r);if((B<=0||B<=K.r.overlapY(N.r))&&(N[F].insert(K),K[G].insert(N)),B<=0)break}};L("next","prev"),L("prev","next")}},x={getCentre:function(N){return N.cy()},getOpen:function(N){return N.x},getClose:function(N){return N.X},getSize:function(N){return N.height()},makeRect:function(N,O,L,F){return new c(N,O,L-F/2,L+F/2)},findNeighbours:function k(N,O){var L=function(F,G){var z=O.findIter(N)[F]();null!==z&&z.r.overlapX(N.r)>0&&(N[F].insert(z),z[G].insert(N))};L("next","prev"),L("prev","next")}};function w(N,O,L,F){void 0===F&&(F=!1);var G=N.padding,z=typeof N.groups<"u"?N.groups.length:0,K=typeof N.leaves<"u"?N.leaves.length:0,B=z?N.groups.reduce(function(dt,_t){return dt.concat(w(_t,O,L,!0))},[]):[],Z=(F?2:0)+K+z,X=new Array(Z),W=new Array(Z),it=0,tt=function(dt,_t){W[it]=dt,X[it++]=_t};if(F){var ut=N.bounds,ct=O.getCentre(ut),xt=O.getSize(ut)/2,J=O.getOpen(ut),Q=O.getClose(ut),rt=ct-xt+G/2,lt=ct+xt-G/2;N.minVar.desiredPosition=rt,tt(O.makeRect(J,Q,rt,G),N.minVar),N.maxVar.desiredPosition=lt,tt(O.makeRect(J,Q,lt,G),N.maxVar)}K&&N.leaves.forEach(function(dt){return tt(dt.bounds,dt.variable)}),z&&N.groups.forEach(function(dt){var _t=dt.bounds;tt(O.makeRect(O.getOpen(_t),O.getClose(_t),O.getCentre(_t),O.getSize(_t)),dt.minVar)});var mt=C(W,X,O,L);return z&&(X.forEach(function(dt){dt.cOut=[],dt.cIn=[]}),mt.forEach(function(dt){dt.left.cOut.push(dt),dt.right.cIn.push(dt)}),N.groups.forEach(function(dt){var _t=(dt.padding-O.getSize(dt.bounds))/2;dt.minVar.cIn.forEach(function(bt){return bt.gap+=_t}),dt.minVar.cOut.forEach(function(bt){bt.left=dt.maxVar,bt.gap+=_t})})),B.concat(mt)}function C(N,O,L,F){var G,z=N.length,K=2*z;console.assert(O.length>=z);var B=new Array(K);for(G=0;G<z;++G){var Z=N[G],X=new a(O[G],Z,L.getCentre(Z));B[G]=new l(!0,X,L.getOpen(Z)),B[G+z]=new l(!1,X,L.getClose(Z))}B.sort(t);var W=new Array,it=h();for(G=0;G<K;++G){var tt=B[G];X=tt.v;if(tt.isOpen)it.insert(X),L.findNeighbours(X,it);else{it.remove(X);var ut=function(J,Q){var rt=(L.getSize(J.r)+L.getSize(Q.r))/2+F;W.push(new m.Constraint(J.v,Q.v,rt))},ct=function(J,Q,rt){for(var lt,mt=X[J].iterator();null!==(lt=mt[J]());)rt(lt,X),lt[Q].remove(X)};ct("prev","next",function(J,Q){return ut(J,Q)}),ct("next","prev",function(J,Q){return ut(Q,J)})}}return console.assert(0===it.size),W}function I(N,O){return C(N,O,d,1e-6)}function A(N,O){return C(N,O,x,1e-6)}function P(N){return w(N,d,1e-6)}function H(N){return w(N,x,1e-6)}_.generateXConstraints=I,_.generateYConstraints=A,_.generateXGroupConstraints=P,_.generateYGroupConstraints=H,_.removeOverlaps=function V(N){var O=N.map(function(G){return new m.Variable(G.cx())}),L=I(N,O),F=new m.Solver(O,L);F.solve(),O.forEach(function(G,z){return N[z].setXCentre(G.position())}),O=N.map(function(G){return new m.Variable(G.cy())}),L=A(N,O),(F=new m.Solver(O,L)).solve(),O.forEach(function(G,z){return N[z].setYCentre(G.position())})};var U=function(N){function O(L,F){var G=N.call(this,0,F)||this;return G.index=L,G}return s(O,N),O}(m.Variable);_.IndexedVariable=U;var Y=function(){function N(O,L,F,G,z){var K=this;if(void 0===F&&(F=null),void 0===G&&(G=null),void 0===z&&(z=!1),this.nodes=O,this.groups=L,this.rootGroup=F,this.avoidOverlaps=z,this.variables=O.map(function(Z,X){return Z.variable=new U(X,1)}),G&&this.createConstraints(G),z&&F&&typeof F.groups<"u"){O.forEach(function(Z){if(Z.width&&Z.height){var X=Z.width/2,W=Z.height/2;Z.bounds=new c(Z.x-X,Z.x+X,Z.y-W,Z.y+W)}else Z.bounds=new c(Z.x,Z.x,Z.y,Z.y)}),g(F);var B=O.length;L.forEach(function(Z){K.variables[B]=Z.minVar=new U(B++,typeof Z.stiffness<"u"?Z.stiffness:.01),K.variables[B]=Z.maxVar=new U(B++,typeof Z.stiffness<"u"?Z.stiffness:.01)})}}return N.prototype.createSeparation=function(O){return new m.Constraint(this.nodes[O.left].variable,this.nodes[O.right].variable,O.gap,typeof O.equality<"u"&&O.equality)},N.prototype.makeFeasible=function(O){var L=this;if(this.avoidOverlaps){var F="x",G="width";"x"===O.axis&&(F="y",G="height");var z=O.offsets.map(function(B){return L.nodes[B.node]}).sort(function(B,Z){return B[F]-Z[F]}),K=null;z.forEach(function(B){if(K){var Z=K[F]+K[G];Z>B[F]&&(B[F]=Z)}K=B})}},N.prototype.createAlignment=function(O){var L=this,F=this.nodes[O.offsets[0].node].variable;this.makeFeasible(O);var G="x"===O.axis?this.xConstraints:this.yConstraints;O.offsets.slice(1).forEach(function(z){var K=L.nodes[z.node].variable;G.push(new m.Constraint(F,K,z.offset,!0))})},N.prototype.createConstraints=function(O){var L=this,F=function(G){return typeof G.type>"u"||"separation"===G.type};this.xConstraints=O.filter(function(G){return"x"===G.axis&&F(G)}).map(function(G){return L.createSeparation(G)}),this.yConstraints=O.filter(function(G){return"y"===G.axis&&F(G)}).map(function(G){return L.createSeparation(G)}),O.filter(function(G){return"alignment"===G.type}).forEach(function(G){return L.createAlignment(G)})},N.prototype.setupVariablesAndBounds=function(O,L,F,G){this.nodes.forEach(function(z,K){z.fixed?(z.variable.weight=z.fixedWeight?z.fixedWeight:1e3,F[K]=G(z)):z.variable.weight=1;var B=(z.width||0)/2,Z=(z.height||0)/2,X=O[K],W=L[K];z.bounds=new c(X-B,X+B,W-Z,W+Z)})},N.prototype.xProject=function(O,L,F){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(O,L,O,F,function(G){return G.px},this.xConstraints,P,function(G){return G.bounds.setXCentre(F[G.variable.index]=G.variable.position())},function(G){var z=F[G.minVar.index]=G.minVar.position(),K=F[G.maxVar.index]=G.maxVar.position(),B=G.padding/2;G.bounds.x=z-B,G.bounds.X=K+B})},N.prototype.yProject=function(O,L,F){!this.rootGroup&&!this.yConstraints||this.project(O,L,L,F,function(G){return G.py},this.yConstraints,H,function(G){return G.bounds.setYCentre(F[G.variable.index]=G.variable.position())},function(G){var z=F[G.minVar.index]=G.minVar.position(),K=F[G.maxVar.index]=G.maxVar.position(),B=G.padding/2;G.bounds.y=z-B,G.bounds.Y=K+B})},N.prototype.projectFunctions=function(){var O=this;return[function(L,F,G){return O.xProject(L,F,G)},function(L,F,G){return O.yProject(L,F,G)}]},N.prototype.project=function(O,L,F,G,z,K,B,Z,X){this.setupVariablesAndBounds(O,L,G,z),this.rootGroup&&this.avoidOverlaps&&(g(this.rootGroup),K=K.concat(B(this.rootGroup))),this.solve(this.variables,K,F,G),this.nodes.forEach(Z),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(X),g(this.rootGroup))},N.prototype.solve=function(O,L,F,G){var z=new m.Solver(O,L);z.setStartingPositions(F),z.setDesiredPositions(G),z.solve()},N}();_.Projection=Y},3858:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(8866),m=function f(i,a){this.id=i,this.distance=a},p=function f(i){this.id=i,this.neighbours=[]},g=function f(i,a,l){this.node=i,this.prev=a,this.d=l},c=function(){function f(i,a,l,t,h){this.n=i,this.es=a,this.neighbours=new Array(this.n);for(var d=this.n;d--;)this.neighbours[d]=new p(d);for(d=this.es.length;d--;){var x=this.es[d],w=l(x),C=t(x),M=h(x);this.neighbours[w].neighbours.push(new m(C,M)),this.neighbours[C].neighbours.push(new m(w,M))}}return f.prototype.DistanceMatrix=function(){for(var i=new Array(this.n),a=0;a<this.n;++a)i[a]=this.dijkstraNeighbours(a);return i},f.prototype.DistancesFromNode=function(i){return this.dijkstraNeighbours(i)},f.prototype.PathFromNodeToNode=function(i,a){return this.dijkstraNeighbours(i,a)},f.prototype.PathFromNodeToNodeWithPrevCost=function(i,a,l){var t=new s.PriorityQueue(function(H,V){return H.d<=V.d}),h=this.neighbours[i],d=new g(h,null,0),x={};for(t.push(d);!t.empty()&&(h=(d=t.pop()).node).id!==a;)for(var w=h.neighbours.length;w--;){var C=h.neighbours[w],M=this.neighbours[C.id];if(!d.prev||M.id!==d.prev.node.id){var k=M.id+","+h.id;if(!(k in x&&x[k]<=d.d)){var I=d.prev?l(d.prev.node.id,h.id,M.id):0,A=d.d+C.distance+I;x[k]=A,t.push(new g(M,d,A))}}}for(var P=[];d.prev;)d=d.prev,P.push(d.node.id);return P},f.prototype.dijkstraNeighbours=function(i,a){void 0===a&&(a=-1);for(var l=new s.PriorityQueue(function(I,A){return I.d<=A.d}),t=this.neighbours.length,h=new Array(t);t--;){var d=this.neighbours[t];d.d=t===i?0:Number.POSITIVE_INFINITY,d.q=l.push(d)}for(;!l.empty();){var x=l.pop();if(h[x.id]=x.d,x.id===a){for(var w=[],C=x;typeof C.prev<"u";)w.push(C.prev.id),C=C.prev;return w}for(t=x.neighbours.length;t--;){var M=x.neighbours[t],k=(C=this.neighbours[M.id],x.d+M.distance);x.d!==Number.MAX_VALUE&&C.d>k&&(C.d=k,C.prev=x,l.reduceKey(C.q,C,function(A,P){return A.q=P}))}}return h},f}();_.Calculator=c},8237:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function(){function i(a){this.scale=a,this.AB=0,this.AD=0,this.A2=0}return i.prototype.addVariable=function(a){var l=this.scale/a.scale,t=a.offset/a.scale,h=a.weight;this.AB+=h*l*t,this.AD+=h*l*a.desiredPosition,this.A2+=h*l*l},i.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},i}();_.PositionStats=o;var s=function(){function i(a,l,t,h){void 0===h&&(h=!1),this.left=a,this.right=l,this.gap=t,this.equality=h,this.active=!1,this.unsatisfiable=!1,this.left=a,this.right=l,this.gap=t,this.equality=h}return i.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},i}();_.Constraint=s;var m=function(){function i(a,l,t){void 0===l&&(l=1),void 0===t&&(t=1),this.desiredPosition=a,this.weight=l,this.scale=t,this.offset=0}return i.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},i.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},i.prototype.visitNeighbours=function(a,l){var t=function(h,d){return h.active&&a!==d&&l(h,d)};this.cOut.forEach(function(h){return t(h,h.right)}),this.cIn.forEach(function(h){return t(h,h.left)})},i}();_.Variable=m;var p=function(){function i(a){this.vars=[],a.offset=0,this.ps=new o(a.scale),this.addVariable(a)}return i.prototype.addVariable=function(a){a.block=this,this.vars.push(a),this.ps.addVariable(a),this.posn=this.ps.getPosn()},i.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var a=0,l=this.vars.length;a<l;++a)this.ps.addVariable(this.vars[a]);this.posn=this.ps.getPosn()},i.prototype.compute_lm=function(a,l,t){var h=this,d=a.dfdv();return a.visitNeighbours(l,function(x,w){var C=h.compute_lm(w,a,t);w===x.right?(d+=C*x.left.scale,x.lm=C):(d+=C*x.right.scale,x.lm=-C),t(x)}),d/a.scale},i.prototype.populateSplitBlock=function(a,l){var t=this;a.visitNeighbours(l,function(h,d){d.offset=a.offset+(d===h.right?h.gap:-h.gap),t.addVariable(d),t.populateSplitBlock(d,a)})},i.prototype.traverse=function(a,l,t,h){var d=this;void 0===t&&(t=this.vars[0]),void 0===h&&(h=null),t.visitNeighbours(h,function(x,w){l.push(a(x)),d.traverse(a,l,w,t)})},i.prototype.findMinLM=function(){var a=null;return this.compute_lm(this.vars[0],null,function(l){!l.equality&&(null===a||l.lm<a.lm)&&(a=l)}),a},i.prototype.findMinLMBetween=function(a,l){this.compute_lm(a,null,function(){});var t=null;return this.findPath(a,null,l,function(h,d){!h.equality&&h.right===d&&(null===t||h.lm<t.lm)&&(t=h)}),t},i.prototype.findPath=function(a,l,t,h){var d=this,x=!1;return a.visitNeighbours(l,function(w,C){!x&&(C===t||d.findPath(C,a,t,h))&&(x=!0,h(w,C))}),x},i.prototype.isActiveDirectedPathBetween=function(a,l){if(a===l)return!0;for(var t=a.cOut.length;t--;){var h=a.cOut[t];if(h.active&&this.isActiveDirectedPathBetween(h.right,l))return!0}return!1},i.split=function(a){return a.active=!1,[i.createSplitBlock(a.left),i.createSplitBlock(a.right)]},i.createSplitBlock=function(a){var l=new i(a);return l.populateSplitBlock(a,null),l},i.prototype.splitBetween=function(a,l){var t=this.findMinLMBetween(a,l);if(null!==t){var h=i.split(t);return{constraint:t,lb:h[0],rb:h[1]}}return null},i.prototype.mergeAcross=function(a,l,t){l.active=!0;for(var h=0,d=a.vars.length;h<d;++h){var x=a.vars[h];x.offset+=t,this.addVariable(x)}this.posn=this.ps.getPosn()},i.prototype.cost=function(){for(var a=0,l=this.vars.length;l--;){var t=this.vars[l],h=t.position()-t.desiredPosition;a+=h*h*t.weight}return a},i}();_.Block=p;var g=function(){function i(a){this.vs=a;var l=a.length;for(this.list=new Array(l);l--;){var t=new p(a[l]);this.list[l]=t,t.blockInd=l}}return i.prototype.cost=function(){for(var a=0,l=this.list.length;l--;)a+=this.list[l].cost();return a},i.prototype.insert=function(a){a.blockInd=this.list.length,this.list.push(a)},i.prototype.remove=function(a){var l=this.list.length-1,t=this.list[l];this.list.length=l,a!==t&&(this.list[a.blockInd]=t,t.blockInd=a.blockInd)},i.prototype.merge=function(a){var l=a.left.block,t=a.right.block,h=a.right.offset-a.left.offset-a.gap;l.vars.length<t.vars.length?(t.mergeAcross(l,a,h),this.remove(l)):(l.mergeAcross(t,a,-h),this.remove(t))},i.prototype.forEach=function(a){this.list.forEach(a)},i.prototype.updateBlockPositions=function(){this.list.forEach(function(a){return a.updateWeightedPosition()})},i.prototype.split=function(a){var l=this;this.updateBlockPositions(),this.list.forEach(function(t){var h=t.findMinLM();null!==h&&h.lm<c.LAGRANGIAN_TOLERANCE&&(t=h.left.block,p.split(h).forEach(function(d){return l.insert(d)}),l.remove(t),a.push(h))})},i}();_.Blocks=g;var c=function(){function i(a,l){this.vs=a,this.cs=l,this.vs=a,a.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=l,l.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=l.map(function(t){return t.active=!1,t}),this.bs=null}return i.prototype.cost=function(){return this.bs.cost()},i.prototype.setStartingPositions=function(a){this.inactive=this.cs.map(function(l){return l.active=!1,l}),this.bs=new g(this.vs),this.bs.forEach(function(l,t){return l.posn=a[t]})},i.prototype.setDesiredPositions=function(a){this.vs.forEach(function(l,t){return l.desiredPosition=a[t]})},i.prototype.mostViolated=function(){for(var a=Number.MAX_VALUE,l=null,t=this.inactive,h=t.length,d=h,x=0;x<h;++x){var w=t[x];if(!w.unsatisfiable){var C=w.slack();if((w.equality||C<a)&&(a=C,l=w,d=x,w.equality))break}}return d!==h&&(a<i.ZERO_UPPERBOUND&&!l.active||l.equality)&&(t[d]=t[h-1],t.length=h-1),l},i.prototype.satisfy=function(){null==this.bs&&(this.bs=new g(this.vs)),this.bs.split(this.inactive);for(var a=null;(a=this.mostViolated())&&(a.equality||a.slack()<i.ZERO_UPPERBOUND&&!a.active);){var l=a.left.block;if(l!==a.right.block)this.bs.merge(a);else{if(l.isActiveDirectedPathBetween(a.right,a.left)){a.unsatisfiable=!0;continue}var h=l.splitBetween(a.left,a.right);if(null===h){a.unsatisfiable=!0;continue}this.bs.insert(h.lb),this.bs.insert(h.rb),this.bs.remove(l),this.inactive.push(h.constraint),a.slack()>=0?this.inactive.push(a):this.bs.merge(a)}}},i.prototype.solve=function(){this.satisfy();for(var a=Number.MAX_VALUE,l=this.bs.cost();Math.abs(a-l)>1e-4;)this.satisfy(),a=l,l=this.bs.cost();return l},i.LAGRANGIAN_TOLERANCE=-1e-4,i.ZERO_UPPERBOUND=-1e-10,i}();_.Solver=c,_.removeOverlapInOneDimension=function f(i,a,l){for(var t=i.map(function(U){return new m(U.desiredCenter)}),h=[],d=i.length,x=0;x<d-1;x++){var w=i[x],C=i[x+1];h.push(new s(t[x],t[x+1],(w.size+C.size)/2))}var M=t[0],k=t[d-1],I=i[0].size/2,A=i[d-1].size/2,P=null,H=null;return a&&(P=new m(a,1e3*M.weight),t.push(P),h.push(new s(P,M,I))),l&&(H=new m(l,1e3*k.weight),t.push(H),h.push(new s(k,H,A))),new c(t,h).solve(),{newCenters:t.slice(0,i.length).map(function(U){return U.position()}),lowerBound:P?P.position():M.position()-I,upperBound:H?H.position():k.position()+A}}}}]);