(self.webpackChunkangular_entropy=self.webpackChunkangular_entropy||[]).push([[11],{54696:($,K,e)=>{"use strict";e.d(K,{S:()=>u});var M=e(41571),I=e(54415),t=e(36895);function T(a,r){1&a&&(M.TgZ(0,"li",8)(1,"a",9),M._UZ(2,"i",10),M.qZA()())}function n(a,r){1&a&&(M.TgZ(0,"li",8)(1,"a",11),M._UZ(2,"i",12),M.qZA()())}const i=function(){return["/dashboard"]};class u{constructor(r){this._router=r}ngOnInit(){let r=JSON.parse(localStorage.getItem("currentUserData"));r||this._router.navigate(["/users/auth"]),this.user=r}}u.\u0275fac=function(r){return new(r||u)(M.Y36(I.F0))},u.\u0275cmp=M.Xpm({type:u,selectors:[["app-navbar"]],decls:11,vars:6,consts:[[1,"navbar","navbar-expand","bg-white","border-1","border-bottom","p-0"],["src","/assets/images/logo-nav.png","alt","Logo",1,"nav-logo","ms-4","pe-clickable",2,"height","50px",3,"routerLink"],[1,"navbar-nav","me-auto","h-100"],[1,"nav-item","active"],[1,"ms-3","text-black","fs-6","fw-light","text-decoration-underline",3,"routerLink"],[1,"navbar-nav"],[1,"nav-item","separator","mt-2"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLink","/profile",1,"nav-link"],[1,"fa-regular","fa-user","navbar-ico"],["routerLink","/users/logout",1,"nav-link"],[1,"fa-regular","fa-circle-right","navbar-ico"]],template:function(r,o){1&r&&(M.TgZ(0,"nav",0),M._UZ(1,"img",1),M.TgZ(2,"ul",2)(3,"li",3)(4,"a",4),M._uU(5,"Dashboard"),M.qZA()()(),M.TgZ(6,"ul",5),M._UZ(7,"li",6),M.qZA(),M.TgZ(8,"ul",5),M.YNc(9,T,3,0,"li",7),M.YNc(10,n,3,0,"li",7),M.qZA()()),2&r&&(M.xp6(1),M.Q6J("routerLink",M.DdM(4,i)),M.xp6(3),M.Q6J("routerLink",M.DdM(5,i)),M.xp6(5),M.Q6J("ngIf",o.user),M.xp6(1),M.Q6J("ngIf",o.user))},dependencies:[t.O5,I.rH],encapsulation:2})},16:($,K,e)=>{"use strict";function M(It,$t){return It<$t?-1:It>$t?1:It>=$t?0:NaN}e.r(K),e.d(K,{sankeyCenter:()=>ue,sankeyCircular:()=>Ne,sankeyJustify:()=>J,sankeyLeft:()=>ae,sankeyRight:()=>X});var T=function I(It){return 1===It.length&&(It=function t(It){return function($t,kr){return M(It($t),kr)}}(It)),{left:function($t,kr,lr,rt){for(null==lr&&(lr=0),null==rt&&(rt=$t.length);lr<rt;){var $e=lr+rt>>>1;It($t[$e],kr)<0?lr=$e+1:rt=$e}return lr},right:function($t,kr,lr,rt){for(null==lr&&(lr=0),null==rt&&(rt=$t.length);lr<rt;){var $e=lr+rt>>>1;It($t[$e],kr)>0?rt=$e:lr=$e+1}return lr}}}(M);T.right,T.left;var a=Array.prototype;a.slice,a.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function g(It,$t){var rt,$e,kr=It.length,lr=-1;if(null==$t){for(;++lr<kr;)if(null!=(rt=It[lr])&&rt>=rt)for($e=rt;++lr<kr;)null!=(rt=It[lr])&&rt>$e&&($e=rt)}else for(;++lr<kr;)if(null!=(rt=$t(It[lr],lr,It))&&rt>=rt)for($e=rt;++lr<kr;)null!=(rt=$t(It[lr],lr,It))&&rt>$e&&($e=rt);return $e}function m(It){return null===It?NaN:+It}function d(It,$t){var $e,kr=It.length,lr=kr,rt=-1,ht=0;if(null==$t)for(;++rt<kr;)isNaN($e=m(It[rt]))?--lr:ht+=$e;else for(;++rt<kr;)isNaN($e=m($t(It[rt],rt,It)))?--lr:ht+=$e;if(lr)return ht/lr}function A(It,$t){var rt,$e,kr=It.length,lr=-1;if(null==$t){for(;++lr<kr;)if(null!=(rt=It[lr])&&rt>=rt)for($e=rt;++lr<kr;)null!=(rt=It[lr])&&$e>rt&&($e=rt)}else for(;++lr<kr;)if(null!=(rt=$t(It[lr],lr,It))&&rt>=rt)for($e=rt;++lr<kr;)null!=(rt=$t(It[lr],lr,It))&&$e>rt&&($e=rt);return $e}function b(It,$t){var rt,kr=It.length,lr=-1,$e=0;if(null==$t)for(;++lr<kr;)(rt=+It[lr])&&($e+=rt);else for(;++lr<kr;)(rt=+$t(It[lr],lr,It))&&($e+=rt);return $e}var c=e(88097),S=Math.PI,w=2*S,E=1e-6,P=w-E;function R(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function F(){return new R}R.prototype=F.prototype={constructor:R,moveTo:function(It,$t){this._+="M"+(this._x0=this._x1=+It)+","+(this._y0=this._y1=+$t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(It,$t){this._+="L"+(this._x1=+It)+","+(this._y1=+$t)},quadraticCurveTo:function(It,$t,kr,lr){this._+="Q"+ +It+","+ +$t+","+(this._x1=+kr)+","+(this._y1=+lr)},bezierCurveTo:function(It,$t,kr,lr,rt,$e){this._+="C"+ +It+","+ +$t+","+ +kr+","+ +lr+","+(this._x1=+rt)+","+(this._y1=+$e)},arcTo:function(It,$t,kr,lr,rt){It=+It,$t=+$t,kr=+kr,lr=+lr,rt=+rt;var $e=this._x1,ht=this._y1,gt=kr-It,ft=lr-$t,Ct=$e-It,sr=ht-$t,tr=Ct*Ct+sr*sr;if(rt<0)throw new Error("negative radius: "+rt);if(null===this._x1)this._+="M"+(this._x1=It)+","+(this._y1=$t);else if(tr>E)if(Math.abs(sr*gt-ft*Ct)>E&&rt){var Cr=kr-$e,Hr=lr-ht,zr=gt*gt+ft*ft,Wr=Cr*Cr+Hr*Hr,Ke=Math.sqrt(zr),We=Math.sqrt(tr),Jt=rt*Math.tan((S-Math.acos((zr+tr-Wr)/(2*Ke*We)))/2),Gt=Jt/We,hr=Jt/Ke;Math.abs(Gt-1)>E&&(this._+="L"+(It+Gt*Ct)+","+($t+Gt*sr)),this._+="A"+rt+","+rt+",0,0,"+ +(sr*Cr>Ct*Hr)+","+(this._x1=It+hr*gt)+","+(this._y1=$t+hr*ft)}else this._+="L"+(this._x1=It)+","+(this._y1=$t)},arc:function(It,$t,kr,lr,rt,$e){It=+It,$t=+$t,$e=!!$e;var ht=(kr=+kr)*Math.cos(lr),gt=kr*Math.sin(lr),ft=It+ht,Ct=$t+gt,sr=1^$e,tr=$e?lr-rt:rt-lr;if(kr<0)throw new Error("negative radius: "+kr);null===this._x1?this._+="M"+ft+","+Ct:(Math.abs(this._x1-ft)>E||Math.abs(this._y1-Ct)>E)&&(this._+="L"+ft+","+Ct),kr&&(tr<0&&(tr=tr%w+w),tr>P?this._+="A"+kr+","+kr+",0,1,"+sr+","+(It-ht)+","+($t-gt)+"A"+kr+","+kr+",0,1,"+sr+","+(this._x1=ft)+","+(this._y1=Ct):tr>E&&(this._+="A"+kr+","+kr+",0,"+ +(tr>=S)+","+sr+","+(this._x1=It+kr*Math.cos(rt))+","+(this._y1=$t+kr*Math.sin(rt))))},rect:function(It,$t,kr,lr){this._+="M"+(this._x0=this._x1=+It)+","+(this._y0=this._y1=+$t)+"h"+ +kr+"v"+ +lr+"h"+-kr+"Z"},toString:function(){return this._}};const _=F;var z=Array.prototype.slice;function D(It){return function(){return It}}function k(It){return It[0]}function O(It){return It[1]}function U(It){return It.source}function H(It){return It.target}function j(It){var $t=U,kr=H,lr=k,rt=O,$e=null;function ht(){var gt,ft=z.call(arguments),Ct=$t.apply(this,ft),sr=kr.apply(this,ft);if($e||($e=gt=_()),It($e,+lr.apply(this,(ft[0]=Ct,ft)),+rt.apply(this,ft),+lr.apply(this,(ft[0]=sr,ft)),+rt.apply(this,ft)),gt)return $e=null,gt+""||null}return ht.source=function(gt){return arguments.length?($t=gt,ht):$t},ht.target=function(gt){return arguments.length?(kr=gt,ht):kr},ht.x=function(gt){return arguments.length?(lr="function"==typeof gt?gt:D(+gt),ht):lr},ht.y=function(gt){return arguments.length?(rt="function"==typeof gt?gt:D(+gt),ht):rt},ht.context=function(gt){return arguments.length?($e=gt??null,ht):$e},ht}function ee(It,$t,kr,lr,rt){It.moveTo($t,kr),It.bezierCurveTo($t=($t+lr)/2,kr,$t,rt,lr,rt)}var ie=e(93675),V=e.n(ie);function Y(It){return It.target.depth}function ae(It){return It.depth}function X(It,$t){return $t-1-It.height}function J(It,$t){return It.sourceLinks.length?It.depth:$t-1}function ue(It){return It.targetLinks.length?It.depth:It.sourceLinks.length?A(It.sourceLinks,Y)-1:0}function re(It){return function(){return It}}var ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(It){return typeof It}:function(It){return It&&"function"==typeof Symbol&&It.constructor===Symbol&&It!==Symbol.prototype?"symbol":typeof It};function se(It,$t){return be(It.source,$t.source)||It.index-$t.index}function de(It,$t){return be(It.target,$t.target)||It.index-$t.index}function be(It,$t){return It.partOfCycle===$t.partOfCycle?It.y0-$t.y0:"top"===It.circularLinkType||"bottom"===$t.circularLinkType?-1:1}function De(It){return It.value}function _e(It){return(It.y0+It.y1)/2}function Ce(It){return _e(It.source)}function Le(It){return _e(It.target)}function Fe(It){return It.index}function ke(It){return It.nodes}function ze(It){return It.links}function Pe(It,$t){var kr=It.get($t);if(!kr)throw new Error("missing: "+$t);return kr}function Ie(It,$t){return $t(It)}function Ne(){var $e,Cr,It=0,$t=0,kr=1,lr=1,rt=24,ht=Fe,gt=J,ft=ke,Ct=ze,sr=32,tr=2,Hr=null;function zr(){var Ut={nodes:ft.apply(null,arguments),links:Ct.apply(null,arguments)};Wr(Ut),nt(Ut,ht,Hr),Ke(Ut),Gt(Ut),ct(Ut,ht),hr(Ut,sr,ht),br(Ut);for(var Kt=4,wt=0;wt<Kt;wt++)Ft(Ut,lr,ht),bt(Ut,lr,ht),Ze(Ut,$t,lr,ht),Ft(Ut,lr,ht),bt(Ut,lr,ht);return Kr(Ut,$t,lr),Xt(Ut,tr,lr,ht),Ut}function Wr(Ut){Ut.nodes.forEach(function(wt,xr){wt.index=xr,wt.sourceLinks=[],wt.targetLinks=[]});var Kt=(0,c.UI)(Ut.nodes,ht);return Ut.links.forEach(function(wt,xr){wt.index=xr;var Ir=wt.source,Ur=wt.target;"object"!==(typeof Ir>"u"?"undefined":ne(Ir))&&(Ir=wt.source=Pe(Kt,Ir)),"object"!==(typeof Ur>"u"?"undefined":ne(Ur))&&(Ur=wt.target=Pe(Kt,Ur)),Ir.sourceLinks.push(wt),Ur.targetLinks.push(wt)}),Ut}function Ke(Ut){Ut.nodes.forEach(function(Kt){Kt.partOfCycle=!1,Kt.value=Math.max(b(Kt.sourceLinks,De),b(Kt.targetLinks,De)),Kt.sourceLinks.forEach(function(wt){wt.circular&&(Kt.partOfCycle=!0,Kt.circularLinkType=wt.circularLinkType)}),Kt.targetLinks.forEach(function(wt){wt.circular&&(Kt.partOfCycle=!0,Kt.circularLinkType=wt.circularLinkType)})})}function Gt(Ut){var Kt,wt,xr;for(Kt=Ut.nodes,wt=[],xr=0;Kt.length;++xr,Kt=wt,wt=[])Kt.forEach(function(Ir){Ir.depth=xr,Ir.sourceLinks.forEach(function(Ur){wt.indexOf(Ur.target)<0&&!Ur.circular&&wt.push(Ur.target)})});for(Kt=Ut.nodes,wt=[],xr=0;Kt.length;++xr,Kt=wt,wt=[])Kt.forEach(function(Ir){Ir.height=xr,Ir.targetLinks.forEach(function(Ur){wt.indexOf(Ur.source)<0&&!Ur.circular&&wt.push(Ur.source)})});Ut.nodes.forEach(function(Ir){Ir.column=Math.floor(gt.call(null,Ir,xr))})}function hr(Ut,Kt,wt){var xr=(0,c.b1)().key(function(hn){return hn.column}).sortKeys(M).entries(Ut.nodes).map(function(hn){return hn.values});(function qt(hn){if(Cr){var An=1/0;xr.forEach(function(Yr){var vr=lr*Cr/(Yr.length+1);An=vr<An?vr:An}),$e=An}var Sn=A(xr,function(Yr){return(lr-$t-(Yr.length-1)*$e)/b(Yr,De)});Sn*=.3,Ut.links.forEach(function(Yr){Yr.width=Yr.value*Sn});var sa=function We(Ut){var Kt=0,wt=0,xr=0,Ir=0,Ur=g(Ut.nodes,function(qt){return qt.column});return Ut.links.forEach(function(qt){qt.circular&&("top"==qt.circularLinkType?Kt+=qt.width:wt+=qt.width,0==qt.target.column&&(Ir+=qt.width),qt.source.column==Ur&&(xr+=qt.width))}),{top:Kt=Kt>0?Kt+25+10:Kt,bottom:wt=wt>0?wt+25+10:wt,left:Ir=Ir>0?Ir+25+10:Ir,right:xr=xr>0?xr+25+10:xr}}(Ut),Rn=function Jt(Ut,Kt){var wt=g(Ut.nodes,function(hn){return hn.column}),xr=kr-It,Ir=lr-$t,on=xr/(xr+Kt.right+Kt.left),an=Ir/(Ir+Kt.top+Kt.bottom);return It=It*on+Kt.left,kr=0==Kt.right?kr:kr*on,$t=$t*an+Kt.top,lr*=an,Ut.nodes.forEach(function(hn){hn.x0=It+hn.column*((kr-It-rt)/wt),hn.x1=hn.x0+rt}),an}(Ut,sa);Sn*=Rn,Ut.links.forEach(function(Yr){Yr.width=Yr.value*Sn}),xr.forEach(function(Yr){var vr=Yr.length;Yr.forEach(function(nn,Or){nn.depth==xr.length-1&&1==vr||0==nn.depth&&1==vr?(nn.y0=lr/2-nn.value*Sn,nn.y1=nn.y0+nn.value*Sn):nn.partOfCycle?0==Rt(nn,hn)?(nn.y0=lr/2+Or,nn.y1=nn.y0+nn.value*Sn):"top"==nn.circularLinkType?(nn.y0=$t+Or,nn.y1=nn.y0+nn.value*Sn):(nn.y0=lr-nn.value*Sn-Or,nn.y1=nn.y0+nn.value*Sn):0==sa.top||0==sa.bottom?(nn.y0=(lr-$t)/vr*Or,nn.y1=nn.y0+nn.value*Sn):(nn.y0=(lr-$t)/2-vr/2+Or,nn.y1=nn.y0+nn.value*Sn)})})})(wt),an();for(var Ir=1,Ur=Kt;Ur>0;--Ur)on(Ir*=.99,wt),an();function on(hn,An){var Sn=xr.length;xr.forEach(function(sa){var Rn=sa.length,Yr=sa[0].depth;sa.forEach(function(vr){var nn;if((vr.sourceLinks.length||vr.targetLinks.length)&&!(vr.partOfCycle&&Rt(vr,An)>0))if(0==Yr&&1==Rn)nn=vr.y1-vr.y0,vr.y0=lr/2-nn/2,vr.y1=lr/2+nn/2;else if(Yr==Sn-1&&1==Rn)nn=vr.y1-vr.y0,vr.y0=lr/2-nn/2,vr.y1=lr/2+nn/2;else{var Xn=d(vr.sourceLinks,Le),Vr=d(vr.targetLinks,Ce),wn=((Xn&&Vr?(Xn+Vr)/2:Xn||Vr)-_e(vr))*hn;vr.y0+=wn,vr.y1+=wn}})})}function an(){xr.forEach(function(hn){var An,Sn,Yr,sa=$t,Rn=hn.length;for(hn.sort(be),Yr=0;Yr<Rn;++Yr)(Sn=sa-(An=hn[Yr]).y0)>0&&(An.y0+=Sn,An.y1+=Sn),sa=An.y1+$e;if((Sn=sa-$e-lr)>0)for(sa=An.y0-=Sn,An.y1-=Sn,Yr=Rn-2;Yr>=0;--Yr)(Sn=(An=hn[Yr]).y1+$e-sa)>0&&(An.y0-=Sn,An.y1-=Sn),sa=An.y0})}}function br(Ut){Ut.nodes.forEach(function(Kt){Kt.sourceLinks.sort(de),Kt.targetLinks.sort(se)}),Ut.nodes.forEach(function(Kt){var wt=Kt.y0,xr=wt,Ir=Kt.y1,Ur=Ir;Kt.sourceLinks.forEach(function(qt){qt.circular?(qt.y0=Ir-qt.width/2,Ir-=qt.width):(qt.y0=wt+qt.width/2,wt+=qt.width)}),Kt.targetLinks.forEach(function(qt){qt.circular?(qt.y1=Ur-qt.width/2,Ur-=qt.width):(qt.y1=xr+qt.width/2,xr+=qt.width)})})}return zr.nodeId=function(Ut){return arguments.length?(ht="function"==typeof Ut?Ut:re(Ut),zr):ht},zr.nodeAlign=function(Ut){return arguments.length?(gt="function"==typeof Ut?Ut:re(Ut),zr):gt},zr.nodeWidth=function(Ut){return arguments.length?(rt=+Ut,zr):rt},zr.nodePadding=function(Ut){return arguments.length?($e=+Ut,zr):$e},zr.nodes=function(Ut){return arguments.length?(ft="function"==typeof Ut?Ut:re(Ut),zr):ft},zr.links=function(Ut){return arguments.length?(Ct="function"==typeof Ut?Ut:re(Ut),zr):Ct},zr.size=function(Ut){return arguments.length?(It=$t=0,kr=+Ut[0],lr=+Ut[1],zr):[kr-It,lr-$t]},zr.extent=function(Ut){return arguments.length?(It=+Ut[0][0],kr=+Ut[1][0],$t=+Ut[0][1],lr=+Ut[1][1],zr):[[It,$t],[kr,lr]]},zr.iterations=function(Ut){return arguments.length?(sr=+Ut,zr):sr},zr.circularLinkGap=function(Ut){return arguments.length?(tr=+Ut,zr):tr},zr.nodePaddingRatio=function(Ut){return arguments.length?(Cr=+Ut,zr):Cr},zr.sortNodes=function(Ut){return arguments.length?(Hr=Ut,zr):Hr},zr.update=function(Ut){return ct(Ut,ht),br(Ut),Ut.links.forEach(function(Kt){Kt.circular&&(Kt.circularLinkType=Kt.y0+Kt.y1<lr?"top":"bottom",Kt.source.circularLinkType=Kt.circularLinkType,Kt.target.circularLinkType=Kt.circularLinkType)}),Ft(Ut,lr,ht,!1),bt(Ut,lr,ht),Xt(Ut,tr,lr,ht),Ut},zr}function nt(It,$t,kr){var lr=0;if(null===kr){for(var rt=[],$e=0;$e<It.links.length;$e++){var ht=It.links[$e],gt=ht.source.index,ft=ht.target.index;rt[gt]||(rt[gt]=[]),rt[ft]||(rt[ft]=[]),-1===rt[gt].indexOf(ft)&&rt[gt].push(ft)}var Ct=V()(rt);Ct.sort(function(Hr,zr){return Hr.length-zr.length});var sr={};for($e=0;$e<Ct.length;$e++){var Cr=Ct[$e].slice(-2);sr[Cr[0]]||(sr[Cr[0]]={}),sr[Cr[0]][Cr[1]]=!0}It.links.forEach(function(Hr){var zr=Hr.target.index,Wr=Hr.source.index;zr===Wr||sr[Wr]&&sr[Wr][zr]?(Hr.circular=!0,Hr.circularLinkID=lr,lr+=1):Hr.circular=!1})}else It.links.forEach(function(Hr){Hr.source[kr]<Hr.target[kr]?Hr.circular=!1:(Hr.circular=!0,Hr.circularLinkID=lr,lr+=1)})}function ct(It,$t){var kr=0,lr=0;It.links.forEach(function(rt){rt.circular&&(rt.source.circularLinkType||rt.target.circularLinkType?rt.circularLinkType=rt.source.circularLinkType?rt.source.circularLinkType:rt.target.circularLinkType:rt.circularLinkType=kr<lr?"top":"bottom","top"==rt.circularLinkType?kr+=1:lr+=1,It.nodes.forEach(function($e){(Ie($e,$t)==Ie(rt.source,$t)||Ie($e,$t)==Ie(rt.target,$t))&&($e.circularLinkType=rt.circularLinkType)}))}),It.links.forEach(function(rt){rt.circular&&(rt.source.circularLinkType==rt.target.circularLinkType&&(rt.circularLinkType=rt.source.circularLinkType),Sr(rt,$t)&&(rt.circularLinkType=rt.source.circularLinkType))})}function mt(It){var $t=Math.abs(It.y1-It.y0),kr=Math.abs(It.target.x0-It.source.x1);return Math.atan(kr/$t)}function Bt(It,$t){return!(It.source.column<$t.target.column)&&!(It.target.column>$t.source.column)}function Rt(It,$t){var kr=0;It.sourceLinks.forEach(function(rt){kr=rt.circular&&!Sr(rt,$t)?kr+1:kr});var lr=0;return It.targetLinks.forEach(function(rt){lr=rt.circular&&!Sr(rt,$t)?lr+1:lr}),kr+lr}function zt(It){var $t=It.source.sourceLinks,kr=0;$t.forEach(function($e){kr=$e.circular?kr+1:kr});var lr=It.target.targetLinks,rt=0;return lr.forEach(function($e){rt=$e.circular?rt+1:rt}),!(kr>1||rt>1)}function St(It,$t,kr){return It.sort(st),It.forEach(function(lr,rt){var $e=0;if(Sr(lr,kr)&&zt(lr))lr.circularPathData.verticalBuffer=$e+lr.width/2;else{for(var ht=0;ht<rt;ht++)if(Bt(It[rt],It[ht])){var gt=It[ht].circularPathData.verticalBuffer+It[ht].width/2+$t;$e=gt>$e?gt:$e}lr.circularPathData.verticalBuffer=$e+lr.width/2}}),It}function Xt(It,$t,kr,lr){var $e=A(It.links,function(ft){return ft.source.y0});It.links.forEach(function(ft){ft.circular&&(ft.circularPathData={})}),St(It.links.filter(function(ft){return"top"==ft.circularLinkType}),$t,lr),St(It.links.filter(function(ft){return"bottom"==ft.circularLinkType}),$t,lr),It.links.forEach(function(ft){if(ft.circular){if(ft.circularPathData.arcRadius=ft.width+10,ft.circularPathData.leftNodeBuffer=5,ft.circularPathData.rightNodeBuffer=5,ft.circularPathData.sourceWidth=ft.source.x1-ft.source.x0,ft.circularPathData.sourceX=ft.source.x0+ft.circularPathData.sourceWidth,ft.circularPathData.targetX=ft.target.x0,ft.circularPathData.sourceY=ft.y0,ft.circularPathData.targetY=ft.y1,Sr(ft,lr)&&zt(ft))ft.circularPathData.leftSmallArcRadius=10+ft.width/2,ft.circularPathData.leftLargeArcRadius=10+ft.width/2,ft.circularPathData.rightSmallArcRadius=10+ft.width/2,ft.circularPathData.rightLargeArcRadius=10+ft.width/2,"bottom"==ft.circularLinkType?(ft.circularPathData.verticalFullExtent=ft.source.y1+25+ft.circularPathData.verticalBuffer,ft.circularPathData.verticalLeftInnerExtent=ft.circularPathData.verticalFullExtent-ft.circularPathData.leftLargeArcRadius,ft.circularPathData.verticalRightInnerExtent=ft.circularPathData.verticalFullExtent-ft.circularPathData.rightLargeArcRadius):(ft.circularPathData.verticalFullExtent=ft.source.y0-25-ft.circularPathData.verticalBuffer,ft.circularPathData.verticalLeftInnerExtent=ft.circularPathData.verticalFullExtent+ft.circularPathData.leftLargeArcRadius,ft.circularPathData.verticalRightInnerExtent=ft.circularPathData.verticalFullExtent+ft.circularPathData.rightLargeArcRadius);else{var Ct=ft.source.column,sr=ft.circularLinkType,tr=It.links.filter(function(zr){return zr.source.column==Ct&&zr.circularLinkType==sr});"bottom"==ft.circularLinkType?tr.sort(pe):tr.sort(Se);var Cr=0;tr.forEach(function(zr,Wr){zr.circularLinkID==ft.circularLinkID&&(ft.circularPathData.leftSmallArcRadius=10+ft.width/2+Cr,ft.circularPathData.leftLargeArcRadius=10+ft.width/2+Wr*$t+Cr),Cr+=zr.width}),Ct=ft.target.column,tr=It.links.filter(function(zr){return zr.target.column==Ct&&zr.circularLinkType==sr}),"bottom"==ft.circularLinkType?tr.sort(Oe):tr.sort(ge),Cr=0,tr.forEach(function(zr,Wr){zr.circularLinkID==ft.circularLinkID&&(ft.circularPathData.rightSmallArcRadius=10+ft.width/2+Cr,ft.circularPathData.rightLargeArcRadius=10+ft.width/2+Wr*$t+Cr),Cr+=zr.width}),"bottom"==ft.circularLinkType?(ft.circularPathData.verticalFullExtent=Math.max(kr,ft.source.y1,ft.target.y1)+25+ft.circularPathData.verticalBuffer,ft.circularPathData.verticalLeftInnerExtent=ft.circularPathData.verticalFullExtent-ft.circularPathData.leftLargeArcRadius,ft.circularPathData.verticalRightInnerExtent=ft.circularPathData.verticalFullExtent-ft.circularPathData.rightLargeArcRadius):(ft.circularPathData.verticalFullExtent=$e-25-ft.circularPathData.verticalBuffer,ft.circularPathData.verticalLeftInnerExtent=ft.circularPathData.verticalFullExtent+ft.circularPathData.leftLargeArcRadius,ft.circularPathData.verticalRightInnerExtent=ft.circularPathData.verticalFullExtent+ft.circularPathData.rightLargeArcRadius)}ft.circularPathData.leftInnerExtent=ft.circularPathData.sourceX+ft.circularPathData.leftNodeBuffer,ft.circularPathData.rightInnerExtent=ft.circularPathData.targetX-ft.circularPathData.rightNodeBuffer,ft.circularPathData.leftFullExtent=ft.circularPathData.sourceX+ft.circularPathData.leftLargeArcRadius+ft.circularPathData.leftNodeBuffer,ft.circularPathData.rightFullExtent=ft.circularPathData.targetX-ft.circularPathData.rightLargeArcRadius-ft.circularPathData.rightNodeBuffer}if(ft.circular)ft.path=function Mt(It){var $t="";return $t="top"==It.circularLinkType?"M"+It.circularPathData.sourceX+" "+It.circularPathData.sourceY+" L"+It.circularPathData.leftInnerExtent+" "+It.circularPathData.sourceY+" A"+It.circularPathData.leftLargeArcRadius+" "+It.circularPathData.leftSmallArcRadius+" 0 0 0 "+It.circularPathData.leftFullExtent+" "+(It.circularPathData.sourceY-It.circularPathData.leftSmallArcRadius)+" L"+It.circularPathData.leftFullExtent+" "+It.circularPathData.verticalLeftInnerExtent+" A"+It.circularPathData.leftLargeArcRadius+" "+It.circularPathData.leftLargeArcRadius+" 0 0 0 "+It.circularPathData.leftInnerExtent+" "+It.circularPathData.verticalFullExtent+" L"+It.circularPathData.rightInnerExtent+" "+It.circularPathData.verticalFullExtent+" A"+It.circularPathData.rightLargeArcRadius+" "+It.circularPathData.rightLargeArcRadius+" 0 0 0 "+It.circularPathData.rightFullExtent+" "+It.circularPathData.verticalRightInnerExtent+" L"+It.circularPathData.rightFullExtent+" "+(It.circularPathData.targetY-It.circularPathData.rightSmallArcRadius)+" A"+It.circularPathData.rightLargeArcRadius+" "+It.circularPathData.rightSmallArcRadius+" 0 0 0 "+It.circularPathData.rightInnerExtent+" "+It.circularPathData.targetY+" L"+It.circularPathData.targetX+" "+It.circularPathData.targetY:"M"+It.circularPathData.sourceX+" "+It.circularPathData.sourceY+" L"+It.circularPathData.leftInnerExtent+" "+It.circularPathData.sourceY+" A"+It.circularPathData.leftLargeArcRadius+" "+It.circularPathData.leftSmallArcRadius+" 0 0 1 "+It.circularPathData.leftFullExtent+" "+(It.circularPathData.sourceY+It.circularPathData.leftSmallArcRadius)+" L"+It.circularPathData.leftFullExtent+" "+It.circularPathData.verticalLeftInnerExtent+" A"+It.circularPathData.leftLargeArcRadius+" "+It.circularPathData.leftLargeArcRadius+" 0 0 1 "+It.circularPathData.leftInnerExtent+" "+It.circularPathData.verticalFullExtent+" L"+It.circularPathData.rightInnerExtent+" "+It.circularPathData.verticalFullExtent+" A"+It.circularPathData.rightLargeArcRadius+" "+It.circularPathData.rightLargeArcRadius+" 0 0 1 "+It.circularPathData.rightFullExtent+" "+It.circularPathData.verticalRightInnerExtent+" L"+It.circularPathData.rightFullExtent+" "+(It.circularPathData.targetY+It.circularPathData.rightSmallArcRadius)+" A"+It.circularPathData.rightLargeArcRadius+" "+It.circularPathData.rightSmallArcRadius+" 0 0 1 "+It.circularPathData.rightInnerExtent+" "+It.circularPathData.targetY+" L"+It.circularPathData.targetX+" "+It.circularPathData.targetY,$t}(ft);else{var Hr=function te(){return j(ee)}().source(function(zr){return[zr.source.x0+(zr.source.x1-zr.source.x0),zr.y0]}).target(function(zr){return[zr.target.x0,zr.y1]});ft.path=Hr(ft)}})}function st(It,$t){return we(It)==we($t)?"bottom"==It.circularLinkType?pe(It,$t):Se(It,$t):we($t)-we(It)}function Se(It,$t){return It.y0-$t.y0}function pe(It,$t){return $t.y0-It.y0}function ge(It,$t){return It.y1-$t.y1}function Oe(It,$t){return $t.y1-It.y1}function we(It){return It.target.column-It.source.column}function He(It){return It.target.x0-It.source.x1}function Xe(It,$t){var kr=mt(It),lr=He($t)/Math.tan(kr);return"up"==cr(It)?It.y1+lr:It.y1-lr}function ut(It,$t){var kr=mt(It),lr=He($t)/Math.tan(kr);return"up"==cr(It)?It.y1-lr:It.y1+lr}function Ze(It,$t,kr,lr){It.links.forEach(function(rt){if(!rt.circular&&rt.target.column-rt.source.column>1){var $e=rt.source.column+1,ht=rt.target.column-1,gt=1,ft=ht-$e+1;for(gt=1;$e<=ht;$e++,gt++)It.nodes.forEach(function(Ct){if(Ct.column==$e){var Jt,sr=gt/(ft+1),tr=Math.pow(1-sr,3),Cr=3*sr*Math.pow(1-sr,2),Hr=3*Math.pow(sr,2)*(1-sr),zr=Math.pow(sr,3),Wr=tr*rt.y0+Cr*rt.y0+Hr*rt.y1+zr*rt.y1,Ke=Wr-rt.width/2,We=Wr+rt.width/2;Ke>Ct.y0&&Ke<Ct.y1?(Jt=Ct.y1-Ke+10,Jt="bottom"==Ct.circularLinkType?Jt:-Jt,Ct=Dt(Ct,Jt,$t,kr),It.nodes.forEach(function(Gt){Ie(Gt,lr)==Ie(Ct,lr)||Gt.column!=Ct.column||qe(Ct,Gt)&&Dt(Gt,Jt,$t,kr)})):(We>Ct.y0&&We<Ct.y1||Ke<Ct.y0&&We>Ct.y1)&&(Jt=We-Ct.y0+10,Ct=Dt(Ct,Jt,$t,kr),It.nodes.forEach(function(Gt){Ie(Gt,lr)==Ie(Ct,lr)||Gt.column!=Ct.column||Gt.y0<Ct.y1&&Gt.y1>Ct.y1&&Dt(Gt,Jt,$t,kr)}))}})}})}function qe(It,$t){return It.y0>$t.y0&&It.y0<$t.y1||It.y1>$t.y0&&It.y1<$t.y1||It.y0<$t.y0&&It.y1>$t.y1}function Dt(It,$t,kr,lr){return It.y0+$t>=kr&&It.y1+$t<=lr&&(It.y0=It.y0+$t,It.y1=It.y1+$t,It.targetLinks.forEach(function(rt){rt.y1=rt.y1+$t}),It.sourceLinks.forEach(function(rt){rt.y0=rt.y0+$t})),It}function Ft(It,$t,kr,lr){It.nodes.forEach(function(rt){lr&&rt.y+(rt.y1-rt.y0)>$t&&(rt.y=rt.y-(rt.y+(rt.y1-rt.y0)-$t));var $e=It.links.filter(function(ft){return Ie(ft.source,kr)==Ie(rt,kr)}),ht=$e.length;ht>1&&$e.sort(function(ft,Ct){if(!ft.circular&&!Ct.circular){if(ft.target.column==Ct.target.column)return ft.y1-Ct.y1;if(!Pt(ft,Ct))return ft.y1-Ct.y1;if(ft.target.column>Ct.target.column){var sr=ut(Ct,ft);return ft.y1-sr}if(Ct.target.column>ft.target.column)return ut(ft,Ct)-Ct.y1}return ft.circular&&!Ct.circular?"top"==ft.circularLinkType?-1:1:Ct.circular&&!ft.circular?"top"==Ct.circularLinkType?1:-1:ft.circular&&Ct.circular?ft.circularLinkType===Ct.circularLinkType&&"top"==ft.circularLinkType?ft.target.column===Ct.target.column?ft.target.y1-Ct.target.y1:Ct.target.column-ft.target.column:ft.circularLinkType===Ct.circularLinkType&&"bottom"==ft.circularLinkType?ft.target.column===Ct.target.column?Ct.target.y1-ft.target.y1:ft.target.column-Ct.target.column:"top"==ft.circularLinkType?-1:1:void 0});var gt=rt.y0;$e.forEach(function(ft){ft.y0=gt+ft.width/2,gt+=ft.width}),$e.forEach(function(ft,Ct){if("bottom"==ft.circularLinkType){for(var sr=Ct+1,tr=0;sr<ht;sr++)tr+=$e[sr].width;ft.y0=rt.y1-tr-ft.width/2}})})}function bt(It,$t,kr){It.nodes.forEach(function(lr){var rt=It.links.filter(function(gt){return Ie(gt.target,kr)==Ie(lr,kr)}),$e=rt.length;$e>1&&rt.sort(function(gt,ft){if(!gt.circular&&!ft.circular){if(gt.source.column==ft.source.column)return gt.y0-ft.y0;if(!Pt(gt,ft))return gt.y0-ft.y0;if(ft.source.column<gt.source.column){var Ct=Xe(ft,gt);return gt.y0-Ct}if(gt.source.column<ft.source.column)return Xe(gt,ft)-ft.y0}return gt.circular&&!ft.circular?"top"==gt.circularLinkType?-1:1:ft.circular&&!gt.circular?"top"==ft.circularLinkType?1:-1:gt.circular&&ft.circular?gt.circularLinkType===ft.circularLinkType&&"top"==gt.circularLinkType?gt.source.column===ft.source.column?gt.source.y1-ft.source.y1:gt.source.column-ft.source.column:gt.circularLinkType===ft.circularLinkType&&"bottom"==gt.circularLinkType?gt.source.column===ft.source.column?gt.source.y1-ft.source.y1:ft.source.column-gt.source.column:"top"==gt.circularLinkType?-1:1:void 0});var ht=lr.y0;rt.forEach(function(gt){gt.y1=ht+gt.width/2,ht+=gt.width}),rt.forEach(function(gt,ft){if("bottom"==gt.circularLinkType){for(var Ct=ft+1,sr=0;Ct<$e;Ct++)sr+=rt[Ct].width;gt.y1=lr.y1-sr-gt.width/2}})})}function Pt(It,$t){return cr(It)==cr($t)}function cr(It){return It.y0-It.y1>0?"up":"down"}function Sr(It,$t){return Ie(It.source,$t)==Ie(It.target,$t)}function Kr(It,$t,kr){var lr=It.nodes,rt=It.links,$e=!1,ht=!1;if(rt.forEach(function(Cr){"top"==Cr.circularLinkType?$e=!0:"bottom"==Cr.circularLinkType&&(ht=!0)}),0==$e||0==ht){var gt=A(lr,function(Cr){return Cr.y0}),tr=(kr-$t)/(g(lr,function(Cr){return Cr.y1})-gt);lr.forEach(function(Cr){var Hr=(Cr.y1-Cr.y0)*tr;Cr.y0=(Cr.y0-gt)*tr,Cr.y1=Cr.y0+Hr}),rt.forEach(function(Cr){Cr.y0=(Cr.y0-gt)*tr,Cr.y1=(Cr.y1-gt)*tr,Cr.width=Cr.width*tr})}}},28010:($,K,e)=>{"use strict";function M(Pe,Ie){return Pe<Ie?-1:Pe>Ie?1:Pe>=Ie?0:NaN}e.r(K),e.d(K,{sankey:()=>W,sankeyCenter:()=>E,sankeyJustify:()=>w,sankeyLeft:()=>c,sankeyLinkHorizontal:()=>ze,sankeyRight:()=>S});var T=function I(Pe){return 1===Pe.length&&(Pe=function t(Pe){return function(Ie,Qe){return M(Pe(Ie),Qe)}}(Pe)),{left:function(Ie,Qe,at,Be){for(null==at&&(at=0),null==Be&&(Be=Ie.length);at<Be;){var Ne=at+Be>>>1;Pe(Ie[Ne],Qe)<0?at=Ne+1:Be=Ne}return at},right:function(Ie,Qe,at,Be){for(null==at&&(at=0),null==Be&&(Be=Ie.length);at<Be;){var Ne=at+Be>>>1;Pe(Ie[Ne],Qe)>0?Be=Ne:at=Ne+1}return at}}}(M);T.right,T.left;var a=Array.prototype;a.slice,a.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function m(Pe,Ie){var Be,Ne,Qe=Pe.length,at=-1;if(null==Ie){for(;++at<Qe;)if(null!=(Be=Pe[at])&&Be>=Be)for(Ne=Be;++at<Qe;)null!=(Be=Pe[at])&&Ne>Be&&(Ne=Be)}else for(;++at<Qe;)if(null!=(Be=Ie(Pe[at],at,Pe))&&Be>=Be)for(Ne=Be;++at<Qe;)null!=(Be=Ie(Pe[at],at,Pe))&&Ne>Be&&(Ne=Be);return Ne}function d(Pe,Ie){var Be,Qe=Pe.length,at=-1,Ne=0;if(null==Ie)for(;++at<Qe;)(Be=+Pe[at])&&(Ne+=Be);else for(;++at<Qe;)(Be=+Ie(Pe[at],at,Pe))&&(Ne+=Be);return Ne}var A=e(88097);function b(Pe){return Pe.target.depth}function c(Pe){return Pe.depth}function S(Pe,Ie){return Ie-1-Pe.height}function w(Pe,Ie){return Pe.sourceLinks.length?Pe.depth:Ie-1}function E(Pe){return Pe.targetLinks.length?Pe.depth:Pe.sourceLinks.length?m(Pe.sourceLinks,b)-1:0}function P(Pe){return function(){return Pe}}function R(Pe,Ie){return _(Pe.source,Ie.source)||Pe.index-Ie.index}function F(Pe,Ie){return _(Pe.target,Ie.target)||Pe.index-Ie.index}function _(Pe,Ie){return Pe.y0-Ie.y0}function z(Pe){return Pe.value}function D(Pe){return(Pe.y0+Pe.y1)/2}function k(Pe){return D(Pe.source)*Pe.value}function O(Pe){return D(Pe.target)*Pe.value}function U(Pe){return Pe.index}function H(Pe){return Pe.nodes}function j(Pe){return Pe.links}function ee(Pe,Ie){var Qe=Pe.get(Ie);if(!Qe)throw new Error("missing: "+Ie);return Qe}function W(){var Pe=0,Ie=0,Qe=1,at=1,Be=24,Ne=8,nt=U,ct=w,mt=H,Bt=j,Rt=32;function St(){var ge={nodes:mt.apply(null,arguments),links:Bt.apply(null,arguments)};return Xt(ge),Mt(ge),st(ge),Se(ge),pe(ge),ge}function Xt(ge){ge.nodes.forEach(function(we,He){we.index=He,we.sourceLinks=[],we.targetLinks=[]});var Oe=(0,A.UI)(ge.nodes,nt);ge.links.forEach(function(we,He){we.index=He;var Xe=we.source,ut=we.target;"object"!=typeof Xe&&(Xe=we.source=ee(Oe,Xe)),"object"!=typeof ut&&(ut=we.target=ee(Oe,ut)),Xe.sourceLinks.push(we),ut.targetLinks.push(we)})}function Mt(ge){ge.nodes.forEach(function(Oe){Oe.value=Math.max(d(Oe.sourceLinks,z),d(Oe.targetLinks,z))})}function st(ge){var Oe,we,He;for(Oe=ge.nodes,we=[],He=0;Oe.length;++He,Oe=we,we=[])Oe.forEach(function(ut){ut.depth=He,ut.sourceLinks.forEach(function(Ze){we.indexOf(Ze.target)<0&&we.push(Ze.target)})});for(Oe=ge.nodes,we=[],He=0;Oe.length;++He,Oe=we,we=[])Oe.forEach(function(ut){ut.height=He,ut.targetLinks.forEach(function(Ze){we.indexOf(Ze.source)<0&&we.push(Ze.source)})});var Xe=(Qe-Pe-Be)/(He-1);ge.nodes.forEach(function(ut){ut.x1=(ut.x0=Pe+Math.max(0,Math.min(He-1,Math.floor(ct.call(null,ut,He))))*Xe)+Be})}function Se(ge){var Oe=(0,A.b1)().key(function(Dt){return Dt.x0}).sortKeys(M).entries(ge.nodes).map(function(Dt){return Dt.values});(function Xe(){var Dt=function g(Pe,Ie){var Be,Ne,Qe=Pe.length,at=-1;if(null==Ie){for(;++at<Qe;)if(null!=(Be=Pe[at])&&Be>=Be)for(Ne=Be;++at<Qe;)null!=(Be=Pe[at])&&Be>Ne&&(Ne=Be)}else for(;++at<Qe;)if(null!=(Be=Ie(Pe[at],at,Pe))&&Be>=Be)for(Ne=Be;++at<Qe;)null!=(Be=Ie(Pe[at],at,Pe))&&Be>Ne&&(Ne=Be);return Ne}(Oe,function(Pt){return Pt.length}),Ft=.6666666666666666*(at-Ie)/(Dt-1);Ne>Ft&&(Ne=Ft);var bt=m(Oe,function(Pt){return(at-Ie-(Pt.length-1)*Ne)/d(Pt,z)});Oe.forEach(function(Pt){Pt.forEach(function(cr,Sr){cr.y1=(cr.y0=Sr)+cr.value*bt})}),ge.links.forEach(function(Pt){Pt.width=Pt.value*bt})})(),qe();for(var we=1,He=Rt;He>0;--He)Ze(we*=.99),qe(),ut(we),qe();function ut(Dt){Oe.forEach(function(Ft){Ft.forEach(function(bt){if(bt.targetLinks.length){var Pt=(d(bt.targetLinks,k)/d(bt.targetLinks,z)-D(bt))*Dt;bt.y0+=Pt,bt.y1+=Pt}})})}function Ze(Dt){Oe.slice().reverse().forEach(function(Ft){Ft.forEach(function(bt){if(bt.sourceLinks.length){var Pt=(d(bt.sourceLinks,O)/d(bt.sourceLinks,z)-D(bt))*Dt;bt.y0+=Pt,bt.y1+=Pt}})})}function qe(){Oe.forEach(function(Dt){var Ft,bt,Sr,Pt=Ie,cr=Dt.length;for(Dt.sort(_),Sr=0;Sr<cr;++Sr)(bt=Pt-(Ft=Dt[Sr]).y0)>0&&(Ft.y0+=bt,Ft.y1+=bt),Pt=Ft.y1+Ne;if((bt=Pt-Ne-at)>0)for(Pt=Ft.y0-=bt,Ft.y1-=bt,Sr=cr-2;Sr>=0;--Sr)(bt=(Ft=Dt[Sr]).y1+Ne-Pt)>0&&(Ft.y0-=bt,Ft.y1-=bt),Pt=Ft.y0})}}function pe(ge){ge.nodes.forEach(function(Oe){Oe.sourceLinks.sort(F),Oe.targetLinks.sort(R)}),ge.nodes.forEach(function(Oe){var we=Oe.y0,He=we;Oe.sourceLinks.forEach(function(Xe){Xe.y0=we+Xe.width/2,we+=Xe.width}),Oe.targetLinks.forEach(function(Xe){Xe.y1=He+Xe.width/2,He+=Xe.width})})}return St.update=function(ge){return pe(ge),ge},St.nodeId=function(ge){return arguments.length?(nt="function"==typeof ge?ge:P(ge),St):nt},St.nodeAlign=function(ge){return arguments.length?(ct="function"==typeof ge?ge:P(ge),St):ct},St.nodeWidth=function(ge){return arguments.length?(Be=+ge,St):Be},St.nodePadding=function(ge){return arguments.length?(Ne=+ge,St):Ne},St.nodes=function(ge){return arguments.length?(mt="function"==typeof ge?ge:P(ge),St):mt},St.links=function(ge){return arguments.length?(Bt="function"==typeof ge?ge:P(ge),St):Bt},St.size=function(ge){return arguments.length?(Pe=Ie=0,Qe=+ge[0],at=+ge[1],St):[Qe-Pe,at-Ie]},St.extent=function(ge){return arguments.length?(Pe=+ge[0][0],Qe=+ge[1][0],Ie=+ge[0][1],at=+ge[1][1],St):[[Pe,Ie],[Qe,at]]},St.iterations=function(ge){return arguments.length?(Rt=+ge,St):Rt},St}var B=Math.PI,te=2*B,q=1e-6,oe=te-q;function ie(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function V(){return new ie}ie.prototype=V.prototype={constructor:ie,moveTo:function(Pe,Ie){this._+="M"+(this._x0=this._x1=+Pe)+","+(this._y0=this._y1=+Ie)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(Pe,Ie){this._+="L"+(this._x1=+Pe)+","+(this._y1=+Ie)},quadraticCurveTo:function(Pe,Ie,Qe,at){this._+="Q"+ +Pe+","+ +Ie+","+(this._x1=+Qe)+","+(this._y1=+at)},bezierCurveTo:function(Pe,Ie,Qe,at,Be,Ne){this._+="C"+ +Pe+","+ +Ie+","+ +Qe+","+ +at+","+(this._x1=+Be)+","+(this._y1=+Ne)},arcTo:function(Pe,Ie,Qe,at,Be){Pe=+Pe,Ie=+Ie,Qe=+Qe,at=+at,Be=+Be;var Ne=this._x1,nt=this._y1,ct=Qe-Pe,mt=at-Ie,Bt=Ne-Pe,Rt=nt-Ie,zt=Bt*Bt+Rt*Rt;if(Be<0)throw new Error("negative radius: "+Be);if(null===this._x1)this._+="M"+(this._x1=Pe)+","+(this._y1=Ie);else if(zt>q)if(Math.abs(Rt*ct-mt*Bt)>q&&Be){var St=Qe-Ne,Xt=at-nt,Mt=ct*ct+mt*mt,st=St*St+Xt*Xt,Se=Math.sqrt(Mt),pe=Math.sqrt(zt),ge=Be*Math.tan((B-Math.acos((Mt+zt-st)/(2*Se*pe)))/2),Oe=ge/pe,we=ge/Se;Math.abs(Oe-1)>q&&(this._+="L"+(Pe+Oe*Bt)+","+(Ie+Oe*Rt)),this._+="A"+Be+","+Be+",0,0,"+ +(Rt*St>Bt*Xt)+","+(this._x1=Pe+we*ct)+","+(this._y1=Ie+we*mt)}else this._+="L"+(this._x1=Pe)+","+(this._y1=Ie)},arc:function(Pe,Ie,Qe,at,Be,Ne){Pe=+Pe,Ie=+Ie,Ne=!!Ne;var nt=(Qe=+Qe)*Math.cos(at),ct=Qe*Math.sin(at),mt=Pe+nt,Bt=Ie+ct,Rt=1^Ne,zt=Ne?at-Be:Be-at;if(Qe<0)throw new Error("negative radius: "+Qe);null===this._x1?this._+="M"+mt+","+Bt:(Math.abs(this._x1-mt)>q||Math.abs(this._y1-Bt)>q)&&(this._+="L"+mt+","+Bt),Qe&&(zt<0&&(zt=zt%te+te),zt>oe?this._+="A"+Qe+","+Qe+",0,1,"+Rt+","+(Pe-nt)+","+(Ie-ct)+"A"+Qe+","+Qe+",0,1,"+Rt+","+(this._x1=mt)+","+(this._y1=Bt):zt>q&&(this._+="A"+Qe+","+Qe+",0,"+ +(zt>=B)+","+Rt+","+(this._x1=Pe+Qe*Math.cos(Be))+","+(this._y1=Ie+Qe*Math.sin(Be))))},rect:function(Pe,Ie,Qe,at){this._+="M"+(this._x0=this._x1=+Pe)+","+(this._y0=this._y1=+Ie)+"h"+ +Qe+"v"+ +at+"h"+-Qe+"Z"},toString:function(){return this._}};const Y=V;var ae=Array.prototype.slice;function X(Pe){return function(){return Pe}}function J(Pe){return Pe[0]}function ue(Pe){return Pe[1]}function re(Pe){return Pe.source}function ne(Pe){return Pe.target}function se(Pe){var Ie=re,Qe=ne,at=J,Be=ue,Ne=null;function nt(){var ct,mt=ae.call(arguments),Bt=Ie.apply(this,mt),Rt=Qe.apply(this,mt);if(Ne||(Ne=ct=Y()),Pe(Ne,+at.apply(this,(mt[0]=Bt,mt)),+Be.apply(this,mt),+at.apply(this,(mt[0]=Rt,mt)),+Be.apply(this,mt)),ct)return Ne=null,ct+""||null}return nt.source=function(ct){return arguments.length?(Ie=ct,nt):Ie},nt.target=function(ct){return arguments.length?(Qe=ct,nt):Qe},nt.x=function(ct){return arguments.length?(at="function"==typeof ct?ct:X(+ct),nt):at},nt.y=function(ct){return arguments.length?(Be="function"==typeof ct?ct:X(+ct),nt):Be},nt.context=function(ct){return arguments.length?(Ne=ct??null,nt):Ne},nt}function de(Pe,Ie,Qe,at,Be){Pe.moveTo(Ie,Qe),Pe.bezierCurveTo(Ie=(Ie+at)/2,Qe,Ie,Be,at,Be)}function Fe(Pe){return[Pe.source.x1,Pe.y0]}function ke(Pe){return[Pe.target.x0,Pe.y1]}function ze(){return function _e(){return se(de)}().source(Fe).target(ke)}},21572:($,K,e)=>{var M,I;(function(){var t={version:"3.8.0"},T=[].slice,n=function(le){return T.call(le)},i=self.document;function u(le){return le&&(le.ownerDocument||le.document||le).documentElement}function a(le){return le&&(le.ownerDocument&&le.ownerDocument.defaultView||le.document&&le||le.defaultView)}if(i)try{n(i.documentElement.childNodes)[0].nodeType}catch{n=function(xe){for(var Re=xe.length,Ue=new Array(Re);Re--;)Ue[Re]=xe[Re];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch{var r=this.Element.prototype,o=r.setAttribute,v=r.setAttributeNS,p=this.CSSStyleDeclaration.prototype,f=p.setProperty;r.setAttribute=function(xe,Re){o.call(this,xe,Re+"")},r.setAttributeNS=function(xe,Re,Ue){v.call(this,xe,Re,Ue+"")},p.setProperty=function(xe,Re,Ue){f.call(this,xe,Re+"",Ue)}}function l(le,xe){return le<xe?-1:le>xe?1:le>=xe?0:NaN}function y(le){return null===le?NaN:+le}function s(le){return!isNaN(le)}function x(le){return{left:function(xe,Re,Ue,Je){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Je=xe.length);Ue<Je;){var tt=Ue+Je>>>1;le(xe[tt],Re)<0?Ue=tt+1:Je=tt}return Ue},right:function(xe,Re,Ue,Je){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Je=xe.length);Ue<Je;){var tt=Ue+Je>>>1;le(xe[tt],Re)>0?Je=tt:Ue=tt+1}return Ue}}}t.ascending=l,t.descending=function(le,xe){return xe<le?-1:xe>le?1:xe>=le?0:NaN},t.min=function(le,xe){var Je,tt,Re=-1,Ue=le.length;if(1===arguments.length){for(;++Re<Ue;)if(null!=(tt=le[Re])&&tt>=tt){Je=tt;break}for(;++Re<Ue;)null!=(tt=le[Re])&&Je>tt&&(Je=tt)}else{for(;++Re<Ue;)if(null!=(tt=xe.call(le,le[Re],Re))&&tt>=tt){Je=tt;break}for(;++Re<Ue;)null!=(tt=xe.call(le,le[Re],Re))&&Je>tt&&(Je=tt)}return Je},t.max=function(le,xe){var Je,tt,Re=-1,Ue=le.length;if(1===arguments.length){for(;++Re<Ue;)if(null!=(tt=le[Re])&&tt>=tt){Je=tt;break}for(;++Re<Ue;)null!=(tt=le[Re])&&tt>Je&&(Je=tt)}else{for(;++Re<Ue;)if(null!=(tt=xe.call(le,le[Re],Re))&&tt>=tt){Je=tt;break}for(;++Re<Ue;)null!=(tt=xe.call(le,le[Re],Re))&&tt>Je&&(Je=tt)}return Je},t.extent=function(le,xe){var Je,tt,Lt,Re=-1,Ue=le.length;if(1===arguments.length){for(;++Re<Ue;)if(null!=(tt=le[Re])&&tt>=tt){Je=Lt=tt;break}for(;++Re<Ue;)null!=(tt=le[Re])&&(Je>tt&&(Je=tt),Lt<tt&&(Lt=tt))}else{for(;++Re<Ue;)if(null!=(tt=xe.call(le,le[Re],Re))&&tt>=tt){Je=Lt=tt;break}for(;++Re<Ue;)null!=(tt=xe.call(le,le[Re],Re))&&(Je>tt&&(Je=tt),Lt<tt&&(Lt=tt))}return[Je,Lt]},t.sum=function(le,xe){var Je,Re=0,Ue=le.length,tt=-1;if(1===arguments.length)for(;++tt<Ue;)s(Je=+le[tt])&&(Re+=Je);else for(;++tt<Ue;)s(Je=+xe.call(le,le[tt],tt))&&(Re+=Je);return Re},t.mean=function(le,xe){var Je,Re=0,Ue=le.length,tt=-1,Lt=Ue;if(1===arguments.length)for(;++tt<Ue;)s(Je=y(le[tt]))?Re+=Je:--Lt;else for(;++tt<Ue;)s(Je=y(xe.call(le,le[tt],tt)))?Re+=Je:--Lt;if(Lt)return Re/Lt},t.quantile=function(le,xe){var Re=(le.length-1)*xe+1,Ue=Math.floor(Re),Je=+le[Ue-1],tt=Re-Ue;return tt?Je+tt*(le[Ue]-Je):Je},t.median=function(le,xe){var Je,Re=[],Ue=le.length,tt=-1;if(1===arguments.length)for(;++tt<Ue;)s(Je=y(le[tt]))&&Re.push(Je);else for(;++tt<Ue;)s(Je=y(xe.call(le,le[tt],tt)))&&Re.push(Je);if(Re.length)return t.quantile(Re.sort(l),.5)},t.variance=function(le,xe){var Je,tt,Re=le.length,Ue=0,Lt=0,yt=-1,Ot=0;if(1===arguments.length)for(;++yt<Re;)s(Je=y(le[yt]))&&(Lt+=(tt=Je-Ue)*(Je-(Ue+=tt/++Ot)));else for(;++yt<Re;)s(Je=y(xe.call(le,le[yt],yt)))&&(Lt+=(tt=Je-Ue)*(Je-(Ue+=tt/++Ot)));if(Ot>1)return Lt/(Ot-1)},t.deviation=function(){var le=t.variance.apply(this,arguments);return le&&Math.sqrt(le)};var h=x(l);function g(le){return le.length}t.bisectLeft=h.left,t.bisect=t.bisectRight=h.right,t.bisector=function(le){return x(1===le.length?function(xe,Re){return l(le(xe),Re)}:le)},t.shuffle=function(le,xe,Re){(Ue=arguments.length)<3&&(Re=le.length,Ue<2&&(xe=0));for(var Je,tt,Ue=Re-xe;Ue;)tt=Math.random()*Ue--|0,Je=le[Ue+xe],le[Ue+xe]=le[tt+xe],le[tt+xe]=Je;return le},t.permute=function(le,xe){for(var Re=xe.length,Ue=new Array(Re);Re--;)Ue[Re]=le[xe[Re]];return Ue},t.pairs=function(le){for(var xe=0,Re=le.length-1,Je=le[0],tt=new Array(Re<0?0:Re);xe<Re;)tt[xe]=[Je,Je=le[++xe]];return tt},t.transpose=function(le){if(!(tt=le.length))return[];for(var xe=-1,Re=t.min(le,g),Ue=new Array(Re);++xe<Re;)for(var tt,Je=-1,Lt=Ue[xe]=new Array(tt);++Je<tt;)Lt[Je]=le[Je][xe];return Ue},t.zip=function(){return t.transpose(arguments)},t.keys=function(le){var xe=[];for(var Re in le)xe.push(Re);return xe},t.values=function(le){var xe=[];for(var Re in le)xe.push(le[Re]);return xe},t.entries=function(le){var xe=[];for(var Re in le)xe.push({key:Re,value:le[Re]});return xe},t.merge=function(le){for(var Re,tt,Lt,xe=le.length,Ue=-1,Je=0;++Ue<xe;)Je+=le[Ue].length;for(tt=new Array(Je);--xe>=0;)for(Re=(Lt=le[xe]).length;--Re>=0;)tt[--Je]=Lt[Re];return tt};var m=Math.abs;function d(le){for(var xe=1;le*xe%1;)xe*=10;return xe}function A(le,xe){for(var Re in xe)Object.defineProperty(le.prototype,Re,{value:xe[Re],enumerable:!1})}function b(){this._=Object.create(null)}t.range=function(le,xe,Re){if(arguments.length<3&&(Re=1,arguments.length<2&&(xe=le,le=0)),(xe-le)/Re==1/0)throw new Error("infinite range");var Lt,Ue=[],Je=d(m(Re)),tt=-1;if(le*=Je,xe*=Je,(Re*=Je)<0)for(;(Lt=le+Re*++tt)>xe;)Ue.push(Lt/Je);else for(;(Lt=le+Re*++tt)<xe;)Ue.push(Lt/Je);return Ue},t.map=function(le,xe){var Re=new b;if(le instanceof b)le.forEach(function(yt,Ot){Re.set(yt,Ot)});else if(Array.isArray(le)){var tt,Ue=-1,Je=le.length;if(1===arguments.length)for(;++Ue<Je;)Re.set(Ue,le[Ue]);else for(;++Ue<Je;)Re.set(xe.call(le,tt=le[Ue],Ue),tt)}else for(var Lt in le)Re.set(Lt,le[Lt]);return Re};function w(le){return"__proto__"==(le+="")||"\0"===le[0]?"\0"+le:le}function E(le){return"\0"===(le+="")[0]?le.slice(1):le}function P(le){return w(le)in this._}function R(le){return(le=w(le))in this._&&delete this._[le]}function F(){var le=[];for(var xe in this._)le.push(E(xe));return le}function _(){var le=0;for(var xe in this._)++le;return le}function z(){for(var le in this._)return!1;return!0}function D(){this._=Object.create(null)}function k(le){return le}function O(le,xe,Re){return function(){var Ue=Re.apply(xe,arguments);return Ue===xe?le:Ue}}function U(le,xe){if(xe in le)return xe;xe=xe.charAt(0).toUpperCase()+xe.slice(1);for(var Re=0,Ue=H.length;Re<Ue;++Re){var Je=H[Re]+xe;if(Je in le)return Je}}A(b,{has:P,get:function(le){return this._[w(le)]},set:function(le,xe){return this._[w(le)]=xe},remove:R,keys:F,values:function(){var le=[];for(var xe in this._)le.push(this._[xe]);return le},entries:function(){var le=[];for(var xe in this._)le.push({key:E(xe),value:this._[xe]});return le},size:_,empty:z,forEach:function(le){for(var xe in this._)le.call(this,E(xe),this._[xe])}}),t.nest=function(){var Ue,Je,le={},xe=[],Re=[];function tt(yt,Ot,or){if(or>=xe.length)return Je?Je.call(le,Ot):Ue?Ot.sort(Ue):Ot;for(var tn,sn,_r,Jr,ir=-1,Rr=Ot.length,Dr=xe[or++],Gr=new b;++ir<Rr;)(Jr=Gr.get(tn=Dr(sn=Ot[ir])))?Jr.push(sn):Gr.set(tn,[sn]);return yt?(sn=yt(),_r=function(qr,en){sn.set(qr,tt(yt,en,or))}):(sn={},_r=function(qr,en){sn[qr]=tt(yt,en,or)}),Gr.forEach(_r),sn}function Lt(yt,Ot){if(Ot>=xe.length)return yt;var or=[],ir=Re[Ot++];return yt.forEach(function(Rr,Dr){or.push({key:Rr,values:Lt(Dr,Ot)})}),ir?or.sort(function(Rr,Dr){return ir(Rr.key,Dr.key)}):or}return le.map=function(yt,Ot){return tt(Ot,yt,0)},le.entries=function(yt){return Lt(tt(t.map,yt,0),0)},le.key=function(yt){return xe.push(yt),le},le.sortKeys=function(yt){return Re[xe.length-1]=yt,le},le.sortValues=function(yt){return Ue=yt,le},le.rollup=function(yt){return Je=yt,le},le},t.set=function(le){var xe=new D;if(le)for(var Re=0,Ue=le.length;Re<Ue;++Re)xe.add(le[Re]);return xe},A(D,{has:P,add:function(le){return this._[w(le+="")]=!0,le},remove:R,values:F,size:_,empty:z,forEach:function(le){for(var xe in this._)le.call(this,E(xe))}}),t.behavior={},t.rebind=function(le,xe){for(var Je,Re=1,Ue=arguments.length;++Re<Ue;)le[Je=arguments[Re]]=O(le,xe,xe[Je]);return le};var H=["webkit","ms","moz","Moz","o","O"];function j(){}function ee(){}function W(le){var xe=[],Re=new b;function Ue(){for(var yt,Je=xe,tt=-1,Lt=Je.length;++tt<Lt;)(yt=Je[tt].on)&&yt.apply(this,arguments);return le}return Ue.on=function(Je,tt){var yt,Lt=Re.get(Je);return arguments.length<2?Lt&&Lt.on:(Lt&&(Lt.on=null,xe=xe.slice(0,yt=xe.indexOf(Lt)).concat(xe.slice(yt+1)),Re.remove(Je)),tt&&xe.push(Re.set(Je,{on:tt})),le)},Ue}function B(){t.event.preventDefault()}function te(){for(var xe,le=t.event;xe=le.sourceEvent;)le=xe;return le}function q(le){for(var xe=new ee,Re=0,Ue=arguments.length;++Re<Ue;)xe[arguments[Re]]=W(xe);return xe.of=function(Je,tt){return function(Lt){try{var yt=Lt.sourceEvent=t.event;Lt.target=le,t.event=Lt,xe[Lt.type].apply(Je,tt)}finally{t.event=yt}}},xe}t.dispatch=function(){for(var le=new ee,xe=-1,Re=arguments.length;++xe<Re;)le[arguments[xe]]=W(le);return le},ee.prototype.on=function(le,xe){var Re=le.indexOf("."),Ue="";if(Re>=0&&(Ue=le.slice(Re+1),le=le.slice(0,Re)),le)return arguments.length<2?this[le].on(Ue):this[le].on(Ue,xe);if(2===arguments.length){if(null==xe)for(le in this)this.hasOwnProperty(le)&&this[le].on(Ue,null);return this}},t.event=null,t.requote=function(le){return le.replace(oe,"\\$&")};var oe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie={}.__proto__?function(le,xe){le.__proto__=xe}:function(le,xe){for(var Re in xe)le[Re]=xe[Re]};function V(le){return ie(le,J),le}var Y=function(le,xe){return xe.querySelector(le)},ae=function(le,xe){return xe.querySelectorAll(le)},X=function(le,xe){var Re=le.matches||le[U(le,"matchesSelector")];return(X=function(Ue,Je){return Re.call(Ue,Je)})(le,xe)};"function"==typeof Sizzle&&(Y=function(le,xe){return Sizzle(le,xe)[0]||null},ae=Sizzle,X=Sizzle.matchesSelector),t.selection=function(){return t.select(i.documentElement)};var J=t.selection.prototype=[];function ue(le){return"function"==typeof le?le:function(){return Y(le,this)}}function re(le){return"function"==typeof le?le:function(){return ae(le,this)}}J.select=function(le){var Re,Ue,Je,tt,xe=[];le=ue(le);for(var Lt=-1,yt=this.length;++Lt<yt;){xe.push(Re=[]),Re.parentNode=(Je=this[Lt]).parentNode;for(var Ot=-1,or=Je.length;++Ot<or;)(tt=Je[Ot])?(Re.push(Ue=le.call(tt,tt.__data__,Ot,Lt)),Ue&&"__data__"in tt&&(Ue.__data__=tt.__data__)):Re.push(null)}return V(xe)},J.selectAll=function(le){var Re,Ue,xe=[];le=re(le);for(var Je=-1,tt=this.length;++Je<tt;)for(var Lt=this[Je],yt=-1,Ot=Lt.length;++yt<Ot;)(Ue=Lt[yt])&&(xe.push(Re=n(le.call(Ue,Ue.__data__,yt,Je))),Re.parentNode=Ue);return V(xe)};var ne="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:ne,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function de(le,xe){return le=t.ns.qualify(le),null==xe?le.local?function Ue(){this.removeAttributeNS(le.space,le.local)}:function Re(){this.removeAttribute(le)}:"function"==typeof xe?le.local?function yt(){var Ot=xe.apply(this,arguments);null==Ot?this.removeAttributeNS(le.space,le.local):this.setAttributeNS(le.space,le.local,Ot)}:function Lt(){var Ot=xe.apply(this,arguments);null==Ot?this.removeAttribute(le):this.setAttribute(le,Ot)}:le.local?function tt(){this.setAttributeNS(le.space,le.local,xe)}:function Je(){this.setAttribute(le,xe)}}function be(le){return le.trim().replace(/\s+/g," ")}function De(le){return new RegExp("(?:^|\\s+)"+t.requote(le)+"(?:\\s+|$)","g")}function _e(le){return(le+"").trim().split(/^|\s+/)}function Ce(le,xe){var Re=(le=_e(le).map(Le)).length;return"function"==typeof xe?function Je(){for(var tt=-1,Lt=xe.apply(this,arguments);++tt<Re;)le[tt](this,Lt)}:function Ue(){for(var tt=-1;++tt<Re;)le[tt](this,xe)}}function Le(le){var xe=De(le);return function(Re,Ue){if(Je=Re.classList)return Ue?Je.add(le):Je.remove(le);var Je=Re.getAttribute("class")||"";Ue?(xe.lastIndex=0,xe.test(Je)||Re.setAttribute("class",be(Je+" "+le))):Re.setAttribute("class",be(Je.replace(xe," ")))}}function Fe(le,xe,Re){return null==xe?function Ue(){this.style.removeProperty(le)}:"function"==typeof xe?function tt(){var Lt=xe.apply(this,arguments);null==Lt?this.style.removeProperty(le):this.style.setProperty(le,Lt,Re)}:function Je(){this.style.setProperty(le,xe,Re)}}function ke(le,xe){return null==xe?function Re(){delete this[le]}:"function"==typeof xe?function Je(){var tt=xe.apply(this,arguments);null==tt?delete this[le]:this[le]=tt}:function Ue(){this[le]=xe}}function ze(le){return"function"==typeof le?le:(le=t.ns.qualify(le)).local?function Re(){return this.ownerDocument.createElementNS(le.space,le.local)}:function xe(){var Ue=this.ownerDocument,Je=this.namespaceURI;return Je===ne&&Ue.documentElement.namespaceURI===ne?Ue.createElement(le):Ue.createElementNS(Je,le)}}function Pe(){var le=this.parentNode;le&&le.removeChild(this)}function Ie(le){return{__data__:le}}function Qe(le){return function(){return X(this,le)}}function at(le){return arguments.length||(le=l),function(xe,Re){return xe&&Re?le(xe.__data__,Re.__data__):!xe-!Re}}function Be(le,xe){for(var Re=0,Ue=le.length;Re<Ue;Re++)for(var yt,Je=le[Re],tt=0,Lt=Je.length;tt<Lt;tt++)(yt=Je[tt])&&xe(yt,tt,Re);return le}function Ne(le){return ie(le,nt),le}t.ns={prefix:se,qualify:function(le){var xe=le.indexOf(":"),Re=le;return xe>=0&&"xmlns"!==(Re=le.slice(0,xe))&&(le=le.slice(xe+1)),se.hasOwnProperty(Re)?{space:se[Re],local:le}:le}},J.attr=function(le,xe){if(arguments.length<2){if("string"==typeof le){var Re=this.node();return(le=t.ns.qualify(le)).local?Re.getAttributeNS(le.space,le.local):Re.getAttribute(le)}for(xe in le)this.each(de(xe,le[xe]));return this}return this.each(de(le,xe))},J.classed=function(le,xe){if(arguments.length<2){if("string"==typeof le){var Re=this.node(),Ue=(le=_e(le)).length,Je=-1;if(xe=Re.classList){for(;++Je<Ue;)if(!xe.contains(le[Je]))return!1}else for(xe=Re.getAttribute("class");++Je<Ue;)if(!De(le[Je]).test(xe))return!1;return!0}for(xe in le)this.each(Ce(xe,le[xe]));return this}return this.each(Ce(le,xe))},J.style=function(le,xe,Re){var Ue=arguments.length;if(Ue<3){if("string"!=typeof le){for(Re in Ue<2&&(xe=""),le)this.each(Fe(Re,le[Re],xe));return this}if(Ue<2){var Je=this.node();return a(Je).getComputedStyle(Je,null).getPropertyValue(le)}Re=""}return this.each(Fe(le,xe,Re))},J.property=function(le,xe){if(arguments.length<2){if("string"==typeof le)return this.node()[le];for(xe in le)this.each(ke(xe,le[xe]));return this}return this.each(ke(le,xe))},J.text=function(le){return arguments.length?this.each("function"==typeof le?function(){var xe=le.apply(this,arguments);this.textContent=xe??""}:null==le?function(){this.textContent=""}:function(){this.textContent=le}):this.node().textContent},J.html=function(le){return arguments.length?this.each("function"==typeof le?function(){var xe=le.apply(this,arguments);this.innerHTML=xe??""}:null==le?function(){this.innerHTML=""}:function(){this.innerHTML=le}):this.node().innerHTML},J.append=function(le){return le=ze(le),this.select(function(){return this.appendChild(le.apply(this,arguments))})},J.insert=function(le,xe){return le=ze(le),xe=ue(xe),this.select(function(){return this.insertBefore(le.apply(this,arguments),xe.apply(this,arguments)||null)})},J.remove=function(){return this.each(Pe)},J.data=function(le,xe){var Je,tt,Re=-1,Ue=this.length;if(!arguments.length){for(le=new Array(Ue=(Je=this[0]).length);++Re<Ue;)(tt=Je[Re])&&(le[Re]=tt.__data__);return le}function Lt(ir,Rr){var Dr,en,Qr,tn=ir.length,sn=Rr.length,_r=Math.min(tn,sn),Gr=new Array(sn),Jr=new Array(sn),qr=new Array(tn);if(xe){var La,Vn=new b,Aa=new Array(tn);for(Dr=-1;++Dr<tn;)(en=ir[Dr])&&(Vn.has(La=xe.call(en,en.__data__,Dr))?qr[Dr]=en:Vn.set(La,en),Aa[Dr]=La);for(Dr=-1;++Dr<sn;)(en=Vn.get(La=xe.call(Rr,Qr=Rr[Dr],Dr)))?!0!==en&&(Gr[Dr]=en,en.__data__=Qr):Jr[Dr]=Ie(Qr),Vn.set(La,!0);for(Dr=-1;++Dr<tn;)Dr in Aa&&!0!==Vn.get(Aa[Dr])&&(qr[Dr]=ir[Dr])}else{for(Dr=-1;++Dr<_r;)en=ir[Dr],Qr=Rr[Dr],en?(en.__data__=Qr,Gr[Dr]=en):Jr[Dr]=Ie(Qr);for(;Dr<sn;++Dr)Jr[Dr]=Ie(Rr[Dr]);for(;Dr<tn;++Dr)qr[Dr]=ir[Dr]}Jr.update=Gr,Jr.parentNode=Gr.parentNode=qr.parentNode=ir.parentNode,yt.push(Jr),Ot.push(Gr),or.push(qr)}var yt=Ne([]),Ot=V([]),or=V([]);if("function"==typeof le)for(;++Re<Ue;)Lt(Je=this[Re],le.call(Je,Je.parentNode.__data__,Re));else for(;++Re<Ue;)Lt(Je=this[Re],le);return Ot.enter=function(){return yt},Ot.exit=function(){return or},Ot},J.datum=function(le){return arguments.length?this.property("__data__",le):this.property("__data__")},J.filter=function(le){var Re,Ue,Je,xe=[];"function"!=typeof le&&(le=Qe(le));for(var tt=0,Lt=this.length;tt<Lt;tt++){xe.push(Re=[]),Re.parentNode=(Ue=this[tt]).parentNode;for(var yt=0,Ot=Ue.length;yt<Ot;yt++)(Je=Ue[yt])&&le.call(Je,Je.__data__,yt,tt)&&Re.push(Je)}return V(xe)},J.order=function(){for(var le=-1,xe=this.length;++le<xe;)for(var tt,Re=this[le],Ue=Re.length-1,Je=Re[Ue];--Ue>=0;)(tt=Re[Ue])&&(Je&&Je!==tt.nextSibling&&Je.parentNode.insertBefore(tt,Je),Je=tt);return this},J.sort=function(le){le=at.apply(this,arguments);for(var xe=-1,Re=this.length;++xe<Re;)this[xe].sort(le);return this.order()},J.each=function(le){return Be(this,function(xe,Re,Ue){le.call(xe,xe.__data__,Re,Ue)})},J.call=function(le){var xe=n(arguments);return le.apply(xe[0]=this,xe),this},J.empty=function(){return!this.node()},J.node=function(){for(var le=0,xe=this.length;le<xe;le++)for(var Re=this[le],Ue=0,Je=Re.length;Ue<Je;Ue++){var tt=Re[Ue];if(tt)return tt}return null},J.size=function(){var le=0;return Be(this,function(){++le}),le};var nt=[];function ct(le){var xe,Re;return function(Ue,Je,tt){var Ot,Lt=le[tt].update,yt=Lt.length;for(tt!=Re&&(Re=tt,xe=0),Je>=xe&&(xe=Je+1);!(Ot=Lt[xe])&&++xe<yt;);return Ot}}function mt(le,xe,Re){var Ue="__on"+le,Je=le.indexOf("."),tt=Rt;Je>0&&(le=le.slice(0,Je));var Lt=Bt.get(le);function yt(){var ir=this[Ue];ir&&(this.removeEventListener(le,ir,ir.$),delete this[Ue])}return Lt&&(le=Lt,tt=zt),Je?xe?function Ot(){var ir=tt(xe,n(arguments));yt.call(this),this.addEventListener(le,this[Ue]=ir,ir.$=Re),ir._=xe}:yt:xe?j:function or(){var Rr,ir=new RegExp("^__on([^.]+)"+t.requote(le)+"$");for(var Dr in this)if(Rr=Dr.match(ir)){var tn=this[Dr];this.removeEventListener(Rr[1],tn,tn.$),delete this[Dr]}}}t.selection.enter=Ne,t.selection.enter.prototype=nt,nt.append=J.append,nt.empty=J.empty,nt.node=J.node,nt.call=J.call,nt.size=J.size,nt.select=function(le){for(var Re,Ue,Je,tt,Lt,xe=[],yt=-1,Ot=this.length;++yt<Ot;){Je=(tt=this[yt]).update,xe.push(Re=[]),Re.parentNode=tt.parentNode;for(var or=-1,ir=tt.length;++or<ir;)(Lt=tt[or])?(Re.push(Je[or]=Ue=le.call(tt.parentNode,Lt.__data__,or,yt)),Ue.__data__=Lt.__data__):Re.push(null)}return V(xe)},nt.insert=function(le,xe){return arguments.length<2&&(xe=ct(this)),J.insert.call(this,le,xe)},t.select=function(le){var xe;return"string"==typeof le?(xe=[Y(le,i)]).parentNode=i.documentElement:(xe=[le]).parentNode=u(le),V([xe])},t.selectAll=function(le){var xe;return"string"==typeof le?(xe=n(ae(le,i))).parentNode=i.documentElement:(xe=n(le)).parentNode=null,V([xe])},J.on=function(le,xe,Re){var Ue=arguments.length;if(Ue<3){if("string"!=typeof le){for(Re in Ue<2&&(xe=!1),le)this.each(mt(Re,le[Re],xe));return this}if(Ue<2)return(Ue=this.node()["__on"+le])&&Ue._;Re=!1}return this.each(mt(le,xe,Re))};var Bt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Rt(le,xe){return function(Re){var Ue=t.event;t.event=Re,xe[0]=this.__data__;try{le.apply(this,xe)}finally{t.event=Ue}}}function zt(le,xe){var Re=Rt(le,xe);return function(Ue){var tt=Ue.relatedTarget;(!tt||tt!==this&&!(8&tt.compareDocumentPosition(this)))&&Re.call(this,Ue)}}i&&Bt.forEach(function(le){"on"+le in i&&Bt.remove(le)});var St,Xt=0;function Mt(le){var xe=".dragsuppress-"+ ++Xt,Re="click"+xe,Ue=t.select(a(le)).on("touchmove"+xe,B).on("dragstart"+xe,B).on("selectstart"+xe,B);if(null==St&&(St=!("onselectstart"in le)&&U(le.style,"userSelect")),St){var Je=u(le).style,tt=Je[St];Je[St]="none"}return function(Lt){if(Ue.on(xe,null),St&&(Je[St]=tt),Lt){var yt=function(){Ue.on(Re,null)};Ue.on(Re,function(){B(),yt()},!0),setTimeout(yt,0)}}}t.mouse=function(le){return Se(le,te())};var st=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Se(le,xe){xe.changedTouches&&(xe=xe.changedTouches[0]);var Re=le.ownerSVGElement||le;if(Re.createSVGPoint){var Ue=Re.createSVGPoint();if(st<0){var Je=a(le);if(Je.scrollX||Je.scrollY){var tt=(Re=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();st=!(tt.f||tt.e),Re.remove()}}return st?(Ue.x=xe.pageX,Ue.y=xe.pageY):(Ue.x=xe.clientX,Ue.y=xe.clientY),[(Ue=Ue.matrixTransform(le.getScreenCTM().inverse())).x,Ue.y]}var Lt=le.getBoundingClientRect();return[xe.clientX-Lt.left-le.clientLeft,xe.clientY-Lt.top-le.clientTop]}function pe(){return t.event.changedTouches[0].identifier}t.touch=function(le,xe,Re){if(arguments.length<3&&(Re=xe,xe=te().changedTouches),xe)for(var tt,Ue=0,Je=xe.length;Ue<Je;++Ue)if((tt=xe[Ue]).identifier===Re)return Se(le,tt)},t.behavior.drag=function(){var le=q(Je,"drag","dragstart","dragend"),xe=null,Re=tt(j,t.mouse,a,"mousemove","mouseup"),Ue=tt(pe,t.touch,k,"touchmove","touchend");function Je(){this.on("mousedown.drag",Re).on("touchstart.drag",Ue)}function tt(Lt,yt,Ot,or,ir){return function(){var qr,Rr=this,Dr=t.event.target.correspondingElement||t.event.target,tn=Rr.parentNode,sn=le.of(Rr,arguments),_r=0,Gr=Lt(),Jr=".drag"+(null==Gr?"":"-"+Gr),en=t.select(Ot(Dr)).on(or+Jr,Aa).on(ir+Jr,La),Qr=Mt(Dr),Vn=yt(tn,Gr);function Aa(){var Ya,Ga,xa=yt(tn,Gr);xa&&(Ya=xa[0]-Vn[0],Ga=xa[1]-Vn[1],_r|=Ya|Ga,Vn=xa,sn({type:"drag",x:xa[0]+qr[0],y:xa[1]+qr[1],dx:Ya,dy:Ga}))}function La(){yt(tn,Gr)&&(en.on(or+Jr,null).on(ir+Jr,null),Qr(_r),sn({type:"dragend"}))}xe?qr=[(qr=xe.apply(Rr,arguments)).x-Vn[0],qr.y-Vn[1]]:qr=[0,0],sn({type:"dragstart"})}}return Je.origin=function(Lt){return arguments.length?(xe=Lt,Je):xe},t.rebind(Je,le,"on")},t.touches=function(le,xe){return arguments.length<2&&(xe=te().touches),xe?n(xe).map(function(Re){var Ue=Se(le,Re);return Ue.identifier=Re.identifier,Ue}):[]};var ge=1e-6,we=Math.PI,He=2*we,Xe=He-ge,ut=we/2,Ze=we/180,qe=180/we;function Ft(le,xe,Re){return(xe[0]-le[0])*(Re[1]-le[1])-(xe[1]-le[1])*(Re[0]-le[0])}function Pt(le){return le>1?ut:le<-1?-ut:Math.asin(le)}function Sr(le){return((le=Math.exp(le))+1/le)/2}var $t=Math.SQRT2;t.interpolateZoom=function(le,xe){var Rr,Dr,Re=le[0],Ue=le[1],Je=le[2],tt=xe[0],Lt=xe[1],yt=xe[2],Ot=tt-Re,or=Lt-Ue,ir=Ot*Ot+or*or;if(ir<1e-12)Dr=Math.log(yt/Je)/$t,Rr=function(qr){return[Re+qr*Ot,Ue+qr*or,Je*Math.exp($t*qr*Dr)]};else{var tn=Math.sqrt(ir),sn=(yt*yt-Je*Je+4*ir)/(2*Je*2*tn),_r=(yt*yt-Je*Je-4*ir)/(2*yt*2*tn),Gr=Math.log(Math.sqrt(sn*sn+1)-sn),Jr=Math.log(Math.sqrt(_r*_r+1)-_r);Dr=(Jr-Gr)/$t,Rr=function(qr){var en=qr*Dr,Qr=Sr(Gr),Vn=Je/(2*tn)*(Qr*function Kr(le){return((le=Math.exp(2*le))-1)/(le+1)}($t*en+Gr)-function cr(le){return((le=Math.exp(le))-1/le)/2}(Gr));return[Re+Vn*Ot,Ue+Vn*or,Je*Qr/Sr($t*en+Gr)]}}return Rr.duration=1e3*Dr,Rr},t.behavior.zoom=function(){var xe,Re,Ue,Rr,tn,_r,Gr,Jr,qr,le={x:0,y:0,k:1},Je=[960,500],tt=rt,Lt=250,yt=0,Ot="mousedown.zoom",or="mousemove.zoom",ir="mouseup.zoom",Dr="touchstart.zoom",sn=q(en,"zoomstart","zoom","zoomend");function en(ia){ia.on(Ot,Ha).on(ht+".zoom",Yi).on("dblclick.zoom",ai).on(Dr,hi)}function Qr(ia){return[(ia[0]-le.x)/le.k,(ia[1]-le.y)/le.k]}function Aa(ia){le.k=Math.max(tt[0],Math.min(tt[1],ia))}function La(ia,vi){vi=function Vn(ia){return[ia[0]*le.k+le.x,ia[1]*le.k+le.y]}(vi),le.x+=ia[0]-vi[0],le.y+=ia[1]-vi[1]}function xa(ia,vi,Si,Pi){ia.__chart__={x:le.x,y:le.y,k:le.k},Aa(Math.pow(2,Pi)),La(Re=vi,Si),ia=t.select(ia),Lt>0&&(ia=ia.transition().duration(Lt)),ia.call(en.event)}function Ya(){Gr&&Gr.domain(_r.range().map(function(ia){return(ia-le.x)/le.k}).map(_r.invert)),qr&&qr.domain(Jr.range().map(function(ia){return(ia-le.y)/le.k}).map(Jr.invert))}function Ga(ia){yt++||ia({type:"zoomstart"})}function ui(ia){Ya(),ia({type:"zoom",scale:le.k,translate:[le.x,le.y]})}function Za(ia){--yt||(ia({type:"zoomend"}),Re=null)}function Ha(){var ia=this,vi=sn.of(ia,arguments),Si=0,Pi=t.select(a(ia)).on(or,wr).on(ir,Nr),uo=Qr(t.mouse(ia)),Et=Mt(ia);function wr(){Si=1,La(t.mouse(ia),uo),ui(vi)}function Nr(){Pi.on(or,null).on(ir,null),Et(Si),Za(vi)}Mo.call(ia),Ga(vi)}function hi(){var uo,ia=this,vi=sn.of(ia,arguments),Si={},Pi=0,Et=".zoom-"+t.event.changedTouches[0].identifier,wr="touchmove"+Et,Nr="touchend"+Et,vn=[],bn=t.select(ia),xn=Mt(ia);function Tn(){var Qn=t.touches(ia);return uo=le.k,Qn.forEach(function(Fa){Fa.identifier in Si&&(Si[Fa.identifier]=Qr(Fa))}),Qn}function Gn(){var Qn=t.event.target;t.select(Qn).on(wr,ba).on(Nr,wa),vn.push(Qn);for(var Fa=t.event.changedTouches,ea=0,ra=Fa.length;ea<ra;++ea)Si[Fa[ea].identifier]=null;var Bn=Tn(),dn=Date.now();if(1===Bn.length){if(dn-tn<500){var kn=Bn[0];xa(ia,kn,Si[kn.identifier],Math.floor(Math.log(le.k)/Math.LN2)+1),B()}tn=dn}else if(Bn.length>1){kn=Bn[0];var $n=Bn[1],na=kn[0]-$n[0],jn=kn[1]-$n[1];Pi=na*na+jn*jn}}function ba(){var Fa,ea,ra,Bn,Qn=t.touches(ia);Mo.call(ia);for(var dn=0,kn=Qn.length;dn<kn;++dn,Bn=null)if(ra=Qn[dn],Bn=Si[ra.identifier]){if(ea)break;Fa=ra,ea=Bn}if(Bn){var $n=($n=ra[0]-Fa[0])*$n+($n=ra[1]-Fa[1])*$n,na=Pi&&Math.sqrt($n/Pi);Fa=[(Fa[0]+ra[0])/2,(Fa[1]+ra[1])/2],ea=[(ea[0]+Bn[0])/2,(ea[1]+Bn[1])/2],Aa(na*uo)}tn=null,La(Fa,ea),ui(vi)}function wa(){if(t.event.touches.length){for(var Qn=t.event.changedTouches,Fa=0,ea=Qn.length;Fa<ea;++Fa)delete Si[Qn[Fa].identifier];for(var ra in Si)return void Tn()}t.selectAll(vn).on(Et,null),bn.on(Ot,Ha).on(Dr,hi),xn(),Za(vi)}Gn(),Ga(vi),bn.on(Ot,null).on(Dr,Gn)}function Yi(){var ia=sn.of(this,arguments);Rr?clearTimeout(Rr):(Mo.call(this),xe=Qr(Re=Ue||t.mouse(this)),Ga(ia)),Rr=setTimeout(function(){Rr=null,Za(ia)},50),B(),Aa(Math.pow(2,.002*$e())*le.k),La(Re,xe),ui(ia)}function ai(){var ia=t.mouse(this),vi=Math.log(le.k)/Math.LN2;xa(this,ia,Qr(ia),t.event.shiftKey?Math.ceil(vi)-1:Math.floor(vi)+1)}return ht||(ht="onwheel"in i?($e=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?($e=function(){return t.event.wheelDelta},"mousewheel"):($e=function(){return-t.event.detail},"MozMousePixelScroll")),en.event=function(ia){ia.each(function(){var vi=sn.of(this,arguments),Si=le;$i?t.select(this).transition().each("start.zoom",function(){le=this.__chart__||{x:0,y:0,k:1},Ga(vi)}).tween("zoom:zoom",function(){var Pi=Je[0],uo=Je[1],Et=Re?Re[0]:Pi/2,wr=Re?Re[1]:uo/2,Nr=t.interpolateZoom([(Et-le.x)/le.k,(wr-le.y)/le.k,Pi/le.k],[(Et-Si.x)/Si.k,(wr-Si.y)/Si.k,Pi/Si.k]);return function(vn){var bn=Nr(vn),xn=Pi/bn[2];this.__chart__=le={x:Et-bn[0]*xn,y:wr-bn[1]*xn,k:xn},ui(vi)}}).each("interrupt.zoom",function(){Za(vi)}).each("end.zoom",function(){Za(vi)}):(this.__chart__=le,Ga(vi),ui(vi),Za(vi))})},en.translate=function(ia){return arguments.length?(le={x:+ia[0],y:+ia[1],k:le.k},Ya(),en):[le.x,le.y]},en.scale=function(ia){return arguments.length?(le={x:le.x,y:le.y,k:null},Aa(+ia),Ya(),en):le.k},en.scaleExtent=function(ia){return arguments.length?(tt=null==ia?rt:[+ia[0],+ia[1]],en):tt},en.center=function(ia){return arguments.length?(Ue=ia&&[+ia[0],+ia[1]],en):Ue},en.size=function(ia){return arguments.length?(Je=ia&&[+ia[0],+ia[1]],en):Je},en.duration=function(ia){return arguments.length?(Lt=+ia,en):Lt},en.x=function(ia){return arguments.length?(Gr=ia,_r=ia.copy(),le={x:0,y:0,k:1},en):Gr},en.y=function(ia){return arguments.length?(qr=ia,Jr=ia.copy(),le={x:0,y:0,k:1},en):qr},t.rebind(en,sn,"on")};var $e,ht,rt=[0,1/0];function gt(){}function ft(le,xe,Re){return this instanceof ft?(this.h=+le,this.s=+xe,void(this.l=+Re)):arguments.length<2?le instanceof ft?new ft(le.h,le.s,le.l):an(""+le,hn,ft):new ft(le,xe,Re)}t.color=gt,gt.prototype.toString=function(){return this.rgb()+""},t.hsl=ft;var Ct=ft.prototype=new gt;function sr(le,xe,Re){var Ue,Je;function Lt(yt){return Math.round(255*function tt(yt){return yt>360?yt-=360:yt<0&&(yt+=360),yt<60?Ue+(Je-Ue)*yt/60:yt<180?Je:yt<240?Ue+(Je-Ue)*(240-yt)/60:Ue}(yt))}return le=isNaN(le)?0:(le%=360)<0?le+360:le,xe=isNaN(xe)||xe<0?0:xe>1?1:xe,Ue=2*(Re=Re<0?0:Re>1?1:Re)-(Je=Re<=.5?Re*(1+xe):Re+xe-Re*xe),new xr(Lt(le+120),Lt(le),Lt(le-120))}function tr(le,xe,Re){return this instanceof tr?(this.h=+le,this.c=+xe,void(this.l=+Re)):arguments.length<2?le instanceof tr?new tr(le.h,le.c,le.l):br(le instanceof zr?le.l:(le=An((le=t.rgb(le)).r,le.g,le.b)).l,le.a,le.b):new tr(le,xe,Re)}Ct.brighter=function(le){return le=Math.pow(.7,arguments.length?le:1),new ft(this.h,this.s,this.l/le)},Ct.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new ft(this.h,this.s,le*this.l)},Ct.rgb=function(){return sr(this.h,this.s,this.l)},t.hcl=tr;var Cr=tr.prototype=new gt;function Hr(le,xe,Re){return isNaN(le)&&(le=0),isNaN(xe)&&(xe=0),new zr(Re,Math.cos(le*=Ze)*xe,Math.sin(le)*xe)}function zr(le,xe,Re){return this instanceof zr?(this.l=+le,this.a=+xe,void(this.b=+Re)):arguments.length<2?le instanceof zr?new zr(le.l,le.a,le.b):le instanceof tr?Hr(le.h,le.c,le.l):An((le=xr(le)).r,le.g,le.b):new zr(le,xe,Re)}Cr.brighter=function(le){return new tr(this.h,this.c,Math.min(100,this.l+Wr*(arguments.length?le:1)))},Cr.darker=function(le){return new tr(this.h,this.c,Math.max(0,this.l-Wr*(arguments.length?le:1)))},Cr.rgb=function(){return Hr(this.h,this.c,this.l).rgb()},t.lab=zr;var Wr=18,Gt=zr.prototype=new gt;function hr(le,xe,Re){var Ue=(le+16)/116,Je=Ue+xe/500,tt=Ue-Re/200;return new xr(wt(3.2404542*(Je=.95047*Ut(Je))-1.5371385*(Ue=1*Ut(Ue))-.4985314*(tt=1.08883*Ut(tt))),wt(-.969266*Je+1.8760108*Ue+.041556*tt),wt(.0556434*Je-.2040259*Ue+1.0572252*tt))}function br(le,xe,Re){return le>0?new tr(Math.atan2(Re,xe)*qe,Math.sqrt(xe*xe+Re*Re),le):new tr(NaN,NaN,le)}function Ut(le){return le>.206893034?le*le*le:(le-4/29)/7.787037}function Kt(le){return le>.008856?Math.pow(le,1/3):7.787037*le+4/29}function wt(le){return Math.round(255*(le<=.00304?12.92*le:1.055*Math.pow(le,1/2.4)-.055))}function xr(le,xe,Re){return this instanceof xr?(this.r=~~le,this.g=~~xe,void(this.b=~~Re)):arguments.length<2?le instanceof xr?new xr(le.r,le.g,le.b):an(""+le,xr,sr):new xr(le,xe,Re)}function Ir(le){return new xr(le>>16,le>>8&255,255&le)}function Ur(le){return Ir(le)+""}Gt.brighter=function(le){return new zr(Math.min(100,this.l+Wr*(arguments.length?le:1)),this.a,this.b)},Gt.darker=function(le){return new zr(Math.max(0,this.l-Wr*(arguments.length?le:1)),this.a,this.b)},Gt.rgb=function(){return hr(this.l,this.a,this.b)},t.rgb=xr;var qt=xr.prototype=new gt;function on(le){return le<16?"0"+Math.max(0,le).toString(16):Math.min(255,le).toString(16)}function an(le,xe,Re){var Lt,yt,Ot,Ue=0,Je=0,tt=0;if(Lt=/([a-z]+)\((.*)\)/.exec(le=le.toLowerCase()))switch(yt=Lt[2].split(","),Lt[1]){case"hsl":return Re(parseFloat(yt[0]),parseFloat(yt[1])/100,parseFloat(yt[2])/100);case"rgb":return xe(sa(yt[0]),sa(yt[1]),sa(yt[2]))}return(Ot=Rn.get(le))?xe(Ot.r,Ot.g,Ot.b):(null!=le&&"#"===le.charAt(0)&&!isNaN(Ot=parseInt(le.slice(1),16))&&(4===le.length?(Ue=(3840&Ot)>>4,Ue|=Ue>>4,Je=240&Ot,Je|=Je>>4,tt=15&Ot,tt|=tt<<4):7===le.length&&(Ue=(16711680&Ot)>>16,Je=(65280&Ot)>>8,tt=255&Ot)),xe(Ue,Je,tt))}function hn(le,xe,Re){var Lt,yt,Ue=Math.min(le/=255,xe/=255,Re/=255),Je=Math.max(le,xe,Re),tt=Je-Ue,Ot=(Je+Ue)/2;return tt?(yt=Ot<.5?tt/(Je+Ue):tt/(2-Je-Ue),Lt=le==Je?(xe-Re)/tt+(xe<Re?6:0):xe==Je?(Re-le)/tt+2:(le-xe)/tt+4,Lt*=60):(Lt=NaN,yt=Ot>0&&Ot<1?0:Lt),new ft(Lt,yt,Ot)}function An(le,xe,Re){var Ue=Kt((.4124564*(le=Sn(le))+.3575761*(xe=Sn(xe))+.1804375*(Re=Sn(Re)))/.95047),Je=Kt((.2126729*le+.7151522*xe+.072175*Re)/1);return zr(116*Je-16,500*(Ue-Je),200*(Je-Kt((.0193339*le+.119192*xe+.9503041*Re)/1.08883)))}function Sn(le){return(le/=255)<=.04045?le/12.92:Math.pow((le+.055)/1.055,2.4)}function sa(le){var xe=parseFloat(le);return"%"===le.charAt(le.length-1)?Math.round(2.55*xe):xe}qt.brighter=function(le){le=Math.pow(.7,arguments.length?le:1);var xe=this.r,Re=this.g,Ue=this.b,Je=30;return xe||Re||Ue?(xe&&xe<Je&&(xe=Je),Re&&Re<Je&&(Re=Je),Ue&&Ue<Je&&(Ue=Je),new xr(Math.min(255,xe/le),Math.min(255,Re/le),Math.min(255,Ue/le))):new xr(Je,Je,Je)},qt.darker=function(le){return new xr((le=Math.pow(.7,arguments.length?le:1))*this.r,le*this.g,le*this.b)},qt.hsl=function(){return hn(this.r,this.g,this.b)},qt.toString=function(){return"#"+on(this.r)+on(this.g)+on(this.b)};var Rn=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Yr(le){return"function"==typeof le?le:function(){return le}}function vr(le){return function(xe,Re,Ue){return 2===arguments.length&&"function"==typeof Re&&(Ue=Re,Re=null),nn(xe,Re,le,Ue)}}function nn(le,xe,Re,Ue){var Je={},tt=t.dispatch("beforesend","progress","load","error"),Lt={},yt=new XMLHttpRequest,Ot=null;function or(){var Rr,ir=yt.status;if(!ir&&function Xn(le){var xe=le.responseType;return xe&&"text"!==xe?le.response:le.responseText}(yt)||ir>=200&&ir<300||304===ir){try{Rr=Re.call(Je,yt)}catch(Dr){return void tt.error.call(Je,Dr)}tt.load.call(Je,Rr)}else tt.error.call(Je,yt)}return self.XDomainRequest&&!("withCredentials"in yt)&&/^(http(s)?:)?\/\//.test(le)&&(yt=new XDomainRequest),"onload"in yt?yt.onload=yt.onerror=or:yt.onreadystatechange=function(){yt.readyState>3&&or()},yt.onprogress=function(ir){var Rr=t.event;t.event=ir;try{tt.progress.call(Je,yt)}finally{t.event=Rr}},Je.header=function(ir,Rr){return ir=(ir+"").toLowerCase(),arguments.length<2?Lt[ir]:(null==Rr?delete Lt[ir]:Lt[ir]=Rr+"",Je)},Je.mimeType=function(ir){return arguments.length?(xe=null==ir?null:ir+"",Je):xe},Je.responseType=function(ir){return arguments.length?(Ot=ir,Je):Ot},Je.response=function(ir){return Re=ir,Je},["get","post"].forEach(function(ir){Je[ir]=function(){return Je.send.apply(Je,[ir].concat(n(arguments)))}}),Je.send=function(ir,Rr,Dr){if(2===arguments.length&&"function"==typeof Rr&&(Dr=Rr,Rr=null),yt.open(ir,le,!0),null!=xe&&!("accept"in Lt)&&(Lt.accept=xe+",*/*"),yt.setRequestHeader)for(var tn in Lt)yt.setRequestHeader(tn,Lt[tn]);return null!=xe&&yt.overrideMimeType&&yt.overrideMimeType(xe),null!=Ot&&(yt.responseType=Ot),null!=Dr&&Je.on("error",Dr).on("load",function(sn){Dr(null,sn)}),tt.beforesend.call(Je,yt),yt.send(Rr??null),Je},Je.abort=function(){return yt.abort(),Je},t.rebind(Je,tt,"on"),null==Ue?Je:Je.get(function Or(le){return 1===le.length?function(xe,Re){le(null==xe?Re:null)}:le}(Ue))}Rn.forEach(function(le,xe){Rn.set(le,Ir(xe))}),t.functor=Yr,t.xhr=vr(k),t.dsv=function(le,xe){var Re=new RegExp('["'+le+"\n]"),Ue=le.charCodeAt(0);function Je(or,ir,Rr){arguments.length<3&&(Rr=ir,ir=null);var Dr=nn(or,xe,null==ir?tt:Lt(ir),Rr);return Dr.row=function(tn){return arguments.length?Dr.response(null==(ir=tn)?tt:Lt(tn)):ir},Dr}function tt(or){return Je.parse(or.responseText)}function Lt(or){return function(ir){return Je.parse(ir.responseText,or)}}function yt(or){return or.map(Ot).join(le)}function Ot(or){return Re.test(or)?'"'+or.replace(/\"/g,'""')+'"':or}return Je.parse=function(or,ir){var Rr;return Je.parseRows(or,function(Dr,tn){if(Rr)return Rr(Dr,tn-1);var sn=function(_r){for(var Gr={},Jr=Dr.length,qr=0;qr<Jr;++qr)Gr[Dr[qr]]=_r[qr];return Gr};Rr=ir?function(_r,Gr){return ir(sn(_r),Gr)}:sn})},Je.parseRows=function(or,ir){var Jr,qr,Rr={},Dr={},tn=[],sn=or.length,_r=0,Gr=0;function en(){if(_r>=sn)return Dr;if(qr)return qr=!1,Rr;var Vn=_r;if(34===or.charCodeAt(Vn)){for(var Aa=Vn;Aa++<sn;)if(34===or.charCodeAt(Aa)){if(34!==or.charCodeAt(Aa+1))break;++Aa}return _r=Aa+2,13===(La=or.charCodeAt(Aa+1))?(qr=!0,10===or.charCodeAt(Aa+2)&&++_r):10===La&&(qr=!0),or.slice(Vn+1,Aa).replace(/""/g,'"')}for(;_r<sn;){var La,xa=1;if(10===(La=or.charCodeAt(_r++)))qr=!0;else if(13===La)qr=!0,10===or.charCodeAt(_r)&&(++_r,++xa);else if(La!==Ue)continue;return or.slice(Vn,_r-xa)}return or.slice(Vn)}for(;(Jr=en())!==Dr;){for(var Qr=[];Jr!==Rr&&Jr!==Dr;)Qr.push(Jr),Jr=en();ir&&null==(Qr=ir(Qr,Gr++))||tn.push(Qr)}return tn},Je.format=function(or){if(Array.isArray(or[0]))return Je.formatRows(or);var ir=new D,Rr=[];return or.forEach(function(Dr){for(var tn in Dr)ir.has(tn)||Rr.push(ir.add(tn))}),[Rr.map(Ot).join(le)].concat(or.map(function(Dr){return Rr.map(function(tn){return Ot(Dr[tn])}).join(le)})).join("\n")},Je.formatRows=function(or){return or.map(yt).join("\n")},Je},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var Vr,wn,Ca,Ba,Ka=this[U(this,"requestAnimationFrame")]||function(le){setTimeout(le,17)};function Ja(le,xe,Re){var Ue=arguments.length;Ue<2&&(xe=0),Ue<3&&(Re=Date.now());var Je=Re+xe,tt={c:le,t:Je,n:null};return wn?wn.n=tt:Vr=tt,wn=tt,Ca||(Ba=clearTimeout(Ba),Ca=1,Ka(si)),tt}function si(){var le=Ra(),xe=Na()-le;xe>24?(isFinite(xe)&&(clearTimeout(Ba),Ba=setTimeout(si,xe)),Ca=0):(Ca=1,Ka(si))}function Ra(){for(var le=Date.now(),xe=Vr;xe;)le>=xe.t&&xe.c(le-xe.t)&&(xe.c=null),xe=xe.n;return le}function Na(){for(var le,xe=Vr,Re=1/0;xe;)xe.c?(xe.t<Re&&(Re=xe.t),xe=(le=xe).n):xe=le?le.n=xe.n:Vr=xe.n;return wn=le,Re}function Ni(le){return le[0]}function ha(le){return le[1]}function yi(le){for(var xe=le.length,Re=[0,1],Ue=2,Je=2;Je<xe;Je++){for(;Ue>1&&Ft(le[Re[Ue-2]],le[Re[Ue-1]],le[Je])<=0;)--Ue;Re[Ue++]=Je}return Re.slice(0,Ue)}function gn(le,xe){return le[0]-xe[0]||le[1]-xe[1]}t.timer=function(){Ja.apply(this,arguments)},t.timer.flush=function(){Ra(),Na()},t.round=function(le,xe){return xe?Math.round(le*(xe=Math.pow(10,xe)))/xe:Math.round(le)},t.geom={},t.geom.hull=function(le){var xe=Ni,Re=ha;if(arguments.length)return Ue(le);function Ue(Je){if(Je.length<3)return[];var yt,tt=Yr(xe),Lt=Yr(Re),Ot=Je.length,or=[],ir=[];for(yt=0;yt<Ot;yt++)or.push([+tt.call(this,Je[yt],yt),+Lt.call(this,Je[yt],yt),yt]);for(or.sort(gn),yt=0;yt<Ot;yt++)ir.push([or[yt][0],-or[yt][1]]);var Rr=yi(or),Dr=yi(ir),tn=Dr[0]===Rr[0],sn=Dr[Dr.length-1]===Rr[Rr.length-1],_r=[];for(yt=Rr.length-1;yt>=0;--yt)_r.push(Je[or[Rr[yt]][2]]);for(yt=+tn;yt<Dr.length-sn;++yt)_r.push(Je[or[Dr[yt]][2]]);return _r}return Ue.x=function(Je){return arguments.length?(xe=Je,Ue):xe},Ue.y=function(Je){return arguments.length?(Re=Je,Ue):Re},Ue},t.geom.polygon=function(le){return ie(le,Eo),le};var Eo=t.geom.polygon.prototype=[];function Qi(le,xe,Re){return(Re[0]-xe[0])*(le[1]-xe[1])<(Re[1]-xe[1])*(le[0]-xe[0])}function Ii(le,xe,Re,Ue){var Je=le[0],tt=Re[0],Lt=xe[0]-Je,yt=Ue[0]-tt,Ot=le[1],or=Re[1],ir=xe[1]-Ot,Rr=Ue[1]-or,Dr=(yt*(Ot-or)-Rr*(Je-tt))/(Rr*Lt-yt*ir);return[Je+Dr*Lt,Ot+Dr*ir]}function Xo(le){var xe=le[0],Re=le[le.length-1];return!(xe[0]-Re[0]||xe[1]-Re[1])}Eo.area=function(){for(var Re,le=-1,xe=this.length,Ue=this[xe-1],Je=0;++le<xe;)Re=Ue,Ue=this[le],Je+=Re[1]*Ue[0]-Re[0]*Ue[1];return.5*Je},Eo.centroid=function(le){var tt,yt,xe=-1,Re=this.length,Ue=0,Je=0,Lt=this[Re-1];for(arguments.length||(le=-1/(6*this.area()));++xe<Re;)tt=Lt,Lt=this[xe],yt=tt[0]*Lt[1]-Lt[0]*tt[1],Ue+=(tt[0]+Lt[0])*yt,Je+=(tt[1]+Lt[1])*yt;return[Ue*le,Je*le]},Eo.clip=function(le){for(var xe,tt,Lt,Ot,or,ir,Re=Xo(le),Ue=-1,Je=this.length-Xo(this),yt=this[Je-1];++Ue<Je;){for(xe=le.slice(),le.length=0,Ot=this[Ue],or=xe[(Lt=xe.length-Re)-1],tt=-1;++tt<Lt;)Qi(ir=xe[tt],yt,Ot)?(Qi(or,yt,Ot)||le.push(Ii(or,ir,yt,Ot)),le.push(ir)):Qi(or,yt,Ot)&&le.push(Ii(or,ir,yt,Ot)),or=ir;Re&&le.push(le[0]),yt=Ot}return le};var ao,io,Lo,wo,In,qo=[],Ta=[];function ls(){Hs(this),this.edge=this.site=this.circle=null}function Do(le){var xe=qo.pop()||new ls;return xe.site=le,xe}function oo(le){fi(le),Lo.remove(le),qo.push(le),Hs(le)}function ys(le){var xe=le.circle,Re=xe.x,Ue=xe.cy,Je={x:Re,y:Ue},tt=le.P,Lt=le.N,yt=[le];oo(le);for(var Ot=tt;Ot.circle&&m(Re-Ot.circle.x)<ge&&m(Ue-Ot.circle.cy)<ge;)tt=Ot.P,yt.unshift(Ot),oo(Ot),Ot=tt;yt.unshift(Ot),fi(Ot);for(var or=Lt;or.circle&&m(Re-or.circle.x)<ge&&m(Ue-or.circle.cy)<ge;)Lt=or.N,yt.push(or),oo(or),or=Lt;yt.push(or),fi(or);var Rr,ir=yt.length;for(Rr=1;Rr<ir;++Rr)or=yt[Rr],Ot=yt[Rr-1],Ls(or.edge,Ot.site,or.site,Je);Ot=yt[0],(or=yt[ir-1]).edge=Ro(Ot.site,or.site,null,Je),eo(Ot),eo(or)}function as(le){for(var Ue,Je,tt,Lt,xe=le.x,Re=le.y,yt=Lo._;yt;)if((tt=el(yt,Re)-xe)>ge)yt=yt.L;else{if(!((Lt=xe-To(yt,Re))>ge)){tt>-ge?(Ue=yt.P,Je=yt):Lt>-ge?(Ue=yt,Je=yt.N):Ue=Je=yt;break}if(!yt.R){Ue=yt;break}yt=yt.R}var Ot=Do(le);if(Lo.insert(Ue,Ot),Ue||Je){if(Ue===Je)return fi(Ue),Je=Do(Ue.site),Lo.insert(Ot,Je),Ot.edge=Je.edge=Ro(Ue.site,Ot.site),eo(Ue),void eo(Je);if(!Je)return void(Ot.edge=Ro(Ue.site,Ot.site));fi(Ue),fi(Je);var or=Ue.site,ir=or.x,Rr=or.y,Dr=le.x-ir,tn=le.y-Rr,sn=Je.site,_r=sn.x-ir,Gr=sn.y-Rr,Jr=2*(Dr*Gr-tn*_r),qr=Dr*Dr+tn*tn,en=_r*_r+Gr*Gr,Qr={x:(Gr*qr-tn*en)/Jr+ir,y:(Dr*en-_r*qr)/Jr+Rr};Ls(Je.edge,or,sn,Qr),Ot.edge=Ro(or,le,null,Qr),Je.edge=Ro(le,sn,null,Qr),eo(Ue),eo(Je)}}function el(le,xe){var Re=le.site,Ue=Re.x,Je=Re.y,tt=Je-xe;if(!tt)return Ue;var Lt=le.P;if(!Lt)return-1/0;var yt=(Re=Lt.site).x,Ot=Re.y,or=Ot-xe;if(!or)return yt;var ir=yt-Ue,Rr=1/tt-1/or,Dr=ir/or;return Rr?(-Dr+Math.sqrt(Dr*Dr-2*Rr*(ir*ir/(-2*or)-Ot+or/2+Je-tt/2)))/Rr+Ue:(Ue+yt)/2}function To(le,xe){var Re=le.N;if(Re)return el(Re,xe);var Ue=le.site;return Ue.y===xe?Ue.x:1/0}function va(le){this.site=le,this.edges=[]}function bi(le,xe){return xe.angle-le.angle}function so(){Hs(this),this.x=this.y=this.arc=this.site=this.cy=null}function eo(le){var xe=le.P,Re=le.N;if(xe&&Re){var Ue=xe.site,Je=le.site,tt=Re.site;if(Ue!==tt){var Lt=Je.x,yt=Je.y,Ot=Ue.x-Lt,or=Ue.y-yt,ir=tt.x-Lt,Rr=2*(Ot*(Gr=tt.y-yt)-or*ir);if(!(Rr>=-1e-12)){var Dr=Ot*Ot+or*or,tn=ir*ir+Gr*Gr,sn=(Gr*Dr-or*tn)/Rr,_r=(Ot*tn-ir*Dr)/Rr,Gr=_r+yt,Jr=Ta.pop()||new so;Jr.arc=le,Jr.site=Je,Jr.x=sn+Lt,Jr.y=Gr+Math.sqrt(sn*sn+_r*_r),Jr.cy=Gr,le.circle=Jr;for(var qr=null,en=In._;en;)if(Jr.y<en.y||Jr.y===en.y&&Jr.x<=en.x){if(!en.L){qr=en.P;break}en=en.L}else{if(!en.R){qr=en;break}en=en.R}In.insert(qr,Jr),qr||(wo=Jr)}}}}function fi(le){var xe=le.circle;xe&&(xe.P||(wo=xe.N),In.remove(xe),Ta.push(xe),Hs(xe),le.circle=null)}function ms(le,xe){var Re=le.b;if(Re)return!0;var Gr,Jr,Ue=le.a,Je=xe[0][0],tt=xe[1][0],Lt=xe[0][1],yt=xe[1][1],Ot=le.l,or=le.r,ir=Ot.x,Rr=Ot.y,Dr=or.x,tn=or.y,sn=(ir+Dr)/2,_r=(Rr+tn)/2;if(tn===Rr){if(sn<Je||sn>=tt)return;if(ir>Dr){if(Ue){if(Ue.y>=yt)return}else Ue={x:sn,y:Lt};Re={x:sn,y:yt}}else{if(Ue){if(Ue.y<Lt)return}else Ue={x:sn,y:yt};Re={x:sn,y:Lt}}}else if(Jr=_r-(Gr=(ir-Dr)/(tn-Rr))*sn,Gr<-1||Gr>1)if(ir>Dr){if(Ue){if(Ue.y>=yt)return}else Ue={x:(Lt-Jr)/Gr,y:Lt};Re={x:(yt-Jr)/Gr,y:yt}}else{if(Ue){if(Ue.y<Lt)return}else Ue={x:(yt-Jr)/Gr,y:yt};Re={x:(Lt-Jr)/Gr,y:Lt}}else if(Rr<tn){if(Ue){if(Ue.x>=tt)return}else Ue={x:Je,y:Gr*Je+Jr};Re={x:tt,y:Gr*tt+Jr}}else{if(Ue){if(Ue.x<Je)return}else Ue={x:tt,y:Gr*tt+Jr};Re={x:Je,y:Gr*Je+Jr}}return le.a=Ue,le.b=Re,!0}function tl(le,xe){this.l=le,this.r=xe,this.a=this.b=null}function Ro(le,xe,Re,Ue){var Je=new tl(le,xe);return ao.push(Je),Re&&Ls(Je,le,xe,Re),Ue&&Ls(Je,xe,le,Ue),io[le.i].edges.push(new xs(Je,le,xe)),io[xe.i].edges.push(new xs(Je,xe,le)),Je}function yo(le,xe,Re){var Ue=new tl(le,null);return Ue.a=xe,Ue.b=Re,ao.push(Ue),Ue}function Ls(le,xe,Re,Ue){le.a||le.b?le.l===Re?le.b=Ue:le.a=Ue:(le.a=Ue,le.l=xe,le.r=Re)}function xs(le,xe,Re){var Ue=le.a,Je=le.b;this.edge=le,this.site=xe,this.angle=Re?Math.atan2(Re.y-xe.y,Re.x-xe.x):le.l===xe?Math.atan2(Je.x-Ue.x,Ue.y-Je.y):Math.atan2(Ue.x-Je.x,Je.y-Ue.y)}function Ll(){this._=null}function Hs(le){le.U=le.C=le.L=le.R=le.P=le.N=null}function rl(le,xe){var Re=xe,Ue=xe.R,Je=Re.U;Je?Je.L===Re?Je.L=Ue:Je.R=Ue:le._=Ue,Ue.U=Je,Re.U=Ue,Re.R=Ue.L,Re.R&&(Re.R.U=Re),Ue.L=Re}function Pl(le,xe){var Re=xe,Ue=xe.L,Je=Re.U;Je?Je.L===Re?Je.L=Ue:Je.R=Ue:le._=Ue,Ue.U=Je,Re.U=Ue,Re.L=Ue.R,Re.L&&(Re.L.U=Re),Ue.R=Re}function ji(le){for(;le.L;)le=le.L;return le}function Il(le,xe){var Ue,Je,tt,Re=le.sort(pu).pop();for(ao=[],io=new Array(le.length),Lo=new Ll,In=new Ll;;)if(tt=wo,Re&&(!tt||Re.y<tt.y||Re.y===tt.y&&Re.x<tt.x))(Re.x!==Ue||Re.y!==Je)&&(io[Re.i]=new va(Re),as(Re),Ue=Re.x,Je=Re.y),Re=le.pop();else{if(!tt)break;ys(tt.arc)}xe&&(function Os(le){for(var Je,xe=ao,Re=function Ql(le,xe,Re,Ue){return function(Je){var _r,tt=Je.a,Lt=Je.b,yt=tt.x,Ot=tt.y,Rr=0,Dr=1,tn=Lt.x-yt,sn=Lt.y-Ot;if(_r=le-yt,tn||!(_r>0)){if(_r/=tn,tn<0){if(_r<Rr)return;_r<Dr&&(Dr=_r)}else if(tn>0){if(_r>Dr)return;_r>Rr&&(Rr=_r)}if(_r=Re-yt,tn||!(_r<0)){if(_r/=tn,tn<0){if(_r>Dr)return;_r>Rr&&(Rr=_r)}else if(tn>0){if(_r<Rr)return;_r<Dr&&(Dr=_r)}if(_r=xe-Ot,sn||!(_r>0)){if(_r/=sn,sn<0){if(_r<Rr)return;_r<Dr&&(Dr=_r)}else if(sn>0){if(_r>Dr)return;_r>Rr&&(Rr=_r)}if(_r=Ue-Ot,sn||!(_r<0)){if(_r/=sn,sn<0){if(_r>Dr)return;_r>Rr&&(Rr=_r)}else if(sn>0){if(_r<Rr)return;_r<Dr&&(Dr=_r)}return Rr>0&&(Je.a={x:yt+Rr*tn,y:Ot+Rr*sn}),Dr<1&&(Je.b={x:yt+Dr*tn,y:Ot+Dr*sn}),Je}}}}}}(le[0][0],le[0][1],le[1][0],le[1][1]),Ue=xe.length;Ue--;)(!ms(Je=xe[Ue],le)||!Re(Je)||m(Je.a.x-Je.b.x)<ge&&m(Je.a.y-Je.b.y)<ge)&&(Je.a=Je.b=null,xe.splice(Ue,1))}(xe),function Ai(le){for(var tt,Lt,yt,Ot,Rr,Dr,tn,sn,_r,Gr,xe=le[0][0],Re=le[1][0],Ue=le[0][1],Je=le[1][1],or=io,ir=or.length;ir--;)if((Rr=or[ir])&&Rr.prepare())for(sn=(tn=Rr.edges).length,Dr=0;Dr<sn;)yt=(Gr=tn[Dr].end()).x,Ot=Gr.y,tt=(_r=tn[++Dr%sn].start()).x,Lt=_r.y,(m(yt-tt)>ge||m(Ot-Lt)>ge)&&(tn.splice(Dr,0,new xs(yo(Rr.site,Gr,m(yt-xe)<ge&&Je-Ot>ge?{x:xe,y:m(tt-xe)<ge?Lt:Je}:m(Ot-Je)<ge&&Re-yt>ge?{x:m(Lt-Je)<ge?tt:Re,y:Je}:m(yt-Re)<ge&&Ot-Ue>ge?{x:Re,y:m(tt-Re)<ge?Lt:Ue}:m(Ot-Ue)<ge&&yt-xe>ge?{x:m(Lt-Ue)<ge?tt:xe,y:Ue}:null),Rr.site,null)),++sn)}(xe));var Lt={cells:io,edges:ao};return Lo=In=ao=io=null,Lt}function pu(le,xe){return xe.y-le.y||xe.x-le.x}va.prototype.prepare=function(){for(var Re,le=this.edges,xe=le.length;xe--;)(!(Re=le[xe].edge).b||!Re.a)&&le.splice(xe,1);return le.sort(bi),le.length},xs.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ll.prototype={insert:function(le,xe){var Re,Ue,Je;if(le){if(xe.P=le,xe.N=le.N,le.N&&(le.N.P=xe),le.N=xe,le.R){for(le=le.R;le.L;)le=le.L;le.L=xe}else le.R=xe;Re=le}else this._?(le=ji(this._),xe.P=null,xe.N=le,le.P=le.L=xe,Re=le):(xe.P=xe.N=null,this._=xe,Re=null);for(xe.L=xe.R=null,xe.U=Re,xe.C=!0,le=xe;Re&&Re.C;)Re===(Ue=Re.U).L?(Je=Ue.R)&&Je.C?(Re.C=Je.C=!1,Ue.C=!0,le=Ue):(le===Re.R&&(rl(this,Re),Re=(le=Re).U),Re.C=!1,Ue.C=!0,Pl(this,Ue)):(Je=Ue.L)&&Je.C?(Re.C=Je.C=!1,Ue.C=!0,le=Ue):(le===Re.L&&(Pl(this,Re),Re=(le=Re).U),Re.C=!1,Ue.C=!0,rl(this,Ue)),Re=le.U;this._.C=!1},remove:function(le){le.N&&(le.N.P=le.P),le.P&&(le.P.N=le.N),le.N=le.P=null;var Re,tt,Lt,xe=le.U,Ue=le.L,Je=le.R;if(tt=Ue?Je?ji(Je):Ue:Je,xe?xe.L===le?xe.L=tt:xe.R=tt:this._=tt,Ue&&Je?(Lt=tt.C,tt.C=le.C,tt.L=Ue,Ue.U=tt,tt!==Je?(xe=tt.U,tt.U=le.U,le=tt.R,xe.L=le,tt.R=Je,Je.U=tt):(tt.U=xe,xe=tt,le=tt.R)):(Lt=le.C,le=tt),le&&(le.U=xe),!Lt){if(le&&le.C)return void(le.C=!1);do{if(le===this._)break;if(le===xe.L){if((Re=xe.R).C&&(Re.C=!1,xe.C=!0,rl(this,xe),Re=xe.R),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.R||!Re.R.C)&&(Re.L.C=!1,Re.C=!0,Pl(this,Re),Re=xe.R),Re.C=xe.C,xe.C=Re.R.C=!1,rl(this,xe),le=this._;break}}else if((Re=xe.L).C&&(Re.C=!1,xe.C=!0,Pl(this,xe),Re=xe.L),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.L||!Re.L.C)&&(Re.R.C=!1,Re.C=!0,rl(this,Re),Re=xe.L),Re.C=xe.C,xe.C=Re.L.C=!1,Pl(this,xe),le=this._;break}Re.C=!0,le=xe,xe=xe.U}while(!le.C);le&&(le.C=!1)}}},t.geom.voronoi=function(le){var xe=Ni,Re=ha,Ue=xe,Je=Re,tt=Ho;if(le)return Lt(le);function Lt(Ot){var or=new Array(Ot.length),ir=tt[0][0],Rr=tt[0][1],Dr=tt[1][0],tn=tt[1][1];return Il(yt(Ot),tt).cells.forEach(function(sn,_r){var Gr=sn.edges,Jr=sn.site;(or[_r]=Gr.length?Gr.map(function(en){var Qr=en.start();return[Qr.x,Qr.y]}):Jr.x>=ir&&Jr.x<=Dr&&Jr.y>=Rr&&Jr.y<=tn?[[ir,tn],[Dr,tn],[Dr,Rr],[ir,Rr]]:[]).point=Ot[_r]}),or}function yt(Ot){return Ot.map(function(or,ir){return{x:Math.round(Ue(or,ir)/ge)*ge,y:Math.round(Je(or,ir)/ge)*ge,i:ir}})}return Lt.links=function(Ot){return Il(yt(Ot)).edges.filter(function(or){return or.l&&or.r}).map(function(or){return{source:Ot[or.l.i],target:Ot[or.r.i]}})},Lt.triangles=function(Ot){var or=[];return Il(yt(Ot)).cells.forEach(function(ir,Rr){for(var Jr,Dr=ir.site,tn=ir.edges.sort(bi),sn=-1,_r=tn.length,qr=tn[_r-1].edge,en=qr.l===Dr?qr.r:qr.l;++sn<_r;)qr,Jr=en,en=(qr=tn[sn].edge).l===Dr?qr.r:qr.l,Rr<Jr.i&&Rr<en.i&&Zo(Dr,Jr,en)<0&&or.push([Ot[Rr],Ot[Jr.i],Ot[en.i]])}),or},Lt.x=function(Ot){return arguments.length?(Ue=Yr(xe=Ot),Lt):xe},Lt.y=function(Ot){return arguments.length?(Je=Yr(Re=Ot),Lt):Re},Lt.clipExtent=function(Ot){return arguments.length?(tt=Ot??Ho,Lt):tt===Ho?null:tt},Lt.size=function(Ot){return arguments.length?Lt.clipExtent(Ot&&[[0,0],Ot]):tt===Ho?null:tt&&tt[1]},Lt};var Ho=[[-1e6,-1e6],[1e6,1e6]];function Zo(le,xe,Re){return(le.x-Re.x)*(xe.y-le.y)-(le.x-xe.x)*(Re.y-le.y)}function Vs(le){return le.x}function Ps(le){return le.y}function nl(le,xe,Re,Ue,Je,tt){if(!le(xe,Re,Ue,Je,tt)){var Lt=.5*(Re+Je),yt=.5*(Ue+tt),Ot=xe.nodes;Ot[0]&&nl(le,Ot[0],Re,Ue,Lt,yt),Ot[1]&&nl(le,Ot[1],Lt,Ue,Je,yt),Ot[2]&&nl(le,Ot[2],Re,yt,Lt,tt),Ot[3]&&nl(le,Ot[3],Lt,yt,Je,tt)}}function Bo(le,xe,Re,Ue,Je,tt,Lt){var Ot,yt=1/0;return function or(ir,Rr,Dr,tn,sn){if(!(Rr>tt||Dr>Lt||tn<Ue||sn<Je)){if(_r=ir.point){var _r,Gr=xe-ir.x,Jr=Re-ir.y,qr=Gr*Gr+Jr*Jr;if(qr<yt){var en=Math.sqrt(yt=qr);Ue=xe-en,Je=Re-en,tt=xe+en,Lt=Re+en,Ot=_r}}for(var Qr=ir.nodes,Vn=.5*(Rr+tn),Aa=.5*(Dr+sn),Ya=(Re>=Aa)<<1|xe>=Vn,Ga=Ya+4;Ya<Ga;++Ya)if(ir=Qr[3&Ya])switch(3&Ya){case 0:or(ir,Rr,Dr,Vn,Aa);break;case 1:or(ir,Vn,Dr,tn,Aa);break;case 2:or(ir,Rr,Aa,Vn,sn);break;case 3:or(ir,Vn,Aa,tn,sn)}}}(le,Ue,Je,tt,Lt),Ot}function ko(le,xe){le=t.rgb(le),xe=t.rgb(xe);var Re=le.r,Ue=le.g,Je=le.b,tt=xe.r-Re,Lt=xe.g-Ue,yt=xe.b-Je;return function(Ot){return"#"+on(Math.round(Re+tt*Ot))+on(Math.round(Ue+Lt*Ot))+on(Math.round(Je+yt*Ot))}}function gu(le,xe){var Je,Re={},Ue={};for(Je in le)Je in xe?Re[Je]=Go(le[Je],xe[Je]):Ue[Je]=le[Je];for(Je in xe)Je in le||(Ue[Je]=xe[Je]);return function(tt){for(Je in Re)Ue[Je]=Re[Je](tt);return Ue}}function Ao(le,xe){return le=+le,xe=+xe,function(Re){return le*(1-Re)+xe*Re}}function us(le,xe){var Ue,Je,tt,Re=fs.lastIndex=Dl.lastIndex=0,Lt=-1,yt=[],Ot=[];for(le+="",xe+="";(Ue=fs.exec(le))&&(Je=Dl.exec(xe));)(tt=Je.index)>Re&&(tt=xe.slice(Re,tt),yt[Lt]?yt[Lt]+=tt:yt[++Lt]=tt),(Ue=Ue[0])===(Je=Je[0])?yt[Lt]?yt[Lt]+=Je:yt[++Lt]=Je:(yt[++Lt]=null,Ot.push({i:Lt,x:Ao(Ue,Je)})),Re=Dl.lastIndex;return Re<xe.length&&(tt=xe.slice(Re),yt[Lt]?yt[Lt]+=tt:yt[++Lt]=tt),yt.length<2?Ot[0]?(xe=Ot[0].x,function(or){return xe(or)+""}):function(){return xe}:(xe=Ot.length,function(or){for(var Rr,ir=0;ir<xe;++ir)yt[(Rr=Ot[ir]).i]=Rr.x(or);return yt.join("")})}t.geom.delaunay=function(le){return t.geom.voronoi().triangles(le)},t.geom.quadtree=function(le,xe,Re,Ue,Je){var yt,tt=Ni,Lt=ha;if(yt=arguments.length)return tt=Vs,Lt=Ps,3===yt&&(Je=Re,Ue=xe,Re=xe=0),Ot(le);function Ot(or){var ir,tn,sn,_r,Gr,Jr,qr,en,Qr,Rr=Yr(tt),Dr=Yr(Lt);if(null!=xe)Jr=xe,qr=Re,en=Ue,Qr=Je;else if(en=Qr=-(Jr=qr=1/0),tn=[],sn=[],Gr=or.length,yt)for(_r=0;_r<Gr;++_r)(ir=or[_r]).x<Jr&&(Jr=ir.x),ir.y<qr&&(qr=ir.y),ir.x>en&&(en=ir.x),ir.y>Qr&&(Qr=ir.y),tn.push(ir.x),sn.push(ir.y);else for(_r=0;_r<Gr;++_r){var Vn=+Rr(ir=or[_r],_r),Aa=+Dr(ir,_r);Vn<Jr&&(Jr=Vn),Aa<qr&&(qr=Aa),Vn>en&&(en=Vn),Aa>Qr&&(Qr=Aa),tn.push(Vn),sn.push(Aa)}var La=en-Jr,xa=Qr-qr;function Ya(Za,Ha,hi,Yi,ai,ia,vi,Si){if(!isNaN(hi)&&!isNaN(Yi))if(Za.leaf){var Pi=Za.x,uo=Za.y;if(null!=Pi)if(m(Pi-hi)+m(uo-Yi)<.01)Ga(Za,Ha,hi,Yi,ai,ia,vi,Si);else{var Et=Za.point;Za.x=Za.y=Za.point=null,Ga(Za,Et,Pi,uo,ai,ia,vi,Si),Ga(Za,Ha,hi,Yi,ai,ia,vi,Si)}else Za.x=hi,Za.y=Yi,Za.point=Ha}else Ga(Za,Ha,hi,Yi,ai,ia,vi,Si)}function Ga(Za,Ha,hi,Yi,ai,ia,vi,Si){var Pi=.5*(ai+vi),uo=.5*(ia+Si),Et=hi>=Pi,wr=Yi>=uo,Nr=wr<<1|Et;Za.leaf=!1,Et?ai=Pi:vi=Pi,wr?ia=uo:Si=uo,Ya(Za=Za.nodes[Nr]||(Za.nodes[Nr]={leaf:!0,nodes:[],point:null,x:null,y:null}),Ha,hi,Yi,ai,ia,vi,Si)}La>xa?Qr=qr+La:en=Jr+xa;var ui={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Za){Ya(ui,Za,+Rr(Za,++_r),+Dr(Za,_r),Jr,qr,en,Qr)},visit:function(Za){nl(Za,ui,Jr,qr,en,Qr)},find:function(Za){return Bo(ui,Za[0],Za[1],Jr,qr,en,Qr)}};if(_r=-1,null==xe){for(;++_r<Gr;)Ya(ui,or[_r],tn[_r],sn[_r],Jr,qr,en,Qr);--_r}else or.forEach(ui.add);return tn=sn=or=ir=null,ui}return Ot.x=function(or){return arguments.length?(tt=or,Ot):tt},Ot.y=function(or){return arguments.length?(Lt=or,Ot):Lt},Ot.extent=function(or){return arguments.length?(null==or?xe=Re=Ue=Je=null:(xe=+or[0][0],Re=+or[0][1],Ue=+or[1][0],Je=+or[1][1]),Ot):null==xe?null:[[xe,Re],[Ue,Je]]},Ot.size=function(or){return arguments.length?(null==or?xe=Re=Ue=Je=null:(xe=Re=0,Ue=+or[0],Je=+or[1]),Ot):null==xe?null:[Ue-xe,Je-Re]},Ot},t.interpolateRgb=ko,t.interpolateObject=gu,t.interpolateNumber=Ao,t.interpolateString=us;var fs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dl=new RegExp(fs.source,"g");function Go(le,xe){for(var Ue,Re=t.interpolators.length;--Re>=0&&!(Ue=t.interpolators[Re](le,xe)););return Ue}function yu(le,xe){var yt,Re=[],Ue=[],Je=le.length,tt=xe.length,Lt=Math.min(le.length,xe.length);for(yt=0;yt<Lt;++yt)Re.push(Go(le[yt],xe[yt]));for(;yt<Je;++yt)Ue[yt]=le[yt];for(;yt<tt;++yt)Ue[yt]=xe[yt];return function(Ot){for(yt=0;yt<Lt;++yt)Ue[yt]=Re[yt](Ot);return Ue}}t.interpolate=Go,t.interpolators=[function(le,xe){var Re=typeof xe;return("string"===Re?Rn.has(xe.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(xe)?ko:us:xe instanceof gt?ko:Array.isArray(xe)?yu:"object"===Re&&isNaN(xe)?gu:Ao)(le,xe)}],t.interpolateArray=yu;var es=function(){return k},Wi=t.map({linear:es,poly:function is(le){return function(xe){return Math.pow(xe,le)}},quad:function(){return $l},cubic:function(){return hf},sin:function(){return bs},exp:function(){return Ns},circle:function(){return Ds},elastic:function Bs(le,xe){var Re;return arguments.length<2&&(xe=.45),arguments.length?Re=xe/He*Math.asin(1/le):(le=1,Re=xe/4),function(Ue){return 1+le*Math.pow(2,-10*Ue)*Math.sin((Ue-Re)*He/xe)}},back:function Gs(le){return le||(le=1.70158),function(xe){return xe*xe*((le+1)*xe-le)}},bounce:function(){return Gl}}),mu=t.map({in:k,out:ts,"in-out":Rl,"out-in":function(le){return Rl(ts(le))}});function Is(le){return function(xe){return xe<=0?0:xe>=1?1:le(xe)}}function ts(le){return function(xe){return 1-le(1-xe)}}function Rl(le){return function(xe){return.5*(xe<.5?le(2*xe):2-le(2-2*xe))}}function $l(le){return le*le}function hf(le){return le*le*le}function rs(le){if(le<=0)return 0;if(le>=1)return 1;var xe=le*le,Re=xe*le;return 4*(le<.5?Re:3*(le-xe)+Re-.75)}function bs(le){return 1-Math.cos(le*ut)}function Ns(le){return Math.pow(2,10*(le-1))}function Ds(le){return 1-Math.sqrt(1-le*le)}function Gl(le){return le<1/2.75?7.5625*le*le:le<2/2.75?7.5625*(le-=1.5/2.75)*le+.75:le<2.5/2.75?7.5625*(le-=2.25/2.75)*le+.9375:7.5625*(le-=2.625/2.75)*le+.984375}function kl(le,xe){return xe-=le,function(Re){return Math.round(le+xe*Re)}}function xu(le){var xe=[le.a,le.b],Re=[le.c,le.d],Ue=ql(xe),Je=qu(xe,Re),tt=ql(function vf(le,xe,Re){return le[0]+=Re*xe[0],le[1]+=Re*xe[1],le}(Re,xe,-Je))||0;xe[0]*Re[1]<Re[0]*xe[1]&&(xe[0]*=-1,xe[1]*=-1,Ue*=-1,Je*=-1),this.rotate=(Ue?Math.atan2(xe[1],xe[0]):Math.atan2(-Re[0],Re[1]))*qe,this.translate=[le.e,le.f],this.scale=[Ue,tt],this.skew=tt?Math.atan2(Je,tt)*qe:0}function qu(le,xe){return le[0]*xe[0]+le[1]*xe[1]}function ql(le){var xe=Math.sqrt(qu(le,le));return xe&&(le[0]/=xe,le[1]/=xe),xe}t.ease=function(le){var xe=le.indexOf("-"),Re=xe>=0?le.slice(0,xe):le,Ue=xe>=0?le.slice(xe+1):"in";return Re=Wi.get(Re)||es,Is((Ue=mu.get(Ue)||k)(Re.apply(null,T.call(arguments,1))))},t.interpolateHcl=function zf(le,xe){le=t.hcl(le),xe=t.hcl(xe);var Re=le.h,Ue=le.c,Je=le.l,tt=xe.h-Re,Lt=xe.c-Ue,yt=xe.l-Je;return isNaN(Lt)&&(Lt=0,Ue=isNaN(Ue)?xe.c:Ue),isNaN(tt)?(tt=0,Re=isNaN(Re)?xe.h:Re):tt>180?tt-=360:tt<-180&&(tt+=360),function(Ot){return Hr(Re+tt*Ot,Ue+Lt*Ot,Je+yt*Ot)+""}},t.interpolateHsl=function $u(le,xe){le=t.hsl(le),xe=t.hsl(xe);var Re=le.h,Ue=le.s,Je=le.l,tt=xe.h-Re,Lt=xe.s-Ue,yt=xe.l-Je;return isNaN(Lt)&&(Lt=0,Ue=isNaN(Ue)?xe.s:Ue),isNaN(tt)?(tt=0,Re=isNaN(Re)?xe.h:Re):tt>180?tt-=360:tt<-180&&(tt+=360),function(Ot){return sr(Re+tt*Ot,Ue+Lt*Ot,Je+yt*Ot)+""}},t.interpolateLab=function Of(le,xe){le=t.lab(le),xe=t.lab(xe);var Re=le.l,Ue=le.a,Je=le.b,tt=xe.l-Re,Lt=xe.a-Ue,yt=xe.b-Je;return function(Ot){return hr(Re+tt*Ot,Ue+Lt*Ot,Je+yt*Ot)+""}},t.interpolateRound=kl,t.transform=function(le){var xe=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(Re){if(null!=Re){xe.setAttribute("transform",Re);var Ue=xe.transform.baseVal.consolidate()}return new xu(Ue?Ue.matrix:zu)})(le)},xu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var zu={a:1,b:0,c:0,d:1,e:0,f:0};function jl(le){return le.length?le.pop()+",":""}function co(le,xe){var Re=[],Ue=[];return le=t.transform(le),xe=t.transform(xe),function ef(le,xe,Re,Ue){if(le[0]!==xe[0]||le[1]!==xe[1]){var Je=Re.push("translate(",null,",",null,")");Ue.push({i:Je-4,x:Ao(le[0],xe[0])},{i:Je-2,x:Ao(le[1],xe[1])})}else(xe[0]||xe[1])&&Re.push("translate("+xe+")")}(le.translate,xe.translate,Re,Ue),function Ou(le,xe,Re,Ue){le!==xe?(le-xe>180?xe+=360:xe-le>180&&(le+=360),Ue.push({i:Re.push(jl(Re)+"rotate(",null,")")-2,x:Ao(le,xe)})):xe&&Re.push(jl(Re)+"rotate("+xe+")")}(le.rotate,xe.rotate,Re,Ue),function js(le,xe,Re,Ue){le!==xe?Ue.push({i:Re.push(jl(Re)+"skewX(",null,")")-2,x:Ao(le,xe)}):xe&&Re.push(jl(Re)+"skewX("+xe+")")}(le.skew,xe.skew,Re,Ue),function bu(le,xe,Re,Ue){if(le[0]!==xe[0]||le[1]!==xe[1]){var Je=Re.push(jl(Re)+"scale(",null,",",null,")");Ue.push({i:Je-4,x:Ao(le[0],xe[0])},{i:Je-2,x:Ao(le[1],xe[1])})}else(1!==xe[0]||1!==xe[1])&&Re.push(jl(Re)+"scale("+xe+")")}(le.scale,xe.scale,Re,Ue),le=xe=null,function(Je){for(var yt,tt=-1,Lt=Ue.length;++tt<Lt;)Re[(yt=Ue[tt]).i]=yt.x(Je);return Re.join("")}}function Wl(le,xe){return xe=(xe-=le=+le)||1/xe,function(Re){return(Re-le)/xe}}function al(le,xe){return xe=(xe-=le=+le)||1/xe,function(Re){return Math.max(0,Math.min(1,(Re-le)/xe))}}function ws(le){for(var xe=le.source,Re=le.target,Ue=function il(le,xe){if(le===xe)return le;for(var Re=_l(le),Ue=_l(xe),Je=Re.pop(),tt=Ue.pop(),Lt=null;Je===tt;)Lt=Je,Je=Re.pop(),tt=Ue.pop();return Lt}(xe,Re),Je=[xe];xe!==Ue;)xe=xe.parent,Je.push(xe);for(var tt=Je.length;Re!==Ue;)Je.splice(tt,0,Re),Re=Re.parent;return Je}function _l(le){for(var xe=[],Re=le.parent;null!=Re;)xe.push(le),le=Re,Re=Re.parent;return xe.push(le),xe}function pl(le){le.fixed|=2}function Fo(le){le.fixed&=-7}function Nf(le){le.fixed|=4,le.px=le.x,le.py=le.y}function Ef(le){le.fixed&=-5}function Fl(le,xe,Re){var Ue=0,Je=0;if(le.charge=0,!le.leaf)for(var Ot,tt=le.nodes,Lt=tt.length,yt=-1;++yt<Lt;)null!=(Ot=tt[yt])&&(Fl(Ot,xe,Re),le.charge+=Ot.charge,Ue+=Ot.charge*Ot.cx,Je+=Ot.charge*Ot.cy);if(le.point){le.leaf||(le.point.x+=Math.random()-.5,le.point.y+=Math.random()-.5);var or=xe*Re[le.point.index];le.charge+=le.pointCharge=or,Ue+=or*le.point.x,Je+=or*le.point.y}le.cx=Ue/le.charge,le.cy=Je/le.charge}t.interpolateTransform=co,t.layout={},t.layout.bundle=function(){return function(le){for(var xe=[],Re=-1,Ue=le.length;++Re<Ue;)xe.push(ws(le[Re]));return xe}},t.layout.chord=function(){var xe,Re,Ue,Je,Lt,yt,Ot,le={},tt=0;function or(){var _r,Gr,Jr,qr,en,Rr={},Dr=[],tn=t.range(Je),sn=[];for(xe=[],Re=[],_r=0,qr=-1;++qr<Je;){for(Gr=0,en=-1;++en<Je;)Gr+=Ue[qr][en];Dr.push(Gr),sn.push(t.range(Je)),_r+=Gr}for(Lt&&tn.sort(function(ui,Za){return Lt(Dr[ui],Dr[Za])}),yt&&sn.forEach(function(ui,Za){ui.sort(function(Ha,hi){return yt(Ue[Za][Ha],Ue[Za][hi])})}),_r=(He-tt*Je)/_r,Gr=0,qr=-1;++qr<Je;){for(Jr=Gr,en=-1;++en<Je;){var Qr=tn[qr],Vn=sn[Qr][en],Aa=Ue[Qr][Vn],La=Gr,xa=Gr+=Aa*_r;Rr[Qr+"-"+Vn]={index:Qr,subindex:Vn,startAngle:La,endAngle:xa,value:Aa}}Re[Qr]={index:Qr,startAngle:Jr,endAngle:Gr,value:Dr[Qr]},Gr+=tt}for(qr=-1;++qr<Je;)for(en=qr-1;++en<Je;){var Ya=Rr[qr+"-"+en],Ga=Rr[en+"-"+qr];(Ya.value||Ga.value)&&xe.push(Ya.value<Ga.value?{source:Ga,target:Ya}:{source:Ya,target:Ga})}Ot&&ir()}function ir(){xe.sort(function(Rr,Dr){return Ot((Rr.source.value+Rr.target.value)/2,(Dr.source.value+Dr.target.value)/2)})}return le.matrix=function(Rr){return arguments.length?(Je=(Ue=Rr)&&Ue.length,xe=Re=null,le):Ue},le.padding=function(Rr){return arguments.length?(tt=Rr,xe=Re=null,le):tt},le.sortGroups=function(Rr){return arguments.length?(Lt=Rr,xe=Re=null,le):Lt},le.sortSubgroups=function(Rr){return arguments.length?(yt=Rr,xe=null,le):yt},le.sortChords=function(Rr){return arguments.length?(Ot=Rr,xe&&ir(),le):Ot},le.chords=function(){return xe||or(),xe},le.groups=function(){return Re||or(),Re},le},t.layout.force=function(){var Re,Je,tt,_r,Gr,Jr,le={},xe=t.dispatch("start","tick","end"),Ue=[1,1],Lt=.9,yt=Nu,Ot=df,or=-30,ir=wu,Rr=.1,Dr=.64,tn=[],sn=[];function qr(Qr){return function(Vn,Aa,La,xa){if(Vn.point!==Qr){var Ya=Vn.cx-Qr.x,Ga=Vn.cy-Qr.y,ui=xa-Aa,Za=Ya*Ya+Ga*Ga;if(ui*ui/Dr<Za){if(Za<ir){var Ha=Vn.charge/Za;Qr.px-=Ya*Ha,Qr.py-=Ga*Ha}return!0}if(Vn.point&&Za&&Za<ir){Ha=Vn.pointCharge/Za;Qr.px-=Ya*Ha,Qr.py-=Ga*Ha}}return!Vn.charge}}function en(Qr){Qr.px=t.event.x,Qr.py=t.event.y,le.resume()}return le.tick=function(){if((tt*=.99)<.005)return Re=null,xe.end({type:"end",alpha:tt=0}),!0;var Aa,La,xa,Ya,Ga,ui,Za,Ha,hi,Qr=tn.length,Vn=sn.length;for(La=0;La<Vn;++La)Ya=(xa=sn[La]).source,(ui=(Ha=(Ga=xa.target).x-Ya.x)*Ha+(hi=Ga.y-Ya.y)*hi)&&(Ha*=ui=tt*Gr[La]*((ui=Math.sqrt(ui))-_r[La])/ui,hi*=ui,Ga.x-=Ha*(Za=Ya.weight+Ga.weight?Ya.weight/(Ya.weight+Ga.weight):.5),Ga.y-=hi*Za,Ya.x+=Ha*(Za=1-Za),Ya.y+=hi*Za);if((Za=tt*Rr)&&(Ha=Ue[0]/2,hi=Ue[1]/2,La=-1,Za))for(;++La<Qr;)(xa=tn[La]).x+=(Ha-xa.x)*Za,xa.y+=(hi-xa.y)*Za;if(or)for(Fl(Aa=t.geom.quadtree(tn),tt,Jr),La=-1;++La<Qr;)(xa=tn[La]).fixed||Aa.visit(qr(xa));for(La=-1;++La<Qr;)(xa=tn[La]).fixed?(xa.x=xa.px,xa.y=xa.py):(xa.x-=(xa.px-(xa.px=xa.x))*Lt,xa.y-=(xa.py-(xa.py=xa.y))*Lt);xe.tick({type:"tick",alpha:tt})},le.nodes=function(Qr){return arguments.length?(tn=Qr,le):tn},le.links=function(Qr){return arguments.length?(sn=Qr,le):sn},le.size=function(Qr){return arguments.length?(Ue=Qr,le):Ue},le.linkDistance=function(Qr){return arguments.length?(yt="function"==typeof Qr?Qr:+Qr,le):yt},le.distance=le.linkDistance,le.linkStrength=function(Qr){return arguments.length?(Ot="function"==typeof Qr?Qr:+Qr,le):Ot},le.friction=function(Qr){return arguments.length?(Lt=+Qr,le):Lt},le.charge=function(Qr){return arguments.length?(or="function"==typeof Qr?Qr:+Qr,le):or},le.chargeDistance=function(Qr){return arguments.length?(ir=Qr*Qr,le):Math.sqrt(ir)},le.gravity=function(Qr){return arguments.length?(Rr=+Qr,le):Rr},le.theta=function(Qr){return arguments.length?(Dr=Qr*Qr,le):Math.sqrt(Dr)},le.alpha=function(Qr){return arguments.length?(Qr=+Qr,tt?Qr>0?tt=Qr:(Re.c=null,Re.t=NaN,Re=null,xe.end({type:"end",alpha:tt=0})):Qr>0&&(xe.start({type:"start",alpha:tt=Qr}),Re=Ja(le.tick)),le):tt},le.start=function(){var Qr,Ya,Ga,Vn=tn.length,Aa=sn.length,La=Ue[0],xa=Ue[1];for(Qr=0;Qr<Vn;++Qr)(Ga=tn[Qr]).index=Qr,Ga.weight=0;for(Qr=0;Qr<Aa;++Qr)"number"==typeof(Ga=sn[Qr]).source&&(Ga.source=tn[Ga.source]),"number"==typeof Ga.target&&(Ga.target=tn[Ga.target]),++Ga.source.weight,++Ga.target.weight;for(Qr=0;Qr<Vn;++Qr)Ga=tn[Qr],isNaN(Ga.x)&&(Ga.x=ui("x",La)),isNaN(Ga.y)&&(Ga.y=ui("y",xa)),isNaN(Ga.px)&&(Ga.px=Ga.x),isNaN(Ga.py)&&(Ga.py=Ga.y);if(_r=[],"function"==typeof yt)for(Qr=0;Qr<Aa;++Qr)_r[Qr]=+yt.call(this,sn[Qr],Qr);else for(Qr=0;Qr<Aa;++Qr)_r[Qr]=yt;if(Gr=[],"function"==typeof Ot)for(Qr=0;Qr<Aa;++Qr)Gr[Qr]=+Ot.call(this,sn[Qr],Qr);else for(Qr=0;Qr<Aa;++Qr)Gr[Qr]=Ot;if(Jr=[],"function"==typeof or)for(Qr=0;Qr<Vn;++Qr)Jr[Qr]=+or.call(this,tn[Qr],Qr);else for(Qr=0;Qr<Vn;++Qr)Jr[Qr]=or;function ui(Za,Ha){if(!Ya){for(Ya=new Array(Vn),ai=0;ai<Vn;++ai)Ya[ai]=[];for(ai=0;ai<Aa;++ai){var hi=sn[ai];Ya[hi.source.index].push(hi.target),Ya[hi.target.index].push(hi.source)}}for(var vi,Yi=Ya[Qr],ai=-1,ia=Yi.length;++ai<ia;)if(!isNaN(vi=Yi[ai][Za]))return vi;return Math.random()*Ha}return le.resume()},le.resume=function(){return le.alpha(.1)},le.stop=function(){return le.alpha(0)},le.drag=function(){if(Je||(Je=t.behavior.drag().origin(k).on("dragstart.force",pl).on("drag.force",en).on("dragend.force",Fo)),!arguments.length)return Je;this.on("mouseover.force",Nf).on("mouseout.force",Ef).call(Je)},t.rebind(le,xe,"on")};var Nu=20,df=1,wu=1/0;function eu(le,xe){return t.rebind(le,xe,"sort","children","value"),le.nodes=le,le.links=Cf,le}function Us(le,xe){for(var Re=[le];null!=(le=Re.pop());)if(xe(le),(Je=le.children)&&(Ue=Je.length))for(var Ue,Je;--Ue>=0;)Re.push(Je[Ue])}function Ws(le,xe){for(var Re=[le],Ue=[];null!=(le=Re.pop());)if(Ue.push(le),(Lt=le.children)&&(tt=Lt.length))for(var tt,Lt,Je=-1;++Je<tt;)Re.push(Lt[Je]);for(;null!=(le=Ue.pop());)xe(le)}function Bu(le){return le.children}function pf(le){return le.value}function gf(le,xe){return xe.value-le.value}function Cf(le){return t.merge(le.map(function(xe){return(xe.children||[]).map(function(Re){return{source:xe,target:Re}})}))}t.layout.hierarchy=function(){var le=gf,xe=Bu,Re=pf;function Ue(Je){var yt,tt=[Je],Lt=[];for(Je.depth=0;null!=(yt=tt.pop());)if(Lt.push(yt),(or=xe.call(Ue,yt,yt.depth))&&(Ot=or.length)){for(var Ot,or,ir;--Ot>=0;)tt.push(ir=or[Ot]),ir.parent=yt,ir.depth=yt.depth+1;Re&&(yt.value=0),yt.children=or}else Re&&(yt.value=+Re.call(Ue,yt,yt.depth)||0),delete yt.children;return Ws(Je,function(Rr){var Dr,tn;le&&(Dr=Rr.children)&&Dr.sort(le),Re&&(tn=Rr.parent)&&(tn.value+=Rr.value)}),Lt}return Ue.sort=function(Je){return arguments.length?(le=Je,Ue):le},Ue.children=function(Je){return arguments.length?(xe=Je,Ue):xe},Ue.value=function(Je){return arguments.length?(Re=Je,Ue):Re},Ue.revalue=function(Je){return Re&&(Us(Je,function(tt){tt.children&&(tt.value=0)}),Ws(Je,function(tt){var Lt;tt.children||(tt.value=+Re.call(Ue,tt,tt.depth)||0),(Lt=tt.parent)&&(Lt.value+=tt.value)})),Je},Ue},t.layout.partition=function(){var le=t.layout.hierarchy(),xe=[1,1];function Re(tt,Lt,yt,Ot){var or=tt.children;if(tt.x=Lt,tt.y=tt.depth*Ot,tt.dx=yt,tt.dy=Ot,or&&(Rr=or.length)){var Rr,Dr,tn,ir=-1;for(yt=tt.value?yt/tt.value:0;++ir<Rr;)Re(Dr=or[ir],Lt,tn=Dr.value*yt,Ot),Lt+=tn}}function Ue(tt){var Lt=tt.children,yt=0;if(Lt&&(or=Lt.length))for(var or,Ot=-1;++Ot<or;)yt=Math.max(yt,Ue(Lt[Ot]));return 1+yt}function Je(tt,Lt){var yt=le.call(this,tt,Lt);return Re(yt[0],0,xe[0],xe[1]/Ue(yt[0])),yt}return Je.size=function(tt){return arguments.length?(xe=tt,Je):xe},eu(Je,le)},t.layout.pie=function(){var le=Number,xe=Tu,Re=0,Ue=He,Je=0;function tt(Lt){var Jr,yt=Lt.length,Ot=Lt.map(function(qr,en){return+le.call(tt,qr,en)}),or=+("function"==typeof Re?Re.apply(this,arguments):Re),ir=("function"==typeof Ue?Ue.apply(this,arguments):Ue)-or,Rr=Math.min(Math.abs(ir)/yt,+("function"==typeof Je?Je.apply(this,arguments):Je)),Dr=Rr*(ir<0?-1:1),tn=t.sum(Ot),sn=tn?(ir-yt*Dr)/tn:0,_r=t.range(yt),Gr=[];return null!=xe&&_r.sort(xe===Tu?function(qr,en){return Ot[en]-Ot[qr]}:function(qr,en){return xe(Lt[qr],Lt[en])}),_r.forEach(function(qr){Gr[qr]={data:Lt[qr],value:Jr=Ot[qr],startAngle:or,endAngle:or+=Jr*sn+Dr,padAngle:Rr}}),Gr}return tt.value=function(Lt){return arguments.length?(le=Lt,tt):le},tt.sort=function(Lt){return arguments.length?(xe=Lt,tt):xe},tt.startAngle=function(Lt){return arguments.length?(Re=Lt,tt):Re},tt.endAngle=function(Lt){return arguments.length?(Ue=Lt,tt):Ue},tt.padAngle=function(Lt){return arguments.length?(Je=Lt,tt):Je},tt};var Tu={};function Uu(le){return le.x}function tu(le){return le.y}function yf(le,xe,Re){le.y0=xe,le.y=Re}t.layout.stack=function(){var le=k,xe=Au,Re=ru,Ue=yf,Je=Uu,tt=tu;function Lt(yt,Ot){if(!(sn=yt.length))return yt;var or=yt.map(function(qr,en){return le.call(Lt,qr,en)}),ir=or.map(function(qr){return qr.map(function(en,Qr){return[Je.call(Lt,en,Qr),tt.call(Lt,en,Qr)]})}),Rr=xe.call(Lt,ir,Ot);or=t.permute(or,Rr),ir=t.permute(ir,Rr);var sn,_r,Gr,Jr,Dr=Re.call(Lt,ir,Ot),tn=or[0].length;for(Gr=0;Gr<tn;++Gr)for(Ue.call(Lt,or[0][Gr],Jr=Dr[Gr],ir[0][Gr][1]),_r=1;_r<sn;++_r)Ue.call(Lt,or[_r][Gr],Jr+=ir[_r-1][Gr][1],ir[_r][Gr][1]);return yt}return Lt.values=function(yt){return arguments.length?(le=yt,Lt):le},Lt.order=function(yt){return arguments.length?(xe="function"==typeof yt?yt:mf.get(yt)||Au,Lt):xe},Lt.offset=function(yt){return arguments.length?(Re="function"==typeof yt?yt:Xi.get(yt)||ru,Lt):Re},Lt.x=function(yt){return arguments.length?(Je=yt,Lt):Je},Lt.y=function(yt){return arguments.length?(tt=yt,Lt):tt},Lt.out=function(yt){return arguments.length?(Ue=yt,Lt):Ue},Lt};var mf=t.map({"inside-out":function(le){var Re,Ue,xe=le.length,Je=le.map(xf),tt=le.map(Lf),Lt=t.range(xe).sort(function(Rr,Dr){return Je[Rr]-Je[Dr]}),yt=0,Ot=0,or=[],ir=[];for(Re=0;Re<xe;++Re)Ue=Lt[Re],yt<Ot?(yt+=tt[Ue],or.push(Ue)):(Ot+=tt[Ue],ir.push(Ue));return ir.reverse().concat(or)},reverse:function(le){return t.range(le.length).reverse()},default:Au}),Xi=t.map({silhouette:function(le){var tt,Lt,yt,xe=le.length,Re=le[0].length,Ue=[],Je=0,Ot=[];for(Lt=0;Lt<Re;++Lt){for(tt=0,yt=0;tt<xe;tt++)yt+=le[tt][Lt][1];yt>Je&&(Je=yt),Ue.push(yt)}for(Lt=0;Lt<Re;++Lt)Ot[Lt]=(Je-Ue[Lt])/2;return Ot},wiggle:function(le){var Je,tt,Lt,yt,Ot,or,ir,Rr,Dr,xe=le.length,Re=le[0],Ue=Re.length,tn=[];for(tn[0]=Rr=Dr=0,tt=1;tt<Ue;++tt){for(Je=0,yt=0;Je<xe;++Je)yt+=le[Je][tt][1];for(Je=0,Ot=0,ir=Re[tt][0]-Re[tt-1][0];Je<xe;++Je){for(Lt=0,or=(le[Je][tt][1]-le[Je][tt-1][1])/(2*ir);Lt<Je;++Lt)or+=(le[Lt][tt][1]-le[Lt][tt-1][1])/ir;Ot+=or*le[Je][tt][1]}tn[tt]=Rr-=yt?Ot/yt*ir:0,Rr<Dr&&(Dr=Rr)}for(tt=0;tt<Ue;++tt)tn[tt]-=Dr;return tn},expand:function(le){var Je,tt,Lt,xe=le.length,Re=le[0].length,Ue=1/xe,yt=[];for(tt=0;tt<Re;++tt){for(Je=0,Lt=0;Je<xe;Je++)Lt+=le[Je][tt][1];if(Lt)for(Je=0;Je<xe;Je++)le[Je][tt][1]/=Lt;else for(Je=0;Je<xe;Je++)le[Je][tt][1]=Ue}for(tt=0;tt<Re;++tt)yt[tt]=0;return yt},zero:ru});function Au(le){return t.range(le.length)}function ru(le){for(var xe=-1,Re=le[0].length,Ue=[];++xe<Re;)Ue[xe]=0;return Ue}function xf(le){for(var Je,xe=1,Re=0,Ue=le[0][1],tt=le.length;xe<tt;++xe)(Je=le[xe][1])>Ue&&(Re=xe,Ue=Je);return Re}function Lf(le){return le.reduce(ol,0)}function ol(le,xe){return le+xe[1]}function Hu(le,xe){return tf(le,Math.ceil(Math.log(xe.length)/Math.LN2+1))}function tf(le,xe){for(var Re=-1,Ue=+le[0],Je=(le[1]-Ue)/xe,tt=[];++Re<=xe;)tt[Re]=Je*Re+Ue;return tt}function cs(le){return[t.min(le),t.max(le)]}function Su(le,xe){return le.value-xe.value}function Rs(le,xe){var Re=le._pack_next;le._pack_next=xe,xe._pack_prev=le,xe._pack_next=Re,Re._pack_prev=xe}function sl(le,xe){le._pack_next=xe,xe._pack_prev=le}function Yl(le,xe){var Re=xe.x-le.x,Ue=xe.y-le.y,Je=le.r+xe.r;return.999*Je*Je>Re*Re+Ue*Ue}function Xl(le){if((xe=le.children)&&(Dr=xe.length)){var xe,Lt,yt,Ot,or,ir,Rr,Dr,Re=1/0,Ue=-1/0,Je=1/0,tt=-1/0;if(xe.forEach(Zl),(Lt=xe[0]).x=-Lt.r,Lt.y=0,tn(Lt),Dr>1&&((yt=xe[1]).x=yt.r,yt.y=0,tn(yt),Dr>2))for(zl(Lt,yt,Ot=xe[2]),tn(Ot),Rs(Lt,Ot),Lt._pack_prev=Ot,Rs(Ot,yt),yt=Lt._pack_next,or=3;or<Dr;or++){zl(Lt,yt,Ot=xe[or]);var sn=0,_r=1,Gr=1;for(ir=yt._pack_next;ir!==yt;ir=ir._pack_next,_r++)if(Yl(ir,Ot)){sn=1;break}if(1==sn)for(Rr=Lt._pack_prev;Rr!==ir._pack_prev&&!Yl(Rr,Ot);Rr=Rr._pack_prev,Gr++);sn?(_r<Gr||_r==Gr&&yt.r<Lt.r?sl(Lt,yt=ir):sl(Lt=Rr,yt),or--):(Rs(Lt,Ot),yt=Ot,tn(Ot))}var Jr=(Re+Ue)/2,qr=(Je+tt)/2,en=0;for(or=0;or<Dr;or++)(Ot=xe[or]).x-=Jr,Ot.y-=qr,en=Math.max(en,Ot.r+Math.sqrt(Ot.x*Ot.x+Ot.y*Ot.y));le.r=en,xe.forEach(ll)}function tn(Qr){Re=Math.min(Qr.x-Qr.r,Re),Ue=Math.max(Qr.x+Qr.r,Ue),Je=Math.min(Qr.y-Qr.r,Je),tt=Math.max(Qr.y+Qr.r,tt)}}function Zl(le){le._pack_next=le._pack_prev=le}function ll(le){delete le._pack_next,delete le._pack_prev}function yl(le,xe,Re,Ue){var Je=le.children;if(le.x=xe+=Ue*le.x,le.y=Re+=Ue*le.y,le.r*=Ue,Je)for(var tt=-1,Lt=Je.length;++tt<Lt;)yl(Je[tt],xe,Re,Ue)}function zl(le,xe,Re){var Ue=le.r+Re.r,Je=xe.x-le.x,tt=xe.y-le.y;if(Ue&&(Je||tt)){var Lt=xe.r+Re.r,yt=Je*Je+tt*tt,Ot=.5+((Ue*=Ue)-(Lt*=Lt))/(2*yt),or=Math.sqrt(Math.max(0,2*Lt*(Ue+yt)-(Ue-=yt)*Ue-Lt*Lt))/(2*yt);Re.x=le.x+Ot*Je+or*tt,Re.y=le.y+Ot*tt-or*Je}else Re.x=le.x+Ue,Re.y=le.y}function ml(le,xe){return le.parent==xe.parent?1:2}function Vu(le){var xe=le.children;return xe.length?xe[0]:le.t}function ul(le){var Re,xe=le.children;return(Re=xe.length)?xe[Re-1]:le.t}function Mu(le,xe,Re){var Ue=Re/(xe.i-le.i);xe.c-=Ue,xe.s+=Re,le.c+=Ue,xe.z+=Re,xe.m+=Re}function Pf(le,xe,Re){return le.a.parent===xe.parent?le.a:Re}function Eu(le){var xe=le.children;return xe&&xe.length?Eu(xe[0]):le}function Cu(le){var Re,xe=le.children;return xe&&(Re=xe.length)?Cu(xe[Re-1]):le}function au(le){return{x:le.x,y:le.y,dx:le.dx,dy:le.dy}}function Kl(le,xe){var Re=le.x+xe[3],Ue=le.y+xe[0],Je=le.dx-xe[1]-xe[3],tt=le.dy-xe[0]-xe[2];return Je<0&&(Re+=Je/2,Je=0),tt<0&&(Ue+=tt/2,tt=0),{x:Re,y:Ue,dx:Je,dy:tt}}function zo(le){var xe=le[0],Re=le[le.length-1];return xe<Re?[xe,Re]:[Re,xe]}function Ts(le){return le.rangeExtent?le.rangeExtent():zo(le.range())}function Gu(le,xe,Re,Ue){var Je=Re(le[0],le[1]),tt=Ue(xe[0],xe[1]);return function(Lt){return tt(Je(Lt))}}function rf(le,xe){var Lt,Re=0,Ue=le.length-1,Je=le[Re],tt=le[Ue];return tt<Je&&(Lt=Re,Re=Ue,Ue=Lt,Lt=Je,Je=tt,tt=Lt),le[Re]=xe.floor(Je),le[Ue]=xe.ceil(tt),le}function Lu(le){return le?{floor:function(xe){return Math.floor(xe/le)*le},ceil:function(xe){return Math.ceil(xe/le)*le}}:bf}t.layout.histogram=function(){var le=!0,xe=Number,Re=cs,Ue=Hu;function Je(tt,Dr){for(var Rr,Gr,yt=[],Ot=tt.map(xe,this),or=Re.call(this,Ot,Dr),ir=Ue.call(this,or,Ot,Dr),tn=(Dr=-1,Ot.length),sn=ir.length-1,_r=le?1:1/tn;++Dr<sn;)(Rr=yt[Dr]=[]).dx=ir[Dr+1]-(Rr.x=ir[Dr]),Rr.y=0;if(sn>0)for(Dr=-1;++Dr<tn;)(Gr=Ot[Dr])>=or[0]&&Gr<=or[1]&&((Rr=yt[t.bisect(ir,Gr,1,sn)-1]).y+=_r,Rr.push(tt[Dr]));return yt}return Je.value=function(tt){return arguments.length?(xe=tt,Je):xe},Je.range=function(tt){return arguments.length?(Re=Yr(tt),Je):Re},Je.bins=function(tt){return arguments.length?(Ue="number"==typeof tt?function(Lt){return tf(Lt,tt)}:Yr(tt),Je):Ue},Je.frequency=function(tt){return arguments.length?(le=!!tt,Je):le},Je},t.layout.pack=function(){var Ue,le=t.layout.hierarchy().sort(Su),xe=0,Re=[1,1];function Je(tt,Lt){var yt=le.call(this,tt,Lt),Ot=yt[0],or=Re[0],ir=Re[1],Rr=null==Ue?Math.sqrt:"function"==typeof Ue?Ue:function(){return Ue};if(Ot.x=Ot.y=0,Ws(Ot,function(tn){tn.r=+Rr(tn.value)}),Ws(Ot,Xl),xe){var Dr=xe*(Ue?1:Math.max(2*Ot.r/or,2*Ot.r/ir))/2;Ws(Ot,function(tn){tn.r+=Dr}),Ws(Ot,Xl),Ws(Ot,function(tn){tn.r-=Dr})}return yl(Ot,or/2,ir/2,Ue?1:1/Math.max(2*Ot.r/or,2*Ot.r/ir)),yt}return Je.size=function(tt){return arguments.length?(Re=tt,Je):Re},Je.radius=function(tt){return arguments.length?(Ue=null==tt||"function"==typeof tt?tt:+tt,Je):Ue},Je.padding=function(tt){return arguments.length?(xe=+tt,Je):xe},eu(Je,le)},t.layout.tree=function(){var le=t.layout.hierarchy().sort(null).value(null),xe=ml,Re=[1,1],Ue=null;function Je(ir,Rr){var Dr=le.call(this,ir,Rr),tn=Dr[0],sn=function tt(ir){for(var tn,Rr={A:null,children:[ir]},Dr=[Rr];null!=(tn=Dr.pop());)for(var _r,sn=tn.children,Gr=0,Jr=sn.length;Gr<Jr;++Gr)Dr.push((sn[Gr]=_r={_:sn[Gr],parent:tn,children:(_r=sn[Gr].children)&&_r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Gr}).a=_r);return Rr.children[0]}(tn);if(Ws(sn,Lt),sn.parent.m=-sn.z,Us(sn,yt),Ue)Us(tn,or);else{var _r=tn,Gr=tn,Jr=tn;Us(tn,function(Vn){Vn.x<_r.x&&(_r=Vn),Vn.x>Gr.x&&(Gr=Vn),Vn.depth>Jr.depth&&(Jr=Vn)});var qr=xe(_r,Gr)/2-_r.x,en=Re[0]/(Gr.x+xe(Gr,_r)/2+qr),Qr=Re[1]/(Jr.depth||1);Us(tn,function(Vn){Vn.x=(Vn.x+qr)*en,Vn.y=Vn.depth*Qr})}return Dr}function Lt(ir){var Rr=ir.children,Dr=ir.parent.children,tn=ir.i?Dr[ir.i-1]:null;if(Rr.length){!function Xf(le){for(var tt,xe=0,Re=0,Ue=le.children,Je=Ue.length;--Je>=0;)(tt=Ue[Je]).z+=xe,tt.m+=xe,xe+=tt.s+(Re+=tt.c)}(ir);var sn=(Rr[0].z+Rr[Rr.length-1].z)/2;tn?(ir.z=tn.z+xe(ir._,tn._),ir.m=ir.z-sn):ir.z=sn}else tn&&(ir.z=tn.z+xe(ir._,tn._));ir.parent.A=function Ot(ir,Rr,Dr){if(Rr){for(var Vn,tn=ir,sn=ir,_r=Rr,Gr=tn.parent.children[0],Jr=tn.m,qr=sn.m,en=_r.m,Qr=Gr.m;_r=ul(_r),tn=Vu(tn),_r&&tn;)Gr=Vu(Gr),(sn=ul(sn)).a=ir,(Vn=_r.z+en-tn.z-Jr+xe(_r._,tn._))>0&&(Mu(Pf(_r,ir,Dr),ir,Vn),Jr+=Vn,qr+=Vn),en+=_r.m,Jr+=tn.m,Qr+=Gr.m,qr+=sn.m;_r&&!ul(sn)&&(sn.t=_r,sn.m+=en-qr),tn&&!Vu(Gr)&&(Gr.t=tn,Gr.m+=Jr-Qr,Dr=ir)}return Dr}(ir,tn,ir.parent.A||Dr[0])}function yt(ir){ir._.x=ir.z+ir.parent.m,ir.m+=ir.parent.m}function or(ir){ir.x*=Re[0],ir.y=ir.depth*Re[1]}return Je.separation=function(ir){return arguments.length?(xe=ir,Je):xe},Je.size=function(ir){return arguments.length?(Ue=null==(Re=ir)?or:null,Je):Ue?null:Re},Je.nodeSize=function(ir){return arguments.length?(Ue=null==(Re=ir)?null:or,Je):Ue?Re:null},eu(Je,le)},t.layout.cluster=function(){var le=t.layout.hierarchy().sort(null).value(null),xe=ml,Re=[1,1],Ue=!1;function Je(tt,Lt){var or,yt=le.call(this,tt,Lt),Ot=yt[0],ir=0;Ws(Ot,function(_r){var Gr=_r.children;Gr&&Gr.length?(_r.x=function nu(le){return le.reduce(function(xe,Re){return xe+Re.x},0)/le.length}(Gr),_r.y=function Zf(le){return 1+t.max(le,function(xe){return xe.y})}(Gr)):(_r.x=or?ir+=xe(_r,or):0,_r.y=0,or=_r)});var Rr=Eu(Ot),Dr=Cu(Ot),tn=Rr.x-xe(Rr,Dr)/2,sn=Dr.x+xe(Dr,Rr)/2;return Ws(Ot,Ue?function(_r){_r.x=(_r.x-Ot.x)*Re[0],_r.y=(Ot.y-_r.y)*Re[1]}:function(_r){_r.x=(_r.x-tn)/(sn-tn)*Re[0],_r.y=(1-(Ot.y?_r.y/Ot.y:1))*Re[1]}),yt}return Je.separation=function(tt){return arguments.length?(xe=tt,Je):xe},Je.size=function(tt){return arguments.length?(Ue=null==(Re=tt),Je):Ue?null:Re},Je.nodeSize=function(tt){return arguments.length?(Ue=null!=(Re=tt),Je):Ue?Re:null},eu(Je,le)},t.layout.treemap=function(){var Lt,le=t.layout.hierarchy(),xe=Math.round,Re=[1,1],Ue=null,Je=au,tt=!1,yt="squarify",Ot=.5*(1+Math.sqrt(5));function or(_r,Gr){for(var en,Qr,Jr=-1,qr=_r.length;++Jr<qr;)Qr=(en=_r[Jr]).value*(Gr<0?0:Gr),en.area=isNaN(Qr)||Qr<=0?0:Qr}function ir(_r){var Gr=_r.children;if(Gr&&Gr.length){var Qr,Aa,xa,Jr=Je(_r),qr=[],en=Gr.slice(),Vn=1/0,La="slice"===yt?Jr.dx:"dice"===yt?Jr.dy:"slice-dice"===yt?1&_r.depth?Jr.dy:Jr.dx:Math.min(Jr.dx,Jr.dy);for(or(en,Jr.dx*Jr.dy/_r.value),qr.area=0;(xa=en.length)>0;)qr.push(Qr=en[xa-1]),qr.area+=Qr.area,"squarify"!==yt||(Aa=Dr(qr,La))<=Vn?(en.pop(),Vn=Aa):(qr.area-=qr.pop().area,tn(qr,La,Jr,!1),La=Math.min(Jr.dx,Jr.dy),qr.length=qr.area=0,Vn=1/0);qr.length&&(tn(qr,La,Jr,!0),qr.length=qr.area=0),Gr.forEach(ir)}}function Rr(_r){var Gr=_r.children;if(Gr&&Gr.length){var en,Jr=Je(_r),qr=Gr.slice(),Qr=[];for(or(qr,Jr.dx*Jr.dy/_r.value),Qr.area=0;en=qr.pop();)Qr.push(en),Qr.area+=en.area,null!=en.z&&(tn(Qr,en.z?Jr.dx:Jr.dy,Jr,!qr.length),Qr.length=Qr.area=0);Gr.forEach(Rr)}}function Dr(_r,Gr){for(var qr,Jr=_r.area,en=0,Qr=1/0,Vn=-1,Aa=_r.length;++Vn<Aa;)(qr=_r[Vn].area)&&(qr<Qr&&(Qr=qr),qr>en&&(en=qr));return Gr*=Gr,(Jr*=Jr)?Math.max(Gr*en*Ot/Jr,Jr/(Gr*Qr*Ot)):1/0}function tn(_r,Gr,Jr,qr){var xa,en=-1,Qr=_r.length,Vn=Jr.x,Aa=Jr.y,La=Gr?xe(_r.area/Gr):0;if(Gr==Jr.dx){for((qr||La>Jr.dy)&&(La=Jr.dy);++en<Qr;)(xa=_r[en]).x=Vn,xa.y=Aa,xa.dy=La,Vn+=xa.dx=Math.min(Jr.x+Jr.dx-Vn,La?xe(xa.area/La):0);xa.z=!0,xa.dx+=Jr.x+Jr.dx-Vn,Jr.y+=La,Jr.dy-=La}else{for((qr||La>Jr.dx)&&(La=Jr.dx);++en<Qr;)(xa=_r[en]).x=Vn,xa.y=Aa,xa.dx=La,Aa+=xa.dy=Math.min(Jr.y+Jr.dy-Aa,La?xe(xa.area/La):0);xa.z=!1,xa.dy+=Jr.y+Jr.dy-Aa,Jr.x+=La,Jr.dx-=La}}function sn(_r){var Gr=Lt||le(_r),Jr=Gr[0];return Jr.x=Jr.y=0,Jr.value?(Jr.dx=Re[0],Jr.dy=Re[1]):Jr.dx=Jr.dy=0,Lt&&le.revalue(Jr),or([Jr],Jr.dx*Jr.dy/Jr.value),(Lt?Rr:ir)(Jr),tt&&(Lt=Gr),Gr}return sn.size=function(_r){return arguments.length?(Re=_r,sn):Re},sn.padding=function(_r){if(!arguments.length)return Ue;function Gr(en){var Qr=_r.call(sn,en,en.depth);return null==Qr?au(en):Kl(en,"number"==typeof Qr?[Qr,Qr,Qr,Qr]:Qr)}function Jr(en){return Kl(en,_r)}var qr;return Je=null==(Ue=_r)?au:"function"==(qr=typeof _r)?Gr:("number"===qr&&(_r=[_r,_r,_r,_r]),Jr),sn},sn.round=function(_r){return arguments.length?(xe=_r?Math.round:Number,sn):xe!=Number},sn.sticky=function(_r){return arguments.length?(tt=_r,Lt=null,sn):tt},sn.ratio=function(_r){return arguments.length?(Ot=_r,sn):Ot},sn.mode=function(_r){return arguments.length?(yt=_r+"",sn):yt},eu(sn,le)},t.random={normal:function(le,xe){var Re=arguments.length;return Re<2&&(xe=1),Re<1&&(le=0),function(){var Ue,Je,tt;do{tt=(Ue=2*Math.random()-1)*Ue+(Je=2*Math.random()-1)*Je}while(!tt||tt>1);return le+xe*Ue*Math.sqrt(-2*Math.log(tt)/tt)}},logNormal:function(){var le=t.random.normal.apply(t,arguments);return function(){return Math.exp(le())}},bates:function(le){var xe=t.random.irwinHall(le);return function(){return xe()/le}},irwinHall:function(le){return function(){for(var xe=0,Re=0;Re<le;Re++)xe+=Math.random();return xe}}},t.scale={};var bf={floor:k,ceil:k};function iu(le,xe,Re,Ue){var Je=[],tt=[],Lt=0,yt=Math.min(le.length,xe.length)-1;for(le[yt]<le[0]&&(le=le.slice().reverse(),xe=xe.slice().reverse());++Lt<=yt;)Je.push(Re(le[Lt-1],le[Lt])),tt.push(Ue(xe[Lt-1],xe[Lt]));return function(Ot){var or=t.bisect(le,Ot,1,yt)-1;return tt[or](Je[or](Ot))}}function ou(le,xe,Re,Ue){var Je,tt;function Lt(){var Ot=Math.min(le.length,xe.length)>2?iu:Gu,or=Ue?al:Wl;return Je=Ot(le,xe,or,Re),tt=Ot(xe,le,or,Go),yt}function yt(Ot){return Je(Ot)}return yt.invert=function(Ot){return tt(Ot)},yt.domain=function(Ot){return arguments.length?(le=Ot.map(Number),Lt()):le},yt.range=function(Ot){return arguments.length?(xe=Ot,Lt()):xe},yt.rangeRound=function(Ot){return yt.range(Ot).interpolate(kl)},yt.clamp=function(Ot){return arguments.length?(Ue=Ot,Lt()):Ue},yt.interpolate=function(Ot){return arguments.length?(Re=Ot,Lt()):Re},yt.ticks=function(Ot){return ju(le,Ot)},yt.tickFormat=function(Ot,or){return d3_scale_linearTickFormat(le,Ot,or)},yt.nice=function(Ot){return Ol(le,Ot),Lt()},yt.copy=function(){return ou(le,xe,Re,Ue)},Lt()}function ks(le,xe){return t.rebind(le,xe,"range","rangeRound","interpolate","clamp")}function Ol(le,xe){return rf(le,Lu(fl(le,xe)[2])),rf(le,Lu(fl(le,xe)[2])),le}function fl(le,xe){null==xe&&(xe=10);var Re=zo(le),Ue=Re[1]-Re[0],Je=Math.pow(10,Math.floor(Math.log(Ue/xe)/Math.LN10)),tt=xe/Ue*Je;return tt<=.15?Je*=10:tt<=.35?Je*=5:tt<=.75&&(Je*=2),Re[0]=Math.ceil(Re[0]/Je)*Je,Re[1]=Math.floor(Re[1]/Je)*Je+.5*Je,Re[2]=Je,Re}function ju(le,xe){return t.range.apply(t,fl(le,xe))}t.scale.linear=function(){return ou([0,1],[0,1],Go,!1)};function kt(le,xe,Re,Ue){function Je(yt){return(Re?Math.log(yt<0?0:yt):-Math.log(yt>0?0:-yt))/Math.log(xe)}function tt(yt){return Re?Math.pow(xe,yt):-Math.pow(xe,-yt)}function Lt(yt){return le(Je(yt))}return Lt.invert=function(yt){return tt(le.invert(yt))},Lt.domain=function(yt){return arguments.length?(Re=yt[0]>=0,le.domain((Ue=yt.map(Number)).map(Je)),Lt):Ue},Lt.base=function(yt){return arguments.length?(xe=+yt,le.domain(Ue.map(Je)),Lt):xe},Lt.nice=function(){var yt=rf(Ue.map(Je),Re?Math:yr);return le.domain(yt),Ue=yt.map(tt),Lt},Lt.ticks=function(){var yt=zo(Ue),Ot=[],or=yt[0],ir=yt[1],Rr=Math.floor(Je(or)),Dr=Math.ceil(Je(ir)),tn=xe%1?2:xe;if(isFinite(Dr-Rr)){if(Re){for(;Rr<Dr;Rr++)for(var sn=1;sn<tn;sn++)Ot.push(tt(Rr)*sn);Ot.push(tt(Rr))}else for(Ot.push(tt(Rr));Rr++<Dr;)for(sn=tn-1;sn>0;sn--)Ot.push(tt(Rr)*sn);for(Rr=0;Ot[Rr]<or;Rr++);for(Dr=Ot.length;Ot[Dr-1]>ir;Dr--);Ot=Ot.slice(Rr,Dr)}return Ot},Lt.copy=function(){return kt(le.copy(),xe,Re,Ue)},ks(Lt,le)}t.scale.log=function(){return kt(t.scale.linear().domain([0,1]),10,!0,[1,10])};var yr={floor:function(le){return-Math.ceil(-le)},ceil:function(le){return-Math.floor(-le)}};function er(le,xe,Re){var Ue=Mr(xe),Je=Mr(1/xe);function tt(Lt){return le(Ue(Lt))}return tt.invert=function(Lt){return Je(le.invert(Lt))},tt.domain=function(Lt){return arguments.length?(le.domain((Re=Lt.map(Number)).map(Ue)),tt):Re},tt.ticks=function(Lt){return ju(Re,Lt)},tt.tickFormat=function(Lt,yt){return d3_scale_linearTickFormat(Re,Lt,yt)},tt.nice=function(Lt){return tt.domain(Ol(Re,Lt))},tt.exponent=function(Lt){return arguments.length?(Ue=Mr(xe=Lt),Je=Mr(1/xe),le.domain(Re.map(Ue)),tt):xe},tt.copy=function(){return er(le.copy(),xe,Re)},ks(tt,le)}function Mr(le){return function(xe){return xe<0?-Math.pow(-xe,le):Math.pow(xe,le)}}function Zr(le,xe){var Re,Ue,Je;function tt(yt){return Ue[((Re.get(yt)||("range"===xe.t?Re.set(yt,le.push(yt)):NaN))-1)%Ue.length]}function Lt(yt,Ot){return t.range(le.length).map(function(or){return yt+Ot*or})}return tt.domain=function(yt){if(!arguments.length)return le;le=[],Re=new b;for(var ir,Ot=-1,or=yt.length;++Ot<or;)Re.has(ir=yt[Ot])||Re.set(ir,le.push(ir));return tt[xe.t].apply(tt,xe.a)},tt.range=function(yt){return arguments.length?(Ue=yt,Je=0,xe={t:"range",a:arguments},tt):Ue},tt.rangePoints=function(yt,Ot){arguments.length<2&&(Ot=0);var or=yt[0],ir=yt[1],Rr=le.length<2?(or=(or+ir)/2,0):(ir-or)/(le.length-1+Ot);return Ue=Lt(or+Rr*Ot/2,Rr),Je=0,xe={t:"rangePoints",a:arguments},tt},tt.rangeRoundPoints=function(yt,Ot){arguments.length<2&&(Ot=0);var or=yt[0],ir=yt[1],Rr=le.length<2?(or=ir=Math.round((or+ir)/2),0):(ir-or)/(le.length-1+Ot)|0;return Ue=Lt(or+Math.round(Rr*Ot/2+(ir-or-(le.length-1+Ot)*Rr)/2),Rr),Je=0,xe={t:"rangeRoundPoints",a:arguments},tt},tt.rangeBands=function(yt,Ot,or){arguments.length<2&&(Ot=0),arguments.length<3&&(or=Ot);var ir=yt[1]<yt[0],Rr=yt[ir-0],Dr=yt[1-ir],tn=(Dr-Rr)/(le.length-Ot+2*or);return Ue=Lt(Rr+tn*or,tn),ir&&Ue.reverse(),Je=tn*(1-Ot),xe={t:"rangeBands",a:arguments},tt},tt.rangeRoundBands=function(yt,Ot,or){arguments.length<2&&(Ot=0),arguments.length<3&&(or=Ot);var ir=yt[1]<yt[0],Rr=yt[ir-0],Dr=yt[1-ir],tn=Math.floor((Dr-Rr)/(le.length-Ot+2*or));return Ue=Lt(Rr+Math.round((Dr-Rr-(le.length-Ot)*tn)/2),tn),ir&&Ue.reverse(),Je=Math.round(tn*(1-Ot)),xe={t:"rangeRoundBands",a:arguments},tt},tt.rangeBand=function(){return Je},tt.rangeExtent=function(){return zo(xe.a[0])},tt.copy=function(){return Zr(le,xe)},tt.domain(le)}t.scale.pow=function(){return er(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return Zr([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(un)},t.scale.category20=function(){return t.scale.ordinal().range(fn)},t.scale.category20b=function(){return t.scale.ordinal().range(Dn)},t.scale.category20c=function(){return t.scale.ordinal().range(Wn)};var un=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ur),fn=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ur),Dn=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ur),Wn=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ur);function yn(le,xe){var Re;function Ue(){var tt=0,Lt=xe.length;for(Re=[];++tt<Lt;)Re[tt-1]=t.quantile(le,tt/Lt);return Je}function Je(tt){if(!isNaN(tt=+tt))return xe[t.bisect(Re,tt)]}return Je.domain=function(tt){return arguments.length?(le=tt.map(y).filter(s).sort(l),Ue()):le},Je.range=function(tt){return arguments.length?(xe=tt,Ue()):xe},Je.quantiles=function(){return Re},Je.invertExtent=function(tt){return(tt=xe.indexOf(tt))<0?[NaN,NaN]:[tt>0?Re[tt-1]:le[0],tt<Re.length?Re[tt]:le[le.length-1]]},Je.copy=function(){return yn(le,xe)},Ue()}function _n(le,xe,Re){var Ue,Je;function tt(yt){return Re[Math.max(0,Math.min(Je,Math.floor(Ue*(yt-le))))]}function Lt(){return Ue=Re.length/(xe-le),Je=Re.length-1,tt}return tt.domain=function(yt){return arguments.length?(le=+yt[0],xe=+yt[yt.length-1],Lt()):[le,xe]},tt.range=function(yt){return arguments.length?(Re=yt,Lt()):Re},tt.invertExtent=function(yt){return[yt=(yt=Re.indexOf(yt))<0?NaN:yt/Ue+le,yt+1/Ue]},tt.copy=function(){return _n(le,xe,Re)},Lt()}function Mn(le,xe){function Re(Ue){if(Ue<=Ue)return xe[t.bisect(le,Ue)]}return Re.domain=function(Ue){return arguments.length?(le=Ue,Re):le},Re.range=function(Ue){return arguments.length?(xe=Ue,Re):xe},Re.invertExtent=function(Ue){return Ue=xe.indexOf(Ue),[le[Ue-1],le[Ue]]},Re.copy=function(){return Mn(le,xe)},Re}function Un(le){function xe(Re){return+Re}return xe.invert=xe,xe.domain=xe.range=function(Re){return arguments.length?(le=Re.map(xe),xe):le},xe.ticks=function(Re){return ju(le,Re)},xe.tickFormat=function(Re,Ue){return d3_scale_linearTickFormat(le,Re,Ue)},xe.copy=function(){return Un(le)},xe}function ta(){return 0}t.scale.quantile=function(){return yn([],[])},t.scale.quantize=function(){return _n(0,1,[0,1])},t.scale.threshold=function(){return Mn([.5],[0,1])},t.scale.identity=function(){return Un([0,1])},t.svg={},t.svg.arc=function(){var le=ja,xe=ii,Re=ta,Ue=Qa,Je=oi,tt=fa,Lt=pa;function yt(){var or=Math.max(0,+le.apply(this,arguments)),ir=Math.max(0,+xe.apply(this,arguments)),Rr=Je.apply(this,arguments)-ut,Dr=tt.apply(this,arguments)-ut,tn=Math.abs(Dr-Rr),sn=Rr>Dr?0:1;if(ir<or&&(_r=ir,ir=or,or=_r),tn>=Xe)return Ot(ir,sn)+(or?Ot(or,1-sn):"")+"Z";var _r,Gr,Jr,qr,Vn,Aa,La,xa,Ya,Ga,ui,Za,en=0,Qr=0,Ha=[];if((qr=(+Lt.apply(this,arguments)||0)/2)&&(Jr=Ue===Qa?Math.sqrt(or*or+ir*ir):+Ue.apply(this,arguments),sn||(Qr*=-1),ir&&(Qr=Pt(Jr/ir*Math.sin(qr))),or&&(en=Pt(Jr/or*Math.sin(qr)))),ir){Vn=ir*Math.cos(Rr+Qr),Aa=ir*Math.sin(Rr+Qr),La=ir*Math.cos(Dr-Qr),xa=ir*Math.sin(Dr-Qr);var hi=Math.abs(Dr-Rr-2*Qr)<=we?0:1;if(Qr&&ti(Vn,Aa,La,xa)===sn^hi){var Yi=(Rr+Dr)/2;Vn=ir*Math.cos(Yi),Aa=ir*Math.sin(Yi),La=xa=null}}else Vn=Aa=0;if(or){Ya=or*Math.cos(Dr-en),Ga=or*Math.sin(Dr-en),ui=or*Math.cos(Rr+en),Za=or*Math.sin(Rr+en);var ai=Math.abs(Rr-Dr+2*en)<=we?0:1;if(en&&ti(Ya,Ga,ui,Za)===1-sn^ai){var ia=(Rr+Dr)/2;Ya=or*Math.cos(ia),Ga=or*Math.sin(ia),ui=Za=null}}else Ya=Ga=0;if(tn>ge&&(_r=Math.min(Math.abs(ir-or)/2,+Re.apply(this,arguments)))>.001){Gr=or<ir^sn?0:1;var vi=_r,Si=_r;if(tn<we){var Pi=null==ui?[Ya,Ga]:null==La?[Vn,Aa]:Ii([Vn,Aa],[ui,Za],[La,xa],[Ya,Ga]),uo=Vn-Pi[0],Et=Aa-Pi[1],wr=La-Pi[0],Nr=xa-Pi[1],vn=1/Math.sin(Math.acos((uo*wr+Et*Nr)/(Math.sqrt(uo*uo+Et*Et)*Math.sqrt(wr*wr+Nr*Nr)))/2),bn=Math.sqrt(Pi[0]*Pi[0]+Pi[1]*Pi[1]);Si=Math.min(_r,(or-bn)/(vn-1)),vi=Math.min(_r,(ir-bn)/(vn+1))}if(null!=La){var xn=pi(null==ui?[Ya,Ga]:[ui,Za],[Vn,Aa],ir,vi,sn),Tn=pi([La,xa],[Ya,Ga],ir,vi,sn);_r===vi?Ha.push("M",xn[0],"A",vi,",",vi," 0 0,",Gr," ",xn[1],"A",ir,",",ir," 0 ",1-sn^ti(xn[1][0],xn[1][1],Tn[1][0],Tn[1][1]),",",sn," ",Tn[1],"A",vi,",",vi," 0 0,",Gr," ",Tn[0]):Ha.push("M",xn[0],"A",vi,",",vi," 0 1,",Gr," ",Tn[0])}else Ha.push("M",Vn,",",Aa);if(null!=ui){var Gn=pi([Vn,Aa],[ui,Za],or,-Si,sn),ba=pi([Ya,Ga],null==La?[Vn,Aa]:[La,xa],or,-Si,sn);_r===Si?Ha.push("L",ba[0],"A",Si,",",Si," 0 0,",Gr," ",ba[1],"A",or,",",or," 0 ",sn^ti(ba[1][0],ba[1][1],Gn[1][0],Gn[1][1]),",",1-sn," ",Gn[1],"A",Si,",",Si," 0 0,",Gr," ",Gn[0]):Ha.push("L",ba[0],"A",Si,",",Si," 0 0,",Gr," ",Gn[0])}else Ha.push("L",Ya,",",Ga)}else Ha.push("M",Vn,",",Aa),null!=La&&Ha.push("A",ir,",",ir," 0 ",hi,",",sn," ",La,",",xa),Ha.push("L",Ya,",",Ga),null!=ui&&Ha.push("A",or,",",or," 0 ",ai,",",1-sn," ",ui,",",Za);return Ha.push("Z"),Ha.join("")}function Ot(or,ir){return"M0,"+or+"A"+or+","+or+" 0 1,"+ir+" 0,"+-or+"A"+or+","+or+" 0 1,"+ir+" 0,"+or}return yt.innerRadius=function(or){return arguments.length?(le=Yr(or),yt):le},yt.outerRadius=function(or){return arguments.length?(xe=Yr(or),yt):xe},yt.cornerRadius=function(or){return arguments.length?(Re=Yr(or),yt):Re},yt.padRadius=function(or){return arguments.length?(Ue=or==Qa?Qa:Yr(or),yt):Ue},yt.startAngle=function(or){return arguments.length?(Je=Yr(or),yt):Je},yt.endAngle=function(or){return arguments.length?(tt=Yr(or),yt):tt},yt.padAngle=function(or){return arguments.length?(Lt=Yr(or),yt):Lt},yt.centroid=function(){var or=(+le.apply(this,arguments)+ +xe.apply(this,arguments))/2,ir=(+Je.apply(this,arguments)+ +tt.apply(this,arguments))/2-ut;return[Math.cos(ir)*or,Math.sin(ir)*or]},yt};var Qa="auto";function ja(le){return le.innerRadius}function ii(le){return le.outerRadius}function oi(le){return le.startAngle}function fa(le){return le.endAngle}function pa(le){return le&&le.padAngle}function ti(le,xe,Re,Ue){return(le-Re)*xe-(xe-Ue)*le>0?0:1}function pi(le,xe,Re,Ue,Je){var tt=le[0]-xe[0],Lt=le[1]-xe[1],yt=(Je?Ue:-Ue)/Math.sqrt(tt*tt+Lt*Lt),Ot=yt*Lt,or=-yt*tt,ir=le[0]+Ot,Rr=le[1]+or,Dr=xe[0]+Ot,tn=xe[1]+or,sn=(ir+Dr)/2,_r=(Rr+tn)/2,Gr=Dr-ir,Jr=tn-Rr,qr=Gr*Gr+Jr*Jr,en=Re-Ue,Qr=ir*tn-Dr*Rr,Vn=(Jr<0?-1:1)*Math.sqrt(Math.max(0,en*en*qr-Qr*Qr)),Aa=(Qr*Jr-Gr*Vn)/qr,La=(-Qr*Gr-Jr*Vn)/qr,xa=(Qr*Jr+Gr*Vn)/qr,Ya=(-Qr*Gr+Jr*Vn)/qr,Ga=Aa-sn,ui=La-_r,Za=xa-sn,Ha=Ya-_r;return Ga*Ga+ui*ui>Za*Za+Ha*Ha&&(Aa=xa,La=Ya),[[Aa-Ot,La-or],[Aa*Re/en,La*Re/en]]}function Hi(){return!0}function no(le){var xe=Ni,Re=ha,Ue=Hi,Je=Ki,tt=Je.key,Lt=.7;function yt(Ot){var tn,or=[],ir=[],Rr=-1,Dr=Ot.length,sn=Yr(xe),_r=Yr(Re);function Gr(){or.push("M",Je(le(ir),Lt))}for(;++Rr<Dr;)Ue.call(this,tn=Ot[Rr],Rr)?ir.push([+sn.call(this,tn,Rr),+_r.call(this,tn,Rr)]):ir.length&&(Gr(),ir=[]);return ir.length&&Gr(),or.length?or.join(""):null}return yt.x=function(Ot){return arguments.length?(xe=Ot,yt):xe},yt.y=function(Ot){return arguments.length?(Re=Ot,yt):Re},yt.defined=function(Ot){return arguments.length?(Ue=Ot,yt):Ue},yt.interpolate=function(Ot){return arguments.length?(tt="function"==typeof Ot?Je=Ot:(Je=Zi.get(Ot)||Ki).key,yt):tt},yt.tension=function(Ot){return arguments.length?(Lt=Ot,yt):Lt},yt}t.svg.line=function(){return no(k)};var Zi=t.map({linear:Ki,"linear-closed":mi,step:function So(le){for(var xe=0,Re=le.length,Ue=le[0],Je=[Ue[0],",",Ue[1]];++xe<Re;)Je.push("H",(Ue[0]+(Ue=le[xe])[0])/2,"V",Ue[1]);return Re>1&&Je.push("H",Ue[0]),Je.join("")},"step-before":Co,"step-after":to,basis:Bl,"basis-open":function cl(le){if(le.length<4)return Ki(le);for(var Je,xe=[],Re=-1,Ue=le.length,tt=[0],Lt=[0];++Re<3;)Je=le[Re],tt.push(Je[0]),Lt.push(Je[1]);for(xe.push(_o(Yu,tt)+","+_o(Yu,Lt)),--Re;++Re<Ue;)Je=le[Re],tt.shift(),tt.push(Je[0]),Lt.shift(),Lt.push(Je[1]),nf(xe,tt,Lt);return xe.join("")},"basis-closed":function Ys(le){for(var xe,tt,Re=-1,Ue=le.length,Je=Ue+4,Lt=[],yt=[];++Re<4;)tt=le[Re%Ue],Lt.push(tt[0]),yt.push(tt[1]);for(xe=[_o(Yu,Lt),",",_o(Yu,yt)],--Re;++Re<Je;)tt=le[Re%Ue],Lt.shift(),Lt.push(tt[0]),yt.shift(),yt.push(tt[1]),nf(xe,Lt,yt);return xe.join("")},bundle:function xl(le,xe){var Re=le.length-1;if(Re)for(var Ot,or,Ue=le[0][0],Je=le[0][1],tt=le[Re][0]-Ue,Lt=le[Re][1]-Je,yt=-1;++yt<=Re;)Ot=le[yt],or=yt/Re,Ot[0]=xe*Ot[0]+(1-xe)*(Ue+or*tt),Ot[1]=xe*Ot[1]+(1-xe)*(Je+or*Lt);return Bl(le)},cardinal:function Uo(le,xe){return le.length<3?Ki(le):le[0]+jo(le,os(le,xe))},"cardinal-open":function Ia(le,xe){return le.length<4?Ki(le):le[1]+jo(le.slice(1,-1),os(le,xe))},"cardinal-closed":function Ri(le,xe){return le.length<3?mi(le):le[0]+jo((le.push(le[0]),le),os([le[le.length-2]].concat(le,[le[1]]),xe))},monotone:function of(le){return le.length<3?Ki(le):le[0]+jo(le,function Rf(le){for(var Re,Ue,Je,tt,xe=[],Lt=function Df(le){for(var xe=0,Re=le.length-1,Ue=[],Je=le[0],tt=le[1],Lt=Ue[0]=af(Je,tt);++xe<Re;)Ue[xe]=(Lt+(Lt=af(Je=tt,tt=le[xe+1])))/2;return Ue[xe]=Lt,Ue}(le),yt=-1,Ot=le.length-1;++yt<Ot;)Re=af(le[yt],le[yt+1]),m(Re)<ge?Lt[yt]=Lt[yt+1]=0:(Ue=Lt[yt]/Re,Je=Lt[yt+1]/Re,(tt=Ue*Ue+Je*Je)>9&&(tt=3*Re/Math.sqrt(tt),Lt[yt]=tt*Ue,Lt[yt+1]=tt*Je));for(yt=-1;++yt<=Ot;)tt=(le[Math.min(Ot,yt+1)][0]-le[Math.max(0,yt-1)][0])/(6*(1+Lt[yt]*Lt[yt])),xe.push([tt||0,Lt[yt]*tt||0]);return xe}(le))}});function Ki(le){return le.length>1?le.join("L"):le+"Z"}function mi(le){return le.join("L")+"Z"}function Co(le){for(var xe=0,Re=le.length,Ue=le[0],Je=[Ue[0],",",Ue[1]];++xe<Re;)Je.push("V",(Ue=le[xe])[1],"H",Ue[0]);return Je.join("")}function to(le){for(var xe=0,Re=le.length,Ue=le[0],Je=[Ue[0],",",Ue[1]];++xe<Re;)Je.push("H",(Ue=le[xe])[0],"V",Ue[1]);return Je.join("")}function jo(le,xe){if(xe.length<1||le.length!=xe.length&&le.length!=xe.length+2)return Ki(le);var Re=le.length!=xe.length,Ue="",Je=le[0],tt=le[1],Lt=xe[0],yt=Lt,Ot=1;if(Re&&(Ue+="Q"+(tt[0]-2*Lt[0]/3)+","+(tt[1]-2*Lt[1]/3)+","+tt[0]+","+tt[1],Je=le[1],Ot=2),xe.length>1){yt=xe[1],tt=le[Ot],Ot++,Ue+="C"+(Je[0]+Lt[0])+","+(Je[1]+Lt[1])+","+(tt[0]-yt[0])+","+(tt[1]-yt[1])+","+tt[0]+","+tt[1];for(var or=2;or<xe.length;or++,Ot++)tt=le[Ot],yt=xe[or],Ue+="S"+(tt[0]-yt[0])+","+(tt[1]-yt[1])+","+tt[0]+","+tt[1]}if(Re){var ir=le[Ot];Ue+="Q"+(tt[0]+2*yt[0]/3)+","+(tt[1]+2*yt[1]/3)+","+ir[0]+","+ir[1]}return Ue}function os(le,xe){for(var Je,Re=[],Ue=(1-xe)/2,tt=le[0],Lt=le[1],yt=1,Ot=le.length;++yt<Ot;)Je=tt,tt=Lt,Lt=le[yt],Re.push([Ue*(Lt[0]-Je[0]),Ue*(Lt[1]-Je[1])]);return Re}function Bl(le){if(le.length<3)return Ki(le);var xe=1,Re=le.length,Ue=le[0],Je=Ue[0],tt=Ue[1],Lt=[Je,Je,Je,(Ue=le[1])[0]],yt=[tt,tt,tt,Ue[1]],Ot=[Je,",",tt,"L",_o(Yu,Lt),",",_o(Yu,yt)];for(le.push(le[Re-1]);++xe<=Re;)Ue=le[xe],Lt.shift(),Lt.push(Ue[0]),yt.shift(),yt.push(Ue[1]),nf(Ot,Lt,yt);return le.pop(),Ot.push("L",Ue),Ot.join("")}function _o(le,xe){return le[0]*xe[0]+le[1]*xe[1]+le[2]*xe[2]+le[3]*xe[3]}Zi.forEach(function(le,xe){xe.key=le,xe.closed=/-closed$/.test(le)});var _s=[0,2/3,1/3,0],If=[0,1/3,2/3,0],Yu=[0,1/6,2/3,1/6];function nf(le,xe,Re){le.push("C",_o(_s,xe),",",_o(_s,Re),",",_o(If,xe),",",_o(If,Re),",",_o(Yu,xe),",",_o(Yu,Re))}function af(le,xe){return(xe[1]-le[1])/(xe[0]-le[0])}function sf(le){for(var xe,Je,tt,Re=-1,Ue=le.length;++Re<Ue;)Je=(xe=le[Re])[0],tt=xe[1]-ut,xe[0]=Je*Math.cos(tt),xe[1]=Je*Math.sin(tt);return le}function Kf(le){var xe=Ni,Re=Ni,Ue=0,Je=ha,tt=Hi,Lt=Ki,yt=Lt.key,Ot=Lt,or="L",ir=.7;function Rr(Dr){var qr,La,xa,tn=[],sn=[],_r=[],Gr=-1,Jr=Dr.length,en=Yr(xe),Qr=Yr(Ue),Vn=xe===Re?function(){return La}:Yr(Re),Aa=Ue===Je?function(){return xa}:Yr(Je);function Ya(){tn.push("M",Lt(le(_r),ir),or,Ot(le(sn.reverse()),ir),"Z")}for(;++Gr<Jr;)tt.call(this,qr=Dr[Gr],Gr)?(sn.push([La=+en.call(this,qr,Gr),xa=+Qr.call(this,qr,Gr)]),_r.push([+Vn.call(this,qr,Gr),+Aa.call(this,qr,Gr)])):sn.length&&(Ya(),sn=[],_r=[]);return sn.length&&Ya(),tn.length?tn.join(""):null}return Rr.x=function(Dr){return arguments.length?(xe=Re=Dr,Rr):Re},Rr.x0=function(Dr){return arguments.length?(xe=Dr,Rr):xe},Rr.x1=function(Dr){return arguments.length?(Re=Dr,Rr):Re},Rr.y=function(Dr){return arguments.length?(Ue=Je=Dr,Rr):Je},Rr.y0=function(Dr){return arguments.length?(Ue=Dr,Rr):Ue},Rr.y1=function(Dr){return arguments.length?(Je=Dr,Rr):Je},Rr.defined=function(Dr){return arguments.length?(tt=Dr,Rr):tt},Rr.interpolate=function(Dr){return arguments.length?(yt="function"==typeof Dr?Lt=Dr:(Lt=Zi.get(Dr)||Ki).key,Ot=Lt.reverse||Lt,or=Lt.closed?"M":"L",Rr):yt},Rr.tension=function(Dr){return arguments.length?(ir=Dr,Rr):ir},Rr}function Bf(le){return le.source}function Jf(le){return le.target}function Xu(le){return le.radius}function Uf(le){return[le.x,le.y]}function Hf(le){return function(){var xe=le.apply(this,arguments),Re=xe[0],Ue=xe[1]-ut;return[Re*Math.cos(Ue),Re*Math.sin(Ue)]}}function Vf(){return 64}function rc(){return"circle"}function nc(le){var xe=Math.sqrt(le/we);return"M0,"+xe+"A"+xe+","+xe+" 0 1,1 0,"+-xe+"A"+xe+","+xe+" 0 1,1 0,"+xe+"Z"}t.svg.line.radial=function(){var le=no(sf);return le.radius=le.x,delete le.x,le.angle=le.y,delete le.y,le},Co.reverse=to,to.reverse=Co,t.svg.area=function(){return Kf(k)},t.svg.area.radial=function(){var le=Kf(sf);return le.radius=le.x,delete le.x,le.innerRadius=le.x0,delete le.x0,le.outerRadius=le.x1,delete le.x1,le.angle=le.y,delete le.y,le.startAngle=le.y0,delete le.y0,le.endAngle=le.y1,delete le.y1,le},t.svg.chord=function(){var le=Bf,xe=Jf,Re=Xu,Ue=oi,Je=fa;function tt(ir,Rr){var Dr=Lt(this,le,ir,Rr),tn=Lt(this,xe,ir,Rr);return"M"+Dr.p0+Ot(Dr.r,Dr.p1,Dr.a1-Dr.a0)+(function yt(ir,Rr){return ir.a0==Rr.a0&&ir.a1==Rr.a1}(Dr,tn)?or(Dr.r,Dr.p1,Dr.r,Dr.p0):or(Dr.r,Dr.p1,tn.r,tn.p0)+Ot(tn.r,tn.p1,tn.a1-tn.a0)+or(tn.r,tn.p1,Dr.r,Dr.p0))+"Z"}function Lt(ir,Rr,Dr,tn){var sn=Rr.call(ir,Dr,tn),_r=Re.call(ir,sn,tn),Gr=Ue.call(ir,sn,tn)-ut,Jr=Je.call(ir,sn,tn)-ut;return{r:_r,a0:Gr,a1:Jr,p0:[_r*Math.cos(Gr),_r*Math.sin(Gr)],p1:[_r*Math.cos(Jr),_r*Math.sin(Jr)]}}function Ot(ir,Rr,Dr){return"A"+ir+","+ir+" 0 "+ +(Dr>we)+",1 "+Rr}function or(ir,Rr,Dr,tn){return"Q 0,0 "+tn}return tt.radius=function(ir){return arguments.length?(Re=Yr(ir),tt):Re},tt.source=function(ir){return arguments.length?(le=Yr(ir),tt):le},tt.target=function(ir){return arguments.length?(xe=Yr(ir),tt):xe},tt.startAngle=function(ir){return arguments.length?(Ue=Yr(ir),tt):Ue},tt.endAngle=function(ir){return arguments.length?(Je=Yr(ir),tt):Je},tt},t.svg.diagonal=function(){var le=Bf,xe=Jf,Re=Uf;function Ue(Je,tt){var Lt=le.call(this,Je,tt),yt=xe.call(this,Je,tt),Ot=(Lt.y+yt.y)/2,or=[Lt,{x:Lt.x,y:Ot},{x:yt.x,y:Ot},yt];return"M"+(or=or.map(Re))[0]+"C"+or[1]+" "+or[2]+" "+or[3]}return Ue.source=function(Je){return arguments.length?(le=Yr(Je),Ue):le},Ue.target=function(Je){return arguments.length?(xe=Yr(Je),Ue):xe},Ue.projection=function(Je){return arguments.length?(Re=Je,Ue):Re},Ue},t.svg.diagonal.radial=function(){var le=t.svg.diagonal(),xe=Uf,Re=le.projection;return le.projection=function(Ue){return arguments.length?Re(Hf(xe=Ue)):xe},le},t.svg.symbol=function(){var le=rc,xe=Vf;function Re(Ue,Je){return(Qf.get(le.call(this,Ue,Je))||nc)(xe.call(this,Ue,Je))}return Re.type=function(Ue){return arguments.length?(le=Yr(Ue),Re):le},Re.size=function(Ue){return arguments.length?(xe=Yr(Ue),Re):xe},Re};var Qf=t.map({circle:nc,cross:function(le){var xe=Math.sqrt(le/5)/2;return"M"+-3*xe+","+-xe+"H"+-xe+"V"+-3*xe+"H"+xe+"V"+-xe+"H"+3*xe+"V"+xe+"H"+xe+"V"+3*xe+"H"+-xe+"V"+xe+"H"+-3*xe+"Z"},diamond:function(le){var xe=Math.sqrt(le/(2*Xs)),Re=xe*Xs;return"M0,"+-xe+"L"+Re+",0 0,"+xe+" "+-Re+",0Z"},square:function(le){var xe=Math.sqrt(le)/2;return"M"+-xe+","+-xe+"L"+xe+","+-xe+" "+xe+","+xe+" "+-xe+","+xe+"Z"},"triangle-down":function(le){var xe=Math.sqrt(le/lf),Re=xe*lf/2;return"M0,"+Re+"L"+xe+","+-Re+" "+-xe+","+-Re+"Z"},"triangle-up":function(le){var xe=Math.sqrt(le/lf),Re=xe*lf/2;return"M0,"+-Re+"L"+xe+","+Re+" "+-xe+","+Re+"Z"}});t.svg.symbolTypes=Qf.keys();var lf=Math.sqrt(3),Xs=Math.tan(30*Ze);J.transition=function(le){for(var Je,tt,xe=$i||++Vi,Re=Ul(le),Ue=[],Lt=Pu||{time:Date.now(),ease:rs,delay:0,duration:250},yt=-1,Ot=this.length;++yt<Ot;){Ue.push(Je=[]);for(var or=this[yt],ir=-1,Rr=or.length;++ir<Rr;)(tt=or[ir])&&Tl(tt,ir,Re,xe,Lt),Je.push(tt)}return bl(Ue,Re,xe)},J.interrupt=function(le){return this.each(null==le?Mo:Jl(Ul(le)))};var Mo=Jl(Ul());function Jl(le){return function(){var xe,Re,Ue;(xe=this[le])&&(Ue=xe[Re=xe.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--xe.count?delete xe[Re]:delete this[le],xe.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function bl(le,xe,Re){return ie(le,lo),le.namespace=xe,le.id=Re,le}var $i,Pu,lo=[],Vi=0;function wl(le,xe,Re,Ue){var Je=le.id,tt=le.namespace;return Be(le,"function"==typeof Re?function(Lt,yt,Ot){Lt[tt][Je].tween.set(xe,Ue(Re.call(Lt,Lt.__data__,yt,Ot)))}:(Re=Ue(Re),function(Lt){Lt[tt][Je].tween.set(xe,Re)}))}function uf(le){return null==le&&(le=""),function(){this.textContent=le}}function Ul(le){return null==le?"__transition__":"__transition_"+le+"__"}function Tl(le,xe,Re,Ue,Je){var yt,Ot,or,ir,Rr,tt=le[Re]||(le[Re]={active:0,count:0}),Lt=tt[Ue];function tn(_r){var Gr=tt.active,Jr=tt[Gr];for(var qr in Jr&&(Jr.timer.c=null,Jr.timer.t=NaN,--tt.count,delete tt[Gr],Jr.event&&Jr.event.interrupt.call(le,le.__data__,Jr.index)),tt)if(+qr<Ue){var en=tt[qr];en.timer.c=null,en.timer.t=NaN,--tt.count,delete tt[qr]}Ot.c=sn,Ja(function(){return Ot.c&&sn(_r||1)&&(Ot.c=null,Ot.t=NaN),1},0,yt),tt.active=Ue,Lt.event&&Lt.event.start.call(le,le.__data__,xe),Rr=[],Lt.tween.forEach(function(Qr,Vn){(Vn=Vn.call(le,le.__data__,xe))&&Rr.push(Vn)}),ir=Lt.ease,or=Lt.duration}function sn(_r){for(var Gr=_r/or,Jr=ir(Gr),qr=Rr.length;qr>0;)Rr[--qr].call(le,Jr);if(Gr>=1)return Lt.event&&Lt.event.end.call(le,le.__data__,xe),--tt.count?delete tt[Ue]:delete le[Re],1}Lt||(yt=Je.time,Ot=Ja(function Dr(_r){var Gr=Lt.delay;if(Ot.t=Gr+yt,Gr<=_r)return tn(_r-Gr);Ot.c=tn},0,yt),Lt=tt[Ue]={tween:new b,time:yt,timer:Ot,delay:Je.delay,duration:Je.duration,ease:Je.ease,index:xe},Je=null,++tt.count)}lo.call=J.call,lo.empty=J.empty,lo.node=J.node,lo.size=J.size,t.transition=function(le,xe){return le&&le.transition?$i?le.transition(xe):le:t.selection().transition(le)},t.transition.prototype=lo,lo.select=function(le){var Je,tt,Lt,xe=this.id,Re=this.namespace,Ue=[];le=ue(le);for(var yt=-1,Ot=this.length;++yt<Ot;){Ue.push(Je=[]);for(var or=this[yt],ir=-1,Rr=or.length;++ir<Rr;)(Lt=or[ir])&&(tt=le.call(Lt,Lt.__data__,ir,yt))?("__data__"in Lt&&(tt.__data__=Lt.__data__),Tl(tt,ir,Re,xe,Lt[Re][xe]),Je.push(tt)):Je.push(null)}return bl(Ue,Re,xe)},lo.selectAll=function(le){var Je,tt,Lt,yt,Ot,xe=this.id,Re=this.namespace,Ue=[];le=re(le);for(var or=-1,ir=this.length;++or<ir;)for(var Rr=this[or],Dr=-1,tn=Rr.length;++Dr<tn;)if(Lt=Rr[Dr]){Ot=Lt[Re][xe],tt=le.call(Lt,Lt.__data__,Dr,or),Ue.push(Je=[]);for(var sn=-1,_r=tt.length;++sn<_r;)(yt=tt[sn])&&Tl(yt,sn,Re,xe,Ot),Je.push(yt)}return bl(Ue,Re,xe)},lo.filter=function(le){var Re,Je,xe=[];"function"!=typeof le&&(le=Qe(le));for(var tt=0,Lt=this.length;tt<Lt;tt++){xe.push(Re=[]);for(var Ue,yt=0,Ot=(Ue=this[tt]).length;yt<Ot;yt++)(Je=Ue[yt])&&le.call(Je,Je.__data__,yt,tt)&&Re.push(Je)}return bl(xe,this.namespace,this.id)},lo.tween=function(le,xe){var Re=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][Re].tween.get(le):Be(this,null==xe?function(Je){Je[Ue][Re].tween.remove(le)}:function(Je){Je[Ue][Re].tween.set(le,xe)})},lo.attr=function(le,xe){if(arguments.length<2){for(xe in le)this.attr(xe,le[xe]);return this}var Re="transform"==le?co:Go,Ue=t.ns.qualify(le);function Je(){this.removeAttribute(Ue)}function tt(){this.removeAttributeNS(Ue.space,Ue.local)}function Lt(Ot){return null==Ot?Je:(Ot+="",function(){var ir,or=this.getAttribute(Ue);return or!==Ot&&(ir=Re(or,Ot),function(Rr){this.setAttribute(Ue,ir(Rr))})})}function yt(Ot){return null==Ot?tt:(Ot+="",function(){var ir,or=this.getAttributeNS(Ue.space,Ue.local);return or!==Ot&&(ir=Re(or,Ot),function(Rr){this.setAttributeNS(Ue.space,Ue.local,ir(Rr))})})}return wl(this,"attr."+le,xe,Ue.local?yt:Lt)},lo.attrTween=function(le,xe){var Re=t.ns.qualify(le);return this.tween("attr."+le,Re.local?function Je(tt,Lt){var yt=xe.call(this,tt,Lt,this.getAttributeNS(Re.space,Re.local));return yt&&function(Ot){this.setAttributeNS(Re.space,Re.local,yt(Ot))}}:function Ue(tt,Lt){var yt=xe.call(this,tt,Lt,this.getAttribute(Re));return yt&&function(Ot){this.setAttribute(Re,yt(Ot))}})},lo.style=function(le,xe,Re){var Ue=arguments.length;if(Ue<3){if("string"!=typeof le){for(Re in Ue<2&&(xe=""),le)this.style(Re,le[Re],xe);return this}Re=""}function Je(){this.style.removeProperty(le)}function tt(Lt){return null==Lt?Je:(Lt+="",function(){var Ot,yt=a(this).getComputedStyle(this,null).getPropertyValue(le);return yt!==Lt&&(Ot=Go(yt,Lt),function(or){this.style.setProperty(le,Ot(or),Re)})})}return wl(this,"style."+le,xe,tt)},lo.styleTween=function(le,xe,Re){function Ue(Je,tt){var Lt=xe.call(this,Je,tt,a(this).getComputedStyle(this,null).getPropertyValue(le));return Lt&&function(yt){this.style.setProperty(le,Lt(yt),Re)}}return arguments.length<3&&(Re=""),this.tween("style."+le,Ue)},lo.text=function(le){return wl(this,"text",le,uf)},lo.remove=function(){var le=this.namespace;return this.each("end.transition",function(){var xe;this[le].count<2&&(xe=this.parentNode)&&xe.removeChild(this)})},lo.ease=function(le){var xe=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][xe].ease:("function"!=typeof le&&(le=t.ease.apply(t,arguments)),Be(this,function(Ue){Ue[Re][xe].ease=le}))},lo.delay=function(le){var xe=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][xe].delay:Be(this,"function"==typeof le?function(Ue,Je,tt){Ue[Re][xe].delay=+le.call(Ue,Ue.__data__,Je,tt)}:(le=+le,function(Ue){Ue[Re][xe].delay=le}))},lo.duration=function(le){var xe=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][xe].duration:Be(this,"function"==typeof le?function(Ue,Je,tt){Ue[Re][xe].duration=Math.max(1,le.call(Ue,Ue.__data__,Je,tt))}:(le=Math.max(1,le),function(Ue){Ue[Re][xe].duration=le}))},lo.each=function(le,xe){var Re=this.id,Ue=this.namespace;if(arguments.length<2){var Je=Pu,tt=$i;try{$i=Re,Be(this,function(Lt,yt,Ot){Pu=Lt[Ue][Re],le.call(Lt,Lt.__data__,yt,Ot)})}finally{Pu=Je,$i=tt}}else Be(this,function(Lt){var yt=Lt[Ue][Re];(yt.event||(yt.event=t.dispatch("start","end","interrupt"))).on(le,xe)});return this},lo.transition=function(){for(var Je,Lt,yt,le=this.id,xe=++Vi,Re=this.namespace,Ue=[],Ot=0,or=this.length;Ot<or;Ot++){Ue.push(Je=[]);for(var tt,ir=0,Rr=(tt=this[Ot]).length;ir<Rr;ir++)(Lt=tt[ir])&&Tl(Lt,ir,Re,xe,{time:(yt=Lt[Re][le]).time,ease:yt.ease,delay:yt.delay+yt.duration,duration:yt.duration}),Je.push(Lt)}return bl(Ue,Re,xe)},t.svg.axis=function(){var yt,le=t.scale.linear(),xe=Zs,Re=6,Ue=6,Je=3,tt=[10],Lt=null;function Ot(or){or.each(function(){var Qr,ir=t.select(this),Rr=this.__chart__||le,Dr=this.__chart__=le.copy(),tn=Lt??(Dr.ticks?Dr.ticks.apply(Dr,tt):Dr.domain()),sn=yt??(Dr.tickFormat?Dr.tickFormat.apply(Dr,tt):k),_r=ir.selectAll(".tick").data(tn,Dr),Gr=_r.enter().insert("g",".domain").attr("class","tick").style("opacity",ge),Jr=t.transition(_r.exit()).style("opacity",ge).remove(),qr=t.transition(_r.order()).style("opacity",1),en=Math.max(Re,0)+Je,Vn=Ts(Dr),Aa=ir.selectAll(".domain").data([0]),La=(Aa.enter().append("path").attr("class","domain"),t.transition(Aa));Gr.append("line"),Gr.append("text");var hi,Yi,ai,ia,xa=Gr.select("line"),Ya=qr.select("line"),Ga=_r.select("text").text(sn),ui=Gr.select("text"),Za=qr.select("text"),Ha="top"===xe||"left"===xe?-1:1;if("bottom"===xe||"top"===xe?(Qr=su,hi="x",ai="y",Yi="x2",ia="y2",Ga.attr("dy",Ha<0?"0em":".71em").style("text-anchor","middle"),La.attr("d","M"+Vn[0]+","+Ha*Ue+"V0H"+Vn[1]+"V"+Ha*Ue)):(Qr=lu,hi="y",ai="x",Yi="y2",ia="x2",Ga.attr("dy",".32em").style("text-anchor",Ha<0?"end":"start"),La.attr("d","M"+Ha*Ue+","+Vn[0]+"H0V"+Vn[1]+"H"+Ha*Ue)),xa.attr(ia,Ha*Re),ui.attr(ai,Ha*en),Ya.attr(Yi,0).attr(ia,Ha*Re),Za.attr(hi,0).attr(ai,Ha*en),Dr.rangeBand){var vi=Dr,Si=vi.rangeBand()/2;Rr=Dr=function(Pi){return vi(Pi)+Si}}else Rr.rangeBand?Rr=Dr:Jr.call(Qr,Dr,Rr);Gr.call(Qr,Rr,Dr),qr.call(Qr,Dr,Dr)})}return Ot.scale=function(or){return arguments.length?(le=or,Ot):le},Ot.orient=function(or){return arguments.length?(xe=or in Gf?or+"":Zs,Ot):xe},Ot.ticks=function(){return arguments.length?(tt=n(arguments),Ot):tt},Ot.tickValues=function(or){return arguments.length?(Lt=or,Ot):Lt},Ot.tickFormat=function(or){return arguments.length?(yt=or,Ot):yt},Ot.tickSize=function(or){var ir=arguments.length;return ir?(Re=+or,Ue=+arguments[ir-1],Ot):Re},Ot.innerTickSize=function(or){return arguments.length?(Re=+or,Ot):Re},Ot.outerTickSize=function(or){return arguments.length?(Ue=+or,Ot):Ue},Ot.tickPadding=function(or){return arguments.length?(Je=+or,Ot):Je},Ot.tickSubdivide=function(){return arguments.length&&Ot},Ot};var Zs="bottom",Gf={top:1,right:1,bottom:1,left:1};function su(le,xe,Re){le.attr("transform",function(Ue){var Je=xe(Ue);return"translate("+(isFinite(Je)?Je:Re(Ue))+",0)"})}function lu(le,xe,Re){le.attr("transform",function(Ue){var Je=xe(Ue);return"translate(0,"+(isFinite(Je)?Je:Re(Ue))+")"})}t.svg.brush=function(){var tt,Lt,le=q(ir,"brushstart","brush","brushend"),xe=null,Re=null,Ue=[0,0],Je=[0,0],yt=!0,Ot=!0,or=ns[0];function ir(_r){_r.each(function(){var Gr=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",sn).on("touchstart.brush",sn),Jr=Gr.selectAll(".background").data([0]);Jr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Gr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var qr=Gr.selectAll(".resize").data(or,k);qr.exit().remove(),qr.enter().append("g").attr("class",function(Aa){return"resize "+Aa}).style("cursor",function(Aa){return Wa[Aa]}).append("rect").attr("x",function(Aa){return/[ew]$/.test(Aa)?-3:null}).attr("y",function(Aa){return/^[ns]/.test(Aa)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),qr.style("display",ir.empty()?"none":null);var Vn,en=t.transition(Gr),Qr=t.transition(Jr);xe&&(Vn=Ts(xe),Qr.attr("x",Vn[0]).attr("width",Vn[1]-Vn[0]),Dr(en)),Re&&(Vn=Ts(Re),Qr.attr("y",Vn[0]).attr("height",Vn[1]-Vn[0]),tn(en)),Rr(en)})}function Rr(_r){_r.selectAll(".resize").attr("transform",function(Gr){return"translate("+Ue[+/e$/.test(Gr)]+","+Je[+/^s/.test(Gr)]+")"})}function Dr(_r){_r.select(".extent").attr("x",Ue[0]),_r.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function tn(_r){_r.select(".extent").attr("y",Je[0]),_r.selectAll(".extent,.e>rect,.w>rect").attr("height",Je[1]-Je[0])}function sn(){var xa,Ga,_r=this,Gr=t.select(t.event.target),Jr=le.of(_r,arguments),qr=t.select(_r),en=Gr.datum(),Qr=!/^(n|s)$/.test(en)&&xe,Vn=!/^(e|w)$/.test(en)&&Re,Aa=Gr.classed("extent"),La=Mt(_r),Ya=t.mouse(_r),ui=t.select(a(_r)).on("keydown.brush",hi).on("keyup.brush",Yi);if(t.event.changedTouches?ui.on("touchmove.brush",ai).on("touchend.brush",vi):ui.on("mousemove.brush",ai).on("mouseup.brush",vi),qr.interrupt().selectAll("*").interrupt(),Aa)Ya[0]=Ue[0]-Ya[0],Ya[1]=Je[0]-Ya[1];else if(en){var Za=+/w$/.test(en),Ha=+/^n/.test(en);Ga=[Ue[1-Za]-Ya[0],Je[1-Ha]-Ya[1]],Ya[0]=Ue[Za],Ya[1]=Je[Ha]}else t.event.altKey&&(xa=Ya.slice());function hi(){32==t.event.keyCode&&(Aa||(xa=null,Ya[0]-=Ue[1],Ya[1]-=Je[1],Aa=2),B())}function Yi(){32==t.event.keyCode&&2==Aa&&(Ya[0]+=Ue[1],Ya[1]+=Je[1],Aa=0,B())}function ai(){var Si=t.mouse(_r),Pi=!1;Ga&&(Si[0]+=Ga[0],Si[1]+=Ga[1]),Aa||(t.event.altKey?(xa||(xa=[(Ue[0]+Ue[1])/2,(Je[0]+Je[1])/2]),Ya[0]=Ue[+(Si[0]<xa[0])],Ya[1]=Je[+(Si[1]<xa[1])]):xa=null),Qr&&ia(Si,xe,0)&&(Dr(qr),Pi=!0),Vn&&ia(Si,Re,1)&&(tn(qr),Pi=!0),Pi&&(Rr(qr),Jr({type:"brush",mode:Aa?"move":"resize"}))}function ia(Si,Pi,uo){var Tn,Gn,Et=Ts(Pi),wr=Et[0],Nr=Et[1],vn=Ya[uo],bn=uo?Je:Ue,xn=bn[1]-bn[0];if(Aa&&(wr-=vn,Nr-=xn+vn),Tn=(uo?Ot:yt)?Math.max(wr,Math.min(Nr,Si[uo])):Si[uo],Aa?Gn=(Tn+=vn)+xn:(xa&&(vn=Math.max(wr,Math.min(Nr,2*xa[uo]-Tn))),vn<Tn?(Gn=Tn,Tn=vn):Gn=vn),bn[0]!=Tn||bn[1]!=Gn)return uo?Lt=null:tt=null,bn[0]=Tn,bn[1]=Gn,!0}function vi(){ai(),qr.style("pointer-events","all").selectAll(".resize").style("display",ir.empty()?"none":null),t.select("body").style("cursor",null),ui.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),La(),Jr({type:"brushend"})}qr.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",Gr.style("cursor")),Jr({type:"brushstart"}),ai()}return ir.event=function(_r){_r.each(function(){var Gr=le.of(this,arguments),Jr={x:Ue,y:Je,i:tt,j:Lt},qr=this.__chart__||Jr;this.__chart__=Jr,$i?t.select(this).transition().each("start.brush",function(){tt=qr.i,Lt=qr.j,Ue=qr.x,Je=qr.y,Gr({type:"brushstart"})}).tween("brush:brush",function(){var en=yu(Ue,Jr.x),Qr=yu(Je,Jr.y);return tt=Lt=null,function(Vn){Ue=Jr.x=en(Vn),Je=Jr.y=Qr(Vn),Gr({type:"brush",mode:"resize"})}}).each("end.brush",function(){tt=Jr.i,Lt=Jr.j,Gr({type:"brush",mode:"resize"}),Gr({type:"brushend"})}):(Gr({type:"brushstart"}),Gr({type:"brush",mode:"resize"}),Gr({type:"brushend"}))})},ir.x=function(_r){return arguments.length?(or=ns[!(xe=_r)<<1|!Re],ir):xe},ir.y=function(_r){return arguments.length?(or=ns[!xe<<1|!(Re=_r)],ir):Re},ir.clamp=function(_r){return arguments.length?(xe&&Re?(yt=!!_r[0],Ot=!!_r[1]):xe?yt=!!_r:Re&&(Ot=!!_r),ir):xe&&Re?[yt,Ot]:xe?yt:Re?Ot:null},ir.extent=function(_r){var Gr,Jr,qr,en,Qr;return arguments.length?(xe&&(Gr=_r[0],Jr=_r[1],Re&&(Gr=Gr[0],Jr=Jr[0]),tt=[Gr,Jr],xe.invert&&(Gr=xe(Gr),Jr=xe(Jr)),Jr<Gr&&(Qr=Gr,Gr=Jr,Jr=Qr),(Gr!=Ue[0]||Jr!=Ue[1])&&(Ue=[Gr,Jr])),Re&&(qr=_r[0],en=_r[1],xe&&(qr=qr[1],en=en[1]),Lt=[qr,en],Re.invert&&(qr=Re(qr),en=Re(en)),en<qr&&(Qr=qr,qr=en,en=Qr),(qr!=Je[0]||en!=Je[1])&&(Je=[qr,en])),ir):(xe&&(tt?(Gr=tt[0],Jr=tt[1]):(Gr=Ue[0],Jr=Ue[1],xe.invert&&(Gr=xe.invert(Gr),Jr=xe.invert(Jr)),Jr<Gr&&(Qr=Gr,Gr=Jr,Jr=Qr))),Re&&(Lt?(qr=Lt[0],en=Lt[1]):(qr=Je[0],en=Je[1],Re.invert&&(qr=Re.invert(qr),en=Re.invert(en)),en<qr&&(Qr=qr,qr=en,en=Qr))),xe&&Re?[[Gr,qr],[Jr,en]]:xe?[Gr,Jr]:Re&&[qr,en])},ir.clear=function(){return ir.empty()||(Ue=[0,0],Je=[0,0],tt=Lt=null),ir},ir.empty=function(){return!!xe&&Ue[0]==Ue[1]||!!Re&&Je[0]==Je[1]},t.rebind(ir,le,"on")};var Wa={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ns=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Zu(le){return JSON.parse(le.responseText)}function jf(le){var xe=i.createRange();return xe.selectNode(i.body),xe.createContextualFragment(le.responseText)}t.text=vr(function(le){return le.responseText}),t.json=function(le,xe){return nn(le,"application/json",Zu,xe)},t.html=function(le,xe){return nn(le,"text/html",jf,xe)},t.xml=vr(function(le){return le.responseXML}),void 0!==(I="function"==typeof(M=t)?M.call(K,e,K,$):M)&&($.exports=I)}).apply(self)},7960:function($){$.exports=function(){"use strict";var K,e,M;function I(t,T){if(K)if(e){var n="var sharedChunk = {}; ("+K+")(sharedChunk); ("+e+")(sharedChunk);",i={};K(i),M=T(i),typeof window<"u"&&(M.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"})))}else e=T;else K=T}return I(["exports"],function(t){function T(C,L){return C(L={exports:{}},L.exports),L.exports}var n="1.13.4",i=u;function u(C,L,N,Q){this.cx=3*C,this.bx=3*(N-C)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*L,this.by=3*(Q-L)-this.cy,this.ay=1-this.cy-this.by,this.p1x=C,this.p1y=Q,this.p2x=N,this.p2y=Q}u.prototype.sampleCurveX=function(C){return((this.ax*C+this.bx)*C+this.cx)*C},u.prototype.sampleCurveY=function(C){return((this.ay*C+this.by)*C+this.cy)*C},u.prototype.sampleCurveDerivativeX=function(C){return(3*this.ax*C+2*this.bx)*C+this.cx},u.prototype.solveCurveX=function(C,L){var N,Q,he,ye,Te;for(typeof L>"u"&&(L=1e-6),he=C,Te=0;Te<8;Te++){if(ye=this.sampleCurveX(he)-C,Math.abs(ye)<L)return he;var Ye=this.sampleCurveDerivativeX(he);if(Math.abs(Ye)<1e-6)break;he-=ye/Ye}if((he=C)<(N=0))return N;if(he>(Q=1))return Q;for(;N<Q;){if(ye=this.sampleCurveX(he),Math.abs(ye-C)<L)return he;C>ye?N=he:Q=he,he=.5*(Q-N)+N}return he},u.prototype.solve=function(C,L){return this.sampleCurveY(this.solveCurveX(C,L))};var a=r;function r(C,L){this.x=C,this.y=L}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,L){return this.clone()._rotateAround(C,L)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var L=C.x-this.x,N=C.y-this.y;return L*L+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,L){return Math.atan2(this.x*L-this.y*C,this.x*C+this.y*L)},_matMult:function(C){var L=C[0]*this.x+C[1]*this.y,N=C[2]*this.x+C[3]*this.y;return this.x=L,this.y=N,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var L=Math.cos(C),N=Math.sin(C),Q=L*this.x-N*this.y,he=N*this.x+L*this.y;return this.x=Q,this.y=he,this},_rotateAround:function(C,L){var N=Math.cos(C),Q=Math.sin(C),he=L.x+N*(this.x-L.x)-Q*(this.y-L.y),ye=L.y+Q*(this.x-L.x)+N*(this.y-L.y);return this.x=he,this.y=ye,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(C){return C instanceof r?C:Array.isArray(C)?new r(C[0],C[1]):C};var o=typeof self<"u"?self:{};function v(C,L){if(Array.isArray(C)){if(!Array.isArray(L)||C.length!==L.length)return!1;for(var N=0;N<C.length;N++)if(!v(C[N],L[N]))return!1;return!0}if("object"==typeof C&&null!==C&&null!==L){if("object"!=typeof L)return!1;if(Object.keys(C).length!==Object.keys(L).length)return!1;for(var he in C)if(!v(C[he],L[he]))return!1;return!0}return C===L}var p=Math.pow(2,53)-1;function f(C){if(C<=0)return 0;if(C>=1)return 1;var L=C*C,N=L*C;return 4*(C<.5?N:3*(C-L)+N-.75)}function l(C,L,N,Q){var he=new i(C,L,N,Q);return function(ye){return he.solve(ye)}}var y=l(.25,.1,.25,1);function s(C,L,N){return Math.min(N,Math.max(L,C))}function x(C,L,N){var Q=N-L,he=((C-L)%Q+Q)%Q+L;return he===L?N:he}function h(C,L,N){if(!C.length)return N(null,[]);var Q=C.length,he=new Array(C.length),ye=null;C.forEach(function(Te,Ye){L(Te,function(lt,dt){lt&&(ye=lt),he[Ye]=dt,0==--Q&&N(ye,he)})})}function g(C){var L=[];for(var N in C)L.push(C[N]);return L}function m(C,L){var N=[];for(var Q in C)Q in L||N.push(Q);return N}function d(C){for(var L=[],N=arguments.length-1;N-- >0;)L[N]=arguments[N+1];for(var Q=0,he=L;Q<he.length;Q+=1){var ye=he[Q];for(var Te in ye)C[Te]=ye[Te]}return C}function A(C,L){for(var N={},Q=0;Q<L.length;Q++){var he=L[Q];he in C&&(N[he]=C[he])}return N}var b=1;function c(){return b++}function S(){function C(L){return L?(L^16*Math.random()>>L/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,C)}return C()}function w(C){return C<=1?1:Math.pow(2,Math.ceil(Math.log(C)/Math.LN2))}function E(C){return!!C&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(C)}function P(C,L){C.forEach(function(N){L[N]&&(L[N]=L[N].bind(L))})}function R(C,L){return-1!==C.indexOf(L,C.length-L.length)}function F(C,L,N){var Q={};for(var he in C)Q[he]=L.call(N||this,C[he],he,C);return Q}function _(C,L,N){var Q={};for(var he in C)L.call(N||this,C[he],he,C)&&(Q[he]=C[he]);return Q}function z(C){return Array.isArray(C)?C.map(z):"object"==typeof C&&C?F(C,z):C}function D(C,L){for(var N=0;N<C.length;N++)if(L.indexOf(C[N])>=0)return!0;return!1}var k={};function O(C){k[C]||(typeof console<"u"&&console.warn(C),k[C]=!0)}function U(C,L,N){return(N.y-C.y)*(L.x-C.x)>(L.y-C.y)*(N.x-C.x)}function H(C){for(var L=0,N=0,Q=C.length,he=Q-1,ye=void 0,Te=void 0;N<Q;he=N++)ye=C[N],L+=((Te=C[he]).x-ye.x)*(ye.y+Te.y);return L}function j(C){var L=C[0],N=C[1],Q=C[2];return N+=90,N*=Math.PI/180,Q*=Math.PI/180,{x:L*Math.cos(N)*Math.sin(Q),y:L*Math.sin(N)*Math.sin(Q),z:L*Math.cos(Q)}}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function W(C){var L=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,N={};if(C.replace(L,function(he,ye,Te,Ye){var lt=Te||Ye;return N[ye]=!lt||lt.toLowerCase(),""}),N["max-age"]){var Q=parseInt(N["max-age"],10);isNaN(Q)?delete N["max-age"]:N["max-age"]=Q}return N}var B=null;function te(C){if(null==B){var L=C.navigator?C.navigator.userAgent:null;B=!!C.safari||!(!L||!(/\b(iPad|iPhone|iPod)\b/.test(L)||L.match("Safari")&&!L.match("Chrome")))}return B}function q(C){try{var L=o[C];return L.setItem("_mapbox_test_",1),L.removeItem("_mapbox_test_"),!0}catch{return!1}}function oe(C){return o.btoa(encodeURIComponent(C).replace(/%([0-9A-F]{2})/g,function(L,N){return String.fromCharCode(Number("0x"+N))}))}function ie(C){return decodeURIComponent(o.atob(C).split("").map(function(L){return"%"+("00"+L.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var X,J,se,be,V=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now.bind(Date),Y=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,ae=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame,ue={now:V,frame:function(L){var N=Y(L);return{cancel:function(){return ae(N)}}},getImageData:function(L,N){void 0===N&&(N=0);var Q=o.document.createElement("canvas"),he=Q.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return Q.width=L.width,Q.height=L.height,he.drawImage(L,0,0,L.width,L.height),he.getImageData(-N,-N,L.width+2*N,L.height+2*N)},resolveURL:function(L){return X||(X=o.document.createElement("a")),X.href=L,X.href},hardwareConcurrency:o.navigator&&o.navigator.hardwareConcurrency||4,get devicePixelRatio(){return o.devicePixelRatio},get prefersReducedMotion(){return!!o.matchMedia&&(null==J&&(J=o.matchMedia("(prefers-reduced-motion: reduce)")),J.matches)}},re={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ne={supported:!1,testSupport:_e},de=!1,De=!1;function _e(C){de||!be||(De?Ce(C):se=C)}function Ce(C){var L=C.createTexture();C.bindTexture(C.TEXTURE_2D,L);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,be),C.isContextLost())return;ne.supported=!0}catch{}C.deleteTexture(L),de=!0}o.document&&((be=o.document.createElement("img")).onload=function(){se&&Ce(se),se=null,De=!0},be.onerror=function(){de=!0,se=null},be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Le="01";function Fe(){for(var C="1",L="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="",Q=0;Q<10;Q++)N+=L[Math.floor(62*Math.random())];var he=432e5;return{token:[C,Le,N].join(""),tokenExpiresAt:Date.now()+he}}var ke=function(L,N){this._transformRequestFn=L,this._customAccessToken=N,this._createSkuToken()};function ze(C){return 0===C.indexOf("mapbox:")}ke.prototype._createSkuToken=function(){var L=Fe();this._skuToken=L.token,this._skuTokenExpiresAt=L.tokenExpiresAt},ke.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ke.prototype.transformRequest=function(L,N){return this._transformRequestFn&&this._transformRequestFn(L,N)||{url:L}},ke.prototype.normalizeStyleURL=function(L,N){if(!ze(L))return L;var Q=Ne(L);return Q.path="/styles/v1"+Q.path,this._makeAPIURL(Q,this._customAccessToken||N)},ke.prototype.normalizeGlyphsURL=function(L,N){if(!ze(L))return L;var Q=Ne(L);return Q.path="/fonts/v1"+Q.path,this._makeAPIURL(Q,this._customAccessToken||N)},ke.prototype.normalizeSourceURL=function(L,N){if(!ze(L))return L;var Q=Ne(L);return Q.path="/v4/"+Q.authority+".json",Q.params.push("secure"),this._makeAPIURL(Q,this._customAccessToken||N)},ke.prototype.normalizeSpriteURL=function(L,N,Q,he){var ye=Ne(L);return ze(L)?(ye.path="/styles/v1"+ye.path+"/sprite"+N+Q,this._makeAPIURL(ye,this._customAccessToken||he)):(ye.path+=""+N+Q,nt(ye))},ke.prototype.normalizeTileURL=function(L,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),L&&!ze(L))return L;var Q=Ne(L),he=/(\.(png|jpg)\d*)(?=$)/,ye=/^.+\/v4\//,Te=ue.devicePixelRatio>=2||512===N?"@2x":"",Ye=ne.supported?".webp":"$1";Q.path=Q.path.replace(he,""+Te+Ye),Q.path=Q.path.replace(ye,"/"),Q.path="/v4"+Q.path;var lt=this._customAccessToken||at(Q.params)||re.ACCESS_TOKEN;return re.REQUIRE_ACCESS_TOKEN&&lt&&this._skuToken&&Q.params.push("sku="+this._skuToken),this._makeAPIURL(Q,lt)},ke.prototype.canonicalizeTileURL=function(L,N){var Q="/v4/",he=/\.[\w]+$/,ye=Ne(L);if(!ye.path.match(/(^\/v4\/)/)||!ye.path.match(he))return L;var Te="mapbox://tiles/";Te+=ye.path.replace(Q,"");var Ye=ye.params;return N&&(Ye=Ye.filter(function(lt){return!lt.match(/^access_token=/)})),Ye.length&&(Te+="?"+Ye.join("&")),Te},ke.prototype.canonicalizeTileset=function(L,N){for(var Q=!!N&&ze(N),he=[],ye=0,Te=L.tiles||[];ye<Te.length;ye+=1){var Ye=Te[ye];Ie(Ye)?he.push(this.canonicalizeTileURL(Ye,Q)):he.push(Ye)}return he},ke.prototype._makeAPIURL=function(L,N){var Q="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=Ne(re.API_URL);if(L.protocol=he.protocol,L.authority=he.authority,"http"===L.protocol){var ye=L.params.indexOf("secure");ye>=0&&L.params.splice(ye,1)}if("/"!==he.path&&(L.path=""+he.path+L.path),!re.REQUIRE_ACCESS_TOKEN)return nt(L);if(!(N=N||re.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Q);if("s"===N[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Q);return L.params=L.params.filter(function(Te){return-1===Te.indexOf("access_token")}),L.params.push("access_token="+N),nt(L)};var Pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ie(C){return Pe.test(C)}function Qe(C){return C.indexOf("sku=")>0&&Ie(C)}function at(C){for(var L=0,N=C;L<N.length;L+=1){var he=N[L].match(/^access_token=(.*)$/);if(he)return he[1]}return null}var Be=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ne(C){var L=C.match(Be);if(!L)throw new Error("Unable to parse URL object");return{protocol:L[1],authority:L[2],path:L[3]||"/",params:L[4]?L[4].split("&"):[]}}function nt(C){var L=C.params.length?"?"+C.params.join("&"):"";return C.protocol+"://"+C.authority+C.path+L}var ct="mapbox.eventData";function mt(C){if(!C)return null;var L=C.split(".");if(!L||3!==L.length)return null;try{return JSON.parse(ie(L[1]))}catch{return null}}var Bt=function(L){this.type=L,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Bt.prototype.getStorageKey=function(L){var N=mt(re.ACCESS_TOKEN),Q="";return Q=N&&N.u?oe(N.u):re.ACCESS_TOKEN||"",L?ct+"."+L+":"+Q:ct+":"+Q},Bt.prototype.fetchEventData=function(){var L=q("localStorage"),N=this.getStorageKey(),Q=this.getStorageKey("uuid");if(L)try{var he=o.localStorage.getItem(N);he&&(this.eventData=JSON.parse(he));var ye=o.localStorage.getItem(Q);ye&&(this.anonId=ye)}catch{O("Unable to read from LocalStorage")}},Bt.prototype.saveEventData=function(){var L=q("localStorage"),N=this.getStorageKey(),Q=this.getStorageKey("uuid");if(L)try{o.localStorage.setItem(Q,this.anonId),Object.keys(this.eventData).length>=1&&o.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Bt.prototype.processRequests=function(L){},Bt.prototype.postEvent=function(L,N,Q,he){var ye=this;if(re.EVENTS_URL){var Te=Ne(re.EVENTS_URL);Te.params.push("access_token="+(he||re.ACCESS_TOKEN||""));var Ye={event:this.type,created:new Date(L).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:Le,userId:this.anonId},lt=N?d(Ye,N):Ye,dt={url:nt(Te),headers:{"Content-Type":"text/plain"},body:JSON.stringify([lt])};this.pendingRequest=tr(dt,function(At){ye.pendingRequest=null,Q(At),ye.saveEventData(),ye.processRequests(he)})}},Bt.prototype.queueRequest=function(L,N){this.queue.push(L),this.processRequests(N)};var we,Xe,Rt=function(C){function L(){C.call(this,"map.load"),this.success={},this.skuToken=""}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.postMapLoadEvent=function(Q,he,ye,Te){this.skuToken=ye,(re.EVENTS_URL&&Te||re.ACCESS_TOKEN&&Array.isArray(Q)&&Q.some(function(Ye){return ze(Ye)||Ie(Ye)}))&&this.queueRequest({id:he,timestamp:Date.now()},Te)},L.prototype.processRequests=function(Q){var he=this;if(!this.pendingRequest&&0!==this.queue.length){var ye=this.queue.shift(),Te=ye.id,Ye=ye.timestamp;Te&&this.success[Te]||(this.anonId||this.fetchEventData(),E(this.anonId)||(this.anonId=S()),this.postEvent(Ye,{skuToken:this.skuToken},function(lt){lt||Te&&(he.success[Te]=!0)},Q))}},L}(Bt),zt=function(C){function L(N){C.call(this,"appUserTurnstile"),this._customAccessToken=N}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.postTurnstileEvent=function(Q,he){re.EVENTS_URL&&re.ACCESS_TOKEN&&Array.isArray(Q)&&Q.some(function(ye){return ze(ye)||Ie(ye)})&&this.queueRequest(Date.now(),he)},L.prototype.processRequests=function(Q){var he=this;if(!this.pendingRequest&&0!==this.queue.length){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var ye=mt(re.ACCESS_TOKEN),Te=ye?ye.u:re.ACCESS_TOKEN,Ye=Te!==this.eventData.tokenU;E(this.anonId)||(this.anonId=S(),Ye=!0);var lt=this.queue.shift();if(this.eventData.lastSuccess){var dt=new Date(this.eventData.lastSuccess),At=new Date(lt),Vt=(lt-this.eventData.lastSuccess)/864e5;Ye=Ye||Vt>=1||Vt<-1||dt.getDate()!==At.getDate()}else Ye=!0;if(!Ye)return this.processRequests();this.postEvent(lt,{"enabled.telemetry":!1},function(ur){ur||(he.eventData.lastSuccess=lt,he.eventData.tokenU=Te)},Q)}},L}(Bt),St=new zt,Xt=St.postTurnstileEvent.bind(St),Mt=new Rt,st=Mt.postMapLoadEvent.bind(Mt),Se="mapbox-tiles",pe=500,ge=50,Oe=42e4;function He(){o.caches&&!we&&(we=o.caches.open(Se))}function ut(C,L){if(void 0===Xe)try{new Response(new ReadableStream),Xe=!0}catch{Xe=!1}Xe?L(C.body):C.blob().then(L)}function Ze(C,L,N){if(He(),we){var Q={status:L.status,statusText:L.statusText,headers:new o.Headers};L.headers.forEach(function(Te,Ye){return Q.headers.set(Ye,Te)});var he=W(L.headers.get("Cache-Control")||"");he["no-store"]||(he["max-age"]&&Q.headers.set("Expires",new Date(N+1e3*he["max-age"]).toUTCString()),new Date(Q.headers.get("Expires")).getTime()-N<Oe||ut(L,function(Te){var Ye=new o.Response(Te,Q);He(),we&&we.then(function(lt){return lt.put(qe(C.url),Ye)}).catch(function(lt){return O(lt.message)})}))}}function qe(C){var L=C.indexOf("?");return L<0?C:C.slice(0,L)}function Dt(C,L){if(He(),!we)return L(null);var N=qe(C.url);we.then(function(Q){Q.match(N).then(function(he){var ye=Ft(he);Q.delete(N),ye&&Q.put(N,he.clone()),L(null,he,ye)}).catch(L)}).catch(L)}function Ft(C){if(!C)return!1;var L=new Date(C.headers.get("Expires")||0),N=W(C.headers.get("Cache-Control")||"");return L>Date.now()&&!N["no-cache"]}var It,bt=1/0;function Pt(C){++bt>ge&&(C.getActor().send("enforceCacheSizeLimit",pe),bt=0)}function cr(C){He(),we&&we.then(function(L){L.keys().then(function(N){for(var Q=0;Q<N.length-C;Q++)L.delete(N[Q])})})}function Sr(C){var L=o.caches.delete(Se);C&&L.catch(C).then(function(){return C()})}function Kr(C,L){pe=C,ge=L}function $t(){return null==It&&(It=o.OffscreenCanvas&&new o.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof o.createImageBitmap),It}var kr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(kr);var lr=function(C){function L(N,Q,he){401===Q&&Ie(he)&&(N+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),C.call(this,N),this.status=Q,this.url=he,this.name=this.constructor.name,this.message=N}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},L}(Error),rt=ee()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===o.location.protocol?o.parent:o).location.href},$e=function(C){return/^file:/.test(C)||/^file:/.test(rt())&&!/^\w+:/.test(C)};function ht(C,L){var N=new o.AbortController,Q=new o.Request(C.url,{method:C.method||"GET",body:C.body,credentials:C.credentials,headers:C.headers,referrer:rt(),signal:N.signal}),he=!1,ye=!1,Te=Qe(Q.url);"json"===C.type&&Q.headers.set("Accept","application/json");var Ye=function(dt,At,Vt){if(!ye){if(dt&&"SecurityError"!==dt.message&&O(dt),At&&Vt)return lt(At);var ur=Date.now();o.fetch(Q).then(function(nr){if(nr.ok){var Pr=Te?nr.clone():null;return lt(nr,Pr,ur)}return L(new lr(nr.statusText,nr.status,C.url))}).catch(function(nr){20!==nr.code&&L(new Error(nr.message))})}},lt=function(dt,At,Vt){("arrayBuffer"===C.type?dt.arrayBuffer():"json"===C.type?dt.json():dt.text()).then(function(ur){ye||(At&&Vt&&Ze(Q,At,Vt),he=!0,L(null,ur,dt.headers.get("Cache-Control"),dt.headers.get("Expires")))}).catch(function(ur){ye||L(new Error(ur.message))})};return Te?Dt(Q,Ye):Ye(null,null),{cancel:function(){ye=!0,he||N.abort()}}}function gt(C,L){var N=new o.XMLHttpRequest;for(var Q in N.open(C.method||"GET",C.url,!0),"arrayBuffer"===C.type&&(N.responseType="arraybuffer"),C.headers)N.setRequestHeader(Q,C.headers[Q]);return"json"===C.type&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials="include"===C.credentials,N.onerror=function(){L(new Error(N.statusText))},N.onload=function(){if((N.status>=200&&N.status<300||0===N.status)&&null!==N.response){var he=N.response;if("json"===C.type)try{he=JSON.parse(N.response)}catch(ye){return L(ye)}L(null,he,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else L(new lr(N.statusText,N.status,C.url))},N.send(C.body),{cancel:function(){return N.abort()}}}var ft=function(C,L){if(!$e(C.url)){if(o.fetch&&o.Request&&o.AbortController&&o.Request.prototype.hasOwnProperty("signal"))return ht(C,L);if(ee()&&self.worker&&self.worker.actor){var N=!0;return self.worker.actor.send("getResource",C,L,void 0,N)}}return gt(C,L)},Ct=function(C,L){return ft(d(C,{type:"json"}),L)},sr=function(C,L){return ft(d(C,{type:"arrayBuffer"}),L)},tr=function(C,L){return ft(d(C,{method:"POST"}),L)};function Cr(C){var L=o.document.createElement("a");return L.href=C,L.protocol===o.document.location.protocol&&L.host===o.document.location.host}var Ke,We,Hr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function zr(C,L,N,Q){var he=new o.Image,ye=o.URL;he.onload=function(){L(null,he),ye.revokeObjectURL(he.src),he.onload=null,o.requestAnimationFrame(function(){he.src=Hr})},he.onerror=function(){return L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Te=new o.Blob([new Uint8Array(C)],{type:"image/png"});he.cacheControl=N,he.expires=Q,he.src=C.byteLength?ye.createObjectURL(Te):Hr}function Wr(C,L){var N=new o.Blob([new Uint8Array(C)],{type:"image/png"});o.createImageBitmap(N).then(function(Q){L(null,Q)}).catch(function(Q){L(new Error("Could not load image because of "+Q.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}Ke=[],We=0;var Gt=function(C,L){if(ne.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),We>=re.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:C,callback:L,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ke.push(N),N}We++;var Q=!1,he=function(){if(!Q)for(Q=!0,We--;Ke.length&&We<re.MAX_PARALLEL_IMAGE_REQUESTS;){var Te=Ke.shift(),Ye=Te.requestParameters,lt=Te.callback;Te.cancelled||(Te.cancel=Gt(Ye,lt).cancel)}},ye=sr(C,function(Te,Ye,lt,dt){he(),Te?L(Te):Ye&&($t()?Wr(Ye,L):zr(Ye,L,lt,dt))});return{cancel:function(){ye.cancel(),he()}}},hr=function(C,L){var N=o.document.createElement("video");N.muted=!0,N.onloadstart=function(){L(null,N)};for(var Q=0;Q<C.length;Q++){var he=o.document.createElement("source");Cr(C[Q])||(N.crossOrigin="Anonymous"),he.src=C[Q],N.appendChild(he)}return{cancel:function(){}}};function br(C,L,N){N[C]&&-1!==N[C].indexOf(L)||(N[C]=N[C]||[],N[C].push(L))}function Ut(C,L,N){if(N&&N[C]){var Q=N[C].indexOf(L);-1!==Q&&N[C].splice(Q,1)}}var Kt=function(L,N){void 0===N&&(N={}),d(this,N),this.type=L},wt=function(C){function L(N,Q){void 0===Q&&(Q={}),C.call(this,"error",d({error:N},Q))}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L}(Kt),xr=function(){};xr.prototype.on=function(L,N){return this._listeners=this._listeners||{},br(L,N,this._listeners),this},xr.prototype.off=function(L,N){return Ut(L,N,this._listeners),Ut(L,N,this._oneTimeListeners),this},xr.prototype.once=function(L,N){return this._oneTimeListeners=this._oneTimeListeners||{},br(L,N,this._oneTimeListeners),this},xr.prototype.fire=function(L,N){"string"==typeof L&&(L=new Kt(L,N||{}));var Q=L.type;if(this.listens(Q)){L.target=this;for(var ye=0,Te=this._listeners&&this._listeners[Q]?this._listeners[Q].slice():[];ye<Te.length;ye+=1)Te[ye].call(this,L);for(var dt=0,At=this._oneTimeListeners&&this._oneTimeListeners[Q]?this._oneTimeListeners[Q].slice():[];dt<At.length;dt+=1){var Vt=At[dt];Ut(Q,Vt,this._oneTimeListeners),Vt.call(this,L)}var ur=this._eventedParent;ur&&(d(L,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),ur.fire(L))}else L instanceof wt&&console.error(L.error);return this},xr.prototype.listens=function(L){return this._listeners&&this._listeners[L]&&this._listeners[L].length>0||this._oneTimeListeners&&this._oneTimeListeners[L]&&this._oneTimeListeners[L].length>0||this._eventedParent&&this._eventedParent.listens(L)},xr.prototype.setEventedParent=function(L,N){return this._eventedParent=L,this._eventedParentData=N,this};var In={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ta=function(L,N,Q,he){this.message=(L?L+": ":"")+Q,he&&(this.identifier=he),null!=N&&N.__line__&&(this.line=N.__line__)};function ls(C){var L=C.key,N=C.value;return N?[new Ta(L,N,"constants have been deprecated as of v8")]:[]}function Do(C){for(var L=[],N=arguments.length-1;N-- >0;)L[N]=arguments[N+1];for(var Q=0,he=L;Q<he.length;Q+=1){var ye=he[Q];for(var Te in ye)C[Te]=ye[Te]}return C}function oo(C){return C instanceof Number||C instanceof String||C instanceof Boolean?C.valueOf():C}function ys(C){if(Array.isArray(C))return C.map(ys);if(C instanceof Object&&!(C instanceof Number||C instanceof String||C instanceof Boolean)){var L={};for(var N in C)L[N]=ys(C[N]);return L}return oo(C)}var as=function(C){function L(N,Q){C.call(this,Q),this.message=Q,this.key=N}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L}(Error),el=function(L,N){void 0===N&&(N=[]),this.parent=L,this.bindings={};for(var Q=0,he=N;Q<he.length;Q+=1){var ye=he[Q],Te=ye[0],Ye=ye[1];this.bindings[Te]=Ye}};el.prototype.concat=function(L){return new el(this,L)},el.prototype.get=function(L){if(this.bindings[L])return this.bindings[L];if(this.parent)return this.parent.get(L);throw new Error(L+" not found in scope.")},el.prototype.has=function(L){return!!this.bindings[L]||!!this.parent&&this.parent.has(L)};var To={kind:"null"},va={kind:"number"},Ai={kind:"string"},bi={kind:"boolean"},so={kind:"color"},eo={kind:"object"},fi={kind:"value"},Ql={kind:"error"},Os={kind:"collator"},ms={kind:"formatted"},tl={kind:"resolvedImage"};function Ro(C,L){return{kind:"array",itemType:C,N:L}}function yo(C){if("array"===C.kind){var L=yo(C.itemType);return"number"==typeof C.N?"array<"+L+", "+C.N+">":"value"===C.itemType.kind?"array":"array<"+L+">"}return C.kind}var Ls=[To,va,Ai,bi,so,ms,eo,Ro(fi),tl];function xs(C,L){if("error"===L.kind)return null;if("array"===C.kind){if("array"===L.kind&&(0===L.N&&"value"===L.itemType.kind||!xs(C.itemType,L.itemType))&&("number"!=typeof C.N||C.N===L.N))return null}else{if(C.kind===L.kind)return null;if("value"===C.kind)for(var N=0,Q=Ls;N<Q.length;N+=1)if(!xs(Q[N],L))return null}return"Expected "+yo(C)+" but found "+yo(L)+" instead."}function Ll(C,L){return L.some(function(N){return N.kind===C.kind})}function Hs(C,L){return L.some(function(N){return"null"===N?null===C:"array"===N?Array.isArray(C):"object"===N?C&&!Array.isArray(C)&&"object"==typeof C:N===typeof C})}var Pl=T(function(C,L){var N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Q(dt){return(dt=Math.round(dt))<0?0:dt>255?255:dt}function he(dt){return dt<0?0:dt>1?1:dt}function ye(dt){return"%"===dt[dt.length-1]?Q(parseFloat(dt)/100*255):Q(parseInt(dt))}function Te(dt){return"%"===dt[dt.length-1]?he(parseFloat(dt)/100):he(parseFloat(dt))}function Ye(dt,At,Vt){return Vt<0?Vt+=1:Vt>1&&(Vt-=1),6*Vt<1?dt+(At-dt)*Vt*6:2*Vt<1?At:3*Vt<2?dt+(At-dt)*(2/3-Vt)*6:dt}function lt(dt){var Vt,At=dt.replace(/ /g,"").toLowerCase();if(At in N)return N[At].slice();if("#"===At[0])return 4===At.length?(Vt=parseInt(At.substr(1),16))>=0&&Vt<=4095?[(3840&Vt)>>4|(3840&Vt)>>8,240&Vt|(240&Vt)>>4,15&Vt|(15&Vt)<<4,1]:null:7===At.length&&(Vt=parseInt(At.substr(1),16))>=0&&Vt<=16777215?[(16711680&Vt)>>16,(65280&Vt)>>8,255&Vt,1]:null;var ur=At.indexOf("("),nr=At.indexOf(")");if(-1!==ur&&nr+1===At.length){var Pr=At.substr(0,ur),jr=At.substr(ur+1,nr-(ur+1)).split(","),cn=1;switch(Pr){case"rgba":if(4!==jr.length)return null;cn=Te(jr.pop());case"rgb":return 3!==jr.length?null:[ye(jr[0]),ye(jr[1]),ye(jr[2]),cn];case"hsla":if(4!==jr.length)return null;cn=Te(jr.pop());case"hsl":if(3!==jr.length)return null;var rn=(parseFloat(jr[0])%360+360)%360/360,Pn=Te(jr[1]),mn=Te(jr[2]),Ln=mn<=.5?mn*(Pn+1):mn+Pn-mn*Pn,Fn=2*mn-Ln;return[Q(255*Ye(Fn,Ln,rn+1/3)),Q(255*Ye(Fn,Ln,rn)),Q(255*Ye(Fn,Ln,rn-1/3)),cn];default:return null}}return null}try{L.parseCSSColor=lt}catch{}}).parseCSSColor,ji=function(L,N,Q,he){void 0===he&&(he=1),this.r=L,this.g=N,this.b=Q,this.a=he};ji.parse=function(L){if(L){if(L instanceof ji)return L;if("string"==typeof L){var N=Pl(L);if(N)return new ji(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},ji.prototype.toString=function(){var L=this.toArray(),N=L[0],Q=L[1],he=L[2],ye=L[3];return"rgba("+Math.round(N)+","+Math.round(Q)+","+Math.round(he)+","+ye+")"},ji.prototype.toArray=function(){var L=this,N=L.r,Q=L.g,he=L.b,ye=L.a;return 0===ye?[0,0,0,0]:[255*N/ye,255*Q/ye,255*he/ye,ye]},ji.black=new ji(0,0,0,1),ji.white=new ji(1,1,1,1),ji.transparent=new ji(0,0,0,0),ji.red=new ji(1,0,0,1);var Il=function(L,N,Q){this.sensitivity=L?N?"variant":"case":N?"accent":"base",this.locale=Q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Il.prototype.compare=function(L,N){return this.collator.compare(L,N)},Il.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var pu=function(L,N,Q,he,ye){this.text=L,this.image=N,this.scale=Q,this.fontStack=he,this.textColor=ye},Ho=function(L){this.sections=L};Ho.fromString=function(L){return new Ho([new pu(L,null,null,null,null)])},Ho.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(L){return 0!==L.text.length||L.image&&0!==L.image.name.length})},Ho.factory=function(L){return L instanceof Ho?L:Ho.fromString(L)},Ho.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(L){return L.text}).join("")},Ho.prototype.serialize=function(){for(var L=["format"],N=0,Q=this.sections;N<Q.length;N+=1){var he=Q[N];if(he.image)L.push(["image",he.image.name]);else{L.push(he.text);var ye={};he.fontStack&&(ye["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(ye["font-scale"]=he.scale),he.textColor&&(ye["text-color"]=["rgba"].concat(he.textColor.toArray())),L.push(ye)}}return L};var Zo=function(L){this.name=L.name,this.available=L.available};function Vs(C,L,N,Q){return"number"==typeof C&&C>=0&&C<=255&&"number"==typeof L&&L>=0&&L<=255&&"number"==typeof N&&N>=0&&N<=255?typeof Q>"u"||"number"==typeof Q&&Q>=0&&Q<=1?null:"Invalid rgba value ["+[C,L,N,Q].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof Q?[C,L,N,Q]:[C,L,N]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ps(C){if(null===C)return!0;if("string"==typeof C)return!0;if("boolean"==typeof C)return!0;if("number"==typeof C)return!0;if(C instanceof ji)return!0;if(C instanceof Il)return!0;if(C instanceof Ho)return!0;if(C instanceof Zo)return!0;if(Array.isArray(C)){for(var L=0,N=C;L<N.length;L+=1)if(!Ps(N[L]))return!1;return!0}if("object"==typeof C){for(var he in C)if(!Ps(C[he]))return!1;return!0}return!1}function Vo(C){if(null===C)return To;if("string"==typeof C)return Ai;if("boolean"==typeof C)return bi;if("number"==typeof C)return va;if(C instanceof ji)return so;if(C instanceof Il)return Os;if(C instanceof Ho)return ms;if(C instanceof Zo)return tl;if(Array.isArray(C)){for(var N,L=C.length,Q=0,he=C;Q<he.length;Q+=1){var Te=Vo(he[Q]);if(N){if(N===Te)continue;N=fi;break}N=Te}return Ro(N||fi,L)}return eo}function nl(C){var L=typeof C;return null===C?"":"string"===L||"number"===L||"boolean"===L?String(C):C instanceof ji||C instanceof Ho||C instanceof Zo?C.toString():JSON.stringify(C)}Zo.prototype.toString=function(){return this.name},Zo.fromString=function(L){return L?new Zo({name:L,available:!1}):null},Zo.prototype.serialize=function(){return["image",this.name]};var Bo=function(L,N){this.type=L,this.value=N};Bo.parse=function(L,N){if(2!==L.length)return N.error("'literal' expression requires exactly one argument, but found "+(L.length-1)+" instead.");if(!Ps(L[1]))return N.error("invalid value");var Q=L[1],he=Vo(Q),ye=N.expectedType;return"array"===he.kind&&0===he.N&&ye&&"array"===ye.kind&&("number"!=typeof ye.N||0===ye.N)&&(he=ye),new Bo(he,Q)},Bo.prototype.evaluate=function(){return this.value},Bo.prototype.eachChild=function(){},Bo.prototype.outputDefined=function(){return!0},Bo.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ji?["rgba"].concat(this.value.toArray()):this.value instanceof Ho?this.value.serialize():this.value};var ko=function(L){this.name="ExpressionEvaluationError",this.message=L};ko.prototype.toJSON=function(){return this.message};var gu={string:Ai,number:va,boolean:bi,object:eo},Ao=function(L,N){this.type=L,this.args=N};Ao.parse=function(L,N){if(L.length<2)return N.error("Expected at least one argument.");var he,Q=1,ye=L[0];if("array"===ye){var Te,lt;if(L.length>2){var Ye=L[1];if("string"!=typeof Ye||!(Ye in gu)||"object"===Ye)return N.error('The item type argument of "array" must be one of string, number, boolean',1);Te=gu[Ye],Q++}else Te=fi;if(L.length>3){if(null!==L[2]&&("number"!=typeof L[2]||L[2]<0||L[2]!==Math.floor(L[2])))return N.error('The length argument to "array" must be a positive integer literal',2);lt=L[2],Q++}he=Ro(Te,lt)}else he=gu[ye];for(var dt=[];Q<L.length;Q++){var At=N.parse(L[Q],Q,fi);if(!At)return null;dt.push(At)}return new Ao(he,dt)},Ao.prototype.evaluate=function(L){for(var N=0;N<this.args.length;N++){var Q=this.args[N].evaluate(L);if(!xs(this.type,Vo(Q)))return Q;if(N===this.args.length-1)throw new ko("Expected value to be of type "+yo(this.type)+", but found "+yo(Vo(Q))+" instead.")}return null},Ao.prototype.eachChild=function(L){this.args.forEach(L)},Ao.prototype.outputDefined=function(){return this.args.every(function(L){return L.outputDefined()})},Ao.prototype.serialize=function(){var L=this.type,N=[L.kind];if("array"===L.kind){var Q=L.itemType;if("string"===Q.kind||"number"===Q.kind||"boolean"===Q.kind){N.push(Q.kind);var he=L.N;("number"==typeof he||this.args.length>1)&&N.push(he)}}return N.concat(this.args.map(function(ye){return ye.serialize()}))};var us=function(L){this.type=ms,this.sections=L};us.parse=function(L,N){if(L.length<2)return N.error("Expected at least one argument.");var Q=L[1];if(!Array.isArray(Q)&&"object"==typeof Q)return N.error("First argument must be an image or text section.");for(var he=[],ye=!1,Te=1;Te<=L.length-1;++Te){var Ye=L[Te];if(ye&&"object"==typeof Ye&&!Array.isArray(Ye)){ye=!1;var lt=null;if(Ye["font-scale"]&&!(lt=N.parse(Ye["font-scale"],1,va)))return null;var dt=null;if(Ye["text-font"]&&!(dt=N.parse(Ye["text-font"],1,Ro(Ai))))return null;var At=null;if(Ye["text-color"]&&!(At=N.parse(Ye["text-color"],1,so)))return null;var Vt=he[he.length-1];Vt.scale=lt,Vt.font=dt,Vt.textColor=At}else{var ur=N.parse(L[Te],1,fi);if(!ur)return null;var nr=ur.type.kind;if("string"!==nr&&"value"!==nr&&"null"!==nr&&"resolvedImage"!==nr)return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ye=!0,he.push({content:ur,scale:null,font:null,textColor:null})}}return new us(he)},us.prototype.evaluate=function(L){var N=function(Q){var he=Q.content.evaluate(L);return Vo(he)===tl?new pu("",he,null,null,null):new pu(nl(he),null,Q.scale?Q.scale.evaluate(L):null,Q.font?Q.font.evaluate(L).join(","):null,Q.textColor?Q.textColor.evaluate(L):null)};return new Ho(this.sections.map(N))},us.prototype.eachChild=function(L){for(var N=0,Q=this.sections;N<Q.length;N+=1){var he=Q[N];L(he.content),he.scale&&L(he.scale),he.font&&L(he.font),he.textColor&&L(he.textColor)}},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){for(var L=["format"],N=0,Q=this.sections;N<Q.length;N+=1){var he=Q[N];L.push(he.content.serialize());var ye={};he.scale&&(ye["font-scale"]=he.scale.serialize()),he.font&&(ye["text-font"]=he.font.serialize()),he.textColor&&(ye["text-color"]=he.textColor.serialize()),L.push(ye)}return L};var fs=function(L){this.type=tl,this.input=L};fs.parse=function(L,N){if(2!==L.length)return N.error("Expected two arguments.");var Q=N.parse(L[1],1,Ai);return Q?new fs(Q):N.error("No image name provided.")},fs.prototype.evaluate=function(L){var N=this.input.evaluate(L),Q=Zo.fromString(N);return Q&&L.availableImages&&(Q.available=L.availableImages.indexOf(N)>-1),Q},fs.prototype.eachChild=function(L){L(this.input)},fs.prototype.outputDefined=function(){return!1},fs.prototype.serialize=function(){return["image",this.input.serialize()]};var Dl={"to-boolean":bi,"to-color":so,"to-number":va,"to-string":Ai},Go=function(L,N){this.type=L,this.args=N};Go.parse=function(L,N){if(L.length<2)return N.error("Expected at least one argument.");var Q=L[0];if(("to-boolean"===Q||"to-string"===Q)&&2!==L.length)return N.error("Expected one argument.");for(var he=Dl[Q],ye=[],Te=1;Te<L.length;Te++){var Ye=N.parse(L[Te],Te,fi);if(!Ye)return null;ye.push(Ye)}return new Go(he,ye)},Go.prototype.evaluate=function(L){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(L));if("color"===this.type.kind){for(var N,Q,he=0,ye=this.args;he<ye.length;he+=1){if(Q=null,(N=ye[he].evaluate(L))instanceof ji)return N;if("string"==typeof N){var Ye=L.parseColor(N);if(Ye)return Ye}else if(Array.isArray(N)&&!(Q=N.length<3||N.length>4?"Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":Vs(N[0],N[1],N[2],N[3])))return new ji(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new ko(Q||"Could not parse color from value '"+("string"==typeof N?N:String(JSON.stringify(N)))+"'")}if("number"===this.type.kind){for(var lt=null,dt=0,At=this.args;dt<At.length;dt+=1){if(null===(lt=At[dt].evaluate(L)))return 0;var ur=Number(lt);if(!isNaN(ur))return ur}throw new ko("Could not convert "+JSON.stringify(lt)+" to number.")}return"formatted"===this.type.kind?Ho.fromString(nl(this.args[0].evaluate(L))):"resolvedImage"===this.type.kind?Zo.fromString(nl(this.args[0].evaluate(L))):nl(this.args[0].evaluate(L))},Go.prototype.eachChild=function(L){this.args.forEach(L)},Go.prototype.outputDefined=function(){return this.args.every(function(L){return L.outputDefined()})},Go.prototype.serialize=function(){if("formatted"===this.type.kind)return new us([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new fs(this.args[0]).serialize();var L=["to-"+this.type.kind];return this.eachChild(function(N){L.push(N.serialize())}),L};var yu=["Unknown","Point","LineString","Polygon"],es=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};es.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},es.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?yu[this.feature.type]:this.feature.type:null},es.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},es.prototype.canonicalID=function(){return this.canonical},es.prototype.properties=function(){return this.feature&&this.feature.properties||{}},es.prototype.parseColor=function(L){var N=this._parseColorCache[L];return N||(N=this._parseColorCache[L]=ji.parse(L)),N};var Wi=function(L,N,Q,he){this.name=L,this.type=N,this._evaluate=Q,this.args=he};function mu(C){return Array.isArray(C)?"("+C.map(yo).join(", ")+")":"("+yo(C.type)+"...)"}Wi.prototype.evaluate=function(L){return this._evaluate(L,this.args)},Wi.prototype.eachChild=function(L){this.args.forEach(L)},Wi.prototype.outputDefined=function(){return!1},Wi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(L){return L.serialize()}))},Wi.parse=function(L,N){var Q,he=L[0],ye=Wi.definitions[he];if(!ye)return N.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Te=Array.isArray(ye)?ye[0]:ye.type,Ye=Array.isArray(ye)?[[ye[1],ye[2]]]:ye.overloads,lt=Ye.filter(function(ei){var ri=ei[0];return!Array.isArray(ri)||ri.length===L.length-1}),dt=null,At=0,Vt=lt;At<Vt.length;At+=1){var ur=Vt[At],nr=ur[0],Pr=ur[1];dt=new ws(N.registry,N.path,null,N.scope);for(var jr=[],cn=!1,rn=1;rn<L.length;rn++){var Pn=L[rn],mn=Array.isArray(nr)?nr[rn-1]:nr.type,Ln=dt.parse(Pn,1+jr.length,mn);if(!Ln){cn=!0;break}jr.push(Ln)}if(!cn){if(Array.isArray(nr)&&nr.length!==jr.length){dt.error("Expected "+nr.length+" arguments, but found "+jr.length+" instead.");continue}for(var Fn=0;Fn<jr.length;Fn++){var Jn=Array.isArray(nr)?nr[Fn]:nr.type,Sa=jr[Fn];dt.concat(Fn+1).checkSubtype(Jn,Sa.type)}if(0===dt.errors.length)return new Wi(he,Te,Pr,jr)}}if(1===lt.length)(Q=N.errors).push.apply(Q,dt.errors);else{for(var qa=(lt.length?lt:Ye).map(function(ei){return mu(ei[0])}).join(" | "),Ua=[],Xa=1;Xa<L.length;Xa++){var Li=N.parse(L[Xa],1+Ua.length);if(!Li)return null;Ua.push(yo(Li.type))}N.error("Expected arguments of type "+qa+", but found ("+Ua.join(", ")+") instead.")}return null},Wi.register=function(L,N){for(var Q in Wi.definitions=N,N)L[Q]=Wi};var Is=function(L,N,Q){this.type=Os,this.locale=Q,this.caseSensitive=L,this.diacriticSensitive=N};Is.parse=function(L,N){if(2!==L.length)return N.error("Expected one argument.");var Q=L[1];if("object"!=typeof Q||Array.isArray(Q))return N.error("Collator options argument must be an object.");var he=N.parse(void 0!==Q["case-sensitive"]&&Q["case-sensitive"],1,bi);if(!he)return null;var ye=N.parse(void 0!==Q["diacritic-sensitive"]&&Q["diacritic-sensitive"],1,bi);if(!ye)return null;var Te=null;return Q.locale&&!(Te=N.parse(Q.locale,1,Ai))?null:new Is(he,ye,Te)},Is.prototype.evaluate=function(L){return new Il(this.caseSensitive.evaluate(L),this.diacriticSensitive.evaluate(L),this.locale?this.locale.evaluate(L):null)},Is.prototype.eachChild=function(L){L(this.caseSensitive),L(this.diacriticSensitive),this.locale&&L(this.locale)},Is.prototype.outputDefined=function(){return!1},Is.prototype.serialize=function(){var L={};return L["case-sensitive"]=this.caseSensitive.serialize(),L["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(L.locale=this.locale.serialize()),["collator",L]};var ts=8192;function Rl(C,L){C[0]=Math.min(C[0],L[0]),C[1]=Math.min(C[1],L[1]),C[2]=Math.max(C[2],L[0]),C[3]=Math.max(C[3],L[1])}function $l(C){return(180+C)/360}function hf(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function rs(C,L){return!(C[0]<=L[0]||C[2]>=L[2]||C[1]<=L[1]||C[3]>=L[3])}function is(C,L){var N=$l(C[0]),Q=hf(C[1]),he=Math.pow(2,L.z);return[Math.round(N*he*ts),Math.round(Q*he*ts)]}function bs(C,L,N){var Q=C[0]-L[0],he=C[1]-L[1],ye=C[0]-N[0],Te=C[1]-N[1];return Q*Te-ye*he==0&&Q*ye<=0&&he*Te<=0}function Ns(C,L,N){return L[1]>C[1]!=N[1]>C[1]&&C[0]<(N[0]-L[0])*(C[1]-L[1])/(N[1]-L[1])+L[0]}function Ds(C,L){for(var N=!1,Q=0,he=L.length;Q<he;Q++)for(var ye=L[Q],Te=0,Ye=ye.length;Te<Ye-1;Te++){if(bs(C,ye[Te],ye[Te+1]))return!1;Ns(C,ye[Te],ye[Te+1])&&(N=!N)}return N}function Bs(C,L){for(var N=0;N<L.length;N++)if(Ds(C,L[N]))return!0;return!1}function Gs(C,L){return C[0]*L[1]-C[1]*L[0]}function Gl(C,L,N,Q){var he=C[0]-N[0],ye=C[1]-N[1],Te=L[0]-N[0],Ye=L[1]-N[1],lt=Q[0]-N[0],dt=Q[1]-N[1],At=he*dt-lt*ye,Vt=Te*dt-lt*Ye;return At>0&&Vt<0||At<0&&Vt>0}function zf(C,L,N,Q){var he=[L[0]-C[0],L[1]-C[1]];return 0!==Gs([Q[0]-N[0],Q[1]-N[1]],he)&&!(!Gl(C,L,N,Q)||!Gl(N,Q,C,L))}function $u(C,L,N){for(var Q=0,he=N;Q<he.length;Q+=1)for(var ye=he[Q],Te=0;Te<ye.length-1;++Te)if(zf(C,L,ye[Te],ye[Te+1]))return!0;return!1}function Of(C,L){for(var N=0;N<C.length;++N)if(!Ds(C[N],L))return!1;for(var Q=0;Q<C.length-1;++Q)if($u(C[Q],C[Q+1],L))return!1;return!0}function kl(C,L){for(var N=0;N<L.length;N++)if(Of(C,L[N]))return!0;return!1}function xu(C,L,N){for(var Q=[],he=0;he<C.length;he++){for(var ye=[],Te=0;Te<C[he].length;Te++){var Ye=is(C[he][Te],N);Rl(L,Ye),ye.push(Ye)}Q.push(ye)}return Q}function qu(C,L,N){for(var Q=[],he=0;he<C.length;he++){var ye=xu(C[he],L,N);Q.push(ye)}return Q}function ql(C,L,N,Q){if(C[0]<N[0]||C[0]>N[2]){var he=.5*Q,ye=C[0]-N[0]>he?-Q:N[0]-C[0]>he?Q:0;0===ye&&(ye=C[0]-N[2]>he?-Q:N[2]-C[0]>he?Q:0),C[0]+=ye}Rl(L,C)}function vf(C){C[0]=C[1]=1/0,C[2]=C[3]=-1/0}function zu(C,L,N,Q){for(var he=Math.pow(2,Q.z)*ts,ye=[Q.x*ts,Q.y*ts],Te=[],Ye=0,lt=C;Ye<lt.length;Ye+=1)for(var At=0,Vt=lt[Ye];At<Vt.length;At+=1){var ur=Vt[At],nr=[ur.x+ye[0],ur.y+ye[1]];ql(nr,L,N,he),Te.push(nr)}return Te}function jl(C,L,N,Q){for(var he=Math.pow(2,Q.z)*ts,ye=[Q.x*ts,Q.y*ts],Te=[],Ye=0,lt=C;Ye<lt.length;Ye+=1){for(var At=[],Vt=0,ur=lt[Ye];Vt<ur.length;Vt+=1){var nr=ur[Vt],Pr=[nr.x+ye[0],nr.y+ye[1]];Rl(L,Pr),At.push(Pr)}Te.push(At)}if(L[2]-L[0]<=he/2){vf(L);for(var jr=0,cn=Te;jr<cn.length;jr+=1)for(var Pn=0,mn=cn[jr];Pn<mn.length;Pn+=1)ql(mn[Pn],L,N,he)}return Te}function ef(C,L){var N=[1/0,1/0,-1/0,-1/0],Q=[1/0,1/0,-1/0,-1/0],he=C.canonicalID();if("Polygon"===L.type){var ye=xu(L.coordinates,Q,he),Te=zu(C.geometry(),N,Q,he);if(!rs(N,Q))return!1;for(var Ye=0,lt=Te;Ye<lt.length;Ye+=1)if(!Ds(lt[Ye],ye))return!1}if("MultiPolygon"===L.type){var At=qu(L.coordinates,Q,he),Vt=zu(C.geometry(),N,Q,he);if(!rs(N,Q))return!1;for(var ur=0,nr=Vt;ur<nr.length;ur+=1)if(!Bs(nr[ur],At))return!1}return!0}function Ou(C,L){var N=[1/0,1/0,-1/0,-1/0],Q=[1/0,1/0,-1/0,-1/0],he=C.canonicalID();if("Polygon"===L.type){var ye=xu(L.coordinates,Q,he),Te=jl(C.geometry(),N,Q,he);if(!rs(N,Q))return!1;for(var Ye=0,lt=Te;Ye<lt.length;Ye+=1)if(!Of(lt[Ye],ye))return!1}if("MultiPolygon"===L.type){var At=qu(L.coordinates,Q,he),Vt=jl(C.geometry(),N,Q,he);if(!rs(N,Q))return!1;for(var ur=0,nr=Vt;ur<nr.length;ur+=1)if(!kl(nr[ur],At))return!1}return!0}var js=function(L,N){this.type=bi,this.geojson=L,this.geometries=N};function bu(C){if(C instanceof Wi){if("get"===C.name&&1===C.args.length)return!1;if("feature-state"===C.name)return!1;if("has"===C.name&&1===C.args.length)return!1;if("properties"===C.name||"geometry-type"===C.name||"id"===C.name)return!1;if(/^filter-/.test(C.name))return!1}if(C instanceof js)return!1;var L=!0;return C.eachChild(function(N){L&&!bu(N)&&(L=!1)}),L}function co(C){if(C instanceof Wi&&"feature-state"===C.name)return!1;var L=!0;return C.eachChild(function(N){L&&!co(N)&&(L=!1)}),L}function Wl(C,L){if(C instanceof Wi&&L.indexOf(C.name)>=0)return!1;var N=!0;return C.eachChild(function(Q){N&&!Wl(Q,L)&&(N=!1)}),N}js.parse=function(L,N){if(2!==L.length)return N.error("'within' expression requires exactly one argument, but found "+(L.length-1)+" instead.");if(Ps(L[1])){var Q=L[1];if("FeatureCollection"===Q.type)for(var he=0;he<Q.features.length;++he){var ye=Q.features[he].geometry.type;if("Polygon"===ye||"MultiPolygon"===ye)return new js(Q,Q.features[he].geometry)}else if("Feature"===Q.type){var Te=Q.geometry.type;if("Polygon"===Te||"MultiPolygon"===Te)return new js(Q,Q.geometry)}else if("Polygon"===Q.type||"MultiPolygon"===Q.type)return new js(Q,Q)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},js.prototype.evaluate=function(L){if(null!=L.geometry()&&null!=L.canonicalID()){if("Point"===L.geometryType())return ef(L,this.geometries);if("LineString"===L.geometryType())return Ou(L,this.geometries)}return!1},js.prototype.eachChild=function(){},js.prototype.outputDefined=function(){return!0},js.prototype.serialize=function(){return["within",this.geojson]};var al=function(L,N){this.type=N.type,this.name=L,this.boundExpression=N};al.parse=function(L,N){if(2!==L.length||"string"!=typeof L[1])return N.error("'var' expression requires exactly one string literal argument.");var Q=L[1];return N.scope.has(Q)?new al(Q,N.scope.get(Q)):N.error('Unknown variable "'+Q+'". Make sure "'+Q+'" has been bound in an enclosing "let" expression before using it.',1)},al.prototype.evaluate=function(L){return this.boundExpression.evaluate(L)},al.prototype.eachChild=function(){},al.prototype.outputDefined=function(){return!1},al.prototype.serialize=function(){return["var",this.name]};var ws=function(L,N,Q,he,ye){void 0===N&&(N=[]),void 0===he&&(he=new el),void 0===ye&&(ye=[]),this.registry=L,this.path=N,this.key=N.map(function(Te){return"["+Te+"]"}).join(""),this.scope=he,this.errors=ye,this.expectedType=Q};function _l(C){if(C instanceof al)return _l(C.boundExpression);if(C instanceof Wi&&"error"===C.name)return!1;if(C instanceof Is)return!1;if(C instanceof js)return!1;var L=C instanceof Go||C instanceof Ao,N=!0;return C.eachChild(function(Q){N=L?N&&_l(Q):N&&Q instanceof Bo}),!!N&&bu(C)&&Wl(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function il(C,L){for(var Te,Ye,N=C.length-1,Q=0,he=N,ye=0;Q<=he;)if(Te=C[ye=Math.floor((Q+he)/2)],Ye=C[ye+1],Te<=L){if(ye===N||L<Ye)return ye;Q=ye+1}else{if(!(Te>L))throw new ko("Input is not a number.");he=ye-1}return 0}ws.prototype.parse=function(L,N,Q,he,ye){return void 0===ye&&(ye={}),N?this.concat(N,Q,he)._parse(L,ye):this._parse(L,ye)},ws.prototype._parse=function(L,N){function Q(At,Vt,ur){return"assert"===ur?new Ao(Vt,[At]):"coerce"===ur?new Go(Vt,[At]):At}if((null===L||"string"==typeof L||"boolean"==typeof L||"number"==typeof L)&&(L=["literal",L]),Array.isArray(L)){if(0===L.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=L[0];if("string"!=typeof he)return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ye=this.registry[he];if(ye){var Te=ye.parse(L,this);if(!Te)return null;if(this.expectedType){var Ye=this.expectedType,lt=Te.type;if("string"!==Ye.kind&&"number"!==Ye.kind&&"boolean"!==Ye.kind&&"object"!==Ye.kind&&"array"!==Ye.kind||"value"!==lt.kind)if("color"!==Ye.kind&&"formatted"!==Ye.kind&&"resolvedImage"!==Ye.kind||"value"!==lt.kind&&"string"!==lt.kind){if(this.checkSubtype(Ye,lt))return null}else Te=Q(Te,Ye,N.typeAnnotation||"coerce");else Te=Q(Te,Ye,N.typeAnnotation||"assert")}if(!(Te instanceof Bo)&&"resolvedImage"!==Te.type.kind&&_l(Te)){var dt=new es;try{Te=new Bo(Te.type,Te.evaluate(dt))}catch(At){return this.error(At.message),null}}return Te}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}return typeof L>"u"?this.error("'undefined' value invalid. Use null instead."):"object"==typeof L?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof L+" instead.")},ws.prototype.concat=function(L,N,Q){var he="number"==typeof L?this.path.concat(L):this.path,ye=Q?this.scope.concat(Q):this.scope;return new ws(this.registry,he,N||null,ye,this.errors)},ws.prototype.error=function(L){for(var N=[],Q=arguments.length-1;Q-- >0;)N[Q]=arguments[Q+1];var he=""+this.key+N.map(function(ye){return"["+ye+"]"}).join("");this.errors.push(new as(he,L))},ws.prototype.checkSubtype=function(L,N){var Q=xs(L,N);return Q&&this.error(Q),Q};var pl=function(L,N,Q){this.type=L,this.input=N,this.labels=[],this.outputs=[];for(var he=0,ye=Q;he<ye.length;he+=1){var Te=ye[he],Ye=Te[0],lt=Te[1];this.labels.push(Ye),this.outputs.push(lt)}};function Fo(C,L,N){return C*(1-N)+L*N}function Nf(C,L,N){return new ji(Fo(C.r,L.r,N),Fo(C.g,L.g,N),Fo(C.b,L.b,N),Fo(C.a,L.a,N))}function Ef(C,L,N){return C.map(function(Q,he){return Fo(Q,L[he],N)})}pl.parse=function(L,N){if(L.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(L.length-1)+".");if((L.length-1)%2!=0)return N.error("Expected an even number of arguments.");var Q=N.parse(L[1],1,va);if(!Q)return null;var he=[],ye=null;N.expectedType&&"value"!==N.expectedType.kind&&(ye=N.expectedType);for(var Te=1;Te<L.length;Te+=2){var Ye=1===Te?-1/0:L[Te],lt=L[Te+1],dt=Te,At=Te+1;if("number"!=typeof Ye)return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',dt);if(he.length&&he[he.length-1][0]>=Ye)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',dt);var Vt=N.parse(lt,At,ye);if(!Vt)return null;ye=ye||Vt.type,he.push([Ye,Vt])}return new pl(ye,Q,he)},pl.prototype.evaluate=function(L){var N=this.labels,Q=this.outputs;if(1===N.length)return Q[0].evaluate(L);var he=this.input.evaluate(L);if(he<=N[0])return Q[0].evaluate(L);var ye=N.length;return he>=N[ye-1]?Q[ye-1].evaluate(L):Q[il(N,he)].evaluate(L)},pl.prototype.eachChild=function(L){L(this.input);for(var N=0,Q=this.outputs;N<Q.length;N+=1)L(Q[N])},pl.prototype.outputDefined=function(){return this.outputs.every(function(L){return L.outputDefined()})},pl.prototype.serialize=function(){for(var L=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&L.push(this.labels[N]),L.push(this.outputs[N].serialize());return L};var Fl=Object.freeze({__proto__:null,number:Fo,color:Nf,array:Ef}),Nu=.95047,df=1,wu=1.08883,eu=4/29,Us=6/29,Ws=3*Us*Us,Bu=Us*Us*Us,pf=Math.PI/180,gf=180/Math.PI;function Cf(C){return C>Bu?Math.pow(C,1/3):C/Ws+eu}function Tu(C){return C>Us?C*C*C:Ws*(C-eu)}function Uu(C){return 255*(C<=.0031308?12.92*C:1.055*Math.pow(C,1/2.4)-.055)}function tu(C){return(C/=255)<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function yf(C){var L=tu(C.r),N=tu(C.g),Q=tu(C.b),he=Cf((.4124564*L+.3575761*N+.1804375*Q)/Nu),ye=Cf((.2126729*L+.7151522*N+.072175*Q)/df);return{l:116*ye-16,a:500*(he-ye),b:200*(ye-Cf((.0193339*L+.119192*N+.9503041*Q)/wu)),alpha:C.a}}function mf(C){var L=(C.l+16)/116,N=isNaN(C.a)?L:L+C.a/500,Q=isNaN(C.b)?L:L-C.b/200;return L=df*Tu(L),N=Nu*Tu(N),Q=wu*Tu(Q),new ji(Uu(3.2404542*N-1.5371385*L-.4985314*Q),Uu(-.969266*N+1.8760108*L+.041556*Q),Uu(.0556434*N-.2040259*L+1.0572252*Q),C.alpha)}function Xi(C,L,N){return{l:Fo(C.l,L.l,N),a:Fo(C.a,L.a,N),b:Fo(C.b,L.b,N),alpha:Fo(C.alpha,L.alpha,N)}}function Au(C){var L=yf(C),N=L.l,Q=L.a,he=L.b,ye=Math.atan2(he,Q)*gf;return{h:ye<0?ye+360:ye,c:Math.sqrt(Q*Q+he*he),l:N,alpha:C.a}}function ru(C){var L=C.h*pf,N=C.c;return mf({l:C.l,a:Math.cos(L)*N,b:Math.sin(L)*N,alpha:C.alpha})}function xf(C,L,N){var Q=L-C;return C+N*(Q>180||Q<-180?Q-360*Math.round(Q/360):Q)}function Lf(C,L,N){return{h:xf(C.h,L.h,N),c:Fo(C.c,L.c,N),l:Fo(C.l,L.l,N),alpha:Fo(C.alpha,L.alpha,N)}}var ol={forward:yf,reverse:mf,interpolate:Xi},Hu={forward:Au,reverse:ru,interpolate:Lf},tf=Object.freeze({__proto__:null,lab:ol,hcl:Hu}),cs=function(L,N,Q,he,ye){this.type=L,this.operator=N,this.interpolation=Q,this.input=he,this.labels=[],this.outputs=[];for(var Te=0,Ye=ye;Te<Ye.length;Te+=1){var lt=Ye[Te],dt=lt[0],At=lt[1];this.labels.push(dt),this.outputs.push(At)}};function Su(C,L,N,Q){var he=Q-N,ye=C-N;return 0===he?0:1===L?ye/he:(Math.pow(L,ye)-1)/(Math.pow(L,he)-1)}cs.interpolationFactor=function(L,N,Q,he){var ye=0;if("exponential"===L.name)ye=Su(N,L.base,Q,he);else if("linear"===L.name)ye=Su(N,1,Q,he);else if("cubic-bezier"===L.name){var Te=L.controlPoints;ye=new i(Te[0],Te[1],Te[2],Te[3]).solve(Su(N,1,Q,he))}return ye},cs.parse=function(L,N){var Q=L[0],he=L[1],ye=L[2],Te=L.slice(3);if(!Array.isArray(he)||0===he.length)return N.error("Expected an interpolation type expression.",1);if("linear"===he[0])he={name:"linear"};else if("exponential"===he[0]){var Ye=he[1];if("number"!=typeof Ye)return N.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:Ye}}else{if("cubic-bezier"!==he[0])return N.error("Unknown interpolation type "+String(he[0]),1,0);var lt=he.slice(1);if(4!==lt.length||lt.some(function(rn){return"number"!=typeof rn||rn<0||rn>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:lt}}if(L.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(L.length-1)+".");if((L.length-1)%2!=0)return N.error("Expected an even number of arguments.");if(!(ye=N.parse(ye,2,va)))return null;var dt=[],At=null;"interpolate-hcl"===Q||"interpolate-lab"===Q?At=so:N.expectedType&&"value"!==N.expectedType.kind&&(At=N.expectedType);for(var Vt=0;Vt<Te.length;Vt+=2){var ur=Te[Vt],nr=Te[Vt+1],Pr=Vt+3,jr=Vt+4;if("number"!=typeof ur)return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Pr);if(dt.length&&dt[dt.length-1][0]>=ur)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Pr);var cn=N.parse(nr,jr,At);if(!cn)return null;At=At||cn.type,dt.push([ur,cn])}return"number"===At.kind||"color"===At.kind||"array"===At.kind&&"number"===At.itemType.kind&&"number"==typeof At.N?new cs(At,Q,he,ye,dt):N.error("Type "+yo(At)+" is not interpolatable.")},cs.prototype.evaluate=function(L){var N=this.labels,Q=this.outputs;if(1===N.length)return Q[0].evaluate(L);var he=this.input.evaluate(L);if(he<=N[0])return Q[0].evaluate(L);var ye=N.length;if(he>=N[ye-1])return Q[ye-1].evaluate(L);var Te=il(N,he),Ye=N[Te],lt=N[Te+1],dt=cs.interpolationFactor(this.interpolation,he,Ye,lt),At=Q[Te].evaluate(L),Vt=Q[Te+1].evaluate(L);return"interpolate"===this.operator?Fl[this.type.kind.toLowerCase()](At,Vt,dt):"interpolate-hcl"===this.operator?Hu.reverse(Hu.interpolate(Hu.forward(At),Hu.forward(Vt),dt)):ol.reverse(ol.interpolate(ol.forward(At),ol.forward(Vt),dt))},cs.prototype.eachChild=function(L){L(this.input);for(var N=0,Q=this.outputs;N<Q.length;N+=1)L(Q[N])},cs.prototype.outputDefined=function(){return this.outputs.every(function(L){return L.outputDefined()})},cs.prototype.serialize=function(){var L;L="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,L,this.input.serialize()],Q=0;Q<this.labels.length;Q++)N.push(this.labels[Q],this.outputs[Q].serialize());return N};var Rs=function(L,N){this.type=L,this.args=N};Rs.parse=function(L,N){if(L.length<2)return N.error("Expectected at least one argument.");var Q=null,he=N.expectedType;he&&"value"!==he.kind&&(Q=he);for(var ye=[],Te=0,Ye=L.slice(1);Te<Ye.length;Te+=1){var lt=Ye[Te],dt=N.parse(lt,1+ye.length,Q,void 0,{typeAnnotation:"omit"});if(!dt)return null;Q=Q||dt.type,ye.push(dt)}var At=he&&ye.some(function(Vt){return xs(he,Vt.type)});return new Rs(At?fi:Q,ye)},Rs.prototype.evaluate=function(L){for(var he,N=null,Q=0,ye=0,Te=this.args;ye<Te.length&&(Q++,(N=Te[ye].evaluate(L))&&N instanceof Zo&&!N.available&&(he||(he=N.name),N=null,Q===this.args.length&&(N=he)),null===N);ye+=1);return N},Rs.prototype.eachChild=function(L){this.args.forEach(L)},Rs.prototype.outputDefined=function(){return this.args.every(function(L){return L.outputDefined()})},Rs.prototype.serialize=function(){var L=["coalesce"];return this.eachChild(function(N){L.push(N.serialize())}),L};var sl=function(L,N){this.type=N.type,this.bindings=[].concat(L),this.result=N};sl.prototype.evaluate=function(L){return this.result.evaluate(L)},sl.prototype.eachChild=function(L){for(var N=0,Q=this.bindings;N<Q.length;N+=1)L(Q[N][1]);L(this.result)},sl.parse=function(L,N){if(L.length<4)return N.error("Expected at least 3 arguments, but found "+(L.length-1)+" instead.");for(var Q=[],he=1;he<L.length-1;he+=2){var ye=L[he];if("string"!=typeof ye)return N.error("Expected string, but found "+typeof ye+" instead.",he);if(/[^a-zA-Z0-9_]/.test(ye))return N.error("Variable names must contain only alphanumeric characters or '_'.",he);var Te=N.parse(L[he+1],he+1);if(!Te)return null;Q.push([ye,Te])}var Ye=N.parse(L[L.length-1],L.length-1,N.expectedType,Q);return Ye?new sl(Q,Ye):null},sl.prototype.outputDefined=function(){return this.result.outputDefined()},sl.prototype.serialize=function(){for(var L=["let"],N=0,Q=this.bindings;N<Q.length;N+=1){var he=Q[N],ye=he[0],Te=he[1];L.push(ye,Te.serialize())}return L.push(this.result.serialize()),L};var Yl=function(L,N,Q){this.type=L,this.index=N,this.input=Q};Yl.parse=function(L,N){if(3!==L.length)return N.error("Expected 2 arguments, but found "+(L.length-1)+" instead.");var Q=N.parse(L[1],1,va),he=N.parse(L[2],2,Ro(N.expectedType||fi));if(!Q||!he)return null;var ye=he.type;return new Yl(ye.itemType,Q,he)},Yl.prototype.evaluate=function(L){var N=this.index.evaluate(L),Q=this.input.evaluate(L);if(N<0)throw new ko("Array index out of bounds: "+N+" < 0.");if(N>=Q.length)throw new ko("Array index out of bounds: "+N+" > "+(Q.length-1)+".");if(N!==Math.floor(N))throw new ko("Array index must be an integer, but found "+N+" instead.");return Q[N]},Yl.prototype.eachChild=function(L){L(this.index),L(this.input)},Yl.prototype.outputDefined=function(){return!1},Yl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Xl=function(L,N){this.type=bi,this.needle=L,this.haystack=N};Xl.parse=function(L,N){if(3!==L.length)return N.error("Expected 2 arguments, but found "+(L.length-1)+" instead.");var Q=N.parse(L[1],1,fi),he=N.parse(L[2],2,fi);return Q&&he?Ll(Q.type,[bi,Ai,va,To,fi])?new Xl(Q,he):N.error("Expected first argument to be of type boolean, string, number or null, but found "+yo(Q.type)+" instead"):null},Xl.prototype.evaluate=function(L){var N=this.needle.evaluate(L),Q=this.haystack.evaluate(L);if(!Q)return!1;if(!Hs(N,["boolean","string","number","null"]))throw new ko("Expected first argument to be of type boolean, string, number or null, but found "+yo(Vo(N))+" instead.");if(!Hs(Q,["string","array"]))throw new ko("Expected second argument to be of type array or string, but found "+yo(Vo(Q))+" instead.");return Q.indexOf(N)>=0},Xl.prototype.eachChild=function(L){L(this.needle),L(this.haystack)},Xl.prototype.outputDefined=function(){return!0},Xl.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Zl=function(L,N,Q){this.type=va,this.needle=L,this.haystack=N,this.fromIndex=Q};Zl.parse=function(L,N){if(L.length<=2||L.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(L.length-1)+" instead.");var Q=N.parse(L[1],1,fi),he=N.parse(L[2],2,fi);if(!Q||!he)return null;if(!Ll(Q.type,[bi,Ai,va,To,fi]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+yo(Q.type)+" instead");if(4===L.length){var ye=N.parse(L[3],3,va);return ye?new Zl(Q,he,ye):null}return new Zl(Q,he)},Zl.prototype.evaluate=function(L){var N=this.needle.evaluate(L),Q=this.haystack.evaluate(L);if(!Hs(N,["boolean","string","number","null"]))throw new ko("Expected first argument to be of type boolean, string, number or null, but found "+yo(Vo(N))+" instead.");if(!Hs(Q,["string","array"]))throw new ko("Expected second argument to be of type array or string, but found "+yo(Vo(Q))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(L);return Q.indexOf(N,he)}return Q.indexOf(N)},Zl.prototype.eachChild=function(L){L(this.needle),L(this.haystack),this.fromIndex&&L(this.fromIndex)},Zl.prototype.outputDefined=function(){return!1},Zl.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var L=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),L]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ll=function(L,N,Q,he,ye,Te){this.inputType=L,this.type=N,this.input=Q,this.cases=he,this.outputs=ye,this.otherwise=Te};ll.parse=function(L,N){if(L.length<5)return N.error("Expected at least 4 arguments, but found only "+(L.length-1)+".");if(L.length%2!=1)return N.error("Expected an even number of arguments.");var Q,he;N.expectedType&&"value"!==N.expectedType.kind&&(he=N.expectedType);for(var ye={},Te=[],Ye=2;Ye<L.length-1;Ye+=2){var lt=L[Ye],dt=L[Ye+1];Array.isArray(lt)||(lt=[lt]);var At=N.concat(Ye);if(0===lt.length)return At.error("Expected at least one branch label.");for(var Vt=0,ur=lt;Vt<ur.length;Vt+=1){var nr=ur[Vt];if("number"!=typeof nr&&"string"!=typeof nr)return At.error("Branch labels must be numbers or strings.");if("number"==typeof nr&&Math.abs(nr)>Number.MAX_SAFE_INTEGER)return At.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof nr&&Math.floor(nr)!==nr)return At.error("Numeric branch labels must be integer values.");if(Q){if(At.checkSubtype(Q,Vo(nr)))return null}else Q=Vo(nr);if(typeof ye[String(nr)]<"u")return At.error("Branch labels must be unique.");ye[String(nr)]=Te.length}var Pr=N.parse(dt,Ye,he);if(!Pr)return null;he=he||Pr.type,Te.push(Pr)}var jr=N.parse(L[1],1,fi);if(!jr)return null;var cn=N.parse(L[L.length-1],L.length-1,he);return!cn||"value"!==jr.type.kind&&N.concat(1).checkSubtype(Q,jr.type)?null:new ll(Q,he,jr,ye,Te,cn)},ll.prototype.evaluate=function(L){var N=this.input.evaluate(L);return(Vo(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise).evaluate(L)},ll.prototype.eachChild=function(L){L(this.input),this.outputs.forEach(L),L(this.otherwise)},ll.prototype.outputDefined=function(){return this.outputs.every(function(L){return L.outputDefined()})&&this.otherwise.outputDefined()},ll.prototype.serialize=function(){for(var L=this,N=["match",this.input.serialize()],he=[],ye={},Te=0,Ye=Object.keys(this.cases).sort();Te<Ye.length;Te+=1){var lt=Ye[Te];void 0===(dt=ye[this.cases[lt]])?(ye[this.cases[lt]]=he.length,he.push([this.cases[lt],[lt]])):he[dt][1].push(lt)}for(var At=function(jr){return"number"===L.inputType.kind?Number(jr):jr},Vt=0,ur=he;Vt<ur.length;Vt+=1){var nr=ur[Vt],dt=nr[0],Pr=nr[1];1===Pr.length?N.push(At(Pr[0])):N.push(Pr.map(At)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var yl=function(L,N,Q){this.type=L,this.branches=N,this.otherwise=Q};yl.parse=function(L,N){if(L.length<4)return N.error("Expected at least 3 arguments, but found only "+(L.length-1)+".");if(L.length%2!=0)return N.error("Expected an odd number of arguments.");var Q;N.expectedType&&"value"!==N.expectedType.kind&&(Q=N.expectedType);for(var he=[],ye=1;ye<L.length-1;ye+=2){var Te=N.parse(L[ye],ye,bi);if(!Te)return null;var Ye=N.parse(L[ye+1],ye+1,Q);if(!Ye)return null;he.push([Te,Ye]),Q=Q||Ye.type}var lt=N.parse(L[L.length-1],L.length-1,Q);return lt?new yl(Q,he,lt):null},yl.prototype.evaluate=function(L){for(var N=0,Q=this.branches;N<Q.length;N+=1){var he=Q[N],ye=he[0],Te=he[1];if(ye.evaluate(L))return Te.evaluate(L)}return this.otherwise.evaluate(L)},yl.prototype.eachChild=function(L){for(var N=0,Q=this.branches;N<Q.length;N+=1){var he=Q[N],ye=he[0],Te=he[1];L(ye),L(Te)}L(this.otherwise)},yl.prototype.outputDefined=function(){return this.branches.every(function(L){return L[0],L[1].outputDefined()})&&this.otherwise.outputDefined()},yl.prototype.serialize=function(){var L=["case"];return this.eachChild(function(N){L.push(N.serialize())}),L};var zl=function(L,N,Q,he){this.type=L,this.input=N,this.beginIndex=Q,this.endIndex=he};function ml(C,L){return"=="===C||"!="===C?"boolean"===L.kind||"string"===L.kind||"number"===L.kind||"null"===L.kind||"value"===L.kind:"string"===L.kind||"number"===L.kind||"value"===L.kind}function Vu(C,L,N){return L===N}function ul(C,L,N){return L!==N}function Mu(C,L,N){return L<N}function Xf(C,L,N){return L>N}function Pf(C,L,N){return L<=N}function Zf(C,L,N){return L>=N}function nu(C,L,N,Q){return 0===Q.compare(L,N)}function Eu(C,L,N,Q){return!nu(C,L,N,Q)}function Cu(C,L,N,Q){return Q.compare(L,N)<0}function au(C,L,N,Q){return Q.compare(L,N)>0}function Kl(C,L,N,Q){return Q.compare(L,N)<=0}function zo(C,L,N,Q){return Q.compare(L,N)>=0}function Ts(C,L,N){var Q="=="!==C&&"!="!==C;return function(){function he(ye,Te,Ye){this.type=bi,this.lhs=ye,this.rhs=Te,this.collator=Ye,this.hasUntypedArgument="value"===ye.type.kind||"value"===Te.type.kind}return he.parse=function(Te,Ye){if(3!==Te.length&&4!==Te.length)return Ye.error("Expected two or three arguments.");var lt=Te[0],dt=Ye.parse(Te[1],1,fi);if(!dt)return null;if(!ml(lt,dt.type))return Ye.concat(1).error('"'+lt+"\" comparisons are not supported for type '"+yo(dt.type)+"'.");var At=Ye.parse(Te[2],2,fi);if(!At)return null;if(!ml(lt,At.type))return Ye.concat(2).error('"'+lt+"\" comparisons are not supported for type '"+yo(At.type)+"'.");if(dt.type.kind!==At.type.kind&&"value"!==dt.type.kind&&"value"!==At.type.kind)return Ye.error("Cannot compare types '"+yo(dt.type)+"' and '"+yo(At.type)+"'.");Q&&("value"===dt.type.kind&&"value"!==At.type.kind?dt=new Ao(At.type,[dt]):"value"!==dt.type.kind&&"value"===At.type.kind&&(At=new Ao(dt.type,[At])));var Vt=null;if(4===Te.length){if("string"!==dt.type.kind&&"string"!==At.type.kind&&"value"!==dt.type.kind&&"value"!==At.type.kind)return Ye.error("Cannot use collator to compare non-string types.");if(!(Vt=Ye.parse(Te[3],3,Os)))return null}return new he(dt,At,Vt)},he.prototype.evaluate=function(Te){var Ye=this.lhs.evaluate(Te),lt=this.rhs.evaluate(Te);if(Q&&this.hasUntypedArgument){var dt=Vo(Ye),At=Vo(lt);if(dt.kind!==At.kind||"string"!==dt.kind&&"number"!==dt.kind)throw new ko('Expected arguments for "'+C+'" to be (string, string) or (number, number), but found ('+dt.kind+", "+At.kind+") instead.")}if(this.collator&&!Q&&this.hasUntypedArgument){var Vt=Vo(Ye),ur=Vo(lt);if("string"!==Vt.kind||"string"!==ur.kind)return L(Te,Ye,lt)}return this.collator?N(Te,Ye,lt,this.collator.evaluate(Te)):L(Te,Ye,lt)},he.prototype.eachChild=function(Te){Te(this.lhs),Te(this.rhs),this.collator&&Te(this.collator)},he.prototype.outputDefined=function(){return!0},he.prototype.serialize=function(){var Te=[C];return this.eachChild(function(Ye){Te.push(Ye.serialize())}),Te},he}()}zl.parse=function(L,N){if(L.length<=2||L.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(L.length-1)+" instead.");var Q=N.parse(L[1],1,fi),he=N.parse(L[2],2,va);if(!Q||!he)return null;if(!Ll(Q.type,[Ro(fi),Ai,fi]))return N.error("Expected first argument to be of type array or string, but found "+yo(Q.type)+" instead");if(4===L.length){var ye=N.parse(L[3],3,va);return ye?new zl(Q.type,Q,he,ye):null}return new zl(Q.type,Q,he)},zl.prototype.evaluate=function(L){var N=this.input.evaluate(L),Q=this.beginIndex.evaluate(L);if(!Hs(N,["string","array"]))throw new ko("Expected first argument to be of type array or string, but found "+yo(Vo(N))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(L);return N.slice(Q,he)}return N.slice(Q)},zl.prototype.eachChild=function(L){L(this.input),L(this.beginIndex),this.endIndex&&L(this.endIndex)},zl.prototype.outputDefined=function(){return!1},zl.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var L=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),L]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Gu=Ts("==",Vu,nu),rf=Ts("!=",ul,Eu),Lu=Ts("<",Mu,Cu),bf=Ts(">",Xf,au),iu=Ts("<=",Pf,Kl),ou=Ts(">=",Zf,zo),ks=function(L,N,Q,he,ye){this.type=Ai,this.number=L,this.locale=N,this.currency=Q,this.minFractionDigits=he,this.maxFractionDigits=ye};ks.parse=function(L,N){if(3!==L.length)return N.error("Expected two arguments.");var Q=N.parse(L[1],1,va);if(!Q)return null;var he=L[2];if("object"!=typeof he||Array.isArray(he))return N.error("NumberFormat options argument must be an object.");var ye=null;if(he.locale&&!(ye=N.parse(he.locale,1,Ai)))return null;var Te=null;if(he.currency&&!(Te=N.parse(he.currency,1,Ai)))return null;var Ye=null;if(he["min-fraction-digits"]&&!(Ye=N.parse(he["min-fraction-digits"],1,va)))return null;var lt=null;return he["max-fraction-digits"]&&!(lt=N.parse(he["max-fraction-digits"],1,va))?null:new ks(Q,ye,Te,Ye,lt)},ks.prototype.evaluate=function(L){return new Intl.NumberFormat(this.locale?this.locale.evaluate(L):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(L):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(L):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(L):void 0}).format(this.number.evaluate(L))},ks.prototype.eachChild=function(L){L(this.number),this.locale&&L(this.locale),this.currency&&L(this.currency),this.minFractionDigits&&L(this.minFractionDigits),this.maxFractionDigits&&L(this.maxFractionDigits)},ks.prototype.outputDefined=function(){return!1},ks.prototype.serialize=function(){var L={};return this.locale&&(L.locale=this.locale.serialize()),this.currency&&(L.currency=this.currency.serialize()),this.minFractionDigits&&(L["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(L["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),L]};var Ol=function(L){this.type=va,this.input=L};Ol.parse=function(L,N){if(2!==L.length)return N.error("Expected 1 argument, but found "+(L.length-1)+" instead.");var Q=N.parse(L[1],1);return Q?"array"!==Q.type.kind&&"string"!==Q.type.kind&&"value"!==Q.type.kind?N.error("Expected argument of type string or array, but found "+yo(Q.type)+" instead."):new Ol(Q):null},Ol.prototype.evaluate=function(L){var N=this.input.evaluate(L);if("string"==typeof N)return N.length;if(Array.isArray(N))return N.length;throw new ko("Expected value to be of type string or array, but found "+yo(Vo(N))+" instead.")},Ol.prototype.eachChild=function(L){L(this.input)},Ol.prototype.outputDefined=function(){return!1},Ol.prototype.serialize=function(){var L=["length"];return this.eachChild(function(N){L.push(N.serialize())}),L};var fl={"==":Gu,"!=":rf,">":bf,"<":Lu,">=":ou,"<=":iu,array:Ao,at:Yl,boolean:Ao,case:yl,coalesce:Rs,collator:Is,format:us,image:fs,in:Xl,"index-of":Zl,interpolate:cs,"interpolate-hcl":cs,"interpolate-lab":cs,length:Ol,let:sl,literal:Bo,match:ll,number:Ao,"number-format":ks,object:Ao,slice:zl,step:pl,string:Ao,"to-boolean":Go,"to-color":Go,"to-number":Go,"to-string":Go,var:al,within:js};function ju(C,L){var N=L[0],Q=L[1],he=L[2],ye=L[3];N=N.evaluate(C),Q=Q.evaluate(C),he=he.evaluate(C);var Te=ye?ye.evaluate(C):1,Ye=Vs(N,Q,he,Te);if(Ye)throw new ko(Ye);return new ji(N/255*Te,Q/255*Te,he/255*Te,Te)}function Nl(C,L){return C in L}function Wu(C,L){var N=L[C];return typeof N>"u"?null:N}function pt(C,L,N,Q){for(;N<=Q;){var he=N+Q>>1;if(L[he]===C)return!0;L[he]>C?Q=he-1:N=he+1}return!1}function kt(C){return{type:C}}function yr(C){return{result:"success",value:C}}function er(C){return{result:"error",value:C}}function Mr(C){return"data-driven"===C["property-type"]||"cross-faded-data-driven"===C["property-type"]}function Zr(C){return!!C.expression&&C.expression.parameters.indexOf("zoom")>-1}function un(C){return!!C.expression&&C.expression.interpolated}function fn(C){return C instanceof Number?"number":C instanceof String?"string":C instanceof Boolean?"boolean":Array.isArray(C)?"array":null===C?"null":typeof C}function Dn(C){return"object"==typeof C&&null!==C&&!Array.isArray(C)}function Wn(C){return C}function yn(C,L){var Ye,lt,dt,N="color"===L.type,Q=C.stops&&"object"==typeof C.stops[0][0],he=Q||void 0!==C.property,ye=Q||!he,Te=C.type||(un(L)?"exponential":"interval");if(N&&((C=Do({},C)).stops&&(C.stops=C.stops.map(function(ma){return[ma[0],ji.parse(ma[1])]})),C.default?C.default=ji.parse(C.default):C.default=ji.parse(L.default)),C.colorSpace&&"rgb"!==C.colorSpace&&!tf[C.colorSpace])throw new Error("Unknown color space: "+C.colorSpace);if("exponential"===Te)Ye=ta;else if("interval"===Te)Ye=Un;else if("categorical"===Te){Ye=Mn,lt=Object.create(null);for(var At=0,Vt=C.stops;At<Vt.length;At+=1){var ur=Vt[At];lt[ur[0]]=ur[1]}dt=typeof C.stops[0][0]}else{if("identity"!==Te)throw new Error('Unknown function type "'+Te+'"');Ye=Qa}if(Q){for(var nr={},Pr=[],jr=0;jr<C.stops.length;jr++){var cn=C.stops[jr],rn=cn[0].zoom;void 0===nr[rn]&&(nr[rn]={zoom:rn,type:C.type,property:C.property,default:C.default,stops:[]},Pr.push(rn)),nr[rn].stops.push([cn[0].value,cn[1]])}for(var Pn=[],mn=0,Ln=Pr;mn<Ln.length;mn+=1){var Fn=Ln[mn];Pn.push([nr[Fn].zoom,yn(nr[Fn],L)])}var Jn={name:"linear"};return{kind:"composite",interpolationType:Jn,interpolationFactor:cs.interpolationFactor.bind(void 0,Jn),zoomStops:Pn.map(function(ma){return ma[0]}),evaluate:function(qa,Ua){var Xa=qa.zoom;return ta({stops:Pn,base:C.base},L,Xa).evaluate(Xa,Ua)}}}if(ye){var Sa="exponential"===Te?{name:"exponential",base:void 0!==C.base?C.base:1}:null;return{kind:"camera",interpolationType:Sa,interpolationFactor:cs.interpolationFactor.bind(void 0,Sa),zoomStops:C.stops.map(function(ma){return ma[0]}),evaluate:function(ma){var qa=ma.zoom;return Ye(C,L,qa,lt,dt)}}}return{kind:"source",evaluate:function(qa,Ua){var Xa=Ua&&Ua.properties?Ua.properties[C.property]:void 0;return void 0===Xa?_n(C.default,L.default):Ye(C,L,Xa,lt,dt)}}}function _n(C,L,N){return void 0!==C?C:void 0!==L?L:void 0!==N?N:void 0}function Mn(C,L,N,Q,he){return _n(typeof N===he?Q[N]:void 0,C.default,L.default)}function Un(C,L,N){if("number"!==fn(N))return _n(C.default,L.default);var Q=C.stops.length;if(1===Q||N<=C.stops[0][0])return C.stops[0][1];if(N>=C.stops[Q-1][0])return C.stops[Q-1][1];var he=il(C.stops.map(function(ye){return ye[0]}),N);return C.stops[he][1]}function ta(C,L,N){var Q=void 0!==C.base?C.base:1;if("number"!==fn(N))return _n(C.default,L.default);var he=C.stops.length;if(1===he||N<=C.stops[0][0])return C.stops[0][1];if(N>=C.stops[he-1][0])return C.stops[he-1][1];var ye=il(C.stops.map(function(Vt){return Vt[0]}),N),Te=ja(N,Q,C.stops[ye][0],C.stops[ye+1][0]),Ye=C.stops[ye][1],lt=C.stops[ye+1][1],dt=Fl[L.type]||Wn;if(C.colorSpace&&"rgb"!==C.colorSpace){var At=tf[C.colorSpace];dt=function(Vt,ur){return At.reverse(At.interpolate(At.forward(Vt),At.forward(ur),Te))}}return"function"==typeof Ye.evaluate?{evaluate:function(){for(var ur=[],nr=arguments.length;nr--;)ur[nr]=arguments[nr];var Pr=Ye.evaluate.apply(void 0,ur),jr=lt.evaluate.apply(void 0,ur);if(void 0!==Pr&&void 0!==jr)return dt(Pr,jr,Te)}}:dt(Ye,lt,Te)}function Qa(C,L,N){return"color"===L.type?N=ji.parse(N):"formatted"===L.type?N=Ho.fromString(N.toString()):"resolvedImage"===L.type?N=Zo.fromString(N.toString()):fn(N)!==L.type&&("enum"!==L.type||!L.values[N])&&(N=void 0),_n(N,C.default,L.default)}function ja(C,L,N,Q){var he=Q-N,ye=C-N;return 0===he?0:1===L?ye/he:(Math.pow(L,ye)-1)/(Math.pow(L,he)-1)}Wi.register(fl,{error:[Ql,[Ai],function(C,L){var N=L[0];throw new ko(N.evaluate(C))}],typeof:[Ai,[fi],function(C,L){return yo(Vo(L[0].evaluate(C)))}],"to-rgba":[Ro(va,4),[so],function(C,L){return L[0].evaluate(C).toArray()}],rgb:[so,[va,va,va],ju],rgba:[so,[va,va,va,va],ju],has:{type:bi,overloads:[[[Ai],function(C,L){return Nl(L[0].evaluate(C),C.properties())}],[[Ai,eo],function(C,L){var N=L[0],Q=L[1];return Nl(N.evaluate(C),Q.evaluate(C))}]]},get:{type:fi,overloads:[[[Ai],function(C,L){return Wu(L[0].evaluate(C),C.properties())}],[[Ai,eo],function(C,L){var N=L[0],Q=L[1];return Wu(N.evaluate(C),Q.evaluate(C))}]]},"feature-state":[fi,[Ai],function(C,L){return Wu(L[0].evaluate(C),C.featureState||{})}],properties:[eo,[],function(C){return C.properties()}],"geometry-type":[Ai,[],function(C){return C.geometryType()}],id:[fi,[],function(C){return C.id()}],zoom:[va,[],function(C){return C.globals.zoom}],"heatmap-density":[va,[],function(C){return C.globals.heatmapDensity||0}],"line-progress":[va,[],function(C){return C.globals.lineProgress||0}],accumulated:[fi,[],function(C){return void 0===C.globals.accumulated?null:C.globals.accumulated}],"+":[va,kt(va),function(C,L){for(var N=0,Q=0,he=L;Q<he.length;Q+=1)N+=he[Q].evaluate(C);return N}],"*":[va,kt(va),function(C,L){for(var N=1,Q=0,he=L;Q<he.length;Q+=1)N*=he[Q].evaluate(C);return N}],"-":{type:va,overloads:[[[va,va],function(C,L){var N=L[0],Q=L[1];return N.evaluate(C)-Q.evaluate(C)}],[[va],function(C,L){return-L[0].evaluate(C)}]]},"/":[va,[va,va],function(C,L){var N=L[0],Q=L[1];return N.evaluate(C)/Q.evaluate(C)}],"%":[va,[va,va],function(C,L){var N=L[0],Q=L[1];return N.evaluate(C)%Q.evaluate(C)}],ln2:[va,[],function(){return Math.LN2}],pi:[va,[],function(){return Math.PI}],e:[va,[],function(){return Math.E}],"^":[va,[va,va],function(C,L){var N=L[0],Q=L[1];return Math.pow(N.evaluate(C),Q.evaluate(C))}],sqrt:[va,[va],function(C,L){var N=L[0];return Math.sqrt(N.evaluate(C))}],log10:[va,[va],function(C,L){var N=L[0];return Math.log(N.evaluate(C))/Math.LN10}],ln:[va,[va],function(C,L){var N=L[0];return Math.log(N.evaluate(C))}],log2:[va,[va],function(C,L){var N=L[0];return Math.log(N.evaluate(C))/Math.LN2}],sin:[va,[va],function(C,L){var N=L[0];return Math.sin(N.evaluate(C))}],cos:[va,[va],function(C,L){var N=L[0];return Math.cos(N.evaluate(C))}],tan:[va,[va],function(C,L){var N=L[0];return Math.tan(N.evaluate(C))}],asin:[va,[va],function(C,L){var N=L[0];return Math.asin(N.evaluate(C))}],acos:[va,[va],function(C,L){var N=L[0];return Math.acos(N.evaluate(C))}],atan:[va,[va],function(C,L){var N=L[0];return Math.atan(N.evaluate(C))}],min:[va,kt(va),function(C,L){return Math.min.apply(Math,L.map(function(N){return N.evaluate(C)}))}],max:[va,kt(va),function(C,L){return Math.max.apply(Math,L.map(function(N){return N.evaluate(C)}))}],abs:[va,[va],function(C,L){var N=L[0];return Math.abs(N.evaluate(C))}],round:[va,[va],function(C,L){var Q=L[0].evaluate(C);return Q<0?-Math.round(-Q):Math.round(Q)}],floor:[va,[va],function(C,L){var N=L[0];return Math.floor(N.evaluate(C))}],ceil:[va,[va],function(C,L){var N=L[0];return Math.ceil(N.evaluate(C))}],"filter-==":[bi,[Ai,fi],function(C,L){var N=L[0],Q=L[1];return C.properties()[N.value]===Q.value}],"filter-id-==":[bi,[fi],function(C,L){var N=L[0];return C.id()===N.value}],"filter-type-==":[bi,[Ai],function(C,L){var N=L[0];return C.geometryType()===N.value}],"filter-<":[bi,[Ai,fi],function(C,L){var N=L[0],Q=L[1],he=C.properties()[N.value],ye=Q.value;return typeof he==typeof ye&&he<ye}],"filter-id-<":[bi,[fi],function(C,L){var N=L[0],Q=C.id(),he=N.value;return typeof Q==typeof he&&Q<he}],"filter->":[bi,[Ai,fi],function(C,L){var N=L[0],Q=L[1],he=C.properties()[N.value],ye=Q.value;return typeof he==typeof ye&&he>ye}],"filter-id->":[bi,[fi],function(C,L){var N=L[0],Q=C.id(),he=N.value;return typeof Q==typeof he&&Q>he}],"filter-<=":[bi,[Ai,fi],function(C,L){var N=L[0],Q=L[1],he=C.properties()[N.value],ye=Q.value;return typeof he==typeof ye&&he<=ye}],"filter-id-<=":[bi,[fi],function(C,L){var N=L[0],Q=C.id(),he=N.value;return typeof Q==typeof he&&Q<=he}],"filter->=":[bi,[Ai,fi],function(C,L){var N=L[0],Q=L[1],he=C.properties()[N.value],ye=Q.value;return typeof he==typeof ye&&he>=ye}],"filter-id->=":[bi,[fi],function(C,L){var N=L[0],Q=C.id(),he=N.value;return typeof Q==typeof he&&Q>=he}],"filter-has":[bi,[fi],function(C,L){return L[0].value in C.properties()}],"filter-has-id":[bi,[],function(C){return null!==C.id()&&void 0!==C.id()}],"filter-type-in":[bi,[Ro(Ai)],function(C,L){return L[0].value.indexOf(C.geometryType())>=0}],"filter-id-in":[bi,[Ro(fi)],function(C,L){return L[0].value.indexOf(C.id())>=0}],"filter-in-small":[bi,[Ai,Ro(fi)],function(C,L){var N=L[0];return L[1].value.indexOf(C.properties()[N.value])>=0}],"filter-in-large":[bi,[Ai,Ro(fi)],function(C,L){var N=L[0],Q=L[1];return pt(C.properties()[N.value],Q.value,0,Q.value.length-1)}],all:{type:bi,overloads:[[[bi,bi],function(C,L){var N=L[0],Q=L[1];return N.evaluate(C)&&Q.evaluate(C)}],[kt(bi),function(C,L){for(var N=0,Q=L;N<Q.length;N+=1)if(!Q[N].evaluate(C))return!1;return!0}]]},any:{type:bi,overloads:[[[bi,bi],function(C,L){var N=L[0],Q=L[1];return N.evaluate(C)||Q.evaluate(C)}],[kt(bi),function(C,L){for(var N=0,Q=L;N<Q.length;N+=1)if(Q[N].evaluate(C))return!0;return!1}]]},"!":[bi,[bi],function(C,L){return!L[0].evaluate(C)}],"is-supported-script":[bi,[Ai],function(C,L){var N=L[0],Q=C.globals&&C.globals.isSupportedScript;return!Q||Q(N.evaluate(C))}],upcase:[Ai,[Ai],function(C,L){return L[0].evaluate(C).toUpperCase()}],downcase:[Ai,[Ai],function(C,L){return L[0].evaluate(C).toLowerCase()}],concat:[Ai,kt(fi),function(C,L){return L.map(function(N){return nl(N.evaluate(C))}).join("")}],"resolved-locale":[Ai,[Os],function(C,L){return L[0].evaluate(C).resolvedLocale()}]});var ii=function(L,N){this.expression=L,this._warningHistory={},this._evaluator=new es,this._defaultValue=N?mi(N):null,this._enumValues=N&&"enum"===N.type?N.values:null};function oi(C){return Array.isArray(C)&&C.length>0&&"string"==typeof C[0]&&C[0]in fl}function fa(C,L){var N=new ws(fl,[],L?Ki(L):void 0),Q=N.parse(C,void 0,void 0,void 0,L&&"string"===L.type?{typeAnnotation:"coerce"}:void 0);return Q?yr(new ii(Q,L)):er(N.errors)}ii.prototype.evaluateWithoutErrorHandling=function(L,N,Q,he,ye,Te){return this._evaluator.globals=L,this._evaluator.feature=N,this._evaluator.featureState=Q,this._evaluator.canonical=he,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=Te,this.expression.evaluate(this._evaluator)},ii.prototype.evaluate=function(L,N,Q,he,ye,Te){this._evaluator.globals=L,this._evaluator.feature=N||null,this._evaluator.featureState=Q||null,this._evaluator.canonical=he,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=Te||null;try{var Ye=this.expression.evaluate(this._evaluator);if(null==Ye||"number"==typeof Ye&&Ye!=Ye)return this._defaultValue;if(this._enumValues&&!(Ye in this._enumValues))throw new ko("Expected value to be one of "+Object.keys(this._enumValues).map(function(lt){return JSON.stringify(lt)}).join(", ")+", but found "+JSON.stringify(Ye)+" instead.");return Ye}catch(lt){return this._warningHistory[lt.message]||(this._warningHistory[lt.message]=!0,typeof console<"u"&&console.warn(lt.message)),this._defaultValue}};var pa=function(L,N){this.kind=L,this._styleExpression=N,this.isStateDependent="constant"!==L&&!co(N.expression)};pa.prototype.evaluateWithoutErrorHandling=function(L,N,Q,he,ye,Te){return this._styleExpression.evaluateWithoutErrorHandling(L,N,Q,he,ye,Te)},pa.prototype.evaluate=function(L,N,Q,he,ye,Te){return this._styleExpression.evaluate(L,N,Q,he,ye,Te)};var ti=function(L,N,Q,he){this.kind=L,this.zoomStops=Q,this._styleExpression=N,this.isStateDependent="camera"!==L&&!co(N.expression),this.interpolationType=he};function pi(C,L){if("error"===(C=fa(C,L)).result)return C;var N=C.value.expression,Q=bu(N);if(!Q&&!Mr(L))return er([new as("","data expressions not supported")]);var he=Wl(N,["zoom"]);if(!he&&!Zr(L))return er([new as("","zoom expressions not supported")]);var ye=Zi(N);if(!ye&&!he)return er([new as("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(ye instanceof as)return er([ye]);if(ye instanceof cs&&!un(L))return er([new as("",'"interpolate" expressions cannot be used with this property')]);if(!ye)return yr(new pa(Q?"constant":"source",C.value));var Te=ye instanceof cs?ye.interpolation:void 0;return yr(new ti(Q?"camera":"composite",C.value,ye.labels,Te))}ti.prototype.evaluateWithoutErrorHandling=function(L,N,Q,he,ye,Te){return this._styleExpression.evaluateWithoutErrorHandling(L,N,Q,he,ye,Te)},ti.prototype.evaluate=function(L,N,Q,he,ye,Te){return this._styleExpression.evaluate(L,N,Q,he,ye,Te)},ti.prototype.interpolationFactor=function(L,N,Q){return this.interpolationType?cs.interpolationFactor(this.interpolationType,L,N,Q):0};var Hi=function(L,N){this._parameters=L,this._specification=N,Do(this,yn(this._parameters,this._specification))};function no(C,L){if(Dn(C))return new Hi(C,L);if(oi(C)){var N=pi(C,L);if("error"===N.result)throw new Error(N.value.map(function(he){return he.key+": "+he.message}).join(", "));return N.value}var Q=C;return"string"==typeof C&&"color"===L.type&&(Q=ji.parse(C)),{kind:"constant",evaluate:function(){return Q}}}function Zi(C){var L=null;if(C instanceof sl)L=Zi(C.result);else if(C instanceof Rs)for(var N=0,Q=C.args;N<Q.length;N+=1){var he=Q[N];if(L=Zi(he))break}else(C instanceof pl||C instanceof cs)&&C.input instanceof Wi&&"zoom"===C.input.name&&(L=C);return L instanceof as||C.eachChild(function(ye){var Te=Zi(ye);Te instanceof as?L=Te:!L&&Te?L=new as("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):L&&Te&&L!==Te&&(L=new as("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),L}function Ki(C){var L={color:so,string:Ai,number:va,enum:Ai,boolean:bi,formatted:ms,resolvedImage:tl};return"array"===C.type?Ro(L[C.value]||fi,C.length):L[C.type]}function mi(C){return"color"===C.type&&Dn(C.default)?new ji(0,0,0,0):"color"===C.type?ji.parse(C.default)||null:void 0===C.default?null:C.default}function So(C){var L=C.key,N=C.value,Q=C.valueSpec||{},he=C.objectElementValidators||{},ye=C.style,Te=C.styleSpec,Ye=[],lt=fn(N);if("object"!==lt)return[new Ta(L,N,"object expected, "+lt+" found")];for(var dt in N){var At=dt.split(".")[0],Vt=Q[At]||Q["*"],ur=void 0;if(he[At])ur=he[At];else if(Q[At])ur=Xs;else if(he["*"])ur=he["*"];else{if(!Q["*"]){Ye.push(new Ta(L,N[dt],'unknown property "'+dt+'"'));continue}ur=Xs}Ye=Ye.concat(ur({key:(L&&L+".")+dt,value:N[dt],valueSpec:Vt,style:ye,styleSpec:Te,object:N,objectKey:dt},N))}for(var nr in Q)he[nr]||Q[nr].required&&void 0===Q[nr].default&&void 0===N[nr]&&Ye.push(new Ta(L,N,'missing required property "'+nr+'"'));return Ye}function Co(C){var L=C.value,N=C.valueSpec,Q=C.style,he=C.styleSpec,ye=C.key,Te=C.arrayElementValidator||Xs;if("array"!==fn(L))return[new Ta(ye,L,"array expected, "+fn(L)+" found")];if(N.length&&L.length!==N.length)return[new Ta(ye,L,"array length "+N.length+" expected, length "+L.length+" found")];if(N["min-length"]&&L.length<N["min-length"])return[new Ta(ye,L,"array length at least "+N["min-length"]+" expected, length "+L.length+" found")];var Ye={type:N.value,values:N.values};he.$version<7&&(Ye.function=N.function),"object"===fn(N.value)&&(Ye=N.value);for(var lt=[],dt=0;dt<L.length;dt++)lt=lt.concat(Te({array:L,arrayIndex:dt,value:L[dt],valueSpec:Ye,style:Q,styleSpec:he,key:ye+"["+dt+"]"}));return lt}function to(C){var L=C.key,N=C.value,Q=C.valueSpec,he=fn(N);return"number"===he&&N!=N&&(he="NaN"),"number"!==he?[new Ta(L,N,"number expected, "+he+" found")]:"minimum"in Q&&N<Q.minimum?[new Ta(L,N,N+" is less than the minimum value "+Q.minimum)]:"maximum"in Q&&N>Q.maximum?[new Ta(L,N,N+" is greater than the maximum value "+Q.maximum)]:[]}function Ia(C){var Q,ye,Te,L=C.valueSpec,N=oo(C.value.type),he={},Ye="categorical"!==N&&void 0===C.value.property,lt=!Ye,dt="array"===fn(C.value.stops)&&"array"===fn(C.value.stops[0])&&"object"===fn(C.value.stops[0][0]),At=So({key:C.key,value:C.value,valueSpec:C.styleSpec.function,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:Vt,default:Pr}});return"identity"===N&&Ye&&At.push(new Ta(C.key,C.value,'missing required property "property"')),"identity"!==N&&!C.value.stops&&At.push(new Ta(C.key,C.value,'missing required property "stops"')),"exponential"===N&&C.valueSpec.expression&&!un(C.valueSpec)&&At.push(new Ta(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(lt&&!Mr(C.valueSpec)?At.push(new Ta(C.key,C.value,"property functions not supported")):Ye&&!Zr(C.valueSpec)&&At.push(new Ta(C.key,C.value,"zoom functions not supported"))),("categorical"===N||dt)&&void 0===C.value.property&&At.push(new Ta(C.key,C.value,'"property" property is required')),At;function Vt(jr){if("identity"===N)return[new Ta(jr.key,jr.value,'identity function may not have a "stops" property')];var cn=[],rn=jr.value;return cn=cn.concat(Co({key:jr.key,value:rn,valueSpec:jr.valueSpec,style:jr.style,styleSpec:jr.styleSpec,arrayElementValidator:ur})),"array"===fn(rn)&&0===rn.length&&cn.push(new Ta(jr.key,rn,"array must have at least one stop")),cn}function ur(jr){var cn=[],rn=jr.value,Pn=jr.key;if("array"!==fn(rn))return[new Ta(Pn,rn,"array expected, "+fn(rn)+" found")];if(2!==rn.length)return[new Ta(Pn,rn,"array length 2 expected, length "+rn.length+" found")];if(dt){if("object"!==fn(rn[0]))return[new Ta(Pn,rn,"object expected, "+fn(rn[0])+" found")];if(void 0===rn[0].zoom)return[new Ta(Pn,rn,"object stop key must have zoom")];if(void 0===rn[0].value)return[new Ta(Pn,rn,"object stop key must have value")];if(Te&&Te>oo(rn[0].zoom))return[new Ta(Pn,rn[0].zoom,"stop zoom values must appear in ascending order")];oo(rn[0].zoom)!==Te&&(Te=oo(rn[0].zoom),ye=void 0,he={}),cn=cn.concat(So({key:Pn+"[0]",value:rn[0],valueSpec:{zoom:{}},style:jr.style,styleSpec:jr.styleSpec,objectElementValidators:{zoom:to,value:nr}}))}else cn=cn.concat(nr({key:Pn+"[0]",value:rn[0],valueSpec:{},style:jr.style,styleSpec:jr.styleSpec},rn));return oi(ys(rn[1]))?cn.concat([new Ta(Pn+"[1]",rn[1],"expressions are not allowed in function stops.")]):cn.concat(Xs({key:Pn+"[1]",value:rn[1],valueSpec:L,style:jr.style,styleSpec:jr.styleSpec}))}function nr(jr,cn){var rn=fn(jr.value),Pn=oo(jr.value),mn=null!==jr.value?jr.value:cn;if(Q){if(rn!==Q)return[new Ta(jr.key,mn,rn+" stop domain type must match previous stop domain type "+Q)]}else Q=rn;if("number"!==rn&&"string"!==rn&&"boolean"!==rn)return[new Ta(jr.key,mn,"stop domain value must be a number, string, or boolean")];if("number"!==rn&&"categorical"!==N){var Ln="number expected, "+rn+" found";return Mr(L)&&void 0===N&&(Ln+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ta(jr.key,mn,Ln)]}return"categorical"!==N||"number"!==rn||isFinite(Pn)&&Math.floor(Pn)===Pn?"categorical"!==N&&"number"===rn&&void 0!==ye&&Pn<ye?[new Ta(jr.key,mn,"stop domain values must appear in ascending order")]:(ye=Pn,"categorical"===N&&Pn in he?[new Ta(jr.key,mn,"stop domain values must be unique")]:(he[Pn]=!0,[])):[new Ta(jr.key,mn,"integer expected, found "+Pn)]}function Pr(jr){return Xs({key:jr.key,value:jr.value,valueSpec:L,style:jr.style,styleSpec:jr.styleSpec})}}function Ri(C){var L=("property"===C.expressionContext?pi:fa)(ys(C.value),C.valueSpec);if("error"===L.result)return L.value.map(function(Q){return new Ta(""+C.key+Q.key,C.value,Q.message)});var N=L.value.expression||L.value._styleExpression.expression;if("property"===C.expressionContext&&"text-font"===C.propertyKey&&!N.outputDefined())return[new Ta(C.key,C.value,'Invalid data expression for "'+C.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===C.expressionContext&&"layout"===C.propertyType&&!co(N))return[new Ta(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===C.expressionContext&&!co(N))return[new Ta(C.key,C.value,'"feature-state" data expressions are not supported with filters.')];if(C.expressionContext&&0===C.expressionContext.indexOf("cluster")){if(!Wl(N,["zoom","feature-state"]))return[new Ta(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===C.expressionContext&&!bu(N))return[new Ta(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Uo(C){var L=C.value,N=C.key,Q=fn(L);return"boolean"!==Q?[new Ta(N,L,"boolean expected, "+Q+" found")]:[]}function jo(C){var L=C.key,N=C.value,Q=fn(N);return"string"!==Q?[new Ta(L,N,"color expected, "+Q+" found")]:null===Pl(N)?[new Ta(L,N,'color expected, "'+N+'" found')]:[]}function os(C){var L=C.key,N=C.value,Q=C.valueSpec,he=[];return Array.isArray(Q.values)?-1===Q.values.indexOf(oo(N))&&he.push(new Ta(L,N,"expected one of ["+Q.values.join(", ")+"], "+JSON.stringify(N)+" found")):-1===Object.keys(Q.values).indexOf(oo(N))&&he.push(new Ta(L,N,"expected one of ["+Object.keys(Q.values).join(", ")+"], "+JSON.stringify(N)+" found")),he}function Bl(C){if(!0===C||!1===C)return!0;if(!Array.isArray(C)||0===C.length)return!1;switch(C[0]){case"has":return C.length>=2&&"$id"!==C[1]&&"$type"!==C[1];case"in":return C.length>=3&&("string"!=typeof C[1]||Array.isArray(C[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==C.length||Array.isArray(C[1])||Array.isArray(C[2]);case"any":case"all":for(var L=0,N=C.slice(1);L<N.length;L+=1){var Q=N[L];if(!Bl(Q)&&"boolean"!=typeof Q)return!1}return!0;default:return!0}}Hi.deserialize=function(L){return new Hi(L._parameters,L._specification)},Hi.serialize=function(L){return{_parameters:L._parameters,_specification:L._specification}};var cl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ys(C){if(null==C)return{filter:function(){return!0},needGeometry:!1};Bl(C)||(C=_s(C));var L=fa(C,cl);if("error"===L.result)throw new Error(L.value.map(function(Q){return Q.key+": "+Q.message}).join(", "));return{filter:function(Q,he,ye){return L.value.evaluate(Q,he,{},ye)},needGeometry:_o(C)}}function xl(C,L){return C<L?-1:C>L?1:0}function _o(C){if(!Array.isArray(C))return!1;if("within"===C[0])return!0;for(var L=1;L<C.length;L++)if(_o(C[L]))return!0;return!1}function _s(C){if(!C)return!0;var L=C[0];return C.length<=1?"any"!==L:"=="===L?If(C[1],C[2],"=="):"!="===L?Df(If(C[1],C[2],"==")):"<"===L||">"===L||"<="===L||">="===L?If(C[1],C[2],L):"any"===L?Yu(C.slice(1)):"all"===L?["all"].concat(C.slice(1).map(_s)):"none"===L?["all"].concat(C.slice(1).map(_s).map(Df)):"in"===L?nf(C[1],C.slice(2)):"!in"===L?Df(nf(C[1],C.slice(2))):"has"===L?af(C[1]):"!has"===L?Df(af(C[1])):"within"!==L||C}function If(C,L,N){switch(C){case"$type":return["filter-type-"+N,L];case"$id":return["filter-id-"+N,L];default:return["filter-"+N,C,L]}}function Yu(C){return["any"].concat(C.map(_s))}function nf(C,L){if(0===L.length)return!1;switch(C){case"$type":return["filter-type-in",["literal",L]];case"$id":return["filter-id-in",["literal",L]];default:return L.length>200&&!L.some(function(N){return typeof N!=typeof L[0]})?["filter-in-large",C,["literal",L.sort(xl)]]:["filter-in-small",C,["literal",L]]}}function af(C){switch(C){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",C]}}function Df(C){return["!",C]}function Rf(C){return Bl(ys(C.value))?Ri(Do({},C,{expressionContext:"filter",valueSpec:{value:"boolean"}})):of(C)}function of(C){var L=C.value,N=C.key;if("array"!==fn(L))return[new Ta(N,L,"array expected, "+fn(L)+" found")];var he,Q=C.styleSpec,ye=[];if(L.length<1)return[new Ta(N,L,"filter array must have at least 1 element")];switch(ye=ye.concat(os({key:N+"[0]",value:L[0],valueSpec:Q.filter_operator,style:C.style,styleSpec:C.styleSpec})),oo(L[0])){case"<":case"<=":case">":case">=":L.length>=2&&"$type"===oo(L[1])&&ye.push(new Ta(N,L,'"$type" cannot be use with operator "'+L[0]+'"'));case"==":case"!=":3!==L.length&&ye.push(new Ta(N,L,'filter array for operator "'+L[0]+'" must have 3 elements'));case"in":case"!in":L.length>=2&&"string"!==(he=fn(L[1]))&&ye.push(new Ta(N+"[1]",L[1],"string expected, "+he+" found"));for(var Te=2;Te<L.length;Te++)he=fn(L[Te]),"$type"===oo(L[1])?ye=ye.concat(os({key:N+"["+Te+"]",value:L[Te],valueSpec:Q.geometry_type,style:C.style,styleSpec:C.styleSpec})):"string"!==he&&"number"!==he&&"boolean"!==he&&ye.push(new Ta(N+"["+Te+"]",L[Te],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var Ye=1;Ye<L.length;Ye++)ye=ye.concat(of({key:N+"["+Ye+"]",value:L[Ye],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":he=fn(L[1]),2!==L.length?ye.push(new Ta(N,L,'filter array for "'+L[0]+'" operator must have 2 elements')):"string"!==he&&ye.push(new Ta(N+"[1]",L[1],"string expected, "+he+" found"));break;case"within":he=fn(L[1]),2!==L.length?ye.push(new Ta(N,L,'filter array for "'+L[0]+'" operator must have 2 elements')):"object"!==he&&ye.push(new Ta(N+"[1]",L[1],"object expected, "+he+" found"))}return ye}function sf(C,L){var N=C.key,Q=C.style,he=C.styleSpec,ye=C.value,Te=C.objectKey,Ye=he[L+"_"+C.layerType];if(!Ye)return[];var lt=Te.match(/^(.*)-transition$/);if("paint"===L&&lt&&Ye[lt[1]]&&Ye[lt[1]].transition)return Xs({key:N,value:ye,valueSpec:he.transition,style:Q,styleSpec:he});var At,dt=C.valueSpec||Ye[Te];if(!dt)return[new Ta(N,ye,'unknown property "'+Te+'"')];if("string"===fn(ye)&&Mr(dt)&&!dt.tokens&&(At=/^{([^}]+)}$/.exec(ye)))return[new Ta(N,ye,'"'+Te+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(At[1])+" }`.")];var Vt=[];return"symbol"===C.layerType&&("text-field"===Te&&Q&&!Q.glyphs&&Vt.push(new Ta(N,ye,'use of "text-field" requires a style "glyphs" property')),"text-font"===Te&&Dn(ys(ye))&&"identity"===oo(ye.type)&&Vt.push(new Ta(N,ye,'"text-font" does not support identity functions'))),Vt.concat(Xs({key:C.key,value:ye,valueSpec:dt,style:Q,styleSpec:he,expressionContext:"property",propertyType:L,propertyKey:Te}))}function Kf(C){return sf(C,"paint")}function Bf(C){return sf(C,"layout")}function Jf(C){var L=[],N=C.value,Q=C.key,he=C.style,ye=C.styleSpec;!N.type&&!N.ref&&L.push(new Ta(Q,N,'either "type" or "ref" is required'));var Vt,Te=oo(N.type),Ye=oo(N.ref);if(N.id)for(var lt=oo(N.id),dt=0;dt<C.arrayIndex;dt++){var At=he.layers[dt];oo(At.id)===lt&&L.push(new Ta(Q,N.id,'duplicate layer id "'+N.id+'", previously used at line '+At.id.__line__))}if("ref"in N)["type","source","source-layer","filter","layout"].forEach(function(Pr){Pr in N&&L.push(new Ta(Q,N[Pr],'"'+Pr+'" is prohibited for ref layers'))}),he.layers.forEach(function(Pr){oo(Pr.id)===Ye&&(Vt=Pr)}),Vt?Vt.ref?L.push(new Ta(Q,N.ref,"ref cannot reference another ref layer")):Te=oo(Vt.type):L.push(new Ta(Q,N.ref,'ref layer "'+Ye+'" not found'));else if("background"!==Te)if(N.source){var ur=he.sources&&he.sources[N.source],nr=ur&&oo(ur.type);ur?"vector"===nr&&"raster"===Te?L.push(new Ta(Q,N.source,'layer "'+N.id+'" requires a raster source')):"raster"===nr&&"raster"!==Te?L.push(new Ta(Q,N.source,'layer "'+N.id+'" requires a vector source')):"vector"!==nr||N["source-layer"]?"raster-dem"===nr&&"hillshade"!==Te?L.push(new Ta(Q,N.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===Te&&N.paint&&N.paint["line-gradient"]&&("geojson"!==nr||!ur.lineMetrics)&&L.push(new Ta(Q,N,'layer "'+N.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):L.push(new Ta(Q,N,'layer "'+N.id+'" must specify a "source-layer"')):L.push(new Ta(Q,N.source,'source "'+N.source+'" not found'))}else L.push(new Ta(Q,N,'missing required property "source"'));return L=L.concat(So({key:Q,value:N,valueSpec:ye.layer,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Xs({key:Q+".type",value:N.type,valueSpec:ye.layer.type,style:C.style,styleSpec:C.styleSpec,object:N,objectKey:"type"})},filter:Rf,layout:function(jr){return So({layer:N,key:jr.key,value:jr.value,style:jr.style,styleSpec:jr.styleSpec,objectElementValidators:{"*":function(rn){return Bf(Do({layerType:Te},rn))}}})},paint:function(jr){return So({layer:N,key:jr.key,value:jr.value,style:jr.style,styleSpec:jr.styleSpec,objectElementValidators:{"*":function(rn){return Kf(Do({layerType:Te},rn))}}})}}}))}function Xu(C){var L=C.value,N=C.key,Q=fn(L);return"string"!==Q?[new Ta(N,L,"string expected, "+Q+" found")]:[]}var Uf={promoteId:Vf};function Hf(C){var L=C.value,N=C.key,Q=C.styleSpec,he=C.style;if(!L.type)return[new Ta(N,L,'"type" is required')];var Te,ye=oo(L.type);switch(ye){case"vector":case"raster":case"raster-dem":return Te=So({key:N,value:L,valueSpec:Q["source_"+ye.replace("-","_")],style:C.style,styleSpec:Q,objectElementValidators:Uf});case"geojson":if(Te=So({key:N,value:L,valueSpec:Q.source_geojson,style:he,styleSpec:Q,objectElementValidators:Uf}),L.cluster)for(var Ye in L.clusterProperties){var lt=L.clusterProperties[Ye],dt=lt[0],At=lt[1],Vt="string"==typeof dt?[dt,["accumulated"],["get",Ye]]:dt;Te.push.apply(Te,Ri({key:N+"."+Ye+".map",value:At,expressionContext:"cluster-map"})),Te.push.apply(Te,Ri({key:N+"."+Ye+".reduce",value:Vt,expressionContext:"cluster-reduce"}))}return Te;case"video":return So({key:N,value:L,valueSpec:Q.source_video,style:he,styleSpec:Q});case"image":return So({key:N,value:L,valueSpec:Q.source_image,style:he,styleSpec:Q});case"canvas":return[new Ta(N,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return os({key:N+".type",value:L.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:Q})}}function Vf(C){var L=C.key,N=C.value;if("string"===fn(N))return Xu({key:L,value:N});var Q=[];for(var he in N)Q.push.apply(Q,Xu({key:L+"."+he,value:N[he]}));return Q}function rc(C){var L=C.value,N=C.styleSpec,Q=N.light,he=C.style,ye=[],Te=fn(L);if(void 0===L)return ye;if("object"!==Te)return ye=ye.concat([new Ta("light",L,"object expected, "+Te+" found")]);for(var Ye in L){var lt=Ye.match(/^(.*)-transition$/);ye=lt&&Q[lt[1]]&&Q[lt[1]].transition?ye.concat(Xs({key:Ye,value:L[Ye],valueSpec:N.transition,style:he,styleSpec:N})):Q[Ye]?ye.concat(Xs({key:Ye,value:L[Ye],valueSpec:Q[Ye],style:he,styleSpec:N})):ye.concat([new Ta(Ye,L[Ye],'unknown property "'+Ye+'"')])}return ye}function nc(C){return 0===Xu(C).length?[]:Ri(C)}function Qf(C){return 0===Xu(C).length?[]:Ri(C)}var lf={"*":function(){return[]},array:Co,boolean:Uo,number:to,color:jo,constants:ls,enum:os,filter:Rf,function:Ia,layer:Jf,object:So,source:Hf,light:rc,string:Xu,formatted:nc,resolvedImage:Qf};function Xs(C){var L=C.value,N=C.valueSpec,Q=C.styleSpec;return N.expression&&Dn(oo(L))?Ia(C):N.expression&&oi(ys(L))?Ri(C):N.type&&lf[N.type]?lf[N.type](C):So(Do({},C,{valueSpec:N.type?Q[N.type]:N}))}function Mo(C){var L=C.value,N=C.key,Q=Xu(C);return Q.length||(-1===L.indexOf("{fontstack}")&&Q.push(new Ta(N,L,'"glyphs" url must include a "{fontstack}" token')),-1===L.indexOf("{range}")&&Q.push(new Ta(N,L,'"glyphs" url must include a "{range}" token'))),Q}function Jl(C,L){void 0===L&&(L=In);var N=[];return N=N.concat(Xs({key:"",value:C,valueSpec:L.$root,styleSpec:L,style:C,objectElementValidators:{glyphs:Mo,"*":function(){return[]}}})),C.constants&&(N=N.concat(ls({key:"constants",value:C.constants,style:C,styleSpec:L}))),bl(N)}function bl(C){return[].concat(C).sort(function(L,N){return L.line-N.line})}function lo(C){return function(){for(var L=[],N=arguments.length;N--;)L[N]=arguments[N];return bl(C.apply(this,L))}}Jl.source=lo(Hf),Jl.light=lo(rc),Jl.layer=lo(Jf),Jl.filter=lo(Rf),Jl.paintProperty=lo(Kf),Jl.layoutProperty=lo(Bf);var Vi=Jl,$i=Vi.light,Pu=Vi.paintProperty,wl=Vi.layoutProperty;function uf(C,L){var N=!1;if(L&&L.length)for(var Q=0,he=L;Q<he.length;Q+=1){var ye=he[Q];C.fire(new wt(new Error(ye.message))),N=!0}return N}var Ul=Zs,Tl=3;function Zs(C,L,N){var Q=this.cells=[];if(C instanceof ArrayBuffer){this.arrayBuffer=C;var he=new Int32Array(this.arrayBuffer);C=he[0],L=he[1],N=he[2],this.d=L+2*N;for(var ye=0;ye<this.d*this.d;ye++){var Te=he[Tl+ye],Ye=he[Tl+ye+1];Q.push(Te===Ye?null:he.subarray(Te,Ye))}var lt=he[Tl+Q.length],dt=he[Tl+Q.length+1];this.keys=he.subarray(lt,dt),this.bboxes=he.subarray(dt),this.insert=this._insertReadonly}else{this.d=L+2*N;for(var At=0;At<this.d*this.d;At++)Q.push([]);this.keys=[],this.bboxes=[]}this.n=L,this.extent=C,this.padding=N,this.scale=L/C,this.uid=0;var Vt=N/L*C;this.min=-Vt,this.max=C+Vt}Zs.prototype.insert=function(C,L,N,Q,he){this._forEachCell(L,N,Q,he,this._insertCell,this.uid++),this.keys.push(C),this.bboxes.push(L),this.bboxes.push(N),this.bboxes.push(Q),this.bboxes.push(he)},Zs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Zs.prototype._insertCell=function(C,L,N,Q,he,ye){this.cells[he].push(ye)},Zs.prototype.query=function(C,L,N,Q,he){var ye=this.min,Te=this.max;if(C<=ye&&L<=ye&&Te<=N&&Te<=Q&&!he)return Array.prototype.slice.call(this.keys);var Ye=[],lt={};return this._forEachCell(C,L,N,Q,this._queryCell,Ye,lt,he),Ye},Zs.prototype._queryCell=function(C,L,N,Q,he,ye,Te,Ye){var lt=this.cells[he];if(null!==lt)for(var dt=this.keys,At=this.bboxes,Vt=0;Vt<lt.length;Vt++){var ur=lt[Vt];if(void 0===Te[ur]){var nr=4*ur;(Ye?Ye(At[nr+0],At[nr+1],At[nr+2],At[nr+3]):C<=At[nr+2]&&L<=At[nr+3]&&N>=At[nr+0]&&Q>=At[nr+1])?(Te[ur]=!0,ye.push(dt[ur])):Te[ur]=!1}}},Zs.prototype._forEachCell=function(C,L,N,Q,he,ye,Te,Ye){for(var lt=this._convertToCellCoord(C),dt=this._convertToCellCoord(L),At=this._convertToCellCoord(N),Vt=this._convertToCellCoord(Q),ur=lt;ur<=At;ur++)for(var nr=dt;nr<=Vt;nr++){var Pr=this.d*nr+ur;if((!Ye||Ye(this._convertFromCellCoord(ur),this._convertFromCellCoord(nr),this._convertFromCellCoord(ur+1),this._convertFromCellCoord(nr+1)))&&he.call(this,C,L,N,Q,Pr,ye,Te,Ye))return}},Zs.prototype._convertFromCellCoord=function(C){return(C-this.padding)/this.scale},Zs.prototype._convertToCellCoord=function(C){return Math.max(0,Math.min(this.d-1,Math.floor(C*this.scale)+this.padding))},Zs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var C=this.cells,L=Tl+this.cells.length+1+1,N=0,Q=0;Q<this.cells.length;Q++)N+=this.cells[Q].length;var he=new Int32Array(L+N+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var ye=L,Te=0;Te<C.length;Te++){var Ye=C[Te];he[Tl+Te]=ye,he.set(Ye,ye),ye+=Ye.length}return he[Tl+C.length]=ye,he.set(this.keys,ye),ye+=this.keys.length,he[Tl+C.length+1]=ye,he.set(this.bboxes,ye),ye+=this.bboxes.length,he.buffer};var Gf=o.ImageData,su=o.ImageBitmap,lu={};function Wa(C,L,N){void 0===N&&(N={}),Object.defineProperty(L,"_classRegistryKey",{value:C,writeable:!1}),lu[C]={klass:L,omit:N.omit||[],shallow:N.shallow||[]}}for(var ns in Wa("Object",Object),Ul.serialize=function(L,N){var Q=L.toArrayBuffer();return N&&N.push(Q),{buffer:Q}},Ul.deserialize=function(L){return new Ul(L.buffer)},Wa("Grid",Ul),Wa("Color",ji),Wa("Error",Error),Wa("ResolvedImage",Zo),Wa("StylePropertyFunction",Hi),Wa("StyleExpression",ii,{omit:["_evaluator"]}),Wa("ZoomDependentExpression",ti),Wa("ZoomConstantExpression",pa),Wa("CompoundExpression",Wi,{omit:["_evaluate"]}),fl)fl[ns]._classRegistryKey||Wa("Expression_"+ns,fl[ns]);function Zu(C){return C&&typeof ArrayBuffer<"u"&&(C instanceof ArrayBuffer||C.constructor&&"ArrayBuffer"===C.constructor.name)}function jf(C){return su&&C instanceof su}function le(C,L){if(null==C||"boolean"==typeof C||"number"==typeof C||"string"==typeof C||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp)return C;if(Zu(C)||jf(C))return L&&L.push(C),C;if(ArrayBuffer.isView(C)){var N=C;return L&&L.push(N.buffer),N}if(C instanceof Gf)return L&&L.push(C.data.buffer),C;if(Array.isArray(C)){for(var Q=[],he=0,ye=C;he<ye.length;he+=1){var Te=ye[he];Q.push(le(Te,L))}return Q}if("object"==typeof C){var Ye=C.constructor,lt=Ye._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var dt=Ye.serialize?Ye.serialize(C,L):{};if(!Ye.serialize){for(var At in C)if(C.hasOwnProperty(At)&&!(lu[lt].omit.indexOf(At)>=0)){var Vt=C[At];dt[At]=lu[lt].shallow.indexOf(At)>=0?Vt:le(Vt,L)}C instanceof Error&&(dt.message=C.message)}if(dt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==lt&&(dt.$name=lt),dt}throw new Error("can't serialize object of type "+typeof C)}function xe(C){if(null==C||"boolean"==typeof C||"number"==typeof C||"string"==typeof C||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||Zu(C)||jf(C)||ArrayBuffer.isView(C)||C instanceof Gf)return C;if(Array.isArray(C))return C.map(xe);if("object"==typeof C){var L=C.$name||"Object",Q=lu[L].klass;if(!Q)throw new Error("can't deserialize unregistered class "+L);if(Q.deserialize)return Q.deserialize(C);for(var he=Object.create(Q.prototype),ye=0,Te=Object.keys(C);ye<Te.length;ye+=1){var Ye=Te[ye];if("$name"!==Ye){var lt=C[Ye];he[Ye]=lu[L].shallow.indexOf(Ye)>=0?lt:xe(lt)}}return he}throw new Error("can't deserialize object of type "+typeof C)}var Re=function(){this.first=!0};Re.prototype.update=function(L,N){var Q=Math.floor(L);return this.first?(this.first=!1,this.lastIntegerZoom=Q,this.lastIntegerZoomTime=0,this.lastZoom=L,this.lastFloorZoom=Q,!0):(this.lastFloorZoom>Q?(this.lastIntegerZoom=Q+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<Q&&(this.lastIntegerZoom=Q,this.lastIntegerZoomTime=N),L!==this.lastZoom&&(this.lastZoom=L,this.lastFloorZoom=Q,!0))};var Ue={"Latin-1 Supplement":function(C){return C>=128&&C<=255},Arabic:function(C){return C>=1536&&C<=1791},"Arabic Supplement":function(C){return C>=1872&&C<=1919},"Arabic Extended-A":function(C){return C>=2208&&C<=2303},"Hangul Jamo":function(C){return C>=4352&&C<=4607},"Unified Canadian Aboriginal Syllabics":function(C){return C>=5120&&C<=5759},Khmer:function(C){return C>=6016&&C<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(C){return C>=6320&&C<=6399},"General Punctuation":function(C){return C>=8192&&C<=8303},"Letterlike Symbols":function(C){return C>=8448&&C<=8527},"Number Forms":function(C){return C>=8528&&C<=8591},"Miscellaneous Technical":function(C){return C>=8960&&C<=9215},"Control Pictures":function(C){return C>=9216&&C<=9279},"Optical Character Recognition":function(C){return C>=9280&&C<=9311},"Enclosed Alphanumerics":function(C){return C>=9312&&C<=9471},"Geometric Shapes":function(C){return C>=9632&&C<=9727},"Miscellaneous Symbols":function(C){return C>=9728&&C<=9983},"Miscellaneous Symbols and Arrows":function(C){return C>=11008&&C<=11263},"CJK Radicals Supplement":function(C){return C>=11904&&C<=12031},"Kangxi Radicals":function(C){return C>=12032&&C<=12255},"Ideographic Description Characters":function(C){return C>=12272&&C<=12287},"CJK Symbols and Punctuation":function(C){return C>=12288&&C<=12351},Hiragana:function(C){return C>=12352&&C<=12447},Katakana:function(C){return C>=12448&&C<=12543},Bopomofo:function(C){return C>=12544&&C<=12591},"Hangul Compatibility Jamo":function(C){return C>=12592&&C<=12687},Kanbun:function(C){return C>=12688&&C<=12703},"Bopomofo Extended":function(C){return C>=12704&&C<=12735},"CJK Strokes":function(C){return C>=12736&&C<=12783},"Katakana Phonetic Extensions":function(C){return C>=12784&&C<=12799},"Enclosed CJK Letters and Months":function(C){return C>=12800&&C<=13055},"CJK Compatibility":function(C){return C>=13056&&C<=13311},"CJK Unified Ideographs Extension A":function(C){return C>=13312&&C<=19903},"Yijing Hexagram Symbols":function(C){return C>=19904&&C<=19967},"CJK Unified Ideographs":function(C){return C>=19968&&C<=40959},"Yi Syllables":function(C){return C>=40960&&C<=42127},"Yi Radicals":function(C){return C>=42128&&C<=42191},"Hangul Jamo Extended-A":function(C){return C>=43360&&C<=43391},"Hangul Syllables":function(C){return C>=44032&&C<=55215},"Hangul Jamo Extended-B":function(C){return C>=55216&&C<=55295},"Private Use Area":function(C){return C>=57344&&C<=63743},"CJK Compatibility Ideographs":function(C){return C>=63744&&C<=64255},"Arabic Presentation Forms-A":function(C){return C>=64336&&C<=65023},"Vertical Forms":function(C){return C>=65040&&C<=65055},"CJK Compatibility Forms":function(C){return C>=65072&&C<=65103},"Small Form Variants":function(C){return C>=65104&&C<=65135},"Arabic Presentation Forms-B":function(C){return C>=65136&&C<=65279},"Halfwidth and Fullwidth Forms":function(C){return C>=65280&&C<=65519}};function Je(C){for(var L=0,N=C;L<N.length;L+=1)if(Ot(N[L].charCodeAt(0)))return!0;return!1}function tt(C){for(var L=0,N=C;L<N.length;L+=1)if(!Lt(N[L].charCodeAt(0)))return!1;return!0}function Lt(C){return!(Ue.Arabic(C)||Ue["Arabic Supplement"](C)||Ue["Arabic Extended-A"](C)||Ue["Arabic Presentation Forms-A"](C)||Ue["Arabic Presentation Forms-B"](C))}function yt(C){return!(C<11904||!(Ue["Bopomofo Extended"](C)||Ue.Bopomofo(C)||Ue["CJK Compatibility Forms"](C)||Ue["CJK Compatibility Ideographs"](C)||Ue["CJK Compatibility"](C)||Ue["CJK Radicals Supplement"](C)||Ue["CJK Strokes"](C)||Ue["CJK Symbols and Punctuation"](C)||Ue["CJK Unified Ideographs Extension A"](C)||Ue["CJK Unified Ideographs"](C)||Ue["Enclosed CJK Letters and Months"](C)||Ue["Halfwidth and Fullwidth Forms"](C)||Ue.Hiragana(C)||Ue["Ideographic Description Characters"](C)||Ue["Kangxi Radicals"](C)||Ue["Katakana Phonetic Extensions"](C)||Ue.Katakana(C)||Ue["Vertical Forms"](C)||Ue["Yi Radicals"](C)||Ue["Yi Syllables"](C)))}function Ot(C){return 746===C||747===C||!(C<4352)&&!!(Ue["Bopomofo Extended"](C)||Ue.Bopomofo(C)||Ue["CJK Compatibility Forms"](C)&&!(C>=65097&&C<=65103)||Ue["CJK Compatibility Ideographs"](C)||Ue["CJK Compatibility"](C)||Ue["CJK Radicals Supplement"](C)||Ue["CJK Strokes"](C)||Ue["CJK Symbols and Punctuation"](C)&&!(C>=12296&&C<=12305)&&!(C>=12308&&C<=12319)&&12336!==C||Ue["CJK Unified Ideographs Extension A"](C)||Ue["CJK Unified Ideographs"](C)||Ue["Enclosed CJK Letters and Months"](C)||Ue["Hangul Compatibility Jamo"](C)||Ue["Hangul Jamo Extended-A"](C)||Ue["Hangul Jamo Extended-B"](C)||Ue["Hangul Jamo"](C)||Ue["Hangul Syllables"](C)||Ue.Hiragana(C)||Ue["Ideographic Description Characters"](C)||Ue.Kanbun(C)||Ue["Kangxi Radicals"](C)||Ue["Katakana Phonetic Extensions"](C)||Ue.Katakana(C)&&12540!==C||!(!Ue["Halfwidth and Fullwidth Forms"](C)||65288===C||65289===C||65293===C||C>=65306&&C<=65310||65339===C||65341===C||65343===C||C>=65371&&C<=65503||65507===C||C>=65512&&C<=65519)||!(!Ue["Small Form Variants"](C)||C>=65112&&C<=65118||C>=65123&&C<=65126)||Ue["Unified Canadian Aboriginal Syllabics"](C)||Ue["Unified Canadian Aboriginal Syllabics Extended"](C)||Ue["Vertical Forms"](C)||Ue["Yijing Hexagram Symbols"](C)||Ue["Yi Syllables"](C)||Ue["Yi Radicals"](C))}function or(C){return!!(Ue["Latin-1 Supplement"](C)&&(167===C||169===C||174===C||177===C||188===C||189===C||190===C||215===C||247===C)||Ue["General Punctuation"](C)&&(8214===C||8224===C||8225===C||8240===C||8241===C||8251===C||8252===C||8258===C||8263===C||8264===C||8265===C||8273===C)||Ue["Letterlike Symbols"](C)||Ue["Number Forms"](C)||Ue["Miscellaneous Technical"](C)&&(C>=8960&&C<=8967||C>=8972&&C<=8991||C>=8996&&C<=9e3||9003===C||C>=9085&&C<=9114||C>=9150&&C<=9165||9167===C||C>=9169&&C<=9179||C>=9186&&C<=9215)||Ue["Control Pictures"](C)&&9251!==C||Ue["Optical Character Recognition"](C)||Ue["Enclosed Alphanumerics"](C)||Ue["Geometric Shapes"](C)||Ue["Miscellaneous Symbols"](C)&&!(C>=9754&&C<=9759)||Ue["Miscellaneous Symbols and Arrows"](C)&&(C>=11026&&C<=11055||C>=11088&&C<=11097||C>=11192&&C<=11243)||Ue["CJK Symbols and Punctuation"](C)||Ue.Katakana(C)||Ue["Private Use Area"](C)||Ue["CJK Compatibility Forms"](C)||Ue["Small Form Variants"](C)||Ue["Halfwidth and Fullwidth Forms"](C)||8734===C||8756===C||8757===C||C>=9984&&C<=10087||C>=10102&&C<=10131||65532===C||65533===C)}function ir(C){return!(Ot(C)||or(C))}function Rr(C){return Ue.Arabic(C)||Ue["Arabic Supplement"](C)||Ue["Arabic Extended-A"](C)||Ue["Arabic Presentation Forms-A"](C)||Ue["Arabic Presentation Forms-B"](C)}function Dr(C){return C>=1424&&C<=2303||Ue["Arabic Presentation Forms-A"](C)||Ue["Arabic Presentation Forms-B"](C)}function tn(C,L){return!(!L&&Dr(C)||C>=2304&&C<=3583||C>=3840&&C<=4255||Ue.Khmer(C))}function sn(C){for(var L=0,N=C;L<N.length;L+=1)if(Dr(N[L].charCodeAt(0)))return!0;return!1}function _r(C,L){for(var N=0,Q=C;N<Q.length;N+=1)if(!tn(Q[N].charCodeAt(0),L))return!1;return!0}var Gr={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Jr=null,qr=Gr.unavailable,en=null,Qr=function(C){C&&"string"==typeof C&&C.indexOf("NetworkError")>-1&&(qr=Gr.error),Jr&&Jr(C)};function Vn(){Aa.fire(new Kt("pluginStateChange",{pluginStatus:qr,pluginURL:en}))}var Aa=new xr,La=function(){return qr},xa=function(C){return C({pluginStatus:qr,pluginURL:en}),Aa.on("pluginStateChange",C),C},Ya=function(C,L,N){if(void 0===N&&(N=!1),qr===Gr.deferred||qr===Gr.loading||qr===Gr.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");en=ue.resolveURL(C),qr=Gr.deferred,Jr=L,Vn(),N||Ga()},Ga=function(){if(qr!==Gr.deferred||!en)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qr=Gr.loading,Vn(),en&&sr({url:en},function(C){C?Qr(C):(qr=Gr.loaded,Vn())})},ui={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return qr===Gr.loaded||null!=ui.applyArabicShaping},isLoading:function(){return qr===Gr.loading},setState:function(L){qr=L.pluginStatus,en=L.pluginURL},isParsed:function(){return null!=ui.applyArabicShaping&&null!=ui.processBidirectionalText&&null!=ui.processStyledBidirectionalText},getPluginURL:function(){return en}},Za=function(){!ui.isLoading()&&!ui.isLoaded()&&"deferred"===La()&&Ga()},Ha=function(L,N){this.zoom=L,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Re,this.transition={})};Ha.prototype.isSupportedScript=function(L){return _r(L,ui.isLoaded())},Ha.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ha.prototype.getCrossfadeParameters=function(){var L=this.zoom,N=L-Math.floor(L),Q=this.crossFadingFactor();return L>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*Q}:{fromScale:.5,toScale:1,t:1-(1-Q)*N}};var hi=function(L,N){this.property=L,this.value=N,this.expression=no(void 0===N?L.specification.default:N,L.specification)};hi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},hi.prototype.possiblyEvaluate=function(L,N,Q){return this.property.possiblyEvaluate(this,L,N,Q)};var Yi=function(L){this.property=L,this.value=new hi(L,void 0)};Yi.prototype.transitioned=function(L,N){return new ia(this.property,this.value,N,d({},L.transition,this.transition),L.now)},Yi.prototype.untransitioned=function(){return new ia(this.property,this.value,null,{},0)};var ai=function(L){this._properties=L,this._values=Object.create(L.defaultTransitionablePropertyValues)};ai.prototype.getValue=function(L){return z(this._values[L].value.value)},ai.prototype.setValue=function(L,N){this._values.hasOwnProperty(L)||(this._values[L]=new Yi(this._values[L].property)),this._values[L].value=new hi(this._values[L].property,null===N?void 0:z(N))},ai.prototype.getTransition=function(L){return z(this._values[L].transition)},ai.prototype.setTransition=function(L,N){this._values.hasOwnProperty(L)||(this._values[L]=new Yi(this._values[L].property)),this._values[L].transition=z(N)||void 0},ai.prototype.serialize=function(){for(var L={},N=0,Q=Object.keys(this._values);N<Q.length;N+=1){var he=Q[N],ye=this.getValue(he);void 0!==ye&&(L[he]=ye);var Te=this.getTransition(he);void 0!==Te&&(L[he+"-transition"]=Te)}return L},ai.prototype.transitioned=function(L,N){for(var Q=new vi(this._properties),he=0,ye=Object.keys(this._values);he<ye.length;he+=1){var Te=ye[he];Q._values[Te]=this._values[Te].transitioned(L,N._values[Te])}return Q},ai.prototype.untransitioned=function(){for(var L=new vi(this._properties),N=0,Q=Object.keys(this._values);N<Q.length;N+=1){var he=Q[N];L._values[he]=this._values[he].untransitioned()}return L};var ia=function(L,N,Q,he,ye){this.property=L,this.value=N,this.begin=ye+he.delay||0,this.end=this.begin+he.duration||0,L.specification.transition&&(he.delay||he.duration)&&(this.prior=Q)};ia.prototype.possiblyEvaluate=function(L,N,Q){var he=L.now||0,ye=this.value.possiblyEvaluate(L,N,Q),Te=this.prior;if(Te){if(he>this.end)return this.prior=null,ye;if(this.value.isDataDriven())return this.prior=null,ye;if(he<this.begin)return Te.possiblyEvaluate(L,N,Q);var Ye=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(Te.possiblyEvaluate(L,N,Q),ye,f(Ye))}return ye};var vi=function(L){this._properties=L,this._values=Object.create(L.defaultTransitioningPropertyValues)};vi.prototype.possiblyEvaluate=function(L,N,Q){for(var he=new uo(this._properties),ye=0,Te=Object.keys(this._values);ye<Te.length;ye+=1){var Ye=Te[ye];he._values[Ye]=this._values[Ye].possiblyEvaluate(L,N,Q)}return he},vi.prototype.hasTransition=function(){for(var L=0,N=Object.keys(this._values);L<N.length;L+=1){var Q=N[L];if(this._values[Q].prior)return!0}return!1};var Si=function(L){this._properties=L,this._values=Object.create(L.defaultPropertyValues)};Si.prototype.getValue=function(L){return z(this._values[L].value)},Si.prototype.setValue=function(L,N){this._values[L]=new hi(this._values[L].property,null===N?void 0:z(N))},Si.prototype.serialize=function(){for(var L={},N=0,Q=Object.keys(this._values);N<Q.length;N+=1){var he=Q[N],ye=this.getValue(he);void 0!==ye&&(L[he]=ye)}return L},Si.prototype.possiblyEvaluate=function(L,N,Q){for(var he=new uo(this._properties),ye=0,Te=Object.keys(this._values);ye<Te.length;ye+=1){var Ye=Te[ye];he._values[Ye]=this._values[Ye].possiblyEvaluate(L,N,Q)}return he};var Pi=function(L,N,Q){this.property=L,this.value=N,this.parameters=Q};Pi.prototype.isConstant=function(){return"constant"===this.value.kind},Pi.prototype.constantOr=function(L){return"constant"===this.value.kind?this.value.value:L},Pi.prototype.evaluate=function(L,N,Q,he){return this.property.evaluate(this.value,this.parameters,L,N,Q,he)};var uo=function(L){this._properties=L,this._values=Object.create(L.defaultPossiblyEvaluatedValues)};uo.prototype.get=function(L){return this._values[L]};var Et=function(L){this.specification=L};Et.prototype.possiblyEvaluate=function(L,N){return L.expression.evaluate(N)},Et.prototype.interpolate=function(L,N,Q){var he=Fl[this.specification.type];return he?he(L,N,Q):L};var wr=function(L,N){this.specification=L,this.overrides=N};wr.prototype.possiblyEvaluate=function(L,N,Q,he){return"constant"===L.expression.kind||"camera"===L.expression.kind?new Pi(this,{kind:"constant",value:L.expression.evaluate(N,null,{},Q,he)},N):new Pi(this,L.expression,N)},wr.prototype.interpolate=function(L,N,Q){if("constant"!==L.value.kind||"constant"!==N.value.kind)return L;if(void 0===L.value.value||void 0===N.value.value)return new Pi(this,{kind:"constant",value:void 0},L.parameters);var he=Fl[this.specification.type];return he?new Pi(this,{kind:"constant",value:he(L.value.value,N.value.value,Q)},L.parameters):L},wr.prototype.evaluate=function(L,N,Q,he,ye,Te){return"constant"===L.kind?L.value:L.evaluate(N,Q,he,ye,Te)};var Nr=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.possiblyEvaluate=function(Q,he,ye,Te){if(void 0===Q.value)return new Pi(this,{kind:"constant",value:void 0},he);if("constant"===Q.expression.kind){var Ye=Q.expression.evaluate(he,null,{},ye,Te),dt="resolvedImage"===Q.property.specification.type&&"string"!=typeof Ye?Ye.name:Ye,At=this._calculate(dt,dt,dt,he);return new Pi(this,{kind:"constant",value:At},he)}if("camera"===Q.expression.kind){var Vt=this._calculate(Q.expression.evaluate({zoom:he.zoom-1}),Q.expression.evaluate({zoom:he.zoom}),Q.expression.evaluate({zoom:he.zoom+1}),he);return new Pi(this,{kind:"constant",value:Vt},he)}return new Pi(this,Q.expression,he)},L.prototype.evaluate=function(Q,he,ye,Te,Ye,lt){if("source"===Q.kind){var dt=Q.evaluate(he,ye,Te,Ye,lt);return this._calculate(dt,dt,dt,he)}return"composite"===Q.kind?this._calculate(Q.evaluate({zoom:Math.floor(he.zoom)-1},ye,Te),Q.evaluate({zoom:Math.floor(he.zoom)},ye,Te),Q.evaluate({zoom:Math.floor(he.zoom)+1},ye,Te),he):Q.value},L.prototype._calculate=function(Q,he,ye,Te){return Te.zoom>Te.zoomHistory.lastIntegerZoom?{from:Q,to:he}:{from:ye,to:he}},L.prototype.interpolate=function(Q){return Q},L}(wr),vn=function(L){this.specification=L};vn.prototype.possiblyEvaluate=function(L,N,Q,he){if(void 0!==L.value){if("constant"===L.expression.kind){var ye=L.expression.evaluate(N,null,{},Q,he);return this._calculate(ye,ye,ye,N)}return this._calculate(L.expression.evaluate(new Ha(Math.floor(N.zoom-1),N)),L.expression.evaluate(new Ha(Math.floor(N.zoom),N)),L.expression.evaluate(new Ha(Math.floor(N.zoom+1),N)),N)}},vn.prototype._calculate=function(L,N,Q,he){return he.zoom>he.zoomHistory.lastIntegerZoom?{from:L,to:N}:{from:Q,to:N}},vn.prototype.interpolate=function(L){return L};var bn=function(L){this.specification=L};bn.prototype.possiblyEvaluate=function(L,N,Q,he){return!!L.expression.evaluate(N,null,{},Q,he)},bn.prototype.interpolate=function(){return!1};var xn=function(L){for(var N in this.properties=L,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],L){var Q=L[N];Q.specification.overridable&&this.overridableProperties.push(N);var he=this.defaultPropertyValues[N]=new hi(Q,void 0),ye=this.defaultTransitionablePropertyValues[N]=new Yi(Q);this.defaultTransitioningPropertyValues[N]=ye.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=he.possiblyEvaluate({})}};Wa("DataDrivenProperty",wr),Wa("DataConstantProperty",Et),Wa("CrossFadedDataDrivenProperty",Nr),Wa("CrossFadedProperty",vn),Wa("ColorRampProperty",bn);var Tn="-transition",Gn=function(C){function L(N,Q){if(C.call(this),this.id=N.id,this.type=N.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==N.type&&(this.metadata=N.metadata,this.minzoom=N.minzoom,this.maxzoom=N.maxzoom,"background"!==N.type&&(this.source=N.source,this.sourceLayer=N["source-layer"],this.filter=N.filter),Q.layout&&(this._unevaluatedLayout=new Si(Q.layout)),Q.paint)){for(var he in this._transitionablePaint=new ai(Q.paint),N.paint)this.setPaintProperty(he,N.paint[he],{validate:!1});for(var ye in N.layout)this.setLayoutProperty(ye,N.layout[ye],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new uo(Q.paint)}}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},L.prototype.getLayoutProperty=function(Q){return"visibility"===Q?this.visibility:this._unevaluatedLayout.getValue(Q)},L.prototype.setLayoutProperty=function(Q,he,ye){if(void 0===ye&&(ye={}),null!=he){var Te="layers."+this.id+".layout."+Q;if(this._validate(wl,Te,Q,he,ye))return}"visibility"!==Q?this._unevaluatedLayout.setValue(Q,he):this.visibility=he},L.prototype.getPaintProperty=function(Q){return R(Q,Tn)?this._transitionablePaint.getTransition(Q.slice(0,-Tn.length)):this._transitionablePaint.getValue(Q)},L.prototype.setPaintProperty=function(Q,he,ye){if(void 0===ye&&(ye={}),null!=he){var Te="layers."+this.id+".paint."+Q;if(this._validate(Pu,Te,Q,he,ye))return!1}if(R(Q,Tn))return this._transitionablePaint.setTransition(Q.slice(0,-Tn.length),he||void 0),!1;var Ye=this._transitionablePaint._values[Q],lt="cross-faded-data-driven"===Ye.property.specification["property-type"],dt=Ye.value.isDataDriven(),At=Ye.value;this._transitionablePaint.setValue(Q,he),this._handleSpecialPaintPropertyUpdate(Q);var Vt=this._transitionablePaint._values[Q].value;return Vt.isDataDriven()||dt||lt||this._handleOverridablePaintPropertyUpdate(Q,At,Vt)},L.prototype._handleSpecialPaintPropertyUpdate=function(Q){},L.prototype._handleOverridablePaintPropertyUpdate=function(Q,he,ye){return!1},L.prototype.isHidden=function(Q){return!!(this.minzoom&&Q<this.minzoom||this.maxzoom&&Q>=this.maxzoom)||"none"===this.visibility},L.prototype.updateTransitions=function(Q){this._transitioningPaint=this._transitionablePaint.transitioned(Q,this._transitioningPaint)},L.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},L.prototype.recalculate=function(Q,he){Q.getCrossfadeParameters&&(this._crossfadeParameters=Q.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Q,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate(Q,void 0,he)},L.prototype.serialize=function(){var Q={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Q.layout=Q.layout||{},Q.layout.visibility=this.visibility),_(Q,function(he,ye){return!(void 0===he||"layout"===ye&&!Object.keys(he).length||"paint"===ye&&!Object.keys(he).length)})},L.prototype._validate=function(Q,he,ye,Te,Ye){return void 0===Ye&&(Ye={}),(!Ye||!1!==Ye.validate)&&uf(this,Q.call(Vi,{key:he,layerType:this.type,objectKey:ye,value:Te,styleSpec:In,style:{glyphs:!0,sprite:!0}}))},L.prototype.is3D=function(){return!1},L.prototype.isTileClipped=function(){return!1},L.prototype.hasOffscreenPass=function(){return!1},L.prototype.resize=function(){},L.prototype.isStateDependent=function(){for(var Q in this.paint._values){var he=this.paint.get(Q);if(he instanceof Pi&&Mr(he.property.specification)&&("source"===he.value.kind||"composite"===he.value.kind)&&he.value.isStateDependent)return!0}return!1},L}(xr),ba={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},wa=function(L,N){this._structArray=L,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Qn=128,Fa=5,ea=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ra(C,L){void 0===L&&(L=1);var N=0,Q=0;return{members:C.map(function(Te){var Ye=Bn(Te.type),lt=N=dn(N,Math.max(L,Ye)),dt=Te.components||1;return Q=Math.max(Q,Ye),N+=Ye*dt,{name:Te.name,type:Te.type,components:dt,offset:lt}}),size:dn(N,Math.max(Q,L)),alignment:L}}function Bn(C){return ba[C].BYTES_PER_ELEMENT}function dn(C,L){return Math.ceil(C/L)*L}ea.serialize=function(L,N){return L._trim(),N&&(L.isTransferred=!0,N.push(L.arrayBuffer)),{length:L.length,arrayBuffer:L.arrayBuffer}},ea.deserialize=function(L){var N=Object.create(this.prototype);return N.arrayBuffer=L.arrayBuffer,N.length=L.length,N.capacity=L.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},ea.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ea.prototype.clear=function(){this.length=0},ea.prototype.resize=function(L){this.reserve(L),this.length=L},ea.prototype.reserve=function(L){if(L>this.capacity){this.capacity=Math.max(L,Math.floor(this.capacity*Fa),Qn),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},ea.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var kn=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he){var ye=this.length;return this.resize(ye+1),this.emplace(ye,Q,he)},L.prototype.emplace=function(Q,he,ye){var Te=2*Q;return this.int16[Te+0]=he,this.int16[Te+1]=ye,Q},L}(ea);kn.prototype.bytesPerElement=4,Wa("StructArrayLayout2i4",kn);var $n=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,Q,he,ye,Te)},L.prototype.emplace=function(Q,he,ye,Te,Ye){var lt=4*Q;return this.int16[lt+0]=he,this.int16[lt+1]=ye,this.int16[lt+2]=Te,this.int16[lt+3]=Ye,Q},L}(ea);$n.prototype.bytesPerElement=8,Wa("StructArrayLayout4i8",$n);var na=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt){var dt=this.length;return this.resize(dt+1),this.emplace(dt,Q,he,ye,Te,Ye,lt)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt){var At=6*Q;return this.int16[At+0]=he,this.int16[At+1]=ye,this.int16[At+2]=Te,this.int16[At+3]=Ye,this.int16[At+4]=lt,this.int16[At+5]=dt,Q},L}(ea);na.prototype.bytesPerElement=12,Wa("StructArrayLayout2i4i12",na);var jn=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt){var dt=this.length;return this.resize(dt+1),this.emplace(dt,Q,he,ye,Te,Ye,lt)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt){var At=4*Q,Vt=8*Q;return this.int16[At+0]=he,this.int16[At+1]=ye,this.uint8[Vt+4]=Te,this.uint8[Vt+5]=Ye,this.uint8[Vt+6]=lt,this.uint8[Vt+7]=dt,Q},L}(ea);jn.prototype.bytesPerElement=8,Wa("StructArrayLayout2i4ub8",jn);var ka=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he){var ye=this.length;return this.resize(ye+1),this.emplace(ye,Q,he)},L.prototype.emplace=function(Q,he,ye){var Te=2*Q;return this.float32[Te+0]=he,this.float32[Te+1]=ye,Q},L}(ea);ka.prototype.bytesPerElement=8,Wa("StructArrayLayout2f8",ka);var ga=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur){var nr=this.length;return this.resize(nr+1),this.emplace(nr,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr){var Pr=10*Q;return this.uint16[Pr+0]=he,this.uint16[Pr+1]=ye,this.uint16[Pr+2]=Te,this.uint16[Pr+3]=Ye,this.uint16[Pr+4]=lt,this.uint16[Pr+5]=dt,this.uint16[Pr+6]=At,this.uint16[Pr+7]=Vt,this.uint16[Pr+8]=ur,this.uint16[Pr+9]=nr,Q},L}(ea);ga.prototype.bytesPerElement=20,Wa("StructArrayLayout10ui20",ga);var ni=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr){var jr=this.length;return this.resize(jr+1),this.emplace(jr,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr){var cn=12*Q;return this.int16[cn+0]=he,this.int16[cn+1]=ye,this.int16[cn+2]=Te,this.int16[cn+3]=Ye,this.uint16[cn+4]=lt,this.uint16[cn+5]=dt,this.uint16[cn+6]=At,this.uint16[cn+7]=Vt,this.int16[cn+8]=ur,this.int16[cn+9]=nr,this.int16[cn+10]=Pr,this.int16[cn+11]=jr,Q},L}(ea);ni.prototype.bytesPerElement=24,Wa("StructArrayLayout4i4ui4i24",ni);var Kn=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Q,he,ye)},L.prototype.emplace=function(Q,he,ye,Te){var Ye=3*Q;return this.float32[Ye+0]=he,this.float32[Ye+1]=ye,this.float32[Ye+2]=Te,Q},L}(ea);Kn.prototype.bytesPerElement=12,Wa("StructArrayLayout3f12",Kn);var Hn=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q){var he=this.length;return this.resize(he+1),this.emplace(he,Q)},L.prototype.emplace=function(Q,he){var ye=1*Q;return this.uint32[ye+0]=he,Q},L}(ea);Hn.prototype.bytesPerElement=4,Wa("StructArrayLayout1ul4",Hn);var Va=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt,dt,At,Vt){var ur=this.length;return this.resize(ur+1),this.emplace(ur,Q,he,ye,Te,Ye,lt,dt,At,Vt)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur){var nr=10*Q,Pr=5*Q;return this.int16[nr+0]=he,this.int16[nr+1]=ye,this.int16[nr+2]=Te,this.int16[nr+3]=Ye,this.int16[nr+4]=lt,this.int16[nr+5]=dt,this.uint32[Pr+3]=At,this.uint16[nr+8]=Vt,this.uint16[nr+9]=ur,Q},L}(ea);Va.prototype.bytesPerElement=20,Wa("StructArrayLayout6i1ul2ui20",Va);var Pa=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt){var dt=this.length;return this.resize(dt+1),this.emplace(dt,Q,he,ye,Te,Ye,lt)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt){var At=6*Q;return this.int16[At+0]=he,this.int16[At+1]=ye,this.int16[At+2]=Te,this.int16[At+3]=Ye,this.int16[At+4]=lt,this.int16[At+5]=dt,Q},L}(ea);Pa.prototype.bytesPerElement=12,Wa("StructArrayLayout2i2i2i12",Pa);var ca=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Q,he,ye,Te,Ye)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt){var dt=4*Q,At=8*Q;return this.float32[dt+0]=he,this.float32[dt+1]=ye,this.float32[dt+2]=Te,this.int16[At+6]=Ye,this.int16[At+7]=lt,Q},L}(ea);ca.prototype.bytesPerElement=16,Wa("StructArrayLayout2f1f2i16",ca);var oa=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,Q,he,ye,Te)},L.prototype.emplace=function(Q,he,ye,Te,Ye){var lt=12*Q,dt=3*Q;return this.uint8[lt+0]=he,this.uint8[lt+1]=ye,this.float32[dt+1]=Te,this.float32[dt+2]=Ye,Q},L}(ea);oa.prototype.bytesPerElement=12,Wa("StructArrayLayout2ub2f12",oa);var Oa=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Q,he,ye)},L.prototype.emplace=function(Q,he,ye,Te){var Ye=3*Q;return this.uint16[Ye+0]=he,this.uint16[Ye+1]=ye,this.uint16[Ye+2]=Te,Q},L}(ea);Oa.prototype.bytesPerElement=6,Wa("StructArrayLayout3ui6",Oa);var li=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Pn,mn){var Ln=this.length;return this.resize(Ln+1),this.emplace(Ln,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Pn,mn)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Pn,mn,Ln){var Fn=24*Q,Jn=12*Q,Sa=48*Q;return this.int16[Fn+0]=he,this.int16[Fn+1]=ye,this.uint16[Fn+2]=Te,this.uint16[Fn+3]=Ye,this.uint32[Jn+2]=lt,this.uint32[Jn+3]=dt,this.uint32[Jn+4]=At,this.uint16[Fn+10]=Vt,this.uint16[Fn+11]=ur,this.uint16[Fn+12]=nr,this.float32[Jn+7]=Pr,this.float32[Jn+8]=jr,this.uint8[Sa+36]=cn,this.uint8[Sa+37]=rn,this.uint8[Sa+38]=Pn,this.uint32[Jn+10]=mn,this.int16[Fn+22]=Ln,Q},L}(ea);li.prototype.bytesPerElement=48,Wa("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",li);var xi=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Pn,mn,Ln,Fn,Jn,Sa,ma,qa,Ua,Xa,Li,ei,ri){var Ui=this.length;return this.resize(Ui+1),this.emplace(Ui,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Pn,mn,Ln,Fn,Jn,Sa,ma,qa,Ua,Xa,Li,ei,ri)},L.prototype.emplace=function(Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Pn,mn,Ln,Fn,Jn,Sa,ma,qa,Ua,Xa,Li,ei,ri,Ui){var Ti=34*Q,vo=17*Q;return this.int16[Ti+0]=he,this.int16[Ti+1]=ye,this.int16[Ti+2]=Te,this.int16[Ti+3]=Ye,this.int16[Ti+4]=lt,this.int16[Ti+5]=dt,this.int16[Ti+6]=At,this.int16[Ti+7]=Vt,this.uint16[Ti+8]=ur,this.uint16[Ti+9]=nr,this.uint16[Ti+10]=Pr,this.uint16[Ti+11]=jr,this.uint16[Ti+12]=cn,this.uint16[Ti+13]=rn,this.uint16[Ti+14]=Pn,this.uint16[Ti+15]=mn,this.uint16[Ti+16]=Ln,this.uint16[Ti+17]=Fn,this.uint16[Ti+18]=Jn,this.uint16[Ti+19]=Sa,this.uint16[Ti+20]=ma,this.uint16[Ti+21]=qa,this.uint16[Ti+22]=Ua,this.uint32[vo+12]=Xa,this.float32[vo+13]=Li,this.float32[vo+14]=ei,this.float32[vo+15]=ri,this.float32[vo+16]=Ui,Q},L}(ea);xi.prototype.bytesPerElement=68,Wa("StructArrayLayout8i15ui1ul4f68",xi);var Da=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q){var he=this.length;return this.resize(he+1),this.emplace(he,Q)},L.prototype.emplace=function(Q,he){var ye=1*Q;return this.float32[ye+0]=he,Q},L}(ea);Da.prototype.bytesPerElement=4,Wa("StructArrayLayout1f4",Da);var $a=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Q,he,ye)},L.prototype.emplace=function(Q,he,ye,Te){var Ye=3*Q;return this.int16[Ye+0]=he,this.int16[Ye+1]=ye,this.int16[Ye+2]=Te,Q},L}(ea);$a.prototype.bytesPerElement=6,Wa("StructArrayLayout3i6",$a);var gi=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Q,he,ye)},L.prototype.emplace=function(Q,he,ye,Te){var Ye=2*Q,lt=4*Q;return this.uint32[Ye+0]=he,this.uint16[lt+2]=ye,this.uint16[lt+3]=Te,Q},L}(ea);gi.prototype.bytesPerElement=8,Wa("StructArrayLayout1ul2ui8",gi);var wi=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he){var ye=this.length;return this.resize(ye+1),this.emplace(ye,Q,he)},L.prototype.emplace=function(Q,he,ye){var Te=2*Q;return this.uint16[Te+0]=he,this.uint16[Te+1]=ye,Q},L}(ea);wi.prototype.bytesPerElement=4,Wa("StructArrayLayout2ui4",wi);var ki=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q){var he=this.length;return this.resize(he+1),this.emplace(he,Q)},L.prototype.emplace=function(Q,he){var ye=1*Q;return this.uint16[ye+0]=he,Q},L}(ea);ki.prototype.bytesPerElement=2,Wa("StructArrayLayout1ui2",ki);var Po=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},L.prototype.emplaceBack=function(Q,he,ye,Te){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,Q,he,ye,Te)},L.prototype.emplace=function(Q,he,ye,Te,Ye){var lt=4*Q;return this.float32[lt+0]=he,this.float32[lt+1]=ye,this.float32[lt+2]=Te,this.float32[lt+3]=Ye,Q},L}(ea);Po.prototype.bytesPerElement=16,Wa("StructArrayLayout4f16",Po);var As=function(C){function L(){C.apply(this,arguments)}C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L;var N={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return N.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},N.x1.get=function(){return this._structArray.int16[this._pos2+2]},N.y1.get=function(){return this._structArray.int16[this._pos2+3]},N.x2.get=function(){return this._structArray.int16[this._pos2+4]},N.y2.get=function(){return this._structArray.int16[this._pos2+5]},N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY)},Object.defineProperties(L.prototype,N),L}(wa);As.prototype.size=20;var Gi=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.get=function(Q){return new As(this,Q)},L}(Va);Wa("CollisionBoxArray",Gi);var hs=function(C){function L(){C.apply(this,arguments)}C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},N.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},N.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},N.segment.get=function(){return this._structArray.uint16[this._pos2+10]},N.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},N.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},N.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},N.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},N.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},N.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},N.placedOrientation.set=function(Q){this._structArray.uint8[this._pos1+37]=Q},N.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},N.hidden.set=function(Q){this._structArray.uint8[this._pos1+38]=Q},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},N.crossTileID.set=function(Q){this._structArray.uint32[this._pos4+10]=Q},N.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(L.prototype,N),L}(wa);hs.prototype.size=48;var mo=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.get=function(Q){return new hs(this,Q)},L}(li);Wa("PlacedSymbolArray",mo);var gs=function(C){function L(){C.apply(this,arguments)}C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},N.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},N.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},N.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},N.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},N.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},N.key.get=function(){return this._structArray.uint16[this._pos2+8]},N.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},N.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},N.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},N.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},N.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},N.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},N.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},N.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},N.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},N.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},N.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},N.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},N.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},N.crossTileID.set=function(Q){this._structArray.uint32[this._pos4+12]=Q},N.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},N.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},N.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},N.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(L.prototype,N),L}(wa);gs.prototype.size=68;var hl=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.get=function(Q){return new gs(this,Q)},L}(xi);Wa("SymbolInstanceArray",hl);var Al=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.getoffsetX=function(Q){return this.float32[1*Q+0]},L}(Da);Wa("GlyphOffsetArray",Al);var Io=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.getx=function(Q){return this.int16[3*Q+0]},L.prototype.gety=function(Q){return this.int16[3*Q+1]},L.prototype.gettileUnitDistanceFromAnchor=function(Q){return this.int16[3*Q+2]},L}($a);Wa("SymbolLineVertexArray",Io);var vs=function(C){function L(){C.apply(this,arguments)}C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L;var N={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(L.prototype,N),L}(wa);vs.prototype.size=8;var Ss=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.get=function(Q){return new vs(this,Q)},L}(gi);Wa("FeatureIndexArray",Ss);var xo=ra([{name:"a_pos",components:2,type:"Int16"}],4).members,Mi=function(L){void 0===L&&(L=[]),this.segments=L};function fe(C,L){return 256*(C=s(Math.floor(C),0,255))+(L=s(Math.floor(L),0,255))}Mi.prototype.prepareSegment=function(L,N,Q,he){var ye=this.segments[this.segments.length-1];return L>Mi.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+Mi.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+L),(!ye||ye.vertexLength+L>Mi.MAX_VERTEX_ARRAY_LENGTH||ye.sortKey!==he)&&(ye={vertexOffset:N.length,primitiveOffset:Q.length,vertexLength:0,primitiveLength:0},void 0!==he&&(ye.sortKey=he),this.segments.push(ye)),ye},Mi.prototype.get=function(){return this.segments},Mi.prototype.destroy=function(){for(var L=0,N=this.segments;L<N.length;L+=1){var Q=N[L];for(var he in Q.vaos)Q.vaos[he].destroy()}},Mi.simpleSegment=function(L,N,Q,he){return new Mi([{vertexOffset:L,primitiveOffset:N,vertexLength:Q,primitiveLength:he,vaos:{},sortKey:0}])},Mi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wa("SegmentVector",Mi);var G=ra([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ce=T(function(C){function L(N,Q){var he,ye,Te,Ye,lt,dt,At,Vt;for(he=3&N.length,ye=N.length-he,Te=Q,lt=3432918353,dt=461845907,Vt=0;Vt<ye;)At=255&N.charCodeAt(Vt)|(255&N.charCodeAt(++Vt))<<8|(255&N.charCodeAt(++Vt))<<16|(255&N.charCodeAt(++Vt))<<24,++Vt,Te=27492+(65535&(Ye=5*(65535&(Te=(Te^=At=(65535&(At=(At=(65535&At)*lt+(((At>>>16)*lt&65535)<<16)&4294967295)<<15|At>>>17))*dt+(((At>>>16)*dt&65535)<<16)&4294967295)<<13|Te>>>19))+((5*(Te>>>16)&65535)<<16)&4294967295))+((58964+(Ye>>>16)&65535)<<16);switch(At=0,he){case 3:At^=(255&N.charCodeAt(Vt+2))<<16;case 2:At^=(255&N.charCodeAt(Vt+1))<<8;case 1:Te^=At=(65535&(At=(At=(65535&(At^=255&N.charCodeAt(Vt)))*lt+(((At>>>16)*lt&65535)<<16)&4294967295)<<15|At>>>17))*dt+(((At>>>16)*dt&65535)<<16)&4294967295}return Te^=N.length,Te=2246822507*(65535&(Te^=Te>>>16))+((2246822507*(Te>>>16)&65535)<<16)&4294967295,Te=3266489909*(65535&(Te^=Te>>>13))+((3266489909*(Te>>>16)&65535)<<16)&4294967295,(Te^=Te>>>16)>>>0}C.exports=L}),Z=T(function(C){function L(N,Q){for(var Ye,he=N.length,ye=Q^he,Te=0;he>=4;)Ye=1540483477*(65535&(Ye=255&N.charCodeAt(Te)|(255&N.charCodeAt(++Te))<<8|(255&N.charCodeAt(++Te))<<16|(255&N.charCodeAt(++Te))<<24))+((1540483477*(Ye>>>16)&65535)<<16),ye=1540483477*(65535&ye)+((1540483477*(ye>>>16)&65535)<<16)^(Ye=1540483477*(65535&(Ye^=Ye>>>24))+((1540483477*(Ye>>>16)&65535)<<16)),he-=4,++Te;switch(he){case 3:ye^=(255&N.charCodeAt(Te+2))<<16;case 2:ye^=(255&N.charCodeAt(Te+1))<<8;case 1:ye=1540483477*(65535&(ye^=255&N.charCodeAt(Te)))+((1540483477*(ye>>>16)&65535)<<16)}return ye=1540483477*(65535&(ye^=ye>>>13))+((1540483477*(ye>>>16)&65535)<<16),(ye^=ye>>>15)>>>0}C.exports=L}),ve=ce,Ee=ce,Ae=Z;ve.murmur3=Ee,ve.murmur2=Ae;var Ge=function(){this.ids=[],this.positions=[],this.indexed=!1};Ge.prototype.add=function(L,N,Q,he){this.ids.push(xt(L)),this.positions.push(N,Q,he)},Ge.prototype.getPositions=function(L){for(var N=xt(L),Q=0,he=this.ids.length-1;Q<he;){var ye=Q+he>>1;this.ids[ye]>=N?he=ye:Q=ye+1}for(var Te=[];this.ids[Q]===N;){var Ye=this.positions[3*Q],lt=this.positions[3*Q+1],dt=this.positions[3*Q+2];Te.push({index:Ye,start:lt,end:dt}),Q++}return Te},Ge.serialize=function(L,N){var Q=new Float64Array(L.ids),he=new Uint32Array(L.positions);return Wt(Q,he,0,Q.length-1),N&&N.push(Q.buffer,he.buffer),{ids:Q,positions:he}},Ge.deserialize=function(L){var N=new Ge;return N.ids=L.ids,N.positions=L.positions,N.indexed=!0,N};var ot=Math.pow(2,53)-1;function xt(C){var L=+C;return!isNaN(L)&&L<=ot?L:ve(String(C))}function Wt(C,L,N,Q){for(;N<Q;){for(var he=C[N+Q>>1],ye=N-1,Te=Q+1;;){do{ye++}while(C[ye]<he);do{Te--}while(C[Te]>he);if(ye>=Te)break;ar(C,ye,Te),ar(L,3*ye,3*Te),ar(L,3*ye+1,3*Te+1),ar(L,3*ye+2,3*Te+2)}Te-N<Q-Te?(Wt(C,L,N,Te),N=Te+1):(Wt(C,L,Te+1,Q),Q=Te)}}function ar(C,L,N){var Q=C[L];C[L]=C[N],C[N]=Q}Wa("FeaturePositionMap",Ge);var Yt=function(L,N){this.gl=L.gl,this.location=N},Tt=function(C){function L(N,Q){C.call(this,N,Q),this.current=0}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.set=function(Q){this.current!==Q&&(this.current=Q,this.gl.uniform1i(this.location,Q))},L}(Yt),_t=function(C){function L(N,Q){C.call(this,N,Q),this.current=0}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.set=function(Q){this.current!==Q&&(this.current=Q,this.gl.uniform1f(this.location,Q))},L}(Yt),Nt=function(C){function L(N,Q){C.call(this,N,Q),this.current=[0,0]}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.set=function(Q){(Q[0]!==this.current[0]||Q[1]!==this.current[1])&&(this.current=Q,this.gl.uniform2f(this.location,Q[0],Q[1]))},L}(Yt),rr=function(C){function L(N,Q){C.call(this,N,Q),this.current=[0,0,0]}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.set=function(Q){(Q[0]!==this.current[0]||Q[1]!==this.current[1]||Q[2]!==this.current[2])&&(this.current=Q,this.gl.uniform3f(this.location,Q[0],Q[1],Q[2]))},L}(Yt),dr=function(C){function L(N,Q){C.call(this,N,Q),this.current=[0,0,0,0]}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.set=function(Q){(Q[0]!==this.current[0]||Q[1]!==this.current[1]||Q[2]!==this.current[2]||Q[3]!==this.current[3])&&(this.current=Q,this.gl.uniform4f(this.location,Q[0],Q[1],Q[2],Q[3]))},L}(Yt),pr=function(C){function L(N,Q){C.call(this,N,Q),this.current=ji.transparent}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.set=function(Q){(Q.r!==this.current.r||Q.g!==this.current.g||Q.b!==this.current.b||Q.a!==this.current.a)&&(this.current=Q,this.gl.uniform4f(this.location,Q.r,Q.g,Q.b,Q.a))},L}(Yt),Lr=new Float32Array(16),Tr=function(C){function L(N,Q){C.call(this,N,Q),this.current=Lr}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.set=function(Q){if(Q[12]!==this.current[12]||Q[0]!==this.current[0])return this.current=Q,void this.gl.uniformMatrix4fv(this.location,!1,Q);for(var he=1;he<16;he++)if(Q[he]!==this.current[he]){this.current=Q,this.gl.uniformMatrix4fv(this.location,!1,Q);break}},L}(Yt);function mr(C){return[fe(255*C.r,255*C.g),fe(255*C.b,255*C.a)]}var Er=function(L,N,Q){this.value=L,this.uniformNames=N.map(function(he){return"u_"+he}),this.type=Q};Er.prototype.setUniform=function(L,N,Q){L.set(Q.constantOr(this.value))},Er.prototype.getBinding=function(L,N,Q){return"color"===this.type?new pr(L,N):new _t(L,N)};var fr=function(L,N){this.uniformNames=N.map(function(Q){return"u_"+Q}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};fr.prototype.setConstantPatternPositions=function(L,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=L.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=L.tlbr},fr.prototype.setUniform=function(L,N,Q,he){var ye="u_pattern_to"===he?this.patternTo:"u_pattern_from"===he?this.patternFrom:"u_pixel_ratio_to"===he?this.pixelRatioTo:"u_pixel_ratio_from"===he?this.pixelRatioFrom:null;ye&&L.set(ye)},fr.prototype.getBinding=function(L,N,Q){return"u_pattern"===Q.substr(0,9)?new dr(L,N):new _t(L,N)};var Br=function(L,N,Q,he){this.expression=L,this.type=Q,this.maxValue=0,this.paintVertexAttributes=N.map(function(ye){return{name:"a_"+ye,type:"Float32",components:"color"===Q?2:1,offset:0}}),this.paintVertexArray=new he};Br.prototype.populatePaintArray=function(L,N,Q,he,ye){var Te=this.paintVertexArray.length,Ye=this.expression.evaluate(new Ha(0),N,{},he,[],ye);this.paintVertexArray.resize(L),this._setPaintValue(Te,L,Ye)},Br.prototype.updatePaintArray=function(L,N,Q,he){var ye=this.expression.evaluate({zoom:0},Q,he);this._setPaintValue(L,N,ye)},Br.prototype._setPaintValue=function(L,N,Q){if("color"===this.type)for(var he=mr(Q),ye=L;ye<N;ye++)this.paintVertexArray.emplace(ye,he[0],he[1]);else{for(var Te=L;Te<N;Te++)this.paintVertexArray.emplace(Te,Q);this.maxValue=Math.max(this.maxValue,Math.abs(Q))}},Br.prototype.upload=function(L){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=L.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Br.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var $r=function(L,N,Q,he,ye,Te){this.expression=L,this.uniformNames=N.map(function(Ye){return"u_"+Ye+"_t"}),this.type=Q,this.useIntegerZoom=he,this.zoom=ye,this.maxValue=0,this.paintVertexAttributes=N.map(function(Ye){return{name:"a_"+Ye,type:"Float32",components:"color"===Q?4:2,offset:0}}),this.paintVertexArray=new Te};$r.prototype.populatePaintArray=function(L,N,Q,he,ye){var Te=this.expression.evaluate(new Ha(this.zoom),N,{},he,[],ye),Ye=this.expression.evaluate(new Ha(this.zoom+1),N,{},he,[],ye),lt=this.paintVertexArray.length;this.paintVertexArray.resize(L),this._setPaintValue(lt,L,Te,Ye)},$r.prototype.updatePaintArray=function(L,N,Q,he){var ye=this.expression.evaluate({zoom:this.zoom},Q,he),Te=this.expression.evaluate({zoom:this.zoom+1},Q,he);this._setPaintValue(L,N,ye,Te)},$r.prototype._setPaintValue=function(L,N,Q,he){if("color"===this.type)for(var ye=mr(Q),Te=mr(he),Ye=L;Ye<N;Ye++)this.paintVertexArray.emplace(Ye,ye[0],ye[1],Te[0],Te[1]);else{for(var lt=L;lt<N;lt++)this.paintVertexArray.emplace(lt,Q,he);this.maxValue=Math.max(this.maxValue,Math.abs(Q),Math.abs(he))}},$r.prototype.upload=function(L){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=L.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},$r.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},$r.prototype.setUniform=function(L,N){var Q=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,he=s(this.expression.interpolationFactor(Q,this.zoom,this.zoom+1),0,1);L.set(he)},$r.prototype.getBinding=function(L,N,Q){return new _t(L,N)};var ln=function(L,N,Q,he,ye,Te){this.expression=L,this.type=N,this.useIntegerZoom=Q,this.zoom=he,this.layerId=Te,this.zoomInPaintVertexArray=new ye,this.zoomOutPaintVertexArray=new ye};ln.prototype.populatePaintArray=function(L,N,Q){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(L),this.zoomOutPaintVertexArray.resize(L),this._setPaintValues(he,L,N.patterns&&N.patterns[this.layerId],Q)},ln.prototype.updatePaintArray=function(L,N,Q,he,ye){this._setPaintValues(L,N,Q.patterns&&Q.patterns[this.layerId],ye)},ln.prototype._setPaintValues=function(L,N,Q,he){if(he&&Q){var ye=Q.min,Te=Q.mid,Ye=Q.max,lt=he[ye],dt=he[Te],At=he[Ye];if(lt&&dt&&At)for(var Vt=L;Vt<N;Vt++)this.zoomInPaintVertexArray.emplace(Vt,dt.tl[0],dt.tl[1],dt.br[0],dt.br[1],lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],dt.pixelRatio,lt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Vt,dt.tl[0],dt.tl[1],dt.br[0],dt.br[1],At.tl[0],At.tl[1],At.br[0],At.br[1],dt.pixelRatio,At.pixelRatio)}},ln.prototype.upload=function(L){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=L.createVertexBuffer(this.zoomInPaintVertexArray,G.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=L.createVertexBuffer(this.zoomOutPaintVertexArray,G.members,this.expression.isStateDependent))},ln.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var zn=function(L,N,Q){this.binders={},this._buffers=[];var he=[];for(var ye in L.paint._values)if(Q(ye)){var Te=L.paint.get(ye);if(Te instanceof Pi&&Mr(Te.property.specification)){var Ye=Nn(ye,L.type),lt=Te.value,dt=Te.property.specification.type,At=Te.property.useIntegerZoom,Vt=Te.property.specification["property-type"],ur="cross-faded"===Vt||"cross-faded-data-driven"===Vt;if("constant"===lt.kind)this.binders[ye]=ur?new fr(lt.value,Ye):new Er(lt.value,Ye,dt),he.push("/u_"+ye);else if("source"===lt.kind||ur){var nr=aa(ye,dt,"source");this.binders[ye]=ur?new ln(lt,dt,At,N,nr,L.id):new Br(lt,Ye,dt,nr),he.push("/a_"+ye)}else{var Pr=aa(ye,dt,"composite");this.binders[ye]=new $r(lt,Ye,dt,At,N,Pr),he.push("/z_"+ye)}}}this.cacheKey=he.sort().join("")};zn.prototype.getMaxValue=function(L){var N=this.binders[L];return N instanceof Br||N instanceof $r?N.maxValue:0},zn.prototype.populatePaintArrays=function(L,N,Q,he,ye){for(var Te in this.binders){var Ye=this.binders[Te];(Ye instanceof Br||Ye instanceof $r||Ye instanceof ln)&&Ye.populatePaintArray(L,N,Q,he,ye)}},zn.prototype.setConstantPatternPositions=function(L,N){for(var Q in this.binders){var he=this.binders[Q];he instanceof fr&&he.setConstantPatternPositions(L,N)}},zn.prototype.updatePaintArrays=function(L,N,Q,he,ye){var Te=!1;for(var Ye in L)for(var dt=0,At=N.getPositions(Ye);dt<At.length;dt+=1){var Vt=At[dt],ur=Q.feature(Vt.index);for(var nr in this.binders){var Pr=this.binders[nr];if((Pr instanceof Br||Pr instanceof $r||Pr instanceof ln)&&!0===Pr.expression.isStateDependent){var jr=he.paint.get(nr);Pr.expression=jr.value,Pr.updatePaintArray(Vt.start,Vt.end,ur,L[Ye],ye),Te=!0}}}return Te},zn.prototype.defines=function(){var L=[];for(var N in this.binders){var Q=this.binders[N];(Q instanceof Er||Q instanceof fr)&&L.push.apply(L,Q.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return L},zn.prototype.getBinderAttributes=function(){var L=[];for(var N in this.binders){var Q=this.binders[N];if(Q instanceof Br||Q instanceof $r)for(var he=0;he<Q.paintVertexAttributes.length;he++)L.push(Q.paintVertexAttributes[he].name);else if(Q instanceof ln)for(var ye=0;ye<G.members.length;ye++)L.push(G.members[ye].name)}return L},zn.prototype.getBinderUniforms=function(){var L=[];for(var N in this.binders){var Q=this.binders[N];if(Q instanceof Er||Q instanceof fr||Q instanceof $r)for(var he=0,ye=Q.uniformNames;he<ye.length;he+=1){var Te=ye[he];L.push(Te)}}return L},zn.prototype.getPaintVertexBuffers=function(){return this._buffers},zn.prototype.getUniforms=function(L,N){var Q=[];for(var he in this.binders){var ye=this.binders[he];if(ye instanceof Er||ye instanceof fr||ye instanceof $r)for(var Te=0,Ye=ye.uniformNames;Te<Ye.length;Te+=1){var lt=Ye[Te];if(N[lt]){var dt=ye.getBinding(L,N[lt],lt);Q.push({name:lt,property:he,binding:dt})}}}return Q},zn.prototype.setUniforms=function(L,N,Q,he){for(var ye=0,Te=N;ye<Te.length;ye+=1){var Ye=Te[ye],lt=Ye.name,dt=Ye.property,At=Ye.binding;this.binders[dt].setUniform(At,he,Q.get(dt),lt)}},zn.prototype.updatePaintBuffers=function(L){for(var N in this._buffers=[],this.binders){var Q=this.binders[N];if(L&&Q instanceof ln){var he=2===L.fromScale?Q.zoomInPaintVertexBuffer:Q.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else(Q instanceof Br||Q instanceof $r)&&Q.paintVertexBuffer&&this._buffers.push(Q.paintVertexBuffer)}},zn.prototype.upload=function(L){for(var N in this.binders){var Q=this.binders[N];(Q instanceof Br||Q instanceof $r||Q instanceof ln)&&Q.upload(L)}this.updatePaintBuffers()},zn.prototype.destroy=function(){for(var L in this.binders){var N=this.binders[L];(N instanceof Br||N instanceof $r||N instanceof ln)&&N.destroy()}};var En=function(L,N,Q){void 0===Q&&(Q=function(){return!0}),this.programConfigurations={};for(var he=0,ye=L;he<ye.length;he+=1){var Te=ye[he];this.programConfigurations[Te.id]=new zn(Te,N,Q)}this.needsUpload=!1,this._featureMap=new Ge,this._bufferOffset=0};function Nn(C,L){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[C]||[C.replace(L+"-","").replace(/-/g,"_")]}function ya(C){return{"line-pattern":{source:ga,composite:ga},"fill-pattern":{source:ga,composite:ga},"fill-extrusion-pattern":{source:ga,composite:ga}}[C]}function aa(C,L,N){var Q={color:{source:ka,composite:Po},number:{source:Da,composite:ka}},he=ya(C);return he&&he[N]||Q[L][N]}En.prototype.populatePaintArrays=function(L,N,Q,he,ye,Te){for(var Ye in this.programConfigurations)this.programConfigurations[Ye].populatePaintArrays(L,N,he,ye,Te);void 0!==N.id&&this._featureMap.add(N.id,Q,this._bufferOffset,L),this._bufferOffset=L,this.needsUpload=!0},En.prototype.updatePaintArrays=function(L,N,Q,he){for(var ye=0,Te=Q;ye<Te.length;ye+=1){var Ye=Te[ye];this.needsUpload=this.programConfigurations[Ye.id].updatePaintArrays(L,this._featureMap,N,Ye,he)||this.needsUpload}},En.prototype.get=function(L){return this.programConfigurations[L]},En.prototype.upload=function(L){if(this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(L);this.needsUpload=!1}},En.prototype.destroy=function(){for(var L in this.programConfigurations)this.programConfigurations[L].destroy()},Wa("ConstantBinder",Er),Wa("CrossFadedConstantBinder",fr),Wa("SourceExpressionBinder",Br),Wa("CrossFadedCompositeBinder",ln),Wa("CompositeExpressionBinder",$r),Wa("ProgramConfiguration",zn,{omit:["_buffers"]}),Wa("ProgramConfigurationSet",En);var On=8192,Zn=15,Yn=Math.pow(2,Zn-1)-1,ua=-Yn-1;function _a(C){for(var L=On/C.extent,N=C.loadGeometry(),Q=0;Q<N.length;Q++)for(var he=N[Q],ye=0;ye<he.length;ye++){var Te=he[ye],Ye=Math.round(Te.x*L),lt=Math.round(Te.y*L);Te.x=s(Ye,ua,Yn),Te.y=s(lt,ua,Yn),(Ye<Te.x||Ye>Te.x+1||lt<Te.y||lt>Te.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return N}function Ci(C,L){return{type:C.type,id:C.id,properties:C.properties,geometry:L?_a(C):[]}}function Ei(C,L,N,Q,he){C.emplaceBack(2*L+(Q+1)/2,2*N+(he+1)/2)}var qi=function(L){this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=L.index,this.hasPattern=!1,this.layoutVertexArray=new kn,this.indexArray=new Oa,this.segments=new Mi,this.programConfigurations=new En(L.layers,L.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};function di(C,L){for(var N=0;N<C.length;N++)if(Sl(L,C[N]))return!0;for(var Q=0;Q<L.length;Q++)if(Sl(C,L[Q]))return!0;return!!Ku(C,L)}function Fi(C,L,N){return!(!Sl(C,L)&&!wf(L,C,N))}function ho(C,L){if(1===C.length)return Tf(L,C[0]);for(var N=0;N<L.length;N++)for(var Q=L[N],he=0;he<Q.length;he++)if(Sl(C,Q[he]))return!0;for(var ye=0;ye<C.length;ye++)if(Tf(L,C[ye]))return!0;for(var Te=0;Te<L.length;Te++)if(Ku(C,L[Te]))return!0;return!1}function Ko(C,L,N){for(var Q=0;Q<L.length;Q++){var he=L[Q];if(C.length>=3)for(var ye=0;ye<he.length;ye++)if(Sl(C,he[ye]))return!0;if(uu(C,he,N))return!0}return!1}function uu(C,L,N){if(C.length>1){if(Ku(C,L))return!0;for(var Q=0;Q<L.length;Q++)if(wf(L[Q],C,N))return!0}for(var he=0;he<C.length;he++)if(wf(C[he],L,N))return!0;return!1}function Ku(C,L){if(0===C.length||0===L.length)return!1;for(var N=0;N<C.length-1;N++)for(var Q=C[N],he=C[N+1],ye=0;ye<L.length-1;ye++)if(Iu(Q,he,L[ye],L[ye+1]))return!0;return!1}function Iu(C,L,N,Q){return U(C,N,Q)!==U(L,N,Q)&&U(C,L,N)!==U(C,L,Q)}function wf(C,L,N){var Q=N*N;if(1===L.length)return C.distSqr(L[0])<Q;for(var he=1;he<L.length;he++)if(kf(C,L[he-1],L[he])<Q)return!0;return!1}function kf(C,L,N){var Q=L.distSqr(N);if(0===Q)return C.distSqr(L);var he=((C.x-L.x)*(N.x-L.x)+(C.y-L.y)*(N.y-L.y))/Q;return he<0?C.distSqr(L):he>1?C.distSqr(N):C.distSqr(N.sub(L)._mult(he)._add(L))}function Tf(C,L){for(var Q,he,ye,N=!1,Te=0;Te<C.length;Te++)for(var Ye=0,lt=(Q=C[Te]).length-1;Ye<Q.length;lt=Ye++)he=Q[Ye],ye=Q[lt],he.y>L.y!=ye.y>L.y&&L.x<(ye.x-he.x)*(L.y-he.y)/(ye.y-he.y)+he.x&&(N=!N);return N}function Sl(C,L){for(var N=!1,Q=0,he=C.length-1;Q<C.length;he=Q++){var ye=C[Q],Te=C[he];ye.y>L.y!=Te.y>L.y&&L.x<(Te.x-ye.x)*(L.y-ye.y)/(Te.y-ye.y)+ye.x&&(N=!N)}return N}function Af(C,L,N,Q,he){for(var ye=0,Te=C;ye<Te.length;ye+=1){var Ye=Te[ye];if(L<=Ye.x&&N<=Ye.y&&Q>=Ye.x&&he>=Ye.y)return!0}var lt=[new a(L,N),new a(L,he),new a(Q,he),new a(Q,N)];if(C.length>2)for(var dt=0,At=lt;dt<At.length;dt+=1)if(Sl(C,At[dt]))return!0;for(var ur=0;ur<C.length-1;ur++)if(fu(C[ur],C[ur+1],lt))return!0;return!1}function fu(C,L,N){var Q=N[0],he=N[2];if(C.x<Q.x&&L.x<Q.x||C.x>he.x&&L.x>he.x||C.y<Q.y&&L.y<Q.y||C.y>he.y&&L.y>he.y)return!1;var ye=U(C,L,N[0]);return ye!==U(C,L,N[1])||ye!==U(C,L,N[2])||ye!==U(C,L,N[3])}function Hl(C,L,N){var Q=L.paint.get(C).value;return"constant"===Q.kind?Q.value:N.programConfigurations.get(L.id).getMaxValue(C)}function Ju(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function _f(C,L,N,Q,he){if(!L[0]&&!L[1])return C;var ye=a.convert(L)._mult(he);"viewport"===N&&ye._rotate(-Q);for(var Te=[],Ye=0;Ye<C.length;Ye++){var lt=C[Ye];Te.push(lt.sub(ye))}return Te}qi.prototype.populate=function(L,N,Q){var he=this.layers[0],ye=[],Te=null;"circle"===he.type&&(Te=he.layout.get("circle-sort-key"));for(var Ye=0,lt=L;Ye<lt.length;Ye+=1){var dt=lt[Ye],At=dt.feature,Vt=dt.id,ur=dt.index,nr=dt.sourceLayerIndex,Pr=this.layers[0]._featureFilter.needGeometry,jr=Ci(At,Pr);if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),jr,Q)){var cn=Te?Te.evaluate(jr,{},Q):void 0,rn={id:Vt,properties:At.properties,type:At.type,sourceLayerIndex:nr,index:ur,geometry:Pr?jr.geometry:_a(At),patterns:{},sortKey:cn};ye.push(rn)}}Te&&ye.sort(function(Ua,Xa){return Ua.sortKey-Xa.sortKey});for(var Pn=0,mn=ye;Pn<mn.length;Pn+=1){var Ln=mn[Pn],Fn=Ln,Jn=Fn.geometry,Sa=Fn.index,ma=Fn.sourceLayerIndex,qa=L[Sa].feature;this.addFeature(Ln,Jn,Sa,Q),N.featureIndex.insert(qa,Jn,Sa,ma,this.index)}},qi.prototype.update=function(L,N,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,Q)},qi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qi.prototype.upload=function(L){this.uploaded||(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,xo),this.indexBuffer=L.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(L),this.uploaded=!0},qi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qi.prototype.addFeature=function(L,N,Q,he){for(var ye=0,Te=N;ye<Te.length;ye+=1)for(var lt=0,dt=Te[ye];lt<dt.length;lt+=1){var At=dt[lt],Vt=At.x,ur=At.y;if(!(Vt<0||Vt>=On||ur<0||ur>=On)){var nr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,L.sortKey),Pr=nr.vertexLength;Ei(this.layoutVertexArray,Vt,ur,-1,-1),Ei(this.layoutVertexArray,Vt,ur,1,-1),Ei(this.layoutVertexArray,Vt,ur,1,1),Ei(this.layoutVertexArray,Vt,ur,-1,1),this.indexArray.emplaceBack(Pr,Pr+1,Pr+2),this.indexArray.emplaceBack(Pr,Pr+3,Pr+2),nr.vertexLength+=4,nr.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,Q,{},he)},Wa("CircleBucket",qi,{omit:["layers"]});var Qu=new xn({"circle-sort-key":new wr(In.layout_circle["circle-sort-key"])}),$f={paint:new xn({"circle-radius":new wr(In.paint_circle["circle-radius"]),"circle-color":new wr(In.paint_circle["circle-color"]),"circle-blur":new wr(In.paint_circle["circle-blur"]),"circle-opacity":new wr(In.paint_circle["circle-opacity"]),"circle-translate":new Et(In.paint_circle["circle-translate"]),"circle-translate-anchor":new Et(In.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Et(In.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Et(In.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wr(In.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wr(In.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wr(In.paint_circle["circle-stroke-opacity"])}),layout:Qu},Ks=typeof Float32Array<"u"?Float32Array:Array;function ac(){var C=new Ks(4);return Ks!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C}function uc(C,L,N){var Q=L[0],he=L[1],ye=L[2],Te=L[3],Ye=Math.sin(N),lt=Math.cos(N);return C[0]=Q*lt+ye*Ye,C[1]=he*lt+Te*Ye,C[2]=Q*-Ye+ye*lt,C[3]=he*-Ye+Te*lt,C}function vl(){var C=new Ks(9);return Ks!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[5]=0,C[6]=0,C[7]=0),C[0]=1,C[4]=1,C[8]=1,C}function ic(C,L){var N=Math.sin(L),Q=Math.cos(L);return C[0]=Q,C[1]=N,C[2]=0,C[3]=-N,C[4]=Q,C[5]=0,C[6]=0,C[7]=0,C[8]=1,C}function oc(){var C=new Ks(16);return Ks!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C}function pc(C){var L=new Ks(16);return L[0]=C[0],L[1]=C[1],L[2]=C[2],L[3]=C[3],L[4]=C[4],L[5]=C[5],L[6]=C[6],L[7]=C[7],L[8]=C[8],L[9]=C[9],L[10]=C[10],L[11]=C[11],L[12]=C[12],L[13]=C[13],L[14]=C[14],L[15]=C[15],L}function me(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function Me(C,L){var N=L[0],Q=L[1],he=L[2],ye=L[3],Te=L[4],Ye=L[5],lt=L[6],dt=L[7],At=L[8],Vt=L[9],ur=L[10],nr=L[11],Pr=L[12],jr=L[13],cn=L[14],rn=L[15],Pn=N*Ye-Q*Te,mn=N*lt-he*Te,Ln=N*dt-ye*Te,Fn=Q*lt-he*Ye,Jn=Q*dt-ye*Ye,Sa=he*dt-ye*lt,ma=At*jr-Vt*Pr,qa=At*cn-ur*Pr,Ua=At*rn-nr*Pr,Xa=Vt*cn-ur*jr,Li=Vt*rn-nr*jr,ei=ur*rn-nr*cn,ri=Pn*ei-mn*Li+Ln*Xa+Fn*Ua-Jn*qa+Sa*ma;return ri?(ri=1/ri,C[0]=(Ye*ei-lt*Li+dt*Xa)*ri,C[1]=(he*Li-Q*ei-ye*Xa)*ri,C[2]=(jr*Sa-cn*Jn+rn*Fn)*ri,C[3]=(ur*Jn-Vt*Sa-nr*Fn)*ri,C[4]=(lt*Ua-Te*ei-dt*qa)*ri,C[5]=(N*ei-he*Ua+ye*qa)*ri,C[6]=(cn*Ln-Pr*Sa-rn*mn)*ri,C[7]=(At*Sa-ur*Ln+nr*mn)*ri,C[8]=(Te*Li-Ye*Ua+dt*ma)*ri,C[9]=(Q*Ua-N*Li-ye*ma)*ri,C[10]=(Pr*Jn-jr*Ln+rn*Pn)*ri,C[11]=(Vt*Ln-At*Jn-nr*Pn)*ri,C[12]=(Ye*qa-Te*Xa-lt*ma)*ri,C[13]=(N*Xa-Q*qa+he*ma)*ri,C[14]=(jr*mn-Pr*Fn-cn*Pn)*ri,C[15]=(At*Fn-Vt*mn+ur*Pn)*ri,C):null}function Ve(C,L,N){var Q=L[0],he=L[1],ye=L[2],Te=L[3],Ye=L[4],lt=L[5],dt=L[6],At=L[7],Vt=L[8],ur=L[9],nr=L[10],Pr=L[11],jr=L[12],cn=L[13],rn=L[14],Pn=L[15],mn=N[0],Ln=N[1],Fn=N[2],Jn=N[3];return C[0]=mn*Q+Ln*Ye+Fn*Vt+Jn*jr,C[1]=mn*he+Ln*lt+Fn*ur+Jn*cn,C[2]=mn*ye+Ln*dt+Fn*nr+Jn*rn,C[3]=mn*Te+Ln*At+Fn*Pr+Jn*Pn,mn=N[4],Ln=N[5],Fn=N[6],Jn=N[7],C[4]=mn*Q+Ln*Ye+Fn*Vt+Jn*jr,C[5]=mn*he+Ln*lt+Fn*ur+Jn*cn,C[6]=mn*ye+Ln*dt+Fn*nr+Jn*rn,C[7]=mn*Te+Ln*At+Fn*Pr+Jn*Pn,mn=N[8],Ln=N[9],Fn=N[10],Jn=N[11],C[8]=mn*Q+Ln*Ye+Fn*Vt+Jn*jr,C[9]=mn*he+Ln*lt+Fn*ur+Jn*cn,C[10]=mn*ye+Ln*dt+Fn*nr+Jn*rn,C[11]=mn*Te+Ln*At+Fn*Pr+Jn*Pn,mn=N[12],Ln=N[13],Fn=N[14],Jn=N[15],C[12]=mn*Q+Ln*Ye+Fn*Vt+Jn*jr,C[13]=mn*he+Ln*lt+Fn*ur+Jn*cn,C[14]=mn*ye+Ln*dt+Fn*nr+Jn*rn,C[15]=mn*Te+Ln*At+Fn*Pr+Jn*Pn,C}function je(C,L,N){var Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Q=N[0],he=N[1],ye=N[2];return L===C?(C[12]=L[0]*Q+L[4]*he+L[8]*ye+L[12],C[13]=L[1]*Q+L[5]*he+L[9]*ye+L[13],C[14]=L[2]*Q+L[6]*he+L[10]*ye+L[14],C[15]=L[3]*Q+L[7]*he+L[11]*ye+L[15]):(Te=L[0],Ye=L[1],lt=L[2],dt=L[3],At=L[4],Vt=L[5],ur=L[6],nr=L[7],Pr=L[8],jr=L[9],cn=L[10],rn=L[11],C[0]=Te,C[1]=Ye,C[2]=lt,C[3]=dt,C[4]=At,C[5]=Vt,C[6]=ur,C[7]=nr,C[8]=Pr,C[9]=jr,C[10]=cn,C[11]=rn,C[12]=Te*Q+At*he+Pr*ye+L[12],C[13]=Ye*Q+Vt*he+jr*ye+L[13],C[14]=lt*Q+ur*he+cn*ye+L[14],C[15]=dt*Q+nr*he+rn*ye+L[15]),C}function et(C,L,N){var Q=N[0],he=N[1],ye=N[2];return C[0]=L[0]*Q,C[1]=L[1]*Q,C[2]=L[2]*Q,C[3]=L[3]*Q,C[4]=L[4]*he,C[5]=L[5]*he,C[6]=L[6]*he,C[7]=L[7]*he,C[8]=L[8]*ye,C[9]=L[9]*ye,C[10]=L[10]*ye,C[11]=L[11]*ye,C[12]=L[12],C[13]=L[13],C[14]=L[14],C[15]=L[15],C}function it(C,L,N){var Q=Math.sin(N),he=Math.cos(N),ye=L[4],Te=L[5],Ye=L[6],lt=L[7],dt=L[8],At=L[9],Vt=L[10],ur=L[11];return L!==C&&(C[0]=L[0],C[1]=L[1],C[2]=L[2],C[3]=L[3],C[12]=L[12],C[13]=L[13],C[14]=L[14],C[15]=L[15]),C[4]=ye*he+dt*Q,C[5]=Te*he+At*Q,C[6]=Ye*he+Vt*Q,C[7]=lt*he+ur*Q,C[8]=dt*he-ye*Q,C[9]=At*he-Te*Q,C[10]=Vt*he-Ye*Q,C[11]=ur*he-lt*Q,C}function vt(C,L,N){var Q=Math.sin(N),he=Math.cos(N),ye=L[0],Te=L[1],Ye=L[2],lt=L[3],dt=L[4],At=L[5],Vt=L[6],ur=L[7];return L!==C&&(C[8]=L[8],C[9]=L[9],C[10]=L[10],C[11]=L[11],C[12]=L[12],C[13]=L[13],C[14]=L[14],C[15]=L[15]),C[0]=ye*he+dt*Q,C[1]=Te*he+At*Q,C[2]=Ye*he+Vt*Q,C[3]=lt*he+ur*Q,C[4]=dt*he-ye*Q,C[5]=At*he-Te*Q,C[6]=Vt*he-Ye*Q,C[7]=ur*he-lt*Q,C}function Ht(C,L,N,Q,he){var Te,ye=1/Math.tan(L/2);return C[0]=ye/N,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=ye,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,null!=he&&he!==1/0?(Te=1/(Q-he),C[10]=(he+Q)*Te,C[14]=2*he*Q*Te):(C[10]=-1,C[14]=-2*Q),C}function Qt(C,L,N,Q,he,ye,Te){var Ye=1/(L-N),lt=1/(Q-he),dt=1/(ye-Te);return C[0]=-2*Ye,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*lt,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*dt,C[11]=0,C[12]=(L+N)*Ye,C[13]=(he+Q)*lt,C[14]=(Te+ye)*dt,C[15]=1,C}Math.hypot||(Math.hypot=function(){for(var C=arguments,L=0,N=arguments.length;N--;)L+=C[N]*C[N];return Math.sqrt(L)});var Zt=Ve;function jt(){var C=new Ks(3);return Ks!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0),C}function gr(C){var L=new Ks(3);return L[0]=C[0],L[1]=C[1],L[2]=C[2],L}function Ar(C,L,N){return C[0]=L[0]+N[0],C[1]=L[1]+N[1],C[2]=L[2]+N[2],C}function Fr(C,L,N){return C[0]=L[0]-N[0],C[1]=L[1]-N[1],C[2]=L[2]-N[2],C}function Xr(C,L,N){return C[0]=L[0]*N,C[1]=L[1]*N,C[2]=L[2]*N,C}function pn(C,L){var N=L[0],Q=L[1],he=L[2],ye=N*N+Q*Q+he*he;return ye>0&&(ye=1/Math.sqrt(ye)),C[0]=L[0]*ye,C[1]=L[1]*ye,C[2]=L[2]*ye,C}function Cn(C,L){return C[0]*L[0]+C[1]*L[1]+C[2]*L[2]}function qn(C,L,N){var Q=L[0],he=L[1],ye=L[2],Te=N[0],Ye=N[1],lt=N[2];return C[0]=he*lt-ye*Ye,C[1]=ye*Te-Q*lt,C[2]=Q*Ye-he*Te,C}function la(C,L,N){var Q=L[0],he=L[1],ye=L[2];return C[0]=Q*N[0]+he*N[3]+ye*N[6],C[1]=Q*N[1]+he*N[4]+ye*N[7],C[2]=Q*N[2]+he*N[5]+ye*N[8],C}var Ma=Fr;function za(){var C=new Ks(4);return Ks!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0,C[3]=0),C}function ci(C,L,N){return C[0]=L[0]*N,C[1]=L[1]*N,C[2]=L[2]*N,C[3]=L[3]*N,C}function Di(C,L){return C[0]*L[0]+C[1]*L[1]+C[2]*L[2]+C[3]*L[3]}function zi(C,L,N){var Q=L[0],he=L[1],ye=L[2],Te=L[3];return C[0]=N[0]*Q+N[4]*he+N[8]*ye+N[12]*Te,C[1]=N[1]*Q+N[5]*he+N[9]*ye+N[13]*Te,C[2]=N[2]*Q+N[6]*he+N[10]*ye+N[14]*Te,C[3]=N[3]*Q+N[7]*he+N[11]*ye+N[15]*Te,C}function bo(){var C=new Ks(2);return Ks!=Float32Array&&(C[0]=0,C[1]=0),C}function Bi(C){var L=C[0],N=C[1];return L*L+N*N}jt(),za();var Ms=Bi,ro=(bo(),function(C){function L(N){C.call(this,N,$f)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.createBucket=function(Q){return new qi(Q)},L.prototype.queryRadius=function(Q){var he=Q;return Hl("circle-radius",this,he)+Hl("circle-stroke-width",this,he)+Ju(this.paint.get("circle-translate"))},L.prototype.queryIntersectsFeature=function(Q,he,ye,Te,Ye,lt,dt,At){for(var Vt=_f(Q,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),lt.angle,dt),Pr=this.paint.get("circle-radius").evaluate(he,ye)+this.paint.get("circle-stroke-width").evaluate(he,ye),jr="map"===this.paint.get("circle-pitch-alignment"),cn=jr?Vt:Ji(Vt,At),rn=jr?Pr*dt:Pr,Pn=0,mn=Te;Pn<mn.length;Pn+=1)for(var Fn=0,Jn=mn[Pn];Fn<Jn.length;Fn+=1){var Sa=Jn[Fn],ma=jr?Sa:Ea(Sa,At),qa=rn,Ua=zi([],[Sa.x,Sa.y,0,1],At);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?qa*=Ua[3]/lt.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(qa*=lt.cameraToCenterDistance/Ua[3]),Fi(cn,ma,qa))return!0}return!1},L}(Gn));function Ea(C,L){var N=zi([],[C.x,C.y,0,1],L);return new a(N[0]/N[3],N[1]/N[3])}function Ji(C,L){return C.map(function(N){return Ea(N,L)})}var Jo=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L}(qi);function ps(C,L,N,Q){var he=L.width,ye=L.height;if(Q){if(Q instanceof Uint8ClampedArray)Q=new Uint8Array(Q.buffer);else if(Q.length!==he*ye*N)throw new RangeError("mismatched image size")}else Q=new Uint8Array(he*ye*N);return C.width=he,C.height=ye,C.data=Q,C}function Fs(C,L,N){var Q=L.width,he=L.height;if(Q!==C.width||he!==C.height){var ye=ps({},{width:Q,height:he},N);cu(C,ye,{x:0,y:0},{x:0,y:0},{width:Math.min(C.width,Q),height:Math.min(C.height,he)},N),C.width=Q,C.height=he,C.data=ye.data}}function cu(C,L,N,Q,he,ye){if(0===he.width||0===he.height)return L;if(he.width>C.width||he.height>C.height||N.x>C.width-he.width||N.y>C.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>L.width||he.height>L.height||Q.x>L.width-he.width||Q.y>L.height-he.height)throw new RangeError("out of range destination coordinates for image copy");for(var Te=C.data,Ye=L.data,lt=0;lt<he.height;lt++)for(var dt=((N.y+lt)*C.width+N.x)*ye,At=((Q.y+lt)*L.width+Q.x)*ye,Vt=0;Vt<he.width*ye;Vt++)Ye[At+Vt]=Te[dt+Vt];return L}Wa("HeatmapBucket",Jo,{omit:["layers"]});var Es=function(L,N){ps(this,L,1,N)};Es.prototype.resize=function(L){Fs(this,L,1)},Es.prototype.clone=function(){return new Es({width:this.width,height:this.height},new Uint8Array(this.data))},Es.copy=function(L,N,Q,he,ye){cu(L,N,Q,he,ye,1)};var Wo=function(L,N){ps(this,L,4,N)};Wo.prototype.resize=function(L){Fs(this,L,4)},Wo.prototype.replace=function(L,N){N?this.data.set(L):L instanceof Uint8ClampedArray?this.data=new Uint8Array(L.buffer):this.data=L},Wo.prototype.clone=function(){return new Wo({width:this.width,height:this.height},new Uint8Array(this.data))},Wo.copy=function(L,N,Q,he,ye){cu(L,N,Q,he,ye,4)},Wa("AlphaImage",Es),Wa("RGBAImage",Wo);var fc={paint:new xn({"heatmap-radius":new wr(In.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wr(In.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Et(In.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bn(In.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Et(In.paint_heatmap["heatmap-opacity"])})};function Wf(C){var L={},N=C.resolution||256,Q=C.clips?C.clips.length:1,he=C.image||new Wo({width:N,height:Q}),ye=function(Pn,mn,Ln){L[C.evaluationKey]=Ln;var Fn=C.expression.evaluate(L);he.data[Pn+mn+0]=Math.floor(255*Fn.r/Fn.a),he.data[Pn+mn+1]=Math.floor(255*Fn.g/Fn.a),he.data[Pn+mn+2]=Math.floor(255*Fn.b/Fn.a),he.data[Pn+mn+3]=Math.floor(255*Fn.a)};if(C.clips)for(var dt=0,At=0;dt<Q;++dt,At+=4*N)for(var Vt=0,ur=0;Vt<N;Vt++,ur+=4){var nr=Vt/(N-1),Pr=C.clips[dt];ye(At,ur,Pr.start*(1-nr)+Pr.end*nr)}else for(var Te=0,Ye=0;Te<N;Te++,Ye+=4)ye(0,Ye,Te/(N-1));return he}var Vc=function(C){function L(N){C.call(this,N,fc),this._updateColorRamp()}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.createBucket=function(Q){return new Jo(Q)},L.prototype._handleSpecialPaintPropertyUpdate=function(Q){"heatmap-color"===Q&&this._updateColorRamp()},L.prototype._updateColorRamp=function(){var Q=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Wf({expression:Q,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},L.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},L.prototype.queryRadius=function(){return 0},L.prototype.queryIntersectsFeature=function(){return!1},L.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},L}(Gn),Jv={paint:new xn({"hillshade-illumination-direction":new Et(In.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Et(In.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Et(In.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Et(In.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Et(In.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Et(In.paint_hillshade["hillshade-accent-color"])})},Qv=function(C){function L(N){C.call(this,N,Jv)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},L}(Gn),qv=ra([{name:"a_pos",components:2,type:"Int16"}],4).members,Ah=nh,ed=nh;function nh(C,L,N){N=N||2;var Ye,lt,dt,At,Vt,ur,nr,Q=L&&L.length,he=Q?L[0]*N:C.length,ye=Wh(C,0,he,N,!0),Te=[];if(!ye||ye.next===ye.prev)return Te;if(Q&&(ye=id(C,L,ye,N)),C.length>80*N){Ye=dt=C[0],lt=At=C[1];for(var Pr=N;Pr<he;Pr+=N)(Vt=C[Pr])<Ye&&(Ye=Vt),(ur=C[Pr+1])<lt&&(lt=ur),Vt>dt&&(dt=Vt),ur>At&&(At=ur);nr=0!==(nr=Math.max(dt-Ye,At-lt))?1/nr:0}return Gc(ye,Te,N,Ye,lt,nr),Te}function Wh(C,L,N,Q,he){var ye,Te;if(he===Eh(C,L,N,Q)>0)for(ye=L;ye<N;ye+=Q)Te=Zh(ye,C[ye],C[ye+1],Te);else for(ye=N-Q;ye>=L;ye-=Q)Te=Zh(ye,C[ye],C[ye+1],Te);return Te&&ah(Te,Te.next)&&(Wc(Te),Te=Te.next),Te}function gc(C,L){if(!C)return C;L||(L=C);var Q,N=C;do{if(Q=!1,N.steiner||!ah(N,N.next)&&0!==Js(N.prev,N,N.next))N=N.next;else{if(Wc(N),(N=L=N.prev)===N.next)break;Q=!0}}while(Q||N!==L);return L}function Gc(C,L,N,Q,he,ye,Te){if(C){!Te&&ye&&fd(C,Q,he,ye);for(var lt,dt,Ye=C;C.prev!==C.next;)if(lt=C.prev,dt=C.next,ye?rd(C,Q,he,ye):td(C))L.push(lt.i/N),L.push(C.i/N),L.push(dt.i/N),Wc(C),C=dt.next,Ye=dt.next;else if((C=dt)===Ye){Te?1===Te?Gc(C=nd(gc(C),L,N),L,N,Q,he,ye,2):2===Te&&ad(C,L,N,Q,he,ye):Gc(gc(C),L,N,Q,he,ye,1);break}}}function td(C){var L=C.prev,N=C,Q=C.next;if(Js(L,N,Q)>=0)return!1;for(var he=C.next.next;he!==C.prev;){if(Mc(L.x,L.y,N.x,N.y,Q.x,Q.y,he.x,he.y)&&Js(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function rd(C,L,N,Q){var he=C.prev,ye=C,Te=C.next;if(Js(he,ye,Te)>=0)return!1;for(var Ye=he.x<ye.x?he.x<Te.x?he.x:Te.x:ye.x<Te.x?ye.x:Te.x,lt=he.y<ye.y?he.y<Te.y?he.y:Te.y:ye.y<Te.y?ye.y:Te.y,dt=he.x>ye.x?he.x>Te.x?he.x:Te.x:ye.x>Te.x?ye.x:Te.x,At=he.y>ye.y?he.y>Te.y?he.y:Te.y:ye.y>Te.y?ye.y:Te.y,Vt=Sh(Ye,lt,L,N,Q),ur=Sh(dt,At,L,N,Q),nr=C.prevZ,Pr=C.nextZ;nr&&nr.z>=Vt&&Pr&&Pr.z<=ur;){if(nr!==C.prev&&nr!==C.next&&Mc(he.x,he.y,ye.x,ye.y,Te.x,Te.y,nr.x,nr.y)&&Js(nr.prev,nr,nr.next)>=0||(nr=nr.prevZ,Pr!==C.prev&&Pr!==C.next&&Mc(he.x,he.y,ye.x,ye.y,Te.x,Te.y,Pr.x,Pr.y)&&Js(Pr.prev,Pr,Pr.next)>=0))return!1;Pr=Pr.nextZ}for(;nr&&nr.z>=Vt;){if(nr!==C.prev&&nr!==C.next&&Mc(he.x,he.y,ye.x,ye.y,Te.x,Te.y,nr.x,nr.y)&&Js(nr.prev,nr,nr.next)>=0)return!1;nr=nr.prevZ}for(;Pr&&Pr.z<=ur;){if(Pr!==C.prev&&Pr!==C.next&&Mc(he.x,he.y,ye.x,ye.y,Te.x,Te.y,Pr.x,Pr.y)&&Js(Pr.prev,Pr,Pr.next)>=0)return!1;Pr=Pr.nextZ}return!0}function nd(C,L,N){var Q=C;do{var he=Q.prev,ye=Q.next.next;!ah(he,ye)&&Yh(he,Q,Q.next,ye)&&jc(he,ye)&&jc(ye,he)&&(L.push(he.i/N),L.push(Q.i/N),L.push(ye.i/N),Wc(Q),Wc(Q.next),Q=C=ye),Q=Q.next}while(Q!==C);return gc(Q)}function ad(C,L,N,Q,he,ye){var Te=C;do{for(var Ye=Te.next.next;Ye!==Te.prev;){if(Te.i!==Ye.i&&vd(Te,Ye)){var lt=Xh(Te,Ye);return Te=gc(Te,Te.next),lt=gc(lt,lt.next),Gc(Te,L,N,Q,he,ye),void Gc(lt,L,N,Q,he,ye)}Ye=Ye.next}Te=Te.next}while(Te!==C)}function id(C,L,N,Q){var ye,Te,dt,he=[];for(ye=0,Te=L.length;ye<Te;ye++)(dt=Wh(C,L[ye]*Q,ye<Te-1?L[ye+1]*Q:C.length,Q,!1))===dt.next&&(dt.steiner=!0),he.push(hd(dt));for(he.sort(od),ye=0;ye<he.length;ye++)sd(he[ye],N),N=gc(N,N.next);return N}function od(C,L){return C.x-L.x}function sd(C,L){if(L=ld(C,L)){var N=Xh(L,C);gc(L,L.next),gc(N,N.next)}}function ld(C,L){var Te,N=L,Q=C.x,he=C.y,ye=-1/0;do{if(he<=N.y&&he>=N.next.y&&N.next.y!==N.y){var Ye=N.x+(he-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Ye<=Q&&Ye>ye){if(ye=Ye,Ye===Q){if(he===N.y)return N;if(he===N.next.y)return N.next}Te=N.x<N.next.x?N:N.next}}N=N.next}while(N!==L);if(!Te)return null;if(Q===ye)return Te;var ur,lt=Te,dt=Te.x,At=Te.y,Vt=1/0;N=Te;do{Q>=N.x&&N.x>=dt&&Q!==N.x&&Mc(he<At?Q:ye,he,dt,At,he<At?ye:Q,he,N.x,N.y)&&(ur=Math.abs(he-N.y)/(Q-N.x),jc(N,C)&&(ur<Vt||ur===Vt&&(N.x>Te.x||N.x===Te.x&&ud(Te,N)))&&(Te=N,Vt=ur)),N=N.next}while(N!==lt);return Te}function ud(C,L){return Js(C.prev,C,L.prev)<0&&Js(L.next,C,C.next)<0}function fd(C,L,N,Q){var he=C;do{null===he.z&&(he.z=Sh(he.x,he.y,L,N,Q)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next}while(he!==C);he.prevZ.nextZ=null,he.prevZ=null,cd(he)}function cd(C){var L,N,Q,he,ye,Te,Ye,lt,dt=1;do{for(N=C,C=null,ye=null,Te=0;N;){for(Te++,Q=N,Ye=0,L=0;L<dt&&(Ye++,Q=Q.nextZ);L++);for(lt=dt;Ye>0||lt>0&&Q;)0!==Ye&&(0===lt||!Q||N.z<=Q.z)?(he=N,N=N.nextZ,Ye--):(he=Q,Q=Q.nextZ,lt--),ye?ye.nextZ=he:C=he,he.prevZ=ye,ye=he;N=Q}ye.nextZ=null,dt*=2}while(Te>1);return C}function Sh(C,L,N,Q,he){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=32767*(C-N)*he)|C<<8))|C<<4))|C<<2))|C<<1))|(L=1431655765&((L=858993459&((L=252645135&((L=16711935&((L=32767*(L-Q)*he)|L<<8))|L<<4))|L<<2))|L<<1))<<1}function hd(C){var L=C,N=C;do{(L.x<N.x||L.x===N.x&&L.y<N.y)&&(N=L),L=L.next}while(L!==C);return N}function Mc(C,L,N,Q,he,ye,Te,Ye){return(he-Te)*(L-Ye)-(C-Te)*(ye-Ye)>=0&&(C-Te)*(Q-Ye)-(N-Te)*(L-Ye)>=0&&(N-Te)*(ye-Ye)-(he-Te)*(Q-Ye)>=0}function vd(C,L){return C.next.i!==L.i&&C.prev.i!==L.i&&!dd(C,L)&&(jc(C,L)&&jc(L,C)&&pd(C,L)&&(Js(C.prev,C,L.prev)||Js(C,L.prev,L))||ah(C,L)&&Js(C.prev,C,C.next)>0&&Js(L.prev,L,L.next)>0)}function Js(C,L,N){return(L.y-C.y)*(N.x-L.x)-(L.x-C.x)*(N.y-L.y)}function ah(C,L){return C.x===L.x&&C.y===L.y}function Yh(C,L,N,Q){var he=oh(Js(C,L,N)),ye=oh(Js(C,L,Q)),Te=oh(Js(N,Q,C)),Ye=oh(Js(N,Q,L));return!!(he!==ye&&Te!==Ye||0===he&&ih(C,N,L)||0===ye&&ih(C,Q,L)||0===Te&&ih(N,C,Q)||0===Ye&&ih(N,L,Q))}function ih(C,L,N){return L.x<=Math.max(C.x,N.x)&&L.x>=Math.min(C.x,N.x)&&L.y<=Math.max(C.y,N.y)&&L.y>=Math.min(C.y,N.y)}function oh(C){return C>0?1:C<0?-1:0}function dd(C,L){var N=C;do{if(N.i!==C.i&&N.next.i!==C.i&&N.i!==L.i&&N.next.i!==L.i&&Yh(N,N.next,C,L))return!0;N=N.next}while(N!==C);return!1}function jc(C,L){return Js(C.prev,C,C.next)<0?Js(C,L,C.next)>=0&&Js(C,C.prev,L)>=0:Js(C,L,C.prev)<0||Js(C,C.next,L)<0}function pd(C,L){var N=C,Q=!1,he=(C.x+L.x)/2,ye=(C.y+L.y)/2;do{N.y>ye!=N.next.y>ye&&N.next.y!==N.y&&he<(N.next.x-N.x)*(ye-N.y)/(N.next.y-N.y)+N.x&&(Q=!Q),N=N.next}while(N!==C);return Q}function Xh(C,L){var N=new Mh(C.i,C.x,C.y),Q=new Mh(L.i,L.x,L.y),he=C.next,ye=L.prev;return C.next=L,L.prev=C,N.next=he,he.prev=N,Q.next=N,N.prev=Q,ye.next=Q,Q.prev=ye,Q}function Zh(C,L,N,Q){var he=new Mh(C,L,N);return Q?(he.next=Q.next,he.prev=Q,Q.next.prev=he,Q.next=he):(he.prev=he,he.next=he),he}function Wc(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function Mh(C,L,N){this.i=C,this.x=L,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Eh(C,L,N,Q){for(var he=0,ye=L,Te=N-Q;ye<N;ye+=Q)he+=(C[Te]-C[ye])*(C[ye+1]+C[Te+1]),Te=ye;return he}function gd(C,L,N,Q,he){Kh(C,L,N||0,Q||C.length-1,he||yd)}function Kh(C,L,N,Q,he){for(;Q>N;){if(Q-N>600){var ye=Q-N+1,Te=L-N+1,Ye=Math.log(ye),lt=.5*Math.exp(2*Ye/3),dt=.5*Math.sqrt(Ye*lt*(ye-lt)/ye)*(Te-ye/2<0?-1:1);Kh(C,L,Math.max(N,Math.floor(L-Te*lt/ye+dt)),Math.min(Q,Math.floor(L+(ye-Te)*lt/ye+dt)),he)}var ur=C[L],nr=N,Pr=Q;for(Yc(C,N,L),he(C[Q],ur)>0&&Yc(C,N,Q);nr<Pr;){for(Yc(C,nr,Pr),nr++,Pr--;he(C[nr],ur)<0;)nr++;for(;he(C[Pr],ur)>0;)Pr--}0===he(C[N],ur)?Yc(C,N,Pr):Yc(C,++Pr,Q),Pr<=L&&(N=Pr+1),L<=Pr&&(Q=Pr-1)}}function Yc(C,L,N){var Q=C[L];C[L]=C[N],C[N]=Q}function yd(C,L){return C<L?-1:C>L?1:0}function Ch(C,L){var N=C.length;if(N<=1)return[C];for(var he,ye,Q=[],Te=0;Te<N;Te++){var Ye=H(C[Te]);0!==Ye&&(C[Te].area=Math.abs(Ye),void 0===ye&&(ye=Ye<0),ye===Ye<0?(he&&Q.push(he),he=[C[Te]]):he.push(C[Te]))}if(he&&Q.push(he),L>1)for(var lt=0;lt<Q.length;lt++)Q[lt].length<=L||(gd(Q[lt],L,1,Q[lt].length-1,md),Q[lt]=Q[lt].slice(0,L));return Q}function md(C,L){return L.area-C.area}function Lh(C,L,N){for(var Q=N.patternDependencies,he=!1,ye=0,Te=L;ye<Te.length;ye+=1){var lt=Te[ye].paint.get(C+"-pattern");lt.isConstant()||(he=!0);var dt=lt.constantOr(null);dt&&(he=!0,Q[dt.to]=!0,Q[dt.from]=!0)}return he}function Ph(C,L,N,Q,he){for(var ye=he.patternDependencies,Te=0,Ye=L;Te<Ye.length;Te+=1){var lt=Ye[Te],At=lt.paint.get(C+"-pattern").value;if("constant"!==At.kind){var Vt=At.evaluate({zoom:Q-1},N,{},he.availableImages),ur=At.evaluate({zoom:Q},N,{},he.availableImages),nr=At.evaluate({zoom:Q+1},N,{},he.availableImages);Vt=Vt&&Vt.name?Vt.name:Vt,ur=ur&&ur.name?ur.name:ur,nr=nr&&nr.name?nr.name:nr,ye[Vt]=!0,ye[ur]=!0,ye[nr]=!0,N.patterns[lt.id]={min:Vt,mid:ur,max:nr}}}return N}nh.deviation=function(C,L,N,Q){var he=L&&L.length,ye=he?L[0]*N:C.length,Te=Math.abs(Eh(C,0,ye,N));if(he)for(var Ye=0,lt=L.length;Ye<lt;Ye++){var dt=L[Ye]*N,At=Ye<lt-1?L[Ye+1]*N:C.length;Te-=Math.abs(Eh(C,dt,At,N))}var Vt=0;for(Ye=0;Ye<Q.length;Ye+=3){var ur=Q[Ye]*N,nr=Q[Ye+1]*N,Pr=Q[Ye+2]*N;Vt+=Math.abs((C[ur]-C[Pr])*(C[nr+1]-C[ur+1])-(C[ur]-C[nr])*(C[Pr+1]-C[ur+1]))}return 0===Te&&0===Vt?0:Math.abs((Vt-Te)/Te)},nh.flatten=function(C){for(var L=C[0][0].length,N={vertices:[],holes:[],dimensions:L},Q=0,he=0;he<C.length;he++){for(var ye=0;ye<C[he].length;ye++)for(var Te=0;Te<L;Te++)N.vertices.push(C[he][ye][Te]);he>0&&(Q+=C[he-1].length,N.holes.push(Q))}return N},Ah.default=ed;var xd=500,qf=function(L){this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=L.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new kn,this.indexArray=new Oa,this.indexArray2=new wi,this.programConfigurations=new En(L.layers,L.zoom),this.segments=new Mi,this.segments2=new Mi,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};qf.prototype.populate=function(L,N,Q){this.hasPattern=Lh("fill",this.layers,N);for(var he=this.layers[0].layout.get("fill-sort-key"),ye=[],Te=0,Ye=L;Te<Ye.length;Te+=1){var lt=Ye[Te],dt=lt.feature,At=lt.id,Vt=lt.index,ur=lt.sourceLayerIndex,nr=this.layers[0]._featureFilter.needGeometry,Pr=Ci(dt,nr);if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),Pr,Q)){var jr=he?he.evaluate(Pr,{},Q,N.availableImages):void 0,cn={id:At,properties:dt.properties,type:dt.type,sourceLayerIndex:ur,index:Vt,geometry:nr?Pr.geometry:_a(dt),patterns:{},sortKey:jr};ye.push(cn)}}he&&ye.sort(function(Ua,Xa){return Ua.sortKey-Xa.sortKey});for(var rn=0,Pn=ye;rn<Pn.length;rn+=1){var mn=Pn[rn],Ln=mn,Fn=Ln.geometry,Jn=Ln.index,Sa=Ln.sourceLayerIndex;if(this.hasPattern){var ma=Ph("fill",this.layers,mn,this.zoom,N);this.patternFeatures.push(ma)}else this.addFeature(mn,Fn,Jn,Q,{});var qa=L[Jn].feature;N.featureIndex.insert(qa,Fn,Jn,Sa,this.index)}},qf.prototype.update=function(L,N,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,Q)},qf.prototype.addFeatures=function(L,N,Q){for(var he=0,ye=this.patternFeatures;he<ye.length;he+=1){var Te=ye[he];this.addFeature(Te,Te.geometry,Te.index,N,Q)}},qf.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qf.prototype.upload=function(L){this.uploaded||(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,qv),this.indexBuffer=L.createIndexBuffer(this.indexArray),this.indexBuffer2=L.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(L),this.uploaded=!0},qf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},qf.prototype.addFeature=function(L,N,Q,he,ye){for(var Te=0,Ye=Ch(N,xd);Te<Ye.length;Te+=1){for(var lt=Ye[Te],dt=0,At=0,Vt=lt;At<Vt.length;At+=1)dt+=Vt[At].length;for(var nr=this.segments.prepareSegment(dt,this.layoutVertexArray,this.indexArray),Pr=nr.vertexLength,jr=[],cn=[],rn=0,Pn=lt;rn<Pn.length;rn+=1){var mn=Pn[rn];if(0!==mn.length){mn!==lt[0]&&cn.push(jr.length/2);var Ln=this.segments2.prepareSegment(mn.length,this.layoutVertexArray,this.indexArray2),Fn=Ln.vertexLength;this.layoutVertexArray.emplaceBack(mn[0].x,mn[0].y),this.indexArray2.emplaceBack(Fn+mn.length-1,Fn),jr.push(mn[0].x),jr.push(mn[0].y);for(var Jn=1;Jn<mn.length;Jn++)this.layoutVertexArray.emplaceBack(mn[Jn].x,mn[Jn].y),this.indexArray2.emplaceBack(Fn+Jn-1,Fn+Jn),jr.push(mn[Jn].x),jr.push(mn[Jn].y);Ln.vertexLength+=mn.length,Ln.primitiveLength+=mn.length}}for(var Sa=Ah(jr,cn),ma=0;ma<Sa.length;ma+=3)this.indexArray.emplaceBack(Pr+Sa[ma],Pr+Sa[ma+1],Pr+Sa[ma+2]);nr.vertexLength+=dt,nr.primitiveLength+=Sa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,Q,ye,he)},Wa("FillBucket",qf,{omit:["layers","patternFeatures"]});var bd=new xn({"fill-sort-key":new wr(In.layout_fill["fill-sort-key"])}),Td={paint:new xn({"fill-antialias":new Et(In.paint_fill["fill-antialias"]),"fill-opacity":new wr(In.paint_fill["fill-opacity"]),"fill-color":new wr(In.paint_fill["fill-color"]),"fill-outline-color":new wr(In.paint_fill["fill-outline-color"]),"fill-translate":new Et(In.paint_fill["fill-translate"]),"fill-translate-anchor":new Et(In.paint_fill["fill-translate-anchor"]),"fill-pattern":new Nr(In.paint_fill["fill-pattern"])}),layout:bd},Ad=function(C){function L(N){C.call(this,N,Td)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.recalculate=function(Q,he){C.prototype.recalculate.call(this,Q,he);var ye=this.paint._values["fill-outline-color"];"constant"===ye.value.kind&&void 0===ye.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},L.prototype.createBucket=function(Q){return new qf(Q)},L.prototype.queryRadius=function(){return Ju(this.paint.get("fill-translate"))},L.prototype.queryIntersectsFeature=function(Q,he,ye,Te,Ye,lt,dt){return ho(_f(Q,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),lt.angle,dt),Te)},L.prototype.isTileClipped=function(){return!0},L}(Gn),Md=ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Jh=Ec;function Ec(C,L,N,Q,he){this.properties={},this.extent=N,this.type=0,this._pbf=C,this._geometry=-1,this._keys=Q,this._values=he,C.readFields(Ed,this,L)}function Ed(C,L,N){1==C?L.id=N.readVarint():2==C?Cd(N,L):3==C?L.type=N.readVarint():4==C&&(L._geometry=N.pos)}function Cd(C,L){for(var N=C.readVarint()+C.pos;C.pos<N;){var Q=L._keys[C.readVarint()],he=L._values[C.readVarint()];L.properties[Q]=he}}function Ld(C){var L=C.length;if(L<=1)return[C];for(var Q,he,N=[],ye=0;ye<L;ye++){var Te=Pd(C[ye]);0!==Te&&(void 0===he&&(he=Te<0),he===Te<0?(Q&&N.push(Q),Q=[C[ye]]):Q.push(C[ye]))}return Q&&N.push(Q),N}function Pd(C){for(var ye,Te,L=0,N=0,Q=C.length,he=Q-1;N<Q;he=N++)ye=C[N],L+=((Te=C[he]).x-ye.x)*(ye.y+Te.y);return L}Ec.types=["Unknown","Point","LineString","Polygon"],Ec.prototype.loadGeometry=function(){var C=this._pbf;C.pos=this._geometry;for(var Ye,L=C.readVarint()+C.pos,N=1,Q=0,he=0,ye=0,Te=[];C.pos<L;){if(Q<=0){var lt=C.readVarint();N=7&lt,Q=lt>>3}if(Q--,1===N||2===N)he+=C.readSVarint(),ye+=C.readSVarint(),1===N&&(Ye&&Te.push(Ye),Ye=[]),Ye.push(new a(he,ye));else{if(7!==N)throw new Error("unknown command "+N);Ye&&Ye.push(Ye[0].clone())}}return Ye&&Te.push(Ye),Te},Ec.prototype.bbox=function(){var C=this._pbf;C.pos=this._geometry;for(var L=C.readVarint()+C.pos,N=1,Q=0,he=0,ye=0,Te=1/0,Ye=-1/0,lt=1/0,dt=-1/0;C.pos<L;){if(Q<=0){var At=C.readVarint();N=7&At,Q=At>>3}if(Q--,1===N||2===N)(he+=C.readSVarint())<Te&&(Te=he),he>Ye&&(Ye=he),(ye+=C.readSVarint())<lt&&(lt=ye),ye>dt&&(dt=ye);else if(7!==N)throw new Error("unknown command "+N)}return[Te,lt,Ye,dt]},Ec.prototype.toGeoJSON=function(C,L,N){var lt,dt,Q=this.extent*Math.pow(2,N),he=this.extent*C,ye=this.extent*L,Te=this.loadGeometry(),Ye=Ec.types[this.type];function At(nr){for(var Pr=0;Pr<nr.length;Pr++){var jr=nr[Pr],cn=180-360*(jr.y+ye)/Q;nr[Pr]=[360*(jr.x+he)/Q-180,360/Math.PI*Math.atan(Math.exp(cn*Math.PI/180))-90]}}switch(this.type){case 1:var Vt=[];for(lt=0;lt<Te.length;lt++)Vt[lt]=Te[lt][0];At(Te=Vt);break;case 2:for(lt=0;lt<Te.length;lt++)At(Te[lt]);break;case 3:for(Te=Ld(Te),lt=0;lt<Te.length;lt++)for(dt=0;dt<Te[lt].length;dt++)At(Te[lt][dt])}1===Te.length?Te=Te[0]:Ye="Multi"+Ye;var ur={type:"Feature",geometry:{type:Ye,coordinates:Te},properties:this.properties};return"id"in this&&(ur.id=this.id),ur};var Qh=$h;function $h(C,L){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=C,this._keys=[],this._values=[],this._features=[],C.readFields(Id,this,L),this.length=this._features.length}function Id(C,L,N){15===C?L.version=N.readVarint():1===C?L.name=N.readString():5===C?L.extent=N.readVarint():2===C?L._features.push(N.pos):3===C?L._keys.push(N.readString()):4===C&&L._values.push(Dd(N))}function Dd(C){for(var L=null,N=C.readVarint()+C.pos;C.pos<N;){var Q=C.readVarint()>>3;L=1===Q?C.readString():2===Q?C.readFloat():3===Q?C.readDouble():4===Q?C.readVarint64():5===Q?C.readVarint():6===Q?C.readSVarint():7===Q?C.readBoolean():null}return L}function kd(C,L){this.layers=C.readFields(_d,{},L)}function _d(C,L,N){if(3===C){var Q=new Qh(N,N.readVarint()+N.pos);Q.length&&(L[Q.name]=Q)}}$h.prototype.feature=function(C){if(C<0||C>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[C];var L=this._pbf.readVarint()+this._pbf.pos;return new Jh(this._pbf,L,this.extent,this._keys,this._values)};var Cc={VectorTile:kd,VectorTileFeature:Jh,VectorTileLayer:Qh},Nd=Cc.VectorTileFeature.types,Bd=500,Ih=Math.pow(2,13);function Xc(C,L,N,Q,he,ye,Te,Ye){C.emplaceBack(L,N,2*Math.floor(Q*Ih)+Te,he*Ih*2,ye*Ih*2,Math.round(Ye))}var ec=function(L){this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=L.index,this.hasPattern=!1,this.layoutVertexArray=new na,this.indexArray=new Oa,this.programConfigurations=new En(L.layers,L.zoom),this.segments=new Mi,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};function Ud(C,L){return C.x===L.x&&(C.x<0||C.x>On)||C.y===L.y&&(C.y<0||C.y>On)}function Hd(C){return C.every(function(L){return L.x<0})||C.every(function(L){return L.x>On})||C.every(function(L){return L.y<0})||C.every(function(L){return L.y>On})}ec.prototype.populate=function(L,N,Q){this.features=[],this.hasPattern=Lh("fill-extrusion",this.layers,N);for(var he=0,ye=L;he<ye.length;he+=1){var Te=ye[he],Ye=Te.feature,lt=Te.id,dt=Te.index,At=Te.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,ur=Ci(Ye,Vt);if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),ur,Q)){var nr={id:lt,sourceLayerIndex:At,index:dt,geometry:Vt?ur.geometry:_a(Ye),properties:Ye.properties,type:Ye.type,patterns:{}};this.hasPattern?this.features.push(Ph("fill-extrusion",this.layers,nr,this.zoom,N)):this.addFeature(nr,nr.geometry,dt,Q,{}),N.featureIndex.insert(Ye,nr.geometry,dt,At,this.index,!0)}}},ec.prototype.addFeatures=function(L,N,Q){for(var he=0,ye=this.features;he<ye.length;he+=1){var Te=ye[he],Ye=Te.geometry;this.addFeature(Te,Ye,Te.index,N,Q)}},ec.prototype.update=function(L,N,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,Q)},ec.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ec.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ec.prototype.upload=function(L){this.uploaded||(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,Md),this.indexBuffer=L.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(L),this.uploaded=!0},ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ec.prototype.addFeature=function(L,N,Q,he,ye){for(var Te=0,Ye=Ch(N,Bd);Te<Ye.length;Te+=1){for(var lt=Ye[Te],dt=0,At=0,Vt=lt;At<Vt.length;At+=1)dt+=Vt[At].length;for(var nr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Pr=0,jr=lt;Pr<jr.length;Pr+=1){var cn=jr[Pr];if(0!==cn.length&&!Hd(cn))for(var rn=0,Pn=0;Pn<cn.length;Pn++){var mn=cn[Pn];if(Pn>=1){var Ln=cn[Pn-1];if(!Ud(mn,Ln)){nr.vertexLength+4>Mi.MAX_VERTEX_ARRAY_LENGTH&&(nr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Fn=mn.sub(Ln)._perp()._unit(),Jn=Ln.dist(mn);rn+Jn>32768&&(rn=0),Xc(this.layoutVertexArray,mn.x,mn.y,Fn.x,Fn.y,0,0,rn),Xc(this.layoutVertexArray,mn.x,mn.y,Fn.x,Fn.y,0,1,rn),rn+=Jn,Xc(this.layoutVertexArray,Ln.x,Ln.y,Fn.x,Fn.y,0,0,rn),Xc(this.layoutVertexArray,Ln.x,Ln.y,Fn.x,Fn.y,0,1,rn);var Sa=nr.vertexLength;this.indexArray.emplaceBack(Sa,Sa+2,Sa+1),this.indexArray.emplaceBack(Sa+1,Sa+2,Sa+3),nr.vertexLength+=4,nr.primitiveLength+=2}}}}if(nr.vertexLength+dt>Mi.MAX_VERTEX_ARRAY_LENGTH&&(nr=this.segments.prepareSegment(dt,this.layoutVertexArray,this.indexArray)),"Polygon"===Nd[L.type]){for(var ma=[],qa=[],Ua=nr.vertexLength,Xa=0,Li=lt;Xa<Li.length;Xa+=1){var ei=Li[Xa];if(0!==ei.length){ei!==lt[0]&&qa.push(ma.length/2);for(var ri=0;ri<ei.length;ri++){var Ui=ei[ri];Xc(this.layoutVertexArray,Ui.x,Ui.y,0,0,1,1,0),ma.push(Ui.x),ma.push(Ui.y)}}}for(var Ti=Ah(ma,qa),vo=0;vo<Ti.length;vo+=3)this.indexArray.emplaceBack(Ua+Ti[vo],Ua+Ti[vo+2],Ua+Ti[vo+1]);nr.primitiveLength+=Ti.length/3,nr.vertexLength+=dt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,Q,ye,he)},Wa("FillExtrusionBucket",ec,{omit:["layers","features"]});var Gd={paint:new xn({"fill-extrusion-opacity":new Et(In["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wr(In["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Et(In["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Et(In["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Nr(In["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wr(In["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wr(In["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Et(In["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},jd=function(C){function L(N){C.call(this,N,Gd)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.createBucket=function(Q){return new ec(Q)},L.prototype.queryRadius=function(){return Ju(this.paint.get("fill-extrusion-translate"))},L.prototype.is3D=function(){return!0},L.prototype.queryIntersectsFeature=function(Q,he,ye,Te,Ye,lt,dt,At){var Vt=_f(Q,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),lt.angle,dt),ur=this.paint.get("fill-extrusion-height").evaluate(he,ye),nr=this.paint.get("fill-extrusion-base").evaluate(he,ye),Pr=Xd(Vt,At,lt,0),jr=Yd(Te,nr,ur,At);return Wd(jr[0],jr[1],Pr)},L}(Gn);function Zc(C,L){return C.x*L.x+C.y*L.y}function qh(C,L){if(1===C.length){for(var he,N=0,Q=L[N++];!he||Q.equals(he);)if(!(he=L[N++]))return 1/0;for(;N<L.length;N++){var ye=L[N],Te=C[0],Ye=he.sub(Q),lt=ye.sub(Q),dt=Te.sub(Q),At=Zc(Ye,Ye),Vt=Zc(Ye,lt),ur=Zc(lt,lt),nr=Zc(dt,Ye),Pr=Zc(dt,lt),jr=At*ur-Vt*Vt,cn=(ur*nr-Vt*Pr)/jr,rn=(At*Pr-Vt*nr)/jr,Pn=1-cn-rn,mn=Q.z*Pn+he.z*cn+ye.z*rn;if(isFinite(mn))return mn}return 1/0}for(var Ln=1/0,Fn=0,Jn=L;Fn<Jn.length;Fn+=1){var Sa=Jn[Fn];Ln=Math.min(Ln,Sa.z)}return Ln}function Wd(C,L,N){var Q=1/0;ho(N,L)&&(Q=qh(N,L[0]));for(var he=0;he<L.length;he++)for(var ye=L[he],Te=C[he],Ye=0;Ye<ye.length-1;Ye++){var lt=ye[Ye],dt=ye[Ye+1],At=Te[Ye],ur=[lt,dt,Te[Ye+1],At,lt];di(N,ur)&&(Q=Math.min(Q,qh(N,ur)))}return Q!==1/0&&Q}function Yd(C,L,N,Q){for(var he=[],ye=[],Te=Q[8]*L,Ye=Q[9]*L,lt=Q[10]*L,dt=Q[11]*L,At=Q[8]*N,Vt=Q[9]*N,ur=Q[10]*N,nr=Q[11]*N,Pr=0,jr=C;Pr<jr.length;Pr+=1){for(var rn=[],Pn=[],mn=0,Ln=jr[Pr];mn<Ln.length;mn+=1){var Fn=Ln[mn],Jn=Fn.x,Sa=Fn.y,ma=Q[0]*Jn+Q[4]*Sa+Q[12],qa=Q[1]*Jn+Q[5]*Sa+Q[13],Ua=Q[2]*Jn+Q[6]*Sa+Q[14],Xa=Q[3]*Jn+Q[7]*Sa+Q[15],ri=Ua+lt,Ui=Xa+dt,Ti=ma+At,vo=qa+Vt,No=Ua+ur,po=Xa+nr,go=new a((ma+Te)/Ui,(qa+Ye)/Ui);go.z=ri/Ui,rn.push(go);var fo=new a(Ti/po,vo/po);fo.z=No/po,Pn.push(fo)}he.push(rn),ye.push(Pn)}return[he,ye]}function Xd(C,L,N,Q){for(var he=[],ye=0,Te=C;ye<Te.length;ye+=1){var Ye=Te[ye],lt=[Ye.x,Ye.y,Q,1];zi(lt,lt,L),he.push(new a(lt[0]/lt[3],lt[1]/lt[3]))}return he}var Kd=ra([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Qd=ra([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,$d=Cc.VectorTileFeature.types,ev=63,qd=Math.cos(Math.PI/180*37.5),ep=15,tp=20,rp=15,tv=.5,rv=Math.pow(2,rp-1)/tv,Ru=function(L){var N=this;this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(Q){return Q.id}),this.index=L.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Q){N.gradients[Q.id]={}}),this.layoutVertexArray=new jn,this.layoutVertexArray2=new ka,this.indexArray=new Oa,this.programConfigurations=new En(L.layers,L.zoom),this.segments=new Mi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Q){return Q.isStateDependent()}).map(function(Q){return Q.id})};Ru.prototype.populate=function(L,N,Q){this.hasPattern=Lh("line",this.layers,N);for(var he=this.layers[0].layout.get("line-sort-key"),ye=[],Te=0,Ye=L;Te<Ye.length;Te+=1){var lt=Ye[Te],dt=lt.feature,At=lt.id,Vt=lt.index,ur=lt.sourceLayerIndex,nr=this.layers[0]._featureFilter.needGeometry,Pr=Ci(dt,nr);if(this.layers[0]._featureFilter.filter(new Ha(this.zoom),Pr,Q)){var jr=he?he.evaluate(Pr,{},Q):void 0,cn={id:At,properties:dt.properties,type:dt.type,sourceLayerIndex:ur,index:Vt,geometry:nr?Pr.geometry:_a(dt),patterns:{},sortKey:jr};ye.push(cn)}}he&&ye.sort(function(Ua,Xa){return Ua.sortKey-Xa.sortKey});for(var rn=0,Pn=ye;rn<Pn.length;rn+=1){var mn=Pn[rn],Ln=mn,Fn=Ln.geometry,Jn=Ln.index,Sa=Ln.sourceLayerIndex;if(this.hasPattern){var ma=Ph("line",this.layers,mn,this.zoom,N);this.patternFeatures.push(ma)}else this.addFeature(mn,Fn,Jn,Q,{});var qa=L[Jn].feature;N.featureIndex.insert(qa,Fn,Jn,Sa,this.index)}},Ru.prototype.update=function(L,N,Q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,Q)},Ru.prototype.addFeatures=function(L,N,Q){for(var he=0,ye=this.patternFeatures;he<ye.length;he+=1){var Te=ye[he];this.addFeature(Te,Te.geometry,Te.index,N,Q)}},Ru.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ru.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ru.prototype.upload=function(L){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=L.createVertexBuffer(this.layoutVertexArray2,Qd)),this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,Kd),this.indexBuffer=L.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(L),this.uploaded=!0},Ru.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ru.prototype.lineFeatureClips=function(L){if(L.properties&&L.properties.hasOwnProperty("mapbox_clip_start")&&L.properties.hasOwnProperty("mapbox_clip_end"))return{start:+L.properties.mapbox_clip_start,end:+L.properties.mapbox_clip_end}},Ru.prototype.addFeature=function(L,N,Q,he,ye){var Te=this.layers[0].layout,Ye=Te.get("line-join").evaluate(L,{}),lt=Te.get("line-cap"),dt=Te.get("line-miter-limit"),At=Te.get("line-round-limit");this.lineClips=this.lineFeatureClips(L);for(var Vt=0,ur=N;Vt<ur.length;Vt+=1){var nr=ur[Vt];this.addLine(nr,L,Ye,lt,dt,At)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,Q,ye,he)},Ru.prototype.addLine=function(L,N,Q,he,ye,Te){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Ye=0;Ye<L.length-1;Ye++)this.totalDistance+=L[Ye].dist(L[Ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var lt="Polygon"===$d[N.type],dt=L.length;dt>=2&&L[dt-1].equals(L[dt-2]);)dt--;for(var At=0;At<dt-1&&L[At].equals(L[At+1]);)At++;if(!(dt<(lt?3:2))){"bevel"===Q&&(ye=1.05);var nr,Vt=this.overscaling<=16?ep*On/(512*this.overscaling):0,ur=this.segments.prepareSegment(10*dt,this.layoutVertexArray,this.indexArray),Pr=void 0,jr=void 0,cn=void 0,rn=void 0;this.e1=this.e2=-1,lt&&(nr=L[dt-2],rn=L[At].sub(nr)._unit()._perp());for(var Pn=At;Pn<dt;Pn++)if(!(jr=Pn===dt-1?lt?L[At+1]:void 0:L[Pn+1])||!L[Pn].equals(jr)){rn&&(cn=rn),nr&&(Pr=nr),nr=L[Pn],rn=jr?jr.sub(nr)._unit()._perp():cn;var mn=(cn=cn||rn).add(rn);(0!==mn.x||0!==mn.y)&&mn._unit();var Ln=cn.x*rn.x+cn.y*rn.y,Fn=mn.x*rn.x+mn.y*rn.y,Jn=0!==Fn?1/Fn:1/0,Sa=2*Math.sqrt(2-2*Fn),ma=Fn<qd&&Pr&&jr,qa=cn.x*rn.y-cn.y*rn.x>0;if(ma&&Pn>At){var Ua=nr.dist(Pr);if(Ua>2*Vt){var Xa=nr.sub(nr.sub(Pr)._mult(Vt/Ua)._round());this.updateDistance(Pr,Xa),this.addCurrentVertex(Xa,cn,0,0,ur),Pr=Xa}}var Li=Pr&&jr,ei=Li?Q:lt?"butt":he;if(Li&&"round"===ei&&(Jn<Te?ei="miter":Jn<=2&&(ei="fakeround")),"miter"===ei&&Jn>ye&&(ei="bevel"),"bevel"===ei&&(Jn>2&&(ei="flipbevel"),Jn<ye&&(ei="miter")),Pr&&this.updateDistance(Pr,nr),"miter"===ei)mn._mult(Jn),this.addCurrentVertex(nr,mn,0,0,ur);else if("flipbevel"===ei){if(Jn>100)mn=rn.mult(-1);else{var ri=Jn*cn.add(rn).mag()/cn.sub(rn).mag();mn._perp()._mult(ri*(qa?-1:1))}this.addCurrentVertex(nr,mn,0,0,ur),this.addCurrentVertex(nr,mn.mult(-1),0,0,ur)}else if("bevel"===ei||"fakeround"===ei){var Ui=-Math.sqrt(Jn*Jn-1),Ti=qa?Ui:0,vo=qa?0:Ui;if(Pr&&this.addCurrentVertex(nr,cn,Ti,vo,ur),"fakeround"===ei)for(var No=Math.round(180*Sa/Math.PI/tp),po=1;po<No;po++){var go=po/No;if(.5!==go){var fo=go-.5;go+=go*fo*(go-1)*((1.0904+Ln*(Ln*(3.55645-1.43519*Ln)-3.2452))*fo*fo+(.848013+Ln*(.215638*Ln-1.06021)))}var Cs=rn.sub(cn)._mult(go)._add(cn)._unit()._mult(qa?-1:1);this.addHalfVertex(nr,Cs.x,Cs.y,!1,qa,0,ur)}jr&&this.addCurrentVertex(nr,rn,-Ti,-vo,ur)}else if("butt"===ei)this.addCurrentVertex(nr,mn,0,0,ur);else if("square"===ei){var zs=Pr?1:-1;this.addCurrentVertex(nr,mn,zs,zs,ur)}else"round"===ei&&(Pr&&(this.addCurrentVertex(nr,cn,0,0,ur),this.addCurrentVertex(nr,cn,1,1,ur,!0)),jr&&(this.addCurrentVertex(nr,rn,-1,-1,ur,!0),this.addCurrentVertex(nr,rn,0,0,ur)));if(ma&&Pn<dt-1){var El=nr.dist(jr);if(El>2*Vt){var qs=nr.add(jr.sub(nr)._mult(Vt/El)._round());this.updateDistance(nr,qs),this.addCurrentVertex(qs,rn,0,0,ur),nr=qs}}}}},Ru.prototype.addCurrentVertex=function(L,N,Q,he,ye,Te){void 0===Te&&(Te=!1);var Ye=N.x+N.y*Q,lt=N.y-N.x*Q,dt=-N.x+N.y*he,At=-N.y-N.x*he;this.addHalfVertex(L,Ye,lt,Te,!1,Q,ye),this.addHalfVertex(L,dt,At,Te,!0,-he,ye),this.distance>rv/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(L,N,Q,he,ye,Te))},Ru.prototype.addHalfVertex=function(L,N,Q,he,ye,Te,Ye){var lt=L.x,dt=L.y,Vt=(this.lineClips?this.scaledDistance*(rv-1):this.scaledDistance)*tv;if(this.layoutVertexArray.emplaceBack((lt<<1)+(he?1:0),(dt<<1)+(ye?1:0),Math.round(ev*N)+128,Math.round(ev*Q)+128,1+(0===Te?0:Te<0?-1:1)|(63&Vt)<<2,Vt>>6),this.lineClips){var Pr=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(Pr,this.lineClipsArray.length)}var jr=Ye.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,jr),Ye.primitiveLength++),ye?this.e2=jr:this.e1=jr},Ru.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ru.prototype.updateDistance=function(L,N){this.distance+=L.dist(N),this.updateScaledDistance()},Wa("LineBucket",Ru,{omit:["layers","patternFeatures"]});var np=new xn({"line-cap":new Et(In.layout_line["line-cap"]),"line-join":new wr(In.layout_line["line-join"]),"line-miter-limit":new Et(In.layout_line["line-miter-limit"]),"line-round-limit":new Et(In.layout_line["line-round-limit"]),"line-sort-key":new wr(In.layout_line["line-sort-key"])}),nv={paint:new xn({"line-opacity":new wr(In.paint_line["line-opacity"]),"line-color":new wr(In.paint_line["line-color"]),"line-translate":new Et(In.paint_line["line-translate"]),"line-translate-anchor":new Et(In.paint_line["line-translate-anchor"]),"line-width":new wr(In.paint_line["line-width"]),"line-gap-width":new wr(In.paint_line["line-gap-width"]),"line-offset":new wr(In.paint_line["line-offset"]),"line-blur":new wr(In.paint_line["line-blur"]),"line-dasharray":new vn(In.paint_line["line-dasharray"]),"line-pattern":new Nr(In.paint_line["line-pattern"]),"line-gradient":new bn(In.paint_line["line-gradient"])}),layout:np},ip=function(C){function L(){C.apply(this,arguments)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.possiblyEvaluate=function(Q,he){return he=new Ha(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),C.prototype.possiblyEvaluate.call(this,Q,he)},L.prototype.evaluate=function(Q,he,ye,Te){return he=d({},he,{zoom:Math.floor(he.zoom)}),C.prototype.evaluate.call(this,Q,he,ye,Te)},L}(wr),av=new ip(nv.paint.properties["line-width"].specification);av.useIntegerZoom=!0;var op=function(C){function L(N){C.call(this,N,nv),this.gradientVersion=0}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype._handleSpecialPaintPropertyUpdate=function(Q){if("line-gradient"===Q){var he=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=he._styleExpression.expression instanceof pl,this.gradientVersion=(this.gradientVersion+1)%p}},L.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},L.prototype.recalculate=function(Q,he){C.prototype.recalculate.call(this,Q,he),this.paint._values["line-floorwidth"]=av.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Q)},L.prototype.createBucket=function(Q){return new Ru(Q)},L.prototype.queryRadius=function(Q){var he=Q,ye=iv(Hl("line-width",this,he),Hl("line-gap-width",this,he)),Te=Hl("line-offset",this,he);return ye/2+Math.abs(Te)+Ju(this.paint.get("line-translate"))},L.prototype.queryIntersectsFeature=function(Q,he,ye,Te,Ye,lt,dt){var At=_f(Q,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),lt.angle,dt),Vt=dt/2*iv(this.paint.get("line-width").evaluate(he,ye),this.paint.get("line-gap-width").evaluate(he,ye)),ur=this.paint.get("line-offset").evaluate(he,ye);return ur&&(Te=sp(Te,ur*dt)),Ko(At,Te,Vt)},L.prototype.isTileClipped=function(){return!0},L}(Gn);function iv(C,L){return L>0?L+2*C:C}function sp(C,L){for(var N=[],Q=new a(0,0),he=0;he<C.length;he++){for(var ye=C[he],Te=[],Ye=0;Ye<ye.length;Ye++){var lt=ye[Ye-1],dt=ye[Ye],At=ye[Ye+1],Vt=0===Ye?Q:dt.sub(lt)._unit()._perp(),ur=Ye===ye.length-1?Q:At.sub(dt)._unit()._perp(),nr=Vt._add(ur)._unit(),Pr=nr.x*ur.x+nr.y*ur.y;nr._mult(1/Pr),Te.push(nr._mult(L)._add(dt))}N.push(Te)}return N}var lp=ra([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),up=ra([{name:"a_projected_pos",components:3,type:"Float32"}],4),fp=(ra([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ra([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ov=(ra([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ra([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),cp=ra([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hp(C,L,N){var Q=L.layout.get("text-transform").evaluate(N,{});return"uppercase"===Q?C=C.toLocaleUpperCase():"lowercase"===Q&&(C=C.toLocaleLowerCase()),ui.applyArabicShaping&&(C=ui.applyArabicShaping(C)),C}function vp(C,L,N){return C.sections.forEach(function(Q){Q.text=hp(Q.text,L,N)}),C}function dp(C){var L={},N={},Q=[],he=0;function ye(rn){Q.push(C[rn]),he++}function Te(rn,Pn,mn){var Ln=N[rn];return delete N[rn],N[Pn]=Ln,Q[Ln].geometry[0].pop(),Q[Ln].geometry[0]=Q[Ln].geometry[0].concat(mn[0]),Ln}function Ye(rn,Pn,mn){var Ln=L[Pn];return delete L[Pn],L[rn]=Ln,Q[Ln].geometry[0].shift(),Q[Ln].geometry[0]=mn[0].concat(Q[Ln].geometry[0]),Ln}function lt(rn,Pn,mn){var Ln=mn?Pn[0][Pn[0].length-1]:Pn[0][0];return rn+":"+Ln.x+":"+Ln.y}for(var dt=0;dt<C.length;dt++){var At=C[dt],Vt=At.geometry,ur=At.text?At.text.toString():null;if(ur){var nr=lt(ur,Vt),Pr=lt(ur,Vt,!0);if(nr in N&&Pr in L&&N[nr]!==L[Pr]){var jr=Ye(nr,Pr,Vt),cn=Te(nr,Pr,Q[jr].geometry);delete L[nr],delete N[Pr],N[lt(ur,Q[cn].geometry,!0)]=cn,Q[jr].geometry=null}else nr in N?Te(nr,Pr,Vt):Pr in L?Ye(nr,Pr,Vt):(ye(dt),L[nr]=he-1,N[Pr]=he-1)}else ye(dt)}return Q.filter(function(rn){return rn.geometry})}ra([{name:"triangle",components:3,type:"Uint16"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ra([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ra([{type:"Float32",name:"offsetX"}]),ra([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Kc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function pp(C){for(var L="",N=0;N<C.length;N++){var Q=C.charCodeAt(N+1)||null,he=C.charCodeAt(N-1)||null;Q&&ir(Q)&&!Kc[C[N+1]]||he&&ir(he)&&!Kc[C[N-1]]||!Kc[C[N]]?L+=C[N]:L+=Kc[C[N]]}return L}var Vl=24,gp=function(C,L,N,Q,he){var ye,Te,Ye=8*he-Q-1,lt=(1<<Ye)-1,dt=lt>>1,At=-7,Vt=N?he-1:0,ur=N?-1:1,nr=C[L+Vt];for(Vt+=ur,ye=nr&(1<<-At)-1,nr>>=-At,At+=Ye;At>0;ye=256*ye+C[L+Vt],Vt+=ur,At-=8);for(Te=ye&(1<<-At)-1,ye>>=-At,At+=Q;At>0;Te=256*Te+C[L+Vt],Vt+=ur,At-=8);if(0===ye)ye=1-dt;else{if(ye===lt)return Te?NaN:1/0*(nr?-1:1);Te+=Math.pow(2,Q),ye-=dt}return(nr?-1:1)*Te*Math.pow(2,ye-Q)},yp=function(C,L,N,Q,he,ye){var Te,Ye,lt,dt=8*ye-he-1,At=(1<<dt)-1,Vt=At>>1,ur=23===he?Math.pow(2,-24)-Math.pow(2,-77):0,nr=Q?0:ye-1,Pr=Q?1:-1,jr=L<0||0===L&&1/L<0?1:0;for(L=Math.abs(L),isNaN(L)||L===1/0?(Ye=isNaN(L)?1:0,Te=At):(Te=Math.floor(Math.log(L)/Math.LN2),L*(lt=Math.pow(2,-Te))<1&&(Te--,lt*=2),(L+=Te+Vt>=1?ur/lt:ur*Math.pow(2,1-Vt))*lt>=2&&(Te++,lt/=2),Te+Vt>=At?(Ye=0,Te=At):Te+Vt>=1?(Ye=(L*lt-1)*Math.pow(2,he),Te+=Vt):(Ye=L*Math.pow(2,Vt-1)*Math.pow(2,he),Te=0));he>=8;C[N+nr]=255&Ye,nr+=Pr,Ye/=256,he-=8);for(Te=Te<<he|Ye,dt+=he;dt>0;C[N+nr]=255&Te,nr+=Pr,Te/=256,dt-=8);C[N+nr-Pr]|=128*jr},sh={read:gp,write:yp},lh=Qo;function Qo(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}Qo.Varint=0,Qo.Fixed64=1,Qo.Bytes=2,Qo.Fixed32=5;var Dh=4294967296,sv=1/Dh,mp=12,lv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function xp(C,L,N){var he,ye,Q=N.buf;if(he=(112&(ye=Q[N.pos++]))>>4,ye<128||(he|=(127&(ye=Q[N.pos++]))<<3,ye<128)||(he|=(127&(ye=Q[N.pos++]))<<10,ye<128)||(he|=(127&(ye=Q[N.pos++]))<<17,ye<128)||(he|=(127&(ye=Q[N.pos++]))<<24,ye<128)||(he|=(1&(ye=Q[N.pos++]))<<31,ye<128))return Lc(C,he,L);throw new Error("Expected varint not more than 10 bytes")}function cc(C){return C.type===Qo.Bytes?C.readVarint()+C.pos:C.pos+1}function Lc(C,L,N){return N?4294967296*L+(C>>>0):4294967296*(L>>>0)+(C>>>0)}function bp(C,L){var N,Q;if(C>=0?(N=C%4294967296|0,Q=C/4294967296|0):(Q=~(-C/4294967296),4294967295^(N=~(-C%4294967296))?N=N+1|0:(N=0,Q=Q+1|0)),C>=0x10000000000000000||C<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");L.realloc(10),wp(N,Q,L),Tp(Q,L)}function wp(C,L,N){N.buf[N.pos++]=127&C|128,C>>>=7,N.buf[N.pos++]=127&C|128,C>>>=7,N.buf[N.pos++]=127&C|128,C>>>=7,N.buf[N.pos++]=127&C|128,C>>>=7,N.buf[N.pos]=127&C}function Tp(C,L){var N=(7&C)<<4;L.buf[L.pos++]|=N|((C>>>=3)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C)))))}function uv(C,L,N){var Q=L<=16383?1:L<=2097151?2:L<=268435455?3:Math.floor(Math.log(L)/(7*Math.LN2));N.realloc(Q);for(var he=N.pos-1;he>=C;he--)N.buf[he+Q]=N.buf[he]}function Ap(C,L){for(var N=0;N<C.length;N++)L.writeVarint(C[N])}function Sp(C,L){for(var N=0;N<C.length;N++)L.writeSVarint(C[N])}function Mp(C,L){for(var N=0;N<C.length;N++)L.writeFloat(C[N])}function Ep(C,L){for(var N=0;N<C.length;N++)L.writeDouble(C[N])}function Cp(C,L){for(var N=0;N<C.length;N++)L.writeBoolean(C[N])}function Lp(C,L){for(var N=0;N<C.length;N++)L.writeFixed32(C[N])}function Pp(C,L){for(var N=0;N<C.length;N++)L.writeSFixed32(C[N])}function Ip(C,L){for(var N=0;N<C.length;N++)L.writeFixed64(C[N])}function Dp(C,L){for(var N=0;N<C.length;N++)L.writeSFixed64(C[N])}function uh(C,L){return(C[L]|C[L+1]<<8|C[L+2]<<16)+16777216*C[L+3]}function Pc(C,L,N){C[N]=L,C[N+1]=L>>>8,C[N+2]=L>>>16,C[N+3]=L>>>24}function fv(C,L){return(C[L]|C[L+1]<<8|C[L+2]<<16)+(C[L+3]<<24)}function Rp(C,L,N){for(var Q="",he=L;he<N;){var lt,dt,At,ye=C[he],Te=null,Ye=ye>239?4:ye>223?3:ye>191?2:1;if(he+Ye>N)break;1===Ye?ye<128&&(Te=ye):2===Ye?128==(192&(lt=C[he+1]))&&(Te=(31&ye)<<6|63&lt)<=127&&(Te=null):3===Ye?(lt=C[he+1],dt=C[he+2],128==(192&lt)&&128==(192&dt)&&((Te=(15&ye)<<12|(63&lt)<<6|63&dt)<=2047||Te>=55296&&Te<=57343)&&(Te=null)):4===Ye&&(lt=C[he+1],dt=C[he+2],At=C[he+3],128==(192&lt)&&128==(192&dt)&&128==(192&At)&&((Te=(15&ye)<<18|(63&lt)<<12|(63&dt)<<6|63&At)<=65535||Te>=1114112)&&(Te=null)),null===Te?(Te=65533,Ye=1):Te>65535&&(Te-=65536,Q+=String.fromCharCode(Te>>>10&1023|55296),Te=56320|1023&Te),Q+=String.fromCharCode(Te),he+=Ye}return Q}function kp(C,L,N){return lv.decode(C.subarray(L,N))}function _p(C,L,N){for(var he,ye,Q=0;Q<L.length;Q++){if((he=L.charCodeAt(Q))>55295&&he<57344){if(!ye){he>56319||Q+1===L.length?(C[N++]=239,C[N++]=191,C[N++]=189):ye=he;continue}if(he<56320){C[N++]=239,C[N++]=191,C[N++]=189,ye=he;continue}he=ye-55296<<10|he-56320|65536,ye=null}else ye&&(C[N++]=239,C[N++]=191,C[N++]=189,ye=null);he<128?C[N++]=he:(he<2048?C[N++]=he>>6|192:(he<65536?C[N++]=he>>12|224:(C[N++]=he>>18|240,C[N++]=he>>12&63|128),C[N++]=he>>6&63|128),C[N++]=63&he|128)}return N}Qo.prototype={destroy:function(){this.buf=null},readFields:function(C,L,N){for(N=N||this.length;this.pos<N;){var Q=this.readVarint(),he=Q>>3,ye=this.pos;this.type=7&Q,C(he,L,this),this.pos===ye&&this.skip(Q)}return L},readMessage:function(C,L){return this.readFields(C,L,this.readVarint()+this.pos)},readFixed32:function(){var C=uh(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=fv(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=uh(this.buf,this.pos)+uh(this.buf,this.pos+4)*Dh;return this.pos+=8,C},readSFixed64:function(){var C=uh(this.buf,this.pos)+fv(this.buf,this.pos+4)*Dh;return this.pos+=8,C},readFloat:function(){var C=sh.read(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=sh.read(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var N,Q,L=this.buf;return N=127&(Q=L[this.pos++]),Q<128||(N|=(127&(Q=L[this.pos++]))<<7,Q<128)||(N|=(127&(Q=L[this.pos++]))<<14,Q<128)||(N|=(127&(Q=L[this.pos++]))<<21,Q<128)?N:xp(N|=(15&(Q=L[this.pos]))<<28,C,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2==1?(C+1)/-2:C/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var C=this.readVarint()+this.pos,L=this.pos;return this.pos=C,C-L>=mp&&lv?kp(this.buf,L,C):Rp(this.buf,L,C)},readBytes:function(){var C=this.readVarint()+this.pos,L=this.buf.subarray(this.pos,C);return this.pos=C,L},readPackedVarint:function(C,L){if(this.type!==Qo.Bytes)return C.push(this.readVarint(L));var N=cc(this);for(C=C||[];this.pos<N;)C.push(this.readVarint(L));return C},readPackedSVarint:function(C){if(this.type!==Qo.Bytes)return C.push(this.readSVarint());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==Qo.Bytes)return C.push(this.readBoolean());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==Qo.Bytes)return C.push(this.readFloat());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==Qo.Bytes)return C.push(this.readDouble());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==Qo.Bytes)return C.push(this.readFixed32());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==Qo.Bytes)return C.push(this.readSFixed32());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==Qo.Bytes)return C.push(this.readFixed64());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==Qo.Bytes)return C.push(this.readSFixed64());var L=cc(this);for(C=C||[];this.pos<L;)C.push(this.readSFixed64());return C},skip:function(C){var L=7&C;if(L===Qo.Varint)for(;this.buf[this.pos++]>127;);else if(L===Qo.Bytes)this.pos=this.readVarint()+this.pos;else if(L===Qo.Fixed32)this.pos+=4;else{if(L!==Qo.Fixed64)throw new Error("Unimplemented type: "+L);this.pos+=8}},writeTag:function(C,L){this.writeVarint(C<<3|L)},realloc:function(C){for(var L=this.length||16;L<this.pos+C;)L*=2;if(L!==this.length){var N=new Uint8Array(L);N.set(this.buf),this.buf=N,this.length=L}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),Pc(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),Pc(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),Pc(this.buf,-1&C,this.pos),Pc(this.buf,Math.floor(C*sv),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),Pc(this.buf,-1&C,this.pos),Pc(this.buf,Math.floor(C*sv),this.pos+4),this.pos+=8},writeVarint:function(C){(C=+C||0)>268435455||C<0?bp(C,this):(this.realloc(4),this.buf[this.pos++]=127&C|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=C>>>7&127))))},writeSVarint:function(C){this.writeVarint(C<0?2*-C-1:2*C)},writeBoolean:function(C){this.writeVarint(Boolean(C))},writeString:function(C){C=String(C),this.realloc(4*C.length),this.pos++;var L=this.pos;this.pos=_p(this.buf,C,this.pos);var N=this.pos-L;N>=128&&uv(L,N,this),this.pos=L-1,this.writeVarint(N),this.pos+=N},writeFloat:function(C){this.realloc(4),sh.write(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),sh.write(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var L=C.length;this.writeVarint(L),this.realloc(L);for(var N=0;N<L;N++)this.buf[this.pos++]=C[N]},writeRawMessage:function(C,L){this.pos++;var N=this.pos;C(L,this);var Q=this.pos-N;Q>=128&&uv(N,Q,this),this.pos=N-1,this.writeVarint(Q),this.pos+=Q},writeMessage:function(C,L,N){this.writeTag(C,Qo.Bytes),this.writeRawMessage(L,N)},writePackedVarint:function(C,L){L.length&&this.writeMessage(C,Ap,L)},writePackedSVarint:function(C,L){L.length&&this.writeMessage(C,Sp,L)},writePackedBoolean:function(C,L){L.length&&this.writeMessage(C,Cp,L)},writePackedFloat:function(C,L){L.length&&this.writeMessage(C,Mp,L)},writePackedDouble:function(C,L){L.length&&this.writeMessage(C,Ep,L)},writePackedFixed32:function(C,L){L.length&&this.writeMessage(C,Lp,L)},writePackedSFixed32:function(C,L){L.length&&this.writeMessage(C,Pp,L)},writePackedFixed64:function(C,L){L.length&&this.writeMessage(C,Ip,L)},writePackedSFixed64:function(C,L){L.length&&this.writeMessage(C,Dp,L)},writeBytesField:function(C,L){this.writeTag(C,Qo.Bytes),this.writeBytes(L)},writeFixed32Field:function(C,L){this.writeTag(C,Qo.Fixed32),this.writeFixed32(L)},writeSFixed32Field:function(C,L){this.writeTag(C,Qo.Fixed32),this.writeSFixed32(L)},writeFixed64Field:function(C,L){this.writeTag(C,Qo.Fixed64),this.writeFixed64(L)},writeSFixed64Field:function(C,L){this.writeTag(C,Qo.Fixed64),this.writeSFixed64(L)},writeVarintField:function(C,L){this.writeTag(C,Qo.Varint),this.writeVarint(L)},writeSVarintField:function(C,L){this.writeTag(C,Qo.Varint),this.writeSVarint(L)},writeStringField:function(C,L){this.writeTag(C,Qo.Bytes),this.writeString(L)},writeFloatField:function(C,L){this.writeTag(C,Qo.Fixed32),this.writeFloat(L)},writeDoubleField:function(C,L){this.writeTag(C,Qo.Fixed64),this.writeDouble(L)},writeBooleanField:function(C,L){this.writeVarintField(C,Boolean(L))}};var Rh=3;function Fp(C,L,N){1===C&&N.readMessage(zp,L)}function zp(C,L,N){if(3===C){var Q=N.readMessage(Op,{}),he=Q.id,ye=Q.bitmap,Te=Q.width,Ye=Q.height,lt=Q.left,dt=Q.top,At=Q.advance;L.push({id:he,bitmap:new Es({width:Te+2*Rh,height:Ye+2*Rh},ye),metrics:{width:Te,height:Ye,left:lt,top:dt,advance:At}})}}function Op(C,L,N){1===C?L.id=N.readVarint():2===C?L.bitmap=N.readBytes():3===C?L.width=N.readVarint():4===C?L.height=N.readVarint():5===C?L.left=N.readSVarint():6===C?L.top=N.readSVarint():7===C&&(L.advance=N.readVarint())}function Np(C){return new lh(C).readFields(Fp,[])}var cv=Rh;function hv(C){for(var L=0,N=0,Q=0,he=C;Q<he.length;Q+=1){var ye=he[Q];L+=ye.w*ye.h,N=Math.max(N,ye.w)}C.sort(function(cn,rn){return rn.h-cn.h});for(var Ye=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(L/.95)),N),h:1/0}],lt=0,dt=0,At=0,Vt=C;At<Vt.length;At+=1)for(var ur=Vt[At],nr=Ye.length-1;nr>=0;nr--){var Pr=Ye[nr];if(!(ur.w>Pr.w||ur.h>Pr.h)){if(ur.x=Pr.x,ur.y=Pr.y,dt=Math.max(dt,ur.y+ur.h),lt=Math.max(lt,ur.x+ur.w),ur.w===Pr.w&&ur.h===Pr.h){var jr=Ye.pop();nr<Ye.length&&(Ye[nr]=jr)}else ur.h===Pr.h?(Pr.x+=ur.w,Pr.w-=ur.w):ur.w===Pr.w?(Pr.y+=ur.h,Pr.h-=ur.h):(Ye.push({x:Pr.x+ur.w,y:Pr.y,w:Pr.w-ur.w,h:ur.h}),Pr.y+=ur.h,Pr.h-=ur.h);break}}return{w:lt,h:dt,fill:L/(lt*dt)||0}}var ff=1,fh=function(L,N){var Q=N.pixelRatio,he=N.version,ye=N.stretchX,Te=N.stretchY,Ye=N.content;this.paddedRect=L,this.pixelRatio=Q,this.stretchX=ye,this.stretchY=Te,this.content=Ye,this.version=he},Jc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Jc.tl.get=function(){return[this.paddedRect.x+ff,this.paddedRect.y+ff]},Jc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-ff,this.paddedRect.y+this.paddedRect.h-ff]},Jc.tlbr.get=function(){return this.tl.concat(this.br)},Jc.displaySize.get=function(){return[(this.paddedRect.w-2*ff)/this.pixelRatio,(this.paddedRect.h-2*ff)/this.pixelRatio]},Object.defineProperties(fh.prototype,Jc);var Qc=function(L,N){var Q={},he={};this.haveRenderCallbacks=[];var ye=[];this.addImages(L,Q,ye),this.addImages(N,he,ye);var Te=hv(ye),Ye=Te.w,lt=Te.h,dt=new Wo({width:Ye||1,height:lt||1});for(var At in L){var Vt=L[At],ur=Q[At].paddedRect;Wo.copy(Vt.data,dt,{x:0,y:0},{x:ur.x+ff,y:ur.y+ff},Vt.data)}for(var nr in N){var Pr=N[nr],jr=he[nr].paddedRect,cn=jr.x+ff,rn=jr.y+ff,Pn=Pr.data.width,mn=Pr.data.height;Wo.copy(Pr.data,dt,{x:0,y:0},{x:cn,y:rn},Pr.data),Wo.copy(Pr.data,dt,{x:0,y:mn-1},{x:cn,y:rn-1},{width:Pn,height:1}),Wo.copy(Pr.data,dt,{x:0,y:0},{x:cn,y:rn+mn},{width:Pn,height:1}),Wo.copy(Pr.data,dt,{x:Pn-1,y:0},{x:cn-1,y:rn},{width:1,height:mn}),Wo.copy(Pr.data,dt,{x:0,y:0},{x:cn+Pn,y:rn},{width:1,height:mn})}this.image=dt,this.iconPositions=Q,this.patternPositions=he};Qc.prototype.addImages=function(L,N,Q){for(var he in L){var ye=L[he],Te={x:0,y:0,w:ye.data.width+2*ff,h:ye.data.height+2*ff};Q.push(Te),N[he]=new fh(Te,ye),ye.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},Qc.prototype.patchUpdatedImages=function(L,N){for(var Q in L.dispatchRenderCallbacks(this.haveRenderCallbacks),L.updatedImages)this.patchUpdatedImage(this.iconPositions[Q],L.getImage(Q),N),this.patchUpdatedImage(this.patternPositions[Q],L.getImage(Q),N)},Qc.prototype.patchUpdatedImage=function(L,N,Q){if(L&&N&&L.version!==N.version){L.version=N.version;var he=L.tl,ye=he[0],Te=he[1];Q.update(N.data,void 0,{x:ye,y:Te})}},Wa("ImagePosition",fh),Wa("ImageAtlas",Qc);var Sf={horizontal:1,vertical:2,horizontalOnly:3},$c=-17;function Bp(C){for(var L=0,N=C;L<N.length;L+=1)if(0!==N[L].positionedGlyphs.length)return!1;return!0}var vv=57344,dv=63743,Ic=function(){this.scale=1,this.fontStack="",this.imageName=null};Ic.forText=function(L,N){var Q=new Ic;return Q.scale=L||1,Q.fontStack=N,Q},Ic.forImage=function(L){var N=new Ic;return N.imageName=L,N};var hu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Up(C,L){for(var N=[],Q=C.text,he=0,ye=0,Te=L;ye<Te.length;ye+=1){var Ye=Te[ye];N.push(C.substring(he,Ye)),he=Ye}return he<Q.length&&N.push(C.substring(he,Q.length)),N}function ch(C,L,N,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr){var cn=hu.fromFeature(C,he);Vt===Sf.vertical&&cn.verticalizePunctuation();var rn,Pn=ui.processBidirectionalText,mn=ui.processStyledBidirectionalText;if(Pn&&1===cn.sections.length){rn=[];for(var Fn=0,Jn=Pn(cn.toString(),kh(cn,dt,ye,L,Q,nr,Pr));Fn<Jn.length;Fn+=1){var Sa=Jn[Fn],ma=new hu;ma.text=Sa,ma.sections=cn.sections;for(var qa=0;qa<Sa.length;qa++)ma.sectionIndex.push(0);rn.push(ma)}}else if(mn){rn=[];for(var Xa=0,Li=mn(cn.text,cn.sectionIndex,kh(cn,dt,ye,L,Q,nr,Pr));Xa<Li.length;Xa+=1){var ei=Li[Xa],ri=new hu;ri.text=ei[0],ri.sectionIndex=ei[1],ri.sections=cn.sections,rn.push(ri)}}else rn=Up(cn,kh(cn,dt,ye,L,Q,nr,Pr));var Ui=[],Ti={positionedLines:Ui,text:cn.toString(),top:At[1],bottom:At[1],left:At[0],right:At[0],writingMode:Vt,iconsInText:!1,verticalizable:!1};return Gp(Ti,L,N,Q,rn,Te,Ye,lt,Vt,dt,ur,jr),!Bp(Ui)&&Ti}hu.fromFeature=function(L,N){for(var Q=new hu,he=0;he<L.sections.length;he++){var ye=L.sections[he];ye.image?Q.addImageSection(ye):Q.addTextSection(ye,N)}return Q},hu.prototype.length=function(){return this.text.length},hu.prototype.getSection=function(L){return this.sections[this.sectionIndex[L]]},hu.prototype.getSectionIndex=function(L){return this.sectionIndex[L]},hu.prototype.getCharCode=function(L){return this.text.charCodeAt(L)},hu.prototype.verticalizePunctuation=function(){this.text=pp(this.text)},hu.prototype.trim=function(){for(var L=0,N=0;N<this.text.length&&sc[this.text.charCodeAt(N)];N++)L++;for(var Q=this.text.length,he=this.text.length-1;he>=0&&he>=L&&sc[this.text.charCodeAt(he)];he--)Q--;this.text=this.text.substring(L,Q),this.sectionIndex=this.sectionIndex.slice(L,Q)},hu.prototype.substring=function(L,N){var Q=new hu;return Q.text=this.text.substring(L,N),Q.sectionIndex=this.sectionIndex.slice(L,N),Q.sections=this.sections,Q},hu.prototype.toString=function(){return this.text},hu.prototype.getMaxScale=function(){var L=this;return this.sectionIndex.reduce(function(N,Q){return Math.max(N,L.sections[Q].scale)},0)},hu.prototype.addTextSection=function(L,N){this.text+=L.text,this.sections.push(Ic.forText(L.scale,L.fontStack||N));for(var Q=this.sections.length-1,he=0;he<L.text.length;++he)this.sectionIndex.push(Q)},hu.prototype.addImageSection=function(L){var N=L.image?L.image.name:"";if(0!==N.length){var Q=this.getNextImageSectionCharCode();Q?(this.text+=String.fromCharCode(Q),this.sections.push(Ic.forImage(N)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images "+(dv-vv+2))}else O("Can't add FormattedSection with an empty image.")},hu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=dv?null:++this.imageSectionID:(this.imageSectionID=vv,this.imageSectionID)};var sc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cf={};function pv(C,L,N,Q,he,ye){if(L.imageName){var lt=Q[L.imageName];return lt?lt.displaySize[0]*L.scale*Vl/ye+he:0}var Te=N[L.fontStack],Ye=Te&&Te[C];return Ye?Ye.metrics.advance*L.scale+he:0}function Hp(C,L,N,Q,he,ye){for(var Te=0,Ye=0;Ye<C.length();Ye++){var lt=C.getSection(Ye);Te+=pv(C.getCharCode(Ye),lt,Q,he,L,ye)}return Te/Math.max(1,Math.ceil(Te/N))}function gv(C,L,N,Q){var he=Math.pow(C-L,2);return Q?C<L?he/2:2*he:he+Math.abs(N)*N}function Vp(C,L,N){var Q=0;return 10===C&&(Q-=1e4),N&&(Q+=150),(40===C||65288===C)&&(Q+=50),(41===L||65289===L)&&(Q+=50),Q}function yv(C,L,N,Q,he,ye){for(var Te=null,Ye=gv(L,N,he,ye),lt=0,dt=Q;lt<dt.length;lt+=1){var At=dt[lt],ur=gv(L-At.x,N,he,ye)+At.badness;ur<=Ye&&(Te=At,Ye=ur)}return{index:C,x:L,priorBreak:Te,badness:Ye}}function mv(C){return C?mv(C.priorBreak).concat(C.index):[]}function kh(C,L,N,Q,he,ye,Te){if("point"!==ye)return[];if(!C)return[];for(var Ye=[],lt=Hp(C,L,N,Q,he,Te),dt=C.text.indexOf("\u200b")>=0,At=0,Vt=0;Vt<C.length();Vt++){var ur=C.getSection(Vt),nr=C.getCharCode(Vt);if(sc[nr]||(At+=pv(nr,ur,Q,he,L,Te)),Vt<C.length()-1){var Pr=yt(nr);(cf[nr]||Pr||ur.imageName)&&Ye.push(yv(Vt+1,At,lt,Ye,Vp(nr,C.getCharCode(Vt+1),Pr&&dt),!1))}}return mv(yv(C.length(),At,lt,Ye,0,!0))}function _h(C){var L=.5,N=.5;switch(C){case"right":case"top-right":case"bottom-right":L=1;break;case"left":case"top-left":case"bottom-left":L=0}switch(C){case"bottom":case"bottom-right":case"bottom-left":N=1;break;case"top":case"top-right":case"top-left":N=0}return{horizontalAlign:L,verticalAlign:N}}function Gp(C,L,N,Q,he,ye,Te,Ye,lt,dt,At,Vt){for(var ur=0,nr=$c,Pr=0,jr=0,cn="right"===Ye?1:"left"===Ye?0:.5,rn=0,Pn=0,mn=he;Pn<mn.length;Pn+=1){var Ln=mn[Pn];Ln.trim();var Fn=Ln.getMaxScale(),Jn=(Fn-1)*Vl,Sa={positionedGlyphs:[],lineOffset:0};C.positionedLines[rn]=Sa;var ma=Sa.positionedGlyphs,qa=0;if(Ln.length()){for(var Ua=0;Ua<Ln.length();Ua++){var Xa=Ln.getSection(Ua),Li=Ln.getSectionIndex(Ua),ei=Ln.getCharCode(Ua),ri=0,Ui=null,Ti=null,vo=null,No=Vl,po=!(lt===Sf.horizontal||!At&&!Ot(ei)||At&&(sc[ei]||Rr(ei)));if(Xa.imageName){var Cs=Q[Xa.imageName];if(!Cs)continue;vo=Xa.imageName,C.iconsInText=C.iconsInText||!0,Ti=Cs.paddedRect;var zs=Cs.displaySize;Xa.scale=Xa.scale*Vl/Vt,Ui={width:zs[0],height:zs[1],left:ff,top:-cv,advance:po?zs[1]:zs[0]},ri=Jn+(Vl-zs[1]*Xa.scale),No=Ui.advance;var qs=po?zs[0]*Xa.scale-Vl*Fn:zs[1]*Xa.scale-Vl*Fn;qs>0&&qs>qa&&(qa=qs)}else{var go=N[Xa.fontStack],fo=go&&go[ei];if(fo&&fo.rect)Ti=fo.rect,Ui=fo.metrics;else{var Yo=L[Xa.fontStack],$o=Yo&&Yo[ei];if(!$o)continue;Ui=$o.metrics}ri=(Fn-Xa.scale)*Vl}po?(C.verticalizable=!0,ma.push({glyph:ei,imageName:vo,x:ur,y:nr+ri,vertical:po,scale:Xa.scale,fontStack:Xa.fontStack,sectionIndex:Li,metrics:Ui,rect:Ti}),ur+=No*Xa.scale+dt):(ma.push({glyph:ei,imageName:vo,x:ur,y:nr+ri,vertical:po,scale:Xa.scale,fontStack:Xa.fontStack,sectionIndex:Li,metrics:Ui,rect:Ti}),ur+=Ui.advance*Xa.scale+dt)}if(0!==ma.length){var vu=ur-dt;Pr=Math.max(vu,Pr),jp(ma,0,ma.length-1,cn,qa)}ur=0;var du=ye*Fn+qa;Sa.lineOffset=Math.max(qa,Jn),nr+=du,jr=Math.max(du,jr),++rn}else nr+=ye,++rn}var Cl=nr-$c,ku=_h(Te),_u=ku.horizontalAlign,dl=ku.verticalAlign;Wp(C.positionedLines,cn,_u,dl,Pr,jr,ye,Cl,he.length),C.top+=-dl*Cl,C.bottom=C.top+Cl,C.left+=-_u*Pr,C.right=C.left+Pr}function jp(C,L,N,Q,he){if(Q||he)for(var ye=C[N],Te=ye.metrics.advance*ye.scale,Ye=(C[N].x+Te)*Q,lt=L;lt<=N;lt++)C[lt].x-=Ye,C[lt].y+=he}function Wp(C,L,N,Q,he,ye,Te,Ye,lt){var dt=(L-N)*he,At=0;At=ye!==Te?-Ye*Q-$c:(-Q*lt+.5)*Te;for(var Vt=0,ur=C;Vt<ur.length;Vt+=1)for(var Pr=0,jr=ur[Vt].positionedGlyphs;Pr<jr.length;Pr+=1){var cn=jr[Pr];cn.x+=dt,cn.y+=At}}function Yp(C,L,N){var Q=_h(N),he=Q.horizontalAlign,ye=Q.verticalAlign,Te=L[0],Ye=L[1],lt=Te-C.displaySize[0]*he,dt=lt+C.displaySize[0],At=Ye-C.displaySize[1]*ye;return{image:C,top:At,bottom:At+C.displaySize[1],left:lt,right:dt}}function xv(C,L,N,Q,he,ye){var Ye,Te=C.image;if(Te.content){var lt=Te.content,dt=Te.pixelRatio||1;Ye=[lt[0]/dt,lt[1]/dt,Te.displaySize[0]-lt[2]/dt,Te.displaySize[1]-lt[3]/dt]}var ur,nr,Pr,jr,At=L.left*ye,Vt=L.right*ye;"width"===N||"both"===N?(jr=he[0]+At-Q[3],nr=he[0]+Vt+Q[1]):nr=(jr=he[0]+(At+Vt-Te.displaySize[0])/2)+Te.displaySize[0];var cn=L.top*ye,rn=L.bottom*ye;return"height"===N||"both"===N?(ur=he[1]+cn-Q[0],Pr=he[1]+rn+Q[2]):Pr=(ur=he[1]+(cn+rn-Te.displaySize[1])/2)+Te.displaySize[1],{image:Te,top:ur,right:nr,bottom:Pr,left:jr,collisionPadding:Ye}}cf[10]=!0,cf[32]=!0,cf[38]=!0,cf[40]=!0,cf[41]=!0,cf[43]=!0,cf[45]=!0,cf[47]=!0,cf[173]=!0,cf[183]=!0,cf[8203]=!0,cf[8208]=!0,cf[8211]=!0,cf[8231]=!0;var Dc=function(C){function L(N,Q,he,ye){C.call(this,N,Q),this.angle=he,void 0!==ye&&(this.segment=ye)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.clone=function(){return new L(this.x,this.y,this.angle,this.segment)},L}(a);Wa("Anchor",Dc);var tc=128;function Fh(C,L){var N=L.expression;if("constant"===N.kind)return{kind:"constant",layoutSize:N.evaluate(new Ha(C+1))};if("source"===N.kind)return{kind:"source"};for(var he=N.zoomStops,ye=N.interpolationType,Te=0;Te<he.length&&he[Te]<=C;)Te++;for(var Ye=Te=Math.max(0,Te-1);Ye<he.length&&he[Ye]<C+1;)Ye++;Ye=Math.min(he.length-1,Ye);var lt=he[Te],dt=he[Ye];return"composite"===N.kind?{kind:"composite",minZoom:lt,maxZoom:dt,interpolationType:ye}:{kind:"camera",minZoom:lt,maxZoom:dt,minSize:N.evaluate(new Ha(lt)),maxSize:N.evaluate(new Ha(dt)),interpolationType:ye}}function bv(C,L,N){var Q=L.uSize,he=L.uSizeT,ye=N.lowerSize,Te=N.upperSize;return"source"===C.kind?ye/tc:"composite"===C.kind?Fo(ye/tc,Te/tc,he):Q}function wv(C,L){var N=0,Q=0;if("constant"===C.kind)Q=C.layoutSize;else if("source"!==C.kind){var he=C.interpolationType,ye=C.minZoom,Te=C.maxZoom,Ye=he?s(cs.interpolationFactor(he,L,ye,Te),0,1):0;"camera"===C.kind?Q=Fo(C.minSize,C.maxSize,Ye):N=Ye}return{uSizeT:N,uSize:Q}}var Xp=Object.freeze({__proto__:null,getSizeData:Fh,evaluateSizeForFeature:bv,evaluateSizeForZoom:wv,SIZE_PACK_FACTOR:tc});function Tv(C,L,N,Q,he){if(void 0===L.segment)return!0;for(var ye=L,Te=L.segment+1,Ye=0;Ye>-N/2;){if(--Te<0)return!1;Ye-=C[Te].dist(ye),ye=C[Te]}Ye+=C[Te].dist(C[Te+1]),Te++;for(var lt=[],dt=0;Ye<N/2;){var At=C[Te-1],Vt=C[Te],ur=C[Te+1];if(!ur)return!1;var nr=At.angleTo(Vt)-Vt.angleTo(ur);for(nr=Math.abs((nr+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Ye,angleDelta:nr}),dt+=nr;Ye-lt[0].distance>Q;)dt-=lt.shift().angleDelta;if(dt>he)return!1;Te++,Ye+=Vt.dist(ur)}return!0}function Av(C){for(var L=0,N=0;N<C.length-1;N++)L+=C[N].dist(C[N+1]);return L}function Sv(C,L,N){return C?.6*L*N:0}function Mv(C,L){return Math.max(C?C.right-C.left:0,L?L.right-L.left:0)}function Zp(C,L,N,Q,he,ye){for(var Te=Sv(N,he,ye),Ye=Mv(N,Q)*ye,lt=0,dt=Av(C)/2,At=0;At<C.length-1;At++){var Vt=C[At],ur=C[At+1],nr=Vt.dist(ur);if(lt+nr>dt){var Pr=(dt-lt)/nr,jr=Fo(Vt.x,ur.x,Pr),cn=Fo(Vt.y,ur.y,Pr),rn=new Dc(jr,cn,ur.angleTo(Vt),At);return rn._round(),!Te||Tv(C,rn,Ye,Te,L)?rn:void 0}lt+=nr}}function Kp(C,L,N,Q,he,ye,Te,Ye,lt){var dt=Sv(Q,ye,Te),At=Mv(Q,he),Vt=At*Te,ur=0===C[0].x||C[0].x===lt||0===C[0].y||C[0].y===lt;return L-Vt<L/4&&(L=Vt+L/4),Ev(C,ur?L/2*Ye%L:(At/2+2*ye)*Te*Ye%L,L,dt,N,Vt,ur,!1,lt)}function Ev(C,L,N,Q,he,ye,Te,Ye,lt){for(var dt=ye/2,At=Av(C),Vt=0,ur=L-N,nr=[],Pr=0;Pr<C.length-1;Pr++){for(var jr=C[Pr],cn=C[Pr+1],rn=jr.dist(cn),Pn=cn.angleTo(jr);ur+N<Vt+rn;){var mn=((ur+=N)-Vt)/rn,Ln=Fo(jr.x,cn.x,mn),Fn=Fo(jr.y,cn.y,mn);if(Ln>=0&&Ln<lt&&Fn>=0&&Fn<lt&&ur-dt>=0&&ur+dt<=At){var Jn=new Dc(Ln,Fn,Pn,Pr);Jn._round(),(!Q||Tv(C,Jn,ye,Q,he))&&nr.push(Jn)}}Vt+=rn}return!Ye&&!nr.length&&!Te&&(nr=Ev(C,Vt/2,N,Q,he,ye,Te,!0,lt)),nr}function Cv(C,L,N,Q,he){for(var ye=[],Te=0;Te<C.length;Te++)for(var Ye=C[Te],lt=void 0,dt=0;dt<Ye.length-1;dt++){var At=Ye[dt],Vt=Ye[dt+1];At.x<L&&Vt.x<L||(At.x<L?At=new a(L,At.y+(Vt.y-At.y)*((L-At.x)/(Vt.x-At.x)))._round():Vt.x<L&&(Vt=new a(L,At.y+(Vt.y-At.y)*((L-At.x)/(Vt.x-At.x)))._round()),!(At.y<N&&Vt.y<N)&&(At.y<N?At=new a(At.x+(Vt.x-At.x)*((N-At.y)/(Vt.y-At.y)),N)._round():Vt.y<N&&(Vt=new a(At.x+(Vt.x-At.x)*((N-At.y)/(Vt.y-At.y)),N)._round()),!(At.x>=Q&&Vt.x>=Q)&&(At.x>=Q?At=new a(Q,At.y+(Vt.y-At.y)*((Q-At.x)/(Vt.x-At.x)))._round():Vt.x>=Q&&(Vt=new a(Q,At.y+(Vt.y-At.y)*((Q-At.x)/(Vt.x-At.x)))._round()),!(At.y>=he&&Vt.y>=he)&&(At.y>=he?At=new a(At.x+(Vt.x-At.x)*((he-At.y)/(Vt.y-At.y)),he)._round():Vt.y>=he&&(Vt=new a(At.x+(Vt.x-At.x)*((he-At.y)/(Vt.y-At.y)),he)._round()),(!lt||!At.equals(lt[lt.length-1]))&&(lt=[At],ye.push(lt)),lt.push(Vt)))))}return ye}var Rc=ff;function Lv(C,L,N,Q){var he=[],ye=C.image,Te=ye.pixelRatio,Ye=ye.paddedRect.w-2*Rc,lt=ye.paddedRect.h-2*Rc,dt=C.right-C.left,At=C.bottom-C.top,Vt=ye.stretchX||[[0,Ye]],ur=ye.stretchY||[[0,lt]],nr=function(go,fo){return go+fo[1]-fo[0]},Pr=Vt.reduce(nr,0),jr=ur.reduce(nr,0),cn=Ye-Pr,rn=lt-jr,Pn=0,mn=Pr,Ln=0,Fn=jr,Jn=0,Sa=cn,ma=0,qa=rn;if(ye.content&&Q){var Ua=ye.content;Pn=hh(Vt,0,Ua[0]),Ln=hh(ur,0,Ua[1]),mn=hh(Vt,Ua[0],Ua[2]),Fn=hh(ur,Ua[1],Ua[3]),Jn=Ua[0]-Pn,ma=Ua[1]-Ln,Sa=Ua[2]-Ua[0]-mn,qa=Ua[3]-Ua[1]-Fn}var Xa=function(go,fo,Yo,$o){var Cs=vh(go.stretch-Pn,mn,dt,C.left),zs=dh(go.fixed-Jn,Sa,go.stretch,Pr),El=vh(fo.stretch-Ln,Fn,At,C.top),qs=dh(fo.fixed-ma,qa,fo.stretch,jr),vu=vh(Yo.stretch-Pn,mn,dt,C.left),du=dh(Yo.fixed-Jn,Sa,Yo.stretch,Pr),Cl=vh($o.stretch-Ln,Fn,At,C.top),ku=dh($o.fixed-ma,qa,$o.stretch,jr),_u=new a(Cs,El),dl=new a(vu,El),Fu=new a(vu,Cl),Mf=new a(Cs,Cl),dc=new a(zs/Te,qs/Te),xc=new a(du/Te,ku/Te),bc=L*Math.PI/180;if(bc){var wc=Math.sin(bc),Uc=Math.cos(bc),Yf=[Uc,-wc,wc,Uc];_u._matMult(Yf),dl._matMult(Yf),Mf._matMult(Yf),Fu._matMult(Yf)}var bh=go.stretch+go.fixed,Gh=Yo.stretch+Yo.fixed,wh=fo.stretch+fo.fixed,jh=$o.stretch+$o.fixed;return{tl:_u,tr:dl,bl:Mf,br:Fu,tex:{x:ye.paddedRect.x+Rc+bh,y:ye.paddedRect.y+Rc+wh,w:Gh-bh,h:jh-wh},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:dc,pixelOffsetBR:xc,minFontScaleX:Sa/Te/dt,minFontScaleY:qa/Te/At,isSDF:N}};if(Q&&(ye.stretchX||ye.stretchY))for(var Li=Pv(Vt,cn,Pr),ei=Pv(ur,rn,jr),ri=0;ri<Li.length-1;ri++)for(var Ui=Li[ri],Ti=Li[ri+1],vo=0;vo<ei.length-1;vo++){var No=ei[vo],po=ei[vo+1];he.push(Xa(Ui,No,Ti,po))}else he.push(Xa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ye+1},{fixed:0,stretch:lt+1}));return he}function hh(C,L,N){for(var Q=0,he=0,ye=C;he<ye.length;he+=1){var Te=ye[he];Q+=Math.max(L,Math.min(N,Te[1]))-Math.max(L,Math.min(N,Te[0]))}return Q}function Pv(C,L,N){for(var Q=[{fixed:-Rc,stretch:0}],he=0,ye=C;he<ye.length;he+=1){var Te=ye[he],Ye=Te[0],lt=Te[1],dt=Q[Q.length-1];Q.push({fixed:Ye-dt.stretch,stretch:dt.stretch}),Q.push({fixed:Ye-dt.stretch,stretch:dt.stretch+(lt-Ye)})}return Q.push({fixed:L+Rc,stretch:N}),Q}function vh(C,L,N,Q){return C/L*N+Q}function dh(C,L,N,Q){return C-L*N/Q}function Jp(C,L,N,Q,he,ye,Te,Ye){for(var lt=Q.layout.get("text-rotate").evaluate(ye,{})*Math.PI/180,dt=[],At=0,Vt=L.positionedLines;At<Vt.length;At+=1)for(var ur=Vt[At],nr=0,Pr=ur.positionedGlyphs;nr<Pr.length;nr+=1){var jr=Pr[nr];if(jr.rect){var cn=jr.rect||{},Pn=cv+1,mn=!0,Ln=1,Fn=0,Jn=(he||Ye)&&jr.vertical,Sa=jr.metrics.advance*jr.scale/2;if(Ye&&L.verticalizable){var ma=(jr.scale-1)*Vl,qa=(Vl-jr.metrics.width*jr.scale)/2;Fn=ur.lineOffset/2-(jr.imageName?-qa:ma)}if(jr.imageName){var Ua=Te[jr.imageName];mn=Ua.sdf,Ln=Ua.pixelRatio,Pn=ff/Ln}var Xa=he?[jr.x+Sa,jr.y]:[0,0],Li=he?[0,0]:[jr.x+Sa+N[0],jr.y+N[1]-Fn],ei=[0,0];Jn&&(ei=Li,Li=[0,0]);var ri=(jr.metrics.left-Pn)*jr.scale-Sa+Li[0],Ui=(-jr.metrics.top-Pn)*jr.scale+Li[1],Ti=ri+cn.w*jr.scale/Ln,vo=Ui+cn.h*jr.scale/Ln,No=new a(ri,Ui),po=new a(Ti,Ui),go=new a(ri,vo),fo=new a(Ti,vo);if(Jn){var Yo=new a(-Sa,Sa-$c),$o=-Math.PI/2,Cs=Vl/2-Sa,zs=jr.imageName?Cs:0,El=new a(5-$c-Cs,-zs),qs=new(Function.prototype.bind.apply(a,[null].concat(ei)));No._rotateAround($o,Yo)._add(El)._add(qs),po._rotateAround($o,Yo)._add(El)._add(qs),go._rotateAround($o,Yo)._add(El)._add(qs),fo._rotateAround($o,Yo)._add(El)._add(qs)}if(lt){var vu=Math.sin(lt),du=Math.cos(lt),Cl=[du,-vu,vu,du];No._matMult(Cl),po._matMult(Cl),go._matMult(Cl),fo._matMult(Cl)}var ku=new a(0,0),_u=new a(0,0),dl=0,Fu=0;dt.push({tl:No,tr:po,bl:go,br:fo,tex:cn,writingMode:L.writingMode,glyphOffset:Xa,sectionIndex:jr.sectionIndex,isSDF:mn,pixelOffsetTL:ku,pixelOffsetBR:_u,minFontScaleX:dl,minFontScaleY:Fu})}}return dt}var ph=function(L,N,Q,he,ye,Te,Ye,lt,dt,At){if(this.boxStartIndex=L.length,dt){var Vt=Te.top,ur=Te.bottom,nr=Te.collisionPadding;nr&&(Vt-=nr[1],ur+=nr[3]);var Pr=ur-Vt;Pr>0&&(Pr=Math.max(10,Pr),this.circleDiameter=Pr)}else{var jr=Te.top*Ye-lt,cn=Te.bottom*Ye+lt,rn=Te.left*Ye-lt,Pn=Te.right*Ye+lt,mn=Te.collisionPadding;if(mn&&(rn-=mn[0]*Ye,jr-=mn[1]*Ye,Pn+=mn[2]*Ye,cn+=mn[3]*Ye),At){var Ln=new a(rn,jr),Fn=new a(Pn,jr),Jn=new a(rn,cn),Sa=new a(Pn,cn),ma=At*Math.PI/180;Ln._rotate(ma),Fn._rotate(ma),Jn._rotate(ma),Sa._rotate(ma),rn=Math.min(Ln.x,Fn.x,Jn.x,Sa.x),Pn=Math.max(Ln.x,Fn.x,Jn.x,Sa.x),jr=Math.min(Ln.y,Fn.y,Jn.y,Sa.y),cn=Math.max(Ln.y,Fn.y,Jn.y,Sa.y)}L.emplaceBack(N.x,N.y,rn,jr,Pn,cn,Q,he,ye)}this.boxEndIndex=L.length},kc=function(L,N){if(void 0===L&&(L=[]),void 0===N&&(N=Qp),this.data=L,this.length=this.data.length,this.compare=N,this.length>0)for(var Q=(this.length>>1)-1;Q>=0;Q--)this._down(Q)};function Qp(C,L){return C<L?-1:C>L?1:0}function $p(C,L,N){void 0===L&&(L=1),void 0===N&&(N=!1);for(var Q=1/0,he=1/0,ye=-1/0,Te=-1/0,Ye=C[0],lt=0;lt<Ye.length;lt++){var dt=Ye[lt];(!lt||dt.x<Q)&&(Q=dt.x),(!lt||dt.y<he)&&(he=dt.y),(!lt||dt.x>ye)&&(ye=dt.x),(!lt||dt.y>Te)&&(Te=dt.y)}var At=ye-Q,Vt=Te-he,ur=Math.min(At,Vt),nr=ur/2,Pr=new kc([],qp);if(0===ur)return new a(Q,he);for(var jr=Q;jr<ye;jr+=ur)for(var cn=he;cn<Te;cn+=ur)Pr.push(new _c(jr+nr,cn+nr,nr,C));for(var rn=t0(C),Pn=Pr.length;Pr.length;){var mn=Pr.pop();(mn.d>rn.d||!rn.d)&&(rn=mn,N&&console.log("found best %d after %d probes",Math.round(1e4*mn.d)/1e4,Pn)),!(mn.max-rn.d<=L)&&(nr=mn.h/2,Pr.push(new _c(mn.p.x-nr,mn.p.y-nr,nr,C)),Pr.push(new _c(mn.p.x+nr,mn.p.y-nr,nr,C)),Pr.push(new _c(mn.p.x-nr,mn.p.y+nr,nr,C)),Pr.push(new _c(mn.p.x+nr,mn.p.y+nr,nr,C)),Pn+=4)}return N&&(console.log("num probes: "+Pn),console.log("best distance: "+rn.d)),rn.p}function qp(C,L){return L.max-C.max}function _c(C,L,N,Q){this.p=new a(C,L),this.h=N,this.d=e0(this.p,Q),this.max=this.d+this.h*Math.SQRT2}function e0(C,L){for(var N=!1,Q=1/0,he=0;he<L.length;he++)for(var ye=L[he],Te=0,Ye=ye.length,lt=Ye-1;Te<Ye;lt=Te++){var dt=ye[Te],At=ye[lt];dt.y>C.y!=At.y>C.y&&C.x<(At.x-dt.x)*(C.y-dt.y)/(At.y-dt.y)+dt.x&&(N=!N),Q=Math.min(Q,kf(C,dt,At))}return(N?1:-1)*Math.sqrt(Q)}function t0(C){for(var L=0,N=0,Q=0,he=C[0],ye=0,Te=he.length,Ye=Te-1;ye<Te;Ye=ye++){var lt=he[ye],dt=he[Ye],At=lt.x*dt.y-dt.x*lt.y;N+=(lt.x+dt.x)*At,Q+=(lt.y+dt.y)*At,L+=3*At}return new _c(N/L,Q/L,0,C)}kc.prototype.push=function(L){this.data.push(L),this.length++,this._up(this.length-1)},kc.prototype.pop=function(){if(0!==this.length){var L=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),L}},kc.prototype.peek=function(){return this.data[0]},kc.prototype._up=function(L){for(var N=this,Q=N.data,he=N.compare,ye=Q[L];L>0;){var Te=L-1>>1,Ye=Q[Te];if(he(ye,Ye)>=0)break;Q[L]=Ye,L=Te}Q[L]=ye},kc.prototype._down=function(L){for(var N=this,Q=N.data,he=N.compare,ye=this.length>>1,Te=Q[L];L<ye;){var Ye=1+(L<<1),lt=Q[Ye],dt=Ye+1;if(dt<this.length&&he(Q[dt],lt)<0&&(Ye=dt,lt=Q[dt]),he(lt,Te)>=0)break;Q[L]=lt,L=Ye}Q[L]=Te};var Fc=7,zh=Number.POSITIVE_INFINITY;function Iv(C,L){function N(he,ye){var Te=0,Ye=0;ye<0&&(ye=0);var lt=ye/Math.sqrt(2);switch(he){case"top-right":case"top-left":Ye=lt-Fc;break;case"bottom-right":case"bottom-left":Ye=-lt+Fc;break;case"bottom":Ye=-ye+Fc;break;case"top":Ye=ye-Fc}switch(he){case"top-right":case"bottom-right":Te=-lt;break;case"top-left":case"bottom-left":Te=lt;break;case"left":Te=ye;break;case"right":Te=-ye}return[Te,Ye]}function Q(he,ye,Te){var Ye=0,lt=0;switch(ye=Math.abs(ye),Te=Math.abs(Te),he){case"top-right":case"top-left":case"top":lt=Te-Fc;break;case"bottom-right":case"bottom-left":case"bottom":lt=-Te+Fc}switch(he){case"top-right":case"bottom-right":case"right":Ye=-ye;break;case"top-left":case"bottom-left":case"left":Ye=ye}return[Ye,lt]}return L[1]!==zh?Q(C,L[0],L[1]):N(C,L[0])}function r0(C,L,N,Q,he,ye,Te){C.createArrays();var Ye=512*C.overscaling;C.tilePixelRatio=On/Ye,C.compareText={},C.iconsNeedLinear=!1;var lt=C.layers[0].layout,dt=C.layers[0]._unevaluatedLayout._values,At={};if("composite"===C.textSizeData.kind){var Vt=C.textSizeData,ur=Vt.minZoom,nr=Vt.maxZoom;At.compositeTextSizes=[dt["text-size"].possiblyEvaluate(new Ha(ur),Te),dt["text-size"].possiblyEvaluate(new Ha(nr),Te)]}if("composite"===C.iconSizeData.kind){var Pr=C.iconSizeData,jr=Pr.minZoom,cn=Pr.maxZoom;At.compositeIconSizes=[dt["icon-size"].possiblyEvaluate(new Ha(jr),Te),dt["icon-size"].possiblyEvaluate(new Ha(cn),Te)]}At.layoutTextSize=dt["text-size"].possiblyEvaluate(new Ha(C.zoom+1),Te),At.layoutIconSize=dt["icon-size"].possiblyEvaluate(new Ha(C.zoom+1),Te),At.textMaxSize=dt["text-size"].possiblyEvaluate(new Ha(18));for(var rn=lt.get("text-line-height")*Vl,Pn="map"===lt.get("text-rotation-alignment")&&"point"!==lt.get("symbol-placement"),mn=lt.get("text-keep-upright"),Ln=lt.get("text-size"),Fn=function(){var ma=Sa[Jn],qa=lt.get("text-font").evaluate(ma,{},Te).join(","),Ua=Ln.evaluate(ma,{},Te),Xa=At.layoutTextSize.evaluate(ma,{},Te),Li=At.layoutIconSize.evaluate(ma,{},Te),ei={horizontal:{},vertical:void 0},ri=ma.text,Ui=[0,0];if(ri){var Ti=ri.toString(),vo=lt.get("text-letter-spacing").evaluate(ma,{},Te)*Vl,No=tt(Ti)?vo:0,po=lt.get("text-anchor").evaluate(ma,{},Te),go=lt.get("text-variable-anchor");if(!go){var fo=lt.get("text-radial-offset").evaluate(ma,{},Te);Ui=fo?Iv(po,[fo*Vl,zh]):lt.get("text-offset").evaluate(ma,{},Te).map(function(dc){return dc*Vl})}var Yo=Pn?"center":lt.get("text-justify").evaluate(ma,{},Te),$o=lt.get("symbol-placement"),Cs="point"===$o?lt.get("text-max-width").evaluate(ma,{},Te)*Vl:0,zs=function(){C.allowVerticalPlacement&&Je(Ti)&&(ei.vertical=ch(ri,L,N,he,qa,Cs,rn,po,"left",No,Ui,Sf.vertical,!0,$o,Xa,Ua))};if(!Pn&&go){for(var El="auto"===Yo?go.map(function(dc){return Oh(dc)}):[Yo],qs=!1,vu=0;vu<El.length;vu++){var du=El[vu];if(!ei.horizontal[du])if(qs)ei.horizontal[du]=ei.horizontal[0];else{var Cl=ch(ri,L,N,he,qa,Cs,rn,"center",du,No,Ui,Sf.horizontal,!1,$o,Xa,Ua);Cl&&(ei.horizontal[du]=Cl,qs=1===Cl.positionedLines.length)}}zs()}else{"auto"===Yo&&(Yo=Oh(po));var ku=ch(ri,L,N,he,qa,Cs,rn,po,Yo,No,Ui,Sf.horizontal,!1,$o,Xa,Ua);ku&&(ei.horizontal[Yo]=ku),zs(),Je(Ti)&&Pn&&mn&&(ei.vertical=ch(ri,L,N,he,qa,Cs,rn,po,Yo,No,Ui,Sf.vertical,!1,$o,Xa,Ua))}}var _u=void 0,dl=!1;if(ma.icon&&ma.icon.name){var Fu=Q[ma.icon.name];Fu&&(_u=Yp(he[ma.icon.name],lt.get("icon-offset").evaluate(ma,{},Te),lt.get("icon-anchor").evaluate(ma,{},Te)),dl=Fu.sdf,void 0===C.sdfIcons?C.sdfIcons=Fu.sdf:C.sdfIcons!==Fu.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fu.pixelRatio!==C.pixelRatio||0!==lt.get("icon-rotate").constantOr(1))&&(C.iconsNeedLinear=!0))}var Mf=Rv(ei.horizontal)||ei.vertical;C.iconsInText=!!Mf&&Mf.iconsInText,(Mf||_u)&&n0(C,ma,ei,_u,Q,At,Xa,Li,Ui,dl,Te)},Jn=0,Sa=C.features;Jn<Sa.length;Jn+=1)Fn();ye&&C.generateCollisionDebugBuffers()}function Oh(C){switch(C){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function n0(C,L,N,Q,he,ye,Te,Ye,lt,dt,At){var Vt=ye.textMaxSize.evaluate(L,{});void 0===Vt&&(Vt=Te);var ei,ur=C.layers[0].layout,nr=ur.get("icon-offset").evaluate(L,{},At),Pr=Rv(N.horizontal),jr=24,cn=Te/jr,rn=C.tilePixelRatio*cn,Pn=C.tilePixelRatio*Vt/jr,mn=C.tilePixelRatio*Ye,Ln=C.tilePixelRatio*ur.get("symbol-spacing"),Fn=ur.get("text-padding")*C.tilePixelRatio,Jn=ur.get("icon-padding")*C.tilePixelRatio,Sa=ur.get("text-max-angle")/180*Math.PI,ma="map"===ur.get("text-rotation-alignment")&&"point"!==ur.get("symbol-placement"),qa="map"===ur.get("icon-rotation-alignment")&&"point"!==ur.get("symbol-placement"),Ua=ur.get("symbol-placement"),Xa=Ln/2,Li=ur.get("icon-text-fit");Q&&"none"!==Li&&(C.allowVerticalPlacement&&N.vertical&&(ei=xv(Q,N.vertical,Li,ur.get("icon-text-fit-padding"),nr,cn)),Pr&&(Q=xv(Q,Pr,Li,ur.get("icon-text-fit-padding"),nr,cn)));var ri=function(Uc,Yf){Yf.x<0||Yf.x>=On||Yf.y<0||Yf.y>=On||a0(C,Yf,Uc,N,Q,he,ei,C.layers[0],C.collisionBoxArray,L.index,L.sourceLayerIndex,C.index,rn,Fn,ma,lt,mn,Jn,qa,nr,L,ye,dt,At,Te)};if("line"===Ua)for(var Ui=0,Ti=Cv(L.geometry,0,0,On,On);Ui<Ti.length;Ui+=1)for(var vo=Ti[Ui],po=0,go=Kp(vo,Ln,Sa,N.vertical||Pr,Q,jr,Pn,C.overscaling,On);po<go.length;po+=1){var fo=go[po];(!Pr||!i0(C,Pr.text,Xa,fo))&&ri(vo,fo)}else if("line-center"===Ua)for(var $o=0,Cs=L.geometry;$o<Cs.length;$o+=1){var zs=Cs[$o];if(zs.length>1){var El=Zp(zs,Sa,N.vertical||Pr,Q,jr,Pn);El&&ri(zs,El)}}else if("Polygon"===L.type)for(var qs=0,vu=Ch(L.geometry,0);qs<vu.length;qs+=1){var du=vu[qs],Cl=$p(du,16);ri(du[0],new Dc(Cl.x,Cl.y,0))}else if("LineString"===L.type)for(var ku=0,_u=L.geometry;ku<_u.length;ku+=1){var dl=_u[ku];ri(dl,new Dc(dl[0].x,dl[0].y,0))}else if("Point"===L.type)for(var Fu=0,Mf=L.geometry;Fu<Mf.length;Fu+=1)for(var xc=0,bc=Mf[Fu];xc<bc.length;xc+=1){var wc=bc[xc];ri([wc],new Dc(wc.x,wc.y,0))}}var qc=255,yc=qc*tc;function Dv(C,L,N,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr){var jr=Jp(L,N,Ye,he,ye,Te,Q,C.allowVerticalPlacement),cn=C.textSizeData,rn=null;"source"===cn.kind?(rn=[tc*he.layout.get("text-size").evaluate(Te,{})])[0]>yc&&O(C.layerIds[0]+': Value for "text-size" is >= '+qc+'. Reduce your "text-size".'):"composite"===cn.kind&&((rn=[tc*nr.compositeTextSizes[0].evaluate(Te,{},Pr),tc*nr.compositeTextSizes[1].evaluate(Te,{},Pr)])[0]>yc||rn[1]>yc)&&O(C.layerIds[0]+': Value for "text-size" is >= '+qc+'. Reduce your "text-size".'),C.addSymbols(C.text,jr,rn,Ye,ye,Te,dt,L,lt.lineStartIndex,lt.lineLength,ur,Pr);for(var Pn=0,mn=At;Pn<mn.length;Pn+=1)Vt[mn[Pn]]=C.text.placedSymbolArray.length-1;return 4*jr.length}function Rv(C){for(var L in C)return C[L];return null}function a0(C,L,N,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur,nr,Pr,jr,cn,rn,Pn,mn,Ln,Fn,Jn,Sa,ma){var qa,Xa,Li,ei,ri,Ua=C.addToLineVertexArray(L,N),Ui=0,Ti=0,vo=0,No=0,po=-1,go=-1,fo={},Yo=ve(""),$o=0,Cs=0;if(void 0===Ye._unevaluatedLayout.getValue("text-radial-offset")?($o=(qa=Ye.layout.get("text-offset").evaluate(Ln,{},Sa).map(function(rh){return rh*Vl}))[0],Cs=qa[1]):($o=Ye.layout.get("text-radial-offset").evaluate(Ln,{},Sa)*Vl,Cs=zh),C.allowVerticalPlacement&&Q.vertical){var El=Ye.layout.get("text-rotate").evaluate(Ln,{},Sa)+90,qs=Q.vertical;ei=new ph(lt,L,dt,At,Vt,qs,ur,nr,Pr,El),Te&&(ri=new ph(lt,L,dt,At,Vt,Te,cn,rn,Pr,El))}if(he){var vu=Ye.layout.get("icon-rotate").evaluate(Ln,{}),du="none"!==Ye.layout.get("icon-text-fit"),Cl=Lv(he,vu,Jn,du),ku=Te?Lv(Te,vu,Jn,du):void 0;Li=new ph(lt,L,dt,At,Vt,he,cn,rn,!1,vu),Ui=4*Cl.length;var _u=C.iconSizeData,dl=null;"source"===_u.kind?(dl=[tc*Ye.layout.get("icon-size").evaluate(Ln,{})])[0]>yc&&O(C.layerIds[0]+': Value for "icon-size" is >= '+qc+'. Reduce your "icon-size".'):"composite"===_u.kind&&((dl=[tc*Fn.compositeIconSizes[0].evaluate(Ln,{},Sa),tc*Fn.compositeIconSizes[1].evaluate(Ln,{},Sa)])[0]>yc||dl[1]>yc)&&O(C.layerIds[0]+': Value for "icon-size" is >= '+qc+'. Reduce your "icon-size".'),C.addSymbols(C.icon,Cl,dl,mn,Pn,Ln,!1,L,Ua.lineStartIndex,Ua.lineLength,-1,Sa),po=C.icon.placedSymbolArray.length-1,ku&&(Ti=4*ku.length,C.addSymbols(C.icon,ku,dl,mn,Pn,Ln,Sf.vertical,L,Ua.lineStartIndex,Ua.lineLength,-1,Sa),go=C.icon.placedSymbolArray.length-1)}for(var Fu in Q.horizontal){var Mf=Q.horizontal[Fu];if(!Xa){Yo=ve(Mf.text);var dc=Ye.layout.get("text-rotate").evaluate(Ln,{},Sa);Xa=new ph(lt,L,dt,At,Vt,Mf,ur,nr,Pr,dc)}var xc=1===Mf.positionedLines.length;if(vo+=Dv(C,L,Mf,ye,Ye,Pr,Ln,jr,Ua,Q.vertical?Sf.horizontal:Sf.horizontalOnly,xc?Object.keys(Q.horizontal):[Fu],fo,po,Fn,Sa),xc)break}Q.vertical&&(No+=Dv(C,L,Q.vertical,ye,Ye,Pr,Ln,jr,Ua,Sf.vertical,["vertical"],fo,go,Fn,Sa));var bc=Xa?Xa.boxStartIndex:C.collisionBoxArray.length,wc=Xa?Xa.boxEndIndex:C.collisionBoxArray.length,Uc=ei?ei.boxStartIndex:C.collisionBoxArray.length,Yf=ei?ei.boxEndIndex:C.collisionBoxArray.length,bh=Li?Li.boxStartIndex:C.collisionBoxArray.length,Gh=Li?Li.boxEndIndex:C.collisionBoxArray.length,wh=ri?ri.boxStartIndex:C.collisionBoxArray.length,jh=ri?ri.boxEndIndex:C.collisionBoxArray.length,Ff=-1,Hc=function(rh,Zv){return rh&&rh.circleDiameter?Math.max(rh.circleDiameter,Zv):Zv};Ff=Hc(Xa,Ff),Ff=Hc(ei,Ff),Ff=Hc(Li,Ff);var Th=(Ff=Hc(ri,Ff))>-1?1:0;Th&&(Ff*=ma/Vl),C.glyphOffsetArray.length>=Oo.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Ln.sortKey&&C.addToSortKeyRanges(C.symbolInstances.length,Ln.sortKey),C.symbolInstances.emplaceBack(L.x,L.y,fo.right>=0?fo.right:-1,fo.center>=0?fo.center:-1,fo.left>=0?fo.left:-1,fo.vertical||-1,po,go,Yo,bc,wc,Uc,Yf,bh,Gh,wh,jh,dt,vo,No,Ui,Ti,Th,0,ur,$o,Cs,Ff)}function i0(C,L,N,Q){var he=C.compareText;if(L in he){for(var ye=he[L],Te=ye.length-1;Te>=0;Te--)if(Q.dist(ye[Te])<N)return!0}else he[L]=[];return he[L].push(Q),!1}var o0=Cc.VectorTileFeature.types,s0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function gh(C,L,N,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur){var nr=Ye?Math.min(yc,Math.round(Ye[0])):0,Pr=Ye?Math.min(yc,Math.round(Ye[1])):0;C.emplaceBack(L,N,Math.round(32*Q),Math.round(32*he),ye,Te,(nr<<1)+(lt?1:0),Pr,16*dt,16*At,256*Vt,256*ur)}function Nh(C,L,N){C.emplaceBack(L.x,L.y,N),C.emplaceBack(L.x,L.y,N),C.emplaceBack(L.x,L.y,N),C.emplaceBack(L.x,L.y,N)}function l0(C){for(var L=0,N=C.sections;L<N.length;L+=1)if(sn(N[L].text))return!0;return!1}var zc=function(L){this.layoutVertexArray=new ni,this.indexArray=new Oa,this.programConfigurations=L,this.segments=new Mi,this.dynamicLayoutVertexArray=new Kn,this.opacityVertexArray=new Hn,this.placedSymbolArray=new mo};zc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},zc.prototype.upload=function(L,N,Q,he){this.isEmpty()||(Q&&(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,lp.members),this.indexBuffer=L.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=L.createVertexBuffer(this.dynamicLayoutVertexArray,up.members,!0),this.opacityVertexBuffer=L.createVertexBuffer(this.opacityVertexArray,s0,!0),this.opacityVertexBuffer.itemSize=1),(Q||he)&&this.programConfigurations.upload(L))},zc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Wa("SymbolBuffers",zc);var eh=function(L,N,Q){this.layoutVertexArray=new L,this.layoutAttributes=N,this.indexArray=new Q,this.segments=new Mi,this.collisionVertexArray=new oa};eh.prototype.upload=function(L){this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=L.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=L.createVertexBuffer(this.collisionVertexArray,fp.members,!0)},eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Wa("CollisionBuffers",eh);var Oo=function(L){this.collisionBoxArray=L.collisionBoxArray,this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(lt){return lt.id}),this.index=L.index,this.pixelRatio=L.pixelRatio,this.sourceLayerIndex=L.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=me([]),this.placementViewportMatrix=me([]);var Q=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fh(this.zoom,Q["text-size"]),this.iconSizeData=Fh(this.zoom,Q["icon-size"]);var he=this.layers[0].layout,ye=he.get("symbol-sort-key"),Te=he.get("symbol-z-order");this.canOverlap=he.get("text-allow-overlap")||he.get("icon-allow-overlap")||he.get("text-ignore-placement")||he.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==Te&&void 0!==ye.constantOr(1);var Ye="viewport-y"===Te||"auto"===Te&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ye&&this.canOverlap,"point"===he.get("symbol-placement")&&(this.writingModes=he.get("text-writing-mode").map(function(lt){return Sf[lt]})),this.stateDependentLayerIds=this.layers.filter(function(lt){return lt.isStateDependent()}).map(function(lt){return lt.id}),this.sourceID=L.sourceID};function u0(C,L){return L.replace(/{([^{}]+)}/g,function(N,Q){return Q in C?String(C[Q]):""})}Oo.prototype.createArrays=function(){this.text=new zc(new En(this.layers,this.zoom,function(L){return/^text/.test(L)})),this.icon=new zc(new En(this.layers,this.zoom,function(L){return/^icon/.test(L)})),this.glyphOffsetArray=new Al,this.lineVertexArray=new Io,this.symbolInstances=new hl},Oo.prototype.calculateGlyphDependencies=function(L,N,Q,he,ye){for(var Te=0;Te<L.length;Te++)if(N[L.charCodeAt(Te)]=!0,(Q||he)&&ye){var Ye=Kc[L.charAt(Te)];Ye&&(N[Ye.charCodeAt(0)]=!0)}},Oo.prototype.populate=function(L,N,Q){var he=this.layers[0],ye=he.layout,Te=ye.get("text-font"),Ye=ye.get("text-field"),lt=ye.get("icon-image"),dt=("constant"!==Ye.value.kind||Ye.value.value instanceof Ho&&!Ye.value.value.isEmpty()||Ye.value.value.toString().length>0)&&("constant"!==Te.value.kind||Te.value.value.length>0),At="constant"!==lt.value.kind||!!lt.value.value||Object.keys(lt.parameters).length>0,Vt=ye.get("symbol-sort-key");if(this.features=[],dt||At){for(var ur=N.iconDependencies,nr=N.glyphDependencies,Pr=N.availableImages,jr=new Ha(this.zoom),cn=0,rn=L;cn<rn.length;cn+=1){var Pn=rn[cn],mn=Pn.feature,Ln=Pn.id,Fn=Pn.index,Jn=Pn.sourceLayerIndex,Sa=he._featureFilter.needGeometry,ma=Ci(mn,Sa);if(he._featureFilter.filter(jr,ma,Q)){Sa||(ma.geometry=_a(mn));var qa=void 0;if(dt){var Ua=he.getValueAndResolveTokens("text-field",ma,Q,Pr),Xa=Ho.factory(Ua);l0(Xa)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===La()||this.hasRTLText&&ui.isParsed())&&(qa=vp(Xa,he,ma))}var Li=void 0;if(At){var ei=he.getValueAndResolveTokens("icon-image",ma,Q,Pr);Li=ei instanceof Zo?ei:Zo.fromString(ei)}if(qa||Li){var ri=this.sortFeaturesByKey?Vt.evaluate(ma,{},Q):void 0,Ui={id:Ln,text:qa,icon:Li,index:Fn,sourceLayerIndex:Jn,geometry:ma.geometry,properties:mn.properties,type:o0[mn.type],sortKey:ri};if(this.features.push(Ui),Li&&(ur[Li.name]=!0),qa){var Ti=Te.evaluate(ma,{},Q).join(","),vo="map"===ye.get("text-rotation-alignment")&&"point"!==ye.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Sf.vertical)>=0;for(var No=0,po=qa.sections;No<po.length;No+=1){var go=po[No];if(go.image)ur[go.image.name]=!0;else{var fo=Je(qa.toString()),Yo=go.fontStack||Ti,$o=nr[Yo]=nr[Yo]||{};this.calculateGlyphDependencies(go.text,$o,vo,this.allowVerticalPlacement,fo)}}}}}}"line"===ye.get("symbol-placement")&&(this.features=dp(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Cs,zs){return Cs.sortKey-zs.sortKey})}},Oo.prototype.update=function(L,N,Q){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(L,N,this.layers,Q),this.icon.programConfigurations.updatePaintArrays(L,N,this.layers,Q))},Oo.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Oo.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Oo.prototype.upload=function(L){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(L),this.iconCollisionBox.upload(L)),this.text.upload(L,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(L,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Oo.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Oo.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Oo.prototype.addToLineVertexArray=function(L,N){var Q=this.lineVertexArray.length;if(void 0!==L.segment){for(var he=L.dist(N[L.segment+1]),ye=L.dist(N[L.segment]),Te={},Ye=L.segment+1;Ye<N.length;Ye++)Te[Ye]={x:N[Ye].x,y:N[Ye].y,tileUnitDistanceFromAnchor:he},Ye<N.length-1&&(he+=N[Ye+1].dist(N[Ye]));for(var lt=L.segment||0;lt>=0;lt--)Te[lt]={x:N[lt].x,y:N[lt].y,tileUnitDistanceFromAnchor:ye},lt>0&&(ye+=N[lt-1].dist(N[lt]));for(var dt=0;dt<N.length;dt++){var At=Te[dt];this.lineVertexArray.emplaceBack(At.x,At.y,At.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Q,lineLength:this.lineVertexArray.length-Q}},Oo.prototype.addSymbols=function(L,N,Q,he,ye,Te,Ye,lt,dt,At,Vt,ur){for(var nr=L.indexArray,Pr=L.layoutVertexArray,jr=L.segments.prepareSegment(4*N.length,Pr,nr,this.canOverlap?Te.sortKey:void 0),cn=this.glyphOffsetArray.length,rn=jr.vertexLength,Pn=this.allowVerticalPlacement&&Ye===Sf.vertical?Math.PI/2:0,mn=Te.text&&Te.text.sections,Ln=0;Ln<N.length;Ln++){var Fn=N[Ln],Jn=Fn.tl,Sa=Fn.tr,ma=Fn.bl,qa=Fn.br,Ua=Fn.tex,Xa=Fn.pixelOffsetTL,Li=Fn.pixelOffsetBR,ei=Fn.minFontScaleX,ri=Fn.minFontScaleY,Ui=Fn.glyphOffset,Ti=Fn.isSDF,vo=Fn.sectionIndex,No=jr.vertexLength,po=Ui[1];gh(Pr,lt.x,lt.y,Jn.x,po+Jn.y,Ua.x,Ua.y,Q,Ti,Xa.x,Xa.y,ei,ri),gh(Pr,lt.x,lt.y,Sa.x,po+Sa.y,Ua.x+Ua.w,Ua.y,Q,Ti,Li.x,Xa.y,ei,ri),gh(Pr,lt.x,lt.y,ma.x,po+ma.y,Ua.x,Ua.y+Ua.h,Q,Ti,Xa.x,Li.y,ei,ri),gh(Pr,lt.x,lt.y,qa.x,po+qa.y,Ua.x+Ua.w,Ua.y+Ua.h,Q,Ti,Li.x,Li.y,ei,ri),Nh(L.dynamicLayoutVertexArray,lt,Pn),nr.emplaceBack(No,No+1,No+2),nr.emplaceBack(No+1,No+2,No+3),jr.vertexLength+=4,jr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ui[0]),(Ln===N.length-1||vo!==N[Ln+1].sectionIndex)&&L.programConfigurations.populatePaintArrays(Pr.length,Te,Te.index,{},ur,mn&&mn[vo])}L.placedSymbolArray.emplaceBack(lt.x,lt.y,cn,this.glyphOffsetArray.length-cn,rn,dt,At,lt.segment,Q?Q[0]:0,Q?Q[1]:0,he[0],he[1],Ye,0,!1,0,Vt)},Oo.prototype._addCollisionDebugVertex=function(L,N,Q,he,ye,Te){return N.emplaceBack(0,0),L.emplaceBack(Q.x,Q.y,he,ye,Math.round(Te.x),Math.round(Te.y))},Oo.prototype.addCollisionDebugVertices=function(L,N,Q,he,ye,Te,Ye){var lt=ye.segments.prepareSegment(4,ye.layoutVertexArray,ye.indexArray),dt=lt.vertexLength,At=ye.layoutVertexArray,Vt=ye.collisionVertexArray,ur=Ye.anchorX,nr=Ye.anchorY;this._addCollisionDebugVertex(At,Vt,Te,ur,nr,new a(L,N)),this._addCollisionDebugVertex(At,Vt,Te,ur,nr,new a(Q,N)),this._addCollisionDebugVertex(At,Vt,Te,ur,nr,new a(Q,he)),this._addCollisionDebugVertex(At,Vt,Te,ur,nr,new a(L,he)),lt.vertexLength+=4;var Pr=ye.indexArray;Pr.emplaceBack(dt,dt+1),Pr.emplaceBack(dt+1,dt+2),Pr.emplaceBack(dt+2,dt+3),Pr.emplaceBack(dt+3,dt),lt.primitiveLength+=4},Oo.prototype.addDebugCollisionBoxes=function(L,N,Q,he){for(var ye=L;ye<N;ye++){var Te=this.collisionBoxArray.get(ye),Ye=Te.x1,lt=Te.y1,dt=Te.x2,At=Te.y2;this.addCollisionDebugVertices(Ye,lt,dt,At,he?this.textCollisionBox:this.iconCollisionBox,Te.anchorPoint,Q)}},Oo.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new eh(Pa,ov.members,wi),this.iconCollisionBox=new eh(Pa,ov.members,wi);for(var L=0;L<this.symbolInstances.length;L++){var N=this.symbolInstances.get(L);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},Oo.prototype._deserializeCollisionBoxesForSymbol=function(L,N,Q,he,ye,Te,Ye,lt,dt){for(var At={},Vt=N;Vt<Q;Vt++){var ur=L.get(Vt);At.textBox={x1:ur.x1,y1:ur.y1,x2:ur.x2,y2:ur.y2,anchorPointX:ur.anchorPointX,anchorPointY:ur.anchorPointY},At.textFeatureIndex=ur.featureIndex;break}for(var nr=he;nr<ye;nr++){var Pr=L.get(nr);At.verticalTextBox={x1:Pr.x1,y1:Pr.y1,x2:Pr.x2,y2:Pr.y2,anchorPointX:Pr.anchorPointX,anchorPointY:Pr.anchorPointY},At.verticalTextFeatureIndex=Pr.featureIndex;break}for(var jr=Te;jr<Ye;jr++){var cn=L.get(jr);At.iconBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},At.iconFeatureIndex=cn.featureIndex;break}for(var rn=lt;rn<dt;rn++){var Pn=L.get(rn);At.verticalIconBox={x1:Pn.x1,y1:Pn.y1,x2:Pn.x2,y2:Pn.y2,anchorPointX:Pn.anchorPointX,anchorPointY:Pn.anchorPointY},At.verticalIconFeatureIndex=Pn.featureIndex;break}return At},Oo.prototype.deserializeCollisionBoxes=function(L){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var Q=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(L,Q.textBoxStartIndex,Q.textBoxEndIndex,Q.verticalTextBoxStartIndex,Q.verticalTextBoxEndIndex,Q.iconBoxStartIndex,Q.iconBoxEndIndex,Q.verticalIconBoxStartIndex,Q.verticalIconBoxEndIndex))}},Oo.prototype.hasTextData=function(){return this.text.segments.get().length>0},Oo.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Oo.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Oo.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Oo.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Oo.prototype.addIndicesForPlacedSymbol=function(L,N){for(var Q=L.placedSymbolArray.get(N),he=Q.vertexStartIndex+4*Q.numGlyphs,ye=Q.vertexStartIndex;ye<he;ye+=4)L.indexArray.emplaceBack(ye,ye+1,ye+2),L.indexArray.emplaceBack(ye+1,ye+2,ye+3)},Oo.prototype.getSortedSymbolIndexes=function(L){if(this.sortedAngle===L&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var N=Math.sin(L),Q=Math.cos(L),he=[],ye=[],Te=[],Ye=0;Ye<this.symbolInstances.length;++Ye){Te.push(Ye);var lt=this.symbolInstances.get(Ye);he.push(0|Math.round(N*lt.anchorX+Q*lt.anchorY)),ye.push(lt.featureIndex)}return Te.sort(function(dt,At){return he[dt]-he[At]||ye[At]-ye[dt]}),Te},Oo.prototype.addToSortKeyRanges=function(L,N){var Q=this.sortKeyRanges[this.sortKeyRanges.length-1];Q&&Q.sortKey===N?Q.symbolInstanceEnd=L+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:L,symbolInstanceEnd:L+1})},Oo.prototype.sortFeatures=function(L){var N=this;if(this.sortFeaturesByY&&this.sortedAngle!==L&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(L),this.sortedAngle=L,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Q=0,he=this.symbolInstanceIndexes;Q<he.length;Q+=1){var ye=he[Q],Te=this.symbolInstances.get(ye);this.featureSortOrder.push(Te.featureIndex),[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(function(Ye,lt,dt){Ye>=0&&dt.indexOf(Ye)===lt&&N.addIndicesForPlacedSymbol(N.text,Ye)}),Te.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Te.verticalPlacedTextSymbolIndex),Te.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.placedIconSymbolIndex),Te.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Wa("SymbolBucket",Oo,{omit:["layers","collisionBoxArray","features","compareText"]}),Oo.MAX_GLYPHS=65535,Oo.addDynamicAttributes=Nh;var f0=new xn({"symbol-placement":new Et(In.layout_symbol["symbol-placement"]),"symbol-spacing":new Et(In.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Et(In.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wr(In.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Et(In.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Et(In.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Et(In.layout_symbol["icon-ignore-placement"]),"icon-optional":new Et(In.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Et(In.layout_symbol["icon-rotation-alignment"]),"icon-size":new wr(In.layout_symbol["icon-size"]),"icon-text-fit":new Et(In.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Et(In.layout_symbol["icon-text-fit-padding"]),"icon-image":new wr(In.layout_symbol["icon-image"]),"icon-rotate":new wr(In.layout_symbol["icon-rotate"]),"icon-padding":new Et(In.layout_symbol["icon-padding"]),"icon-keep-upright":new Et(In.layout_symbol["icon-keep-upright"]),"icon-offset":new wr(In.layout_symbol["icon-offset"]),"icon-anchor":new wr(In.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Et(In.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Et(In.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Et(In.layout_symbol["text-rotation-alignment"]),"text-field":new wr(In.layout_symbol["text-field"]),"text-font":new wr(In.layout_symbol["text-font"]),"text-size":new wr(In.layout_symbol["text-size"]),"text-max-width":new wr(In.layout_symbol["text-max-width"]),"text-line-height":new Et(In.layout_symbol["text-line-height"]),"text-letter-spacing":new wr(In.layout_symbol["text-letter-spacing"]),"text-justify":new wr(In.layout_symbol["text-justify"]),"text-radial-offset":new wr(In.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Et(In.layout_symbol["text-variable-anchor"]),"text-anchor":new wr(In.layout_symbol["text-anchor"]),"text-max-angle":new Et(In.layout_symbol["text-max-angle"]),"text-writing-mode":new Et(In.layout_symbol["text-writing-mode"]),"text-rotate":new wr(In.layout_symbol["text-rotate"]),"text-padding":new Et(In.layout_symbol["text-padding"]),"text-keep-upright":new Et(In.layout_symbol["text-keep-upright"]),"text-transform":new wr(In.layout_symbol["text-transform"]),"text-offset":new wr(In.layout_symbol["text-offset"]),"text-allow-overlap":new Et(In.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Et(In.layout_symbol["text-ignore-placement"]),"text-optional":new Et(In.layout_symbol["text-optional"])}),c0=new xn({"icon-opacity":new wr(In.paint_symbol["icon-opacity"]),"icon-color":new wr(In.paint_symbol["icon-color"]),"icon-halo-color":new wr(In.paint_symbol["icon-halo-color"]),"icon-halo-width":new wr(In.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wr(In.paint_symbol["icon-halo-blur"]),"icon-translate":new Et(In.paint_symbol["icon-translate"]),"icon-translate-anchor":new Et(In.paint_symbol["icon-translate-anchor"]),"text-opacity":new wr(In.paint_symbol["text-opacity"]),"text-color":new wr(In.paint_symbol["text-color"],{runtimeType:so,getOverride:function(C){return C.textColor},hasOverride:function(C){return!!C.textColor}}),"text-halo-color":new wr(In.paint_symbol["text-halo-color"]),"text-halo-width":new wr(In.paint_symbol["text-halo-width"]),"text-halo-blur":new wr(In.paint_symbol["text-halo-blur"]),"text-translate":new Et(In.paint_symbol["text-translate"]),"text-translate-anchor":new Et(In.paint_symbol["text-translate-anchor"])}),Bh={paint:c0,layout:f0},Oc=function(L){this.type=L.property.overrides?L.property.overrides.runtimeType:To,this.defaultValue=L};Oc.prototype.evaluate=function(L){if(L.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(L.formattedSection))return N.getOverride(L.formattedSection)}return L.feature&&L.featureState?this.defaultValue.evaluate(L.feature,L.featureState):this.defaultValue.property.specification.default},Oc.prototype.eachChild=function(L){this.defaultValue.isConstant()||L(this.defaultValue.value._styleExpression.expression)},Oc.prototype.outputDefined=function(){return!1},Oc.prototype.serialize=function(){return null},Wa("FormatSectionOverride",Oc,{omit:["defaultValue"]});var h0=function(C){function L(N){C.call(this,N,Bh)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.recalculate=function(Q,he){if(C.prototype.recalculate.call(this,Q,he),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var ye=this.layout.get("text-writing-mode");if(ye){for(var Te=[],Ye=0,lt=ye;Ye<lt.length;Ye+=1){var dt=lt[Ye];Te.indexOf(dt)<0&&Te.push(dt)}this.layout._values["text-writing-mode"]=Te}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},L.prototype.getValueAndResolveTokens=function(Q,he,ye,Te){var Ye=this.layout.get(Q).evaluate(he,{},ye,Te),lt=this._unevaluatedLayout._values[Q];return lt.isDataDriven()||oi(lt.value)||!Ye?Ye:u0(he.properties,Ye)},L.prototype.createBucket=function(Q){return new Oo(Q)},L.prototype.queryRadius=function(){return 0},L.prototype.queryIntersectsFeature=function(){return!1},L.prototype._setPaintOverrides=function(){for(var Q=0,he=Bh.paint.overridableProperties;Q<he.length;Q+=1){var ye=he[Q];if(L.hasPaintOverride(this.layout,ye)){var Te=this.paint.get(ye),Ye=new Oc(Te),lt=new ii(Ye,Te.property.specification),dt=null;dt="constant"===Te.value.kind||"source"===Te.value.kind?new pa("source",lt):new ti("composite",lt,Te.value.zoomStops,Te.value._interpolationType),this.paint._values[ye]=new Pi(Te.property,dt,Te.parameters)}}},L.prototype._handleOverridablePaintPropertyUpdate=function(Q,he,ye){return!(!this.layout||he.isDataDriven()||ye.isDataDriven())&&L.hasPaintOverride(this.layout,Q)},L.hasPaintOverride=function(Q,he){var ye=Q.get("text-field"),Te=Bh.paint.properties[he],Ye=!1,lt=function(Vt){for(var ur=0,nr=Vt;ur<nr.length;ur+=1){var Pr=nr[ur];if(Te.overrides&&Te.overrides.hasOverride(Pr))return void(Ye=!0)}};if("constant"===ye.value.kind&&ye.value.value instanceof Ho)lt(ye.value.value.sections);else if("source"===ye.value.kind){var dt=function(Vt){if(!Ye)if(Vt instanceof Bo&&Vo(Vt.value)===ms){var ur=Vt.value;lt(ur.sections)}else Vt instanceof us?lt(Vt.sections):Vt.eachChild(dt)},At=ye.value;At._styleExpression&&dt(At._styleExpression.expression)}return Ye},L}(Gn),d0={paint:new xn({"background-color":new Et(In.paint_background["background-color"]),"background-pattern":new vn(In.paint_background["background-pattern"]),"background-opacity":new Et(In.paint_background["background-opacity"])})},p0=function(C){function L(N){C.call(this,N,d0)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L}(Gn),y0={paint:new xn({"raster-opacity":new Et(In.paint_raster["raster-opacity"]),"raster-hue-rotate":new Et(In.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Et(In.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Et(In.paint_raster["raster-brightness-max"]),"raster-saturation":new Et(In.paint_raster["raster-saturation"]),"raster-contrast":new Et(In.paint_raster["raster-contrast"]),"raster-resampling":new Et(In.paint_raster["raster-resampling"]),"raster-fade-duration":new Et(In.paint_raster["raster-fade-duration"])})},m0=function(C){function L(N){C.call(this,N,y0)}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L}(Gn);function x0(C){var L=[],N=C.id;return void 0===N&&L.push({message:"layers."+N+': missing required property "id"'}),void 0===C.render&&L.push({message:"layers."+N+': missing required method "render"'}),C.renderingMode&&"2d"!==C.renderingMode&&"3d"!==C.renderingMode&&L.push({message:"layers."+N+': property "renderingMode" must be either "2d" or "3d"'}),L}var b0=function(C){function L(N){C.call(this,N,{}),this.implementation=N}return C&&(L.__proto__=C),L.prototype=Object.create(C&&C.prototype),L.prototype.constructor=L,L.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},L.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},L.prototype.recalculate=function(){},L.prototype.updateTransitions=function(){},L.prototype.hasTransition=function(){},L.prototype.serialize=function(){},L.prototype.onAdd=function(Q){this.implementation.onAdd&&this.implementation.onAdd(Q,Q.painter.context.gl)},L.prototype.onRemove=function(Q){this.implementation.onRemove&&this.implementation.onRemove(Q,Q.painter.context.gl)},L}(Gn),w0={circle:ro,heatmap:Vc,hillshade:Qv,fill:Ad,"fill-extrusion":jd,line:op,symbol:h0,background:p0,raster:m0};function T0(C){return"custom"===C.type?new b0(C):new w0[C.type](C)}var kv=o.HTMLImageElement,_v=o.HTMLCanvasElement,Fv=o.HTMLVideoElement,zv=o.ImageData,yh=o.ImageBitmap,Tc=function(L,N,Q,he){this.context=L,this.format=Q,this.texture=L.gl.createTexture(),this.update(N,he)};Tc.prototype.update=function(L,N,Q){var he=L.width,ye=L.height,Te=!(this.size&&this.size[0]===he&&this.size[1]===ye||Q),lt=this.context,dt=lt.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),dt.bindTexture(dt.TEXTURE_2D,this.texture),lt.pixelStoreUnpackFlipY.set(!1),lt.pixelStoreUnpack.set(1),lt.pixelStoreUnpackPremultiplyAlpha.set(this.format===dt.RGBA&&(!N||!1!==N.premultiply)),Te)this.size=[he,ye],L instanceof kv||L instanceof _v||L instanceof Fv||L instanceof zv||yh&&L instanceof yh?dt.texImage2D(dt.TEXTURE_2D,0,this.format,this.format,dt.UNSIGNED_BYTE,L):dt.texImage2D(dt.TEXTURE_2D,0,this.format,he,ye,0,this.format,dt.UNSIGNED_BYTE,L.data);else{var At=Q||{x:0,y:0},Vt=At.x,ur=At.y;L instanceof kv||L instanceof _v||L instanceof Fv||L instanceof zv||yh&&L instanceof yh?dt.texSubImage2D(dt.TEXTURE_2D,0,Vt,ur,dt.RGBA,dt.UNSIGNED_BYTE,L):dt.texSubImage2D(dt.TEXTURE_2D,0,Vt,ur,he,ye,dt.RGBA,dt.UNSIGNED_BYTE,L.data)}this.useMipmap&&this.isSizePowerOfTwo()&&dt.generateMipmap(dt.TEXTURE_2D)},Tc.prototype.bind=function(L,N,Q){var Te=this.context.gl;Te.bindTexture(Te.TEXTURE_2D,this.texture),Q===Te.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(Q=Te.LINEAR),L!==this.filter&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,L),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Q||L),this.filter=L),N!==this.wrap&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,N),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,N),this.wrap=N)},Tc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Tc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Uh=function(L){var N=this;this._callback=L,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};Uh.prototype.trigger=function(){var L=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){L._triggered=!1,L._callback()},0))},Uh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Nc=function(L,N,Q){this.target=L,this.parent=N,this.mapId=Q,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},P(["receive","process"],this),this.invoker=new Uh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?L:o};function A0(C,L,N){var Q=Ov(256*C,256*(L=Math.pow(2,N)-L-1),N),he=Ov(256*(C+1),256*(L+1),N);return Q[0]+","+Q[1]+","+he[0]+","+he[1]}function Ov(C,L,N){var Q=2*Math.PI*6378137/256/Math.pow(2,N);return[C*Q-2*Math.PI*6378137/2,L*Q-2*Math.PI*6378137/2]}Nc.prototype.send=function(L,N,Q,he,ye){var Te=this;void 0===ye&&(ye=!1);var Ye=Math.round(1e18*Math.random()).toString(36).substring(0,10);Q&&(this.callbacks[Ye]=Q);var lt=te(this.globalScope)?void 0:[];return this.target.postMessage({id:Ye,type:L,hasCallback:!!Q,targetMapId:he,mustQueue:ye,sourceMapId:this.mapId,data:le(N,lt)},lt),{cancel:function(){Q&&delete Te.callbacks[Ye],Te.target.postMessage({id:Ye,type:"<cancel>",targetMapId:he,sourceMapId:Te.mapId})}}},Nc.prototype.receive=function(L){var N=L.data,Q=N.id;if(Q&&(!N.targetMapId||this.mapId===N.targetMapId))if("<cancel>"===N.type){delete this.tasks[Q];var he=this.cancelCallbacks[Q];delete this.cancelCallbacks[Q],he&&he()}else ee()||N.mustQueue?(this.tasks[Q]=N,this.taskQueue.push(Q),this.invoker.trigger()):this.processTask(Q,N)},Nc.prototype.process=function(){if(this.taskQueue.length){var L=this.taskQueue.shift(),N=this.tasks[L];delete this.tasks[L],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(L,N)}},Nc.prototype.processTask=function(L,N){var Q=this;if("<response>"===N.type){var he=this.callbacks[L];delete this.callbacks[L],he&&(N.error?he(xe(N.error)):he(null,xe(N.data)))}else{var ye=!1,Te=te(this.globalScope)?void 0:[],Ye=N.hasCallback?function(ur,nr){ye=!0,delete Q.cancelCallbacks[L],Q.target.postMessage({id:L,type:"<response>",sourceMapId:Q.mapId,error:ur?le(ur):null,data:le(nr,Te)},Te)}:function(ur){ye=!0},lt=null,dt=xe(N.data);if(this.parent[N.type])lt=this.parent[N.type](N.sourceMapId,dt,Ye);else if(this.parent.getWorkerSource){var At=N.type.split(".");lt=this.parent.getWorkerSource(N.sourceMapId,At[0],dt.source)[At[1]](dt,Ye)}else Ye(new Error("Could not find function "+N.type));!ye&&lt&&lt.cancel&&(this.cancelCallbacks[L]=lt.cancel)}},Nc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Qs=function(L,N){L&&(N?this.setSouthWest(L).setNorthEast(N):4===L.length?this.setSouthWest([L[0],L[1]]).setNorthEast([L[2],L[3]]):this.setSouthWest(L[0]).setNorthEast(L[1]))};Qs.prototype.setNorthEast=function(L){return this._ne=L instanceof ss?new ss(L.lng,L.lat):ss.convert(L),this},Qs.prototype.setSouthWest=function(L){return this._sw=L instanceof ss?new ss(L.lng,L.lat):ss.convert(L),this},Qs.prototype.extend=function(L){var he,ye,N=this._sw,Q=this._ne;if(L instanceof ss)he=L,ye=L;else{if(!(L instanceof Qs)){if(Array.isArray(L)){if(4===L.length||L.every(Array.isArray)){var Te=L;return this.extend(Qs.convert(Te))}var Ye=L;return this.extend(ss.convert(Ye))}return this}if(he=L._sw,ye=L._ne,!he||!ye)return this}return N||Q?(N.lng=Math.min(he.lng,N.lng),N.lat=Math.min(he.lat,N.lat),Q.lng=Math.max(ye.lng,Q.lng),Q.lat=Math.max(ye.lat,Q.lat)):(this._sw=new ss(he.lng,he.lat),this._ne=new ss(ye.lng,ye.lat)),this},Qs.prototype.getCenter=function(){return new ss((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Qs.prototype.getSouthWest=function(){return this._sw},Qs.prototype.getNorthEast=function(){return this._ne},Qs.prototype.getNorthWest=function(){return new ss(this.getWest(),this.getNorth())},Qs.prototype.getSouthEast=function(){return new ss(this.getEast(),this.getSouth())},Qs.prototype.getWest=function(){return this._sw.lng},Qs.prototype.getSouth=function(){return this._sw.lat},Qs.prototype.getEast=function(){return this._ne.lng},Qs.prototype.getNorth=function(){return this._ne.lat},Qs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Qs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Qs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Qs.prototype.contains=function(L){var N=ss.convert(L),Q=N.lng,he=N.lat,ye=this._sw.lat<=he&&he<=this._ne.lat,Te=this._sw.lng<=Q&&Q<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Te=this._sw.lng>=Q&&Q>=this._ne.lng),ye&&Te},Qs.convert=function(L){return!L||L instanceof Qs?L:new Qs(L)};var Nv=6371008.8,ss=function(L,N){if(isNaN(L)||isNaN(N))throw new Error("Invalid LngLat object: ("+L+", "+N+")");if(this.lng=+L,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ss.prototype.wrap=function(){return new ss(x(this.lng,-180,180),this.lat)},ss.prototype.toArray=function(){return[this.lng,this.lat]},ss.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ss.prototype.distanceTo=function(L){var N=Math.PI/180,Q=this.lat*N,he=L.lat*N,ye=Math.sin(Q)*Math.sin(he)+Math.cos(Q)*Math.cos(he)*Math.cos((L.lng-this.lng)*N);return Nv*Math.acos(Math.min(ye,1))},ss.prototype.toBounds=function(L){void 0===L&&(L=0);var Q=360*L/40075017,he=Q/Math.cos(Math.PI/180*this.lat);return new Qs(new ss(this.lng-he,this.lat-Q),new ss(this.lng+he,this.lat+Q))},ss.convert=function(L){if(L instanceof ss)return L;if(Array.isArray(L)&&(2===L.length||3===L.length))return new ss(Number(L[0]),Number(L[1]));if(!Array.isArray(L)&&"object"==typeof L&&null!==L)return new ss(Number("lng"in L?L.lng:L.lon),Number(L.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Bv=2*Math.PI*Nv;function Uv(C){return Bv*Math.cos(C*Math.PI/180)}function Hv(C){return(180+C)/360}function Vv(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function Gv(C,L){return C/Uv(L)}function S0(C){return 360*C-180}function Hh(C){var L=180-360*C;return 360/Math.PI*Math.atan(Math.exp(L*Math.PI/180))-90}function M0(C,L){return C*Uv(Hh(L))}function E0(C){return 1/Math.cos(C*Math.PI/180)}var Ac=function(L,N,Q){void 0===Q&&(Q=0),this.x=+L,this.y=+N,this.z=+Q};Ac.fromLngLat=function(L,N){void 0===N&&(N=0);var Q=ss.convert(L);return new Ac(Hv(Q.lng),Vv(Q.lat),Gv(N,Q.lat))},Ac.prototype.toLngLat=function(){return new ss(S0(this.x),Hh(this.y))},Ac.prototype.toAltitude=function(){return M0(this.z,this.y)},Ac.prototype.meterInMercatorCoordinateUnits=function(){return 1/Bv*E0(Hh(this.y))};var Sc=function(L,N,Q){this.z=L,this.x=N,this.y=Q,this.key=th(0,L,L,N,Q)};Sc.prototype.equals=function(L){return this.z===L.z&&this.x===L.x&&this.y===L.y},Sc.prototype.url=function(L,N){var Q=A0(this.x,this.y,this.z),he=C0(this.z,this.x,this.y);return L[(this.x+this.y)%L.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===N?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",he).replace("{bbox-epsg-3857}",Q)},Sc.prototype.getTilePoint=function(L){var N=Math.pow(2,this.z);return new a((L.x*N-this.x)*On,(L.y*N-this.y)*On)},Sc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var jv=function(L,N){this.wrap=L,this.canonical=N,this.key=th(L,N.z,N.z,N.x,N.y)},$s=function(L,N,Q,he,ye){this.overscaledZ=L,this.wrap=N,this.canonical=new Sc(Q,+he,+ye),this.key=th(N,L,Q,he,ye)};function th(C,L,N,Q,he){(C*=2)<0&&(C=-1*C-1);var ye=1<<N;return(ye*ye*C+ye*he+Q).toString(36)+N.toString(36)+L.toString(36)}function C0(C,L,N){for(var he,Q="",ye=C;ye>0;ye--)Q+=(L&(he=1<<ye-1)?1:0)+(N&he?2:0);return Q}$s.prototype.equals=function(L){return this.overscaledZ===L.overscaledZ&&this.wrap===L.wrap&&this.canonical.equals(L.canonical)},$s.prototype.scaledTo=function(L){var N=this.canonical.z-L;return L>this.canonical.z?new $s(L,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $s(L,this.wrap,L,this.canonical.x>>N,this.canonical.y>>N)},$s.prototype.calculateScaledKey=function(L,N){var Q=this.canonical.z-L;return L>this.canonical.z?th(this.wrap*+N,L,this.canonical.z,this.canonical.x,this.canonical.y):th(this.wrap*+N,L,L,this.canonical.x>>Q,this.canonical.y>>Q)},$s.prototype.isChildOf=function(L){if(L.wrap!==this.wrap)return!1;var N=this.canonical.z-L.canonical.z;return 0===L.overscaledZ||L.overscaledZ<this.overscaledZ&&L.canonical.x===this.canonical.x>>N&&L.canonical.y===this.canonical.y>>N},$s.prototype.children=function(L){if(this.overscaledZ>=L)return[new $s(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,Q=2*this.canonical.x,he=2*this.canonical.y;return[new $s(N,this.wrap,N,Q,he),new $s(N,this.wrap,N,Q+1,he),new $s(N,this.wrap,N,Q,he+1),new $s(N,this.wrap,N,Q+1,he+1)]},$s.prototype.isLessThan=function(L){return this.wrap<L.wrap||!(this.wrap>L.wrap)&&(this.overscaledZ<L.overscaledZ||!(this.overscaledZ>L.overscaledZ)&&(this.canonical.x<L.canonical.x||!(this.canonical.x>L.canonical.x)&&this.canonical.y<L.canonical.y))},$s.prototype.wrapped=function(){return new $s(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},$s.prototype.unwrapTo=function(L){return new $s(this.overscaledZ,L,this.canonical.z,this.canonical.x,this.canonical.y)},$s.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},$s.prototype.toUnwrapped=function(){return new jv(this.wrap,this.canonical)},$s.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},$s.prototype.getTilePoint=function(L){return this.canonical.getTilePoint(new Ac(L.x-this.wrap,L.y))},Wa("CanonicalTileID",Sc),Wa("OverscaledTileID",$s,{omit:["posMatrix"]});var hc=function(L,N,Q){if(this.uid=L,N.height!==N.width)throw new RangeError("DEM tiles must be square");if(Q&&"mapbox"!==Q&&"terrarium"!==Q)return O('"'+Q+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var he=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=Q||"mapbox";for(var ye=0;ye<he;ye++)this.data[this._idx(-1,ye)]=this.data[this._idx(0,ye)],this.data[this._idx(he,ye)]=this.data[this._idx(he-1,ye)],this.data[this._idx(ye,-1)]=this.data[this._idx(ye,0)],this.data[this._idx(ye,he)]=this.data[this._idx(ye,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};function L0(C,L){var N={};if(!L)return N;for(var Q=function(){var Te=ye[he],Ye=Te.layerIds.map(function(Vt){return L.getLayer(Vt)}).filter(Boolean);if(0!==Ye.length){Te.layers=Ye,Te.stateDependentLayerIds&&(Te.stateDependentLayers=Te.stateDependentLayerIds.map(function(Vt){return Ye.filter(function(ur){return ur.id===Vt})[0]}));for(var lt=0,dt=Ye;lt<dt.length;lt+=1){var At=dt[lt];N[At.id]=Te}}},he=0,ye=C;he<ye.length;he+=1)Q();return N}hc.prototype.get=function(L,N){var Q=new Uint8Array(this.data.buffer),he=4*this._idx(L,N);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(Q[he],Q[he+1],Q[he+2])},hc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},hc.prototype._idx=function(L,N){if(L<-1||L>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(L+1)},hc.prototype._unpackMapbox=function(L,N,Q){return(256*L*256+256*N+Q)/10-1e4},hc.prototype._unpackTerrarium=function(L,N,Q){return 256*L+N+Q/256-32768},hc.prototype.getPixels=function(){return new Wo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},hc.prototype.backfillBorder=function(L,N,Q){if(this.dim!==L.dim)throw new Error("dem dimension mismatch");var he=N*this.dim,ye=N*this.dim+this.dim,Te=Q*this.dim,Ye=Q*this.dim+this.dim;switch(N){case-1:he=ye-1;break;case 1:ye=he+1}switch(Q){case-1:Te=Ye-1;break;case 1:Ye=Te+1}for(var lt=-N*this.dim,dt=-Q*this.dim,At=Te;At<Ye;At++)for(var Vt=he;Vt<ye;Vt++)this.data[this._idx(Vt,At)]=L.data[this._idx(Vt+lt,At+dt)]},Wa("DEMData",hc);var mh=function(L){this._stringToNumber={},this._numberToString=[];for(var N=0;N<L.length;N++){var Q=L[N];this._stringToNumber[Q]=N,this._numberToString[N]=Q}};mh.prototype.encode=function(L){return this._stringToNumber[L]},mh.prototype.decode=function(L){return this._numberToString[L]};var xh=function(L,N,Q,he,ye){this.type="Feature",this._vectorTileFeature=L,L._z=N,L._x=Q,L._y=he,this.properties=L.properties,this.id=ye},Vh={geometry:{configurable:!0}};Vh.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Vh.geometry.set=function(C){this._geometry=C},xh.prototype.toJSON=function(){var L={geometry:this.geometry};for(var N in this)"_geometry"===N||"_vectorTileFeature"===N||(L[N]=this[N]);return L},Object.defineProperties(xh.prototype,Vh);var Bc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Bc.prototype.updateState=function(L,N,Q){var he=String(N);if(this.stateChanges[L]=this.stateChanges[L]||{},this.stateChanges[L][he]=this.stateChanges[L][he]||{},d(this.stateChanges[L][he],Q),null===this.deletedStates[L])for(var ye in this.deletedStates[L]={},this.state[L])ye!==he&&(this.deletedStates[L][ye]=null);else if(this.deletedStates[L]&&null===this.deletedStates[L][he])for(var Ye in this.deletedStates[L][he]={},this.state[L][he])Q[Ye]||(this.deletedStates[L][he][Ye]=null);else for(var lt in Q)this.deletedStates[L]&&this.deletedStates[L][he]&&null===this.deletedStates[L][he][lt]&&delete this.deletedStates[L][he][lt]},Bc.prototype.removeFeatureState=function(L,N,Q){if(null!==this.deletedStates[L]){var ye=String(N);if(this.deletedStates[L]=this.deletedStates[L]||{},Q&&void 0!==N)null!==this.deletedStates[L][ye]&&(this.deletedStates[L][ye]=this.deletedStates[L][ye]||{},this.deletedStates[L][ye][Q]=null);else if(void 0!==N)if(this.stateChanges[L]&&this.stateChanges[L][ye])for(Q in this.deletedStates[L][ye]={},this.stateChanges[L][ye])this.deletedStates[L][ye][Q]=null;else this.deletedStates[L][ye]=null;else this.deletedStates[L]=null}},Bc.prototype.getState=function(L,N){var Q=String(N),he=this.state[L]||{},ye=this.stateChanges[L]||{},Te=d({},he[Q],ye[Q]);if(null===this.deletedStates[L])return{};if(this.deletedStates[L]){var Ye=this.deletedStates[L][N];if(null===Ye)return{};for(var lt in Ye)delete Te[lt]}return Te},Bc.prototype.initializeTileState=function(L,N){L.setFeatureState(this.state,N)},Bc.prototype.coalesceChanges=function(L,N){var Q={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var ye={};for(var Te in this.stateChanges[he])this.state[he][Te]||(this.state[he][Te]={}),d(this.state[he][Te],this.stateChanges[he][Te]),ye[Te]=this.state[he][Te];Q[he]=ye}for(var Ye in this.deletedStates){this.state[Ye]=this.state[Ye]||{};var lt={};if(null===this.deletedStates[Ye])for(var dt in this.state[Ye])lt[dt]={},this.state[Ye][dt]={};else for(var At in this.deletedStates[Ye]){if(null===this.deletedStates[Ye][At])this.state[Ye][At]={};else for(var ur=0,nr=Object.keys(this.deletedStates[Ye][At]);ur<nr.length;ur+=1){var Pr=nr[ur];delete this.state[Ye][At][Pr]}lt[At]=this.state[Ye][At]}Q[Ye]=Q[Ye]||{},d(Q[Ye],lt)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(Q).length)for(var jr in L)L[jr].setFeatureState(Q,N)};var vc=function(L,N){this.tileID=L,this.x=L.canonical.x,this.y=L.canonical.y,this.z=L.canonical.z,this.grid=new Ul(On,16,0),this.grid3D=new Ul(On,16,0),this.featureIndexArray=new Ss,this.promoteId=N};function Wv(C,L,N,Q,he){return F(C,function(ye,Te){var Ye=L instanceof uo?L.get(Te):null;return Ye&&Ye.evaluate?Ye.evaluate(N,Q,he):Ye})}function Yv(C){for(var L=1/0,N=1/0,Q=-1/0,he=-1/0,ye=0,Te=C;ye<Te.length;ye+=1){var Ye=Te[ye];L=Math.min(L,Ye.x),N=Math.min(N,Ye.y),Q=Math.max(Q,Ye.x),he=Math.max(he,Ye.y)}return{minX:L,minY:N,maxX:Q,maxY:he}}function P0(C,L){return L-C}vc.prototype.insert=function(L,N,Q,he,ye,Te){var Ye=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Q,he,ye);for(var lt=Te?this.grid3D:this.grid,dt=0;dt<N.length;dt++){for(var At=N[dt],Vt=[1/0,1/0,-1/0,-1/0],ur=0;ur<At.length;ur++){var nr=At[ur];Vt[0]=Math.min(Vt[0],nr.x),Vt[1]=Math.min(Vt[1],nr.y),Vt[2]=Math.max(Vt[2],nr.x),Vt[3]=Math.max(Vt[3],nr.y)}Vt[0]<On&&Vt[1]<On&&Vt[2]>=0&&Vt[3]>=0&&lt.insert(Ye,Vt[0],Vt[1],Vt[2],Vt[3])}},vc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Cc.VectorTile(new lh(this.rawTileData)).layers,this.sourceLayerCoder=new mh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},vc.prototype.query=function(L,N,Q,he){var ye=this;this.loadVTLayers();for(var Te=L.params||{},Ye=On/L.tileSize/L.scale,lt=Ys(Te.filter),dt=L.queryGeometry,At=L.queryPadding*Ye,Vt=Yv(dt),ur=this.grid.query(Vt.minX-At,Vt.minY-At,Vt.maxX+At,Vt.maxY+At),nr=Yv(L.cameraQueryGeometry),jr=0,cn=this.grid3D.query(nr.minX-At,nr.minY-At,nr.maxX+At,nr.maxY+At,function(Jn,Sa,ma,qa){return Af(L.cameraQueryGeometry,Jn-At,Sa-At,ma+At,qa+At)});jr<cn.length;jr+=1){var rn=cn[jr];ur.push(rn)}ur.sort(P0);for(var mn,Pn={},Ln=function(Jn){var Sa=ur[Jn];if(Sa!==mn){mn=Sa;var ma=ye.featureIndexArray.get(Sa),qa=null;ye.loadMatchingFeature(Pn,ma.bucketIndex,ma.sourceLayerIndex,ma.featureIndex,lt,Te.layers,Te.availableImages,N,Q,he,function(Ua,Xa,Li){return qa||(qa=_a(Ua)),Xa.queryIntersectsFeature(dt,Ua,Li,qa,ye.z,L.transform,Ye,L.pixelPosMatrix)})}},Fn=0;Fn<ur.length;Fn++)Ln(Fn);return Pn},vc.prototype.loadMatchingFeature=function(L,N,Q,he,ye,Te,Ye,lt,dt,At,Vt){var ur=this.bucketLayerIDs[N];if(!Te||D(Te,ur)){var nr=this.sourceLayerCoder.decode(Q),jr=this.vtLayers[nr].feature(he);if(ye.needGeometry){var cn=Ci(jr,!0);if(!ye.filter(new Ha(this.tileID.overscaledZ),cn,this.tileID.canonical))return}else if(!ye.filter(new Ha(this.tileID.overscaledZ),jr))return;for(var rn=this.getId(jr,nr),Pn=0;Pn<ur.length;Pn++){var mn=ur[Pn];if(!(Te&&Te.indexOf(mn)<0)){var Ln=lt[mn];if(Ln){var Fn={};void 0!==rn&&At&&(Fn=At.getState(Ln.sourceLayer||"_geojsonTileLayer",rn));var Jn=d({},dt[mn]);Jn.paint=Wv(Jn.paint,Ln.paint,jr,Fn,Ye),Jn.layout=Wv(Jn.layout,Ln.layout,jr,Fn,Ye);var Sa=!Vt||Vt(jr,Ln,Fn);if(Sa){var ma=new xh(jr,this.z,this.x,this.y,rn);ma.layer=Jn;var qa=L[mn];void 0===qa&&(qa=L[mn]=[]),qa.push({featureIndex:he,feature:ma,intersectionZ:Sa})}}}}}},vc.prototype.lookupSymbolFeatures=function(L,N,Q,he,ye,Te,Ye,lt){var dt={};this.loadVTLayers();for(var At=Ys(ye),Vt=0,ur=L;Vt<ur.length;Vt+=1){var nr=ur[Vt];this.loadMatchingFeature(dt,Q,he,nr,At,Te,Ye,lt,N)}return dt},vc.prototype.hasLayer=function(L){for(var N=0,Q=this.bucketLayerIDs;N<Q.length;N+=1)for(var ye=0,Te=Q[N];ye<Te.length;ye+=1)if(L===Te[ye])return!0;return!1},vc.prototype.getId=function(L,N){var Q=L.id;if(this.promoteId){var he="string"==typeof this.promoteId?this.promoteId:this.promoteId[N];"boolean"==typeof(Q=L.properties[he])&&(Q=Number(Q))}return Q},Wa("FeatureIndex",vc,{omit:["rawTileData","sourceLayerCoder"]});var I0=3e4,Ml=function(L,N){this.tileID=L,this.uid=c(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ml.prototype.registerFadeDuration=function(L){var N=L+this.timeAdded;N<ue.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},Ml.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ml.prototype.loadVectorData=function(L,N,Q){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",L){for(var he in L.featureIndex&&(this.latestFeatureIndex=L.featureIndex,L.rawTileData?(this.latestRawTileData=L.rawTileData,this.latestFeatureIndex.rawTileData=L.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=L.collisionBoxArray,this.buckets=L0(L.buckets,N.style),this.hasSymbolBuckets=!1,this.buckets){var ye=this.buckets[he];if(ye instanceof Oo){if(this.hasSymbolBuckets=!0,!Q)break;ye.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Te in this.buckets){var Ye=this.buckets[Te];if(Ye instanceof Oo&&Ye.hasRTLText){this.hasRTLText=!0,Za();break}}for(var lt in this.queryPadding=0,this.buckets){var dt=this.buckets[lt];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(lt).queryRadius(dt))}L.imageAtlas&&(this.imageAtlas=L.imageAtlas),L.glyphAtlasImage&&(this.glyphAtlasImage=L.glyphAtlasImage)}else this.collisionBoxArray=new Gi},Ml.prototype.unloadVectorData=function(){for(var L in this.buckets)this.buckets[L].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ml.prototype.getBucket=function(L){return this.buckets[L.id]},Ml.prototype.upload=function(L){for(var N in this.buckets){var Q=this.buckets[N];Q.uploadPending()&&Q.upload(L)}var he=L.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Tc(L,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Tc(L,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},Ml.prototype.prepare=function(L){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(L,this.imageAtlasTexture)},Ml.prototype.queryRenderedFeatures=function(L,N,Q,he,ye,Te,Ye,lt,dt,At){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:ye,scale:Te,tileSize:this.tileSize,pixelPosMatrix:At,transform:lt,params:Ye,queryPadding:this.queryPadding*dt},L,N,Q):{}},Ml.prototype.querySourceFeatures=function(L,N){var Q=this.latestFeatureIndex;if(Q&&Q.rawTileData){var he=Q.loadVTLayers(),ye=N?N.sourceLayer:"",Te=he._geojsonTileLayer||he[ye];if(Te)for(var Ye=Ys(N&&N.filter),lt=this.tileID.canonical,dt=lt.z,At=lt.x,Vt=lt.y,ur={z:dt,x:At,y:Vt},nr=0;nr<Te.length;nr++){var Pr=Te.feature(nr);if(Ye.needGeometry){var jr=Ci(Pr,!0);if(!Ye.filter(new Ha(this.tileID.overscaledZ),jr,this.tileID.canonical))continue}else if(!Ye.filter(new Ha(this.tileID.overscaledZ),Pr))continue;var cn=Q.getId(Pr,ye),rn=new xh(Pr,dt,At,Vt,cn);rn.tile=ur,L.push(rn)}}},Ml.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ml.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ml.prototype.setExpiryData=function(L){var N=this.expirationTime;if(L.cacheControl){var Q=W(L.cacheControl);Q["max-age"]&&(this.expirationTime=Date.now()+1e3*Q["max-age"])}else L.expires&&(this.expirationTime=new Date(L.expires).getTime());if(this.expirationTime){var he=Date.now(),ye=!1;if(this.expirationTime>he)ye=!1;else if(N)if(this.expirationTime<N)ye=!0;else{var Te=this.expirationTime-N;Te?this.expirationTime=he+Math.max(Te,I0):ye=!0}else ye=!0;ye?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ml.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ml.prototype.setFeatureState=function(L,N){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(L).length){var Q=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(N.style.hasLayer(he)){var ye=this.buckets[he],Te=ye.layers[0].sourceLayer||"_geojsonTileLayer",Ye=Q[Te],lt=L[Te];if(Ye&&lt&&0!==Object.keys(lt).length){ye.update(lt,Ye,this.imageAtlas&&this.imageAtlas.patternPositions||{});var dt=N&&N.style&&N.style.getLayer(he);dt&&(this.queryPadding=Math.max(this.queryPadding,dt.queryRadius(ye)))}}}},Ml.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ml.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ue.now()},Ml.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ml.prototype.setHoldDuration=function(L){this.symbolFadeHoldUntil=ue.now()+L},Ml.prototype.setDependencies=function(L,N){for(var Q={},he=0,ye=N;he<ye.length;he+=1)Q[ye[he]]=!0;this.dependencies[L]=Q},Ml.prototype.hasDependency=function(L,N){for(var Q=0,he=L;Q<he.length;Q+=1){var ye=he[Q],Te=this.dependencies[ye];if(Te)for(var Ye=0,lt=N;Ye<lt.length;Ye+=1)if(Te[lt[Ye]])return!0}return!1};var D0=["type","source","source-layer","minzoom","maxzoom","filter","layout"],mc=o.performance,Xv=function(L){this._marks={start:[L.url,"start"].join("#"),end:[L.url,"end"].join("#"),measure:L.url.toString()},mc.mark(this._marks.start)};Xv.prototype.finish=function(){mc.mark(this._marks.end);var L=mc.getEntriesByName(this._marks.measure);return 0===L.length&&(mc.measure(this._marks.measure,this._marks.start,this._marks.end),L=mc.getEntriesByName(this._marks.measure),mc.clearMarks(this._marks.start),mc.clearMarks(this._marks.end),mc.clearMeasures(this._marks.measure)),L},t.Actor=Nc,t.AlphaImage=Es,t.CanonicalTileID=Sc,t.CollisionBoxArray=Gi,t.Color=ji,t.DEMData=hc,t.DataConstantProperty=Et,t.DictionaryCoder=mh,t.EXTENT=On,t.ErrorEvent=wt,t.EvaluationParameters=Ha,t.Event=Kt,t.Evented=xr,t.FeatureIndex=vc,t.FillBucket=qf,t.FillExtrusionBucket=ec,t.ImageAtlas=Qc,t.ImagePosition=fh,t.LineBucket=Ru,t.LngLat=ss,t.LngLatBounds=Qs,t.MercatorCoordinate=Ac,t.ONE_EM=Vl,t.OverscaledTileID=$s,t.Point=a,t.Point$1=a,t.Properties=xn,t.Protobuf=lh,t.RGBAImage=Wo,t.RequestManager=ke,t.RequestPerformance=Xv,t.ResourceType=kr,t.SegmentVector=Mi,t.SourceFeatureState=Bc,t.StructArrayLayout1ui2=ki,t.StructArrayLayout2f1f2i16=ca,t.StructArrayLayout2i4=kn,t.StructArrayLayout3ui6=Oa,t.StructArrayLayout4i8=$n,t.SymbolBucket=Oo,t.Texture=Tc,t.Tile=Ml,t.Transitionable=ai,t.Uniform1f=_t,t.Uniform1i=Tt,t.Uniform2f=Nt,t.Uniform3f=rr,t.Uniform4f=dr,t.UniformColor=pr,t.UniformMatrix4f=Tr,t.UnwrappedTileID=jv,t.ValidationError=Ta,t.WritingMode=Sf,t.ZoomHistory=Re,t.add=Ar,t.addDynamicAttributes=Nh,t.asyncAll=h,t.bezier=l,t.bindAll=P,t.browser=ue,t.cacheEntryPossiblyAdded=Pt,t.clamp=s,t.clearTileCache=Sr,t.clipLine=Cv,t.clone=pc,t.clone$1=z,t.clone$2=gr,t.collisionCircleLayout=cp,t.config=re,t.create=oc,t.create$1=vl,t.create$2=ac,t.createCommonjsModule=T,t.createExpression=fa,t.createLayout=ra,t.createStyleLayer=T0,t.cross=qn,t.deepEqual=v,t.dot=Cn,t.dot$1=Di,t.ease=y,t.emitValidationErrors=uf,t.endsWith=R,t.enforceCacheSizeLimit=cr,t.evaluateSizeForFeature=bv,t.evaluateSizeForZoom=wv,t.evaluateVariableOffset=Iv,t.evented=Aa,t.extend=d,t.featureFilter=Ys,t.filterObject=_,t.fromRotation=ic,t.getAnchorAlignment=_h,t.getAnchorJustification=Oh,t.getArrayBuffer=sr,t.getImage=Gt,t.getJSON=Ct,t.getRTLTextPluginStatus=La,t.getReferrer=rt,t.getVideo=hr,t.identity=me,t.invert=Me,t.isChar=Ue,t.isMapboxURL=ze,t.keysDifference=m,t.makeRequest=ft,t.mapObject=F,t.mercatorXfromLng=Hv,t.mercatorYfromLat=Vv,t.mercatorZfromAltitude=Gv,t.mul=Zt,t.multiply=Ve,t.mvt=Cc,t.nextPowerOfTwo=w,t.normalize=pn,t.number=Fo,t.offscreenCanvasSupported=$t,t.ortho=Qt,t.parseGlyphPBF=Np,t.pbf=lh,t.performSymbolLayout=r0,t.perspective=Ht,t.pick=A,t.plugin=ui,t.polygonIntersectsPolygon=di,t.postMapLoadEvent=st,t.postTurnstileEvent=Xt,t.potpack=hv,t.refProperties=D0,t.register=Wa,t.registerForPluginStateChange=xa,t.renderColorRamp=Wf,t.rotate=uc,t.rotateX=it,t.rotateZ=vt,t.scale=et,t.scale$1=ci,t.scale$2=Xr,t.setCacheLimits=Kr,t.setRTLTextPlugin=Ya,t.sphericalToCartesian=j,t.sqrLen=Ms,t.styleSpec=In,t.sub=Ma,t.symbolSize=Xp,t.transformMat3=la,t.transformMat4=zi,t.translate=je,t.triggerPluginCompletionEvent=Qr,t.uniqueId=c,t.validateCustomStyleLayer=x0,t.validateLight=$i,t.validateStyle=Vi,t.values=g,t.vectorTile=Cc,t.version=n,t.warnOnce=O,t.webpSupported=ne,t.window=o,t.wrap=x}),I(["./shared"],function(t){function T(rt){var $e=typeof rt;if("number"===$e||"boolean"===$e||"string"===$e||null==rt)return JSON.stringify(rt);if(Array.isArray(rt)){for(var ht="[",gt=0,ft=rt;gt<ft.length;gt+=1)ht+=T(ft[gt])+",";return ht+"]"}for(var sr=Object.keys(rt).sort(),tr="{",Cr=0;Cr<sr.length;Cr++)tr+=JSON.stringify(sr[Cr])+":"+T(rt[sr[Cr]])+",";return tr+"}"}function n(rt){for(var $e="",ht=0,gt=t.refProperties;ht<gt.length;ht+=1)$e+="/"+T(rt[gt[ht]]);return $e}function i(rt,$e){for(var ht={},gt=0;gt<rt.length;gt++){var ft=$e&&$e[rt[gt].id]||n(rt[gt]);$e&&($e[rt[gt].id]=ft);var Ct=ht[ft];Ct||(Ct=ht[ft]=[]),Ct.push(rt[gt])}var sr=[];for(var tr in ht)sr.push(ht[tr]);return sr}var u=function($e){this.keyCache={},$e&&this.replace($e)};u.prototype.replace=function($e){this._layerConfigs={},this._layers={},this.update($e,[])},u.prototype.update=function($e,ht){for(var gt=this,ft=0,Ct=$e;ft<Ct.length;ft+=1){var sr=Ct[ft];this._layerConfigs[sr.id]=sr;var tr=this._layers[sr.id]=t.createStyleLayer(sr);tr._featureFilter=t.featureFilter(tr.filter),this.keyCache[sr.id]&&delete this.keyCache[sr.id]}for(var Cr=0,Hr=ht;Cr<Hr.length;Cr+=1){var zr=Hr[Cr];delete this.keyCache[zr],delete this._layerConfigs[zr],delete this._layers[zr]}this.familiesBySource={};for(var Ke=0,We=i(t.values(this._layerConfigs),this.keyCache);Ke<We.length;Ke+=1){var Gt=We[Ke].map(function(xr){return gt._layers[xr.id]}),hr=Gt[0];if("none"!==hr.visibility){var br=hr.source||"",Ut=this.familiesBySource[br];Ut||(Ut=this.familiesBySource[br]={});var Kt=hr.sourceLayer||"_geojsonTileLayer",wt=Ut[Kt];wt||(wt=Ut[Kt]=[]),wt.push(Gt)}}};var a=1,r=function($e){var ht={},gt=[];for(var ft in $e){var Ct=$e[ft],sr=ht[ft]={};for(var tr in Ct){var Cr=Ct[+tr];if(Cr&&0!==Cr.bitmap.width&&0!==Cr.bitmap.height){var Hr={x:0,y:0,w:Cr.bitmap.width+2*a,h:Cr.bitmap.height+2*a};gt.push(Hr),sr[tr]={rect:Hr,metrics:Cr.metrics}}}}var zr=t.potpack(gt),Wr=zr.w,Ke=zr.h,We=new t.AlphaImage({width:Wr||1,height:Ke||1});for(var Jt in $e){var Gt=$e[Jt];for(var hr in Gt){var br=Gt[+hr];if(br&&0!==br.bitmap.width&&0!==br.bitmap.height){var Ut=ht[Jt][hr].rect;t.AlphaImage.copy(br.bitmap,We,{x:0,y:0},{x:Ut.x+a,y:Ut.y+a},br.bitmap)}}}this.image=We,this.positions=ht};t.register("GlyphAtlas",r);var o=function($e){this.tileID=new t.OverscaledTileID($e.tileID.overscaledZ,$e.tileID.wrap,$e.tileID.canonical.z,$e.tileID.canonical.x,$e.tileID.canonical.y),this.uid=$e.uid,this.zoom=$e.zoom,this.pixelRatio=$e.pixelRatio,this.tileSize=$e.tileSize,this.source=$e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$e.showCollisionBoxes,this.collectResourceTiming=!!$e.collectResourceTiming,this.returnDependencies=!!$e.returnDependencies,this.promoteId=$e.promoteId};function v(rt,$e,ht){for(var gt=new t.EvaluationParameters($e),ft=0,Ct=rt;ft<Ct.length;ft+=1)Ct[ft].recalculate(gt,ht)}function p(rt,$e){var ht=t.getArrayBuffer(rt.request,function(gt,ft,Ct,sr){gt?$e(gt):ft&&$e(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(ft)),rawData:ft,cacheControl:Ct,expires:sr})});return function(){ht.cancel(),$e()}}o.prototype.parse=function($e,ht,gt,ft,Ct){var sr=this;this.status="parsing",this.data=$e,this.collisionBoxArray=new t.CollisionBoxArray;var tr=new t.DictionaryCoder(Object.keys($e.layers).sort()),Cr=new t.FeatureIndex(this.tileID,this.promoteId);Cr.bucketLayerIDs=[];var Hr={},zr={featureIndex:Cr,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:gt},Wr=ht.familiesBySource[this.source];for(var Ke in Wr){var We=$e.layers[Ke];if(We){1===We.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Ke+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Jt=tr.encode(Ke),Gt=[],hr=0;hr<We.length;hr++){var br=We.feature(hr),Ut=Cr.getId(br,Ke);Gt.push({feature:br,id:Ut,index:hr,sourceLayerIndex:Jt})}for(var Kt=0,wt=Wr[Ke];Kt<wt.length;Kt+=1){var xr=wt[Kt],Ir=xr[0];Ir.minzoom&&this.zoom<Math.floor(Ir.minzoom)||Ir.maxzoom&&this.zoom>=Ir.maxzoom||"none"===Ir.visibility||(v(xr,this.zoom,gt),(Hr[Ir.id]=Ir.createBucket({index:Cr.bucketLayerIDs.length,layers:xr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jt,sourceID:this.source})).populate(Gt,zr,this.tileID.canonical),Cr.bucketLayerIDs.push(xr.map(function(Yr){return Yr.id})))}}}var qt,on,an,hn,An=t.mapObject(zr.glyphDependencies,function(Yr){return Object.keys(Yr).map(Number)});Object.keys(An).length?ft.send("getGlyphs",{uid:this.uid,stacks:An},function(Yr,vr){qt||(qt=Yr,on=vr,Rn.call(sr))}):on={};var Sn=Object.keys(zr.iconDependencies);Sn.length?ft.send("getImages",{icons:Sn,source:this.source,tileID:this.tileID,type:"icons"},function(Yr,vr){qt||(qt=Yr,an=vr,Rn.call(sr))}):an={};var sa=Object.keys(zr.patternDependencies);function Rn(){if(qt)return Ct(qt);if(on&&an&&hn){var Yr=new r(on),vr=new t.ImageAtlas(an,hn);for(var nn in Hr){var Or=Hr[nn];Or instanceof t.SymbolBucket?(v(Or.layers,this.zoom,gt),t.performSymbolLayout(Or,on,Yr.positions,an,vr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Or.hasPattern&&(Or instanceof t.LineBucket||Or instanceof t.FillBucket||Or instanceof t.FillExtrusionBucket)&&(v(Or.layers,this.zoom,gt),Or.addFeatures(zr,this.tileID.canonical,vr.patternPositions))}this.status="done",Ct(null,{buckets:t.values(Hr).filter(function(Xn){return!Xn.isEmpty()}),featureIndex:Cr,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yr.image,imageAtlas:vr,glyphMap:this.returnDependencies?on:null,iconMap:this.returnDependencies?an:null,glyphPositions:this.returnDependencies?Yr.positions:null})}}sa.length?ft.send("getImages",{icons:sa,source:this.source,tileID:this.tileID,type:"patterns"},function(Yr,vr){qt||(qt=Yr,hn=vr,Rn.call(sr))}):hn={},Rn.call(this)};var f=function($e,ht,gt,ft){this.actor=$e,this.layerIndex=ht,this.availableImages=gt,this.loadVectorData=ft||p,this.loading={},this.loaded={}};f.prototype.loadTile=function($e,ht){var gt=this,ft=$e.uid;this.loading||(this.loading={});var Ct=!!($e&&$e.request&&$e.request.collectResourceTiming)&&new t.RequestPerformance($e.request),sr=this.loading[ft]=new o($e);sr.abort=this.loadVectorData($e,function(tr,Cr){if(delete gt.loading[ft],tr||!Cr)return sr.status="done",gt.loaded[ft]=sr,ht(tr);var Hr=Cr.rawData,zr={};Cr.expires&&(zr.expires=Cr.expires),Cr.cacheControl&&(zr.cacheControl=Cr.cacheControl);var Wr={};if(Ct){var Ke=Ct.finish();Ke&&(Wr.resourceTiming=JSON.parse(JSON.stringify(Ke)))}sr.vectorTile=Cr.vectorTile,sr.parse(Cr.vectorTile,gt.layerIndex,gt.availableImages,gt.actor,function(We,Jt){if(We||!Jt)return ht(We);ht(null,t.extend({rawTileData:Hr.slice(0)},Jt,zr,Wr))}),gt.loaded=gt.loaded||{},gt.loaded[ft]=sr})},f.prototype.reloadTile=function($e,ht){var gt=this,ft=this.loaded,Ct=$e.uid,sr=this;if(ft&&ft[Ct]){var tr=ft[Ct];tr.showCollisionBoxes=$e.showCollisionBoxes;var Cr=function(Hr,zr){var Wr=tr.reloadCallback;Wr&&(delete tr.reloadCallback,tr.parse(tr.vectorTile,sr.layerIndex,gt.availableImages,sr.actor,Wr)),ht(Hr,zr)};"parsing"===tr.status?tr.reloadCallback=Cr:"done"===tr.status&&(tr.vectorTile?tr.parse(tr.vectorTile,this.layerIndex,this.availableImages,this.actor,Cr):Cr())}},f.prototype.abortTile=function($e,ht){var gt=this.loading,ft=$e.uid;gt&&gt[ft]&&gt[ft].abort&&(gt[ft].abort(),delete gt[ft]),ht()},f.prototype.removeTile=function($e,ht){var gt=this.loaded,ft=$e.uid;gt&&gt[ft]&&delete gt[ft],ht()};var l=t.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function($e,ht){var gt=$e.uid,ft=$e.encoding,Ct=$e.rawImageData,sr=l&&Ct instanceof l?this.getImageData(Ct):Ct,tr=new t.DEMData(gt,sr,ft);this.loaded=this.loaded||{},this.loaded[gt]=tr,ht(null,tr)},y.prototype.getImageData=function($e){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas($e.width,$e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=$e.width,this.offscreenCanvas.height=$e.height,this.offscreenCanvasContext.drawImage($e,0,0,$e.width,$e.height);var ht=this.offscreenCanvasContext.getImageData(-1,-1,$e.width+2,$e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:ht.width,height:ht.height},ht.data)},y.prototype.removeTile=function($e){var ht=this.loaded,gt=$e.uid;ht&&ht[gt]&&delete ht[gt]};var s=x;function x(rt,$e){var gt,ht=rt&&rt.type;if("FeatureCollection"===ht)for(gt=0;gt<rt.features.length;gt++)x(rt.features[gt],$e);else if("GeometryCollection"===ht)for(gt=0;gt<rt.geometries.length;gt++)x(rt.geometries[gt],$e);else if("Feature"===ht)x(rt.geometry,$e);else if("Polygon"===ht)h(rt.coordinates,$e);else if("MultiPolygon"===ht)for(gt=0;gt<rt.coordinates.length;gt++)h(rt.coordinates[gt],$e);return rt}function h(rt,$e){if(0!==rt.length){g(rt[0],$e);for(var ht=1;ht<rt.length;ht++)g(rt[ht],!$e)}}function g(rt,$e){for(var ht=0,gt=0,ft=rt.length,Ct=ft-1;gt<ft;Ct=gt++)ht+=(rt[gt][0]-rt[Ct][0])*(rt[Ct][1]+rt[gt][1]);ht>=0!=!!$e&&rt.reverse()}var m=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function($e){this._feature=$e,this.extent=t.EXTENT,this.type=$e.type,this.properties=$e.tags,"id"in $e&&!isNaN($e.id)&&(this.id=parseInt($e.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var $e=[],ht=0,gt=this._feature.geometry;ht<gt.length;ht+=1){var ft=gt[ht];$e.push([new t.Point$1(ft[0],ft[1])])}return $e}for(var Ct=[],sr=0,tr=this._feature.geometry;sr<tr.length;sr+=1){for(var Hr=[],zr=0,Wr=tr[sr];zr<Wr.length;zr+=1){var Ke=Wr[zr];Hr.push(new t.Point$1(Ke[0],Ke[1]))}Ct.push(Hr)}return Ct},d.prototype.toGeoJSON=function($e,ht,gt){return m.call(this,$e,ht,gt)};var A=function($e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=$e.length,this._features=$e};A.prototype.feature=function($e){return new d(this._features[$e])};var b=t.vectorTile.VectorTileFeature,c=S;function S(rt,$e){this.options=$e||{},this.features=rt,this.length=rt.length}function w(rt,$e){this.id="number"==typeof rt.id?rt.id:void 0,this.type=rt.type,this.rawGeometry=1===rt.type?[rt.geometry]:rt.geometry,this.properties=rt.tags,this.extent=$e||4096}S.prototype.feature=function(rt){return new w(this.features[rt],this.options.extent)},w.prototype.loadGeometry=function(){var rt=this.rawGeometry;this.geometry=[];for(var $e=0;$e<rt.length;$e++){for(var ht=rt[$e],gt=[],ft=0;ft<ht.length;ft++)gt.push(new t.Point$1(ht[ft][0],ht[ft][1]));this.geometry.push(gt)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var rt=this.geometry,$e=1/0,ht=-1/0,gt=1/0,ft=-1/0,Ct=0;Ct<rt.length;Ct++)for(var sr=rt[Ct],tr=0;tr<sr.length;tr++){var Cr=sr[tr];$e=Math.min($e,Cr.x),ht=Math.max(ht,Cr.x),gt=Math.min(gt,Cr.y),ft=Math.max(ft,Cr.y)}return[$e,gt,ht,ft]},w.prototype.toGeoJSON=b.prototype.toGeoJSON;var E=_,P=_,R=z,F=c;function _(rt){var $e=new t.pbf;return D(rt,$e),$e.finish()}function z(rt,$e){$e=$e||{};var ht={};for(var gt in rt)ht[gt]=new c(rt[gt].features,$e),ht[gt].name=gt,ht[gt].version=$e.version,ht[gt].extent=$e.extent;return _({layers:ht})}function D(rt,$e){for(var ht in rt.layers)$e.writeMessage(3,k,rt.layers[ht])}function k(rt,$e){$e.writeVarintField(15,rt.version||1),$e.writeStringField(1,rt.name||""),$e.writeVarintField(5,rt.extent||4096);var ht,gt={keys:[],values:[],keycache:{},valuecache:{}};for(ht=0;ht<rt.length;ht++)gt.feature=rt.feature(ht),$e.writeMessage(2,O,gt);var ft=gt.keys;for(ht=0;ht<ft.length;ht++)$e.writeStringField(3,ft[ht]);var Ct=gt.values;for(ht=0;ht<Ct.length;ht++)$e.writeMessage(4,W,Ct[ht])}function O(rt,$e){var ht=rt.feature;void 0!==ht.id&&$e.writeVarintField(1,ht.id),$e.writeMessage(2,U,rt),$e.writeVarintField(3,ht.type),$e.writeMessage(4,ee,ht)}function U(rt,$e){var ht=rt.feature,gt=rt.keys,ft=rt.values,Ct=rt.keycache,sr=rt.valuecache;for(var tr in ht.properties){var Cr=Ct[tr];typeof Cr>"u"&&(gt.push(tr),Cr=gt.length-1,Ct[tr]=Cr),$e.writeVarint(Cr);var Hr=ht.properties[tr],zr=typeof Hr;"string"!==zr&&"boolean"!==zr&&"number"!==zr&&(Hr=JSON.stringify(Hr));var Wr=zr+":"+Hr,Ke=sr[Wr];typeof Ke>"u"&&(ft.push(Hr),Ke=ft.length-1,sr[Wr]=Ke),$e.writeVarint(Ke)}}function H(rt,$e){return($e<<3)+(7&rt)}function j(rt){return rt<<1^rt>>31}function ee(rt,$e){for(var ht=rt.loadGeometry(),gt=rt.type,ft=0,Ct=0,sr=ht.length,tr=0;tr<sr;tr++){var Cr=ht[tr],Hr=1;1===gt&&(Hr=Cr.length),$e.writeVarint(H(1,Hr));for(var zr=3===gt?Cr.length-1:Cr.length,Wr=0;Wr<zr;Wr++){1===Wr&&1!==gt&&$e.writeVarint(H(2,zr-1));var Ke=Cr[Wr].x-ft,We=Cr[Wr].y-Ct;$e.writeVarint(j(Ke)),$e.writeVarint(j(We)),ft+=Ke,Ct+=We}3===gt&&$e.writeVarint(H(7,1))}}function W(rt,$e){var ht=typeof rt;"string"===ht?$e.writeStringField(1,rt):"boolean"===ht?$e.writeBooleanField(7,rt):"number"===ht&&(rt%1!=0?$e.writeDoubleField(3,rt):rt<0?$e.writeSVarintField(6,rt):$e.writeVarintField(5,rt))}function B(rt,$e,ht,gt,ft,Ct){if(!(ft-gt<=ht)){var sr=gt+ft>>1;te(rt,$e,sr,gt,ft,Ct%2),B(rt,$e,ht,gt,sr-1,Ct+1),B(rt,$e,ht,sr+1,ft,Ct+1)}}function te(rt,$e,ht,gt,ft,Ct){for(;ft>gt;){if(ft-gt>600){var sr=ft-gt+1,tr=ht-gt+1,Cr=Math.log(sr),Hr=.5*Math.exp(2*Cr/3),zr=.5*Math.sqrt(Cr*Hr*(sr-Hr)/sr)*(tr-sr/2<0?-1:1);te(rt,$e,ht,Math.max(gt,Math.floor(ht-tr*Hr/sr+zr)),Math.min(ft,Math.floor(ht+(sr-tr)*Hr/sr+zr)),Ct)}var We=$e[2*ht+Ct],Jt=gt,Gt=ft;for(q(rt,$e,gt,ht),$e[2*ft+Ct]>We&&q(rt,$e,gt,ft);Jt<Gt;){for(q(rt,$e,Jt,Gt),Jt++,Gt--;$e[2*Jt+Ct]<We;)Jt++;for(;$e[2*Gt+Ct]>We;)Gt--}$e[2*gt+Ct]===We?q(rt,$e,gt,Gt):q(rt,$e,++Gt,ft),Gt<=ht&&(gt=Gt+1),ht<=Gt&&(ft=Gt-1)}}function q(rt,$e,ht,gt){oe(rt,ht,gt),oe($e,2*ht,2*gt),oe($e,2*ht+1,2*gt+1)}function oe(rt,$e,ht){var gt=rt[$e];rt[$e]=rt[ht],rt[ht]=gt}function ie(rt,$e,ht,gt,ft,Ct,sr){for(var Hr,zr,tr=[0,rt.length-1,0],Cr=[];tr.length;){var Wr=tr.pop(),Ke=tr.pop(),We=tr.pop();if(Ke-We<=sr)for(var Jt=We;Jt<=Ke;Jt++)Hr=$e[2*Jt],zr=$e[2*Jt+1],Hr>=ht&&Hr<=ft&&zr>=gt&&zr<=Ct&&Cr.push(rt[Jt]);else{var Gt=Math.floor((We+Ke)/2);Hr=$e[2*Gt],zr=$e[2*Gt+1],Hr>=ht&&Hr<=ft&&zr>=gt&&zr<=Ct&&Cr.push(rt[Gt]);var hr=(Wr+1)%2;(0===Wr?ht<=Hr:gt<=zr)&&(tr.push(We),tr.push(Gt-1),tr.push(hr)),(0===Wr?ft>=Hr:Ct>=zr)&&(tr.push(Gt+1),tr.push(Ke),tr.push(hr))}}return Cr}function V(rt,$e,ht,gt,ft,Ct){for(var sr=[0,rt.length-1,0],tr=[],Cr=ft*ft;sr.length;){var Hr=sr.pop(),zr=sr.pop(),Wr=sr.pop();if(zr-Wr<=Ct)for(var Ke=Wr;Ke<=zr;Ke++)Y($e[2*Ke],$e[2*Ke+1],ht,gt)<=Cr&&tr.push(rt[Ke]);else{var We=Math.floor((Wr+zr)/2),Jt=$e[2*We],Gt=$e[2*We+1];Y(Jt,Gt,ht,gt)<=Cr&&tr.push(rt[We]);var hr=(Hr+1)%2;(0===Hr?ht-ft<=Jt:gt-ft<=Gt)&&(sr.push(Wr),sr.push(We-1),sr.push(hr)),(0===Hr?ht+ft>=Jt:gt+ft>=Gt)&&(sr.push(We+1),sr.push(zr),sr.push(hr))}}return tr}function Y(rt,$e,ht,gt){var ft=rt-ht,Ct=$e-gt;return ft*ft+Ct*Ct}E.fromVectorTileJs=P,E.fromGeojsonVt=R,E.GeoJSONWrapper=F;var ae=function(rt){return rt[0]},X=function(rt){return rt[1]},J=function($e,ht,gt,ft,Ct){void 0===ht&&(ht=ae),void 0===gt&&(gt=X),void 0===ft&&(ft=64),void 0===Ct&&(Ct=Float64Array),this.nodeSize=ft,this.points=$e;for(var sr=$e.length<65536?Uint16Array:Uint32Array,tr=this.ids=new sr($e.length),Cr=this.coords=new Ct(2*$e.length),Hr=0;Hr<$e.length;Hr++)tr[Hr]=Hr,Cr[2*Hr]=ht($e[Hr]),Cr[2*Hr+1]=gt($e[Hr]);B(tr,Cr,ft,0,tr.length-1,0)};J.prototype.range=function($e,ht,gt,ft){return ie(this.ids,this.coords,$e,ht,gt,ft,this.nodeSize)},J.prototype.within=function($e,ht,gt){return V(this.ids,this.coords,$e,ht,gt,this.nodeSize)};var ue={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(rt){return rt}},re=function($e){this.options=Fe(Object.create(ue),$e),this.trees=new Array(this.options.maxZoom+1)};function ne(rt,$e,ht,gt,ft){return{x:rt,y:$e,zoom:1/0,id:ht,parentId:-1,numPoints:gt,properties:ft}}function se(rt,$e){var ht=rt.geometry.coordinates,gt=ht[0],ft=ht[1];return{x:De(gt),y:_e(ft),zoom:1/0,index:$e,parentId:-1}}function de(rt){return{type:"Feature",id:rt.id,properties:be(rt),geometry:{type:"Point",coordinates:[Ce(rt.x),Le(rt.y)]}}}function be(rt){var $e=rt.numPoints,ht=$e>=1e4?Math.round($e/1e3)+"k":$e>=1e3?Math.round($e/100)/10+"k":$e;return Fe(Fe({},rt.properties),{cluster:!0,cluster_id:rt.id,point_count:$e,point_count_abbreviated:ht})}function De(rt){return rt/360+.5}function _e(rt){var $e=Math.sin(rt*Math.PI/180),ht=.5-.25*Math.log((1+$e)/(1-$e))/Math.PI;return ht<0?0:ht>1?1:ht}function Ce(rt){return 360*(rt-.5)}function Le(rt){var $e=(180-360*rt)*Math.PI/180;return 360*Math.atan(Math.exp($e))/Math.PI-90}function Fe(rt,$e){for(var ht in $e)rt[ht]=$e[ht];return rt}function ke(rt){return rt.x}function ze(rt){return rt.y}function Pe(rt,$e,ht,gt){for(var tr,ft=gt,Ct=ht-$e>>1,sr=ht-$e,Cr=rt[$e],Hr=rt[$e+1],zr=rt[ht],Wr=rt[ht+1],Ke=$e+3;Ke<ht;Ke+=3){var We=Ie(rt[Ke],rt[Ke+1],Cr,Hr,zr,Wr);if(We>ft)tr=Ke,ft=We;else if(We===ft){var Jt=Math.abs(Ke-Ct);Jt<sr&&(tr=Ke,sr=Jt)}}ft>gt&&(tr-$e>3&&Pe(rt,$e,tr,gt),rt[tr+2]=ft,ht-tr>3&&Pe(rt,tr,ht,gt))}function Ie(rt,$e,ht,gt,ft,Ct){var sr=ft-ht,tr=Ct-gt;if(0!==sr||0!==tr){var Cr=((rt-ht)*sr+($e-gt)*tr)/(sr*sr+tr*tr);Cr>1?(ht=ft,gt=Ct):Cr>0&&(ht+=sr*Cr,gt+=tr*Cr)}return(sr=rt-ht)*sr+(tr=$e-gt)*tr}function Qe(rt,$e,ht,gt){var ft={id:typeof rt>"u"?null:rt,type:$e,geometry:ht,tags:gt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return at(ft),ft}function at(rt){var $e=rt.geometry,ht=rt.type;if("Point"===ht||"MultiPoint"===ht||"LineString"===ht)Be(rt,$e);else if("Polygon"===ht||"MultiLineString"===ht)for(var gt=0;gt<$e.length;gt++)Be(rt,$e[gt]);else if("MultiPolygon"===ht)for(gt=0;gt<$e.length;gt++)for(var ft=0;ft<$e[gt].length;ft++)Be(rt,$e[gt][ft])}function Be(rt,$e){for(var ht=0;ht<$e.length;ht+=3)rt.minX=Math.min(rt.minX,$e[ht]),rt.minY=Math.min(rt.minY,$e[ht+1]),rt.maxX=Math.max(rt.maxX,$e[ht]),rt.maxY=Math.max(rt.maxY,$e[ht+1])}function Ne(rt,$e){var ht=[];if("FeatureCollection"===rt.type)for(var gt=0;gt<rt.features.length;gt++)nt(ht,rt.features[gt],$e,gt);else"Feature"===rt.type?nt(ht,rt,$e):nt(ht,{geometry:rt},$e);return ht}function nt(rt,$e,ht,gt){if($e.geometry){var ft=$e.geometry.coordinates,Ct=$e.geometry.type,sr=Math.pow(ht.tolerance/((1<<ht.maxZoom)*ht.extent),2),tr=[],Cr=$e.id;if(ht.promoteId?Cr=$e.properties[ht.promoteId]:ht.generateId&&(Cr=gt||0),"Point"===Ct)ct(ft,tr);else if("MultiPoint"===Ct)for(var Hr=0;Hr<ft.length;Hr++)ct(ft[Hr],tr);else if("LineString"===Ct)mt(ft,tr,sr,!1);else if("MultiLineString"===Ct){if(ht.lineMetrics){for(Hr=0;Hr<ft.length;Hr++)tr=[],mt(ft[Hr],tr,sr,!1),rt.push(Qe(Cr,"LineString",tr,$e.properties));return}Bt(ft,tr,sr,!1)}else if("Polygon"===Ct)Bt(ft,tr,sr,!0);else{if("MultiPolygon"!==Ct){if("GeometryCollection"===Ct){for(Hr=0;Hr<$e.geometry.geometries.length;Hr++)nt(rt,{id:Cr,geometry:$e.geometry.geometries[Hr],properties:$e.properties},ht,gt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Hr=0;Hr<ft.length;Hr++){var zr=[];Bt(ft[Hr],zr,sr,!0),tr.push(zr)}}rt.push(Qe(Cr,Ct,tr,$e.properties))}}function ct(rt,$e){$e.push(Rt(rt[0])),$e.push(zt(rt[1])),$e.push(0)}function mt(rt,$e,ht,gt){for(var ft,Ct,sr=0,tr=0;tr<rt.length;tr++){var Cr=Rt(rt[tr][0]),Hr=zt(rt[tr][1]);$e.push(Cr),$e.push(Hr),$e.push(0),tr>0&&(sr+=gt?(ft*Hr-Cr*Ct)/2:Math.sqrt(Math.pow(Cr-ft,2)+Math.pow(Hr-Ct,2))),ft=Cr,Ct=Hr}var zr=$e.length-3;$e[2]=1,Pe($e,0,zr,ht),$e[zr+2]=1,$e.size=Math.abs(sr),$e.start=0,$e.end=$e.size}function Bt(rt,$e,ht,gt){for(var ft=0;ft<rt.length;ft++){var Ct=[];mt(rt[ft],Ct,ht,gt),$e.push(Ct)}}function Rt(rt){return rt/360+.5}function zt(rt){var $e=Math.sin(rt*Math.PI/180),ht=.5-.25*Math.log((1+$e)/(1-$e))/Math.PI;return ht<0?0:ht>1?1:ht}function St(rt,$e,ht,gt,ft,Ct,sr,tr){if(gt/=$e,Ct>=(ht/=$e)&&sr<gt)return rt;if(sr<ht||Ct>=gt)return null;for(var Cr=[],Hr=0;Hr<rt.length;Hr++){var zr=rt[Hr],Wr=zr.geometry,Ke=zr.type,We=0===ft?zr.minX:zr.minY,Jt=0===ft?zr.maxX:zr.maxY;if(We>=ht&&Jt<gt)Cr.push(zr);else if(!(Jt<ht||We>=gt)){var Gt=[];if("Point"===Ke||"MultiPoint"===Ke)Xt(Wr,Gt,ht,gt,ft);else if("LineString"===Ke)Mt(Wr,Gt,ht,gt,ft,!1,tr.lineMetrics);else if("MultiLineString"===Ke)Se(Wr,Gt,ht,gt,ft,!1);else if("Polygon"===Ke)Se(Wr,Gt,ht,gt,ft,!0);else if("MultiPolygon"===Ke)for(var hr=0;hr<Wr.length;hr++){var br=[];Se(Wr[hr],br,ht,gt,ft,!0),br.length&&Gt.push(br)}if(Gt.length){if(tr.lineMetrics&&"LineString"===Ke){for(hr=0;hr<Gt.length;hr++)Cr.push(Qe(zr.id,Ke,Gt[hr],zr.tags));continue}("LineString"===Ke||"MultiLineString"===Ke)&&(1===Gt.length?(Ke="LineString",Gt=Gt[0]):Ke="MultiLineString"),("Point"===Ke||"MultiPoint"===Ke)&&(Ke=3===Gt.length?"Point":"MultiPoint"),Cr.push(Qe(zr.id,Ke,Gt,zr.tags))}}}return Cr.length?Cr:null}function Xt(rt,$e,ht,gt,ft){for(var Ct=0;Ct<rt.length;Ct+=3){var sr=rt[Ct+ft];sr>=ht&&sr<=gt&&($e.push(rt[Ct]),$e.push(rt[Ct+1]),$e.push(rt[Ct+2]))}}function Mt(rt,$e,ht,gt,ft,Ct,sr){for(var zr,Wr,tr=st(rt),Cr=0===ft?ge:Oe,Hr=rt.start,Ke=0;Ke<rt.length-3;Ke+=3){var We=rt[Ke],Jt=rt[Ke+1],Gt=rt[Ke+2],hr=rt[Ke+3],br=rt[Ke+4],Ut=0===ft?We:Jt,Kt=0===ft?hr:br,wt=!1;sr&&(zr=Math.sqrt(Math.pow(We-hr,2)+Math.pow(Jt-br,2))),Ut<ht?Kt>ht&&(Wr=Cr(tr,We,Jt,hr,br,ht),sr&&(tr.start=Hr+zr*Wr)):Ut>gt?Kt<gt&&(Wr=Cr(tr,We,Jt,hr,br,gt),sr&&(tr.start=Hr+zr*Wr)):pe(tr,We,Jt,Gt),Kt<ht&&Ut>=ht&&(Wr=Cr(tr,We,Jt,hr,br,ht),wt=!0),Kt>gt&&Ut<=gt&&(Wr=Cr(tr,We,Jt,hr,br,gt),wt=!0),!Ct&&wt&&(sr&&(tr.end=Hr+zr*Wr),$e.push(tr),tr=st(rt)),sr&&(Hr+=zr)}var xr=rt.length-3;We=rt[xr],Jt=rt[xr+1],Gt=rt[xr+2],(Ut=0===ft?We:Jt)>=ht&&Ut<=gt&&pe(tr,We,Jt,Gt),xr=tr.length-3,Ct&&xr>=3&&(tr[xr]!==tr[0]||tr[xr+1]!==tr[1])&&pe(tr,tr[0],tr[1],tr[2]),tr.length&&$e.push(tr)}function st(rt){var $e=[];return $e.size=rt.size,$e.start=rt.start,$e.end=rt.end,$e}function Se(rt,$e,ht,gt,ft,Ct){for(var sr=0;sr<rt.length;sr++)Mt(rt[sr],$e,ht,gt,ft,Ct,!1)}function pe(rt,$e,ht,gt){rt.push($e),rt.push(ht),rt.push(gt)}function ge(rt,$e,ht,gt,ft,Ct){var sr=(Ct-$e)/(gt-$e);return rt.push(Ct),rt.push(ht+(ft-ht)*sr),rt.push(1),sr}function Oe(rt,$e,ht,gt,ft,Ct){var sr=(Ct-ht)/(ft-ht);return rt.push($e+(gt-$e)*sr),rt.push(Ct),rt.push(1),sr}function we(rt,$e){var ht=$e.buffer/$e.extent,gt=rt,ft=St(rt,1,-1-ht,ht,0,-1,2,$e),Ct=St(rt,1,1-ht,2+ht,0,-1,2,$e);return(ft||Ct)&&(gt=St(rt,1,-ht,1+ht,0,-1,2,$e)||[],ft&&(gt=He(ft,1).concat(gt)),Ct&&(gt=gt.concat(He(Ct,-1)))),gt}function He(rt,$e){for(var ht=[],gt=0;gt<rt.length;gt++){var sr,ft=rt[gt],Ct=ft.type;if("Point"===Ct||"MultiPoint"===Ct||"LineString"===Ct)sr=Xe(ft.geometry,$e);else if("MultiLineString"===Ct||"Polygon"===Ct){sr=[];for(var tr=0;tr<ft.geometry.length;tr++)sr.push(Xe(ft.geometry[tr],$e))}else if("MultiPolygon"===Ct)for(sr=[],tr=0;tr<ft.geometry.length;tr++){for(var Cr=[],Hr=0;Hr<ft.geometry[tr].length;Hr++)Cr.push(Xe(ft.geometry[tr][Hr],$e));sr.push(Cr)}ht.push(Qe(ft.id,Ct,sr,ft.tags))}return ht}function Xe(rt,$e){var ht=[];ht.size=rt.size,void 0!==rt.start&&(ht.start=rt.start,ht.end=rt.end);for(var gt=0;gt<rt.length;gt+=3)ht.push(rt[gt]+$e,rt[gt+1],rt[gt+2]);return ht}function ut(rt,$e){if(rt.transformed)return rt;var Ct,sr,tr,ht=1<<rt.z,gt=rt.x,ft=rt.y;for(Ct=0;Ct<rt.features.length;Ct++){var Cr=rt.features[Ct],Hr=Cr.geometry,zr=Cr.type;if(Cr.geometry=[],1===zr)for(sr=0;sr<Hr.length;sr+=2)Cr.geometry.push(Ze(Hr[sr],Hr[sr+1],$e,ht,gt,ft));else for(sr=0;sr<Hr.length;sr++){var Wr=[];for(tr=0;tr<Hr[sr].length;tr+=2)Wr.push(Ze(Hr[sr][tr],Hr[sr][tr+1],$e,ht,gt,ft));Cr.geometry.push(Wr)}}return rt.transformed=!0,rt}function Ze(rt,$e,ht,gt,ft,Ct){return[Math.round(ht*(rt*gt-ft)),Math.round(ht*($e*gt-Ct))]}function qe(rt,$e,ht,gt,ft){for(var Ct=$e===ft.maxZoom?0:ft.tolerance/((1<<$e)*ft.extent),sr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ht,y:gt,z:$e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},tr=0;tr<rt.length;tr++){sr.numFeatures++,Dt(sr,rt[tr],Ct,ft);var Cr=rt[tr].minX,Hr=rt[tr].minY,zr=rt[tr].maxX,Wr=rt[tr].maxY;Cr<sr.minX&&(sr.minX=Cr),Hr<sr.minY&&(sr.minY=Hr),zr>sr.maxX&&(sr.maxX=zr),Wr>sr.maxY&&(sr.maxY=Wr)}return sr}function Dt(rt,$e,ht,gt){var ft=$e.geometry,Ct=$e.type,sr=[];if("Point"===Ct||"MultiPoint"===Ct)for(var tr=0;tr<ft.length;tr+=3)sr.push(ft[tr]),sr.push(ft[tr+1]),rt.numPoints++,rt.numSimplified++;else if("LineString"===Ct)Ft(sr,ft,rt,ht,!1,!1);else if("MultiLineString"===Ct||"Polygon"===Ct)for(tr=0;tr<ft.length;tr++)Ft(sr,ft[tr],rt,ht,"Polygon"===Ct,0===tr);else if("MultiPolygon"===Ct)for(var Cr=0;Cr<ft.length;Cr++){var Hr=ft[Cr];for(tr=0;tr<Hr.length;tr++)Ft(sr,Hr[tr],rt,ht,!0,0===tr)}if(sr.length){var zr=$e.tags||null;if("LineString"===Ct&&gt.lineMetrics){for(var Wr in zr={},$e.tags)zr[Wr]=$e.tags[Wr];zr.mapbox_clip_start=ft.start/ft.size,zr.mapbox_clip_end=ft.end/ft.size}var Ke={geometry:sr,type:"Polygon"===Ct||"MultiPolygon"===Ct?3:"LineString"===Ct||"MultiLineString"===Ct?2:1,tags:zr};null!==$e.id&&(Ke.id=$e.id),rt.features.push(Ke)}}function Ft(rt,$e,ht,gt,ft,Ct){var sr=gt*gt;if(gt>0&&$e.size<(ft?sr:gt))ht.numPoints+=$e.length/3;else{for(var tr=[],Cr=0;Cr<$e.length;Cr+=3)(0===gt||$e[Cr+2]>sr)&&(ht.numSimplified++,tr.push($e[Cr]),tr.push($e[Cr+1])),ht.numPoints++;ft&&bt(tr,Ct),rt.push(tr)}}function bt(rt,$e){for(var ht=0,gt=0,ft=rt.length,Ct=ft-2;gt<ft;Ct=gt,gt+=2)ht+=(rt[gt]-rt[Ct])*(rt[gt+1]+rt[Ct+1]);if(ht>0===$e)for(gt=0,ft=rt.length;gt<ft/2;gt+=2){var sr=rt[gt],tr=rt[gt+1];rt[gt]=rt[ft-2-gt],rt[gt+1]=rt[ft-1-gt],rt[ft-2-gt]=sr,rt[ft-1-gt]=tr}}function Pt(rt,$e){return new cr(rt,$e)}function cr(rt,$e){var ht=($e=this.options=Kr(Object.create(this.options),$e)).debug;if(ht&&console.time("preprocess data"),$e.maxZoom<0||$e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($e.promoteId&&$e.generateId)throw new Error("promoteId and generateId cannot be used together.");var gt=Ne(rt,$e);this.tiles={},this.tileCoords=[],ht&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$e.indexMaxZoom,$e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(gt=we(gt,$e)).length&&this.splitTile(gt,0,0,0),ht&&(gt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Sr(rt,$e,ht){return 32*((1<<rt)*ht+$e)+rt}function Kr(rt,$e){for(var ht in $e)rt[ht]=$e[ht];return rt}function It(rt,$e){var ht=rt.tileID.canonical;if(!this._geoJSONIndex)return $e(null,null);var gt=this._geoJSONIndex.getTile(ht.z,ht.x,ht.y);if(!gt)return $e(null,null);var ft=new A(gt.features),Ct=E(ft);(0!==Ct.byteOffset||Ct.byteLength!==Ct.buffer.byteLength)&&(Ct=new Uint8Array(Ct)),$e(null,{vectorTile:ft,rawData:Ct.buffer})}re.prototype.load=function($e){var ht=this.options,gt=ht.log,ft=ht.minZoom,Ct=ht.maxZoom,sr=ht.nodeSize;gt&&console.time("total time");var tr="prepare "+$e.length+" points";gt&&console.time(tr),this.points=$e;for(var Cr=[],Hr=0;Hr<$e.length;Hr++)$e[Hr].geometry&&Cr.push(se($e[Hr],Hr));this.trees[Ct+1]=new J(Cr,ke,ze,sr,Float32Array),gt&&console.timeEnd(tr);for(var zr=Ct;zr>=ft;zr--){var Wr=+Date.now();Cr=this._cluster(Cr,zr),this.trees[zr]=new J(Cr,ke,ze,sr,Float32Array),gt&&console.log("z%d: %d clusters in %dms",zr,Cr.length,+Date.now()-Wr)}return gt&&console.timeEnd("total time"),this},re.prototype.getClusters=function($e,ht){var gt=(($e[0]+180)%360+360)%360-180,ft=Math.max(-90,Math.min(90,$e[1])),Ct=180===$e[2]?180:(($e[2]+180)%360+360)%360-180,sr=Math.max(-90,Math.min(90,$e[3]));if($e[2]-$e[0]>=360)gt=-180,Ct=180;else if(gt>Ct){var tr=this.getClusters([gt,ft,180,sr],ht),Cr=this.getClusters([-180,ft,Ct,sr],ht);return tr.concat(Cr)}for(var Hr=this.trees[this._limitZoom(ht)],Wr=[],Ke=0,We=Hr.range(De(gt),_e(sr),De(Ct),_e(ft));Ke<We.length;Ke+=1){var Jt=We[Ke],Gt=Hr.points[Jt];Wr.push(Gt.numPoints?de(Gt):this.points[Gt.index])}return Wr},re.prototype.getChildren=function($e){var ht=this._getOriginId($e),gt=this._getOriginZoom($e),ft="No cluster with the specified id.",Ct=this.trees[gt];if(!Ct)throw new Error(ft);var sr=Ct.points[ht];if(!sr)throw new Error(ft);for(var tr=this.options.radius/(this.options.extent*Math.pow(2,gt-1)),Hr=[],zr=0,Wr=Ct.within(sr.x,sr.y,tr);zr<Wr.length;zr+=1){var Ke=Wr[zr],We=Ct.points[Ke];We.parentId===$e&&Hr.push(We.numPoints?de(We):this.points[We.index])}if(0===Hr.length)throw new Error(ft);return Hr},re.prototype.getLeaves=function($e,ht,gt){ht=ht||10,gt=gt||0;var ft=[];return this._appendLeaves(ft,$e,ht,gt,0),ft},re.prototype.getTile=function($e,ht,gt){var ft=this.trees[this._limitZoom($e)],Ct=Math.pow(2,$e),sr=this.options,tr=sr.extent,Hr=sr.radius/tr,zr=(gt-Hr)/Ct,Wr=(gt+1+Hr)/Ct,Ke={features:[]};return this._addTileFeatures(ft.range((ht-Hr)/Ct,zr,(ht+1+Hr)/Ct,Wr),ft.points,ht,gt,Ct,Ke),0===ht&&this._addTileFeatures(ft.range(1-Hr/Ct,zr,1,Wr),ft.points,Ct,gt,Ct,Ke),ht===Ct-1&&this._addTileFeatures(ft.range(0,zr,Hr/Ct,Wr),ft.points,-1,gt,Ct,Ke),Ke.features.length?Ke:null},re.prototype.getClusterExpansionZoom=function($e){for(var ht=this._getOriginZoom($e)-1;ht<=this.options.maxZoom;){var gt=this.getChildren($e);if(ht++,1!==gt.length)break;$e=gt[0].properties.cluster_id}return ht},re.prototype._appendLeaves=function($e,ht,gt,ft,Ct){for(var tr=0,Cr=this.getChildren(ht);tr<Cr.length;tr+=1){var Hr=Cr[tr],zr=Hr.properties;if(zr&&zr.cluster?Ct+zr.point_count<=ft?Ct+=zr.point_count:Ct=this._appendLeaves($e,zr.cluster_id,gt,ft,Ct):Ct<ft?Ct++:$e.push(Hr),$e.length===gt)break}return Ct},re.prototype._addTileFeatures=function($e,ht,gt,ft,Ct,sr){for(var tr=0,Cr=$e;tr<Cr.length;tr+=1){var zr=ht[Cr[tr]],Wr=zr.numPoints,Ke={type:1,geometry:[[Math.round(this.options.extent*(zr.x*Ct-gt)),Math.round(this.options.extent*(zr.y*Ct-ft))]],tags:Wr?be(zr):this.points[zr.index].properties},We=void 0;Wr?We=zr.id:this.options.generateId?We=zr.index:this.points[zr.index].id&&(We=this.points[zr.index].id),void 0!==We&&(Ke.id=We),sr.features.push(Ke)}},re.prototype._limitZoom=function($e){return Math.max(this.options.minZoom,Math.min(+$e,this.options.maxZoom+1))},re.prototype._cluster=function($e,ht){for(var gt=[],ft=this.options,Ct=ft.radius,sr=ft.extent,tr=ft.reduce,Cr=ft.minPoints,Hr=Ct/(sr*Math.pow(2,ht)),zr=0;zr<$e.length;zr++){var Wr=$e[zr];if(!(Wr.zoom<=ht)){Wr.zoom=ht;for(var Ke=this.trees[ht+1],We=Ke.within(Wr.x,Wr.y,Hr),Jt=Wr.numPoints||1,Gt=Jt,hr=0,br=We;hr<br.length;hr+=1){var Ut=br[hr],Kt=Ke.points[Ut];Kt.zoom>ht&&(Gt+=Kt.numPoints||1)}if(Gt>=Cr){for(var wt=Wr.x*Jt,xr=Wr.y*Jt,Ir=tr&&Jt>1?this._map(Wr,!0):null,Ur=(zr<<5)+(ht+1)+this.points.length,qt=0,on=We;qt<on.length;qt+=1){var an=on[qt],hn=Ke.points[an];if(!(hn.zoom<=ht)){hn.zoom=ht;var An=hn.numPoints||1;wt+=hn.x*An,xr+=hn.y*An,hn.parentId=Ur,tr&&(Ir||(Ir=this._map(Wr,!0)),tr(Ir,this._map(hn)))}}Wr.parentId=Ur,gt.push(ne(wt/Gt,xr/Gt,Ur,Gt,Ir))}else if(gt.push(Wr),Gt>1)for(var Sn=0,sa=We;Sn<sa.length;Sn+=1){var Rn=sa[Sn],Yr=Ke.points[Rn];Yr.zoom<=ht||(Yr.zoom=ht,gt.push(Yr))}}}return gt},re.prototype._getOriginId=function($e){return $e-this.points.length>>5},re.prototype._getOriginZoom=function($e){return($e-this.points.length)%32},re.prototype._map=function($e,ht){if($e.numPoints)return ht?Fe({},$e.properties):$e.properties;var gt=this.points[$e.index].properties,ft=this.options.map(gt);return ht&&ft===gt?Fe({},ft):ft},cr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},cr.prototype.splitTile=function(rt,$e,ht,gt,ft,Ct,sr){for(var tr=[rt,$e,ht,gt],Cr=this.options,Hr=Cr.debug;tr.length;){gt=tr.pop(),ht=tr.pop(),$e=tr.pop(),rt=tr.pop();var zr=1<<$e,Wr=Sr($e,ht,gt),Ke=this.tiles[Wr];if(!Ke&&(Hr>1&&console.time("creation"),Ke=this.tiles[Wr]=qe(rt,$e,ht,gt,Cr),this.tileCoords.push({z:$e,x:ht,y:gt}),Hr)){Hr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$e,ht,gt,Ke.numFeatures,Ke.numPoints,Ke.numSimplified),console.timeEnd("creation"));var We="z"+$e;this.stats[We]=(this.stats[We]||0)+1,this.total++}if(Ke.source=rt,ft){if($e===Cr.maxZoom||$e===ft)continue;var Jt=1<<ft-$e;if(ht!==Math.floor(Ct/Jt)||gt!==Math.floor(sr/Jt))continue}else if($e===Cr.indexMaxZoom||Ke.numPoints<=Cr.indexMaxPoints)continue;if(Ke.source=null,0!==rt.length){Hr>1&&console.time("clipping");var Kt,wt,xr,Ir,Ur,qt,Gt=.5*Cr.buffer/Cr.extent,hr=.5-Gt,br=.5+Gt,Ut=1+Gt;Kt=wt=xr=Ir=null,Ur=St(rt,zr,ht-Gt,ht+br,0,Ke.minX,Ke.maxX,Cr),qt=St(rt,zr,ht+hr,ht+Ut,0,Ke.minX,Ke.maxX,Cr),rt=null,Ur&&(Kt=St(Ur,zr,gt-Gt,gt+br,1,Ke.minY,Ke.maxY,Cr),wt=St(Ur,zr,gt+hr,gt+Ut,1,Ke.minY,Ke.maxY,Cr),Ur=null),qt&&(xr=St(qt,zr,gt-Gt,gt+br,1,Ke.minY,Ke.maxY,Cr),Ir=St(qt,zr,gt+hr,gt+Ut,1,Ke.minY,Ke.maxY,Cr),qt=null),Hr>1&&console.timeEnd("clipping"),tr.push(Kt||[],$e+1,2*ht,2*gt),tr.push(wt||[],$e+1,2*ht,2*gt+1),tr.push(xr||[],$e+1,2*ht+1,2*gt),tr.push(Ir||[],$e+1,2*ht+1,2*gt+1)}}},cr.prototype.getTile=function(rt,$e,ht){var gt=this.options,ft=gt.extent,Ct=gt.debug;if(rt<0||rt>24)return null;var sr=1<<rt,tr=Sr(rt,$e=($e%sr+sr)%sr,ht);if(this.tiles[tr])return ut(this.tiles[tr],ft);Ct>1&&console.log("drilling down to z%d-%d-%d",rt,$e,ht);for(var Wr,Cr=rt,Hr=$e,zr=ht;!Wr&&Cr>0;)Cr--,Hr=Math.floor(Hr/2),zr=Math.floor(zr/2),Wr=this.tiles[Sr(Cr,Hr,zr)];return Wr&&Wr.source?(Ct>1&&console.log("found parent tile z%d-%d-%d",Cr,Hr,zr),Ct>1&&console.time("drilling down"),this.splitTile(Wr.source,Cr,Hr,zr,rt,$e,ht),Ct>1&&console.timeEnd("drilling down"),this.tiles[tr]?ut(this.tiles[tr],ft):null):null};var $t=function(rt){function $e(ht,gt,ft,Ct){rt.call(this,ht,gt,ft,It),Ct&&(this.loadGeoJSON=Ct)}return rt&&($e.__proto__=rt),$e.prototype=Object.create(rt&&rt.prototype),$e.prototype.constructor=$e,$e.prototype.loadData=function(gt,ft){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ft,this._pendingLoadDataParams=gt,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},$e.prototype._loadData=function(){var gt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ft=this._pendingCallback,Ct=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var sr=!!(Ct&&Ct.request&&Ct.request.collectResourceTiming)&&new t.RequestPerformance(Ct.request);this.loadGeoJSON(Ct,function(tr,Cr){if(tr||!Cr)return ft(tr);if("object"!=typeof Cr)return ft(new Error("Input data given to '"+Ct.source+"' is not a valid GeoJSON object."));s(Cr,!0);try{if(Ct.filter){var Hr=t.createExpression(Ct.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Hr.result)throw new Error(Hr.value.map(function(We){return We.key+": "+We.message}).join(", "));var zr=Cr.features.filter(function(We){return Hr.value.evaluate({zoom:0},We)});Cr={type:"FeatureCollection",features:zr}}gt._geoJSONIndex=Ct.cluster?new re(kr(Ct)).load(Cr.features):Pt(Cr,Ct.geojsonVtOptions)}catch(We){return ft(We)}gt.loaded={};var Wr={};if(sr){var Ke=sr.finish();Ke&&(Wr.resourceTiming={},Wr.resourceTiming[Ct.source]=JSON.parse(JSON.stringify(Ke)))}ft(null,Wr)})}},$e.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},$e.prototype.reloadTile=function(gt,ft){var Ct=this.loaded,sr=gt.uid;return Ct&&Ct[sr]?rt.prototype.reloadTile.call(this,gt,ft):this.loadTile(gt,ft)},$e.prototype.loadGeoJSON=function(gt,ft){if(gt.request)t.getJSON(gt.request,ft);else{if("string"!=typeof gt.data)return ft(new Error("Input data given to '"+gt.source+"' is not a valid GeoJSON object."));try{return ft(null,JSON.parse(gt.data))}catch{return ft(new Error("Input data given to '"+gt.source+"' is not a valid GeoJSON object."))}}},$e.prototype.removeSource=function(gt,ft){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ft()},$e.prototype.getClusterExpansionZoom=function(gt,ft){try{ft(null,this._geoJSONIndex.getClusterExpansionZoom(gt.clusterId))}catch(Ct){ft(Ct)}},$e.prototype.getClusterChildren=function(gt,ft){try{ft(null,this._geoJSONIndex.getChildren(gt.clusterId))}catch(Ct){ft(Ct)}},$e.prototype.getClusterLeaves=function(gt,ft){try{ft(null,this._geoJSONIndex.getLeaves(gt.clusterId,gt.limit,gt.offset))}catch(Ct){ft(Ct)}},$e}(f);function kr(rt){var $e=rt.superclusterOptions,ht=rt.clusterProperties;if(!ht||!$e)return $e;for(var gt={},ft={},Ct={accumulated:null,zoom:0},sr={properties:null},tr=Object.keys(ht),Cr=0,Hr=tr;Cr<Hr.length;Cr+=1){var zr=Hr[Cr],Wr=ht[zr],Ke=Wr[0],We=Wr[1],Jt=t.createExpression(We),Gt=t.createExpression("string"==typeof Ke?[Ke,["accumulated"],["get",zr]]:Ke);gt[zr]=Jt.value,ft[zr]=Gt.value}return $e.map=function(hr){sr.properties=hr;for(var br={},Ut=0,Kt=tr;Ut<Kt.length;Ut+=1){var wt=Kt[Ut];br[wt]=gt[wt].evaluate(Ct,sr)}return br},$e.reduce=function(hr,br){sr.properties=br;for(var Ut=0,Kt=tr;Ut<Kt.length;Ut+=1){var wt=Kt[Ut];Ct.accumulated=hr[wt],hr[wt]=ft[wt].evaluate(Ct,sr)}},$e}var lr=function($e){var ht=this;this.self=$e,this.actor=new t.Actor($e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:f,geojson:$t},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(gt,ft){if(ht.workerSourceTypes[gt])throw new Error('Worker source with name "'+gt+'" already registered.');ht.workerSourceTypes[gt]=ft},this.self.registerRTLTextPlugin=function(gt){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=gt.applyArabicShaping,t.plugin.processBidirectionalText=gt.processBidirectionalText,t.plugin.processStyledBidirectionalText=gt.processStyledBidirectionalText}};return lr.prototype.setReferrer=function($e,ht){this.referrer=ht},lr.prototype.setImages=function($e,ht,gt){for(var ft in this.availableImages[$e]=ht,this.workerSources[$e]){var Ct=this.workerSources[$e][ft];for(var sr in Ct)Ct[sr].availableImages=ht}gt()},lr.prototype.setLayers=function($e,ht,gt){this.getLayerIndex($e).replace(ht),gt()},lr.prototype.updateLayers=function($e,ht,gt){this.getLayerIndex($e).update(ht.layers,ht.removedIds),gt()},lr.prototype.loadTile=function($e,ht,gt){this.getWorkerSource($e,ht.type,ht.source).loadTile(ht,gt)},lr.prototype.loadDEMTile=function($e,ht,gt){this.getDEMWorkerSource($e,ht.source).loadTile(ht,gt)},lr.prototype.reloadTile=function($e,ht,gt){this.getWorkerSource($e,ht.type,ht.source).reloadTile(ht,gt)},lr.prototype.abortTile=function($e,ht,gt){this.getWorkerSource($e,ht.type,ht.source).abortTile(ht,gt)},lr.prototype.removeTile=function($e,ht,gt){this.getWorkerSource($e,ht.type,ht.source).removeTile(ht,gt)},lr.prototype.removeDEMTile=function($e,ht){this.getDEMWorkerSource($e,ht.source).removeTile(ht)},lr.prototype.removeSource=function($e,ht,gt){if(this.workerSources[$e]&&this.workerSources[$e][ht.type]&&this.workerSources[$e][ht.type][ht.source]){var ft=this.workerSources[$e][ht.type][ht.source];delete this.workerSources[$e][ht.type][ht.source],void 0!==ft.removeSource?ft.removeSource(ht,gt):gt()}},lr.prototype.loadWorkerSource=function($e,ht,gt){try{this.self.importScripts(ht.url),gt()}catch(ft){gt(ft.toString())}},lr.prototype.syncRTLPluginState=function($e,ht,gt){try{t.plugin.setState(ht);var ft=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=ft){this.self.importScripts(ft);var Ct=t.plugin.isParsed();gt(Ct?void 0:new Error("RTL Text Plugin failed to import scripts from "+ft),Ct)}}catch(tr){gt(tr.toString())}},lr.prototype.getAvailableImages=function($e){var ht=this.availableImages[$e];return ht||(ht=[]),ht},lr.prototype.getLayerIndex=function($e){var ht=this.layerIndexes[$e];return ht||(ht=this.layerIndexes[$e]=new u),ht},lr.prototype.getWorkerSource=function($e,ht,gt){var ft=this;if(this.workerSources[$e]||(this.workerSources[$e]={}),this.workerSources[$e][ht]||(this.workerSources[$e][ht]={}),!this.workerSources[$e][ht][gt]){var Ct={send:function(sr,tr,Cr){ft.actor.send(sr,tr,Cr,$e)}};this.workerSources[$e][ht][gt]=new this.workerSourceTypes[ht](Ct,this.getLayerIndex($e),this.getAvailableImages($e))}return this.workerSources[$e][ht][gt]},lr.prototype.getDEMWorkerSource=function($e,ht){return this.demWorkerSources[$e]||(this.demWorkerSources[$e]={}),this.demWorkerSources[$e][ht]||(this.demWorkerSources[$e][ht]=new y),this.demWorkerSources[$e][ht]},lr.prototype.enforceCacheSizeLimit=function($e,ht){t.enforceCacheSizeLimit(ht)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new lr(self)),lr}),I(["./shared"],function(t){var T=t.createCommonjsModule(function(fe){function G(rr){return!ce(rr)}function ce(rr){return Z()?ve()?Ee()?Ae()?Ge()?ot()?xt()?Wt()?ar()?Tt(rr&&rr.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}function Z(){return typeof window<"u"&&typeof document<"u"}function ve(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ee(){return Function.prototype&&Function.prototype.bind}function Ae(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Ge(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ot(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var pr,Lr,rr=new Blob([""],{type:"text/javascript"}),dr=URL.createObjectURL(rr);try{Lr=new Worker(dr),pr=!0}catch{pr=!1}return Lr&&Lr.terminate(),URL.revokeObjectURL(dr),pr}function xt(){return"Uint8ClampedArray"in window}function Wt(){return ArrayBuffer.isView}function ar(){var rr=document.createElement("canvas");rr.width=rr.height=1;var dr=rr.getContext("2d");if(!dr)return!1;var pr=dr.getImageData(0,0,1,1);return pr&&pr.width===rr.width}fe.exports?fe.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=ce);var Yt={};function Tt(rr){return void 0===Yt[rr]&&(Yt[rr]=Nt(rr)),Yt[rr]}function _t(rr){var dr=document.createElement("canvas"),pr=Object.create(G.webGLContextAttributes);return pr.failIfMajorPerformanceCaveat=rr,dr.probablySupportsContext?dr.probablySupportsContext("webgl",pr)||dr.probablySupportsContext("experimental-webgl",pr):dr.supportsContext?dr.supportsContext("webgl",pr)||dr.supportsContext("experimental-webgl",pr):dr.getContext("webgl",pr)||dr.getContext("experimental-webgl",pr)}function Nt(rr){var dr=_t(rr);if(!dr)return!1;var pr=dr.createShader(dr.VERTEX_SHADER);return!(!pr||dr.isContextLost())&&(dr.shaderSource(pr,"void main() {}"),dr.compileShader(pr),!0===dr.getShaderParameter(pr,dr.COMPILE_STATUS))}G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(fe,G,ce){var Z=t.window.document.createElement(fe);return void 0!==G&&(Z.className=G),ce&&ce.appendChild(Z),Z},createNS:function(fe,G){return t.window.document.createElementNS(fe,G)}},i=t.window.document&&t.window.document.documentElement.style;function u(fe){if(!i)return fe[0];for(var G=0;G<fe.length;G++)if(fe[G]in i)return fe[G];return fe[0]}var r,a=u(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){i&&a&&(r=i[a],i[a]="none")},n.enableDrag=function(){i&&a&&(i[a]=r)};var o=u(["transform","WebkitTransform"]);n.setTransform=function(fe,G){fe.style[o]=G};var v=!1;try{var p=Object.defineProperty({},"passive",{get:function(){v=!0}});t.window.addEventListener("test",p,p),t.window.removeEventListener("test",p,p)}catch{v=!1}n.addEventListener=function(fe,G,ce,Z){void 0===Z&&(Z={}),"passive"in Z&&v?fe.addEventListener(G,ce,Z):fe.addEventListener(G,ce,Z.capture)},n.removeEventListener=function(fe,G,ce,Z){void 0===Z&&(Z={}),"passive"in Z&&v?fe.removeEventListener(G,ce,Z):fe.removeEventListener(G,ce,Z.capture)};var f=function(fe){fe.preventDefault(),fe.stopPropagation(),t.window.removeEventListener("click",f,!0)};function l(fe,G,ce){var Z,ve,Ee,Ae=t.browser.devicePixelRatio>1?"@2x":"",Ge=t.getJSON(G.transformRequest(G.normalizeSpriteURL(fe,Ae,".json"),t.ResourceType.SpriteJSON),function(Wt,ar){Ge=null,Ee||(Ee=Wt,Z=ar,xt())}),ot=t.getImage(G.transformRequest(G.normalizeSpriteURL(fe,Ae,".png"),t.ResourceType.SpriteImage),function(Wt,ar){ot=null,Ee||(Ee=Wt,ve=ar,xt())});function xt(){if(Ee)ce(Ee);else if(Z&&ve){var Wt=t.browser.getImageData(ve),ar={};for(var Yt in Z){var Tt=Z[Yt],_t=Tt.width,Nt=Tt.height,rr=Tt.x,dr=Tt.y,pr=Tt.sdf,Lr=Tt.pixelRatio,Tr=Tt.stretchX,mr=Tt.stretchY,Er=Tt.content,fr=new t.RGBAImage({width:_t,height:Nt});t.RGBAImage.copy(Wt,fr,{x:rr,y:dr},{x:0,y:0},{width:_t,height:Nt}),ar[Yt]={data:fr,pixelRatio:Lr,sdf:pr,stretchX:Tr,stretchY:mr,content:Er}}ce(null,ar)}}return{cancel:function(){Ge&&(Ge.cancel(),Ge=null),ot&&(ot.cancel(),ot=null)}}}function y(fe){var G=fe.userImage;return!!(G&&G.render&&G.render())&&(fe.data.replace(new Uint8Array(G.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",f,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",f,!0)},0)},n.mousePos=function(fe,G){var ce=fe.getBoundingClientRect();return new t.Point(G.clientX-ce.left-fe.clientLeft,G.clientY-ce.top-fe.clientTop)},n.touchPos=function(fe,G){for(var ce=fe.getBoundingClientRect(),Z=[],ve=0;ve<G.length;ve++)Z.push(new t.Point(G[ve].clientX-ce.left-fe.clientLeft,G[ve].clientY-ce.top-fe.clientTop));return Z},n.mouseButton=function(fe){return typeof t.window.InstallTrigger<"u"&&2===fe.button&&fe.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:fe.button},n.remove=function(fe){fe.parentNode&&fe.parentNode.removeChild(fe)};var s=1,x=function(fe){function G(){fe.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(Z){if(this.loaded!==Z&&(this.loaded=Z,Z)){for(var ve=0,Ee=this.requestors;ve<Ee.length;ve+=1){var Ae=Ee[ve],Ge=Ae.ids,ot=Ae.callback;this._notify(Ge,ot)}this.requestors=[]}},G.prototype.getImage=function(Z){return this.images[Z]},G.prototype.addImage=function(Z,ve){this._validate(Z,ve)&&(this.images[Z]=ve)},G.prototype._validate=function(Z,ve){var Ee=!0;return this._validateStretch(ve.stretchX,ve.data&&ve.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+Z+'" has invalid "stretchX" value'))),Ee=!1),this._validateStretch(ve.stretchY,ve.data&&ve.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+Z+'" has invalid "stretchY" value'))),Ee=!1),this._validateContent(ve.content,ve)||(this.fire(new t.ErrorEvent(new Error('Image "'+Z+'" has invalid "content" value'))),Ee=!1),Ee},G.prototype._validateStretch=function(Z,ve){if(!Z)return!0;for(var Ee=0,Ae=0,Ge=Z;Ae<Ge.length;Ae+=1){var ot=Ge[Ae];if(ot[0]<Ee||ot[1]<ot[0]||ve<ot[1])return!1;Ee=ot[1]}return!0},G.prototype._validateContent=function(Z,ve){return!Z||!(4!==Z.length||Z[0]<0||ve.data.width<Z[0]||Z[1]<0||ve.data.height<Z[1]||Z[2]<0||ve.data.width<Z[2]||Z[3]<0||ve.data.height<Z[3]||Z[2]<Z[0]||Z[3]<Z[1])},G.prototype.updateImage=function(Z,ve){var Ee=this.images[Z];ve.version=Ee.version+1,this.images[Z]=ve,this.updatedImages[Z]=!0},G.prototype.removeImage=function(Z){var ve=this.images[Z];delete this.images[Z],delete this.patterns[Z],ve.userImage&&ve.userImage.onRemove&&ve.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(Z,ve){var Ee=!0;if(!this.isLoaded())for(var Ae=0,Ge=Z;Ae<Ge.length;Ae+=1){var ot=Ge[Ae];this.images[ot]||(Ee=!1)}this.isLoaded()||Ee?this._notify(Z,ve):this.requestors.push({ids:Z,callback:ve})},G.prototype._notify=function(Z,ve){for(var Ee={},Ae=0,Ge=Z;Ae<Ge.length;Ae+=1){var ot=Ge[Ae];this.images[ot]||this.fire(new t.Event("styleimagemissing",{id:ot}));var xt=this.images[ot];xt?Ee[ot]={data:xt.data.clone(),pixelRatio:xt.pixelRatio,sdf:xt.sdf,version:xt.version,stretchX:xt.stretchX,stretchY:xt.stretchY,content:xt.content,hasRenderCallback:Boolean(xt.userImage&&xt.userImage.render)}:t.warnOnce('Image "'+ot+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ve(null,Ee)},G.prototype.getPixelSize=function(){var Z=this.atlasImage;return{width:Z.width,height:Z.height}},G.prototype.getPattern=function(Z){var ve=this.patterns[Z],Ee=this.getImage(Z);if(!Ee)return null;if(ve&&ve.position.version===Ee.version)return ve.position;if(ve)ve.position.version=Ee.version;else{var ot={w:Ee.data.width+2*s,h:Ee.data.height+2*s,x:0,y:0},xt=new t.ImagePosition(ot,Ee);this.patterns[Z]={bin:ot,position:xt}}return this._updatePatternAtlas(),this.patterns[Z].position},G.prototype.bind=function(Z){var ve=Z.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(Z,this.atlasImage,ve.RGBA),this.atlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var Z=[];for(var ve in this.patterns)Z.push(this.patterns[ve].bin);var Ee=t.potpack(Z),Ae=Ee.w,Ge=Ee.h,ot=this.atlasImage;for(var xt in ot.resize({width:Ae||1,height:Ge||1}),this.patterns){var ar=this.patterns[xt].bin,Yt=ar.x+s,Tt=ar.y+s,_t=this.images[xt].data,Nt=_t.width,rr=_t.height;t.RGBAImage.copy(_t,ot,{x:0,y:0},{x:Yt,y:Tt},{width:Nt,height:rr}),t.RGBAImage.copy(_t,ot,{x:0,y:rr-1},{x:Yt,y:Tt-1},{width:Nt,height:1}),t.RGBAImage.copy(_t,ot,{x:0,y:0},{x:Yt,y:Tt+rr},{width:Nt,height:1}),t.RGBAImage.copy(_t,ot,{x:Nt-1,y:0},{x:Yt-1,y:Tt},{width:1,height:rr}),t.RGBAImage.copy(_t,ot,{x:0,y:0},{x:Yt+Nt,y:Tt},{width:1,height:rr})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(Z){for(var ve=0,Ee=Z;ve<Ee.length;ve+=1){var Ae=Ee[ve];if(!this.callbackDispatchedThisFrame[Ae]){this.callbackDispatchedThisFrame[Ae]=!0;var Ge=this.images[Ae];y(Ge)&&this.updateImage(Ae,Ge)}}},G}(t.Evented);function h(fe,G,ce,Z,ve){var Ee=256*G,Ae=Ee+255,Ge=Z.transformRequest(Z.normalizeGlyphsURL(ce).replace("{fontstack}",fe).replace("{range}",Ee+"-"+Ae),t.ResourceType.Glyphs);t.getArrayBuffer(Ge,function(ot,xt){if(ot)ve(ot);else if(xt){for(var Wt={},ar=0,Yt=t.parseGlyphPBF(xt);ar<Yt.length;ar+=1){var Tt=Yt[ar];Wt[Tt.id]=Tt}ve(null,Wt)}})}var g=A,m=A,d=1e20;function A(fe,G,ce,Z,ve,Ee){this.fontSize=fe||24,this.buffer=void 0===G?3:G,this.cutoff=Z||.25,this.fontFamily=ve||"sans-serif",this.fontWeight=Ee||"normal",this.radius=ce||8;var Ae=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ae,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ae*Ae),this.gridInner=new Float64Array(Ae*Ae),this.f=new Float64Array(Ae),this.d=new Float64Array(Ae),this.z=new Float64Array(Ae+1),this.v=new Int16Array(Ae),this.middle=Math.round(Ae/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function b(fe,G,ce,Z,ve,Ee,Ae){for(var Ge=0;Ge<G;Ge++){for(var ot=0;ot<ce;ot++)Z[ot]=fe[ot*G+Ge];for(c(Z,ve,Ee,Ae,ce),ot=0;ot<ce;ot++)fe[ot*G+Ge]=ve[ot]}for(ot=0;ot<ce;ot++){for(Ge=0;Ge<G;Ge++)Z[Ge]=fe[ot*G+Ge];for(c(Z,ve,Ee,Ae,G),Ge=0;Ge<G;Ge++)fe[ot*G+Ge]=Math.sqrt(ve[Ge])}}function c(fe,G,ce,Z,ve){ce[0]=0,Z[0]=-d,Z[1]=+d;for(var Ee=1,Ae=0;Ee<ve;Ee++){for(var Ge=(fe[Ee]+Ee*Ee-(fe[ce[Ae]]+ce[Ae]*ce[Ae]))/(2*Ee-2*ce[Ae]);Ge<=Z[Ae];)Ae--,Ge=(fe[Ee]+Ee*Ee-(fe[ce[Ae]]+ce[Ae]*ce[Ae]))/(2*Ee-2*ce[Ae]);ce[++Ae]=Ee,Z[Ae]=Ge,Z[Ae+1]=+d}for(Ee=0,Ae=0;Ee<ve;Ee++){for(;Z[Ae+1]<Ee;)Ae++;G[Ee]=(Ee-ce[Ae])*(Ee-ce[Ae])+fe[ce[Ae]]}}A.prototype.draw=function(fe){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(fe,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),ce=new Uint8ClampedArray(this.size*this.size),Z=0;Z<this.size*this.size;Z++){var ve=G.data[4*Z+3]/255;this.gridOuter[Z]=1===ve?0:0===ve?d:Math.pow(Math.max(0,.5-ve),2),this.gridInner[Z]=1===ve?d:0===ve?0:Math.pow(Math.max(0,ve-.5),2)}for(b(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),b(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Z=0;Z<this.size*this.size;Z++){var Ee=this.gridOuter[Z]-this.gridInner[Z];ce[Z]=Math.max(0,Math.min(255,Math.round(255-255*(Ee/this.radius+this.cutoff))))}return ce},g.default=m;var S=function(G,ce){this.requestManager=G,this.localIdeographFontFamily=ce,this.entries={}};S.prototype.setURL=function(G){this.url=G},S.prototype.getGlyphs=function(G,ce){var Z=this,ve=[];for(var Ee in G)for(var Ae=0,Ge=G[Ee];Ae<Ge.length;Ae+=1){var ot=Ge[Ae];ve.push({stack:Ee,id:ot})}t.asyncAll(ve,function(xt,Wt){var ar=xt.stack,Yt=xt.id,Tt=Z.entries[ar];Tt||(Tt=Z.entries[ar]={glyphs:{},requests:{},ranges:{}});var _t=Tt.glyphs[Yt];if(void 0===_t){if(_t=Z._tinySDF(Tt,ar,Yt))return Tt.glyphs[Yt]=_t,void Wt(null,{stack:ar,id:Yt,glyph:_t});var Nt=Math.floor(Yt/256);if(256*Nt>65535)Wt(new Error("glyphs > 65535 not supported"));else if(Tt.ranges[Nt])Wt(null,{stack:ar,id:Yt,glyph:_t});else{var rr=Tt.requests[Nt];rr||(rr=Tt.requests[Nt]=[],S.loadGlyphRange(ar,Nt,Z.url,Z.requestManager,function(dr,pr){if(pr){for(var Lr in pr)Z._doesCharSupportLocalGlyph(+Lr)||(Tt.glyphs[+Lr]=pr[+Lr]);Tt.ranges[Nt]=!0}for(var Tr=0,mr=rr;Tr<mr.length;Tr+=1)(0,mr[Tr])(dr,pr);delete Tt.requests[Nt]})),rr.push(function(dr,pr){dr?Wt(dr):pr&&Wt(null,{stack:ar,id:Yt,glyph:pr[Yt]||null})})}}else Wt(null,{stack:ar,id:Yt,glyph:_t})},function(xt,Wt){if(xt)ce(xt);else if(Wt){for(var ar={},Yt=0,Tt=Wt;Yt<Tt.length;Yt+=1){var _t=Tt[Yt],Nt=_t.stack,rr=_t.id,dr=_t.glyph;(ar[Nt]||(ar[Nt]={}))[rr]=dr&&{id:dr.id,bitmap:dr.bitmap.clone(),metrics:dr.metrics}}ce(null,ar)}})},S.prototype._doesCharSupportLocalGlyph=function(G){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](G)||t.isChar["Hangul Syllables"](G)||t.isChar.Hiragana(G)||t.isChar.Katakana(G))},S.prototype._tinySDF=function(G,ce,Z){var ve=this.localIdeographFontFamily;if(ve&&this._doesCharSupportLocalGlyph(Z)){var Ee=G.tinySDF;if(!Ee){var Ae="400";/bold/i.test(ce)?Ae="900":/medium/i.test(ce)?Ae="500":/light/i.test(ce)&&(Ae="200"),Ee=G.tinySDF=new S.TinySDF(24,3,8,.25,ve,Ae)}return{id:Z,bitmap:new t.AlphaImage({width:30,height:30},Ee.draw(String.fromCharCode(Z))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=h,S.TinySDF=g;var w=function(){this.specification=t.styleSpec.light.position};w.prototype.possiblyEvaluate=function(G,ce){return t.sphericalToCartesian(G.expression.evaluate(ce))},w.prototype.interpolate=function(G,ce,Z){return{x:t.number(G.x,ce.x,Z),y:t.number(G.y,ce.y,Z),z:t.number(G.z,ce.z,Z)}};var E=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new w,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),P="-transition",R=function(fe){function G(ce){fe.call(this),this._transitionable=new t.Transitionable(E),this.setLight(ce),this._transitioning=this._transitionable.untransitioned()}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(Z,ve){if(void 0===ve&&(ve={}),!this._validate(t.validateLight,Z,ve))for(var Ee in Z){var Ae=Z[Ee];t.endsWith(Ee,P)?this._transitionable.setTransition(Ee.slice(0,-P.length),Ae):this._transitionable.setValue(Ee,Ae)}},G.prototype.updateTransitions=function(Z){this._transitioning=this._transitionable.transitioned(Z,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(Z){this.properties=this._transitioning.possiblyEvaluate(Z)},G.prototype._validate=function(Z,ve,Ee){return(!Ee||!1!==Ee.validate)&&t.emitValidationErrors(this,Z.call(t.validateStyle,t.extend({value:ve,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},G}(t.Evented),F=function(G,ce){this.width=G,this.height=ce,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};F.prototype.getDash=function(G,ce){var Z=G.join(",")+String(ce);return this.dashEntry[Z]||(this.dashEntry[Z]=this.addDash(G,ce)),this.dashEntry[Z]},F.prototype.getDashRanges=function(G,ce,Z){var Ee=[],Ae=G.length%2==1?-G[G.length-1]*Z:0,Ge=G[0]*Z,ot=!0;Ee.push({left:Ae,right:Ge,isDash:ot,zeroLength:0===G[0]});for(var xt=G[0],Wt=1;Wt<G.length;Wt++){ot=!ot;var ar=G[Wt];Ae=xt*Z,Ge=(xt+=ar)*Z,Ee.push({left:Ae,right:Ge,isDash:ot,zeroLength:0===ar})}return Ee},F.prototype.addRoundDash=function(G,ce,Z){for(var ve=ce/2,Ee=-Z;Ee<=Z;Ee++)for(var Ae=this.nextRow+Z+Ee,Ge=this.width*Ae,ot=0,xt=G[ot],Wt=0;Wt<this.width;Wt++){Wt/xt.right>1&&(xt=G[++ot]);var ar=Math.abs(Wt-xt.left),Yt=Math.abs(Wt-xt.right),Tt=Math.min(ar,Yt),_t=void 0,Nt=Ee/Z*(ve+1);if(xt.isDash){var rr=ve-Math.abs(Nt);_t=Math.sqrt(Tt*Tt+rr*rr)}else _t=ve-Math.sqrt(Tt*Tt+Nt*Nt);this.data[Ge+Wt]=Math.max(0,Math.min(255,_t+128))}},F.prototype.addRegularDash=function(G){for(var ce=G.length-1;ce>=0;--ce){var Z=G[ce],ve=G[ce+1];Z.zeroLength?G.splice(ce,1):ve&&ve.isDash===Z.isDash&&(ve.left=Z.left,G.splice(ce,1))}var Ee=G[0],Ae=G[G.length-1];Ee.isDash===Ae.isDash&&(Ee.left=Ae.left-this.width,Ae.right=Ee.right+this.width);for(var Ge=this.width*this.nextRow,ot=0,xt=G[ot],Wt=0;Wt<this.width;Wt++){Wt/xt.right>1&&(xt=G[++ot]);var ar=Math.abs(Wt-xt.left),Yt=Math.abs(Wt-xt.right),Tt=Math.min(ar,Yt),_t=xt.isDash?Tt:-Tt;this.data[Ge+Wt]=Math.max(0,Math.min(255,_t+128))}},F.prototype.addDash=function(G,ce){var Z=ce?7:0,ve=2*Z+1;if(this.nextRow+ve>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Ee=0,Ae=0;Ae<G.length;Ae++)Ee+=G[Ae];if(0!==Ee){var Ge=this.width/Ee,ot=this.getDashRanges(G,this.width,Ge);ce?this.addRoundDash(ot,Ge,Z):this.addRegularDash(ot)}var xt={y:(this.nextRow+Z+.5)/this.height,height:2*Z/this.height,width:Ee};return this.nextRow+=ve,this.dirty=!0,xt},F.prototype.bind=function(G){var ce=G.gl;this.texture?(ce.bindTexture(ce.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ce.texSubImage2D(ce.TEXTURE_2D,0,0,0,this.width,this.height,ce.ALPHA,ce.UNSIGNED_BYTE,this.data))):(this.texture=ce.createTexture(),ce.bindTexture(ce.TEXTURE_2D,this.texture),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.REPEAT),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.REPEAT),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),ce.texImage2D(ce.TEXTURE_2D,0,ce.ALPHA,this.width,this.height,0,ce.ALPHA,ce.UNSIGNED_BYTE,this.data))};var _=function fe(G,ce){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var Z=this.workerPool.acquire(this.id),ve=0;ve<Z.length;ve++){var Ee=Z[ve],Ae=new fe.Actor(Ee,ce,this.id);Ae.name="Worker "+ve,this.actors.push(Ae)}};function z(fe,G,ce){var Z=function(ve,Ee){if(ve)return ce(ve);if(Ee){var Ae=t.pick(t.extend(Ee,fe),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ee.vector_layers&&(Ae.vectorLayers=Ee.vector_layers,Ae.vectorLayerIds=Ae.vectorLayers.map(function(Ge){return Ge.id})),Ae.tiles=G.canonicalizeTileset(Ae,fe.url),ce(null,Ae)}};return fe.url?t.getJSON(G.transformRequest(G.normalizeSourceURL(fe.url),t.ResourceType.Source),Z):t.browser.frame(function(){return Z(null,fe)})}_.prototype.broadcast=function(G,ce,Z){Z=Z||function(){},t.asyncAll(this.actors,function(ve,Ee){ve.send(G,ce,Ee)},Z)},_.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},_.prototype.remove=function(){this.actors.forEach(function(G){G.remove()}),this.actors=[],this.workerPool.release(this.id)},_.Actor=t.Actor;var D=function(G,ce,Z){this.bounds=t.LngLatBounds.convert(this.validateBounds(G)),this.minzoom=ce||0,this.maxzoom=Z||24};D.prototype.validateBounds=function(G){return Array.isArray(G)&&4===G.length?[Math.max(-180,G[0]),Math.max(-90,G[1]),Math.min(180,G[2]),Math.min(90,G[3])]:[-180,-90,180,90]},D.prototype.contains=function(G){var ce=Math.pow(2,G.z),Z={minX:Math.floor(t.mercatorXfromLng(this.bounds.getWest())*ce),minY:Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*ce),maxX:Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*ce),maxY:Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*ce)};return G.x>=Z.minX&&G.x<Z.maxX&&G.y>=Z.minY&&G.y<Z.maxY};var k=function(fe){function G(ce,Z,ve,Ee){if(fe.call(this),this.id=ce,this.dispatcher=ve,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(Z,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},Z),this._collectResourceTiming=Z.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ee)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Z=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,function(ve,Ee){Z._tileJSONRequest=null,Z._loaded=!0,ve?Z.fire(new t.ErrorEvent(ve)):Ee&&(t.extend(Z,Ee),Ee.bounds&&(Z.tileBounds=new D(Ee.bounds,Z.minzoom,Z.maxzoom)),t.postTurnstileEvent(Ee.tiles,Z.map._requestManager._customAccessToken),t.postMapLoadEvent(Ee.tiles,Z.map._getMapId(),Z.map._requestManager._skuToken,Z.map._requestManager._customAccessToken),Z.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Z.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(Z){return!this.tileBounds||this.tileBounds.contains(Z.canonical)},G.prototype.onAdd=function(Z){this.map=Z,this.load()},G.prototype.setSourceProperty=function(Z){this._tileJSONRequest&&this._tileJSONRequest.cancel(),Z(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},G.prototype.setTiles=function(Z){var ve=this;return this.setSourceProperty(function(){ve._options.tiles=Z}),this},G.prototype.setUrl=function(Z){var ve=this;return this.setSourceProperty(function(){ve.url=Z,ve._options.url=Z}),this},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return t.extend({},this._options)},G.prototype.loadTile=function(Z,ve){var Ee=this.map._requestManager.normalizeTileURL(Z.tileID.canonical.url(this.tiles,this.scheme)),Ae={request:this.map._requestManager.transformRequest(Ee,t.ResourceType.Tile),uid:Z.uid,tileID:Z.tileID,zoom:Z.tileID.overscaledZ,tileSize:this.tileSize*Z.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Ge(ot,xt){return delete Z.request,Z.aborted?ve(null):ot&&404!==ot.status?ve(ot):(xt&&xt.resourceTiming&&(Z.resourceTiming=xt.resourceTiming),this.map._refreshExpiredTiles&&xt&&Z.setExpiryData(xt),Z.loadVectorData(xt,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),ve(null),void(Z.reloadCallback&&(this.loadTile(Z,Z.reloadCallback),Z.reloadCallback=null)))}Ae.request.collectResourceTiming=this._collectResourceTiming,Z.actor&&"expired"!==Z.state?"loading"===Z.state?Z.reloadCallback=ve:Z.request=Z.actor.send("reloadTile",Ae,Ge.bind(this)):(Z.actor=this.dispatcher.getActor(),Z.request=Z.actor.send("loadTile",Ae,Ge.bind(this)))},G.prototype.abortTile=function(Z){Z.request&&(Z.request.cancel(),delete Z.request),Z.actor&&Z.actor.send("abortTile",{uid:Z.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(Z){Z.unloadVectorData(),Z.actor&&Z.actor.send("removeTile",{uid:Z.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(t.Evented),O=function(fe){function G(ce,Z,ve,Ee){fe.call(this),this.id=ce,this.dispatcher=ve,this.setEventedParent(Ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},Z),t.extend(this,t.pick(Z,["url","scheme","tileSize"]))}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Z=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,function(ve,Ee){Z._tileJSONRequest=null,Z._loaded=!0,ve?Z.fire(new t.ErrorEvent(ve)):Ee&&(t.extend(Z,Ee),Ee.bounds&&(Z.tileBounds=new D(Ee.bounds,Z.minzoom,Z.maxzoom)),t.postTurnstileEvent(Ee.tiles),t.postMapLoadEvent(Ee.tiles,Z.map._getMapId(),Z.map._requestManager._skuToken),Z.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Z.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(Z){this.map=Z,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return t.extend({},this._options)},G.prototype.hasTile=function(Z){return!this.tileBounds||this.tileBounds.contains(Z.canonical)},G.prototype.loadTile=function(Z,ve){var Ee=this,Ae=this.map._requestManager.normalizeTileURL(Z.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Z.request=t.getImage(this.map._requestManager.transformRequest(Ae,t.ResourceType.Tile),function(Ge,ot){if(delete Z.request,Z.aborted)Z.state="unloaded",ve(null);else if(Ge)Z.state="errored",ve(Ge);else if(ot){Ee.map._refreshExpiredTiles&&Z.setExpiryData(ot),delete ot.cacheControl,delete ot.expires;var xt=Ee.map.painter.context,Wt=xt.gl;Z.texture=Ee.map.painter.getTileTexture(ot.width),Z.texture?Z.texture.update(ot,{useMipmap:!0}):(Z.texture=new t.Texture(xt,ot,Wt.RGBA,{useMipmap:!0}),Z.texture.bind(Wt.LINEAR,Wt.CLAMP_TO_EDGE,Wt.LINEAR_MIPMAP_NEAREST),xt.extTextureFilterAnisotropic&&Wt.texParameterf(Wt.TEXTURE_2D,xt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,xt.extTextureFilterAnisotropicMax)),Z.state="loaded",t.cacheEntryPossiblyAdded(Ee.dispatcher),ve(null)}})},G.prototype.abortTile=function(Z,ve){Z.request&&(Z.request.cancel(),delete Z.request),ve()},G.prototype.unloadTile=function(Z,ve){Z.texture&&this.map.painter.saveTileTexture(Z.texture),ve()},G.prototype.hasTransition=function(){return!1},G}(t.Evented),U=function(fe){function G(ce,Z,ve,Ee){fe.call(this,ce,Z,ve,Ee),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},Z),this.encoding=Z.encoding||"mapbox"}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(Z,ve){var Ee=this.map._requestManager.normalizeTileURL(Z.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Ae(ot,xt){if(delete Z.request,Z.aborted)Z.state="unloaded",ve(null);else if(ot)Z.state="errored",ve(ot);else if(xt){this.map._refreshExpiredTiles&&Z.setExpiryData(xt),delete xt.cacheControl,delete xt.expires;var ar=t.window.ImageBitmap&&xt instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?xt:t.browser.getImageData(xt,1),Yt={uid:Z.uid,coord:Z.tileID,source:this.id,rawImageData:ar,encoding:this.encoding};(!Z.actor||"expired"===Z.state)&&(Z.actor=this.dispatcher.getActor(),Z.actor.send("loadDEMTile",Yt,Ge.bind(this)))}}function Ge(ot,xt){ot&&(Z.state="errored",ve(ot)),xt&&(Z.dem=xt,Z.needsHillshadePrepare=!0,Z.state="loaded",ve(null))}Z.request=t.getImage(this.map._requestManager.transformRequest(Ee,t.ResourceType.Tile),Ae.bind(this)),Z.neighboringTiles=this._getNeighboringTiles(Z.tileID)},G.prototype._getNeighboringTiles=function(Z){var ve=Z.canonical,Ee=Math.pow(2,ve.z),Ae=(ve.x-1+Ee)%Ee,Ge=0===ve.x?Z.wrap-1:Z.wrap,ot=(ve.x+1+Ee)%Ee,xt=ve.x+1===Ee?Z.wrap+1:Z.wrap,Wt={};return Wt[new t.OverscaledTileID(Z.overscaledZ,Ge,ve.z,Ae,ve.y).key]={backfilled:!1},Wt[new t.OverscaledTileID(Z.overscaledZ,xt,ve.z,ot,ve.y).key]={backfilled:!1},ve.y>0&&(Wt[new t.OverscaledTileID(Z.overscaledZ,Ge,ve.z,Ae,ve.y-1).key]={backfilled:!1},Wt[new t.OverscaledTileID(Z.overscaledZ,Z.wrap,ve.z,ve.x,ve.y-1).key]={backfilled:!1},Wt[new t.OverscaledTileID(Z.overscaledZ,xt,ve.z,ot,ve.y-1).key]={backfilled:!1}),ve.y+1<Ee&&(Wt[new t.OverscaledTileID(Z.overscaledZ,Ge,ve.z,Ae,ve.y+1).key]={backfilled:!1},Wt[new t.OverscaledTileID(Z.overscaledZ,Z.wrap,ve.z,ve.x,ve.y+1).key]={backfilled:!1},Wt[new t.OverscaledTileID(Z.overscaledZ,xt,ve.z,ot,ve.y+1).key]={backfilled:!1}),Wt},G.prototype.unloadTile=function(Z){Z.demTexture&&this.map.painter.saveTileTexture(Z.demTexture),Z.fbo&&(Z.fbo.destroy(),delete Z.fbo),Z.dem&&delete Z.dem,delete Z.neighboringTiles,Z.state="unloaded",Z.actor&&Z.actor.send("removeDEMTile",{uid:Z.uid,source:this.id})},G}(O),H=function(fe){function G(ce,Z,ve,Ee){fe.call(this),this.id=ce,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ve.getActor(),this.setEventedParent(Ee),this._data=Z.data,this._options=t.extend({},Z),this._collectResourceTiming=Z.collectResourceTiming,this._resourceTiming=[],void 0!==Z.maxzoom&&(this.maxzoom=Z.maxzoom),Z.type&&(this.type=Z.type),Z.attribution&&(this.attribution=Z.attribution),this.promoteId=Z.promoteId;var Ae=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:Z.cluster||!1,geojsonVtOptions:{buffer:(void 0!==Z.buffer?Z.buffer:128)*Ae,tolerance:(void 0!==Z.tolerance?Z.tolerance:.375)*Ae,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:Z.lineMetrics||!1,generateId:Z.generateId||!1},superclusterOptions:{maxZoom:void 0!==Z.clusterMaxZoom?Math.min(Z.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,Z.clusterMinPoints||2),extent:t.EXTENT,radius:(Z.clusterRadius||50)*Ae,log:!1,generateId:Z.generateId||!1},clusterProperties:Z.clusterProperties,filter:Z.filter},Z.workerOptions)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Z=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ve){if(ve)Z.fire(new t.ErrorEvent(ve));else{var Ee={dataType:"source",sourceDataType:"metadata"};Z._collectResourceTiming&&Z._resourceTiming&&Z._resourceTiming.length>0&&(Ee.resourceTiming=Z._resourceTiming,Z._resourceTiming=[]),Z.fire(new t.Event("data",Ee))}})},G.prototype.onAdd=function(Z){this.map=Z,this.load()},G.prototype.setData=function(Z){var ve=this;return this._data=Z,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ee){if(Ee)ve.fire(new t.ErrorEvent(Ee));else{var Ae={dataType:"source",sourceDataType:"content"};ve._collectResourceTiming&&ve._resourceTiming&&ve._resourceTiming.length>0&&(Ae.resourceTiming=ve._resourceTiming,ve._resourceTiming=[]),ve.fire(new t.Event("data",Ae))}}),this},G.prototype.getClusterExpansionZoom=function(Z,ve){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:Z,source:this.id},ve),this},G.prototype.getClusterChildren=function(Z,ve){return this.actor.send("geojson.getClusterChildren",{clusterId:Z,source:this.id},ve),this},G.prototype.getClusterLeaves=function(Z,ve,Ee,Ae){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Z,limit:ve,offset:Ee},Ae),this},G.prototype._updateWorkerData=function(Z){var ve=this;this._loaded=!1;var Ee=t.extend({},this.workerOptions),Ae=this._data;"string"==typeof Ae?(Ee.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Ae),t.ResourceType.Source),Ee.request.collectResourceTiming=this._collectResourceTiming):Ee.data=JSON.stringify(Ae),this.actor.send(this.type+".loadData",Ee,function(Ge,ot){ve._removed||ot&&ot.abandoned||(ve._loaded=!0,ot&&ot.resourceTiming&&ot.resourceTiming[ve.id]&&(ve._resourceTiming=ot.resourceTiming[ve.id].slice(0)),ve.actor.send(ve.type+".coalesce",{source:Ee.source},null),Z(Ge))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(Z,ve){var Ee=this,Ae=Z.actor?"reloadTile":"loadTile";Z.actor=this.actor;var Ge={type:this.type,uid:Z.uid,tileID:Z.tileID,zoom:Z.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Z.request=this.actor.send(Ae,Ge,function(ot,xt){return delete Z.request,Z.unloadVectorData(),Z.aborted?ve(null):ot?ve(ot):(Z.loadVectorData(xt,Ee.map.painter,"reloadTile"===Ae),ve(null))})},G.prototype.abortTile=function(Z){Z.request&&(Z.request.cancel(),delete Z.request),Z.aborted=!0},G.prototype.unloadTile=function(Z){Z.unloadVectorData(),this.actor.send("removeTile",{uid:Z.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(t.Evented),j=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ee=function(fe){function G(ce,Z,ve,Ee){fe.call(this),this.id=ce,this.dispatcher=ve,this.coordinates=Z.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ee),this.options=Z}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.load=function(Z,ve){var Ee=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Ae,Ge){Ee._loaded=!0,Ae?Ee.fire(new t.ErrorEvent(Ae)):Ge&&(Ee.image=Ge,Z&&(Ee.coordinates=Z),ve&&ve(),Ee._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(Z){var ve=this;return this.image&&Z.url?(this.options.url=Z.url,this.load(Z.coordinates,function(){ve.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(Z){this.map=Z,this.load()},G.prototype.setCoordinates=function(Z){var ve=this;this.coordinates=Z;var Ee=Z.map(t.MercatorCoordinate.fromLngLat);this.tileID=W(Ee),this.minzoom=this.maxzoom=this.tileID.z;var Ae=Ee.map(function(Ge){return ve.tileID.getTilePoint(Ge)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ae[0].x,Ae[0].y,0,0),this._boundsArray.emplaceBack(Ae[1].x,Ae[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Ae[3].x,Ae[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Ae[2].x,Ae[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var Z=this.map.painter.context,ve=Z.gl;for(var Ee in this.boundsBuffer||(this.boundsBuffer=Z.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(Z,this.image,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Ae=this.tiles[Ee];"loaded"!==Ae.state&&(Ae.state="loaded",Ae.texture=this.texture)}}},G.prototype.loadTile=function(Z,ve){this.tileID&&this.tileID.equals(Z.tileID.canonical)?(this.tiles[String(Z.tileID.wrap)]=Z,Z.buckets={},ve(null)):(Z.state="errored",ve(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(t.Evented);function W(fe){for(var G=1/0,ce=1/0,Z=-1/0,ve=-1/0,Ee=0,Ae=fe;Ee<Ae.length;Ee+=1){var Ge=Ae[Ee];G=Math.min(G,Ge.x),ce=Math.min(ce,Ge.y),Z=Math.max(Z,Ge.x),ve=Math.max(ve,Ge.y)}var ot=Z-G,xt=ve-ce,Wt=Math.max(ot,xt),ar=Math.max(0,Math.floor(-Math.log(Wt)/Math.LN2)),Yt=Math.pow(2,ar);return new t.CanonicalTileID(ar,Math.floor((G+Z)/2*Yt),Math.floor((ce+ve)/2*Yt))}var B=function(fe){function G(ce,Z,ve,Ee){fe.call(this,ce,Z,ve,Ee),this.roundZoom=!0,this.type="video",this.options=Z}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.load=function(){var Z=this;this._loaded=!1;var ve=this.options;this.urls=[];for(var Ee=0,Ae=ve.urls;Ee<Ae.length;Ee+=1){var Ge=Ae[Ee];this.urls.push(this.map._requestManager.transformRequest(Ge,t.ResourceType.Source).url)}t.getVideo(this.urls,function(ot,xt){Z._loaded=!0,ot?Z.fire(new t.ErrorEvent(ot)):xt&&(Z.video=xt,Z.video.loop=!0,Z.video.addEventListener("playing",function(){Z.map.triggerRepaint()}),Z.map&&Z.video.play(),Z._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(Z){if(this.video){var ve=this.video.seekable;Z<ve.start(0)||Z>ve.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ve.start(0)+" and "+ve.end(0)+"-second mark."))):this.video.currentTime=Z}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(Z){this.map||(this.map=Z,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var Z=this.map.painter.context,ve=Z.gl;for(var Ee in this.boundsBuffer||(this.boundsBuffer=Z.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,ve.RGBA,ve.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(Z,this.video,ve.RGBA),this.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)),this.tiles){var Ae=this.tiles[Ee];"loaded"!==Ae.state&&(Ae.state="loaded",Ae.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(ee),te=function(fe){function G(ce,Z,ve,Ee){fe.call(this,ce,Z,ve,Ee),Z.coordinates?(!Array.isArray(Z.coordinates)||4!==Z.coordinates.length||Z.coordinates.some(function(Ae){return!Array.isArray(Ae)||2!==Ae.length||Ae.some(function(Ge){return"number"!=typeof Ge})}))&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ce,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ce,null,'missing required property "coordinates"'))),Z.animate&&"boolean"!=typeof Z.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ce,null,'optional "animate" property must be a boolean value'))),Z.canvas?"string"!=typeof Z.canvas&&!(Z.canvas instanceof t.window.HTMLCanvasElement)&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ce,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+ce,null,'missing required property "canvas"'))),this.options=Z,this.animate=void 0===Z.animate||Z.animate}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(Z){this.map=Z,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var Z=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Z=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Z=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ve=this.map.painter.context,Ee=ve.gl;for(var Ae in this.boundsBuffer||(this.boundsBuffer=ve.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Z||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(ve,this.canvas,Ee.RGBA,{premultiply:!0}),this.tiles){var Ge=this.tiles[Ae];"loaded"!==Ge.state&&(Ge.state="loaded",Ge.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var Z=0,ve=[this.canvas.width,this.canvas.height];Z<ve.length;Z+=1){var Ee=ve[Z];if(isNaN(Ee)||Ee<=0)return!0}return!1},G}(ee),q={vector:k,raster:O,"raster-dem":U,geojson:H,video:B,image:ee,canvas:te},oe=function(fe,G,ce,Z){var ve=new q[G.type](fe,G,ce,Z);if(ve.id!==fe)throw new Error("Expected Source id to be "+fe+" instead of "+ve.id);return t.bindAll(["load","abort","unload","serialize","prepare"],ve),ve},ie=function(fe){return q[fe]},V=function(fe,G){q[fe]=G};function Y(fe,G){var ce=t.identity([]);return t.translate(ce,ce,[1,1,0]),t.scale(ce,ce,[.5*fe.width,.5*fe.height,1]),t.multiply(ce,ce,fe.calculatePosMatrix(G.toUnwrapped()))}function ae(fe,G,ce){if(fe)for(var Z=0,ve=fe;Z<ve.length;Z+=1){var Ae=G[ve[Z]];if(Ae&&Ae.source===ce&&"fill-extrusion"===Ae.type)return!0}else for(var Ge in G){var ot=G[Ge];if(ot.source===ce&&"fill-extrusion"===ot.type)return!0}return!1}function X(fe,G,ce,Z,ve,Ee){var Ae=ae(ve&&ve.layers,G,fe.id),Ge=Ee.maxPitchScaleFactor(),ot=fe.tilesIn(Z,Ge,Ae);ot.sort(re);for(var xt=[],Wt=0,ar=ot;Wt<ar.length;Wt+=1){var Yt=ar[Wt];xt.push({wrappedTileID:Yt.tileID.wrapped().key,queryResults:Yt.tile.queryRenderedFeatures(G,ce,fe._state,Yt.queryGeometry,Yt.cameraQueryGeometry,Yt.scale,ve,Ee,Ge,Y(fe.transform,Yt.tileID))})}var Tt=ne(xt);for(var _t in Tt)Tt[_t].forEach(function(Nt){var rr=Nt.feature,dr=fe.getFeatureState(rr.layer["source-layer"],rr.id);rr.source=rr.layer.source,rr.layer["source-layer"]&&(rr.sourceLayer=rr.layer["source-layer"]),rr.state=dr});return Tt}function J(fe,G,ce,Z,ve,Ee,Ae){for(var Ge={},ot=Ee.queryRenderedSymbols(Z),xt=[],Wt=0,ar=Object.keys(ot).map(Number);Wt<ar.length;Wt+=1){var Yt=ar[Wt];xt.push(Ae[Yt])}xt.sort(re);for(var Tt=function(){var pr=Nt[_t],Lr=pr.featureIndex.lookupSymbolFeatures(ot[pr.bucketInstanceId],G,pr.bucketIndex,pr.sourceLayerIndex,ve.filter,ve.layers,ve.availableImages,fe);for(var Tr in Lr){var mr=Ge[Tr]=Ge[Tr]||[],Er=Lr[Tr];Er.sort(function(ln,zn){var En=pr.featureSortOrder;if(En){var Nn=En.indexOf(ln.featureIndex);return En.indexOf(zn.featureIndex)-Nn}return zn.featureIndex-ln.featureIndex});for(var fr=0,Br=Er;fr<Br.length;fr+=1){var $r=Br[fr];mr.push($r)}}},_t=0,Nt=xt;_t<Nt.length;_t+=1)Tt();var rr=function(pr){Ge[pr].forEach(function(Lr){var Tr=Lr.feature,mr=fe[pr],fr=ce[mr.source].getFeatureState(Tr.layer["source-layer"],Tr.id);Tr.source=Tr.layer.source,Tr.layer["source-layer"]&&(Tr.sourceLayer=Tr.layer["source-layer"]),Tr.state=fr})};for(var dr in Ge)rr(dr);return Ge}function ue(fe,G){for(var ce=fe.getRenderableIds().map(function(ot){return fe.getTileByID(ot)}),Z=[],ve={},Ee=0;Ee<ce.length;Ee++){var Ae=ce[Ee],Ge=Ae.tileID.canonical.key;ve[Ge]||(ve[Ge]=!0,Ae.querySourceFeatures(Z,G))}return Z}function re(fe,G){var ce=fe.tileID,Z=G.tileID;return ce.overscaledZ-Z.overscaledZ||ce.canonical.y-Z.canonical.y||ce.wrap-Z.wrap||ce.canonical.x-Z.canonical.x}function ne(fe){for(var G={},ce={},Z=0,ve=fe;Z<ve.length;Z+=1){var Ee=ve[Z],Ae=Ee.queryResults,Ge=Ee.wrappedTileID,ot=ce[Ge]=ce[Ge]||{};for(var xt in Ae)for(var Wt=Ae[xt],ar=ot[xt]=ot[xt]||{},Yt=G[xt]=G[xt]||[],Tt=0,_t=Wt;Tt<_t.length;Tt+=1){var Nt=_t[Tt];ar[Nt.featureIndex]||(ar[Nt.featureIndex]=!0,Yt.push(Nt))}}return G}var se=function(G,ce){this.max=G,this.onRemove=ce,this.reset()};se.prototype.reset=function(){for(var G in this.data)for(var ce=0,Z=this.data[G];ce<Z.length;ce+=1){var ve=Z[ce];ve.timeout&&clearTimeout(ve.timeout),this.onRemove(ve.value)}return this.data={},this.order=[],this},se.prototype.add=function(G,ce,Z){var ve=this,Ee=G.wrapped().key;void 0===this.data[Ee]&&(this.data[Ee]=[]);var Ae={value:ce,timeout:void 0};if(void 0!==Z&&(Ae.timeout=setTimeout(function(){ve.remove(G,Ae)},Z)),this.data[Ee].push(Ae),this.order.push(Ee),this.order.length>this.max){var Ge=this._getAndRemoveByKey(this.order[0]);Ge&&this.onRemove(Ge)}return this},se.prototype.has=function(G){return G.wrapped().key in this.data},se.prototype.getAndRemove=function(G){return this.has(G)?this._getAndRemoveByKey(G.wrapped().key):null},se.prototype._getAndRemoveByKey=function(G){var ce=this.data[G].shift();return ce.timeout&&clearTimeout(ce.timeout),0===this.data[G].length&&delete this.data[G],this.order.splice(this.order.indexOf(G),1),ce.value},se.prototype.getByKey=function(G){var ce=this.data[G];return ce?ce[0].value:null},se.prototype.get=function(G){return this.has(G)?this.data[G.wrapped().key][0].value:null},se.prototype.remove=function(G,ce){if(!this.has(G))return this;var Z=G.wrapped().key,ve=void 0===ce?0:this.data[Z].indexOf(ce),Ee=this.data[Z][ve];return this.data[Z].splice(ve,1),Ee.timeout&&clearTimeout(Ee.timeout),0===this.data[Z].length&&delete this.data[Z],this.onRemove(Ee.value),this.order.splice(this.order.indexOf(Z),1),this},se.prototype.setMaxSize=function(G){for(this.max=G;this.order.length>this.max;){var ce=this._getAndRemoveByKey(this.order[0]);ce&&this.onRemove(ce)}return this},se.prototype.filter=function(G){var ce=[];for(var Z in this.data)for(var ve=0,Ee=this.data[Z];ve<Ee.length;ve+=1){var Ae=Ee[ve];G(Ae.value)||ce.push(Ae)}for(var Ge=0,ot=ce;Ge<ot.length;Ge+=1){var xt=ot[Ge];this.remove(xt.value.tileID,xt)}};var de=function(G,ce,Z){this.context=G;var ve=G.gl;this.buffer=ve.createBuffer(),this.dynamicDraw=Boolean(Z),this.context.unbindVAO(),G.bindElementBuffer.set(this.buffer),ve.bufferData(ve.ELEMENT_ARRAY_BUFFER,ce.arrayBuffer,this.dynamicDraw?ve.DYNAMIC_DRAW:ve.STATIC_DRAW),this.dynamicDraw||delete ce.arrayBuffer};de.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},de.prototype.updateData=function(G){var ce=this.context.gl;this.context.unbindVAO(),this.bind(),ce.bufferSubData(ce.ELEMENT_ARRAY_BUFFER,0,G.arrayBuffer)},de.prototype.destroy=function(){var G=this.context.gl;this.buffer&&(G.deleteBuffer(this.buffer),delete this.buffer)};var be={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},De=function(G,ce,Z,ve){this.length=ce.length,this.attributes=Z,this.itemSize=ce.bytesPerElement,this.dynamicDraw=ve,this.context=G;var Ee=G.gl;this.buffer=Ee.createBuffer(),G.bindVertexBuffer.set(this.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,ce.arrayBuffer,this.dynamicDraw?Ee.DYNAMIC_DRAW:Ee.STATIC_DRAW),this.dynamicDraw||delete ce.arrayBuffer};De.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},De.prototype.updateData=function(G){var ce=this.context.gl;this.bind(),ce.bufferSubData(ce.ARRAY_BUFFER,0,G.arrayBuffer)},De.prototype.enableAttributes=function(G,ce){for(var Z=0;Z<this.attributes.length;Z++){var ve=this.attributes[Z],Ee=ce.attributes[ve.name];void 0!==Ee&&G.enableVertexAttribArray(Ee)}},De.prototype.setVertexAttribPointers=function(G,ce,Z){for(var ve=0;ve<this.attributes.length;ve++){var Ee=this.attributes[ve],Ae=ce.attributes[Ee.name];void 0!==Ae&&G.vertexAttribPointer(Ae,Ee.components,G[be[Ee.type]],!1,this.itemSize,Ee.offset+this.itemSize*(Z||0))}},De.prototype.destroy=function(){var G=this.context.gl;this.buffer&&(G.deleteBuffer(this.buffer),delete this.buffer)};var _e=function(G){this.gl=G.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};_e.prototype.get=function(){return this.current},_e.prototype.set=function(G){},_e.prototype.getDefault=function(){return this.default},_e.prototype.setDefault=function(){this.set(this.default)};var Ce=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return t.Color.transparent},G.prototype.set=function(Z){var ve=this.current;Z.r===ve.r&&Z.g===ve.g&&Z.b===ve.b&&Z.a===ve.a&&!this.dirty||(this.gl.clearColor(Z.r,Z.g,Z.b,Z.a),this.current=Z,this.dirty=!1)},G}(_e),Le=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.clearDepth(Z),this.current=Z,this.dirty=!1)},G}(_e),Fe=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.clearStencil(Z),this.current=Z,this.dirty=!1)},G}(_e),ke=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(Z){var ve=this.current;Z[0]===ve[0]&&Z[1]===ve[1]&&Z[2]===ve[2]&&Z[3]===ve[3]&&!this.dirty||(this.gl.colorMask(Z[0],Z[1],Z[2],Z[3]),this.current=Z,this.dirty=!1)},G}(_e),ze=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.depthMask(Z),this.current=Z,this.dirty=!1)},G}(_e),Pe=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.stencilMask(Z),this.current=Z,this.dirty=!1)},G}(_e),Ie=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(Z){var ve=this.current;Z.func===ve.func&&Z.ref===ve.ref&&Z.mask===ve.mask&&!this.dirty||(this.gl.stencilFunc(Z.func,Z.ref,Z.mask),this.current=Z,this.dirty=!1)},G}(_e),Qe=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var Z=this.gl;return[Z.KEEP,Z.KEEP,Z.KEEP]},G.prototype.set=function(Z){var ve=this.current;Z[0]===ve[0]&&Z[1]===ve[1]&&Z[2]===ve[2]&&!this.dirty||(this.gl.stencilOp(Z[0],Z[1],Z[2]),this.current=Z,this.dirty=!1)},G}(_e),at=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;Z?ve.enable(ve.STENCIL_TEST):ve.disable(ve.STENCIL_TEST),this.current=Z,this.dirty=!1}},G}(_e),Be=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(Z){var ve=this.current;Z[0]===ve[0]&&Z[1]===ve[1]&&!this.dirty||(this.gl.depthRange(Z[0],Z[1]),this.current=Z,this.dirty=!1)},G}(_e),Ne=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;Z?ve.enable(ve.DEPTH_TEST):ve.disable(ve.DEPTH_TEST),this.current=Z,this.dirty=!1}},G}(_e),nt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.depthFunc(Z),this.current=Z,this.dirty=!1)},G}(_e),ct=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;Z?ve.enable(ve.BLEND):ve.disable(ve.BLEND),this.current=Z,this.dirty=!1}},G}(_e),mt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var Z=this.gl;return[Z.ONE,Z.ZERO]},G.prototype.set=function(Z){var ve=this.current;Z[0]===ve[0]&&Z[1]===ve[1]&&!this.dirty||(this.gl.blendFunc(Z[0],Z[1]),this.current=Z,this.dirty=!1)},G}(_e),Bt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return t.Color.transparent},G.prototype.set=function(Z){var ve=this.current;Z.r===ve.r&&Z.g===ve.g&&Z.b===ve.b&&Z.a===ve.a&&!this.dirty||(this.gl.blendColor(Z.r,Z.g,Z.b,Z.a),this.current=Z,this.dirty=!1)},G}(_e),Rt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.blendEquation(Z),this.current=Z,this.dirty=!1)},G}(_e),zt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;Z?ve.enable(ve.CULL_FACE):ve.disable(ve.CULL_FACE),this.current=Z,this.dirty=!1}},G}(_e),St=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.cullFace(Z),this.current=Z,this.dirty=!1)},G}(_e),Xt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.frontFace(Z),this.current=Z,this.dirty=!1)},G}(_e),Mt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.useProgram(Z),this.current=Z,this.dirty=!1)},G}(_e),st=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(Z){Z===this.current&&!this.dirty||(this.gl.activeTexture(Z),this.current=Z,this.dirty=!1)},G}(_e),Se=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var Z=this.gl;return[0,0,Z.drawingBufferWidth,Z.drawingBufferHeight]},G.prototype.set=function(Z){var ve=this.current;Z[0]===ve[0]&&Z[1]===ve[1]&&Z[2]===ve[2]&&Z[3]===ve[3]&&!this.dirty||(this.gl.viewport(Z[0],Z[1],Z[2],Z[3]),this.current=Z,this.dirty=!1)},G}(_e),pe=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;ve.bindFramebuffer(ve.FRAMEBUFFER,Z),this.current=Z,this.dirty=!1}},G}(_e),ge=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;ve.bindRenderbuffer(ve.RENDERBUFFER,Z),this.current=Z,this.dirty=!1}},G}(_e),Oe=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;ve.bindTexture(ve.TEXTURE_2D,Z),this.current=Z,this.dirty=!1}},G}(_e),we=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;ve.bindBuffer(ve.ARRAY_BUFFER,Z),this.current=Z,this.dirty=!1}},G}(_e),He=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Z){var ve=this.gl;ve.bindBuffer(ve.ELEMENT_ARRAY_BUFFER,Z),this.current=Z,this.dirty=!1},G}(_e),Xe=function(fe){function G(ce){fe.call(this,ce),this.vao=ce.extVertexArrayObject}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(Z){!this.vao||Z===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(Z),this.current=Z,this.dirty=!1)},G}(_e),ut=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_ALIGNMENT,Z),this.current=Z,this.dirty=!1}},G}(_e),Ze=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z),this.current=Z,this.dirty=!1}},G}(_e),qe=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ve=this.gl;ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,Z),this.current=Z,this.dirty=!1}},G}(_e),Dt=function(fe){function G(ce,Z){fe.call(this,ce),this.context=ce,this.parent=Z}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(_e),Ft=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(Z){if(Z!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,Z,0),this.current=Z,this.dirty=!1}},G}(Dt),bt=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.set=function(Z){if(Z!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ve=this.gl;ve.framebufferRenderbuffer(ve.FRAMEBUFFER,ve.DEPTH_ATTACHMENT,ve.RENDERBUFFER,Z),this.current=Z,this.dirty=!1}},G}(Dt),Pt=function(G,ce,Z,ve){this.context=G,this.width=ce,this.height=Z;var Ee=G.gl,Ae=this.framebuffer=Ee.createFramebuffer();this.colorAttachment=new Ft(G,Ae),ve&&(this.depthAttachment=new bt(G,Ae))};Pt.prototype.destroy=function(){var G=this.context.gl,ce=this.colorAttachment.get();if(ce&&G.deleteTexture(ce),this.depthAttachment){var Z=this.depthAttachment.get();Z&&G.deleteRenderbuffer(Z)}G.deleteFramebuffer(this.framebuffer)};var cr=519,Sr=function(G,ce,Z){this.func=G,this.mask=ce,this.range=Z};Sr.ReadOnly=!1,Sr.ReadWrite=!0,Sr.disabled=new Sr(cr,Sr.ReadOnly,[0,1]);var Kr=519,It=7680,$t=function(G,ce,Z,ve,Ee,Ae){this.test=G,this.ref=ce,this.mask=Z,this.fail=ve,this.depthFail=Ee,this.pass=Ae};$t.disabled=new $t({func:Kr,mask:0},0,0,It,It,It);var kr=0,lr=1,rt=771,$e=function(G,ce,Z){this.blendFunction=G,this.blendColor=ce,this.mask=Z};$e.Replace=[lr,kr],$e.disabled=new $e($e.Replace,t.Color.transparent,[!1,!1,!1,!1]),$e.unblended=new $e($e.Replace,t.Color.transparent,[!0,!0,!0,!0]),$e.alphaBlended=new $e([lr,rt],t.Color.transparent,[!0,!0,!0,!0]);var ht=1029,gt=2305,ft=function(G,ce,Z){this.enable=G,this.mode=ce,this.frontFace=Z};ft.disabled=new ft(!1,ht,gt),ft.backCCW=new ft(!0,ht,gt);var Ct=function(G){this.gl=G,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ce(this),this.clearDepth=new Le(this),this.clearStencil=new Fe(this),this.colorMask=new ke(this),this.depthMask=new ze(this),this.stencilMask=new Pe(this),this.stencilFunc=new Ie(this),this.stencilOp=new Qe(this),this.stencilTest=new at(this),this.depthRange=new Be(this),this.depthTest=new Ne(this),this.depthFunc=new nt(this),this.blend=new ct(this),this.blendFunc=new mt(this),this.blendColor=new Bt(this),this.blendEquation=new Rt(this),this.cullFace=new zt(this),this.cullFaceSide=new St(this),this.frontFace=new Xt(this),this.program=new Mt(this),this.activeTexture=new st(this),this.viewport=new Se(this),this.bindFramebuffer=new pe(this),this.bindRenderbuffer=new ge(this),this.bindTexture=new Oe(this),this.bindVertexBuffer=new we(this),this.bindElementBuffer=new He(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Xe(this),this.pixelStoreUnpack=new ut(this),this.pixelStoreUnpackPremultiplyAlpha=new Ze(this),this.pixelStoreUnpackFlipY=new qe(this),this.extTextureFilterAnisotropic=G.getExtension("EXT_texture_filter_anisotropic")||G.getExtension("MOZ_EXT_texture_filter_anisotropic")||G.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=G.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=G.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(G.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=G.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=G.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=G.getParameter(G.MAX_TEXTURE_SIZE)};Ct.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ct.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ct.prototype.createIndexBuffer=function(G,ce){return new de(this,G,ce)},Ct.prototype.createVertexBuffer=function(G,ce,Z){return new De(this,G,ce,Z)},Ct.prototype.createRenderbuffer=function(G,ce,Z){var ve=this.gl,Ee=ve.createRenderbuffer();return this.bindRenderbuffer.set(Ee),ve.renderbufferStorage(ve.RENDERBUFFER,G,ce,Z),this.bindRenderbuffer.set(null),Ee},Ct.prototype.createFramebuffer=function(G,ce,Z){return new Pt(this,G,ce,Z)},Ct.prototype.clear=function(G){var ce=G.color,Z=G.depth,ve=this.gl,Ee=0;ce&&(Ee|=ve.COLOR_BUFFER_BIT,this.clearColor.set(ce),this.colorMask.set([!0,!0,!0,!0])),typeof Z<"u"&&(Ee|=ve.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Z),this.depthMask.set(!0)),ve.clear(Ee)},Ct.prototype.setCullFace=function(G){!1===G.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(G.mode),this.frontFace.set(G.frontFace))},Ct.prototype.setDepthMode=function(G){G.func!==this.gl.ALWAYS||G.mask?(this.depthTest.set(!0),this.depthFunc.set(G.func),this.depthMask.set(G.mask),this.depthRange.set(G.range)):this.depthTest.set(!1)},Ct.prototype.setStencilMode=function(G){G.test.func!==this.gl.ALWAYS||G.mask?(this.stencilTest.set(!0),this.stencilMask.set(G.mask),this.stencilOp.set([G.fail,G.depthFail,G.pass]),this.stencilFunc.set({func:G.test.func,ref:G.ref,mask:G.test.mask})):this.stencilTest.set(!1)},Ct.prototype.setColorMode=function(G){t.deepEqual(G.blendFunction,$e.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(G.blendFunction),this.blendColor.set(G.blendColor)),this.colorMask.set(G.mask)},Ct.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var sr=function(fe){function G(ce,Z,ve){var Ee=this;fe.call(this),this.id=ce,this.dispatcher=ve,this.on("data",function(Ae){"source"===Ae.dataType&&"metadata"===Ae.sourceDataType&&(Ee._sourceLoaded=!0),Ee._sourceLoaded&&!Ee._paused&&"source"===Ae.dataType&&"content"===Ae.sourceDataType&&(Ee.reload(),Ee.transform&&Ee.update(Ee.transform))}),this.on("error",function(){Ee._sourceErrored=!0}),this._source=oe(ce,Z,ve,this),this._tiles={},this._cache=new se(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(Z){this.map=Z,this._maxTileCacheSize=Z?Z._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(Z)},G.prototype.onRemove=function(Z){this._source&&this._source.onRemove&&this._source.onRemove(Z)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Z in this._tiles){var ve=this._tiles[Z];if("loaded"!==ve.state&&"errored"!==ve.state)return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var Z=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,Z&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(Z,ve){return this._source.loadTile(Z,ve)},G.prototype._unloadTile=function(Z){if(this._source.unloadTile)return this._source.unloadTile(Z,function(){})},G.prototype._abortTile=function(Z){if(this._source.abortTile)return this._source.abortTile(Z,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(Z){for(var ve in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Ee=this._tiles[ve];Ee.upload(Z),Ee.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return t.values(this._tiles).map(function(Z){return Z.tileID}).sort(tr).map(function(Z){return Z.key})},G.prototype.getRenderableIds=function(Z){var ve=this,Ee=[];for(var Ae in this._tiles)this._isIdRenderable(Ae,Z)&&Ee.push(this._tiles[Ae]);return Z?Ee.sort(function(Ge,ot){var xt=Ge.tileID,Wt=ot.tileID,ar=new t.Point(xt.canonical.x,xt.canonical.y)._rotate(ve.transform.angle),Yt=new t.Point(Wt.canonical.x,Wt.canonical.y)._rotate(ve.transform.angle);return xt.overscaledZ-Wt.overscaledZ||Yt.y-ar.y||Yt.x-ar.x}).map(function(Ge){return Ge.tileID.key}):Ee.map(function(Ge){return Ge.tileID}).sort(tr).map(function(Ge){return Ge.key})},G.prototype.hasRenderableParent=function(Z){var ve=this.findLoadedParent(Z,0);return!!ve&&this._isIdRenderable(ve.tileID.key)},G.prototype._isIdRenderable=function(Z,ve){return this._tiles[Z]&&this._tiles[Z].hasData()&&!this._coveredTiles[Z]&&(ve||!this._tiles[Z].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var Z in this._cache.reset(),this._tiles)"errored"!==this._tiles[Z].state&&this._reloadTile(Z,"reloading")},G.prototype._reloadTile=function(Z,ve){var Ee=this._tiles[Z];Ee&&("loading"!==Ee.state&&(Ee.state=ve),this._loadTile(Ee,this._tileLoaded.bind(this,Ee,Z,ve)))},G.prototype._tileLoaded=function(Z,ve,Ee,Ae){if(Ae)return Z.state="errored",void(404!==Ae.status?this._source.fire(new t.ErrorEvent(Ae,{tile:Z})):this.update(this.transform));Z.timeAdded=t.browser.now(),"expired"===Ee&&(Z.refreshedUponExpiration=!0),this._setTileReloadTimer(ve,Z),"raster-dem"===this.getSource().type&&Z.dem&&this._backfillDEM(Z),this._state.initializeTileState(Z,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:Z,coord:Z.tileID}))},G.prototype._backfillDEM=function(Z){for(var ve=this.getRenderableIds(),Ee=0;Ee<ve.length;Ee++){var Ae=ve[Ee];if(Z.neighboringTiles&&Z.neighboringTiles[Ae]){var Ge=this.getTileByID(Ae);ot(Z,Ge),ot(Ge,Z)}}function ot(xt,Wt){xt.needsHillshadePrepare=!0;var ar=Wt.tileID.canonical.x-xt.tileID.canonical.x,Yt=Wt.tileID.canonical.y-xt.tileID.canonical.y,Tt=Math.pow(2,xt.tileID.canonical.z),_t=Wt.tileID.key;0===ar&&0===Yt||Math.abs(Yt)>1||(Math.abs(ar)>1&&(1===Math.abs(ar+Tt)?ar+=Tt:1===Math.abs(ar-Tt)&&(ar-=Tt)),Wt.dem&&xt.dem&&(xt.dem.backfillBorder(Wt.dem,ar,Yt),xt.neighboringTiles&&xt.neighboringTiles[_t]&&(xt.neighboringTiles[_t].backfilled=!0)))}},G.prototype.getTile=function(Z){return this.getTileByID(Z.key)},G.prototype.getTileByID=function(Z){return this._tiles[Z]},G.prototype._retainLoadedChildren=function(Z,ve,Ee,Ae){for(var Ge in this._tiles){var ot=this._tiles[Ge];if(!(Ae[Ge]||!ot.hasData()||ot.tileID.overscaledZ<=ve||ot.tileID.overscaledZ>Ee)){for(var xt=ot.tileID;ot&&ot.tileID.overscaledZ>ve+1;){var Wt=ot.tileID.scaledTo(ot.tileID.overscaledZ-1);(ot=this._tiles[Wt.key])&&ot.hasData()&&(xt=Wt)}for(var ar=xt;ar.overscaledZ>ve;)if(Z[(ar=ar.scaledTo(ar.overscaledZ-1)).key]){Ae[xt.key]=xt;break}}}},G.prototype.findLoadedParent=function(Z,ve){if(Z.key in this._loadedParentTiles){var Ee=this._loadedParentTiles[Z.key];return Ee&&Ee.tileID.overscaledZ>=ve?Ee:null}for(var Ae=Z.overscaledZ-1;Ae>=ve;Ae--){var Ge=Z.scaledTo(Ae),ot=this._getLoadedTile(Ge);if(ot)return ot}},G.prototype._getLoadedTile=function(Z){var ve=this._tiles[Z.key];return ve&&ve.hasData()?ve:this._cache.getByKey(Z.wrapped().key)},G.prototype.updateCacheSize=function(Z){var Ae=(Math.ceil(Z.width/this._source.tileSize)+1)*(Math.ceil(Z.height/this._source.tileSize)+1),Ge=5,ot=Math.floor(Ae*Ge),xt="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ot):ot;this._cache.setMaxSize(xt)},G.prototype.handleWrapJump=function(Z){var Ae=(Z-(void 0===this._prevLng?Z:this._prevLng))/360,Ge=Math.round(Ae);if(this._prevLng=Z,Ge){var ot={};for(var xt in this._tiles){var Wt=this._tiles[xt];Wt.tileID=Wt.tileID.unwrapTo(Wt.tileID.wrap+Ge),ot[Wt.tileID.key]=Wt}for(var ar in this._tiles=ot,this._timers)clearTimeout(this._timers[ar]),delete this._timers[ar];for(var Yt in this._tiles){var Tt=this._tiles[Yt];this._setTileReloadTimer(Yt,Tt)}}},G.prototype.update=function(Z){var ve=this;if(this.transform=Z,this._sourceLoaded&&!this._paused){var Ee;this.updateCacheSize(Z),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Ee=Z.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ln){return new t.OverscaledTileID(ln.canonical.z,ln.wrap,ln.canonical.z,ln.canonical.x,ln.canonical.y)}):(Ee=Z.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ee=Ee.filter(function(ln){return ve._source.hasTile(ln)}))):Ee=[];var Ae=Z.coveringZoomLevel(this._source),Ge=Math.max(Ae-G.maxOverzooming,this._source.minzoom),ot=Math.max(Ae+G.maxUnderzooming,this._source.minzoom),xt=this._updateRetainedTiles(Ee,Ae);if(Cr(this._source.type)){for(var Wt={},ar={},Tt=0,_t=Object.keys(xt);Tt<_t.length;Tt+=1){var Nt=_t[Tt],rr=xt[Nt],dr=this._tiles[Nt];if(dr&&!(dr.fadeEndTime&&dr.fadeEndTime<=t.browser.now())){var pr=this.findLoadedParent(rr,Ge);pr&&(this._addTile(pr.tileID),Wt[pr.tileID.key]=pr.tileID),ar[Nt]=rr}}for(var Lr in this._retainLoadedChildren(ar,Ae,ot,xt),Wt)xt[Lr]||(this._coveredTiles[Lr]=!0,xt[Lr]=Wt[Lr])}for(var Tr in xt)this._tiles[Tr].clearFadeHold();for(var Er=0,fr=t.keysDifference(this._tiles,xt);Er<fr.length;Er+=1){var Br=fr[Er],$r=this._tiles[Br];$r.hasSymbolBuckets&&!$r.holdingForFade()?$r.setHoldDuration(this.map._fadeDuration):(!$r.hasSymbolBuckets||$r.symbolFadeFinished())&&this._removeTile(Br)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var Z in this._tiles)this._tiles[Z].holdingForFade()&&this._removeTile(Z)},G.prototype._updateRetainedTiles=function(Z,ve){for(var Ee={},Ae={},Ge=Math.max(ve-G.maxOverzooming,this._source.minzoom),ot=Math.max(ve+G.maxUnderzooming,this._source.minzoom),xt={},Wt=0,ar=Z;Wt<ar.length;Wt+=1){var Yt=ar[Wt],Tt=this._addTile(Yt);Ee[Yt.key]=Yt,!Tt.hasData()&&ve<this._source.maxzoom&&(xt[Yt.key]=Yt)}this._retainLoadedChildren(xt,ve,ot,Ee);for(var _t=0,Nt=Z;_t<Nt.length;_t+=1){var rr=Nt[_t],dr=this._tiles[rr.key];if(!dr.hasData()){if(ve+1>this._source.maxzoom){var pr=rr.children(this._source.maxzoom)[0],Lr=this.getTile(pr);if(Lr&&Lr.hasData()){Ee[pr.key]=pr;continue}}else{var Tr=rr.children(this._source.maxzoom);if(Ee[Tr[0].key]&&Ee[Tr[1].key]&&Ee[Tr[2].key]&&Ee[Tr[3].key])continue}for(var mr=dr.wasRequested(),Er=rr.overscaledZ-1;Er>=Ge;--Er){var fr=rr.scaledTo(Er);if(Ae[fr.key]||(Ae[fr.key]=!0,!(dr=this.getTile(fr))&&mr&&(dr=this._addTile(fr)),dr&&(Ee[fr.key]=fr,mr=dr.wasRequested(),dr.hasData())))break}}}return Ee},G.prototype._updateLoadedParentTileCache=function(){for(var Z in this._loadedParentTiles={},this._tiles){for(var ve=[],Ee=void 0,Ae=this._tiles[Z].tileID;Ae.overscaledZ>0;){if(Ae.key in this._loadedParentTiles){Ee=this._loadedParentTiles[Ae.key];break}ve.push(Ae.key);var Ge=Ae.scaledTo(Ae.overscaledZ-1);if(Ee=this._getLoadedTile(Ge))break;Ae=Ge}for(var ot=0,xt=ve;ot<xt.length;ot+=1){var Wt=xt[ot];this._loadedParentTiles[Wt]=Ee}}},G.prototype._addTile=function(Z){var ve=this._tiles[Z.key];if(ve)return ve;(ve=this._cache.getAndRemove(Z))&&(this._setTileReloadTimer(Z.key,ve),ve.tileID=Z,this._state.initializeTileState(ve,this.map?this.map.painter:null),this._cacheTimers[Z.key]&&(clearTimeout(this._cacheTimers[Z.key]),delete this._cacheTimers[Z.key],this._setTileReloadTimer(Z.key,ve)));var Ee=Boolean(ve);return Ee||(ve=new t.Tile(Z,this._source.tileSize*Z.overscaleFactor()),this._loadTile(ve,this._tileLoaded.bind(this,ve,Z.key,ve.state))),ve?(ve.uses++,this._tiles[Z.key]=ve,Ee||this._source.fire(new t.Event("dataloading",{tile:ve,coord:ve.tileID,dataType:"source"})),ve):null},G.prototype._setTileReloadTimer=function(Z,ve){var Ee=this;Z in this._timers&&(clearTimeout(this._timers[Z]),delete this._timers[Z]);var Ae=ve.getExpiryTimeout();Ae&&(this._timers[Z]=setTimeout(function(){Ee._reloadTile(Z,"expired"),delete Ee._timers[Z]},Ae))},G.prototype._removeTile=function(Z){var ve=this._tiles[Z];ve&&(ve.uses--,delete this._tiles[Z],this._timers[Z]&&(clearTimeout(this._timers[Z]),delete this._timers[Z]),!(ve.uses>0)&&(ve.hasData()&&"reloading"!==ve.state?this._cache.add(ve.tileID,ve,ve.getExpiryTimeout()):(ve.aborted=!0,this._abortTile(ve),this._unloadTile(ve))))},G.prototype.clearTiles=function(){for(var Z in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(Z);this._cache.reset()},G.prototype.tilesIn=function(Z,ve,Ee){var Ae=this,Ge=[],ot=this.transform;if(!ot)return Ge;for(var xt=Ee?ot.getCameraQueryGeometry(Z):Z,Wt=Z.map(function(Er){return ot.pointCoordinate(Er)}),ar=xt.map(function(Er){return ot.pointCoordinate(Er)}),Yt=this.getIds(),Tt=1/0,_t=1/0,Nt=-1/0,rr=-1/0,dr=0,pr=ar;dr<pr.length;dr+=1){var Lr=pr[dr];Tt=Math.min(Tt,Lr.x),_t=Math.min(_t,Lr.y),Nt=Math.max(Nt,Lr.x),rr=Math.max(rr,Lr.y)}for(var Tr=function(Er){var fr=Ae._tiles[Yt[Er]];if(!fr.holdingForFade()){var Br=fr.tileID,$r=Math.pow(2,ot.zoom-fr.tileID.overscaledZ),ln=ve*fr.queryPadding*t.EXTENT/fr.tileSize/$r,zn=[Br.getTilePoint(new t.MercatorCoordinate(Tt,_t)),Br.getTilePoint(new t.MercatorCoordinate(Nt,rr))];if(zn[0].x-ln<t.EXTENT&&zn[0].y-ln<t.EXTENT&&zn[1].x+ln>=0&&zn[1].y+ln>=0){var En=Wt.map(function(ya){return Br.getTilePoint(ya)}),Nn=ar.map(function(ya){return Br.getTilePoint(ya)});Ge.push({tile:fr,tileID:Br,queryGeometry:En,cameraQueryGeometry:Nn,scale:$r})}}},mr=0;mr<Yt.length;mr++)Tr(mr);return Ge},G.prototype.getVisibleCoordinates=function(Z){for(var ve=this,Ee=this.getRenderableIds(Z).map(function(xt){return ve._tiles[xt].tileID}),Ae=0,Ge=Ee;Ae<Ge.length;Ae+=1){var ot=Ge[Ae];ot.posMatrix=this.transform.calculatePosMatrix(ot.toUnwrapped())}return Ee},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Cr(this._source.type))for(var Z in this._tiles){var ve=this._tiles[Z];if(void 0!==ve.fadeEndTime&&ve.fadeEndTime>=t.browser.now())return!0}return!1},G.prototype.setFeatureState=function(Z,ve,Ee){Z=Z||"_geojsonTileLayer",this._state.updateState(Z,ve,Ee)},G.prototype.removeFeatureState=function(Z,ve,Ee){Z=Z||"_geojsonTileLayer",this._state.removeFeatureState(Z,ve,Ee)},G.prototype.getFeatureState=function(Z,ve){return Z=Z||"_geojsonTileLayer",this._state.getState(Z,ve)},G.prototype.setDependencies=function(Z,ve,Ee){var Ae=this._tiles[Z];Ae&&Ae.setDependencies(ve,Ee)},G.prototype.reloadTilesForDependencies=function(Z,ve){for(var Ee in this._tiles)this._tiles[Ee].hasDependency(Z,ve)&&this._reloadTile(Ee,"reloading");this._cache.filter(function(Ge){return!Ge.hasDependency(Z,ve)})},G}(t.Evented);function tr(fe,G){var ce=Math.abs(2*fe.wrap)-+(fe.wrap<0),Z=Math.abs(2*G.wrap)-+(G.wrap<0);return fe.overscaledZ-G.overscaledZ||Z-ce||G.canonical.y-fe.canonical.y||G.canonical.x-fe.canonical.x}function Cr(fe){return"raster"===fe||"image"===fe||"video"===fe}function Hr(){return new t.window.Worker(Mi.workerUrl)}sr.maxOverzooming=10,sr.maxUnderzooming=3;var zr="mapboxgl_preloaded_worker_pool",Wr=function(){this.active={}};Wr.prototype.acquire=function(G){if(!this.workers)for(this.workers=[];this.workers.length<Wr.workerCount;)this.workers.push(new Hr);return this.active[G]=!0,this.workers.slice()},Wr.prototype.release=function(G){delete this.active[G],0===this.numActive()&&(this.workers.forEach(function(ce){ce.terminate()}),this.workers=null)},Wr.prototype.isPreloaded=function(){return!!this.active[zr]},Wr.prototype.numActive=function(){return Object.keys(this.active).length};var We,Ke=Math.floor(t.browser.hardwareConcurrency/2);function Jt(){return We||(We=new Wr),We}function Gt(){Jt().acquire(zr)}function hr(){var fe=We;fe&&(fe.isPreloaded()&&1===fe.numActive()?(fe.release(zr),We=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function br(fe,G){var ce={};for(var Z in fe)"ref"!==Z&&(ce[Z]=fe[Z]);return t.refProperties.forEach(function(ve){ve in G&&(ce[ve]=G[ve])}),ce}function Ut(fe){fe=fe.slice();for(var G=Object.create(null),ce=0;ce<fe.length;ce++)G[fe[ce].id]=fe[ce];for(var Z=0;Z<fe.length;Z++)"ref"in fe[Z]&&(fe[Z]=br(fe[Z],G[fe[Z].ref]));return fe}function Kt(){var fe={},G=t.styleSpec.$version;for(var ce in t.styleSpec.$root){var Z=t.styleSpec.$root[ce];if(Z.required){var ve=null;null!=(ve="version"===ce?G:"array"===Z.type?[]:{})&&(fe[ce]=ve)}}return fe}Wr.workerCount=Math.max(Math.min(Ke,6),1);var wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function xr(fe,G,ce){ce.push({command:wt.addSource,args:[fe,G[fe]]})}function Ir(fe,G,ce){G.push({command:wt.removeSource,args:[fe]}),ce[fe]=!0}function Ur(fe,G,ce,Z){Ir(fe,ce,Z),xr(fe,G,ce)}function qt(fe,G,ce){var Z;for(Z in fe[ce])if(fe[ce].hasOwnProperty(Z)&&"data"!==Z&&!t.deepEqual(fe[ce][Z],G[ce][Z]))return!1;for(Z in G[ce])if(G[ce].hasOwnProperty(Z)&&"data"!==Z&&!t.deepEqual(fe[ce][Z],G[ce][Z]))return!1;return!0}function on(fe,G,ce,Z){var ve;for(ve in G=G||{},fe=fe||{})fe.hasOwnProperty(ve)&&(G.hasOwnProperty(ve)||Ir(ve,ce,Z));for(ve in G)G.hasOwnProperty(ve)&&(fe.hasOwnProperty(ve)?t.deepEqual(fe[ve],G[ve])||("geojson"===fe[ve].type&&"geojson"===G[ve].type&&qt(fe,G,ve)?ce.push({command:wt.setGeoJSONSourceData,args:[ve,G[ve].data]}):Ur(ve,G,ce,Z)):xr(ve,G,ce))}function an(fe,G,ce,Z,ve,Ee){var Ae;for(Ae in G=G||{},fe=fe||{})fe.hasOwnProperty(Ae)&&(t.deepEqual(fe[Ae],G[Ae])||ce.push({command:Ee,args:[Z,Ae,G[Ae],ve]}));for(Ae in G)!G.hasOwnProperty(Ae)||fe.hasOwnProperty(Ae)||t.deepEqual(fe[Ae],G[Ae])||ce.push({command:Ee,args:[Z,Ae,G[Ae],ve]})}function hn(fe){return fe.id}function An(fe,G){return fe[G.id]=G,fe}function Sn(fe,G,ce){G=G||[];var xt,Wt,ar,Yt,Tt,_t,Nt,Z=(fe=fe||[]).map(hn),ve=G.map(hn),Ee=fe.reduce(An,{}),Ae=G.reduce(An,{}),Ge=Z.slice(),ot=Object.create(null);for(xt=0,Wt=0;xt<Z.length;xt++)ar=Z[xt],Ae.hasOwnProperty(ar)?Wt++:(ce.push({command:wt.removeLayer,args:[ar]}),Ge.splice(Ge.indexOf(ar,Wt),1));for(xt=0,Wt=0;xt<ve.length;xt++)ar=ve[ve.length-1-xt],Ge[Ge.length-1-xt]!==ar&&(Ee.hasOwnProperty(ar)?(ce.push({command:wt.removeLayer,args:[ar]}),Ge.splice(Ge.lastIndexOf(ar,Ge.length-Wt),1)):Wt++,_t=Ge[Ge.length-xt],ce.push({command:wt.addLayer,args:[Ae[ar],_t]}),Ge.splice(Ge.length-xt,0,ar),ot[ar]=!0);for(xt=0;xt<ve.length;xt++)if(Yt=Ee[ar=ve[xt]],Tt=Ae[ar],!ot[ar]&&!t.deepEqual(Yt,Tt)){if(!t.deepEqual(Yt.source,Tt.source)||!t.deepEqual(Yt["source-layer"],Tt["source-layer"])||!t.deepEqual(Yt.type,Tt.type)){ce.push({command:wt.removeLayer,args:[ar]}),_t=Ge[Ge.lastIndexOf(ar)+1],ce.push({command:wt.addLayer,args:[Tt,_t]});continue}for(Nt in an(Yt.layout,Tt.layout,ce,ar,null,wt.setLayoutProperty),an(Yt.paint,Tt.paint,ce,ar,null,wt.setPaintProperty),t.deepEqual(Yt.filter,Tt.filter)||ce.push({command:wt.setFilter,args:[ar,Tt.filter]}),(!t.deepEqual(Yt.minzoom,Tt.minzoom)||!t.deepEqual(Yt.maxzoom,Tt.maxzoom))&&ce.push({command:wt.setLayerZoomRange,args:[ar,Tt.minzoom,Tt.maxzoom]}),Yt)Yt.hasOwnProperty(Nt)&&("layout"===Nt||"paint"===Nt||"filter"===Nt||"metadata"===Nt||"minzoom"===Nt||"maxzoom"===Nt||(0===Nt.indexOf("paint.")?an(Yt[Nt],Tt[Nt],ce,ar,Nt.slice(6),wt.setPaintProperty):t.deepEqual(Yt[Nt],Tt[Nt])||ce.push({command:wt.setLayerProperty,args:[ar,Nt,Tt[Nt]]})));for(Nt in Tt)!Tt.hasOwnProperty(Nt)||Yt.hasOwnProperty(Nt)||"layout"===Nt||"paint"===Nt||"filter"===Nt||"metadata"===Nt||"minzoom"===Nt||"maxzoom"===Nt||(0===Nt.indexOf("paint.")?an(Yt[Nt],Tt[Nt],ce,ar,Nt.slice(6),wt.setPaintProperty):t.deepEqual(Yt[Nt],Tt[Nt])||ce.push({command:wt.setLayerProperty,args:[ar,Nt,Tt[Nt]]}))}}function sa(fe,G){if(!fe)return[{command:wt.setStyle,args:[G]}];var ce=[];try{if(!t.deepEqual(fe.version,G.version))return[{command:wt.setStyle,args:[G]}];t.deepEqual(fe.center,G.center)||ce.push({command:wt.setCenter,args:[G.center]}),t.deepEqual(fe.zoom,G.zoom)||ce.push({command:wt.setZoom,args:[G.zoom]}),t.deepEqual(fe.bearing,G.bearing)||ce.push({command:wt.setBearing,args:[G.bearing]}),t.deepEqual(fe.pitch,G.pitch)||ce.push({command:wt.setPitch,args:[G.pitch]}),t.deepEqual(fe.sprite,G.sprite)||ce.push({command:wt.setSprite,args:[G.sprite]}),t.deepEqual(fe.glyphs,G.glyphs)||ce.push({command:wt.setGlyphs,args:[G.glyphs]}),t.deepEqual(fe.transition,G.transition)||ce.push({command:wt.setTransition,args:[G.transition]}),t.deepEqual(fe.light,G.light)||ce.push({command:wt.setLight,args:[G.light]});var Z={},ve=[];on(fe.sources,G.sources,ve,Z);var Ee=[];fe.layers&&fe.layers.forEach(function(Ae){Z[Ae.source]?ce.push({command:wt.removeLayer,args:[Ae.id]}):Ee.push(Ae)}),ce=ce.concat(ve),Sn(Ee,G.layers,ce)}catch(Ae){console.warn("Unable to compute style diff:",Ae),ce=[{command:wt.setStyle,args:[G]}]}return ce}var Rn=function(G,ce){this.reset(G,ce)};Rn.prototype.reset=function(G,ce){this.points=G||[],this._distances=[0];for(var Z=1;Z<this.points.length;Z++)this._distances[Z]=this._distances[Z-1]+this.points[Z].dist(this.points[Z-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ce||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Rn.prototype.lerp=function(G){if(1===this.points.length)return this.points[0];G=t.clamp(G,0,1);for(var ce=1,Z=this._distances[ce],ve=G*this.paddedLength+this.padding;Z<ve&&ce<this._distances.length;)Z=this._distances[++ce];var Ee=ce-1,Ae=this._distances[Ee],Ge=Z-Ae,ot=Ge>0?(ve-Ae)/Ge:0;return this.points[Ee].mult(1-ot).add(this.points[ce].mult(ot))};var Yr=function(G,ce,Z){var ve=this.boxCells=[],Ee=this.circleCells=[];this.xCellCount=Math.ceil(G/Z),this.yCellCount=Math.ceil(ce/Z);for(var Ae=0;Ae<this.xCellCount*this.yCellCount;Ae++)ve.push([]),Ee.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=G,this.height=ce,this.xScale=this.xCellCount/G,this.yScale=this.yCellCount/ce,this.boxUid=0,this.circleUid=0};function vr(fe,G,ce,Z,ve){var Ee=t.create();return G?(t.scale(Ee,Ee,[1/ve,1/ve,1]),ce||t.rotateZ(Ee,Ee,Z.angle)):t.multiply(Ee,Z.labelPlaneMatrix,fe),Ee}function nn(fe,G,ce,Z,ve){if(G){var Ee=t.clone(fe);return t.scale(Ee,Ee,[ve,ve,1]),ce||t.rotateZ(Ee,Ee,-Z.angle),Ee}return Z.glCoordMatrix}function Or(fe,G){var ce=[fe.x,fe.y,0,1];Ni(ce,ce,G);var Z=ce[3];return{point:new t.Point(ce[0]/Z,ce[1]/Z),signedDistanceFromCamera:Z}}function Xn(fe,G){return.5+fe/G*.5}function Vr(fe,G){var ce=fe[0]/fe[3],Z=fe[1]/fe[3];return ce>=-G[0]&&ce<=G[0]&&Z>=-G[1]&&Z<=G[1]}function wn(fe,G,ce,Z,ve,Ee,Ae,Ge){var ot=Z?fe.textSizeData:fe.iconSizeData,xt=t.evaluateSizeForZoom(ot,ce.transform.zoom),Wt=[256/ce.width*2+1,256/ce.height*2+1],ar=Z?fe.text.dynamicLayoutVertexArray:fe.icon.dynamicLayoutVertexArray;ar.clear();for(var Yt=fe.lineVertexArray,Tt=Z?fe.text.placedSymbolArray:fe.icon.placedSymbolArray,_t=ce.transform.width/ce.transform.height,Nt=!1,rr=0;rr<Tt.length;rr++){var dr=Tt.get(rr);if(dr.hidden||dr.writingMode===t.WritingMode.vertical&&!Nt)Na(dr.numGlyphs,ar);else{Nt=!1;var pr=[dr.anchorX,dr.anchorY,0,1];if(t.transformMat4(pr,pr,G),Vr(pr,Wt)){var Lr=pr[3],Tr=Xn(ce.transform.cameraToCenterDistance,Lr),mr=t.evaluateSizeForFeature(ot,xt,dr),Er=Ae?mr/Tr:mr*Tr,fr=new t.Point(dr.anchorX,dr.anchorY),Br=Or(fr,ve).point,$r={},ln=Ka(dr,Er,!1,Ge,G,ve,Ee,fe.glyphOffsetArray,Yt,ar,Br,fr,$r,_t);Nt=ln.useVertical,(ln.notEnoughRoom||Nt||ln.needsFlipping&&Ka(dr,Er,!0,Ge,G,ve,Ee,fe.glyphOffsetArray,Yt,ar,Br,fr,$r,_t).notEnoughRoom)&&Na(dr.numGlyphs,ar)}else Na(dr.numGlyphs,ar)}}Z?fe.text.dynamicLayoutVertexBuffer.updateData(ar):fe.icon.dynamicLayoutVertexBuffer.updateData(ar)}function Ca(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt){var ar=Ge.glyphStartIndex+Ge.numGlyphs,Yt=Ge.lineStartIndex,Tt=Ge.lineStartIndex+Ge.lineLength,_t=G.getoffsetX(Ge.glyphStartIndex),Nt=G.getoffsetX(ar-1),rr=si(fe*_t,ce,Z,ve,Ee,Ae,Ge.segment,Yt,Tt,ot,xt,Wt);if(!rr)return null;var dr=si(fe*Nt,ce,Z,ve,Ee,Ae,Ge.segment,Yt,Tt,ot,xt,Wt);return dr?{first:rr,last:dr}:null}function Ba(fe,G,ce,Z){return fe===t.WritingMode.horizontal&&Math.abs(ce.y-G.y)>Math.abs(ce.x-G.x)*Z?{useVertical:!0}:(fe===t.WritingMode.vertical?G.y<ce.y:G.x>ce.x)?{needsFlipping:!0}:null}function Ka(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt,ar,Yt,Tt){var dr,_t=G/24,Nt=fe.lineOffsetX*_t,rr=fe.lineOffsetY*_t;if(fe.numGlyphs>1){var pr=fe.glyphStartIndex+fe.numGlyphs,Lr=fe.lineStartIndex,Tr=fe.lineStartIndex+fe.lineLength,mr=Ca(_t,Ge,Nt,rr,ce,Wt,ar,fe,ot,Ee,Yt);if(!mr)return{notEnoughRoom:!0};var Er=Or(mr.first.point,Ae).point,fr=Or(mr.last.point,Ae).point;if(Z&&!ce){var Br=Ba(fe.writingMode,Er,fr,Tt);if(Br)return Br}dr=[mr.first];for(var $r=fe.glyphStartIndex+1;$r<pr-1;$r++)dr.push(si(_t*Ge.getoffsetX($r),Nt,rr,ce,Wt,ar,fe.segment,Lr,Tr,ot,Ee,Yt));dr.push(mr.last)}else{if(Z&&!ce){var ln=Or(ar,ve).point,zn=fe.lineStartIndex+fe.segment+1,En=new t.Point(ot.getx(zn),ot.gety(zn)),Nn=Or(En,ve),ya=Nn.signedDistanceFromCamera>0?Nn.point:Ja(ar,En,ln,1,ve),aa=Ba(fe.writingMode,ln,ya,Tt);if(aa)return aa}var On=si(_t*Ge.getoffsetX(fe.glyphStartIndex),Nt,rr,ce,Wt,ar,fe.segment,fe.lineStartIndex,fe.lineStartIndex+fe.lineLength,ot,Ee,Yt);if(!On)return{notEnoughRoom:!0};dr=[On]}for(var Zn=0,Yn=dr;Zn<Yn.length;Zn+=1){var ua=Yn[Zn];t.addDynamicAttributes(xt,ua.point,ua.angle)}return{}}function Ja(fe,G,ce,Z,ve){var Ee=Or(fe.add(fe.sub(G)._unit()),ve).point,Ae=ce.sub(Ee);return ce.add(Ae._mult(Z/Ae.mag()))}function si(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt,ar){var Yt=Z?fe-G:fe+G,Tt=Yt>0?1:-1,_t=0;Z&&(Tt*=-1,_t=Math.PI),Tt<0&&(_t+=Math.PI);for(var Nt=Tt>0?Ge+Ae:Ge+Ae+1,rr=ve,dr=ve,pr=0,Lr=0,Tr=Math.abs(Yt),mr=[];pr+Lr<=Tr;){if((Nt+=Tt)<Ge||Nt>=ot)return null;if(dr=rr,mr.push(rr),void 0===(rr=ar[Nt])){var Er=new t.Point(xt.getx(Nt),xt.gety(Nt)),fr=Or(Er,Wt);if(fr.signedDistanceFromCamera>0)rr=ar[Nt]=fr.point;else{var Br=Nt-Tt;rr=Ja(0===pr?Ee:new t.Point(xt.getx(Br),xt.gety(Br)),Er,dr,Tr-pr+1,Wt)}}pr+=Lr,Lr=dr.dist(rr)}var ln=(Tr-pr)/Lr,zn=rr.sub(dr),En=zn.mult(ln)._add(dr);En._add(zn._unit()._perp()._mult(ce*Tt));var Nn=_t+Math.atan2(rr.y-dr.y,rr.x-dr.x);return mr.push(En),{point:En,angle:Nn,path:mr}}Yr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yr.prototype.insert=function(G,ce,Z,ve,Ee){this._forEachCell(ce,Z,ve,Ee,this._insertBoxCell,this.boxUid++),this.boxKeys.push(G),this.bboxes.push(ce),this.bboxes.push(Z),this.bboxes.push(ve),this.bboxes.push(Ee)},Yr.prototype.insertCircle=function(G,ce,Z,ve){this._forEachCell(ce-ve,Z-ve,ce+ve,Z+ve,this._insertCircleCell,this.circleUid++),this.circleKeys.push(G),this.circles.push(ce),this.circles.push(Z),this.circles.push(ve)},Yr.prototype._insertBoxCell=function(G,ce,Z,ve,Ee,Ae){this.boxCells[Ee].push(Ae)},Yr.prototype._insertCircleCell=function(G,ce,Z,ve,Ee,Ae){this.circleCells[Ee].push(Ae)},Yr.prototype._query=function(G,ce,Z,ve,Ee,Ae){if(Z<0||G>this.width||ve<0||ce>this.height)return!Ee&&[];var Ge=[];if(G<=0&&ce<=0&&this.width<=Z&&this.height<=ve){if(Ee)return!0;for(var ot=0;ot<this.boxKeys.length;ot++)Ge.push({key:this.boxKeys[ot],x1:this.bboxes[4*ot],y1:this.bboxes[4*ot+1],x2:this.bboxes[4*ot+2],y2:this.bboxes[4*ot+3]});for(var xt=0;xt<this.circleKeys.length;xt++){var Wt=this.circles[3*xt],ar=this.circles[3*xt+1],Yt=this.circles[3*xt+2];Ge.push({key:this.circleKeys[xt],x1:Wt-Yt,y1:ar-Yt,x2:Wt+Yt,y2:ar+Yt})}return Ae?Ge.filter(Ae):Ge}var Tt={hitTest:Ee,seenUids:{box:{},circle:{}}};return this._forEachCell(G,ce,Z,ve,this._queryCell,Ge,Tt,Ae),Ee?Ge.length>0:Ge},Yr.prototype._queryCircle=function(G,ce,Z,ve,Ee){var Ae=G-Z,Ge=G+Z,ot=ce-Z,xt=ce+Z;if(Ge<0||Ae>this.width||xt<0||ot>this.height)return!ve&&[];var Wt=[],ar={hitTest:ve,circle:{x:G,y:ce,radius:Z},seenUids:{box:{},circle:{}}};return this._forEachCell(Ae,ot,Ge,xt,this._queryCellCircle,Wt,ar,Ee),ve?Wt.length>0:Wt},Yr.prototype.query=function(G,ce,Z,ve,Ee){return this._query(G,ce,Z,ve,!1,Ee)},Yr.prototype.hitTest=function(G,ce,Z,ve,Ee){return this._query(G,ce,Z,ve,!0,Ee)},Yr.prototype.hitTestCircle=function(G,ce,Z,ve){return this._queryCircle(G,ce,Z,!0,ve)},Yr.prototype._queryCell=function(G,ce,Z,ve,Ee,Ae,Ge,ot){var xt=Ge.seenUids,Wt=this.boxCells[Ee];if(null!==Wt)for(var ar=this.bboxes,Yt=0,Tt=Wt;Yt<Tt.length;Yt+=1){var _t=Tt[Yt];if(!xt.box[_t]){xt.box[_t]=!0;var Nt=4*_t;if(G<=ar[Nt+2]&&ce<=ar[Nt+3]&&Z>=ar[Nt+0]&&ve>=ar[Nt+1]&&(!ot||ot(this.boxKeys[_t]))){if(Ge.hitTest)return Ae.push(!0),!0;Ae.push({key:this.boxKeys[_t],x1:ar[Nt],y1:ar[Nt+1],x2:ar[Nt+2],y2:ar[Nt+3]})}}}var rr=this.circleCells[Ee];if(null!==rr)for(var dr=this.circles,pr=0,Lr=rr;pr<Lr.length;pr+=1){var Tr=Lr[pr];if(!xt.circle[Tr]){xt.circle[Tr]=!0;var mr=3*Tr;if(this._circleAndRectCollide(dr[mr],dr[mr+1],dr[mr+2],G,ce,Z,ve)&&(!ot||ot(this.circleKeys[Tr]))){if(Ge.hitTest)return Ae.push(!0),!0;var Er=dr[mr],fr=dr[mr+1],Br=dr[mr+2];Ae.push({key:this.circleKeys[Tr],x1:Er-Br,y1:fr-Br,x2:Er+Br,y2:fr+Br})}}}},Yr.prototype._queryCellCircle=function(G,ce,Z,ve,Ee,Ae,Ge,ot){var xt=Ge.circle,Wt=Ge.seenUids,ar=this.boxCells[Ee];if(null!==ar)for(var Yt=this.bboxes,Tt=0,_t=ar;Tt<_t.length;Tt+=1){var Nt=_t[Tt];if(!Wt.box[Nt]){Wt.box[Nt]=!0;var rr=4*Nt;if(this._circleAndRectCollide(xt.x,xt.y,xt.radius,Yt[rr+0],Yt[rr+1],Yt[rr+2],Yt[rr+3])&&(!ot||ot(this.boxKeys[Nt])))return Ae.push(!0),!0}}var dr=this.circleCells[Ee];if(null!==dr)for(var pr=this.circles,Lr=0,Tr=dr;Lr<Tr.length;Lr+=1){var mr=Tr[Lr];if(!Wt.circle[mr]){Wt.circle[mr]=!0;var Er=3*mr;if(this._circlesCollide(pr[Er],pr[Er+1],pr[Er+2],xt.x,xt.y,xt.radius)&&(!ot||ot(this.circleKeys[mr])))return Ae.push(!0),!0}}},Yr.prototype._forEachCell=function(G,ce,Z,ve,Ee,Ae,Ge,ot){for(var xt=this._convertToXCellCoord(G),Wt=this._convertToYCellCoord(ce),ar=this._convertToXCellCoord(Z),Yt=this._convertToYCellCoord(ve),Tt=xt;Tt<=ar;Tt++)for(var _t=Wt;_t<=Yt;_t++){var Nt=this.xCellCount*_t+Tt;if(Ee.call(this,G,ce,Z,ve,Nt,Ae,Ge,ot))return}},Yr.prototype._convertToXCellCoord=function(G){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(G*this.xScale)))},Yr.prototype._convertToYCellCoord=function(G){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(G*this.yScale)))},Yr.prototype._circlesCollide=function(G,ce,Z,ve,Ee,Ae){var Ge=ve-G,ot=Ee-ce,xt=Z+Ae;return xt*xt>Ge*Ge+ot*ot},Yr.prototype._circleAndRectCollide=function(G,ce,Z,ve,Ee,Ae,Ge){var ot=(Ae-ve)/2,xt=Math.abs(G-(ve+ot));if(xt>ot+Z)return!1;var Wt=(Ge-Ee)/2,ar=Math.abs(ce-(Ee+Wt));if(ar>Wt+Z)return!1;if(xt<=ot||ar<=Wt)return!0;var Yt=xt-ot,Tt=ar-Wt;return Yt*Yt+Tt*Tt<=Z*Z};var Ra=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Na(fe,G){for(var ce=0;ce<fe;ce++){var Z=G.length;G.resize(Z+4),G.float32.set(Ra,3*Z)}}function Ni(fe,G,ce){var Z=G[0],ve=G[1];return fe[0]=ce[0]*Z+ce[4]*ve+ce[12],fe[1]=ce[1]*Z+ce[5]*ve+ce[13],fe[3]=ce[3]*Z+ce[7]*ve+ce[15],fe}var ha=100,yi=function(G,ce,Z){void 0===ce&&(ce=new Yr(G.width+2*ha,G.height+2*ha,25)),void 0===Z&&(Z=new Yr(G.width+2*ha,G.height+2*ha,25)),this.transform=G,this.grid=ce,this.ignoredGrid=Z,this.pitchfactor=Math.cos(G._pitch)*G.cameraToCenterDistance,this.screenRightBoundary=G.width+ha,this.screenBottomBoundary=G.height+ha,this.gridRightBoundary=G.width+2*ha,this.gridBottomBoundary=G.height+2*ha};function gn(fe,G,ce){return G*(t.EXTENT/(fe.tileSize*Math.pow(2,ce-fe.tileID.overscaledZ)))}yi.prototype.placeCollisionBox=function(G,ce,Z,ve,Ee){var Ae=this.projectAndGetPerspectiveRatio(ve,G.anchorPointX,G.anchorPointY),Ge=Z*Ae.perspectiveRatio,ot=G.x1*Ge+Ae.point.x,xt=G.y1*Ge+Ae.point.y,Wt=G.x2*Ge+Ae.point.x,ar=G.y2*Ge+Ae.point.y;return!this.isInsideGrid(ot,xt,Wt,ar)||!ce&&this.grid.hitTest(ot,xt,Wt,ar,Ee)?{box:[],offscreen:!1}:{box:[ot,xt,Wt,ar],offscreen:this.isOffscreen(ot,xt,Wt,ar)}},yi.prototype.placeCollisionCircles=function(G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt,ar,Yt,Tt){var _t=[],Nt=new t.Point(ce.anchorX,ce.anchorY),rr=Or(Nt,Ae),dr=Xn(this.transform.cameraToCenterDistance,rr.signedDistanceFromCamera),Lr=(Wt?Ee/dr:Ee*dr)/t.ONE_EM,Tr=Or(Nt,Ge).point,mr={},Br=Ca(Lr,ve,ce.lineOffsetX*Lr,ce.lineOffsetY*Lr,!1,Tr,Nt,ce,Z,Ge,mr),$r=!1,ln=!1,zn=!0;if(Br){for(var En=.5*Yt*dr+Tt,Nn=new t.Point(-ha,-ha),ya=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),aa=new Rn,On=Br.first,Zn=Br.last,Yn=[],ua=On.path.length-1;ua>=1;ua--)Yn.push(On.path[ua]);for(var _a=1;_a<Zn.path.length;_a++)Yn.push(Zn.path[_a]);var Ci=2.5*En;if(ot){var Ei=Yn.map(function(Qu){return Or(Qu,ot)});Yn=Ei.some(function(Qu){return Qu.signedDistanceFromCamera<=0})?[]:Ei.map(function(Qu){return Qu.point})}var qi=[];if(Yn.length>0){for(var di=Yn[0].clone(),Fi=Yn[0].clone(),ho=1;ho<Yn.length;ho++)di.x=Math.min(di.x,Yn[ho].x),di.y=Math.min(di.y,Yn[ho].y),Fi.x=Math.max(Fi.x,Yn[ho].x),Fi.y=Math.max(Fi.y,Yn[ho].y);qi=di.x>=Nn.x&&Fi.x<=ya.x&&di.y>=Nn.y&&Fi.y<=ya.y?[Yn]:Fi.x<Nn.x||di.x>ya.x||Fi.y<Nn.y||di.y>ya.y?[]:t.clipLine([Yn],Nn.x,Nn.y,ya.x,ya.y)}for(var Ko=0,uu=qi;Ko<uu.length;Ko+=1){var Ku=uu[Ko];aa.reset(Ku,.25*En);var Iu=0;Iu=aa.length<=.5*En?1:Math.ceil(aa.paddedLength/Ci)+1;for(var wf=0;wf<Iu;wf++){var kf=wf/Math.max(Iu-1,1),Tf=aa.lerp(kf),Sl=Tf.x+ha,Af=Tf.y+ha;_t.push(Sl,Af,En,0);var fu=Sl-En,Hl=Af-En,Ju=Sl+En,_f=Af+En;if(zn=zn&&this.isOffscreen(fu,Hl,Ju,_f),ln=ln||this.isInsideGrid(fu,Hl,Ju,_f),!G&&this.grid.hitTestCircle(Sl,Af,En,ar)&&($r=!0,!xt))return{circles:[],offscreen:!1,collisionDetected:$r}}}}return{circles:!xt&&$r||!ln?[]:_t,offscreen:zn,collisionDetected:$r}},yi.prototype.queryRenderedSymbols=function(G){if(0===G.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var ce=[],Z=1/0,ve=1/0,Ee=-1/0,Ae=-1/0,Ge=0,ot=G;Ge<ot.length;Ge+=1){var xt=ot[Ge],Wt=new t.Point(xt.x+ha,xt.y+ha);Z=Math.min(Z,Wt.x),ve=Math.min(ve,Wt.y),Ee=Math.max(Ee,Wt.x),Ae=Math.max(Ae,Wt.y),ce.push(Wt)}for(var Yt={},Tt={},_t=0,Nt=this.grid.query(Z,ve,Ee,Ae).concat(this.ignoredGrid.query(Z,ve,Ee,Ae));_t<Nt.length;_t+=1){var rr=Nt[_t],dr=rr.key;if(void 0===Yt[dr.bucketInstanceId]&&(Yt[dr.bucketInstanceId]={}),!Yt[dr.bucketInstanceId][dr.featureIndex]){var pr=[new t.Point(rr.x1,rr.y1),new t.Point(rr.x2,rr.y1),new t.Point(rr.x2,rr.y2),new t.Point(rr.x1,rr.y2)];t.polygonIntersectsPolygon(ce,pr)&&(Yt[dr.bucketInstanceId][dr.featureIndex]=!0,void 0===Tt[dr.bucketInstanceId]&&(Tt[dr.bucketInstanceId]=[]),Tt[dr.bucketInstanceId].push(dr.featureIndex))}}return Tt},yi.prototype.insertCollisionBox=function(G,ce,Z,ve,Ee){var Ge={bucketInstanceId:Z,featureIndex:ve,collisionGroupID:Ee};(ce?this.ignoredGrid:this.grid).insert(Ge,G[0],G[1],G[2],G[3])},yi.prototype.insertCollisionCircles=function(G,ce,Z,ve,Ee){for(var Ae=ce?this.ignoredGrid:this.grid,Ge={bucketInstanceId:Z,featureIndex:ve,collisionGroupID:Ee},ot=0;ot<G.length;ot+=4)Ae.insertCircle(Ge,G[ot],G[ot+1],G[ot+2])},yi.prototype.projectAndGetPerspectiveRatio=function(G,ce,Z){var ve=[ce,Z,0,1];return Ni(ve,ve,G),{point:new t.Point((ve[0]/ve[3]+1)/2*this.transform.width+ha,(-ve[1]/ve[3]+1)/2*this.transform.height+ha),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ve[3]*.5}},yi.prototype.isOffscreen=function(G,ce,Z,ve){return Z<ha||G>=this.screenRightBoundary||ve<ha||ce>this.screenBottomBoundary},yi.prototype.isInsideGrid=function(G,ce,Z,ve){return Z>=0&&G<this.gridRightBoundary&&ve>=0&&ce<this.gridBottomBoundary},yi.prototype.getViewportMatrix=function(){var G=t.identity([]);return t.translate(G,G,[-ha,-ha,0]),G};var Eo=function(G,ce,Z,ve){this.opacity=G?Math.max(0,Math.min(1,G.opacity+(G.placed?ce:-ce))):ve&&Z?1:0,this.placed=Z};Eo.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Qi=function(G,ce,Z,ve,Ee){this.text=new Eo(G?G.text:null,ce,Z,Ee),this.icon=new Eo(G?G.icon:null,ce,ve,Ee)};Qi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Ii=function(G,ce,Z){this.text=G,this.icon=ce,this.skipFade=Z},Xo=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ao=function(G,ce,Z,ve,Ee){this.bucketInstanceId=G,this.featureIndex=ce,this.sourceLayerIndex=Z,this.bucketIndex=ve,this.tileID=Ee},io=function(G){this.crossSourceCollisions=G,this.maxGroupID=0,this.collisionGroups={}};function Lo(fe,G,ce,Z,ve){var Ee=t.getAnchorAlignment(fe),ot=-(Ee.horizontalAlign-.5)*G,xt=-(Ee.verticalAlign-.5)*ce,Wt=t.evaluateVariableOffset(fe,Z);return new t.Point(ot+Wt[0]*ve,xt+Wt[1]*ve)}function qo(fe,G,ce,Z,ve,Ee){var Ae=fe.x1,Ge=fe.x2,ot=fe.y1,xt=fe.y2,Wt=fe.anchorPointX,ar=fe.anchorPointY,Yt=new t.Point(G,ce);return Z&&Yt._rotate(ve?Ee:-Ee),{x1:Ae+Yt.x,y1:ot+Yt.y,x2:Ge+Yt.x,y2:xt+Yt.y,anchorPointX:Wt,anchorPointY:ar}}io.prototype.get=function(G){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[G]){var ce=++this.maxGroupID;this.collisionGroups[G]={ID:ce,predicate:function(Z){return Z.collisionGroupID===ce}}}return this.collisionGroups[G]};var wo=function(G,ce,Z,ve){this.transform=G.clone(),this.collisionIndex=new yi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ce,this.retainedQueryData={},this.collisionGroups=new io(Z),this.collisionCircleArrays={},this.prevPlacement=ve,ve&&(ve.prevPlacement=void 0),this.placedOrientations={}};function In(fe,G,ce,Z,ve){fe.emplaceBack(G?1:0,ce?1:0,Z||0,ve||0),fe.emplaceBack(G?1:0,ce?1:0,Z||0,ve||0),fe.emplaceBack(G?1:0,ce?1:0,Z||0,ve||0),fe.emplaceBack(G?1:0,ce?1:0,Z||0,ve||0)}wo.prototype.getBucketParts=function(G,ce,Z,ve){var Ee=Z.getBucket(ce),Ae=Z.latestFeatureIndex;if(Ee&&Ae&&ce.id===Ee.layerIds[0]){var Ge=Z.collisionBoxArray,ot=Ee.layers[0].layout,xt=Math.pow(2,this.transform.zoom-Z.tileID.overscaledZ),Wt=Z.tileSize/t.EXTENT,ar=this.transform.calculatePosMatrix(Z.tileID.toUnwrapped()),Yt="map"===ot.get("text-pitch-alignment"),Tt="map"===ot.get("text-rotation-alignment"),_t=gn(Z,1,this.transform.zoom),Nt=vr(ar,Yt,Tt,this.transform,_t),rr=null;if(Yt){var dr=nn(ar,Yt,Tt,this.transform,_t);rr=t.multiply([],this.transform.labelPlaneMatrix,dr)}this.retainedQueryData[Ee.bucketInstanceId]=new ao(Ee.bucketInstanceId,Ae,Ee.sourceLayerIndex,Ee.index,Z.tileID);var pr={bucket:Ee,layout:ot,posMatrix:ar,textLabelPlaneMatrix:Nt,labelToScreenMatrix:rr,scale:xt,textPixelRatio:Wt,holdingForFade:Z.holdingForFade(),collisionBoxArray:Ge,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Ee.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ee.sourceID)};if(ve)for(var Lr=0,Tr=Ee.sortKeyRanges;Lr<Tr.length;Lr+=1){var mr=Tr[Lr],Er=mr.sortKey,fr=mr.symbolInstanceStart,Br=mr.symbolInstanceEnd;G.push({sortKey:Er,symbolInstanceStart:fr,symbolInstanceEnd:Br,parameters:pr})}else G.push({symbolInstanceStart:0,symbolInstanceEnd:Ee.symbolInstances.length,parameters:pr})}},wo.prototype.attemptAnchorPlacement=function(G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt,ar,Yt,Tt,_t,Nt){var Tr,rr=[Yt.textOffset0,Yt.textOffset1],dr=Lo(G,Z,ve,rr,Ee),pr=this.collisionIndex.placeCollisionBox(qo(ce,dr.x,dr.y,Ae,Ge,this.transform.angle),ar,ot,xt,Wt.predicate);if(!Nt||0!==this.collisionIndex.placeCollisionBox(qo(Nt,dr.x,dr.y,Ae,Ge,this.transform.angle),ar,ot,xt,Wt.predicate).box.length)return pr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Yt.crossTileID]&&this.prevPlacement.placements[Yt.crossTileID]&&this.prevPlacement.placements[Yt.crossTileID].text&&(Tr=this.prevPlacement.variableOffsets[Yt.crossTileID].anchor),this.variableOffsets[Yt.crossTileID]={textOffset:rr,width:Z,height:ve,anchor:G,textBoxScale:Ee,prevAnchor:Tr},this.markUsedJustification(Tt,G,Yt,_t),Tt.allowVerticalPlacement&&(this.markUsedOrientation(Tt,_t,Yt),this.placedOrientations[Yt.crossTileID]=_t),{shift:dr,placedGlyphBoxes:pr}):void 0},wo.prototype.placeLayerBucketPart=function(G,ce,Z){var ve=this,Ee=G.parameters,Ae=Ee.bucket,Ge=Ee.layout,ot=Ee.posMatrix,xt=Ee.textLabelPlaneMatrix,Wt=Ee.labelToScreenMatrix,ar=Ee.textPixelRatio,Yt=Ee.holdingForFade,Tt=Ee.collisionBoxArray,_t=Ee.partiallyEvaluatedTextSize,Nt=Ee.collisionGroup,rr=Ge.get("text-optional"),dr=Ge.get("icon-optional"),pr=Ge.get("text-allow-overlap"),Lr=Ge.get("icon-allow-overlap"),Tr="map"===Ge.get("text-rotation-alignment"),mr="map"===Ge.get("text-pitch-alignment"),Er="none"!==Ge.get("icon-text-fit"),fr="viewport-y"===Ge.get("symbol-z-order"),Br=pr&&(Lr||!Ae.hasIconData()||dr),$r=Lr&&(pr||!Ae.hasTextData()||rr);!Ae.collisionArrays&&Tt&&Ae.deserializeCollisionBoxes(Tt);var ln=function(On,Zn){if(!ce[On.crossTileID]){if(Yt)return void(ve.placements[On.crossTileID]=new Ii(!1,!1,!1));var Yn=!1,ua=!1,_a=!0,Ci=null,Ei={box:null,offscreen:null},qi={box:null,offscreen:null},di=null,Fi=null,ho=null,Ko=0,uu=0,Ku=0;Zn.textFeatureIndex?Ko=Zn.textFeatureIndex:On.useRuntimeCollisionCircles&&(Ko=On.featureIndex),Zn.verticalTextFeatureIndex&&(uu=Zn.verticalTextFeatureIndex);var Iu=Zn.textBox;if(Iu){var wf=function(je){var et=t.WritingMode.horizontal;if(Ae.allowVerticalPlacement&&!je&&ve.prevPlacement){var it=ve.prevPlacement.placedOrientations[On.crossTileID];it&&(ve.placedOrientations[On.crossTileID]=it,et=it,ve.markUsedOrientation(Ae,et,On))}return et},kf=function(je,et){if(Ae.allowVerticalPlacement&&On.numVerticalGlyphVertices>0&&Zn.verticalTextBox)for(var it=0,vt=Ae.writingModes;it<vt.length&&(vt[it]===t.WritingMode.vertical?(Ei=et(),qi=Ei):Ei=je(),!(Ei&&Ei.box&&Ei.box.length));it+=1);else Ei=je()};if(Ge.get("text-variable-anchor")){var fu=Ge.get("text-variable-anchor");if(ve.prevPlacement&&ve.prevPlacement.variableOffsets[On.crossTileID]){var Hl=ve.prevPlacement.variableOffsets[On.crossTileID];fu.indexOf(Hl.anchor)>0&&(fu=fu.filter(function(je){return je!==Hl.anchor})).unshift(Hl.anchor)}var Ju=function(je,et,it){for(var vt=je.x2-je.x1,Ht=je.y2-je.y1,Qt=On.textBoxScale,Zt=Er&&!Lr?et:null,jt={box:[],offscreen:!1},gr=pr?2*fu.length:fu.length,Ar=0;Ar<gr;++Ar){var Fr=fu[Ar%fu.length],Xr=Ar>=fu.length,pn=ve.attemptAnchorPlacement(Fr,je,vt,Ht,Qt,Tr,mr,ar,ot,Nt,Xr,On,Ae,it,Zt);if(pn&&(jt=pn.placedGlyphBoxes)&&jt.box&&jt.box.length){Yn=!0,Ci=pn.shift;break}}return jt};kf(function(){return Ju(Iu,Zn.iconBox,t.WritingMode.horizontal)},function(){var je=Zn.verticalTextBox,et=Ei&&Ei.box&&Ei.box.length;return Ae.allowVerticalPlacement&&!et&&On.numVerticalGlyphVertices>0&&je?Ju(je,Zn.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Ei&&(Yn=Ei.box,_a=Ei.offscreen);var lc=wf(Ei&&Ei.box);if(!Yn&&ve.prevPlacement){var $f=ve.prevPlacement.variableOffsets[On.crossTileID];$f&&(ve.variableOffsets[On.crossTileID]=$f,ve.markUsedJustification(Ae,$f.anchor,On,lc))}}else{var Tf=function(je,et){var it=ve.collisionIndex.placeCollisionBox(je,pr,ar,ot,Nt.predicate);return it&&it.box&&it.box.length&&(ve.markUsedOrientation(Ae,et,On),ve.placedOrientations[On.crossTileID]=et),it};kf(function(){return Tf(Iu,t.WritingMode.horizontal)},function(){var je=Zn.verticalTextBox;return Ae.allowVerticalPlacement&&On.numVerticalGlyphVertices>0&&je?Tf(je,t.WritingMode.vertical):{box:null,offscreen:null}}),wf(Ei&&Ei.box&&Ei.box.length)}}if(Yn=(di=Ei)&&di.box&&di.box.length>0,_a=di&&di.offscreen,On.useRuntimeCollisionCircles){var Ks=Ae.text.placedSymbolArray.get(On.centerJustifiedTextSymbolIndex),ac=t.evaluateSizeForFeature(Ae.textSizeData,_t,Ks),uc=Ge.get("text-padding"),vl=On.collisionCircleDiameter;Fi=ve.collisionIndex.placeCollisionCircles(pr,Ks,Ae.lineVertexArray,Ae.glyphOffsetArray,ac,ot,xt,Wt,Z,mr,Nt.predicate,vl,uc),Yn=pr||Fi.circles.length>0&&!Fi.collisionDetected,_a=_a&&Fi.offscreen}if(Zn.iconFeatureIndex&&(Ku=Zn.iconFeatureIndex),Zn.iconBox){var ic=function(je){var et=Er&&Ci?qo(je,Ci.x,Ci.y,Tr,mr,ve.transform.angle):je;return ve.collisionIndex.placeCollisionBox(et,Lr,ar,ot,Nt.predicate)};ua=qi&&qi.box&&qi.box.length&&Zn.verticalIconBox?(ho=ic(Zn.verticalIconBox)).box.length>0:(ho=ic(Zn.iconBox)).box.length>0,_a=_a&&ho.offscreen}var oc=rr||0===On.numHorizontalGlyphVertices&&0===On.numVerticalGlyphVertices,pc=dr||0===On.numIconVertices;if(oc||pc?pc?oc||(ua=ua&&Yn):Yn=ua&&Yn:ua=Yn=ua&&Yn,Yn&&di&&di.box&&(qi&&qi.box&&uu?ve.collisionIndex.insertCollisionBox(di.box,Ge.get("text-ignore-placement"),Ae.bucketInstanceId,uu,Nt.ID):ve.collisionIndex.insertCollisionBox(di.box,Ge.get("text-ignore-placement"),Ae.bucketInstanceId,Ko,Nt.ID)),ua&&ho&&ve.collisionIndex.insertCollisionBox(ho.box,Ge.get("icon-ignore-placement"),Ae.bucketInstanceId,Ku,Nt.ID),Fi&&(Yn&&ve.collisionIndex.insertCollisionCircles(Fi.circles,Ge.get("text-ignore-placement"),Ae.bucketInstanceId,Ko,Nt.ID),Z)){var me=Ae.bucketInstanceId,Me=ve.collisionCircleArrays[me];void 0===Me&&(Me=ve.collisionCircleArrays[me]=new Xo);for(var Ve=0;Ve<Fi.circles.length;Ve+=4)Me.circles.push(Fi.circles[Ve+0]),Me.circles.push(Fi.circles[Ve+1]),Me.circles.push(Fi.circles[Ve+2]),Me.circles.push(Fi.collisionDetected?1:0)}ve.placements[On.crossTileID]=new Ii(Yn||Br,ua||$r,_a||Ae.justReloaded),ce[On.crossTileID]=!0}};if(fr)for(var zn=Ae.getSortedSymbolIndexes(this.transform.angle),En=zn.length-1;En>=0;--En){var Nn=zn[En];ln(Ae.symbolInstances.get(Nn),Ae.collisionArrays[Nn])}else for(var ya=G.symbolInstanceStart;ya<G.symbolInstanceEnd;ya++)ln(Ae.symbolInstances.get(ya),Ae.collisionArrays[ya]);if(Z&&Ae.bucketInstanceId in this.collisionCircleArrays){var aa=this.collisionCircleArrays[Ae.bucketInstanceId];t.invert(aa.invProjMatrix,ot),aa.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ae.justReloaded=!1},wo.prototype.markUsedJustification=function(G,ce,Z,ve){var Ae,Ee={left:Z.leftJustifiedTextSymbolIndex,center:Z.centerJustifiedTextSymbolIndex,right:Z.rightJustifiedTextSymbolIndex};Ae=ve===t.WritingMode.vertical?Z.verticalPlacedTextSymbolIndex:Ee[t.getAnchorJustification(ce)];for(var ot=0,xt=[Z.leftJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.rightJustifiedTextSymbolIndex,Z.verticalPlacedTextSymbolIndex];ot<xt.length;ot+=1){var Wt=xt[ot];Wt>=0&&(G.text.placedSymbolArray.get(Wt).crossTileID=Ae>=0&&Wt!==Ae?0:Z.crossTileID)}},wo.prototype.markUsedOrientation=function(G,ce,Z){for(var ve=ce===t.WritingMode.horizontal||ce===t.WritingMode.horizontalOnly?ce:0,Ee=ce===t.WritingMode.vertical?ce:0,Ge=0,ot=[Z.leftJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.rightJustifiedTextSymbolIndex];Ge<ot.length;Ge+=1){var xt=ot[Ge];G.text.placedSymbolArray.get(xt).placedOrientation=ve}Z.verticalPlacedTextSymbolIndex&&(G.text.placedSymbolArray.get(Z.verticalPlacedTextSymbolIndex).placedOrientation=Ee)},wo.prototype.commit=function(G){this.commitTime=G,this.zoomAtLastRecencyCheck=this.transform.zoom;var ce=this.prevPlacement,Z=!1;this.prevZoomAdjustment=ce?ce.zoomAdjustment(this.transform.zoom):0;var ve=ce?ce.symbolFadeChange(G):1,Ee=ce?ce.opacities:{},Ae=ce?ce.variableOffsets:{},Ge=ce?ce.placedOrientations:{};for(var ot in this.placements){var xt=this.placements[ot],Wt=Ee[ot];Wt?(this.opacities[ot]=new Qi(Wt,ve,xt.text,xt.icon),Z=Z||xt.text!==Wt.text.placed||xt.icon!==Wt.icon.placed):(this.opacities[ot]=new Qi(null,ve,xt.text,xt.icon,xt.skipFade),Z=Z||xt.text||xt.icon)}for(var ar in Ee){var Yt=Ee[ar];if(!this.opacities[ar]){var Tt=new Qi(Yt,ve,!1,!1);Tt.isHidden()||(this.opacities[ar]=Tt,Z=Z||Yt.text.placed||Yt.icon.placed)}}for(var _t in Ae)!this.variableOffsets[_t]&&this.opacities[_t]&&!this.opacities[_t].isHidden()&&(this.variableOffsets[_t]=Ae[_t]);for(var Nt in Ge)!this.placedOrientations[Nt]&&this.opacities[Nt]&&!this.opacities[Nt].isHidden()&&(this.placedOrientations[Nt]=Ge[Nt]);Z?this.lastPlacementChangeTime=G:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=ce?ce.lastPlacementChangeTime:G)},wo.prototype.updateLayerOpacities=function(G,ce){for(var Z={},ve=0,Ee=ce;ve<Ee.length;ve+=1){var Ae=Ee[ve],Ge=Ae.getBucket(G);Ge&&Ae.latestFeatureIndex&&G.id===Ge.layerIds[0]&&this.updateBucketOpacities(Ge,Z,Ae.collisionBoxArray)}},wo.prototype.updateBucketOpacities=function(G,ce,Z){var ve=this;G.hasTextData()&&G.text.opacityVertexArray.clear(),G.hasIconData()&&G.icon.opacityVertexArray.clear(),G.hasIconCollisionBoxData()&&G.iconCollisionBox.collisionVertexArray.clear(),G.hasTextCollisionBoxData()&&G.textCollisionBox.collisionVertexArray.clear();var Ee=G.layers[0].layout,Ae=new Qi(null,0,!1,!1,!0),Ge=Ee.get("text-allow-overlap"),ot=Ee.get("icon-allow-overlap"),xt=Ee.get("text-variable-anchor"),Wt="map"===Ee.get("text-rotation-alignment"),ar="map"===Ee.get("text-pitch-alignment"),Yt="none"!==Ee.get("icon-text-fit"),Tt=new Qi(null,0,Ge&&(ot||!G.hasIconData()||Ee.get("icon-optional")),ot&&(Ge||!G.hasTextData()||Ee.get("text-optional")),!0);!G.collisionArrays&&Z&&(G.hasIconCollisionBoxData()||G.hasTextCollisionBoxData())&&G.deserializeCollisionBoxes(Z);for(var _t=function(pr,Lr,Tr){for(var mr=0;mr<Lr/4;mr++)pr.opacityVertexArray.emplaceBack(Tr)},Nt=function(pr){var Lr=G.symbolInstances.get(pr),Tr=Lr.numHorizontalGlyphVertices,mr=Lr.numVerticalGlyphVertices,Er=Lr.crossTileID,fr=ce[Er],Br=ve.opacities[Er];fr?Br=Ae:Br||(Br=Tt,ve.opacities[Er]=Br),ce[Er]=!0;var $r=Tr>0||mr>0,ln=Lr.numIconVertices>0,zn=ve.placedOrientations[Lr.crossTileID],En=zn===t.WritingMode.vertical,Nn=zn===t.WritingMode.horizontal||zn===t.WritingMode.horizontalOnly;if($r){var ya=To(Br.text),aa=En?va:ya;_t(G.text,Tr,aa);var On=Nn?va:ya;_t(G.text,mr,On);var Zn=Br.text.isHidden();[Lr.rightJustifiedTextSymbolIndex,Lr.centerJustifiedTextSymbolIndex,Lr.leftJustifiedTextSymbolIndex].forEach(function(Ku){Ku>=0&&(G.text.placedSymbolArray.get(Ku).hidden=Zn||En?1:0)}),Lr.verticalPlacedTextSymbolIndex>=0&&(G.text.placedSymbolArray.get(Lr.verticalPlacedTextSymbolIndex).hidden=Zn||Nn?1:0);var Yn=ve.variableOffsets[Lr.crossTileID];Yn&&ve.markUsedJustification(G,Yn.anchor,Lr,zn);var ua=ve.placedOrientations[Lr.crossTileID];ua&&(ve.markUsedJustification(G,"left",Lr,ua),ve.markUsedOrientation(G,ua,Lr))}if(ln){var _a=To(Br.icon),Ci=!(Yt&&Lr.verticalPlacedIconSymbolIndex&&En);if(Lr.placedIconSymbolIndex>=0){var Ei=Ci?_a:va;_t(G.icon,Lr.numIconVertices,Ei),G.icon.placedSymbolArray.get(Lr.placedIconSymbolIndex).hidden=Br.icon.isHidden()}if(Lr.verticalPlacedIconSymbolIndex>=0){var qi=Ci?va:_a;_t(G.icon,Lr.numVerticalIconVertices,qi),G.icon.placedSymbolArray.get(Lr.verticalPlacedIconSymbolIndex).hidden=Br.icon.isHidden()}}if(G.hasIconCollisionBoxData()||G.hasTextCollisionBoxData()){var di=G.collisionArrays[pr];if(di){var Fi=new t.Point(0,0);if(di.textBox||di.verticalTextBox){var ho=!0;if(xt){var Ko=ve.variableOffsets[Er];Ko?(Fi=Lo(Ko.anchor,Ko.width,Ko.height,Ko.textOffset,Ko.textBoxScale),Wt&&Fi._rotate(ar?ve.transform.angle:-ve.transform.angle)):ho=!1}di.textBox&&In(G.textCollisionBox.collisionVertexArray,Br.text.placed,!ho||En,Fi.x,Fi.y),di.verticalTextBox&&In(G.textCollisionBox.collisionVertexArray,Br.text.placed,!ho||Nn,Fi.x,Fi.y)}var uu=Boolean(!Nn&&di.verticalIconBox);di.iconBox&&In(G.iconCollisionBox.collisionVertexArray,Br.icon.placed,uu,Yt?Fi.x:0,Yt?Fi.y:0),di.verticalIconBox&&In(G.iconCollisionBox.collisionVertexArray,Br.icon.placed,!uu,Yt?Fi.x:0,Yt?Fi.y:0)}}},rr=0;rr<G.symbolInstances.length;rr++)Nt(rr);if(G.sortFeatures(this.transform.angle),this.retainedQueryData[G.bucketInstanceId]&&(this.retainedQueryData[G.bucketInstanceId].featureSortOrder=G.featureSortOrder),G.hasTextData()&&G.text.opacityVertexBuffer&&G.text.opacityVertexBuffer.updateData(G.text.opacityVertexArray),G.hasIconData()&&G.icon.opacityVertexBuffer&&G.icon.opacityVertexBuffer.updateData(G.icon.opacityVertexArray),G.hasIconCollisionBoxData()&&G.iconCollisionBox.collisionVertexBuffer&&G.iconCollisionBox.collisionVertexBuffer.updateData(G.iconCollisionBox.collisionVertexArray),G.hasTextCollisionBoxData()&&G.textCollisionBox.collisionVertexBuffer&&G.textCollisionBox.collisionVertexBuffer.updateData(G.textCollisionBox.collisionVertexArray),G.bucketInstanceId in this.collisionCircleArrays){var dr=this.collisionCircleArrays[G.bucketInstanceId];G.placementInvProjMatrix=dr.invProjMatrix,G.placementViewportMatrix=dr.viewportMatrix,G.collisionCircleArray=dr.circles,delete this.collisionCircleArrays[G.bucketInstanceId]}},wo.prototype.symbolFadeChange=function(G){return 0===this.fadeDuration?1:(G-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},wo.prototype.zoomAdjustment=function(G){return Math.max(0,(this.transform.zoom-G)/1.5)},wo.prototype.hasTransitions=function(G){return this.stale||G-this.lastPlacementChangeTime<this.fadeDuration},wo.prototype.stillRecent=function(G,ce){var Z=this.zoomAtLastRecencyCheck===ce?1-this.zoomAdjustment(ce):1;return this.zoomAtLastRecencyCheck=ce,this.commitTime+this.fadeDuration*Z>G},wo.prototype.setStale=function(){this.stale=!0};var Ta=Math.pow(2,25),ls=Math.pow(2,24),Do=Math.pow(2,17),oo=Math.pow(2,16),ys=Math.pow(2,9),as=Math.pow(2,8),el=Math.pow(2,1);function To(fe){if(0===fe.opacity&&!fe.placed)return 0;if(1===fe.opacity&&fe.placed)return 4294967295;var G=fe.placed?1:0,ce=Math.floor(127*fe.opacity);return ce*Ta+G*ls+ce*Do+G*oo+ce*ys+G*as+ce*el+G}var va=0,Ai=function(G){this._sortAcrossTiles="viewport-y"!==G.layout.get("symbol-z-order")&&void 0!==G.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ai.prototype.continuePlacement=function(G,ce,Z,ve,Ee){for(var Ae=this._bucketParts;this._currentTileIndex<G.length;){var Ge=G[this._currentTileIndex];if(ce.getBucketParts(Ae,ve,Ge,this._sortAcrossTiles),this._currentTileIndex++,Ee())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ae.sort(function(xt,Wt){return xt.sortKey-Wt.sortKey}));this._currentPartIndex<Ae.length;){var ot=Ae[this._currentPartIndex];if(ce.placeLayerBucketPart(ot,this._seenCrossTileIDs,Z),this._currentPartIndex++,Ee())return!0}return!1};var bi=function(G,ce,Z,ve,Ee,Ae,Ge){this.placement=new wo(G,Ee,Ae,Ge),this._currentPlacementIndex=ce.length-1,this._forceFullPlacement=Z,this._showCollisionBoxes=ve,this._done=!1};bi.prototype.isDone=function(){return this._done},bi.prototype.continuePlacement=function(G,ce,Z){for(var ve=this,Ee=t.browser.now(),Ae=function(){var ar=t.browser.now()-Ee;return!ve._forceFullPlacement&&ar>2};this._currentPlacementIndex>=0;){var ot=ce[G[this._currentPlacementIndex]],xt=this.placement.collisionIndex.transform.zoom;if("symbol"===ot.type&&(!ot.minzoom||ot.minzoom<=xt)&&(!ot.maxzoom||ot.maxzoom>xt)){if(this._inProgressLayer||(this._inProgressLayer=new Ai(ot)),this._inProgressLayer.continuePlacement(Z[ot.source],this.placement,this._showCollisionBoxes,ot,Ae))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},bi.prototype.commit=function(G){return this.placement.commit(G),this.placement};var so=512/t.EXTENT/2,eo=function(G,ce,Z){this.tileID=G,this.indexedSymbolInstances={},this.bucketInstanceId=Z;for(var ve=0;ve<ce.length;ve++){var Ee=ce.get(ve),Ae=Ee.key;this.indexedSymbolInstances[Ae]||(this.indexedSymbolInstances[Ae]=[]),this.indexedSymbolInstances[Ae].push({crossTileID:Ee.crossTileID,coord:this.getScaledCoordinates(Ee,G)})}};eo.prototype.getScaledCoordinates=function(G,ce){var Z=ce.canonical.z-this.tileID.canonical.z,ve=so/Math.pow(2,Z);return{x:Math.floor((ce.canonical.x*t.EXTENT+G.anchorX)*ve),y:Math.floor((ce.canonical.y*t.EXTENT+G.anchorY)*ve)}},eo.prototype.findMatches=function(G,ce,Z){for(var ve=this.tileID.canonical.z<ce.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ce.canonical.z),Ee=0;Ee<G.length;Ee++){var Ae=G.get(Ee);if(!Ae.crossTileID){var Ge=this.indexedSymbolInstances[Ae.key];if(Ge)for(var ot=this.getScaledCoordinates(Ae,ce),xt=0,Wt=Ge;xt<Wt.length;xt+=1){var ar=Wt[xt];if(Math.abs(ar.coord.x-ot.x)<=ve&&Math.abs(ar.coord.y-ot.y)<=ve&&!Z[ar.crossTileID]){Z[ar.crossTileID]=!0,Ae.crossTileID=ar.crossTileID;break}}}}};var fi=function(){this.maxCrossTileID=0};fi.prototype.generate=function(){return++this.maxCrossTileID};var Ql=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ql.prototype.handleWrapJump=function(G){var ce=Math.round((G-this.lng)/360);if(0!==ce)for(var Z in this.indexes){var ve=this.indexes[Z],Ee={};for(var Ae in ve){var Ge=ve[Ae];Ge.tileID=Ge.tileID.unwrapTo(Ge.tileID.wrap+ce),Ee[Ge.tileID.key]=Ge}this.indexes[Z]=Ee}this.lng=G},Ql.prototype.addBucket=function(G,ce,Z){if(this.indexes[G.overscaledZ]&&this.indexes[G.overscaledZ][G.key]){if(this.indexes[G.overscaledZ][G.key].bucketInstanceId===ce.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(G.overscaledZ,this.indexes[G.overscaledZ][G.key])}for(var ve=0;ve<ce.symbolInstances.length;ve++)ce.symbolInstances.get(ve).crossTileID=0;this.usedCrossTileIDs[G.overscaledZ]||(this.usedCrossTileIDs[G.overscaledZ]={});var Ae=this.usedCrossTileIDs[G.overscaledZ];for(var Ge in this.indexes){var ot=this.indexes[Ge];if(Number(Ge)>G.overscaledZ)for(var xt in ot){var Wt=ot[xt];Wt.tileID.isChildOf(G)&&Wt.findMatches(ce.symbolInstances,G,Ae)}else{var Yt=ot[G.scaledTo(Number(Ge)).key];Yt&&Yt.findMatches(ce.symbolInstances,G,Ae)}}for(var Tt=0;Tt<ce.symbolInstances.length;Tt++){var _t=ce.symbolInstances.get(Tt);_t.crossTileID||(_t.crossTileID=Z.generate(),Ae[_t.crossTileID]=!0)}return void 0===this.indexes[G.overscaledZ]&&(this.indexes[G.overscaledZ]={}),this.indexes[G.overscaledZ][G.key]=new eo(G,ce.symbolInstances,ce.bucketInstanceId),!0},Ql.prototype.removeBucketCrossTileIDs=function(G,ce){for(var Z in ce.indexedSymbolInstances)for(var ve=0,Ee=ce.indexedSymbolInstances[Z];ve<Ee.length;ve+=1){var Ae=Ee[ve];delete this.usedCrossTileIDs[G][Ae.crossTileID]}},Ql.prototype.removeStaleBuckets=function(G){var ce=!1;for(var Z in this.indexes){var ve=this.indexes[Z];for(var Ee in ve)G[ve[Ee].bucketInstanceId]||(this.removeBucketCrossTileIDs(Z,ve[Ee]),delete ve[Ee],ce=!0)}return ce};var Os=function(){this.layerIndexes={},this.crossTileIDs=new fi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Os.prototype.addLayer=function(G,ce,Z){var ve=this.layerIndexes[G.id];void 0===ve&&(ve=this.layerIndexes[G.id]=new Ql);var Ee=!1,Ae={};ve.handleWrapJump(Z);for(var Ge=0,ot=ce;Ge<ot.length;Ge+=1){var xt=ot[Ge],Wt=xt.getBucket(G);!Wt||G.id!==Wt.layerIds[0]||(Wt.bucketInstanceId||(Wt.bucketInstanceId=++this.maxBucketInstanceId),ve.addBucket(xt.tileID,Wt,this.crossTileIDs)&&(Ee=!0),Ae[Wt.bucketInstanceId]=!0)}return ve.removeStaleBuckets(Ae)&&(Ee=!0),Ee},Os.prototype.pruneUnusedLayers=function(G){var ce={};for(var Z in G.forEach(function(ve){ce[ve]=!0}),this.layerIndexes)ce[Z]||delete this.layerIndexes[Z]};var ms=function(fe,G){return t.emitValidationErrors(fe,G&&G.filter(function(ce){return"source.canvas"!==ce.identifier}))},tl=t.pick(wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ro=t.pick(wt,["setCenter","setZoom","setBearing","setPitch"]),yo=Kt(),Ls=function(fe){function G(ce,Z){var ve=this;void 0===Z&&(Z={}),fe.call(this),this.map=ce,this.dispatcher=new _(Jt(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new S(ce._requestManager,Z.localIdeographFontFamily),this.lineAtlas=new F(256,512),this.crossTileSymbolIndex=new Os,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Ee=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(Ae){var Ge={pluginStatus:Ae.pluginStatus,pluginURL:Ae.pluginURL};Ee.dispatcher.broadcast("syncRTLPluginState",Ge,function(ot,xt){if(t.triggerPluginCompletionEvent(ot),xt&&xt.every(function(Yt){return Yt}))for(var ar in Ee.sourceCaches)Ee.sourceCaches[ar].reload()})}),this.on("data",function(Ae){if("source"===Ae.dataType&&"metadata"===Ae.sourceDataType){var Ge=ve.sourceCaches[Ae.sourceId];if(Ge){var ot=Ge.getSource();if(ot&&ot.vectorLayerIds)for(var xt in ve._layers){var Wt=ve._layers[xt];Wt.source===ot.id&&ve._validateLayer(Wt)}}}})}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(Z,ve){var Ee=this;void 0===ve&&(ve={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Ae="boolean"==typeof ve.validate?ve.validate:!t.isMapboxURL(Z);Z=this.map._requestManager.normalizeStyleURL(Z,ve.accessToken);var Ge=this.map._requestManager.transformRequest(Z,t.ResourceType.Style);this._request=t.getJSON(Ge,function(ot,xt){Ee._request=null,ot?Ee.fire(new t.ErrorEvent(ot)):xt&&Ee._load(xt,Ae)})},G.prototype.loadJSON=function(Z,ve){var Ee=this;void 0===ve&&(ve={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Ee._request=null,Ee._load(Z,!1!==ve.validate)})},G.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(yo,!1)},G.prototype._load=function(Z,ve){if(!ve||!ms(this,t.validateStyle(Z))){for(var Ee in this._loaded=!0,this.stylesheet=Z,Z.sources)this.addSource(Ee,Z.sources[Ee],{validate:!1});Z.sprite?this._loadSprite(Z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Z.glyphs);var Ae=Ut(this.stylesheet.layers);this._order=Ae.map(function(Wt){return Wt.id}),this._layers={},this._serializedLayers={};for(var Ge=0,ot=Ae;Ge<ot.length;Ge+=1){var xt=ot[Ge];(xt=t.createStyleLayer(xt)).setEventedParent(this,{layer:{id:xt.id}}),this._layers[xt.id]=xt,this._serializedLayers[xt.id]=xt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new R(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},G.prototype._loadSprite=function(Z){var ve=this;this._spriteRequest=l(Z,this.map._requestManager,function(Ee,Ae){if(ve._spriteRequest=null,Ee)ve.fire(new t.ErrorEvent(Ee));else if(Ae)for(var Ge in Ae)ve.imageManager.addImage(Ge,Ae[Ge]);ve.imageManager.setLoaded(!0),ve._availableImages=ve.imageManager.listImages(),ve.dispatcher.broadcast("setImages",ve._availableImages),ve.fire(new t.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(Z){var ve=this.sourceCaches[Z.source];if(ve){var Ee=Z.sourceLayer;if(Ee){var Ae=ve.getSource();("geojson"===Ae.type||Ae.vectorLayerIds&&-1===Ae.vectorLayerIds.indexOf(Ee))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Ee+'" does not exist on source "'+Ae.id+'" as specified by style layer "'+Z.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var Z in this.sourceCaches)if(!this.sourceCaches[Z].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(Z){for(var ve=[],Ee=0,Ae=Z;Ee<Ae.length;Ee+=1){var Ge=Ae[Ee],ot=this._layers[Ge];"custom"!==ot.type&&ve.push(ot.serialize())}return ve},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Z in this.sourceCaches)if(this.sourceCaches[Z].hasTransition())return!0;for(var ve in this._layers)if(this._layers[ve].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(Z){if(this._loaded){var ve=this._changed;if(this._changed){var Ee=Object.keys(this._updatedLayers),Ae=Object.keys(this._removedLayers);for(var Ge in(Ee.length||Ae.length)&&this._updateWorkerLayers(Ee,Ae),this._updatedSources){var ot=this._updatedSources[Ge];"reload"===ot?this._reloadSource(Ge):"clear"===ot&&this._clearSource(Ge)}for(var xt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[xt].updateTransitions(Z);this.light.updateTransitions(Z),this._resetUpdates()}var Wt={};for(var ar in this.sourceCaches){var Yt=this.sourceCaches[ar];Wt[ar]=Yt.used,Yt.used=!1}for(var Tt=0,_t=this._order;Tt<_t.length;Tt+=1){var Nt=_t[Tt],rr=this._layers[Nt];rr.recalculate(Z,this._availableImages),!rr.isHidden(Z.zoom)&&rr.source&&(this.sourceCaches[rr.source].used=!0)}for(var dr in Wt){var pr=this.sourceCaches[dr];Wt[dr]!==pr.used&&pr.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:dr}))}this.light.recalculate(Z),this.z=Z.zoom,ve&&this.fire(new t.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var Z=Object.keys(this._changedImages);if(Z.length){for(var ve in this.sourceCaches)this.sourceCaches[ve].reloadTilesForDependencies(["icons","patterns"],Z);this._changedImages={}}},G.prototype._updateWorkerLayers=function(Z,ve){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Z),removedIds:ve})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(Z){var ve=this;if(this._checkLoaded(),ms(this,t.validateStyle(Z)))return!1;(Z=t.clone$1(Z)).layers=Ut(Z.layers);var Ee=sa(this.serialize(),Z).filter(function(Ge){return!(Ge.command in Ro)});if(0===Ee.length)return!1;var Ae=Ee.filter(function(Ge){return!(Ge.command in tl)});if(Ae.length>0)throw new Error("Unimplemented: "+Ae.map(function(Ge){return Ge.command}).join(", ")+".");return Ee.forEach(function(Ge){"setTransition"!==Ge.command&&ve[Ge.command].apply(ve,Ge.args)}),this.stylesheet=Z,!0},G.prototype.addImage=function(Z,ve){if(this.getImage(Z))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(Z,ve),this._afterImageUpdated(Z)},G.prototype.updateImage=function(Z,ve){this.imageManager.updateImage(Z,ve)},G.prototype.getImage=function(Z){return this.imageManager.getImage(Z)},G.prototype.removeImage=function(Z){if(!this.getImage(Z))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(Z),this._afterImageUpdated(Z)},G.prototype._afterImageUpdated=function(Z){this._availableImages=this.imageManager.listImages(),this._changedImages[Z]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(Z,ve,Ee){var Ae=this;if(void 0===Ee&&(Ee={}),this._checkLoaded(),void 0!==this.sourceCaches[Z])throw new Error("There is already a source with this ID");if(!ve.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(ve).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(ve.type)>=0&&this._validate(t.validateStyle.source,"sources."+Z,ve,null,Ee))){this.map&&this.map._collectResourceTiming&&(ve.collectResourceTiming=!0);var xt=this.sourceCaches[Z]=new sr(Z,ve,this.dispatcher);xt.style=this,xt.setEventedParent(this,function(){return{isSourceLoaded:Ae.loaded(),source:xt.serialize(),sourceId:Z}}),xt.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(Z){if(this._checkLoaded(),void 0===this.sourceCaches[Z])throw new Error("There is no source with this ID");for(var ve in this._layers)if(this._layers[ve].source===Z)return this.fire(new t.ErrorEvent(new Error('Source "'+Z+'" cannot be removed while layer "'+ve+'" is using it.')));var Ee=this.sourceCaches[Z];delete this.sourceCaches[Z],delete this._updatedSources[Z],Ee.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Z})),Ee.setEventedParent(null),Ee.clearTiles(),Ee.onRemove&&Ee.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(Z,ve){this._checkLoaded(),this.sourceCaches[Z].getSource().setData(ve),this._changed=!0},G.prototype.getSource=function(Z){return this.sourceCaches[Z]&&this.sourceCaches[Z].getSource()},G.prototype.addLayer=function(Z,ve,Ee){void 0===Ee&&(Ee={}),this._checkLoaded();var Ae=Z.id;if(this.getLayer(Ae))this.fire(new t.ErrorEvent(new Error('Layer with id "'+Ae+'" already exists on this map')));else{var Ge;if("custom"===Z.type){if(ms(this,t.validateCustomStyleLayer(Z)))return;Ge=t.createStyleLayer(Z)}else{if("object"==typeof Z.source&&(this.addSource(Ae,Z.source),Z=t.clone$1(Z),Z=t.extend(Z,{source:Ae})),this._validate(t.validateStyle.layer,"layers."+Ae,Z,{arrayIndex:-1},Ee))return;Ge=t.createStyleLayer(Z),this._validateLayer(Ge),Ge.setEventedParent(this,{layer:{id:Ae}}),this._serializedLayers[Ge.id]=Ge.serialize()}var ot=ve?this._order.indexOf(ve):this._order.length;if(ve&&-1===ot)this.fire(new t.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.')));else{if(this._order.splice(ot,0,Ae),this._layerOrderChanged=!0,this._layers[Ae]=Ge,this._removedLayers[Ae]&&Ge.source&&"custom"!==Ge.type){var xt=this._removedLayers[Ae];delete this._removedLayers[Ae],xt.type!==Ge.type?this._updatedSources[Ge.source]="clear":(this._updatedSources[Ge.source]="reload",this.sourceCaches[Ge.source].pause())}this._updateLayer(Ge),Ge.onAdd&&Ge.onAdd(this.map)}}},G.prototype.moveLayer=function(Z,ve){if(this._checkLoaded(),this._changed=!0,this._layers[Z]){if(Z!==ve){var Ae=this._order.indexOf(Z);this._order.splice(Ae,1);var Ge=ve?this._order.indexOf(ve):this._order.length;if(ve&&-1===Ge)return void this.fire(new t.ErrorEvent(new Error('Layer with id "'+ve+'" does not exist on this map.')));this._order.splice(Ge,0,Z),this._layerOrderChanged=!0}}else this.fire(new t.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(Z){this._checkLoaded();var ve=this._layers[Z];if(ve){ve.setEventedParent(null);var Ee=this._order.indexOf(Z);this._order.splice(Ee,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[Z]=ve,delete this._layers[Z],delete this._serializedLayers[Z],delete this._updatedLayers[Z],delete this._updatedPaintProps[Z],ve.onRemove&&ve.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(Z){return this._layers[Z]},G.prototype.hasLayer=function(Z){return Z in this._layers},G.prototype.setLayerZoomRange=function(Z,ve,Ee){this._checkLoaded();var Ae=this.getLayer(Z);Ae?Ae.minzoom===ve&&Ae.maxzoom===Ee||(null!=ve&&(Ae.minzoom=ve),null!=Ee&&(Ae.maxzoom=Ee),this._updateLayer(Ae)):this.fire(new t.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(Z,ve,Ee){void 0===Ee&&(Ee={}),this._checkLoaded();var Ae=this.getLayer(Z);if(Ae){if(!t.deepEqual(Ae.filter,ve)){if(null==ve)return Ae.filter=void 0,void this._updateLayer(Ae);this._validate(t.validateStyle.filter,"layers."+Ae.id+".filter",ve,null,Ee)||(Ae.filter=t.clone$1(ve),this._updateLayer(Ae))}}else this.fire(new t.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(Z){return t.clone$1(this.getLayer(Z).filter)},G.prototype.setLayoutProperty=function(Z,ve,Ee,Ae){void 0===Ae&&(Ae={}),this._checkLoaded();var Ge=this.getLayer(Z);Ge?t.deepEqual(Ge.getLayoutProperty(ve),Ee)||(Ge.setLayoutProperty(ve,Ee,Ae),this._updateLayer(Ge)):this.fire(new t.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(Z,ve){var Ee=this.getLayer(Z);if(Ee)return Ee.getLayoutProperty(ve);this.fire(new t.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(Z,ve,Ee,Ae){void 0===Ae&&(Ae={}),this._checkLoaded();var Ge=this.getLayer(Z);Ge?t.deepEqual(Ge.getPaintProperty(ve),Ee)||(Ge.setPaintProperty(ve,Ee,Ae)&&this._updateLayer(Ge),this._changed=!0,this._updatedPaintProps[Z]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+Z+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(Z,ve){return this.getLayer(Z).getPaintProperty(ve)},G.prototype.setFeatureState=function(Z,ve){this._checkLoaded();var Ee=Z.source,Ae=Z.sourceLayer,Ge=this.sourceCaches[Ee];if(void 0!==Ge){var ot=Ge.getSource().type;"geojson"===ot&&Ae?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ot||Ae?(void 0===Z.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Ge.setFeatureState(Ae,Z.id,ve)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(Z,ve){this._checkLoaded();var Ee=Z.source,Ae=this.sourceCaches[Ee];if(void 0!==Ae){var Ge=Ae.getSource().type,ot="vector"===Ge?Z.sourceLayer:void 0;"vector"!==Ge||ot?ve&&"string"!=typeof Z.id&&"number"!=typeof Z.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Ae.removeFeatureState(ot,Z.id,ve):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(Z){this._checkLoaded();var ve=Z.source,Ee=Z.sourceLayer,Ae=this.sourceCaches[ve];if(void 0!==Ae){if("vector"!==Ae.getSource().type||Ee)return void 0===Z.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Ae.getFeatureState(Ee,Z.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(Z){return Z.serialize()}),layers:this._serializeLayers(this._order)},function(Z){return void 0!==Z})},G.prototype._updateLayer=function(Z){this._updatedLayers[Z.id]=!0,Z.source&&!this._updatedSources[Z.source]&&"raster"!==this.sourceCaches[Z.source].getSource().type&&(this._updatedSources[Z.source]="reload",this.sourceCaches[Z.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(Z){for(var ve=this,Ee=function(Nn){return"fill-extrusion"===ve._layers[Nn].type},Ae={},Ge=[],ot=this._order.length-1;ot>=0;ot--){var xt=this._order[ot];if(Ee(xt)){Ae[xt]=ot;for(var Wt=0,ar=Z;Wt<ar.length;Wt+=1){var Tt=ar[Wt][xt];if(Tt)for(var _t=0,Nt=Tt;_t<Nt.length;_t+=1){var rr=Nt[_t];Ge.push(rr)}}}}Ge.sort(function(Nn,ya){return ya.intersectionZ-Nn.intersectionZ});for(var dr=[],pr=this._order.length-1;pr>=0;pr--){var Lr=this._order[pr];if(Ee(Lr))for(var Tr=Ge.length-1;Tr>=0;Tr--){var mr=Ge[Tr].feature;if(Ae[mr.layer.id]<pr)break;dr.push(mr),Ge.pop()}else for(var Er=0,fr=Z;Er<fr.length;Er+=1){var $r=fr[Er][Lr];if($r)for(var ln=0,zn=$r;ln<zn.length;ln+=1){var En=zn[ln];dr.push(En.feature)}}}return dr},G.prototype.queryRenderedFeatures=function(Z,ve,Ee){ve&&ve.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",ve.filter,null,ve);var Ae={};if(ve&&ve.layers){if(!Array.isArray(ve.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ge=0,ot=ve.layers;Ge<ot.length;Ge+=1){var xt=ot[Ge],Wt=this._layers[xt];if(!Wt)return this.fire(new t.ErrorEvent(new Error("The layer '"+xt+"' does not exist in the map's style and cannot be queried for features."))),[];Ae[Wt.source]=!0}}var ar=[];for(var Yt in ve.availableImages=this._availableImages,this.sourceCaches)ve.layers&&!Ae[Yt]||ar.push(X(this.sourceCaches[Yt],this._layers,this._serializedLayers,Z,ve,Ee));return this.placement&&ar.push(J(this._layers,this._serializedLayers,this.sourceCaches,Z,ve,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ar)},G.prototype.querySourceFeatures=function(Z,ve){ve&&ve.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",ve.filter,null,ve);var Ee=this.sourceCaches[Z];return Ee?ue(Ee,ve):[]},G.prototype.addSourceType=function(Z,ve,Ee){return G.getSourceType(Z)?Ee(new Error('A source type called "'+Z+'" already exists.')):(G.setSourceType(Z,ve),ve.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:Z,url:ve.workerSourceURL},Ee):Ee(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(Z,ve){void 0===ve&&(ve={}),this._checkLoaded();var Ee=this.light.getLight(),Ae=!1;for(var Ge in Z)if(!t.deepEqual(Z[Ge],Ee[Ge])){Ae=!0;break}if(Ae){var ot={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(Z,ve),this.light.updateTransitions(ot)}},G.prototype._validate=function(Z,ve,Ee,Ae,Ge){return void 0===Ge&&(Ge={}),(!Ge||!1!==Ge.validate)&&ms(this,Z.call(t.validateStyle,t.extend({key:ve,style:this.serialize(),value:Ee,styleSpec:t.styleSpec},Ae)))},G.prototype._remove=function(){for(var Z in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[Z].setEventedParent(null);for(var Ee in this.sourceCaches)this.sourceCaches[Ee].clearTiles(),this.sourceCaches[Ee].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(Z){this.sourceCaches[Z].clearTiles()},G.prototype._reloadSource=function(Z){this.sourceCaches[Z].resume(),this.sourceCaches[Z].reload()},G.prototype._updateSources=function(Z){for(var ve in this.sourceCaches)this.sourceCaches[ve].update(Z)},G.prototype._generateCollisionBoxes=function(){for(var Z in this.sourceCaches)this._reloadSource(Z)},G.prototype._updatePlacement=function(Z,ve,Ee,Ae,Ge){void 0===Ge&&(Ge=!1);for(var ot=!1,xt=!1,Wt={},ar=0,Yt=this._order;ar<Yt.length;ar+=1){var Tt=Yt[ar],_t=this._layers[Tt];if("symbol"===_t.type){if(!Wt[_t.source]){var Nt=this.sourceCaches[_t.source];Wt[_t.source]=Nt.getRenderableIds(!0).map(function(Er){return Nt.getTileByID(Er)}).sort(function(Er,fr){return fr.tileID.overscaledZ-Er.tileID.overscaledZ||(Er.tileID.isLessThan(fr.tileID)?-1:1)})}var rr=this.crossTileSymbolIndex.addLayer(_t,Wt[_t.source],Z.center.lng);ot=ot||rr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Ge=Ge||this._layerOrderChanged||0===Ee)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),Z.zoom))&&(this.pauseablePlacement=new bi(Z,this._order,Ge,ve,Ee,Ae,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Wt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),xt=!0),ot&&this.pauseablePlacement.placement.setStale()),xt||ot)for(var dr=0,pr=this._order;dr<pr.length;dr+=1){var Lr=pr[dr],Tr=this._layers[Lr];"symbol"===Tr.type&&this.placement.updateLayerOpacities(Tr,Wt[Tr.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var Z in this.sourceCaches)this.sourceCaches[Z].releaseSymbolFadeTiles()},G.prototype.getImages=function(Z,ve,Ee){this.imageManager.getImages(ve.icons,Ee),this._updateTilesForChangedImages();var Ae=this.sourceCaches[ve.source];Ae&&Ae.setDependencies(ve.tileID.key,ve.type,ve.icons)},G.prototype.getGlyphs=function(Z,ve,Ee){this.glyphManager.getGlyphs(ve.stacks,Ee)},G.prototype.getResource=function(Z,ve,Ee){return t.makeRequest(ve,Ee)},G}(t.Evented);Ls.getSourceType=ie,Ls.setSourceType=V,Ls.registerForPluginStateChange=t.registerForPluginStateChange;var xs=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),rl="uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Pl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ji="uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Il="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",pu="varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ho="uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}",Zo="void main() {gl_FragColor=vec4(1.0);}",Vs="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Ps="uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Vo="uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}",nl="uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}",Bo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",ko="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",gu="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Ao="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",us="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",fs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Dl="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Go="#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",yu="attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}",es="varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Wi="attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}",mu="uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Is="uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}",ts="uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Rl="uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}",$l="varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",hf="uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}",rs="uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",is="uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}",bs="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ns="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Ds="uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Bs="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Gs="uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Gl="\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}",zf="uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",$u="\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}",Of="uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",kl="\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}",xu="uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",qu="\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}",ql="uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",vf="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",zu="uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",jl="const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}",ef="#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ou="const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}",js="#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",bu="const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}",co=Xi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Wl=Xi(rl,Pl),al=Xi(ji,Il),ws=Xi(pu,Ho),_l=Xi(Zo,Vs),il=Xi(Ps,Vo),pl=Xi(nl,Bo),Fo=Xi(ko,gu),Nf=Xi(Ao,us),Ef=Xi(fs,Dl),Fl=Xi(Go,yu),Nu=Xi(es,Wi),df=Xi(mu,Is),wu=Xi(ts,Rl),eu=Xi($l,hf),Us=Xi(rs,is),Ws=Xi(bs,Ns),Bu=Xi(Ds,Bs),pf=Xi(Gs,Gl),gf=Xi(zf,$u),Cf=Xi(Of,kl),Tu=Xi(xu,qu),Uu=Xi(ql,vf),tu=Xi(zu,jl),yf=Xi(ef,Ou),mf=Xi(js,bu);function Xi(fe,G){var ce=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Z=G.match(/attribute ([\w]+) ([\w]+)/g),ve=fe.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Ee=G.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Ae=Ee?Ee.concat(ve):ve,Ge={};return{fragmentSource:fe=fe.replace(ce,function(ot,xt,Wt,ar,Yt){return Ge[Yt]=!0,"define"===xt?"\n#ifndef HAS_UNIFORM_u_"+Yt+"\nvarying "+Wt+" "+ar+" "+Yt+";\n#else\nuniform "+Wt+" "+ar+" u_"+Yt+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Yt+"\n    "+Wt+" "+ar+" "+Yt+" = u_"+Yt+";\n#endif\n"}),vertexSource:G=G.replace(ce,function(ot,xt,Wt,ar,Yt){var Tt="float"===ar?"vec2":"vec4",_t=Yt.match(/color/)?"color":Tt;return Ge[Yt]?"define"===xt?"\n#ifndef HAS_UNIFORM_u_"+Yt+"\nuniform lowp float u_"+Yt+"_t;\nattribute "+Wt+" "+Tt+" a_"+Yt+";\nvarying "+Wt+" "+ar+" "+Yt+";\n#else\nuniform "+Wt+" "+ar+" u_"+Yt+";\n#endif\n":"vec4"===_t?"\n#ifndef HAS_UNIFORM_u_"+Yt+"\n    "+Yt+" = a_"+Yt+";\n#else\n    "+Wt+" "+ar+" "+Yt+" = u_"+Yt+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Yt+"\n    "+Yt+" = unpack_mix_"+_t+"(a_"+Yt+", u_"+Yt+"_t);\n#else\n    "+Wt+" "+ar+" "+Yt+" = u_"+Yt+";\n#endif\n":"define"===xt?"\n#ifndef HAS_UNIFORM_u_"+Yt+"\nuniform lowp float u_"+Yt+"_t;\nattribute "+Wt+" "+Tt+" a_"+Yt+";\n#else\nuniform "+Wt+" "+ar+" u_"+Yt+";\n#endif\n":"vec4"===_t?"\n#ifndef HAS_UNIFORM_u_"+Yt+"\n    "+Wt+" "+ar+" "+Yt+" = a_"+Yt+";\n#else\n    "+Wt+" "+ar+" "+Yt+" = u_"+Yt+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Yt+"\n    "+Wt+" "+ar+" "+Yt+" = unpack_mix_"+_t+"(a_"+Yt+", u_"+Yt+"_t);\n#else\n    "+Wt+" "+ar+" "+Yt+" = u_"+Yt+";\n#endif\n"}),staticAttributes:Z,staticUniforms:Ae}}var Au=Object.freeze({__proto__:null,prelude:co,background:Wl,backgroundPattern:al,circle:ws,clippingMask:_l,heatmap:il,heatmapTexture:pl,collisionBox:Fo,collisionCircle:Nf,debug:Ef,fill:Fl,fillOutline:Nu,fillOutlinePattern:df,fillPattern:wu,fillExtrusion:eu,fillExtrusionPattern:Us,hillshadePrepare:Ws,hillshade:Bu,line:pf,lineGradient:gf,linePattern:Cf,lineSDF:Tu,raster:Uu,symbolIcon:tu,symbolSDF:yf,symbolTextAndIcon:mf}),ru=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function xf(fe){for(var G=[],ce=0;ce<fe.length;ce++)if(null!==fe[ce]){var Z=fe[ce].split(" ");G.push(Z.pop())}return G}ru.prototype.bind=function(G,ce,Z,ve,Ee,Ae,Ge,ot){this.context=G;for(var xt=this.boundPaintVertexBuffers.length!==ve.length,Wt=0;!xt&&Wt<ve.length;Wt++)this.boundPaintVertexBuffers[Wt]!==ve[Wt]&&(xt=!0);var ar=!this.vao||this.boundProgram!==ce||this.boundLayoutVertexBuffer!==Z||xt||this.boundIndexBuffer!==Ee||this.boundVertexOffset!==Ae||this.boundDynamicVertexBuffer!==Ge||this.boundDynamicVertexBuffer2!==ot;!G.extVertexArrayObject||ar?this.freshBind(ce,Z,ve,Ee,Ae,Ge,ot):(G.bindVertexArrayOES.set(this.vao),Ge&&Ge.bind(),Ee&&Ee.dynamicDraw&&Ee.bind(),ot&&ot.bind())},ru.prototype.freshBind=function(G,ce,Z,ve,Ee,Ae,Ge){var ot,xt=G.numAttributes,Wt=this.context,ar=Wt.gl;if(Wt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Wt.extVertexArrayObject.createVertexArrayOES(),Wt.bindVertexArrayOES.set(this.vao),ot=0,this.boundProgram=G,this.boundLayoutVertexBuffer=ce,this.boundPaintVertexBuffers=Z,this.boundIndexBuffer=ve,this.boundVertexOffset=Ee,this.boundDynamicVertexBuffer=Ae,this.boundDynamicVertexBuffer2=Ge;else{ot=Wt.currentNumAttributes||0;for(var Yt=xt;Yt<ot;Yt++)ar.disableVertexAttribArray(Yt)}ce.enableAttributes(ar,G);for(var Tt=0,_t=Z;Tt<_t.length;Tt+=1)_t[Tt].enableAttributes(ar,G);Ae&&Ae.enableAttributes(ar,G),Ge&&Ge.enableAttributes(ar,G),ce.bind(),ce.setVertexAttribPointers(ar,G,Ee);for(var rr=0,dr=Z;rr<dr.length;rr+=1){var pr=dr[rr];pr.bind(),pr.setVertexAttribPointers(ar,G,Ee)}Ae&&(Ae.bind(),Ae.setVertexAttribPointers(ar,G,Ee)),ve&&ve.bind(),Ge&&(Ge.bind(),Ge.setVertexAttribPointers(ar,G,Ee)),Wt.currentNumAttributes=xt},ru.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Lf=function(G,ce,Z,ve,Ee,Ae){var Ge=G.gl;this.program=Ge.createProgram();for(var ot=xf(Z.staticAttributes),xt=ve?ve.getBinderAttributes():[],Wt=ot.concat(xt),ar=Z.staticUniforms?xf(Z.staticUniforms):[],Yt=ve?ve.getBinderUniforms():[],_t=[],Nt=0,rr=ar.concat(Yt);Nt<rr.length;Nt+=1){var dr=rr[Nt];_t.indexOf(dr)<0&&_t.push(dr)}var pr=ve?ve.defines():[];Ae&&pr.push("#define OVERDRAW_INSPECTOR;");var Lr=pr.concat(co.fragmentSource,Z.fragmentSource).join("\n"),Tr=pr.concat(co.vertexSource,Z.vertexSource).join("\n"),mr=Ge.createShader(Ge.FRAGMENT_SHADER);if(Ge.isContextLost())this.failedToCreate=!0;else{Ge.shaderSource(mr,Lr),Ge.compileShader(mr),Ge.attachShader(this.program,mr);var Er=Ge.createShader(Ge.VERTEX_SHADER);if(Ge.isContextLost())this.failedToCreate=!0;else{Ge.shaderSource(Er,Tr),Ge.compileShader(Er),Ge.attachShader(this.program,Er),this.attributes={};var fr={};this.numAttributes=Wt.length;for(var Br=0;Br<this.numAttributes;Br++)Wt[Br]&&(Ge.bindAttribLocation(this.program,Br,Wt[Br]),this.attributes[Wt[Br]]=Br);Ge.linkProgram(this.program),Ge.deleteShader(Er),Ge.deleteShader(mr);for(var $r=0;$r<_t.length;$r++){var ln=_t[$r];if(ln&&!fr[ln]){var zn=Ge.getUniformLocation(this.program,ln);zn&&(fr[ln]=zn)}}this.fixedUniforms=Ee(G,fr),this.binderUniforms=ve?ve.getUniforms(G,fr):[]}}};function ol(fe,G,ce){var Z=1/gn(ce,1,G.transform.tileZoom),ve=Math.pow(2,ce.tileID.overscaledZ),Ee=ce.tileSize*Math.pow(2,G.transform.tileZoom)/ve,Ae=Ee*(ce.tileID.canonical.x+ce.tileID.wrap*ve),Ge=Ee*ce.tileID.canonical.y;return{u_image:0,u_texsize:ce.imageAtlasTexture.size,u_scale:[Z,fe.fromScale,fe.toScale],u_fade:fe.t,u_pixel_coord_upper:[Ae>>16,Ge>>16],u_pixel_coord_lower:[65535&Ae,65535&Ge]}}function Hu(fe,G,ce,Z){var ve=ce.imageManager.getPattern(fe.from.toString()),Ee=ce.imageManager.getPattern(fe.to.toString()),Ae=ce.imageManager.getPixelSize(),Ge=Ae.width,ot=Ae.height,xt=Math.pow(2,Z.tileID.overscaledZ),Wt=Z.tileSize*Math.pow(2,ce.transform.tileZoom)/xt,ar=Wt*(Z.tileID.canonical.x+Z.tileID.wrap*xt),Yt=Wt*Z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ve.tl,u_pattern_br_a:ve.br,u_pattern_tl_b:Ee.tl,u_pattern_br_b:Ee.br,u_texsize:[Ge,ot],u_mix:G.t,u_pattern_size_a:ve.displaySize,u_pattern_size_b:Ee.displaySize,u_scale_a:G.fromScale,u_scale_b:G.toScale,u_tile_units_to_pixels:1/gn(Z,1,ce.transform.tileZoom),u_pixel_coord_upper:[ar>>16,Yt>>16],u_pixel_coord_lower:[65535&ar,65535&Yt]}}Lf.prototype.draw=function(G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt,ar,Yt,Tt,_t,Nt,rr){var dr,pr=G.gl;if(!this.failedToCreate){for(var Lr in G.program.set(this.program),G.setDepthMode(Z),G.setStencilMode(ve),G.setColorMode(Ee),G.setCullFace(Ae),this.fixedUniforms)this.fixedUniforms[Lr].set(Ge[Lr]);_t&&_t.setUniforms(G,this.binderUniforms,Yt,{zoom:Tt});for(var Tr=(dr={},dr[pr.LINES]=2,dr[pr.TRIANGLES]=3,dr[pr.LINE_STRIP]=1,dr)[ce],mr=0,Er=ar.get();mr<Er.length;mr+=1){var fr=Er[mr],Br=fr.vaos||(fr.vaos={});(Br[ot]||(Br[ot]=new ru)).bind(G,this,xt,_t?_t.getPaintVertexBuffers():[],Wt,fr.vertexOffset,Nt,rr),pr.drawElements(ce,fr.primitiveLength*Tr,pr.UNSIGNED_SHORT,fr.primitiveOffset*Tr*2)}}};var Su=function(fe,G,ce,Z){var ve=G.style.light,Ee=ve.properties.get("position"),Ae=[Ee.x,Ee.y,Ee.z],Ge=t.create$1();"viewport"===ve.properties.get("anchor")&&t.fromRotation(Ge,-G.transform.angle),t.transformMat3(Ae,Ae,Ge);var ot=ve.properties.get("color");return{u_matrix:fe,u_lightpos:Ae,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[ot.r,ot.g,ot.b],u_vertical_gradient:+ce,u_opacity:Z}},Rs=function(fe,G,ce,Z,ve,Ee,Ae){return t.extend(Su(fe,G,ce,Z),ol(Ee,G,Ae),{u_height_factor:-Math.pow(2,ve.overscaledZ)/Ae.tileSize/8})},ll=function(fe){return{u_matrix:fe}},yl=function(fe,G,ce,Z){return t.extend(ll(fe),ol(ce,G,Z))},zl=function(fe,G){return{u_matrix:fe,u_world:G}},ml=function(fe,G,ce,Z,ve){return t.extend(yl(fe,G,ce,Z),{u_world:ve})},ul=function(fe,G,ce,Z){var Ee,Ae,ve=fe.transform;if("map"===Z.paint.get("circle-pitch-alignment")){var Ge=gn(ce,1,ve.zoom);Ee=!0,Ae=[Ge,Ge]}else Ee=!1,Ae=ve.pixelsToGLUnits;return{u_camera_to_center_distance:ve.cameraToCenterDistance,u_scale_with_map:+("map"===Z.paint.get("circle-pitch-scale")),u_matrix:fe.translatePosMatrix(G.posMatrix,ce,Z.paint.get("circle-translate"),Z.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ee,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Ae}},Pf=function(fe,G,ce){var Z=gn(ce,1,G.zoom),ve=Math.pow(2,G.zoom-ce.tileID.overscaledZ),Ee=ce.tileID.overscaleFactor();return{u_matrix:fe,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:Z,u_extrude_scale:[G.pixelsToGLUnits[0]/(Z*ve),G.pixelsToGLUnits[1]/(Z*ve)],u_overscale_factor:Ee}},Zf=function(fe,G,ce){return{u_matrix:fe,u_inv_matrix:G,u_camera_to_center_distance:ce.cameraToCenterDistance,u_viewport_size:[ce.width,ce.height]}},Eu=function(fe,G,ce){return void 0===ce&&(ce=1),{u_matrix:fe,u_color:G,u_overlay:0,u_overlay_scale:ce}},au=function(fe){return{u_matrix:fe}},Ts=function(fe,G,ce,Z){return{u_matrix:fe,u_extrude_scale:gn(G,1,ce),u_intensity:Z}},Gu=function(fe,G,ce,Z){var ve=t.create();t.ortho(ve,0,fe.width,fe.height,0,0,1);var Ee=fe.context.gl;return{u_matrix:ve,u_world:[Ee.drawingBufferWidth,Ee.drawingBufferHeight],u_image:ce,u_color_ramp:Z,u_opacity:G.paint.get("heatmap-opacity")}},bf=function(fe,G,ce){var Z=ce.paint.get("hillshade-shadow-color"),ve=ce.paint.get("hillshade-highlight-color"),Ee=ce.paint.get("hillshade-accent-color"),Ae=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ce.paint.get("hillshade-illumination-anchor")&&(Ae-=fe.transform.angle);var Ge=!fe.options.moving;return{u_matrix:fe.transform.calculatePosMatrix(G.tileID.toUnwrapped(),Ge),u_image:0,u_latrange:ou(fe,G.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),Ae],u_shadow:Z,u_highlight:ve,u_accent:Ee}},iu=function(fe,G){var ce=G.stride,Z=t.create();return t.ortho(Z,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(Z,Z,[0,-t.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[ce,ce],u_zoom:fe.overscaledZ,u_unpack:G.getUnpackVector()}};function ou(fe,G){var ce=Math.pow(2,G.canonical.z),Z=G.canonical.y;return[new t.MercatorCoordinate(0,Z/ce).toLngLat().lat,new t.MercatorCoordinate(0,(Z+1)/ce).toLngLat().lat]}var Nl=function(fe,G,ce){var Z=fe.transform;return{u_matrix:er(fe,G,ce),u_ratio:1/gn(G,1,Z.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]]}},Wu=function(fe,G,ce,Z){return t.extend(Nl(fe,G,ce),{u_image:0,u_image_height:Z})},pt=function(fe,G,ce,Z){var ve=fe.transform,Ee=yr(G,ve);return{u_matrix:er(fe,G,ce),u_texsize:G.imageAtlasTexture.size,u_ratio:1/gn(G,1,ve.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Ee,Z.fromScale,Z.toScale],u_fade:Z.t,u_units_to_pixels:[1/ve.pixelsToGLUnits[0],1/ve.pixelsToGLUnits[1]]}},kt=function(fe,G,ce,Z,ve){var Ee=fe.transform,Ae=fe.lineAtlas,Ge=yr(G,Ee),ot="round"===ce.layout.get("line-cap"),xt=Ae.getDash(Z.from,ot),Wt=Ae.getDash(Z.to,ot),ar=xt.width*ve.fromScale,Yt=Wt.width*ve.toScale;return t.extend(Nl(fe,G,ce),{u_patternscale_a:[Ge/ar,-xt.height/2],u_patternscale_b:[Ge/Yt,-Wt.height/2],u_sdfgamma:Ae.width/(256*Math.min(ar,Yt)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:xt.y,u_tex_y_b:Wt.y,u_mix:ve.t})};function yr(fe,G){return 1/gn(fe,1,G.tileZoom)}function er(fe,G,ce){return fe.translatePosMatrix(G.tileID.posMatrix,G,ce.paint.get("line-translate"),ce.paint.get("line-translate-anchor"))}var Zr=function(fe,G,ce,Z,ve){return{u_matrix:fe,u_tl_parent:G,u_scale_parent:ce,u_buffer_scale:1,u_fade_t:Z.mix,u_opacity:Z.opacity*ve.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ve.paint.get("raster-brightness-min"),u_brightness_high:ve.paint.get("raster-brightness-max"),u_saturation_factor:Dn(ve.paint.get("raster-saturation")),u_contrast_factor:fn(ve.paint.get("raster-contrast")),u_spin_weights:un(ve.paint.get("raster-hue-rotate"))}};function un(fe){fe*=Math.PI/180;var G=Math.sin(fe),ce=Math.cos(fe);return[(2*ce+1)/3,(-Math.sqrt(3)*G-ce+1)/3,(Math.sqrt(3)*G-ce+1)/3]}function fn(fe){return fe>0?1/(1-fe):1+fe}function Dn(fe){return fe>0?1-1/(1.001-fe):-fe}var pa,Mn=function(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt){var Wt=ve.transform;return{u_is_size_zoom_constant:+("constant"===fe||"source"===fe),u_is_size_feature_constant:+("constant"===fe||"camera"===fe),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:Wt.cameraToCenterDistance,u_pitch:Wt.pitch/360*2*Math.PI,u_rotate_symbol:+ce,u_aspect_ratio:Wt.width/Wt.height,u_fade_change:ve.options.fadeDuration?ve.symbolFadeChange:1,u_matrix:Ee,u_label_plane_matrix:Ae,u_coord_matrix:Ge,u_is_text:+ot,u_pitch_with_map:+Z,u_texsize:xt,u_texture:0}},Un=function(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt){var ar=ve.transform;return t.extend(Mn(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt),{u_gamma_scale:Z?Math.cos(ar._pitch)*ar.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Wt})},ta=function(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt){return t.extend(Un(fe,G,ce,Z,ve,Ee,Ae,Ge,!0,ot,!0),{u_texsize_icon:xt,u_texture_icon:1})},ii=function(fe,G,ce){return{u_matrix:fe,u_opacity:G,u_color:ce}},oi=function(fe,G,ce,Z,ve,Ee){return t.extend(Hu(Z,Ee,ce,ve),{u_matrix:fe,u_opacity:G})},fa={fillExtrusion:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_lightpos:new t.Uniform3f(fe,G.u_lightpos),u_lightintensity:new t.Uniform1f(fe,G.u_lightintensity),u_lightcolor:new t.Uniform3f(fe,G.u_lightcolor),u_vertical_gradient:new t.Uniform1f(fe,G.u_vertical_gradient),u_opacity:new t.Uniform1f(fe,G.u_opacity)}},fillExtrusionPattern:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_lightpos:new t.Uniform3f(fe,G.u_lightpos),u_lightintensity:new t.Uniform1f(fe,G.u_lightintensity),u_lightcolor:new t.Uniform3f(fe,G.u_lightcolor),u_vertical_gradient:new t.Uniform1f(fe,G.u_vertical_gradient),u_height_factor:new t.Uniform1f(fe,G.u_height_factor),u_image:new t.Uniform1i(fe,G.u_image),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_pixel_coord_upper:new t.Uniform2f(fe,G.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(fe,G.u_pixel_coord_lower),u_scale:new t.Uniform3f(fe,G.u_scale),u_fade:new t.Uniform1f(fe,G.u_fade),u_opacity:new t.Uniform1f(fe,G.u_opacity)}},fill:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix)}},fillPattern:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_image:new t.Uniform1i(fe,G.u_image),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_pixel_coord_upper:new t.Uniform2f(fe,G.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(fe,G.u_pixel_coord_lower),u_scale:new t.Uniform3f(fe,G.u_scale),u_fade:new t.Uniform1f(fe,G.u_fade)}},fillOutline:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_world:new t.Uniform2f(fe,G.u_world)}},fillOutlinePattern:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_world:new t.Uniform2f(fe,G.u_world),u_image:new t.Uniform1i(fe,G.u_image),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_pixel_coord_upper:new t.Uniform2f(fe,G.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(fe,G.u_pixel_coord_lower),u_scale:new t.Uniform3f(fe,G.u_scale),u_fade:new t.Uniform1f(fe,G.u_fade)}},circle:function(fe,G){return{u_camera_to_center_distance:new t.Uniform1f(fe,G.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(fe,G.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(fe,G.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(fe,G.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(fe,G.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(fe,G.u_matrix)}},collisionBox:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_camera_to_center_distance:new t.Uniform1f(fe,G.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(fe,G.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(fe,G.u_extrude_scale),u_overscale_factor:new t.Uniform1f(fe,G.u_overscale_factor)}},collisionCircle:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_inv_matrix:new t.UniformMatrix4f(fe,G.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(fe,G.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(fe,G.u_viewport_size)}},debug:function(fe,G){return{u_color:new t.UniformColor(fe,G.u_color),u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_overlay:new t.Uniform1i(fe,G.u_overlay),u_overlay_scale:new t.Uniform1f(fe,G.u_overlay_scale)}},clippingMask:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix)}},heatmap:function(fe,G){return{u_extrude_scale:new t.Uniform1f(fe,G.u_extrude_scale),u_intensity:new t.Uniform1f(fe,G.u_intensity),u_matrix:new t.UniformMatrix4f(fe,G.u_matrix)}},heatmapTexture:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_world:new t.Uniform2f(fe,G.u_world),u_image:new t.Uniform1i(fe,G.u_image),u_color_ramp:new t.Uniform1i(fe,G.u_color_ramp),u_opacity:new t.Uniform1f(fe,G.u_opacity)}},hillshade:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_image:new t.Uniform1i(fe,G.u_image),u_latrange:new t.Uniform2f(fe,G.u_latrange),u_light:new t.Uniform2f(fe,G.u_light),u_shadow:new t.UniformColor(fe,G.u_shadow),u_highlight:new t.UniformColor(fe,G.u_highlight),u_accent:new t.UniformColor(fe,G.u_accent)}},hillshadePrepare:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_image:new t.Uniform1i(fe,G.u_image),u_dimension:new t.Uniform2f(fe,G.u_dimension),u_zoom:new t.Uniform1f(fe,G.u_zoom),u_unpack:new t.Uniform4f(fe,G.u_unpack)}},line:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_ratio:new t.Uniform1f(fe,G.u_ratio),u_device_pixel_ratio:new t.Uniform1f(fe,G.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(fe,G.u_units_to_pixels)}},lineGradient:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_ratio:new t.Uniform1f(fe,G.u_ratio),u_device_pixel_ratio:new t.Uniform1f(fe,G.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(fe,G.u_units_to_pixels),u_image:new t.Uniform1i(fe,G.u_image),u_image_height:new t.Uniform1f(fe,G.u_image_height)}},linePattern:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_ratio:new t.Uniform1f(fe,G.u_ratio),u_device_pixel_ratio:new t.Uniform1f(fe,G.u_device_pixel_ratio),u_image:new t.Uniform1i(fe,G.u_image),u_units_to_pixels:new t.Uniform2f(fe,G.u_units_to_pixels),u_scale:new t.Uniform3f(fe,G.u_scale),u_fade:new t.Uniform1f(fe,G.u_fade)}},lineSDF:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_ratio:new t.Uniform1f(fe,G.u_ratio),u_device_pixel_ratio:new t.Uniform1f(fe,G.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(fe,G.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(fe,G.u_patternscale_a),u_patternscale_b:new t.Uniform2f(fe,G.u_patternscale_b),u_sdfgamma:new t.Uniform1f(fe,G.u_sdfgamma),u_image:new t.Uniform1i(fe,G.u_image),u_tex_y_a:new t.Uniform1f(fe,G.u_tex_y_a),u_tex_y_b:new t.Uniform1f(fe,G.u_tex_y_b),u_mix:new t.Uniform1f(fe,G.u_mix)}},raster:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_tl_parent:new t.Uniform2f(fe,G.u_tl_parent),u_scale_parent:new t.Uniform1f(fe,G.u_scale_parent),u_buffer_scale:new t.Uniform1f(fe,G.u_buffer_scale),u_fade_t:new t.Uniform1f(fe,G.u_fade_t),u_opacity:new t.Uniform1f(fe,G.u_opacity),u_image0:new t.Uniform1i(fe,G.u_image0),u_image1:new t.Uniform1i(fe,G.u_image1),u_brightness_low:new t.Uniform1f(fe,G.u_brightness_low),u_brightness_high:new t.Uniform1f(fe,G.u_brightness_high),u_saturation_factor:new t.Uniform1f(fe,G.u_saturation_factor),u_contrast_factor:new t.Uniform1f(fe,G.u_contrast_factor),u_spin_weights:new t.Uniform3f(fe,G.u_spin_weights)}},symbolIcon:function(fe,G){return{u_is_size_zoom_constant:new t.Uniform1i(fe,G.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(fe,G.u_is_size_feature_constant),u_size_t:new t.Uniform1f(fe,G.u_size_t),u_size:new t.Uniform1f(fe,G.u_size),u_camera_to_center_distance:new t.Uniform1f(fe,G.u_camera_to_center_distance),u_pitch:new t.Uniform1f(fe,G.u_pitch),u_rotate_symbol:new t.Uniform1i(fe,G.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(fe,G.u_aspect_ratio),u_fade_change:new t.Uniform1f(fe,G.u_fade_change),u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(fe,G.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(fe,G.u_coord_matrix),u_is_text:new t.Uniform1i(fe,G.u_is_text),u_pitch_with_map:new t.Uniform1i(fe,G.u_pitch_with_map),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_texture:new t.Uniform1i(fe,G.u_texture)}},symbolSDF:function(fe,G){return{u_is_size_zoom_constant:new t.Uniform1i(fe,G.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(fe,G.u_is_size_feature_constant),u_size_t:new t.Uniform1f(fe,G.u_size_t),u_size:new t.Uniform1f(fe,G.u_size),u_camera_to_center_distance:new t.Uniform1f(fe,G.u_camera_to_center_distance),u_pitch:new t.Uniform1f(fe,G.u_pitch),u_rotate_symbol:new t.Uniform1i(fe,G.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(fe,G.u_aspect_ratio),u_fade_change:new t.Uniform1f(fe,G.u_fade_change),u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(fe,G.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(fe,G.u_coord_matrix),u_is_text:new t.Uniform1i(fe,G.u_is_text),u_pitch_with_map:new t.Uniform1i(fe,G.u_pitch_with_map),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_texture:new t.Uniform1i(fe,G.u_texture),u_gamma_scale:new t.Uniform1f(fe,G.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(fe,G.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(fe,G.u_is_halo)}},symbolTextAndIcon:function(fe,G){return{u_is_size_zoom_constant:new t.Uniform1i(fe,G.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(fe,G.u_is_size_feature_constant),u_size_t:new t.Uniform1f(fe,G.u_size_t),u_size:new t.Uniform1f(fe,G.u_size),u_camera_to_center_distance:new t.Uniform1f(fe,G.u_camera_to_center_distance),u_pitch:new t.Uniform1f(fe,G.u_pitch),u_rotate_symbol:new t.Uniform1i(fe,G.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(fe,G.u_aspect_ratio),u_fade_change:new t.Uniform1f(fe,G.u_fade_change),u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(fe,G.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(fe,G.u_coord_matrix),u_is_text:new t.Uniform1i(fe,G.u_is_text),u_pitch_with_map:new t.Uniform1i(fe,G.u_pitch_with_map),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_texsize_icon:new t.Uniform2f(fe,G.u_texsize_icon),u_texture:new t.Uniform1i(fe,G.u_texture),u_texture_icon:new t.Uniform1i(fe,G.u_texture_icon),u_gamma_scale:new t.Uniform1f(fe,G.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(fe,G.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(fe,G.u_is_halo)}},background:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_opacity:new t.Uniform1f(fe,G.u_opacity),u_color:new t.UniformColor(fe,G.u_color)}},backgroundPattern:function(fe,G){return{u_matrix:new t.UniformMatrix4f(fe,G.u_matrix),u_opacity:new t.Uniform1f(fe,G.u_opacity),u_image:new t.Uniform1i(fe,G.u_image),u_pattern_tl_a:new t.Uniform2f(fe,G.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(fe,G.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(fe,G.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(fe,G.u_pattern_br_b),u_texsize:new t.Uniform2f(fe,G.u_texsize),u_mix:new t.Uniform1f(fe,G.u_mix),u_pattern_size_a:new t.Uniform2f(fe,G.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(fe,G.u_pattern_size_b),u_scale_a:new t.Uniform1f(fe,G.u_scale_a),u_scale_b:new t.Uniform1f(fe,G.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(fe,G.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(fe,G.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(fe,G.u_tile_units_to_pixels)}}};function ti(fe,G,ce,Z,ve,Ee,Ae){for(var Ge=fe.context,ot=Ge.gl,xt=fe.useProgram("collisionBox"),Wt=[],ar=0,Yt=0,Tt=0;Tt<Z.length;Tt++){var _t=Z[Tt],Nt=G.getTile(_t),rr=Nt.getBucket(ce);if(rr){var dr=_t.posMatrix;(0!==ve[0]||0!==ve[1])&&(dr=fe.translatePosMatrix(_t.posMatrix,Nt,ve,Ee));var pr=Ae?rr.textCollisionBox:rr.iconCollisionBox,Lr=rr.collisionCircleArray;if(Lr.length>0){var Tr=t.create(),mr=dr;t.mul(Tr,rr.placementInvProjMatrix,fe.transform.glCoordMatrix),t.mul(Tr,Tr,rr.placementViewportMatrix),Wt.push({circleArray:Lr,circleOffset:Yt,transform:mr,invTransform:Tr}),Yt=ar+=Lr.length/4}pr&&xt.draw(Ge,ot.LINES,Sr.disabled,$t.disabled,fe.colorModeForRenderPass(),ft.disabled,Pf(dr,fe.transform,Nt),ce.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,null,fe.transform.zoom,null,null,pr.collisionVertexBuffer)}}if(Ae&&Wt.length){var Er=fe.useProgram("collisionCircle"),fr=new t.StructArrayLayout2f1f2i16;fr.resize(4*ar),fr._trim();for(var Br=0,$r=0,ln=Wt;$r<ln.length;$r+=1)for(var zn=ln[$r],En=0;En<zn.circleArray.length/4;En++){var Nn=4*En,ya=zn.circleArray[Nn+0],aa=zn.circleArray[Nn+1],On=zn.circleArray[Nn+2],Zn=zn.circleArray[Nn+3];fr.emplace(Br++,ya,aa,On,Zn,0),fr.emplace(Br++,ya,aa,On,Zn,1),fr.emplace(Br++,ya,aa,On,Zn,2),fr.emplace(Br++,ya,aa,On,Zn,3)}(!pa||pa.length<2*ar)&&(pa=pi(ar));for(var Yn=Ge.createIndexBuffer(pa,!0),ua=Ge.createVertexBuffer(fr,t.collisionCircleLayout.members,!0),_a=0,Ci=Wt;_a<Ci.length;_a+=1){var Ei=Ci[_a],qi=Zf(Ei.transform,Ei.invTransform,fe.transform);Er.draw(Ge,ot.TRIANGLES,Sr.disabled,$t.disabled,fe.colorModeForRenderPass(),ft.disabled,qi,ce.id,ua,Yn,t.SegmentVector.simpleSegment(0,2*Ei.circleOffset,Ei.circleArray.length,Ei.circleArray.length/2),null,fe.transform.zoom,null,null,null)}ua.destroy(),Yn.destroy()}}function pi(fe){var G=2*fe,ce=new t.StructArrayLayout3ui6;ce.resize(G),ce._trim();for(var Z=0;Z<G;Z++){var ve=6*Z;ce.uint16[ve+0]=4*Z+0,ce.uint16[ve+1]=4*Z+1,ce.uint16[ve+2]=4*Z+2,ce.uint16[ve+3]=4*Z+2,ce.uint16[ve+4]=4*Z+3,ce.uint16[ve+5]=4*Z+0}return ce}var Hi=t.identity(new Float32Array(16));function no(fe,G,ce,Z,ve){if("translucent"===fe.renderPass){var Ee=$t.disabled,Ae=fe.colorModeForRenderPass();ce.layout.get("text-variable-anchor")&&Ki(Z,fe,ce,G,ce.layout.get("text-rotation-alignment"),ce.layout.get("text-pitch-alignment"),ve),0!==ce.paint.get("icon-opacity").constantOr(1)&&Co(fe,G,ce,Z,!1,ce.paint.get("icon-translate"),ce.paint.get("icon-translate-anchor"),ce.layout.get("icon-rotation-alignment"),ce.layout.get("icon-pitch-alignment"),ce.layout.get("icon-keep-upright"),Ee,Ae),0!==ce.paint.get("text-opacity").constantOr(1)&&Co(fe,G,ce,Z,!0,ce.paint.get("text-translate"),ce.paint.get("text-translate-anchor"),ce.layout.get("text-rotation-alignment"),ce.layout.get("text-pitch-alignment"),ce.layout.get("text-keep-upright"),Ee,Ae),G.map.showCollisionBoxes&&(ti(fe,G,ce,Z,ce.paint.get("text-translate"),ce.paint.get("text-translate-anchor"),!0),ti(fe,G,ce,Z,ce.paint.get("icon-translate"),ce.paint.get("icon-translate-anchor"),!1))}}function Zi(fe,G,ce,Z,ve,Ee){var Ae=t.getAnchorAlignment(fe),xt=-(Ae.horizontalAlign-.5)*G,Wt=-(Ae.verticalAlign-.5)*ce,ar=t.evaluateVariableOffset(fe,Z);return new t.Point((xt/ve+ar[0])*Ee,(Wt/ve+ar[1])*Ee)}function Ki(fe,G,ce,Z,ve,Ee,Ae){for(var Ge=G.transform,ot="map"===ve,xt="map"===Ee,Wt=0,ar=fe;Wt<ar.length;Wt+=1){var Yt=ar[Wt],Tt=Z.getTile(Yt),_t=Tt.getBucket(ce);if(_t&&_t.text&&_t.text.segments.get().length){var Nt=_t.textSizeData,rr=t.evaluateSizeForZoom(Nt,Ge.zoom),dr=gn(Tt,1,G.transform.zoom),pr=vr(Yt.posMatrix,xt,ot,G.transform,dr),Lr="none"!==ce.layout.get("icon-text-fit")&&_t.hasIconData();if(rr){var Tr=Math.pow(2,Ge.zoom-Tt.tileID.overscaledZ);mi(_t,ot,xt,Ae,t.symbolSize,Ge,pr,Yt.posMatrix,Tr,rr,Lr)}}}}function mi(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt){var ar=fe.text.placedSymbolArray,Yt=fe.text.dynamicLayoutVertexArray,Tt=fe.icon.dynamicLayoutVertexArray,_t={};Yt.clear();for(var Nt=0;Nt<ar.length;Nt++){var rr=ar.get(Nt),dr=fe.allowVerticalPlacement&&!rr.placedOrientation,pr=rr.hidden||!rr.crossTileID||dr?null:Z[rr.crossTileID];if(pr){var Lr=new t.Point(rr.anchorX,rr.anchorY),Tr=Or(Lr,ce?Ge:Ae),mr=Xn(Ee.cameraToCenterDistance,Tr.signedDistanceFromCamera),Er=ve.evaluateSizeForFeature(fe.textSizeData,xt,rr)*mr/t.ONE_EM;ce&&(Er*=fe.tilePixelRatio/ot);for(var fr=pr.width,Br=pr.height,En=Zi(pr.anchor,fr,Br,pr.textOffset,pr.textBoxScale,Er),Nn=ce?Or(Lr.add(En),Ae).point:Tr.point.add(G?En.rotate(-Ee.angle):En),ya=fe.allowVerticalPlacement&&rr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,aa=0;aa<rr.numGlyphs;aa++)t.addDynamicAttributes(Yt,Nn,ya);Wt&&rr.associatedIconIndex>=0&&(_t[rr.associatedIconIndex]={shiftedAnchor:Nn,angle:ya})}else Na(rr.numGlyphs,Yt)}if(Wt){Tt.clear();for(var On=fe.icon.placedSymbolArray,Zn=0;Zn<On.length;Zn++){var Yn=On.get(Zn);if(Yn.hidden)Na(Yn.numGlyphs,Tt);else{var ua=_t[Zn];if(ua)for(var _a=0;_a<Yn.numGlyphs;_a++)t.addDynamicAttributes(Tt,ua.shiftedAnchor,ua.angle);else Na(Yn.numGlyphs,Tt)}}fe.icon.dynamicLayoutVertexBuffer.updateData(Tt)}fe.text.dynamicLayoutVertexBuffer.updateData(Yt)}function So(fe,G,ce){return ce.iconsInText&&G?"symbolTextAndIcon":fe?"symbolSDF":"symbolIcon"}function Co(fe,G,ce,Z,ve,Ee,Ae,Ge,ot,xt,Wt,ar){for(var Yt=fe.context,Tt=Yt.gl,_t=fe.transform,Nt="map"===Ge,rr="map"===ot,dr=Nt&&"point"!==ce.layout.get("symbol-placement"),pr=Nt&&!rr&&!dr,Lr=void 0!==ce.layout.get("symbol-sort-key").constantOr(1),Tr=!1,mr=fe.depthModeForSublayer(0,Sr.ReadOnly),Er=ce.layout.get("text-variable-anchor"),fr=[],Br=0,$r=Z;Br<$r.length;Br+=1){var ln=$r[Br],zn=G.getTile(ln),En=zn.getBucket(ce);if(En){var Nn=ve?En.text:En.icon;if(Nn&&Nn.segments.get().length){var ya=Nn.programConfigurations.get(ce.id),aa=ve||En.sdfIcons,On=ve?En.textSizeData:En.iconSizeData,Zn=rr||0!==_t.pitch,Yn=fe.useProgram(So(aa,ve,En),ya),ua=t.evaluateSizeForZoom(On,_t.zoom),_a=void 0,Ci=[0,0],Ei=void 0,qi=void 0,di=null,Fi=void 0;if(ve){if(Ei=zn.glyphAtlasTexture,qi=Tt.LINEAR,_a=zn.glyphAtlasTexture.size,En.iconsInText){Ci=zn.imageAtlasTexture.size,di=zn.imageAtlasTexture;var ho="composite"===On.kind||"camera"===On.kind;Fi=Zn||fe.options.rotating||fe.options.zooming||ho?Tt.LINEAR:Tt.NEAREST}}else{var Ko=1!==ce.layout.get("icon-size").constantOr(0)||En.iconsNeedLinear;Ei=zn.imageAtlasTexture,qi=aa||fe.options.rotating||fe.options.zooming||Ko||Zn?Tt.LINEAR:Tt.NEAREST,_a=zn.imageAtlasTexture.size}var uu=gn(zn,1,fe.transform.zoom),Ku=vr(ln.posMatrix,rr,Nt,fe.transform,uu),Iu=nn(ln.posMatrix,rr,Nt,fe.transform,uu),wf=Er&&En.hasTextData(),kf="none"!==ce.layout.get("icon-text-fit")&&wf&&En.hasIconData();dr&&wn(En,ln.posMatrix,fe,ve,Ku,Iu,rr,xt);var Tf=fe.translatePosMatrix(ln.posMatrix,zn,Ee,Ae),Sl=dr||ve&&Er||kf?Hi:Ku,Af=fe.translatePosMatrix(Iu,zn,Ee,Ae,!0),fu=aa&&0!==ce.paint.get(ve?"text-halo-width":"icon-halo-width").constantOr(1),Ju={program:Yn,buffers:Nn,uniformValues:aa?En.iconsInText?ta(On.kind,ua,pr,rr,fe,Tf,Sl,Af,_a,Ci):Un(On.kind,ua,pr,rr,fe,Tf,Sl,Af,ve,_a,!0):Mn(On.kind,ua,pr,rr,fe,Tf,Sl,Af,ve,_a),atlasTexture:Ei,atlasTextureIcon:di,atlasInterpolation:qi,atlasInterpolationIcon:Fi,isSDF:aa,hasHalo:fu};if(Lr&&En.canOverlap){Tr=!0;for(var Qu=0,lc=Nn.segments.get();Qu<lc.length;Qu+=1){var $f=lc[Qu];fr.push({segments:new t.SegmentVector([$f]),sortKey:$f.sortKey,state:Ju})}}else fr.push({segments:Nn.segments,sortKey:0,state:Ju})}}}Tr&&fr.sort(function(oc,pc){return oc.sortKey-pc.sortKey});for(var Ks=0,ac=fr;Ks<ac.length;Ks+=1){var uc=ac[Ks],vl=uc.state;if(Yt.activeTexture.set(Tt.TEXTURE0),vl.atlasTexture.bind(vl.atlasInterpolation,Tt.CLAMP_TO_EDGE),vl.atlasTextureIcon&&(Yt.activeTexture.set(Tt.TEXTURE1),vl.atlasTextureIcon&&vl.atlasTextureIcon.bind(vl.atlasInterpolationIcon,Tt.CLAMP_TO_EDGE)),vl.isSDF){var ic=vl.uniformValues;vl.hasHalo&&(ic.u_is_halo=1,to(vl.buffers,uc.segments,ce,fe,vl.program,mr,Wt,ar,ic)),ic.u_is_halo=0}to(vl.buffers,uc.segments,ce,fe,vl.program,mr,Wt,ar,vl.uniformValues)}}function to(fe,G,ce,Z,ve,Ee,Ae,Ge,ot){var xt=Z.context,Wt=xt.gl;ve.draw(xt,Wt.TRIANGLES,Ee,Ae,Ge,ft.disabled,ot,ce.id,fe.layoutVertexBuffer,fe.indexBuffer,G,ce.paint,Z.transform.zoom,fe.programConfigurations.get(ce.id),fe.dynamicLayoutVertexBuffer,fe.opacityVertexBuffer)}function Ia(fe,G,ce,Z){if("translucent"===fe.renderPass){var ve=ce.paint.get("circle-opacity"),Ee=ce.paint.get("circle-stroke-width"),Ae=ce.paint.get("circle-stroke-opacity"),Ge=void 0!==ce.layout.get("circle-sort-key").constantOr(1);if(0!==ve.constantOr(1)||0!==Ee.constantOr(1)&&0!==Ae.constantOr(1)){for(var ot=fe.context,xt=ot.gl,Wt=fe.depthModeForSublayer(0,Sr.ReadOnly),ar=$t.disabled,Yt=fe.colorModeForRenderPass(),Tt=[],_t=0;_t<Z.length;_t++){var Nt=Z[_t],rr=G.getTile(Nt),dr=rr.getBucket(ce);if(dr){var pr=dr.programConfigurations.get(ce.id),fr={programConfiguration:pr,program:fe.useProgram("circle",pr),layoutVertexBuffer:dr.layoutVertexBuffer,indexBuffer:dr.indexBuffer,uniformValues:ul(fe,Nt,rr,ce)};if(Ge)for(var $r=0,ln=dr.segments.get();$r<ln.length;$r+=1){var zn=ln[$r];Tt.push({segments:new t.SegmentVector([zn]),sortKey:zn.sortKey,state:fr})}else Tt.push({segments:dr.segments,sortKey:0,state:fr})}}Ge&&Tt.sort(function(Ei,qi){return Ei.sortKey-qi.sortKey});for(var En=0,Nn=Tt;En<Nn.length;En+=1){var ya=Nn[En],aa=ya.state,On=aa.programConfiguration,Zn=aa.program,Yn=aa.layoutVertexBuffer,ua=aa.indexBuffer,_a=aa.uniformValues,Ci=ya.segments;Zn.draw(ot,xt.TRIANGLES,Wt,ar,Yt,ft.disabled,_a,ce.id,Yn,ua,Ci,ce.paint,fe.transform.zoom,On)}}}}function Ri(fe,G,ce,Z){if(0!==ce.paint.get("heatmap-opacity"))if("offscreen"===fe.renderPass){var ve=fe.context,Ee=ve.gl,Ae=$t.disabled,Ge=new $e([Ee.ONE,Ee.ONE],t.Color.transparent,[!0,!0,!0,!0]);Uo(ve,fe,ce),ve.clear({color:t.Color.transparent});for(var ot=0;ot<Z.length;ot++){var xt=Z[ot];if(!G.hasRenderableParent(xt)){var Wt=G.getTile(xt),ar=Wt.getBucket(ce);if(ar){var Yt=ar.programConfigurations.get(ce.id),Tt=fe.useProgram("heatmap",Yt),Nt=fe.transform.zoom;Tt.draw(ve,Ee.TRIANGLES,Sr.disabled,Ae,Ge,ft.disabled,Ts(xt.posMatrix,Wt,Nt,ce.paint.get("heatmap-intensity")),ce.id,ar.layoutVertexBuffer,ar.indexBuffer,ar.segments,ce.paint,fe.transform.zoom,Yt)}}}ve.viewport.set([0,0,fe.width,fe.height])}else"translucent"===fe.renderPass&&(fe.context.setColorMode(fe.colorModeForRenderPass()),os(fe,ce))}function Uo(fe,G,ce){var Z=fe.gl;fe.activeTexture.set(Z.TEXTURE1),fe.viewport.set([0,0,G.width/4,G.height/4]);var ve=ce.heatmapFbo;if(ve)Z.bindTexture(Z.TEXTURE_2D,ve.colorAttachment.get()),fe.bindFramebuffer.set(ve.framebuffer);else{var Ee=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,Ee),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),ve=ce.heatmapFbo=fe.createFramebuffer(G.width/4,G.height/4,!1),jo(fe,G,Ee,ve)}}function jo(fe,G,ce,Z){var ve=fe.gl,Ee=fe.extRenderToTextureHalfFloat?fe.extTextureHalfFloat.HALF_FLOAT_OES:ve.UNSIGNED_BYTE;ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,G.width/4,G.height/4,0,ve.RGBA,Ee,null),Z.colorAttachment.set(ce)}function os(fe,G){var ce=fe.context,Z=ce.gl,ve=G.heatmapFbo;if(ve){ce.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ve.colorAttachment.get()),ce.activeTexture.set(Z.TEXTURE1);var Ee=G.colorRampTexture;Ee||(Ee=G.colorRampTexture=new t.Texture(ce,G.colorRamp,Z.RGBA)),Ee.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),fe.useProgram("heatmapTexture").draw(ce,Z.TRIANGLES,Sr.disabled,$t.disabled,fe.colorModeForRenderPass(),ft.disabled,Gu(fe,G,0,1),G.id,fe.viewportBuffer,fe.quadTriangleIndexBuffer,fe.viewportSegments,G.paint,fe.transform.zoom)}}function Bl(fe,G,ce,Z){if("translucent"===fe.renderPass){var ve=ce.paint.get("line-opacity"),Ee=ce.paint.get("line-width");if(0!==ve.constantOr(1)&&0!==Ee.constantOr(1))for(var Ae=fe.depthModeForSublayer(0,Sr.ReadOnly),Ge=fe.colorModeForRenderPass(),ot=ce.paint.get("line-dasharray"),xt=ce.paint.get("line-pattern"),Wt=xt.constantOr(1),ar=ce.paint.get("line-gradient"),Yt=ce.getCrossfadeParameters(),Tt=Wt?"linePattern":ot?"lineSDF":ar?"lineGradient":"line",_t=fe.context,Nt=_t.gl,rr=!0,dr=0,pr=Z;dr<pr.length;dr+=1){var Lr=pr[dr],Tr=G.getTile(Lr);if(!Wt||Tr.patternsLoaded()){var mr=Tr.getBucket(ce);if(mr){var Er=mr.programConfigurations.get(ce.id),fr=fe.context.program.get(),Br=fe.useProgram(Tt,Er),$r=rr||Br.program!==fr,ln=xt.constantOr(null);if(ln&&Tr.imageAtlas){var zn=Tr.imageAtlas,En=zn.patternPositions[ln.to.toString()],Nn=zn.patternPositions[ln.from.toString()];En&&Nn&&Er.setConstantPatternPositions(En,Nn)}var ya=Wt?pt(fe,Tr,ce,Yt):ot?kt(fe,Tr,ce,ot,Yt):ar?Wu(fe,Tr,ce,mr.lineClipsArray.length):Nl(fe,Tr,ce);if(Wt)_t.activeTexture.set(Nt.TEXTURE0),Tr.imageAtlasTexture.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE),Er.updatePaintBuffers(Yt);else if(ot&&($r||fe.lineAtlas.dirty))_t.activeTexture.set(Nt.TEXTURE0),fe.lineAtlas.bind(_t);else if(ar){var aa=mr.gradients[ce.id],On=aa.texture;if(ce.gradientVersion!==aa.version){var Zn=256;if(ce.stepInterpolant){var Yn=G.getSource().maxzoom,ua=Lr.canonical.z===Yn?Math.ceil(1<<fe.transform.maxZoom-Lr.canonical.z):1,Ei=mr.maxLineLength/t.EXTENT*1024*ua;Zn=t.clamp(t.nextPowerOfTwo(Ei),256,_t.maxTextureSize)}aa.gradient=t.renderColorRamp({expression:ce.gradientExpression(),evaluationKey:"lineProgress",resolution:Zn,image:aa.gradient||void 0,clips:mr.lineClipsArray}),aa.texture?aa.texture.update(aa.gradient):aa.texture=new t.Texture(_t,aa.gradient,Nt.RGBA),aa.version=ce.gradientVersion,On=aa.texture}_t.activeTexture.set(Nt.TEXTURE0),On.bind(ce.stepInterpolant?Nt.NEAREST:Nt.LINEAR,Nt.CLAMP_TO_EDGE)}Br.draw(_t,Nt.TRIANGLES,Ae,fe.stencilModeForClipping(Lr),Ge,ft.disabled,ya,ce.id,mr.layoutVertexBuffer,mr.indexBuffer,mr.segments,ce.paint,fe.transform.zoom,Er,mr.layoutVertexBuffer2),rr=!1}}}}}function cl(fe,G,ce,Z){var ve=ce.paint.get("fill-color"),Ee=ce.paint.get("fill-opacity");if(0!==Ee.constantOr(1)){var Ae=fe.colorModeForRenderPass(),Ge=ce.paint.get("fill-pattern"),ot=fe.opaquePassEnabledForLayer()&&!Ge.constantOr(1)&&1===ve.constantOr(t.Color.transparent).a&&1===Ee.constantOr(0)?"opaque":"translucent";if(fe.renderPass===ot){var xt=fe.depthModeForSublayer(1,"opaque"===fe.renderPass?Sr.ReadWrite:Sr.ReadOnly);Ys(fe,G,ce,Z,xt,Ae,!1)}if("translucent"===fe.renderPass&&ce.paint.get("fill-antialias")){var Wt=fe.depthModeForSublayer(ce.getPaintProperty("fill-outline-color")?2:0,Sr.ReadOnly);Ys(fe,G,ce,Z,Wt,Ae,!0)}}}function Ys(fe,G,ce,Z,ve,Ee,Ae){var ar,Yt,Tt,_t,Nt,Ge=fe.context.gl,ot=ce.paint.get("fill-pattern"),xt=ot&&ot.constantOr(1),Wt=ce.getCrossfadeParameters();Ae?(Yt=xt&&!ce.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ar=Ge.LINES):(Yt=xt?"fillPattern":"fill",ar=Ge.TRIANGLES);for(var rr=0,dr=Z;rr<dr.length;rr+=1){var pr=dr[rr],Lr=G.getTile(pr);if(!xt||Lr.patternsLoaded()){var Tr=Lr.getBucket(ce);if(Tr){var mr=Tr.programConfigurations.get(ce.id),Er=fe.useProgram(Yt,mr);xt&&(fe.context.activeTexture.set(Ge.TEXTURE0),Lr.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),mr.updatePaintBuffers(Wt));var fr=ot.constantOr(null);if(fr&&Lr.imageAtlas){var Br=Lr.imageAtlas,$r=Br.patternPositions[fr.to.toString()],ln=Br.patternPositions[fr.from.toString()];$r&&ln&&mr.setConstantPatternPositions($r,ln)}var zn=fe.translatePosMatrix(pr.posMatrix,Lr,ce.paint.get("fill-translate"),ce.paint.get("fill-translate-anchor"));if(Ae){_t=Tr.indexBuffer2,Nt=Tr.segments2;var En=[Ge.drawingBufferWidth,Ge.drawingBufferHeight];Tt="fillOutlinePattern"===Yt&&xt?ml(zn,fe,Wt,Lr,En):zl(zn,En)}else _t=Tr.indexBuffer,Nt=Tr.segments,Tt=xt?yl(zn,fe,Wt,Lr):ll(zn);Er.draw(fe.context,ar,ve,fe.stencilModeForClipping(pr),Ee,ft.disabled,Tt,ce.id,Tr.layoutVertexBuffer,_t,Nt,ce.paint,fe.transform.zoom,mr)}}}}function xl(fe,G,ce,Z){var ve=ce.paint.get("fill-extrusion-opacity");if(0!==ve&&"translucent"===fe.renderPass){var Ee=new Sr(fe.context.gl.LEQUAL,Sr.ReadWrite,fe.depthRangeFor3D);if(1!==ve||ce.paint.get("fill-extrusion-pattern").constantOr(1))_o(fe,G,ce,Z,Ee,$t.disabled,$e.disabled),_o(fe,G,ce,Z,Ee,fe.stencilModeFor3D(),fe.colorModeForRenderPass());else{var Ae=fe.colorModeForRenderPass();_o(fe,G,ce,Z,Ee,$t.disabled,Ae)}}}function _o(fe,G,ce,Z,ve,Ee,Ae){for(var Ge=fe.context,ot=Ge.gl,xt=ce.paint.get("fill-extrusion-pattern"),Wt=xt.constantOr(1),ar=ce.getCrossfadeParameters(),Yt=ce.paint.get("fill-extrusion-opacity"),Tt=0,_t=Z;Tt<_t.length;Tt+=1){var Nt=_t[Tt],rr=G.getTile(Nt),dr=rr.getBucket(ce);if(dr){var pr=dr.programConfigurations.get(ce.id),Lr=fe.useProgram(Wt?"fillExtrusionPattern":"fillExtrusion",pr);Wt&&(fe.context.activeTexture.set(ot.TEXTURE0),rr.imageAtlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),pr.updatePaintBuffers(ar));var Tr=xt.constantOr(null);if(Tr&&rr.imageAtlas){var mr=rr.imageAtlas,Er=mr.patternPositions[Tr.to.toString()],fr=mr.patternPositions[Tr.from.toString()];Er&&fr&&pr.setConstantPatternPositions(Er,fr)}var Br=fe.translatePosMatrix(Nt.posMatrix,rr,ce.paint.get("fill-extrusion-translate"),ce.paint.get("fill-extrusion-translate-anchor")),$r=ce.paint.get("fill-extrusion-vertical-gradient"),ln=Wt?Rs(Br,fe,$r,Yt,Nt,ar,rr):Su(Br,fe,$r,Yt);Lr.draw(Ge,Ge.gl.TRIANGLES,ve,Ee,Ae,ft.backCCW,ln,ce.id,dr.layoutVertexBuffer,dr.indexBuffer,dr.segments,ce.paint,fe.transform.zoom,pr)}}}function _s(fe,G,ce,Z){if("offscreen"===fe.renderPass||"translucent"===fe.renderPass){for(var ve=fe.context,Ee=fe.depthModeForSublayer(0,Sr.ReadOnly),Ae=fe.colorModeForRenderPass(),Ge="translucent"===fe.renderPass?fe.stencilConfigForOverlap(Z):[{},Z],ot=Ge[0],Wt=0,ar=Ge[1];Wt<ar.length;Wt+=1){var Yt=ar[Wt],Tt=G.getTile(Yt);Tt.needsHillshadePrepare&&"offscreen"===fe.renderPass?Yu(fe,Tt,ce,Ee,$t.disabled,Ae):"translucent"===fe.renderPass&&If(fe,Tt,ce,Ee,ot[Yt.overscaledZ],Ae)}ve.viewport.set([0,0,fe.width,fe.height])}}function If(fe,G,ce,Z,ve,Ee){var Ae=fe.context,Ge=Ae.gl,ot=G.fbo;if(ot){var xt=fe.useProgram("hillshade");Ae.activeTexture.set(Ge.TEXTURE0),Ge.bindTexture(Ge.TEXTURE_2D,ot.colorAttachment.get());var Wt=bf(fe,G,ce);xt.draw(Ae,Ge.TRIANGLES,Z,ve,Ee,ft.disabled,Wt,ce.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments)}}function Yu(fe,G,ce,Z,ve,Ee){var Ae=fe.context,Ge=Ae.gl,ot=G.dem;if(ot&&ot.data){var xt=ot.dim,Wt=ot.stride,ar=ot.getPixels();if(Ae.activeTexture.set(Ge.TEXTURE1),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||fe.getTileTexture(Wt),G.demTexture){var Yt=G.demTexture;Yt.update(ar,{premultiply:!1}),Yt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else G.demTexture=new t.Texture(Ae,ar,Ge.RGBA,{premultiply:!1}),G.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);Ae.activeTexture.set(Ge.TEXTURE0);var Tt=G.fbo;if(!Tt){var _t=new t.Texture(Ae,{width:xt,height:xt,data:null},Ge.RGBA);_t.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),(Tt=G.fbo=Ae.createFramebuffer(xt,xt,!0)).colorAttachment.set(_t.texture)}Ae.bindFramebuffer.set(Tt.framebuffer),Ae.viewport.set([0,0,xt,xt]),fe.useProgram("hillshadePrepare").draw(Ae,Ge.TRIANGLES,Z,ve,Ee,ft.disabled,iu(G.tileID,ot),ce.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function nf(fe,G,ce,Z){if("translucent"===fe.renderPass&&0!==ce.paint.get("raster-opacity")&&Z.length)for(var ve=fe.context,Ee=ve.gl,Ae=G.getSource(),Ge=fe.useProgram("raster"),ot=fe.colorModeForRenderPass(),xt=Ae instanceof ee?[{},Z]:fe.stencilConfigForOverlap(Z),Wt=xt[0],ar=xt[1],Yt=ar[ar.length-1].overscaledZ,Tt=!fe.options.moving,_t=0,Nt=ar;_t<Nt.length;_t+=1){var rr=Nt[_t],dr=fe.depthModeForSublayer(rr.overscaledZ-Yt,1===ce.paint.get("raster-opacity")?Sr.ReadWrite:Sr.ReadOnly,Ee.LESS),pr=G.getTile(rr),Lr=fe.transform.calculatePosMatrix(rr.toUnwrapped(),Tt);pr.registerFadeDuration(ce.paint.get("raster-fade-duration"));var Tr=G.findLoadedParent(rr,0),mr=af(pr,Tr,G,ce,fe.transform),Er=void 0,fr=void 0,Br="nearest"===ce.paint.get("raster-resampling")?Ee.NEAREST:Ee.LINEAR;ve.activeTexture.set(Ee.TEXTURE0),pr.texture.bind(Br,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ve.activeTexture.set(Ee.TEXTURE1),Tr?(Tr.texture.bind(Br,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),Er=Math.pow(2,Tr.tileID.overscaledZ-pr.tileID.overscaledZ),fr=[pr.tileID.canonical.x*Er%1,pr.tileID.canonical.y*Er%1]):pr.texture.bind(Br,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST);var $r=Zr(Lr,fr||[0,0],Er||1,mr,ce);Ae instanceof ee?Ge.draw(ve,Ee.TRIANGLES,dr,$t.disabled,ot,ft.disabled,$r,ce.id,Ae.boundsBuffer,fe.quadTriangleIndexBuffer,Ae.boundsSegments):Ge.draw(ve,Ee.TRIANGLES,dr,Wt[rr.overscaledZ],ot,ft.disabled,$r,ce.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments)}}function af(fe,G,ce,Z,ve){var Ee=Z.paint.get("raster-fade-duration");if(Ee>0){var Ae=t.browser.now(),Ge=(Ae-fe.timeAdded)/Ee,ot=G?(Ae-G.timeAdded)/Ee:-1,xt=ce.getSource(),Wt=ve.coveringZoomLevel({tileSize:xt.tileSize,roundZoom:xt.roundZoom}),ar=!G||Math.abs(G.tileID.overscaledZ-Wt)>Math.abs(fe.tileID.overscaledZ-Wt),Yt=ar&&fe.refreshedUponExpiration?1:t.clamp(ar?Ge:1-ot,0,1);return fe.refreshedUponExpiration&&Ge>=1&&(fe.refreshedUponExpiration=!1),G?{opacity:1,mix:1-Yt}:{opacity:Yt,mix:0}}return{opacity:1,mix:0}}function Df(fe,G,ce){var Z=ce.paint.get("background-color"),ve=ce.paint.get("background-opacity");if(0!==ve){var Ee=fe.context,Ae=Ee.gl,Ge=fe.transform,ot=Ge.tileSize,xt=ce.paint.get("background-pattern");if(!fe.isPatternMissing(xt)){var Wt=!xt&&1===Z.a&&1===ve&&fe.opaquePassEnabledForLayer()?"opaque":"translucent";if(fe.renderPass===Wt){var ar=$t.disabled,Yt=fe.depthModeForSublayer(0,"opaque"===Wt?Sr.ReadWrite:Sr.ReadOnly),Tt=fe.colorModeForRenderPass(),_t=fe.useProgram(xt?"backgroundPattern":"background"),Nt=Ge.coveringTiles({tileSize:ot});xt&&(Ee.activeTexture.set(Ae.TEXTURE0),fe.imageManager.bind(fe.context));for(var rr=ce.getCrossfadeParameters(),dr=0,pr=Nt;dr<pr.length;dr+=1){var Lr=pr[dr],Tr=fe.transform.calculatePosMatrix(Lr.toUnwrapped()),mr=xt?oi(Tr,ve,fe,xt,{tileID:Lr,tileSize:ot},rr):ii(Tr,ve,Z);_t.draw(Ee,Ae.TRIANGLES,Yt,ar,Tt,ft.disabled,mr,ce.id,fe.tileExtentBuffer,fe.quadTriangleIndexBuffer,fe.tileExtentSegments)}}}}}var Rf=new t.Color(1,0,0,1),of=new t.Color(0,1,0,1),sf=new t.Color(0,0,1,1),Kf=new t.Color(1,0,1,1),Bf=new t.Color(0,1,1,1);function Jf(fe){var G=fe.transform.padding,ce=3;Uf(fe,fe.transform.height-(G.top||0),ce,Rf),Uf(fe,G.bottom||0,ce,of),Hf(fe,G.left||0,ce,sf),Hf(fe,fe.transform.width-(G.right||0),ce,Kf);var Z=fe.transform.centerPoint;Xu(fe,Z.x,fe.transform.height-Z.y,Bf)}function Xu(fe,G,ce,Z){var ve=20,Ee=2;Vf(fe,G-Ee/2,ce-ve/2,Ee,ve,Z),Vf(fe,G-ve/2,ce-Ee/2,ve,Ee,Z)}function Uf(fe,G,ce,Z){Vf(fe,0,G+ce/2,fe.transform.width,ce,Z)}function Hf(fe,G,ce,Z){Vf(fe,G-ce/2,0,ce,fe.transform.height,Z)}function Vf(fe,G,ce,Z,ve,Ee){var Ae=fe.context,Ge=Ae.gl;Ge.enable(Ge.SCISSOR_TEST),Ge.scissor(G*t.browser.devicePixelRatio,ce*t.browser.devicePixelRatio,Z*t.browser.devicePixelRatio,ve*t.browser.devicePixelRatio),Ae.clear({color:Ee}),Ge.disable(Ge.SCISSOR_TEST)}function rc(fe,G,ce){for(var Z=0;Z<ce.length;Z++)nc(fe,G,ce[Z])}function nc(fe,G,ce){var Z=fe.context,ve=Z.gl,Ee=ce.posMatrix,Ae=fe.useProgram("debug"),Ge=Sr.disabled,ot=$t.disabled,xt=fe.colorModeForRenderPass(),Wt="$debug";Z.activeTexture.set(ve.TEXTURE0),fe.emptyTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Ae.draw(Z,ve.LINE_STRIP,Ge,ot,xt,ft.disabled,Eu(Ee,t.Color.red),Wt,fe.debugBuffer,fe.tileBorderIndexBuffer,fe.debugSegments);var ar=G.getTileByID(ce.key).latestRawTileData,Yt=ar&&ar.byteLength||0,Tt=Math.floor(Yt/1024),_t=G.getTile(ce).tileSize,Nt=512/Math.min(_t,512)*(ce.overscaledZ/fe.transform.zoom)*.5,rr=ce.canonical.toString();ce.overscaledZ!==ce.canonical.z&&(rr+=" => "+ce.overscaledZ),Qf(fe,rr+" "+Tt+"kb"),Ae.draw(Z,ve.TRIANGLES,Ge,ot,$e.alphaBlended,ft.disabled,Eu(Ee,t.Color.transparent,Nt),Wt,fe.debugBuffer,fe.quadTriangleIndexBuffer,fe.debugSegments)}function Qf(fe,G){fe.initDebugOverlayCanvas();var ce=fe.debugOverlayCanvas,Z=fe.context.gl,ve=fe.debugOverlayCanvas.getContext("2d");ve.clearRect(0,0,ce.width,ce.height),ve.shadowColor="white",ve.shadowBlur=2,ve.lineWidth=1.5,ve.strokeStyle="white",ve.textBaseline="top",ve.font="bold 36px Open Sans, sans-serif",ve.fillText(G,5,5),ve.strokeText(G,5,5),fe.debugOverlayTexture.update(ce),fe.debugOverlayTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}function lf(fe,G,ce){var Z=fe.context,ve=ce.implementation;if("offscreen"===fe.renderPass){var Ee=ve.prerender;Ee&&(fe.setCustomLayerDefaults(),Z.setColorMode(fe.colorModeForRenderPass()),Ee.call(ve,Z.gl,fe.transform.customLayerMatrix()),Z.setDirty(),fe.setBaseState())}else if("translucent"===fe.renderPass){fe.setCustomLayerDefaults(),Z.setColorMode(fe.colorModeForRenderPass()),Z.setStencilMode($t.disabled);var Ae="3d"===ve.renderingMode?new Sr(fe.context.gl.LEQUAL,Sr.ReadWrite,fe.depthRangeFor3D):fe.depthModeForSublayer(0,Sr.ReadOnly);Z.setDepthMode(Ae),ve.render(Z.gl,fe.transform.customLayerMatrix()),Z.setDirty(),fe.setBaseState(),Z.bindFramebuffer.set(null)}}var Xs={symbol:no,circle:Ia,heatmap:Ri,line:Bl,fill:cl,"fill-extrusion":xl,hillshade:_s,raster:nf,background:Df,debug:rc,custom:lf},Mo=function(G,ce){this.context=new Ct(G),this.transform=ce,this._tileTextures={},this.setup(),this.numSublayers=sr.maxUnderzooming+sr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Os,this.gpuTimers={}};Mo.prototype.resize=function(G,ce){if(this.width=G*t.browser.devicePixelRatio,this.height=ce*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var Z=0,ve=this.style._order;Z<ve.length;Z+=1){var Ee=ve[Z];this.style._layers[Ee].resize()}},Mo.prototype.setup=function(){var G=this.context,ce=new t.StructArrayLayout2i4;ce.emplaceBack(0,0),ce.emplaceBack(t.EXTENT,0),ce.emplaceBack(0,t.EXTENT),ce.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=G.createVertexBuffer(ce,xs.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Z=new t.StructArrayLayout2i4;Z.emplaceBack(0,0),Z.emplaceBack(t.EXTENT,0),Z.emplaceBack(0,t.EXTENT),Z.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=G.createVertexBuffer(Z,xs.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var ve=new t.StructArrayLayout4i8;ve.emplaceBack(0,0,0,0),ve.emplaceBack(t.EXTENT,0,t.EXTENT,0),ve.emplaceBack(0,t.EXTENT,0,t.EXTENT),ve.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=G.createVertexBuffer(ve,j.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Ee=new t.StructArrayLayout2i4;Ee.emplaceBack(0,0),Ee.emplaceBack(1,0),Ee.emplaceBack(0,1),Ee.emplaceBack(1,1),this.viewportBuffer=G.createVertexBuffer(Ee,xs.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Ae=new t.StructArrayLayout1ui2;Ae.emplaceBack(0),Ae.emplaceBack(1),Ae.emplaceBack(3),Ae.emplaceBack(2),Ae.emplaceBack(0),this.tileBorderIndexBuffer=G.createIndexBuffer(Ae);var Ge=new t.StructArrayLayout3ui6;Ge.emplaceBack(0,1,2),Ge.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=G.createIndexBuffer(Ge),this.emptyTexture=new t.Texture(G,{width:1,height:1,data:new Uint8Array([0,0,0,0])},G.gl.RGBA);var ot=this.context.gl;this.stencilClearMode=new $t({func:ot.ALWAYS,mask:0},0,255,ot.ZERO,ot.ZERO,ot.ZERO)},Mo.prototype.clearStencil=function(){var G=this.context,ce=G.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var Z=t.create();t.ortho(Z,0,this.width,this.height,0,0,1),t.scale(Z,Z,[ce.drawingBufferWidth,ce.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(G,ce.TRIANGLES,Sr.disabled,this.stencilClearMode,$e.disabled,ft.disabled,au(Z),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Mo.prototype._renderTileClippingMasks=function(G,ce){if(this.currentStencilSource!==G.source&&G.isTileClipped()&&ce&&ce.length){this.currentStencilSource=G.source;var Z=this.context,ve=Z.gl;this.nextStencilID+ce.length>256&&this.clearStencil(),Z.setColorMode($e.disabled),Z.setDepthMode(Sr.disabled);var Ee=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ae=0,Ge=ce;Ae<Ge.length;Ae+=1){var ot=Ge[Ae],xt=this._tileClippingMaskIDs[ot.key]=this.nextStencilID++;Ee.draw(Z,ve.TRIANGLES,Sr.disabled,new $t({func:ve.ALWAYS,mask:0},xt,255,ve.KEEP,ve.KEEP,ve.REPLACE),$e.disabled,ft.disabled,au(ot.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Mo.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var G=this.nextStencilID++,ce=this.context.gl;return new $t({func:ce.NOTEQUAL,mask:255},G,255,ce.KEEP,ce.KEEP,ce.REPLACE)},Mo.prototype.stencilModeForClipping=function(G){var ce=this.context.gl;return new $t({func:ce.EQUAL,mask:255},this._tileClippingMaskIDs[G.key],0,ce.KEEP,ce.KEEP,ce.REPLACE)},Mo.prototype.stencilConfigForOverlap=function(G){var ce,Z=this.context.gl,ve=G.sort(function(xt,Wt){return Wt.overscaledZ-xt.overscaledZ}),Ee=ve[ve.length-1].overscaledZ,Ae=ve[0].overscaledZ-Ee+1;if(Ae>1){this.currentStencilSource=void 0,this.nextStencilID+Ae>256&&this.clearStencil();for(var Ge={},ot=0;ot<Ae;ot++)Ge[ot+Ee]=new $t({func:Z.GEQUAL,mask:255},ot+this.nextStencilID,255,Z.KEEP,Z.KEEP,Z.REPLACE);return this.nextStencilID+=Ae,[Ge,ve]}return[(ce={},ce[Ee]=$t.disabled,ce),ve]},Mo.prototype.colorModeForRenderPass=function(){var G=this.context.gl;if(this._showOverdrawInspector){var Z=1/8;return new $e([G.CONSTANT_COLOR,G.ONE],new t.Color(Z,Z,Z,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?$e.unblended:$e.alphaBlended},Mo.prototype.depthModeForSublayer=function(G,ce,Z){if(!this.opaquePassEnabledForLayer())return Sr.disabled;var ve=1-((1+this.currentLayer)*this.numSublayers+G)*this.depthEpsilon;return new Sr(Z||this.context.gl.LEQUAL,ce,[ve,ve])},Mo.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Mo.prototype.render=function(G,ce){var Z=this;this.style=G,this.options=ce,this.lineAtlas=G.lineAtlas,this.imageManager=G.imageManager,this.glyphManager=G.glyphManager,this.symbolFadeChange=G.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var ve=this.style._order,Ee=this.style.sourceCaches;for(var Ae in Ee){var Ge=Ee[Ae];Ge.used&&Ge.prepare(this.context)}var ln,zn,ot={},xt={},Wt={};for(var ar in Ee){var Yt=Ee[ar];ot[ar]=Yt.getVisibleCoordinates(),xt[ar]=ot[ar].slice().reverse(),Wt[ar]=Yt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Tt=0;Tt<ve.length;Tt++){var _t=ve[Tt];if(this.style._layers[_t].is3D()){this.opaquePassCutoff=Tt;break}}this.renderPass="offscreen";for(var Nt=0,rr=ve;Nt<rr.length;Nt+=1){var dr=rr[Nt],pr=this.style._layers[dr];if(pr.hasOffscreenPass()&&!pr.isHidden(this.transform.zoom)){var Lr=xt[pr.source];"custom"!==pr.type&&!Lr.length||this.renderLayer(this,Ee[pr.source],pr,Lr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ce.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ce.showOverdrawInspector,this.depthRangeFor3D=[0,1-(G._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ve.length-1;this.currentLayer>=0;this.currentLayer--){var Tr=this.style._layers[ve[this.currentLayer]],mr=Ee[Tr.source],Er=ot[Tr.source];this._renderTileClippingMasks(Tr,Er),this.renderLayer(this,mr,Tr,Er)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ve.length;this.currentLayer++){var fr=this.style._layers[ve[this.currentLayer]],Br=Ee[fr.source],$r=("symbol"===fr.type?Wt:xt)[fr.source];this._renderTileClippingMasks(fr,ot[fr.source]),this.renderLayer(this,Br,fr,$r)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Nn){Nn.source&&!Nn.isHidden(Z.transform.zoom)&&(Nn.source!==(zn&&zn.id)&&(zn=Z.style.sourceCaches[Nn.source]),(!ln||ln.getSource().maxzoom<zn.getSource().maxzoom)&&(ln=zn))}),ln&&Xs.debug(this,ln,ln.getVisibleCoordinates())),this.options.showPadding&&Jf(this),this.context.setDefault()},Mo.prototype.renderLayer=function(G,ce,Z,ve){Z.isHidden(this.transform.zoom)||"background"!==Z.type&&"custom"!==Z.type&&!ve.length||(this.id=Z.id,this.gpuTimingStart(Z),Xs[Z.type](G,ce,Z,ve,this.style.placement.variableOffsets),this.gpuTimingEnd())},Mo.prototype.gpuTimingStart=function(G){if(this.options.gpuTiming){var ce=this.context.extTimerQuery,Z=this.gpuTimers[G.id];Z||(Z=this.gpuTimers[G.id]={calls:0,cpuTime:0,query:ce.createQueryEXT()}),Z.calls++,ce.beginQueryEXT(ce.TIME_ELAPSED_EXT,Z.query)}},Mo.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var G=this.context.extTimerQuery;G.endQueryEXT(G.TIME_ELAPSED_EXT)}},Mo.prototype.collectGpuTimers=function(){var G=this.gpuTimers;return this.gpuTimers={},G},Mo.prototype.queryGpuTimers=function(G){var ce={};for(var Z in G){var ve=G[Z],Ee=this.context.extTimerQuery,Ae=Ee.getQueryObjectEXT(ve.query,Ee.QUERY_RESULT_EXT)/1e6;Ee.deleteQueryEXT(ve.query),ce[Z]=Ae}return ce},Mo.prototype.translatePosMatrix=function(G,ce,Z,ve,Ee){if(!Z[0]&&!Z[1])return G;var Ae=Ee?"map"===ve?this.transform.angle:0:"viewport"===ve?-this.transform.angle:0;if(Ae){var Ge=Math.sin(Ae),ot=Math.cos(Ae);Z=[Z[0]*ot-Z[1]*Ge,Z[0]*Ge+Z[1]*ot]}var xt=[Ee?Z[0]:gn(ce,Z[0],this.transform.zoom),Ee?Z[1]:gn(ce,Z[1],this.transform.zoom),0],Wt=new Float32Array(16);return t.translate(Wt,G,xt),Wt},Mo.prototype.saveTileTexture=function(G){var ce=this._tileTextures[G.size[0]];ce?ce.push(G):this._tileTextures[G.size[0]]=[G]},Mo.prototype.getTileTexture=function(G){var ce=this._tileTextures[G];return ce&&ce.length>0?ce.pop():null},Mo.prototype.isPatternMissing=function(G){if(!G)return!1;if(!G.from||!G.to)return!0;var ce=this.imageManager.getPattern(G.from.toString()),Z=this.imageManager.getPattern(G.to.toString());return!ce||!Z},Mo.prototype.useProgram=function(G,ce){this.cache=this.cache||{};var Z=""+G+(ce?ce.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Z]||(this.cache[Z]=new Lf(this.context,G,Au[G],ce,fa[G],this._showOverdrawInspector)),this.cache[Z]},Mo.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Mo.prototype.setBaseState=function(){var G=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(G.FUNC_ADD)},Mo.prototype.initDebugOverlayCanvas=function(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var G=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,G.RGBA)}},Mo.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Jl=function(G,ce){this.points=G,this.planes=ce};Jl.fromInvProjectionMatrix=function(G,ce,Z){var ve=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ee=Math.pow(2,Z),Ae=ve.map(function(xt){return t.transformMat4([],xt,G)}).map(function(xt){return t.scale$1([],xt,1/xt[3]/ce*Ee)}),ot=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(xt){var Wt=t.sub([],Ae[xt[0]],Ae[xt[1]]),ar=t.sub([],Ae[xt[2]],Ae[xt[1]]),Yt=t.normalize([],t.cross([],Wt,ar)),Tt=-t.dot(Yt,Ae[xt[1]]);return Yt.concat(Tt)});return new Jl(Ae,ot)};var bl=function(G,ce){this.min=G,this.max=ce,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};bl.prototype.quadrant=function(G){for(var ce=[G%2==0,G<2],Z=t.clone$2(this.min),ve=t.clone$2(this.max),Ee=0;Ee<ce.length;Ee++)Z[Ee]=ce[Ee]?this.min[Ee]:this.center[Ee],ve[Ee]=ce[Ee]?this.center[Ee]:this.max[Ee];return ve[2]=this.max[2],new bl(Z,ve)},bl.prototype.distanceX=function(G){return Math.max(Math.min(this.max[0],G[0]),this.min[0])-G[0]},bl.prototype.distanceY=function(G){return Math.max(Math.min(this.max[1],G[1]),this.min[1])-G[1]},bl.prototype.intersects=function(G){for(var ce=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Z=!0,ve=0;ve<G.planes.length;ve++){for(var Ee=G.planes[ve],Ae=0,Ge=0;Ge<ce.length;Ge++)Ae+=t.dot$1(Ee,ce[Ge])>=0;if(0===Ae)return 0;Ae!==ce.length&&(Z=!1)}if(Z)return 2;for(var ot=0;ot<3;ot++){for(var xt=Number.MAX_VALUE,Wt=-Number.MAX_VALUE,ar=0;ar<G.points.length;ar++){var Yt=G.points[ar][ot]-this.min[ot];xt=Math.min(xt,Yt),Wt=Math.max(Wt,Yt)}if(Wt<0||xt>this.max[ot]-this.min[ot])return 0}return 1};var lo=function(G,ce,Z,ve){if(void 0===G&&(G=0),void 0===ce&&(ce=0),void 0===Z&&(Z=0),void 0===ve&&(ve=0),isNaN(G)||G<0||isNaN(ce)||ce<0||isNaN(Z)||Z<0||isNaN(ve)||ve<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=G,this.bottom=ce,this.left=Z,this.right=ve};lo.prototype.interpolate=function(G,ce,Z){return null!=ce.top&&null!=G.top&&(this.top=t.number(G.top,ce.top,Z)),null!=ce.bottom&&null!=G.bottom&&(this.bottom=t.number(G.bottom,ce.bottom,Z)),null!=ce.left&&null!=G.left&&(this.left=t.number(G.left,ce.left,Z)),null!=ce.right&&null!=G.right&&(this.right=t.number(G.right,ce.right,Z)),this},lo.prototype.getCenter=function(G,ce){var Z=t.clamp((this.left+G-this.right)/2,0,G),ve=t.clamp((this.top+ce-this.bottom)/2,0,ce);return new t.Point(Z,ve)},lo.prototype.equals=function(G){return this.top===G.top&&this.bottom===G.bottom&&this.left===G.left&&this.right===G.right},lo.prototype.clone=function(){return new lo(this.top,this.bottom,this.left,this.right)},lo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Vi=function(G,ce,Z,ve,Ee){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===Ee||Ee,this._minZoom=G||0,this._maxZoom=ce||22,this._minPitch=Z??0,this._maxPitch=ve??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new lo,this._posMatrixCache={},this._alignedPosMatrixCache={}},$i={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};function Pu(fe,G){var ce=!1,Z=null,ve=function(){Z=null,ce&&(fe(),Z=setTimeout(ve,G),ce=!1)};return function(){return ce=!0,Z||ve(),Z}}Vi.prototype.clone=function(){var G=new Vi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return G.tileSize=this.tileSize,G.latRange=this.latRange,G.width=this.width,G.height=this.height,G._center=this._center,G.zoom=this.zoom,G.angle=this.angle,G._fov=this._fov,G._pitch=this._pitch,G._unmodified=this._unmodified,G._edgeInsets=this._edgeInsets.clone(),G._calcMatrices(),G},$i.minZoom.get=function(){return this._minZoom},$i.minZoom.set=function(fe){this._minZoom!==fe&&(this._minZoom=fe,this.zoom=Math.max(this.zoom,fe))},$i.maxZoom.get=function(){return this._maxZoom},$i.maxZoom.set=function(fe){this._maxZoom!==fe&&(this._maxZoom=fe,this.zoom=Math.min(this.zoom,fe))},$i.minPitch.get=function(){return this._minPitch},$i.minPitch.set=function(fe){this._minPitch!==fe&&(this._minPitch=fe,this.pitch=Math.max(this.pitch,fe))},$i.maxPitch.get=function(){return this._maxPitch},$i.maxPitch.set=function(fe){this._maxPitch!==fe&&(this._maxPitch=fe,this.pitch=Math.min(this.pitch,fe))},$i.renderWorldCopies.get=function(){return this._renderWorldCopies},$i.renderWorldCopies.set=function(fe){void 0===fe?fe=!0:null===fe&&(fe=!1),this._renderWorldCopies=fe},$i.worldSize.get=function(){return this.tileSize*this.scale},$i.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},$i.size.get=function(){return new t.Point(this.width,this.height)},$i.bearing.get=function(){return-this.angle/Math.PI*180},$i.bearing.set=function(fe){var G=-t.wrap(fe,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},$i.pitch.get=function(){return this._pitch/Math.PI*180},$i.pitch.set=function(fe){var G=t.clamp(fe,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},$i.fov.get=function(){return this._fov/Math.PI*180},$i.fov.set=function(fe){fe=Math.max(.01,Math.min(60,fe)),this._fov!==fe&&(this._unmodified=!1,this._fov=fe/180*Math.PI,this._calcMatrices())},$i.zoom.get=function(){return this._zoom},$i.zoom.set=function(fe){var G=Math.min(Math.max(fe,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},$i.center.get=function(){return this._center},$i.center.set=function(fe){fe.lat===this._center.lat&&fe.lng===this._center.lng||(this._unmodified=!1,this._center=fe,this._constrain(),this._calcMatrices())},$i.padding.get=function(){return this._edgeInsets.toJSON()},$i.padding.set=function(fe){this._edgeInsets.equals(fe)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,fe,1),this._calcMatrices())},$i.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Vi.prototype.isPaddingEqual=function(G){return this._edgeInsets.equals(G)},Vi.prototype.interpolatePadding=function(G,ce,Z){this._unmodified=!1,this._edgeInsets.interpolate(G,ce,Z),this._constrain(),this._calcMatrices()},Vi.prototype.coveringZoomLevel=function(G){var ce=(G.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/G.tileSize));return Math.max(0,ce)},Vi.prototype.getVisibleUnwrappedCoordinates=function(G){var ce=[new t.UnwrappedTileID(0,G)];if(this._renderWorldCopies)for(var Z=this.pointCoordinate(new t.Point(0,0)),ve=this.pointCoordinate(new t.Point(this.width,0)),Ee=this.pointCoordinate(new t.Point(this.width,this.height)),Ae=this.pointCoordinate(new t.Point(0,this.height)),Ge=Math.floor(Math.min(Z.x,ve.x,Ee.x,Ae.x)),ot=Math.floor(Math.max(Z.x,ve.x,Ee.x,Ae.x)),xt=1,Wt=Ge-xt;Wt<=ot+xt;Wt++)0!==Wt&&ce.push(new t.UnwrappedTileID(Wt,G));return ce},Vi.prototype.coveringTiles=function(G){var ce=this.coveringZoomLevel(G),Z=ce;if(void 0!==G.minzoom&&ce<G.minzoom)return[];void 0!==G.maxzoom&&ce>G.maxzoom&&(ce=G.maxzoom);var ve=t.MercatorCoordinate.fromLngLat(this.center),Ee=Math.pow(2,ce),Ae=[Ee*ve.x,Ee*ve.y,0],Ge=Jl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ce),ot=G.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ot=ce);var xt=3,Wt=function(En){return{aabb:new bl([En*Ee,0,0],[(En+1)*Ee,Ee,0]),zoom:0,x:0,y:0,wrap:En,fullyVisible:!1}},ar=[],Yt=[],Tt=ce,_t=G.reparseOverscaled?Z:ce;if(this._renderWorldCopies)for(var Nt=1;Nt<=3;Nt++)ar.push(Wt(-Nt)),ar.push(Wt(Nt));for(ar.push(Wt(0));ar.length>0;){var rr=ar.pop(),dr=rr.x,pr=rr.y,Lr=rr.fullyVisible;if(!Lr){var Tr=rr.aabb.intersects(Ge);if(0===Tr)continue;Lr=2===Tr}var mr=rr.aabb.distanceX(Ae),Er=rr.aabb.distanceY(Ae),fr=Math.max(Math.abs(mr),Math.abs(Er)),Br=xt+(1<<Tt-rr.zoom)-2;if(rr.zoom===Tt||fr>Br&&rr.zoom>=ot)Yt.push({tileID:new t.OverscaledTileID(rr.zoom===Tt?_t:rr.zoom,rr.wrap,rr.zoom,dr,pr),distanceSq:t.sqrLen([Ae[0]-.5-dr,Ae[1]-.5-pr])});else for(var $r=0;$r<4;$r++){var ln=(dr<<1)+$r%2,zn=(pr<<1)+($r>>1);ar.push({aabb:rr.aabb.quadrant($r),zoom:rr.zoom+1,x:ln,y:zn,wrap:rr.wrap,fullyVisible:Lr})}}return Yt.sort(function(En,Nn){return En.distanceSq-Nn.distanceSq}).map(function(En){return En.tileID})},Vi.prototype.resize=function(G,ce){this.width=G,this.height=ce,this.pixelsToGLUnits=[2/G,-2/ce],this._constrain(),this._calcMatrices()},$i.unmodified.get=function(){return this._unmodified},Vi.prototype.zoomScale=function(G){return Math.pow(2,G)},Vi.prototype.scaleZoom=function(G){return Math.log(G)/Math.LN2},Vi.prototype.project=function(G){var ce=t.clamp(G.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(G.lng)*this.worldSize,t.mercatorYfromLat(ce)*this.worldSize)},Vi.prototype.unproject=function(G){return new t.MercatorCoordinate(G.x/this.worldSize,G.y/this.worldSize).toLngLat()},$i.point.get=function(){return this.project(this.center)},Vi.prototype.setLocationAtPoint=function(G,ce){var Z=this.pointCoordinate(ce),ve=this.pointCoordinate(this.centerPoint),Ee=this.locationCoordinate(G),Ae=new t.MercatorCoordinate(Ee.x-(Z.x-ve.x),Ee.y-(Z.y-ve.y));this.center=this.coordinateLocation(Ae),this._renderWorldCopies&&(this.center=this.center.wrap())},Vi.prototype.locationPoint=function(G){return this.coordinatePoint(this.locationCoordinate(G))},Vi.prototype.pointLocation=function(G){return this.coordinateLocation(this.pointCoordinate(G))},Vi.prototype.locationCoordinate=function(G){return t.MercatorCoordinate.fromLngLat(G)},Vi.prototype.coordinateLocation=function(G){return G.toLngLat()},Vi.prototype.pointCoordinate=function(G){var ce=0,Z=[G.x,G.y,0,1],ve=[G.x,G.y,1,1];t.transformMat4(Z,Z,this.pixelMatrixInverse),t.transformMat4(ve,ve,this.pixelMatrixInverse);var Ee=Z[3],Ae=ve[3],Ge=Z[0]/Ee,ot=ve[0]/Ae,xt=Z[1]/Ee,Wt=ve[1]/Ae,ar=Z[2]/Ee,Yt=ve[2]/Ae,Tt=ar===Yt?0:(ce-ar)/(Yt-ar);return new t.MercatorCoordinate(t.number(Ge,ot,Tt)/this.worldSize,t.number(xt,Wt,Tt)/this.worldSize)},Vi.prototype.coordinatePoint=function(G){var ce=[G.x*this.worldSize,G.y*this.worldSize,0,1];return t.transformMat4(ce,ce,this.pixelMatrix),new t.Point(ce[0]/ce[3],ce[1]/ce[3])},Vi.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Vi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Vi.prototype.setMaxBounds=function(G){G?(this.lngRange=[G.getWest(),G.getEast()],this.latRange=[G.getSouth(),G.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Vi.prototype.calculatePosMatrix=function(G,ce){void 0===ce&&(ce=!1);var Z=G.key,ve=ce?this._alignedPosMatrixCache:this._posMatrixCache;if(ve[Z])return ve[Z];var Ee=G.canonical,Ae=this.worldSize/this.zoomScale(Ee.z),Ge=Ee.x+Math.pow(2,Ee.z)*G.wrap,ot=t.identity(new Float64Array(16));return t.translate(ot,ot,[Ge*Ae,Ee.y*Ae,0]),t.scale(ot,ot,[Ae/t.EXTENT,Ae/t.EXTENT,1]),t.multiply(ot,ce?this.alignedProjMatrix:this.projMatrix,ot),ve[Z]=new Float32Array(ot),ve[Z]},Vi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Vi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var Ee,Ae,Ge,ot,G=-90,ce=90,Z=-180,ve=180,xt=this.size,Wt=this._unmodified;if(this.latRange){var ar=this.latRange;G=t.mercatorYfromLat(ar[1])*this.worldSize,Ee=(ce=t.mercatorYfromLat(ar[0])*this.worldSize)-G<xt.y?xt.y/(ce-G):0}if(this.lngRange){var Yt=this.lngRange;Z=t.mercatorXfromLng(Yt[0])*this.worldSize,Ae=(ve=t.mercatorXfromLng(Yt[1])*this.worldSize)-Z<xt.x?xt.x/(ve-Z):0}var Tt=this.point,_t=Math.max(Ae||0,Ee||0);if(_t)return this.center=this.unproject(new t.Point(Ae?(ve+Z)/2:Tt.x,Ee?(ce+G)/2:Tt.y)),this.zoom+=this.scaleZoom(_t),this._unmodified=Wt,void(this._constraining=!1);if(this.latRange){var Nt=Tt.y,rr=xt.y/2;Nt-rr<G&&(ot=G+rr),Nt+rr>ce&&(ot=ce-rr)}if(this.lngRange){var dr=Tt.x,pr=xt.x/2;dr-pr<Z&&(Ge=Z+pr),dr+pr>ve&&(Ge=ve-pr)}(void 0!==Ge||void 0!==ot)&&(this.center=this.unproject(new t.Point(void 0!==Ge?Ge:Tt.x,void 0!==ot?ot:Tt.y))),this._unmodified=Wt,this._constraining=!1}},Vi.prototype._calcMatrices=function(){if(this.height){var G=this._fov/2,ce=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(G)*this.height;var Z=Math.PI/2+this._pitch,ve=this._fov*(.5+ce.y/this.height),Ee=Math.sin(ve)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-Z-ve,.01,Math.PI-.01)),Ae=this.point,Ge=Ae.x,ot=Ae.y,Wt=1.01*(Math.cos(Math.PI/2-this._pitch)*Ee+this.cameraToCenterDistance),ar=this.height/50,Yt=new Float64Array(16);t.perspective(Yt,this._fov,this.width/this.height,ar,Wt),Yt[8]=2*-ce.x/this.width,Yt[9]=2*ce.y/this.height,t.scale(Yt,Yt,[1,-1,1]),t.translate(Yt,Yt,[0,0,-this.cameraToCenterDistance]),t.rotateX(Yt,Yt,this._pitch),t.rotateZ(Yt,Yt,this.angle),t.translate(Yt,Yt,[-Ge,-ot,0]),this.mercatorMatrix=t.scale([],Yt,[this.worldSize,this.worldSize,this.worldSize]),t.scale(Yt,Yt,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Yt,this.invProjMatrix=t.invert([],this.projMatrix);var Tt=this.width%2/2,_t=this.height%2/2,Nt=Math.cos(this.angle),rr=Math.sin(this.angle),dr=Ge-Math.round(Ge)+Nt*Tt+rr*_t,pr=ot-Math.round(ot)+Nt*_t+rr*Tt,Lr=new Float64Array(Yt);if(t.translate(Lr,Lr,[dr>.5?dr-1:dr,pr>.5?pr-1:pr,0]),this.alignedProjMatrix=Lr,Yt=t.create(),t.scale(Yt,Yt,[this.width/2,-this.height/2,1]),t.translate(Yt,Yt,[1,-1,0]),this.labelPlaneMatrix=Yt,Yt=t.create(),t.scale(Yt,Yt,[1,-1,1]),t.translate(Yt,Yt,[-1,-1,0]),t.scale(Yt,Yt,[2/this.width,2/this.height,1]),this.glCoordMatrix=Yt,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Yt=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Yt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Vi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var G=this.pointCoordinate(new t.Point(0,0)),ce=[G.x*this.worldSize,G.y*this.worldSize,0,1];return t.transformMat4(ce,ce,this.pixelMatrix)[3]/this.cameraToCenterDistance},Vi.prototype.getCameraPoint=function(){var G=this._pitch,ce=Math.tan(G)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,ce))},Vi.prototype.getCameraQueryGeometry=function(G){var ce=this.getCameraPoint();if(1===G.length)return[G[0],ce];for(var Z=ce.x,ve=ce.y,Ee=ce.x,Ae=ce.y,Ge=0,ot=G;Ge<ot.length;Ge+=1){var xt=ot[Ge];Z=Math.min(Z,xt.x),ve=Math.min(ve,xt.y),Ee=Math.max(Ee,xt.x),Ae=Math.max(Ae,xt.y)}return[new t.Point(Z,ve),new t.Point(Ee,ve),new t.Point(Ee,Ae),new t.Point(Z,Ae),new t.Point(Z,ve)]},Object.defineProperties(Vi.prototype,$i);var wl=function(G){this._hashName=G&&encodeURIComponent(G),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Pu(this._updateHashUnthrottled.bind(this),300)};wl.prototype.addTo=function(G){return this._map=G,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},wl.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},wl.prototype.getHashString=function(G){var ce=this._map.getCenter(),Z=Math.round(100*this._map.getZoom())/100,ve=Math.ceil((Z*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ee=Math.pow(10,ve),Ae=Math.round(ce.lng*Ee)/Ee,Ge=Math.round(ce.lat*Ee)/Ee,ot=this._map.getBearing(),xt=this._map.getPitch(),Wt="";if(Wt+=G?"/"+Ae+"/"+Ge+"/"+Z:Z+"/"+Ge+"/"+Ae,(ot||xt)&&(Wt+="/"+Math.round(10*ot)/10),xt&&(Wt+="/"+Math.round(xt)),this._hashName){var ar=this._hashName,Yt=!1,Tt=t.window.location.hash.slice(1).split("&").map(function(_t){var Nt=_t.split("=")[0];return Nt===ar?(Yt=!0,Nt+"="+Wt):_t}).filter(function(_t){return _t});return Yt||Tt.push(ar+"="+Wt),"#"+Tt.join("&")}return"#"+Wt},wl.prototype._getCurrentHash=function(){var Z,G=this,ce=t.window.location.hash.replace("#","");return this._hashName?(ce.split("&").map(function(ve){return ve.split("=")}).forEach(function(ve){ve[0]===G._hashName&&(Z=ve)}),(Z&&Z[1]||"").split("/")):ce.split("/")},wl.prototype._onHashChange=function(){var G=this._getCurrentHash();if(G.length>=3&&!G.some(function(Z){return isNaN(Z)})){var ce=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(G[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+G[2],+G[1]],zoom:+G[0],bearing:ce,pitch:+(G[4]||0)}),!0}return!1},wl.prototype._updateHashUnthrottled=function(){var G=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,G)}catch{}};var uf={linearity:.3,easing:t.bezier(0,0,.3,1)},Ul=t.extend({deceleration:2500,maxSpeed:1400},uf),Tl=t.extend({deceleration:20,maxSpeed:1400},uf),Zs=t.extend({deceleration:1e3,maxSpeed:360},uf),Gf=t.extend({deceleration:1e3,maxSpeed:90},uf),su=function(G){this._map=G,this.clear()};function lu(fe,G){(!fe.duration||fe.duration<G.duration)&&(fe.duration=G.duration,fe.easing=G.easing)}function Wa(fe,G,ce){var Z=ce.maxSpeed,ve=ce.linearity,Ee=ce.deceleration,Ae=t.clamp(fe*ve/(G/1e3),-Z,Z),Ge=Math.abs(Ae)/(Ee*ve);return{easing:ce.easing,duration:1e3*Ge,amount:Ae*(Ge/2)}}su.prototype.clear=function(){this._inertiaBuffer=[]},su.prototype.record=function(G){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:G})},su.prototype._drainInertiaBuffer=function(){for(var G=this._inertiaBuffer,ce=t.browser.now(),Z=160;G.length>0&&ce-G[0].time>Z;)G.shift()},su.prototype._onMoveEnd=function(G){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ce={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},Z=0,ve=this._inertiaBuffer;Z<ve.length;Z+=1){var Ae=ve[Z].settings;ce.zoom+=Ae.zoomDelta||0,ce.bearing+=Ae.bearingDelta||0,ce.pitch+=Ae.pitchDelta||0,Ae.panDelta&&ce.pan._add(Ae.panDelta),Ae.around&&(ce.around=Ae.around),Ae.pinchAround&&(ce.pinchAround=Ae.pinchAround)}var ot=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,xt={};if(ce.pan.mag()){var Wt=Wa(ce.pan.mag(),ot,t.extend({},Ul,G||{}));xt.offset=ce.pan.mult(Wt.amount/ce.pan.mag()),xt.center=this._map.transform.center,lu(xt,Wt)}if(ce.zoom){var ar=Wa(ce.zoom,ot,Tl);xt.zoom=this._map.transform.zoom+ar.amount,lu(xt,ar)}if(ce.bearing){var Yt=Wa(ce.bearing,ot,Zs);xt.bearing=this._map.transform.bearing+t.clamp(Yt.amount,-179,179),lu(xt,Yt)}if(ce.pitch){var Tt=Wa(ce.pitch,ot,Gf);xt.pitch=this._map.transform.pitch+Tt.amount,lu(xt,Tt)}if(xt.zoom||xt.bearing){var _t=void 0===ce.pinchAround?ce.around:ce.pinchAround;xt.around=_t?this._map.unproject(_t):this._map.getCenter()}return this.clear(),t.extend(xt,{noMoveStart:!0})}};var ns=function(fe){function G(Z,ve,Ee,Ae){void 0===Ae&&(Ae={});var Ge=n.mousePos(ve.getCanvasContainer(),Ee),ot=ve.unproject(Ge);fe.call(this,Z,t.extend({point:Ge,lngLat:ot,originalEvent:Ee},Ae)),this._defaultPrevented=!1,this.target=ve}fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G;var ce={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},ce.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,ce),G}(t.Event),Zu=function(fe){function G(Z,ve,Ee){var Ae="touchend"===Z?Ee.changedTouches:Ee.touches,Ge=n.touchPos(ve.getCanvasContainer(),Ae),ot=Ge.map(function(ar){return ve.unproject(ar)}),xt=Ge.reduce(function(ar,Yt,Tt,_t){return ar.add(Yt.div(_t.length))},new t.Point(0,0)),Wt=ve.unproject(xt);fe.call(this,Z,{points:Ge,point:xt,lngLats:ot,lngLat:Wt,originalEvent:Ee}),this._defaultPrevented=!1}fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G;var ce={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},ce.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,ce),G}(t.Event),jf=function(fe){function G(Z,ve,Ee){fe.call(this,Z,{originalEvent:Ee}),this._defaultPrevented=!1}fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G;var ce={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},ce.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,ce),G}(t.Event),le=function(G,ce){this._map=G,this._clickTolerance=ce.clickTolerance};le.prototype.reset=function(){delete this._mousedownPos},le.prototype.wheel=function(G){return this._firePreventable(new jf(G.type,this._map,G))},le.prototype.mousedown=function(G,ce){return this._mousedownPos=ce,this._firePreventable(new ns(G.type,this._map,G))},le.prototype.mouseup=function(G){this._map.fire(new ns(G.type,this._map,G))},le.prototype.click=function(G,ce){this._mousedownPos&&this._mousedownPos.dist(ce)>=this._clickTolerance||this._map.fire(new ns(G.type,this._map,G))},le.prototype.dblclick=function(G){return this._firePreventable(new ns(G.type,this._map,G))},le.prototype.mouseover=function(G){this._map.fire(new ns(G.type,this._map,G))},le.prototype.mouseout=function(G){this._map.fire(new ns(G.type,this._map,G))},le.prototype.touchstart=function(G){return this._firePreventable(new Zu(G.type,this._map,G))},le.prototype.touchmove=function(G){this._map.fire(new Zu(G.type,this._map,G))},le.prototype.touchend=function(G){this._map.fire(new Zu(G.type,this._map,G))},le.prototype.touchcancel=function(G){this._map.fire(new Zu(G.type,this._map,G))},le.prototype._firePreventable=function(G){if(this._map.fire(G),G.defaultPrevented)return{}},le.prototype.isEnabled=function(){return!0},le.prototype.isActive=function(){return!1},le.prototype.enable=function(){},le.prototype.disable=function(){};var xe=function(G){this._map=G};xe.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},xe.prototype.mousemove=function(G){this._map.fire(new ns(G.type,this._map,G))},xe.prototype.mousedown=function(){this._delayContextMenu=!0},xe.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ns("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},xe.prototype.contextmenu=function(G){this._delayContextMenu?this._contextMenuEvent=G:this._map.fire(new ns(G.type,this._map,G)),this._map.listens("contextmenu")&&G.preventDefault()},xe.prototype.isEnabled=function(){return!0},xe.prototype.isActive=function(){return!1},xe.prototype.enable=function(){},xe.prototype.disable=function(){};var Re=function(G,ce){this._map=G,this._el=G.getCanvasContainer(),this._container=G.getContainer(),this._clickTolerance=ce.clickTolerance||1};function Ue(fe,G){for(var ce={},Z=0;Z<fe.length;Z++)ce[fe[Z].identifier]=G[Z];return ce}function Je(fe){for(var G=new t.Point(0,0),ce=0,Z=fe;ce<Z.length;ce+=1){var ve=Z[ce];G._add(ve)}return G.div(fe.length)}Re.prototype.isEnabled=function(){return!!this._enabled},Re.prototype.isActive=function(){return!!this._active},Re.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Re.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Re.prototype.mousedown=function(G,ce){this.isEnabled()&&G.shiftKey&&0===G.button&&(n.disableDrag(),this._startPos=this._lastPos=ce,this._active=!0)},Re.prototype.mousemoveWindow=function(G,ce){if(this._active){var Z=ce;if(!(this._lastPos.equals(Z)||!this._box&&Z.dist(this._startPos)<this._clickTolerance)){var ve=this._startPos;this._lastPos=Z,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",G));var Ee=Math.min(ve.x,Z.x),Ae=Math.max(ve.x,Z.x),Ge=Math.min(ve.y,Z.y),ot=Math.max(ve.y,Z.y);n.setTransform(this._box,"translate("+Ee+"px,"+Ge+"px)"),this._box.style.width=Ae-Ee+"px",this._box.style.height=ot-Ge+"px"}}},Re.prototype.mouseupWindow=function(G,ce){var Z=this;if(this._active&&0===G.button){var ve=this._startPos,Ee=ce;if(this.reset(),n.suppressClick(),ve.x!==Ee.x||ve.y!==Ee.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:G})),{cameraAnimation:function(Ae){return Ae.fitScreenCoordinates(ve,Ee,Z._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",G)}},Re.prototype.keydown=function(G){this._active&&27===G.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",G))},Re.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Re.prototype._fireEvent=function(G,ce){return this._map.fire(new t.Event(G,{originalEvent:ce}))};var tt=500,Lt=500,yt=30,Ot=function(G){this.reset(),this.numTouches=G.numTouches};Ot.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ot.prototype.touchstart=function(G,ce,Z){(this.centroid||Z.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(void 0===this.startTime&&(this.startTime=G.timeStamp),Z.length===this.numTouches&&(this.centroid=Je(ce),this.touches=Ue(Z,ce)))},Ot.prototype.touchmove=function(G,ce,Z){if(!this.aborted&&this.centroid){var ve=Ue(Z,ce);for(var Ee in this.touches){var Ae=this.touches[Ee],Ge=ve[Ee];(!Ge||Ge.dist(Ae)>yt)&&(this.aborted=!0)}}},Ot.prototype.touchend=function(G,ce,Z){if((!this.centroid||G.timeStamp-this.startTime>Lt)&&(this.aborted=!0),0===Z.length){var ve=!this.aborted&&this.centroid;if(this.reset(),ve)return ve}};var or=function(G){this.singleTap=new Ot(G),this.numTaps=G.numTaps,this.reset()};or.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},or.prototype.touchstart=function(G,ce,Z){this.singleTap.touchstart(G,ce,Z)},or.prototype.touchmove=function(G,ce,Z){this.singleTap.touchmove(G,ce,Z)},or.prototype.touchend=function(G,ce,Z){var ve=this.singleTap.touchend(G,ce,Z);if(ve){var Ee=G.timeStamp-this.lastTime<tt,Ae=!this.lastTap||this.lastTap.dist(ve)<yt;if((!Ee||!Ae)&&this.reset(),this.count++,this.lastTime=G.timeStamp,this.lastTap=ve,this.count===this.numTaps)return this.reset(),ve}};var ir=function(){this._zoomIn=new or({numTouches:1,numTaps:2}),this._zoomOut=new or({numTouches:2,numTaps:1}),this.reset()};ir.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ir.prototype.touchstart=function(G,ce,Z){this._zoomIn.touchstart(G,ce,Z),this._zoomOut.touchstart(G,ce,Z)},ir.prototype.touchmove=function(G,ce,Z){this._zoomIn.touchmove(G,ce,Z),this._zoomOut.touchmove(G,ce,Z)},ir.prototype.touchend=function(G,ce,Z){var ve=this,Ee=this._zoomIn.touchend(G,ce,Z),Ae=this._zoomOut.touchend(G,ce,Z);return Ee?(this._active=!0,G.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Ge){return Ge.easeTo({duration:300,zoom:Ge.getZoom()+1,around:Ge.unproject(Ee)},{originalEvent:G})}}):Ae?(this._active=!0,G.preventDefault(),setTimeout(function(){return ve.reset()},0),{cameraAnimation:function(Ge){return Ge.easeTo({duration:300,zoom:Ge.getZoom()-1,around:Ge.unproject(Ae)},{originalEvent:G})}}):void 0},ir.prototype.touchcancel=function(){this.reset()},ir.prototype.enable=function(){this._enabled=!0},ir.prototype.disable=function(){this._enabled=!1,this.reset()},ir.prototype.isEnabled=function(){return this._enabled},ir.prototype.isActive=function(){return this._active};var Rr=0,Dr=2,tn={};function sn(fe,G){var ce=tn[G];return void 0===fe.buttons||(fe.buttons&ce)!==ce}tn[Rr]=1,tn[Dr]=2;var _r=function(G){this.reset(),this._clickTolerance=G.clickTolerance||1};_r.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},_r.prototype._correctButton=function(G,ce){return!1},_r.prototype._move=function(G,ce){return{}},_r.prototype.mousedown=function(G,ce){if(!this._lastPoint){var Z=n.mouseButton(G);this._correctButton(G,Z)&&(this._lastPoint=ce,this._eventButton=Z)}},_r.prototype.mousemoveWindow=function(G,ce){var Z=this._lastPoint;if(Z){if(G.preventDefault(),sn(G,this._eventButton))return void this.reset();if(this._moved||!(ce.dist(Z)<this._clickTolerance))return this._moved=!0,this._lastPoint=ce,this._move(Z,ce)}},_r.prototype.mouseupWindow=function(G){this._lastPoint&&n.mouseButton(G)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},_r.prototype.enable=function(){this._enabled=!0},_r.prototype.disable=function(){this._enabled=!1,this.reset()},_r.prototype.isEnabled=function(){return this._enabled},_r.prototype.isActive=function(){return this._active};var Gr=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(Z,ve){fe.prototype.mousedown.call(this,Z,ve),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(Z,ve){return ve===Rr&&!Z.ctrlKey},G.prototype._move=function(Z,ve){return{around:ve,panDelta:ve.sub(Z)}},G}(_r),Jr=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(Z,ve){return ve===Rr&&Z.ctrlKey||ve===Dr},G.prototype._move=function(Z,ve){var Ee=.8,Ae=(ve.x-Z.x)*Ee;if(Ae)return this._active=!0,{bearingDelta:Ae}},G.prototype.contextmenu=function(Z){Z.preventDefault()},G}(_r),qr=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(Z,ve){return ve===Rr&&Z.ctrlKey||ve===Dr},G.prototype._move=function(Z,ve){var Ee=-.5,Ae=(ve.y-Z.y)*Ee;if(Ae)return this._active=!0,{pitchDelta:Ae}},G.prototype.contextmenu=function(Z){Z.preventDefault()},G}(_r),en=function(G){this._minTouches=1,this._clickTolerance=G.clickTolerance||1,this.reset()};en.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},en.prototype.touchstart=function(G,ce,Z){return this._calculateTransform(G,ce,Z)},en.prototype.touchmove=function(G,ce,Z){if(this._active&&!(Z.length<this._minTouches))return G.preventDefault(),this._calculateTransform(G,ce,Z)},en.prototype.touchend=function(G,ce,Z){this._calculateTransform(G,ce,Z),this._active&&Z.length<this._minTouches&&this.reset()},en.prototype.touchcancel=function(){this.reset()},en.prototype._calculateTransform=function(G,ce,Z){Z.length>0&&(this._active=!0);var ve=Ue(Z,ce),Ee=new t.Point(0,0),Ae=new t.Point(0,0),Ge=0;for(var ot in ve){var xt=ve[ot],Wt=this._touches[ot];Wt&&(Ee._add(xt),Ae._add(xt.sub(Wt)),Ge++,ve[ot]=xt)}if(this._touches=ve,!(Ge<this._minTouches)&&Ae.mag()){var ar=Ae.div(Ge);if(this._sum._add(ar),!(this._sum.mag()<this._clickTolerance))return{around:Ee.div(Ge),panDelta:ar}}},en.prototype.enable=function(){this._enabled=!0},en.prototype.disable=function(){this._enabled=!1,this.reset()},en.prototype.isEnabled=function(){return this._enabled},en.prototype.isActive=function(){return this._active};var Qr=function(){this.reset()};function Vn(fe,G,ce){for(var Z=0;Z<fe.length;Z++)if(fe[Z].identifier===ce)return G[Z]}Qr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Qr.prototype._start=function(G){},Qr.prototype._move=function(G,ce,Z){return{}},Qr.prototype.touchstart=function(G,ce,Z){this._firstTwoTouches||Z.length<2||(this._firstTwoTouches=[Z[0].identifier,Z[1].identifier],this._start([ce[0],ce[1]]))},Qr.prototype.touchmove=function(G,ce,Z){if(this._firstTwoTouches){G.preventDefault();var ve=this._firstTwoTouches,Ee=ve[0],Ae=ve[1],Ge=Vn(Z,ce,Ee),ot=Vn(Z,ce,Ae);if(Ge&&ot){var xt=this._aroundCenter?null:Ge.add(ot).div(2);return this._move([Ge,ot],xt,G)}}},Qr.prototype.touchend=function(G,ce,Z){if(this._firstTwoTouches){var ve=this._firstTwoTouches,Ee=ve[0],Ae=ve[1],Ge=Vn(Z,ce,Ee),ot=Vn(Z,ce,Ae);Ge&&ot||(this._active&&n.suppressClick(),this.reset())}},Qr.prototype.touchcancel=function(){this.reset()},Qr.prototype.enable=function(G){this._enabled=!0,this._aroundCenter=!!G&&"center"===G.around},Qr.prototype.disable=function(){this._enabled=!1,this.reset()},Qr.prototype.isEnabled=function(){return this._enabled},Qr.prototype.isActive=function(){return this._active};var Aa=.1;function La(fe,G){return Math.log(fe/G)/Math.LN2}var xa=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.reset=function(){fe.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(Z){this._startDistance=this._distance=Z[0].dist(Z[1])},G.prototype._move=function(Z,ve){var Ee=this._distance;if(this._distance=Z[0].dist(Z[1]),this._active||!(Math.abs(La(this._distance,this._startDistance))<Aa))return this._active=!0,{zoomDelta:La(this._distance,Ee),pinchAround:ve}},G}(Qr),Ya=25;function Ga(fe,G){return 180*fe.angleWith(G)/Math.PI}var ui=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.reset=function(){fe.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(Z){this._startVector=this._vector=Z[0].sub(Z[1]),this._minDiameter=Z[0].dist(Z[1])},G.prototype._move=function(Z,ve){var Ee=this._vector;if(this._vector=Z[0].sub(Z[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ga(this._vector,Ee),pinchAround:ve}},G.prototype._isBelowThreshold=function(Z){this._minDiameter=Math.min(this._minDiameter,Z.mag());var ve=Math.PI*this._minDiameter,Ee=Ya/ve*360,Ae=Ga(Z,this._startVector);return Math.abs(Ae)<Ee},G}(Qr);function Za(fe){return Math.abs(fe.y)>Math.abs(fe.x)}var Ha=100,hi=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.reset=function(){fe.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(Z){this._lastPoints=Z,Za(Z[0].sub(Z[1]))&&(this._valid=!1)},G.prototype._move=function(Z,ve,Ee){var Ae=Z[0].sub(this._lastPoints[0]),Ge=Z[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ae,Ge,Ee.timeStamp),this._valid)return this._lastPoints=Z,this._active=!0,{pitchDelta:(Ae.y+Ge.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(Z,ve,Ee){if(void 0!==this._valid)return this._valid;var Ae=2,Ge=Z.mag()>=Ae,ot=ve.mag()>=Ae;if(Ge||ot){if(!Ge||!ot)return void 0===this._firstMove&&(this._firstMove=Ee),Ee-this._firstMove<Ha&&void 0;var xt=Z.y>0==ve.y>0;return Za(Z)&&Za(ve)&&xt}},G}(Qr),Yi={panStep:100,bearingStep:15,pitchStep:10},ai=function(){var G=Yi;this._panStep=G.panStep,this._bearingStep=G.bearingStep,this._pitchStep=G.pitchStep,this._rotationDisabled=!1};function ia(fe){return fe*(2-fe)}ai.prototype.reset=function(){this._active=!1},ai.prototype.keydown=function(G){var ce=this;if(!(G.altKey||G.ctrlKey||G.metaKey)){var Z=0,ve=0,Ee=0,Ae=0,Ge=0;switch(G.keyCode){case 61:case 107:case 171:case 187:Z=1;break;case 189:case 109:case 173:Z=-1;break;case 37:G.shiftKey?ve=-1:(G.preventDefault(),Ae=-1);break;case 39:G.shiftKey?ve=1:(G.preventDefault(),Ae=1);break;case 38:G.shiftKey?Ee=1:(G.preventDefault(),Ge=-1);break;case 40:G.shiftKey?Ee=-1:(G.preventDefault(),Ge=1);break;default:return}return this._rotationDisabled&&(ve=0,Ee=0),{cameraAnimation:function(ot){var xt=ot.getZoom();ot.easeTo({duration:300,easeId:"keyboardHandler",easing:ia,zoom:Z?Math.round(xt)+Z*(G.shiftKey?2:1):xt,bearing:ot.getBearing()+ve*ce._bearingStep,pitch:ot.getPitch()+Ee*ce._pitchStep,offset:[-Ae*ce._panStep,-Ge*ce._panStep],center:ot.getCenter()},{originalEvent:G})}}}},ai.prototype.enable=function(){this._enabled=!0},ai.prototype.disable=function(){this._enabled=!1,this.reset()},ai.prototype.isEnabled=function(){return this._enabled},ai.prototype.isActive=function(){return this._active},ai.prototype.disableRotation=function(){this._rotationDisabled=!0},ai.prototype.enableRotation=function(){this._rotationDisabled=!1};var vi=4.000244140625,Si=.01,Pi=1/450,uo=2,Et=function(G,ce){this._map=G,this._el=G.getCanvasContainer(),this._handler=ce,this._delta=0,this._defaultZoomRate=Si,this._wheelZoomRate=Pi,t.bindAll(["_onTimeout"],this)};Et.prototype.setZoomRate=function(G){this._defaultZoomRate=G},Et.prototype.setWheelZoomRate=function(G){this._wheelZoomRate=G},Et.prototype.isEnabled=function(){return!!this._enabled},Et.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Et.prototype.isZooming=function(){return!!this._zooming},Et.prototype.enable=function(G){this.isEnabled()||(this._enabled=!0,this._aroundCenter=G&&"center"===G.around)},Et.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Et.prototype.wheel=function(G){if(this.isEnabled()){var ce=G.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*G.deltaY:G.deltaY,Z=t.browser.now(),ve=Z-(this._lastWheelEventTime||0);this._lastWheelEventTime=Z,0!==ce&&ce%vi==0?this._type="wheel":0!==ce&&Math.abs(ce)<4?this._type="trackpad":ve>400?(this._type=null,this._lastValue=ce,this._timeout=setTimeout(this._onTimeout,40,G)):this._type||(this._type=Math.abs(ve*ce)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ce+=this._lastValue)),G.shiftKey&&ce&&(ce/=4),this._type&&(this._lastWheelEvent=G,this._delta-=ce,this._active||this._start(G)),G.preventDefault()}},Et.prototype._onTimeout=function(G){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(G)},Et.prototype._start=function(G){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ce=n.mousePos(this._el,G);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ce)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Et.prototype.renderFrame=function(){var G=this;if(this._frameId&&(this._frameId=null,this.isActive())){var ce=this._map.transform;if(0!==this._delta){var Z="wheel"===this._type&&Math.abs(this._delta)>vi?this._wheelZoomRate:this._defaultZoomRate,ve=uo/(1+Math.exp(-Math.abs(this._delta*Z)));this._delta<0&&0!==ve&&(ve=1/ve);var Ee="number"==typeof this._targetZoom?ce.zoomScale(this._targetZoom):ce.scale;this._targetZoom=Math.min(ce.maxZoom,Math.max(ce.minZoom,ce.scaleZoom(Ee*ve))),"wheel"===this._type&&(this._startZoom=ce.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Wt,Ae="number"==typeof this._targetZoom?this._targetZoom:ce.zoom,Ge=this._startZoom,ot=this._easing,xt=!1;if("wheel"===this._type&&Ge&&ot){var ar=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),Yt=ot(ar);Wt=t.number(Ge,Ae,Yt),ar<1?this._frameId||(this._frameId=!0):xt=!0}else Wt=Ae,xt=!0;return this._active=!0,xt&&(this._active=!1,this._finishTimeout=setTimeout(function(){G._zooming=!1,G._handler._triggerRenderFrame(),delete G._targetZoom,delete G._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!xt,zoomDelta:Wt-ce.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Et.prototype._smoothOutEasing=function(G){var ce=t.ease;if(this._prevEase){var Z=this._prevEase,ve=(t.browser.now()-Z.start)/Z.duration,Ee=Z.easing(ve+.01)-Z.easing(ve),Ae=.27/Math.sqrt(Ee*Ee+1e-4)*.01,Ge=Math.sqrt(.0729-Ae*Ae);ce=t.bezier(Ae,Ge,.25,1)}return this._prevEase={start:t.browser.now(),duration:G,easing:ce},ce},Et.prototype.reset=function(){this._active=!1};var wr=function(G,ce){this._clickZoom=G,this._tapZoom=ce};wr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},wr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},wr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},wr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Nr=function(){this.reset()};Nr.prototype.reset=function(){this._active=!1},Nr.prototype.dblclick=function(G,ce){return G.preventDefault(),{cameraAnimation:function(Z){Z.easeTo({duration:300,zoom:Z.getZoom()+(G.shiftKey?-1:1),around:Z.unproject(ce)},{originalEvent:G})}}},Nr.prototype.enable=function(){this._enabled=!0},Nr.prototype.disable=function(){this._enabled=!1,this.reset()},Nr.prototype.isEnabled=function(){return this._enabled},Nr.prototype.isActive=function(){return this._active};var vn=function(){this._tap=new or({numTouches:1,numTaps:1}),this.reset()};vn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},vn.prototype.touchstart=function(G,ce,Z){this._swipePoint||(this._tapTime&&G.timeStamp-this._tapTime>tt&&this.reset(),this._tapTime?Z.length>0&&(this._swipePoint=ce[0],this._swipeTouch=Z[0].identifier):this._tap.touchstart(G,ce,Z))},vn.prototype.touchmove=function(G,ce,Z){if(this._tapTime){if(this._swipePoint){if(Z[0].identifier!==this._swipeTouch)return;var ve=ce[0],Ee=ve.y-this._swipePoint.y;return this._swipePoint=ve,G.preventDefault(),this._active=!0,{zoomDelta:Ee/128}}}else this._tap.touchmove(G,ce,Z)},vn.prototype.touchend=function(G,ce,Z){this._tapTime?this._swipePoint&&0===Z.length&&this.reset():this._tap.touchend(G,ce,Z)&&(this._tapTime=G.timeStamp)},vn.prototype.touchcancel=function(){this.reset()},vn.prototype.enable=function(){this._enabled=!0},vn.prototype.disable=function(){this._enabled=!1,this.reset()},vn.prototype.isEnabled=function(){return this._enabled},vn.prototype.isActive=function(){return this._active};var bn=function(G,ce,Z){this._el=G,this._mousePan=ce,this._touchPan=Z};bn.prototype.enable=function(G){this._inertiaOptions=G||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},bn.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},bn.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},bn.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var xn=function(G,ce,Z){this._pitchWithRotate=G.pitchWithRotate,this._mouseRotate=ce,this._mousePitch=Z};xn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},xn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},xn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},xn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Tn=function(G,ce,Z,ve){this._el=G,this._touchZoom=ce,this._touchRotate=Z,this._tapDragZoom=ve,this._rotationDisabled=!1,this._enabled=!0};Tn.prototype.enable=function(G){this._touchZoom.enable(G),this._rotationDisabled||this._touchRotate.enable(G),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Tn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Tn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Tn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Tn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Tn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Gn=function(fe){return fe.zoom||fe.drag||fe.pitch||fe.rotate},ba=function(fe){function G(){fe.apply(this,arguments)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G}(t.Event);function wa(fe){return fe.panDelta&&fe.panDelta.mag()||fe.zoomDelta||fe.bearingDelta||fe.pitchDelta}var Qn=function(G,ce){this._map=G,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new su(G),this._bearingSnap=ce.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ce),t.bindAll(["handleEvent","handleWindowEvent"],this);var Z=this._el;this._listeners=[[Z,"touchstart",{passive:!0}],[Z,"touchmove",{passive:!1}],[Z,"touchend",void 0],[Z,"touchcancel",void 0],[Z,"mousedown",void 0],[Z,"mousemove",void 0],[Z,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[Z,"mouseover",void 0],[Z,"mouseout",void 0],[Z,"dblclick",void 0],[Z,"click",void 0],[Z,"keydown",{capture:!1}],[Z,"keyup",void 0],[Z,"wheel",{passive:!1}],[Z,"contextmenu",void 0],[t.window,"blur",void 0]];for(var ve=0,Ee=this._listeners;ve<Ee.length;ve+=1){var Ae=Ee[ve],Ge=Ae[0],ot=Ae[1],xt=Ae[2];n.addEventListener(Ge,ot,Ge===t.window.document?this.handleWindowEvent:this.handleEvent,xt)}};Qn.prototype.destroy=function(){for(var G=0,ce=this._listeners;G<ce.length;G+=1){var Z=ce[G],ve=Z[0],Ee=Z[1],Ae=Z[2];n.removeEventListener(ve,Ee,ve===t.window.document?this.handleWindowEvent:this.handleEvent,Ae)}},Qn.prototype._addDefaultHandlers=function(G){var ce=this._map,Z=ce.getCanvasContainer();this._add("mapEvent",new le(ce,G));var ve=ce.boxZoom=new Re(ce,G);this._add("boxZoom",ve);var Ee=new ir,Ae=new Nr;ce.doubleClickZoom=new wr(Ae,Ee),this._add("tapZoom",Ee),this._add("clickZoom",Ae);var Ge=new vn;this._add("tapDragZoom",Ge);var ot=ce.touchPitch=new hi;this._add("touchPitch",ot);var xt=new Jr(G),Wt=new qr(G);ce.dragRotate=new xn(G,xt,Wt),this._add("mouseRotate",xt,["mousePitch"]),this._add("mousePitch",Wt,["mouseRotate"]);var ar=new Gr(G),Yt=new en(G);ce.dragPan=new bn(Z,ar,Yt),this._add("mousePan",ar),this._add("touchPan",Yt,["touchZoom","touchRotate"]);var Tt=new ui,_t=new xa;ce.touchZoomRotate=new Tn(Z,_t,Tt,Ge),this._add("touchRotate",Tt,["touchPan","touchZoom"]),this._add("touchZoom",_t,["touchPan","touchRotate"]);var Nt=ce.scrollZoom=new Et(ce,this);this._add("scrollZoom",Nt,["mousePan"]);var rr=ce.keyboard=new ai;this._add("keyboard",rr),this._add("blockableMapEvent",new xe(ce));for(var dr=0,pr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];dr<pr.length;dr+=1){var Lr=pr[dr];G.interactive&&G[Lr]&&ce[Lr].enable(G[Lr])}},Qn.prototype._add=function(G,ce,Z){this._handlers.push({handlerName:G,handler:ce,allowed:Z}),this._handlersById[G]=ce},Qn.prototype.stop=function(G){if(!this._updatingCamera){for(var ce=0,Z=this._handlers;ce<Z.length;ce+=1)Z[ce].handler.reset();this._inertia.clear(),this._fireEvents({},{},G),this._changes=[]}},Qn.prototype.isActive=function(){for(var G=0,ce=this._handlers;G<ce.length;G+=1)if(ce[G].handler.isActive())return!0;return!1},Qn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Qn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Qn.prototype.isMoving=function(){return Boolean(Gn(this._eventsInProgress))||this.isZooming()},Qn.prototype._blockedByActive=function(G,ce,Z){for(var ve in G)if(ve!==Z&&(!ce||ce.indexOf(ve)<0))return!0;return!1},Qn.prototype.handleWindowEvent=function(G){this.handleEvent(G,G.type+"Window")},Qn.prototype._getMapTouches=function(G){for(var ce=[],Z=0,ve=G;Z<ve.length;Z+=1){var Ee=ve[Z],Ae=Ee.target;this._el.contains(Ae)&&ce.push(Ee)}return ce},Qn.prototype.handleEvent=function(G,ce){if("blur"!==G.type){this._updatingCamera=!0;for(var Z="renderFrame"===G.type?void 0:G,ve={needsRenderFrame:!1},Ee={},Ae={},Ge=G.touches?this._getMapTouches(G.touches):void 0,ot=Ge?n.touchPos(this._el,Ge):n.mousePos(this._el,G),xt=0,Wt=this._handlers;xt<Wt.length;xt+=1){var ar=Wt[xt],Yt=ar.handlerName,Tt=ar.handler,_t=ar.allowed;if(Tt.isEnabled()){var Nt=void 0;this._blockedByActive(Ae,_t,Yt)?Tt.reset():Tt[ce||G.type]&&(Nt=Tt[ce||G.type](G,ot,Ge),this.mergeHandlerResult(ve,Ee,Nt,Yt,Z),Nt&&Nt.needsRenderFrame&&this._triggerRenderFrame()),(Nt||Tt.isActive())&&(Ae[Yt]=Tt)}}var rr={};for(var dr in this._previousActiveHandlers)Ae[dr]||(rr[dr]=Z);this._previousActiveHandlers=Ae,(Object.keys(rr).length||wa(ve))&&(this._changes.push([ve,Ee,rr]),this._triggerRenderFrame()),(Object.keys(Ae).length||wa(ve))&&this._map._stop(!0),this._updatingCamera=!1;var pr=ve.cameraAnimation;pr&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],pr(this._map))}else this.stop(!0)},Qn.prototype.mergeHandlerResult=function(G,ce,Z,ve,Ee){if(Z){t.extend(G,Z);var Ae={handlerName:ve,originalEvent:Z.originalEvent||Ee};void 0!==Z.zoomDelta&&(ce.zoom=Ae),void 0!==Z.panDelta&&(ce.drag=Ae),void 0!==Z.pitchDelta&&(ce.pitch=Ae),void 0!==Z.bearingDelta&&(ce.rotate=Ae)}},Qn.prototype._applyChanges=function(){for(var G={},ce={},Z={},ve=0,Ee=this._changes;ve<Ee.length;ve+=1){var Ae=Ee[ve],Ge=Ae[0],ot=Ae[1],xt=Ae[2];Ge.panDelta&&(G.panDelta=(G.panDelta||new t.Point(0,0))._add(Ge.panDelta)),Ge.zoomDelta&&(G.zoomDelta=(G.zoomDelta||0)+Ge.zoomDelta),Ge.bearingDelta&&(G.bearingDelta=(G.bearingDelta||0)+Ge.bearingDelta),Ge.pitchDelta&&(G.pitchDelta=(G.pitchDelta||0)+Ge.pitchDelta),void 0!==Ge.around&&(G.around=Ge.around),void 0!==Ge.pinchAround&&(G.pinchAround=Ge.pinchAround),Ge.noInertia&&(G.noInertia=Ge.noInertia),t.extend(ce,ot),t.extend(Z,xt)}this._updateMapTransform(G,ce,Z),this._changes=[]},Qn.prototype._updateMapTransform=function(G,ce,Z){var ve=this._map,Ee=ve.transform;if(!wa(G))return this._fireEvents(ce,Z,!0);var Ae=G.panDelta,Ge=G.zoomDelta,ot=G.bearingDelta,xt=G.pitchDelta,Wt=G.around,ar=G.pinchAround;void 0!==ar&&(Wt=ar),ve._stop(!0),Wt=Wt||ve.transform.centerPoint;var Yt=Ee.pointLocation(Ae?Wt.sub(Ae):Wt);ot&&(Ee.bearing+=ot),xt&&(Ee.pitch+=xt),Ge&&(Ee.zoom+=Ge),Ee.setLocationAtPoint(Yt,Wt),this._map._update(),G.noInertia||this._inertia.record(G),this._fireEvents(ce,Z,!0)},Qn.prototype._fireEvents=function(G,ce,Z){var ve=this,Ee=Gn(this._eventsInProgress),Ae=Gn(G),Ge={};for(var ot in G){var Wt=G[ot].originalEvent;this._eventsInProgress[ot]||(Ge[ot+"start"]=Wt),this._eventsInProgress[ot]=G[ot]}for(var ar in!Ee&&Ae&&this._fireEvent("movestart",Ae.originalEvent),Ge)this._fireEvent(ar,Ge[ar]);for(var Yt in Ae&&this._fireEvent("move",Ae.originalEvent),G){var _t=G[Yt].originalEvent;this._fireEvent(Yt,_t)}var rr,Nt={};for(var dr in this._eventsInProgress){var pr=this._eventsInProgress[dr],Lr=pr.handlerName,Tr=pr.originalEvent;this._handlersById[Lr].isActive()||(delete this._eventsInProgress[dr],rr=ce[Lr]||Tr,Nt[dr+"end"]=rr)}for(var mr in Nt)this._fireEvent(mr,Nt[mr]);var Er=Gn(this._eventsInProgress);if(Z&&(Ee||Ae)&&!Er){this._updatingCamera=!0;var fr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Br=function($r){return 0!==$r&&-ve._bearingSnap<$r&&$r<ve._bearingSnap};fr?(Br(fr.bearing||this._map.getBearing())&&(fr.bearing=0),this._map.easeTo(fr,{originalEvent:rr})):(this._map.fire(new t.Event("moveend",{originalEvent:rr})),Br(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Qn.prototype._fireEvent=function(G,ce){this._map.fire(new t.Event(G,ce?{originalEvent:ce}:{}))},Qn.prototype._requestFrame=function(){var G=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(ce){delete G._frameId,G.handleEvent(new ba("renderFrame",{timeStamp:ce})),G._applyChanges()})},Qn.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var Fa=function(fe){function G(ce,Z){fe.call(this),this._moving=!1,this._zooming=!1,this.transform=ce,this._bearingSnap=Z.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(Z,ve){return this.jumpTo({center:Z},ve)},G.prototype.panBy=function(Z,ve,Ee){return Z=t.Point.convert(Z).mult(-1),this.panTo(this.transform.center,t.extend({offset:Z},ve),Ee)},G.prototype.panTo=function(Z,ve,Ee){return this.easeTo(t.extend({center:Z},ve),Ee)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(Z,ve){return this.jumpTo({zoom:Z},ve),this},G.prototype.zoomTo=function(Z,ve,Ee){return this.easeTo(t.extend({zoom:Z},ve),Ee)},G.prototype.zoomIn=function(Z,ve){return this.zoomTo(this.getZoom()+1,Z,ve),this},G.prototype.zoomOut=function(Z,ve){return this.zoomTo(this.getZoom()-1,Z,ve),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(Z,ve){return this.jumpTo({bearing:Z},ve),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(Z,ve){return this.jumpTo({padding:Z},ve),this},G.prototype.rotateTo=function(Z,ve,Ee){return this.easeTo(t.extend({bearing:Z},ve),Ee)},G.prototype.resetNorth=function(Z,ve){return this.rotateTo(0,t.extend({duration:1e3},Z),ve),this},G.prototype.resetNorthPitch=function(Z,ve){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},Z),ve),this},G.prototype.snapToNorth=function(Z,ve){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Z,ve):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(Z,ve){return this.jumpTo({pitch:Z},ve),this},G.prototype.cameraForBounds=function(Z,ve){Z=t.LngLatBounds.convert(Z);var Ee=ve&&ve.bearing||0;return this._cameraForBoxAndBearing(Z.getNorthWest(),Z.getSouthEast(),Ee,ve)},G.prototype._cameraForBoxAndBearing=function(Z,ve,Ee,Ae){var Ge={top:0,bottom:0,right:0,left:0};if("number"==typeof(Ae=t.extend({padding:Ge,offset:[0,0],maxZoom:this.transform.maxZoom},Ae)).padding){var ot=Ae.padding;Ae.padding={top:ot,bottom:ot,right:ot,left:ot}}Ae.padding=t.extend(Ge,Ae.padding);var xt=this.transform,Wt=xt.padding,ar=xt.project(t.LngLat.convert(Z)),Yt=xt.project(t.LngLat.convert(ve)),Tt=ar.rotate(-Ee*Math.PI/180),_t=Yt.rotate(-Ee*Math.PI/180),Nt=new t.Point(Math.max(Tt.x,_t.x),Math.max(Tt.y,_t.y)),rr=new t.Point(Math.min(Tt.x,_t.x),Math.min(Tt.y,_t.y)),dr=Nt.sub(rr),pr=(xt.width-(Wt.left+Wt.right+Ae.padding.left+Ae.padding.right))/dr.x,Lr=(xt.height-(Wt.top+Wt.bottom+Ae.padding.top+Ae.padding.bottom))/dr.y;if(!(Lr<0||pr<0)){var Tr=Math.min(xt.scaleZoom(xt.scale*Math.min(pr,Lr)),Ae.maxZoom),mr="number"==typeof Ae.offset.x?new t.Point(Ae.offset.x,Ae.offset.y):t.Point.convert(Ae.offset),Er=(Ae.padding.left-Ae.padding.right)/2,fr=(Ae.padding.top-Ae.padding.bottom)/2,$r=new t.Point(Er,fr).rotate(Ee*Math.PI/180),zn=mr.add($r).mult(xt.scale/xt.zoomScale(Tr));return{center:xt.unproject(ar.add(Yt).div(2).sub(zn)),zoom:Tr,bearing:Ee}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(Z,ve,Ee){return this._fitInternal(this.cameraForBounds(Z,ve),ve,Ee)},G.prototype.fitScreenCoordinates=function(Z,ve,Ee,Ae,Ge){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(Z)),this.transform.pointLocation(t.Point.convert(ve)),Ee,Ae),Ae,Ge)},G.prototype._fitInternal=function(Z,ve,Ee){return Z?(delete(ve=t.extend(Z,ve)).padding,ve.linear?this.easeTo(ve,Ee):this.flyTo(ve,Ee)):this},G.prototype.jumpTo=function(Z,ve){this.stop();var Ee=this.transform,Ae=!1,Ge=!1,ot=!1;return"zoom"in Z&&Ee.zoom!==+Z.zoom&&(Ae=!0,Ee.zoom=+Z.zoom),void 0!==Z.center&&(Ee.center=t.LngLat.convert(Z.center)),"bearing"in Z&&Ee.bearing!==+Z.bearing&&(Ge=!0,Ee.bearing=+Z.bearing),"pitch"in Z&&Ee.pitch!==+Z.pitch&&(ot=!0,Ee.pitch=+Z.pitch),null!=Z.padding&&!Ee.isPaddingEqual(Z.padding)&&(Ee.padding=Z.padding),this.fire(new t.Event("movestart",ve)).fire(new t.Event("move",ve)),Ae&&this.fire(new t.Event("zoomstart",ve)).fire(new t.Event("zoom",ve)).fire(new t.Event("zoomend",ve)),Ge&&this.fire(new t.Event("rotatestart",ve)).fire(new t.Event("rotate",ve)).fire(new t.Event("rotateend",ve)),ot&&this.fire(new t.Event("pitchstart",ve)).fire(new t.Event("pitch",ve)).fire(new t.Event("pitchend",ve)),this.fire(new t.Event("moveend",ve))},G.prototype.easeTo=function(Z,ve){var Ee=this;this._stop(!1,Z.easeId),(!1===(Z=t.extend({offset:[0,0],duration:500,easing:t.ease},Z)).animate||!Z.essential&&t.browser.prefersReducedMotion)&&(Z.duration=0);var Ae=this.transform,Ge=this.getZoom(),ot=this.getBearing(),xt=this.getPitch(),Wt=this.getPadding(),ar="zoom"in Z?+Z.zoom:Ge,Yt="bearing"in Z?this._normalizeBearing(Z.bearing,ot):ot,Tt="pitch"in Z?+Z.pitch:xt,_t="padding"in Z?Z.padding:Ae.padding,Nt=t.Point.convert(Z.offset),rr=Ae.centerPoint.add(Nt),dr=Ae.pointLocation(rr),pr=t.LngLat.convert(Z.center||dr);this._normalizeCenter(pr);var Er,fr,Lr=Ae.project(dr),Tr=Ae.project(pr).sub(Lr),mr=Ae.zoomScale(ar-Ge);Z.around&&(Er=t.LngLat.convert(Z.around),fr=Ae.locationPoint(Er));var Br={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ar!==Ge,this._rotating=this._rotating||ot!==Yt,this._pitching=this._pitching||Tt!==xt,this._padding=!Ae.isPaddingEqual(_t),this._easeId=Z.easeId,this._prepareEase(ve,Z.noMoveStart,Br),this._ease(function($r){if(Ee._zooming&&(Ae.zoom=t.number(Ge,ar,$r)),Ee._rotating&&(Ae.bearing=t.number(ot,Yt,$r)),Ee._pitching&&(Ae.pitch=t.number(xt,Tt,$r)),Ee._padding&&(Ae.interpolatePadding(Wt,_t,$r),rr=Ae.centerPoint.add(Nt)),Er)Ae.setLocationAtPoint(Er,fr);else{var ln=Ae.zoomScale(Ae.zoom-Ge),zn=ar>Ge?Math.min(2,mr):Math.max(.5,mr),En=Math.pow(zn,1-$r),Nn=Ae.unproject(Lr.add(Tr.mult($r*En)).mult(ln));Ae.setLocationAtPoint(Ae.renderWorldCopies?Nn.wrap():Nn,rr)}Ee._fireMoveEvents(ve)},function($r){Ee._afterEase(ve,$r)},Z),this},G.prototype._prepareEase=function(Z,ve,Ee){void 0===Ee&&(Ee={}),this._moving=!0,!ve&&!Ee.moving&&this.fire(new t.Event("movestart",Z)),this._zooming&&!Ee.zooming&&this.fire(new t.Event("zoomstart",Z)),this._rotating&&!Ee.rotating&&this.fire(new t.Event("rotatestart",Z)),this._pitching&&!Ee.pitching&&this.fire(new t.Event("pitchstart",Z))},G.prototype._fireMoveEvents=function(Z){this.fire(new t.Event("move",Z)),this._zooming&&this.fire(new t.Event("zoom",Z)),this._rotating&&this.fire(new t.Event("rotate",Z)),this._pitching&&this.fire(new t.Event("pitch",Z))},G.prototype._afterEase=function(Z,ve){if(!this._easeId||!ve||this._easeId!==ve){delete this._easeId;var Ee=this._zooming,Ae=this._rotating,Ge=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ee&&this.fire(new t.Event("zoomend",Z)),Ae&&this.fire(new t.Event("rotateend",Z)),Ge&&this.fire(new t.Event("pitchend",Z)),this.fire(new t.Event("moveend",Z))}},G.prototype.flyTo=function(Z,ve){var Ee=this;if(!Z.essential&&t.browser.prefersReducedMotion){var Ae=t.pick(Z,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ae,ve)}this.stop(),Z=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},Z);var Ge=this.transform,ot=this.getZoom(),xt=this.getBearing(),Wt=this.getPitch(),ar=this.getPadding(),Yt="zoom"in Z?t.clamp(+Z.zoom,Ge.minZoom,Ge.maxZoom):ot,Tt="bearing"in Z?this._normalizeBearing(Z.bearing,xt):xt,_t="pitch"in Z?+Z.pitch:Wt,Nt="padding"in Z?Z.padding:Ge.padding,rr=Ge.zoomScale(Yt-ot),dr=t.Point.convert(Z.offset),pr=Ge.centerPoint.add(dr),Lr=Ge.pointLocation(pr),Tr=t.LngLat.convert(Z.center||Lr);this._normalizeCenter(Tr);var mr=Ge.project(Lr),Er=Ge.project(Tr).sub(mr),fr=Z.curve,Br=Math.max(Ge.width,Ge.height),$r=Br/rr,ln=Er.mag();if("minZoom"in Z){var zn=t.clamp(Math.min(Z.minZoom,ot,Yt),Ge.minZoom,Ge.maxZoom),En=Br/Ge.zoomScale(zn-ot);fr=Math.sqrt(En/ln*2)}var Nn=fr*fr;function ya(di){var Fi=($r*$r-Br*Br+(di?-1:1)*Nn*Nn*ln*ln)/(2*(di?$r:Br)*Nn*ln);return Math.log(Math.sqrt(Fi*Fi+1)-Fi)}function aa(di){return(Math.exp(di)-Math.exp(-di))/2}function On(di){return(Math.exp(di)+Math.exp(-di))/2}function Zn(di){return aa(di)/On(di)}var Yn=ya(0),ua=function(di){return On(Yn)/On(Yn+fr*di)},_a=function(di){return Br*((On(Yn)*Zn(Yn+fr*di)-aa(Yn))/Nn)/ln},Ci=(ya(1)-Yn)/fr;if(Math.abs(ln)<1e-6||!isFinite(Ci)){if(Math.abs(Br-$r)<1e-6)return this.easeTo(Z,ve);var Ei=$r<Br?-1:1;Ci=Math.abs(Math.log($r/Br))/fr,_a=function(){return 0},ua=function(di){return Math.exp(Ei*fr*di)}}if("duration"in Z)Z.duration=+Z.duration;else{var qi="screenSpeed"in Z?+Z.screenSpeed/fr:+Z.speed;Z.duration=1e3*Ci/qi}return Z.maxDuration&&Z.duration>Z.maxDuration&&(Z.duration=0),this._zooming=!0,this._rotating=xt!==Tt,this._pitching=_t!==Wt,this._padding=!Ge.isPaddingEqual(Nt),this._prepareEase(ve,!1),this._ease(function(di){var Fi=di*Ci,ho=1/ua(Fi);Ge.zoom=1===di?Yt:ot+Ge.scaleZoom(ho),Ee._rotating&&(Ge.bearing=t.number(xt,Tt,di)),Ee._pitching&&(Ge.pitch=t.number(Wt,_t,di)),Ee._padding&&(Ge.interpolatePadding(ar,Nt,di),pr=Ge.centerPoint.add(dr));var Ko=1===di?Tr:Ge.unproject(mr.add(Er.mult(_a(Fi))).mult(ho));Ge.setLocationAtPoint(Ge.renderWorldCopies?Ko.wrap():Ko,pr),Ee._fireMoveEvents(ve)},function(){return Ee._afterEase(ve)},Z),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(Z,ve){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ee=this._onEaseEnd;delete this._onEaseEnd,Ee.call(this,ve)}if(!Z){var Ae=this.handlers;Ae&&Ae.stop(!1)}return this},G.prototype._ease=function(Z,ve,Ee){!1===Ee.animate||0===Ee.duration?(Z(1),ve()):(this._easeStart=t.browser.now(),this._easeOptions=Ee,this._onEaseFrame=Z,this._onEaseEnd=ve,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var Z=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Z)),Z<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(Z,ve){Z=t.wrap(Z,-180,180);var Ee=Math.abs(Z-ve);return Math.abs(Z-360-ve)<Ee&&(Z-=360),Math.abs(Z+360-ve)<Ee&&(Z+=360),Z},G.prototype._normalizeCenter=function(Z){var ve=this.transform;if(ve.renderWorldCopies&&!ve.lngRange){var Ee=Z.lng-ve.center.lng;Z.lng+=Ee>180?-360:Ee<-180?360:0}},G}(t.Evented),ea=function(G){void 0===G&&(G={}),this.options=G,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};ea.prototype.getDefaultPosition=function(){return"bottom-right"},ea.prototype.onAdd=function(G){var ce=this.options&&this.options.compact;return this._map=G,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),ce&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===ce&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ea.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ea.prototype._setElementTitle=function(G,ce){var Z=this._map._getUIString("AttributionControl."+ce);G.title=Z,G.setAttribute("aria-label",Z)},ea.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},ea.prototype._updateEditLink=function(){var G=this._editLink;G||(G=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ce=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(G){var Z=ce.reduce(function(ve,Ee,Ae){return Ee.value&&(ve+=Ee.key+"="+Ee.value+(Ae<ce.length-1?"&":"")),ve},"?");G.href=t.config.FEEDBACK_URL+"/"+Z+(this._map._hash?this._map._hash.getHashString(!0):""),G.rel="noopener nofollow",this._setElementTitle(G,"MapFeedback")}},ea.prototype._updateData=function(G){G&&("metadata"===G.sourceDataType||"visibility"===G.sourceDataType||"style"===G.dataType)&&(this._updateAttributions(),this._updateEditLink())},ea.prototype._updateAttributions=function(){if(this._map.style){var G=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?G=G.concat(this.options.customAttribution.map(function(ot){return"string"!=typeof ot?"":ot})):"string"==typeof this.options.customAttribution&&G.push(this.options.customAttribution)),this._map.style.stylesheet){var ce=this._map.style.stylesheet;this.styleOwner=ce.owner,this.styleId=ce.id}var Z=this._map.style.sourceCaches;for(var ve in Z){var Ee=Z[ve];if(Ee.used){var Ae=Ee.getSource();Ae.attribution&&G.indexOf(Ae.attribution)<0&&G.push(Ae.attribution)}}G.sort(function(ot,xt){return ot.length-xt.length});var Ge=(G=G.filter(function(ot,xt){for(var Wt=xt+1;Wt<G.length;Wt++)if(G[Wt].indexOf(ot)>=0)return!1;return!0})).join(" | ");Ge!==this._attribHTML&&(this._attribHTML=Ge,G.length?(this._innerContainer.innerHTML=Ge,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ea.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ra=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};ra.prototype.onAdd=function(G){this._map=G,this._container=n.create("div","mapboxgl-ctrl");var ce=n.create("a","mapboxgl-ctrl-logo");return ce.target="_blank",ce.rel="noopener nofollow",ce.href="https://www.mapbox.com/",ce.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ce.setAttribute("rel","noopener nofollow"),this._container.appendChild(ce),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ra.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ra.prototype.getDefaultPosition=function(){return"bottom-left"},ra.prototype._updateLogo=function(G){(!G||"metadata"===G.sourceDataType)&&(this._container.style.display=this._logoRequired()?"block":"none")},ra.prototype._logoRequired=function(){if(this._map.style){var G=this._map.style.sourceCaches;for(var ce in G)if(G[ce].getSource().mapbox_logo)return!0;return!1}},ra.prototype._updateCompact=function(){var G=this._container.children;if(G.length){var ce=G[0];this._map.getCanvasContainer().offsetWidth<250?ce.classList.add("mapboxgl-compact"):ce.classList.remove("mapboxgl-compact")}};var Bn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Bn.prototype.add=function(G){var ce=++this._id;return this._queue.push({callback:G,id:ce,cancelled:!1}),ce},Bn.prototype.remove=function(G){for(var ce=this._currentlyRunning,ve=0,Ee=ce?this._queue.concat(ce):this._queue;ve<Ee.length;ve+=1){var Ae=Ee[ve];if(Ae.id===G)return void(Ae.cancelled=!0)}},Bn.prototype.run=function(G){void 0===G&&(G=0);var ce=this._currentlyRunning=this._queue;this._queue=[];for(var Z=0,ve=ce;Z<ve.length;Z+=1){var Ee=ve[Z];if(!Ee.cancelled&&(Ee.callback(G),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Bn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var dn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},kn=t.window.HTMLImageElement,$n=t.window.HTMLElement,na=t.window.ImageBitmap,jn=-2,ka=22,ga=0,ni=60,Kn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:jn,maxZoom:ka,minPitch:ga,maxPitch:ni,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Hn=function(fe){function G(Z){var ve=this;if(null!=(Z=t.extend({},Kn,Z)).minZoom&&null!=Z.maxZoom&&Z.minZoom>Z.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=Z.minPitch&&null!=Z.maxPitch&&Z.minPitch>Z.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=Z.minPitch&&Z.minPitch<ga)throw new Error("minPitch must be greater than or equal to "+ga);if(null!=Z.maxPitch&&Z.maxPitch>ni)throw new Error("maxPitch must be less than or equal to "+ni);var Ee=new Vi(Z.minZoom,Z.maxZoom,Z.minPitch,Z.maxPitch,Z.renderWorldCopies);if(fe.call(this,Ee,Z),this._interactive=Z.interactive,this._maxTileCacheSize=Z.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Z.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Z.preserveDrawingBuffer,this._antialias=Z.antialias,this._trackResize=Z.trackResize,this._bearingSnap=Z.bearingSnap,this._refreshExpiredTiles=Z.refreshExpiredTiles,this._fadeDuration=Z.fadeDuration,this._crossSourceCollisions=Z.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Z.collectResourceTiming,this._renderTaskQueue=new Bn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},dn,Z.locale),this._clickTolerance=Z.clickTolerance,this._requestManager=new t.RequestManager(Z.transformRequest,Z.accessToken),"string"==typeof Z.container){if(this._container=t.window.document.getElementById(Z.container),!this._container)throw new Error("Container '"+Z.container+"' not found.")}else{if(!(Z.container instanceof $n))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Z.container}if(Z.maxBounds&&this.setMaxBounds(Z.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ve._update(!1)}),this.on("moveend",function(){return ve._update(!1)}),this.on("zoom",function(){return ve._update(!0)}),typeof t.window<"u"&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Qn(this,Z);var Ae="string"==typeof Z.hash&&Z.hash||void 0;this._hash=Z.hash&&new wl(Ae).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:Z.center,zoom:Z.zoom,bearing:Z.bearing,pitch:Z.pitch}),Z.bounds&&(this.resize(),this.fitBounds(Z.bounds,t.extend({},Z.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Z.localIdeographFontFamily,Z.style&&this.setStyle(Z.style,{localIdeographFontFamily:Z.localIdeographFontFamily}),Z.attributionControl&&this.addControl(new ea({customAttribution:Z.customAttribution})),this.addControl(new ra,Z.logoPosition),this.on("style.load",function(){ve.transform.unmodified&&ve.jumpTo(ve.style.stylesheet)}),this.on("data",function(Ge){ve._update("style"===Ge.dataType),ve.fire(new t.Event(Ge.dataType+"data",Ge))}),this.on("dataloading",function(Ge){ve.fire(new t.Event(Ge.dataType+"dataloading",Ge))})}fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G;var ce={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(ve,Ee){if(void 0===Ee&&(Ee=ve.getDefaultPosition?ve.getDefaultPosition():"top-right"),!ve||!ve.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ae=ve.onAdd(this);this._controls.push(ve);var Ge=this._controlPositions[Ee];return-1!==Ee.indexOf("bottom")?Ge.insertBefore(Ae,Ge.firstChild):Ge.appendChild(Ae),this},G.prototype.removeControl=function(ve){if(!ve||!ve.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ee=this._controls.indexOf(ve);return Ee>-1&&this._controls.splice(Ee,1),ve.onRemove(this),this},G.prototype.hasControl=function(ve){return this._controls.indexOf(ve)>-1},G.prototype.resize=function(ve){var Ee=this._containerDimensions(),Ae=Ee[0],Ge=Ee[1];this._resizeCanvas(Ae,Ge),this.transform.resize(Ae,Ge),this.painter.resize(Ae,Ge);var ot=!this._moving;return ot&&(this.stop(),this.fire(new t.Event("movestart",ve)).fire(new t.Event("move",ve))),this.fire(new t.Event("resize",ve)),ot&&this.fire(new t.Event("moveend",ve)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(ve){return this.transform.setMaxBounds(t.LngLatBounds.convert(ve)),this._update()},G.prototype.setMinZoom=function(ve){if((ve=ve??jn)>=jn&&ve<=this.transform.maxZoom)return this.transform.minZoom=ve,this._update(),this.getZoom()<ve&&this.setZoom(ve),this;throw new Error("minZoom must be between "+jn+" and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(ve){if((ve=ve??ka)>=this.transform.minZoom)return this.transform.maxZoom=ve,this._update(),this.getZoom()>ve&&this.setZoom(ve),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(ve){if((ve=ve??ga)<ga)throw new Error("minPitch must be greater than or equal to "+ga);if(ve>=ga&&ve<=this.transform.maxPitch)return this.transform.minPitch=ve,this._update(),this.getPitch()<ve&&this.setPitch(ve),this;throw new Error("minPitch must be between "+ga+" and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(ve){if((ve=ve??ni)>ni)throw new Error("maxPitch must be less than or equal to "+ni);if(ve>=this.transform.minPitch)return this.transform.maxPitch=ve,this._update(),this.getPitch()>ve&&this.setPitch(ve),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(ve){return this.transform.renderWorldCopies=ve,this._update()},G.prototype.project=function(ve){return this.transform.locationPoint(t.LngLat.convert(ve))},G.prototype.unproject=function(ve){return this.transform.pointLocation(t.Point.convert(ve))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(ve,Ee,Ae){var ot,Ge=this;if("mouseenter"===ve||"mouseover"===ve){var xt=!1,Wt=function(rr){var dr=Ge.getLayer(Ee)?Ge.queryRenderedFeatures(rr.point,{layers:[Ee]}):[];dr.length?xt||(xt=!0,Ae.call(Ge,new ns(ve,Ge,rr.originalEvent,{features:dr}))):xt=!1};return{layer:Ee,listener:Ae,delegates:{mousemove:Wt,mouseout:function(){xt=!1}}}}if("mouseleave"===ve||"mouseout"===ve){var Yt=!1,Tt=function(rr){(Ge.getLayer(Ee)?Ge.queryRenderedFeatures(rr.point,{layers:[Ee]}):[]).length?Yt=!0:Yt&&(Yt=!1,Ae.call(Ge,new ns(ve,Ge,rr.originalEvent)))},_t=function(rr){Yt&&(Yt=!1,Ae.call(Ge,new ns(ve,Ge,rr.originalEvent)))};return{layer:Ee,listener:Ae,delegates:{mousemove:Tt,mouseout:_t}}}var Nt=function(rr){var dr=Ge.getLayer(Ee)?Ge.queryRenderedFeatures(rr.point,{layers:[Ee]}):[];dr.length&&(rr.features=dr,Ae.call(Ge,rr),delete rr.features)};return{layer:Ee,listener:Ae,delegates:(ot={},ot[ve]=Nt,ot)}},G.prototype.on=function(ve,Ee,Ae){if(void 0===Ae)return fe.prototype.on.call(this,ve,Ee);var Ge=this._createDelegatedListener(ve,Ee,Ae);for(var ot in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ve]=this._delegatedListeners[ve]||[],this._delegatedListeners[ve].push(Ge),Ge.delegates)this.on(ot,Ge.delegates[ot]);return this},G.prototype.once=function(ve,Ee,Ae){if(void 0===Ae)return fe.prototype.once.call(this,ve,Ee);var Ge=this._createDelegatedListener(ve,Ee,Ae);for(var ot in Ge.delegates)this.once(ot,Ge.delegates[ot]);return this},G.prototype.off=function(ve,Ee,Ae){var Ge=this;if(void 0===Ae)return fe.prototype.off.call(this,ve,Ee);var ot=function(xt){for(var Wt=xt[ve],ar=0;ar<Wt.length;ar++){var Yt=Wt[ar];if(Yt.layer===Ee&&Yt.listener===Ae){for(var Tt in Yt.delegates)Ge.off(Tt,Yt.delegates[Tt]);return Wt.splice(ar,1),Ge}}};return this._delegatedListeners&&this._delegatedListeners[ve]&&ot(this._delegatedListeners),this},G.prototype.queryRenderedFeatures=function(ve,Ee){if(!this.style)return[];var Ae;if(void 0===Ee&&void 0!==ve&&!(ve instanceof t.Point)&&!Array.isArray(ve)&&(Ee=ve,ve=void 0),Ee=Ee||{},(ve=ve||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof ve[0])Ae=[t.Point.convert(ve)];else{var Ge=t.Point.convert(ve[0]),ot=t.Point.convert(ve[1]);Ae=[Ge,new t.Point(ot.x,Ge.y),ot,new t.Point(Ge.x,ot.y),Ge]}return this.style.queryRenderedFeatures(Ae,Ee,this.transform)},G.prototype.querySourceFeatures=function(ve,Ee){return this.style.querySourceFeatures(ve,Ee)},G.prototype.setStyle=function(ve,Ee){return!1!==(Ee=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ee)).diff&&Ee.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ve?(this._diffStyle(ve,Ee),this):(this._localIdeographFontFamily=Ee.localIdeographFontFamily,this._updateStyle(ve,Ee))},G.prototype._getUIString=function(ve){var Ee=this._locale[ve];if(null==Ee)throw new Error("Missing UI string '"+ve+"'");return Ee},G.prototype._updateStyle=function(ve,Ee){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ve?(this.style=new Ls(this,Ee||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof ve?this.style.loadURL(ve):this.style.loadJSON(ve),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ls(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(ve,Ee){var Ae=this;if("string"==typeof ve){var Ge=this._requestManager.normalizeStyleURL(ve),ot=this._requestManager.transformRequest(Ge,t.ResourceType.Style);t.getJSON(ot,function(xt,Wt){xt?Ae.fire(new t.ErrorEvent(xt)):Wt&&Ae._updateDiff(Wt,Ee)})}else"object"==typeof ve&&this._updateDiff(ve,Ee)},G.prototype._updateDiff=function(ve,Ee){try{this.style.setState(ve)&&this._update(!0)}catch(Ae){t.warnOnce("Unable to perform style diff: "+(Ae.message||Ae.error||Ae)+".  Rebuilding the style from scratch."),this._updateStyle(ve,Ee)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(ve,Ee){return this._lazyInitEmptyStyle(),this.style.addSource(ve,Ee),this._update(!0)},G.prototype.isSourceLoaded=function(ve){var Ee=this.style&&this.style.sourceCaches[ve];if(void 0!==Ee)return Ee.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+ve+"'")))},G.prototype.areTilesLoaded=function(){var ve=this.style&&this.style.sourceCaches;for(var Ee in ve){var Ge=ve[Ee]._tiles;for(var ot in Ge){var xt=Ge[ot];if("loaded"!==xt.state&&"errored"!==xt.state)return!1}}return!0},G.prototype.addSourceType=function(ve,Ee,Ae){return this._lazyInitEmptyStyle(),this.style.addSourceType(ve,Ee,Ae)},G.prototype.removeSource=function(ve){return this.style.removeSource(ve),this._update(!0)},G.prototype.getSource=function(ve){return this.style.getSource(ve)},G.prototype.addImage=function(ve,Ee,Ae){void 0===Ae&&(Ae={});var Ge=Ae.pixelRatio;void 0===Ge&&(Ge=1);var ot=Ae.sdf;void 0===ot&&(ot=!1);var xt=Ae.stretchX,Wt=Ae.stretchY,ar=Ae.content;this._lazyInitEmptyStyle();var Yt=0;if(Ee instanceof kn||na&&Ee instanceof na){var Tt=t.browser.getImageData(Ee),_t=Tt.width,Nt=Tt.height,rr=Tt.data;this.style.addImage(ve,{data:new t.RGBAImage({width:_t,height:Nt},rr),pixelRatio:Ge,stretchX:xt,stretchY:Wt,content:ar,sdf:ot,version:Yt})}else{if(void 0===Ee.width||void 0===Ee.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var dr=Ee.width,pr=Ee.height,Lr=Ee.data,Tr=Ee;this.style.addImage(ve,{data:new t.RGBAImage({width:dr,height:pr},new Uint8Array(Lr)),pixelRatio:Ge,stretchX:xt,stretchY:Wt,content:ar,sdf:ot,version:Yt,userImage:Tr}),Tr.onAdd&&Tr.onAdd(this,ve)}},G.prototype.updateImage=function(ve,Ee){var Ae=this.style.getImage(ve);if(!Ae)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ge=Ee instanceof kn||na&&Ee instanceof na?t.browser.getImageData(Ee):Ee,ot=Ge.width,xt=Ge.height,Wt=Ge.data;if(void 0===ot||void 0===xt)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ot!==Ae.data.width||xt!==Ae.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ar=!(Ee instanceof kn||na&&Ee instanceof na);Ae.data.replace(Wt,ar),this.style.updateImage(ve,Ae)},G.prototype.hasImage=function(ve){return ve?!!this.style.getImage(ve):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(ve){this.style.removeImage(ve)},G.prototype.loadImage=function(ve,Ee){t.getImage(this._requestManager.transformRequest(ve,t.ResourceType.Image),Ee)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(ve,Ee){return this._lazyInitEmptyStyle(),this.style.addLayer(ve,Ee),this._update(!0)},G.prototype.moveLayer=function(ve,Ee){return this.style.moveLayer(ve,Ee),this._update(!0)},G.prototype.removeLayer=function(ve){return this.style.removeLayer(ve),this._update(!0)},G.prototype.getLayer=function(ve){return this.style.getLayer(ve)},G.prototype.setLayerZoomRange=function(ve,Ee,Ae){return this.style.setLayerZoomRange(ve,Ee,Ae),this._update(!0)},G.prototype.setFilter=function(ve,Ee,Ae){return void 0===Ae&&(Ae={}),this.style.setFilter(ve,Ee,Ae),this._update(!0)},G.prototype.getFilter=function(ve){return this.style.getFilter(ve)},G.prototype.setPaintProperty=function(ve,Ee,Ae,Ge){return void 0===Ge&&(Ge={}),this.style.setPaintProperty(ve,Ee,Ae,Ge),this._update(!0)},G.prototype.getPaintProperty=function(ve,Ee){return this.style.getPaintProperty(ve,Ee)},G.prototype.setLayoutProperty=function(ve,Ee,Ae,Ge){return void 0===Ge&&(Ge={}),this.style.setLayoutProperty(ve,Ee,Ae,Ge),this._update(!0)},G.prototype.getLayoutProperty=function(ve,Ee){return this.style.getLayoutProperty(ve,Ee)},G.prototype.setLight=function(ve,Ee){return void 0===Ee&&(Ee={}),this._lazyInitEmptyStyle(),this.style.setLight(ve,Ee),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(ve,Ee){return this.style.setFeatureState(ve,Ee),this._update()},G.prototype.removeFeatureState=function(ve,Ee){return this.style.removeFeatureState(ve,Ee),this._update()},G.prototype.getFeatureState=function(ve){return this.style.getFeatureState(ve)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var ve=0,Ee=0;return this._container&&(ve=this._container.clientWidth||400,Ee=this._container.clientHeight||300),[ve,Ee]},G.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var ve=this._container;ve.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",ve)).style.visibility="hidden",this._detectMissingCSS();var Ae=this._canvasContainer=n.create("div","mapboxgl-canvas-container",ve);this._interactive&&Ae.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",Ae),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Ge=this._containerDimensions();this._resizeCanvas(Ge[0],Ge[1]);var ot=this._controlContainer=n.create("div","mapboxgl-control-container",ve),xt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Wt){xt[Wt]=n.create("div","mapboxgl-ctrl-"+Wt,ot)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},G.prototype._resizeCanvas=function(ve,Ee){var Ae=t.browser.devicePixelRatio||1;this._canvas.width=Ae*ve,this._canvas.height=Ae*Ee,this._canvas.style.width=ve+"px",this._canvas.style.height=Ee+"px"},G.prototype._setupPainter=function(){var ve=t.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ee=this._canvas.getContext("webgl",ve)||this._canvas.getContext("experimental-webgl",ve);Ee?(this.painter=new Mo(Ee,this.transform),t.webpSupported.testSupport(Ee)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(ve){ve.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:ve}))},G.prototype._contextRestored=function(ve){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:ve}))},G.prototype._onMapScroll=function(ve){if(ve.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(ve){return this.style?(this._styleDirty=this._styleDirty||ve,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(ve){return this._update(),this._renderTaskQueue.add(ve)},G.prototype._cancelRenderFrame=function(ve){this._renderTaskQueue.remove(ve)},G.prototype._render=function(ve){var Ae,Ee=this,Ge=0,ot=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Ae=ot.createQueryEXT(),ot.beginQueryEXT(ot.TIME_ELAPSED_EXT,Ae),Ge=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ve),!this._removed){var xt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Wt=this.transform.zoom,ar=t.browser.now();this.style.zoomHistory.update(Wt,ar);var Yt=new t.EvaluationParameters(Wt,{now:ar,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Tt=Yt.crossFadingFactor();(1!==Tt||Tt!==this._crossFadingFactor)&&(xt=!0,this._crossFadingFactor=Tt),this.style.update(Yt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||xt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var _t=t.browser.now()-Ge;ot.endQueryEXT(ot.TIME_ELAPSED_EXT,Ae),setTimeout(function(){var dr=ot.getQueryObjectEXT(Ae,ot.QUERY_RESULT_EXT)/1e6;ot.deleteQueryEXT(Ae),Ee.fire(new t.Event("gpu-timing-frame",{cpuTime:_t,gpuTime:dr}))},50)}if(this.listens("gpu-timing-layer")){var Nt=this.painter.collectGpuTimers();setTimeout(function(){var dr=Ee.painter.queryGpuTimers(Nt);Ee.fire(new t.Event("gpu-timing-layer",{layerTimes:dr}))},50)}var rr=this._sourcesDirty||this._styleDirty||this._placementDirty;return rr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this._loaded&&!this._fullyLoaded&&!rr&&(this._fullyLoaded=!0),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var ve=0,Ee=this._controls;ve<Ee.length;ve+=1)Ee[ve].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof t.window<"u"&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Ge=this.painter.context.gl.getExtension("WEBGL_lose_context");Ge&&Ge.loseContext&&Ge.loseContext(),Va(this._canvasContainer),Va(this._controlContainer),Va(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},G.prototype.triggerRepaint=function(){var ve=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Ee){ve._frame=null,ve._render(Ee)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(ve){this._trackResize&&this.resize({originalEvent:ve})._update()},ce.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ce.showTileBoundaries.set=function(Z){this._showTileBoundaries!==Z&&(this._showTileBoundaries=Z,this._update())},ce.showPadding.get=function(){return!!this._showPadding},ce.showPadding.set=function(Z){this._showPadding!==Z&&(this._showPadding=Z,this._update())},ce.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ce.showCollisionBoxes.set=function(Z){this._showCollisionBoxes!==Z&&(this._showCollisionBoxes=Z,Z?this.style._generateCollisionBoxes():this._update())},ce.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ce.showOverdrawInspector.set=function(Z){this._showOverdrawInspector!==Z&&(this._showOverdrawInspector=Z,this._update())},ce.repaint.get=function(){return!!this._repaint},ce.repaint.set=function(Z){this._repaint!==Z&&(this._repaint=Z,this.triggerRepaint())},ce.vertices.get=function(){return!!this._vertices},ce.vertices.set=function(Z){this._vertices=Z,this._update()},G.prototype._setCacheLimits=function(ve,Ee){t.setCacheLimits(ve,Ee)},ce.version.get=function(){return t.version},Object.defineProperties(G.prototype,ce),G}(Fa);function Va(fe){fe.parentNode&&fe.parentNode.removeChild(fe)}var Pa={showCompass:!0,showZoom:!0,visualizePitch:!1},ca=function(G){var ce=this;this.options=t.extend({},Pa,G),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(Z){return Z.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Z){return ce._map.zoomIn({},{originalEvent:Z})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Z){return ce._map.zoomOut({},{originalEvent:Z})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Z){ce.options.visualizePitch?ce._map.resetNorthPitch({},{originalEvent:Z}):ce._map.resetNorth({},{originalEvent:Z})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ca.prototype._updateZoomButtons=function(){var G=this._map.getZoom(),ce=G===this._map.getMaxZoom(),Z=G===this._map.getMinZoom();this._zoomInButton.disabled=ce,this._zoomOutButton.disabled=Z,this._zoomInButton.setAttribute("aria-disabled",ce.toString()),this._zoomOutButton.setAttribute("aria-disabled",Z.toString())},ca.prototype._rotateCompassArrow=function(){var G=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=G},ca.prototype.onAdd=function(G){return this._map=G,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oa(this._map,this._compass,this.options.visualizePitch)),this._container},ca.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ca.prototype._createButton=function(G,ce){var Z=n.create("button",G,this._container);return Z.type="button",Z.addEventListener("click",ce),Z},ca.prototype._setButtonTitle=function(G,ce){var Z=this._map._getUIString("NavigationControl."+ce);G.title=Z,G.setAttribute("aria-label",Z)};var oa=function(G,ce,Z){void 0===Z&&(Z=!1),this._clickTolerance=10,this.element=ce,this.mouseRotate=new Jr({clickTolerance:G.dragRotate._mouseRotate._clickTolerance}),this.map=G,Z&&(this.mousePitch=new qr({clickTolerance:G.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(ce,"mousedown",this.mousedown),n.addEventListener(ce,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ce,"touchmove",this.touchmove),n.addEventListener(ce,"touchend",this.touchend),n.addEventListener(ce,"touchcancel",this.reset)};function Oa(fe,G,ce){if(fe=new t.LngLat(fe.lng,fe.lat),G){var Z=new t.LngLat(fe.lng-360,fe.lat),ve=new t.LngLat(fe.lng+360,fe.lat),Ee=ce.locationPoint(fe).distSqr(G);ce.locationPoint(Z).distSqr(G)<Ee?fe=Z:ce.locationPoint(ve).distSqr(G)<Ee&&(fe=ve)}for(;Math.abs(fe.lng-ce.center.lng)>180;){var Ae=ce.locationPoint(fe);if(Ae.x>=0&&Ae.y>=0&&Ae.x<=ce.width&&Ae.y<=ce.height)break;fe.lng>ce.center.lng?fe.lng-=360:fe.lng+=360}return fe}oa.prototype.down=function(G,ce){this.mouseRotate.mousedown(G,ce),this.mousePitch&&this.mousePitch.mousedown(G,ce),n.disableDrag()},oa.prototype.move=function(G,ce){var Z=this.map,ve=this.mouseRotate.mousemoveWindow(G,ce);if(ve&&ve.bearingDelta&&Z.setBearing(Z.getBearing()+ve.bearingDelta),this.mousePitch){var Ee=this.mousePitch.mousemoveWindow(G,ce);Ee&&Ee.pitchDelta&&Z.setPitch(Z.getPitch()+Ee.pitchDelta)}},oa.prototype.off=function(){var G=this.element;n.removeEventListener(G,"mousedown",this.mousedown),n.removeEventListener(G,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(G,"touchmove",this.touchmove),n.removeEventListener(G,"touchend",this.touchend),n.removeEventListener(G,"touchcancel",this.reset),this.offTemp()},oa.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},oa.prototype.mousedown=function(G){this.down(t.extend({},G,{ctrlKey:!0,preventDefault:function(){return G.preventDefault()}}),n.mousePos(this.element,G)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},oa.prototype.mousemove=function(G){this.move(G,n.mousePos(this.element,G))},oa.prototype.mouseup=function(G){this.mouseRotate.mouseupWindow(G),this.mousePitch&&this.mousePitch.mouseupWindow(G),this.offTemp()},oa.prototype.touchstart=function(G){1!==G.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,G.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return G.preventDefault()}},this._startPos))},oa.prototype.touchmove=function(G){1!==G.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,G.targetTouches)[0],this.move({preventDefault:function(){return G.preventDefault()}},this._lastPos))},oa.prototype.touchend=function(G){0===G.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},oa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xi(fe,G,ce){var Z=fe.classList;for(var ve in li)Z.remove("mapboxgl-"+ce+"-anchor-"+ve);Z.add("mapboxgl-"+ce+"-anchor-"+G)}var gi,Da=function(fe){function G(ce,Z){if(fe.call(this),(ce instanceof t.window.HTMLElement||Z)&&(ce=t.extend({element:ce},Z)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ce&&ce.anchor||"center",this._color=ce&&ce.color||"#3FB1CE",this._scale=ce&&ce.scale||1,this._draggable=ce&&ce.draggable||!1,this._clickTolerance=ce&&ce.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=ce&&ce.rotation||0,this._rotationAlignment=ce&&ce.rotationAlignment||"auto",this._pitchAlignment=ce&&ce.pitchAlignment&&"auto"!==ce.pitchAlignment?ce.pitchAlignment:this._rotationAlignment,ce&&ce.element)this._element=ce.element,this._offset=t.Point.convert(ce&&ce.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var ve=n.createNS("http://www.w3.org/2000/svg","svg"),Ee=41,Ae=27;ve.setAttributeNS(null,"display","block"),ve.setAttributeNS(null,"height",Ee+"px"),ve.setAttributeNS(null,"width",Ae+"px"),ve.setAttributeNS(null,"viewBox","0 0 "+Ae+" "+Ee);var Ge=n.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"stroke","none"),Ge.setAttributeNS(null,"stroke-width","1"),Ge.setAttributeNS(null,"fill","none"),Ge.setAttributeNS(null,"fill-rule","evenodd");var ot=n.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"fill-rule","nonzero");var xt=n.createNS("http://www.w3.org/2000/svg","g");xt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),xt.setAttributeNS(null,"fill","#000000");for(var ar=0,Yt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ar<Yt.length;ar+=1){var Tt=Yt[ar],_t=n.createNS("http://www.w3.org/2000/svg","ellipse");_t.setAttributeNS(null,"opacity","0.04"),_t.setAttributeNS(null,"cx","10.5"),_t.setAttributeNS(null,"cy","5.80029008"),_t.setAttributeNS(null,"rx",Tt.rx),_t.setAttributeNS(null,"ry",Tt.ry),xt.appendChild(_t)}var Nt=n.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"fill",this._color);var rr=n.createNS("http://www.w3.org/2000/svg","path");rr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Nt.appendChild(rr);var dr=n.createNS("http://www.w3.org/2000/svg","g");dr.setAttributeNS(null,"opacity","0.25"),dr.setAttributeNS(null,"fill","#000000");var pr=n.createNS("http://www.w3.org/2000/svg","path");pr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),dr.appendChild(pr);var Lr=n.createNS("http://www.w3.org/2000/svg","g");Lr.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Lr.setAttributeNS(null,"fill","#FFFFFF");var Tr=n.createNS("http://www.w3.org/2000/svg","g");Tr.setAttributeNS(null,"transform","translate(8.0, 8.0)");var mr=n.createNS("http://www.w3.org/2000/svg","circle");mr.setAttributeNS(null,"fill","#000000"),mr.setAttributeNS(null,"opacity","0.25"),mr.setAttributeNS(null,"cx","5.5"),mr.setAttributeNS(null,"cy","5.5"),mr.setAttributeNS(null,"r","5.4999962");var Er=n.createNS("http://www.w3.org/2000/svg","circle");Er.setAttributeNS(null,"fill","#FFFFFF"),Er.setAttributeNS(null,"cx","5.5"),Er.setAttributeNS(null,"cy","5.5"),Er.setAttributeNS(null,"r","5.4999962"),Tr.appendChild(mr),Tr.appendChild(Er),ot.appendChild(xt),ot.appendChild(Nt),ot.appendChild(dr),ot.appendChild(Lr),ot.appendChild(Tr),ve.appendChild(ot),ve.setAttributeNS(null,"height",Ee*this._scale+"px"),ve.setAttributeNS(null,"width",Ae*this._scale+"px"),this._element.appendChild(ve),this._offset=t.Point.convert(ce&&ce.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(fr){fr.preventDefault()}),this._element.addEventListener("mousedown",function(fr){fr.preventDefault()}),xi(this._element,this._anchor,"marker"),this._popup=null}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.addTo=function(Z){return this.remove(),this._map=Z,Z.getCanvasContainer().appendChild(this._element),Z.on("move",this._update),Z.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(Z){return this._lngLat=t.LngLat.convert(Z),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(Z){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Z){if(!("offset"in Z.options)){var ve=38.1,Ee=13.5,Ae=Math.sqrt(Math.pow(Ee,2)/2);Z.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ve],"bottom-left":[Ae,-1*(ve-Ee+Ae)],"bottom-right":[-Ae,-1*(ve-Ee+Ae)],left:[Ee,-1*(ve-Ee)],right:[-Ee,-1*(ve-Ee)]}:this._offset}this._popup=Z,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(Z){var ve=Z.code,Ee=Z.charCode||Z.keyCode;("Space"===ve||"Enter"===ve||32===Ee||13===Ee)&&this.togglePopup()},G.prototype._onMapClick=function(Z){var ve=Z.originalEvent.target,Ee=this._element;this._popup&&(ve===Ee||Ee.contains(ve))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var Z=this._popup;return Z?(Z.isOpen()?Z.remove():Z.addTo(this._map),this):this},G.prototype._update=function(Z){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Oa(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ve="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ve="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ve="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ee="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?Ee="rotateX(0deg)":"map"===this._pitchAlignment&&(Ee="rotateX("+this._map.getPitch()+"deg)"),(!Z||"moveend"===Z.type)&&(this._pos=this._pos.round()),n.setTransform(this._element,li[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ee+" "+ve)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(Z){return this._offset=t.Point.convert(Z),this._update(),this},G.prototype._onMove=function(Z){if(!this._isDragging){var ve=this._clickTolerance||this._map._clickTolerance;this._isDragging=Z.point.dist(this._pointerdownPos)>=ve}this._isDragging&&(this._pos=Z.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(Z){this._element.contains(Z.originalEvent.target)&&(Z.preventDefault(),this._positionDelta=Z.point.sub(this._pos).add(this._offset),this._pointerdownPos=Z.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(Z){return this._draggable=!!Z,this._map&&(Z?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(Z){return this._rotation=Z||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(Z){return this._rotationAlignment=Z||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(Z){return this._pitchAlignment=Z&&"auto"!==Z?Z:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(t.Evented),$a={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};function wi(fe){void 0!==gi?fe(gi):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(G){gi="denied"!==G.state,fe(gi)}):(gi=!!t.window.navigator.geolocation,fe(gi))}var ki=0,Po=!1,As=function(fe){function G(ce){fe.call(this),this.options=t.extend({},$a,ce),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(Z){return this._map=Z,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),wi(this._setupUI),this._container},G.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ki=0,Po=!1},G.prototype._isOutOfMapMaxBounds=function(Z){var ve=this._map.getMaxBounds(),Ee=Z.coords;return ve&&(Ee.longitude<ve.getWest()||Ee.longitude>ve.getEast()||Ee.latitude<ve.getSouth()||Ee.latitude>ve.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(Z){if(this._map){if(this._isOutOfMapMaxBounds(Z))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",Z)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=Z,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(Z),(!this.options.trackUserLocation||"ACTIVE_LOCK"===this._watchState)&&this._updateCamera(Z),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",Z)),this._finish()}},G.prototype._updateCamera=function(Z){var ve=new t.LngLat(Z.coords.longitude,Z.coords.latitude),Ee=Z.coords.accuracy,Ae=this._map.getBearing(),Ge=t.extend({bearing:Ae},this.options.fitBoundsOptions);this._map.fitBounds(ve.toBounds(Ee),Ge,{geolocateSource:!0})},G.prototype._updateMarker=function(Z){if(Z){var ve=new t.LngLat(Z.coords.longitude,Z.coords.latitude);this._accuracyCircleMarker.setLngLat(ve).addTo(this._map),this._userLocationDotMarker.setLngLat(ve).addTo(this._map),this._accuracy=Z.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var Z=this._map._container.clientHeight/2,ve=this._map.unproject([0,Z]),Ee=this._map.unproject([1,Z]),Ae=ve.distanceTo(Ee),Ge=Math.ceil(2*this._accuracy/Ae);this._circleElement.style.width=Ge+"px",this._circleElement.style.height=Ge+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(Z){if(this._map){if(this.options.trackUserLocation)if(1===Z.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ve=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ve,this._geolocateButton.setAttribute("aria-label",ve),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===Z.code&&Po)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",Z)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(Z){var ve=this;if(this._container.addEventListener("contextmenu",function(Ge){return Ge.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===Z){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ee=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ee,this._geolocateButton.setAttribute("aria-label",Ee)}else{var Ae=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ae,this._geolocateButton.setAttribute("aria-label",Ae)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Da(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Da({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ge){var ot=Ge.originalEvent&&"resize"===Ge.originalEvent.type;!Ge.geolocateSource&&"ACTIVE_LOCK"===ve._watchState&&!ot&&(ve._watchState="BACKGROUND",ve._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ve._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ve.fire(new t.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ki--,Po=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var Z;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ki>1?(Z={maximumAge:6e5,timeout:0},Po=!0):(Z=this.options.positionOptions,Po=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Z)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(t.Evented),Gi={maxWidth:100,unit:"metric"},hs=function(G){this.options=t.extend({},Gi,G),t.bindAll(["_onMove","setUnit"],this)};function mo(fe,G,ce){var Z=ce&&ce.maxWidth||100,ve=fe._container.clientHeight/2,Ee=fe.unproject([0,ve]),Ae=fe.unproject([Z,ve]),Ge=Ee.distanceTo(Ae);if(ce&&"imperial"===ce.unit){var ot=3.2808*Ge;ot>5280?gs(G,Z,ot/5280,fe._getUIString("ScaleControl.Miles")):gs(G,Z,ot,fe._getUIString("ScaleControl.Feet"))}else ce&&"nautical"===ce.unit?gs(G,Z,Ge/1852,fe._getUIString("ScaleControl.NauticalMiles")):Ge>=1e3?gs(G,Z,Ge/1e3,fe._getUIString("ScaleControl.Kilometers")):gs(G,Z,Ge,fe._getUIString("ScaleControl.Meters"))}function gs(fe,G,ce,Z){var ve=Al(ce),Ee=ve/ce;fe.style.width=G*Ee+"px",fe.innerHTML=ve+"&nbsp;"+Z}function hl(fe){var G=Math.pow(10,Math.ceil(-Math.log(fe)/Math.LN10));return Math.round(fe*G)/G}function Al(fe){var G=Math.pow(10,(""+Math.floor(fe)).length-1),ce=fe/G;return G*(ce=ce>=10?10:ce>=5?5:ce>=3?3:ce>=2?2:ce>=1?1:hl(ce))}hs.prototype.getDefaultPosition=function(){return"bottom-left"},hs.prototype._onMove=function(){mo(this._map,this._container,this.options)},hs.prototype.onAdd=function(G){return this._map=G,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",G.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},hs.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},hs.prototype.setUnit=function(G){this.options.unit=G,mo(this._map,this._container,this.options)};var Io=function(G){this._fullscreen=!1,G&&G.container&&(G.container instanceof t.window.HTMLElement?this._container=G.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Io.prototype.onAdd=function(G){return this._map=G,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Io.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Io.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Io.prototype._setupUI=function(){var G=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",G).setAttribute("aria-hidden",!0),G.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Io.prototype._updateTitle=function(){var G=this._getTitle();this._fullscreenButton.setAttribute("aria-label",G),this._fullscreenButton.title=G},Io.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Io.prototype._isFullscreen=function(){return this._fullscreen},Io.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Io.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var vs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ss=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),_i=function(fe){function G(ce){fe.call(this),this.options=t.extend(Object.create(vs),ce),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return fe&&(G.__proto__=fe),G.prototype=Object.create(fe&&fe.prototype),G.prototype.constructor=G,G.prototype.addTo=function(Z){return this._map&&this.remove(),this._map=Z,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(Z){return this._lngLat=t.LngLat.convert(Z),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(Z){return this.setDOMContent(t.window.document.createTextNode(Z))},G.prototype.setHTML=function(Z){var Ae,ve=t.window.document.createDocumentFragment(),Ee=t.window.document.createElement("body");for(Ee.innerHTML=Z;Ae=Ee.firstChild;)ve.appendChild(Ae);return this.setDOMContent(ve)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(Z){return this.options.maxWidth=Z,this._update(),this},G.prototype.setDOMContent=function(Z){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(Z),this._createCloseButton(),this._update(),this._focusFirstElement(),this},G.prototype.addClassName=function(Z){this._container&&this._container.classList.add(Z)},G.prototype.removeClassName=function(Z){this._container&&this._container.classList.remove(Z)},G.prototype.setOffset=function(Z){return this.options.offset=Z,this._update(),this},G.prototype.toggleClassName=function(Z){if(this._container)return this._container.classList.toggle(Z)},G.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(Z){this._update(Z.point)},G.prototype._onMouseMove=function(Z){this._update(Z.point)},G.prototype._onDrag=function(Z){this._update(Z.point)},G.prototype._update=function(Z){var ve=this,Ee=this._lngLat||this._trackPointer;if(this._map&&Ee&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Tt){return ve._container.classList.add(Tt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Oa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||Z)){var Ae=this._pos=this._trackPointer&&Z?Z:this._map.project(this._lngLat),Ge=this.options.anchor,ot=xo(this.options.offset);if(!Ge){var ar,xt=this._container.offsetWidth,Wt=this._container.offsetHeight;ar=Ae.y+ot.bottom.y<Wt?["top"]:Ae.y>this._map.transform.height-Wt?["bottom"]:[],Ae.x<xt/2?ar.push("left"):Ae.x>this._map.transform.width-xt/2&&ar.push("right"),Ge=0===ar.length?"bottom":ar.join("-")}var Yt=Ae.add(ot[Ge]).round();n.setTransform(this._container,li[Ge]+" translate("+Yt.x+"px,"+Yt.y+"px)"),xi(this._container,Ge,"popup")}},G.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var Z=this._container.querySelector(Ss);Z&&Z.focus()}},G.prototype._onClose=function(){this.remove()},G}(t.Evented);function xo(fe){if(fe){if("number"==typeof fe){var G=Math.round(Math.sqrt(.5*Math.pow(fe,2)));return{center:new t.Point(0,0),top:new t.Point(0,fe),"top-left":new t.Point(G,G),"top-right":new t.Point(-G,G),bottom:new t.Point(0,-fe),"bottom-left":new t.Point(G,-G),"bottom-right":new t.Point(-G,-G),left:new t.Point(fe,0),right:new t.Point(-fe,0)}}if(fe instanceof t.Point||Array.isArray(fe)){var ce=t.Point.convert(fe);return{center:ce,top:ce,"top-left":ce,"top-right":ce,bottom:ce,"bottom-left":ce,"bottom-right":ce,left:ce,right:ce}}return{center:t.Point.convert(fe.center||[0,0]),top:t.Point.convert(fe.top||[0,0]),"top-left":t.Point.convert(fe["top-left"]||[0,0]),"top-right":t.Point.convert(fe["top-right"]||[0,0]),bottom:t.Point.convert(fe.bottom||[0,0]),"bottom-left":t.Point.convert(fe["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(fe["bottom-right"]||[0,0]),left:t.Point.convert(fe.left||[0,0]),right:t.Point.convert(fe.right||[0,0])}}return xo(new t.Point(0,0))}var Mi={version:t.version,supported:T,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Hn,NavigationControl:ca,GeolocateControl:As,AttributionControl:ea,ScaleControl:hs,FullscreenControl:Io,Popup:_i,Marker:Da,Style:Ls,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:Gt,clearPrewarmedResources:hr,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(fe){t.config.ACCESS_TOKEN=fe},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(fe){t.config.API_URL=fe},get workerCount(){return Wr.workerCount},set workerCount(fe){Wr.workerCount=fe},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(fe){t.config.MAX_PARALLEL_IMAGE_REQUESTS=fe},clearStorage:function(G){t.clearTileCache(G)},workerUrl:""};return Mi}),M}()},52092:($,K,e)=>{"use strict";$.exports=e(74742)},74742:($,K,e)=>{"use strict";const M=e(71847),I=e(35856),t=e(60574),T=e(8236),n=e(9284),i=e(67057),u=e(97604),a=e(41888),r=e(51186),o=e(26596);function p(f,l){let[y,s,x,h]=l,g=1/(x-y),m=1/(h-s),d=new Array(f.length);for(let A=0,b=f.length/2;A<b;A++)d[2*A]=I((f[2*A]-y)*g,0,1),d[2*A+1]=I((f[2*A+1]-s)*m,0,1);return d}$.exports=function(l,y){y||(y={}),l=u(l,"float64"),y=n(y,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});let s=i(y.maxDepth,255),x=i(y.bounds,T(l,2));x[0]===x[2]&&x[2]++,x[1]===x[3]&&x[3]++;let m,h=p(l,x),g=l.length>>>1;y.dtype||(y.dtype="array"),"string"==typeof y.dtype?m=new(r(y.dtype))(g):y.dtype&&(m=y.dtype,Array.isArray(m)&&(m.length=g));for(let F=0;F<g;++F)m[F]=F;let d=[],A=[],b=[],c=[];!function w(F,_,z,D,k,O){if(!D.length)return null;let U=d[k]||(d[k]=[]),H=b[k]||(b[k]=[]),j=A[k]||(A[k]=[]),ee=U.length;if(++k>s||O>1073741824){for(let Y=0;Y<D.length;Y++)U.push(D[Y]),H.push(O),j.push(null,null,null,null);return ee}if(U.push(D[0]),H.push(O),D.length<=1)return j.push(null,null,null,null),ee;let W=.5*z,B=F+W,te=_+W,q=[],oe=[],ie=[],V=[];for(let Y=1,ae=D.length;Y<ae;Y++){let X=D[Y],J=h[2*X],ue=h[2*X+1];J<B?ue<te?q.push(X):oe.push(X):ue<te?ie.push(X):V.push(X)}return O<<=2,j.push(w(F,_,W,q,k,O),w(F,te,W,oe,k,O+1),w(B,_,W,ie,k,O+2),w(B,te,W,V,k,O+3)),ee}(0,0,1,m,0,1);let S=0;for(let F=0;F<d.length;F++){let _=d[F];if(m.set)m.set(_,S);else for(let D=0,k=_.length;D<k;D++)m[D+S]=_[D];let z=S+d[F].length;c[F]=[S,z],S=z}return m.range=function E(...F){let _;if(a(F[F.length-1])){let ie=F.pop();!F.length&&(null!=ie.x||null!=ie.l||null!=ie.left)&&(F=[ie],_={}),_=n(ie,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else _={};F.length||(F=x);let z=t(...F),[D,k,O,U]=[Math.min(z.x,z.x+z.width),Math.min(z.y,z.y+z.height),Math.max(z.x,z.x+z.width),Math.max(z.y,z.y+z.height)],[H,j,ee,W]=p([D,k,O,U],x),B=i(_.level,d.length);if(null!=_.d){let ie;"number"==typeof _.d?ie=[_.d,_.d]:_.d.length&&(ie=_.d),B=Math.min(Math.max(Math.ceil(-o(Math.abs(ie[0])/(x[2]-x[0]))),Math.ceil(-o(Math.abs(ie[1])/(x[3]-x[1])))),B)}if(B=Math.min(B,d.length),_.lod)return function P(F,_,z,D,k){let O=[];for(let U=0;U<k;U++){let H=b[U],j=c[U][0],ee=R(F,_,U),W=R(z,D,U),B=M.ge(H,ee),te=M.gt(H,W,B,H.length-1);O[U]=[B+j,te+j]}return O}(H,j,ee,W,B);let te=[];return function q(ie,V,Y,ae,X,J){if(null===X||null===J)return;let re=V+Y;if(H>ie+Y||j>re||ee<ie||W<V||ae>=B||X===J)return;let ne=d[ae];void 0===J&&(J=ne.length);for(let ke=X;ke<J;ke++){let ze=ne[ke],Pe=l[2*ze],Ie=l[2*ze+1];Pe>=D&&Pe<=O&&Ie>=k&&Ie<=U&&te.push(ze)}let se=A[ae],de=se[4*X+0],be=se[4*X+1],De=se[4*X+2],_e=se[4*X+3],Ce=function oe(ie,V){let Y=null,ae=0;for(;null===Y;)if(Y=ie[4*V+ae],ae++,ae>ie.length)return null;return Y}(se,X+1),Le=.5*Y,Fe=ae+1;q(ie,V,Le,Fe,de,be||De||_e||Ce),q(ie,V+Le,Le,Fe,be,De||_e||Ce),q(ie+Le,V,Le,Fe,De,_e||Ce),q(ie+Le,V+Le,Le,Fe,_e,Ce)}(0,0,1,0,0,1),te},m;function R(F,_,z){let D=1,k=.5,O=.5,U=.5;for(let H=0;H<z;H++)D<<=2,D+=F<k?_<O?0:1:_<O?2:3,U*=.5,k+=F<k?-U:U,O+=_<O?-U:U;return D}}},93964:($,K,e)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var M=e(49626),I=6378137;function n(a){var r=0;if(a&&a.length>0){r+=Math.abs(i(a[0]));for(var o=1;o<a.length;o++)r-=Math.abs(i(a[o]))}return r}function i(a){var r,o,p,f,l,y,s=0,x=a.length;if(x>2){for(y=0;y<x;y++)y===x-2?(p=x-2,f=x-1,l=0):y===x-1?(p=x-1,f=0,l=1):(p=y,f=y+1,l=y+2),r=a[p],o=a[f],s+=(u(a[l][0])-u(r[0]))*Math.sin(u(o[1]));s=s*I*I/2}return s}function u(a){return a*Math.PI/180}K.default=function t(a){return M.geomReduce(a,function(r,o){return r+function T(a){var o,r=0;switch(a.type){case"Polygon":return n(a.coordinates);case"MultiPolygon":for(o=0;o<a.coordinates.length;o++)r+=n(a.coordinates[o]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(o)},0)}},51503:($,K,e)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var M=e(49626);function I(t){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(t,function(n){T[0]>n[0]&&(T[0]=n[0]),T[1]>n[1]&&(T[1]=n[1]),T[2]<n[0]&&(T[2]=n[0]),T[3]<n[1]&&(T[3]=n[1])}),T}I.default=I,K.default=I},15427:($,K,e)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var M=e(49626),I=e(48275);K.default=function t(T,n){void 0===n&&(n={});var i=0,u=0,a=0;return M.coordEach(T,function(r){i+=r[0],u+=r[1],a++},!0),I.point([i/a,u/a],n.properties)}},48275:($,K)=>{"use strict";function e(w,E,P){void 0===P&&(P={});var R={type:"Feature"};return(0===P.id||P.id)&&(R.id=P.id),P.bbox&&(R.bbox=P.bbox),R.properties=E||{},R.geometry=w,R}function I(w,E,P){if(void 0===P&&(P={}),!w)throw new Error("coordinates is required");if(!Array.isArray(w))throw new Error("coordinates must be an Array");if(w.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(w[0])||!A(w[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:w},E,P)}function T(w,E,P){void 0===P&&(P={});for(var R=0,F=w;R<F.length;R++){var _=F[R];if(_.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var z=0;z<_[_.length-1].length;z++)if(_[_.length-1][z]!==_[0][z])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:w},E,P)}function i(w,E,P){if(void 0===P&&(P={}),w.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:w},E,P)}function a(w,E){void 0===E&&(E={});var P={type:"FeatureCollection"};return E.id&&(P.id=E.id),E.bbox&&(P.bbox=E.bbox),P.features=w,P}function r(w,E,P){return void 0===P&&(P={}),e({type:"MultiLineString",coordinates:w},E,P)}function o(w,E,P){return void 0===P&&(P={}),e({type:"MultiPoint",coordinates:w},E,P)}function v(w,E,P){return void 0===P&&(P={}),e({type:"MultiPolygon",coordinates:w},E,P)}function l(w,E){void 0===E&&(E="kilometers");var P=K.factors[E];if(!P)throw new Error(E+" units is invalid");return w*P}function y(w,E){void 0===E&&(E="kilometers");var P=K.factors[E];if(!P)throw new Error(E+" units is invalid");return w/P}function h(w){return 180*(w%(2*Math.PI))/Math.PI}function A(w){return!isNaN(w)&&null!==w&&!Array.isArray(w)}Object.defineProperty(K,"__esModule",{value:!0}),K.earthRadius=6371008.8,K.factors={centimeters:100*K.earthRadius,centimetres:100*K.earthRadius,degrees:K.earthRadius/111325,feet:3.28084*K.earthRadius,inches:39.37*K.earthRadius,kilometers:K.earthRadius/1e3,kilometres:K.earthRadius/1e3,meters:K.earthRadius,metres:K.earthRadius,miles:K.earthRadius/1609.344,millimeters:1e3*K.earthRadius,millimetres:1e3*K.earthRadius,nauticalmiles:K.earthRadius/1852,radians:1,yards:1.0936*K.earthRadius},K.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/K.earthRadius,yards:1.0936133},K.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},K.feature=e,K.geometry=function M(w,E,P){switch(void 0===P&&(P={}),w){case"Point":return I(E).geometry;case"LineString":return i(E).geometry;case"Polygon":return T(E).geometry;case"MultiPoint":return o(E).geometry;case"MultiLineString":return r(E).geometry;case"MultiPolygon":return v(E).geometry;default:throw new Error(w+" is invalid")}},K.point=I,K.points=function t(w,E,P){return void 0===P&&(P={}),a(w.map(function(R){return I(R,E)}),P)},K.polygon=T,K.polygons=function n(w,E,P){return void 0===P&&(P={}),a(w.map(function(R){return T(R,E)}),P)},K.lineString=i,K.lineStrings=function u(w,E,P){return void 0===P&&(P={}),a(w.map(function(R){return i(R,E)}),P)},K.featureCollection=a,K.multiLineString=r,K.multiPoint=o,K.multiPolygon=v,K.geometryCollection=function p(w,E,P){return void 0===P&&(P={}),e({type:"GeometryCollection",geometries:w},E,P)},K.round=function f(w,E){if(void 0===E&&(E=0),E&&!(E>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,E||0);return Math.round(w*P)/P},K.radiansToLength=l,K.lengthToRadians=y,K.lengthToDegrees=function s(w,E){return h(y(w,E))},K.bearingToAzimuth=function x(w){var E=w%360;return E<0&&(E+=360),E},K.radiansToDegrees=h,K.degreesToRadians=function g(w){return w%360*Math.PI/180},K.convertLength=function m(w,E,P){if(void 0===E&&(E="kilometers"),void 0===P&&(P="kilometers"),!(w>=0))throw new Error("length must be a positive number");return l(y(w,E),P)},K.convertArea=function d(w,E,P){if(void 0===E&&(E="meters"),void 0===P&&(P="kilometers"),!(w>=0))throw new Error("area must be a positive number");var R=K.areaFactors[E];if(!R)throw new Error("invalid original units");var F=K.areaFactors[P];if(!F)throw new Error("invalid final units");return w/R*F},K.isNumber=A,K.isObject=function b(w){return!!w&&w.constructor===Object},K.validateBBox=function c(w){if(!w)throw new Error("bbox is required");if(!Array.isArray(w))throw new Error("bbox must be an Array");if(4!==w.length&&6!==w.length)throw new Error("bbox must be an Array of 4 or 6 numbers");w.forEach(function(E){if(!A(E))throw new Error("bbox must only contain numbers")})},K.validateId=function S(w){if(!w)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof w))throw new Error("id must be a number or a string")}},49626:($,K,e)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var M=e(48275);function I(g,m,d){if(null!==g)for(var A,b,c,S,w,E,P,_,R=0,F=0,z=g.type,D="FeatureCollection"===z,k="Feature"===z,O=D?g.features.length:1,U=0;U<O;U++){w=(_=!!(P=D?g.features[U].geometry:k?g.geometry:g)&&"GeometryCollection"===P.type)?P.geometries.length:1;for(var H=0;H<w;H++){var j=0,ee=0;if(null!==(S=_?P.geometries[H]:P)){E=S.coordinates;var W=S.type;switch(R=!d||"Polygon"!==W&&"MultiPolygon"!==W?0:1,W){case null:break;case"Point":if(!1===m(E,F,U,j,ee))return!1;F++,j++;break;case"LineString":case"MultiPoint":for(A=0;A<E.length;A++){if(!1===m(E[A],F,U,j,ee))return!1;F++,"MultiPoint"===W&&j++}"LineString"===W&&j++;break;case"Polygon":case"MultiLineString":for(A=0;A<E.length;A++){for(b=0;b<E[A].length-R;b++){if(!1===m(E[A][b],F,U,j,ee))return!1;F++}"MultiLineString"===W&&j++,"Polygon"===W&&ee++}"Polygon"===W&&j++;break;case"MultiPolygon":for(A=0;A<E.length;A++){for(ee=0,b=0;b<E[A].length;b++){for(c=0;c<E[A][b].length-R;c++){if(!1===m(E[A][b][c],F,U,j,ee))return!1;F++}ee++}j++}break;case"GeometryCollection":for(A=0;A<S.geometries.length;A++)if(!1===I(S.geometries[A],m,d))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(g,m){var d;switch(g.type){case"FeatureCollection":for(d=0;d<g.features.length&&!1!==m(g.features[d].properties,d);d++);break;case"Feature":m(g.properties,0)}}function i(g,m){if("Feature"===g.type)m(g,0);else if("FeatureCollection"===g.type)for(var d=0;d<g.features.length&&!1!==m(g.features[d],d);d++);}function r(g,m){var d,A,b,c,S,w,E,P,R,F,_=0,z="FeatureCollection"===g.type,D="Feature"===g.type,k=z?g.features.length:1;for(d=0;d<k;d++){for(w=z?g.features[d].geometry:D?g.geometry:g,P=z?g.features[d].properties:D?g.properties:{},R=z?g.features[d].bbox:D?g.bbox:void 0,F=z?g.features[d].id:D?g.id:void 0,S=(E=!!w&&"GeometryCollection"===w.type)?w.geometries.length:1,b=0;b<S;b++)if(null!==(c=E?w.geometries[b]:w))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===m(c,_,P,R,F))return!1;break;case"GeometryCollection":for(A=0;A<c.geometries.length;A++)if(!1===m(c.geometries[A],_,P,R,F))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===m(null,_,P,R,F))return!1;_++}}function v(g,m){r(g,function(d,A,b,c,S){var E,w=null===d?null:d.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return!1!==m(M.feature(d,b,{bbox:c,id:S}),A,0)&&void 0}switch(w){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon"}for(var P=0;P<d.coordinates.length;P++){var F={type:E,coordinates:d.coordinates[P]};if(!1===m(M.feature(F,b),A,P))return!1}})}function f(g,m){v(g,function(d,A,b){var c=0;if(d.geometry){var S=d.geometry.type;if("Point"!==S&&"MultiPoint"!==S){var w,E=0,P=0,R=0;if(!1===I(d,function(F,_,z,D,k){if(void 0===w||A>E||D>P||k>R)return w=F,E=A,P=D,R=k,void(c=0);var O=M.lineString([w,F],d.properties);if(!1===m(O,A,b,k,c))return!1;c++,w=F}))return!1}}})}function y(g,m){if(!g)throw new Error("geojson is required");v(g,function(d,A,b){if(null!==d.geometry){var c=d.geometry.type,S=d.geometry.coordinates;switch(c){case"LineString":if(!1===m(d,A,b,0,0))return!1;break;case"Polygon":for(var w=0;w<S.length;w++)if(!1===m(M.lineString(S[w],d.properties),A,b,w))return!1}}})}K.coordAll=function a(g){var m=[];return I(g,function(d){m.push(d)}),m},K.coordEach=I,K.coordReduce=function t(g,m,d,A){var b=d;return I(g,function(c,S,w,E,P){b=0===S&&void 0===d?c:m(b,c,S,w,E,P)},A),b},K.featureEach=i,K.featureReduce=function u(g,m,d){var A=d;return i(g,function(b,c){A=0===c&&void 0===d?b:m(A,b,c)}),A},K.findPoint=function h(g,m){if(m=m||{},!M.isObject(m))throw new Error("options is invalid");var w,d=m.featureIndex||0,A=m.multiFeatureIndex||0,b=m.geometryIndex||0,c=m.coordIndex||0,S=m.properties;switch(g.type){case"FeatureCollection":d<0&&(d=g.features.length+d),S=S||g.features[d].properties,w=g.features[d].geometry;break;case"Feature":S=S||g.properties,w=g.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":w=g;break;default:throw new Error("geojson is invalid")}if(null===w)return null;var E=w.coordinates;switch(w.type){case"Point":return M.point(E,S,m);case"MultiPoint":return A<0&&(A=E.length+A),M.point(E[A],S,m);case"LineString":return c<0&&(c=E.length+c),M.point(E[c],S,m);case"Polygon":return b<0&&(b=E.length+b),c<0&&(c=E[b].length+c),M.point(E[b][c],S,m);case"MultiLineString":return A<0&&(A=E.length+A),c<0&&(c=E[A].length+c),M.point(E[A][c],S,m);case"MultiPolygon":return A<0&&(A=E.length+A),b<0&&(b=E[A].length+b),c<0&&(c=E[A][b].length-c),M.point(E[A][b][c],S,m)}throw new Error("geojson is invalid")},K.findSegment=function x(g,m){if(m=m||{},!M.isObject(m))throw new Error("options is invalid");var w,d=m.featureIndex||0,A=m.multiFeatureIndex||0,b=m.geometryIndex||0,c=m.segmentIndex||0,S=m.properties;switch(g.type){case"FeatureCollection":d<0&&(d=g.features.length+d),S=S||g.features[d].properties,w=g.features[d].geometry;break;case"Feature":S=S||g.properties,w=g.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":w=g;break;default:throw new Error("geojson is invalid")}if(null===w)return null;var E=w.coordinates;switch(w.type){case"Point":case"MultiPoint":return null;case"LineString":return c<0&&(c=E.length+c-1),M.lineString([E[c],E[c+1]],S,m);case"Polygon":return b<0&&(b=E.length+b),c<0&&(c=E[b].length+c-1),M.lineString([E[b][c],E[b][c+1]],S,m);case"MultiLineString":return A<0&&(A=E.length+A),c<0&&(c=E[A].length+c-1),M.lineString([E[A][c],E[A][c+1]],S,m);case"MultiPolygon":return A<0&&(A=E.length+A),b<0&&(b=E[A].length+b),c<0&&(c=E[A][b].length-c-1),M.lineString([E[A][b][c],E[A][b][c+1]],S,m)}throw new Error("geojson is invalid")},K.flattenEach=v,K.flattenReduce=function p(g,m,d){var A=d;return v(g,function(b,c,S){A=0===c&&0===S&&void 0===d?b:m(A,b,c,S)}),A},K.geomEach=r,K.geomReduce=function o(g,m,d){var A=d;return r(g,function(b,c,S,w,E){A=0===c&&void 0===d?b:m(A,b,c,S,w,E)}),A},K.lineEach=y,K.lineReduce=function s(g,m,d){var A=d;return y(g,function(b,c,S,w){A=0===c&&void 0===d?b:m(A,b,c,S,w)}),A},K.propEach=T,K.propReduce=function n(g,m,d){var A=d;return T(g,function(b,c){A=0===c&&void 0===d?b:m(A,b,c)}),A},K.segmentEach=f,K.segmentReduce=function l(g,m,d){var A=d,b=!1;return f(g,function(c,S,w,E,P){A=!1===b&&void 0===d?c:m(A,c,S,w,E,P),b=!0}),A}},83377:$=>{$.exports=function K(e){var M=0,I=0,t=0,T=0;return e.map(function(n){var i=(n=n.slice())[0],u=i.toUpperCase();if(i!=u)switch(n[0]=u,i){case"a":n[6]+=t,n[7]+=T;break;case"v":n[1]+=T;break;case"h":n[1]+=t;break;default:for(var a=1;a<n.length;)n[a++]+=t,n[a++]+=T}switch(u){case"Z":t=M,T=I;break;case"H":t=n[1];break;case"V":T=n[1];break;case"M":t=M=n[1],T=I=n[2];break;default:t=n[n.length-2],T=n[n.length-1]}return n})}},8236:$=>{"use strict";$.exports=function K(e,M){if(!e||null==e.length)throw Error("Argument should be an array");M=null==M?1:Math.floor(M);for(var I=Array(2*M),t=0;t<M;t++){for(var T=-1/0,n=1/0,i=t,u=e.length;i<u;i+=M)e[i]>T&&(T=e[i]),e[i]<n&&(n=e[i]);I[t]=n,I[M+t]=T}return I}},14010:$=>{"use strict";$.exports=function(K,e,M){if("function"==typeof Array.prototype.findIndex)return K.findIndex(e,M);if("function"!=typeof e)throw new TypeError("predicate must be a function");var I=Object(K),t=I.length;if(0===t)return-1;for(var T=0;T<t;T++)if(e.call(M,I[T],T,I))return T;return-1}},31138:($,K,e)=>{"use strict";var M=e(8236);$.exports=function I(t,T,n){if(!t||null==t.length)throw Error("Argument should be an array");null==T&&(T=1),null==n&&(n=M(t,T));for(var i=0;i<T;i++){var u=n[T+i],a=n[i],r=i,o=t.length;if(u===1/0&&a===-1/0)for(r=i;r<o;r+=T)t[r]=t[r]===u?1:t[r]===a?0:.5;else if(u===1/0)for(r=i;r<o;r+=T)t[r]=t[r]===u?1:0;else if(a===-1/0)for(r=i;r<o;r+=T)t[r]=t[r]===a?0:1;else{var v=u-a;for(r=i;r<o;r+=T)isNaN(t[r])||(t[r]=0===v?.5:(t[r]-a)/v)}}return t}},57019:$=>{$.exports=function(e,M){var I="number"==typeof e,t="number"==typeof M;I&&!t?(M=e,e=0):!I&&!t&&(e=0,M=0);var T=(M|=0)-(e|=0);if(T<0)throw new Error("array length must be positive");for(var n=new Array(T),i=0,u=e;i<T;i++,u++)n[i]=u;return n}},40214:($,K,e)=>{"use strict";function M(ue){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(re){return typeof re}:function(re){return re&&"function"==typeof Symbol&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re})(ue)}function I(ue,re){for(var ne=0;ne<re.length;ne++){var se=re[ne];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(ue,T(se.key),se)}}function t(ue,re,ne){return re&&I(ue.prototype,re),ne&&I(ue,ne),Object.defineProperty(ue,"prototype",{writable:!1}),ue}function T(ue){var re=function n(ue,re){if("object"!==M(ue)||null===ue)return ue;var ne=ue[Symbol.toPrimitive];if(void 0!==ne){var se=ne.call(ue,re||"default");if("object"!==M(se))return se;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===re?String:Number)(ue)}(ue,"string");return"symbol"===M(re)?re:String(re)}var c,S,a=e(32966).codes,r=a.ERR_AMBIGUOUS_ARGUMENT,o=a.ERR_INVALID_ARG_TYPE,v=a.ERR_INVALID_ARG_VALUE,p=a.ERR_INVALID_RETURN_VALUE,f=a.ERR_MISSING_ARGS,l=e(66940),s=e(26788).inspect,x=e(26788).types,h=x.isPromise,g=x.isRegExp,m=e(86268)(),d=e(76305)(),A=e(75834)("RegExp.prototype.test");function R(){var ue=e(40138);c=ue.isDeepEqual,S=ue.isDeepStrictEqual}var D=!1,k=$.exports=ee,O={};function U(ue){throw ue.message instanceof Error?ue.message:new l(ue)}function j(ue,re,ne,se){if(!ne){var de=!1;if(0===re)de=!0,se="No value argument passed to `assert.ok()`";else if(se instanceof Error)throw se;var be=new l({actual:ne,expected:!0,message:se,operator:"==",stackStartFn:ue});throw be.generatedMessage=de,be}}function ee(){for(var ue=arguments.length,re=new Array(ue),ne=0;ne<ue;ne++)re[ne]=arguments[ne];j.apply(void 0,[ee,re.length].concat(re))}k.fail=function H(ue,re,ne,se,de){var De,be=arguments.length;if(0===be)De="Failed";else if(1===be)ne=ue,ue=void 0;else{if(!1===D){D=!0;var _e=process.emitWarning?process.emitWarning:console.warn.bind(console);_e("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===be&&(se="!=")}if(ne instanceof Error)throw ne;var Ce={actual:ue,expected:re,operator:void 0===se?"fail":se,stackStartFn:de||H};void 0!==ne&&(Ce.message=ne);var Le=new l(Ce);throw De&&(Le.message=De,Le.generatedMessage=!0),Le},k.AssertionError=l,k.ok=ee,k.equal=function ue(re,ne,se){if(arguments.length<2)throw new f("actual","expected");re!=ne&&U({actual:re,expected:ne,message:se,operator:"==",stackStartFn:ue})},k.notEqual=function ue(re,ne,se){if(arguments.length<2)throw new f("actual","expected");re==ne&&U({actual:re,expected:ne,message:se,operator:"!=",stackStartFn:ue})},k.deepEqual=function ue(re,ne,se){if(arguments.length<2)throw new f("actual","expected");void 0===c&&R(),c(re,ne)||U({actual:re,expected:ne,message:se,operator:"deepEqual",stackStartFn:ue})},k.notDeepEqual=function ue(re,ne,se){if(arguments.length<2)throw new f("actual","expected");void 0===c&&R(),c(re,ne)&&U({actual:re,expected:ne,message:se,operator:"notDeepEqual",stackStartFn:ue})},k.deepStrictEqual=function ue(re,ne,se){if(arguments.length<2)throw new f("actual","expected");void 0===c&&R(),S(re,ne)||U({actual:re,expected:ne,message:se,operator:"deepStrictEqual",stackStartFn:ue})},k.notDeepStrictEqual=function W(ue,re,ne){if(arguments.length<2)throw new f("actual","expected");void 0===c&&R(),S(ue,re)&&U({actual:ue,expected:re,message:ne,operator:"notDeepStrictEqual",stackStartFn:W})},k.strictEqual=function ue(re,ne,se){if(arguments.length<2)throw new f("actual","expected");d(re,ne)||U({actual:re,expected:ne,message:se,operator:"strictEqual",stackStartFn:ue})},k.notStrictEqual=function ue(re,ne,se){if(arguments.length<2)throw new f("actual","expected");d(re,ne)&&U({actual:re,expected:ne,message:se,operator:"notStrictEqual",stackStartFn:ue})};var B=t(function ue(re,ne,se){var de=this;(function i(ue,re){if(!(ue instanceof re))throw new TypeError("Cannot call a class as a function")})(this,ue),ne.forEach(function(be){be in re&&(void 0!==se&&"string"==typeof se[be]&&g(re[be])&&A(re[be],se[be])?de[be]=se[be]:de[be]=re[be])})});function te(ue,re,ne,se,de,be){if(!(ne in ue)||!S(ue[ne],re[ne])){if(!se){var De=new B(ue,de),_e=new B(re,de,ue),Ce=new l({actual:De,expected:_e,operator:"deepStrictEqual",stackStartFn:be});throw Ce.actual=ue,Ce.expected=re,Ce.operator=be.name,Ce}U({actual:ue,expected:re,message:se,operator:be.name,stackStartFn:be})}}function q(ue,re,ne,se){if("function"!=typeof re){if(g(re))return A(re,ue);if(2===arguments.length)throw new o("expected",["Function","RegExp"],re);if("object"!==M(ue)||null===ue){var de=new l({actual:ue,expected:re,message:ne,operator:"deepStrictEqual",stackStartFn:se});throw de.operator=se.name,de}var be=Object.keys(re);if(re instanceof Error)be.push("name","message");else if(0===be.length)throw new v("error",re,"may not be an empty object");return void 0===c&&R(),be.forEach(function(De){"string"==typeof ue[De]&&g(re[De])&&A(re[De],ue[De])||te(ue,re,De,ne,be,se)}),!0}return void 0!==re.prototype&&ue instanceof re||!Error.isPrototypeOf(re)&&!0===re.call({},ue)}function oe(ue){if("function"!=typeof ue)throw new o("fn","Function",ue);try{ue()}catch(re){return re}return O}function ie(ue){return h(ue)||null!==ue&&"object"===M(ue)&&"function"==typeof ue.then&&"function"==typeof ue.catch}function V(ue){return Promise.resolve().then(function(){var re;if("function"==typeof ue){if(!ie(re=ue()))throw new p("instance of Promise","promiseFn",re)}else{if(!ie(ue))throw new o("promiseFn",["Function","Promise"],ue);re=ue}return Promise.resolve().then(function(){return re}).then(function(){return O}).catch(function(ne){return ne})})}function Y(ue,re,ne,se){if("string"==typeof ne){if(4===arguments.length)throw new o("error",["Object","Error","Function","RegExp"],ne);if("object"===M(re)&&null!==re){if(re.message===ne)throw new r("error/message",'The error message "'.concat(re.message,'" is identical to the message.'))}else if(re===ne)throw new r("error/message",'The error "'.concat(re,'" is identical to the message.'));se=ne,ne=void 0}else if(null!=ne&&"object"!==M(ne)&&"function"!=typeof ne)throw new o("error",["Object","Error","Function","RegExp"],ne);if(re===O){var de="";ne&&ne.name&&(de+=" (".concat(ne.name,")")),de+=se?": ".concat(se):".";var be="rejects"===ue.name?"rejection":"exception";U({actual:void 0,expected:ne,operator:ue.name,message:"Missing expected ".concat(be).concat(de),stackStartFn:ue})}if(ne&&!q(re,ne,se,ue))throw re}function ae(ue,re,ne,se){if(re!==O){if("string"==typeof ne&&(se=ne,ne=void 0),!ne||q(re,ne)){var de=se?": ".concat(se):".",be="doesNotReject"===ue.name?"rejection":"exception";U({actual:re,expected:ne,operator:ue.name,message:"Got unwanted ".concat(be).concat(de,"\n")+'Actual message: "'.concat(re&&re.message,'"'),stackStartFn:ue})}throw re}}function X(ue,re,ne,se,de){if(!g(re))throw new o("regexp","RegExp",re);var be="match"===de;if("string"!=typeof ue||A(re,ue)!==be){if(ne instanceof Error)throw ne;var De=!ne;ne=ne||("string"!=typeof ue?'The "string" argument must be of type string. Received type '+"".concat(M(ue)," (").concat(s(ue),")"):(be?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(s(re),". Input:\n\n").concat(s(ue),"\n"));var _e=new l({actual:ue,expected:re,message:ne,operator:de,stackStartFn:se});throw _e.generatedMessage=De,_e}}function J(){for(var ue=arguments.length,re=new Array(ue),ne=0;ne<ue;ne++)re[ne]=arguments[ne];j.apply(void 0,[J,re.length].concat(re))}k.throws=function ue(re){for(var ne=arguments.length,se=new Array(ne>1?ne-1:0),de=1;de<ne;de++)se[de-1]=arguments[de];Y.apply(void 0,[ue,oe(re)].concat(se))},k.rejects=function ue(re){for(var ne=arguments.length,se=new Array(ne>1?ne-1:0),de=1;de<ne;de++)se[de-1]=arguments[de];return V(re).then(function(be){return Y.apply(void 0,[ue,be].concat(se))})},k.doesNotThrow=function ue(re){for(var ne=arguments.length,se=new Array(ne>1?ne-1:0),de=1;de<ne;de++)se[de-1]=arguments[de];ae.apply(void 0,[ue,oe(re)].concat(se))},k.doesNotReject=function ue(re){for(var ne=arguments.length,se=new Array(ne>1?ne-1:0),de=1;de<ne;de++)se[de-1]=arguments[de];return V(re).then(function(be){return ae.apply(void 0,[ue,be].concat(se))})},k.ifError=function ue(re){if(null!=re){var ne="ifError got unwanted exception: ";"object"===M(re)&&"string"==typeof re.message?0===re.message.length&&re.constructor?ne+=re.constructor.name:ne+=re.message:ne+=s(re);var se=new l({actual:re,expected:null,operator:"ifError",message:ne,stackStartFn:ue}),de=re.stack;if("string"==typeof de){var be=de.split("\n");be.shift();for(var De=se.stack.split("\n"),_e=0;_e<be.length;_e++){var Ce=De.indexOf(be[_e]);if(-1!==Ce){De=De.slice(0,Ce);break}}se.stack="".concat(De.join("\n"),"\n").concat(be.join("\n"))}throw se}},k.match=function ue(re,ne,se){X(re,ne,se,ue,"match")},k.doesNotMatch=function ue(re,ne,se){X(re,ne,se,ue,"doesNotMatch")},k.strict=m(J,k,{equal:k.strictEqual,deepEqual:k.deepStrictEqual,notEqual:k.notStrictEqual,notDeepEqual:k.notDeepStrictEqual}),k.strict.strict=k.strict},66940:($,K,e)=>{"use strict";function M(U,H){var j=Object.keys(U);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(U);H&&(ee=ee.filter(function(W){return Object.getOwnPropertyDescriptor(U,W).enumerable})),j.push.apply(j,ee)}return j}function I(U){for(var H=1;H<arguments.length;H++){var j=null!=arguments[H]?arguments[H]:{};H%2?M(Object(j),!0).forEach(function(ee){t(U,ee,j[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(j)):M(Object(j)).forEach(function(ee){Object.defineProperty(U,ee,Object.getOwnPropertyDescriptor(j,ee))})}return U}function t(U,H,j){return(H=u(H))in U?Object.defineProperty(U,H,{value:j,enumerable:!0,configurable:!0,writable:!0}):U[H]=j,U}function n(U,H){for(var j=0;j<H.length;j++){var ee=H[j];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(U,u(ee.key),ee)}}function u(U){var H=function a(U,H){if("object"!==g(U)||null===U)return U;var j=U[Symbol.toPrimitive];if(void 0!==j){var ee=j.call(U,H||"default");if("object"!==g(ee))return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===H?String:Number)(U)}(U,"string");return"symbol"===g(H)?H:String(H)}function v(U,H){if(H&&("object"===g(H)||"function"==typeof H))return H;if(void 0!==H)throw new TypeError("Derived constructors may only return object or undefined");return p(U)}function p(U){if(void 0===U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}function f(U){var H="function"==typeof Map?new Map:void 0;return f=function(ee){if(null===ee||!function s(U){return-1!==Function.toString.call(U).indexOf("[native code]")}(ee))return ee;if("function"!=typeof ee)throw new TypeError("Super expression must either be null or a function");if(typeof H<"u"){if(H.has(ee))return H.get(ee);H.set(ee,W)}function W(){return l(ee,arguments,h(this).constructor)}return W.prototype=Object.create(ee.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),x(W,ee)},f(U)}function l(U,H,j){return(l=y()?Reflect.construct.bind():function(W,B,te){var q=[null];q.push.apply(q,B);var ie=new(Function.bind.apply(W,q));return te&&x(ie,te.prototype),ie}).apply(null,arguments)}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(U,H){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ee,W){return ee.__proto__=W,ee})(U,H)}function h(U){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)})(U)}function g(U){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(U)}var d=e(26788).inspect,b=e(32966).codes.ERR_INVALID_ARG_TYPE;function c(U,H,j){return(void 0===j||j>U.length)&&(j=U.length),U.substring(j-H.length,j)===H}var w="",E="",P="",R="",F={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function z(U){var H=Object.keys(U),j=Object.create(Object.getPrototypeOf(U));return H.forEach(function(ee){j[ee]=U[ee]}),Object.defineProperty(j,"message",{value:U.message}),j}function D(U){return d(U,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function k(U,H,j){var ee="",W="",B=0,te="",q=!1,oe=D(U),ie=oe.split("\n"),V=D(H).split("\n"),Y=0,ae="";if("strictEqual"===j&&"object"===g(U)&&"object"===g(H)&&null!==U&&null!==H&&(j="strictEqualObject"),1===ie.length&&1===V.length&&ie[0]!==V[0]){var X=ie[0].length+V[0].length;if(X<=10){if(!("object"===g(U)&&null!==U||"object"===g(H)&&null!==H||0===U&&0===H))return"".concat(F[j],"\n\n")+"".concat(ie[0]," !== ").concat(V[0],"\n")}else if("strictEqualObject"!==j){if(X<(process.stderr&&process.stderr.isTTY?process.stderr.columns:80)){for(;ie[0][Y]===V[0][Y];)Y++;Y>2&&(ae="\n  ".concat(function S(U,H){if(H=Math.floor(H),0==U.length||0==H)return"";var j=U.length*H;for(H=Math.floor(Math.log(H)/Math.log(2));H;)U+=U,H--;return U+U.substring(0,j-U.length)}(" ",Y),"^"),Y=0)}}}for(var ue=ie[ie.length-1],re=V[V.length-1];ue===re&&(Y++<2?te="\n  ".concat(ue).concat(te):ee=ue,ie.pop(),V.pop(),0!==ie.length&&0!==V.length);)ue=ie[ie.length-1],re=V[V.length-1];var ne=Math.max(ie.length,V.length);if(0===ne){var se=oe.split("\n");if(se.length>30)for(se[26]="".concat(w,"...").concat(R);se.length>27;)se.pop();return"".concat(F.notIdentical,"\n\n").concat(se.join("\n"),"\n")}Y>3&&(te="\n".concat(w,"...").concat(R).concat(te),q=!0),""!==ee&&(te="\n  ".concat(ee).concat(te),ee="");var de=0,be=F[j]+"\n".concat(E,"+ actual").concat(R," ").concat(P,"- expected").concat(R),De=" ".concat(w,"...").concat(R," Lines skipped");for(Y=0;Y<ne;Y++){var _e=Y-B;if(ie.length<Y+1)_e>1&&Y>2&&(_e>4?(W+="\n".concat(w,"...").concat(R),q=!0):_e>3&&(W+="\n  ".concat(V[Y-2]),de++),W+="\n  ".concat(V[Y-1]),de++),B=Y,ee+="\n".concat(P,"-").concat(R," ").concat(V[Y]),de++;else if(V.length<Y+1)_e>1&&Y>2&&(_e>4?(W+="\n".concat(w,"...").concat(R),q=!0):_e>3&&(W+="\n  ".concat(ie[Y-2]),de++),W+="\n  ".concat(ie[Y-1]),de++),B=Y,W+="\n".concat(E,"+").concat(R," ").concat(ie[Y]),de++;else{var Ce=V[Y],Le=ie[Y],Fe=Le!==Ce&&(!c(Le,",")||Le.slice(0,-1)!==Ce);Fe&&c(Ce,",")&&Ce.slice(0,-1)===Le&&(Fe=!1,Le+=","),Fe?(_e>1&&Y>2&&(_e>4?(W+="\n".concat(w,"...").concat(R),q=!0):_e>3&&(W+="\n  ".concat(ie[Y-2]),de++),W+="\n  ".concat(ie[Y-1]),de++),B=Y,W+="\n".concat(E,"+").concat(R," ").concat(Le),ee+="\n".concat(P,"-").concat(R," ").concat(Ce),de+=2):(W+=ee,ee="",(1===_e||0===Y)&&(W+="\n  ".concat(Le),de++))}if(de>20&&Y<ne-2)return"".concat(be).concat(De,"\n").concat(W,"\n").concat(w,"...").concat(R).concat(ee,"\n")+"".concat(w,"...").concat(R)}return"".concat(be).concat(q?De:"","\n").concat(W).concat(ee).concat(te).concat(ae)}var O=function(U,H){!function r(U,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(H&&H.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),Object.defineProperty(U,"prototype",{writable:!1}),H&&x(U,H)}(ee,U);var j=function o(U){var H=y();return function(){var W,ee=h(U);if(H){var B=h(this).constructor;W=Reflect.construct(ee,arguments,B)}else W=ee.apply(this,arguments);return v(this,W)}}(ee);function ee(W){var B;if(function T(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),"object"!==g(W)||null===W)throw new b("options","Object",W);var te=W.message,q=W.operator,oe=W.stackStartFn,ie=W.actual,V=W.expected,Y=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=te)B=j.call(this,String(te));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&1!==process.stderr.getColorDepth()?(w="\x1b[34m",E="\x1b[32m",R="\x1b[39m",P="\x1b[31m"):(w="",E="",R="",P="")),"object"===g(ie)&&null!==ie&&"object"===g(V)&&null!==V&&"stack"in ie&&ie instanceof Error&&"stack"in V&&V instanceof Error&&(ie=z(ie),V=z(V)),"deepStrictEqual"===q||"strictEqual"===q)B=j.call(this,k(ie,V,q));else if("notDeepStrictEqual"===q||"notStrictEqual"===q){var ae=F[q],X=D(ie).split("\n");if("notStrictEqual"===q&&"object"===g(ie)&&null!==ie&&(ae=F.notStrictEqualObject),X.length>30)for(X[26]="".concat(w,"...").concat(R);X.length>27;)X.pop();B=1===X.length?j.call(this,"".concat(ae," ").concat(X[0])):j.call(this,"".concat(ae,"\n\n").concat(X.join("\n"),"\n"))}else{var J=D(ie),ue="",re=F[q];"notDeepEqual"===q||"notEqual"===q?(J="".concat(F[q],"\n\n").concat(J)).length>1024&&(J="".concat(J.slice(0,1021),"...")):(ue="".concat(D(V)),J.length>512&&(J="".concat(J.slice(0,509),"...")),ue.length>512&&(ue="".concat(ue.slice(0,509),"...")),"deepEqual"===q||"equal"===q?J="".concat(re,"\n\n").concat(J,"\n\nshould equal\n\n"):ue=" ".concat(q," ").concat(ue)),B=j.call(this,"".concat(J).concat(ue))}return Error.stackTraceLimit=Y,B.generatedMessage=!te,Object.defineProperty(p(B),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),B.code="ERR_ASSERTION",B.actual=ie,B.expected=V,B.operator=q,Error.captureStackTrace&&Error.captureStackTrace(p(B),oe),B.stack,B.name="AssertionError",v(B)}return function i(U,H,j){return H&&n(U.prototype,H),j&&n(U,j),Object.defineProperty(U,"prototype",{writable:!1}),U}(ee,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:H,value:function(B,te){return d(this,I(I({},te),{},{customInspect:!1,depth:0}))}}]),ee}(f(Error),d.custom);$.exports=O},32966:($,K,e)=>{"use strict";function M(A){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(A)}function I(A,b){for(var c=0;c<b.length;c++){var S=b[c];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(A,T(S.key),S)}}function T(A){var b=function n(A,b){if("object"!==M(A)||null===A)return A;var c=A[Symbol.toPrimitive];if(void 0!==c){var S=c.call(A,b||"default");if("object"!==M(S))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(A)}(A,"string");return"symbol"===M(b)?b:String(b)}function a(A,b){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,w){return S.__proto__=w,S})(A,b)}function r(A){var b=function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var w,S=f(A);if(b){var E=f(this).constructor;w=Reflect.construct(S,arguments,E)}else w=S.apply(this,arguments);return o(this,w)}}function o(A,b){if(b&&("object"===M(b)||"function"==typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return function v(A){if(void 0===A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}(A)}function f(A){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)})(A)}var y,s,l={};function x(A,b,c){c||(c=Error);var w=function(E){!function u(A,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),b&&a(A,b)}(R,E);var P=r(R);function R(F,_,z){var D;return function i(A,b){if(!(A instanceof b))throw new TypeError("Cannot call a class as a function")}(this,R),D=P.call(this,function S(E,P,R){return"string"==typeof b?b:b(E,P,R)}(F,_,z)),D.code=A,D}return function t(A,b,c){return b&&I(A.prototype,b),c&&I(A,c),Object.defineProperty(A,"prototype",{writable:!1}),A}(R)}(c);l[A]=w}function h(A,b){if(Array.isArray(A)){var c=A.length;return A=A.map(function(S){return String(S)}),c>2?"one of ".concat(b," ").concat(A.slice(0,c-1).join(", "),", or ")+A[c-1]:2===c?"one of ".concat(b," ").concat(A[0]," or ").concat(A[1]):"of ".concat(b," ").concat(A[0])}return"of ".concat(b," ").concat(String(A))}x("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),x("ERR_INVALID_ARG_TYPE",function(A,b,c){var S,w;if(void 0===y&&(y=e(40214)),y("string"==typeof A,"'name' must be a string"),"string"==typeof b&&function g(A,b,c){return A.substr(!c||c<0?0:+c,b.length)===b}(b,"not ")?(S="must not be",b=b.replace(/^not /,"")):S="must be",function m(A,b,c){return(void 0===c||c>A.length)&&(c=A.length),A.substring(c-b.length,c)===b}(A," argument"))w="The ".concat(A," ").concat(S," ").concat(h(b,"type"));else{var E=function d(A,b,c){return"number"!=typeof c&&(c=0),!(c+b.length>A.length)&&-1!==A.indexOf(b,c)}(A,".")?"property":"argument";w='The "'.concat(A,'" ').concat(E," ").concat(S," ").concat(h(b,"type"))}return w+=". Received type ".concat(M(c))},TypeError),x("ERR_INVALID_ARG_VALUE",function(A,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===s&&(s=e(26788));var S=s.inspect(b);return S.length>128&&(S="".concat(S.slice(0,128),"...")),"The argument '".concat(A,"' ").concat(c,". Received ").concat(S)},TypeError,RangeError),x("ERR_INVALID_RETURN_VALUE",function(A,b,c){var S;return S=c&&c.constructor&&c.constructor.name?"instance of ".concat(c.constructor.name):"type ".concat(M(c)),"Expected ".concat(A,' to be returned from the "').concat(b,'"')+" function but got ".concat(S,".")},TypeError),x("ERR_MISSING_ARGS",function(){for(var A=arguments.length,b=new Array(A),c=0;c<A;c++)b[c]=arguments[c];void 0===y&&(y=e(40214)),y(b.length>0,"At least one arg needs to be specified");var S="The ",w=b.length;switch(b=b.map(function(E){return'"'.concat(E,'"')}),w){case 1:S+="".concat(b[0]," argument");break;case 2:S+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:S+=b.slice(0,w-1).join(", "),S+=", and ".concat(b[w-1]," arguments")}return"".concat(S," must be specified")},TypeError),$.exports.codes=l},40138:($,K,e)=>{"use strict";function M(ke,ze){return function i(ke){if(Array.isArray(ke))return ke}(ke)||function n(ke,ze){var Pe=null==ke?null:typeof Symbol<"u"&&ke[Symbol.iterator]||ke["@@iterator"];if(null!=Pe){var Ie,Qe,at,Be,Ne=[],nt=!0,ct=!1;try{if(at=(Pe=Pe.call(ke)).next,0===ze){if(Object(Pe)!==Pe)return;nt=!1}else for(;!(nt=(Ie=at.call(Pe)).done)&&(Ne.push(Ie.value),Ne.length!==ze);nt=!0);}catch(mt){ct=!0,Qe=mt}finally{try{if(!nt&&null!=Pe.return&&(Be=Pe.return(),Object(Be)!==Be))return}finally{if(ct)throw Qe}}return Ne}}(ke,ze)||function t(ke,ze){if(ke){if("string"==typeof ke)return T(ke,ze);var Pe=Object.prototype.toString.call(ke).slice(8,-1);if("Object"===Pe&&ke.constructor&&(Pe=ke.constructor.name),"Map"===Pe||"Set"===Pe)return Array.from(ke);if("Arguments"===Pe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pe))return T(ke,ze)}}(ke,ze)||function I(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(ke,ze){(null==ze||ze>ke.length)&&(ze=ke.length);for(var Pe=0,Ie=new Array(ze);Pe<ze;Pe++)Ie[Pe]=ke[Pe];return Ie}function u(ke){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ze){return typeof ze}:function(ze){return ze&&"function"==typeof Symbol&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(ke)}var a=void 0!==/a/g.flags,r=function(ze){var Pe=[];return ze.forEach(function(Ie){return Pe.push(Ie)}),Pe},o=function(ze){var Pe=[];return ze.forEach(function(Ie,Qe){return Pe.push([Qe,Ie])}),Pe},v=Object.is?Object.is:e(12e3),p=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},f=Number.isNaN?Number.isNaN:e(94572);function l(ke){return ke.call.bind(ke)}var y=l(Object.prototype.hasOwnProperty),s=l(Object.prototype.propertyIsEnumerable),x=l(Object.prototype.toString),h=e(26788).types,g=h.isAnyArrayBuffer,m=h.isArrayBufferView,d=h.isDate,A=h.isMap,b=h.isRegExp,c=h.isSet,S=h.isNativeError,w=h.isBoxedPrimitive,E=h.isNumberObject,P=h.isStringObject,R=h.isBooleanObject,F=h.isBigIntObject,_=h.isSymbolObject,z=h.isFloat32Array,D=h.isFloat64Array;function k(ke){if(0===ke.length||ke.length>10)return!0;for(var ze=0;ze<ke.length;ze++){var Pe=ke.charCodeAt(ze);if(Pe<48||Pe>57)return!0}return 10===ke.length&&ke>=Math.pow(2,32)}function O(ke){return Object.keys(ke).filter(k).concat(p(ke).filter(Object.prototype.propertyIsEnumerable.bind(ke)))}function U(ke,ze){if(ke===ze)return 0;for(var Pe=ke.length,Ie=ze.length,Qe=0,at=Math.min(Pe,Ie);Qe<at;++Qe)if(ke[Qe]!==ze[Qe]){Pe=ke[Qe],Ie=ze[Qe];break}return Pe<Ie?-1:Ie<Pe?1:0}function X(ke,ze,Pe,Ie){if(ke===ze)return 0!==ke||(!Pe||v(ke,ze));if(Pe){if("object"!==u(ke))return"number"==typeof ke&&f(ke)&&f(ze);if("object"!==u(ze)||null===ke||null===ze||Object.getPrototypeOf(ke)!==Object.getPrototypeOf(ze))return!1}else{if(null===ke||"object"!==u(ke))return(null===ze||"object"!==u(ze))&&ke==ze;if(null===ze||"object"!==u(ze))return!1}var Qe=x(ke);if(Qe!==x(ze))return!1;if(Array.isArray(ke)){if(ke.length!==ze.length)return!1;var Be=O(ke),Ne=O(ze);return Be.length===Ne.length&&ue(ke,ze,Pe,Ie,1,Be)}if("[object Object]"===Qe&&(!A(ke)&&A(ze)||!c(ke)&&c(ze)))return!1;if(d(ke)){if(!d(ze)||Date.prototype.getTime.call(ke)!==Date.prototype.getTime.call(ze))return!1}else if(b(ke)){if(!b(ze)||!function oe(ke,ze){return a?ke.source===ze.source&&ke.flags===ze.flags:RegExp.prototype.toString.call(ke)===RegExp.prototype.toString.call(ze)}(ke,ze))return!1}else if(S(ke)||ke instanceof Error){if(ke.message!==ze.message||ke.name!==ze.name)return!1}else{if(m(ke)){if(Pe||!z(ke)&&!D(ke)){if(!function V(ke,ze){return ke.byteLength===ze.byteLength&&0===U(new Uint8Array(ke.buffer,ke.byteOffset,ke.byteLength),new Uint8Array(ze.buffer,ze.byteOffset,ze.byteLength))}(ke,ze))return!1}else if(!function ie(ke,ze){if(ke.byteLength!==ze.byteLength)return!1;for(var Pe=0;Pe<ke.byteLength;Pe++)if(ke[Pe]!==ze[Pe])return!1;return!0}(ke,ze))return!1;var nt=O(ke),ct=O(ze);return nt.length===ct.length&&ue(ke,ze,Pe,Ie,0,nt)}if(c(ke))return!(!c(ze)||ke.size!==ze.size)&&ue(ke,ze,Pe,Ie,2);if(A(ke))return!(!A(ze)||ke.size!==ze.size)&&ue(ke,ze,Pe,Ie,3);if(g(ke)){if(!function Y(ke,ze){return ke.byteLength===ze.byteLength&&0===U(new Uint8Array(ke),new Uint8Array(ze))}(ke,ze))return!1}else if(w(ke)&&!function ae(ke,ze){return E(ke)?E(ze)&&v(Number.prototype.valueOf.call(ke),Number.prototype.valueOf.call(ze)):P(ke)?P(ze)&&String.prototype.valueOf.call(ke)===String.prototype.valueOf.call(ze):R(ke)?R(ze)&&Boolean.prototype.valueOf.call(ke)===Boolean.prototype.valueOf.call(ze):F(ke)?F(ze)&&BigInt.prototype.valueOf.call(ke)===BigInt.prototype.valueOf.call(ze):_(ze)&&Symbol.prototype.valueOf.call(ke)===Symbol.prototype.valueOf.call(ze)}(ke,ze))return!1}return ue(ke,ze,Pe,Ie,0)}function J(ke,ze){return ze.filter(function(Pe){return s(ke,Pe)})}function ue(ke,ze,Pe,Ie,Qe,at){if(5===arguments.length){at=Object.keys(ke);var Be=Object.keys(ze);if(at.length!==Be.length)return!1}for(var Ne=0;Ne<at.length;Ne++)if(!y(ze,at[Ne]))return!1;if(Pe&&5===arguments.length){var nt=p(ke);if(0!==nt.length){var ct=0;for(Ne=0;Ne<nt.length;Ne++){var mt=nt[Ne];if(s(ke,mt)){if(!s(ze,mt))return!1;at.push(mt),ct++}else if(s(ze,mt))return!1}var Bt=p(ze);if(nt.length!==Bt.length&&J(ze,Bt).length!==ct)return!1}else{var Rt=p(ze);if(0!==Rt.length&&0!==J(ze,Rt).length)return!1}}if(0===at.length&&(0===Qe||1===Qe&&0===ke.length||0===ke.size))return!0;if(void 0===Ie)Ie={val1:new Map,val2:new Map,position:0};else{var zt=Ie.val1.get(ke);if(void 0!==zt){var St=Ie.val2.get(ze);if(void 0!==St)return zt===St}Ie.position++}Ie.val1.set(ke,Ie.position),Ie.val2.set(ze,Ie.position);var Xt=Ce(ke,ze,Pe,at,Ie,Qe);return Ie.val1.delete(ke),Ie.val2.delete(ze),Xt}function re(ke,ze,Pe,Ie){for(var Qe=r(ke),at=0;at<Qe.length;at++){var Be=Qe[at];if(X(ze,Be,Pe,Ie))return ke.delete(Be),!0}return!1}function ne(ke){switch(u(ke)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":ke=+ke;case"number":if(f(ke))return!1}return!0}function se(ke,ze,Pe){var Ie=ne(Pe);return Ie??(ze.has(Ie)&&!ke.has(Ie))}function de(ke,ze,Pe,Ie,Qe){var at=ne(Pe);if(null!=at)return at;var Be=ze.get(at);return!(void 0===Be&&!ze.has(at)||!X(Ie,Be,!1,Qe))&&(!ke.has(at)&&X(Ie,Be,!1,Qe))}function De(ke,ze,Pe,Ie,Qe,at){for(var Be=r(ke),Ne=0;Ne<Be.length;Ne++){var nt=Be[Ne];if(X(Pe,nt,Qe,at)&&X(Ie,ze.get(nt),Qe,at))return ke.delete(nt),!0}return!1}function Ce(ke,ze,Pe,Ie,Qe,at){var Be=0;if(2===at){if(!function be(ke,ze,Pe,Ie){for(var Qe=null,at=r(ke),Be=0;Be<at.length;Be++){var Ne=at[Be];if("object"===u(Ne)&&null!==Ne)null===Qe&&(Qe=new Set),Qe.add(Ne);else if(!ze.has(Ne)){if(Pe||!se(ke,ze,Ne))return!1;null===Qe&&(Qe=new Set),Qe.add(Ne)}}if(null!==Qe){for(var nt=r(ze),ct=0;ct<nt.length;ct++){var mt=nt[ct];if("object"===u(mt)&&null!==mt){if(!re(Qe,mt,Pe,Ie))return!1}else if(!Pe&&!ke.has(mt)&&!re(Qe,mt,Pe,Ie))return!1}return 0===Qe.size}return!0}(ke,ze,Pe,Qe))return!1}else if(3===at){if(!function _e(ke,ze,Pe,Ie){for(var Qe=null,at=o(ke),Be=0;Be<at.length;Be++){var Ne=M(at[Be],2),nt=Ne[0],ct=Ne[1];if("object"===u(nt)&&null!==nt)null===Qe&&(Qe=new Set),Qe.add(nt);else{var mt=ze.get(nt);if(void 0===mt&&!ze.has(nt)||!X(ct,mt,Pe,Ie)){if(Pe||!de(ke,ze,nt,ct,Ie))return!1;null===Qe&&(Qe=new Set),Qe.add(nt)}}}if(null!==Qe){for(var Bt=o(ze),Rt=0;Rt<Bt.length;Rt++){var zt=M(Bt[Rt],2),St=zt[0],Xt=zt[1];if("object"===u(St)&&null!==St){if(!De(Qe,ke,St,Xt,Pe,Ie))return!1}else if(!(Pe||ke.has(St)&&X(ke.get(St),Xt,!1,Ie)||De(Qe,ke,St,Xt,!1,Ie)))return!1}return 0===Qe.size}return!0}(ke,ze,Pe,Qe))return!1}else if(1===at)for(;Be<ke.length;Be++){if(!y(ke,Be)){if(y(ze,Be))return!1;for(var Ne=Object.keys(ke);Be<Ne.length;Be++){var nt=Ne[Be];if(!y(ze,nt)||!X(ke[nt],ze[nt],Pe,Qe))return!1}return Ne.length===Object.keys(ze).length}if(!y(ze,Be)||!X(ke[Be],ze[Be],Pe,Qe))return!1}for(Be=0;Be<Ie.length;Be++){var ct=Ie[Be];if(!X(ke[ct],ze[ct],Pe,Qe))return!1}return!0}$.exports={isDeepEqual:function Le(ke,ze){return X(ke,ze,false)},isDeepStrictEqual:function Fe(ke,ze){return X(ke,ze,true)}}},47104:($,K,e)=>{"use strict";e.r(K),e.d(K,{decode:()=>n,encode:()=>T});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=typeof Uint8Array>"u"?[]:new Uint8Array(256),t=0;t<M.length;t++)I[M.charCodeAt(t)]=t;var T=function(i){var a,u=new Uint8Array(i),r=u.length,o="";for(a=0;a<r;a+=3)o+=M[u[a]>>2],o+=M[(3&u[a])<<4|u[a+1]>>4],o+=M[(15&u[a+1])<<2|u[a+2]>>6],o+=M[63&u[a+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n=function(i){var r,v,p,f,l,u=.75*i.length,a=i.length,o=0;"="===i[i.length-1]&&(u--,"="===i[i.length-2]&&u--);var y=new ArrayBuffer(u),s=new Uint8Array(y);for(r=0;r<a;r+=4)v=I[i.charCodeAt(r)],p=I[i.charCodeAt(r+1)],f=I[i.charCodeAt(r+2)],l=I[i.charCodeAt(r+3)],s[o++]=v<<2|p>>4,s[o++]=(15&p)<<4|f>>2,s[o++]=(3&f)<<6|63&l;return y}},5343:($,K)=>{"use strict";K.byteLength=function u(f){var l=i(f),y=l[0],s=l[1];return 3*(y+s)/4-s},K.toByteArray=function r(f){var l,d,y=i(f),s=y[0],x=y[1],h=new I(function a(f,l,y){return 3*(l+y)/4-y}(0,s,x)),g=0,m=x>0?s-4:s;for(d=0;d<m;d+=4)l=M[f.charCodeAt(d)]<<18|M[f.charCodeAt(d+1)]<<12|M[f.charCodeAt(d+2)]<<6|M[f.charCodeAt(d+3)],h[g++]=l>>16&255,h[g++]=l>>8&255,h[g++]=255&l;return 2===x&&(l=M[f.charCodeAt(d)]<<2|M[f.charCodeAt(d+1)]>>4,h[g++]=255&l),1===x&&(l=M[f.charCodeAt(d)]<<10|M[f.charCodeAt(d+1)]<<4|M[f.charCodeAt(d+2)]>>2,h[g++]=l>>8&255,h[g++]=255&l),h},K.fromByteArray=function p(f){for(var l,y=f.length,s=y%3,x=[],h=16383,g=0,m=y-s;g<m;g+=h)x.push(v(f,g,g+h>m?m:g+h));return 1===s?(l=f[y-1],x.push(e[l>>2]+e[l<<4&63]+"==")):2===s&&(l=(f[y-2]<<8)+f[y-1],x.push(e[l>>10]+e[l>>4&63]+e[l<<2&63]+"=")),x.join("")};for(var e=[],M=[],I=typeof Uint8Array<"u"?Uint8Array:Array,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,n=t.length;T<n;++T)e[T]=t[T],M[t.charCodeAt(T)]=T;function i(f){var l=f.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=f.indexOf("=");return-1===y&&(y=l),[y,y===l?0:4-y%4]}function o(f){return e[f>>18&63]+e[f>>12&63]+e[f>>6&63]+e[63&f]}function v(f,l,y){for(var s,x=[],h=l;h<y;h+=3)s=(f[h]<<16&16711680)+(f[h+1]<<8&65280)+(255&f[h+2]),x.push(o(s));return x.join("")}M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63},71847:$=>{"use strict";function K(n,i,u,a,r){for(var o=r+1;a<=r;){var v=a+r>>>1,p=n[v];(void 0!==u?u(p,i):p-i)>=0?(o=v,r=v-1):a=v+1}return o}function e(n,i,u,a,r){for(var o=r+1;a<=r;){var v=a+r>>>1,p=n[v];(void 0!==u?u(p,i):p-i)>0?(o=v,r=v-1):a=v+1}return o}function M(n,i,u,a,r){for(var o=a-1;a<=r;){var v=a+r>>>1,p=n[v];(void 0!==u?u(p,i):p-i)<0?(o=v,a=v+1):r=v-1}return o}function I(n,i,u,a,r){for(var o=a-1;a<=r;){var v=a+r>>>1,p=n[v];(void 0!==u?u(p,i):p-i)<=0?(o=v,a=v+1):r=v-1}return o}function t(n,i,u,a,r){for(;a<=r;){var o=a+r>>>1,v=n[o],p=void 0!==u?u(v,i):v-i;if(0===p)return o;p<=0?a=o+1:r=o-1}return-1}function T(n,i,u,a,r,o){return"function"==typeof u?o(n,i,u,void 0===a?0:0|a,void 0===r?n.length-1:0|r):o(n,i,void 0,void 0===u?0:0|u,void 0===a?n.length-1:0|a)}$.exports={ge:function(n,i,u,a,r){return T(n,i,u,a,r,K)},gt:function(n,i,u,a,r){return T(n,i,u,a,r,e)},lt:function(n,i,u,a,r){return T(n,i,u,a,r,M)},le:function(n,i,u,a,r){return T(n,i,u,a,r,I)},eq:function(n,i,u,a,r){return T(n,i,u,a,r,t)}}},67708:($,K)=>{"use strict";function M(t){var T=32;return(t&=-t)&&T--,65535&t&&(T-=16),16711935&t&&(T-=8),252645135&t&&(T-=4),858993459&t&&(T-=2),1431655765&t&&(T-=1),T}K.INT_BITS=32,K.INT_MAX=2147483647,K.INT_MIN=-1<<31,K.sign=function(t){return(t>0)-(t<0)},K.abs=function(t){var T=t>>31;return(t^T)-T},K.min=function(t,T){return T^(t^T)&-(t<T)},K.max=function(t,T){return t^(t^T)&-(t<T)},K.isPow2=function(t){return!(t&t-1||!t)},K.log2=function(t){var T,n;return T=(t>65535)<<4,T|=n=((t>>>=T)>255)<<3,T|=n=((t>>>=n)>15)<<2,(T|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},K.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},K.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},K.countTrailingZeros=M,K.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},K.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},K.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var I=new Array(256);(function(t){for(var T=0;T<256;++T){var n=T,i=T,u=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--u;t[T]=i<<u&255}})(I),K.reverse=function(t){return I[255&t]<<24|I[t>>>8&255]<<16|I[t>>>16&255]<<8|I[t>>>24&255]},K.interleave2=function(t,T){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T&=65535)|T<<8))|T<<4))|T<<2))|T<<1))<<1},K.deinterleave2=function(t,T){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>T&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},K.interleave3=function(t,T,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},K.deinterleave3=function(t,T){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>T&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},K.nextCombination=function(t){var T=t|t-1;return T+1|(~T&-~T)-1>>>M(t)+1}},83426:$=>{"use strict";$.exports=function e(t,T){T||(T={});var a,r,o,v,p,f,l,y,s,x,h,n=null==T.cutoff?.25:T.cutoff,i=null==T.radius?8:T.radius,u=T.channel||0;if(ArrayBuffer.isView(t)||Array.isArray(t)){if(!T.width||!T.height)throw Error("For raw data width and height should be provided by options");a=T.width,r=T.height,v=t,f=T.stride?T.stride:Math.floor(t.length/a/r)}else window.HTMLCanvasElement&&t instanceof window.HTMLCanvasElement?(l=(y=t).getContext("2d"),a=y.width,r=y.height,s=l.getImageData(0,0,a,r),v=s.data,f=4):window.CanvasRenderingContext2D&&t instanceof window.CanvasRenderingContext2D?(y=t.canvas,l=t,a=y.width,r=y.height,s=l.getImageData(0,0,a,r),v=s.data,f=4):window.ImageData&&t instanceof window.ImageData&&(s=t,a=t.width,r=t.height,v=s.data,f=4);if(o=Math.max(a,r),window.Uint8ClampedArray&&v instanceof window.Uint8ClampedArray||window.Uint8Array&&v instanceof window.Uint8Array)for(p=v,v=Array(a*r),x=0,h=Math.floor(p.length/f);x<h;x++)v[x]=p[x*f+u]/255;else if(1!==f)throw Error("Raw data can have only 1 value per pixel");var g=Array(a*r),m=Array(a*r),d=Array(o),A=Array(o),b=Array(o+1),c=Array(o);for(x=0,h=a*r;x<h;x++){var S=v[x];g[x]=1===S?0:0===S?K:Math.pow(Math.max(0,.5-S),2),m[x]=1===S?K:0===S?0:Math.pow(Math.max(0,S-.5),2)}M(g,a,r,d,A,c,b),M(m,a,r,d,A,c,b);var w=window.Float32Array?new Float32Array(a*r):new Array(a*r);for(x=0,h=a*r;x<h;x++)w[x]=Math.min(Math.max(1-((g[x]-m[x])/i+n),0),1);return w};var K=1e20;function M(t,T,n,i,u,a,r){for(var o=0;o<T;o++){for(var v=0;v<n;v++)i[v]=t[v*T+o];for(I(i,u,a,r,n),v=0;v<n;v++)t[v*T+o]=u[v]}for(v=0;v<n;v++){for(o=0;o<T;o++)i[o]=t[v*T+o];for(I(i,u,a,r,T),o=0;o<T;o++)t[v*T+o]=Math.sqrt(u[o])}}function I(t,T,n,i,u){n[0]=0,i[0]=-K,i[1]=+K;for(var a=1,r=0;a<u;a++){for(var o=(t[a]+a*a-(t[n[r]]+n[r]*n[r]))/(2*a-2*n[r]);o<=i[r];)r--,o=(t[a]+a*a-(t[n[r]]+n[r]*n[r]))/(2*a-2*n[r]);n[++r]=a,i[r]=o,i[r+1]=+K}for(a=0,r=0;a<u;a++){for(;i[r+1]<a;)r++;T[a]=(a-n[r])*(a-n[r])+t[n[r]]}}},94007:($,K,e)=>{"use strict";var M=e(5343),I=e(48461),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;K.Buffer=u,K.SlowBuffer=function h(re){return+re!=re&&(re=0),u.alloc(+re)},K.INSPECT_MAX_BYTES=50;var T=2147483647;function i(re){if(re>T)throw new RangeError('The value "'+re+'" is invalid for option "size"');var ne=new Uint8Array(re);return Object.setPrototypeOf(ne,u.prototype),ne}function u(re,ne,se){if("number"==typeof re){if("string"==typeof ne)throw new TypeError('The "string" argument must be of type string. Received type number');return v(re)}return a(re,ne,se)}function a(re,ne,se){if("string"==typeof re)return function p(re,ne){if(("string"!=typeof ne||""===ne)&&(ne="utf8"),!u.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);var se=0|g(re,ne),de=i(se),be=de.write(re,ne);return be!==se&&(de=de.slice(0,be)),de}(re,ne);if(ArrayBuffer.isView(re))return function l(re){if(X(re,Uint8Array)){var ne=new Uint8Array(re);return y(ne.buffer,ne.byteOffset,ne.byteLength)}return f(re)}(re);if(null==re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(X(re,ArrayBuffer)||re&&X(re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(re,SharedArrayBuffer)||re&&X(re.buffer,SharedArrayBuffer)))return y(re,ne,se);if("number"==typeof re)throw new TypeError('The "value" argument must not be of type number. Received type number');var de=re.valueOf&&re.valueOf();if(null!=de&&de!==re)return u.from(de,ne,se);var be=function s(re){if(u.isBuffer(re)){var ne=0|x(re.length),se=i(ne);return 0===se.length||re.copy(se,0,0,ne),se}if(void 0!==re.length)return"number"!=typeof re.length||J(re.length)?i(0):f(re);if("Buffer"===re.type&&Array.isArray(re.data))return f(re.data)}(re);if(be)return be;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof re[Symbol.toPrimitive])return u.from(re[Symbol.toPrimitive]("string"),ne,se);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}function r(re){if("number"!=typeof re)throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function v(re){return r(re),i(re<0?0:0|x(re))}function f(re){for(var ne=re.length<0?0:0|x(re.length),se=i(ne),de=0;de<ne;de+=1)se[de]=255&re[de];return se}function y(re,ne,se){if(ne<0||re.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<ne+(se||0))throw new RangeError('"length" is outside of buffer bounds');var de;return de=void 0===ne&&void 0===se?new Uint8Array(re):void 0===se?new Uint8Array(re,ne):new Uint8Array(re,ne,se),Object.setPrototypeOf(de,u.prototype),de}function x(re){if(re>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return 0|re}function g(re,ne){if(u.isBuffer(re))return re.length;if(ArrayBuffer.isView(re)||X(re,ArrayBuffer))return re.byteLength;if("string"!=typeof re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);var se=re.length,de=arguments.length>2&&!0===arguments[2];if(!de&&0===se)return 0;for(var be=!1;;)switch(ne){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":return oe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*se;case"hex":return se>>>1;case"base64":return Y(re).length;default:if(be)return de?-1:oe(re).length;ne=(""+ne).toLowerCase(),be=!0}}function m(re,ne,se){var de=!1;if((void 0===ne||ne<0)&&(ne=0),ne>this.length||((void 0===se||se>this.length)&&(se=this.length),se<=0)||(se>>>=0)<=(ne>>>=0))return"";for(re||(re="utf8");;)switch(re){case"hex":return O(this,ne,se);case"utf8":case"utf-8":return F(this,ne,se);case"ascii":return D(this,ne,se);case"latin1":case"binary":return k(this,ne,se);case"base64":return R(this,ne,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,ne,se);default:if(de)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),de=!0}}function d(re,ne,se){var de=re[ne];re[ne]=re[se],re[se]=de}function A(re,ne,se,de,be){if(0===re.length)return-1;if("string"==typeof se?(de=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),J(se=+se)&&(se=be?0:re.length-1),se<0&&(se=re.length+se),se>=re.length){if(be)return-1;se=re.length-1}else if(se<0){if(!be)return-1;se=0}if("string"==typeof ne&&(ne=u.from(ne,de)),u.isBuffer(ne))return 0===ne.length?-1:b(re,ne,se,de,be);if("number"==typeof ne)return ne&=255,"function"==typeof Uint8Array.prototype.indexOf?be?Uint8Array.prototype.indexOf.call(re,ne,se):Uint8Array.prototype.lastIndexOf.call(re,ne,se):b(re,[ne],se,de,be);throw new TypeError("val must be string, number or Buffer")}function b(re,ne,se,de,be){var Fe,De=1,_e=re.length,Ce=ne.length;if(void 0!==de&&("ucs2"===(de=String(de).toLowerCase())||"ucs-2"===de||"utf16le"===de||"utf-16le"===de)){if(re.length<2||ne.length<2)return-1;De=2,_e/=2,Ce/=2,se/=2}function Le(Ie,Qe){return 1===De?Ie[Qe]:Ie.readUInt16BE(Qe*De)}if(be){var ke=-1;for(Fe=se;Fe<_e;Fe++)if(Le(re,Fe)===Le(ne,-1===ke?0:Fe-ke)){if(-1===ke&&(ke=Fe),Fe-ke+1===Ce)return ke*De}else-1!==ke&&(Fe-=Fe-ke),ke=-1}else for(se+Ce>_e&&(se=_e-Ce),Fe=se;Fe>=0;Fe--){for(var ze=!0,Pe=0;Pe<Ce;Pe++)if(Le(re,Fe+Pe)!==Le(ne,Pe)){ze=!1;break}if(ze)return Fe}return-1}function c(re,ne,se,de){se=Number(se)||0;var be=re.length-se;de?(de=Number(de))>be&&(de=be):de=be;var De=ne.length;de>De/2&&(de=De/2);for(var _e=0;_e<de;++_e){var Ce=parseInt(ne.substr(2*_e,2),16);if(J(Ce))return _e;re[se+_e]=Ce}return _e}function S(re,ne,se,de){return ae(oe(ne,re.length-se),re,se,de)}function w(re,ne,se,de){return ae(function ie(re){for(var ne=[],se=0;se<re.length;++se)ne.push(255&re.charCodeAt(se));return ne}(ne),re,se,de)}function E(re,ne,se,de){return ae(Y(ne),re,se,de)}function P(re,ne,se,de){return ae(function V(re,ne){for(var se,de,be,De=[],_e=0;_e<re.length&&!((ne-=2)<0);++_e)se=re.charCodeAt(_e),de=se>>8,be=se%256,De.push(be),De.push(de);return De}(ne,re.length-se),re,se,de)}function R(re,ne,se){return 0===ne&&se===re.length?M.fromByteArray(re):M.fromByteArray(re.slice(ne,se))}function F(re,ne,se){se=Math.min(re.length,se);for(var de=[],be=ne;be<se;){var Le,Fe,ke,ze,De=re[be],_e=null,Ce=De>239?4:De>223?3:De>191?2:1;if(be+Ce<=se)switch(Ce){case 1:De<128&&(_e=De);break;case 2:128==(192&(Le=re[be+1]))&&((ze=(31&De)<<6|63&Le)>127&&(_e=ze));break;case 3:Le=re[be+1],Fe=re[be+2],128==(192&Le)&&128==(192&Fe)&&((ze=(15&De)<<12|(63&Le)<<6|63&Fe)>2047&&(ze<55296||ze>57343)&&(_e=ze));break;case 4:Le=re[be+1],Fe=re[be+2],ke=re[be+3],128==(192&Le)&&128==(192&Fe)&&128==(192&ke)&&((ze=(15&De)<<18|(63&Le)<<12|(63&Fe)<<6|63&ke)>65535&&ze<1114112&&(_e=ze))}null===_e?(_e=65533,Ce=1):_e>65535&&(_e-=65536,de.push(_e>>>10&1023|55296),_e=56320|1023&_e),de.push(_e),be+=Ce}return function z(re){var ne=re.length;if(ne<=_)return String.fromCharCode.apply(String,re);for(var se="",de=0;de<ne;)se+=String.fromCharCode.apply(String,re.slice(de,de+=_));return se}(de)}K.kMaxLength=T,u.TYPED_ARRAY_SUPPORT=function n(){try{var re=new Uint8Array(1),ne={foo:function(){return 42}};return Object.setPrototypeOf(ne,Uint8Array.prototype),Object.setPrototypeOf(re,ne),42===re.foo()}catch{return!1}}(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(re,ne,se){return a(re,ne,se)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(re,ne,se){return function o(re,ne,se){return r(re),re<=0?i(re):void 0!==ne?"string"==typeof se?i(re).fill(ne,se):i(re).fill(ne):i(re)}(re,ne,se)},u.allocUnsafe=function(re){return v(re)},u.allocUnsafeSlow=function(re){return v(re)},u.isBuffer=function(ne){return null!=ne&&!0===ne._isBuffer&&ne!==u.prototype},u.compare=function(ne,se){if(X(ne,Uint8Array)&&(ne=u.from(ne,ne.offset,ne.byteLength)),X(se,Uint8Array)&&(se=u.from(se,se.offset,se.byteLength)),!u.isBuffer(ne)||!u.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ne===se)return 0;for(var de=ne.length,be=se.length,De=0,_e=Math.min(de,be);De<_e;++De)if(ne[De]!==se[De]){de=ne[De],be=se[De];break}return de<be?-1:be<de?1:0},u.isEncoding=function(ne){switch(String(ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(ne,se){if(!Array.isArray(ne))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ne.length)return u.alloc(0);var de;if(void 0===se)for(se=0,de=0;de<ne.length;++de)se+=ne[de].length;var be=u.allocUnsafe(se),De=0;for(de=0;de<ne.length;++de){var _e=ne[de];if(X(_e,Uint8Array))De+_e.length>be.length?u.from(_e).copy(be,De):Uint8Array.prototype.set.call(be,_e,De);else{if(!u.isBuffer(_e))throw new TypeError('"list" argument must be an Array of Buffers');_e.copy(be,De)}De+=_e.length}return be},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var ne=this.length;if(ne%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var se=0;se<ne;se+=2)d(this,se,se+1);return this},u.prototype.swap32=function(){var ne=this.length;if(ne%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var se=0;se<ne;se+=4)d(this,se,se+3),d(this,se+1,se+2);return this},u.prototype.swap64=function(){var ne=this.length;if(ne%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var se=0;se<ne;se+=8)d(this,se,se+7),d(this,se+1,se+6),d(this,se+2,se+5),d(this,se+3,se+4);return this},u.prototype.toString=function(){var ne=this.length;return 0===ne?"":0===arguments.length?F(this,0,ne):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(ne){if(!u.isBuffer(ne))throw new TypeError("Argument must be a Buffer");return this===ne||0===u.compare(this,ne)},u.prototype.inspect=function(){var ne="",se=K.INSPECT_MAX_BYTES;return ne=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(ne+=" ... "),"<Buffer "+ne+">"},t&&(u.prototype[t]=u.prototype.inspect),u.prototype.compare=function(ne,se,de,be,De){if(X(ne,Uint8Array)&&(ne=u.from(ne,ne.offset,ne.byteLength)),!u.isBuffer(ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ne);if(void 0===se&&(se=0),void 0===de&&(de=ne?ne.length:0),void 0===be&&(be=0),void 0===De&&(De=this.length),se<0||de>ne.length||be<0||De>this.length)throw new RangeError("out of range index");if(be>=De&&se>=de)return 0;if(be>=De)return-1;if(se>=de)return 1;if(this===ne)return 0;for(var _e=(De>>>=0)-(be>>>=0),Ce=(de>>>=0)-(se>>>=0),Le=Math.min(_e,Ce),Fe=this.slice(be,De),ke=ne.slice(se,de),ze=0;ze<Le;++ze)if(Fe[ze]!==ke[ze]){_e=Fe[ze],Ce=ke[ze];break}return _e<Ce?-1:Ce<_e?1:0},u.prototype.includes=function(ne,se,de){return-1!==this.indexOf(ne,se,de)},u.prototype.indexOf=function(ne,se,de){return A(this,ne,se,de,!0)},u.prototype.lastIndexOf=function(ne,se,de){return A(this,ne,se,de,!1)},u.prototype.write=function(ne,se,de,be){if(void 0===se)be="utf8",de=this.length,se=0;else if(void 0===de&&"string"==typeof se)be=se,de=this.length,se=0;else{if(!isFinite(se))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");se>>>=0,isFinite(de)?(de>>>=0,void 0===be&&(be="utf8")):(be=de,de=void 0)}var De=this.length-se;if((void 0===de||de>De)&&(de=De),ne.length>0&&(de<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var _e=!1;;)switch(be){case"hex":return c(this,ne,se,de);case"utf8":case"utf-8":return S(this,ne,se,de);case"ascii":case"latin1":case"binary":return w(this,ne,se,de);case"base64":return E(this,ne,se,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,ne,se,de);default:if(_e)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),_e=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function D(re,ne,se){var de="";se=Math.min(re.length,se);for(var be=ne;be<se;++be)de+=String.fromCharCode(127&re[be]);return de}function k(re,ne,se){var de="";se=Math.min(re.length,se);for(var be=ne;be<se;++be)de+=String.fromCharCode(re[be]);return de}function O(re,ne,se){var de=re.length;(!ne||ne<0)&&(ne=0),(!se||se<0||se>de)&&(se=de);for(var be="",De=ne;De<se;++De)be+=ue[re[De]];return be}function U(re,ne,se){for(var de=re.slice(ne,se),be="",De=0;De<de.length-1;De+=2)be+=String.fromCharCode(de[De]+256*de[De+1]);return be}function H(re,ne,se){if(re%1!=0||re<0)throw new RangeError("offset is not uint");if(re+ne>se)throw new RangeError("Trying to access beyond buffer length")}function j(re,ne,se,de,be,De){if(!u.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>be||ne<De)throw new RangeError('"value" argument is out of bounds');if(se+de>re.length)throw new RangeError("Index out of range")}function ee(re,ne,se,de,be,De){if(se+de>re.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function W(re,ne,se,de,be){return ne=+ne,se>>>=0,be||ee(re,0,se,4),I.write(re,ne,se,de,23,4),se+4}function B(re,ne,se,de,be){return ne=+ne,se>>>=0,be||ee(re,0,se,8),I.write(re,ne,se,de,52,8),se+8}u.prototype.slice=function(ne,se){var de=this.length;(ne=~~ne)<0?(ne+=de)<0&&(ne=0):ne>de&&(ne=de),(se=void 0===se?de:~~se)<0?(se+=de)<0&&(se=0):se>de&&(se=de),se<ne&&(se=ne);var be=this.subarray(ne,se);return Object.setPrototypeOf(be,u.prototype),be},u.prototype.readUintLE=u.prototype.readUIntLE=function(ne,se,de){ne>>>=0,se>>>=0,de||H(ne,se,this.length);for(var be=this[ne],De=1,_e=0;++_e<se&&(De*=256);)be+=this[ne+_e]*De;return be},u.prototype.readUintBE=u.prototype.readUIntBE=function(ne,se,de){ne>>>=0,se>>>=0,de||H(ne,se,this.length);for(var be=this[ne+--se],De=1;se>0&&(De*=256);)be+=this[ne+--se]*De;return be},u.prototype.readUint8=u.prototype.readUInt8=function(ne,se){return ne>>>=0,se||H(ne,1,this.length),this[ne]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(ne,se){return ne>>>=0,se||H(ne,2,this.length),this[ne]|this[ne+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(ne,se){return ne>>>=0,se||H(ne,2,this.length),this[ne]<<8|this[ne+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(ne,se){return ne>>>=0,se||H(ne,4,this.length),(this[ne]|this[ne+1]<<8|this[ne+2]<<16)+16777216*this[ne+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(ne,se){return ne>>>=0,se||H(ne,4,this.length),16777216*this[ne]+(this[ne+1]<<16|this[ne+2]<<8|this[ne+3])},u.prototype.readIntLE=function(ne,se,de){ne>>>=0,se>>>=0,de||H(ne,se,this.length);for(var be=this[ne],De=1,_e=0;++_e<se&&(De*=256);)be+=this[ne+_e]*De;return be>=(De*=128)&&(be-=Math.pow(2,8*se)),be},u.prototype.readIntBE=function(ne,se,de){ne>>>=0,se>>>=0,de||H(ne,se,this.length);for(var be=se,De=1,_e=this[ne+--be];be>0&&(De*=256);)_e+=this[ne+--be]*De;return _e>=(De*=128)&&(_e-=Math.pow(2,8*se)),_e},u.prototype.readInt8=function(ne,se){return ne>>>=0,se||H(ne,1,this.length),128&this[ne]?-1*(255-this[ne]+1):this[ne]},u.prototype.readInt16LE=function(ne,se){ne>>>=0,se||H(ne,2,this.length);var de=this[ne]|this[ne+1]<<8;return 32768&de?4294901760|de:de},u.prototype.readInt16BE=function(ne,se){ne>>>=0,se||H(ne,2,this.length);var de=this[ne+1]|this[ne]<<8;return 32768&de?4294901760|de:de},u.prototype.readInt32LE=function(ne,se){return ne>>>=0,se||H(ne,4,this.length),this[ne]|this[ne+1]<<8|this[ne+2]<<16|this[ne+3]<<24},u.prototype.readInt32BE=function(ne,se){return ne>>>=0,se||H(ne,4,this.length),this[ne]<<24|this[ne+1]<<16|this[ne+2]<<8|this[ne+3]},u.prototype.readFloatLE=function(ne,se){return ne>>>=0,se||H(ne,4,this.length),I.read(this,ne,!0,23,4)},u.prototype.readFloatBE=function(ne,se){return ne>>>=0,se||H(ne,4,this.length),I.read(this,ne,!1,23,4)},u.prototype.readDoubleLE=function(ne,se){return ne>>>=0,se||H(ne,8,this.length),I.read(this,ne,!0,52,8)},u.prototype.readDoubleBE=function(ne,se){return ne>>>=0,se||H(ne,8,this.length),I.read(this,ne,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(ne,se,de,be){(ne=+ne,se>>>=0,de>>>=0,be)||j(this,ne,se,de,Math.pow(2,8*de)-1,0);var _e=1,Ce=0;for(this[se]=255&ne;++Ce<de&&(_e*=256);)this[se+Ce]=ne/_e&255;return se+de},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(ne,se,de,be){(ne=+ne,se>>>=0,de>>>=0,be)||j(this,ne,se,de,Math.pow(2,8*de)-1,0);var _e=de-1,Ce=1;for(this[se+_e]=255&ne;--_e>=0&&(Ce*=256);)this[se+_e]=ne/Ce&255;return se+de},u.prototype.writeUint8=u.prototype.writeUInt8=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,1,255,0),this[se]=255&ne,se+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,2,65535,0),this[se]=255&ne,this[se+1]=ne>>>8,se+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,2,65535,0),this[se]=ne>>>8,this[se+1]=255&ne,se+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,4,4294967295,0),this[se+3]=ne>>>24,this[se+2]=ne>>>16,this[se+1]=ne>>>8,this[se]=255&ne,se+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,4,4294967295,0),this[se]=ne>>>24,this[se+1]=ne>>>16,this[se+2]=ne>>>8,this[se+3]=255&ne,se+4},u.prototype.writeIntLE=function(ne,se,de,be){if(ne=+ne,se>>>=0,!be){var De=Math.pow(2,8*de-1);j(this,ne,se,de,De-1,-De)}var _e=0,Ce=1,Le=0;for(this[se]=255&ne;++_e<de&&(Ce*=256);)ne<0&&0===Le&&0!==this[se+_e-1]&&(Le=1),this[se+_e]=(ne/Ce>>0)-Le&255;return se+de},u.prototype.writeIntBE=function(ne,se,de,be){if(ne=+ne,se>>>=0,!be){var De=Math.pow(2,8*de-1);j(this,ne,se,de,De-1,-De)}var _e=de-1,Ce=1,Le=0;for(this[se+_e]=255&ne;--_e>=0&&(Ce*=256);)ne<0&&0===Le&&0!==this[se+_e+1]&&(Le=1),this[se+_e]=(ne/Ce>>0)-Le&255;return se+de},u.prototype.writeInt8=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,1,127,-128),ne<0&&(ne=255+ne+1),this[se]=255&ne,se+1},u.prototype.writeInt16LE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,2,32767,-32768),this[se]=255&ne,this[se+1]=ne>>>8,se+2},u.prototype.writeInt16BE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,2,32767,-32768),this[se]=ne>>>8,this[se+1]=255&ne,se+2},u.prototype.writeInt32LE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,4,2147483647,-2147483648),this[se]=255&ne,this[se+1]=ne>>>8,this[se+2]=ne>>>16,this[se+3]=ne>>>24,se+4},u.prototype.writeInt32BE=function(ne,se,de){return ne=+ne,se>>>=0,de||j(this,ne,se,4,2147483647,-2147483648),ne<0&&(ne=4294967295+ne+1),this[se]=ne>>>24,this[se+1]=ne>>>16,this[se+2]=ne>>>8,this[se+3]=255&ne,se+4},u.prototype.writeFloatLE=function(ne,se,de){return W(this,ne,se,!0,de)},u.prototype.writeFloatBE=function(ne,se,de){return W(this,ne,se,!1,de)},u.prototype.writeDoubleLE=function(ne,se,de){return B(this,ne,se,!0,de)},u.prototype.writeDoubleBE=function(ne,se,de){return B(this,ne,se,!1,de)},u.prototype.copy=function(ne,se,de,be){if(!u.isBuffer(ne))throw new TypeError("argument should be a Buffer");if(de||(de=0),!be&&0!==be&&(be=this.length),se>=ne.length&&(se=ne.length),se||(se=0),be>0&&be<de&&(be=de),be===de||0===ne.length||0===this.length)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),ne.length-se<be-de&&(be=ne.length-se+de);var De=be-de;return this===ne&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(se,de,be):Uint8Array.prototype.set.call(ne,this.subarray(de,be),se),De},u.prototype.fill=function(ne,se,de,be){if("string"==typeof ne){if("string"==typeof se?(be=se,se=0,de=this.length):"string"==typeof de&&(be=de,de=this.length),void 0!==be&&"string"!=typeof be)throw new TypeError("encoding must be a string");if("string"==typeof be&&!u.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(1===ne.length){var De=ne.charCodeAt(0);("utf8"===be&&De<128||"latin1"===be)&&(ne=De)}}else"number"==typeof ne?ne&=255:"boolean"==typeof ne&&(ne=Number(ne));if(se<0||this.length<se||this.length<de)throw new RangeError("Out of range index");if(de<=se)return this;var _e;if(se>>>=0,de=void 0===de?this.length:de>>>0,ne||(ne=0),"number"==typeof ne)for(_e=se;_e<de;++_e)this[_e]=ne;else{var Ce=u.isBuffer(ne)?ne:u.from(ne,be),Le=Ce.length;if(0===Le)throw new TypeError('The value "'+ne+'" is invalid for argument "value"');for(_e=0;_e<de-se;++_e)this[_e+se]=Ce[_e%Le]}return this};var te=/[^+/0-9A-Za-z-_]/g;function oe(re,ne){ne=ne||1/0;for(var se,de=re.length,be=null,De=[],_e=0;_e<de;++_e){if((se=re.charCodeAt(_e))>55295&&se<57344){if(!be){if(se>56319){(ne-=3)>-1&&De.push(239,191,189);continue}if(_e+1===de){(ne-=3)>-1&&De.push(239,191,189);continue}be=se;continue}if(se<56320){(ne-=3)>-1&&De.push(239,191,189),be=se;continue}se=65536+(be-55296<<10|se-56320)}else be&&(ne-=3)>-1&&De.push(239,191,189);if(be=null,se<128){if((ne-=1)<0)break;De.push(se)}else if(se<2048){if((ne-=2)<0)break;De.push(se>>6|192,63&se|128)}else if(se<65536){if((ne-=3)<0)break;De.push(se>>12|224,se>>6&63|128,63&se|128)}else{if(!(se<1114112))throw new Error("Invalid code point");if((ne-=4)<0)break;De.push(se>>18|240,se>>12&63|128,se>>6&63|128,63&se|128)}}return De}function Y(re){return M.toByteArray(function q(re){if((re=(re=re.split("=")[0]).trim().replace(te,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(re))}function ae(re,ne,se,de){for(var be=0;be<de&&!(be+se>=ne.length||be>=re.length);++be)ne[be+se]=re[be];return be}function X(re,ne){return re instanceof ne||null!=re&&null!=re.constructor&&null!=re.constructor.name&&re.constructor.name===ne.name}function J(re){return re!=re}var ue=function(){for(var re="0123456789abcdef",ne=new Array(256),se=0;se<16;++se)for(var de=16*se,be=0;be<16;++be)ne[de+be]=re[se]+re[be];return ne}()},75834:($,K,e)=>{"use strict";var M=e(95203),I=e(55685),t=I(M("String.prototype.indexOf"));$.exports=function(n,i){var u=M(n,!!i);return"function"==typeof u&&t(n,".prototype.")>-1?I(u):u}},55685:($,K,e)=>{"use strict";var M=e(84444),I=e(95203),t=e(9511),T=I("%TypeError%"),n=I("%Function.prototype.apply%"),i=I("%Function.prototype.call%"),u=I("%Reflect.apply%",!0)||M.call(i,n),a=I("%Object.defineProperty%",!0),r=I("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}$.exports=function(p){if("function"!=typeof p)throw new T("a function is required");var f=u(M,i,arguments);return t(f,1+r(0,p.length-(arguments.length-1)),!0)};var o=function(){return u(M,n,arguments)};a?a($.exports,"apply",{value:o}):$.exports.apply=o},35856:$=>{$.exports=function K(e,M,I){return M<I?e<M?M:e>I?I:e:e<I?I:e>M?M:e}},11213:($,K,e)=>{"use strict";var M=e(35856);function I(T,n){null==n&&(n=!0);var i=T[0],u=T[1],a=T[2],r=T[3];return null==r&&(r=n?1:255),n&&(i*=255,u*=255,a*=255,r*=255),16777216*(i=255&M(i,0,255))+((u=255&M(u,0,255))<<16)+((a=255&M(a,0,255))<<8)+(r=255&M(r,0,255))}$.exports=I,$.exports.to=I,$.exports.from=function t(T,n){var i=(T=+T)>>>24,u=(16711680&T)>>>16,a=(65280&T)>>>8,r=255&T;return!1===n?[i,u,a,r]:[i/255,u/255,a/255,r/255]}},49914:$=>{"use strict";$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},92473:($,K,e)=>{"use strict";var M=e(63707),I=e(35856),t=e(51186);$.exports=function(i,u){("float"===u||!u)&&(u="array"),"uint"===u&&(u="uint8"),"uint_clamped"===u&&(u="uint8_clamped");var r=new(t(u))(4),o="uint8"!==u&&"uint8_clamped"!==u;return(!i.length||"string"==typeof i)&&((i=M(i))[0]/=255,i[1]/=255,i[2]/=255),function T(n){return!!(n instanceof Uint8Array||n instanceof Uint8ClampedArray||Array.isArray(n)&&(n[0]>1||0===n[0])&&(n[1]>1||0===n[1])&&(n[2]>1||0===n[2])&&(!n[3]||n[3]>1))}(i)?(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=null!=i[3]?i[3]:255,o&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(o?(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=null!=i[3]?i[3]:1):(r[0]=I(Math.floor(255*i[0]),0,255),r[1]=I(Math.floor(255*i[1]),0,255),r[2]=I(Math.floor(255*i[2]),0,255),r[3]=null==i[3]?255:I(Math.floor(255*i[3]),0,255)),r)}},62336:($,K,e)=>{"use strict";var M=e(49914),I=e(51365),t=e(67057);$.exports=function n(i){var u,o,a=[],r=1;if("string"==typeof i)if(M[i])a=M[i].slice(),o="rgb";else if("transparent"===i)r=0,o="rgb",a=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var v=i.slice(1);r=1,(p=v.length)<=4?(a=[parseInt(v[0]+v[0],16),parseInt(v[1]+v[1],16),parseInt(v[2]+v[2],16)],4===p&&(r=parseInt(v[3]+v[3],16)/255)):(a=[parseInt(v[0]+v[1],16),parseInt(v[2]+v[3],16),parseInt(v[4]+v[5],16)],8===p&&(r=parseInt(v[6]+v[7],16)/255)),a[0]||(a[0]=0),a[1]||(a[1]=0),a[2]||(a[2]=0),o="rgb"}else if(u=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var l=u[1],y="rgb"===l;o=v=l.replace(/a$/,"");var p="cmyk"===v?4:"gray"===v?1:3;a=u[2].trim().split(/\s*,\s*/).map(function(g,m){if(/%$/.test(g))return m===p?parseFloat(g)/100:"rgb"===v?255*parseFloat(g)/100:parseFloat(g);if("h"===v[m]){if(/deg$/.test(g))return parseFloat(g);if(void 0!==T[g])return T[g]}return parseFloat(g)}),l===v&&a.push(1),r=y||void 0===a[p]?1:a[p],a=a.slice(0,p)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(a=i.match(/([0-9]+)/g).map(function(x){return parseFloat(x)}),o=i.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(i))if(I(i)){var s=t(i.r,i.red,i.R,null);null!==s?(o="rgb",a=[s,t(i.g,i.green,i.G),t(i.b,i.blue,i.B)]):(o="hsl",a=[t(i.h,i.hue,i.H),t(i.s,i.saturation,i.S),t(i.l,i.lightness,i.L,i.b,i.brightness)]),r=t(i.a,i.alpha,i.opacity,1),null!=i.opacity&&(r/=100)}else(Array.isArray(i)||global.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(a=[i[0],i[1],i[2]],o="rgb",r=4===i.length?i[3]:1);else o="rgb",a=[i>>>16,(65280&i)>>>8,255&i];return{space:o,values:a,alpha:r}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},51365:$=>{"use strict";var K=Object.prototype.toString;$.exports=function(e){var M;return"[object Object]"===K.call(e)&&(null===(M=Object.getPrototypeOf(e))||M===Object.getPrototypeOf({}))}},63707:($,K,e)=>{"use strict";var M=e(62336),I=e(44356),t=e(35856);$.exports=function(n){var i,r=M(n);return r.space?((i=Array(3))[0]=t(r.values[0],0,255),i[1]=t(r.values[1],0,255),i[2]=t(r.values[2],0,255),"h"===r.space[0]&&(i=I.rgb(i)),i.push(t(r.alpha,0,1)),i):[]}},44356:($,K,e)=>{"use strict";var M=e(13055);$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(I){var i,u,a,r,o,t=I[0]/360,T=I[1]/100,n=I[2]/100;if(0===T)return[o=255*n,o,o];i=2*n-(u=n<.5?n*(1+T):n+T-n*T),r=[0,0,0];for(var v=0;v<3;v++)(a=t+1/3*-(v-1))<0?a++:a>1&&a--,o=6*a<1?i+6*(u-i)*a:2*a<1?u:3*a<2?i+(u-i)*(2/3-a)*6:i,r[v]=255*o;return r}},M.hsl=function(I){var r,v,t=I[0]/255,T=I[1]/255,n=I[2]/255,i=Math.min(t,T,n),u=Math.max(t,T,n),a=u-i;return u===i?r=0:t===u?r=(T-n)/a:T===u?r=2+(n-t)/a:n===u&&(r=4+(t-T)/a),(r=Math.min(60*r,360))<0&&(r+=360),v=(i+u)/2,[r,100*(u===i?0:v<=.5?a/(u+i):a/(2-u-i)),100*v]}},13055:$=>{"use strict";$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},90945:$=>{$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},53291:($,K,e)=>{"use strict";$.exports={parse:e(44959),stringify:e(53804)}},13747:($,K,e)=>{"use strict";var M=e(40402);$.exports={isSize:function(t){return/^[\d\.]/.test(t)||-1!==t.indexOf("/")||-1!==M.indexOf(t)}}},44959:($,K,e)=>{"use strict";var M=e(9299),I=e(38732),t=e(41901),T=e(15659),n=e(96209),i=e(83794),u=e(85491),a=e(13747).isSize;$.exports=o;var r=o.cache={};function o(p){if("string"!=typeof p)throw new Error("Font argument must be a string.");if(r[p])return r[p];if(""===p)throw new Error("Cannot parse an empty string.");if(-1!==t.indexOf(p))return r[p]={system:p};for(var y,f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},l=u(p,/\s+/);y=l.shift();){if(-1!==I.indexOf(y))return["style","variant","weight","stretch"].forEach(function(x){f[x]=y}),r[p]=f;if(-1===n.indexOf(y))if("normal"!==y&&"small-caps"!==y)if(-1===i.indexOf(y)){if(-1===T.indexOf(y)){if(a(y)){var s=u(y,"/");if(f.size=s[0],null!=s[1]?f.lineHeight=v(s[1]):"/"===l[0]&&(l.shift(),f.lineHeight=v(l.shift())),!l.length)throw new Error("Missing required font-family.");return f.family=u(l.join(" "),/\s*,\s*/).map(M),r[p]=f}throw new Error("Unknown or unsupported font token: "+y)}f.weight=y}else f.stretch=y;else f.variant=y;else f.style=y}throw new Error("Missing required font-size.")}function v(p){var f=parseFloat(p);return f.toString()===p?f:p}},53804:($,K,e)=>{"use strict";var M=e(9284),I=e(13747).isSize,t=p(e(38732)),T=p(e(41901)),n=p(e(15659)),i=p(e(96209)),u=p(e(83794)),a={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},o_size="1rem",o_family="serif";function v(f,l){if(f&&!l[f]&&!t[f])throw Error("Unknown keyword `"+f+"`");return f}function p(f){for(var l={},y=0;y<f.length;y++)l[f[y]]=1;return l}$.exports=function(l){if((l=M(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&v(l.system,T),l.system;if(v(l.style,i),v(l.variant,a),v(l.weight,n),v(l.stretch,u),null==l.size&&(l.size=o_size),"number"==typeof l.size&&(l.size+="px"),!I)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=o_family),Array.isArray(l.family)&&(l.family.length||(l.family=[o_family]),l.family=l.family.map(function(s){return r[s]?s:'"'+s+'"'}).join(", "));var y=[];return y.push(l.style),l.variant!==l.style&&y.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&y.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&y.push(l.stretch),y.push(l.size+(null==l.lineHeight||"normal"===l.lineHeight||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),y.push(l.family),y.filter(Boolean).join(" ")}},13972:($,K,e)=>{"use strict";var o,M=e(6493),I=e(1986),t=e(63959),T=e(60455),n=e(23086),i=e(35149),u=Function.prototype.bind,a=Object.defineProperty,r=Object.prototype.hasOwnProperty;o=function(v,p,f){var y,l=I(p)&&t(p.value);return delete(y=T(p)).writable,delete y.value,y.get=function(){return!f.overwriteDefinition&&r.call(this,v)?l:(p.value=u.call(l,f.resolveContext?f.resolveContext(this):this),a(this,v,p),this[v])},y},$.exports=function(v){var p=n(arguments[1]);return M(p.resolveContext)&&t(p.resolveContext),i(v,function(f,l){return o(l,f,p)})}},80472:($,K,e)=>{"use strict";var M=e(6493),I=e(47717),t=e(56190),T=e(23086),n=e(18086);($.exports=function(u,a){var r,o,v,p,f;return arguments.length<2||"string"!=typeof u?(p=a,a=u,u=null):p=arguments[2],M(u)?(r=n.call(u,"c"),o=n.call(u,"e"),v=n.call(u,"w")):(r=v=!0,o=!1),f={value:a,configurable:r,enumerable:o,writable:v},p?t(T(p),f):f}).gs=function(u,a,r){var o,v,p,f;return"string"!=typeof u?(p=r,r=a,a=u,u=null):p=arguments[3],M(a)?I(a)?M(r)?I(r)||(p=r,r=void 0):r=void 0:(p=a,a=r=void 0):a=void 0,M(u)?(o=n.call(u,"c"),v=n.call(u,"e")):(o=!0,v=!1),f={get:a,set:r,configurable:o,enumerable:v},p?t(T(p),f):f}},88097:($,K,e)=>{"use strict";e.d(K,{UI:()=>T,b1:()=>n});var M="$";function I(){}function t(l,y){var s=new I;if(l instanceof I)l.each(function(d,A){s.set(A,d)});else if(Array.isArray(l)){var g,x=-1,h=l.length;if(null==y)for(;++x<h;)s.set(x,l[x]);else for(;++x<h;)s.set(y(g=l[x],x,l),g)}else if(l)for(var m in l)s.set(m,l[m]);return s}I.prototype=t.prototype={constructor:I,has:function(l){return M+l in this},get:function(l){return this[M+l]},set:function(l,y){return this[M+l]=y,this},remove:function(l){var y=M+l;return y in this&&delete this[y]},clear:function(){for(var l in this)l[0]===M&&delete this[l]},keys:function(){var l=[];for(var y in this)y[0]===M&&l.push(y.slice(1));return l},values:function(){var l=[];for(var y in this)y[0]===M&&l.push(this[y]);return l},entries:function(){var l=[];for(var y in this)y[0]===M&&l.push({key:y.slice(1),value:this[y]});return l},size:function(){var l=0;for(var y in this)y[0]===M&&++l;return l},empty:function(){for(var l in this)if(l[0]===M)return!1;return!0},each:function(l){for(var y in this)y[0]===M&&l(this[y],y.slice(1),this)}};const T=t;function n(){var s,x,h,l=[],y=[];function g(d,A,b,c){if(A>=l.length)return null!=s&&d.sort(s),null!=x?x(d):d;for(var P,R,_,S=-1,w=d.length,E=l[A++],F=T(),z=b();++S<w;)(_=F.get(P=E(R=d[S])+""))?_.push(R):F.set(P,[R]);return F.each(function(D,k){c(z,k,g(D,A,b,c))}),z}function m(d,A){if(++A>l.length)return d;var b,c=y[A-1];return null!=x&&A>=l.length?b=d.entries():(b=[],d.each(function(S,w){b.push({key:w,values:m(S,A)})})),null!=c?b.sort(function(S,w){return c(S.key,w.key)}):b}return h={object:function(d){return g(d,0,i,u)},map:function(d){return g(d,0,a,r)},entries:function(d){return m(g(d,0,a,r),0)},key:function(d){return l.push(d),h},sortKeys:function(d){return y[l.length-1]=d,h},sortValues:function(d){return s=d,h},rollup:function(d){return x=d,h}}}function i(){return{}}function u(l,y,s){l[y]=s}function a(){return T()}function r(l,y,s){l.set(y,s)}function o(){}var v=T.prototype;o.prototype=function p(l,y){var s=new o;if(l instanceof o)l.each(function(g){s.add(g)});else if(l){var x=-1,h=l.length;if(null==y)for(;++x<h;)s.add(l[x]);else for(;++x<h;)s.add(y(l[x],x,l))}return s}.prototype={constructor:o,has:v.has,add:function(l){return this[M+(l+="")]=l,this},remove:v.remove,clear:v.clear,values:v.keys,size:v.size,empty:v.empty,each:v.each}},5379:($,K,e)=>{"use strict";function M(){}function I(){var Me,me=[];return{point:function(Ve,je,et){Me.push([Ve,je,et])},lineStart:function(){me.push(Me=[])},lineEnd:M,rejoin:function(){me.length>1&&me.push(me.pop().concat(me.shift()))},result:function(){var Ve=me;return me=[],Me=null,Ve}}}e.r(K),e.d(K,{geoAiry:()=>Lo,geoAiryRaw:()=>io,geoAitoff:()=>wo,geoAitoffRaw:()=>qo,geoArmadillo:()=>Ta,geoArmadilloRaw:()=>In,geoAugust:()=>Do,geoAugustRaw:()=>ls,geoBaker:()=>el,geoBakerRaw:()=>as,geoBerghaus:()=>eo,geoBerghausRaw:()=>so,geoBertin1953:()=>xs,geoBertin1953Raw:()=>Ls,geoBoggs:()=>Ho,geoBoggsRaw:()=>pu,geoBonne:()=>nl,geoBonneRaw:()=>Vo,geoBottomley:()=>ko,geoBottomleyRaw:()=>Bo,geoBromley:()=>Ao,geoBromleyRaw:()=>gu,geoChamberlin:()=>bu,geoChamberlinAfrica:()=>js,geoChamberlinRaw:()=>ef,geoCollignon:()=>Wl,geoCollignonRaw:()=>co,geoCraig:()=>ws,geoCraigRaw:()=>al,geoCraster:()=>pl,geoCrasterRaw:()=>il,geoCylindricalEqualArea:()=>Nf,geoCylindricalEqualAreaRaw:()=>Fo,geoCylindricalStereographic:()=>Fl,geoCylindricalStereographicRaw:()=>Ef,geoEckert1:()=>df,geoEckert1Raw:()=>Nu,geoEckert2:()=>eu,geoEckert2Raw:()=>wu,geoEckert3:()=>Ws,geoEckert3Raw:()=>Us,geoEckert4:()=>pf,geoEckert4Raw:()=>Bu,geoEckert5:()=>Cf,geoEckert5Raw:()=>gf,geoEckert6:()=>Uu,geoEckert6Raw:()=>Tu,geoEisenlohr:()=>mf,geoEisenlohrRaw:()=>yf,geoFahey:()=>ru,geoFaheyRaw:()=>Au,geoFoucaut:()=>Lf,geoFoucautRaw:()=>xf,geoFoucautSinusoidal:()=>Hu,geoFoucautSinusoidalRaw:()=>ol,geoGilbert:()=>Xl,geoGingery:()=>zl,geoGingeryRaw:()=>Zl,geoGinzburg4:()=>ul,geoGinzburg4Raw:()=>Vu,geoGinzburg5:()=>Xf,geoGinzburg5Raw:()=>Mu,geoGinzburg6:()=>Zf,geoGinzburg6Raw:()=>Pf,geoGinzburg8:()=>Eu,geoGinzburg8Raw:()=>nu,geoGinzburg9:()=>au,geoGinzburg9Raw:()=>Cu,geoGringorten:()=>rf,geoGringortenQuincuncial:()=>ve,geoGringortenRaw:()=>zo,geoGuyou:()=>ju,geoGuyouRaw:()=>ks,geoHammer:()=>tl,geoHammerRaw:()=>Os,geoHammerRetroazimuthal:()=>pt,geoHammerRetroazimuthalRaw:()=>Nl,geoHealpix:()=>Wn,geoHealpixRaw:()=>Mr,geoHill:()=>_n,geoHillRaw:()=>yn,geoHomolosine:()=>ii,geoHomolosineRaw:()=>ja,geoHufnagel:()=>fa,geoHufnagelRaw:()=>oi,geoHyperelliptical:()=>Hi,geoHyperellipticalRaw:()=>pi,geoInterrupt:()=>mi,geoInterruptedBoggs:()=>Co,geoInterruptedHomolosine:()=>Ia,geoInterruptedMollweide:()=>Uo,geoInterruptedMollweideHemispheres:()=>os,geoInterruptedQuarticAuthalic:()=>xe,geoInterruptedSinuMollweide:()=>cl,geoInterruptedSinusoidal:()=>xl,geoKavrayskiy7:()=>_s,geoKavrayskiy7Raw:()=>_o,geoLagrange:()=>Yu,geoLagrangeRaw:()=>If,geoLarrivee:()=>Df,geoLarriveeRaw:()=>af,geoLaskowski:()=>of,geoLaskowskiRaw:()=>Rf,geoLittrow:()=>Kf,geoLittrowRaw:()=>sf,geoLoximuthal:()=>Jf,geoLoximuthalRaw:()=>Bf,geoMiller:()=>Uf,geoMillerRaw:()=>Xu,geoModifiedStereographic:()=>Vi,geoModifiedStereographicAlaska:()=>Xs,geoModifiedStereographicGs48:()=>Mo,geoModifiedStereographicGs50:()=>Jl,geoModifiedStereographicLee:()=>lo,geoModifiedStereographicMiller:()=>bl,geoModifiedStereographicRaw:()=>Hf,geoMollweide:()=>Pl,geoMollweideRaw:()=>rl,geoMtFlatPolarParabolic:()=>uf,geoMtFlatPolarParabolicRaw:()=>wl,geoMtFlatPolarQuartic:()=>Tl,geoMtFlatPolarQuarticRaw:()=>Ul,geoMtFlatPolarSinusoidal:()=>Gf,geoMtFlatPolarSinusoidalRaw:()=>Zs,geoNaturalEarth:()=>lu,geoNaturalEarth2:()=>ns,geoNaturalEarth2Raw:()=>Wa,geoNaturalEarthRaw:()=>su,geoNellHammer:()=>jf,geoNellHammerRaw:()=>Zu,geoNicolosi:()=>Ue,geoNicolosiRaw:()=>Re,geoPatterson:()=>sn,geoPattersonRaw:()=>tn,geoPeirceQuincuncial:()=>Ee,geoPierceQuincuncial:()=>Ee,geoPolyconic:()=>Gr,geoPolyconicRaw:()=>_r,geoPolyhedral:()=>ni,geoPolyhedralButterfly:()=>Da,geoPolyhedralCollignon:()=>wi,geoPolyhedralWaterman:()=>ki,geoProject:()=>Al,geoQuantize:()=>Ae,geoQuincuncial:()=>Z,geoRectangularPolyconic:()=>ot,geoRectangularPolyconicRaw:()=>Ge,geoRobinson:()=>ar,geoRobinsonRaw:()=>Wt,geoSatellite:()=>_t,geoSatelliteRaw:()=>Tt,geoSinuMollweide:()=>Qa,geoSinuMollweideRaw:()=>ta,geoSinusoidal:()=>Ps,geoSinusoidalRaw:()=>Vs,geoStitch:()=>Yn,geoTimes:()=>_a,geoTimesRaw:()=>ua,geoTwoPointAzimuthal:()=>di,geoTwoPointAzimuthalRaw:()=>Ei,geoTwoPointAzimuthalUsa:()=>qi,geoTwoPointEquidistant:()=>Ko,geoTwoPointEquidistantRaw:()=>Fi,geoTwoPointEquidistantUsa:()=>ho,geoVanDerGrinten:()=>Ku,geoVanDerGrinten2:()=>wf,geoVanDerGrinten2Raw:()=>Iu,geoVanDerGrinten3:()=>Tf,geoVanDerGrinten3Raw:()=>kf,geoVanDerGrinten4:()=>Af,geoVanDerGrinten4Raw:()=>Sl,geoVanDerGrintenRaw:()=>uu,geoWagner:()=>Ju,geoWagner4:()=>Ks,geoWagner4Raw:()=>$f,geoWagner6:()=>uc,geoWagner6Raw:()=>ac,geoWagner7:()=>_f,geoWagnerRaw:()=>Hl,geoWiechel:()=>ic,geoWiechelRaw:()=>vl,geoWinkel3:()=>pc,geoWinkel3Raw:()=>oc});var t=1e-6,n=Math.PI,i=n/2,u=n/4,a=2*n,r=180/n,o=n/180,v=Math.abs,p=Math.atan,f=Math.atan2,l=Math.cos,m=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),d=Math.sign||function(me){return me>0?1:me<0?-1:0},A=Math.sqrt;Math.tan;function c(me){return me>1?0:me<-1?n:Math.acos(me)}function S(me){return me>1?i:me<-1?-i:Math.asin(me)}function w(me){return(me=m(me/2))*me}function E(me,Me){return v(me[0]-Me[0])<t&&v(me[1]-Me[1])<t}function P(me,Me,Ve,je){this.x=me,this.z=Me,this.o=Ve,this.e=je,this.v=!1,this.n=this.p=null}function R(me,Me,Ve,je,et){var Ht,Qt,it=[],vt=[];if(me.forEach(function(Xr){if(!((pn=Xr.length-1)<=0)){var pn,la,Cn=Xr[0],qn=Xr[pn];if(E(Cn,qn)){if(!Cn[2]&&!qn[2]){for(et.lineStart(),Ht=0;Ht<pn;++Ht)et.point((Cn=Xr[Ht])[0],Cn[1]);return void et.lineEnd()}qn[0]+=2*t}it.push(la=new P(Cn,Xr,null,!0)),vt.push(la.o=new P(Cn,null,la,!1)),it.push(la=new P(qn,Xr,null,!1)),vt.push(la.o=new P(qn,null,la,!0))}}),it.length){for(vt.sort(Me),F(it),F(vt),Ht=0,Qt=vt.length;Ht<Qt;++Ht)vt[Ht].e=Ve=!Ve;for(var jt,gr,Zt=it[0];;){for(var Ar=Zt,Fr=!0;Ar.v;)if((Ar=Ar.n)===Zt)return;jt=Ar.z,et.lineStart();do{if(Ar.v=Ar.o.v=!0,Ar.e){if(Fr)for(Ht=0,Qt=jt.length;Ht<Qt;++Ht)et.point((gr=jt[Ht])[0],gr[1]);else je(Ar.x,Ar.n.x,1,et);Ar=Ar.n}else{if(Fr)for(jt=Ar.p.z,Ht=jt.length-1;Ht>=0;--Ht)et.point((gr=jt[Ht])[0],gr[1]);else je(Ar.x,Ar.p.x,-1,et);Ar=Ar.p}jt=(Ar=Ar.o).z,Fr=!Fr}while(!Ar.v);et.lineEnd()}}}function F(me){if(Me=me.length){for(var Me,et,Ve=0,je=me[0];++Ve<Me;)je.n=et=me[Ve],et.p=je,je=et;je.n=et=me[0],et.p=je}}function _(){return new z}function z(){this.reset()}z.prototype={constructor:z,reset:function(){this.s=this.t=0},add:function(me){k(D,me,this.t),k(this,D.s,this.s),this.s?this.t+=D.t:this.s=D.t},valueOf:function(){return this.s}};var D=new z;function k(me,Me,Ve){var je=me.s=Me+Ve,et=je-Me,it=je-et;me.t=Me-it+(Ve-et)}function O(me){return[f(me[1],me[0]),S(me[2])]}function U(me){var Me=me[0],Ve=me[1],je=l(Ve);return[je*l(Me),je*m(Me),m(Ve)]}function H(me,Me){return me[0]*Me[0]+me[1]*Me[1]+me[2]*Me[2]}function j(me,Me){return[me[1]*Me[2]-me[2]*Me[1],me[2]*Me[0]-me[0]*Me[2],me[0]*Me[1]-me[1]*Me[0]]}function ee(me,Me){me[0]+=Me[0],me[1]+=Me[1],me[2]+=Me[2]}function W(me,Me){return[me[0]*Me,me[1]*Me,me[2]*Me]}function B(me){var Me=A(me[0]*me[0]+me[1]*me[1]+me[2]*me[2]);me[0]/=Me,me[1]/=Me,me[2]/=Me}var te=_();function q(me){return v(me[0])<=n?me[0]:d(me[0])*((v(me[0])+n)%a-n)}function ie(me,Me){return me<Me?-1:me>Me?1:me>=Me?0:NaN}var ae=function V(me){return 1===me.length&&(me=function Y(me){return function(Me,Ve){return ie(me(Me),Ve)}}(me)),{left:function(Me,Ve,je,et){for(null==je&&(je=0),null==et&&(et=Me.length);je<et;){var it=je+et>>>1;me(Me[it],Ve)<0?je=it+1:et=it}return je},right:function(Me,Ve,je,et){for(null==je&&(je=0),null==et&&(et=Me.length);je<et;){var it=je+et>>>1;me(Me[it],Ve)>0?et=it:je=it+1}return je}}}(ie);ae.right,ae.left;var re=Array.prototype;re.slice,re.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function ze(me){for(var Ve,it,vt,Me=me.length,je=-1,et=0;++je<Me;)et+=me[je].length;for(it=new Array(et);--Me>=0;)for(Ve=(vt=me[Me]).length;--Ve>=0;)it[--et]=vt[Ve];return it}function Pe(me,Me,Ve){me=+me,Me=+Me,Ve=(et=arguments.length)<2?(Me=me,me=0,1):et<3?1:+Ve;for(var je=-1,et=0|Math.max(0,Math.ceil((Me-me)/Ve)),it=new Array(et);++je<et;)it[je]=me+je*Ve;return it}function Ie(me,Me,Ve,je){return function(et){var Zt,jt,gr,it=Me(et),vt=I(),Ht=Me(vt),Qt=!1,Ar={point:Fr,lineStart:pn,lineEnd:Cn,polygonStart:function(){Ar.point=qn,Ar.lineStart=la,Ar.lineEnd=Ma,jt=[],Zt=[]},polygonEnd:function(){Ar.point=Fr,Ar.lineStart=pn,Ar.lineEnd=Cn,jt=ze(jt);var da=function oe(me,Me){var Ve=q(Me),je=Me[1],et=m(je),it=[m(Ve),-l(Ve),0],vt=0,Ht=0;te.reset(),1===et?je=i+t:-1===et&&(je=-i-t);for(var Qt=0,Zt=me.length;Qt<Zt;++Qt)if(gr=(jt=me[Qt]).length)for(var jt,gr,Ar=jt[gr-1],Fr=q(Ar),Xr=Ar[1]/2+u,pn=m(Xr),Cn=l(Xr),qn=0;qn<gr;++qn,Fr=Ma,pn=za,Cn=ci,Ar=la){var la=jt[qn],Ma=q(la),da=la[1]/2+u,za=m(da),ci=l(da),Di=Ma-Fr,zi=Di>=0?1:-1,Oi=zi*Di,bo=Oi>n,Bi=pn*za;if(te.add(f(Bi*zi*m(Oi),Cn*ci+Bi*l(Oi))),vt+=bo?Di+zi*a:Di,bo^Fr>=Ve^Ma>=Ve){var Ms=j(U(Ar),U(la));B(Ms);var ds=j(it,Ms);B(ds);var ro=(bo^Di>=0?-1:1)*S(ds[2]);(je>ro||je===ro&&(Ms[0]||Ms[1]))&&(Ht+=bo^Di>=0?1:-1)}}return(vt<-t||vt<t&&te<-t)^1&Ht}(Zt,je);jt.length?(Qt||(et.polygonStart(),Qt=!0),R(jt,at,da,Ve,et)):da&&(Qt||(et.polygonStart(),Qt=!0),et.lineStart(),Ve(null,null,1,et),et.lineEnd()),Qt&&(et.polygonEnd(),Qt=!1),jt=Zt=null},sphere:function(){et.polygonStart(),et.lineStart(),Ve(null,null,1,et),et.lineEnd(),et.polygonEnd()}};function Fr(da,za){me(da,za)&&et.point(da,za)}function Xr(da,za){it.point(da,za)}function pn(){Ar.point=Xr,it.lineStart()}function Cn(){Ar.point=Fr,it.lineEnd()}function qn(da,za){gr.push([da,za]),Ht.point(da,za)}function la(){Ht.lineStart(),gr=[]}function Ma(){qn(gr[0][0],gr[0][1]),Ht.lineEnd();var ci,zi,Oi,bo,da=Ht.clean(),za=vt.result(),Di=za.length;if(gr.pop(),Zt.push(gr),gr=null,Di){if(1&da){if((zi=(Oi=za[0]).length-1)>0){for(Qt||(et.polygonStart(),Qt=!0),et.lineStart(),ci=0;ci<zi;++ci)et.point((bo=Oi[ci])[0],bo[1]);et.lineEnd()}return}Di>1&&2&da&&za.push(za.pop().concat(za.shift())),jt.push(za.filter(Qe))}}return Ar}}function Qe(me){return me.length>1}function at(me,Me){return((me=me.x)[0]<0?me[1]-i-t:i-me[1])-((Me=Me.x)[0]<0?Me[1]-i-t:i-Me[1])}const Be=Ie(function(){return!0},function Ne(me){var et,Me=NaN,Ve=NaN,je=NaN;return{lineStart:function(){me.lineStart(),et=1},point:function(it,vt){var Ht=it>0?n:-n,Qt=v(it-Me);v(Qt-n)<t?(me.point(Me,Ve=(Ve+vt)/2>0?i:-i),me.point(je,Ve),me.lineEnd(),me.lineStart(),me.point(Ht,Ve),me.point(it,Ve),et=0):je!==Ht&&Qt>=n&&(v(Me-je)<t&&(Me-=je*t),v(it-Ht)<t&&(it-=Ht*t),Ve=function nt(me,Me,Ve,je){var et,it,vt=m(me-Ve);return v(vt)>t?p((m(Me)*(it=l(je))*m(Ve)-m(je)*(et=l(Me))*m(me))/(et*it*vt)):(Me+je)/2}(Me,Ve,it,vt),me.point(je,Ve),me.lineEnd(),me.lineStart(),me.point(Ht,Ve),et=0),me.point(Me=it,Ve=vt),je=Ht},lineEnd:function(){me.lineEnd(),Me=Ve=NaN},clean:function(){return 2-et}}},function ct(me,Me,Ve,je){var et;if(null==me)et=Ve*i,je.point(-n,et),je.point(0,et),je.point(n,et),je.point(n,0),je.point(n,-et),je.point(0,-et),je.point(-n,-et),je.point(-n,0),je.point(-n,et);else if(v(me[0]-Me[0])>t){var it=me[0]<Me[0]?n:-n;et=Ve*it/2,je.point(-it,et),je.point(0,et),je.point(it,et)}else je.point(Me[0],Me[1])},[-n,-i]);function mt(me){return function(){return me}}function Bt(me,Me){function Ve(je,et){return je=me(je,et),Me(je[0],je[1])}return me.invert&&Me.invert&&(Ve.invert=function(je,et){return(je=Me.invert(je,et))&&me.invert(je[0],je[1])}),Ve}function Rt(me,Me){return[v(me)>n?me+Math.round(-me/a)*a:me,Me]}function zt(me,Me,Ve){return(me%=a)?Me||Ve?Bt(Xt(me),Mt(Me,Ve)):Xt(me):Me||Ve?Mt(Me,Ve):Rt}function St(me){return function(Me,Ve){return[(Me+=me)>n?Me-a:Me<-n?Me+a:Me,Ve]}}function Xt(me){var Me=St(me);return Me.invert=St(-me),Me}function Mt(me,Me){var Ve=l(me),je=m(me),et=l(Me),it=m(Me);function vt(Ht,Qt){var Zt=l(Qt),jt=l(Ht)*Zt,gr=m(Ht)*Zt,Ar=m(Qt),Fr=Ar*Ve+jt*je;return[f(gr*et-Fr*it,jt*Ve-Ar*je),S(Fr*et+gr*it)]}return vt.invert=function(Ht,Qt){var Zt=l(Qt),jt=l(Ht)*Zt,gr=m(Ht)*Zt,Ar=m(Qt),Fr=Ar*et-gr*it;return[f(gr*et+Ar*it,jt*Ve+Fr*je),S(Fr*Ve-jt*je)]},vt}function st(me){function Me(Ve){return(Ve=me(Ve[0]*o,Ve[1]*o))[0]*=r,Ve[1]*=r,Ve}return me=zt(me[0]*o,me[1]*o,me.length>2?me[2]*o:0),Me.invert=function(Ve){return(Ve=me.invert(Ve[0]*o,Ve[1]*o))[0]*=r,Ve[1]*=r,Ve},Me}function Se(me,Me,Ve,je,et,it){if(Ve){var vt=l(Me),Ht=m(Me),Qt=je*Ve;null==et?(et=Me+je*a,it=Me-Qt/2):(et=pe(vt,et),it=pe(vt,it),(je>0?et<it:et>it)&&(et+=je*a));for(var Zt,jt=et;je>0?jt>it:jt<it;jt-=Qt)Zt=O([vt,-Ht*l(jt),-Ht*m(jt)]),me.point(Zt[0],Zt[1])}}function pe(me,Me){(Me=U(Me))[0]-=me,B(Me);var Ve=c(-Me[1]);return((-Me[2]<0?-Ve:Ve)+a-t)%a}function Oe(me){var Me=l(me),Ve=6*o,je=Me>0,et=v(Me)>t;function vt(jt,gr){return l(jt)*l(gr)>Me}function Qt(jt,gr,Ar){var pn=[1,0,0],Cn=j(U(jt),U(gr)),qn=H(Cn,Cn),la=Cn[0],Ma=qn-la*la;if(!Ma)return!Ar&&jt;var da=Me*qn/Ma,za=-Me*la/Ma,ci=j(pn,Cn),Di=W(pn,da);ee(Di,W(Cn,za));var Oi=ci,bo=H(Di,Oi),Bi=H(Oi,Oi),Ms=bo*bo-Bi*(H(Di,Di)-1);if(!(Ms<0)){var ds=A(Ms),ro=W(Oi,(-bo-ds)/Bi);if(ee(ro,Di),ro=O(ro),!Ar)return ro;var Fs,Ea=jt[0],Ji=gr[0],Jo=jt[1],ps=gr[1];Ji<Ea&&(Fs=Ea,Ea=Ji,Ji=Fs);var cu=Ji-Ea,Es=v(cu-n)<t;if(!Es&&ps<Jo&&(Fs=Jo,Jo=ps,ps=Fs),Es||cu<t?Es?Jo+ps>0^ro[1]<(v(ro[0]-Ea)<t?Jo:ps):Jo<=ro[1]&&ro[1]<=ps:cu>n^(Ea<=ro[0]&&ro[0]<=Ji)){var Du=W(Oi,(-bo+ds)/Bi);return ee(Du,Di),[ro,O(Du)]}}}function Zt(jt,gr){var Ar=je?me:n-me,Fr=0;return jt<-Ar?Fr|=1:jt>Ar&&(Fr|=2),gr<-Ar?Fr|=4:gr>Ar&&(Fr|=8),Fr}return Ie(vt,function Ht(jt){var gr,Ar,Fr,Xr,pn;return{lineStart:function(){Xr=Fr=!1,pn=1},point:function(Cn,qn){var Ma,la=[Cn,qn],da=vt(Cn,qn),za=je?da?0:Zt(Cn,qn):da?Zt(Cn+(Cn<0?n:-n),qn):0;if(!gr&&(Xr=Fr=da)&&jt.lineStart(),da!==Fr&&((!(Ma=Qt(gr,la))||E(gr,Ma)||E(la,Ma))&&(la[2]=1)),da!==Fr)pn=0,da?(jt.lineStart(),Ma=Qt(la,gr),jt.point(Ma[0],Ma[1])):(Ma=Qt(gr,la),jt.point(Ma[0],Ma[1],2),jt.lineEnd()),gr=Ma;else if(et&&gr&&je^da){var ci;!(za&Ar)&&(ci=Qt(la,gr,!0))&&(pn=0,je?(jt.lineStart(),jt.point(ci[0][0],ci[0][1]),jt.point(ci[1][0],ci[1][1]),jt.lineEnd()):(jt.point(ci[1][0],ci[1][1]),jt.lineEnd(),jt.lineStart(),jt.point(ci[0][0],ci[0][1],3)))}da&&(!gr||!E(gr,la))&&jt.point(la[0],la[1]),gr=la,Fr=da,Ar=za},lineEnd:function(){Fr&&jt.lineEnd(),gr=null},clean:function(){return pn|(Xr&&Fr)<<1}}},function it(jt,gr,Ar,Fr){Se(Fr,me,Ve,Ar,jt,gr)},je?[0,-me]:[-n,me-n])}Rt.invert=Rt;var He=1e9,Xe=-He;function ut(me,Me,Ve,je){function et(Zt,jt){return me<=Zt&&Zt<=Ve&&Me<=jt&&jt<=je}function it(Zt,jt,gr,Ar){var Fr=0,Xr=0;if(null==Zt||(Fr=vt(Zt,gr))!==(Xr=vt(jt,gr))||Qt(Zt,jt)<0^gr>0)do{Ar.point(0===Fr||3===Fr?me:Ve,Fr>1?je:Me)}while((Fr=(Fr+gr+4)%4)!==Xr);else Ar.point(jt[0],jt[1])}function vt(Zt,jt){return v(Zt[0]-me)<t?jt>0?0:3:v(Zt[0]-Ve)<t?jt>0?2:1:v(Zt[1]-Me)<t?jt>0?1:0:jt>0?3:2}function Ht(Zt,jt){return Qt(Zt.x,jt.x)}function Qt(Zt,jt){var gr=vt(Zt,1),Ar=vt(jt,1);return gr!==Ar?gr-Ar:0===gr?jt[1]-Zt[1]:1===gr?Zt[0]-jt[0]:2===gr?Zt[1]-jt[1]:jt[0]-Zt[0]}return function(Zt){var Ar,Fr,Xr,pn,Cn,qn,la,Ma,da,za,ci,jt=Zt,gr=I(),Di={point:zi,lineStart:function Ms(){Di.point=ro,Fr&&Fr.push(Xr=[]),za=!0,da=!1,la=Ma=NaN},lineEnd:function ds(){Ar&&(ro(pn,Cn),qn&&da&&gr.rejoin(),Ar.push(gr.result())),Di.point=zi,da&&jt.lineEnd()},polygonStart:function bo(){jt=gr,Ar=[],Fr=[],ci=!0},polygonEnd:function Bi(){var Ea=function Oi(){for(var Ea=0,Ji=0,Jo=Fr.length;Ji<Jo;++Ji)for(var Wo,Du,ps=Fr[Ji],Fs=1,cu=ps.length,Es=ps[0],fc=Es[0],Wf=Es[1];Fs<cu;++Fs)Wo=fc,Du=Wf,Es=ps[Fs],fc=Es[0],Wf=Es[1],Du<=je?Wf>je&&(fc-Wo)*(je-Du)>(Wf-Du)*(me-Wo)&&++Ea:Wf<=je&&(fc-Wo)*(je-Du)<(Wf-Du)*(me-Wo)&&--Ea;return Ea}(),Ji=ci&&Ea,Jo=(Ar=ze(Ar)).length;(Ji||Jo)&&(Zt.polygonStart(),Ji&&(Zt.lineStart(),it(null,null,1,Zt),Zt.lineEnd()),Jo&&R(Ar,Ht,Ea,it,Zt),Zt.polygonEnd()),jt=Zt,Ar=Fr=Xr=null}};function zi(Ea,Ji){et(Ea,Ji)&&jt.point(Ea,Ji)}function ro(Ea,Ji){var Jo=et(Ea,Ji);if(Fr&&Xr.push([Ea,Ji]),za)pn=Ea,Cn=Ji,qn=Jo,za=!1,Jo&&(jt.lineStart(),jt.point(Ea,Ji));else if(Jo&&da)jt.point(Ea,Ji);else{var ps=[la=Math.max(Xe,Math.min(He,la)),Ma=Math.max(Xe,Math.min(He,Ma))],Fs=[Ea=Math.max(Xe,Math.min(He,Ea)),Ji=Math.max(Xe,Math.min(He,Ji))];!function we(me,Me,Ve,je,et,it){var Xr,vt=me[0],Ht=me[1],jt=0,gr=1,Ar=Me[0]-vt,Fr=Me[1]-Ht;if(Xr=Ve-vt,Ar||!(Xr>0)){if(Xr/=Ar,Ar<0){if(Xr<jt)return;Xr<gr&&(gr=Xr)}else if(Ar>0){if(Xr>gr)return;Xr>jt&&(jt=Xr)}if(Xr=et-vt,Ar||!(Xr<0)){if(Xr/=Ar,Ar<0){if(Xr>gr)return;Xr>jt&&(jt=Xr)}else if(Ar>0){if(Xr<jt)return;Xr<gr&&(gr=Xr)}if(Xr=je-Ht,Fr||!(Xr>0)){if(Xr/=Fr,Fr<0){if(Xr<jt)return;Xr<gr&&(gr=Xr)}else if(Fr>0){if(Xr>gr)return;Xr>jt&&(jt=Xr)}if(Xr=it-Ht,Fr||!(Xr<0)){if(Xr/=Fr,Fr<0){if(Xr>gr)return;Xr>jt&&(jt=Xr)}else if(Fr>0){if(Xr<jt)return;Xr<gr&&(gr=Xr)}return jt>0&&(me[0]=vt+jt*Ar,me[1]=Ht+jt*Fr),gr<1&&(Me[0]=vt+gr*Ar,Me[1]=Ht+gr*Fr),!0}}}}}(ps,Fs,me,Me,Ve,je)?Jo&&(jt.lineStart(),jt.point(Ea,Ji),ci=!1):(da||(jt.lineStart(),jt.point(ps[0],ps[1])),jt.point(Fs[0],Fs[1]),Jo||jt.lineEnd(),ci=!1)}la=Ea,Ma=Ji,da=Jo}return Di}}function Ze(me){return me}function Dt(me){return function(Me){var Ve=new Ft;for(var je in me)Ve[je]=me[je];return Ve.stream=Me,Ve}}function Ft(){}function bt(me,Me){me&&cr.hasOwnProperty(me.type)&&cr[me.type](me,Me)}Ft.prototype={constructor:Ft,point:function(me,Me){this.stream.point(me,Me)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Pt={Feature:function(me,Me){bt(me.geometry,Me)},FeatureCollection:function(me,Me){for(var Ve=me.features,je=-1,et=Ve.length;++je<et;)bt(Ve[je].geometry,Me)}},cr={Sphere:function(me,Me){Me.sphere()},Point:function(me,Me){me=me.coordinates,Me.point(me[0],me[1],me[2])},MultiPoint:function(me,Me){for(var Ve=me.coordinates,je=-1,et=Ve.length;++je<et;)me=Ve[je],Me.point(me[0],me[1],me[2])},LineString:function(me,Me){Sr(me.coordinates,Me,0)},MultiLineString:function(me,Me){for(var Ve=me.coordinates,je=-1,et=Ve.length;++je<et;)Sr(Ve[je],Me,0)},Polygon:function(me,Me){Kr(me.coordinates,Me)},MultiPolygon:function(me,Me){for(var Ve=me.coordinates,je=-1,et=Ve.length;++je<et;)Kr(Ve[je],Me)},GeometryCollection:function(me,Me){for(var Ve=me.geometries,je=-1,et=Ve.length;++je<et;)bt(Ve[je],Me)}};function Sr(me,Me,Ve){var it,je=-1,et=me.length-Ve;for(Me.lineStart();++je<et;)it=me[je],Me.point(it[0],it[1],it[2]);Me.lineEnd()}function Kr(me,Me){var Ve=-1,je=me.length;for(Me.polygonStart();++Ve<je;)Sr(me[Ve],Me,1);Me.polygonEnd()}function It(me,Me){me&&Pt.hasOwnProperty(me.type)?Pt[me.type](me,Me):bt(me,Me)}var $t=1/0,kr=$t,lr=-$t,rt=lr;const gt={point:function ht(me,Me){me<$t&&($t=me),me>lr&&(lr=me),Me<kr&&(kr=Me),Me>rt&&(rt=Me)},lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M,result:function(){var me=[[$t,kr],[lr,rt]];return lr=rt=-(kr=$t=1/0),me}};function ft(me,Me,Ve){var je=me.clipExtent&&me.clipExtent();return me.scale(150).translate([0,0]),null!=je&&me.clipExtent(null),It(Ve,me.stream(gt)),Me(gt.result()),null!=je&&me.clipExtent(je),me}function Ct(me,Me,Ve){return ft(me,function(je){var et=Me[1][0]-Me[0][0],it=Me[1][1]-Me[0][1],vt=Math.min(et/(je[1][0]-je[0][0]),it/(je[1][1]-je[0][1])),Ht=+Me[0][0]+(et-vt*(je[1][0]+je[0][0]))/2,Qt=+Me[0][1]+(it-vt*(je[1][1]+je[0][1]))/2;me.scale(150*vt).translate([Ht,Qt])},Ve)}var zr=l(30*o);function Wr(me,Me){return+Me?function We(me,Me){function Ve(je,et,it,vt,Ht,Qt,Zt,jt,gr,Ar,Fr,Xr,pn,Cn){var qn=Zt-je,la=jt-et,Ma=qn*qn+la*la;if(Ma>4*Me&&pn--){var da=vt+Ar,za=Ht+Fr,ci=Qt+Xr,Di=A(da*da+za*za+ci*ci),zi=S(ci/=Di),Oi=v(v(ci)-1)<t||v(it-gr)<t?(it+gr)/2:f(za,da),bo=me(Oi,zi),Bi=bo[0],Ms=bo[1],ds=Bi-je,ro=Ms-et,Ea=la*ds-qn*ro;(Ea*Ea/Ma>Me||v((qn*ds+la*ro)/Ma-.5)>.3||vt*Ar+Ht*Fr+Qt*Xr<zr)&&(Ve(je,et,it,vt,Ht,Qt,Bi,Ms,Oi,da/=Di,za/=Di,ci,pn,Cn),Cn.point(Bi,Ms),Ve(Bi,Ms,Oi,da,za,ci,Zt,jt,gr,Ar,Fr,Xr,pn,Cn))}}return function(je){var et,it,vt,Ht,Qt,Zt,jt,gr,Ar,Fr,Xr,pn,Cn={point:qn,lineStart:la,lineEnd:da,polygonStart:function(){je.polygonStart(),Cn.lineStart=za},polygonEnd:function(){je.polygonEnd(),Cn.lineStart=la}};function qn(zi,Oi){zi=me(zi,Oi),je.point(zi[0],zi[1])}function la(){gr=NaN,Cn.point=Ma,je.lineStart()}function Ma(zi,Oi){var bo=U([zi,Oi]),Bi=me(zi,Oi);Ve(gr,Ar,jt,Fr,Xr,pn,gr=Bi[0],Ar=Bi[1],jt=zi,Fr=bo[0],Xr=bo[1],pn=bo[2],16,je),je.point(gr,Ar)}function da(){Cn.point=qn,je.lineEnd()}function za(){la(),Cn.point=ci,Cn.lineEnd=Di}function ci(zi,Oi){Ma(et=zi,Oi),it=gr,vt=Ar,Ht=Fr,Qt=Xr,Zt=pn,Cn.point=Ma}function Di(){Ve(gr,Ar,jt,Fr,Xr,pn,it,vt,et,Ht,Qt,Zt,16,je),Cn.lineEnd=da,da()}return Cn}}(me,Me):function Ke(me){return Dt({point:function(Me,Ve){Me=me(Me,Ve),this.stream.point(Me[0],Me[1])}})}(me)}var Jt=Dt({point:function(me,Me){this.stream.point(me*o,Me*o)}});function hr(me,Me,Ve,je,et){function it(vt,Ht){return[Me+me*(vt*=je),Ve-me*(Ht*=et)]}return it.invert=function(vt,Ht){return[(vt-Me)/me*je,(Ve-Ht)/me*et]},it}function br(me,Me,Ve,je,et,it){var vt=l(it),Ht=m(it),Qt=vt*me,Zt=Ht*me,jt=vt/me,gr=Ht/me,Ar=(Ht*Ve-vt*Me)/me,Fr=(Ht*Me+vt*Ve)/me;function Xr(pn,Cn){return[Qt*(pn*=je)-Zt*(Cn*=et)+Me,Ve-Zt*pn-Qt*Cn]}return Xr.invert=function(pn,Cn){return[je*(jt*pn-gr*Cn+Ar),et*(Fr-gr*pn-jt*Cn)]},Xr}function Ut(me){return Kt(function(){return me})()}function Kt(me){var Me,jt,qn,la,Ma,ci,Di,zi,Oi,bo,Ve=150,je=480,et=250,it=0,vt=0,Ht=0,Qt=0,Zt=0,gr=0,Ar=1,Fr=1,Xr=null,pn=Be,Cn=null,da=Ze,za=.5;function Bi(Ea){return zi(Ea[0]*o,Ea[1]*o)}function Ms(Ea){return(Ea=zi.invert(Ea[0],Ea[1]))&&[Ea[0]*r,Ea[1]*r]}function ds(){var Ea=br(Ve,0,0,Ar,Fr,gr).apply(null,Me(it,vt)),Ji=(gr?br:hr)(Ve,je-Ea[0],et-Ea[1],Ar,Fr,gr);return jt=zt(Ht,Qt,Zt),Di=Bt(Me,Ji),zi=Bt(jt,Di),ci=Wr(Di,za),ro()}function ro(){return Oi=bo=null,Bi}return Bi.stream=function(Ea){return Oi&&bo===Ea?Oi:Oi=Jt(function Gt(me){return Dt({point:function(Me,Ve){var je=me(Me,Ve);return this.stream.point(je[0],je[1])}})}(jt)(pn(ci(da(bo=Ea)))))},Bi.preclip=function(Ea){return arguments.length?(pn=Ea,Xr=void 0,ro()):pn},Bi.postclip=function(Ea){return arguments.length?(da=Ea,Cn=qn=la=Ma=null,ro()):da},Bi.clipAngle=function(Ea){return arguments.length?(pn=+Ea?Oe(Xr=Ea*o):(Xr=null,Be),ro()):Xr*r},Bi.clipExtent=function(Ea){return arguments.length?(da=null==Ea?(Cn=qn=la=Ma=null,Ze):ut(Cn=+Ea[0][0],qn=+Ea[0][1],la=+Ea[1][0],Ma=+Ea[1][1]),ro()):null==Cn?null:[[Cn,qn],[la,Ma]]},Bi.scale=function(Ea){return arguments.length?(Ve=+Ea,ds()):Ve},Bi.translate=function(Ea){return arguments.length?(je=+Ea[0],et=+Ea[1],ds()):[je,et]},Bi.center=function(Ea){return arguments.length?(it=Ea[0]%360*o,vt=Ea[1]%360*o,ds()):[it*r,vt*r]},Bi.rotate=function(Ea){return arguments.length?(Ht=Ea[0]%360*o,Qt=Ea[1]%360*o,Zt=Ea.length>2?Ea[2]%360*o:0,ds()):[Ht*r,Qt*r,Zt*r]},Bi.angle=function(Ea){return arguments.length?(gr=Ea%360*o,ds()):gr*r},Bi.reflectX=function(Ea){return arguments.length?(Ar=Ea?-1:1,ds()):Ar<0},Bi.reflectY=function(Ea){return arguments.length?(Fr=Ea?-1:1,ds()):Fr<0},Bi.precision=function(Ea){return arguments.length?(ci=Wr(Di,za=Ea*Ea),ro()):A(za)},Bi.fitExtent=function(Ea,Ji){return Ct(Bi,Ea,Ji)},Bi.fitSize=function(Ea,Ji){return function sr(me,Me,Ve){return Ct(me,[[0,0],Me],Ve)}(Bi,Ea,Ji)},Bi.fitWidth=function(Ea,Ji){return function tr(me,Me,Ve){return ft(me,function(je){var et=+Me,it=et/(je[1][0]-je[0][0]),vt=(et-it*(je[1][0]+je[0][0]))/2,Ht=-it*je[0][1];me.scale(150*it).translate([vt,Ht])},Ve)}(Bi,Ea,Ji)},Bi.fitHeight=function(Ea,Ji){return function Cr(me,Me,Ve){return ft(me,function(je){var et=+Me,it=et/(je[1][1]-je[0][1]),vt=-it*je[0][0],Ht=(et-it*(je[1][1]+je[0][1]))/2;me.scale(150*it).translate([vt,Ht])},Ve)}(Bi,Ea,Ji)},function(){return Me=me.apply(this,arguments),Bi.invert=Me.invert&&Ms,ds()}}var wt=Math.abs,xr=Math.atan,Ir=Math.atan2,qt=(Math.ceil,Math.cos),on=Math.exp,an=Math.floor,hn=Math.log,An=Math.max,Sn=Math.min,sa=Math.pow,Rn=Math.round,Yr=Math.sign||function(me){return me>0?1:me<0?-1:0},vr=Math.sin,nn=Math.tan,Or=1e-6,Xn=1e-12,Vr=Math.PI,wn=Vr/2,Ca=Vr/4,Ba=Math.SQRT1_2,Ka=gn(2),Ja=gn(Vr),si=2*Vr,Ra=180/Vr,Na=Vr/180;function ha(me){return me>1?wn:me<-1?-wn:Math.asin(me)}function yi(me){return me>1?0:me<-1?Vr:Math.acos(me)}function gn(me){return me>0?Math.sqrt(me):0}function Qi(me){return(on(me)-on(-me))/2}function Ii(me){return(on(me)+on(-me))/2}function io(me){var Me=nn(me/2),Ve=2*hn(qt(me/2))/(Me*Me);function je(et,it){var vt=qt(et),Ht=qt(it),Qt=vr(it),Zt=Ht*vt,jt=-((1-Zt?hn((1+Zt)/2)/(1-Zt):-.5)+Ve/(1+Zt));return[jt*Ht*vr(et),jt*Qt]}return je.invert=function(et,it){var Zt,vt=gn(et*et+it*it),Ht=-me/2,Qt=50;if(!vt)return[0,0];do{var jt=Ht/2,gr=qt(jt),Ar=vr(jt),Fr=Ar/gr,Xr=-hn(wt(gr));Ht-=Zt=(2/Fr*Xr-Ve*Fr-vt)/(-Xr/(Ar*Ar)+1-Ve/(2*gr*gr))*(gr<0?.7:1)}while(wt(Zt)>Or&&--Qt>0);var pn=vr(Ht);return[Ir(et*pn,vt*qt(Ht)),ha(it*pn/vt)]},je}function Lo(){var me=wn,Me=Kt(io),Ve=Me(me);return Ve.radius=function(je){return arguments.length?Me(me=je*Na):me*Ra},Ve.scale(179.976).clipAngle(147)}function qo(me,Me){var Ve=qt(Me),je=function Ni(me){return me?me/Math.sin(me):1}(yi(Ve*qt(me/=2)));return[2*Ve*vr(me)*je,vr(Me)*je]}function wo(){return Ut(qo).scale(152.63)}function In(me){var Me=vr(me),Ve=qt(me),je=me>=0?1:-1,et=nn(je*me),it=(1+Me-Ve)/2;function vt(Ht,Qt){var Zt=qt(Qt),jt=qt(Ht/=2);return[(1+Zt)*vr(Ht),(je*Qt>-Ir(jt,et)-.001?0:10*-je)+it+vr(Qt)*Ve-(1+Zt)*Me*jt]}return vt.invert=function(Ht,Qt){var Zt=0,jt=0,gr=50;do{var Ar=qt(Zt),Fr=vr(Zt),Xr=qt(jt),pn=vr(jt),Cn=1+Xr,qn=Cn*Fr-Ht,la=it+pn*Ve-Cn*Me*Ar-Qt,Ma=Cn*Ar/2,da=-Fr*pn,za=Me*Cn*Fr/2,ci=Ve*Xr+Me*Ar*pn,Di=da*za-ci*Ma,zi=(la*da-qn*ci)/Di/2,Oi=(qn*za-la*Ma)/Di;wt(Oi)>2&&(Oi/=2),Zt-=zi,jt-=Oi}while((wt(zi)>Or||wt(Oi)>Or)&&--gr>0);return je*jt>-Ir(qt(Zt),et)-.001?[2*Zt,jt]:null},vt}function Ta(){var me=20*Na,Me=me>=0?1:-1,Ve=nn(Me*me),je=Kt(In),et=je(me),it=et.stream;return et.parallel=function(vt){return arguments.length?(Ve=nn((Me=(me=vt*Na)>=0?1:-1)*me),je(me)):me*Ra},et.stream=function(vt){var Ht=et.rotate(),Qt=it(vt),Zt=(et.rotate([0,0]),it(vt)),jt=et.precision();return et.rotate(Ht),Qt.sphere=function(){Zt.polygonStart(),Zt.lineStart();for(var gr=-180*Me;Me*gr<180;gr+=90*Me)Zt.point(gr,90*Me);if(me)for(;Me*(gr-=3*Me*jt)>=-180;)Zt.point(gr,Me*-Ir(qt(gr*Na/2),Ve)*Ra);Zt.lineEnd(),Zt.polygonEnd()},Qt},et.scale(218.695).center([0,28.0974])}function ls(me,Me){var Ve=nn(Me/2),je=gn(1-Ve*Ve),et=1+je*qt(me/=2),it=vr(me)*je/et,vt=Ve/et,Ht=it*it,Qt=vt*vt;return[4/3*it*(3+Ht-3*Qt),4/3*vt*(3+3*Ht-Qt)]}function Do(){return Ut(ls).scale(66.1603)}qo.invert=function(me,Me){if(!(me*me+4*Me*Me>Vr*Vr+Or)){var Ve=me,je=Me,et=25;do{var Cn,it=vr(Ve),vt=vr(Ve/2),Ht=qt(Ve/2),Qt=vr(je),Zt=qt(je),jt=vr(2*je),gr=Qt*Qt,Ar=Zt*Zt,Fr=vt*vt,Xr=1-Ar*Ht*Ht,pn=Xr?yi(Zt*Ht)*gn(Cn=1/Xr):Cn=0,qn=2*pn*Zt*vt-me,la=pn*Qt-Me,Ma=Cn*(Ar*Fr+pn*Zt*Ht*gr),da=Cn*(.5*it*jt-2*pn*Qt*vt),za=.25*Cn*(jt*vt-pn*Qt*Ar*it),ci=Cn*(gr*Ht+pn*Fr*Zt),Di=da*za-ci*Ma;if(!Di)break;var zi=(la*da-qn*ci)/Di,Oi=(qn*za-la*Ma)/Di;Ve-=zi,je-=Oi}while((wt(zi)>Or||wt(Oi)>Or)&&--et>0);return[Ve,je]}},ls.invert=function(me,Me){if(Me*=3/8,!(me*=3/8)&&wt(Me)>1)return null;var et=1+me*me+Me*Me,it=gn((et-gn(et*et-4*Me*Me))/2),vt=ha(it)/3,Ht=it?function ao(me){return hn(me+gn(me*me-1))}(wt(Me/it))/3:function Xo(me){return hn(me+gn(me*me+1))}(wt(me))/3,Qt=qt(vt),Zt=Ii(Ht),jt=Zt*Zt-Qt*Qt;return[2*Yr(me)*Ir(Qi(Ht)*Qt,.25-jt),2*Yr(Me)*Ir(Zt*vr(vt),.25+jt)]};var oo=gn(8),ys=hn(1+Ka);function as(me,Me){var Ve=wt(Me);return Ve<Ca?[me,hn(nn(Ca+Me/2))]:[me*qt(Ve)*(2*Ka-1/vr(Ve)),Yr(Me)*(2*Ka*(Ve-Ca)-hn(nn(Ve/2)))]}function el(){return Ut(as).scale(112.314)}function To(me){return function(Me,Ve){var je=l(Me),et=l(Ve),it=me(je*et);return[it*et*m(Me),it*m(Ve)]}}function va(me){return function(Me,Ve){var je=A(Me*Me+Ve*Ve),et=me(je),it=m(et),vt=l(et);return[f(Me*it,je*vt),S(je&&Ve*it/je)]}}as.invert=function(me,Me){if((it=wt(Me))<ys)return[me,2*xr(on(Me))-wn];var et,it,Ve=Ca,je=25;do{var vt=qt(Ve/2),Ht=nn(Ve/2);Ve-=et=(oo*(Ve-Ca)-hn(Ht)-it)/(oo-vt*vt/(2*Ht))}while(wt(et)>Xn&&--je>0);return[me/(qt(Ve)*(oo-1/vr(Ve))),Yr(Me)*Ve]};var Ai=To(function(me){return(me=c(me))&&me/m(me)});function so(me){var Me=2*Vr/me;function Ve(je,et){var it=Ai(je,et);if(wt(je)>wn){var vt=Ir(it[1],it[0]),Ht=gn(it[0]*it[0]+it[1]*it[1]),Qt=Me*Rn((vt-wn)/Me)+wn,Zt=Ir(vr(vt-=Qt),2-qt(vt));vt=Qt+ha(Vr/Ht*vr(Zt))-Zt,it[0]=Ht*qt(vt),it[1]=Ht*vr(vt)}return it}return Ve.invert=function(je,et){var it=gn(je*je+et*et);if(it>wn){var vt=Ir(et,je),Ht=Me*Rn((vt-wn)/Me)+wn,Qt=vt>Ht?-1:1,Zt=it*qt(Ht-vt),jt=1/nn(Qt*yi((Zt-Vr)/gn(Vr*(Vr-2*Zt)+it*it)));vt=Ht+2*xr((jt+Qt*gn(jt*jt-3))/3),je=it*qt(vt),et=it*vr(vt)}return Ai.invert(je,et)},Ve}function eo(){var me=5,Me=Kt(so),Ve=Me(me),je=Ve.stream,et=.01,it=-qt(et*Na),vt=vr(et*Na);return Ve.lobes=function(Ht){return arguments.length?Me(me=+Ht):me},Ve.stream=function(Ht){var Qt=Ve.rotate(),Zt=je(Ht),jt=(Ve.rotate([0,0]),je(Ht));return Ve.rotate(Qt),Zt.sphere=function(){jt.polygonStart(),jt.lineStart();for(var gr=0,Ar=360/me,Fr=2*Vr/me,Xr=90-180/me,pn=wn;gr<me;++gr,Xr-=Ar,pn-=Fr)jt.point(Ir(vt*qt(pn),it)*Ra,ha(vt*vr(pn))*Ra),Xr<-90?(jt.point(-90,-180-Xr-et),jt.point(-90,-180-Xr+et)):(jt.point(90,Xr+et),jt.point(90,Xr-et));jt.lineEnd(),jt.polygonEnd()},Zt},Ve.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}Ai.invert=va(function(me){return me});var fi=To(function(me){return A(2/(1+me))});function Os(me,Me){if(arguments.length<2&&(Me=me),1===Me)return fi;if(Me===1/0)return ms;function Ve(je,et){var it=fi(je/Me,et);return it[0]*=me,it}return Ve.invert=function(je,et){var it=fi.invert(je/me,et);return it[0]*=Me,it},Ve}function ms(me,Me){return[me*qt(Me)/qt(Me/=2),2*vr(Me)]}function tl(){var me=2,Me=Kt(Os),Ve=Me(me);return Ve.coefficient=function(je){return arguments.length?Me(me=+je):me},Ve.scale(169.529)}function Ro(me,Me,Ve){var et,it,vt,je=100;Ve=void 0===Ve?0:+Ve,Me=+Me;do{(it=me(Ve))===(vt=me(Ve+Or))&&(vt=it+Or),Ve-=et=-1*Or*(it-Me)/(it-vt)}while(je-- >0&&wt(et)>Or);return je<0?NaN:Ve}function yo(me,Me,Ve){return void 0===Me&&(Me=40),void 0===Ve&&(Ve=Xn),function(je,et,it,vt){var Ht,Qt,Zt;it=void 0===it?0:+it,vt=void 0===vt?0:+vt;for(var jt=0;jt<Me;jt++){var gr=me(it,vt),Ar=gr[0]-je,Fr=gr[1]-et;if(wt(Ar)<Ve&&wt(Fr)<Ve)break;var Xr=Ar*Ar+Fr*Fr;if(Xr>Ht)it-=Qt/=2,vt-=Zt/=2;else{Ht=Xr;var pn=(it>0?-1:1)*Ve,Cn=(vt>0?-1:1)*Ve,qn=me(it+pn,vt),la=me(it,vt+Cn),Ma=(qn[0]-gr[0])/pn,da=(qn[1]-gr[1])/pn,za=(la[0]-gr[0])/Cn,ci=(la[1]-gr[1])/Cn,Di=ci*Ma-da*za,zi=(wt(Di)<.5?.5:1)/Di;if(it+=Qt=(Fr*za-Ar*ci)*zi,vt+=Zt=(Ar*da-Fr*Ma)*zi,wt(Qt)<Ve&&wt(Zt)<Ve)break}}return[it,vt]}}function Ls(){var me=Os(1.68,2);function je(et,it){if(et+it<-1.4){var vt=(et-it+1.6)*(et+it+1.4)/8;et+=vt,it-=.8*vt*vr(it+Vr/2)}var Ht=me(et,it),Qt=(1-qt(et*it))/12;return Ht[1]<0&&(Ht[0]*=1+Qt),Ht[1]>0&&(Ht[1]*=1+Qt/1.5*Ht[0]*Ht[0]),Ht}return je.invert=yo(je),je}function xs(){return Ut(Ls()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ll(me,Me){var et,Ve=me*vr(Me),je=30;do{Me-=et=(Me+vr(Me)-Ve)/(1+qt(Me))}while(wt(et)>Or&&--je>0);return Me/2}function Hs(me,Me,Ve){function je(et,it){return[me*et*qt(it=Ll(Ve,it)),Me*vr(it)]}return je.invert=function(et,it){return it=ha(it/Me),[et/(me*qt(it)),ha((2*it+vr(2*it))/Ve)]},je}fi.invert=va(function(me){return 2*S(me/2)}),ms.invert=function(me,Me){var Ve=2*ha(Me/2);return[me*qt(Ve/2)/qt(Ve),Ve]};var rl=Hs(Ka/wn,Ka,Vr);function Pl(){return Ut(rl).scale(169.529)}var ji=2.00276;function pu(me,Me){var Ve=Ll(Vr,Me);return[ji*me/(1/qt(Me)+1.11072/qt(Ve)),(Me+Ka*vr(Ve))/ji]}function Ho(){return Ut(pu).scale(160.857)}function Zo(me){var Me=0,Ve=Kt(me),je=Ve(Me);return je.parallel=function(et){return arguments.length?Ve(Me=et*Na):Me*Ra},je}function Vs(me,Me){return[me*qt(Me),Me]}function Ps(){return Ut(Vs).scale(152.63)}function Vo(me){if(!me)return Vs;var Me=1/nn(me);function Ve(je,et){var it=Me+me-et,vt=it&&je*qt(et)/it;return[it*vr(vt),Me-it*qt(vt)]}return Ve.invert=function(je,et){var it=gn(je*je+(et=Me-et)*et),vt=Me+me-it;return[it/qt(vt)*Ir(je,et),vt]},Ve}function nl(){return Zo(Vo).scale(123.082).center([0,26.1441]).parallel(45)}function Bo(me){function Me(Ve,je){var et=wn-je,it=et&&Ve*me*vr(et)/et;return[et*vr(it)/me,wn-et*qt(it)]}return Me.invert=function(Ve,je){var et=Ve*me,it=wn-je,vt=gn(et*et+it*it),Ht=Ir(et,it);return[(vt?vt/vr(vt):1)*Ht/me,wn-vt]},Me}function ko(){var me=.5,Me=Kt(Bo),Ve=Me(me);return Ve.fraction=function(je){return arguments.length?Me(me=+je):me},Ve.scale(158.837)}pu.invert=function(me,Me){var it,vt,Ve=ji*Me,je=Me<0?-Ca:Ca,et=25;do{vt=Ve-Ka*vr(je),je-=it=(vr(2*je)+2*je-Vr*vr(vt))/(2*qt(2*je)+2+Vr*qt(vt)*Ka*qt(je))}while(wt(it)>Or&&--et>0);return vt=Ve-Ka*vr(je),[me*(1/qt(vt)+1.11072/qt(je))/ji,vt]},Vs.invert=function(me,Me){return[me/qt(Me),Me]};var gu=Hs(1,4/Vr,Vr);function Ao(){return Ut(gu).scale(152.63)}var us,fs,Dl,Go,yu,es,Wi,mu,Is,ts,Rl,$l,hf,rs,is,bs,Ns={sphere:M,point:Ds,lineStart:Gs,lineEnd:$u,polygonStart:function(){Ns.lineStart=Of,Ns.lineEnd=kl},polygonEnd:function(){Ns.lineStart=Gs,Ns.lineEnd=$u}};function Ds(me,Me){me*=o;var Ve=l(Me*=o);Bs(Ve*l(me),Ve*m(me),m(Me))}function Bs(me,Me,Ve){++us,Dl+=(me-Dl)/us,Go+=(Me-Go)/us,yu+=(Ve-yu)/us}function Gs(){Ns.point=Gl}function Gl(me,Me){me*=o;var Ve=l(Me*=o);rs=Ve*l(me),is=Ve*m(me),bs=m(Me),Ns.point=zf,Bs(rs,is,bs)}function zf(me,Me){me*=o;var Ve=l(Me*=o),je=Ve*l(me),et=Ve*m(me),it=m(Me),vt=f(A((vt=is*it-bs*et)*vt+(vt=bs*je-rs*it)*vt+(vt=rs*et-is*je)*vt),rs*je+is*et+bs*it);fs+=vt,es+=vt*(rs+(rs=je)),Wi+=vt*(is+(is=et)),mu+=vt*(bs+(bs=it)),Bs(rs,is,bs)}function $u(){Ns.point=Ds}function Of(){Ns.point=xu}function kl(){qu($l,hf),Ns.point=Ds}function xu(me,Me){$l=me,hf=Me,me*=o,Me*=o,Ns.point=qu;var Ve=l(Me);rs=Ve*l(me),is=Ve*m(me),bs=m(Me),Bs(rs,is,bs)}function qu(me,Me){me*=o;var Ve=l(Me*=o),je=Ve*l(me),et=Ve*m(me),it=m(Me),vt=is*it-bs*et,Ht=bs*je-rs*it,Qt=rs*et-is*je,Zt=A(vt*vt+Ht*Ht+Qt*Qt),jt=S(Zt),gr=Zt&&-jt/Zt;Is+=gr*vt,ts+=gr*Ht,Rl+=gr*Qt,fs+=jt,es+=jt*(rs+(rs=je)),Wi+=jt*(is+(is=et)),mu+=jt*(bs+(bs=it)),Bs(rs,is,bs)}function ql(me){us=fs=Dl=Go=yu=es=Wi=mu=Is=ts=Rl=0,It(me,Ns);var Me=Is,Ve=ts,je=Rl,et=Me*Me+Ve*Ve+je*je;return et<1e-12&&(Me=es,Ve=Wi,je=mu,fs<t&&(Me=Dl,Ve=Go,je=yu),(et=Me*Me+Ve*Ve+je*je)<1e-12)?[NaN,NaN]:[f(Ve,Me)*r,S(je/A(et))*r]}function vf(me,Me,Ve,je,et,it){var Ht,vt=qt(it);if(wt(me)>1||wt(it)>1)Ht=yi(Ve*et+Me*je*vt);else{var Qt=vr(me/2),Zt=vr(it/2);Ht=2*ha(gn(Qt*Qt+Me*je*Zt*Zt))}return wt(Ht)>Or?[Ht,Ir(je*vr(it),Me*et-Ve*je*vt)]:[0,0]}function zu(me,Me,Ve){return yi((me*me+Me*Me-Ve*Ve)/(2*me*Me))}function jl(me){return me-2*Vr*an((me+Vr)/(2*Vr))}function ef(me,Me,Ve){for(var it,je=[[me[0],me[1],vr(me[1]),qt(me[1])],[Me[0],Me[1],vr(Me[1]),qt(Me[1])],[Ve[0],Ve[1],vr(Ve[1]),qt(Ve[1])]],et=je[2],vt=0;vt<3;++vt,et=it)it=je[vt],et.v=vf(it[1]-et[1],et[3],et[2],it[3],it[2],it[0]-et[0]),et.point=[0,0];var Ht=zu(je[0].v[0],je[2].v[0],je[1].v[0]),Qt=zu(je[0].v[0],je[1].v[0],je[2].v[0]),Zt=Vr-Ht;je[2].point[1]=0,je[0].point[0]=-(je[1].point[0]=je[0].v[0]/2);var jt=[je[2].point[0]=je[0].point[0]+je[2].v[0]*qt(Ht),2*(je[0].point[1]=je[1].point[1]=je[2].v[0]*vr(Ht))];return function gr(Ar,Fr){var qn,Xr=vr(Fr),pn=qt(Fr),Cn=new Array(3);for(qn=0;qn<3;++qn){var la=je[qn];if(Cn[qn]=vf(Fr-la[1],la[3],la[2],pn,Xr,Ar-la[0]),!Cn[qn][0])return la.point;Cn[qn][1]=jl(Cn[qn][1]-la.v[1])}var Ma=jt.slice();for(qn=0;qn<3;++qn){var da=2==qn?0:qn+1,za=zu(je[qn].v[0],Cn[qn][0],Cn[da][0]);Cn[qn][1]<0&&(za=-za),qn?1==qn?(za=Qt-za,Ma[0]-=Cn[qn][0]*qt(za),Ma[1]-=Cn[qn][0]*vr(za)):(za=Zt-za,Ma[0]+=Cn[qn][0]*qt(za),Ma[1]+=Cn[qn][0]*vr(za)):(Ma[0]+=Cn[qn][0]*qt(za),Ma[1]-=Cn[qn][0]*vr(za))}return Ma[0]/=3,Ma[1]/=3,Ma}}function Ou(me){return me[0]*=Na,me[1]*=Na,me}function js(){return bu([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function bu(me,Me,Ve){var je=ql({type:"MultiPoint",coordinates:[me,Me,Ve]}),et=[-je[0],-je[1]],it=st(et),vt=ef(Ou(it(me)),Ou(it(Me)),Ou(it(Ve)));vt.invert=yo(vt);var Ht=Ut(vt).rotate(et),Qt=Ht.center;return delete Ht.rotate,Ht.center=function(Zt){return arguments.length?Qt(it(Zt)):it.invert(Qt())},Ht.clipAngle(90)}function co(me,Me){var Ve=gn(1-vr(Me));return[2/Ja*me*Ve,Ja*(1-Ve)]}function Wl(){return Ut(co).scale(95.6464).center([0,30])}function al(me){var Me=nn(me);function Ve(je,et){return[je,(je?je/vr(je):1)*(vr(et)*qt(je)-Me*qt(et))]}return Ve.invert=Me?function(je,et){je&&(et*=vr(je)/je);var it=qt(je);return[je,2*Ir(gn(it*it+Me*Me-et*et)-it,Me-et)]}:function(je,et){return[je,ha(je?et*nn(je)/je:et)]},Ve}function ws(){return Zo(al).scale(249.828).clipAngle(90)}co.invert=function(me,Me){var Ve=(Ve=Me/Ja-1)*Ve;return[Ve>0?me*gn(Vr/Ve)/2:0,ha(1-Ve)]};var _l=gn(3);function il(me,Me){return[_l*me*(2*qt(2*Me/3)-1)/Ja,_l*Ja*vr(Me/3)]}function pl(){return Ut(il).scale(156.19)}function Fo(me){var Me=qt(me);function Ve(je,et){return[je*Me,vr(et)/Me]}return Ve.invert=function(je,et){return[je/Me,ha(et*Me)]},Ve}function Nf(){return Zo(Fo).parallel(38.58).scale(195.044)}function Ef(me){var Me=qt(me);function Ve(je,et){return[je*Me,(1+Me)*nn(et/2)]}return Ve.invert=function(je,et){return[je/Me,2*xr(et/(1+Me))]},Ve}function Fl(){return Zo(Ef).scale(124.75)}function Nu(me,Me){var Ve=gn(8/(3*Vr));return[Ve*me*(1-wt(Me)/Vr),Ve*Me]}function df(){return Ut(Nu).scale(165.664)}function wu(me,Me){var Ve=gn(4-3*vr(wt(Me)));return[2/gn(6*Vr)*me*Ve,Yr(Me)*gn(2*Vr/3)*(2-Ve)]}function eu(){return Ut(wu).scale(165.664)}function Us(me,Me){var Ve=gn(Vr*(4+Vr));return[2/Ve*me*(1+gn(1-4*Me*Me/(Vr*Vr))),4/Ve*Me]}function Ws(){return Ut(Us).scale(180.739)}function Bu(me,Me){var Ve=(2+wn)*vr(Me);Me/=2;for(var je=0,et=1/0;je<10&&wt(et)>Or;je++){var it=qt(Me);Me-=et=(Me+vr(Me)*(it+2)-Ve)/(2*it*(1+it))}return[2/gn(Vr*(4+Vr))*me*(1+qt(Me)),2*gn(Vr/(4+Vr))*vr(Me)]}function pf(){return Ut(Bu).scale(180.739)}function gf(me,Me){return[me*(1+qt(Me))/gn(2+Vr),2*Me/gn(2+Vr)]}function Cf(){return Ut(gf).scale(173.044)}function Tu(me,Me){for(var Ve=(1+wn)*vr(Me),je=0,et=1/0;je<10&&wt(et)>Or;je++)Me-=et=(Me+vr(Me)-Ve)/(1+qt(Me));return Ve=gn(2+Vr),[me*(1+qt(Me))/Ve,2*Me/Ve]}function Uu(){return Ut(Tu).scale(173.044)}il.invert=function(me,Me){var Ve=3*ha(Me/(_l*Ja));return[Ja*me/(_l*(2*qt(2*Ve/3)-1)),Ve]},Nu.invert=function(me,Me){var Ve=gn(8/(3*Vr)),je=Me/Ve;return[me/(Ve*(1-wt(je)/Vr)),je]},wu.invert=function(me,Me){var Ve=2-wt(Me)/gn(2*Vr/3);return[me*gn(6*Vr)/(2*Ve),Yr(Me)*ha((4-Ve*Ve)/3)]},Us.invert=function(me,Me){var Ve=gn(Vr*(4+Vr))/2;return[me*Ve/(1+gn(1-Me*Me*(4+Vr)/(4*Vr))),Me*Ve/2]},Bu.invert=function(me,Me){var Ve=Me*gn((4+Vr)/Vr)/2,je=ha(Ve),et=qt(je);return[me/(2/gn(Vr*(4+Vr))*(1+et)),ha((je+Ve*(et+2))/(2+wn))]},gf.invert=function(me,Me){var Ve=gn(2+Vr),je=Me*Ve/2;return[Ve*me/(1+qt(je)),je]},Tu.invert=function(me,Me){var Ve=1+wn,je=gn(Ve/2);return[2*me*je/(1+qt(Me*=je)),ha((Me+vr(Me))/Ve)]};var tu=3+2*Ka;function yf(me,Me){var Ve=vr(me/=2),je=qt(me),et=gn(qt(Me)),it=qt(Me/=2),vt=vr(Me)/(it+Ka*je*et),Ht=gn(2/(1+vt*vt)),Qt=gn((Ka*it+(je+Ve)*et)/(Ka*it+(je-Ve)*et));return[tu*(Ht*(Qt-1/Qt)-2*hn(Qt)),tu*(Ht*vt*(Qt+1/Qt)-2*xr(vt))]}function mf(){return Ut(yf).scale(62.5271)}yf.invert=function(me,Me){if(!(it=ls.invert(me/1.2,1.065*Me)))return null;var it,Ve=it[0],je=it[1],et=20;me/=tu,Me/=tu;do{var vt=Ve/2,Ht=je/2,Qt=vr(vt),Zt=qt(vt),jt=vr(Ht),gr=qt(Ht),Ar=qt(je),Fr=gn(Ar),Xr=jt/(gr+Ka*Zt*Fr),pn=Xr*Xr,Cn=gn(2/(1+pn)),Ma=(Ka*gr+(Zt+Qt)*Fr)/(Ka*gr+(Zt-Qt)*Fr),da=gn(Ma),za=da-1/da,ci=da+1/da,Di=Cn*za-2*hn(da)-me,zi=Cn*Xr*ci-2*xr(Xr)-Me,Oi=jt&&Ba*Fr*Qt*pn/jt,bo=(Ka*Zt*gr+Fr)/(2*(gr+Ka*Zt*Fr)*(gr+Ka*Zt*Fr)*Fr),Bi=-.5*Xr*Cn*Cn*Cn,Ms=Bi*Oi,ds=Bi*bo,ro=(ro=2*gr+Ka*Fr*(Zt-Qt))*ro*da,Ea=(Ka*Zt*gr*Fr+Ar)/ro,Ji=-Ka*Qt*jt/(Fr*ro),Jo=za*Ms-2*Ea/da+Cn*(Ea+Ea/Ma),ps=za*ds-2*Ji/da+Cn*(Ji+Ji/Ma),Fs=Xr*ci*Ms-2*Oi/(1+pn)+Cn*ci*Oi+Cn*Xr*(Ea-Ea/Ma),cu=Xr*ci*ds-2*bo/(1+pn)+Cn*ci*bo+Cn*Xr*(Ji-Ji/Ma),Es=ps*Fs-cu*Jo;if(!Es)break;var Wo=(zi*ps-Di*cu)/Es,Du=(Di*Fs-zi*Jo)/Es;Ve-=Wo,je=An(-wn,Sn(wn,je-Du))}while((wt(Wo)>Or||wt(Du)>Or)&&--et>0);return wt(wt(je)-wn)<Or?[0,je]:et&&[Ve,je]};var Xi=qt(35*Na);function Au(me,Me){var Ve=nn(Me/2);return[me*Xi*gn(1-Ve*Ve),(1+Xi)*Ve]}function ru(){return Ut(Au).scale(137.152)}function xf(me,Me){var Ve=Me/2,je=qt(Ve);return[2*me/Ja*qt(Me)*je*je,Ja*nn(Ve)]}function Lf(){return Ut(xf).scale(135.264)}function ol(me){var Me=1-me,Ve=it(Vr,0)[0]-it(-Vr,0)[0],et=gn(2*(it(0,wn)[1]-it(0,-wn)[1])/Ve);function it(Qt,Zt){var jt=qt(Zt),gr=vr(Zt);return[jt/(Me+me*jt)*Qt,Me*Zt+me*gr]}function vt(Qt,Zt){var jt=it(Qt,Zt);return[jt[0]*et,jt[1]/et]}function Ht(Qt){return vt(0,Qt)[1]}return vt.invert=function(Qt,Zt){var jt=Ro(Ht,Zt);return[Qt/et*(me+Me/qt(jt)),jt]},vt}function Hu(){var me=.5,Me=Kt(ol),Ve=Me(me);return Ve.alpha=function(je){return arguments.length?Me(me=+je):me},Ve.scale(168.725)}function tf(me,Me){return[l(Me)*m(me),m(Me)]}function cs(){return Ut(tf).scale(249.5).clipAngle(90+t)}function Su(me,Me){return[me,Me]}function sl(me){return[me[0]/2,ha(nn(me[1]/2*Na))*Ra]}function Yl(me){return[2*me[0],2*xr(vr(me[1]*Na))*Ra]}function Xl(me){null==me&&(me=cs);var Me=me(),Ve=function Rs(){return Ut(Su).scale(152.63)}().scale(Ra).precision(0).clipAngle(null).translate([0,0]);function je(it){return Me(sl(it))}function et(it){je[it]=function(){return arguments.length?(Me[it].apply(Me,arguments),je):Me[it]()}}return Me.invert&&(je.invert=function(it){return Yl(Me.invert(it))}),je.stream=function(it){var vt=Me.stream(it),Ht=Ve.stream({point:function(Qt,Zt){vt.point(Qt/2,ha(nn(-Zt/2*Na))*Ra)},lineStart:function(){vt.lineStart()},lineEnd:function(){vt.lineEnd()},polygonStart:function(){vt.polygonStart()},polygonEnd:function(){vt.polygonEnd()}});return Ht.sphere=vt.sphere,Ht},je.rotate=function(it){return arguments.length?(Ve.rotate(it),je):Ve.rotate()},je.center=function(it){return arguments.length?(Me.center(sl(it)),je):Yl(Me.center())},et("angle"),et("clipAngle"),et("clipExtent"),et("fitExtent"),et("fitHeight"),et("fitSize"),et("fitWidth"),et("scale"),et("translate"),et("precision"),je.scale(249.5)}function Zl(me,Me){var Ve=2*Vr/Me,je=me*me;function et(it,vt){var Ht=Ai(it,vt),Qt=Ht[0],Zt=Ht[1],jt=Qt*Qt+Zt*Zt;if(jt>je){var gr=gn(jt),Ar=Ir(Zt,Qt),Fr=Ve*Rn(Ar/Ve),Xr=Ar-Fr,pn=me*qt(Xr),Cn=(me*vr(Xr)-Xr*vr(pn))/(wn-pn),qn=ll(Xr,Cn),la=(Vr-me)/yl(qn,pn,Vr);Qt=gr;var da,Ma=50;do{Qt-=da=(me+yl(qn,pn,Qt)*la-gr)/(qn(Qt)*la)}while(wt(da)>Or&&--Ma>0);Zt=Xr*vr(Qt),Qt<wn&&(Zt-=Cn*(Qt-wn));var za=vr(Fr),ci=qt(Fr);Ht[0]=Qt*ci-Zt*za,Ht[1]=Qt*za+Zt*ci}return Ht}return et.invert=function(it,vt){var Ht=it*it+vt*vt;if(Ht>je){var Qt=gn(Ht),Zt=Ir(vt,it),jt=Ve*Rn(Zt/Ve),gr=Zt-jt;it=Qt*qt(gr),vt=Qt*vr(gr);for(var Ar=it-wn,Fr=vr(it),Xr=vt/Fr,pn=it<wn?1/0:0,Cn=10;;){var qn=me*vr(Xr),la=me*qt(Xr),Ma=vr(la),da=wn-la,za=(qn-Xr*Ma)/da,ci=ll(Xr,za);if(wt(pn)<Xn||!--Cn)break;Xr-=pn=(Xr*Fr-za*Ar-vt)/(Fr-2*Ar*(da*(la+Xr*qn*qt(la)-Ma)-qn*(qn-Xr*Ma))/(da*da))}it=(Qt=me+yl(ci,la,it)*(Vr-me)/yl(ci,la,Vr))*qt(Zt=jt+Xr),vt=Qt*vr(Zt)}return Ai.invert(it,vt)},et}function ll(me,Me){return function(Ve){var je=me*qt(Ve);return Ve<wn&&(je-=Me),gn(1+je*je)}}function yl(me,Me,Ve){for(var et=(Ve-Me)/50,it=me(Me)+me(Ve),vt=1,Ht=Me;vt<50;++vt)it+=2*me(Ht+=et);return.5*it*et}function zl(){var me=6,Me=30*Na,Ve=qt(Me),je=vr(Me),et=Kt(Zl),it=et(Me,me),vt=it.stream,Qt=-qt(.01*Na),Zt=vr(.01*Na);return it.radius=function(jt){return arguments.length?(Ve=qt(Me=jt*Na),je=vr(Me),et(Me,me)):Me*Ra},it.lobes=function(jt){return arguments.length?et(Me,me=+jt):me},it.stream=function(jt){var gr=it.rotate(),Ar=vt(jt),Fr=(it.rotate([0,0]),vt(jt));return it.rotate(gr),Ar.sphere=function(){Fr.polygonStart(),Fr.lineStart();for(var Xr=0,pn=2*Vr/me,Cn=0;Xr<me;++Xr,Cn-=pn)Fr.point(Ir(Zt*qt(Cn),Qt)*Ra,ha(Zt*vr(Cn))*Ra),Fr.point(Ir(je*qt(Cn-pn/2),Ve)*Ra,ha(je*vr(Cn-pn/2))*Ra);Fr.lineEnd(),Fr.polygonEnd()},Ar},it.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function ml(me,Me,Ve,je,et,it,vt,Ht){function Qt(Zt,jt){if(!jt)return[me*Zt/Vr,0];var gr=jt*jt,Ar=me+gr*(Me+gr*(Ve+gr*je)),Fr=jt*(et-1+gr*(it-Ht+gr*vt)),Xr=(Ar*Ar+Fr*Fr)/(2*Fr),pn=Zt*ha(Ar/Xr)/Vr;return[Xr*vr(pn),jt*(1+gr*Ht)+Xr*(1-qt(pn))]}return arguments.length<8&&(Ht=0),Qt.invert=function(Zt,jt){var Fr,Xr,gr=Vr*Zt/me,Ar=jt,pn=50;do{var Cn=Ar*Ar,qn=me+Cn*(Me+Cn*(Ve+Cn*je)),la=Ar*(et-1+Cn*(it-Ht+Cn*vt)),Ma=qn*qn+la*la,da=2*la,za=Ma/da,ci=za*za,Di=ha(qn/za)/Vr,zi=gr*Di,Oi=qn*qn,bo=(2*Me+Cn*(4*Ve+6*Cn*je))*Ar,Bi=et+Cn*(3*it+5*Cn*vt),ro=(2*(qn*bo+la*(Bi-1))*da-Ma*(2*(Bi-1)))/(da*da),Ea=qt(zi),Ji=vr(zi),Jo=za*Ea,ps=za*Ji,Fs=gr/Vr*(1/gn(1-Oi/ci))*(bo*za-qn*ro)/ci,cu=ps-Zt,Es=Ar*(1+Cn*Ht)+za-Jo-jt,Wo=ro*Ji+Jo*Fs,Du=Jo*Di,fc=1+ro-(ro*Ea-ps*Fs),Wf=ps*Di,Vc=Wo*Wf-fc*Du;if(!Vc)break;gr-=Fr=(Es*Wo-cu*fc)/Vc,Ar-=Xr=(cu*Wf-Es*Du)/Vc}while((wt(Fr)>Or||wt(Xr)>Or)&&--pn>0);return[gr,Ar]},Qt}Au.invert=function(me,Me){var Ve=Me/(1+Xi);return[me&&me/(Xi*gn(1-Ve*Ve)),2*xr(Ve)]},xf.invert=function(me,Me){var Ve=xr(Me/Ja),je=qt(Ve),et=2*Ve;return[me*Ja/2/(qt(et)*je*je),et]},tf.invert=va(S),Su.invert=Su;var Vu=ml(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ul(){return Ut(Vu).scale(149.995)}var Mu=ml(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Xf(){return Ut(Mu).scale(153.93)}var Pf=ml(5/6*Vr,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Zf(){return Ut(Pf).scale(130.945)}function nu(me,Me){var Ve=me*me,je=Me*Me;return[me*(1-.162388*je)*(.87-952426e-9*Ve*Ve),Me*(1+je/12)]}function Eu(){return Ut(nu).scale(131.747)}nu.invert=function(me,Me){var it,Ve=me,je=Me,et=50;do{var vt=je*je;je-=it=(je*(1+vt/12)-Me)/(1+vt/4)}while(wt(it)>Or&&--et>0);et=50,me/=1-.162388*vt;do{var Ht=(Ht=Ve*Ve)*Ht;Ve-=it=(Ve*(.87-952426e-9*Ht)-me)/(.87-.00476213*Ht)}while(wt(it)>Or&&--et>0);return[Ve,je]};var Cu=ml(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function au(){return Ut(Cu).scale(131.087)}function Kl(me){var Me=me(wn,0)[0]-me(-wn,0)[0];function Ve(je,et){var it=je>0?-.5:.5,vt=me(je+it*Vr,et);return vt[0]-=it*Me,vt}return me.invert&&(Ve.invert=function(je,et){var it=je>0?-.5:.5,vt=me.invert(je+it*Me,et),Ht=vt[0]-it*Vr;return Ht<-Vr?Ht+=2*Vr:Ht>Vr&&(Ht-=2*Vr),vt[0]=Ht,vt}),Ve}function zo(me,Me){var Ve=Yr(me),je=Yr(Me),et=qt(Me),it=qt(me)*et,vt=vr(me)*et,Ht=vr(je*Me);me=wt(Ir(vt,Ht)),Me=ha(it),wt(me-wn)>Or&&(me%=wn);var Qt=function Ts(me,Me){if(Me===wn)return[0,0];var pn,Cn,Ve=vr(Me),je=Ve*Ve,et=je*je,it=1+et,vt=1+3*et,Ht=1-et,Qt=ha(1/gn(it)),Zt=Ht+je*it*Qt,jt=(1-Ve)/Zt,gr=gn(jt),Ar=jt*it,Fr=gn(Ar),Xr=gr*Ht;if(0===me)return[0,-(Xr+je*Fr)];var ds,qn=qt(Me),la=1/qn,Ma=2*Ve*qn,da=(-3*je+Qt*vt)*Ma,za=(-Zt*qn-(1-Ve)*da)/(Zt*Zt),Di=Ht*(.5*za/gr)-2*je*gr*Ma,zi=je*it*za+jt*vt*Ma,Oi=-la*Ma,bo=-la*zi,Bi=-2*la*Di,Ms=4*me/Vr;if(me>.222*Vr||Me<Vr/4&&me>.175*Vr){if(pn=(Xr+je*gn(Ar*(1+et)-Xr*Xr))/(1+et),me>Vr/4)return[pn,pn];var ro=pn,Ea=.5*pn;pn=.5*(Ea+ro),Cn=50;do{var Jo=pn*(Bi+Oi*gn(Ar-pn*pn))+bo*ha(pn/Fr)-Ms;if(!Jo)break;Jo<0?Ea=pn:ro=pn,pn=.5*(Ea+ro)}while(wt(ro-Ea)>Or&&--Cn>0)}else{pn=Or,Cn=25;do{var ps=pn*pn,Fs=gn(Ar-ps),cu=Bi+Oi*Fs,Es=pn*cu+bo*ha(pn/Fr)-Ms;pn-=ds=Fs?Es/(cu+(bo-Oi*ps)/Fs):0}while(wt(ds)>Or&&--Cn>0)}return[pn,-Xr-je*gn(Ar-pn*pn)]}(me>Vr/4?wn-me:me,Me);return me>Vr/4&&(Ht=Qt[0],Qt[0]=-Qt[1],Qt[1]=-Ht),Qt[0]*=Ve,Qt[1]*=-je,Qt}function rf(){return Ut(Kl(zo)).scale(239.75)}function bf(me,Me){var Ve,je,et,it,vt;if(Me<Or)return[(it=vr(me))-(Ve=Me*(me-it*(je=qt(me)))/4)*je,je+Ve*it,1-Me*it*it/2,me-Ve];if(Me>=1-Or)return Ve=(1-Me)/4,je=Ii(me),it=function Eo(me){return((me=on(2*me))-1)/(me+1)}(me),et=1/je,[it+Ve*((vt=je*Qi(me))-me)/(je*je),et-Ve*it*et*(vt-me),et+Ve*it*et*(vt+me),2*xr(on(me))-wn+Ve*(vt-me)/je];var Ht=[1,0,0,0,0,0,0,0,0],Qt=[gn(Me),0,0,0,0,0,0,0,0],Zt=0;for(je=gn(1-Me),vt=1;wt(Qt[Zt]/Ht[Zt])>Or&&Zt<8;)Ve=Ht[Zt++],Qt[Zt]=(Ve-je)/2,Ht[Zt]=(Ve+je)/2,je=gn(Ve*je),vt*=2;et=vt*Ht[Zt]*me;do{et=(ha(it=Qt[Zt]*vr(je=et)/Ht[Zt])+et)/2}while(--Zt);return[vr(et),it=qt(et),it/qt(et-je),et]}function ou(me,Me){if(!Me)return me;if(1===Me)return hn(nn(me/2+Ca));for(var Ve=1,je=gn(1-Me),et=gn(Me),it=0;wt(et)>Or;it++){if(me%Vr){var vt=xr(je*nn(me)/Ve);vt<0&&(vt+=Vr),me+=vt+~~(me/Vr)*Vr}else me+=me;et=(Ve+je)/2,je=gn(Ve*je),et=((Ve=et)-je)/2}return me/(sa(2,it)*Ve)}function ks(me,Me){var Ve=(Ka-1)/(Ka+1),je=gn(1-Ve*Ve),et=ou(wn,je*je),vt=hn(nn(Vr/4+wt(Me)/2)),Ht=on(-1*vt)/gn(Ve),Qt=function Ol(me,Me){var Ve=me*me,je=Me+1,et=1-Ve-Me*Me;return[.5*((me>=0?wn:-wn)-Ir(et,2*me)),-.25*hn(et*et+4*Ve)+.5*hn(je*je+Ve)]}(Ht*qt(-1*me),Ht*vr(-1*me)),Zt=function iu(me,Me,Ve){var je=wt(me),it=Qi(wt(Me));if(je){var vt=1/vr(je),Ht=1/(nn(je)*nn(je)),Qt=-(Ht+Ve*(it*it*vt*vt)-1+Ve),jt=(-Qt+gn(Qt*Qt-(Ve-1)*Ht*4))/2;return[ou(xr(1/gn(jt)),Ve)*Yr(me),ou(xr(gn((jt/Ht-1)/Ve)),1-Ve)*Yr(Me)]}return[0,ou(xr(it),1-Ve)*Yr(Me)]}(Qt[0],Qt[1],je*je);return[-Zt[1],(Me>=0?1:-1)*(.5*et-Zt[0])]}function ju(){return Ut(Kl(ks)).scale(151.496)}function Nl(me){var Me=vr(me),Ve=qt(me),je=Wu(me);function et(it,vt){var Ht=je(it,vt);it=Ht[0],vt=Ht[1];var Qt=vr(vt),Zt=qt(vt),jt=qt(it),gr=yi(Me*Qt+Ve*Zt*jt),Ar=vr(gr),Fr=wt(Ar)>Or?gr/Ar:1;return[Fr*Ve*vr(it),(wt(it)>wn?Fr:-Fr)*(Me*Zt-Ve*Qt*jt)]}return je.invert=Wu(-me),et.invert=function(it,vt){var Ht=gn(it*it+vt*vt),Qt=-vr(Ht),Zt=qt(Ht),jt=Ht*Zt,gr=-vt*Qt,Ar=Ht*Me,Fr=gn(jt*jt+gr*gr-Ar*Ar),Xr=Ir(jt*Ar+gr*Fr,gr*Ar-jt*Fr),pn=(Ht>wn?-1:1)*Ir(it*Qt,Ht*qt(Xr)*Zt+vt*vr(Xr)*Qt);return je.invert(pn,Xr)},et}function Wu(me){var Me=vr(me),Ve=qt(me);return function(je,et){var it=qt(et),vt=qt(je)*it,Ht=vr(je)*it,Qt=vr(et);return[Ir(Ht,vt*Ve-Qt*Me),ha(Qt*Ve+vt*Me)]}}function pt(){var me=0,Me=Kt(Nl),Ve=Me(me),je=Ve.rotate,et=Ve.stream,it=function ge(){var je,et,me=mt([0,0]),Me=mt(90),Ve=mt(6),it={point:function vt(Qt,Zt){je.push(Qt=et(Qt,Zt)),Qt[0]*=r,Qt[1]*=r}};function Ht(){var Qt=me.apply(this,arguments),Zt=Me.apply(this,arguments)*o,jt=Ve.apply(this,arguments)*o;return je=[],et=zt(-Qt[0]*o,-Qt[1]*o,0).invert,Se(it,Zt,jt,1),Qt={type:"Polygon",coordinates:[je]},je=et=null,Qt}return Ht.center=function(Qt){return arguments.length?(me="function"==typeof Qt?Qt:mt([+Qt[0],+Qt[1]]),Ht):me},Ht.radius=function(Qt){return arguments.length?(Me="function"==typeof Qt?Qt:mt(+Qt),Ht):Me},Ht.precision=function(Qt){return arguments.length?(Ve="function"==typeof Qt?Qt:mt(+Qt),Ht):Ve},Ht}();return Ve.parallel=function(vt){if(!arguments.length)return me*Ra;var Ht=Ve.rotate();return Me(me=vt*Na).rotate(Ht)},Ve.rotate=function(vt){return arguments.length?(je.call(Ve,[vt[0],vt[1]-me*Ra]),it.center([-vt[0],-vt[1]]),Ve):((vt=je.call(Ve))[1]+=me*Ra,vt)},Ve.stream=function(vt){return(vt=et(vt)).sphere=function(){vt.polygonStart();var gr,Qt=it.radius(89.99)().coordinates[0],Zt=Qt.length-1,jt=-1;for(vt.lineStart();++jt<Zt;)vt.point((gr=Qt[jt])[0],gr[1]);for(vt.lineEnd(),Zt=(Qt=it.radius(90.01)().coordinates[0]).length-1,vt.lineStart();--jt>=0;)vt.point((gr=Qt[jt])[0],gr[1]);vt.lineEnd(),vt.polygonEnd()},vt},Ve.scale(79.4187).parallel(45).clipAngle(179.999)}zo.invert=function(me,Me){wt(me)>1&&(me=2*Yr(me)-me),wt(Me)>1&&(Me=2*Yr(Me)-Me);var Ve=Yr(me),je=Yr(Me),et=-Ve*me,it=-je*Me,vt=it/et<1,Ht=function Gu(me,Me){for(var Ve=0,je=1,et=.5,it=50;;){var vt=et*et,Ht=gn(et),Qt=ha(1/gn(1+vt)),Zt=1-vt+et*(1+vt)*Qt,jt=(1-Ht)/Zt,gr=gn(jt),Ar=jt*(1+vt),Fr=gr*(1-vt),pn=gn(Ar-me*me),Cn=Me+Fr+et*pn;if(wt(je-Ve)<Xn||0==--it||0===Cn)break;Cn>0?Ve=et:je=et,et=.5*(Ve+je)}if(!it)return null;var qn=ha(Ht),la=qt(qn),Ma=1/la,da=2*Ht*la,za=(-3*et+Qt*(1+3*vt))*da,ci=(-Zt*la-(1-Ht)*za)/(Zt*Zt),zi=.5*ci/gr*(1-vt)-2*et*gr*da,Bi=-Ma*(et*(1+vt)*ci+jt*(1+3*vt)*da);return[Vr/4*(me*(-2*Ma*zi+-Ma*da*pn)+Bi*ha(me/gn(Ar))),qn]}(vt?it:et,vt?et:it),Qt=Ht[0],Zt=Ht[1],jt=qt(Zt);return vt&&(Qt=-wn-Qt),[Ve*(Ir(vr(Qt)*jt,-vr(Zt))+Vr),je*ha(qt(Qt)*jt)]},ks.invert=function(me,Me){var Ve=(Ka-1)/(Ka+1),je=gn(1-Ve*Ve),vt=function Lu(me,Me,Ve){var je,et,it;return me?(je=bf(me,Ve),Me?(it=(et=bf(Me,1-Ve))[1]*et[1]+Ve*je[0]*je[0]*et[0]*et[0],[[je[0]*et[2]/it,je[1]*je[2]*et[0]*et[1]/it],[je[1]*et[1]/it,-je[0]*je[2]*et[0]*et[2]/it],[je[2]*et[1]*et[2]/it,-Ve*je[0]*je[1]*et[0]/it]]):[[je[0],0],[je[1],0],[je[2],0]]):[[0,(et=bf(Me,1-Ve))[0]/et[1]],[1/et[1],0],[et[2]/et[1],0]]}(.5*ou(wn,je*je)-Me,-me,je*je),Ht=function fl(me,Me){var Ve=Me[0]*Me[0]+Me[1]*Me[1];return[(me[0]*Me[0]+me[1]*Me[1])/Ve,(me[1]*Me[0]-me[0]*Me[1])/Ve]}(vt[0],vt[1]);return[Ir(Ht[1],Ht[0])/-1,2*xr(on(-.5*hn(Ve*Ht[0]*Ht[0]+Ve*Ht[1]*Ht[1])))-wn]};var yr=ha(1-1/3)*Ra,er=Fo(0);function Mr(me){var Me=yr*Na,Ve=co(Vr,Me)[0]-co(-Vr,Me)[0],je=er(0,Me)[1],et=co(0,Me)[1],it=Ja-et,vt=si/me,Ht=4/si,Qt=je+it*it*4/si;function Zt(jt,gr){var Ar,Fr=wt(gr);if(Fr>Me){var Xr=Sn(me-1,An(0,an((jt+Vr)/vt)));(Ar=co(jt+=Vr*(me-1)/me-Xr*vt,Fr))[0]=Ar[0]*si/Ve-si*(me-1)/(2*me)+Xr*si/me,Ar[1]=je+4*(Ar[1]-et)*it/si,gr<0&&(Ar[1]=-Ar[1])}else Ar=er(jt,gr);return Ar[0]*=Ht,Ar[1]/=Qt,Ar}return Zt.invert=function(jt,gr){jt/=Ht;var Ar=wt(gr*=Qt);if(Ar>je){var Fr=Sn(me-1,An(0,an((jt+Vr)/vt)));jt=(jt+Vr*(me-1)/me-Fr*vt)*Ve/si;var Xr=co.invert(jt,.25*(Ar-je)*si/it+et);return Xr[0]-=Vr*(me-1)/me-Fr*vt,gr<0&&(Xr[1]=-Xr[1]),Xr}return er.invert(jt,gr)},Zt}function Zr(me,Me){return[me,1&Me?90-Or:yr]}function un(me,Me){return[me,1&Me?-90+Or:-yr]}function fn(me){return[me[0]*(1-Or),me[1]]}function Wn(){var me=4,Me=Kt(Mr),Ve=Me(me),je=Ve.stream;return Ve.lobes=function(et){return arguments.length?Me(me=+et):me},Ve.stream=function(et){var it=Ve.rotate(),vt=je(et),Ht=(Ve.rotate([0,0]),je(et));return Ve.rotate(it),vt.sphere=function(){It(function Dn(me){var Me=[].concat(Pe(-180,180+me/2,me).map(Zr),Pe(180,-180-me/2,-me).map(un));return{type:"Polygon",coordinates:[180===me?Me.map(fn):Me]}}(180/me),Ht)},vt},Ve.scale(239.75)}function yn(me){var it,Me=1+me,je=ha(vr(1/Me)),et=2*gn(Vr/(it=Vr+4*je*Me)),vt=.5*et*(Me+gn(me*(2+me))),Ht=me*me,Qt=Me*Me;function Zt(jt,gr){var Fr,Xr,Ar=1-vr(gr);if(Ar&&Ar<2){var qn,pn=wn-gr,Cn=25;do{var la=vr(pn),Ma=qt(pn),da=je+Ir(la,Me-Ma),za=1+Qt-2*Me*Ma;pn-=qn=(pn-Ht*je-Me*la+za*da-.5*Ar*it)/(2*Me*la*da)}while(wt(qn)>Xn&&--Cn>0);Fr=et*gn(za),Xr=jt*da/Vr}else Fr=et*(me+Ar),Xr=jt*je/Vr;return[Fr*vr(Xr),vt-Fr*qt(Xr)]}return Zt.invert=function(jt,gr){var Ar=jt*jt+(gr-=vt)*gr,Fr=(1+Qt-Ar/(et*et))/(2*Me),Xr=yi(Fr),pn=vr(Xr),Cn=je+Ir(pn,Me-Fr);return[ha(jt/gn(Ar))*Vr/Cn,ha(1-2*(Xr-Ht*je-Me*pn+(1+Qt-2*Me*Fr)*Cn)/it)]},Zt}function _n(){var me=1,Me=Kt(yn),Ve=Me(me);return Ve.ratio=function(je){return arguments.length?Me(me=+je):me},Ve.scale(167.774).center([0,18.67])}var Mn=.7109889596207567,Un=.0528035274542;function ta(me,Me){return Me>-Mn?((me=rl(me,Me))[1]+=Un,me):Vs(me,Me)}function Qa(){return Ut(ta).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function ja(me,Me){return wt(Me)>Mn?((me=rl(me,Me))[1]-=Me>0?Un:-Un,me):Vs(me,Me)}function ii(){return Ut(ja).scale(152.63)}function oi(me,Me,Ve,je){var et=gn(4*Vr/(2*Ve+(1+me-Me/2)*vr(2*Ve)+(me+Me)/2*vr(4*Ve)+Me/2*vr(6*Ve))),it=gn(je*vr(Ve)*gn((1+me*qt(2*Ve)+Me*qt(4*Ve))/(1+me+Me))),vt=Ve*Qt(1);function Ht(gr){return gn(1+me*qt(2*gr)+Me*qt(4*gr))}function Qt(gr){var Ar=gr*Ve;return(2*Ar+(1+me-Me/2)*vr(2*Ar)+(me+Me)/2*vr(4*Ar)+Me/2*vr(6*Ar))/Ve}function Zt(gr){return Ht(gr)*vr(gr)}var jt=function(gr,Ar){var Fr=Ve*Ro(Qt,vt*vr(Ar)/Ve,Ar/Vr);isNaN(Fr)&&(Fr=Ve*Yr(Ar));var Xr=et*Ht(Fr);return[Xr*it*gr/Vr*qt(Fr),Xr/it*vr(Fr)]};return jt.invert=function(gr,Ar){var Fr=Ro(Zt,Ar*it/et);return[gr*Vr/(qt(Fr)*et*it*Ht(Fr)),ha(Ve*Qt(Fr/Ve)/vt)]},0===Ve&&(et=gn(je/Vr),(jt=function(gr,Ar){return[gr*et,vr(Ar)/et]}).invert=function(gr,Ar){return[gr/et,ha(Ar*et)]}),jt}function fa(){var me=1,Me=0,Ve=45*Na,je=2,et=Kt(oi),it=et(me,Me,Ve,je);return it.a=function(vt){return arguments.length?et(me=+vt,Me,Ve,je):me},it.b=function(vt){return arguments.length?et(me,Me=+vt,Ve,je):Me},it.psiMax=function(vt){return arguments.length?et(me,Me,Ve=+vt*Na,je):Ve*Ra},it.ratio=function(vt){return arguments.length?et(me,Me,Ve,je=+vt):je},it.scale(180.739)}function pa(me,Me,Ve,je,et,it,vt,Ht,Qt,Zt,jt){if(jt.nanEncountered)return NaN;var gr,Ar,Fr,Xr,pn,Cn,qn,la,Ma,da;if(Ar=me(Me+.25*(gr=Ve-Me)),Fr=me(Ve-.25*gr),isNaN(Ar))jt.nanEncountered=!0;else{if(!isNaN(Fr))return da=((Cn=(Xr=gr*(je+4*Ar+et)/12)+(pn=gr*(et+4*Fr+it)/12))-vt)/15,Zt>Qt?(jt.maxDepthCount++,Cn+da):Math.abs(da)<Ht?Cn+da:(la=pa(me,Me,qn=Me+.5*gr,je,Ar,et,Xr,.5*Ht,Qt,Zt+1,jt),isNaN(la)?(jt.nanEncountered=!0,NaN):(Ma=pa(me,qn,Ve,et,Fr,it,pn,.5*Ht,Qt,Zt+1,jt),isNaN(Ma)?(jt.nanEncountered=!0,NaN):la+Ma));jt.nanEncountered=!0}}function ti(me,Me,Ve,je,et){void 0===je&&(je=1e-8),void 0===et&&(et=20);var vt=me(Me),Ht=me(.5*(Me+Ve)),Qt=me(Ve);return pa(me,Me,Ve,vt,Ht,Qt,(vt+4*Ht+Qt)*(Ve-Me)/6,je,et,1,{maxDepthCount:0,nanEncountered:!1})}function pi(me,Me,Ve){function je(Fr){return me+(1-me)*sa(1-sa(Fr,Me),1/Me)}function et(Fr){return ti(je,0,Fr,1e-4)}for(var it=1/et(1),vt=1e3,Ht=(1+1e-8)*it,Qt=[],Zt=0;Zt<=vt;Zt++)Qt.push(et(Zt/vt)*Ht);function jt(Fr){var Xr=0,pn=vt,Cn=500;do{Qt[Cn]>Fr?pn=Cn:Xr=Cn,Cn=Xr+pn>>1}while(Cn>Xr);var qn=Qt[Cn+1]-Qt[Cn];return qn&&(qn=(Fr-Qt[Cn+1])/qn),(Cn+1+qn)/vt}var gr=2*jt(1)/Vr*it/Ve,Ar=function(Fr,Xr){var pn=jt(wt(vr(Xr))),Cn=je(pn)*Fr;return pn/=gr,[Cn,Xr>=0?pn:-pn]};return Ar.invert=function(Fr,Xr){var pn;return wt(Xr*=gr)<1&&(pn=Yr(Xr)*ha(et(wt(Xr))*it)),[Fr/je(wt(Xr)),pn]},Ar}function Hi(){var me=0,Me=2.5,Ve=1.183136,je=Kt(pi),et=je(me,Me,Ve);return et.alpha=function(it){return arguments.length?je(me=+it,Me,Ve):me},et.k=function(it){return arguments.length?je(me,Me=+it,Ve):Me},et.gamma=function(it){return arguments.length?je(me,Me,Ve=+it):Ve},et.scale(152.63)}function no(me,Me){return wt(me[0]-Me[0])<Or&&wt(me[1]-Me[1])<Or}function Zi(me,Me){for(var it,vt,Ht,Ve=-1,je=me.length,et=me[0],Qt=[];++Ve<je;){vt=((it=me[Ve])[0]-et[0])/Me,Ht=(it[1]-et[1])/Me;for(var Zt=0;Zt<Me;++Zt)Qt.push([et[0]+Zt*vt,et[1]+Zt*Ht]);et=it}return Qt.push(it),Qt}function Ki(me){var Ve,je,et,it,vt,Ht,Qt,Me=[],Zt=me[0].length;for(Qt=0;Qt<Zt;++Qt)je=(Ve=me[0][Qt])[0][0],et=Ve[0][1],it=Ve[1][1],vt=Ve[2][0],Ht=Ve[2][1],Me.push(Zi([[je+Or,et+Or],[je+Or,it-Or],[vt-Or,it-Or],[vt-Or,Ht+Or]],30));for(Qt=me[1].length-1;Qt>=0;--Qt)je=(Ve=me[1][Qt])[0][0],et=Ve[0][1],it=Ve[1][1],vt=Ve[2][0],Ht=Ve[2][1],Me.push(Zi([[vt-Or,Ht-Or],[vt-Or,it+Or],[je+Or,it+Or],[je+Or,et-Or]],30));return{type:"Polygon",coordinates:[ze(Me)]}}function mi(me,Me,Ve){var je,et;function it(Qt,Zt){for(var jt=Zt<0?-1:1,gr=Me[+(Zt<0)],Ar=0,Fr=gr.length-1;Ar<Fr&&Qt>gr[Ar][2][0];++Ar);var Xr=me(Qt-gr[Ar][1][0],Zt);return Xr[0]+=me(gr[Ar][1][0],jt*Zt>jt*gr[Ar][0][1]?gr[Ar][0][1]:Zt)[0],Xr}Ve?it.invert=Ve(it):me.invert&&(it.invert=function(Qt,Zt){for(var jt=et[+(Zt<0)],gr=Me[+(Zt<0)],Ar=0,Fr=jt.length;Ar<Fr;++Ar){var Xr=jt[Ar];if(Xr[0][0]<=Qt&&Qt<Xr[1][0]&&Xr[0][1]<=Zt&&Zt<Xr[1][1]){var pn=me.invert(Qt-me(gr[Ar][1][0],0)[0],Zt);return pn[0]+=gr[Ar][1][0],no(it(pn[0],pn[1]),[Qt,Zt])?pn:null}}});var vt=Ut(it),Ht=vt.stream;return vt.stream=function(Qt){var Zt=vt.rotate(),jt=Ht(Qt),gr=(vt.rotate([0,0]),Ht(Qt));return vt.rotate(Zt),jt.sphere=function(){It(je,gr)},jt},vt.lobes=function(Qt){return arguments.length?(je=Ki(Qt),Me=Qt.map(function(Zt){return Zt.map(function(jt){return[[jt[0][0]*Na,jt[0][1]*Na],[jt[1][0]*Na,jt[1][1]*Na],[jt[2][0]*Na,jt[2][1]*Na]]})}),et=Me.map(function(Zt){return Zt.map(function(jt){var pn,gr=me(jt[0][0],jt[0][1])[0],Ar=me(jt[2][0],jt[2][1])[0],Fr=me(jt[1][0],jt[0][1])[1],Xr=me(jt[1][0],jt[1][1])[1];return Fr>Xr&&(pn=Fr,Fr=Xr,Xr=pn),[[gr,Fr],[Ar,Xr]]})}),vt):Me.map(function(Zt){return Zt.map(function(jt){return[[jt[0][0]*Ra,jt[0][1]*Ra],[jt[1][0]*Ra,jt[1][1]*Ra],[jt[2][0]*Ra,jt[2][1]*Ra]]})})},null!=Me&&vt.lobes(Me),vt}ta.invert=function(me,Me){return Me>-Mn?rl.invert(me,Me-Un):Vs.invert(me,Me)},ja.invert=function(me,Me){return wt(Me)>Mn?rl.invert(me,Me+(Me>0?Un:-Un)):Vs.invert(me,Me)};var So=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Co(){return mi(pu,So).scale(160.857)}var to=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ia(){return mi(ja,to).scale(152.63)}var Ri=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Uo(){return mi(rl,Ri).scale(169.529)}var jo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function os(){return mi(rl,jo).scale(169.529).rotate([20,0])}var Bl=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function cl(){return mi(ta,Bl,yo).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ys=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function xl(){return mi(Vs,Ys).scale(152.63).rotate([-20,0])}function _o(me,Me){return[3/si*me*gn(Vr*Vr/3-Me*Me),Me]}function _s(){return Ut(_o).scale(158.837)}function If(me){function Me(Ve,je){if(wt(wt(je)-wn)<Or)return[0,je<0?-2:2];var et=vr(je),it=sa((1+et)/(1-et),me/2),vt=.5*(it+1/it)+qt(Ve*=me);return[2*vr(Ve)/vt,(it-1/it)/vt]}return Me.invert=function(Ve,je){var et=wt(je);if(wt(et-2)<Or)return Ve?null:[0,Yr(je)*wn];if(et>2)return null;var it=(Ve/=2)*Ve,vt=(je/=2)*je,Ht=2*je/(1+it+vt);return Ht=sa((1+Ht)/(1-Ht),1/me),[Ir(2*Ve,1-it-vt)/me,ha((Ht-1)/(Ht+1))]},Me}function Yu(){var me=.5,Me=Kt(If),Ve=Me(me);return Ve.spacing=function(je){return arguments.length?Me(me=+je):me},Ve.scale(124.75)}_o.invert=function(me,Me){return[si/3*me/gn(Vr*Vr/3-Me*Me),Me]};var nf=Vr/Ka;function af(me,Me){return[me*(1+gn(qt(Me)))/2,Me/(qt(Me/2)*qt(me/6))]}function Df(){return Ut(af).scale(97.2672)}function Rf(me,Me){var Ve=me*me,je=Me*Me;return[me*(.975534+je*(-.0143059*Ve-.119161+-.0547009*je)),Me*(1.00384+Ve*(.0802894+-.02855*je+199025e-9*Ve)+je*(.0998909+-.0491032*je))]}function of(){return Ut(Rf).scale(139.98)}function sf(me,Me){return[vr(me)/qt(Me),nn(Me)*qt(me)]}function Kf(){return Ut(sf).scale(144.049).clipAngle(89.999)}function Bf(me){var Me=qt(me),Ve=nn(Ca+me/2);function je(et,it){var vt=it-me,Ht=wt(vt)<Or?et*Me:wt(Ht=Ca+it/2)<Or||wt(wt(Ht)-wn)<Or?0:et*vt/hn(nn(Ht)/Ve);return[Ht,vt]}return je.invert=function(et,it){var vt,Ht=it+me;return[wt(it)<Or?et/Me:wt(vt=Ca+Ht/2)<Or||wt(wt(vt)-wn)<Or?0:et*hn(nn(vt)/Ve)/it,Ht]},je}function Jf(){return Zo(Bf).parallel(40).scale(158.837)}function Xu(me,Me){return[me,1.25*hn(nn(Ca+.4*Me))]}function Uf(){return Ut(Xu).scale(108.318)}function Hf(me){var Me=me.length-1;function Ve(je,et){for(var Fr,it=qt(et),vt=2/(1+it*qt(je)),Ht=vt*it*vr(je),Qt=vt*vr(et),Zt=Me,jt=me[Zt],gr=jt[0],Ar=jt[1];--Zt>=0;)gr=(jt=me[Zt])[0]+Ht*(Fr=gr)-Qt*Ar,Ar=jt[1]+Ht*Ar+Qt*Fr;return[gr=Ht*(Fr=gr)-Qt*Ar,Ar=Ht*Ar+Qt*Fr]}return Ve.invert=function(je,et){var it=20,vt=je,Ht=et;do{for(var Xr,Qt=Me,Zt=me[Qt],jt=Zt[0],gr=Zt[1],Ar=0,Fr=0;--Qt>=0;)Ar=jt+vt*(Xr=Ar)-Ht*Fr,Fr=gr+vt*Fr+Ht*Xr,jt=(Zt=me[Qt])[0]+vt*(Xr=jt)-Ht*gr,gr=Zt[1]+vt*gr+Ht*Xr;var Cn,qn,pn=(Ar=jt+vt*(Xr=Ar)-Ht*Fr)*Ar+(Fr=gr+vt*Fr+Ht*Xr)*Fr;vt-=Cn=((jt=vt*(Xr=jt)-Ht*gr-je)*Ar+(gr=vt*gr+Ht*Xr-et)*Fr)/pn,Ht-=qn=(gr*Ar-jt*Fr)/pn}while(wt(Cn)+wt(qn)>1e-12&&--it>0);if(it){var la=gn(vt*vt+Ht*Ht),Ma=2*xr(.5*la),da=vr(Ma);return[Ir(vt*da,la*qt(Ma)),la?ha(Ht*da/la):0]}},Ve}af.invert=function(me,Me){var Ve=wt(me),je=wt(Me),et=Or,it=wn;je<nf?it*=je/nf:et+=6*yi(nf/je);for(var vt=0;vt<25;vt++){var Ht=vr(it),Qt=gn(qt(it)),Zt=vr(it/2),jt=qt(it/2),gr=vr(et/6),Ar=qt(et/6),Fr=.5*et*(1+Qt)-Ve,Xr=it/(jt*Ar)-je,pn=Qt?-.25*et*Ht/Qt:0,Cn=.5*(1+Qt),qn=(1+.5*it*Zt/jt)/(jt*Ar),la=it/jt*(gr/6)/(Ar*Ar),Ma=pn*la-qn*Cn,da=(Fr*la-Xr*Cn)/Ma,za=(Xr*pn-Fr*qn)/Ma;if(it-=da,et-=za,wt(da)<Or&&wt(za)<Or)break}return[me<0?-et:et,Me<0?-it:it]},Rf.invert=function(me,Me){var Ve=Yr(me)*Vr,je=Me/2,et=50;do{var it=Ve*Ve,vt=je*je,Ht=Ve*je,Qt=Ve*(.975534+vt*(-.0143059*it-.119161+-.0547009*vt))-me,Zt=je*(1.00384+it*(.0802894+-.02855*vt+199025e-9*it)+vt*(.0998909+-.0491032*vt))-Me,jt=.975534-vt*(.119161+3*it*.0143059+.0547009*vt),gr=-Ht*(.238322+.2188036*vt+.0286118*it),Ar=Ht*(.1605788+7961e-7*it+-.0571*vt),Fr=1.00384+it*(.0802894+199025e-9*it)+vt*(3*(.0998909-.02855*it)-.245516*vt),Xr=gr*Ar-Fr*jt,pn=(Zt*gr-Qt*Fr)/Xr,Cn=(Qt*Ar-Zt*jt)/Xr;Ve-=pn,je-=Cn}while((wt(pn)>Or||wt(Cn)>Or)&&--et>0);return et&&[Ve,je]},sf.invert=function(me,Me){var Ve=me*me,et=Me*Me+1,it=Ve+et,vt=me?Ba*gn((it-gn(it*it-4*Ve))/Ve):1/gn(et);return[ha(me*vt),Yr(Me)*yi(vt)]},Xu.invert=function(me,Me){return[me,2.5*xr(on(.8*Me))-.625*Vr]};var Vf=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],rc=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],nc=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Qf=[[.9245,0],[0,0],[.01943,0]],lf=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Xs(){return Vi(Vf,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Mo(){return Vi(rc,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Jl(){return Vi(nc,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function bl(){return Vi(Qf,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function lo(){return Vi(lf,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Vi(me,Me){var Ve=Ut(Hf(me)).rotate(Me).clipAngle(90),je=st(Me),et=Ve.center;return delete Ve.rotate,Ve.center=function(it){return arguments.length?et(je(it)):je.invert(et())},Ve}var $i=gn(6),Pu=gn(7);function wl(me,Me){var Ve=ha(7*vr(Me)/(3*$i));return[$i*me*(2*qt(2*Ve/3)-1)/Pu,9*vr(Ve/3)/Pu]}function uf(){return Ut(wl).scale(164.859)}function Ul(me,Me){for(var it,Ve=(1+Ba)*vr(Me),je=Me,et=0;et<25&&(je-=it=(vr(je/2)+vr(je)-Ve)/(.5*qt(je/2)+qt(je)),!(wt(it)<Or));et++);return[me*(1+2*qt(je)/qt(je/2))/(3*Ka),2*gn(3)*vr(je/2)/gn(2+Ka)]}function Tl(){return Ut(Ul).scale(188.209)}function Zs(me,Me){for(var vt,Ve=gn(6/(4+Vr)),je=(1+Vr/4)*vr(Me),et=Me/2,it=0;it<25&&(et-=vt=(et/2+vr(et)-je)/(.5+qt(et)),!(wt(vt)<Or));it++);return[Ve*(.5+qt(et))*me/1.5,Ve*et]}function Gf(){return Ut(Zs).scale(166.518)}function su(me,Me){var Ve=Me*Me,je=Ve*Ve;return[me*(.8707-.131979*Ve+je*(je*(.003971*Ve-.001529*je)-.013791)),Me*(1.007226+Ve*(.015085+je*(.028874*Ve-.044475-.005916*je)))]}function lu(){return Ut(su).scale(175.295)}function Wa(me,Me){var Ve=Me*Me,je=Ve*Ve,et=Ve*je;return[me*(.84719-.13063*Ve+et*et*(.05494*Ve-.04515-.02326*je+.00331*et)),Me*(1.01183+je*je*(.01926*Ve-.02625-.00396*je))]}function ns(){return Ut(Wa).scale(175.295)}function Zu(me,Me){return[me*(1+qt(Me))/2,2*(Me-nn(Me/2))]}function jf(){return Ut(Zu).scale(152.63)}wl.invert=function(me,Me){var Ve=3*ha(Me*Pu/9);return[me*Pu/($i*(2*qt(2*Ve/3)-1)),ha(3*vr(Ve)*$i/7)]},Ul.invert=function(me,Me){var Ve=Me*gn(2+Ka)/(2*gn(3)),je=2*ha(Ve);return[3*Ka*me/(1+2*qt(je)/qt(je/2)),ha((Ve+vr(je))/(1+Ba))]},Zs.invert=function(me,Me){var Ve=gn(6/(4+Vr)),je=Me/Ve;return wt(wt(je)-wn)<Or&&(je=je<0?-wn:wn),[1.5*me/(Ve*(.5+qt(je))),ha((je/2+vr(je))/(1+Vr/4))]},su.invert=function(me,Me){var et,Ve=Me,je=25;do{var it=Ve*Ve,vt=it*it;Ve-=et=(Ve*(1.007226+it*(.015085+vt*(.028874*it-.044475-.005916*vt)))-Me)/(1.007226+it*(.045255+vt*(.259866*it-.311325-.005916*11*vt)))}while(v(et)>t&&--je>0);return[me/(.8707+(it=Ve*Ve)*(it*(it*it*it*(.003971-.001529*it)-.013791)-.131979)),Ve]},Wa.invert=function(me,Me){var et,it,vt,Ht,Ve=Me,je=25;do{Ve-=et=(Ve*(1.01183+(vt=(it=Ve*Ve)*it)*vt*(.01926*it-.02625-.00396*vt))-Me)/(1.01183+vt*vt*(.21186*it-.23625+-.05148*vt))}while(wt(et)>Xn&&--je>0);return[me/(.84719-.13063*(it=Ve*Ve)+(Ht=it*(vt=it*it))*Ht*(.05494*it-.04515-.02326*vt+.00331*Ht)),Ve]},Zu.invert=function(me,Me){for(var Ve=Me/2,je=0,et=1/0;je<10&&wt(et)>Or;++je){var it=qt(Me/2);Me-=et=(Me-nn(Me/2)-Ve)/(1-.5/(it*it))}return[2*me/(1+qt(Me)),Me]};var le=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function xe(){return mi(Os(1/0),le).rotate([20,0]).scale(152.63)}function Re(me,Me){var Ve=vr(Me),je=qt(Me),et=Yr(me);if(0===me||wt(Me)===wn)return[0,Me];if(0===Me)return[me,0];if(wt(me)===wn)return[me*je,wn*Ve];var it=Vr/(2*me)-2*me/Vr,vt=2*Me/Vr,Ht=(1-vt*vt)/(Ve-vt),Qt=it*it,Zt=Ht*Ht,jt=1+Qt/Zt,gr=1+Zt/Qt,Ar=(it*Ve/Ht-it/2)/jt,Fr=(Zt*Ve/Qt+Ht/2)/gr,pn=Fr*Fr-(Zt*Ve*Ve/Qt+Ht*Ve-1)/gr;return[wn*(Ar+gn(Ar*Ar+je*je/jt)*et),wn*(Fr+gn(pn<0?0:pn)*Yr(-Me*it)*et)]}function Ue(){return Ut(Re).scale(127.267)}Re.invert=function(me,Me){var Ve=(me/=wn)*me,et=Ve+(Me/=wn)*Me,it=Vr*Vr;return[me?(et-1+gn((1-et)*(1-et)+4*Ve))/(2*me)*wn:0,Ro(function(vt){return et*(Vr*vr(vt)-2*vt)*Vr+4*vt*vt*(Me-vr(vt))+2*Vr*vt-it*Me},0)]};var Je=1.0148,tt=.23185,Lt=-.14499,yt=.02406,Dr=1.790857183;function tn(me,Me){var Ve=Me*Me;return[me,Me*(Je+Ve*Ve*(tt+Ve*(Lt+yt*Ve)))]}function sn(){return Ut(tn).scale(139.319)}function _r(me,Me){if(wt(Me)<Or)return[me,0];var Ve=nn(Me),je=me*vr(Me);return[vr(je)/Ve,Me+(1-qt(je))/Ve]}function Gr(){return Ut(_r).scale(103.74)}tn.invert=function(me,Me){Me>Dr?Me=Dr:Me<-Dr&&(Me=-Dr);var je,Ve=Me;do{var et=Ve*Ve;Ve-=je=(Ve*(Je+et*et*(tt+et*(Lt+yt*et)))-Me)/(1.0148+et*et*(1.1592500000000001+et*(.21654*et-1.01493)))}while(wt(je)>Or);return[me,Ve]},_r.invert=function(me,Me){if(wt(Me)<Or)return[me,0];var it,Ve=me*me+Me*Me,je=.5*Me,et=10;do{var vt=nn(je),Ht=1/qt(je),Qt=Ve-2*Me*je+je*je;je-=it=(vt*Qt+2*(je-Me))/(2+Qt*Ht*Ht+2*(je-Me)*vt)}while(wt(it)>Or&&--et>0);return vt=nn(je),[(wt(Me)<wt(je+1/vt)?ha(me*vt):Yr(Me)*Yr(me)*(yi(wt(me*vt))+wn))/vr(je),je]};var en,Qr,Vn,Aa,La,Jr=_(),qr=_(),xa={point:M,lineStart:M,lineEnd:M,polygonStart:function(){Jr.reset(),xa.lineStart=Ya,xa.lineEnd=Ga},polygonEnd:function(){var me=+Jr;qr.add(me<0?a+me:me),this.lineStart=this.lineEnd=this.point=M},sphere:function(){qr.add(a)}};function Ya(){xa.point=ui}function Ga(){Za(en,Qr)}function ui(me,Me){xa.point=Za,en=me,Qr=Me,Vn=me*=o,Aa=l(Me=(Me*=o)/2+u),La=m(Me)}function Za(me,Me){var Ve=(me*=o)-Vn,je=Ve>=0?1:-1,et=je*Ve,it=l(Me=(Me*=o)/2+u),vt=m(Me),Ht=La*vt,Qt=Aa*it+Ht*l(et),Zt=Ht*je*m(et);Jr.add(f(Zt,Qt)),Vn=me,Aa=it,La=vt}var hi,Yi,ai,ia,vi,Si,Pi,uo,wr,Nr,Et=_(),vn={point:bn,lineStart:Tn,lineEnd:Gn,polygonStart:function(){vn.point=ba,vn.lineStart=wa,vn.lineEnd=Qn,Et.reset(),xa.polygonStart()},polygonEnd:function(){xa.polygonEnd(),vn.point=bn,vn.lineStart=Tn,vn.lineEnd=Gn,Jr<0?(hi=-(ai=180),Yi=-(ia=90)):Et>t?ia=90:Et<-t&&(Yi=-90),Nr[0]=hi,Nr[1]=ai},sphere:function(){hi=-(ai=180),Yi=-(ia=90)}};function bn(me,Me){wr.push(Nr=[hi=me,ai=me]),Me<Yi&&(Yi=Me),Me>ia&&(ia=Me)}function xn(me,Me){var Ve=U([me*o,Me*o]);if(uo){var je=j(uo,Ve),it=j([je[1],-je[0],0],je);B(it),it=O(it);var Zt,vt=me-vi,Ht=vt>0?1:-1,Qt=it[0]*r*Ht,jt=v(vt)>180;jt^(Ht*vi<Qt&&Qt<Ht*me)?(Zt=it[1]*r)>ia&&(ia=Zt):jt^(Ht*vi<(Qt=(Qt+360)%360-180)&&Qt<Ht*me)?(Zt=-it[1]*r)<Yi&&(Yi=Zt):(Me<Yi&&(Yi=Me),Me>ia&&(ia=Me)),jt?me<vi?Fa(hi,me)>Fa(hi,ai)&&(ai=me):Fa(me,ai)>Fa(hi,ai)&&(hi=me):ai>=hi?(me<hi&&(hi=me),me>ai&&(ai=me)):me>vi?Fa(hi,me)>Fa(hi,ai)&&(ai=me):Fa(me,ai)>Fa(hi,ai)&&(hi=me)}else wr.push(Nr=[hi=me,ai=me]);Me<Yi&&(Yi=Me),Me>ia&&(ia=Me),uo=Ve,vi=me}function Tn(){vn.point=xn}function Gn(){Nr[0]=hi,Nr[1]=ai,vn.point=bn,uo=null}function ba(me,Me){if(uo){var Ve=me-vi;Et.add(v(Ve)>180?Ve+(Ve>0?360:-360):Ve)}else Si=me,Pi=Me;xa.point(me,Me),xn(me,Me)}function wa(){xa.lineStart()}function Qn(){ba(Si,Pi),xa.lineEnd(),v(Et)>t&&(hi=-(ai=180)),Nr[0]=hi,Nr[1]=ai,uo=null}function Fa(me,Me){return(Me-=me)<0?Me+360:Me}function ea(me,Me){return me[0]-Me[0]}function ra(me,Me){return me[0]<=me[1]?me[0]<=Me&&Me<=me[1]:Me<me[0]||me[1]<Me}function dn(me,Me){var Ve=me[0]*o,je=me[1]*o,et=Me[0]*o,it=Me[1]*o,vt=l(je),Ht=m(je),Qt=l(it),Zt=m(it),jt=vt*l(Ve),gr=vt*m(Ve),Ar=Qt*l(et),Fr=Qt*m(et),Xr=2*S(A(w(it-je)+vt*Qt*w(et-Ve))),pn=m(Xr),Cn=Xr?function(qn){var la=m(qn*=Xr)/pn,Ma=m(Xr-qn)/pn,da=Ma*jt+la*Ar,za=Ma*gr+la*Fr,ci=Ma*Ht+la*Zt;return[f(za,da)*r,f(ci,A(da*da+za*za))*r]}:function(){return[Ve*r,je*r]};return Cn.distance=Xr,Cn}function kn(me,Me){var Ve=jn(me[1],me[0]),je=jn(Me[1],Me[0]),et=function ga(me,Me){return Ir(me[0]*Me[1]-me[1]*Me[0],me[0]*Me[0]+me[1]*Me[1])}(Ve,je),it=ka(Ve)/ka(je);return na([1,0,me[0][0],0,1,me[0][1]],na([it,0,0,0,it,0],na([qt(et),vr(et),0,-vr(et),qt(et),0],[1,0,-Me[0][0],0,1,-Me[0][1]])))}function na(me,Me){return[me[0]*Me[0]+me[1]*Me[3],me[0]*Me[1]+me[1]*Me[4],me[0]*Me[2]+me[1]*Me[5]+me[2],me[3]*Me[0]+me[4]*Me[3],me[3]*Me[1]+me[4]*Me[4],me[3]*Me[2]+me[4]*Me[5]+me[5]]}function jn(me,Me){return[me[0]-Me[0],me[1]-Me[1]]}function ka(me){return gn(me[0]*me[0]+me[1]*me[1])}function ni(me,Me,Ve){function et(Zt,jt){var Fr,gr=Me(Zt,jt),Ar=gr.project([Zt*Ra,jt*Ra]);return(Fr=gr.transform)?[Fr[0]*Ar[0]+Fr[1]*Ar[1]+Fr[2],-(Fr[3]*Ar[0]+Fr[4]*Ar[1]+Fr[5])]:(Ar[1]=-Ar[1],Ar)}function it(Zt,jt){var gr=Zt.project.invert,Ar=Zt.transform,Fr=jt;if(Ar&&(Ar=function $n(me){var Me=1/(me[0]*me[4]-me[1]*me[3]);return[Me*me[4],-Me*me[1],Me*(me[1]*me[5]-me[2]*me[4]),-Me*me[3],Me*me[0],Me*(me[2]*me[3]-me[0]*me[5])]}(Ar),Fr=[Ar[0]*Fr[0]+Ar[1]*Fr[1]+Ar[2],Ar[3]*Fr[0]+Ar[4]*Fr[1]+Ar[5]]),gr&&Zt===function vt(Zt){return Me(Zt[0]*Na,Zt[1]*Na)}(Xr=gr(Fr)))return Xr;for(var Xr,pn=Zt.children,Cn=0,qn=pn&&pn.length;Cn<qn;++Cn)if(Xr=it(pn[Cn],jt))return Xr}!function je(Zt,jt){if(Zt.edges=function Pa(me){for(var Me=me.length,Ve=[],je=me[Me-1],et=0;et<Me;++et)Ve.push([je,je=me[et]]);return Ve}(Zt.face),jt.face){var gr=Zt.shared=function Va(me,Me){for(var Ve,je,et=me.length,it=null,vt=0;vt<et;++vt){Ve=me[vt];for(var Ht=Me.length;--Ht>=0;)if(je=Me[Ht],Ve[0]===je[0]&&Ve[1]===je[1]){if(it)return[it,Ve];it=Ve}}}(Zt.face,jt.face),Ar=kn(gr.map(jt.project),gr.map(Zt.project));Zt.transform=jt.transform?na(jt.transform,Ar):Ar;for(var Fr=jt.edges,Xr=0,pn=Fr.length;Xr<pn;++Xr)Hn(gr[0],Fr[Xr][1])&&Hn(gr[1],Fr[Xr][0])&&(Fr[Xr]=Zt),Hn(gr[0],Fr[Xr][0])&&Hn(gr[1],Fr[Xr][1])&&(Fr[Xr]=Zt);for(Xr=0,pn=(Fr=Zt.edges).length;Xr<pn;++Xr)Hn(gr[0],Fr[Xr][0])&&Hn(gr[1],Fr[Xr][1])&&(Fr[Xr]=jt),Hn(gr[0],Fr[Xr][1])&&Hn(gr[1],Fr[Xr][0])&&(Fr[Xr]=jt)}else Zt.transform=jt.transform;return Zt.children&&Zt.children.forEach(function(Cn){je(Cn,Zt)}),Zt}(me,{transform:null}),ca(me)&&(et.invert=function(Zt,jt){var gr=it(me,[Zt,-jt]);return gr&&(gr[0]*=Na,gr[1]*=Na,gr)});var Ht=Ut(et),Qt=Ht.stream;return Ht.stream=function(Zt){var jt=Ht.rotate(),gr=Qt(Zt),Ar=(Ht.rotate([0,0]),Qt(Zt));return Ht.rotate(jt),gr.sphere=function(){Ar.polygonStart(),Ar.lineStart(),Kn(Ar,me),Ar.lineEnd(),Ar.polygonEnd()},gr},Ht.angle(null==Ve?-30:Ve*Ra)}function Kn(me,Me,Ve){var je,vt,et=Me.edges,it=et.length,Ht={type:"MultiPoint",coordinates:Me.face},Zt=function Bn(me){var Me,Ve,je,et,it,vt,Ht;if(ia=ai=-(hi=Yi=1/0),wr=[],It(me,vn),Ve=wr.length){for(wr.sort(ea),Me=1,it=[je=wr[0]];Me<Ve;++Me)ra(je,(et=wr[Me])[0])||ra(je,et[1])?(Fa(je[0],et[1])>Fa(je[0],je[1])&&(je[1]=et[1]),Fa(et[0],je[1])>Fa(je[0],je[1])&&(je[0]=et[0])):it.push(je=et);for(vt=-1/0,Me=0,je=it[Ve=it.length-1];Me<=Ve;je=et,++Me)et=it[Me],(Ht=Fa(je[1],et[0]))>vt&&(vt=Ht,hi=et[0],ai=je[1])}return wr=Nr=null,hi===1/0||Yi===1/0?[[NaN,NaN],[NaN,NaN]]:[[hi,Yi],[ai,ia]]}({type:"MultiPoint",coordinates:Me.face.filter(function(pn){return 90!==wt(pn[1])})}),jt=!1,gr=-1,Ar=Zt[1][0]-Zt[0][0],Fr=180===Ar||360===Ar?[(Zt[0][0]+Zt[1][0])/2,(Zt[0][1]+Zt[1][1])/2]:ql(Ht);if(Ve)for(;++gr<it&&et[gr]!==Ve;);++gr;for(var Xr=0;Xr<it;++Xr)vt=et[(Xr+gr)%it],Array.isArray(vt)?(jt||(me.point((je=dn(vt[0],Fr)(Or))[0],je[1]),jt=!0),me.point((je=dn(vt[1],Fr)(Or))[0],je[1])):(jt=!1,vt!==Ve&&Kn(me,vt,Me))}function Hn(me,Me){return me&&Me&&me[0]===Me[0]&&me[1]===Me[1]}function ca(me){return me.project.invert||me.children&&me.children.some(ca)}function oa(me,Me){var Ve=l(Me),je=l(me)*Ve;return[Ve*m(me)/je,m(Me)/je]}function Oa(){return Ut(oa).scale(144.049).clipAngle(60)}oa.invert=va(p);var li=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];const xi=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(me){return me.map(function(Me){return li[Me]})});function Da(me){me=me||function(Ve){var je=ql({type:"MultiPoint",coordinates:Ve});return Oa().scale(1).translate([0,0]).rotate([-je[0],-je[1]])};var Me=xi.map(function(Ve){return{face:Ve,project:me(Ve)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ve,je){var et=Me[Ve];et&&(et.children||(et.children=[])).push(Me[je])}),ni(Me[0],function(Ve,je){return Me[Ve<-Vr/2?je<0?6:4:Ve<0?je<0?2:0:Ve<Vr/2?je<0?3:1:je<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var $a=2/gn(3);function gi(me,Me){var Ve=co(me,Me);return[Ve[0]*$a,Ve[1]]}function wi(me){me=me||function(Ve){var je=ql({type:"MultiPoint",coordinates:Ve});return Ut(gi).translate([0,0]).scale(1).rotate(je[1]>0?[-je[0],0]:[180-je[0],180])};var Me=xi.map(function(Ve){return{face:Ve,project:me(Ve)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ve,je){var et=Me[Ve];et&&(et.children||(et.children=[])).push(Me[je])}),ni(Me[0],function(Ve,je){return Me[Ve<-Vr/2?je<0?6:4:Ve<0?je<0?2:0:Ve<Vr/2?je<0?3:1:je<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function ki(me){me=me||function(vt){var Ht=6===vt.length?ql({type:"MultiPoint",coordinates:vt}):vt[0];return Oa().scale(1).translate([0,0]).rotate([-Ht[0],-Ht[1]])};var Me=xi.map(function(vt){for(var jt,Ht=vt.map(hs),Qt=Ht.length,Zt=Ht[Qt-1],gr=[],Ar=0;Ar<Qt;++Ar)jt=Ht[Ar],gr.push(Gi([.9486832980505138*Zt[0]+.31622776601683794*jt[0],.9486832980505138*Zt[1]+.31622776601683794*jt[1],.9486832980505138*Zt[2]+.31622776601683794*jt[2]]),Gi([.9486832980505138*jt[0]+.31622776601683794*Zt[0],.9486832980505138*jt[1]+.31622776601683794*Zt[1],.9486832980505138*jt[2]+.31622776601683794*Zt[2]])),Zt=jt;return gr}),Ve=[],je=[-1,0,0,1,0,1,4,5];Me.forEach(function(vt,Ht){for(var Qt=xi[Ht],Zt=Qt.length,jt=Ve[Ht]=[],gr=0;gr<Zt;++gr)Me.push([Qt[gr],vt[(2*gr+2)%(2*Zt)],vt[(2*gr+1)%(2*Zt)]]),je.push(Ht),jt.push(As(hs(vt[(2*gr+2)%(2*Zt)]),hs(vt[(2*gr+1)%(2*Zt)])))});var et=Me.map(function(vt){return{project:me(vt),face:vt}});return je.forEach(function(vt,Ht){var Qt=et[vt];Qt&&(Qt.children||(Qt.children=[])).push(et[Ht])}),ni(et[0],function it(vt,Ht){var Qt=qt(Ht),Zt=[Qt*qt(vt),Qt*vr(vt),vr(Ht)],jt=vt<-Vr/2?Ht<0?6:4:vt<0?Ht<0?2:0:vt<Vr/2?Ht<0?3:1:Ht<0?7:5,gr=Ve[jt];return et[Po(gr[0],Zt)<0?8+3*jt:Po(gr[1],Zt)<0?8+3*jt+1:Po(gr[2],Zt)<0?8+3*jt+2:jt]}).angle(-30).scale(110.625).center([0,45])}function Po(me,Me){for(var Ve=0,je=me.length,et=0;Ve<je;++Ve)et+=me[Ve]*Me[Ve];return et}function As(me,Me){return[me[1]*Me[2]-me[2]*Me[1],me[2]*Me[0]-me[0]*Me[2],me[0]*Me[1]-me[1]*Me[0]]}function Gi(me){return[Ir(me[1],me[0])*Ra,ha(An(-1,Sn(1,me[2])))*Ra]}function hs(me){var Me=me[0]*Na,Ve=me[1]*Na,je=qt(Ve);return[je*qt(Me),je*vr(Me),vr(Ve)]}function mo(){}function Al(me,Me){var je,Ve=Me.stream;if(!Ve)throw new Error("invalid projection");switch(me&&me.type){case"Feature":je=vs;break;case"FeatureCollection":je=Io;break;default:je=_i}return je(me,Ve)}function Io(me,Me){return{type:"FeatureCollection",features:me.features.map(function(Ve){return vs(Ve,Me)})}}function vs(me,Me){return{type:"Feature",id:me.id,properties:me.properties,geometry:_i(me.geometry,Me)}}function _i(me,Me){if(!me)return null;if("GeometryCollection"===me.type)return function Ss(me,Me){return{type:"GeometryCollection",geometries:me.geometries.map(function(Ve){return _i(Ve,Me)})}}(me,Me);var Ve;switch(me.type){case"Point":case"MultiPoint":Ve=fe;break;case"LineString":case"MultiLineString":Ve=G;break;case"Polygon":case"MultiPolygon":case"Sphere":Ve=ce;break;default:return null}return It(me,Me(Ve)),Ve.result()}gi.invert=function(me,Me){return co.invert(me/$a,Me)};var xo=[],Mi=[],fe={point:function(me,Me){xo.push([me,Me])},result:function(){var me=xo.length?xo.length<2?{type:"Point",coordinates:xo[0]}:{type:"MultiPoint",coordinates:xo}:null;return xo=[],me}},G={lineStart:mo,point:function(me,Me){xo.push([me,Me])},lineEnd:function(){xo.length&&(Mi.push(xo),xo=[])},result:function(){var me=Mi.length?Mi.length<2?{type:"LineString",coordinates:Mi[0]}:{type:"MultiLineString",coordinates:Mi}:null;return Mi=[],me}},ce={polygonStart:mo,lineStart:mo,point:function(me,Me){xo.push([me,Me])},lineEnd:function(){var me=xo.length;if(me){do{xo.push(xo[0].slice())}while(++me<4);Mi.push(xo),xo=[]}},polygonEnd:mo,result:function(){if(!Mi.length)return null;var me=[],Me=[];return Mi.forEach(function(Ve){!function gs(me){if((Ve=me.length)<4)return!1;for(var Ve,Me=0,je=me[Ve-1][1]*me[0][0]-me[Ve-1][0]*me[0][1];++Me<Ve;)je+=me[Me-1][1]*me[Me][0]-me[Me-1][0]*me[Me][1];return je<=0}(Ve)?Me.push(Ve):me.push([Ve])}),Me.forEach(function(Ve){var je=Ve[0];me.some(function(et){if(function hl(me,Me){for(var Ve=Me[0],je=Me[1],et=!1,it=0,vt=me.length,Ht=vt-1;it<vt;Ht=it++){var Qt=me[it],Zt=Qt[0],jt=Qt[1],gr=me[Ht],Ar=gr[0],Fr=gr[1];jt>je^Fr>je&&Ve<(Ar-Zt)*(je-jt)/(Fr-jt)+Zt&&(et=!et)}return et}(et[0],je))return et.push(Ve),!0})||me.push([Ve])}),Mi=[],me.length?me.length>1?{type:"MultiPolygon",coordinates:me}:{type:"Polygon",coordinates:me[0]}:null}};function Z(me){var Me=me(wn,0)[0]-me(-wn,0)[0];function Ve(je,et){var it=wt(je)<wn,vt=me(it?je:je>0?je-Vr:je+Vr,et),Ht=(vt[0]-vt[1])*Ba,Qt=(vt[0]+vt[1])*Ba;if(it)return[Ht,Qt];var Zt=Me*Ba,jt=Ht>0^Qt>0?-1:1;return[jt*Ht-Yr(Qt)*Zt,jt*Qt-Yr(Ht)*Zt]}return me.invert&&(Ve.invert=function(je,et){var it=(je+et)*Ba,vt=(et-je)*Ba,Ht=wt(it)<.5*Me&&wt(vt)<.5*Me;if(!Ht){var Qt=Me*Ba,Zt=it>0^vt>0?-1:1,jt=-Zt*je+(vt>0?1:-1)*Qt,gr=-Zt*et+(it>0?1:-1)*Qt;it=(-jt-gr)*Ba,vt=(jt-gr)*Ba}var Ar=me.invert(it,vt);return Ht||(Ar[0]+=it>0?Vr:-Vr),Ar}),Ut(Ve).rotate([-90,-90,45]).clipAngle(179.999)}function ve(){return Z(zo).scale(176.423)}function Ee(){return Z(ks).scale(111.48)}function Ae(me,Me){if(!(0<=(Me=+Me)&&Me<=20))throw new Error("invalid digits");function Ve(Zt){var jt=Zt.length,gr=2,Ar=new Array(jt);for(Ar[0]=+Zt[0].toFixed(Me),Ar[1]=+Zt[1].toFixed(Me);gr<jt;)Ar[gr]=Zt[gr],++gr;return Ar}function je(Zt){return Zt.map(Ve)}function et(Zt){for(var jt=Ve(Zt[0]),gr=[jt],Ar=1;Ar<Zt.length;Ar++){var Fr=Ve(Zt[Ar]);(Fr.length>2||Fr[0]!=jt[0]||Fr[1]!=jt[1])&&(gr.push(Fr),jt=Fr)}return 1===gr.length&&Zt.length>1&&gr.push(Ve(Zt[Zt.length-1])),gr}function it(Zt){return Zt.map(et)}function vt(Zt){if(null==Zt)return Zt;var jt;switch(Zt.type){case"GeometryCollection":jt={type:"GeometryCollection",geometries:Zt.geometries.map(vt)};break;case"Point":jt={type:"Point",coordinates:Ve(Zt.coordinates)};break;case"MultiPoint":jt={type:Zt.type,coordinates:je(Zt.coordinates)};break;case"LineString":jt={type:Zt.type,coordinates:et(Zt.coordinates)};break;case"MultiLineString":case"Polygon":jt={type:Zt.type,coordinates:it(Zt.coordinates)};break;case"MultiPolygon":jt={type:"MultiPolygon",coordinates:Zt.coordinates.map(it)};break;default:return Zt}return null!=Zt.bbox&&(jt.bbox=Zt.bbox),jt}function Ht(Zt){var jt={type:"Feature",properties:Zt.properties,geometry:vt(Zt.geometry)};return null!=Zt.id&&(jt.id=Zt.id),null!=Zt.bbox&&(jt.bbox=Zt.bbox),jt}if(null!=me)switch(me.type){case"Feature":return Ht(me);case"FeatureCollection":var Qt={type:"FeatureCollection",features:me.features.map(Ht)};return null!=me.bbox&&(Qt.bbox=me.bbox),Qt;default:return vt(me)}return me}function Ge(me){var Me=vr(me);function Ve(je,et){var it=Me?nn(je*Me/2)/Me:je/2;if(!et)return[2*it,-me];var vt=2*xr(it*vr(et)),Ht=1/nn(et);return[vr(vt)*Ht,et+(1-qt(vt))*Ht-me]}return Ve.invert=function(je,et){if(wt(et+=me)<Or)return[Me?2*xr(Me*je/2)/Me:je,0];var Qt,it=je*je+et*et,vt=0,Ht=10;do{var Zt=nn(vt),jt=1/qt(vt),gr=it-2*et*vt+vt*vt;vt-=Qt=(Zt*gr+2*(vt-et))/(2+gr*jt*jt+2*(vt-et)*Zt)}while(wt(Qt)>Or&&--Ht>0);var Ar=je*(Zt=nn(vt)),Fr=nn(wt(et)<wt(vt+1/Zt)?.5*ha(Ar):.5*yi(Ar)+Vr/4)/vr(vt);return[Me?2*xr(Me*Fr)/Me:2*Fr,vt]},Ve}function ot(){return Zo(Ge).scale(131.215)}var xt=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Wt(me,Me){var gr,Ve=Sn(18,36*wt(Me)/Vr),je=an(Ve),et=Ve-je,it=(gr=xt[je])[0],vt=gr[1],Ht=(gr=xt[++je])[0],Qt=gr[1],Zt=(gr=xt[Sn(19,++je)])[0],jt=gr[1];return[me*(Ht+et*(Zt-it)/2+et*et*(Zt-2*Ht+it)/2),(Me>0?wn:-wn)*(Qt+et*(jt-vt)/2+et*et*(jt-2*Qt+vt)/2)]}function ar(){return Ut(Wt).scale(152.63)}function Tt(me,Me){var Ve=function Yt(me){function Me(Ve,je){var et=qt(je),it=(me-1)/(me-et*qt(Ve));return[it*et*vr(Ve),it*vr(je)]}return Me.invert=function(Ve,je){var et=Ve*Ve+je*je,it=gn(et),vt=(me-gn(1-et*(me+1)/(me-1)))/((me-1)/it+it/(me-1));return[Ir(Ve*vt,it*gn(1-vt*vt)),it?ha(je*vt/it):0]},Me}(me);if(!Me)return Ve;var je=qt(Me),et=vr(Me);function it(vt,Ht){var Qt=Ve(vt,Ht),Zt=Qt[1],jt=Zt*et/(me-1)+je;return[Qt[0]*je/jt,Zt/jt]}return it.invert=function(vt,Ht){var Qt=(me-1)/(me-1-Ht*et);return Ve.invert(Qt*vt,Qt*Ht*je)},it}function _t(){var me=2,Me=0,Ve=Kt(Tt),je=Ve(me,Me);return je.distance=function(et){return arguments.length?Ve(me=+et,Me):me},je.tilt=function(et){return arguments.length?Ve(me,Me=et*Na):Me*Ra},je.scale(432.147).clipAngle(yi(1/me)*Ra-1e-6)}xt.forEach(function(me){me[1]*=1.0144}),Wt.invert=function(me,Me){var Ve=Me/wn,je=90*Ve,et=Sn(18,wt(je/5)),it=An(0,an(et));do{var vt=xt[it][1],Ht=xt[it+1][1],Qt=xt[Sn(19,it+2)][1],Zt=Qt-vt,jt=Qt-2*Ht+vt,gr=2*(wt(Ve)-Ht)/Zt,Ar=jt/Zt,Fr=gr*(1-Ar*gr*(1-2*Ar*gr));if(Fr>=0||1===it){je=(Me>=0?5:-5)*(Fr+et);var pn,Xr=50;do{Fr=(et=Sn(18,wt(je)/5))-(it=an(et)),vt=xt[it][1],Ht=xt[it+1][1],Qt=xt[Sn(19,it+2)][1],je-=(pn=(Me>=0?wn:-wn)*(Ht+Fr*(Qt-vt)/2+Fr*Fr*(Qt-2*Ht+vt)/2)-Me)*Ra}while(wt(pn)>Xn&&--Xr>0);break}}while(--it>=0);var Cn=xt[it][0],qn=xt[it+1][0],la=xt[Sn(19,it+2)][0];return[me/(qn+Fr*(la-Cn)/2+Fr*Fr*(la-2*qn+Cn)/2),je*Na]};var Nt=1e-4,pr=-180+Nt,Tr=180-Nt,Er=-90+Nt,Br=90-Nt;function $r(me){return me.length>0}function ln(me){return Math.floor(1e4*me)/1e4}function zn(me){return-90===me||90===me?[0,me]:[-180,ln(me)]}function En(me){var Me=me[0],Ve=me[1],je=!1;return Me<=pr?(Me=-180,je=!0):Me>=Tr&&(Me=180,je=!0),Ve<=Er?(Ve=-90,je=!0):Ve>=Br&&(Ve=90,je=!0),je?[Me,Ve]:me}function Nn(me){return me.map(En)}function ya(me,Me,Ve){for(var je=0,et=me.length;je<et;++je){var it=me[je].slice();Ve.push({index:-1,polygon:Me,ring:it});for(var vt=0,Ht=it.length;vt<Ht;++vt){var Qt=it[vt],Zt=Qt[0],jt=Qt[1];if(Zt<=pr||Zt>=Tr||jt<=Er||jt>=Br){it[vt]=En(Qt);for(var gr=vt+1;gr<Ht;++gr){var Ar=it[gr],Fr=Ar[0],Xr=Ar[1];if(Fr>pr&&Fr<Tr&&Xr>Er&&Xr<Br)break}if(gr===vt+1)continue;if(vt){var pn={index:-1,polygon:Me,ring:it.slice(0,vt+1)};pn.ring[pn.ring.length-1]=zn(jt),Ve[Ve.length-1]=pn}else Ve.pop();if(gr>=Ht)break;Ve.push({index:-1,polygon:Me,ring:it=it.slice(gr-1)}),it[0]=zn(it[0][1]),vt=-1,Ht=it.length}}}}function aa(me){var Me,it,vt,Ht,Qt,Zt,Ve=me.length,je={},et={};for(Me=0;Me<Ve;++Me)vt=(it=me[Me]).ring[0],Qt=it.ring[it.ring.length-1],vt[0]!==Qt[0]||vt[1]!==Qt[1]?(it.index=Me,je[vt]=et[Qt]=it):(it.polygon.push(it.ring),me[Me]=null);for(Me=0;Me<Ve;++Me)if(it=me[Me]){if(vt=it.ring[0],Qt=it.ring[it.ring.length-1],Ht=et[vt],Zt=je[Qt],delete je[vt],delete et[Qt],vt[0]===Qt[0]&&vt[1]===Qt[1]){it.polygon.push(it.ring);continue}Ht?(delete et[vt],delete je[Ht.ring[0]],Ht.ring.pop(),me[Ht.index]=null,it={index:-1,polygon:Ht.polygon,ring:Ht.ring.concat(it.ring)},Ht===Zt?it.polygon.push(it.ring):(it.index=Ve++,me.push(je[it.ring[0]]=et[it.ring[it.ring.length-1]]=it))):Zt?(delete je[Qt],delete et[Zt.ring[Zt.ring.length-1]],it.ring.pop(),it={index:Ve++,polygon:Zt.polygon,ring:it.ring.concat(Zt.ring)},me[Zt.index]=null,me.push(je[it.ring[0]]=et[it.ring[it.ring.length-1]]=it)):(it.ring.push(it.ring[0]),it.polygon.push(it.ring))}}function On(me){var Me={type:"Feature",geometry:Zn(me.geometry)};return null!=me.id&&(Me.id=me.id),null!=me.bbox&&(Me.bbox=me.bbox),null!=me.properties&&(Me.properties=me.properties),Me}function Zn(me){if(null==me)return me;var Me,Ve,je,et;switch(me.type){case"GeometryCollection":Me={type:"GeometryCollection",geometries:me.geometries.map(Zn)};break;case"Point":Me={type:"Point",coordinates:En(me.coordinates)};break;case"MultiPoint":case"LineString":Me={type:me.type,coordinates:Nn(me.coordinates)};break;case"MultiLineString":Me={type:"MultiLineString",coordinates:me.coordinates.map(Nn)};break;case"Polygon":var it=[];ya(me.coordinates,it,Ve=[]),aa(Ve),Me={type:"Polygon",coordinates:it};break;case"MultiPolygon":Ve=[],je=-1,et=me.coordinates.length;for(var vt=new Array(et);++je<et;)ya(me.coordinates[je],vt[je]=[],Ve);aa(Ve),Me={type:"MultiPolygon",coordinates:vt.filter($r)};break;default:return me}return null!=me.bbox&&(Me.bbox=me.bbox),Me}function Yn(me){if(null==me)return me;switch(me.type){case"Feature":return On(me);case"FeatureCollection":var Me={type:"FeatureCollection",features:me.features.map(On)};return null!=me.bbox&&(Me.bbox=me.bbox),Me;default:return Zn(me)}}function ua(me,Me){var Ve=nn(Me/2),je=vr(Ca*Ve);return[me*(.74482-.34588*je*je),1.70711*Ve]}function _a(){return Ut(ua).scale(146.153)}function Ci(me,Me,Ve){var je=dn(Me,Ve),et=je(.5),it=st([-et[0],-et[1]])(Me),vt=je.distance/2,Ht=-ha(vr(it[1]*Na)/vr(vt)),Qt=[-et[0],-et[1],-(it[0]>0?Vr-Ht:Ht)*Ra],Zt=Ut(me(vt)).rotate(Qt),jt=st(Qt),gr=Zt.center;return delete Zt.rotate,Zt.center=function(Ar){return arguments.length?gr(jt(Ar)):jt.invert(gr())},Zt.clipAngle(90)}function Ei(me){var Me=qt(me);function Ve(je,et){var it=oa(je,et);return it[0]*=Me,it}return Ve.invert=function(je,et){return oa.invert(je/Me,et)},Ve}function qi(){return di([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function di(me,Me){return Ci(Ei,me,Me)}function Fi(me){if(!(me*=2))return Ai;var Me=-me/2,Ve=-Me,je=me*me,et=nn(Ve),it=.5/vr(Ve);function vt(Ht,Qt){var Zt=yi(qt(Qt)*qt(Ht-Me)),jt=yi(qt(Qt)*qt(Ht-Ve));return[((Zt*=Zt)-(jt*=jt))/(2*me),(Qt<0?-1:1)*gn(4*je*jt-(je-Zt+jt)*(je-Zt+jt))/(2*me)]}return vt.invert=function(Ht,Qt){var Ar,Fr,Zt=Qt*Qt,jt=qt(gn(Zt+(Ar=Ht+Me)*Ar)),gr=qt(gn(Zt+(Ar=Ht+Ve)*Ar));return[Ir(Fr=jt-gr,Ar=(jt+gr)*et),(Qt<0?-1:1)*yi(gn(Ar*Ar+Fr*Fr)*it)]},vt}function ho(){return Ko([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ko(me,Me){return Ci(Fi,me,Me)}function uu(me,Me){if(wt(Me)<Or)return[me,0];var Ve=wt(Me/wn),je=ha(Ve);if(wt(me)<Or||wt(wt(Me)-wn)<Or)return[0,Yr(Me)*Vr*nn(je/2)];var et=qt(je),it=wt(Vr/me-me/Vr)/2,vt=it*it,Ht=et/(Ve+et-1),Qt=Ht*(2/Ve-1),Zt=Qt*Qt,jt=Zt+vt,gr=Ht-Zt,Ar=vt+Ht;return[Yr(me)*Vr*(it*gr+gn(vt*gr*gr-jt*(Ht*Ht-Zt)))/jt,Yr(Me)*Vr*(Qt*Ar-it*gn((vt+1)*jt-Ar*Ar))/jt]}function Ku(){return Ut(uu).scale(79.4183)}function Iu(me,Me){if(wt(Me)<Or)return[me,0];var Ve=wt(Me/wn),je=ha(Ve);if(wt(me)<Or||wt(wt(Me)-wn)<Or)return[0,Yr(Me)*Vr*nn(je/2)];var et=qt(je),it=wt(Vr/me-me/Vr)/2,vt=it*it,Ht=et*(gn(1+vt)-it*et)/(1+vt*Ve*Ve);return[Yr(me)*Vr*Ht,Yr(Me)*Vr*gn(1-Ht*(2*it+Ht))]}function wf(){return Ut(Iu).scale(79.4183)}function kf(me,Me){if(wt(Me)<Or)return[me,0];var Ve=Me/wn,je=ha(Ve);if(wt(me)<Or||wt(wt(Me)-wn)<Or)return[0,Vr*nn(je/2)];var et=(Vr/me-me/Vr)/2,it=Ve/(1+qt(je));return[Vr*(Yr(me)*gn(et*et+1-it*it)-et),Vr*it]}function Tf(){return Ut(kf).scale(79.4183)}function Sl(me,Me){if(!Me)return[me,0];var Ve=wt(Me);if(!me||Ve===wn)return[0,Me];var je=Ve/wn,et=je*je,it=(8*je-et*(et+2)-5)/(2*et*(je-1)),vt=it*it,Ht=je*it,Qt=et+vt+2*Ht,Zt=je+3*it,jt=me/wn,gr=jt+1/jt,Ar=Yr(wt(me)-wn)*gn(gr*gr-4),Fr=Ar*Ar,pn=(Ar*(Qt+vt-1)+2*gn(Qt*(et+vt*Fr-1)+(1-et)*(et*(Zt*Zt+4*vt)+12*Ht*vt+4*vt*vt)))/(4*Qt+Fr);return[Yr(me)*wn*pn,Yr(Me)*wn*gn(1+Ar*wt(pn)-pn*pn)]}function Af(){return Ut(Sl).scale(127.16)}function Hl(me,Me,Ve,je){var et=Vr/3;me=An(me,Or),Me=An(Me,Or),me=Sn(me,wn),Me=Sn(Me,Vr-Or),Ve=An(Ve,0),Ve=Sn(Ve,100-Or);var vt=(je=An(je,Or))/100,Ht=yi((Ve/100+1)*qt(et))/et,Qt=vr(me)/vr(Ht*wn),Zt=Me/Vr,jt=gn(vt*vr(me/2)/vr(Me/2));return function fu(me,Me,Ve,je,et){function it(vt,Ht){var Qt=Ve*vr(je*Ht),Zt=gn(1-Qt*Qt),jt=gn(2/(1+Zt*qt(vt*=et)));return[me*Zt*jt*vr(vt),Me*Qt*jt]}return it.invert=function(vt,Ht){var Qt=vt/me,Zt=Ht/Me,jt=gn(Qt*Qt+Zt*Zt),gr=2*ha(jt/2);return[Ir(vt*nn(gr),me*jt)/et,jt&&ha(Ht*vr(gr)/(Me*Ve*jt))/je]},it}(jt/gn(Zt*Qt*Ht),1/(jt*gn(Zt*Qt*Ht)),Qt,Ht,Zt)}function Ju(){var me=65*Na,Me=60*Na,Ve=20,je=200,et=Kt(Hl),it=et(me,Me,Ve,je);return it.poleline=function(vt){return arguments.length?et(me=+vt*Na,Me,Ve,je):me*Ra},it.parallels=function(vt){return arguments.length?et(me,Me=+vt*Na,Ve,je):Me*Ra},it.inflation=function(vt){return arguments.length?et(me,Me,Ve=+vt,je):Ve},it.ratio=function(vt){return arguments.length?et(me,Me,Ve,je=+vt):je},it.scale(163.775)}function _f(){return Ju().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}ua.invert=function(me,Me){var Ve=Me/1.70711,je=vr(Ca*Ve);return[me/(.74482-.34588*je*je),2*xr(Ve)]},uu.invert=function(me,Me){if(wt(Me)<Or)return[me,0];if(wt(me)<Or)return[0,wn*vr(2*xr(Me/Vr))];var Ve=(me/=Vr)*me,je=(Me/=Vr)*Me,et=Ve+je,it=et*et,vt=-wt(Me)*(1+et),Ht=vt-2*je+Ve,Qt=-2*vt+1+2*je+it,Zt=je/Qt+(2*Ht*Ht*Ht/(Qt*Qt*Qt)-9*vt*Ht/(Qt*Qt))/27,jt=(vt-Ht*Ht/(3*Qt))/Qt,gr=2*gn(-jt/3),Ar=yi(3*Zt/(jt*gr))/3;return[Vr*(et-1+gn(1+2*(Ve-je)+it))/(2*me),Yr(Me)*Vr*(-gr*qt(Ar+Vr/3)-Ht/(3*Qt))]},Iu.invert=function(me,Me){if(!me)return[0,wn*vr(2*xr(Me/Vr))];var Ve=wt(me/Vr),je=(1-Ve*Ve-(Me/=Vr)*Me)/(2*Ve),it=gn(je*je+1);return[Yr(me)*Vr*(it-je),Yr(Me)*wn*vr(2*Ir(gn((1-2*je*Ve)*(je+it)-Ve),gn(it+je+Ve)))]},kf.invert=function(me,Me){if(!Me)return[me,0];var Ve=Me/Vr,je=(Vr*Vr*(1-Ve*Ve)-me*me)/(2*Vr*me);return[me?Vr*(Yr(me)*gn(je*je+1)-je):0,wn*vr(2*xr(Ve))]},Sl.invert=function(me,Me){var Ve;if(!me||!Me)return[me,Me];Me/=Vr;var je=Yr(me)*me/wn,et=(je*je-1+4*Me*Me)/wt(je),it=et*et,vt=2*Me,Ht=50;do{var Qt=vt*vt,Zt=(8*vt-Qt*(Qt+2)-5)/(2*Qt*(vt-1)),jt=(3*vt-Qt*vt-10)/(2*Qt*vt),gr=Zt*Zt,Ar=vt*Zt,Fr=vt+Zt,Xr=Fr*Fr,pn=vt+3*Zt,qn=-2*Fr*(4*Ar*gr+(1-4*Qt+3*Qt*Qt)*(1+jt)+gr*(14*Qt-6-it+(8*Qt-8-2*it)*jt)+Ar*(12*Qt-8+(10*Qt-10-it)*jt)),la=gn(Xr*(Qt+gr*it-1)+(1-Qt)*(Qt*(pn*pn+4*gr)+gr*(12*Ar+4*gr)));vt-=Ve=(et*(Xr+gr-1)+2*la-je*(4*Xr+it))/(et*(2*Zt*jt+2*Fr*(1+jt))+qn/la-8*Fr*(et*(-1+gr+Xr)+2*la)*(1+jt)/(it+4*Xr))}while(Ve>Or&&--Ht>0);return[Yr(me)*(gn(et*et+4)+et)*Vr/4,wn*vt]};var Qu=4*Vr+3*gn(3),lc=2*gn(2*Vr*gn(3)/Qu),$f=Hs(lc*gn(3)/Vr,lc,Qu/6);function Ks(){return Ut($f).scale(176.84)}function ac(me,Me){return[me*gn(1-3*Me*Me/(Vr*Vr)),Me]}function uc(){return Ut(ac).scale(152.63)}function vl(me,Me){var Ve=qt(Me),je=qt(me)*Ve,et=1-je,it=qt(me=Ir(vr(me)*Ve,-vr(Me))),vt=vr(me);return[vt*(Ve=gn(1-je*je))-it*et,-it*Ve-vt*et]}function ic(){return Ut(vl).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function oc(me,Me){var Ve=qo(me,Me);return[(Ve[0]+me/wn)/2,(Ve[1]+Me)/2]}function pc(){return Ut(oc).scale(158.837)}ac.invert=function(me,Me){return[me/gn(1-3*Me*Me/(Vr*Vr)),Me]},vl.invert=function(me,Me){var Ve=(me*me+Me*Me)/-2,je=gn(-Ve*(2+Ve)),et=Me*Ve+me*je,it=me*Ve-Me*je,vt=gn(it*it+et*et);return[Ir(je*et,vt*(1+Ve)),vt?-ha(je*it/vt):0]},oc.invert=function(me,Me){var Ve=me,je=Me,et=25;do{var Cn,it=qt(je),vt=vr(je),Ht=vr(2*je),Qt=vt*vt,Zt=it*it,jt=vr(Ve),gr=qt(Ve/2),Ar=vr(Ve/2),Fr=Ar*Ar,Xr=1-Zt*gr*gr,pn=Xr?yi(it*gr)*gn(Cn=1/Xr):Cn=0,qn=.5*(2*pn*it*Ar+Ve/wn)-me,la=.5*(pn*vt+je)-Me,Ma=.5*Cn*(Zt*Fr+pn*it*gr*Qt)+.5/wn,da=Cn*(jt*Ht/4-pn*vt*Ar),za=.125*Cn*(Ht*Ar-pn*vt*Zt*jt),ci=.5*Cn*(Qt*gr+pn*Fr*it)+.5,Di=da*za-ci*Ma,zi=(la*da-qn*ci)/Di,Oi=(qn*za-la*Ma)/Di;Ve-=zi,je-=Oi}while((wt(zi)>Or||wt(Oi)>Or)&&--et>0);return[Ve,je]}},27484:($,K,e)=>{"use strict";var M=e(77027)(),I=e(95203),t=M&&I("%Object.defineProperty%",!0);if(t)try{t({},"a",{value:1})}catch{t=!1}var T=I("%SyntaxError%"),n=I("%TypeError%"),i=e(47378);$.exports=function(a,r,o){if(!a||"object"!=typeof a&&"function"!=typeof a)throw new n("`obj` must be an object or a function`");if("string"!=typeof r&&"symbol"!=typeof r)throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new n("`loose`, if provided, must be a boolean");var v=arguments.length>3?arguments[3]:null,p=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],y=!!i&&i(a,r);if(t)t(a,r,{configurable:null===f&&y?y.configurable:!f,enumerable:null===v&&y?y.enumerable:!v,value:o,writable:null===p&&y?y.writable:!p});else{if(!l&&(v||p||f))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");a[r]=o}}},32358:($,K,e)=>{"use strict";var M=e(71356),I="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),t=Object.prototype.toString,T=Array.prototype.concat,n=e(27484),u=e(77027)(),a=function(o,v,p,f){if(v in o)if(!0===f){if(o[v]===p)return}else if(!function(o){return"function"==typeof o&&"[object Function]"===t.call(o)}(f)||!f())return;u?n(o,v,p,!0):n(o,v,p)},r=function(o,v){var p=arguments.length>2?arguments[2]:{},f=M(v);I&&(f=T.call(f,Object.getOwnPropertySymbols(v)));for(var l=0;l<f.length;l+=1)a(o,f[l],v[f[l]],p[f[l]])};r.supportsDescriptors=!!u,$.exports=r},67057:$=>{"use strict";$.exports=function(){for(var e=0;e<arguments.length;e++)if(typeof arguments[e]<"u")return arguments[e]}},36605:$=>{"use strict";$.exports=I;var e=(I.canvas=document.createElement("canvas")).getContext("2d"),M=t([32,126]);function I(T,n){Array.isArray(T)&&(T=T.join(", "));var u,i={},a=16,r=.05;n&&(2===n.length&&"number"==typeof n[0]?u=t(n):Array.isArray(n)?u=n:(n.o?u=t(n.o):n.pairs&&(u=n.pairs),n.fontSize&&(a=n.fontSize),null!=n.threshold&&(r=n.threshold))),u||(u=M),e.font=a+"px "+T;for(var o=0;o<u.length;o++){var v=u[o],p=e.measureText(v[0]).width+e.measureText(v[1]).width,f=e.measureText(v).width;if(Math.abs(p-f)>a*r){var l=(f-p)/a;i[v]=1e3*l}}return i}function t(T){for(var n=[],i=T[0];i<=T[1];i++)for(var u=String.fromCharCode(i),a=T[0];a<T[1];a++){var o=u+String.fromCharCode(a);n.push(o)}return n}I.createPairs=t,I.ascii=M},72005:($,K,e)=>{var M=e(83377),I=e(94840),t={M:"moveTo",C:"bezierCurveTo"};$.exports=function(T,n){T.beginPath(),I(M(n)).forEach(function(i){var u=i[0],a=i.slice(1);T[t[u]].apply(T,a)}),T.closePath()}},51186:$=>{$.exports=function(K){switch(K){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},50646:$=>{"use strict";function K(I,t,T){var n=0|I[T];if(n<=0)return[];var u,i=new Array(n);if(T===I.length-1)for(u=0;u<n;++u)i[u]=t;else for(u=0;u<n;++u)i[u]=K(I,t,T+1);return i}$.exports=function M(I,t){switch(typeof t>"u"&&(t=0),typeof I){case"number":if(I>0)return function e(I,t){var T,n;for(T=new Array(I),n=0;n<I;++n)T[n]=t;return T}(0|I,t);break;case"object":if("number"==typeof I.length)return K(I,t,0)}return[]}},5469:$=>{"use strict";function K(_,z,D){D=D||2;var j,ee,W,B,te,q,oe,k=z&&z.length,O=k?z[0]*D:_.length,U=e(_,0,O,D,!0),H=[];if(!U||U.next===U.prev)return H;if(k&&(U=function u(_,z,D,k){var U,H,j,ee,W,O=[];for(U=0,H=z.length;U<H;U++)j=z[U]*k,ee=U<H-1?z[U+1]*k:_.length,(W=e(_,j,ee,k,!1))===W.next&&(W.steiner=!0),O.push(y(W));for(O.sort(a),U=0;U<O.length;U++)D=r(O[U],D);return D}(_,z,U,D)),_.length>80*D){j=W=_[0],ee=B=_[1];for(var ie=D;ie<O;ie+=D)(te=_[ie])<j&&(j=te),(q=_[ie+1])<ee&&(ee=q),te>W&&(W=te),q>B&&(B=q);oe=0!==(oe=Math.max(W-j,B-ee))?32767/oe:0}return I(U,H,D,j,ee,oe,0),H}function e(_,z,D,k,O){var U,H;if(O===F(_,z,D,k)>0)for(U=z;U<D;U+=k)H=E(U,_[U],_[U+1],H);else for(U=D-k;U>=z;U-=k)H=E(U,_[U],_[U+1],H);return H&&g(H,H.next)&&(P(H),H=H.next),H}function M(_,z){if(!_)return _;z||(z=_);var k,D=_;do{if(k=!1,D.steiner||!g(D,D.next)&&0!==h(D.prev,D,D.next))D=D.next;else{if(P(D),(D=z=D.prev)===D.next)break;k=!0}}while(k||D!==z);return z}function I(_,z,D,k,O,U,H){if(_){!H&&U&&function p(_,z,D,k){var O=_;do{0===O.z&&(O.z=l(O.x,O.y,z,D,k)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next}while(O!==_);O.prevZ.nextZ=null,O.prevZ=null,function f(_){var z,D,k,O,U,H,j,ee,W=1;do{for(D=_,_=null,U=null,H=0;D;){for(H++,k=D,j=0,z=0;z<W&&(j++,k=k.nextZ);z++);for(ee=W;j>0||ee>0&&k;)0!==j&&(0===ee||!k||D.z<=k.z)?(O=D,D=D.nextZ,j--):(O=k,k=k.nextZ,ee--),U?U.nextZ=O:_=O,O.prevZ=U,U=O;D=k}U.nextZ=null,W*=2}while(H>1);return _}(O)}(_,k,O,U);for(var ee,W,j=_;_.prev!==_.next;)if(ee=_.prev,W=_.next,U?T(_,k,O,U):t(_))z.push(ee.i/D|0),z.push(_.i/D|0),z.push(W.i/D|0),P(_),_=W.next,j=W.next;else if((_=W)===j){H?1===H?I(_=n(M(_),z,D),z,D,k,O,U,2):2===H&&i(_,z,D,k,O,U):I(M(_),z,D,k,O,U,1);break}}}function t(_){var z=_.prev,D=_,k=_.next;if(h(z,D,k)>=0)return!1;for(var O=z.x,U=D.x,H=k.x,j=z.y,ee=D.y,W=k.y,B=O<U?O<H?O:H:U<H?U:H,te=j<ee?j<W?j:W:ee<W?ee:W,q=O>U?O>H?O:H:U>H?U:H,oe=j>ee?j>W?j:W:ee>W?ee:W,ie=k.next;ie!==z;){if(ie.x>=B&&ie.x<=q&&ie.y>=te&&ie.y<=oe&&s(O,j,U,ee,H,W,ie.x,ie.y)&&h(ie.prev,ie,ie.next)>=0)return!1;ie=ie.next}return!0}function T(_,z,D,k){var O=_.prev,U=_,H=_.next;if(h(O,U,H)>=0)return!1;for(var j=O.x,ee=U.x,W=H.x,B=O.y,te=U.y,q=H.y,oe=j<ee?j<W?j:W:ee<W?ee:W,ie=B<te?B<q?B:q:te<q?te:q,V=j>ee?j>W?j:W:ee>W?ee:W,Y=B>te?B>q?B:q:te>q?te:q,ae=l(oe,ie,z,D,k),X=l(V,Y,z,D,k),J=_.prevZ,ue=_.nextZ;J&&J.z>=ae&&ue&&ue.z<=X;){if(J.x>=oe&&J.x<=V&&J.y>=ie&&J.y<=Y&&J!==O&&J!==H&&s(j,B,ee,te,W,q,J.x,J.y)&&h(J.prev,J,J.next)>=0||(J=J.prevZ,ue.x>=oe&&ue.x<=V&&ue.y>=ie&&ue.y<=Y&&ue!==O&&ue!==H&&s(j,B,ee,te,W,q,ue.x,ue.y)&&h(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;J&&J.z>=ae;){if(J.x>=oe&&J.x<=V&&J.y>=ie&&J.y<=Y&&J!==O&&J!==H&&s(j,B,ee,te,W,q,J.x,J.y)&&h(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;ue&&ue.z<=X;){if(ue.x>=oe&&ue.x<=V&&ue.y>=ie&&ue.y<=Y&&ue!==O&&ue!==H&&s(j,B,ee,te,W,q,ue.x,ue.y)&&h(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function n(_,z,D){var k=_;do{var O=k.prev,U=k.next.next;!g(O,U)&&m(O,k,k.next,U)&&c(O,U)&&c(U,O)&&(z.push(O.i/D|0),z.push(k.i/D|0),z.push(U.i/D|0),P(k),P(k.next),k=_=U),k=k.next}while(k!==_);return M(k)}function i(_,z,D,k,O,U){var H=_;do{for(var j=H.next.next;j!==H.prev;){if(H.i!==j.i&&x(H,j)){var ee=w(H,j);return H=M(H,H.next),ee=M(ee,ee.next),I(H,z,D,k,O,U,0),void I(ee,z,D,k,O,U,0)}j=j.next}H=H.next}while(H!==_)}function a(_,z){return _.x-z.x}function r(_,z){var D=function o(_,z){var H,D=z,k=_.x,O=_.y,U=-1/0;do{if(O<=D.y&&O>=D.next.y&&D.next.y!==D.y){var j=D.x+(O-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(j<=k&&j>U&&(U=j,H=D.x<D.next.x?D:D.next,j===k))return H}D=D.next}while(D!==z);if(!H)return null;var q,ee=H,W=H.x,B=H.y,te=1/0;D=H;do{k>=D.x&&D.x>=W&&k!==D.x&&s(O<B?k:U,O,W,B,O<B?U:k,O,D.x,D.y)&&(q=Math.abs(O-D.y)/(k-D.x),c(D,_)&&(q<te||q===te&&(D.x>H.x||D.x===H.x&&v(H,D)))&&(H=D,te=q)),D=D.next}while(D!==ee);return H}(_,z);if(!D)return z;var k=w(D,_);return M(k,k.next),M(D,D.next)}function v(_,z){return h(_.prev,_,z.prev)<0&&h(z.next,_,_.next)<0}function l(_,z,D,k,O){return(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=(_-D)*O|0)|_<<8))|_<<4))|_<<2))|_<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=(z-k)*O|0)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function y(_){var z=_,D=_;do{(z.x<D.x||z.x===D.x&&z.y<D.y)&&(D=z),z=z.next}while(z!==_);return D}function s(_,z,D,k,O,U,H,j){return(O-H)*(z-j)>=(_-H)*(U-j)&&(_-H)*(k-j)>=(D-H)*(z-j)&&(D-H)*(U-j)>=(O-H)*(k-j)}function x(_,z){return _.next.i!==z.i&&_.prev.i!==z.i&&!function b(_,z){var D=_;do{if(D.i!==_.i&&D.next.i!==_.i&&D.i!==z.i&&D.next.i!==z.i&&m(D,D.next,_,z))return!0;D=D.next}while(D!==_);return!1}(_,z)&&(c(_,z)&&c(z,_)&&function S(_,z){var D=_,k=!1,O=(_.x+z.x)/2,U=(_.y+z.y)/2;do{D.y>U!=D.next.y>U&&D.next.y!==D.y&&O<(D.next.x-D.x)*(U-D.y)/(D.next.y-D.y)+D.x&&(k=!k),D=D.next}while(D!==_);return k}(_,z)&&(h(_.prev,_,z.prev)||h(_,z.prev,z))||g(_,z)&&h(_.prev,_,_.next)>0&&h(z.prev,z,z.next)>0)}function h(_,z,D){return(z.y-_.y)*(D.x-z.x)-(z.x-_.x)*(D.y-z.y)}function g(_,z){return _.x===z.x&&_.y===z.y}function m(_,z,D,k){var O=A(h(_,z,D)),U=A(h(_,z,k)),H=A(h(D,k,_)),j=A(h(D,k,z));return!!(O!==U&&H!==j||0===O&&d(_,D,z)||0===U&&d(_,k,z)||0===H&&d(D,_,k)||0===j&&d(D,z,k))}function d(_,z,D){return z.x<=Math.max(_.x,D.x)&&z.x>=Math.min(_.x,D.x)&&z.y<=Math.max(_.y,D.y)&&z.y>=Math.min(_.y,D.y)}function A(_){return _>0?1:_<0?-1:0}function c(_,z){return h(_.prev,_,_.next)<0?h(_,z,_.next)>=0&&h(_,_.prev,z)>=0:h(_,z,_.prev)<0||h(_,_.next,z)<0}function w(_,z){var D=new R(_.i,_.x,_.y),k=new R(z.i,z.x,z.y),O=_.next,U=z.prev;return _.next=z,z.prev=_,D.next=O,O.prev=D,k.next=D,D.prev=k,U.next=k,k.prev=U,k}function E(_,z,D,k){var O=new R(_,z,D);return k?(O.next=k.next,O.prev=k,k.next.prev=O,k.next=O):(O.prev=O,O.next=O),O}function P(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function R(_,z,D){this.i=_,this.x=z,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(_,z,D,k){for(var O=0,U=z,H=D-k;U<D;U+=k)O+=(_[H]-_[U])*(_[U+1]+_[H+1]),H=U;return O}$.exports=K,$.exports.default=K,K.deviation=function(_,z,D,k){var O=z&&z.length,U=O?z[0]*D:_.length,H=Math.abs(F(_,0,U,D));if(O)for(var j=0,ee=z.length;j<ee;j++){var W=z[j]*D,B=j<ee-1?z[j+1]*D:_.length;H-=Math.abs(F(_,W,B,D))}var te=0;for(j=0;j<k.length;j+=3){var q=k[j]*D,oe=k[j+1]*D,ie=k[j+2]*D;te+=Math.abs((_[q]-_[ie])*(_[oe+1]-_[q+1])-(_[q]-_[oe])*(_[ie+1]-_[q+1]))}return 0===H&&0===te?0:Math.abs((te-H)/H)},K.flatten=function(_){for(var z=_[0][0].length,D={vertices:[],holes:[],dimensions:z},k=0,O=0;O<_.length;O++){for(var U=0;U<_[O].length;U++)for(var H=0;H<z;H++)D.vertices.push(_[O][U][H]);O>0&&(k+=_[O-1].length,D.holes.push(k))}return D}},93675:($,K,e)=>{var M=e(93113);$.exports=function(t,T){var o,n=[],i=[],u=[],a={},r=[];function v(d){u[d]=!1,a.hasOwnProperty(d)&&Object.keys(a[d]).forEach(function(A){delete a[d][A],u[A]&&v(A)})}function p(d){var b,c,A=!1;for(i.push(d),u[d]=!0,b=0;b<r[d].length;b++)(c=r[d][b])===o?(f(o,i),A=!0):u[c]||(A=p(c));if(A)v(d);else for(b=0;b<r[d].length;b++){c=r[d][b];var S=a[c];S||(S={},a[c]=S),S[c]=!0}return i.pop(),A}function f(d,A){var b=[].concat(A).concat(d);T?T(b):n.push(b)}function y(d){!function l(d){for(var A=0;A<t.length;A++)(A<d||!t[A])&&(t[A]=[]),t[A]=t[A].filter(function(b){return b>=d})}(d);for(var w,c=M(t).components.filter(function(_){return _.length>1}),S=1/0,E=0;E<c.length;E++)for(var P=0;P<c[E].length;P++)c[E][P]<S&&(S=c[E][P],w=E);var R=c[w];return!!R&&{leastVertex:S,adjList:t.map(function(_,z){return-1===R.indexOf(z)?[]:_.filter(function(D){return-1!==R.indexOf(D)})})}}o=0;for(var s=t.length;o<s;){var x=y(o);if(o=x.leastVertex,r=x.adjList){for(var h=0;h<r.length;h++)for(var g=0;g<r[h].length;g++){var m=r[h][g];u[+m]=!1,a[m]={}}p(o),o+=1}else o=s}if(!T)return n}},94976:($,K,e)=>{"use strict";var M=e(9506);$.exports=function(){return M(this).length=0,this}},16610:($,K,e)=>{"use strict";$.exports=e(65374)()?Array.from:e(13906)},65374:$=>{"use strict";$.exports=function(){var e,M,K=Array.from;return"function"==typeof K&&(M=K(e=["raz","dwa"]),Boolean(M&&M!==e&&"dwa"===M[1]))}},13906:($,K,e)=>{"use strict";var M=e(46452).iterator,I=e(43956),t=e(33208),T=e(90206),n=e(82312),i=e(9506),u=e(65269),a=e(76078),r=Array.isArray,o=Function.prototype.call,v={configurable:!0,enumerable:!0,writable:!0,value:null},p=Object.defineProperty;$.exports=function(f){var s,x,h,g,m,d,A,b,c,S,l=arguments[1],y=arguments[2];if(f=Object(i(f)),u(l)&&n(l),this&&this!==Array&&t(this))s=this;else{if(!l){if(I(f))return 1!==(m=f.length)?Array.apply(null,f):((g=new Array(1))[0]=f[0],g);if(r(f)){for(g=new Array(m=f.length),x=0;x<m;++x)g[x]=f[x];return g}}g=[]}if(!r(f))if(void 0!==(c=f[M])){for(A=n(c).call(f),s&&(g=new s),b=A.next(),x=0;!b.done;)S=l?o.call(l,y,b.value,x):b.value,s?(v.value=S,p(g,x,v)):g[x]=S,b=A.next(),++x;m=x}else if(a(f)){for(m=f.length,s&&(g=new s),x=0,h=0;x<m;++x)S=f[x],x+1<m&&((d=S.charCodeAt(0))>=55296&&d<=56319&&(S+=f[++x])),S=l?o.call(l,y,S,h):S,s?(v.value=S,p(g,h,v)):g[h]=S,++h;m=h}if(void 0===m)for(m=T(f.length),s&&(g=new s(m)),x=0;x<m;++x)S=l?o.call(l,y,f[x],x):f[x],s?(v.value=S,p(g,x,v)):g[x]=S;return s&&(v.value=null,g.length=m),g}},43956:$=>{"use strict";var K=Object.prototype.toString,e=K.call(function(){return arguments}());$.exports=function(M){return K.call(M)===e}},33208:$=>{"use strict";var K=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(M){return"function"==typeof M&&e(K.call(M))}},91657:$=>{"use strict";$.exports=function(){}},99906:($,K,e)=>{"use strict";$.exports=e(9074)()?Math.sign:e(8539)},9074:$=>{"use strict";$.exports=function(){var K=Math.sign;return"function"==typeof K&&(1===K(10)&&-1===K(-20))}},8539:$=>{"use strict";$.exports=function(K){return K=Number(K),isNaN(K)||0===K?K:K>0?1:-1}},85765:($,K,e)=>{"use strict";var M=e(99906),I=Math.abs,t=Math.floor;$.exports=function(T){return isNaN(T)?0:0!==(T=Number(T))&&isFinite(T)?M(T)*t(I(T)):T}},90206:($,K,e)=>{"use strict";var M=e(85765),I=Math.max;$.exports=function(t){return I(0,M(t))}},41872:($,K,e)=>{"use strict";var M=e(82312),I=e(9506),t=Function.prototype.bind,T=Function.prototype.call,n=Object.keys,i=Object.prototype.propertyIsEnumerable;$.exports=function(u,a){return function(r,o){var v,p=arguments[2],f=arguments[3];return r=Object(I(r)),M(o),v=n(r),f&&v.sort("function"==typeof f?t.call(f,r):void 0),"function"!=typeof u&&(u=v[u]),T.call(u,v,function(l,y){return i.call(r,l)?T.call(o,p,r[l],l,r,y):a})}}},56190:($,K,e)=>{"use strict";$.exports=e(86164)()?Object.assign:e(36889)},86164:$=>{"use strict";$.exports=function(){var e,K=Object.assign;return"function"==typeof K&&(K(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},36889:($,K,e)=>{"use strict";var M=e(98495),I=e(9506),t=Math.max;$.exports=function(T,n){var i,u,r,a=t(arguments.length,2);for(T=Object(I(T)),r=function(o){try{T[o]=n[o]}catch(v){i||(i=v)}},u=1;u<a;++u)n=arguments[u],M(n).forEach(r);if(void 0!==i)throw i;return T}},60455:($,K,e)=>{"use strict";var M=e(16610),I=e(56190),t=e(9506);$.exports=function(T){var n=Object(t(T)),i=arguments[1],u=Object(arguments[2]);if(n!==T&&!i)return n;var a={};return i?M(i,function(r){(u.ensure||r in T)&&(a[r]=T[r])}):I(a,T),a}},51360:($,K,e)=>{"use strict";var I,t,T,n,M=Object.create;e(12647)()||(I=e(98170)),$.exports=I&&1===I.level?(t={},T={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){T[i]="__proto__"!==i?n:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(t,T),Object.defineProperty(I,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:t}),function(i,u){return M(null===i?t:i,u)}):M},38010:($,K,e)=>{"use strict";$.exports=e(41872)("forEach")},44485:($,K,e)=>{"use strict";var M=e(65269),I={function:!0,object:!0};$.exports=function(t){return M(t)&&I[typeof t]||!1}},65269:($,K,e)=>{"use strict";var M=e(91657)();$.exports=function(I){return I!==M&&null!==I}},98495:($,K,e)=>{"use strict";$.exports=e(72322)()?Object.keys:e(47977)},72322:$=>{"use strict";$.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},47977:($,K,e)=>{"use strict";var M=e(65269),I=Object.keys;$.exports=function(t){return I(M(t)?Object(t):t)}},35149:($,K,e)=>{"use strict";var M=e(82312),I=e(38010),t=Function.prototype.call;$.exports=function(T,n){var i={},u=arguments[2];return M(n),I(T,function(a,r,o,v){i[r]=t.call(n,u,a,r,o,v)}),i}},23086:($,K,e)=>{"use strict";var M=e(65269),I=Array.prototype.forEach,t=Object.create,T=function(n,i){var u;for(u in n)i[u]=n[u]};$.exports=function(n){var i=t(null);return I.call(arguments,function(u){M(u)&&T(Object(u),i)}),i}},36425:($,K,e)=>{"use strict";$.exports=e(12647)()?Object.setPrototypeOf:e(98170)},12647:$=>{"use strict";var K=Object.create,e=Object.getPrototypeOf,M={};$.exports=function(){var I=Object.setPrototypeOf,t=arguments[0]||K;return"function"==typeof I&&e(I(t(null),M))===M}},98170:($,K,e)=>{"use strict";var i,u,a,r,M=e(44485),I=e(9506),t=Object.prototype.isPrototypeOf,T=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(u,a){if(I(u),null===a||M(a))return u;throw new TypeError("Prototype must be null or an object")},$.exports=(u=function(){var r,u=Object.create(null),a={},o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(o){try{(r=o.set).call(u,a)}catch{}if(Object.getPrototypeOf(u)===a)return{set:r,level:2}}return u.__proto__=a,Object.getPrototypeOf(u)===a?{level:2}:((u={}).__proto__=a,Object.getPrototypeOf(u)===a&&{level:1})}(),u?(2===u.level?u.set?(r=u.set,a=function(o,v){return r.call(i(o,v),v),o}):a=function(o,v){return i(o,v).__proto__=v,o}:a=function o(v,p){var f;return i(v,p),(f=t.call(o.nullPolyfill,v))&&delete o.nullPolyfill.__proto__,null===p&&(p=o.nullPolyfill),v.__proto__=p,f&&T(o.nullPolyfill,"__proto__",n),v},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:u.level})):null),e(51360)},82312:$=>{"use strict";$.exports=function(K){if("function"!=typeof K)throw new TypeError(K+" is not a function");return K}},43895:($,K,e)=>{"use strict";var M=e(44485);$.exports=function(I){if(!M(I))throw new TypeError(I+" is not an Object");return I}},9506:($,K,e)=>{"use strict";var M=e(65269);$.exports=function(I){if(!M(I))throw new TypeError("Cannot use null or undefined");return I}},18086:($,K,e)=>{"use strict";$.exports=e(36221)()?String.prototype.contains:e(28646)},36221:$=>{"use strict";var K="razdwatrzy";$.exports=function(){return"function"==typeof K.contains&&(!0===K.contains("dwa")&&!1===K.contains("foo"))}},28646:$=>{"use strict";var K=String.prototype.indexOf;$.exports=function(e){return K.call(this,e,arguments[1])>-1}},76078:$=>{"use strict";var K=Object.prototype.toString,e=K.call("");$.exports=function(M){return"string"==typeof M||M&&"object"==typeof M&&(M instanceof String||K.call(M)===e)||!1}},76599:$=>{"use strict";var K=Object.create(null),e=Math.random;$.exports=function(){var M;do{M=e().toString(36).slice(2)}while(K[M]);return M}},31098:($,K,e)=>{"use strict";var u,M=e(36425),I=e(18086),t=e(80472),T=e(46452),n=e(88791),i=Object.defineProperty;u=$.exports=function(a,r){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");n.call(this,a),r=r?I.call(r,"key+value")?"key+value":I.call(r,"key")?"key":"value":"value",i(this,"__kind__",t("",r))},M&&M(u,n),delete u.prototype.constructor,u.prototype=Object.create(n.prototype,{_resolve:t(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})}),i(u.prototype,T.toStringTag,t("c","Array Iterator"))},20304:($,K,e)=>{"use strict";var M=e(43956),I=e(82312),t=e(76078),T=e(21538),n=Array.isArray,i=Function.prototype.call,u=Array.prototype.some;$.exports=function(a,r){var o,p,f,l,y,s,x,h,v=arguments[2];if(n(a)||M(a)?o="array":t(a)?o="string":a=T(a),I(r),f=function(){l=!0},"array"!==o)if("string"!==o)for(p=a.next();!p.done;){if(i.call(r,v,p.value,f),l)return;p=a.next()}else for(s=a.length,y=0;y<s&&(x=a[y],y+1<s&&((h=x.charCodeAt(0))>=55296&&h<=56319&&(x+=a[++y])),i.call(r,v,x,f),!l);++y);else u.call(a,function(g){return i.call(r,v,g,f),l})}},21538:($,K,e)=>{"use strict";var M=e(43956),I=e(76078),t=e(31098),T=e(39217),n=e(83797),i=e(46452).iterator;$.exports=function(u){return"function"==typeof n(u)[i]?u[i]():M(u)?new t(u):I(u)?new T(u):new t(u)}},88791:($,K,e)=>{"use strict";var o,M=e(94976),I=e(56190),t=e(82312),T=e(9506),n=e(80472),i=e(13972),u=e(46452),a=Object.defineProperty,r=Object.defineProperties;$.exports=o=function(v,p){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");r(this,{__list__:n("w",T(v)),__context__:n("w",p),__nextIndex__:n("w",0)}),p&&(t(p.on),p.on("_add",this._onAdd),p.on("_delete",this._onDelete),p.on("_clear",this._onClear))},delete o.prototype.constructor,r(o.prototype,I({_next:n(function(){var v;if(this.__list__){if(this.__redo__&&void 0!==(v=this.__redo__.shift()))return v;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:n(function(){return this._createResult(this._next())}),_createResult:n(function(v){return void 0===v?{done:!0,value:void 0}:{done:!1,value:this._resolve(v)}}),_resolve:n(function(v){return this.__list__[v]}),_unBind:n(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:n(function(){return"[object "+(this[u.toStringTag]||"Object")+"]"})},i({_onAdd:n(function(v){if(!(v>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void a(this,"__redo__",n("c",[v]));this.__redo__.forEach(function(p,f){p>=v&&(this.__redo__[f]=++p)},this),this.__redo__.push(v)}}),_onDelete:n(function(v){var p;v>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(p=this.__redo__.indexOf(v))&&this.__redo__.splice(p,1),this.__redo__.forEach(function(f,l){f>v&&(this.__redo__[l]=--f)},this)))}),_onClear:n(function(){this.__redo__&&M.call(this.__redo__),this.__nextIndex__=0})}))),a(o.prototype,u.iterator,n(function(){return this}))},15453:($,K,e)=>{"use strict";var M=e(43956),I=e(65269),t=e(76078),T=e(46452).iterator,n=Array.isArray;$.exports=function(i){return!!I(i)&&(!!(n(i)||t(i)||M(i))||"function"==typeof i[T])}},39217:($,K,e)=>{"use strict";var i,M=e(36425),I=e(80472),t=e(46452),T=e(88791),n=Object.defineProperty;i=$.exports=function(u){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");u=String(u),T.call(this,u),n(this,"__length__",I("",u.length))},M&&M(i,T),delete i.prototype.constructor,i.prototype=Object.create(T.prototype,{_next:I(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:I(function(u){var r,a=this.__list__[u];return this.__nextIndex__===this.__length__?a:(r=a.charCodeAt(0))>=55296&&r<=56319?a+this.__list__[this.__nextIndex__++]:a})}),n(i.prototype,t.toStringTag,I("c","String Iterator"))},83797:($,K,e)=>{"use strict";var M=e(15453);$.exports=function(I){if(!M(I))throw new TypeError(I+" is not iterable");return I}},46452:($,K,e)=>{"use strict";$.exports=e(65359)()?e(81530).Symbol:e(10474)},65359:($,K,e)=>{"use strict";var M=e(81530),I={object:!0,symbol:!0};$.exports=function(){var T,t=M.Symbol;if("function"!=typeof t)return!1;T=t("test symbol");try{String(T)}catch{return!1}return!(!I[typeof t.iterator]||!I[typeof t.toPrimitive]||!I[typeof t.toStringTag])}},21825:$=>{"use strict";$.exports=function(K){return!!K&&("symbol"==typeof K||!(!K.constructor||"Symbol"!==K.constructor.name)&&"Symbol"===K[K.constructor.toStringTag])}},40512:($,K,e)=>{"use strict";var M=e(80472),I=Object.create,t=Object.defineProperty,T=Object.prototype,n=I(null);$.exports=function(i){for(var a,r,u=0;n[i+(u||"")];)++u;return n[i+=u||""]=!0,t(T,a="@@"+i,M.gs(null,function(o){r||(r=!0,t(this,a,M(o)),r=!1)})),a}},58964:($,K,e)=>{"use strict";var M=e(80472),I=e(81530).Symbol;$.exports=function(t){return Object.defineProperties(t,{hasInstance:M("",I&&I.hasInstance||t("hasInstance")),isConcatSpreadable:M("",I&&I.isConcatSpreadable||t("isConcatSpreadable")),iterator:M("",I&&I.iterator||t("iterator")),match:M("",I&&I.match||t("match")),replace:M("",I&&I.replace||t("replace")),search:M("",I&&I.search||t("search")),species:M("",I&&I.species||t("species")),split:M("",I&&I.split||t("split")),toPrimitive:M("",I&&I.toPrimitive||t("toPrimitive")),toStringTag:M("",I&&I.toStringTag||t("toStringTag")),unscopables:M("",I&&I.unscopables||t("unscopables"))})}},78506:($,K,e)=>{"use strict";var M=e(80472),I=e(14921),t=Object.create(null);$.exports=function(T){return Object.defineProperties(T,{for:M(function(n){return t[n]?t[n]:t[n]=T(String(n))}),keyFor:M(function(n){var i;for(i in I(n),t)if(t[i]===n)return i})})}},10474:($,K,e)=>{"use strict";var o,v,p,M=e(80472),I=e(14921),t=e(81530).Symbol,T=e(40512),n=e(58964),i=e(78506),u=Object.create,a=Object.defineProperties,r=Object.defineProperty;if("function"==typeof t)try{String(t()),p=!0}catch{}else t=null;v=function(l){if(this instanceof v)throw new TypeError("Symbol is not a constructor");return o(l)},$.exports=o=function f(l){var y;if(this instanceof f)throw new TypeError("Symbol is not a constructor");return p?t(l):(y=u(v.prototype),l=void 0===l?"":String(l),a(y,{__description__:M("",l),__name__:M("",T(l))}))},n(o),i(o),a(v.prototype,{constructor:M(o),toString:M("",function(){return this.__name__})}),a(o.prototype,{toString:M(function(){return"Symbol ("+I(this).__description__+")"}),valueOf:M(function(){return I(this)})}),r(o.prototype,o.toPrimitive,M("",function(){var f=I(this);return"symbol"==typeof f?f:f.toString()})),r(o.prototype,o.toStringTag,M("c","Symbol")),r(v.prototype,o.toStringTag,M("c",o.prototype[o.toStringTag])),r(v.prototype,o.toPrimitive,M("c",o.prototype[o.toPrimitive]))},14921:($,K,e)=>{"use strict";var M=e(21825);$.exports=function(I){if(!M(I))throw new TypeError(I+" is not a symbol");return I}},21713:($,K,e)=>{"use strict";$.exports=e(69697)()?WeakMap:e(82760)},69697:$=>{"use strict";$.exports=function(){var K,e;if("function"!=typeof WeakMap)return!1;try{K=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!("[object WeakMap]"!==String(K)||"function"!=typeof K.set||K.set({},1)!==K||"function"!=typeof K.delete||"function"!=typeof K.has||"one"!==K.get(e))}},7180:$=>{"use strict";$.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},82760:($,K,e)=>{"use strict";var y,M=e(65269),I=e(36425),t=e(43895),T=e(9506),n=e(76599),i=e(80472),u=e(21538),a=e(20304),r=e(46452).toStringTag,o=e(7180),v=Array.isArray,p=Object.defineProperty,f=Object.prototype.hasOwnProperty,l=Object.getPrototypeOf;$.exports=y=function(){var x,s=arguments[0];if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return x=o&&I&&WeakMap!==y?I(new WeakMap,l(this)):this,M(s)&&(v(s)||(s=u(s))),p(x,"__weakMapData__",i("c","$weakMap$"+n())),s&&a(s,function(h){T(h),x.set(h[0],h[1])}),x},o&&(I&&I(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:i(y)})),Object.defineProperties(y.prototype,{delete:i(function(s){return!!f.call(t(s),this.__weakMapData__)&&(delete s[this.__weakMapData__],!0)}),get:i(function(s){if(f.call(t(s),this.__weakMapData__))return s[this.__weakMapData__]}),has:i(function(s){return f.call(t(s),this.__weakMapData__)}),set:i(function(s,x){return p(t(s),this.__weakMapData__,i("c",x)),this}),toString:i(function(){return"[object WeakMap]"})}),p(y.prototype,r,i("c","WeakMap"))},59069:$=>{"use strict";var M,K="object"==typeof Reflect?Reflect:null,e=K&&"function"==typeof K.apply?K.apply:function(m,d,A){return Function.prototype.apply.call(m,d,A)};M=K&&"function"==typeof K.ownKeys?K.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var t=Number.isNaN||function(m){return m!=m};function T(){T.init.call(this)}$.exports=T,$.exports.once=function s(g,m){return new Promise(function(d,A){function b(S){g.removeListener(m,c),A(S)}function c(){"function"==typeof g.removeListener&&g.removeListener("error",b),d([].slice.call(arguments))}h(g,m,c,{once:!0}),"error"!==m&&function x(g,m,d){"function"==typeof g.on&&h(g,"error",m,d)}(g,b,{once:!0})})},T.EventEmitter=T,T.prototype._events=void 0,T.prototype._eventsCount=0,T.prototype._maxListeners=void 0;var n=10;function i(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function u(g){return void 0===g._maxListeners?T.defaultMaxListeners:g._maxListeners}function a(g,m,d,A){var b,c,S;if(i(d),void 0===(c=g._events)?(c=g._events=Object.create(null),g._eventsCount=0):(void 0!==c.newListener&&(g.emit("newListener",m,d.listener?d.listener:d),c=g._events),S=c[m]),void 0===S)S=c[m]=d,++g._eventsCount;else if("function"==typeof S?S=c[m]=A?[d,S]:[S,d]:A?S.unshift(d):S.push(d),(b=u(g))>0&&S.length>b&&!S.warned){S.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=g,w.type=m,w.count=S.length,function I(g){console&&console.warn&&console.warn(g)}(w)}return g}function r(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(g,m,d){var A={fired:!1,wrapFn:void 0,target:g,type:m,listener:d},b=r.bind(A);return b.listener=d,A.wrapFn=b,b}function v(g,m,d){var A=g._events;if(void 0===A)return[];var b=A[m];return void 0===b?[]:"function"==typeof b?d?[b.listener||b]:[b]:d?function y(g){for(var m=new Array(g.length),d=0;d<m.length;++d)m[d]=g[d].listener||g[d];return m}(b):f(b,b.length)}function p(g){var m=this._events;if(void 0!==m){var d=m[g];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function f(g,m){for(var d=new Array(m),A=0;A<m;++A)d[A]=g[A];return d}function h(g,m,d,A){if("function"==typeof g.on)A.once?g.once(m,d):g.on(m,d);else{if("function"!=typeof g.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g);g.addEventListener(m,function b(c){A.once&&g.removeEventListener(m,b),d(c)})}}Object.defineProperty(T,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(g){if("number"!=typeof g||g<0||t(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");n=g}}),T.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},T.prototype.setMaxListeners=function(m){if("number"!=typeof m||m<0||t(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this},T.prototype.getMaxListeners=function(){return u(this)},T.prototype.emit=function(m){for(var d=[],A=1;A<arguments.length;A++)d.push(arguments[A]);var b="error"===m,c=this._events;if(void 0!==c)b=b&&void 0===c.error;else if(!b)return!1;if(b){var S;if(d.length>0&&(S=d[0]),S instanceof Error)throw S;var w=new Error("Unhandled error."+(S?" ("+S.message+")":""));throw w.context=S,w}var E=c[m];if(void 0===E)return!1;if("function"==typeof E)e(E,this,d);else{var P=E.length,R=f(E,P);for(A=0;A<P;++A)e(R[A],this,d)}return!0},T.prototype.addListener=function(m,d){return a(this,m,d,!1)},T.prototype.on=T.prototype.addListener,T.prototype.prependListener=function(m,d){return a(this,m,d,!0)},T.prototype.once=function(m,d){return i(d),this.on(m,o(this,m,d)),this},T.prototype.prependOnceListener=function(m,d){return i(d),this.prependListener(m,o(this,m,d)),this},T.prototype.removeListener=function(m,d){var A,b,c,S,w;if(i(d),void 0===(b=this._events))return this;if(void 0===(A=b[m]))return this;if(A===d||A.listener===d)0==--this._eventsCount?this._events=Object.create(null):(delete b[m],b.removeListener&&this.emit("removeListener",m,A.listener||d));else if("function"!=typeof A){for(c=-1,S=A.length-1;S>=0;S--)if(A[S]===d||A[S].listener===d){w=A[S].listener,c=S;break}if(c<0)return this;0===c?A.shift():function l(g,m){for(;m+1<g.length;m++)g[m]=g[m+1];g.pop()}(A,c),1===A.length&&(b[m]=A[0]),void 0!==b.removeListener&&this.emit("removeListener",m,w||d)}return this},T.prototype.off=T.prototype.removeListener,T.prototype.removeAllListeners=function(m){var d,A,b;if(void 0===(A=this._events))return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[m]&&(0==--this._eventsCount?this._events=Object.create(null):delete A[m]),this;if(0===arguments.length){var S,c=Object.keys(A);for(b=0;b<c.length;++b)"removeListener"!==(S=c[b])&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(d=A[m]))this.removeListener(m,d);else if(void 0!==d)for(b=d.length-1;b>=0;b--)this.removeListener(m,d[b]);return this},T.prototype.listeners=function(m){return v(this,m,!0)},T.prototype.rawListeners=function(m){return v(this,m,!1)},T.listenerCount=function(g,m){return"function"==typeof g.listenerCount?g.listenerCount(m):p.call(g,m)},T.prototype.listenerCount=p,T.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]}},43254:$=>{var K=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return K()}try{return __global__||K()}finally{delete Object.prototype.__global__}}()},81530:($,K,e)=>{"use strict";$.exports=e(6370)()?globalThis:e(43254)},6370:$=>{"use strict";$.exports=function(){return!("object"!=typeof globalThis||!globalThis)&&globalThis.Array===Array}},7347:($,K,e)=>{"use strict";var M=e(60713);$.exports=function(I){var t=typeof I;if("string"===t){var T=I;if(0===(I=+I)&&M(T))return!1}else if("number"!==t)return!1;return I-I<1}},97604:($,K,e)=>{var M=e(51186);$.exports=function I(t,T,n){if(!t)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(t)&&t[0]&&"number"==typeof t[0][0]){var a,r,o,v,i=t[0].length,u=t.length*i;(!T||"string"==typeof T)&&(T=new(M(T||"float32"))(u+n));var p=T.length-n;if(u!==p)throw new Error("source length "+u+" ("+i+"x"+t.length+") does not match destination length "+p);for(a=0,o=n;a<t.length;a++)for(r=0;r<i;r++)T[o++]=null===t[a][r]?NaN:t[a][r]}else if(T&&"string"!=typeof T)T.set(t,n);else{var f=M(T||"float32");if(Array.isArray(t)||"array"===T)for(a=0,o=n,v=(T=new f(t.length+n)).length;o<v;o++,a++)T[o]=null===t[a]?NaN:t[a];else 0===n?T=new f(t):(T=new f(t.length+n)).set(t,n)}return T}},63754:($,K,e)=>{"use strict";var M=e(53804),I=[32,126];$.exports=function t(T){var n=(T=T||{}).shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],i=T.canvas||document.createElement("canvas"),u=T.font,a="number"==typeof T.step?[T.step,T.step]:T.step||[32,32],r=T.chars||I;if(u&&"string"!=typeof u&&(u=M(u)),Array.isArray(r)){if(2===r.length&&"number"==typeof r[0]&&"number"==typeof r[1]){for(var o=[],v=r[0],p=0;v<=r[1];v++)o[p++]=String.fromCharCode(v);r=o}}else r=String(r).split("");n=n.slice(),i.width=n[0],i.height=n[1];var f=i.getContext("2d");f.fillStyle="#000",f.fillRect(0,0,i.width,i.height),f.font=u,f.textAlign="center",f.textBaseline="middle",f.fillStyle="#fff";var l=a[0]/2,y=a[1]/2;for(v=0;v<r.length;v++)f.fillText(r[v],l,y),(l+=a[0])>n[0]-a[0]/2&&(l=a[0]/2,y+=a[1]);return i}},88828:$=>{"use strict";function K(r,T){T||(T={}),("string"==typeof r||Array.isArray(r))&&(T.family=r);var n=Array.isArray(T.family)?T.family.join(", "):T.family;if(!n)throw Error("`family` must be defined");var i=T.size||T.fontSize||T.em||48,u=T.weight||T.fontWeight||"",o=(r=[T.style||T.fontStyle||"",u,i].join(" ")+"px "+n,T.origin||"top");if(K.cache[n]&&i<=K.cache[n].em)return e(K.cache[n],o);var v=T.canvas||K.canvas,p=v.getContext("2d"),f={upper:void 0!==T.upper?T.upper:"H",lower:void 0!==T.lower?T.lower:"x",descent:void 0!==T.descent?T.descent:"p",ascent:void 0!==T.ascent?T.ascent:"h",tittle:void 0!==T.tittle?T.tittle:"i",overshoot:void 0!==T.overshoot?T.overshoot:"O"},l=Math.ceil(1.5*i);v.height=l,v.width=.5*l,p.font=r;var y="H",s={top:0};p.clearRect(0,0,l,l),p.textBaseline="top",p.fillStyle="black",p.fillText(y,0,0);var x=M(p.getImageData(0,0,l,l));p.clearRect(0,0,l,l),p.textBaseline="bottom",p.fillText(y,0,l);var h=M(p.getImageData(0,0,l,l));s.lineHeight=s.bottom=l-h+x,p.clearRect(0,0,l,l),p.textBaseline="alphabetic",p.fillText(y,0,l);var m=l-M(p.getImageData(0,0,l,l))-1+x;s.baseline=s.alphabetic=m,p.clearRect(0,0,l,l),p.textBaseline="middle",p.fillText(y,0,.5*l);var d=M(p.getImageData(0,0,l,l));s.median=s.middle=l-d-1+x-.5*l,p.clearRect(0,0,l,l),p.textBaseline="hanging",p.fillText(y,0,.5*l);var A=M(p.getImageData(0,0,l,l));s.hanging=l-A-1+x-.5*l,p.clearRect(0,0,l,l),p.textBaseline="ideographic",p.fillText(y,0,l);var b=M(p.getImageData(0,0,l,l));if(s.ideographic=l-b-1+x,f.upper&&(p.clearRect(0,0,l,l),p.textBaseline="top",p.fillText(f.upper,0,0),s.upper=M(p.getImageData(0,0,l,l)),s.capHeight=s.baseline-s.upper),f.lower&&(p.clearRect(0,0,l,l),p.textBaseline="top",p.fillText(f.lower,0,0),s.lower=M(p.getImageData(0,0,l,l)),s.xHeight=s.baseline-s.lower),f.tittle&&(p.clearRect(0,0,l,l),p.textBaseline="top",p.fillText(f.tittle,0,0),s.tittle=M(p.getImageData(0,0,l,l))),f.ascent&&(p.clearRect(0,0,l,l),p.textBaseline="top",p.fillText(f.ascent,0,0),s.ascent=M(p.getImageData(0,0,l,l))),f.descent&&(p.clearRect(0,0,l,l),p.textBaseline="top",p.fillText(f.descent,0,0),s.descent=I(p.getImageData(0,0,l,l))),f.overshoot){p.clearRect(0,0,l,l),p.textBaseline="top",p.fillText(f.overshoot,0,0);var c=I(p.getImageData(0,0,l,l));s.overshoot=c-m}for(var S in s)s[S]/=i;return s.em=i,K.cache[n]=s,e(s,o)}function e(t,T){var n={};for(var i in"string"==typeof T&&(T=t[T]),t)"em"!==i&&(n[i]=t[i]-T);return n}function M(t){for(var T=t.height,n=t.data,i=3;i<n.length;i+=4)if(0!==n[i])return Math.floor(.25*(i-3)/T)}function I(t){for(var T=t.height,n=t.data,i=n.length-1;i>0;i-=4)if(0!==n[i])return Math.floor(.25*(i-3)/T)}$.exports=K,K.canvas=document.createElement("canvas"),K.cache={}},9435:($,K,e)=>{"use strict";var M=e(27566),I=Object.prototype.toString,t=Object.prototype.hasOwnProperty,T=function(r,o,v){for(var p=0,f=r.length;p<f;p++)t.call(r,p)&&(null==v?o(r[p],p,r):o.call(v,r[p],p,r))},n=function(r,o,v){for(var p=0,f=r.length;p<f;p++)null==v?o(r.charAt(p),p,r):o.call(v,r.charAt(p),p,r)},i=function(r,o,v){for(var p in r)t.call(r,p)&&(null==v?o(r[p],p,r):o.call(v,r[p],p,r))};$.exports=function(r,o,v){if(!M(o))throw new TypeError("iterator must be a function");var p;arguments.length>=3&&(p=v),"[object Array]"===I.call(r)?T(r,o,p):"string"==typeof r?n(r,o,p):i(r,o,p)}},83457:$=>{"use strict";var K="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,M=Math.max,I="[object Function]",t=function(u,a){for(var r=[],o=0;o<u.length;o+=1)r[o]=u[o];for(var v=0;v<a.length;v+=1)r[v+u.length]=a[v];return r},T=function(u,a){for(var r=[],o=a||0,v=0;o<u.length;o+=1,v+=1)r[v]=u[o];return r},n=function(i,u){for(var a="",r=0;r<i.length;r+=1)a+=i[r],r+1<i.length&&(a+=u);return a};$.exports=function(u){var a=this;if("function"!=typeof a||e.apply(a)!==I)throw new TypeError(K+a);for(var o,r=T(arguments,1),v=function(){if(this instanceof o){var s=a.apply(this,t(r,arguments));return Object(s)===s?s:this}return a.apply(u,t(r,arguments))},p=M(0,a.length-r.length),f=[],l=0;l<p;l++)f[l]="$"+l;if(o=Function("binder","return function ("+n(f,",")+"){ return binder.apply(this,arguments); }")(v),a.prototype){var y=function(){};y.prototype=a.prototype,o.prototype=new y,y.prototype=null}return o}},84444:($,K,e)=>{"use strict";var M=e(83457);$.exports=Function.prototype.bind||M},49944:$=>{$.exports=function K(e,M){if("string"!=typeof e)throw new TypeError("must specify type string");if(M=M||{},typeof document>"u"&&!M.canvas)return null;var I=M.canvas||document.createElement("canvas");"number"==typeof M.width&&(I.width=M.width),"number"==typeof M.height&&(I.height=M.height);var T,t=M;try{var n=[e];0===e.indexOf("webgl")&&n.push("experimental-"+e);for(var i=0;i<n.length;i++)if(T=I.getContext(n[i],t))return T}catch{T=null}return T||null}},95203:($,K,e)=>{"use strict";var M,I=SyntaxError,t=Function,T=TypeError,n=function(R){try{return t('"use strict"; return ('+R+").constructor;")()}catch{}},i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch{i=null}var u=function(){throw new T},a=i?function(){try{return arguments.callee,u}catch{try{return i(arguments,"callee").get}catch{return u}}}():u,r=e(92969)(),o=e(49757)(),v=Object.getPrototypeOf||(o?function(R){return R.__proto__}:null),p={},f=typeof Uint8Array>"u"||!v?M:v(Uint8Array),l={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":r&&v?v([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":p,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r&&v?v(v([][Symbol.iterator]())):M,"%JSON%":"object"==typeof JSON?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map>"u"||!r||!v?M:v((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set>"u"||!r||!v?M:v((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r&&v?v(""[Symbol.iterator]()):M,"%Symbol%":r?Symbol:M,"%SyntaxError%":I,"%ThrowTypeError%":a,"%TypedArray%":f,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if(v)try{null.error}catch(R){var y=v(v(R));l["%Error.prototype%"]=y}var s=function R(F){var _;if("%AsyncFunction%"===F)_=n("async function () {}");else if("%GeneratorFunction%"===F)_=n("function* () {}");else if("%AsyncGeneratorFunction%"===F)_=n("async function* () {}");else if("%AsyncGenerator%"===F){var z=R("%AsyncGeneratorFunction%");z&&(_=z.prototype)}else if("%AsyncIteratorPrototype%"===F){var D=R("%AsyncGenerator%");D&&v&&(_=v(D.prototype))}return l[F]=_,_},x={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},h=e(84444),g=e(27699),m=h.call(Function.call,Array.prototype.concat),d=h.call(Function.apply,Array.prototype.splice),A=h.call(Function.call,String.prototype.replace),b=h.call(Function.call,String.prototype.slice),c=h.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(F){var _=b(F,0,1),z=b(F,-1);if("%"===_&&"%"!==z)throw new I("invalid intrinsic syntax, expected closing `%`");if("%"===z&&"%"!==_)throw new I("invalid intrinsic syntax, expected opening `%`");var D=[];return A(F,S,function(k,O,U,H){D[D.length]=U?A(H,w,"$1"):O||k}),D},P=function(F,_){var D,z=F;if(g(x,z)&&(z="%"+(D=x[z])[0]+"%"),g(l,z)){var k=l[z];if(k===p&&(k=s(z)),typeof k>"u"&&!_)throw new T("intrinsic "+F+" exists, but is not available. Please file an issue!");return{alias:D,name:z,value:k}}throw new I("intrinsic "+F+" does not exist!")};$.exports=function(F,_){if("string"!=typeof F||0===F.length)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof _)throw new T('"allowMissing" argument must be a boolean');if(null===c(/^%?[^%]*%?$/,F))throw new I("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var z=E(F),D=z.length>0?z[0]:"",k=P("%"+D+"%",_),O=k.name,U=k.value,H=!1,j=k.alias;j&&(D=j[0],d(z,m([0,1],j)));for(var ee=1,W=!0;ee<z.length;ee+=1){var B=z[ee],te=b(B,0,1),q=b(B,-1);if(('"'===te||"'"===te||"`"===te||'"'===q||"'"===q||"`"===q)&&te!==q)throw new I("property names with quotes must have matching quotes");if(("constructor"===B||!W)&&(H=!0),g(l,O="%"+(D+="."+B)+"%"))U=l[O];else if(null!=U){if(!(B in U)){if(!_)throw new T("base intrinsic for "+F+" exists, but the property is not available.");return}if(i&&ee+1>=z.length){var oe=i(U,B);U=(W=!!oe)&&"get"in oe&&!("originalValue"in oe.get)?oe.get:U[B]}else W=g(U,B),U=U[B];W&&!H&&(l[O]=U)}}return U}},63590:$=>{$.exports=function K(e,M){var I=M[0],t=M[1],T=M[2],n=M[3],i=M[4],u=M[5],a=M[6],r=M[7],o=M[8],v=M[9],p=M[10],f=M[11],l=M[12],y=M[13],s=M[14],x=M[15];return e[0]=u*(p*x-f*s)-v*(a*x-r*s)+y*(a*f-r*p),e[1]=-(t*(p*x-f*s)-v*(T*x-n*s)+y*(T*f-n*p)),e[2]=t*(a*x-r*s)-u*(T*x-n*s)+y*(T*r-n*a),e[3]=-(t*(a*f-r*p)-u*(T*f-n*p)+v*(T*r-n*a)),e[4]=-(i*(p*x-f*s)-o*(a*x-r*s)+l*(a*f-r*p)),e[5]=I*(p*x-f*s)-o*(T*x-n*s)+l*(T*f-n*p),e[6]=-(I*(a*x-r*s)-i*(T*x-n*s)+l*(T*r-n*a)),e[7]=I*(a*f-r*p)-i*(T*f-n*p)+o*(T*r-n*a),e[8]=i*(v*x-f*y)-o*(u*x-r*y)+l*(u*f-r*v),e[9]=-(I*(v*x-f*y)-o*(t*x-n*y)+l*(t*f-n*v)),e[10]=I*(u*x-r*y)-i*(t*x-n*y)+l*(t*r-n*u),e[11]=-(I*(u*f-r*v)-i*(t*f-n*v)+o*(t*r-n*u)),e[12]=-(i*(v*s-p*y)-o*(u*s-a*y)+l*(u*p-a*v)),e[13]=I*(v*s-p*y)-o*(t*s-T*y)+l*(t*p-T*v),e[14]=-(I*(u*s-a*y)-i*(t*s-T*y)+l*(t*a-T*u)),e[15]=I*(u*p-a*v)-i*(t*p-T*v)+o*(t*a-T*u),e}},98511:$=>{$.exports=function K(e){var M=new Float32Array(16);return M[0]=e[0],M[1]=e[1],M[2]=e[2],M[3]=e[3],M[4]=e[4],M[5]=e[5],M[6]=e[6],M[7]=e[7],M[8]=e[8],M[9]=e[9],M[10]=e[10],M[11]=e[11],M[12]=e[12],M[13]=e[13],M[14]=e[14],M[15]=e[15],M}},90781:$=>{$.exports=function K(e,M){return e[0]=M[0],e[1]=M[1],e[2]=M[2],e[3]=M[3],e[4]=M[4],e[5]=M[5],e[6]=M[6],e[7]=M[7],e[8]=M[8],e[9]=M[9],e[10]=M[10],e[11]=M[11],e[12]=M[12],e[13]=M[13],e[14]=M[14],e[15]=M[15],e}},78581:$=>{$.exports=function K(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},38497:$=>{$.exports=function K(e){var M=e[0],I=e[1],t=e[2],T=e[3],n=e[4],i=e[5],u=e[6],a=e[7],r=e[8],o=e[9],v=e[10],p=e[11],f=e[12],l=e[13],y=e[14],s=e[15];return(M*i-I*n)*(v*s-p*y)-(M*u-t*n)*(o*s-p*l)+(M*a-T*n)*(o*y-v*l)+(I*u-t*i)*(r*s-p*f)-(I*a-T*i)*(r*y-v*f)+(t*a-T*u)*(r*l-o*f)}},84088:$=>{$.exports=function K(e,M){var I=M[0],t=M[1],T=M[2],n=M[3],i=I+I,u=t+t,a=T+T,r=I*i,o=t*i,v=t*u,p=T*i,f=T*u,l=T*a,y=n*i,s=n*u,x=n*a;return e[0]=1-v-l,e[1]=o+x,e[2]=p-s,e[3]=0,e[4]=o-x,e[5]=1-r-l,e[6]=f+y,e[7]=0,e[8]=p+s,e[9]=f-y,e[10]=1-r-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},7449:$=>{$.exports=function K(e,M,I){var t,T,n,i=I[0],u=I[1],a=I[2],r=Math.sqrt(i*i+u*u+a*a);return Math.abs(r)<1e-6?null:(i*=r=1/r,u*=r,a*=r,t=Math.sin(M),T=Math.cos(M),n=1-T,e[0]=i*i*n+T,e[1]=u*i*n+a*t,e[2]=a*i*n-u*t,e[3]=0,e[4]=i*u*n-a*t,e[5]=u*u*n+T,e[6]=a*u*n+i*t,e[7]=0,e[8]=i*a*n+u*t,e[9]=u*a*n-i*t,e[10]=a*a*n+T,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}},93824:$=>{$.exports=function K(e,M,I){var t=M[0],T=M[1],n=M[2],i=M[3],u=t+t,a=T+T,r=n+n,o=t*u,v=t*a,p=t*r,f=T*a,l=T*r,y=n*r,s=i*u,x=i*a,h=i*r;return e[0]=1-(f+y),e[1]=v+h,e[2]=p-x,e[3]=0,e[4]=v-h,e[5]=1-(o+y),e[6]=l+s,e[7]=0,e[8]=p+x,e[9]=l-s,e[10]=1-(o+f),e[11]=0,e[12]=I[0],e[13]=I[1],e[14]=I[2],e[15]=1,e}},82925:$=>{$.exports=function K(e,M){return e[0]=M[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=M[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=M[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},50307:$=>{$.exports=function K(e,M){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=M[0],e[13]=M[1],e[14]=M[2],e[15]=1,e}},54985:$=>{$.exports=function K(e,M){var I=Math.sin(M),t=Math.cos(M);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=I,e[7]=0,e[8]=0,e[9]=-I,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},17220:$=>{$.exports=function K(e,M){var I=Math.sin(M),t=Math.cos(M);return e[0]=t,e[1]=0,e[2]=-I,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=I,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},16983:$=>{$.exports=function K(e,M){var I=Math.sin(M),t=Math.cos(M);return e[0]=t,e[1]=I,e[2]=0,e[3]=0,e[4]=-I,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},42435:$=>{$.exports=function K(e,M,I,t,T,n,i){var u=1/(I-M),a=1/(T-t),r=1/(n-i);return e[0]=2*n*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*a,e[6]=0,e[7]=0,e[8]=(I+M)*u,e[9]=(T+t)*a,e[10]=(i+n)*r,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n*2*r,e[15]=0,e}},78158:$=>{$.exports=function K(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},22971:($,K,e)=>{$.exports={create:e(78581),clone:e(98511),copy:e(90781),identity:e(78158),transpose:e(31679),invert:e(89750),adjoint:e(63590),determinant:e(38497),multiply:e(47777),translate:e(40930),scale:e(56055),rotate:e(37866),rotateX:e(12137),rotateY:e(34527),rotateZ:e(22623),fromRotation:e(7449),fromRotationTranslation:e(93824),fromScaling:e(82925),fromTranslation:e(50307),fromXRotation:e(54985),fromYRotation:e(17220),fromZRotation:e(16983),fromQuat:e(84088),frustum:e(42435),perspective:e(51282),perspectiveFromFieldOfView:e(80422),ortho:e(67810),lookAt:e(93931),str:e(57936)}},89750:$=>{$.exports=function K(e,M){var I=M[0],t=M[1],T=M[2],n=M[3],i=M[4],u=M[5],a=M[6],r=M[7],o=M[8],v=M[9],p=M[10],f=M[11],l=M[12],y=M[13],s=M[14],x=M[15],h=I*u-t*i,g=I*a-T*i,m=I*r-n*i,d=t*a-T*u,A=t*r-n*u,b=T*r-n*a,c=o*y-v*l,S=o*s-p*l,w=o*x-f*l,E=v*s-p*y,P=v*x-f*y,R=p*x-f*s,F=h*R-g*P+m*E+d*w-A*S+b*c;return F?(F=1/F,e[0]=(u*R-a*P+r*E)*F,e[1]=(T*P-t*R-n*E)*F,e[2]=(y*b-s*A+x*d)*F,e[3]=(p*A-v*b-f*d)*F,e[4]=(a*w-i*R-r*S)*F,e[5]=(I*R-T*w+n*S)*F,e[6]=(s*m-l*b-x*g)*F,e[7]=(o*b-p*m+f*g)*F,e[8]=(i*P-u*w+r*c)*F,e[9]=(t*w-I*P-n*c)*F,e[10]=(l*A-y*m+x*h)*F,e[11]=(v*m-o*A-f*h)*F,e[12]=(u*S-i*E-a*c)*F,e[13]=(I*E-t*S+T*c)*F,e[14]=(y*g-l*d-s*h)*F,e[15]=(o*d-v*g+p*h)*F,e):null}},93931:($,K,e)=>{var M=e(78158);$.exports=function I(t,T,n,i){var u,a,r,o,v,p,f,l,y,s,x=T[0],h=T[1],g=T[2],m=i[0],d=i[1],A=i[2],b=n[0],c=n[1],S=n[2];return Math.abs(x-b)<1e-6&&Math.abs(h-c)<1e-6&&Math.abs(g-S)<1e-6?M(t):(f=x-b,l=h-c,y=g-S,s=1/Math.sqrt(f*f+l*l+y*y),u=d*(y*=s)-A*(l*=s),a=A*(f*=s)-m*y,r=m*l-d*f,(s=Math.sqrt(u*u+a*a+r*r))?(u*=s=1/s,a*=s,r*=s):(u=0,a=0,r=0),o=l*r-y*a,v=y*u-f*r,p=f*a-l*u,(s=Math.sqrt(o*o+v*v+p*p))?(o*=s=1/s,v*=s,p*=s):(o=0,v=0,p=0),t[0]=u,t[1]=o,t[2]=f,t[3]=0,t[4]=a,t[5]=v,t[6]=l,t[7]=0,t[8]=r,t[9]=p,t[10]=y,t[11]=0,t[12]=-(u*x+a*h+r*g),t[13]=-(o*x+v*h+p*g),t[14]=-(f*x+l*h+y*g),t[15]=1,t)}},47777:$=>{$.exports=function K(e,M,I){var t=M[0],T=M[1],n=M[2],i=M[3],u=M[4],a=M[5],r=M[6],o=M[7],v=M[8],p=M[9],f=M[10],l=M[11],y=M[12],s=M[13],x=M[14],h=M[15],g=I[0],m=I[1],d=I[2],A=I[3];return e[0]=g*t+m*u+d*v+A*y,e[1]=g*T+m*a+d*p+A*s,e[2]=g*n+m*r+d*f+A*x,e[3]=g*i+m*o+d*l+A*h,g=I[4],m=I[5],d=I[6],A=I[7],e[4]=g*t+m*u+d*v+A*y,e[5]=g*T+m*a+d*p+A*s,e[6]=g*n+m*r+d*f+A*x,e[7]=g*i+m*o+d*l+A*h,g=I[8],m=I[9],d=I[10],A=I[11],e[8]=g*t+m*u+d*v+A*y,e[9]=g*T+m*a+d*p+A*s,e[10]=g*n+m*r+d*f+A*x,e[11]=g*i+m*o+d*l+A*h,g=I[12],m=I[13],d=I[14],A=I[15],e[12]=g*t+m*u+d*v+A*y,e[13]=g*T+m*a+d*p+A*s,e[14]=g*n+m*r+d*f+A*x,e[15]=g*i+m*o+d*l+A*h,e}},67810:$=>{$.exports=function K(e,M,I,t,T,n,i){var u=1/(M-I),a=1/(t-T),r=1/(n-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*r,e[11]=0,e[12]=(M+I)*u,e[13]=(T+t)*a,e[14]=(i+n)*r,e[15]=1,e}},51282:$=>{$.exports=function K(e,M,I,t,T){var n=1/Math.tan(M/2),i=1/(t-T);return e[0]=n/I,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(T+t)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*T*t*i,e[15]=0,e}},80422:$=>{$.exports=function K(e,M,I,t){var T=Math.tan(M.upDegrees*Math.PI/180),n=Math.tan(M.downDegrees*Math.PI/180),i=Math.tan(M.leftDegrees*Math.PI/180),u=Math.tan(M.rightDegrees*Math.PI/180),a=2/(i+u),r=2/(T+n);return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=-(i-u)*a*.5,e[9]=(T-n)*r*.5,e[10]=t/(I-t),e[11]=-1,e[12]=0,e[13]=0,e[14]=t*I/(I-t),e[15]=0,e}},37866:$=>{$.exports=function K(e,M,I,t){var a,r,o,v,p,f,l,y,s,x,h,g,m,d,A,b,c,S,w,E,P,R,F,_,T=t[0],n=t[1],i=t[2],u=Math.sqrt(T*T+n*n+i*i);return Math.abs(u)<1e-6?null:(T*=u=1/u,n*=u,i*=u,a=Math.sin(I),r=Math.cos(I),o=1-r,v=M[0],p=M[1],f=M[2],l=M[3],y=M[4],s=M[5],x=M[6],h=M[7],g=M[8],m=M[9],d=M[10],A=M[11],b=T*T*o+r,c=n*T*o+i*a,S=i*T*o-n*a,w=T*n*o-i*a,E=n*n*o+r,P=i*n*o+T*a,R=T*i*o+n*a,F=n*i*o-T*a,_=i*i*o+r,e[0]=v*b+y*c+g*S,e[1]=p*b+s*c+m*S,e[2]=f*b+x*c+d*S,e[3]=l*b+h*c+A*S,e[4]=v*w+y*E+g*P,e[5]=p*w+s*E+m*P,e[6]=f*w+x*E+d*P,e[7]=l*w+h*E+A*P,e[8]=v*R+y*F+g*_,e[9]=p*R+s*F+m*_,e[10]=f*R+x*F+d*_,e[11]=l*R+h*F+A*_,M!==e&&(e[12]=M[12],e[13]=M[13],e[14]=M[14],e[15]=M[15]),e)}},12137:$=>{$.exports=function K(e,M,I){var t=Math.sin(I),T=Math.cos(I),n=M[4],i=M[5],u=M[6],a=M[7],r=M[8],o=M[9],v=M[10],p=M[11];return M!==e&&(e[0]=M[0],e[1]=M[1],e[2]=M[2],e[3]=M[3],e[12]=M[12],e[13]=M[13],e[14]=M[14],e[15]=M[15]),e[4]=n*T+r*t,e[5]=i*T+o*t,e[6]=u*T+v*t,e[7]=a*T+p*t,e[8]=r*T-n*t,e[9]=o*T-i*t,e[10]=v*T-u*t,e[11]=p*T-a*t,e}},34527:$=>{$.exports=function K(e,M,I){var t=Math.sin(I),T=Math.cos(I),n=M[0],i=M[1],u=M[2],a=M[3],r=M[8],o=M[9],v=M[10],p=M[11];return M!==e&&(e[4]=M[4],e[5]=M[5],e[6]=M[6],e[7]=M[7],e[12]=M[12],e[13]=M[13],e[14]=M[14],e[15]=M[15]),e[0]=n*T-r*t,e[1]=i*T-o*t,e[2]=u*T-v*t,e[3]=a*T-p*t,e[8]=n*t+r*T,e[9]=i*t+o*T,e[10]=u*t+v*T,e[11]=a*t+p*T,e}},22623:$=>{$.exports=function K(e,M,I){var t=Math.sin(I),T=Math.cos(I),n=M[0],i=M[1],u=M[2],a=M[3],r=M[4],o=M[5],v=M[6],p=M[7];return M!==e&&(e[8]=M[8],e[9]=M[9],e[10]=M[10],e[11]=M[11],e[12]=M[12],e[13]=M[13],e[14]=M[14],e[15]=M[15]),e[0]=n*T+r*t,e[1]=i*T+o*t,e[2]=u*T+v*t,e[3]=a*T+p*t,e[4]=r*T-n*t,e[5]=o*T-i*t,e[6]=v*T-u*t,e[7]=p*T-a*t,e}},56055:$=>{$.exports=function K(e,M,I){var t=I[0],T=I[1],n=I[2];return e[0]=M[0]*t,e[1]=M[1]*t,e[2]=M[2]*t,e[3]=M[3]*t,e[4]=M[4]*T,e[5]=M[5]*T,e[6]=M[6]*T,e[7]=M[7]*T,e[8]=M[8]*n,e[9]=M[9]*n,e[10]=M[10]*n,e[11]=M[11]*n,e[12]=M[12],e[13]=M[13],e[14]=M[14],e[15]=M[15],e}},57936:$=>{$.exports=function K(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},40930:$=>{$.exports=function K(e,M,I){var i,u,a,r,o,v,p,f,l,y,s,x,t=I[0],T=I[1],n=I[2];return M===e?(e[12]=M[0]*t+M[4]*T+M[8]*n+M[12],e[13]=M[1]*t+M[5]*T+M[9]*n+M[13],e[14]=M[2]*t+M[6]*T+M[10]*n+M[14],e[15]=M[3]*t+M[7]*T+M[11]*n+M[15]):(i=M[0],u=M[1],a=M[2],r=M[3],o=M[4],v=M[5],p=M[6],f=M[7],l=M[8],y=M[9],s=M[10],x=M[11],e[0]=i,e[1]=u,e[2]=a,e[3]=r,e[4]=o,e[5]=v,e[6]=p,e[7]=f,e[8]=l,e[9]=y,e[10]=s,e[11]=x,e[12]=i*t+o*T+l*n+M[12],e[13]=u*t+v*T+y*n+M[13],e[14]=a*t+p*T+s*n+M[14],e[15]=r*t+f*T+x*n+M[15]),e}},31679:$=>{$.exports=function K(e,M){if(e===M){var I=M[1],t=M[2],T=M[3],n=M[6],i=M[7],u=M[11];e[1]=M[4],e[2]=M[8],e[3]=M[12],e[4]=I,e[6]=M[9],e[7]=M[13],e[8]=t,e[9]=n,e[11]=M[14],e[12]=T,e[13]=i,e[14]=u}else e[0]=M[0],e[1]=M[4],e[2]=M[8],e[3]=M[12],e[4]=M[1],e[5]=M[5],e[6]=M[9],e[7]=M[13],e[8]=M[2],e[9]=M[6],e[10]=M[10],e[11]=M[14],e[12]=M[3],e[13]=M[7],e[14]=M[11],e[15]=M[15];return e}},60532:($,K,e)=>{"use strict";var M=e(53291),I=e(9284),t=e(20884),T=e(85509),n=e(21713),i=e(92473),u=e(63754),a=e(87296),r=e(60574),o=e(48077),v=e(97252),p=e(11538),f=e(36605),l=e(35943),y=e(88828),s=e(97604),h=e(67708).nextPow2,g=new n,m=!1;if(document.body){var d=document.body.appendChild(document.createElement("div"));d.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(d).fontStretch&&(m=!0),document.body.removeChild(d)}var A=function(S){!function b(c){return"function"==typeof c&&c._gl&&c.prop&&c.texture&&c.buffer}(S)?this.gl=T(S):(S={regl:S},this.gl=S.regl._gl),this.shader=g.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=S.regl||t({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),g.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(o(S)?S:{})};A.prototype.createShader=function(){var S=this.regl,w=S({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:S.prop("count"),offset:S.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:S.this("sizeBuffer")},width:{offset:0,stride:8,buffer:S.this("sizeBuffer")},char:S.this("charBuffer"),position:S.this("position")},uniforms:{atlasSize:function(P,R){return[R.atlas.width,R.atlas.height]},atlasDim:function(P,R){return[R.atlas.cols,R.atlas.rows]},atlas:function(P,R){return R.atlas.texture},charStep:function(P,R){return R.atlas.step},em:function(P,R){return R.atlas.em},color:S.prop("color"),opacity:S.prop("opacity"),viewport:S.this("viewportArray"),scale:S.this("scale"),align:S.prop("align"),baseline:S.prop("baseline"),translate:S.this("translate"),positionOffset:S.prop("positionOffset")},primitive:"points",viewport:S.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:S,draw:w,atlas:{}}},A.prototype.update=function(S){var w=this;if("string"==typeof S)S={text:S};else if(!S)return;null!=(S=I(S,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(S.opacity)?this.opacity=S.opacity.map(function(Pe){return parseFloat(Pe)}):this.opacity=parseFloat(S.opacity)),null!=S.viewport&&(this.viewport=r(S.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=S.kerning&&(this.kerning=S.kerning),null!=S.offset&&("number"==typeof S.offset&&(S.offset=[S.offset,0]),this.positionOffset=s(S.offset)),S.direction&&(this.direction=S.direction),S.range&&(this.range=S.range,this.scale=[1/(S.range[2]-S.range[0]),1/(S.range[3]-S.range[1])],this.translate=[-S.range[0],-S.range[1]]),S.scale&&(this.scale=S.scale),S.translate&&(this.translate=S.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!S.font&&(S.font=A.baseFontSize+"px sans-serif");var _,E=!1,P=!1;if(S.font&&(Array.isArray(S.font)?S.font:[S.font]).forEach(function(Pe,Ie){if("string"==typeof Pe)try{Pe=M.parse(Pe)}catch{Pe=M.parse(A.baseFontSize+"px "+Pe)}else Pe=M.parse(M.stringify(Pe));var Qe=M.stringify({size:A.baseFontSize,family:Pe.family,stretch:m?Pe.stretch:void 0,variant:Pe.variant,weight:Pe.weight,style:Pe.style}),at=v(Pe.size),Be=Math.round(at[0]*p(at[1]));if(Be!==w.fontSize[Ie]&&(P=!0,w.fontSize[Ie]=Be),!(w.font[Ie]&&Qe==w.font[Ie].baseString||(E=!0,w.font[Ie]=A.fonts[Qe],w.font[Ie]))){var Ne=Pe.family.join(", "),nt=[Pe.style];Pe.style!=Pe.variant&&nt.push(Pe.variant),Pe.variant!=Pe.weight&&nt.push(Pe.weight),m&&Pe.weight!=Pe.stretch&&nt.push(Pe.stretch),w.font[Ie]={baseString:Qe,family:Ne,weight:Pe.weight,stretch:Pe.stretch,style:Pe.style,variant:Pe.variant,width:{},kerning:{},metrics:y(Ne,{origin:"top",fontSize:A.baseFontSize,fontStyle:nt.join(" ")})},A.fonts[Qe]=w.font[Ie]}}),(E||P)&&this.font.forEach(function(Pe,Ie){var Qe=M.stringify({size:w.fontSize[Ie],family:Pe.family,stretch:m?Pe.stretch:void 0,variant:Pe.variant,weight:Pe.weight,style:Pe.style});if(w.fontAtlas[Ie]=w.shader.atlas[Qe],!w.fontAtlas[Ie]){var at=Pe.metrics;w.shader.atlas[Qe]=w.fontAtlas[Ie]={fontString:Qe,step:2*Math.ceil(w.fontSize[Ie]*at.bottom*.5),em:w.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}}null==S.text&&(S.text=w.text)}),"string"==typeof S.text&&S.position&&S.position.length>2){for(var R=Array(.5*S.position.length),F=0;F<R.length;F++)R[F]=S.text;S.text=R}if(null!=S.text||E){if(this.textOffsets=[0],Array.isArray(S.text)){this.count=S.text[0].length,this.counts=[this.count];for(var z=1;z<S.text.length;z++)this.textOffsets[z]=this.textOffsets[z-1]+S.text[z-1].length,this.count+=S.text[z].length,this.counts.push(S.text[z].length);this.text=S.text.join("")}else this.text=S.text,this.count=this.text.length,this.counts=[this.count];_=[],this.font.forEach(function(Pe,Ie){A.atlasContext.font=Pe.baseString;for(var Qe=w.fontAtlas[Ie],at=0;at<w.text.length;at++){var Be=w.text.charAt(at);if(null==Qe.ids[Be]&&(Qe.ids[Be]=Qe.chars.length,Qe.chars.push(Be),_.push(Be)),null==Pe.width[Be]&&(Pe.width[Be]=A.atlasContext.measureText(Be).width/A.baseFontSize,w.kerning)){var Ne=[];for(var nt in Pe.width)Ne.push(nt+Be,Be+nt);l(Pe.kerning,f(Pe.family,{pairs:Ne}))}}})}if(S.position)if(S.position.length>2){for(var D=!S.position[0].length,k=a.mallocFloat(2*this.count),O=0,U=0;O<this.counts.length;O++){var H=this.counts[O];if(D)for(var j=0;j<H;j++)k[U++]=S.position[2*O],k[U++]=S.position[2*O+1];else for(var ee=0;ee<H;ee++)k[U++]=S.position[O][0],k[U++]=S.position[O][1]}this.position.call?this.position({type:"float",data:k}):this.position=this.regl.buffer({type:"float",data:k}),a.freeFloat(k)}else this.position.destroy&&this.position.destroy(),this.position={constant:S.position};if(S.text||E){var W=a.mallocUint8(this.count),B=a.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,q=0;te<this.counts.length;te++){for(var oe=this.counts[te],ie=this.font[te]||this.font[0],V=this.fontAtlas[te]||this.fontAtlas[0],Y=0;Y<oe;Y++){var ae=this.text.charAt(q),X=this.text.charAt(q-1);if(W[q]=V.ids[ae],B[2*q]=ie.width[ae],Y){var J=B[2*q-2],ue=B[2*q],ne=B[2*q-1]+.5*J+.5*ue;if(this.kerning){var se=ie.kerning[X+ae];se&&(ne+=.001*se)}B[2*q+1]=ne}else B[2*q+1]=.5*B[2*q];q++}this.textWidth.push(B.length?.5*B[2*q-2]+B[2*q-1]:0)}S.align||(S.align=this.align),this.charBuffer({data:W,type:"uint8",usage:"stream"}),this.sizeBuffer({data:B,type:"float",usage:"stream"}),a.freeUint8(W),a.freeFloat(B),_.length&&this.font.forEach(function(Pe,Ie){var Qe=w.fontAtlas[Ie],at=Qe.step,Be=Math.floor(A.maxAtlasSize/at),Ne=Math.min(Be,Qe.chars.length),nt=Math.ceil(Qe.chars.length/Ne),ct=h(Ne*at),mt=h(nt*at);Qe.width=ct,Qe.height=mt,Qe.rows=nt,Qe.cols=Ne,Qe.em&&Qe.texture({data:u({canvas:A.atlasCanvas,font:Qe.fontString,chars:Qe.chars,shape:[ct,mt],step:[at,at]})})})}if(S.align&&(this.align=S.align,this.alignOffset=this.textWidth.map(function(Pe,Ie){var Qe=Array.isArray(w.align)?w.align.length>1?w.align[Ie]:w.align[0]:w.align;if("number"==typeof Qe)return Qe;switch(Qe){case"right":case"end":return-Pe;case"center":case"centre":case"middle":return.5*-Pe}return 0})),null==this.baseline&&null==S.baseline&&(S.baseline=0),null!=S.baseline&&(this.baseline=S.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Pe,Ie){var Qe=(w.font[Ie]||w.font[0]).metrics,at=0;return at+=.5*Qe.bottom,at+="number"==typeof Pe?Pe-Qe.baseline:-Qe[Pe],at*=-1})),null!=S.color)if(S.color||(S.color="transparent"),"string"!=typeof S.color&&isNaN(S.color)){var de;if("number"==typeof S.color[0]&&S.color.length>this.counts.length){var be=S.color.length;de=a.mallocUint8(be);for(var De=(S.color.subarray||S.color.slice).bind(S.color),_e=0;_e<be;_e+=4)de.set(i(De(_e,_e+4),"uint8"),_e)}else{var Ce=S.color.length;de=a.mallocUint8(4*Ce);for(var Le=0;Le<Ce;Le++)de.set(i(S.color[Le]||0,"uint8"),4*Le)}this.color=de}else this.color=i(S.color,"uint8");if(S.position||S.text||S.color||S.baseline||S.align||S.font||S.offset||S.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ke=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ke);for(var ze=0;ze<this.batch.length;ze++)this.batch[ze]={count:this.counts.length>1?this.counts[ze]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ze]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ze,4*ze+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ze]:this.opacity,baseline:null!=this.baselineOffset[ze]?this.baselineOffset[ze]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ze]?this.alignOffset[ze]:this.alignOffset[0]:0,atlas:this.fontAtlas[ze]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ze,2*ze+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},$.exports=A},48077:$=>{"use strict";var K=Object.prototype.toString;$.exports=function(e){var M;return"[object Object]"===K.call(e)&&(null===(M=Object.getPrototypeOf(e))||M===Object.getPrototypeOf({}))}},85509:($,K,e)=>{"use strict";var M=e(9284);function I(u){if(u.container)if(u.container==document.body)document.body.style.width||(u.canvas.width=u.width||u.pixelRatio*global.innerWidth),document.body.style.height||(u.canvas.height=u.height||u.pixelRatio*global.innerHeight);else{var a=u.container.getBoundingClientRect();u.canvas.width=u.width||a.right-a.left,u.canvas.height=u.height||a.bottom-a.top}}function t(u){return"function"==typeof u.getContext&&"width"in u&&"height"in u}function i(){var u=document.createElement("canvas");return u.style.position="absolute",u.style.top=0,u.style.left=0,u}$.exports=function(a){if(a?"string"==typeof a&&(a={container:a}):a={},(a=t(a)||function T(u){return"string"==typeof u.nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect}(a)?{container:a}:function n(u){return"function"==typeof u.drawArrays||"function"==typeof u.drawElements}(a)?{gl:a}:M(a,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(a.pixelRatio=global.pixelRatio||1),a.gl)return a.gl;if(a.canvas&&(a.container=a.canvas.parentNode),a.container){if("string"==typeof a.container){var r=document.querySelector(a.container);if(!r)throw Error("Element "+a.container+" is not found");a.container=r}t(a.container)?(a.canvas=a.container,a.container=a.canvas.parentNode):a.canvas||(a.canvas=i(),a.container.appendChild(a.canvas),I(a))}else if(!a.canvas){if(!(typeof document<"u"))throw Error("Not DOM environment. Use headless-gl.");a.container=document.body||document.documentElement,a.canvas=i(),a.container.appendChild(a.canvas),I(a)}return a.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(o){try{a.gl=a.canvas.getContext(o,a.attrs)}catch{}return a.gl}),a.gl}},13215:$=>{$.exports=function(K){"string"==typeof K&&(K=[K]);for(var e=[].slice.call(arguments,1),M=[],I=0;I<K.length-1;I++)M.push(K[I],e[I]||"");return M.push(K[I]),M.join("")}},47378:($,K,e)=>{"use strict";var I=e(95203)("%Object.getOwnPropertyDescriptor%",!0);if(I)try{I([],"length")}catch{I=null}$.exports=I},60075:($,K,e)=>{"use strict";var I,M=e(59495);I="function"==typeof global.matchMedia?!global.matchMedia("(hover: none)").matches:M,$.exports=I},45519:($,K,e)=>{"use strict";var M=e(59495);$.exports=M&&function I(){var t=!1;try{var T=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{t=!1}return t}()},77027:($,K,e)=>{"use strict";var I=e(95203)("%Object.defineProperty%",!0),t=function(){if(I)try{return I({},"a",{value:1}),!0}catch{return!1}return!1};t.hasArrayLengthDefineBug=function(){if(!t())return null;try{return 1!==I([],"length",{value:1}).length}catch{return!0}},$.exports=t},49757:$=>{"use strict";var K={foo:{}},e=Object;$.exports=function(){return{__proto__:K}.foo===K.foo&&!({__proto__:null}instanceof e)}},92969:($,K,e)=>{"use strict";var M=typeof Symbol<"u"&&Symbol,I=e(81983);$.exports=function(){return"function"==typeof M&&"function"==typeof Symbol&&"symbol"==typeof M("foo")&&"symbol"==typeof Symbol("bar")&&I()}},81983:$=>{"use strict";$.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},M=Symbol("test"),I=Object(M);if("string"==typeof M||"[object Symbol]"!==Object.prototype.toString.call(M)||"[object Symbol]"!==Object.prototype.toString.call(I))return!1;for(M in e[M]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var T=Object.getOwnPropertySymbols(e);if(1!==T.length||T[0]!==M||!Object.prototype.propertyIsEnumerable.call(e,M))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,M);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},46259:($,K,e)=>{"use strict";var M=e(81983);$.exports=function(){return M()&&!!Symbol.toStringTag}},27699:($,K,e)=>{"use strict";var M=Function.prototype.call,I=Object.prototype.hasOwnProperty,t=e(84444);$.exports=t.call(M,I)},48461:($,K)=>{K.read=function(e,M,I,t,T){var n,i,u=8*T-t-1,a=(1<<u)-1,r=a>>1,o=-7,v=I?T-1:0,p=I?-1:1,f=e[M+v];for(v+=p,n=f&(1<<-o)-1,f>>=-o,o+=u;o>0;n=256*n+e[M+v],v+=p,o-=8);for(i=n&(1<<-o)-1,n>>=-o,o+=t;o>0;i=256*i+e[M+v],v+=p,o-=8);if(0===n)n=1-r;else{if(n===a)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,t),n-=r}return(f?-1:1)*i*Math.pow(2,n-t)},K.write=function(e,M,I,t,T,n){var i,u,a,r=8*n-T-1,o=(1<<r)-1,v=o>>1,p=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,f=t?0:n-1,l=t?1:-1,y=M<0||0===M&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(u=isNaN(M)?1:0,i=o):(i=Math.floor(Math.log(M)/Math.LN2),M*(a=Math.pow(2,-i))<1&&(i--,a*=2),(M+=i+v>=1?p/a:p*Math.pow(2,1-v))*a>=2&&(i++,a/=2),i+v>=o?(u=0,i=o):i+v>=1?(u=(M*a-1)*Math.pow(2,T),i+=v):(u=M*Math.pow(2,v-1)*Math.pow(2,T),i=0));T>=8;e[I+f]=255&u,f+=l,u/=256,T-=8);for(i=i<<T|u,r+=T;r>0;e[I+f]=255&i,f+=l,i/=256,r-=8);e[I+f-l]|=128*y}},83894:$=>{"function"==typeof Object.create?$.exports=function(e,M){M&&(e.super_=M,e.prototype=Object.create(M.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:$.exports=function(e,M){if(M){e.super_=M;var I=function(){};I.prototype=M.prototype,e.prototype=new I,e.prototype.constructor=e}}},13407:($,K,e)=>{"use strict";var M=e(46259)(),t=e(75834)("Object.prototype.toString"),T=function(a){return!(M&&a&&"object"==typeof a&&Symbol.toStringTag in a)&&"[object Arguments]"===t(a)},n=function(a){return!!T(a)||null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Array]"!==t(a)&&"[object Function]"===t(a.callee)},i=function(){return T(arguments)}();T.isLegacyArguments=n,$.exports=i?T:n},59495:$=>{$.exports=!0},27566:$=>{"use strict";var M,I,K=Function.prototype.toString,e="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof e&&"function"==typeof Object.defineProperty)try{M=Object.defineProperty({},"length",{get:function(){throw I}}),I={},e(function(){throw 42},null,M)}catch(x){x!==I&&(e=null)}else e=null;var t=/^\s*class\b/,T=function(h){try{var g=K.call(h);return t.test(g)}catch{return!1}},n=function(h){try{return!T(h)&&(K.call(h),!0)}catch{return!1}},i=Object.prototype.toString,f="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),y=function(){return!1};if("object"==typeof document){var s=document.all;i.call(s)===i.call(document.all)&&(y=function(h){if((l||!h)&&(typeof h>"u"||"object"==typeof h))try{var g=i.call(h);return("[object HTMLAllCollection]"===g||"[object HTML document.all class]"===g||"[object HTMLCollection]"===g||"[object Object]"===g)&&null==h("")}catch{}return!1})}$.exports=e?function(h){if(y(h))return!0;if(!h||"function"!=typeof h&&"object"!=typeof h)return!1;try{e(h,null,M)}catch(g){if(g!==I)return!1}return!T(h)&&n(h)}:function(h){if(y(h))return!0;if(!h||"function"!=typeof h&&"object"!=typeof h)return!1;if(f)return n(h);if(T(h))return!1;var g=i.call(h);return!("[object Function]"!==g&&"[object GeneratorFunction]"!==g&&!/^\[object HTML/.test(g))&&n(h)}},20110:($,K,e)=>{"use strict";var u,M=Object.prototype.toString,I=Function.prototype.toString,t=/^\s*(?:function)?\*/,T=e(46259)(),n=Object.getPrototypeOf;$.exports=function(r){if("function"!=typeof r)return!1;if(t.test(I.call(r)))return!0;if(!T)return"[object GeneratorFunction]"===M.call(r);if(!n)return!1;if(typeof u>"u"){var v=function(){if(!T)return!1;try{return Function("return function*() {}")()}catch{}}();u=!!v&&n(v)}return n(r)===u}},39521:$=>{"use strict";$.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},48214:$=>{"use strict";$.exports=I,$.exports.isMobile=I,$.exports.default=I;const K=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function I(t){t||(t={});let T=t.ua;if(!T&&typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&"string"==typeof T.headers["user-agent"]&&(T=T.headers["user-agent"]),"string"!=typeof T)return!1;let n=K.test(T)&&!e.test(T)||!!t.tablet&&M.test(T);return!n&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==T.indexOf("Macintosh")&&-1!==T.indexOf("Safari")&&(n=!0),n}},67434:$=>{"use strict";$.exports=function(e){return e!=e}},94572:($,K,e)=>{"use strict";var M=e(55685),I=e(32358),t=e(67434),T=e(99717),n=e(12406),i=M(T(),Number);I(i,{getPolyfill:T,implementation:t,shim:n}),$.exports=i},99717:($,K,e)=>{"use strict";var M=e(67434);$.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},12406:($,K,e)=>{"use strict";var M=e(32358),I=e(99717);$.exports=function(){var T=I();return M(Number,{isNaN:T},{isNaN:function(){return Number.isNaN!==T}}),T}},41888:$=>{"use strict";$.exports=function(K){var e=typeof K;return null!==K&&("object"===e||"function"===e)}},60713:$=>{"use strict";$.exports=function(K){for(var M,e=K.length,I=0;I<e;I++)if(((M=K.charCodeAt(I))<9||M>13)&&32!==M&&133!==M&&160!==M&&5760!==M&&6158!==M&&(M<8192||M>8205)&&8232!==M&&8233!==M&&8239!==M&&8287!==M&&8288!==M&&12288!==M&&65279!==M)return!1;return!0}},40051:$=>{"use strict";$.exports=function(e){return"string"==typeof e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))}},80597:($,K,e)=>{"use strict";var M=e(42031);$.exports=function(t){return!!M(t)}},26596:$=>{"use strict";$.exports=Math.log2||function(K){return Math.log(K)*Math.LOG2E}},71546:($,K,e)=>{"use strict";$.exports=function I(t,T){T||(T=t,t=window);var n=0,i=0,u=0,a={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function o(d){var A=!1;return"altKey"in d&&(A=A||d.altKey!==a.alt,a.alt=!!d.altKey),"shiftKey"in d&&(A=A||d.shiftKey!==a.shift,a.shift=!!d.shiftKey),"ctrlKey"in d&&(A=A||d.ctrlKey!==a.control,a.control=!!d.ctrlKey),"metaKey"in d&&(A=A||d.metaKey!==a.meta,a.meta=!!d.metaKey),A}function v(d,A){var b=M.x(A),c=M.y(A);"buttons"in A&&(d=0|A.buttons),(d!==n||b!==i||c!==u||o(A))&&(n=0|d,i=b||0,u=c||0,T&&T(n,i,u,a))}function p(d){v(0,d)}function f(){(n||i||u||a.shift||a.alt||a.meta||a.control)&&(i=u=0,n=0,a.shift=a.alt=a.control=a.meta=!1,T&&T(0,0,0,a))}function l(d){o(d)&&T&&T(n,i,u,a)}function y(d){0===M.buttons(d)?v(0,d):v(n,d)}function s(d){v(n|M.buttons(d),d)}function x(d){v(n&~M.buttons(d),d)}function h(){r||(r=!0,t.addEventListener("mousemove",y),t.addEventListener("mousedown",s),t.addEventListener("mouseup",x),t.addEventListener("mouseleave",p),t.addEventListener("mouseenter",p),t.addEventListener("mouseout",p),t.addEventListener("mouseover",p),t.addEventListener("blur",f),t.addEventListener("keyup",l),t.addEventListener("keydown",l),t.addEventListener("keypress",l),t!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}h();var m={element:t};return Object.defineProperties(m,{enabled:{get:function(){return r},set:function(d){d?h():function g(){r&&(r=!1,t.removeEventListener("mousemove",y),t.removeEventListener("mousedown",s),t.removeEventListener("mouseup",x),t.removeEventListener("mouseleave",p),t.removeEventListener("mouseenter",p),t.removeEventListener("mouseout",p),t.removeEventListener("mouseover",p),t.removeEventListener("blur",f),t.removeEventListener("keyup",l),t.removeEventListener("keydown",l),t.removeEventListener("keypress",l),t!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),m};var M=e(99070)},76570:$=>{var K={left:0,top:0};$.exports=function e(I,t,T){t=t||I.currentTarget||I.srcElement,Array.isArray(T)||(T=[0,0]);var n=I.clientX||0,i=I.clientY||0,u=function M(I){return I===window||I===document||I===document.body?K:I.getBoundingClientRect()}(t);return T[0]=n-u.left,T[1]=i-u.top,T}},99070:($,K)=>{"use strict";function M(T){return T.target||T.srcElement||window}K.buttons=function e(T){if("object"==typeof T){if("buttons"in T)return T.buttons;if("which"in T){if(2===(n=T.which))return 4;if(3===n)return 2;if(n>0)return 1<<n-1}else if("button"in T){var n;if(1===(n=T.button))return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0},K.element=M,K.x=function I(T){if("object"==typeof T){if("offsetX"in T)return T.offsetX;var i=M(T).getBoundingClientRect();return T.clientX-i.left}return 0},K.y=function t(T){if("object"==typeof T){if("offsetY"in T)return T.offsetY;var i=M(T).getBoundingClientRect();return T.clientY-i.top}return 0}},85127:($,K,e)=>{"use strict";var M=e(11538);$.exports=function I(t,T,n){"function"==typeof t&&(n=!!T,T=t,t=window);var i=M("ex",t),u=function(a){n&&a.preventDefault();var r=a.deltaX||0,o=a.deltaY||0,v=a.deltaZ||0,f=1;switch(a.deltaMode){case 1:f=i;break;case 2:f=window.innerHeight}if(o*=f,v*=f,(r*=f)||o||v)return T(r,o,v,a)};return t.addEventListener("wheel",u),u}},7072:function($,K,e){var M,t,T;t="Promise",(T=typeof global<"u"?global:this)[t]=T[t]||function(){"use strict";var t,T,n,i=Object.prototype.toString,u=typeof setImmediate<"u"?function(m){return setImmediate(m)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(m,d,A,b){return Object.defineProperty(m,d,{value:A,writable:!0,configurable:!1!==b})}}catch{t=function(d,A,b){return d[A]=b,d}}function a(g,m){n.add(g,m),T||(T=u(n.drain))}function r(g){var m,d=typeof g;return null!=g&&("object"==d||"function"==d)&&(m=g.then),"function"==typeof m&&m}function o(){for(var g=0;g<this.chain.length;g++)v(this,1===this.state?this.chain[g].success:this.chain[g].failure,this.chain[g]);this.chain.length=0}function v(g,m,d){var A,b;try{!1===m?d.reject(g.msg):(A=!0===m?g.msg:m.call(void 0,g.msg))===d.promise?d.reject(TypeError("Promise-chain cycle")):(b=r(A))?b.call(A,d.resolve,d.reject):d.resolve(A)}catch(c){d.reject(c)}}function p(g){var m,d=this;if(!d.triggered){d.triggered=!0,d.def&&(d=d.def);try{(m=r(g))?a(function(){var A=new y(d);try{m.call(g,function(){p.apply(A,arguments)},function(){f.apply(A,arguments)})}catch(b){f.call(A,b)}}):(d.msg=g,d.state=1,d.chain.length>0&&a(o,d))}catch(A){f.call(new y(d),A)}}}function f(g){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=g,m.state=2,m.chain.length>0&&a(o,m))}function l(g,m,d,A){for(var b=0;b<m.length;b++)!function(S){g.resolve(m[S]).then(function(E){d(S,E)},A)}(b)}function y(g){this.def=g,this.triggered=!1}function s(g){this.promise=g,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function x(g){if("function"!=typeof g)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var m=new s(this);this.then=function(A,b){var c={success:"function"!=typeof A||A,failure:"function"==typeof b&&b};return c.promise=new this.constructor(function(w,E){if("function"!=typeof w||"function"!=typeof E)throw TypeError("Not a function");c.resolve=w,c.reject=E}),m.chain.push(c),0!==m.state&&a(o,m),c.promise},this.catch=function(A){return this.then(void 0,A)};try{g.call(void 0,function(A){p.call(m,A)},function(A){f.call(m,A)})}catch(d){f.call(m,d)}}n=function(){var m,d,A;function b(c,S){this.fn=c,this.self=S,this.next=void 0}return{add:function(S,w){A=new b(S,w),d?d.next=A:m=A,d=A,A=void 0},drain:function(){var S=m;for(m=d=T=void 0;S;)S.fn.call(S.self),S=S.next}}}();var h=t({},"constructor",x,!1);return x.prototype=h,t(h,"__NPO__",0,!1),t(x,"resolve",function(m){var d=this;return m&&"object"==typeof m&&1===m.__NPO__?m:new d(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");b(m)})}),t(x,"reject",function(m){return new this(function(A,b){if("function"!=typeof A||"function"!=typeof b)throw TypeError("Not a function");b(m)})}),t(x,"all",function(m){var d=this;return"[object Array]"!=i.call(m)?d.reject(TypeError("Not an array")):0===m.length?d.resolve([]):new d(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");var S=m.length,w=Array(S),E=0;l(d,m,function(R,F){w[R]=F,++E===S&&b(w)},c)})}),t(x,"race",function(m){var d=this;return"[object Array]"!=i.call(m)?d.reject(TypeError("Not an array")):new d(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");l(d,m,function(w,E){b(E)},c)})}),x}(),$.exports?$.exports=T[t]:void 0!==(M=function(){return T[t]}.call(K,e,K,$))&&($.exports=M)},94840:$=>{var K=Math.PI,e=i(120);function I(u,a,r,o){return["C",u,a,r,o,r,o]}function t(u,a,r,o,v,p){return["C",u/3+2/3*r,a/3+2/3*o,v/3+2/3*r,p/3+2/3*o,v,p]}function T(u,a,r,o,v,p,f,l,y,s){if(s)w=s[0],E=s[1],c=s[2],S=s[3];else{var x=n(u,a,-v);u=x.x,a=x.y;var h=(u-(l=(x=n(l,y,-v)).x))/2,g=(a-(y=x.y))/2,m=h*h/(r*r)+g*g/(o*o);m>1&&(r*=m=Math.sqrt(m),o*=m);var d=r*r,A=o*o,b=(p==f?-1:1)*Math.sqrt(Math.abs((d*A-d*g*g-A*h*h)/(d*g*g+A*h*h)));b==1/0&&(b=1);var c=b*r*g/o+(u+l)/2,S=b*-o*h/r+(a+y)/2,w=Math.asin(((a-S)/o).toFixed(9)),E=Math.asin(((y-S)/o).toFixed(9));(w=u<c?K-w:w)<0&&(w=2*K+w),(E=l<c?K-E:E)<0&&(E=2*K+E),f&&w>E&&(w-=2*K),!f&&E>w&&(E-=2*K)}if(Math.abs(E-w)>e){var P=E,R=l,F=y;E=w+e*(f&&E>w?1:-1);var _=T(l=c+r*Math.cos(E),y=S+o*Math.sin(E),r,o,v,0,f,R,F,[E,P,c,S])}var z=Math.tan((E-w)/4),D=4/3*r*z,k=4/3*o*z,O=[2*u-(u+D*Math.sin(w)),2*a-(a-k*Math.cos(w)),l+D*Math.sin(E),y-k*Math.cos(E),l,y];if(s)return O;_&&(O=O.concat(_));for(var U=0;U<O.length;){var H=n(O[U],O[U+1],v);O[U++]=H.x,O[U++]=H.y}return O}function n(u,a,r){return{x:u*Math.cos(r)-a*Math.sin(r),y:u*Math.sin(r)+a*Math.cos(r)}}function i(u){return u*(K/180)}$.exports=function M(u){for(var a,r=[],o=0,v=0,p=0,f=0,l=null,y=null,s=0,x=0,h=0,g=u.length;h<g;h++){var m=u[h],d=m[0];switch(d){case"M":p=m[1],f=m[2];break;case"A":(m=T(s,x,m[1],m[2],i(m[3]),m[4],m[5],m[6],m[7])).unshift("C"),m.length>7&&(r.push(m.splice(0,7)),m.unshift("C"));break;case"S":var A=s,b=x;("C"==a||"S"==a)&&(A+=A-o,b+=b-v),m=["C",A,b,m[1],m[2],m[3],m[4]];break;case"T":"Q"==a||"T"==a?(l=2*s-l,y=2*x-y):(l=s,y=x),m=t(s,x,l,y,m[1],m[2]);break;case"Q":l=m[1],y=m[2],m=t(s,x,m[1],m[2],m[3],m[4]);break;case"L":m=I(s,x,m[1],m[2]);break;case"H":m=I(s,x,m[1],x);break;case"V":m=I(s,x,s,m[1]);break;case"Z":m=I(s,x,p,f)}a=d,s=m[m.length-2],x=m[m.length-1],m.length>4?(o=m[m.length-4],v=m[m.length-3]):(o=s,v=x),r.push(m)}return r}},35943:$=>{"use strict";var K=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function I(T){if(null==T)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(T)}$.exports=function t(){try{if(!Object.assign)return!1;var T=new String("abc");if(T[5]="de","5"===Object.getOwnPropertyNames(T)[0])return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(r){return n[r]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch{return!1}}()?Object.assign:function(T,n){for(var i,a,u=I(T),r=1;r<arguments.length;r++){for(var o in i=Object(arguments[r]))e.call(i,o)&&(u[o]=i[o]);if(K){a=K(i);for(var v=0;v<a.length;v++)M.call(i,a[v])&&(u[a[v]]=i[a[v]])}}return u}},71175:$=>{"use strict";var K=function(e){return e!=e};$.exports=function(M,I){return 0===M&&0===I?1/M==1/I:!!(M===I||K(M)&&K(I))}},12e3:($,K,e)=>{"use strict";var M=e(32358),I=e(55685),t=e(71175),T=e(76305),n=e(53859),i=I(T(),Object);M(i,{getPolyfill:T,implementation:t,shim:n}),$.exports=i},76305:($,K,e)=>{"use strict";var M=e(71175);$.exports=function(){return"function"==typeof Object.is?Object.is:M}},53859:($,K,e)=>{"use strict";var M=e(76305),I=e(32358);$.exports=function(){var T=M();return I(Object,{is:T},{is:function(){return Object.is!==T}}),T}},62450:($,K,e)=>{"use strict";var M;if(!Object.keys){var I=Object.prototype.hasOwnProperty,t=Object.prototype.toString,T=e(49978),n=Object.prototype.propertyIsEnumerable,i=!n.call({toString:null},"toString"),u=n.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=function(f){var l=f.constructor;return l&&l.prototype===f},o={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},v=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!o["$"+f]&&I.call(window,f)&&null!==window[f]&&"object"==typeof window[f])try{r(window[f])}catch{return!0}}catch{return!0}return!1}();M=function(l){var y=null!==l&&"object"==typeof l,s="[object Function]"===t.call(l),x=T(l),h=y&&"[object String]"===t.call(l),g=[];if(!y&&!s&&!x)throw new TypeError("Object.keys called on a non-object");var m=u&&s;if(h&&l.length>0&&!I.call(l,0))for(var d=0;d<l.length;++d)g.push(String(d));if(x&&l.length>0)for(var A=0;A<l.length;++A)g.push(String(A));else for(var b in l)(!m||"prototype"!==b)&&I.call(l,b)&&g.push(String(b));if(i)for(var c=function(f){if(typeof window>"u"||!v)return r(f);try{return r(f)}catch{return!1}}(l),S=0;S<a.length;++S)(!c||"constructor"!==a[S])&&I.call(l,a[S])&&g.push(a[S]);return g}}$.exports=M},71356:($,K,e)=>{"use strict";var M=Array.prototype.slice,I=e(49978),t=Object.keys,T=t?function(u){return t(u)}:e(62450),n=Object.keys;T.shim=function(){if(Object.keys){var u=function(){var a=Object.keys(arguments);return a&&a.length===arguments.length}(1,2);u||(Object.keys=function(r){return I(r)?n(M.call(r)):n(r)})}else Object.keys=T;return Object.keys||T},$.exports=T},49978:$=>{"use strict";var K=Object.prototype.toString;$.exports=function(M){var I=K.call(M),t="[object Arguments]"===I;return t||(t="[object Array]"!==I&&null!==M&&"object"==typeof M&&"number"==typeof M.length&&M.length>=0&&"[object Function]"===K.call(M.callee)),t}},88473:($,K,e)=>{"use strict";var M=e(71356),I=e(81983)(),t=e(75834),T=Object,n=t("Array.prototype.push"),i=t("Object.prototype.propertyIsEnumerable"),u=I?Object.getOwnPropertySymbols:null;$.exports=function(r,o){if(null==r)throw new TypeError("target must be an object");var v=T(r);if(1===arguments.length)return v;for(var p=1;p<arguments.length;++p){var f=T(arguments[p]),l=M(f),y=I&&(Object.getOwnPropertySymbols||u);if(y)for(var s=y(f),x=0;x<s.length;++x){var h=s[x];i(f,h)&&n(l,h)}for(var g=0;g<l.length;++g){var m=l[g];if(i(f,m)){var d=f[m];v[m]=d}}}return v}},86268:($,K,e)=>{"use strict";var M=e(88473);$.exports=function(){return!Object.assign||function(){if(!Object.assign)return!1;for(var T="abcdefghijklmnopqrst",n=T.split(""),i={},u=0;u<n.length;++u)i[n[u]]=n[u];var a=Object.assign({},i),r="";for(var o in a)r+=o;return T!==r}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var T=Object.preventExtensions({1:2});try{Object.assign(T,"xy")}catch{return"y"===T[1]}return!1}()?M:Object.assign}},34461:$=>{"use strict";function K(I,t){if("string"!=typeof I)return[I];var T=[I];"string"==typeof t||Array.isArray(t)?t={brackets:t}:t||(t={});var n=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],i=t.escape||"___",u=!!t.flat;n.forEach(function(o){var v=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),p=[];function f(l,y,s){var x=T.push(l.slice(o[0].length,-o[1].length))-1;return p.push(x),i+x+i}T.forEach(function(l,y){for(var s,x=0;l!=s;)if(s=l,l=l.replace(v,f),x++>1e4)throw Error("References have circular dependency. Please, check them.");T[y]=l}),p=p.reverse(),T=T.map(function(l){return p.forEach(function(y){l=l.replace(new RegExp("(\\"+i+y+"\\"+i+")","g"),o[0]+"$1"+o[1])}),l})});var a=new RegExp("\\"+i+"([0-9]+)\\"+i);return u?T:function r(o,v,p){for(var l,f=[],y=0;l=a.exec(o);){if(y++>1e4)throw Error("Circular references in parenthesis");f.push(o.slice(0,l.index)),f.push(r(v[l[1]],v)),o=o.slice(l.index+l[0].length)}return f.push(o),f}(T[0],T)}function e(I,t){if(t&&t.flat){var i,T=t&&t.escape||"___",n=I[0];if(!n)return"";for(var u=new RegExp("\\"+T+"([0-9]+)\\"+T),a=0;n!=i;){if(a++>1e4)throw Error("Circular references in "+I);i=n,n=n.replace(u,r)}return n}return I.reduce(function o(v,p){return Array.isArray(p)&&(p=p.reduce(o,"")),v+p},"");function r(o,v){if(null==I[v])throw Error("Reference "+v+"is undefined");return I[v]}}function M(I,t){return Array.isArray(I)?e(I,t):K(I,t)}M.parse=K,M.stringify=e,$.exports=M},60574:($,K,e)=>{"use strict";var M=e(9284);$.exports=function I(t){var T;return arguments.length>1&&(t=arguments),"string"==typeof t?t=t.split(/\s/).map(parseFloat):"number"==typeof t&&(t=[t]),t.length&&"number"==typeof t[0]?T=1===t.length?{width:t[0],height:t[0],x:0,y:0}:2===t.length?{width:t[0],height:t[1],x:0,y:0}:{x:t[0],y:t[1],width:t[2]-t[0]||0,height:t[3]-t[1]||0}:t&&(t=M(t,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:t.left||0,y:t.top||0},null==t.width?t.right?T.width=t.right-T.x:T.width=0:T.width=t.width,null==t.height?t.bottom?T.height=t.bottom-T.y:T.height=0:T.height=t.height),T}},72823:$=>{$.exports=function M(T){var n=[];return T.replace(e,function(i,u,a){var r=u.toLowerCase();for(a=function t(T){var n=T.match(I);return n?n.map(Number):[]}(a),"m"==r&&a.length>2&&(n.push([u].concat(a.splice(0,2))),r="l",u="m"==u?"l":"L");;){if(a.length==K[r])return a.unshift(u),n.push(a);if(a.length<K[r])throw new Error("malformed path data");n.push([u].concat(a.splice(0,K[r])))}}),n};var K={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var I=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},97252:$=>{$.exports=function(e,M){M||(M=[0,""]),e=String(e);var I=parseFloat(e,10);return M[0]=I,M[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",M}},14270:function($){(function(){var K,e,M,I,t,T;typeof performance<"u"&&null!==performance&&performance.now?$.exports=function(){return performance.now()}:typeof process<"u"&&null!==process&&process.hrtime?($.exports=function(){return(K()-t)/1e6},e=process.hrtime,I=(K=function(){var n;return 1e9*(n=e())[0]+n[1]})(),T=1e9*process.uptime(),t=I-T):Date.now?($.exports=function(){return Date.now()-M},M=Date.now()):($.exports=function(){return(new Date).getTime()-M},M=(new Date).getTime())}).call(this)},9284:$=>{"use strict";$.exports=function(I,t,T){var i,u,n={};if("string"==typeof t&&(t=e(t)),Array.isArray(t)){var a={};for(u=0;u<t.length;u++)a[t[u]]=!0;t=a}for(i in t)t[i]=e(t[i]);var r={};for(i in t){var o=t[i];if(Array.isArray(o))for(u=0;u<o.length;u++){var v=o[u];if(T&&(r[v]=!0),v in I){if(n[i]=I[v],T)for(var p=u;p<o.length;p++)r[o[p]]=!0;break}}else i in I&&(t[i]&&(n[i]=I[i]),T&&(r[i]=!0))}if(T)for(i in I)r[i]||(n[i]=I[i]);return n};var K={};function e(M){return K[M]?K[M]:("string"==typeof M&&(M=K[M]=M.split(/\s*,\s*|\s+/)),M)}},28563:($,K,e)=>{"use strict";var M=e(5228),I={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var t in I){var T=t.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,I[t])}},60535:($,K,e)=>{"use strict";$.exports=e(11762)},58250:($,K,e)=>{"use strict";$.exports=e(63429)},55170:($,K,e)=>{"use strict";$.exports=e(45009)},76123:($,K,e)=>{"use strict";$.exports=e(7238)},20418:($,K,e)=>{"use strict";$.exports=e(75405)},15935:($,K,e)=>{"use strict";$.exports=e(56348)},43605:($,K,e)=>{"use strict";$.exports=e(9561)},61374:($,K,e)=>{"use strict";$.exports=e(45452)},27993:($,K,e)=>{"use strict";$.exports=e(32415)},20714:($,K,e)=>{"use strict";$.exports=e(52694)},43442:($,K,e)=>{"use strict";$.exports=e(50028)},60476:($,K,e)=>{"use strict";$.exports=e(37389)},92789:($,K,e)=>{"use strict";$.exports=e(17457)},1105:($,K,e)=>{"use strict";$.exports=e(83259)},58790:($,K,e)=>{"use strict";$.exports=e(8987)},43212:($,K,e)=>{"use strict";$.exports=e(14893)},52221:($,K,e)=>{"use strict";$.exports=e(35225)},74603:($,K,e)=>{"use strict";$.exports=e(2903)},2656:($,K,e)=>{"use strict";$.exports=e(89723)},37622:($,K,e)=>{"use strict";$.exports=e(37474)},22822:($,K,e)=>{"use strict";$.exports=e(23053)},7925:($,K,e)=>{"use strict";$.exports=e(77605)},27064:($,K,e)=>{"use strict";$.exports=e(59490)},9550:($,K,e)=>{"use strict";$.exports=e(65812)},38454:($,K,e)=>{"use strict";$.exports=e(67487)},46677:($,K,e)=>{"use strict";var M=e(92789);M.register([e(58250),e(76123),e(2656),e(22822),e(7925),e(27064),e(43442),e(18465),e(12858),e(43212),e(74922),e(38454),e(83542),e(35771),e(24017),e(9550),e(52221),e(45140),e(34718),e(98321),e(60735),e(38408),e(20714),e(62741),e(61259),e(61374),e(16105),e(95877),e(82697),e(37622),e(21475),e(97614),e(57485),e(27993),e(1105),e(5204),e(66083),e(9737),e(43605),e(7948),e(60476),e(7872),e(15935),e(2740),e(18263),e(55170),e(10518),e(60535),e(58790),e(74603),e(14751),e(20418)]),$.exports=M},66083:($,K,e)=>{"use strict";$.exports=e(46552)},98321:($,K,e)=>{"use strict";$.exports=e(25289)},38408:($,K,e)=>{"use strict";$.exports=e(59805)},7872:($,K,e)=>{"use strict";$.exports=e(12686)},97614:($,K,e)=>{"use strict";$.exports=e(84779)},21475:($,K,e)=>{"use strict";$.exports=e(96934)},83542:($,K,e)=>{"use strict";$.exports=e(22959)},82697:($,K,e)=>{"use strict";$.exports=e(39154)},5204:($,K,e)=>{"use strict";$.exports=e(8909)},45140:($,K,e)=>{"use strict";$.exports=e(83167)},7948:($,K,e)=>{"use strict";$.exports=e(62279)},61259:($,K,e)=>{"use strict";$.exports=e(13411)},16105:($,K,e)=>{"use strict";$.exports=e(69750)},57485:($,K,e)=>{"use strict";$.exports=e(41845)},2740:($,K,e)=>{"use strict";$.exports=e(5478)},18263:($,K,e)=>{"use strict";$.exports=e(71933)},10518:($,K,e)=>{"use strict";$.exports=e(40770)},18465:($,K,e)=>{"use strict";$.exports=e(16116)},14751:($,K,e)=>{"use strict";$.exports=e(48684)},95877:($,K,e)=>{"use strict";$.exports=e(12152)},62741:($,K,e)=>{"use strict";$.exports=e(3066)},35771:($,K,e)=>{"use strict";$.exports=e(20270)},34718:($,K,e)=>{"use strict";$.exports=e(44798)},9737:($,K,e)=>{"use strict";$.exports=e(17949)},24017:($,K,e)=>{"use strict";$.exports=e(32045)},12858:($,K,e)=>{"use strict";$.exports=e(62746)},60735:($,K,e)=>{"use strict";$.exports=e(39342)},74922:($,K,e)=>{"use strict";$.exports=e(16310)},65167:($,K,e)=>{"use strict";function M(Ne,nt){var ct;function mt(){var Bt,zt,Rt=ct.length,St=0,Xt=0;for(Bt=0;Bt<Rt;++Bt)St+=(zt=ct[Bt]).x,Xt+=zt.y;for(St=St/Rt-Ne,Xt=Xt/Rt-nt,Bt=0;Bt<Rt;++Bt)(zt=ct[Bt]).x-=St,zt.y-=Xt}return null==Ne&&(Ne=0),null==nt&&(nt=0),mt.initialize=function(Bt){ct=Bt},mt.x=function(Bt){return arguments.length?(Ne=+Bt,mt):Ne},mt.y=function(Bt){return arguments.length?(nt=+Bt,mt):nt},mt}function I(Ne){return function(){return Ne}}function t(){return 1e-6*(Math.random()-.5)}function n(Ne,nt,ct,mt){if(isNaN(nt)||isNaN(ct))return Ne;var Bt,Se,pe,ge,Oe,we,He,Xe,ut,Rt=Ne._root,zt={data:mt},St=Ne._x0,Xt=Ne._y0,Mt=Ne._x1,st=Ne._y1;if(!Rt)return Ne._root=zt,Ne;for(;Rt.length;)if((we=nt>=(Se=(St+Mt)/2))?St=Se:Mt=Se,(He=ct>=(pe=(Xt+st)/2))?Xt=pe:st=pe,Bt=Rt,!(Rt=Rt[Xe=He<<1|we]))return Bt[Xe]=zt,Ne;if(ge=+Ne._x.call(null,Rt.data),Oe=+Ne._y.call(null,Rt.data),nt===ge&&ct===Oe)return zt.next=Rt,Bt?Bt[Xe]=zt:Ne._root=zt,Ne;do{Bt=Bt?Bt[Xe]=new Array(4):Ne._root=new Array(4),(we=nt>=(Se=(St+Mt)/2))?St=Se:Mt=Se,(He=ct>=(pe=(Xt+st)/2))?Xt=pe:st=pe}while((Xe=He<<1|we)==(ut=(Oe>=pe)<<1|ge>=Se));return Bt[ut]=Rt,Bt[Xe]=zt,Ne}function o(Ne,nt,ct,mt,Bt){this.node=Ne,this.x0=nt,this.y0=ct,this.x1=mt,this.y1=Bt}function h(Ne){return Ne[0]}function m(Ne){return Ne[1]}function A(Ne,nt,ct){var mt=new b(nt??h,ct??m,NaN,NaN,NaN,NaN);return null==Ne?mt:mt.addAll(Ne)}function b(Ne,nt,ct,mt,Bt,Rt){this._x=Ne,this._y=nt,this._x0=ct,this._y0=mt,this._x1=Bt,this._y1=Rt,this._root=void 0}function c(Ne){for(var nt={data:Ne.data},ct=nt;Ne=Ne.next;)ct=ct.next={data:Ne.data};return nt}e.r(K),e.d(K,{forceCenter:()=>M,forceCollide:()=>P,forceLink:()=>z,forceManyBody:()=>Ie,forceRadial:()=>Qe,forceSimulation:()=>Pe,forceX:()=>at,forceY:()=>Be});var S=A.prototype=b.prototype;function w(Ne){return Ne.x+Ne.vx}function E(Ne){return Ne.y+Ne.vy}function P(Ne){var nt,ct,mt=1,Bt=1;function Rt(){for(var Xt,st,Se,pe,ge,Oe,we,Mt=nt.length,He=0;He<Bt;++He)for(st=A(nt,w,E).visitAfter(zt),Xt=0;Xt<Mt;++Xt)Se=nt[Xt],Oe=ct[Se.index],we=Oe*Oe,pe=Se.x+Se.vx,ge=Se.y+Se.vy,st.visit(Xe);function Xe(ut,Ze,qe,Dt,Ft){var bt=ut.data,Pt=ut.r,cr=Oe+Pt;if(!bt)return Ze>pe+cr||Dt<pe-cr||qe>ge+cr||Ft<ge-cr;if(bt.index>Se.index){var Sr=pe-bt.x-bt.vx,Kr=ge-bt.y-bt.vy,It=Sr*Sr+Kr*Kr;It<cr*cr&&(0===Sr&&(It+=(Sr=t())*Sr),0===Kr&&(It+=(Kr=t())*Kr),It=(cr-(It=Math.sqrt(It)))/It*mt,Se.vx+=(Sr*=It)*(cr=(Pt*=Pt)/(we+Pt)),Se.vy+=(Kr*=It)*cr,bt.vx-=Sr*(cr=1-cr),bt.vy-=Kr*cr)}}}function zt(Xt){if(Xt.data)return Xt.r=ct[Xt.data.index];for(var Mt=Xt.r=0;Mt<4;++Mt)Xt[Mt]&&Xt[Mt].r>Xt.r&&(Xt.r=Xt[Mt].r)}function St(){if(nt){var Xt,st,Mt=nt.length;for(ct=new Array(Mt),Xt=0;Xt<Mt;++Xt)st=nt[Xt],ct[st.index]=+Ne(st,Xt,nt)}}return"function"!=typeof Ne&&(Ne=I(null==Ne?1:+Ne)),Rt.initialize=function(Xt){nt=Xt,St()},Rt.iterations=function(Xt){return arguments.length?(Bt=+Xt,Rt):Bt},Rt.strength=function(Xt){return arguments.length?(mt=+Xt,Rt):mt},Rt.radius=function(Xt){return arguments.length?(Ne="function"==typeof Xt?Xt:I(+Xt),St(),Rt):Ne},Rt}S.copy=function(){var ct,mt,Ne=new b(this._x,this._y,this._x0,this._y0,this._x1,this._y1),nt=this._root;if(!nt)return Ne;if(!nt.length)return Ne._root=c(nt),Ne;for(ct=[{source:nt,target:Ne._root=new Array(4)}];nt=ct.pop();)for(var Bt=0;Bt<4;++Bt)(mt=nt.source[Bt])&&(mt.length?ct.push({source:mt,target:nt.target[Bt]=new Array(4)}):nt.target[Bt]=c(mt));return Ne},S.add=function T(Ne){var nt=+this._x.call(null,Ne),ct=+this._y.call(null,Ne);return n(this.cover(nt,ct),nt,ct,Ne)},S.addAll=function i(Ne){var nt,ct,Bt,Rt,mt=Ne.length,zt=new Array(mt),St=new Array(mt),Xt=1/0,Mt=1/0,st=-1/0,Se=-1/0;for(ct=0;ct<mt;++ct)isNaN(Bt=+this._x.call(null,nt=Ne[ct]))||isNaN(Rt=+this._y.call(null,nt))||(zt[ct]=Bt,St[ct]=Rt,Bt<Xt&&(Xt=Bt),Bt>st&&(st=Bt),Rt<Mt&&(Mt=Rt),Rt>Se&&(Se=Rt));if(Xt>st||Mt>Se)return this;for(this.cover(Xt,Mt).cover(st,Se),ct=0;ct<mt;++ct)n(this,zt[ct],St[ct],Ne[ct]);return this},S.cover=function u(Ne,nt){if(isNaN(Ne=+Ne)||isNaN(nt=+nt))return this;var ct=this._x0,mt=this._y0,Bt=this._x1,Rt=this._y1;if(isNaN(ct))Bt=(ct=Math.floor(Ne))+1,Rt=(mt=Math.floor(nt))+1;else{for(var Xt,Mt,zt=Bt-ct,St=this._root;ct>Ne||Ne>=Bt||mt>nt||nt>=Rt;)switch(Mt=(nt<mt)<<1|Ne<ct,Xt=new Array(4),Xt[Mt]=St,St=Xt,zt*=2,Mt){case 0:Bt=ct+zt,Rt=mt+zt;break;case 1:ct=Bt-zt,Rt=mt+zt;break;case 2:Bt=ct+zt,mt=Rt-zt;break;case 3:ct=Bt-zt,mt=Rt-zt}this._root&&this._root.length&&(this._root=St)}return this._x0=ct,this._y0=mt,this._x1=Bt,this._y1=Rt,this},S.data=function a(){var Ne=[];return this.visit(function(nt){if(!nt.length)do{Ne.push(nt.data)}while(nt=nt.next)}),Ne},S.extent=function r(Ne){return arguments.length?this.cover(+Ne[0][0],+Ne[0][1]).cover(+Ne[1][0],+Ne[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},S.find=function v(Ne,nt,ct){var mt,zt,St,Xt,Mt,Oe,we,Bt=this._x0,Rt=this._y0,st=this._x1,Se=this._y1,pe=[],ge=this._root;for(ge&&pe.push(new o(ge,Bt,Rt,st,Se)),null==ct?ct=1/0:(Bt=Ne-ct,Rt=nt-ct,st=Ne+ct,Se=nt+ct,ct*=ct);Oe=pe.pop();)if(!(!(ge=Oe.node)||(zt=Oe.x0)>st||(St=Oe.y0)>Se||(Xt=Oe.x1)<Bt||(Mt=Oe.y1)<Rt))if(ge.length){var He=(zt+Xt)/2,Xe=(St+Mt)/2;pe.push(new o(ge[3],He,Xe,Xt,Mt),new o(ge[2],zt,Xe,He,Mt),new o(ge[1],He,St,Xt,Xe),new o(ge[0],zt,St,He,Xe)),(we=(nt>=Xe)<<1|Ne>=He)&&(Oe=pe[pe.length-1],pe[pe.length-1]=pe[pe.length-1-we],pe[pe.length-1-we]=Oe)}else{var ut=Ne-+this._x.call(null,ge.data),Ze=nt-+this._y.call(null,ge.data),qe=ut*ut+Ze*Ze;if(qe<ct){var Dt=Math.sqrt(ct=qe);Bt=Ne-Dt,Rt=nt-Dt,st=Ne+Dt,Se=nt+Dt,mt=ge.data}}return mt},S.remove=function p(Ne){if(isNaN(st=+this._x.call(null,Ne))||isNaN(Se=+this._y.call(null,Ne)))return this;var nt,mt,Bt,Rt,st,Se,pe,ge,Oe,we,He,Xe,ct=this._root,zt=this._x0,St=this._y0,Xt=this._x1,Mt=this._y1;if(!ct)return this;if(ct.length)for(;;){if((Oe=st>=(pe=(zt+Xt)/2))?zt=pe:Xt=pe,(we=Se>=(ge=(St+Mt)/2))?St=ge:Mt=ge,nt=ct,!(ct=ct[He=we<<1|Oe]))return this;if(!ct.length)break;(nt[He+1&3]||nt[He+2&3]||nt[He+3&3])&&(mt=nt,Xe=He)}for(;ct.data!==Ne;)if(Bt=ct,!(ct=ct.next))return this;return(Rt=ct.next)&&delete ct.next,Bt?(Rt?Bt.next=Rt:delete Bt.next,this):nt?(Rt?nt[He]=Rt:delete nt[He],(ct=nt[0]||nt[1]||nt[2]||nt[3])&&ct===(nt[3]||nt[2]||nt[1]||nt[0])&&!ct.length&&(mt?mt[Xe]=ct:this._root=ct),this):(this._root=Rt,this)},S.removeAll=function f(Ne){for(var nt=0,ct=Ne.length;nt<ct;++nt)this.remove(Ne[nt]);return this},S.root=function l(){return this._root},S.size=function y(){var Ne=0;return this.visit(function(nt){if(!nt.length)do{++Ne}while(nt=nt.next)}),Ne},S.visit=function s(Ne){var ct,Bt,Rt,zt,St,Xt,nt=[],mt=this._root;for(mt&&nt.push(new o(mt,this._x0,this._y0,this._x1,this._y1));ct=nt.pop();)if(!Ne(mt=ct.node,Rt=ct.x0,zt=ct.y0,St=ct.x1,Xt=ct.y1)&&mt.length){var Mt=(Rt+St)/2,st=(zt+Xt)/2;(Bt=mt[3])&&nt.push(new o(Bt,Mt,st,St,Xt)),(Bt=mt[2])&&nt.push(new o(Bt,Rt,st,Mt,Xt)),(Bt=mt[1])&&nt.push(new o(Bt,Mt,zt,St,st)),(Bt=mt[0])&&nt.push(new o(Bt,Rt,zt,Mt,st))}return this},S.visitAfter=function x(Ne){var mt,nt=[],ct=[];for(this._root&&nt.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));mt=nt.pop();){var Bt=mt.node;if(Bt.length){var Rt,zt=mt.x0,St=mt.y0,Xt=mt.x1,Mt=mt.y1,st=(zt+Xt)/2,Se=(St+Mt)/2;(Rt=Bt[0])&&nt.push(new o(Rt,zt,St,st,Se)),(Rt=Bt[1])&&nt.push(new o(Rt,st,St,Xt,Se)),(Rt=Bt[2])&&nt.push(new o(Rt,zt,Se,st,Mt)),(Rt=Bt[3])&&nt.push(new o(Rt,st,Se,Xt,Mt))}ct.push(mt)}for(;mt=ct.pop();)Ne(mt.node,mt.x0,mt.y0,mt.x1,mt.y1);return this},S.x=function g(Ne){return arguments.length?(this._x=Ne,this):this._x},S.y=function d(Ne){return arguments.length?(this._y=Ne,this):this._y};var R=e(88097);function F(Ne){return Ne.index}function _(Ne,nt){var ct=Ne.get(nt);if(!ct)throw new Error("missing: "+nt);return ct}function z(Ne){var mt,Rt,zt,St,Xt,nt=F,ct=function st(we){return 1/Math.min(St[we.source.index],St[we.target.index])},Bt=I(30),Mt=1;function Se(we){for(var He=0,Xe=Ne.length;He<Mt;++He)for(var Ze,qe,Dt,Ft,bt,Pt,cr,ut=0;ut<Xe;++ut)qe=(Ze=Ne[ut]).source,Ft=(Dt=Ze.target).x+Dt.vx-qe.x-qe.vx||t(),bt=Dt.y+Dt.vy-qe.y-qe.vy||t(),Ft*=Pt=((Pt=Math.sqrt(Ft*Ft+bt*bt))-Rt[ut])/Pt*we*mt[ut],bt*=Pt,Dt.vx-=Ft*(cr=Xt[ut]),Dt.vy-=bt*cr,qe.vx+=Ft*(cr=1-cr),qe.vy+=bt*cr}function pe(){if(zt){var we,Ze,He=zt.length,Xe=Ne.length,ut=(0,R.UI)(zt,nt);for(we=0,St=new Array(He);we<Xe;++we)(Ze=Ne[we]).index=we,"object"!=typeof Ze.source&&(Ze.source=_(ut,Ze.source)),"object"!=typeof Ze.target&&(Ze.target=_(ut,Ze.target)),St[Ze.source.index]=(St[Ze.source.index]||0)+1,St[Ze.target.index]=(St[Ze.target.index]||0)+1;for(we=0,Xt=new Array(Xe);we<Xe;++we)Ze=Ne[we],Xt[we]=St[Ze.source.index]/(St[Ze.source.index]+St[Ze.target.index]);mt=new Array(Xe),ge(),Rt=new Array(Xe),Oe()}}function ge(){if(zt)for(var we=0,He=Ne.length;we<He;++we)mt[we]=+ct(Ne[we],we,Ne)}function Oe(){if(zt)for(var we=0,He=Ne.length;we<He;++we)Rt[we]=+Bt(Ne[we],we,Ne)}return null==Ne&&(Ne=[]),Se.initialize=function(we){zt=we,pe()},Se.links=function(we){return arguments.length?(Ne=we,pe(),Se):Ne},Se.id=function(we){return arguments.length?(nt=we,Se):nt},Se.iterations=function(we){return arguments.length?(Mt=+we,Se):Mt},Se.strength=function(we){return arguments.length?(ct="function"==typeof we?we:I(+we),ge(),Se):ct},Se.distance=function(we){return arguments.length?(Bt="function"==typeof we?we:I(+we),Oe(),Se):Bt},Se}var D={value:function(){}};function k(){for(var mt,Ne=0,nt=arguments.length,ct={};Ne<nt;++Ne){if(!(mt=arguments[Ne]+"")||mt in ct||/[\s.]/.test(mt))throw new Error("illegal type: "+mt);ct[mt]=[]}return new O(ct)}function O(Ne){this._=Ne}function U(Ne,nt){return Ne.trim().split(/^|\s+/).map(function(ct){var mt="",Bt=ct.indexOf(".");if(Bt>=0&&(mt=ct.slice(Bt+1),ct=ct.slice(0,Bt)),ct&&!nt.hasOwnProperty(ct))throw new Error("unknown type: "+ct);return{type:ct,name:mt}})}function H(Ne,nt){for(var Bt,ct=0,mt=Ne.length;ct<mt;++ct)if((Bt=Ne[ct]).name===nt)return Bt.value}function j(Ne,nt,ct){for(var mt=0,Bt=Ne.length;mt<Bt;++mt)if(Ne[mt].name===nt){Ne[mt]=D,Ne=Ne.slice(0,mt).concat(Ne.slice(mt+1));break}return null!=ct&&Ne.push({name:nt,value:ct}),Ne}O.prototype=k.prototype={constructor:O,on:function(Ne,nt){var Bt,ct=this._,mt=U(Ne+"",ct),Rt=-1,zt=mt.length;if(!(arguments.length<2)){if(null!=nt&&"function"!=typeof nt)throw new Error("invalid callback: "+nt);for(;++Rt<zt;)if(Bt=(Ne=mt[Rt]).type)ct[Bt]=j(ct[Bt],Ne.name,nt);else if(null==nt)for(Bt in ct)ct[Bt]=j(ct[Bt],Ne.name,null);return this}for(;++Rt<zt;)if((Bt=(Ne=mt[Rt]).type)&&(Bt=H(ct[Bt],Ne.name)))return Bt},copy:function(){var Ne={},nt=this._;for(var ct in nt)Ne[ct]=nt[ct].slice();return new O(Ne)},call:function(Ne,nt){if((Bt=arguments.length-2)>0)for(var Bt,Rt,ct=new Array(Bt),mt=0;mt<Bt;++mt)ct[mt]=arguments[mt+2];if(!this._.hasOwnProperty(Ne))throw new Error("unknown type: "+Ne);for(mt=0,Bt=(Rt=this._[Ne]).length;mt<Bt;++mt)Rt[mt].value.apply(nt,ct)},apply:function(Ne,nt,ct){if(!this._.hasOwnProperty(Ne))throw new Error("unknown type: "+Ne);for(var mt=this._[Ne],Bt=0,Rt=mt.length;Bt<Rt;++Bt)mt[Bt].value.apply(nt,ct)}};const ee=k;var oe,ie,W=0,B=0,te=0,V=0,Y=0,ae=0,X="object"==typeof performance&&performance.now?performance:Date,J="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Ne){setTimeout(Ne,17)};function ue(){return Y||(J(re),Y=X.now()+ae)}function re(){Y=0}function ne(){this._call=this._time=this._next=null}function se(Ne,nt,ct){var mt=new ne;return mt.restart(Ne,nt,ct),mt}function be(){Y=(V=X.now())+ae,W=B=0;try{!function de(){ue(),++W;for(var nt,Ne=oe;Ne;)(nt=Y-Ne._time)>=0&&Ne._call.call(null,nt),Ne=Ne._next;--W}()}finally{W=0,function _e(){for(var Ne,ct,nt=oe,mt=1/0;nt;)nt._call?(mt>nt._time&&(mt=nt._time),Ne=nt,nt=nt._next):(ct=nt._next,nt._next=null,nt=Ne?Ne._next=ct:oe=ct);ie=Ne,Ce(mt)}(),Y=0}}function De(){var Ne=X.now(),nt=Ne-V;nt>1e3&&(ae-=nt,V=Ne)}function Ce(Ne){W||(B&&(B=clearTimeout(B)),Ne-Y>24?(Ne<1/0&&(B=setTimeout(be,Ne-X.now()-ae)),te&&(te=clearInterval(te))):(te||(V=X.now(),te=setInterval(De,1e3)),W=1,J(be)))}function Le(Ne){return Ne.x}function Fe(Ne){return Ne.y}ne.prototype=se.prototype={constructor:ne,restart:function(Ne,nt,ct){if("function"!=typeof Ne)throw new TypeError("callback is not a function");ct=(null==ct?ue():+ct)+(null==nt?0:+nt),!this._next&&ie!==this&&(ie?ie._next=this:oe=this,ie=this),this._call=Ne,this._time=ct,Ce()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ce())}};var ze=Math.PI*(3-Math.sqrt(5));function Pe(Ne){var nt,ct=1,mt=.001,Bt=1-Math.pow(mt,1/300),Rt=0,zt=.6,St=(0,R.UI)(),Xt=se(st),Mt=ee("tick","end");function st(){Se(),Mt.call("tick",nt),ct<mt&&(Xt.stop(),Mt.call("end",nt))}function Se(Oe){var we,Xe,He=Ne.length;void 0===Oe&&(Oe=1);for(var ut=0;ut<Oe;++ut)for(ct+=(Rt-ct)*Bt,St.each(function(Ze){Ze(ct)}),we=0;we<He;++we)null==(Xe=Ne[we]).fx?Xe.x+=Xe.vx*=zt:(Xe.x=Xe.fx,Xe.vx=0),null==Xe.fy?Xe.y+=Xe.vy*=zt:(Xe.y=Xe.fy,Xe.vy=0);return nt}function pe(){for(var He,Oe=0,we=Ne.length;Oe<we;++Oe){if((He=Ne[Oe]).index=Oe,null!=He.fx&&(He.x=He.fx),null!=He.fy&&(He.y=He.fy),isNaN(He.x)||isNaN(He.y)){var Xe=10*Math.sqrt(Oe),ut=Oe*ze;He.x=Xe*Math.cos(ut),He.y=Xe*Math.sin(ut)}(isNaN(He.vx)||isNaN(He.vy))&&(He.vx=He.vy=0)}}function ge(Oe){return Oe.initialize&&Oe.initialize(Ne),Oe}return null==Ne&&(Ne=[]),pe(),nt={tick:Se,restart:function(){return Xt.restart(st),nt},stop:function(){return Xt.stop(),nt},nodes:function(Oe){return arguments.length?(Ne=Oe,pe(),St.each(ge),nt):Ne},alpha:function(Oe){return arguments.length?(ct=+Oe,nt):ct},alphaMin:function(Oe){return arguments.length?(mt=+Oe,nt):mt},alphaDecay:function(Oe){return arguments.length?(Bt=+Oe,nt):+Bt},alphaTarget:function(Oe){return arguments.length?(Rt=+Oe,nt):Rt},velocityDecay:function(Oe){return arguments.length?(zt=1-Oe,nt):1-zt},force:function(Oe,we){return arguments.length>1?(null==we?St.remove(Oe):St.set(Oe,ge(we)),nt):St.get(Oe)},find:function(Oe,we,He){var Ze,qe,Dt,Ft,bt,Xe=0,ut=Ne.length;for(null==He?He=1/0:He*=He,Xe=0;Xe<ut;++Xe)(Dt=(Ze=Oe-(Ft=Ne[Xe]).x)*Ze+(qe=we-Ft.y)*qe)<He&&(bt=Ft,He=Dt);return bt},on:function(Oe,we){return arguments.length>1?(Mt.on(Oe,we),nt):Mt.on(Oe)}}}function Ie(){var Ne,nt,ct,Bt,mt=I(-30),Rt=1,zt=1/0,St=.81;function Xt(pe){var ge,Oe=Ne.length,we=A(Ne,Le,Fe).visitAfter(st);for(ct=pe,ge=0;ge<Oe;++ge)nt=Ne[ge],we.visit(Se)}function Mt(){if(Ne){var pe,Oe,ge=Ne.length;for(Bt=new Array(ge),pe=0;pe<ge;++pe)Oe=Ne[pe],Bt[Oe.index]=+mt(Oe,pe,Ne)}}function st(pe){var Oe,we,Xe,ut,Ze,ge=0,He=0;if(pe.length){for(Xe=ut=Ze=0;Ze<4;++Ze)(Oe=pe[Ze])&&(we=Math.abs(Oe.value))&&(ge+=Oe.value,He+=we,Xe+=we*Oe.x,ut+=we*Oe.y);pe.x=Xe/He,pe.y=ut/He}else{(Oe=pe).x=Oe.data.x,Oe.y=Oe.data.y;do{ge+=Bt[Oe.data.index]}while(Oe=Oe.next)}pe.value=ge}function Se(pe,ge,Oe,we){if(!pe.value)return!0;var He=pe.x-nt.x,Xe=pe.y-nt.y,ut=we-ge,Ze=He*He+Xe*Xe;if(ut*ut/St<Ze)return Ze<zt&&(0===He&&(Ze+=(He=t())*He),0===Xe&&(Ze+=(Xe=t())*Xe),Ze<Rt&&(Ze=Math.sqrt(Rt*Ze)),nt.vx+=He*pe.value*ct/Ze,nt.vy+=Xe*pe.value*ct/Ze),!0;if(!(pe.length||Ze>=zt)){(pe.data!==nt||pe.next)&&(0===He&&(Ze+=(He=t())*He),0===Xe&&(Ze+=(Xe=t())*Xe),Ze<Rt&&(Ze=Math.sqrt(Rt*Ze)));do{pe.data!==nt&&(ut=Bt[pe.data.index]*ct/Ze,nt.vx+=He*ut,nt.vy+=Xe*ut)}while(pe=pe.next)}}return Xt.initialize=function(pe){Ne=pe,Mt()},Xt.strength=function(pe){return arguments.length?(mt="function"==typeof pe?pe:I(+pe),Mt(),Xt):mt},Xt.distanceMin=function(pe){return arguments.length?(Rt=pe*pe,Xt):Math.sqrt(Rt)},Xt.distanceMax=function(pe){return arguments.length?(zt=pe*pe,Xt):Math.sqrt(zt)},Xt.theta=function(pe){return arguments.length?(St=pe*pe,Xt):Math.sqrt(St)},Xt}function Qe(Ne,nt,ct){var mt,Rt,zt,Bt=I(.1);function St(Mt){for(var st=0,Se=mt.length;st<Se;++st){var pe=mt[st],ge=pe.x-nt||1e-6,Oe=pe.y-ct||1e-6,we=Math.sqrt(ge*ge+Oe*Oe),He=(zt[st]-we)*Rt[st]*Mt/we;pe.vx+=ge*He,pe.vy+=Oe*He}}function Xt(){if(mt){var Mt,st=mt.length;for(Rt=new Array(st),zt=new Array(st),Mt=0;Mt<st;++Mt)zt[Mt]=+Ne(mt[Mt],Mt,mt),Rt[Mt]=isNaN(zt[Mt])?0:+Bt(mt[Mt],Mt,mt)}}return"function"!=typeof Ne&&(Ne=I(+Ne)),null==nt&&(nt=0),null==ct&&(ct=0),St.initialize=function(Mt){mt=Mt,Xt()},St.strength=function(Mt){return arguments.length?(Bt="function"==typeof Mt?Mt:I(+Mt),Xt(),St):Bt},St.radius=function(Mt){return arguments.length?(Ne="function"==typeof Mt?Mt:I(+Mt),Xt(),St):Ne},St.x=function(Mt){return arguments.length?(nt=+Mt,St):nt},St.y=function(Mt){return arguments.length?(ct=+Mt,St):ct},St}function at(Ne){var ct,mt,Bt,nt=I(.1);function Rt(St){for(var st,Xt=0,Mt=ct.length;Xt<Mt;++Xt)(st=ct[Xt]).vx+=(Bt[Xt]-st.x)*mt[Xt]*St}function zt(){if(ct){var St,Xt=ct.length;for(mt=new Array(Xt),Bt=new Array(Xt),St=0;St<Xt;++St)mt[St]=isNaN(Bt[St]=+Ne(ct[St],St,ct))?0:+nt(ct[St],St,ct)}}return"function"!=typeof Ne&&(Ne=I(null==Ne?0:+Ne)),Rt.initialize=function(St){ct=St,zt()},Rt.strength=function(St){return arguments.length?(nt="function"==typeof St?St:I(+St),zt(),Rt):nt},Rt.x=function(St){return arguments.length?(Ne="function"==typeof St?St:I(+St),zt(),Rt):Ne},Rt}function Be(Ne){var ct,mt,Bt,nt=I(.1);function Rt(St){for(var st,Xt=0,Mt=ct.length;Xt<Mt;++Xt)(st=ct[Xt]).vy+=(Bt[Xt]-st.y)*mt[Xt]*St}function zt(){if(ct){var St,Xt=ct.length;for(mt=new Array(Xt),Bt=new Array(Xt),St=0;St<Xt;++St)mt[St]=isNaN(Bt[St]=+Ne(ct[St],St,ct))?0:+nt(ct[St],St,ct)}}return"function"!=typeof Ne&&(Ne=I(null==Ne?0:+Ne)),Rt.initialize=function(St){ct=St,zt()},Rt.strength=function(St){return arguments.length?(nt="function"==typeof St?St:I(+St),zt(),Rt):nt},Rt.y=function(St){return arguments.length?(Ne="function"==typeof St?St:I(+St),zt(),Rt):Ne},Rt}},24137:($,K,e)=>{"use strict";function I(A,b){if((c=(A=b?A.toExponential(b-1):A.toExponential()).indexOf("e"))<0)return null;var c,S=A.slice(0,c);return[S.length>1?S[0]+S.slice(2):S,+A.slice(c+1)]}e.d(K,{WU:()=>g,FF:()=>x});var o,i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(A){if(!(b=i.exec(A)))throw new Error("invalid format: "+A);var b;return new a({fill:b[1],align:b[2],sign:b[3],symbol:b[4],zero:b[5],width:b[6],comma:b[7],precision:b[8]&&b[8].slice(1),trim:b[9],type:b[10]})}function a(A){this.fill=void 0===A.fill?" ":A.fill+"",this.align=void 0===A.align?">":A.align+"",this.sign=void 0===A.sign?"-":A.sign+"",this.symbol=void 0===A.symbol?"":A.symbol+"",this.zero=!!A.zero,this.width=void 0===A.width?void 0:+A.width,this.comma=!!A.comma,this.precision=void 0===A.precision?void 0:+A.precision,this.trim=!!A.trim,this.type=void 0===A.type?"":A.type+""}function p(A,b){var c=I(A,b);if(!c)return A+"";var S=c[0],w=c[1];return w<0?"0."+new Array(-w).join("0")+S:S.length>w+1?S.slice(0,w+1)+"."+S.slice(w+1):S+new Array(w-S.length+2).join("0")}u.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const f={"%":function(A,b){return(100*A).toFixed(b)},b:function(A){return Math.round(A).toString(2)},c:function(A){return A+""},d:function M(A){return Math.abs(A=Math.round(A))>=1e21?A.toLocaleString("en").replace(/,/g,""):A.toString(10)},e:function(A,b){return A.toExponential(b)},f:function(A,b){return A.toFixed(b)},g:function(A,b){return A.toPrecision(b)},o:function(A){return Math.round(A).toString(8)},p:function(A,b){return p(100*A,b)},r:p,s:function v(A,b){var c=I(A,b);if(!c)return A+"";var S=c[0],w=c[1],E=w-(o=3*Math.max(-8,Math.min(8,Math.floor(w/3))))+1,P=S.length;return E===P?S:E>P?S+new Array(E-P+1).join("0"):E>0?S.slice(0,E)+"."+S.slice(E):"0."+new Array(1-E).join("0")+I(A,Math.max(0,b+E-1))[0]},X:function(A){return Math.round(A).toString(16).toUpperCase()},x:function(A){return Math.round(A).toString(16)}};function l(A){return A}var h,g,y=Array.prototype.map,s=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function x(A){var b=void 0===A.grouping||void 0===A.thousands?l:function T(A,b){return function(c,S){for(var w=c.length,E=[],P=0,R=A[0],F=0;w>0&&R>0&&(F+R+1>S&&(R=Math.max(1,S-F)),E.push(c.substring(w-=R,w+R)),!((F+=R+1)>S));)R=A[P=(P+1)%A.length];return E.reverse().join(b)}}(y.call(A.grouping,Number),A.thousands+""),c=void 0===A.currency?"":A.currency[0]+"",S=void 0===A.currency?"":A.currency[1]+"",w=void 0===A.decimal?".":A.decimal+"",E=void 0===A.numerals?l:function n(A){return function(b){return b.replace(/[0-9]/g,function(c){return A[+c]})}}(y.call(A.numerals,String)),P=void 0===A.percent?"%":A.percent+"",R=void 0===A.minus?"-":A.minus+"",F=void 0===A.nan?"NaN":A.nan+"";function _(D){var k=(D=u(D)).fill,O=D.align,U=D.sign,H=D.symbol,j=D.zero,ee=D.width,W=D.comma,B=D.precision,te=D.trim,q=D.type;"n"===q?(W=!0,q="g"):f[q]||(void 0===B&&(B=12),te=!0,q="g"),(j||"0"===k&&"="===O)&&(j=!0,k="0",O="=");var oe="$"===H?c:"#"===H&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",ie="$"===H?S:/[%p]/.test(q)?P:"",V=f[q],Y=/[defgprs%]/.test(q);function ae(X){var re,ne,se,J=oe,ue=ie;if("c"===q)ue=V(X)+ue,X="";else{var de=(X=+X)<0||1/X<0;if(X=isNaN(X)?F:V(Math.abs(X),B),te&&(X=function r(A){e:for(var w,b=A.length,c=1,S=-1;c<b;++c)switch(A[c]){case".":S=w=c;break;case"0":0===S&&(S=c),w=c;break;default:if(!+A[c])break e;S>0&&(S=0)}return S>0?A.slice(0,S)+A.slice(w+1):A}(X)),de&&0==+X&&"+"!==U&&(de=!1),J=(de?"("===U?U:R:"-"===U||"("===U?"":U)+J,ue=("s"===q?s[8+o/3]:"")+ue+(de&&"("===U?")":""),Y)for(re=-1,ne=X.length;++re<ne;)if(48>(se=X.charCodeAt(re))||se>57){ue=(46===se?w+X.slice(re+1):X.slice(re))+ue,X=X.slice(0,re);break}}W&&!j&&(X=b(X,1/0));var be=J.length+X.length+ue.length,De=be<ee?new Array(ee-be+1).join(k):"";switch(W&&j&&(X=b(De+X,De.length?ee-ue.length:1/0),De=""),O){case"<":X=J+X+ue+De;break;case"=":X=J+De+X+ue;break;case"^":X=De.slice(0,be=De.length>>1)+J+X+ue+De.slice(be);break;default:X=De+J+X+ue}return E(X)}return B=void 0===B?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B)),ae.toString=function(){return D+""},ae}return{format:_,formatPrefix:function z(D,k){var O=_(((D=u(D)).type="f",D)),U=3*Math.max(-8,Math.min(8,Math.floor(function t(A){return(A=I(Math.abs(A)))?A[1]:NaN}(k)/3))),H=Math.pow(10,-U),j=s[8+U/3];return function(ee){return O(H*ee)+j}}}}!function d(A){return h=x(A),g=h.format,h.formatPrefix,h}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},47956:($,K,e)=>{"use strict";function M(){return new I}function I(){this.reset()}e.r(K),e.d(K,{geoAlbers:()=>Hu,geoAlbersUsa:()=>cs,geoArea:()=>ae,geoAzimuthalEqualArea:()=>Yl,geoAzimuthalEqualAreaRaw:()=>sl,geoAzimuthalEquidistant:()=>Zl,geoAzimuthalEquidistantRaw:()=>Xl,geoBounds:()=>Mt,geoCentroid:()=>Ct,geoCircle:()=>hr,geoClipAntimeridian:()=>yi,geoClipCircle:()=>Ii,geoClipExtent:()=>qo,geoClipRectangle:()=>Lo,geoConicConformal:()=>ul,geoConicConformalRaw:()=>Vu,geoConicEqualArea:()=>ol,geoConicEqualAreaRaw:()=>Lf,geoConicEquidistant:()=>Zf,geoConicEquidistantRaw:()=>Pf,geoContains:()=>yo,geoDistance:()=>bi,geoEqualEarth:()=>Gu,geoEqualEarthRaw:()=>Ts,geoEquirectangular:()=>Xf,geoEquirectangularRaw:()=>Mu,geoGnomonic:()=>Lu,geoGnomonicRaw:()=>rf,geoGraticule:()=>Ll,geoGraticule10:()=>Hs,geoIdentity:()=>bf,geoInterpolate:()=>rl,geoLength:()=>To,geoMercator:()=>yl,geoMercatorRaw:()=>ll,geoNaturalEarth1:()=>ou,geoNaturalEarth1Raw:()=>iu,geoOrthographic:()=>Ol,geoOrthographicRaw:()=>ks,geoPath:()=>Nf,geoProjection:()=>Xi,geoProjectionMutator:()=>Au,geoRotation:()=>We,geoStereographic:()=>ju,geoStereographicRaw:()=>fl,geoStream:()=>O,geoTransform:()=>Ef,geoTransverseMercator:()=>Wu,geoTransverseMercatorRaw:()=>Nl}),I.prototype={constructor:I,reset:function(){this.s=this.t=0},add:function(pt){T(t,pt,this.t),T(this,t.s,this.s),this.s?this.t+=t.t:this.s=t.t},valueOf:function(){return this.s}};var t=new I;function T(pt,kt,yr){var er=pt.s=kt+yr,Mr=er-kt,Zr=er-Mr;pt.t=kt-Zr+(yr-Mr)}var n=1e-6,i=1e-12,u=Math.PI,a=u/2,r=u/4,o=2*u,v=180/u,p=u/180,f=Math.abs,l=Math.atan,y=Math.atan2,s=Math.cos,x=Math.ceil,h=Math.exp,m=(Math.floor,Math.log),d=Math.pow,A=Math.sin,b=Math.sign||function(pt){return pt>0?1:pt<0?-1:0},c=Math.sqrt,S=Math.tan;function w(pt){return pt>1?0:pt<-1?u:Math.acos(pt)}function E(pt){return pt>1?a:pt<-1?-a:Math.asin(pt)}function P(pt){return(pt=A(pt/2))*pt}function R(){}function F(pt,kt){pt&&z.hasOwnProperty(pt.type)&&z[pt.type](pt,kt)}var _={Feature:function(pt,kt){F(pt.geometry,kt)},FeatureCollection:function(pt,kt){for(var yr=pt.features,er=-1,Mr=yr.length;++er<Mr;)F(yr[er].geometry,kt)}},z={Sphere:function(pt,kt){kt.sphere()},Point:function(pt,kt){pt=pt.coordinates,kt.point(pt[0],pt[1],pt[2])},MultiPoint:function(pt,kt){for(var yr=pt.coordinates,er=-1,Mr=yr.length;++er<Mr;)pt=yr[er],kt.point(pt[0],pt[1],pt[2])},LineString:function(pt,kt){D(pt.coordinates,kt,0)},MultiLineString:function(pt,kt){for(var yr=pt.coordinates,er=-1,Mr=yr.length;++er<Mr;)D(yr[er],kt,0)},Polygon:function(pt,kt){k(pt.coordinates,kt)},MultiPolygon:function(pt,kt){for(var yr=pt.coordinates,er=-1,Mr=yr.length;++er<Mr;)k(yr[er],kt)},GeometryCollection:function(pt,kt){for(var yr=pt.geometries,er=-1,Mr=yr.length;++er<Mr;)F(yr[er],kt)}};function D(pt,kt,yr){var Zr,er=-1,Mr=pt.length-yr;for(kt.lineStart();++er<Mr;)Zr=pt[er],kt.point(Zr[0],Zr[1],Zr[2]);kt.lineEnd()}function k(pt,kt){var yr=-1,er=pt.length;for(kt.polygonStart();++yr<er;)D(pt[yr],kt,1);kt.polygonEnd()}function O(pt,kt){pt&&_.hasOwnProperty(pt.type)?_[pt.type](pt,kt):F(pt,kt)}var j,ee,W,B,te,U=M(),H=M(),q={point:R,lineStart:R,lineEnd:R,polygonStart:function(){U.reset(),q.lineStart=oe,q.lineEnd=ie},polygonEnd:function(){var pt=+U;H.add(pt<0?o+pt:pt),this.lineStart=this.lineEnd=this.point=R},sphere:function(){H.add(o)}};function oe(){q.point=V}function ie(){Y(j,ee)}function V(pt,kt){q.point=Y,j=pt,ee=kt,W=pt*=p,B=s(kt=(kt*=p)/2+r),te=A(kt)}function Y(pt,kt){var yr=(pt*=p)-W,er=yr>=0?1:-1,Mr=er*yr,Zr=s(kt=(kt*=p)/2+r),un=A(kt),fn=te*un,Dn=B*Zr+fn*s(Mr),Wn=fn*er*A(Mr);U.add(y(Wn,Dn)),W=pt,B=Zr,te=un}function ae(pt){return H.reset(),O(pt,q),2*H}function X(pt){return[y(pt[1],pt[0]),E(pt[2])]}function J(pt){var kt=pt[0],yr=pt[1],er=s(yr);return[er*s(kt),er*A(kt),A(yr)]}function ue(pt,kt){return pt[0]*kt[0]+pt[1]*kt[1]+pt[2]*kt[2]}function re(pt,kt){return[pt[1]*kt[2]-pt[2]*kt[1],pt[2]*kt[0]-pt[0]*kt[2],pt[0]*kt[1]-pt[1]*kt[0]]}function ne(pt,kt){pt[0]+=kt[0],pt[1]+=kt[1],pt[2]+=kt[2]}function se(pt,kt){return[pt[0]*kt,pt[1]*kt,pt[2]*kt]}function de(pt){var kt=c(pt[0]*pt[0]+pt[1]*pt[1]+pt[2]*pt[2]);pt[0]/=kt,pt[1]/=kt,pt[2]/=kt}var be,De,_e,Ce,Le,Fe,ke,ze,Ie,Qe,Pe=M(),at={point:Be,lineStart:nt,lineEnd:ct,polygonStart:function(){at.point=mt,at.lineStart=Bt,at.lineEnd=Rt,Pe.reset(),q.polygonStart()},polygonEnd:function(){q.polygonEnd(),at.point=Be,at.lineStart=nt,at.lineEnd=ct,U<0?(be=-(_e=180),De=-(Ce=90)):Pe>n?Ce=90:Pe<-n&&(De=-90),Qe[0]=be,Qe[1]=_e},sphere:function(){be=-(_e=180),De=-(Ce=90)}};function Be(pt,kt){Ie.push(Qe=[be=pt,_e=pt]),kt<De&&(De=kt),kt>Ce&&(Ce=kt)}function Ne(pt,kt){var yr=J([pt*p,kt*p]);if(ze){var er=re(ze,yr),Zr=re([er[1],-er[0],0],er);de(Zr),Zr=X(Zr);var Wn,un=pt-Le,fn=un>0?1:-1,Dn=Zr[0]*v*fn,yn=f(un)>180;yn^(fn*Le<Dn&&Dn<fn*pt)?(Wn=Zr[1]*v)>Ce&&(Ce=Wn):yn^(fn*Le<(Dn=(Dn+360)%360-180)&&Dn<fn*pt)?(Wn=-Zr[1]*v)<De&&(De=Wn):(kt<De&&(De=kt),kt>Ce&&(Ce=kt)),yn?pt<Le?zt(be,pt)>zt(be,_e)&&(_e=pt):zt(pt,_e)>zt(be,_e)&&(be=pt):_e>=be?(pt<be&&(be=pt),pt>_e&&(_e=pt)):pt>Le?zt(be,pt)>zt(be,_e)&&(_e=pt):zt(pt,_e)>zt(be,_e)&&(be=pt)}else Ie.push(Qe=[be=pt,_e=pt]);kt<De&&(De=kt),kt>Ce&&(Ce=kt),ze=yr,Le=pt}function nt(){at.point=Ne}function ct(){Qe[0]=be,Qe[1]=_e,at.point=Be,ze=null}function mt(pt,kt){if(ze){var yr=pt-Le;Pe.add(f(yr)>180?yr+(yr>0?360:-360):yr)}else Fe=pt,ke=kt;q.point(pt,kt),Ne(pt,kt)}function Bt(){q.lineStart()}function Rt(){mt(Fe,ke),q.lineEnd(),f(Pe)>n&&(be=-(_e=180)),Qe[0]=be,Qe[1]=_e,ze=null}function zt(pt,kt){return(kt-=pt)<0?kt+360:kt}function St(pt,kt){return pt[0]-kt[0]}function Xt(pt,kt){return pt[0]<=pt[1]?pt[0]<=kt&&kt<=pt[1]:kt<pt[0]||pt[1]<kt}function Mt(pt){var kt,yr,er,Mr,Zr,un,fn;if(Ce=_e=-(be=De=1/0),Ie=[],O(pt,at),yr=Ie.length){for(Ie.sort(St),kt=1,Zr=[er=Ie[0]];kt<yr;++kt)Xt(er,(Mr=Ie[kt])[0])||Xt(er,Mr[1])?(zt(er[0],Mr[1])>zt(er[0],er[1])&&(er[1]=Mr[1]),zt(Mr[0],er[1])>zt(er[0],er[1])&&(er[0]=Mr[0])):Zr.push(er=Mr);for(un=-1/0,kt=0,er=Zr[yr=Zr.length-1];kt<=yr;er=Mr,++kt)Mr=Zr[kt],(fn=zt(er[1],Mr[0]))>un&&(un=fn,be=Mr[0],_e=er[1])}return Ie=Qe=null,be===1/0||De===1/0?[[NaN,NaN],[NaN,NaN]]:[[be,De],[_e,Ce]]}var st,Se,pe,ge,Oe,we,He,Xe,ut,Ze,qe,Dt,Ft,bt,Pt,cr,Sr={sphere:R,point:Kr,lineStart:$t,lineEnd:rt,polygonStart:function(){Sr.lineStart=$e,Sr.lineEnd=ht},polygonEnd:function(){Sr.lineStart=$t,Sr.lineEnd=rt}};function Kr(pt,kt){pt*=p;var yr=s(kt*=p);It(yr*s(pt),yr*A(pt),A(kt))}function It(pt,kt,yr){++st,pe+=(pt-pe)/st,ge+=(kt-ge)/st,Oe+=(yr-Oe)/st}function $t(){Sr.point=kr}function kr(pt,kt){pt*=p;var yr=s(kt*=p);bt=yr*s(pt),Pt=yr*A(pt),cr=A(kt),Sr.point=lr,It(bt,Pt,cr)}function lr(pt,kt){pt*=p;var yr=s(kt*=p),er=yr*s(pt),Mr=yr*A(pt),Zr=A(kt),un=y(c((un=Pt*Zr-cr*Mr)*un+(un=cr*er-bt*Zr)*un+(un=bt*Mr-Pt*er)*un),bt*er+Pt*Mr+cr*Zr);Se+=un,we+=un*(bt+(bt=er)),He+=un*(Pt+(Pt=Mr)),Xe+=un*(cr+(cr=Zr)),It(bt,Pt,cr)}function rt(){Sr.point=Kr}function $e(){Sr.point=gt}function ht(){ft(Dt,Ft),Sr.point=Kr}function gt(pt,kt){Dt=pt,Ft=kt,pt*=p,kt*=p,Sr.point=ft;var yr=s(kt);bt=yr*s(pt),Pt=yr*A(pt),cr=A(kt),It(bt,Pt,cr)}function ft(pt,kt){pt*=p;var yr=s(kt*=p),er=yr*s(pt),Mr=yr*A(pt),Zr=A(kt),un=Pt*Zr-cr*Mr,fn=cr*er-bt*Zr,Dn=bt*Mr-Pt*er,Wn=c(un*un+fn*fn+Dn*Dn),yn=E(Wn),_n=Wn&&-yn/Wn;ut+=_n*un,Ze+=_n*fn,qe+=_n*Dn,Se+=yn,we+=yn*(bt+(bt=er)),He+=yn*(Pt+(Pt=Mr)),Xe+=yn*(cr+(cr=Zr)),It(bt,Pt,cr)}function Ct(pt){st=Se=pe=ge=Oe=we=He=Xe=ut=Ze=qe=0,O(pt,Sr);var kt=ut,yr=Ze,er=qe,Mr=kt*kt+yr*yr+er*er;return Mr<i&&(kt=we,yr=He,er=Xe,Se<n&&(kt=pe,yr=ge,er=Oe),(Mr=kt*kt+yr*yr+er*er)<i)?[NaN,NaN]:[y(yr,kt)*v,E(er/c(Mr))*v]}function sr(pt){return function(){return pt}}function tr(pt,kt){function yr(er,Mr){return er=pt(er,Mr),kt(er[0],er[1])}return pt.invert&&kt.invert&&(yr.invert=function(er,Mr){return(er=kt.invert(er,Mr))&&pt.invert(er[0],er[1])}),yr}function Cr(pt,kt){return[f(pt)>u?pt+Math.round(-pt/o)*o:pt,kt]}function Hr(pt,kt,yr){return(pt%=o)?kt||yr?tr(Wr(pt),Ke(kt,yr)):Wr(pt):kt||yr?Ke(kt,yr):Cr}function zr(pt){return function(kt,yr){return[(kt+=pt)>u?kt-o:kt<-u?kt+o:kt,yr]}}function Wr(pt){var kt=zr(pt);return kt.invert=zr(-pt),kt}function Ke(pt,kt){var yr=s(pt),er=A(pt),Mr=s(kt),Zr=A(kt);function un(fn,Dn){var Wn=s(Dn),yn=s(fn)*Wn,_n=A(fn)*Wn,Mn=A(Dn),Un=Mn*yr+yn*er;return[y(_n*Mr-Un*Zr,yn*yr-Mn*er),E(Un*Mr+_n*Zr)]}return un.invert=function(fn,Dn){var Wn=s(Dn),yn=s(fn)*Wn,_n=A(fn)*Wn,Mn=A(Dn),Un=Mn*Mr-_n*Zr;return[y(_n*Mr+Mn*Zr,yn*yr+Un*er),E(Un*yr-yn*er)]},un}function We(pt){function kt(yr){return(yr=pt(yr[0]*p,yr[1]*p))[0]*=v,yr[1]*=v,yr}return pt=Hr(pt[0]*p,pt[1]*p,pt.length>2?pt[2]*p:0),kt.invert=function(yr){return(yr=pt.invert(yr[0]*p,yr[1]*p))[0]*=v,yr[1]*=v,yr},kt}function Jt(pt,kt,yr,er,Mr,Zr){if(yr){var un=s(kt),fn=A(kt),Dn=er*yr;null==Mr?(Mr=kt+er*o,Zr=kt-Dn/2):(Mr=Gt(un,Mr),Zr=Gt(un,Zr),(er>0?Mr<Zr:Mr>Zr)&&(Mr+=er*o));for(var Wn,yn=Mr;er>0?yn>Zr:yn<Zr;yn-=Dn)Wn=X([un,-fn*s(yn),-fn*A(yn)]),pt.point(Wn[0],Wn[1])}}function Gt(pt,kt){(kt=J(kt))[0]-=pt,de(kt);var yr=w(-kt[1]);return((-kt[2]<0?-yr:yr)+o-n)%o}function hr(){var er,Mr,pt=sr([0,0]),kt=sr(90),yr=sr(6),Zr={point:function un(Dn,Wn){er.push(Dn=Mr(Dn,Wn)),Dn[0]*=v,Dn[1]*=v}};function fn(){var Dn=pt.apply(this,arguments),Wn=kt.apply(this,arguments)*p,yn=yr.apply(this,arguments)*p;return er=[],Mr=Hr(-Dn[0]*p,-Dn[1]*p,0).invert,Jt(Zr,Wn,yn,1),Dn={type:"Polygon",coordinates:[er]},er=Mr=null,Dn}return fn.center=function(Dn){return arguments.length?(pt="function"==typeof Dn?Dn:sr([+Dn[0],+Dn[1]]),fn):pt},fn.radius=function(Dn){return arguments.length?(kt="function"==typeof Dn?Dn:sr(+Dn),fn):kt},fn.precision=function(Dn){return arguments.length?(yr="function"==typeof Dn?Dn:sr(+Dn),fn):yr},fn}function br(){var kt,pt=[];return{point:function(yr,er,Mr){kt.push([yr,er,Mr])},lineStart:function(){pt.push(kt=[])},lineEnd:R,rejoin:function(){pt.length>1&&pt.push(pt.pop().concat(pt.shift()))},result:function(){var yr=pt;return pt=[],kt=null,yr}}}function Ut(pt,kt){return f(pt[0]-kt[0])<n&&f(pt[1]-kt[1])<n}function Kt(pt,kt,yr,er){this.x=pt,this.z=kt,this.o=yr,this.e=er,this.v=!1,this.n=this.p=null}function wt(pt,kt,yr,er,Mr){var fn,Dn,Zr=[],un=[];if(pt.forEach(function(ta){if(!((Qa=ta.length-1)<=0)){var Qa,oi,ja=ta[0],ii=ta[Qa];if(Ut(ja,ii)){if(!ja[2]&&!ii[2]){for(Mr.lineStart(),fn=0;fn<Qa;++fn)Mr.point((ja=ta[fn])[0],ja[1]);return void Mr.lineEnd()}ii[0]+=2*n}Zr.push(oi=new Kt(ja,ta,null,!0)),un.push(oi.o=new Kt(ja,null,oi,!1)),Zr.push(oi=new Kt(ii,ta,null,!1)),un.push(oi.o=new Kt(ii,null,oi,!0))}}),Zr.length){for(un.sort(kt),xr(Zr),xr(un),fn=0,Dn=un.length;fn<Dn;++fn)un[fn].e=yr=!yr;for(var yn,_n,Wn=Zr[0];;){for(var Mn=Wn,Un=!0;Mn.v;)if((Mn=Mn.n)===Wn)return;yn=Mn.z,Mr.lineStart();do{if(Mn.v=Mn.o.v=!0,Mn.e){if(Un)for(fn=0,Dn=yn.length;fn<Dn;++fn)Mr.point((_n=yn[fn])[0],_n[1]);else er(Mn.x,Mn.n.x,1,Mr);Mn=Mn.n}else{if(Un)for(yn=Mn.p.z,fn=yn.length-1;fn>=0;--fn)Mr.point((_n=yn[fn])[0],_n[1]);else er(Mn.x,Mn.p.x,-1,Mr);Mn=Mn.p}yn=(Mn=Mn.o).z,Un=!Un}while(!Mn.v);Mr.lineEnd()}}}function xr(pt){if(kt=pt.length){for(var kt,Mr,yr=0,er=pt[0];++yr<kt;)er.n=Mr=pt[yr],Mr.p=er,er=Mr;er.n=Mr=pt[0],Mr.p=er}}Cr.invert=Cr;var Ir=M();function Ur(pt){return f(pt[0])<=u?pt[0]:b(pt[0])*((f(pt[0])+u)%o-u)}function qt(pt,kt){var yr=Ur(kt),er=kt[1],Mr=A(er),Zr=[A(yr),-s(yr),0],un=0,fn=0;Ir.reset(),1===Mr?er=a+n:-1===Mr&&(er=-a-n);for(var Dn=0,Wn=pt.length;Dn<Wn;++Dn)if(_n=(yn=pt[Dn]).length)for(var yn,_n,Mn=yn[_n-1],Un=Ur(Mn),ta=Mn[1]/2+r,Qa=A(ta),ja=s(ta),ii=0;ii<_n;++ii,Un=fa,Qa=ti,ja=pi,Mn=oi){var oi=yn[ii],fa=Ur(oi),pa=oi[1]/2+r,ti=A(pa),pi=s(pa),Hi=fa-Un,no=Hi>=0?1:-1,Zi=no*Hi,Ki=Zi>u,mi=Qa*ti;if(Ir.add(y(mi*no*A(Zi),ja*pi+mi*s(Zi))),un+=Ki?Hi+no*o:Hi,Ki^Un>=yr^fa>=yr){var So=re(J(Mn),J(oi));de(So);var Co=re(Zr,So);de(Co);var to=(Ki^Hi>=0?-1:1)*E(Co[2]);(er>to||er===to&&(So[0]||So[1]))&&(fn+=Ki^Hi>=0?1:-1)}}return(un<-n||un<n&&Ir<-n)^1&fn}function on(pt,kt){return pt<kt?-1:pt>kt?1:pt>=kt?0:NaN}var An=function an(pt){return 1===pt.length&&(pt=function hn(pt){return function(kt,yr){return on(pt(kt),yr)}}(pt)),{left:function(kt,yr,er,Mr){for(null==er&&(er=0),null==Mr&&(Mr=kt.length);er<Mr;){var Zr=er+Mr>>>1;pt(kt[Zr],yr)<0?er=Zr+1:Mr=Zr}return er},right:function(kt,yr,er,Mr){for(null==er&&(er=0),null==Mr&&(Mr=kt.length);er<Mr;){var Zr=er+Mr>>>1;pt(kt[Zr],yr)>0?Mr=Zr:er=Zr+1}return er}}}(on);An.right,An.left;var Yr=Array.prototype;Yr.slice,Yr.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function si(pt){for(var yr,Zr,un,kt=pt.length,er=-1,Mr=0;++er<kt;)Mr+=pt[er].length;for(Zr=new Array(Mr);--kt>=0;)for(yr=(un=pt[kt]).length;--yr>=0;)Zr[--Mr]=un[yr];return Zr}function Ra(pt,kt,yr){pt=+pt,kt=+kt,yr=(Mr=arguments.length)<2?(kt=pt,pt=0,1):Mr<3?1:+yr;for(var er=-1,Mr=0|Math.max(0,Math.ceil((kt-pt)/yr)),Zr=new Array(Mr);++er<Mr;)Zr[er]=pt+er*yr;return Zr}function Na(pt,kt,yr,er){return function(Mr){var Wn,yn,_n,Zr=kt(Mr),un=br(),fn=kt(un),Dn=!1,Mn={point:Un,lineStart:Qa,lineEnd:ja,polygonStart:function(){Mn.point=ii,Mn.lineStart=oi,Mn.lineEnd=fa,yn=[],Wn=[]},polygonEnd:function(){Mn.point=Un,Mn.lineStart=Qa,Mn.lineEnd=ja,yn=si(yn);var pa=qt(Wn,er);yn.length?(Dn||(Mr.polygonStart(),Dn=!0),wt(yn,ha,pa,yr,Mr)):pa&&(Dn||(Mr.polygonStart(),Dn=!0),Mr.lineStart(),yr(null,null,1,Mr),Mr.lineEnd()),Dn&&(Mr.polygonEnd(),Dn=!1),yn=Wn=null},sphere:function(){Mr.polygonStart(),Mr.lineStart(),yr(null,null,1,Mr),Mr.lineEnd(),Mr.polygonEnd()}};function Un(pa,ti){pt(pa,ti)&&Mr.point(pa,ti)}function ta(pa,ti){Zr.point(pa,ti)}function Qa(){Mn.point=ta,Zr.lineStart()}function ja(){Mn.point=Un,Zr.lineEnd()}function ii(pa,ti){_n.push([pa,ti]),fn.point(pa,ti)}function oi(){fn.lineStart(),_n=[]}function fa(){ii(_n[0][0],_n[0][1]),fn.lineEnd();var pi,no,Zi,Ki,pa=fn.clean(),ti=un.result(),Hi=ti.length;if(_n.pop(),Wn.push(_n),_n=null,Hi){if(1&pa){if((no=(Zi=ti[0]).length-1)>0){for(Dn||(Mr.polygonStart(),Dn=!0),Mr.lineStart(),pi=0;pi<no;++pi)Mr.point((Ki=Zi[pi])[0],Ki[1]);Mr.lineEnd()}return}Hi>1&&2&pa&&ti.push(ti.pop().concat(ti.shift())),yn.push(ti.filter(Ni))}}return Mn}}function Ni(pt){return pt.length>1}function ha(pt,kt){return((pt=pt.x)[0]<0?pt[1]-a-n:a-pt[1])-((kt=kt.x)[0]<0?kt[1]-a-n:a-kt[1])}const yi=Na(function(){return!0},function gn(pt){var Mr,kt=NaN,yr=NaN,er=NaN;return{lineStart:function(){pt.lineStart(),Mr=1},point:function(Zr,un){var fn=Zr>0?u:-u,Dn=f(Zr-kt);f(Dn-u)<n?(pt.point(kt,yr=(yr+un)/2>0?a:-a),pt.point(er,yr),pt.lineEnd(),pt.lineStart(),pt.point(fn,yr),pt.point(Zr,yr),Mr=0):er!==fn&&Dn>=u&&(f(kt-er)<n&&(kt-=er*n),f(Zr-fn)<n&&(Zr-=fn*n),yr=function Eo(pt,kt,yr,er){var Mr,Zr,un=A(pt-yr);return f(un)>n?l((A(kt)*(Zr=s(er))*A(yr)-A(er)*(Mr=s(kt))*A(pt))/(Mr*Zr*un)):(kt+er)/2}(kt,yr,Zr,un),pt.point(er,yr),pt.lineEnd(),pt.lineStart(),pt.point(fn,yr),Mr=0),pt.point(kt=Zr,yr=un),er=fn},lineEnd:function(){pt.lineEnd(),kt=yr=NaN},clean:function(){return 2-Mr}}},function Qi(pt,kt,yr,er){var Mr;if(null==pt)Mr=yr*a,er.point(-u,Mr),er.point(0,Mr),er.point(u,Mr),er.point(u,0),er.point(u,-Mr),er.point(0,-Mr),er.point(-u,-Mr),er.point(-u,0),er.point(-u,Mr);else if(f(pt[0]-kt[0])>n){var Zr=pt[0]<kt[0]?u:-u;Mr=yr*Zr/2,er.point(-Zr,Mr),er.point(0,Mr),er.point(Zr,Mr)}else er.point(kt[0],kt[1])},[-u,-a]);function Ii(pt){var kt=s(pt),yr=6*p,er=kt>0,Mr=f(kt)>n;function un(yn,_n){return s(yn)*s(_n)>kt}function Dn(yn,_n,Mn){var Qa=[1,0,0],ja=re(J(yn),J(_n)),ii=ue(ja,ja),oi=ja[0],fa=ii-oi*oi;if(!fa)return!Mn&&yn;var pa=kt*ii/fa,ti=-kt*oi/fa,pi=re(Qa,ja),Hi=se(Qa,pa);ne(Hi,se(ja,ti));var Zi=pi,Ki=ue(Hi,Zi),mi=ue(Zi,Zi),So=Ki*Ki-mi*(ue(Hi,Hi)-1);if(!(So<0)){var Co=c(So),to=se(Zi,(-Ki-Co)/mi);if(ne(to,Hi),to=X(to),!Mn)return to;var os,Ia=yn[0],Ri=_n[0],Uo=yn[1],jo=_n[1];Ri<Ia&&(os=Ia,Ia=Ri,Ri=os);var Bl=Ri-Ia,cl=f(Bl-u)<n;if(!cl&&jo<Uo&&(os=Uo,Uo=jo,jo=os),cl||Bl<n?cl?Uo+jo>0^to[1]<(f(to[0]-Ia)<n?Uo:jo):Uo<=to[1]&&to[1]<=jo:Bl>u^(Ia<=to[0]&&to[0]<=Ri)){var xl=se(Zi,(-Ki+Co)/mi);return ne(xl,Hi),[to,X(xl)]}}}function Wn(yn,_n){var Mn=er?pt:u-pt,Un=0;return yn<-Mn?Un|=1:yn>Mn&&(Un|=2),_n<-Mn?Un|=4:_n>Mn&&(Un|=8),Un}return Na(un,function fn(yn){var _n,Mn,Un,ta,Qa;return{lineStart:function(){ta=Un=!1,Qa=1},point:function(ja,ii){var fa,oi=[ja,ii],pa=un(ja,ii),ti=er?pa?0:Wn(ja,ii):pa?Wn(ja+(ja<0?u:-u),ii):0;if(!_n&&(ta=Un=pa)&&yn.lineStart(),pa!==Un&&((!(fa=Dn(_n,oi))||Ut(_n,fa)||Ut(oi,fa))&&(oi[2]=1)),pa!==Un)Qa=0,pa?(yn.lineStart(),fa=Dn(oi,_n),yn.point(fa[0],fa[1])):(fa=Dn(_n,oi),yn.point(fa[0],fa[1],2),yn.lineEnd()),_n=fa;else if(Mr&&_n&&er^pa){var pi;!(ti&Mn)&&(pi=Dn(oi,_n,!0))&&(Qa=0,er?(yn.lineStart(),yn.point(pi[0][0],pi[0][1]),yn.point(pi[1][0],pi[1][1]),yn.lineEnd()):(yn.point(pi[1][0],pi[1][1]),yn.lineEnd(),yn.lineStart(),yn.point(pi[0][0],pi[0][1],3)))}pa&&(!_n||!Ut(_n,oi))&&yn.point(oi[0],oi[1]),_n=oi,Un=pa,Mn=ti},lineEnd:function(){Un&&yn.lineEnd(),_n=null},clean:function(){return Qa|(ta&&Un)<<1}}},function Zr(yn,_n,Mn,Un){Jt(Un,pt,yr,Mn,yn,_n)},er?[0,-pt]:[-u,pt-u])}var ao=1e9,io=-ao;function Lo(pt,kt,yr,er){function Mr(Wn,yn){return pt<=Wn&&Wn<=yr&&kt<=yn&&yn<=er}function Zr(Wn,yn,_n,Mn){var Un=0,ta=0;if(null==Wn||(Un=un(Wn,_n))!==(ta=un(yn,_n))||Dn(Wn,yn)<0^_n>0)do{Mn.point(0===Un||3===Un?pt:yr,Un>1?er:kt)}while((Un=(Un+_n+4)%4)!==ta);else Mn.point(yn[0],yn[1])}function un(Wn,yn){return f(Wn[0]-pt)<n?yn>0?0:3:f(Wn[0]-yr)<n?yn>0?2:1:f(Wn[1]-kt)<n?yn>0?1:0:yn>0?3:2}function fn(Wn,yn){return Dn(Wn.x,yn.x)}function Dn(Wn,yn){var _n=un(Wn,1),Mn=un(yn,1);return _n!==Mn?_n-Mn:0===_n?yn[1]-Wn[1]:1===_n?Wn[0]-yn[0]:2===_n?Wn[1]-yn[1]:yn[0]-Wn[0]}return function(Wn){var Mn,Un,ta,Qa,ja,ii,oi,fa,pa,ti,pi,yn=Wn,_n=br(),Hi={point:no,lineStart:function So(){Hi.point=to,Un&&Un.push(ta=[]),ti=!0,pa=!1,oi=fa=NaN},lineEnd:function Co(){Mn&&(to(Qa,ja),ii&&pa&&_n.rejoin(),Mn.push(_n.result())),Hi.point=no,pa&&yn.lineEnd()},polygonStart:function Ki(){yn=_n,Mn=[],Un=[],pi=!0},polygonEnd:function mi(){var Ia=function Zi(){for(var Ia=0,Ri=0,Uo=Un.length;Ri<Uo;++Ri)for(var Ys,xl,jo=Un[Ri],os=1,Bl=jo.length,cl=jo[0],_o=cl[0],_s=cl[1];os<Bl;++os)Ys=_o,xl=_s,cl=jo[os],_o=cl[0],_s=cl[1],xl<=er?_s>er&&(_o-Ys)*(er-xl)>(_s-xl)*(pt-Ys)&&++Ia:_s<=er&&(_o-Ys)*(er-xl)<(_s-xl)*(pt-Ys)&&--Ia;return Ia}(),Ri=pi&&Ia,Uo=(Mn=si(Mn)).length;(Ri||Uo)&&(Wn.polygonStart(),Ri&&(Wn.lineStart(),Zr(null,null,1,Wn),Wn.lineEnd()),Uo&&wt(Mn,fn,Ia,Zr,Wn),Wn.polygonEnd()),yn=Wn,Mn=Un=ta=null}};function no(Ia,Ri){Mr(Ia,Ri)&&yn.point(Ia,Ri)}function to(Ia,Ri){var Uo=Mr(Ia,Ri);if(Un&&ta.push([Ia,Ri]),ti)Qa=Ia,ja=Ri,ii=Uo,ti=!1,Uo&&(yn.lineStart(),yn.point(Ia,Ri));else if(Uo&&pa)yn.point(Ia,Ri);else{var jo=[oi=Math.max(io,Math.min(ao,oi)),fa=Math.max(io,Math.min(ao,fa))],os=[Ia=Math.max(io,Math.min(ao,Ia)),Ri=Math.max(io,Math.min(ao,Ri))];!function Xo(pt,kt,yr,er,Mr,Zr){var ta,un=pt[0],fn=pt[1],yn=0,_n=1,Mn=kt[0]-un,Un=kt[1]-fn;if(ta=yr-un,Mn||!(ta>0)){if(ta/=Mn,Mn<0){if(ta<yn)return;ta<_n&&(_n=ta)}else if(Mn>0){if(ta>_n)return;ta>yn&&(yn=ta)}if(ta=Mr-un,Mn||!(ta<0)){if(ta/=Mn,Mn<0){if(ta>_n)return;ta>yn&&(yn=ta)}else if(Mn>0){if(ta<yn)return;ta<_n&&(_n=ta)}if(ta=er-fn,Un||!(ta>0)){if(ta/=Un,Un<0){if(ta<yn)return;ta<_n&&(_n=ta)}else if(Un>0){if(ta>_n)return;ta>yn&&(yn=ta)}if(ta=Zr-fn,Un||!(ta<0)){if(ta/=Un,Un<0){if(ta>_n)return;ta>yn&&(yn=ta)}else if(Un>0){if(ta<yn)return;ta<_n&&(_n=ta)}return yn>0&&(pt[0]=un+yn*Mn,pt[1]=fn+yn*Un),_n<1&&(kt[0]=un+_n*Mn,kt[1]=fn+_n*Un),!0}}}}}(jo,os,pt,kt,yr,er)?Uo&&(yn.lineStart(),yn.point(Ia,Ri),pi=!1):(pa||(yn.lineStart(),yn.point(jo[0],jo[1])),yn.point(os[0],os[1]),Uo||yn.lineEnd(),pi=!1)}oi=Ia,fa=Ri,pa=Uo}return Hi}}function qo(){var Mr,Zr,un,pt=0,kt=0,yr=960,er=500;return un={stream:function(fn){return Mr&&Zr===fn?Mr:Mr=Lo(pt,kt,yr,er)(Zr=fn)},extent:function(fn){return arguments.length?(pt=+fn[0][0],kt=+fn[0][1],yr=+fn[1][0],er=+fn[1][1],Mr=Zr=null,un):[[pt,kt],[yr,er]]}}}var In,Ta,ls,wo=M(),Do={sphere:R,point:R,lineStart:function oo(){Do.point=as,Do.lineEnd=ys},lineEnd:R,polygonStart:R,polygonEnd:R};function ys(){Do.point=Do.lineEnd=R}function as(pt,kt){In=pt*=p,Ta=A(kt*=p),ls=s(kt),Do.point=el}function el(pt,kt){pt*=p;var yr=A(kt*=p),er=s(kt),Mr=f(pt-In),Zr=s(Mr),fn=er*A(Mr),Dn=ls*yr-Ta*er*Zr,Wn=Ta*yr+ls*er*Zr;wo.add(y(c(fn*fn+Dn*Dn),Wn)),In=pt,Ta=yr,ls=er}function To(pt){return wo.reset(),O(pt,Do),+wo}var va=[null,null],Ai={type:"LineString",coordinates:va};function bi(pt,kt){return va[0]=pt,va[1]=kt,To(Ai)}var so={Feature:function(pt,kt){return fi(pt.geometry,kt)},FeatureCollection:function(pt,kt){for(var yr=pt.features,er=-1,Mr=yr.length;++er<Mr;)if(fi(yr[er].geometry,kt))return!0;return!1}},eo={Sphere:function(){return!0},Point:function(pt,kt){return Ql(pt.coordinates,kt)},MultiPoint:function(pt,kt){for(var yr=pt.coordinates,er=-1,Mr=yr.length;++er<Mr;)if(Ql(yr[er],kt))return!0;return!1},LineString:function(pt,kt){return Os(pt.coordinates,kt)},MultiLineString:function(pt,kt){for(var yr=pt.coordinates,er=-1,Mr=yr.length;++er<Mr;)if(Os(yr[er],kt))return!0;return!1},Polygon:function(pt,kt){return ms(pt.coordinates,kt)},MultiPolygon:function(pt,kt){for(var yr=pt.coordinates,er=-1,Mr=yr.length;++er<Mr;)if(ms(yr[er],kt))return!0;return!1},GeometryCollection:function(pt,kt){for(var yr=pt.geometries,er=-1,Mr=yr.length;++er<Mr;)if(fi(yr[er],kt))return!0;return!1}};function fi(pt,kt){return!(!pt||!eo.hasOwnProperty(pt.type))&&eo[pt.type](pt,kt)}function Ql(pt,kt){return 0===bi(pt,kt)}function Os(pt,kt){for(var yr,er,Mr,Zr=0,un=pt.length;Zr<un;Zr++){if(0===(er=bi(pt[Zr],kt))||Zr>0&&((Mr=bi(pt[Zr],pt[Zr-1]))>0&&yr<=Mr&&er<=Mr&&(yr+er-Mr)*(1-Math.pow((yr-er)/Mr,2))<i*Mr))return!0;yr=er}return!1}function ms(pt,kt){return!!qt(pt.map(tl),Ro(kt))}function tl(pt){return(pt=pt.map(Ro)).pop(),pt}function Ro(pt){return[pt[0]*p,pt[1]*p]}function yo(pt,kt){return(pt&&so.hasOwnProperty(pt.type)?so[pt.type]:fi)(pt,kt)}function Ls(pt,kt,yr){var er=Ra(pt,kt-n,yr).concat(kt);return function(Mr){return er.map(function(Zr){return[Mr,Zr]})}}function xs(pt,kt,yr){var er=Ra(pt,kt-n,yr).concat(kt);return function(Mr){return er.map(function(Zr){return[Zr,Mr]})}}function Ll(){var pt,kt,yr,er,Mr,Zr,un,fn,Mn,Un,ta,Qa,Dn=10,Wn=Dn,yn=90,_n=360,ja=2.5;function ii(){return{type:"MultiLineString",coordinates:oi()}}function oi(){return Ra(x(er/yn)*yn,yr,yn).map(ta).concat(Ra(x(fn/_n)*_n,un,_n).map(Qa)).concat(Ra(x(kt/Dn)*Dn,pt,Dn).filter(function(fa){return f(fa%yn)>n}).map(Mn)).concat(Ra(x(Zr/Wn)*Wn,Mr,Wn).filter(function(fa){return f(fa%_n)>n}).map(Un))}return ii.lines=function(){return oi().map(function(fa){return{type:"LineString",coordinates:fa}})},ii.outline=function(){return{type:"Polygon",coordinates:[ta(er).concat(Qa(un).slice(1),ta(yr).reverse().slice(1),Qa(fn).reverse().slice(1))]}},ii.extent=function(fa){return arguments.length?ii.extentMajor(fa).extentMinor(fa):ii.extentMinor()},ii.extentMajor=function(fa){return arguments.length?(er=+fa[0][0],yr=+fa[1][0],fn=+fa[0][1],un=+fa[1][1],er>yr&&(fa=er,er=yr,yr=fa),fn>un&&(fa=fn,fn=un,un=fa),ii.precision(ja)):[[er,fn],[yr,un]]},ii.extentMinor=function(fa){return arguments.length?(kt=+fa[0][0],pt=+fa[1][0],Zr=+fa[0][1],Mr=+fa[1][1],kt>pt&&(fa=kt,kt=pt,pt=fa),Zr>Mr&&(fa=Zr,Zr=Mr,Mr=fa),ii.precision(ja)):[[kt,Zr],[pt,Mr]]},ii.step=function(fa){return arguments.length?ii.stepMajor(fa).stepMinor(fa):ii.stepMinor()},ii.stepMajor=function(fa){return arguments.length?(yn=+fa[0],_n=+fa[1],ii):[yn,_n]},ii.stepMinor=function(fa){return arguments.length?(Dn=+fa[0],Wn=+fa[1],ii):[Dn,Wn]},ii.precision=function(fa){return arguments.length?(ja=+fa,Mn=Ls(Zr,Mr,90),Un=xs(kt,pt,ja),ta=Ls(fn,un,90),Qa=xs(er,yr,ja),ii):ja},ii.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Hs(){return Ll()()}function rl(pt,kt){var yr=pt[0]*p,er=pt[1]*p,Mr=kt[0]*p,Zr=kt[1]*p,un=s(er),fn=A(er),Dn=s(Zr),Wn=A(Zr),yn=un*s(yr),_n=un*A(yr),Mn=Dn*s(Mr),Un=Dn*A(Mr),ta=2*E(c(P(Zr-er)+un*Dn*P(Mr-yr))),Qa=A(ta),ja=ta?function(ii){var oi=A(ii*=ta)/Qa,fa=A(ta-ii)/Qa,pa=fa*yn+oi*Mn,ti=fa*_n+oi*Un,pi=fa*fn+oi*Wn;return[y(ti,pa)*v,y(pi,c(pa*pa+ti*ti))*v]}:function(){return[yr*v,er*v]};return ja.distance=ta,ja}function Pl(pt){return pt}var pu,Ho,Zo,Vs,ji=M(),Il=M(),Ps={point:R,lineStart:R,lineEnd:R,polygonStart:function(){Ps.lineStart=Vo,Ps.lineEnd=ko},polygonEnd:function(){Ps.lineStart=Ps.lineEnd=Ps.point=R,ji.add(f(Il)),Il.reset()},result:function(){var pt=ji/2;return ji.reset(),pt}};function Vo(){Ps.point=nl}function nl(pt,kt){Ps.point=Bo,pu=Zo=pt,Ho=Vs=kt}function Bo(pt,kt){Il.add(Vs*pt-Zo*kt),Zo=pt,Vs=kt}function ko(){Bo(pu,Ho)}const gu=Ps;var Ao=1/0,us=Ao,fs=-Ao,Dl=fs;const es={point:function yu(pt,kt){pt<Ao&&(Ao=pt),pt>fs&&(fs=pt),kt<us&&(us=kt),kt>Dl&&(Dl=kt)},lineStart:R,lineEnd:R,polygonStart:R,polygonEnd:R,result:function(){var pt=[[Ao,us],[fs,Dl]];return fs=Dl=-(us=Ao=1/0),pt}};var bs,Ns,Ds,Bs,Wi=0,mu=0,Is=0,ts=0,Rl=0,$l=0,hf=0,rs=0,is=0,Gs={point:Gl,lineStart:zf,lineEnd:kl,polygonStart:function(){Gs.lineStart=xu,Gs.lineEnd=qu},polygonEnd:function(){Gs.point=Gl,Gs.lineStart=zf,Gs.lineEnd=kl},result:function(){var pt=is?[hf/is,rs/is]:$l?[ts/$l,Rl/$l]:Is?[Wi/Is,mu/Is]:[NaN,NaN];return Wi=mu=Is=ts=Rl=$l=hf=rs=is=0,pt}};function Gl(pt,kt){Wi+=pt,mu+=kt,++Is}function zf(){Gs.point=$u}function $u(pt,kt){Gs.point=Of,Gl(Ds=pt,Bs=kt)}function Of(pt,kt){var yr=pt-Ds,er=kt-Bs,Mr=c(yr*yr+er*er);ts+=Mr*(Ds+pt)/2,Rl+=Mr*(Bs+kt)/2,$l+=Mr,Gl(Ds=pt,Bs=kt)}function kl(){Gs.point=Gl}function xu(){Gs.point=ql}function qu(){vf(bs,Ns)}function ql(pt,kt){Gs.point=vf,Gl(bs=Ds=pt,Ns=Bs=kt)}function vf(pt,kt){var yr=pt-Ds,er=kt-Bs,Mr=c(yr*yr+er*er);ts+=Mr*(Ds+pt)/2,Rl+=Mr*(Bs+kt)/2,$l+=Mr,hf+=(Mr=Bs*pt-Ds*kt)*(Ds+pt),rs+=Mr*(Bs+kt),is+=3*Mr,Gl(Ds=pt,Bs=kt)}const zu=Gs;function jl(pt){this._context=pt}jl.prototype={_radius:4.5,pointRadius:function(pt){return this._radius=pt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(pt,kt){switch(this._point){case 0:this._context.moveTo(pt,kt),this._point=1;break;case 1:this._context.lineTo(pt,kt);break;default:this._context.moveTo(pt+this._radius,kt),this._context.arc(pt,kt,this._radius,0,o)}},result:R};var Ou,js,bu,co,Wl,ef=M(),al={point:R,lineStart:function(){al.point=ws},lineEnd:function(){Ou&&_l(js,bu),al.point=R},polygonStart:function(){Ou=!0},polygonEnd:function(){Ou=null},result:function(){var pt=+ef;return ef.reset(),pt}};function ws(pt,kt){al.point=_l,js=co=pt,bu=Wl=kt}function _l(pt,kt){co-=pt,Wl-=kt,ef.add(c(co*co+Wl*Wl)),co=pt,Wl=kt}const il=al;function pl(){this._string=[]}function Fo(pt){return"m0,"+pt+"a"+pt+","+pt+" 0 1,1 0,"+-2*pt+"a"+pt+","+pt+" 0 1,1 0,"+2*pt+"z"}function Nf(pt,kt){var er,Mr,yr=4.5;function Zr(un){return un&&("function"==typeof yr&&Mr.pointRadius(+yr.apply(this,arguments)),O(un,er(Mr))),Mr.result()}return Zr.area=function(un){return O(un,er(gu)),gu.result()},Zr.measure=function(un){return O(un,er(il)),il.result()},Zr.bounds=function(un){return O(un,er(es)),es.result()},Zr.centroid=function(un){return O(un,er(zu)),zu.result()},Zr.projection=function(un){return arguments.length?(er=null==un?(pt=null,Pl):(pt=un).stream,Zr):pt},Zr.context=function(un){return arguments.length?(Mr=null==un?(kt=null,new pl):new jl(kt=un),"function"!=typeof yr&&Mr.pointRadius(yr),Zr):kt},Zr.pointRadius=function(un){return arguments.length?(yr="function"==typeof un?un:(Mr.pointRadius(+un),+un),Zr):yr},Zr.projection(pt).context(kt)}function Ef(pt){return{stream:Fl(pt)}}function Fl(pt){return function(kt){var yr=new Nu;for(var er in pt)yr[er]=pt[er];return yr.stream=kt,yr}}function Nu(){}function df(pt,kt,yr){var er=pt.clipExtent&&pt.clipExtent();return pt.scale(150).translate([0,0]),null!=er&&pt.clipExtent(null),O(yr,pt.stream(es)),kt(es.result()),null!=er&&pt.clipExtent(er),pt}function wu(pt,kt,yr){return df(pt,function(er){var Mr=kt[1][0]-kt[0][0],Zr=kt[1][1]-kt[0][1],un=Math.min(Mr/(er[1][0]-er[0][0]),Zr/(er[1][1]-er[0][1])),fn=+kt[0][0]+(Mr-un*(er[1][0]+er[0][0]))/2,Dn=+kt[0][1]+(Zr-un*(er[1][1]+er[0][1]))/2;pt.scale(150*un).translate([fn,Dn])},yr)}function eu(pt,kt,yr){return wu(pt,[[0,0],kt],yr)}function Us(pt,kt,yr){return df(pt,function(er){var Mr=+kt,Zr=Mr/(er[1][0]-er[0][0]),un=(Mr-Zr*(er[1][0]+er[0][0]))/2,fn=-Zr*er[0][1];pt.scale(150*Zr).translate([un,fn])},yr)}function Ws(pt,kt,yr){return df(pt,function(er){var Mr=+kt,Zr=Mr/(er[1][1]-er[0][1]),un=-Zr*er[0][0],fn=(Mr-Zr*(er[1][1]+er[0][1]))/2;pt.scale(150*Zr).translate([un,fn])},yr)}pl.prototype={_radius:4.5,_circle:Fo(4.5),pointRadius:function(pt){return(pt=+pt)!==this._radius&&(this._radius=pt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(pt,kt){switch(this._point){case 0:this._string.push("M",pt,",",kt),this._point=1;break;case 1:this._string.push("L",pt,",",kt);break;default:null==this._circle&&(this._circle=Fo(this._radius)),this._string.push("M",pt,",",kt,this._circle)}},result:function(){if(this._string.length){var pt=this._string.join("");return this._string=[],pt}return null}},Nu.prototype={constructor:Nu,point:function(pt,kt){this.stream.point(pt,kt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pf=s(30*p);function gf(pt,kt){return+kt?function Tu(pt,kt){function yr(er,Mr,Zr,un,fn,Dn,Wn,yn,_n,Mn,Un,ta,Qa,ja){var ii=Wn-er,oi=yn-Mr,fa=ii*ii+oi*oi;if(fa>4*kt&&Qa--){var pa=un+Mn,ti=fn+Un,pi=Dn+ta,Hi=c(pa*pa+ti*ti+pi*pi),no=E(pi/=Hi),Zi=f(f(pi)-1)<n||f(Zr-_n)<n?(Zr+_n)/2:y(ti,pa),Ki=pt(Zi,no),mi=Ki[0],So=Ki[1],Co=mi-er,to=So-Mr,Ia=oi*Co-ii*to;(Ia*Ia/fa>kt||f((ii*Co+oi*to)/fa-.5)>.3||un*Mn+fn*Un+Dn*ta<pf)&&(yr(er,Mr,Zr,un,fn,Dn,mi,So,Zi,pa/=Hi,ti/=Hi,pi,Qa,ja),ja.point(mi,So),yr(mi,So,Zi,pa,ti,pi,Wn,yn,_n,Mn,Un,ta,Qa,ja))}}return function(er){var Mr,Zr,un,fn,Dn,Wn,yn,_n,Mn,Un,ta,Qa,ja={point:ii,lineStart:oi,lineEnd:pa,polygonStart:function(){er.polygonStart(),ja.lineStart=ti},polygonEnd:function(){er.polygonEnd(),ja.lineStart=oi}};function ii(no,Zi){no=pt(no,Zi),er.point(no[0],no[1])}function oi(){_n=NaN,ja.point=fa,er.lineStart()}function fa(no,Zi){var Ki=J([no,Zi]),mi=pt(no,Zi);yr(_n,Mn,yn,Un,ta,Qa,_n=mi[0],Mn=mi[1],yn=no,Un=Ki[0],ta=Ki[1],Qa=Ki[2],16,er),er.point(_n,Mn)}function pa(){ja.point=ii,er.lineEnd()}function ti(){oi(),ja.point=pi,ja.lineEnd=Hi}function pi(no,Zi){fa(Mr=no,Zi),Zr=_n,un=Mn,fn=Un,Dn=ta,Wn=Qa,ja.point=fa}function Hi(){yr(_n,Mn,yn,Un,ta,Qa,Zr,un,Mr,fn,Dn,Wn,16,er),ja.lineEnd=pa,pa()}return ja}}(pt,kt):function Cf(pt){return Fl({point:function(kt,yr){kt=pt(kt,yr),this.stream.point(kt[0],kt[1])}})}(pt)}var Uu=Fl({point:function(pt,kt){this.stream.point(pt*p,kt*p)}});function yf(pt,kt,yr,er,Mr){function Zr(un,fn){return[kt+pt*(un*=er),yr-pt*(fn*=Mr)]}return Zr.invert=function(un,fn){return[(un-kt)/pt*er,(yr-fn)/pt*Mr]},Zr}function mf(pt,kt,yr,er,Mr,Zr){var un=s(Zr),fn=A(Zr),Dn=un*pt,Wn=fn*pt,yn=un/pt,_n=fn/pt,Mn=(fn*yr-un*kt)/pt,Un=(fn*kt+un*yr)/pt;function ta(Qa,ja){return[Dn*(Qa*=er)-Wn*(ja*=Mr)+kt,yr-Wn*Qa-Dn*ja]}return ta.invert=function(Qa,ja){return[er*(yn*Qa-_n*ja+Mn),Mr*(Un-_n*Qa-yn*ja)]},ta}function Xi(pt){return Au(function(){return pt})()}function Au(pt){var kt,yn,ii,oi,fa,pi,Hi,no,Zi,Ki,yr=150,er=480,Mr=250,Zr=0,un=0,fn=0,Dn=0,Wn=0,_n=0,Mn=1,Un=1,ta=null,Qa=yi,ja=null,pa=Pl,ti=.5;function mi(Ia){return no(Ia[0]*p,Ia[1]*p)}function So(Ia){return(Ia=no.invert(Ia[0],Ia[1]))&&[Ia[0]*v,Ia[1]*v]}function Co(){var Ia=mf(yr,0,0,Mn,Un,_n).apply(null,kt(Zr,un)),Ri=(_n?mf:yf)(yr,er-Ia[0],Mr-Ia[1],Mn,Un,_n);return yn=Hr(fn,Dn,Wn),Hi=tr(kt,Ri),no=tr(yn,Hi),pi=gf(Hi,ti),to()}function to(){return Zi=Ki=null,mi}return mi.stream=function(Ia){return Zi&&Ki===Ia?Zi:Zi=Uu(function tu(pt){return Fl({point:function(kt,yr){var er=pt(kt,yr);return this.stream.point(er[0],er[1])}})}(yn)(Qa(pi(pa(Ki=Ia)))))},mi.preclip=function(Ia){return arguments.length?(Qa=Ia,ta=void 0,to()):Qa},mi.postclip=function(Ia){return arguments.length?(pa=Ia,ja=ii=oi=fa=null,to()):pa},mi.clipAngle=function(Ia){return arguments.length?(Qa=+Ia?Ii(ta=Ia*p):(ta=null,yi),to()):ta*v},mi.clipExtent=function(Ia){return arguments.length?(pa=null==Ia?(ja=ii=oi=fa=null,Pl):Lo(ja=+Ia[0][0],ii=+Ia[0][1],oi=+Ia[1][0],fa=+Ia[1][1]),to()):null==ja?null:[[ja,ii],[oi,fa]]},mi.scale=function(Ia){return arguments.length?(yr=+Ia,Co()):yr},mi.translate=function(Ia){return arguments.length?(er=+Ia[0],Mr=+Ia[1],Co()):[er,Mr]},mi.center=function(Ia){return arguments.length?(Zr=Ia[0]%360*p,un=Ia[1]%360*p,Co()):[Zr*v,un*v]},mi.rotate=function(Ia){return arguments.length?(fn=Ia[0]%360*p,Dn=Ia[1]%360*p,Wn=Ia.length>2?Ia[2]%360*p:0,Co()):[fn*v,Dn*v,Wn*v]},mi.angle=function(Ia){return arguments.length?(_n=Ia%360*p,Co()):_n*v},mi.reflectX=function(Ia){return arguments.length?(Mn=Ia?-1:1,Co()):Mn<0},mi.reflectY=function(Ia){return arguments.length?(Un=Ia?-1:1,Co()):Un<0},mi.precision=function(Ia){return arguments.length?(pi=gf(Hi,ti=Ia*Ia),to()):c(ti)},mi.fitExtent=function(Ia,Ri){return wu(mi,Ia,Ri)},mi.fitSize=function(Ia,Ri){return eu(mi,Ia,Ri)},mi.fitWidth=function(Ia,Ri){return Us(mi,Ia,Ri)},mi.fitHeight=function(Ia,Ri){return Ws(mi,Ia,Ri)},function(){return kt=pt.apply(this,arguments),mi.invert=kt.invert&&So,Co()}}function ru(pt){var kt=0,yr=u/3,er=Au(pt),Mr=er(kt,yr);return Mr.parallels=function(Zr){return arguments.length?er(kt=Zr[0]*p,yr=Zr[1]*p):[kt*v,yr*v]},Mr}function Lf(pt,kt){var yr=A(pt),er=(yr+A(kt))/2;if(f(er)<n)return function xf(pt){var kt=s(pt);function yr(er,Mr){return[er*kt,A(Mr)/kt]}return yr.invert=function(er,Mr){return[er/kt,E(Mr*kt)]},yr}(pt);var Mr=1+yr*(2*er-yr),Zr=c(Mr)/er;function un(fn,Dn){var Wn=c(Mr-2*er*A(Dn))/er;return[Wn*A(fn*=er),Zr-Wn*s(fn)]}return un.invert=function(fn,Dn){var Wn=Zr-Dn,yn=y(fn,f(Wn))*b(Wn);return Wn*er<0&&(yn-=u*b(fn)*b(Wn)),[yn/er,E((Mr-(fn*fn+Wn*Wn)*er*er)/(2*er))]},un}function ol(){return ru(Lf).scale(155.424).center([0,33.6442])}function Hu(){return ol().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function cs(){var pt,kt,er,Zr,fn,Dn,yr=Hu(),Mr=ol().rotate([154,0]).center([-2,58.5]).parallels([55,65]),un=ol().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Wn={point:function(Mn,Un){Dn=[Mn,Un]}};function yn(Mn){var Un=Mn[0],ta=Mn[1];return Dn=null,er.point(Un,ta),Dn||(Zr.point(Un,ta),Dn)||(fn.point(Un,ta),Dn)}function _n(){return pt=kt=null,yn}return yn.invert=function(Mn){var Un=yr.scale(),ta=yr.translate(),Qa=(Mn[0]-ta[0])/Un,ja=(Mn[1]-ta[1])/Un;return(ja>=.12&&ja<.234&&Qa>=-.425&&Qa<-.214?Mr:ja>=.166&&ja<.234&&Qa>=-.214&&Qa<-.115?un:yr).invert(Mn)},yn.stream=function(Mn){return pt&&kt===Mn?pt:pt=function tf(pt){var kt=pt.length;return{point:function(yr,er){for(var Mr=-1;++Mr<kt;)pt[Mr].point(yr,er)},sphere:function(){for(var yr=-1;++yr<kt;)pt[yr].sphere()},lineStart:function(){for(var yr=-1;++yr<kt;)pt[yr].lineStart()},lineEnd:function(){for(var yr=-1;++yr<kt;)pt[yr].lineEnd()},polygonStart:function(){for(var yr=-1;++yr<kt;)pt[yr].polygonStart()},polygonEnd:function(){for(var yr=-1;++yr<kt;)pt[yr].polygonEnd()}}}([yr.stream(kt=Mn),Mr.stream(Mn),un.stream(Mn)])},yn.precision=function(Mn){return arguments.length?(yr.precision(Mn),Mr.precision(Mn),un.precision(Mn),_n()):yr.precision()},yn.scale=function(Mn){return arguments.length?(yr.scale(Mn),Mr.scale(.35*Mn),un.scale(Mn),yn.translate(yr.translate())):yr.scale()},yn.translate=function(Mn){if(!arguments.length)return yr.translate();var Un=yr.scale(),ta=+Mn[0],Qa=+Mn[1];return er=yr.translate(Mn).clipExtent([[ta-.455*Un,Qa-.238*Un],[ta+.455*Un,Qa+.238*Un]]).stream(Wn),Zr=Mr.translate([ta-.307*Un,Qa+.201*Un]).clipExtent([[ta-.425*Un+n,Qa+.12*Un+n],[ta-.214*Un-n,Qa+.234*Un-n]]).stream(Wn),fn=un.translate([ta-.205*Un,Qa+.212*Un]).clipExtent([[ta-.214*Un+n,Qa+.166*Un+n],[ta-.115*Un-n,Qa+.234*Un-n]]).stream(Wn),_n()},yn.fitExtent=function(Mn,Un){return wu(yn,Mn,Un)},yn.fitSize=function(Mn,Un){return eu(yn,Mn,Un)},yn.fitWidth=function(Mn,Un){return Us(yn,Mn,Un)},yn.fitHeight=function(Mn,Un){return Ws(yn,Mn,Un)},yn.scale(1070)}function Su(pt){return function(kt,yr){var er=s(kt),Mr=s(yr),Zr=pt(er*Mr);return[Zr*Mr*A(kt),Zr*A(yr)]}}function Rs(pt){return function(kt,yr){var er=c(kt*kt+yr*yr),Mr=pt(er),Zr=A(Mr),un=s(Mr);return[y(kt*Zr,er*un),E(er&&yr*Zr/er)]}}var sl=Su(function(pt){return c(2/(1+pt))});function Yl(){return Xi(sl).scale(124.75).clipAngle(179.999)}sl.invert=Rs(function(pt){return 2*E(pt/2)});var Xl=Su(function(pt){return(pt=w(pt))&&pt/A(pt)});function Zl(){return Xi(Xl).scale(79.4188).clipAngle(179.999)}function ll(pt,kt){return[pt,m(S((a+kt)/2))]}function yl(){return zl(ll).scale(961/o)}function zl(pt){var fn,Dn,Wn,kt=Xi(pt),yr=kt.center,er=kt.scale,Mr=kt.translate,Zr=kt.clipExtent,un=null;function yn(){var _n=u*er(),Mn=kt(We(kt.rotate()).invert([0,0]));return Zr(null==un?[[Mn[0]-_n,Mn[1]-_n],[Mn[0]+_n,Mn[1]+_n]]:pt===ll?[[Math.max(Mn[0]-_n,un),fn],[Math.min(Mn[0]+_n,Dn),Wn]]:[[un,Math.max(Mn[1]-_n,fn)],[Dn,Math.min(Mn[1]+_n,Wn)]])}return kt.scale=function(_n){return arguments.length?(er(_n),yn()):er()},kt.translate=function(_n){return arguments.length?(Mr(_n),yn()):Mr()},kt.center=function(_n){return arguments.length?(yr(_n),yn()):yr()},kt.clipExtent=function(_n){return arguments.length?(null==_n?un=fn=Dn=Wn=null:(un=+_n[0][0],fn=+_n[0][1],Dn=+_n[1][0],Wn=+_n[1][1]),yn()):null==un?null:[[un,fn],[Dn,Wn]]},yn()}function ml(pt){return S((a+pt)/2)}function Vu(pt,kt){var yr=s(pt),er=pt===kt?A(pt):m(yr/s(kt))/m(ml(kt)/ml(pt)),Mr=yr*d(ml(pt),er)/er;if(!er)return ll;function Zr(un,fn){Mr>0?fn<-a+n&&(fn=-a+n):fn>a-n&&(fn=a-n);var Dn=Mr/d(ml(fn),er);return[Dn*A(er*un),Mr-Dn*s(er*un)]}return Zr.invert=function(un,fn){var Dn=Mr-fn,Wn=b(er)*c(un*un+Dn*Dn),yn=y(un,f(Dn))*b(Dn);return Dn*er<0&&(yn-=u*b(un)*b(Dn)),[yn/er,2*l(d(Mr/Wn,1/er))-a]},Zr}function ul(){return ru(Vu).scale(109.5).parallels([30,30])}function Mu(pt,kt){return[pt,kt]}function Xf(){return Xi(Mu).scale(152.63)}function Pf(pt,kt){var yr=s(pt),er=pt===kt?A(pt):(yr-s(kt))/(kt-pt),Mr=yr/er+pt;if(f(er)<n)return Mu;function Zr(un,fn){var Dn=Mr-fn,Wn=er*un;return[Dn*A(Wn),Mr-Dn*s(Wn)]}return Zr.invert=function(un,fn){var Dn=Mr-fn,Wn=y(un,f(Dn))*b(Dn);return Dn*er<0&&(Wn-=u*b(un)*b(Dn)),[Wn/er,Mr-b(er)*c(un*un+Dn*Dn)]},Zr}function Zf(){return ru(Pf).scale(131.154).center([0,13.9389])}Xl.invert=Rs(function(pt){return pt}),ll.invert=function(pt,kt){return[pt,2*l(h(kt))-a]},Mu.invert=Mu;var nu=1.340264,Eu=-.081106,Cu=893e-6,au=.003796,Kl=c(3)/2;function Ts(pt,kt){var yr=E(Kl*A(kt)),er=yr*yr,Mr=er*er*er;return[pt*s(yr)/(Kl*(nu+3*Eu*er+Mr*(7*Cu+9*au*er))),yr*(nu+Eu*er+Mr*(Cu+au*er))]}function Gu(){return Xi(Ts).scale(177.158)}function rf(pt,kt){var yr=s(kt),er=s(pt)*yr;return[yr*A(pt)/er,A(kt)/er]}function Lu(){return Xi(rf).scale(144.049).clipAngle(60)}function bf(){var un,fn,Wn,yn,_n,ja,ii,pt=1,kt=0,yr=0,er=1,Mr=1,Zr=0,Dn=null,Mn=1,Un=1,ta=Fl({point:function(pa,ti){var pi=fa([pa,ti]);this.stream.point(pi[0],pi[1])}}),Qa=Pl;function oi(){return Mn=pt*er,Un=pt*Mr,ja=ii=null,fa}function fa(pa){var ti=pa[0]*Mn,pi=pa[1]*Un;if(Zr){var Hi=pi*un-ti*fn;ti=ti*un+pi*fn,pi=Hi}return[ti+kt,pi+yr]}return fa.invert=function(pa){var ti=pa[0]-kt,pi=pa[1]-yr;if(Zr){var Hi=pi*un+ti*fn;ti=ti*un-pi*fn,pi=Hi}return[ti/Mn,pi/Un]},fa.stream=function(pa){return ja&&ii===pa?ja:ja=ta(Qa(ii=pa))},fa.postclip=function(pa){return arguments.length?(Qa=pa,Dn=Wn=yn=_n=null,oi()):Qa},fa.clipExtent=function(pa){return arguments.length?(Qa=null==pa?(Dn=Wn=yn=_n=null,Pl):Lo(Dn=+pa[0][0],Wn=+pa[0][1],yn=+pa[1][0],_n=+pa[1][1]),oi()):null==Dn?null:[[Dn,Wn],[yn,_n]]},fa.scale=function(pa){return arguments.length?(pt=+pa,oi()):pt},fa.translate=function(pa){return arguments.length?(kt=+pa[0],yr=+pa[1],oi()):[kt,yr]},fa.angle=function(pa){return arguments.length?(fn=A(Zr=pa%360*p),un=s(Zr),oi()):Zr*v},fa.reflectX=function(pa){return arguments.length?(er=pa?-1:1,oi()):er<0},fa.reflectY=function(pa){return arguments.length?(Mr=pa?-1:1,oi()):Mr<0},fa.fitExtent=function(pa,ti){return wu(fa,pa,ti)},fa.fitSize=function(pa,ti){return eu(fa,pa,ti)},fa.fitWidth=function(pa,ti){return Us(fa,pa,ti)},fa.fitHeight=function(pa,ti){return Ws(fa,pa,ti)},fa}function iu(pt,kt){var yr=kt*kt,er=yr*yr;return[pt*(.8707-.131979*yr+er*(er*(.003971*yr-.001529*er)-.013791)),kt*(1.007226+yr*(.015085+er*(.028874*yr-.044475-.005916*er)))]}function ou(){return Xi(iu).scale(175.295)}function ks(pt,kt){return[s(kt)*A(pt),A(kt)]}function Ol(){return Xi(ks).scale(249.5).clipAngle(90+n)}function fl(pt,kt){var yr=s(kt),er=1+s(pt)*yr;return[yr*A(pt)/er,A(kt)/er]}function ju(){return Xi(fl).scale(250).clipAngle(142)}function Nl(pt,kt){return[m(S((a+kt)/2)),-pt]}function Wu(){var pt=zl(Nl),kt=pt.center,yr=pt.rotate;return pt.center=function(er){return arguments.length?kt([-er[1],er[0]]):[(er=kt())[1],-er[0]]},pt.rotate=function(er){return arguments.length?yr([er[0],er[1],er.length>2?er[2]+90:90]):[(er=yr())[0],er[1],er[2]-90]},yr([0,0,90]).scale(159.155)}Ts.invert=function(pt,kt){for(var un,yr=kt,er=yr*yr,Mr=er*er*er,Zr=0;Zr<12&&(Mr=(er=(yr-=un=(yr*(nu+Eu*er+Mr*(Cu+au*er))-kt)/(nu+3*Eu*er+Mr*(7*Cu+9*au*er)))*yr)*er*er,!(f(un)<i));++Zr);return[Kl*pt*(nu+3*Eu*er+Mr*(7*Cu+9*au*er))/s(yr),E(A(yr)/Kl)]},rf.invert=Rs(l),iu.invert=function(pt,kt){var Mr,yr=kt,er=25;do{var Zr=yr*yr,un=Zr*Zr;yr-=Mr=(yr*(1.007226+Zr*(.015085+un*(.028874*Zr-.044475-.005916*un)))-kt)/(1.007226+Zr*(.045255+un*(.259866*Zr-.311325-.005916*11*un)))}while(f(Mr)>n&&--er>0);return[pt/(.8707+(Zr=yr*yr)*(Zr*(Zr*Zr*Zr*(.003971-.001529*Zr)-.013791)-.131979)),yr]},ks.invert=Rs(E),fl.invert=Rs(function(pt){return 2*l(pt)}),Nl.invert=function(pt,kt){return[-kt,2*l(h(pt))-a]}},32906:($,K,e)=>{"use strict";function M(Se,pe){return Se.parent===pe.parent?1:2}function t(Se,pe){return Se+pe.x}function n(Se,pe){return Math.max(Se,pe.y)}function a(){var Se=M,pe=1,ge=1,Oe=!1;function we(He){var Xe,ut=0;He.eachAfter(function(bt){var Pt=bt.children;Pt?(bt.x=function I(Se){return Se.reduce(t,0)/Se.length}(Pt),bt.y=function T(Se){return 1+Se.reduce(n,0)}(Pt)):(bt.x=Xe?ut+=Se(bt,Xe):0,bt.y=0,Xe=bt)});var Ze=function i(Se){for(var pe;pe=Se.children;)Se=pe[0];return Se}(He),qe=function u(Se){for(var pe;pe=Se.children;)Se=pe[pe.length-1];return Se}(He),Dt=Ze.x-Se(Ze,qe)/2,Ft=qe.x+Se(qe,Ze)/2;return He.eachAfter(Oe?function(bt){bt.x=(bt.x-He.x)*pe,bt.y=(He.y-bt.y)*ge}:function(bt){bt.x=(bt.x-Dt)/(Ft-Dt)*pe,bt.y=(1-(He.y?bt.y/He.y:1))*ge})}return we.separation=function(He){return arguments.length?(Se=He,we):Se},we.size=function(He){return arguments.length?(Oe=!1,pe=+He[0],ge=+He[1],we):Oe?null:[pe,ge]},we.nodeSize=function(He){return arguments.length?(Oe=!0,pe=+He[0],ge=+He[1],we):Oe?[pe,ge]:null},we}function r(Se){var pe=0,ge=Se.children,Oe=ge&&ge.length;if(Oe)for(;--Oe>=0;)pe+=ge[Oe].value;else pe=1;Se.value=pe}function A(Se,pe){var we,Xe,ut,Ze,qe,ge=new E(Se),Oe=+Se.value&&(ge.value=Se.value),He=[ge];for(null==pe&&(pe=c);we=He.pop();)if(Oe&&(we.value=+we.data.value),(ut=pe(we.data))&&(qe=ut.length))for(we.children=new Array(qe),Ze=qe-1;Ze>=0;--Ze)He.push(Xe=we.children[Ze]=new E(ut[Ze])),Xe.parent=we,Xe.depth=we.depth+1;return ge.eachBefore(w)}function c(Se){return Se.children}function S(Se){Se.data=Se.data.data}function w(Se){var pe=0;do{Se.height=pe}while((Se=Se.parent)&&Se.height<++pe)}function E(Se){this.data=Se,this.depth=this.height=0,this.parent=null}e.r(K),e.d(K,{cluster:()=>a,hierarchy:()=>A,pack:()=>J,packEnclose:()=>F,packSiblings:()=>oe,partition:()=>be,stratify:()=>ke,tree:()=>ct,treemap:()=>St,treemapBinary:()=>Xt,treemapDice:()=>de,treemapResquarify:()=>st,treemapSlice:()=>mt,treemapSliceDice:()=>Mt,treemapSquarify:()=>zt}),E.prototype=A.prototype={constructor:E,count:function o(){return this.eachAfter(r)},each:function v(Se){var ge,we,He,Xe,pe=this,Oe=[pe];do{for(ge=Oe.reverse(),Oe=[];pe=ge.pop();)if(Se(pe),we=pe.children)for(He=0,Xe=we.length;He<Xe;++He)Oe.push(we[He])}while(Oe.length);return this},eachAfter:function f(Se){for(var we,He,Xe,pe=this,ge=[pe],Oe=[];pe=ge.pop();)if(Oe.push(pe),we=pe.children)for(He=0,Xe=we.length;He<Xe;++He)ge.push(we[He]);for(;pe=Oe.pop();)Se(pe);return this},eachBefore:function p(Se){for(var Oe,we,pe=this,ge=[pe];pe=ge.pop();)if(Se(pe),Oe=pe.children)for(we=Oe.length-1;we>=0;--we)ge.push(Oe[we]);return this},sum:function l(Se){return this.eachAfter(function(pe){for(var ge=+Se(pe.data)||0,Oe=pe.children,we=Oe&&Oe.length;--we>=0;)ge+=Oe[we].value;pe.value=ge})},sort:function y(Se){return this.eachBefore(function(pe){pe.children&&pe.children.sort(Se)})},path:function s(Se){for(var pe=this,ge=function x(Se,pe){if(Se===pe)return Se;var ge=Se.ancestors(),Oe=pe.ancestors(),we=null;for(Se=ge.pop(),pe=Oe.pop();Se===pe;)we=Se,Se=ge.pop(),pe=Oe.pop();return we}(pe,Se),Oe=[pe];pe!==ge;)pe=pe.parent,Oe.push(pe);for(var we=Oe.length;Se!==ge;)Oe.splice(we,0,Se),Se=Se.parent;return Oe},ancestors:function h(){for(var Se=this,pe=[Se];Se=Se.parent;)pe.push(Se);return pe},descendants:function g(){var Se=[];return this.each(function(pe){Se.push(pe)}),Se},leaves:function m(){var Se=[];return this.eachBefore(function(pe){pe.children||Se.push(pe)}),Se},links:function d(){var Se=this,pe=[];return Se.each(function(ge){ge!==Se&&pe.push({source:ge.parent,target:ge})}),pe},copy:function b(){return A(this).eachBefore(S)}};var P=Array.prototype.slice;function F(Se){for(var we,He,pe=0,ge=(Se=function R(Se){for(var ge,Oe,pe=Se.length;pe;)Oe=Math.random()*pe--|0,ge=Se[pe],Se[pe]=Se[Oe],Se[Oe]=ge;return Se}(P.call(Se))).length,Oe=[];pe<ge;)we=Se[pe],He&&D(He,we)?++pe:(He=O(Oe=_(Oe,we)),pe=0);return He}function _(Se,pe){var ge,Oe;if(k(pe,Se))return[pe];for(ge=0;ge<Se.length;++ge)if(z(pe,Se[ge])&&k(H(Se[ge],pe),Se))return[Se[ge],pe];for(ge=0;ge<Se.length-1;++ge)for(Oe=ge+1;Oe<Se.length;++Oe)if(z(H(Se[ge],Se[Oe]),pe)&&z(H(Se[ge],pe),Se[Oe])&&z(H(Se[Oe],pe),Se[ge])&&k(j(Se[ge],Se[Oe],pe),Se))return[Se[ge],Se[Oe],pe];throw new Error}function z(Se,pe){var ge=Se.r-pe.r,Oe=pe.x-Se.x,we=pe.y-Se.y;return ge<0||ge*ge<Oe*Oe+we*we}function D(Se,pe){var ge=Se.r-pe.r+1e-6,Oe=pe.x-Se.x,we=pe.y-Se.y;return ge>0&&ge*ge>Oe*Oe+we*we}function k(Se,pe){for(var ge=0;ge<pe.length;++ge)if(!D(Se,pe[ge]))return!1;return!0}function O(Se){switch(Se.length){case 1:return function U(Se){return{x:Se.x,y:Se.y,r:Se.r}}(Se[0]);case 2:return H(Se[0],Se[1]);case 3:return j(Se[0],Se[1],Se[2])}}function H(Se,pe){var ge=Se.x,Oe=Se.y,we=Se.r,He=pe.x,Xe=pe.y,ut=pe.r,Ze=He-ge,qe=Xe-Oe,Dt=ut-we,Ft=Math.sqrt(Ze*Ze+qe*qe);return{x:(ge+He+Ze/Ft*Dt)/2,y:(Oe+Xe+qe/Ft*Dt)/2,r:(Ft+we+ut)/2}}function j(Se,pe,ge){var Oe=Se.x,we=Se.y,He=Se.r,Xe=pe.x,ut=pe.y,Ze=pe.r,qe=ge.x,Dt=ge.y,Ft=ge.r,bt=Oe-Xe,Pt=Oe-qe,cr=we-ut,Sr=we-Dt,Kr=Ze-He,It=Ft-He,$t=Oe*Oe+we*we-He*He,kr=$t-Xe*Xe-ut*ut+Ze*Ze,lr=$t-qe*qe-Dt*Dt+Ft*Ft,rt=Pt*cr-bt*Sr,$e=(cr*lr-Sr*kr)/(2*rt)-Oe,ht=(Sr*Kr-cr*It)/rt,gt=(Pt*kr-bt*lr)/(2*rt)-we,ft=(bt*It-Pt*Kr)/rt,Ct=ht*ht+ft*ft-1,sr=2*(He+$e*ht+gt*ft),tr=$e*$e+gt*gt-He*He,Cr=-(Ct?(sr+Math.sqrt(sr*sr-4*Ct*tr))/(2*Ct):tr/sr);return{x:Oe+$e+ht*Cr,y:we+gt+ft*Cr,r:Cr}}function ee(Se,pe,ge){var we,He,ut,Ze,Oe=Se.x-pe.x,Xe=Se.y-pe.y,qe=Oe*Oe+Xe*Xe;qe?(He=pe.r+ge.r,He*=He,Ze=Se.r+ge.r,He>(Ze*=Ze)?(we=(qe+Ze-He)/(2*qe),ut=Math.sqrt(Math.max(0,Ze/qe-we*we)),ge.x=Se.x-we*Oe-ut*Xe,ge.y=Se.y-we*Xe+ut*Oe):(we=(qe+He-Ze)/(2*qe),ut=Math.sqrt(Math.max(0,He/qe-we*we)),ge.x=pe.x+we*Oe-ut*Xe,ge.y=pe.y+we*Xe+ut*Oe)):(ge.x=pe.x+ge.r,ge.y=pe.y)}function W(Se,pe){var ge=Se.r+pe.r-1e-6,Oe=pe.x-Se.x,we=pe.y-Se.y;return ge>0&&ge*ge>Oe*Oe+we*we}function B(Se){var pe=Se._,ge=Se.next._,Oe=pe.r+ge.r,we=(pe.x*ge.r+ge.x*pe.r)/Oe,He=(pe.y*ge.r+ge.y*pe.r)/Oe;return we*we+He*He}function te(Se){this._=Se,this.next=null,this.previous=null}function q(Se){if(!(we=Se.length))return 0;var pe,ge,Oe,we,He,Xe,ut,Ze,qe,Dt,Ft;if((pe=Se[0]).x=0,pe.y=0,!(we>1))return pe.r;if(ge=Se[1],pe.x=-ge.r,ge.x=pe.r,ge.y=0,!(we>2))return pe.r+ge.r;ee(ge,pe,Oe=Se[2]),pe=new te(pe),ge=new te(ge),Oe=new te(Oe),pe.next=Oe.previous=ge,ge.next=pe.previous=Oe,Oe.next=ge.previous=pe;e:for(ut=3;ut<we;++ut){ee(pe._,ge._,Oe=Se[ut]),Oe=new te(Oe),Ze=ge.next,qe=pe.previous,Dt=ge._.r,Ft=pe._.r;do{if(Dt<=Ft){if(W(Ze._,Oe._)){ge=Ze,pe.next=ge,ge.previous=pe,--ut;continue e}Dt+=Ze._.r,Ze=Ze.next}else{if(W(qe._,Oe._)){(pe=qe).next=ge,ge.previous=pe,--ut;continue e}Ft+=qe._.r,qe=qe.previous}}while(Ze!==qe.next);for(Oe.previous=pe,Oe.next=ge,pe.next=ge.previous=ge=Oe,He=B(pe);(Oe=Oe.next)!==ge;)(Xe=B(Oe))<He&&(pe=Oe,He=Xe);ge=pe.next}for(pe=[ge._],Oe=ge;(Oe=Oe.next)!==ge;)pe.push(Oe._);for(Oe=F(pe),ut=0;ut<we;++ut)(pe=Se[ut]).x-=Oe.x,pe.y-=Oe.y;return Oe.r}function oe(Se){return q(Se),Se}function ie(Se){return null==Se?null:V(Se)}function V(Se){if("function"!=typeof Se)throw new Error;return Se}function Y(){return 0}function ae(Se){return function(){return Se}}function X(Se){return Math.sqrt(Se.value)}function J(){var Se=null,pe=1,ge=1,Oe=Y;function we(He){return He.x=pe/2,He.y=ge/2,Se?He.eachBefore(ue(Se)).eachAfter(re(Oe,.5)).eachBefore(ne(1)):He.eachBefore(ue(X)).eachAfter(re(Y,1)).eachAfter(re(Oe,He.r/Math.min(pe,ge))).eachBefore(ne(Math.min(pe,ge)/(2*He.r))),He}return we.radius=function(He){return arguments.length?(Se=ie(He),we):Se},we.size=function(He){return arguments.length?(pe=+He[0],ge=+He[1],we):[pe,ge]},we.padding=function(He){return arguments.length?(Oe="function"==typeof He?He:ae(+He),we):Oe},we}function ue(Se){return function(pe){pe.children||(pe.r=Math.max(0,+Se(pe)||0))}}function re(Se,pe){return function(ge){if(Oe=ge.children){var Oe,we,ut,He=Oe.length,Xe=Se(ge)*pe||0;if(Xe)for(we=0;we<He;++we)Oe[we].r+=Xe;if(ut=q(Oe),Xe)for(we=0;we<He;++we)Oe[we].r-=Xe;ge.r=ut+Xe}}}function ne(Se){return function(pe){var ge=pe.parent;pe.r*=Se,ge&&(pe.x=ge.x+Se*pe.x,pe.y=ge.y+Se*pe.y)}}function se(Se){Se.x0=Math.round(Se.x0),Se.y0=Math.round(Se.y0),Se.x1=Math.round(Se.x1),Se.y1=Math.round(Se.y1)}function de(Se,pe,ge,Oe,we){for(var Xe,He=Se.children,ut=-1,Ze=He.length,qe=Se.value&&(Oe-pe)/Se.value;++ut<Ze;)(Xe=He[ut]).y0=ge,Xe.y1=we,Xe.x0=pe,Xe.x1=pe+=Xe.value*qe}function be(){var Se=1,pe=1,ge=0,Oe=!1;function we(Xe){var ut=Xe.height+1;return Xe.x0=Xe.y0=ge,Xe.x1=Se,Xe.y1=pe/ut,Xe.eachBefore(function He(Xe,ut){return function(Ze){Ze.children&&de(Ze,Ze.x0,Xe*(Ze.depth+1)/ut,Ze.x1,Xe*(Ze.depth+2)/ut);var qe=Ze.x0,Dt=Ze.y0,Ft=Ze.x1-ge,bt=Ze.y1-ge;Ft<qe&&(qe=Ft=(qe+Ft)/2),bt<Dt&&(Dt=bt=(Dt+bt)/2),Ze.x0=qe,Ze.y0=Dt,Ze.x1=Ft,Ze.y1=bt}}(pe,ut)),Oe&&Xe.eachBefore(se),Xe}return we.round=function(Xe){return arguments.length?(Oe=!!Xe,we):Oe},we.size=function(Xe){return arguments.length?(Se=+Xe[0],pe=+Xe[1],we):[Se,pe]},we.padding=function(Xe){return arguments.length?(ge=+Xe,we):ge},we}var _e={depth:-1},Ce={};function Le(Se){return Se.id}function Fe(Se){return Se.parentId}function ke(){var Se=Le,pe=Fe;function ge(Oe){var we,He,ut,Ze,qe,Ft,bt,Xe=Oe.length,Dt=new Array(Xe),Pt={};for(He=0;He<Xe;++He)we=Oe[He],qe=Dt[He]=new E(we),null!=(Ft=Se(we,He,Oe))&&(Ft+="")&&(Pt[bt="$"+(qe.id=Ft)]=bt in Pt?Ce:qe);for(He=0;He<Xe;++He)if(qe=Dt[He],null!=(Ft=pe(Oe[He],He,Oe))&&(Ft+="")){if(!(Ze=Pt["$"+Ft]))throw new Error("missing: "+Ft);if(Ze===Ce)throw new Error("ambiguous: "+Ft);Ze.children?Ze.children.push(qe):Ze.children=[qe],qe.parent=Ze}else{if(ut)throw new Error("multiple roots");ut=qe}if(!ut)throw new Error("no root");if(ut.parent=_e,ut.eachBefore(function(cr){cr.depth=cr.parent.depth+1,--Xe}).eachBefore(w),ut.parent=null,Xe>0)throw new Error("cycle");return ut}return ge.id=function(Oe){return arguments.length?(Se=V(Oe),ge):Se},ge.parentId=function(Oe){return arguments.length?(pe=V(Oe),ge):pe},ge}function ze(Se,pe){return Se.parent===pe.parent?1:2}function Pe(Se){var pe=Se.children;return pe?pe[0]:Se.t}function Ie(Se){var pe=Se.children;return pe?pe[pe.length-1]:Se.t}function Qe(Se,pe,ge){var Oe=ge/(pe.i-Se.i);pe.c-=Oe,pe.s+=ge,Se.c+=Oe,pe.z+=ge,pe.m+=ge}function Be(Se,pe,ge){return Se.a.parent===pe.parent?Se.a:ge}function Ne(Se,pe){this._=Se,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=pe}function ct(){var Se=ze,pe=1,ge=1,Oe=null;function we(qe){var Dt=function nt(Se){for(var ge,we,He,Xe,ut,pe=new Ne(Se,0),Oe=[pe];ge=Oe.pop();)if(He=ge._.children)for(ge.children=new Array(ut=He.length),Xe=ut-1;Xe>=0;--Xe)Oe.push(we=ge.children[Xe]=new Ne(He[Xe],Xe)),we.parent=ge;return(pe.parent=new Ne(null,0)).children=[pe],pe}(qe);if(Dt.eachAfter(He),Dt.parent.m=-Dt.z,Dt.eachBefore(Xe),Oe)qe.eachBefore(Ze);else{var Ft=qe,bt=qe,Pt=qe;qe.eachBefore(function($t){$t.x<Ft.x&&(Ft=$t),$t.x>bt.x&&(bt=$t),$t.depth>Pt.depth&&(Pt=$t)});var cr=Ft===bt?1:Se(Ft,bt)/2,Sr=cr-Ft.x,Kr=pe/(bt.x+cr+Sr),It=ge/(Pt.depth||1);qe.eachBefore(function($t){$t.x=($t.x+Sr)*Kr,$t.y=$t.depth*It})}return qe}function He(qe){var Dt=qe.children,Ft=qe.parent.children,bt=qe.i?Ft[qe.i-1]:null;if(Dt){!function at(Se){for(var He,pe=0,ge=0,Oe=Se.children,we=Oe.length;--we>=0;)(He=Oe[we]).z+=pe,He.m+=pe,pe+=He.s+(ge+=He.c)}(qe);var Pt=(Dt[0].z+Dt[Dt.length-1].z)/2;bt?(qe.z=bt.z+Se(qe._,bt._),qe.m=qe.z-Pt):qe.z=Pt}else bt&&(qe.z=bt.z+Se(qe._,bt._));qe.parent.A=function ut(qe,Dt,Ft){if(Dt){for(var lr,bt=qe,Pt=qe,cr=Dt,Sr=bt.parent.children[0],Kr=bt.m,It=Pt.m,$t=cr.m,kr=Sr.m;cr=Ie(cr),bt=Pe(bt),cr&&bt;)Sr=Pe(Sr),(Pt=Ie(Pt)).a=qe,(lr=cr.z+$t-bt.z-Kr+Se(cr._,bt._))>0&&(Qe(Be(cr,qe,Ft),qe,lr),Kr+=lr,It+=lr),$t+=cr.m,Kr+=bt.m,kr+=Sr.m,It+=Pt.m;cr&&!Ie(Pt)&&(Pt.t=cr,Pt.m+=$t-It),bt&&!Pe(Sr)&&(Sr.t=bt,Sr.m+=Kr-kr,Ft=qe)}return Ft}(qe,bt,qe.parent.A||Ft[0])}function Xe(qe){qe._.x=qe.z+qe.parent.m,qe.m+=qe.parent.m}function Ze(qe){qe.x*=pe,qe.y=qe.depth*ge}return we.separation=function(qe){return arguments.length?(Se=qe,we):Se},we.size=function(qe){return arguments.length?(Oe=!1,pe=+qe[0],ge=+qe[1],we):Oe?null:[pe,ge]},we.nodeSize=function(qe){return arguments.length?(Oe=!0,pe=+qe[0],ge=+qe[1],we):Oe?[pe,ge]:null},we}function mt(Se,pe,ge,Oe,we){for(var Xe,He=Se.children,ut=-1,Ze=He.length,qe=Se.value&&(we-ge)/Se.value;++ut<Ze;)(Xe=He[ut]).x0=pe,Xe.x1=Oe,Xe.y0=ge,Xe.y1=ge+=Xe.value*qe}Ne.prototype=Object.create(E.prototype);var Bt=(1+Math.sqrt(5))/2;function Rt(Se,pe,ge,Oe,we,He){for(var Ze,qe,Pt,cr,Kr,It,$t,kr,lr,rt,$e,Xe=[],ut=pe.children,Dt=0,Ft=0,bt=ut.length,Sr=pe.value;Dt<bt;){Pt=we-ge,cr=He-Oe;do{Kr=ut[Ft++].value}while(!Kr&&Ft<bt);for(It=$t=Kr,$e=Kr*Kr*(rt=Math.max(cr/Pt,Pt/cr)/(Sr*Se)),lr=Math.max($t/$e,$e/It);Ft<bt;++Ft){if(Kr+=qe=ut[Ft].value,qe<It&&(It=qe),qe>$t&&($t=qe),$e=Kr*Kr*rt,(kr=Math.max($t/$e,$e/It))>lr){Kr-=qe;break}lr=kr}Xe.push(Ze={value:Kr,dice:Pt<cr,children:ut.slice(Dt,Ft)}),Ze.dice?de(Ze,ge,Oe,we,Sr?Oe+=cr*Kr/Sr:He):mt(Ze,ge,Oe,Sr?ge+=Pt*Kr/Sr:we,He),Sr-=Kr,Dt=Ft}return Xe}const zt=function Se(pe){function ge(Oe,we,He,Xe,ut){Rt(pe,Oe,we,He,Xe,ut)}return ge.ratio=function(Oe){return Se((Oe=+Oe)>1?Oe:1)},ge}(Bt);function St(){var Se=zt,pe=!1,ge=1,Oe=1,we=[0],He=Y,Xe=Y,ut=Y,Ze=Y,qe=Y;function Dt(bt){return bt.x0=bt.y0=0,bt.x1=ge,bt.y1=Oe,bt.eachBefore(Ft),we=[0],pe&&bt.eachBefore(se),bt}function Ft(bt){var Pt=we[bt.depth],cr=bt.x0+Pt,Sr=bt.y0+Pt,Kr=bt.x1-Pt,It=bt.y1-Pt;Kr<cr&&(cr=Kr=(cr+Kr)/2),It<Sr&&(Sr=It=(Sr+It)/2),bt.x0=cr,bt.y0=Sr,bt.x1=Kr,bt.y1=It,bt.children&&(Pt=we[bt.depth+1]=He(bt)/2,cr+=qe(bt)-Pt,Sr+=Xe(bt)-Pt,(Kr-=ut(bt)-Pt)<cr&&(cr=Kr=(cr+Kr)/2),(It-=Ze(bt)-Pt)<Sr&&(Sr=It=(Sr+It)/2),Se(bt,cr,Sr,Kr,It))}return Dt.round=function(bt){return arguments.length?(pe=!!bt,Dt):pe},Dt.size=function(bt){return arguments.length?(ge=+bt[0],Oe=+bt[1],Dt):[ge,Oe]},Dt.tile=function(bt){return arguments.length?(Se=V(bt),Dt):Se},Dt.padding=function(bt){return arguments.length?Dt.paddingInner(bt).paddingOuter(bt):Dt.paddingInner()},Dt.paddingInner=function(bt){return arguments.length?(He="function"==typeof bt?bt:ae(+bt),Dt):He},Dt.paddingOuter=function(bt){return arguments.length?Dt.paddingTop(bt).paddingRight(bt).paddingBottom(bt).paddingLeft(bt):Dt.paddingTop()},Dt.paddingTop=function(bt){return arguments.length?(Xe="function"==typeof bt?bt:ae(+bt),Dt):Xe},Dt.paddingRight=function(bt){return arguments.length?(ut="function"==typeof bt?bt:ae(+bt),Dt):ut},Dt.paddingBottom=function(bt){return arguments.length?(Ze="function"==typeof bt?bt:ae(+bt),Dt):Ze},Dt.paddingLeft=function(bt){return arguments.length?(qe="function"==typeof bt?bt:ae(+bt),Dt):qe},Dt}function Xt(Se,pe,ge,Oe,we){var Xe,Ze,He=Se.children,ut=He.length,qe=new Array(ut+1);for(qe[0]=Ze=Xe=0;Xe<ut;++Xe)qe[Xe+1]=Ze+=He[Xe].value;!function Dt(Ft,bt,Pt,cr,Sr,Kr,It){if(Ft>=bt-1){var $t=He[Ft];return $t.x0=cr,$t.y0=Sr,$t.x1=Kr,void($t.y1=It)}for(var kr=qe[Ft],lr=Pt/2+kr,rt=Ft+1,$e=bt-1;rt<$e;){var ht=rt+$e>>>1;qe[ht]<lr?rt=ht+1:$e=ht}lr-qe[rt-1]<qe[rt]-lr&&Ft+1<rt&&--rt;var gt=qe[rt]-kr,ft=Pt-gt;if(Kr-cr>It-Sr){var Ct=(cr*ft+Kr*gt)/Pt;Dt(Ft,rt,gt,cr,Sr,Ct,It),Dt(rt,bt,ft,Ct,Sr,Kr,It)}else{var sr=(Sr*ft+It*gt)/Pt;Dt(Ft,rt,gt,cr,Sr,Kr,sr),Dt(rt,bt,ft,cr,sr,Kr,It)}}(0,ut,Se.value,pe,ge,Oe,we)}function Mt(Se,pe,ge,Oe,we){(1&Se.depth?mt:de)(Se,pe,ge,Oe,we)}const st=function Se(pe){function ge(Oe,we,He,Xe,ut){if((Ze=Oe._squarify)&&Ze.ratio===pe)for(var Ze,qe,Dt,Ft,Pt,bt=-1,cr=Ze.length,Sr=Oe.value;++bt<cr;){for(Dt=(qe=Ze[bt]).children,Ft=qe.value=0,Pt=Dt.length;Ft<Pt;++Ft)qe.value+=Dt[Ft].value;qe.dice?de(qe,we,He,Xe,He+=(ut-He)*qe.value/Sr):mt(qe,we,He,we+=(Xe-we)*qe.value/Sr,ut),Sr-=qe.value}else Oe._squarify=Ze=Rt(pe,Oe,we,He,Xe,ut),Ze.ratio=pe}return ge.ratio=function(Oe){return Se((Oe=+Oe)>1?Oe:1)},ge}(Bt)},85400:($,K,e)=>{"use strict";e.d(K,{i$:()=>Oe,Dq:()=>o,g0:()=>He});var M=e(80302),I=e(35996),t=e(38546),T=e(21504),n=e(1006),i=e(42016);function u(Ze){if(0<=Ze.y&&Ze.y<100){var qe=new Date(-1,Ze.m,Ze.d,Ze.H,Ze.M,Ze.S,Ze.L);return qe.setFullYear(Ze.y),qe}return new Date(Ze.y,Ze.m,Ze.d,Ze.H,Ze.M,Ze.S,Ze.L)}function a(Ze){if(0<=Ze.y&&Ze.y<100){var qe=new Date(Date.UTC(-1,Ze.m,Ze.d,Ze.H,Ze.M,Ze.S,Ze.L));return qe.setUTCFullYear(Ze.y),qe}return new Date(Date.UTC(Ze.y,Ze.m,Ze.d,Ze.H,Ze.M,Ze.S,Ze.L))}function r(Ze,qe,Dt){return{y:Ze,m:qe,d:Dt,H:0,M:0,S:0,L:0}}function o(Ze){var qe=Ze.dateTime,Dt=Ze.date,Ft=Ze.time,bt=Ze.periods,Pt=Ze.days,cr=Ze.shortDays,Sr=Ze.months,Kr=Ze.shortMonths,It=x(bt),$t=h(bt),kr=x(Pt),lr=h(Pt),rt=x(cr),$e=h(cr),ht=x(Sr),gt=h(Sr),ft=x(Kr),Ct=h(Kr),sr={a:function wt(Yr){return cr[Yr.getDay()]},A:function xr(Yr){return Pt[Yr.getDay()]},b:function Ir(Yr){return Kr[Yr.getMonth()]},B:function Ur(Yr){return Sr[Yr.getMonth()]},c:null,d:ee,e:ee,f:oe,g:de,G:De,H:W,I:B,j:te,L:q,m:ie,M:V,p:function qt(Yr){return bt[+(Yr.getHours()>=12)]},q:function on(Yr){return 1+~~(Yr.getMonth()/3)},Q:Se,s:pe,S:Y,u:ae,U:X,V:ue,w:re,W:ne,x:null,X:null,y:se,Y:be,Z:_e,"%":st},tr={a:function an(Yr){return cr[Yr.getUTCDay()]},A:function hn(Yr){return Pt[Yr.getUTCDay()]},b:function An(Yr){return Kr[Yr.getUTCMonth()]},B:function Sn(Yr){return Sr[Yr.getUTCMonth()]},c:null,d:Ce,e:Ce,f:Pe,g:zt,G:Xt,H:Le,I:Fe,j:ke,L:ze,m:Ie,M:Qe,p:function sa(Yr){return bt[+(Yr.getUTCHours()>=12)]},q:function Rn(Yr){return 1+~~(Yr.getUTCMonth()/3)},Q:Se,s:pe,S:at,u:Be,U:Ne,V:ct,w:mt,W:Bt,x:null,X:null,y:Rt,Y:St,Z:Mt,"%":st},Cr={a:function We(Yr,vr,nn){var Or=rt.exec(vr.slice(nn));return Or?(Yr.w=$e[Or[0].toLowerCase()],nn+Or[0].length):-1},A:function Jt(Yr,vr,nn){var Or=kr.exec(vr.slice(nn));return Or?(Yr.w=lr[Or[0].toLowerCase()],nn+Or[0].length):-1},b:function Gt(Yr,vr,nn){var Or=ft.exec(vr.slice(nn));return Or?(Yr.m=Ct[Or[0].toLowerCase()],nn+Or[0].length):-1},B:function hr(Yr,vr,nn){var Or=ht.exec(vr.slice(nn));return Or?(Yr.m=gt[Or[0].toLowerCase()],nn+Or[0].length):-1},c:function br(Yr,vr,nn){return Wr(Yr,qe,vr,nn)},d:R,e:R,f:O,g:S,G:c,H:_,I:_,j:F,L:k,m:P,M:z,p:function Ke(Yr,vr,nn){var Or=It.exec(vr.slice(nn));return Or?(Yr.p=$t[Or[0].toLowerCase()],nn+Or[0].length):-1},q:E,Q:H,s:j,S:D,u:m,U:d,V:A,w:g,W:b,x:function Ut(Yr,vr,nn){return Wr(Yr,Dt,vr,nn)},X:function Kt(Yr,vr,nn){return Wr(Yr,Ft,vr,nn)},y:S,Y:c,Z:w,"%":U};function Hr(Yr,vr){return function(nn){var Ca,Ba,Ka,Or=[],Xn=-1,Vr=0,wn=Yr.length;for(nn instanceof Date||(nn=new Date(+nn));++Xn<wn;)37===Yr.charCodeAt(Xn)&&(Or.push(Yr.slice(Vr,Xn)),null!=(Ba=v[Ca=Yr.charAt(++Xn)])?Ca=Yr.charAt(++Xn):Ba="e"===Ca?" ":"0",(Ka=vr[Ca])&&(Ca=Ka(nn,Ba)),Or.push(Ca),Vr=Xn+1);return Or.push(Yr.slice(Vr,Xn)),Or.join("")}}function zr(Yr,vr){return function(nn){var Vr,wn,Or=r(1900,void 0,1);if(Wr(Or,Yr,nn+="",0)!=nn.length)return null;if("Q"in Or)return new Date(Or.Q);if("s"in Or)return new Date(1e3*Or.s+("L"in Or?Or.L:0));if(vr&&!("Z"in Or)&&(Or.Z=0),"p"in Or&&(Or.H=Or.H%12+12*Or.p),void 0===Or.m&&(Or.m="q"in Or?Or.q:0),"V"in Or){if(Or.V<1||Or.V>53)return null;"w"in Or||(Or.w=1),"Z"in Or?(wn=(Vr=a(r(Or.y,0,1))).getUTCDay(),Vr=wn>4||0===wn?M.l6.ceil(Vr):(0,M.l6)(Vr),Vr=I.Z.offset(Vr,7*(Or.V-1)),Or.y=Vr.getUTCFullYear(),Or.m=Vr.getUTCMonth(),Or.d=Vr.getUTCDate()+(Or.w+6)%7):(wn=(Vr=u(r(Or.y,0,1))).getDay(),Vr=wn>4||0===wn?t.wA.ceil(Vr):(0,t.wA)(Vr),Vr=T.Z.offset(Vr,7*(Or.V-1)),Or.y=Vr.getFullYear(),Or.m=Vr.getMonth(),Or.d=Vr.getDate()+(Or.w+6)%7)}else("W"in Or||"U"in Or)&&("w"in Or||(Or.w="u"in Or?Or.u%7:"W"in Or?1:0),wn="Z"in Or?a(r(Or.y,0,1)).getUTCDay():u(r(Or.y,0,1)).getDay(),Or.m=0,Or.d="W"in Or?(Or.w+6)%7+7*Or.W-(wn+5)%7:Or.w+7*Or.U-(wn+6)%7);return"Z"in Or?(Or.H+=Or.Z/100|0,Or.M+=Or.Z%100,a(Or)):u(Or)}}function Wr(Yr,vr,nn,Or){for(var Ca,Ba,Xn=0,Vr=vr.length,wn=nn.length;Xn<Vr;){if(Or>=wn)return-1;if(37===(Ca=vr.charCodeAt(Xn++))){if(Ca=vr.charAt(Xn++),!(Ba=Cr[Ca in v?vr.charAt(Xn++):Ca])||(Or=Ba(Yr,nn,Or))<0)return-1}else if(Ca!=nn.charCodeAt(Or++))return-1}return Or}return sr.x=Hr(Dt,sr),sr.X=Hr(Ft,sr),sr.c=Hr(qe,sr),tr.x=Hr(Dt,tr),tr.X=Hr(Ft,tr),tr.c=Hr(qe,tr),{format:function(Yr){var vr=Hr(Yr+="",sr);return vr.toString=function(){return Yr},vr},parse:function(Yr){var vr=zr(Yr+="",!1);return vr.toString=function(){return Yr},vr},utcFormat:function(Yr){var vr=Hr(Yr+="",tr);return vr.toString=function(){return Yr},vr},utcParse:function(Yr){var vr=zr(Yr+="",!0);return vr.toString=function(){return Yr},vr}}}var ge,Oe,He,v={"-":"",_:" ",0:"0"},p=/^\s*\d+/,f=/^%/,l=/[\\^$*+?|[\]().{}]/g;function y(Ze,qe,Dt){var Ft=Ze<0?"-":"",bt=(Ft?-Ze:Ze)+"",Pt=bt.length;return Ft+(Pt<Dt?new Array(Dt-Pt+1).join(qe)+bt:bt)}function s(Ze){return Ze.replace(l,"\\$&")}function x(Ze){return new RegExp("^(?:"+Ze.map(s).join("|")+")","i")}function h(Ze){for(var qe={},Dt=-1,Ft=Ze.length;++Dt<Ft;)qe[Ze[Dt].toLowerCase()]=Dt;return qe}function g(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+1));return Ft?(Ze.w=+Ft[0],Dt+Ft[0].length):-1}function m(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+1));return Ft?(Ze.u=+Ft[0],Dt+Ft[0].length):-1}function d(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.U=+Ft[0],Dt+Ft[0].length):-1}function A(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.V=+Ft[0],Dt+Ft[0].length):-1}function b(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.W=+Ft[0],Dt+Ft[0].length):-1}function c(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+4));return Ft?(Ze.y=+Ft[0],Dt+Ft[0].length):-1}function S(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.y=+Ft[0]+(+Ft[0]>68?1900:2e3),Dt+Ft[0].length):-1}function w(Ze,qe,Dt){var Ft=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(qe.slice(Dt,Dt+6));return Ft?(Ze.Z=Ft[1]?0:-(Ft[2]+(Ft[3]||"00")),Dt+Ft[0].length):-1}function E(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+1));return Ft?(Ze.q=3*Ft[0]-3,Dt+Ft[0].length):-1}function P(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.m=Ft[0]-1,Dt+Ft[0].length):-1}function R(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.d=+Ft[0],Dt+Ft[0].length):-1}function F(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+3));return Ft?(Ze.m=0,Ze.d=+Ft[0],Dt+Ft[0].length):-1}function _(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.H=+Ft[0],Dt+Ft[0].length):-1}function z(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.M=+Ft[0],Dt+Ft[0].length):-1}function D(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+2));return Ft?(Ze.S=+Ft[0],Dt+Ft[0].length):-1}function k(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+3));return Ft?(Ze.L=+Ft[0],Dt+Ft[0].length):-1}function O(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt,Dt+6));return Ft?(Ze.L=Math.floor(Ft[0]/1e3),Dt+Ft[0].length):-1}function U(Ze,qe,Dt){var Ft=f.exec(qe.slice(Dt,Dt+1));return Ft?Dt+Ft[0].length:-1}function H(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt));return Ft?(Ze.Q=+Ft[0],Dt+Ft[0].length):-1}function j(Ze,qe,Dt){var Ft=p.exec(qe.slice(Dt));return Ft?(Ze.s=+Ft[0],Dt+Ft[0].length):-1}function ee(Ze,qe){return y(Ze.getDate(),qe,2)}function W(Ze,qe){return y(Ze.getHours(),qe,2)}function B(Ze,qe){return y(Ze.getHours()%12||12,qe,2)}function te(Ze,qe){return y(1+T.Z.count((0,n.Z)(Ze),Ze),qe,3)}function q(Ze,qe){return y(Ze.getMilliseconds(),qe,3)}function oe(Ze,qe){return q(Ze,qe)+"000"}function ie(Ze,qe){return y(Ze.getMonth()+1,qe,2)}function V(Ze,qe){return y(Ze.getMinutes(),qe,2)}function Y(Ze,qe){return y(Ze.getSeconds(),qe,2)}function ae(Ze){var qe=Ze.getDay();return 0===qe?7:qe}function X(Ze,qe){return y(t.OM.count((0,n.Z)(Ze)-1,Ze),qe,2)}function J(Ze){var qe=Ze.getDay();return qe>=4||0===qe?(0,t.bL)(Ze):t.bL.ceil(Ze)}function ue(Ze,qe){return Ze=J(Ze),y(t.bL.count((0,n.Z)(Ze),Ze)+(4===(0,n.Z)(Ze).getDay()),qe,2)}function re(Ze){return Ze.getDay()}function ne(Ze,qe){return y(t.wA.count((0,n.Z)(Ze)-1,Ze),qe,2)}function se(Ze,qe){return y(Ze.getFullYear()%100,qe,2)}function de(Ze,qe){return y((Ze=J(Ze)).getFullYear()%100,qe,2)}function be(Ze,qe){return y(Ze.getFullYear()%1e4,qe,4)}function De(Ze,qe){var Dt=Ze.getDay();return y((Ze=Dt>=4||0===Dt?(0,t.bL)(Ze):t.bL.ceil(Ze)).getFullYear()%1e4,qe,4)}function _e(Ze){var qe=Ze.getTimezoneOffset();return(qe>0?"-":(qe*=-1,"+"))+y(qe/60|0,"0",2)+y(qe%60,"0",2)}function Ce(Ze,qe){return y(Ze.getUTCDate(),qe,2)}function Le(Ze,qe){return y(Ze.getUTCHours(),qe,2)}function Fe(Ze,qe){return y(Ze.getUTCHours()%12||12,qe,2)}function ke(Ze,qe){return y(1+I.Z.count((0,i.Z)(Ze),Ze),qe,3)}function ze(Ze,qe){return y(Ze.getUTCMilliseconds(),qe,3)}function Pe(Ze,qe){return ze(Ze,qe)+"000"}function Ie(Ze,qe){return y(Ze.getUTCMonth()+1,qe,2)}function Qe(Ze,qe){return y(Ze.getUTCMinutes(),qe,2)}function at(Ze,qe){return y(Ze.getUTCSeconds(),qe,2)}function Be(Ze){var qe=Ze.getUTCDay();return 0===qe?7:qe}function Ne(Ze,qe){return y(M.Ox.count((0,i.Z)(Ze)-1,Ze),qe,2)}function nt(Ze){var qe=Ze.getUTCDay();return qe>=4||0===qe?(0,M.hB)(Ze):M.hB.ceil(Ze)}function ct(Ze,qe){return Ze=nt(Ze),y(M.hB.count((0,i.Z)(Ze),Ze)+(4===(0,i.Z)(Ze).getUTCDay()),qe,2)}function mt(Ze){return Ze.getUTCDay()}function Bt(Ze,qe){return y(M.l6.count((0,i.Z)(Ze)-1,Ze),qe,2)}function Rt(Ze,qe){return y(Ze.getUTCFullYear()%100,qe,2)}function zt(Ze,qe){return y((Ze=nt(Ze)).getUTCFullYear()%100,qe,2)}function St(Ze,qe){return y(Ze.getUTCFullYear()%1e4,qe,4)}function Xt(Ze,qe){var Dt=Ze.getUTCDay();return y((Ze=Dt>=4||0===Dt?(0,M.hB)(Ze):M.hB.ceil(Ze)).getUTCFullYear()%1e4,qe,4)}function Mt(){return"+0000"}function st(){return"%"}function Se(Ze){return+Ze}function pe(Ze){return Math.floor(+Ze/1e3)}!function ut(Ze){return ge=o(Ze),Oe=ge.format,ge.parse,He=ge.utcFormat,ge.utcParse,ge}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},21504:($,K,e)=>{"use strict";e.d(K,{Z:()=>T,a:()=>n});var M=e(74113),I=e(22051),t=(0,M.Z)(function(i){i.setHours(0,0,0,0)},function(i,u){i.setDate(i.getDate()+u)},function(i,u){return(u-i-(u.getTimezoneOffset()-i.getTimezoneOffset())*I.yB)/I.UD},function(i){return i.getDate()-1});const T=t;var n=t.range},22051:($,K,e)=>{"use strict";e.d(K,{UD:()=>T,Y2:()=>t,Ym:()=>M,iM:()=>n,yB:()=>I});var M=1e3,I=6e4,t=36e5,T=864e5,n=6048e5},82716:($,K,e)=>{"use strict";e.r(K),e.d(K,{timeDay:()=>y.Z,timeDays:()=>y.a,timeFriday:()=>s.mC,timeFridays:()=>s.b$,timeHour:()=>f,timeHours:()=>l,timeInterval:()=>M.Z,timeMillisecond:()=>t,timeMilliseconds:()=>T,timeMinute:()=>o,timeMinutes:()=>v,timeMonday:()=>s.wA,timeMondays:()=>s.bJ,timeMonth:()=>h,timeMonths:()=>g,timeSaturday:()=>s.EY,timeSaturdays:()=>s.Ff,timeSecond:()=>u,timeSeconds:()=>a,timeSunday:()=>s.OM,timeSundays:()=>s.vm,timeThursday:()=>s.bL,timeThursdays:()=>s.$t,timeTuesday:()=>s.sy,timeTuesdays:()=>s.aU,timeWednesday:()=>s.zg,timeWednesdays:()=>s.Ld,timeWeek:()=>s.OM,timeWeeks:()=>s.vm,timeYear:()=>m.Z,timeYears:()=>m.g,utcDay:()=>E.Z,utcDays:()=>E.y,utcFriday:()=>P.QQ,utcFridays:()=>P.fz,utcHour:()=>S,utcHours:()=>w,utcMillisecond:()=>t,utcMilliseconds:()=>T,utcMinute:()=>A,utcMinutes:()=>b,utcMonday:()=>P.l6,utcMondays:()=>P.$3,utcMonth:()=>F,utcMonths:()=>_,utcSaturday:()=>P.g4,utcSaturdays:()=>P.Q_,utcSecond:()=>u,utcSeconds:()=>a,utcSunday:()=>P.Ox,utcSundays:()=>P.SU,utcThursday:()=>P.hB,utcThursdays:()=>P.xj,utcTuesday:()=>P.J1,utcTuesdays:()=>P.DK,utcWednesday:()=>P.b3,utcWednesdays:()=>P.uy,utcWeek:()=>P.Ox,utcWeeks:()=>P.SU,utcYear:()=>z.Z,utcYears:()=>z.D});var M=e(74113),I=(0,M.Z)(function(){},function(D,k){D.setTime(+D+k)},function(D,k){return k-D});I.every=function(D){return D=Math.floor(D),isFinite(D)&&D>0?D>1?(0,M.Z)(function(k){k.setTime(Math.floor(k/D)*D)},function(k,O){k.setTime(+k+O*D)},function(k,O){return(O-k)/D}):I:null};const t=I;var T=I.range,n=e(22051),i=(0,M.Z)(function(D){D.setTime(D-D.getMilliseconds())},function(D,k){D.setTime(+D+k*n.Ym)},function(D,k){return(k-D)/n.Ym},function(D){return D.getUTCSeconds()});const u=i;var a=i.range,r=(0,M.Z)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*n.Ym)},function(D,k){D.setTime(+D+k*n.yB)},function(D,k){return(k-D)/n.yB},function(D){return D.getMinutes()});const o=r;var v=r.range,p=(0,M.Z)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*n.Ym-D.getMinutes()*n.yB)},function(D,k){D.setTime(+D+k*n.Y2)},function(D,k){return(k-D)/n.Y2},function(D){return D.getHours()});const f=p;var l=p.range,y=e(21504),s=e(38546),x=(0,M.Z)(function(D){D.setDate(1),D.setHours(0,0,0,0)},function(D,k){D.setMonth(D.getMonth()+k)},function(D,k){return k.getMonth()-D.getMonth()+12*(k.getFullYear()-D.getFullYear())},function(D){return D.getMonth()});const h=x;var g=x.range,m=e(1006),d=(0,M.Z)(function(D){D.setUTCSeconds(0,0)},function(D,k){D.setTime(+D+k*n.yB)},function(D,k){return(k-D)/n.yB},function(D){return D.getUTCMinutes()});const A=d;var b=d.range,c=(0,M.Z)(function(D){D.setUTCMinutes(0,0,0)},function(D,k){D.setTime(+D+k*n.Y2)},function(D,k){return(k-D)/n.Y2},function(D){return D.getUTCHours()});const S=c;var w=c.range,E=e(35996),P=e(80302),R=(0,M.Z)(function(D){D.setUTCDate(1),D.setUTCHours(0,0,0,0)},function(D,k){D.setUTCMonth(D.getUTCMonth()+k)},function(D,k){return k.getUTCMonth()-D.getUTCMonth()+12*(k.getUTCFullYear()-D.getUTCFullYear())},function(D){return D.getUTCMonth()});const F=R;var _=R.range,z=e(42016)},74113:($,K,e)=>{"use strict";e.d(K,{Z:()=>t});var M=new Date,I=new Date;function t(T,n,i,u){function a(r){return T(r=0===arguments.length?new Date:new Date(+r)),r}return a.floor=function(r){return T(r=new Date(+r)),r},a.ceil=function(r){return T(r=new Date(r-1)),n(r,1),T(r),r},a.round=function(r){var o=a(r),v=a.ceil(r);return r-o<v-r?o:v},a.offset=function(r,o){return n(r=new Date(+r),null==o?1:Math.floor(o)),r},a.range=function(r,o,v){var f,p=[];if(r=a.ceil(r),v=null==v?1:Math.floor(v),!(r<o&&v>0))return p;do{p.push(f=new Date(+r)),n(r,v),T(r)}while(f<r&&r<o);return p},a.filter=function(r){return t(function(o){if(o>=o)for(;T(o),!r(o);)o.setTime(o-1)},function(o,v){if(o>=o)if(v<0)for(;++v<=0;)for(;n(o,-1),!r(o););else for(;--v>=0;)for(;n(o,1),!r(o););})},i&&(a.count=function(r,o){return M.setTime(+r),I.setTime(+o),T(M),T(I),Math.floor(i(M,I))},a.every=function(r){return r=Math.floor(r),isFinite(r)&&r>0?r>1?a.filter(u?function(o){return u(o)%r==0}:function(o){return a.count(0,o)%r==0}):a:null}),a}},35996:($,K,e)=>{"use strict";e.d(K,{Z:()=>T,y:()=>n});var M=e(74113),I=e(22051),t=(0,M.Z)(function(i){i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCDate(i.getUTCDate()+u)},function(i,u){return(u-i)/I.UD},function(i){return i.getUTCDate()-1});const T=t;var n=t.range},80302:($,K,e)=>{"use strict";e.d(K,{$3:()=>p,DK:()=>f,J1:()=>i,Ox:()=>T,QQ:()=>r,Q_:()=>x,SU:()=>v,b3:()=>u,fz:()=>s,g4:()=>o,hB:()=>a,l6:()=>n,uy:()=>l,xj:()=>y});var M=e(74113),I=e(22051);function t(h){return(0,M.Z)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-h)%7),g.setUTCHours(0,0,0,0)},function(g,m){g.setUTCDate(g.getUTCDate()+7*m)},function(g,m){return(m-g)/I.iM})}var T=t(0),n=t(1),i=t(2),u=t(3),a=t(4),r=t(5),o=t(6),v=T.range,p=n.range,f=i.range,l=u.range,y=a.range,s=r.range,x=o.range},42016:($,K,e)=>{"use strict";e.d(K,{D:()=>T,Z:()=>t});var M=e(74113),I=(0,M.Z)(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,i){n.setUTCFullYear(n.getUTCFullYear()+i)},function(n,i){return i.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});I.every=function(n){return isFinite(n=Math.floor(n))&&n>0?(0,M.Z)(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/n)*n),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,u){i.setUTCFullYear(i.getUTCFullYear()+u*n)}):null};const t=I;var T=I.range},38546:($,K,e)=>{"use strict";e.d(K,{$t:()=>y,EY:()=>o,Ff:()=>x,Ld:()=>l,OM:()=>T,aU:()=>f,b$:()=>s,bJ:()=>p,bL:()=>a,mC:()=>r,sy:()=>i,vm:()=>v,wA:()=>n,zg:()=>u});var M=e(74113),I=e(22051);function t(h){return(0,M.Z)(function(g){g.setDate(g.getDate()-(g.getDay()+7-h)%7),g.setHours(0,0,0,0)},function(g,m){g.setDate(g.getDate()+7*m)},function(g,m){return(m-g-(m.getTimezoneOffset()-g.getTimezoneOffset())*I.yB)/I.iM})}var T=t(0),n=t(1),i=t(2),u=t(3),a=t(4),r=t(5),o=t(6),v=T.range,p=n.range,f=i.range,l=u.range,y=a.range,s=r.range,x=o.range},1006:($,K,e)=>{"use strict";e.d(K,{Z:()=>t,g:()=>T});var M=e(74113),I=(0,M.Z)(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,i){n.setFullYear(n.getFullYear()+i)},function(n,i){return i.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});I.every=function(n){return isFinite(n=Math.floor(n))&&n>0?(0,M.Z)(function(i){i.setFullYear(Math.floor(i.getFullYear()/n)*n),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,u){i.setFullYear(i.getFullYear()+u*n)}):null};const t=I;var T=I.range},70306:$=>{"use strict";$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},6991:($,K,e)=>{"use strict";var M=e(70306),I=e(47297),t=e(4669),T=e(96906).templatedArray,n=e(4967);function i(a){return["In order for absolute positioning of the arrow to work, *a"+a+"ref* must be exactly the same as *"+a+"ref*, otherwise *a"+a+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+a+"ref* can be set to *pixel*,","in which case the *a"+a+"* value is specified in pixels","relative to *"+a+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function u(a,r,o){return["Sets the",a,"component of the arrow tail about the arrow head.","If `a"+a+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",o,"to",r,"("+r,"to",o+").","If `a"+a+"ref` is not `pixel` and is exactly the same as `"+a+"ref`,","this is an absolute value on that axis,","like `"+a+"`, specified in the same coordinates as `"+a+"ref`."].join(" ")}$.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:I({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[u("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[u("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",t.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",n.axisRefDescription("x","left","right"),i("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",t.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",n.axisRefDescription("y","bottom","top"),i("y")].join(" ")},xref:{valType:"enumerated",values:["paper",t.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",n.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",t.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",n.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:I({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}})},87429:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(18570).draw;function T(i){var u=i._fullLayout;M.filterVisible(u.annotations).forEach(function(a){var r=I.getFromId(i,a.xref),o=I.getFromId(i,a.yref),v=I.getRefType(a.xref),p=I.getRefType(a.yref);a._extremes={},"range"===v&&n(a,r),"range"===p&&n(a,o)})}function n(i,u){var b,a=u._id,r=a.charAt(0),o=i[r],v=i["a"+r],p=i[r+"ref"],f=i["a"+r+"ref"],l=i["_"+r+"padplus"],y=i["_"+r+"padminus"],s={x:1,y:-1}[r]*i[r+"shift"],x=3*i.arrowsize*i.arrowwidth||0,h=x+s,g=x-s,m=3*i.startarrowsize*i.arrowwidth||0,d=m+s,A=m-s;if(f===p){var c=I.findExtremes(u,[u.r2c(o)],{ppadplus:h,ppadminus:g}),S=I.findExtremes(u,[u.r2c(v)],{ppadplus:Math.max(l,d),ppadminus:Math.max(y,A)});b={min:[c.min[0],S.min[0]],max:[c.max[0],S.max[0]]}}else d=v?d+v:d,A=v?A-v:A,b=I.findExtremes(u,[u.r2c(o)],{ppadplus:Math.max(l,h,d),ppadminus:Math.max(y,g,A)});i._extremes[a]=b}$.exports=function(u){var a=u._fullLayout;if(M.filterVisible(a.annotations).length&&u._fullData.length)return M.syncOrAsync([t,T],u)}},65799:($,K,e)=>{"use strict";var M=e(5228),I=e(97799),t=e(96906).arrayEditor;function i(a,r){var y,s,x,h,g,m,d,o=a._fullLayout.annotations,v=[],p=[],f=[],l=(r||[]).length;for(y=0;y<o.length;y++)if(h=(x=o[y]).clicktoshow){for(s=0;s<l;s++)if(m=(g=r[s]).xaxis,d=g.yaxis,m._id===x.xref&&d._id===x.yref&&m.d2r(g.x)===u(x._xclick,m)&&d.d2r(g.y)===u(x._yclick,d)){(x.visible?"onout"===h?p:f:v).push(y);break}s===l&&x.visible&&"onout"===h&&p.push(y)}return{on:v,off:p,explicitOff:f}}function u(a,r){return"log"===r.type?r.l2r(a):r.d2r(a)}$.exports={hasClickToShow:function T(a,r){var o=i(a,r);return o.on.length>0||o.explicitOff.length>0},onClick:function n(a,r){var y,s,o=i(a,r),v=o.on,p=o.off.concat(o.explicitOff),f={},l=a._fullLayout.annotations;if(v.length||p.length){for(y=0;y<v.length;y++)(s=t(a.layout,"annotations",l[v[y]])).modifyItem("visible",!0),M.extendFlat(f,s.getUpdateObj());for(y=0;y<p.length;y++)(s=t(a.layout,"annotations",l[p[y]])).modifyItem("visible",!1),M.extendFlat(f,s.getUpdateObj());return I.call("update",a,{},f)}}}},90635:($,K,e)=>{"use strict";var M=e(5228),I=e(8416);$.exports=function(T,n,i,u){u("opacity");var a=u("bgcolor"),r=u("bordercolor"),o=I.opacity(r);u("borderpad");var v=u("borderwidth"),p=u("showarrow");if(u("text",p?" ":i._dfltTitle.annotation),u("textangle"),M.coerceFont(u,"font",i.font),u("width"),u("align"),u("height")&&u("valign"),p){var y,s,l=u("arrowside");-1!==l.indexOf("end")&&(y=u("arrowhead"),s=u("arrowsize")),-1!==l.indexOf("start")&&(u("startarrowhead",y),u("startarrowsize",s)),u("arrowcolor",o?n.bordercolor:I.defaultLine),u("arrowwidth",2*(o&&v||1)),u("standoff"),u("startstandoff")}var x=u("hovertext"),h=i.hoverlabel||{};if(x){var g=u("hoverlabel.bgcolor",h.bgcolor||(I.opacity(a)?I.rgb(a):I.defaultLine)),m=u("hoverlabel.bordercolor",h.bordercolor||I.contrast(g));M.coerceFont(u,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||m})}u("captureevents",!!x)}},83077:($,K,e)=>{"use strict";var M=e(7347),I=e(11899);$.exports=function(T,n,i,u){n=n||{};var a="log"===i&&"linear"===n.type,r="linear"===i&&"log"===n.type;if(a||r)for(var p,f,o=T._fullLayout.annotations,v=n._id.charAt(0),y=0;y<o.length;y++)p=o[y],f="annotations["+y+"].",p[v+"ref"]===n._id&&l(v),p["a"+v+"ref"]===n._id&&l("a"+v);function l(s){var x=p[s],h=null;h=a?I(x,n.range):Math.pow(10,x),M(h)||(h=null),u(f+s,h)}}},34107:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(84322),T=e(90635),n=e(6991);function i(u,a,r){function o(w,E){return M.coerce(u,a,n,w,E)}var v=o("visible"),p=o("clicktoshow");if(v||p){T(u,a,r,o);for(var f=a.showarrow,l=["x","y"],y=[-10,-30],s={_fullLayout:r},x=0;x<2;x++){var h=l[x],g=I.coerceRef(u,a,s,h,"","paper");if("paper"!==g)I.getFromId(s,g)._annIndices.push(a._index);if(I.coercePosition(a,s,o,g,h,.5),f){var d="a"+h,A=I.coerceRef(u,a,s,d,"pixel",["pixel","paper"]);"pixel"!==A&&A!==g&&(A=a[d]="pixel");var b="pixel"===A?y[x]:.4;I.coercePosition(a,s,o,A,d,b)}o(h+"anchor"),o(h+"shift")}if(M.noneOrAll(u,a,["x","y"]),f&&M.noneOrAll(u,a,["ax","ay"]),p){var c=o("xclick"),S=o("yclick");a._xclick=void 0===c?a.x:I.cleanPosition(c,s,a.xref),a._yclick=void 0===S?a.y:I.cleanPosition(S,s,a.yref)}}}$.exports=function(a,r){t(a,r,{name:"annotations",handleItemDefaults:i})}},18570:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(31556),T=e(5228),n=T.strTranslate,i=e(91464),u=e(8416),a=e(27630),r=e(76863),o=e(88565),v=e(93720),p=e(25429),f=e(96906).arrayEditor,l=e(92640);function s(g,m){var A=g._fullLayout.annotations[m]||{},b=i.getFromId(g,A.xref),c=i.getFromId(g,A.yref);b&&b.setScale(),c&&c.setScale(),h(g,A,m,!1,b,c)}function x(g,m,d,A,b){var c=b[d],S=b[d+"ref"],w=-1!==d.indexOf("y"),E="domain"===i.getRefType(S),P=w?A.h:A.w;return g?E?c+(w?-m:m)/g._length:g.p2r(g.r2p(c)+m):c+(w?-m:m)/P}function h(g,m,d,A,b,c){var P,R,S=g._fullLayout,w=g._fullLayout._size,E=g._context.edits;A?(P="annotation-"+A,R=A+".annotations"):(P="annotation",R="annotations");var F=f(g.layout,R,m),_=F.modifyBase,z=F.modifyItem,D=F.getUpdateObj;S._infolayer.selectAll("."+P+'[data-index="'+d+'"]').remove();var k="clip"+S._uid+"_ann"+d;if(m._input&&!1!==m.visible){var O={x:{},y:{}},U=+m.textangle||0,H=S._infolayer.append("g").classed(P,!0).attr("data-index",String(d)).style("opacity",m.opacity),j=H.append("g").classed("annotation-text-g",!0),ee=E[m.showarrow?"annotationTail":"annotationPosition"],W=m.captureevents||E.annotationText||ee,te=j.append("g").style("pointer-events",W?"all":null).call(v,"pointer").on("click",function(){g._dragging=!1,g.emit("plotly_clickannotation",B(M.event))});m.hovertext&&te.on("mouseover",function(){var se=m.hoverlabel,de=se.font,be=this.getBoundingClientRect(),De=g.getBoundingClientRect();r.loneHover({x0:be.left-De.left,x1:be.right-De.left,y:(be.top+be.bottom)/2-De.top,text:m.hovertext,color:se.bgcolor,borderColor:se.bordercolor,fontFamily:de.family,fontSize:de.size,fontColor:de.color},{container:S._hoverlayer.node(),outerContainer:S._paper.node(),gd:g})}).on("mouseout",function(){r.loneUnhover(S._hoverlayer.node())});var q=m.borderwidth,oe=m.borderpad,ie=q+oe,V=te.append("rect").attr("class","bg").style("stroke-width",q+"px").call(u.stroke,m.bordercolor).call(u.fill,m.bgcolor),Y=m.width||m.height,ae=S._topclips.selectAll("#"+k).data(Y?[0]:[]);ae.enter().append("clipPath").classed("annclip",!0).attr("id",k).append("rect"),ae.exit().remove();var X=m.font,J=S._meta?T.templateString(m.text,S._meta):m.text,ue=te.append("text").classed("annotation-text",!0).text(J);E.annotationText?ue.call(o.makeEditable,{delegate:te,gd:g}).call(re).on("edit",function(se){m.text=se,this.call(re),z("text",se),b&&b.autorange&&_(b._name+".autorange",!0),c&&c.autorange&&_(c._name+".autorange",!0),I.call("_guiRelayout",g,D())}):ue.call(re)}else M.selectAll("#"+k).remove();function B(se){var de={index:d,annotation:m._input,fullAnnotation:m,event:se};return A&&(de.subplotId=A),de}function re(se){return se.call(a.font,X).attr({"text-anchor":{left:"start",right:"end"}[m.align]||"middle"}),o.convertToTspans(se,g,ne),se}function ne(){var se=ue.selectAll("a");1===se.size()&&se.text()===ue.text()&&te.insert("a",":first-child").attr({"xlink:xlink:href":se.attr("xlink:href"),"xlink:xlink:show":se.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(V.node());var be=te.select(".annotation-text-math-group"),De=!be.empty(),_e=a.bBox((De?be:ue).node()),Ce=_e.width,Le=_e.height,Fe=m.width||Ce,ke=m.height||Le,ze=Math.round(Fe+2*ie),Pe=Math.round(ke+2*ie);function Ie(kr,lr){return"auto"===lr&&(lr=kr<1/3?"left":kr>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[lr]}for(var Qe=!1,at=["x","y"],Be=0;Be<at.length;Be++){var Se,pe,ge,Oe,we,Ne=at[Be],nt=m[Ne+"ref"]||Ne,ct=m["a"+Ne+"ref"],mt={x:b,y:c}[Ne],Bt=(U+("x"===Ne?0:-90))*Math.PI/180,Rt=ze*Math.cos(Bt),zt=Pe*Math.sin(Bt),St=Math.abs(Rt)+Math.abs(zt),Xt=m[Ne+"anchor"],Mt=m[Ne+"shift"]*("x"===Ne?1:-1),st=O[Ne],He=i.getRefType(nt);if(mt&&"domain"!==He){var Xe=mt.r2fraction(m[Ne]);(Xe<0||Xe>1)&&(ct===nt?((Xe=mt.r2fraction(m["a"+Ne]))<0||Xe>1)&&(Qe=!0):Qe=!0),Se=mt._offset+mt.r2p(m[Ne]),Oe=.5}else{var ut="domain"===He;"x"===Ne?(ge=m[Ne],Se=ut?mt._offset+mt._length*ge:Se=w.l+w.w*ge):(ge=1-m[Ne],Se=ut?mt._offset+mt._length*ge:Se=w.t+w.h*ge),Oe=m.showarrow?.5:ge}if(m.showarrow){st.head=Se;var Ze=m["a"+Ne];if(we=Rt*Ie(.5,m.xanchor)-zt*Ie(.5,m.yanchor),ct===nt){var qe=i.getRefType(ct);"domain"===qe?("y"===Ne&&(Ze=1-Ze),st.tail=mt._offset+mt._length*Ze):"paper"===qe?"y"===Ne?(Ze=1-Ze,st.tail=w.t+w.h*Ze):st.tail=w.l+w.w*Ze:st.tail=mt._offset+mt.r2p(Ze),pe=we}else st.tail=Se+Ze,pe=we+Ze;st.text=st.tail+we;var Dt=S["x"===Ne?"width":"height"];if("paper"===nt&&(st.head=T.constrain(st.head,1,Dt-1)),"pixel"===ct){var Ft=-Math.max(st.tail-3,st.text),bt=Math.min(st.tail+3,st.text)-Dt;Ft>0?(st.tail+=Ft,st.text+=Ft):bt>0&&(st.tail-=bt,st.text-=bt)}st.tail+=Mt,st.head+=Mt}else pe=we=St*Ie(Oe,Xt),st.text=Se+we;st.text+=Mt,we+=Mt,pe+=Mt,m["_"+Ne+"padplus"]=St/2+pe,m["_"+Ne+"padminus"]=St/2-pe,m["_"+Ne+"size"]=St,m["_"+Ne+"shift"]=we}if(Qe)te.remove();else{var Pt=0,cr=0;if("left"!==m.align&&(Pt=(Fe-Ce)*("center"===m.align?.5:1)),"top"!==m.valign&&(cr=(ke-Le)*("middle"===m.valign?.5:1)),De)be.select("svg").attr({x:ie+Pt-1,y:ie+cr}).call(a.setClipUrl,Y?k:null,g);else{var Sr=ie+cr-_e.top,Kr=ie+Pt-_e.left;ue.call(o.positionText,Kr,Sr).call(a.setClipUrl,Y?k:null,g)}ae.select("rect").call(a.setRect,ie,ie,Fe,ke),V.call(a.setRect,q/2,q/2,ze-q,Pe-q),te.call(a.setTranslate,Math.round(O.x.text-ze/2),Math.round(O.y.text-Pe/2)),j.attr({transform:"rotate("+U+","+O.x.text+","+O.y.text+")"});var $t,It=function(kr,lr){H.selectAll(".annotation-arrow-g").remove();var rt=O.x.head,$e=O.y.head,ht=O.x.tail+kr,gt=O.y.tail+lr,ft=O.x.text+kr,Ct=O.y.text+lr,sr=T.rotationXYMatrix(U,ft,Ct),tr=T.apply2DTransform(sr),Cr=T.apply2DTransform2(sr),Hr=+V.attr("width"),zr=+V.attr("height"),Wr=ft-.5*Hr,Ke=Wr+Hr,We=Ct-.5*zr,Jt=We+zr,Gt=[[Wr,We,Wr,Jt],[Wr,Jt,Ke,Jt],[Ke,Jt,Ke,We],[Ke,We,Wr,We]].map(Cr);if(!Gt.reduce(function(hn,An){return hn^!!T.segmentsIntersect(rt,$e,rt+1e6,$e+1e6,An[0],An[1],An[2],An[3])},!1)){Gt.forEach(function(hn){var An=T.segmentsIntersect(ht,gt,rt,$e,hn[0],hn[1],hn[2],hn[3]);An&&(ht=An.x,gt=An.y)});var hr=m.arrowwidth,br=m.arrowcolor,Ut=m.arrowside,Kt=H.append("g").style({opacity:u.opacity(br)}).classed("annotation-arrow-g",!0),wt=Kt.append("path").attr("d","M"+ht+","+gt+"L"+rt+","+$e).style("stroke-width",hr+"px").call(u.stroke,u.rgb(br));if(l(wt,Ut,m),E.annotationPosition&&wt.node().parentNode&&!A){var xr=rt,Ir=$e;if(m.standoff){var Ur=Math.sqrt(Math.pow(rt-ht,2)+Math.pow($e-gt,2));xr+=m.standoff*(ht-rt)/Ur,Ir+=m.standoff*(gt-$e)/Ur}var on,an,qt=Kt.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(ht-xr)+","+(gt-Ir),transform:n(xr,Ir)}).style("stroke-width",hr+6+"px").call(u.stroke,"rgba(0,0,0,0)").call(u.fill,"rgba(0,0,0,0)");p.init({element:qt.node(),gd:g,prepFn:function(){var hn=a.getTranslate(te);on=hn.x,an=hn.y,b&&b.autorange&&_(b._name+".autorange",!0),c&&c.autorange&&_(c._name+".autorange",!0)},moveFn:function(hn,An){var Sn=tr(on,an),sa=Sn[0]+hn,Rn=Sn[1]+An;te.call(a.setTranslate,sa,Rn),z("x",x(b,hn,"x",w,m)),z("y",x(c,An,"y",w,m)),m.axref===m.xref&&z("ax",x(b,hn,"ax",w,m)),m.ayref===m.yref&&z("ay",x(c,An,"ay",w,m)),Kt.attr("transform",n(hn,An)),j.attr({transform:"rotate("+U+","+sa+","+Rn+")"})},doneFn:function(){I.call("_guiRelayout",g,D());var hn=document.querySelector(".js-notes-box-panel");hn&&hn.redraw(hn.selectedObj)}})}}};if(m.showarrow&&It(0,0),ee)p.init({element:te.node(),gd:g,prepFn:function(){$t=j.attr("transform")},moveFn:function(kr,lr){var rt="pointer";if(m.showarrow)m.axref===m.xref?z("ax",x(b,kr,"ax",w,m)):z("ax",m.ax+kr),m.ayref===m.yref?z("ay",x(c,lr,"ay",w.w,m)):z("ay",m.ay+lr),It(kr,lr);else{if(A)return;var $e,ht;if(b)$e=x(b,kr,"x",w,m);else{var gt=m._xsize/w.w,ft=m.x+(m._xshift-m.xshift)/w.w-gt/2;$e=p.align(ft+kr/w.w,gt,0,1,m.xanchor)}if(c)ht=x(c,lr,"y",w,m);else{var Ct=m._ysize/w.h,sr=m.y-(m._yshift+m.yshift)/w.h-Ct/2;ht=p.align(sr-lr/w.h,Ct,0,1,m.yanchor)}z("x",$e),z("y",ht),(!b||!c)&&(rt=p.getCursor(b?.5:$e,c?.5:ht,m.xanchor,m.yanchor))}j.attr({transform:n(kr,lr)+$t}),v(te,rt)},clickFn:function(kr,lr){m.captureevents&&g.emit("plotly_clickannotation",B(lr))},doneFn:function(){v(te),I.call("_guiRelayout",g,D());var kr=document.querySelector(".js-notes-box-panel");kr&&kr.redraw(kr.selectedObj)}})}}}$.exports={draw:function y(g){var m=g._fullLayout;m._infolayer.selectAll(".annotation").remove();for(var d=0;d<m.annotations.length;d++)m.annotations[d].visible&&s(g,d);return t.previousPromises(g)},drawOne:s,drawRaw:h}},92640:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(70306),T=e(5228),n=T.strScale,i=T.strRotate,u=T.strTranslate;$.exports=function(r,o,v){var d,A,b,c,p=r.node(),f=t[v.arrowhead||0],l=t[v.startarrowhead||0],y=(v.arrowwidth||1)*(v.arrowsize||1),s=(v.arrowwidth||1)*(v.startarrowsize||1),x=o.indexOf("start")>=0,h=o.indexOf("end")>=0,g=f.backoff*y+v.standoff,m=l.backoff*s+v.startstandoff;if("line"===p.nodeName){d={x:+r.attr("x1"),y:+r.attr("y1")},A={x:+r.attr("x2"),y:+r.attr("y2")};var S=d.x-A.x,w=d.y-A.y;if(c=(b=Math.atan2(w,S))+Math.PI,g&&m&&g+m>Math.sqrt(S*S+w*w))return void j();if(g){if(g*g>S*S+w*w)return void j();var E=g*Math.cos(b),P=g*Math.sin(b);A.x+=E,A.y+=P,r.attr({x2:A.x,y2:A.y})}if(m){if(m*m>S*S+w*w)return void j();var R=m*Math.cos(b),F=m*Math.sin(b);d.x-=R,d.y-=F,r.attr({x1:d.x,y1:d.y})}}else if("path"===p.nodeName){var _=p.getTotalLength(),z="";if(_<g+m)return void j();var D=p.getPointAtLength(0),k=p.getPointAtLength(.1);b=Math.atan2(D.y-k.y,D.x-k.x),d=p.getPointAtLength(Math.min(m,_)),z="0px,"+m+"px,";var O=p.getPointAtLength(_),U=p.getPointAtLength(_-.1);c=Math.atan2(O.y-U.y,O.x-U.x),A=p.getPointAtLength(Math.max(0,_-g)),z+=_-(z?m+g:g)+"px,"+_+"px",r.style("stroke-dasharray",z)}function j(){r.style("stroke-dasharray","0px,100px")}function ee(W,B,te,q){W.path&&(W.noRotate&&(te=0),M.select(p.parentNode).append("path").attr({class:r.attr("class"),d:W.path,transform:u(B.x,B.y)+i(180*te/Math.PI)+n(q)}).style({fill:I.rgb(v.arrowcolor),"stroke-width":0}))}x&&ee(l,d,b,s),h&&ee(f,A,c,y)}},84774:($,K,e)=>{"use strict";var M=e(18570),I=e(65799);$.exports={moduleType:"component",name:"annotations",layoutAttributes:e(6991),supplyLayoutDefaults:e(34107),includeBasePlot:e(84808)("annotations"),calcAutorange:e(87429),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:I.hasClickToShow,onClick:I.onClick,convertCoords:e(83077)}},15419:($,K,e)=>{"use strict";var M=e(6991),I=e(71859).overrideAll,t=e(96906).templatedArray;$.exports=I(t("annotation",{visible:M.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},64219:($,K,e)=>{"use strict";var M=e(5228),I=e(91464);function t(T,n){var u=n.fullSceneLayout.domain,a=n.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,r),I.setConvert(T._xa),T._xa._offset=a.l+u.x[0]*a.w,T._xa.l2p=function(){return.5*(1+T._pdata[0]/T._pdata[3])*a.w*(u.x[1]-u.x[0])},T._ya={},M.extendFlat(T._ya,r),I.setConvert(T._ya),T._ya._offset=a.t+(1-u.y[1])*a.h,T._ya.l2p=function(){return.5*(1-T._pdata[1]/T._pdata[3])*a.h*(u.y[1]-u.y[0])}}$.exports=function(n){for(var u=n.fullSceneLayout.annotations,a=0;a<u.length;a++)t(u[a],n);n.fullLayout._infolayer.selectAll(".annotation-"+n.id).remove()}},74928:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(84322),T=e(90635),n=e(15419);function i(u,a,r,o){function v(l,y){return M.coerce(u,a,n,l,y)}function p(l){var y=l+"axis",s={_fullLayout:{}};return s._fullLayout[y]=r[y],I.coercePosition(a,s,v,l,l,.5)}v("visible")&&(T(u,a,o.fullLayout,v),p("x"),p("y"),p("z"),M.noneOrAll(u,a,["x","y","z"]),a.xref="x",a.yref="y",a.zref="z",v("xanchor"),v("yanchor"),v("xshift"),v("yshift"),a.showarrow&&(a.axref="pixel",a.ayref="pixel",v("ax",-10),v("ay",-30),M.noneOrAll(u,a,["ax","ay"])))}$.exports=function(a,r,o){t(a,r,{name:"annotations",handleItemDefaults:i,fullLayout:o.fullLayout})}},44470:($,K,e)=>{"use strict";var M=e(18570).drawRaw,I=e(65220),t=["x","y","z"];$.exports=function(n){for(var i=n.fullSceneLayout,u=n.dataScale,a=i.annotations,r=0;r<a.length;r++){for(var o=a[r],v=!1,p=0;p<3;p++){var f=t[p],l=o[f],s=i[f+"axis"].r2fraction(l);if(s<0||s>1){v=!0;break}}v?n.fullLayout._infolayer.select(".annotation-"+n.id+'[data-index="'+r+'"]').remove():(o._pdata=I(n.glplot.cameraParams,[i.xaxis.r2l(o.x)*u[0],i.yaxis.r2l(o.y)*u[1],i.zaxis.r2l(o.z)*u[2]]),M(n.graphDiv,o,r,n.id,o._xa,o._ya))}}},5912:($,K,e)=>{"use strict";var M=e(97799),I=e(5228);$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(15419)}}},layoutAttributes:e(15419),handleDefaults:e(74928),includeBasePlot:function t(T,n){var i=M.subplotsRegistry.gl3d;if(i)for(var u=i.attrRegex,a=Object.keys(T),r=0;r<a.length;r++){var o=a[r];u.test(o)&&(T[o].annotations||[]).length&&(I.pushUnique(n._basePlotModules,i),I.pushUnique(n._subplots.gl3d,o))}},convert:e(64219),draw:e(44470)}},34223:($,K,e)=>{"use strict";$.exports=e(77304),e(43050),e(64414),e(24091),e(68332),e(37452),e(33212),e(81568),e(67436),e(52873),e(51361),e(98892),e(70310),e(4238),e(30435),e(9768)},75405:($,K,e)=>{"use strict";var M=e(34223),I=e(5228),t=e(71103),T=t.EPOCHJD,n=t.ONEDAY,i={valType:"enumerated",values:I.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},u=function(b,c,S,w){var E={};return E[S]=i,I.coerce(b,c,E,S,w)},p="##",f={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:p,w:p,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var y={};function s(b){var c=y[b];return c||(c=y[b]=M.instance(b))}function x(b){return I.extendFlat({},i,{description:b})}function h(b){return"Sets the calendar system to use with `"+b+"` date data."}var g={xcalendar:x(h("x"))},m=I.extendFlat({},g,{ycalendar:x(h("y"))}),d=I.extendFlat({},m,{zcalendar:x(h("z"))}),A=x(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:m,bar:m,box:m,heatmap:m,contour:m,histogram:m,histogram2d:m,histogram2dcontour:m,scatter3d:d,surface:d,mesh3d:d,scattergl:m,ohlc:g,candlestick:g},layout:{calendar:x(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:A},yaxis:{calendar:A},scene:{xaxis:{calendar:A},yaxis:{calendar:A},zaxis:{calendar:A}},polar:{radialaxis:{calendar:A}}},transforms:{filter:{valuecalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:i,handleDefaults:u,handleTraceDefaults:function(b,c,S,w){for(var E=0;E<S.length;E++)u(b,c,S[E]+"calendar",w.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:s,worldCalFmt:function l(b,c,S){for(var R,F,_,z,D,w=Math.floor((c+.05)/n)+T,E=s(S).fromJD(w),P=0;-1!==(P=b.indexOf("%",P));)"0"===(R=b.charAt(P+1))||"-"===R||"_"===R?(_=3,F=b.charAt(P+2),"_"===R&&(R="-")):(F=R,R="0",_=2),(z=f[F])?(D=z===p?p:E.formatDate(z[R]),b=b.substr(0,P)+D+b.substr(P+_),P+=D.length):P+=_;return b}}},36593:($,K)=>{"use strict";K.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],K.defaultLine="#444",K.lightLine="#eee",K.background="#fff",K.borderLine="#BEC8D9",K.lightFraction=1e3/11},8416:($,K,e)=>{"use strict";var M=e(80791),I=e(7347),t=e(90406).isTypedArray,T=$.exports={},n=e(36593);T.defaults=n.defaults;var i=T.defaultLine=n.defaultLine;T.lightLine=n.lightLine;var u=T.background=n.background;function a(r){if(I(r)||"string"!=typeof r)return r;var o=r.trim();if("rgb"!==o.substr(0,3))return r;var v=o.match(/^rgba?\s*\(([^()]*)\)$/);if(!v)return r;var p=v[1].trim().split(/\s*[\s,]\s*/),f="a"===o.charAt(3)&&4===p.length;if(!f&&3!==p.length)return r;for(var l=0;l<p.length;l++){if(!(p[l].length&&(p[l]=Number(p[l]),p[l]>=0)))return r;if(3===l)p[l]>1&&(p[l]=1);else if(p[l]>=1)return r}var y=Math.round(255*p[0])+", "+Math.round(255*p[1])+", "+Math.round(255*p[2]);return f?"rgba("+y+", "+p[3]+")":"rgb("+y+")"}T.tinyRGB=function(r){var o=r.toRgb();return"rgb("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+")"},T.rgb=function(r){return T.tinyRGB(M(r))},T.opacity=function(r){return r?M(r).getAlpha():0},T.addOpacity=function(r,o){var v=M(r).toRgb();return"rgba("+Math.round(v.r)+", "+Math.round(v.g)+", "+Math.round(v.b)+", "+o+")"},T.combine=function(r,o){var v=M(r).toRgb();if(1===v.a)return M(r).toRgbString();var p=M(o||u).toRgb(),f=1===p.a?p:{r:255*(1-p.a)+p.r*p.a,g:255*(1-p.a)+p.g*p.a,b:255*(1-p.a)+p.b*p.a},l={r:f.r*(1-v.a)+v.r*v.a,g:f.g*(1-v.a)+v.g*v.a,b:f.b*(1-v.a)+v.b*v.a};return M(l).toRgbString()},T.contrast=function(r,o,v){var p=M(r);return 1!==p.getAlpha()&&(p=M(T.combine(r,u))),(p.isDark()?o?p.lighten(o):u:v?p.darken(v):i).toString()},T.stroke=function(r,o){var v=M(o);r.style({stroke:T.tinyRGB(v),"stroke-opacity":v.getAlpha()})},T.fill=function(r,o){var v=M(o);r.style({fill:T.tinyRGB(v),"fill-opacity":v.getAlpha()})},T.clean=function(r){if(r&&"object"==typeof r){var v,p,f,l,o=Object.keys(r);for(v=0;v<o.length;v++)if(l=r[f=o[v]],"color"===f.substr(f.length-5))if(Array.isArray(l))for(p=0;p<l.length;p++)l[p]=a(l[p]);else r[f]=a(l);else if("colorscale"===f.substr(f.length-10)&&Array.isArray(l))for(p=0;p<l.length;p++)Array.isArray(l[p])&&(l[p][1]=a(l[p][1]));else if(Array.isArray(l)){var y=l[0];if(!Array.isArray(y)&&y&&"object"==typeof y)for(p=0;p<l.length;p++)T.clean(l[p])}else l&&"object"==typeof l&&!t(l)&&T.clean(l)}}},10623:($,K,e)=>{"use strict";var M=e(38330),I=e(47297),t=e(18836).extendFlat,T=e(71859).overrideAll;$.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",description:["Sets the x position with respect to `xref` of the color bar (in plot fraction).","When `xref` is *paper*, defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*.","When `xref` is *container*, defaults to *1* when `orientation` is *v* and","0.5 when `orientation` is *h*.","Must be between *0* and *1* if `xref` is *container*","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",description:["Sets the y position with respect to `yref` of the color bar (in plot fraction).","When `yref` is *paper*, defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*.","When `yref` is *container*, defaults to 0.5 when `orientation` is *v* and","1 when `orientation` is *h*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:t({},M.ticks,{dflt:""}),ticklabeloverflow:t({},M.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:I({description:"Sets the color bar's tick label font"}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:I({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:I({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root")},29485:$=>{"use strict";$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},97531:($,K,e)=>{"use strict";var M=e(5228),I=e(96906),t=e(61606),T=e(6705),n=e(85357),i=e(72323),u=e(10623);$.exports=function(r,o,v){var p=I.newContainer(o,"colorbar"),f=r.colorbar||{};function l(O,U){return M.coerce(f,p,u,O,U)}var y=v.margin||{t:0,b:0,l:0,r:0},s=v.width-y.l-y.r,x=v.height-y.t-y.b,g="v"===l("orientation"),m=l("thicknessmode");l("thickness","fraction"===m?30/(g?s:x):30);var d=l("lenmode");l("len","fraction"===d?1:g?x:s);var w,E,P,c="paper"===l("yref"),S="paper"===l("xref"),R="left";g?(P="middle",R=S?"left":"right",w=S?1.02:1,E=.5):(P=c?"bottom":"top",R="center",w=.5,E=c?1.02:1),M.coerce(f,p,{x:{valType:"number",min:S?-2:0,max:S?3:1,dflt:w}},"x"),M.coerce(f,p,{y:{valType:"number",min:c?-2:0,max:c?3:1,dflt:E}},"y"),l("xanchor",R),l("xpad"),l("yanchor",P),l("ypad"),M.noneOrAll(f,p,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var F=M.coerce(f,p,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:g?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",-1!==F.indexOf("inside")?"hide past domain":"hide past div"),t(f,p,l,"linear");var _=v.font,z={outerTicks:!1,font:_};-1!==F.indexOf("inside")&&(z.bgColor="black"),i(f,p,l,"linear",z),n(f,p,l,"linear",z),T(f,p,l,"linear",z),l("title.text",v._dfltTitle.colorbar);var D=p.showticklabels?p.tickfont:_,k=M.extendFlat({},D,{color:_.color,size:M.bigFont(D.size)});M.coerceFont(l,"title.font",k),l("title.side",g?"top":"right")}},1247:($,K,e)=>{"use strict";var M=e(21572),I=e(80791),t=e(31556),T=e(97799),n=e(91464),i=e(25429),u=e(5228),a=u.strTranslate,r=e(18836).extendFlat,o=e(93720),v=e(27630),p=e(8416),f=e(77875),l=e(88565),y=e(981).flipScale,s=e(67178),x=e(74697),h=e(38330),g=e(94598),m=g.LINE_SPACING,d=g.FROM_TL,A=g.FROM_BR,b=e(29485).cn;$.exports={draw:function c(F){var z=F._fullLayout._infolayer.selectAll("g."+b.colorbar).data(function S(F){var k,O,U,H,_=F._fullLayout,z=F.calcdata,D=[];function j(X){return r(X,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function ee(){"function"==typeof H.calc?H.calc(F,U,k):(k._fillgradient=O.reversescale?y(O.colorscale):O.colorscale,k._zrange=[O[H.min],O[H.max]])}for(var W=0;W<z.length;W++){var B=z[W];if((U=B[0].trace)._module){var te=U._module.colorbar;if(!0===U.visible&&te)for(var q=Array.isArray(te),oe=q?te:[te],ie=0;ie<oe.length;ie++){var V=(H=oe[ie]).container;(O=V?U[V]:U)&&O.showscale&&((k=j(O.colorbar))._id="cb"+U.uid+(q&&V?"-"+V:""),k._traceIndex=U.index,k._propPrefix=(V?V+".":"")+"colorbar.",k._meta=U._meta,ee(),D.push(k))}}}for(var Y in _._colorAxes)if((O=_[Y]).showscale){var ae=_._colorAxes[Y];(k=j(O.colorbar))._id="cb"+Y,k._propPrefix=Y+".colorbar.",k._meta=_._meta,H={min:"cmin",max:"cmax"},"heatmap"!==ae[0]&&(U=ae[1],H.calc=U._module.colorbar.calc),ee(),D.push(k)}return D}(F),function(D){return D._id});z.enter().append("g").attr("class",function(D){return D._id}).classed(b.colorbar,!0),z.each(function(D){var k=M.select(this);u.ensureSingle(k,"rect",b.cbbg),u.ensureSingle(k,"g",b.cbfills),u.ensureSingle(k,"g",b.cblines),u.ensureSingle(k,"g",b.cbaxis,function(U){U.classed(b.crisp,!0)}),u.ensureSingle(k,"g",b.cbtitleunshift,function(U){U.append("g").classed(b.cbtitle,!0)}),u.ensureSingle(k,"rect",b.cboutline);var O=function w(F,_,z){var D="v"===_.orientation,k=_.len,O=_.lenmode,U=_.thickness,H=_.thicknessmode,j=_.outlinewidth,ee=_.borderwidth,W=_.bgcolor,B=_.xanchor,te=_.yanchor,q=_.xpad,oe=_.ypad,ie=_.x,V=D?_.y:1-_.y,Y="paper"===_.yref,ae="paper"===_.xref,X=z._fullLayout,J=X._size,ue=_._fillcolor,re=_._line,ne=_.title,se=ne.side,de=_._zrange||M.extent(("function"==typeof ue?ue:re.color).domain()),be="function"==typeof re.color?re.color:function(){return re.color},De="function"==typeof ue?ue:function(){return ue},_e=_._levels,Ce=function P(F,_,z){var U,H,D=_._levels,k=[],O=[],j=D.end+D.size/100,ee=D.size,W=1.001*z[0]-.001*z[1],B=1.001*z[1]-.001*z[0];for(H=0;H<1e5&&(U=D.start+H*ee,!(ee>0?U>=j:U<=j));H++)U>W&&U<B&&k.push(U);if(_._fillgradient)O=[0];else if("function"==typeof _._fillcolor){var te=_._filllevels;if(te)for(j=te.end+te.size/100,ee=te.size,H=0;H<1e5&&(U=te.start+H*ee,!(ee>0?U>=j:U<=j));H++)U>z[0]&&U<z[1]&&O.push(U);else O=k.map(function(q){return q-D.size/2}),O.push(O[O.length-1]+D.size)}else _._fillcolor&&"string"==typeof _._fillcolor&&(O=[0]);return D.size<0&&(k.reverse(),O.reverse()),{line:k,fill:O}}(0,_,de),Le=Ce.fill,Fe=Ce.line,ke=Math.round(U*("fraction"===H?D?J.w:J.h:1)),ze=ke/(D?J.w:J.h),Pe=Math.round(k*("fraction"===O?D?J.h:J.w:1)),Ie=Pe/(D?J.h:J.w),Qe=ae?J.w:z._fullLayout.width,at=Y?J.h:z._fullLayout.height,Be=Math.round(D?ie*Qe+q:V*at+oe),Ne={center:.5,right:1}[B]||0,nt={top:1,middle:.5}[te]||0,ct=D?ie-Ne*ze:V-nt*ze,mt=D?V-nt*Ie:ie-Ne*Ie,Bt=Math.round(D?at*(1-mt):Qe*mt);_._lenFrac=Ie,_._thickFrac=ze,_._uFrac=ct,_._vFrac=mt;var Rt=_._axis=function R(F,_,z){var D=F._fullLayout,k="v"===_.orientation,O={type:"linear",range:z,tickmode:_.tickmode,nticks:_.nticks,tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:_.ticks,ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,showticklabels:_.showticklabels,labelalias:_.labelalias,ticklabelposition:_.ticklabelposition,ticklabeloverflow:_.ticklabeloverflow,ticklabelstep:_.ticklabelstep,tickfont:_.tickfont,tickangle:_.tickangle,tickformat:_.tickformat,exponentformat:_.exponentformat,minexponent:_.minexponent,separatethousands:_.separatethousands,showexponent:_.showexponent,showtickprefix:_.showtickprefix,tickprefix:_.tickprefix,showticksuffix:_.showticksuffix,ticksuffix:_.ticksuffix,title:_.title,showline:!0,anchor:"free",side:k?"right":"bottom",position:1},U=k?"y":"x",H={type:"linear",_id:U+_._id},j={letter:U,font:D.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:D.calendar};function ee(W,B){return u.coerce(O,H,h,W,B)}return s(O,H,ee,j,D),x(O,H,ee,j),H}(z,_,de);Rt.position=ze+(D?ie+q/J.w:V+oe/J.h);var zt=-1!==["top","bottom"].indexOf(se);if(D&&zt&&(Rt.title.side=se,Rt.titlex=ie+q/J.w,Rt.titley=mt+("top"===ne.side?Ie-oe/J.h:oe/J.h)),!D&&!zt&&(Rt.title.side=se,Rt.titley=V+oe/J.h,Rt.titlex=mt+q/J.w),re.color&&"auto"===_.tickmode){Rt.tickmode="linear",Rt.tick0=_e.start;var St=_e.size,Xt=u.constrain(Pe/50,4,15)+1,Mt=(de[1]-de[0])/((_.nticks||Xt)*St);if(Mt>1){var st=Math.pow(10,Math.floor(Math.log(Mt)/Math.LN10));St*=st*u.roundUp(Mt/st,[2,5,10]),(Math.abs(_e.start)/_e.size+1e-6)%1<2e-6&&(Rt.tick0=0)}Rt.dtick=St}Rt.domain=D?[mt+oe/J.h,mt+Ie-oe/J.h]:[mt+q/J.w,mt+Ie-q/J.w],Rt.setScale(),F.attr("transform",a(Math.round(J.l),Math.round(J.t)));var we,Se=F.select("."+b.cbtitleunshift).attr("transform",a(-Math.round(J.l),-Math.round(J.t))),pe=Rt.ticklabelposition,ge=Rt.title.font.size,Oe=F.select("."+b.cbaxis),He=0,Xe=0;function ut(bt,Pt){var cr={propContainer:Rt,propName:_._propPrefix+"title",traceIndex:_._traceIndex,_meta:_._meta,placeholder:X._dfltTitle.colorbar,containerGroup:F.select("."+b.cbtitle)},Sr="h"===bt.charAt(0)?bt.substr(1):"h"+bt;F.selectAll("."+Sr+",."+Sr+"-math-group").remove(),f.draw(z,bt,r(cr,Pt||{}))}function Ze(){var bt,Pt;(D&&zt||!D&&!zt)&&("top"===se&&(bt=q+J.l+Qe*ie,Pt=oe+J.t+at*(1-mt-Ie)+3+.75*ge),"bottom"===se&&(bt=q+J.l+Qe*ie,Pt=oe+J.t+at*(1-mt)-3-.25*ge),"right"===se&&(Pt=oe+J.t+at*V+3+.75*ge,bt=q+J.l+Qe*mt),ut(Rt._id+"title",{attributes:{x:bt,y:Pt,"text-anchor":D?"start":"middle"}}))}function qe(){if(D&&!zt||!D&&zt){var cr,Sr,bt=Rt.position||0,Pt=Rt._offset+Rt._length/2;if("right"===se)Sr=Pt,cr=J.l+Qe*bt+10+ge*(Rt.showticklabels?1:.5);else if(cr=Pt,"bottom"===se&&(Sr=J.t+at*bt+10+(-1===pe.indexOf("inside")?Rt.tickfont.size:0)+("intside"!==Rt.ticks&&_.ticklen||0)),"top"===se){var Kr=ne.text.split("<br>").length;Sr=J.t+at*bt+10-ke-m*ge*Kr}ut((D?"h":"v")+Rt._id+"title",{avoid:{selection:M.select(z).selectAll("g."+Rt._id+"tick"),side:se,offsetTop:D?0:J.t,offsetLeft:D?J.l:0,maxShift:D?X.width:X.height},attributes:{x:cr,y:Sr,"text-anchor":"middle"},transform:{rotate:D?-90:0,offset:0}})}}function Dt(){if(!D&&!zt||D&&zt){var It,bt=F.select("."+b.cbtitle),Pt=bt.select("text"),cr=[-j/2,j/2],Sr=bt.select(".h"+Rt._id+"title-math-group").node(),Kr=15.6;if(Pt.node()&&(Kr=parseInt(Pt.node().style.fontSize,10)*m),Sr?(It=v.bBox(Sr),Xe=It.width,(He=It.height)>Kr&&(cr[1]-=(He-Kr)/2)):Pt.node()&&!Pt.classed(b.jsPlaceholder)&&(It=v.bBox(Pt.node()),Xe=It.width,He=It.height),D){if(He){if(He+=5,"top"===se)Rt.domain[1]-=He/J.h,cr[1]*=-1;else{Rt.domain[0]+=He/J.h;var $t=l.lineCount(Pt);cr[1]+=(1-$t)*Kr}bt.attr("transform",a(cr[0],cr[1])),Rt.setScale()}}else Xe&&("right"===se&&(Rt.domain[0]+=(Xe+ge/2)/J.w),bt.attr("transform",a(cr[0],cr[1])),Rt.setScale())}F.selectAll("."+b.cbfills+",."+b.cblines).attr("transform",D?a(0,Math.round(J.h*(1-Rt.domain[1]))):a(Math.round(J.w*Rt.domain[0]),0)),Oe.attr("transform",D?a(0,Math.round(-J.t)):a(Math.round(-J.l),0));var kr=F.select("."+b.cbfills).selectAll("rect."+b.cbfill).attr("style","").data(Le);kr.enter().append("rect").classed(b.cbfill,!0).attr("style",""),kr.exit().remove();var lr=de.map(Rt.c2p).map(Math.round).sort(function(ft,Ct){return ft-Ct});kr.each(function(ft,Ct){var sr=[0===Ct?de[0]:(Le[Ct]+Le[Ct-1])/2,Ct===Le.length-1?de[1]:(Le[Ct]+Le[Ct+1])/2].map(Rt.c2p).map(Math.round);D&&(sr[1]=u.constrain(sr[1]+(sr[1]>sr[0])?1:-1,lr[0],lr[1]));var tr=M.select(this).attr(D?"x":"y",Be).attr(D?"y":"x",M.min(sr)).attr(D?"width":"height",Math.max(ke,2)).attr(D?"height":"width",Math.max(M.max(sr)-M.min(sr),2));if(_._fillgradient)v.gradient(tr,z,_._id,D?"vertical":"horizontalreversed",_._fillgradient,"fill");else{var Cr=De(ft).replace("e-","");tr.attr("fill",I(Cr).toHexString())}});var rt=F.select("."+b.cblines).selectAll("path."+b.cbline).data(re.color&&re.width?Fe:[]);rt.enter().append("path").classed(b.cbline,!0),rt.exit().remove(),rt.each(function(ft){var Ct=Be,sr=Math.round(Rt.c2p(ft))+re.width/2%1;M.select(this).attr("d","M"+(D?Ct+","+sr:sr+","+Ct)+(D?"h":"v")+ke).call(v.lineGroupStyle,re.width,be(ft),re.dash)}),Oe.selectAll("g."+Rt._id+"tick,path").remove();var $e=Be+ke+(j||0)/2-("outside"===_.ticks?1:0),ht=n.calcTicks(Rt),gt=n.getTickSigns(Rt)[2];return n.drawTicks(z,Rt,{vals:"inside"===Rt.ticks?n.clipEnds(Rt,ht):ht,layer:Oe,path:n.makeTickPath(Rt,$e,gt),transFn:n.makeTransTickFn(Rt)}),n.drawLabels(z,Rt,{vals:ht,layer:Oe,transFn:n.makeTransTickLabelFn(Rt),labelFns:n.makeLabelFns(Rt,$e)})}function Ft(){var bt,Pt=ke+j/2;-1===pe.indexOf("inside")&&(bt=v.bBox(Oe.node()),Pt+=D?bt.width:bt.height),we=Se.select("text");var cr=0,Sr=D&&"top"===se,Kr=!D&&"right"===se,It=0;if(we.node()&&!we.classed(b.jsPlaceholder)){var $t,kr=Se.select(".h"+Rt._id+"title-math-group").node();kr&&(D&&zt||!D&&!zt)?(cr=(bt=v.bBox(kr)).width,$t=bt.height):(cr=(bt=v.bBox(Se.node())).right-J.l-(D?Be:Bt),$t=bt.bottom-J.t-(D?Bt:Be),!D&&"top"===se&&(Pt+=bt.height,It=bt.height)),Kr&&(we.attr("transform",a(cr/2+ge/2,0)),cr*=2),Pt=Math.max(Pt,D?cr:$t)}var lr=2*(D?q:oe)+Pt+ee+j/2,rt=0;!D&&ne.text&&"bottom"===te&&V<=0&&(lr+=rt=lr/2,It+=rt),X._hColorbarMoveTitle=rt,X._hColorbarMoveCBTitle=It;var $e=ee+j,ht=(D?Be:Bt)-$e/2-(D?q:0),gt=(D?Bt:Be)-(D?Pe:oe+It-rt);F.select("."+b.cbbg).attr("x",ht).attr("y",gt).attr(D?"width":"height",Math.max(lr-rt,2)).attr(D?"height":"width",Math.max(Pe+$e,2)).call(p.fill,W).call(p.stroke,_.bordercolor).style("stroke-width",ee);var ft=Kr?Math.max(cr-10,0):0;F.selectAll("."+b.cboutline).attr("x",(D?Be:Bt+q)+ft).attr("y",(D?Bt+oe-Pe:Be)+(Sr?He:0)).attr(D?"width":"height",Math.max(ke,2)).attr(D?"height":"width",Math.max(Pe-(D?2*oe+He:2*q+ft),2)).call(p.stroke,_.outlinecolor).style({fill:"none","stroke-width":j});var Ct=D?Ne*lr:0,sr=D?0:(1-nt)*lr-It;if(Ct=ae?J.l-Ct:-Ct,sr=Y?J.t-sr:-sr,F.attr("transform",a(Ct,sr)),!D&&(ee||I(W).getAlpha()&&!I.equals(X.paper_bgcolor,W))){var tr=Oe.selectAll("text"),Cr=tr[0].length,Hr=F.select("."+b.cbbg).node(),zr=v.bBox(Hr),Wr=v.getTranslate(F),Ke=2;tr.each(function(Ir,Ur){var qt=0,on=Cr-1;if(Ur===qt||Ur===on){var An,an=v.bBox(this),hn=v.getTranslate(this);if(Ur===on){var Sn=an.right+hn.x;(An=zr.right+Wr.x+Bt-ee-Ke+ie-Sn)>0&&(An=0)}else if(Ur===qt){var Rn=an.left+hn.x;(An=zr.left+Wr.x+Bt+ee+Ke-Rn)<0&&(An=0)}An&&(Cr<3?this.setAttribute("transform","translate("+An+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var We={},Jt=d[B],Gt=A[B],hr=d[te],br=A[te],Ut=lr-ke;D?("pixels"===O?(We.y=V,We.t=Pe*hr,We.b=Pe*br):(We.t=We.b=0,We.yt=V+k*hr,We.yb=V-k*br),"pixels"===H?(We.x=ie,We.l=lr*Jt,We.r=lr*Gt):(We.l=Ut*Jt,We.r=Ut*Gt,We.xl=ie-U*Jt,We.xr=ie+U*Gt)):("pixels"===O?(We.x=ie,We.l=Pe*Jt,We.r=Pe*Gt):(We.l=We.r=0,We.xl=ie+k*Jt,We.xr=ie-k*Gt),"pixels"===H?(We.y=1-V,We.t=lr*hr,We.b=lr*br):(We.t=Ut*hr,We.b=Ut*br,We.yt=V-U*hr,We.yb=V+U*br));var Kt=_.y<.5?"b":"t",wt=_.x<.5?"l":"r";z._fullLayout._reservedMargin[_._id]={};var xr={r:X.width-ht-Ct,l:ht+We.r,b:X.height-gt-sr,t:gt+We.b};ae&&Y?t.autoMargin(z,_._id,We):ae?z._fullLayout._reservedMargin[_._id][Kt]=xr[Kt]:Y||D?z._fullLayout._reservedMargin[_._id][wt]=xr[wt]:z._fullLayout._reservedMargin[_._id][Kt]=xr[Kt]}return u.syncOrAsync([t.previousPromises,Ze,Dt,qe,t.previousPromises,Ft],z)}(k,D,F);O&&O.then&&(F._promises||[]).push(O),F._context.edits.colorbarPosition&&function E(F,_,z){var U,H,j,D="v"===_.orientation,k=z._fullLayout,O=k._size;i.init({element:F.node(),gd:z,prepFn:function(){U=F.attr("transform"),o(F)},moveFn:function(ee,W){F.attr("transform",U+a(ee,W)),H=i.align((D?_._uFrac:_._vFrac)+ee/O.w,D?_._thickFrac:_._lenFrac,0,1,_.xanchor),j=i.align((D?_._vFrac:1-_._uFrac)-W/O.h,D?_._lenFrac:_._thickFrac,0,1,_.yanchor);var B=i.getCursor(H,j,_.xanchor,_.yanchor);o(F,B)},doneFn:function(){if(o(F),void 0!==H&&void 0!==j){var ee={};ee[_._propPrefix+"x"]=H,ee[_._propPrefix+"y"]=j,void 0!==_._traceIndex?T.call("_guiRestyle",z,ee,_._traceIndex):T.call("_guiRelayout",z,ee)}}})}(k,D,F)}),z.exit().each(function(D){t.autoMargin(F,D._id)}).remove(),z.order()}}},9245:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t){return M.isPlainObject(t.colorbar)}},55144:($,K,e)=>{"use strict";$.exports={moduleType:"component",name:"colorbar",attributes:e(10623),supplyDefaults:e(97531),draw:e(1247).draw,hasColorbar:e(9245)}},567:($,K,e)=>{"use strict";var M=e(10623),I=e(13943).counter,t=e(65452),T=e(1472).scales,n=t(T);function i(u){return"`"+u+"`"}$.exports=function(a,r){a=a||"";var x,h,o=(r=r||{}).cLetter||"c",v="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(a),p="noScale"in r?r.noScale:"marker.line"===a,f="showScaleDflt"in r?r.showScaleDflt:"z"===o,l="string"==typeof r.colorscaleDflt?T[r.colorscaleDflt]:null,y=r.editTypeOverride||"",s=a?a+".":"";"colorAttr"in r?(x=r.colorAttr,h=r.colorAttr):h="in "+i(s+(x={z:"z",c:"color"}[o]));var g=v?" Has an effect only if "+h+" is set to a numerical array.":"",m=o+"auto",d=o+"min",A=o+"max",b=o+"mid",c=i(s+m),S=i(s+d),w=i(s+A),E=S+" and "+w,P={};P[d]=P[A]=void 0;var R={};R[m]=!1;var F={};return"color"===x&&(F.color={valType:"color",arrayOk:!0,editType:y||"style",description:["Sets the",a,"color.","It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to",E,"if set."].join(" ")},r.anim&&(F.color.anim=!0)),F[m]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:P,description:["Determines whether or not the color domain is computed","with respect to the input data (here "+h+") or the bounds set in",E+g,"Defaults to `false` when",E,"are set by the user."].join(" ")},F[d]={valType:"number",dflt:null,editType:y||"plot",impliedEdits:R,description:["Sets the lower bound of the color domain."+g,"Value should have the same units as",h,"and if set,",w,"must be set as well."].join(" ")},F[A]={valType:"number",dflt:null,editType:y||"plot",impliedEdits:R,description:["Sets the upper bound of the color domain."+g,"Value should have the same units as",h,"and if set,",S,"must be set as well."].join(" ")},F[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:P,description:["Sets the mid-point of the color domain by scaling",S,"and/or",w,"to be equidistant to this point."+g,"Value should have the same units as",h+".","Has no effect when",c,"is `false`."].join(" ")},F.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale."+g,"The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use",E+".","Alternatively, `colorscale` may be a palette name string","of the following list: "+n+"."].join(" ")},F.autocolorscale={valType:"boolean",dflt:!1!==r.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by",i(s+"colorscale")+"."+g,"In case `colorscale` is unspecified or `autocolorscale` is true, the default","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" ")},F.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true."+g,"If true,",S,"will correspond to the last color","in the array and",w,"will correspond to the first color."].join(" ")},p||(F.showscale={valType:"boolean",dflt:f,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."+g].join(" ")},F.colorbar=M),r.noColorAxis||(F.coloraxis={valType:"subplotid",regex:I("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),F}},93727:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(981).extractOpts;$.exports=function(n,i,u){var g,a=n._fullLayout,r=u.vals,o=u.containerStr,v=o?I.nestedProperty(i,o).get():i,p=t(v),f=!1!==p.auto,l=p.min,y=p.max,s=p.mid,x=function(){return I.aggNums(Math.min,null,r)},h=function(){return I.aggNums(Math.max,null,r)};(void 0===l?l=x():f&&(l=v._colorAx&&M(l)?Math.min(l,x()):x()),void 0===y?y=h():f&&(y=v._colorAx&&M(y)?Math.max(y,h()):h()),f&&void 0!==s&&(y-s>s-l?l=s-(y-s):y-s<s-l&&(y=s+(s-l))),l===y&&(l-=.5,y+=.5),p._sync("min",l),p._sync("max",y),p.autocolorscale)&&(g=l*y<0?a.colorscale.diverging:l>=0?a.colorscale.sequential:a.colorscale.sequentialminus,p._sync("colorscale",g))}},10221:($,K,e)=>{"use strict";var M=e(5228),I=e(981).hasColorscale,t=e(981).extractOpts;$.exports=function(n,i){function u(l,y){var s=l["_"+y];void 0!==s&&(l[y]=s)}function a(l,y){var s=y.container?M.nestedProperty(l,y.container).get():l;if(s)if(s.coloraxis)s._colorAx=i[s.coloraxis];else{var x=t(s),h=x.auto;(h||void 0===x.min)&&u(s,y.min),(h||void 0===x.max)&&u(s,y.max),x.autocolorscale&&u(s,"colorscale")}}for(var r=0;r<n.length;r++){var o=n[r],v=o._module.colorbar;if(v)if(Array.isArray(v))for(var p=0;p<v.length;p++)a(o,v[p]);else a(o,v);I(o,"marker.line")&&a(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in i._colorAxes)a(i[f],{min:"cmin",max:"cmax"})}},14739:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(9245),T=e(97531),n=e(1472).isValid,i=e(97799).traceIs;function u(a,r){var o=r.slice(0,r.length-1);return r?I.nestedProperty(a,o).get()||{}:a}$.exports=function a(r,o,v,p,f){var l=f.prefix,y=f.cLetter,s="_module"in o,x=u(r,l),h=u(o,l),g=u(o._template||{},l)||{},m=function(){return delete r.coloraxis,delete o.coloraxis,a(r,o,v,p,f)};if(s){var d=v._colorAxes||{},A=p(l+"coloraxis");if(A){var b=i(o,"contour")&&I.nestedProperty(o,"contours.coloring").get()||"heatmap",c=d[A];return void(c?(c[2].push(m),c[0]!==b&&(c[0]=!1,I.warn(["Ignoring coloraxis:",A,"setting","as it is linked to incompatible colorscales."].join(" ")))):d[A]=[b,o,[m]])}}var S=x[y+"min"],w=x[y+"max"],E=M(S)&&M(w)&&S<w;p(l+y+"auto",!E)?p(l+y+"mid"):(p(l+y+"min"),p(l+y+"max"));var _,z,R=x.colorscale,F=g.colorscale;(void 0!==R&&(_=!n(R)),void 0!==F&&(_=!n(F)),p(l+"autocolorscale",_),p(l+"colorscale"),p(l+"reversescale"),"marker.line."!==l)&&(l&&s&&(z=t(x)),p(l+"showscale",z)&&(l&&g&&(h._template=g),T(x,h,v)))}},981:($,K,e)=>{"use strict";var M=e(21572),I=e(80791),t=e(7347),T=e(5228),n=e(8416),i=e(1472).isValid;var a=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function o(s){var m,d,A,x=s._colorAx,h=x||s,g={};for(d=0;d<a.length;d++)g[A=a[d]]=h[A];if(x)for(m="c",d=0;d<r.length;d++)g[A=r[d]]=h["c"+A];else{var b;for(d=0;d<r.length;d++)((b="c"+(A=r[d]))in h||(b="z"+A)in h)&&(g[A]=h[b]);m=b.charAt(0)}return g._sync=function(c,S){var w=-1!==r.indexOf(c)?m+c:c;h[w]=h["_"+w]=S},g}function v(s){for(var x=o(s),h=x.min,g=x.max,m=x.reversescale?p(x.colorscale):x.colorscale,d=m.length,A=new Array(d),b=new Array(d),c=0;c<d;c++){var S=m[c];A[c]=h+S[0]*(g-h),b[c]=S[1]}return{domain:A,range:b}}function p(s){for(var x=s.length,h=new Array(x),g=x-1,m=0;g>=0;g--,m++){var d=s[g];h[m]=[1-d[0],d[1]]}return h}function f(s,x){x=x||{};for(var h=s.domain,g=s.range,m=g.length,d=new Array(m),A=0;A<m;A++){var b=I(g[A]).toRgb();d[A]=[b.r,b.g,b.b,b.a]}var E,c=M.scale.linear().domain(h).range(d).clamp(!0),S=x.noNumericCheck,w=x.returnArray;return(E=S&&w?c:S?function(P){return y(c(P))}:w?function(P){return t(P)?c(P):I(P).isValid()?P:n.defaultLine}:function(P){return t(P)?y(c(P)):I(P).isValid()?P:n.defaultLine}).domain=c.domain,E.range=function(){return g},E}function y(s){var x={r:s[0],g:s[1],b:s[2],a:s[3]};return I(x).toRgbString()}$.exports={hasColorscale:function u(s,x,h){var g=x?T.nestedProperty(s,x).get()||{}:s,m=g[h||"color"];m&&m._inputArray&&(m=m._inputArray);var d=!1;if(T.isArrayOrTypedArray(m))for(var A=0;A<m.length;A++)if(t(m[A])){d=!0;break}return T.isPlainObject(g)&&(d||!0===g.showscale||t(g.cmin)&&t(g.cmax)||i(g.colorscale)||T.isPlainObject(g.colorbar))},extractOpts:o,extractScale:v,flipScale:p,makeColorScaleFunc:f,makeColorScaleFuncFromTrace:function l(s,x){return f(v(s),x)}}},45103:($,K,e)=>{"use strict";var M=e(1472),I=e(981);$.exports={moduleType:"component",name:"colorscale",attributes:e(567),layoutAttributes:e(81978),supplyLayoutDefaults:e(56172),handleDefaults:e(14739),crossTraceDefaults:e(10221),calc:e(93727),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:I.hasColorscale,extractOpts:I.extractOpts,extractScale:I.extractScale,flipScale:I.flipScale,makeColorScaleFunc:I.makeColorScaleFunc,makeColorScaleFuncFromTrace:I.makeColorScaleFuncFromTrace}},81978:($,K,e)=>{"use strict";var M=e(18836).extendFlat,I=e(567),t=e(1472).scales,T="Note that `autocolorscale` must be true for this attribute to work.";$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:t.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",T].join(" ")},sequentialminus:{valType:"colorscale",dflt:t.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",T].join(" ")},diverging:{valType:"colorscale",dflt:t.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",T].join(" ")}},coloraxis:M({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},I("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},56172:($,K,e)=>{"use strict";var M=e(5228),I=e(96906),t=e(81978),T=e(14739);$.exports=function(i,u){function a(s,x){return M.coerce(i,u,t,s,x)}a("colorscale.sequential"),a("colorscale.sequentialminus"),a("colorscale.diverging");var o,v,r=u._colorAxes;function p(s,x){return M.coerce(o,v,t.coloraxis,s,x)}for(var f in r){var l=r[f];if(l[0])o=i[f]||{},(v=I.newContainer(u,f,"coloraxis"))._name=f,T(o,v,u,p,{prefix:"",cLetter:"c"});else{for(var y=0;y<l[2].length;y++)l[2][y]();delete u._colorAxes[f]}}}},1472:($,K,e)=>{"use strict";var M=e(80791),I={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},t=I.RdBu;function n(u){var a=0;if(!Array.isArray(u)||u.length<2||!u[0]||!u[u.length-1]||0!=+u[0][0]||1!=+u[u.length-1][0])return!1;for(var r=0;r<u.length;r++){var o=u[r];if(2!==o.length||+o[0]<a||!M(o[1]).isValid())return!1;a=+o[0]}return!0}$.exports={scales:I,defaultScale:t,get:function T(u,a){if(a||(a=t),!u)return a;function r(){try{u=I[u]||JSON.parse(u)}catch{u=a}}return"string"==typeof u&&(r(),"string"==typeof u&&r()),n(u)?u:a},isValid:function i(u){return void 0!==I[u]||n(u)}}},89349:$=>{"use strict";$.exports=function(e,M,I,t,T){var n=(e-I)/(t-I),i=n+M/(t-I),u=(n+i)/2;return"left"===T||"bottom"===T?n:"center"===T||"middle"===T?u:"right"===T||"top"===T?i:n<2/3-u?n:i>4/3-u?i:u}},21564:($,K,e)=>{"use strict";var M=e(5228),I=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(T,n,i,u){return T="left"===i?0:"center"===i?1:"right"===i?2:M.constrain(Math.floor(3*T),0,2),n="bottom"===u?0:"middle"===u?1:"top"===u?2:M.constrain(Math.floor(3*n),0,2),I[n][T]}},85996:($,K)=>{"use strict";K.selectMode=function(e){return"lasso"===e||"select"===e},K.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},K.openMode=function(e){return"drawline"===e||"drawopenpath"===e},K.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},K.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},K.selectingOrDrawing=function(e){return K.freeMode(e)||K.rectMode(e)}},25429:($,K,e)=>{"use strict";var M=e(76570),I=e(60075),t=e(45519),T=e(5228).removeElement,n=e(4669),i=$.exports={};i.align=e(89349),i.getCursor=e(21564);var u=e(21144);function a(){var o=document.createElement("div");o.className="dragcover";var v=o.style;return v.position="fixed",v.left=0,v.right=0,v.top=0,v.bottom=0,v.zIndex=999999999,v.background="none",document.body.appendChild(o),o}function r(o){return M(o.changedTouches?o.changedTouches[0]:o,document.body)}i.unhover=u.wrapped,i.unhoverRaw=u.raw,i.init=function(v){var s,x,h,g,m,d,A,b,p=v.gd,f=1,l=p._context.doubleClickDelay,y=v.element;p._mouseDownTime||(p._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=w,t?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=w,y.addEventListener("touchstart",w,{passive:!1})):y.ontouchstart=w;var S=v.clampFn||function c(R,F,_){return Math.abs(R)<_&&(R=0),Math.abs(F)<_&&(F=0),[R,F]};function w(R){p._dragged=!1,p._dragging=!0;var F=r(R);s=F[0],x=F[1],A=R.target,d=R,b=2===R.buttons||R.ctrlKey,typeof R.clientX>"u"&&typeof R.clientY>"u"&&(R.clientX=s,R.clientY=x),(h=(new Date).getTime())-p._mouseDownTime<l?f+=1:(f=1,p._mouseDownTime=h),v.prepFn&&v.prepFn(R,s,x),I&&!b?(m=a()).style.cursor=window.getComputedStyle(y).cursor:I||(m=document,g=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",P),document.addEventListener("touchend",P),!1!==v.dragmode&&(R.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("touchmove",E,{passive:!1}))}function E(R){R.preventDefault();var F=r(R),_=v.minDrag||n.MINDRAG,z=S(F[0]-s,F[1]-x,_),D=z[0],k=z[1];(D||k)&&(p._dragged=!0,i.unhover(p,R)),p._dragged&&v.moveFn&&!b&&(p._dragdata={element:y,dx:D,dy:k},v.moveFn(D,k))}function P(R){if(delete p._dragdata,!1!==v.dragmode&&(R.preventDefault(),document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E)),document.removeEventListener("mouseup",P),document.removeEventListener("touchend",P),I?T(m):g&&(m.documentElement.style.cursor=g,g=null),p._dragging){if(p._dragging=!1,(new Date).getTime()-p._mouseDownTime>l&&(f=Math.max(f-1,1)),p._dragged)v.doneFn&&v.doneFn();else if(v.clickFn&&v.clickFn(f,d),!b){var F;try{F=new MouseEvent("click",R)}catch{var _=r(R);(F=document.createEvent("MouseEvents")).initMouseEvent("click",R.bubbles,R.cancelable,R.view,R.detail,R.screenX,R.screenY,_[0],_[1],R.ctrlKey,R.altKey,R.shiftKey,R.metaKey,R.button,R.relatedTarget)}A.dispatchEvent(F)}p._dragging=!1,p._dragged=!1}else p._dragged=!1}},i.coverSlip=a},21144:($,K,e)=>{"use strict";var M=e(70074),I=e(30617),t=e(21733).getGraphDiv,T=e(53041),n=$.exports={};n.wrapped=function(i,u,a){(i=t(i))._fullLayout&&I.clear(i._fullLayout._uid+T.HOVERID),n.raw(i,u,a)},n.raw=function(u,a){var r=u._fullLayout,o=u._hoverdata;a||(a={}),(!a.target||u._dragged||!1!==M.triggerHandler(u,"plotly_beforehover",a))&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),u._hoverdata=void 0,a.target&&o&&u.emit("plotly_unhover",{event:a,points:o}))}},65822:($,K)=>{"use strict";K.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")},K.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")}},27630:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=I.numberFormat,T=e(7347),n=e(80791),i=e(97799),u=e(8416),a=e(45103),r=I.strTranslate,o=e(88565),v=e(70415),f=e(94598).LINE_SPACING,l=e(49431).DESELECTDIM,y=e(49258),s=e(47173),x=e(40235).appendArrayPointValue,h=$.exports={};function g(Ce,Le,Fe){var ke=Le.fillpattern,ze=ke&&h.getPatternAttr(ke.shape,0,"");if(ze){var Pe=h.getPatternAttr(ke.bgcolor,0,null),Ie=h.getPatternAttr(ke.fgcolor,0,null),Qe=ke.fgopacity,at=h.getPatternAttr(ke.size,0,8),Be=h.getPatternAttr(ke.solidity,0,.3),Ne=Le.uid;h.pattern(Ce,"point",Fe,Ne,ze,at,Be,void 0,ke.fillmode,Pe,Ie,Qe)}else Le.fillcolor&&Ce.call(u.fill,Le.fillcolor)}h.font=function(Ce,Le,Fe,ke){I.isPlainObject(Le)&&(ke=Le.color,Fe=Le.size,Le=Le.family),Le&&Ce.style("font-family",Le),Fe+1&&Ce.style("font-size",Fe+"px"),ke&&Ce.call(u.fill,ke)},h.setPosition=function(Ce,Le,Fe){Ce.attr("x",Le).attr("y",Fe)},h.setSize=function(Ce,Le,Fe){Ce.attr("width",Le).attr("height",Fe)},h.setRect=function(Ce,Le,Fe,ke,ze){Ce.call(h.setPosition,Le,Fe).call(h.setSize,ke,ze)},h.translatePoint=function(Ce,Le,Fe,ke){var ze=Fe.c2p(Ce.x),Pe=ke.c2p(Ce.y);return!!(T(ze)&&T(Pe)&&Le.node())&&("text"===Le.node().nodeName?Le.attr("x",ze).attr("y",Pe):Le.attr("transform",r(ze,Pe)),!0)},h.translatePoints=function(Ce,Le,Fe){Ce.each(function(ke){var ze=M.select(this);h.translatePoint(ke,ze,Le,Fe)})},h.hideOutsideRangePoint=function(Ce,Le,Fe,ke,ze,Pe){Le.attr("display",Fe.isPtWithinRange(Ce,ze)&&ke.isPtWithinRange(Ce,Pe)?null:"none")},h.hideOutsideRangePoints=function(Ce,Le){if(Le._hasClipOnAxisFalse){var Fe=Le.xaxis,ke=Le.yaxis;Ce.each(function(ze){var Pe=ze[0].trace,Ie=Pe.xcalendar,Qe=Pe.ycalendar,at=i.traceIs(Pe,"bar-like")?".bartext":".point,.textpoint";Ce.selectAll(at).each(function(Be){h.hideOutsideRangePoint(Be,M.select(this),Fe,ke,Ie,Qe)})})}},h.crispRound=function(Ce,Le,Fe){return Le&&T(Le)?Ce._context.staticPlot?Le:Le<1?1:Math.round(Le):Fe||0},h.singleLineStyle=function(Ce,Le,Fe,ke,ze){Le.style("fill","none");var Pe=(((Ce||[])[0]||{}).trace||{}).line||{},Ie=Fe||Pe.width||0,Qe=ze||Pe.dash||"";u.stroke(Le,ke||Pe.color),h.dashLine(Le,Qe,Ie)},h.lineGroupStyle=function(Ce,Le,Fe,ke){Ce.style("fill","none").each(function(ze){var Pe=(((ze||[])[0]||{}).trace||{}).line||{},Ie=Le||Pe.width||0,Qe=ke||Pe.dash||"";M.select(this).call(u.stroke,Fe||Pe.color).call(h.dashLine,Qe,Ie)})},h.dashLine=function(Ce,Le,Fe){Fe=+Fe||0,Le=h.dashStyle(Le,Fe),Ce.style({"stroke-dasharray":Le,"stroke-width":Fe+"px"})},h.dashStyle=function(Ce,Le){Le=+Le||1;var Fe=Math.max(Le,3);return"solid"===Ce?Ce="":"dot"===Ce?Ce=Fe+"px,"+Fe+"px":"dash"===Ce?Ce=3*Fe+"px,"+3*Fe+"px":"longdash"===Ce?Ce=5*Fe+"px,"+5*Fe+"px":"dashdot"===Ce?Ce=3*Fe+"px,"+Fe+"px,"+Fe+"px,"+Fe+"px":"longdashdot"===Ce&&(Ce=5*Fe+"px,"+2*Fe+"px,"+Fe+"px,"+2*Fe+"px"),Ce},h.singleFillStyle=function(Ce,Le){var Fe=M.select(Ce.node());g(Ce,((Fe.data()[0]||[])[0]||{}).trace||{},Le)},h.fillGroupStyle=function(Ce,Le){Ce.style("stroke-width",0).each(function(Fe){var ke=M.select(this);Fe[0].trace&&g(ke,Fe[0].trace,Le)})};var m=e(90179);h.symbolNames=[],h.symbolFuncs=[],h.symbolBackOffs=[],h.symbolNeedLines={},h.symbolNoDot={},h.symbolNoFill={},h.symbolList=[],Object.keys(m).forEach(function(Ce){var Le=m[Ce],Fe=Le.n;h.symbolList.push(Fe,String(Fe),Ce,Fe+100,String(Fe+100),Ce+"-open"),h.symbolNames[Fe]=Ce,h.symbolFuncs[Fe]=Le.f,h.symbolBackOffs[Fe]=Le.backoff||0,Le.needLine&&(h.symbolNeedLines[Fe]=!0),Le.noDot?h.symbolNoDot[Fe]=!0:h.symbolList.push(Fe+200,String(Fe+200),Ce+"-dot",Fe+300,String(Fe+300),Ce+"-open-dot"),Le.noFill&&(h.symbolNoFill[Fe]=!0)});var d=h.symbolNames.length;function b(Ce,Le,Fe,ke){var ze=Ce%100;return h.symbolFuncs[ze](Le,Fe,ke)+(Ce>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}h.symbolNumber=function(Ce){if(T(Ce))Ce=+Ce;else if("string"==typeof Ce){var Le=0;Ce.indexOf("-open")>0&&(Le=100,Ce=Ce.replace("-open","")),Ce.indexOf("-dot")>0&&(Le+=200,Ce=Ce.replace("-dot","")),(Ce=h.symbolNames.indexOf(Ce))>=0&&(Ce+=Le)}return Ce%100>=d||Ce>=400?0:Math.floor(Math.max(Ce,0))};var c={x1:1,x2:0,y1:0,y2:0},S={x1:0,x2:0,y1:1,y2:0},w=t("~f"),E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:c},horizontalreversed:{node:"linearGradient",attrs:c,reversed:!0},vertical:{node:"linearGradient",attrs:S},verticalreversed:{node:"linearGradient",attrs:S,reversed:!0}};h.gradient=function(Ce,Le,Fe,ke,ze,Pe){for(var Ie=ze.length,Qe=E[ke],at=new Array(Ie),Be=0;Be<Ie;Be++)Qe.reversed?at[Ie-1-Be]=[w(100*(1-ze[Be][0])),ze[Be][1]]:at[Be]=[w(100*ze[Be][0]),ze[Be][1]];var Ne=Le._fullLayout,nt="g"+Ne._uid+"-"+Fe,ct=Ne._defs.select(".gradients").selectAll("#"+nt).data([ke+at.join(";")],I.identity);ct.exit().remove(),ct.enter().append(Qe.node).each(function(){var mt=M.select(this);Qe.attrs&&mt.attr(Qe.attrs),mt.attr("id",nt);var Bt=mt.selectAll("stop").data(at);Bt.exit().remove(),Bt.enter().append("stop"),Bt.each(function(Rt){var zt=n(Rt[1]);M.select(this).attr({offset:Rt[0]+"%","stop-color":u.tinyRGB(zt),"stop-opacity":zt.getAlpha()})})}),Ce.style(Pe,oe(nt,Le)).style(Pe+"-opacity",null),Ce.classed("gradient_filled",!0)},h.pattern=function(Ce,Le,Fe,ke,ze,Pe,Ie,Qe,at,Be,Ne,nt){var ct="legend"===Le;Qe&&("overlay"===at?(Be=Qe,Ne=u.contrast(Be)):(Be=void 0,Ne=Qe));var Rt,zt,Xt,Mt,st,Se,Ze,qe,Dt,Ft,bt,mt=Fe._fullLayout,Bt="p"+mt._uid+"-"+ke,pe={},ge=n(Ne),Oe=u.tinyRGB(ge),He=nt*ge.getAlpha();switch(ze){case"/":Rt=Pe*Math.sqrt(2),zt=Pe*Math.sqrt(2),Se="path",pe={d:Xt="M-"+Rt/4+","+zt/4+"l"+Rt/2+",-"+zt/2+"M0,"+zt+"L"+Rt+",0M"+Rt/4*3+","+zt/4*5+"l"+Rt/2+",-"+zt/2,opacity:He,stroke:Oe,"stroke-width":(Mt=Ie*Pe)+"px"};break;case"\\":Rt=Pe*Math.sqrt(2),zt=Pe*Math.sqrt(2),Se="path",pe={d:Xt="M"+Rt/4*3+",-"+zt/4+"l"+Rt/2+","+zt/2+"M0,0L"+Rt+","+zt+"M-"+Rt/4+","+zt/4*3+"l"+Rt/2+","+zt/2,opacity:He,stroke:Oe,"stroke-width":(Mt=Ie*Pe)+"px"};break;case"x":Rt=Pe*Math.sqrt(2),zt=Pe*Math.sqrt(2),Xt="M-"+Rt/4+","+zt/4+"l"+Rt/2+",-"+zt/2+"M0,"+zt+"L"+Rt+",0M"+Rt/4*3+","+zt/4*5+"l"+Rt/2+",-"+zt/2+"M"+Rt/4*3+",-"+zt/4+"l"+Rt/2+","+zt/2+"M0,0L"+Rt+","+zt+"M-"+Rt/4+","+zt/4*3+"l"+Rt/2+","+zt/2,Mt=Pe-Pe*Math.sqrt(1-Ie),Se="path",pe={d:Xt,opacity:He,stroke:Oe,"stroke-width":Mt+"px"};break;case"|":Se="path",Se="path",pe={d:Xt="M"+(Rt=Pe)/2+",0L"+Rt/2+","+(zt=Pe),opacity:He,stroke:Oe,"stroke-width":(Mt=Ie*Pe)+"px"};break;case"-":Se="path",Se="path",pe={d:Xt="M0,"+(zt=Pe)/2+"L"+(Rt=Pe)+","+zt/2,opacity:He,stroke:Oe,"stroke-width":(Mt=Ie*Pe)+"px"};break;case"+":Se="path",Xt="M"+(Rt=Pe)/2+",0L"+Rt/2+","+(zt=Pe)+"M0,"+zt/2+"L"+Rt+","+zt/2,Mt=Pe-Pe*Math.sqrt(1-Ie),Se="path",pe={d:Xt,opacity:He,stroke:Oe,"stroke-width":Mt+"px"};break;case".":Rt=Pe,zt=Pe,Ie<Math.PI/4?st=Math.sqrt(Ie*Pe*Pe/Math.PI):(Ze=Ie,qe=Math.PI/4,Dt=1,Ft=Pe/2,bt=Pe/Math.sqrt(2),st=Ft+(bt-Ft)*(Ze-qe)/(Dt-qe)),Se="circle",pe={cx:Rt/2,cy:zt/2,r:st,opacity:He,fill:Oe}}var Xe=[ze||"noSh",Be||"noBg",Ne||"noFg",Pe,Ie].join(";"),ut=mt._defs.select(".patterns").selectAll("#"+Bt).data([Xe],I.identity);ut.exit().remove(),ut.enter().append("pattern").each(function(){var Ze=M.select(this);if(Ze.attr({id:Bt,width:Rt+"px",height:zt+"px",patternUnits:"userSpaceOnUse",patternTransform:ct?"scale(0.8)":""}),Be){var qe=n(Be),Dt=u.tinyRGB(qe),Ft=qe.getAlpha(),bt=Ze.selectAll("rect").data([0]);bt.exit().remove(),bt.enter().append("rect").attr({width:Rt+"px",height:zt+"px",fill:Dt,"fill-opacity":Ft})}var Pt=Ze.selectAll(Se).data([0]);Pt.exit().remove(),Pt.enter().append(Se).attr(pe)}),Ce.style("fill",oe(Bt,Fe)).style("fill-opacity",null),Ce.classed("pattern_filled",!0)},h.initGradients=function(Ce){var Le=Ce._fullLayout;I.ensureSingle(Le._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(Ce).selectAll(".gradient_filled").classed("gradient_filled",!1)},h.initPatterns=function(Ce){var Le=Ce._fullLayout;I.ensureSingle(Le._defs,"g","patterns").selectAll("pattern").remove(),M.select(Ce).selectAll(".pattern_filled").classed("pattern_filled",!1)},h.getPatternAttr=function(Ce,Le,Fe){return Ce&&I.isArrayOrTypedArray(Ce)?Le<Ce.length?Ce[Le]:Fe:Ce},h.pointStyle=function(Ce,Le,Fe,ke){if(Ce.size()){var ze=h.makePointStyleFns(Le);Ce.each(function(Pe){h.singlePointStyle(Pe,M.select(this),Le,ze,Fe,ke)})}},h.singlePointStyle=function(Ce,Le,Fe,ke,ze,Pe){var Ie=Fe.marker,Qe=Ie.line;if(Pe&&Pe.i>=0&&void 0===Ce.i&&(Ce.i=Pe.i),Le.style("opacity",ke.selectedOpacityFn?ke.selectedOpacityFn(Ce):void 0===Ce.mo?Ie.opacity:Ce.mo),ke.ms2mrc){var at;at="various"===Ce.ms||"various"===Ie.size?3:ke.ms2mrc(Ce.ms),Ce.mrc=at,ke.selectedSizeFn&&(at=Ce.mrc=ke.selectedSizeFn(Ce));var Be=h.symbolNumber(Ce.mx||Ie.symbol)||0;Ce.om=Be%200>=100;var Ne=_e(Ce,Fe),nt=Y(Ce,Fe);Le.attr("d",b(Be,at,Ne,nt))}var mt,Bt,Rt,ct=!1;if(Ce.so)Rt=Qe.outlierwidth,Bt=Qe.outliercolor,mt=Ie.outliercolor;else{var zt=(Qe||{}).width;Rt=(Ce.mlw+1||zt+1||(Ce.trace?(Ce.trace.marker.line||{}).width:0)+1)-1||0,Bt="mlc"in Ce?Ce.mlcc=ke.lineScale(Ce.mlc):I.isArrayOrTypedArray(Qe.color)?u.defaultLine:Qe.color,I.isArrayOrTypedArray(Ie.color)&&(mt=u.defaultLine,ct=!0),mt="mc"in Ce?Ce.mcc=ke.markerScale(Ce.mc):Ie.color||Ie.colors||"rgba(0,0,0,0)",ke.selectedColorFn&&(mt=ke.selectedColorFn(Ce))}if(Ce.om)Le.call(u.stroke,mt).style({"stroke-width":(Rt||1)+"px",fill:"none"});else{Le.style("stroke-width",(Ce.isBlank?0:Rt)+"px");var St=Ie.gradient,Xt=Ce.mgt;Xt?ct=!0:Xt=St&&St.type,I.isArrayOrTypedArray(Xt)&&(Xt=Xt[0],E[Xt]||(Xt=0));var Mt=Ie.pattern,st=Mt&&h.getPatternAttr(Mt.shape,Ce.i,"");if(Xt&&"none"!==Xt){var Se=Ce.mgc;Se?ct=!0:Se=St.color;var pe=Fe.uid;ct&&(pe+="-"+Ce.i),h.gradient(Le,ze,pe,Xt,[[0,Se],[1,mt]],"fill")}else if(st){var ge=!1,Oe=Mt.fgcolor;!Oe&&Pe&&Pe.color&&(Oe=Pe.color,ge=!0);var we=h.getPatternAttr(Oe,Ce.i,Pe&&Pe.color||null),He=h.getPatternAttr(Mt.bgcolor,Ce.i,null),Xe=Mt.fgopacity,ut=h.getPatternAttr(Mt.size,Ce.i,8),Ze=h.getPatternAttr(Mt.solidity,Ce.i,.3);ge=ge||Ce.mcc||I.isArrayOrTypedArray(Mt.shape)||I.isArrayOrTypedArray(Mt.bgcolor)||I.isArrayOrTypedArray(Mt.fgcolor)||I.isArrayOrTypedArray(Mt.size)||I.isArrayOrTypedArray(Mt.solidity);var qe=Fe.uid;ge&&(qe+="-"+Ce.i),h.pattern(Le,"point",ze,qe,st,ut,Ze,Ce.mcc,Mt.fillmode,He,we,Xe)}else I.isArrayOrTypedArray(mt)?u.fill(Le,mt[Ce.i]):u.fill(Le,mt);Rt&&u.stroke(Le,Bt)}},h.makePointStyleFns=function(Ce){var Le={},Fe=Ce.marker;return Le.markerScale=h.tryColorscale(Fe,""),Le.lineScale=h.tryColorscale(Fe,"line"),i.traceIs(Ce,"symbols")&&(Le.ms2mrc=y.isBubble(Ce)?s(Ce):function(){return(Fe.size||6)/2}),Ce.selectedpoints&&I.extendFlat(Le,h.makeSelectedPointStyleFns(Ce)),Le},h.makeSelectedPointStyleFns=function(Ce){var Le={},Fe=Ce.selected||{},ke=Ce.unselected||{},ze=Ce.marker||{},Pe=Fe.marker||{},Ie=ke.marker||{},Qe=ze.opacity,at=Pe.opacity,Be=Ie.opacity,Ne=void 0!==at,nt=void 0!==Be;(I.isArrayOrTypedArray(Qe)||Ne||nt)&&(Le.selectedOpacityFn=function(st){var Se=void 0===st.mo?ze.opacity:st.mo;return st.selected?Ne?at:Se:nt?Be:l*Se});var ct=ze.color,mt=Pe.color,Bt=Ie.color;(mt||Bt)&&(Le.selectedColorFn=function(st){var Se=st.mcc||ct;return st.selected?mt||Se:Bt||Se});var Rt=ze.size,zt=Pe.size,St=Ie.size,Xt=void 0!==zt,Mt=void 0!==St;return i.traceIs(Ce,"symbols")&&(Xt||Mt)&&(Le.selectedSizeFn=function(st){var Se=st.mrc||Rt/2;return st.selected?Xt?zt/2:Se:Mt?St/2:Se}),Le},h.makeSelectedTextStyleFns=function(Ce){var Le={},Fe=Ce.selected||{},ke=Ce.unselected||{},ze=Ce.textfont||{},Pe=Fe.textfont||{},Ie=ke.textfont||{},Qe=ze.color,at=Pe.color,Be=Ie.color;return Le.selectedTextColorFn=function(Ne){var nt=Ne.tc||Qe;return Ne.selected?at||nt:Be||(at?nt:u.addOpacity(nt,l))},Le},h.selectedPointStyle=function(Ce,Le){if(Ce.size()&&Le.selectedpoints){var Fe=h.makeSelectedPointStyleFns(Le),ke=Le.marker||{},ze=[];Fe.selectedOpacityFn&&ze.push(function(Pe,Ie){Pe.style("opacity",Fe.selectedOpacityFn(Ie))}),Fe.selectedColorFn&&ze.push(function(Pe,Ie){u.fill(Pe,Fe.selectedColorFn(Ie))}),Fe.selectedSizeFn&&ze.push(function(Pe,Ie){var Qe=Ie.mx||ke.symbol||0,at=Fe.selectedSizeFn(Ie);Pe.attr("d",b(h.symbolNumber(Qe),at,_e(Ie,Le),Y(Ie,Le))),Ie.mrc2=at}),ze.length&&Ce.each(function(Pe){for(var Ie=M.select(this),Qe=0;Qe<ze.length;Qe++)ze[Qe](Ie,Pe)})}},h.tryColorscale=function(Ce,Le){var Fe=Le?I.nestedProperty(Ce,Le).get():Ce;if(Fe){var ke=Fe.color;if((Fe.colorscale||Fe._colorAx)&&I.isArrayOrTypedArray(ke))return a.makeColorScaleFuncFromTrace(Fe)}return I.identity};var P={start:1,end:-1,middle:0,bottom:1,top:-1};function R(Ce,Le,Fe,ke,ze){var Pe=M.select(Ce.node().parentNode),Ie=-1!==Le.indexOf("top")?"top":-1!==Le.indexOf("bottom")?"bottom":"middle",Qe=-1!==Le.indexOf("left")?"end":-1!==Le.indexOf("right")?"start":"middle",at=ke?ke/.8+1:0,Be=(o.lineCount(Ce)-1)*f+1,Ne=P[Qe]*at,nt=.75*Fe+P[Ie]*at+(P[Ie]-1)*Be*Fe/2;Ce.attr("text-anchor",Qe),ze||Pe.attr("transform",r(Ne,nt))}function F(Ce,Le){var Fe=Ce.ts||Le.textfont.size;return T(Fe)&&Fe>0?Fe:0}h.textPointStyle=function(Ce,Le,Fe){if(Ce.size()){var ke;if(Le.selectedpoints){var ze=h.makeSelectedTextStyleFns(Le);ke=ze.selectedTextColorFn}var Pe=Le.texttemplate,Ie=Fe._fullLayout;Ce.each(function(Qe){var at=M.select(this),Be=Pe?I.extractOption(Qe,Le,"txt","texttemplate"):I.extractOption(Qe,Le,"tx","text");if(Be||0===Be){if(Pe){var Ne=Le._module.formatLabels,nt=Ne?Ne(Qe,Le,Ie):{},ct={};x(ct,Le,Qe.i);var mt=Le._meta||{};Be=I.texttemplateString(Be,nt,Ie._d3locale,ct,Qe,mt)}var Bt=Qe.tp||Le.textposition,Rt=F(Qe,Le),zt=ke?ke(Qe):Qe.tc||Le.textfont.color;at.call(h.font,Qe.tf||Le.textfont.family,Rt,zt).text(Be).call(o.convertToTspans,Fe).call(R,Bt,Rt,Qe.mrc)}else at.remove()})}},h.selectedTextStyle=function(Ce,Le){if(Ce.size()&&Le.selectedpoints){var Fe=h.makeSelectedTextStyleFns(Le);Ce.each(function(ke){var ze=M.select(this),Pe=Fe.selectedTextColorFn(ke),Ie=ke.tp||Le.textposition,Qe=F(ke,Le);u.fill(ze,Pe);var at=i.traceIs(Le,"bar-like");R(ze,Ie,Qe,ke.mrc2||ke.mrc,at)})}};var z,D;function k(Ce,Le,Fe){return Fe&&(Ce=W(Ce)),Le?U(Ce[1]):O(Ce[0])}function O(Ce){var Le=M.round(Ce,2);return z=Le,Le}function U(Ce){var Le=M.round(Ce,2);return D=Le,Le}function H(Ce,Le,Fe,ke){var ze=Ce[0]-Le[0],Pe=Ce[1]-Le[1],Ie=Fe[0]-Le[0],Qe=Fe[1]-Le[1],at=Math.pow(ze*ze+Pe*Pe,.25),Be=Math.pow(Ie*Ie+Qe*Qe,.25),Ne=(Be*Be*ze-at*at*Ie)*ke,nt=(Be*Be*Pe-at*at*Qe)*ke,ct=3*Be*(at+Be),mt=3*at*(at+Be);return[[O(Le[0]+(ct&&Ne/ct)),U(Le[1]+(ct&&nt/ct))],[O(Le[0]-(mt&&Ne/mt)),U(Le[1]-(mt&&nt/mt))]]}h.smoothopen=function(Ce,Le){if(Ce.length<3)return"M"+Ce.join("L");var ze,Fe="M"+Ce[0],ke=[];for(ze=1;ze<Ce.length-1;ze++)ke.push(H(Ce[ze-1],Ce[ze],Ce[ze+1],Le));for(Fe+="Q"+ke[0][0]+" "+Ce[1],ze=2;ze<Ce.length-1;ze++)Fe+="C"+ke[ze-2][1]+" "+ke[ze-1][0]+" "+Ce[ze];return Fe+="Q"+ke[Ce.length-3][1]+" "+Ce[Ce.length-1]},h.smoothclosed=function(Ce,Le){if(Ce.length<3)return"M"+Ce.join("L")+"Z";var Pe,Fe="M"+Ce[0],ke=Ce.length-1,ze=[H(Ce[ke],Ce[0],Ce[1],Le)];for(Pe=1;Pe<ke;Pe++)ze.push(H(Ce[Pe-1],Ce[Pe],Ce[Pe+1],Le));for(ze.push(H(Ce[ke-1],Ce[ke],Ce[0],Le)),Pe=1;Pe<=ke;Pe++)Fe+="C"+ze[Pe-1][1]+" "+ze[Pe][0]+" "+Ce[Pe];return Fe+="C"+ze[ke][1]+" "+ze[0][0]+" "+Ce[0]+"Z"};var j={hv:function(Ce,Le,Fe){return"H"+O(Le[0])+"V"+k(Le,1,Fe)},vh:function(Ce,Le,Fe){return"V"+U(Le[1])+"H"+k(Le,0,Fe)},hvh:function(Ce,Le,Fe){return"H"+O((Ce[0]+Le[0])/2)+"V"+U(Le[1])+"H"+k(Le,0,Fe)},vhv:function(Ce,Le,Fe){return"V"+U((Ce[1]+Le[1])/2)+"H"+O(Le[0])+"V"+k(Le,1,Fe)}},ee=function(Ce,Le,Fe){return"L"+k(Le,0,Fe)+","+k(Le,1,Fe)};function W(Ce,Le){var Fe=Ce.backoff,ke=Ce.trace,ze=Ce.d,Pe=Ce.i;if(Fe&&ke&&ke.marker&&ke.marker.angle%360==0&&ke.line&&"spline"!==ke.line.shape){var Ie=I.isArrayOrTypedArray(Fe),Qe=Ce,at=Le?Le[0]:z||0,Be=Le?Le[1]:D||0,Ne=Qe[0],nt=Qe[1],ct=Ne-at,mt=nt-Be,Bt=Math.atan2(mt,ct),Rt=Ie?Fe[Pe]:Fe;if("auto"===Rt){var zt=Qe.i;"scatter"===ke.type&&zt--;var St=Qe.marker,Xt=St.symbol;I.isArrayOrTypedArray(Xt)&&(Xt=Xt[zt]);var Mt=St.size;I.isArrayOrTypedArray(Mt)&&(Mt=Mt[zt]),Rt=St?h.symbolBackOffs[h.symbolNumber(Xt)]*Mt:0,Rt+=h.getMarkerStandoff(ze[zt],ke)||0}var st=Ne-Rt*Math.cos(Bt),Se=nt-Rt*Math.sin(Bt);(st<=Ne&&st>=at||st>=Ne&&st<=at)&&(Se<=nt&&Se>=Be||Se>=nt&&Se<=Be)&&(Ce=[st,Se])}return Ce}h.steps=function(Ce){var Le=j[Ce]||ee;return function(Fe){for(var ke="M"+O(Fe[0][0])+","+U(Fe[0][1]),ze=Fe.length,Pe=1;Pe<ze;Pe++)ke+=Le(Fe[Pe-1],Fe[Pe],Pe===ze-1);return ke}},h.applyBackoff=W,h.makeTester=function(){var Ce=I.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(Fe){Fe.attr(v.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Le=I.ensureSingle(Ce,"path","js-reference-point",function(Fe){Fe.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});h.tester=Ce,h.testref=Le},h.savedBBoxes={};var B=0;function q(Ce){var Le=Ce.getAttribute("data-unformatted");if(null!==Le)return Le+Ce.getAttribute("data-math")+Ce.getAttribute("text-anchor")+Ce.getAttribute("style")}function oe(Ce,Le){if(!Ce)return null;var Fe=Le._context,ke=Fe._exportedPlot?"":Fe._baseUrl||"";return ke?"url('"+ke+"#"+Ce+"')":"url(#"+Ce+")"}h.bBox=function(Ce,Le,Fe){var ke,Be,Ne;if(Fe||(Fe=q(Ce)),Fe){if(ke=h.savedBBoxes[Fe])return I.extendFlat({},ke)}else if(1===Ce.childNodes.length){var ze=Ce.childNodes[0];if(Fe=q(ze)){var Pe=+ze.getAttribute("x")||0,Ie=+ze.getAttribute("y")||0,Qe=ze.getAttribute("transform");if(!Qe){var at=h.bBox(ze,!1,Fe);return Pe&&(at.left+=Pe,at.right+=Pe),Ie&&(at.top+=Ie,at.bottom+=Ie),at}if(Fe+="~"+Pe+"~"+Ie+"~"+Qe,ke=h.savedBBoxes[Fe])return I.extendFlat({},ke)}}Le?Be=Ce:(Ne=h.tester.node(),Be=Ce.cloneNode(!0),Ne.appendChild(Be)),M.select(Be).attr("transform",null).call(o.positionText,0,0);var nt=Be.getBoundingClientRect(),ct=h.testref.node().getBoundingClientRect();Le||Ne.removeChild(Be);var mt={height:nt.height,width:nt.width,left:nt.left-ct.left,top:nt.top-ct.top,right:nt.right-ct.left,bottom:nt.bottom-ct.top};return B>=1e4&&(h.savedBBoxes={},B=0),Fe&&(h.savedBBoxes[Fe]=mt),B++,I.extendFlat({},mt)},h.setClipUrl=function(Ce,Le,Fe){Ce.attr("clip-path",oe(Le,Fe))},h.getTranslate=function(Ce){var ze=(Ce[Ce.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Pe,Ie,Qe){return[Ie,Qe].join(" ")}).split(" ");return{x:+ze[0]||0,y:+ze[1]||0}},h.setTranslate=function(Ce,Le,Fe){var ze=Ce.attr?"attr":"getAttribute",Pe=Ce.attr?"attr":"setAttribute",Ie=Ce[ze]("transform")||"";return Le=Le||0,Fe=Fe||0,Ie=Ie.replace(/(\btranslate\(.*?\);?)/,"").trim(),Ie=(Ie+=r(Le,Fe)).trim(),Ce[Pe]("transform",Ie),Ie},h.getScale=function(Ce){var ze=(Ce[Ce.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Pe,Ie,Qe){return[Ie,Qe].join(" ")}).split(" ");return{x:+ze[0]||1,y:+ze[1]||1}},h.setScale=function(Ce,Le,Fe){var ze=Ce.attr?"attr":"getAttribute",Pe=Ce.attr?"attr":"setAttribute",Ie=Ce[ze]("transform")||"";return Le=Le||1,Fe=Fe||1,Ie=Ie.replace(/(\bscale\(.*?\);?)/,"").trim(),Ie=(Ie+="scale("+Le+","+Fe+")").trim(),Ce[Pe]("transform",Ie),Ie};var ie=/\s*sc.*/;h.setPointGroupScale=function(Ce,Le,Fe){if(Le=Le||1,Fe=Fe||1,Ce){var ke=1===Le&&1===Fe?"":"scale("+Le+","+Fe+")";Ce.each(function(){var ze=(this.getAttribute("transform")||"").replace(ie,"");ze=(ze+=ke).trim(),this.setAttribute("transform",ze)})}};var V=/translate\([^)]*\)\s*$/;function Y(Ce,Le){var Fe;return Ce&&(Fe=Ce.mf),void 0===Fe&&(Fe=Le.marker&&Le.marker.standoff||0),Le._geo||Le._xA?Fe:-Fe}h.setTextPointsScale=function(Ce,Le,Fe){Ce&&Ce.each(function(){var ke,ze=M.select(this),Pe=ze.select("text");if(Pe.node()){var Ie=parseFloat(Pe.attr("x")||0),Qe=parseFloat(Pe.attr("y")||0),at=(ze.attr("transform")||"").match(V);ke=1===Le&&1===Fe?[]:[r(Ie,Qe),"scale("+Le+","+Fe+")",r(-Ie,-Qe)],at&&ke.push(at),ze.attr("transform",ke.join(""))}})},h.getMarkerStandoff=Y;var re,ne,se,de,be,De,ae=Math.atan2,X=Math.cos,J=Math.sin;function ue(Ce,Le){var Fe=Le[0],ke=Le[1];return[Fe*X(Ce)-ke*J(Ce),Fe*J(Ce)+ke*X(Ce)]}function _e(Ce,Le){var Fe=Ce.ma;void 0===Fe&&((!(Fe=Le.marker.angle)||I.isArrayOrTypedArray(Fe))&&(Fe=0));var ke,ze,Pe=Le.marker.angleref;if("previous"===Pe||"north"===Pe){if(Le._geo){var Ie=Le._geo.project(Ce.lonlat);ke=Ie[0],ze=Ie[1]}else{var Qe=Le._xA,at=Le._yA;if(!Qe||!at)return 90;ke=Qe.c2p(Ce.x),ze=at.c2p(Ce.y)}if(Le._geo){var Rt,Be=Ce.lonlat[0],Ne=Ce.lonlat[1],nt=Le._geo.project([Be,Ne+1e-5]),ct=Le._geo.project([Be+1e-5,Ne]),mt=ae(ct[1]-ze,ct[0]-ke),Bt=ae(nt[1]-ze,nt[0]-ke);if("north"===Pe)Rt=Fe/180*Math.PI;else if("previous"===Pe){var zt=Be/180*Math.PI,St=Ne/180*Math.PI,Xt=re/180*Math.PI,Mt=ne/180*Math.PI,st=Xt-zt,Se=X(Mt)*J(st),pe=J(Mt)*X(St)-X(Mt)*J(St)*X(st);Rt=-ae(Se,pe)-Math.PI,re=Be,ne=Ne}var ge=ue(mt,[X(Rt),0]),Oe=ue(Bt,[J(Rt),0]);Fe=ae(ge[1]+Oe[1],ge[0]+Oe[0])/Math.PI*180,"previous"===Pe&&(De!==Le.uid||Ce.i!==be+1)&&(Fe=null)}if("previous"===Pe&&!Le._geo)if(De===Le.uid&&Ce.i===be+1&&T(ke)&&T(ze)){var we=ke-se,He=ze-de,Xe=Le.line&&Le.line.shape||"",ut=Xe.slice(Xe.length-1);"h"===ut&&(He=0),"v"===ut&&(we=0),Fe+=ae(He,we)/Math.PI*180+90}else Fe=null}return se=ke,de=ze,be=Ce.i,De=Le.uid,Fe}h.getMarkerAngle=_e},90179:($,K,e)=>{"use strict";var o,v,p,f,M=e(72823),I=e(21572).round,t="M0,0Z",T=Math.sqrt(2),n=Math.sqrt(3),i=Math.PI,u=Math.cos,a=Math.sin;function r(y){return null===y}function l(y,s,x){if(!(y&&y%360!=0||s))return x;if(p===y&&f===s&&o===x)return v;function h(_,z){var D=u(_),k=a(_),O=z[0],U=z[1]+(s||0);return[O*D-U*k,O*k+U*D]}p=y,f=s,o=x;for(var g=y/180*i,m=0,d=0,A=M(x),b="",c=0;c<A.length;c++){var S=A[c],w=S[0],E=m,P=d;if("M"===w||"L"===w)m=+S[1],d=+S[2];else if("m"===w||"l"===w)m+=+S[1],d+=+S[2];else if("H"===w)m=+S[1];else if("h"===w)m+=+S[1];else if("V"===w)d=+S[1];else if("v"===w)d+=+S[1];else if("A"===w){m=+S[1],d=+S[2];var R=h(g,[+S[6],+S[7]]);S[6]=R[0],S[7]=R[1],S[3]=+S[3]+y}("H"===w||"V"===w)&&(w="L"),("h"===w||"v"===w)&&(w="l"),("m"===w||"l"===w)&&(m-=E,d-=P);var F=h(g,[m,d]);("H"===w||"V"===w)&&(w="L"),("M"===w||"L"===w||"m"===w||"l"===w)&&(S[1]=F[0],S[2]=F[1]),S[0]=w,b+=S[0]+S.slice(1).join(",")}return v=b,b}$.exports={circle:{n:0,f:function(y,s,x){if(r(s))return t;var h=I(y,2),g="M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z";return x?l(s,x,g):g}},square:{n:1,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z")}},diamond:{n:2,f:function(y,s,x){if(r(s))return t;var h=I(1.3*y,2);return l(s,x,"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"Z")}},cross:{n:3,f:function(y,s,x){if(r(s))return t;var h=I(.4*y,2),g=I(1.2*y,2);return l(s,x,"M"+g+","+h+"H"+h+"V"+g+"H-"+h+"V"+h+"H-"+g+"V-"+h+"H-"+h+"V-"+g+"H"+h+"V-"+h+"H"+g+"Z")}},x:{n:4,f:function(y,s,x){if(r(s))return t;var h=I(.8*y/T,2),g="l"+h+","+h,m="l"+h+",-"+h,d="l-"+h+",-"+h,A="l-"+h+","+h;return l(s,x,"M0,"+h+g+m+d+m+d+A+d+A+g+A+g+"Z")}},"triangle-up":{n:5,f:function(y,s,x){if(r(s))return t;var h=I(2*y/n,2);return l(s,x,"M-"+h+","+I(y/2,2)+"H"+h+"L0,-"+I(y,2)+"Z")}},"triangle-down":{n:6,f:function(y,s,x){if(r(s))return t;var h=I(2*y/n,2);return l(s,x,"M-"+h+",-"+I(y/2,2)+"H"+h+"L0,"+I(y,2)+"Z")}},"triangle-left":{n:7,f:function(y,s,x){if(r(s))return t;var h=I(2*y/n,2);return l(s,x,"M"+I(y/2,2)+",-"+h+"V"+h+"L-"+I(y,2)+",0Z")}},"triangle-right":{n:8,f:function(y,s,x){if(r(s))return t;var h=I(2*y/n,2);return l(s,x,"M-"+I(y/2,2)+",-"+h+"V"+h+"L"+I(y,2)+",0Z")}},"triangle-ne":{n:9,f:function(y,s,x){if(r(s))return t;var h=I(.6*y,2),g=I(1.2*y,2);return l(s,x,"M-"+g+",-"+h+"H"+h+"V"+g+"Z")}},"triangle-se":{n:10,f:function(y,s,x){if(r(s))return t;var h=I(.6*y,2),g=I(1.2*y,2);return l(s,x,"M"+h+",-"+g+"V"+h+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(y,s,x){if(r(s))return t;var h=I(.6*y,2),g=I(1.2*y,2);return l(s,x,"M"+g+","+h+"H-"+h+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(y,s,x){if(r(s))return t;var h=I(.6*y,2),g=I(1.2*y,2);return l(s,x,"M-"+h+","+g+"V-"+h+"H"+g+"Z")}},pentagon:{n:13,f:function(y,s,x){if(r(s))return t;var h=I(.951*y,2),g=I(.588*y,2),m=I(-y,2),d=I(-.309*y,2);return l(s,x,"M"+h+","+d+"L"+g+","+I(.809*y,2)+"H-"+g+"L-"+h+","+d+"L0,"+m+"Z")}},hexagon:{n:14,f:function(y,s,x){if(r(s))return t;var h=I(y,2),g=I(y/2,2),m=I(y*n/2,2);return l(s,x,"M"+m+",-"+g+"V"+g+"L0,"+h+"L-"+m+","+g+"V-"+g+"L0,-"+h+"Z")}},hexagon2:{n:15,f:function(y,s,x){if(r(s))return t;var h=I(y,2),g=I(y/2,2),m=I(y*n/2,2);return l(s,x,"M-"+g+","+m+"H"+g+"L"+h+",0L"+g+",-"+m+"H-"+g+"L-"+h+",0Z")}},octagon:{n:16,f:function(y,s,x){if(r(s))return t;var h=I(.924*y,2),g=I(.383*y,2);return l(s,x,"M-"+g+",-"+h+"H"+g+"L"+h+",-"+g+"V"+g+"L"+g+","+h+"H-"+g+"L-"+h+","+g+"V-"+g+"Z")}},star:{n:17,f:function(y,s,x){if(r(s))return t;var h=1.4*y,g=I(.225*h,2),m=I(.951*h,2),d=I(.363*h,2),A=I(.588*h,2),b=I(-h,2),c=I(-.309*h,2),S=I(.118*h,2),w=I(.809*h,2);return l(s,x,"M"+g+","+c+"H"+m+"L"+d+","+S+"L"+A+","+w+"L0,"+I(.382*h,2)+"L-"+A+","+w+"L-"+d+","+S+"L-"+m+","+c+"H-"+g+"L0,"+b+"Z")}},hexagram:{n:18,f:function(y,s,x){if(r(s))return t;var h=I(.66*y,2),g=I(.38*y,2),m=I(.76*y,2);return l(s,x,"M-"+m+",0l-"+g+",-"+h+"h"+m+"l"+g+",-"+h+"l"+g+","+h+"h"+m+"l-"+g+","+h+"l"+g+","+h+"h-"+m+"l-"+g+","+h+"l-"+g+",-"+h+"h-"+m+"Z")}},"star-triangle-up":{n:19,f:function(y,s,x){if(r(s))return t;var h=I(y*n*.8,2),g=I(.8*y,2),m=I(1.6*y,2),d=I(4*y,2),A="A "+d+","+d+" 0 0 1 ";return l(s,x,"M-"+h+","+g+A+h+","+g+A+"0,-"+m+A+"-"+h+","+g+"Z")}},"star-triangle-down":{n:20,f:function(y,s,x){if(r(s))return t;var h=I(y*n*.8,2),g=I(.8*y,2),m=I(1.6*y,2),d=I(4*y,2),A="A "+d+","+d+" 0 0 1 ";return l(s,x,"M"+h+",-"+g+A+"-"+h+",-"+g+A+"0,"+m+A+h+",-"+g+"Z")}},"star-square":{n:21,f:function(y,s,x){if(r(s))return t;var h=I(1.1*y,2),g=I(2*y,2),m="A "+g+","+g+" 0 0 1 ";return l(s,x,"M-"+h+",-"+h+m+"-"+h+","+h+m+h+","+h+m+h+",-"+h+m+"-"+h+",-"+h+"Z")}},"star-diamond":{n:22,f:function(y,s,x){if(r(s))return t;var h=I(1.4*y,2),g=I(1.9*y,2),m="A "+g+","+g+" 0 0 1 ";return l(s,x,"M-"+h+",0"+m+"0,"+h+m+h+",0"+m+"0,-"+h+m+"-"+h+",0Z")}},"diamond-tall":{n:23,f:function(y,s,x){if(r(s))return t;var h=I(.7*y,2),g=I(1.4*y,2);return l(s,x,"M0,"+g+"L"+h+",0L0,-"+g+"L-"+h+",0Z")}},"diamond-wide":{n:24,f:function(y,s,x){if(r(s))return t;var h=I(1.4*y,2),g=I(.7*y,2);return l(s,x,"M0,"+g+"L"+h+",0L0,-"+g+"L-"+h+",0Z")}},hourglass:{n:25,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M"+h+","+h+"H-"+h+"L"+h+",-"+h+"H-"+h+"Z")},noDot:!0},bowtie:{n:26,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M"+h+","+h+"V-"+h+"L-"+h+","+h+"V-"+h+"Z")},noDot:!0},"circle-cross":{n:27,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(y,s,x){if(r(s))return t;var h=I(y,2),g=I(y/T,2);return l(s,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(y,s,x){if(r(s))return t;var h=I(1.3*y,2);return l(s,x,"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM0,-"+h+"V"+h+"M-"+h+",0H"+h)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(y,s,x){if(r(s))return t;var h=I(1.3*y,2),g=I(.65*y,2);return l(s,x,"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(y,s,x){if(r(s))return t;var h=I(1.4*y,2);return l(s,x,"M0,"+h+"V-"+h+"M"+h+",0H-"+h)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(y,s,x){if(r(s))return t;var h=I(1.2*y,2),g=I(.85*y,2);return l(s,x,"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(y,s,x){if(r(s))return t;var h=I(y/2,2),g=I(y,2);return l(s,x,"M"+h+","+g+"V-"+g+"M"+(h-g)+",-"+g+"V"+g+"M"+g+","+h+"H-"+g+"M-"+g+","+(h-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(y,s,x){if(r(s))return t;var h=I(1.2*y,2),g=I(1.6*y,2),m=I(.8*y,2);return l(s,x,"M-"+h+","+m+"L0,0M"+h+","+m+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(y,s,x){if(r(s))return t;var h=I(1.2*y,2),g=I(1.6*y,2),m=I(.8*y,2);return l(s,x,"M-"+h+",-"+m+"L0,0M"+h+",-"+m+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(y,s,x){if(r(s))return t;var h=I(1.2*y,2),g=I(1.6*y,2),m=I(.8*y,2);return l(s,x,"M"+m+","+h+"L0,0M"+m+",-"+h+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(y,s,x){if(r(s))return t;var h=I(1.2*y,2),g=I(1.6*y,2),m=I(.8*y,2);return l(s,x,"M-"+m+","+h+"L0,0M-"+m+",-"+h+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(y,s,x){if(r(s))return t;var h=I(1.4*y,2);return l(s,x,"M"+h+",0H-"+h)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(y,s,x){if(r(s))return t;var h=I(1.4*y,2);return l(s,x,"M0,"+h+"V-"+h)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M"+h+",-"+h+"L-"+h+","+h)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M"+h+","+h+"L-"+h+",-"+h)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M0,0L-"+h+","+I(2*y,2)+"H"+h+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M0,0L-"+h+",-"+I(2*y,2)+"H"+h+"Z")},noDot:!0},"arrow-left":{n:47,f:function(y,s,x){if(r(s))return t;var h=I(2*y,2),g=I(y,2);return l(s,x,"M0,0L"+h+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(y,s,x){if(r(s))return t;var h=I(2*y,2),g=I(y,2);return l(s,x,"M0,0L-"+h+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M-"+h+",0H"+h+"M0,0L-"+h+","+I(2*y,2)+"H"+h+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(y,s,x){if(r(s))return t;var h=I(y,2);return l(s,x,"M-"+h+",0H"+h+"M0,0L-"+h+",-"+I(2*y,2)+"H"+h+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(y,s,x){if(r(s))return t;var h=I(2*y,2),g=I(y,2);return l(s,x,"M0,-"+g+"V"+g+"M0,0L"+h+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(y,s,x){if(r(s))return t;var h=I(2*y,2),g=I(y,2);return l(s,x,"M0,-"+g+"V"+g+"M0,0L-"+h+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(y,s,x){if(r(s))return t;var h=i/2.5,g=2*y*u(h),m=2*y*a(h);return l(s,x,"M0,0L"+-g+","+m+"L"+g+","+m+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(y,s,x){if(r(s))return t;var h=i/4,g=2*y*u(h),m=2*y*a(h);return l(s,x,"M0,0L"+-g+","+m+"A "+2*y+","+2*y+" 0 0 1 "+g+","+m+"Z")},backoff:.4,noDot:!0}}},7461:$=>{"use strict";$.exports={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}}},91866:($,K,e)=>{"use strict";var M=e(7347),I=e(97799),t=e(91464),T=e(5228),n=e(54899);function i(u,a,r,o){var v=a["error_"+o]||{},f=[];if(v.visible&&-1!==["linear","log"].indexOf(r.type)){for(var l=n(v),y=0;y<u.length;y++){var s=u[y],x=s.i;if(void 0===x)x=y;else if(null===x)continue;var h=s[o];if(M(r.c2l(h))){var g=l(h,x);if(M(g[0])&&M(g[1])){var m=s[o+"s"]=h-g[0],d=s[o+"h"]=h+g[1];f.push(m,d)}}}var A=r._id,b=a._extremes[A],c=t.findExtremes(r,f,T.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(c.min),b.max=b.max.concat(c.max)}}$.exports=function(a){for(var r=a.calcdata,o=0;o<r.length;o++){var v=r[o],p=v[0].trace;if(!0===p.visible&&I.traceIs(p,"errorBarsOK")){var f=t.getFromId(a,p.xaxis),l=t.getFromId(a,p.yaxis);i(v,p,f,"x"),i(v,p,l,"y")}}}},54899:$=>{"use strict";function K(e,M){return"percent"===e?function(I){return Math.abs(I*M/100)}:"constant"===e?function(){return Math.abs(M)}:"sqrt"===e?function(I){return Math.sqrt(Math.abs(I))}:void 0}$.exports=function(M){var I=M.type,t=M.symmetric;if("data"===I){var T=M.array||[];if(t)return function(r,o){var v=+T[o];return[v,v]};var n=M.arrayminus||[];return function(r,o){var v=+T[o],p=+n[o];return isNaN(v)&&isNaN(p)?[NaN,NaN]:[p||0,v||0]}}var i=K(I,M.value),u=K(I,M.valueminus);return t||void 0===M.valueminus?function(r){var o=i(r);return[o,o]}:function(r){return[u(r),i(r)]}}},54975:($,K,e)=>{"use strict";var M=e(7347),I=e(97799),t=e(5228),T=e(96906),n=e(7461);$.exports=function(i,u,a,r){var o="error_"+r.axis,v=T.newContainer(u,o),p=i[o]||{};function f(m,d){return t.coerce(p,v,n,m,d)}if(!1!==f("visible",void 0!==p.array||void 0!==p.value||"sqrt"===p.type)){var s=f("type","array"in p?"data":"percent"),x=!0;"sqrt"!==s&&(x=f("symmetric",!(("data"===s?"arrayminus":"valueminus")in p))),"data"===s?(f("array"),f("traceref"),x||(f("arrayminus"),f("tracerefminus"))):("percent"===s||"constant"===s)&&(f("value"),x||f("valueminus"));var h="copy_"+r.inherit+"style";if(r.inherit)(u["error_"+r.inherit]||{}).visible&&f(h,!(p.color||M(p.thickness)||M(p.width)));(!r.inherit||!v[h])&&(f("color",a),f("thickness"),f("width",I.traceIs(u,"gl3d")?0:4))}}},63849:($,K,e)=>{"use strict";var M=e(5228),I=e(71859).overrideAll,t=e(7461),T={error_x:M.extendFlat({},t),error_y:M.extendFlat({},t)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var n={error_x:M.extendFlat({},t),error_y:M.extendFlat({},t),error_z:M.extendFlat({},t)};delete n.error_x.copy_ystyle,delete n.error_y.copy_ystyle,delete n.error_z.copy_ystyle,delete n.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:I(n,"calc","nested"),scattergl:I(T,"calc","nested")}},supplyDefaults:e(54975),calc:e(91866),makeComputeError:e(54899),plot:e(34836),style:e(77371),hoverInfo:function i(u,a,r){(a.error_y||{}).visible&&(r.yerr=u.yh-u.y,a.error_y.symmetric||(r.yerrneg=u.y-u.ys)),(a.error_x||{}).visible&&(r.xerr=u.xh-u.x,a.error_x.symmetric||(r.xerrneg=u.x-u.xs))}}},34836:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(27630),T=e(49258);$.exports=function(u,a,r,o){var p=r.xaxis,f=r.yaxis,l=o&&o.duration>0,y=u._context.staticPlot;a.each(function(s){var m,x=s[0].trace,h=x.error_x||{},g=x.error_y||{};x.ids&&(m=function(c){return c.id});var d=T.hasMarkers(x)&&x.marker.maxdisplayed>0;!g.visible&&!h.visible&&(s=[]);var A=M.select(this).selectAll("g.errorbar").data(s,m);if(A.exit().remove(),s.length){h.visible||A.selectAll("path.xerror").remove(),g.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var b=A.enter().append("g").classed("errorbar",!0);l&&b.style("opacity",0).transition().duration(o.duration).style("opacity",1),t.setClipUrl(A,r.layerClipId,u),A.each(function(c){var S=M.select(this),w=function n(i,u,a){var r={x:u.c2p(i.x),y:a.c2p(i.y)};return void 0!==i.yh&&(r.yh=a.c2p(i.yh),r.ys=a.c2p(i.ys),I(r.ys)||(r.noYS=!0,r.ys=a.c2p(i.ys,!0))),void 0!==i.xh&&(r.xh=u.c2p(i.xh),r.xs=u.c2p(i.xs),I(r.xs)||(r.noXS=!0,r.xs=u.c2p(i.xs,!0))),r}(c,p,f);if(!d||c.vis){var E,P=S.select("path.yerror");if(g.visible&&I(w.x)&&I(w.yh)&&I(w.ys)){var R=g.width;E="M"+(w.x-R)+","+w.yh+"h"+2*R+"m-"+R+",0V"+w.ys,w.noYS||(E+="m-"+R+",0h"+2*R),!P.size()?P=S.append("path").style("vector-effect",y?"none":"non-scaling-stroke").classed("yerror",!0):l&&(P=P.transition().duration(o.duration).ease(o.easing)),P.attr("d",E)}else P.remove();var F=S.select("path.xerror");if(h.visible&&I(w.y)&&I(w.xh)&&I(w.xs)){var _=(h.copy_ystyle?g:h).width;E="M"+w.xh+","+(w.y-_)+"v"+2*_+"m0,-"+_+"H"+w.xs,w.noXS||(E+="m0,-"+_+"v"+2*_),!F.size()?F=S.append("path").style("vector-effect",y?"none":"non-scaling-stroke").classed("xerror",!0):l&&(F=F.transition().duration(o.duration).ease(o.easing)),F.attr("d",E)}else F.remove()}})}})}},77371:($,K,e)=>{"use strict";var M=e(21572),I=e(8416);$.exports=function(T){T.each(function(n){var i=n[0].trace,u=i.error_y||{},a=i.error_x||{},r=M.select(this);r.selectAll("path.yerror").style("stroke-width",u.thickness+"px").call(I.stroke,u.color),a.copy_ystyle&&(a=u),r.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(I.stroke,a.color)})}},44777:($,K,e)=>{"use strict";var M=e(47297),I=e(82815).hoverlabel,t=e(18836).extendFlat;$.exports={hoverlabel:{bgcolor:t({},I.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:t({},I.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:M({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:t({},I.align,{arrayOk:!0}),namelength:t({},I.namelength,{arrayOk:!0}),editType:"none"}}},16299:($,K,e)=>{"use strict";var M=e(5228),I=e(97799);function t(T,n,i,u){u=u||M.identity,Array.isArray(T)&&(n[0][i]=u(T))}$.exports=function(n){var i=n.calcdata,u=n._fullLayout;function a(f){return function(l){return M.coerceHoverinfo({hoverinfo:l},{_module:f._module},u)}}for(var r=0;r<i.length;r++){var o=i[r],v=o[0].trace;if(!I.traceIs(v,"pie-like")){var p=I.traceIs(v,"2dMap")?t:M.fillArray;p(v.hoverinfo,o,"hi",a(v)),v.hovertemplate&&p(v.hovertemplate,o,"ht"),v.hoverlabel&&(p(v.hoverlabel.bgcolor,o,"hbg"),p(v.hoverlabel.bordercolor,o,"hbc"),p(v.hoverlabel.font.size,o,"hts"),p(v.hoverlabel.font.color,o,"htc"),p(v.hoverlabel.font.family,o,"htf"),p(v.hoverlabel.namelength,o,"hnl"),p(v.hoverlabel.align,o,"hta"))}}}},47138:($,K,e)=>{"use strict";var M=e(97799),I=e(8237).hover;$.exports=function(T,n,i){var u=M.getComponentMethod("annotations","onClick")(T,T._hoverdata);function a(){T.emit("plotly_click",{points:T._hoverdata,event:n})}void 0!==i&&I(T,n,i,!0),T._hoverdata&&n&&n.target&&(u&&u.then?u.then(a):a(),n.stopImmediatePropagation&&n.stopImmediatePropagation())}},53041:$=>{"use strict";$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},93519:($,K,e)=>{"use strict";var M=e(5228),I=e(44777),t=e(62362);$.exports=function(n,i,u,a){var o=M.extendFlat({},a.hoverlabel);i.hovertemplate&&(o.namelength=-1),t(n,i,function r(v,p){return M.coerce(n,i,I,v,p)},o)}},40235:($,K,e)=>{"use strict";var M=e(5228);K.getSubplot=function(u){return u.subplot||u.xaxis+u.yaxis||u.geo},K.isTraceInSubplots=function(u,a){if("splom"===u.type){for(var r=u.xaxes||[],o=u.yaxes||[],v=0;v<r.length;v++)for(var p=0;p<o.length;p++)if(-1!==a.indexOf(r[v]+o[p]))return!0;return!1}return-1!==a.indexOf(K.getSubplot(u))},K.flat=function(u,a){for(var r=new Array(u.length),o=0;o<u.length;o++)r[o]=a;return r},K.p2c=function(u,a){for(var r=new Array(u.length),o=0;o<u.length;o++)r[o]=u[o].p2c(a);return r},K.getDistanceFunction=function(u,a,r,o){return"closest"===u?o||K.quadrature(a,r):"x"===u.charAt(0)?a:r},K.getClosest=function(u,a,r){if(!1!==r.index)r.index>=0&&r.index<u.length?r.distance=0:r.index=!1;else for(var o=0;o<u.length;o++){var v=a(u[o]);v<=r.distance&&(r.index=o,r.distance=v)}return r},K.inbox=function(u,a,r){return u*a<0||0===u?r:1/0},K.quadrature=function(u,a){return function(r){var o=u(r),v=a(r);return Math.sqrt(o*o+v*v)}},K.makeEventData=function(u,a,r){var o="index"in u?u.index:u.pointNumber,v={data:a._input,fullData:a,curveNumber:a.index,pointNumber:o};if(a._indexToPoints){var p=a._indexToPoints[o];1===p.length?v.pointIndex=p[0]:v.pointIndices=p}else v.pointIndex=o;return a._module.eventData?v=a._module.eventData(v,u,a,r,o):("xVal"in u?v.x=u.xVal:"x"in u&&(v.x=u.x),"yVal"in u?v.y=u.yVal:"y"in u&&(v.y=u.y),u.xa&&(v.xaxis=u.xa),u.ya&&(v.yaxis=u.ya),void 0!==u.zLabelVal&&(v.z=u.zLabelVal)),K.appendArrayPointValue(v,a,o),v},K.appendArrayPointValue=function(u,a,r){var o=a._arrayAttrs;if(o)for(var v=0;v<o.length;v++){var p=o[v],f=t(p);if(void 0===u[f]){var y=T(M.nestedProperty(a,p).get(),r);void 0!==y&&(u[f]=y)}}},K.appendArrayMultiPointValues=function(u,a,r){var o=a._arrayAttrs;if(o)for(var v=0;v<o.length;v++){var p=o[v],f=t(p);if(void 0===u[f]){for(var l=M.nestedProperty(a,p).get(),y=new Array(r.length),s=0;s<r.length;s++)y[s]=T(l,r[s]);u[f]=y}}};var I={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function t(u){return I[u]||u}function T(u,a){return Array.isArray(a)?Array.isArray(u)&&Array.isArray(u[a[0]])?u[a[0]][a[1]]:void 0:u[a]}var n={x:!0,y:!0},i={"x unified":!0,"y unified":!0};K.isUnifiedHover=function(u){return"string"==typeof u&&!!i[u]},K.isXYhover=function(u){return"string"==typeof u&&!!n[u]}},8237:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(80791),T=e(5228),n=T.strTranslate,i=T.strRotate,u=e(70074),a=e(88565),r=e(82826),o=e(27630),v=e(8416),p=e(25429),f=e(91464),l=e(97799),y=e(40235),s=e(53041),x=e(6310),h=e(78802),g=s.YANGLE,m=Math.PI*g/180,d=1/Math.sin(m),A=Math.cos(m),b=Math.sin(m),c=s.HOVERARROWSIZE,S=s.HOVERTEXTPAD,w={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function R(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}K.hover=function(ae,X,J,ue){ae=T.getGraphDiv(ae);var re=X.target;T.throttle(ae._fullLayout._uid+s.HOVERID,s.HOVERMINTIME,function(){!function P(Y,ae,X,J,ue){X||(X="xy");var re=Array.isArray(X)?X:[X],ne=Y._fullLayout,se=ne._plots||[],de=se[X],be=ne._has("cartesian");if(de){var De=de.overlays.map(function(vr){return vr.id});re=re.concat(De)}for(var _e=re.length,Ce=new Array(_e),Le=new Array(_e),Fe=!1,ke=0;ke<_e;ke++){var ze=re[ke];if(se[ze])Fe=!0,Ce[ke]=se[ze].xaxis,Le[ke]=se[ze].yaxis;else{if(!ne[ze]||!ne[ze]._subplot)return void T.warn("Unrecognized subplot: "+ze);var Pe=ne[ze]._subplot;Ce[ke]=Pe.xaxis,Le[ke]=Pe.yaxis}}var Ie=ae.hovermode||ne.hovermode;if(Ie&&!Fe&&(Ie="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Ie)||!Y.calcdata||Y.querySelector(".zoombox")||Y._dragging)return p.unhoverRaw(Y,ae);var Qe=ne.hoverdistance;-1===Qe&&(Qe=1/0);var at=ne.spikedistance;-1===at&&(at=1/0);var nt,ct,mt,Bt,Rt,zt,St,Xt,Mt,st,Se,pe,ge,Be=[],Ne=[],Oe={hLinePoint:null,vLinePoint:null},we=!1;if(Array.isArray(ae))for(Ie="array",mt=0;mt<ae.length;mt++)(Rt=Y.calcdata[ae[mt].curveNumber||0])&&(zt=Rt[0].trace,"skip"!==Rt[0].trace.hoverinfo&&(Ne.push(Rt),"h"===zt.orientation&&(we=!0)));else{for(Bt=0;Bt<Y.calcdata.length;Bt++)Rt=Y.calcdata[Bt],"skip"!==(zt=Rt[0].trace).hoverinfo&&y.isTraceInSubplots(zt,re)&&(Ne.push(Rt),"h"===zt.orientation&&(we=!0));var Xe,ut;if(!ue)Xe="xpx"in ae?ae.xpx:Ce[0]._length/2,ut="ypx"in ae?ae.ypx:Le[0]._length/2;else{if(!1===u.triggerHandler(Y,"plotly_beforehover",ae))return;var Ze=ue.getBoundingClientRect();Xe=ae.clientX-Ze.left,ut=ae.clientY-Ze.top,ne._calcInverseTransform(Y);var qe=T.apply3DTransform(ne._invTransform)(Xe,ut);if(Xe=qe[0],ut=qe[1],Xe<0||Xe>Ce[0]._length||ut<0||ut>Le[0]._length)return p.unhoverRaw(Y,ae)}if(ae.pointerX=Xe+Ce[0]._offset,ae.pointerY=ut+Le[0]._offset,nt="xval"in ae?y.flat(re,ae.xval):y.p2c(Ce,Xe),ct="yval"in ae?y.flat(re,ae.yval):y.p2c(Le,ut),!I(nt[0])||!I(ct[0]))return T.warn("Fx.hover failed",ae,Y),p.unhoverRaw(Y,ae)}var Dt=1/0;function Ft(vr,nn){for(Bt=0;Bt<Ne.length;Bt++)if((Rt=Ne[Bt])&&Rt[0]&&Rt[0].trace&&(!0===(zt=Rt[0].trace).visible&&0!==zt._length&&-1===["carpet","contourcarpet"].indexOf(zt._module.name))){if("splom"===zt.type?St=re[Xt=0]:(St=y.getSubplot(zt),Xt=re.indexOf(St)),Mt=Ie,y.isUnifiedHover(Mt)&&(Mt=Mt.charAt(0)),pe={cd:Rt,trace:zt,xa:Ce[Xt],ya:Le[Xt],maxHoverDistance:Qe,maxSpikeDistance:at,index:!1,distance:Math.min(Dt,Qe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:v.defaultLine,name:zt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ne[St]&&(pe.subplot=ne[St]._subplot),ne._splomScenes&&ne._splomScenes[zt.uid]&&(pe.scene=ne._splomScenes[zt.uid]),ge=Be.length,"array"===Mt){var Or=ae[Bt];"pointNumber"in Or?(pe.index=Or.pointNumber,Mt="closest"):(Mt="","xval"in Or&&(st=Or.xval,Mt="x"),"yval"in Or&&(Se=Or.yval,Mt=Mt?"closest":"y"))}else void 0!==vr&&void 0!==nn?(st=vr,Se=nn):(st=nt[Xt],Se=ct[Xt]);if(0!==Qe)if(zt._module&&zt._module.hoverPoints){var Xn=zt._module.hoverPoints(pe,st,Se,Mt,{finiteRange:!0,hoverLayer:ne._hoverlayer});if(Xn)for(var Vr,wn=0;wn<Xn.length;wn++)Vr=Xn[wn],I(Vr.x0)&&I(Vr.y0)&&Be.push(H(Vr,Ie))}else T.log("Unrecognized trace type in hover:",zt);if("closest"===Ie&&Be.length>ge&&(Be.splice(0,ge),Dt=Be[0].distance),be&&0!==at&&0===Be.length){pe.distance=at,pe.index=!1;var Ca=zt._module.hoverPoints(pe,st,Se,"closest",{hoverLayer:ne._hoverlayer});if(Ca&&(Ca=Ca.filter(function(Na){return Na.spikeDistance<=at})),Ca&&Ca.length){var Ba,Ka=Ca.filter(function(Na){return Na.xa.showspikes&&"hovered data"!==Na.xa.spikesnap});if(Ka.length){var Ja=Ka[0];I(Ja.x0)&&I(Ja.y0)&&(Ba=Pt(Ja),(!Oe.vLinePoint||Oe.vLinePoint.spikeDistance>Ba.spikeDistance)&&(Oe.vLinePoint=Ba))}var si=Ca.filter(function(Na){return Na.ya.showspikes&&"hovered data"!==Na.ya.spikesnap});if(si.length){var Ra=si[0];I(Ra.x0)&&I(Ra.y0)&&(Ba=Pt(Ra),(!Oe.hLinePoint||Oe.hLinePoint.spikeDistance>Ba.spikeDistance)&&(Oe.hLinePoint=Ba))}}}}}function bt(vr,nn,Or){for(var wn,Xn=null,Vr=1/0,Ca=0;Ca<vr.length;Ca++)wn=vr[Ca].spikeDistance,Or&&0===Ca&&(wn=-1/0),wn<=Vr&&wn<=nn&&(Xn=vr[Ca],Vr=wn);return Xn}function Pt(vr){return vr?{xa:vr.xa,ya:vr.ya,x:void 0!==vr.xSpike?vr.xSpike:(vr.x0+vr.x1)/2,y:void 0!==vr.ySpike?vr.ySpike:(vr.y0+vr.y1)/2,distance:vr.distance,spikeDistance:vr.spikeDistance,curveNumber:vr.trace.index,color:vr.color,pointNumber:vr.index}:null}Ft();var cr={fullLayout:ne,container:ne._hoverlayer,event:ae},Sr=Y._spikepoints,Kr={vLinePoint:Oe.vLinePoint,hLinePoint:Oe.hLinePoint};Y._spikepoints=Kr;var It=function(){Be.sort(function(vr,nn){return vr.distance-nn.distance}),Be=function te(Y,ae){for(var X=ae.charAt(0),J=[],ue=[],re=[],ne=0;ne<Y.length;ne++){var se=Y[ne];l.traceIs(se.trace,"bar-like")||l.traceIs(se.trace,"box-violin")?re.push(se):se.trace[X+"period"]?ue.push(se):J.push(se)}return J.concat(ue).concat(re)}(Be,Ie)};It();var $t=Ie.charAt(0),kr=("x"===$t||"y"===$t)&&Be[0]&&E[Be[0].trace.type];if(be&&0!==at&&0!==Be.length){var rt=bt(Be.filter(function(vr){return vr.ya.showspikes}),at,kr);Oe.hLinePoint=Pt(rt);var ht=bt(Be.filter(function(vr){return vr.xa.showspikes}),at,kr);Oe.vLinePoint=Pt(ht)}if(0===Be.length){var gt=p.unhoverRaw(Y,ae);return be&&(null!==Oe.hLinePoint||null!==Oe.vLinePoint)&&W(Sr)&&j(Y,Oe,cr),gt}if(be&&W(Sr)&&j(Y,Oe,cr),y.isXYhover(Mt)&&0!==Be[0].length&&"splom"!==Be[0].trace.type){var ft=Be[0],Ct=(Be=w[ft.trace.type]?Be.filter(function(vr){return vr.trace.index===ft.trace.index}):[ft]).length;Ft(q("x",ft,ne),q("y",ft,ne));var Ke,Cr=[],Hr={},zr=0,Wr=function(vr){var nn=w[vr.trace.type]?R(vr):vr.trace.index;if(Hr[nn]){var Or=Hr[nn]-1,Xn=Cr[Or];Or>0&&Math.abs(vr.distance)<Math.abs(Xn.distance)&&(Cr[Or]=vr)}else zr++,Hr[nn]=zr,Cr.push(vr)};for(Ke=0;Ke<Ct;Ke++)Wr(Be[Ke]);for(Ke=Be.length-1;Ke>Ct-1;Ke--)Wr(Be[Ke]);Be=Cr,It()}var We=Y._hoverdata,Jt=[],Gt=oe(Y),hr=ie(Y);for(mt=0;mt<Be.length;mt++){var br=Be[mt],Ut=y.makeEventData(br,br.trace,br.cd);if(!1!==br.hovertemplate){var Kt=!1;br.cd[br.index]&&br.cd[br.index].ht&&(Kt=br.cd[br.index].ht),br.hovertemplate=Kt||br.trace.hovertemplate||!1}if(br.xa&&br.ya){var wt=br.x0+br.xa._offset,xr=br.x1+br.xa._offset,Ir=br.y0+br.ya._offset,Ur=br.y1+br.ya._offset,qt=Math.min(wt,xr),on=Math.max(wt,xr),an=Math.min(Ir,Ur),hn=Math.max(Ir,Ur);Ut.bbox={x0:qt+hr,x1:on+hr,y0:an+Gt,y1:hn+Gt}}br.eventData=[Ut],Jt.push(Ut)}Y._hoverdata=Jt;var An="y"===Ie&&(Ne.length>1||Be.length>1)||"closest"===Ie&&we&&Be.length>1,Sn=v.combine(ne.plot_bgcolor||v.background,ne.paper_bgcolor),sa=_(Be,{gd:Y,hovermode:Ie,rotateLabels:An,bgColor:Sn,container:ne._hoverlayer,outerContainer:ne._paper.node(),commonLabelOpts:ne.hoverlabel,hoverdistance:ne.hoverdistance}),Rn=sa.hoverLabels;if(y.isUnifiedHover(Ie)||(function D(Y,ae,X,J){var Pe,Ie,Qe,at,Be,Ne,nt,ue=ae?"xa":"ya",re=ae?"ya":"xa",ne=0,se=1,de=Y.size(),be=new Array(de),De=0,_e=J.minX,Ce=J.maxX,Le=J.minY,Fe=J.maxY,ke=function(st){return st*X._invScaleX},ze=function(st){return st*X._invScaleY};function ct(st){var Se=st[0],pe=st[st.length-1];if(Ie=Se.pmin-Se.pos-Se.dp+Se.size,Qe=pe.pos+pe.dp+pe.size-Se.pmax,Ie>.01){for(Be=st.length-1;Be>=0;Be--)st[Be].dp+=Ie;Pe=!1}if(!(Qe<.01)){if(Ie<-.01){for(Be=st.length-1;Be>=0;Be--)st[Be].dp-=Qe;Pe=!1}if(Pe){var ge=0;for(at=0;at<st.length;at++)(Ne=st[at]).pos+Ne.dp+Ne.size>Se.pmax&&ge++;for(at=st.length-1;at>=0&&!(ge<=0);at--)(Ne=st[at]).pos>Se.pmax-1&&(Ne.del=!0,ge--);for(at=0;at<st.length&&!(ge<=0);at++)if((Ne=st[at]).pos<Se.pmin+1)for(Ne.del=!0,ge--,Qe=2*Ne.size,Be=st.length-1;Be>=0;Be--)st[Be].dp-=Qe;for(at=st.length-1;at>=0&&!(ge<=0);at--)(Ne=st[at]).pos+Ne.dp+Ne.size>Se.pmax&&(Ne.del=!0,ge--)}}}for(Y.each(function(st){var Se=st[ue],pe=st[re],ge="x"===Se._id.charAt(0),Oe=Se.range;0===De&&Oe&&Oe[0]>Oe[1]!==ge&&(se=-1);var we=0,He=ge?X.width:X.height;if("x"===X.hovermode||"y"===X.hovermode){var qe,Dt,Xe=k(st,ae),ut=st.anchor,Ze="end"===ut?-1:1;if("middle"===ut)Dt=(qe=st.crossPos+(ge?ze(Xe.y-st.by/2):ke(st.bx/2+st.tx2width/2)))+(ge?ze(st.by):ke(st.bx));else if(ge)Dt=(qe=st.crossPos+ze(c+Xe.y)-ze(st.by/2-c))+ze(st.by);else{var Ft=ke(Ze*c+Xe.x),bt=Ft+ke(Ze*st.bx);qe=st.crossPos+Math.min(Ft,bt),Dt=st.crossPos+Math.max(Ft,bt)}ge?void 0!==Le&&void 0!==Fe&&Math.min(Dt,Fe)-Math.max(qe,Le)>1&&("left"===pe.side?(we=pe._mainLinePosition,He=X.width):He=pe._mainLinePosition):void 0!==_e&&void 0!==Ce&&Math.min(Dt,Ce)-Math.max(qe,_e)>1&&("top"===pe.side?(we=pe._mainLinePosition,He=X.height):He=pe._mainLinePosition)}be[De++]=[{datum:st,traceIndex:st.trace.index,dp:0,pos:st.pos,posref:st.posref,size:st.by*(ge?d:1)/2,pmin:we,pmax:He}]}),be.sort(function(st,Se){return st[0].posref-Se[0].posref||se*(Se[0].traceIndex-st[0].traceIndex)});!Pe&&ne<=de;){for(ne++,Pe=!0,at=0;at<be.length-1;){var mt=be[at],Bt=be[at+1],Rt=mt[mt.length-1],zt=Bt[0];if((Ie=Rt.pos+Rt.dp+Rt.size-zt.pos-zt.dp+zt.size)>.01&&Rt.pmin===zt.pmin&&Rt.pmax===zt.pmax){for(Be=Bt.length-1;Be>=0;Be--)Bt[Be].dp+=Ie;for(mt.push.apply(mt,Bt),be.splice(at+1,1),nt=0,Be=mt.length-1;Be>=0;Be--)nt+=mt[Be].dp;for(Qe=nt/mt.length,Be=mt.length-1;Be>=0;Be--)mt[Be].dp-=Qe;Pe=!1}else at++}be.forEach(ct)}for(at=be.length-1;at>=0;at--){var St=be[at];for(Be=St.length-1;Be>=0;Be--){var Xt=St[Be],Mt=Xt.datum;Mt.offset=Xt.dp,Mt.del=Xt.del}}}(Rn,An,ne,sa.commonLabelBoundingBox),U(Rn,An,ne._invScaleX,ne._invScaleY)),ue&&ue.tagName){var Yr=l.getComponentMethod("annotations","hasClickToShow")(Y,Jt);r(M.select(ue),Yr?"pointer":"")}!ue||J||!function ee(Y,ae,X){if(!X||X.length!==Y._hoverdata.length)return!0;for(var J=X.length-1;J>=0;J--){var ue=X[J],re=Y._hoverdata[J];if(ue.curveNumber!==re.curveNumber||String(ue.pointNumber)!==String(re.pointNumber)||String(ue.pointNumbers)!==String(re.pointNumbers))return!0}return!1}(Y,0,We)||(We&&Y.emit("plotly_unhover",{event:ae,points:We}),Y.emit("plotly_hover",{event:ae,points:Y._hoverdata,xaxes:Ce,yaxes:Le,xvals:nt,yvals:ct}))}(ae,X,J,ue,re)})},K.loneHover=function(ae,X){var J=!0;Array.isArray(ae)||(J=!1,ae=[ae]);var ue=X.gd,re=oe(ue),ne=ie(ue),De=_(ae.map(function(ze){var Pe=ze._x0||ze.x0||ze.x||0,Ie=ze._x1||ze.x1||ze.x||0,Qe=ze._y0||ze.y0||ze.y||0,at=ze._y1||ze.y1||ze.y||0,Be=ze.eventData;if(Be){var Ne=Math.min(Pe,Ie),nt=Math.max(Pe,Ie),ct=Math.min(Qe,at),mt=Math.max(Qe,at),Bt=ze.trace;if(l.traceIs(Bt,"gl3d")){var Rt=ue._fullLayout[Bt.scene]._scene.container,zt=Rt.offsetLeft,St=Rt.offsetTop;Ne+=zt,nt+=zt,ct+=St,mt+=St}Be.bbox={x0:Ne+ne,x1:nt+ne,y0:ct+re,y1:mt+re},X.inOut_bbox&&X.inOut_bbox.push(Be.bbox)}else Be=!1;return{color:ze.color||v.defaultLine,x0:ze.x0||ze.x||0,x1:ze.x1||ze.x||0,y0:ze.y0||ze.y||0,y1:ze.y1||ze.y||0,xLabel:ze.xLabel,yLabel:ze.yLabel,zLabel:ze.zLabel,text:ze.text,name:ze.name,idealAlign:ze.idealAlign,borderColor:ze.borderColor,fontFamily:ze.fontFamily,fontSize:ze.fontSize,fontColor:ze.fontColor,nameLength:ze.nameLength,textAlign:ze.textAlign,trace:ze.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ze.hovertemplate||!1,hovertemplateLabels:ze.hovertemplateLabels||!1,eventData:Be}}),{gd:ue,hovermode:"closest",rotateLabels:false,bgColor:X.bgColor||v.background,container:M.select(X.container),outerContainer:X.outerContainer||X.container}).hoverLabels,Ce=0,Le=0;return De.sort(function(ze,Pe){return ze.y0-Pe.y0}).each(function(ze,Pe){var Ie=ze.y0-ze.by/2;ze.offset=Ie-5<Ce?Ce-Ie+5:0,Ce=Ie+ze.by+ze.offset,Pe===X.anchorIndex&&(Le=ze.offset)}).each(function(ze){ze.offset-=Le}),U(De,false,ue._fullLayout._invScaleX,ue._fullLayout._invScaleY),J?De:De.node()};var F=/<extra>([\s\S]*)<\/extra>/;function _(Y,ae){var X=ae.gd,J=X._fullLayout,ue=ae.hovermode,re=ae.rotateLabels,ne=ae.bgColor,se=ae.container,de=ae.outerContainer,be=ae.commonLabelOpts||{};if(0===Y.length)return[[]];var De=ae.fontFamily||s.HOVERFONT,_e=ae.fontSize||s.HOVERFONTSIZE,Ce=Y[0],Le=Ce.xa,Fe=Ce.ya,ke=ue.charAt(0),ze=ke+"Label",Pe=Ce[ze];if(void 0===Pe&&"multicategory"===Le.type)for(var Ie=0;Ie<Y.length&&void 0===(Pe=Y[Ie][ze]);Ie++);var Qe=V(X,de),at=Qe.top,Be=Qe.width,Ne=Qe.height,nt=void 0!==Pe&&Ce.distance<=ae.hoverdistance&&("x"===ue||"y"===ue);if(nt){var mt,Bt,ct=!0;for(mt=0;mt<Y.length;mt++)if(ct&&void 0===Y[mt].zLabel&&(ct=!1),Bt=Y[mt].hoverinfo||Y[mt].trace.hoverinfo){var Rt=Array.isArray(Bt)?Bt:Bt.split("+");if(-1===Rt.indexOf("all")&&-1===Rt.indexOf(ue)){nt=!1;break}}ct&&(nt=!1)}var zt=se.selectAll("g.axistext").data(nt?[0]:[]);zt.enter().append("g").classed("axistext",!0),zt.exit().remove();var St={minX:0,maxX:0,minY:0,maxY:0};if(zt.each(function(){var Ct=M.select(this),sr=T.ensureSingle(Ct,"path","",function(an){an.style({"stroke-width":"1px"})}),tr=T.ensureSingle(Ct,"text","",function(an){an.attr("data-notex",1)}),Cr=be.bgcolor||v.defaultLine,Hr=be.bordercolor||v.contrast(Cr),zr=v.contrast(Cr),Wr={family:be.font.family||De,size:be.font.size||_e,color:be.font.color||zr};sr.style({fill:Cr,stroke:Hr}),tr.text(Pe).call(o.font,Wr).call(a.positionText,0,0).call(a.convertToTspans,X),Ct.attr("transform","");var We,Jt,Ke=V(X,tr.node());if("x"===ue){var Gt="top"===Le.side?"-":"";tr.attr("text-anchor","middle").call(a.positionText,0,"top"===Le.side?at-Ke.bottom-c-S:at-Ke.top+c+S),We=Le._offset+(Ce.x0+Ce.x1)/2,Jt=Fe._offset+("top"===Le.side?0:Fe._length);var hr=Ke.width/2+S;We<hr?(We=hr,sr.attr("d","M-"+(hr-c)+",0L-"+(hr-2*c)+","+Gt+c+"H"+hr+"v"+Gt+(2*S+Ke.height)+"H-"+hr+"V"+Gt+c+"Z")):We>J.width-hr?(We=J.width-hr,sr.attr("d","M"+(hr-c)+",0L"+hr+","+Gt+c+"v"+Gt+(2*S+Ke.height)+"H-"+hr+"V"+Gt+c+"H"+(hr-2*c)+"Z")):sr.attr("d","M0,0L"+c+","+Gt+c+"H"+hr+"v"+Gt+(2*S+Ke.height)+"H-"+hr+"V"+Gt+c+"H-"+c+"Z"),St.minX=We-hr,St.maxX=We+hr,"top"===Le.side?(St.minY=Jt-(2*S+Ke.height),St.maxY=Jt-S):(St.minY=Jt+S,St.maxY=Jt+(2*S+Ke.height))}else{var br,Ut,Kt;"right"===Fe.side?(br="start",Ut=1,Kt="",We=Le._offset+Le._length):(br="end",Ut=-1,Kt="-",We=Le._offset),Jt=Fe._offset+(Ce.y0+Ce.y1)/2,tr.attr("text-anchor",br),sr.attr("d","M0,0L"+Kt+c+","+c+"V"+(S+Ke.height/2)+"h"+Kt+(2*S+Ke.width)+"V-"+(S+Ke.height/2)+"H"+Kt+c+"V-"+c+"Z"),St.minY=Jt-(S+Ke.height/2),St.maxY=Jt+(S+Ke.height/2),"right"===Fe.side?(St.minX=We+c,St.maxX=We+c+(2*S+Ke.width)):(St.minX=We-c-(2*S+Ke.width),St.maxX=We-c);var Ur,wt=Ke.height/2,xr=at-Ke.top-wt,Ir="clip"+J._uid+"commonlabel"+Fe._id;if(We<Ke.width+2*S+c){Ur="M-"+(c+S)+"-"+wt+"h-"+(Ke.width-S)+"V"+wt+"h"+(Ke.width-S)+"Z";var qt=Ke.width-We+S;a.positionText(tr,qt,xr),"end"===br&&tr.selectAll("tspan").each(function(){var an=M.select(this),hn=o.tester.append("text").text(an.text()).call(o.font,Wr),An=V(X,hn.node());Math.round(An.width)<Math.round(Ke.width)&&an.attr("x",qt-An.width),hn.remove()})}else a.positionText(tr,Ut*(S+c),xr),Ur=null;var on=J._topclips.selectAll("#"+Ir).data(Ur?[0]:[]);on.enter().append("clipPath").attr("id",Ir).append("path"),on.exit().remove(),on.select("path").attr("d",Ur),o.setClipUrl(tr,Ur?Ir:null,X)}Ct.attr("transform",n(We,Jt))}),y.isUnifiedHover(ue)){se.selectAll("g.hovertext").remove();var Xt=Y.filter(function(Ct){return"none"!==Ct.hoverinfo});if(0===Xt.length)return[];var Mt=J.hoverlabel,st=Mt.font,Se={showlegend:!0,legend:{title:{text:Pe,font:st},font:st,bgcolor:Mt.bgcolor,bordercolor:Mt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:J.legend?J.legend.traceorder:void 0,orientation:"v"}},pe={font:st};x(Se,pe,X._fullData);var ge=pe.legend;ge.entries=[];for(var Oe=0;Oe<Xt.length;Oe++){var we=Xt[Oe];if("none"!==we.hoverinfo){var He=z(we,!0,ue,J,Pe),Xe=He[0],ut=He[1];we.name=ut,we.text=""!==ut?ut+" : "+Xe:Xe;var Ze=we.cd[we.index];Ze&&(Ze.mc&&(we.mc=Ze.mc),Ze.mcc&&(we.mc=Ze.mcc),Ze.mlc&&(we.mlc=Ze.mlc),Ze.mlcc&&(we.mlc=Ze.mlcc),Ze.mlw&&(we.mlw=Ze.mlw),Ze.mrc&&(we.mrc=Ze.mrc),Ze.dir&&(we.dir=Ze.dir)),we._distinct=!0,ge.entries.push([we])}}ge.entries.sort(function(Ct,sr){return Ct[0].trace.index-sr[0].trace.index}),ge.layer=se,ge._inHover=!0,ge._groupTitleFont=Mt.grouptitlefont,h(X,ge);var It,$t,kr,lr,qe=se.select("g.legend"),Dt=V(X,qe.node()),Ft=Dt.width+2*S,bt=Dt.height+2*S,Pt=Xt[0],cr=(Pt.x0+Pt.x1)/2,Sr=(Pt.y0+Pt.y1)/2,Kr=!(l.traceIs(Pt.trace,"bar-like")||l.traceIs(Pt.trace,"box-violin"));"y"===ke?Kr?($t=Sr-S,It=Sr+S):($t=Math.min.apply(null,Xt.map(function(Ct){return Math.min(Ct.y0,Ct.y1)})),It=Math.max.apply(null,Xt.map(function(Ct){return Math.max(Ct.y0,Ct.y1)}))):$t=It=T.mean(Xt.map(function(Ct){return(Ct.y0+Ct.y1)/2}))-bt/2,"x"===ke?Kr?(kr=cr+S,lr=cr-S):(kr=Math.max.apply(null,Xt.map(function(Ct){return Math.max(Ct.x0,Ct.x1)})),lr=Math.min.apply(null,Xt.map(function(Ct){return Math.min(Ct.x0,Ct.x1)}))):kr=lr=T.mean(Xt.map(function(Ct){return(Ct.x0+Ct.x1)/2}))-Ft/2;var ht,gt,rt=Le._offset,$e=Fe._offset;return lr+=rt-Ft,$t+=$e-bt,ht=(kr+=rt)+Ft<Be&&kr>=0?kr:lr+Ft<Be&&lr>=0?lr:rt+Ft<Be?rt:kr-cr<cr-lr+Ft?Be-Ft:0,ht+=S,gt=(It+=$e)+bt<Ne&&It>=0?It:$t+bt<Ne&&$t>=0?$t:$e+bt<Ne?$e:It-Sr<Sr-$t+bt?Ne-bt:0,gt+=S,qe.attr("transform",n(ht-1,gt-1)),qe}var ft=se.selectAll("g.hovertext").data(Y,function(Ct){return R(Ct)});return ft.enter().append("g").classed("hovertext",!0).each(function(){var Ct=M.select(this);Ct.append("rect").call(v.fill,v.addOpacity(ne,.8)),Ct.append("text").classed("name",!0),Ct.append("path").style("stroke-width","1px"),Ct.append("text").classed("nums",!0).call(o.font,De,_e)}),ft.exit().remove(),ft.each(function(Ct){var sr=M.select(this).attr("transform",""),tr=Ct.color;Array.isArray(tr)&&(tr=tr[Ct.eventData[0].pointNumber]);var Cr=Ct.bgcolor||tr,Hr=v.combine(v.opacity(Cr)?Cr:v.defaultLine,ne),zr=v.combine(v.opacity(tr)?tr:v.defaultLine,ne),Wr=Ct.borderColor||v.contrast(Hr),Ke=z(Ct,nt,ue,J,Pe,sr),We=Ke[0],Jt=Ke[1],Gt=sr.select("text.nums").call(o.font,Ct.fontFamily||De,Ct.fontSize||_e,Ct.fontColor||Wr).text(We).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,X),hr=sr.select("text.name"),br=0,Ut=0;if(Jt&&Jt!==We){hr.call(o.font,Ct.fontFamily||De,Ct.fontSize||_e,zr).text(Jt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,X);var Kt=V(X,hr.node());br=Kt.width+2*S,Ut=Kt.height+2*S}else hr.remove(),sr.select("rect").remove();sr.select("path").style({fill:Hr,stroke:Wr});var wt=Ct.xa._offset+(Ct.x0+Ct.x1)/2,xr=Ct.ya._offset+(Ct.y0+Ct.y1)/2,Ir=Math.abs(Ct.x1-Ct.x0),Ur=Math.abs(Ct.y1-Ct.y0),qt=V(X,Gt.node()),on=qt.width/J._invScaleX,an=qt.height/J._invScaleY;Ct.ty0=(at-qt.top)/J._invScaleY,Ct.bx=on+2*S,Ct.by=Math.max(an+2*S,Ut),Ct.anchor="start",Ct.txwidth=on,Ct.tx2width=br,Ct.offset=0;var An,Sn,hn=(on+c+S+br)*J._invScaleX;if(re)Ct.pos=wt,An=xr+Ur/2+hn<=Ne,Sn=xr-Ur/2-hn>=0,"top"!==Ct.idealAlign&&An||!Sn?An?(xr+=Ur/2,Ct.anchor="start"):Ct.anchor="middle":(xr-=Ur/2,Ct.anchor="end"),Ct.crossPos=xr;else{if(Ct.pos=xr,An=wt+Ir/2+hn<=Be,Sn=wt-Ir/2-hn>=0,"left"!==Ct.idealAlign&&An||!Sn)if(An)wt+=Ir/2,Ct.anchor="start";else{Ct.anchor="middle";var sa=hn/2,Rn=wt+sa-Be,Yr=wt-sa;Rn>0&&(wt-=Rn),Yr<0&&(wt+=-Yr)}else wt-=Ir/2,Ct.anchor="end";Ct.crossPos=wt}Gt.attr("text-anchor",Ct.anchor),br&&hr.attr("text-anchor",Ct.anchor),sr.attr("transform",n(wt,xr)+(re?i(g):""))}),{hoverLabels:ft,commonLabelBoundingBox:St}}function z(Y,ae,X,J,ue,re){var ne="",se="";void 0!==Y.nameOverride&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=T.templateString(Y.name,Y.trace._meta)),ne=B(Y.name,Y.nameLength));var de=X.charAt(0),be="x"===de?"y":"x";void 0!==Y.zLabel?(void 0!==Y.xLabel&&(se+="x: "+Y.xLabel+"<br>"),void 0!==Y.yLabel&&(se+="y: "+Y.yLabel+"<br>"),"choropleth"!==Y.trace.type&&"choroplethmapbox"!==Y.trace.type&&(se+=(se?"z: ":"")+Y.zLabel)):ae&&Y[de+"Label"]===ue?se=Y[be+"Label"]||"":void 0===Y.xLabel?void 0!==Y.yLabel&&"scattercarpet"!==Y.trace.type&&(se=Y.yLabel):se=void 0===Y.yLabel?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")",(Y.text||0===Y.text)&&!Array.isArray(Y.text)&&(se+=(se?"<br>":"")+Y.text),void 0!==Y.extraText&&(se+=(se?"<br>":"")+Y.extraText),re&&""===se&&!Y.hovertemplate&&(""===ne&&re.remove(),se=ne);var De=Y.hovertemplate||!1;if(De){var _e=Y.hovertemplateLabels||Y;Y[de+"Label"]!==ue&&(_e[de+"other"]=_e[de+"Val"],_e[de+"otherLabel"]=_e[de+"Label"]),se=(se=T.hovertemplateString(De,_e,J._d3locale,Y.eventData[0]||{},Y.trace._meta)).replace(F,function(Ce,Le){return ne=B(Le,Y.nameLength),""})}return[se,ne]}function k(Y,ae){var X=0,J=Y.offset;return ae&&(J*=-b,X=Y.offset*A),{x:X,y:J}}function U(Y,ae,X,J){var ue=function(ne){return ne*X},re=function(ne){return ne*J};Y.each(function(ne){var se=M.select(this);if(ne.del)return se.remove();var de=se.select("text.nums"),be=ne.anchor,De="end"===be?-1:1,_e=function O(Y){var ae={start:1,end:-1,middle:0}[Y.anchor],X=ae*(c+S),J=X+ae*(Y.txwidth+S);return"middle"===Y.anchor&&(X-=Y.tx2width/2,J+=Y.txwidth/2+S),{alignShift:ae,textShiftX:X,text2ShiftX:J}}(ne),Ce=k(ne,ae),Le=Ce.x,Fe=Ce.y,ke="middle"===be;se.select("path").attr("d",ke?"M-"+ue(ne.bx/2+ne.tx2width/2)+","+re(Fe-ne.by/2)+"h"+ue(ne.bx)+"v"+re(ne.by)+"h-"+ue(ne.bx)+"Z":"M0,0L"+ue(De*c+Le)+","+re(c+Fe)+"v"+re(ne.by/2-c)+"h"+ue(De*ne.bx)+"v-"+re(ne.by)+"H"+ue(De*c+Le)+"V"+re(Fe-c)+"Z");var ze=Le+_e.textShiftX,Pe=Fe+ne.ty0-ne.by/2+S,Ie=ne.textAlign||"auto";"auto"!==Ie&&("left"===Ie&&"start"!==be?(de.attr("text-anchor","start"),ze=ke?-ne.bx/2-ne.tx2width/2+S:-ne.bx-S):"right"===Ie&&"end"!==be&&(de.attr("text-anchor","end"),ze=ke?ne.bx/2-ne.tx2width/2-S:ne.bx+S)),de.call(a.positionText,ue(ze),re(Pe)),ne.tx2width&&(se.select("text.name").call(a.positionText,ue(_e.text2ShiftX+_e.alignShift*S+Le),re(Fe+ne.ty0-ne.by/2+S)),se.select("rect").call(o.setRect,ue(_e.text2ShiftX+(_e.alignShift-1)*ne.tx2width/2+Le),re(Fe-ne.by/2-1),ue(ne.tx2width),re(ne.by+2)))})}function H(Y,ae){var X=Y.index,J=Y.trace||{},ue=Y.cd[0],re=Y.cd[X]||{};function ne(Ce){return Ce||I(Ce)&&0===Ce}var se=Array.isArray(X)?function(Ce,Le){var Fe=T.castOption(ue,X,Ce);return ne(Fe)?Fe:T.extractOption({},J,"",Le)}:function(Ce,Le){return T.extractOption(re,J,Ce,Le)};function de(Ce,Le,Fe){var ke=se(Le,Fe);ne(ke)&&(Y[Ce]=ke)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),Y.posref="y"===ae||"closest"===ae&&"h"===J.orientation?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=T.constrain(Y.x0,0,Y.xa._length),Y.x1=T.constrain(Y.x1,0,Y.xa._length),Y.y0=T.constrain(Y.y0,0,Y.ya._length),Y.y1=T.constrain(Y.y1,0,Y.ya._length),void 0!==Y.xLabelVal&&(Y.xLabel="xLabel"in Y?Y.xLabel:f.hoverLabelText(Y.xa,Y.xLabelVal,J.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),void 0!==Y.yLabelVal&&(Y.yLabel="yLabel"in Y?Y.yLabel:f.hoverLabelText(Y.ya,Y.yLabelVal,J.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),void 0!==Y.zLabelVal&&void 0===Y.zLabel&&(Y.zLabel=String(Y.zLabelVal)),!(isNaN(Y.xerr)||"log"===Y.xa.type&&Y.xerr<=0)){var be=f.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;void 0!==Y.xerrneg?Y.xLabel+=" +"+be+" / -"+f.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+=" \xb1 "+be,"x"===ae&&(Y.distance+=1)}if(!(isNaN(Y.yerr)||"log"===Y.ya.type&&Y.yerr<=0)){var De=f.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;void 0!==Y.yerrneg?Y.yLabel+=" +"+De+" / -"+f.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+=" \xb1 "+De,"y"===ae&&(Y.distance+=1)}var _e=Y.hoverinfo||Y.trace.hoverinfo;return _e&&"all"!==_e&&(-1===(_e=Array.isArray(_e)?_e:_e.split("+")).indexOf("x")&&(Y.xLabel=void 0),-1===_e.indexOf("y")&&(Y.yLabel=void 0),-1===_e.indexOf("z")&&(Y.zLabel=void 0),-1===_e.indexOf("text")&&(Y.text=void 0),-1===_e.indexOf("name")&&(Y.name=void 0)),Y}function j(Y,ae,X){var be,De,J=X.container,ue=X.fullLayout,re=ue._size,ne=X.event,se=!!ae.hLinePoint,de=!!ae.vLinePoint;if(J.selectAll(".spikeline").remove(),de||se){var _e=v.combine(ue.plot_bgcolor,ue.paper_bgcolor);if(se){var Le,Fe,Ce=ae.hLinePoint;be=Ce&&Ce.xa,"cursor"===(De=Ce&&Ce.ya).spikesnap?(Le=ne.pointerX,Fe=ne.pointerY):(Le=be._offset+Ce.x,Fe=De._offset+Ce.y);var Be,Ne,ze=t.readability(Ce.color,_e)<1.5?v.contrast(_e):Ce.color,Pe=De.spikemode,Ie=De.spikethickness,Qe=De.spikecolor||ze,at=f.getPxPosition(Y,De);if(-1!==Pe.indexOf("toaxis")||-1!==Pe.indexOf("across")){if(-1!==Pe.indexOf("toaxis")&&(Be=at,Ne=Le),-1!==Pe.indexOf("across")){var nt=De._counterDomainMin,ct=De._counterDomainMax;"free"===De.anchor&&(nt=Math.min(nt,De.position),ct=Math.max(ct,De.position)),Be=re.l+nt*re.w,Ne=re.l+ct*re.w}J.insert("line",":first-child").attr({x1:Be,x2:Ne,y1:Fe,y2:Fe,"stroke-width":Ie,stroke:Qe,"stroke-dasharray":o.dashStyle(De.spikedash,Ie)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:Be,x2:Ne,y1:Fe,y2:Fe,"stroke-width":Ie+2,stroke:_e}).classed("spikeline",!0).classed("crisp",!0)}-1!==Pe.indexOf("marker")&&J.insert("circle",":first-child").attr({cx:at+("right"!==De.side?Ie:-Ie),cy:Fe,r:Ie,fill:Qe}).classed("spikeline",!0)}if(de){var Bt,Rt,mt=ae.vLinePoint;be=mt&&mt.xa,De=mt&&mt.ya,"cursor"===be.spikesnap?(Bt=ne.pointerX,Rt=ne.pointerY):(Bt=be._offset+mt.x,Rt=De._offset+mt.y);var pe,ge,St=t.readability(mt.color,_e)<1.5?v.contrast(_e):mt.color,Xt=be.spikemode,Mt=be.spikethickness,st=be.spikecolor||St,Se=f.getPxPosition(Y,be);if(-1!==Xt.indexOf("toaxis")||-1!==Xt.indexOf("across")){if(-1!==Xt.indexOf("toaxis")&&(pe=Se,ge=Rt),-1!==Xt.indexOf("across")){var Oe=be._counterDomainMin,we=be._counterDomainMax;"free"===be.anchor&&(Oe=Math.min(Oe,be.position),we=Math.max(we,be.position)),pe=re.t+(1-we)*re.h,ge=re.t+(1-Oe)*re.h}J.insert("line",":first-child").attr({x1:Bt,x2:Bt,y1:pe,y2:ge,"stroke-width":Mt,stroke:st,"stroke-dasharray":o.dashStyle(be.spikedash,Mt)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:Bt,x2:Bt,y1:pe,y2:ge,"stroke-width":Mt+2,stroke:_e}).classed("spikeline",!0).classed("crisp",!0)}-1!==Xt.indexOf("marker")&&J.insert("circle",":first-child").attr({cx:Bt,cy:Se-("top"!==be.side?Mt:-Mt),r:Mt,fill:st}).classed("spikeline",!0)}}}function W(Y,ae){return!ae||ae.vLinePoint!==Y._spikepoints.vLinePoint||ae.hLinePoint!==Y._spikepoints.hLinePoint}function B(Y,ae){return a.plainText(Y||"",{len:ae,allowedTags:["br","sub","sup","b","i","em"]})}function q(Y,ae,X){var J=ae[Y+"a"],ue=ae[Y+"Val"],re=ae.cd[0];if("category"===J.type||"multicategory"===J.type)ue=J._categoriesMap[ue];else if("date"===J.type){var ne=ae.trace[Y+"periodalignment"];if(ne){var se=ae.cd[ae.index],de=se[Y+"Start"];void 0===de&&(de=se[Y]);var be=se[Y+"End"];void 0===be&&(be=se[Y]);var De=be-de;"end"===ne?ue+=De:"middle"===ne&&(ue+=De/2)}ue=J.d2c(ue)}return re&&re.t&&re.t.posLetter===J._id&&("group"===X.boxmode||"group"===X.violinmode)&&(ue+=re.t.dPos),ue}function oe(Y){return Y.offsetTop+Y.clientTop}function ie(Y){return Y.offsetLeft+Y.clientLeft}function V(Y,ae){var X=Y._fullLayout,J=ae.getBoundingClientRect(),ue=J.left,re=J.top,ne=ue+J.width,se=re+J.height,de=T.apply3DTransform(X._invTransform)(ue,re),be=T.apply3DTransform(X._invTransform)(ne,se),De=de[0],_e=de[1],Ce=be[0],Le=be[1];return{x:De,y:_e,width:Ce-De,height:Le-_e,top:Math.min(_e,Le),left:Math.min(De,Ce),right:Math.max(De,Ce),bottom:Math.max(_e,Le)}}},62362:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(40235).isUnifiedHover;$.exports=function(n,i,u,a){a=a||{};var r=i.legend;function o(v){a.font[v]||(a.font[v]=r?i.legend.font[v]:i.font[v])}i&&t(i.hovermode)&&(a.font||(a.font={}),o("size"),o("family"),o("color"),r?(a.bgcolor||(a.bgcolor=I.combine(i.legend.bgcolor,i.paper_bgcolor)),a.bordercolor||(a.bordercolor=i.legend.bordercolor)):a.bgcolor||(a.bgcolor=i.paper_bgcolor)),u("hoverlabel.bgcolor",a.bgcolor),u("hoverlabel.bordercolor",a.bordercolor),u("hoverlabel.namelength",a.namelength),M.coerceFont(u,"hoverlabel.font",a.font),u("hoverlabel.align",a.align)}},48060:($,K,e)=>{"use strict";var M=e(5228),I=e(82815);$.exports=function(T,n){function i(u,a){return void 0!==n[u]?n[u]:M.coerce(T,n,I,u,a)}return i("clickmode"),i("hovermode")}},76863:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(25429),T=e(40235),n=e(82815),i=e(8237);$.exports={moduleType:"component",name:"fx",constants:e(53041),schema:{layout:n},attributes:e(44777),layoutAttributes:n,supplyLayoutGlobalDefaults:e(87959),supplyDefaults:e(93519),supplyLayoutDefaults:e(14733),calc:e(16299),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function a(o,v,p){return I.castOption(o,v,"hoverlabel."+p)},castHoverinfo:function r(o,v,p){return I.castOption(o,p,"hoverinfo",function f(l){return I.coerceHoverinfo({hoverinfo:l},{_module:o._module},v)})},hover:i.hover,unhover:t.unhover,loneHover:i.loneHover,loneUnhover:function u(o){var v=I.isD3Selection(o)?o:M.select(o);v.selectAll("g.hovertext").remove(),v.selectAll(".spikeline").remove()},click:e(47138)}},82815:($,K,e)=>{"use strict";var M=e(53041),I=e(47297),t=I({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});t.family.dflt=M.HOVERFONT,t.size.dflt=M.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:t,grouptitlefont:I({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}}},14733:($,K,e)=>{"use strict";var M=e(5228),I=e(82815),t=e(48060),T=e(62362);$.exports=function(i,u){function a(l,y){return M.coerce(i,u,I,l,y)}t(i,u)&&(a("hoverdistance"),a("spikedistance")),"select"===a("dragmode")&&a("selectdirection");var v=u._has("mapbox"),p=u._has("geo"),f=u._basePlotModules.length;"zoom"===u.dragmode&&((v||p)&&1===f||v&&p&&2===f)&&(u.dragmode="pan"),T(i,u,a),M.coerceFont(a,"hoverlabel.grouptitlefont",u.hoverlabel.font)}},87959:($,K,e)=>{"use strict";var M=e(5228),I=e(62362),t=e(82815);$.exports=function(n,i){I(n,i,function u(a,r){return M.coerce(n,i,t,a,r)})}},99399:($,K,e)=>{"use strict";var M=e(5228),I=e(13943).counter,t=e(47472).Y,T=e(4669).idRegex,n=e(96906),i={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[I("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:t({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function u(p,f,l){var y=f[l+"axes"],s=Object.keys((p._splomAxes||{})[l]||{});return Array.isArray(y)?y:s.length?s:void 0}function r(p,f,l,y,s,x){var h=f(p+"gap",l),g=f("domain."+p);f(p+"side",y);for(var m=new Array(s),d=g[0],A=(g[1]-d)/(s-h),b=A*(1-h),c=0;c<s;c++){var S=d+A*c;m[x?s-1-c:c]=[S,S+b]}return m}function v(p,f,l,y,s){var h,x=new Array(l);function g(m,d){-1!==f.indexOf(d)&&void 0===y[d]?(x[m]=d,y[d]=m):x[m]=""}if(Array.isArray(p))for(h=0;h<l;h++)g(h,p[h]);else for(g(0,s),h=1;h<l;h++)g(h,s+(h+1));return x}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:i}},layoutAttributes:i,sizeDefaults:function a(p,f){var l=p.grid||{},y=u(f,l,"x"),s=u(f,l,"y");if(p.grid||y||s){var d,A,x=Array.isArray(l.subplots)&&Array.isArray(l.subplots[0]),h=Array.isArray(y),g=Array.isArray(s),m=h&&y!==l.xaxes&&g&&s!==l.yaxes;x?(d=l.subplots.length,A=l.subplots[0].length):(g&&(d=s.length),h&&(A=y.length));var b=n.newContainer(f,"grid"),S=c("rows",d),w=c("columns",A);if(S*w>1){if(!x&&!h&&!g)"independent"===c("pattern")&&(x=!0);b._hasSubplotGrid=x;var z,D,R="top to bottom"===c("roworder"),F=x?.2:.1,_=x?.3:.1;m&&f._splomGridDflt&&(z=f._splomGridDflt.xside,D=f._splomGridDflt.yside),b._domains={x:r("x",c,F,z,w),y:r("y",c,_,D,S,R)}}else delete f.grid}function c(k,O){return M.coerce(l,b,i,k,O)}},contentDefaults:function o(p,f){var l=f.grid;if(l&&l._domains){var d,A,b,c,S,w,E,y=p.grid||{},s=f._subplots,x=l._hasSubplotGrid,h=l.rows,g=l.columns,m="independent"===l.pattern,P=l._axisMap={};if(x){var R=y.subplots||[];w=l.subplots=new Array(h);var F=1;for(d=0;d<h;d++){var _=w[d]=new Array(g),z=R[d]||[];for(A=0;A<g;A++)if(m?(S=1===F?"xy":"x"+F+"y"+F,F++):S=z[A],_[A]="",-1!==s.cartesian.indexOf(S)){if(E=S.indexOf("y"),b=S.slice(0,E),c=S.slice(E),void 0!==P[b]&&P[b]!==A||void 0!==P[c]&&P[c]!==d)continue;_[A]=S,P[b]=A,P[c]=d}}}else{var D=u(f,y,"x"),k=u(f,y,"y");l.xaxes=v(D,s.xaxis,g,P,"x"),l.yaxes=v(k,s.yaxis,h,P,"y")}var O=l._anchors={},U="top to bottom"===l.roworder;for(var H in P){var W,B,te,j=H.charAt(0),ee=l[j+"side"];if(ee.length<8)O[H]="free";else if("x"===j){if("t"===ee.charAt(0)===U?(W=0,B=1,te=h):(W=h-1,B=-1,te=-1),x){var q=P[H];for(d=W;d!==te;d+=B)if((S=w[d][q])&&(E=S.indexOf("y"),S.slice(0,E)===H)){O[H]=S.slice(E);break}}else for(d=W;d!==te;d+=B)if(c=l.yaxes[d],-1!==s.cartesian.indexOf(H+c)){O[H]=c;break}}else if("l"===ee.charAt(0)?(W=0,B=1,te=g):(W=g-1,B=-1,te=-1),x){var oe=P[H];for(d=W;d!==te;d+=B)if((S=w[oe][d])&&(E=S.indexOf("y"),S.slice(E)===H)){O[H]=S.slice(0,E);break}}else for(d=W;d!==te;d+=B)if(b=l.xaxes[d],-1!==s.cartesian.indexOf(b+H)){O[H]=b;break}}}}}},31114:($,K,e)=>{"use strict";var M=e(4669),I=e(96906).templatedArray,t=e(4967);$.exports=I("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",t.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",t.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"})},5068:($,K,e)=>{"use strict";var M=e(7347),I=e(11899);$.exports=function(T,n,i,u){n=n||{};var a="log"===i&&"linear"===n.type,r="linear"===i&&"log"===n.type;if(a||r)for(var p,f,o=T._fullLayout.images,v=n._id.charAt(0),l=0;l<o.length;l++)if(f="images["+l+"].",(p=o[l])[v+"ref"]===n._id){var y=p[v],s=p["size"+v],x=null,h=null;if(a){x=I(y,n.range);var g=s/Math.pow(10,x)/2;h=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else h=(x=Math.pow(10,y))*(Math.pow(10,s/2)-Math.pow(10,-s/2));M(x)?M(h)||(h=null):(x=null,h=null),u(f+v,x),u(f+"size"+v,h)}}},67198:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(84322),T=e(31114);function i(u,a,r){function o(g,m){return M.coerce(u,a,T,g,m)}var v=o("source");if(!o("visible",!!v))return a;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var f={_fullLayout:r},l=["x","y"],y=0;y<2;y++){var s=l[y],x=I.coerceRef(u,a,f,s,"paper",void 0);if("paper"!==x)I.getFromId(f,x)._imgIndices.push(a._index);I.coercePosition(a,f,o,x,s,0)}return a}$.exports=function(a,r){t(a,r,{name:"images",handleItemDefaults:i})}},90804:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(91464),T=e(78168),n=e(70415);$.exports=function(u){var p,f,a=u._fullLayout,r=[],o={},v=[];for(f=0;f<a.images.length;f++){var l=a.images[f];if(l.visible)if("below"===l.layer&&"paper"!==l.xref&&"paper"!==l.yref){p=T.ref2id(l.xref)+T.ref2id(l.yref);var y=a._plots[p];if(!y){v.push(l);continue}y.mainplot&&(p=y.mainplot.id),o[p]||(o[p]=[]),o[p].push(l)}else"above"===l.layer?r.push(l):v.push(l)}var s_x={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},s_y={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(c){var S=M.select(this);if(this._imgSrc!==c.source)if(S.attr("xmlns",n.svg),c.source&&"data:"===c.source.slice(0,5))S.attr("xlink:href",c.source),this._imgSrc=c.source;else{var w=new Promise(function(E){var P=new Image;function R(){S.remove(),E()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=R,P.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height,F.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=F.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",R),P.src=c.source,this._imgSrc=c.source}.bind(this));u._promises.push(w)}}function h(c){var _,z,S=M.select(this),w=t.getFromId(u,c.xref),E=t.getFromId(u,c.yref),P="domain"===t.getRefType(c.xref),R="domain"===t.getRefType(c.yref),F=a._size;_=void 0!==w?"string"==typeof c.xref&&P?w._length*c.sizex:Math.abs(w.l2p(c.sizex)-w.l2p(0)):c.sizex*F.w,z=void 0!==E?"string"==typeof c.yref&&R?E._length*c.sizey:Math.abs(E.l2p(c.sizey)-E.l2p(0)):c.sizey*F.h;var U,H,D=_*s_x[c.xanchor].offset,k=z*s_y[c.yanchor].offset,O=s_x[c.xanchor].sizing+s_y[c.yanchor].sizing;switch(U=void 0!==w?"string"==typeof c.xref&&P?w._length*c.x+w._offset:w.r2p(c.x)+w._offset:c.x*F.w+F.l,U+=D,H=void 0!==E?"string"==typeof c.yref&&R?E._length*(1-c.y)+E._offset:E.r2p(c.y)+E._offset:F.h-c.y*F.h+F.t,H+=k,c.sizing){case"fill":O+=" slice";break;case"stretch":O="none"}S.attr({x:U,y:H,width:_,height:z,preserveAspectRatio:O,opacity:c.opacity});var W=(w&&"domain"!==t.getRefType(c.xref)?w._id:"")+(E&&"domain"!==t.getRefType(c.yref)?E._id:"");I.setClipUrl(S,W?"clip"+a._uid+W:null,u)}var g=a._imageLowerLayer.selectAll("image").data(v),m=a._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),m.enter().append("image"),g.exit().remove(),m.exit().remove(),g.each(function(c){x.bind(this)(c),h.bind(this)(c)}),m.each(function(c){x.bind(this)(c),h.bind(this)(c)});var d=Object.keys(a._plots);for(f=0;f<d.length;f++){p=d[f];var A=a._plots[p];if(A.imagelayer){var b=A.imagelayer.selectAll("image").data(o[p]||[]);b.enter().append("image"),b.exit().remove(),b.each(function(c){x.bind(this)(c),h.bind(this)(c)})}}}},38708:($,K,e)=>{"use strict";$.exports={moduleType:"component",name:"images",layoutAttributes:e(31114),supplyLayoutDefaults:e(67198),includeBasePlot:e(84808)("images"),draw:e(90804),convertCoords:e(5068)}},69937:($,K,e)=>{"use strict";var M=e(47297),I=e(36593);$.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend",description:["Determines whether or not this legend is visible."].join(" ")},bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:I.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:M({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:M({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},entrywidth:{valType:"number",min:0,editType:"legend",description:["Sets the width (in px or fraction) of the legend.","Use 0 to size the entry based on the text width,","when `entrywidthmode` is set to *pixels*."].join(" ")},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend",description:"Determines what entrywidth means."},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",editType:"legend",description:["Sets the x position with respect to `xref` (in normalized coordinates) of the legend.","When `xref` is *paper*, defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends.","When `xref` is *container*, defaults to *1* for vertical legends and","defaults to *0* for horizontal legends.","Must be between *0* and *1* if `xref` is *container*.","and between *-2* and *3* if `xref` is *paper*."].join(" ")},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",editType:"legend",description:["Sets the y position with respect to `yref` (in normalized coordinates) of the legend.","When `yref` is *paper*, defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders.","When `yref` is *container*, defaults to *1*.","Must be between *0* and *1* if `yref` is *container*","and between *-2* and *3* if `yref` is *paper*."].join(" ")},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:M({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","top center and top right are for horizontal alignment","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"}},11669:$=>{"use strict";$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},6310:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(96906),T=e(82684),n=e(69937),i=e(11161),u=e(88387);function a(r,o,v,p){var f=o[r]||{},l=t.newContainer(v,r);function y(te,q){return I.coerce(f,l,n,te,q)}var s=I.coerceFont(y,"font",v.font);if(y("bgcolor",v.paper_bgcolor),y("bordercolor"),y("visible")){for(var h,g=function(te,q){var oe=h._input,ie=h;return I.coerce(oe,ie,T,te,q)},m=v.font||{},d=I.coerceFont(y,"grouptitlefont",I.extendFlat({},m,{size:Math.round(1.1*m.size)})),A=0,b=!1,c="normal",S=(v.shapes||[]).filter(function(te){return te.showlegend}),w=p.concat(S).filter(function(te){return r===(te.legend||"legend")}),E=0;E<w.length;E++)if((h=w[E]).visible){var P=h._isShape;(h.showlegend||h._dfltShowLegend&&!(h._module&&h._module.attributes&&h._module.attributes.showlegend&&!1===h._module.attributes.showlegend.dflt))&&(A++,h.showlegend&&(b=!0,(!P&&M.traceIs(h,"pie-like")||!0===h._input.showlegend)&&A++),I.coerceFont(g,"legendgrouptitle.font",d)),(!P&&M.traceIs(h,"bar")&&"stack"===v.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(c=u.isGrouped({traceorder:c})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(c=u.isReversed({traceorder:c})?"reversed+grouped":"grouped")}var R=I.coerce(o,v,i,"showlegend",b&&A>("legend"===r?1:0));if(!1===R&&(v[r]=void 0),(!1!==R||f.uirevision)&&(y("uirevision",v.uirevision),!1!==R)){y("borderwidth");var U,H,j,D="h"===y("orientation"),k="paper"===y("yref"),O="paper"===y("xref"),ee="left";if(D?(U=0,M.getComponentMethod("rangeslider","isVisible")(o.xaxis)?k?(H=1.1,j="bottom"):(H=1,j="top"):k?(H=-.1,j="top"):(H=0,j="bottom")):(H=1,j="auto",O?U=1.02:(U=1,ee="right")),I.coerce(f,l,{x:{valType:"number",editType:"legend",min:O?-2:0,max:O?3:1,dflt:U}},"x"),I.coerce(f,l,{y:{valType:"number",editType:"legend",min:k?-2:0,max:k?3:1,dflt:H}},"y"),y("traceorder",c),u.isGrouped(v[r])&&y("tracegroupgap"),y("entrywidth"),y("entrywidthmode"),y("itemsizing"),y("itemwidth"),y("itemclick"),y("itemdoubleclick"),y("groupclick"),y("xanchor",ee),y("yanchor",j),y("valign"),I.noneOrAll(f,l,["x","y"]),y("title.text")){y("title.side",D?"left":"top");var B=I.extendFlat({},s,{size:I.bigFont(s.size)});I.coerceFont(y,"title.font",B)}}}}$.exports=function(o,v,p){var f,l=p.slice(),y=v.shapes;if(y)for(f=0;f<y.length;f++){var s=y[f];if(s.showlegend){var x={_input:s._input,visible:s.visible,showlegend:s.showlegend,legend:s.legend};l.push(x)}}var h=["legend"];for(f=0;f<l.length;f++)I.pushUnique(h,l[f].legend);for(v._legends=[],f=0;f<h.length;f++){var g=h[f];a(g,o,v,l),v[g]&&v[g].visible&&(v[g]._id=g),v._legends.push(g)}}},78802:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(31556),T=e(97799),n=e(70074),i=e(25429),u=e(27630),a=e(8416),r=e(88565),o=e(77638),v=e(11669),p=e(94598),f=p.LINE_SPACING,l=p.FROM_TL,y=p.FROM_BR,s=e(36560),x=e(32571),h=e(88387),m=/^legend[0-9]*$/;function A(U,H){var B,te,j=H||{},ee=U._fullLayout,W=O(j),q=j._inHover;if(q?(te=j.layer,B="hover"):(te=ee._infolayer,B=W),te){var oe;if(B+=ee._uid,U._legendMouseDownTime||(U._legendMouseDownTime=0),q){if(!j.entries)return;oe=s(j.entries,j)}else{for(var ie=(U.calcdata||[]).slice(),V=ee.shapes,Y=0;Y<V.length;Y++){var ae=V[Y];if(ae.showlegend){var X={_isShape:!0,_fullInput:ae,index:ae._index,name:ae.name||ae.label.text||"shape "+ae._index,legend:ae.legend,legendgroup:ae.legendgroup,legendgrouptitle:ae.legendgrouptitle,legendrank:ae.legendrank,legendwidth:ae.legendwidth,showlegend:ae.showlegend,visible:ae.visible,opacity:ae.opacity,mode:"line"===ae.type?"lines":"markers",line:ae.line,marker:{line:ae.line,color:ae.fillcolor,size:12,symbol:"rect"===ae.type?"square":"circle"===ae.type?"circle":"hexagon2"}};ie.push([{trace:X}])}}oe=ee.showlegend&&s(ie,j,ee._legends.length>1)}var J=ee.hiddenlabels||[];if(!(q||ee.showlegend&&oe.length))return te.selectAll("."+W).remove(),ee._topdefs.select("#"+B).remove(),t.autoMargin(U,W);var ue=I.ensureSingle(te,"g",W,function(Le){q||Le.attr("pointer-events","all")}),re=I.ensureSingleById(ee._topdefs,"clipPath",B,function(Le){Le.append("rect")}),ne=I.ensureSingle(ue,"rect","bg",function(Le){Le.attr("shape-rendering","crispEdges")});ne.call(a.stroke,j.bordercolor).call(a.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px");var be,se=I.ensureSingle(ue,"g","scrollbox"),de=j.title;j._titleWidth=0,j._titleHeight=0,de.text?((be=I.ensureSingle(se,"text",W+"titletext")).attr("text-anchor","start").call(u.font,de.font).text(de.text),P(be,se,U,j,1)):se.selectAll("."+W+"titletext").remove();var De=I.ensureSingle(ue,"rect","scrollbar",function(Le){Le.attr(v.scrollBarEnterAttrs).call(a.fill,v.scrollBarColor)}),_e=se.selectAll("g.groups").data(oe);_e.enter().append("g").attr("class","groups"),_e.exit().remove();var Ce=_e.selectAll("g.traces").data(I.identity);Ce.enter().append("g").attr("class","traces"),Ce.exit().remove(),Ce.style("opacity",function(Le){var Fe=Le[0].trace;return T.traceIs(Fe,"pie-like")?-1!==J.indexOf(Le[0].label)?.5:1:"legendonly"===Fe.visible?.5:1}).each(function(){M.select(this).call(S,U,j)}).call(x,U,j).each(function(){q||M.select(this).call(E,U,W)}),I.syncOrAsync([t.previousPromises,function(){return function _(U,H,j,ee){var W=U._fullLayout,B=O(ee);ee||(ee=W[B]);var te=W._size,q=h.isVertical(ee),oe=h.isGrouped(ee),ie="fraction"===ee.entrywidthmode,V=ee.borderwidth,Y=2*V,ae=v.itemGap,X=ee.itemwidth+2*ae,J=2*(V+ae),ue=k(ee),re=ee.y<0||0===ee.y&&"top"===ue,ne=ee.y>1||1===ee.y&&"bottom"===ue,se=ee.tracegroupgap,de={};ee._maxHeight=Math.max(re||ne?W.height/2:te.h,30);var be=0;ee._width=0,ee._height=0;var De=function F(U){var H=0,j=0,ee=U.title.side;return ee&&(-1!==ee.indexOf("left")&&(H=U._titleWidth),-1!==ee.indexOf("top")&&(j=U._titleHeight)),[H,j]}(ee);if(q)j.each(function(Xt){var Mt=Xt[0].height;u.setTranslate(this,V+De[0],V+De[1]+ee._height+Mt/2+ae),ee._height+=Mt,ee._width=Math.max(ee._width,Xt[0].width)}),be=X+ee._width,ee._width+=ae+X+Y,ee._height+=J,oe&&(H.each(function(Xt,Mt){u.setTranslate(this,0,Mt*ee.tracegroupgap)}),ee._height+=(ee._lgroupsLength-1)*ee.tracegroupgap);else{var _e=D(ee),Ce=ee.x<0||0===ee.x&&"right"===_e,Le=ee.x>1||1===ee.x&&"left"===_e,Fe=ne||re,ke=W.width/2;ee._maxWidth=Math.max(Ce?Fe&&"left"===_e?te.l+te.w:ke:Le?Fe&&"right"===_e?te.r+te.w:ke:te.w,2*X);var ze=0,Pe=0;j.each(function(Xt){var Mt=b(Xt,ee,X);ze=Math.max(ze,Mt),Pe+=Mt}),be=null;var Ie=0;if(oe){var Qe=0,at=0,Be=0;H.each(function(){var Xt=0,Mt=0;M.select(this).selectAll("g.traces").each(function(Se){var pe=b(Se,ee,X),ge=Se[0].height;u.setTranslate(this,De[0],De[1]+V+ae+ge/2+Mt),Mt+=ge,Xt=Math.max(Xt,pe),de[Se[0].trace.legendgroup]=Xt});var st=Xt+ae;at>0&&st+V+at>ee._maxWidth?(Ie=Math.max(Ie,at),at=0,Be+=Qe+se,Qe=Mt):Qe=Math.max(Qe,Mt),u.setTranslate(this,at,Be),at+=st}),ee._width=Math.max(Ie,at)+V,ee._height=Be+Qe+J}else{var Ne=j.size(),nt=Pe+Y+(Ne-1)*ae<ee._maxWidth,ct=0,mt=0,Bt=0,Rt=0;j.each(function(Xt){var Mt=Xt[0].height,st=b(Xt,ee,X),Se=nt?st:ze;ie||(Se+=ae),Se+V+mt-ae>=ee._maxWidth&&(Ie=Math.max(Ie,Rt),mt=0,Bt+=ct,ee._height+=ct,ct=0),u.setTranslate(this,De[0]+V+mt,De[1]+V+Bt+Mt/2+ae),Rt=mt+st+ae,mt+=Se,ct=Math.max(ct,Mt)}),nt?(ee._width=mt+Y,ee._height=ct+J):(ee._width=Math.max(Ie,Rt)+Y,ee._height+=ct+J)}}ee._width=Math.ceil(Math.max(ee._width+De[0],ee._titleWidth+2*(V+v.titlePad))),ee._height=Math.ceil(Math.max(ee._height+De[1],ee._titleHeight+2*(V+v.itemGap))),ee._effHeight=Math.min(ee._height,ee._maxHeight);var zt=U._context.edits,St=zt.legendText||zt.legendPosition;j.each(function(Xt){var Mt=M.select(this).select("."+B+"toggle"),st=Xt[0].height,Se=Xt[0].trace.legendgroup,pe=b(Xt,ee,X);oe&&""!==Se&&(pe=de[Se]);var ge=St?X:be||pe;!q&&!ie&&(ge+=ae/2),u.setRect(Mt,0,-st/2,ge,st)})}(U,_e,Ce,j)},function(){var Oe,we,He,Xe,Le=ee._size,Fe=j.borderwidth,ke="paper"===j.xref,ze="paper"===j.yref;if(de.text&&function d(U,H,j){if("top center"===H.title.side||"top right"===H.title.side){var W=H.title.font.size*f,B=0,te=U.node(),q=u.bBox(te).width;"top center"===H.title.side?B=.5*(H._width-2*j-2*v.titlePad-q):"top right"===H.title.side&&(B=H._width-2*j-2*v.titlePad-q),r.positionText(U,j+v.titlePad+B,j+W)}}(be,j,Fe),!q){var Pe,Ie;Pe=ke?Le.l+Le.w*j.x-l[D(j)]*j._width:ee.width*j.x-l[D(j)]*j._width,Ie=ze?Le.t+Le.h*(1-j.y)-l[k(j)]*j._effHeight:ee.height*(1-j.y)-l[k(j)]*j._effHeight;var Qe=function z(U,H,j,ee){var W=U._fullLayout,B=W[H],te=D(B),q=k(B),oe="paper"===B.xref,ie="paper"===B.yref;U._fullLayout._reservedMargin[H]={};var V=B.y<.5?"b":"t",Y=B.x<.5?"l":"r",ae={r:W.width-j,l:j+B._width,b:W.height-ee,t:ee+B._effHeight};if(oe&&ie)return t.autoMargin(U,H,{x:B.x,y:B.y,l:B._width*l[te],r:B._width*y[te],b:B._effHeight*y[q],t:B._effHeight*l[q]});oe?U._fullLayout._reservedMargin[H][V]=ae[V]:ie||"v"===B.orientation?U._fullLayout._reservedMargin[H][Y]=ae[Y]:U._fullLayout._reservedMargin[H][V]=ae[V]}(U,W,Pe,Ie);if(Qe)return;if(ee.margin.autoexpand){var at=Pe,Be=Ie;Pe=ke?I.constrain(Pe,0,ee.width-j._width):at,Ie=ze?I.constrain(Ie,0,ee.height-j._effHeight):Be,Pe!==at&&I.log("Constrain "+W+".x to make legend fit inside graph"),Ie!==Be&&I.log("Constrain "+W+".y to make legend fit inside graph")}u.setTranslate(ue,Pe,Ie)}if(De.on(".drag",null),ue.on("wheel",null),q||j._height<=j._maxHeight||U._context.staticPlot){var Ne=j._effHeight;q&&(Ne=j._height),ne.attr({width:j._width-Fe,height:Ne-Fe,x:Fe/2,y:Fe/2}),u.setTranslate(se,0,0),re.select("rect").attr({width:j._width-2*Fe,height:Ne-2*Fe,x:Fe,y:Fe}),u.setClipUrl(se,B,U),u.setRect(De,0,0,0,0),delete j._scrollY}else{var nt=Math.max(v.scrollBarMinHeight,j._effHeight*j._effHeight/j._height),ct=j._effHeight-nt-2*v.scrollBarMargin,mt=j._height-j._effHeight,Bt=ct/mt,Rt=Math.min(j._scrollY||0,mt);ne.attr({width:j._width-2*Fe+v.scrollBarWidth+v.scrollBarMargin,height:j._effHeight-Fe,x:Fe/2,y:Fe/2}),re.select("rect").attr({width:j._width-2*Fe+v.scrollBarWidth+v.scrollBarMargin,height:j._effHeight-2*Fe,x:Fe,y:Fe+Rt}),u.setClipUrl(se,B,U),ge(Rt,nt,Bt),ue.on("wheel",function(){ge(Rt=I.constrain(j._scrollY+M.event.deltaY/ct*mt,0,mt),nt,Bt),0!==Rt&&Rt!==mt&&M.event.preventDefault()});var zt,St,Xt,Se=M.behavior.drag().on("dragstart",function(){var ut=M.event.sourceEvent;zt="touchstart"===ut.type?ut.changedTouches[0].clientY:ut.clientY,Xt=Rt}).on("drag",function(){var ut=M.event.sourceEvent;2===ut.buttons||ut.ctrlKey||(St="touchmove"===ut.type?ut.changedTouches[0].clientY:ut.clientY,Rt=function(ut,Ze,qe){var Dt=(qe-Ze)/Bt+ut;return I.constrain(Dt,0,mt)}(Xt,zt,St),ge(Rt,nt,Bt))});De.call(Se);var pe=M.behavior.drag().on("dragstart",function(){var ut=M.event.sourceEvent;"touchstart"===ut.type&&(zt=ut.changedTouches[0].clientY,Xt=Rt)}).on("drag",function(){var ut=M.event.sourceEvent;"touchmove"===ut.type&&(St=ut.changedTouches[0].clientY,Rt=function(ut,Ze,qe){var Dt=(Ze-qe)/Bt+ut;return I.constrain(Dt,0,mt)}(Xt,zt,St),ge(Rt,nt,Bt))});se.call(pe)}function ge(ut,Ze,qe){j._scrollY=U._fullLayout[W]._scrollY=ut,u.setTranslate(se,0,-ut),u.setRect(De,j._width,v.scrollBarMargin+ut*qe,v.scrollBarWidth,Ze),re.select("rect").attr("y",Fe+ut)}U._context.edits.legendPosition&&(ue.classed("cursor-move",!0),i.init({element:ue.node(),gd:U,prepFn:function(){var ut=u.getTranslate(ue);He=ut.x,Xe=ut.y},moveFn:function(ut,Ze){var qe=He+ut,Dt=Xe+Ze;u.setTranslate(ue,qe,Dt),Oe=i.align(qe,j._width,Le.l,Le.l+Le.w,j.xanchor),we=i.align(Dt+j._height,-j._height,Le.t+Le.h,Le.t,j.yanchor)},doneFn:function(){if(void 0!==Oe&&void 0!==we){var ut={};ut[W+".x"]=Oe,ut[W+".y"]=we,T.call("_guiRelayout",U,ut)}},clickFn:function(ut,Ze){var qe=te.selectAll("g.traces").filter(function(){var Dt=this.getBoundingClientRect();return Ze.clientX>=Dt.left&&Ze.clientX<=Dt.right&&Ze.clientY>=Dt.top&&Ze.clientY<=Dt.bottom});qe.size()>0&&c(U,ue,qe,ut,Ze)}}))}],U)}}function b(U,H,j){var ee=U[0],W=ee.width,B=H.entrywidthmode,te=ee.trace.legendwidth||H.entrywidth;return"fraction"===B?H._maxWidth*te:j+(te||W)}function c(U,H,j,ee,W){var B=j.data()[0][0].trace,te={event:W,node:j.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:U.data,layout:U.layout,frames:U._transitionData._frames,config:U._context,fullData:U._fullData,fullLayout:U._fullLayout};B._group&&(te.group=B._group),T.traceIs(B,"pie-like")&&(te.label=j.datum()[0].label);var q=n.triggerHandler(U,"plotly_legendclick",te);if(1===ee){if(!1===q)return;H._clickTimeout=setTimeout(function(){U._fullLayout&&o(j,U,ee)},U._context.doubleClickDelay)}else if(2===ee){H._clickTimeout&&clearTimeout(H._clickTimeout),U._legendMouseDownTime=0,!1!==n.triggerHandler(U,"plotly_legenddoubleclick",te)&&!1!==q&&o(j,U,ee)}}function S(U,H,j){var ie,V,ee=O(j),W=U.data()[0][0],B=W.trace,te=T.traceIs(B,"pie-like"),q=!j._inHover&&H._context.edits.legendText&&!te,oe=j._maxNameLength;W.groupTitle?(ie=W.groupTitle.text,V=W.groupTitle.font):(V=j.font,j.entries?ie=W.text:(ie=te?W.label:B.name,B._meta&&(ie=I.templateString(ie,B._meta))));var Y=I.ensureSingle(U,"text",ee+"text");Y.attr("text-anchor","start").call(u.font,V).text(q?w(ie,oe):ie);var ae=j.itemwidth+2*v.itemGap;r.positionText(Y,ae,0),q?Y.call(r.makeEditable,{gd:H,text:ie}).call(P,U,H,j).on("edit",function(X){this.text(w(X,oe)).call(P,U,H,j);var J=W.trace._fullInput||{},ue={};if(T.hasTransform(J,"groupby")){var re=T.getTransformIndices(J,"groupby"),ne=re[re.length-1],se=I.keyedContainer(J,"transforms["+ne+"].styles","target","value.name");se.set(W.trace._group,X),ue=se.constructUpdate()}else ue.name=X;return J._isShape?T.call("_guiRelayout",H,"shapes["+B.index+"].name",ue.name):T.call("_guiRestyle",H,ue,B.index)}):P(Y,U,H,j)}function w(U,H){var j=Math.max(4,H);if(U&&U.trim().length>=j/2)return U;for(var ee=j-(U=U||"").length;ee>0;ee--)U+=" ";return U}function E(U,H,j){var W,ee=H._context.doubleClickDelay,B=1,te=I.ensureSingle(U,"rect",j+"toggle",function(q){H._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(a.fill,"rgba(0,0,0,0)")});H._context.staticPlot||(te.on("mousedown",function(){(W=(new Date).getTime())-H._legendMouseDownTime<ee?B+=1:(B=1,H._legendMouseDownTime=W)}),te.on("mouseup",function(){if(!H._dragged&&!H._editing){var q=H._fullLayout[j];(new Date).getTime()-H._legendMouseDownTime>ee&&(B=Math.max(B-1,1)),c(H,q,U,B,M.event)}}))}function P(U,H,j,ee,W){ee._inHover&&U.attr("data-notex",!0),r.convertToTspans(U,j,function(){!function R(U,H,j,ee){var W=U.data()[0][0];if(!j._inHover&&W&&!W.trace.showlegend)return void U.remove();var B=U.select("g[class*=math-group]"),te=B.node(),q=O(j);j||(j=H._fullLayout[q]);var ie,oe=j.borderwidth;ie=1===ee?j.title.font:W.groupTitle?W.groupTitle.font:j.font;var Y,ae,V=ie.size*f;if(te){var X=u.bBox(te);Y=X.height,ae=X.width,1===ee?u.setTranslate(B,oe,oe+.75*Y):u.setTranslate(B,0,.25*Y)}else{var J="."+q+(1===ee?"title":"")+"text",ue=U.select(J),re=r.lineCount(ue),ne=ue.node();if(Y=V*re,ae=ne?u.bBox(ne).width:0,1===ee)"left"===j.title.side&&(ae+=2*v.itemGap),r.positionText(ue,oe+v.titlePad,oe+V);else{var se=2*v.itemGap+j.itemwidth;W.groupTitle&&(se=v.itemGap,ae-=j.itemwidth),r.positionText(ue,se,-V*((re-1)/2-.3))}}1===ee?(j._titleWidth=ae,j._titleHeight=Y):(W.lineHeight=V,W.height=Math.max(Y,16)+3,W.width=ae)}(H,j,ee,W)})}function D(U){return I.isRightAnchor(U)?"right":I.isCenterAnchor(U)?"center":"left"}function k(U){return I.isBottomAnchor(U)?"bottom":I.isMiddleAnchor(U)?"middle":"top"}function O(U){return U._id||"legend"}$.exports=function(H,j){if(j)A(H,j);else{var ee=H._fullLayout,W=ee._legends;ee._infolayer.selectAll('[class^="legend"]').each(function(){var ie=M.select(this),Y=ie.attr("class").split(" ")[0];Y.match(m)&&-1===W.indexOf(Y)&&ie.remove()});for(var te=0;te<W.length;te++){var q=W[te];A(H,H._fullLayout[q])}}}},36560:($,K,e)=>{"use strict";var M=e(97799),I=e(88387);$.exports=function(T,n,i){var s,x,u=n._inHover,a=I.isGrouped(n),r=I.isReversed(n),o={},v=[],p=!1,f={},l=0,y=0;function h(U,H,j){if(!1!==n.visible&&(!i||U===n._id))if(""!==H&&I.isGrouped(n))-1===v.indexOf(H)?(v.push(H),p=!0,o[H]=[j]):o[H].push(j);else{var ee="~~i"+l;v.push(ee),o[ee]=[j],l++}}for(s=0;s<T.length;s++){var g=T[s],m=g[0],d=m.trace,A=d.legend,b=d.legendgroup;if(u||d.visible&&d.showlegend)if(M.traceIs(d,"pie-like"))for(f[b]||(f[b]={}),x=0;x<g.length;x++){var c=g[x].label;f[b][c]||(h(A,b,{label:c,color:g[x].color,i:g[x].i,trace:d,pts:g[x].pts}),f[b][c]=!0,y=Math.max(y,(c||"").length))}else h(A,b,m),y=Math.max(y,(d.name||"").length)}if(!v.length)return[];var S=!p||!a,w=[];for(s=0;s<v.length;s++){var E=o[v[s]];S?w.push(E[0]):w.push(E)}for(S&&(w=[w]),s=0;s<w.length;s++){var P=1/0;for(x=0;x<w[s].length;x++){var R=w[s][x].trace.legendrank;P>R&&(P=R)}w[s][0]._groupMinRank=P,w[s][0]._preGroupSort=s}var _=function(U,H){return U.trace.legendrank-H.trace.legendrank||U._preSort-H._preSort};for(w.forEach(function(U,H){U[0]._preGroupSort=H}),w.sort(function(U,H){return U[0]._groupMinRank-H[0]._groupMinRank||U[0]._preGroupSort-H[0]._preGroupSort}),s=0;s<w.length;s++){w[s].forEach(function(U,H){U._preSort=H}),w[s].sort(_);var z=w[s][0].trace,D=null;for(x=0;x<w[s].length;x++){var k=w[s][x].trace.legendgrouptitle;if(k&&k.text){D=k,u&&(k.font=n._groupTitleFont);break}}if(r&&w[s].reverse(),D){var O=!1;for(x=0;x<w[s].length;x++)if(M.traceIs(w[s][x].trace,"pie-like")){O=!0;break}w[s].unshift({i:-1,groupTitle:D,noClick:O,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:"toggleitem"===n.groupclick||z.visible}})}for(x=0;x<w[s].length;x++)w[s][x]=[w[s][x]]}return n._lgroupsLength=w.length,n._maxNameLength=y,w}},77638:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=I.pushUnique,T=!0;$.exports=function(i,u,a){var r=u._fullLayout;if(!u._dragged&&!u._editing){var f,o=r.legend.itemclick,v=r.legend.itemdoubleclick,p=r.legend.groupclick;if(1===a&&"toggle"===o&&"toggleothers"===v&&T&&u.data&&u._context.showTips&&I.notifier(I._(u,"Double-click on legend to isolate one trace"),"long"),T=!1,1===a?f=o:2===a&&(f=v),f){var l="togglegroup"===p,y=r.hiddenlabels?r.hiddenlabels.slice():[],s=i.data()[0][0];if(!s.groupTitle||!s.noClick){var x=u._fullData,h=(r.shapes||[]).filter(function(ke){return ke.showlegend}),g=x.concat(h),m=s.trace;m._isShape&&(m=m._fullInput);var A,b,c,S,w,d=m.legendgroup,P={},R=[],F=[],_=[],D=(r.shapes||[]).map(function(ke){return ke._input}),k=!1,H=m.legend,j=m._fullInput;if(!(j&&j._isShape)&&M.traceIs(m,"pie-like")){var W=s.label,B=y.indexOf(W);if("toggle"===f)-1===B?y.push(W):y.splice(B,1);else if("toggleothers"===f){var te=-1!==B,q=[];for(A=0;A<u.calcdata.length;A++){var oe=u.calcdata[A];for(b=0;b<oe.length;b++){var V=oe[b].label;H===oe[0].trace.legend&&W!==V&&(-1===y.indexOf(V)&&(te=!0),t(y,V),q.push(V))}}if(!te)for(var Y=0;Y<q.length;Y++){var ae=y.indexOf(q[Y]);-1!==ae&&y.splice(ae,1)}}M.call("_guiRelayout",u,"hiddenlabels",y)}else{var ue,X=d&&d.length,J=[];if(X)for(A=0;A<g.length;A++)(ue=g[A]).visible&&ue.legendgroup===d&&J.push(A);if("toggle"===f){var re;switch(m.visible){case!0:re="legendonly";break;case!1:re=!1;break;case"legendonly":re=!0}if(X)if(l)for(A=0;A<g.length;A++){var ne=g[A];!1!==ne.visible&&ne.legendgroup===d&&U(ne,re)}else U(m,re);else U(m,re)}else if("toggleothers"===f){var se,de,be,De,_e,Ce=!0;for(A=0;A<g.length;A++)if(se=(_e=g[A])===m,be=!0!==_e.showlegend,!(se||be||(de=X&&_e.legendgroup===d,de||_e.legend!==H||!0!==_e.visible||M.traceIs(_e,"notLegendIsolatable")))){Ce=!1;break}for(A=0;A<g.length;A++)if(!1!==(_e=g[A]).visible&&_e.legend===H&&!M.traceIs(_e,"notLegendIsolatable"))switch(m.visible){case"legendonly":U(_e,!0);break;case!0:De=!!Ce||"legendonly",se=_e===m,be=!0!==_e.showlegend&&!_e.legendgroup,U(_e,!(!(de=se||X&&_e.legendgroup===d)&&!be)||De)}}for(A=0;A<F.length;A++)if(c=F[A]){var Le=c.constructUpdate(),Fe=Object.keys(Le);for(b=0;b<Fe.length;b++)S=Fe[b],(P[S]=P[S]||[])[_[A]]=Le[S]}for(w=Object.keys(P),A=0;A<w.length;A++)for(S=w[A],b=0;b<R.length;b++)P[S].hasOwnProperty(b)||(P[S][b]=void 0);k?M.call("_guiUpdate",u,P,{shapes:D},R):M.call("_guiRestyle",u,P,R)}}}}function z(ke,ze){var Pe=R.indexOf(ke),Ie=P.visible;return Ie||(Ie=P.visible=[]),-1===R.indexOf(ke)&&(R.push(ke),Pe=R.length-1),Ie[Pe]=ze,Pe}function U(ke,ze){if(!s.groupTitle||l){var Pe=ke._fullInput||ke,Ie=Pe._isShape,Qe=Pe.index;if(void 0===Qe&&(Qe=Pe._index),M.hasTransform(Pe,"groupby")){var at=F[Qe];if(!at){var Be=M.getTransformIndices(Pe,"groupby"),Ne=Be[Be.length-1];at=I.keyedContainer(Pe,"transforms["+Ne+"].styles","target","value.visible"),F[Qe]=at}var nt=at.get(ke._group);void 0===nt&&(nt=!0),!1!==nt&&at.set(ke._group,ze),_[Qe]=z(Qe,!1!==Pe.visible)}else{var ct=!1!==Pe.visible&&ze;Ie?function O(ke,ze){D[ke].visible=ze,k=!0}(Qe,ct):z(Qe,ct)}}}}},88387:($,K)=>{"use strict";K.isGrouped=function(M){return-1!==(M.traceorder||"").indexOf("grouped")},K.isVertical=function(M){return"h"!==M.orientation},K.isReversed=function(M){return-1!==(M.traceorder||"").indexOf("reversed")}},66160:($,K,e)=>{"use strict";$.exports={moduleType:"component",name:"legend",layoutAttributes:e(69937),supplyLayoutDefaults:e(6310),draw:e(78802),style:e(32571)}},32571:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(5228),T=t.strTranslate,n=e(27630),i=e(8416),u=e(981).extractOpts,a=e(49258),r=e(40631),o=e(63149).castOption,v=e(11669);function x(m,d){return(d?"radial":"horizontal")+(m?"":"reversed")}function h(m){var d=m[0].trace,A=d.contours,b=a.hasLines(d),c=a.hasMarkers(d),S=d.visible&&d.fill&&"none"!==d.fill,w=!1,E=!1;if(A){var P=A.coloring;"lines"===P?w=!0:b="none"===P||"heatmap"===P||A.showlines,"constraint"===A.type?S="="!==A._operation:("fill"===P||"heatmap"===P)&&(E=!0)}return{showMarker:c,showLine:b,showFill:S,showGradientLine:w,showGradientFill:E,anyLine:b||w,anyFill:S||E}}function g(m,d,A){return m&&t.isArrayOrTypedArray(m)?d:m>A?A:m}$.exports=function(d,A,b){var c=A._fullLayout;b||(b=c.legend);var S="constant"===b.itemsizing,w=b.itemwidth,E=(w+2*v.itemGap)/2,P=T(E,0),R=function(q,oe,ie,V){var Y;if(q+1)Y=q;else{if(!(oe&&oe.width>0))return 0;Y=oe.width}return S?V:Math.min(Y,ie)};function O(q,oe,ie){var V=q[0].trace,Y=V.marker||{},ae=Y.line||{},X=ie?V.visible&&V.type===ie:I.traceIs(V,"bar"),J=M.select(oe).select("g.legendpoints").selectAll("path.legend"+ie).data(X?[q]:[]);J.enter().append("path").classed("legend"+ie,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",P),J.exit().remove(),J.each(function(ue){var re=M.select(this),ne=ue[0],se=R(ne.mlw,Y.line,5,2);re.style("stroke-width",se+"px");var de=ne.mcc;if(!b._inHover&&"mc"in ne){var be=u(Y),De=be.mid;void 0===De&&(De=(be.max+be.min)/2),de=n.tryColorscale(Y,"")(De)}var _e=de||ne.mc||Y.color,Ce=Y.pattern,Le=Ce&&n.getPatternAttr(Ce.shape,0,"");if(Le){var Fe=n.getPatternAttr(Ce.bgcolor,0,null),ke=n.getPatternAttr(Ce.fgcolor,0,null),ze=Ce.fgopacity,Pe=g(Ce.size,8,10),Ie=g(Ce.solidity,.5,1),Qe="legend-"+V.uid;re.call(n.pattern,"legend",A,Qe,Le,Pe,Ie,de,Ce.fillmode,Fe,ke,ze)}else re.call(i.fill,_e);se&&i.stroke(re,ne.mlc||ae.color)})}function B(q,oe,ie){var V=q[0],Y=V.trace,ae=ie?Y.visible&&Y.type===ie:I.traceIs(Y,ie),X=M.select(oe).select("g.legendpoints").selectAll("path.legend"+ie).data(ae?[q]:[]);if(X.enter().append("path").classed("legend"+ie,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",P),X.exit().remove(),X.size()){var J=Y.marker||{},ue=R(o(J.line.width,V.pts),J.line,5,2),re="pieLike",ne=t.minExtend(Y,{marker:{line:{width:ue}}},re),se=t.minExtend(V,{trace:ne},re);r(X,se,ne,A)}}d.each(function(q){var oe=M.select(this),ie=t.ensureSingle(oe,"g","layers");ie.style("opacity",q[0].trace.opacity);var V=b.valign,Y=q[0].lineHeight,ae=q[0].height;if("middle"!==V&&Y&&ae){var J={top:1,bottom:-1}[V]*(.5*(Y-ae+3));ie.attr("transform",T(0,J))}else ie.attr("transform",null);ie.selectAll("g.legendfill").data([q]).enter().append("g").classed("legendfill",!0),ie.selectAll("g.legendlines").data([q]).enter().append("g").classed("legendlines",!0);var ne=ie.selectAll("g.legendsymbols").data([q]);ne.enter().append("g").classed("legendsymbols",!0),ne.selectAll("g.legendpoints").data([q]).enter().append("g").classed("legendpoints",!0)}).each(function te(q){var ie,oe=q[0].trace,V=[];if(oe.visible)switch(oe.type){case"histogram2d":case"heatmap":V=[["M-15,-2V4H15V-2Z"]],ie=!0;break;case"choropleth":case"choroplethmapbox":V=[["M-6,-6V6H6V-6Z"]],ie=!0;break;case"densitymapbox":V=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],ie="radial";break;case"cone":V=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],ie=!1;break;case"streamtube":V=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],ie=!1;break;case"surface":V=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],ie=!0;break;case"mesh3d":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ie=!1;break;case"volume":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ie=!0;break;case"isosurface":V=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],ie=!1}var Y=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(V);Y.enter().append("path").classed("legend3dandfriends",!0).attr("transform",P).style("stroke-miterlimit",1),Y.exit().remove(),Y.each(function(ae,X){var de,J=M.select(this),ue=u(oe),re=ue.colorscale,ne=ue.reversescale;if(re){if(!ie){var De=re.length;de=0===X?re[ne?De-1:0][1]:1===X?re[ne?0:De-1][1]:re[Math.floor((De-1)/2)][1]}}else{var be=oe.vertexcolor||oe.facecolor||oe.color;de=t.isArrayOrTypedArray(be)?be[X]||be[0]:be}J.attr("d",ae[0]),de?J.call(i.fill,de):J.call(function(_e){if(_e.size()){var Ce="legendfill-"+oe.uid;n.gradient(_e,A,Ce,x(ne,"radial"===ie),re,"fill")}})})}).each(function z(q){var oe=q[0].trace,ie="waterfall"===oe.type;if(q[0]._distinct&&ie){var V=q[0].trace[q[0].dir].marker;return q[0].mc=V.color,q[0].mlw=V.line.width,q[0].mlc=V.line.color,O(q,this,"waterfall")}var Y=[];oe.visible&&ie&&(Y=q[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ae=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(Y);ae.enter().append("path").classed("legendwaterfall",!0).attr("transform",P).style("stroke-miterlimit",1),ae.exit().remove(),ae.each(function(X){var J=M.select(this),ue=oe[X[0]].marker,re=R(void 0,ue.line,5,2);J.attr("d",X[1]).style("stroke-width",re+"px").call(i.fill,ue.color),re&&J.call(i.stroke,ue.line.color)})}).each(function k(q){O(q,this,"funnel")}).each(function D(q){O(q,this)}).each(function U(q){var oe=q[0].trace,ie=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(oe.visible&&I.traceIs(oe,"box-violin")?[q]:[]);ie.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",P),ie.exit().remove(),ie.each(function(){var V=M.select(this);if("all"!==oe.boxpoints&&"all"!==oe.points||0!==i.opacity(oe.fillcolor)||0!==i.opacity((oe.line||{}).color)){var ae=R(void 0,oe.line,5,2);V.style("stroke-width",ae+"px").call(i.fill,oe.fillcolor),ae&&i.stroke(V,oe.line.color)}else{var Y=t.minExtend(oe,{marker:{size:S?12:t.constrain(oe.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});ie.call(n.pointStyle,Y,A)}})}).each(function W(q){B(q,this,"funnelarea")}).each(function ee(q){B(q,this,"pie")}).each(function F(q){var ne,se,oe=h(q),ie=oe.showFill,V=oe.showLine,Y=oe.showGradientLine,ae=oe.showGradientFill,X=oe.anyFill,J=oe.anyLine,ue=q[0],re=ue.trace,de=u(re),be=de.colorscale,De=de.reversescale,Le=a.hasMarkers(re)||!X?"M5,0":J?"M5,-2":"M5,-3",Fe=M.select(this),ke=Fe.select(".legendfill").selectAll("path").data(ie||ae?[q]:[]);if(ke.enter().append("path").classed("js-fill",!0),ke.exit().remove(),ke.attr("d",Le+"h"+w+"v6h-"+w+"z").call(function(Ie){if(Ie.size())if(ie)n.fillGroupStyle(Ie,A);else{var Qe="legendfill-"+re.uid;n.gradient(Ie,A,Qe,x(De),be,"fill")}}),V||Y){var ze=R(void 0,re.line,10,5);se=t.minExtend(re,{line:{width:ze}}),ne=[t.minExtend(ue,{trace:se})]}var Pe=Fe.select(".legendlines").selectAll("path").data(V||Y?[ne]:[]);Pe.enter().append("path").classed("js-line",!0),Pe.exit().remove(),Pe.attr("d",Le+(Y?"l"+w+",0.0001":"h"+w)).call(V?n.lineGroupStyle:function(Ie){if(Ie.size()){var Qe="legendline-"+re.uid;n.lineGroupStyle(Ie),n.gradient(Ie,A,Qe,x(De),be,"stroke")}})}).each(function _(q){var re,ne,oe=h(q),ie=oe.anyFill,V=oe.anyLine,Y=oe.showLine,ae=oe.showMarker,X=q[0],J=X.trace,ue=!ae&&!V&&!ie&&a.hasText(J);function se(ke,ze,Pe,Ie){var Qe=t.nestedProperty(J,ke).get(),at=t.isArrayOrTypedArray(Qe)&&ze?ze(Qe):Qe;if(S&&at&&void 0!==Ie&&(at=Ie),Pe){if(at<Pe[0])return Pe[0];if(at>Pe[1])return Pe[1]}return at}function de(ke){return X._distinct&&X.index&&ke[X.index]?ke[X.index]:ke[0]}if(ae||ue||Y){var be={},De={};if(ae){be.mc=se("marker.color",de),be.mx=se("marker.symbol",de),be.mo=se("marker.opacity",t.mean,[.2,1]),be.mlc=se("marker.line.color",de),be.mlw=se("marker.line.width",t.mean,[0,5],2),De.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var _e=se("marker.size",t.mean,[2,16],12);be.ms=_e,De.marker.size=_e}Y&&(De.line={width:se("line.width",de,[0,10],5)}),ue&&(be.tx="Aa",be.tp=se("textposition",de),be.ts=10,be.tc=se("textfont.color",de),be.tf=se("textfont.family",de)),re=[t.minExtend(X,be)],(ne=t.minExtend(J,De)).selectedpoints=null,ne.texttemplate=null}var Ce=M.select(this).select("g.legendpoints"),Le=Ce.selectAll("path.scatterpts").data(ae?re:[]);Le.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",P),Le.exit().remove(),Le.call(n.pointStyle,ne,A),ae&&(re[0].mrc=3);var Fe=Ce.selectAll("g.pointtext").data(ue?re:[]);Fe.enter().append("g").classed("pointtext",!0).append("text").attr("transform",P),Fe.exit().remove(),Fe.selectAll("text").call(n.textPointStyle,ne,A)}).each(function H(q){var oe=q[0].trace,ie=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(oe.visible&&"candlestick"===oe.type?[q,q]:[]);ie.enter().append("path").classed("legendcandle",!0).attr("d",function(V,Y){return Y?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",P).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(V,Y){var ae=M.select(this),X=oe[Y?"increasing":"decreasing"],J=R(void 0,X.line,5,2);ae.style("stroke-width",J+"px").call(i.fill,X.fillcolor),J&&i.stroke(ae,X.line.color)})}).each(function j(q){var oe=q[0].trace,ie=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(oe.visible&&"ohlc"===oe.type?[q,q]:[]);ie.enter().append("path").classed("legendohlc",!0).attr("d",function(V,Y){return Y?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",P).style("stroke-miterlimit",1),ie.exit().remove(),ie.each(function(V,Y){var ae=M.select(this),X=oe[Y?"increasing":"decreasing"],J=R(void 0,X.line,5,2);ae.style("fill","none").call(n.dashLine,X.line.dash,J),J&&i.stroke(ae,X.line.color)})})}},36037:($,K,e)=>{"use strict";var M=e(82813);$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+M.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+M.foreButtons.join("*, *")+"*."].join(" ")}}},94710:($,K,e)=>{"use strict";var M=e(97799),I=e(31556),t=e(78168),T=e(65185),n=e(86249).eraseActiveShape,i=e(5228),u=i._,a=$.exports={};function r(m,d){var R,F,A=d.currentTarget,b=A.getAttribute("data-attr"),c=A.getAttribute("data-val")||!0,S=m._fullLayout,w={},E=t.list(m,null,!0),P=S._cartesianSpikesEnabled;if("zoom"===b){var k,_="in"===c?.5:2,z=(1+_)/2,D=(1-_)/2;for(F=0;F<E.length;F++)if(!(R=E[F]).fixedrange)if(k=R._name,"auto"===c)w[k+".autorange"]=!0;else if("reset"===c)void 0===R._rangeInitial0&&void 0===R._rangeInitial1?w[k+".autorange"]=!0:void 0===R._rangeInitial0?(w[k+".autorange"]=R._autorangeInitial,w[k+".range"]=[null,R._rangeInitial1]):void 0===R._rangeInitial1?(w[k+".range"]=[R._rangeInitial0,null],w[k+".autorange"]=R._autorangeInitial):w[k+".range"]=[R._rangeInitial0,R._rangeInitial1],void 0!==R._showSpikeInitial&&(w[k+".showspikes"]=R._showSpikeInitial,"on"===P&&!R._showSpikeInitial&&(P="off"));else{var O=[R.r2l(R.range[0]),R.r2l(R.range[1])],U=[z*O[0]+D*O[1],z*O[1]+D*O[0]];w[k+".range[0]"]=R.l2r(U[0]),w[k+".range[1]"]=R.l2r(U[1])}}else"hovermode"===b&&("x"===c||"y"===c)&&(c=S._isHoriz?"y":"x",A.setAttribute("data-val",c)),w[b]=c;S._cartesianSpikesEnabled=P,M.call("_guiRelayout",m,w)}function o(m,d){for(var A=d.currentTarget,b=A.getAttribute("data-attr"),c=A.getAttribute("data-val")||!0,S=m._fullLayout._subplots.gl3d||[],w={},E=b.split("."),P=0;P<S.length;P++)w[S[P]+"."+E[1]]=c;var R="pan"===c?c:"zoom";w.dragmode=R,M.call("_guiRelayout",m,w)}function v(m,d){for(var b=d.currentTarget.getAttribute("data-attr"),c="resetLastSave"===b,S="resetDefault"===b,w=m._fullLayout,E=w._subplots.gl3d||[],P={},R=0;R<E.length;R++){var O,F=E[R],_=F+".camera",z=F+".aspectratio",D=F+".aspectmode",k=w[F]._scene;c?(P[_+".up"]=k.viewInitial.up,P[_+".eye"]=k.viewInitial.eye,P[_+".center"]=k.viewInitial.center,O=!0):S&&(P[_+".up"]=null,P[_+".eye"]=null,P[_+".center"]=null,O=!0),O&&(P[z+".x"]=k.viewInitial.aspectratio.x,P[z+".y"]=k.viewInitial.aspectratio.y,P[z+".z"]=k.viewInitial.aspectratio.z,P[D]=k.viewInitial.aspectmode)}M.call("_guiRelayout",m,P)}function p(m,d){var A=d.currentTarget,b=A._previousVal,c=m._fullLayout,S=c._subplots.gl3d||[],w=["xaxis","yaxis","zaxis"],E={},P={};if(b)P=b,A._previousVal=null;else{for(var R=0;R<S.length;R++){var F=S[R],_=c[F],z=F+".hovermode";E[z]=_.hovermode,P[z]=!1;for(var D=0;D<3;D++){var k=w[D],O=F+"."+k+".showspikes";P[O]=!1,E[O]=_[k].showspikes}}A._previousVal=E}return P}function l(m,d){for(var A=d.currentTarget,b=A.getAttribute("data-attr"),c=A.getAttribute("data-val")||!0,S=m._fullLayout,w=S._subplots.geo||[],E=0;E<w.length;E++){var P=w[E],R=S[P];if("zoom"===b){var F=R.projection.scale,_="in"===c?2*F:.5*F;M.call("_guiRelayout",m,P+".projection.scale",_)}}"reset"===b&&g(m,"geo")}function y(m){var d=m._fullLayout;return!d.hovermode&&(d._has("cartesian")?d._isHoriz?"y":"x":"closest")}function s(m){var d=y(m);M.call("_guiRelayout",m,"hovermode",d)}function h(m,d){for(var b=d.currentTarget.getAttribute("data-val"),c=m._fullLayout,S=c._subplots.mapbox||[],E={},P=0;P<S.length;P++){var R=S[P],F=c[R].zoom,_="in"===b?1.05*F:F/1.05;E[R+".zoom"]=_}M.call("_guiRelayout",m,E)}function g(m,d){for(var A=m._fullLayout,b=A._subplots[d]||[],c={},S=0;S<b.length;S++)for(var w=b[S],P=A[w]._subplot.viewInitial,R=Object.keys(P),F=0;F<R.length;F++){var _=R[F];c[w+"."+_]=P[_]}M.call("_guiRelayout",m,c)}a.toImage={name:"toImage",title:function(m){var A=(m._context.toImageButtonOptions||{}).format||"png";return u(m,"png"===A?"Download plot as a png":"Download plot")},icon:T.camera,click:function(m){var d=m._context.toImageButtonOptions,A={format:d.format||"png"};i.notifier(u(m,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==A.format&&i.isIE()&&(i.notifier(u(m,"IE only supports svg.  Changing format to svg."),"long"),A.format="svg"),["filename","width","height","scale"].forEach(function(b){b in d&&(A[b]=d[b])}),M.call("downloadImage",m,A).then(function(b){i.notifier(u(m,"Snapshot succeeded")+" - "+b,"long")}).catch(function(){i.notifier(u(m,"Sorry, there was a problem downloading your snapshot!"),"long")})}},a.sendDataToCloud={name:"sendDataToCloud",title:function(m){return u(m,"Edit in Chart Studio")},icon:T.disk,click:function(m){I.sendDataToCloud(m)}},a.editInChartStudio={name:"editInChartStudio",title:function(m){return u(m,"Edit in Chart Studio")},icon:T.pencil,click:function(m){I.sendDataToCloud(m)}},a.zoom2d={name:"zoom2d",_cat:"zoom",title:function(m){return u(m,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:r},a.pan2d={name:"pan2d",_cat:"pan",title:function(m){return u(m,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:r},a.select2d={name:"select2d",_cat:"select",title:function(m){return u(m,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:r},a.lasso2d={name:"lasso2d",_cat:"lasso",title:function(m){return u(m,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:r},a.drawclosedpath={name:"drawclosedpath",title:function(m){return u(m,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:r},a.drawopenpath={name:"drawopenpath",title:function(m){return u(m,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:r},a.drawline={name:"drawline",title:function(m){return u(m,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:r},a.drawrect={name:"drawrect",title:function(m){return u(m,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:r},a.drawcircle={name:"drawcircle",title:function(m){return u(m,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:r},a.eraseshape={name:"eraseshape",title:function(m){return u(m,"Erase active shape")},icon:T.eraseshape,click:n},a.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(m){return u(m,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:r},a.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(m){return u(m,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:r},a.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(m){return u(m,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:r},a.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(m){return u(m,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:r},a.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(m){return u(m,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:r},a.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(m){return u(m,"Compare data on hover")},attr:"hovermode",val:function(m){return m._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:r},a.zoom3d={name:"zoom3d",_cat:"zoom",title:function(m){return u(m,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:o},a.pan3d={name:"pan3d",_cat:"pan",title:function(m){return u(m,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:o},a.orbitRotation={name:"orbitRotation",title:function(m){return u(m,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:o},a.tableRotation={name:"tableRotation",title:function(m){return u(m,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:o},a.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(m){return u(m,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:v},a.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(m){return u(m,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:v},a.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(m){return u(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function f(m,d){var A=p(m,d);M.call("_guiRelayout",m,A)}},a.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(m){return u(m,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},a.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(m){return u(m,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l},a.resetGeo={name:"resetGeo",_cat:"reset",title:function(m){return u(m,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:l},a.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(m){return u(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:s},a.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(m){return u(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:s},a.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(m){return u(m,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:s},a.resetViewSankey={name:"resetSankeyGroup",title:function(m){return u(m,"Reset view")},icon:T.home,click:function(m){for(var d={"node.groups":[],"node.x":[],"node.y":[]},A=0;A<m._fullData.length;A++){var b=m._fullData[A]._viewInitial;d["node.groups"].push(b.node.groups.slice()),d["node.x"].push(b.node.x.slice()),d["node.y"].push(b.node.y.slice())}M.call("restyle",m,d)}},a.toggleHover={name:"toggleHover",title:function(m){return u(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(m,d){var A=p(m,d);A.hovermode=y(m),M.call("_guiRelayout",m,A)}},a.resetViews={name:"resetViews",title:function(m){return u(m,"Reset views")},icon:T.home,click:function(m,d){var A=d.currentTarget;A.setAttribute("data-attr","zoom"),A.setAttribute("data-val","reset"),r(m,d),A.setAttribute("data-attr","resetLastSave"),v(m,d),g(m,"geo"),g(m,"mapbox")}},a.toggleSpikelines={name:"toggleSpikelines",title:function(m){return u(m,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(m){var d=m._fullLayout,A=d._cartesianSpikesEnabled;d._cartesianSpikesEnabled="on"===A?"off":"on",M.call("_guiRelayout",m,function x(m){for(var A="on"===m._fullLayout._cartesianSpikesEnabled,b=t.list(m,null,!0),c={},S=0;S<b.length;S++){var w=b[S];c[w._name+".showspikes"]=!!A||w._showSpikeInitial}return c}(m))}},a.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(m){return u(m,"Reset view")},attr:"reset",icon:T.home,click:function(m){g(m,"mapbox")}},a.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(m){return u(m,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:h},a.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(m){return u(m,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:h}},82813:($,K,e)=>{"use strict";var M=e(94710),I=Object.keys(M),t=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(t),n=[];I.forEach(function(u){!function(u){if(-1===T.indexOf(u._cat||u.name)){var a=u.name,r=(u._cat||u.name).toLowerCase();-1===n.indexOf(a)&&n.push(a),-1===n.indexOf(r)&&n.push(r)}}(M[u])}),n.sort(),$.exports={DRAW_MODES:t,backButtons:T,foreButtons:n}},64085:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(96906),T=e(36037);$.exports=function(i,u){var a=i.modebar||{},r=t.newContainer(u,"modebar");function o(p,f){return M.coerce(a,r,T,p,f)}o("orientation"),o("bgcolor",I.addOpacity(u.paper_bgcolor,.5));var v=I.contrast(I.rgb(u.modebar.bgcolor));o("color",I.addOpacity(v,.3)),o("activecolor",I.addOpacity(v,.7)),o("uirevision",u.uirevision),o("add"),o("remove")}},33771:($,K,e)=>{"use strict";$.exports={moduleType:"component",name:"modebar",layoutAttributes:e(36037),supplyLayoutDefaults:e(64085),manage:e(20602)}},20602:($,K,e)=>{"use strict";var M=e(78168),I=e(49258),t=e(97799),T=e(40235).isUnifiedHover,n=e(59017),i=e(94710),u=e(82813).DRAW_MODES,a=e(5228).extendDeep;$.exports=function(s){var x=s._fullLayout,h=s._context,g=x._modeBar;if(h.displayModeBar||h.watermark){if(!Array.isArray(h.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(h.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var d,m=h.modeBarButtons;d=Array.isArray(m)&&m.length?function l(y){for(var s=a([],y),x=0;x<s.length;x++)for(var h=s[x],g=0;g<h.length;g++){var m=h[g];if("string"==typeof m){if(void 0===i[m])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));s[x][g]=i[m]}}return s}(m):!h.displayModeBar&&h.watermark?[]:function r(y){var s=y._fullLayout,x=y._fullData,h=y._context;function g(X,J){if("string"==typeof J){if(J.toLowerCase()===X.toLowerCase())return!0}else{var ue=J.name,re=J._cat||J.name;if(ue===X||re===X.toLowerCase())return!0}return!1}var m=s.modebar.add;"string"==typeof m&&(m=[m]);var d=s.modebar.remove;"string"==typeof d&&(d=[d]);var A=h.modeBarButtonsToAdd.concat(m.filter(function(X){for(var J=0;J<h.modeBarButtonsToRemove.length;J++)if(g(X,h.modeBarButtonsToRemove[J]))return!1;return!0})),b=h.modeBarButtonsToRemove.concat(d.filter(function(X){for(var J=0;J<h.modeBarButtonsToAdd.length;J++)if(g(X,h.modeBarButtonsToAdd[J]))return!1;return!0})),c=s._has("cartesian"),S=s._has("gl3d"),w=s._has("geo"),E=s._has("pie"),P=s._has("funnelarea"),R=s._has("gl2d"),F=s._has("ternary"),_=s._has("mapbox"),z=s._has("polar"),D=s._has("smith"),k=s._has("sankey"),O=function o(y){for(var s=M.list({_fullLayout:y},null,!0),x=0;x<s.length;x++)if(!s[x].fixedrange)return!1;return!0}(s),U=T(s.hovermode),H=[];function j(X){if(X.length){for(var J=[],ue=0;ue<X.length;ue++){for(var re=X[ue],ne=i[re],se=ne.name.toLowerCase(),de=(ne._cat||ne.name).toLowerCase(),be=!1,De=0;De<b.length;De++){var _e=b[De].toLowerCase();if(_e===se||_e===de){be=!0;break}}be||J.push(i[re])}H.push(J)}}var ee=["toImage"];h.showEditInChartStudio?ee.push("editInChartStudio"):h.showSendToCloud&&ee.push("sendDataToCloud"),j(ee);var W=[],B=[],te=[],q=[];(c||R||E||P||F)+w+S+_+z+D>1?(B=["toggleHover"],te=["resetViews"]):w?(W=["zoomInGeo","zoomOutGeo"],B=["hoverClosestGeo"],te=["resetGeo"]):S?(B=["hoverClosest3d"],te=["resetCameraDefault3d","resetCameraLastSave3d"]):_?(W=["zoomInMapbox","zoomOutMapbox"],B=["toggleHover"],te=["resetViewMapbox"]):R?B=["hoverClosestGl2d"]:E?B=["hoverClosestPie"]:k?(B=["hoverClosestCartesian","hoverCompareCartesian"],te=["resetViewSankey"]):B=["toggleHover"],c&&(B=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function p(y){for(var s=0;s<y.length;s++)if(!t.traceIs(y[s],"noHover"))return!1;return!0}(x)||U)&&(B=[]),(c||R)&&!O&&(W=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==te[0]&&(te=["resetScale2d"])),S?q=["zoom3d","pan3d","orbitRotation","tableRotation"]:(c||R)&&!O||F?q=["zoom2d","pan2d"]:_||w?q=["pan2d"]:z&&(q=["zoom2d"]),function v(y){for(var s=!1,x=0;x<y.length&&!s;x++){var h=y[x];!h._module||!h._module.selectPoints||(t.traceIs(h,"scatter-like")?(I.hasMarkers(h)||I.hasText(h))&&(s=!0):t.traceIs(h,"box-violin")?("all"===h.boxpoints||"all"===h.points)&&(s=!0):s=!0)}return s}(x)&&q.push("select2d","lasso2d");var oe=[],ie=function(X){-1===oe.indexOf(X)&&-1!==B.indexOf(X)&&oe.push(X)};if(Array.isArray(A)){for(var V=[],Y=0;Y<A.length;Y++){var ae=A[Y];"string"==typeof ae?(ae=ae.toLowerCase(),-1!==u.indexOf(ae)?(s._has("mapbox")||s._has("cartesian"))&&q.push(ae):"togglespikelines"===ae?ie("toggleSpikelines"):"togglehover"===ae?ie("toggleHover"):"hovercompare"===ae?ie("hoverCompareCartesian"):"hoverclosest"===ae?(ie("hoverClosestCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie")):"v1hovermode"===ae&&(ie("toggleHover"),ie("hoverClosestCartesian"),ie("hoverCompareCartesian"),ie("hoverClosestGeo"),ie("hoverClosest3d"),ie("hoverClosestGl2d"),ie("hoverClosestPie"))):V.push(ae)}A=V}return j(q),j(W.concat(te)),j(oe),function f(y,s){if(s.length)if(Array.isArray(s[0]))for(var x=0;x<s.length;x++)y.push(s[x]);else y.push(s);return y}(H,A)}(s),g?g.update(s,d):x._modeBar=n(s,d)}else g&&(g.destroy(),delete x._modeBar)}},59017:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(5228),T=e(65185),n=e(60994).version,i=new DOMParser;function u(v){this.container=v.container,this.element=document.createElement("div"),this.update(v.graphInfo,v.buttons),this.container.appendChild(this.element)}var a=u.prototype;a.update=function(v,p){this.graphInfo=v;var f=this.graphInfo._context,l=this.graphInfo._fullLayout,y="modebar-"+l._uid;this.element.setAttribute("id",y),this._uid=y,this.element.className="modebar","hover"===f.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===l.modebar.orientation&&(this.element.className+=" vertical",p=p.reverse());var s=l.modebar,x="hover"===f.displayModeBar?".js-plotly-plot .plotly:hover ":"";t.deleteRelatedStyleRule(y),t.addRelatedStyleRule(y,x+"#"+y+" .modebar-group","background-color: "+s.bgcolor),t.addRelatedStyleRule(y,"#"+y+" .modebar-btn .icon path","fill: "+s.color),t.addRelatedStyleRule(y,"#"+y+" .modebar-btn:hover .icon path","fill: "+s.activecolor),t.addRelatedStyleRule(y,"#"+y+" .modebar-btn.active .icon path","fill: "+s.activecolor);var h=!this.hasButtons(p),g=this.hasLogo!==f.displaylogo,m=this.locale!==f.locale;if(this.locale=f.locale,(h||g||m)&&(this.removeAllButtons(),this.updateButtons(p),f.watermark||f.displaylogo)){var d=this.getLogo();f.watermark&&(d.className=d.className+" watermark"),"v"===l.modebar.orientation?this.element.insertBefore(d,this.element.childNodes[0]):this.element.appendChild(d),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(v){var p=this;this.buttons=v,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(f){var l=p.createGroup();f.forEach(function(y){var s=y.name;if(!s)throw new Error("must provide button 'name' in button config");if(-1!==p.buttonsNames.indexOf(s))throw new Error("button name '"+s+"' is taken");p.buttonsNames.push(s);var x=p.createButton(y);p.buttonElements.push(x),l.appendChild(x)}),p.element.appendChild(l)})},a.createGroup=function(){var v=document.createElement("div");return v.className="modebar-group",v},a.createButton=function(v){var p=this,f=document.createElement("a");f.setAttribute("rel","tooltip"),f.className="modebar-btn";var l=v.title;void 0===l?l=v.name:"function"==typeof l&&(l=l(this.graphInfo)),(l||0===l)&&f.setAttribute("data-title",l),void 0!==v.attr&&f.setAttribute("data-attr",v.attr);var y=v.val;if(void 0!==y&&("function"==typeof y&&(y=y(this.graphInfo)),f.setAttribute("data-val",y)),"function"!=typeof v.click)throw new Error("must provide button 'click' function in button config");f.addEventListener("click",function(h){v.click(p.graphInfo,h),p.updateActiveButton(h.currentTarget)}),f.setAttribute("data-toggle",v.toggle||!1),v.toggle&&M.select(f).classed("active",!0);var x=v.icon;return"function"==typeof x?f.appendChild(x()):f.appendChild(this.createIcon(x||T.question)),f.setAttribute("data-gravity",v.gravity||"n"),f},a.createIcon=function(v){var l,p=I(v.height)?Number(v.height):v.ascent-v.descent,f="http://www.w3.org/2000/svg";if(v.path){(l=document.createElementNS(f,"svg")).setAttribute("viewBox",[0,0,v.width,p].join(" ")),l.setAttribute("class","icon");var y=document.createElementNS(f,"path");y.setAttribute("d",v.path),v.transform?y.setAttribute("transform",v.transform):void 0!==v.ascent&&y.setAttribute("transform","matrix(1 0 0 -1 0 "+v.ascent+")"),l.appendChild(y)}v.svg&&(l=i.parseFromString(v.svg,"application/xml").childNodes[0]);return l.setAttribute("height","1em"),l.setAttribute("width","1em"),l},a.updateActiveButton=function(v){var p=this.graphInfo._fullLayout,f=void 0!==v?v.getAttribute("data-attr"):null;this.buttonElements.forEach(function(l){var y=l.getAttribute("data-val")||!0,s=l.getAttribute("data-attr"),x="true"===l.getAttribute("data-toggle"),h=M.select(l);if(x)s===f&&h.classed("active",!h.classed("active"));else{var g=null===s?s:t.nestedProperty(p,s).get();h.classed("active",g===y)}})},a.hasButtons=function(v){var p=this.buttons;if(!p||v.length!==p.length)return!1;for(var f=0;f<v.length;++f){if(v[f].length!==p[f].length)return!1;for(var l=0;l<v[f].length;l++)if(v[f][l].name!==p[f][l].name)return!1}return!0},a.getLogo=function(){var v=this.createGroup(),p=document.createElement("a");return p.href="https://plotly.com/",p.target="_blank",p.setAttribute("data-title",function r(v){return v+" (v"+n+")"}(t._(this.graphInfo,"Produced with Plotly.js"))),p.className="modebar-btn plotlyjsicon modebar-btn--logo",p.appendChild(this.createIcon(T.newplotlylogo)),v.appendChild(p),v},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){t.removeElement(this.container.querySelector(".modebar")),t.deleteRelatedStyleRule(this._uid)},$.exports=function o(v,p){var f=v._fullLayout,l=new u({graphInfo:v,container:f._modebardiv.node(),buttons:p});return f._privateplot&&M.select(l.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),l}},70915:($,K,e)=>{"use strict";var M=e(47297),I=e(36593),T=(0,e(96906).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")});$.exports={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:M({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:I.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:I.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"}},60915:$=>{"use strict";$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},12515:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(96906),T=e(84322),n=e(70915),i=e(60915);function u(r,o,v,p){var f=p.calendar;function l(x,h){return M.coerce(r,o,n.buttons,x,h)}if(l("visible")){var s=l("step");"all"!==s&&(!f||"gregorian"===f||"month"!==s&&"year"!==s?l("stepmode"):o.stepmode="backward",l("count")),l("label")}}$.exports=function(o,v,p,f,l){var y=o.rangeselector||{},s=t.newContainer(v,"rangeselector");function x(A,b){return M.coerce(y,s,n,A,b)}if(x("visible",T(y,s,{name:"buttons",handleItemDefaults:u,calendar:l}).length>0)){var m=function a(r,o,v){for(var p=v.filter(function(s){return o[s].anchor===r._id}),f=0,l=0;l<p.length;l++){var y=o[p[l]].domain;y&&(f=Math.max(y[1],f))}return[r.domain[0],f+i.yPad]}(v,p,f);x("x",m[0]),x("y",m[1]),M.noneOrAll(o,v,["x","y"]),x("xanchor"),x("yanchor"),M.coerceFont(x,"font",p.font);var d=x("bgcolor");x("activecolor",I.contrast(d,i.lightAmount,i.darkAmount)),x("bordercolor"),x("borderwidth")}}},88407:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(31556),T=e(8416),n=e(27630),i=e(5228),u=i.strTranslate,a=e(88565),r=e(78168),o=e(94598),v=o.LINE_SPACING,p=o.FROM_TL,f=o.FROM_BR,l=e(60915),y=e(26191);function x(c){return c._id}function g(c,S,w){var E=i.ensureSingle(c,"rect","selector-rect",function(P){P.attr("shape-rendering","crispEdges")});E.attr({rx:l.rx,ry:l.ry}),E.call(T.stroke,S.bordercolor).call(T.fill,function m(c,S){return S._isActive||S._isHovered?c.activecolor:c.bgcolor}(S,w)).style("stroke-width",S.borderwidth+"px")}function d(c,S,w,E){i.ensureSingle(c,"text","selector-text",function(F){F.attr("text-anchor","middle")}).call(n.font,S.font).text(function A(c,S){return c.label?S?i.templateString(c.label,S):c.label:"all"===c.step?"all":c.count+c.step.charAt(0)}(w,E._fullLayout._meta)).call(function P(F){a.convertToTspans(F,E)})}$.exports=function(S){var E=S._fullLayout._infolayer.selectAll(".rangeselector").data(function s(c){for(var S=r.list(c,"x",!0),w=[],E=0;E<S.length;E++){var P=S[E];P.rangeselector&&P.rangeselector.visible&&w.push(P)}return w}(S),x);E.enter().append("g").classed("rangeselector",!0),E.exit().remove(),E.style({cursor:"pointer","pointer-events":"all"}),E.each(function(P){var R=M.select(this),F=P,_=F.rangeselector,z=R.selectAll("g.button").data(i.filterVisible(_.buttons));z.enter().append("g").classed("button",!0),z.exit().remove(),z.each(function(D){var k=M.select(this),O=y(F,D);D._isActive=function h(c,S,w){if("all"===S.step)return!0===c.autorange;var E=Object.keys(w);return c.range[0]===w[E[0]]&&c.range[1]===w[E[1]]}(F,D,O),k.call(g,_,D),k.call(d,_,D,S),k.on("click",function(){S._dragged||I.call("_guiRelayout",S,O)}),k.on("mouseover",function(){D._isHovered=!0,k.call(g,_,D)}),k.on("mouseout",function(){D._isHovered=!1,k.call(g,_,D)})}),function b(c,S,w,E,P){var R=0,F=0,_=w.borderwidth;S.each(function(){var j=M.select(this).select(".selector-text"),ee=w.font.size*v,W=Math.max(ee*a.lineCount(j),16)+3;F=Math.max(F,W)}),S.each(function(){var H=M.select(this),j=H.select(".selector-rect"),ee=H.select(".selector-text"),W=ee.node()&&n.bBox(ee.node()).width,B=w.font.size*v,te=a.lineCount(ee),q=Math.max(W+10,l.minButtonWidth);H.attr("transform",u(_+R,_)),j.attr({x:0,y:0,width:q,height:F}),a.positionText(ee,q/2,F/2-(te-1)*B/2+3),R+=q+5});var z=c._fullLayout._size,D=z.l+z.w*w.x,k=z.t+z.h*(1-w.y),O="left";i.isRightAnchor(w)&&(D-=R,O="right"),i.isCenterAnchor(w)&&(D-=R/2,O="center");var U="top";i.isBottomAnchor(w)&&(k-=F,U="bottom"),i.isMiddleAnchor(w)&&(k-=F/2,U="middle"),R=Math.ceil(R),F=Math.ceil(F),D=Math.round(D),k=Math.round(k),t.autoMargin(c,E+"-range-selector",{x:w.x,y:w.y,l:R*p[O],r:R*f[O],b:F*f[U],t:F*p[U]}),P.attr("transform",u(D,k))}(S,z,_,F._name,R)})}},26191:($,K,e)=>{"use strict";var M=e(82716),I=e(5228).titleCase;$.exports=function(n,i){var u=n._name,a={};if("all"===i.step)a[u+".autorange"]=!0;else{var r=function t(T,n){var v,i=T.range,u=new Date(T.r2l(i[1])),a=n.step,r=M["utc"+I(a)],o=n.count;switch(n.stepmode){case"backward":v=T.l2r(+r.offset(u,-o));break;case"todate":var p=r.offset(u,-o);v=T.l2r(+r.ceil(p))}var f=i[1];return[v,f]}(n,i);a[u+".range[0]"]=r[0],a[u+".range[1]"]=r[1]}return a}},29350:($,K,e)=>{"use strict";$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(70915)}}},layoutAttributes:e(70915),handleDefaults:e(12515),draw:e(88407)}},17123:($,K,e)=>{"use strict";var M=e(36593);$.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"}},47951:($,K,e)=>{"use strict";var M=e(78168).list,I=e(73332).getAutoRange,t=e(91961);$.exports=function(n){for(var i=M(n,"x",!0),u=0;u<i.length;u++){var a=i[u],r=a[t.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=I(n,a))}}},91961:$=>{"use strict";$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},32591:($,K,e)=>{"use strict";var M=e(5228),I=e(96906),t=e(78168),T=e(17123),n=e(17065);$.exports=function(u,a,r){var o=u[r],v=a[r];if(o.rangeslider||a._requestRangeslider[v._id]){M.isPlainObject(o.rangeslider)||(o.rangeslider={});var y,s,p=o.rangeslider,f=I.newContainer(v,"rangeslider");if(l("visible")){l("bgcolor",a.plot_bgcolor),l("bordercolor"),l("borderwidth"),l("thickness"),l("autorange",!v.isValidRange(p.range)),l("range");var g=a._subplots;if(g)for(var m=g.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===t.name2id(r)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),d=M.simpleMap(m,t.id2name),A=0;A<d.length;A++){var b=d[A];y=p[b]||{},s=I.newContainer(f,b,"yaxis");var S,c=a[b];y.range&&c.isValidRange(y.range)&&(S="fixed"),"match"!==x("rangemode",S)&&x("range",c.range.slice())}f._input=p}}function l(E,P){return M.coerce(p,f,T,E,P)}function x(E,P){return M.coerce(y,s,n,E,P)}}},35757:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(31556),T=e(5228),n=T.strTranslate,i=e(27630),u=e(8416),a=e(77875),r=e(24329),o=e(78168),v=e(25429),p=e(93720),f=e(91961);function l(S){return"number"==typeof S.clientX?S.clientX:S.touches&&S.touches.length>0?S.touches[0].clientX:0}function h(S,w,E,P){var R=T.ensureSingle(S,"rect",f.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),F=P.borderwidth%2==0?P.borderwidth:P.borderwidth-1,_=-P._offsetShift,z=i.crispRound(w,P.borderwidth);R.attr({width:P._width+F,height:P._height+F,transform:n(_,_),"stroke-width":z}).call(u.stroke,P.bordercolor).call(u.fill,P.bgcolor)}function g(S,w,E,P){var R=w._fullLayout;T.ensureSingleById(R._topdefs,"clipPath",P._clipId,function(_){_.append("rect").attr({x:0,y:0})}).select("rect").attr({width:P._width,height:P._height})}function m(S,w,E,P){var _,R=w.calcdata,F=S.selectAll("g."+f.rangePlotClassName).data(E._subplotsWith,T.identity);F.enter().append("g").attr("class",function(z){return f.rangePlotClassName+" "+z}).call(i.setClipUrl,P._clipId,w),F.order(),F.exit().remove(),F.each(function(z,D){var k=M.select(this),O=0===D,U=o.getFromId(w,z,"y"),H=U._name,j=P[H],ee={data:[],layout:{xaxis:{type:E.type,domain:[0,1],range:P.range.slice(),calendar:E.calendar},width:P._width,height:P._height,margin:{t:0,b:0,l:0,r:0}},_context:w._context};E.rangebreaks&&(ee.layout.xaxis.rangebreaks=E.rangebreaks),ee.layout[H]={type:U.type,domain:[0,1],range:"match"!==j.rangemode?j.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(ee.layout[H].rangebreaks=U.rangebreaks),t.supplyDefaults(ee);var W=ee._fullLayout.xaxis,B=ee._fullLayout[H];W.clearCalc(),W.setScale(),B.clearCalc(),B.setScale();var te={id:z,plotgroup:k,xaxis:W,yaxis:B,isRangePlot:!0};O?_=te:(te.mainplot="xy",te.mainplotinfo=_),r.rangePlot(w,te,function d(S,w){for(var E=[],P=0;P<S.length;P++){var R=S[P],F=R[0].trace;F.xaxis+F.yaxis===w&&E.push(R)}return E}(R,z))})}function A(S,w,E,P,R){(T.ensureSingle(S,"rect",f.maskMinClassName,function(k){k.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",P._height).call(u.fill,f.maskColor),T.ensureSingle(S,"rect",f.maskMaxClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",P._height).call(u.fill,f.maskColor),"match"!==R.rangemode)&&(T.ensureSingle(S,"rect",f.maskMinOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",P._width).call(u.fill,f.maskOppAxisColor),T.ensureSingle(S,"rect",f.maskMaxOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",P._width).style("border-top",f.maskOppBorder).call(u.fill,f.maskOppAxisColor))}function b(S,w,E,P){w._context.staticPlot||T.ensureSingle(S,"rect",f.slideBoxClassName,function(F){F.attr({y:0,cursor:f.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:P._height,fill:f.slideBoxFill})}function c(S,w,E,P){var R=T.ensureSingle(S,"g",f.grabberMinClassName),F=T.ensureSingle(S,"g",f.grabberMaxClassName),_={x:0,width:f.handleWidth,rx:f.handleRadius,fill:u.background,stroke:u.defaultLine,"stroke-width":f.handleStrokeWidth,"shape-rendering":"crispEdges"},z={y:Math.round(P._height/4),height:Math.round(P._height/2)};T.ensureSingle(R,"rect",f.handleMinClassName,function(j){j.attr(_)}).attr(z),T.ensureSingle(F,"rect",f.handleMaxClassName,function(j){j.attr(_)}).attr(z);var O={width:f.grabAreaWidth,x:0,y:0,fill:f.grabAreaFill,cursor:w._context.staticPlot?void 0:f.grabAreaCursor};T.ensureSingle(R,"rect",f.grabAreaMinClassName,function(j){j.attr(O)}).attr("height",P._height),T.ensureSingle(F,"rect",f.grabAreaMaxClassName,function(j){j.attr(O)}).attr("height",P._height)}$.exports=function(S){for(var w=S._fullLayout,E=w._rangeSliderData,P=0;P<E.length;P++){var R=E[P][f.name];R._clipId=R._id+"-"+w._uid}var _=w._infolayer.selectAll("g."+f.containerClassName).data(E,function F(z){return z._name});_.exit().each(function(z){var D=z[f.name];w._topdefs.select("#"+D._clipId).remove()}).remove(),0!==E.length&&(_.enter().append("g").classed(f.containerClassName,!0).attr("pointer-events","all"),_.each(function(z){var D=M.select(this),k=z[f.name],O=w[o.id2name(z.anchor)],U=k[o.id2name(z.anchor)];if(k.range){var ee,H=T.simpleMap(k.range,z.r2l),j=T.simpleMap(z.range,z.r2l);ee=j[0]<j[1]?[Math.min(H[0],j[0]),Math.max(H[1],j[1])]:[Math.max(H[0],j[0]),Math.min(H[1],j[1])],k.range=k._input.range=T.simpleMap(ee,z.l2r)}z.cleanRange("rangeslider.range");var W=w._size,B=z.domain;k._width=W.w*(B[1]-B[0]);var te=Math.round(W.l+W.w*B[0]),q=Math.round(W.t+W.h*(1-z._counterDomainMin)+("bottom"===z.side?z._depth:0)+k._offsetShift+f.extraPad);D.attr("transform",n(te,q)),k._rl=T.simpleMap(k.range,z.r2l);var oe=k._rl[0],ie=k._rl[1],V=ie-oe;if(k.p2d=function(be){return be/k._width*V+oe},k.d2p=function(be){return(be-oe)/V*k._width},z.rangebreaks){var Y=z.locateBreaks(oe,ie);if(Y.length){var ae,X,J=0;for(ae=0;ae<Y.length;ae++)J+=(X=Y[ae]).max-X.min;var ue=k._width/(ie-oe-J),re=[-ue*oe];for(ae=0;ae<Y.length;ae++)X=Y[ae],re.push(re[re.length-1]-ue*(X.max-X.min));for(k.d2p=function(be){for(var De=re[0],_e=0;_e<Y.length;_e++){var Ce=Y[_e];if(be>=Ce.max)De=re[_e+1];else if(be<Ce.min)break}return De+ue*be},ae=0;ae<Y.length;ae++)(X=Y[ae]).pmin=k.d2p(X.min),X.pmax=k.d2p(X.max);k.p2d=function(be){for(var De=re[0],_e=0;_e<Y.length;_e++){var Ce=Y[_e];if(be>=Ce.pmax)De=re[_e+1];else if(be<Ce.pmin)break}return(be-De)/ue}}}if("match"!==U.rangemode){var ne=O.r2l(U.range[0]),de=O.r2l(U.range[1])-ne;k.d2pOppAxis=function(be){return(be-ne)/de*k._height}}D.call(h,S,z,k).call(g,S,z,k).call(m,S,z,k).call(A,S,z,k,U).call(b,S,z,k).call(c,S,z,k),function y(S,w,E,P){if(w._context.staticPlot)return;var R=S.select("rect."+f.slideBoxClassName).node(),F=S.select("rect."+f.grabAreaMinClassName).node(),_=S.select("rect."+f.grabAreaMaxClassName).node();function z(){var D=M.event,k=D.target,O=l(D),U=O-S.node().getBoundingClientRect().left,H=P.d2p(E._rl[0]),j=P.d2p(E._rl[1]),ee=v.coverSlip();function W(te){var ie,V,Y,oe=+l(te)-O;switch(k){case R:if(Y="ew-resize",H+oe>E._length||j+oe<0)return;ie=H+oe,V=j+oe;break;case F:if(Y="col-resize",H+oe>E._length)return;ie=H+oe,V=j;break;case _:if(Y="col-resize",j+oe<0)return;ie=H,V=j+oe;break;default:Y="ew-resize",ie=U,V=U+oe}if(V<ie){var ae=V;V=ie,ie=ae}P._pixelMin=ie,P._pixelMax=V,p(M.select(ee),Y),function s(S,w,E,P){function R(z){return E.l2r(T.constrain(z,P._rl[0],P._rl[1]))}var F=R(P.p2d(P._pixelMin)),_=R(P.p2d(P._pixelMax));window.requestAnimationFrame(function(){I.call("_guiRelayout",w,E._name+".range",[F,_])})}(0,w,E,P)}function B(){ee.removeEventListener("mousemove",W),ee.removeEventListener("mouseup",B),this.removeEventListener("touchmove",W),this.removeEventListener("touchend",B),T.removeElement(ee)}this.addEventListener("touchmove",W),this.addEventListener("touchend",B),ee.addEventListener("mousemove",W),ee.addEventListener("mouseup",B)}S.on("mousedown",z),S.on("touchstart",z)}(D,S,z,k),function x(S,w,E,P,R,F){var _=f.handleWidth/2;function z(te){return T.constrain(te,0,P._width)}function D(te){return T.constrain(te,0,P._height)}function k(te){return T.constrain(te,-_,P._width+_)}var O=z(P.d2p(E._rl[0])),U=z(P.d2p(E._rl[1]));if(S.select("rect."+f.slideBoxClassName).attr("x",O).attr("width",U-O),S.select("rect."+f.maskMinClassName).attr("width",O),S.select("rect."+f.maskMaxClassName).attr("x",U).attr("width",P._width-U),"match"!==F.rangemode){var H=P._height-D(P.d2pOppAxis(R._rl[1])),j=P._height-D(P.d2pOppAxis(R._rl[0]));S.select("rect."+f.maskMinOppAxisClassName).attr("x",O).attr("height",H).attr("width",U-O),S.select("rect."+f.maskMaxOppAxisClassName).attr("x",O).attr("y",j).attr("height",P._height-j).attr("width",U-O),S.select("rect."+f.slideBoxClassName).attr("y",H).attr("height",j-H)}var ee=.5,W=Math.round(k(O-_))-ee,B=Math.round(k(U-_))+ee;S.select("g."+f.grabberMinClassName).attr("transform",n(W,ee)),S.select("g."+f.grabberMaxClassName).attr("transform",n(B,ee))}(D,0,z,k,O,U),"bottom"===z.side&&a.draw(S,z._id+"title",{propContainer:z,propName:z._name+".title",placeholder:w._dfltTitle.x,attributes:{x:z._offset+z._length/2,y:q+k._height+k._offsetShift+10+1.5*z.title.font.size,"text-anchor":"middle"}})}))}},1917:($,K,e)=>{"use strict";var M=e(78168),I=e(88565),t=e(91961),T=e(94598).LINE_SPACING,n=t.name;function i(u){var a=u&&u[n];return a&&a.visible}K.isVisible=i,K.makeData=function(u){var a=M.list({_fullLayout:u},"x",!0),r=u.margin,o=[];if(!u._has("gl2d"))for(var v=0;v<a.length;v++){var p=a[v];if(i(p)){o.push(p);var f=p[n];f._id=n+p._id,f._height=(u.height-r.b-r.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2)}}u._rangeSliderData=o},K.autoMarginOpts=function(u,a){var r=u._fullLayout,o=a[n],v=a._id.charAt(0),p=0,f=0;"bottom"===a.side&&(p=a._depth,a.title.text!==r._dfltTitle[v])&&(f=1.5*a.title.font.size+10+o._offsetShift,f+=(a.title.text.match(I.BR_TAG_ALL)||[]).length*a.title.font.size*T);return{x:0,y:a._counterDomainMin,l:0,r:0,t:0,b:o._height+p+Math.max(r.margin.b,f),pad:t.extraPad+2*o._offsetShift}}},92477:($,K,e)=>{"use strict";var M=e(5228),I=e(17123),t=e(17065),T=e(1917);$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},I,{yaxis:t})}}},layoutAttributes:e(17123),handleDefaults:e(32591),calcAutorange:e(47951),draw:e(35757),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},17065:$=>{"use strict";$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"}},19843:($,K,e)=>{"use strict";var M=e(6991),I=e(55405).line,t=e(65822).P,T=e(18836).extendFlat,n=e(71859).overrideAll,i=e(96906).templatedArray,u=e(4967);$.exports=n(i("selection",{type:{valType:"enumerated",values:["rect","path"],description:["Specifies the selection type to be drawn.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`) and (`x0`,`y1`).","If *path*, draw a custom SVG path using `path`."].join(" ")},xref:T({},M.xref,{description:["Sets the selection's x coordinate axis.",u.axisRefDescription("x","left","right")].join(" ")}),yref:T({},M.yref,{description:["Sets the selection's x coordinate axis.",u.axisRefDescription("y","bottom","top")].join(" ")}),x0:{valType:"any",description:"Sets the selection's starting x position."},x1:{valType:"any",description:"Sets the selection's end x position."},y0:{valType:"any",description:"Sets the selection's starting y position."},y1:{valType:"any",description:"Sets the selection's end y position."},path:{valType:"string",editType:"arraydraw",description:["For `type` *path* - a valid SVG path similar to `shapes.path` in data coordinates.","Allowed segments are: M, L and Z."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw",description:"Sets the opacity of the selection."},line:{color:I.color,width:T({},I.width,{min:1,dflt:1}),dash:T({},t,{dflt:"dot"})}}),"arraydraw","from-root")},87658:$=>{"use strict";$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},54842:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(84322),T=e(19843),n=e(25631);function i(u,a,r){function o(R,F){return M.coerce(u,a,T,R,F)}var v=o("path"),l="path"!==o("type",v?"path":"rect");l&&delete a.path,o("opacity"),o("line.color"),o("line.width"),o("line.dash");for(var y=["x","y"],s=0;s<2;s++){var g,m,d,x=y[s],h={_fullLayout:r},A=I.coerceRef(u,a,h,x);if((g=I.getFromId(h,A))._selectionIndices.push(a._index),d=n.rangeToShapePosition(g),m=n.shapePositionToRange(g),l){var b=x+"0",c=x+"1",S=u[b],w=u[c];u[b]=m(u[b],!0),u[c]=m(u[c],!0),I.coercePosition(a,h,o,A,b),I.coercePosition(a,h,o,A,c);var E=a[b],P=a[c];void 0!==E&&void 0!==P&&(a[b]=d(E),a[c]=d(P),u[b]=S,u[c]=w)}}l&&M.noneOrAll(u,a,["x0","x1","y0","y1"])}$.exports=function(a,r){t(a,r,{name:"selections",handleItemDefaults:i});for(var o=r.selections,v=0;v<o.length;v++){var p=o[v];p&&void 0===p.path&&(void 0===p.x0||void 0===p.x1||void 0===p.y0||void 0===p.y1)&&(r.selections[v]=null)}}},12332:($,K,e)=>{"use strict";var M=e(33287).readPaths,I=e(42957),t=e(27355).clearOutlineControllers,T=e(8416),n=e(27630),i=e(96906).arrayEditor,u=e(25631),a=u.getPathString;function r(s){var x=s._fullLayout;for(var h in t(s),x._selectionLayer.selectAll("path").remove(),x._plots){var g=x._plots[h].selectionLayer;g&&g.selectAll("path").remove()}for(var m=0;m<x.selections.length;m++)v(s,m)}function o(s){return s._context.editSelection}function v(s,x){s._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+x+'"]').remove();var h=u.makeSelectionsOptionsAndPlotinfo(s,x),g=h.options,m=h.plotinfo;g._input&&function d(A){var b=a(s,g),c={"data-index":x,"fill-rule":"evenodd",d:b},S=g.opacity,w="rgba(0,0,0,0)",E=g.line.color||T.contrast(s._fullLayout.plot_bgcolor),P=g.line.width,R=g.line.dash;P||(P=5,R="solid");var F=o(s)&&s._fullLayout._activeSelectionIndex===x;F&&(w=s._fullLayout.activeselection.fillcolor,S=s._fullLayout.activeselection.opacity);for(var _=[],z=1;z>=0;z--){var D=A.append("path").attr(c).style("opacity",z?.1:S).call(T.stroke,E).call(T.fill,w).call(n.dashLine,z?"solid":R,z?4+P:P);if(p(D,s,g),F){var k=i(s.layout,"selections",g);D.style({cursor:"move"});var O={element:D.node(),plotinfo:m,gd:s,editHelpers:k,isActiveSelection:!0},U=M(b,s);I(U,D,O)}else D.style("pointer-events",z?"all":"none");_[z]=D}var H=_[0];_[1].node().addEventListener("click",function(){return function f(s,x){if(o(s)){var g=+x.node().getAttribute("data-index");if(g>=0){if(g===s._fullLayout._activeSelectionIndex)return void y(s);s._fullLayout._activeSelectionIndex=g,s._fullLayout._deactivateSelection=y,r(s)}}}(s,H)})}(s._fullLayout._selectionLayer)}function p(s,x,h){var g=h.xref+h.yref;n.setClipUrl(s,"clip"+x._fullLayout._uid+g,x)}function y(s){o(s)&&(s._fullLayout._activeSelectionIndex>=0&&(t(s),delete s._fullLayout._activeSelectionIndex,r(s)))}$.exports={draw:r,drawOne:v,activateLastSelection:function l(s){if(o(s)){var x=s._fullLayout.selections.length-1;s._fullLayout._activeSelectionIndex=x,s._fullLayout._deactivateSelection=y,r(s)}}}},20756:($,K,e)=>{"use strict";var M=e(65822).P,I=e(18836).extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none",description:["Describes how a new selection is created.","If `immediate`, a new selection is created after first mouse up.","If `gradual`, a new selection is not created after first mouse.","By adding to and subtracting from the initial selection,","this option allows declaring extra outlines of the selection."].join(" ")},line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:1,dflt:1,editType:"none",description:"Sets the line width (in px)."},dash:I({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:"Sets the color filling the active selection' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active selection."},editType:"none"}}},8099:$=>{"use strict";$.exports=function(e,M,I){I("newselection.mode"),I("newselection.line.width")&&(I("newselection.line.color"),I("newselection.line.dash")),I("activeselection.fillcolor"),I("activeselection.opacity")}},8272:($,K,e)=>{"use strict";var I=e(85996).selectMode,T=e(27355).clearOutline,n=e(33287),i=n.readPaths,u=n.writePaths,a=n.fixDatesForPaths;$.exports=function(o,v){if(o.length){var p=o[0][0];if(p){var f=p.getAttribute("d"),l=v.gd,y=l._fullLayout.newselection,s=v.plotinfo,x=s.xaxis,h=s.yaxis,g=v.isActiveSelection,m=v.dragmode,d=(l.layout||{}).selections||[];if(!I(m)&&void 0!==g){var A=l._fullLayout._activeSelectionIndex;if(A<d.length)switch(l._fullLayout.selections[A].type){case"rect":m="select";break;case"path":m="lasso"}}var S,b=i(f,l,s,g),c={xref:x._id,yref:h._id,opacity:y.opacity,line:{color:y.line.color,width:y.line.width,dash:y.line.dash}};1===b.length&&(S=b[0]),S&&5===S.length&&"select"===m?(c.type="rect",c.x0=S[0][1],c.y0=S[0][2],c.x1=S[2][1],c.y1=S[2][2]):(c.type="path",x&&h&&a(b,x,h),c.path=u(b),S=null),T(l);for(var w=v.editHelpers,E=(w||{}).modifyItem,P=[],R=0;R<d.length;R++){var F=l._fullLayout.selections[R];if(F){if(P[R]=F._input,void 0!==g&&R===l._fullLayout._activeSelectionIndex){var _=c;switch(F.type){case"rect":E("x0",_.x0),E("x1",_.x1),E("y0",_.y0),E("y1",_.y1);break;case"path":E("path",_.path)}}}else P[R]=F}return void 0===g?(P.push(c),P):w?w.getUpdateObj():{}}}}},20007:($,K,e)=>{"use strict";var M=e(5228).strTranslate;function I(i,u){switch(i.type){case"log":return i.p2d(u);case"date":return i.p2r(u,0,i.calendar);default:return i.p2r(u)}}$.exports={p2r:I,r2p:function t(i,u){switch(i.type){case"log":return i.d2p(u);case"date":return i.r2p(u,0,i.calendar);default:return i.r2p(u)}},axValue:function T(i){var u="y"===i._id.charAt(0)?1:0;return function(a){return I(i,a[u])}},getTransform:function n(i){return M(i.xaxis._offset,i.yaxis._offset)}}},48356:($,K,e)=>{"use strict";var M=e(12332),I=e(20420);$.exports={moduleType:"component",name:"selections",layoutAttributes:e(19843),supplyLayoutDefaults:e(54842),supplyDrawNewSelectionDefaults:e(8099),includeBasePlot:e(84808)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:I.reselect,prepSelect:I.prepSelect,clearOutline:I.clearOutline,clearSelectionsCache:I.clearSelectionsCache,selectOnClick:I.selectOnClick}},20420:($,K,e)=>{"use strict";var M=e(98883),I=e(82260),t=e(97799),T=e(27630).dashStyle,n=e(8416),i=e(76863),u=e(40235).makeEventData,a=e(85996),r=a.freeMode,o=a.rectMode,v=a.drawMode,p=a.openMode,f=a.selectMode,l=e(25631),y=e(24546),s=e(42957),x=e(27355).clearOutline,h=e(33287),g=h.handleEllipse,m=h.readPaths,d=e(2133).newShapes,A=e(8272),b=e(12332).activateLastSelection,c=e(5228),S=c.sorterAsc,w=e(80134),E=e(30617),P=e(78168).getFromId,R=e(77749),F=e(88845).redrawReglTraces,_=e(87658),z=_.MINSELECT,D=w.filter,k=w.tester,O=e(20007),U=O.p2r,H=O.axValue,j=O.getTransform;function ee(st){return void 0!==st.subplot}function B(st,Se,pe,ge,Oe,we,He){var Ft,bt,Pt,cr,Kr,It,$t,kr,lr,Xe=Se._hoverdata,qe=Se._fullLayout.clickmode.indexOf("event")>-1,Dt=[];if(function ne(st){return st&&Array.isArray(st)&&!0!==st[0].hoverOnBox}(Xe)){V(st,Se,we);var rt=function se(st,Se){var we,He,pe=st[0],ge=-1,Oe=[];for(He=0;He<Se.length;He++)if(we=Se[He],pe.fullData._expandedIndex===we.cd[0].trace._expandedIndex){if(!0===pe.hoverOnBox)break;void 0!==pe.pointNumber?ge=pe.pointNumber:void 0!==pe.binNumber&&(ge=pe.binNumber,Oe=pe.pointNumbers);break}return{pointNumber:ge,pointNumbers:Oe,searchInfo:we}}(Xe,Ft=ue(Se,pe,ge,Oe));if(rt.pointNumbers.length>0?function be(st,Se){var ge,Oe,we,He,pe=[];for(He=0;He<st.length;He++)(ge=st[He]).cd[0].trace.selectedpoints&&ge.cd[0].trace.selectedpoints.length>0&&pe.push(ge);if(1===pe.length&&(we=pe[0]===Se.searchInfo,we&&(Oe=Se.searchInfo.cd[0].trace,Oe.selectedpoints.length===Se.pointNumbers.length))){for(He=0;He<Se.pointNumbers.length;He++)if(Oe.selectedpoints.indexOf(Se.pointNumbers[He])<0)return!1;return!0}return!1}(Ft,rt):function De(st){var pe,ge,Oe,Se=0;for(Oe=0;Oe<st.length;Oe++)if(pe=st[Oe],(ge=pe.cd[0].trace).selectedpoints&&(ge.selectedpoints.length>1||(Se+=ge.selectedpoints.length)>1))return!1;return 1===Se}(Ft)&&(It=de(rt))){for(He&&He.remove(),lr=0;lr<Ft.length;lr++)(bt=Ft[lr])._module.selectPoints(bt,!1);_e(Se,Ft),X(we),qe&&Mt(Se)}else{for($t=st.shiftKey&&(void 0!==It?It:de(rt)),Pt=function te(st,Se,pe){return{pointNumber:st,searchInfo:Se,subtract:!!pe}}(rt.pointNumber,rt.searchInfo,$t),cr=ie(we.selectionDefs.concat([Pt])),lr=0;lr<Ft.length;lr++)if(Kr=Fe(Ft[lr]._module.selectPoints(Ft[lr],cr),Ft[lr]),Dt.length)for(var gt=0;gt<Kr.length;gt++)Dt.push(Kr[gt]);else Dt=Kr;if(_e(Se,Ft,kr={points:Dt}),Pt&&we&&we.selectionDefs.push(Pt),He){var ft=we.mergedPolygons,Ct=p(we.dragmode);s(ke(ft,Ct),He,we)}qe&&Xt(Se,kr)}}}function q(st){return"pointNumber"in st&&"searchInfo"in st}function oe(st){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Se,pe,ge,Oe){var we=st.searchInfo.cd[0].trace._expandedIndex;return Oe.cd[0].trace._expandedIndex===we&&ge===st.pointNumber},isRect:!1,degenerate:!1,subtract:!!st.subtract}}function ie(st){if(st.length){for(var Se=[],pe=q(st[0])?0:st[0][0][0],ge=pe,Oe=q(st[0])?0:st[0][0][1],we=Oe,He=0;He<st.length;He++)if(q(st[He]))Se.push(oe(st[He]));else{var Xe=k(st[He]);Xe.subtract=!!st[He].subtract,Se.push(Xe),pe=Math.min(pe,Xe.xmin),ge=Math.max(ge,Xe.xmax),Oe=Math.min(Oe,Xe.ymin),we=Math.max(we,Xe.ymax)}return{xmin:pe,xmax:ge,ymin:Oe,ymax:we,pts:[],contains:function ut(Ze,qe,Dt,Ft){for(var bt=!1,Pt=0;Pt<Se.length;Pt++)Se[Pt].contains(Ze,qe,Dt,Ft)&&(bt=!Se[Pt].subtract);return bt},isRect:!1,degenerate:!1}}}function V(st,Se,pe){var ge=Se._fullLayout,Oe=pe.plotinfo,we=pe.dragmode,He=ge._lastSelectedSubplot&&ge._lastSelectedSubplot===Oe.id,Xe=(st.shiftKey||st.altKey)&&!(v(we)&&p(we));He&&Xe&&Oe.selection&&Oe.selection.selectionDefs&&!pe.selectionDefs?(pe.selectionDefs=Oe.selection.selectionDefs,pe.mergedPolygons=Oe.selection.mergedPolygons):(!Xe||!Oe.selection)&&X(pe),He||(x(Se),ge._lastSelectedSubplot=Oe.id)}function X(st,Se){var pe=st.dragmode,ge=st.plotinfo,Oe=st.gd;(function Y(st){return st._fullLayout._activeShapeIndex>=0})(Oe)&&Oe._fullLayout._deactivateShape(Oe),function ae(st){return st._fullLayout._activeSelectionIndex>=0}(Oe)&&Oe._fullLayout._deactivateSelection(Oe);var He=Oe._fullLayout._zoomlayer,Xe=v(pe),ut=f(pe);if(Xe||ut){var qe,Dt,Ze=He.selectAll(".select-outline-"+ge.id);if(Ze&&Oe._fullLayout._outlining)Xe&&(qe=d(Ze,st)),qe&&t.call("_guiRelayout",Oe,{shapes:qe}),ut&&!ee(st)&&(Dt=A(Ze,st)),Dt&&(Oe._fullLayout._noEmitSelectedAtStart=!0,t.call("_guiRelayout",Oe,{selections:Dt}).then(function(){Se&&b(Oe)})),Oe._fullLayout._outlining=!1}ge.selection={},ge.selection.selectionDefs=st.selectionDefs=[],ge.selection.mergedPolygons=st.mergedPolygons=[]}function J(st){return st._id}function ue(st,Se,pe,ge){if(!st.calcdata)return[];var Xe,ut,Ze,Oe=[],we=Se.map(J),He=pe.map(J);for(Ze=0;Ze<st.calcdata.length;Ze++)if(!0===(ut=(Xe=st.calcdata[Ze])[0].trace).visible&&ut._module&&ut._module.selectPoints)if(!ee({subplot:ge})||ut.subplot!==ge&&ut.geo!==ge)if("splom"===ut.type){if(ut._xaxes[we[0]]&&ut._yaxes[He[0]]){var qe=re(ut._module,Xe,Se[0],pe[0]);qe.scene=st._fullLayout._splomScenes[ut.uid],Oe.push(qe)}}else if("sankey"===ut.type){var Dt=re(ut._module,Xe,Se[0],pe[0]);Oe.push(Dt)}else{if(-1===we.indexOf(ut.xaxis)||-1===He.indexOf(ut.yaxis))continue;Oe.push(re(ut._module,Xe,P(st,ut.xaxis),P(st,ut.yaxis)))}else Oe.push(re(ut._module,Xe,Se[0],pe[0]));return Oe}function re(st,Se,pe,ge){return{_module:st,cd:Se,xaxis:pe,yaxis:ge}}function de(st){var Se=st.searchInfo.cd[0].trace,pe=st.pointNumber,ge=st.pointNumbers,we=ge.length>0?ge[0]:pe;return!!Se.selectedpoints&&Se.selectedpoints.indexOf(we)>-1}function _e(st,Se,pe){var ge,He;for(ge=0;ge<Se.length;ge++){var Oe=Se[ge].cd[0].trace._fullInput,we=st._fullLayout._tracePreGUI[Oe.uid]||{};void 0===we.selectedpoints&&(we.selectedpoints=Oe._input.selectedpoints||null)}if(pe){var Xe=pe.points||[];for(ge=0;ge<Se.length;ge++)(He=Se[ge].cd[0].trace)._input.selectedpoints=He._fullInput.selectedpoints=[],He._fullInput!==He&&(He.selectedpoints=[]);for(var ut=0;ut<Xe.length;ut++){var Ze=Xe[ut],qe=Ze.data,Dt=Ze.fullData,Ft=Ze.pointIndex,bt=Ze.pointIndices;bt?([].push.apply(qe.selectedpoints,bt),He._fullInput!==He&&[].push.apply(Dt.selectedpoints,bt)):(qe.selectedpoints.push(Ft),He._fullInput!==He&&Dt.selectedpoints.push(Ft))}}else for(ge=0;ge<Se.length;ge++)delete(He=Se[ge].cd[0].trace).selectedpoints,delete He._input.selectedpoints,He._fullInput!==He&&delete He._fullInput.selectedpoints;!function Ce(st,Se){for(var pe=!1,ge=0;ge<Se.length;ge++){var Oe=Se[ge],we=Oe.cd;t.traceIs(we[0].trace,"regl")&&(pe=!0);var He=Oe._module,Xe=He.styleOnSelect||He.style;Xe&&(Xe(st,we,we[0].node3),we[0].nodeRangePlot3&&Xe(st,we,we[0].nodeRangePlot3))}pe&&(R(st),F(st))}(st,Se)}function Le(st,Se,pe){for(var we=(pe?M.difference:M.union)({regions:st},{regions:[Se]}).regions.reverse(),He=0;He<we.length;He++){var Xe=we[He];Xe.subtract=nt(Xe,we.slice(0,He))}return we}function Fe(st,Se){if(Array.isArray(st))for(var pe=Se.cd,ge=Se.cd[0].trace,Oe=0;Oe<st.length;Oe++)st[Oe]=u(st[Oe],ge,pe);return st}function ke(st,Se){for(var pe=[],ge=0;ge<st.length;ge++){pe[ge]=[];for(var Oe=0;Oe<st[ge].length;Oe++){pe[ge][Oe]=[],pe[ge][Oe][0]=Oe?"L":"M";for(var we=0;we<st[ge][Oe].length;we++)pe[ge][Oe].push(st[ge][Oe][we])}Se||pe[ge].push(["Z",pe[ge][0][1],pe[ge][0][2]])}return pe}function ze(st,Se){for(var ge,we,pe=[],Oe=[],He=0;He<Se.length;He++){var Xe=Se[He];we=Xe._module.selectPoints(Xe,st),Oe.push(we),ge=Fe(we,Xe),pe=pe.concat(ge)}return pe}function Pe(st,Se,pe,ge,Oe){var He,Xe,ut,we=!!ge;Oe&&(He=Oe.plotinfo,Xe=Oe.xaxes[0]._id,ut=Oe.yaxes[0]._id);var Ze=[],qe=[],Dt=Ne(st),Ft=st._fullLayout;if(He){var bt=Ft._zoomlayer,Pt=Ft.dragmode,cr=v(Pt),Sr=f(Pt);if(cr||Sr){var Kr=P(st,Xe,"x"),It=P(st,ut,"y");if(Kr&&It){var $t=bt.selectAll(".select-outline-"+He.id);if($t&&st._fullLayout._outlining&&$t.length){for(var lr=$t[0][0].getAttribute("d"),rt=m(lr,st,He),$e=[],ht=0;ht<rt.length;ht++){for(var gt=rt[ht],ft=[],Ct=0;Ct<gt.length;Ct++)ft.push([ct(Kr,gt[Ct][1]),ct(It,gt[Ct][2])]);ft.xref=Xe,ft.yref=ut,ft.subtract=nt(ft,$e),$e.push(ft)}Dt=Dt.concat($e)}}}}var sr=Xe&&ut?[Xe+ut]:Ft._subplots.cartesian;!function Ie(st){var Se=st.calcdata;if(Se)for(var pe=0;pe<Se.length;pe++){var Oe=Se[pe][0].trace,we=st._fullLayout._splomScenes;if(we){var He=we[Oe.uid];He&&(He.selectBatch=[])}}}(st);for(var tr={},Cr=0;Cr<sr.length;Cr++){var Hr=sr[Cr],zr=Hr.indexOf("y"),Wr=Hr.slice(0,zr),Ke=Hr.slice(zr),We=Xe&&ut?pe:void 0;if(We=Be(Dt,Wr,Ke,We)){var Jt=ge;if(!we){var Gt=P(st,Wr,"x"),hr=P(st,Ke,"y");Jt=ue(st,[Gt],[hr],Hr);for(var br=0;br<Jt.length;br++){var Ut=Jt[br],Kt=Ut.cd[0],wt=Kt.trace;if("scattergl"===Ut._module.name&&!Kt.t.xpx){var xr=wt.x,Ir=wt.y,Ur=wt._length;Kt.t.xpx=[],Kt.t.ypx=[];for(var qt=0;qt<Ur;qt++)Kt.t.xpx[qt]=Gt.c2p(xr[qt]),Kt.t.ypx[qt]=hr.c2p(Ir[qt])}"splom"===Ut._module.name&&(tr[wt.uid]||(tr[wt.uid]=!0))}}var on=ze(We,Jt);Ze=Ze.concat(on),qe=qe.concat(Jt)}}var an={points:Ze};_e(st,qe,an);var An=Ft.clickmode.indexOf("event")>-1&&Se;if(!He&&Se){var Sn=Ne(st,!0);if(Sn.length){var sa=Sn[0].xref,Rn=Sn[0].yref;if(sa&&Rn){var Yr=mt(Sn);Rt([P(st,sa,"x"),P(st,Rn,"y")])(an,Yr)}}st._fullLayout._noEmitSelectedAtStart?st._fullLayout._noEmitSelectedAtStart=!1:An&&Xt(st,an),Ft._reselect=!1}if(!He&&Ft._deselect){var nn=Ft._deselect;(function Qe(st,Se,pe){for(var ge=0;ge<pe.length;ge++){var Oe=pe[ge];if(Oe.xaxis&&Oe.xaxis._id===st&&Oe.yaxis&&Oe.yaxis._id===Se)return!0}return!1})(Xe=nn.xref,ut=nn.yref,qe)||at(st,Xe,ut,ge),An&&(an.points.length?Xt(st,an):Mt(st)),Ft._deselect=!1}return{eventData:an,selectionTesters:pe}}function at(st,Se,pe,ge){ge=ue(st,[P(st,Se,"x")],[P(st,pe,"y")],Se+pe);for(var Oe=0;Oe<ge.length;Oe++){var we=ge[Oe];we._module.selectPoints(we,!1)}_e(st,ge)}function Be(st,Se,pe,ge){for(var Oe,we=0;we<st.length;we++){var He=st[we];if(Se===He.xref&&pe===He.yref)if(Oe){ge=ie(Oe=Le(Oe,He,!!He.subtract))}else Oe=[He],ge=k(He)}return ge}function Ne(st,Se){for(var pe=[],ge=st._fullLayout,Oe=ge.selections,we=Oe.length,He=0;He<we;He++)if(!Se||He===ge._activeSelectionIndex){var Xe=Oe[He];if(Xe){var Ft,bt,Pt,cr,Sr,ut=Xe.xref,Ze=Xe.yref,qe=P(st,ut,"x"),Dt=P(st,Ze,"y");if("rect"===Xe.type){Sr=[];var Kr=ct(qe,Xe.x0),It=ct(qe,Xe.x1),$t=ct(Dt,Xe.y0),kr=ct(Dt,Xe.y1);Sr=[[Kr,$t],[Kr,kr],[It,kr],[It,$t]],Ft=Math.min(Kr,It),bt=Math.max(Kr,It),Pt=Math.min($t,kr),cr=Math.max($t,kr),Sr.xmin=Ft,Sr.xmax=bt,Sr.ymin=Pt,Sr.ymax=cr,Sr.xref=ut,Sr.yref=Ze,Sr.subtract=!1,Sr.isRect=!0,pe.push(Sr)}else if("path"===Xe.type)for(var lr=Xe.path.split("Z"),rt=[],$e=0;$e<lr.length;$e++){var ht=lr[$e];if(ht){ht+="Z";var gt=l.extractPathCoords(ht,y.paramIsX,"raw"),ft=l.extractPathCoords(ht,y.paramIsY,"raw");Ft=1/0,bt=-1/0,Pt=1/0,cr=-1/0,Sr=[];for(var Ct=0;Ct<gt.length;Ct++){var sr=ct(qe,gt[Ct]),tr=ct(Dt,ft[Ct]);Sr.push([sr,tr]),Ft=Math.min(sr,Ft),bt=Math.max(sr,bt),Pt=Math.min(tr,Pt),cr=Math.max(tr,cr)}Sr.xmin=Ft,Sr.xmax=bt,Sr.ymin=Pt,Sr.ymax=cr,Sr.xref=ut,Sr.yref=Ze,Sr.subtract=nt(Sr,rt),rt.push(Sr),pe.push(Sr)}}}}return pe}function nt(st,Se){for(var pe=!1,ge=0;ge<Se.length;ge++)for(var Oe=Se[ge],we=0;we<st.length;we++)if(I(st[we],Oe)){pe=!pe;break}return pe}function ct(st,Se){return"date"===st.type&&(Se=Se.replace("_"," ")),"log"===st.type?st.c2p(Se):st.r2p(Se,null,st.calendar)}function mt(st){for(var Se=st.length,pe=[],ge=0;ge<Se;ge++){var Oe=st[ge];pe=(pe=pe.concat(Oe)).concat([Oe[0]])}return function Bt(st){return st.isRect=5===st.length&&st[0][0]===st[4][0]&&st[0][1]===st[4][1]&&st[0][0]===st[1][0]&&st[2][0]===st[3][0]&&st[0][1]===st[3][1]&&st[1][1]===st[2][1]||st[0][1]===st[1][1]&&st[2][1]===st[3][1]&&st[0][0]===st[3][0]&&st[1][0]===st[2][0],st.isRect&&(st.xmin=Math.min(st[0][0],st[2][0]),st.xmax=Math.max(st[0][0],st[2][0]),st.ymin=Math.min(st[0][1],st[2][1]),st.ymax=Math.max(st[0][1],st[2][1])),st}(pe)}function Rt(st){return function(Se,pe){for(var ge,Oe,we=0;we<st.length;we++){var He=st[we],Xe=He._id,ut=Xe.charAt(0);if(pe.isRect){ge||(ge={});var Ze=pe[ut+"min"],qe=pe[ut+"max"];void 0!==Ze&&void 0!==qe&&(ge[Xe]=[U(He,Ze),U(He,qe)].sort(S))}else Oe||(Oe={}),Oe[Xe]=pe.map(H(He))}ge&&(Se.range=ge),Oe&&(Se.lassoPoints=Oe)}}function Xt(st,Se){Se&&(Se.selections=(st.layout||{}).selections||[]),st.emit("plotly_selected",Se)}function Mt(st){st.emit("plotly_deselect",null)}$.exports={reselect:Pe,prepSelect:function W(st,Se,pe,ge,Oe){var we=!ee(ge),He=r(Oe),Xe=o(Oe),ut=p(Oe),Ze=v(Oe),qe=f(Oe),Ft="drawcircle"===Oe,bt="drawline"===Oe||Ft,Pt=ge.gd,cr=Pt._fullLayout,Sr=qe&&"immediate"===cr.newselection.mode&&we,Kr=cr._zoomlayer,It=ge.element.getBoundingClientRect(),$t=ge.plotinfo,kr=j($t),lr=Se-It.left,rt=pe-It.top;cr._calcInverseTransform(Pt);var $e=c.apply3DTransform(cr._invTransform)(lr,rt);lr=$e[0],rt=$e[1];var Ke,We,Jt,Gt,hr,br,Ut,ht=cr._invScaleX,gt=cr._invScaleY,ft=lr,Ct=rt,sr="M"+lr+","+rt,tr=ge.xaxes[0],Cr=ge.yaxes[0],Hr=tr._length,zr=Cr._length,Wr=st.altKey&&!(v(Oe)&&ut);V(st,Pt,ge),He&&(Ke=D([[lr,rt]],_.BENDPX));var Kt=Kr.selectAll("path.select-outline-"+$t.id).data([1]),wt=Ze?cr.newshape:cr.newselection;Ze&&(ge.hasText=wt.label.text||wt.label.texttemplate);var xr=Ze&&!ut?wt.fillcolor:"rgba(0,0,0,0)",Ir=wt.line.color||(we?n.contrast(Pt._fullLayout.plot_bgcolor):"#7f7f7f");Kt.enter().append("path").attr("class","select-outline select-outline-"+$t.id).style({opacity:Ze?wt.opacity/2:1,"stroke-dasharray":T(wt.line.dash,wt.line.width),"stroke-width":wt.line.width+"px","shape-rendering":"crispEdges"}).call(n.stroke,Ir).call(n.fill,xr).attr("fill-rule","evenodd").classed("cursor-move",!!Ze).attr("transform",kr).attr("d",sr+"Z");var Ur=Kr.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1}).attr("transform",kr).attr("d","M0,0Z");if(Ze&&ge.hasText){var qt=Kr.select(".label-temp");qt.empty()&&(qt=Kr.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var on=cr._uid+_.SELECTID,an=[],hn=ue(Pt,ge.xaxes,ge.yaxes,ge.subplot);Sr&&!st.shiftKey&&(ge._clearSubplotSelections=function(){if(we){var Sn=tr._id,sa=Cr._id;at(Pt,Sn,sa,hn);for(var Rn=(Pt.layout||{}).selections||[],Yr=[],vr=!1,nn=0;nn<Rn.length;nn++){var Or=cr.selections[nn];Or.xref!==Sn||Or.yref!==sa?Yr.push(Rn[nn]):vr=!0}vr&&(Pt._fullLayout._noEmitSelectedAtStart=!0,t.call("_guiRelayout",Pt,{selections:Yr}))}});var An=function zt(st){var Se=st.plotinfo;return Se.fillRangeItems||Rt(st.xaxes.concat(st.yaxes))}(ge);ge.moveFn=function(Sn,sa){ge._clearSubplotSelections&&(ge._clearSubplotSelections(),ge._clearSubplotSelections=void 0),ft=Math.max(0,Math.min(Hr,ht*Sn+lr)),Ct=Math.max(0,Math.min(zr,gt*sa+rt));var Rn=Math.abs(ft-lr),Yr=Math.abs(Ct-rt);if(Xe){var vr,nn,Or;if(qe){var Xn=cr.selectdirection;switch(vr="any"===Xn?Yr<Math.min(.6*Rn,z)?"h":Rn<Math.min(.6*Yr,z)?"v":"d":Xn){case"h":nn=Ft?zr/2:0,Or=zr;break;case"v":nn=Ft?Hr/2:0,Or=Hr}}if(Ze)switch(cr.newshape.drawdirection){case"vertical":vr="h",nn=Ft?zr/2:0,Or=zr;break;case"horizontal":vr="v",nn=Ft?Hr/2:0,Or=Hr;break;case"ortho":Rn<Yr?(vr="h",nn=rt,Or=Ct):(vr="v",nn=lr,Or=ft);break;default:vr="d"}"h"===vr?((Gt=bt?g(Ft,[ft,nn],[ft,Or]):[[lr,nn],[lr,Or],[ft,Or],[ft,nn]]).xmin=bt?ft:Math.min(lr,ft),Gt.xmax=bt?ft:Math.max(lr,ft),Gt.ymin=Math.min(nn,Or),Gt.ymax=Math.max(nn,Or),Ur.attr("d","M"+Gt.xmin+","+(rt-z)+"h-4v"+2*z+"h4ZM"+(Gt.xmax-1)+","+(rt-z)+"h4v"+2*z+"h-4Z")):"v"===vr?((Gt=bt?g(Ft,[nn,Ct],[Or,Ct]):[[nn,rt],[nn,Ct],[Or,Ct],[Or,rt]]).xmin=Math.min(nn,Or),Gt.xmax=Math.max(nn,Or),Gt.ymin=bt?Ct:Math.min(rt,Ct),Gt.ymax=bt?Ct:Math.max(rt,Ct),Ur.attr("d","M"+(lr-z)+","+Gt.ymin+"v-4h"+2*z+"v4ZM"+(lr-z)+","+(Gt.ymax-1)+"v4h"+2*z+"v-4Z")):"d"===vr&&((Gt=bt?g(Ft,[lr,rt],[ft,Ct]):[[lr,rt],[lr,Ct],[ft,Ct],[ft,rt]]).xmin=Math.min(lr,ft),Gt.xmax=Math.max(lr,ft),Gt.ymin=Math.min(rt,Ct),Gt.ymax=Math.max(rt,Ct),Ur.attr("d","M0,0Z"))}else He&&(Ke.addPt([ft,Ct]),Gt=Ke.filtered);if(ge.selectionDefs&&ge.selectionDefs.length?(Jt=Le(ge.mergedPolygons,Gt,Wr),Gt.subtract=Wr,We=ie(ge.selectionDefs.concat([Gt]))):(Jt=[Gt],We=k(Gt)),s(ke(Jt,ut),Kt,ge),qe){var Ca,Vr=Pe(Pt,!1),wn=Vr.eventData?Vr.eventData.points.slice():[];Vr=Pe(Pt,!1,We,hn,ge),We=Vr.selectionTesters,Ut=Vr.eventData,Ca=Ke?Ke.filtered:mt(Jt),E.throttle(on,_.SELECTDELAY,function(){for(var Ba=(an=ze(We,hn)).slice(),Ka=0;Ka<wn.length;Ka++){for(var Ja=wn[Ka],si=!1,Ra=0;Ra<Ba.length;Ra++)if(Ba[Ra].curveNumber===Ja.curveNumber&&Ba[Ra].pointNumber===Ja.pointNumber){si=!0;break}si||Ba.push(Ja)}Ba.length&&(Ut||(Ut={}),Ut.points=Ba),An(Ut,Ca),function St(st,Se){st.emit("plotly_selecting",Se)}(Pt,Ut)})}},ge.clickFn=function(Sn,sa){if(Ur.remove(),Pt._fullLayout._activeShapeIndex>=0)Pt._fullLayout._deactivateShape(Pt);else if(!Ze){var Rn=cr.clickmode;E.done(on).then(function(){if(E.clear(on),2===Sn){for(Kt.remove(),hr=0;hr<hn.length;hr++)(br=hn[hr])._module.selectPoints(br,!1);if(_e(Pt,hn),X(ge),Mt(Pt),hn.length){var Yr=hn[0].xaxis,vr=hn[0].yaxis;if(Yr&&vr){for(var nn=[],Or=Pt._fullLayout.selections,Xn=0;Xn<Or.length;Xn++){var Vr=Or[Xn];Vr&&(Vr.xref!==Yr._id||Vr.yref!==vr._id)&&nn.push(Vr)}nn.length<Or.length&&(Pt._fullLayout._noEmitSelectedAtStart=!0,t.call("_guiRelayout",Pt,{selections:nn}))}}}else Rn.indexOf("select")>-1&&B(sa,Pt,ge.xaxes,ge.yaxes,ge.subplot,ge,Kt),"event"===Rn&&Xt(Pt,void 0);i.click(Pt,sa,$t.id)}).catch(c.error)}},ge.doneFn=function(){Ur.remove(),E.done(on).then(function(){E.clear(on),!Sr&&Gt&&ge.selectionDefs&&(Gt.subtract=Wr,ge.selectionDefs.push(Gt),ge.mergedPolygons.length=0,[].push.apply(ge.mergedPolygons,Jt)),(Sr||Ze)&&X(ge,Sr),ge.doneFnCompleted&&ge.doneFnCompleted(an),qe&&Xt(Pt,Ut)}).catch(c.error)}},clearOutline:x,clearSelectionsCache:X,selectOnClick:B}},27438:($,K,e)=>{"use strict";var M=e(6991),I=e(47297),t=e(55405).line,T=e(65822).P,n=e(18836).extendFlat,i=e(96906).templatedArray,u=e(4967),a=e(82684),r=e(9430).R,o=e(34488);$.exports=i("shape",{visible:n({},a.visible,{editType:"calc+arraydraw",description:["Determines whether or not this shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether or not this","shape is shown in the legend."].join(" ")},legend:n({},a.legend,{editType:"calc+arraydraw",description:["Sets the reference to a legend to show this shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:n({},a.legendgroup,{editType:"calc+arraydraw",description:["Sets the legend group for this shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:n({},a.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:I({editType:"calc+arraydraw",description:["Sets this legend group's title font."].join(" ")}),editType:"calc+arraydraw"},legendrank:n({},a.legendrank,{editType:"calc+arraydraw",description:["Sets the legend rank for this shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")}),legendwidth:n({},a.legendwidth,{editType:"calc+arraydraw",description:"Sets the width (in px or fraction) of the legend for this shape."}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:n({},M.xref,{description:["Sets the shape's x coordinate axis.",u.axisRefDescription("x","left","right")].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:n({},M.yref,{description:["Sets the shape's y coordinate axis.",u.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:n({},t.color,{editType:"arraydraw"}),width:n({},t.width,{editType:"calc+arraydraw"}),dash:n({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},label:{text:{valType:"string",dflt:"",editType:"arraydraw",description:["Sets the text to display with shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:r({},{keys:Object.keys(o)}),font:I({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw",description:["Sets the position of the label text relative to the shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw",description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw",description:"Sets padding (in px) between edge of label and edge of shape."},editType:"arraydraw"},editType:"arraydraw"})},58231:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(24546),T=e(25631);function i(r){return u(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function u(r,o,v,p,f,l){var y=r/2,s=l;if("pixel"===o){var x=f?T.extractPathCoords(f,l?t.paramIsY:t.paramIsX):[v,p],h=M.aggNums(Math.max,null,x),g=M.aggNums(Math.min,null,x),m=g<0?Math.abs(g)+y:y,d=h>0?h+y:y;return{ppad:y,ppadplus:s?m:d,ppadminus:s?d:m}}return{ppad:y}}function a(r,o,v,p,f){var l="category"===r.type||"multicategory"===r.type?r.r2c:r.d2c;if(void 0!==o)return[l(o),l(v)];if(p){var h,m,d,A,y=1/0,s=-1/0,x=p.match(t.segmentRE);for("date"===r.type&&(l=T.decodeDate(l)),h=0;h<x.length;h++)void 0!==(m=f[x[h].charAt(0)].drawn)&&((d=x[h].substr(1).match(t.paramRE))&&!(d.length<m)&&((A=l(d[m]))<y&&(y=A),A>s&&(s=A)));if(s>=y)return[y,s]}}$.exports=function(o){var r,v=o._fullLayout,p=M.filterVisible(v.shapes);if(p.length&&o._fullData.length)for(var f=0;f<p.length;f++){var l=p[f];l._extremes={};var y,s,x=I.getRefType(l.xref),h=I.getRefType(l.yref);if("paper"!==l.xref&&"domain"!==x){var g="pixel"===l.xsizemode?l.xanchor:l.x0,m="pixel"===l.xsizemode?l.xanchor:l.x1;(s=a(y=I.getFromId(o,l.xref),g,m,l.path,t.paramIsX))&&(l._extremes[y._id]=I.findExtremes(y,s,u((r=l).line.width,r.xsizemode,r.x0,r.x1,r.path,!1)))}if("paper"!==l.yref&&"domain"!==h){var d="pixel"===l.ysizemode?l.yanchor:l.y0,A="pixel"===l.ysizemode?l.yanchor:l.y1;(s=a(y=I.getFromId(o,l.yref),d,A,l.path,t.paramIsY))&&(l._extremes[y._id]=I.findExtremes(y,s,i(l)))}}}},24546:$=>{"use strict";$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},58888:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(84322),T=e(27438),n=e(25631);function u(a,r,o){function v(q,oe){return M.coerce(a,r,T,q,oe)}if(r._isShape=!0,v("visible")){v("showlegend")&&(v("legend"),v("legendwidth"),v("legendgroup"),v("legendgrouptitle.text"),M.coerceFont(v,"legendgrouptitle.font"),v("legendrank"));var l=v("path"),s=v("type",l?"path":"rect"),x="path"!==s;x&&delete r.path,v("editable"),v("layer"),v("opacity"),v("fillcolor"),v("fillrule"),v("line.width")&&(v("line.color"),v("line.dash"));for(var g=v("xsizemode"),m=v("ysizemode"),d=["x","y"],A=0;A<2;A++){var E,P,R,b=d[A],c=b+"anchor",S="x"===b?g:m,w={_fullLayout:o},F=I.coerceRef(a,r,w,b,void 0,"paper");if("range"===I.getRefType(F)?((E=I.getFromId(w,F))._shapeIndices.push(r._index),R=n.rangeToShapePosition(E),P=n.shapePositionToRange(E)):P=R=M.identity,x){var k=b+"0",O=b+"1",U=a[k],H=a[O];a[k]=P(a[k],!0),a[O]=P(a[O],!0),"pixel"===S?(v(k,0),v(O,10)):(I.coercePosition(r,w,v,F,k,.25),I.coercePosition(r,w,v,F,O,.75)),r[k]=R(r[k]),r[O]=R(r[O]),a[k]=U,a[O]=H}if("pixel"===S){var j=a[c];a[c]=P(a[c],!0),I.coercePosition(r,w,v,F,c,.25),r[c]=R(r[c]),a[c]=j}}x&&M.noneOrAll(a,r,["x0","x1","y0","y1"]);var W,B,ee="line"===s;if(x&&(W=v("label.texttemplate")),W||(B=v("label.text")),B||W){v("label.textangle");var te=v("label.textposition",ee?"middle":"middle center");v("label.xanchor"),v("label.yanchor",function i(a,r){return a?"bottom":-1!==r.indexOf("top")?"top":-1!==r.indexOf("bottom")?"bottom":"middle"}(ee,te)),v("label.padding"),M.coerceFont(v,"label.font",o.font)}}}$.exports=function(r,o){t(r,o,{name:"shapes",handleItemDefaults:u})}},69627:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(88565),T=e(27630),n=e(33287).readPaths,i=e(25631),u=i.getPathString,a=e(34488),r=e(94598).FROM_TL;$.exports=function(f,l,y,s){if(s.selectAll(".shape-label").remove(),y.label.text||y.label.texttemplate){var x;if(y.label.texttemplate){var h={};if("path"!==y.type){var g=I.getFromId(f,y.xref),m=I.getFromId(f,y.yref);for(var d in a){var A=a[d](y,g,m);void 0!==A&&(h[d]=A)}}x=M.texttemplateStringForShapes(y.label.texttemplate,{},f._fullLayout._d3locale,h)}else x=y.label.text;var P,R,F,_,b={"data-index":l},c=y.label.font,E=s.append("g").attr(b).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(x);if(y.path){var z=u(f,y),D=n(z,f);P=1/0,F=1/0,R=-1/0,_=-1/0;for(var k=0;k<D.length;k++)for(var O=0;O<D[k].length;O++)for(var U=D[k][O],H=1;H<U.length;H+=2){var j=U[H],ee=U[H+1];P=Math.min(P,j),R=Math.max(R,j),F=Math.min(F,ee),_=Math.max(_,ee)}}else{var W=I.getFromId(f,y.xref),B=I.getRefType(y.xref),te=I.getFromId(f,y.yref),q=I.getRefType(y.yref),oe=i.getDataToPixel(f,W,!1,B),ie=i.getDataToPixel(f,te,!0,q);P=oe(y.x0),R=oe(y.x1),F=ie(y.y0),_=ie(y.y1)}var V=y.label.textangle;"auto"===V&&(V="line"===y.type?function o(p,f,l,y){var s,x;return x=Math.abs(l-p),s=l>=p?f-y:y-f,-180/Math.PI*Math.atan2(s,x)}(P,F,R,_):0),E.call(function(re){return re.call(T.font,c).attr({}),t.convertToTspans(re,f),re});var ae=function v(p,f,l,y,s,x,h){var P,R,F,_,g=s.label.textposition,m=s.label.textangle,d=s.label.padding,A=s.type,b=Math.PI/180*x,c=Math.sin(b),S=Math.cos(b),w=s.label.xanchor,E=s.label.yanchor;if("line"===A){"start"===g?(P=p,R=f):"end"===g?(P=l,R=y):(P=(p+l)/2,R=(f+y)/2),"auto"===w&&(w="start"===g?"auto"===m?l>p?"left":l<p?"right":"center":l>p?"right":l<p?"left":"center":"end"===g?"auto"===m?l>p?"right":l<p?"left":"center":l>p?"left":l<p?"right":"center":"center");var z={left:1,center:0,right:-1},D={bottom:-1,middle:0,top:1};if("auto"===m){var k=D[E];F=-d*c*k,_=d*S*k}else{F=d*z[w],_=d*D[E]}P+=F,R+=_}else F=d+3,-1!==g.indexOf("right")?(P=Math.max(p,l)-F,"auto"===w&&(w="right")):-1!==g.indexOf("left")?(P=Math.min(p,l)+F,"auto"===w&&(w="left")):(P=(p+l)/2,"auto"===w&&(w="center")),R=-1!==g.indexOf("top")?Math.min(f,y):-1!==g.indexOf("bottom")?Math.max(f,y):(f+y)/2,_=d,"bottom"===E?R-=_:"top"===E&&(R+=_);var H=r[E],j=s.label.font.size,ee=h.height,W=(ee*H-j)*c,B=-(ee*H-j)*S;return{textx:P+W,texty:R+B,xanchor:w}}(P,F,R,_,y,V,T.bBox(E.node())),X=ae.textx,J=ae.texty,ue=ae.xanchor;E.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ue],y:J,x:X,transform:"rotate("+V+","+X+","+J+")"}).call(t.positionText,X,J)}}},42957:($,K,e)=>{"use strict";var I=e(5228).strTranslate,t=e(25429),T=e(85996),n=T.drawMode,i=T.selectMode,u=e(97799),a=e(8416),r=e(43777),o=r.i000,v=r.i090,p=r.i180,f=r.i270,y=e(27355).clearOutlineControllers,s=e(33287),x=s.pointsOnRectangle,h=s.pointsOnEllipse,g=s.writePaths,m=e(2133).newShapes,d=e(2133).createShapeObj,A=e(8272),b=e(69627);function S(E,P){var z,D,k,R=E[P][1],F=E[P][2],_=E.length;return D=E[z=(P+1)%_][1],k=E[z][2],D===R&&k===F&&(D=E[z=(P+2)%_][1],k=E[z][2]),[z,D,k]}$.exports=function E(P,R,F,_){_||(_=0);var z=F.gd;function D(){E(P,R,F,_++),(h(P[0])||F.hasText)&&k({redrawing:!0})}function k(Le){var Fe={};void 0!==F.isActiveShape&&(F.isActiveShape=!1,Fe=m(R,F)),void 0!==F.isActiveSelection&&(F.isActiveSelection=!1,Fe=A(R,F),z._fullLayout._reselect=!0),Object.keys(Fe).length&&u.call((Le||{}).redrawing?"relayout":"_guiRelayout",z,Fe)}var W,B,te,q,oe,U=z._fullLayout._zoomlayer,H=F.dragmode,j=n(H),ee=i(H);((j||ee)&&(z._fullLayout._outlining=!0),y(z),R.attr("d",g(P)),_||!F.isActiveShape&&!F.isActiveSelection)||(oe=function c(E,P){for(var R=0;R<P.length;R++){var F=P[R];E[R]=[];for(var _=0;_<F.length;_++){E[R][_]=[];for(var z=0;z<F[_].length;z++)E[R][_][z]=F[_][z]}}return E}([],P),function ne(Le){W=[];for(var Fe=0;Fe<P.length;Fe++){var ke=P[Fe],ze=x(ke),Pe=!ze&&h(ke);W[Fe]=[];for(var Ie=ke.length,Qe=0;Qe<Ie;Qe++)if("Z"!==ke[Qe][0]&&(!Pe||Qe===o||Qe===v||Qe===p||Qe===f)){var Be,at=ze&&F.isActiveSelection;at&&(Be=S(ke,Qe));var Ne=ke[Qe][1],nt=ke[Qe][2],ct=Le.append(at?"rect":"circle").attr("data-i",Fe).attr("data-j",Qe).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(at){var mt=Be[1]-Ne,Bt=Be[2]-nt,Rt=Bt?5:Math.max(Math.min(25,Math.abs(mt)-5),5),zt=mt?5:Math.max(Math.min(25,Math.abs(Bt)-5),5);ct.classed(Bt?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Rt).attr("height",zt).attr("x",Ne-Rt/2).attr("y",nt-zt/2).attr("transform",I(mt/2,Bt/2))}else ct.classed("cursor-grab",!0).attr("r",5).attr("cx",Ne).attr("cy",nt);W[Fe][Qe]={element:ct.node(),gd:z,prepFn:ae,doneFn:J,clickFn:re},t.init(W[Fe][Qe])}}}(U.append("g").attr("class","outline-controllers")),function Ce(){if(B=[],P.length){var Le=0;B[Le]={element:R[0][0],gd:z,prepFn:be,doneFn:De,clickFn:_e},t.init(B[Le])}}());if(j&&F.hasText){var V=U.select(".label-temp"),Y=d(R,F,F.dragmode);b(z,"label-temp",Y,V)}function ae(Le){te=+Le.srcElement.getAttribute("data-i"),q=+Le.srcElement.getAttribute("data-j"),W[te][q].moveFn=X}function X(Le,Fe){if(P.length){var ke=oe[te][q][1],ze=oe[te][q][2],Pe=P[te],Ie=Pe.length;if(x(Pe)){var Qe=Le,at=Fe;if(F.isActiveSelection)S(Pe,q)[1]===Pe[q][1]?at=0:Qe=0;for(var Ne=0;Ne<Ie;Ne++)if(Ne!==q){var nt=Pe[Ne];nt[1]===Pe[q][1]&&(nt[1]=ke+Qe),nt[2]===Pe[q][2]&&(nt[2]=ze+at)}if(Pe[q][1]=ke+Qe,Pe[q][2]=ze+at,!x(Pe))for(var ct=0;ct<Ie;ct++)for(var mt=0;mt<Pe[ct].length;mt++)Pe[ct][mt]=oe[te][ct][mt]}else Pe[q][1]=ke+Le,Pe[q][2]=ze+Fe;D()}}function J(){k()}function re(Le,Fe){if(2===Le){te=+Fe.srcElement.getAttribute("data-i"),q=+Fe.srcElement.getAttribute("data-j");var ke=P[te];!x(ke)&&!h(ke)&&function ue(){if(P.length&&P[te]&&P[te].length){for(var Le=[],Fe=0;Fe<P[te].length;Fe++)Fe!==q&&Le.push(P[te][Fe]);Le.length>1&&(2!==Le.length||"Z"!==Le[1][0])&&(0===q&&(Le[0][0]="M"),P[te]=Le,D(),k())}}()}}function de(Le,Fe){(function se(Le,Fe){if(P.length)for(var ke=0;ke<P.length;ke++)for(var ze=0;ze<P[ke].length;ze++)for(var Pe=0;Pe+2<P[ke][ze].length;Pe+=2)P[ke][ze][Pe+1]=oe[ke][ze][Pe+1]+Le,P[ke][ze][Pe+2]=oe[ke][ze][Pe+2]+Fe})(Le,Fe),D()}function be(Le){(te=+Le.srcElement.getAttribute("data-i"))||(te=0),B[te].moveFn=de}function De(){k()}function _e(Le){2===Le&&function w(E){if(i(E._fullLayout.dragmode)){y(E);var P=E._fullLayout._activeSelectionIndex,R=(E.layout||{}).selections||[];if(P<R.length){for(var F=[],_=0;_<R.length;_++)_!==P&&F.push(R[_]);delete E._fullLayout._activeSelectionIndex;var z=E._fullLayout.selections[P];E._fullLayout._deselect={xref:z.xref,yref:z.yref},u.call("_guiRelayout",E,{selections:F})}}}(z)}}},86249:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(5228),T=e(91464),n=e(33287).readPaths,i=e(42957),u=e(69627),a=e(27355).clearOutlineControllers,r=e(8416),o=e(27630),v=e(96906).arrayEditor,p=e(25429),f=e(93720),l=e(24546),y=e(25631),s=y.getPathString;function x(E){var P=E._fullLayout;for(var R in P._shapeUpperLayer.selectAll("path").remove(),P._shapeLowerLayer.selectAll("path").remove(),P._shapeUpperLayer.selectAll("text").remove(),P._shapeLowerLayer.selectAll("text").remove(),P._plots){var F=P._plots[R].shapelayer;F&&(F.selectAll("path").remove(),F.selectAll("text").remove())}for(var _=0;_<P.shapes.length;_++)!0===P.shapes[_].visible&&m(E,_)}function h(E){return!!E._fullLayout._outlining}function g(E){return!E._context.edits.shapePosition}function m(E,P){E._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+P+'"]').remove();var R=y.makeShapesOptionsAndPlotinfo(E,P),F=R.options,_=R.plotinfo;if(F._input&&!0===F.visible)if("below"!==F.layer)D(E._fullLayout._shapeUpperLayer);else if("paper"===F.xref||"paper"===F.yref)D(E._fullLayout._shapeLowerLayer);else if(_._hadPlotinfo){D((_.mainplotinfo||_).shapelayer)}else D(E._fullLayout._shapeLowerLayer);function D(k){var O=s(E,F),U={"data-index":P,"fill-rule":F.fillrule,d:O},H=F.opacity,j=F.fillcolor,ee=F.line.width?F.line.color:"rgba(0,0,0,0)",W=F.line.width,B=F.line.dash;!W&&!0===F.editable&&(W=5,B="solid");var te="Z"!==O[O.length-1],q=g(E)&&F.editable&&E._fullLayout._activeShapeIndex===P;q&&(j=te?"rgba(0,0,0,0)":E._fullLayout.activeshape.fillcolor,H=E._fullLayout.activeshape.opacity);var V,oe=k.append("g").classed("shape-group",!0).attr({"data-index":P}),ie=oe.append("path").attr(U).style("opacity",H).call(r.stroke,ee).call(r.fill,j).call(o.dashLine,B,W);if(d(oe,E,F),u(E,P,F,oe),(q||E._context.edits.shapePosition)&&(V=v(E.layout,"shapes",F)),q){ie.style({cursor:"move"});var Y={element:ie.node(),plotinfo:_,gd:E,editHelpers:V,hasText:F.label.text||F.label.texttemplate,isActiveShape:!0},ae=n(O,E);i(ae,ie,Y)}else E._context.edits.shapePosition?function A(E,P,R,F,_,z){var W,B,te,q,oe,ie,V,Y,ae,X,J,ue,re,ne,se,Qe,D=10,k=10,O="pixel"===R.xsizemode,U="pixel"===R.ysizemode,H="line"===R.type,j="path"===R.type,ee=z.modifyItem,de=M.select(P.node().parentNode),be=T.getFromId(E,R.xref),De=T.getRefType(R.xref),_e=T.getFromId(E,R.yref),Ce=T.getRefType(R.yref),Le=y.getDataToPixel(E,be,!1,De),Fe=y.getDataToPixel(E,_e,!0,Ce),ke=y.getPixelToData(E,be,!1,De),ze=y.getPixelToData(E,_e,!0,Ce),Pe=at(),Ie={element:Pe.node(),gd:E,prepFn:nt,doneFn:ct,clickFn:mt};function at(){return H?Be():P}function Be(){var Mt=10,st=Math.max(R.line.width,Mt),Se=_.append("g").attr("data-index",F).attr("drag-helper",!0);Se.append("path").attr("d",P.attr("d")).style({cursor:"move","stroke-width":st,"stroke-opacity":"0"});var pe={"fill-opacity":"0"},ge=Math.max(st/2,Mt);return Se.append("circle").attr({"data-line-point":"start-point",cx:O?Le(R.xanchor)+R.x0:Le(R.x0),cy:U?Fe(R.yanchor)-R.y0:Fe(R.y0),r:ge}).style(pe).classed("cursor-grab",!0),Se.append("circle").attr({"data-line-point":"end-point",cx:O?Le(R.xanchor)+R.x1:Le(R.x1),cy:U?Fe(R.yanchor)-R.y1:Fe(R.y1),r:ge}).style(pe).classed("cursor-grab",!0),Se}function Ne(Mt){if(h(E))Qe=null;else if(H)Qe="path"===Mt.target.tagName?"move":"start-point"===Mt.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var st=Ie.element.getBoundingClientRect(),Se=st.right-st.left,pe=st.bottom-st.top,ge=Mt.clientX-st.left,Oe=Mt.clientY-st.top,we=!j&&Se>D&&pe>k&&!Mt.shiftKey?p.getCursor(ge/Se,1-Oe/pe):"move";f(P,we),Qe=we.split("-")[0]}}function nt(Mt){h(E)||(O&&(oe=Le(R.xanchor)),U&&(ie=Fe(R.yanchor)),"path"===R.type?se=R.path:(W=O?R.x0:Le(R.x0),B=U?R.y0:Fe(R.y0),te=O?R.x1:Le(R.x1),q=U?R.y1:Fe(R.y1)),W<te?(ae=W,re="x0",X=te,ne="x1"):(ae=te,re="x1",X=W,ne="x0"),!U&&B<q||U&&B>q?(V=B,J="y0",Y=q,ue="y1"):(V=q,J="y1",Y=B,ue="y0"),Ne(Mt),zt(_,R),Xt(P,R,E),Ie.moveFn="move"===Qe?Bt:Rt,Ie.altKey=Mt.altKey)}function ct(){h(E)||(f(P),St(_),d(P,E,R),I.call("_guiRelayout",E,z.getUpdateObj()))}function mt(){h(E)||St(_)}function Bt(Mt,st){if("path"===R.type){var Se=function(Oe){return Oe},pe=Se,ge=Se;O?ee("xanchor",R.xanchor=ke(oe+Mt)):(pe=function(we){return ke(Le(we)+Mt)},be&&"date"===be.type&&(pe=y.encodeDate(pe))),U?ee("yanchor",R.yanchor=ze(ie+st)):(ge=function(we){return ze(Fe(we)+st)},_e&&"date"===_e.type&&(ge=y.encodeDate(ge))),ee("path",R.path=b(se,pe,ge))}else O?ee("xanchor",R.xanchor=ke(oe+Mt)):(ee("x0",R.x0=ke(W+Mt)),ee("x1",R.x1=ke(te+Mt))),U?ee("yanchor",R.yanchor=ze(ie+st)):(ee("y0",R.y0=ze(B+st)),ee("y1",R.y1=ze(q+st)));P.attr("d",s(E,R)),zt(_,R),u(E,F,R,de)}function Rt(Mt,st){if(j){var Se=function(Kr){return Kr},pe=Se,ge=Se;O?ee("xanchor",R.xanchor=ke(oe+Mt)):(pe=function(It){return ke(Le(It)+Mt)},be&&"date"===be.type&&(pe=y.encodeDate(pe))),U?ee("yanchor",R.yanchor=ze(ie+st)):(ge=function(It){return ze(Fe(It)+st)},_e&&"date"===_e.type&&(ge=y.encodeDate(ge))),ee("path",R.path=b(se,pe,ge))}else if(H){if("resize-over-start-point"===Qe){var Oe=W+Mt,we=U?B-st:B+st;ee("x0",R.x0=O?Oe:ke(Oe)),ee("y0",R.y0=U?we:ze(we))}else if("resize-over-end-point"===Qe){var He=te+Mt,Xe=U?q-st:q+st;ee("x1",R.x1=O?He:ke(He)),ee("y1",R.y1=U?Xe:ze(Xe))}}else{var ut=function(Kr){return-1!==Qe.indexOf(Kr)},Ze=ut("n"),qe=ut("s"),Dt=ut("w"),Ft=ut("e"),bt=Ze?V+st:V,Pt=qe?Y+st:Y,cr=Dt?ae+Mt:ae,Sr=Ft?X+Mt:X;U&&(Ze&&(bt=V-st),qe&&(Pt=Y-st)),(!U&&Pt-bt>k||U&&bt-Pt>k)&&(ee(J,R[J]=U?bt:ze(bt)),ee(ue,R[ue]=U?Pt:ze(Pt))),Sr-cr>D&&(ee(re,R[re]=O?cr:ke(cr)),ee(ne,R[ne]=O?Sr:ke(Sr)))}P.attr("d",s(E,R)),zt(_,R),u(E,F,R,de)}function zt(Mt,st){function Se(){var pe="path"!==st.type,ge=Mt.selectAll(".visual-cue").data([0]),Oe=1;ge.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Oe}).classed("visual-cue",!0);var we=Le(O?st.xanchor:t.midRange(pe?[st.x0,st.x1]:y.extractPathCoords(st.path,l.paramIsX))),He=Fe(U?st.yanchor:t.midRange(pe?[st.y0,st.y1]:y.extractPathCoords(st.path,l.paramIsY)));if(we=y.roundPositionForSharpStrokeRendering(we,Oe),He=y.roundPositionForSharpStrokeRendering(He,Oe),O&&U){var Xe="M"+(we-1-Oe)+","+(He-1-Oe)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ge.attr("d",Xe)}else if(O){var ut="M"+(we-1-Oe)+","+(He-9-Oe)+"v18 h2 v-18 Z";ge.attr("d",ut)}else{var Ze="M"+(we-9-Oe)+","+(He-1-Oe)+"h18 v2 h-18 Z";ge.attr("d",Ze)}}(O||U)&&Se()}function St(Mt){Mt.selectAll(".visual-cue").remove()}function Xt(Mt,st,Se){var pe=st.xref,ge=st.yref,Oe=T.getFromId(Se,pe),we=T.getFromId(Se,ge),He="";"paper"!==pe&&!Oe.autorange&&(He+=pe),"paper"!==ge&&!we.autorange&&(He+=ge),o.setClipUrl(Mt,He?"clip"+Se._fullLayout._uid+He:null,Se)}p.init(Ie),Pe.node().onmousemove=Ne}(E,ie,F,P,k,V):!0===F.editable&&ie.style("pointer-events",te||r.opacity(j)*H<=.5?"stroke":"all");ie.node().addEventListener("click",function(){return function c(E,P){if(g(E)){var F=+P.node().getAttribute("data-index");if(F>=0){if(F===E._fullLayout._activeShapeIndex)return void S(E);E._fullLayout._activeShapeIndex=F,E._fullLayout._deactivateShape=S,x(E)}}}(E,ie)})}}function d(E,P,R){var F=(R.xref+R.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(E,F?"clip"+P._fullLayout._uid+F:null,P)}function b(E,P,R){return E.replace(l.segmentRE,function(F){var _=0,z=F.charAt(0),D=l.paramIsX[z],k=l.paramIsY[z],O=l.numParams[z];return z+F.substr(1).replace(l.paramRE,function(H){return _>=O||(D[_]?H=P(H):k[_]&&(H=R(H)),_++),H})})}function S(E){g(E)&&(E._fullLayout._activeShapeIndex>=0&&(a(E),delete E._fullLayout._activeShapeIndex,x(E)))}$.exports={draw:x,drawOne:m,eraseActiveShape:function w(E){if(g(E)){a(E);var P=E._fullLayout._activeShapeIndex,R=(E.layout||{}).shapes||[];if(P<R.length){for(var F=[],_=0;_<R.length;_++)_!==P&&F.push(R[_]);return delete E._fullLayout._activeShapeIndex,I.call("_guiRelayout",E,{shapes:F})}}},drawLabel:u}},72386:($,K,e)=>{"use strict";var M=e(71859).overrideAll,I=e(82684),t=e(47297),T=e(65822).P,n=e(18836).extendFlat,i=e(9430).R,u=e(34488);$.exports=M({newshape:{visible:n({},I.visible,{description:["Determines whether or not new shape is visible.","If *legendonly*, the shape is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")}),showlegend:{valType:"boolean",dflt:!1,description:["Determines whether or not new","shape is shown in the legend."].join(" ")},legend:n({},I.legend,{description:["Sets the reference to a legend to show new shape in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")}),legendgroup:n({},I.legendgroup,{description:["Sets the legend group for new shape.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")}),legendgrouptitle:{text:n({},I.legendgrouptitle.text,{}),font:t({description:["Sets this legend group's title font."].join(" ")})},legendrank:n({},I.legendrank,{description:["Sets the legend rank for new shape.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")}),legendwidth:n({},I.legendwidth,{description:"Sets the width (in px or fraction) of the legend for new shape."}),line:{color:{valType:"color",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,description:"Sets the line width (in px)."},dash:n({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above"],dflt:"above",description:"Specifies whether new shapes are drawn below or above traces."},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},name:n({},I.name,{description:["Sets new shape name.","The name appears as the legend item."].join(" ")}),label:{text:{valType:"string",dflt:"",description:["Sets the text to display with the new shape.","It is also used for legend item if `name` is not provided."].join(" ")},texttemplate:i({newshape:!0},{keys:Object.keys(u)}),font:t({description:"Sets the new shape label text font."}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],description:["Sets the position of the label text relative to the new shape.","Supported values for rectangles, circles and paths are","*top left*, *top center*, *top right*, *middle left*,","*middle center*, *middle right*, *bottom left*, *bottom center*,","and *bottom right*.","Supported values for lines are *start*, *middle*, and *end*.","Default: *middle center* for rectangles, circles, and paths; *middle* for lines."].join(" ")},textangle:{valType:"angle",dflt:"auto",description:["Sets the angle at which the label text is drawn","with respect to the horizontal. For lines, angle *auto*","is the same angle as the line. For all other shapes,","angle *auto* is horizontal."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",description:["Sets the label's horizontal position anchor","This anchor binds the specified `textposition` to the *left*, *center*","or *right* of the label text.","For example, if `textposition` is set to *top right* and","`xanchor` to *right* then the right-most portion of the","label text lines up with the right-most edge of the","new shape."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets the label's vertical position anchor","This anchor binds the specified `textposition` to the *top*, *middle*","or *bottom* of the label text.","For example, if `textposition` is set to *top right* and","`yanchor` to *top* then the top-most portion of the","label text lines up with the top-most edge of the","new shape."].join(" ")},padding:{valType:"number",dflt:3,min:0,description:"Sets padding (in px) between edge of label and edge of new shape."}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,description:"Sets the opacity of the active shape."}}},"none","from-root")},43777:$=>{"use strict";$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},9018:($,K,e)=>{"use strict";var M=e(8416),I=e(5228);$.exports=function(n,i,u){if(u("newshape.visible"),u("newshape.name"),u("newshape.showlegend"),u("newshape.legend"),u("newshape.legendwidth"),u("newshape.legendgroup"),u("newshape.legendgrouptitle.text"),I.coerceFont(u,"newshape.legendgrouptitle.font"),u("newshape.legendrank"),u("newshape.drawdirection"),u("newshape.layer"),u("newshape.fillcolor"),u("newshape.fillrule"),u("newshape.opacity"),u("newshape.line.width")){var r=(n||{}).plot_bgcolor||"#FFF";u("newshape.line.color",M.contrast(r)),u("newshape.line.dash")}var o="drawline"===n.dragmode,v=u("newshape.label.text"),p=u("newshape.label.texttemplate");if(v||p){u("newshape.label.textangle");var f=u("newshape.label.textposition",o?"middle":"middle center");u("newshape.label.xanchor"),u("newshape.label.yanchor",function t(T,n){return T?"bottom":-1!==n.indexOf("top")?"top":-1!==n.indexOf("bottom")?"bottom":"middle"}(o,f)),u("newshape.label.padding"),I.coerceFont(u,"newshape.label.font",i.font)}u("activeshape.fillcolor"),u("activeshape.opacity")}},33287:($,K,e)=>{"use strict";var M=e(72823),I=e(43777),t=I.CIRCLE_SIDES,T=I.SQRT2,n=e(20007),i=n.p2r,u=n.r2p,a=[0,3,4,5,6,1,2],r=[0,3,4,1,2];function o(p,f){return Math.abs(p-f)<=1e-6}function v(p,f){var l=f[1]-p[1],y=f[2]-p[2];return Math.sqrt(l*l+y*y)}K.writePaths=function(p){var f=p.length;if(!f)return"M0,0Z";for(var l="",y=0;y<f;y++)for(var s=p[y].length,x=0;x<s;x++){var h=p[y][x][0];if("Z"===h)l+="Z";else for(var g=p[y][x].length,m=0;m<g;m++){var d=m;"Q"===h||"S"===h?d=r[m]:"C"===h&&(d=a[m]),l+=p[y][x][d],m>0&&m<g-1&&(l+=",")}}return l},K.readPaths=function(p,f,l,y){var m,b,c,s=M(p),x=[],h=-1,d=0,A=0,S=function(){b=d,c=A};S();for(var w=0;w<s.length;w++){var P,R,F,_,E=[],z=s[w][0],D=z;switch(z){case"M":h++,x[h]=[],d=+s[w][1],A=+s[w][2],E.push([D,d,A]),S();break;case"Q":case"S":P=+s[w][1],F=+s[w][2],d=+s[w][3],A=+s[w][4],E.push([D,d,A,P,F]);break;case"C":P=+s[w][1],F=+s[w][2],R=+s[w][3],_=+s[w][4],d=+s[w][5],A=+s[w][6],E.push([D,d,A,P,F,R,_]);break;case"T":case"L":d=+s[w][1],A=+s[w][2],E.push([D,d,A]);break;case"H":D="L",d=+s[w][1],E.push([D,d,A]);break;case"V":D="L",A=+s[w][1],E.push([D,d,A]);break;case"A":D="L";var k=+s[w][1],O=+s[w][2];+s[w][4]||(k=-k,O=-O);var U=d-k,H=A;for(m=1;m<=t/2;m++){var j=2*Math.PI*m/t;E.push([D,U+k*Math.cos(j),H+O*Math.sin(j)])}break;case"Z":(d!==b||A!==c)&&(d=b,A=c,E.push([D,d,A]))}for(var ee=(l||{}).domain,W=f._fullLayout._size,B=l&&"pixel"===l.xsizemode,te=l&&"pixel"===l.ysizemode,q=!1===y,oe=0;oe<E.length;oe++){for(m=0;m+2<7;m+=2){var ie=E[oe][m+1],V=E[oe][m+2];void 0===ie||void 0===V||(d=ie,A=V,l&&(l.xaxis&&l.xaxis.p2r?(q&&(ie-=l.xaxis._offset),ie=B?u(l.xaxis,l.xanchor)+ie:i(l.xaxis,ie)):(q&&(ie-=W.l),ee?ie=ee.x[0]+ie/W.w:ie/=W.w),l.yaxis&&l.yaxis.p2r?(q&&(V-=l.yaxis._offset),V=te?u(l.yaxis,l.yanchor)-V:i(l.yaxis,V)):(q&&(V-=W.t),V=ee?ee.y[1]-V/W.h:1-V/W.h)),E[oe][m+1]=ie,E[oe][m+2]=V)}x[h].push(E[oe].slice())}}return x},K.pointsOnRectangle=function(p){if(5!==p.length)return!1;for(var l=1;l<3;l++){if(!o(p[0][l]-p[1][l],p[3][l]-p[2][l]))return!1;if(!o(p[0][l]-p[3][l],p[1][l]-p[2][l]))return!1}return!(!o(p[0][1],p[1][1])&&!o(p[0][1],p[3][1]))&&!!(v(p[0],p[1])*v(p[0],p[3]))},K.pointsOnEllipse=function(p){var f=p.length;if(f!==t+1)return!1;f=t;for(var l=0;l<f;l++){var y=(2*f-l)%f,s=(f/2+y)%f,x=(f/2+l)%f;if(!o(v(p[l],p[x]),v(p[y],p[s])))return!1}return!0},K.handleEllipse=function(p,f,l){if(!p)return[f,l];var y=K.ellipseOver({x0:f[0],y0:f[1],x1:l[0],y1:l[1]}),s=(y.x1+y.x0)/2,x=(y.y1+y.y0)/2,h=(y.x1-y.x0)/2,g=(y.y1-y.y0)/2;h||(h=g/=T),g||(g=h/=T);for(var m=[],d=0;d<t;d++){var A=2*d*Math.PI/t;m.push([s+h*Math.cos(A),x+g*Math.sin(A)])}return m},K.ellipseOver=function(p){var f=p.x0,l=p.y0,y=p.x1,s=p.y1,x=y-f,h=s-l,g=((f-=x)+y)/2,m=((l-=h)+s)/2;return{x0:g-(x*=T),y0:m-(h*=T),x1:g+x,y1:m+h}},K.fixDatesForPaths=function(p,f,l){var y="date"===f.type,s="date"===l.type;if(!y&&!s)return p;for(var x=0;x<p.length;x++)for(var h=0;h<p[x].length;h++)for(var g=0;g+2<p[x][h].length;g+=2)y&&(p[x][h][g+1]=p[x][h][g+1].replace(" ","_")),s&&(p[x][h][g+2]=p[x][h][g+2].replace(" ","_"));return p}},2133:($,K,e)=>{"use strict";var M=e(85996),I=M.drawMode,t=M.openMode,T=e(43777),n=T.i000,i=T.i090,u=T.i180,a=T.i270,r=T.cos45,o=T.sin45,v=e(20007),p=v.p2r,f=v.r2p,y=e(27355).clearOutline,s=e(33287),x=s.readPaths,h=s.writePaths,g=s.ellipseOver,m=s.fixDatesForPaths;function A(b,c,S){var ee,w=b[0][0],E=c.gd,P=w.getAttribute("d"),R=E._fullLayout.newshape,F=c.plotinfo,_=c.isActiveShape,z=F.xaxis,D=F.yaxis,k=!!F.domain||!F.xaxis,O=!!F.domain||!F.yaxis,U=t(S),H=x(P,E,F,_),j={editable:!0,visible:R.visible,name:R.name,showlegend:R.showlegend,legend:R.legend,legendwidth:R.legendwidth,legendgroup:R.legendgroup,legendgrouptitle:{text:R.legendgrouptitle.text,font:R.legendgrouptitle.font},legendrank:R.legendrank,label:R.label,xref:k?"paper":z._id,yref:O?"paper":D._id,layer:R.layer,opacity:R.opacity,line:{color:R.line.color,width:R.line.width,dash:R.line.dash}};if(U||(j.fillcolor=R.fillcolor,j.fillrule=R.fillrule),1===H.length&&(ee=H[0]),ee&&5===ee.length&&"drawrect"===S)j.type="rect",j.x0=ee[0][1],j.y0=ee[0][2],j.x1=ee[2][1],j.y1=ee[2][2];else if(ee&&"drawline"===S)j.type="line",j.x0=ee[0][1],j.y0=ee[0][2],j.x1=ee[1][1],j.y1=ee[1][2];else if(ee&&"drawcircle"===S){j.type="circle";var W=ee[n][1],B=ee[i][1],te=ee[u][1],q=ee[a][1],oe=ee[n][2],ie=ee[i][2],V=ee[u][2],Y=ee[a][2],ae=F.xaxis&&("date"===F.xaxis.type||"log"===F.xaxis.type),X=F.yaxis&&("date"===F.yaxis.type||"log"===F.yaxis.type);ae&&(W=f(F.xaxis,W),B=f(F.xaxis,B),te=f(F.xaxis,te),q=f(F.xaxis,q)),X&&(oe=f(F.yaxis,oe),ie=f(F.yaxis,ie),V=f(F.yaxis,V),Y=f(F.yaxis,Y));var J=(B+q)/2,ue=(oe+V)/2,se=g({x0:J,y0:ue,x1:J+(q-B+te-W)/2*r,y1:ue+(Y-ie+V-oe)/2*o});ae&&(se.x0=p(F.xaxis,se.x0),se.x1=p(F.xaxis,se.x1)),X&&(se.y0=p(F.yaxis,se.y0),se.y1=p(F.yaxis,se.y1)),j.x0=se.x0,j.y0=se.y0,j.x1=se.x1,j.y1=se.y1}else j.type="path",z&&D&&m(H,z,D),j.path=h(H),ee=null;return j}$.exports={newShapes:function d(b,c){if(b.length&&b[0][0]){var w=c.gd,E=c.isActiveShape,P=c.dragmode,R=(w.layout||{}).shapes||[];if(!I(P)&&void 0!==E){var F=w._fullLayout._activeShapeIndex;if(F<R.length)switch(w._fullLayout.shapes[F].type){case"rect":P="drawrect";break;case"circle":P="drawcircle";break;case"line":P="drawline";break;case"path":var _=R[F].path||"";P="Z"===_[_.length-1]?"drawclosedpath":"drawopenpath"}}var z=A(b,c,P);y(w);for(var D=c.editHelpers,k=(D||{}).modifyItem,O=[],U=0;U<R.length;U++){var H=w._fullLayout.shapes[U];if(O[U]=H._input,void 0!==E&&U===w._fullLayout._activeShapeIndex){var j=z;switch(H.type){case"line":case"rect":case"circle":k("x0",j.x0),k("x1",j.x1),k("y0",j.y0),k("y1",j.y1);break;case"path":k("path",j.path)}}}return void 0===E?(O.push(z),O):D?D.getUpdateObj():{}}},createShapeObj:A}},27355:$=>{"use strict";$.exports={clearOutlineControllers:function K(M){var I=M._fullLayout._zoomlayer;I&&I.selectAll(".outline-controllers").remove()},clearOutline:function e(M){var I=M._fullLayout._zoomlayer;I&&I.selectAll(".select-outline").remove(),M._fullLayout._outlining=!1}}},25631:($,K,e)=>{"use strict";var M=e(24546),I=e(5228),t=e(91464);K.rangeToShapePosition=function(n){return"log"===n.type?n.r2d:function(i){return i}},K.shapePositionToRange=function(n){return"log"===n.type?n.d2r:function(i){return i}},K.decodeDate=function(n){return function(i){return i.replace&&(i=i.replace("_"," ")),n(i)}},K.encodeDate=function(n){return function(i){return n(i).replace(" ","_")}},K.extractPathCoords=function(n,i,u){var a=[];return n.match(M.segmentRE).forEach(function(o){var v=i[o.charAt(0)].drawn;if(void 0!==v){var p=o.substr(1).match(M.paramRE);if(p&&!(p.length<v)){var f=p[v],l=u?f:I.cleanNumber(f);a.push(l)}}}),a},K.getDataToPixel=function(n,i,u,a){var o,r=n._fullLayout._size;if(i)if("domain"===a)o=function(p){return i._length*(u?1-p:p)+i._offset};else{var v=K.shapePositionToRange(i);o=function(p){return i._offset+i.r2p(v(p,!0))},"date"===i.type&&(o=K.decodeDate(o))}else o=u?function(p){return r.t+r.h*(1-p)}:function(p){return r.l+r.w*p};return o},K.getPixelToData=function(n,i,u,a){var o,r=n._fullLayout._size;if(i)if("domain"===a)o=function(p){var f=(p-i._offset)/i._length;return u?1-f:f};else{var v=K.rangeToShapePosition(i);o=function(p){return v(i.p2r(p-i._offset))}}else o=u?function(p){return 1-(p-r.t)/r.h}:function(p){return(p-r.l)/r.w};return o},K.roundPositionForSharpStrokeRendering=function(n,i){var u=1===Math.round(i%2),a=Math.round(n);return u?a+.5:a},K.makeShapesOptionsAndPlotinfo=function(n,i){var u=n._fullLayout.shapes[i]||{},a=n._fullLayout._plots[u.xref+u.yref];return!!a?a._hadPlotinfo=!0:(a={},u.xref&&"paper"!==u.xref&&(a.xaxis=n._fullLayout[u.xref+"axis"]),u.yref&&"paper"!==u.yref&&(a.yaxis=n._fullLayout[u.yref+"axis"])),a.xsizemode=u.xsizemode,a.ysizemode=u.ysizemode,a.xanchor=u.xanchor,a.yanchor=u.yanchor,{options:u,plotinfo:a}},K.makeSelectionsOptionsAndPlotinfo=function(n,i){var u=n._fullLayout.selections[i]||{},a=n._fullLayout._plots[u.xref+u.yref];return!!a?a._hadPlotinfo=!0:(a={},u.xref&&(a.xaxis=n._fullLayout[u.xref+"axis"]),u.yref&&(a.yaxis=n._fullLayout[u.yref+"axis"])),{options:u,plotinfo:a}},K.getPathString=function(n,i){var f,l,y,s,x,h,g,m,u=i.type,a=t.getRefType(i.xref),r=t.getRefType(i.yref),o=t.getFromId(n,i.xref),v=t.getFromId(n,i.yref),p=n._fullLayout._size;if(o?"domain"===a?l=function(F){return o._offset+o._length*F}:(f=K.shapePositionToRange(o),l=function(F){return o._offset+o.r2p(f(F,!0))}):l=function(F){return p.l+p.w*F},v?"domain"===r?s=function(F){return v._offset+v._length*(1-F)}:(y=K.shapePositionToRange(v),s=function(F){return v._offset+v.r2p(y(F,!0))}):s=function(F){return p.t+p.h*(1-F)},"path"===u)return o&&"date"===o.type&&(l=K.decodeDate(l)),v&&"date"===v.type&&(s=K.decodeDate(s)),function T(n,i,u){var a=n.path,r=n.xsizemode,o=n.ysizemode,v=n.xanchor,p=n.yanchor;return a.replace(M.segmentRE,function(f){var l=0,y=f.charAt(0),s=M.paramIsX[y],x=M.paramIsY[y],h=M.numParams[y],g=f.substr(1).replace(M.paramRE,function(m){return s[l]?m="pixel"===r?i(v)+Number(m):i(m):x[l]&&(m="pixel"===o?u(p)-Number(m):u(m)),++l>h&&(m="X"),m});return l>h&&(g=g.replace(/[\s,]*X.*/,""),I.log("Ignoring extra params in segment "+f)),y+g})}(i,l,s);if("pixel"===i.xsizemode){var d=l(i.xanchor);x=d+i.x0,h=d+i.x1}else x=l(i.x0),h=l(i.x1);if("pixel"===i.ysizemode){var A=s(i.yanchor);g=A-i.y0,m=A-i.y1}else g=s(i.y0),m=s(i.y1);if("line"===u)return"M"+x+","+g+"L"+h+","+m;if("rect"===u)return"M"+x+","+g+"H"+h+"V"+m+"H"+x+"Z";var b=(x+h)/2,c=(g+m)/2,S=Math.abs(b-x),w=Math.abs(c-g),E="A"+S+","+w,P=b+S+","+c;return"M"+P+E+" 0 1,1 "+(b+","+(c-w))+E+" 0 0,1 "+P+"Z"}},31711:($,K,e)=>{"use strict";var M=e(86249);$.exports={moduleType:"component",name:"shapes",layoutAttributes:e(27438),supplyLayoutDefaults:e(58888),supplyDrawNewShapeDefaults:e(9018),includeBasePlot:e(84808)("shapes"),calcAutorange:e(58231),draw:M.draw,drawOne:M.drawOne}},34488:$=>{"use strict";function K(f,l){return l?l.d2l(f):f}function e(f,l){return l?l.l2d(f):f}function n(f,l){return K(f.x1,l)-K(f.x0,l)}function i(f,l,y){return K(f.y1,y)-K(f.y0,y)}$.exports={x0:function M(f){return f.x0},x1:function I(f){return f.x1},y0:function t(f){return f.y0},y1:function T(f){return f.y1},slope:function p(f,l,y){return"line"!==f.type?void 0:i(f,0,y)/n(f,l)},dx:n,dy:i,width:function u(f,l){return Math.abs(n(f,l))},height:function a(f,l,y){return Math.abs(i(f,0,y))},length:function r(f,l,y){return"line"!==f.type?void 0:Math.sqrt(Math.pow(n(f,l),2)+Math.pow(i(f,0,y),2))},xcenter:function o(f,l){return e((K(f.x1,l)+K(f.x0,l))/2,l)},ycenter:function v(f,l,y){return e((K(f.y1,y)+K(f.y0,y))/2,y)}}},30683:($,K,e)=>{"use strict";var M=e(47297),I=e(43012),t=e(18836).extendDeepAll,T=e(71859).overrideAll,n=e(87889),i=e(96906).templatedArray,u=e(76786),a=i("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}});$.exports=T(i("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:a,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:t(I({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:n.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:M({description:"Sets the font of the current value label text."})},font:M({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:u.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:u.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:u.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:u.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root")},76786:$=>{"use strict";$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},48612:($,K,e)=>{"use strict";var M=e(5228),I=e(84322),t=e(30683),n=e(76786).name,i=t.steps;function u(r,o,v){function p(m,d){return M.coerce(r,o,t,m,d)}for(var f=I(r,o,{name:"steps",handleItemDefaults:a}),l=0,y=0;y<f.length;y++)f[y].visible&&l++;if(l<2?o.visible=!1:p("visible")){o._stepCount=l;var x=o._visibleSteps=M.filterVisible(f);(f[p("active")]||{}).visible||(o.active=x[0]._index),p("x"),p("y"),M.noneOrAll(r,o,["x","y"]),p("xanchor"),p("yanchor"),p("len"),p("lenmode"),p("pad.t"),p("pad.r"),p("pad.b"),p("pad.l"),M.coerceFont(p,"font",v.font),p("currentvalue.visible")&&(p("currentvalue.xanchor"),p("currentvalue.prefix"),p("currentvalue.suffix"),p("currentvalue.offset"),M.coerceFont(p,"currentvalue.font",o.font)),p("transition.duration"),p("transition.easing"),p("bgcolor"),p("activebgcolor"),p("bordercolor"),p("borderwidth"),p("ticklen"),p("tickwidth"),p("tickcolor"),p("minorticklen")}}function a(r,o){function v(l,y){return M.coerce(r,o,i,l,y)}if("skip"===r.method||Array.isArray(r.args)?v("visible"):o.visible=!1){v("method"),v("args");var f=v("label","step-"+o._index);v("value",f),v("execute")}}$.exports=function(o,v){I(o,v,{name:n,handleItemDefaults:u})}},99201:($,K,e)=>{"use strict";var M=e(21572),I=e(31556),t=e(8416),T=e(27630),n=e(5228),i=n.strTranslate,u=e(88565),a=e(96906).arrayEditor,r=e(76786),o=e(94598),v=o.LINE_SPACING,p=o.FROM_TL,f=o.FROM_BR;function l(D){return r.autoMarginIdRoot+D._index}function s(D){return D._index}function x(D,k){var O=T.tester.selectAll("g."+r.labelGroupClass).data(k._visibleSteps);O.enter().append("g").classed(r.labelGroupClass,!0);var U=0,H=0;O.each(function(Y){var J=d(M.select(this),{step:Y},k).node();if(J){var ue=T.bBox(J);H=Math.max(H,ue.height),U=Math.max(U,ue.width)}}),O.remove();var j=k._dims={};j.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var ee=D._fullLayout._size;j.lx=ee.l+ee.w*k.x,j.ly=ee.t+ee.h*(1-k.y),"fraction"===k.lenmode?j.outerLength=Math.round(ee.w*k.len):j.outerLength=k.len,j.inputAreaStart=0,j.inputAreaLength=Math.round(j.outerLength-k.pad.l-k.pad.r);var B=(j.inputAreaLength-2*r.stepInset)/(k._stepCount-1),te=U+r.labelPadding;if(j.labelStride=Math.max(1,Math.ceil(te/B)),j.labelHeight=H,j.currentValueMaxWidth=0,j.currentValueHeight=0,j.currentValueTotalHeight=0,j.currentValueMaxLines=1,k.currentvalue.visible){var q=T.tester.append("g");O.each(function(Y){var ae=g(q,k,Y.label),X=ae.node()&&T.bBox(ae.node())||{width:0,height:0},J=u.lineCount(ae);j.currentValueMaxWidth=Math.max(j.currentValueMaxWidth,Math.ceil(X.width)),j.currentValueHeight=Math.max(j.currentValueHeight,Math.ceil(X.height)),j.currentValueMaxLines=Math.max(j.currentValueMaxLines,J)}),j.currentValueTotalHeight=j.currentValueHeight+k.currentvalue.offset,q.remove()}j.height=j.currentValueTotalHeight+r.tickOffset+k.ticklen+r.labelOffset+j.labelHeight+k.pad.t+k.pad.b;var oe="left";n.isRightAnchor(k)&&(j.lx-=j.outerLength,oe="right"),n.isCenterAnchor(k)&&(j.lx-=j.outerLength/2,oe="center");var ie="top";n.isBottomAnchor(k)&&(j.ly-=j.height,ie="bottom"),n.isMiddleAnchor(k)&&(j.ly-=j.height/2,ie="middle"),j.outerLength=Math.ceil(j.outerLength),j.height=Math.ceil(j.height),j.lx=Math.round(j.lx),j.ly=Math.round(j.ly);var V={y:k.y,b:j.height*f[ie],t:j.height*p[ie]};"fraction"===k.lenmode?(V.l=0,V.xl=k.x-k.len*p[oe],V.r=0,V.xr=k.x+k.len*f[oe]):(V.x=k.x,V.l=j.outerLength*p[oe],V.r=j.outerLength*f[oe]),I.autoMargin(D,l(k),V)}function g(D,k,O){if(k.currentvalue.visible){var H,j,U=k._dims;switch(k.currentvalue.xanchor){case"right":H=U.inputAreaLength-r.currentValueInset-U.currentValueMaxWidth,j="left";break;case"center":H=.5*U.inputAreaLength,j="middle";break;default:H=r.currentValueInset,j="left"}var ee=n.ensureSingle(D,"text",r.labelClass,function(ie){ie.attr({"text-anchor":j,"data-notex":1})}),W=k.currentvalue.prefix?k.currentvalue.prefix:"";if("string"==typeof O)W+=O;else{var B=k.steps[k.active].label,te=k._gd._fullLayout._meta;te&&(B=n.templateString(B,te)),W+=B}k.currentvalue.suffix&&(W+=k.currentvalue.suffix),ee.call(T.font,k.currentvalue.font).text(W).call(u.convertToTspans,k._gd);var q=u.lineCount(ee),oe=(U.currentValueMaxLines+1-q)*k.currentvalue.font.size*v;return u.positionText(ee,H,oe),ee}}function m(D,k,O){n.ensureSingle(D,"rect",r.gripRectClass,function(H){H.call(S,k,D,O).style("pointer-events","all")}).attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(t.stroke,O.bordercolor).call(t.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function d(D,k,O){var U=n.ensureSingle(D,"text",r.labelClass,function(ee){ee.attr({"text-anchor":"middle","data-notex":1})}),H=k.step.label,j=O._gd._fullLayout._meta;return j&&(H=n.templateString(H,j)),U.call(T.font,O.font).text(H).call(u.convertToTspans,O._gd),U}function A(D,k){var O=n.ensureSingle(D,"g",r.labelsClass),U=k._dims,H=O.selectAll("g."+r.labelGroupClass).data(U.labelSteps);H.enter().append("g").classed(r.labelGroupClass,!0),H.exit().remove(),H.each(function(j){var ee=M.select(this);ee.call(d,j,k),T.setTranslate(ee,R(k,j.fraction),r.tickOffset+k.ticklen+k.font.size*v+r.labelOffset+U.currentValueTotalHeight)})}function b(D,k,O,U,H){var j=Math.round(U*(O._stepCount-1)),ee=O._visibleSteps[j]._index;ee!==O.active&&c(D,k,O,ee,!0,H)}function c(D,k,O,U,H,j){var ee=O.active;O.active=U,a(D.layout,r.name,O).applyUpdate("active",U);var W=O.steps[O.active];k.call(P,O,j),k.call(g,O),D.emit("plotly_sliderchange",{slider:O,step:O.steps[O.active],interaction:H,previousActive:ee}),W&&W.method&&H&&(k._nextMethod?(k._nextMethod.step=W,k._nextMethod.doCallback=H,k._nextMethod.doTransition=j):(k._nextMethod={step:W,doCallback:H,doTransition:j},k._nextMethodRaf=window.requestAnimationFrame(function(){var B=k._nextMethod.step;B.method&&(B.execute&&I.executeAPICommand(D,B.method,B.args),k._nextMethod=null,k._nextMethodRaf=null)})))}function S(D,k,O){if(!k._context.staticPlot){var U=O.node(),H=M.select(k);D.on("mousedown",ee),D.on("touchstart",ee)}function j(){return O.data()[0]}function ee(){var W=j();k.emit("plotly_sliderstart",{slider:W});var B=O.select("."+r.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),B.call(t.fill,W.activebgcolor);var te=F(W,M.mouse(U)[0]);function q(){var ie=j(),V=F(ie,M.mouse(U)[0]);b(k,O,ie,V,!1)}function oe(){var ie=j();ie._dragging=!1,B.call(t.fill,ie.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),k.emit("plotly_sliderend",{slider:ie,step:ie.steps[ie.active]})}b(k,O,W,te,!0),W._dragging=!0,H.on("mousemove",q),H.on("touchmove",q),H.on("mouseup",oe),H.on("touchend",oe)}}function w(D,k){var O=D.selectAll("rect."+r.tickRectClass).data(k._visibleSteps),U=k._dims;O.enter().append("rect").classed(r.tickRectClass,!0),O.exit().remove(),O.attr({width:k.tickwidth+"px","shape-rendering":"crispEdges"}),O.each(function(H,j){var ee=j%U.labelStride==0,W=M.select(this);W.attr({height:ee?k.ticklen:k.minorticklen}).call(t.fill,k.tickcolor),T.setTranslate(W,R(k,j/(k._stepCount-1))-.5*k.tickwidth,(ee?r.tickOffset:r.minorTickOffset)+U.currentValueTotalHeight)})}function P(D,k,O){for(var U=D.select("rect."+r.gripRectClass),H=0,j=0;j<k._stepCount;j++)if(k._visibleSteps[j]._index===k.active){H=j;break}var ee=R(k,H/(k._stepCount-1));if(!k._invokingCommand){var W=U;O&&k.transition.duration>0&&(W=W.transition().duration(k.transition.duration).ease(k.transition.easing)),W.attr("transform",i(ee-.5*r.gripWidth,k._dims.currentValueTotalHeight))}}function R(D,k){var O=D._dims;return O.inputAreaStart+r.stepInset+(O.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,k))}function F(D,k){var O=D._dims;return Math.min(1,Math.max(0,(k-r.stepInset-O.inputAreaStart)/(O.inputAreaLength-2*r.stepInset-2*O.inputAreaStart)))}function _(D,k,O){var U=O._dims,H=n.ensureSingle(D,"rect",r.railTouchRectClass,function(j){j.call(S,k,D,O).style("pointer-events","all")});H.attr({width:U.inputAreaLength,height:Math.max(U.inputAreaWidth,r.tickOffset+O.ticklen+U.labelHeight)}).call(t.fill,O.bgcolor).attr("opacity",0),T.setTranslate(H,0,U.currentValueTotalHeight)}function z(D,k){var O=k._dims,U=O.inputAreaLength-2*r.railInset,H=n.ensureSingle(D,"rect",r.railRectClass);H.attr({width:U,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(t.stroke,k.bordercolor).call(t.fill,k.bgcolor).style("stroke-width",k.borderwidth+"px"),T.setTranslate(H,r.railInset,.5*(O.inputAreaWidth-r.railWidth)+O.currentValueTotalHeight)}$.exports=function(k){var O=k._context.staticPlot,U=k._fullLayout,H=function y(D,k){for(var O=D[r.name],U=[],H=0;H<O.length;H++){var j=O[H];j.visible&&(j._gd=k,U.push(j))}return U}(U,k),j=U._infolayer.selectAll("g."+r.containerClassName).data(H.length>0?[0]:[]);function ee(q){q._commandObserver&&(q._commandObserver.remove(),delete q._commandObserver),I.autoMargin(k,l(q))}if(j.enter().append("g").classed(r.containerClassName,!0).style("cursor",O?null:"ew-resize"),j.exit().each(function(){M.select(this).selectAll("g."+r.groupClassName).each(ee)}).remove(),0!==H.length){var W=j.selectAll("g."+r.groupClassName).data(H,s);W.enter().append("g").classed(r.groupClassName,!0),W.exit().each(ee).remove();for(var B=0;B<H.length;B++){var te=H[B];x(k,te)}W.each(function(q){var oe=M.select(this);(function E(D){var k=D._dims;k.labelSteps=[];for(var O=D._stepCount,U=0;U<O;U+=k.labelStride)k.labelSteps.push({fraction:U/(O-1),step:D._visibleSteps[U]})})(q),I.manageCommandObserver(k,q,q._visibleSteps,function(ie){var V=oe.data()[0];V.active!==ie.index&&(V._dragging||c(k,oe,V,ie.index,!1,!0))}),function h(D,k,O){(O.steps[O.active]||{}).visible||(O.active=O._visibleSteps[0]._index),k.call(g,O).call(z,O).call(A,O).call(w,O).call(_,D,O).call(m,D,O);var U=O._dims;T.setTranslate(k,U.lx+O.pad.l,U.ly+O.pad.t),k.call(P,O,!1),k.call(g,O)}(k,M.select(this),q)})}}},78032:($,K,e)=>{"use strict";var M=e(76786);$.exports={moduleType:"component",name:M.name,layoutAttributes:e(30683),supplyLayoutDefaults:e(48612),draw:e(99201)}},77875:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(31556),T=e(97799),n=e(5228),i=n.strTranslate,u=e(27630),a=e(8416),r=e(88565),o=e(49431),v=e(94598).OPPOSITE_SIDE,p=/ [XY][0-9]* /;$.exports={draw:function f(l,y,s){var k,x=s.propContainer,h=s.propName,g=s.placeholder,m=s.traceIndex,d=s.avoid||{},A=s.attributes,b=s.transform,c=s.containerGroup,S=l._fullLayout,w=1,E=!1,P=x.title,R=(P&&P.text?P.text:"").trim(),F=P&&P.font?P.font:{},_=F.family,z=F.size,D=F.color;"title.text"===h?k="titleText":-1!==h.indexOf("axis")?k="axisTitleText":h.indexOf(!0)&&(k="colorbarTitleText");var O=l._context.edits[k];""===R?w=0:R.replace(p," % ")===g.replace(p," % ")&&(w=.2,E=!0,O||(R="")),s._meta?R=n.templateString(R,s._meta):S._meta&&(R=n.templateString(R,S._meta));var H,U=R||O;c||(c=n.ensureSingle(S._infolayer,"g","g-"+y),H=S._hColorbarMoveTitle);var j=c.selectAll("text").data(U?[0]:[]);if(j.enter().append("text"),j.text(R).attr("class",y),j.exit().remove(),!U)return c;function ee(q){n.syncOrAsync([W,B],q)}function W(q){var oe;return!b&&H&&(b={}),b?(oe="",b.rotate&&(oe+="rotate("+[b.rotate,A.x,A.y]+")"),(b.offset||H)&&(oe+=i(0,(b.offset||0)-(H||0)))):oe=null,q.attr("transform",oe),q.style({"font-family":_,"font-size":M.round(z,2)+"px",fill:a.rgb(D),opacity:w*a.opacity(D),"font-weight":t.fontWeight}).attr(A).call(r.convertToTspans,l),t.previousPromises(l)}function B(q){var oe=M.select(q.node().parentNode);if(d&&d.selection&&d.side&&R){oe.attr("transform",null);var ie=v[d.side],V="left"===d.side||"top"===d.side?-1:1,Y=I(d.pad)?d.pad:2,ae=u.bBox(oe.node()),X={t:0,b:0,l:0,r:0},J=l._fullLayout._reservedMargin;for(var ue in J)for(var re in J[ue]){var ne=J[ue][re];X[re]=Math.max(X[re],ne)}var se={left:X.l,top:X.t,right:S.width-X.r,bottom:S.height-X.b},de=d.maxShift||V*(se[d.side]-ae[d.side]),be=0;if(de<0)be=de;else{var De=d.offsetLeft||0,_e=d.offsetTop||0;ae.left-=De,ae.right-=De,ae.top-=_e,ae.bottom-=_e,d.selection.each(function(){var Le=u.bBox(this);n.bBoxIntersect(ae,Le,Y)&&(be=Math.max(be,V*(Le[d.side]-ae[ie])+Y))}),be=Math.min(de,be),x._titleScoot=Math.abs(be)}if(be>0||de<0){var Ce={left:[-be,0],right:[be,0],top:[0,-be],bottom:[0,be]}[d.side];oe.attr("transform",i(Ce[0],Ce[1]))}}}return j.call(ee),O&&(R?j.on(".opacity",null):function te(){w=0,E=!0,j.text(g).on("mouseover.opacity",function(){M.select(this).transition().duration(o.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(o.HIDE_PLACEHOLDER).style("opacity",0)})}(),j.call(r.makeEditable,{gd:l}).on("edit",function(q){void 0!==m?T.call("_guiRestyle",l,h,q,m):T.call("_guiRelayout",l,h,q)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(ee)}).on("input",function(q){this.text(q||" ").call(r.positionText,A.x,A.y)})),j.classed("js-placeholder",E),c}}},49110:($,K,e)=>{"use strict";var M=e(47297),I=e(36593),t=e(18836).extendFlat,T=e(71859).overrideAll,n=e(43012),i=e(96906).templatedArray,u=i("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}});$.exports=T(i("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:t(n({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:M({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:I.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root")},98695:$=>{"use strict";$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},44325:($,K,e)=>{"use strict";var M=e(5228),I=e(84322),t=e(49110),n=e(98695).name,i=t.buttons;function u(r,o,v){function p(y,s){return M.coerce(r,o,t,y,s)}p("visible",I(r,o,{name:"buttons",handleItemDefaults:a}).length>0)&&(p("active"),p("direction"),p("type"),p("showactive"),p("x"),p("y"),M.noneOrAll(r,o,["x","y"]),p("xanchor"),p("yanchor"),p("pad.t"),p("pad.r"),p("pad.b"),p("pad.l"),M.coerceFont(p,"font",v.font),p("bgcolor",v.paper_bgcolor),p("bordercolor"),p("borderwidth"))}function a(r,o){function v(f,l){return M.coerce(r,o,i,f,l)}v("visible","skip"===r.method||Array.isArray(r.args))&&(v("method"),v("args"),v("args2"),v("label"),v("execute"))}$.exports=function(o,v){I(o,v,{name:n,handleItemDefaults:u})}},36945:($,K,e)=>{"use strict";var M=e(21572),I=e(31556),t=e(8416),T=e(27630),n=e(5228),i=e(88565),u=e(96906).arrayEditor,a=e(94598).LINE_SPACING,r=e(98695),o=e(3357);function v(R){return R._index}function f(R,F){return+R.attr(r.menuIndexAttrName)===F._index}function l(R,F,_,z,D,k,O,U){F.active=O,u(R.layout,r.name,F).applyUpdate("active",O),"buttons"===F.type?s(R,z,null,null,F):"dropdown"===F.type&&(D.attr(r.menuIndexAttrName,"-1"),y(R,z,D,k,F),U||s(R,z,D,k,F))}function y(R,F,_,z,D){var k=n.ensureSingle(F,"g",r.headerClassName,function(B){B.style("pointer-events","all")}),O=D._dims,U=D.active,H=D.buttons[U]||r.blankHeaderOpts,j={y:D.pad.t,yPad:0,x:D.pad.l,xPad:0,index:0},ee={width:O.headerWidth,height:O.headerHeight};k.call(g,D,H,R).call(E,D,j,ee),n.ensureSingle(F,"text",r.headerArrowClassName,function(B){B.attr("text-anchor","end").call(T.font,D.font).text(r.arrowSymbol[D.direction])}).attr({x:O.headerWidth-r.arrowOffsetX+D.pad.l,y:O.headerHeight/2+r.textOffsetY+D.pad.t}),k.on("click",function(){_.call(P,String(f(_,D)?-1:D._index)),s(R,F,_,z,D)}),k.on("mouseover",function(){k.call(b)}),k.on("mouseout",function(){k.call(c,D)}),T.setTranslate(F,O.lx,O.ly)}function s(R,F,_,z,D){_||(_=F).attr("pointer-events","all");var k=function p(R){return-1==+R.attr(r.menuIndexAttrName)}(_)&&"buttons"!==D.type?[]:D.buttons,O="dropdown"===D.type?r.dropdownButtonClassName:r.buttonClassName,U=_.selectAll("g."+O).data(n.filterVisible(k)),H=U.enter().append("g").classed(O,!0),j=U.exit();"dropdown"===D.type?(H.attr("opacity","0").transition().attr("opacity","1"),j.transition().attr("opacity","0").remove()):j.remove();var ee=0,W=0,B=D._dims,te=-1!==["up","down"].indexOf(D.direction);"dropdown"===D.type&&(te?W=B.headerHeight+r.gapButtonHeader:ee=B.headerWidth+r.gapButtonHeader),"dropdown"===D.type&&"up"===D.direction&&(W=-r.gapButtonHeader+r.gapButton-B.openHeight),"dropdown"===D.type&&"left"===D.direction&&(ee=-r.gapButtonHeader+r.gapButton-B.openWidth);var q={x:B.lx+ee+D.pad.l,y:B.ly+W+D.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},oe={l:q.x+D.borderwidth,t:q.y+D.borderwidth};U.each(function(ie,V){var Y=M.select(this);Y.call(g,D,ie,R).call(E,D,q),Y.on("click",function(){M.event.defaultPrevented||(ie.execute&&(ie.args2&&D.active===V?(l(R,D,0,F,_,z,-1),I.executeAPICommand(R,ie.method,ie.args2)):(l(R,D,0,F,_,z,V),I.executeAPICommand(R,ie.method,ie.args))),R.emit("plotly_buttonclicked",{menu:D,button:ie,active:D.active}))}),Y.on("mouseover",function(){Y.call(b)}),Y.on("mouseout",function(){Y.call(c,D),U.call(A,D)})}),U.call(A,D),te?(oe.w=Math.max(B.openWidth,B.headerWidth),oe.h=q.y-oe.t):(oe.w=q.x-oe.l,oe.h=Math.max(B.openHeight,B.headerHeight)),oe.direction=D.direction,z&&(U.size()?function x(R,F,_,z,D,k){var ee,W,B,O=D.direction,U="up"===O||"down"===O,H=D._dims,j=D.active;if(U)for(W=0,B=0;B<j;B++)W+=H.heights[B]+r.gapButton;else for(ee=0,B=0;B<j;B++)ee+=H.widths[B]+r.gapButton;z.enable(k,ee,W),z.hbar&&z.hbar.attr("opacity","0").transition().attr("opacity","1"),z.vbar&&z.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,z,D,oe):function h(R){var F=!!R.hbar,_=!!R.vbar;F&&R.hbar.transition().attr("opacity","0").each("end",function(){F=!1,_||R.disable()}),_&&R.vbar.transition().attr("opacity","0").each("end",function(){_=!1,F||R.disable()})}(z))}function g(R,F,_,z){R.call(m,F).call(d,F,_,z)}function m(R,F){n.ensureSingle(R,"rect",r.itemRectClassName,function(z){z.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})}).call(t.stroke,F.bordercolor).call(t.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function d(R,F,_,z){var D=n.ensureSingle(R,"text",r.itemTextClassName,function(U){U.attr({"text-anchor":"start","data-notex":1})}),k=_.label,O=z._fullLayout._meta;O&&(k=n.templateString(k,O)),D.call(T.font,F.font).text(k).call(i.convertToTspans,z)}function A(R,F){var _=F.active;R.each(function(z,D){var k=M.select(this);D===_&&F.showactive&&k.select("rect."+r.itemRectClassName).call(t.fill,r.activeColor)})}function b(R){R.select("rect."+r.itemRectClassName).call(t.fill,r.hoverColor)}function c(R,F){R.select("rect."+r.itemRectClassName).call(t.fill,F.bgcolor)}function S(R,F){var _=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},z=T.tester.selectAll("g."+r.dropdownButtonClassName).data(n.filterVisible(F.buttons));z.enter().append("g").classed(r.dropdownButtonClassName,!0);var D=-1!==["up","down"].indexOf(F.direction);z.each(function(ee,W){var B=M.select(this);B.call(g,F,ee,R);var te=B.select("."+r.itemTextClassName),q=te.node()&&T.bBox(te.node()).width,oe=Math.max(q+r.textPadX,r.minWidth),ie=F.font.size*a,V=i.lineCount(te),Y=Math.max(ie*V,r.minHeight)+r.textOffsetY;Y=Math.ceil(Y),oe=Math.ceil(oe),_.widths[W]=oe,_.heights[W]=Y,_.height1=Math.max(_.height1,Y),_.width1=Math.max(_.width1,oe),D?(_.totalWidth=Math.max(_.totalWidth,oe),_.openWidth=_.totalWidth,_.totalHeight+=Y+r.gapButton,_.openHeight+=Y+r.gapButton):(_.totalWidth+=oe+r.gapButton,_.openWidth+=oe+r.gapButton,_.totalHeight=Math.max(_.totalHeight,Y),_.openHeight=_.totalHeight)}),D?_.totalHeight-=r.gapButton:_.totalWidth-=r.gapButton,_.headerWidth=_.width1+r.arrowPadX,_.headerHeight=_.height1,"dropdown"===F.type&&(D?(_.width1+=r.arrowPadX,_.totalHeight=_.height1):_.totalWidth=_.width1,_.totalWidth+=r.arrowPadX),z.remove();var k=_.totalWidth+F.pad.l+F.pad.r,O=_.totalHeight+F.pad.t+F.pad.b,U=R._fullLayout._size;_.lx=U.l+U.w*F.x,_.ly=U.t+U.h*(1-F.y);var H="left";n.isRightAnchor(F)&&(_.lx-=k,H="right"),n.isCenterAnchor(F)&&(_.lx-=k/2,H="center");var j="top";n.isBottomAnchor(F)&&(_.ly-=O,j="bottom"),n.isMiddleAnchor(F)&&(_.ly-=O/2,j="middle"),_.totalWidth=Math.ceil(_.totalWidth),_.totalHeight=Math.ceil(_.totalHeight),_.lx=Math.round(_.lx),_.ly=Math.round(_.ly),I.autoMargin(R,w(F),{x:F.x,y:F.y,l:k*({right:1,center:.5}[H]||0),r:k*({left:1,center:.5}[H]||0),b:O*({top:1,middle:.5}[j]||0),t:O*({bottom:1,middle:.5}[j]||0)})}function w(R){return r.autoMarginIdRoot+R._index}function E(R,F,_,z){z=z||{};var D=R.select("."+r.itemRectClassName),k=R.select("."+r.itemTextClassName),O=F.borderwidth,U=_.index,H=F._dims;T.setTranslate(R,O+_.x,O+_.y);var j=-1!==["up","down"].indexOf(F.direction),ee=z.height||(j?H.heights[U]:H.height1);D.attr({x:0,y:0,width:z.width||(j?H.width1:H.widths[U]),height:ee});var W=F.font.size*a,te=(i.lineCount(k)-1)*W/2;i.positionText(k,r.textOffsetX,ee/2-te+r.textOffsetY),j?_.y+=H.heights[U]+_.yPad:_.x+=H.widths[U]+_.xPad,_.index++}function P(R,F){R.attr(r.menuIndexAttrName,F||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}$.exports=function(F){var _=F._fullLayout,z=n.filterVisible(_[r.name]);function D(B){I.autoMargin(F,w(B))}var k=_._menulayer.selectAll("g."+r.containerClassName).data(z.length>0?[0]:[]);if(k.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),k.exit().each(function(){M.select(this).selectAll("g."+r.headerGroupClassName).each(D)}).remove(),0!==z.length){var O=k.selectAll("g."+r.headerGroupClassName).data(z,v);O.enter().append("g").classed(r.headerGroupClassName,!0);for(var U=n.ensureSingle(k,"g",r.dropdownButtonGroupClassName,function(B){B.style("pointer-events","all")}),H=0;H<z.length;H++){var j=z[H];S(F,j)}var ee="updatemenus"+_._uid,W=new o(F,U,ee);O.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(P)),O.exit().each(function(B){U.call(P),D(B)}).remove(),O.each(function(B){var te=M.select(this),q="dropdown"===B.type?U:null;I.manageCommandObserver(F,B,B.buttons,function(oe){l(F,B,B.buttons[oe.index],te,q,W,oe.index,!0)}),"dropdown"===B.type?(y(F,te,U,W,B),f(U,B)&&s(F,te,U,W,B)):s(F,te,null,null,B)})}}},86738:($,K,e)=>{"use strict";var M=e(98695);$.exports={moduleType:"component",name:M.name,layoutAttributes:e(49110),supplyLayoutDefaults:e(44325),draw:e(36945)}},3357:($,K,e)=>{"use strict";$.exports=n;var M=e(21572),I=e(8416),t=e(27630),T=e(5228);function n(i,u,a){this.gd=i,this.container=u,this.id=a,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}n.barWidth=2,n.barLength=20,n.barRadius=2,n.barPad=1,n.barColor="#808BA4",n.prototype.enable=function(u,a,r){var o=this.gd._fullLayout,v=o.width,p=o.height;this.position=u;var c,S,w,E,f=this.position.l,l=this.position.w,y=this.position.t,s=this.position.h,x=this.position.direction,h="down"===x,g="left"===x,d="up"===x,A=l,b=s;!h&&!g&&!("right"===x)&&!d&&(this.position.direction="down",h=!0),h||d?(S=(c=f)+A,h?(w=y,b=(E=Math.min(w+b,p))-w):b=(E=y+b)-(w=Math.max(E-b,0))):(E=(w=y)+b,g?A=(S=f+A)-(c=Math.max(S-A,0)):(c=f,A=(S=Math.min(c+A,v))-c)),this._box={l:c,t:w,w:A,h:b};var R=l>A,F=n.barLength+2*n.barPad,_=n.barWidth+2*n.barPad,z=f,D=y+s;D+_>p&&(D=p-_);var k=this.container.selectAll("rect.scrollbar-horizontal").data(R?[0]:[]);k.exit().on(".drag",null).remove(),k.enter().append("rect").classed("scrollbar-horizontal",!0).call(I.fill,n.barColor),R?(this.hbar=k.attr({rx:n.barRadius,ry:n.barRadius,x:z,y:D,width:F,height:_}),this._hbarXMin=z+F/2,this._hbarTranslateMax=A-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var O=s>b,U=n.barWidth+2*n.barPad,H=n.barLength+2*n.barPad,j=f+l,ee=y;j+U>v&&(j=v-U);var W=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);W.exit().on(".drag",null).remove(),W.enter().append("rect").classed("scrollbar-vertical",!0).call(I.fill,n.barColor),O?(this.vbar=W.attr({rx:n.barRadius,ry:n.barRadius,x:j,y:ee,width:U,height:H}),this._vbarYMin=ee+H/2,this._vbarTranslateMax=b-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var B=this.id,te=c-.5,q=O?S+U+.5:S+.5,oe=w-.5,ie=R?E+_+.5:E+.5,V=o._topdefs.selectAll("#"+B).data(R||O?[0]:[]);if(V.exit().remove(),V.enter().append("clipPath").attr("id",B).append("rect"),R||O?(this._clipRect=V.select("rect").attr({x:Math.floor(te),y:Math.floor(oe),width:Math.ceil(q)-Math.floor(te),height:Math.ceil(ie)-Math.floor(oe)}),this.container.call(t.setClipUrl,B,this.gd),this.bg.attr({x:f,y,width:l,height:s})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(t.setClipUrl,null),delete this._clipRect),R||O){var Y=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Y);var ae=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));R&&this.hbar.on(".drag",null).call(ae),O&&this.vbar.on(".drag",null).call(ae)}this.setTranslate(a,r)},n.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(t.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},n.prototype._onBoxDrag=function(){var u=this.translateX,a=this.translateY;this.hbar&&(u-=M.event.dx),this.vbar&&(a-=M.event.dy),this.setTranslate(u,a)},n.prototype._onBoxWheel=function(){var u=this.translateX,a=this.translateY;this.hbar&&(u+=M.event.deltaY),this.vbar&&(a+=M.event.deltaY),this.setTranslate(u,a)},n.prototype._onBarDrag=function(){var u=this.translateX,a=this.translateY;if(this.hbar){var r=u+this._hbarXMin,o=r+this._hbarTranslateMax;u=(T.constrain(M.event.x,r,o)-r)/(o-r)*(this.position.w-this._box.w)}if(this.vbar){var l=a+this._vbarYMin,y=l+this._vbarTranslateMax;a=(T.constrain(M.event.y,l,y)-l)/(y-l)*(this.position.h-this._box.h)}this.setTranslate(u,a)},n.prototype.setTranslate=function(u,a){var r=this.position.w-this._box.w,o=this.position.h-this._box.h;if(u=T.constrain(u||0,0,r),a=T.constrain(a||0,0,o),this.translateX=u,this.translateY=a,this.container.call(t.setTranslate,this._box.l-this.position.l-u,this._box.t-this.position.t-a),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+u-.5),y:Math.floor(this.position.t+a-.5)}),this.hbar){var v=u/r;this.hbar.call(t.setTranslate,u+v*this._hbarTranslateMax,a)}if(this.vbar){var p=a/o;this.vbar.call(t.setTranslate,u,a+p*this._vbarTranslateMax)}}},94598:$=>{"use strict";$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},4967:$=>{"use strict";$.exports={axisRefDescription:function(K,e,M){return["If set to a",K,"axis id (e.g. *"+K+"* or","*"+K+"2*), the `"+K+"` position refers to a",K,"coordinate. If set to *paper*, the `"+K+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",K,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+K+"2 domain* refers to the domain of the second",K," axis and a",K,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",K,"axis."].join(" ")}}},73673:$=>{"use strict";$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},5329:$=>{"use strict";$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},80797:$=>{"use strict";$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},8041:$=>{"use strict";$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},49767:$=>{"use strict";$.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},49431:$=>{"use strict";$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},71103:$=>{"use strict";$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},44727:($,K)=>{"use strict";K.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],K.STYLE=K.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},70415:($,K)=>{"use strict";K.xmlns="http://www.w3.org/2000/xmlns/",K.svg="http://www.w3.org/2000/svg",K.xlink="http://www.w3.org/1999/xlink",K.svgAttrs={xmlns:K.svg,"xmlns:xlink":K.xlink}},17457:($,K,e)=>{"use strict";K.version=e(60994).version,e(7072),e(28563);for(var M=e(97799),I=K.register=M.register,t=e(10493),T=Object.keys(t),n=0;n<T.length;n++){var i=T[n];"_"!==i.charAt(0)&&(K[i]=t[i]),I({moduleType:"apiMethod",name:i,fn:t[i]})}I(e(39524)),I([e(84774),e(5912),e(48356),e(31711),e(38708),e(86738),e(78032),e(92477),e(29350),e(99399),e(63849),e(45103),e(55144),e(66160),e(76863),e(33771)]),I([e(44303),e(33098)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(I(window.PlotlyLocales),delete window.PlotlyLocales),K.Icons=e(65185);var u=e(76863),a=e(31556);K.Plots={resize:a.resize,graphJson:a.graphJson,sendDataToCloud:a.sendDataToCloud},K.Fx={hover:u.hover,unhover:u.unhover,loneHover:u.loneHover,loneUnhover:u.loneUnhover},K.Snapshot=e(80432),K.PlotSchema=e(55773)},65185:$=>{"use strict";$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},11934:($,K)=>{"use strict";K.isLeftAnchor=function(M){return"left"===M.xanchor||"auto"===M.xanchor&&M.x<=1/3},K.isCenterAnchor=function(M){return"center"===M.xanchor||"auto"===M.xanchor&&M.x>1/3&&M.x<2/3},K.isRightAnchor=function(M){return"right"===M.xanchor||"auto"===M.xanchor&&M.x>=2/3},K.isTopAnchor=function(M){return"top"===M.yanchor||"auto"===M.yanchor&&M.y>=2/3},K.isMiddleAnchor=function(M){return"middle"===M.yanchor||"auto"===M.yanchor&&M.y>1/3&&M.y<2/3},K.isBottomAnchor=function(M){return"bottom"===M.yanchor||"auto"===M.yanchor&&M.y<=1/3}},91869:($,K,e)=>{"use strict";var M=e(76444),I=M.mod,t=M.modHalf,T=Math.PI,n=2*T;function a(x){return Math.abs(x[1]-x[0])>n-1e-14}function r(x,h){return t(h-x,n)}function v(x,h){if(a(h))return!0;var g,m;h[0]<h[1]?(g=h[0],m=h[1]):(g=h[1],m=h[0]),(g=I(g,n))>(m=I(m,n))&&(m+=n);var d=I(x,n),A=d+n;return d>=g&&d<=m||A>=g&&A<=m}function f(x,h,g,m,d,A,b){d=d||0,A=A||0;var S,w,E,P,R,c=a([g,m]);function F(k,O){return[k*Math.cos(O)+d,A-k*Math.sin(O)]}c?(S=0,w=T,E=n):g<m?(S=g,E=m):(S=m,E=g),x<h?(P=x,R=h):(P=h,R=x);var D,_=Math.abs(E-S)<=T?0:1;function z(k,O,U){return"A"+[k,k]+" "+[0,_,U]+" "+F(k,O)}return c?D=null===P?"M"+F(R,S)+z(R,w,0)+z(R,E,0)+"Z":"M"+F(P,S)+z(P,w,0)+z(P,E,0)+"ZM"+F(R,S)+z(R,w,1)+z(R,E,1)+"Z":null===P?(D="M"+F(R,S)+z(R,E,0),b&&(D+="L0,0Z")):D="M"+F(P,S)+"L"+F(R,S)+z(R,E,0)+"L"+F(P,E)+z(P,S,1)+"Z",D}$.exports={deg2rad:function i(x){return x/180*T},rad2deg:function u(x){return x/T*180},angleDelta:r,angleDist:function o(x,h){return Math.abs(r(x,h))},isFullCircle:a,isAngleInsideSector:v,isPtInsideSector:function p(x,h,g,m){return!!v(h,m)&&(g[0]<g[1]?(d=g[0],A=g[1]):(d=g[1],A=g[0]),x>=d&&x<=A);var d,A},pathArc:function l(x,h,g,m,d){return f(null,x,h,g,m,d,0)},pathSector:function y(x,h,g,m,d){return f(null,x,h,g,m,d,1)},pathAnnulus:function s(x,h,g,m,d,A){return f(x,h,g,m,d,A,1)}}},90406:($,K,e)=>{"use strict";var M=e(47104).decode,I=e(51366),t=Array.isArray,T=ArrayBuffer,n=DataView;function i(f){return T.isView(f)&&!(f instanceof n)}function u(f){return t(f)||i(f)}K.isTypedArray=i,K.isArrayOrTypedArray=u,K.isArray1D=function a(f){return!u(f[0])},K.ensureArray=function(f,l){return t(f)||(f=[]),f.length=l,f};var r={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function o(f){return f.constructor===ArrayBuffer}function p(f,l,y){if(u(f)){if(u(f[0])){for(var s=y,x=0;x<f.length;x++)s=l(s,f[x].length);return s}return f.length}return 0}r.uint8c=r.u1c,r.uint8=r.u1,r.int8=r.i1,r.uint16=r.u2,r.int16=r.i2,r.uint32=r.u4,r.int32=r.i4,r.float32=r.f4,r.float64=r.f8,K.isArrayBuffer=o,K.decodeTypedArraySpec=function(f){var l=[],y=function v(f){return{bdata:f.bdata,dtype:f.dtype,shape:f.shape}}(f),s=y.dtype,x=r[s];if(!x)throw new Error('Error in dtype: "'+s+'"');var h=x.BYTES_PER_ELEMENT,g=y.bdata;o(g)||(g=M(g));var m=void 0===y.shape?[g.byteLength/h]:(""+y.shape).split(",");m.reverse();var A,b,d=m.length,c=+m[0],S=h*c,w=0;if(1===d)l=new x(g);else if(2===d)for(A=+m[1],b=0;b<A;b++)l[b]=new x(g,w,c),w+=S;else{if(3!==d)throw new Error("ndim: "+d+'is not supported with the shape:"'+y.shape+'"');A=+m[1];for(var E=+m[2],P=0;P<E;P++)for(l[P]=[],b=0;b<A;b++)l[P][b]=new x(g,w,c),w+=S}return l.bdata=y.bdata,l.dtype=y.dtype,l.shape=m.reverse().join(","),f._inputArray=l,l},K.isTypedArraySpec=function(f){return I(f)&&f.hasOwnProperty("dtype")&&"string"==typeof f.dtype&&f.hasOwnProperty("bdata")&&("string"==typeof f.bdata||o(f.bdata))&&(void 0===f.shape||f.hasOwnProperty("shape")&&("string"==typeof f.shape||"number"==typeof f.shape))},K.concat=function(){var s,x,h,g,m,d,A,b,f=[],l=!0,y=0;for(h=0;h<arguments.length;h++)(d=(g=arguments[h]).length)&&(x?f.push(g):(x=g,m=d),t(g)?s=!1:(l=!1,y?s!==g.constructor&&(s=!1):s=g.constructor),y+=d);if(!y)return[];if(!f.length)return x;if(l)return x.concat.apply(x,f);if(s){for((A=new s(y)).set(x),h=0;h<f.length;h++)g=f[h],A.set(g,m),m+=g.length;return A}for(A=new Array(y),b=0;b<x.length;b++)A[b]=x[b];for(h=0;h<f.length;h++){for(g=f[h],b=0;b<g.length;b++)A[m+b]=g[b];m+=b}return A},K.maxRowLength=function(f){return p(f,Math.max,0)},K.minRowLength=function(f){return p(f,Math.min,1/0)}},87970:($,K,e)=>{"use strict";var M=e(7347),I=e(71103).BADNUM,t=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(n){return"string"==typeof n&&(n=n.replace(t,"")),M(n)?Number(n):I}},77749:$=>{"use strict";$.exports=function(e){var M=e._fullLayout;M._glcanvas&&M._glcanvas.size()&&M._glcanvas.each(function(I){I.regl&&I.regl.clear({color:!0,depth:!0})})}},84004:$=>{"use strict";$.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},77942:($,K,e)=>{"use strict";var M=e(7347),I=e(80791),t=e(82684),T=e(1472),n=e(8416),i=e(49431).DESELECTDIM,u=e(95430),a=e(13943).counter,r=e(76444).modHalf,o=e(90406).isArrayOrTypedArray,v=e(90406).isTypedArraySpec,p=e(90406).decodeTypedArraySpec;function f(l,y){var s=K.valObjectMeta[y.valType];if(y.arrayOk&&o(l))return!0;if(s.validateFunction)return s.validateFunction(l,y);var x={},h=x,g={set:function(m){h=m}};return s.coerceFunction(l,g,x,y),h!==x}K.valObjectMeta={data_array:{description:["An {array} of data.","The value must represent an {array} or it will be ignored,","but this array can be provided in several forms:","(1) a regular {array} object","(2) a typed array (e.g. Float32Array)","(3) an object with keys dtype, bdata, and optionally shape.","In this 3rd form, dtype is one of","*f8*, *f4*.","*i4*, *u4*,","*i2*, *u2*,","*i1*, *u1* or *u1c* for Uint8ClampedArray.","In addition to shorthand `dtype` above one could also use the following forms:","*float64*, *float32*,","*int32*, *uint32*,","*int16*, *uint16*,","*int8*, *uint8* or *uint8c* for Uint8ClampedArray.","`bdata` is either a base64-encoded string or the ArrayBuffer of","an integer or float typed array.","For either multi-dimensional arrays you must also","provide its dimensions separated by comma via `shape`.","For example using `dtype`: *f4* and `shape`: *5,100* you can","declare a 2-D array that has 5 rows and 100 columns","containing float32 values i.e. 4 bits per value.","`shape` is optional for one dimensional arrays."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(l,y,s){y.set(o(l)?l:v(l)?p(l):s)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(l,y,s,x){x.coerceNumber&&(l=+l),-1===x.values.indexOf(l)?y.set(s):y.set(l)},validateFunction:function(l,y){y.coerceNumber&&(l=+l);for(var s=y.values,x=0;x<s.length;x++){var h=String(s[x]);if("/"===h.charAt(0)&&"/"===h.charAt(h.length-1)){if(new RegExp(h.substr(1,h.length-2)).test(l))return!0}else if(l===s[x])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(l,y,s){!0===l||!1===l?y.set(l):y.set(s)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(l,y,s,x){!M(l)||void 0!==x.min&&l<x.min||void 0!==x.max&&l>x.max?y.set(s):y.set(+l)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(l,y,s,x){l%1||!M(l)||void 0!==x.min&&l<x.min||void 0!==x.max&&l>x.max?y.set(s):y.set(+l)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(l,y,s,x){if("string"!=typeof l){var h="number"==typeof l;!0!==x.strict&&h?y.set(String(l)):y.set(s)}else x.noBlank&&!l?y.set(s):y.set(l)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(l,y,s){I(l).isValid()?y.set(l):y.set(s)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(l,y,s){Array.isArray(l)&&l.length&&l.every(function x(h){return I(h).isValid()})?y.set(l):y.set(s)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(T.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(l,y,s){y.set(T.get(l,s))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(l,y,s){"auto"===l?y.set("auto"):M(l)?y.set(r(+l,360)):y.set(s)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(l,y,s,x){var h=x.regex||a(s);"string"==typeof l&&h.test(l)?y.set(l):y.set(s)},validateFunction:function(l,y){var s=y.dflt;return l===s||"string"==typeof l&&!!a(s).test(l)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(l,y,s,x){if(-1===(x.extras||[]).indexOf(l))if("string"==typeof l){for(var h=l.split("+"),g=0;g<h.length;){var m=h[g];-1===x.flags.indexOf(m)||h.indexOf(m)<g?h.splice(g,1):g++}h.length?y.set(h.join("+")):y.set(s)}else y.set(s);else y.set(l)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(l,y,s){void 0===l?y.set(s):y.set(v(l)?p(l):l)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(l,y,s,x){function h(z,D,k){var O,U={set:function(H){O=H}};return void 0===k&&(k=D.dflt),K.valObjectMeta[D.valType].coerceFunction(z,U,k,D),O}if(v(l)&&(l=p(l)),o(l)){var w,E,P,R,F,_,g=2===x.dimensions||"1-2"===x.dimensions&&Array.isArray(l)&&o(l[0]),m=x.items,d=[],A=Array.isArray(m),b=A&&g&&o(m[0]),c=g&&A&&!b,S=A&&!c?m.length:l.length;if(s=Array.isArray(s)?s:[],g)for(w=0;w<S;w++)for(d[w]=[],P=o(l[w])?l[w]:[],F=c?m.length:A?m[w].length:P.length,E=0;E<F;E++)R=c?m[E]:A?m[w][E]:m,void 0!==(_=h(P[E],R,(s[w]||[])[E]))&&(d[w][E]=_);else for(w=0;w<S;w++)void 0!==(_=h(l[w],A?m[w]:m,s[w]))&&(d[w]=_);y.set(d)}else y.set(s)},validateFunction:function(l,y){if(!o(l))return!1;var s=y.items,x=Array.isArray(s),h=2===y.dimensions;if(!y.freeLength&&l.length!==s.length)return!1;for(var g=0;g<l.length;g++)if(h){if(!o(l[g])||!y.freeLength&&l[g].length!==s[g].length)return!1;for(var m=0;m<l[g].length;m++)if(!f(l[g][m],x?s[g][m]:s))return!1}else if(!f(l[g],x?s[g]:s))return!1;return!0}}},K.coerce=function(l,y,s,x,h){var g=u(s,x).get(),m=u(l,x),d=u(y,x),A=m.get(),b=y._template;if(void 0===A&&b&&(A=u(b,x).get(),b=0),void 0===h&&(h=g.dflt),g.arrayOk){if(o(A))return d.set(A),A;if(v(A))return A=p(A),d.set(A),A}var c=K.valObjectMeta[g.valType].coerceFunction;c(A,d,h,g);var S=d.get();return b&&S===h&&!f(A,g)&&(c(A=u(b,x).get(),d,h,g),S=d.get()),S},K.coerce2=function(l,y,s,x,h){var g=u(l,x),m=K.coerce(l,y,s,x,h);return null!=g.get()&&m},K.coerceFont=function(l,y,s){var x={};return s=s||{},x.family=l(y+".family",s.family),x.size=l(y+".size",s.size),x.color=l(y+".color",s.color),x},K.coercePattern=function(l,y,s,x){if(l(y+".shape")){l(y+".solidity"),l(y+".size");var m="overlay"===l(y+".fillmode");if(!x){var d=l(y+".bgcolor",m?s:void 0);l(y+".fgcolor",m?n.contrast(d):s)}l(y+".fgopacity",m?.5:1)}},K.coerceHoverinfo=function(l,y,s){var m,x=y._module.attributes,h=x.hoverinfo?x:t,g=h.hoverinfo;if(1===s._dataLength){var d="all"===g.dflt?g.flags.slice():g.dflt.split("+");d.splice(d.indexOf("name"),1),m=d.join("+")}return K.coerce(l,y,h,"hoverinfo",m)},K.coerceSelectionMarkerOpacity=function(l,y){if(l.marker){var x,h,s=l.marker.opacity;if(void 0!==s)!o(s)&&!l.selected&&!l.unselected&&(x=s,h=i*s),y("selected.marker.opacity",x),y("unselected.marker.opacity",h)}},K.validate=f},26738:($,K,e)=>{"use strict";var g,m,M=e(85400).i$,I=e(7347),t=e(7231),T=e(76444).mod,n=e(71103),i=n.BADNUM,u=n.ONEDAY,a=n.ONEHOUR,r=n.ONEMIN,o=n.ONESEC,v=n.EPOCHJD,p=e(97799),f=e(85400).g0,l=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,s=(new Date).getFullYear()-70;function x(D){return D&&p.componentsRegistry.calendars&&"string"==typeof D&&"gregorian"!==D}function d(D,k){return String(D+Math.pow(10,k)).substr(1)}K.dateTick0=function(D,k){var O=function h(D,k){return x(D)?k?p.getComponentMethod("calendars","CANONICAL_SUNDAY")[D]:p.getComponentMethod("calendars","CANONICAL_TICK")[D]:k?"2000-01-02":"2000-01-01"}(D,!!k);if(k<2)return O;var U=K.dateTime2ms(O,D);return U+=u*(k-1),K.ms2DateTime(U,0,D)},K.dfltRange=function(D){return x(D)?p.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},K.isJSDate=function(D){return"object"==typeof D&&null!==D&&"function"==typeof D.getTime},K.dateTime2ms=function(D,k){if(K.isJSDate(D)){var O=D.getTimezoneOffset()*r,U=(D.getUTCMinutes()-D.getMinutes())*r+(D.getUTCSeconds()-D.getSeconds())*o+(D.getUTCMilliseconds()-D.getMilliseconds());if(U){var H=3*r;O=O-H/2+T(U-O+H/2,H)}return(D=Number(D)-O)>=g&&D<=m?D:i}if("string"!=typeof D&&"number"!=typeof D)return i;D=String(D);var j=x(k),ee=D.charAt(0);j&&("G"===ee||"g"===ee)&&(D=D.substr(1),k="");var W=j&&"chinese"===k.substr(0,7),B=D.match(W?y:l);if(!B)return i;var te=B[1],q=B[3]||"1",oe=Number(B[5]||1),ie=Number(B[7]||0),V=Number(B[9]||0),Y=Number(B[11]||0);if(j){if(2===te.length)return i;var ae;te=Number(te);try{var X=p.getComponentMethod("calendars","getCal")(k);if(W){var J="i"===q.charAt(q.length-1);q=parseInt(q,10),ae=X.newDate(te,X.toMonthIndex(te,q,J),oe)}else ae=X.newDate(te,Number(q),oe)}catch{return i}return ae?(ae.toJD()-v)*u+ie*a+V*r+Y*o:i}te=2===te.length?(Number(te)+2e3-s)%100+s:Number(te),q-=1;var ue=new Date(Date.UTC(2e3,q,oe,ie,V));return ue.setUTCFullYear(te),ue.getUTCMonth()!==q||ue.getUTCDate()!==oe?i:ue.getTime()+Y*o},g=K.MIN_MS=K.dateTime2ms("-9999"),m=K.MAX_MS=K.dateTime2ms("9999-12-31 23:59:59.9999"),K.isDateTime=function(D,k){return K.dateTime2ms(D,k)!==i};var A=90*u,b=3*a,c=5*r;function S(D,k,O,U,H){if((k||O||U||H)&&(D+=" "+d(k,2)+":"+d(O,2),(U||H)&&(D+=":"+d(U,2),H))){for(var j=4;H%10==0;)j-=1,H/=10;D+="."+d(H,j)}return D}K.ms2DateTime=function(D,k,O){if("number"!=typeof D||!(D>=g&&D<=m))return i;k||(k=0);var j,ee,W,B,te,q,U=Math.floor(10*T(D+.05,1)),H=Math.round(D-U/10);if(x(O)){var oe=Math.floor(H/u)+v,ie=Math.floor(T(D,u));try{j=p.getComponentMethod("calendars","getCal")(O).fromJD(oe).formatDate("yyyy-mm-dd")}catch{j=f("G%Y-%m-%d")(new Date(H))}if("-"===j.charAt(0))for(;j.length<11;)j="-0"+j.substr(1);else for(;j.length<10;)j="0"+j;ee=k<A?Math.floor(ie/a):0,W=k<A?Math.floor(ie%a/r):0,B=k<b?Math.floor(ie%r/o):0,te=k<c?ie%o*10+U:0}else q=new Date(H),j=f("%Y-%m-%d")(q),ee=k<A?q.getUTCHours():0,W=k<A?q.getUTCMinutes():0,B=k<b?q.getUTCSeconds():0,te=k<c?10*q.getUTCMilliseconds()+U:0;return S(j,ee,W,B,te)},K.ms2DateTimeLocal=function(D){if(!(D>=g+u&&D<=m-u))return i;var k=Math.floor(10*T(D+.05,1)),O=new Date(Math.round(D-k/10));return S(M("%Y-%m-%d")(O),O.getHours(),O.getMinutes(),O.getSeconds(),10*O.getUTCMilliseconds()+k)},K.cleanDate=function(D,k,O){if(D===i)return k;if(K.isJSDate(D)||"number"==typeof D&&isFinite(D)){if(x(O))return t.error("JS Dates and milliseconds are incompatible with world calendars",D),k;if(!(D=K.ms2DateTimeLocal(+D))&&void 0!==k)return k}else if(!K.isDateTime(D,O))return t.error("unrecognized date",D),k;return D};var w=/%\d?f/g,E=/%h/g,P={1:"1",2:"1",3:"2",4:"2"};function R(D,k,O,U){D=D.replace(w,function(j){var ee=Math.min(+j.charAt(1)||6,6);return(k/1e3%1+2).toFixed(ee).substr(2).replace(/0+$/,"")||"0"});var H=new Date(Math.floor(k+.05));if(D=D.replace(E,function(){return P[O("%q")(H)]}),x(U))try{D=p.getComponentMethod("calendars","worldCalFmt")(D,k,U)}catch{return"Invalid"}return O(D)(H)}var F=[59,59.9,59.99,59.999,59.9999];K.formatDate=function(D,k,O,U,H,j){if(H=x(H)&&H,!k)if("y"===O)k=j.year;else if("m"===O)k=j.month;else{if("d"!==O)return function _(D,k){var O=T(D+.05,u),U=d(Math.floor(O/a),2)+":"+d(T(Math.floor(O/r),60),2);if("M"!==k){I(k)||(k=0);var j=(100+Math.min(T(D/o,60),F[k])).toFixed(k).substr(1);k>0&&(j=j.replace(/0+$/,"").replace(/[\.]$/,"")),U+=":"+j}return U}(D,O)+"\n"+R(j.dayMonthYear,D,U,H);k=j.dayMonth+"\n"+j.year}return R(k,D,U,H)};var z=3*u;K.incrementMonth=function(D,k,O){O=x(O)&&O;var U=T(D,u);if(D=Math.round(D-U),O)try{var H=Math.round(D/u)+v,j=p.getComponentMethod("calendars","getCal")(O),ee=j.fromJD(H);return k%12?j.add(ee,k,"m"):j.add(ee,k/12,"y"),(ee.toJD()-v)*u+U}catch{t.error("invalid ms "+D+" in calendar "+O)}var W=new Date(D+z);return W.setUTCMonth(W.getUTCMonth()+k)+U-z},K.findExactDates=function(D,k){for(var ee,W,O=0,U=0,H=0,j=0,B=x(k)&&p.getComponentMethod("calendars","getCal")(k),te=0;te<D.length;te++)if(W=D[te],I(W)){if(!(W%u))if(B)try{1===(ee=B.fromJD(W/u+v)).day()?1===ee.month()?O++:U++:H++}catch{}else 1===(ee=new Date(W)).getUTCDate()?0===ee.getUTCMonth()?O++:U++:H++}else j++;H+=U+=O;var q=D.length-j;return{exactYears:O/q,exactMonths:U/q,exactDays:H/q}}},21733:($,K,e)=>{"use strict";var M=e(21572),I=e(7231),t=e(243),T=e(22971);function u(s){var x=s&&s.parentNode;x&&x.removeChild(s)}function r(s,x,h){var g="plotly.js-style-"+s,m=document.getElementById(g);m||((m=document.createElement("style")).setAttribute("id",g),m.appendChild(document.createTextNode("")),document.head.appendChild(m));var d=m.sheet;d.insertRule?d.insertRule(x+"{"+h+"}",0):d.addRule?d.addRule(x,h,0):I.warn("addStyleRule failed")}function p(s){var x=window.getComputedStyle(s,null),h=x.getPropertyValue("-webkit-transform")||x.getPropertyValue("-moz-transform")||x.getPropertyValue("-ms-transform")||x.getPropertyValue("-o-transform")||x.getPropertyValue("transform");return"none"===h?null:h.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(g){return+g})}function f(s){for(var x=[];l(s);)x.push(s),s=s.parentNode;return x}function l(s){return s&&(s instanceof Element||s instanceof HTMLElement)}$.exports={getGraphDiv:function n(s){var x;if("string"==typeof s){if(null===(x=document.getElementById(s)))throw new Error("No DOM element with id '"+s+"' exists on the page.");return x}if(null==s)throw new Error("DOM element provided is null or undefined");return s},isPlotDiv:function i(s){var x=M.select(s);return x.node()instanceof HTMLElement&&x.size()&&x.classed("js-plotly-plot")},removeElement:u,addStyleRule:function a(s,x){r("global",s,x)},addRelatedStyleRule:r,deleteRelatedStyleRule:function o(s){var x="plotly.js-style-"+s,h=document.getElementById(x);h&&u(h)},getFullTransformMatrix:function v(s){var x=f(s),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return x.forEach(function(g){var m=p(g);if(m){var d=t.convertCssMatrix(m);h=T.multiply(h,h,d)}}),h},getElementTransformMatrix:p,getElementAndAncestors:f,equalDomRects:function y(s,x){return s&&x&&s.top===x.top&&s.left===x.left&&s.right===x.right&&s.bottom===x.bottom}}},70074:($,K,e)=>{"use strict";var M=e(59069).EventEmitter,I={init:function(t){if(t._ev instanceof M)return t;var T=new M,n=new M;return t._ev=T,t._internalEv=n,t.on=T.on.bind(T),t.once=T.once.bind(T),t.removeListener=T.removeListener.bind(T),t.removeAllListeners=T.removeAllListeners.bind(T),t._internalOn=n.on.bind(n),t._internalOnce=n.once.bind(n),t._removeInternalListener=n.removeListener.bind(n),t._removeAllInternalListeners=n.removeAllListeners.bind(n),t.emit=function(i,u){typeof jQuery<"u"&&jQuery(t).trigger(i,u),T.emit(i,u),n.emit(i,u)},t},triggerHandler:function(t,T,n){var i,u;typeof jQuery<"u"&&(i=jQuery(t).triggerHandler(T,n));var a=t._ev;if(!a)return i;var v,r=a._events[T];if(!r)return i;function o(p){return p.listener?(a.removeListener(T,p.listener),p.fired?void 0:(p.fired=!0,p.listener.apply(a,[n]))):p.apply(a,[n])}for(r=Array.isArray(r)?r:[r],v=0;v<r.length-1;v++)o(r[v]);return u=o(r[v]),void 0!==i?i:u},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}};$.exports=I},18836:($,K,e)=>{"use strict";var M=e(51366),I=Array.isArray;function T(n,i,u,a){var v,p,f,l,y,s,x,r=n[0],o=n.length;if(2===o&&I(r)&&I(n[1])&&0===r.length){if(x=function t(n,i){var u,a;for(u=0;u<n.length;u++){if(null!==(a=n[u])&&"object"==typeof a)return!1;void 0!==a&&(i[u]=a)}return!0}(n[1],r),x)return r;r.splice(0,r.length)}for(var h=1;h<o;h++)for(p in v=n[h])f=r[p],l=v[p],a&&I(l)?r[p]=l:i&&l&&(M(l)||(y=I(l)))?(y?(y=!1,s=f&&I(f)?f:[]):s=f&&M(f)?f:{},r[p]=T([s,l],i,u,a)):(typeof l<"u"||u)&&(r[p]=l);return r}K.extendFlat=function(){return T(arguments,!1,!1,!1)},K.extendDeep=function(){return T(arguments,!0,!1,!1)},K.extendDeepAll=function(){return T(arguments,!0,!0,!1)},K.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)}},1639:$=>{"use strict";$.exports=function(e){for(var M={},I=[],t=0,T=0;T<e.length;T++){var n=e[T];1!==M[n]&&(M[n]=1,I[t++]=n)}return I}},59773:$=>{"use strict";function K(I){return!0===I.visible}function e(I){var t=I[0].trace;return!0===t.visible&&0!==t._length}$.exports=function(t){for(var T=function M(I){return Array.isArray(I)&&Array.isArray(I[0])&&I[0][0]&&I[0][0].trace}(t)?e:K,n=[],i=0;i<t.length;i++){var u=t[i];T(u)&&n.push(u)}return n}},14369:($,K,e)=>{"use strict";var M=e(21572),I=e(90945),t=e(93964),T=e(15427),n=e(51503),i=e(61409),u=e(7231),a=e(51366),r=e(95430),o=e(80134),v=Object.keys(I),p={"ISO-3":i,"USA-states":i,"country names":function f(d){for(var A=0;A<v.length;A++){var b=v[A];if(new RegExp(I[b]).test(d.trim().toLowerCase()))return b}return u.log("Unrecognized country name: "+d+"."),!1}};function s(d){var A=d.geojson,b=window.PlotlyGeoAssets||{},c="string"==typeof A?b[A]:A;return a(c)?c:(u.error("Oops ... something went wrong when fetching "+A),!1)}$.exports={locationToFeature:function l(d,A,b){if(!A||"string"!=typeof A)return!1;var S,w,E,c=p[d](A);if(c){if("USA-states"===d)for(S=[],E=0;E<b.length;E++)(w=b[E]).properties&&w.properties.gu&&"USA"===w.properties.gu&&S.push(w);else S=b;for(E=0;E<S.length;E++)if((w=S[E]).id===c)return w;u.log(["Location with id",c,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function y(d){var w,E,P,R,A=d.geometry,b=A.coordinates,c=d.id,S=[];function F(_){for(var z=0;z<_.length-1;z++)if(_[z][0]>0&&_[z+1][0]<0)return z;return null}switch(w="RUS"===c||"FJI"===c?function(_){var z;if(null===F(_))z=_;else for(z=new Array(_.length),R=0;R<_.length;R++)z[R]=[_[R][0]<0?_[R][0]+360:_[R][0],_[R][1]];S.push(o.tester(z))}:"ATA"===c?function(_){var z=F(_);if(null===z)return S.push(o.tester(_));var D=new Array(_.length+1),k=0;for(R=0;R<_.length;R++)R>z?D[k++]=[_[R][0]+360,_[R][1]]:R===z?(D[k++]=_[R],D[k++]=[_[R][0],-90]):D[k++]=_[R];var O=o.tester(D);O.pts.pop(),S.push(O)}:function(_){S.push(o.tester(_))},A.type){case"MultiPolygon":for(E=0;E<b.length;E++)for(P=0;P<b[E].length;P++)w(b[E][P]);break;case"Polygon":for(E=0;E<b.length;E++)w(b[E])}return S},getTraceGeojson:s,extractTraceFeature:function x(d){var A=d[0].trace,b=s(A);if(!b)return!1;var w,c={},S=[];for(w=0;w<A._length;w++){var E=d[w];(E.loc||0===E.loc)&&(c[E.loc]=E)}function P(_){var z=r(_,A.featureidkey||"id").get(),D=c[z];if(D){var k=_.geometry;if("Polygon"===k.type||"MultiPolygon"===k.type){var O={type:"Feature",id:z,geometry:k,properties:{}};O.properties.ct=function h(d){var b,A=d.geometry;if("MultiPolygon"===A.type)for(var c=A.coordinates,S=0,w=0;w<c.length;w++){var E={type:"Polygon",coordinates:c[w]},P=t.default(E);P>S&&(S=P,b=E)}else b=A;return T.default(b).geometry.coordinates}(O),D.fIn=_,D.fOut=O,S.push(O)}else u.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete c[z]}switch(b.type){case"FeatureCollection":var R=b.features;for(w=0;w<R.length;w++)P(R[w]);break;case"Feature":P(b);break;default:return u.warn(["Invalid GeoJSON type",(b.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in c)u.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+A.featureidkey+"*."].join(" "));return S},fetchTraceGeoData:function g(d){var A=window.PlotlyGeoAssets||{},b=[];function c(R){return new Promise(function(F,_){M.json(R,function(z,D){if(z){delete A[R];var k=404===z.status?'GeoJSON at URL "'+R+'" does not exist.':"Unexpected error while fetching from "+R;return _(new Error(k))}return A[R]=D,F(D)})})}function S(R){return new Promise(function(F,_){var z=0,D=setInterval(function(){return A[R]&&"pending"!==A[R]?(clearInterval(D),F(A[R])):z>100?(clearInterval(D),_("Unexpected error while fetching from "+R)):void z++},50)})}for(var w=0;w<d.length;w++){var P=d[w][0].trace.geojson;"string"==typeof P&&(A[P]?"pending"===A[P]&&b.push(S(P)):(A[P]="pending",b.push(c(P))))}return b},computeBbox:function m(d){return n.default(d)}}},41368:($,K,e)=>{"use strict";var M=e(71103).BADNUM;K.calcTraceToLineCoords=function(I){for(var T=I[0].trace.connectgaps,n=[],i=[],u=0;u<I.length;u++){var r=I[u].lonlat;r[0]!==M?i.push(r):!T&&i.length>0&&(n.push(i),i=[])}return i.length>0&&n.push(i),n},K.makeLine=function(I){return 1===I.length?{type:"LineString",coordinates:I[0]}:{type:"MultiLineString",coordinates:I}},K.makePolygon=function(I){if(1===I.length)return{type:"Polygon",coordinates:I};for(var t=new Array(I.length),T=0;T<I.length;T++)t[T]=[I[T]];return{type:"MultiPolygon",coordinates:t}},K.makeBlank=function(){return{type:"Point",coordinates:[]}}},74347:($,K,e)=>{"use strict";var T,n,i,M=e(76444).mod;function I(u,a,r,o,v,p,f,l){var y=r-u,s=v-u,x=f-v,h=o-a,g=p-a,m=l-p,d=y*m-x*h;if(0===d)return null;var A=(s*m-x*g)/d,b=(s*h-y*g)/d;return b<0||b>1||A<0||A>1?null:{x:u+y*A,y:a+h*A}}function t(u,a,r,o,v){var p=o*u+v*a;if(p<0)return o*o+v*v;if(p>r){var f=o-u,l=v-a;return f*f+l*l}var y=o*a-v*u;return y*y/r}K.segmentsIntersect=I,K.segmentDistance=function(a,r,o,v,p,f,l,y){if(I(a,r,o,v,p,f,l,y))return 0;var s=o-a,x=v-r,h=l-p,g=y-f,m=s*s+x*x,d=h*h+g*g,A=Math.min(t(s,x,m,p-a,f-r),t(s,x,m,l-a,y-r),t(h,g,d,a-p,r-f),t(h,g,d,o-p,v-f));return Math.sqrt(A)},K.getTextLocation=function(a,r,o,v){if((a!==n||v!==i)&&(T={},n=a,i=v),T[o])return T[o];var p=a.getPointAtLength(M(o-v/2,r)),f=a.getPointAtLength(M(o+v/2,r)),l=Math.atan((f.y-p.y)/(f.x-p.x)),y=a.getPointAtLength(M(o,r)),h={x:(4*y.x+p.x+f.x)/6,y:(4*y.y+p.y+f.y)/6,theta:l};return T[o]=h,h},K.clearLocationCache=function(){n=null},K.getVisibleSegment=function(a,r,o){var h,g,v=r.left,p=r.right,f=r.top,l=r.bottom,y=0,s=a.getTotalLength(),x=s;function m(A){var b=a.getPointAtLength(A);0===A?h=b:A===s&&(g=b);var c=b.x<v?v-b.x:b.x>p?b.x-p:0,S=b.y<f?f-b.y:b.y>l?b.y-l:0;return Math.sqrt(c*c+S*S)}for(var d=m(y);d;){if((y+=d+o)>x)return;d=m(y)}for(d=m(x);d;){if(y>(x-=d+o))return;d=m(x)}return{min:y,max:x,len:x-y,total:s,isClosed:0===y&&x===s&&Math.abs(h.x-g.x)<.1&&Math.abs(h.y-g.y)<.1}},K.findPointOnPath=function(a,r,o,v){for(var g,m,d,p=(v=v||{}).pathLength||a.getTotalLength(),f=v.tolerance||.001,l=v.iterationLimit||30,y=a.getPointAtLength(0)[o]>a.getPointAtLength(p)[o]?-1:1,s=0,x=0,h=p;s<l;){if(g=(x+h)/2,d=(m=a.getPointAtLength(g))[o]-r,Math.abs(d)<f)return m;y*d>0?h=g:x=g,s++}return m}},15989:($,K,e)=>{"use strict";var M=e(7347),I=e(80791),t=e(92473),T=e(45103),n=e(36593).defaultLine,i=e(90406).isArrayOrTypedArray,u=t(n);function r(l,y){var s=l;return s[3]*=y,s}function o(l){if(M(l))return u;var y=t(l);return y.length?y:u}function v(l){return M(l)?l:1}$.exports={formatColor:function p(l,y,s){var x=l.color;x&&x._inputArray&&(x=x._inputArray);var A,b,c,S,w,h=i(x),g=i(y),m=T.extractOpts(l),d=[];if(A=void 0!==m.colorscale?T.makeColorScaleFuncFromTrace(l):o,b=h?function(P,R){return void 0===P[R]?u:t(A(P[R]))}:o,c=g?function(P,R){return void 0===P[R]?1:v(P[R])}:v,h||g)for(var E=0;E<s;E++)S=b(x,E),w=c(y,E),d[E]=r(S,w);else d=r(t(x),y);return d},parseColorScale:function f(l){var y=T.extractOpts(l),s=y.colorscale;return y.reversescale&&(s=T.flipScale(y.colorscale)),s.map(function(x){var h=x[0],m=I(x[1]).toRgb();return{index:h,rgb:[m.r,m.g,m.b,m.a]}})}}},47764:($,K,e)=>{"use strict";var M=e(61409);function I(t){return[t]}$.exports={keyFun:function(t){return t.key},repeat:I,descend:M,wrap:I,unwrap:function(t){return t[0]}}},61409:$=>{"use strict";$.exports=function(e){return e}},65956:$=>{"use strict";$.exports=function(e,M){if(!M)return e;var I=1/Math.abs(M),t=I>1?(I*e+I*M)/I:e+M,T=String(t).length;if(T>16){var n=String(M).length;if(T>=String(e).length+n){var u=parseFloat(t).toPrecision(12);-1===u.indexOf("e+")&&(t=+u)}}return t}},5228:($,K,e)=>{"use strict";var M=e(21572),I=e(85400).g0,t=e(24137).WU,T=e(7347),n=e(71103),i=n.FP_SAFE,u=-i,a=n.BADNUM,r=$.exports={};r.adjustFormat=function(ae){return!ae||/^\d[.]\df/.test(ae)||/[.]\d%/.test(ae)?ae:"0.f"===ae?"~f":/^\d%/.test(ae)?"~%":/^\ds/.test(ae)?"~s":!/^[~,.0$]/.test(ae)&&/[&fps]/.test(ae)?"~"+ae:ae};var o={};r.warnBadFormat=function(Y){var ae=String(Y);o[ae]||(o[ae]=1,r.warn('encountered bad format: "'+ae+'"'))},r.noFormat=function(Y){return String(Y)},r.numberFormat=function(Y){var ae;try{ae=t(r.adjustFormat(Y))}catch{return r.warnBadFormat(Y),r.noFormat}return ae},r.nestedProperty=e(95430),r.keyedContainer=e(4208),r.relativeAttr=e(85254),r.isPlainObject=e(51366),r.toLogRange=e(11899),r.relinkPrivateKeys=e(75603);var v=e(90406);r.isArrayBuffer=v.isArrayBuffer,r.isTypedArray=v.isTypedArray,r.isArrayOrTypedArray=v.isArrayOrTypedArray,r.isArray1D=v.isArray1D,r.ensureArray=v.ensureArray,r.concat=v.concat,r.maxRowLength=v.maxRowLength,r.minRowLength=v.minRowLength;var p=e(76444);r.mod=p.mod,r.modHalf=p.modHalf;var f=e(77942);r.valObjectMeta=f.valObjectMeta,r.coerce=f.coerce,r.coerce2=f.coerce2,r.coerceFont=f.coerceFont,r.coercePattern=f.coercePattern,r.coerceHoverinfo=f.coerceHoverinfo,r.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity,r.validate=f.validate;var l=e(26738);r.dateTime2ms=l.dateTime2ms,r.isDateTime=l.isDateTime,r.ms2DateTime=l.ms2DateTime,r.ms2DateTimeLocal=l.ms2DateTimeLocal,r.cleanDate=l.cleanDate,r.isJSDate=l.isJSDate,r.formatDate=l.formatDate,r.incrementMonth=l.incrementMonth,r.dateTick0=l.dateTick0,r.dfltRange=l.dfltRange,r.findExactDates=l.findExactDates,r.MIN_MS=l.MIN_MS,r.MAX_MS=l.MAX_MS;var y=e(98198);r.findBin=y.findBin,r.sorterAsc=y.sorterAsc,r.sorterDes=y.sorterDes,r.distinctVals=y.distinctVals,r.roundUp=y.roundUp,r.sort=y.sort,r.findIndexOfMin=y.findIndexOfMin,r.sortObjectKeys=e(65452);var s=e(90651);r.aggNums=s.aggNums,r.len=s.len,r.mean=s.mean,r.median=s.median,r.midRange=s.midRange,r.variance=s.variance,r.stdev=s.stdev,r.interp=s.interp;var x=e(243);r.init2dArray=x.init2dArray,r.transposeRagged=x.transposeRagged,r.dot=x.dot,r.translationMatrix=x.translationMatrix,r.rotationMatrix=x.rotationMatrix,r.rotationXYMatrix=x.rotationXYMatrix,r.apply3DTransform=x.apply3DTransform,r.apply2DTransform=x.apply2DTransform,r.apply2DTransform2=x.apply2DTransform2,r.convertCssMatrix=x.convertCssMatrix,r.inverseTransformMatrix=x.inverseTransformMatrix;var h=e(91869);r.deg2rad=h.deg2rad,r.rad2deg=h.rad2deg,r.angleDelta=h.angleDelta,r.angleDist=h.angleDist,r.isFullCircle=h.isFullCircle,r.isAngleInsideSector=h.isAngleInsideSector,r.isPtInsideSector=h.isPtInsideSector,r.pathArc=h.pathArc,r.pathSector=h.pathSector,r.pathAnnulus=h.pathAnnulus;var g=e(11934);r.isLeftAnchor=g.isLeftAnchor,r.isCenterAnchor=g.isCenterAnchor,r.isRightAnchor=g.isRightAnchor,r.isTopAnchor=g.isTopAnchor,r.isMiddleAnchor=g.isMiddleAnchor,r.isBottomAnchor=g.isBottomAnchor;var m=e(74347);r.segmentsIntersect=m.segmentsIntersect,r.segmentDistance=m.segmentDistance,r.getTextLocation=m.getTextLocation,r.clearLocationCache=m.clearLocationCache,r.getVisibleSegment=m.getVisibleSegment,r.findPointOnPath=m.findPointOnPath;var d=e(18836);r.extendFlat=d.extendFlat,r.extendDeep=d.extendDeep,r.extendDeepAll=d.extendDeepAll,r.extendDeepNoArrays=d.extendDeepNoArrays;var A=e(7231);r.log=A.log,r.warn=A.warn,r.error=A.error;var b=e(13943);r.counterRegex=b.counter;var c=e(30617);r.throttle=c.throttle,r.throttleDone=c.done,r.clearThrottle=c.clear;var S=e(21733);function w(Y){var ae={};for(var X in Y)for(var J=Y[X],ue=0;ue<J.length;ue++)ae[J[ue]]=+X;return ae}r.getGraphDiv=S.getGraphDiv,r.isPlotDiv=S.isPlotDiv,r.removeElement=S.removeElement,r.addStyleRule=S.addStyleRule,r.addRelatedStyleRule=S.addRelatedStyleRule,r.deleteRelatedStyleRule=S.deleteRelatedStyleRule,r.getFullTransformMatrix=S.getFullTransformMatrix,r.getElementTransformMatrix=S.getElementTransformMatrix,r.getElementAndAncestors=S.getElementAndAncestors,r.equalDomRects=S.equalDomRects,r.clearResponsive=e(84004),r.preserveDrawingBuffer=e(67773),r.makeTraceGroups=e(12852),r._=e(97542),r.notifier=e(64563),r.filterUnique=e(1639),r.filterVisible=e(59773),r.pushUnique=e(83338),r.increment=e(65956),r.cleanNumber=e(87970),r.ensureNumber=function(ae){return T(ae)?(ae=Number(ae))>i||ae<u?a:ae:a},r.isIndex=function(Y,ae){return!(void 0!==ae&&Y>=ae)&&(T(Y)&&Y>=0&&Y%1==0)},r.noop=e(10127),r.identity=e(61409),r.repeat=function(Y,ae){for(var X=new Array(ae),J=0;J<ae;J++)X[J]=Y;return X},r.swapAttrs=function(Y,ae,X,J){X||(X="x"),J||(J="y");for(var ue=0;ue<ae.length;ue++){var re=ae[ue],ne=r.nestedProperty(Y,re.replace("?",X)),se=r.nestedProperty(Y,re.replace("?",J)),de=ne.get();ne.set(se.get()),se.set(de)}},r.raiseToTop=function(ae){ae.parentNode.appendChild(ae)},r.cancelTransition=function(Y){return Y.transition().duration(0)},r.constrain=function(Y,ae,X){return ae>X?Math.max(X,Math.min(ae,Y)):Math.max(ae,Math.min(X,Y))},r.bBoxIntersect=function(Y,ae,X){return X=X||0,Y.left<=ae.right+X&&ae.left<=Y.right+X&&Y.top<=ae.bottom+X&&ae.top<=Y.bottom+X},r.simpleMap=function(Y,ae,X,J,ue){for(var re=Y.length,ne=new Array(re),se=0;se<re;se++)ne[se]=ae(Y[se],X,J,ue);return ne},r.randstr=function Y(ae,X,J,ue){if(J||(J=16),void 0===X&&(X=24),X<=0)return"0";var se,de,re=Math.log(Math.pow(2,X))/Math.log(J),ne="";for(se=2;re===1/0;se*=2)re=Math.log(Math.pow(2,X/se))/Math.log(J)*se;var De=re-Math.floor(re);for(se=0;se<Math.floor(re);se++)ne=Math.floor(Math.random()*J).toString(J)+ne;De&&(de=Math.pow(J,De),ne=Math.floor(Math.random()*de).toString(J)+ne);var _e=parseInt(ne,J);return ae&&ae[ne]||_e!==1/0&&_e>=Math.pow(2,X)?ue>10?(r.warn("randstr failed uniqueness"),ne):Y(ae,X,J,(ue||0)+1):ne},r.OptionControl=function(Y,ae){Y||(Y={}),ae||(ae="opt");var X={optionList:[],_newoption:function(J){J[ae]=Y,X[J.name]=J,X.optionList.push(J)}};return X["_"+ae]=Y,X},r.smooth=function(Y,ae){if((ae=Math.round(ae)||0)<2)return Y;var se,de,be,De,X=Y.length,J=2*X,ue=2*ae-1,re=new Array(ue),ne=new Array(X);for(se=0;se<ue;se++)re[se]=(1-Math.cos(Math.PI*(se+1)/ae))/(2*ae);for(se=0;se<X;se++){for(De=0,de=0;de<ue;de++)(be=se+de+1-ae)<-X?be-=J*Math.round(be/J):be>=J&&(be-=J*Math.floor(be/J)),be<0?be=-1-be:be>=X&&(be=J-1-be),De+=Y[be]*re[de];ne[se]=De}return ne},r.syncOrAsync=function(Y,ae,X){var J;function re(){return r.syncOrAsync(Y,ae,X)}for(;Y.length;)if((J=(0,Y.splice(0,1)[0])(ae))&&J.then)return J.then(re);return X&&X(ae)},r.stripTrailingSlash=function(Y){return"/"===Y.substr(-1)?Y.substr(0,Y.length-1):Y},r.noneOrAll=function(Y,ae,X){if(Y){var re,J=!1,ue=!0;for(re=0;re<X.length;re++)null!=Y[X[re]]?J=!0:ue=!1;if(J&&!ue)for(re=0;re<X.length;re++)Y[X[re]]=ae[X[re]]}},r.mergeArray=function(Y,ae,X,J){var ue="function"==typeof J;if(r.isArrayOrTypedArray(Y))for(var re=Math.min(Y.length,ae.length),ne=0;ne<re;ne++){var se=Y[ne];ae[ne][X]=ue?J(se):se}},r.mergeArrayCastPositive=function(Y,ae,X){return r.mergeArray(Y,ae,X,function(J){var ue=+J;return isFinite(ue)&&ue>0?ue:0})},r.fillArray=function(Y,ae,X,J){if(J=J||r.identity,r.isArrayOrTypedArray(Y))for(var ue=0;ue<ae.length;ue++)ae[ue][X]=J(Y[ue])},r.castOption=function(Y,ae,X,J){J=J||r.identity;var ue=r.nestedProperty(Y,X).get();return r.isArrayOrTypedArray(ue)?Array.isArray(ae)&&r.isArrayOrTypedArray(ue[ae[0]])?J(ue[ae[0]][ae[1]]):J(ue[ae]):ue},r.extractOption=function(Y,ae,X,J){if(X in Y)return Y[X];var ue=r.nestedProperty(ae,J).get();return Array.isArray(ue)?void 0:ue},r.tagSelected=function(Y,ae,X){var re,_e,J=ae.selectedpoints,ue=ae._indexToPoints;ue&&(re=w(ue));for(var se=0;se<J.length;se++){var de=J[se];if(r.isIndex(de)||r.isArrayOrTypedArray(de)&&r.isIndex(de[0])&&r.isIndex(de[1])){var be=re?re[de]:de,De=X?X[be]:be;void 0!==(_e=De)&&_e<Y.length&&(Y[De].selected=1)}}},r.selIndices2selPoints=function(Y){var ae=Y.selectedpoints,X=Y._indexToPoints;if(X){for(var J=w(X),ue=[],re=0;re<ae.length;re++){var ne=ae[re];if(r.isIndex(ne)){var se=J[ne];r.isIndex(se)&&ue.push(se)}}return ue}return ae},r.getTargetArray=function(Y,ae){var X=ae.target;if("string"==typeof X&&X){var J=r.nestedProperty(Y,X).get();return!!r.isArrayOrTypedArray(J)&&J}return!!r.isArrayOrTypedArray(X)&&X},r.minExtend=function E(Y,ae,X){var J={};"object"!=typeof ae&&(ae={});var ne,se,de,ue="pieLike"===X?-1:3,re=Object.keys(Y);for(ne=0;ne<re.length;ne++)de=Y[se=re[ne]],"_"!==se.charAt(0)&&"function"!=typeof de&&("module"===se?J[se]=de:Array.isArray(de)?J[se]="colorscale"===se||-1===ue?de.slice():de.slice(0,ue):r.isTypedArray(de)?J[se]=-1===ue?de.subarray():de.subarray(0,ue):J[se]=de&&"object"==typeof de?E(Y[se],ae[se],X):de);for(re=Object.keys(ae),ne=0;ne<re.length;ne++)("object"!=typeof(de=ae[se=re[ne]])||!(se in J)||"object"!=typeof J[se])&&(J[se]=de);return J},r.titleCase=function(Y){return Y.charAt(0).toUpperCase()+Y.substr(1)},r.containsAny=function(Y,ae){for(var X=0;X<ae.length;X++)if(-1!==Y.indexOf(ae[X]))return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var P=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return P.test(window.navigator.userAgent)};var R=/iPad|iPhone|iPod/;r.isIOS=function(){return R.test(window.navigator.userAgent)};var F=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var Y=F.exec(window.navigator.userAgent);if(Y&&2===Y.length){var ae=parseInt(Y[1]);if(!isNaN(ae))return ae}return null},r.isD3Selection=function(Y){return Y instanceof M.selection},r.ensureSingle=function(Y,ae,X,J){var ue=Y.select(ae+(X?"."+X:""));if(ue.size())return ue;var re=Y.append(ae);return X&&re.classed(X,!0),J&&re.call(J),re},r.ensureSingleById=function(Y,ae,X,J){var ue=Y.select(ae+"#"+X);if(ue.size())return ue;var re=Y.append(ae).attr("id",X);return J&&re.call(J),re},r.objectFromPath=function(Y,ae){for(var J,X=Y.split("."),ue=J={},re=0;re<X.length;re++){var ne=X[re],se=null,de=X[re].match(/(.*)\[([0-9]+)\]/);de?(ne=de[1],se=de[2],J=J[ne]=[],re===X.length-1?J[se]=ae:J[se]={},J=J[se]):(re===X.length-1?J[ne]=ae:J[ne]={},J=J[ne])}return ue};var _=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function D(Y){return"__"===Y.slice(0,2)}r.expandObjectPaths=function(Y){var ae,X,J,ue,re,ne,se;if("object"==typeof Y&&!Array.isArray(Y))for(X in Y)if(Y.hasOwnProperty(X))if(ae=X.match(_)){if(ue=Y[X],D(J=ae[1]))continue;delete Y[X],Y[J]=r.extendDeepNoArrays(Y[J]||{},r.objectFromPath(X,r.expandObjectPaths(ue))[J])}else if(ae=X.match(z)){if(ue=Y[X],D(J=ae[1]))continue;if(re=parseInt(ae[2]),delete Y[X],Y[J]=Y[J]||[],"."===ae[3])se=ae[4],ne=Y[J][re]=Y[J][re]||{},r.extendDeepNoArrays(ne,r.objectFromPath(se,r.expandObjectPaths(ue)));else{if(D(J))continue;Y[J][re]=r.expandObjectPaths(ue)}}else{if(D(X))continue;Y[X]=r.expandObjectPaths(Y[X])}return Y},r.numSeparate=function(Y,ae,X){if(X||(X=!1),"string"!=typeof ae||0===ae.length)throw new Error("Separator string required for formatting!");"number"==typeof Y&&(Y=String(Y));var J=/(\d+)(\d{3})/,ue=ae.charAt(0),re=ae.charAt(1),ne=Y.split("."),se=ne[0],de=ne.length>1?ue+ne[1]:"";if(re&&(ne.length>1||se.length>4||X))for(;J.test(se);)se=se.replace(J,"$1"+re+"$2");return se+de},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var k=/^\w*$/;r.templateString=function(Y,ae){var X={};return Y.replace(r.TEMPLATE_STRING_REGEX,function(J,ue){var re;return k.test(ue)?re=ae[ue]:(X[ue]=X[ue]||r.nestedProperty(ae,ue).get,re=X[ue]()),r.isValidTextValue(re)?re:""})};var O={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return B.apply(O,arguments)};var U={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return B.apply(U,arguments)};var H=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function j(Y){var ae=Y.match(H);return ae?{key:ae[1],op:ae[2],number:Number(ae[3])}:{key:Y,op:null,number:null}}var ee={max:10,count:0,name:"texttemplate",parseMultDiv:!0};r.texttemplateStringForShapes=function(){return B.apply(ee,arguments)};var W=/^[:|\|]/;function B(Y,ae,X){var J=this,ue=arguments;ae||(ae={});var re={};return Y.replace(r.TEMPLATE_STRING_REGEX,function(ne,se,de){var De="_xother"===se||"_yother"===se,_e="_xother_"===se||"_yother_"===se,Ce="xother_"===se||"yother_"===se,Le="xother"===se||"yother"===se||De||Ce||_e,Fe=se;(De||_e)&&(Fe=Fe.substring(1)),(Ce||_e)&&(Fe=Fe.substring(0,Fe.length-1));var Ie,Qe,at,ke=null,ze=null;if(J.parseMultDiv){var Pe=j(Fe);Fe=Pe.key,ke=Pe.op,ze=Pe.number}if(Le){if(void 0===(Ie=ae[Fe]))return""}else for(at=3;at<ue.length;at++)if(Qe=ue[at]){if(Qe.hasOwnProperty(Fe)){Ie=Qe[Fe];break}if(k.test(Fe)||(Ie=r.nestedProperty(Qe,Fe).get(),(Ie=re[Fe]||r.nestedProperty(Qe,Fe).get())&&(re[Fe]=Ie)),void 0!==Ie)break}if(void 0!==Ie&&("*"===ke&&(Ie*=ze),"/"===ke&&(Ie/=ze)),void 0===Ie&&J)return J.count<J.max&&(r.warn("Variable '"+Fe+"' in "+J.name+" could not be found!"),Ie=ne),J.count===J.max&&r.warn("Too many "+J.name+" warnings - additional warnings will be suppressed"),J.count++,ne;if(de){var Be;if(":"===de[0]&&(Ie=(Be=X?X.numberFormat:r.numberFormat)(de.replace(W,""))(Ie)),"|"===de[0]){Be=X?X.timeFormat:I;var Ne=r.dateTime2ms(Ie);Ie=r.formatDate(Ne,de.replace(W,""),!1,Be)}}else{var nt=Fe+"Label";ae.hasOwnProperty(nt)&&(Ie=ae[nt])}return Le&&(Ie="("+Ie+")",(De||_e)&&(Ie=" "+Ie),(Ce||_e)&&(Ie+=" ")),Ie})}r.subplotSort=function(Y,ae){for(var X=Math.min(Y.length,ae.length)+1,J=0,ue=0,re=0;re<X;re++){var ne=Y.charCodeAt(re)||0,se=ae.charCodeAt(re)||0,de=ne>=48&&ne<=57,be=se>=48&&se<=57;if(de&&(J=10*J+ne-48),be&&(ue=10*ue+se-48),!de||!be){if(J!==ue)return J-ue;if(ne!==se)return ne-se}}return ue-J};var oe=2e9;r.seedPseudoRandom=function(){oe=2e9},r.pseudoRandom=function(){var Y=oe;return oe=(69069*oe+1)%4294967296,Math.abs(oe-Y)<429496729?r.pseudoRandom():oe/4294967296},r.fillText=function(Y,ae,X){var J=Array.isArray(X)?function(ne){X.push(ne)}:function(ne){X.text=ne},ue=r.extractOption(Y,ae,"htx","hovertext");if(r.isValidTextValue(ue))return J(ue);var re=r.extractOption(Y,ae,"tx","text");return r.isValidTextValue(re)?J(re):void 0},r.isValidTextValue=function(Y){return Y||0===Y},r.formatPercent=function(Y,ae){ae=ae||0;for(var X=(Math.round(100*Y*Math.pow(10,ae))*Math.pow(.1,ae)).toFixed(ae)+"%",J=0;J<ae;J++)-1!==X.indexOf(".")&&(X=(X=X.replace("0%","%")).replace(".%","%"));return X},r.isHidden=function(Y){var ae=window.getComputedStyle(Y).display;return!ae||"none"===ae},r.strTranslate=function(Y,ae){return Y||ae?"translate("+Y+","+ae+")":""},r.strRotate=function(Y){return Y?"rotate("+Y+")":""},r.strScale=function(Y){return 1!==Y?"scale("+Y+")":""},r.getTextTransform=function(Y){var ae=Y.noCenter,X=Y.textX,J=Y.textY,ue=Y.targetX,re=Y.targetY,ne=Y.anchorX||0,se=Y.anchorY||0,de=Y.rotate,be=Y.scale;return be?be>1&&(be=1):be=0,r.strTranslate(ue-be*(X+ne),re-be*(J+se))+r.strScale(be)+(de?"rotate("+de+(ae?"":" "+X+" "+J)+")":"")},r.setTransormAndDisplay=function(Y,ae){Y.attr("transform",r.getTextTransform(ae)),Y.style("display",ae.scale?null:"none")},r.ensureUniformFontSize=function(Y,ae){var X=r.extendFlat({},ae);return X.size=Math.max(ae.size,Y._fullLayout.uniformtext.minsize||0),X},r.join2=function(Y,ae,X){var J=Y.length;return J>1?Y.slice(0,-1).join(ae)+X+Y[J-1]:Y.join(ae)},r.bigFont=function(Y){return Math.round(1.2*Y)};var ie=r.getFirefoxVersion(),V=null!==ie&&ie<86;r.getPositionFromD3Event=function(){return V?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},51366:$=>{"use strict";$.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},4208:($,K,e)=>{"use strict";var M=e(95430),I=/^\w*$/;$.exports=function(r,o,v,p){v=v||"name",p=p||"value";var f,l,y,s={};o&&o.length?(y=M(r,o),l=y.get()):l=r,o=o||"";var x={};if(l)for(f=0;f<l.length;f++)x[l[f][v]]=f;var h=I.test(p),g={set:function(m,d){var A=null===d?4:0;if(!l){if(!y||4===A)return;l=[],y.set(l)}var b=x[m];if(void 0===b){if(4===A)return;A|=3,b=l.length,x[m]=b}else d!==(h?l[b][p]:M(l[b],p).get())&&(A|=2);var c=l[b]=l[b]||{};return c[v]=m,h?c[p]=d:M(c,p).set(d),null!==d&&(A&=-5),s[b]=s[b]|A,g},get:function(m){if(l){var d=x[m];if(void 0!==d)return h?l[d][p]:M(l[d],p).get()}},rename:function(m,d){var A=x[m];return void 0===A||(s[A]=1|s[A],x[d]=A,delete x[m],l[A][v]=d),g},remove:function(m){var d=x[m];if(void 0===d)return g;var A=l[d];if(Object.keys(A).length>2)return s[d]=2|s[d],g.set(m,null);if(h){for(f=d;f<l.length;f++)s[f]=3|s[f];for(f=d;f<l.length;f++)x[l[f][v]]--;l.splice(d,1),delete x[m]}else M(A,p).set(null),s[d]=6|s[d];return g},constructUpdate:function(){for(var m,d,A={},b=Object.keys(s),c=0;c<b.length;c++)d=b[c],m=o+"["+d+"]",l[d]?(1&s[d]&&(A[m+"."+v]=l[d][v]),2&s[d]&&(A[m+"."+p]=h?4&s[d]?null:l[d][p]:4&s[d]?null:M(l[d],p).get())):A[m]=null;return A}};return g}},97542:($,K,e)=>{"use strict";var M=e(97799);$.exports=function(t,T){for(var n=t._context.locale,i=0;i<2;i++){for(var u=t._context.locales,a=0;a<2;a++){var r=(u[n]||{}).dictionary;if(r){var o=r[T];if(o)return o}u=M.localeRegistry}var v=n.split("-")[0];if(v===n)break;n=v}return T}},7231:($,K,e)=>{"use strict";var M=e(16574).dfltConfig,I=e(64563),t=$.exports={};t.log=function(){var T;if(M.logging>1){var n=["LOG:"];for(T=0;T<arguments.length;T++)n.push(arguments[T]);console.trace.apply(console,n)}if(M.notifyOnLogging>1){var i=[];for(T=0;T<arguments.length;T++)i.push(arguments[T]);I(i.join("<br>"),"long")}},t.warn=function(){var T;if(M.logging>0){var n=["WARN:"];for(T=0;T<arguments.length;T++)n.push(arguments[T]);console.trace.apply(console,n)}if(M.notifyOnLogging>0){var i=[];for(T=0;T<arguments.length;T++)i.push(arguments[T]);I(i.join("<br>"),"stick")}},t.error=function(){var T;if(M.logging>0){var n=["ERROR:"];for(T=0;T<arguments.length;T++)n.push(arguments[T]);console.error.apply(console,n)}if(M.notifyOnLogging>0){var i=[];for(T=0;T<arguments.length;T++)i.push(arguments[T]);I(i.join("<br>"),"stick")}}},12852:($,K,e)=>{"use strict";var M=e(21572);$.exports=function(t,T,n){var i=t.selectAll("g."+n.replace(/\s/g,".")).data(T,function(a){return a[0].trace.uid});i.exit().remove(),i.enter().append("g").attr("class",n),i.order();var u=t.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each(function(a){a[0][u]=M.select(this)}),i}},243:($,K,e)=>{"use strict";var M=e(22971);K.init2dArray=function(I,t){for(var T=new Array(I),n=0;n<I;n++)T[n]=new Array(t);return T},K.transposeRagged=function(I){var n,i,t=0,T=I.length;for(n=0;n<T;n++)t=Math.max(t,I[n].length);var u=new Array(t);for(n=0;n<t;n++)for(u[n]=new Array(T),i=0;i<T;i++)u[n][i]=I[i][n];return u},K.dot=function(I,t){if(!I.length||!t.length||I.length!==t.length)return null;var n,i,T=I.length;if(I[0].length)for(n=new Array(T),i=0;i<T;i++)n[i]=K.dot(I[i],t);else if(t[0].length){var u=K.transposeRagged(t);for(n=new Array(u.length),i=0;i<u.length;i++)n[i]=K.dot(I,u[i])}else for(n=0,i=0;i<T;i++)n+=I[i]*t[i];return n},K.translationMatrix=function(I,t){return[[1,0,I],[0,1,t],[0,0,1]]},K.rotationMatrix=function(I){var t=I*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},K.rotationXYMatrix=function(I,t,T){return K.dot(K.dot(K.translationMatrix(t,T),K.rotationMatrix(I)),K.translationMatrix(-t,-T))},K.apply3DTransform=function(I){return function(){var t=arguments,T=1===arguments.length?t[0]:[t[0],t[1],t[2]||0];return K.dot(I,[T[0],T[1],T[2],1]).slice(0,3)}},K.apply2DTransform=function(I){return function(){var t=arguments;3===t.length&&(t=t[0]);var T=1===arguments.length?t[0]:[t[0],t[1]];return K.dot(I,[T[0],T[1],1]).slice(0,2)}},K.apply2DTransform2=function(I){var t=K.apply2DTransform(I);return function(T){return t(T.slice(0,2)).concat(t(T.slice(2,4)))}},K.convertCssMatrix=function(I){if(I){var t=I.length;if(16===t)return I;if(6===t)return[I[0],I[1],0,0,I[2],I[3],0,0,0,0,1,0,I[4],I[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},K.inverseTransformMatrix=function(I){var t=[];return M.invert(t,I),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},76444:$=>{"use strict";$.exports={mod:function K(M,I){var t=M%I;return t<0?t+I:t},modHalf:function e(M,I){return Math.abs(M)>I/2?M-Math.round(M/I)*I:M}}},95430:($,K,e)=>{"use strict";var M=e(7347),I=e(90406).isArrayOrTypedArray;function t(v,p){return function(){var l,y,s,x,h,f=v;for(x=0;x<p.length-1;x++){if(-1===(l=p[x])){for(y=!0,s=[],h=0;h<f.length;h++)s[h]=t(f[h],p.slice(x+1))(),s[h]!==s[0]&&(y=!1);return y?s[0]:s}if("number"==typeof l&&!I(f)||("object"!=typeof(f=f[l])||null===f))return}if("object"==typeof f&&null!==f&&null!==(s=f[p[x]]))return s}}$.exports=function(p,f){if(M(f))f=String(f);else if("string"!=typeof f||"[-1]"===f.substr(f.length-4))throw"bad property string";var y,s,x,h,l=f.split(".");for(h=0;h<l.length;h++)if("__"===String(l[h]).slice(0,2))throw"bad property string";for(h=0;h<l.length;){if(y=String(l[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(y[1])l[h]=y[1];else{if(0!==h)throw"bad property string";l.splice(0,1)}for(s=y[2].substr(1,y[2].length-2).split("]["),x=0;x<s.length;x++)h++,l.splice(h,0,Number(s[x]))}h++}return"object"!=typeof p?function o(v,p,f){return{set:function(){throw"bad container"},get:function(){},astr:p,parts:f,obj:v}}(p,f,l):{set:i(p,l,f),get:t(p,l),astr:f,parts:l,obj:p}};var T=/(^|\.)args\[/;function n(v,p){return void 0===v||null===v&&!p.match(T)}function i(v,p,f){return function(l){var g,m,y=v,s="",x=[[v,s]],h=n(l,f);for(m=0;m<p.length-1;m++){if("number"==typeof(g=p[m])&&!I(y))throw"array index but container is not an array";if(-1===g){if(h=!a(y,p.slice(m+1),l,f))break;return}if(!r(y,g,p[m+1],h))break;if("object"!=typeof(y=y[g])||null===y)throw"container is not an object";s=u(s,g),x.push([y,s])}if(h){if(m===p.length-1&&(delete y[p[m]],Array.isArray(y)&&+p[m]==y.length-1))for(;y.length&&void 0===y[y.length-1];)y.pop()}else y[p[m]]=l}}function u(v,p){var f=p;return M(p)?f="["+p+"]":v&&(f="."+p),v+f}function a(v,p,f,l){var d,y=I(f),s=!0,x=f,h=l.replace("-1",0),g=!y&&n(f,h),m=p[0];for(d=0;d<v.length;d++)h=l.replace("-1",d),y&&(g=n(x=f[d%f.length],h)),g&&(s=!1),r(v,d,m,g)&&i(v[d],p,l.replace("-1",d))(x);return s}function r(v,p,f,l){if(void 0===v[p]){if(l)return!1;v[p]="number"==typeof f?[]:{}}return!0}},10127:$=>{"use strict";$.exports=function(){}},64563:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=[];$.exports=function(T,n){if(-1===t.indexOf(T)){t.push(T);var i=1e3;I(n)?i=n:"long"===n&&(i=3e3);var u=M.select("body").selectAll(".plotly-notifier").data([0]);u.enter().append("div").classed("plotly-notifier",!0),u.selectAll(".notifier-note").data(t).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var v=M.select(this);v.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){v.transition().call(r)});for(var p=v.append("p"),f=o.split(/<br\s*\/?>/g),l=0;l<f.length;l++)l&&p.append("br"),p.append("span").text(f[l]);"stick"===n?v.transition().duration(350).style("opacity",1):v.transition().duration(700).style("opacity",1).transition().delay(i).call(r)})}function r(o){o.duration(700).style("opacity",0).each("end",function(v){var p=t.indexOf(v);-1!==p&&t.splice(p,1),M.select(this).remove()})}}},82826:($,K,e)=>{"use strict";var M=e(93720),I="data-savedcursor";$.exports=function(n,i){var u=n.attr(I);if(i){if(!u){for(var a=(n.attr("class")||"").split(" "),r=0;r<a.length;r++){var o=a[r];0===o.indexOf("cursor-")&&n.attr(I,o.substr(7)).classed(o,!1)}n.attr(I)||n.attr(I,"!!")}M(n,i)}else u&&(n.attr(I,null),"!!"===u?M(n):M(n,u))}},80134:($,K,e)=>{"use strict";var M=e(243).dot,I=e(71103).BADNUM,t=$.exports={};t.tester=function(n){var v,i=n.slice(),u=i[0][0],a=u,r=i[0][1],o=r;for((i[i.length-1][0]!==i[0][0]||i[i.length-1][1]!==i[0][1])&&i.push(i[0]),v=1;v<i.length;v++)u=Math.min(u,i[v][0]),a=Math.max(a,i[v][0]),r=Math.min(r,i[v][1]),o=Math.max(o,i[v][1]);var f,p=!1;5===i.length&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(p=!0,f=function(h){return h[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(p=!0,f=function(h){return h[1]===i[0][1]}));var s=!0,x=i[0];for(v=1;v<i.length;v++)if(x[0]!==i[v][0]||x[1]!==i[v][1]){s=!1;break}return{xmin:u,xmax:a,ymin:r,ymax:o,pts:i,contains:p?function l(h,g){var m=h[0],d=h[1];return!(m===I||m<u||m>a||d===I||d<r||d>o||g&&f(h))}:function y(h,g){var m=h[0],d=h[1];if(m===I||m<u||m>a||d===I||d<r||d>o)return!1;var w,E,P,R,F,A=i.length,b=i[0][0],c=i[0][1],S=0;for(w=1;w<A;w++)if(E=b,P=c,b=i[w][0],c=i[w][1],!(m<(R=Math.min(E,b))||m>Math.max(E,b)||d>Math.max(P,c)))if(d<Math.min(P,c))m!==R&&S++;else{if(d===(F=b===E?d:P+(m-E)*(c-P)/(b-E)))return!(1===w&&g);d<=F&&m!==R&&S++}return S%2==1},isRect:p,degenerate:s}},t.isSegmentBent=function(n,i,u,a){var l,y,s,r=n[i],o=[n[u][0]-r[0],n[u][1]-r[1]],v=M(o,o),p=Math.sqrt(v),f=[-o[1]/p,o[0]/p];for(l=i+1;l<u;l++)if(y=[n[l][0]-r[0],n[l][1]-r[1]],(s=M(y,o))<0||s>v||Math.abs(M(y,f))>a)return!0;return!1},t.filter=function(n,i){var u=[n[0]],a=0,r=0;function o(p){n.push(p);var f=u.length,l=a;u.splice(r+1);for(var y=l+1;y<n.length;y++)(y===n.length-1||t.isSegmentBent(n,l,y+1,i))&&(u.push(n[y]),u.length<f-2&&(a=y,r=u.length-1),l=y)}n.length>1&&o(n.pop());return{addPt:o,raw:n,filtered:u}}},90676:($,K,e)=>{"use strict";var M=e(54243),I=e(20884);$.exports=function(T,n,i){var u=T._fullLayout,a=!0;return u._glcanvas.each(function(r){if(r.regl)r.regl.preloadCachedCode(i);else if(!r.pick||u._has("parcoords")){try{r.regl=I({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:T._context.plotGlPixelRatio||global.devicePixelRatio,extensions:n||[],cachedCode:i||{}})}catch{a=!1}r.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(o){T&&T.emit&&T.emit("plotly_webglcontextlost",{event:o,layer:r.key})},!1)}}),a||M({container:u._glcontainer.node()}),a}},67773:($,K,e)=>{"use strict";var M=e(7347),I=e(48214);$.exports=function(n){var i;if("string"!=typeof(i=n&&n.hasOwnProperty("userAgent")?n.userAgent:function t(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&"string"==typeof T.headers["user-agent"]&&(T=T.headers["user-agent"]),T}()))return!0;var u=I({ua:{headers:{"user-agent":i}},tablet:!0,featureDetect:!1});if(!u)for(var a=i.split(" "),r=1;r<a.length;r++){if(-1!==a[r].indexOf("Safari"))for(var v=r-1;v>-1;v--){var p=a[v];if("Version/"===p.substr(0,8)){var f=p.substr(8).split(".")[0];if(M(f)&&(f=+f),f>=13)return!0}}}return u}},83338:$=>{"use strict";$.exports=function(e,M){if(M instanceof RegExp){for(var I=M.toString(),t=0;t<e.length;t++)if(e[t]instanceof RegExp&&e[t].toString()===I)return e;e.push(M)}else(M||0===M)&&-1===e.indexOf(M)&&e.push(M);return e}},32641:($,K,e)=>{"use strict";var M=e(5228),I=e(16574).dfltConfig;var T={add:function(n,i,u,a,r){var o,v;n.undoQueue=n.undoQueue||{index:0,queue:[],sequence:!1},v=n.undoQueue.index,n.autoplay?n.undoQueue.inSequence||(n.autoplay=!1):(!n.undoQueue.sequence||n.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},n.undoQueue.queue.splice(v,n.undoQueue.queue.length-v,o),n.undoQueue.index+=1):o=n.undoQueue.queue[v-1],n.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(i),o.undo.args.unshift(u),o.redo.calls.push(a),o.redo.args.push(r)),n.undoQueue.queue.length>I.queueLength&&(n.undoQueue.queue.shift(),n.undoQueue.index--))},startSequence:function(n){n.undoQueue=n.undoQueue||{index:0,queue:[],sequence:!1},n.undoQueue.sequence=!0,n.undoQueue.beginSequence=!0},stopSequence:function(n){n.undoQueue=n.undoQueue||{index:0,queue:[],sequence:!1},n.undoQueue.sequence=!1,n.undoQueue.beginSequence=!1},undo:function(i){var u,a;if(!(void 0===i.undoQueue||isNaN(i.undoQueue.index)||i.undoQueue.index<=0)){for(i.undoQueue.index--,u=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,a=0;a<u.undo.calls.length;a++)T.plotDo(i,u.undo.calls[a],u.undo.args[a]);i.undoQueue.inSequence=!1,i.autoplay=!1}},redo:function(i){var u,a;if(!(void 0===i.undoQueue||isNaN(i.undoQueue.index)||i.undoQueue.index>=i.undoQueue.queue.length)){for(u=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,a=0;a<u.redo.calls.length;a++)T.plotDo(i,u.redo.calls[a],u.redo.args[a]);i.undoQueue.inSequence=!1,i.autoplay=!1,i.undoQueue.index++}}};T.plotDo=function(n,i,u){n.autoplay=!0,u=function t(n,i){for(var a,u=[],r=0;r<i.length;r++)a=i[r],u[r]=a===n?a:"object"==typeof a?Array.isArray(a)?M.extendDeep([],a):M.extendDeepAll({},a):a;return u}(n,u),i.apply(null,u)},$.exports=T},13943:($,K)=>{"use strict";K.counter=function(e,M,I,t){var T=(M||"")+(I?"":"$"),n=!1===t?"":"^";return"xy"===e?new RegExp(n+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(n+e+"([2-9]|[1-9][0-9]+)?"+T)}},85254:$=>{"use strict";var K=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;$.exports=function(M,I){for(;I;){var t=M.match(K);if(t)M=t[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,I]);M=""}if("^"!==I.charAt(0))break;I=I.slice(1)}return M&&"["!==I.charAt(0)?M+"."+I:M+I}},75603:($,K,e)=>{"use strict";var M=e(90406).isArrayOrTypedArray,I=e(51366);$.exports=function t(T,n){for(var i in n){var u=n[i],a=T[i];if(a!==u)if("_"===i.charAt(0)||"function"==typeof u){if(i in T)continue;T[i]=u}else if(M(u)&&M(a)&&I(u[0])){if("customdata"===i||"ids"===i)continue;for(var r=Math.min(u.length,a.length),o=0;o<r;o++)a[o]!==u[o]&&I(u[o])&&I(a[o])&&t(a[o],u[o])}else I(u)&&I(a)&&(t(a,u),Object.keys(a).length||delete T[i])}}},98198:($,K,e)=>{"use strict";var M=e(7347),I=e(7231),t=e(61409),T=e(71103).BADNUM,n=1e-9;function i(o,v){return o<v}function u(o,v){return o<=v}function a(o,v){return o>v}function r(o,v){return o>=v}K.findBin=function(o,v,p){if(M(v.start))return p?Math.ceil((o-v.start)/v.size-n)-1:Math.floor((o-v.start)/v.size+n);var x,h,f=0,l=v.length,y=0,s=l>1?(v[l-1]-v[0])/(l-1):1;for(h=s>=0?p?i:u:p?r:a,o+=s*n*(p?-1:1)*(s>=0?1:-1);f<l&&y++<100;)h(v[x=Math.floor((f+l)/2)],o)?f=x+1:l=x;return y>90&&I.log("Long binary search..."),f-1},K.sorterAsc=function(o,v){return o-v},K.sorterDes=function(o,v){return v-o},K.distinctVals=function(o){var p,v=o.slice();for(v.sort(K.sorterAsc),p=v.length-1;p>-1&&v[p]===T;p--);for(var s,f=v[p]-v[0]||1,l=f/(p||1)/1e4,y=[],x=0;x<=p;x++){var h=v[x],g=h-s;void 0===s?(y.push(h),s=h):g>l&&(f=Math.min(f,g),y.push(h),s=h)}return{vals:y,minDiff:f}},K.roundUp=function(o,v,p){for(var y,f=0,l=v.length-1,s=0,x=p?0:1,h=p?1:0,g=p?Math.ceil:Math.floor;f<l&&s++<100;)v[y=g((f+l)/2)]<=o?f=y+x:l=y-h;return v[f]},K.sort=function(o,v){for(var p=0,f=0,l=1;l<o.length;l++){var y=v(o[l],o[l-1]);if(y<0?p=1:y>0&&(f=1),p&&f)return o.sort(v)}return f?o:o.reverse()},K.findIndexOfMin=function(o,v){v=v||t;for(var f,p=1/0,l=0;l<o.length;l++){var y=v(o[l]);y<p&&(p=y,f=l)}return f}},93720:$=>{"use strict";$.exports=function(e,M){(e.attr("class")||"").split(" ").forEach(function(I){0===I.indexOf("cursor-")&&e.classed(I,!1)}),M&&e.classed("cursor-"+M,!0)}},54243:($,K,e)=>{"use strict";var M=e(8416),I=function(){};$.exports=function(T){for(var n in T)"function"==typeof T[n]&&(T[n]=I);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=M.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=M.lightLine,i.style["z-index"]=30;var u=document.createElement("p");return u.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",u.style.position="relative",u.style.top="50%",u.style.left="50%",u.style.height="30%",u.style.width="50%",u.style.margin="-15% 0 0 -25%",i.appendChild(u),T.container.appendChild(i),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},65452:$=>{"use strict";$.exports=function(e){return Object.keys(e).sort()}},90651:($,K,e)=>{"use strict";var M=e(7347),I=e(90406).isArrayOrTypedArray;K.aggNums=function(t,T,n,i){var u,a;if((!i||i>n.length)&&(i=n.length),M(T)||(T=!1),I(n[0])){for(a=new Array(i),u=0;u<i;u++)a[u]=K.aggNums(t,T,n[u]);n=a}for(u=0;u<i;u++)M(T)?M(n[u])&&(T=t(+T,+n[u])):T=n[u];return T},K.len=function(t){return K.aggNums(function(T){return T+1},0,t)},K.mean=function(t,T){return T||(T=K.len(t)),K.aggNums(function(n,i){return n+i},0,t)/T},K.midRange=function(t){if(void 0!==t&&0!==t.length)return(K.aggNums(Math.max,null,t)+K.aggNums(Math.min,null,t))/2},K.variance=function(t,T,n){return T||(T=K.len(t)),M(n)||(n=K.mean(t,T)),K.aggNums(function(i,u){return i+Math.pow(u-n,2)},0,t)/T},K.stdev=function(t,T,n){return Math.sqrt(K.variance(t,T,n))},K.median=function(t){var T=t.slice().sort();return K.interp(T,.5)},K.interp=function(t,T){if(!M(T))throw"n should be a finite number";if((T=T*t.length-.5)<0)return t[0];if(T>t.length-1)return t[t.length-1];var n=T%1;return n*t[Math.ceil(T)]+(1-n)*t[Math.floor(T)]}},31936:($,K,e)=>{"use strict";var M=e(92473);$.exports=function I(t){return t?M(t):[0,0,0,1]}},69585:($,K,e)=>{"use strict";var M=e(44727),I=e(27630),t=e(5228),T=null;$.exports=function n(){if(null!==T)return T;T=!1;var i=t.isIE()||t.isSafari()||t.isIOS();if(window.navigator.userAgent&&!i){var u=Array.from(M.CSS_DECLARATIONS).reverse(),a=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof a)T=u.some(function(p){return a.apply(null,p)});else{var r=I.tester.append("image").attr("style",M.STYLE),v=window.getComputedStyle(r.node()).imageRendering;T=u.some(function(p){var f=p[1];return v===f||v===f.toLowerCase()}),r.remove()}}return T}},88565:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=I.strTranslate,T=e(70415),n=e(94598).LINE_SPACING,i=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;K.convertToTspans=function(O,U,H){var j=O.text(),ee=!O.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&j.match(i),W=M.select(O.node().parentNode);if(!W.empty()){var B=O.attr("class")?O.attr("class").split(" ")[0]:"text";return B+="-math",W.selectAll("svg."+B).remove(),W.selectAll("g."+B+"-group").remove(),O.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),ee?(U&&U._promises||[]).push(new Promise(function(q){O.style("display","none");var oe=parseInt(O.node().style.fontSize,10),ie={fontSize:oe};!function v(O,U,H){var j=parseInt((MathJax.version||"").split(".")[0]);if(2!==j&&3!==j)return void I.warn("No MathJax version:",MathJax.version);var ee,W,B,te,q=function(){return W=I.extendDeepAll({},MathJax.Hub.config),B=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},oe=function(){W=I.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o},ie=function(){if("SVG"!==(ee=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},V=function(){"svg"!==(ee=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg")},Y=function(){var ne="math-output-"+I.randstr({},64);te=M.select("body").append("div").attr({id:ne}).style({visibility:"hidden",position:"absolute","font-size":U.fontSize+"px"}).text(function r(O){return O.replace(u,"\\lt ").replace(a,"\\gt ")}(O));var se=te.node();return 2===j?MathJax.Hub.Typeset(se):MathJax.typeset([se])},ae=function(){var ne=te.select(2===j?".MathJax_SVG":".MathJax"),se=!ne.empty()&&te.select("svg").node();if(se){var be,de=se.getBoundingClientRect();be=2===j?M.select("body").select("#MathJax_SVG_glyphs"):ne.select("defs"),H(ne,be,de)}else I.log("There was an error in the tex syntax.",O),H();te.remove()},X=function(){if("SVG"!==ee)return MathJax.Hub.setRenderer(ee)},J=function(){"svg"!==ee&&(MathJax.config.startup.output=ee)},ue=function(){return void 0!==B&&(MathJax.Hub.processSectionDelay=B),MathJax.Hub.Config(W)},re=function(){MathJax.config=W};2===j?MathJax.Hub.Queue(q,ie,Y,ae,X,ue):3===j&&(oe(),V(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Y(),ae(),J(),re()}))}(ee[2],ie,function(V,Y,ae){W.selectAll("svg."+B).remove(),W.selectAll("g."+B+"-group").remove();var X=V&&V.select("svg");if(!X||!X.node())return te(),void q();var J=W.append("g").classed(B+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});J.node().appendChild(X.node()),Y&&Y.node()&&X.node().insertBefore(Y.node().cloneNode(!0),X.node().firstChild);var ue=ae.width,re=ae.height;X.attr({class:B,height:re,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ne=O.node().style.fill||"black",se=X.select("g");se.attr({fill:ne,stroke:ne});var de=se.node().getBoundingClientRect(),be=de.width,De=de.height;(be>ue||De>re)&&(X.style("overflow","hidden"),be=(de=X.node().getBoundingClientRect()).width,De=de.height);var _e=+O.attr("x"),Ce=+O.attr("y"),Fe=-(oe||O.node().getBoundingClientRect().height)/4;if("y"===B[0])J.attr({transform:"rotate("+[-90,_e,Ce]+")"+t(-be/2,Fe-De/2)});else if("l"===B[0])Ce=Fe-De/2;else if("a"===B[0]&&0!==B.indexOf("atitle"))_e=0,Ce=Fe;else{var ke=O.attr("text-anchor");_e-=be*("middle"===ke?.5:"end"===ke?1:0),Ce=Ce+Fe-De/2}X.attr({x:_e,y:Ce}),H&&H.call(O,J),q(J)})})):te(),O}function te(){W.empty()||(B=O.attr("class")+"-math",W.select("svg."+B).remove()),O.text("").style("white-space","pre");var q=function _(O,U){U=U.replace(x," ");var ee,H=!1,j=[],W=-1;function B(){W++;var De=document.createElementNS(T.svg,"tspan");M.select(De).attr({class:"line",dy:W*n+"em"}),O.appendChild(De),ee=De;var _e=j;if(j=[{node:De}],_e.length>1)for(var Ce=1;Ce<_e.length;Ce++)te(_e[Ce])}function te(De){var Le,_e=De.type,Ce={};if("a"===_e){Le="a";var Fe=De.target,ke=De.href,ze=De.popup;ke&&(Ce={"xlink:xlink:show":"_blank"===Fe||"_"!==Fe.charAt(0)?"new":"replace",target:Fe,"xlink:xlink:href":ke},ze&&(Ce.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ze+'");return false;'))}else Le="tspan";De.style&&(Ce.style=De.style);var Pe=document.createElementNS(T.svg,Le);if("sup"===_e||"sub"===_e){q(ee,y),ee.appendChild(Pe);var Ie=document.createElementNS(T.svg,"tspan");q(Ie,y),M.select(Ie).attr("dy",l[_e]),Ce.dy=f[_e],ee.appendChild(Pe),ee.appendChild(Ie)}else ee.appendChild(Pe);M.select(Pe).attr(Ce),ee=De.node=Pe,j.push(De)}function q(De,_e){De.appendChild(document.createTextNode(_e))}function oe(De){if(1!==j.length){var _e=j.pop();De!==_e.type&&I.log("Start tag <"+_e.type+"> doesnt match end tag <"+De+">. Pretending it did match.",U),ee=j[j.length-1].node}else I.log("Ignoring unexpected end tag </"+De+">.",U)}var ie=m.test(U);ie?B():(ee=O,j=[{node:O}]);for(var V=U.split(h),Y=0;Y<V.length;Y++){var ae=V[Y],X=ae.match(g),J=X&&X[2].toLowerCase(),ue=p[J];if("br"===J)B();else if(void 0===ue)q(ee,R(ae));else if(X[1])oe(J);else{var re=X[4],ne={type:J},se=S(re,d);if(se?(se=se.replace(w,"$1 fill:"),ue&&(se+=";"+ue)):ue&&(se=ue),se&&(ne.style=se),"a"===J){H=!0;var de=S(re,A);if(de){var be=z(de);be&&(ne.href=be,ne.target=S(re,b)||"_blank",ne.popup=S(re,c))}}te(ne)}}return H}(O.node(),j);q&&O.style("pointer-events","all"),K.positionText(O),H&&H.call(O)}};var u=/(<|&lt;|&#60;)/g,a=/(>|&gt;|&#62;)/g;var o=[["$","$"],["\\(","\\)"]];var p={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},f={sub:"0.3em",sup:"-0.6em"},l={sub:"-0.21em",sup:"0.42em"},y="\u200b",s=["http:","https:","mailto:","",void 0,":"],x=K.NEWLINES=/(\r\n?|\n)/g,h=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;K.BR_TAG_ALL=/<br(\s+.*)?>/gi;var d=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,A=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,b=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,c=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(O,U){if(!O)return null;var H=O.match(U),j=H&&(H[3]||H[4]);return j&&R(j)}var w=/(^|;)\s*color:/;K.plainText=function(O,U){for(var H=void 0!==(U=U||{}).len&&-1!==U.len?U.len:1/0,j=void 0!==U.allowedTags?U.allowedTags:["br"],W="...".length,B=O.split(h),te=[],q="",oe=0,ie=0;ie<B.length;ie++){var V=B[ie],Y=V.match(g),ae=Y&&Y[2].toLowerCase();if(ae)-1!==j.indexOf(ae)&&(te.push(V),q=ae);else{var X=V.length;if(oe+X<H)te.push(V),oe+=X;else if(oe<H){var J=H-oe;q&&("br"!==q||J<=W||X<=W)&&te.pop(),H>W?te.push(V.substr(0,J-W)+"..."):te.push(V.substr(0,J));break}q=""}}return te.join("")};var E={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},P=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function R(O){return O.replace(P,function(U,H){var j;return j="#"===H.charAt(0)?function F(O){if(!(O>1114111)){var U=String.fromCodePoint;if(U)return U(O);var H=String.fromCharCode;return O<=65535?H(O):H(55232+(O>>10),O%1024+56320)}}("x"===H.charAt(1)?parseInt(H.substr(2),16):parseInt(H.substr(1),10)):E[H],j||U})}function z(O){var U=encodeURI(decodeURI(O)),H=document.createElement("a"),j=document.createElement("a");H.href=O,j.href=U;var ee=H.protocol,W=j.protocol;return-1!==s.indexOf(ee)&&-1!==s.indexOf(W)?U:""}function D(O,U,H){var te,q,oe,j=H.horizontalAlign,ee=H.verticalAlign||"top",W=O.node().getBoundingClientRect(),B=U.node().getBoundingClientRect();return q="bottom"===ee?function(){return W.bottom-te.height}:"middle"===ee?function(){return W.top+(W.height-te.height)/2}:function(){return W.top},oe="right"===j?function(){return W.right-te.width}:"center"===j?function(){return W.left+(W.width-te.width)/2}:function(){return W.left},function(){te=this.node().getBoundingClientRect();var ie=oe()-B.left,V=q()-B.top,Y=H.gd||{};if(H.gd){Y._fullLayout._calcInverseTransform(Y);var ae=I.apply3DTransform(Y._fullLayout._invTransform)(ie,V);ie=ae[0],V=ae[1]}return this.style({top:V+"px",left:ie+"px","z-index":1e3}),this}}K.convertEntities=R,K.sanitizeHTML=function(U){U=U.replace(x," ");for(var H=document.createElement("p"),j=H,ee=[],W=U.split(h),B=0;B<W.length;B++){var te=W[B],q=te.match(g),oe=q&&q[2].toLowerCase();if(oe in p)if(q[1])ee.length&&(j=ee.pop());else{var ie=q[4],V=S(ie,d),Y=V?{style:V}:{};if("a"===oe){var ae=S(ie,A);if(ae){var X=z(ae);if(X){Y.href=X;var J=S(ie,b);J&&(Y.target=J)}}}var ue=document.createElement(oe);j.appendChild(ue),M.select(ue).attr(Y),j=ue,ee.push(ue)}else j.appendChild(document.createTextNode(R(te)))}return H.innerHTML},K.lineCount=function(U){return U.selectAll("tspan.line").size()||1},K.positionText=function(U,H,j){return U.each(function(){var ee=M.select(this);function W(q,oe){return void 0===oe?null===(oe=ee.attr(q))&&(ee.attr(q,0),oe=0):ee.attr(q,oe),oe}var B=W("x",H),te=W("y",j);"text"===this.nodeName&&ee.selectAll("tspan.line").attr({x:B,y:te})})};var k="1px ";K.makeTextShadow=function(O){return k+k+k+O+", -"+k+"-"+k+k+O+", "+k+"-"+k+k+O+", -"+k+k+k+O},K.makeEditable=function(O,U){var H=U.gd,j=U.delegate,ee=M.dispatch("edit","input","cancel"),W=j||O;if(O.style({"pointer-events":j?"none":"all"}),1!==O.size())throw new Error("boo");function B(){(function q(){var oe=M.select(H),ie=oe.select(".svg-container"),V=ie.append("div"),Y=O.node().style,ae=parseFloat(Y.fontSize||12),X=U.text;void 0===X&&(X=O.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Y.fontFamily||"Arial","font-size":ae,color:U.fill||Y.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ae/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(X).call(D(O,ie,U)).on("blur",function(){H._editing=!1,O.text(this.textContent).style({opacity:1});var ue,J=M.select(this).attr("class");(ue=J?"."+J.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(O.node().parentNode).select(ue).style({opacity:0});var re=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),ee.edit.call(O,re)}).on("focus",function(){var J=this;H._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===J)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){27===M.event.which?(H._editing=!1,O.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),ee.cancel.call(O,this.textContent)):(ee.input.call(O,this.textContent),M.select(this).call(D(O,ie,U)))}).on("keydown",function(){13===M.event.which&&this.blur()}).call(te)})(),O.style({opacity:0});var ie,oe=W.attr("class");(ie=oe?"."+oe.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(O.node().parentNode).select(ie).style({opacity:0})}function te(oe){var ie=oe.node(),V=document.createRange();V.selectNodeContents(ie);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(V),ie.focus()}return U.immediate?B():W.on("click",B),M.rebind(O,ee,"on")}},30617:($,K)=>{"use strict";var e={};function M(I){I&&null!==I.timer&&(clearTimeout(I.timer),I.timer=null)}K.throttle=function(t,T,n){var i=e[t],u=Date.now();if(!i){for(var a in e)e[a].ts<u-6e4&&delete e[a];i=e[t]={ts:0,timer:null}}function r(){n(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}M(i),u>i.ts+T?r():i.timer=setTimeout(function(){r(),i.timer=null},T)},K.done=function(I){var t=e[I];return t&&t.timer?new Promise(function(T){var n=t.onDone;t.onDone=function(){n&&n(),T(),t.onDone=null}}):Promise.resolve()},K.clear=function(I){if(I)M(e[I]),delete e[I];else for(var t in e)K.clear(t)}},11899:($,K,e)=>{"use strict";var M=e(7347);$.exports=function(t,T){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(T[0],T[1]))/Math.LN10;return M(n)||(n=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),n}},55024:($,K,e)=>{"use strict";var M=$.exports={},I=e(15462).locationmodeToLayer,t=e(18191).zL;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,n){return T+n+".json"},M.getTopojsonFeatures=function(T,n){var i=I[T.locationmode],u=n.objects[i];return t(n,u).features}},33098:$=>{"use strict";$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},44303:$=>{"use strict";$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},66438:($,K,e)=>{"use strict";var M=e(97799);$.exports=function(t){for(var u,a,T=M.layoutArrayContainers,n=M.layoutArrayRegexes,i=t.split("[")[0],r=0;r<n.length;r++)if((a=t.match(n[r]))&&0===a.index){u=a[0];break}if(u||(u=T[T.indexOf(i)]),!u)return!1;var o=t.substr(u.length);return o?!!(a=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:u,index:Number(a[1]),property:a[3]||""}:{array:u,index:"",property:""}}},71859:($,K,e)=>{"use strict";var M=e(18836).extendFlat,I=e(51366),t={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},n=t.flags.slice().concat(["fullReplot"]),i=T.flags.slice().concat("layoutReplot");function u(o){for(var v={},p=0;p<o.length;p++)v[o[p]]=!1;return v}function a(o,v,p){var f=M({},o);for(var l in f){var y=f[l];I(y)&&(f[l]=r(y,v,p,l))}return"from-root"===p&&(f.editType=v),f}function r(o,v,p,f){if(o.valType){var l=M({},o);if(l.editType=v,Array.isArray(o.items)){l.items=new Array(o.items.length);for(var y=0;y<o.items.length;y++)l.items[y]=r(o.items[y],v,"from-root")}return l}return a(o,v,"_"===f.charAt(0)?"nested":"from-root")}$.exports={traces:t,layout:T,traceFlags:function(){return u(n)},layoutFlags:function(){return u(i)},update:function(o,v){var p=v.editType;if(p&&"none"!==p)for(var f=p.split("+"),l=0;l<f.length;l++)o[f[l]]=!0},overrideAll:a}},24985:($,K,e)=>{"use strict";var M=e(7347),I=e(84088),t=e(97799),T=e(5228),n=e(31556),i=e(78168),u=e(8416),a=i.cleanId,r=i.getFromTrace,o=t.traceIs;function v(m,d){var A=m[d],b=d.charAt(0);A&&"paper"!==A&&(m[d]=a(A,b,!0))}function p(m){function d(A,b){var c=m[A],S=m.title&&m.title[b];c&&!S&&(m.title||(m.title={}),m.title[b]=m[A],delete m[A])}m&&(("string"==typeof m.title||"number"==typeof m.title)&&(m.title={text:m.title}),d("titlefont","font"),d("titleposition","position"),d("titleside","side"),d("titleoffset","offset"))}function f(m){if(!T.isPlainObject(m))return!1;var d=m.name;return delete m.name,delete m.showlegend,("string"==typeof d||"number"==typeof d)&&String(d)}function l(m,d,A,b){if(A&&!b)return m;if(b&&!A||!m.trim())return d;if(!d.trim())return m;var S,c=Math.min(m.length,d.length);for(S=0;S<c&&m.charAt(S)===d.charAt(S);S++);return m.substr(0,S).trim()}function y(m){var d="middle",A="center";return"string"==typeof m&&(-1!==m.indexOf("top")?d="top":-1!==m.indexOf("bottom")&&(d="bottom"),-1!==m.indexOf("left")?A="left":-1!==m.indexOf("right")&&(A="right")),d+" "+A}function s(m,d){return d in m&&"object"==typeof m[d]&&0===Object.keys(m[d]).length}K.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&T.log("Clearing previous rejected promises from queue."),m._promises=[]},K.cleanLayout=function(m){var d,A;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var b=(n.subplotsRegistry.cartesian||{}).attrRegex,c=(n.subplotsRegistry.polar||{}).attrRegex,S=(n.subplotsRegistry.ternary||{}).attrRegex,w=(n.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(m);for(d=0;d<E.length;d++){var P=E[d];if(b&&b.test(P)){var R=m[P];R.anchor&&"free"!==R.anchor&&(R.anchor=a(R.anchor)),R.overlaying&&(R.overlaying=a(R.overlaying)),R.type||(R.isdate?R.type="date":R.islog?R.type="log":!1===R.isdate&&!1===R.islog&&(R.type="linear")),("withzero"===R.autorange||"tozero"===R.autorange)&&(R.autorange=!0,R.rangemode="tozero"),R.insiderange&&delete R.range,delete R.islog,delete R.isdate,delete R.categories,s(R,"domain")&&delete R.domain,void 0!==R.autotick&&(void 0===R.tickmode&&(R.tickmode=R.autotick?"auto":"linear"),delete R.autotick),p(R)}else if(c&&c.test(P)){p(m[P].radialaxis)}else if(S&&S.test(P)){var _=m[P];p(_.aaxis),p(_.baxis),p(_.caxis)}else if(w&&w.test(P)){var z=m[P],D=z.cameraposition;if(Array.isArray(D)&&4===D[0].length){var k=D[0],O=D[1],U=D[2],H=I([],k),j=[];for(A=0;A<3;++A)j[A]=O[A]+U*H[2+4*A];z.camera={eye:{x:j[0],y:j[1],z:j[2]},center:{x:O[0],y:O[1],z:O[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}p(z.xaxis),p(z.yaxis),p(z.zaxis)}}var ee=Array.isArray(m.annotations)?m.annotations.length:0;for(d=0;d<ee;d++){var W=m.annotations[d];T.isPlainObject(W)&&(W.ref&&("paper"===W.ref?(W.xref="paper",W.yref="paper"):"data"===W.ref&&(W.xref="x",W.yref="y"),delete W.ref),v(W,"xref"),v(W,"yref"))}var B=Array.isArray(m.shapes)?m.shapes.length:0;for(d=0;d<B;d++){var te=m.shapes[d];T.isPlainObject(te)&&(v(te,"xref"),v(te,"yref"))}var q=Array.isArray(m.images)?m.images.length:0;for(d=0;d<q;d++){var oe=m.images[d];T.isPlainObject(oe)&&(v(oe,"xref"),v(oe,"yref"))}var ie=m.legend;return ie&&(ie.x>3?(ie.x=1.02,ie.xanchor="left"):ie.x<-2&&(ie.x=-.02,ie.xanchor="right"),ie.y>3?(ie.y=1.02,ie.yanchor="bottom"):ie.y<-2&&(ie.y=-.02,ie.yanchor="top")),p(m),"rotate"===m.dragmode&&(m.dragmode="orbit"),u.clean(m),m.template&&m.template.layout&&K.cleanLayout(m.template.layout),m},K.cleanData=function(m){for(var d=0;d<m.length;d++){var b,A=m[d];if("histogramy"===A.type&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins),A.error_y&&"opacity"in A.error_y){var c=u.defaults,S=A.error_y.color||(o(A,"bar")?u.defaultLine:c[d%c.length]);A.error_y.color=u.addOpacity(u.rgb(S),u.opacity(S)*A.error_y.opacity),delete A.error_y.opacity}if("bardir"in A&&("h"===A.bardir&&(o(A,"bar")||"histogram"===A.type.substr(0,9))&&(A.orientation="h",K.swapXYData(A)),delete A.bardir),"histogramy"===A.type&&K.swapXYData(A),("histogramx"===A.type||"histogramy"===A.type)&&(A.type="histogram"),"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl),"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,delete A.reversescl),A.xaxis&&(A.xaxis=a(A.xaxis,"x")),A.yaxis&&(A.yaxis=a(A.yaxis,"y")),o(A,"gl3d")&&A.scene&&(A.scene=n.subplotsRegistry.gl3d.cleanId(A.scene)),!o(A,"pie-like")&&!o(A,"bar-like"))if(Array.isArray(A.textposition))for(b=0;b<A.textposition.length;b++)A.textposition[b]=y(A.textposition[b]);else A.textposition&&(A.textposition=y(A.textposition));var w=t.getModule(A);if(w&&w.colorbar){var E=w.colorbar.container,P=E?A[E]:A;P&&P.colorscale&&("YIGnBu"===P.colorscale&&(P.colorscale="YlGnBu"),"YIOrRd"===P.colorscale&&(P.colorscale="YlOrRd"))}if("surface"===A.type&&T.isPlainObject(A.contours)){var R=["x","y","z"];for(b=0;b<R.length;b++){var F=A.contours[R[b]];T.isPlainObject(F)&&(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if("candlestick"===A.type||"ohlc"===A.type){var _=!1!==(A.increasing||{}).showlegend,z=!1!==(A.decreasing||{}).showlegend,D=f(A.increasing),k=f(A.decreasing);if(!1!==D&&!1!==k){var O=l(D,k,_,z);O&&(A.name=O)}else(D||k)&&!A.name&&(A.name=D||k)}if(Array.isArray(A.transforms)){var U=A.transforms;for(b=0;b<U.length;b++){var H=U[b];if(T.isPlainObject(H))switch(H.type){case"filter":H.filtersrc&&(H.target=H.filtersrc,delete H.filtersrc),H.calendar&&(H.valuecalendar||(H.valuecalendar=H.calendar),delete H.calendar);break;case"groupby":if(H.styles=H.styles||H.style,H.styles&&!Array.isArray(H.styles)){var j=H.styles,ee=Object.keys(j);H.styles=[];for(var W=0;W<ee.length;W++)H.styles.push({target:ee[W],value:j[ee[W]]})}}}}s(A,"line")&&delete A.line,"marker"in A&&(s(A.marker,"line")&&delete A.marker.line,s(A,"marker")&&delete A.marker),u.clean(A),A.autobinx&&(delete A.autobinx,delete A.xbins),A.autobiny&&(delete A.autobiny,delete A.ybins),p(A),A.colorbar&&p(A.colorbar),A.marker&&A.marker.colorbar&&p(A.marker.colorbar),A.line&&A.line.colorbar&&p(A.line.colorbar),A.aaxis&&p(A.aaxis),A.baxis&&p(A.baxis)}},K.swapXYData=function(m){var d;if(T.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var A=m.error_y,b="copy_ystyle"in A?A.copy_ystyle:!(A.color||A.thickness||A.width);T.swapAttrs(m,["error_?.copy_ystyle"]),b&&T.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof m.hoverinfo){var c=m.hoverinfo.split("+");for(d=0;d<c.length;d++)"x"===c[d]?c[d]="y":"y"===c[d]&&(c[d]="x");m.hoverinfo=c.join("+")}},K.coerceTraceIndices=function(m,d){if(M(d))return[d];if(!Array.isArray(d)||!d.length)return m.data.map(function(c,S){return S});if(Array.isArray(d)){for(var A=[],b=0;b<d.length;b++)T.isIndex(d[b],m.data.length)?A.push(d[b]):T.warn("trace index (",d[b],") is not a number or is out of bounds");return A}return d},K.manageArrayContainers=function(m,d,A){var b=m.obj,c=m.parts,S=c.length,w=c[S-1],E=M(w);if(E&&null===d){var P=c.slice(0,S-1).join(".");T.nestedProperty(b,P).get().splice(w,1)}else E&&void 0===m.get()&&void 0===m.get()&&(A[m.astr]=null),m.set(d)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function h(m){var d=m.search(x);if(d>0)return m.substr(0,d)}K.hasParent=function(m,d){for(var A=h(d);A;){if(A in m)return!0;A=h(A)}return!1};var g=["x","y","z"];K.clearAxisTypes=function(m,d,A){for(var b=0;b<d.length;b++)for(var c=m._fullData[b],S=0;S<3;S++){var w=r(m,c,g[S]);if(w&&"log"!==w.type){var E=w._name,P=w._id.substr(1);if("scene"===P.substr(0,5)){if(void 0!==A[P])continue;E=P+"."+E}var R=E+".type";void 0===A[E]&&void 0===A[R]&&T.nestedProperty(m.layout,R).set(null)}}}},10493:($,K,e)=>{"use strict";var M=e(98171);K._doPlot=M._doPlot,K.newPlot=M.newPlot,K.restyle=M.restyle,K.relayout=M.relayout,K.redraw=M.redraw,K.update=M.update,K._guiRestyle=M._guiRestyle,K._guiRelayout=M._guiRelayout,K._guiUpdate=M._guiUpdate,K._storeDirectGUIEdit=M._storeDirectGUIEdit,K.react=M.react,K.extendTraces=M.extendTraces,K.prependTraces=M.prependTraces,K.addTraces=M.addTraces,K.deleteTraces=M.deleteTraces,K.moveTraces=M.moveTraces,K.purge=M.purge,K.addFrames=M.addFrames,K.deleteFrames=M.deleteFrames,K.animate=M.animate,K.setPlotConfig=M.setPlotConfig;var I=e(21733).getGraphDiv,t=e(86249).eraseActiveShape;K.deleteActiveShape=function(n){return t(I(n))},K.toImage=e(90212),K.validate=e(32355),K.downloadImage=e(92183);var T=e(43422);K.makeTemplate=T.makeTemplate,K.validateTemplate=T.validateTemplate},50896:($,K,e)=>{"use strict";var M=e(51366),I=e(10127),t=e(7231),T=e(98198).sorterAsc,n=e(97799);K.containerArrayMatch=e(66438);var i=K.isAddVal=function(r){return"add"===r||M(r)},u=K.isRemoveVal=function(r){return null===r||"remove"===r};K.applyContainerArrayChanges=function(r,o,v,p,f){var l=o.astr,y=n.getComponentMethod(l,"supplyLayoutDefaults"),s=n.getComponentMethod(l,"draw"),x=n.getComponentMethod(l,"drawOne"),h=p.replot||p.recalc||y===I||s===I,g=r.layout,m=r._fullLayout;if(v[""]){Object.keys(v).length>1&&t.warn("Full array edits are incompatible with other edits",l);var d=v[""][""];if(u(d))o.set(null);else{if(!Array.isArray(d))return t.warn("Unrecognized full array edit value",l,d),!0;o.set(d)}return!h&&(y(g,m),s(r),!0)}var R,F,_,z,D,k,O,U,A=Object.keys(v).map(Number).sort(T),b=o.get(),c=b||[],S=f(m,l).get(),w=[],E=-1,P=c.length;for(R=0;R<A.length;R++)if(z=v[_=A[R]],D=Object.keys(z),k=z[""],O=i(k),_<0||_>c.length-(O?0:1))t.warn("index out of range",l,_);else if(void 0!==k)D.length>1&&t.warn("Insertion & removal are incompatible with edits to the same index.",l,_),u(k)?w.push(_):O?("add"===k&&(k={}),c.splice(_,0,k),S&&S.splice(_,0,{})):t.warn("Unrecognized full object edit value",l,_,k),-1===E&&(E=_);else for(F=0;F<D.length;F++)U=l+"["+_+"].",f(c[_],D[F],U).set(z[D[F]]);for(R=w.length-1;R>=0;R--)c.splice(w[R],1),S&&S.splice(w[R],1);if(c.length?b||o.set(c):o.set(null),h)return!1;if(y(g,m),x!==I){var H;if(-1===E)H=A;else{for(P=Math.max(c.length,P),H=[],R=0;R<A.length&&!((_=A[R])>=E);R++)H.push(_);for(R=E;R<P;R++)H.push(R)}for(R=0;R<H.length;R++)x(r,H[R])}else s(r);return!0}},98171:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(60075),T=e(5228),n=T.nestedProperty,i=e(70074),u=e(32641),a=e(97799),r=e(55773),o=e(31556),v=e(91464),p=e(31520),f=e(38330),l=e(27630),y=e(8416),s=e(54443).initInteractions,x=e(70415),h=e(48356).clearOutline,g=e(16574).dfltConfig,m=e(50896),d=e(24985),A=e(88845),b=e(71859),c=e(4669).AX_NAME_PATTERN,S=0;function P(we){var He=we._fullLayout;He._redrawFromAutoMarginCount?He._redrawFromAutoMarginCount--:we.emit("plotly_afterplot")}function F(we,He){try{we._fullLayout._paper.style("background",He)}catch(Xe){T.error(Xe)}}function _(we,He){F(we,y.combine(He,"white"))}function z(we,He){if(!we._context){we._context=T.extendDeep({},g);var Xe=M.select("base");we._context._baseUrl=Xe.size()&&Xe.attr("href")?window.location.href.split("#")[0]:""}var Ze,qe,Dt,ut=we._context;if(He){for(qe=Object.keys(He),Ze=0;Ze<qe.length;Ze++)"editable"!==(Dt=qe[Ze])&&"edits"!==Dt&&Dt in ut&&("setBackground"===Dt&&"opaque"===He[Dt]?ut[Dt]=_:ut[Dt]=He[Dt]);He.plot3dPixelRatio&&!ut.plotGlPixelRatio&&(ut.plotGlPixelRatio=ut.plot3dPixelRatio);var Ft=He.editable;if(void 0!==Ft)for(ut.editable=Ft,qe=Object.keys(ut.edits),Ze=0;Ze<qe.length;Ze++)ut.edits[qe[Ze]]=Ft;if(He.edits)for(qe=Object.keys(He.edits),Ze=0;Ze<qe.length;Ze++)(Dt=qe[Ze])in ut.edits&&(ut.edits[Dt]=He.edits[Dt]);ut._exportedPlot=He._exportedPlot}ut.staticPlot&&(ut.editable=!1,ut.edits={},ut.autosizable=!1,ut.scrollZoom=!1,ut.doubleClick=!1,ut.showTips=!1,ut.showLink=!1,ut.displayModeBar=!1),"hover"===ut.displayModeBar&&!t&&(ut.displayModeBar=!0),("transparent"===ut.setBackground||"function"!=typeof ut.setBackground)&&(ut.setBackground=F),ut._hasZeroHeight=ut._hasZeroHeight||0===we.clientHeight,ut._hasZeroWidth=ut._hasZeroWidth||0===we.clientWidth;var bt=ut.scrollZoom,Pt=ut._scrollZoom={};if(!0===bt)Pt.cartesian=1,Pt.gl3d=1,Pt.geo=1,Pt.mapbox=1;else if("string"==typeof bt){var cr=bt.split("+");for(Ze=0;Ze<cr.length;Ze++)Pt[cr[Ze]]=1}else!1!==bt&&(Pt.gl3d=1,Pt.geo=1,Pt.mapbox=1)}function O(we,He){var Ze,qe,Xe=He+1,ut=[];for(Ze=0;Ze<we.length;Ze++)(qe=we[Ze])<0?ut.push(Xe+qe):ut.push(qe);return ut}function U(we,He,Xe){var ut,Ze;for(ut=0;ut<He.length;ut++){if((Ze=He[ut])!==parseInt(Ze,10))throw new Error("all values in "+Xe+" must be integers");if(Ze>=we.data.length||Ze<-we.data.length)throw new Error(Xe+" must be valid indices for gd.data.");if(He.indexOf(Ze,ut+1)>-1||Ze>=0&&He.indexOf(-we.data.length+Ze)>-1||Ze<0&&He.indexOf(we.data.length+Ze)>-1)throw new Error("each index in "+Xe+" must be unique.")}}function H(we,He,Xe){if(!Array.isArray(we.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(He)||(He=[He]),U(we,He,"currentIndices"),typeof Xe<"u"&&!Array.isArray(Xe)&&(Xe=[Xe]),typeof Xe<"u"&&U(we,Xe,"newIndices"),typeof Xe<"u"&&He.length!==Xe.length)throw new Error("current and new indices must be of equal length.")}function B(we,He,Xe,ut,Ze){!function ee(we,He,Xe,ut){var Ze=T.isPlainObject(ut);if(!Array.isArray(we.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(He))throw new Error("update must be a key:value object");if(typeof Xe>"u")throw new Error("indices must be an integer or array of integers");for(var qe in U(we,Xe,"indices"),He){if(!Array.isArray(He[qe])||He[qe].length!==Xe.length)throw new Error("attribute "+qe+" must be an array of length equal to indices array length");if(Ze&&(!(qe in ut)||!Array.isArray(ut[qe])||ut[qe].length!==He[qe].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(we,He,Xe,ut);for(var qe=function W(we,He,Xe,ut){var Dt,Ft,bt,Pt,cr,Ze=T.isPlainObject(ut),qe=[];for(var Sr in Array.isArray(Xe)||(Xe=[Xe]),Xe=O(Xe,we.data.length-1),He)for(var Kr=0;Kr<Xe.length;Kr++){if(Dt=we.data[Xe[Kr]],Ft=(bt=n(Dt,Sr)).get(),Pt=He[Sr][Kr],!T.isArrayOrTypedArray(Pt))throw new Error("attribute: "+Sr+" index: "+Kr+" must be an array");if(!T.isArrayOrTypedArray(Ft))throw new Error("cannot extend missing or non-array attribute: "+Sr);if(Ft.constructor!==Pt.constructor)throw new Error("cannot extend array with an array of a different type: "+Sr);cr=Ze?ut[Sr][Kr]:ut,I(cr)||(cr=-1),qe.push({prop:bt,target:Ft,insert:Pt,maxp:Math.floor(cr)})}return qe}(we,He,Xe,ut),Dt={},Ft={},bt=0;bt<qe.length;bt++){var Pt=qe[bt].prop,cr=qe[bt].maxp,Sr=Ze(qe[bt].target,qe[bt].insert,cr);Pt.set(Sr[0]),Array.isArray(Dt[Pt.astr])||(Dt[Pt.astr]=[]),Dt[Pt.astr].push(Sr[1]),Array.isArray(Ft[Pt.astr])||(Ft[Pt.astr]=[]),Ft[Pt.astr].push(qe[bt].target.length)}return{update:Dt,maxPoints:Ft}}function te(we,He){var Xe=new we.constructor(we.length+He.length);return Xe.set(we),Xe.set(He,we.length),Xe}function ae(we,He,Xe,ut){we=T.getGraphDiv(we),d.clearPromiseQueue(we);var Ze={};if("string"==typeof He)Ze[He]=Xe;else{if(!T.isPlainObject(He))return T.warn("Restyle fail.",He,Xe,ut),Promise.reject();Ze=T.extendFlat({},He),void 0===ut&&(ut=Xe)}Object.keys(Ze).length&&(we.changed=!0);var qe=d.coerceTraceIndices(we,ut),Dt=ne(we,Ze,qe),Ft=Dt.flags;Ft.calc&&(we.calcdata=void 0),Ft.clearAxisTypes&&d.clearAxisTypes(we,qe,{});var bt=[];Ft.fullReplot?bt.push(K._doPlot):(bt.push(o.previousPromises),o.supplyDefaults(we),Ft.markerSize&&(o.doCalcdata(we),De(bt)),Ft.style&&bt.push(A.doTraceStyle),Ft.colorbars&&bt.push(A.doColorBars),bt.push(P)),bt.push(o.rehover,o.redrag,o.reselect),u.add(we,ae,[we,Dt.undoit,Dt.traces],ae,[we,Dt.redoit,Dt.traces]);var Pt=T.syncOrAsync(bt,we);return(!Pt||!Pt.then)&&(Pt=Promise.resolve()),Pt.then(function(){return we.emit("plotly_restyle",Dt.eventData),we})}function X(we){return void 0===we?null:we}function J(we,He){return He?function(Xe,ut,Ze){var qe=n(Xe,ut),Dt=qe.set;return qe.set=function(Ft){ue((Ze||"")+ut,qe.get(),Ft,we),Dt(Ft)},qe}:n}function ue(we,He,Xe,ut){if(Array.isArray(He)||Array.isArray(Xe))for(var Ze=Array.isArray(He)?He:[],qe=Array.isArray(Xe)?Xe:[],Dt=Math.max(Ze.length,qe.length),Ft=0;Ft<Dt;Ft++)ue(we+"["+Ft+"]",Ze[Ft],qe[Ft],ut);else if(T.isPlainObject(He)||T.isPlainObject(Xe)){var bt=T.isPlainObject(He)?He:{},Pt=T.isPlainObject(Xe)?Xe:{},cr=T.extendFlat({},bt,Pt);for(var Sr in cr)ue(we+"."+Sr,bt[Sr],Pt[Sr],ut)}else void 0===ut[we]&&(ut[we]=X(He))}function ne(we,He,Xe){var Pt,ut=we._fullLayout,Ze=we._fullData,qe=we.data,Dt=ut._guiEditing,Ft=J(ut._preGUI,Dt),bt=T.extendDeepAll({},He);se(He);var It,cr=b.traceFlags(),Sr={},Kr={};function $t(){return Xe.map(function(){})}function kr(Rn){var Yr=v.id2name(Rn);-1===It.indexOf(Yr)&&It.push(Yr)}function lr(Rn){return"LAYOUT"+Rn+".autorange"}function rt(Rn){return"LAYOUT"+Rn+".range"}function $e(Rn){for(var Yr=Rn;Yr<Ze.length;Yr++)if(Ze[Yr]._input===qe[Rn])return Ze[Yr]}function ht(Rn,Yr,vr){if(Array.isArray(Rn))Rn.forEach(function(Vr){ht(Vr,Yr,vr)});else if(!(Rn in He)&&!d.hasParent(He,Rn)){var nn;if("LAYOUT"===Rn.substr(0,6))nn=Ft(we.layout,Rn.replace("LAYOUT",""));else{var Or=Xe[vr];nn=J(ut._tracePreGUI[$e(Or)._fullInput.uid],Dt)(qe[Or],Rn)}Rn in Kr||(Kr[Rn]=$t()),void 0===Kr[Rn][vr]&&(Kr[Rn][vr]=X(nn.get())),void 0!==Yr&&nn.set(Yr)}}function gt(Rn){return function(Yr){return Ze[Yr][Rn]}}function ft(Rn){return function(Yr,vr){return!1===Yr?Ze[Xe[vr]][Rn]:null}}for(var Ct in He){if(d.hasParent(He,Ct))throw new Error("cannot set "+Ct+" and a parent attribute simultaneously");var tr,Cr,Hr,zr,Wr,Ke,sr=He[Ct];if(("autobinx"===Ct||"autobiny"===Ct)&&(Ct=Ct.charAt(Ct.length-1)+"bins",sr=Array.isArray(sr)?sr.map(ft(Ct)):!1===sr?Xe.map(gt(Ct)):null),Sr[Ct]=sr,"LAYOUT"!==Ct.substr(0,6)){for(Kr[Ct]=$t(),Pt=0;Pt<Xe.length;Pt++){if(tr=qe[Xe[Pt]],Cr=$e(Xe[Pt]),zr=(Hr=J(ut._tracePreGUI[Cr._fullInput.uid],Dt)(tr,Ct)).get(),void 0!==(Wr=Array.isArray(sr)?sr[Pt%sr.length]:sr)){var Jt=Hr.parts[Hr.parts.length-1],Gt=Ct.substr(0,Ct.length-Jt.length-1),hr=Gt?Gt+".":"",br=Gt?n(Cr,Gt).get():Cr;if((Ke=r.getTraceValObject(Cr,Hr.parts))&&Ke.impliedEdits&&null!==Wr)for(var Ut in Ke.impliedEdits)ht(T.relativeAttr(Ct,Ut),Ke.impliedEdits[Ut],Pt);else if("thicknessmode"!==Jt&&"lenmode"!==Jt||zr===Wr||"fraction"!==Wr&&"pixels"!==Wr||!br){if("type"===Ct&&("pie"===Wr!=("pie"===zr)||"funnelarea"===Wr!=("funnelarea"===zr))){var qt="x",on="y";("bar"===Wr||"bar"===zr)&&"h"===tr.orientation&&(qt="y",on="x"),T.swapAttrs(tr,["?","?src"],"labels",qt),T.swapAttrs(tr,["d?","?0"],"label",qt),T.swapAttrs(tr,["?","?src"],"values",on),"pie"===zr||"funnelarea"===zr?(n(tr,"marker.color").set(n(tr,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):a.traceIs(tr,"cartesian")&&n(tr,"marker.colors").set(n(tr,"marker.color").get())}}else{var Kt=ut._size,wt=br.orient,xr="top"===wt||"bottom"===wt;if("thicknessmode"===Jt){var Ir=xr?Kt.h:Kt.w;ht(hr+"thickness",br.thickness*("fraction"===Wr?1/Ir:Ir),Pt)}else{var Ur=xr?Kt.w:Kt.h;ht(hr+"len",br.len*("fraction"===Wr?1/Ur:Ur),Pt)}}Kr[Ct][Pt]=X(zr);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ct)){if("orientation"===Ct){Hr.set(Wr);var hn=tr.x&&!tr.y?"h":"v";if((Hr.get()||hn)===Cr.orientation)continue}else"orientationaxes"===Ct&&(tr.orientation={v:"h",h:"v"}[Cr.orientation]);d.swapXYData(tr),cr.calc=cr.clearAxisTypes=!0}else-1!==o.dataArrayContainers.indexOf(Hr.parts[0])?(d.manageArrayContainers(Hr,Wr,Kr),cr.calc=!0):(Ke?Ke.arrayOk&&!a.traceIs(Cr,"regl")&&(T.isArrayOrTypedArray(Wr)||T.isArrayOrTypedArray(zr))?cr.calc=!0:b.update(cr,Ke):cr.calc=!0,Hr.set(Wr))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Ct)&&v.swap(we,Xe),"orientationaxes"===Ct){var An=n(we.layout,"hovermode"),Sn=An.get();"x"===Sn?An.set("y"):"y"===Sn?An.set("x"):"x unified"===Sn?An.set("y unified"):"y unified"===Sn&&An.set("x unified")}if(-1!==["orientation","type"].indexOf(Ct)){for(It=[],Pt=0;Pt<Xe.length;Pt++){var sa=qe[Xe[Pt]];a.traceIs(sa,"cartesian")&&(kr(sa.xaxis||"x"),kr(sa.yaxis||"y"))}ht(It.map(lr),!0,0),ht(It.map(rt),[0,1],0)}}else Hr=Ft(we.layout,Ct.replace("LAYOUT","")),Kr[Ct]=[X(Hr.get())],Hr.set(Array.isArray(sr)?sr[0]:sr),cr.calc=!0}return(cr.calc||cr.plot)&&(cr.fullReplot=!0),{flags:cr,undoit:Kr,redoit:Sr,traces:Xe,eventData:T.extendDeepNoArrays([],[bt,Xe])}}function se(we){var Ze,qe,Dt,He=T.counterRegex("axis",".title",!1,!1),Xe=/colorbar\.title$/,ut=Object.keys(we);for(Ze=0;Ze<ut.length;Ze++)qe=ut[Ze],Dt=we[qe],"title"!==qe&&!He.test(qe)&&!Xe.test(qe)||"string"!=typeof Dt&&"number"!=typeof Dt?qe.indexOf("titlefont")>-1&&-1===qe.indexOf("grouptitlefont")?Ft(qe,qe.replace("titlefont","title.font")):qe.indexOf("titleposition")>-1?Ft(qe,qe.replace("titleposition","title.position")):qe.indexOf("titleside")>-1?Ft(qe,qe.replace("titleside","title.side")):qe.indexOf("titleoffset")>-1&&Ft(qe,qe.replace("titleoffset","title.offset")):Ft(qe,qe.replace("title","title.text"));function Ft(bt,Pt){we[Pt]=we[bt],delete we[bt]}}function de(we,He,Xe){we=T.getGraphDiv(we),d.clearPromiseQueue(we);var ut={};if("string"==typeof He)ut[He]=Xe;else{if(!T.isPlainObject(He))return T.warn("Relayout fail.",He,Xe),Promise.reject();ut=T.extendFlat({},He)}Object.keys(ut).length&&(we.changed=!0);var Ze=Fe(we,ut),qe=Ze.flags;qe.calc&&(we.calcdata=void 0);var Dt=[o.previousPromises];qe.layoutReplot?Dt.push(A.layoutReplot):Object.keys(ut).length&&(be(we,qe,Ze)||o.supplyDefaults(we),qe.legend&&Dt.push(A.doLegend),qe.layoutstyle&&Dt.push(A.layoutStyles),qe.axrange&&De(Dt,Ze.rangesAltered),qe.ticks&&Dt.push(A.doTicksRelayout),qe.modebar&&Dt.push(A.doModeBar),qe.camera&&Dt.push(A.doCamera),qe.colorbars&&Dt.push(A.doColorBars),Dt.push(P)),Dt.push(o.rehover,o.redrag,o.reselect),u.add(we,de,[we,Ze.undoit],de,[we,Ze.redoit]);var Ft=T.syncOrAsync(Dt,we);return(!Ft||!Ft.then)&&(Ft=Promise.resolve(we)),Ft.then(function(){return we.emit("plotly_relayout",Ze.eventData),we})}function be(we,He,Xe){var ut=we._fullLayout;if(!He.axrange)return!1;for(var Ze in He)if("axrange"!==Ze&&He[Ze])return!1;var qe,Dt,Ft=function(It,$t){return T.coerce(qe,Dt,f,It,$t)},bt={};for(var Pt in Xe.rangesAltered){var cr=v.id2name(Pt);if(qe=we.layout[cr],Dt=ut[cr],p(qe,Dt,Ft,bt),Dt._matchGroup)for(var Sr in Dt._matchGroup)if(Sr!==Pt){var Kr=ut[v.id2name(Sr)];Kr.autorange=Dt.autorange,Kr.range=Dt.range.slice(),Kr._input.range=Dt.range.slice()}}return!0}function De(we,He){var Xe=He?function(ut){var Ze=[];for(var Dt in He){var Ft=v.getFromId(ut,Dt);if(Ze.push(Dt),-1!==(Ft.ticklabelposition||"").indexOf("inside")&&Ft._anchorAxis&&Ze.push(Ft._anchorAxis._id),Ft._matchGroup)for(var bt in Ft._matchGroup)He[bt]||Ze.push(bt)}return v.draw(ut,Ze,{skipTitle:!0})}:function(ut){return v.draw(ut,"redraw")};we.push(h,A.doAutoRangeAndConstraints,Xe,A.drawData,A.finalDraw)}var _e=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ce=/^[xyz]axis[0-9]*\.autorange$/,Le=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Fe(we,He){var cr,Sr,Kr,Xe=we.layout,ut=we._fullLayout,Ze=ut._guiEditing,qe=J(ut._preGUI,Ze),Dt=Object.keys(He),Ft=v.list(we),bt=T.extendDeepAll({},He),Pt={};for(se(He),Dt=Object.keys(He),Sr=0;Sr<Dt.length;Sr++)if(0===Dt[Sr].indexOf("allaxes")){for(Kr=0;Kr<Ft.length;Kr++){var It=Ft[Kr]._id.substr(1),$t=-1!==It.indexOf("scene")?It+".":"",kr=Dt[Sr].replace("allaxes",$t+Ft[Kr]._name);He[kr]||(He[kr]=He[Dt[Sr]])}delete He[Dt[Sr]]}var lr=b.layoutFlags(),rt={},$e={};function ht(Xn,Vr){if(Array.isArray(Xn))Xn.forEach(function(Ca){ht(Ca,Vr)});else if(!(Xn in He)&&!d.hasParent(He,Xn)){var wn=qe(Xe,Xn);Xn in $e||($e[Xn]=X(wn.get())),void 0!==Vr&&wn.set(Vr)}}var ft,gt={};function Ct(Xn){var Vr=v.name2id(Xn.split(".")[0]);return gt[Vr]=1,Vr}for(var sr in He){if(d.hasParent(He,sr))throw new Error("cannot set "+sr+" and a parent attribute simultaneously");for(var tr=qe(Xe,sr),Cr=He[sr],zr=tr.parts.length-1;zr>0&&"string"!=typeof tr.parts[zr];)zr--;var Wr=tr.parts[zr],Ke=tr.parts[zr-1]+"."+Wr,We=tr.parts.slice(0,zr).join("."),Jt=n(we.layout,We).get(),Gt=n(ut,We).get(),hr=tr.get();if(void 0!==Cr){rt[sr]=Cr,$e[sr]="reverse"===Wr?Cr:X(hr);var br=r.getLayoutValObject(ut,tr.parts);if(br&&br.impliedEdits&&null!==Cr)for(var Ut in br.impliedEdits)ht(T.relativeAttr(sr,Ut),br.impliedEdits[Ut]);if(-1!==["width","height"].indexOf(sr))if(Cr){ht("autosize",null);var Kt="height"===sr?"width":"height";ht(Kt,ut[Kt])}else ut[sr]=we._initialAutoSize[sr];else if("autosize"===sr)ht("width",Cr?null:ut.width),ht("height",Cr?null:ut.height);else if(Ke.match(_e))Ct(Ke),n(ut,We+"._inputRange").set(null);else if(Ke.match(Ce)){Ct(Ke),n(ut,We+"._inputRange").set(null);var wt=n(ut,We).get();wt._inputDomain&&(wt._input.domain=wt._inputDomain.slice())}else Ke.match(Le)&&n(ut,We+"._inputDomain").set(null);if("type"===Wr){ft=Jt;var xr="linear"===Gt.type&&"log"===Cr,Ir="log"===Gt.type&&"linear"===Cr;if(xr||Ir){if(ft&&ft.range)if(Gt.autorange)xr&&(ft.range=ft.range[1]>ft.range[0]?[1,2]:[2,1]);else{var Ur=ft.range[0],qt=ft.range[1];xr?(Ur<=0&&qt<=0&&ht(We+".autorange",!0),Ur<=0?Ur=qt/1e6:qt<=0&&(qt=Ur/1e6),ht(We+".range[0]",Math.log(Ur)/Math.LN10),ht(We+".range[1]",Math.log(qt)/Math.LN10)):(ht(We+".range[0]",Math.pow(10,Ur)),ht(We+".range[1]",Math.pow(10,qt)))}else ht(We+".autorange",!0);Array.isArray(ut._subplots.polar)&&ut._subplots.polar.length&&ut[tr.parts[0]]&&"radialaxis"===tr.parts[1]&&delete ut[tr.parts[0]]._subplot.viewInitial["radialaxis.range"],a.getComponentMethod("annotations","convertCoords")(we,Gt,Cr,ht),a.getComponentMethod("images","convertCoords")(we,Gt,Cr,ht)}else ht(We+".autorange",!0),ht(We+".range",null);n(ut,We+"._inputRange").set(null)}else if(Wr.match(c)){var on=n(ut,sr).get(),an=(Cr||{}).type;(!an||"-"===an)&&(an="linear"),a.getComponentMethod("annotations","convertCoords")(we,on,an,ht),a.getComponentMethod("images","convertCoords")(we,on,an,ht)}var hn=m.containerArrayMatch(sr);if(hn){cr=hn.array,Sr=hn.index;var An=hn.property,Sn=br||{editType:"calc"};""!==Sr&&""===An&&(m.isAddVal(Cr)?$e[sr]=null:m.isRemoveVal(Cr)?$e[sr]=(n(Xe,cr).get()||[])[Sr]:T.warn("unrecognized full object value",He)),b.update(lr,Sn),Pt[cr]||(Pt[cr]={});var sa=Pt[cr][Sr];sa||(sa=Pt[cr][Sr]={}),sa[An]=Cr,delete He[sr]}else"reverse"===Wr?(Jt.range?Jt.range.reverse():(ht(We+".autorange",!0),Jt.range=[1,0]),Gt.autorange?lr.calc=!0:lr.plot=!0):("dragmode"===sr&&(!1===Cr&&!1!==hr||!1!==Cr&&!1===hr)||ut._has("scatter-like")&&ut._has("regl")&&"dragmode"===sr&&("lasso"===Cr||"select"===Cr)&&"lasso"!==hr&&"select"!==hr||ut._has("gl2d")?lr.plot=!0:br?b.update(lr,br):lr.calc=!0,tr.set(Cr))}}for(cr in Pt){m.applyContainerArrayChanges(we,qe(Xe,cr),Pt[cr],lr,qe)||(lr.plot=!0)}for(var Yr in gt){var vr=(ft=v.getFromId(we,Yr))&&ft._constraintGroup;if(vr)for(var nn in lr.calc=!0,vr)gt[nn]||(v.getFromId(we,nn)._constraintShrinkable=!0)}(ke(we)||He.height||He.width)&&(lr.plot=!0);var Or=ut.shapes;for(Sr=0;Sr<Or.length;Sr++)if(Or[Sr].showlegend){lr.calc=!0;break}return(lr.plot||lr.calc)&&(lr.layoutReplot=!0),{flags:lr,rangesAltered:gt,undoit:$e,redoit:rt,eventData:bt}}function ke(we){var He=we._fullLayout,Xe=He.width,ut=He.height;return we.layout.autosize&&o.plotAutoSize(we,we.layout,He),He.width!==Xe||He.height!==ut}function ze(we,He,Xe,ut){we=T.getGraphDiv(we),d.clearPromiseQueue(we),T.isPlainObject(He)||(He={}),T.isPlainObject(Xe)||(Xe={}),Object.keys(He).length&&(we.changed=!0),Object.keys(Xe).length&&(we.changed=!0);var Ze=d.coerceTraceIndices(we,ut),qe=ne(we,T.extendFlat({},He),Ze),Dt=qe.flags,Ft=Fe(we,T.extendFlat({},Xe)),bt=Ft.flags;(Dt.calc||bt.calc)&&(we.calcdata=void 0),Dt.clearAxisTypes&&d.clearAxisTypes(we,Ze,Xe);var Pt=[];bt.layoutReplot?Pt.push(A.layoutReplot):Dt.fullReplot?Pt.push(K._doPlot):(Pt.push(o.previousPromises),be(we,bt,Ft)||o.supplyDefaults(we),Dt.style&&Pt.push(A.doTraceStyle),(Dt.colorbars||bt.colorbars)&&Pt.push(A.doColorBars),bt.legend&&Pt.push(A.doLegend),bt.layoutstyle&&Pt.push(A.layoutStyles),bt.axrange&&De(Pt,Ft.rangesAltered),bt.ticks&&Pt.push(A.doTicksRelayout),bt.modebar&&Pt.push(A.doModeBar),bt.camera&&Pt.push(A.doCamera),Pt.push(P)),Pt.push(o.rehover,o.redrag,o.reselect),u.add(we,ze,[we,qe.undoit,Ft.undoit,qe.traces],ze,[we,qe.redoit,Ft.redoit,qe.traces]);var cr=T.syncOrAsync(Pt,we);return(!cr||!cr.then)&&(cr=Promise.resolve(we)),cr.then(function(){return we.emit("plotly_update",{data:qe.eventData,layout:Ft.eventData}),we})}function Pe(we){return function(Xe){Xe._fullLayout._guiEditing=!0;var ut=we.apply(null,arguments);return Xe._fullLayout._guiEditing=!1,ut}}var Ie=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Qe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function at(we,He){for(var Xe=0;Xe<He.length;Xe++){var ut=He[Xe],Ze=we.match(ut.pattern);if(Ze){var qe=Ze[1]||"";return{head:qe,tail:we.substr(qe.length+1),attr:ut.attr}}}}function Be(we,He){var Xe=n(He,we).get();if(void 0!==Xe)return Xe;var ut=we.split(".");for(ut.pop();ut.length>1;)if(ut.pop(),void 0!==(Xe=n(He,ut.join(".")+".uirevision").get()))return Xe;return He.uirevision}function Ne(we,He){for(var Xe=0;Xe<He.length;Xe++)if(He[Xe]._fullInput.uid===we)return Xe;return-1}function nt(we,He,Xe){for(var ut=0;ut<He.length;ut++)if(He[ut].uid===we)return ut;return!He[Xe]||He[Xe].uid?-1:Xe}function ct(we,He){var Xe=T.isPlainObject(we),ut=Array.isArray(we);return Xe||ut?(Xe&&T.isPlainObject(He)||ut&&Array.isArray(He))&&JSON.stringify(we)===JSON.stringify(He):we===He}function St(we,He,Xe,ut){var Ze,qe,Dt,Ft=ut.getValObject,bt=ut.flags,Pt=ut.immutable,cr=ut.inArray,Sr=ut.arrayIndex;function Kr(){var We=Ze.editType;cr&&-1!==We.indexOf("arraydraw")?T.pushUnique(bt.arrays[cr],Sr):(b.update(bt,Ze),"none"!==We&&bt.nChanges++,ut.transition&&Ze.anim&&bt.nChangesAnim++,(_e.test(Dt)||Ce.test(Dt))&&(bt.rangesAltered[Xe[0]]=1),Le.test(Dt)&&n(He,"_inputDomain").set(null),"datarevision"===qe&&(bt.newDataRevision=1))}function It(We){return"data_array"===We.valType||We.arrayOk}for(qe in we){if(bt.calc&&!ut.transition)return;var $t=we[qe],kr=He[qe],lr=Xe.concat(qe);if(Dt=lr.join("."),"_"!==qe.charAt(0)&&"function"!=typeof $t&&$t!==kr){if(("tick0"===qe||"dtick"===qe)&&"geo"!==Xe[0]){var rt=He.tickmode;if("auto"===rt||"array"===rt||!rt)continue}if(("range"!==qe||!He.autorange)&&("zmin"!==qe&&"zmax"!==qe||"contourcarpet"!==He.type)&&((Ze=Ft(lr))&&(!Ze._compareAsJSON||JSON.stringify($t)!==JSON.stringify(kr)))){var ht,$e=Ze.valType,gt=It(Ze),ft=Array.isArray($t),Ct=Array.isArray(kr);if(ft&&Ct){var sr="_input_"+qe,tr=we[sr],Cr=He[sr];if(Array.isArray(tr)&&tr===Cr)continue}if(void 0===kr)gt&&ft?bt.calc=!0:Kr();else if(Ze._isLinkedToArray){var Hr=[],zr=!1;cr||(bt.arrays[qe]=Hr);var Wr=Math.min($t.length,kr.length),Ke=Math.max($t.length,kr.length);if(Wr!==Ke){if("arraydraw"!==Ze.editType){Kr();continue}zr=!0}for(ht=0;ht<Wr;ht++)St($t[ht],kr[ht],lr.concat(ht),T.extendFlat({inArray:qe,arrayIndex:ht},ut));if(zr)for(ht=Wr;ht<Ke;ht++)Hr.push(ht)}else!$e&&T.isPlainObject($t)?St($t,kr,lr,ut):gt?ft&&Ct?(Pt&&(bt.calc=!0),(Pt||ut.newDataRevision)&&Kr()):ft!==Ct?bt.calc=!0:Kr():ft&&Ct?($t.length!==kr.length||String($t)!==String(kr))&&Kr():Kr()}}}for(qe in He)if(!(qe in we)&&"_"!==qe.charAt(0)&&"function"!=typeof He[qe]){if(It(Ze=Ft(Xe.concat(qe)))&&Array.isArray(He[qe]))return void(bt.calc=!0);Kr()}}function Xt(we,He){var Xe;for(Xe in we)if("_"!==Xe.charAt(0)){var ut=we[Xe],Ze=He[Xe];if(ut!==Ze)if(T.isPlainObject(ut)&&T.isPlainObject(Ze)){if(Xt(ut,Ze))return!0}else{if(!Array.isArray(ut)||!Array.isArray(Ze))return!0;if(ut.length!==Ze.length)return!0;for(var qe=0;qe<ut.length;qe++)if(ut[qe]!==Ze[qe]){if(!T.isPlainObject(ut[qe])||!T.isPlainObject(Ze[qe]))return!0;if(Xt(ut[qe],Ze[qe]))return!0}}}}function ge(we){var He=we._fullLayout,Xe=we.getBoundingClientRect();if(!T.equalDomRects(Xe,He._lastBBox)){var ut=He._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(we));He._invScaleX=Math.sqrt(ut[0][0]*ut[0][0]+ut[0][1]*ut[0][1]+ut[0][2]*ut[0][2]),He._invScaleY=Math.sqrt(ut[1][0]*ut[1][0]+ut[1][1]*ut[1][1]+ut[1][2]*ut[1][2]),He._lastBBox=Xe}}K.animate=function Mt(we,He,Xe){if(we=T.getGraphDiv(we),!T.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ut=we._transitionData;ut._frameQueue||(ut._frameQueue=[]);var Ze=(Xe=o.supplyAnimationDefaults(Xe)).transition,qe=Xe.frame;function Dt(Pt){return Array.isArray(Ze)?Pt>=Ze.length?Ze[0]:Ze[Pt]:Ze}function Ft(Pt){return Array.isArray(qe)?Pt>=qe.length?qe[0]:qe[Pt]:qe}function bt(Pt,cr){var Sr=0;return function(){if(Pt&&++Sr===cr)return Pt()}}return void 0===ut._frameWaitingCnt&&(ut._frameWaitingCnt=0),new Promise(function(Pt,cr){var lr=0;function rt(Wr){return Array.isArray(Ze)?lr>=Ze.length?Wr.transitionOpts=Ze[lr]:Wr.transitionOpts=Ze[0]:Wr.transitionOpts=Ze,lr++,Wr}var $e,ht,gt=[],ft=null==He,Ct=Array.isArray(He);if(!ft&&!Ct&&T.isPlainObject(He))gt.push({type:"object",data:rt(T.extendFlat({},He))});else if(ft||-1!==["string","number"].indexOf(typeof He))for($e=0;$e<ut._frames.length;$e++)(ht=ut._frames[$e])&&(ft||String(ht.group)===String(He))&&gt.push({type:"byname",name:String(ht.name),data:rt({name:ht.name})});else if(Ct)for($e=0;$e<He.length;$e++){var tr=He[$e];-1!==["number","string"].indexOf(typeof tr)?(tr=String(tr),gt.push({type:"byname",name:tr,data:rt({name:tr})})):T.isPlainObject(tr)&&gt.push({type:"object",data:rt(T.extendFlat({},tr))})}for($e=0;$e<gt.length;$e++)if("byname"===(ht=gt[$e]).type&&!ut._frameHash[ht.data.name])return T.warn('animate failure: frame not found: "'+ht.data.name+'"'),void cr();-1!==["next","immediate"].indexOf(Xe.mode)&&function Sr(){if(0!==ut._frameQueue.length){for(;ut._frameQueue.length;){var Wr=ut._frameQueue.pop();Wr.onInterrupt&&Wr.onInterrupt()}we.emit("plotly_animationinterrupted",[])}}(),"reverse"===Xe.direction&&gt.reverse();var Cr=we._fullLayout._currentFrame;if(Cr&&Xe.fromcurrent){var Hr=-1;for($e=0;$e<gt.length;$e++)if("byname"===(ht=gt[$e]).type&&ht.name===Cr){Hr=$e;break}if(Hr>0&&Hr<gt.length-1){var zr=[];for($e=0;$e<gt.length;$e++)ht=gt[$e],("byname"!==gt[$e].type||$e>Hr)&&zr.push(ht);gt=zr}}gt.length>0?function Kr(Wr){if(0!==Wr.length){for(var Ke=0;Ke<Wr.length;Ke++){var We;We="byname"===Wr[Ke].type?o.computeFrame(we,Wr[Ke].name):Wr[Ke].data;var Jt=Ft(Ke),Gt=Dt(Ke);Gt.duration=Math.min(Gt.duration,Jt.duration);var hr={frame:We,name:Wr[Ke].name,frameOpts:Jt,transitionOpts:Gt};Ke===Wr.length-1&&(hr.onComplete=bt(Pt,2),hr.onInterrupt=cr),ut._frameQueue.push(hr)}"immediate"===Xe.mode&&(ut._lastFrameAt=-1/0),ut._animationRaf||function kr(){we.emit("plotly_animating"),ut._lastFrameAt=-1/0,ut._timeToNext=0,ut._runningTransitions=0,ut._currentFrame=null;var Wr=function(){ut._animationRaf=window.requestAnimationFrame(Wr),Date.now()-ut._lastFrameAt>ut._timeToNext&&function $t(){ut._currentFrame&&ut._currentFrame.onComplete&&ut._currentFrame.onComplete();var Wr=ut._currentFrame=ut._frameQueue.shift();if(Wr){var Ke=Wr.name?Wr.name.toString():null;we._fullLayout._currentFrame=Ke,ut._lastFrameAt=Date.now(),ut._timeToNext=Wr.frameOpts.duration,o.transition(we,Wr.frame.data,Wr.frame.layout,d.coerceTraceIndices(we,Wr.frame.traces),Wr.frameOpts,Wr.transitionOpts).then(function(){Wr.onComplete&&Wr.onComplete()}),we.emit("plotly_animatingframe",{name:Ke,frame:Wr.frame,animation:{frame:Wr.frameOpts,transition:Wr.transitionOpts}})}else!function It(){we.emit("plotly_animated"),window.cancelAnimationFrame(ut._animationRaf),ut._animationRaf=null}()}()};Wr()}()}}(gt):(we.emit("plotly_animated"),Pt())})},K.addFrames=function st(we,He,Xe){if(we=T.getGraphDiv(we),null==He)return Promise.resolve();if(!T.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ut,Ze,qe,Dt,Ft=we._transitionData._frames,bt=we._transitionData._frameHash;if(!Array.isArray(He))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+He);var Pt=Ft.length+2*He.length,cr=[],Sr={};for(ut=He.length-1;ut>=0;ut--)if(T.isPlainObject(He[ut])){var Kr=He[ut].name,It=(bt[Kr]||Sr[Kr]||{}).name,$t=He[ut].name,kr=bt[It]||Sr[It];It&&$t&&"number"==typeof $t&&kr&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(bt[It]||Sr[It]).name+'" with a frame whose name of type "number" also equates to "'+It+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===S&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Sr[Kr]={name:Kr},cr.push({frame:o.supplyFrameDefaults(He[ut]),index:Xe&&void 0!==Xe[ut]&&null!==Xe[ut]?Xe[ut]:Pt+ut})}cr.sort(function(sr,tr){return sr.index>tr.index?-1:sr.index<tr.index?1:0});var lr=[],rt=[],$e=Ft.length;for(ut=cr.length-1;ut>=0;ut--){if("number"==typeof(Ze=cr[ut].frame).name&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ze.name)for(;bt[Ze.name="frame "+we._transitionData._counter++];);if(bt[Ze.name]){for(qe=0;qe<Ft.length&&(Ft[qe]||{}).name!==Ze.name;qe++);lr.push({type:"replace",index:qe,value:Ze}),rt.unshift({type:"replace",index:qe,value:Ft[qe]})}else Dt=Math.max(0,Math.min(cr[ut].index,$e)),lr.push({type:"insert",index:Dt,value:Ze}),rt.unshift({type:"delete",index:Dt}),$e++}var ht=o.modifyFrames,gt=o.modifyFrames,ft=[we,rt],Ct=[we,lr];return u&&u.add(we,ht,ft,gt,Ct),o.modifyFrames(we,lr)},K.deleteFrames=function Se(we,He){if(we=T.getGraphDiv(we),!T.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we);var Xe,ut,Ze=we._transitionData._frames,qe=[],Dt=[];if(!He)for(He=[],Xe=0;Xe<Ze.length;Xe++)He.push(Xe);for((He=He.slice()).sort(),Xe=He.length-1;Xe>=0;Xe--)ut=He[Xe],qe.push({type:"delete",index:ut}),Dt.unshift({type:"insert",index:ut,value:Ze[ut]});var Ft=o.modifyFrames,bt=o.modifyFrames,Pt=[we,Dt],cr=[we,qe];return u&&u.add(we,Ft,Pt,bt,cr),o.modifyFrames(we,qe)},K.addTraces=function ie(we,He,Xe){we=T.getGraphDiv(we);var bt,Pt,ut=[],Ze=K.deleteTraces,qe=ie,Dt=[we,ut],Ft=[we,He];for(function j(we,He,Xe){var ut,Ze;if(!Array.isArray(we.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),ut=0;ut<He.length;ut++)if("object"!=typeof(Ze=He[ut])||Array.isArray(Ze)||null===Ze)throw new Error("all values in traces array must be non-array objects");if(typeof Xe<"u"&&!Array.isArray(Xe)&&(Xe=[Xe]),typeof Xe<"u"&&Xe.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(we,He,Xe),Array.isArray(He)||(He=[He]),He=He.map(function(cr){return T.extendFlat({},cr)}),d.cleanData(He),bt=0;bt<He.length;bt++)we.data.push(He[bt]);for(bt=0;bt<He.length;bt++)ut.push(-He.length+bt);if(typeof Xe>"u")return Pt=K.redraw(we),u.add(we,Ze,Dt,qe,Ft),Pt;Array.isArray(Xe)||(Xe=[Xe]);try{H(we,ut,Xe)}catch(cr){throw we.data.splice(we.data.length-He.length,He.length),cr}return u.startSequence(we),u.add(we,Ze,Dt,qe,Ft),Pt=K.moveTraces(we,ut,Xe),u.stopSequence(we),Pt},K.deleteTraces=function V(we,He){we=T.getGraphDiv(we);var Ft,bt,Xe=[],ut=K.addTraces,Ze=V,qe=[we,Xe,He],Dt=[we,He];if(typeof He>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(He)||(He=[He]),U(we,He,"indices"),(He=O(He,we.data.length-1)).sort(T.sorterDes),Ft=0;Ft<He.length;Ft+=1)bt=we.data.splice(He[Ft],1)[0],Xe.push(bt);var Pt=K.redraw(we);return u.add(we,ut,qe,Ze,Dt),Pt},K.extendTraces=function q(we,He,Xe,ut){function Ze(bt,Pt,cr){var Sr,Kr;if(T.isTypedArray(bt))if(cr<0){var It=new bt.constructor(0),$t=te(bt,Pt);cr<0?(Sr=$t,Kr=It):(Sr=It,Kr=$t)}else if(Sr=new bt.constructor(cr),Kr=new bt.constructor(bt.length+Pt.length-cr),cr===Pt.length)Sr.set(Pt),Kr.set(bt);else if(cr<Pt.length){var kr=Pt.length-cr;Sr.set(Pt.subarray(kr)),Kr.set(bt),Kr.set(Pt.subarray(0,kr),bt.length)}else{var lr=cr-Pt.length,rt=bt.length-lr;Sr.set(bt.subarray(rt)),Sr.set(Pt,lr),Kr.set(bt.subarray(0,rt))}else Sr=bt.concat(Pt),Kr=cr>=0&&cr<Sr.length?Sr.splice(0,Sr.length-cr):[];return[Sr,Kr]}var qe=B(we=T.getGraphDiv(we),He,Xe,ut,Ze),Dt=K.redraw(we),Ft=[we,qe.update,Xe,qe.maxPoints];return u.add(we,K.prependTraces,Ft,q,arguments),Dt},K.moveTraces=function Y(we,He,Xe){var Pt,ut=[],Ze=[],qe=Y,Dt=Y,Ft=[we=T.getGraphDiv(we),Xe,He],bt=[we,He,Xe];if(H(we,He,Xe),He=Array.isArray(He)?He:[He],typeof Xe>"u")for(Xe=[],Pt=0;Pt<He.length;Pt++)Xe.push(-He.length+Pt);for(Xe=Array.isArray(Xe)?Xe:[Xe],He=O(He,we.data.length-1),Xe=O(Xe,we.data.length-1),Pt=0;Pt<we.data.length;Pt++)-1===He.indexOf(Pt)&&ut.push(we.data[Pt]);for(Pt=0;Pt<He.length;Pt++)Ze.push({newIndex:Xe[Pt],trace:we.data[He[Pt]]});for(Ze.sort(function(Sr,Kr){return Sr.newIndex-Kr.newIndex}),Pt=0;Pt<Ze.length;Pt+=1)ut.splice(Ze[Pt].newIndex,0,Ze[Pt].trace);we.data=ut;var cr=K.redraw(we);return u.add(we,qe,Ft,Dt,bt),cr},K.prependTraces=function oe(we,He,Xe,ut){function Ze(bt,Pt,cr){var Sr,Kr;if(T.isTypedArray(bt))if(cr<=0){var It=new bt.constructor(0),$t=te(Pt,bt);cr<0?(Sr=$t,Kr=It):(Sr=It,Kr=$t)}else if(Sr=new bt.constructor(cr),Kr=new bt.constructor(bt.length+Pt.length-cr),cr===Pt.length)Sr.set(Pt),Kr.set(bt);else if(cr<Pt.length){var kr=Pt.length-cr;Sr.set(Pt.subarray(0,kr)),Kr.set(Pt.subarray(kr)),Kr.set(bt,kr)}else{var lr=cr-Pt.length;Sr.set(Pt),Sr.set(bt.subarray(0,lr),Pt.length),Kr.set(bt.subarray(lr))}else Sr=Pt.concat(bt),Kr=cr>=0&&cr<Sr.length?Sr.splice(cr,Sr.length):[];return[Sr,Kr]}var qe=B(we=T.getGraphDiv(we),He,Xe,ut,Ze),Dt=K.redraw(we),Ft=[we,qe.update,Xe,qe.maxPoints];return u.add(we,K.extendTraces,Ft,oe,arguments),Dt},K.newPlot=function k(we,He,Xe,ut){return we=T.getGraphDiv(we),o.cleanPlot([],{},we._fullData||[],we._fullLayout||{}),o.purge(we),K._doPlot(we,He,Xe,ut)},K._doPlot=function E(we,He,Xe,ut){var Ze;if(we=T.getGraphDiv(we),i.init(we),T.isPlainObject(He)){var qe=He;He=qe.data,Xe=qe.layout,ut=qe.config,Ze=qe.frames}if(!1===i.triggerHandler(we,"plotly_beforeplot",[He,Xe,ut]))return Promise.reject();!He&&!Xe&&!T.isPlotDiv(we)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",we),z(we,ut),Xe||(Xe={}),M.select(we).classed("js-plotly-plot",!0),l.makeTester(),Array.isArray(we._promises)||(we._promises=[]);var bt=0===(we.data||[]).length&&Array.isArray(He);Array.isArray(He)&&(d.cleanData(He),bt?we.data=He:we.data.push.apply(we.data,He),we.empty=!1),(!we.layout||bt)&&(we.layout=d.cleanLayout(Xe)),o.supplyDefaults(we);var Pt=we._fullLayout,cr=Pt._has("cartesian");Pt._replotting=!0,(bt||Pt._shouldCreateBgLayer)&&(function Oe(we){var He=M.select(we),Xe=we._fullLayout;if(Xe._calcInverseTransform=ge,Xe._calcInverseTransform(we),Xe._container=He.selectAll(".plot-container").data([0]),Xe._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Xe._paperdiv=Xe._container.selectAll(".svg-container").data([0]),Xe._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Xe._glcontainer=Xe._paperdiv.selectAll(".gl-container").data([{}]),Xe._glcontainer.enter().append("div").classed("gl-container",!0),Xe._paperdiv.selectAll(".main-svg").remove(),Xe._paperdiv.select(".modebar-container").remove(),Xe._paper=Xe._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Xe._toppaper=Xe._paperdiv.append("svg").classed("main-svg",!0),Xe._modebardiv=Xe._paperdiv.append("div"),delete Xe._modeBar,Xe._hoverpaper=Xe._paperdiv.append("svg").classed("main-svg",!0),!Xe._uid){var ut={};M.selectAll("defs").each(function(){this.id&&(ut[this.id.split("-")[1]]=1)}),Xe._uid=T.randstr(ut)}Xe._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),Xe._defs=Xe._paper.append("defs").attr("id","defs-"+Xe._uid),Xe._clips=Xe._defs.append("g").classed("clips",!0),Xe._topdefs=Xe._toppaper.append("defs").attr("id","topdefs-"+Xe._uid),Xe._topclips=Xe._topdefs.append("g").classed("clips",!0),Xe._bgLayer=Xe._paper.append("g").classed("bglayer",!0),Xe._draggers=Xe._paper.append("g").classed("draglayer",!0);var Ze=Xe._paper.append("g").classed("layer-below",!0);Xe._imageLowerLayer=Ze.append("g").classed("imagelayer",!0),Xe._shapeLowerLayer=Ze.append("g").classed("shapelayer",!0),Xe._cartesianlayer=Xe._paper.append("g").classed("cartesianlayer",!0),Xe._polarlayer=Xe._paper.append("g").classed("polarlayer",!0),Xe._smithlayer=Xe._paper.append("g").classed("smithlayer",!0),Xe._ternarylayer=Xe._paper.append("g").classed("ternarylayer",!0),Xe._geolayer=Xe._paper.append("g").classed("geolayer",!0),Xe._funnelarealayer=Xe._paper.append("g").classed("funnelarealayer",!0),Xe._pielayer=Xe._paper.append("g").classed("pielayer",!0),Xe._iciclelayer=Xe._paper.append("g").classed("iciclelayer",!0),Xe._treemaplayer=Xe._paper.append("g").classed("treemaplayer",!0),Xe._sunburstlayer=Xe._paper.append("g").classed("sunburstlayer",!0),Xe._indicatorlayer=Xe._toppaper.append("g").classed("indicatorlayer",!0),Xe._glimages=Xe._paper.append("g").classed("glimages",!0);var qe=Xe._toppaper.append("g").classed("layer-above",!0);Xe._imageUpperLayer=qe.append("g").classed("imagelayer",!0),Xe._shapeUpperLayer=qe.append("g").classed("shapelayer",!0),Xe._selectionLayer=Xe._toppaper.append("g").classed("selectionlayer",!0),Xe._infolayer=Xe._toppaper.append("g").classed("infolayer",!0),Xe._menulayer=Xe._toppaper.append("g").classed("menulayer",!0),Xe._zoomlayer=Xe._toppaper.append("g").classed("zoomlayer",!0),Xe._hoverlayer=Xe._hoverpaper.append("g").classed("hoverlayer",!0),Xe._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),we.emit("plotly_framework")}(we),Pt._shouldCreateBgLayer&&delete Pt._shouldCreateBgLayer),l.initGradients(we),l.initPatterns(we),bt&&v.saveShowSpikeInitial(we);var Sr=!we.calcdata||we.calcdata.length!==(we._fullData||[]).length;Sr&&o.doCalcdata(we);for(var Kr=0;Kr<we.calcdata.length;Kr++)we.calcdata[Kr][0].trace=we._fullData[Kr];we._context.responsive?we._responsiveChartHandler||(we._responsiveChartHandler=function(){T.isHidden(we)||o.resize(we)},window.addEventListener("resize",we._responsiveChartHandler)):T.clearResponsive(we);var It=T.extendFlat({},Pt._size),$t=0;function lr(){if(o.clearAutoMarginIds(we),A.drawMarginPushers(we),v.allowAutoMargin(we),we._fullLayout.title.text&&we._fullLayout.title.automargin&&o.allowAutoMargin(we,"title.automargin"),Pt._has("pie"))for(var sr=we._fullData,tr=0;tr<sr.length;tr++){var Cr=sr[tr];"pie"===Cr.type&&Cr.automargin&&o.allowAutoMargin(we,"pie."+Cr.uid+".automargin")}return o.doAutoMargin(we),o.previousPromises(we)}function ht(){we._transitioning||(A.doAutoRangeAndConstraints(we),bt&&v.saveRangeInitial(we),a.getComponentMethod("rangeslider","calcAutorange")(we))}var ft=[o.previousPromises,function Ft(){if(Ze)return K.addFrames(we,Ze)},function kr(){for(var sr=Pt._basePlotModules,tr=0;tr<sr.length;tr++)sr[tr].drawFramework&&sr[tr].drawFramework(we);!Pt._glcanvas&&Pt._has("gl")&&(Pt._glcanvas=Pt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Wr){return Wr.key}),Pt._glcanvas.enter().append("canvas").attr("class",function(Wr){return"gl-canvas gl-canvas-"+Wr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Cr=we._context.plotGlPixelRatio;if(Pt._glcanvas){Pt._glcanvas.attr("width",Pt.width*Cr).attr("height",Pt.height*Cr).style("width",Pt.width+"px").style("height",Pt.height+"px");var Hr=Pt._glcanvas.data()[0].regl;if(Hr&&(Math.floor(Pt.width*Cr)!==Hr._gl.drawingBufferWidth||Math.floor(Pt.height*Cr)!==Hr._gl.drawingBufferHeight)){var zr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!$t)return T.log(zr+" Clearing graph and plotting again."),o.cleanPlot([],{},we._fullData,Pt),o.supplyDefaults(we),Pt=we._fullLayout,o.doCalcdata(we),$t++,kr();T.error(zr)}}return"h"===Pt.modebar.orientation?Pt._modebardiv.style("height",null).style("width","100%"):Pt._modebardiv.style("width",null).style("height",Pt.height+"px"),o.previousPromises(we)},lr,function rt(){if(o.didMarginChange(It,Pt._size))return T.syncOrAsync([lr,A.layoutStyles],we)}];cr&&ft.push(function $e(){if(Sr)return T.syncOrAsync([a.getComponentMethod("shapes","calcAutorange"),a.getComponentMethod("annotations","calcAutorange"),ht],we);ht()}),ft.push(A.layoutStyles),cr&&ft.push(function gt(){return v.draw(we,bt?"":"redraw")},function(tr){var Cr=tr._fullLayout._insideTickLabelsUpdaterange;if(Cr)return tr._fullLayout._insideTickLabelsUpdaterange=void 0,de(tr,Cr).then(function(){v.saveRangeInitial(tr,!0)})}),ft.push(A.drawData,A.finalDraw,s,o.addLinks,o.rehover,o.redrag,o.reselect,o.doAutoMargin,o.previousPromises);var Ct=T.syncOrAsync(ft,we);return(!Ct||!Ct.then)&&(Ct=Promise.resolve()),Ct.then(function(){return P(we),we})},K.purge=function pe(we){var He=(we=T.getGraphDiv(we))._fullLayout||{},Xe=we._fullData||[];return o.cleanPlot([],{},Xe,He),o.purge(we),i.purge(we),He._container&&He._container.remove(),delete we._context,we},K.react=function Bt(we,He,Xe,ut){var Ze,qe;we=T.getGraphDiv(we),d.clearPromiseQueue(we);var Ft=we._fullData,bt=we._fullLayout;if(T.isPlotDiv(we)&&Ft&&bt){if(T.isPlainObject(He)){var Pt=He;He=Pt.data,Xe=Pt.layout,ut=Pt.config,Ze=Pt.frames}var cr=!1;if(ut){var Sr=T.extendDeep({},we._context);we._context=void 0,z(we,ut),cr=Xt(Sr,we._context)}we.data=He||[],d.cleanData(we.data),we.layout=Xe||{},d.cleanLayout(we.layout),function mt(we,He,Xe,ut){var qe,Dt,Ft,bt,Pt,cr,Sr,Kr,It,$t,Ze=ut._preGUI,kr=[],lr={},rt={};for(qe in Ze){if(Pt=at(qe,Ie)){if(It=Pt.head,$t=Pt.tail,Dt=Pt.attr||It+".uirevision",(bt=(Ft=n(ut,Dt).get())&&Be(Dt,He))&&bt===Ft){if(null===(cr=Ze[qe])&&(cr=void 0),ct(Kr=(Sr=n(He,qe)).get(),cr)){void 0===Kr&&"autorange"===$t&&kr.push(It),Sr.set(X(n(ut,qe).get()));continue}if("autorange"===$t||"range["===$t.substr(0,6)){var $e=Ze[It+".range[0]"],ht=Ze[It+".range[1]"],gt=Ze[It+".autorange"];if(gt||null===gt&&null===$e&&null===ht){if(!(It in lr)){var ft=n(He,It).get();lr[It]=ft&&(ft.autorange||!1!==ft.autorange&&(!ft.range||2!==ft.range.length))}if(lr[It]){Sr.set(X(n(ut,qe).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+qe);delete Ze[qe],Pt&&"range["===Pt.tail.substr(0,6)&&(rt[Pt.head]=1)}for(var Ct=0;Ct<kr.length;Ct++){var sr=kr[Ct];if(rt[sr]){var tr=n(He,sr).get();tr&&delete tr.autorange}}var Cr=ut._tracePreGUI;for(var Hr in Cr){var Ke,zr=Cr[Hr],Wr=null;for(qe in zr){if(!Wr){var We=Ne(Hr,Xe);if(We<0){delete Cr[Hr];break}var Gt=nt(Hr,we,(Ke=Xe[We]._fullInput).index);if(Gt<0){delete Cr[Hr];break}Wr=we[Gt]}if(Pt=at(qe,Qe)){if(Pt.attr?bt=(Ft=n(ut,Pt.attr).get())&&Be(Pt.attr,He):(Ft=Ke.uirevision,void 0===(bt=Wr.uirevision)&&(bt=He.uirevision)),bt&&bt===Ft&&(null===(cr=zr[qe])&&(cr=void 0),ct(Kr=(Sr=n(Wr,qe)).get(),cr))){Sr.set(X(n(Ke,qe).get()));continue}}else T.warn("unrecognized GUI edit: "+qe+" in trace uid "+Hr);delete zr[qe]}}}(we.data,we.layout,Ft,bt),o.supplyDefaults(we,{skipUpdateCalc:!0});var Kr=we._fullData,It=we._fullLayout,$t=void 0===It.datarevision,kr=It.transition,lr=function zt(we,He,Xe,ut,Ze){var qe=b.layoutFlags();function Dt(bt){return r.getLayoutValObject(Xe,bt)}qe.arrays={},qe.rangesAltered={},qe.nChanges=0,qe.nChangesAnim=0;var Ft={getValObject:Dt,flags:qe,immutable:ut,transition:Ze,gd:we};return St(He,Xe,[],Ft),(qe.plot||qe.calc)&&(qe.layoutReplot=!0),Ze&&qe.nChanges&&qe.nChangesAnim&&(qe.anim=qe.nChanges===qe.nChangesAnim?"all":"some"),qe}(we,bt,It,$t,kr),rt=lr.newDataRevision,$e=function Rt(we,He,Xe,ut,Ze,qe){var Dt=He.length===Xe.length;if(!Ze&&!Dt)return{fullReplot:!0,calc:!0};var bt,Pt,Ft=b.traceFlags();function cr(It){var $t=r.getTraceValObject(Pt,It);return!Pt._module.animatable&&$t.anim&&($t.anim=!1),$t}Ft.arrays={},Ft.nChanges=0,Ft.nChangesAnim=0;var Sr={getValObject:cr,flags:Ft,immutable:ut,transition:Ze,newDataRevision:qe,gd:we},Kr={};for(bt=0;bt<He.length;bt++)if(Xe[bt]){if(Pt=Xe[bt]._fullInput,o.hasMakesDataTransform(Pt)&&(Pt=Xe[bt]),Kr[Pt.uid])continue;Kr[Pt.uid]=1,St(He[bt]._fullInput,Pt,[],Sr)}return(Ft.calc||Ft.plot)&&(Ft.fullReplot=!0),Ze&&Ft.nChanges&&Ft.nChangesAnim&&(Ft.anim=Ft.nChanges===Ft.nChangesAnim&&Dt?"all":"some"),Ft}(we,Ft,Kr,$t,kr,rt);if(ke(we)&&(lr.layoutReplot=!0),$e.calc||lr.calc){we.calcdata=void 0;for(var ht=Object.getOwnPropertyNames(It),gt=0;gt<ht.length;gt++){var ft=ht[gt],Ct=ft.substring(0,5);if("xaxis"===Ct||"yaxis"===Ct){var sr=It[ft]._emptyCategories;sr&&sr()}}}else o.supplyDefaultsUpdateCalc(we.calcdata,Kr);var tr=[];if(Ze&&(we._transitionData={},o.createTransitionData(we),tr.push(function Dt(){return K.addFrames(we,Ze)})),It.transition&&!cr&&($e.anim||lr.anim))lr.ticks&&tr.push(A.doTicksRelayout),o.doCalcdata(we),A.doAutoRangeAndConstraints(we),tr.push(function(){return o.transitionFromReact(we,$e,lr,bt)});else if($e.fullReplot||lr.layoutReplot||cr)we._fullLayout._skipDefaults=!0,tr.push(K._doPlot);else{for(var Cr in lr.arrays){var Hr=lr.arrays[Cr];if(Hr.length){var zr=a.getComponentMethod(Cr,"drawOne");if(zr!==T.noop)for(var Wr=0;Wr<Hr.length;Wr++)zr(we,Hr[Wr]);else{var Ke=a.getComponentMethod(Cr,"draw");if(Ke===T.noop)throw new Error("cannot draw components: "+Cr);Ke(we)}}}tr.push(o.previousPromises),$e.style&&tr.push(A.doTraceStyle),($e.colorbars||lr.colorbars)&&tr.push(A.doColorBars),lr.legend&&tr.push(A.doLegend),lr.layoutstyle&&tr.push(A.layoutStyles),lr.axrange&&De(tr),lr.ticks&&tr.push(A.doTicksRelayout),lr.modebar&&tr.push(A.doModeBar),lr.camera&&tr.push(A.doCamera),tr.push(P)}tr.push(o.rehover,o.redrag,o.reselect),(!(qe=T.syncOrAsync(tr,we))||!qe.then)&&(qe=Promise.resolve(we))}else qe=K.newPlot(we,He,Xe,ut);return qe.then(function(){return we.emit("plotly_react",{data:He,layout:Xe}),we})},K.redraw=function D(we){if(we=T.getGraphDiv(we),!T.isPlotDiv(we))throw new Error("This element is not a Plotly plot: "+we);return d.cleanData(we.data),d.cleanLayout(we.layout),we.calcdata=void 0,K._doPlot(we).then(function(){return we.emit("plotly_redraw"),we})},K.relayout=de,K.restyle=ae,K.setPlotConfig=function R(we){return T.extendFlat(g,we)},K.update=ze,K._guiRelayout=Pe(de),K._guiRestyle=Pe(ae),K._guiUpdate=Pe(ze),K._storeDirectGUIEdit=function re(we,He,Xe){for(var ut in Xe){ue(ut,n(we,ut).get(),Xe[ut],He)}}},16574:$=>{"use strict";var K={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},typesetMath:{valType:"boolean",dflt:!0,description:["Determines whether math should be typeset or not,","when MathJax (either v2 or v3) is present on the page."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},editSelection:{valType:"boolean",dflt:!0,description:"Enables moving selections."},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo and mapbox subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo and mapbox) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},e={};(function M(I,t){for(var T in I){var n=I[T];n.valType?t[T]=n.dflt:(t[T]||(t[T]={}),M(n,t[T]))}})(K,e),$.exports={configAttributes:K,dfltConfig:e}},55773:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(82684),T=e(11161),n=e(27150),i=e(87889),u=e(16574).configAttributes,a=e(71859),r=I.extendDeepAll,o=I.isPlainObject,v=I.isArrayOrTypedArray,p=I.nestedProperty,f=I.valObjectMeta,l="_isSubplotObj",y="_isLinkedToArray",x="_deprecated",h=[l,y,"_arrayAttrRegexps",x];function m(z,D,k){if(!z)return!1;if(z._isLinkedToArray)if(d(D[k]))k++;else if(k<D.length)return!1;for(;k<D.length;k++){var O=z[D[k]];if(!o(O))break;if(z=O,k===D.length-1)break;if(z._isLinkedToArray){if(!d(D[++k]))return!1}else if("info_array"===z.valType){var U=D[++k];if(!d(U))return!1;var H=z.items;if(Array.isArray(H)){if(U>=H.length)return!1;if(2===z.dimensions){if(k++,D.length===k)return z;var j=D[k];if(!d(j))return!1;z=H[U][j]}else z=H[U]}else z=H}}return z}function d(z){return z===Math.round(z)&&z>=0}function b(){var D,k,z={};for(D in r(z,T),M.subplotsRegistry)if((k=M.subplotsRegistry[D]).layoutAttributes)if(Array.isArray(k.attr))for(var O=0;O<k.attr.length;O++)F(z,k,k.attr[O]);else{F(z,k,"subplot"===k.attr?k.name:k.attr)}for(D in M.componentsRegistry){var H=(k=M.componentsRegistry[D]).schema;if(H&&(H.subplots||H.layout)){var j=H.subplots;if(j&&j.xaxis&&!j.yaxis)for(var ee in j.xaxis)delete z.yaxis[ee];delete z.xaxis.shift,delete z.xaxis.autoshift}else"colorscale"===k.name?r(z,k.layoutAttributes):k.layoutAttributes&&_(z,k.layoutAttributes,k.name)}return{layoutAttributes:w(z)}}function S(){var z={frames:r({},n)};return w(z),z.frames}function w(z){return function E(z){function D(O){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+O+"`.",editType:"none"}}function k(O,U,H){K.isValObject(O)?(!0===O.arrayOk||"data_array"===O.valType)&&(H[U+"src"]=D(U)):o(O)&&(O.role="object")}K.crawl(z,k)}(z),function P(z){function D(k,O,U){if(k){var H=k[y];H&&(delete k[y],U[O]={items:{}},U[O].items[H]=k,U[O].role="object")}}K.crawl(z,D)}(z),function R(z){function D(k){for(var O in k)if(o(k[O]))D(k[O]);else if(Array.isArray(k[O]))for(var U=0;U<k[O].length;U++)D(k[O][U]);else k[O]instanceof RegExp&&(k[O]=k[O].toString())}D(z)}(z),z}function F(z,D,k){var O=p(z,k),U=r({},D.layoutAttributes);U[l]=!0,O.set(U)}function _(z,D,k){var O=p(z,k);O.set(r(O.get()||{},D))}K.IS_SUBPLOT_OBJ=l,K.IS_LINKED_TO_ARRAY=y,K.DEPRECATED=x,K.UNDERSCORE_ATTRS=h,K.get=function(){var z={};M.allTypes.forEach(function(k){z[k]=function A(z){var D,k;D=M.modules[z]._module,k=D.basePlotModule;var O={type:null},U=r({},t),H=r({},D.attributes);K.crawl(H,function(W,B,te,q,oe){p(U,oe).set(void 0),void 0===W&&p(H,oe).set(void 0)}),r(O,U),M.traceIs(z,"noOpacity")&&delete O.opacity,M.traceIs(z,"showLegend")||(delete O.showlegend,delete O.legendgroup),M.traceIs(z,"noHover")&&(delete O.hoverinfo,delete O.hoverlabel),D.selectPoints||delete O.selectedpoints,r(O,H),k.attributes&&r(O,k.attributes),O.type=z;var j={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:z,attributes:w(O)};if(D.layoutAttributes){var ee={};r(ee,D.layoutAttributes),j.layoutAttributes=w(ee)}return D.animatable||K.crawl(j,function(W){K.isValObject(W)&&"anim"in W&&delete W.anim}),j}(k)});var D={};return Object.keys(M.transformsRegistry).forEach(function(k){D[k]=function c(z){var D=M.transformsRegistry[z],k=r({},D.attributes);return Object.keys(M.componentsRegistry).forEach(function(O){var U=M.componentsRegistry[O];U.schema&&U.schema.transforms&&U.schema.transforms[z]&&Object.keys(U.schema.transforms[z]).forEach(function(H){_(k,U.schema.transforms[z][H],H)})}),{attributes:w(k)}}(k)}),{defs:{valObjects:f,metaKeys:h.concat(["description","role","editType","impliedEdits"]),editType:{traces:a.traces,layout:a.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:z,layout:b(),transforms:D,frames:S(),animation:w(i),config:w(u)}},K.crawl=function(z,D,k,O){var U=k||0;O=O||"",Object.keys(z).forEach(function(H){var j=z[H];if(-1===h.indexOf(H)){var ee=(O?O+".":"")+H;D(j,H,z,U,ee),!K.isValObject(j)&&o(j)&&"impliedEdits"!==H&&K.crawl(j,D,U+1,ee)}})},K.isValObject=function(z){return z&&void 0!==z.valType},K.findArrayAttributes=function(z){var U,H,D=[],k=[],O=[];function j(oe,ie,V,Y){k=k.slice(0,Y).concat([ie]),O=O.slice(0,Y).concat([oe&&oe._isLinkedToArray]),oe&&("data_array"===oe.valType||!0===oe.arrayOk)&&!("colorbar"===k[Y-1]&&("ticktext"===ie||"tickvals"===ie))&&ee(U,0,"")}function ee(oe,ie,V){var Y=oe[k[ie]],ae=V+k[ie];if(ie===k.length-1)v(Y)&&D.push(H+ae);else if(O[ie]){if(Array.isArray(Y))for(var X=0;X<Y.length;X++)o(Y[X])&&ee(Y[X],ie+1,ae+"["+X+"].")}else o(Y)&&ee(Y,ie+1,ae+".")}U=z,H="",K.crawl(t,j),z._module&&z._module.attributes&&K.crawl(z._module.attributes,j);var W=z.transforms;if(W)for(var B=0;B<W.length;B++){var te=W[B],q=te._module;q&&(H="transforms["+B+"].",U=te,K.crawl(q.attributes,j))}return D},K.getTraceValObject=function(z,D){var U,H,k=D[0],O=1;if("transforms"===k){if(1===D.length)return t.transforms;var j=z.transforms;if(!Array.isArray(j)||!j.length)return!1;var ee=D[1];if(!d(ee)||ee>=j.length)return!1;H=(U=(M.transformsRegistry[j[ee].type]||{}).attributes)&&U[D[2]],O=3}else{var W=z._module;if(W||(W=(M.modules[z.type||t.type.dflt]||{})._module),!W)return!1;if(!(H=(U=W.attributes)&&U[k])){var B=W.basePlotModule;B&&B.attributes&&(H=B.attributes[k])}H||(H=t[k])}return m(H,D,O)},K.getLayoutValObject=function(z,D){var k=function g(z,D){var k,O,U,H,j=z._basePlotModules;if(j){var ee;for(k=0;k<j.length;k++){if((U=j[k]).attrRegex&&U.attrRegex.test(D)){if(U.layoutAttrOverrides)return U.layoutAttrOverrides;!ee&&U.layoutAttributes&&(ee=U.layoutAttributes)}var W=U.baseLayoutAttrOverrides;if(W&&D in W)return W[D]}if(ee)return ee}var B=z._modules;if(B)for(k=0;k<B.length;k++)if((H=B[k].layoutAttributes)&&D in H)return H[D];for(O in M.componentsRegistry){if("colorscale"===(U=M.componentsRegistry[O]).name&&0===D.indexOf("coloraxis"))return U.layoutAttributes[D];if(!U.schema&&D===U.name)return U.layoutAttributes}return D in T&&T[D]}(z,D[0]);return m(k,D,1)}},96906:($,K,e)=>{"use strict";var M=e(5228),I=e(82684),t="templateitemname",T={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};function n(u){return u&&"string"==typeof u}function i(u){var a=u.length-1;return"s"!==u.charAt(a)&&M.warn("bad argument to arrayDefaultKey: "+u),u.substr(0,u.length-1)+"defaults"}T[t]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")},K.templatedArray=function(u,a){return a._isLinkedToArray=u,a.name=T.name,a[t]=T[t],a},K.traceTemplater=function(u){var r,o,a={};for(r in u)o=u[r],Array.isArray(o)&&o.length&&(a[r]=0);return{newTrace:function v(p){var f={type:r=M.coerce(p,{},I,"type"),_template:null};if(r in a){o=u[r];var l=a[r]%o.length;a[r]++,f._template=o[l]}return f}}},K.newContainer=function(u,a,r){var o=u._template,v=o&&(o[a]||r&&o[r]);return M.isPlainObject(v)||(v=null),u[a]={_template:v}},K.arrayTemplater=function(u,a,r){var o=u._template,v=o&&o[i(a)],p=o&&o[a];(!Array.isArray(p)||!p.length)&&(p=[]);var f={};return{newItem:function l(s){var x={name:s.name,_input:s},h=x[t]=s[t];if(!n(h))return x._template=v,x;for(var g=0;g<p.length;g++){var m=p[g];if(m.name===h)return f[h]=1,x._template=m,x}return x[r]=s[r]||!1,x._template=!1,x},defaultItems:function y(){for(var s=[],x=0;x<p.length;x++){var h=p[x],g=h.name;if(n(g)&&!f[g]){var m={_template:h,name:g,_input:{_templateitemname:g}};m[t]=h[t],s.push(m),f[g]=1}}return s}}},K.arrayDefaultKey=i,K.arrayEditor=function(u,a,r){var o=(M.nestedProperty(u,a).get()||[]).length,v=r._index,p=v>=o&&(r._input||{})._templateitemname;p&&(v=o);var l,f=a+"["+v+"]";function y(){l={},p&&(l[f]={},l[f][t]=p)}function x(m,d){p?M.nestedProperty(l[f],m).set(d):l[f+"."+m]=d}function h(){var m=l;return y(),m}return y(),{modifyBase:function s(m,d){l[m]=d},modifyItem:x,getUpdateObj:h,applyUpdate:function g(m,d){m&&x(m,d);var A=h();for(var b in A)M.nestedProperty(u,b).set(A[b])}}}},88845:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(31556),T=e(5228),n=e(88565),i=e(77749),u=e(8416),a=e(27630),r=e(77875),o=e(33771),v=e(91464),p=e(94598),f=e(93698),l=f.enforce,y=f.clean,s=e(73332).doAutoRange,x="start",h="middle",g="end";function m(k,O,U){for(var H=0;H<U.length;H++){var j=U[H][0],ee=U[H][1];if(!(j[0]>=k[1]||j[1]<=k[0])&&ee[0]<O[1]&&ee[1]>O[0])return!0}return!1}function d(k){var ee,W,B,te,q,oe,O=k._fullLayout,U=O._size,H=U.p,j=v.list(k,"",!0);if(O._paperdiv.style({width:k._context.responsive&&O.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":O.width+"px",height:k._context.responsive&&O.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(a.setSize,O.width,O.height),k._context.setBackground(k,O.paper_bgcolor),K.drawMainTitle(k),o.manage(k),!O._has("cartesian"))return t.previousPromises(k);function ie(pe,ge,Oe){var we=pe._lw/2;return"x"===pe._id.charAt(0)?ge?"top"===Oe?ge._offset-H-we:ge._offset+ge._length+H+we:U.t+U.h*(1-(pe.position||0))+we%1:ge?"right"===Oe?ge._offset+ge._length+H+we:ge._offset-H-we:U.l+U.w*(pe.position||0)+we%1}for(ee=0;ee<j.length;ee++){var V=(te=j[ee])._anchorAxis;te._linepositions={},te._lw=a.crispRound(k,te.linewidth,1),te._mainLinePosition=ie(te,V,te.side),te._mainMirrorPosition=te.mirror&&V?ie(te,V,p.OPPOSITE_SIDE[te.side]):null}var Y=[],ae=[],X=[],J=1===u.opacity(O.paper_bgcolor)&&1===u.opacity(O.plot_bgcolor)&&O.paper_bgcolor===O.plot_bgcolor;for(W in O._plots)if((B=O._plots[W]).mainplot)B.bg&&B.bg.remove(),B.bg=void 0;else{var ue=B.xaxis.domain,re=B.yaxis.domain,ne=B.plotgroup;if(m(ue,re,X)){var se=ne.node(),de=B.bg=T.ensureSingle(ne,"rect","bg");se.insertBefore(de.node(),se.childNodes[0]),ae.push(W)}else ne.select("rect.bg").remove(),X.push([ue,re]),J||(Y.push(W),ae.push(W))}var Fe,ke,ze,Pe,Ie,Qe,at,Be,Ne,nt,ct,mt,Bt,be=O._bgLayer.selectAll(".bg").data(Y);for(be.enter().append("rect").classed("bg",!0),be.exit().remove(),be.each(function(pe){O._plots[pe].bg=M.select(this)}),ee=0;ee<ae.length;ee++)B=O._plots[ae[ee]],q=B.xaxis,oe=B.yaxis,B.bg&&void 0!==q._offset&&void 0!==oe._offset&&B.bg.call(a.setRect,q._offset-H,oe._offset-H,q._length+2*H,oe._length+2*H).call(u.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(W in O._plots){B=O._plots[W],q=B.xaxis,oe=B.yaxis;var Ce,Le,De=B.clipId="clip"+O._uid+W+"plot",_e=T.ensureSingleById(O._clips,"clipPath",De,function(pe){pe.classed("plotclip",!0).append("rect")});B.clipRect=_e.select("rect").attr({width:q._length,height:oe._length}),a.setTranslate(B.plot,q._offset,oe._offset),B._hasClipOnAxisFalse?(Ce=null,Le=De):(Ce=De,Le=null),a.setClipUrl(B.plot,Ce,k),B.layerClipId=Le}function Rt(pe){return"M"+Fe+","+pe+"H"+ke}function zt(pe){return"M"+q._offset+","+pe+"h"+q._length}function St(pe){return"M"+pe+","+Be+"V"+at}function Xt(pe){return void 0!==oe._shift&&(pe+=oe._shift),"M"+pe+","+oe._offset+"v"+oe._length}function Mt(pe,ge,Oe){if(!pe.showline||W!==pe._mainSubplot)return"";if(!pe._anchorAxis)return Oe(pe._mainLinePosition);var we=ge(pe._mainLinePosition);return pe.mirror&&(we+=ge(pe._mainMirrorPosition)),we}for(W in O._plots){B=O._plots[W],q=B.xaxis,oe=B.yaxis;var st="M0,0";A(q,W)&&(Ie=c(q,"left",oe,j),Fe=q._offset-(Ie?H+Ie:0),Qe=c(q,"right",oe,j),ke=q._offset+q._length+(Qe?H+Qe:0),ze=ie(q,oe,"bottom"),Pe=ie(q,oe,"top"),(Bt=!q._anchorAxis||W!==q._mainSubplot)&&("allticks"===q.mirror||"all"===q.mirror)&&(q._linepositions[W]=[ze,Pe]),st=Mt(q,Rt,zt),Bt&&q.showline&&("all"===q.mirror||"allticks"===q.mirror)&&(st+=Rt(ze)+Rt(Pe)),B.xlines.style("stroke-width",q._lw+"px").call(u.stroke,q.showline?q.linecolor:"rgba(0,0,0,0)")),B.xlines.attr("d",st);var Se="M0,0";A(oe,W)&&(ct=c(oe,"bottom",q,j),at=oe._offset+oe._length+(ct?H:0),mt=c(oe,"top",q,j),Be=oe._offset-(mt?H:0),Ne=ie(oe,q,"left"),nt=ie(oe,q,"right"),(Bt=!oe._anchorAxis||W!==oe._mainSubplot)&&("allticks"===oe.mirror||"all"===oe.mirror)&&(oe._linepositions[W]=[Ne,nt]),Se=Mt(oe,St,Xt),Bt&&oe.showline&&("all"===oe.mirror||"allticks"===oe.mirror)&&(Se+=St(Ne)+St(nt)),B.ylines.style("stroke-width",oe._lw+"px").call(u.stroke,oe.showline?oe.linecolor:"rgba(0,0,0,0)")),B.ylines.attr("d",Se)}return v.makeClipPaths(k),t.previousPromises(k)}function A(k,O){return(k.ticks||k.showline)&&(O===k._mainSubplot||"all"===k.mirror||"allticks"===k.mirror)}function b(k,O,U){if(!U.showline||!U._lw)return!1;if("all"===U.mirror||"allticks"===U.mirror)return!0;var H=U._anchorAxis;if(!H)return!1;var j=p.FROM_BL[O];return U.side===O?H.domain[j]===k.domain[j]:U.mirror&&H.domain[1-j]===k.domain[1-j]}function c(k,O,U,H){if(b(k,O,U))return U._lw;for(var j=0;j<H.length;j++){var ee=H[j];if(ee._mainAxis===U._mainAxis&&b(k,O,ee))return ee._lw}return 0}function _(k){return"top"===k?p.CAP_SHIFT+.3+"em":"bottom"===k?"-0.3em":p.MID_SHIFT+"em"}K.layoutStyles=function(k){return T.syncOrAsync([t.doAutoMargin,d],k)},K.drawMainTitle=function(k){var O=k._fullLayout.title,U=k._fullLayout,H=function z(k){var O=k.title,U=h;return T.isRightAnchor(O)?U=g:T.isLeftAnchor(O)&&(U=x),U}(U),j=function D(k){var O=k.title,U="0em";return T.isTopAnchor(O)?U=p.CAP_SHIFT+"em":T.isMiddleAnchor(O)&&(U=p.MID_SHIFT+"em"),U}(U),ee=function F(k,O){var U=k.title,H=k._size,j=0;if("0em"!==O&&O?O===p.CAP_SHIFT+"em"&&(j=U.pad.t):j=-U.pad.b,"auto"===U.y)return H.t/2;if("paper"===U.yref)return H.t+H.h-H.h*U.y+j;return k.height-k.height*U.y+j}(U,j),W=function R(k,O){var U=k.title,H=k._size,j=0;if("paper"===(O===x?j=U.pad.l:O===g&&(j=-U.pad.r),U.xref))return H.l+H.w*U.x+j;return k.width*U.x+j}(U,H);if(r.draw(k,"gtitle",{propContainer:U,propName:"title.text",placeholder:U._dfltTitle.plot,attributes:{x:W,y:ee,"text-anchor":H,dy:j}}),O.text&&O.automargin){var B=M.selectAll(".gtitle"),te=a.bBox(B.node()).height,q=function E(k,O,U){var H=O.y,j=O.yanchor,ee=H>.5?"t":"b",W=k._fullLayout.margin[ee],B=0;return"paper"===O.yref?B=U+O.pad.t+O.pad.b:"container"===O.yref&&(B=function w(k,O,U,H,j){var ee=0;return"middle"===U&&(ee+=j/2),"t"===k?("top"===U&&(ee+=j),ee+=H-O*H):("bottom"===U&&(ee+=j),ee+=O*H),ee}(ee,H,j,k._fullLayout.height,U)+O.pad.t+O.pad.b),B>W?B:0}(k,O,te);if(q>0){(function P(k,O,U,H){var j="title.automargin",ee=k._fullLayout.title,W=ee.y>.5?"t":"b",B={x:ee.x,y:ee.y,t:0,b:0},te={};"paper"===ee.yref&&function S(k,O,U,H,j){var ee="paper"===O.yref?k._fullLayout._size.h:k._fullLayout.height,W=T.isTopAnchor(O)?H:H-j,B="b"===U?ee-W:W;return!(T.isTopAnchor(O)&&"t"===U||T.isBottomAnchor(O)&&"b"===U)&&B<j}(k,ee,W,O,H)?B[W]=U:"container"===ee.yref&&(te[W]=U,k._fullLayout._reservedMargin[j]=te),t.allowAutoMargin(k,j),t.autoMargin(k,j,B)})(k,ee,q,te),B.attr({x:W,y:ee,"text-anchor":H,dy:_(O.yanchor)}).call(n.positionText,W,ee);var oe=(O.text.match(n.BR_TAG_ALL)||[]).length;if(oe){var ie=p.LINE_SPACING*oe+p.MID_SHIFT;0===O.y&&(ie=-ie),B.selectAll(".line").each(function(){var V=+this.getAttribute("dy").slice(0,-2)-ie+"em";this.setAttribute("dy",V)})}}}},K.doTraceStyle=function(k){var H,O=k.calcdata,U=[];for(H=0;H<O.length;H++){var j=O[H],ee=j[0]||{},W=ee.trace||{},B=W._module||{},te=B.arraysToCalcdata;te&&te(j,W);var q=B.editStyle;q&&U.push({fn:q,cd0:ee})}if(U.length){for(H=0;H<U.length;H++){var oe=U[H];oe.fn(k,oe.cd0)}i(k),K.redrawReglTraces(k)}return t.style(k),I.getComponentMethod("legend","draw")(k),t.previousPromises(k)},K.doColorBars=function(k){return I.getComponentMethod("colorbar","draw")(k),t.previousPromises(k)},K.layoutReplot=function(k){var O=k.layout;return k.layout=void 0,I.call("_doPlot",k,"",O)},K.doLegend=function(k){return I.getComponentMethod("legend","draw")(k),t.previousPromises(k)},K.doTicksRelayout=function(k){return v.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(I.subplotsRegistry.splom.updateGrid(k),i(k),K.redrawReglTraces(k)),K.drawMainTitle(k),t.previousPromises(k)},K.doModeBar=function(k){var O=k._fullLayout;o.manage(k);for(var U=0;U<O._basePlotModules.length;U++){var H=O._basePlotModules[U].updateFx;H&&H(k)}return t.previousPromises(k)},K.doCamera=function(k){for(var O=k._fullLayout,U=O._subplots.gl3d,H=0;H<U.length;H++){var j=O[U[H]];j._scene.setViewport(j)}},K.drawData=function(k){var O=k._fullLayout;i(k);for(var U=O._basePlotModules,H=0;H<U.length;H++)U[H].plot(k);return K.redrawReglTraces(k),t.style(k),I.getComponentMethod("selections","draw")(k),I.getComponentMethod("shapes","draw")(k),I.getComponentMethod("annotations","draw")(k),I.getComponentMethod("images","draw")(k),O._replotting=!1,t.previousPromises(k)},K.redrawReglTraces=function(k){var O=k._fullLayout;if(O._has("regl")){var ee,W,U=k._fullData,H=[],j=[];for(O._hasOnlyLargeSploms&&O._splomGrid.draw(),ee=0;ee<U.length;ee++){var B=U[ee];!0===B.visible&&0!==B._length&&("splom"===B.type?O._splomScenes[B.uid].draw():"scattergl"===B.type?T.pushUnique(H,B.xaxis+B.yaxis):"scatterpolargl"===B.type&&T.pushUnique(j,B.subplot))}for(ee=0;ee<H.length;ee++)(W=O._plots[H[ee]])._scene&&W._scene.draw();for(ee=0;ee<j.length;ee++)(W=O[j[ee]]._subplot)._scene&&W._scene.draw()}},K.doAutoRangeAndConstraints=function(k){for(var U,O=v.list(k,"",!0),H={},j=0;j<O.length;j++)if(!H[(U=O[j])._id]){H[U._id]=1,y(k,U),s(k,U);var ee=U._matchGroup;if(ee)for(var W in ee){var B=v.getFromId(k,W);s(k,B,U.range),H[W]=1}}l(k)},K.finalDraw=function(k){I.getComponentMethod("rangeslider","draw")(k),I.getComponentMethod("rangeselector","draw")(k)},K.drawMarginPushers=function(k){I.getComponentMethod("legend","draw")(k),I.getComponentMethod("rangeselector","draw")(k),I.getComponentMethod("sliders","draw")(k),I.getComponentMethod("updatemenus","draw")(k),I.getComponentMethod("colorbar","draw")(k)}},43422:($,K,e)=>{"use strict";var M=e(5228),I=M.isPlainObject,t=e(55773),T=e(31556),n=e(82684),i=e(96906),u=e(16574).dfltConfig;function a(s,x){s=M.extendDeep({},s);var g,m,h=Object.keys(s).sort();function d(w,E,P){if(I(E)&&I(w))a(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var R=i.arrayTemplater({_template:s},P);for(m=0;m<E.length;m++){var F=E[m],_=R.newItem(F)._template;_&&a(_,F)}var z=R.defaultItems();for(m=0;m<z.length;m++)E.push(z[m]._template);for(m=0;m<E.length;m++)delete E[m].templateitemname}}for(g=0;g<h.length;g++){var A=h[g],b=s[A];if(A in x?d(b,x[A],A):x[A]=b,r(A)===A)for(var c in x){var S=r(c);c!==S&&S===A&&!(c in s)&&d(b,x[c],A)}}}function r(s){return s.replace(/[0-9]+$/,"")}function o(s,x,h,g,m){var d=m&&h(m);for(var A in s){var b=s[A],c=f(s,A,g),S=f(s,A,m),w=h(S);if(!w){var E=r(A);E!==A&&(w=h(S=f(s,E,m)))}if(!(d&&d===w||!w||w._noTemplating||"data_array"===w.valType||w.arrayOk&&Array.isArray(b)))if(!w.valType&&I(b))o(b,x,h,c,S);else if(w._isLinkedToArray&&Array.isArray(b))for(var P=!1,R=0,F={},_=0;_<b.length;_++){var z=b[_];if(I(z)){var D=z.name;if(D)F[D]||(o(z,x,h,f(b,R,c),f(b,R,S)),R++,F[D]=1);else if(!P){var O=f(s,i.arrayDefaultKey(A),g),U=f(b,R,c);o(z,x,h,U,f(b,R,S));var H=M.nestedProperty(x,U);M.nestedProperty(x,O).set(H.get()),H.set(null),P=!0}}}else{M.nestedProperty(x,c).set(b)}}}function v(s,x){return t.getLayoutValObject(s,M.nestedProperty({},x).parts)}function p(s,x){return t.getTraceValObject(s,M.nestedProperty({},x).parts)}function f(s,x,h){return h?Array.isArray(s)?h+"["+x+"]":h+"."+x:x}function l(s){for(var x=0;x<s.length;x++)if(I(s[x]))return!0}function y(s){var x;switch(s.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=s.path?"There are no templates for item "+s.path+" with name "+s.templateitemname:"There are no templates for trace "+s.index+", of type "+s.traceType+".";break;case"unused":x=s.path?"The template item at "+s.path+" was not used in constructing the plot.":s.dataCount?"Some of the templates of type "+s.traceType+" were not used. The template has "+s.templateCount+" traces, the data only has "+s.dataCount+" of this type.":"The template has "+s.templateCount+" traces of type "+s.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+s.traceType+" were used more than once. The template has "+s.templateCount+" traces, the data has "+s.dataCount+" of this type."}return s.msg=x,s}K.makeTemplate=function(s){s=M.isPlainObject(s)?s:M.getGraphDiv(s),s=M.extendDeep({_context:u},{data:s.data,layout:s.layout}),T.supplyDefaults(s);var x=s.data||[],h=s.layout||{};h._basePlotModules=s._fullLayout._basePlotModules,h._modules=s._fullLayout._modules;var g={data:{},layout:{}};x.forEach(function(R){var F={};o(R,F,p.bind(null,R));var _=M.coerce(R,{},n,"type"),z=g.data[_];z||(z=g.data[_]=[]),z.push(F)}),o(h,g.layout,v.bind(null,h)),delete g.layout.template;var m=h.template;if(I(m)){var A,b,c,S,w,E,d=m.layout;I(d)&&a(d,g.layout);var P=m.data;if(I(P)){for(b in g.data)if(c=P[b],Array.isArray(c)){for(E=(w=g.data[b]).length,S=c.length,A=0;A<E;A++)a(c[A%S],w[A]);for(A=E;A<S;A++)w.push(M.extendDeep({},c[A]))}for(b in P)b in g.data||(g.data[b]=M.extendDeep([],P[b]))}}return g},K.validateTemplate=function(s,x){var h=M.extendDeep({},{_context:u,data:s.data,layout:s.layout}),g=h.layout||{};I(x)||(x=g.template||{});var m=x.layout,d=x.data,A=[];h.layout=g,h.layout.template=x,T.supplyDefaults(h);var b=h._fullLayout,c=h._fullData,S={};if(I(m)?(function w(O,U){for(var H in O)if("_"!==H.charAt(0)&&I(O[H])){var W,j=r(H),ee=[];for(W=0;W<U.length;W++)ee.push(f(O,H,U[W])),j!==H&&ee.push(f(O,j,U[W]));for(W=0;W<ee.length;W++)S[ee[W]]=1;w(O[H],ee)}}(b,["layout"]),function E(O,U){for(var H in O)if(-1===H.indexOf("defaults")&&I(O[H])){var j=f(O,H,U);S[j]?E(O[H],j):A.push({code:"unused",path:j})}}(m,"layout")):A.push({code:"layout"}),I(d)){for(var R,P={},F=0;F<c.length;F++){var _=c[F];P[R=_.type]=(P[R]||0)+1,_._fullInput._template||A.push({code:"missing",index:_._fullInput.index,traceType:R})}for(R in d){var z=d[R].length,D=P[R]||0;z>D?A.push({code:"unused",traceType:R,templateCount:z,dataCount:D}):D>z&&A.push({code:"reused",traceType:R,templateCount:z,dataCount:D})}}else A.push({code:"data"});if(function k(O,U){for(var H in O)if("_"!==H.charAt(0)){var j=O[H],ee=f(O,H,U);I(j)?(Array.isArray(O)&&!1===j._template&&j.templateitemname&&A.push({code:"missing",path:ee,templateitemname:j.templateitemname}),k(j,ee)):Array.isArray(j)&&l(j)&&k(j,ee)}}({data:c,layout:b},""),A.length)return A.map(y)}},90212:($,K,e)=>{"use strict";var M=e(7347),I=e(98171),t=e(31556),T=e(5228),n=e(80307),i=e(30487),u=e(16617),a=e(60994).version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};$.exports=function o(v,p){var f,l,y,s;function x(D){return!(D in p)||T.validate(p[D],r[D])}if(p=p||{},T.isPlainObject(v)?(f=v.data||[],l=v.layout||{},y=v.config||{},s={}):(v=T.getGraphDiv(v),f=T.extendDeep([],v.data),l=T.extendDeep({},v.layout),y=v._context,s=v._fullLayout||{}),!x("width")&&null!==p.width||!x("height")&&null!==p.height)throw new Error("Height and width should be pixel values.");if(!x("format"))throw new Error("Export format is not "+T.join2(r.format.values,", "," or ")+".");var h={};function g(D,k){return T.coerce(p,h,r,D,k)}var m=g("format"),d=g("width"),A=g("height"),b=g("scale"),c=g("setBackground"),S=g("imageDataOnly"),w=document.createElement("div");w.style.position="absolute",w.style.left="-5000px",document.body.appendChild(w);var E=T.extendFlat({},l);d?E.width=d:null===p.width&&M(s.width)&&(E.width=s.width),A?E.height=A:null===p.height&&M(s.height)&&(E.height=s.height);var P=T.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:c}),R=n.getRedrawFunc(w);function F(){return new Promise(function(D){setTimeout(D,n.getDelay(w._fullLayout))})}function _(){return new Promise(function(D,k){var O=i(w,m,b),U=w._fullLayout.width,H=w._fullLayout.height;function j(){I.purge(w),document.body.removeChild(w)}if("full-json"===m){var ee=t.graphJson(w,!1,"keepdata","object",!0,!0);return ee.version=a,ee=JSON.stringify(ee),j(),D(S?ee:n.encodeJSON(ee))}if(j(),"svg"===m)return D(S?O:n.encodeSVG(O));var W=document.createElement("canvas");W.id=T.randstr(),u({format:m,width:U,height:H,scale:b,canvas:W,svg:O,promise:!0}).then(D).catch(k)})}return new Promise(function(D,k){I.newPlot(w,f,E,P).then(R).then(F).then(_).then(function(O){D(function z(D){return S?D.replace(n.IMAGE_URL_PREFIX,""):D}(O))}).catch(function(O){k(O)})})}},32355:($,K,e)=>{"use strict";var M=e(5228),I=e(31556),t=e(55773),T=e(16574).dfltConfig,n=M.isPlainObject,i=Array.isArray,u=M.isArrayOrTypedArray;function a(h,g,m,d,A,b){b=b||[];for(var c=Object.keys(h),S=0;S<c.length;S++){var w=c[S];if("transforms"!==w){var E=b.slice();E.push(w);var P=h[w],R=g[w],F=l(m,w),_=(F||{}).valType,z="info_array"===_,D="colorscale"===_,k=(F||{}).items;if(f(m,w))if(n(P)&&n(R)&&"any"!==_)a(P,R,F,d,A,E);else if(z&&i(P)){P.length>R.length&&d.push(p("unused",A,E.concat(R.length)));var H,j,ee,W,B,O=R.length,U=Array.isArray(k);if(U&&(O=Math.min(O,k.length)),2===F.dimensions)for(j=0;j<O;j++)if(i(P[j])){P[j].length>R[j].length&&d.push(p("unused",A,E.concat(j,R[j].length)));var te=R[j].length;for(H=0;H<(U?Math.min(te,k[j].length):te);H++)ee=U?k[j][H]:k,W=P[j][H],B=R[j][H],M.validate(W,ee)?B!==W&&B!==+W&&d.push(p("dynamic",A,E.concat(j,H),W,B)):d.push(p("value",A,E.concat(j,H),W))}else d.push(p("array",A,E.concat(j),P[j]));else for(j=0;j<O;j++)ee=U?k[j]:k,W=P[j],B=R[j],M.validate(W,ee)?B!==W&&B!==+W&&d.push(p("dynamic",A,E.concat(j),W,B)):d.push(p("value",A,E.concat(j),W))}else if(F.items&&!z&&i(P)){var ie,V,q=k[Object.keys(k)[0]],oe=[];for(ie=0;ie<R.length;ie++){var Y=R[ie]._index||ie;if((V=E.slice()).push(Y),n(P[Y])&&n(R[ie])){oe.push(Y);var ae=P[Y],X=R[ie];n(ae)&&!1!==ae.visible&&!1===X.visible?d.push(p("invisible",A,V)):a(ae,X,q,d,A,V)}}for(ie=0;ie<P.length;ie++)(V=E.slice()).push(ie),n(P[ie])?-1===oe.indexOf(ie)&&d.push(p("unused",A,V)):d.push(p("object",A,V,P[ie]))}else!n(P)&&n(R)?d.push(p("object",A,E,P)):u(P)||!u(R)||z||D?w in g?M.validate(P,F)?"enumerated"===F.valType&&(F.coerceNumber&&P!==+R||P!==R)&&d.push(p("dynamic",A,E,P,R)):d.push(p("value",A,E,P)):d.push(p("unused",A,E,P)):d.push(p("array",A,E,P));else d.push(p("schema",A,E))}}return d}function r(h,g){for(var m=h.layout.layoutAttributes,d=0;d<g.length;d++){var A=g[d],b=h.traces[A.type],c=b.layoutAttributes;c&&(A.subplot?M.extendFlat(m[b.attributes.subplot.dflt],c):M.extendFlat(m,c))}return m}$.exports=function(g,m){void 0===g&&(g=[]),void 0===m&&(m={});var c,S,d=t.get(),A=[],b={_context:M.extendFlat({},T)};i(g)?(b.data=M.extendDeep([],g),c=g):(b.data=[],c=[],A.push(p("array","data"))),n(m)?(b.layout=M.extendDeep({},m),S=m):(b.layout={},S={},arguments.length>1&&A.push(p("object","layout"))),I.supplyDefaults(b);for(var w=b._fullData,E=c.length,P=0;P<E;P++){var R=c[P],F=["data",P];if(n(R)){var _=w[P],z=_.type,D=d.traces[z].attributes;D.type={valType:"enumerated",values:[z]},!1===_.visible&&!1!==R.visible&&A.push(p("invisible",F)),a(R,_,D,A,F);var k=R.transforms,O=_.transforms;if(k){i(k)||A.push(p("array",F,["transforms"])),F.push("transforms");for(var U=0;U<k.length;U++){var H=["transforms",U],j=k[U].type;if(n(k[U])){var ee=d.transforms[j]?d.transforms[j].attributes:{};ee.type={valType:"enumerated",values:Object.keys(d.transforms)},a(k[U],O[U],ee,A,F,H)}else A.push(p("object",F,H))}}}else A.push(p("object",F))}var W=b._fullLayout,B=r(d,w);return a(S,W,B,A,"layout"),0===A.length?void 0:A};var o={object:function(h,g){return("layout"===h&&""===g?"The layout argument":"data"===h[0]&&""===g?"Trace "+h[1]+" in the data argument":v(h)+"key "+g)+" must be linked to an object container"},array:function(h,g){return("data"===h?"The data argument":v(h)+"key "+g)+" must be linked to an array container"},schema:function(h,g){return v(h)+"key "+g+" is not part of the schema"},unused:function(h,g,m){var d=n(m)?"container":"key";return v(h)+d+" "+g+" did not get coerced"},dynamic:function(h,g,m,d){return[v(h)+"key",g,"(set to '"+m+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(h,g){return(g?v(h)+"item "+g:"Trace "+h[1])+" got defaulted to be not visible"},value:function(h,g,m){return[v(h)+"key "+g,"is set to an invalid value ("+m+")"].join(" ")}};function v(h){return i(h)?"In data trace "+h[1]+", ":"In "+h+", "}function p(h,g,m,d,A){var b,c;m=m||"",i(g)?(b=g[0],c=g[1]):(b=g,c=null);var S=function x(h){if(!i(h))return String(h);for(var g="",m=0;m<h.length;m++){var d=h[m];"number"==typeof d?g=g.substr(0,g.length-1)+"["+d+"]":g+=d,m<h.length-1&&(g+=".")}return g}(m),w=o[h](g,S,d,A);return M.log(w),{code:h,container:b,trace:c,path:m,astr:S,msg:w}}function f(h,g){var m=s(g),d=m.keyMinusId,A=m.id;return!!(d in h&&h[d]._isSubplotObj&&A)||g in h}function l(h,g){return g in h?h[g]:h[s(g).keyMinusId]}var y=M.counterRegex("([a-z]+)");function s(h){var g=h.match(y);return{keyMinusId:g&&g[1],id:g&&g[2]}}},87889:$=>{"use strict";$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}}},84322:($,K,e)=>{"use strict";var M=e(5228),I=e(96906);$.exports=function(T,n,i){var f,l,u=i.name,a=i.inclusionAttr||"visible",r=n[u],o=M.isArrayOrTypedArray(T[u])?T[u]:[],v=n[u]=[],p=I.arrayTemplater(n,u,a);for(f=0;f<o.length;f++){var y=o[f];M.isPlainObject(y)?l=p.newItem(y):(l=p.newItem({}))[a]=!1,l._index=f,!1!==l[a]&&i.handleItemDefaults(y,l,n,i),v.push(l)}var s=p.defaultItems();for(f=0;f<s.length;f++)(l=s[f])._index=v.length,i.handleItemDefaults({},l,n,i,{}),v.push(l);if(M.isArrayOrTypedArray(r)){var x=Math.min(r.length,v.length);for(f=0;f<x;f++)M.relinkPrivateKeys(v[f],r[f])}return v}},82684:($,K,e)=>{"use strict";var M=e(47297),I=e(44777);$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legend:{valType:"subplotid",dflt:"legend",editType:"style",description:["Sets the reference to a legend to show this trace in.","References to these legends are *legend*, *legend2*, *legend3*, etc.","Settings for these legends are set in the layout, under","`layout.legend`, `layout.legend2`, etc."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces and shapes part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:M({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with *reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items.","When having unranked or equal rank items shapes would be displayed after traces","i.e. according to their order in data and layout."].join(" ")},legendwidth:{valType:"number",min:0,editType:"style",description:"Sets the width (in px or fraction) of the legend for this trace."},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appears as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:I.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}}},62311:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=I.dateTime2ms,T=I.incrementMonth,i=e(71103).ONEAVGMONTH;$.exports=function(a,r,o,v){if("date"!==r.type)return{vals:v};var p=a[o+"periodalignment"];if(!p)return{vals:v};var l,f=a[o+"period"];if(M(f)){if((f=+f)<=0)return{vals:v}}else if("string"==typeof f&&"M"===f.charAt(0)){var y=+f.substring(1);if(!(y>0&&Math.round(y)===y))return{vals:v};l=y}for(var s=r.calendar,x="start"===p,h="end"===p,g=a[o+"period0"],m=t(g,s)||0,d=[],A=[],b=[],c=v.length,S=0;S<c;S++){var E,P,R,w=v[S];if(l){for(E=Math.round((w-m)/(l*i)),R=T(m,l*E,s);R>w;)R=T(R,-l,s);for(;R<=w;)R=T(R,l,s);P=T(R,-l,s)}else{for(R=m+(E=Math.round((w-m)/f))*f;R>w;)R-=f;for(;R<=w;)R+=f;P=R-f}d[S]=x?P:h?R:(P+R)/2,A[S]=P,b[S]=R}return{vals:d,starts:A,ends:b}}},91674:$=>{"use strict";$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}}},73332:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(5228),T=e(71103).FP_SAFE,n=e(97799),i=e(27630),u=e(78168),a=u.getFromId,r=u.isLinked;function o(P,R){var F,_,z=[],D=P._fullLayout,k=p(D,R,0),O=p(D,R,1),U=y(P,R),H=U.min,j=U.max;if(0===H.length||0===j.length)return t.simpleMap(R.range,R.r2l);var ee=H[0].val,W=j[0].val;for(F=1;F<H.length&&ee===W;F++)ee=Math.min(ee,H[F].val);for(F=1;F<j.length&&ee===W;F++)W=Math.max(W,j[F].val);var B=R.autorange,te="reversed"===B||"min reversed"===B||"max reversed"===B;if(!te&&R.range){var q=t.simpleMap(R.range,R.r2l);te=q[1]<q[0]}"reversed"===R.autorange&&(R.autorange=!0);var J,ue,re,ne,se,de,oe=R.rangemode,ie="tozero"===oe,V="nonnegative"===oe,Y=R._length,ae=Y/10,X=0;for(F=0;F<H.length;F++)for(J=H[F],_=0;_<j.length;_++)(de=(ue=j[_]).val-J.val-v(R,J.val,ue.val))>0&&((se=Y-k(J)-O(ue))>ae?de/se>X&&(re=J,ne=ue,X=de/se):de/Y>X&&(re={val:J.val,nopad:1},ne={val:ue.val,nopad:1},X=de/Y));if(ee===W){var De=ee-1,_e=ee+1;if(ie)if(0===ee)z=[0,1];else{var Ce=(ee>0?j:H).reduce(function be(Fe,ke){return Math.max(Fe,O(ke))},0),Le=ee/(1-Math.min(.5,Ce/Y));z=ee>0?[0,Le]:[Le,0]}else z=V?[Math.max(0,De),Math.max(1,_e)]:[De,_e]}else ie?(re.val>=0&&(re={val:0,nopad:1}),ne.val<=0&&(ne={val:0,nopad:1})):V&&(re.val-X*k(re)<0&&(re={val:0,nopad:1}),ne.val<=0&&(ne={val:1,nopad:1})),X=(ne.val-re.val-v(R,J.val,ue.val))/(Y-k(re)-O(ne)),z=[re.val-X*k(re),ne.val+X*O(ne)];return z=E(z,R),R.limitRange&&R.limitRange(),te&&z.reverse(),t.simpleMap(z,R.l2r||Number)}function v(P,R,F){var _=0;if(P.rangebreaks)for(var z=P.locateBreaks(R,F),D=0;D<z.length;D++){var k=z[D];_+=k.max-k.min}return _}function p(P,R,F){var _=.05*R._length,z=R._anchorAxis||{};if(-1!==(R.ticklabelposition||"").indexOf("inside")||-1!==(z.ticklabelposition||"").indexOf("inside")){var D=R.isReversed();if(!D){var k=t.simpleMap(R.range,R.r2l);D=k[1]<k[0]}D&&(F=!F)}var O=0;return r(P,R._id)||(O=function l(P,R,F){var _=0,z="x"===R._id.charAt(0);for(var D in P._plots){var k=P._plots[D];if(R._id===k.xaxis._id||R._id===k.yaxis._id){var O=(z?k.yaxis:k.xaxis)||{};if(-1!==(O.ticklabelposition||"").indexOf("inside")&&(!F&&("left"===O.side||"bottom"===O.side)||F&&("top"===O.side||"right"===O.side))){if(O._vals){var U=t.deg2rad(O._tickAngles[O._id+"tick"]||0),H=Math.abs(Math.cos(U)),j=Math.abs(Math.sin(U));if(!O._vals[0].bb){var ee=O._id+"tick";O._selections[ee].each(function(V){var Y=M.select(this);Y.select(".text-math-group").empty()&&(V.bb=i.bBox(Y.node()))})}for(var B=0;B<O._vals.length;B++){var q=O._vals[B].bb;if(q){var oe=6+q.width,ie=6+q.height;_=Math.max(_,z?Math.max(oe*H,ie*j):Math.max(ie*H,oe*j))}}}"inside"===O.ticks&&"inside"===O.ticklabelposition&&(_+=O.ticklen||0)}}}return _}(P,R,F)),_=Math.max(O,_),"domain"===R.constrain&&R._inputDomain&&(_*=(R._inputDomain[1]-R._inputDomain[0])/(R.domain[1]-R.domain[0])),function(H){return H.nopad?0:H.pad+(H.extrapad?_:O)}}$.exports={applyAutorangeOptions:E,getAutoRange:o,makePadFn:p,doAutoRange:function s(P,R,F){if(R.setScale(),R.autorange){R.range=F?F.slice():o(P,R),R._r=R.range.slice(),R._rl=t.simpleMap(R._r,R.r2l);var _=R._input,z={};z[R._attr+".range"]=R.range,z[R._attr+".autorange"]=R.autorange,n.call("_storeDirectGUIEdit",P.layout,P._fullLayout._preGUI,z),_.range=R.range.slice(),_.autorange=R.autorange}var D=R._anchorAxis;if(D&&D.rangeslider){var k=D.rangeslider[R._name];k&&"auto"===k.rangemode&&(k.range=o(P,R)),D._input.rangeslider[R._name]=t.extendFlat({},k)}},findExtremes:function x(P,R,F){F||(F={}),P._m||P.setScale();var ee,W,B,te,q,oe,ie,V,Y,_=[],z=[],D=R.length,k=F.padded||!1,O=F.tozero&&("linear"===P.type||"-"===P.type),U="log"===P.type,H=!1,j=F.vpadLinearized||!1;function ae(be){if(Array.isArray(be))return H=!0,function(_e){return Math.max(Number(be[_e]||0),0)};var De=Math.max(Number(be||0),0);return function(){return De}}var X=ae((P._m>0?F.ppadplus:F.ppadminus)||F.ppad||0),J=ae((P._m>0?F.ppadminus:F.ppadplus)||F.ppad||0),ue=ae(F.vpadplus||F.vpad),re=ae(F.vpadminus||F.vpad);if(!H){if(V=1/0,Y=-1/0,U)for(ee=0;ee<D;ee++)(W=R[ee])<V&&W>0&&(V=W),W>Y&&W<T&&(Y=W);else for(ee=0;ee<D;ee++)(W=R[ee])<V&&W>-T&&(V=W),W>Y&&W<T&&(Y=W);R=[V,Y],D=2}var ne={tozero:O,extrapad:k};function se(be){B=R[be],I(B)&&(oe=X(be),ie=J(be),j?(te=P.c2l(B)-re(be),q=P.c2l(B)+ue(be)):(V=B-re(be),Y=B+ue(be),U&&V<Y/10&&(V=Y/10),te=P.c2l(V),q=P.c2l(Y)),O&&(te=Math.min(0,te),q=Math.max(0,q)),d(te)&&h(_,te,ie,ne),d(q)&&g(z,q,oe,ne))}var de=Math.min(6,D);for(ee=0;ee<de;ee++)se(ee);for(ee=D-1;ee>=de;ee--)se(ee);return{min:_,max:z,opts:F}},concatExtremes:y};function y(P,R,F){var U,H,j,_=R._id,z=P._fullData,D=P._fullLayout,k=[],O=[];function ee(oe,ie){for(U=0;U<ie.length;U++){var V=oe[ie[U]],Y=(V._extremes||{})[_];if(!0===V.visible&&Y){for(H=0;H<Y.min.length;H++)j=Y.min[H],h(k,j.val,j.pad,{extrapad:j.extrapad});for(H=0;H<Y.max.length;H++)j=Y.max[H],g(O,j.val,j.pad,{extrapad:j.extrapad})}}}if(ee(z,R._traceIndices),ee(D.annotations||[],R._annIndices||[]),ee(D.shapes||[],R._shapeIndices||[]),R._matchGroup&&!F)for(var W in R._matchGroup)if(W!==R._id){var B=a(P,W),te=y(P,B,!0),q=R._length/B._length;for(H=0;H<te.min.length;H++)j=te.min[H],h(k,j.val,j.pad*q,{extrapad:j.extrapad});for(H=0;H<te.max.length;H++)j=te.max[H],g(O,j.val,j.pad*q,{extrapad:j.extrapad})}return{min:k,max:O}}function h(P,R,F,_){m(P,R,F,_,A)}function g(P,R,F,_){m(P,R,F,_,b)}function m(P,R,F,_,z){for(var D=_.tozero,k=_.extrapad,O=!0,U=0;U<P.length&&O;U++){var H=P[U];if(z(H.val,R)&&H.pad>=F&&(H.extrapad||!k)){O=!1;break}z(R,H.val)&&H.pad<=F&&(k||!H.extrapad)&&(P.splice(U,1),U--)}if(O){var j=D&&0===R;P.push({val:R,pad:j?0:F,extrapad:!j&&k})}}function d(P){return I(P)&&Math.abs(P)<T}function A(P,R){return P<=R}function b(P,R){return P>=R}function w(P,R,F){return void 0===R||void 0===F||(R=P.d2l(R))<(F=P.d2l(F))}function E(P,R){if(!R||!R.autorangeoptions)return P;var F=P[0],_=P[1],z=R.autorangeoptions.include;if(void 0!==z){var D=R.d2l(F),k=R.d2l(_);t.isArrayOrTypedArray(z)||(z=[z]);for(var O=0;O<z.length;O++){var U=R.d2l(z[O]);D>=U&&(D=U,F=U),k<=U&&(k=U,_=U)}}return F=function c(P,R){var F=R.autorangeoptions;return F&&void 0!==F.minallowed&&w(R,F.minallowed,F.maxallowed)?F.minallowed:F&&void 0!==F.clipmin&&w(R,F.clipmin,F.clipmax)?Math.max(P,R.d2l(F.clipmin)):P}(F,R),_=function S(P,R){var F=R.autorangeoptions;return F&&void 0!==F.maxallowed&&w(R,F.minallowed,F.maxallowed)?F.maxallowed:F&&void 0!==F.clipmax&&w(R,F.clipmin,F.clipmax)?Math.min(P,R.d2l(F.clipmax)):P}(_,R),[F,_]}},32044:$=>{"use strict";$.exports=function(e,M,I){var t,T;if(I){var n="reversed"===M||"min reversed"===M||"max reversed"===M;t=I[n?1:0],T=I[n?0:1]}var i=e("autorangeoptions.minallowed",null===T?t:void 0),u=e("autorangeoptions.maxallowed",null===t?T:void 0);void 0===i&&e("autorangeoptions.clipmin"),void 0===u&&e("autorangeoptions.clipmax"),e("autorangeoptions.include")}},91464:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(31556),T=e(97799),n=e(5228),i=n.strTranslate,u=e(88565),a=e(77875),r=e(8416),o=e(27630),v=e(38330),p=e(62239),f=e(71103),l=f.ONEMAXYEAR,y=f.ONEAVGYEAR,s=f.ONEMINYEAR,x=f.ONEMAXQUARTER,h=f.ONEAVGQUARTER,g=f.ONEMINQUARTER,m=f.ONEMAXMONTH,d=f.ONEAVGMONTH,A=f.ONEMINMONTH,b=f.ONEWEEK,c=f.ONEDAY,S=c/2,w=f.ONEHOUR,E=f.ONEMIN,P=f.ONESEC,R=f.MINUS_SIGN,F=f.BADNUM,_={K:"zeroline"},z={K:"gridline",L:"path"},D={K:"minor-gridline",L:"path"},k={K:"tick",L:"path"},O={K:"tick",L:"text"},U={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},H=e(94598),j=H.MID_SHIFT,ee=H.CAP_SHIFT,W=H.LINE_SPACING,B=H.OPPOSITE_SIDE,q=$.exports={};q.setConvert=e(49704);var oe=e(30640),ie=e(78168),V=ie.idSort,Y=ie.isLinked;q.id2name=ie.id2name,q.name2id=ie.name2id,q.cleanId=ie.cleanId,q.list=ie.list,q.listIds=ie.listIds,q.getFromId=ie.getFromId,q.getFromTrace=ie.getFromTrace;var ae=e(73332);q.getAutoRange=ae.getAutoRange,q.findExtremes=ae.findExtremes;function J(Ke){var We=1e-4*(Ke[1]-Ke[0]);return[Ke[0]-We,Ke[1]+We]}q.coerceRef=function(Ke,We,Jt,Gt,hr,br){var Ut=Gt.charAt(Gt.length-1),Kt=Jt._fullLayout._subplots[Ut+"axis"],wt=Gt+"ref",xr={};return hr||(hr=Kt[0]||("string"==typeof br?br:br[0])),br||(br=hr),Kt=Kt.concat(Kt.map(function(Ir){return Ir+" domain"})),xr[wt]={valType:"enumerated",values:Kt.concat(br?"string"==typeof br?[br]:br:[]),dflt:hr},n.coerce(Ke,We,xr,wt)},q.getRefType=function(Ke){return void 0===Ke?Ke:"paper"===Ke?"paper":"pixel"===Ke?"pixel":/( domain)$/.test(Ke)?"domain":"range"},q.coercePosition=function(Ke,We,Jt,Gt,hr,br){var Ut,Kt;if("range"!==q.getRefType(Gt))Ut=n.ensureNumber,Kt=Jt(hr,br);else{var xr=q.getFromId(We,Gt);Kt=Jt(hr,br=xr.fraction2r(br)),Ut=xr.cleanPos}Ke[hr]=Ut(Kt)},q.cleanPosition=function(Ke,We,Jt){return("paper"===Jt||"pixel"===Jt?n.ensureNumber:q.getFromId(We,Jt).cleanPos)(Ke)},q.redrawComponents=function(Ke,We){We=We||q.listIds(Ke);var Jt=Ke._fullLayout;function Gt(hr,br,Ut,Kt){for(var wt=T.getComponentMethod(hr,br),xr={},Ir=0;Ir<We.length;Ir++)for(var qt=Jt[q.id2name(We[Ir])][Ut],on=0;on<qt.length;on++){var an=qt[on];if(!xr[an]&&(wt(Ke,an),xr[an]=1,Kt))return}}Gt("annotations","drawOne","_annIndices"),Gt("shapes","drawOne","_shapeIndices"),Gt("images","draw","_imgIndices",!0),Gt("selections","drawOne","_selectionIndices")};var ue=q.getDataConversions=function(Ke,We,Jt,Gt){var hr,br="x"===Jt||"y"===Jt||"z"===Jt?Jt:Gt;if(n.isArrayOrTypedArray(br)){if(hr={type:oe(Gt,void 0,{autotypenumbers:Ke._fullLayout.autotypenumbers}),_categories:[]},q.setConvert(hr),"category"===hr.type)for(var Ut=0;Ut<Gt.length;Ut++)hr.d2c(Gt[Ut])}else hr=q.getFromTrace(Ke,We,br);return hr?{d2c:hr.d2c,c2d:hr.c2d}:"ids"===br?{d2c:ne,c2d:ne}:{d2c:re,c2d:re}};function re(Ke){return+Ke}function ne(Ke){return String(Ke)}function be(Ke,We){return Math.abs((Ke/We+.5)%1-.5)<.001}function De(Ke,We){return Math.abs(Ke/We-1)<.001}function _e(Ke){return+Ke.substring(1)}function Fe(Ke,We){return Ke.rangebreaks&&(We=We.filter(function(Jt){return Ke.maskBreaks(Jt.x)!==F})),We}function ke(Ke){var We=Ke._mainAxis,Jt=[];if(We._vals)for(var Gt=0;Gt<We._vals.length;Gt++)if(!We._vals[Gt].noTick){var hr=We.l2p(We._vals[Gt].x),br=Ke.p2l(hr),Ut=q.tickText(Ke,br);We._vals[Gt].minor&&(Ut.minor=!0,Ut.text=""),Jt.push(Ut)}return Jt=Fe(Ke,Jt)}function ze(Ke,We){var Gt=J(n.simpleMap(Ke.range,Ke.r2l)),hr=Math.min(Gt[0],Gt[1]),br=Math.max(Gt[0],Gt[1]),Ut="category"===Ke.type?Ke.d2l_noadd:Ke.d2l;"log"===Ke.type&&"L"!==String(Ke.dtick).charAt(0)&&(Ke.dtick="L"+Math.pow(10,Math.floor(Math.min(Ke.range[0],Ke.range[1]))-1));for(var Kt=[],wt=0;wt<=1;wt++)if((void 0===We||!(We&&wt||!1===We&&!wt))&&(!wt||Ke.minor)){var xr=wt?Ke.minor.tickvals:Ke.tickvals,Ir=wt?[]:Ke.ticktext;if(xr){n.isArrayOrTypedArray(Ir)||(Ir=[]);for(var Ur=0;Ur<xr.length;Ur++){var qt=Ut(xr[Ur]);if(qt>hr&&qt<br){var on=void 0===Ir[Ur]?q.tickText(Ke,qt):Bt(Ke,qt,String(Ir[Ur]));wt&&(on.minor=!0,on.text=""),Kt.push(on)}}}}return Kt=Fe(Ke,Kt)}q.getDataToCoordFunc=function(Ke,We,Jt,Gt){return ue(Ke,We,Jt,Gt).d2c},q.counterLetter=function(Ke){var We=Ke.charAt(0);return"x"===We?"y":"y"===We?"x":void 0},q.minDtick=function(Ke,We,Jt,Gt){-1===["log","category","multicategory"].indexOf(Ke.type)&&Gt?void 0===Ke._minDtick?(Ke._minDtick=We,Ke._forceTick0=Jt):Ke._minDtick&&((Ke._minDtick/We+1e-6)%1<2e-6&&((Jt-Ke._forceTick0)/We%1+1.000001)%1<2e-6?(Ke._minDtick=We,Ke._forceTick0=Jt):((We/Ke._minDtick+1e-6)%1>2e-6||((Jt-Ke._forceTick0)/Ke._minDtick%1+1.000001)%1>2e-6)&&(Ke._minDtick=0)):Ke._minDtick=0},q.saveRangeInitial=function(Ke,We){for(var Jt=q.list(Ke,"",!0),Gt=!1,hr=0;hr<Jt.length;hr++){var br=Jt[hr],Ut=void 0===br._rangeInitial0&&void 0===br._rangeInitial1,Kt=Ut||br.range[0]!==br._rangeInitial0||br.range[1]!==br._rangeInitial1,wt=br.autorange;(Ut&&!0!==wt||We&&Kt)&&(br._rangeInitial0="min"===wt||"max reversed"===wt?void 0:br.range[0],br._rangeInitial1="max"===wt||"min reversed"===wt?void 0:br.range[1],br._autorangeInitial=wt,Gt=!0)}return Gt},q.saveShowSpikeInitial=function(Ke,We){for(var Jt=q.list(Ke,"",!0),Gt=!1,hr="on",br=0;br<Jt.length;br++){var Ut=Jt[br],Kt=void 0===Ut._showSpikeInitial,wt=Kt||Ut.showspikes!==Ut._showspikes;(Kt||We&&wt)&&(Ut._showSpikeInitial=Ut.showspikes,Gt=!0),"on"===hr&&!Ut.showspikes&&(hr="off")}return Ke._fullLayout._cartesianSpikesEnabled=hr,Gt},q.autoBin=function(Ke,We,Jt,Gt,hr,br){var wt,Ut=n.aggNums(Math.min,null,Ke),Kt=n.aggNums(Math.max,null,Ke);if("category"===We.type||"multicategory"===We.type)return{start:Ut-.5,end:Kt+.5,size:Math.max(1,Math.round(br)||1),_dataSpan:Kt-Ut};if(hr||(hr=We.calendar),wt="log"===We.type?{type:"linear",range:[Ut,Kt]}:{type:We.type,range:n.simpleMap([Ut,Kt],We.c2r,0,hr),calendar:hr},q.setConvert(wt),br=br&&p.dtick(br,wt.type))wt.dtick=br,wt.tick0=p.tick0(void 0,wt.type,hr);else{var xr;if(Jt)xr=(Kt-Ut)/Jt;else{var Ir=n.distinctVals(Ke),Ur=Math.pow(10,Math.floor(Math.log(Ir.minDiff)/Math.LN10)),qt=Ur*n.roundUp(Ir.minDiff/Ur,[.9,1.9,4.9,9.9],!0);xr=Math.max(qt,2*n.stdev(Ke)/Math.pow(Ke.length,Gt?.25:.4)),I(xr)||(xr=1)}q.autoTicks(wt,xr)}var hn,on=wt.dtick,an=q.tickIncrement(q.tickFirst(wt),on,"reverse",hr);if("number"==typeof on)an=function se(Ke,We,Jt,Gt,hr){var br=0,Ut=0,Kt=0,wt=0;function xr(on){return(1+100*(on-Ke)/Jt.dtick)%100<2}for(var Ir=0;Ir<We.length;Ir++)We[Ir]%1==0?Kt++:I(We[Ir])||wt++,xr(We[Ir])&&br++,xr(We[Ir]+Jt.dtick/2)&&Ut++;var Ur=We.length-wt;if(Kt===Ur&&"date"!==Jt.type)Jt.dtick<1?Ke=Gt-.5*Jt.dtick:(Ke-=.5,Ke+Jt.dtick<Gt&&(Ke+=Jt.dtick));else if(Ut<.1*Ur&&(br>.3*Ur||xr(Gt)||xr(hr))){var qt=Jt.dtick/2;Ke+=Ke+qt<Gt?qt:-qt}return Ke}(an,Ke,wt,Ut,Kt),hn=an+(1+Math.floor((Kt-an)/on))*on;else for("M"===wt.dtick.charAt(0)&&(an=function de(Ke,We,Jt,Gt,hr){var br=n.findExactDates(We,hr),Ut=.8;if(br.exactDays>Ut){var Kt=Number(Jt.substr(1));br.exactYears>Ut&&Kt%12==0?Ke=q.tickIncrement(Ke,"M6","reverse")+1.5*c:br.exactMonths>Ut?Ke=q.tickIncrement(Ke,"M1","reverse")+15.5*c:Ke-=S;var wt=q.tickIncrement(Ke,Jt);if(wt<=Gt)return wt}return Ke}(an,Ke,on,Ut,hr)),hn=an,0;hn<=Kt;)hn=q.tickIncrement(hn,on,!1,hr);return{start:We.c2r(an,0,hr),end:We.c2r(hn,0,hr),size:on,_dataSpan:Kt-Ut}},q.prepMinorTicks=function(Ke,We,Jt){if(!We.minor.dtick){delete Ke.dtick;var hr,Gt=We.dtick&&I(We._tmin);if(Gt){var br=q.tickIncrement(We._tmin,We.dtick,!0);hr=[We._tmin,.99*br+.01*We._tmin]}else{var Ut=n.simpleMap(We.range,We.r2l);hr=[Ut[0],.8*Ut[0]+.2*Ut[1]]}if(Ke.range=n.simpleMap(hr,We.l2r),Ke._isMinor=!0,q.prepTicks(Ke,Jt),Gt){var Kt=I(We.dtick),wt=I(Ke.dtick),xr=Kt?We.dtick:+We.dtick.substring(1),Ir=wt?Ke.dtick:+Ke.dtick.substring(1);Kt&&wt?be(xr,Ir)?xr===2*b&&Ir===2*c&&(Ke.dtick=b):xr===2*b&&Ir===3*c?Ke.dtick=b:xr!==b||(We._input.minor||{}).nticks?De(xr/Ir,2.5)?Ke.dtick=xr/2:Ke.dtick=xr:Ke.dtick=c:"M"===String(We.dtick).charAt(0)?wt?Ke.dtick="M1":be(xr,Ir)?xr>=12&&2===Ir&&(Ke.dtick="M3"):Ke.dtick=We.dtick:"L"===String(Ke.dtick).charAt(0)?"L"===String(We.dtick).charAt(0)?be(xr,Ir)||(Ke.dtick=De(xr/Ir,2.5)?We.dtick/2:We.dtick):Ke.dtick="D1":"D2"===Ke.dtick&&+We.dtick>1&&(Ke.dtick=1)}Ke.range=We.range}void 0===We.minor._tick0Init&&(Ke.tick0=We.tick0)},q.prepTicks=function(Ke,We){var Jt=n.simpleMap(Ke.range,Ke.r2l,void 0,void 0,We);if("auto"===Ke.tickmode||!Ke.dtick){var hr,Gt=Ke.nticks;Gt||("category"===Ke.type||"multicategory"===Ke.type?(hr=Ke.tickfont?n.bigFont(Ke.tickfont.size||12):15,Gt=Ke._length/hr):(hr="y"===Ke._id.charAt(0)?40:80,Gt=n.constrain(Ke._length/hr,4,9)+1),"radialaxis"===Ke._name&&(Gt*=2)),Ke.minor&&"array"!==Ke.minor.tickmode||"array"===Ke.tickmode&&(Gt*=100),Ke._roughDTick=Math.abs(Jt[1]-Jt[0])/Gt,q.autoTicks(Ke,Ke._roughDTick),Ke._minDtick>0&&Ke.dtick<2*Ke._minDtick&&(Ke.dtick=Ke._minDtick,Ke.tick0=Ke.l2r(Ke._forceTick0))}"period"===Ke.ticklabelmode&&function Ce(Ke){var We;function Jt(){return!(I(Ke.dtick)||"M"!==Ke.dtick.charAt(0))}var Gt=Jt(),hr=q.getTickFormat(Ke);if(hr){var br=Ke._dtickInit!==Ke.dtick;/%[fLQsSMX]/.test(hr)||(/%[HI]/.test(hr)?(We=w,br&&!Gt&&Ke.dtick<w&&(Ke.dtick=w)):/%p/.test(hr)?(We=S,br&&!Gt&&Ke.dtick<S&&(Ke.dtick=S)):/%[Aadejuwx]/.test(hr)?(We=c,br&&!Gt&&Ke.dtick<c&&(Ke.dtick=c)):/%[UVW]/.test(hr)?(We=b,br&&!Gt&&Ke.dtick<b&&(Ke.dtick=b)):/%[Bbm]/.test(hr)?(We=d,br&&(Gt?_e(Ke.dtick)<1:Ke.dtick<A)&&(Ke.dtick="M1")):/%[q]/.test(hr)?(We=h,br&&(Gt?_e(Ke.dtick)<3:Ke.dtick<g)&&(Ke.dtick="M3")):/%[Yy]/.test(hr)&&(We=y,br&&(Gt?_e(Ke.dtick)<12:Ke.dtick<s)&&(Ke.dtick="M12")))}Gt=Jt(),Gt&&Ke.tick0===Ke._dowTick0&&(Ke.tick0=Ke._rawTick0),Ke._definedDelta=We}(Ke),Ke.tick0||(Ke.tick0="date"===Ke.type?"2000-01-01":0),"date"===Ke.type&&Ke.dtick<.1&&(Ke.dtick=.1),mt(Ke)},q.calcTicks=function(We,Jt){for(var Gt=We.type,hr=We.calendar,br=We.ticklabelstep,Ut="period"===We.ticklabelmode,Kt=n.simpleMap(We.range,We.r2l,void 0,void 0,Jt),wt=Kt[1]<Kt[0],xr=Math.min(Kt[0],Kt[1]),Ir=Math.max(Kt[0],Kt[1]),Ur=Math.max(1e3,We._length||0),qt=[],on=[],an=[],hn=[],An=We.minor&&(We.minor.ticks||We.minor.showgrid),Sn=1;Sn>=(An?0:1);Sn--){var sa=!Sn;Sn?(We._dtickInit=We.dtick,We._tick0Init=We.tick0):(We.minor._dtickInit=We.minor.dtick,We.minor._tick0Init=We.minor.tick0);var Rn=Sn?We:n.extendFlat({},We,We.minor);if(sa?q.prepMinorTicks(Rn,We,Jt):q.prepTicks(Rn,Jt),"array"!==Rn.tickmode)if("sync"!==Rn.tickmode){var Yr=J(Kt),vr=Yr[0],nn=Yr[1],Or=I(Rn.dtick),Xn="log"===Gt&&!(Or||"L"===Rn.dtick.charAt(0)),Vr=q.tickFirst(Rn,Jt);if(Sn){if(We._tmin=Vr,Vr<vr!==wt)break;("category"===Gt||"multicategory"===Gt)&&(nn=wt?Math.max(-.5,nn):Math.min(We._categories.length-.5,nn))}var Ba,Ka,wn=null,Ca=Vr;if(Sn)Or?Ka=We.dtick:"date"===Gt?"string"==typeof We.dtick&&"M"===We.dtick.charAt(0)&&(Ka=d*We.dtick.substring(1)):Ka=We._roughDTick,Ba=Math.round((We.r2l(Ca)-We.r2l(We.tick0))/Ka)-1;var Ja=Rn.dtick;for(Rn.rangebreaks&&Rn._tick0Init!==Rn.tick0&&(Ca=tr(Ca,We),wt||(Ca=q.tickIncrement(Ca,Ja,!wt,hr))),Sn&&Ut&&(Ca=q.tickIncrement(Ca,Ja,!wt,hr),Ba--);wt?Ca>=nn:Ca<=nn;Ca=q.tickIncrement(Ca,Ja,wt,hr)){if(Sn&&Ba++,Rn.rangebreaks&&!wt){if(Ca<vr)continue;if(Rn.maskBreaks(Ca)===F&&tr(Ca,Rn)>=Ir)break}if(an.length>Ur||Ca===wn)break;wn=Ca;var si={value:Ca};Sn?(Xn&&Ca!==(0|Ca)&&(si.simpleLabel=!0),br>1&&Ba%br&&(si.skipLabel=!0),an.push(si)):(si.minor=!0,hn.push(si))}}else an=[],qt=ke(We);else Sn?(an=[],qt=ze(We,!sa)):(hn=[],on=ze(We,!sa))}var Ii;if(An&&!("inside"===We.minor.ticks&&"outside"===We.ticks||"outside"===We.minor.ticks&&"inside"===We.ticks)){for(var Na=an.map(function(oo){return oo.value}),Ni=[],ha=0;ha<hn.length;ha++){var yi=hn[ha],gn=yi.value;if(-1===Na.indexOf(gn)){for(var Eo=!1,Qi=0;!Eo&&Qi<an.length;Qi++)1e7+an[Qi].value===1e7+gn&&(Eo=!0);Eo||Ni.push(yi)}}hn=Ni}if(Ut&&function Le(Ke,We,Jt){for(var Gt=0;Gt<Ke.length;Gt++){var hr=Ke[Gt].value,br=Gt,Ut=Gt+1;Gt<Ke.length-1?(br=Gt,Ut=Gt+1):Gt>0?(br=Gt-1,Ut=Gt):(br=Gt,Ut=Gt);var qt,Kt=Ke[br].value,wt=Ke[Ut].value,xr=Math.abs(wt-Kt),Ir=Jt||xr,Ur=0;Ir>=s?Ur=xr>=s&&xr<=l?xr:y:Jt===h&&Ir>=g?Ur=xr>=g&&xr<=x?xr:h:Ir>=A?Ur=xr>=A&&xr<=m?xr:d:Jt===b&&Ir>=b?Ur=b:Ir>=c?Ur=c:Jt===S&&Ir>=S?Ur=S:Jt===w&&Ir>=w&&(Ur=w),Ur>=xr&&(Ur=xr,qt=!0);var on=hr+Ur;if(We.rangebreaks&&Ur>0){for(var hn=0,An=0;An<84;An++){var Sn=(An+.5)/84;We.maskBreaks(hr*(1-Sn)+Sn*on)!==F&&hn++}(Ur*=hn/84)||(Ke[Gt].drop=!0),qt&&xr>b&&(Ur=xr)}(Ur>0||0===Gt)&&(Ke[Gt].periodX=hr+Ur/2)}}(an,We,We._definedDelta),We.rangebreaks){var Xo="y"===We._id.charAt(0),ao=1;"auto"===We.tickmode&&(ao=We.tickfont?We.tickfont.size:12);var io=NaN;for(Ii=an.length-1;Ii>-1;Ii--)if(an[Ii].drop)an.splice(Ii,1);else{an[Ii].value=tr(an[Ii].value,We);var Lo=We.c2p(an[Ii].value);(Xo?io>Lo-ao:io<Lo+ao)?an.splice(wt?Ii+1:Ii,1):io=Lo}}sr(We)&&360===Math.abs(Kt[1]-Kt[0])&&an.pop(),We._tmax=(an[an.length-1]||{}).value,We._prevDateHead="",We._inCalcTicks=!0;var qo,In,Ta,wo=function(oo){oo.text="",We._prevDateHead=qo};for(an=an.concat(hn),Ii=0;Ii<an.length;Ii++){var ls=an[Ii].minor,Do=an[Ii].value;ls?on.push({x:Do,minor:!0}):(qo=We._prevDateHead,In=q.tickText(We,Do,!1,an[Ii].simpleLabel),void 0!==(Ta=an[Ii].periodX)&&(In.periodX=Ta,(Ta>Ir||Ta<xr)&&(Ta>Ir&&(In.periodX=Ir),Ta<xr&&(In.periodX=xr),wo(In))),an[Ii].skipLabel&&wo(In),qt.push(In))}return qt=qt.concat(on),We._inCalcTicks=!1,Ut&&qt.length&&(qt[0].noTick=!0),qt};var Pe=[2,5,10],Ie=[1,2,3,6,12],Qe=[1,2,5,10,15,30],at=[1,2,3,7,14],Be=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ne=[-.301,0,.301,.699,1],nt=[15,30,45,90,180];function ct(Ke,We,Jt){return We*n.roundUp(Ke/We,Jt)}function mt(Ke){var We=Ke.dtick;if(Ke._tickexponent=0,!I(We)&&"string"!=typeof We&&(We=1),("category"===Ke.type||"multicategory"===Ke.type)&&(Ke._tickround=null),"date"===Ke.type){var Jt=Ke.r2l(Ke.tick0),Gt=Ke.l2r(Jt).replace(/(^-|i)/g,""),hr=Gt.length;if("M"===String(We).charAt(0))hr>10||"01-01"!==Gt.substr(5)?Ke._tickround="d":Ke._tickround=+We.substr(1)%12==0?"y":"m";else if(We>=c&&hr<=10||We>=15*c)Ke._tickround="d";else if(We>=E&&hr<=16||We>=w)Ke._tickround="M";else if(We>=P&&hr<=19||We>=E)Ke._tickround="S";else{var br=Ke.l2r(Jt+We).replace(/^-/,"").length;Ke._tickround=Math.max(hr,br)-20,Ke._tickround<0&&(Ke._tickround=4)}}else if(I(We)||"L"===We.charAt(0)){var Ut=Ke.range.map(Ke.r2d||Number);I(We)||(We=Number(We.substr(1))),Ke._tickround=2-Math.floor(Math.log(We)/Math.LN10+.01);var Kt=Math.max(Math.abs(Ut[0]),Math.abs(Ut[1])),wt=Math.floor(Math.log(Kt)/Math.LN10+.01),xr=void 0===Ke.minexponent?3:Ke.minexponent;Math.abs(wt)>xr&&(ge(Ke.exponentformat)&&!Oe(wt)?Ke._tickexponent=3*Math.round((wt-1)/3):Ke._tickexponent=wt)}else Ke._tickround=null}function Bt(Ke,We,Jt){var Gt=Ke.tickfont||{};return{x:We,dx:0,dy:0,text:Jt||"",fontSize:Gt.size,font:Gt.family,fontColor:Gt.color}}q.autoTicks=function(Ke,We,Jt){var Gt;function hr(Ur){return Math.pow(Ur,Math.floor(Math.log(We)/Math.LN10))}if("date"===Ke.type){Ke.tick0=n.dateTick0(Ke.calendar,0);var br=2*We;if(br>y)We/=y,Gt=hr(10),Ke.dtick="M"+12*ct(We,Gt,Pe);else if(br>d)We/=d,Ke.dtick="M"+ct(We,1,Ie);else if(br>c){if(Ke.dtick=ct(We,c,Ke._hasDayOfWeekBreaks?[1,2,7,14]:at),!Jt){var Ut=q.getTickFormat(Ke),Kt="period"===Ke.ticklabelmode;Kt&&(Ke._rawTick0=Ke.tick0),/%[uVW]/.test(Ut)?Ke.tick0=n.dateTick0(Ke.calendar,2):Ke.tick0=n.dateTick0(Ke.calendar,1),Kt&&(Ke._dowTick0=Ke.tick0)}}else br>w?Ke.dtick=ct(We,w,Ie):br>E?Ke.dtick=ct(We,E,Qe):br>P?Ke.dtick=ct(We,P,Qe):(Gt=hr(10),Ke.dtick=ct(We,Gt,Pe))}else if("log"===Ke.type){Ke.tick0=0;var wt=n.simpleMap(Ke.range,Ke.r2l);if(Ke._isMinor&&(We*=1.5),We>.7)Ke.dtick=Math.ceil(We);else if(Math.abs(wt[1]-wt[0])<1){var xr=1.5*Math.abs((wt[1]-wt[0])/We);We=Math.abs(Math.pow(10,wt[1])-Math.pow(10,wt[0]))/xr,Gt=hr(10),Ke.dtick="L"+ct(We,Gt,Pe)}else Ke.dtick=We>.3?"D2":"D1"}else"category"===Ke.type||"multicategory"===Ke.type?(Ke.tick0=0,Ke.dtick=Math.ceil(Math.max(We,1))):sr(Ke)?(Ke.tick0=0,Gt=1,Ke.dtick=ct(We,Gt,nt)):(Ke.tick0=0,Gt=hr(10),Ke.dtick=ct(We,Gt,Pe));if(0===Ke.dtick&&(Ke.dtick=1),!I(Ke.dtick)&&"string"!=typeof Ke.dtick){var Ir=Ke.dtick;throw Ke.dtick=1,"ax.dtick error: "+String(Ir)}},q.tickIncrement=function(Ke,We,Jt,Gt){var hr=Jt?-1:1;if(I(We))return n.increment(Ke,hr*We);var br=We.charAt(0),Ut=hr*Number(We.substr(1));if("M"===br)return n.incrementMonth(Ke,Ut,Gt);if("L"===br)return Math.log(Math.pow(10,Ke)+Ut)/Math.LN10;if("D"===br){var Kt="D2"===We?Ne:Be,wt=Ke+.01*hr,xr=n.roundUp(n.mod(wt,1),Kt,Jt);return Math.floor(wt)+Math.log(M.round(Math.pow(10,xr),1))/Math.LN10}throw"unrecognized dtick "+String(We)},q.tickFirst=function(Ke,We){var Jt=Ke.r2l||Number,Gt=n.simpleMap(Ke.range,Jt,void 0,void 0,We),hr=Gt[1]<Gt[0],br=hr?Math.floor:Math.ceil,Ut=J(Gt)[0],Kt=Ke.dtick,wt=Jt(Ke.tick0);if(I(Kt)){var xr=br((Ut-wt)/Kt)*Kt+wt;return("category"===Ke.type||"multicategory"===Ke.type)&&(xr=n.constrain(xr,0,Ke._categories.length-1)),xr}var Ir=Kt.charAt(0),Ur=Number(Kt.substr(1));if("M"===Ir){for(var an,hn,An,qt=0,on=wt;qt<10;){if(((an=q.tickIncrement(on,Kt,hr,Ke.calendar))-Ut)*(on-Ut)<=0)return hr?Math.min(on,an):Math.max(on,an);hn=(Ut-(on+an)/2)/(an-on),An=Ir+(Math.abs(Math.round(hn))||1)*Ur,on=q.tickIncrement(on,An,hn<0?!hr:hr,Ke.calendar),qt++}return n.error("tickFirst did not converge",Ke),on}if("L"===Ir)return Math.log(br((Math.pow(10,Ut)-wt)/Ur)*Ur+wt)/Math.LN10;if("D"===Ir){var Sn="D2"===Kt?Ne:Be,sa=n.roundUp(n.mod(Ut,1),Sn,hr);return Math.floor(Ut)+Math.log(M.round(Math.pow(10,sa),1))/Math.LN10}throw"unrecognized dtick "+String(Kt)},q.tickText=function(Ke,We,Jt,Gt){var xr,hr=Bt(Ke,We),br="array"===Ke.tickmode,Ut=Jt||br,Kt=Ke.type,wt="category"===Kt?Ke.d2l_noadd:Ke.d2l;if(br&&n.isArrayOrTypedArray(Ke.ticktext)){var Ir=n.simpleMap(Ke.range,Ke.r2l),Ur=(Math.abs(Ir[1]-Ir[0])-(Ke._lBreaks||0))/1e4;for(xr=0;xr<Ke.ticktext.length&&!(Math.abs(We-wt(Ke.tickvals[xr]))<Ur);xr++);if(xr<Ke.ticktext.length)return hr.text=String(Ke.ticktext[xr]),hr}function qt(An){if(void 0===An)return!0;if(Jt)return"none"===An;var Sn={first:Ke._tmin,last:Ke._tmax}[An];return"all"!==An&&We!==Sn}var on=Jt?"never":"none"!==Ke.exponentformat&&qt(Ke.showexponent)?"hide":"";if("date"===Kt?function Rt(Ke,We,Jt,Gt){var hr=Ke._tickround,br=Jt&&Ke.hoverformat||q.getTickFormat(Ke);Gt=!br&&Gt,Gt&&(hr=I(hr)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[hr]);var Kt,Ut=n.formatDate(We.x,br,hr,Ke._dateFormat,Ke.calendar,Ke._extraFormat),wt=Ut.indexOf("\n");if(-1!==wt&&(Kt=Ut.substr(wt+1),Ut=Ut.substr(0,wt)),Gt&&(void 0===Kt||"00:00:00"!==Ut&&"00:00"!==Ut?8===Ut.length&&(Ut=Ut.replace(/:00$/,"")):(Ut=Kt,Kt="")),Kt)if(Jt)"d"===hr?Ut+=", "+Kt:Ut=Kt+(Ut?", "+Ut:"");else if(Ke._inCalcTicks&&Ke._prevDateHead===Kt){var xr=Cr(Ke),Ir=Ke._trueSide||Ke.side;(!xr&&"top"===Ir||xr&&"bottom"===Ir)&&(Ut+="<br> ")}else Ke._prevDateHead=Kt,Ut+="<br>"+Kt;We.text=Ut}(Ke,hr,Jt,Ut):"log"===Kt?function zt(Ke,We,Jt,Gt,hr){var br=Ke.dtick,Ut=We.x,Kt=Ke.tickformat,wt="string"==typeof br&&br.charAt(0);if("never"===hr&&(hr=""),Gt&&"L"!==wt&&(br="L3",wt="L"),Kt||"L"===wt)We.text=we(Math.pow(10,Ut),Ke,hr,Gt);else if(I(br)||"D"===wt&&n.mod(Ut+.01,1)<.1){var xr=Math.round(Ut),Ir=Math.abs(xr),Ur=Ke.exponentformat;"power"===Ur||ge(Ur)&&Oe(xr)?(We.text=0===xr?1:1===xr?"10":"10<sup>"+(xr>1?"":R)+Ir+"</sup>",We.fontSize*=1.25):("e"===Ur||"E"===Ur)&&Ir>2?We.text="1"+Ur+(xr>0?"+":R)+Ir:(We.text=we(Math.pow(10,Ut),Ke,"","fakehover"),"D1"===br&&"y"===Ke._id.charAt(0)&&(We.dy-=We.fontSize/6))}else{if("D"!==wt)throw"unrecognized dtick "+String(br);We.text=String(Math.round(Math.pow(10,n.mod(Ut,1)))),We.fontSize*=.75}if("D1"===Ke.dtick){var qt=String(We.text).charAt(0);("0"===qt||"1"===qt)&&("y"===Ke._id.charAt(0)?We.dx-=We.fontSize/4:(We.dy+=We.fontSize/2,We.dx+=(Ke.range[1]>Ke.range[0]?1:-1)*We.fontSize*(Ut<0?.5:.25)))}}(Ke,hr,0,Ut,on):"category"===Kt?function St(Ke,We){var Jt=Ke._categories[Math.round(We.x)];void 0===Jt&&(Jt=""),We.text=String(Jt)}(Ke,hr):"multicategory"===Kt?function Xt(Ke,We,Jt){var Gt=Math.round(We.x),hr=Ke._categories[Gt]||[],br=void 0===hr[1]?"":String(hr[1]),Ut=void 0===hr[0]?"":String(hr[0]);Jt?We.text=Ut+" - "+br:(We.text=br,We.text2=Ut)}(Ke,hr,Jt):sr(Ke)?function st(Ke,We,Jt,Gt,hr){if("radians"!==Ke.thetaunit||Jt)We.text=we(We.x,Ke,hr,Gt);else{var br=We.x/180;if(0===br)We.text="0";else{var Ut=function Se(Ke){function We(Kt,wt){return Math.abs(Kt-wt)<=1e-6}function Jt(Kt,wt){return We(wt,0)?Kt:Jt(wt,Kt%wt)}function Gt(Kt){for(var wt=1;!We(Math.round(Kt*wt)/wt,Kt);)wt*=10;return wt}var hr=Gt(Ke),br=Ke*hr,Ut=Math.abs(Jt(br,hr));return[Math.round(br/Ut),Math.round(hr/Ut)]}(br);if(Ut[1]>=100)We.text=we(n.deg2rad(We.x),Ke,hr,Gt);else{var Kt=We.x<0;1===Ut[1]?1===Ut[0]?We.text="\u03c0":We.text=Ut[0]+"\u03c0":We.text=["<sup>",Ut[0],"</sup>","\u2044","<sub>",Ut[1],"</sub>","\u03c0"].join(""),Kt&&(We.text=R+We.text)}}}}(Ke,hr,Jt,Ut,on):function Mt(Ke,We,Jt,Gt,hr){"never"===hr?hr="":"all"===Ke.showexponent&&Math.abs(We.x/Ke.dtick)<1e-6&&(hr="hide"),We.text=we(We.x,Ke,hr,Gt)}(Ke,hr,0,Ut,on),Gt||(Ke.tickprefix&&!qt(Ke.showtickprefix)&&(hr.text=Ke.tickprefix+hr.text),Ke.ticksuffix&&!qt(Ke.showticksuffix)&&(hr.text+=Ke.ticksuffix)),Ke.labelalias&&Ke.labelalias.hasOwnProperty(hr.text)){var an=Ke.labelalias[hr.text];"string"==typeof an&&(hr.text=an)}if("boundaries"===Ke.tickson||Ke.showdividers){var hn=function(An){var Sn=Ke.l2p(An);return Sn>=0&&Sn<=Ke._length?An:null};hr.xbnd=[hn(hr.x-.5),hn(hr.x+Ke.dtick-.5)]}return hr},q.hoverLabelText=function(Ke,We,Jt){Jt&&(Ke=n.extendFlat({},Ke,{hoverformat:Jt}));var Gt=n.isArrayOrTypedArray(We)?We[0]:We,hr=n.isArrayOrTypedArray(We)?We[1]:void 0;if(void 0!==hr&&hr!==Gt)return q.hoverLabelText(Ke,Gt,Jt)+" - "+q.hoverLabelText(Ke,hr,Jt);var br="log"===Ke.type&&Gt<=0,Ut=q.tickText(Ke,Ke.c2l(br?-Gt:Gt),"hover").text;return br?0===Gt?"0":R+Ut:Ut};var pe=["f","p","n","\u03bc","m","","k","M","G","T"];function ge(Ke){return"SI"===Ke||"B"===Ke}function Oe(Ke){return Ke>14||Ke<-15}function we(Ke,We,Jt,Gt){var hr=Ke<0,br=We._tickround,Ut=Jt||We.exponentformat||"B",Kt=We._tickexponent,wt=q.getTickFormat(We),xr=We.separatethousands;if(Gt){var Ir={exponentformat:Ut,minexponent:We.minexponent,dtick:"none"===We.showexponent?We.dtick:I(Ke)&&Math.abs(Ke)||1,range:"none"===We.showexponent?We.range.map(We.r2d):[0,Ke||1]};mt(Ir),br=(Number(Ir._tickround)||0)+4,Kt=Ir._tickexponent,We.hoverformat&&(wt=We.hoverformat)}if(wt)return We._numFormat(wt)(Ke).replace(/-/g,R);var an,Ur=Math.pow(10,-br)/2;if("none"===Ut&&(Kt=0),(Ke=Math.abs(Ke))<Ur)Ke="0",hr=!1;else{if(Ke+=Ur,Kt&&(Ke*=Math.pow(10,-Kt),br+=Kt),0===br)Ke=String(Math.floor(Ke));else if(br<0){Ke=(Ke=String(Math.round(Ke))).substr(0,Ke.length+br);for(var qt=br;qt<0;qt++)Ke+="0"}else{var on=(Ke=String(Ke)).indexOf(".")+1;on&&(Ke=Ke.substr(0,on+br).replace(/\.?0+$/,""))}Ke=n.numSeparate(Ke,We._separators,xr)}Kt&&"hide"!==Ut&&(ge(Ut)&&Oe(Kt)&&(Ut="power"),an=Kt<0?R+-Kt:"power"!==Ut?"+"+Kt:String(Kt),"e"===Ut||"E"===Ut?Ke+=Ut+an:"power"===Ut?Ke+="\xd710<sup>"+an+"</sup>":"B"===Ut&&9===Kt?Ke+="B":ge(Ut)&&(Ke+=pe[Kt/3+5]));return hr?R+Ke:Ke}function He(Ke,We){if(Ke){var Jt=Object.keys(U).reduce(function(Gt,hr){return-1!==We.indexOf(hr)&&U[hr].forEach(function(br){Gt[br]=1}),Gt},{});Object.keys(Ke).forEach(function(Gt){Jt[Gt]||(1===Gt.length?Ke[Gt]=0:delete Ke[Gt])})}}function ut(Ke,We){for(var Jt=[],Gt={},hr=0;hr<We.length;hr++){var br=We[hr];Gt[br.text2]?Gt[br.text2].push(br.x):Gt[br.text2]=[br.x]}for(var Ut in Gt)Jt.push(Bt(Ke,n.interp(Gt[Ut],.5),Ut));return Jt}function Dt(Ke){return void 0!==Ke.periodX?Ke.periodX:Ke.x}function bt(Ke){return[Ke.text,Ke.x,Ke.axInfo,Ke.font,Ke.fontSize,Ke.fontColor].join("_")}function cr(Ke){var We=Ke.title.font.size,Jt=(Ke.title.text.match(u.BR_TAG_ALL)||[]).length;return Ke.title.hasOwnProperty("standoff")?Jt?We*(ee+Jt*W):We*ee:Jt?We*(Jt+1)*W:We}function Kr(Ke,We){var Jt=Ke.l2p(We);return Jt>1&&Jt<Ke._length-1}function kr(Ke){var We=M.select(Ke),Jt=We.select(".text-math-group");return Jt.empty()?We.select("text"):Jt}function lr(Ke){return Ke._id+".automargin"}function rt(Ke){return lr(Ke)+".mirror"}function $e(Ke){return Ke._id+".rangeslider"}function gt(Ke,We){for(var Jt=0;Jt<We.length;Jt++)-1===Ke.indexOf(We[Jt])&&Ke.push(We[Jt])}function ft(Ke,We,Jt){var Ut,Kt,Gt=[],hr=[],br=Ke.layout;for(Ut=0;Ut<We.length;Ut++)Gt.push(q.getFromId(Ke,We[Ut]));for(Ut=0;Ut<Jt.length;Ut++)hr.push(q.getFromId(Ke,Jt[Ut]));var wt=Object.keys(v),xr=["anchor","domain","overlaying","position","side","tickangle","editType"],Ir=["linear","log"];for(Ut=0;Ut<wt.length;Ut++){var Ur=wt[Ut],qt=Gt[0][Ur],on=hr[0][Ur],an=!0,hn=!1,An=!1;if("_"!==Ur.charAt(0)&&"function"!=typeof qt&&-1===xr.indexOf(Ur)){for(Kt=1;Kt<Gt.length&&an;Kt++){var Sn=Gt[Kt][Ur];"type"===Ur&&-1!==Ir.indexOf(qt)&&-1!==Ir.indexOf(Sn)&&qt!==Sn?hn=!0:Sn!==qt&&(an=!1)}for(Kt=1;Kt<hr.length&&an;Kt++){var sa=hr[Kt][Ur];"type"===Ur&&-1!==Ir.indexOf(on)&&-1!==Ir.indexOf(sa)&&on!==sa?An=!0:hr[Kt][Ur]!==on&&(an=!1)}an&&(hn&&(br[Gt[0]._name].type="linear"),An&&(br[hr[0]._name].type="linear"),Ct(br,Ur,Gt,hr,Ke._fullLayout._dfltTitle))}}for(Ut=0;Ut<Ke._fullLayout.annotations.length;Ut++){var Rn=Ke._fullLayout.annotations[Ut];-1!==We.indexOf(Rn.xref)&&-1!==Jt.indexOf(Rn.yref)&&n.swapAttrs(br.annotations[Ut],["?"])}}function Ct(Ke,We,Jt,Gt,hr){var wt,br=n.nestedProperty,Ut=br(Ke[Jt[0]._name],We).get(),Kt=br(Ke[Gt[0]._name],We).get();for("title"===We&&(Ut&&Ut.text===hr.x&&(Ut.text=hr.y),Kt&&Kt.text===hr.y&&(Kt.text=hr.x)),wt=0;wt<Jt.length;wt++)br(Ke,Jt[wt]._name+"."+We).set(Kt);for(wt=0;wt<Gt.length;wt++)br(Ke,Gt[wt]._name+"."+We).set(Ut)}function sr(Ke){return"angularaxis"===Ke._id}function tr(Ke,We){for(var Jt=We._rangebreaks.length,Gt=0;Gt<Jt;Gt++){var hr=We._rangebreaks[Gt];if(Ke>=hr.min&&Ke<hr.max)return hr.max}return Ke}function Cr(Ke){return-1!==(Ke.ticklabelposition||"").indexOf("inside")}function Hr(Ke,We){Cr(Ke._anchorAxis||{})&&Ke._hideCounterAxisInsideTickLabels&&Ke._hideCounterAxisInsideTickLabels(We)}function zr(Ke,We,Jt,Gt){var br,hr="free"===Ke.anchor||void 0!==Ke.overlaying&&!1!==Ke.overlaying?Ke.overlaying:Ke._id;br=Gt?"right"===Ke.side?We:-We:We,hr in Jt||(Jt[hr]={}),Ke.side in Jt[hr]||(Jt[hr][Ke.side]=0),Jt[hr][Ke.side]+=br}q.getTickFormat=function(Ke){var We,Ut,Kt,wt,xr,Ur,qt,on;function Jt(wt){return"string"!=typeof wt?wt:Number(wt.replace("M",""))*d}function Gt(wt,xr){var Ir=["L","D"];if(typeof wt==typeof xr){if("number"==typeof wt)return wt-xr;var Ur=Ir.indexOf(wt.charAt(0)),qt=Ir.indexOf(xr.charAt(0));return Ur===qt?Number(wt.replace(/(L|D)/g,""))-Number(xr.replace(/(L|D)/g,"")):Ur-qt}return"number"==typeof wt?1:-1}function br(wt,xr){var Ir=null===xr[0],Ur=null===xr[1],qt=Gt(wt,xr[0])>=0,on=Gt(wt,xr[1])<=0;return(Ir||qt)&&(Ur||on)}if(Ke.tickformatstops&&Ke.tickformatstops.length>0)switch(Ke.type){case"date":case"linear":for(We=0;We<Ke.tickformatstops.length;We++)if((Kt=Ke.tickformatstops[We]).enabled&&(wt=Ke.dtick,xr=Kt.dtickrange,Ur=void 0,qt=void 0,on=void 0,Ur=Jt||function(an){return an},qt=xr[0],on=xr[1],(!qt&&"number"!=typeof qt||Ur(qt)<=Ur(wt))&&(!on&&"number"!=typeof on||Ur(on)>=Ur(wt)))){Ut=Kt;break}break;case"log":for(We=0;We<Ke.tickformatstops.length;We++)if((Kt=Ke.tickformatstops[We]).enabled&&br(Ke.dtick,Kt.dtickrange)){Ut=Kt;break}}return Ut?Ut.value:Ke.tickformat},q.getSubplots=function(Ke,We){var Jt=Ke._fullLayout._subplots,Gt=Jt.cartesian.concat(Jt.gl2d||[]),hr=We?q.findSubplotsWithAxis(Gt,We):Gt;return hr.sort(function(br,Ut){var Kt=br.substr(1).split("y"),wt=Ut.substr(1).split("y");return Kt[0]===wt[0]?+Kt[1]-+wt[1]:+Kt[0]-+wt[0]}),hr},q.findSubplotsWithAxis=function(Ke,We){for(var Jt=new RegExp("x"===We._id.charAt(0)?"^"+We._id+"y":We._id+"$"),Gt=[],hr=0;hr<Ke.length;hr++){var br=Ke[hr];Jt.test(br)&&Gt.push(br)}return Gt},q.makeClipPaths=function(Ke){var We=Ke._fullLayout;if(!We._hasOnlyLargeSploms){var Kt,wt,Jt={_offset:0,_length:We.width,_id:""},Gt={_offset:0,_length:We.height,_id:""},hr=q.list(Ke,"x",!0),br=q.list(Ke,"y",!0),Ut=[];for(Kt=0;Kt<hr.length;Kt++)for(Ut.push({x:hr[Kt],y:Gt}),wt=0;wt<br.length;wt++)0===Kt&&Ut.push({x:Jt,y:br[wt]}),Ut.push({x:hr[Kt],y:br[wt]});var xr=We._clips.selectAll(".axesclip").data(Ut,function(Ir){return Ir.x._id+Ir.y._id});xr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Ir){return"clip"+We._uid+Ir.x._id+Ir.y._id}).append("rect"),xr.exit().remove(),xr.each(function(Ir){M.select(this).select("rect").attr({x:Ir.x._offset||0,y:Ir.y._offset||0,width:Ir.x._length||1,height:Ir.y._length||1})})}},q.draw=function(Ke,We,Jt){var Gt=Ke._fullLayout;"redraw"===We&&Gt._paper.selectAll("g.subplot").each(function(wt){var xr=wt[0],Ir=Gt._plots[xr];if(Ir){var Ur=Ir.xaxis,qt=Ir.yaxis;Ir.xaxislayer.selectAll("."+Ur._id+"tick").remove(),Ir.yaxislayer.selectAll("."+qt._id+"tick").remove(),Ir.xaxislayer.selectAll("."+Ur._id+"tick2").remove(),Ir.yaxislayer.selectAll("."+qt._id+"tick2").remove(),Ir.xaxislayer.selectAll("."+Ur._id+"divider").remove(),Ir.yaxislayer.selectAll("."+qt._id+"divider").remove(),Ir.minorGridlayer&&Ir.minorGridlayer.selectAll("path").remove(),Ir.gridlayer&&Ir.gridlayer.selectAll("path").remove(),Ir.zerolinelayer&&Ir.zerolinelayer.selectAll("path").remove(),Gt._infolayer.select(".g-"+Ur._id+"title").remove(),Gt._infolayer.select(".g-"+qt._id+"title").remove()}});var hr=We&&"redraw"!==We?We:q.listIds(Ke),Ut=q.list(Ke).filter(function(wt){return wt.autoshift}).map(function(wt){return wt.overlaying});hr.map(function(wt){var xr=q.getFromId(Ke,wt);if("sync"===xr.tickmode&&xr.overlaying){var Ir=hr.findIndex(function(Ur){return Ur===xr.overlaying});Ir>=0&&hr.unshift(hr.splice(Ir,1).shift())}});var Kt={false:{left:0,right:0}};return n.syncOrAsync(hr.map(function(wt){return function(){if(wt){var xr=q.getFromId(Ke,wt);Jt||(Jt={}),Jt.axShifts=Kt,Jt.overlayingShiftedAx=Ut;var Ir=q.drawOne(Ke,xr,Jt);return xr._shiftPusher&&zr(xr,xr._fullDepth||0,Kt,!0),xr._r=xr.range.slice(),xr._rl=n.simpleMap(xr._r,xr.r2l),Ir}}}))},q.drawOne=function(Ke,We,Jt){var br,Ut,Kt,Gt=(Jt=Jt||{}).axShifts||{},hr=Jt.overlayingShiftedAx||[];We.setScale();var wt=Ke._fullLayout,xr=We._id,Ir=xr.charAt(0),Ur=q.counterLetter(xr),qt=wt._plots[We._mainSubplot];if(qt){if(We._shiftPusher=We.autoshift||-1!==hr.indexOf(We._id)||-1!==hr.indexOf(We.overlaying),We._shiftPusher&"free"===We.anchor){var on=We.linewidth/2||0;"inside"===We.ticks&&(on+=We.ticklen),zr(We,on,Gt,!0),zr(We,We.shift||0,Gt,!1)}(!0!==Jt.skipTitle||void 0===We._shift)&&(We._shift=function Wr(Ke,We){return Ke.autoshift?We[Ke.overlaying][Ke.side]:Ke.shift||0}(We,Gt));var an=qt[Ir+"axislayer"],hn=We._mainLinePosition,An=hn+=We._shift,Sn=We._mainMirrorPosition,sa=We._vals=q.calcTicks(We),Rn=[We.mirror,An,Sn].join("_");for(br=0;br<sa.length;br++)sa[br].axInfo=Rn;We._selections={},We._tickAngles&&(We._prevTickAngles=We._tickAngles),We._tickAngles={},We._depth=null;var Yr={};if(We.visible){var Xn,Vr,nn=q.makeTransTickFn(We),Or=q.makeTransTickLabelFn(We),wn="inside"===We.ticks,Ca="outside"===We.ticks;if("boundaries"===We.tickson){var Ba=function Xe(Ke,We){var Gt,Jt=[],hr=function(br,Ut){var Kt=br.xbnd[Ut];null!==Kt&&Jt.push(n.extendFlat({},br,{x:Kt}))};if(We.length){for(Gt=0;Gt<We.length;Gt++)hr(We[Gt],0);hr(We[Gt-1],1)}return Jt}(0,sa);Vr=q.clipEnds(We,Ba),Xn=wn?Vr:Ba}else Vr=q.clipEnds(We,sa),Xn=wn&&"period"!==We.ticklabelmode?Vr:sa;var Ka=We._gridVals=Vr,Ja=function Ze(Ke,We){var Gt,hr,Jt=[],br=We.length&&We[We.length-1].x<We[0].x,Ut=function(wt,xr){var Ir=wt.xbnd[xr];null!==Ir&&Jt.push(n.extendFlat({},wt,{x:Ir}))};if(Ke.showdividers&&We.length){for(Gt=0;Gt<We.length;Gt++){var Kt=We[Gt];Kt.text2!==hr&&Ut(Kt,br?1:0),hr=Kt.text2}Ut(We[Gt-1],br?0:1)}return Jt}(We,sa);if(!wt._hasOnlyLargeSploms){var si=We._subplotsWith,Ra={};for(br=0;br<si.length;br++){Ut=si[br];var Na=(Kt=wt._plots[Ut])[Ur+"axis"],Ni=Na._mainAxis._id;if(!Ra[Ni]){Ra[Ni]=1;var ha="x"===Ir?"M0,"+Na._offset+"v"+Na._length:"M"+Na._offset+",0h"+Na._length;q.drawGrid(Ke,We,{vals:Ka,counterAxis:Na,layer:Kt.gridlayer.select("."+xr),minorLayer:Kt.minorGridlayer.select("."+xr),path:ha,transFn:nn}),q.drawZeroLine(Ke,We,{counterAxis:Na,layer:Kt.zerolinelayer,path:ha,transFn:nn})}}}var yi,gn=q.getTickSigns(We),Eo=q.getTickSigns(We,"minor");if(We.ticks||We.minor&&We.minor.ticks){var Xo,ao,io,Lo,Qi=q.makeTickPath(We,An,gn[2]),Ii=q.makeTickPath(We,An,Eo[2],{minor:!0});if(We._anchorAxis&&We.mirror&&!0!==We.mirror?(Xo=q.makeTickPath(We,Sn,gn[3]),ao=q.makeTickPath(We,Sn,Eo[3],{minor:!0}),io=Qi+Xo,Lo=Ii+ao):(Xo="",ao="",io=Qi,Lo=Ii),We.showdividers&&Ca&&"boundaries"===We.tickson){var qo={};for(br=0;br<Ja.length;br++)qo[Ja[br].x]=1;yi=function(To){return qo[To.x]?Xo:io}}else yi=function(To){return To.minor?Lo:io}}if(q.drawTicks(Ke,We,{vals:Xn,layer:an,path:yi,transFn:nn}),"allticks"===We.mirror){var wo=Object.keys(We._linepositions||{});for(br=0;br<wo.length;br++){Ut=wo[br],Kt=wt._plots[Ut];var In=We._linepositions[Ut]||[],Ta=In[0],ls=In[1],Do=In[2],oo=q.makeTickPath(We,Ta,Do?gn[0]:Eo[0],{minor:Do})+q.makeTickPath(We,ls,Do?gn[1]:Eo[1],{minor:Do});q.drawTicks(Ke,We,{vals:Xn,layer:Kt[Ir+"axislayer"],path:oo,transFn:nn})}}var ys=[];if(ys.push(function(){return q.drawLabels(Ke,We,{vals:sa,layer:an,plotinfo:Kt,transFn:Or,labelFns:q.makeLabelFns(We,An)})}),"multicategory"===We.type){var as={x:2,y:10}[Ir];ys.push(function(){var To={x:"height",y:"width"}[Ir],va=vr()[To]+as+(We._tickAngles[xr+"tick"]?We.tickfont.size*W:0);return q.drawLabels(Ke,We,{vals:ut(We,sa),layer:an,cls:xr+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:nn,labelFns:q.makeLabelFns(We,An+va*gn[4])})}),ys.push(function(){return We._depth=gn[4]*(vr("tick2")[We.side]-An),function Pt(Ke,We,Jt){var Gt=We._id+"divider",hr=Jt.vals,br=Jt.layer.selectAll("path."+Gt).data(hr,bt);br.exit().remove(),br.enter().insert("path",":first-child").classed(Gt,1).classed("crisp",1).call(r.stroke,We.dividercolor).style("stroke-width",o.crispRound(Ke,We.dividerwidth,1)+"px"),br.attr("transform",Jt.transFn).attr("d",Jt.path)}(Ke,We,{vals:Ja,layer:an,path:q.makeTickPath(We,An,gn[4],{len:We._depth}),transFn:nn})})}else We.title.hasOwnProperty("standoff")&&ys.push(function(){We._depth=gn[4]*(vr()[We.side]-An)});var el=T.getComponentMethod("rangeslider","isVisible")(We);return!Jt.skipTitle&&!(el&&"bottom"===We.side)&&ys.push(function(){return function Sr(Ke,We){var Ut,Jt=Ke._fullLayout,Gt=We._id,hr=Gt.charAt(0),br=We.title.font.size;if(We.title.hasOwnProperty("standoff"))Ut=We._depth+We.title.standoff+cr(We);else{var Kt=Cr(We);if("multicategory"===We.type)Ut=We._depth;else{var wt=1.5*br;Kt&&(wt=.5*br,"outside"===We.ticks&&(wt+=We.ticklen)),Ut=10+wt+(We.linewidth?We.linewidth-1:0)}Kt||(Ut+="x"===hr?"top"===We.side?br*(We.showticklabels?1:0):br*(We.showticklabels?1.5:.5):"right"===We.side?br*(We.showticklabels?1:.5):br*(We.showticklabels?.5:0))}var Ir,Ur,qt,on,xr=q.getPxPosition(Ke,We);if("x"===hr?(Ur=We._offset+We._length/2,qt="top"===We.side?xr-Ut:xr+Ut):(qt=We._offset+We._length/2,Ur="right"===We.side?xr+Ut:xr-Ut,Ir={rotate:"-90",offset:0}),"multicategory"!==We.type){var an=We._selections[We._id+"tick"];if(on={selection:an,side:We.side},an&&an.node()&&an.node().parentNode){var hn=o.getTranslate(an.node().parentNode);on.offsetLeft=hn.x,on.offsetTop=hn.y}We.title.hasOwnProperty("standoff")&&(on.pad=0)}return We._titleStandoff=Ut,a.draw(Ke,Gt+"title",{propContainer:We,propName:We._name+".title.text",placeholder:Jt._dfltTitle[hr],avoid:on,transform:Ir,attributes:{x:Ur,y:qt,"text-anchor":"middle"}})}(Ke,We)}),ys.push(function(){var so,eo,fi,Ql,To=We.side.charAt(0),va=B[We.side].charAt(0),Ai=q.getPxPosition(Ke,We),bi=Ca?We.ticklen:0;(We.automargin||el||We._shiftPusher)&&("multicategory"===We.type?so=vr("tick2"):(so=vr(),"x"===Ir&&"b"===To&&(We._depth=Math.max(so.width>0?so.bottom-Ai:0,bi))));var Os=0,ms=0;if(We._shiftPusher&&(Os=Math.max(bi,so.height>0?"l"===To?Ai-so.left:so.right-Ai:0),We.title.text!==wt._dfltTitle[Ir]&&(ms=(We._titleStandoff||0)+(We._titleScoot||0),"l"===To&&(ms+=cr(We))),We._fullDepth=Math.max(Os,ms)),We.automargin){eo={x:0,y:0,r:0,l:0,t:0,b:0};var tl=[0,1],Ro="number"==typeof We._shift?We._shift:0;if("x"===Ir){if("b"===To?eo[To]=We._depth:(eo[To]=We._depth=Math.max(so.width>0?Ai-so.top:0,bi),tl.reverse()),so.width>0){var yo=so.right-(We._offset+We._length);yo>0&&(eo.xr=1,eo.r=yo);var Ls=We._offset-so.left;Ls>0&&(eo.xl=0,eo.l=Ls)}}else if("l"===To?(We._depth=Math.max(so.height>0?Ai-so.left:0,bi),eo[To]=We._depth-Ro):(We._depth=Math.max(so.height>0?so.right-Ai:0,bi),eo[To]=We._depth+Ro,tl.reverse()),so.height>0){var xs=so.bottom-(We._offset+We._length);xs>0&&(eo.yb=0,eo.b=xs);var Ll=We._offset-so.top;Ll>0&&(eo.yt=1,eo.t=Ll)}eo[Ur]="free"===We.anchor?We.position:We._anchorAxis.domain[tl[0]],We.title.text!==wt._dfltTitle[Ir]&&(eo[To]+=cr(We)+(We.title.standoff||0)),We.mirror&&"free"!==We.anchor&&((fi={x:0,y:0,r:0,l:0,t:0,b:0})[va]=We.linewidth,We.mirror&&!0!==We.mirror&&(fi[va]+=bi),!0===We.mirror||"ticks"===We.mirror?fi[Ur]=We._anchorAxis.domain[tl[1]]:("all"===We.mirror||"allticks"===We.mirror)&&(fi[Ur]=[We._counterDomainMin,We._counterDomainMax][tl[1]]))}el&&(Ql=T.getComponentMethod("rangeslider","autoMarginOpts")(Ke,We)),"string"==typeof We.automargin&&(He(eo,We.automargin),He(fi,We.automargin)),t.autoMargin(Ke,lr(We),eo),t.autoMargin(Ke,rt(We),fi),t.autoMargin(Ke,$e(We),Ql)}),n.syncOrAsync(ys)}}function vr(To){var va=xr+(To||"tick");return Yr[va]||(Yr[va]=function qe(Ke,We){var Jt,Gt,hr,br;return Ke._selections[We].size()?(Jt=1/0,Gt=-1/0,hr=1/0,br=-1/0,Ke._selections[We].each(function(){var Ut=kr(this),Kt=o.bBox(Ut.node().parentNode);Jt=Math.min(Jt,Kt.top),Gt=Math.max(Gt,Kt.bottom),hr=Math.min(hr,Kt.left),br=Math.max(br,Kt.right)})):(Jt=0,Gt=0,hr=0,br=0),{top:Jt,bottom:Gt,left:hr,right:br,height:Gt-Jt,width:br-hr}}(We,va)),Yr[va]}},q.getTickSigns=function(Ke,We){var Jt=Ke._id.charAt(0),Gt={x:"top",y:"right"}[Jt],hr=Ke.side===Gt?1:-1,br=[-1,1,hr,-hr];return"inside"!==(We?(Ke.minor||{}).ticks:Ke.ticks)==("x"===Jt)&&(br=br.map(function(Kt){return-Kt})),Ke.side&&br.push({l:-1,t:-1,r:1,b:1}[Ke.side.charAt(0)]),br},q.makeTransTickFn=function(Ke){return"x"===Ke._id.charAt(0)?function(We){return i(Ke._offset+Ke.l2p(We.x),0)}:function(We){return i(0,Ke._offset+Ke.l2p(We.x))}},q.makeTransTickLabelFn=function(Ke){var We=function Ft(Ke){var We=Ke.ticklabelposition||"",Jt=function(on){return-1!==We.indexOf(on)},Gt=Jt("top"),hr=Jt("left"),br=Jt("right"),Ut=Jt("bottom"),Kt=Jt("inside"),wt=Ut||hr||Gt||br;if(!wt&&!Kt)return[0,0];var xr=Ke.side,Ir=wt?(Ke.tickwidth||0)/2:0,Ur=3,qt=Ke.tickfont?Ke.tickfont.size:12;return(Ut||Gt)&&(Ir+=qt*ee,Ur+=(Ke.linewidth||0)/2),(hr||br)&&(Ir+=(Ke.linewidth||0)/2,Ur+=3),Kt&&"top"===xr&&(Ur-=qt*(1-ee)),(hr||Gt)&&(Ir=-Ir),("bottom"===xr||"right"===xr)&&(Ur=-Ur),[wt?Ir:0,Kt?Ur:0]}(Ke),Jt=We[0],Gt=We[1];return"x"===Ke._id.charAt(0)?function(hr){return i(Jt+Ke._offset+Ke.l2p(Dt(hr)),Gt)}:function(hr){return i(Gt,Jt+Ke._offset+Ke.l2p(Dt(hr)))}},q.makeTickPath=function(Ke,We,Jt,Gt){Gt||(Gt={});var hr=Gt.minor;if(hr&&!Ke.minor)return"";var br=void 0!==Gt.len?Gt.len:hr?Ke.minor.ticklen:Ke.ticklen,Ut=Ke._id.charAt(0),Kt=(Ke.linewidth||1)/2;return"x"===Ut?"M0,"+(We+Kt*Jt)+"v"+br*Jt:"M"+(We+Kt*Jt)+",0h"+br*Jt},q.makeLabelFns=function(Ke,We,Jt){var Gt=Ke.ticklabelposition||"",hr=function(Ba){return-1!==Gt.indexOf(Ba)},br=hr("top"),Ut=hr("left"),Kt=hr("right"),xr=hr("bottom")||Ut||br||Kt,Ir=hr("inside"),Ur="inside"===Gt&&"inside"===Ke.ticks||!Ir&&"outside"===Ke.ticks&&"boundaries"!==Ke.tickson,qt=0,on=0,an=Ur?Ke.ticklen:0;if(Ir?an*=-1:xr&&(an=0),Ur&&(qt+=an,Jt)){var hn=n.deg2rad(Jt);qt=an*Math.cos(hn)+1,on=an*Math.sin(hn)}Ke.showticklabels&&(Ur||Ke.showline)&&(qt+=.2*Ke.tickfont.size);var Sn,sa,Rn,Yr,Vr,An={labelStandoff:qt+=(Ke.linewidth||1)/2*(Ir?-1:1),labelShift:on},vr=0,nn=Ke.side,Or=Ke._id.charAt(0),Xn=Ke.tickangle;if("x"===Or)Yr=(Vr=!Ir&&"bottom"===nn||Ir&&"top"===nn)?1:-1,Ir&&(Yr*=-1),Sn=on*Yr,sa=We+qt*Yr,Rn=Vr?1:-.2,90===Math.abs(Xn)&&(Ir?Rn+=j:Rn=-90===Xn&&"bottom"===nn?ee:90===Xn&&"top"===nn?j:.5,vr=j/2*(Xn/90)),An.xFn=function(Ba){return Ba.dx+Sn+vr*Ba.fontSize},An.yFn=function(Ba){return Ba.dy+sa+Ba.fontSize*Rn},An.anchorFn=function(Ba,Ka){if(xr){if(Ut)return"end";if(Kt)return"start"}return I(Ka)&&0!==Ka&&180!==Ka?Ka*Yr<0!==Ir?"end":"start":"middle"},An.heightFn=function(Ba,Ka,Ja){return Ka<-60||Ka>60?-.5*Ja:"top"===Ke.side!==Ir?-Ja:0};else if("y"===Or){if(Yr=(Vr=!Ir&&"left"===nn||Ir&&"right"===nn)?1:-1,Ir&&(Yr*=-1),Sn=qt,sa=on*Yr,Rn=0,!Ir&&90===Math.abs(Xn)&&(Rn=-90===Xn&&"left"===nn||90===Xn&&"right"===nn?ee:.5),Ir){var wn=I(Xn)?+Xn:0;if(0!==wn){var Ca=n.deg2rad(wn);vr=Math.abs(Math.sin(Ca))*ee*Yr,Rn=0}}An.xFn=function(Ba){return Ba.dx+We-(Sn+Ba.fontSize*Rn)*Yr+vr*Ba.fontSize},An.yFn=function(Ba){return Ba.dy+sa+Ba.fontSize*j},An.anchorFn=function(Ba,Ka){return I(Ka)&&90===Math.abs(Ka)?"middle":Vr?"end":"start"},An.heightFn=function(Ba,Ka,Ja){return"right"===Ke.side&&(Ka*=-1),Ka<-30?-Ja:Ka<30?-.5*Ja:0}}return An},q.drawTicks=function(Ke,We,Jt){Jt=Jt||{};var Gt=We._id+"tick",hr=[].concat(We.minor&&We.minor.ticks?Jt.vals.filter(function(Ut){return Ut.minor&&!Ut.noTick}):[]).concat(We.ticks?Jt.vals.filter(function(Ut){return!Ut.minor&&!Ut.noTick}):[]),br=Jt.layer.selectAll("path."+Gt).data(hr,bt);br.exit().remove(),br.enter().append("path").classed(Gt,1).classed("ticks",1).classed("crisp",!1!==Jt.crisp).each(function(Ut){return r.stroke(M.select(this),Ut.minor?We.minor.tickcolor:We.tickcolor)}).style("stroke-width",function(Ut){return o.crispRound(Ke,Ut.minor?We.minor.tickwidth:We.tickwidth,1)+"px"}).attr("d",Jt.path).style("display",null),Hr(We,[k]),br.attr("transform",Jt.transFn)},q.drawGrid=function(Ke,We,Jt){if(Jt=Jt||{},"sync"!==We.tickmode){var Gt=We._id+"grid",hr=We.minor&&We.minor.showgrid,br=hr?Jt.vals.filter(function(Sn){return Sn.minor}):[],Ut=We.showgrid?Jt.vals.filter(function(Sn){return!Sn.minor}):[],Kt=Jt.counterAxis;if(Kt&&q.shouldShowZeroLine(Ke,We,Kt))for(var wt="array"===We.tickmode,xr=0;xr<Ut.length;xr++){var Ir=Ut[xr].x;if(wt?!Ir:Math.abs(Ir)<We.dtick/100){if(Ut=Ut.slice(0,xr).concat(Ut.slice(xr+1)),!wt)break;xr--}}We._gw=o.crispRound(Ke,We.gridwidth,1);for(var Ur=hr?o.crispRound(Ke,We.minor.gridwidth,1):0,qt=Jt.layer,on=Jt.minorLayer,an=1;an>=0;an--){var hn=an?qt:on;if(hn){var An=hn.selectAll("path."+Gt).data(an?Ut:br,bt);An.exit().remove(),An.enter().append("path").classed(Gt,1).classed("crisp",!1!==Jt.crisp),An.attr("transform",Jt.transFn).attr("d",Jt.path).each(function(Sn){return r.stroke(M.select(this),Sn.minor?We.minor.gridcolor:We.gridcolor||"#ddd")}).style("stroke-dasharray",function(Sn){return o.dashStyle(Sn.minor?We.minor.griddash:We.griddash,Sn.minor?We.minor.gridwidth:We.gridwidth)}).style("stroke-width",function(Sn){return(Sn.minor?Ur:We._gw)+"px"}).style("display",null),"function"==typeof Jt.path&&An.attr("d",Jt.path)}}Hr(We,[z,D])}},q.drawZeroLine=function(Ke,We,Jt){Jt=Jt||Jt;var Gt=We._id+"zl",hr=q.shouldShowZeroLine(Ke,We,Jt.counterAxis),br=Jt.layer.selectAll("path."+Gt).data(hr?[{x:0,id:We._id}]:[]);br.exit().remove(),br.enter().append("path").classed(Gt,1).classed("zl",1).classed("crisp",!1!==Jt.crisp).each(function(){Jt.layer.selectAll("path").sort(function(Ut,Kt){return V(Ut.id,Kt.id)})}),br.attr("transform",Jt.transFn).attr("d",Jt.path).call(r.stroke,We.zerolinecolor||r.defaultLine).style("stroke-width",o.crispRound(Ke,We.zerolinewidth,We._gw||1)+"px").style("display",null),Hr(We,[_])},q.drawLabels=function(Ke,We,Jt){Jt=Jt||{};var Gt=Ke._fullLayout,hr=We._id,br=hr.charAt(0),Ut=Jt.cls||hr+"tick",Kt=Jt.vals.filter(function(Ja){return Ja.text}),wt=Jt.labelFns,xr=Jt.secondary?0:We.tickangle,Ir=(We._prevTickAngles||{})[Ut],Ur=Jt.layer.selectAll("g."+Ut).data(We.showticklabels?Kt:[],bt),qt=[];function on(Ja,si){Ja.each(function(Ra){var Na=M.select(this),Ni=Na.select(".text-math-group"),ha=wt.anchorFn(Ra,si),yi=Jt.transFn.call(Na.node(),Ra)+(I(si)&&0!=+si?" rotate("+si+","+wt.xFn(Ra)+","+(wt.yFn(Ra)-Ra.fontSize/2)+")":""),gn=u.lineCount(Na),Eo=W*Ra.fontSize,Qi=wt.heightFn(Ra,I(si)?+si:0,(gn-1)*Eo);if(Qi&&(yi+=i(0,Qi)),Ni.empty()){var Ii=Na.select("text");Ii.attr({transform:yi,"text-anchor":ha}),Ii.style("opacity",1),We._adjustTickLabelsOverflow&&We._adjustTickLabelsOverflow()}else{var ao=o.bBox(Ni.node()).width*{end:-.5,start:.5}[ha];Ni.attr("transform",yi+i(ao,0))}})}Ur.enter().append("g").classed(Ut,1).append("text").attr("text-anchor","middle").each(function(Ja){var si=M.select(this),Ra=Ke._promises.length;si.call(u.positionText,wt.xFn(Ja),wt.yFn(Ja)).call(o.font,Ja.font,Ja.fontSize,Ja.fontColor).text(Ja.text).call(u.convertToTspans,Ke),Ke._promises[Ra]?qt.push(Ke._promises.pop().then(function(){on(si,xr)})):on(si,xr)}),Hr(We,[O]),Ur.exit().remove(),Jt.repositionOnUpdate&&Ur.each(function(Ja){M.select(this).select("text").call(u.positionText,wt.xFn(Ja),wt.yFn(Ja))}),We._adjustTickLabelsOverflow=function(){var Ja=We.ticklabeloverflow;if(Ja&&"allow"!==Ja){var si=-1!==Ja.indexOf("hide"),Ra="x"===We._id.charAt(0),Na=0,Ni=Ra?Ke._fullLayout.width:Ke._fullLayout.height;if(-1!==Ja.indexOf("domain")){var ha=n.simpleMap(We.range,We.r2l);Na=We.l2p(ha[0])+We._offset,Ni=We.l2p(ha[1])+We._offset}var yi=Math.min(Na,Ni),gn=Math.max(Na,Ni),Eo=We.side,Qi=1/0,Ii=-1/0;for(var Xo in Ur.each(function(Lo){var qo=M.select(this);if(qo.select(".text-math-group").empty()){var In=o.bBox(qo.node()),Ta=0;Ra?(In.right>gn||In.left<yi)&&(Ta=1):(In.bottom>gn||In.top+(We.tickangle?0:Lo.fontSize/4)<yi)&&(Ta=1);var ls=qo.select("text");Ta?si&&ls.style("opacity",0):(ls.style("opacity",1),Qi="bottom"===Eo||"right"===Eo?Math.min(Qi,Ra?In.top:In.left):-1/0,Ii="top"===Eo||"left"===Eo?Math.max(Ii,Ra?In.bottom:In.right):1/0)}}),Gt._plots){var ao=Gt._plots[Xo];if(We._id===ao.xaxis._id||We._id===ao.yaxis._id){var io=Ra?ao.yaxis:ao.xaxis;io&&(io["_visibleLabelMin_"+We._id]=Qi,io["_visibleLabelMax_"+We._id]=Ii)}}}},We._hideCounterAxisInsideTickLabels=function(Ja){var si="x"===We._id.charAt(0),Ra=[];for(var Na in Gt._plots){var Ni=Gt._plots[Na];We._id!==Ni.xaxis._id&&We._id!==Ni.yaxis._id||Ra.push(si?Ni.yaxis:Ni.xaxis)}Ra.forEach(function(ha,yi){ha&&Cr(ha)&&(Ja||[_,D,z,k,O]).forEach(function(gn){var Eo="tick"===gn.K&&"text"===gn.L&&"period"===We.ticklabelmode,Qi=Gt._plots[We._mainSubplot];(gn.K===_.K?Qi.zerolinelayer.selectAll("."+We._id+"zl"):gn.K===D.K?Qi.minorGridlayer.selectAll("."+We._id):gn.K===z.K?Qi.gridlayer.selectAll("."+We._id):Qi[We._id.charAt(0)+"axislayer"]).each(function(){var Xo=M.select(this);gn.L&&(Xo=Xo.selectAll(gn.L)),Xo.each(function(ao){var io=We.l2p(Eo?Dt(ao):ao.x)+We._offset,Lo=M.select(this);io<We["_visibleLabelMax_"+ha._id]&&io>We["_visibleLabelMin_"+ha._id]?Lo.style("display","none"):"tick"===gn.K&&!yi&&Lo.style("display",null)})})})})},on(Ur,Ir+1?Ir:xr);var hn=null;We._selections&&(We._selections[Ut]=Ur);var Sn=[function an(){return qt.length&&Promise.all(qt)}];We.automargin&&Gt._redrawFromAutoMarginCount&&90===Ir?(hn=90,Sn.push(function(){on(Ur,Ir)})):Sn.push(function An(){if(on(Ur,xr),Kt.length&&"x"===br&&!I(xr)&&("log"!==We.type||"D"!==String(We.dtick).charAt(0))){hn=0;var Ra,Ja=0,si=[];if(Ur.each(function(In){Ja=Math.max(Ja,In.fontSize);var Ta=We.l2p(In.x),ls=kr(this),Do=o.bBox(ls.node());si.push({top:0,bottom:10,height:10,left:Ta-Do.width/2,right:Ta+Do.width/2+2,width:Do.width+2})}),"boundaries"!==We.tickson&&!We.showdividers||Jt.secondary){var yi=Kt.length,gn=Math.abs((Kt[yi-1].x-Kt[0].x)*We._m)/(yi-1),Eo=We.ticklabelposition||"",Qi=function(In){return-1!==Eo.indexOf(In)},Ii=Qi("top"),Xo=Qi("left"),ao=Qi("right"),qo=Qi("bottom")||Xo||Ii||ao?(We.tickwidth||0)+6:0,wo=gn<2.5*Ja||"multicategory"===We.type||"realaxis"===We._name;for(Ra=0;Ra<si.length-1;Ra++)if(n.bBoxIntersect(si[Ra],si[Ra+1],qo)){hn=wo?90:30;break}}else{var Na=2;for(We.ticks&&(Na+=We.tickwidth/2),Ra=0;Ra<si.length;Ra++){var Ni=Kt[Ra].xbnd,ha=si[Ra];if(null!==Ni[0]&&ha.left-We.l2p(Ni[0])<Na||null!==Ni[1]&&We.l2p(Ni[1])-ha.right<Na){hn=90;break}}}hn&&on(Ur,hn)}}),We._tickAngles&&Sn.push(function(){We._tickAngles[Ut]=null===hn?I(xr)?xr:0:hn});var sa=function(){var Ja=0,si=0;return Ur.each(function(Ra,Na){var yi,Ni=kr(this);Ni.select(".text-math-group").empty()&&(We._vals[Na]&&(yi=We._vals[Na].bb||o.bBox(Ni.node()),We._vals[Na].bb=yi),Ja=Math.max(Ja,yi.width),si=Math.max(si,yi.height))}),{labelsMaxW:Ja,labelsMaxH:si}},Rn=We._anchorAxis;if(Rn&&(Rn.autorange||Rn.insiderange)&&Cr(We)&&!Y(Gt,We._id)&&(Gt._insideTickLabelsUpdaterange||(Gt._insideTickLabelsUpdaterange={}),Rn.autorange&&(Gt._insideTickLabelsUpdaterange[Rn._name+".autorange"]=Rn.autorange,Sn.push(sa)),Rn.insiderange)){var Yr=sa(),vr="y"===We._id.charAt(0)?Yr.labelsMaxW:Yr.labelsMaxH;vr+=6,"inside"===We.ticklabelposition&&(vr+=We.ticklen||0);var nn="right"===We.side||"top"===We.side?1:-1,Or=1===nn?1:0,Xn=1===nn?0:1,Vr=[];Vr[Xn]=Rn.range[Xn];var wn=Rn.d2p(Rn.range[Or]),Ca=Rn.d2p(Rn.range[Xn]),Ba=Math.abs(Ca-wn);Ba-vr>0?vr*=1+vr/(Ba-=vr):vr=0,"y"!==We._id.charAt(0)&&(vr=-vr),Vr[Or]=Rn.p2d(Rn.d2p(Rn.range[Or])+nn*vr),"min"===Rn.autorange||"max reversed"===Rn.autorange?(Vr[0]=null,Rn._rangeInitial0=void 0,Rn._rangeInitial1=void 0):("max"===Rn.autorange||"min reversed"===Rn.autorange)&&(Vr[1]=null,Rn._rangeInitial0=void 0,Rn._rangeInitial1=void 0),Gt._insideTickLabelsUpdaterange[Rn._name+".range"]=Vr}var Ka=n.syncOrAsync(Sn);return Ka&&Ka.then&&Ke._promises.push(Ka),Ka},q.getPxPosition=function(Ke,We){var br,Jt=Ke._fullLayout._size,Gt=We._id.charAt(0),hr=We.side;return"free"!==We.anchor?br=We._anchorAxis:"x"===Gt?br={_offset:Jt.t+(1-(We.position||0))*Jt.h,_length:0}:"y"===Gt&&(br={_offset:Jt.l+(We.position||0)*Jt.w+We._shift,_length:0}),"top"===hr||"left"===hr?br._offset:"bottom"===hr||"right"===hr?br._offset+br._length:void 0},q.shouldShowZeroLine=function(Ke,We,Jt){var Gt=n.simpleMap(We.range,We.r2l);return Gt[0]*Gt[1]<=0&&We.zeroline&&("linear"===We.type||"-"===We.type)&&!(We.rangebreaks&&We.maskBreaks(0)===F)&&(Kr(We,0)||!function It(Ke,We,Jt,Gt){var hr=Jt._mainAxis;if(!hr)return;var br=Ke._fullLayout,Ut=We._id.charAt(0),Kt=q.counterLetter(We._id),wt=We._offset+(Math.abs(Gt[0])<Math.abs(Gt[1])==("x"===Ut)?0:We._length);function xr(an){if(!an.showline||!an.linewidth)return!1;var hn=Math.max((an.linewidth+We.zerolinewidth)/2,1);function An(Rn){return"number"==typeof Rn&&Math.abs(Rn-wt)<hn}if(An(an._mainLinePosition)||An(an._mainMirrorPosition))return!0;var Sn=an._linepositions||{};for(var sa in Sn)if(An(Sn[sa][0])||An(Sn[sa][1]))return!0}var Ir=br._plots[Jt._mainSubplot];if(!(Ir.mainplotinfo||Ir).overlays.length)return xr(Jt,wt);for(var Ur=q.list(Ke,Kt),qt=0;qt<Ur.length;qt++){var on=Ur[qt];if(on._mainAxis===hr&&xr(on,wt))return!0}}(Ke,We,Jt,Gt)||function $t(Ke,We){for(var Jt=Ke._fullData,Gt=We._mainSubplot,hr=We._id.charAt(0),br=0;br<Jt.length;br++){var Ut=Jt[br];if(!0===Ut.visible&&Ut.xaxis+Ut.yaxis===Gt&&(T.traceIs(Ut,"bar-like")&&Ut.orientation==={x:"h",y:"v"}[hr]||Ut.fill&&Ut.fill.charAt(Ut.fill.length-1)===hr))return!0}return!1}(Ke,We))},q.clipEnds=function(Ke,We){return We.filter(function(Jt){return Kr(Ke,Jt.x)})},q.allowAutoMargin=function(Ke){for(var We=q.list(Ke,"",!0),Jt=0;Jt<We.length;Jt++){var Gt=We[Jt];Gt.automargin&&(t.allowAutoMargin(Ke,lr(Gt)),Gt.mirror&&t.allowAutoMargin(Ke,rt(Gt))),T.getComponentMethod("rangeslider","isVisible")(Gt)&&t.allowAutoMargin(Ke,$e(Gt))}},q.swap=function(Ke,We){for(var Jt=function ht(Ke,We){var Gt,hr,Jt=[];for(Gt=0;Gt<We.length;Gt++){var br=[],Ut=Ke._fullData[We[Gt]].xaxis,Kt=Ke._fullData[We[Gt]].yaxis;if(Ut&&Kt){for(hr=0;hr<Jt.length;hr++)(-1!==Jt[hr].x.indexOf(Ut)||-1!==Jt[hr].y.indexOf(Kt))&&br.push(hr);if(!br.length){Jt.push({x:[Ut],y:[Kt]});continue}var xr,wt=Jt[br[0]];if(br.length>1)for(hr=1;hr<br.length;hr++)xr=Jt[br[hr]],gt(wt.x,xr.x),gt(wt.y,xr.y);gt(wt.x,[Ut]),gt(wt.y,[Kt])}}return Jt}(Ke,We),Gt=0;Gt<Jt.length;Gt++)ft(Ke,Jt[Gt].x,Jt[Gt].y)}},30640:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(71103).BADNUM,T=I.isArrayOrTypedArray,n=I.isDateTime,i=I.cleanNumber,u=Math.round;function a(l,y){return y?M(l):"number"==typeof l}function v(l){return Math.max(1,(l-1)/1e3)}$.exports=function(y,s,x){var h=y,g=x.noMultiCategory;if(T(h)&&!h.length)return"-";if(!g&&function f(l){return T(l[0])&&T(l[1])}(h))return"multicategory";if(g&&Array.isArray(h[0])){for(var m=[],d=0;d<h.length;d++)if(T(h[d]))for(var A=0;A<h[d].length;A++)m.push(h[d][A]);h=m}if(function o(l,y){for(var s=l.length,x=v(s),h=0,g=0,m={},d=0;d<s;d+=x){var b=l[u(d)],c=String(b);m[c]||(m[c]=1,n(b,y)&&h++,M(b)&&g++)}return h>2*g}(h,s))return"date";var b="strict"!==x.autotypenumbers;return function p(l,y){for(var s=l.length,x=v(s),h=0,g=0,m={},d=0;d<s;d+=x){var b=l[u(d)],c=String(b);if(!m[c]){m[c]=1;var S=typeof b;"boolean"===S?g++:(y?i(b)!==t:"number"===S)?h++:"string"===S&&g++}}return g>2*h}(h,b)?"category":function r(l,y){for(var s=l.length,x=0;x<s;x++)if(a(l[x],y))return!0;return!1}(h,b)?"linear":"-"}},67178:($,K,e)=>{"use strict";var M=e(7347),I=e(97799),t=e(5228),T=e(96906),n=e(84322),i=e(38330),u=e(61606),a=e(6705),r=e(85357),o=e(72323),v=e(83113),p=e(18696),f=e(31520),l=e(49704),y=e(4669).WEEKDAY_PATTERN,s=e(4669).HOUR_PATTERN;function x(m,d,A){function b(z,D){return t.coerce(m,d,i.rangebreaks,z,D)}if(b("enabled")){var S=b("bounds");if(S&&S.length>=2){var E,P,w="";if(2===S.length)for(E=0;E<2;E++)if(P=g(S[E])){w=y;break}var R=b("pattern",w);if(R===y)for(E=0;E<2;E++)(P=g(S[E]))&&(d.bounds[E]=S[E]=P-1);if(R)for(E=0;E<2;E++)switch(P=S[E],R){case y:if(!M(P))return void(d.enabled=!1);if((P=+P)!==Math.floor(P)||P<0||P>=7)return void(d.enabled=!1);d.bounds[E]=S[E]=P;break;case s:if(!M(P))return void(d.enabled=!1);if((P=+P)<0||P>24)return void(d.enabled=!1);d.bounds[E]=S[E]=P}if(!1===A.autorange){var F=A.range;if(F[0]<F[1]){if(S[0]<F[0]&&S[1]>F[1])return void(d.enabled=!1)}else if(S[0]>F[0]&&S[1]<F[1])return void(d.enabled=!1)}}else{var _=b("values");if(!_||!_.length)return void(d.enabled=!1);b("dvalue")}}}$.exports=function(d,A,b,c,S){var z,w=c.letter,E=c.font||{},P=c.splomStash||{},R=b("visible",!c.visibleDflt),F=A._template||{},_=A.type||F.type||"-";"date"===_&&(I.getComponentMethod("calendars","handleDefaults")(d,A,"calendar",c.calendar),c.noTicklabelmode||(z=b("ticklabelmode")));var k="";(!c.noTicklabelposition||"multicategory"===_)&&(k=t.coerce(d,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===z?["outside","inside"]:"x"===w?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),c.noTicklabeloverflow||b("ticklabeloverflow",-1!==k.indexOf("inside")?"hide past domain":"category"===_||"multicategory"===_?"allow":"hide past div"),l(A,S),f(d,A,b,c),v(d,A,b,c),"category"!==_&&!c.noHover&&b("hoverformat");var O=b("color"),U=O!==i.color.dflt?O:E.color,H=P.label||S._dfltTitle[w];if(o(d,A,b,_,c),!R)return A;b("title.text",H),t.coerceFont(b,"title.font",{family:E.family,size:t.bigFont(E.size),color:U}),u(d,A,b,_);var j=c.hasMinor;if(j&&(T.newContainer(A,"minor"),u(d,A,b,_,{isMinor:!0})),r(d,A,b,_,c),a(d,A,b,c),j){var ee=c.isMinor;c.isMinor=!0,a(d,A,b,c),c.isMinor=ee}p(d,A,b,{dfltColor:O,bgColor:c.bgColor,showGrid:c.showGrid,hasMinor:j,attributes:i}),j&&!A.minor.ticks&&!A.minor.showgrid&&delete A.minor,(A.showline||A.ticks)&&b("mirror");var B,W="multicategory"===_;c.noTickson||"category"!==_&&!W||!A.ticks&&!A.showgrid||(W&&(B="boundaries"),"boundaries"===b("tickson",B)&&delete A.ticklabelposition);W&&(b("showdividers")&&(b("dividercolor"),b("dividerwidth")));if("date"===_)if(n(d,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),A.rangebreaks.length){for(var oe=0;oe<A.rangebreaks.length;oe++)if(A.rangebreaks[oe].pattern===y){A._hasDayOfWeekBreaks=!0;break}if(l(A,S),S._has("scattergl")||S._has("splom"))for(var ie=0;ie<c.data.length;ie++){var V=c.data[ie];("scattergl"===V.type||"splom"===V.type)&&(V.visible=!1,t.warn(V.type+" traces do not work on axes with rangebreaks. Setting trace "+V.index+" to `visible: false`."))}}else delete A.rangebreaks;return A};var h={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(m){if("string"==typeof m)return h[m.substr(0,3).toLowerCase()]}},88489:($,K,e)=>{"use strict";var M=e(5329),I=M.FORMAT_LINK,t=M.DATE_FORMAT_LINK;function n(u,a){return["Sets the "+u+" formatting rule"+(a?"for `"+a+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+I+"."].join(" ")}function i(u,a){return n(u,a)+[" And for dates see: "+t+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function T(u,a){return{valType:"string",dflt:"",editType:"none",description:(a?n:i)("hover text",u)+["By default the values are formatted using "+(a?"generic number format":"`"+u+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:n,descriptionWithDates:i}},78168:($,K,e)=>{"use strict";var M=e(97799),I=e(4669);function t(T,n){if(n&&n.length)for(var i=0;i<n.length;i++)if(n[i][T])return!0;return!1}K.id2name=function(n){if("string"==typeof n&&n.match(I.AX_ID_PATTERN)){var i=n.split(" ")[0].substr(1);return"1"===i&&(i=""),n.charAt(0)+"axis"+i}},K.name2id=function(n){if(n.match(I.AX_NAME_PATTERN)){var i=n.substr(5);return"1"===i&&(i=""),n.charAt(0)+i}},K.cleanId=function(n,i,u){var a=/( domain)$/.test(n);if("string"==typeof n&&n.match(I.AX_ID_PATTERN)&&(!i||n.charAt(0)===i)&&(!a||u)){var r=n.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===r&&(r=""),n.charAt(0)+r+(a&&u?" domain":"")}},K.list=function(T,n,i){var u=T._fullLayout;if(!u)return[];var o,a=K.listIds(T,n),r=new Array(a.length);for(o=0;o<a.length;o++){var v=a[o];r[o]=u[v.charAt(0)+"axis"+v.substr(1)]}if(!i){var p=u._subplots.gl3d||[];for(o=0;o<p.length;o++){var f=u[p[o]];n?r.push(f[n+"axis"]):r.push(f.xaxis,f.yaxis,f.zaxis)}}return r},K.listIds=function(T,n){var i=T._fullLayout;if(!i)return[];var u=i._subplots;return n?u[n+"axis"]:u.xaxis.concat(u.yaxis)},K.getFromId=function(T,n,i){var u=T._fullLayout;return n=void 0===n||"string"!=typeof n?n:n.replace(" domain",""),"x"===i?n=n.replace(/y[0-9]*/,""):"y"===i&&(n=n.replace(/x[0-9]*/,"")),u[K.id2name(n)]},K.getFromTrace=function(T,n,i){var u=T._fullLayout,a=null;if(M.traceIs(n,"gl3d")){var r=n.scene;"scene"===r.substr(0,5)&&(a=u[r][i+"axis"])}else a=K.getFromId(T,n[i+"axis"]||i);return a},K.idSort=function(T,n){var i=T.charAt(0),u=n.charAt(0);return i!==u?i>u?1:-1:+(T.substr(1)||1)-+(n.substr(1)||1)},K.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},K.isLinked=function(T,n){return t(n,T._axisMatchGroups)||t(n,T._axisConstraintGroups)}},83113:($,K,e)=>{"use strict";var M=e(90406).isTypedArraySpec;$.exports=function(T,n,i,u){if("category"===n.type){var o,a=T.categoryarray,r=Array.isArray(a)&&a.length>0||M(a);r&&(o="array");var p,v=i("categoryorder",o);"array"===v&&(p=i("categoryarray")),!r&&"array"===v&&(v=n.categoryorder="trace"),"trace"===v?n._initialCategories=[]:"array"===v?n._initialCategories=p.slice():(p=function I(t,T){var u,a,r,n=T.dataAttr||t._id.charAt(0),i={};if(T.axData)u=T.axData;else for(u=[],a=0;a<T.data.length;a++){var o=T.data[a];o[n+"axis"]===t._id&&u.push(o)}for(a=0;a<u.length;a++){var v=u[a][n];for(r=0;r<v.length;r++){var p=v[r];null!=p&&(i[p]=1)}}return Object.keys(i)}(n,u).sort(),"category ascending"===v?n._initialCategories=p:"category descending"===v&&(n._initialCategories=p.reverse()))}}},62239:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(71103),T=t.ONEDAY,n=t.ONEWEEK;K.dtick=function(i,u){var a="log"===u,r="date"===u,o="category"===u,v=r?T:1;if(!i)return v;if(M(i))return(i=Number(i))<=0?v:o?Math.max(1,Math.round(i)):r?Math.max(.1,i):i;if("string"!=typeof i||!r&&!a)return v;var p=i.charAt(0),f=i.substr(1);return(f=M(f)?Number(f):0)<=0||!(r&&"M"===p&&f===Math.round(f)||a&&"L"===p||a&&"D"===p&&(1===f||2===f))?v:i},K.tick0=function(i,u,a,r){return"date"===u?I.cleanDate(i,I.dateTick0(a,r%n==0?1:0)):"D1"!==r&&"D2"!==r?M(i)?Number(i):0:void 0}},4669:($,K,e)=>{"use strict";var M=e(13943).counter;$.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},93698:($,K,e)=>{"use strict";var M=e(5228),I=e(73332),t=e(78168).id2name,T=e(38330),n=e(6382),i=e(49704),u=e(71103).ALMOST_EQUAL,a=e(94598).FROM_BL;function r(s,x,h){var g=h.axIds,m=h.layoutOut,d=h.hasImage,A=m._axisConstraintGroups,b=m._axisMatchGroups,c=x._id,S=c.charAt(0),w=((m._splomAxes||{})[S]||{})[c]||{},E=x._id,P="x"===E.charAt(0);function R(oe,ie){return M.coerce(s,x,T,oe,ie)}x._matchGroup=null,x._constraintGroup=null,R("constrain",d?"domain":"range"),M.coerce(s,x,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var _,z,F=x.type,D=[];for(_=0;_<g.length;_++)if((z=g[_])!==E){m[t(z)].type===F&&D.push(z)}var O=v(A,E);if(O){var U=[];for(_=0;_<D.length;_++)O[z=D[_]]||U.push(z);D=U}var j,ee,H=D.length;H&&(s.matches||w.matches)&&(j=M.coerce(s,x,{matches:{valType:"enumerated",values:D,dflt:-1!==D.indexOf(w.matches)?w.matches:void 0}},"matches"));var W=d&&!P?x.anchor:void 0;if(H&&!j&&(s.scaleanchor||W)&&(ee=M.coerce(s,x,{scaleanchor:{valType:"enumerated",values:D.concat([!1])}},"scaleanchor",W)),j){x._matchGroup=p(b,E,j,1);var B=m[t(j)],te=o(m,x)/o(m,B);P!==("x"===j.charAt(0))&&(te=(P?"x":"y")+te),p(A,E,j,te)}else s.matches&&-1!==g.indexOf(s.matches)&&M.warn("ignored "+x._name+'.matches: "'+s.matches+'" to avoid an infinite loop');if(ee){var q=R("scaleratio");q||(q=x.scaleratio=1),p(A,E,ee,q)}else s.scaleanchor&&-1!==g.indexOf(s.scaleanchor)&&M.warn("ignored "+x._name+'.scaleanchor: "'+s.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function o(s,x){var h=x.domain;return h||(h=s[t(x.overlaying)].domain),h[1]-h[0]}function v(s,x){for(var h=0;h<s.length;h++)if(s[h][x])return s[h];return null}function p(s,x,h,g){var m,d,A,b,c,S=v(s,x);null===S?((S={})[x]=1,c=s.length,s.push(S)):c=s.indexOf(S);var w=Object.keys(S);for(m=0;m<s.length;m++)if(A=s[m],m!==c&&A[h]){var E=A[h];for(d=0;d<w.length;d++)A[b=w[d]]=f(E,f(g,S[b]));return void s.splice(c,1)}if(1!==g)for(d=0;d<w.length;d++){var P=w[d];S[P]=f(g,S[P])}S[h]=1}function f(s,x){var m,d,h="",g="";"string"==typeof s&&(m=(h=s.match(/^[xy]*/)[0]).length,s=+s.substr(m)),"string"==typeof x&&(d=(g=x.match(/^[xy]*/)[0]).length,x=+x.substr(d));var A=s*x;return m||d?m&&d&&h.charAt(0)!==g.charAt(0)?m===d?A:(m>d?h.substr(d):g.substr(m))+A:h+g+s*x:A}function l(s,x){for(var h=x._size,g=h.h/h.w,m={},d=Object.keys(s),A=0;A<d.length;A++){var b=d[A],c=s[b];if("string"==typeof c){var S=c.match(/^[xy]*/)[0],w=S.length;c=+c.substr(w);for(var E="y"===S.charAt(0)?g:1/g,P=0;P<w;P++)c*=E}m[b]=c}return m}function y(s,x){var h=s._inputDomain,g=a[s.constraintoward],m=h[0]+(h[1]-h[0])*g;s.domain=s._input.domain=[m+(h[0]-m)/x,m+(h[1]-m)/x],s.setScale()}K.handleDefaults=function(s,x,h){var b,c,S,w,E,P,R,F,g=h.axIds,m=h.axHasImage,d=x._axisConstraintGroups=[],A=x._axisMatchGroups=[];for(b=0;b<g.length;b++)r(E=s[w=t(g[b])],P=x[w],{axIds:g,layoutOut:x,hasImage:m[w]});function _(W,B){for(b=0;b<W.length;b++)for(S in c=W[b])x[t(S)][B]=c}for(_(A,"_matchGroup"),b=0;b<d.length;b++)for(S in c=d[b])if((P=x[t(S)]).fixedrange){for(var z in c){var D=t(z);!1===(s[D]||{}).fixedrange&&M.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),x[D].fixedrange=!0}break}for(b=0;b<d.length;){for(S in c=d[b]){(P=x[t(S)])._matchGroup&&Object.keys(P._matchGroup).length===Object.keys(c).length&&(d.splice(b,1),b--);break}b++}_(d,"_constraintGroup");var k=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],O=!1,U=!1;function H(){F=P[R],"rangebreaks"===R&&(U=P._hasDayOfWeekBreaks)}for(b=0;b<A.length;b++){c=A[b];for(var j=0;j<k.length;j++){var ee;for(S in R=k[j],F=null,c)if(E=s[w=t(S)],P=x[w],R in P){if(!P.matches&&(ee=P,R in E)){H();break}null===F&&R in E&&H()}if("range"===R&&F&&E.range&&2===E.range.length&&null!==E.range[0]&&null!==E.range[1]&&(O=!0),"autorange"===R&&null===F&&O&&(F=!1),null===F&&R in ee&&(F=ee[R]),null!==F)for(S in c)(P=x[t(S)])[R]="range"===R?F.slice():F,"rangebreaks"===R&&(P._hasDayOfWeekBreaks=U,i(P,x))}}},K.enforce=function(x){var m,d,A,b,c,S,w,E,h=x._fullLayout,g=h._axisConstraintGroups||[];for(m=0;m<g.length;m++){A=l(g[m],h);var P=Object.keys(A),R=1/0,F=0,_=1/0,z={},D={},k=!1;for(d=0;d<P.length;d++)D[b=P[d]]=c=h[t(b)],c._inputDomain?c.domain=c._inputDomain.slice():c._inputDomain=c.domain.slice(),c._inputRange||(c._inputRange=c.range.slice()),c.setScale(),z[b]=S=Math.abs(c._m)/A[b],R=Math.min(R,S),("domain"===c.constrain||!c._constraintShrinkable)&&(_=Math.min(_,S)),delete c._constraintShrinkable,F=Math.max(F,S),"domain"===c.constrain&&(k=!0);if(!(R>u*F)||k)for(d=0;d<P.length;d++)if(S=z[b=P[d]],w=(c=D[b]).constrain,S!==_||"domain"===w)if(E=S/_,"range"===w)n(c,E);else{var O=c._inputDomain,U=(c.domain[1]-c.domain[0])/(O[1]-O[0]),H=(c.r2l(c.range[1])-c.r2l(c.range[0]))/(c.r2l(c._inputRange[1])-c.r2l(c._inputRange[0]));if((E/=U)*H<1){c.domain=c._input.domain=O.slice(),n(c,E);continue}if(H<1&&(c.range=c._input.range=c._inputRange.slice(),E*=H),c.autorange){var j=c.r2l(c.range[0]),ee=c.r2l(c.range[1]),W=(j+ee)/2,B=W,te=W,q=Math.abs(ee-W),oe=W-q*E*1.0001,ie=W+q*E*1.0001,V=I.makePadFn(h,c,0),Y=I.makePadFn(h,c,1);y(c,E);var re,ne,ae=Math.abs(c._m),X=I.concatExtremes(x,c),J=X.min,ue=X.max;for(ne=0;ne<J.length;ne++)(re=J[ne].val-V(J[ne])/ae)>oe&&re<B&&(B=re);for(ne=0;ne<ue.length;ne++)(re=ue[ne].val+Y(ue[ne])/ae)<ie&&re>te&&(te=re);E/=(te-B)/(2*q),B=c.l2r(B),te=c.l2r(te),c.range=c._input.range=j<ee?[B,te]:[te,B]}y(c,E)}}},K.getAxisGroup=function(x,h){for(var g=x._axisMatchGroups,m=0;m<g.length;m++){if(g[m][h])return"g"+m}return h},K.clean=function(x,h){if(h._inputDomain){for(var g=!1,m=h._id,d=x._fullLayout._axisConstraintGroups,A=0;A<d.length;A++)if(d[A][m]){g=!0;break}(!g||"domain"!==h.constrain)&&(h._input.domain=h.domain=h._inputDomain,delete h._inputDomain)}}},54078:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=I.numberFormat,T=e(80791),n=e(45519),i=e(97799),u=I.strTranslate,a=e(88565),r=e(8416),o=e(27630),v=e(76863),p=e(91464),f=e(93720),l=e(25429),y=e(85996),s=y.selectingOrDrawing,x=y.freeMode,h=e(94598).FROM_TL,g=e(77749),m=e(88845).redrawReglTraces,d=e(31556),A=e(78168).getFromId,b=e(48356).prepSelect,c=e(48356).clearOutline,S=e(48356).selectOnClick,w=e(6382),E=e(4669),P=E.MINDRAG,R=E.MINZOOM,F=!0;function z(re,ne,se,de){var be=I.ensureSingle(re.draglayer,ne,se,function(De){De.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",re.id)});return be.call(f,de),be.node()}function D(re,ne,se,de,be,De,_e){var Ce=z(re,"rect",ne,se);return M.select(Ce).call(o.setRect,de,be,De,_e),Ce}function k(re,ne){for(var se=0;se<re.length;se++)if(!re[se].fixedrange)return ne;return""}function U(re,ne,se,de,be){for(var De=0;De<re.length;De++){var _e=re[De];if(!_e.fixedrange)if(_e.rangebreaks){var Ce="y"===_e._id.charAt(0),Le=Ce?1-ne:ne,Fe=Ce?1-se:se;de[_e._name+".range[0]"]=_e.l2r(_e.p2l(Le*_e._length)),de[_e._name+".range[1]"]=_e.l2r(_e.p2l(Fe*_e._length))}else{var ke=_e._rl[0],ze=_e._rl[1]-ke;de[_e._name+".range[0]"]=_e.l2r(ke+ze*ne),de[_e._name+".range[1]"]=_e.l2r(ke+ze*se)}}if(be&&be.length){var Pe=(ne+(1-se))/2;U(be,Pe,1-Pe,de,[])}}function H(re,ne){for(var se=0;se<re.length;se++){var de=re[se];if(!de.fixedrange){if(de.rangebreaks){var De=de._length,Le=(de.p2l(0+ne)-de.p2l(0)+(de.p2l(De+ne)-de.p2l(De)))/2;de.range=[de.l2r(de._rl[0]-Le),de.l2r(de._rl[1]-Le)]}else de.range=[de.l2r(de._rl[0]-ne/de._m),de.l2r(de._rl[1]-ne/de._m)];de.limitRange&&de.limitRange()}}}function j(re){return 1-(re>=0?Math.min(re,.9):1/(1/Math.max(re,-.3)+3.222))}function W(re,ne,se,de,be){return re.append("path").attr("class","zoombox").style({fill:ne>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",u(se,de)).attr("d",be+"Z")}function B(re,ne,se){return re.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",u(ne,se)).attr("d","M0,0Z")}function te(re,ne,se,de,be,De){re.attr("d",de+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),q(re,ne,be,De)}function q(re,ne,se,de){se||(re.transition().style("fill",de>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200))}function oe(re){M.select(re).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function ie(re){F&&re.data&&re._context.showTips&&(I.notifier(I._(re,"Double-click to zoom back out"),"long"),F=!1)}function ae(re){var ne=Math.floor(Math.min(re.b-re.t,re.r-re.l,R)/2);return"M"+(re.l-3.5)+","+(re.t-.5+ne)+"h3v"+-ne+"h"+ne+"v-3h-"+(ne+3)+"ZM"+(re.r+3.5)+","+(re.t-.5+ne)+"h-3v"+-ne+"h"+-ne+"v-3h"+(ne+3)+"ZM"+(re.r+3.5)+","+(re.b+.5-ne)+"h-3v"+ne+"h"+-ne+"v3h"+(ne+3)+"ZM"+(re.l-3.5)+","+(re.b+.5-ne)+"h3v"+ne+"h"+ne+"v3h-"+(ne+3)+"Z"}function X(re,ne,se,de,be){for(var Le,Fe,ke,ze,De=!1,_e={},Ce={},Pe=(be||{}).xaHash,Ie=(be||{}).yaHash,Qe=0;Qe<ne.length;Qe++){var at=ne[Qe];for(Le in se)if(at[Le]){for(ke in at)(!be||!Pe[ke]&&!Ie[ke])&&!("x"===ke.charAt(0)?se:de)[ke]&&(_e[ke]=Le);for(Fe in de)(!be||!Pe[Fe]&&!Ie[Fe])&&at[Fe]&&(De=!0)}for(Fe in de)if(at[Fe])for(ze in at)(!be||!Pe[ze]&&!Ie[ze])&&!("x"===ze.charAt(0)?se:de)[ze]&&(Ce[ze]=Fe)}De&&(I.extendFlat(_e,Ce),Ce={});var Be={},Ne=[];for(ke in _e){var nt=A(re,ke);Ne.push(nt),Be[nt._id]=nt}var ct={},mt=[];for(ze in Ce){var Bt=A(re,ze);mt.push(Bt),ct[Bt._id]=Bt}return{xaHash:Be,yaHash:ct,xaxes:Ne,yaxes:mt,xLinks:_e,yLinks:Ce,isSubplotConstrained:De}}function J(re,ne){if(n){var se=void 0!==re.onwheel?"wheel":"mousewheel";re._onwheel&&re.removeEventListener(se,re._onwheel),re._onwheel=ne,re.addEventListener(se,ne,{passive:!1})}else void 0!==re.onwheel?re.onwheel=ne:void 0!==re.onmousewheel?re.onmousewheel=ne:re.isAddedWheelEvent||(re.isAddedWheelEvent=!0,re.addEventListener("wheel",ne,{passive:!1}))}function ue(re){var ne=[];for(var se in re)ne.push(re[se]);return ne}$.exports={makeDragBox:function _(re,ne,se,de,be,De,_e,Ce){var ze,Pe,Ie,Qe,at,Be,Ne,nt,ct,mt,Bt,Rt,zt,St,Xt,Mt,st,Se,pe,ge,Oe,we,He,Le=re._fullLayout._zoomlayer,Fe=_e+Ce==="nsew",ke=1===(_e+Ce).length;function Xe(){if(ze=ne.xaxis,Pe=ne.yaxis,ct=ze._length,mt=Pe._length,Ne=ze._offset,nt=Pe._offset,(Ie={})[ze._id]=ze,(Qe={})[Pe._id]=Pe,_e&&Ce)for(var Kt=ne.overlays,wt=0;wt<Kt.length;wt++){var xr=Kt[wt].xaxis;Ie[xr._id]=xr;var Ir=Kt[wt].yaxis;Qe[Ir._id]=Ir}at=ue(Ie),Be=ue(Qe),zt=k(at,Ce),St=k(Be,_e),Xt=!St&&!zt,Rt=X(re,re._fullLayout._axisMatchGroups,Ie,Qe);var Ur=(Bt=X(re,re._fullLayout._axisConstraintGroups,Ie,Qe,Rt)).isSubplotConstrained||Rt.isSubplotConstrained;Mt=Ce||Ur,st=_e||Ur;var qt=re._fullLayout;Se=qt._has("scattergl"),pe=qt._has("splom"),ge=qt._has("svg")}se+=ne.yaxis._shift,Xe();var ut=function ee(re,ne,se){return re?"nsew"===re?se?"":"pan"===ne?"move":"crosshair":re.toLowerCase()+"-resize":"pointer"}(St+zt,re._fullLayout.dragmode,Fe),Ze=D(ne,_e+Ce+"drag",ut,se,de,be,De);if(Xt&&!Fe)return Ze.onmousedown=null,Ze.style.pointerEvents="none",Ze;var bt,Pt,cr,Sr,Kr,It,$t,kr,lr,rt,qe={element:Ze,gd:re,plotinfo:ne};function Dt(){qe.plotinfo.selection=!1,c(re)}function Ft(Kt,wt){var xr=qe.gd;if(xr._fullLayout._activeShapeIndex>=0)xr._fullLayout._deactivateShape(xr);else{var Ir=xr._fullLayout.clickmode;if(oe(xr),2===Kt&&!ke&&function We(){if(!re._transitioningWithDuration){var Kt=re._context.doubleClick,wt=[];zt&&(wt=wt.concat(at)),St&&(wt=wt.concat(Be)),Rt.xaxes&&(wt=wt.concat(Rt.xaxes)),Rt.yaxes&&(wt=wt.concat(Rt.yaxes));var Ir,Ur,xr={};if("reset+autosize"===Kt)for(Kt="autosize",Ur=0;Ur<wt.length;Ur++){var qt=(Ir=wt[Ur])._rangeInitial0,on=Ir._rangeInitial1,an=void 0!==qt||void 0!==on;if(an&&(void 0!==qt&&qt!==Ir.range[0]||void 0!==on&&on!==Ir.range[1])||!an&&!0!==Ir.autorange){Kt="reset";break}}if("autosize"===Kt)for(Ur=0;Ur<wt.length;Ur++)(Ir=wt[Ur]).fixedrange||(xr[Ir._name+".autorange"]=!0);else if("reset"===Kt)for((zt||Bt.isSubplotConstrained)&&(wt=wt.concat(Bt.xaxes)),St&&!Bt.isSubplotConstrained&&(wt=wt.concat(Bt.yaxes)),Bt.isSubplotConstrained&&(zt?St||(wt=wt.concat(Be)):wt=wt.concat(at)),Ur=0;Ur<wt.length;Ur++)if(!(Ir=wt[Ur]).fixedrange){var hn=Ir._name,An=Ir._autorangeInitial;void 0===Ir._rangeInitial0&&void 0===Ir._rangeInitial1?xr[hn+".autorange"]=!0:void 0===Ir._rangeInitial0?(xr[hn+".autorange"]=An,xr[hn+".range"]=[null,Ir._rangeInitial1]):void 0===Ir._rangeInitial1?(xr[hn+".range"]=[Ir._rangeInitial0,null],xr[hn+".autorange"]=An):xr[hn+".range"]=[Ir._rangeInitial0,Ir._rangeInitial1]}re.emit("plotly_doubleclick",null),i.call("_guiRelayout",re,xr)}}(),Fe)Ir.indexOf("select")>-1&&S(wt,xr,at,Be,ne.id,qe),Ir.indexOf("event")>-1&&v.click(xr,wt,ne.id);else if(1===Kt&&ke){var Ur=_e?Pe:ze,qt="s"===_e||"w"===Ce?0:1,on=Ur._name+".range["+qt+"]",an=function O(re,ne){var be,se=re.range[ne],de=Math.abs(se-re.range[1-ne]);return"date"===re.type?se:"log"===re.type?(be=Math.ceil(Math.max(0,-Math.log(de)/Math.LN10))+3,t("."+be+"g")(Math.pow(10,se))):(be=Math.floor(Math.log(Math.abs(se))/Math.LN10)-Math.floor(Math.log(de)/Math.LN10)+4,t("."+String(be)+"g")(se))}(Ur,qt),hn="left",An="middle";if(Ur.fixedrange)return;_e?(An="n"===_e?"top":"bottom","right"===Ur.side&&(hn="right")):"e"===Ce&&(hn="right"),xr._context.showAxisRangeEntryBoxes&&M.select(Ze).call(a.makeEditable,{gd:xr,immediate:!0,background:xr._fullLayout.paper_bgcolor,text:String(an),fill:Ur.tickfont?Ur.tickfont.color:"#444",horizontalAlign:hn,verticalAlign:An}).on("edit",function(Sn){var sa=Ur.d2r(Sn);void 0!==sa&&i.call("_guiRelayout",xr,on,sa)})}}}function ht(Kt,wt){if(re._transitioningWithDuration)return!1;var xr=Math.max(0,Math.min(ct,we*Kt+bt)),Ir=Math.max(0,Math.min(mt,He*wt+Pt)),Ur=Math.abs(xr-bt),qt=Math.abs(Ir-Pt);function on(){$t="",cr.r=cr.l,cr.t=cr.b,lr.attr("d","M0,0Z")}if(cr.l=Math.min(bt,xr),cr.r=Math.max(bt,xr),cr.t=Math.min(Pt,Ir),cr.b=Math.max(Pt,Ir),Bt.isSubplotConstrained)Ur>R||qt>R?($t="xy",Ur/ct>qt/mt?(qt=Ur*mt/ct,Pt>Ir?cr.t=Pt-qt:cr.b=Pt+qt):(Ur=qt*ct/mt,bt>xr?cr.l=bt-Ur:cr.r=bt+Ur),lr.attr("d",ae(cr))):on();else if(Rt.isSubplotConstrained)if(Ur>R||qt>R){$t="xy";var an=Math.min(cr.l/ct,(mt-cr.b)/mt),hn=Math.max(cr.r/ct,(mt-cr.t)/mt);cr.l=an*ct,cr.r=hn*ct,cr.b=(1-an)*mt,cr.t=(1-hn)*mt,lr.attr("d",ae(cr))}else on();else!St||qt<Math.min(Math.max(.6*Ur,P),R)?Ur<P||!zt?on():(cr.t=0,cr.b=mt,$t="x",lr.attr("d",function V(re,ne){return"M"+(re.l-.5)+","+(ne-R-.5)+"h-3v"+(2*R+1)+"h3ZM"+(re.r+.5)+","+(ne-R-.5)+"h3v"+(2*R+1)+"h-3Z"}(cr,Pt))):!zt||Ur<Math.min(.6*qt,R)?(cr.l=0,cr.r=ct,$t="y",lr.attr("d",function Y(re,ne){return"M"+(ne-R-.5)+","+(re.t-.5)+"v-3h"+(2*R+1)+"v3ZM"+(ne-R-.5)+","+(re.b+.5)+"v3h"+(2*R+1)+"v-3Z"}(cr,bt))):($t="xy",lr.attr("d",ae(cr)));cr.w=cr.r-cr.l,cr.h=cr.b-cr.t,$t&&(rt=!0),re._dragged=rt,te(kr,lr,cr,Kr,It,Sr),gt(),re.emit("plotly_relayouting",Oe),It=!0}function gt(){Oe={},("xy"===$t||"x"===$t)&&(U(at,cr.l/ct,cr.r/ct,Oe,Bt.xaxes),Wr("x",Oe)),("xy"===$t||"y"===$t)&&(U(Be,(mt-cr.b)/mt,(mt-cr.t)/mt,Oe,Bt.yaxes),Wr("y",Oe))}function ft(){gt(),oe(re),Jt(),ie(re)}qe.prepFn=function(Kt,wt,xr){var Ir=qe.dragmode,Ur=re._fullLayout.dragmode;Ur!==Ir&&(qe.dragmode=Ur),Xe(),we=re._fullLayout._invScaleX,He=re._fullLayout._invScaleY,Xt||(Fe?Kt.shiftKey?"pan"===Ur?Ur="zoom":s(Ur)||(Ur="pan"):Kt.ctrlKey&&(Ur="pan"):Ur="pan"),x(Ur)?qe.minDrag=1:qe.minDrag=void 0,s(Ur)?(qe.xaxes=at,qe.yaxes=Be,b(Kt,wt,xr,qe,Ur)):(qe.clickFn=Ft,s(Ir)&&Dt(),Xt||("zoom"===Ur?(qe.moveFn=ht,qe.doneFn=ft,qe.minDrag=1,function $e(Kt,wt,xr){var Ir=Ze.getBoundingClientRect();bt=wt-Ir.left,Pt=xr-Ir.top,re._fullLayout._calcInverseTransform(re);var Ur=I.apply3DTransform(re._fullLayout._invTransform)(bt,Pt);bt=Ur[0],Pt=Ur[1],cr={l:bt,r:bt,w:0,t:Pt,b:Pt,h:0},Sr=re._hmpixcount?re._hmlumcount/re._hmpixcount:T(re._fullLayout.plot_bgcolor).getLuminance(),It=!1,$t="xy",rt=!1,kr=W(Le,Sr,Ne,nt,Kr="M0,0H"+ct+"V"+mt+"H0V0"),lr=B(Le,Ne,nt)}(0,wt,xr)):"pan"===Ur&&(qe.moveFn=zr,qe.doneFn=Jt))),re._fullLayout._redrag=function(){var qt=re._dragdata;if(qt&&qt.element===Ze){var on=re._fullLayout.dragmode;s(on)||(Xe(),Gt([0,0,ct,mt]),qe.moveFn(qt.dx,qt.dy))}}},l.init(qe);var Ct=[0,0,ct,mt],sr=null,tr=E.REDRAWDELAY,Cr=ne.mainplot?re._fullLayout._plots[ne.mainplot]:ne;function zr(Kt,wt){if(Kt*=we,wt*=He,!re._transitioningWithDuration){if(re._fullLayout._replotting=!0,"ew"===zt||"ns"===St){var xr=zt?-Kt:0,Ir=St?-wt:0;if(Rt.isSubplotConstrained){if(zt&&St){var Ur=(Kt/ct-wt/mt)/2;xr=-(Kt=Ur*ct),Ir=-(wt=-Ur*mt)}St?xr=-Ir*ct/mt:Ir=-xr*mt/ct}return zt&&(H(at,Kt),Wr("x")),St&&(H(Be,wt),Wr("y")),Gt([xr,Ir,ct,mt]),Ke(),void re.emit("plotly_relayouting",Oe)}var hn,An,on="w"===zt==("n"===St)?1:-1;if(zt&&St&&(Bt.isSubplotConstrained||Rt.isSubplotConstrained)){var an=(Kt/ct+on*wt/mt)/2;Kt=an*ct,wt=on*an*mt}if("w"===zt?Kt=qt(at,0,Kt):"e"===zt?Kt=qt(at,1,-Kt):zt||(Kt=0),"n"===St?wt=qt(Be,1,wt):"s"===St?wt=qt(Be,0,-wt):St||(wt=0),hn="w"===zt?Kt:0,An="n"===St?wt:0,Bt.isSubplotConstrained&&!Rt.isSubplotConstrained||Rt.isSubplotConstrained&&zt&&St&&on>0){var Sn;if(Rt.isSubplotConstrained||!zt&&1===St.length){for(Sn=0;Sn<at.length;Sn++)at[Sn].range=at[Sn]._r.slice(),w(at[Sn],1-wt/mt);hn=(Kt=wt*ct/mt)/2}if(Rt.isSubplotConstrained||!St&&1===zt.length){for(Sn=0;Sn<Be.length;Sn++)Be[Sn].range=Be[Sn]._r.slice(),w(Be[Sn],1-Kt/ct);An=(wt=Kt*mt/ct)/2}}(!Rt.isSubplotConstrained||!St)&&Wr("x"),(!Rt.isSubplotConstrained||!zt)&&Wr("y");var sa=ct-Kt,Rn=mt-wt;Rt.isSubplotConstrained&&!(zt&&St)&&(zt?(An=hn?0:Kt*mt/ct,Rn=sa*mt/ct):(hn=An?0:wt*ct/mt,sa=Rn*ct/mt)),Gt([hn,An,sa,Rn]),Ke(),re.emit("plotly_relayouting",Oe)}function qt(Yr,vr,nn){for(var Xn,Vr,Or=1-vr,wn=0;wn<Yr.length;wn++){var Ca=Yr[wn];if(!Ca.fixedrange){Xn=Ca,Vr=Ca._rl[Or]+(Ca._rl[vr]-Ca._rl[Or])/j(nn/Ca._length);var Ba=Ca.l2r(Vr);!1!==Ba&&void 0!==Ba&&(Ca.range[vr]=Ba)}}return Xn._length*(Xn._rl[vr]-Vr)/(Xn._rl[vr]-Xn._rl[Or])}}function Wr(Kt,wt){for(var xr=Rt.isSubplotConstrained?{x:Be,y:at}[Kt]:Rt[Kt+"axes"],Ir=Rt.isSubplotConstrained?{x:at,y:Be}[Kt]:[],Ur=0;Ur<xr.length;Ur++){var qt=xr[Ur],on=qt._id,an=Rt.xLinks[on]||Rt.yLinks[on],hn=Ir[0]||Ie[an]||Qe[an];hn&&(wt?(wt[qt._name+".range[0]"]=wt[hn._name+".range[0]"],wt[qt._name+".range[1]"]=wt[hn._name+".range[1]"]):qt.range=hn.range.slice())}}function Ke(){var wt,Kt=[];function xr(on){for(wt=0;wt<on.length;wt++)on[wt].fixedrange||Kt.push(on[wt]._id)}function Ir(on,an){for(wt=0;wt<on.length;wt++){var hn=on[wt],An=hn[an];!hn.fixedrange&&"sync"===An.tickmode&&Kt.push(An._id)}}for(Mt&&(xr(at),xr(Bt.xaxes),xr(Rt.xaxes),Ir(ne.overlays,"xaxis")),st&&(xr(Be),xr(Bt.yaxes),xr(Rt.yaxes),Ir(ne.overlays,"yaxis")),Oe={},wt=0;wt<Kt.length;wt++){var Ur=Kt[wt],qt=A(re,Ur);p.drawOne(re,qt,{skipTitle:!0}),Oe[qt._name+".range[0]"]=qt.range[0],Oe[qt._name+".range[1]"]=qt.range[1]}p.redrawComponents(re,Kt)}function Jt(){Gt([0,0,ct,mt]),I.syncOrAsync([d.previousPromises,function(){re._fullLayout._replotting=!1,i.call("_guiRelayout",re,Oe)}],re)}function Gt(Kt){var Ur,qt,on,an,wt=re._fullLayout,xr=wt._plots,Ir=wt._subplots.cartesian;if(pe&&i.subplotsRegistry.splom.drag(re),Se)for(Ur=0;Ur<Ir.length;Ur++)if(on=(qt=xr[Ir[Ur]]).xaxis,an=qt.yaxis,qt._scene){var hn=I.simpleMap(on.range,on.r2l),An=I.simpleMap(an.range,an.r2l);on.limitRange&&on.limitRange(),an.limitRange&&an.limitRange(),hn=on.range,An=an.range,qt._scene.update({range:[hn[0],An[0],hn[1],An[1]]})}if((pe||Se)&&(g(re),m(re)),ge){var Sn=Kt[2]/ze._length,sa=Kt[3]/Pe._length;for(Ur=0;Ur<Ir.length;Ur++){on=(qt=xr[Ir[Ur]]).xaxis,an=qt.yaxis;var vr,nn,Or,Xn,Rn=(Mt||Rt.isSubplotConstrained)&&!on.fixedrange&&Ie[on._id],Yr=(st||Rt.isSubplotConstrained)&&!an.fixedrange&&Qe[an._id];if(Rn?(vr=Sn,Or=Ce||Rt.isSubplotConstrained?Kt[0]:Ut(on,vr)):Rt.xaHash[on._id]?(vr=Sn,Or=Kt[0]*on._length/ze._length):Rt.yaHash[on._id]?(vr=sa,Or="ns"===St?-Kt[1]*on._length/Pe._length:Ut(on,vr,{n:"top",s:"bottom"}[St])):Or=br(on,vr=hr(on,Sn,sa)),vr>1&&(void 0!==on.maxallowed&&Mt===(on.range[0]<on.range[1]?"e":"w")||void 0!==on.minallowed&&Mt===(on.range[0]<on.range[1]?"w":"e"))&&(vr=1,Or=0),Yr?(nn=sa,Xn=_e||Rt.isSubplotConstrained?Kt[1]:Ut(an,nn)):Rt.yaHash[an._id]?(nn=sa,Xn=Kt[1]*an._length/Pe._length):Rt.xaHash[an._id]?(nn=Sn,Xn="ew"===zt?-Kt[0]*an._length/ze._length:Ut(an,nn,{e:"right",w:"left"}[zt])):Xn=br(an,nn=hr(an,Sn,sa)),nn>1&&(void 0!==an.maxallowed&&st===(an.range[0]<an.range[1]?"n":"s")||void 0!==an.minallowed&&st===(an.range[0]<an.range[1]?"s":"n"))&&(nn=1,Xn=0),vr||nn){vr||(vr=1),nn||(nn=1);var Vr=on._offset-Or/vr,wn=an._offset-Xn/nn;qt.clipRect.call(o.setTranslate,Or,Xn).call(o.setScale,vr,nn),qt.plot.call(o.setTranslate,Vr,wn).call(o.setScale,1/vr,1/nn),(vr!==qt.xScaleFactor||nn!==qt.yScaleFactor)&&(o.setPointGroupScale(qt.zoomScalePts,vr,nn),o.setTextPointsScale(qt.zoomScaleTxt,vr,nn)),o.hideOutsideRangePoints(qt.clipOnAxisFalseTraces,qt),qt.xScaleFactor=vr,qt.yScaleFactor=nn}}}}function hr(Kt,wt,xr){return Kt.fixedrange?0:Mt&&Bt.xaHash[Kt._id]?wt:st&&(Bt.isSubplotConstrained?Bt.xaHash:Bt.yaHash)[Kt._id]?xr:0}function br(Kt,wt){return wt?(Kt.range=Kt._r.slice(),w(Kt,wt),Ut(Kt,wt)):0}function Ut(Kt,wt,xr){return Kt._length*(1-wt)*h[xr||Kt.constraintoward||"middle"]}return _e.length*Ce.length!=1&&J(Ze,function Hr(Kt){if(re._context._scrollZoom.cartesian||re._fullLayout._enablescrollzoom){if(Dt(),re._transitioningWithDuration)return Kt.preventDefault(),void Kt.stopPropagation();Xe(),clearTimeout(sr);var wt=-Kt.deltaY;if(isFinite(wt)||(wt=Kt.wheelDelta/10),isFinite(wt)){var on,xr=Math.exp(-Math.min(Math.max(wt,-20),20)/200),Ir=Cr.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Ur=(Kt.clientX-Ir.left)/Ir.width,qt=(Ir.bottom-Kt.clientY)/Ir.height;if(Mt){for(Ce||(Ur=.5),on=0;on<at.length;on++)an(at[on],Ur,xr);Wr("x"),Ct[2]*=xr,Ct[0]+=Ct[2]*Ur*(1/xr-1)}if(st){for(_e||(qt=.5),on=0;on<Be.length;on++)an(Be[on],qt,xr);Wr("y"),Ct[3]*=xr,Ct[1]+=Ct[3]*(1-qt)*(1/xr-1)}Gt(Ct),Ke(),re.emit("plotly_relayouting",Oe),sr=setTimeout(function(){re._fullLayout&&(Ct=[0,0,ct,mt],Jt())},tr),Kt.preventDefault()}else I.log("Did not find wheel motion attributes: ",Kt)}function an(hn,An,Sn){if(!hn.fixedrange){var sa=I.simpleMap(hn.range,hn.r2l),Rn=sa[0]+(sa[1]-sa[0])*An;hn.range=sa.map(function Yr(vr){return hn.l2r(Rn+(vr-Rn)*Sn)})}}}),Ze},makeDragger:z,makeRectDragger:D,makeZoombox:W,makeCorners:B,updateZoombox:te,xyCorners:ae,transitionZoombox:q,removeZoombox:oe,showDoubleClickNotifier:ie,attachWheelEventHandler:J}},54443:($,K,e)=>{"use strict";var M=e(21572),I=e(76863),t=e(25429),T=e(93720),n=e(54078).makeDragBox,i=e(4669).DRAGGERSIZE;K.initInteractions=function(a){var r=a._fullLayout;if(a._context.staticPlot)M.select(a).selectAll(".drag").remove();else if(r._has("cartesian")||r._has("splom")){Object.keys(r._plots||{}).sort(function(p,f){if((r._plots[p].mainplot&&!0)===(r._plots[f].mainplot&&!0)){var l=p.split("y"),y=f.split("y");return l[0]===y[0]?Number(l[1]||1)-Number(y[1]||1):Number(l[0]||1)-Number(y[0]||1)}return r._plots[p].mainplot?1:-1}).forEach(function(p){var f=r._plots[p],l=f.xaxis,y=f.yaxis;if(!f.mainplot){var s=n(a,f,l._offset,y._offset,l._length,y._length,"ns","ew");s.onmousemove=function(g){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===p&&a._fullLayout._plots[p]&&I.hover(a,g,p)},I.hover(a,g,p),a._fullLayout._lasthover=s,a._fullLayout._hoversubplot=p},s.onmouseout=function(g){a._dragging||(a._fullLayout._hoversubplot=null,t.unhover(a,g))},a._context.showAxisDragHandles&&(n(a,f,l._offset-i,y._offset-i,i,i,"n","w"),n(a,f,l._offset+l._length,y._offset-i,i,i,"n","e"),n(a,f,l._offset-i,y._offset+y._length,i,i,"s","w"),n(a,f,l._offset+l._length,y._offset+y._length,i,i,"s","e"))}if(a._context.showAxisDragHandles){if(p===l._mainSubplot){var x=l._mainLinePosition;"top"===l.side&&(x-=i),n(a,f,l._offset+.1*l._length,x,.8*l._length,i,"","ew"),n(a,f,l._offset,x,.1*l._length,i,"","w"),n(a,f,l._offset+.9*l._length,x,.1*l._length,i,"","e")}if(p===y._mainSubplot){var h=y._mainLinePosition;"right"!==y.side&&(h-=i),n(a,f,h,y._offset+.1*y._length,i,.8*y._length,"ns",""),n(a,f,h,y._offset+.9*y._length,i,.1*y._length,"s",""),n(a,f,h,y._offset,i,.1*y._length,"n","")}}});var v=r._hoverlayer.node();v.onmousemove=function(p){p.target=a._fullLayout._lasthover,I.hover(a,p,r._hoversubplot)},v.onclick=function(p){p.target=a._fullLayout._lasthover,I.click(a,p)},v.onmousedown=function(p){a._fullLayout._lasthover.onmousedown(p)},K.updateFx(a)}},K.updateFx=function(u){var a=u._fullLayout,r="pan"===a.dragmode?"move":"crosshair";T(a._draggers,r)}},84808:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(78168);$.exports=function(n){return function(u,a){var r=u[n];if(Array.isArray(r))for(var o=M.subplotsRegistry.cartesian,v=o.idRegex,p=a._subplots,f=p.xaxis,l=p.yaxis,y=p.cartesian,s=a._has("cartesian")||a._has("gl2d"),x=0;x<r.length;x++){var h=r[x];if(I.isPlainObject(h)){var g=t.cleanId(h.xref,"x",!1),m=t.cleanId(h.yref,"y",!1),d=v.x.test(g),A=v.y.test(m);if(d||A){s||I.pushUnique(a._basePlotModules,o);var b=!1;d&&-1===f.indexOf(g)&&(f.push(g),b=!0),A&&-1===l.indexOf(m)&&(l.push(m),b=!0),b&&d&&A&&y.push(g+m)}}}}}},24329:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(5228),T=e(31556),n=e(27630),i=e(65644).a0,u=e(78168),a=e(4669),r=e(70415),o=t.ensureSingle;function v(x,h,g){return t.ensureSingle(x,h,g,function(m){m.datum(g)})}function p(x,h,g,m,d){for(var S,w,E,A=a.traceLayerClasses,b=x._fullLayout,c=b._modules,P=[],R=[],F=0;F<c.length;F++){var _=(S=c[F]).name,z=I.modules[_].categories;if(z.svg){var D=S.layerName||_+"layer",k=S.plot;E=(w=i(g,k))[0],g=w[1],E.length&&P.push({i:A.indexOf(D),className:D,plotMethod:k,cdModule:E}),z.zoomScale&&R.push("."+D)}}P.sort(function(H,j){return H.i-j.i});var O=h.plot.selectAll("g.mlayer").data(P,function(H){return H.className});if(O.enter().append("g").attr("class",function(H){return H.className}).classed("mlayer",!0).classed("rangeplot",h.isRangePlot),O.exit().remove(),O.order(),O.each(function(H){var j=M.select(this),ee=H.className;H.plotMethod(x,h,H.cdModule,j,m,d),-1===a.clipOnAxisFalseQuery.indexOf("."+ee)&&n.setClipUrl(j,h.layerClipId,x)}),b._has("scattergl")&&(S=I.getModule("scattergl"),E=i(g,S)[0],S.plot(x,h,E)),!x._context.staticPlot&&(h._hasClipOnAxisFalse&&(h.clipOnAxisFalseTraces=h.plot.selectAll(a.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),R.length)){var U=h.plot.selectAll(R.join(",")).selectAll(".trace");h.zoomScalePts=U.selectAll("path.point"),h.zoomScaleTxt=U.selectAll(".textpoint")}}function l(x,h){var g=h.plotgroup,m=h.id,d=a.layerValue2layerClass[h.xaxis.layer],A=a.layerValue2layerClass[h.yaxis.layer],b=x._fullLayout._hasOnlyLargeSploms;if(h.mainplot){var S=h.mainplotinfo,w=S.plotgroup,E=m+"-x",P=m+"-y";h.minorGridlayer=S.minorGridlayer,h.gridlayer=S.gridlayer,h.zerolinelayer=S.zerolinelayer,o(S.overlinesBelow,"path",E),o(S.overlinesBelow,"path",P),o(S.overaxesBelow,"g",E),o(S.overaxesBelow,"g",P),h.plot=o(S.overplot,"g",m),o(S.overlinesAbove,"path",E),o(S.overlinesAbove,"path",P),o(S.overaxesAbove,"g",E),o(S.overaxesAbove,"g",P),h.xlines=w.select(".overlines-"+d).select("."+E),h.ylines=w.select(".overlines-"+A).select("."+P),h.xaxislayer=w.select(".overaxes-"+d).select("."+E),h.yaxislayer=w.select(".overaxes-"+A).select("."+P)}else if(b)h.xlines=o(g,"path","xlines-above"),h.ylines=o(g,"path","ylines-above"),h.xaxislayer=o(g,"g","xaxislayer-above"),h.yaxislayer=o(g,"g","yaxislayer-above");else{var c=o(g,"g","layer-subplot");h.shapelayer=o(c,"g","shapelayer"),h.imagelayer=o(c,"g","imagelayer"),h.minorGridlayer=o(g,"g","minor-gridlayer"),h.gridlayer=o(g,"g","gridlayer"),h.zerolinelayer=o(g,"g","zerolinelayer"),o(g,"path","xlines-below"),o(g,"path","ylines-below"),h.overlinesBelow=o(g,"g","overlines-below"),o(g,"g","xaxislayer-below"),o(g,"g","yaxislayer-below"),h.overaxesBelow=o(g,"g","overaxes-below"),h.plot=o(g,"g","plot"),h.overplot=o(g,"g","overplot"),h.xlines=o(g,"path","xlines-above"),h.ylines=o(g,"path","ylines-above"),h.overlinesAbove=o(g,"g","overlines-above"),o(g,"g","xaxislayer-above"),o(g,"g","yaxislayer-above"),h.overaxesAbove=o(g,"g","overaxes-above"),h.xlines=g.select(".xlines-"+d),h.ylines=g.select(".ylines-"+A),h.xaxislayer=g.select(".xaxislayer-"+d),h.yaxislayer=g.select(".yaxislayer-"+A)}b||(v(h.minorGridlayer,"g",h.xaxis._id),v(h.minorGridlayer,"g",h.yaxis._id),h.minorGridlayer.selectAll("g").map(function(R){return R[0]}).sort(u.idSort),v(h.gridlayer,"g",h.xaxis._id),v(h.gridlayer,"g",h.yaxis._id),h.gridlayer.selectAll("g").map(function(R){return R[0]}).sort(u.idSort)),h.xlines.style("fill","none").classed("crisp",!0),h.ylines.style("fill","none").classed("crisp",!0)}function y(x,h){if(x){var g={};for(var m in x.each(function(S){var w=S[0];M.select(this).remove(),s(w,h),g[w]=!0}),h._plots)for(var A=h._plots[m].overlays||[],b=0;b<A.length;b++){var c=A[b];g[c.id]&&c.plot.selectAll(".trace").remove()}}}function s(x,h){h._draggers.selectAll("g."+x).remove(),h._defs.select("#clip"+h._uid+x+"plot").remove()}K.name="cartesian",K.attr=["xaxis","yaxis"],K.idRoot=["x","y"],K.idRegex=a.idRegex,K.attrRegex=a.attrRegex,K.attributes=e(91674),K.layoutAttributes=e(38330),K.supplyLayoutDefaults=e(44982),K.transitionAxes=e(43061),K.finalizeSubplots=function(x,h){var w,E,P,g=h._subplots,m=g.xaxis,d=g.yaxis,A=g.cartesian,b=A.concat(g.gl2d||[]),c={},S={};for(w=0;w<b.length;w++){var R=b[w].split("y");c[R[0]]=1,S["y"+R[1]]=1}for(w=0;w<m.length;w++)c[E=m[w]]||(P=(x[u.id2name(E)]||{}).anchor,a.idRegex.y.test(P)||(P="y"),A.push(E+P),b.push(E+P),S[P]||(S[P]=1,t.pushUnique(d,P)));for(w=0;w<d.length;w++)S[P=d[w]]||(E=(x[u.id2name(P)]||{}).anchor,a.idRegex.x.test(E)||(E="x"),A.push(E+P),b.push(E+P),c[E]||(c[E]=1,t.pushUnique(m,E)));if(!b.length){for(var F in E="",P="",x)if(a.attrRegex.test(F)){"x"===F.charAt(0)?(!E||+F.substr(5)<+E.substr(5))&&(E=F):(!P||+F.substr(5)<+P.substr(5))&&(P=F)}E=E?u.name2id(E):"x",P=P?u.name2id(P):"y",m.push(E),d.push(P),A.push(E+P)}},K.plot=function(x,h,g,m){var c,d=x._fullLayout,A=d._subplots.cartesian,b=x.calcdata;if(!Array.isArray(h))for(h=[],c=0;c<b.length;c++)h.push(c);for(c=0;c<A.length;c++){for(var P,S=A[c],w=d._plots[S],E=[],R=0;R<b.length;R++){var F=b[R],_=F[0].trace;_.xaxis+_.yaxis===S&&((-1!==h.indexOf(_.index)||_.carpet)&&(P&&P[0].trace.xaxis+P[0].trace.yaxis===S&&-1!==["tonextx","tonexty","tonext"].indexOf(_.fill)&&-1===E.indexOf(P)&&E.push(P),E.push(F)),P=F)}p(x,w,E,g,m)}},K.clean=function(x,h,g,m){var c,S,w,d=m._plots||{},A=h._plots||{},b=m._subplots||{};if(m._hasOnlyLargeSploms&&!h._hasOnlyLargeSploms)for(w in d)(c=d[w]).plotgroup&&c.plotgroup.remove();var E=m._has&&m._has("gl"),P=h._has&&h._has("gl");if(E&&!P)for(w in d)(c=d[w])._scene&&c._scene.destroy();if(b.xaxis&&b.yaxis){var R=u.listIds({_fullLayout:m});for(S=0;S<R.length;S++){var F=R[S];h[u.id2name(F)]||m._infolayer.selectAll(".g-"+F+"title").remove()}}var _=m._has&&m._has("cartesian"),z=h._has&&h._has("cartesian");if(_&&!z)y(m._cartesianlayer.selectAll(".subplot"),m),m._defs.selectAll(".axesclip").remove(),delete m._axisConstraintGroups,delete m._axisMatchGroups;else if(b.cartesian)for(S=0;S<b.cartesian.length;S++){var D=b.cartesian[S];if(!A[D]){var k="."+D+",."+D+"-x,."+D+"-y";m._cartesianlayer.selectAll(k).remove(),s(D,m)}}},K.drawFramework=function(x){var h=x._fullLayout,g=function f(x){var d,A,b,c,S,w,h=x._fullLayout,g=h._subplots.cartesian,m=g.length,E=[],P=[];for(d=0;d<m;d++){b=g[d],S=(c=h._plots[b]).xaxis,w=c.yaxis;var R=S._mainAxis,F=w._mainAxis,_=R._id+F._id,z=h._plots[_];c.overlays=[],_!==b&&z?(c.mainplot=_,c.mainplotinfo=z,P.push(b)):(c.mainplot=void 0,c.mainplotinfo=void 0,E.push(b))}for(d=0;d<P.length;d++)b=P[d],(c=h._plots[b]).mainplotinfo.overlays.push(c);var D=E.concat(P),k=new Array(m);for(d=0;d<m;d++){b=D[d],S=(c=h._plots[b]).xaxis,w=c.yaxis;var O=[b,S.layer,w.layer,S.overlaying||"",w.overlaying||""];for(A=0;A<c.overlays.length;A++)O.push(c.overlays[A].id);k[d]=O}return k}(x),m=h._cartesianlayer.selectAll(".subplot").data(g,String);m.enter().append("g").attr("class",function(d){return"subplot "+d[0]}),m.order(),m.exit().call(y,h),m.each(function(d){var A=d[0],b=h._plots[A];b.plotgroup=M.select(this),l(x,b),b.draglayer=o(h._draggers,"g",A)})},K.rangePlot=function(x,h,g){l(x,h),p(x,h,g),T.style(x)},K.toSVG=function(x){var h=x._fullLayout._glimages,g=M.select(x).selectAll(".svg-container");g.filter(function(A,b){return b===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function d(){var A=this,b=A.toDataURL("image/png");h.append("svg:image").attr({xmlns:r.svg,"xlink:href":b,preserveAspectRatio:"none",x:0,y:0,width:A.style.width,height:A.style.height})})},K.updateFx=e(54443).updateFx},38330:($,K,e)=>{"use strict";var M=e(47297),I=e(36593),t=e(65822).P,T=e(18836).extendFlat,n=e(96906).templatedArray,i=e(88489).descriptionWithDates,u=e(71103).ONEDAY,a=e(4669),r=a.HOUR_PATTERN,o=a.WEEKDAY_PATTERN,v={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")},p=T({},v,{values:v.values.slice().concat(["sync"]),description:[v.description,"If *sync*, the number of ticks will sync with the overlayed axis","set by `overlaying` property."].join(" ")});function f(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")}}var l={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},y={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},s={valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")};function h(S){var w={valType:"number",min:0,editType:"ticks",description:"Sets the tick length (in px)."};return S||(w.dflt=5),w}function g(S){var w={valType:"number",min:0,editType:"ticks",description:"Sets the tick width (in px)."};return S||(w.dflt=1),w}var m={valType:"color",dflt:I.defaultLine,editType:"ticks",description:"Sets the tick color."},d={valType:"color",dflt:I.lightLine,editType:"ticks",description:"Sets the color of the grid lines."};function A(S){var w={valType:"number",min:0,editType:"ticks",description:"Sets the width (in px) of the grid lines."};return S||(w.dflt=1),w}var b=T({},t,{editType:"ticks"}),c={valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")};$.exports={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:I.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:M({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided and it has a value for both the","lower and upper bound, `autorange` is set to *false*.","Using *min* applies autorange only to set the minimum.","Using *max* applies autorange only to set the maximum.","Using *min reversed* applies autorange only to set the minimum on a reversed axis.","Using *max reversed* applies autorange only to set the maximum on a reversed axis.","Using *reversed* applies autorange on both ends and reverses the axis direction."].join(" ")},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange minimum."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Use this value exactly as autorange maximum."].join(" ")},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange minimum if it goes beyond this value.","Has no effect when `autorangeoptions.minallowed` is provided."].join(" ")},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Clip autorange maximum if it goes beyond this value.","Has no effect when `autorangeoptions.maxallowed` is provided."].join(" ")},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Ensure this value is included in autorange."].join(" ")},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears.","Leaving either or both elements `null` impacts the default `autorange`."].join(" ")},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the minimum range of this axis."].join(" ")},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1},description:["Determines the maximum range of this axis."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Could be used to set the desired inside range of this axis","(excluding the labels) when `ticklabelposition` of","the anchored axis has *inside*.","Not implemented for axes with `type` *log*.","This would be ignored when `range` is provided."].join(" ")},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString(),!1],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Setting `false` allows to remove a default constraint (occasionally,","you may need to prevent a default `scaleanchor` constraint from",'being applied, eg. when having an image trace `yaxis: {scaleanchor: "x"}`',"is set automatically in order for pixels to be rendered as squares,","setting `yaxis: {scaleanchor: false}` allows to remove the constraint)."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:n("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[o,r,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+o+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+r+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+o+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+r+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:u,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:p,nticks:f(),tick0:l,dtick:y,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:s,ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:h(),tickwidth:g(),tickcolor:m,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},labelalias:{valType:"any",dflt:!1,editType:"ticks",description:["Replacement text for specific tick or hover labels.","For example using {US: 'USA', CA: 'Canada'} changes US to USA","and CA to Canada. The labels we would have shown must match","the keys exactly, after adding any tickprefix or ticksuffix.","For negative numbers the minus sign symbol used (U+2212) is wider than the regular ascii dash.","That means you need to use \u22121 instead of -1.","labelalias can be used with any axis type, and both keys (if needed)","and values (if desired) can include html-like tags or MathJax."].join(" ")},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:T({},t,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:M({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:i("tick label")},tickformatstops:n("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:i("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:I.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:c,gridcolor:d,gridwidth:A(),griddash:b,zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:I.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:I.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},minor:{tickmode:v,nticks:f("minor"),tick0:l,dtick:y,tickvals:s,ticks:x,ticklen:h("minor"),tickwidth:g("minor"),tickcolor:m,gridcolor:d,gridwidth:A("minor"),griddash:b,showgrid:c,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},autoshift:{valType:"boolean",dflt:!1,editType:"plot",description:["Automatically reposition the axis to avoid","overlap with other axes with the same `overlaying` value.","This repositioning will account for any `shift` amount applied to other","axes on the same side with `autoshift` is set to true.","Only has an effect if `anchor` is set to *free*."].join(" ")},shift:{valType:"number",editType:"plot",description:["Moves the axis a given number of pixels from where it would have been otherwise.","Accepts both positive and negative values, which will shift the axis either right","or left, respectively.","If `autoshift` is set to true, then this defaults to a padding of -3 if `side` is set to *left*.","and defaults to +3 if `side` is set to *right*. Defaults to 0 if `autoshift` is set to false.","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:M({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}}},44982:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(40235).isUnifiedHover,T=e(48060),n=e(96906),i=e(11161),u=e(38330),a=e(49312),r=e(67178),o=e(93698),v=e(74697),p=e(78168),f=p.id2name,l=p.name2id,y=e(4669).AX_ID_PATTERN,s=e(97799),x=s.traceIs,h=s.getComponentMethod;function g(m,d,A){Array.isArray(m[d])?m[d].push(A):m[d]=[A]}$.exports=function(d,A,b){var O,U,c=A.autotypenumbers,S={},w={},E={},P={},R={},F={},_={},z={},D={},k={};for(O=0;O<b.length;O++){var H=b[O];if(x(H,"cartesian")||x(H,"gl2d")){var j,ee;if(H.xaxis)j=f(H.xaxis),g(S,j,H);else if(H.xaxes)for(U=0;U<H.xaxes.length;U++)g(S,f(H.xaxes[U]),H);if(H.yaxis)ee=f(H.yaxis),g(S,ee,H);else if(H.yaxes)for(U=0;U<H.yaxes.length;U++)g(S,f(H.yaxes[U]),H);if("funnel"===H.type?"h"===H.orientation?(j&&(w[j]=!0),ee&&(_[ee]=!0)):ee&&(E[ee]=!0):"image"===H.type?(ee&&(z[ee]=!0),j&&(z[j]=!0)):(ee&&(R[ee]=!0,F[ee]=!0),(!x(H,"carpet")||"carpet"===H.type&&!H._cheater)&&j&&(P[j]=!0)),"carpet"===H.type&&H._cheater&&j&&(w[j]=!0),x(H,"2dMap")&&(D[j]=!0,D[ee]=!0),x(H,"oriented"))k["h"===H.orientation?ee:j]=!0}}var B=A._subplots,te=B.xaxis,q=B.yaxis,oe=M.simpleMap(te,f),ie=M.simpleMap(q,f),V=oe.concat(ie),Y=I.background;te.length&&q.length&&(Y=M.coerce(d,A,i,"plot_bgcolor"));var X,J,ue,re,ne,ae=I.combine(Y,A.paper_bgcolor);function se(){var we=S[X]||[];ne._traceIndices=we.map(function(He){return He._expandedIndex}),ne._annIndices=[],ne._shapeIndices=[],ne._selectionIndices=[],ne._imgIndices=[],ne._subplotsWith=[],ne._counterAxes=[],ne._name=ne._attr=X,ne._id=J}function de(we,He){return M.coerce(re,ne,u,we,He)}function be(we,He){return M.coerce2(re,ne,u,we,He)}function De(we){return"x"===we?q:te}function _e(we,He){for(var Xe="x"===we?oe:ie,ut=[],Ze=0;Ze<Xe.length;Ze++){var qe=Xe[Ze];qe!==He&&!(d[qe]||{}).overlaying&&ut.push(l(qe))}return ut}var Ce={x:De("x"),y:De("y")},Le=Ce.x.concat(Ce.y),Fe={},ke=[];function ze(){var we=re.matches;y.test(we)&&-1===Le.indexOf(we)&&(Fe[we]=re.type,ke=Object.keys(Fe))}var Pe=T(d,A),Ie=t(Pe);for(O=0;O<V.length;O++){X=V[O],J=l(X),ue=X.charAt(0),M.isPlainObject(d[X])||(d[X]={}),re=d[X],ne=n.newContainer(A,X,ue+"axis"),se();var Qe="x"===ue&&!P[X]&&w[X]||"y"===ue&&!R[X]&&E[X],at="y"===ue&&(!F[X]&&_[X]||z[X]),Be={hasMinor:!0,letter:ue,font:A.font,outerTicks:D[X],showGrid:!k[X],data:S[X]||[],bgColor:ae,calendar:A.calendar,automargin:!0,visibleDflt:Qe,reverseDflt:at,autotypenumbersDflt:c,splomStash:((A._splomAxes||{})[ue]||{})[J]};de("uirevision",A.uirevision),a(re,ne,de,Be),r(re,ne,de,Be,A);var Ne=Ie&&ue===Pe.charAt(0),nt=be("spikecolor",Ie?ne.color:void 0),ct=be("spikethickness",Ie?1.5:void 0),mt=be("spikedash",Ie?"dot":void 0),Bt=be("spikemode",Ie?"across":void 0),Rt=be("spikesnap");de("showspikes",!!(Ne||nt||ct||mt||Bt||Rt))||(delete ne.spikecolor,delete ne.spikethickness,delete ne.spikedash,delete ne.spikemode,delete ne.spikesnap);var St=f(re.overlaying),Xt=[0,1];if(void 0!==A[St]){var Mt=f(A[St].anchor);void 0!==A[Mt]&&(Xt=A[Mt].domain)}v(re,ne,de,{letter:ue,counterAxes:Ce[ue],overlayableAxes:_e(ue,X),grid:A.grid,overlayingDomain:Xt}),de("title.standoff"),ze(),ne._input=re}for(O=0;O<ke.length;){J=ke[O++],ue=(X=f(J)).charAt(0),M.isPlainObject(d[X])||(d[X]={}),re=d[X],ne=n.newContainer(A,X,ue+"axis"),se();var st={letter:ue,font:A.font,outerTicks:D[X],showGrid:!k[X],data:[],bgColor:ae,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:c,splomStash:((A._splomAxes||{})[ue]||{})[J]};de("uirevision",A.uirevision),ne.type=Fe[J]||"linear",r(re,ne,de,st,A),v(re,ne,de,{letter:ue,counterAxes:Ce[ue],overlayableAxes:_e(ue,X),grid:A.grid}),de("fixedrange"),ze(),ne._input=re}var Se=h("rangeslider","handleDefaults"),pe=h("rangeselector","handleDefaults");for(O=0;O<oe.length;O++)X=oe[O],re=d[X],ne=A[X],Se(d,A,X),"date"===ne.type&&pe(re,ne,A,ie,ne.calendar),de("fixedrange");for(O=0;O<ie.length;O++){X=ie[O],re=d[X],ne=A[X];var ge=A[f(ne.anchor)];de("fixedrange",h("rangeslider","isVisible")(ge))}o.handleDefaults(d,A,{axIds:Le.concat(ke).sort(p.idSort),axHasImage:z})}},18696:($,K,e)=>{"use strict";var M=e(80791).mix,I=e(36593),t=e(5228);$.exports=function(n,i,u,a){var r=(a=a||{}).dfltColor;function o(E,P){return t.coerce2(n,i,a.attributes,E,P)}var v=o("linecolor",r),p=o("linewidth");u("showline",a.showLine||!!v||!!p)||(delete i.linecolor,delete i.linewidth);var y=o("gridcolor",M(r,a.bgColor,a.blend||I.lightFraction).toRgbString()),s=o("gridwidth"),x=o("griddash");if(u("showgrid",a.showGrid||!!y||!!s||!!x)||(delete i.gridcolor,delete i.gridwidth,delete i.griddash),a.hasMinor){var m=o("minor.gridcolor",M(i.gridcolor,a.bgColor,67).toRgbString()),d=o("minor.gridwidth",i.gridwidth||1),A=o("minor.griddash",i.griddash||"solid");u("minor.showgrid",!!m||!!d||!!A)||(delete i.minor.gridcolor,delete i.minor.gridwidth,delete i.minor.griddash)}if(!a.noZeroLine){var c=o("zerolinecolor",r),S=o("zerolinewidth");u("zeroline",a.showGrid||!!c||!!S)||(delete i.zerolinecolor,delete i.zerolinewidth)}}},74697:($,K,e)=>{"use strict";var M=e(7347),I=e(5228);$.exports=function(T,n,i,u){var f,l,y,s,x,h,a=u.counterAxes||[],r=u.overlayableAxes||[],o=u.letter,v=u.grid,p=u.overlayingDomain;v&&(l=v._domains[o][v._axisMap[n._id]],f=v._anchors[n._id],l&&(y=v[o+"side"].split(" ")[0],s=v.domain[o]["right"===y||"top"===y?1:0])),l=l||[0,1],f=f||(M(T.position)?"free":a[0]||"free"),y=y||("x"===o?"bottom":"left"),s=s||0,x=0,h=!1;var g=I.coerce(T,n,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:f}},"anchor"),m=I.coerce(T,n,{side:{valType:"enumerated",values:"x"===o?["bottom","top"]:["left","right"],dflt:y}},"side");if("free"===g){if("y"===o)i("autoshift")&&(s="left"===m?p[0]:p[1],h=!n.automargin||n.automargin,x="left"===m?-3:3),i("shift",x);i("position",s)}i("automargin",h);var A=!1;if(r.length&&(A=I.coerce(T,n,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!A){var b=i("domain",l);b[0]>b[1]-1/4096&&(n.domain=l),I.noneOrAll(T.domain,n.domain,l),"sync"===n.tickmode&&(n.tickmode="auto")}return i("layer"),n}},72323:($,K,e)=>{"use strict";var M=e(91309);$.exports=function(t,T,n,i,u){u||(u={});var a=u.tickSuffixDflt,r=M(t);n("tickprefix")&&n("showtickprefix",r),n("ticksuffix",a)&&n("showticksuffix",r)}},31520:($,K,e)=>{"use strict";var M=e(32044);$.exports=function(t,T,n,i){var u=T._template||{},a=T.type||u.type||"-";n("minallowed"),n("maxallowed");var o,r=n("range");r||!i.noInsiderange&&"log"!==a&&((o=n("insiderange"))&&(null===o[0]||null===o[1])&&(T.insiderange=!1,o=void 0),o&&(r=n("range",o)));var f,v=T.getAutorangeDflt(r,i),p=n("autorange",v);r&&(null===r[0]&&null===r[1]||(null===r[0]||null===r[1])&&("reversed"===p||!0===p)||null!==r[0]&&("min"===p||"max reversed"===p)||null!==r[1]&&("max"===p||"min reversed"===p))&&(r=void 0,delete T.range,T.autorange=!0,f=!0),f||(p=n("autorange",v=T.getAutorangeDflt(r,i))),p&&(M(n,p,r),("linear"===a||"-"===a)&&n("rangemode")),T.cleanRange()}},6382:($,K,e)=>{"use strict";var M=e(94598).FROM_BL;$.exports=function(t,T,n){void 0===n&&(n=M[t.constraintoward||"center"]);var i=[t.r2l(t.range[0]),t.r2l(t.range[1])],u=i[0]+(i[1]-i[0])*n;t.range=t._input.range=[t.l2r(u+(i[0]-u)*T),t.l2r(u+(i[1]-u)*T)],t.setScale()}},49704:($,K,e)=>{"use strict";var M=e(21572),I=e(85400).g0,t=e(5228),T=t.numberFormat,n=e(7347),i=t.cleanNumber,u=t.ms2DateTime,a=t.dateTime2ms,r=t.ensureNumber,o=t.isArrayOrTypedArray,v=e(71103),p=v.FP_SAFE,f=v.BADNUM,l=v.LOG_CLIP,y=v.ONEWEEK,s=v.ONEDAY,x=v.ONEHOUR,h=v.ONEMIN,g=v.ONESEC,m=e(78168),d=e(4669),A=d.HOUR_PATTERN,b=d.WEEKDAY_PATTERN;function c(w){return Math.pow(10,w)}function S(w){return null!=w}$.exports=function(E,P){P=P||{};var R=E._id||"x",F=R.charAt(0);function _(V,Y){if(V>0)return Math.log(V)/Math.LN10;if(V<=0&&Y&&E.range&&2===E.range.length){var ae=E.range[0],X=E.range[1];return.5*(ae+X-2*l*Math.abs(ae-X))}return f}function z(V,Y,ae,X){if((X||{}).msUTC&&n(V))return+V;var J=a(V,ae||E.calendar);if(J===f){if(!n(V))return f;V=+V;var ue=Math.floor(10*t.mod(V+.05,1)),re=Math.round(V-ue/10);J=a(new Date(re))+ue/10}return J}function D(V,Y,ae){return u(V,Y,ae||E.calendar)}function k(V){return E._categories[Math.round(V)]}function O(V){if(S(V)){if(void 0===E._categoriesMap&&(E._categoriesMap={}),void 0!==E._categoriesMap[V])return E._categoriesMap[V];E._categories.push("number"==typeof V?String(V):V);var Y=E._categories.length-1;return E._categoriesMap[V]=Y,Y}return f}function H(V){if(E._categoriesMap)return E._categoriesMap[V]}function j(V){var Y=H(V);return void 0!==Y?Y:n(V)?+V:void 0}function ee(V){return n(V)?+V:H(V)}function W(V,Y,ae){return M.round(ae+Y*V,2)}function B(V,Y,ae){return(V-ae)/Y}var te=function(Y){return n(Y)?W(Y,E._m,E._b):f},q=function(V){return B(V,E._m,E._b)};if(E.rangebreaks){var oe="y"===F;te=function(V){if(!n(V))return f;var Y=E._rangebreaks.length;if(!Y)return W(V,E._m,E._b);var ae=oe;E.range[0]>E.range[1]&&(ae=!ae);for(var X=ae?-1:1,J=X*V,ue=0,re=0;re<Y;re++){var ne=X*E._rangebreaks[re].min,se=X*E._rangebreaks[re].max;if(J<ne)break;if(!(J>se)){ue=J<(ne+se)/2?re:re+1;break}ue=re+1}var de=E._B[ue]||0;return isFinite(de)?W(V,E._m2,de):0},q=function(V){var Y=E._rangebreaks.length;if(!Y)return B(V,E._m,E._b);for(var ae=0,X=0;X<Y&&!(V<E._rangebreaks[X].pmin);X++)V>E._rangebreaks[X].pmax&&(ae=X+1);return B(V,E._m2,E._B[ae])}}E.c2l="log"===E.type?_:r,E.l2c="log"===E.type?c:r,E.l2p=te,E.p2l=q,E.c2p="log"===E.type?function(V,Y){return te(_(V,Y))}:te,E.p2c="log"===E.type?function(V){return c(q(V))}:q,-1!==["linear","-"].indexOf(E.type)?(E.d2r=E.r2d=E.d2c=E.r2c=E.d2l=E.r2l=i,E.c2d=E.c2r=E.l2d=E.l2r=r,E.d2p=E.r2p=function(V){return E.l2p(i(V))},E.p2d=E.p2r=q,E.cleanPos=r):"log"===E.type?(E.d2r=E.d2l=function(V,Y){return _(i(V),Y)},E.r2d=E.r2c=function(V){return c(i(V))},E.d2c=E.r2l=i,E.c2d=E.l2r=r,E.c2r=_,E.l2d=c,E.d2p=function(V,Y){return E.l2p(E.d2r(V,Y))},E.p2d=function(V){return c(q(V))},E.r2p=function(V){return E.l2p(i(V))},E.p2r=q,E.cleanPos=r):"date"===E.type?(E.d2r=E.r2d=t.identity,E.d2c=E.r2c=E.d2l=E.r2l=z,E.c2d=E.c2r=E.l2d=E.l2r=D,E.d2p=E.r2p=function(V,Y,ae){return E.l2p(z(V,0,ae))},E.p2d=E.p2r=function(V,Y,ae){return D(q(V),Y,ae)},E.cleanPos=function(V){return t.cleanDate(V,f,E.calendar)}):"category"===E.type?(E.d2c=E.d2l=O,E.r2d=E.c2d=E.l2d=k,E.d2r=E.d2l_noadd=j,E.r2c=function(V){var Y=ee(V);return void 0!==Y?Y:E.fraction2r(.5)},E.l2r=E.c2r=r,E.r2l=ee,E.d2p=function(V){return E.l2p(E.r2c(V))},E.p2d=function(V){return k(q(V))},E.r2p=E.d2p,E.p2r=q,E.cleanPos=function(V){return"string"==typeof V&&""!==V?V:r(V)}):"multicategory"===E.type&&(E.r2d=E.c2d=E.l2d=k,E.d2r=E.d2l_noadd=j,E.r2c=function(V){var Y=j(V);return void 0!==Y?Y:E.fraction2r(.5)},E.r2c_just_indices=H,E.l2r=E.c2r=r,E.r2l=j,E.d2p=function(V){return E.l2p(E.r2c(V))},E.p2d=function(V){return k(q(V))},E.r2p=E.d2p,E.p2r=q,E.cleanPos=function(V){return Array.isArray(V)||"string"==typeof V&&""!==V?V:r(V)},E.setupMultiCategory=function(V){var ae,X,Y=E._traceIndices,J=E._matchGroup;if(J&&0===E._categories.length)for(var ue in J)if(ue!==R){var re=P[m.id2name(ue)];Y=Y.concat(re._traceIndices)}var ne=[[0,{}],[0,{}]],se=[];for(ae=0;ae<Y.length;ae++){var de=V[Y[ae]];if(F in de){var be=de[F],De=de._length||t.minRowLength(be);if(o(be[0])&&o(be[1]))for(X=0;X<De;X++){var _e=be[0][X],Ce=be[1][X];S(_e)&&S(Ce)&&(se.push([_e,Ce]),_e in ne[0][1]||(ne[0][1][_e]=ne[0][0]++),Ce in ne[1][1]||(ne[1][1][Ce]=ne[1][0]++))}}}for(se.sort(function(Le,Fe){var ke=ne[0][1],ze=ke[Le[0]]-ke[Fe[0]];if(ze)return ze;var Pe=ne[1][1];return Pe[Le[1]]-Pe[Fe[1]]}),ae=0;ae<se.length;ae++)O(se[ae])}),E.fraction2r=function(V){var Y=E.r2l(E.range[0]),ae=E.r2l(E.range[1]);return E.l2r(Y+V*(ae-Y))},E.r2fraction=function(V){var Y=E.r2l(E.range[0]),ae=E.r2l(E.range[1]);return(E.r2l(V)-Y)/(ae-Y)},E.limitRange=function(V){var Y=E.minallowed,ae=E.maxallowed;if(void 0!==Y||void 0!==ae){V||(V="range");var X=t.nestedProperty(E,V).get(),J=t.simpleMap(X,E.r2l),ue=J[1]<J[0];ue&&J.reverse();var re=t.simpleMap([Y,ae],E.r2l);if(void 0!==Y&&J[0]<re[0]&&(X[ue?1:0]=Y),void 0!==ae&&J[1]>re[1]&&(X[ue?0:1]=ae),X[0]===X[1]){var ne=E.l2r(Y),se=E.l2r(ae);if(void 0!==Y){var de=ne+1;void 0!==ae&&(de=Math.min(de,se)),X[ue?1:0]=de}if(void 0!==ae){var be=se+1;void 0!==Y&&(be=Math.max(be,ne)),X[ue?0:1]=be}}}},E.cleanRange=function(V,Y){E._cleanRange(V,Y),E.limitRange(V)},E._cleanRange=function(V,Y){Y||(Y={}),V||(V="range");var X,J,ae=t.nestedProperty(E,V).get();if(J=(J="date"===E.type?t.dfltRange(E.calendar):"y"===F?d.DFLTRANGEY:"realaxis"===E._name?[0,1]:Y.dfltRange||d.DFLTRANGEX).slice(),("tozero"===E.rangemode||"nonnegative"===E.rangemode)&&(J[0]=0),ae&&2===ae.length){var ue=null===ae[0],re=null===ae[1];for("date"===E.type&&!E.autorange&&(ae[0]=t.cleanDate(ae[0],f,E.calendar),ae[1]=t.cleanDate(ae[1],f,E.calendar)),X=0;X<2;X++)if("date"===E.type){if(!t.isDateTime(ae[X],E.calendar)){E[V]=J;break}if(E.r2l(ae[0])===E.r2l(ae[1])){var ne=t.constrain(E.r2l(ae[0]),t.MIN_MS+1e3,t.MAX_MS-1e3);ae[0]=E.l2r(ne-1e3),ae[1]=E.l2r(ne+1e3);break}}else{if(!n(ae[X])){if(ue||re||!n(ae[1-X])){E[V]=J;break}ae[X]=ae[1-X]*(X?10:.1)}if(ae[X]<-p?ae[X]=-p:ae[X]>p&&(ae[X]=p),ae[0]===ae[1]){var se=Math.max(1,Math.abs(1e-6*ae[0]));ae[0]-=se,ae[1]+=se}}}else t.nestedProperty(E,V).set(J)},E.setScale=function(V){var Y=P._size;if(E.overlaying){var ae=m.getFromId({_fullLayout:P},E.overlaying);E.domain=ae.domain}var X=V&&E._r?"_r":"range",J=E.calendar;E.cleanRange(X);var se,de,ue=E.r2l(E[X][0],J),re=E.r2l(E[X][1],J),ne="y"===F;if((ne?(E._offset=Y.t+(1-E.domain[1])*Y.h,E._length=Y.h*(E.domain[1]-E.domain[0]),E._m=E._length/(ue-re),E._b=-E._m*re):(E._offset=Y.l+E.domain[0]*Y.w,E._length=Y.w*(E.domain[1]-E.domain[0]),E._m=E._length/(re-ue),E._b=-E._m*ue),E._rangebreaks=[],E._lBreaks=0,E._m2=0,E._B=[],E.rangebreaks)&&(E._rangebreaks=E.locateBreaks(Math.min(ue,re),Math.max(ue,re)),E._rangebreaks.length)){for(se=0;se<E._rangebreaks.length;se++)de=E._rangebreaks[se],E._lBreaks+=Math.abs(de.max-de.min);var be=ne;ue>re&&(be=!be),be&&E._rangebreaks.reverse();var De=be?-1:1;for(E._m2=De*E._length/(Math.abs(re-ue)-E._lBreaks),E._B.push(-E._m2*(ne?re:ue)),se=0;se<E._rangebreaks.length;se++)de=E._rangebreaks[se],E._B.push(E._B[E._B.length-1]-De*E._m2*(de.max-de.min));for(se=0;se<E._rangebreaks.length;se++)(de=E._rangebreaks[se]).pmin=te(de.min),de.pmax=te(de.max)}if(!isFinite(E._m)||!isFinite(E._b)||E._length<0)throw P._replotting=!1,new Error("Something went wrong with axis scaling")},E.maskBreaks=function(V){var ae,X,J,ue,re,Y=E.rangebreaks||[];Y._cachedPatterns||(Y._cachedPatterns=Y.map(function(ke){return ke.enabled&&ke.bounds?t.simpleMap(ke.bounds,ke.pattern?i:E.d2c):null})),Y._cachedValues||(Y._cachedValues=Y.map(function(ke){return ke.enabled&&ke.values?t.simpleMap(ke.values,E.d2c).sort(t.sorterAsc):null}));for(var ne=0;ne<Y.length;ne++){var se=Y[ne];if(se.enabled)if(se.bounds){var de=se.pattern;switch(X=(ae=Y._cachedPatterns[ne])[0],J=ae[1],de){case b:ue=(re=new Date(V)).getUTCDay(),X>J&&(J+=7,ue<X&&(ue+=7));break;case A:ue=(re=new Date(V)).getUTCHours()+(re.getUTCMinutes()/60+re.getUTCSeconds()/3600+re.getUTCMilliseconds()/36e5),X>J&&(J+=24,ue<X&&(ue+=24));break;case"":ue=V}if(ue>=X&&ue<J)return f}else for(var Le=Y._cachedValues[ne],Fe=0;Fe<Le.length;Fe++)if(J=(X=Le[Fe])+se.dvalue,V>=X&&V<J)return f}return V},E.locateBreaks=function(V,Y){var ae,X,J,ue,re=[];if(!E.rangebreaks)return re;var ne=E.rangebreaks.slice().sort(function(Pe,Ie){return Pe.pattern===b&&Ie.pattern===A?-1:Ie.pattern===b&&Pe.pattern===A?1:0}),se=function(Pe,Ie){if((Pe=t.constrain(Pe,V,Y))!==(Ie=t.constrain(Ie,V,Y))){for(var Qe=!0,at=0;at<re.length;at++){var Be=re[at];Pe<Be.max&&Ie>=Be.min&&(Pe<Be.min&&(Be.min=Pe),Ie>Be.max&&(Be.max=Ie),Qe=!1)}Qe&&re.push({min:Pe,max:Ie})}};for(ae=0;ae<ne.length;ae++){var de=ne[ae];if(de.enabled)if(de.bounds){var be=V,De=Y;de.pattern&&(be=Math.floor(be)),J=(X=t.simpleMap(de.bounds,de.pattern?i:E.r2l))[0],ue=X[1];var Ce,Le,_e=new Date(be);switch(de.pattern){case b:Le=y,Ce=(ue-J+(ue<J?7:0))*s,be+=J*s-(_e.getUTCDay()*s+_e.getUTCHours()*x+_e.getUTCMinutes()*h+_e.getUTCSeconds()*g+_e.getUTCMilliseconds());break;case A:Le=s,Ce=(ue-J+(ue<J?24:0))*x,be+=J*x-(_e.getUTCHours()*x+_e.getUTCMinutes()*h+_e.getUTCSeconds()*g+_e.getUTCMilliseconds());break;default:be=Math.min(X[0],X[1]),Ce=Le=(De=Math.max(X[0],X[1]))-be}for(var Fe=be;Fe<De;Fe+=Le)se(Fe,Fe+Ce)}else for(var ke=t.simpleMap(de.values,E.d2c),ze=0;ze<ke.length;ze++)se(J=ke[ze],ue=J+de.dvalue)}return re.sort(function(Pe,Ie){return Pe.min-Ie.min}),re},E.makeCalcdata=function(V,Y,ae){var X,J,ue,re,ne=E.type,se="date"===ne&&V[Y+"calendar"];if(Y in V){if(X=V[Y],re=V._length||t.minRowLength(X),t.isTypedArray(X)&&("linear"===ne||"log"===ne)){if(re===X.length)return X;if(X.subarray)return X.subarray(0,re)}if("multicategory"===ne)return function U(V,Y){for(var ae=new Array(Y),X=0;X<Y;X++){var J=(V[0]||[])[X],ue=(V[1]||[])[X];ae[X]=H([J,ue])}return ae}(X,re);for(J=new Array(re),ue=0;ue<re;ue++)J[ue]=E.d2c(X[ue],0,se,ae)}else{var de=Y+"0"in V?E.d2c(V[Y+"0"],0,se):0,be=V["d"+Y]?Number(V["d"+Y]):1;for(X=V[{x:"y",y:"x"}[Y]],re=V._length||X.length,J=new Array(re),ue=0;ue<re;ue++)J[ue]=de+ue*be}if(E.rangebreaks)for(ue=0;ue<re;ue++)J[ue]=E.maskBreaks(J[ue]);return J},E.isValidRange=function(V,Y){return Array.isArray(V)&&2===V.length&&(Y&&null===V[0]||n(E.r2l(V[0])))&&(Y&&null===V[1]||n(E.r2l(V[1])))},E.getAutorangeDflt=function(V,Y){var ae=!E.isValidRange(V,"nullOk");return ae&&Y&&Y.reverseDflt?ae="reversed":V&&(null===V[0]&&null===V[1]?ae=!0:null===V[0]&&null!==V[1]?ae="min":null!==V[0]&&null===V[1]&&(ae="max")),ae},E.isReversed=function(){var V=E.autorange;return"reversed"===V||"min reversed"===V||"max reversed"===V},E.isPtWithinRange=function(V,Y){var ae=E.c2l(V[F],null,Y),X=E.r2l(E.range[0]),J=E.r2l(E.range[1]);return X<J?X<=ae&&ae<=J:J<=ae&&ae<=X},E._emptyCategories=function(){E._categories=[],E._categoriesMap={}},E.clearCalc=function(){var V=E._matchGroup;if(V){var Y=null,ae=null;for(var X in V){var J=P[m.id2name(X)];if(J._categories){Y=J._categories,ae=J._categoriesMap;break}}Y&&ae?(E._categories=Y,E._categoriesMap=ae):E._emptyCategories()}else E._emptyCategories();if(E._initialCategories)for(var ue=0;ue<E._initialCategories.length;ue++)O(E._initialCategories[ue])},E.sortByInitialCategories=function(){var V=[];if(E._emptyCategories(),E._initialCategories)for(var Y=0;Y<E._initialCategories.length;Y++)O(E._initialCategories[Y]);V=V.concat(E._traceIndices);var ae=E._matchGroup;for(var X in ae)if(R!==X){var J=P[m.id2name(X)];J._categories=E._categories,J._categoriesMap=E._categoriesMap,V=V.concat(J._traceIndices)}return V};var ie=P._d3locale;"date"===E.type&&(E._dateFormat=ie?ie.timeFormat:I,E._extraFormat=P._extraFormat),E._separators=P.separators,E._numFormat=ie?ie.numberFormat:T,delete E._minDtick,delete E._forceTick0}},91309:$=>{"use strict";$.exports=function(e){var I=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return void 0!==e[T]});if(I.every(function(T){return e[T]===e[I[0]]})||1===I.length)return e[I[0]]}},85357:($,K,e)=>{"use strict";var M=e(5228),I=e(8416).contrast,t=e(38330),T=e(91309),n=e(84322);function i(u,a){function r(v,p){return M.coerce(u,a,t.tickformatstops,v,p)}r("enabled")&&(r("dtickrange"),r("value"))}$.exports=function(a,r,o,v,p){p||(p={});var f=o("labelalias");M.isPlainObject(f)||delete r.labelalias;var l=T(a);if(o("showticklabels")){var s=p.font||{},x=r.color,g=-1!==(r.ticklabelposition||"").indexOf("inside")?I(p.bgColor):x&&x!==t.color.dflt?x:s.color;if(M.coerceFont(o,"tickfont",{family:s.family,size:s.size,color:g}),!p.noTicklabelstep&&"multicategory"!==v&&"log"!==v&&o("ticklabelstep"),p.noAng||o("tickangle"),"category"!==v){var m=o("tickformat");n(a,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:i}),r.tickformatstops.length||delete r.tickformatstops,!p.noExp&&!m&&"date"!==v&&(o("showexponent",l),o("exponentformat"),o("minexponent"),o("separatethousands"))}}}},6705:($,K,e)=>{"use strict";var M=e(5228),I=e(38330);$.exports=function(T,n,i,u){var a=u.isMinor,r=a?T.minor||{}:T,o=a?n.minor:n,v=a?I.minor:I,p=a?"minor.":"",f=M.coerce2(r,o,v,"ticklen",a?.6*(n.ticklen||5):void 0),l=M.coerce2(r,o,v,"tickwidth",a?n.tickwidth||1:void 0),y=M.coerce2(r,o,v,"tickcolor",(a?n.tickcolor:void 0)||o.color);i(p+"ticks",!a&&u.outerTicks||f||l||y?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},61606:($,K,e)=>{"use strict";var M=e(62239),I=e(5228).isArrayOrTypedArray,t=e(90406).isTypedArraySpec,T=e(90406).decodeTypedArraySpec;$.exports=function(i,u,a,r,o){o||(o={});var v=o.isMinor,p=v?i.minor||{}:i,f=v?u.minor:u,l=v?"minor.":"";function y(b){var c=p[b];return t(c)&&(c=T(c)),void 0!==c?c:(f._template||{})[b]}var s=y("tick0"),x=y("dtick"),h=y("tickvals"),m=a(l+"tickmode",I(h)?"array":x?"linear":"auto");if("auto"===m||"sync"===m)a(l+"nticks");else if("linear"===m){var d=f.dtick=M.dtick(x,r);f.tick0=M.tick0(s,r,u.calendar,d)}else if("multicategory"!==r){void 0===a(l+"tickvals")?f.tickmode="auto":v||a("ticktext")}}},43061:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(5228),T=e(27630),n=e(91464);$.exports=function(u,a,r,o){var v=u._fullLayout;if(0!==a.length){var l;o&&(l=o());var x,h,g,m=M.ease(r.easing);return u._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(g),g=null,function s(){for(var A={},b=0;b<a.length;b++){var c=a[b],S=c.plotinfo.xaxis,w=c.plotinfo.yaxis;c.xr0&&(A[S._name+".range"]=c.xr0.slice()),c.yr0&&(A[w._name+".range"]=c.yr0.slice())}return I.call("relayout",u,A).then(function(){for(var E=0;E<a.length;E++)p(a[E].plotinfo)})}()}),x=Date.now(),g=window.requestAnimationFrame(function d(){h=Date.now();for(var A=Math.min(1,(h-x)/r.duration),b=m(A),c=0;c<a.length;c++)f(a[c],b);h-x>r.duration?(function y(){for(var A={},b=0;b<a.length;b++){var c=a[b],S=c.plotinfo.xaxis,w=c.plotinfo.yaxis;c.xr1&&(A[S._name+".range"]=c.xr1.slice()),c.yr1&&(A[w._name+".range"]=c.yr1.slice())}return l&&l(),I.call("relayout",u,A).then(function(){for(var E=0;E<a.length;E++)p(a[E].plotinfo)})}(),g=window.cancelAnimationFrame(d)):g=window.requestAnimationFrame(d)}),Promise.resolve()}function p(A){var b=A.xaxis,c=A.yaxis;v._defs.select("#"+A.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),A.plot.call(T.setTranslate,b._offset,c._offset).call(T.setScale,1,1);var S=A.plot.selectAll(".scatterlayer .trace");S.selectAll(".point").call(T.setPointGroupScale,1,1),S.selectAll(".textpoint").call(T.setTextPointsScale,1,1),S.call(T.hideOutsideRangePoints,A)}function f(A,b){var c=A.plotinfo,S=c.xaxis,w=c.yaxis,E=S._length,P=w._length,R=!!A.xr1,F=!!A.yr1,_=[];if(R){var z=t.simpleMap(A.xr0,S.r2l),D=t.simpleMap(A.xr1,S.r2l),k=z[1]-z[0],O=D[1]-D[0];_[0]=(z[0]*(1-b)+b*D[0]-z[0])/(z[1]-z[0])*E,_[2]=E*(1-b+b*O/k),S.range[0]=S.l2r(z[0]*(1-b)+b*D[0]),S.range[1]=S.l2r(z[1]*(1-b)+b*D[1])}else _[0]=0,_[2]=E;if(F){var U=t.simpleMap(A.yr0,w.r2l),H=t.simpleMap(A.yr1,w.r2l),j=U[1]-U[0],ee=H[1]-H[0];_[1]=(U[1]*(1-b)+b*H[1]-U[1])/(U[0]-U[1])*P,_[3]=P*(1-b+b*ee/j),w.range[0]=S.l2r(U[0]*(1-b)+b*H[0]),w.range[1]=w.l2r(U[1]*(1-b)+b*H[1])}else _[1]=0,_[3]=P;n.drawOne(u,S,{skipTitle:!0}),n.drawOne(u,w,{skipTitle:!0}),n.redrawComponents(u,[S._id,w._id]);var W=R?E/_[2]:1,B=F?P/_[3]:1,te=R?_[0]:0,q=F?_[1]:0,oe=R?_[0]/_[2]*E:0,ie=F?_[1]/_[3]*P:0,V=S._offset-oe,Y=w._offset-ie;c.clipRect.call(T.setTranslate,te,q).call(T.setScale,1/W,1/B),c.plot.call(T.setTranslate,V,Y).call(T.setScale,W,B),T.setPointGroupScale(c.zoomScalePts,1/W,1/B),T.setTextPointsScale(c.zoomScaleTxt,1/W,1/B)}n.redrawComponents(u)}},49312:($,K,e)=>{"use strict";var M=e(97799).traceIs,I=e(30640);function n(u){return{v:"x",h:"y"}[u.orientation||"v"]}function i(u,a){var r=n(u),o=M(u,"box-violin"),v=M(u._fullInput||{},"candlestick");return o&&!v&&a===r&&void 0===u[r]&&void 0===u[r+"0"]}$.exports=function(a,r,o,v){o("autotypenumbers",v.autotypenumbersDflt),"-"===o("type",(v.splomStash||{}).type)&&(function t(u,a){if("-"===u.type){var v,r=u._id,o=r.charAt(0);-1!==r.indexOf("scene")&&(r=o);var p=function T(u,a,r){for(var o=0;o<u.length;o++){var v=u[o];if("splom"===v.type&&v._length>0&&(v["_"+r+"axes"]||{})[a])return v;if((v[r+"axis"]||r)===a){if(i(v,r))return v;if((v[r]||[]).length||v[r+"0"])return v}}}(a,r,o);if(p){if("histogram"===p.type&&o==={v:"y",h:"x"}[p.orientation||"v"])return void(u.type="linear");var f=o+"calendar",l=p[f],y={noMultiCategory:!M(p,"cartesian")||M(p,"noMultiCategory")};if("box"===p.type&&p._hasPreCompStats&&o==={h:"x",v:"y"}[p.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=u.autotypenumbers,i(p,o)){var s=n(p),x=[];for(v=0;v<a.length;v++){var h=a[v];!M(h,"box-violin")||(h[o+"axis"]||o)!==r||(void 0!==h[s]?x.push(h[s][0]):void 0!==h.name?x.push(h.name):x.push("text"),h[f]!==l&&(l=void 0))}u.type=I(x,l,y)}else if("splom"===p.type){var m=p.dimensions[p._axesDim[r]];m.visible&&(u.type=I(m.values,l,y))}else u.type=I(p[o]||[p[o+"0"]],l,y)}}}(r,v.data),"-"===r.type?r.type="linear":a.type=r.type)}},80272:($,K,e)=>{"use strict";var M=e(97799),I=e(5228);function t(a,r,o){var v,p,f,l=!1;if("data"===r.type)v=a._fullData[null!==r.traces?r.traces[0]:0];else{if("layout"!==r.type)return!1;v=a._fullLayout}return p=I.nestedProperty(v,r.prop).get(),(f=o[r.type]=o[r.type]||{}).hasOwnProperty(r.prop)&&f[r.prop]!==p&&(l=!0),f[r.prop]=p,{changed:l,value:p}}function n(a,r){var o=[],v=r[0],p={};if("string"==typeof v)p[v]=r[1];else{if(!I.isPlainObject(v))return o;p=v}return u(p,function(f,l,y){o.push({type:"layout",prop:f,value:y})},"",0),o}function i(a,r){var o,v,p,f,l=[];if(v=r[0],p=r[1],o=r[2],f={},"string"==typeof v)f[v]=p;else{if(!I.isPlainObject(v))return l;f=v,void 0===o&&(o=p)}return void 0===o&&(o=null),u(f,function(y,s,x){var h,g;if(Array.isArray(x)){g=x.slice();var m=Math.min(g.length,a.data.length);o&&(m=Math.min(m,o.length)),h=[];for(var d=0;d<m;d++)h[d]=o?o[d]:d}else g=x,h=o?o.slice():null;if(null===h)Array.isArray(g)&&(g=g[0]);else if(Array.isArray(h)){if(!Array.isArray(g)){var A=g;g=[];for(var b=0;b<h.length;b++)g[b]=A}g.length=Math.min(h.length,g.length)}l.push({type:"data",prop:y,traces:h,value:g})},"",0),l}function u(a,r,o,v){Object.keys(a).forEach(function(p){var f=a[p];if("_"!==p[0]){var l=o+(v>0?".":"")+p;I.isPlainObject(f)?u(f,r,l,v+1):r(l,p,f)}})}K.manageCommandObserver=function(a,r,o,v){var p={},f=!0;r&&r._commandObserver&&(p=r._commandObserver),p.cache||(p.cache={}),p.lookupTable={};var l=K.hasSimpleAPICommandBindings(a,o,p.lookupTable);if(r&&r._commandObserver){if(l)return p;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,p}if(l){t(a,l,p.cache),p.check=function(){if(f){var h=t(a,l,p.cache);return h.changed&&v&&void 0!==p.lookupTable[h.value]&&(p.disable(),Promise.resolve(v({value:h.value,type:l.type,prop:l.prop,traces:l.traces,index:p.lookupTable[h.value]})).then(p.enable,p.enable)),h.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],s=0;s<y.length;s++)a._internalOn(y[s],p.check);p.remove=function(){for(var x=0;x<y.length;x++)a._removeInternalListener(y[x],p.check)}}else I.log("Unable to automatically bind plot updates to API command"),p.lookupTable={},p.remove=function(){};return p.disable=function(){f=!1},p.enable=function(){f=!0},r&&(r._commandObserver=p),p},K.hasSimpleAPICommandBindings=function(a,r,o){var v,f,p=r.length;for(v=0;v<p;v++){var l,y=r[v],s=y.method,x=y.args;if(Array.isArray(x)||(x=[]),!s)return!1;var h=K.computeAPICommandBindings(a,s,x);if(1!==h.length)return!1;if(f){if((l=h[0]).type!==f.type||l.prop!==f.prop)return!1;if(Array.isArray(f.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var g=0;g<f.traces.length;g++)if(f.traces[g]!==l.traces[g])return!1}else if(l.prop!==f.prop)return!1}else f=h[0],Array.isArray(f.traces)&&f.traces.sort();var m=(l=h[0]).value;if(Array.isArray(m)){if(1!==m.length)return!1;m=m[0]}o&&(o[m]=v)}return f},K.executeAPICommand=function(a,r,o){if("skip"===r)return Promise.resolve();var v=M.apiMethodRegistry[r],p=[a];Array.isArray(o)||(o=[]);for(var f=0;f<o.length;f++)p.push(o[f]);return v.apply(null,p).catch(function(l){return I.warn("API call to Plotly."+r+" rejected.",l),Promise.reject(l)})},K.computeAPICommandBindings=function(a,r,o){var v;switch(Array.isArray(o)||(o=[]),r){case"restyle":v=i(a,o);break;case"relayout":v=n(a,o);break;case"update":v=i(a,[o[0],o[2]]).concat(n(a,[o[1]]));break;case"animate":v=function T(a,r){return Array.isArray(r[0])&&1===r[0].length&&-1!==["string","number"].indexOf(typeof r[0][0])?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}(0,o);break;default:v=[]}return v}},47472:($,K,e)=>{"use strict";var M=e(18836).extendFlat;K.Y=function(I,t){t=t||{};var T={valType:"info_array",editType:(I=I||{}).editType,items:[{valType:"number",min:0,max:1,editType:I.editType},{valType:"number",min:0,max:1,editType:I.editType}],dflt:[0,1]},n=I.name?I.name+" ":"",i=I.trace?"trace ":"subplot ",u=t.description?" "+t.description:"",a={x:M({},T,{description:["Sets the horizontal domain of this ",n,i,"(in plot fraction).",u].join("")}),y:M({},T,{description:["Sets the vertical domain of this ",n,i,"(in plot fraction).",u].join("")}),editType:I.editType};return I.noGridCell||(a.row={valType:"integer",min:0,dflt:0,editType:I.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",n,i,".",u].join("")},a.column={valType:"integer",min:0,dflt:0,editType:I.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",n,i,".",u].join("")}),a},K.c=function(I,t,T,n){var i=n&&n.x||[0,1],u=n&&n.y||[0,1],a=t.grid;if(a){var r=T("domain.column");void 0!==r&&(r<a.columns?i=a._domains.x[r]:delete I.domain.column);var o=T("domain.row");void 0!==o&&(o<a.rows?u=a._domains.y[o]:delete I.domain.row)}var v=T("domain.x",i),p=T("domain.y",u);v[0]<v[1]||(I.domain.x=i.slice()),p[0]<p[1]||(I.domain.y=u.slice())}},47297:$=>{"use strict";$.exports=function(K){var e=K.editType,M=K.colorEditType;void 0===M&&(M=e);var I={family:{valType:"string",noBlank:!0,strict:!0,editType:e,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:M},editType:e,description:""+(K.description||"")};return K.autoSize&&(I.size.dflt="auto"),K.autoColor&&(I.color.dflt="auto"),K.arrayOk&&(I.family.arrayOk=!0,I.size.arrayOk=!0,I.color.arrayOk=!0),I}},27150:$=>{"use strict";$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}}},15462:($,K)=>{"use strict";K.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},K.axesNames=["lonaxis","lataxis"],K.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},K.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},K.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},K.clipPad=.001,K.precision=.1,K.landColor="#F0DC82",K.waterColor="#3399FF",K.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},K.sphereSVG={type:"Sphere"},K.fillLayers={ocean:1,land:1,lakes:1},K.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},K.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],K.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],K.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},64445:($,K,e)=>{"use strict";var M=e(21572),I=e(47956),t=I.geoPath,T=I.geoDistance,n=e(5379),i=e(97799),u=e(5228),a=u.strTranslate,r=e(8416),o=e(27630),v=e(76863),p=e(31556),f=e(91464),l=e(73332).getAutoRange,y=e(25429),s=e(48356).prepSelect,x=e(48356).clearOutline,h=e(48356).selectOnClick,g=e(34757),m=e(15462),d=e(14369),A=e(55024),b=e(18191).zL;function c(R){this.id=R.id,this.graphDiv=R.graphDiv,this.container=R.container,this.topojsonURL=R.topojsonURL,this.isStatic=R.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=c.prototype;function P(R,F){var _=m.clipPad,z=R[0]+_,D=R[1]-_,k=F[0]+_,O=F[1]-_;z>0&&D<0&&(D+=360);var U=(D-z)/4;return{type:"Polygon",coordinates:[[[z,k],[z,O],[z+U,O],[z+2*U,O],[z+3*U,O],[D,O],[D,k],[D-U,k],[D-2*U,k],[D-3*U,k],[z,k]]]}}$.exports=function(F){return new c(F)},S.plot=function(R,F,_,z){var D=this;if(z)return D.update(R,F,!0);D._geoCalcData=R,D._fullLayout=F;var k=F[this.id],O=[],U=!1;for(var H in m.layerNameToAdjective)if("frame"!==H&&k["show"+H]){U=!0;break}for(var j=!1,ee=0;ee<R.length;ee++){var W=R[0][0].trace;W._geo=D,W.locationmode&&(U=!0);var B=W.marker;if(B){var te=B.angle,q=B.angleref;(te||"north"===q||"previous"===q)&&(j=!0)}}if(this._hasMarkerAngles=j,U){var oe=A.getTopojsonName(k);(null===D.topojson||oe!==D.topojsonName)&&(D.topojsonName=oe,void 0===PlotlyGeoAssets.topojson[D.topojsonName]&&O.push(D.fetchTopojson()))}O=O.concat(d.fetchTraceGeoData(R)),_.push(new Promise(function(ie,V){Promise.all(O).then(function(){D.topojson=PlotlyGeoAssets.topojson[D.topojsonName],D.update(R,F),ie()}).catch(V)}))},S.fetchTopojson=function(){var R=this,F=A.getTopojsonPath(R.topojsonURL,R.topojsonName);return new Promise(function(_,z){M.json(F,function(D,k){if(D)return 404===D.status?z(new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):z(new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[R.topojsonName]=k,_()})})},S.update=function(R,F,_){var z=F[this.id];this.hasChoropleth=!1;for(var D=0;D<R.length;D++){var k=R[D],O=k[0].trace;"choropleth"===O.type&&(this.hasChoropleth=!0),!0===O.visible&&O._length>0&&O._module.calcGeoJSON(k,F)}if(!_){if(this.updateProjection(R,F))return;(!this.viewInitial||this.scope!==z.scope)&&this.saveViewInitial(z)}this.scope=z.scope,this.updateBaseLayers(F,z),this.updateDims(F,z),this.updateFx(F,z),p.generalUpdatePerTraceModule(this.graphDiv,this,R,z);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var j=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=j.selectAll("path"),this._render()},S.updateProjection=function(R,F){var _=this.graphDiv,z=F[this.id],D=F._size,k=z.domain,O=z.projection,U=z.lonaxis,H=z.lataxis,j=U._ax,ee=H._ax,W=this.projection=function w(R){var F=R.projection,_=F.type,z=m.projNames[_];z="geo"+u.titleCase(z);for(var k=(I[z]||n[z])(),O=R._isSatellite?180*Math.acos(1/F.distance)/Math.PI:R._isClipped?m.lonaxisSpan[_]/2:null,U=["center","rotate","parallels","clipExtent"],H=function(W){return W?k:[]},j=0;j<U.length;j++){var ee=U[j];"function"!=typeof k[ee]&&(k[ee]=H)}return k.isLonLatOverEdges=function(W){if(null===k(W))return!0;if(O){var B=k.rotate();return T(W,[-B[0],-B[1]])>O*Math.PI/180}return!1},k.getPath=function(){return t().projection(k)},k.getBounds=function(W){return k.getPath().bounds(W)},k.precision(m.precision),R._isSatellite&&k.tilt(F.tilt).distance(F.distance),O&&k.clipAngle(O-m.clipPad),k}(z),B=[[D.l+D.w*k.x[0],D.t+D.h*(1-k.y[1])],[D.l+D.w*k.x[1],D.t+D.h*(1-k.y[0])]],te=z.center||{},q=O.rotation||{},oe=U.range||[],ie=H.range||[];if(z.fitbounds){j._length=B[1][0]-B[0][0],ee._length=B[1][1]-B[0][1],j.range=l(_,j),ee.range=l(_,ee);var V=(j.range[0]+j.range[1])/2,Y=(ee.range[0]+ee.range[1])/2;if(z._isScoped)te={lon:V,lat:Y};else if(z._isClipped){te={lon:V,lat:Y},q={lon:V,lat:Y,roll:q.roll};var ae=O.type,X=m.lonaxisSpan[ae]/2||180,J=m.lataxisSpan[ae]/2||90;oe=[V-X,V+X],ie=[Y-J,Y+J]}else te={lon:V,lat:Y},q={lon:V,lat:q.lat,roll:q.roll}}W.center([te.lon-q.lon,te.lat-q.lat]).rotate([-q.lon,-q.lat,q.roll]).parallels(O.parallels);var ue=P(oe,ie);W.fitExtent(B,ue);var re=this.bounds=W.getBounds(ue),ne=this.fitScale=W.scale(),se=W.translate();if(z.fitbounds){var de=W.getBounds(P(j.range,ee.range)),be=Math.min((re[1][0]-re[0][0])/(de[1][0]-de[0][0]),(re[1][1]-re[0][1])/(de[1][1]-de[0][1]));isFinite(be)?W.scale(be*ne):u.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(O.scale*ne);var De=this.midPt=[(re[0][0]+re[1][0])/2,(re[0][1]+re[1][1])/2];if(W.translate([se[0]+(De[0]-se[0]),se[1]+(De[1]-se[1])]).clipExtent(re),z._isAlbersUsa){var _e=W([te.lon,te.lat]),Ce=W.translate();W.translate([Ce[0]-(_e[0]-Ce[0]),Ce[1]-(_e[1]-Ce[1])])}},S.updateBaseLayers=function(R,F){var _=this,z=_.topojson,D=_.layers,k=_.basePaths;function O(B){return"lonaxis"===B||"lataxis"===B}function U(B){return Boolean(m.lineLayers[B])}function H(B){return Boolean(m.fillLayers[B])}var ee=(this.hasChoropleth?m.layersForChoropleth:m.layers).filter(function(B){return U(B)||H(B)?F["show"+B]:!O(B)||F[B].showgrid}),W=_.framework.selectAll(".layer").data(ee,String);W.exit().each(function(B){delete D[B],delete k[B],M.select(this).remove()}),W.enter().append("g").attr("class",function(B){return"layer "+B}).each(function(B){var te=D[B]=M.select(this);"bg"===B?_.bgRect=te.append("rect").style("pointer-events","all"):O(B)?k[B]=te.append("path").style("fill","none"):"backplot"===B?te.append("g").classed("choroplethlayer",!0):"frontplot"===B?te.append("g").classed("scatterlayer",!0):U(B)?k[B]=te.append("path").style("fill","none").style("stroke-miterlimit",2):H(B)&&(k[B]=te.append("path").style("stroke","none"))}),W.order(),W.each(function(B){var te=k[B],q=m.layerNameToAdjective[B];"frame"===B?te.datum(m.sphereSVG):U(B)||H(B)?te.datum(b(z,z.objects[B])):O(B)&&te.datum(function E(R,F,_){var U,H,j,z=1e-6,D=2.5,k=F[R],O=m.scopeDefaults[F.scope];"lonaxis"===R?(U=O.lonaxisRange,H=O.lataxisRange,j=function(Y,ae){return[Y,ae]}):"lataxis"===R&&(U=O.lataxisRange,H=O.lonaxisRange,j=function(Y,ae){return[ae,Y]});var ee={type:"linear",range:[U[0],U[1]-z],tick0:k.tick0,dtick:k.dtick};f.setConvert(ee,_);var W=f.calcTicks(ee);!F.isScoped&&"lonaxis"===R&&W.pop();for(var B=W.length,te=new Array(B),q=0;q<B;q++)for(var oe=W[q].x,ie=te[q]=[],V=H[0];V<H[1]+D;V+=D)ie.push(j(oe,V));return{type:"MultiLineString",coordinates:te}}(B,F,R)).call(r.stroke,F[B].gridcolor).call(o.dashLine,F[B].griddash,F[B].gridwidth),U(B)?te.call(r.stroke,F[q+"color"]).call(o.dashLine,"",F[q+"width"]):H(B)&&te.call(r.fill,F[q+"color"])})},S.updateDims=function(R,F){var _=this.bounds,z=(F.framewidth||0)/2,D=_[0][0]-z,k=_[0][1]-z,O=_[1][0]-D+z,U=_[1][1]-k+z;o.setRect(this.clipRect,D,k,O,U),this.bgRect.call(o.setRect,D,k,O,U).call(r.fill,F.bgcolor),this.xaxis._offset=D,this.xaxis._length=O,this.yaxis._offset=k,this.yaxis._length=U},S.updateFx=function(R,F){var _=this,z=_.graphDiv,D=_.bgRect,k=R.dragmode,O=R.clickmode;if(!_.isStatic){var ee={element:_.bgRect.node(),gd:z,plotinfo:{id:_.id,xaxis:_.xaxis,yaxis:_.yaxis,fillRangeItems:function(W,B){B.isRect?(W.range={})[_.id]=[H([B.xmin,B.ymin]),H([B.xmax,B.ymax])]:(W.lassoPoints={})[_.id]=B.map(H)}},xaxes:[_.xaxis],yaxes:[_.yaxis],subplot:_.id,clickFn:function(W){2===W&&x(z)}};"pan"===k?(D.node().onmousedown=null,D.call(g(_,F)),D.on("dblclick.zoom",function U(){var W=_.viewInitial,B={};for(var te in W)B[_.id+"."+te]=W[te];i.call("_guiRelayout",z,B),z.emit("plotly_doubleclick",null)}),z._context._scrollZoom.geo||D.on("wheel.zoom",null)):("select"===k||"lasso"===k)&&(D.on(".zoom",null),ee.prepFn=function(W,B,te){s(W,B,te,ee,k)},y.init(ee)),D.on("mousemove",function(){var W=_.projection.invert(u.getPositionFromD3Event());if(!W)return y.unhover(z,M.event);_.xaxis.p2c=function(){return W[0]},_.yaxis.p2c=function(){return W[1]},v.hover(z,M.event,_.id)}),D.on("mouseout",function(){z._dragging||y.unhover(z,M.event)}),D.on("click",function(){"select"!==k&&"lasso"!==k&&(O.indexOf("select")>-1&&h(M.event,z,[_.xaxis],[_.yaxis],_.id,ee),O.indexOf("event")>-1&&v.click(z,M.event))})}function H(W){return _.projection.invert([W[0]+_.xaxis._offset,W[1]+_.yaxis._offset])}},S.makeFramework=function(){var R=this,F=R.graphDiv,_=F._fullLayout,z="clip"+_._uid+R.id;R.clipDef=_._clips.append("clipPath").attr("id",z),R.clipRect=R.clipDef.append("rect"),R.framework=M.select(R.container).append("g").attr("class","geo "+R.id).call(o.setClipUrl,z,F),R.project=function(D){var k=R.projection(D);return k?[k[0]-R.xaxis._offset,k[1]-R.yaxis._offset]:[null,null]},R.xaxis={_id:"x",c2p:function(D){return R.project(D)[0]}},R.yaxis={_id:"y",c2p:function(D){return R.project(D)[1]}},R.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},f.setConvert(R.mockAxis,_)},S.saveViewInitial=function(R){var D,F=R.center||{},_=R.projection,z=_.rotation||{};this.viewInitial={fitbounds:R.fitbounds,"projection.scale":_.scale},D=R._isScoped?{"center.lon":F.lon,"center.lat":F.lat}:R._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":z.lon},u.extendFlat(this.viewInitial,D)},S.render=function(R){this._hasMarkerAngles&&R?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var _,R=this.projection,F=R.getPath();function z(k){var O=R(k.lonlat);return O?a(O[0],O[1]):null}function D(k){return R.isLonLatOverEdges(k.lonlat)?"none":null}for(_ in this.basePaths)this.basePaths[_].attr("d",F);for(_ in this.dataPaths)this.dataPaths[_].attr("d",function(k){return F(k.geojson)});for(_ in this.dataPoints)this.dataPoints[_].attr("display",D).attr("transform",z)}},48096:($,K,e)=>{"use strict";var M=e(65644).AU,I=e(5228).counterRegex,t=e(64445),T="geo",n=I(T),i={};i[T]={valType:"subplotid",dflt:T,editType:"calc",description:["Sets a reference between this trace's geospatial coordinates and","a geographic map.","If *geo* (the default value), the geospatial coordinates refer to","`layout.geo`.","If *geo2*, the geospatial coordinates refer to `layout.geo2`,","and so on."].join(" ")},$.exports={attr:T,name:T,idRoot:T,idRegex:n,attrRegex:n,attributes:i,layoutAttributes:e(41469),supplyLayoutDefaults:e(25936),plot:function u(o){for(var v=o._fullLayout,p=o.calcdata,f=v._subplots[T],l=0;l<f.length;l++){var y=f[l],s=M(p,T,y),h=v[y]._subplot;h||(h=t({id:y,graphDiv:o,container:v._geolayer.node(),topojsonURL:o._context.topojsonURL,staticPlot:o._context.staticPlot}),v[y]._subplot=h),h.plot(s,v,o._promises)}},updateFx:function r(o){for(var v=o._fullLayout,p=v._subplots[T],f=0;f<p.length;f++){var l=v[p[f]];l._subplot.updateFx(v,l)}},clean:function a(o,v,p,f){for(var l=f._subplots[T]||[],y=0;y<l.length;y++){var s=l[y],x=f[s]._subplot;!v[s]&&x&&(x.framework.remove(),x.clipDef.remove())}}}},41469:($,K,e)=>{"use strict";var M=e(36593),I=e(47472).Y,t=e(65822).P,T=e(15462),n=e(71859).overrideAll,i=e(65452),u={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}],description:["Sets the range of this axis (in degrees),","sets the map's clipped coordinates."].join(" ")},showgrid:{valType:"boolean",dflt:!1,description:"Sets whether or not graticule are shown on the map."},tick0:{valType:"number",dflt:0,description:["Sets the graticule's starting tick longitude/latitude."].join(" ")},dtick:{valType:"number",description:["Sets the graticule's longitude/latitude tick step."].join(" ")},gridcolor:{valType:"color",dflt:M.lightLine,description:["Sets the graticule's stroke color."].join(" ")},gridwidth:{valType:"number",min:0,dflt:1,description:["Sets the graticule's stroke width (in px)."].join(" ")},griddash:t};($.exports=n({domain:I({name:"geo"},{description:["Note that geo subplots are constrained by domain.","In general, when `projection.scale` is set to 1.","a map will fit either its x or y domain, but not both."].join(" ")}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot",description:["Determines if this subplot's view settings are auto-computed to fit trace data.","On scoped maps, setting `fitbounds` leads to `center.lon` and `center.lat` getting auto-filled.","On maps with a non-clipped projection, setting `fitbounds` leads to `center.lon`, `center.lat`,","and `projection.rotation.lon` getting auto-filled.","On maps with a clipped projection, setting `fitbounds` leads to `center.lon`, `center.lat`,","`projection.rotation.lon`, `projection.rotation.lat`, `lonaxis.range` and `lonaxis.range`","getting auto-filled.","If *locations*, only the trace's visible locations are considered in the `fitbounds` computations.","If *geojson*, the entire trace input `geojson` (if provided) is considered in the `fitbounds` computations,","Defaults to *false*."].join(" ")},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0,description:["Sets the resolution of the base layers.","The values have units of km/mm","e.g. 110 corresponds to a scale ratio of 1:110,000,000."].join(" ")},scope:{valType:"enumerated",values:i(T.scopeDefaults),dflt:"world",description:"Set the scope of the map."},projection:{type:{valType:"enumerated",values:i(T.projNames),description:"Sets the projection type."},rotation:{lon:{valType:"number",description:["Rotates the map along parallels","(in degrees East).","Defaults to the center of the `lonaxis.range` values."].join(" ")},lat:{valType:"number",description:["Rotates the map along meridians","(in degrees North)."].join(" ")},roll:{valType:"number",description:["Roll the map (in degrees)","For example, a roll of *180* makes the map appear upside down."].join(" ")}},tilt:{valType:"number",dflt:0,description:["For satellite projection type only.","Sets the tilt angle of perspective projection."].join(" ")},distance:{valType:"number",min:1.001,dflt:2,description:["For satellite projection type only.","Sets the distance from the center of the sphere to the point of view","as a proportion of the sphere\u2019s radius."].join(" ")},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}],description:["For conic projection types only.","Sets the parallels (tangent, secant)","where the cone intersects the sphere."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Zooms in or out on the map view.","A scale of *1* corresponds to the largest zoom level","that fits the map's lon and lat ranges. "].join(" ")}},center:{lon:{valType:"number",description:["Sets the longitude of the map's center.","By default, the map's longitude center lies at the middle of the longitude range","for scoped projection and above `projection.rotation.lon` otherwise."].join(" ")},lat:{valType:"number",description:["Sets the latitude of the map's center.","For all projection types, the map's latitude center lies","at the middle of the latitude range by default."].join(" ")}},visible:{valType:"boolean",dflt:!0,description:"Sets the default visibility of the base layers."},showcoastlines:{valType:"boolean",description:"Sets whether or not the coastlines are drawn."},coastlinecolor:{valType:"color",dflt:M.defaultLine,description:"Sets the coastline color."},coastlinewidth:{valType:"number",min:0,dflt:1,description:"Sets the coastline stroke width (in px)."},showland:{valType:"boolean",dflt:!1,description:"Sets whether or not land masses are filled in color."},landcolor:{valType:"color",dflt:T.landColor,description:"Sets the land mass color."},showocean:{valType:"boolean",dflt:!1,description:"Sets whether or not oceans are filled in color."},oceancolor:{valType:"color",dflt:T.waterColor,description:"Sets the ocean color"},showlakes:{valType:"boolean",dflt:!1,description:"Sets whether or not lakes are drawn."},lakecolor:{valType:"color",dflt:T.waterColor,description:"Sets the color of the lakes."},showrivers:{valType:"boolean",dflt:!1,description:"Sets whether or not rivers are drawn."},rivercolor:{valType:"color",dflt:T.waterColor,description:"Sets color of the rivers."},riverwidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the rivers."},showcountries:{valType:"boolean",description:"Sets whether or not country boundaries are drawn."},countrycolor:{valType:"color",dflt:M.defaultLine,description:"Sets line color of the country boundaries."},countrywidth:{valType:"number",min:0,dflt:1,description:"Sets line width (in px) of the country boundaries."},showsubunits:{valType:"boolean",description:["Sets whether or not boundaries of subunits within countries","(e.g. states, provinces) are drawn."].join(" ")},subunitcolor:{valType:"color",dflt:M.defaultLine,description:"Sets the color of the subunits boundaries."},subunitwidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the subunits boundaries."},showframe:{valType:"boolean",description:"Sets whether or not a frame is drawn around the map."},framecolor:{valType:"color",dflt:M.defaultLine,description:"Sets the color the frame."},framewidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the frame."},bgcolor:{valType:"color",dflt:M.background,description:"Set the background color of the map"},lonaxis:u,lataxis:u},"plot","from-root")).uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in the view","(projection and center). Defaults to `layout.uirevision`."].join(" ")}},25936:($,K,e)=>{"use strict";var M=e(5228),I=e(11435),t=e(65644).NG,T=e(15462),n=e(41469),i=T.axesNames;function u(a,r,o,v){var f=t(v.fullData,"geo",v.id).map(function(ie){return ie._expandedIndex}),l=o("resolution"),y=o("scope"),s=T.scopeDefaults[y],x=o("projection.type",s.projType),h=r._isAlbersUsa="albers usa"===x;h&&(y=r.scope="usa");var g=r._isScoped="world"!==y,m=r._isSatellite="satellite"===x,d=r._isConic=-1!==x.indexOf("conic")||"albers"===x,A=r._isClipped=!!T.lonaxisSpan[x];if(!1===a.visible){var b=M.extendDeep({},r._template);b.showcoastlines=!1,b.showcountries=!1,b.showframe=!1,b.showlakes=!1,b.showland=!1,b.showocean=!1,b.showrivers=!1,b.showsubunits=!1,b.lonaxis&&(b.lonaxis.showgrid=!1),b.lataxis&&(b.lataxis.showgrid=!1),r._template=b}for(var c=o("visible"),w=0;w<i.length;w++){var R,E=i[w],P=[30,10][w];if(g)R=s[E+"Range"];else{var F=T[E+"Span"],_=(F[x]||F["*"])/2,z=o("projection.rotation."+E.substr(0,3),s.projRotate[w]);R=[z-_,z+_]}var D=o(E+".range",R);o(E+".tick0"),o(E+".dtick",P),o(E+".showgrid",!!c&&void 0)&&(o(E+".gridcolor"),o(E+".gridwidth"),o(E+".griddash")),r[E]._ax={type:"linear",_id:E.slice(0,3),_traceIndices:f,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var k=r.lonaxis.range,O=r.lataxis.range,U=k[0],H=k[1];U>0&&H<0&&(H+=360);var ee,B,te,j=(U+H)/2;if(!h){var W=g?s.projRotate:[j,0,0];ee=o("projection.rotation.lon",W[0]),o("projection.rotation.lat",W[1]),o("projection.rotation.roll",W[2]),o("showcoastlines",!g&&c)&&(o("coastlinecolor"),o("coastlinewidth")),o("showocean",!!c&&void 0)&&o("oceancolor")}(h?(B=-96.6,te=38.7):(B=g?j:ee,te=(O[0]+O[1])/2),o("center.lon",B),o("center.lat",te),m&&(o("projection.tilt"),o("projection.distance")),d)&&o("projection.parallels",s.projParallels||[0,60]);o("projection.scale"),o("showland",!!c&&void 0)&&o("landcolor"),o("showlakes",!!c&&void 0)&&o("lakecolor"),o("showrivers",!!c&&void 0)&&(o("rivercolor"),o("riverwidth")),o("showcountries",g&&"usa"!==y&&c)&&(o("countrycolor"),o("countrywidth")),("usa"===y||"north america"===y&&50===l)&&(o("showsubunits",c),o("subunitcolor"),o("subunitwidth")),g||o("showframe",c)&&(o("framecolor"),o("framewidth")),o("bgcolor"),o("fitbounds")&&(delete r.projection.scale,g?(delete r.center.lon,delete r.center.lat):A?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}$.exports=function(r,o,v){I(r,o,v,{type:"geo",attributes:n,handleDefaults:u,fullData:v,partition:"y"})}},34757:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(97799),T=Math.PI/180,n=180/Math.PI,i={cursor:"pointer"},u={cursor:"auto"};function r(E,P){return M.behavior.zoom().translate(P.translate()).scale(P.scale())}function o(E,P,R){var F=E.id,_=E.graphDiv,z=_.layout,D=z[F],k=_._fullLayout,O=k[F],U={},H={};function j(ee,W){U[F+"."+ee]=I.nestedProperty(D,ee).get(),t.call("_storeDirectGUIEdit",z,k._preGUI,U);var B=I.nestedProperty(O,ee);B.get()!==W&&(B.set(W),I.nestedProperty(D,ee).set(W),H[F+"."+ee]=W)}R(j),j("projection.scale",P.scale()/E.fitScale),j("fitbounds",!1),_.emit("plotly_relayout",H)}function v(E,P){var R=r(0,P);function z(k){var O=P.invert(E.midPt);k("center.lon",O[0]),k("center.lat",O[1])}return R.on("zoomstart",function F(){M.select(this).style(i)}).on("zoom",function _(){P.scale(M.event.scale).translate(M.event.translate),E.render(!0);var k=P.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":P.scale()/E.fitScale,"geo.center.lon":k[0],"geo.center.lat":k[1]})}).on("zoomend",function D(){M.select(this).style(u),o(E,P,z)}),R}function p(E,P){var _,z,D,k,O,U,H,j,ee,R=r(0,P);function W(V){return P.invert(V)}function ie(V){var Y=P.rotate(),ae=P.invert(E.midPt);V("projection.rotation.lon",-Y[0]),V("center.lon",ae[0]),V("center.lat",ae[1])}return R.on("zoomstart",function te(){M.select(this).style(i),_=M.mouse(this),z=P.rotate(),D=P.translate(),k=z,O=W(_)}).on("zoom",function q(){if(U=M.mouse(this),function B(V){var Y=W(V);if(!Y)return!0;var ae=P(Y);return Math.abs(ae[0]-V[0])>2||Math.abs(ae[1]-V[1])>2}(_))return R.scale(P.scale()),void R.translate(P.translate());P.scale(M.event.scale),P.translate([D[0],M.event.translate[1]]),O?W(U)&&(j=W(U),H=[k[0]+(j[0]-O[0]),z[1],z[2]],P.rotate(H),k=H):O=W(_=U),ee=!0,E.render(!0);var V=P.rotate(),Y=P.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":P.scale()/E.fitScale,"geo.center.lon":Y[0],"geo.center.lat":Y[1],"geo.projection.rotation.lon":-V[0]})}).on("zoomend",function oe(){M.select(this).style(u),ee&&o(E,P,ie)}),R}function f(E,P){var k,R={r:P.rotate(),k:P.scale()},F=r(0,P),_=function w(E){for(var P=0,R=arguments.length,F=[];++P<R;)F.push(arguments[P]);var _=M.dispatch.apply(null,F);return _.of=function(z,D){return function(k){var O;try{O=k.sourceEvent=M.event,k.target=E,M.event=k,_[k.type].apply(z,D)}finally{M.event=O}}},_}(F,"zoomstart","zoom","zoomend"),z=0,D=F.on;function O(ee){z++||ee({type:"zoomstart"})}function U(ee){ee({type:"zoom"})}function H(ee){--z||ee({type:"zoomend"})}function j(ee){var W=P.rotate();ee("projection.rotation.lon",-W[0]),ee("projection.rotation.lat",-W[1])}return F.on("zoomstart",function(){M.select(this).style(i);var ee=M.mouse(this),W=P.rotate(),B=W,te=P.translate(),q=y(W);k=l(P,ee),D.call(F,"zoom",function(){var oe=M.mouse(this);if(P.scale(R.k=M.event.scale),k){if(l(P,oe)){P.rotate(W).translate(te);var ie=l(P,oe),V=x(k,ie),Y=A(s(q,V)),ae=R.r=h(Y,k,B);(!isFinite(ae[0])||!isFinite(ae[1])||!isFinite(ae[2]))&&(ae=B),P.rotate(ae),B=ae}}else k=l(P,ee=oe);U(_.of(this,arguments))}),O(_.of(this,arguments))}).on("zoomend",function(){M.select(this).style(u),D.call(F,"zoom",null),H(_.of(this,arguments)),o(E,P,j)}).on("zoom.redraw",function(){E.render(!0);var ee=P.rotate();E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":P.scale()/E.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})}),M.rebind(F,_,"on")}function l(E,P){var R=E.invert(P);return R&&isFinite(R[0])&&isFinite(R[1])&&function b(E){var P=E[0]*T,R=E[1]*T,F=Math.cos(R);return[F*Math.cos(P),F*Math.sin(P),Math.sin(R)]}(R)}function y(E){var P=.5*E[0]*T,R=.5*E[1]*T,F=.5*E[2]*T,_=Math.sin(P),z=Math.cos(P),D=Math.sin(R),k=Math.cos(R),O=Math.sin(F),U=Math.cos(F);return[z*k*U+_*D*O,_*k*U-z*D*O,z*D*U+_*k*O,z*k*O-_*D*U]}function s(E,P){var R=E[0],F=E[1],_=E[2],z=E[3],D=P[0],k=P[1],O=P[2],U=P[3];return[R*D-F*k-_*O-z*U,R*k+F*D+_*U-z*O,R*O-F*U+_*D+z*k,R*U+F*O-_*k+z*D]}function x(E,P){if(E&&P){var R=function S(E,P){return[E[1]*P[2]-E[2]*P[1],E[2]*P[0]-E[0]*P[2],E[0]*P[1]-E[1]*P[0]]}(E,P),F=Math.sqrt(c(R,R)),_=.5*Math.acos(Math.max(-1,Math.min(1,c(E,P)))),z=Math.sin(_)/F;return F&&[Math.cos(_),R[2]*z,-R[1]*z,R[0]*z]}}function h(E,P,R){var F=d(P,2,E[0]);F=d(F,1,E[1]),F=d(F,0,E[2]-R[2]);var ee,W,_=P[0],z=P[1],D=P[2],k=F[0],O=F[1],U=F[2],H=Math.atan2(z,_)*n,j=Math.sqrt(_*_+z*z);Math.abs(O)>j?(W=(O>0?90:-90)-H,ee=0):(W=Math.asin(O/j)*n-H,ee=Math.sqrt(j*j-O*O));var B=180-W-2*H,te=(Math.atan2(U,k)-Math.atan2(D,ee))*n,q=(Math.atan2(U,k)-Math.atan2(D,-ee))*n;return g(R[0],R[1],W,te)<=g(R[0],R[1],B,q)?[W,te,R[2]]:[B,q,R[2]]}function g(E,P,R,F){var _=m(R-E),z=m(F-P);return Math.sqrt(_*_+z*z)}function m(E){return(E%360+540)%360-180}function d(E,P,R){var F=R*T,_=E.slice(),z=0===P?1:0,D=2===P?1:2,k=Math.cos(F),O=Math.sin(F);return _[z]=E[z]*k-E[D]*O,_[D]=E[D]*k+E[z]*O,_}function A(E){return[Math.atan2(2*(E[0]*E[1]+E[2]*E[3]),1-2*(E[1]*E[1]+E[2]*E[2]))*n,Math.asin(Math.max(-1,Math.min(1,2*(E[0]*E[2]-E[3]*E[1]))))*n,Math.atan2(2*(E[0]*E[3]+E[1]*E[2]),1-2*(E[2]*E[2]+E[3]*E[3]))*n]}function c(E,P){for(var R=0,F=0,_=E.length;F<_;++F)R+=E[F]*P[F];return R}$.exports=function a(E,P){var R=E.projection;return(P._isScoped?v:P._isClipped?f:p)(E,R)}},65644:($,K,e)=>{"use strict";var M=e(97799),I=e(4669).SUBPLOT_PATTERN;K.AU=function(t,T,n){var i=M.subplotsRegistry[T];if(!i)return[];for(var u=i.attr,a=[],r=0;r<t.length;r++){var o=t[r];o[0].trace[u]===n&&a.push(o)}return a},K.a0=function(t,T){var u,n=[],i=[];if(!(u="string"==typeof T?M.getModule(T).plot:"function"==typeof T?T:T.plot))return[n,t];for(var a=0;a<t.length;a++){var r=t[a],o=r[0].trace;!0!==o.visible||0===o._length||(o._module&&o._module.plot===u?n.push(r):i.push(r))}return[n,i]},K.NG=function(T,n,i){if(!M.subplotsRegistry[n])return[];var r,o,v,u=M.subplotsRegistry[n].attr,a=[];if("gl2d"===n){var p=i.match(I);o="x"+p[1],v="y"+p[2]}for(var f=0;f<T.length;f++)r=T[f],"gl2d"===n&&M.traceIs(r,"gl2d")?r[u[0]]===o&&r[u[1]]===v&&a.push(r):r[u]===i&&a.push(r);return a}},92506:($,K,e)=>{"use strict";var M=e(71546),I=e(85127),t=e(76570),T=e(4669),n=e(45519);function i(a,r){this.element=a,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function u(a){var r=a.mouseContainer,o=a.glplot,v=new i(r,o);function p(){a.xaxis.autorange=!1,a.yaxis.autorange=!1}function l(y,s,x){var c,S,h=a.calcDataBox(),g=o.viewBox,m=v.lastPos[0],d=v.lastPos[1],A=T.MINDRAG*o.pixelRatio,b=T.MINZOOM*o.pixelRatio;function w(z,D,k){var O=Math.min(D,k),U=Math.max(D,k);O!==U?(h[z]=O,h[z+2]=U,v.dataBox=h,a.setRanges(h)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}switch(s*=o.pixelRatio,x*=o.pixelRatio,x=g[3]-g[1]-x,a.fullLayout.dragmode){case"zoom":if(y){var E=s/(g[2]-g[0])*(h[2]-h[0])+h[0],P=x/(g[3]-g[1])*(h[3]-h[1])+h[1];v.boxInited||(v.boxStart[0]=E,v.boxStart[1]=P,v.dragStart[0]=s,v.dragStart[1]=x),v.boxEnd[0]=E,v.boxEnd[1]=P,v.boxInited=!0,!v.boxEnabled&&(v.boxStart[0]!==v.boxEnd[0]||v.boxStart[1]!==v.boxEnd[1])&&(v.boxEnabled=!0);var R=Math.abs(v.dragStart[0]-s)<b,F=Math.abs(v.dragStart[1]-x)<b;if(!function f(){for(var y=a.graphDiv._fullLayout._axisConstraintGroups,s=a.xaxis._id,x=a.yaxis._id,h=0;h<y.length;h++)if(-1!==y[h][s]){if(-1!==y[h][x])return!0;break}return!1}()||R&&F)R&&(v.boxEnd[0]=v.boxStart[0]),F&&(v.boxEnd[1]=v.boxStart[1]);else{c=v.boxEnd[0]-v.boxStart[0],S=v.boxEnd[1]-v.boxStart[1];var _=(h[3]-h[1])/(h[2]-h[0]);Math.abs(c*_)>Math.abs(S)?(v.boxEnd[1]=v.boxStart[1]+Math.abs(c)*_*(S>=0?1:-1),v.boxEnd[1]<h[1]?(v.boxEnd[1]=h[1],v.boxEnd[0]=v.boxStart[0]+(h[1]-v.boxStart[1])/Math.abs(_)):v.boxEnd[1]>h[3]&&(v.boxEnd[1]=h[3],v.boxEnd[0]=v.boxStart[0]+(h[3]-v.boxStart[1])/Math.abs(_))):(v.boxEnd[0]=v.boxStart[0]+Math.abs(S)/_*(c>=0?1:-1),v.boxEnd[0]<h[0]?(v.boxEnd[0]=h[0],v.boxEnd[1]=v.boxStart[1]+(h[0]-v.boxStart[0])*Math.abs(_)):v.boxEnd[0]>h[2]&&(v.boxEnd[0]=h[2],v.boxEnd[1]=v.boxStart[1]+(h[2]-v.boxStart[0])*Math.abs(_)))}}else v.boxEnabled?(c=v.boxStart[0]!==v.boxEnd[0],S=v.boxStart[1]!==v.boxEnd[1],c||S?(c&&(w(0,v.boxStart[0],v.boxEnd[0]),a.xaxis.autorange=!1),S&&(w(1,v.boxStart[1],v.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),v.boxEnabled=!1,v.boxInited=!1):v.boxInited&&(v.boxInited=!1);break;case"pan":v.boxEnabled=!1,v.boxInited=!1,y?(v.panning||(v.dragStart[0]=s,v.dragStart[1]=x),Math.abs(v.dragStart[0]-s)<A&&(s=v.dragStart[0]),Math.abs(v.dragStart[1]-x)<A&&(x=v.dragStart[1]),c=(m-s)*(h[2]-h[0])/(o.viewBox[2]-o.viewBox[0]),S=(d-x)*(h[3]-h[1])/(o.viewBox[3]-o.viewBox[1]),h[0]+=c,h[2]+=c,h[1]+=S,h[3]+=S,a.setRanges(h),v.panning=!0,v.lastInputTime=Date.now(),p(),a.cameraChanged(),a.handleAnnotations()):v.panning&&(v.panning=!1,a.relayoutCallback())}v.lastPos[0]=s,v.lastPos[1]=x}return v.mouseListener=M(r,l),r.addEventListener("touchstart",function(y){var s=t(y.changedTouches[0],r);l(0,s[0],s[1]),l(1,s[0],s[1]),y.preventDefault()},!!n&&{passive:!1}),r.addEventListener("touchmove",function(y){y.preventDefault();var s=t(y.changedTouches[0],r);l(1,s[0],s[1]),y.preventDefault()},!!n&&{passive:!1}),r.addEventListener("touchend",function(y){l(0,v.lastPos[0],v.lastPos[1]),y.preventDefault()},!!n&&{passive:!1}),v.wheelListener=I(r,function(y,s){if(!a.scrollZoom)return!1;var x=a.calcDataBox(),h=o.viewBox,g=v.lastPos[0],m=v.lastPos[1],d=Math.exp(5*s/(h[3]-h[1])),A=g/(h[2]-h[0])*(x[2]-x[0])+x[0],b=m/(h[3]-h[1])*(x[3]-x[1])+x[1];return x[0]=(x[0]-A)*d+A,x[2]=(x[2]-A)*d+A,x[1]=(x[1]-b)*d+b,x[3]=(x[3]-b)*d+b,a.setRanges(x),v.lastInputTime=Date.now(),p(),a.cameraChanged(),a.handleAnnotations(),a.relayoutCallback(),!0},!0),v}},7518:($,K,e)=>{"use strict";var M=e(91464),I=e(31936);function t(u){this.scene=u,this.gl=u.gl,this.pixelRatio=u.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=t.prototype,n=["xaxis","yaxis"];T.merge=function(u){var a,r,o,v,p,f,l,y,s,x,h;for(this.titleEnable=!1,this.backgroundColor=I(u.plot_bgcolor),x=0;x<2;++x){var g=(a=n[x]).charAt(0);for(o=(r=u[this.scene[a]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":r.title.text,h=0;h<=2;h+=2)this.labelEnable[x+h]=!1,this.labels[x+h]=o,this.labelColor[x+h]=I(r.title.font.color),this.labelFont[x+h]=r.title.font.family,this.labelSize[x+h]=r.title.font.size,this.labelPad[x+h]=this.getLabelPad(a,r),this.tickEnable[x+h]=!1,this.tickColor[x+h]=I((r.tickfont||{}).color),this.tickAngle[x+h]="auto"===r.tickangle?0:Math.PI*-r.tickangle/180,this.tickPad[x+h]=this.getTickPad(r),this.tickMarkLength[x+h]=0,this.tickMarkWidth[x+h]=r.tickwidth||0,this.tickMarkColor[x+h]=I(r.tickcolor),this.borderLineEnable[x+h]=!1,this.borderLineColor[x+h]=I(r.linecolor),this.borderLineWidth[x+h]=r.linewidth||0;l=this.hasSharedAxis(r),p=this.hasAxisInDfltPos(a,r)&&!l,f=this.hasAxisInAltrPos(a,r)&&!l,v=r.mirror||!1,y=l?-1!==String(v).indexOf("all"):!!v,s=l?"allticks"===v:-1!==String(v).indexOf("ticks"),p?this.labelEnable[x]=!0:f&&(this.labelEnable[x+2]=!0),p?this.tickEnable[x]=r.showticklabels:f&&(this.tickEnable[x+2]=r.showticklabels),(p||y)&&(this.borderLineEnable[x]=r.showline),(f||y)&&(this.borderLineEnable[x+2]=r.showline),(p||s)&&(this.tickMarkLength[x]=this.getTickMarkLength(r)),(f||s)&&(this.tickMarkLength[x+2]=this.getTickMarkLength(r)),this.gridLineEnable[x]=r.showgrid,this.gridLineColor[x]=I(r.gridcolor),this.gridLineWidth[x]=r.gridwidth,this.zeroLineEnable[x]=r.zeroline,this.zeroLineColor[x]=I(r.zerolinecolor),this.zeroLineWidth[x]=r.zerolinewidth}},T.hasSharedAxis=function(u){var a=this.scene,r=a.fullLayout._subplots.gl2d;return 0!==M.findSubplotsWithAxis(r,u).indexOf(a.id)},T.hasAxisInDfltPos=function(u,a){var r=a.side;return"xaxis"===u?"bottom"===r:"yaxis"===u?"left"===r:void 0},T.hasAxisInAltrPos=function(u,a){var r=a.side;return"xaxis"===u?"top"===r:"yaxis"===u?"right"===r:void 0},T.getLabelPad=function(u,a){var r=1.5,o=a.title.font.size,v=a.showticklabels;return"xaxis"===u?"top"===a.side?o*(r+(v?1:0))-10:o*(r+(v?.5:0))-10:"yaxis"===u?"right"===a.side?10+o*(r+(v?1:.5)):10+o*(r+(v?.5:0)):void 0},T.getTickPad=function(u){return"outside"===u.ticks?10+u.ticklen:15},T.getTickMarkLength=function(u){if(!u.ticks)return 0;var a=u.ticklen;return"inside"===u.ticks?-a:a},$.exports=function i(u){return new t(u)}},94652:($,K,e)=>{"use strict";var M=e(71859).overrideAll,I=e(8358),t=e(11161),T=e(70415),n=e(4669),i=e(24329),u=e(82815),a=e(65644).NG;K.name="gl2d",K.attr=["xaxis","yaxis"],K.idRoot=["x","y"],K.idRegex=n.idRegex,K.attrRegex=n.attrRegex,K.attributes=e(91674),K.supplyLayoutDefaults=function(r,o,v){o._has("cartesian")||i.supplyLayoutDefaults(r,o,v)},K.layoutAttrOverrides=M(i.layoutAttributes,"plot","from-root"),K.baseLayoutAttrOverrides=M({plot_bgcolor:t.plot_bgcolor,hoverlabel:u.hoverlabel},"plot","nested"),K.plot=function(o){for(var v=o._fullLayout,p=o._fullData,f=v._subplots.gl2d,l=0;l<f.length;l++){var y=f[l],s=v._plots[y],x=a(p,"gl2d",y),h=s._scene2d;void 0===h&&(h=new I({id:y,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},v),s._scene2d=h),h.plot(x,o.calcdata,v,o.layout)}},K.clean=function(r,o,v,p){for(var f=p._subplots.gl2d||[],l=0;l<f.length;l++){var y=f[l],s=p._plots[y];if(s._scene2d){var x=a(r,"gl2d",y);0===x.length&&(s._scene2d.destroy(),delete p._plots[y])}}i.clean.apply(this,arguments)},K.drawFramework=function(r){r._context.staticPlot||i.drawFramework(r)},K.toSVG=function(r){for(var o=r._fullLayout,v=o._subplots.gl2d,p=0;p<v.length;p++){var l=o._plots[v[p]]._scene2d,y=l.toImage("png");o._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":y,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},K.updateFx=function(r){for(var o=r._fullLayout,v=o._subplots.gl2d,p=0;p<v.length;p++){o._plots[v[p]]._scene2d.updateFx(o.dragmode)}}},8358:($,K,e)=>{"use strict";var g,m,M=e(97799),I=e(91464),t=e(76863),T=e(17745).gl_plot2d,n=e(17745).gl_spikes2d,i=e(17745).gl_select_box,u=e(28669),a=e(7518),r=e(92506),o=e(54243),v=e(93698),p=v.enforce,f=v.clean,l=e(73332).doAutoRange,y=e(85996),s=y.drawMode,x=y.selectMode,h=["xaxis","yaxis"],d=e(4669).SUBPLOT_PATTERN;function A(S,w){this.container=S.container,this.graphDiv=S.graphDiv,this.pixelRatio=S.plotGlPixelRatio||window.devicePixelRatio,this.id=S.id,this.staticPlot=!!S.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(w),this.makeFramework(),!this.stopped&&(this.glplotOptions=a(this),this.glplotOptions.merge(w),this.glplot=T(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=n(this.glplot),this.selectBox=i(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=A;var b=A.prototype;b.makeFramework=function(){if(this.staticPlot){if(!m&&(g=document.createElement("canvas"),!(m=u({canvas:g,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=g,this.gl=m}else{var S=this.container.querySelector(".gl-canvas-focus"),w=u({canvas:S,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!w)return o(this),void(this.stopped=!0);this.canvas=S,this.gl=w}var E=this.canvas;E.style.width="100%",E.style.height="100%",E.style.position="absolute",E.style.top="0px",E.style.left="0px",E.style["pointer-events"]="none",this.updateSize(E);var P=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none";var R=this.mouseContainer=document.createElement("div");R.style.position="absolute",R.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(P),F.appendChild(R);var _=this;R.addEventListener("mouseout",function(){_.isMouseOver=!1,_.unhover()}),R.addEventListener("mouseover",function(){_.isMouseOver=!0})},b.toImage=function(S){S||(S="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(g),this.updateSize(this.canvas);var w=this.glplot.gl,E=w.drawingBufferWidth,P=w.drawingBufferHeight;w.clearColor(1,1,1,0),w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),w.bindFramebuffer(w.FRAMEBUFFER,null);var R=new Uint8Array(E*P*4);w.readPixels(0,0,E,P,w.RGBA,w.UNSIGNED_BYTE,R);for(var F=0,_=P-1;F<_;++F,--_)for(var z=0;z<E;++z)for(var D=0;D<4;++D){var k=R[4*(E*F+z)+D];R[4*(E*F+z)+D]=R[4*(E*_+z)+D],R[4*(E*_+z)+D]=k}var O=document.createElement("canvas");O.width=E,O.height=P;var j,U=O.getContext("2d",{willReadFrequently:!0}),H=U.createImageData(E,P);switch(H.data.set(R),U.putImageData(H,0,0),S){case"jpeg":j=O.toDataURL("image/jpeg");break;case"webp":j=O.toDataURL("image/webp");break;default:j=O.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(g),j},b.updateSize=function(S){S||(S=this.canvas);var w=this.pixelRatio,E=this.fullLayout,P=E.width,R=E.height,F=0|Math.ceil(w*P),_=0|Math.ceil(w*R);return(S.width!==F||S.height!==_)&&(S.width=F,S.height=_),S},b.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var S=[I.calcTicks(this.xaxis),I.calcTicks(this.yaxis)],w=0;w<2;++w)for(var E=0;E<S[w].length;++E)S[w][E].text=S[w][E].text+"";return S},b.updateRefs=function(S){this.fullLayout=S;var w=this.id.match(d),E="xaxis"+w[1],P="yaxis"+w[2];this.xaxis=this.fullLayout[E],this.yaxis=this.fullLayout[P]},b.relayoutCallback=function(){var S=this.graphDiv,w=this.xaxis,E=this.yaxis,P=S.layout,R={},F=R[w._name+".range"]=w.range.slice(),_=R[E._name+".range"]=E.range.slice();R[w._name+".autorange"]=w.autorange,R[E._name+".autorange"]=E.autorange,M.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,R);var z=P[w._name];z.range=F,z.autorange=w.autorange;var D=P[E._name];D.range=_,D.autorange=E.autorange,R.lastInputTime=this.camera.lastInputTime,S.emit("plotly_relayout",R)},b.cameraChanged=function(){var S=this.camera;this.glplot.setDataBox(this.calcDataBox());var w=this.computeTickMarks();(function c(S,w){for(var E=0;E<2;++E){var P=S[E],R=w[E];if(P.length!==R.length)return!0;for(var F=0;F<P.length;++F)if(P[F].x!==R[F].x)return!0}return!1})(w,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=w,this.glplotOptions.dataBox=S.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},b.handleAnnotations=function(){for(var S=this.graphDiv,w=this.fullLayout.annotations,E=0;E<w.length;E++){var P=w[E];P.xref===this.xaxis._id&&P.yref===this.yaxis._id&&M.getComponentMethod("annotations","drawOne")(S,E)}},b.destroy=function(){if(this.glplot){var S=this.traces;S&&Object.keys(S).map(function(w){S[w].dispose(),delete S[w]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},b.plot=function(S,w,E){var P=this.glplot;this.updateRefs(E),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(S,w),this.updateFx(E.dragmode);var R=E.width,F=E.height;this.updateSize(this.canvas);var _=this.glplotOptions;_.merge(E),_.screenBox=[0,0,R,F];var z={_fullLayout:{_axisConstraintGroups:E._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:E._size}};f(z,this.xaxis),f(z,this.yaxis);var U,H,D=E._size,k=this.xaxis.domain,O=this.yaxis.domain;for(_.viewBox=[D.l+k[0]*D.w,D.b+O[0]*D.h,R-D.r-(1-k[1])*D.w,F-D.t-(1-O[1])*D.h],this.mouseContainer.style.width=D.w*(k[1]-k[0])+"px",this.mouseContainer.style.height=D.h*(O[1]-O[0])+"px",this.mouseContainer.height=D.h*(O[1]-O[0]),this.mouseContainer.style.left=D.l+k[0]*D.w+"px",this.mouseContainer.style.top=D.t+(1-O[1])*D.h+"px",H=0;H<2;++H)(U=this[h[H]])._length=_.viewBox[H+2]-_.viewBox[H],l(this.graphDiv,U),U.setScale();p(z),_.ticks=this.computeTickMarks(),_.dataBox=this.calcDataBox(),_.merge(E),P.update(_),this.glplot.draw()},b.calcDataBox=function(){var S=this.xaxis,w=this.yaxis,E=S.range,P=w.range,R=S.r2l,F=w.r2l;return[R(E[0]),F(P[0]),R(E[1]),F(P[1])]},b.setRanges=function(S){var w=this.xaxis,E=this.yaxis,P=w.l2r,R=E.l2r;w.range=[P(S[0]),P(S[2])],E.range=[R(S[1]),R(S[3])]},b.updateTraces=function(S,w){var P,R,F,E=Object.keys(this.traces);this.fullData=S;e:for(P=0;P<E.length;P++){var _=E[P],z=this.traces[_];for(R=0;R<S.length;R++)if((F=S[R]).uid===_&&F.type===z.type)continue e;z.dispose(),delete this.traces[_]}for(P=0;P<S.length;P++){F=S[P];var D=w[P],k=this.traces[F.uid];k?k.update(F,D):(k=F._module.plot(this,F,D),this.traces[F.uid]=k)}this.glplot.objects.sort(function(O,U){return O._trace.index-U._trace.index})},b.updateFx=function(S){x(S)||s(S)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===S?"move":"zoom"===S?"crosshair":null},b.emitPointAction=function(S,w){for(var R,E=S.trace.uid,P=S.pointIndex,F=0;F<this.fullData.length;F++)this.fullData[F].uid===E&&(R=this.fullData[F]);var _={x:S.traceCoord[0],y:S.traceCoord[1],curveNumber:R.index,pointNumber:P,data:R._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};t.appendArrayPointValue(_,R,P),this.graphDiv.emit(w,{points:[_]})},b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var S=this.glplot,w=this.camera,E=w.mouseListener,P=1===this.lastButtonState&&0===E.buttons,R=this.fullLayout;this.lastButtonState=E.buttons,this.cameraChanged();var z,F=E.x*S.pixelRatio,_=this.canvas.height-S.pixelRatio*E.y;if(w.boxEnabled&&"zoom"===R.dragmode){this.selectBox.enabled=!0;for(var D=this.selectBox.selectBox=[Math.min(w.boxStart[0],w.boxEnd[0]),Math.min(w.boxStart[1],w.boxEnd[1]),Math.max(w.boxStart[0],w.boxEnd[0]),Math.max(w.boxStart[1],w.boxEnd[1])],k=0;k<2;k++)w.boxStart[k]===w.boxEnd[k]&&(D[k]=S.dataBox[k],D[k+2]=S.dataBox[k+2]);S.setDirty()}else if(!w.panning&&this.isMouseOver){this.selectBox.enabled=!1;var O=R._size,U=this.xaxis.domain,H=this.yaxis.domain,j=(z=S.pick(F/S.pixelRatio+O.l+U[0]*O.w,_/S.pixelRatio-(O.t+(1-H[1])*O.h)))&&z.object._trace.handlePick(z);if(j&&P&&this.emitPointAction(j,"plotly_click"),z&&"skip"!==z.object._trace.hoverinfo&&R.hovermode&&j&&(!this.lastPickResult||this.lastPickResult.traceUid!==j.trace.uid||this.lastPickResult.dataCoord[0]!==j.dataCoord[0]||this.lastPickResult.dataCoord[1]!==j.dataCoord[1])){var ee=j;this.lastPickResult={traceUid:j.trace?j.trace.uid:null,dataCoord:j.dataCoord.slice()},this.spikes.update({center:z.dataCoord}),ee.screenCoord=[((S.viewBox[2]-S.viewBox[0])*(z.dataCoord[0]-S.dataBox[0])/(S.dataBox[2]-S.dataBox[0])+S.viewBox[0])/S.pixelRatio,(this.canvas.height-(S.viewBox[3]-S.viewBox[1])*(z.dataCoord[1]-S.dataBox[1])/(S.dataBox[3]-S.dataBox[1])-S.viewBox[1])/S.pixelRatio],this.emitPointAction(j,"plotly_hover");var W=this.fullData[ee.trace.index]||{},B=ee.pointIndex,te=t.castHoverinfo(W,R,B);if(te&&"all"!==te){var q=te.split("+");-1===q.indexOf("x")&&(ee.traceCoord[0]=void 0),-1===q.indexOf("y")&&(ee.traceCoord[1]=void 0),-1===q.indexOf("z")&&(ee.traceCoord[2]=void 0),-1===q.indexOf("text")&&(ee.textLabel=void 0),-1===q.indexOf("name")&&(ee.name=void 0)}t.loneHover({x:ee.screenCoord[0],y:ee.screenCoord[1],xLabel:this.hoverFormatter("xaxis",ee.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",ee.traceCoord[1]),zLabel:ee.traceCoord[2],text:ee.textLabel,name:ee.name,color:t.castHoverOption(W,B,"bgcolor")||ee.color,borderColor:t.castHoverOption(W,B,"bordercolor"),fontFamily:t.castHoverOption(W,B,"font.family"),fontSize:t.castHoverOption(W,B,"font.size"),fontColor:t.castHoverOption(W,B,"font.color"),nameLength:t.castHoverOption(W,B,"namelength"),textAlign:t.castHoverOption(W,B,"align")},{container:this.svgContainer,gd:this.graphDiv})}}z||this.unhover(),S.draw()}},b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),t.loneUnhover(this.svgContainer))},b.hoverFormatter=function(S,w){if(void 0!==w){var E=this[S];return I.tickText(E,E.c2l(w),"hover").text}}},9275:($,K,e)=>{"use strict";var M=e(71859).overrideAll,I=e(82815),t=e(12307),T=e(65644).NG,n=e(5228),i=e(70415),u="gl3d",a="scene";K.name=u,K.attr=a,K.idRoot=a,K.idRegex=K.attrRegex=n.counterRegex("scene"),K.attributes=e(71517),K.layoutAttributes=e(30956),K.baseLayoutAttrOverrides=M({hoverlabel:I.hoverlabel},"plot","nested"),K.supplyLayoutDefaults=e(12544),K.plot=function(o){for(var v=o._fullLayout,p=o._fullData,f=v._subplots[u],l=0;l<f.length;l++){var y=f[l],s=T(p,u,y),x=v[y],h=x.camera,g=x._scene;g||(g=new t({id:y,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:h},v),x._scene=g),g.viewInitial||(g.viewInitial={up:{x:h.up.x,y:h.up.y,z:h.up.z},eye:{x:h.eye.x,y:h.eye.y,z:h.eye.z},center:{x:h.center.x,y:h.center.y,z:h.center.z}}),g.plot(s,v,o.layout)}},K.clean=function(r,o,v,p){for(var f=p._subplots[u]||[],l=0;l<f.length;l++){var y=f[l];!o[y]&&p[y]._scene&&(p[y]._scene.destroy(),p._infolayer&&p._infolayer.selectAll(".annotation-"+y).remove())}},K.toSVG=function(r){for(var o=r._fullLayout,v=o._subplots[u],p=o._size,f=0;f<v.length;f++){var l=o[v[f]],y=l.domain,s=l._scene,x=s.toImage("png");o._glimages.append("svg:image").attr({xmlns:i.svg,"xlink:href":x,x:p.l+p.w*y.x[0],y:p.t+p.h*(1-y.y[1]),width:p.w*(y.x[1]-y.x[0]),height:p.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"}),s.destroy()}},K.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var v=o.substr(5);return"1"===v&&(v=""),a+v}},K.updateFx=function(r){for(var o=r._fullLayout,v=o._subplots[u],p=0;p<v.length;p++){o[v[p]]._scene.updateFx(o.dragmode,o.hovermode)}}},71517:$=>{"use strict";$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}}},98327:($,K,e)=>{"use strict";var M=e(8416),I=e(38330),t=e(18836).extendFlat,T=e(71859).overrideAll;$.exports=T({visible:I.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:M.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:I.color,categoryorder:I.categoryorder,categoryarray:I.categoryarray,title:{text:I.title.text,font:I.title.font},type:t({},I.type,{values:["-","linear","log","date","category"]}),autotypenumbers:I.autotypenumbers,autorange:I.autorange,autorangeoptions:{minallowed:I.autorangeoptions.minallowed,maxallowed:I.autorangeoptions.maxallowed,clipmin:I.autorangeoptions.clipmin,clipmax:I.autorangeoptions.clipmax,include:I.autorangeoptions.include,editType:"plot"},rangemode:I.rangemode,minallowed:I.minallowed,maxallowed:I.maxallowed,range:t({},I.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:I.minor.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,mirror:I.mirror,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,labelalias:I.labelalias,tickfont:I.tickfont,tickangle:I.tickangle,tickprefix:I.tickprefix,showtickprefix:I.showtickprefix,ticksuffix:I.ticksuffix,showticksuffix:I.showticksuffix,showexponent:I.showexponent,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,tickformat:I.tickformat,tickformatstops:I.tickformatstops,hoverformat:I.hoverformat,showline:I.showline,linecolor:I.linecolor,linewidth:I.linewidth,showgrid:I.showgrid,gridcolor:t({},I.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:I.gridwidth,zeroline:I.zeroline,zerolinecolor:I.zerolinecolor,zerolinewidth:I.zerolinewidth,_deprecated:{title:I._deprecated.title,titlefont:I._deprecated.titlefont}},"plot","from-root")},33398:($,K,e)=>{"use strict";var M=e(80791).mix,I=e(5228),t=e(96906),T=e(98327),n=e(49312),i=e(67178),u=["xaxis","yaxis","zaxis"];$.exports=function(o,v,p){var f,l;function y(h,g){return I.coerce(f,l,T,h,g)}for(var s=0;s<u.length;s++){var x=u[s];f=o[x]||{},(l=t.newContainer(v,x))._id=x[0]+p.scene,l._name=x,n(f,l,y,p),i(f,l,y,{font:p.font,letter:x[0],data:p.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:p.bgColor,calendar:p.calendar},p.fullLayout),y("gridcolor",M(l.color,p.bgColor,72.72727272727273).toRgbString()),y("title.text",x[0]),l.setScale=I.noop,y("showspikes")&&(y("spikesides"),y("spikethickness"),y("spikecolor",l.color)),y("showaxeslabels"),y("showbackground")&&y("backgroundcolor")}}},29990:($,K,e)=>{"use strict";var M=e(31936),I=e(5228),t=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(u,a){for(var r=this,o=0;o<3;++o){var v=a[t[o]];v.visible?(r.labels[o]=u._meta?I.templateString(v.title.text,u._meta):v.title.text,"font"in v.title&&(v.title.font.color&&(r.labelColor[o]=M(v.title.font.color)),v.title.font.family&&(r.labelFont[o]=v.title.font.family),v.title.font.size&&(r.labelSize[o]=v.title.font.size)),"showline"in v&&(r.lineEnable[o]=v.showline),"linecolor"in v&&(r.lineColor[o]=M(v.linecolor)),"linewidth"in v&&(r.lineWidth[o]=v.linewidth),"showgrid"in v&&(r.gridEnable[o]=v.showgrid),"gridcolor"in v&&(r.gridColor[o]=M(v.gridcolor)),"gridwidth"in v&&(r.gridWidth[o]=v.gridwidth),"log"===v.type?r.zeroEnable[o]=!1:"zeroline"in v&&(r.zeroEnable[o]=v.zeroline),"zerolinecolor"in v&&(r.zeroLineColor[o]=M(v.zerolinecolor)),"zerolinewidth"in v&&(r.zeroLineWidth[o]=v.zerolinewidth),"ticks"in v&&v.ticks?r.lineTickEnable[o]=!0:r.lineTickEnable[o]=!1,"ticklen"in v&&(r.lineTickLength[o]=r._defaultLineTickLength[o]=v.ticklen),"tickcolor"in v&&(r.lineTickColor[o]=M(v.tickcolor)),"tickwidth"in v&&(r.lineTickWidth[o]=v.tickwidth),"tickangle"in v&&(r.tickAngle[o]="auto"===v.tickangle?-3600:Math.PI*-v.tickangle/180),"showticklabels"in v&&(r.tickEnable[o]=v.showticklabels),"tickfont"in v&&(v.tickfont.color&&(r.tickColor[o]=M(v.tickfont.color)),v.tickfont.family&&(r.tickFont[o]=v.tickfont.family),v.tickfont.size&&(r.tickSize[o]=v.tickfont.size)),"mirror"in v?-1!==["ticks","all","allticks"].indexOf(v.mirror)?(r.lineTickMirror[o]=!0,r.lineMirror[o]=!0):!0===v.mirror?(r.lineTickMirror[o]=!1,r.lineMirror[o]=!0):(r.lineTickMirror[o]=!1,r.lineMirror[o]=!1):r.lineMirror[o]=!1,"showbackground"in v&&!1!==v.showbackground?(r.backgroundEnable[o]=!0,r.backgroundColor[o]=M(v.backgroundcolor)):r.backgroundEnable[o]=!1):(r.tickEnable[o]=!1,r.labelEnable[o]=!1,r.lineEnable[o]=!1,r.lineTickEnable[o]=!1,r.gridEnable[o]=!1,r.zeroEnable[o]=!1,r.backgroundEnable[o]=!1)}},$.exports=function i(u,a){var r=new T;return r.merge(u,a),r}},12544:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(97799),T=e(11435),n=e(33398),i=e(30956),u=e(65644).NG,a="gl3d";function r(o,v,p,f){for(var l=p("bgcolor"),y=I.combine(l,f.paper_bgcolor),s=["up","center","eye"],x=0;x<s.length;x++)p("camera."+s[x]+".x"),p("camera."+s[x]+".y"),p("camera."+s[x]+".z");p("camera.projection.type");var h=!!p("aspectratio.x")&&!!p("aspectratio.y")&&!!p("aspectratio.z"),m=p("aspectmode",h?"manual":"auto");h||(o.aspectratio=v.aspectratio={x:1,y:1,z:1},"manual"===m&&(v.aspectmode="auto"),o.aspectmode=v.aspectmode);var d=u(f.fullData,a,f.id);n(o,v,{font:f.font,scene:f.id,data:d,bgColor:y,calendar:f.calendar,autotypenumbersDflt:f.autotypenumbersDflt,fullLayout:f.fullLayout}),t.getComponentMethod("annotations3d","handleDefaults")(o,v,f);var A=f.getDfltFromLayout("dragmode");if(!1!==A&&!A)if(A="orbit",o.camera&&o.camera.up){var b=o.camera.up.x,c=o.camera.up.y,S=o.camera.up.z;0!==S&&(!b||!c||!S||S/Math.sqrt(b*b+c*c+S*S)>.999)&&(A="turntable")}else A="turntable";p("dragmode",A),p("hovermode",f.getDfltFromLayout("hovermode"))}$.exports=function(v,p,f){var l=p._basePlotModules.length>1;T(v,p,f,{type:a,attributes:i,handleDefaults:r,fullLayout:p,font:p.font,fullData:f,getDfltFromLayout:function y(s){if(!l&&M.validate(v[s],i[s]))return v[s]},autotypenumbersDflt:p.autotypenumbers,paper_bgcolor:p.paper_bgcolor,calendar:p.calendar})}},30956:($,K,e)=>{"use strict";var M=e(98327),I=e(47472).Y,t=e(18836).extendFlat,T=e(5228).counterRegex;function n(i,u,a){return{x:{valType:"number",dflt:i,editType:"camera"},y:{valType:"number",dflt:u,editType:"camera"},z:{valType:"number",dflt:a,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:t(n(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:t(n(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:t(n(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:I({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}}},19314:($,K,e)=>{"use strict";var M=e(31936),I=["xaxis","yaxis","zaxis"];function t(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}t.prototype.merge=function(i){for(var u=0;u<3;++u){var a=i[I[u]];a.visible?(this.enabled[u]=a.showspikes,this.colors[u]=M(a.spikecolor),this.drawSides[u]=a.spikesides,this.lineWidth[u]=a.spikethickness):(this.enabled[u]=!1,this.drawSides[u]=!1)}},$.exports=function n(i){var u=new t;return u.merge(i),u}},76428:($,K,e)=>{"use strict";$.exports=function i(u){for(var a=u.axesOptions,r=u.glplot.axesPixels,o=u.fullSceneLayout,v=[[],[],[]],p=0;p<3;++p){var f=o[t[p]];if(f._length=(r[p].hi-r[p].lo)*r[p].pixelsPerDataUnit/u.dataScale[p],Math.abs(f._length)===1/0||isNaN(f._length))v[p]=[];else{f._input_range=f.range.slice(),f.range[0]=r[p].lo/u.dataScale[p],f.range[1]=r[p].hi/u.dataScale[p],f._m=1/(u.dataScale[p]*r[p].pixelsPerDataUnit),f.range[0]===f.range[1]&&(f.range[0]-=1,f.range[1]+=1);var l=f.tickmode;if("auto"===f.tickmode){f.tickmode="linear";var y=f.nticks||I.constrain(f._length/40,4,9);M.autoTicks(f,Math.abs(f.range[1]-f.range[0])/y)}for(var s=M.calcTicks(f,{msUTC:!0}),x=0;x<s.length;++x)s[x].x=s[x].x*u.dataScale[p],"date"===f.type&&(s[x].text=s[x].text.replace(/\<br\>/g," "));v[p]=s,f.tickmode=l}}a.ticks=v;for(p=0;p<3;++p){T[p]=.5*(u.glplot.bounds[0][p]+u.glplot.bounds[1][p]);for(x=0;x<2;++x)a.bounds[x][p]=u.glplot.bounds[x][p]}u.contourLevels=function n(u){for(var a=new Array(3),r=0;r<3;++r){for(var o=u[r],v=new Array(o.length),p=0;p<o.length;++p)v[p]=o[p].x;a[r]=v}return a}(v)};var M=e(91464),I=e(5228),t=["xaxis","yaxis","zaxis"],T=[0,0,0]},65220:$=>{"use strict";function K(M,I){var T,n,t=[0,0,0,0];for(T=0;T<4;++T)for(n=0;n<4;++n)t[n]+=M[4*T+n]*I[T];return t}$.exports=function e(M,I){return K(M.projection,K(M.view,K(M.model,[I[0],I[1],I[2],1])))}},12307:($,K,e)=>{"use strict";var h,g,M=e(17745).gl_plot3d,I=M.createCamera,t=M.createScene,T=e(28669),n=e(45519),i=e(97799),u=e(5228),a=u.preserveDrawingBuffer(),r=e(91464),o=e(76863),v=e(31936),p=e(54243),f=e(65220),l=e(29990),y=e(19314),s=e(76428),x=e(73332).applyAutorangeOptions,m=!1;function d(_,z){var D=document.createElement("div"),k=_.container;this.graphDiv=_.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",D.appendChild(O),this.svgContainer=O,D.id=_.id,D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",k.appendChild(D),this.fullLayout=z,this.id=_.id||"scene",this.fullSceneLayout=z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=l(z,z[this.id]),this.spikeOptions=y(z[this.id]),this.container=D,this.staticMode=!!_.staticPlot,this.pixelRatio=this.pixelRatio||_.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=i.getComponentMethod("annotations3d","convert"),this.drawAnnotations=i.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var A=d.prototype;A.prepareOptions=function(){var _=this,z={canvas:_.canvas,gl:_.gl,glOptions:{preserveDrawingBuffer:a,premultipliedAlpha:!0,antialias:!0},container:_.container,axes:_.axesOptions,spikes:_.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:_.camera,pixelRatio:_.pixelRatio};if(_.staticMode){if(!g&&(h=document.createElement("canvas"),!(g=T({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");z.gl=g,z.canvas=h}return z};var b=!0;A.tryCreatePlot=function(){var _=this,z=_.prepareOptions(),D=!0;try{_.glplot=t(z)}catch{if(_.staticMode||!b||a)D=!1;else{u.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{a=z.glOptions.preserveDrawingBuffer=!0,_.glplot=t(z)}catch{a=z.glOptions.preserveDrawingBuffer=!1,D=!1}}}return b=!1,D},A.initializeGLCamera=function(){var _=this,z=_.fullSceneLayout.camera,D="orthographic"===z.projection.type;_.camera=I(_.container,{center:[z.center.x,z.center.y,z.center.z],eye:[z.eye.x,z.eye.y,z.eye.z],up:[z.up.x,z.up.y,z.up.z],_ortho:D,zoomMin:.01,zoomMax:100,mode:"orbit"})},A.initializeGLPlot=function(){var _=this;if(_.initializeGLCamera(),!_.tryCreatePlot())return p(_);_.traces={},_.make4thDimension();var D=_.graphDiv,k=D.layout,O=function(){var H={};return _.isCameraChanged(k)&&(H[_.id+".camera"]=_.getCamera()),_.isAspectChanged(k)&&(H[_.id+".aspectratio"]=_.glplot.getAspectratio(),"manual"!==k[_.id].aspectmode&&(_.fullSceneLayout.aspectmode=k[_.id].aspectmode=H[_.id+".aspectmode"]="manual")),H},U=function(H){if(!1!==H.fullSceneLayout.dragmode){var j=O();H.saveLayout(k),H.graphDiv.emit("plotly_relayout",j)}};return _.glplot.canvas&&(_.glplot.canvas.addEventListener("mouseup",function(){U(_)}),_.glplot.canvas.addEventListener("touchstart",function(){m=!0}),_.glplot.canvas.addEventListener("wheel",function(H){if(D._context._scrollZoom.gl3d){if(_.camera._ortho){var j=H.deltaX>H.deltaY?1.1:.9090909090909091,ee=_.glplot.getAspectratio();_.glplot.setAspectratio({x:j*ee.x,y:j*ee.y,z:j*ee.z})}U(_)}},!!n&&{passive:!1}),_.glplot.canvas.addEventListener("mousemove",function(){if(!1!==_.fullSceneLayout.dragmode&&0!==_.camera.mouseListener.buttons){var H=O();_.graphDiv.emit("plotly_relayouting",H)}}),_.staticMode||_.glplot.canvas.addEventListener("webglcontextlost",function(H){D&&D.emit&&D.emit("plotly_webglcontextlost",{event:H,layer:_.id})},!1)),_.glplot.oncontextloss=function(){_.recoverContext()},_.glplot.onrender=function(){_.render()},!0},A.render=function(){var D,_=this,z=_.graphDiv,k=_.svgContainer,O=_.container.getBoundingClientRect();z._fullLayout._calcInverseTransform(z);var U=z._fullLayout._invScaleX,H=z._fullLayout._invScaleY,j=O.width*U,ee=O.height*H;k.setAttributeNS(null,"viewBox","0 0 "+j+" "+ee),k.setAttributeNS(null,"width",j),k.setAttributeNS(null,"height",ee),s(_),_.glplot.axes.update(_.axesOptions);for(var W=Object.keys(_.traces),B=null,te=_.glplot.selection,q=0;q<W.length;++q)"skip"!==(D=_.traces[W[q]]).data.hoverinfo&&D.handlePick(te)&&(B=D),D.setContourLevels&&D.setContourLevels();function oe(De,_e,Ce){var Le=_.fullSceneLayout[De+"axis"];return"log"!==Le.type&&(_e=Le.d2l(_e)),r.hoverLabelText(Le,_e,Ce)}if(null!==B){var ie=f(_.glplot.cameraParams,te.dataCoordinate);D=B.data;var V=z._fullData[D.index],Y=te.index,ae={xLabel:oe("x",te.traceCoordinate[0],D.xhoverformat),yLabel:oe("y",te.traceCoordinate[1],D.yhoverformat),zLabel:oe("z",te.traceCoordinate[2],D.zhoverformat)},X=o.castHoverinfo(V,_.fullLayout,Y),J=(X||"").split("+"),ue=X&&"all"===X;!V.hovertemplate&&!ue&&(-1===J.indexOf("x")&&(ae.xLabel=void 0),-1===J.indexOf("y")&&(ae.yLabel=void 0),-1===J.indexOf("z")&&(ae.zLabel=void 0),-1===J.indexOf("text")&&(te.textLabel=void 0),-1===J.indexOf("name")&&(B.name=void 0));var re,ne=[];"cone"===D.type||"streamtube"===D.type?(ae.uLabel=oe("x",te.traceCoordinate[3],D.uhoverformat),(ue||-1!==J.indexOf("u"))&&ne.push("u: "+ae.uLabel),ae.vLabel=oe("y",te.traceCoordinate[4],D.vhoverformat),(ue||-1!==J.indexOf("v"))&&ne.push("v: "+ae.vLabel),ae.wLabel=oe("z",te.traceCoordinate[5],D.whoverformat),(ue||-1!==J.indexOf("w"))&&ne.push("w: "+ae.wLabel),ae.normLabel=te.traceCoordinate[6].toPrecision(3),(ue||-1!==J.indexOf("norm"))&&ne.push("norm: "+ae.normLabel),"streamtube"===D.type&&(ae.divergenceLabel=te.traceCoordinate[7].toPrecision(3),(ue||-1!==J.indexOf("divergence"))&&ne.push("divergence: "+ae.divergenceLabel)),te.textLabel&&ne.push(te.textLabel),re=ne.join("<br>")):"isosurface"===D.type||"volume"===D.type?(ae.valueLabel=r.hoverLabelText(_._mockAxis,_._mockAxis.d2l(te.traceCoordinate[3]),D.valuehoverformat),ne.push("value: "+ae.valueLabel),te.textLabel&&ne.push(te.textLabel),re=ne.join("<br>")):re=te.textLabel;var se={x:te.traceCoordinate[0],y:te.traceCoordinate[1],z:te.traceCoordinate[2],data:V._input,fullData:V,curveNumber:V.index,pointNumber:Y};o.appendArrayPointValue(se,V,Y),D._module.eventData&&(se=V._module.eventData(se,te,V,{},Y));var de={points:[se]};if(_.fullSceneLayout.hovermode){var be=[];o.loneHover({trace:V,x:(.5+.5*ie[0]/ie[3])*j,y:(.5-.5*ie[1]/ie[3])*ee,xLabel:ae.xLabel,yLabel:ae.yLabel,zLabel:ae.zLabel,text:re,name:B.name,color:o.castHoverOption(V,Y,"bgcolor")||B.color,borderColor:o.castHoverOption(V,Y,"bordercolor"),fontFamily:o.castHoverOption(V,Y,"font.family"),fontSize:o.castHoverOption(V,Y,"font.size"),fontColor:o.castHoverOption(V,Y,"font.color"),nameLength:o.castHoverOption(V,Y,"namelength"),textAlign:o.castHoverOption(V,Y,"align"),hovertemplate:u.castOption(V,Y,"hovertemplate"),hovertemplateLabels:u.extendFlat({},se,ae),eventData:[se]},{container:k,gd:z,inOut_bbox:be}),se.bbox=be[0]}te.distance<5&&(te.buttons||m)?z.emit("plotly_click",de):z.emit("plotly_hover",de),this.oldEventData=de}else o.loneUnhover(k),this.oldEventData&&z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;_.drawAnnotations(_)},A.recoverContext=function(){var _=this;_.glplot.dispose();var z=function(){_.glplot.gl.isContextLost()?requestAnimationFrame(z):_.initializeGLPlot()?_.plot.apply(_,_.plotArgs):u.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(z)};var c=["xaxis","yaxis","zaxis"];function S(_,z,D){for(var k=_.fullSceneLayout,O=0;O<3;O++){var U=c[O],H=U.charAt(0),j=k[U],ee=z[H],W=z[H+"calendar"],B=z["_"+H+"length"];if(u.isArrayOrTypedArray(ee))for(var te,q=0;q<(B||ee.length);q++)if(u.isArrayOrTypedArray(ee[q]))for(var oe=0;oe<ee[q].length;++oe)te=j.d2l(ee[q][oe],0,W),!isNaN(te)&&isFinite(te)&&(D[0][O]=Math.min(D[0][O],te),D[1][O]=Math.max(D[1][O],te));else te=j.d2l(ee[q],0,W),!isNaN(te)&&isFinite(te)&&(D[0][O]=Math.min(D[0][O],te),D[1][O]=Math.max(D[1][O],te));else D[0][O]=Math.min(D[0][O],0),D[1][O]=Math.max(D[1][O],B-1)}}A.plot=function(_,z,D){var k=this;if(k.plotArgs=[_,z,D],!k.glplot.contextLost){var O,U,H,j,ee,W,B=z[k.id],te=D[k.id];k.fullLayout=z,k.fullSceneLayout=B,k.axesOptions.merge(z,B),k.spikeOptions.merge(B),k.setViewport(B),k.updateFx(B.dragmode,B.hovermode),k.camera.enableWheel=k.graphDiv._context._scrollZoom.gl3d,k.glplot.setClearColor(v(B.bgcolor)),k.setConvert(ee),_?Array.isArray(_)||(_=[_]):_=[];var q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(H=0;H<_.length;++H)!0===(O=_[H]).visible&&0!==O._length&&S(this,O,q);!function w(_,z){for(var D=_.fullSceneLayout,k=D.annotations||[],O=0;O<3;O++)for(var U=c[O],H=U.charAt(0),j=D[U],ee=0;ee<k.length;ee++){var W=k[ee];if(W.visible){var B=j.r2l(W[H]);!isNaN(B)&&isFinite(B)&&(z[0][O]=Math.min(z[0][O],B),z[1][O]=Math.max(z[1][O],B))}}}(this,q);var oe=[1,1,1];for(j=0;j<3;++j)q[1][j]===q[0][j]?oe[j]=1:oe[j]=1/(q[1][j]-q[0][j]);for(k.dataScale=oe,k.convertAnnotations(this),H=0;H<_.length;++H)!0===(O=_[H]).visible&&0!==O._length&&((U=k.traces[O.uid])?U.data.type===O.type?U.update(O):(U.dispose(),U=O._module.plot(this,O),k.traces[O.uid]=U):(U=O._module.plot(this,O),k.traces[O.uid]=U),U.name=O.name);var ie=Object.keys(k.traces);e:for(H=0;H<ie.length;++H){for(j=0;j<_.length;++j)if(_[j].uid===ie[H]&&!0===_[j].visible&&0!==_[j]._length)continue e;(U=k.traces[ie[H]]).dispose(),delete k.traces[ie[H]]}k.glplot.objects.sort(function(Be,Ne){return Be._trace.data.index-Ne._trace.data.index});var V=[[0,0,0],[0,0,0]],Y=[],ae={};for(H=0;H<3;++H){var X;if((W=(ee=B[c[H]]).type)in ae?(ae[W].acc*=oe[H],ae[W].count+=1):ae[W]={acc:oe[H],count:1},ee.autorange){V[0][H]=1/0,V[1][H]=-1/0;var J=k.glplot.objects,ue=k.fullSceneLayout.annotations||[],re=ee._name.charAt(0);for(j=0;j<J.length;j++){var ne=J[j],se=ne.bounds,de=ne._trace.data._pad||0;"ErrorBars"===ne.constructor.name&&ee._lowerLogErrorBound?V[0][H]=Math.min(V[0][H],ee._lowerLogErrorBound):V[0][H]=Math.min(V[0][H],se[0][H]/oe[H]-de),V[1][H]=Math.max(V[1][H],se[1][H]/oe[H]+de)}for(j=0;j<ue.length;j++){var be=ue[j];if(be.visible){var De=ee.r2l(be[re]);V[0][H]=Math.min(V[0][H],De),V[1][H]=Math.max(V[1][H],De)}}if("rangemode"in ee&&"tozero"===ee.rangemode&&(V[0][H]=Math.min(V[0][H],0),V[1][H]=Math.max(V[1][H],0)),V[0][H]>V[1][H])V[0][H]=-1,V[1][H]=1;else{var _e=V[1][H]-V[0][H];V[0][H]-=_e/32,V[1][H]+=_e/32}if(X=[V[0][H],V[1][H]],X=x(X,ee),V[0][H]=X[0],V[1][H]=X[1],ee.isReversed()){var Ce=V[0][H];V[0][H]=V[1][H],V[1][H]=Ce}}else X=ee.range,V[0][H]=ee.r2l(X[0]),V[1][H]=ee.r2l(X[1]);V[0][H]===V[1][H]&&(V[0][H]-=1,V[1][H]+=1),Y[H]=V[1][H]-V[0][H],ee.range=[V[0][H],V[1][H]],ee.limitRange(),k.glplot.setBounds(H,{min:ee.range[0]*oe[H],max:ee.range[1]*oe[H]})}var Le,Fe=B.aspectmode;if("cube"===Fe)Le=[1,1,1];else if("manual"===Fe){var ke=B.aspectratio;Le=[ke.x,ke.y,ke.z]}else{if("auto"!==Fe&&"data"!==Fe)throw new Error("scene.js aspectRatio was not one of the enumerated types");var ze=[1,1,1];for(H=0;H<3;++H){var Pe=ae[W=(ee=B[c[H]]).type];ze[H]=Math.pow(Pe.acc,1/Pe.count)/oe[H]}Le="data"===Fe||Math.max.apply(null,ze)/Math.min.apply(null,ze)<=4?ze:[1,1,1]}B.aspectratio.x=te.aspectratio.x=Le[0],B.aspectratio.y=te.aspectratio.y=Le[1],B.aspectratio.z=te.aspectratio.z=Le[2],k.glplot.setAspectratio(B.aspectratio),k.viewInitial.aspectratio||(k.viewInitial.aspectratio={x:B.aspectratio.x,y:B.aspectratio.y,z:B.aspectratio.z}),k.viewInitial.aspectmode||(k.viewInitial.aspectmode=B.aspectmode);var Ie=B.domain||null,Qe=z._size||null;if(Ie&&Qe){var at=k.container.style;at.position="absolute",at.left=Qe.l+Ie.x[0]*Qe.w+"px",at.top=Qe.t+(1-Ie.y[1])*Qe.h+"px",at.width=Qe.w*(Ie.x[1]-Ie.x[0])+"px",at.height=Qe.h*(Ie.y[1]-Ie.y[0])+"px"}k.glplot.redraw()}},A.destroy=function(){var _=this;_.glplot&&(_.camera.mouseListener.enabled=!1,_.container.removeEventListener("wheel",_.camera.wheelListener),_.camera=null,_.glplot.dispose(),_.container.parentNode.removeChild(_.container),_.glplot=null)},A.getCamera=function(){var _=this;return _.camera.view.recalcMatrix(_.camera.view.lastT()),function P(_){return{up:{x:_.up[0],y:_.up[1],z:_.up[2]},center:{x:_.center[0],y:_.center[1],z:_.center[2]},eye:{x:_.eye[0],y:_.eye[1],z:_.eye[2]},projection:{type:!0===_._ortho?"orthographic":"perspective"}}}(_.camera)},A.setViewport=function(_){var z=this,D=_.camera;z.camera.lookAt.apply(this,function E(_){return[[_.eye.x,_.eye.y,_.eye.z],[_.center.x,_.center.y,_.center.z],[_.up.x,_.up.y,_.up.z]]}(D)),z.glplot.setAspectratio(_.aspectratio),"orthographic"===D.projection.type!==z.camera._ortho&&(z.glplot.redraw(),z.glplot.clearRGBA(),z.glplot.dispose(),z.initializeGLPlot())},A.isCameraChanged=function(_){var D=this.getCamera(),O=u.nestedProperty(_,this.id+".camera").get();var W,B,te,q,oe,ie,H=!1;if(void 0===O)H=!0;else{for(var j=0;j<3;j++)for(var ee=0;ee<3;ee++)if(W=D,q=ee,oe=void 0,ie=void 0,ie=["x","y","z"],!(B=O)[(oe=["up","center","eye"])[te=j]]||W[oe[te]][ie[q]]!==B[oe[te]][ie[q]]){H=!0;break}(!O.projection||D.projection&&D.projection.type!==O.projection.type)&&(H=!0)}return H},A.isAspectChanged=function(_){var D=this.glplot.getAspectratio(),O=u.nestedProperty(_,this.id+".aspectratio").get();return void 0===O||O.x!==D.x||O.y!==D.y||O.z!==D.z},A.saveLayout=function(_){var k,O,U,H,j,ee,z=this,D=z.fullLayout,W=z.isCameraChanged(_),B=z.isAspectChanged(_),te=W||B;if(te){var q={};if(W&&(k=z.getCamera(),U=(O=u.nestedProperty(_,z.id+".camera")).get(),q[z.id+".camera"]=U),B&&(H=z.glplot.getAspectratio(),ee=(j=u.nestedProperty(_,z.id+".aspectratio")).get(),q[z.id+".aspectratio"]=ee),i.call("_storeDirectGUIEdit",_,D._preGUI,q),W)O.set(k),u.nestedProperty(D,z.id+".camera").set(k);if(B)j.set(H),u.nestedProperty(D,z.id+".aspectratio").set(H),z.glplot.redraw()}return te},A.updateFx=function(_,z){var D=this,k=D.camera;if(k)if("orbit"===_)k.mode="orbit",k.keyBindingMode="rotate";else if("turntable"===_){k.up=[0,0,1],k.mode="turntable",k.keyBindingMode="rotate";var O=D.graphDiv,U=O._fullLayout,H=D.fullSceneLayout.camera,j=H.up.x,ee=H.up.y,W=H.up.z;if(W/Math.sqrt(j*j+ee*ee+W*W)<.999){var B=D.id+".camera.up",te={x:0,y:0,z:1},q={};q[B]=te;var oe=O.layout;i.call("_storeDirectGUIEdit",oe,U._preGUI,q),H.up=te,u.nestedProperty(oe,B).set(te)}}else k.keyBindingMode=_;D.fullSceneLayout.hovermode=z},A.toImage=function(_){var z=this;_||(_="png"),z.staticMode&&z.container.appendChild(h),z.glplot.redraw();var D=z.glplot.gl,k=D.drawingBufferWidth,O=D.drawingBufferHeight;D.bindFramebuffer(D.FRAMEBUFFER,null);var U=new Uint8Array(k*O*4);D.readPixels(0,0,k,O,D.RGBA,D.UNSIGNED_BYTE,U),function R(_,z,D){for(var k=0,O=D-1;k<O;++k,--O)for(var U=0;U<z;++U)for(var H=0;H<4;++H){var j=4*(z*k+U)+H,ee=4*(z*O+U)+H,W=_[j];_[j]=_[ee],_[ee]=W}}(U,k,O),function F(_,z,D){for(var k=0;k<D;++k)for(var O=0;O<z;++O){var U=4*(z*k+O),H=_[U+3];if(H>0)for(var j=255/H,ee=0;ee<3;++ee)_[U+ee]=Math.min(j*_[U+ee],255)}}(U,k,O);var H=document.createElement("canvas");H.width=k,H.height=O;var W,j=H.getContext("2d",{willReadFrequently:!0}),ee=j.createImageData(k,O);switch(ee.data.set(U),j.putImageData(ee,0,0),_){case"jpeg":W=H.toDataURL("image/jpeg");break;case"webp":W=H.toDataURL("image/webp");break;default:W=H.toDataURL("image/png")}return z.staticMode&&z.container.removeChild(h),W},A.setConvert=function(){for(var z=0;z<3;z++){var D=this.fullSceneLayout[c[z]];r.setConvert(D,this.fullLayout),D.setScale=u.noop}},A.make4thDimension=function(){var _=this,D=_.graphDiv._fullLayout;_._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(_._mockAxis,D)},$.exports=d},9964:$=>{"use strict";$.exports=function(e,M,I,t){t=t||e.length;for(var T=new Array(t),n=0;n<t;n++)T[n]=[e[n],M[n],I[n]];return T}},11161:($,K,e)=>{"use strict";var M=e(47297),I=e(87889),t=e(36593),T=e(72386),n=e(20756),i=e(43012),u=e(18836).extendFlat,a=M({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=t.defaultLine,$.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:M({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:u(i({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether the title can automatically push the figure margins.","If `yref='paper'` then the margin will expand to ensure that the title doesn\u2019t","overlap with the edges of the container. If `yref='container'` then the margins","will ensure that the title doesn\u2019t overlap with the plot area, tick labels,","and axis titles. If `automargin=true` and the margins need to be expanded,","then y will be set to a default 1 and yanchor will be set to an appropriate","default to ensure that minimal margin space is needed. Note that when `yref='paper'`,","only 1 or 0 are allowed y values. Invalid values will be reset to the default 1."].join(" ")},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum width of the plot with margin.automargin applied (in px)"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum height of the plot with margin.automargin applied (in px)"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:t.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:t.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:t.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:T.newshape,activeshape:T.activeshape,newselection:n.newselection,activeselection:n.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:u({},I.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:M({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}}},97094:($,K,e)=>{"use strict";var M=e(65452),I="1.13.4",t='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',t].join(" "),n=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),u={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:t,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:n,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:n,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},a=M(u);$.exports={requiredVersion:I,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:u,styleValuesNonMapbox:a,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+I+"."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",a.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},34641:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){var n=t.split(" "),i=n[0],u=n[1],a=M.isArrayOrTypedArray(T)?M.mean(T):T,r=.5+a/100,o=1.5+a/100,v=["",""],p=[0,0];switch(i){case"top":v[0]="top",p[1]=-o;break;case"bottom":v[0]="bottom",p[1]=o}switch(u){case"left":v[1]="right",p[0]=-r;break;case"right":v[1]="left",p[0]=r}return{anchor:v[0]&&v[1]?v.join("-"):v[0]?v[0]:v[1]?v[1]:"center",offset:p}}},8382:($,K,e)=>{"use strict";var M=e(7960),I=e(5228),t=I.strTranslate,T=I.strScale,n=e(65644).AU,i=e(70415),u=e(21572),a=e(27630),r=e(88565),o=e(38413),v="mapbox",p=K.constants=e(97094);function l(y){return"string"==typeof y&&(-1!==p.styleValuesMapbox.indexOf(y)||0===y.indexOf("mapbox://")||0===y.indexOf("stamen"))}K.name=v,K.attr="subplot",K.idRoot=v,K.idRegex=K.attrRegex=I.counterRegex(v),K.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc",description:["Sets a reference between this trace's data coordinates and","a mapbox subplot.","If *mapbox* (the default value), the data refer to `layout.mapbox`.","If *mapbox2*, the data refer to `layout.mapbox2`, and so on."].join(" ")}},K.layoutAttributes=e(98617),K.supplyLayoutDefaults=e(27236),K.plot=function(s){var x=s._fullLayout,h=s.calcdata,g=x._subplots[v];if(M.version!==p.requiredVersion)throw new Error(p.wrongVersionErrorMsg);var m=function f(y,s){var x=y._fullLayout,h=y._context;if(""===h.mapboxAccessToken)return"";for(var g=[],m=[],d=!1,A=!1,b=0;b<s.length;b++){var c=x[s[b]],S=c.accesstoken;l(c.style)&&(S?I.pushUnique(g,S):(l(c._input.style)&&(I.error("Uses Mapbox map style, but did not set an access token."),d=!0),A=!0)),S&&I.pushUnique(m,S)}if(A){var w=d?p.noAccessTokenErrorMsg:p.missingStyleErrorMsg;throw I.error(w),new Error(w)}return g.length?(g.length>1&&I.warn(p.multipleTokensErrorMsg),g[0]):(m.length&&I.log(["Listed mapbox access token(s)",m.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(s,g);M.accessToken=m;for(var d=0;d<g.length;d++){var A=g[d],b=n(h,v,A),c=x[A],S=c._subplot;S||(S=new o(s,A),x[A]._subplot=S),S.viewInitial||(S.viewInitial={center:I.extendFlat({},c.center),zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),S.plot(b,x,s._promises)}},K.clean=function(y,s,x,h){for(var g=h._subplots[v]||[],m=0;m<g.length;m++){var d=g[m];!s[d]&&h[d]._subplot&&h[d]._subplot.destroy()}},K.toSVG=function(y){for(var s=y._fullLayout,x=s._subplots[v],h=s._size,g=0;g<x.length;g++){var m=s[x[g]],d=m.domain,b=m._subplot.toImage("png");s._glimages.append("svg:image").attr({xmlns:i.svg,"xlink:href":b,x:h.l+h.w*d.x[0],y:h.t+h.h*(1-d.y[1]),width:h.w*(d.x[1]-d.x[0]),height:h.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"});var S=u.select(m._subplot.div);if(!(null===S.select(".mapboxgl-ctrl-logo").node().offsetParent)){var E=s._glimages.append("g");E.attr("transform",t(h.l+h.w*d.x[0]+10,h.t+h.h*(1-d.y[0])-31)),E.append("path").attr("d",p.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),E.append("path").attr("d",p.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),E.append("path").attr("d",p.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),E.append("polygon").attr("points",p.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var P=S.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),R=s._glimages.append("g"),F=R.append("text");F.text(P).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":P});var _=a.bBox(F.node()),z=h.w*(d.x[1]-d.x[0]);if(_.width>z/2){var D=P.split("|").join("<br>");F.text(D).attr("data-unformatted",D).call(r.convertToTspans,y),_=a.bBox(F.node())}F.attr("transform",t(-3,8-_.height)),R.insert("rect",".static-attribution").attr({x:-_.width-6,y:-_.height-3,width:_.width+6,height:_.height+3,fill:"rgba(255, 255, 255, 0.75)"});var k=1;_.width+6>z&&(k=z/(_.width+6));var O=[h.l+h.w*d.x[1],h.t+h.h*(1-d.y[0])];R.attr("transform",t(O[0],O[1])+T(k))}},K.updateFx=function(y){for(var s=y._fullLayout,x=s._subplots[v],h=0;h<x.length;h++){s[x[h]]._subplot.updateFx(s)}}},49623:($,K,e)=>{"use strict";var M=e(5228),I=e(88565).sanitizeHTML,t=e(34641),T=e(97094);function n(o,v){this.subplot=o,this.uid=o.uid+"-"+v,this.index=v,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var i=n.prototype;function u(o){if(!o.visible)return!1;var v=o.source;if(Array.isArray(v)&&v.length>0){for(var p=0;p<v.length;p++)if("string"!=typeof v[p]||0===v[p].length)return!1;return!0}return M.isPlainObject(v)||"string"==typeof v&&v.length>0}function a(o){var v={},p={};switch(o.type){case"circle":M.extendFlat(p,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":M.extendFlat(p,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":M.extendFlat(p,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var f=o.symbol,l=t(f.textposition,f.iconsize);M.extendFlat(v,{"icon-image":f.icon+"-15","icon-size":f.iconsize/10,"text-field":f.text,"text-size":f.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":f.placement}),M.extendFlat(p,{"icon-color":o.color,"text-color":f.textfont.color,"text-opacity":o.opacity});break;case"raster":M.extendFlat(p,{"raster-fade-duration":0,"raster-opacity":o.opacity})}return{layout:v,paint:p}}i.update=function(v){this.visible?this.needsNewImage(v)?this.updateImage(v):this.needsNewSource(v)?(this.removeLayer(),this.updateSource(v),this.updateLayer(v)):this.needsNewLayer(v)?this.updateLayer(v):this.updateStyle(v):(this.updateSource(v),this.updateLayer(v)),this.visible=u(v)},i.needsNewImage=function(o){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===o.sourcetype&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},i.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},i.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},i.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},i.updateImage=function(o){this.subplot.map.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var p=this.findFollowingMapboxLayerId(this.lookupBelow());null!==p&&this.subplot.map.moveLayer(this.idLayer,p)},i.updateSource=function(o){var v=this.subplot.map;if(v.getSource(this.idSource)&&v.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,u(o)){var p=function r(o){var l,v=o.sourcetype,p=o.source,f={type:v};return"geojson"===v?l="data":"vector"===v?l="string"==typeof p?"url":"tiles":"raster"===v?(l="tiles",f.tileSize=256):"image"===v&&(l="url",f.coordinates=o.coordinates),f[l]=p,o.sourceattribution&&(f.attribution=I(o.sourceattribution)),f}(o);v.addSource(this.idSource,p)}},i.findFollowingMapboxLayerId=function(o){if("traces"===o)for(var v=this.subplot.getMapLayers(),p=0;p<v.length;p++){var f=v[p].id;if("string"==typeof f&&0===f.indexOf(T.traceLayerPrefix)){o=f;break}}return o},i.updateLayer=function(o){var v=this.subplot,p=a(o),f=this.lookupBelow(),l=this.findFollowingMapboxLayerId(f);this.removeLayer(),u(o)&&v.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:p.layout,paint:p.paint},l),this.layerType=o.type,this.below=f},i.updateStyle=function(o){if(u(o)){var v=a(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",v.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",v.paint)}},i.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},i.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)},$.exports=function(v,p,f){var l=new n(v,p);return l.update(f),l}},98617:($,K,e)=>{"use strict";var M=e(5228),I=e(8416).defaultLine,t=e(47472).Y,T=e(47297),n=e(55405).textposition,i=e(71859).overrideAll,u=e(96906).templatedArray,a=e(97094),r=T({description:["Sets the icon text font (color=mapbox.layer.paint.text-color, size=mapbox.layer.layout.text-size).","Has an effect only when `type` is set to *symbol*."].join(" ")});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=i({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:t({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0,description:["Sets the mapbox access token to be used for this mapbox map.","Alternatively, the mapbox access token can be set in the","configuration options under `mapboxAccessToken`.","Note that accessToken are only required when `style`","(e.g with values :",a.styleValuesMapbox.join(", "),")","and/or a layout layer references the Mapbox server."].join(" ")},style:{valType:"any",values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt,description:["Defines the map layers that are rendered by default below the trace layers defined in `data`,","which are themselves by default rendered below the layers defined in `layout.mapbox.layers`.","","These layers can be defined either explicitly as a Mapbox Style object which can contain multiple","layer definitions that load data from any public or private Tile Map Service (TMS or XYZ) or Web Map Service (WMS)","or implicitly by using one of the built-in style objects which use WMSes which do not require any","access tokens, or by using a default Mapbox style or custom Mapbox style URL, both of","which require a Mapbox access token","","Note that Mapbox access token can be set in the `accesstoken` attribute","or in the `mapboxAccessToken` config option.","","Mapbox Style objects are of the form described in the Mapbox GL JS documentation available at","https://docs.mapbox.com/mapbox-gl-js/style-spec","","The built-in plotly.js styles objects are:",a.styleValuesNonMapbox.join(", "),"","The built-in Mapbox styles are:",a.styleValuesMapbox.join(", "),"","Mapbox style URLs are of the form: mapbox://mapbox.mapbox-<name>-<version>"].join(" ")},center:{lon:{valType:"number",dflt:0,description:"Sets the longitude of the center of the map (in degrees East)."},lat:{valType:"number",dflt:0,description:"Sets the latitude of the center of the map (in degrees North)."}},zoom:{valType:"number",dflt:1,description:"Sets the zoom level of the map (mapbox.zoom)."},bearing:{valType:"number",dflt:0,description:"Sets the bearing angle of the map in degrees counter-clockwise from North (mapbox.bearing)."},pitch:{valType:"number",dflt:0,description:["Sets the pitch angle of the map","(in degrees, where *0* means perpendicular to the surface of the map) (mapbox.pitch)."].join(" ")},bounds:{west:{valType:"number",description:["Sets the minimum longitude of the map (in degrees East)","if `east`, `south` and `north` are declared."].join(" ")},east:{valType:"number",description:["Sets the maximum longitude of the map (in degrees East)","if `west`, `south` and `north` are declared."].join(" ")},south:{valType:"number",description:["Sets the minimum latitude of the map (in degrees North)","if `east`, `west` and `north` are declared."].join(" ")},north:{valType:"number",description:["Sets the maximum latitude of the map (in degrees North)","if `east`, `west` and `south` are declared."].join(" ")}},layers:u("layer",{visible:{valType:"boolean",dflt:!0,description:["Determines whether this layer is displayed"].join(" ")},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson",description:["Sets the source type for this layer,","that is the type of the layer data."].join(" ")},source:{valType:"any",description:["Sets the source data for this layer (mapbox.layer.source).","When `sourcetype` is set to *geojson*, `source` can be a URL to a GeoJSON","or a GeoJSON object.","When `sourcetype` is set to *vector* or *raster*, `source` can be a URL or","an array of tile URLs.","When `sourcetype` is set to *image*, `source` can be a URL to an image."].join(" ")},sourcelayer:{valType:"string",dflt:"",description:["Specifies the layer to use from a vector tile source (mapbox.layer.source-layer).","Required for *vector* source type that supports multiple layers."].join(" ")},sourceattribution:{valType:"string",description:["Sets the attribution for this source."].join(" ")},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle",description:["Sets the layer type,","that is the how the layer data set in `source` will be rendered","With `sourcetype` set to *geojson*, the following values are allowed:","*circle*, *line*, *fill* and *symbol*.","but note that *line* and *fill* are not compatible with Point","GeoJSON geometries.","With `sourcetype` set to *vector*, the following values are allowed:"," *circle*, *line*, *fill* and *symbol*.","With `sourcetype` set to *raster* or `*image*`, only the *raster* value is allowed."].join(" ")},coordinates:{valType:"any",description:["Sets the coordinates array contains [longitude, latitude] pairs","for the image corners listed in clockwise order:","top left, top right, bottom right, bottom left.","Only has an effect for *image* `sourcetype`."].join(" ")},below:{valType:"string",description:["Determines if the layer will be inserted","before the layer with the specified ID.","If omitted or set to '',","the layer will be inserted above every existing layer."].join(" ")},color:{valType:"color",dflt:I,description:["Sets the primary layer color.","If `type` is *circle*, color corresponds to the circle color (mapbox.layer.paint.circle-color)","If `type` is *line*, color corresponds to the line color (mapbox.layer.paint.line-color)","If `type` is *fill*, color corresponds to the fill color (mapbox.layer.paint.fill-color)","If `type` is *symbol*, color corresponds to the icon color (mapbox.layer.paint.icon-color)"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the layer.","If `type` is *circle*, opacity corresponds to the circle opacity (mapbox.layer.paint.circle-opacity)","If `type` is *line*, opacity corresponds to the line opacity (mapbox.layer.paint.line-opacity)","If `type` is *fill*, opacity corresponds to the fill opacity (mapbox.layer.paint.fill-opacity)","If `type` is *symbol*, opacity corresponds to the icon/text opacity (mapbox.layer.paint.text-opacity)"].join(" ")},minzoom:{valType:"number",min:0,max:24,dflt:0,description:["Sets the minimum zoom level (mapbox.layer.minzoom).","At zoom levels less than the minzoom, the layer will be hidden."].join(" ")},maxzoom:{valType:"number",min:0,max:24,dflt:24,description:["Sets the maximum zoom level (mapbox.layer.maxzoom).","At zoom levels equal to or greater than the maxzoom, the layer will be hidden."].join(" ")},circle:{radius:{valType:"number",dflt:15,description:["Sets the circle radius (mapbox.layer.paint.circle-radius).","Has an effect only when `type` is set to *circle*."].join(" ")}},line:{width:{valType:"number",dflt:2,description:["Sets the line width (mapbox.layer.paint.line-width).","Has an effect only when `type` is set to *line*."].join(" ")},dash:{valType:"data_array",description:["Sets the length of dashes and gaps (mapbox.layer.paint.line-dasharray).","Has an effect only when `type` is set to *line*."].join(" ")}},fill:{outlinecolor:{valType:"color",dflt:I,description:["Sets the fill outline color (mapbox.layer.paint.fill-outline-color).","Has an effect only when `type` is set to *fill*."].join(" ")}},symbol:{icon:{valType:"string",dflt:"marker",description:["Sets the symbol icon image (mapbox.layer.layout.icon-image).","Full list: https://www.mapbox.com/maki-icons/"].join(" ")},iconsize:{valType:"number",dflt:10,description:["Sets the symbol icon size (mapbox.layer.layout.icon-size).","Has an effect only when `type` is set to *symbol*."].join(" ")},text:{valType:"string",dflt:"",description:["Sets the symbol text (mapbox.layer.layout.text-field)."].join(" ")},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point",description:["Sets the symbol and/or text placement (mapbox.layer.layout.symbol-placement).","If `placement` is *point*, the label is placed where the geometry is located","If `placement` is *line*, the label is placed along the line of the geometry","If `placement` is *line-center*, the label is placed on the center of the geometry"].join(" ")},textfont:r,textposition:M.extendFlat({},n,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in the view:","`center`, `zoom`, `bearing`, `pitch`. Defaults to `layout.uirevision`."].join(" ")}},27236:($,K,e)=>{"use strict";var M=e(5228),I=e(11435),t=e(84322),T=e(98617);function n(u,a,r,o){r("accesstoken",o.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var v=r("bounds.west"),p=r("bounds.east"),f=r("bounds.south"),l=r("bounds.north");(void 0===v||void 0===p||void 0===f||void 0===l)&&delete a.bounds,t(u,a,{name:"layers",handleItemDefaults:i}),a._input=u}function i(u,a){function r(y,s){return M.coerce(u,a,T.layers,y,s)}if(r("visible")){var f,v=r("sourcetype"),p="raster"===v||"image"===v;r("source"),r("sourceattribution"),"vector"===v&&r("sourcelayer"),"image"===v&&r("coordinates"),p&&(f="raster");var l=r("type",f);p&&"raster"!==l&&(l=a.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),"circle"===l&&r("circle.radius"),"line"===l&&(r("line.width"),r("line.dash")),"fill"===l&&r("fill.outlinecolor"),"symbol"===l&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),M.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}$.exports=function(a,r,o){I(a,r,o,{type:"mapbox",attributes:T,handleDefaults:n,partition:"y",accessToken:r._mapboxAccessToken})}},38413:($,K,e)=>{"use strict";var M=e(7960),I=e(5228),t=e(14369),T=e(97799),n=e(91464),i=e(25429),u=e(76863),a=e(85996),r=a.drawMode,o=a.selectMode,v=e(48356).prepSelect,p=e(48356).clearOutline,f=e(48356).clearSelectionsCache,l=e(48356).selectOnClick,y=e(97094),s=e(49623);function x(b,c){this.id=c,this.gd=b;var S=b._fullLayout,w=b._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var h=x.prototype;h.plot=function(b,c,S){var P,w=this,E=c[w.id];w.map&&E.accesstoken!==w.accessToken&&(w.map.remove(),w.map=null,w.styleObj=null,w.traceHash={},w.layerList=[]),P=w.map?new Promise(function(R,F){w.updateMap(b,c,R,F)}):new Promise(function(R,F){w.createMap(b,c,R,F)}),S.push(P)},h.createMap=function(b,c,S,w){var E=this,P=c[E.id],R=E.styleObj=m(P.style,c);E.accessToken=P.accesstoken;var F=P.bounds,_=F?[[F.west,F.south],[F.east,F.north]]:null,z=E.map=new M.Map({container:E.div,style:R.style,center:A(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:_,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));z._canvas.style.left="0px",z._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(b,c);var D=[];D.push(new Promise(function(k){z.once("load",k)})),D=D.concat(t.fetchTraceGeoData(b)),Promise.all(D).then(function(){E.fillBelowLookup(b,c),E.updateData(b),E.updateLayout(c),E.resolveOnRender(S)}).catch(w)},h.updateMap=function(b,c,S,w){var E=this,P=E.map,R=c[this.id];E.rejectOnError(w);var F=[],_=m(R.style,c);JSON.stringify(E.styleObj)!==JSON.stringify(_)&&(E.styleObj=_,P.setStyle(_.style),E.traceHash={},F.push(new Promise(function(z){P.once("styledata",z)}))),F=F.concat(t.fetchTraceGeoData(b)),Promise.all(F).then(function(){E.fillBelowLookup(b,c),E.updateData(b),E.updateLayout(c),E.resolveOnRender(S)}).catch(w)},h.fillBelowLookup=function(b,c){var E,P,w=c[this.id].layers,R=this.belowLookup={},F=!1;for(E=0;E<b.length;E++){var _=b[E][0].trace,z=_._module;"string"==typeof _.below?P=_.below:z.getBelow&&(P=z.getBelow(_,this)),""===P&&(F=!0),R["trace-"+_.uid]=P||""}for(E=0;E<w.length;E++){var D=w[E];P="string"==typeof D.below?D.below:F?"traces":"",R["layout-"+E]=P}var O,U,k={};for(O in R)k[P=R[O]]?k[P].push(O):k[P]=[O];for(P in k){var H=k[P];if(H.length>1)for(E=0;E<H.length;E++)0===(O=H[E]).indexOf("trace-")?(U=O.split("trace-")[1],this.traceHash[U]&&(this.traceHash[U].below=null)):0===O.indexOf("layout-")&&(U=O.split("layout-")[1],this.layerList[U]&&(this.layerList[U].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function m(b,c){var S={};if(I.isPlainObject(b))S.id=b.id,S.style=b;else if("string"==typeof b)if(S.id=b,-1!==y.styleValuesMapbox.indexOf(b))S.style=d(b);else if(y.stylesNonMapbox[b]){S.style=y.stylesNonMapbox[b];var w=S.style.sources["plotly-"+b],E=w?w.tiles:void 0;E&&E[0]&&"?api_key="===E[0].slice(-9)&&(E[0]+=c._mapboxAccessToken)}else S.style=b;else S.id=y.styleValueDflt,S.style=d(y.styleValueDflt);return S.transition={duration:0,delay:0},S}function d(b){return y.styleUrlPrefix+b+"-"+y.styleUrlSuffix}function A(b){return[b.lon,b.lat]}h.updateData=function(b){var S,w,E,P,c=this.traceHash,R=b.slice().sort(function(k,O){return g[k[0].trace.type]-g[O[0].trace.type]});for(E=0;E<R.length;E++){var F=R[E],_=!1;(S=c[(w=F[0].trace).uid])&&(S.type===w.type?(S.update(F),_=!0):S.dispose()),!_&&w._module&&(c[w.uid]=w._module.plot(this,F))}var z=Object.keys(c);e:for(E=0;E<z.length;E++){var D=z[E];for(P=0;P<b.length;P++)if(D===(w=b[P][0].trace).uid)continue e;(S=c[D]).dispose(),delete c[D]}},h.updateLayout=function(b){var c=this.map,S=b[this.id];!this.dragging&&!this.wheeling&&(c.setCenter(A(S.center)),c.setZoom(S.zoom),c.setBearing(S.bearing),c.setPitch(S.pitch)),this.updateLayers(b),this.updateFramework(b),this.updateFx(b),this.map.resize(),this.gd._context._scrollZoom.mapbox?c.scrollZoom.enable():c.scrollZoom.disable()},h.resolveOnRender=function(b){var c=this.map;c.on("render",function S(){c.loaded()&&(c.off("render",S),setTimeout(b,10))})},h.rejectOnError=function(b){var c=this.map;function S(){b(new Error(y.mapOnErrorMsg))}c.once("error",S),c.once("style.error",S),c.once("source.error",S),c.once("tile.error",S),c.once("layer.error",S)},h.createFramework=function(b){var c=this,S=c.div=document.createElement("div");S.id=c.uid,S.style.position="absolute",c.container.appendChild(S),c.xaxis={_id:"x",c2p:function(w){return c.project(w).x}},c.yaxis={_id:"y",c2p:function(w){return c.project(w).y}},c.updateFramework(b),c.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(c.mockAxis,b)},h.initFx=function(b,c){var S=this,w=S.gd,E=S.map;function P(){u.loneUnhover(c._hoverlayer)}function R(){var F=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(F))}E.on("moveend",function(F){if(S.map){var _=w._fullLayout;if(F.originalEvent||S.wheeling){var z=_[S.id];T.call("_storeDirectGUIEdit",w.layout,_._preGUI,S.getViewEdits(z));var D=S.getView();z._input.center=z.center=D.center,z._input.zoom=z.zoom=D.zoom,z._input.bearing=z.bearing=D.bearing,z._input.pitch=z.pitch=D.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(D))}F.originalEvent&&"mouseup"===F.originalEvent.type?S.dragging=!1:S.wheeling&&(S.wheeling=!1),_._rehover&&_._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(F){var _=S.div.getBoundingClientRect(),z=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return _},S.xaxis.p2c=function(){return E.unproject(z).lng},S.yaxis.p2c=function(){return E.unproject(z).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&u.hover(w,F,S.id)},u.hover(w,F,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,P()}),E.on("zoomstart",P),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",R),E.on("zoom",R),E.on("dblclick",function(){var F=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(F));var _=S.viewInitial;E.setCenter(A(_.center)),E.setZoom(_.zoom),E.setBearing(_.bearing),E.setPitch(_.pitch);var z=S.getView();F._input.center=F.center=z.center,F._input.zoom=F.zoom=z.zoom,F._input.bearing=F.bearing=z.bearing,F._input.pitch=F.pitch=z.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(z))}),S.clearOutline=function(){f(S.dragOptions),p(S.dragOptions.gd)},S.onClickInPanFn=function(F){return function(_){var z=w._fullLayout.clickmode;z.indexOf("select")>-1&&l(_.originalEvent,w,[S.xaxis],[S.yaxis],S.id,F),z.indexOf("event")>-1&&u.click(w,_.originalEvent)}}},h.updateFx=function(b){var c=this,S=c.map,w=c.gd;if(!c.isStatic){var R,P=b.dragmode;R=function(_,z){z.isRect?(_.range={})[c.id]=[E([z.xmin,z.ymin]),E([z.xmax,z.ymax])]:(_.lassoPoints={})[c.id]=z.map(E)};var F=c.dragOptions;c.dragOptions=I.extendDeep(F||{},{dragmode:b.dragmode,element:c.div,gd:w,plotinfo:{id:c.id,domain:b[c.id].domain,xaxis:c.xaxis,yaxis:c.yaxis,fillRangeItems:R},xaxes:[c.xaxis],yaxes:[c.yaxis],subplot:c.id}),S.off("click",c.onClickInPanHandler),o(P)||r(P)?(S.dragPan.disable(),S.on("zoomstart",c.clearOutline),c.dragOptions.prepFn=function(_,z,D){v(_,z,D,c.dragOptions,P)},i.init(c.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",c.clearOutline),c.div.onmousedown=null,c.div.ontouchstart=null,c.div.removeEventListener("touchstart",c.div._ontouchstart),c.onClickInPanHandler=c.onClickInPanFn(c.dragOptions),S.on("click",c.onClickInPanHandler))}function E(_){var z=c.map.unproject(_);return[z.lng,z.lat]}},h.updateFramework=function(b){var c=b[this.id].domain,S=b._size,w=this.div.style;w.width=S.w*(c.x[1]-c.x[0])+"px",w.height=S.h*(c.y[1]-c.y[0])+"px",w.left=S.l+c.x[0]*S.w+"px",w.top=S.t+(1-c.y[1])*S.h+"px",this.xaxis._offset=S.l+c.x[0]*S.w,this.xaxis._length=S.w*(c.x[1]-c.x[0]),this.yaxis._offset=S.t+(1-c.y[1])*S.h,this.yaxis._length=S.h*(c.y[1]-c.y[0])},h.updateLayers=function(b){var E,S=b[this.id].layers,w=this.layerList;if(S.length!==w.length){for(E=0;E<w.length;E++)w[E].dispose();for(w=this.layerList=[],E=0;E<S.length;E++)w.push(s(this,E,S[E]))}else for(E=0;E<S.length;E++)w[E].update(S[E])},h.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},h.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},h.setOptions=function(b,c,S){for(var w in S)this.map[c](b,w,S[w])},h.getMapLayers=function(){return this.map.getStyle().layers},h.addLayer=function(b,c){var S=this.map;if("string"==typeof c){if(""===c)return void S.addLayer(b,c);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(c===w[E].id)return void S.addLayer(b,c);I.warn(["Trying to add layer with *below* value",c,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(b)},h.project=function(b){return this.map.project(new M.LngLat(b[0],b[1]))},h.getView=function(){var b=this.map,c=b.getCenter(),E={lon:c.lng,lat:c.lat},P=b.getCanvas(),R=parseInt(P.style.width),F=parseInt(P.style.height);return{center:E,zoom:b.getZoom(),bearing:b.getBearing(),pitch:b.getPitch(),_derived:{coordinates:[b.unproject([0,0]).toArray(),b.unproject([R,0]).toArray(),b.unproject([R,F]).toArray(),b.unproject([0,F]).toArray()]}}},h.getViewEdits=function(b){for(var c=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var P=S[E];w[c+"."+P]=b[P]}return w},h.getViewEditsWithDerived=function(b){var c=this.id,S=this.getViewEdits(b);return S[c+"._derived"]=b._derived,S},$.exports=x},43012:$=>{"use strict";$.exports=function(K){var e=K.editType;return{t:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:e,description:"The amount of padding (in px) on the left side of the component."},editType:e}}},31556:($,K,e)=>{"use strict";var M=e(21572),I=e(85400).Dq,t=e(24137).FF,T=e(7347),n=e(47104),i=e(97799),u=e(55773),a=e(96906),r=e(5228),o=e(8416),v=e(71103).BADNUM,p=e(78168),f=e(27355).clearOutline,l=e(84814),y=e(87889),s=e(27150),x=e(65644).a0,h=r.relinkPrivateKeys,g=r._,m=$.exports={};r.extendFlat(m,i),m.attributes=e(82684),m.attributes.type.values=m.allTypes,m.fontAttrs=e(47297),m.layoutAttributes=e(11161),m.fontWeight="normal";var d=m.transformsRegistry,A=e(80272);m.executeAPICommand=A.executeAPICommand,m.computeAPICommandBindings=A.computeAPICommandBindings,m.manageCommandObserver=A.manageCommandObserver,m.hasSimpleAPICommandBindings=A.hasSimpleAPICommandBindings,m.redrawText=function(V){return V=r.getGraphDiv(V),new Promise(function(Y){setTimeout(function(){V._fullLayout&&(i.getComponentMethod("annotations","draw")(V),i.getComponentMethod("legend","draw")(V),i.getComponentMethod("colorbar","draw")(V),Y(m.previousPromises(V)))},300)})},m.resize=function(V){V=r.getGraphDiv(V);var Y,ae=new Promise(function(X,J){(!V||r.isHidden(V))&&J(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(Y=V._resolveResize),V._resolveResize=X,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||r.isHidden(V))X(V);else{delete V.layout.width,delete V.layout.height;var ue=V.changed;V.autoplay=!0,i.call("relayout",V,{autosize:!0}).then(function(){V.changed=ue,V._resolveResize===X&&(delete V._resolveResize,X(V))})}},100)});return Y&&Y(ae),ae},m.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},m.addLinks=function(V){if(V._context.showLink||V._context.showSources){var Y=V._fullLayout,ae=r.ensureSingle(Y._paper,"text","js-plot-link-container",function(se){se.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var de=M.select(this);de.append("tspan").classed("js-link-to-tool",!0),de.append("tspan").classed("js-link-spacer",!0),de.append("tspan").classed("js-sourcelinks",!0)})}),X=ae.node(),J={y:Y._paper.attr("height")-9};document.body.contains(X)&&X.getComputedTextLength()>=Y.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=Y._paper.attr("width")-7),ae.attr(J);var ue=ae.select(".js-link-to-tool"),re=ae.select(".js-link-spacer"),ne=ae.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&function b(V,Y){Y.text("");var ae=Y.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" "+String.fromCharCode(187));if(V._context.sendData)ae.on("click",function(){m.sendDataToCloud(V)});else{var X=window.location.pathname.split("/"),J=window.location.search;ae.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+X[2].split(".")[0]+"/"+X[1]+J})}}(V,ue),re.text(ue.text()&&ne.text()?" - ":"")}},m.sendDataToCloud=function(V){var Y=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(Y){V.emit("plotly_beforeexport");var ae=M.select(V).append("div").attr("id","hiddenform").style("display","none"),X=ae.append("form").attr({action:Y+"/external",method:"post",target:"_blank"});return X.append("input").attr({type:"text",name:"data"}).node().value=m.graphJson(V,!1,"keepdata"),X.node().submit(),ae.remove(),V.emit("plotly_afterexport"),!1}};var c=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],S=["year","month","dayMonth","dayMonthYear"];function P(V,Y){var ae=V._context.locale;ae||(ae="en-US");var X=!1,J={};function ue(De){for(var _e=!0,Ce=0;Ce<Y.length;Ce++){var Le=Y[Ce];J[Le]||(De[Le]?J[Le]=De[Le]:_e=!1)}_e&&(X=!0)}for(var re=0;re<2;re++){for(var ne=V._context.locales,se=0;se<2;se++){var de=(ne[ae]||{}).format;if(de&&(ue(de),X))break;ne=i.localeRegistry}var be=ae.split("-")[0];if(X||be===ae)break;ae=be}return X||ue(i.localeRegistry.en.format),J}function _(V,Y){var ae={_fullLayout:Y},X="x"===V._id.charAt(0),J=V._mainAxis._anchorAxis,ue="",re="",ne="";if(J&&(ne=J._mainAxis._id,ue=X?V._id+ne:ne+V._id),!ue||!Y._plots[ue]){ue="";for(var se=V._counterAxes,de=0;de<se.length;de++){var be=se[de],De=X?V._id+be:be+V._id;re||(re=De);var _e=p.getFromId(ae,be);if(ne&&_e.overlaying===ne){ue=De;break}}}return ue||re}function z(V){var Y=V.transforms;if(Array.isArray(Y)&&Y.length)for(var ae=0;ae<Y.length;ae++){var X=Y[ae],J=X._module||d[X.type];if(J&&J.makesData)return!0}return!1}function D(V,Y,ae,X){for(var J=V.transforms,ue=[V],re=0;re<J.length;re++){var ne=J[re],se=d[ne.type];se&&se.transform&&(ue=se.transform(ue,{transform:ne,fullTrace:V,fullData:Y,layout:ae,fullLayout:X,transformIndex:re}))}return ue}function k(V){return"string"==typeof V&&"px"===V.substr(V.length-2)&&parseFloat(V)}function O(V){var Y=V.margin;if(!V._size){var ae=V._size={l:Math.round(Y.l),r:Math.round(Y.r),t:Math.round(Y.t),b:Math.round(Y.b),p:Math.round(Y.pad)};ae.w=Math.round(V.width)-ae.l-ae.r,ae.h=Math.round(V.height)-ae.t-ae.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={}),V._reservedMargin||(V._reservedMargin={})}m.supplyDefaults=function(V,Y){var ae=Y&&Y.skipUpdateCalc,X=V._fullLayout||{};if(X._skipDefaults)delete X._skipDefaults;else{var De,J=V._fullLayout={},ue=V.layout||{},re=V._fullData||[],ne=V._fullData=[],se=V.data||[],de=V.calcdata||[],be=V._context||{};V._transitionData||m.createTransitionData(V),J._dfltTitle={plot:g(V,"Click to enter Plot title"),x:g(V,"Click to enter X axis title"),y:g(V,"Click to enter Y axis title"),colorbar:g(V,"Click to enter Colorscale title"),annotation:g(V,"new text")},J._traceWord=g(V,"trace");var _e=P(V,c);if(J._mapboxAccessToken=be.mapboxAccessToken,X._initialAutoSizeIsDone){var Ce=X.width,Le=X.height;m.supplyLayoutGlobalDefaults(ue,J,_e),ue.width||(J.width=Ce),ue.height||(J.height=Le),m.sanitizeMargins(J)}else{m.supplyLayoutGlobalDefaults(ue,J,_e);var Fe=!ue.width||!ue.height,ke=J.autosize,ze=be.autosizable;Fe&&(ke||ze)?m.plotAutoSize(V,ue,J):Fe&&m.sanitizeMargins(J),!ke&&Fe&&(ue.width=J.width,ue.height=J.height)}J._d3locale=function R(V,Y){return V.decimal=Y.charAt(0),V.thousands=Y.charAt(1),{numberFormat:function(ae){try{ae=t(V).format(r.adjustFormat(ae))}catch{return r.warnBadFormat(ae),r.noFormat}return ae},timeFormat:I(V).utcFormat}}(_e,J.separators),J._extraFormat=P(V,S),J._initialAutoSizeIsDone=!0,J._dataLength=se.length,J._modules=[],J._visibleModules=[],J._basePlotModules=[];var Ie=J._subplots=function E(){var ae,X,V=i.collectableSubplotTypes,Y={};if(!V){V=[];var J=i.subplotsRegistry;for(var ue in J){var ne=J[ue].attr;if(ne&&(V.push(ue),Array.isArray(ne)))for(X=0;X<ne.length;X++)r.pushUnique(V,ne[X])}}for(ae=0;ae<V.length;ae++)Y[V[ae]]=[];return Y}(),Qe=J._splomAxes={x:{},y:{}},at=J._splomSubplots={};J._splomGridDflt={},J._scatterStackOpts={},J._firstScatter={},J._alignmentOpts={},J._colorAxes={},J._requestRangeslider={},J._traceUids=function w(V,Y){var J,ue,ae=Y.length,X=[];for(J=0;J<V.length;J++){var re=V[J]._fullInput;re!==ue&&X.push(re),ue=re}var ne=X.length,se=new Array(ae),de={};function be(Ce,Le){se[Le]=Ce,de[Ce]=1}function De(Ce,Le){if(Ce&&"string"==typeof Ce&&!de[Ce])return be(Ce,Le),!0}for(J=0;J<ae;J++){var _e=Y[J].uid;"number"==typeof _e&&(_e=String(_e)),!De(_e,J)&&(J<ne&&De(X[J].uid,J)||be(r.randstr(de),J))}return se}(re,se),J._globalTransforms=(V._context||{}).globalTransforms,m.supplyDataDefaults(se,ne,ue,J);var Be=Object.keys(Qe.x),Ne=Object.keys(Qe.y);if(Be.length>1&&Ne.length>1){for(i.getComponentMethod("grid","sizeDefaults")(ue,J),De=0;De<Be.length;De++)r.pushUnique(Ie.xaxis,Be[De]);for(De=0;De<Ne.length;De++)r.pushUnique(Ie.yaxis,Ne[De]);for(var nt in at)r.pushUnique(Ie.cartesian,nt)}if(J._has=m._hasPlotType.bind(J),re.length===ne.length)for(De=0;De<ne.length;De++)h(ne[De],re[De]);m.supplyLayoutModuleDefaults(ue,J,ne,V._transitionData);var ct=J._visibleModules,mt=[];for(De=0;De<ct.length;De++){var Bt=ct[De].crossTraceDefaults;Bt&&r.pushUnique(mt,Bt)}for(De=0;De<mt.length;De++)mt[De](ne,J);J._hasOnlyLargeSploms=1===J._basePlotModules.length&&"splom"===J._basePlotModules[0].name&&Be.length>15&&Ne.length>15&&0===J.shapes.length&&0===J.images.length,m.linkSubplots(ne,J,re,X),m.cleanPlot(ne,J,re,X);var Rt=!(!X._has||!X._has("gl2d")),zt=!(!J._has||!J._has("gl2d")),Mt=!(!X._has||!X._has("cartesian"))||Rt,st=!(!J._has||!J._has("cartesian"))||zt;Mt&&!st?X._bgLayer.remove():st&&!Mt&&(J._shouldCreateBgLayer=!0),X._zoomlayer&&!V._dragging&&f({_fullLayout:X}),function F(V,Y){var ae,X=[];Y.meta&&(ae=Y._meta={meta:Y.meta,layout:{meta:Y.meta}});for(var J=0;J<V.length;J++){var ue=V[J];ue.meta?X[ue.index]=ue._meta={meta:ue.meta}:Y.meta&&(ue._meta={meta:Y.meta}),Y.meta&&(ue._meta.layout={meta:Y.meta})}X.length&&(ae||(ae=Y._meta={}),ae.data=X)}(ne,J),h(J,X),i.getComponentMethod("colorscale","crossTraceDefaults")(ne,J),J._preGUI||(J._preGUI={}),J._tracePreGUI||(J._tracePreGUI={});var ge,Se=J._tracePreGUI,pe={};for(ge in Se)pe[ge]="old";for(De=0;De<ne.length;De++)pe[ge=ne[De]._fullInput.uid]||(Se[ge]={}),pe[ge]="new";for(ge in pe)"old"===pe[ge]&&delete Se[ge];O(J),i.getComponentMethod("rangeslider","makeData")(J),!ae&&de.length===ne.length&&m.supplyDefaultsUpdateCalc(de,ne)}},m.supplyDefaultsUpdateCalc=function(V,Y){for(var ae=0;ae<Y.length;ae++){var X=Y[ae],J=(V[ae]||[])[0];if(J&&J.trace){var ue=J.trace;if(ue._hasCalcTransform){var ne,se,de,re=ue._arrayAttrs;for(ne=0;ne<re.length;ne++)se=re[ne],de=r.nestedProperty(ue,se).get().slice(),r.nestedProperty(X,se).set(de)}J.trace=X}}},m.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},m._hasPlotType=function(V){var Y,ae=this._basePlotModules||[];for(Y=0;Y<ae.length;Y++)if(ae[Y].name===V)return!0;var X=this._modules||[];for(Y=0;Y<X.length;Y++){var J=X[Y].name;if(J===V)return!0;var ue=i.modules[J];if(ue&&ue.categories[V])return!0}return!1},m.cleanPlot=function(V,Y,ae,X){var J,ue,re=X._basePlotModules||[];for(J=0;J<re.length;J++){var ne=re[J];ne.clean&&ne.clean(V,Y,ae,X)}var se=X._has&&X._has("gl"),de=Y._has&&Y._has("gl");se&&!de&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);var be=!!X._infolayer;e:for(J=0;J<ae.length;J++){var _e=ae[J].uid;for(ue=0;ue<V.length;ue++){if(_e===V[ue].uid)continue e}be&&X._infolayer.select(".cb"+_e).remove()}},m.linkSubplots=function(V,Y,ae,X){var J,ue,re=X._plots||{},ne=Y._plots={},se=Y._subplots,de={_fullData:V,_fullLayout:Y},be=se.cartesian.concat(se.gl2d||[]);for(J=0;J<be.length;J++){var Fe,De=be[J],_e=re[De],Ce=p.getFromId(de,De,"x"),Le=p.getFromId(de,De,"y");for(_e?Fe=ne[De]=_e:(Fe=ne[De]={}).id=De,Ce._counterAxes.push(Le._id),Le._counterAxes.push(Ce._id),Ce._subplotsWith.push(De),Le._subplotsWith.push(De),Fe.xaxis=Ce,Fe.yaxis=Le,Fe._hasClipOnAxisFalse=!1,ue=0;ue<V.length;ue++){var ke=V[ue];if(ke.xaxis===Fe.xaxis._id&&ke.yaxis===Fe.yaxis._id&&!1===ke.cliponaxis){Fe._hasClipOnAxisFalse=!0;break}}}var Pe,ze=p.list(de,null,!0);for(J=0;J<ze.length;J++){var Ie=null;(Pe=ze[J]).overlaying&&((Ie=p.getFromId(de,Pe.overlaying))&&Ie.overlaying&&(Pe.overlaying=!1,Ie=null)),Pe._mainAxis=Ie||Pe,Ie&&(Pe.domain=Ie.domain.slice()),Pe._anchorAxis="free"===Pe.anchor?null:p.getFromId(de,Pe.anchor)}for(J=0;J<ze.length;J++)if((Pe=ze[J])._counterAxes.sort(p.idSort),Pe._subplotsWith.sort(r.subplotSort),Pe._mainSubplot=_(Pe,Y),Pe._counterAxes.length&&(Pe.spikemode&&-1!==Pe.spikemode.indexOf("across")||Pe.automargin&&Pe.mirror&&"free"!==Pe.anchor||i.getComponentMethod("rangeslider","isVisible")(Pe))){var Qe=1,at=0;for(ue=0;ue<Pe._counterAxes.length;ue++){var Be=p.getFromId(de,Pe._counterAxes[ue]);Qe=Math.min(Qe,Be.domain[0]),at=Math.max(at,Be.domain[1])}Qe<at&&(Pe._counterDomainMin=Qe,Pe._counterDomainMax=at)}},m.clearExpandedTraceDefaultColors=function(V){var Y,ae,X;for(ae=[],(Y=V._module._colorAttrs)||(V._module._colorAttrs=Y=[],u.crawl(V._module.attributes,function J(re,ne,se,de){ae[de]=ne,ae.length=de+1,"color"===re.valType&&void 0===re.dflt&&Y.push(ae.join("."))})),X=0;X<Y.length;X++){r.nestedProperty(V,"_input."+Y[X]).get()||r.nestedProperty(V,Y[X]).set(null)}},m.supplyDataDefaults=function(V,Y,ae,X){var de,be,De,J=X._modules,ue=X._visibleModules,re=X._basePlotModules,ne=0,se=0;function _e(Ne){Y.push(Ne);var nt=Ne._module;nt&&(r.pushUnique(J,nt),!0===Ne.visible&&r.pushUnique(ue,nt),r.pushUnique(re,Ne._module.basePlotModule),ne++,!1!==Ne._input.visible&&se++)}X._transformModules=[];var Ce={},Le=[],Fe=(ae.template||{}).data||{},ke=a.traceTemplater(Fe);for(de=0;de<V.length;de++){if(De=V[de],(be=ke.newTrace(De)).uid=X._traceUids[de],m.supplyTraceDefaults(De,be,se,X,de),be.index=de,be._input=De,be._expandedIndex=ne,be.transforms&&be.transforms.length)for(var ze=!1!==De.visible&&!1===be.visible,Pe=D(be,Y,ae,X),Ie=0;Ie<Pe.length;Ie++){var Qe=Pe[Ie],at={_template:be._template,type:be.type,uid:be.uid+Ie};ze&&!1===Qe.visible&&delete Qe.visible,m.supplyTraceDefaults(Qe,at,ne,X,de),h(at,Qe),at.index=de,at._input=De,at._fullInput=be,at._expandedIndex=ne,at._expandedInput=Qe,_e(at)}else be._fullInput=be,be._expandedInput=be,_e(be);i.traceIs(be,"carpetAxis")&&(Ce[be.carpet]=be),i.traceIs(be,"carpetDependent")&&Le.push(de)}for(de=0;de<Le.length;de++)if((be=Y[Le[de]]).visible){var Be=Ce[be.carpet];if(be._carpet=Be,!Be||!Be.visible){be.visible=!1;continue}be.xaxis=Be.xaxis,be.yaxis=Be.yaxis}},m.supplyAnimationDefaults=function(V){V=V||{};var Y,ae={};function X(J,ue){return r.coerce(V||{},ae,y,J,ue)}if(X("mode"),X("direction"),X("fromcurrent"),Array.isArray(V.frame))for(ae.frame=[],Y=0;Y<V.frame.length;Y++)ae.frame[Y]=m.supplyAnimationFrameDefaults(V.frame[Y]||{});else ae.frame=m.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(ae.transition=[],Y=0;Y<V.transition.length;Y++)ae.transition[Y]=m.supplyAnimationTransitionDefaults(V.transition[Y]||{});else ae.transition=m.supplyAnimationTransitionDefaults(V.transition||{});return ae},m.supplyAnimationFrameDefaults=function(V){var Y={};function ae(X,J){return r.coerce(V||{},Y,y.frame,X,J)}return ae("duration"),ae("redraw"),Y},m.supplyAnimationTransitionDefaults=function(V){var Y={};function ae(X,J){return r.coerce(V||{},Y,y.transition,X,J)}return ae("duration"),ae("easing"),Y},m.supplyFrameDefaults=function(V){var Y={};function ae(X,J){return r.coerce(V,Y,s,X,J)}return ae("group"),ae("name"),ae("traces"),ae("baseframe"),ae("data"),ae("layout"),Y},m.supplyTraceDefaults=function(V,Y,ae,X,J){var ne,ue=X.colorway||o.defaults,re=ue[ae%ue.length];function se(Ie,Qe){return r.coerce(V,Y,m.attributes,Ie,Qe)}var de=se("visible");se("type"),se("name",X._traceWord+" "+J),se("uirevision",X.uirevision);var be=m.getModule(Y);if(Y._module=be,be){var De=be.basePlotModule,_e=De.attr,Ce=De.attributes;if(_e&&Ce){var Le=X._subplots,Fe="";if(de||"gl2d"!==De.name){if(Array.isArray(_e))for(ne=0;ne<_e.length;ne++){var ke=_e[ne],ze=r.coerce(V,Y,Ce,ke);Le[ke]&&r.pushUnique(Le[ke],ze),Fe+=ze}else Fe=r.coerce(V,Y,Ce,_e);Le[De.name]&&r.pushUnique(Le[De.name],Fe)}}}if(de){if(se("customdata"),se("ids"),se("meta"),i.traceIs(Y,"showLegend")?(r.coerce(V,Y,be.attributes.showlegend?be.attributes:m.attributes,"showlegend"),se("legend"),se("legendwidth"),se("legendgroup"),se("legendgrouptitle.text"),se("legendrank"),Y._dfltShowLegend=!0):Y._dfltShowLegend=!1,be&&be.supplyDefaults(V,Y,re,X),i.traceIs(Y,"noOpacity")||se("opacity"),i.traceIs(Y,"notLegendIsolatable")&&(Y.visible=!!Y.visible),i.traceIs(Y,"noHover")||(Y.hovertemplate||r.coerceHoverinfo(V,Y,X),"parcats"!==Y.type&&i.getComponentMethod("fx","supplyDefaults")(V,Y,re,X)),be&&be.selectPoints){var Pe=se("selectedpoints");r.isTypedArray(Pe)&&(Y.selectedpoints=Array.from(Pe))}m.supplyTransformDefaults(V,Y,X)}return Y},m.hasMakesDataTransform=z,m.supplyTransformDefaults=function(V,Y,ae){if(Y._length||z(V)){var X=ae._globalTransforms||[],J=ae._transformModules||[];if(Array.isArray(V.transforms)||0!==X.length)for(var ue=V.transforms||[],re=X.concat(ue),ne=Y.transforms=[],se=0;se<re.length;se++){var _e,de=re[se],be=de.type,De=d[be],Ce=!(de._module&&de._module===De),Le=De&&"function"==typeof De.transform;De||r.warn("Unrecognized transform type "+be+"."),De&&De.supplyDefaults&&(Ce||Le)?((_e=De.supplyDefaults(de,Y,ae,V)).type=be,_e._module=De,r.pushUnique(J,De)):_e=r.extendFlat({},de),ne.push(_e)}}},m.supplyLayoutGlobalDefaults=function(V,Y,ae){function X(De,_e){return r.coerce(V,Y,m.layoutAttributes,De,_e)}var J=V.template;r.isPlainObject(J)&&(Y.template=J,Y._template=J.layout,Y._dataTemplate=J.data),X("autotypenumbers");var ue=r.coerceFont(X,"font"),re=ue.size;r.coerceFont(X,"title.font",r.extendFlat({},ue,{size:Math.round(1.4*re)})),X("title.text",Y._dfltTitle.plot),X("title.xref");var ne=X("title.yref");X("title.pad.t"),X("title.pad.r"),X("title.pad.b"),X("title.pad.l");var se=X("title.automargin");X("title.x"),X("title.xanchor"),X("title.y"),X("title.yanchor"),se&&("paper"===ne&&(0!==Y.title.y&&(Y.title.y=1),"auto"===Y.title.yanchor&&(Y.title.yanchor=0===Y.title.y?"top":"bottom")),"container"===ne&&("auto"===Y.title.y&&(Y.title.y=1),"auto"===Y.title.yanchor&&(Y.title.yanchor=Y.title.y<.5?"bottom":"top"))),X("uniformtext.mode")&&X("uniformtext.minsize"),X("autosize",!(V.width&&V.height)),X("width"),X("height"),X("minreducedwidth"),X("minreducedheight"),X("margin.l"),X("margin.r"),X("margin.t"),X("margin.b"),X("margin.pad"),X("margin.autoexpand"),V.width&&V.height&&m.sanitizeMargins(Y),i.getComponentMethod("grid","sizeDefaults")(V,Y),X("paper_bgcolor"),X("separators",ae.decimal+ae.thousands),X("hidesources"),X("colorway"),X("datarevision");var be=X("uirevision");X("editrevision",be),X("selectionrevision",be),i.getComponentMethod("modebar","supplyLayoutDefaults")(V,Y),i.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,Y,X),i.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(V,Y,X),X("meta"),r.isPlainObject(V.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering")),i.getComponentMethod("calendars","handleDefaults")(V,Y,"calendar"),i.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,Y,X),r.coerce(V,Y,l,"scattermode")},m.plotAutoSize=function(Y,ae,X){var re,ne,J=Y._context||{},ue=J.frameMargins,se=r.isPlotDiv(Y);if(se&&Y.emit("plotly_autosize"),J.fillFrame)re=window.innerWidth,ne=window.innerHeight,document.body.style.overflow="hidden";else{var de=se?window.getComputedStyle(Y):{};if(re=k(de.width)||k(de.maxWidth)||X.width,ne=k(de.height)||k(de.maxHeight)||X.height,T(ue)&&ue>0){var be=1-2*ue;re=Math.round(be*re),ne=Math.round(be*ne)}}var De=m.layoutAttributes.width.min,_e=m.layoutAttributes.height.min;re<De&&(re=De),ne<_e&&(ne=_e);var Ce=!ae.width&&Math.abs(X.width-re)>1,Le=!ae.height&&Math.abs(X.height-ne)>1;(Le||Ce)&&(Ce&&(X.width=re),Le&&(X.height=ne)),Y._initialAutoSize||(Y._initialAutoSize={width:re,height:ne}),m.sanitizeMargins(X)},m.supplyLayoutModuleDefaults=function(V,Y,ae,X){var re,ne,se,J=i.componentsRegistry,ue=Y._basePlotModules,de=i.subplotsRegistry.cartesian;for(re in J)(se=J[re]).includeBasePlot&&se.includeBasePlot(V,Y);for(var be in ue.length||ue.push(de),Y._has("cartesian")&&(i.getComponentMethod("grid","contentDefaults")(V,Y),de.finalizeSubplots(V,Y)),Y._subplots)Y._subplots[be].sort(r.subplotSort);for(ne=0;ne<ue.length;ne++)(se=ue[ne]).supplyLayoutDefaults&&se.supplyLayoutDefaults(V,Y,ae);var De=Y._modules;for(ne=0;ne<De.length;ne++)(se=De[ne]).supplyLayoutDefaults&&se.supplyLayoutDefaults(V,Y,ae);var _e=Y._transformModules;for(ne=0;ne<_e.length;ne++)(se=_e[ne]).supplyLayoutDefaults&&se.supplyLayoutDefaults(V,Y,ae,X);for(re in J)(se=J[re]).supplyLayoutDefaults&&se.supplyLayoutDefaults(V,Y,ae)},m.purge=function(V){var Y=V._fullLayout||{};void 0!==Y._glcontainer&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.remove(),Y._glcanvas=null),Y._modeBar&&Y._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},m.style=function(V){var X,Y=V._fullLayout._visibleModules,ae=[];for(X=0;X<Y.length;X++){var J=Y[X];J.style&&r.pushUnique(ae,J.style)}for(X=0;X<ae.length;X++)ae[X](V)},m.sanitizeMargins=function(V){if(V&&V.margin){var re,Y=V.width,ae=V.height,X=V.margin,J=Y-(X.l+X.r),ue=ae-(X.t+X.b);J<0&&(re=(Y-1)/(X.l+X.r),X.l=Math.floor(re*X.l),X.r=Math.floor(re*X.r)),ue<0&&(re=(ae-1)/(X.t+X.b),X.t=Math.floor(re*X.t),X.b=Math.floor(re*X.b))}},m.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(V,Y){V._fullLayout._pushmarginIds[Y]=1};m.autoMargin=function(V,Y,ae){var X=V._fullLayout,J=X.width,ue=X.height,re=X.margin,ne=X.minreducedwidth,se=X.minreducedheight,de=r.constrain(J-re.l-re.r,2,ne),be=r.constrain(ue-re.t-re.b,2,se),De=Math.max(0,J-de),_e=Math.max(0,ue-be),Ce=X._pushmargin,Le=X._pushmarginIds;if(!1!==re.autoexpand){if(ae){var Fe=ae.pad;if(void 0===Fe&&(Fe=Math.min(12,re.l,re.r,re.t,re.b)),De){var ke=(ae.l+ae.r)/De;ke>1&&(ae.l/=ke,ae.r/=ke)}if(_e){var ze=(ae.t+ae.b)/_e;ze>1&&(ae.t/=ze,ae.b/=ze)}var Pe=void 0!==ae.xl?ae.xl:ae.x,Ie=void 0!==ae.xr?ae.xr:ae.x,Qe=void 0!==ae.yt?ae.yt:ae.y,at=void 0!==ae.yb?ae.yb:ae.y;Ce[Y]={l:{val:Pe,size:ae.l+Fe},r:{val:Ie,size:ae.r+Fe},b:{val:at,size:ae.b+Fe},t:{val:Qe,size:ae.t+Fe}},Le[Y]=1}else delete Ce[Y],delete Le[Y];if(!X._replotting)return m.doAutoMargin(V)}},m.doAutoMargin=function(V){var Y=V._fullLayout,ae=Y.width,X=Y.height;Y._size||(Y._size={}),O(Y);var J=Y._size,ue=Y.margin,re={t:0,b:0,l:0,r:0},ne=r.extendFlat({},J),se=ue.l,de=ue.r,be=ue.t,De=ue.b,_e=Y._pushmargin,Ce=Y._pushmarginIds,Le=Y.minreducedwidth,Fe=Y.minreducedheight;if(!1!==ue.autoexpand){for(var ke in _e)Ce[ke]||delete _e[ke];var ze=V._fullLayout._reservedMargin;for(var Pe in ze)for(var Ie in ze[Pe]){var Qe=ze[Pe][Ie];re[Ie]=Math.max(re[Ie],Qe)}for(var at in _e.base={l:{val:0,size:se},r:{val:1,size:de},t:{val:1,size:be},b:{val:0,size:De}},re){var Be=0;for(var Ne in _e)"base"!==Ne&&T(_e[Ne][at].size)&&(Be=_e[Ne][at].size>Be?_e[Ne][at].size:Be);var nt=Math.max(0,ue[at]-Be);re[at]=Math.max(0,re[at]-nt)}for(var ct in _e){var mt=_e[ct].l||{},Bt=_e[ct].b||{},Rt=mt.val,zt=mt.size,St=Bt.val,Xt=Bt.size,Mt=ae-re.r-re.l,st=X-re.t-re.b;for(var Se in _e){if(T(zt)&&_e[Se].r){var pe=_e[Se].r.val,ge=_e[Se].r.size;if(pe>Rt){var Oe=(zt*pe+(ge-Mt)*Rt)/(pe-Rt),we=(ge*(1-Rt)+(zt-Mt)*(1-pe))/(pe-Rt);Oe+we>se+de&&(se=Oe,de=we)}}if(T(Xt)&&_e[Se].t){var He=_e[Se].t.val,Xe=_e[Se].t.size;if(He>St){var ut=(Xt*He+(Xe-st)*St)/(He-St),Ze=(Xe*(1-St)+(Xt-st)*(1-He))/(He-St);ut+Ze>De+be&&(De=ut,be=Ze)}}}}}var qe=r.constrain(ae-ue.l-ue.r,2,Le),Dt=r.constrain(X-ue.t-ue.b,2,Fe),Ft=Math.max(0,ae-qe),bt=Math.max(0,X-Dt);if(Ft){var Pt=(se+de)/Ft;Pt>1&&(se/=Pt,de/=Pt)}if(bt){var cr=(De+be)/bt;cr>1&&(De/=cr,be/=cr)}if(J.l=Math.round(se)+re.l,J.r=Math.round(de)+re.r,J.t=Math.round(be)+re.t,J.b=Math.round(De)+re.b,J.p=Math.round(ue.pad),J.w=Math.round(ae)-J.l-J.r,J.h=Math.round(X)-J.t-J.b,!Y._replotting&&(m.didMarginChange(ne,J)||function j(V){if("_redrawFromAutoMarginCount"in V._fullLayout)return!1;var Y=p.list(V,"",!0);for(var ae in Y)if(Y[ae].autoshift||Y[ae].shift)return!0;return!1}(V))){"_redrawFromAutoMarginCount"in Y?Y._redrawFromAutoMarginCount++:Y._redrawFromAutoMarginCount=1;var Sr=3*(1+Object.keys(Ce).length);if(Y._redrawFromAutoMarginCount<Sr)return i.call("_doPlot",V);Y._size=ne,r.warn("Too many auto-margin redraws.")}!function ee(V){var Y=p.list(V,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ae){for(var X=0;X<Y.length;X++){var J=Y[X][ae];J&&J()}})}(V)};var W=["l","r","t","b","p","w","h"];function B(V,Y,ae){var X=!1;var de=[m.previousPromises,function se(){if(V._transitionData)return V._transitioning=!1,function J(De){var _e=Promise.resolve();if(!De)return _e;for(;De.length;)_e=_e.then(De.shift());return _e}(V._transitionData._interruptCallbacks)},ae.prepareFn,m.rehover,m.reselect,function re(){return V.emit("plotly_transitioning",[]),new Promise(function(De){V._transitioning=!0,Y.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){X=!0}),ae.redraw&&V._transitionData._interruptCallbacks.push(function(){return i.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var _e=0,Ce=0;function Le(){return _e++,function(){Ce++,!X&&Ce===_e&&function ne(De){if(V._transitionData)return function ue(De){if(De)for(;De.length;)De.shift()}(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ae.redraw)return i.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(De)}(De)}}ae.runFn(Le),setTimeout(Le())})}],be=r.syncOrAsync(de,V);return(!be||!be.then)&&(be=Promise.resolve()),be.then(function(){return V})}m.didMarginChange=function(V,Y){for(var ae=0;ae<W.length;ae++){var X=W[ae],J=V[X],ue=Y[X];if(!T(J)||Math.abs(ue-J)>1)return!0}return!1},m.graphJson=function(V,Y,ae,X,J,ue){(J&&Y&&!V._fullData||J&&!Y&&!V._fullLayout)&&m.supplyDefaults(V);var re=J?V._fullData:V.data,ne=J?V._fullLayout:V.layout,se=(V._transitionData||{})._frames;function de(_e,Ce){if("function"==typeof _e)return Ce?"_function_":null;if(r.isPlainObject(_e)){var Fe,Le={};return Object.keys(_e).sort().forEach(function(Ie){if(-1===["_","["].indexOf(Ie.charAt(0))){if("function"==typeof _e[Ie])return void(Ce&&(Le[Ie]="_function"));if("keepdata"===ae){if("src"===Ie.substr(Ie.length-3))return}else if("keepstream"===ae){if("string"==typeof(Fe=_e[Ie+"src"])&&Fe.indexOf(":")>0&&!r.isPlainObject(_e.stream))return}else if("keepall"!==ae&&("string"==typeof(Fe=_e[Ie+"src"])&&Fe.indexOf(":")>0))return;Le[Ie]=de(_e[Ie],Ce)}}),Le}var ke=Array.isArray(_e),ze=r.isTypedArray(_e);if((ke||ze)&&_e.dtype&&_e.shape){var Pe=_e.bdata;return de({dtype:_e.dtype,shape:_e.shape,bdata:r.isArrayBuffer(Pe)?n.encode(Pe):Pe},Ce)}return ke?_e.map(function(Ie){return de(Ie,Ce)}):ze?r.simpleMap(_e,r.identity):r.isJSDate(_e)?r.ms2DateTimeLocal(+_e):_e}var be={data:(re||[]).map(function(_e){var Ce=de(_e);return Y&&delete Ce.fit,Ce})};if(!Y&&(be.layout=de(ne),J)){var De=ne._size;be.layout.computed={margin:{b:De.b,l:De.l,r:De.r,t:De.t}}}return se&&(be.frames=de(se)),ue&&(be.config=de(V._context,!0)),"object"===X?be:JSON.stringify(be)},m.modifyFrames=function(V,Y){var ae,X,J,ue=V._transitionData._frames,re=V._transitionData._frameHash;for(ae=0;ae<Y.length;ae++)switch(X=Y[ae],X.type){case"replace":J=X.value;var ne=(ue[X.index]||{}).name,se=J.name;ue[X.index]=re[se]=J,se!==ne&&(delete re[ne],re[se]=J);break;case"insert":re[(J=X.value).name]=J,ue.splice(X.index,0,J);break;case"delete":delete re[(J=ue[X.index]).name],ue.splice(X.index,1)}return Promise.resolve()},m.computeFrame=function(V,Y){var X,J,ue,re,ae=V._transitionData._frameHash;if(!Y)throw new Error("computeFrame must be given a string frame name");var ne=ae[Y.toString()];if(!ne)return!1;for(var se=[ne],de=[ne.name];ne.baseframe&&(ne=ae[ne.baseframe.toString()])&&-1===de.indexOf(ne.name);)se.push(ne),de.push(ne.name);for(var be={};ne=se.pop();)if(ne.layout&&(be.layout=m.extendLayout(be.layout,ne.layout)),ne.data){if(be.data||(be.data=[]),!(J=ne.traces))for(J=[],X=0;X<ne.data.length;X++)J[X]=X;for(be.traces||(be.traces=[]),X=0;X<ne.data.length;X++)null!=(ue=J[X])&&(-1===(re=be.traces.indexOf(ue))&&(re=be.data.length,be.traces[re]=ue),be.data[re]=m.extendTrace(be.data[re],ne.data[X]))}return be},m.recomputeFrameHash=function(V){for(var Y=V._transitionData._frameHash={},ae=V._transitionData._frames,X=0;X<ae.length;X++){var J=ae[X];J&&J.name&&(Y[J.name]=J)}},m.extendObjectWithContainers=function(V,Y,ae){var X,J,ue,re,se,de,be,De=r.extendDeepNoArrays({},Y||{}),_e=r.expandObjectPaths(De),Ce={};if(ae&&ae.length)for(ue=0;ue<ae.length;ue++)void 0===(J=(X=r.nestedProperty(_e,ae[ue])).get())?r.nestedProperty(Ce,ae[ue]).set(null):(X.set(null),r.nestedProperty(Ce,ae[ue]).set(J));if(V=r.extendDeepNoArrays(V||{},_e),ae&&ae.length)for(ue=0;ue<ae.length;ue++)if(de=r.nestedProperty(Ce,ae[ue]).get()){for(be=(se=r.nestedProperty(V,ae[ue])).get(),Array.isArray(be)||(be=[],se.set(be)),re=0;re<de.length;re++){var Le=de[re];be[re]=null===Le?null:m.extendObjectWithContainers(be[re],Le)}se.set(be)}return V},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=i.layoutArrayContainers,m.extendTrace=function(V,Y){return m.extendObjectWithContainers(V,Y,m.dataArrayContainers)},m.extendLayout=function(V,Y){return m.extendObjectWithContainers(V,Y,m.layoutArrayContainers)},m.transition=function(V,Y,ae,X,J,ue){var re={redraw:J.redraw},ne={},se=[];return re.prepareFn=function(){for(var de=Array.isArray(Y)?Y.length:0,be=X.slice(0,de),De=0;De<be.length;De++){var _e=be[De],Le=V._fullData[_e]._module;if(Le){if(Le.animatable){var Fe=Le.basePlotModule.name;ne[Fe]||(ne[Fe]=[]),ne[Fe].push(_e)}V.data[be[De]]=m.extendTrace(V.data[be[De]],Y[De])}}var ke=r.expandObjectPaths(r.extendDeepNoArrays({},ae)),ze=/^[xy]axis[0-9]*$/;for(var Pe in ke)ze.test(Pe)&&delete ke[Pe].range;m.extendLayout(V.layout,ke),delete V.calcdata,m.supplyDefaults(V),m.doCalcdata(V);var Ie=r.expandObjectPaths(ae);if(Ie){var Qe=V._fullLayout._plots;for(var at in Qe){var Be=Qe[at],Ne=Be.xaxis,nt=Be.yaxis,ct=Ne.range.slice(),mt=nt.range.slice(),Bt=null,Rt=null,zt=null,St=null;Array.isArray(Ie[Ne._name+".range"])?Bt=Ie[Ne._name+".range"].slice():Array.isArray((Ie[Ne._name]||{}).range)&&(Bt=Ie[Ne._name].range.slice()),Array.isArray(Ie[nt._name+".range"])?Rt=Ie[nt._name+".range"].slice():Array.isArray((Ie[nt._name]||{}).range)&&(Rt=Ie[nt._name].range.slice()),ct&&Bt&&(Ne.r2l(ct[0])!==Ne.r2l(Bt[0])||Ne.r2l(ct[1])!==Ne.r2l(Bt[1]))&&(zt={xr0:ct,xr1:Bt}),mt&&Rt&&(nt.r2l(mt[0])!==nt.r2l(Rt[0])||nt.r2l(mt[1])!==nt.r2l(Rt[1]))&&(St={yr0:mt,yr1:Rt}),(zt||St)&&se.push(r.extendFlat({plotinfo:Be},zt,St))}}return Promise.resolve()},re.runFn=function(de){var be,Ce,De=V._fullLayout._basePlotModules,_e=se.length;if(ae)for(Ce=0;Ce<De.length;Ce++)De[Ce].transitionAxes&&De[Ce].transitionAxes(V,se,ue,de);for(var Le in _e?((be=r.extendFlat({},ue)).duration=0,delete ne.cartesian):be=ue,ne){var Fe=ne[Le];V._fullData[Fe[0]]._module.basePlotModule.plot(V,Fe,be,de)}},B(V,ue,re)},m.transitionFromReact=function(V,Y,ae,X){var J=V._fullLayout,ue=J.transition,re={},ne=[];return re.prepareFn=function(){var se=J._plots;for(var de in re.redraw=!1,"some"===Y.anim&&(re.redraw=!0),"some"===ae.anim&&(re.redraw=!0),se){var be=se[de],De=be.xaxis,_e=be.yaxis,Ce=X[De._name].range.slice(),Le=X[_e._name].range.slice(),Fe=De.range.slice(),ke=_e.range.slice();De.setScale(),_e.setScale();var ze=null,Pe=null;(De.r2l(Ce[0])!==De.r2l(Fe[0])||De.r2l(Ce[1])!==De.r2l(Fe[1]))&&(ze={xr0:Ce,xr1:Fe}),(_e.r2l(Le[0])!==_e.r2l(ke[0])||_e.r2l(Le[1])!==_e.r2l(ke[1]))&&(Pe={yr0:Le,yr1:ke}),(ze||Pe)&&ne.push(r.extendFlat({plotinfo:be},ze,Pe))}return Promise.resolve()},re.runFn=function(se){for(var _e,Ce,Le,de=V._fullData,De=V._fullLayout._basePlotModules,Fe=[],ke=0;ke<de.length;ke++)Fe.push(ke);function ze(){if(V._fullLayout)for(var Ie=0;Ie<De.length;Ie++)De[Ie].transitionAxes&&De[Ie].transitionAxes(V,ne,_e,se)}function Pe(){if(V._fullLayout)for(var Ie=0;Ie<De.length;Ie++)De[Ie].plot(V,Le,Ce,se)}ne.length&&Y.anim?"traces first"===ue.ordering?(_e=r.extendFlat({},ue,{duration:0}),Le=Fe,Ce=ue,setTimeout(ze,ue.duration),Pe()):(_e=ue,Le=null,Ce=r.extendFlat({},ue,{duration:0}),setTimeout(Pe,_e.duration),ze()):ne.length?(_e=ue,ze()):Y.anim&&(Le=Fe,Ce=ue,Pe())},B(V,ue,re)},m.doCalcdata=function(V,Y){var ue,re,ne,se,ae=p.list(V),X=V._fullData,J=V._fullLayout,de=new Array(X.length),be=(V.calcdata||[]).slice();for(V.calcdata=de,J._numBoxes=0,J._numViolins=0,J._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,J._piecolormap={},J._sunburstcolormap={},J._treemapcolormap={},J._iciclecolormap={},J._funnelareacolormap={},ne=0;ne<X.length;ne++)if(Array.isArray(Y)&&-1===Y.indexOf(ne)){de[ne]=be[ne];continue}for(ne=0;ne<X.length;ne++)(ue=X[ne])._arrayAttrs=u.findArrayAttributes(ue),ue._extremes={};var De=J._subplots.polar||[];for(ne=0;ne<De.length;ne++)ae.push(J[De[ne]].radialaxis,J[De[ne]].angularaxis);for(var _e in J._colorAxes){var Ce=J[_e];!1!==Ce.cauto&&(delete Ce.cmin,delete Ce.cmax)}var Le=!1;function Fe(Pe){if(ue=X[Pe],re=ue._module,!0===ue.visible&&ue.transforms){if(re&&re.calc){var Ie=re.calc(V,ue);Ie[0]&&Ie[0].t&&Ie[0].t._scene&&delete Ie[0].t._scene.dirty}for(se=0;se<ue.transforms.length;se++){var Qe=ue.transforms[se];(re=d[Qe.type])&&re.calcTransform&&(ue._hasCalcTransform=!0,Le=!0,re.calcTransform(V,ue,Qe))}}}function ke(Pe,Ie){if(ue=X[Pe],!!(re=ue._module).isContainer===Ie){var Qe=[];if(!0===ue.visible&&0!==ue._length){delete ue._indexToPoints;var at=ue.transforms||[];for(se=at.length-1;se>=0;se--)if(at[se].enabled){ue._indexToPoints=at[se]._indexToPoints;break}re&&re.calc&&(Qe=re.calc(V,ue))}(!Array.isArray(Qe)||!Qe[0])&&(Qe=[{x:v,y:v}]),Qe[0].t||(Qe[0].t={}),Qe[0].trace=ue,de[Pe]=Qe}}for(oe(ae,X,J),ne=0;ne<X.length;ne++)ke(ne,!0);for(ne=0;ne<X.length;ne++)Fe(ne);for(Le&&oe(ae,X,J),ne=0;ne<X.length;ne++)ke(ne,!0);for(ne=0;ne<X.length;ne++)ke(ne,!1);ie(V);var ze=function q(V,Y){var X,J,ue,re,ne,ae=[];function se(Se,pe,ge){var Oe=pe._id.charAt(0);if("histogram2dcontour"===Se){var we=pe._counterAxes[0],He=p.getFromId(Y,we),Xe="x"===Oe||"x"===we&&"category"===He.type,ut="y"===Oe||"y"===we&&"category"===He.type;return function(Ze,qe){return 0===Ze||0===qe||Xe&&Ze===ge[qe].length-1||ut&&qe===ge.length-1?-1:("y"===Oe?qe:Ze)-1}}return function(Ze,qe){return"y"===Oe?qe:Ze}}var de={min:function(Se){return r.aggNums(Math.min,null,Se)},max:function(Se){return r.aggNums(Math.max,null,Se)},sum:function(Se){return r.aggNums(function(pe,ge){return pe+ge},null,Se)},total:function(Se){return r.aggNums(function(pe,ge){return pe+ge},null,Se)},mean:function(Se){return r.mean(Se)},median:function(Se){return r.median(Se)}};function be(Se,pe){return Se[1]-pe[1]}function De(Se,pe){return pe[1]-Se[1]}for(X=0;X<V.length;X++){var _e=V[X];if("category"===_e.type){var Ce=_e.categoryorder.match(te);if(Ce){var Le=Ce[1],Fe=Ce[2],ke=_e._id.charAt(0),ze="x"===ke,Pe=[];for(J=0;J<_e._categories.length;J++)Pe.push([_e._categories[J],[]]);for(J=0;J<_e._traceIndices.length;J++){var Ie=_e._traceIndices[J],Qe=Y._fullData[Ie];if(!0===Qe.visible){var at=Qe.type;i.traceIs(Qe,"histogram")&&(delete Qe._xautoBinFinished,delete Qe._yautoBinFinished);var Be="splom"===at,Ne="scattergl"===at,nt=Y.calcdata[Ie];for(ue=0;ue<nt.length;ue++){var mt,Bt,ct=nt[ue];if(Be){var Rt=Qe._axesDim[_e._id];if(!ze){var zt=Qe._diag[Rt][0];zt&&(_e=Y._fullLayout[p.id2name(zt)])}var St=ct.trace.dimensions[Rt].values;for(re=0;re<St.length;re++)for(mt=_e._categoriesMap[St[re]],ne=0;ne<ct.trace.dimensions.length;ne++)if(ne!==Rt){var Xt=ct.trace.dimensions[ne];Pe[mt][1].push(Xt.values[re])}}else if(Ne){for(re=0;re<ct.t.x.length;re++)ze?(mt=ct.t.x[re],Bt=ct.t.y[re]):(mt=ct.t.y[re],Bt=ct.t.x[re]),Pe[mt][1].push(Bt);ct.t&&ct.t._scene&&delete ct.t._scene.dirty}else if(ct.hasOwnProperty("z")){Bt=ct.z;var Mt=se(Qe.type,_e,Bt);for(re=0;re<Bt.length;re++)for(ne=0;ne<Bt[re].length;ne++)(mt=Mt(ne,re))+1&&Pe[mt][1].push(Bt[re][ne])}else for(void 0===(mt=ct.p)&&(mt=ct[ke]),void 0===(Bt=ct.s)&&(Bt=ct.v),void 0===Bt&&(Bt=ze?ct.y:ct.x),Array.isArray(Bt)||(Bt=void 0===Bt?[]:[Bt]),re=0;re<Bt.length;re++)Pe[mt][1].push(Bt[re])}}}_e._categoriesValue=Pe;var st=[];for(J=0;J<Pe.length;J++)st.push([Pe[J][0],de[Le](Pe[J][1])]);st.sort("descending"===Fe?De:be),_e._categoriesAggregatedValue=st,_e._initialCategories=st.map(function(Se){return Se[0]}),ae=ae.concat(_e.sortByInitialCategories())}}}return ae}(ae,V);if(ze.length){for(J._numBoxes=0,J._numViolins=0,ne=0;ne<ze.length;ne++)ke(ze[ne],!0);for(ne=0;ne<ze.length;ne++)ke(ze[ne],!1);ie(V)}i.getComponentMethod("fx","calc")(V),i.getComponentMethod("errorbars","calc")(V)};var te=/(total|sum|min|max|mean|median) (ascending|descending)/;function oe(V,Y,ae){var X={};function J(se){se.clearCalc(),"multicategory"===se.type&&se.setupMultiCategory(Y),X[se._id]=1}r.simpleMap(V,J);for(var ue=ae._axisMatchGroups||[],re=0;re<ue.length;re++)for(var ne in ue[re])X[ne]||J(ae[p.id2name(ne)])}function ie(V){var J,ue,re,Y=V._fullLayout,ae=Y._visibleModules,X={};for(ue=0;ue<ae.length;ue++){var ne=ae[ue],se=ne.crossTraceCalc;if(se){var de=ne.basePlotModule.name;X[de]?r.pushUnique(X[de],se):X[de]=[se]}}for(re in X){var be=X[re],De=Y._subplots[re];if(Array.isArray(De))for(J=0;J<De.length;J++){var _e=De[J],Ce="cartesian"===re?Y._plots[_e]:Y[_e];for(ue=0;ue<be.length;ue++)be[ue](V,Ce,_e)}else for(ue=0;ue<be.length;ue++)be[ue](V)}}m.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},m.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},m.reselect=function(V){var Y=V._fullLayout,ae=(V.layout||{}).selections,X=Y._previousSelections;Y._previousSelections=ae;var J=Y._reselect||JSON.stringify(ae)!==JSON.stringify(X);i.getComponentMethod("selections","reselect")(V,J)},m.generalUpdatePerTraceModule=function(V,Y,ae,X){var re,J=Y.traceHash,ue={};for(re=0;re<ae.length;re++){var ne=ae[re],se=ne[0].trace;se.visible&&(ue[se.type]=ue[se.type]||[],ue[se.type].push(ne))}for(var de in J)if(!ue[de]){var be=J[de][0];be[0].trace.visible=!1,ue[de]=[be]}for(var _e in ue){var Ce=ue[_e];Ce[0][0].trace._module.plot(V,Y,r.filterVisible(Ce),X)}Y.traceHash=ue},m.plotBasePlot=function(V,Y,ae,X,J){var ue=i.getModule(V),re=x(Y.calcdata,ue)[0];ue.plot(Y,re,X,J)},m.cleanBasePlot=function(V,Y,ae,X,J){var ue=J._has&&J._has(V),re=ae._has&&ae._has(V);ue&&!re&&J["_"+V+"layer"].selectAll("g.trace").remove()}},81789:$=>{"use strict";$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},92275:($,K,e)=>{"use strict";var M=e(5228),I=e(80134).tester,t=M.findIndexOfMin,T=M.isAngleInsideSector,n=M.angleDelta,i=M.angleDist;function a(g,m,d,A){var b,c,S=A[0],w=A[1],E=y(Math.sin(m)-Math.sin(g)),P=y(Math.cos(m)-Math.cos(g)),R=Math.tan(d),F=y(1/R),_=E/P,z=w-_*S;return F?E&&P?c=R*(b=z/(R-_)):P?(b=w*F,c=w):(b=S,c=S*R):E&&P?(b=0,c=z):P?(b=0,c=w):b=c=NaN,[b,c]}function p(g,m,d,A){return M.isFullCircle([m,d])?function o(g,m){var b,d=m.length,A=new Array(d+1);for(b=0;b<d;b++){var c=m[b];A[b]=[g*Math.cos(c),g*Math.sin(c)]}return A[b]=A[0].slice(),A}(g,A):function v(g,m,d,A){var S,w,b=A.length,c=[];function E(U){return[g*Math.cos(U),g*Math.sin(U)]}function P(U,H,j){return a(U,H,j,E(U))}function R(U){return M.mod(U,b)}function F(U){return T(U,[m,d])}var _=t(A,function(U){return F(U)?i(U,m):1/0}),z=P(A[_],A[R(_-1)],m);for(c.push(z),S=_,w=0;w<b;S++,w++){var D=A[R(S)];if(!F(D))break;c.push(E(D))}var k=t(A,function(U){return F(U)?i(U,d):1/0}),O=P(A[k],A[R(k+1)],d);return c.push(O),c.push([0,0]),c.push(c[0].slice()),c}(g,m,d,A)}function y(g){return Math.abs(g)>1e-10?g:0}function s(g,m,d){m=m||0,d=d||0;for(var A=g.length,b=new Array(A),c=0;c<A;c++){var S=g[c];b[c]=[m+S[0],d-S[1]]}return b}$.exports={isPtInsidePolygon:function u(g,m,d,A,b){if(!T(m,A))return!1;var c,S;d[0]<d[1]?(c=d[0],S=d[1]):(c=d[1],S=d[0]);var w=I(p(c,A[0],A[1],b)),E=I(p(S,A[0],A[1],b)),P=[g*Math.cos(m),g*Math.sin(m)];return E.contains(P)&&!w.contains(P)},findPolygonOffset:function f(g,m,d,A){for(var b=1/0,c=1/0,S=p(g,m,d,A),w=0;w<S.length;w++){var E=S[w];b=Math.min(b,E[0]),c=Math.min(c,-E[1])}return[b,c]},findEnclosingVertexAngles:function l(g,m){var A=t(m,function(c){var S=n(c,g);return S>0?S:1/0}),b=M.mod(A+1,m.length);return[m[A],m[b]]},findIntersectionXY:a,findXYatLength:function r(g,m,d,A){var b=-m*d,c=m*m+1,S=2*(m*b-d),w=b*b+d*d-g*g,E=Math.sqrt(S*S-4*c*w),P=(-S+E)/(2*c),R=(-S-E)/(2*c);return[[P,m*P+b+A],[R,m*R+b+A]]},clampTiny:y,pathPolygon:function x(g,m,d,A,b,c){return"M"+s(p(g,m,d,A),b,c).join("L")},pathPolygonAnnulus:function h(g,m,d,A,b,c,S){var w,E;g<m?(w=g,E=m):(w=m,E=g);var P=s(p(w,d,A,b),c,S);return"M"+s(p(E,d,A,b),c,S).reverse().join("L")+"M"+P.join("L")}}},80147:($,K,e)=>{"use strict";var M=e(65644).AU,I=e(5228).counterRegex,t=e(1785),T=e(81789),n=T.attr,i=T.name,u=I(i),a={};a[n]={valType:"subplotid",dflt:i,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a polar subplot.","If *polar* (the default value), the data refer to `layout.polar`.","If *polar2*, the data refer to `layout.polar2`, and so on."].join(" ")},$.exports={attr:n,name:i,idRoot:i,idRegex:u,attrRegex:u,attributes:a,layoutAttributes:e(62267),supplyLayoutDefaults:e(6313),plot:function r(v){for(var p=v._fullLayout,f=v.calcdata,l=p._subplots[i],y=0;y<l.length;y++){var s=l[y],x=M(f,i,s),h=p[s]._subplot;h||(h=t(v,s),p[s]._subplot=h),h.plot(x,p,v._promises)}},clean:function o(v,p,f,l){for(var y=l._subplots[i]||[],s=l._has&&l._has("gl"),x=p._has&&p._has("gl"),h=s&&!x,g=0;g<y.length;g++){var m=y[g],d=l[m]._subplot;if(!p[m]&&d)for(var A in d.framework.remove(),d.layers["radial-axis-title"].remove(),d.clipPaths)d.clipPaths[A].remove();h&&d._scene&&(d._scene.destroy(),d._scene=null)}},toSVG:e(24329).toSVG}},62267:($,K,e)=>{"use strict";var M=e(36593),I=e(38330),t=e(47472).Y,T=e(5228).extendFlat,n=e(71859).overrideAll,i=n({color:I.color,showline:T({},I.showline,{dflt:!0}),linecolor:I.linecolor,linewidth:I.linewidth,showgrid:T({},I.showgrid,{dflt:!0}),gridcolor:I.gridcolor,gridwidth:I.gridwidth,griddash:I.griddash},"plot","from-root"),u=n({tickmode:I.minor.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,ticklabelstep:I.ticklabelstep,showticklabels:I.showticklabels,labelalias:I.labelalias,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,showexponent:I.showexponent,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,tickformatstops:I.tickformatstops,layer:I.layer},"plot","from-root"),a={visible:T({},I.visible,{dflt:!0}),type:T({},I.type,{values:["-","linear","log","date","category"]}),autotypenumbers:I.autotypenumbers,autorangeoptions:{minallowed:I.autorangeoptions.minallowed,maxallowed:I.autorangeoptions.maxallowed,clipmin:I.autorangeoptions.clipmin,clipmax:I.autorangeoptions.clipmax,include:I.autorangeoptions.include,editType:"plot"},autorange:T({},I.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc",description:["If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","If *normal*, the range is computed in relation to the extrema","of the input data (same behavior as for cartesian axes)."].join(" ")},minallowed:T({},I.minallowed,{editType:"plot"}),maxallowed:T({},I.maxallowed,{editType:"plot"}),range:T({},I.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:I.categoryorder,categoryarray:I.categoryarray,angle:{valType:"angle",editType:"plot",description:["Sets the angle (in degrees) from which the radial axis is drawn.","Note that by default, radial axis line on the theta=0 line","corresponds to a line pointing right (like what mathematicians prefer).","Defaults to the first `polar.sector` angle."].join(" ")},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot",description:["Determines on which side of radial axis line","the tick and tick labels appear."].join(" ")},title:{text:T({},I.title.text,{editType:"plot",dflt:""}),font:T({},I.title.font,{editType:"plot"}),editType:"plot"},hoverformat:I.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, `angle`, and `title` if in `editable: true` configuration.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc",_deprecated:{title:I._deprecated.title,titlefont:I._deprecated.titlefont}};T(a,i,u);var r={visible:T({},I.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the angular axis type.","If *linear*, set `thetaunit` to determine the unit in which axis value are shown.","If *category, use `period` to set the number of integer coordinates around polar axis."].join(" ")},autotypenumbers:I.autotypenumbers,categoryorder:I.categoryorder,categoryarray:I.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc",description:["Sets the format unit of the formatted *theta* values.","Has an effect only when `angularaxis.type` is *linear*."].join(" ")},period:{valType:"number",editType:"calc",min:0,description:["Set the angular period.","Has an effect only when `angularaxis.type` is *category*."].join(" ")},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc",description:["Sets the direction corresponding to positive angles."].join(" ")},rotation:{valType:"angle",editType:"calc",description:["Sets that start position (in degrees) of the angular axis","By default, polar subplots with `direction` set to *counterclockwise*","get a `rotation` of *0*","which corresponds to due East (like what mathematicians prefer).","In turn, polar with `direction` set to *clockwise* get a rotation of *90*","which corresponds to due North (like on a compass),"].join(" ")},hoverformat:I.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `rotation`.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc"};T(r,i,u),$.exports={domain:t({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot",description:["Sets angular span of this polar subplot with two angles (in degrees).","Sector are assumed to be spanned in the counterclockwise direction","with *0* corresponding to rightmost limit of the polar subplot."].join(" ")},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the fraction of the radius to cut out of the polar subplot."].join(" ")},bgcolor:{valType:"color",editType:"plot",dflt:M.background,description:"Set the background color of the subplot"},radialaxis:a,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot",description:["Determines if the radial axis grid lines and angular axis line are drawn","as *circular* sectors or as *linear* (polygon) sectors.","Has an effect only when the angular axis has `type` *category*.","Note that `radialaxis.angle` is snapped to the angle of the closest","vertex when `gridshape` is *circular*","(so that radial axis scale is the same as the data scale)."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis attributes,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc"}},6313:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(96906),T=e(11435),n=e(65644).NG,i=e(61606),u=e(6705),a=e(85357),r=e(72323),o=e(83113),v=e(18696),p=e(32044),f=e(30640),l=e(62267),y=e(94046),s=e(81789),x=s.axisNames;function h(m,d,A,b){var c=A("bgcolor");b.bgColor=I.combine(c,b.paper_bgcolor);var S=A("sector");A("hole");var P,w=n(b.fullData,s.name,b.id),E=b.layoutOut;function R(Y,ae){return A(P+"."+Y,ae)}for(var F=0;F<x.length;F++){P=x[F],M.isPlainObject(m[P])||(m[P]={});var _=m[P],z=t.newContainer(d,P);z._id=z._name=P,z._attr=b.id+"."+P,z._traceIndices=w.map(function(Y){return Y._expandedIndex});var D=s.axisName2dataArray[P],k=g(_,z,R,w,D,b);o(_,z,R,{axData:w,dataAttr:D});var O=R("visible");switch(y(z,d,E),R("uirevision",d.uirevision),z._m=1,P){case"radialaxis":R("minallowed"),R("maxallowed");var ee,U=R("range"),H=z.getAutorangeDflt(U),j=R("autorange",H);U&&(null===U[0]&&null===U[1]||(null===U[0]||null===U[1])&&("reversed"===j||!0===j)||null!==U[0]&&("min"===j||"max reversed"===j)||null!==U[1]&&("max"===j||"min reversed"===j))&&(U=void 0,delete z.range,z.autorange=!0,ee=!0),ee||(j=R("autorange",H=z.getAutorangeDflt(U))),_.autorange=j,j&&(p(R,j,U),("linear"===k||"-"===k)&&R("rangemode"),z.isReversed()&&(z._m=-1)),z.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===k){M.log("Polar plots do not support date angular axes yet.");for(var W=0;W<w.length;W++)w[W].visible=!1;k=_.type=z.type="linear"}R("linear"===k?"thetaunit":"period");var B=R("direction");R("rotation",{counterclockwise:0,clockwise:90}[B])}if(r(_,z,R,z.type,{tickSuffixDflt:"degrees"===z.thetaunit?"\xb0":void 0}),O){var te,q,oe,ie,V=b.font||{};q=(te=R("color"))===_.color?te:V.color,oe=V.size,ie=V.family,i(_,z,R,z.type),a(_,z,R,z.type,{font:{color:q,size:oe,family:ie}}),u(_,z,R,{outerTicks:!0}),v(_,z,R,{dfltColor:te,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[P]}),R("layer"),"radialaxis"===P&&(R("side"),R("angle",S[0]),R("title.text"),M.coerceFont(R,"title.font",{color:q,size:M.bigFont(oe),family:ie}))}"category"!==k&&R("hoverformat"),z._input=_}"category"===d.angularaxis.type&&A("gridshape")}function g(m,d,A,b,c,S){var w=A("autotypenumbers",S.autotypenumbersDflt);if("-"===A("type")){for(var P,R=0;R<b.length;R++)if(b[R].visible){P=b[R];break}P&&P[c]&&(d.type=f(P[c],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),"-"===d.type?d.type="linear":m.type=d.type}return d.type}$.exports=function(d,A,b){T(d,A,b,{type:s.name,attributes:l,handleDefaults:h,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:b,layoutOut:A})}},1785:($,K,e)=>{"use strict";var M=e(21572),I=e(80791),t=e(97799),T=e(5228),n=T.strRotate,i=T.strTranslate,u=e(8416),a=e(27630),r=e(31556),o=e(91464),v=e(49704),p=e(94046),f=e(73332).doAutoRange,l=e(54078),y=e(25429),s=e(76863),x=e(77875),h=e(48356).prepSelect,g=e(48356).selectOnClick,m=e(48356).clearOutline,d=e(93720),A=e(77749),b=e(88845).redrawReglTraces,c=e(94598).MID_SHIFT,S=e(81789),w=e(92275),E=e(13988),P=E.smith,R=E.reactanceArc,F=E.resistanceArc,_=E.smithTransform,z=T._,D=T.mod,k=T.deg2rad,O=T.rad2deg;function U(te,q,oe){this.isSmith=oe||!1,this.id=q,this.gd=te,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var ie=te._fullLayout,V="clip"+ie._uid+q;this.clipIds.forTraces=V+"-for-traces",this.clipPaths.forTraces=ie._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=ie["_"+(oe?"smith":"polar")+"layer"].append("g").attr("class",q),this.getHole=function(Y){return this.isSmith?0:Y.hole},this.getSector=function(Y){return this.isSmith?[0,360]:Y.sector},this.getRadial=function(Y){return this.isSmith?Y.realaxis:Y.radialaxis},this.getAngular=function(Y){return this.isSmith?Y.imaginaryaxis:Y.angularaxis},oe||(this.radialTickLayout=null,this.angularTickLayout=null)}var H=U.prototype;function j(te){var q=te.ticks+String(te.ticklen)+String(te.showticklabels);return"side"in te&&(q+=te.side),q}function W(te,q){return q[T.findIndexOfMin(q,function(V){return T.angleDist(te,V)})]}function B(te,q,oe){return q?(te.attr("display",null),te.attr(oe)):te&&te.attr("display","none"),te}$.exports=function(q,oe,ie){return new U(q,oe,ie)},H.plot=function(te,q){for(var oe=this,ie=q[oe.id],V=!1,Y=0;Y<te.length;Y++){if(!1===te[Y][0].trace.cliponaxis){V=!0;break}}oe._hasClipOnAxisFalse=V,oe.updateLayers(q,ie),oe.updateLayout(q,ie),r.generalUpdatePerTraceModule(oe.gd,oe,te,ie),oe.updateFx(q,ie),oe.isSmith&&(delete ie.realaxis.range,delete ie.imaginaryaxis.range)},H.updateLayers=function(te,q){var oe=this,ie=oe.isSmith,V=oe.layers,Y=oe.getRadial(q),ae=oe.getAngular(q),X=S.layerNames,J=X.indexOf("frontplot"),ue=X.slice(0,J),re="below traces"===ae.layer,ne="below traces"===Y.layer;re&&ue.push("angular-line"),ne&&ue.push("radial-line"),re&&ue.push("angular-axis"),ne&&ue.push("radial-axis"),ue.push("frontplot"),re||ue.push("angular-line"),ne||ue.push("radial-line"),re||ue.push("angular-axis"),ne||ue.push("radial-axis");var se=(ie?"smith":"polar")+"sublayer",de=oe.framework.selectAll("."+se).data(ue,String);de.enter().append("g").attr("class",function(be){return se+" "+be}).each(function(be){var De=V[be]=M.select(this);switch(be){case"frontplot":ie||De.append("g").classed("barlayer",!0),De.append("g").classed("scatterlayer",!0);break;case"backplot":De.append("g").classed("maplayer",!0);break;case"plotbg":V.bg=De.append("path");break;case"radial-grid":case"angular-grid":De.style("fill","none");break;case"radial-line":De.append("line").style("fill","none");break;case"angular-line":De.append("path").style("fill","none")}}),de.order()},H.updateLayout=function(te,q){var oe=this,ie=oe.layers,V=te._size,Y=oe.getRadial(q),ae=oe.getAngular(q),X=q.domain.x,J=q.domain.y;oe.xOffset=V.l+V.w*X[0],oe.yOffset=V.t+V.h*(1-J[1]);var ue=oe.xLength=V.w*(X[1]-X[0]),re=oe.yLength=V.h*(J[1]-J[0]),ne=oe.getSector(q);oe.sectorInRad=ne.map(k);var Ce,Le,Fe,ke,ze,se=oe.sectorBBox=function ee(te){var re,ne,se,de,q=te[0],oe=te[1],ie=oe-q,V=D(q,360),Y=V+ie,ae=Math.cos(k(V)),X=Math.sin(k(V)),J=Math.cos(k(Y)),ue=Math.sin(k(Y));return de=V<=90&&Y>=90||V>90&&Y>=450?1:X<=0&&ue<=0?0:Math.max(X,ue),re=V<=180&&Y>=180||V>180&&Y>=540?-1:ae>=0&&J>=0?0:Math.min(ae,J),ne=V<=270&&Y>=270||V>270&&Y>=630?-1:X>=0&&ue>=0?0:Math.min(X,ue),se=Y>=360?1:ae<=0&&J<=0?0:Math.max(ae,J),[re,ne,se,de]}(ne),de=se[2]-se[0],be=se[3]-se[1],De=re/ue,_e=Math.abs(be/de);De>_e?(Ce=ue,ze=(re-(Le=ue*_e))/V.h/2,Fe=[X[0],X[1]],ke=[J[0]+ze,J[1]-ze]):(Le=re,ze=(ue-(Ce=re/_e))/V.w/2,Fe=[X[0]+ze,X[1]-ze],ke=[J[0],J[1]]),oe.xLength2=Ce,oe.yLength2=Le,oe.xDomain2=Fe,oe.yDomain2=ke;var Bt,Pe=oe.xOffset2=V.l+V.w*Fe[0],Ie=oe.yOffset2=V.t+V.h*(1-ke[1]),Qe=oe.radius=Ce/de,at=oe.innerRadius=oe.getHole(q)*Qe,Be=oe.cx=Pe-Qe*se[0],Ne=oe.cy=Ie+Qe*se[3],nt=oe.cxx=Be-Pe,ct=oe.cyy=Ne-Ie,mt=Y.side;"counterclockwise"===mt?(Bt=mt,mt="top"):"clockwise"===mt&&(Bt=mt,mt="bottom"),oe.radialAxis=oe.mockAxis(te,q,Y,{_id:"x",side:mt,_trueSide:Bt,domain:[at/V.w,Qe/V.w]}),oe.angularAxis=oe.mockAxis(te,q,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),oe.doAutoRange(te,q),oe.updateAngularAxis(te,q),oe.updateRadialAxis(te,q),oe.updateRadialAxisTitle(te,q),oe.xaxis=oe.mockCartesianAxis(te,q,{_id:"x",domain:Fe}),oe.yaxis=oe.mockCartesianAxis(te,q,{_id:"y",domain:ke});var Rt=oe.pathSubplot();oe.clipPaths.forTraces.select("path").attr("d",Rt).attr("transform",i(nt,ct)),ie.frontplot.attr("transform",i(Pe,Ie)).call(a.setClipUrl,oe._hasClipOnAxisFalse?null:oe.clipIds.forTraces,oe.gd),ie.bg.attr("d",Rt).attr("transform",i(Be,Ne)).call(u.fill,q.bgcolor)},H.mockAxis=function(te,q,oe,ie){var V=T.extendFlat({},oe,ie);return p(V,q,te),V},H.mockCartesianAxis=function(te,q,oe){var ie=this,V=ie.isSmith,Y=oe._id,ae=T.extendFlat({type:"linear"},oe);v(ae,te);var X={x:[0,2],y:[1,3]};return ae.setRange=function(){var J=ie.sectorBBox,ue=X[Y],re=ie.radialAxis._rl,ne=(re[1]-re[0])/(1-ie.getHole(q));ae.range=[J[ue[0]]*ne,J[ue[1]]*ne]},ae.isPtWithinRange="x"!==Y||V?function(){return!0}:function(J){return ie.isPtInside(J)},ae.setRange(),ae.setScale(),ae},H.doAutoRange=function(te,q){var ie=this.gd,V=this.radialAxis,Y=this.getRadial(q);f(ie,V);var ae=V.range;if(Y.range=ae.slice(),Y._input.range=ae.slice(),V._rl=[V.r2l(ae[0],null,"gregorian"),V.r2l(ae[1],null,"gregorian")],void 0!==V.minallowed){var X=V.r2l(V.minallowed);V._rl[0]>V._rl[1]?V._rl[1]=Math.max(V._rl[1],X):V._rl[0]=Math.max(V._rl[0],X)}if(void 0!==V.maxallowed){var J=V.r2l(V.maxallowed);V._rl[0]<V._rl[1]?V._rl[1]=Math.min(V._rl[1],J):V._rl[0]=Math.min(V._rl[0],J)}},H.updateRadialAxis=function(te,q){var oe=this,ie=oe.gd,V=oe.layers,Y=oe.radius,ae=oe.innerRadius,X=oe.cx,J=oe.cy,ue=oe.getRadial(q),re=D(oe.getSector(q)[0],360),ne=oe.radialAxis,se=ae<Y,de=oe.isSmith;de||(oe.fillViewInitialKey("radialaxis.angle",ue.angle),oe.fillViewInitialKey("radialaxis.range",ne.range.slice()),ne.setGeometry()),"auto"===ne.tickangle&&re>90&&re<=270&&(ne.tickangle=180);var be=de?function(Qe){var at=_(oe,P([Qe.x,0]));return i(at[0]-X,at[1]-J)}:function(Qe){return i(ne.l2p(Qe.x)+ae,0)},De=de?function(Qe){return F(oe,Qe.x,-1/0,1/0)}:function(Qe){return oe.pathArc(ne.r2p(Qe.x)+ae)},_e=j(ue);if(oe.radialTickLayout!==_e&&(V["radial-axis"].selectAll(".xtick").remove(),oe.radialTickLayout=_e),se){ne.setScale();var Ce=0,Le=de?(ne.tickvals||[]).filter(function(Qe){return Qe>=0}).map(function(Qe){return o.tickText(ne,Qe,!0,!1)}):o.calcTicks(ne),Fe=de?Le:o.clipEnds(ne,Le),ke=o.getTickSigns(ne)[2];de&&(("top"===ne.ticks&&"bottom"===ne.side||"bottom"===ne.ticks&&"top"===ne.side)&&(ke=-ke),"top"===ne.ticks&&"top"===ne.side&&(Ce=-ne.ticklen),"bottom"===ne.ticks&&"bottom"===ne.side&&(Ce=ne.ticklen)),o.drawTicks(ie,ne,{vals:Le,layer:V["radial-axis"],path:o.makeTickPath(ne,0,ke),transFn:be,crisp:!1}),o.drawGrid(ie,ne,{vals:Fe,layer:V["radial-grid"],path:De,transFn:T.noop,crisp:!1}),o.drawLabels(ie,ne,{vals:Le,layer:V["radial-axis"],transFn:be,labelFns:o.makeLabelFns(ne,Ce)})}var ze=oe.radialAxisAngle=oe.vangles?O(W(k(ue.angle),oe.vangles)):ue.angle,Pe=i(X,J),Ie=Pe+n(-ze);B(V["radial-axis"],se&&(ue.showticklabels||ue.ticks),{transform:Ie}),B(V["radial-grid"],se&&ue.showgrid,{transform:de?"":Pe}),B(V["radial-line"].select("line"),se&&ue.showline,{x1:de?-Y:ae,y1:0,x2:Y,y2:0,transform:Ie}).attr("stroke-width",ue.linewidth).call(u.stroke,ue.linecolor)},H.updateRadialAxisTitle=function(te,q,oe){if(!this.isSmith){var ie=this,V=ie.gd,Y=ie.radius,ae=ie.cx,X=ie.cy,J=ie.getRadial(q),ue=ie.id+"title",re=0;if(J.title){var ne=a.bBox(ie.layers["radial-axis"].node()).height,se=J.title.font.size,de=J.side;re="top"===de?se:"counterclockwise"===de?-(ne+.4*se):ne+.8*se}var be=void 0!==oe?oe:ie.radialAxisAngle,De=k(be),_e=Math.cos(De),Ce=Math.sin(De),Le=ae+Y/2*_e+re*Ce,Fe=X-Y/2*Ce+re*_e;ie.layers["radial-axis-title"]=x.draw(V,ue,{propContainer:J,propName:ie.id+".radialaxis.title",placeholder:z(V,"Click to enter radial axis title"),attributes:{x:Le,y:Fe,"text-anchor":"middle"},transform:{rotate:-be}})}},H.updateAngularAxis=function(te,q){var oe=this,ie=oe.gd,V=oe.layers,Y=oe.radius,ae=oe.innerRadius,X=oe.cx,J=oe.cy,ue=oe.getAngular(q),re=oe.angularAxis,ne=oe.isSmith;ne||(oe.fillViewInitialKey("angularaxis.rotation",ue.rotation),re.setGeometry(),re.setScale());var se=ne?function(at){var Be=_(oe,P([0,at.x]));return Math.atan2(Be[0]-X,Be[1]-J)-Math.PI/2}:function(at){return re.t2g(at.x)};"linear"===re.type&&"radians"===re.thetaunit&&(re.tick0=O(re.tick0),re.dtick=O(re.dtick));var de=function(at){return i(X+Y*Math.cos(at),J-Y*Math.sin(at))},be=ne?function(at){var Be=_(oe,P([0,at.x]));return i(Be[0],Be[1])}:function(at){return de(se(at))},De=ne?function(at){var Be=_(oe,P([0,at.x])),Ne=Math.atan2(Be[0]-X,Be[1]-J)-Math.PI/2;return i(Be[0],Be[1])+n(-O(Ne))}:function(at){var Be=se(at);return de(Be)+n(-O(Be))},_e=ne?function(at){return R(oe,at.x,0,1/0)}:function(at){var Be=se(at),Ne=Math.cos(Be),nt=Math.sin(Be);return"M"+[X+ae*Ne,J-ae*nt]+"L"+[X+Y*Ne,J-Y*nt]},Le=o.makeLabelFns(re,0).labelStandoff,Fe={xFn:function(at){var Be=se(at);return Math.cos(Be)*Le},yFn:function(at){var Be=se(at),Ne=Math.sin(Be)>0?.2:1;return-Math.sin(Be)*(Le+at.fontSize*Ne)+Math.abs(Math.cos(Be))*(at.fontSize*c)},anchorFn:function(at){var Be=se(at),Ne=Math.cos(Be);return Math.abs(Ne)<.1?"middle":Ne>0?"start":"end"},heightFn:function(at,Be,Ne){var nt=se(at);return-.5*(1+Math.sin(nt))*Ne}},ke=j(ue);oe.angularTickLayout!==ke&&(V["angular-axis"].selectAll("."+re._id+"tick").remove(),oe.angularTickLayout=ke);var Pe,ze=ne?[1/0].concat(re.tickvals||[]).map(function(at){return o.tickText(re,at,!0,!1)}):o.calcTicks(re);if(ne&&(ze[0].text="\u221e",ze[0].fontSize*=1.75),"linear"===q.gridshape?(Pe=ze.map(se),T.angleDelta(Pe[0],Pe[1])<0&&(Pe=Pe.slice().reverse())):Pe=null,oe.vangles=Pe,"category"===re.type&&(ze=ze.filter(function(at){return T.isAngleInsideSector(se(at),oe.sectorInRad)})),re.visible){var Ie="inside"===re.ticks?-1:1,Qe=(re.linewidth||1)/2;o.drawTicks(ie,re,{vals:ze,layer:V["angular-axis"],path:"M"+Ie*Qe+",0h"+Ie*re.ticklen,transFn:De,crisp:!1}),o.drawGrid(ie,re,{vals:ze,layer:V["angular-grid"],path:_e,transFn:T.noop,crisp:!1}),o.drawLabels(ie,re,{vals:ze,layer:V["angular-axis"],repositionOnUpdate:!0,transFn:be,labelFns:Fe})}B(V["angular-line"].select("path"),ue.showline,{d:oe.pathSubplot(),transform:i(X,J)}).attr("stroke-width",ue.linewidth).call(u.stroke,ue.linecolor)},H.updateFx=function(te,q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(te),this.updateRadialDrag(te,q,0),this.updateRadialDrag(te,q,1)),this.updateHoverAndMainDrag(te))},H.updateHoverAndMainDrag=function(te){var Pe,Ie,q=this,oe=q.isSmith,ie=q.gd,V=q.layers,Y=te._zoomlayer,ae=S.MINZOOM,X=S.OFFEDGE,J=q.radius,ue=q.innerRadius,re=q.cx,ne=q.cy,se=q.cxx,de=q.cyy,be=q.sectorInRad,De=q.vangles,_e=q.radialAxis,Ce=w.clampTiny,Le=w.findXYatLength,Fe=w.findEnclosingVertexAngles,ke=S.cornerHalfWidth,ze=S.cornerLen/2,Qe=l.makeDragger(V,"path","maindrag",!1===te.dragmode?"none":"crosshair");M.select(Qe).attr("d",q.pathSubplot()).attr("transform",i(re,ne)),Qe.onmousemove=function(bt){s.hover(ie,bt,q.id),ie._fullLayout._lasthover=Qe,ie._fullLayout._hoversubplot=q.id},Qe.onmouseout=function(bt){ie._dragging||y.unhover(ie,bt)};var Be,Ne,nt,ct,mt,Bt,Rt,zt,St,at={element:Qe,gd:ie,subplot:q.id,plotinfo:{id:q.id,xaxis:q.xaxis,yaxis:q.yaxis},xaxes:[q.xaxis],yaxes:[q.yaxis]};function Xt(bt,Pt){return Math.sqrt(bt*bt+Pt*Pt)}function Mt(bt,Pt){return Xt(bt-se,Pt-de)}function st(bt,Pt){return Math.atan2(de-Pt,bt-se)}function Se(bt,Pt){return[bt*Math.cos(Pt),bt*Math.sin(-Pt)]}function pe(bt,Pt){if(0===bt)return q.pathSector(2*ke);var cr=ze/bt,Sr=Pt-cr,Kr=Pt+cr,It=Math.max(0,Math.min(bt,J)),$t=It-ke,kr=It+ke;return"M"+Se($t,Sr)+"A"+[$t,$t]+" 0,0,0 "+Se($t,Kr)+"L"+Se(kr,Kr)+"A"+[kr,kr]+" 0,0,1 "+Se(kr,Sr)+"Z"}function ge(bt,Pt,cr){if(0===bt)return q.pathSector(2*ke);var kr,lr,Sr=Se(bt,Pt),Kr=Se(bt,cr),It=Ce((Sr[0]+Kr[0])/2),$t=Ce((Sr[1]+Kr[1])/2);if(It&&$t){var rt=$t/It,$e=-1/rt,ht=Le(ke,rt,It,$t);kr=Le(ze,$e,ht[0][0],ht[0][1]),lr=Le(ze,$e,ht[1][0],ht[1][1])}else{var gt,ft;$t?(gt=ze,ft=ke):(gt=ke,ft=ze),kr=[[It-gt,$t-ft],[It+gt,$t-ft]],lr=[[It-gt,$t+ft],[It+gt,$t+ft]]}return"M"+kr.join("L")+"L"+lr.reverse().join("L")+"Z"}function we(bt,Pt){return Pt=Math.max(Math.min(Pt,J),ue),bt<X?bt=0:J-bt<X?bt=J:Pt<X?Pt=0:J-Pt<X&&(Pt=J),Math.abs(Pt-bt)>ae?(bt<Pt?(nt=bt,ct=Pt):(nt=Pt,ct=bt),!0):(nt=null,ct=null,!1)}function He(bt,Pt){bt=bt||mt,Pt=Pt||"M0,0Z",zt.attr("d",bt),St.attr("d",Pt),l.transitionZoombox(zt,St,Bt,Rt),Bt=!0;var cr={};Dt(cr),ie.emit("plotly_relayouting",cr)}function Xe(bt,Pt){var kr,lr,cr=Be+(bt*=Pe),Sr=Ne+(Pt*=Ie),Kr=Mt(Be,Ne),It=Math.min(Mt(cr,Sr),J),$t=st(Be,Ne);we(Kr,It)&&(kr=mt+q.pathSector(ct),nt&&(kr+=q.pathSector(nt)),lr=pe(nt,$t)+pe(ct,$t)),He(kr,lr)}function ut(bt,Pt,cr,Sr){var Kr=w.findIntersectionXY(cr,Sr,cr,[bt-se,de-Pt]);return Xt(Kr[0],Kr[1])}function Ze(bt,Pt){var $e,ht,cr=Be+bt,Sr=Ne+Pt,Kr=st(Be,Ne),It=st(cr,Sr),$t=Fe(Kr,De),kr=Fe(It,De);we(ut(Be,Ne,$t[0],$t[1]),Math.min(ut(cr,Sr,kr[0],kr[1]),J))&&($e=mt+q.pathSector(ct),nt&&($e+=q.pathSector(nt)),ht=[ge(nt,$t[0],$t[1]),ge(ct,$t[0],$t[1])].join(" ")),He($e,ht)}function qe(){if(l.removeZoombox(ie),null!==nt&&null!==ct){var bt={};Dt(bt),l.showDoubleClickNotifier(ie),t.call("_guiRelayout",ie,bt)}}function Dt(bt){var Pt=_e._rl,cr=(Pt[1]-Pt[0])/(1-ue/J)/J,Sr=[Pt[0]+(nt-ue)*cr,Pt[0]+(ct-ue)*cr];bt[q.id+".radialaxis.range"]=Sr}function Ft(bt,Pt){var cr=ie._fullLayout.clickmode;if(l.removeZoombox(ie),2===bt){var Sr={};for(var Kr in q.viewInitial)Sr[q.id+"."+Kr]=q.viewInitial[Kr];ie.emit("plotly_doubleclick",null),t.call("_guiRelayout",ie,Sr)}cr.indexOf("select")>-1&&1===bt&&g(Pt,ie,[q.xaxis],[q.yaxis],q.id,at),cr.indexOf("event")>-1&&s.click(ie,Pt,q.id)}at.prepFn=function(bt,Pt,cr){var Sr=ie._fullLayout.dragmode,Kr=Qe.getBoundingClientRect();ie._fullLayout._calcInverseTransform(ie);var It=ie._fullLayout._invTransform;Pe=ie._fullLayout._invScaleX,Ie=ie._fullLayout._invScaleY;var $t=T.apply3DTransform(It)(Pt-Kr.left,cr-Kr.top);if(Be=$t[0],Ne=$t[1],De){var kr=w.findPolygonOffset(J,be[0],be[1],De);Be+=se+kr[0],Ne+=de+kr[1]}switch(Sr){case"zoom":at.clickFn=Ft,oe||(at.moveFn=De?Ze:Xe,at.doneFn=qe,function Oe(){nt=null,ct=null,mt=q.pathSubplot(),Bt=!1;var bt=ie._fullLayout[q.id];Rt=I(bt.bgcolor).getLuminance(),(zt=l.makeZoombox(Y,Rt,re,ne,mt)).attr("fill-rule","evenodd"),St=l.makeCorners(Y,re,ne),m(ie)}());break;case"select":case"lasso":h(bt,Pt,cr,at,Sr)}},y.init(at)},H.updateRadialDrag=function(te,q,oe){var ie=this,V=ie.gd,Y=ie.layers,ae=ie.radius,X=ie.innerRadius,J=ie.cx,ue=ie.cy,re=ie.radialAxis,ne=S.radialDragBoxSize,se=ne/2;if(re.visible){var Fe,ke,ze,de=k(ie.radialAxisAngle),be=re._rl,De=be[0],_e=be[1],Ce=be[oe],Le=.75*(be[1]-be[0])/(1-ie.getHole(q))/ae;oe?(Fe=J+(ae+se)*Math.cos(de),ke=ue-(ae+se)*Math.sin(de),ze="radialdrag"):(Fe=J+(X-se)*Math.cos(de),ke=ue-(X-se)*Math.sin(de),ze="radialdrag-inner");var Qe,at,Be,Pe=l.makeRectDragger(Y,ze,"crosshair",-se,-se,ne,ne),Ie={element:Pe,gd:V};!1===te.dragmode&&(Ie.dragmode=!1),B(M.select(Pe),re.visible&&X<ae,{transform:i(Fe,ke)}),Ie.prepFn=function(){Qe=null,at=null,Be=null,Ie.moveFn=Ne,Ie.doneFn=ct,m(V)},Ie.clampFn=function(Rt,zt){return Math.sqrt(Rt*Rt+zt*zt)<S.MINDRAG&&(Rt=0,zt=0),[Rt,zt]},y.init(Ie)}function Ne(Rt,zt){if(Qe)Qe(Rt,zt);else{var St=[Rt,-zt],Xt=[Math.cos(de),Math.sin(de)],Mt=Math.abs(T.dot(St,Xt)/Math.sqrt(T.dot(St,St)));isNaN(Mt)||(Qe=Mt<.5?mt:Bt)}var st={};(function nt(Rt){null!==at?Rt[ie.id+".radialaxis.angle"]=at:null!==Be&&(Rt[ie.id+".radialaxis.range["+oe+"]"]=Be)})(st),V.emit("plotly_relayouting",st)}function ct(){null!==at?t.call("_guiRelayout",V,ie.id+".radialaxis.angle",at):null!==Be&&t.call("_guiRelayout",V,ie.id+".radialaxis.range["+oe+"]",Be)}function mt(Rt,zt){if(0!==oe){var St=Fe+Rt,Xt=ke+zt;at=Math.atan2(ue-Xt,St-J),ie.vangles&&(at=W(at,ie.vangles)),at=O(at);var Mt=i(J,ue)+n(-at);Y["radial-axis"].attr("transform",Mt),Y["radial-line"].select("line").attr("transform",Mt);var st=ie.gd._fullLayout,Se=st[ie.id];ie.updateRadialAxisTitle(st,Se,at)}}function Bt(Rt,zt){var St=T.dot([Rt,-zt],[Math.cos(de),Math.sin(de)]);if(Be=Ce-Le*St,Le>0==(oe?Be>De:Be<_e)){var Xt=V._fullLayout,Mt=Xt[ie.id];re.range[oe]=Be,re._rl[oe]=Be,ie.updateRadialAxis(Xt,Mt),ie.xaxis.setRange(),ie.xaxis.setScale(),ie.yaxis.setRange(),ie.yaxis.setScale();var st=!1;for(var Se in ie.traceHash){var pe=ie.traceHash[Se],ge=T.filterVisible(pe);pe[0][0].trace._module.plot(V,ie,ge,Mt),t.traceIs(Se,"gl")&&ge.length&&(st=!0)}st&&(A(V),b(V))}else Be=null}},H.updateAngularDrag=function(te){var q=this,oe=q.gd,ie=q.layers,V=q.radius,Y=q.angularAxis,ae=q.cx,X=q.cy,J=q.cxx,ue=q.cyy,re=S.angularDragBoxSize,ne=l.makeDragger(ie,"path","angulardrag",!1===te.dragmode?"none":"move"),se={element:ne,gd:oe};function de(Be,Ne){return Math.atan2(ue+re-Ne,Be-J-re)}!1===te.dragmode?se.dragmode=!1:M.select(ne).attr("d",q.pathAnnulus(V,V+re)).attr("transform",i(ae,X)).call(d,"move");var Ce,Le,Fe,ke,ze,Pe,be=ie.frontplot.select(".scatterlayer").selectAll(".trace"),De=be.selectAll(".point"),_e=be.selectAll(".textpoint");function Ie(Be,Ne){var nt=q.gd._fullLayout,ct=nt[q.id],Rt=de(Ce+Be*te._invScaleX,Le+Ne*te._invScaleY),zt=O(Rt-Pe);if(ke=Fe+zt,ie.frontplot.attr("transform",i(q.xOffset2,q.yOffset2)+n([-zt,J,ue])),q.vangles){ze=q.radialAxisAngle+zt;var St=i(ae,X)+n(-zt),Xt=i(ae,X)+n(-ze);ie.bg.attr("transform",St),ie["radial-grid"].attr("transform",St),ie["radial-axis"].attr("transform",Xt),ie["radial-line"].select("line").attr("transform",Xt),q.updateRadialAxisTitle(nt,ct,ze)}else q.clipPaths.forTraces.select("path").attr("transform",i(J,ue)+n(zt));De.each(function(){var we=M.select(this),He=a.getTranslate(we);we.attr("transform",i(He.x,He.y)+n([zt]))}),_e.each(function(){var we=M.select(this),He=we.select("text"),Xe=a.getTranslate(we);we.attr("transform",n([zt,He.attr("x"),He.attr("y")])+i(Xe.x,Xe.y))}),Y.rotation=T.modHalf(ke,360),q.updateAngularAxis(nt,ct),q._hasClipOnAxisFalse&&!T.isFullCircle(q.sectorInRad)&&be.call(a.hideOutsideRangePoints,q);var Mt=!1;for(var st in q.traceHash)if(t.traceIs(st,"gl")){var Se=q.traceHash[st],pe=T.filterVisible(Se);Se[0][0].trace._module.plot(oe,q,pe,ct),pe.length&&(Mt=!0)}Mt&&(A(oe),b(oe));var Oe={};Qe(Oe),oe.emit("plotly_relayouting",Oe)}function Qe(Be){Be[q.id+".angularaxis.rotation"]=ke,q.vangles&&(Be[q.id+".radialaxis.angle"]=ze)}function at(){_e.select("text").attr("transform",null);var Be={};Qe(Be),t.call("_guiRelayout",oe,Be)}se.prepFn=function(Be,Ne,nt){var ct=te[q.id];Fe=ct.angularaxis.rotation;var mt=ne.getBoundingClientRect();Ce=Ne-mt.left,Le=nt-mt.top,oe._fullLayout._calcInverseTransform(oe);var Bt=T.apply3DTransform(te._invTransform)(Ce,Le);Ce=Bt[0],Le=Bt[1],Pe=de(Ce,Le),se.moveFn=Ie,se.doneFn=at,m(oe)},q.vangles&&!T.isFullCircle(q.sectorInRad)&&(se.prepFn=T.noop,d(M.select(ne),null)),y.init(se)},H.isPtInside=function(te){if(this.isSmith)return!0;var q=this.sectorInRad,oe=this.vangles,ie=this.angularAxis.c2g(te.theta),V=this.radialAxis,Y=V.c2l(te.r),ae=V._rl;return(oe?w.isPtInsidePolygon:T.isPtInsideSector)(Y,ie,ae,q,oe)},H.pathArc=function(te){var q=this.sectorInRad,oe=this.vangles;return(oe?w.pathPolygon:T.pathArc)(te,q[0],q[1],oe)},H.pathSector=function(te){var q=this.sectorInRad,oe=this.vangles;return(oe?w.pathPolygon:T.pathSector)(te,q[0],q[1],oe)},H.pathAnnulus=function(te,q){var oe=this.sectorInRad,ie=this.vangles;return(ie?w.pathPolygonAnnulus:T.pathAnnulus)(te,q,oe[0],oe[1],ie)},H.pathSubplot=function(){var te=this.innerRadius,q=this.radius;return te?this.pathAnnulus(te,q):this.pathSector(q)},H.fillViewInitialKey=function(te,q){te in this.viewInitial||(this.viewInitial[te]=q)}},94046:($,K,e)=>{"use strict";var M=e(5228),I=e(49704),t=M.deg2rad,T=M.rad2deg;$.exports=function(o,v,p){switch(I(o,p),o._id){case"x":case"radialaxis":!function n(r,o){var v=o._subplot;r.setGeometry=function(){var p=r._rl[0],f=r._rl[1],l=v.innerRadius,y=(v.radius-l)/(f-p),s=l/y,x=p>f?function(h){return h<=0}:function(h){return h>=0};r.c2g=function(h){var g=r.c2l(h)-p;return(x(g)?g:0)+s},r.g2c=function(h){return r.l2c(h+p-s)},r.g2p=function(h){return h*y},r.c2p=function(h){return r.g2p(r.c2g(h))}}}(o,v);break;case"angularaxis":!function a(r,o){var v=r.type;if("linear"===v){var p=r.d2c,f=r.c2d;r.d2c=function(l,y){return function i(r,o){return"degrees"===o?t(r):r}(p(l),y)},r.c2d=function(l,y){return f(function u(r,o){return"degrees"===o?T(r):r}(l,y))}}r.makeCalcdata=function(l,y){var h,g,s=l[y],x=l._length,m=function(S){return r.d2c(S,l.thetaunit)};if(s)for(h=new Array(x),g=0;g<x;g++)h[g]=m(s[g]);else{var d=y+"0",A="d"+y,b=d in l?m(l[d]):0,c=l[A]?m(l[A]):(r.period||2*Math.PI)/x;for(h=new Array(x),g=0;g<x;g++)h[g]=b+g*c}return h},r.setGeometry=function(){var m,d,A,b,l=o.sector,y=l.map(t),s={clockwise:-1,counterclockwise:1}[r.direction],x=t(r.rotation),h=function(w){return s*w+x},g=function(w){return(w-x)/s};switch(v){case"linear":d=m=M.identity,b=t,A=T,r.range=M.isFullCircle(y)?[l[0],l[0]+360]:y.map(g).map(T);break;case"category":var c=r._categories.length,S=r.period?Math.max(r.period,c):c;0===S&&(S=1),d=b=function(w){return 2*w*Math.PI/S},m=A=function(w){return w*S/Math.PI/2},r.range=[0,S]}r.c2g=function(w){return h(d(w))},r.g2c=function(w){return m(g(w))},r.t2g=function(w){return h(b(w))},r.g2t=function(w){return A(g(w))}}}(o,v)}}},52979:$=>{"use strict";$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},13988:$=>{"use strict";function K(n){return n<0?-1:n>0?1:0}function e(n){var i=n[0],u=n[1];if(!isFinite(i)||!isFinite(u))return[1,0];var a=(i+1)*(i+1)+u*u;return[(i*i+u*u-1)/a,2*u/a]}function M(n,i){var u=i[0],a=i[1];return[u*n.radius+n.cx,-a*n.radius+n.cy]}function I(n,i){return i*n.radius}$.exports={smith:e,reactanceArc:function t(n,i,u,a){var r=M(n,e([u,i])),o=r[0],v=r[1],p=M(n,e([a,i])),f=p[0],l=p[1];if(0===i)return["M"+o+","+v,"L"+f+","+l].join(" ");var y=I(n,1/Math.abs(i));return["M"+o+","+v,"A"+y+","+y+" 0 0,"+(i<0?1:0)+" "+f+","+l].join(" ")},resistanceArc:function T(n,i,u,a){var r=I(n,1/(i+1)),o=M(n,e([i,u])),v=o[0],p=o[1],f=M(n,e([i,a])),l=f[0],y=f[1];if(K(u)!==K(a)){var s=M(n,e([i,0]));return["M"+v+","+p,"A"+r+","+r+" 0 0,"+(0<u?0:1)+" "+s[0]+","+s[1],"A"+r+","+r+" 0 0,"+(a<0?0:1)+l+","+y].join(" ")}return["M"+v+","+p,"A"+r+","+r+" 0 0,"+(a<u?0:1)+" "+l+","+y].join(" ")},smithTransform:M}},49197:($,K,e)=>{"use strict";var M=e(65644).AU,I=e(5228).counterRegex,t=e(1785),T=e(52979),n=T.attr,i=T.name,u=I(i),a={};a[n]={valType:"subplotid",dflt:i,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a smith subplot.","If *smith* (the default value), the data refer to `layout.smith`.","If *smith2*, the data refer to `layout.smith2`, and so on."].join(" ")},$.exports={attr:n,name:i,idRoot:i,idRegex:u,attrRegex:u,attributes:a,layoutAttributes:e(83935),supplyLayoutDefaults:e(78292),plot:function r(v){for(var p=v._fullLayout,f=v.calcdata,l=p._subplots[i],y=0;y<l.length;y++){var s=l[y],x=M(f,i,s),h=p[s]._subplot;h||(h=t(v,s,!0),p[s]._subplot=h),h.plot(x,p,v._promises)}},clean:function o(v,p,f,l){for(var y=l._subplots[i]||[],s=0;s<y.length;s++){var x=y[s],h=l[x]._subplot;if(!p[x]&&h)for(var g in h.framework.remove(),h.clipPaths)h.clipPaths[g].remove()}},toSVG:e(24329).toSVG}},83935:($,K,e)=>{"use strict";var M=e(36593),I=e(38330),t=e(47472).Y,T=e(5228).extendFlat,n=e(71859).overrideAll,i=n({color:I.color,showline:T({},I.showline,{dflt:!0}),linecolor:I.linecolor,linewidth:I.linewidth,showgrid:T({},I.showgrid,{dflt:!0}),gridcolor:I.gridcolor,gridwidth:I.gridwidth,griddash:I.griddash},"plot","from-root"),u=n({ticklen:I.ticklen,tickwidth:T({},I.tickwidth,{dflt:2}),tickcolor:I.tickcolor,showticklabels:I.showticklabels,labelalias:I.labelalias,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,tickfont:I.tickfont,tickformat:I.tickformat,hoverformat:I.hoverformat,layer:I.layer},"plot","from-root"),a=T({visible:T({},I.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot",description:"Sets the values at which ticks on this axis appear."},tickangle:T({},I.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *top* (*bottom*), this axis' are drawn above (below)","the axis line."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of real axis line","the tick and tick labels appear."].join(" ")},editType:"calc"},i,u),r=T({visible:T({},I.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot",description:["Sets the values at which ticks on this axis appear.","Defaults to `realaxis.tickvals` plus the same as negatives and zero."].join(" ")},ticks:I.ticks,editType:"calc"},i,u);$.exports={domain:t({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background,description:"Set the background color of the subplot"},realaxis:a,imaginaryaxis:r,editType:"calc"}},78292:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(96906),T=e(11435),n=e(65644).NG,i=e(72323),u=e(85357),a=e(18696),r=e(49704),o=e(83935),v=e(52979),p=v.axisNames,f=function y(s,x){var h={};return function(g){var m=x?x(g):g;if(m in h)return h[m];var d=s(g);return h[m]=d,d}}(function(s){return M.isTypedArray(s)&&(s=Array.from(s)),s.slice().reverse().map(function(x){return-x}).concat([0]).concat(s)},String);function l(s,x,h,g){var m=h("bgcolor");g.bgColor=I.combine(m,g.paper_bgcolor);var b,d=n(g.fullData,v.name,g.id),A=g.layoutOut;function c(H,j){return h(b+"."+H,j)}for(var S=0;S<p.length;S++){b=p[S],M.isPlainObject(s[b])||(s[b]={});var w=s[b],E=t.newContainer(x,b);E._id=E._name=b,E._attr=g.id+"."+b,E._traceIndices=d.map(function(H){return H._expandedIndex});var P=c("visible");if(E.type="linear",r(E,A),i(w,E,c,E.type),P){var R="realaxis"===b;if(R&&c("side"),R)c("tickvals");else c("tickvals",f(x.realaxis.tickvals||o.realaxis.tickvals.dflt));M.isTypedArray(E.tickvals)&&(E.tickvals=Array.from(E.tickvals));var _,z,D,k,O=g.font||{};P&&(z=(_=c("color"))===w.color?_:O.color,D=O.size,k=O.family),u(w,E,c,E.type,{noTicklabelstep:!0,noAng:!R,noExp:!0,font:{color:z,size:D,family:k}}),M.coerce2(s,x,o,b+".ticklen"),M.coerce2(s,x,o,b+".tickwidth"),M.coerce2(s,x,o,b+".tickcolor",x.color),c("ticks")||(delete x[b].ticklen,delete x[b].tickwidth,delete x[b].tickcolor),a(w,E,c,{dfltColor:_,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o[b]}),c("layer")}c("hoverformat"),delete E.type,E._input=w}}$.exports=function(x,h,g){T(x,h,g,{noUirevision:!0,type:v.name,attributes:o,handleDefaults:l,font:h.font,paper_bgcolor:h.paper_bgcolor,fullData:g,layoutOut:h})}},11435:($,K,e)=>{"use strict";var M=e(5228),I=e(96906),t=e(47472).c;$.exports=function(n,i,u,a){var s,x,r=a.type,o=a.attributes,v=a.handleDefaults,p=a.partition||"x",f=i._subplots[r],l=f.length,y=l&&f[0].replace(/\d+$/,"");function h(A,b){return M.coerce(s,x,o,A,b)}for(var g=0;g<l;g++){var m=f[g];s=n[m]?n[m]:n[m]={},x=I.newContainer(i,m,y),a.noUirevision||h("uirevision",i.uirevision);var d={};d[p]=[g/l,(g+1)/l],t(x,i,h,d),a.id=m,v(s,x,h,a)}}},9430:($,K,e)=>{"use strict";var M=e(5329),I=M.FORMAT_LINK,t=M.DATE_FORMAT_LINK;function T(u){return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(u&&u.supportOther?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',I,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',t,"for details on the date formatting syntax."].join(" ")}function i(u){var a=u.description?" "+u.description:"",r=u.keys||[];if(r.length>0){for(var o=[],v=0;v<r.length;v++)o[v]="`"+r[v]+"`";a+="Finally, the template string has access to ",a=1===r.length?a+"variable "+o[0]:a+"variables "+o.slice(0,-1).join(", ")+" and "+o.slice(-1)+"."}return a}K.fF=function(u,a){u=u||{};var r=i(a=a||{}),o={valType:"string",dflt:"",editType:u.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",T({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return!1!==u.arrayOk&&(o.arrayOk=!0),o},K.si=function(u,a){u=u||{};var r=i(a=a||{}),o={valType:"string",dflt:"",editType:u.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",T(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",r].join(" ")};return!1!==u.arrayOk&&(o.arrayOk=!0),o},K.R=function(u,a){a=a||{};var r=(u=u||{}).newshape?"new ":"",o=i(a);return{valType:"string",dflt:"",editType:u.editType||"arraydraw",description:["Template string used for rendering the "+r+"shape's label.","Note that this will override `text`.",["Variables are inserted using %{variable},",'for example "x0: %{x0}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{x0:$.2f}". See',I,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{x0|%m %b %Y}". See',t,"for details on the date formatting syntax.","A single multiplication or division operation may be applied to numeric variables, and combined with",'d3 number formatting, for example "Length in cm: %{x0*2.54}", "%{slope*60:.1f} meters per second."',"For log axes, variable values are given in log units.","For date axes, x/y coordinate variables and center variables use datetimes, while all other variable values use values in ms."].join(" "),o].join(" ")}}},35421:($,K,e)=>{"use strict";var M=e(94831),I=e(65644).AU,t=e(5228).counterRegex,T="ternary";K.name=T;var n=K.attr="subplot";K.idRoot=T,K.idRegex=K.attrRegex=t(T),(K.attributes={})[n]={valType:"subplotid",dflt:"ternary",editType:"calc",description:["Sets a reference between this trace's data coordinates and","a ternary subplot.","If *ternary* (the default value), the data refer to `layout.ternary`.","If *ternary2*, the data refer to `layout.ternary2`, and so on."].join(" ")},K.layoutAttributes=e(44989),K.supplyLayoutDefaults=e(48147),K.plot=function(a){for(var r=a._fullLayout,o=a.calcdata,v=r._subplots[T],p=0;p<v.length;p++){var f=v[p],l=I(o,T,f),y=r[f]._subplot;y||(y=new M({id:f,graphDiv:a,container:r._ternarylayer.node()},r),r[f]._subplot=y),y.plot(l,r,a._promises)}},K.clean=function(u,a,r,o){for(var v=o._subplots[T]||[],p=0;p<v.length;p++){var f=v[p],l=o[f]._subplot;!a[f]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},44989:($,K,e)=>{"use strict";var M=e(36593),I=e(47472).Y,t=e(38330),T=e(71859).overrideAll,n=e(18836).extendFlat,i={title:{text:t.title.text,font:t.title.font},color:t.color,tickmode:t.minor.tickmode,nticks:n({},t.nticks,{dflt:6,min:1}),tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,ticklabelstep:t.ticklabelstep,showticklabels:t.showticklabels,labelalias:t.labelalias,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,showexponent:t.showexponent,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,tickformatstops:t.tickformatstops,hoverformat:t.hoverformat,showline:n({},t.showline,{dflt:!0}),linecolor:t.linecolor,linewidth:t.linewidth,showgrid:n({},t.showgrid,{dflt:!0}),gridcolor:t.gridcolor,gridwidth:t.gridwidth,griddash:t.griddash,layer:t.layer,min:{valType:"number",dflt:0,min:0,description:["The minimum value visible on this axis.","The maximum is determined by the sum minus the minimum","values of the other two axes. The full view corresponds to","all the minima set to zero."].join(" ")},_deprecated:{title:t._deprecated.title,titlefont:t._deprecated.titlefont}},u=$.exports=T({domain:I({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background,description:"Set the background color of the subplot"},sum:{valType:"number",dflt:1,min:0,description:["The number each triplet should sum to,","and the maximum range of each axis"].join(" ")},aaxis:i,baxis:i,caxis:i},"plot","from-root");u.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `min` and `title`,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")},u.aaxis.uirevision=u.baxis.uirevision=u.caxis.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `min`,","and `title` if in `editable: true` configuration.","Defaults to `ternary<N>.uirevision`."].join(" ")}},48147:($,K,e)=>{"use strict";var M=e(8416),I=e(96906),t=e(5228),T=e(11435),n=e(85357),i=e(72323),u=e(6705),a=e(61606),r=e(18696),o=e(44989),v=["aaxis","baxis","caxis"];function p(l,y,s,x){var h=s("bgcolor"),g=s("sum");x.bgColor=M.combine(h,x.paper_bgcolor);for(var m,d,A,b=0;b<v.length;b++)d=l[m=v[b]]||{},(A=I.newContainer(y,m))._name=m,f(d,A,x,y);var c=y.aaxis,S=y.baxis,w=y.caxis;c.min+S.min+w.min>=g&&(c.min=0,S.min=0,w.min=0,l.aaxis&&delete l.aaxis.min,l.baxis&&delete l.baxis.min,l.caxis&&delete l.caxis.min)}function f(l,y,s,x){var h=o[y._name];function g(E,P){return t.coerce(l,y,h,E,P)}g("uirevision",x.uirevision),y.type="linear";var m=g("color"),d=m!==h.color.dflt?m:s.font.color,b=y._name.charAt(0).toUpperCase(),c="Component "+b,S=g("title.text",c);y._hovertitle=S===c?S:b,t.coerceFont(g,"title.font",{family:s.font.family,size:t.bigFont(s.font.size),color:d}),g("min"),a(l,y,g,"linear"),i(l,y,g,"linear"),n(l,y,g,"linear"),u(l,y,g,{outerTicks:!0}),g("showticklabels")&&(t.coerceFont(g,"tickfont",{family:s.font.family,size:s.font.size,color:d}),g("tickangle"),g("tickformat")),r(l,y,g,{dfltColor:m,bgColor:s.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h}),g("hoverformat"),g("layer")}$.exports=function(y,s,x){T(y,s,x,{type:"ternary",attributes:o,handleDefaults:p,font:s.font,paper_bgcolor:s.paper_bgcolor})}},94831:($,K,e)=>{"use strict";var M=e(21572),I=e(80791),t=e(97799),T=e(5228),n=T.strTranslate,i=T._,u=e(8416),a=e(27630),r=e(49704),o=e(18836).extendFlat,v=e(31556),p=e(91464),f=e(25429),l=e(76863),y=e(85996),s=y.freeMode,x=y.rectMode,h=e(77875),g=e(48356).prepSelect,m=e(48356).selectOnClick,d=e(48356).clearOutline,A=e(48356).clearSelectionsCache,b=e(4669);function c(O,U){this.id=O.id,this.graphDiv=O.graphDiv,this.init(U),this.makeFramework(U),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=c;var S=c.prototype;S.init=function(O){this.container=O._ternarylayer,this.defs=O._defs,this.layoutId=O._uid,this.traceHash={},this.layers={}},S.plot=function(O,U){var H=this,j=U[H.id],ee=U._size;H._hasClipOnAxisFalse=!1;for(var W=0;W<O.length;W++){if(!1===O[W][0].trace.cliponaxis){H._hasClipOnAxisFalse=!0;break}}H.updateLayers(j),H.adjustLayout(j,ee),v.generalUpdatePerTraceModule(H.graphDiv,H,O,j),H.layers.plotbg.select("path").call(u.fill,j.bgcolor)},S.makeFramework=function(O){var U=this,H=U.graphDiv,j=O[U.id],ee=U.clipId="clip"+U.layoutId+U.id,W=U.clipIdRelative="clip-relative"+U.layoutId+U.id;U.clipDef=T.ensureSingleById(O._clips,"clipPath",ee,function(B){B.append("path").attr("d","M0,0Z")}),U.clipDefRelative=T.ensureSingleById(O._clips,"clipPath",W,function(B){B.append("path").attr("d","M0,0Z")}),U.plotContainer=T.ensureSingle(U.container,"g",U.id),U.updateLayers(j),a.setClipUrl(U.layers.backplot,ee,H),a.setClipUrl(U.layers.grids,ee,H)},S.updateLayers=function(O){var H=this.layers,j=["draglayer","plotbg","backplot","grids"];"below traces"===O.aaxis.layer&&j.push("aaxis","aline"),"below traces"===O.baxis.layer&&j.push("baxis","bline"),"below traces"===O.caxis.layer&&j.push("caxis","cline"),j.push("frontplot"),"above traces"===O.aaxis.layer&&j.push("aaxis","aline"),"above traces"===O.baxis.layer&&j.push("baxis","bline"),"above traces"===O.caxis.layer&&j.push("caxis","cline");var ee=this.plotContainer.selectAll("g.toplevel").data(j,String),W=["agrid","bgrid","cgrid"];ee.enter().append("g").attr("class",function(B){return"toplevel "+B}).each(function(B){var te=M.select(this);H[B]=te,"frontplot"===B?te.append("g").classed("scatterlayer",!0):"backplot"===B?te.append("g").classed("maplayer",!0):"plotbg"===B?te.append("path").attr("d","M0,0Z"):"aline"===B||"bline"===B||"cline"===B?te.append("path"):"grids"===B&&W.forEach(function(q){H[q]=te.append("g").classed("grid "+q,!0)})}),ee.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(O,U){var X,J,ue,re,ne,se,H=this,j=O.domain,ee=(j.x[0]+j.x[1])/2,W=(j.y[0]+j.y[1])/2,B=j.x[1]-j.x[0],te=j.y[1]-j.y[0],q=B*U.w,oe=te*U.h,ie=O.sum,V=O.aaxis.min,Y=O.baxis.min,ae=O.caxis.min;q>w*oe?ue=(re=oe)*w:re=(ue=q)/w,ne=B*ue/q,se=te*re/oe,X=U.l+U.w*ee-ue/2,J=U.t+U.h*(1-W)-re/2,H.x0=X,H.y0=J,H.w=ue,H.h=re,H.sum=ie,H.xaxis={type:"linear",range:[V+2*ae-ie,ie-V-2*Y],domain:[ee-ne/2,ee+ne/2],_id:"x"},r(H.xaxis,H.graphDiv._fullLayout),H.xaxis.setScale(),H.xaxis.isPtWithinRange=function(Ie){return Ie.a>=H.aaxis.range[0]&&Ie.a<=H.aaxis.range[1]&&Ie.b>=H.baxis.range[1]&&Ie.b<=H.baxis.range[0]&&Ie.c>=H.caxis.range[1]&&Ie.c<=H.caxis.range[0]},H.yaxis={type:"linear",range:[V,ie-Y-ae],domain:[W-se/2,W+se/2],_id:"y"},r(H.yaxis,H.graphDiv._fullLayout),H.yaxis.setScale(),H.yaxis.isPtWithinRange=function(){return!0};var de=H.yaxis.domain[0],be=H.aaxis=o({},O.aaxis,{range:[V,ie-Y-ae],side:"left",tickangle:(+O.aaxis.tickangle||0)-30,domain:[de,de+se*w],anchor:"free",position:0,_id:"y",_length:ue});r(be,H.graphDiv._fullLayout),be.setScale();var De=H.baxis=o({},O.baxis,{range:[ie-V-ae,Y],side:"bottom",domain:H.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ue});r(De,H.graphDiv._fullLayout),De.setScale();var _e=H.caxis=o({},O.caxis,{range:[ie-V-Y,ae],side:"right",tickangle:(+O.caxis.tickangle||0)+30,domain:[de,de+se*w],anchor:"free",position:0,_id:"y",_length:ue});r(_e,H.graphDiv._fullLayout),_e.setScale();var Ce="M"+X+","+(J+re)+"h"+ue+"l-"+ue/2+",-"+re+"Z";H.clipDef.select("path").attr("d",Ce),H.layers.plotbg.select("path").attr("d",Ce);var Le="M0,"+re+"h"+ue+"l-"+ue/2+",-"+re+"Z";H.clipDefRelative.select("path").attr("d",Le);var Fe=n(X,J);H.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Fe),H.clipDefRelative.select("path").attr("transform",null);var ke=n(X-De._offset,J+re);H.layers.baxis.attr("transform",ke),H.layers.bgrid.attr("transform",ke);var ze=n(X+ue/2,J)+"rotate(30)"+n(0,-be._offset);H.layers.aaxis.attr("transform",ze),H.layers.agrid.attr("transform",ze);var Pe=n(X+ue/2,J)+"rotate(-30)"+n(0,-_e._offset);H.layers.caxis.attr("transform",Pe),H.layers.cgrid.attr("transform",Pe),H.drawAxes(!0),H.layers.aline.select("path").attr("d",be.showline?"M"+X+","+(J+re)+"l"+ue/2+",-"+re:"M0,0").call(u.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),H.layers.bline.select("path").attr("d",De.showline?"M"+X+","+(J+re)+"h"+ue:"M0,0").call(u.stroke,De.linecolor||"#000").style("stroke-width",(De.linewidth||0)+"px"),H.layers.cline.select("path").attr("d",_e.showline?"M"+(X+ue/2)+","+J+"l"+ue/2+","+re:"M0,0").call(u.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),H.graphDiv._context.staticPlot||H.initInteractions(),a.setClipUrl(H.layers.frontplot,H._hasClipOnAxisFalse?null:H.clipId,H.graphDiv)},S.drawAxes=function(O){var U=this,H=U.graphDiv,j=U.id.substr(7)+"title",ee=U.layers,W=U.aaxis,B=U.baxis,te=U.caxis;if(U.drawAx(W),U.drawAx(B),U.drawAx(te),O){var q=Math.max(W.showticklabels?W.tickfont.size/2:0,(te.showticklabels?.75*te.tickfont.size:0)+("outside"===te.ticks?.87*te.ticklen:0)),oe=(B.showticklabels?B.tickfont.size:0)+("outside"===B.ticks?B.ticklen:0)+3;ee["a-title"]=h.draw(H,"a"+j,{propContainer:W,propName:U.id+".aaxis.title",placeholder:i(H,"Click to enter Component A title"),attributes:{x:U.x0+U.w/2,y:U.y0-W.title.font.size/3-q,"text-anchor":"middle"}}),ee["b-title"]=h.draw(H,"b"+j,{propContainer:B,propName:U.id+".baxis.title",placeholder:i(H,"Click to enter Component B title"),attributes:{x:U.x0-oe,y:U.y0+U.h+.83*B.title.font.size+oe,"text-anchor":"middle"}}),ee["c-title"]=h.draw(H,"c"+j,{propContainer:te,propName:U.id+".caxis.title",placeholder:i(H,"Click to enter Component C title"),attributes:{x:U.x0+U.w+oe,y:U.y0+U.h+.83*te.title.font.size+oe,"text-anchor":"middle"}})}},S.drawAx=function(O){var U=this,H=U.graphDiv,j=O._name,ee=j.charAt(0),W=O._id,B=U.layers[j],q=ee+"tickLayout",oe=function E(O){return O.ticks+String(O.ticklen)+String(O.showticklabels)}(O);U[q]!==oe&&(B.selectAll("."+W+"tick").remove(),U[q]=oe),O.setScale();var ie=p.calcTicks(O),V=p.clipEnds(O,ie),Y=p.makeTransTickFn(O),ae=p.getTickSigns(O)[2],X=T.deg2rad(30),J=ae*(O.linewidth||1)/2,ue=ae*O.ticklen,re=U.w,ne=U.h,se="b"===ee?"M0,"+J+"l"+Math.sin(X)*ue+","+Math.cos(X)*ue:"M"+J+",0l"+Math.cos(X)*ue+","+-Math.sin(X)*ue,de={a:"M0,0l"+ne+",-"+re/2,b:"M0,0l-"+re/2+",-"+ne,c:"M0,0l-"+ne+","+re/2}[ee];p.drawTicks(H,O,{vals:"inside"===O.ticks?V:ie,layer:B,path:se,transFn:Y,crisp:!1}),p.drawGrid(H,O,{vals:V,layer:U.layers[ee+"grid"],path:de,transFn:Y,crisp:!1}),p.drawLabels(H,O,{vals:ie,layer:B,transFn:Y,labelFns:p.makeLabelFns(O,0,30)})};var P=b.MINZOOM/2+.87,R="m-0.87,.5h"+P+"v3h-"+(P+5.2)+"l"+(P/2+2.6)+",-"+(.87*P+4.5)+"l2.6,1.5l-"+P/2+","+.87*P+"Z",F="m0.87,.5h-"+P+"v3h"+(P+5.2)+"l-"+(P/2+2.6)+",-"+(.87*P+4.5)+"l-2.6,1.5l"+P/2+","+.87*P+"Z",_="m0,1l"+P/2+","+.87*P+"l2.6,-1.5l-"+(P/2+2.6)+",-"+(.87*P+4.5)+"l-"+(P/2+2.6)+","+(.87*P+4.5)+"l2.6,1.5l"+P/2+",-"+.87*P+"Z",D=!0;function k(O){M.select(O).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){A(this.dragOptions),d(this.dragOptions.gd)},S.initInteractions=function(){var ee,W,B,te,q,oe,ie,V,Y,ae,X,J,O=this,U=O.layers.plotbg.select("path").node(),H=O.graphDiv,j=H._fullLayout._zoomlayer;function ue(ke){var ze={};return ze[O.id+".aaxis.min"]=ke.a,ze[O.id+".baxis.min"]=ke.b,ze[O.id+".caxis.min"]=ke.c,ze}function re(ke,ze){var Pe=H._fullLayout.clickmode;k(H),2===ke&&(H.emit("plotly_doubleclick",null),t.call("_guiRelayout",H,ue({a:0,b:0,c:0}))),Pe.indexOf("select")>-1&&1===ke&&m(ze,H,[O.xaxis],[O.yaxis],O.id,O.dragOptions),Pe.indexOf("event")>-1&&l.click(H,ze,O.id)}function se(ke,ze){return 1-ze/O.h}function de(ke,ze){return 1-(ke+(O.h-ze)/Math.sqrt(3))/O.w}function be(ke,ze){return(ke-(O.h-ze)/Math.sqrt(3))/O.w}function De(ke,ze){var Pe=B+ke*ee,Ie=te+ze*W,Qe=Math.max(0,Math.min(1,se(0,te),se(0,Ie))),at=Math.max(0,Math.min(1,de(B,te),de(Pe,Ie))),Be=Math.max(0,Math.min(1,be(B,te),be(Pe,Ie))),Ne=(Qe/2+Be)*O.w,nt=(1-Qe/2-at)*O.w,ct=(Ne+nt)/2,mt=nt-Ne,Bt=(1-Qe)*O.h,Rt=Bt-mt/w;mt<b.MINZOOM?(ie=q,X.attr("d",Y),J.attr("d","M0,0Z")):(ie={a:q.a+Qe*oe,b:q.b+at*oe,c:q.c+Be*oe},X.attr("d",Y+"M"+Ne+","+Bt+"H"+nt+"L"+ct+","+Rt+"L"+Ne+","+Bt+"Z"),J.attr("d","M"+B+","+te+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ne+","+Bt+R+"M"+nt+","+Bt+F+"M"+ct+","+Rt+_)),ae||(X.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),J.transition().style("opacity",1).duration(200),ae=!0),H.emit("plotly_relayouting",ue(ie))}function _e(){k(H),ie!==q&&(t.call("_guiRelayout",H,ue(ie)),D&&H.data&&H._context.showTips&&(T.notifier(i(H,"Double-click to zoom back out"),"long"),D=!1))}function Le(ke,ze){var Pe=ke/O.xaxis._m,Ie=ze/O.yaxis._m,Qe=[(ie={a:q.a-Ie,b:q.b+(Pe+Ie)/2,c:q.c-(Pe-Ie)/2}).a,ie.b,ie.c].sort(T.sorterAsc),at_a=Qe.indexOf(ie.a),at_b=Qe.indexOf(ie.b),at_c=Qe.indexOf(ie.c);Qe[0]<0&&(Qe[1]+Qe[0]/2<0?(Qe[2]+=Qe[0]+Qe[1],Qe[0]=Qe[1]=0):(Qe[2]+=Qe[0]/2,Qe[1]+=Qe[0]/2,Qe[0]=0),ie={a:Qe[at_a],b:Qe[at_b],c:Qe[at_c]},ze=(q.a-ie.a)*O.yaxis._m,ke=(q.c-ie.c-q.b+ie.b)*O.xaxis._m);var Be=n(O.x0+ke,O.y0+ze);O.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Be);var Ne=n(-ke,-ze);O.clipDefRelative.select("path").attr("transform",Ne),O.aaxis.range=[ie.a,O.sum-ie.b-ie.c],O.baxis.range=[O.sum-ie.a-ie.c,ie.b],O.caxis.range=[O.sum-ie.a-ie.b,ie.c],O.drawAxes(!1),O._hasClipOnAxisFalse&&O.plotContainer.select(".scatterlayer").selectAll(".trace").call(a.hideOutsideRangePoints,O),H.emit("plotly_relayouting",ue(ie))}function Fe(){t.call("_guiRelayout",H,ue(ie))}this.dragOptions={element:U,gd:H,plotinfo:{id:O.id,domain:H._fullLayout[O.id].domain,xaxis:O.xaxis,yaxis:O.yaxis},subplot:O.id,prepFn:function(ke,ze,Pe){O.dragOptions.xaxes=[O.xaxis],O.dragOptions.yaxes=[O.yaxis],ee=H._fullLayout._invScaleX,W=H._fullLayout._invScaleY;var Ie=O.dragOptions.dragmode=H._fullLayout.dragmode;s(Ie)?O.dragOptions.minDrag=1:O.dragOptions.minDrag=void 0,"zoom"===Ie?(O.dragOptions.moveFn=De,O.dragOptions.clickFn=re,O.dragOptions.doneFn=_e,function ne(ke,ze,Pe){var Ie=U.getBoundingClientRect();B=ze-Ie.left,te=Pe-Ie.top,H._fullLayout._calcInverseTransform(H);var Qe=H._fullLayout._invTransform,at=T.apply3DTransform(Qe)(B,te);B=at[0],te=at[1],q={a:O.aaxis.range[0],b:O.baxis.range[1],c:O.caxis.range[1]},ie=q,oe=O.aaxis.range[1]-q.a,V=I(O.graphDiv._fullLayout[O.id].bgcolor).getLuminance(),Y="M0,"+O.h+"L"+O.w/2+", 0L"+O.w+","+O.h+"Z",ae=!1,X=j.append("path").attr("class","zoombox").attr("transform",n(O.x0,O.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",Y),J=j.append("path").attr("class","zoombox-corners").attr("transform",n(O.x0,O.y0)).style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),O.clearOutline(H)}(0,ze,Pe)):"pan"===Ie?(O.dragOptions.moveFn=Le,O.dragOptions.clickFn=re,O.dragOptions.doneFn=Fe,function Ce(){q={a:O.aaxis.range[0],b:O.baxis.range[1],c:O.caxis.range[1]},ie=q}(),O.clearOutline(H)):(x(Ie)||s(Ie))&&g(ke,ze,Pe,O.dragOptions,Ie)}},U.onmousemove=function(ke){l.hover(H,ke,O.id),H._fullLayout._lasthover=U,H._fullLayout._hoversubplot=O.id},U.onmouseout=function(ke){H._dragging||f.unhover(H,ke)},f.init(this.dragOptions)}},97799:($,K,e)=>{"use strict";var M=e(7231),I=e(10127),t=e(83338),T=e(51366),n=e(21733).addStyleRule,i=e(18836),u=e(82684),a=e(11161),r=i.extendFlat,o=i.extendDeepAll;function v(d){var A=d.name,b=d.categories,c=d.meta;if(K.modules[A])M.log("Type "+A+" already registered");else{K.subplotsRegistry[d.basePlotModule.name]||function p(d){var A=d.name;if(K.subplotsRegistry[A])return void M.log("Plot type "+A+" already registered.");for(var b in s(d),K.subplotsRegistry[A]=d,K.componentsRegistry)g(b,d.name)}(d.basePlotModule);for(var S={},w=0;w<b.length;w++)S[b[w]]=!0,K.allCategories[b[w]]=!0;for(var E in K.modules[A]={_module:d,categories:S},c&&Object.keys(c).length&&(K.modules[A].meta=c),K.allTypes.push(A),K.componentsRegistry)x(E,A);d.layoutAttributes&&r(K.traceLayoutAttributes,d.layoutAttributes);var P=d.basePlotModule,R=P.name;if("mapbox"===R){var F=P.constants.styleRules;for(var _ in F)n(".js-plotly-plot .plotly .mapboxgl-"+_,F[_])}("geo"===R||"mapbox"===R)&&void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}})}}function f(d){if("string"!=typeof d.name)throw new Error("Component module *name* must be a string.");var A=d.name;for(var b in K.componentsRegistry[A]=d,d.layoutAttributes&&(d.layoutAttributes._isLinkedToArray&&t(K.layoutArrayContainers,A),s(d)),K.modules)x(A,b);for(var c in K.subplotsRegistry)g(A,c);for(var S in K.transformsRegistry)h(A,S);d.schema&&d.schema.layout&&o(a,d.schema.layout)}function l(d){if("string"!=typeof d.name)throw new Error("Transform module *name* must be a string.");var A="Transform module "+d.name,b="function"==typeof d.transform,c="function"==typeof d.calcTransform;if(!b&&!c)throw new Error(A+" is missing a *transform* or *calcTransform* method.");for(var S in b&&c&&M.log([A+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(d.attributes)||M.log(A+" registered without an *attributes* object."),"function"!=typeof d.supplyDefaults&&M.log(A+" registered without a *supplyDefaults* method."),K.transformsRegistry[d.name]=d,K.componentsRegistry)h(S,d.name)}function y(d){var A=d.name,b=A.split("-")[0],c=d.dictionary,S=d.format,w=c&&Object.keys(c).length,E=S&&Object.keys(S).length,P=K.localeRegistry,R=P[A];if(R||(P[A]=R={}),b!==A){var F=P[b];F||(P[b]=F={}),w&&F.dictionary===R.dictionary&&(F.dictionary=c),E&&F.format===R.format&&(F.format=S)}w&&(R.dictionary=c),E&&(R.format=S)}function s(d){if(d.layoutAttributes){var A=d.layoutAttributes._arrayAttrRegexps;if(A)for(var b=0;b<A.length;b++)t(K.layoutArrayRegexes,A[b])}}function x(d,A){var b=K.componentsRegistry[d].schema;if(b&&b.traces){var c=b.traces[A];c&&o(K.modules[A]._module.attributes,c)}}function h(d,A){var b=K.componentsRegistry[d].schema;if(b&&b.transforms){var c=b.transforms[A];c&&o(K.transformsRegistry[A].attributes,c)}}function g(d,A){var b=K.componentsRegistry[d].schema;if(b&&b.subplots){var c=K.subplotsRegistry[A],S=c.layoutAttributes,w="subplot"===c.attr?c.name:c.attr;Array.isArray(w)&&(w=w[0]);var E=b.subplots[w];S&&E&&o(S,E)}}function m(d){return"object"==typeof d&&(d=d.type),d}K.modules={},K.allCategories={},K.allTypes=[],K.subplotsRegistry={},K.transformsRegistry={},K.componentsRegistry={},K.layoutArrayContainers=[],K.layoutArrayRegexes=[],K.traceLayoutAttributes={},K.localeRegistry={},K.apiMethodRegistry={},K.collectableSubplotTypes=null,K.register=function(A){if(K.collectableSubplotTypes=null,!A)throw new Error("No argument passed to Plotly.register.");A&&!Array.isArray(A)&&(A=[A]);for(var b=0;b<A.length;b++){var c=A[b];if(!c)throw new Error("Invalid module was attempted to be registered!");switch(c.moduleType){case"trace":v(c);break;case"transform":l(c);break;case"component":f(c);break;case"locale":y(c);break;case"apiMethod":var S=c.name;K.apiMethodRegistry[S]=c.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},K.getModule=function(d){var A=K.modules[m(d)];return!!A&&A._module},K.traceIs=function(d,A){if("various"===(d=m(d)))return!1;var b=K.modules[d];return b||(d&&M.log("Unrecognized trace type "+d+"."),b=K.modules[u.type.dflt]),!!b.categories[A]},K.getTransformIndices=function(d,A){for(var b=[],c=d.transforms||[],S=0;S<c.length;S++)c[S].type===A&&b.push(S);return b},K.hasTransform=function(d,A){for(var b=d.transforms||[],c=0;c<b.length;c++)if(b[c].type===A)return!0;return!1},K.getComponentMethod=function(d,A){var b=K.componentsRegistry[d];return b&&b[A]||I},K.call=function(){var d=arguments[0],A=[].slice.call(arguments,1);return K.apiMethodRegistry[d].apply(null,A)}},919:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=I.extendFlat,T=I.extendDeep;function n(u){var a;switch(u){case"themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}$.exports=function(a,r){var o,u,v=a.data,p=a.layout,f=T([],v),l=T({},p,n(r.tileClass)),y=a._context||{};if(r.width&&(l.width=r.width),r.height&&(l.height=r.height),"thumbnail"===r.tileClass||"themes__thumb"===r.tileClass){l.annotations=[];var s=Object.keys(l);for(o=0;o<s.length;o++)u=s[o],["xaxis","yaxis","zaxis"].indexOf(u.slice(0,5))>-1&&(l[s[o]].title={text:""});for(o=0;o<f.length;o++){var x=f[o];x.showscale=!1,x.marker&&(x.marker.showscale=!1),M.traceIs(x,"pie-like")&&(x.textposition="none")}}if(Array.isArray(r.annotations))for(o=0;o<r.annotations.length;o++)l.annotations.push(r.annotations[o]);var h=Object.keys(l).filter(function(b){return b.match(/^scene\d*$/)});if(h.length){var g={};for("thumbnail"===r.tileClass&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),o=0;o<h.length;o++){var m=l[h[o]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),t(m.xaxis,g),t(m.yaxis,g),t(m.zaxis,g),m._scene=null}}var d=document.createElement("div");r.tileClass&&(d.className=r.tileClass);var A={gd:d,td:d,layout:l,data:f,config:{staticPlot:void 0===r.staticPlot||r.staticPlot,plotGlPixelRatio:void 0===r.plotGlPixelRatio?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:y.mapboxAccessToken}};return"transparent"!==r.setBackground&&(A.config.setBackground=r.setBackground||"opaque"),A.gd.defaultLayout=n(r.tileClass),A}},92183:($,K,e)=>{"use strict";var M=e(5228),I=e(90212),t=e(41907),T=e(80307);$.exports=function n(i,u){var a;return M.isPlainObject(i)||(a=M.getGraphDiv(i)),(u=u||{}).format=u.format||"png",u.width=u.width||null,u.height=u.height||null,u.imageDataOnly=!0,new Promise(function(r,o){a&&a._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),M.isIE()&&"svg"!==u.format&&o(new Error(T.MSG_IE_BAD_FORMAT)),a&&(a._snapshotInProgress=!0);var v=I(i,u),p=u.filename||i.fn||"newplot";p+="."+u.format.replace("-","."),v.then(function(f){return a&&(a._snapshotInProgress=!1),t(f,p,u.format)}).then(function(f){r(f)}).catch(function(f){a&&(a._snapshotInProgress=!1),o(f)})})}},41907:($,K,e)=>{"use strict";var M=e(5228),I=e(80307);$.exports=function t(T,n,i){var u=document.createElement("a"),a="download"in u;return new Promise(function(o,v){var p,f;if(M.isIE())return p=I.createBlob(T,"svg"),window.navigator.msSaveBlob(p,n),p=null,o(n);if(a)return p=I.createBlob(T,i),f=I.createObjectURL(p),u.href=f,u.download=n,document.body.appendChild(u),u.click(),document.body.removeChild(u),I.revokeObjectURL(f),p=null,o(n);if(M.isSafari()){var l="svg"===i?",":";base64,";return I.octetStream(l+encodeURIComponent(T)),o(n)}v(new Error("download error"))})}},80307:($,K,e)=>{"use strict";var M=e(97799);K.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},K.getRedrawFunc=function(T){return function(){M.getComponentMethod("colorbar","draw")(T)}},K.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},K.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var I=window.URL||window.webkitURL;K.createObjectURL=function(T){return I.createObjectURL(T)},K.revokeObjectURL=function(T){return I.revokeObjectURL(T)},K.createBlob=function(T,n){if("svg"===n)return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if("full-json"===n)return new window.Blob([T],{type:"application/json;charset=utf-8"});var i=function t(T){for(var n=T.length,i=new ArrayBuffer(n),u=new Uint8Array(i),a=0;a<n;a++)u[a]=T.charCodeAt(a);return i}(window.atob(T));return new window.Blob([i],{type:"image/"+n})},K.octetStream=function(T){document.location.href="data:application/octet-stream"+T},K.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,K.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},80432:($,K,e)=>{"use strict";var M=e(80307),I={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(919),toSVG:e(30487),svgToImg:e(16617),toImage:e(19543),downloadImage:e(92183)};$.exports=I},16617:($,K,e)=>{"use strict";var M=e(5228),I=e(59069).EventEmitter,t=e(80307);$.exports=function T(n){var i=n.emitter||new I,u=new Promise(function(a,r){var o=window.Image,v=n.svg,p=n.format||"png";if(M.isIE()&&"svg"!==p){var f=new Error(t.MSG_IE_BAD_FORMAT);return r(f),n.promise?u:i.emit("error",f)}var A,b,l=n.canvas,y=n.scale||1,s=n.width||300,x=n.height||150,h=y*s,g=y*x,m=l.getContext("2d",{willReadFrequently:!0}),d=new o;"svg"===p||M.isSafari()?b=t.encodeSVG(v):(A=t.createBlob(v,"svg"),b=t.createObjectURL(A)),l.width=h,l.height=g,d.onload=function(){var c;switch(A=null,t.revokeObjectURL(b),"svg"!==p&&m.drawImage(d,0,0,h,g),p){case"jpeg":c=l.toDataURL("image/jpeg");break;case"png":c=l.toDataURL("image/png");break;case"webp":c=l.toDataURL("image/webp");break;case"svg":c=b;break;default:var S="Image format is not jpeg, png, svg or webp.";if(r(new Error(S)),!n.promise)return i.emit("error",S)}a(c),n.promise||i.emit("success",c)},d.onerror=function(c){if(A=null,t.revokeObjectURL(b),r(c),!n.promise)return i.emit("error",c)},d.src=b});return n.promise?u:i}},19543:($,K,e)=>{"use strict";var M=e(59069).EventEmitter,I=e(97799),t=e(5228),T=e(80307),n=e(919),i=e(30487),u=e(16617);$.exports=function a(r,o){var v=new M,p=n(r,{format:"png"}),f=p.gd;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);var y=T.getRedrawFunc(f);return I.call("_doPlot",f,p.data,p.layout,p.config).then(y).then(function l(){var s=T.getDelay(f._fullLayout);setTimeout(function(){var x=i(f),h=document.createElement("canvas");h.id=t.randstr(),(v=u({format:o.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:h,emitter:v,svg:x})).clean=function(){f&&document.body.removeChild(f)}},s)}).catch(function(s){v.emit("error",s)}),v}},30487:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(8416),n=e(70415),i=/"/g,u="TOBESTRIPPED",a=new RegExp('("'+u+")|("+u+'")',"g");$.exports=function(p,f,l){var m,y=p._fullLayout,s=y._paper,x=y._toppaper,h=y.width,g=y.height;s.insert("rect",":first-child").call(t.setRect,0,0,h,g).call(T.fill,y.paper_bgcolor);var d=y._basePlotModules||[];for(m=0;m<d.length;m++){var A=d[m];A.toSVG&&A.toSVG(p)}if(x){var b=x.node().childNodes,c=Array.prototype.slice.call(b);for(m=0;m<c.length;m++){var S=c[m];S.childNodes.length&&s.node().appendChild(S)}}y._draggers&&y._draggers.remove(),s.node().style.background="",s.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=M.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){E.style({visibility:null,display:null});var P=this.style.fontFamily;P&&-1!==P.indexOf('"')&&E.style("font-family",P.replace(i,u))}else E.remove()}),s.selectAll(".gradient_filled,.pattern_filled").each(function(){var E=M.select(this),P=this.style.fill;P&&-1!==P.indexOf("url(")&&E.style("fill",P.replace(i,u));var R=this.style.stroke;R&&-1!==R.indexOf("url(")&&E.style("stroke",R.replace(i,u))}),("pdf"===f||"eps"===f)&&s.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),s.node().setAttributeNS(n.xmlns,"xmlns",n.svg),s.node().setAttributeNS(n.xmlns,"xmlns:xlink",n.xlink),"svg"===f&&l&&(s.attr("width",l*h),s.attr("height",l*g),s.attr("viewBox","0 0 "+h+" "+g));var w=(new window.XMLSerializer).serializeToString(s.node());return w=function r(v){var p=M.select("body").append("div").style({display:"none"}).html(""),f=v.replace(/(&[^;]*;)/gi,function(l){return"&lt;"===l?"&#60;":"&rt;"===l?"&#62;":-1!==l.indexOf("<")||-1!==l.indexOf(">")?"":p.html(l).text()});return p.remove(),f}(w),w=(w=function o(v){return v.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}(w)).replace(a,"'"),I.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},92811:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){for(var n=0;n<t.length;n++)t[n].i=n;M.mergeArray(T.text,t,"tx"),M.mergeArray(T.hovertext,t,"htx");var i=T.marker;if(i){M.mergeArray(i.opacity,t,"mo",!0),M.mergeArray(i.color,t,"mc");var u=i.line;u&&(M.mergeArray(u.color,t,"mlc"),M.mergeArrayCastPositive(u.width,t,"mlw"))}}},99009:($,K,e)=>{"use strict";var M=e(55405),I=e(88489).axisHoverFormat,t=e(9430).fF,T=e(9430).si,n=e(567),i=e(47297),u=e(98466),a=e(65822).u,r=e(18836).extendFlat,o=i({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),f=r({},M.marker.line.width,{dflt:0}),l=r({width:f,editType:"calc"},n("marker.line")),y=r({line:l,editType:"calc"},n("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:a});$.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:I("x"),yhoverformat:I("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:u.eventDataKeys}),hovertext:M.hovertext,hovertemplate:t({},{keys:u.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:r({},o,{description:"Sets the font used for `text`."}),insidetextfont:r({},o,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:r({},o,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:r({},M.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:y,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}}},46088:($,K,e)=>{"use strict";var M=e(91464),I=e(62311),t=e(981).hasColorscale,T=e(93727),n=e(92811),i=e(20107);$.exports=function(a,r){var p,f,l,y,s,x,o=M.getFromId(a,r.xaxis||"x"),v=M.getFromId(a,r.yaxis||"y"),h={msUTC:!(!r.base&&0!==r.base)};"h"===r.orientation?(p=o.makeCalcdata(r,"x",h),l=v.makeCalcdata(r,"y"),y=I(r,v,"y",l),s=!!r.yperiodalignment,x="y"):(p=v.makeCalcdata(r,"y",h),l=o.makeCalcdata(r,"x"),y=I(r,o,"x",l),s=!!r.xperiodalignment,x="x"),f=y.vals;for(var g=Math.min(f.length,p.length),m=new Array(g),d=0;d<g;d++)m[d]={p:f[d],s:p[d]},s&&(m[d].orig_p=l[d],m[d][x+"End"]=y.ends[d],m[d][x+"Start"]=y.starts[d]),r.ids&&(m[d].id=String(r.ids[d]));return t(r,"marker")&&T(a,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),t(r,"marker.line")&&T(a,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),n(m,r),i(m,r),m}},98466:$=>{"use strict";$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},23870:($,K,e)=>{"use strict";var M=e(7347),I=e(5228).isArrayOrTypedArray,t=e(71103).BADNUM,T=e(97799),n=e(91464),i=e(93698).getAxisGroup,u=e(72120);function r(w,E,P,R,F){if(R.length){var _,z,D,k;switch(function o(w,E){var P,R;for(P=0;P<E.length;P++){var D,F=E[P],_=F[0].trace,z="funnel"===_.type?_._base:_.base,k="h"===_.orientation?_.xcalendar:_.ycalendar,O="category"===w.type||"multicategory"===w.type?function(){return null}:w.d2c;if(I(z)){for(R=0;R<Math.min(z.length,F.length);R++)D=O(z[R],0,k),M(D)?(F[R].b=+D,F[R].hasB=1):F[R].b=0;for(;R<F.length;R++)F[R].b=0}else{D=O(z,0,k);var U=M(D);for(D=U?D:0,R=0;R<F.length;R++)F[R].b=D,U&&(F[R].hasB=1)}}}(P,R),F.mode){case"overlay":v(E,P,R,F);break;case"group":for(_=[],z=[],D=0;D<R.length;D++)void 0===(k=R[D])[0].trace.offset?z.push(k):_.push(k);z.length&&function p(w,E,P,R,F){var _=new u(R,{posAxis:E,sepNegVal:!1,overlapNoMerge:!F.norm});(function y(w,E,P,R){for(var F=w._fullLayout,_=P.positions,z=P.distinctPositions,D=P.minDiff,k=P.traces,O=k.length,U=_.length!==z.length,H=D*(1-R.gap),j=i(F,E._id)+k[0][0].trace.orientation,ee=F._alignmentOpts[j]||{},W=0;W<O;W++){var ie,Y,B=k[W],te=B[0].trace,q=ee[te.alignmentgroup]||{},oe=Object.keys(q.offsetGroups||{}).length,V=(ie=oe?H/oe:U?H/O:H)*(1-(R.groupgap||0));Y=oe?((2*te._offsetIndex+1-oe)*ie-V)/2:U?((2*W+1-O)*ie-V)/2:-V/2;var ae=B[0].t;ae.barwidth=V,ae.poffset=Y,ae.bargroupwidth=H,ae.bardelta=D}P.binWidth=k[0][0].t.barwidth/100,s(P),x(E,P),h(E,P,U)})(w,E,_,F),function A(w,E){for(var P=w.traces,R=0;R<P.length;R++){var F=P[R];if(void 0===F[0].trace.base)for(var z=new u([F],{posAxis:E,sepNegVal:!0,overlapNoMerge:!0}),D=0;D<F.length;D++){var k=F[D];if(k.p!==t){var O=z.put(k.p,k.b+k.s);O&&(k.b=O)}}}}(_,E),F.norm?(d(_),b(P,_,F)):g(P,_)}(w,E,P,z,F),_.length&&v(E,P,_,F);break;case"stack":case"relative":for(_=[],z=[],D=0;D<R.length;D++)void 0===(k=R[D])[0].trace.base?z.push(k):_.push(k);z.length&&function f(w,E,P,R,F){var _=new u(R,{posAxis:E,sepNegVal:"relative"===F.mode,overlapNoMerge:!(F.norm||"stack"===F.mode||"relative"===F.mode)});l(E,_,F),function m(w,E,P){var _,z,D,k,O,U,R=S(w),F=E.traces;for(k=0;k<F.length;k++)if(_=F[k],"funnel"===(z=_[0].trace).type)for(O=0;O<_.length;O++)(U=_[O]).s!==t&&E.put(U.p,-.5*U.s);for(k=0;k<F.length;k++){D="funnel"===(z=(_=F[k])[0].trace).type;var H=[];for(O=0;O<_.length;O++)if((U=_[O]).s!==t){var j;j=D?U.s:U.s+U.b;var ee=E.put(U.p,j),W=ee+j;U.b=ee,U[R]=W,P.norm||(H.push(W),U.hasB&&H.push(ee))}P.norm||(z._extremes[w._id]=n.findExtremes(w,H,{tozero:!0,padded:!0}))}}(P,_,F);for(var z=0;z<R.length;z++)for(var D=R[z],k=0;k<D.length;k++){var O=D[k];if(O.s!==t)O.b+O.s===_.get(O.p,O.s)&&(O._outmost=!0)}F.norm&&b(P,_,F)}(0,E,P,z,F),_.length&&v(E,P,_,F)}!function c(w,E){var F,_,z,P=S(E),R={},D=1/0,k=-1/0;for(F=0;F<w.length;F++)for(z=w[F],_=0;_<z.length;_++){var O=z[_].p;M(O)&&(D=Math.min(D,O),k=Math.max(k,O))}var U=1e4/(k-D),H=R.round=function(oe){return String(Math.round(U*(oe-D)))};for(F=0;F<w.length;F++){(z=w[F])[0].t.extents=R;var j=z[0].t.poffset,ee=I(j);for(_=0;_<z.length;_++){var W=z[_],B=W[P]-W.w/2;if(M(B)){var te=W[P]+W.w/2,q=H(W.p);R[q]?R[q]=[Math.min(B,R[q][0]),Math.max(te,R[q][1])]:R[q]=[B,te]}W.p0=W.p+(ee?j[_]:j),W.p1=W.p0+W.w,W.s0=W.b,W.s1=W.s0+W.s}}}(R,E)}}function v(w,E,P,R){for(var F=0;F<P.length;F++){var _=P[F],z=new u([_],{posAxis:w,sepNegVal:!1,overlapNoMerge:!R.norm});l(w,z,R),R.norm?(d(z),b(E,z,R)):g(E,z)}}function l(w,E,P){for(var R=E.minDiff,F=E.traces,_=R*(1-P.gap),D=_*(1-(P.groupgap||0)),k=-D/2,O=0;O<F.length;O++){var H=F[O][0].t;H.barwidth=D,H.poffset=k,H.bargroupwidth=_,H.bardelta=R}E.binWidth=F[0][0].t.barwidth/100,s(E),x(w,E),h(w,E)}function s(w){var P,R,E=w.traces;for(P=0;P<E.length;P++){var U,F=E[P],_=F[0],z=_.trace,D=_.t,k=z._offset||z.offset,O=D.poffset;if(I(k)){for(U=Array.prototype.slice.call(k,0,F.length),R=0;R<U.length;R++)M(U[R])||(U[R]=O);for(R=U.length;R<F.length;R++)U.push(O);D.poffset=U}else void 0!==k&&(D.poffset=k);var H=z._width||z.width,j=D.barwidth;if(I(H)){var ee=Array.prototype.slice.call(H,0,F.length);for(R=0;R<ee.length;R++)M(ee[R])||(ee[R]=j);for(R=ee.length;R<F.length;R++)ee.push(j);if(D.barwidth=ee,void 0===k){for(U=[],R=0;R<F.length;R++)U.push(O+(j-ee[R])/2);D.poffset=U}}else void 0!==H&&(D.barwidth=H,void 0===k&&(D.poffset=O+(j-H)/2))}}function x(w,E){for(var P=E.traces,R=S(w),F=0;F<P.length;F++)for(var _=P[F],z=_[0].t,D=z.poffset,k=I(D),O=z.barwidth,U=I(O),H=0;H<_.length;H++){var j=_[H],ee=j.w=U?O[H]:O;void 0===j.p&&(j.p=j[R],j["orig_"+R]=j[R]);var W=(k?D[H]:D)+ee/2;j[R]=j.p+W}}function h(w,E,P){var R=E.traces,_=E.minDiff/2;n.minDtick(w,E.minDiff,E.distinctPositions[0],P);for(var z=0;z<R.length;z++){var H,j,ee,W,D=R[z],k=D[0],O=k.trace,U=[];for(W=0;W<D.length;W++)j=(H=D[W]).p-_,ee=H.p+_,U.push(j,ee);if(O.width||O.offset){var B=k.t,te=B.poffset,q=B.barwidth,oe=I(te),ie=I(q);for(W=0;W<D.length;W++){H=D[W];var V=oe?te[W]:te,Y=ie?q[W]:q;ee=(j=H.p+V)+Y,U.push(j,ee)}}O._extremes[w._id]=n.findExtremes(w,U,{padded:!1})}}function g(w,E){for(var P=E.traces,R=S(w),F=0;F<P.length;F++){for(var _=P[F],z=_[0].trace,D="scatter"===z.type,k="v"===z.orientation,O=[],U=!1,H=0;H<_.length;H++){var j=_[H],ee=D?0:j.b,W=D?k?j.y:j.x:ee+j.s;j[R]=W,O.push(W),j.hasB&&O.push(ee),(!j.hasB||!j.b)&&(U=!0)}z._extremes[w._id]=n.findExtremes(w,O,{tozero:U,padded:!0})}}function d(w){for(var E=w.traces,P=0;P<E.length;P++)for(var R=E[P],F=0;F<R.length;F++){var _=R[F];_.s!==t&&w.put(_.p,_.b+_.s)}}function b(w,E,P){var R=E.traces,F=S(w),_="fraction"===P.norm?1:100,z=_/1e9,D=w.l2c(w.c2l(0)),k="stack"===P.mode?_:D;function O(Y){return M(w.c2l(Y))&&(Y<D-z||Y>k+z||!M(D))}for(var U=0;U<R.length;U++){for(var H=R[U],j=H[0].trace,ee=[],W=!1,B=!1,te=0;te<H.length;te++){var q=H[te];if(q.s!==t){var oe=Math.abs(_/E.get(q.p,q.s));q.b*=oe,q.s*=oe;var ie=q.b,V=ie+q.s;q[F]=V,ee.push(V),B=B||O(V),q.hasB&&(ee.push(ie),B=B||O(ie)),(!q.hasB||!q.b)&&(W=!0)}}j._extremes[w._id]=n.findExtremes(w,ee,{tozero:W,padded:B})}}function S(w){return w._id.charAt(0)}$.exports={crossTraceCalc:function a(w,E){for(var P=E.xaxis,R=E.yaxis,F=w._fullLayout,_=w._fullData,z=w.calcdata,D=[],k=[],O=0;O<_.length;O++){var U=_[O];if(!0===U.visible&&T.traceIs(U,"bar")&&U.xaxis===P._id&&U.yaxis===R._id&&("h"===U.orientation?D.push(z[O]):k.push(z[O]),U._computePh))for(var H=w.calcdata[O],j=0;j<H.length;j++)"function"==typeof H[j].ph0&&(H[j].ph0=H[j].ph0()),"function"==typeof H[j].ph1&&(H[j].ph1=H[j].ph1())}var ee={xCat:"category"===P.type||"multicategory"===P.type,yCat:"category"===R.type||"multicategory"===R.type,mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};r(w,P,R,k,ee),r(w,R,P,D,ee)},setGroupPositions:r}},74401:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(97799),T=e(82069),n=e(18031),i=e(61115),u=e(36711),a=e(99009),r=M.coerceFont;function p(f,l,y,s,x,h){var g=!1!==(h=h||{}).moduleHasSelected,m=!1!==h.moduleHasUnselected,d=!1!==h.moduleHasConstrain,A=!1!==h.moduleHasCliponaxis,b=!1!==h.moduleHasTextangle,c=!1!==h.moduleHasInsideanchor,S=!!h.hasPathbar,w=Array.isArray(x)||"auto"===x,E=w||"inside"===x,P=w||"outside"===x;if(E||P){var R=r(s,"textfont",y.font),F=M.extendFlat({},R),z=!(f.textfont&&f.textfont.color);if(z&&delete F.color,r(s,"insidetextfont",F),S){var D=M.extendFlat({},R);z&&delete D.color,r(s,"pathbar.textfont",D)}P&&r(s,"outsidetextfont",R),g&&s("selected.textfont.color"),m&&s("unselected.textfont.color"),d&&s("constraintext"),A&&s("cliponaxis"),b&&s("textangle"),s("texttemplate")}E&&c&&s("insidetextanchor")}$.exports={supplyDefaults:function o(f,l,y,s){function x(A,b){return M.coerce(f,l,a,A,b)}if(T(f,l,s,x)){n(f,l,s,x),x("xhoverformat"),x("yhoverformat"),x("orientation",l.x&&!l.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var g=x("textposition");p(f,l,s,x,g,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i(f,l,x,y,s);var m=(l.marker.line||{}).color,d=t.getComponentMethod("errorbars","supplyDefaults");d(f,l,m||I.defaultLine,{axis:"y"}),d(f,l,m||I.defaultLine,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(l,x)}else l.visible=!1},crossTraceDefaults:function v(f,l){var y,s;function x(g){return M.coerce(s._input,s,a,g)}if("group"===l.barmode)for(var h=0;h<f.length;h++)"bar"===(s=f[h]).type&&(y=s._input,u(y,s,l,x))},handleText:p}},67713:$=>{"use strict";$.exports=function(e,M,I){return e.x="xVal"in M?M.xVal:M.x,e.y="yVal"in M?M.yVal:M.y,M.xa&&(e.xaxis=M.xa),M.ya&&(e.yaxis=M.ya),"h"===I.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},94113:($,K,e)=>{"use strict";var M=e(7347),I=e(80791),t=e(5228).isArrayOrTypedArray;K.coerceString=function(T,n,i){if("string"==typeof n){if(n||!T.noBlank)return n}else if(("number"==typeof n||!0===n)&&!T.strict)return String(n);return void 0!==i?i:T.dflt},K.coerceNumber=function(T,n,i){if(M(n)){n=+n;var u=T.min,a=T.max;if(!(void 0!==u&&n<u||void 0!==a&&n>a))return n}return void 0!==i?i:T.dflt},K.coerceColor=function(T,n,i){return I(n).isValid()?n:void 0!==i?i:T.dflt},K.coerceEnumerated=function(T,n,i){return T.coerceNumber&&(n=+n),-1!==T.values.indexOf(n)?n:void 0!==i?i:T.dflt},K.getValue=function(T,n){var i;return t(T)?n<T.length&&(i=T[n]):i=T,i},K.getLineWidth=function(T,n){return 0<n.mlw?n.mlw:t(T.marker.line.width)?0:T.marker.line.width}},54283:($,K,e)=>{"use strict";var M=e(76863),I=e(97799),t=e(8416),T=e(5228).fillText,n=e(94113).getLineWidth,i=e(91464).hoverLabelText,u=e(71103).BADNUM;function r(v,p,f,l,y){var b,c,S,w,E,P,R,s=v.cd,x=s[0].trace,h=s[0].t,g="closest"===l,m="waterfall"===x.type,d=v.maxHoverDistance,A=v.maxSpikeDistance;"h"===x.orientation?(b=f,c=p,S="y",w="x",E=te,P=ee):(b=p,c=f,S="x",w="y",P=te,E=ee);var F=x[S+"period"],_=g||F;function z(ne){return k(ne,-1)}function D(ne){return k(ne,1)}function k(ne,se){var de=ne.w;return ne[S]+se*de/2}function O(ne){return ne[S+"End"]-ne[S+"Start"]}var U=g?z:F?function(ne){return ne.p-O(ne)/2}:function(ne){return Math.min(z(ne),ne.p-h.bardelta/2)},H=g?D:F?function(ne){return ne.p+O(ne)/2}:function(ne){return Math.max(D(ne),ne.p+h.bardelta/2)};function j(ne,se,de){return y.finiteRange&&(de=0),M.inbox(ne-b,se-b,de+Math.min(1,Math.abs(se-ne)/R)-1)}function ee(ne){return j(U(ne),H(ne),d)}function B(ne){var se=ne[w];if(m){var de=Math.abs(ne.rawS)||0;c>0?se+=de:c<0&&(se-=de)}return se}function te(ne){var se=c,de=ne.b,be=B(ne);return M.inbox(de-se,be-se,d+(be-se)/(be-de)-1)}var oe=v[S+"a"],ie=v[w+"a"];R=Math.abs(oe.r2c(oe.range[1])-oe.r2c(oe.range[0]));var Y=M.getDistanceFunction(l,E,P,function V(ne){return(E(ne)+P(ne))/2});if(M.getClosest(s,Y,v),!1!==v.index&&s[v.index].p!==u){_||(U=function(ne){return Math.min(z(ne),ne.p-h.bargroupwidth/2)},H=function(ne){return Math.max(D(ne),ne.p+h.bargroupwidth/2)});var X=s[v.index],J=x.base?X.b+X.s:X.s;v[w+"0"]=v[w+"1"]=ie.c2p(X[w],!0),v[w+"LabelVal"]=J;var ue=h.extents[h.extents.round(X.p)];v[S+"0"]=oe.c2p(g?U(X):ue[0],!0),v[S+"1"]=oe.c2p(g?H(X):ue[1],!0);var re=void 0!==X.orig_p;return v[S+"LabelVal"]=re?X.orig_p:X.p,v.labelLabel=i(oe,v[S+"LabelVal"],x[S+"hoverformat"]),v.valueLabel=i(ie,v[w+"LabelVal"],x[w+"hoverformat"]),v.baseLabel=i(ie,X.b,x[w+"hoverformat"]),v.spikeDistance=(function q(ne){var se=c,de=ne.b,be=B(ne);return M.inbox(de-se,be-se,A+(be-se)/(be-de)-1)}(X)+function W(ne){return j(z(ne),D(ne),A)}(X))/2,v[S+"Spike"]=oe.c2p(X.p,!0),T(X,x,v),v.hovertemplate=x.hovertemplate,v}}function o(v,p){var f=p.mcc||v.marker.color,l=p.mlcc||v.marker.line.color,y=n(v,p);return t.opacity(f)?f:t.opacity(l)&&y?l:void 0}$.exports={hoverPoints:function a(v,p,f,l,y){var s=r(v,p,f,l,y);if(s){var x=s.cd,h=x[0].trace,g=x[s.index];return s.color=o(h,g),I.getComponentMethod("errorbars","hoverInfo")(g,h,s),[s]}},hoverOnBars:r,getTraceColor:o}},63429:($,K,e)=>{"use strict";$.exports={attributes:e(99009),layoutAttributes:e(32518),supplyDefaults:e(74401).supplyDefaults,crossTraceDefaults:e(74401).crossTraceDefaults,supplyLayoutDefaults:e(1865),calc:e(46088),crossTraceCalc:e(23870).crossTraceCalc,colorbar:e(74899),arraysToCalcdata:e(92811),plot:e(23038).plot,style:e(82563).style,styleOnSelect:e(82563).styleOnSelect,hoverPoints:e(54283).hoverPoints,eventData:e(67713),selectPoints:e(85499),moduleType:"trace",name:"bar",basePlotModule:e(24329),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set to *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},32518:$=>{"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},1865:($,K,e)=>{"use strict";var M=e(97799),I=e(91464),t=e(5228),T=e(32518);$.exports=function(n,i,u){function a(h,g){return t.coerce(n,i,T,h,g)}for(var r=!1,o=!1,v=!1,p={},f=a("barmode"),l=0;l<u.length;l++){var y=u[l];if(M.traceIs(y,"bar")&&y.visible){if(r=!0,"group"===f){var s=y.xaxis+y.yaxis;p[s]&&(v=!0),p[s]=!0}if(y.visible&&"histogram"===y.type)"category"!==I.getFromId({_fullLayout:i},y["v"===y.orientation?"xaxis":"yaxis"]).type&&(o=!0)}}r?("overlay"!==f&&a("barnorm"),a("bargap",o&&!v?0:.2),a("bargroupgap")):delete i.barmode}},23038:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(5228),T=e(88565),n=e(8416),i=e(27630),u=e(97799),a=e(91464).tickText,r=e(99771),o=r.recordMinTextSize,v=r.clearMinTextSize,p=e(82563),f=e(94113),l=e(98466),y=e(99009),s=y.text,x=y.textposition,h=e(40235).appendArrayPointValue,g=l.TEXTPAD;function m(U){return U.id}function A(U,H){return U<H?1:-1}function c(U,H,j,ee){var W;return!H.uniformtext.mode&&S(j)?(ee&&(W=ee()),U.transition().duration(j.duration).ease(j.easing).each("end",function(){W&&W()}).each("interrupt",function(){W&&W()})):U}function S(U){return U&&U.duration>0}function P(U){return"auto"===U?0:U}function R(U,H){var j=Math.PI/180*H,ee=Math.abs(Math.sin(j)),W=Math.abs(Math.cos(j));return{x:U.width*W+U.height*ee,y:U.width*ee+U.height*W}}function F(U,H,j,ee,W,B){var te=!!B.isHorizontal,q=!!B.constrained,oe=B.angle||0,ie=B.anchor||"end",V="end"===ie,Y="start"===ie,X=((B.leftToRight||0)+1)/2,J=1-X,ue=W.width,re=W.height,ne=Math.abs(H-U),se=Math.abs(ee-j),de=ne>2*g&&se>2*g?g:0;ne-=2*de,se-=2*de;var be=P(oe);"auto"===oe&&!(ue<=ne&&re<=se)&&(ue>ne||re>se)&&(!(ue>se||re>ne)||ue<re!=ne<se)&&(be+=90);var De=R(W,be),_e=1;q&&(_e=Math.min(1,ne/De.x,se/De.y));var Ce=W.left*J+W.right*X,Le=(W.top+W.bottom)/2,Fe=(U+g)*J+(H-g)*X,ke=(j+ee)/2,ze=0,Pe=0;if(Y||V){var Ie=(te?De.x:De.y)/2,Qe=te?A(U,H):A(j,ee);te?Y?(Fe=U+Qe*de,ze=-Qe*Ie):(Fe=H-Qe*de,ze=Qe*Ie):Y?(ke=j+Qe*de,Pe=-Qe*Ie):(ke=ee-Qe*de,Pe=Qe*Ie)}return{textX:Ce,textY:Le,targetX:Fe,targetY:ke,anchorX:ze,anchorY:Pe,scale:_e,rotate:be}}$.exports={plot:function w(U,H,j,ee,W,B){var te=H.xaxis,q=H.yaxis,oe=U._fullLayout,ie=U._context.staticPlot;W||(W={mode:oe.barmode,norm:oe.barmode,gap:oe.bargap,groupgap:oe.bargroupgap},v("bar",oe));var V=t.makeTraceGroups(ee,j,"trace bars").each(function(Y){var ae=M.select(this),X=Y[0].trace,J="waterfall"===X.type,ue="funnel"===X.type,ne="bar"===X.type||ue,se=0;J&&X.connector.visible&&"between"===X.connector.mode&&(se=X.connector.line.width/2);var de="h"===X.orientation,be=S(W),De=t.ensureSingle(ae,"g","points"),_e=function d(U){if(U.ids)return m}(X),Ce=De.selectAll("g.point").data(t.identity,_e);Ce.enter().append("g").classed("point",!0),Ce.exit().remove(),Ce.each(function(Fe,ke){var nt,ct,ze=M.select(this),Pe=function b(U,H,j,ee){var W=[],B=[],te=ee?H:j,q=ee?j:H;return W[0]=te.c2p(U.s0,!0),B[0]=q.c2p(U.p0,!0),W[1]=te.c2p(U.s1,!0),B[1]=q.c2p(U.p1,!0),ee?[W,B]:[B,W]}(Fe,te,q,de),Ie=Pe[0][0],Qe=Pe[0][1],at=Pe[1][0],Be=Pe[1][1],Ne=0==(de?Qe-Ie:Be-at);if(Ne&&ne&&f.getLineWidth(X,Fe)&&(Ne=!1),Ne||(Ne=!(I(Ie)&&I(Qe)&&I(at)&&I(Be))),Fe.isBlank=Ne,Ne&&(de?Qe=Ie:Be=at),se&&!Ne&&(de?(Ie-=A(Ie,Qe)*se,Qe+=A(Ie,Qe)*se):(at-=A(at,Be)*se,Be+=A(at,Be)*se)),"waterfall"===X.type){if(!Ne){var mt=X[Fe.dir].marker;nt=mt.line.width,ct=mt.color}}else nt=f.getLineWidth(X,Fe),ct=Fe.mc||X.marker.color;function Bt(st){var Se=M.round(nt/2%1,2);return 0===W.gap&&0===W.groupgap?M.round(Math.round(st)-Se,2):st}if(!U._context.staticPlot){var St=n.opacity(ct)<1||nt>.01?Bt:function Rt(st,Se,pe){return pe&&st===Se?st:Math.abs(st-Se)>=2?Bt(st):st>Se?Math.ceil(st):Math.floor(st)};Ie=St(Ie,Qe,de),Qe=St(Qe,Ie,de),at=St(at,Be,!de),Be=St(Be,at,!de)}var Xt=c(t.ensureSingle(ze,"path"),oe,W,B);if(Xt.style("vector-effect",ie?"none":"non-scaling-stroke").attr("d",isNaN((Qe-Ie)*(Be-at))||Ne&&U._context.staticPlot?"M0,0Z":"M"+Ie+","+at+"V"+Be+"H"+Qe+"V"+at+"Z").call(i.setClipUrl,H.layerClipId,U),!oe.uniformtext.mode&&be){var Mt=i.makePointStyleFns(X);i.singlePointStyle(Fe,Xt,X,Mt,U)}(function E(U,H,j,ee,W,B,te,q,oe,ie,V){var J,Y=H.xaxis,ae=H.yaxis,X=U._fullLayout;function ue(st,Se,pe){return t.ensureSingle(st,"text").text(Se).attr({class:"bartext bartext-"+J,"text-anchor":"middle","data-notex":1}).call(i.font,pe).call(T.convertToTspans,U)}var re=ee[0].trace,ne="h"===re.orientation,se=function z(U,H,j,ee,W){var q,B=H[0].trace,te=B.texttemplate;return q=te?function k(U,H,j,ee,W){var B=H[0].trace,te=t.castOption(B,j,"texttemplate");if(!te)return"";var Y,ae,X,J,q="histogram"===B.type,oe="waterfall"===B.type,ie="funnel"===B.type,V="h"===B.orientation;function ue(_e){return a(ae,ae.c2l(_e),!0).text}function re(_e){return a(J,J.c2l(_e),!0).text}V?(Y="y",ae=W,X="x",J=ee):(Y="x",ae=ee,X="y",J=W);var ne=H[j],se={};se.label=ne.p,se.labelLabel=se[Y+"Label"]=ue(ne.p);var de=t.castOption(B,ne.i,"text");(0===de||de)&&(se.text=de),se.value=ne.s,se.valueLabel=se[X+"Label"]=re(ne.s);var be={};h(be,B,ne.i),(q||void 0===be.x)&&(be.x=V?se.value:se.label),(q||void 0===be.y)&&(be.y=V?se.label:se.value),(q||void 0===be.xLabel)&&(be.xLabel=V?se.valueLabel:se.labelLabel),(q||void 0===be.yLabel)&&(be.yLabel=V?se.labelLabel:se.valueLabel),oe&&(se.delta=+ne.rawS||ne.s,se.deltaLabel=re(se.delta),se.final=ne.v,se.finalLabel=re(se.final),se.initial=se.final-se.delta,se.initialLabel=re(se.initial)),ie&&(se.value=ne.s,se.valueLabel=re(se.value),se.percentInitial=ne.begR,se.percentInitialLabel=t.formatPercent(ne.begR),se.percentPrevious=ne.difR,se.percentPreviousLabel=t.formatPercent(ne.difR),se.percentTotal=ne.sumR,se.percenTotalLabel=t.formatPercent(ne.sumR));var De=t.castOption(B,ne.i,"customdata");return De&&(se.customdata=De),t.texttemplateString(te,se,U._d3locale,be,se,B._meta||{})}(U,H,j,ee,W):B.textinfo?function O(U,H,j,ee){var W=U[0].trace,B="h"===W.orientation,te="waterfall"===W.type,q="funnel"===W.type;function oe(De){return a(B?ee:j,De,!0).text}function ie(De){return a(B?j:ee,+De,!0).text}var J,V=W.textinfo,Y=U[H],ae=V.split("+"),X=[],ue=function(De){return-1!==ae.indexOf(De)};if(ue("label")&&X.push(oe(U[H].p)),ue("text")&&(J=t.castOption(W,Y.i,"text"),(0===J||J)&&X.push(J)),te){var re=+Y.rawS||Y.s,ne=Y.v,se=ne-re;ue("initial")&&X.push(ie(se)),ue("delta")&&X.push(ie(re)),ue("final")&&X.push(ie(ne))}if(q){ue("value")&&X.push(ie(Y.s));var de=0;ue("percent initial")&&de++,ue("percent previous")&&de++,ue("percent total")&&de++;var be=de>1;ue("percent initial")&&(J=t.formatPercent(Y.begR),be&&(J+=" of initial"),X.push(J)),ue("percent previous")&&(J=t.formatPercent(Y.difR),be&&(J+=" of previous"),X.push(J)),ue("percent total")&&(J=t.formatPercent(Y.sumR),be&&(J+=" of total"),X.push(J))}return X.join("<br>")}(H,j,ee,W):f.getValue(B.text,j),f.coerceString(s,q)}(X,ee,W,Y,ae);J=function D(U,H){var j=f.getValue(U.textposition,H);return f.coerceEnumerated(x,j)}(re,W);var de="stack"===ie.mode||"relative"===ie.mode,be=ee[W],De=!de||be._outmost;if(!se||"none"===J||(be.isBlank||B===te||q===oe)&&("auto"===J||"inside"===J))return void j.select("text").remove();var _e=X.font,Ce=p.getBarColor(ee[W],re),Le=p.getInsideTextFont(re,W,_e,Ce),Fe=p.getOutsideTextFont(re,W,_e),ke=j.datum();ne?"log"===Y.type&&ke.s0<=0&&(B=Y.range[0]<Y.range[1]?0:Y._length):"log"===ae.type&&ke.s0<=0&&(q=ae.range[0]<ae.range[1]?ae._length:0);var Ie,Qe,at,Be,Ne,ze=Math.abs(te-B)-2*g,Pe=Math.abs(oe-q)-2*g;if("outside"===J&&!De&&!be.hasB&&(J="inside"),"auto"===J)if(De){J="inside",Ie=ue(j,se,Ne=t.ensureUniformFontSize(U,Le)),at=(Qe=i.bBox(Ie.node())).width,Be=Qe.height,at>0&&Be>0&&(at<=ze&&Be<=Pe||at<=Pe&&Be<=ze||(ne?ze>=at*(Pe/Be):Pe>=Be*(ze/at)))?J="inside":(J="outside",Ie.remove(),Ie=null)}else J="inside";if(!Ie){var Rt=(Ie=ue(j,se,Ne=t.ensureUniformFontSize(U,"outside"===J?Fe:Le))).attr("transform");if(Ie.attr("transform",""),at=(Qe=i.bBox(Ie.node())).width,Be=Qe.height,Ie.attr("transform",Rt),at<=0||Be<=0)return void Ie.remove()}var St,Xt,zt=re.textangle;"outside"===J?(Xt="both"===re.constraintext||"outside"===re.constraintext,St=function _(U,H,j,ee,W,B){var X,te=!!B.isHorizontal,q=!!B.constrained,oe=B.angle||0,ie=W.width,V=W.height,Y=Math.abs(H-U),ae=Math.abs(ee-j);X=te?ae>2*g?g:0:Y>2*g?g:0;var J=1;q&&(J=te?Math.min(1,ae/V):Math.min(1,Y/ie));var ue=P(oe),re=R(W,ue),ne=(te?re.x:re.y)/2,se=(W.left+W.right)/2,de=(W.top+W.bottom)/2,be=(U+H)/2,De=(j+ee)/2,_e=0,Ce=0,Le=te?A(H,U):A(j,ee);return te?(be=H-Le*X,_e=Le*ne):(De=ee+Le*X,Ce=-Le*ne),{textX:se,textY:de,targetX:be,targetY:De,anchorX:_e,anchorY:Ce,scale:J,rotate:ue}}(B,te,q,oe,Qe,{isHorizontal:ne,constrained:Xt,angle:zt})):(Xt="both"===re.constraintext||"inside"===re.constraintext,St=F(B,te,q,oe,Qe,{isHorizontal:ne,constrained:Xt,angle:zt,anchor:re.insidetextanchor})),St.fontSize=Ne.size,o("histogram"===re.type?"bar":re.type,St,X),be.transform=St;var Mt=c(Ie,X,ie,V);t.setTransormAndDisplay(Mt,St)})(U,H,ze,Y,ke,Ie,Qe,at,Be,W,B),H.layerClipId&&i.hideOutsideRangePoint(Fe,ze.select("text"),te,q,X.xcalendar,X.ycalendar)});var Le=!1===X.cliponaxis;i.setClipUrl(ae,Le?null:H.layerClipId,U)});u.getComponentMethod("errorbars","plot")(U,V,H,W)},toMoveInsideBar:F}},85499:$=>{"use strict";function K(e,M,I,t,T){var n=M.c2p(t?e.s0:e.p0,!0),i=M.c2p(t?e.s1:e.p1,!0),u=I.c2p(t?e.p0:e.s0,!0),a=I.c2p(t?e.p1:e.s1,!0);return T?[(n+i)/2,(u+a)/2]:t?[i,(u+a)/2]:[(n+i)/2,a]}$.exports=function(M,I){var o,t=M.cd,T=M.xaxis,n=M.yaxis,i=t[0].trace,u="funnel"===i.type,a="h"===i.orientation,r=[];if(!1===I)for(o=0;o<t.length;o++)t[o].selected=0;else for(o=0;o<t.length;o++){var v=t[o],p="ct"in v?v.ct:K(v,T,n,a,u);I.contains(p,!1,o,M)?(r.push({pointNumber:o,x:T.c2d(v.x),y:n.c2d(v.y)}),v.selected=1):v.selected=0}return r}},72120:($,K,e)=>{"use strict";$.exports=I;var M=e(5228).distinctVals;function I(t,T){this.traces=t,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var n=1/0,i=T.posAxis._id.charAt(0),u=[],a=0;a<t.length;a++){for(var r=t[a],o=0;o<r.length;o++){var v=r[o],p=v.p;void 0===p&&(p=v[i]),void 0!==p&&u.push(p)}r[0]&&r[0].width1&&(n=Math.min(r[0].width1,n))}this.positions=u;var f=M(u);this.distinctPositions=f.vals,1===f.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(f.minDiff,n);var l=(T.posAxis||{}).type;("category"===l||"multicategory"===l)&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}I.prototype.put=function(T,n){var i=this.getLabel(T,n),u=this.bins[i]||0;return this.bins[i]=u+n,u},I.prototype.get=function(T,n){var i=this.getLabel(T,n);return this.bins[i]||0},I.prototype.getLabel=function(T,n){return(n<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?T:Math.round(T/this.binWidth))}},82563:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(27630),T=e(5228),n=e(97799),i=e(99771).resizeText,u=e(99009),a=u.textfont,r=u.insidetextfont,o=u.outsidetextfont,v=e(94113);function f(c,S,w){t.pointStyle(c.selectAll("path"),S,w),l(c,S,w)}function l(c,S,w){c.selectAll("text").each(function(E){var P=M.select(this),R=T.ensureUniformFontSize(w,h(P,E,S,w));t.font(P,R)})}function h(c,S,w,E){var P=E._fullLayout.font,R=w.textfont;if(c.classed("bartext-inside")){var F=b(S,w);R=m(w,S.i,P,F)}else c.classed("bartext-outside")&&(R=d(w,S.i,P));return R}function g(c,S,w){return A(a,c.textfont,S,w)}function m(c,S,w,E){var P=g(c,S,w);return(void 0===c._input.textfont||void 0===c._input.textfont.color||Array.isArray(c.textfont.color)&&void 0===c.textfont.color[S])&&(P={color:I.contrast(E),family:P.family,size:P.size}),A(r,c.insidetextfont,S,P)}function d(c,S,w){var E=g(c,S,w);return A(o,c.outsidetextfont,S,E)}function A(c,S,w,E){S=S||{};var P=v.getValue(S.family,w),R=v.getValue(S.size,w),F=v.getValue(S.color,w);return{family:v.coerceString(c.family,P,E.family),size:v.coerceNumber(c.size,R,E.size),color:v.coerceColor(c.color,F,E.color)}}function b(c,S){return"waterfall"===S.type?S[c.dir].marker.color:c.mcc||c.mc||S.marker.color}$.exports={style:function p(c){var S=M.select(c).selectAll("g.barlayer").selectAll("g.trace");i(c,S,"bar");var w=S.size(),E=c._fullLayout;S.style("opacity",function(P){return P[0].trace.opacity}).each(function(P){("stack"===E.barmode&&w>1||0===E.bargap&&0===E.bargroupgap&&!P[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),S.selectAll("g.points").each(function(P){f(M.select(this),P[0].trace,c)}),n.getComponentMethod("errorbars","style")(S)},styleTextPoints:l,styleOnSelect:function y(c,S,w){var E=S[0].trace;E.selectedpoints?function s(c,S,w){t.selectedPointStyle(c.selectAll("path"),S),function x(c,S,w){c.each(function(E){var R,P=M.select(this);if(E.selected){R=T.ensureUniformFontSize(w,h(P,E,S,w));var F=S.selected.textfont&&S.selected.textfont.color;F&&(R.color=F),t.font(P,R)}else t.selectedTextStyle(P,S)})}(c.selectAll("text"),S,w)}(w,E,c):(f(w,E,c),n.getComponentMethod("errorbars","style")(w))},getInsideTextFont:m,getOutsideTextFont:d,getBarColor:b,resizeText:i}},61115:($,K,e)=>{"use strict";var M=e(8416),I=e(981).hasColorscale,t=e(14739),T=e(5228).coercePattern;$.exports=function(i,u,a,r,o){var v=a("marker.color",r),p=I(i,"marker");p&&t(i,u,o,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",M.defaultLine),I(i,"marker.line")&&t(i,u,o,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),T(a,"marker.pattern",v,p),a("selected.marker.color"),a("unselected.marker.color")}},99771:($,K,e)=>{"use strict";var M=e(21572),I=e(5228);function i(u){return"_"+u+"Text_minsize"}$.exports={recordMinTextSize:function T(u,a,r){if(r.uniformtext.mode){var o=i(u),v=r.uniformtext.minsize,p=a.scale*a.fontSize;a.hide=p<v,r[o]=r[o]||1/0,a.hide||(r[o]=Math.min(r[o],Math.max(p,v)))}},clearMinTextSize:function n(u,a){a[i(u)]=void 0},resizeText:function t(u,a,r){var o=u._fullLayout,v=o["_"+r+"Text_minsize"];if(v){var f,p="hide"===o.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":f="g.slice";break;case"treemap":case"icicle":f="g.slice, g.pathbar";break;default:f="g.points > g.point"}a.selectAll(f).each(function(l){var y=l.transform;if(y){y.scale=p&&y.hide?0:v/y.fontSize;var s=M.select(this).select("text");I.setTransormAndDisplay(s,y)}})}}}},45546:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(18836).extendFlat,t=e(75728),T=e(99009);$.exports={r:t.r,theta:t.theta,r0:t.r0,dr:t.dr,theta0:t.theta0,dtheta:t.dtheta,thetaunit:t.thetaunit,base:I({},T.base,{description:["Sets where the bar base is drawn (in radial axis units).","In *stack* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")}),offset:I({},T.offset,{description:["Shifts the angular position where the bar is drawn","(in *thetatunit* units)."].join(" ")}),width:I({},T.width,{description:["Sets the bar angular width (in *thetaunit* units)."].join(" ")}),text:I({},T.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:I({},T.hovertext,{description:"Same as `text`."}),marker:T.marker,hoverinfo:t.hoverinfo,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},78480:($,K,e)=>{"use strict";var M=e(981).hasColorscale,I=e(93727),t=e(5228).isArrayOrTypedArray,T=e(92811),n=e(23870).setGroupPositions,i=e(20107),u=e(97799).traceIs,a=e(5228).extendFlat;$.exports={calc:function r(v,p){for(var f=v._fullLayout,l=p.subplot,y=f[l].radialaxis,s=f[l].angularaxis,x=y.makeCalcdata(p,"r"),h=s.makeCalcdata(p,"theta"),g=p._length,m=new Array(g),d=x,A=h,b=0;b<g;b++)m[b]={p:A[b],s:d[b]};function c(S){var w=p[S];void 0!==w&&(p["_"+S]=t(w)?s.makeCalcdata(p,S):s.d2c(w,p.thetaunit))}return"linear"===s.type&&(c("width"),c("offset")),M(p,"marker")&&I(v,p,{vals:p.marker.color,containerStr:"marker",cLetter:"c"}),M(p,"marker.line")&&I(v,p,{vals:p.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(m,p),i(m,p),m},crossTraceCalc:function o(v,p,f){for(var l=v.calcdata,y=[],s=0;s<l.length;s++){var x=l[s],h=x[0].trace;!0===h.visible&&u(h,"bar")&&h.subplot===f&&y.push(x)}var g=a({},p.radialaxis,{_id:"x"}),m=p.angularaxis;n(v,m,g,y,{mode:p.barmode,norm:p.barnorm,gap:p.bargap,groupgap:p.bargroupgap})}}},66184:($,K,e)=>{"use strict";var M=e(5228),I=e(81424).handleRThetaDefaults,t=e(61115),T=e(45546);$.exports=function(i,u,a,r){function o(p,f){return M.coerce(i,u,T,p,f)}I(i,u,r,o)?(o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),t(i,u,o,a,r),M.coerceSelectionMarkerOpacity(u,o)):u.visible=!1}},77137:($,K,e)=>{"use strict";var M=e(76863),I=e(5228),t=e(54283).getTraceColor,T=I.fillText,n=e(87329).makeHoverPointText,i=e(92275).isPtInsidePolygon;$.exports=function(a,r,o){var v=a.cd,p=v[0].trace,f=a.subplot,l=f.radialAxis,y=f.angularAxis,s=f.vangles,x=s?i:I.isPtInsideSector,h=a.maxHoverDistance,g=y._period||2*Math.PI,m=Math.abs(l.g2p(Math.sqrt(r*r+o*o))),d=Math.atan2(o,r);l.range[0]>l.range[1]&&(d+=Math.PI);if(M.getClosest(v,function(w){return x(m,d,[w.rp0,w.rp1],[w.thetag0,w.thetag1],s)?h+Math.min(1,Math.abs(w.thetag1-w.thetag0)/g)-1+(w.rp1-m)/(w.rp1-w.rp0)-1:1/0},a),!1!==a.index){var c=v[a.index];a.x0=a.x1=c.ct[0],a.y0=a.y1=c.ct[1];var S=I.extendFlat({},c,{r:c.s,theta:c.p});return T(c,p,a),n(S,p,f,a),a.hovertemplate=p.hovertemplate,a.color=t(p,c),a.xLabelVal=a.yLabelVal=void 0,c.s<0&&(a.idealAlign="left"),[a]}}},45009:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(80147),categories:["polar","bar","showLegend"],attributes:e(45546),layoutAttributes:e(98541),supplyDefaults:e(66184),supplyLayoutDefaults:e(86636),calc:e(78480).calc,crossTraceCalc:e(78480).crossTraceCalc,plot:e(49187),colorbar:e(74899),formatLabels:e(75818),style:e(82563).style,styleOnSelect:e(82563).styleOnSelect,hoverPoints:e(77137),selectPoints:e(85499),meta:{hrName:"bar_polar",description:["The data visualized by the radial span of the bars is set in `r`"].join(" ")}}},98541:$=>{"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc",description:["Sets the gap between bars of","adjacent location coordinates.","Values are unitless, they represent fractions of the minimum difference","in bar positions in the data."].join(" ")}}},86636:($,K,e)=>{"use strict";var M=e(5228),I=e(98541);$.exports=function(t,T,n){var u,i={};function a(v,p){return M.coerce(t[u]||{},T[u],I,v,p)}for(var r=0;r<n.length;r++){var o=n[r];"barpolar"===o.type&&!0===o.visible&&(i[u=o.subplot]||(a("barmode"),a("bargap"),i[u]=1))}}},49187:($,K,e)=>{"use strict";var M=e(21572),I=e(7347),t=e(5228),T=e(27630),n=e(92275);$.exports=function(a,r,o){var v=a._context.staticPlot,p=r.xaxis,f=r.yaxis,l=r.radialAxis,y=r.angularAxis,s=function i(u){var a=u.cxx,r=u.cyy;return u.vangles?function(o,v,p,f){var l,y;t.angleDelta(p,f)>0?(l=p,y=f):(l=f,y=p);var h=[n.findEnclosingVertexAngles(l,u.vangles)[0],(l+y)/2,n.findEnclosingVertexAngles(y,u.vangles)[1]];return n.pathPolygonAnnulus(o,v,l,y,h,a,r)}:function(o,v,p,f){return t.pathAnnulus(o,v,p,f,a,r)}}(r),x=r.layers.frontplot.select("g.barlayer");t.makeTraceGroups(x,o,"trace bars").each(function(){var h=M.select(this),m=t.ensureSingle(h,"g","points").selectAll("g.point").data(t.identity);m.enter().append("g").style("vector-effect",v?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),m.exit().remove(),m.each(function(d){var E,A=M.select(this),b=d.rp0=l.c2p(d.s0),c=d.rp1=l.c2p(d.s1),S=d.thetag0=y.c2g(d.p0),w=d.thetag1=y.c2g(d.p1);if(I(b)&&I(c)&&I(S)&&I(w)&&b!==c&&S!==w){var P=l.c2g(d.s1),R=(S+w)/2;d.ct=[p.c2p(P*Math.cos(R)),f.c2p(P*Math.sin(R))],E=s(b,c,S,w)}else E="M0,0Z";t.ensureSingle(A,"path").attr("d",E)}),T.setClipUrl(h,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,a)})}},76643:($,K,e)=>{"use strict";var M=e(55405),I=e(99009),t=e(36593),T=e(88489).axisHoverFormat,n=e(9430).fF,i=e(18836).extendFlat,u=M.marker,a=u.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the y sample data or coordinates.","See overview for more info."].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x sample data or coordinates.","See overview for more info."].join(" ")},x0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the x coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},y0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the y coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},dx:{valType:"number",editType:"calc",description:["Sets the x coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},dy:{valType:"number",editType:"calc",description:["Sets the y coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes",description:["Sets the trace name.","The trace name appears as the legend item and on hover.","For box traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical"].join(" ")},q1:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 1 values.","There should be as many items as the number of boxes desired."].join(" ")},median:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the median values.","There should be as many items as the number of boxes desired."].join(" ")},q3:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 3 values.","There should be as many items as the number of boxes desired."].join(" ")},lowerfence:{valType:"data_array",editType:"calc",description:["Sets the lower fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `lowerfence` is not provided but a sample (in `y` or `x`) is set,","we compute the lower as the last sample point below 1.5 times the IQR."].join(" ")},upperfence:{valType:"data_array",editType:"calc",description:["Sets the upper fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `upperfence` is not provided but a sample (in `y` or `x`) is set,","we compute the upper as the last sample point above 1.5 times the IQR."].join(" ")},notched:{valType:"boolean",editType:"calc",description:["Determines whether or not notches are drawn.","Notches displays a confidence interval around the median.","We compute the confidence interval as median +/- 1.57 * IQR / sqrt(N),","where IQR is the interquartile range and N is the sample size.","If two boxes' notches do not overlap there is 95% confidence their medians differ.","See https://sites.google.com/site/davidsstatistics/home/notched-box-plots for more info.","Defaults to *false* unless `notchwidth` or `notchspan` is set."].join(" ")},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc",description:["Sets the width of the notches relative to","the box' width.","For example, with 0, the notches are as wide as the box(es)."].join(" ")},notchspan:{valType:"data_array",editType:"calc",description:["Sets the notch span from the boxes' `median` values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `notchspan` is not provided but a sample (in `y` or `x`) is set,","we compute it as 1.57 * IQR / sqrt(N),","where N is the sample size."].join(" ")},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc",description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the box(es) are shown with no sample points","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set.","Defaults to *all* under the q1/median/q3 signature.","Otherwise defaults to *outliers*."].join(" ")},jitter:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the box(es)."].join(" ")},pointpos:{valType:"number",min:-2,max:2,editType:"calc",description:["Sets the position of the sample points in relation to the box(es).","If *0*, the sample points are places over the center of the box(es).","Positive (negative) values correspond to positions to the","right (left) for vertical boxes and above (below) for horizontal boxes"].join(" ")},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1,description:["Scales the box size when sizemode=sd","Allowing boxes to be drawn across any stddev range","For example 1-stddev, 3-stddev, 5-stddev"].join(" ")},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles",description:["Sets the upper and lower bound for the boxes","quartiles means box is drawn between Q1 and Q3","SD means the box is drawn between Mean +- Standard Deviation","Argument sdmultiple (default 1) to scale the box size","So it could be drawn 1-stddev, 3-stddev etc"].join(" ")},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc",description:["If *true*, the mean of the box(es)' underlying distribution is","drawn as a dashed line inside the box(es).","If *sd* the standard deviation is also drawn.","Defaults to *true* when `mean` is set.","Defaults to *sd* when `sd` is set","Otherwise defaults to *false*."].join(" ")},mean:{valType:"data_array",editType:"calc",description:["Sets the mean values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `mean` is not provided but a sample (in `y` or `x`) is set,","we compute the mean for each box using the sample values."].join(" ")},sd:{valType:"data_array",editType:"calc",description:["Sets the standard deviation values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `sd` is not provided but a sample (in `y` or `x`) is set,","we compute the standard deviation for each box using the sample values."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the box(es).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc",description:["Sets the method used to compute the sample's Q1 and Q3 quartiles.","The *linear* method uses the 25th percentile for Q1 and 75th percentile for Q3","as computed using method #10 (listed on http://jse.amstat.org/v14n3/langford.html).","The *exclusive* method uses the median to divide the ordered dataset into two halves","if the sample is odd, it does not include the median in either half -","Q1 is then the median of the lower half and","Q3 the median of the upper half.","The *inclusive* method also uses the median to divide the ordered dataset into two halves","but if the sample is odd, it includes the median in both halves -","Q1 is then the median of the lower half and","Q3 the median of the upper half."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"calc",description:["Sets the width of the box in data coordinate","If *0* (default value) the width is automatically selected based on the positions","of other box traces in the same subplot."].join(" ")},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style",description:"Sets the color of the outlier sample points."},symbol:i({},u.symbol,{arrayOk:!1,editType:"plot"}),opacity:i({},u.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:i({},u.angle,{arrayOk:!1,editType:"calc"}),size:i({},u.size,{arrayOk:!1,editType:"calc"}),color:i({},u.color,{arrayOk:!1,editType:"style"}),line:{color:i({},a.color,{arrayOk:!1,dflt:t.defaultLine,editType:"style"}),width:i({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style",description:["Sets the border line color of the outlier sample points.","Defaults to marker.color"].join(" ")},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style",description:["Sets the border line width (in px) of the outlier sample points."].join(" ")},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the box(es)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the box(es)."},editType:"plot"},fillcolor:M.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc",description:["Sets the width of the whiskers relative to","the box' width.","For example, with 1, the whiskers are as wide as the box(es)."].join(" ")},showwhiskers:{valType:"boolean",editType:"calc",description:["Determines whether or not whiskers are visible.","Defaults to true for `sizemode` *quartiles*, false for *sd*."].join(" ")},offsetgroup:I.offsetgroup,alignmentgroup:I.alignmentgroup,selected:{marker:M.selected.marker,editType:"style"},unselected:{marker:M.unselected.marker,editType:"style"},text:i({},M.text,{description:["Sets the text elements associated with each sample value.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertext:i({},M.hovertext,{description:"Same as `text`."}),hovertemplate:n({description:["N.B. This only has an effect when hovering on points."].join(" ")}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style",description:["Do the hover effects highlight individual boxes ","or sample points or both?"].join(" ")}}},92667:($,K,e)=>{"use strict";var M=e(7347),I=e(91464),t=e(62311),T=e(5228),n=e(71103).BADNUM,i=T._;$.exports=function(d,A){var P,R,F,_,z,D,k,b=d._fullLayout,c=I.getFromId(d,A.xaxis||"x"),S=I.getFromId(d,A.yaxis||"y"),w=[],E="violin"===A.type?"_numViolins":"_numBoxes";"h"===A.orientation?(F=c,_="x",z=S,D="y",k=!!A.yperiodalignment):(F=S,_="y",z=c,D="x",k=!!A.xperiodalignment);var B,te,q,oe,ie,V,O=function u(m,d,A,b){var R,c=d in m,S=d+"0"in m,w="d"+d in m;if(c||S&&w){var E=A.makeCalcdata(m,d);return[t(m,A,d,E).vals,E]}R=S?m[d+"0"]:"name"in m&&("category"===A.type||M(m.name)&&-1!==["linear","log"].indexOf(A.type)||T.isDateTime(m.name)&&"date"===A.type)?m.name:b;for(var F="multicategory"===A.type?A.r2c_just_indices(R):A.d2c(R,0,m[d+"calendar"]),_=m._length,z=new Array(_),D=0;D<_;D++)z[D]=F;return[z]}(A,D,z,b[E]),U=O[0],H=O[1],j=T.distinctVals(U,z),ee=j.vals,W=j.minDiff/2,Y="all"===(A.boxpoints||A.points)?T.identity:function(Rt){return Rt.v<B.lf||Rt.v>B.uf};if(A._hasPreCompStats){var ae=A[_],X=function(Rt){return F.d2c((A[Rt]||[])[P])},J=1/0,ue=-1/0;for(P=0;P<A._length;P++){var re=U[P];if(M(re)){if((B={}).pos=B[D]=re,k&&H&&(B.orig_p=H[P]),B.q1=X("q1"),B.med=X("median"),B.q3=X("q3"),te=[],ae&&T.isArrayOrTypedArray(ae[P]))for(R=0;R<ae[P].length;R++)(V=F.d2c(ae[P][R]))!==n&&(v(ie={v:V,i:[P,R]},A,[P,R]),te.push(ie));if(B.pts=te.sort(f),oe=(q=B[_]=te.map(l)).length,B.med!==n&&B.q1!==n&&B.q3!==n&&B.med>=B.q1&&B.q3>=B.med){var ne=X("lowerfence");B.lf=ne!==n&&ne<=B.q1?ne:y(B,q,oe);var se=X("upperfence");B.uf=se!==n&&se>=B.q3?se:s(B,q,oe);var de=X("mean");B.mean=de!==n?de:oe?T.mean(q,oe):(B.q1+B.q3)/2;var be=X("sd");B.sd=de!==n&&be>=0?be:oe?T.stdev(q,oe,B.mean):B.q3-B.q1,B.lo=x(B),B.uo=h(B);var De=X("notchspan");De=De!==n&&De>0?De:g(B,oe),B.ln=B.med-De,B.un=B.med+De;var _e=B.lf,Ce=B.uf;A.boxpoints&&q.length&&(_e=Math.min(_e,q[0]),Ce=Math.max(Ce,q[oe-1])),A.notched&&(_e=Math.min(_e,B.ln),Ce=Math.max(Ce,B.un)),B.min=_e,B.max=Ce}else{var Le;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+B.q1,"median = "+B.med,"q3 = "+B.q3].join("\n")),Le=B.med!==n?B.med:B.q1!==n?B.q3!==n?(B.q1+B.q3)/2:B.q1:B.q3!==n?B.q3:0,B.med=Le,B.q1=B.q3=Le,B.lf=B.uf=Le,B.mean=B.sd=Le,B.ln=B.un=Le,B.min=B.max=Le}J=Math.min(J,B.min),ue=Math.max(ue,B.max),B.pts2=te.filter(Y),w.push(B)}}A._extremes[F._id]=I.findExtremes(F,[J,ue],{padded:!0})}else{var Fe=F.makeCalcdata(A,_),ke=function a(m,d){for(var A=m.length,b=new Array(A+1),c=0;c<A;c++)b[c]=m[c]-d;return b[A]=m[A-1]+d,b}(ee,W),ze=ee.length,Pe=function r(m){for(var d=new Array(m),A=0;A<m;A++)d[A]=[];return d}(ze);for(P=0;P<A._length;P++)if(V=Fe[P],M(V)){var Ie=T.findBin(U[P],ke);Ie>=0&&Ie<ze&&(v(ie={v:V,i:P},A,P),Pe[Ie].push(ie))}var Qe=1/0,at=-1/0,Be=A.quartilemethod,Ne="exclusive"===Be,nt="inclusive"===Be;for(P=0;P<ze;P++)if(Pe[P].length>0){var ct,mt;if((B={}).pos=B[D]=ee[P],te=B.pts=Pe[P].sort(f),oe=(q=B[_]=te.map(l)).length,B.min=q[0],B.max=q[oe-1],B.mean=T.mean(q,oe),B.sd=T.stdev(q,oe,B.mean)*A.sdmultiple,B.med=T.interp(q,.5),oe%2&&(Ne||nt))Ne?(ct=q.slice(0,oe/2),mt=q.slice(oe/2+1)):nt&&(ct=q.slice(0,oe/2+1),mt=q.slice(oe/2)),B.q1=T.interp(ct,.5),B.q3=T.interp(mt,.5);else B.q1=T.interp(q,.25),B.q3=T.interp(q,.75);B.lf=y(B,q,oe),B.uf=s(B,q,oe),B.lo=x(B),B.uo=h(B);var Bt=g(B,oe);B.ln=B.med-Bt,B.un=B.med+Bt,Qe=Math.min(Qe,B.ln),at=Math.max(at,B.un),B.pts2=te.filter(Y),w.push(B)}A.notched&&T.isTypedArray(Fe)&&(Fe=Array.from(Fe)),A._extremes[F._id]=I.findExtremes(F,A.notched?Fe.concat([Qe,at]):Fe,{padded:!0})}return function p(m,d){if(T.isArrayOrTypedArray(d.selectedpoints))for(var A=0;A<m.length;A++){for(var b=m[A].pts||[],c={},S=0;S<b.length;S++)c[b[S].i]=S;T.tagSelected(b,d,c)}}(w,A),w.length>0?(w[0].t={num:b[E],dPos:W,posLetter:D,valLetter:_,labels:{med:i(d,"median:"),min:i(d,"min:"),q1:i(d,"q1:"),q3:i(d,"q3:"),max:i(d,"max:"),mean:"sd"===A.boxmean||"sd"===A.sizemode?i(d,"mean \xb1 \u03c3:").replace("\u03c3",1===A.sdmultiple?"\u03c3":A.sdmultiple+"\u03c3"):i(d,"mean:"),lf:i(d,"lower fence:"),uf:i(d,"upper fence:")}},b[E]++,w):[{t:{empty:!0}}]};var o={text:"tx",hovertext:"htx"};function v(m,d,A){for(var b in o)T.isArrayOrTypedArray(d[b])&&(Array.isArray(A)?T.isArrayOrTypedArray(d[b][A[0]])&&(m[o[b]]=d[b][A[0]][A[1]]):m[o[b]]=d[b][A])}function f(m,d){return m.v-d.v}function l(m){return m.v}function y(m,d,A){return 0===A?m.q1:Math.min(m.q1,d[Math.min(T.findBin(2.5*m.q1-1.5*m.q3,d,!0)+1,A-1)])}function s(m,d,A){return 0===A?m.q3:Math.max(m.q3,d[Math.max(T.findBin(2.5*m.q3-1.5*m.q1,d),0)])}function x(m){return 4*m.q1-3*m.q3}function h(m){return 4*m.q3-3*m.q1}function g(m,d){return 0===d?0:1.57*(m.q3-m.q1)/Math.sqrt(d)}},88267:($,K,e)=>{"use strict";var M=e(91464),I=e(5228),t=e(93698).getAxisGroup,T=["v","h"];function i(u,a,r,o){var y,s,x,v=a.calcdata,p=a._fullLayout,f=o._id,l=f.charAt(0),h=[],g=0;for(y=0;y<r.length;y++)for(x=v[r[y]],s=0;s<x.length;s++)h.push(o.c2l(x[s].pos,!0)),g+=(x[s].pts2||[]).length;if(h.length){var m=I.distinctVals(h);("category"===o.type||"multicategory"===o.type)&&(m.minDiff=1);var d=m.minDiff/2;M.minDtick(o,m.minDiff,m.vals[0],!0);var b=p["violin"===u?"_numViolins":"_numBoxes"],c="group"===p[u+"mode"]&&b>1,S=1-p[u+"gap"],w=1-p[u+"groupgap"];for(y=0;y<r.length;y++){var _,z,D,k,E=(x=v[r[y]])[0].trace,P=x[0].t,R=E.width,F=E.side;if(R)_=z=k=R/2,D=0;else if(_=d,c){var O=t(p,o._id)+E.orientation,H=(p._alignmentOpts[O]||{})[E.alignmentgroup]||{},j=Object.keys(H.offsetGroups||{}).length,ee=j||b;z=_*S*w/ee,D=2*_*(((j?E._offsetIndex:P.num)+.5)/ee-.5)*S,k=_*S/ee}else z=_*S*w,D=0,k=_;P.dPos=_,P.bPos=D,P.bdPos=z,P.wHover=k;var B,te,oe,ie,V,Y,ae,X,q=D+z,J=Boolean(R);if("positive"===F?(B=_*(R?1:.5),oe=q,te=oe=D):"negative"===F?(B=oe=D,te=_*(R?1:.5),ie=q):(B=te=_,oe=ie=q),(E.boxpoints||E.points)&&g>0){var re=E.pointpos,ne=E.jitter,se=E.marker.size/2,de=0;re+ne>=0&&((de=q*(re+ne))>B?(J=!0,ae=se,V=de):de>oe&&(ae=se,V=B)),de<=B&&(V=B);var be=0;re-ne<=0&&((be=-q*(re-ne))>te?(J=!0,X=se,Y=be):be>ie&&(X=se,Y=te)),be<=te&&(Y=te)}else V=B,Y=te;var De=new Array(x.length);for(s=0;s<x.length;s++)De[s]=x[s].pos;E._extremes[f]=M.findExtremes(o,De,{padded:J,vpadminus:Y,vpadplus:V,vpadLinearized:!0,ppadminus:{x:X,y:ae}[l],ppadplus:{x:ae,y:X}[l]})}}}$.exports={crossTraceCalc:function n(u,a){for(var r=u.calcdata,o=a.xaxis,v=a.yaxis,p=0;p<T.length;p++){for(var f=T[p],l="h"===f?v:o,y=[],s=0;s<r.length;s++){var x=r[s],h=x[0].t,g=x[0].trace;!0===g.visible&&("box"===g.type||"candlestick"===g.type)&&!h.empty&&(g.orientation||"v")===f&&g.xaxis===o._id&&g.yaxis===v._id&&y.push(s)}i("box",u,y,l)}},setPositionOffset:i}},62560:($,K,e)=>{"use strict";var M=e(5228),I=e(97799),t=e(8416),T=e(18031),n=e(36711),i=e(30640),u=e(76643);function r(p,f,l,y){function s(j){var ee=0;return j&&j.length&&(ee+=1,M.isArrayOrTypedArray(j[0])&&j[0].length&&(ee+=1)),ee}function x(j){return M.validate(p[j],u[j])}var m,h=l("y"),g=l("x");if("box"===f.type){var d=l("q1"),A=l("median"),b=l("q3");f._hasPreCompStats=d&&d.length&&A&&A.length&&b&&b.length,m=Math.min(M.minRowLength(d),M.minRowLength(A),M.minRowLength(b))}var F,_,c=s(h),S=s(g),w=c&&M.minRowLength(h),E=S&&M.minRowLength(g),P=y.calendar,R={autotypenumbers:y.autotypenumbers};if(f._hasPreCompStats)switch(String(S)+String(c)){case"00":var z=x("x0")||x("dx");F=(x("y0")||x("dy"))&&!z?"h":"v",_=m;break;case"10":F="v",_=Math.min(m,E);break;case"20":F="h",_=Math.min(m,g.length);break;case"01":F="h",_=Math.min(m,w);break;case"02":F="v",_=Math.min(m,h.length);break;case"12":F="v",_=Math.min(m,E,h.length);break;case"21":F="h",_=Math.min(m,g.length,w);break;case"11":_=0;break;case"22":var O,k=!1;for(O=0;O<g.length;O++)if("category"===i(g[O],P,R)){k=!0;break}if(k)F="v",_=Math.min(m,E,h.length);else{for(O=0;O<h.length;O++)if("category"===i(h[O],P,R)){k=!0;break}k?(F="h",_=Math.min(m,g.length,w)):(F="v",_=Math.min(m,E,h.length))}}else c>0?(F="v",_=S>0?Math.min(E,w):Math.min(w)):S>0?(F="h",_=Math.min(E)):_=0;if(_){f._length=_;var U=l("orientation",F);f._hasPreCompStats?"v"===U&&0===S?(l("x0",0),l("dx",1)):"h"===U&&0===c&&(l("y0",0),l("dy",1)):"v"===U&&0===S?l("x0"):"h"===U&&0===c&&l("y0"),I.getComponentMethod("calendars","handleTraceDefaults")(p,f,["x","y"],y)}else f.visible=!1}function o(p,f,l,y){var s=y.prefix,x=M.coerce2(p,f,u,"marker.outliercolor"),h=l("marker.line.outliercolor"),g="outliers";f._hasPreCompStats?g="all":(x||h)&&(g="suspectedoutliers");var m=l(s+"points",g);m?(l("jitter","all"===m?.3:0),l("pointpos","all"===m?-1.5:0),l("marker.symbol"),l("marker.opacity"),l("marker.size"),l("marker.angle"),l("marker.color",f.line.color),l("marker.line.color"),l("marker.line.width"),"suspectedoutliers"===m&&(l("marker.line.outliercolor",f.marker.color),l("marker.line.outlierwidth")),l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"),l("text"),l("hovertext")):delete f.marker;var d=l("hoveron");("all"===d||-1!==d.indexOf("points"))&&l("hovertemplate"),M.coerceSelectionMarkerOpacity(f,l)}$.exports={supplyDefaults:function a(p,f,l,y){function s(w,E){return M.coerce(p,f,u,w,E)}if(r(p,f,s,y),!1!==f.visible){T(p,f,y,s),s("xhoverformat"),s("yhoverformat");var x=f._hasPreCompStats;x&&(s("lowerfence"),s("upperfence")),s("line.color",(p.marker||{}).color||l),s("line.width"),s("fillcolor",t.addOpacity(f.line.color,.5));var h=!1;if(x){var g=s("mean"),m=s("sd");g&&g.length&&(h=!0,m&&m.length&&(h="sd"))}s("whiskerwidth");var A,d=s("sizemode");"quartiles"===d&&(A=s("boxmean",h)),s("showwhiskers","quartiles"===d),("sd"===d||"sd"===A)&&s("sdmultiple"),s("width"),s("quartilemethod");var b=!1;if(x){var c=s("notchspan");c&&c.length&&(b=!0)}else M.validate(p.notchwidth,u.notchwidth)&&(b=!0);s("notched",b)&&s("notchwidth"),o(p,f,s,{prefix:"box"})}},crossTraceDefaults:function v(p,f){var l,y;function s(g){return M.coerce(y._input,y,u,g)}for(var x=0;x<p.length;x++){var h=(y=p[x]).type;("box"===h||"violin"===h)&&(l=y._input,"group"===f[h+"mode"]&&n(l,y,f,s))}},handleSampleDefaults:r,handlePointsDefaults:o}},89279:$=>{"use strict";$.exports=function(e,M){return M.hoverOnBox&&(e.hoverOnBox=M.hoverOnBox),"xVal"in M&&(e.x=M.xVal),"yVal"in M&&(e.y=M.yVal),M.xa&&(e.xaxis=M.xa),M.ya&&(e.yaxis=M.ya),e}},60426:($,K,e)=>{"use strict";var M=e(91464),I=e(5228),t=e(76863),T=e(8416),n=I.fillText;function u(r,o,v,p){var g,m,d,A,b,c,S,w,E,P,R,_,z,O,f=r.cd,l=r.xa,y=r.ya,s=f[0].trace,x=f[0].t,h="violin"===s.type,F=x.bdPos,D=x.wHover,k=function(be){return d.c2l(be.pos)+x.bPos-d.c2l(c)};h&&"both"!==s.side?("positive"===s.side&&(E=function(be){var De=k(be);return t.inbox(De,De+D,P)},_=F,z=0),"negative"===s.side&&(E=function(be){var De=k(be);return t.inbox(De-D,De,P)},_=0,z=F)):(E=function(be){var De=k(be);return t.inbox(De-D,De+D,P)},_=z=F),O=h?function(be){return t.inbox(be.span[0]-b,be.span[1]-b,P)}:function(be){return t.inbox(be.min-b,be.max-b,P)},"h"===s.orientation?(b=o,c=v,S=O,w=E,g="y",d=y,m="x",A=l):(b=v,c=o,S=E,w=O,g="x",d=l,m="y",A=y);var U=Math.min(1,F/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));function H(be){return(S(be)+w(be))/2}P=r.maxHoverDistance-U,R=r.maxSpikeDistance-U;var j=t.getDistanceFunction(p,S,w,H);if(t.getClosest(f,j,r),!1===r.index)return[];var ee=f[r.index],W=s.line.color,B=(s.marker||{}).color;T.opacity(W)&&s.line.width?r.color=W:T.opacity(B)&&s.boxpoints?r.color=B:r.color=s.fillcolor,r[g+"0"]=d.c2p(ee.pos+x.bPos-z,!0),r[g+"1"]=d.c2p(ee.pos+x.bPos+_,!0),r[g+"LabelVal"]=void 0!==ee.orig_p?ee.orig_p:ee.pos;var te=g+"Spike";r.spikeDistance=H(ee)*R/P,r[te]=d.c2p(ee.pos,!0);var q=s.boxmean||"sd"===s.sizemode||(s.meanline||{}).visible,oe=s.boxpoints||s.points,ie=oe&&q?["max","uf","q3","med","mean","q1","lf","min"]:oe&&!q?["max","uf","q3","med","q1","lf","min"]:!oe&&q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],V=A.range[1]<A.range[0];s.orientation===(V?"v":"h")&&ie.reverse();for(var Y=r.spikeDistance,ae=r[te],X=[],J=0;J<ie.length;J++){var ue=ie[J];if(ue in ee){var re=ee[ue],ne=A.c2p(re,!0),se=I.extendFlat({},r);se.attr=ue,se[m+"0"]=se[m+"1"]=ne,se[m+"LabelVal"]=re,se[m+"Label"]=(x.labels?x.labels[ue]+" ":"")+M.hoverLabelText(A,re,s[m+"hoverformat"]),se.hoverOnBox=!0,"mean"===ue&&"sd"in ee&&("sd"===s.boxmean||"sd"===s.sizemode)&&(se[m+"err"]=ee.sd),se.hovertemplate=!1,X.push(se)}}r.name="",r.spikeDistance=void 0,r[te]=void 0;for(var de=0;de<X.length;de++)"med"!==X[de].attr?(X[de].name="",X[de].spikeDistance=void 0,X[de][te]=void 0):(X[de].spikeDistance=Y,X[de][te]=ae);return X}function a(r,o,v){for(var h,b,c,p=r.cd,f=r.xa,l=r.ya,y=p[0].trace,s=f.c2p(o),x=l.c2p(v),d=t.quadrature(function(O){var U=Math.max(3,O.mrc||0);return Math.max(Math.abs(f.c2p(O.x)-s)-U,1-3/U)},function(O){var U=Math.max(3,O.mrc||0);return Math.max(Math.abs(l.c2p(O.y)-x)-U,1-3/U)}),A=!1,S=0;S<p.length;S++){b=p[S];for(var w=0;w<(b.pts||[]).length;w++){var E=d(c=b.pts[w]);E<=r.distance&&(r.distance=E,A=[S,w])}}if(!A)return!1;c=(b=p[A[0]]).pts[A[1]];var P=f.c2p(c.x,!0),R=l.c2p(c.y,!0),F=c.mrc||1;h=I.extendFlat({},r,{index:c.i,color:(y.marker||{}).color,name:y.name,x0:P-F,x1:P+F,y0:R-F,y1:R+F,spikeDistance:r.distance,hovertemplate:y.hovertemplate});var D,_=b.orig_p,z=void 0!==_?_:b.pos;return"h"===y.orientation?(D=l,h.xLabelVal=c.x,h.yLabelVal=z):(D=f,h.xLabelVal=z,h.yLabelVal=c.y),h[D._id.charAt(0)+"Spike"]=D.c2p(b.pos,!0),n(c,y,h),h}$.exports={hoverPoints:function i(r,o,v,p){var x,y=r.cd[0].trace.hoveron,s=[];return-1!==y.indexOf("boxes")&&(s=s.concat(u(r,o,v,p))),-1!==y.indexOf("points")&&(x=a(r,o,v)),"closest"===p?x?[x]:s:(x&&s.push(x),s)},hoverOnBoxes:u,hoverOnPoints:a}},7238:($,K,e)=>{"use strict";$.exports={attributes:e(76643),layoutAttributes:e(11578),supplyDefaults:e(62560).supplyDefaults,crossTraceDefaults:e(62560).crossTraceDefaults,supplyLayoutDefaults:e(93172).supplyLayoutDefaults,calc:e(92667),crossTraceCalc:e(88267).crossTraceCalc,plot:e(46736).plot,style:e(14781).style,styleOnSelect:e(14781).styleOnSelect,hoverPoints:e(60426).hoverPoints,eventData:e(89279),selectPoints:e(61355),moduleType:"trace",name:"box",basePlotModule:e(24329),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{description:["Each box spans from quartile 1 (Q1) to quartile 3 (Q3).","The second quartile (Q2, i.e. the median) is marked by a line inside the box.","The fences grow outward from the boxes' edges,","by default they span +/- 1.5 times the interquartile range (IQR: Q3-Q1),","The sample mean and standard deviation as well as notches and","the sample, outlier and suspected outliers points can be optionally","added to the box plot.","The values and positions corresponding to each boxes can be input","using two signatures.","The first signature expects users to supply the sample values in the `y`","data array for vertical boxes (`x` for horizontal boxes).","By supplying an `x` (`y`) array, one box per distinct `x` (`y`) value is drawn","If no `x` (`y`) {array} is provided, a single box is drawn.","In this case, the box is positioned with the trace `name` or with `x0` (`y0`) if provided.","The second signature expects users to supply the boxes corresponding Q1, median and Q3","statistics in the `q1`, `median` and `q3` data arrays respectively.","Other box features relying on statistics namely `lowerfence`, `upperfence`, `notchspan`","can be set directly by the users.","To have plotly compute them or to show sample points besides the boxes,","users can set the `y` data array for vertical boxes (`x` for horizontal boxes)","to a 2D array with the outer length corresponding","to the number of boxes in the traces and the inner length corresponding the sample size."].join(" ")}}},11578:$=>{"use strict";$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how boxes at the same location coordinate","are displayed on the graph.","If *group*, the boxes are plotted next to one another","centered around the shared location.","If *overlay*, the boxes are plotted over one another,","you might need to set *opacity* to see them multiple boxes.","Has no effect on traces that have *width* set."].join(" ")},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")}}},93172:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(11578);function T(i,u,a,r,o){for(var v=o+"Layout",p=!1,f=0;f<a.length;f++){var l=a[f];if(M.traceIs(l,v)){p=!0;break}}p&&(r(o+"mode"),r(o+"gap"),r(o+"groupgap"))}$.exports={supplyLayoutDefaults:function n(i,u,a){T(0,0,a,function r(o,v){return I.coerce(i,u,t,o,v)},"box")},_supply:T}},46736:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630);function u(o,v,p,f,l){var w,E,y="h"===p.orientation,s=v.val,x=v.pos,h=!!x.rangebreaks,g=f.bPos,m=f.wdPos||0,d=f.bPosPxOffset||0,A=p.whiskerwidth||0,b=!1!==p.showwhiskers,c=p.notched||!1,S=c?1-2*p.notchwidth:1;Array.isArray(f.bdPos)?(w=f.bdPos[0],E=f.bdPos[1]):(w=f.bdPos,E=f.bdPos);var P=o.selectAll("path.box").data("violin"!==p.type||p.box.visible?I.identity:[]);P.enter().append("path").style("vector-effect",l?"none":"non-scaling-stroke").attr("class","box"),P.exit().remove(),P.each(function(R){if(R.empty)return M.select(this).attr("d","M0,0Z");var F=x.c2l(R.pos+g,!0),_=x.l2p(F-w)+d,z=x.l2p(F+E)+d,D=h?(_+z)/2:x.l2p(F)+d,k=p.whiskerwidth,O=h?_*k+(1-k)*D:x.l2p(F-m)+d,U=h?z*k+(1-k)*D:x.l2p(F+m)+d,H=x.l2p(F-w*S)+d,j=x.l2p(F+E*S)+d,ee="sd"===p.sizemode,W=s.c2p(ee?R.mean-R.sd:R.q1,!0),B=ee?s.c2p(R.mean+R.sd,!0):s.c2p(R.q3,!0),te=I.constrain(ee?s.c2p(R.mean,!0):s.c2p(R.med,!0),Math.min(W,B)+1,Math.max(W,B)-1),q=void 0===R.lf||!1===p.boxpoints||ee,oe=s.c2p(q?R.min:R.lf,!0),ie=s.c2p(q?R.max:R.uf,!0),V=s.c2p(R.ln,!0),Y=s.c2p(R.un,!0);y?M.select(this).attr("d","M"+te+","+H+"V"+j+"M"+W+","+_+"V"+z+(c?"H"+V+"L"+te+","+j+"L"+Y+","+z:"")+"H"+B+"V"+_+(c?"H"+Y+"L"+te+","+H+"L"+V+","+_:"")+"Z"+(b?"M"+W+","+D+"H"+oe+"M"+B+","+D+"H"+ie+(0===A?"":"M"+oe+","+O+"V"+U+"M"+ie+","+O+"V"+U):"")):M.select(this).attr("d","M"+H+","+te+"H"+j+"M"+_+","+W+"H"+z+(c?"V"+V+"L"+j+","+te+"L"+z+","+Y:"")+"V"+B+"H"+_+(c?"V"+Y+"L"+H+","+te+"L"+_+","+V:"")+"Z"+(b?"M"+D+","+W+"V"+oe+"M"+D+","+B+"V"+ie+(0===A?"":"M"+O+","+oe+"H"+U+"M"+O+","+ie+"H"+U):""))})}function a(o,v,p,f){var l=v.x,y=v.y,s=f.bdPos,x=f.bPos,h=p.boxpoints||p.points;I.seedPseudoRandom();var m=o.selectAll("g.points").data(h?function(A){return A.forEach(function(b){b.t=f,b.trace=p}),A}:[]);m.enter().append("g").attr("class","points"),m.exit().remove();var d=m.selectAll("path").data(function(A){var b,F,c=A.pts2,S=Math.max((A.max-A.min)/10,A.q3-A.q1),w=1e-9*S,E=.01*S,P=[],R=0;if(p.jitter){if(0===S)for(R=1,P=new Array(c.length),b=0;b<c.length;b++)P[b]=1;else for(b=0;b<c.length;b++){var _=Math.max(0,b-5),z=c[_].v,D=Math.min(c.length-1,b+5),k=c[D].v;"all"!==h&&(c[b].v<A.lf?k=Math.min(k,A.lf):z=Math.max(z,A.uf));var O=Math.sqrt(E*(D-_)/(k-z+w))||0;O=I.constrain(Math.abs(O),0,1),P.push(O),R=Math.max(O,R)}F=2*p.jitter/(R||1)}for(b=0;b<c.length;b++){var U=c[b],H=U.v,j=p.jitter?F*P[b]*(I.pseudoRandom()-.5):0,ee=A.pos+x+s*(p.pointpos+j);"h"===p.orientation?(U.y=ee,U.x=H):(U.x=ee,U.y=H),"suspectedoutliers"===h&&H<A.uo&&H>A.lo&&(U.so=!0)}return c});d.enter().append("path").classed("point",!0),d.exit().remove(),d.call(t.translatePoints,l,y)}function r(o,v,p,f){var m,d,l=v.val,y=v.pos,s=!!y.rangebreaks,x=f.bPos,h=f.bPosPxOffset||0,g=p.boxmean||(p.meanline||{}).visible;Array.isArray(f.bdPos)?(m=f.bdPos[0],d=f.bdPos[1]):(m=f.bdPos,d=f.bdPos);var A=o.selectAll("path.mean").data("box"===p.type&&p.boxmean||"violin"===p.type&&p.box.visible&&p.meanline.visible?I.identity:[]);A.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),A.exit().remove(),A.each(function(b){var c=y.c2l(b.pos+x,!0),S=y.l2p(c-m)+h,w=y.l2p(c+d)+h,E=s?(S+w)/2:y.l2p(c)+h,P=l.c2p(b.mean,!0),R=l.c2p(b.mean-b.sd,!0),F=l.c2p(b.mean+b.sd,!0);"h"===p.orientation?M.select(this).attr("d","M"+P+","+S+"V"+w+("sd"===g?"m0,0L"+R+","+E+"L"+P+","+S+"L"+F+","+E+"Z":"")):M.select(this).attr("d","M"+S+","+P+"H"+w+("sd"===g?"m0,0L"+E+","+R+"L"+S+","+P+"L"+E+","+F+"Z":""))})}$.exports={plot:function i(o,v,p,f){var l=o._context.staticPlot,y=v.xaxis,s=v.yaxis;I.makeTraceGroups(f,p,"trace boxes").each(function(x){var A,b,h=M.select(this),g=x[0],m=g.t,d=g.trace;(m.wdPos=m.bdPos*d.whiskerwidth,!0!==d.visible||m.empty)?h.remove():("h"===d.orientation?(A=s,b=y):(A=y,b=s),u(h,{pos:A,val:b},d,m,l),a(h,{x:y,y:s},d,m),r(h,{pos:A,val:b},d,m))})},plotBoxAndWhiskers:u,plotPoints:a,plotBoxMean:r}},61355:$=>{"use strict";$.exports=function(e,M){var i,u,I=e.cd,t=e.xaxis,T=e.yaxis,n=[];if(!1===M)for(i=0;i<I.length;i++)for(u=0;u<(I[i].pts||[]).length;u++)I[i].pts[u].selected=0;else for(i=0;i<I.length;i++)for(u=0;u<(I[i].pts||[]).length;u++){var a=I[i].pts[u],r=t.c2p(a.x),o=T.c2p(a.y);M.contains([r,o],null,a.i,e)?(n.push({pointNumber:a.i,x:t.c2d(a.x),y:T.c2d(a.y)}),a.selected=1):a.selected=0}return n}},14781:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(27630);$.exports={style:function T(i,u,a){var r=a||M.select(i).selectAll("g.trace.boxes");r.style("opacity",function(o){return o[0].trace.opacity}),r.each(function(o){var v=M.select(this),p=o[0].trace,f=p.line.width;function l(x,h,g,m){x.style("stroke-width",h+"px").call(I.stroke,g).call(I.fill,m)}var y=v.selectAll("path.box");if("candlestick"===p.type)y.each(function(x){if(!x.empty){var h=M.select(this),g=p[x.dir];l(h,g.line.width,g.line.color,g.fillcolor),h.style("opacity",p.selectedpoints&&!x.selected?.3:1)}});else{l(y,f,p.line.color,p.fillcolor),v.selectAll("path.mean").style({"stroke-width":f,"stroke-dasharray":2*f+"px,"+f+"px"}).call(I.stroke,p.line.color);var s=v.selectAll("path.point");t.pointStyle(s,p,i)}})},styleOnSelect:function n(i,u,a){var r=u[0].trace,o=a.selectAll("path.point");r.selectedpoints?t.selectedPointStyle(o,r):t.pointStyle(o,r,i)}}},4439:($,K,e)=>{"use strict";var M=e(5228).extendFlat,I=e(88489).axisHoverFormat,t=e(71368),T=e(76643);function n(i){return{line:{color:M({},T.line.color,{dflt:i}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}$.exports={xperiod:t.xperiod,xperiod0:t.xperiod0,xperiodalignment:t.xperiodalignment,xhoverformat:I("x"),yhoverformat:I("y"),x:t.x,open:t.open,high:t.high,low:t.low,close:t.close,line:{width:M({},T.line.width,{description:[T.line.width.description,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),editType:"style"},increasing:n(t.increasing.line.color.dflt),decreasing:n(t.decreasing.line.color.dflt),text:t.text,hovertext:t.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:t.hoverlabel}},50795:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(62311),T=e(64243).calcCommon;function n(i,u,a,r){return{min:a,q1:Math.min(i,r),med:r,q3:Math.max(i,r),max:u}}$.exports=function(i,u){var a=i._fullLayout,r=I.getFromId(i,u.xaxis),o=I.getFromId(i,u.yaxis),v=r.makeCalcdata(u,"x"),p=t(u,r,"x",v).vals,f=T(i,u,v,p,o,n);return f.length?(M.extendFlat(f[0].t,{num:a._numBoxes,dPos:M.distinctVals(p).minDiff/2,posLetter:"x",valLetter:"y"}),a._numBoxes++,f):[{t:{empty:!0}}]}},32885:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(14075),T=e(18031),n=e(4439);function i(u,a,r,o){var v=r(o+".line.color");r(o+".line.width",a.line.width),r(o+".fillcolor",I.addOpacity(v,.5))}$.exports=function(a,r,o,v){function p(l,y){return M.coerce(a,r,n,l,y)}t(a,r,p,v)?(T(a,r,v,p,{x:!0}),p("xhoverformat"),p("yhoverformat"),p("line.width"),i(a,r,p,"increasing"),i(a,r,p,"decreasing"),p("text"),p("hovertext"),p("whiskerwidth"),v._requestRangeslider[r.xaxis]=!0):r.visible=!1}},56348:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(24329),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{description:["The candlestick is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The boxes represent the spread between the `open` and `close` values and","the lines represent the spread between the `low` and `high` values","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing candles are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:e(4439),layoutAttributes:e(11578),supplyLayoutDefaults:e(93172).supplyLayoutDefaults,crossTraceCalc:e(88267).crossTraceCalc,supplyDefaults:e(32885),calc:e(50795),plot:e(46736).plot,layerName:"boxlayer",style:e(14781).style,hoverPoints:e(76554).hoverPoints,selectPoints:e(86005)}},70472:($,K,e)=>{"use strict";var M=e(79374),I=e(96906);$.exports=function(n,i,u,a,r){a("a")||(a("da"),a("a0")),a("b")||(a("db"),a("b0")),function t(T,n,i,u){var a=["aaxis","baxis"];a.forEach(function(r){var o=r.charAt(0),v=T[r]||{},p=I.newContainer(n,r),f={noTicklabelstep:!0,tickfont:"x",id:o+"axis",letter:o,font:n.font,name:r,data:T[o],calendar:n.calendar,dfltColor:u,bgColor:i.paper_bgcolor,autotypenumbersDflt:i.autotypenumbers,fullLayout:i};M(v,p,f),p._categories=p._categories||[],!T[r]&&"-"!==v.type&&(T[r]={type:v.type})})}(n,i,u,r)}},1342:($,K,e)=>{"use strict";var M=e(5228).isArrayOrTypedArray;function I(t,T){if(!M(t)||T>=10)return null;for(var n=1/0,i=-1/0,u=t.length,a=0;a<u;a++){var r=t[a];if(M(r)){var o=I(r,T+1);o&&(n=Math.min(o[0],n),i=Math.max(o[1],i))}else n=Math.min(r,n),i=Math.max(r,i)}return[n,i]}$.exports=function(t){return I(t,0)}},62716:($,K,e)=>{"use strict";var M=e(47297),I=e(90186),t=e(36593),T=M({editType:"calc",description:"The default font used for axis & tick labels on this carpet"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=t.defaultLine,$.exports={carpet:{valType:"string",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["A two dimensional array of x coordinates at each carpet point.","If omitted, the plot is a cheater plot and the xaxis is hidden","by default."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"A two dimensional array of y coordinates at each carpet point."},a:{valType:"data_array",editType:"calc",description:["An array containing values of the first parameter value"].join(" ")},a0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `a`.","Builds a linear space of a coordinates.","Use with `da`","where `a0` is the starting coordinate and `da` the step."].join(" ")},da:{valType:"number",dflt:1,editType:"calc",description:["Sets the a coordinate step.","See `a0` for more info."].join(" ")},b:{valType:"data_array",editType:"calc",description:"A two dimensional array of y coordinates at each carpet point."},b0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `b`.","Builds a linear space of a coordinates.","Use with `db`","where `b0` is the starting coordinate and `db` the step."].join(" ")},db:{valType:"number",dflt:1,editType:"calc",description:["Sets the b coordinate step.","See `b0` for more info."].join(" ")},cheaterslope:{valType:"number",dflt:1,editType:"calc",description:["The shift applied to each successive row of data in creating a cheater plot.","Only used if `x` is been omitted."].join(" ")},aaxis:I,baxis:I,font:T,color:{valType:"color",dflt:t.defaultLine,editType:"plot",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},transforms:void 0}},45562:($,K,e)=>{"use strict";var M=e(5228).isArrayOrTypedArray;$.exports=function(I,t,T,n){var i,u,a,r,o,v,p,f,l,y,s,x,h,g=M(T)?"a":"b",d=("a"===g?I.aaxis:I.baxis).smoothing,A="a"===g?I.a2i:I.b2j,b="a"===g?T:n,c="a"===g?n:T,S="a"===g?t.a.length:t.b.length,w="a"===g?t.b.length:t.a.length,E=Math.floor("a"===g?I.b2j(c):I.a2i(c)),P="a"===g?function(W){return I.evalxy([],W,E)}:function(W){return I.evalxy([],E,W)};d&&(a=Math.max(0,Math.min(w-2,E)),r=E-a,u="a"===g?function(W,B){return I.dxydi([],W,a,B,r)}:function(W,B){return I.dxydj([],a,W,r,B)});var R=A(b[0]),F=A(b[1]),_=R<F?1:-1,z=1e-8*(F-R),D=_>0?Math.floor:Math.ceil,k=_>0?Math.ceil:Math.floor,O=_>0?Math.min:Math.max,U=_>0?Math.max:Math.min,H=D(R+z),j=k(F-z),ee=[[p=P(R)]];for(i=H;i*_<j*_;i+=_)o=[],s=U(R,i),h=(x=O(F,i+_))-s,v=Math.max(0,Math.min(S-2,Math.floor(.5*(s+x)))),f=P(x),d&&(l=u(v,s-v),y=u(v,x-v),o.push([p[0]+l[0]/3*h,p[1]+l[1]/3*h]),o.push([f[0]-y[0]/3*h,f[1]-y[1]/3*h])),o.push(f),ee.push(o),p=f;return ee}},90186:($,K,e)=>{"use strict";var M=e(47297),I=e(36593),t=e(38330),T=e(88489).descriptionWithDates,n=e(71859).overrideAll,i=e(65822).P,u=e(18836).extendFlat;$.exports={color:{valType:"color",editType:"calc",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:M({editType:"calc",description:["Sets this axis' title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),offset:{valType:"number",dflt:10,editType:"calc",description:["An additional amount by which to offset the title from the tick","labels, given in pixels.","Note that this used to be set","by the now deprecated `titleoffset` attribute."].join(" ")},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc",description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:t.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data."].join(" ")},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tickvals:{valType:"data_array",editType:"calc",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"calc",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc",description:["Determines whether axis labels are drawn on the low side,","the high side, both, or neither side of the axis."].join(" ")},labelalias:u({},t.labelalias,{editType:"calc"}),tickfont:M({editType:"calc",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"calc",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"calc",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"calc",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"calc",description:["Hide SI prefix for 10^n if |n| is below this number"].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"calc",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:n(t.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},labelpadding:{valType:"integer",dflt:10,editType:"calc",description:"Extra padding between label and the axis"},labelprefix:{valType:"string",editType:"calc",description:"Sets a axis label prefix."},labelsuffix:{valType:"string",dflt:"",editType:"calc",description:"Sets a axis label suffix."},showline:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:I.defaultLine,editType:"calc",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the axis line."},gridcolor:{valType:"color",editType:"calc",description:"Sets the axis line color."},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the axis line."},griddash:u({},i,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc",description:"Sets the number of minor grid ticks per major grid tick"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the grid lines."},minorgriddash:u({},i,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:I.lightLine,editType:"calc",description:"Sets the color of the grid lines."},startline:{valType:"boolean",editType:"calc",description:["Determines whether or not a line is drawn at along the starting value","of this axis.","If *true*, the start line is drawn on top of the grid lines."].join(" ")},startlinecolor:{valType:"color",editType:"calc",description:"Sets the line color of the start line."},startlinewidth:{valType:"number",dflt:1,editType:"calc",description:"Sets the width (in px) of the start line."},endline:{valType:"boolean",editType:"calc",description:["Determines whether or not a line is drawn at along the final value","of this axis.","If *true*, the end line is drawn on top of the grid lines."].join(" ")},endlinewidth:{valType:"number",dflt:1,editType:"calc",description:"Sets the width (in px) of the end line."},endlinecolor:{valType:"color",editType:"calc",description:"Sets the line color of the end line."},tick0:{valType:"number",min:0,dflt:0,editType:"calc",description:"The starting index of grid lines along the axis"},dtick:{valType:"number",min:0,dflt:1,editType:"calc",description:"The stride between grid lines along the axis"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc",description:"The starting index of grid lines along the axis"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc",description:"The stride between grid lines along the axis"},_deprecated:{title:{valType:"string",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:M({editType:"calc",description:"Deprecated in favor of `title.font`."}),titleoffset:{valType:"number",dflt:10,editType:"calc",description:"Deprecated in favor of `title.offset`."}},editType:"calc"}},79374:($,K,e)=>{"use strict";var M=e(62716),I=e(8416).addOpacity,t=e(97799),T=e(5228),n=e(61606),i=e(85357),u=e(72323),a=e(83113),r=e(49704),o=e(30640);$.exports=function(f,l,y){var s=y.letter,x=y.font||{},h=M[s+"axis"];function g(H,j){return T.coerce(f,l,h,H,j)}function m(H,j){return T.coerce2(f,l,h,H,j)}y.name&&(l._name=y.name,l._id=y.name),g("autotypenumbers",y.autotypenumbersDflt);var d=g("type");("-"===d&&(y.data&&function v(p,f){if("-"===p.type){var x=p[p._id.charAt(0)+"calendar"];p.type=o(f,x,{autotypenumbers:p.autotypenumbers})}}(l,y.data),"-"===l.type?l.type="linear":d=f.type=l.type),g("smoothing"),g("cheatertype"),g("showticklabels"),g("labelprefix",s+" = "),g("labelsuffix"),g("showtickprefix"),g("showticksuffix"),g("separatethousands"),g("tickformat"),g("exponentformat"),g("minexponent"),g("showexponent"),g("categoryorder"),g("tickmode"),g("tickvals"),g("ticktext"),g("tick0"),g("dtick"),"array"===l.tickmode&&(g("arraytick0"),g("arraydtick")),g("labelpadding"),l._hovertitle=s,"date"===d)&&t.getComponentMethod("calendars","handleDefaults")(f,l,"calendar",y.calendar);r(l,y.fullLayout),l.c2p=T.identity;var b=g("color",y.dfltColor),c=b===f.color?b:x.color;g("title.text")&&(T.coerceFont(g,"title.font",{family:x.family,size:T.bigFont(x.size),color:c}),g("title.offset")),g("tickangle"),g("autorange",!l.isValidRange(f.range))&&g("rangemode"),g("range"),l.cleanRange(),g("fixedrange"),n(f,l,g,d),u(f,l,g,d,y),i(f,l,g,d,y),a(f,l,g,{data:y.data,dataAttr:s});var E=m("gridcolor",I(b,.3)),P=m("gridwidth"),R=m("griddash"),F=g("showgrid");F||(delete l.gridcolor,delete l.gridwidth,delete l.griddash);var _=m("startlinecolor",b),z=m("startlinewidth",P);g("startline",l.showgrid||!!_||!!z)||(delete l.startlinecolor,delete l.startlinewidth);var k=m("endlinecolor",b),O=m("endlinewidth",P);return g("endline",l.showgrid||!!k||!!O)||(delete l.endlinecolor,delete l.endlinewidth),F?(g("minorgridcount"),g("minorgridwidth",P),g("minorgriddash",R),g("minorgridcolor",I(E,.06)),l.minorgridcount||(delete l.minorgridwidth,delete l.minorgriddash,delete l.minorgridcolor)):(delete l.gridcolor,delete l.gridwidth,delete l.griddash),"none"===l.showticklabels&&(delete l.tickfont,delete l.tickangle,delete l.showexponent,delete l.exponentformat,delete l.minexponent,delete l.tickformat,delete l.showticksuffix,delete l.showtickprefix),l.showticksuffix||delete l.ticksuffix,l.showtickprefix||delete l.tickprefix,g("tickmode"),l}},27751:($,K,e)=>{"use strict";var M=e(91464),I=e(5228).isArray1D,t=e(94088),T=e(1342),n=e(12476),i=e(25531),u=e(4828),a=e(1419),r=e(76224),o=e(19346),v=e(36786);$.exports=function(f,l){var y=M.getFromId(f,l.xaxis),s=M.getFromId(f,l.yaxis),x=l.aaxis,h=l.baxis,g=l.x,m=l.y,d=[];g&&I(g)&&d.push("x"),m&&I(m)&&d.push("y"),d.length&&o(l,x,h,"a","b",d);var A=l._a=l._a||l.a,b=l._b=l._b||l.b;g=l._x||l.x,m=l._y||l.y;var c={};if(l._cheater){var S="index"===x.cheatertype?A.length:A,w="index"===h.cheatertype?b.length:b;g=t(S,w,l.cheaterslope)}l._x=g=a(g),l._y=m=a(m),r(g,A,b),r(m,A,b),v(l),l.setScale();var E=T(g),P=T(m),R=.5*(E[1]-E[0]),F=.5*(E[1]+E[0]),_=.5*(P[1]-P[0]),z=.5*(P[1]+P[0]),D=1.3;return E=[F-R*D,F+R*D],P=[z-_*D,z+_*D],l._extremes[y._id]=M.findExtremes(y,E,{padded:!0}),l._extremes[s._id]=M.findExtremes(s,P,{padded:!0}),n(l,"a","b"),n(l,"b","a"),i(l,x),i(l,h),c.clipsegments=u(l._xctrl,l._yctrl,x,h),c.x=g,c.y=m,c.a=A,c.b=b,[c]}},4828:$=>{"use strict";$.exports=function(e,M,I,t){var T,n,i,u=[],a=!!I.smoothing,r=!!t.smoothing,o=e[0].length-1,v=e.length-1;for(T=0,n=[],i=[];T<=o;T++)n[T]=e[0][T],i[T]=M[0][T];for(u.push({x:n,y:i,bicubic:a}),T=0,n=[],i=[];T<=v;T++)n[T]=e[T][o],i[T]=M[T][o];for(u.push({x:n,y:i,bicubic:r}),T=o,n=[],i=[];T>=0;T--)n[o-T]=e[v][T],i[o-T]=M[v][T];for(u.push({x:n,y:i,bicubic:a}),T=v,n=[],i=[];T>=0;T--)n[v-T]=e[T][0],i[v-T]=M[T][0];return u.push({x:n,y:i,bicubic:r}),u}},12476:($,K,e)=>{"use strict";var M=e(91464),I=e(18836).extendFlat;$.exports=function(T,n,i){var u,a,r,o,v,p,f,l,y,s,x,h,g,m,d=T["_"+n],A=T[n+"axis"],b=A._gridlines=[],c=A._minorgridlines=[],S=A._boundarylines=[],w=T["_"+i],E=T[i+"axis"];"array"===A.tickmode&&(A.tickvals=d.slice());var P=T._xctrl,R=T._yctrl,F=P[0].length,_=P.length,z=T._a.length,D=T._b.length;M.prepTicks(A),"array"===A.tickmode&&delete A.tickvals;var k=A.smoothing?3:1;function O(H){var j,ee,W,B,te,q,oe,ie,V,Y,ae,X,J=[],ue=[],re={};if("b"===n)for(ee=T.b2j(H),W=Math.floor(Math.max(0,Math.min(D-2,ee))),B=ee-W,re.length=D,re.crossLength=z,re.xy=function(ne){return T.evalxy([],ne,ee)},re.dxy=function(ne,se){return T.dxydi([],ne,W,se,B)},j=0;j<z;j++)q=Math.min(z-2,j),oe=j-q,ie=T.evalxy([],j,ee),E.smoothing&&j>0&&(V=T.dxydi([],j-1,W,0,B),J.push(te[0]+V[0]/3),ue.push(te[1]+V[1]/3),Y=T.dxydi([],j-1,W,1,B),J.push(ie[0]-Y[0]/3),ue.push(ie[1]-Y[1]/3)),J.push(ie[0]),ue.push(ie[1]),te=ie;else for(j=T.a2i(H),q=Math.floor(Math.max(0,Math.min(z-2,j))),oe=j-q,re.length=z,re.crossLength=D,re.xy=function(ne){return T.evalxy([],j,ne)},re.dxy=function(ne,se){return T.dxydj([],q,ne,oe,se)},ee=0;ee<D;ee++)W=Math.min(D-2,ee),B=ee-W,ie=T.evalxy([],j,ee),E.smoothing&&ee>0&&(ae=T.dxydj([],q,ee-1,oe,0),J.push(te[0]+ae[0]/3),ue.push(te[1]+ae[1]/3),X=T.dxydj([],q,ee-1,oe,1),J.push(ie[0]-X[0]/3),ue.push(ie[1]-X[1]/3)),J.push(ie[0]),ue.push(ie[1]),te=ie;return re.axisLetter=n,re.axis=A,re.crossAxis=E,re.value=H,re.constvar=i,re.index=l,re.x=J,re.y=ue,re.smoothing=E.smoothing,re}function U(H){var j,ee,W,B,te,q=[],oe=[],ie={};if(ie.length=d.length,ie.crossLength=w.length,"b"===n)for(W=Math.max(0,Math.min(D-2,H)),te=Math.min(1,Math.max(0,H-W)),ie.xy=function(V){return T.evalxy([],V,H)},ie.dxy=function(V,Y){return T.dxydi([],V,W,Y,te)},j=0;j<F;j++)q[j]=P[H*k][j],oe[j]=R[H*k][j];else for(ee=Math.max(0,Math.min(z-2,H)),B=Math.min(1,Math.max(0,H-ee)),ie.xy=function(V){return T.evalxy([],H,V)},ie.dxy=function(V,Y){return T.dxydj([],ee,V,B,Y)},j=0;j<_;j++)q[j]=P[j][H*k],oe[j]=R[j][H*k];return ie.axisLetter=n,ie.axis=A,ie.crossAxis=E,ie.value=d[H],ie.constvar=i,ie.index=H,ie.x=q,ie.y=oe,ie.smoothing=E.smoothing,ie}if("array"===A.tickmode){for(o=5e-15,p=(v=[Math.floor((d.length-1-A.arraytick0)/A.arraydtick*(1+o)),Math.ceil(-A.arraytick0/A.arraydtick/(1+o))].sort(function(H,j){return H-j}))[0]-1,f=v[1]+1,l=p;l<f;l++)!((a=A.arraytick0+A.arraydtick*l)<0||a>d.length-1)&&b.push(I(U(a),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(l=p;l<f;l++)if(r=A.arraytick0+A.arraydtick*l,x=Math.min(r+A.arraydtick,d.length-1),!(r<0||r>d.length-1||x<0||x>d.length-1))for(h=d[r],g=d[x],u=0;u<A.minorgridcount;u++)!((m=x-r)<=0)&&(!((s=h+(g-h)*(u+1)/(A.minorgridcount+1)*(A.arraydtick/m))<d[0]||s>d[d.length-1])&&c.push(I(O(s),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash})));A.startline&&S.push(I(U(0),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&S.push(I(U(d.length-1),{color:A.endlinecolor,width:A.endlinewidth}))}else{for(o=5e-15,p=(v=[Math.floor((d[d.length-1]-A.tick0)/A.dtick*(1+o)),Math.ceil((d[0]-A.tick0)/A.dtick/(1+o))].sort(function(H,j){return H-j}))[0],f=v[1],l=p;l<=f;l++)y=A.tick0+A.dtick*l,b.push(I(O(y),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(l=p-1;l<f+1;l++)for(y=A.tick0+A.dtick*l,u=0;u<A.minorgridcount;u++)!((s=y+A.dtick*(u+1)/(A.minorgridcount+1))<d[0]||s>d[d.length-1])&&c.push(I(O(s),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash}));A.startline&&S.push(I(O(d[0]),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&S.push(I(O(d[d.length-1]),{color:A.endlinecolor,width:A.endlinewidth}))}}},25531:($,K,e)=>{"use strict";var M=e(91464),I=e(18836).extendFlat;$.exports=function(T,n){var i,u,o,v=n._labels=[],p=n._gridlines;for(i=0;i<p.length;i++)o=p[i],-1!==["start","both"].indexOf(n.showticklabels)&&(u=M.tickText(n,o.value),I(u,{prefix:undefined,suffix:undefined,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:0===i,isLast:i===p.length-1}),v.push(u)),-1!==["end","both"].indexOf(n.showticklabels)&&(u=M.tickText(n,o.value),I(u,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:0===i,isLast:i===p.length-1}),v.push(u))}},18890:$=>{"use strict";$.exports=function(M,I,t,T){var n=M[0]-I[0],i=M[1]-I[1],u=t[0]-I[0],a=t[1]-I[1],r=Math.pow(n*n+i*i,.25),o=Math.pow(u*u+a*a,.25),v=(o*o*n-r*r*u)*T,p=(o*o*i-r*r*a)*T,f=o*(r+o)*3,l=r*(r+o)*3;return[[I[0]+(f&&v/f),I[1]+(f&&p/f)],[I[0]-(l&&v/l),I[1]-(l&&p/l)]]}},94088:($,K,e)=>{"use strict";var M=e(5228).isArrayOrTypedArray;$.exports=function(I,t,T){var n,i,u,a,o,v=[],p=M(I)?I.length:I,f=M(t)?t.length:t,l=M(I)?I:null,y=M(t)?t:null;l&&(u=(l.length-1)/(l[l.length-1]-l[0])/(p-1)),y&&(a=(y.length-1)/(y[y.length-1]-y[0])/(f-1));var s,x=1/0,h=-1/0;for(i=0;i<f;i++)for(v[i]=[],o=y?(y[i]-y[0])*a:i/(f-1),n=0;n<p;n++)s=(l?(l[n]-l[0])*u:n/(p-1))-o*T,x=Math.min(s,x),h=Math.max(s,h),v[i][n]=s;var g=1/(h-x),m=-x*g;for(i=0;i<f;i++)for(n=0;n<p;n++)v[i][n]=g*v[i][n]+m;return v}},64848:($,K,e)=>{"use strict";var M=e(18890),I=e(5228).ensureArray;function t(T,n,i){var u=-.5*i[0]+1.5*n[0],a=-.5*i[1]+1.5*n[1];return[(2*u+T[0])/3,(2*a+T[1])/3]}$.exports=function(n,i,u,a,r,o){var v,p,f,l,y,s,x,h,g,m,d=u[0].length,A=u.length,b=r?3*d-2:d,c=o?3*A-2:A;for(n=I(n,c),i=I(i,c),f=0;f<c;f++)n[f]=I(n[f],b),i[f]=I(i[f],b);for(p=0,l=0;p<A;p++,l+=o?3:1)for(y=n[l],s=i[l],x=u[p],h=a[p],v=0,f=0;v<d;v++,f+=r?3:1)y[f]=x[v],s[f]=h[v];if(r)for(p=0,l=0;p<A;p++,l+=o?3:1){for(v=1,f=3;v<d-1;v++,f+=3)g=M([u[p][v-1],a[p][v-1]],[u[p][v],a[p][v]],[u[p][v+1],a[p][v+1]],r),n[l][f-1]=g[0][0],i[l][f-1]=g[0][1],n[l][f+1]=g[1][0],i[l][f+1]=g[1][1];m=t([n[l][0],i[l][0]],[n[l][2],i[l][2]],[n[l][3],i[l][3]]),n[l][1]=m[0],i[l][1]=m[1],m=t([n[l][b-1],i[l][b-1]],[n[l][b-3],i[l][b-3]],[n[l][b-4],i[l][b-4]]),n[l][b-2]=m[0],i[l][b-2]=m[1]}if(o)for(f=0;f<b;f++){for(l=3;l<c-3;l+=3)g=M([n[l-3][f],i[l-3][f]],[n[l][f],i[l][f]],[n[l+3][f],i[l+3][f]],o),n[l-1][f]=g[0][0],i[l-1][f]=g[0][1],n[l+1][f]=g[1][0],i[l+1][f]=g[1][1];m=t([n[0][f],i[0][f]],[n[2][f],i[2][f]],[n[3][f],i[3][f]]),n[1][f]=m[0],i[1][f]=m[1],m=t([n[c-1][f],i[c-1][f]],[n[c-3][f],i[c-3][f]],[n[c-4][f],i[c-4][f]]),n[c-2][f]=m[0],i[c-2][f]=m[1]}if(r&&o)for(l=1;l<c;l+=(l+1)%3==0?2:1){for(f=3;f<b-3;f+=3)g=M([n[l][f-3],i[l][f-3]],[n[l][f],i[l][f]],[n[l][f+3],i[l][f+3]],r),n[l][f-1]=.5*(n[l][f-1]+g[0][0]),i[l][f-1]=.5*(i[l][f-1]+g[0][1]),n[l][f+1]=.5*(n[l][f+1]+g[1][0]),i[l][f+1]=.5*(i[l][f+1]+g[1][1]);m=t([n[l][0],i[l][0]],[n[l][2],i[l][2]],[n[l][3],i[l][3]]),n[l][1]=.5*(n[l][1]+m[0]),i[l][1]=.5*(i[l][1]+m[1]),m=t([n[l][b-1],i[l][b-1]],[n[l][b-3],i[l][b-3]],[n[l][b-4],i[l][b-4]]),n[l][b-2]=.5*(n[l][b-2]+m[0]),i[l][b-2]=.5*(i[l][b-2]+m[1])}return[n,i]}},35354:$=>{"use strict";$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},45547:$=>{"use strict";$.exports=function(K,e,M){return e&&M?function(I,t,T,n,i){var u,a,r,o,v,p;I||(I=[]),t*=3,T*=3;var f=n*n,l=1-n,y=l*l,s=l*n*2,x=-3*y,h=3*(y-s),g=3*(s-f),m=3*f,d=i*i,A=d*i,b=1-i,c=b*b,S=c*b;for(p=0;p<K.length;p++)u=x*(v=K[p])[T][t]+h*v[T][t+1]+g*v[T][t+2]+m*v[T][t+3],a=x*v[T+1][t]+h*v[T+1][t+1]+g*v[T+1][t+2]+m*v[T+1][t+3],r=x*v[T+2][t]+h*v[T+2][t+1]+g*v[T+2][t+2]+m*v[T+2][t+3],o=x*v[T+3][t]+h*v[T+3][t+1]+g*v[T+3][t+2]+m*v[T+3][t+3],I[p]=S*u+3*(c*i*a+b*d*r)+A*o;return I}:e?function(I,t,T,n,i){var u,a,r,o;I||(I=[]),t*=3;var v=n*n,p=1-n,f=p*p,l=p*n*2,y=-3*f,s=3*(f-l),x=3*(l-v),h=3*v,g=1-i;for(r=0;r<K.length;r++)u=y*(o=K[r])[T][t]+s*o[T][t+1]+x*o[T][t+2]+h*o[T][t+3],a=y*o[T+1][t]+s*o[T+1][t+1]+x*o[T+1][t+2]+h*o[T+1][t+3],I[r]=g*u+i*a;return I}:M?function(I,t,T,n,i){var u,a,r,o,v,p;I||(I=[]),T*=3;var f=i*i,l=f*i,y=1-i,s=y*y,x=s*y;for(v=0;v<K.length;v++)u=(p=K[v])[T][t+1]-p[T][t],a=p[T+1][t+1]-p[T+1][t],r=p[T+2][t+1]-p[T+2][t],o=p[T+3][t+1]-p[T+3][t],I[v]=x*u+3*(s*i*a+y*f*r)+l*o;return I}:function(I,t,T,n,i){I||(I=[]);var u,a,r,o,v=1-i;for(r=0;r<K.length;r++)u=(o=K[r])[T][t+1]-o[T][t],a=o[T+1][t+1]-o[T+1][t],I[r]=v*u+i*a;return I}}},51354:$=>{"use strict";$.exports=function(K,e,M){return e&&M?function(I,t,T,n,i){var u,a,r,o,v,p;I||(I=[]),t*=3,T*=3;var f=n*n,l=f*n,y=1-n,s=y*y,x=s*y,h=i*i,g=1-i,m=g*g,d=g*i*2,A=-3*m,b=3*(m-d),c=3*(d-h),S=3*h;for(p=0;p<K.length;p++)u=A*(v=K[p])[T][t]+b*v[T+1][t]+c*v[T+2][t]+S*v[T+3][t],a=A*v[T][t+1]+b*v[T+1][t+1]+c*v[T+2][t+1]+S*v[T+3][t+1],r=A*v[T][t+2]+b*v[T+1][t+2]+c*v[T+2][t+2]+S*v[T+3][t+2],o=A*v[T][t+3]+b*v[T+1][t+3]+c*v[T+2][t+3]+S*v[T+3][t+3],I[p]=x*u+3*(s*n*a+y*f*r)+l*o;return I}:e?function(I,t,T,n,i){var u,a,r,o,v,p;I||(I=[]),t*=3;var f=i*i,l=f*i,y=1-i,s=y*y,x=s*y;for(v=0;v<K.length;v++)u=(p=K[v])[T+1][t]-p[T][t],a=p[T+1][t+1]-p[T][t+1],r=p[T+1][t+2]-p[T][t+2],o=p[T+1][t+3]-p[T][t+3],I[v]=x*u+3*(s*i*a+y*f*r)+l*o;return I}:M?function(I,t,T,n,i){var u,a,r,o;I||(I=[]),T*=3;var v=1-n,p=i*i,f=1-i,l=f*f,y=f*i*2,s=-3*l,x=3*(l-y),h=3*(y-p),g=3*p;for(r=0;r<K.length;r++)u=s*(o=K[r])[T][t]+x*o[T+1][t]+h*o[T+2][t]+g*o[T+3][t],a=s*o[T][t+1]+x*o[T+1][t+1]+h*o[T+2][t+1]+g*o[T+3][t+1],I[r]=v*u+n*a;return I}:function(I,t,T,n,i){I||(I=[]);var u,a,r,o,v=1-n;for(r=0;r<K.length;r++)u=(o=K[r])[T+1][t]-o[T][t],a=o[T+1][t+1]-o[T][t+1],I[r]=v*u+n*a;return I}}},14275:$=>{"use strict";$.exports=function(K,e,M,I,t){var T=e-2,n=M-2;return I&&t?function(i,u,a){i||(i=[]);var r,o,v,p,f,l,y=Math.max(0,Math.min(Math.floor(u),T)),s=Math.max(0,Math.min(Math.floor(a),n)),x=Math.max(0,Math.min(1,u-y)),h=Math.max(0,Math.min(1,a-s));y*=3,s*=3;var g=x*x,m=g*x,d=1-x,A=d*d,b=A*d,c=h*h,S=c*h,w=1-h,E=w*w,P=E*w;for(l=0;l<K.length;l++)r=b*(f=K[l])[s][y]+3*(A*x*f[s][y+1]+d*g*f[s][y+2])+m*f[s][y+3],o=b*f[s+1][y]+3*(A*x*f[s+1][y+1]+d*g*f[s+1][y+2])+m*f[s+1][y+3],v=b*f[s+2][y]+3*(A*x*f[s+2][y+1]+d*g*f[s+2][y+2])+m*f[s+2][y+3],p=b*f[s+3][y]+3*(A*x*f[s+3][y+1]+d*g*f[s+3][y+2])+m*f[s+3][y+3],i[l]=P*r+3*(E*h*o+w*c*v)+S*p;return i}:I?function(i,u,a){i||(i=[]);var f,l,y,s,x,h,r=Math.max(0,Math.min(Math.floor(u),T)),o=Math.max(0,Math.min(Math.floor(a),n)),v=Math.max(0,Math.min(1,u-r)),p=Math.max(0,Math.min(1,a-o));r*=3;var g=v*v,m=g*v,d=1-v,A=d*d,b=A*d,c=1-p;for(x=0;x<K.length;x++)f=c*(h=K[x])[o][r]+p*h[o+1][r],l=c*h[o][r+1]+p*h[o+1][r+1],y=c*h[o][r+2]+p*h[o+1][r+1],s=c*h[o][r+3]+p*h[o+1][r+1],i[x]=b*f+3*(A*v*l+d*g*y)+m*s;return i}:t?function(i,u,a){i||(i=[]);var f,l,y,s,x,h,r=Math.max(0,Math.min(Math.floor(u),T)),o=Math.max(0,Math.min(Math.floor(a),n)),v=Math.max(0,Math.min(1,u-r)),p=Math.max(0,Math.min(1,a-o));o*=3;var g=p*p,m=g*p,d=1-p,A=d*d,b=A*d,c=1-v;for(x=0;x<K.length;x++)f=c*(h=K[x])[o][r]+v*h[o][r+1],l=c*h[o+1][r]+v*h[o+1][r+1],y=c*h[o+2][r]+v*h[o+2][r+1],s=c*h[o+3][r]+v*h[o+3][r+1],i[x]=b*f+3*(A*p*l+d*g*y)+m*s;return i}:function(i,u,a){i||(i=[]);var f,l,y,s,r=Math.max(0,Math.min(Math.floor(u),T)),o=Math.max(0,Math.min(Math.floor(a),n)),v=Math.max(0,Math.min(1,u-r)),p=Math.max(0,Math.min(1,a-o)),x=1-p,h=1-v;for(y=0;y<K.length;y++)f=h*(s=K[y])[o][r]+v*s[o][r+1],l=h*s[o+1][r]+v*s[o+1][r+1],i[y]=x*f+p*l;return i}}},30114:($,K,e)=>{"use strict";var M=e(5228),I=e(10),t=e(70472),T=e(62716),n=e(36593);$.exports=function(u,a,r,o){function v(l,y){return M.coerce(u,a,T,l,y)}a._clipPathId="clip"+a.uid+"carpet";var p=v("color",n.defaultLine);(M.coerceFont(v,"font"),v("carpet"),t(u,a,o,v,p),a.a&&a.b)?(a.a.length<3&&(a.aaxis.smoothing=0),a.b.length<3&&(a.baxis.smoothing=0),I(u,a,v)||(a.visible=!1),a._cheater&&v("cheaterslope")):a.visible=!1}},9561:($,K,e)=>{"use strict";$.exports={attributes:e(62716),supplyDefaults:e(30114),plot:e(79207),calc:e(27751),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(24329),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{description:["The data describing carpet axis layout is set in `y` and (optionally)","also `x`. If only `y` is present, `x` the plot is interpreted as a","cheater plot and is filled in using the `y` values.","`x` and `y` may either be 2D arrays matching with each dimension matching","that of `a` and `b`, or they may be 1D arrays with total length equal to","that of `a` and `b`."].join(" ")}}},19374:$=>{"use strict";$.exports=function(K,e){for(var I,M=K._fullData.length,t=0;t<M;t++){var T=K._fullData[t];if(T.index!==e.index&&"carpet"===T.type&&(I||(I=T),T.carpet===e.carpet))return T}return I}},51915:$=>{"use strict";$.exports=function(e,M,I){if(0===e.length)return"";var t,T=[],n=I?3:1;for(t=0;t<e.length;t+=n)T.push(e[t]+","+M[t]),I&&t<e.length-n&&(T.push("C"),T.push([e[t+1]+","+M[t+1],e[t+2]+","+M[t+2]+" "].join(" ")));return T.join(I?"":"L")}},70169:($,K,e)=>{"use strict";var M=e(5228).isArrayOrTypedArray;$.exports=function(t,T,n){var i;for(M(t)?t.length>T.length&&(t=t.slice(0,T.length)):t=[],i=0;i<T.length;i++)t[i]=n(T[i]);return t}},61100:$=>{"use strict";$.exports=function(e,M,I,t,T,n){var i=T[0]*e.dpdx(M),u=T[1]*e.dpdy(I),a=1,r=1;if(n){var o=Math.sqrt(T[0]*T[0]+T[1]*T[1]),v=Math.sqrt(n[0]*n[0]+n[1]*n[1]),p=(T[0]*n[0]+T[1]*n[1])/o/v;r=Math.max(0,p)}var f=180*Math.atan2(u,i)/Math.PI;return f<-90?(f+=180,a=-a):f>90&&(f-=180,a=-a),{angle:f,flip:a,p:e.c2p(t,M,I),offsetMultplier:r}}},79207:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(70169),T=e(51915),n=e(61100),i=e(88565),u=e(5228),a=u.strRotate,r=u.strTranslate,o=e(94598);function p(h,g,m,d,A,b,c){var S="const-"+A+"-lines",w=m.selectAll("."+S).data(b);w.enter().append("path").classed(S,!0).style("vector-effect",c?"none":"non-scaling-stroke"),w.each(function(E){var P=E,R=P.x,F=P.y,_=t([],R,h.c2p),z=t([],F,g.c2p),D="M"+T(_,z,P.smoothing);M.select(this).attr("d",D).style("stroke-width",P.width).style("stroke",P.color).style("stroke-dasharray",I.dashStyle(P.dash,P.width)).style("fill","none")}),w.exit().remove()}function f(h,g,m,d,A,b,c,S){var w=b.selectAll("text."+S).data(c);w.enter().append("text").classed(S,!0);var E=0,P={};return w.each(function(R,F){var _;if("auto"===R.axis.tickangle)_=n(d,g,m,R.xy,R.dxy);else{var z=(R.axis.tickangle+180)*Math.PI/180;_=n(d,g,m,R.xy,[Math.cos(z),Math.sin(z)])}F||(P={angle:_.angle,flip:_.flip});var D=(R.endAnchor?-1:1)*_.flip,k=M.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(I.font,R.font).text(R.text).call(i.convertToTspans,h),O=I.bBox(this);k.attr("transform",r(_.p[0],_.p[1])+a(_.angle)+r(R.axis.labelpadding*D,.3*O.height)),E=Math.max(E,O.width+R.axis.labelpadding)}),w.exit().remove(),P.maxExtent=E,P}$.exports=function(g,m,d,A){var b=g._context.staticPlot,c=m.xaxis,S=m.yaxis,E=g._fullLayout._clips;u.makeTraceGroups(A,d,"trace").each(function(P){var R=M.select(this),F=P[0],_=F.trace,z=_.aaxis,D=_.baxis,k=u.ensureSingle(R,"g","minorlayer"),O=u.ensureSingle(R,"g","majorlayer"),U=u.ensureSingle(R,"g","boundarylayer"),H=u.ensureSingle(R,"g","labellayer");R.style("opacity",_.opacity),p(c,S,O,z,"a",z._gridlines,!0),p(c,S,O,D,"b",D._gridlines,!0),p(c,S,k,z,"a",z._minorgridlines,!0),p(c,S,k,D,"b",D._minorgridlines,!0),p(c,S,U,z,"a-boundary",z._boundarylines,b),p(c,S,U,D,"b-boundary",D._boundarylines,b);var j=f(g,c,S,_,F,H,z._labels,"a-label"),ee=f(g,c,S,_,F,H,D._labels,"b-label");(function l(h,g,m,d,A,b,c,S){var w,E,P,R,F=u.aggNums(Math.min,null,m.a),_=u.aggNums(Math.max,null,m.a),z=u.aggNums(Math.min,null,m.b),D=u.aggNums(Math.max,null,m.b);w=.5*(F+_),E=z,P=m.ab2xy(w,E,!0),R=m.dxyda_rough(w,E),void 0===c.angle&&u.extendFlat(c,n(m,A,b,P,m.dxydb_rough(w,E))),x(h,g,m,d,P,R,m.aaxis,A,b,c,"a-title"),w=F,E=.5*(z+D),P=m.ab2xy(w,E,!0),R=m.dxydb_rough(w,E),void 0===S.angle&&u.extendFlat(S,n(m,A,b,P,m.dxyda_rough(w,E))),x(h,g,m,d,P,R,m.baxis,A,b,S,"b-title")})(g,H,_,F,c,S,j,ee),function v(h,g,m,d,A){var b,c,S,w,E=m.select("#"+h._clipPathId);E.size()||(E=m.append("clipPath").classed("carpetclip",!0));var P=u.ensureSingle(E,"path","carpetboundary"),R=g.clipsegments,F=[];for(w=0;w<R.length;w++)b=R[w],c=t([],b.x,d.c2p),S=t([],b.y,A.c2p),F.push(T(c,S,b.bicubic));var _="M"+F.join("L")+"Z";E.attr("id",h._clipPathId),P.attr("d",_)}(_,F,E,c,S)})};var y=o.LINE_SPACING,s=(1-o.MID_SHIFT)/y+1;function x(h,g,m,d,A,b,c,S,w,E,P){var R=[];c.title.text&&R.push(c.title.text);var F=g.selectAll("text."+P).data(R),_=E.maxExtent;F.enter().append("text").classed(P,!0),F.each(function(){var z=n(m,S,w,A,b);-1===["start","both"].indexOf(c.showticklabels)&&(_=0);var D=c.title.font.size;_+=D+c.title.offset;var O=(E.angle+(E.flip<0?180:0)-z.angle+450)%360,U=O>90&&O<270,H=M.select(this);H.text(c.title.text).call(i.convertToTspans,h),U&&(_=(-i.lineCount(H)+s)*y*D-_),H.attr("transform",r(z.p[0],z.p[1])+a(z.angle)+r(0,_)).attr("text-anchor","middle").call(I.font,c.title.font)}),F.exit().remove()}},36786:($,K,e)=>{"use strict";var M=e(35354),I=e(98198).findBin,t=e(64848),T=e(14275),n=e(45547),i=e(51354);$.exports=function(a){var r=a._a,o=a._b,v=r.length,p=o.length,f=a.aaxis,l=a.baxis,y=r[0],s=r[v-1],x=o[0],h=o[p-1],g=r[r.length-1]-r[0],m=o[o.length-1]-o[0],d=g*M.RELATIVE_CULL_TOLERANCE,A=m*M.RELATIVE_CULL_TOLERANCE;y-=d,s+=d,x-=A,h+=A,a.isVisible=function(b,c){return b>y&&b<s&&c>x&&c<h},a.isOccluded=function(b,c){return b<y||b>s||c<x||c>h},a.setScale=function(){var b=a._x,c=a._y,S=t(a._xctrl,a._yctrl,b,c,f.smoothing,l.smoothing);a._xctrl=S[0],a._yctrl=S[1],a.evalxy=T([a._xctrl,a._yctrl],v,p,f.smoothing,l.smoothing),a.dxydi=n([a._xctrl,a._yctrl],f.smoothing,l.smoothing),a.dxydj=i([a._xctrl,a._yctrl],f.smoothing,l.smoothing)},a.i2a=function(b){var c=Math.max(0,Math.floor(b[0]),v-2),S=b[0]-c;return(1-S)*r[c]+S*r[c+1]},a.j2b=function(b){var c=Math.max(0,Math.floor(b[1]),v-2),S=b[1]-c;return(1-S)*o[c]+S*o[c+1]},a.ij2ab=function(b){return[a.i2a(b[0]),a.j2b(b[1])]},a.a2i=function(b){var c=Math.max(0,Math.min(I(b,r),v-2)),S=r[c],w=r[c+1];return Math.max(0,Math.min(v-1,c+(b-S)/(w-S)))},a.b2j=function(b){var c=Math.max(0,Math.min(I(b,o),p-2)),S=o[c],w=o[c+1];return Math.max(0,Math.min(p-1,c+(b-S)/(w-S)))},a.ab2ij=function(b){return[a.a2i(b[0]),a.b2j(b[1])]},a.i2c=function(b,c){return a.evalxy([],b,c)},a.ab2xy=function(b,c,S){if(!S&&(b<r[0]||b>r[v-1]|c<o[0]||c>o[p-1]))return[!1,!1];var w=a.a2i(b),E=a.b2j(c),P=a.evalxy([],w,E);if(S){var z,D,k,O,R=0,F=0,_=[];b<r[0]?(z=0,D=0,R=(b-r[0])/(r[1]-r[0])):b>r[v-1]?(z=v-2,D=1,R=(b-r[v-1])/(r[v-1]-r[v-2])):D=w-(z=Math.max(0,Math.min(v-2,Math.floor(w)))),c<o[0]?(k=0,O=0,F=(c-o[0])/(o[1]-o[0])):c>o[p-1]?(k=p-2,O=1,F=(c-o[p-1])/(o[p-1]-o[p-2])):O=E-(k=Math.max(0,Math.min(p-2,Math.floor(E)))),R&&(a.dxydi(_,z,k,D,O),P[0]+=_[0]*R,P[1]+=_[1]*R),F&&(a.dxydj(_,z,k,D,O),P[0]+=_[0]*F,P[1]+=_[1]*F)}return P},a.c2p=function(b,c,S){return[c.c2p(b[0]),S.c2p(b[1])]},a.p2x=function(b,c,S){return[c.p2c(b[0]),S.p2c(b[1])]},a.dadi=function(b){var c=Math.max(0,Math.min(r.length-2,b));return r[c+1]-r[c]},a.dbdj=function(b){var c=Math.max(0,Math.min(o.length-2,b));return o[c+1]-o[c]},a.dxyda=function(b,c,S,w){var E=a.dxydi(null,b,c,S,w),P=a.dadi(b,S);return[E[0]/P,E[1]/P]},a.dxydb=function(b,c,S,w){var E=a.dxydj(null,b,c,S,w),P=a.dbdj(c,w);return[E[0]/P,E[1]/P]},a.dxyda_rough=function(b,c,S){var w=g*(S||.1),E=a.ab2xy(b+w,c,!0),P=a.ab2xy(b-w,c,!0);return[.5*(E[0]-P[0])/w,.5*(E[1]-P[1])/w]},a.dxydb_rough=function(b,c,S){var w=m*(S||.1),E=a.ab2xy(b,c+w,!0),P=a.ab2xy(b,c-w,!0);return[.5*(E[0]-P[0])/w,.5*(E[1]-P[1])/w]},a.dpdx=function(b){return b._m},a.dpdy=function(b){return b._m}}},76224:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T,n){var i,u,a,r=[],o=[],v=t[0].length,p=t.length;var ee,W,te,B,q,l=0;for(i=0;i<v;i++)for(u=0;u<p;u++)void 0===t[u][i]&&(r.push(i),o.push(u),t[u][i]=(W=u,te=void 0,B=void 0,q=void 0,B=0,q=0,(ee=i)>0&&void 0!==(te=t[W][ee-1])&&(q++,B+=te),ee<v-1&&void 0!==(te=t[W][ee+1])&&(q++,B+=te),W>0&&void 0!==(te=t[W-1][ee])&&(q++,B+=te),W<p-1&&void 0!==(te=t[W+1][ee])&&(q++,B+=te),B/Math.max(1,q))),l=Math.max(l,Math.abs(t[u][i]));if(!r.length)return t;var y,s,x,h,g,m,d,A,b,c,S,E=0,R=0,F=r.length;do{for(E=0,a=0;a<F;a++){i=r[a],u=o[a];var D,k,O,U,H,j,_=0,z=0;0===i?(O=T[H=Math.min(v-1,2)],U=T[1],D=t[u][H],z+=(k=t[u][1])+(k-D)*(T[0]-U)/(U-O),_++):i===v-1&&(O=T[H=Math.max(0,v-3)],U=T[v-2],D=t[u][H],z+=(k=t[u][v-2])+(k-D)*(T[v-1]-U)/(U-O),_++),(0===i||i===v-1)&&u>0&&u<p-1&&(y=n[u+1]-n[u],z+=((s=n[u]-n[u-1])*t[u+1][i]+y*t[u-1][i])/(s+y),_++),0===u?(O=n[j=Math.min(p-1,2)],U=n[1],D=t[j][i],z+=(k=t[1][i])+(k-D)*(n[0]-U)/(U-O),_++):u===p-1&&(O=n[j=Math.max(0,p-3)],U=n[p-2],D=t[j][i],z+=(k=t[p-2][i])+(k-D)*(n[p-1]-U)/(U-O),_++),(0===u||u===p-1)&&i>0&&i<v-1&&(y=T[i+1]-T[i],z+=((s=T[i]-T[i-1])*t[u][i+1]+y*t[u][i-1])/(s+y),_++),_?z/=_:(x=T[i+1]-T[i],h=T[i]-T[i-1],A=(g=n[u+1]-n[u])*(m=n[u]-n[u-1])*(g+m),z=((d=x*h*(x+h))*(m*t[u+1][i]+g*t[u-1][i])+A*(h*t[u][i+1]+x*t[u][i-1]))/(A*(h+x)+d*(m+g))),E+=(c=(b=z-t[u][i])/l)*c,S=_?0:.85,t[u][i]+=b*(1+S)}E=Math.sqrt(E)}while(R++<100&&E>1e-5);return M.log("Smoother converged to",E,"after",R,"iterations"),t}},10:($,K,e)=>{"use strict";var M=e(5228).isArray1D;$.exports=function(t,T,n){var i=n("x"),u=i&&i.length,a=n("y"),r=a&&a.length;if(!u&&!r)return!1;if(T._cheater=!i,u&&!M(i)||r&&!M(a))T._length=null;else{var o=u?i.length:1/0;r&&(o=Math.min(o,a.length)),T.a&&T.a.length&&(o=Math.min(o,T.a.length)),T.b&&T.b.length&&(o=Math.min(o,T.b.length)),T._length=o}return!0}},10877:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(50971),t=e(567),T=e(82684),n=e(36593).defaultLine,i=e(18836).extendFlat,u=I.marker.line;$.exports=i({locations:{valType:"data_array",editType:"calc",description:["Sets the coordinates via location IDs or names.","See `locationmode` for more info."].join(" ")},locationmode:I.locationmode,z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:i({},I.geojson,{description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")}),featureidkey:I.featureidkey,text:i({},I.text,{description:"Sets the text elements associated with each location."}),hovertext:i({},I.hovertext,{description:"Same as `text`."}),marker:{line:{color:i({},u.color,{dflt:n}),width:i({},u.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the locations."},editType:"calc"},selected:{marker:{opacity:I.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:I.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:i({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",editTypeOverride:"calc"}))},25974:($,K,e)=>{"use strict";var M=e(7347),I=e(71103).BADNUM,t=e(93727),T=e(79179),n=e(20107);function i(u){return u&&"string"==typeof u}$.exports=function(a,r){var p,o=r._length,v=new Array(o);p=r.geojson?function(x){return i(x)||M(x)}:i;for(var f=0;f<o;f++){var l=v[f]={},y=r.locations[f],s=r.z[f];p(y)&&M(s)?(l.loc=y,l.z=s):(l.loc=null,l.z=I),l.index=f}return T(v,r),t(a,r,{vals:r.z,containerStr:"",cLetter:"z"}),n(v,r),v}},65726:($,K,e)=>{"use strict";var M=e(5228),I=e(14739),t=e(10877);$.exports=function(n,i,u,a){function r(s,x){return M.coerce(n,i,t,s,x)}var o=r("locations"),v=r("z");if(o&&o.length&&M.isArrayOrTypedArray(v)&&v.length){i._length=Math.min(o.length,v.length);var f,p=r("geojson");("string"==typeof p&&""!==p||M.isPlainObject(p))&&(f="geojson-id"),"geojson-id"===r("locationmode",f)&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&r("marker.line.color"),r("marker.opacity"),I(n,i,a,r,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(i,r)}else i.visible=!1}},59985:$=>{"use strict";$.exports=function(e,M,I,t,T){e.location=M.location,e.z=M.z;var n=t[T];return n.fIn&&n.fIn.properties&&(e.properties=n.fIn.properties),e.ct=n.ct,e}},89106:($,K,e)=>{"use strict";var M=e(91464),I=e(10877),t=e(5228).fillText;$.exports=function(i,u,a){var p,f,l,y,r=i.cd,o=r[0].trace,v=i.subplot,s=[u,a],x=[u+360,a];for(f=0;f<r.length;f++)if(y=!1,(p=r[f])._polygons){for(l=0;l<p._polygons.length;l++)p._polygons[l].contains(s)&&(y=!y),p._polygons[l].contains(x)&&(y=!y);if(y)break}if(y&&p)return i.x0=i.x1=i.xa.c2p(p.ct),i.y0=i.y1=i.ya.c2p(p.ct),i.index=p.index,i.location=p.loc,i.z=p.z,i.zLabel=M.tickText(v.mockAxis,v.mockAxis.c2l(p.z),"hover").text,i.hovertemplate=p.hovertemplate,function T(n,i,u){if(!i.hovertemplate){var a=u.hi||i.hoverinfo,r=String(u.loc),o="all"===a?I.hoverinfo.flags:a.split("+"),v=-1!==o.indexOf("name"),p=-1!==o.indexOf("location"),f=-1!==o.indexOf("z"),l=-1!==o.indexOf("text"),s=[];!v&&p?n.nameOverride=r:(v&&(n.nameOverride=i.name),p&&s.push(r)),f&&s.push(n.zLabel),l&&t(u,i,s),n.extraText=s.join("<br>")}}(i,o,p),[i]}},45452:($,K,e)=>{"use strict";$.exports={attributes:e(10877),supplyDefaults:e(65726),colorbar:e(36661),calc:e(25974),calcGeoJSON:e(56138).calcGeoJSON,plot:e(56138).plot,style:e(79778).style,styleOnSelect:e(79778).styleOnSelect,hoverPoints:e(89106),eventData:e(59985),selectPoints:e(43718),moduleType:"trace",name:"choropleth",basePlotModule:e(48096),categories:["geo","noOpacity","showLegend"],meta:{description:["The data that describes the choropleth value-to-color mapping","is set in `z`.","The geographic locations corresponding to each value in `z`","are set in `locations`."].join(" ")}}},56138:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(14369),T=e(55024).getTopojsonFeatures,n=e(73332).findExtremes,i=e(79778).style;$.exports={calcGeoJSON:function a(r,o){for(var v=r[0].trace,p=o[v.geo],f=p._subplot,l=v.locationmode,y=v._length,s="geojson-id"===l?t.extractTraceFeature(r):T(v,f.topojson),x=[],h=[],g=0;g<y;g++){var m=r[g],d="geojson-id"===l?m.fOut:t.locationToFeature(l,m.loc,s);if(d){m.geojson=d,m.ct=d.properties.ct,m._polygons=t.feature2polygons(d);var A=t.computeBbox(d);x.push(A[0],A[2]),h.push(A[1],A[3])}else m.geojson=null}if("geojson"===p.fitbounds&&"geojson-id"===l){var b=t.computeBbox(t.getTraceGeojson(v));x=[b[0],b[2]],h=[b[1],b[3]]}var c={padded:!0};v._extremes.lon=n(p.lonaxis._ax,x,c),v._extremes.lat=n(p.lataxis._ax,h,c)},plot:function u(r,o,v){var p=o.layers.backplot.select(".choroplethlayer");I.makeTraceGroups(p,v,"trace choropleth").each(function(f){var y=M.select(this).selectAll("path.choroplethlocation").data(I.identity);y.enter().append("path").classed("choroplethlocation",!0),y.exit().remove(),i(r,f)})}}},43718:$=>{"use strict";$.exports=function(e,M){var i,u,a,r,o,I=e.cd,t=e.xaxis,T=e.yaxis,n=[];if(!1===M)for(i=0;i<I.length;i++)I[i].selected=0;else for(i=0;i<I.length;i++)(a=(u=I[i]).ct)&&(r=t.c2p(a),o=T.c2p(a),M.contains([r,o],null,i,e)?(n.push({pointNumber:i,lon:a[0],lat:a[1]}),u.selected=1):u.selected=0);return n}},79778:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(27630),T=e(45103);function i(a,r){var o=r[0].trace,p=r[0].node3.selectAll(".choroplethlocation"),f=o.marker||{},l=f.line||{},y=T.makeColorScaleFuncFromTrace(o);p.each(function(s){M.select(this).attr("fill",y(s.z)).call(I.stroke,s.mlc||l.color).call(t.dashLine,"",s.mlw||l.width||0).style("opacity",f.opacity)}),t.selectedPointStyle(p,o)}$.exports={style:function n(a,r){r&&i(a,r)},styleOnSelect:function u(a,r){var o=r[0].node3,v=r[0].trace;v.selectedpoints?t.selectedPointStyle(o.selectAll(".choroplethlocation"),v):i(0,r)}}},77701:($,K,e)=>{"use strict";var M=e(10877),I=e(567),t=e(9430).fF,T=e(82684),n=e(18836).extendFlat;$.exports=n({locations:{valType:"data_array",editType:"calc",description:["Sets which features found in *geojson* to plot using","their feature `id` field."].join(" ")},z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:{valType:"any",editType:"calc",description:["Sets the GeoJSON data associated with this trace.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:n({},M.featureidkey,{description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Support nested property, for example *properties.name*."].join(" ")}),below:{valType:"string",editType:"plot",description:["Determines if the choropleth polygons will be inserted","before the layer with the specified ID.","By default, choroplethmapbox traces are placed above the water layers.","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:M.text,hovertext:M.hovertext,marker:{line:{color:n({},M.marker.line.color,{editType:"plot"}),width:n({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:n({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:n({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:n({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:t({},{keys:["properties"]}),showlegend:n({},T.showlegend,{dflt:!1})},I("",{cLetter:"z",editTypeOverride:"calc"}))},36607:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(45103),T=e(27630),n=e(41368).makeBlank,i=e(14369);function a(r){var p,o=r[0].trace,v=o._opts;if(o.selectedpoints){for(var f=T.makeSelectedPointStyleFns(o),l=0;l<r.length;l++){var y=r[l];y.fOut&&(y.fOut.properties.mo2=f.selectedOpacityFn(y))}p={type:"identity",property:"mo2"}}else p=I.isArrayOrTypedArray(o.marker.opacity)?{type:"identity",property:"mo"}:o.marker.opacity;return I.extendFlat(v.fill.paint,{"fill-opacity":p}),I.extendFlat(v.line.paint,{"line-opacity":p}),v}$.exports={convert:function u(r){var o=r[0].trace,v=!0===o.visible&&0!==o._length,p={layout:{visibility:"none"},paint:{}},f={layout:{visibility:"none"},paint:{}},l=o._opts={fill:p,line:f,geojson:n()};if(!v)return l;var y=i.extractTraceFeature(r);if(!y)return l;var g,m,d,s=t.makeColorScaleFuncFromTrace(o),x=o.marker,h=x.line||{};I.isArrayOrTypedArray(x.opacity)&&(g=function(E){var P=E.mo;return M(P)?+I.constrain(P,0,1):0}),I.isArrayOrTypedArray(h.color)&&(m=function(E){return E.mlc}),I.isArrayOrTypedArray(h.width)&&(d=function(E){return E.mlw});for(var A=0;A<r.length;A++){var b=r[A],c=b.fOut;if(c){var S=c.properties;S.fc=s(b.z),g&&(S.mo=g(b)),m&&(S.mlc=m(b)),d&&(S.mlw=d(b)),b.ct=S.ct,b._polygons=i.feature2polygons(c)}}var w=g?{type:"identity",property:"mo"}:x.opacity;return I.extendFlat(p.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":w}),I.extendFlat(f.paint,{"line-color":m?{type:"identity",property:"mlc"}:h.color,"line-width":d?{type:"identity",property:"mlw"}:h.width,"line-opacity":w}),p.layout.visibility="visible",f.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:y},a(r),l},convertOnSelect:a}},50102:($,K,e)=>{"use strict";var M=e(5228),I=e(14739),t=e(77701);$.exports=function(n,i,u,a){function r(l,y){return M.coerce(n,i,t,l,y)}var o=r("locations"),v=r("z"),p=r("geojson");M.isArrayOrTypedArray(o)&&o.length&&M.isArrayOrTypedArray(v)&&v.length&&("string"==typeof p&&""!==p||M.isPlainObject(p))?(r("featureidkey"),i._length=Math.min(o.length,v.length),r("below"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&r("marker.line.color"),r("marker.opacity"),I(n,i,a,r,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(i,r)):i.visible=!1}},32415:($,K,e)=>{"use strict";$.exports={attributes:e(77701),supplyDefaults:e(50102),colorbar:e(36661),calc:e(25974),plot:e(26054),hoverPoints:e(89106),eventData:e(59985),selectPoints:e(43718),styleOnSelect:function(M,I){I&&I[0].trace._glTrace.updateOnSelect(I)},getBelow:function(M,I){for(var t=I.getMapLayers(),T=t.length-2;T>=0;T--){var n=t[T].id;if("string"==typeof n&&0===n.indexOf("water"))for(var i=T+1;i<t.length;i++)if("string"==typeof(n=t[i].id)&&-1===n.indexOf("plotly-"))return n}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(8382),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox",description:["GeoJSON features to be filled are set in `geojson`","The data that describes the choropleth value-to-color mapping","is set in `locations` and `z`."].join(" ")}}},26054:($,K,e)=>{"use strict";var M=e(36607).convert,I=e(36607).convertOnSelect,t=e(97094).traceLayerPrefix;function T(i,u){this.type="choroplethmapbox",this.subplot=i,this.uid=u,this.sourceId="source-"+u,this.layerList=[["fill",t+u+"-fill"],["line",t+u+"-line"]],this.below=null}var n=T.prototype;n.update=function(i){this._update(M(i)),i[0].trace._glTrace=this},n.updateOnSelect=function(i){this._update(I(i))},n._update=function(i){var u=this.subplot,a=this.layerList,r=u.belowLookup["trace-"+this.uid];u.map.getSource(this.sourceId).setData(i.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(i,r),this.below=r);for(var o=0;o<a.length;o++){var v=a[o],p=v[0],f=v[1],l=i[p];u.setOptions(f,"setLayoutProperty",l.layout),"visible"===l.layout.visibility&&u.setOptions(f,"setPaintProperty",l.paint)}},n._addLayers=function(i,u){for(var a=this.subplot,r=this.layerList,o=this.sourceId,v=0;v<r.length;v++){var p=r[v],f=p[0],l=i[f];a.addLayer({type:f,id:p[1],source:o,layout:l.layout,paint:l.paint},u)}},n._removeLayers=function(){for(var i=this.subplot.map,u=this.layerList,a=u.length-1;a>=0;a--)i.removeLayer(u[a][1])},n.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},$.exports=function(u,a){var r=a[0].trace,o=new T(u,r.uid),v=o.sourceId,p=M(a),f=o.below=u.belowLookup["trace-"+r.uid];return u.map.addSource(v,{type:"geojson",data:p.geojson}),o._addLayers(p,f),a[0].trace._glTrace=o,o}},34603:($,K,e)=>{"use strict";var M=e(567),I=e(88489).axisHoverFormat,t=e(9430).fF,T=e(67787),n=e(82684),i=e(18836).extendFlat,u={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x coordinates of the vector field","and of the displayed cones."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the y coordinates of the vector field","and of the displayed cones."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the z coordinates of the vector field","and of the displayed cones."].join(" ")},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled",description:["Determines whether `sizeref` is set as a *scaled* (i.e unitless) scalar","(normalized by the max u/v/w norm in the vector field) or as","*absolute* value (in the same units as the vector field)."].join(" ")},sizeref:{valType:"number",editType:"calc",min:0,description:["Adjusts the cone size scaling.","The size of the cones is determined by their u/v/w norm multiplied a factor and `sizeref`.",'This factor (computed internally) corresponds to the minimum "time" to travel across',"two successive x/y/z positions at the average velocity of those two successive positions.","All cones in a given trace use the same factor.","With `sizemode` set to *scaled*, `sizeref` is unitless, its default value is *0.5*","With `sizemode` set to *absolute*, `sizeref` has the same units as the u/v/w vector field,","its the default value is half the sample's maximum vector norm."].join(" ")},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm",description:["Sets the cones' anchor with respect to their x/y/z positions.","Note that *cm* denote the cone's center of mass which corresponds to","1/4 from the tail to tip."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the cones.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:t({editType:"calc"},{keys:["norm"]}),uhoverformat:I("u",1),vhoverformat:I("v",1),whoverformat:I("w",1),xhoverformat:I("x"),yhoverformat:I("y"),zhoverformat:I("z"),showlegend:i({},n.showlegend,{dflt:!1})};i(u,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(r){u[r]=T[r]}),u.hoverinfo=i({},n.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),u.transforms=void 0,$.exports=u},72264:($,K,e)=>{"use strict";var M=e(93727);$.exports=function(t,T){for(var n=T.u,i=T.v,u=T.w,a=Math.min(T.x.length,T.y.length,T.z.length,n.length,i.length,u.length),r=-1/0,o=1/0,v=0;v<a;v++){var p=n[v],f=i[v],l=u[v],y=Math.sqrt(p*p+f*f+l*l);r=Math.max(r,y),o=Math.min(o,y)}T._len=a,T._normMax=r,M(t,T,{vals:[o,r],containerStr:"",cLetter:"c"})}},66152:($,K,e)=>{"use strict";var M=e(17745).gl_cone3d,I=e(17745).gl_cone3d.createConeMesh,t=e(5228).simpleMap,T=e(15989).parseColorScale,n=e(45103).extractOpts,i=e(5228).isArrayOrTypedArray,u=e(9964);function a(y,s){this.scene=y,this.uid=s,this.mesh=null,this.data=null}var r=a.prototype;r.handlePick=function(y){if(y.object===this.mesh){var s=y.index=y.data.index,x=this.data.x[s],h=this.data.y[s],g=this.data.z[s],m=this.data.u[s],d=this.data.v[s],A=this.data.w[s];y.traceCoordinate=[x,h,g,m,d,A,Math.sqrt(m*m+d*d+A*A)];var b=this.data.hovertext||this.data.text;return i(b)&&void 0!==b[s]?y.textLabel=b[s]:b&&(y.textLabel=b),!0}};var o={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},p={tip:1,tail:1,cm:.75,center:.5};function f(y,s){var x=y.fullSceneLayout,h=y.dataScale,g={};function m(c,S){var w=x[S],E=h[o[S]];return t(c,function(P){return w.d2l(P)*E})}g.vectors=u(m(s.u,"xaxis"),m(s.v,"yaxis"),m(s.w,"zaxis"),s._len),g.positions=u(m(s.x,"xaxis"),m(s.y,"yaxis"),m(s.z,"zaxis"),s._len);var d=n(s);g.colormap=T(s),g.vertexIntensityBounds=[d.min/s._normMax,d.max/s._normMax],g.coneOffset=v[s.anchor],"scaled"===s.sizemode?g.coneSize=s.sizeref||.5:g.coneSize=s.sizeref&&s._normMax?s.sizeref/s._normMax:.5;var A=M(g),b=s.lightposition;return A.lightPosition=[b.x,b.y,b.z],A.ambient=s.lighting.ambient,A.diffuse=s.lighting.diffuse,A.specular=s.lighting.specular,A.roughness=s.lighting.roughness,A.fresnel=s.lighting.fresnel,A.opacity=s.opacity,s._pad=p[s.anchor]*A.vectorScale*A.coneScale*s._normMax,A}r.update=function(y){this.data=y;var s=f(this.scene,y);this.mesh.update(s)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function l(y,s){var x=y.glplot.gl,h=f(y,s),g=I(x,h),m=new a(y,s.uid);return m.mesh=g,m.data=s,g._trace=m,y.glplot.add(g),m}},76602:($,K,e)=>{"use strict";var M=e(5228),I=e(14739),t=e(34603);$.exports=function(n,i,u,a){function r(s,x){return M.coerce(n,i,t,s,x)}var o=r("u"),v=r("v"),p=r("w"),f=r("x"),l=r("y"),y=r("z");o&&o.length&&v&&v.length&&p&&p.length&&f&&f.length&&l&&l.length&&y&&y.length?(r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),I(n,i,a,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),i._length=null):i.visible=!1}},52694:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"cone",basePlotModule:e(9275),categories:["gl3d","showLegend"],attributes:e(34603),supplyDefaults:e(76602),colorbar:{min:"cmin",max:"cmax"},calc:e(72264),plot:e(66152),eventData:function(M,I){return M.norm=I.traceCoordinate[6],M},meta:{description:["Use cone traces to visualize vector fields.","","Specify a vector field using 6 1D arrays,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, `w`.","The cones are drawn exactly at the positions given","by `x`, `y` and `z`."].join(" ")}}},5763:($,K,e)=>{"use strict";var M=e(63726),I=e(55405),t=e(88489),T=t.axisHoverFormat,n=t.descriptionOnlyNumbers,i=e(567),u=e(65822).P,a=e(47297),r=e(18836).extendFlat,o=e(80797),v=o.COMPARISON_OPS2,p=o.INTERVAL_OPS,f=I.line;$.exports=r({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:r({},M.texttemplate,{description:["For this trace it only has an effect if `coloring` is set to *heatmap*.",M.texttemplate.description].join(" ")}),textfont:r({},M.textfont,{description:["For this trace it only has an effect if `coloring` is set to *heatmap*.",M.textfont.description].join(" ")}),hoverongaps:M.hoverongaps,connectgaps:r({},M.connectgaps,{description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array","otherwise it is defaulted to false."].join(" ")}),fillcolor:{valType:"color",editType:"calc",description:["Sets the fill color if `contours.type` is *constraint*.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0},description:["Determines whether or not the contour level attributes are","picked by an algorithm.","If *true*, the number of contour levels can be set in `ncontours`.","If *false*, set the contour level attributes in `contours`."].join(" ")},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc",description:["Sets the maximum number of contour levels. The actual number","of contours will be chosen automatically to be less than or","equal to the value of `ncontours`.","Has an effect only if `autocontour` is *true* or if","`contours.size` is missing."].join(" ")},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc",description:["If `levels`, the data is represented as a contour plot with multiple","levels displayed. If `constraint`, the data is represented as constraints","with the invalid region shaded as specified by the `operation` and","`value` parameters."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the step between each contour level.","Must be positive."].join(" ")},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *heatmap*, a heatmap gradient coloring is applied","between each contour level.","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not the contour lines are drawn.","Has an effect only if `contours.coloring` is set to *fill*."].join(" ")},showlabels:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether to label the contour lines with their values."].join(" ")},labelfont:a({editType:"plot",colorEditType:"style",description:["Sets the font used for labeling the contour levels.","The default color comes from the lines, if shown.","The default family and size come from `layout.font`."].join(" ")}),labelformat:{valType:"string",dflt:"",editType:"plot",description:n("contour label")},operation:{valType:"enumerated",values:[].concat(v).concat(p),dflt:"=",editType:"calc",description:["Sets the constraint operation.","*=* keeps regions equal to `value`","*<* and *<=* keep regions less than `value`","*>* and *>=* keep regions greater than `value`","*[]*, *()*, *[)*, and *(]* keep regions inside `value[0]` to `value[1]`","*][*, *)(*, *](*, *)[* keep regions outside `value[0]` to value[1]`","Open vs. closed intervals make no difference to constraint display, but","all versions are allowed for consistency with filter transforms."].join(" ")},value:{valType:"any",dflt:0,editType:"calc",description:["Sets the value or values of the constraint boundary.","When `operation` is set to one of the comparison values","("+v+")","*value* is expected to be a number.","When `operation` is set to one of the interval values","("+p+")","*value* is expected to be an array of two numbers where the first","is the lower bound and the second is the upper bound."].join(" ")},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},f.color,{editType:"style+colorbars",description:["Sets the color of the contour level.","Has no effect if `contours.coloring` is set to *lines*."].join(" ")}),width:{valType:"number",min:0,editType:"style+colorbars",description:["Sets the contour line width in (in px)","Defaults to *0.5* when `contours.type` is *levels*.","Defaults to *2* when `contour.type` is *constraint*."].join(" ")},dash:u,smoothing:r({},f.smoothing,{description:["Sets the amount of smoothing for the contour lines,","where *0* corresponds to no smoothing."].join(" ")}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},47676:($,K,e)=>{"use strict";var M=e(45103),I=e(15576),t=e(17095),T=e(93221);$.exports=function(i,u){var a=I(i,u),r=a[0].z;t(u,r);var p,o=u.contours,v=M.extractOpts(u);if("heatmap"===o.coloring&&v.auto&&!1===u.autocontour){var f=o.start,l=T(o),y=o.size||1,s=Math.floor((l-f)/y)+1;isFinite(y)||(y=1,s=1);var x=f-y/2;p=[x,x+s*y]}else p=r;return M.calc(i,u,{vals:p,cLetter:"z"}),a}},16690:$=>{"use strict";$.exports=function(K,e){var t,M=K[0],I=M.z;switch(e.type){case"levels":var T=Math.min(I[0][0],I[0][1]);for(t=0;t<K.length;t++){var n=K[t];n.prefixBoundary=!n.edgepaths.length&&(T>n.level||n.starts.length&&T===n.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var i=M.x.length,u=M.y.length,a=-1/0,r=1/0;for(t=0;t<u;t++)r=Math.min(r,I[t][0]),r=Math.min(r,I[t][i-1]),a=Math.max(a,I[t][0]),a=Math.max(a,I[t][i-1]);for(t=1;t<i-1;t++)r=Math.min(r,I[0][t]),r=Math.min(r,I[u-1][t]),a=Math.max(a,I[0][t]),a=Math.max(a,I[u-1][t]);var v,p,o=e.value;switch(e._operation){case">":o>a&&(M.prefixBoundary=!0);break;case"<":(o<r||M.starts.length&&o===r)&&(M.prefixBoundary=!0);break;case"[]":v=Math.min(o[0],o[1]),((p=Math.max(o[0],o[1]))<r||v>a||M.starts.length&&p===r)&&(M.prefixBoundary=!0);break;case"][":v=Math.min(o[0],o[1]),p=Math.max(o[0],o[1]),v<r&&p>a&&(M.prefixBoundary=!0)}}}},81060:($,K,e)=>{"use strict";var M=e(45103),I=e(93092),t=e(93221);$.exports={min:"zmin",max:"zmax",calc:function T(n,i,u){var a=i.contours,r=i.line,o=a.size||1,v=a.coloring,p=I(i,{isColorbar:!0});if("heatmap"===v){var f=M.extractOpts(i);u._fillgradient=f.reversescale?M.flipScale(f.colorscale):f.colorscale,u._zrange=[f.min,f.max]}else"fill"===v&&(u._fillcolor=p);u._line={color:"lines"===v?p:r.color,width:!1!==a.showlines?r.width:0,dash:r.dash},u._levels={start:a.start,end:t(a),size:o}}}},52126:$=>{"use strict";$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},43512:($,K,e)=>{"use strict";var M=e(7347),I=e(66325),t=e(8416),T=t.addOpacity,n=t.opacity,i=e(80797),u=e(5228).isArrayOrTypedArray,a=i.CONSTRAINT_REDUCTION,r=i.COMPARISON_OPS2;$.exports=function(p,f,l,y,s,x){var g,m,d,h=f.contours,A=l("contours.operation");(h._operation=a[A],function o(v,p){var f;-1===r.indexOf(p.operation)?(v("contours.value",[0,1]),u(p.value)?p.value.length>2?p.value=p.value.slice(2):0===p.length?p.value=[0,1]:p.length<2?(f=parseFloat(p.value[0]),p.value=[f,f+1]):p.value=[parseFloat(p.value[0]),parseFloat(p.value[1])]:M(p.value)&&(f=parseFloat(p.value),p.value=[f,f+1])):(v("contours.value",0),M(p.value)||(u(p.value)?p.value=parseFloat(p.value[0]):p.value=0))}(l,h),"="===A?g=h.showlines=!0:(g=l("contours.showlines"),d=l("fillcolor",T((p.line||{}).color||s,.5))),g)&&(m=l("line.color",d&&n(d)?T(f.fillcolor,1):s),l("line.width",2),l("line.dash"));l("line.smoothing"),I(l,y,m,x)}},36677:($,K,e)=>{"use strict";var M=e(80797),I=e(7347);function t(i,u){var r,a=Array.isArray(u);function o(v){return I(v)?+v:null}return-1!==M.COMPARISON_OPS2.indexOf(i)?r=o(a?u[0]:u):-1!==M.INTERVAL_OPS.indexOf(i)?r=a?[o(u[0]),o(u[1])]:[o(u),o(u)]:-1!==M.SET_OPS.indexOf(i)&&(r=a?u.map(o):[o(u)]),r}function T(i){return function(u){u=t(i,u);var a=Math.min(u[0],u[1]),r=Math.max(u[0],u[1]);return{start:a,end:r,size:r-a}}}function n(i){return function(u){return{start:u=t(i,u),end:1/0,size:1/0}}}$.exports={"[]":T("[]"),"][":T("]["),">":n(">"),"<":n("<"),"=":n("=")}},32042:$=>{"use strict";$.exports=function(e,M,I,t){var T=t("contours.start"),n=t("contours.end"),i=!1===T||!1===n,u=I("contours.size");((i?M.autocontour=!0:I("autocontour",!1))||!u)&&I("ncontours")}},29148:($,K,e)=>{"use strict";var M=e(5228);function I(t){return M.extendFlat({},t,{edgepaths:M.extendDeep([],t.edgepaths),paths:M.extendDeep([],t.paths),starts:M.extendDeep([],t.starts)})}$.exports=function(t,T){var n,i,u,a=function(v){return v.reverse()},r=function(v){return v};switch(T){case"=":case"<":return t;case">":for(1!==t.length&&M.warn("Contour data invalid for the specified inequality operation."),i=t[0],n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=a(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=a(i.paths[n]);for(n=0;n<i.starts.length;n++)i.starts[n]=a(i.starts[n]);return t;case"][":var o=a;a=r,r=o;case"[]":for(2!==t.length&&M.warn("Contour data invalid for the specified inequality range operation."),i=I(t[0]),u=I(t[1]),n=0;n<i.edgepaths.length;n++)i.edgepaths[n]=a(i.edgepaths[n]);for(n=0;n<i.paths.length;n++)i.paths[n]=a(i.paths[n]);for(n=0;n<i.starts.length;n++)i.starts[n]=a(i.starts[n]);for(;u.edgepaths.length;)i.edgepaths.push(r(u.edgepaths.shift()));for(;u.paths.length;)i.paths.push(r(u.paths.shift()));for(;u.starts.length;)i.starts.push(r(u.starts.shift()));return[i]}}},61340:($,K,e)=>{"use strict";var M=e(5228),I=e(34212),t=e(18031),T=e(43512),n=e(32042),i=e(40920),u=e(35411),a=e(5763);$.exports=function(o,v,p,f){function l(h,g){return M.coerce(o,v,a,h,g)}if(I(o,v,l,f)){t(o,v,f,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var x="constraint"===l("contours.type");l("connectgaps",M.isArray1D(v.z)),x?T(o,v,l,f,p):(n(o,v,l,function y(h){return M.coerce2(o,v,a,h)}),i(o,v,l,f)),v.contours&&"heatmap"===v.contours.coloring&&u(l,f)}else v.visible=!1}},35894:($,K,e)=>{"use strict";var M=e(5228),I=e(36677),t=e(93221);$.exports=function(n,i,u){for(var a="constraint"===n.type?I[n._operation](n.value):n,r=a.size,o=[],v=t(a),p=u.trace._carpetTrace,f=p?{xaxis:p.aaxis,yaxis:p.baxis,x:u.a,y:u.b}:{xaxis:i.xaxis,yaxis:i.yaxis,x:u.x,y:u.y},l=a.start;l<v;l+=r)if(o.push(M.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:u.z,smoothing:u.trace.line.smoothing},f)),o.length>1e3){M.warn("Too many contours, clipping at 1000",n);break}return o}},93221:$=>{"use strict";$.exports=function(e){return e.end+e.size/1e6}},76486:($,K,e)=>{"use strict";var M=e(5228),I=e(52126);function t(a,r,o,v){return Math.abs(a[0]-r[0])<o&&Math.abs(a[1]-r[1])<v}function T(a,r){var o=a[2]-r[2],v=a[3]-r[3];return Math.sqrt(o*o+v*v)}function n(a,r,o,v,p){var d,f=r.join(","),l=a.crossings[f],y=function i(a,r,o){var v=0,p=0;return a>20&&r?208===a||1114===a?v=0===o[0]?1:-1:p=0===o[1]?1:-1:-1!==I.BOTTOMSTART.indexOf(a)?p=1:-1!==I.LEFTSTART.indexOf(a)?v=1:-1!==I.TOPSTART.indexOf(a)?p=-1:v=-1,[v,p]}(l,o,r),s=[u(a,r,[-y[0],-y[1]])],x=a.z.length,h=a.z[0].length,g=r.slice(),m=y.slice();for(d=0;d<1e4;d++){if(l>20?(l=I.CHOOSESADDLE[l][(y[0]||y[1])<0?0:1],a.crossings[f]=I.SADDLEREMAINDER[l]):delete a.crossings[f],!(y=I.NEWDELTA[l])){M.log("Found bad marching index:",l,r,a.level);break}s.push(u(a,r,y)),r[0]+=y[0],r[1]+=y[1],f=r.join(","),t(s[s.length-1],s[s.length-2],v,p)&&s.pop();var A=y[0]&&(r[0]<0||r[0]>h-2)||y[1]&&(r[1]<0||r[1]>x-2);if(r[0]===g[0]&&r[1]===g[1]&&y[0]===m[0]&&y[1]===m[1]||o&&A)break;l=a.crossings[f]}1e4===d&&M.log("Infinite loop in contour?");var R,F,_,z,D,k,O,U,H,j,ee,c=t(s[0],s[s.length-1],v,p),S=0,w=.2*a.smoothing,E=[],P=0;for(d=1;d<s.length;d++)S+=O=T(s[d],s[d-1]),E.push(O);var W=S/E.length*w;function B(oe){return s[oe%s.length]}for(d=s.length-2;d>=P;d--)if((R=E[d])<W){for(_=0,F=d-1;F>=P&&R+E[F]<W;F--)R+=E[F];if(c&&d===s.length-2)for(_=0;_<F&&R+E[_]<W;_++)R+=E[_];D=d-F+_+1,k=Math.floor((d+F+_+2)/2),z=c||d!==s.length-2?c||-1!==F?D%2?B(k):[(B(k)[0]+B(k+1)[0])/2,(B(k)[1]+B(k+1)[1])/2]:s[0]:s[s.length-1],s.splice(F+1,d-F+1,z),d=F+1,_&&(P=_),c&&(d===s.length-2?s[_]=s[s.length-1]:0===d&&(s[s.length-1]=s[0]))}for(s.splice(0,P),d=0;d<s.length;d++)s[d].length=2;if(!(s.length<2))if(c)s.pop(),a.paths.push(s);else{o||M.log("Unclosed interior contour?",a.level,g.join(","),s.join("L"));var te=!1;for(U=0;U<a.edgepaths.length;U++)if(j=a.edgepaths[U],!te&&t(j[0],s[s.length-1],v,p)){s.pop(),te=!0;var q=!1;for(H=0;H<a.edgepaths.length;H++)if(t((ee=a.edgepaths[H])[ee.length-1],s[0],v,p)){q=!0,s.shift(),a.edgepaths.splice(U,1),H===U?a.paths.push(s.concat(ee)):(H>U&&H--,a.edgepaths[H]=ee.concat(s,j));break}q||(a.edgepaths[U]=s.concat(j))}for(U=0;U<a.edgepaths.length&&!te;U++)t((j=a.edgepaths[U])[j.length-1],s[0],v,p)&&(s.shift(),a.edgepaths[U]=j.concat(s),te=!0);te||a.edgepaths.push(s)}}function u(a,r,o){var v=r[0]+Math.max(o[0],0),p=r[1]+Math.max(o[1],0),f=a.z[p][v],l=a.xaxis,y=a.yaxis;if(o[1]){var s=(a.level-f)/(a.z[p][v+1]-f),x=(1!==s?(1-s)*l.c2l(a.x[v]):0)+(0!==s?s*l.c2l(a.x[v+1]):0);return[l.c2p(l.l2c(x),!0),y.c2p(a.y[p],!0),v+s,p]}var h=(a.level-f)/(a.z[p+1][v]-f),g=(1!==h?(1-h)*y.c2l(a.y[p]):0)+(0!==h?h*y.c2l(a.y[p+1]):0);return[l.c2p(a.x[v],!0),y.c2p(y.l2c(g),!0),v,p+h]}$.exports=function(r,o,v){var p,l,y,s;for(o=o||.01,v=v||.01,l=0;l<r.length;l++){for(y=r[l],s=0;s<y.starts.length;s++)n(y,y.starts[s],"edge",o,v);for(p=0;Object.keys(y.crossings).length&&p<1e4;)p++,n(y,Object.keys(y.crossings)[0].split(",").map(Number),void 0,o,v);1e4===p&&M.log("Infinite loop in contour?")}}},86140:($,K,e)=>{"use strict";var M=e(8416),I=e(22996);$.exports=function(T,n,i,u,a){a||(a={}),a.isContour=!0;var r=I(T,n,i,u,a);return r&&r.forEach(function(o){var v=o.trace;"constraint"===v.contours.type&&(v.fillcolor&&M.opacity(v.fillcolor)?o.color=M.addOpacity(v.fillcolor,1):v.contours.showlines&&M.opacity(v.line.color)&&(o.color=M.addOpacity(v.line.color,1)))}),r}},50028:($,K,e)=>{"use strict";$.exports={attributes:e(5763),supplyDefaults:e(61340),calc:e(47676),plot:e(34120).plot,style:e(57327),colorbar:e(81060),hoverPoints:e(86140),moduleType:"trace",name:"contour",basePlotModule:e(24329),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{description:["The data from which contour lines are computed is set in `z`.","Data in `z` must be a {2D array} of numbers.","Say that `z` has N rows and M columns, then by default,","these N rows correspond to N y coordinates","(set in `y` or auto-generated) and the M columns","correspond to M x coordinates (set in `x` or auto-generated).","By setting `transpose` to *true*, the above behavior is flipped."].join(" ")}}},66325:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T,n,i){if(i||(i={}),t("contours.showlabels")){var a=T.font;M.coerceFont(t,"contours.labelfont",{family:a.family,size:a.size,color:n}),t("contours.labelformat")}!1!==i.hasHover&&t("zhoverformat")}},93092:($,K,e)=>{"use strict";var M=e(21572),I=e(45103),t=e(93221);$.exports=function(n){var i=n.contours,u=i.start,a=t(i),r=i.size||1,o=Math.floor((a-u)/r)+1,v="lines"===i.coloring?0:1,p=I.extractOpts(n);isFinite(r)||(r=1,o=1);var x,h,f=p.reversescale?I.flipScale(p.colorscale):p.colorscale,l=f.length,y=new Array(l),s=new Array(l),g=p.min,m=p.max;if("heatmap"===i.coloring){for(h=0;h<l;h++)x=f[h],y[h]=x[0]*(m-g)+g,s[h]=x[1];var d=M.extent([g,m,i.start,i.start+r*(o-1)]),A=d[g<m?0:1],b=d[g<m?1:0];A!==g&&(y.splice(0,0,A),s.splice(0,0,s[0])),b!==m&&(y.push(b),s.push(s[s.length-1]))}else{var c=n._input&&"number"==typeof n._input.zmin&&"number"==typeof n._input.zmax;for(c&&(u<=g||a>=m)&&(u<=g&&(u=g),a>=m&&(a=m),o=Math.floor((a-u)/r)+1,v=0),h=0;h<l;h++)x=f[h],y[h]=(x[0]*(o+v-1)-v/2)*r+u,s[h]=x[1];(c||n.autocontour)&&(y[0]>g&&(y.unshift(g),s.unshift(s[0])),y[y.length-1]<m&&(y.push(m),s.push(s[s.length-1])))}return I.makeColorScaleFunc({domain:y,range:s},{noNumericCheck:!0})}},76922:($,K,e)=>{"use strict";var M=e(52126);function I(t,T){var n=(T[0][0]>t?0:1)+(T[0][1]>t?0:2)+(T[1][1]>t?0:4)+(T[1][0]>t?0:8);return 5===n||10===n?t>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?5===n?713:1114:5===n?104:208:15===n?0:n}$.exports=function(T){var r,o,v,p,f,l,y,s,x,n=T[0].z,i=n.length,u=n[0].length,a=2===i||2===u;for(o=0;o<i-1;o++)for(p=[],0===o&&(p=p.concat(M.BOTTOMSTART)),o===i-2&&(p=p.concat(M.TOPSTART)),r=0;r<u-1;r++)for(v=p.slice(),0===r&&(v=v.concat(M.LEFTSTART)),r===u-2&&(v=v.concat(M.RIGHTSTART)),f=r+","+o,l=[[n[o][r],n[o][r+1]],[n[o+1][r],n[o+1][r+1]]],x=0;x<T.length;x++)(y=I((s=T[x]).level,l))&&(s.crossings[f]=y,-1!==v.indexOf(y)&&(s.starts.push([r,o]),a&&-1!==v.indexOf(y,v.indexOf(y)+1)&&s.starts.push([r,o])))}},34120:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(45103),n=e(88565),i=e(91464),u=e(49704),a=e(63996),r=e(76922),o=e(76486),v=e(35894),p=e(29148),f=e(16690),l=e(52126),y=l.LABELOPTIMIZER;function h(b,c){var R,F,_,z,D,k,W,S="",w=0,E=b.edgepaths.map(function(W,B){return B}),P=!0;function U(W){return Math.abs(W[1]-c[2][1])<.01}function H(W){return Math.abs(W[0]-c[0][0])<.01}function j(W){return Math.abs(W[0]-c[2][0])<.01}for(;E.length;){for(k=t.smoothopen(b.edgepaths[w],b.smoothing),S+=P?k:k.replace(/^M/,"L"),E.splice(E.indexOf(w),1),R=b.edgepaths[w][b.edgepaths[w].length-1],z=-1,_=0;_<4;_++){if(!R){I.log("Missing end?",w,b);break}for(W=R,Math.abs(W[1]-c[0][1])<.01&&!j(R)?F=c[1]:H(R)?F=c[0]:U(R)?F=c[3]:j(R)&&(F=c[2]),D=0;D<b.edgepaths.length;D++){var ee=b.edgepaths[D][0];Math.abs(R[0]-F[0])<.01?Math.abs(R[0]-ee[0])<.01&&(ee[1]-R[1])*(F[1]-ee[1])>=0&&(F=ee,z=D):Math.abs(R[1]-F[1])<.01?Math.abs(R[1]-ee[1])<.01&&(ee[0]-R[0])*(F[0]-ee[0])>=0&&(F=ee,z=D):I.log("endpt to newendpt is not vert. or horz.",R,F,ee)}if(R=F,z>=0)break;S+="L"+F}if(z===b.edgepaths.length){I.log("unclosed perimeter path");break}w=z,(P=-1===E.indexOf(w))&&(w=E[0],S+="Z")}for(w=0;w<b.paths.length;w++)S+=t.smoothclosed(b.paths[w],b.smoothing);return S}function m(b,c,S,w){var E=c.width/2,P=c.height/2,R=b.x,F=b.y,_=b.theta,z=Math.cos(_)*E,D=Math.sin(_)*E,k=(R>w.center?w.right-R:R-w.left)/(z+Math.abs(Math.sin(_)*P)),O=(F>w.middle?w.bottom-F:F-w.top)/(Math.abs(D)+Math.cos(_)*P);if(k<1||O<1)return 1/0;var U=y.EDGECOST*(1/(k-1)+1/(O-1));U+=y.ANGLECOST*_*_;for(var H=R-z,j=F-D,ee=R+z,W=F+D,B=0;B<S.length;B++){var te=S[B],q=Math.cos(te.theta)*te.width/2,oe=Math.sin(te.theta)*te.width/2,ie=2*I.segmentDistance(H,j,ee,W,te.x-q,te.y-oe,te.x+q,te.y+oe)/(c.height+te.height),V=te.level===c.level,Y=V?y.SAMELEVELDISTANCE:1;if(ie<=Y)return 1/0;U+=y.NEIGHBORCOST*(V?y.SAMELEVELFACTOR:1)/(ie-Y)}return U}function A(b){var P,F,c=b.trace._emptypoints,S=[],w=b.z.length,E=b.z[0].length,R=[];for(P=0;P<E;P++)R.push(1);for(P=0;P<w;P++)S.push(R.slice());for(P=0;P<c.length;P++)S[(F=c[P])[0]][F[1]]=0;return b.zmask=S,S}K.plot=function(c,S,w,E){var P=S.xaxis,R=S.yaxis;I.makeTraceGroups(E,w,"contour").each(function(F){var _=M.select(this),z=F[0],D=z.trace,k=z.x,O=z.y,U=D.contours,H=v(U,S,z),j=I.ensureSingle(_,"g","heatmapcoloring"),ee=[];"heatmap"===U.coloring&&(ee=[F]),a(c,S,ee,j),r(H),o(H);var W=P.c2p(k[0],!0),B=P.c2p(k[k.length-1],!0),te=R.c2p(O[0],!0),q=R.c2p(O[O.length-1],!0),oe=[[W,q],[B,q],[B,te],[W,te]],ie=H;"constraint"===U.type&&(ie=p(H,U._operation)),function s(b,c,S){var w=I.ensureSingle(b,"g","contourbg"),E=w.selectAll("path").data("fill"===S.coloring?[0]:[]);E.enter().append("path"),E.exit().remove(),E.attr("d","M"+c.join("L")+"Z").style("stroke","none")}(_,oe,U),function x(b,c,S,w){var E="fill"===w.coloring||"constraint"===w.type&&"="!==w._operation,P="M"+S.join("L")+"Z";E&&f(c,w);var R=I.ensureSingle(b,"g","contourfill"),F=R.selectAll("path").data(E?c:[]);F.enter().append("path"),F.exit().remove(),F.each(function(_){var z=(_.prefixBoundary?P:"")+h(_,S);z?M.select(this).attr("d",z).style("stroke","none"):M.select(this).remove()})}(_,ie,oe,U),function g(b,c,S,w,E){var P=S._context.staticPlot,R=I.ensureSingle(b,"g","contourlines"),F=!1!==E.showlines,_=E.showlabels,z=F&&_,D=K.createLines(R,F||_,c,P),k=K.createLineClip(R,z,S,w.trace.uid),O=b.selectAll("g.contourlabels").data(_?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),_){var U=[],H=[];I.clearLocationCache();var j=K.labelFormatter(S,w),ee=t.tester.append("text").attr("data-notex",1).call(t.font,E.labelfont),W=c[0].xaxis,B=c[0].yaxis,te=W._length,q=B._length,oe=W.range,ie=B.range,V=I.aggNums(Math.min,null,w.x),Y=I.aggNums(Math.max,null,w.x),ae=I.aggNums(Math.min,null,w.y),X=I.aggNums(Math.max,null,w.y),J=Math.max(W.c2p(V,!0),0),ue=Math.min(W.c2p(Y,!0),te),re=Math.max(B.c2p(X,!0),0),ne=Math.min(B.c2p(ae,!0),q),se={};oe[0]<oe[1]?(se.left=J,se.right=ue):(se.left=ue,se.right=J),ie[0]<ie[1]?(se.top=re,se.bottom=ne):(se.top=ne,se.bottom=re),se.middle=(se.top+se.bottom)/2,se.center=(se.left+se.right)/2,U.push([[se.left,se.top],[se.right,se.top],[se.right,se.bottom],[se.left,se.bottom]]);var de=Math.sqrt(te*te+q*q),be=l.LABELDISTANCE*de/Math.max(1,c.length/l.LABELINCREASE);D.each(function(De){var _e=K.calcTextOpts(De.level,j,ee,S);M.select(this).selectAll("path").each(function(){var Ce=this,Le=I.getVisibleSegment(Ce,se,_e.height/2);if(Le&&!(Le.len<(_e.width+_e.height)*l.LABELMIN))for(var Fe=Math.min(Math.ceil(Le.len/be),l.LABELMAX),ke=0;ke<Fe;ke++){var ze=K.findBestTextLocation(Ce,Le,_e,H,se);if(!ze)break;K.addLabelData(ze,_e,H,U)}})}),ee.remove(),K.drawLabels(O,H,S,k,z?U:null)}_&&!F&&D.remove()}(_,H,c,z,U),function d(b,c,S,w,E){var P=w.trace,R=S._fullLayout._clips,F="clip"+P.uid,_=R.selectAll("#"+F).data(P.connectgaps?[]:[0]);if(_.enter().append("clipPath").classed("contourclip",!0).attr("id",F),_.exit().remove(),!1===P.connectgaps){var z={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:c.xaxis,yaxis:c.yaxis,x:w.x,y:w.y,z:A(w),smoothing:0};r([z]),o([z]),f([z],{type:"levels"}),I.ensureSingle(_,"path","").attr("d",(z.prefixBoundary?"M"+E.join("L")+"Z":"")+h(z,E))}else F=null;t.setClipUrl(b,F,S)}(_,S,c,z,oe)})},K.createLines=function(b,c,S,w){var E=S[0].smoothing,P=b.selectAll("g.contourlevel").data(c?S:[]);if(P.exit().remove(),P.enter().append("g").classed("contourlevel",!0),c){var R=P.selectAll("path.openline").data(function(_){return _.pedgepaths||_.edgepaths});R.exit().remove(),R.enter().append("path").classed("openline",!0),R.attr("d",function(_){return t.smoothopen(_,E)}).style("stroke-miterlimit",1).style("vector-effect",w?"none":"non-scaling-stroke");var F=P.selectAll("path.closedline").data(function(_){return _.ppaths||_.paths});F.exit().remove(),F.enter().append("path").classed("closedline",!0),F.attr("d",function(_){return t.smoothclosed(_,E)}).style("stroke-miterlimit",1).style("vector-effect",w?"none":"non-scaling-stroke")}return P},K.createLineClip=function(b,c,S,w){var P=c?"clipline"+w:null,R=S._fullLayout._clips.selectAll("#"+P).data(c?[0]:[]);return R.exit().remove(),R.enter().append("clipPath").classed("contourlineclip",!0).attr("id",P),t.setClipUrl(b,P,S),R},K.labelFormatter=function(b,c){var S=b._fullLayout,w=c.trace,E=w.contours,P={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(E.labelformat)P.tickformat=E.labelformat,u(P,S);else{var R=T.extractOpts(w);if(R&&R.colorbar&&R.colorbar._axis)P=R.colorbar._axis;else{if("constraint"===E.type){var F=E.value;I.isArrayOrTypedArray(F)?P.range=[F[0],F[F.length-1]]:P.range=[F,F]}else P.range=[E.start,E.end],P.nticks=(E.end-E.start)/E.size;P.range[0]===P.range[1]&&(P.range[1]+=P.range[0]||1),P.nticks||(P.nticks=1e3),u(P,S),i.prepTicks(P),P._tmin=null,P._tmax=null}}return function(_){return i.tickText(P,_).text}},K.calcTextOpts=function(b,c,S,w){var E=c(b);S.text(E).call(n.convertToTspans,w);var P=S.node(),R=t.bBox(P,!0);return{text:E,width:R.width,height:R.height,fontSize:+P.style["font-size"].replace("px",""),level:b,dy:(R.top+R.bottom)/2}},K.findBestTextLocation=function(b,c,S,w,E){var R,F,_,z,D,P=S.width;c.isClosed?(F=c.len/y.INITIALSEARCHPOINTS,R=c.min+F/2,_=c.max):(F=(c.len-P)/(y.INITIALSEARCHPOINTS+1),R=c.min+F+P/2,_=c.max-(F+P)/2);for(var k=1/0,O=0;O<y.ITERATIONS;O++){for(var U=R;U<_;U+=F){var H=I.getTextLocation(b,c.total,U,P),j=m(H,S,w,E);j<k&&(k=j,D=H,z=U)}if(k>2*y.MAXCOST)break;O&&(F/=2),_=(R=z-F/2)+1.5*F}if(k<=y.MAXCOST)return D},K.addLabelData=function(b,c,S,w){var E=c.fontSize,P=c.width+E/3,R=Math.max(0,c.height-E/3),F=b.x,_=b.y,z=b.theta,D=Math.sin(z),k=Math.cos(z),O=function(H,j){return[F+H*k-j*D,_+H*D+j*k]},U=[O(-P/2,-R/2),O(-P/2,R/2),O(P/2,R/2),O(P/2,-R/2)];S.push({text:c.text,x:F,y:_,dy:c.dy,theta:z,level:c.level,width:P,height:R}),w.push(U)},K.drawLabels=function(b,c,S,w,E){var P=b.selectAll("text").data(c,function(z){return z.text+","+z.x+","+z.y+","+z.theta});if(P.exit().remove(),P.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(z){var D=z.x+Math.sin(z.theta)*z.dy,k=z.y-Math.cos(z.theta)*z.dy;M.select(this).text(z.text).attr({x:D,y:k,transform:"rotate("+180*z.theta/Math.PI+" "+D+" "+k+")"}).call(n.convertToTspans,S)}),E){for(var R="",F=0;F<E.length;F++)R+="M"+E[F].join("L")+"Z";I.ensureSingle(w,"path","").attr("d",R)}}},17095:($,K,e)=>{"use strict";var M=e(91464),I=e(5228);function t(T,n,i){var u={type:"linear",range:[T,n]};return M.autoTicks(u,(n-T)/(i||15)),u}$.exports=function(n,i){var u=n.contours;if(n.autocontour){var a=n.zmin,r=n.zmax;(n.zauto||void 0===a)&&(a=I.aggNums(Math.min,null,i)),(n.zauto||void 0===r)&&(r=I.aggNums(Math.max,null,i));var o=t(a,r,n.ncontours);u.size=o.dtick,u.start=M.tickFirst(o),o.range.reverse(),u.end=M.tickFirst(o),u.start===a&&(u.start+=u.size),u.end===r&&(u.end-=u.size),u.start>u.end&&(u.start=u.end=(u.start+u.end)/2),n._input.contours||(n._input.contours={}),I.extendFlat(n._input.contours,{start:u.start,end:u.end,size:u.size}),n._input.autocontour=!0}else if("constraint"!==u.type){var l,v=u.start,p=u.end,f=n._input.contours;if(v>p&&(u.start=f.start=p,p=u.end=f.end=v,v=u.start),!(u.size>0))l=v===p?1:t(v,p,n.ncontours).dtick,f.size=u.size=l}}},57327:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(61829),T=e(93092);$.exports=function(i){var u=M.select(i).selectAll("g.contour");u.style("opacity",function(a){return a[0].trace.opacity}),u.each(function(a){var r=M.select(this),o=a[0].trace,v=o.contours,p=o.line,f=v.size||1,l=v.start,y="constraint"===v.type,s=!y&&"lines"===v.coloring,x=!y&&"fill"===v.coloring,h=s||x?T(o):null;r.selectAll("g.contourlevel").each(function(d){M.select(this).selectAll("path").call(I.lineGroupStyle,p.width,s?h(d.level):p.color,p.dash)});var g=v.labelfont;if(r.selectAll("g.contourlabels text").each(function(d){I.font(M.select(this),{family:g.family,size:g.size,color:g.color||(s?h(d.level):p.color)})}),y)r.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(x){var m;r.selectAll("g.contourfill path").style("fill",function(d){return void 0===m&&(m=d.level),h(d.level+.5*f)}),void 0===m&&(m=l),r.selectAll("g.contourbg path").style("fill",h(m-.5*f))}}),t(i)}},40920:($,K,e)=>{"use strict";var M=e(14739),I=e(66325);$.exports=function(T,n,i,u,a){var o,r=i("contours.coloring"),v="";"fill"===r&&(o=i("contours.showlines")),!1!==o&&("lines"!==r&&(v=i("line.color","#000")),i("line.width",.5),i("line.dash")),"none"!==r&&(!0!==T.showlegend&&(n.showlegend=!1),n._dfltShowLegend=!1,M(T,n,u,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),I(i,u,v,a)}},58108:($,K,e)=>{"use strict";var M=e(63726),I=e(5763),t=e(567),T=e(18836).extendFlat,n=I.contours;$.exports=T({carpet:{valType:"string",editType:"calc",description:["The `carpet` of the carpet axes on which this contour trace lies"].join(" ")},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:I.fillcolor,autocontour:I.autocontour,ncontours:I.ncontours,contours:{type:n.type,start:n.start,end:n.end,size:n.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:n.showlines,showlabels:n.showlabels,labelfont:n.labelfont,labelformat:n.labelformat,operation:n.operation,value:n.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:I.line.color,width:I.line.width,dash:I.line.dash,smoothing:I.line.smoothing,editType:"plot"},transforms:void 0},t("",{cLetter:"z",autoColorDflt:!1}))},4552:($,K,e)=>{"use strict";var M=e(93727),I=e(5228),t=e(19346),T=e(1419),n=e(82147),i=e(70011),u=e(33454),a=e(10334),r=e(19374),o=e(17095);$.exports=function(f,l){var y=l._carpetTrace=r(f,l);if(y&&y.visible&&"legendonly"!==y.visible){if(!l.a||!l.b){var s=f.data[y.index],x=f.data[l.index];x.a||(x.a=s.a),x.b||(x.b=s.b),a(x,l,l._defaultColor,f._fullLayout)}var h=function v(p,f){var x,h,g,m,d,A,b,l=f._carpetTrace,y=l.aaxis,s=l.baxis;y._minDtick=0,s._minDtick=0,I.isArray1D(f.z)&&t(f,y,s,"a","b",["z"]),x=f._a=f._a||f.a,m=f._b=f._b||f.b,x=x?y.makeCalcdata(f,"_a"):[],m=m?s.makeCalcdata(f,"_b"):[],h=f.a0||0,g=f.da||1,d=f.b0||0,A=f.db||1,b=f._z=T(f._z||f.z,f.transpose),f._emptypoints=i(b),n(b,f._emptypoints);var c=I.maxRowLength(b),S="scaled"===f.xtype?"":x,w=u(f,S,h,g,c,y),E="scaled"===f.ytype?"":m,P=u(f,E,d,A,b.length,s),R={a:w,b:P,z:b};return"levels"===f.contours.type&&"none"!==f.contours.coloring&&M(p,f,{vals:b,containerStr:"",cLetter:"z"}),[R]}(f,l);return o(l,l._z),h}}},10334:($,K,e)=>{"use strict";var M=e(5228),I=e(34212),t=e(58108),T=e(43512),n=e(32042),i=e(40920);$.exports=function(a,r,o,v){function p(s,x){return M.coerce(a,r,t,s,x)}if(p("carpet"),a.a&&a.b){if(!I(a,r,p,v,"a","b"))return void(r.visible=!1);p("text"),"constraint"===p("contours.type")?T(a,r,p,v,o,{hasHover:!1}):(n(a,r,p,function f(s){return M.coerce2(a,r,t,s)}),i(a,r,p,v,{hasHover:!1}))}else r._defaultColor=o,r._length=null}},37389:($,K,e)=>{"use strict";$.exports={attributes:e(58108),supplyDefaults:e(10334),colorbar:e(81060),calc:e(4552),plot:e(99371),style:e(57327),moduleType:"trace",name:"contourcarpet",basePlotModule:e(24329),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{hrName:"contour_carpet",description:["Plots contours on either the first carpet axis or the","carpet axis with a matching `carpet` attribute. Data `z`","is interpreted as matching that of the corresponding carpet","axis."].join(" ")}}},99371:($,K,e)=>{"use strict";var M=e(21572),I=e(70169),t=e(51915),T=e(27630),n=e(5228),i=e(76922),u=e(76486),a=e(34120),r=e(52126),o=e(29148),v=e(35894),p=e(16690),f=e(19374),l=e(45562);function h(c,S,w){var E=c.getPointAtLength(S),P=c.getPointAtLength(w),R=P.x-E.x,F=P.y-E.y,_=Math.sqrt(R*R+F*F);return[R/_,F/_]}function g(c){var S=Math.sqrt(c[0]*c[0]+c[1]*c[1]);return[c[0]/S,c[1]/S]}function m(c,S){var w=Math.abs(c[0]*S[0]+c[1]*S[1]);return Math.sqrt(1-w*w)/w}$.exports=function(S,w,E,P){var R=w.xaxis,F=w.yaxis;n.makeTraceGroups(P,E,"contour").each(function(_){var z=M.select(this),D=_[0],k=D.trace,O=k._carpetTrace=f(S,k),U=S.calcdata[O.index][0];if(O.visible&&"legendonly"!==O.visible){var H=D.a,j=D.b,ee=k.contours,W=v(ee,w,D),B="constraint"===ee.type,te=ee._operation,q=B?"="===te?"lines":"fill":ee.coloring,ie=[[H[0],j[j.length-1]],[H[H.length-1],j[j.length-1]],[H[H.length-1],j[0]],[H[0],j[0]]];i(W);var V=1e-8*(H[H.length-1]-H[0]),Y=1e-8*(j[j.length-1]-j[0]);u(W,V,Y);var ae=W;"constraint"===ee.type&&(ae=o(W,te)),function y(c,S){var w,E,P,R,F,_,z,D,k;for(w=0;w<c.length;w++){for(F=(R=c[w]).pedgepaths=[],_=R.ppaths=[],E=0;E<R.edgepaths.length;E++){for(k=R.edgepaths[E],z=[],P=0;P<k.length;P++)z[P]=S(k[P]);F.push(z)}for(E=0;E<R.paths.length;E++){for(k=R.paths[E],D=[],P=0;P<k.length;P++)D[P]=S(k[P]);_.push(D)}}}(W,oe);var X,J,ue,re,ne=[];for(re=U.clipsegments.length-1;re>=0;re--)X=U.clipsegments[re],J=I([],X.x,R.c2p),ue=I([],X.y,F.c2p),J.reverse(),ue.reverse(),ne.push(t(J,ue,X.bicubic));var se="M"+ne.join("L")+"Z";(function d(c,S,w,E,P,R){var F,_,z,D,k=n.ensureSingle(c,"g","contourbg"),O=k.selectAll("path").data("fill"!==R||P?[]:[0]);O.enter().append("path"),O.exit().remove();var U=[];for(D=0;D<S.length;D++)F=S[D],_=I([],F.x,w.c2p),z=I([],F.y,E.c2p),U.push(t(_,z,F.bicubic));O.attr("d","M"+U.join("L")+"Z").style("stroke","none")})(z,U.clipsegments,R,F,B,q),function A(c,S,w,E,P,R,F,_,z,D,k){var O="fill"===D;O&&p(P,c.contours);var U=n.ensureSingle(S,"g","contourfill"),H=U.selectAll("path").data(O?P:[]);H.enter().append("path"),H.exit().remove(),H.each(function(j){var ee=(j.prefixBoundary?k:"")+function b(c,S,w,E,P,R,F,_){var z,U,H,j,ee,W,B,D="",k=S.edgepaths.map(function(ue,re){return re}),O=!0,te=1e-4*Math.abs(w[0][0]-w[2][0]),q=1e-4*Math.abs(w[0][1]-w[2][1]);function oe(ue){return Math.abs(ue[1]-w[0][1])<q}function ie(ue){return Math.abs(ue[1]-w[2][1])<q}function V(ue){return Math.abs(ue[0]-w[0][0])<te}function Y(ue){return Math.abs(ue[0]-w[2][0])<te}function ae(ue,re){var ne,se,de,be,De="";for(oe(ue)&&!Y(ue)||ie(ue)&&!V(ue)?(be=P.aaxis,de=l(P,R,[ue[0],re[0]],.5*(ue[1]+re[1]))):(be=P.baxis,de=l(P,R,.5*(ue[0]+re[0]),[ue[1],re[1]])),ne=1;ne<de.length;ne++)for(De+=be.smoothing?"C":"L",se=0;se<de[ne].length;se++){var _e=de[ne][se];De+=[F.c2p(_e[0]),_.c2p(_e[1])]+" "}return De}for(z=0,U=null;k.length;){var X=S.edgepaths[z][0];for(U&&(D+=ae(U,X)),B=T.smoothopen(S.edgepaths[z].map(E),S.smoothing),D+=O?B:B.replace(/^M/,"L"),k.splice(k.indexOf(z),1),U=S.edgepaths[z][S.edgepaths[z].length-1],ee=-1,j=0;j<4;j++){if(!U){n.log("Missing end?",z,S);break}for(oe(U)&&!Y(U)?H=w[1]:V(U)?H=w[0]:ie(U)?H=w[3]:Y(U)&&(H=w[2]),W=0;W<S.edgepaths.length;W++){var J=S.edgepaths[W][0];Math.abs(U[0]-H[0])<te?Math.abs(U[0]-J[0])<te&&(J[1]-U[1])*(H[1]-J[1])>=0&&(H=J,ee=W):Math.abs(U[1]-H[1])<q?Math.abs(U[1]-J[1])<q&&(J[0]-U[0])*(H[0]-J[0])>=0&&(H=J,ee=W):n.log("endpt to newendpt is not vert. or horz.",U,H,J)}if(ee>=0)break;D+=ae(U,H),U=H}if(ee===S.edgepaths.length){n.log("unclosed perimeter path");break}z=ee,(O=-1===k.indexOf(z))&&(z=k[0],D+=ae(U,H)+"Z",U=null)}for(z=0;z<S.paths.length;z++)D+=T.smoothclosed(S.paths[z].map(E),S.smoothing);return D}(0,j,R,F,_,z,w,E);ee?M.select(this).attr("d",ee).style("stroke","none"):M.select(this).remove()})}(k,z,R,F,ae,ie,oe,O,U,q,se),function s(c,S,w,E,P,R,F){var _=w._context.staticPlot,z=n.ensureSingle(c,"g","contourlines"),D=!1!==P.showlines,k=P.showlabels,O=D&&k,U=a.createLines(z,D||k,S,_),H=a.createLineClip(z,O,w,E.trace.uid),j=c.selectAll("g.contourlabels").data(k?[0]:[]);if(j.exit().remove(),j.enter().append("g").classed("contourlabels",!0),k){var ee=R.xaxis,W=R.yaxis,B=ee._length,te=W._length,q=[[[0,0],[B,0],[B,te],[0,te]]],oe=[];n.clearLocationCache();var ie=a.labelFormatter(w,E),V=T.tester.append("text").attr("data-notex",1).call(T.font,P.labelfont),Y={left:0,right:B,center:B/2,top:0,bottom:te,middle:te/2},ae=Math.sqrt(B*B+te*te),X=r.LABELDISTANCE*ae/Math.max(1,S.length/r.LABELINCREASE);U.each(function(J){var ue=a.calcTextOpts(J.level,ie,V,w);M.select(this).selectAll("path").each(function(re){var ne=this,se=n.getVisibleSegment(ne,Y,ue.height/2);if(se&&(function x(c,S,w,E,P,R){for(var F,_=0;_<w.pedgepaths.length;_++)S===w.pedgepaths[_]&&(F=w.edgepaths[_]);if(!F)return;var z=P.a[0],D=P.a[P.a.length-1],k=P.b[0],O=P.b[P.b.length-1];function U(B,te){var oe,q=0,ie=.1;return(Math.abs(B[0]-z)<ie||Math.abs(B[0]-D)<ie)&&(oe=g(P.dxydb_rough(B[0],B[1],ie)),q=Math.max(q,R*m(te,oe)/2)),(Math.abs(B[1]-k)<ie||Math.abs(B[1]-O)<ie)&&(oe=g(P.dxyda_rough(B[0],B[1],ie)),q=Math.max(q,R*m(te,oe)/2)),q}var H=h(c,0,1),j=h(c,E.total,E.total-1),ee=U(F[0],H),W=E.total-U(F[F.length-1],j);E.min<ee&&(E.min=ee),E.max>W&&(E.max=W),E.len=E.max-E.min}(ne,re,J,se,F,ue.height),!(se.len<(ue.width+ue.height)*r.LABELMIN)))for(var de=Math.min(Math.ceil(se.len/X),r.LABELMAX),be=0;be<de;be++){var De=a.findBestTextLocation(ne,se,ue,oe,Y);if(!De)break;a.addLabelData(De,ue,oe,q)}})}),V.remove(),a.drawLabels(j,oe,w,H,O?q:null)}k&&!D&&U.remove()}(z,W,S,D,ee,w,O),T.setClipUrl(z,O._clipPathId,S)}function oe(de){var be=O.ab2xy(de[0],de[1],!0);return[R.c2p(be[0]),F.c2p(be[1])]}})}},79577:($,K,e)=>{"use strict";var M=e(567),I=e(9430).fF,t=e(82684),T=e(79757),n=e(18836).extendFlat;$.exports=n({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc",description:["Sets the points' weight.","For example, a value of 10 would be equivalent to having 10 points of weight 1","in the same spot"].join(" ")},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30,description:["Sets the radius of influence of one `lon` / `lat` point in pixels.","Increasing the value makes the densitymapbox trace smoother, but less detailed."].join(" ")},below:{valType:"string",editType:"plot",description:["Determines if the densitymapbox trace will be inserted","before the layer with the specified ID.","By default, densitymapbox traces are placed below the first","layer of type symbol","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:T.text,hovertext:T.hovertext,hoverinfo:n({},t.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:I(),showlegend:n({},t.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},63482:($,K,e)=>{"use strict";var M=e(7347),I=e(5228).isArrayOrTypedArray,t=e(71103).BADNUM,T=e(93727),n=e(5228)._;$.exports=function(u,a){for(var r=a._length,o=new Array(r),v=a.z,p=I(v)&&v.length,f=0;f<r;f++){var l=o[f]={},y=a.lon[f],s=a.lat[f];if(l.lonlat=M(y)&&M(s)?[+y,+s]:[t,t],p){var x=v[f];l.z=M(x)?x:t}}return T(u,a,{vals:p?v:[0,1],containerStr:"",cLetter:"z"}),r&&(o[0].t={labels:{lat:n(u,"lat:")+" ",lon:n(u,"lon:")+" "}}),o}},48666:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(8416),T=e(45103),n=e(71103).BADNUM,i=e(41368).makeBlank;$.exports=function(a){var r=a[0].trace,o=!0===r.visible&&0!==r._length,p=r._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:i()};if(!o)return p;var l,f=[],y=r.z,s=r.radius,x=I.isArrayOrTypedArray(y)&&y.length,h=I.isArrayOrTypedArray(s);for(l=0;l<a.length;l++){var g=a[l],m=g.lonlat;if(m[0]!==n){var d={};if(x){var A=g.z;d.z=A!==n?A:0}h&&(d.r=M(s[l])&&s[l]>0?+s[l]:0),f.push({type:"Feature",geometry:{type:"Point",coordinates:m},properties:d})}}var b=T.extractOpts(r),c=b.reversescale?T.flipScale(b.colorscale):b.colorscale,S=c[0][1],E=["interpolate",["linear"],["heatmap-density"],0,t.opacity(S)<1?S:t.addOpacity(S,0)];for(l=1;l<c.length;l++)E.push(c[l][0],c[l][1]);var P=["interpolate",["linear"],["get","z"],b.min,0,b.max,1];return I.extendFlat(p.heatmap.paint,{"heatmap-weight":x?P:1/(b.max-b.min),"heatmap-color":E,"heatmap-radius":h?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),p.geojson={type:"FeatureCollection",features:f},p.heatmap.layout.visibility="visible",p}},65025:($,K,e)=>{"use strict";var M=e(5228),I=e(14739),t=e(79577);$.exports=function(n,i,u,a){function r(f,l){return M.coerce(n,i,t,f,l)}var o=r("lon")||[],v=r("lat")||[],p=Math.min(o.length,v.length);p?(i._length=p,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),I(n,i,a,r,{prefix:"",cLetter:"z"})):i.visible=!1}},95189:$=>{"use strict";$.exports=function(e,M){return e.lon=M.lon,e.lat=M.lat,e.z=M.z,e}},78143:($,K,e)=>{"use strict";var M=e(91464),I=e(77898).hoverPoints,t=e(77898).getExtraText;$.exports=function(n,i,u){var a=I(n,i,u);if(a){var r=a[0],o=r.cd,v=o[0].trace,p=o[r.index];if(delete r.color,"z"in p){var f=r.subplot.mockAxis;r.z=p.z,r.zLabel=M.tickText(f,f.c2l(p.z),"hover").text}return r.extraText=t(v,p,o[0].t.labels),[r]}}},83259:($,K,e)=>{"use strict";$.exports={attributes:e(79577),supplyDefaults:e(65025),colorbar:e(36661),formatLabels:e(8754),calc:e(63482),plot:e(15410),hoverPoints:e(78143),eventData:e(95189),getBelow:function(M,I){for(var t=I.getMapLayers(),T=0;T<t.length;T++){var n=t[T],i=n.id;if("symbol"===n.type&&"string"==typeof i&&-1===i.indexOf("plotly-"))return i}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(8382),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox",description:["Draws a bivariate kernel density estimation with a Gaussian kernel","from `lon` and `lat` coordinates and optional `z` values using a colorscale."].join(" ")}}},15410:($,K,e)=>{"use strict";var M=e(48666),I=e(97094).traceLayerPrefix;function t(n,i){this.type="densitymapbox",this.subplot=n,this.uid=i,this.sourceId="source-"+i,this.layerList=[["heatmap",I+i+"-heatmap"]],this.below=null}var T=t.prototype;T.update=function(n){var i=this.subplot,u=this.layerList,a=M(n),r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var o=0;o<u.length;o++){var v=u[o],p=v[0],f=v[1],l=a[p];i.setOptions(f,"setLayoutProperty",l.layout),"visible"===l.layout.visibility&&i.setOptions(f,"setPaintProperty",l.paint)}},T._addLayers=function(n,i){for(var u=this.subplot,a=this.layerList,r=this.sourceId,o=0;o<a.length;o++){var v=a[o],p=v[0],f=n[p];u.addLayer({type:p,id:v[1],source:r,layout:f.layout,paint:f.paint},i)}},T._removeLayers=function(){for(var n=this.subplot.map,i=this.layerList,u=i.length-1;u>=0;u--)n.removeLayer(i[u][1])},T.dispose=function(){var n=this.subplot.map;this._removeLayers(),n.removeSource(this.sourceId)},$.exports=function(i,u){var a=u[0].trace,r=new t(i,a.uid),o=r.sourceId,v=M(u),p=r.below=i.belowLookup["trace-"+a.uid];return i.map.addSource(o,{type:"geojson",data:v.geojson}),r._addLayers(v,p),r}},56874:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){for(var n=0;n<t.length;n++)t[n].i=n;M.mergeArray(T.text,t,"tx"),M.mergeArray(T.hovertext,t,"htx");var i=T.marker;if(i){M.mergeArray(i.opacity,t,"mo"),M.mergeArray(i.color,t,"mc");var u=i.line;u&&(M.mergeArray(u.color,t,"mlc"),M.mergeArrayCastPositive(u.width,t,"mlw"))}}},34238:($,K,e)=>{"use strict";var M=e(99009),I=e(55405).line,t=e(82684),T=e(88489).axisHoverFormat,n=e(9430).fF,i=e(9430).si,u=e(78071),a=e(18836).extendFlat,r=e(8416);$.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:n({},{keys:u.eventDataKeys}),hoverinfo:a({},t.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple funnels, percentages & totals","are computed separately (per trace)."].join(" ")},texttemplate:i({editType:"plot"},{keys:u.eventDataKeys.concat(["label","value"])}),text:M.text,textposition:M.textposition,insidetextanchor:a({},M.insidetextanchor,{dflt:"middle"}),textangle:a({},M.textangle,{dflt:0}),textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:a({},M.orientation,{description:["Sets the orientation of the funnels.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal).","By default funnels are tend to be oriented horizontally;","unless only *y* array is presented or orientation is set to *v*.","Also regarding graphs including only 'horizontal' funnels,","*autorange* on the *y-axis* are set to *reversed*."].join(" ")}),offset:a({},M.offset,{arrayOk:!1}),width:a({},M.width,{arrayOk:!1}),marker:function o(){var v=a({},M.marker);return delete v.pattern,v}(),connector:{fillcolor:{valType:"color",editType:"style",description:["Sets the fill color."].join(" ")},line:{color:a({},I.color,{dflt:r.defaultLine}),width:a({},I.width,{dflt:0,editType:"plot"}),dash:I.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector regions and lines are drawn."].join(" ")},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},56877:($,K,e)=>{"use strict";var M=e(91464),I=e(62311),t=e(56874),T=e(20107),n=e(71103).BADNUM;function i(u){return u===n?0:u}$.exports=function(a,r){var p,f,l,y,s,x,h,g,o=M.getFromId(a,r.xaxis||"x"),v=M.getFromId(a,r.yaxis||"y");"h"===r.orientation?(p=o.makeCalcdata(r,"x"),l=v.makeCalcdata(r,"y"),y=I(r,v,"y",l),s=!!r.yperiodalignment,x="y"):(p=v.makeCalcdata(r,"y"),l=o.makeCalcdata(r,"x"),y=I(r,o,"x",l),s=!!r.xperiodalignment,x="x"),f=y.vals;var b,m=Math.min(f.length,p.length),d=new Array(m);for(r._base=[],h=0;h<m;h++){p[h]<0&&(p[h]=n);var A=!1;p[h]!==n&&h+1<m&&p[h+1]!==n&&(A=!0),g=d[h]={p:f[h],s:p[h],cNext:A},r._base[h]=-.5*g.s,s&&(d[h].orig_p=l[h],d[h][x+"End"]=y.ends[h],d[h][x+"Start"]=y.starts[h]),r.ids&&(g.id=String(r.ids[h])),0===h&&(d[0].vTotal=0),d[0].vTotal+=i(g.s),g.begR=i(g.s)/i(d[0].s)}for(h=0;h<m;h++)(g=d[h]).s!==n&&(g.sumR=g.s/d[0].vTotal,g.difR=void 0!==b?g.s/b:1,b=g.s);return t(d,r),T(d,r),d}},78071:$=>{"use strict";$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},62097:($,K,e)=>{"use strict";var M=e(23870).setGroupPositions;$.exports=function(t,T){var f,l,n=t._fullLayout,i=t._fullData,u=t.calcdata,a=T.xaxis,r=T.yaxis,o=[],v=[],p=[];for(l=0;l<i.length;l++){var y=i[l],s="h"===y.orientation;!0===y.visible&&y.xaxis===a._id&&y.yaxis===r._id&&"funnel"===y.type&&(f=u[l],s?p.push(f):v.push(f),o.push(f))}var x={mode:n.funnelmode,norm:n.funnelnorm,gap:n.funnelgap,groupgap:n.funnelgroupgap};for(M(t,a,r,v,x),M(t,r,a,p,x),l=0;l<o.length;l++){f=o[l];for(var h=0;h<f.length;h++)h+1<f.length&&(f[h].nextP0=f[h+1].p0,f[h].nextS0=f[h+1].s0,f[h].nextP1=f[h+1].p1,f[h].nextS1=f[h+1].s1)}}},79838:($,K,e)=>{"use strict";var M=e(5228),I=e(36711),t=e(74401).handleText,T=e(82069),n=e(18031),i=e(34238),u=e(8416);$.exports={supplyDefaults:function a(v,p,f,l){function y(A,b){return M.coerce(v,p,i,A,b)}if(T(v,p,l,y)){n(v,p,l,y),y("xhoverformat"),y("yhoverformat"),y("orientation",p.y&&!p.x?"v":"h"),y("offset"),y("width");var x=y("text");y("hovertext"),y("hovertemplate");var h=y("textposition");t(v,p,l,y,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==p.textposition&&!p.texttemplate&&y("textinfo",M.isArrayOrTypedArray(x)?"text+value":"value");var g=y("marker.color",f);if(y("marker.line.color",u.defaultLine),y("marker.line.width"),y("connector.visible"))y("connector.fillcolor",function r(v){var p=M.isArrayOrTypedArray(v)?"#000":v;return u.addOpacity(p,.5*u.opacity(p))}(g)),y("connector.line.width")&&(y("connector.line.color"),y("connector.line.dash"))}else p.visible=!1},crossTraceDefaults:function o(v,p){var f,l;function y(x){return M.coerce(l._input,l,i,x)}if("group"===p.funnelmode)for(var s=0;s<v.length;s++)f=(l=v[s])._input,I(f,l,p,y)}}},89595:$=>{"use strict";$.exports=function(e,M){return e.x="xVal"in M?M.xVal:M.x,e.y="yVal"in M?M.yVal:M.y,"percentInitial"in M&&(e.percentInitial=M.percentInitial),"percentPrevious"in M&&(e.percentPrevious=M.percentPrevious),"percentTotal"in M&&(e.percentTotal=M.percentTotal),M.xa&&(e.xaxis=M.xa),M.ya&&(e.yaxis=M.ya),e}},49621:($,K,e)=>{"use strict";var M=e(8416).opacity,I=e(54283).hoverOnBars,t=e(5228).formatPercent;$.exports=function(i,u,a,r,o){var v=I(i,u,a,r,o);if(v){var p=v.cd,f=p[0].trace,l="h"===f.orientation,s=p[v.index];v[(l?"x":"y")+"LabelVal"]=s.s,v.percentInitial=s.begR,v.percentInitialLabel=t(s.begR,1),v.percentPrevious=s.difR,v.percentPreviousLabel=t(s.difR,1),v.percentTotal=s.sumR,v.percentTotalLabel=t(s.sumR,1);var h=s.hi||f.hoverinfo,g=[];if(h&&"none"!==h&&"skip"!==h){var m="all"===h,d=h.split("+"),A=function(b){return m||-1!==d.indexOf(b)};A("percent initial")&&g.push(v.percentInitialLabel+" of initial"),A("percent previous")&&g.push(v.percentPreviousLabel+" of previous"),A("percent total")&&g.push(v.percentTotalLabel+" of total")}return v.extraText=g.join("<br>"),v.color=function T(n,i){var u=n.marker,a=i.mc||u.color,r=i.mlc||u.line.color,o=i.mlw||u.line.width;if(M(a))return a;if(M(r)&&o)return r}(f,s),[v]}}},14893:($,K,e)=>{"use strict";$.exports={attributes:e(34238),layoutAttributes:e(73121),supplyDefaults:e(79838).supplyDefaults,crossTraceDefaults:e(79838).crossTraceDefaults,supplyLayoutDefaults:e(5847),calc:e(56877),crossTraceCalc:e(62097),plot:e(74533),style:e(5616).style,hoverPoints:e(49621),eventData:e(89595),selectPoints:e(85499),moduleType:"trace",name:"funnel",basePlotModule:e(24329),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Visualize stages in a process using length-encoded bars. This trace can be used","to show data in either a part-to-whole representation wherein each item appears",'in a single stage, or in a "drop-off" representation wherein each item appears in','each stage it traversed. See also the "funnelarea" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},73121:$=>{"use strict";$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},funnelgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},5847:($,K,e)=>{"use strict";var M=e(5228),I=e(73121);$.exports=function(t,T,n){var i=!1;function u(o,v){return M.coerce(t,T,I,o,v)}for(var a=0;a<n.length;a++){var r=n[a];if(r.visible&&"funnel"===r.type){i=!0;break}}i&&(u("funnelmode"),u("funnelgap",.2),u("funnelgroupgap"))}},74533:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(71103).BADNUM,n=e(23038),i=e(99771).clearMinTextSize;function r(o,v,p,f){var l=[],y=[],s=f?v:p,x=f?p:v;return l[0]=s.c2p(o.s0,!0),y[0]=x.c2p(o.p0,!0),l[1]=s.c2p(o.s1,!0),y[1]=x.c2p(o.p1,!0),l[2]=s.c2p(o.nextS0,!0),y[2]=x.c2p(o.nextP0,!0),l[3]=s.c2p(o.nextS1,!0),y[3]=x.c2p(o.nextP1,!0),f?[l,y]:[y,l]}$.exports=function(v,p,f,l){var y=v._fullLayout;i("funnel",y),function u(o,v,p,f){var l=v.xaxis,y=v.yaxis;I.makeTraceGroups(f,p,"trace bars").each(function(s){var x=M.select(this),h=s[0].trace,g=I.ensureSingle(x,"g","regions");if(h.connector&&h.connector.visible){var m="h"===h.orientation,d=g.selectAll("g.region").data(I.identity);d.enter().append("g").classed("region",!0),d.exit().remove();var A=d.size();d.each(function(b,c){if(c===A-1||b.cNext){var S=r(b,l,y,m),w=S[0],E=S[1],P="";w[0]!==T&&E[0]!==T&&w[1]!==T&&E[1]!==T&&w[2]!==T&&E[2]!==T&&w[3]!==T&&E[3]!==T&&(P+=m?"M"+w[0]+","+E[1]+"L"+w[2]+","+E[2]+"H"+w[3]+"L"+w[1]+","+E[1]+"Z":"M"+w[1]+","+E[1]+"L"+w[2]+","+E[3]+"V"+E[2]+"L"+w[1]+","+E[0]+"Z"),""===P&&(P="M0,0Z"),I.ensureSingle(M.select(this),"path").attr("d",P).call(t.setClipUrl,v.layerClipId,o)}})}else g.remove()})}(v,p,f,l),function a(o,v,p,f){var l=v.xaxis,y=v.yaxis;I.makeTraceGroups(f,p,"trace bars").each(function(s){var x=M.select(this),h=s[0].trace,g=I.ensureSingle(x,"g","lines");if(h.connector&&h.connector.visible&&h.connector.line.width){var m="h"===h.orientation,d=g.selectAll("g.line").data(I.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var A=d.size();d.each(function(b,c){if(c===A-1||b.cNext){var S=r(b,l,y,m),w=S[0],E=S[1],P="";void 0!==w[3]&&void 0!==E[3]&&(m?(P+="M"+w[0]+","+E[1]+"L"+w[2]+","+E[2],P+="M"+w[1]+","+E[1]+"L"+w[3]+","+E[2]):(P+="M"+w[1]+","+E[1]+"L"+w[2]+","+E[3],P+="M"+w[1]+","+E[0]+"L"+w[2]+","+E[2])),""===P&&(P="M0,0Z"),I.ensureSingle(M.select(this),"path").attr("d",P).call(t.setClipUrl,v.layerClipId,o)}})}else g.remove()})}(v,p,f,l),n.plot(v,p,f,l,{mode:y.funnelmode,norm:y.funnelmode,gap:y.funnelgap,groupgap:y.funnelgroupgap})}},5616:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(8416),T=e(49431).DESELECTDIM,n=e(82563),i=e(99771).resizeText,u=n.styleTextPoints;$.exports={style:function a(r,o,v){var p=v||M.select(r).selectAll("g.funnellayer").selectAll("g.trace");i(r,p,"funnel"),p.style("opacity",function(f){return f[0].trace.opacity}),p.each(function(f){var l=M.select(this),y=f[0].trace;l.selectAll(".point > path").each(function(s){if(!s.isBlank){var x=y.marker;M.select(this).call(t.fill,s.mc||x.color).call(t.stroke,s.mlc||x.line.color).call(I.dashLine,x.line.dash,s.mlw||x.line.width).style("opacity",y.selectedpoints&&!s.selected?T:1)}}),u(l,y,r),l.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(t.fill,y.connector.fillcolor)}),l.selectAll(".lines").each(function(){var s=y.connector.line;I.lineGroupStyle(M.select(this).selectAll("path"),s.width,s.color,s.dash)})})}}},31993:($,K,e)=>{"use strict";var M=e(23441),I=e(82684),t=e(47472).Y,T=e(9430).fF,n=e(9430).si,i=e(18836).extendFlat;$.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:i({},M.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:i({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:i({},M.scalegroup,{description:["If there are multiple funnelareas that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")}),textinfo:i({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:n({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:i({},I.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:i({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:i({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:t({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the ratio between height and width"].join(" ")},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot",description:["Sets the ratio between bottom length and maximum top length."].join(" ")}}},73795:($,K,e)=>{"use strict";var M=e(31556);K.name="funnelarea",K.plot=function(I,t,T,n){M.plotBasePlot(K.name,I,t,T,n)},K.clean=function(I,t,T,n){M.cleanBasePlot(K.name,I,t,T,n)}},54002:($,K,e)=>{"use strict";var M=e(19160);$.exports={calc:function I(T,n){return M.calc(T,n)},crossTraceCalc:function t(T){M.crossTraceCalc(T,{type:"funnelarea"})}}},62474:($,K,e)=>{"use strict";var M=e(5228),I=e(31993),t=e(47472).c,T=e(74401).handleText,n=e(20297).handleLabelsAndValues,i=e(20297).handleMarkerDefaults;$.exports=function(a,r,o,v){function p(A,b){return M.coerce(a,r,I,A,b)}var f=p("labels"),l=p("values"),y=n(f,l),s=y.len;if(r._hasLabels=y.hasLabels,r._hasValues=y.hasValues,!r._hasLabels&&r._hasValues&&(p("label0"),p("dlabel")),s){r._length=s,i(a,r,v,p),p("scalegroup");var g,x=p("text"),h=p("texttemplate");if(h||(g=p("textinfo",Array.isArray(x)?"text+percent":"percent")),p("hovertext"),p("hovertemplate"),h||g&&"none"!==g){var m=p("textposition");T(a,r,v,p,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}t(r,v,p),p("title.text")&&(p("title.position"),M.coerceFont(p,"title.font",v.font)),p("aspectratio"),p("baseratio")}else r.visible=!1}},35225:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(73795),categories:["pie-like","funnelarea","showLegend"],attributes:e(31993),layoutAttributes:e(38554),supplyDefaults:e(62474),supplyLayoutDefaults:e(40853),calc:e(54002).calc,crossTraceCalc:e(54002).crossTraceCalc,plot:e(50634),style:e(44103),styleOne:e(40631),meta:{description:["Visualize stages in a process using area-encoded trapezoids. This trace can be used",'to show data in a part-to-whole representation similar to a "pie" trace, wherein','each item appears in a single stage. See also the "funnel" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},38554:($,K,e)=>{"use strict";var M=e(67201).hiddenlabels;$.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc",description:["Sets the default funnelarea slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendfunnelareacolors`."].join(" ")},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the funnelarea slice colors (whether given by `funnelareacolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},40853:($,K,e)=>{"use strict";var M=e(5228),I=e(38554);$.exports=function(T,n){function i(u,a){return M.coerce(T,n,I,u,a)}i("hiddenlabels"),i("funnelareacolorway",n.colorway),i("extendfunnelareacolors")}},50634:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(5228),T=t.strScale,n=t.strTranslate,i=e(88565),a=e(23038).toMoveInsideBar,r=e(99771),o=r.recordMinTextSize,v=r.clearMinTextSize,p=e(63149),f=e(49015),l=f.attachFxHandlers,y=f.determineInsideTextFont,s=f.layoutAreas,x=f.prerenderTitles,h=f.positionTitleOutside,g=f.formatSliceLabel;function m(b,c){return"l"+(c[0]-b[0])+","+(c[1]-b[1])}function d(b,c){return[.5*(b[0]+c[0]),.5*(b[1]+c[1])]}$.exports=function(c,S){var w=c._context.staticPlot,E=c._fullLayout;v("funnelarea",E),x(S,c),s(S,E._size),t.makeTraceGroups(E._funnelarealayer,S,"trace").each(function(P){var R=M.select(this),F=P[0],_=F.trace;(function A(b){if(!b.length)return;var c=b[0],S=c.trace,w=S.aspectratio,E=S.baseratio;E>.999&&(E=.999);var P=Math.pow(E,2),R=c.vTotal,F=R*P/(1-P),_=R,z=F/R;function D(){var re=Math.sqrt(z);return{x:re,y:-re}}function k(){var re=D();return[re.x,re.y]}var O,H,j,U=[];for(U.push(k()),H=b.length-1;H>-1;H--)if(!(j=b[H]).hidden){var ee=j.v/_;z+=ee,U.push(k())}var W=1/0,B=-1/0;for(H=0;H<U.length;H++)O=U[H],W=Math.min(W,O[1]),B=Math.max(B,O[1]);for(H=0;H<U.length;H++)U[H][1]-=(B+W)/2;var te=U[U.length-1][0],q=c.r,oe=(B-W)/2,ie=q/te,V=q/oe*w;for(c.r=V*oe,H=0;H<U.length;H++)U[H][0]*=ie,U[H][1]*=V;var Y=[-(O=U[0])[0],O[1]],ae=[O[0],O[1]],X=0;for(H=b.length-1;H>-1;H--)if(!(j=b[H]).hidden){var J=U[X+=1][0],ue=U[X][1];j.TL=[-J,ue],j.TR=[J,ue],j.BL=Y,j.BR=ae,j.pxmid=d(j.TR,j.BR),Y=j.TL,ae=j.TR}})(P),R.each(function(){var z=M.select(this).selectAll("g.slice").data(P);z.enter().append("g").classed("slice",!0),z.exit().remove(),z.each(function(k,O){if(k.hidden)M.select(this).selectAll("path,g").remove();else{k.pointNumber=k.i,k.curveNumber=_.index;var U=F.cx,H=F.cy,j=M.select(this),ee=j.selectAll("path.surface").data([k]);ee.enter().append("path").classed("surface",!0).style({"pointer-events":w?"none":"all"}),j.call(l,c,P);var W="M"+(U+k.TR[0])+","+(H+k.TR[1])+m(k.TR,k.BR)+m(k.BR,k.BL)+m(k.BL,k.TL)+"Z";ee.attr("d",W),g(c,k,F);var B=p.castOption(_.textposition,k.pts),te=j.selectAll("g.slicetext").data(k.text&&"none"!==B?[0]:[]);te.enter().append("g").classed("slicetext",!0),te.exit().remove(),te.each(function(){var q=t.ensureSingle(M.select(this),"text","",function(ue){ue.attr("data-notex",1)}),oe=t.ensureUniformFontSize(c,y(_,k,E.font));q.text(k.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(I.font,oe).call(i.convertToTspans,c);var V,Y,ae,ie=I.bBox(q.node()),X=Math.min(k.BL[1],k.BR[1])+H,J=Math.max(k.TL[1],k.TR[1])+H;Y=Math.max(k.TL[0],k.BL[0])+U,ae=Math.min(k.TR[0],k.BR[0])+U,(V=a(Y,ae,X,J,ie,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=oe.size,o(_.type,V,E),P[O].transform=V,t.setTransormAndDisplay(q,V)})}});var D=M.select(this).selectAll("g.titletext").data(_.title.text?[0]:[]);D.enter().append("g").classed("titletext",!0),D.exit().remove(),D.each(function(){var k=t.ensureSingle(M.select(this),"text","",function(H){H.attr("data-notex",1)}),O=_.title.text;_._meta&&(O=t.templateString(O,_._meta)),k.text(O).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(I.font,_.title.font).call(i.convertToTspans,c);var U=h(F,E._size);k.attr("transform",n(U.x,U.y)+T(Math.min(1,U.scale))+n(U.tx,U.ty))})})})}},44103:($,K,e)=>{"use strict";var M=e(21572),I=e(40631),t=e(99771).resizeText;$.exports=function(n){var i=n._fullLayout._funnelarealayer.selectAll(".trace");t(n,i,"funnelarea"),i.each(function(u){var r=u[0].trace,o=M.select(this);o.style({opacity:r.opacity}),o.selectAll("path.surface").each(function(v){M.select(this).call(I,v,r,n)})})}},63726:($,K,e)=>{"use strict";var M=e(55405),I=e(82684),t=e(47297),T=e(88489).axisHoverFormat,n=e(9430).fF,i=e(9430).si,u=e(567),a=e(18836).extendFlat;$.exports=a({z:{valType:"data_array",editType:"calc",description:"Sets the z data."},x:a({},M.x,{impliedEdits:{xtype:"array"}}),x0:a({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},M.y,{impliedEdits:{ytype:"array"}}),y0:a({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:a({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:a({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:a({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:a({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:a({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:a({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"calc",description:"Same as `text`."},transpose:{valType:"boolean",dflt:!1,editType:"calc",description:"Transposes the z data."},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's x coordinates are given by *x*","(the default behavior when `x` is provided).","If *scaled*, the heatmap's x coordinates are given by *x0* and *dx*","(the default behavior when `x` is not provided)."].join(" ")},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's y coordinates are given by *y*","(the default behavior when `y` is provided)","If *scaled*, the heatmap's y coordinates are given by *y0* and *dy*","(the default behavior when `y` is not provided)"].join(" ")},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc",description:["Picks a smoothing algorithm use to smooth `z` data."].join(" ")},hoverongaps:{valType:"boolean",dflt:!0,editType:"none",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data have hover labels associated with them."].join(" ")},connectgaps:{valType:"boolean",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array and `zsmooth` is not false;","otherwise it is defaulted to false."].join(" ")},xgap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the horizontal gap (in pixels) between bricks."},ygap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the vertical gap (in pixels) between bricks."},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:n(),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:t({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style",description:"Sets the text font."}),showlegend:a({},I.showlegend,{dflt:!1})},{transforms:void 0},u("",{cLetter:"z",autoColorDflt:!1}))},15576:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(91464),T=e(62311),n=e(36952),i=e(93727),u=e(19346),a=e(1419),r=e(82147),o=e(70011),v=e(33454),p=e(71103).BADNUM;function f(y){for(var s=[],x=y.length,h=0;h<x;h++){var g=y[h];g!==p&&s.push(g)}return s}$.exports=function(s,x){var c,S,w,E,P,R,F,_,z,D,k,h=t.getFromId(s,x.xaxis||"x"),g=t.getFromId(s,x.yaxis||"y"),m=M.traceIs(x,"contour"),d=M.traceIs(x,"histogram"),A=M.traceIs(x,"gl2d"),b=m?"best":x.zsmooth;if(h._minDtick=0,g._minDtick=0,d)E=(k=n(s,x)).orig_x,c=k.x,S=k.x0,w=k.dx,_=k.orig_y,P=k.y,R=k.y0,F=k.dy,z=k.z;else{var O=x.z;I.isArray1D(O)?(u(x,h,g,"x","y",["z"]),c=x._x,P=x._y,O=x._z):(E=x.x?h.makeCalcdata(x,"x"):[],_=x.y?g.makeCalcdata(x,"y"):[],c=T(x,h,"x",E).vals,P=T(x,g,"y",_).vals,x._x=c,x._y=P),S=x.x0,w=x.dx,R=x.y0,F=x.dy,z=a(O,x,h,g)}function U(ie){b=x._input.zsmooth=x.zsmooth=!1,I.warn('cannot use zsmooth: "fast": '+ie)}function H(ie){if(ie.length>1){var V=(ie[ie.length-1]-ie[0])/(ie.length-1),Y=Math.abs(V/100);for(D=0;D<ie.length-1;D++)if(Math.abs(ie[D+1]-ie[D]-V)>Y)return!1}return!0}(h.rangebreaks||g.rangebreaks)&&(z=function l(y,s,x){for(var h=[],g=-1,m=0;m<x.length;m++)if(s[m]!==p){h[++g]=[];for(var d=0;d<x[m].length;d++)y[d]!==p&&h[g].push(x[m][d])}return h}(c,P,z),d||(c=f(c),P=f(P),x._x=c,x._y=P)),!d&&(m||x.connectgaps)&&(x._emptypoints=o(z),r(z,x._emptypoints)),x._islinear=!1,"log"===h.type||"log"===g.type?"fast"===b&&U("log axis found"):H(c)?H(P)?x._islinear=!0:"fast"===b&&U("y scale is not linear"):"fast"===b&&U("x scale is not linear");var j=I.maxRowLength(z),ee="scaled"===x.xtype?"":c,W=v(x,ee,S,w,j,h),B="scaled"===x.ytype?"":P,te=v(x,B,R,F,z.length,g);A||(x._extremes[h._id]=t.findExtremes(h,W),x._extremes[g._id]=t.findExtremes(g,te));var q={x:W,y:te,z,text:x._text||x.text,hovertext:x._hovertext||x.hovertext};if(x.xperiodalignment&&E&&(q.orig_x=E),x.yperiodalignment&&_&&(q.orig_y=_),ee&&ee.length===W.length-1&&(q.xCenter=ee),B&&B.length===te.length-1&&(q.yCenter=B),d&&(q.xRanges=k.xRanges,q.yRanges=k.yRanges,q.pts=k.pts),m||i(s,x,{vals:z,cLetter:"z"}),m&&x.contours&&"heatmap"===x.contours.coloring){var oe={type:"contour"===x.type?"heatmap":"histogram2d",xcalendar:x.xcalendar,ycalendar:x.ycalendar};q.xfill=v(oe,ee,S,w,j,h),q.yfill=v(oe,B,R,F,z.length,g)}return[q]}},1419:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(71103).BADNUM;$.exports=function(n,i,u,a){var r,o,v,p,f,l;function y(d){if(M(d))return+d}if(i&&i.transpose){for(r=0,f=0;f<n.length;f++)r=Math.max(r,n[f].length);if(0===r)return!1;v=function(d){return d.length},p=function(d,A,b){return(d[b]||[])[A]}}else r=n.length,v=function(d,A){return d[A].length},p=function(d,A,b){return(d[A]||[])[b]};function x(d){if(i&&"carpet"!==i.type&&"contourcarpet"!==i.type&&d&&"category"===d.type&&i["_"+d._id.charAt(0)].length){var A=d._id.charAt(0),b={},c=i["_"+A+"CategoryMap"]||i[A];for(f=0;f<c.length;f++)b[c[f]]=f;return function(S){var w=b[d._categories[S]];return w+1?w:t}}return I.identity}var h=x(u),g=x(a);a&&"category"===a.type&&(r=a._categories.length);var d,A,b,m=new Array(r);for(f=0;f<r;f++)for(o=u&&"category"===u.type?u._categories.length:v(n,f),m[f]=new Array(o),l=0;l<o;l++)m[f][l]=y((d=n,A=g(f),b=h(l),A===t||b===t?t:p(d,A,b)));return m}},36661:$=>{"use strict";$.exports={min:"zmin",max:"zmax"}},19346:($,K,e)=>{"use strict";var M=e(5228),I=e(71103).BADNUM,t=e(62311);$.exports=function(n,i,u,a,r,o){var v=n._length,p=i.makeCalcdata(n,a),f=u.makeCalcdata(n,r);p=t(n,i,a,p).vals,f=t(n,u,r,f).vals;var h,g,S,w,l=n.text,y=void 0!==l&&M.isArray1D(l),s=n.hovertext,x=void 0!==s&&M.isArray1D(s),m=M.distinctVals(p),d=m.vals,A=M.distinctVals(f),b=A.vals,c=[],E=b.length,P=d.length;for(h=0;h<o.length;h++)c[h]=M.init2dArray(E,P);y&&(S=M.init2dArray(E,P)),x&&(w=M.init2dArray(E,P));var R=M.init2dArray(E,P);for(h=0;h<v;h++)if(p[h]!==I&&f[h]!==I){var F=M.findBin(p[h]+m.minDiff/2,d),_=M.findBin(f[h]+A.minDiff/2,b);for(g=0;g<o.length;g++){var D=n[o[g]];c[g][_][F]=D[h],R[_][F]=h}y&&(S[_][F]=l[h]),x&&(w[_][F]=s[h])}for(n["_"+a]=d,n["_"+r]=b,g=0;g<o.length;g++)n["_"+o[g]]=c[g];y&&(n._text=S),x&&(n._hovertext=w),i&&"category"===i.type&&(n["_"+a+"CategoryMap"]=d.map(function(O){return i._categories[O]})),u&&"category"===u.type&&(n["_"+r+"CategoryMap"]=b.map(function(O){return u._categories[O]})),n._after2before=R}},59280:($,K,e)=>{"use strict";var M=e(5228),I=e(34212),t=e(35411),T=e(18031),n=e(90347),i=e(14739),u=e(63726);$.exports=function(r,o,v,p){function f(y,s){return M.coerce(r,o,u,y,s)}I(r,o,f,p)?(T(r,o,p,f),f("xhoverformat"),f("yhoverformat"),f("text"),f("hovertext"),f("hovertemplate"),t(f,p),n(r,o,f,p),f("hoverongaps"),f("connectgaps",M.isArray1D(o.z)&&!1!==o.zsmooth),i(r,o,p,f,{prefix:"",cLetter:"z"})):o.visible=!1}},70011:($,K,e)=>{"use strict";var M=e(5228).maxRowLength;$.exports=function(t){var v,p,f,l,y,s,x,h,T=[],n={},i=[],u=t[0],a=[],r=[0,0,0],o=M(t);for(p=0;p<t.length;p++)for(v=a,a=u,u=t[p+1]||[],f=0;f<o;f++)void 0===a[f]&&((s=(void 0!==a[f-1]?1:0)+(void 0!==a[f+1]?1:0)+(void 0!==v[f]?1:0)+(void 0!==u[f]?1:0))?(0===p&&s++,0===f&&s++,p===t.length-1&&s++,f===a.length-1&&s++,s<4&&(n[[p,f]]=[p,f,s]),T.push([p,f,s])):i.push([p,f]));for(;i.length;){for(x={},h=!1,y=i.length-1;y>=0;y--)(s=((n[[(p=(l=i[y])[0])-1,f=l[1]]]||r)[2]+(n[[p+1,f]]||r)[2]+(n[[p,f-1]]||r)[2]+(n[[p,f+1]]||r)[2])/20)&&(x[l]=[p,f,s],i.splice(y,1),h=!0);if(!h)throw"findEmpties iterated with no new neighbors";for(l in x)n[l]=x[l],T.push(x[l])}return T.sort(function(g,m){return m[2]-g[2]})}},22996:($,K,e)=>{"use strict";var M=e(76863),I=e(5228),t=I.isArrayOrTypedArray,T=e(91464),n=e(45103).extractOpts;$.exports=function(u,a,r,o,v){v||(v={});var w,E,P,R,p=v.isContour,f=u.cd[0],l=f.trace,y=u.xa,s=u.ya,x=f.x,h=f.y,g=f.z,m=f.xCenter,d=f.yCenter,A=f.zmask,b=l.zhoverformat,c=x,S=h;if(!1!==u.index){try{P=Math.round(u.index[1]),R=Math.round(u.index[0])}catch{return void I.error("Error hovering on heatmap, pointNumber must be [row,col], found:",u.index)}if(P<0||P>=g[0].length||R<0||R>g.length)return}else{if(M.inbox(a-x[0],a-x[x.length-1],0)>0||M.inbox(r-h[0],r-h[h.length-1],0)>0)return;if(p){var F;for(c=[2*x[0]-x[1]],F=1;F<x.length;F++)c.push((x[F]+x[F-1])/2);for(c.push([2*x[x.length-1]-x[x.length-2]]),S=[2*h[0]-h[1]],F=1;F<h.length;F++)S.push((h[F]+h[F-1])/2);S.push([2*h[h.length-1]-h[h.length-2]])}P=Math.max(0,Math.min(c.length-2,I.findBin(a,c))),R=Math.max(0,Math.min(S.length-2,I.findBin(r,S)))}var O,U,_=y.c2p(x[P]),z=y.c2p(x[P+1]),D=s.c2p(h[R]),k=s.c2p(h[R+1]);p?(O=f.orig_x||x,U=f.orig_y||h,z=_,w=O[P],k=D,E=U[R]):(O=f.orig_x||m||x,U=f.orig_y||d||h,w=m?O[P]:(O[P]+O[P+1])/2,E=d?U[R]:(U[R]+U[R+1])/2,y&&"category"===y.type&&(w=x[P]),s&&"category"===s.type&&(E=h[R]),l.zsmooth&&(_=z=y.c2p(w),D=k=s.c2p(E)));var H=g[R][P];if(A&&!A[R][P]&&(H=void 0),void 0!==H||l.hoverongaps){var j;t(f.hovertext)&&t(f.hovertext[R])?j=f.hovertext[R][P]:t(f.text)&&t(f.text[R])&&(j=f.text[R][P]);var ee=n(l),W={type:"linear",range:[ee.min,ee.max],hoverformat:b,_separators:y._separators,_numFormat:y._numFormat},B=T.tickText(W,H,"hover").text;return[I.extendFlat(u,{index:l._after2before?l._after2before[R][P]:[R,P],distance:u.maxHoverDistance,spikeDistance:u.maxSpikeDistance,x0:_,x1:z,y0:D,y1:k,xLabelVal:w,yLabelVal:E,zLabelVal:H,zLabel:B,text:j})]}}},89723:($,K,e)=>{"use strict";$.exports={attributes:e(63726),supplyDefaults:e(59280),calc:e(15576),plot:e(63996),colorbar:e(36661),style:e(61829),hoverPoints:e(22996),moduleType:"trace",name:"heatmap",basePlotModule:e(24329),categories:["cartesian","svg","2dMap","showLegend"],meta:{description:["The data that describes the heatmap value-to-color mapping","is set in `z`.","Data in `z` can either be a {2D array} of values (ragged or not)","or a 1D array of values.","In the case where `z` is a {2D array},","say that `z` has N rows and M columns.","Then, by default, the resulting heatmap will have N partitions along","the y axis and M partitions along the x axis.","In other words, the i-th row/ j-th column cell in `z`","is mapped to the i-th partition of the y axis","(starting from the bottom of the plot) and the j-th partition","of the x-axis (starting from the left of the plot).","This behavior can be flipped by using `transpose`.","Moreover, `x` (`y`) can be provided with M or M+1 (N or N+1) elements.","If M (N), then the coordinates correspond to the center of the","heatmap cells and the cells have equal width.","If M+1 (N+1), then the coordinates correspond to the edges of the","heatmap cells.","In the case where `z` is a 1D {array}, the x and y coordinates must be","provided in `x` and `y` respectively to form data triplets."].join(" ")}}},82147:($,K,e)=>{"use strict";var M=e(5228),t=[[-1,0],[1,0],[0,-1],[0,1]];function n(i,u,a){var o,v,p,f,l,y,s,x,h,g,m,d,A,r=0;for(f=0;f<u.length;f++){for(v=(o=u[f])[0],p=o[1],m=i[v][p],g=0,h=0,l=0;l<4;l++)(s=i[v+(y=t[l])[0]])&&(void 0!==(x=s[p+y[1]])&&(0===g?d=A=x:(d=Math.min(d,x),A=Math.max(A,x)),h++,g+=x));if(0===h)throw"iterateInterp2d order is wrong: no defined neighbors";i[v][p]=g/h,void 0===m?h<4&&(r=1):(i[v][p]=(1+a)*i[v][p]-a*m,A>d&&(r=Math.max(r,Math.abs(i[v][p]-m)/(A-d))))}return r}$.exports=function(u,a){var o,i,r=1;for(n(u,a),o=0;o<a.length&&!(a[o][2]<4);o++);for(a=a.slice(o),o=0;o<100&&r>.01;o++)r=n(u,a,(i=r,.5-.25*Math.min(1,.5*i)));return r>.01&&M.log("interp2d didn't converge quickly",r),u}},35411:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){t("texttemplate");var n=M.extendFlat({},T.font,{color:"auto",size:"auto"});M.coerceFont(t,"textfont",n)}},33454:($,K,e)=>{"use strict";var M=e(97799),I=e(5228).isArrayOrTypedArray;$.exports=function(T,n,i,u,a,r){var l,y,s,o=[],v=M.traceIs(T,"contour"),p=M.traceIs(T,"histogram"),f=M.traceIs(T,"gl2d");if(I(n)&&n.length>1&&!p&&"category"!==r.type){var h=n.length;if(!(h<=a))return v?n.slice(0,a):n.slice(0,a+1);if(v||f)o=Array.from(n).slice(0,a);else if(1===a)o=[n[0]-.5,n[0]+.5];else{for(o=[1.5*n[0]-.5*n[1]],s=1;s<h;s++)o.push(.5*(n[s-1]+n[s]));o.push(1.5*n[h-1]-.5*n[h-2])}if(h<a){var g=o[o.length-1],m=g-o[o.length-2];for(s=h;s<a;s++)g+=m,o.push(g)}}else{var d=T[r._id.charAt(0)+"calendar"];if(p)l=r.r2c(i,0,d);else if(I(n)&&1===n.length)l=n[0];else if(void 0===i)l=0;else{l=("log"===r.type?r.d2c:r.r2c)(i,0,d)}for(y=u||1,s=v||f?0:-.5;s<a;s++)o.push(l+y*s)}return o}},63996:($,K,e)=>{"use strict";var M=e(21572),I=e(80791),t=e(97799),T=e(27630),n=e(91464),i=e(5228),u=e(88565),a=e(59921),r=e(8416),o=e(45103).extractOpts,v=e(45103).makeColorScaleFuncFromTrace,p=e(70415),l=e(94598).LINE_SPACING,y=e(69585),s=e(44727).STYLE,x="heatmap-label";function h(b){return b.selectAll("g."+x)}function g(b){h(b).remove()}function m(b,c){var S=c.length-2,w=i.constrain(i.findBin(b,c),0,S),E=c[w],P=c[w+1],R=i.constrain(w+(b-E)/(P-E)-.5,0,S),F=Math.round(R),_=Math.abs(R-F);return R&&R!==S&&_?{bin0:F,frac:_,bin1:Math.round(F+_/(R-F))}:{bin0:F,bin1:F,frac:0}}function d(b,c){var S=c.length-1,w=i.constrain(i.findBin(b,c),0,S),E=c[w],R=(b-E)/(c[w+1]-E)||0;return R<=0?{bin0:w,bin1:w,frac:0}:R<.5?{bin0:w,bin1:w+1,frac:R}:{bin0:w+1,bin1:w,frac:1-R}}function A(b,c,S){b[c]=S[0],b[c+1]=S[1],b[c+2]=S[2],b[c+3]=Math.round(255*S[3])}$.exports=function(b,c,S,w){var E=c.xaxis,P=c.yaxis;i.makeTraceGroups(w,S,"hm").each(function(R){var V,Y,ae,X,J,ue,re,ne,F=M.select(this),_=R[0],z=_.trace,D=z.xgap||0,k=z.ygap||0,O=_.z,U=_.x,H=_.y,j=_.xCenter,ee=_.yCenter,W=t.traceIs(z,"contour"),B=W?"best":z.zsmooth,te=O.length,q=i.maxRowLength(O),oe=!1,ie=!1;for(ue=0;void 0===V&&ue<U.length-1;)V=E.c2p(U[ue]),ue++;for(ue=U.length-1;void 0===Y&&ue>0;)Y=E.c2p(U[ue]),ue--;for(Y<V&&(ae=Y,Y=V,V=ae,oe=!0),ue=0;void 0===X&&ue<H.length-1;)X=P.c2p(H[ue]),ue++;for(ue=H.length-1;void 0===J&&ue>0;)J=P.c2p(H[ue]),ue--;J<X&&(ae=X,X=J,J=ae,ie=!0),W&&(j=U,ee=H,U=_.xfill,H=_.yfill);var se="default";if(B?se="best"===B?"smooth":"fast":z._islinear&&0===D&&0===k&&y()&&(se="fast"),"fast"!==se){var de="best"===B?0:.5;V=Math.max(-de*E._length,V),Y=Math.min((1+de)*E._length,Y),X=Math.max(-de*P._length,X),J=Math.min((1+de)*P._length,J)}var Le,Fe,be=Math.round(Y-V),De=Math.round(J-X);if(V>=E._length||Y<=0||X>=P._length||J<=0)return F.selectAll("image").data([]).exit().remove(),void g(F);"fast"===se?(Le=q,Fe=te):(Le=be,Fe=De);var ke=document.createElement("canvas");ke.width=Le,ke.height=Fe;var Ie,Qe,ze=ke.getContext("2d",{willReadFrequently:!0}),Pe=v(z,{noNumericCheck:!0,returnArray:!0});"fast"===se?(Ie=oe?function(Xn){return q-1-Xn}:i.identity,Qe=ie?function(Xn){return te-1-Xn}:i.identity):(Ie=function(Xn){return i.constrain(Math.round(E.c2p(U[Xn])-V),0,be)},Qe=function(Xn){return i.constrain(Math.round(P.c2p(H[Xn])-X),0,De)});var zt,St,Mt,st,at=Qe(0),Be=[at,at],Ne=oe?0:1,nt=ie?0:1,ct=0,mt=0,Bt=0,Rt=0;function Se(Xn,Vr){if(void 0!==Xn){var wn=Pe(Xn);return wn[0]=Math.round(wn[0]),wn[1]=Math.round(wn[1]),wn[2]=Math.round(wn[2]),ct+=Vr,mt+=wn[0]*Vr,Bt+=wn[1]*Vr,Rt+=wn[2]*Vr,wn}return[0,0,0,0]}function pe(Xn,Vr,wn,Ca){var Ba=Xn[wn.bin0];if(void 0===Ba)return Se(void 0,1);var Ni,Ka=Xn[wn.bin1],Ja=Vr[wn.bin0],si=Vr[wn.bin1],Ra=Ka-Ba||0,Na=Ja-Ba||0;return Ni=void 0===Ka?void 0===si?0:void 0===Ja?2*(si-Ba):2*(2*si-Ja-Ba)/3:void 0===si?void 0===Ja?0:2*(2*Ba-Ka-Ja)/3:void 0===Ja?2*(2*si-Ka-Ba)/3:si+Ba-Ka-Ja,Se(Ba+wn.frac*Ra+Ca.frac*(Na+wn.frac*Ni))}if("default"!==se){var Oe,ge=0;try{Oe=new Uint8Array(Le*Fe*4)}catch{Oe=new Array(Le*Fe*4)}if("smooth"===se){var Ft,bt,Pt,we=j||U,He=ee||H,Xe=new Array(we.length),ut=new Array(He.length),Ze=new Array(be),qe=j?d:m,Dt=ee?d:m;for(ue=0;ue<we.length;ue++)Xe[ue]=Math.round(E.c2p(we[ue])-V);for(ue=0;ue<He.length;ue++)ut[ue]=Math.round(P.c2p(He[ue])-X);for(ue=0;ue<be;ue++)Ze[ue]=qe(ue,Xe);for(re=0;re<De;re++)for(bt=O[(Ft=Dt(re,ut)).bin0],Pt=O[Ft.bin1],ue=0;ue<be;ue++,ge+=4)A(Oe,ge,st=pe(bt,Pt,Ze[ue],Ft))}else for(re=0;re<te;re++)for(Mt=O[re],Be=Qe(re),ue=0;ue<q;ue++)st=Se(Mt[ue],1),A(Oe,ge=4*(Be*q+Ie(ue)),st);var cr=ze.createImageData(Le,Fe);try{cr.data.set(Oe)}catch{var Sr=cr.data,Kr=Sr.length;for(re=0;re<Kr;re++)Sr[re]=Oe[re]}ze.putImageData(cr,0,0)}else{var It=Math.floor(D/2),$t=Math.floor(k/2);for(re=0;re<te;re++)if(Mt=O[re],Be.reverse(),Be[nt]=Qe(re+1),Be[0]!==Be[1]&&void 0!==Be[0]&&void 0!==Be[1])for(zt=[St=Ie(0),St],ue=0;ue<q;ue++)zt.reverse(),zt[Ne]=Ie(ue+1),zt[0]!==zt[1]&&void 0!==zt[0]&&void 0!==zt[1]&&(st=Se(Mt[ue],(zt[1]-zt[0])*(Be[1]-Be[0])),ze.fillStyle="rgba("+st.join(",")+")",ze.fillRect(zt[0]+It,Be[0]+$t,zt[1]-zt[0]-D,Be[1]-Be[0]-k))}mt=Math.round(mt/ct),Bt=Math.round(Bt/ct),Rt=Math.round(Rt/ct);var kr=I("rgb("+mt+","+Bt+","+Rt+")");b._hmpixcount=(b._hmpixcount||0)+ct,b._hmlumcount=(b._hmlumcount||0)+ct*kr.getLuminance();var lr=F.selectAll("image").data(R);lr.enter().append("svg:image").attr({xmlns:p.svg,preserveAspectRatio:"none"}),lr.attr({height:De,width:be,x:V,y:X,"xlink:href":ke.toDataURL("image/png")}),"fast"===se&&!B&&lr.attr("style",s),g(F);var rt=z.texttemplate;if(rt){var $e=o(z),ht={type:"linear",range:[$e.min,$e.max],_separators:E._separators,_numFormat:E._numFormat},gt="histogram2dcontour"===z.type,ft="contour"===z.type,sr=ft?te-1:te,tr=ft?1:0,Cr=ft?q-1:q,Hr=[];for(ue=ft?1:0;ue<sr;ue++){var zr;if(ft)zr=_.y[ue];else if(gt){if(0===ue||ue===te-1)continue;zr=_.y[ue]}else if(_.yCenter)zr=_.yCenter[ue];else{if(ue+1===te&&void 0===_.y[ue+1])continue;zr=(_.y[ue]+_.y[ue+1])/2}var Wr=Math.round(P.c2p(zr));if(!(0>Wr||Wr>P._length))for(re=tr;re<Cr;re++){var Ke;if(ft)Ke=_.x[re];else if(gt){if(0===re||re===q-1)continue;Ke=_.x[re]}else if(_.xCenter)Ke=_.xCenter[re];else{if(re+1===q&&void 0===_.x[re+1])continue;Ke=(_.x[re]+_.x[re+1])/2}var We=Math.round(E.c2p(Ke));if(!(0>We||We>E._length)){var Jt=a({x:Ke,y:zr},z,b._fullLayout);Jt.x=Ke,Jt.y=zr;var Gt=_.z[ue][re];void 0===Gt?(Jt.z="",Jt.zLabel=""):(Jt.z=Gt,Jt.zLabel=n.tickText(ht,Gt,"hover").text);var hr=_.text&&_.text[ue]&&_.text[ue][re];(void 0===hr||!1===hr)&&(hr=""),Jt.text=hr;var br=i.texttemplateString(rt,Jt,b._fullLayout._d3locale,Jt,z._meta||{});if(br){var Ut=br.split("<br>"),Kt=Ut.length,wt=0;for(ne=0;ne<Kt;ne++)wt=Math.max(wt,Ut[ne].length);Hr.push({l:Kt,c:wt,t:br,x:We,y:Wr,z:Gt})}}}}var xr=z.textfont,Ir=xr.family,Ur=xr.size,qt=b._fullLayout.font.size;if(!Ur||"auto"===Ur){var on=1/0,an=1/0,hn=0,An=0;for(ne=0;ne<Hr.length;ne++){var Sn=Hr[ne];if(hn=Math.max(hn,Sn.l),An=Math.max(An,Sn.c),ne<Hr.length-1){var sa=Hr[ne+1],Rn=Math.abs(sa.x-Sn.x),Yr=Math.abs(sa.y-Sn.y);Rn&&(on=Math.min(on,Rn)),Yr&&(an=Math.min(an,Yr))}}isFinite(on)&&isFinite(an)?(on-=D,an-=k,on/=An,an/=hn,on/=l/2,an/=l,Ur=Math.min(Math.floor(on),Math.floor(an),qt)):Ur=qt}if(Ur<=0||!isFinite(Ur))return;h(F).data(Hr).enter().append("g").classed(x,1).append("text").attr("text-anchor","middle").each(function(Xn){var Vr=M.select(this),wn=xr.color;(!wn||"auto"===wn)&&(wn=r.contrast("rgba("+Pe(Xn.z).join()+")")),Vr.attr("data-notex",1).call(u.positionText,function(Xn){return Xn.x}(Xn),function(Xn){return Xn.y-Ur*(Xn.l*l/2-1)}(Xn)).call(T.font,Ir,Ur,wn).text(Xn.t).call(u.convertToTspans,b)})}})}},61829:($,K,e)=>{"use strict";var M=e(21572);$.exports=function(t){M.select(t).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},90347:$=>{"use strict";$.exports=function(e,M,I){!1===I("zsmooth")&&(I("xgap"),I("ygap")),I("zhoverformat")}},34212:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(97799);function T(i,u){var a=u(i);return"scaled"===(a?u(i+"type","array"):"scaled")&&(u(i+"0"),u("d"+i)),a}$.exports=function(u,a,r,o,v,p){var l,y,f=r("z");if(v=v||"x",p=p||"y",void 0===f||!f.length)return 0;if(I.isArray1D(f)){l=r(v),y=r(p);var s=I.minRowLength(l),x=I.minRowLength(y);if(0===s||0===x)return 0;a._length=Math.min(s,x,f.length)}else{if(l=T(v,r),y=T(p,r),!function n(i){for(var o,u=!0,a=!1,r=!1,v=0;v<i.length;v++){if(o=i[v],!I.isArrayOrTypedArray(o)){u=!1;break}o.length>0&&(a=!0);for(var p=0;p<o.length;p++)if(M(o[p])){r=!0;break}}return u&&a&&r}(f))return 0;r("transpose"),a._length=null}return"heatmapgl"===u.type||t.getComponentMethod("calendars","handleTraceDefaults")(u,a,[v,p],o),!0}},72602:($,K,e)=>{"use strict";for(var M=e(63726),I=e(567),t=e(18836).extendFlat,T=e(71859).overrideAll,n=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],i={},u=0;u<n.length;u++){var a=n[u];i[a]=M[a]}i.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc",description:"Picks a smoothing algorithm use to smooth `z` data."},t(i,I("",{cLetter:"z",autoColorDflt:!1})),$.exports=T(i,"calc","nested")},14192:($,K,e)=>{"use strict";var M=e(17745).gl_heatmap2d,I=e(91464),t=e(31936);function T(a,r){this.scene=a,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(a.glplot,this.options),this.heatmap._trace=this}var n=T.prototype;n.handlePick=function(a){var r=this.options,o=r.shape,v=a.pointId,p=v%o[0],f=Math.floor(v/o[0]),l=v;return{trace:this,dataCoord:a.dataCoord,traceCoord:[r.x[p],r.y[f],r.z[l]],textLabel:this.textLabels[v],name:this.name,pointIndex:[f,p],hoverinfo:this.hoverinfo}},n.update=function(a,r){var o=r[0];this.index=a.index,this.name=a.name,this.hoverinfo=a.hoverinfo;var v=o.z;this.options.z=[].concat.apply([],v);var p=v[0].length,f=v.length;this.options.shape=[p,f],this.options.x=o.x,this.options.y=o.y,this.options.zsmooth=a.zsmooth;var l=function i(a){for(var r=a.colorscale,o=a.zmin,v=a.zmax,p=r.length,f=new Array(p),l=new Array(4*p),y=0;y<p;y++){var s=r[y],x=t(s[1]);f[y]=o+s[0]*(v-o);for(var h=0;h<4;h++)l[4*y+h]=x[h]}return{colorLevels:f,colorValues:l}}(a);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],a.text),this.heatmap.update(this.options);var x,h,y=this.scene.xaxis,s=this.scene.yaxis;!1===a.zsmooth&&(x={ppad:o.x[1]-o.x[0]},h={ppad:o.y[1]-o.y[0]}),a._extremes[y._id]=I.findExtremes(y,o.x,x),a._extremes[s._id]=I.findExtremes(s,o.y,h)},n.dispose=function(){this.heatmap.dispose()},$.exports=function u(a,r,o){var v=new T(a,r.uid);return v.update(r,o),v}},7340:($,K,e)=>{"use strict";var M=e(5228),I=e(34212),t=e(14739),T=e(72602);$.exports=function(i,u,a,r){function o(p,f){return M.coerce(i,u,T,p,f)}I(i,u,o,r)?(o("text"),o("zsmooth"),t(i,u,r,o,{prefix:"",cLetter:"z"})):u.visible=!1}},37474:($,K,e)=>{"use strict";var M=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" ");$.exports={attributes:e(72602),supplyDefaults:e(7340),colorbar:e(36661),calc:e(15576),plot:e(14192),moduleType:"trace",name:"heatmapgl",basePlotModule:e(94652),categories:["gl","gl2d","2dMap"],meta:{description:[M,"WebGL version of the heatmap trace type."].join(" ")}}},16680:($,K,e)=>{"use strict";var M=e(99009),I=e(88489).axisHoverFormat,t=e(9430).fF,T=e(9430).si,n=e(47297),i=e(58435),u=e(46732),a=e(18836).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:I("x"),yhoverformat:I("y"),text:a({},M.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:a({},M.hovertext,{description:"Same as `text`."}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:i("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:i("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:t({},{keys:u.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:a({},M.textposition,{arrayOk:!1}),textfont:n({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:n({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:n({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir}}},3950:$=>{"use strict";$.exports=function(e,M){for(var I=e.length,t=0,T=0;T<I;T++)M[T]?(e[T]/=M[T],t+=e[T]):e[T]=null;return t}},58435:$=>{"use strict";$.exports=function(e,M){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",e,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",M?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",e,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",e,"axis bin.","Default behavior: If `nbins"+e+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+e+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",M?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}}},14482:($,K,e)=>{"use strict";var M=e(7347);$.exports={count:function(I,t,T){return T[I]++,1},sum:function(I,t,T,n){var i=n[t];return M(i)?(i=Number(i),T[I]+=i,i):0},avg:function(I,t,T,n,i){var u=n[t];return M(u)&&(u=Number(u),T[I]+=u,i[I]++),0},min:function(I,t,T,n){var i=n[t];if(M(i)){if(i=Number(i),!M(T[I]))return T[I]=i,i;if(T[I]>i){var u=i-T[I];return T[I]=i,u}}return 0},max:function(I,t,T,n){var i=n[t];if(M(i)){if(i=Number(i),!M(T[I]))return T[I]=i,i;if(T[I]<i){var u=i-T[I];return T[I]=i,u}}return 0}}},87763:($,K,e)=>{"use strict";var M=e(71103),I=M.ONEAVGYEAR,t=M.ONEAVGMONTH,T=M.ONEDAY,n=M.ONEHOUR,i=M.ONEMIN,u=M.ONESEC,a=e(91464).tickIncrement;function r(f,l,y,s){if(f*l<=0)return 1/0;for(var x=Math.abs(l-f),h="date"===y.type,g=o(x,h),m=0;m<10;m++){var d=o(80*g,h);if(g===d)break;if(!v(d,f,l,h,y,s))break;g=d}return g}function o(f,l){return l&&f>u?f>T?f>1.1*I?I:f>1.1*t?t:T:f>n?n:f>i?i:u:Math.pow(10,Math.floor(Math.log(f)/Math.LN10))}function v(f,l,y,s,x,h){if(s&&f>T){var g=p(l,x,h),m=p(y,x,h),d=f===I?0:1;return g[d]!==m[d]}return Math.floor(y/f)-Math.floor(l/f)>.1}function p(f,l,y){var s=l.c2d(f,I,y).split("-");return""===s[0]&&(s.unshift(),s[0]="-"+s[0]),s}$.exports=function(l,y,s,x,h){var w,E,g=-1.1*y,m=-.1*y,d=l-m,A=s[0],b=s[1],c=Math.min(r(A+m,A+d,x,h),r(b+m,b+d,x,h)),S=Math.min(r(A+g,A+m,x,h),r(b+g,b+m,x,h));if(c>S&&S<Math.abs(b-A)/4e3?(w=c,E=!1):(w=Math.min(c,S),E=!0),"date"===x.type&&w>T){var P=w===I?1:6,R=w===I?"M12":"M1";return function(F,_){var z=x.c2d(F,I,h),D=z.indexOf("-",P);D>0&&(z=z.substr(0,D));var k=x.d2c(z,0,h);if(k<F){var O=a(k,R,!1,h);(k+O)/2<F+l&&(k=O)}return _&&E?a(k,R,!0,h):k}}return function(F,_){var z=w*Math.round(F/w);return z+w/10<F&&z+.9*w<F+l&&(z+=w),_&&E&&(z-=w),z}}},94106:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(97799),T=e(91464),n=e(92811),i=e(14482),u=e(32519),a=e(3950),r=e(87763);function v(y,s,x,h,g){var S,w,E,P,R,F,_,m=h+"bins",d=y._fullLayout,A=s["_"+h+"bingroup"],b=d._histogramBinOpts[A],c="overlay"===d.barmode,z=function(be){return x.r2c(be,0,P)},D=function(be){return x.c2r(be,0,P)},k="date"===x.type?function(be){return be||0===be?I.cleanDate(be,null,P):null}:function(be){return M(be)?Number(be):null};function O(be,De,_e){De[be+"Found"]?(De[be]=k(De[be]),null===De[be]&&(De[be]=_e[be])):(F[be]=De[be]=_e[be],I.nestedProperty(w[0],m+"."+be).set(_e[be]))}if(s["_"+h+"autoBinFinished"])delete s["_"+h+"autoBinFinished"];else{w=b.traces;var U=[],H=!0,j=!1,ee=!1;for(S=0;S<w.length;S++)if((E=w[S]).visible){var W=b.dirs[S];R=E["_"+W+"pos0"]=x.makeCalcdata(E,W),U=I.concat(U,R),delete E["_"+h+"autoBinFinished"],!0===s.visible&&(H?H=!1:(delete E._autoBin,E["_"+h+"autoBinFinished"]=1),t.traceIs(E,"2dMap")&&(j=!0),"histogram2dcontour"===E.type&&(ee=!0))}P=w[0][h+"calendar"];var B=T.autoBin(U,x,b.nbins,j,P,b.sizeFound&&b.size),te=w[0]._autoBin={};if(F=te[b.dirs[0]]={},ee&&(b.size||(B.start=D(T.tickIncrement(z(B.start),B.size,!0,P))),void 0===b.end&&(B.end=D(T.tickIncrement(z(B.end),B.size,!1,P)))),c&&!t.traceIs(s,"2dMap")&&0===B._dataSpan&&"category"!==x.type&&"multicategory"!==x.type&&""===s.bingroup&&typeof s.xbins>"u"){if(g)return[B,R,!0];B=function p(y,s,x,h,g){var S,w,E,m=y._fullLayout,d=function f(y,s){for(var x=s.xaxis,h=s.yaxis,g=s.orientation,m=[],d=y._fullData,A=0;A<d.length;A++){var b=d[A];"histogram"===b.type&&!0===b.visible&&b.orientation===g&&b.xaxis===x&&b.yaxis===h&&m.push(b)}return m}(y,s),A=!1,b=1/0,c=[s];for(S=0;S<d.length;S++)if((w=d[S])===s)A=!0;else if(A){var P=v(y,w,x,h,!0),R=P[0],F=P[2];w["_"+h+"autoBinFinished"]=1,w["_"+h+"pos0"]=P[1],F?c.push(w):b=Math.min(b,R.size)}else E=m._histogramBinOpts[w["_"+h+"bingroup"]],b=Math.min(b,E.size||w[g].size);var _=new Array(c.length);for(S=0;S<c.length;S++)for(var z=c[S]["_"+h+"pos0"],D=0;D<z.length;D++)if(void 0!==z[D]){_[S]=z[D];break}for(isFinite(b)||(b=I.distinctVals(_).minDiff),S=0;S<c.length;S++){var k=(w=c[S])[h+"calendar"],O={start:x.c2r(_[S]-b/2,0,k),end:x.c2r(_[S]+b/2,0,k),size:b};w._input[g]=w[g]=O,(E=m._histogramBinOpts[w["_"+h+"bingroup"]])&&I.extendFlat(E,O)}return s[g]}(y,s,x,h,m)}(_=E.cumulative||{}).enabled&&"include"!==_.currentbin&&("decreasing"===_.direction?B.start=D(T.tickIncrement(z(B.start),B.size,!0,P)):B.end=D(T.tickIncrement(z(B.end),B.size,!1,P))),b.size=B.size,b.sizeFound||(F.size=B.size,I.nestedProperty(w[0],m+".size").set(B.size)),O("start",b,B),O("end",b,B)}R=s["_"+h+"pos0"],delete s["_"+h+"pos0"];var q=s._input[m]||{},oe=I.extendFlat({},b),ie=b.start,V=x.r2l(q.start),Y=void 0!==V;if((b.startFound||Y)&&V!==x.r2l(ie)){var ae=Y?V:I.aggNums(Math.min,null,R),X={type:"category"===x.type||"multicategory"===x.type?"linear":x.type,r2l:x.r2l,dtick:b.size,tick0:ie,calendar:P,range:[ae,T.tickIncrement(ae,b.size,!1,P)].map(x.l2r)},J=T.tickFirst(X);J>x.r2l(ae)&&(J=T.tickIncrement(J,b.size,!0,P)),oe.start=x.l2r(J),Y||I.nestedProperty(s,m+".start").set(oe.start)}var ue=b.end,re=x.r2l(q.end),ne=void 0!==re;if((b.endFound||ne)&&re!==x.r2l(ue)){var se=ne?re:I.aggNums(Math.max,null,R);oe.end=x.l2r(se),ne||I.nestedProperty(s,m+".start").set(oe.end)}var de="autobin"+h;return!1===s._input[de]&&(s._input[m]=I.extendFlat({},s[m]||{}),delete s._input[de],delete s[de]),[oe,R]}$.exports={calc:function o(y,s){var S,ee,W,B,x=[],h=[],g="h"===s.orientation,m=T.getFromId(y,g?s.yaxis:s.xaxis),d=g?"y":"x",A={x:"y",y:"x"}[d],b=s[d+"calendar"],c=s.cumulative,w=v(y,s,m,d),E=w[0],P=w[1],R="string"==typeof E.size,F=[],_=R?F:E,z=[],D=[],k=[],O=0,U=s.histnorm,H=s.histfunc,j=-1!==U.indexOf("density");c.enabled&&j&&(U=U.replace(/ ?density$/,""),j=!1);var ae,q="max"===H||"min"===H?null:0,oe=i.count,ie=u[U],V=!1,Y=function(ze){return m.r2c(ze,0,b)};for(I.isArrayOrTypedArray(s[A])&&"count"!==H&&(ae=s[A],V="avg"===H,oe=i[H]),S=Y(E.start),W=Y(E.end)+(S-T.tickIncrement(S,E.size,!1,b))/1e6;S<W&&x.length<1e6&&(ee=T.tickIncrement(S,E.size,!1,b),x.push((S+ee)/2),h.push(q),k.push([]),F.push(S),j&&z.push(1/(ee-S)),V&&D.push(0),!(ee<=S));)S=ee;F.push(S),!R&&"date"===m.type&&(_={start:Y(_.start),end:Y(_.end),size:_.size}),y._fullLayout._roundFnOpts||(y._fullLayout._roundFnOpts={});var X=s["_"+d+"bingroup"],J={leftGap:1/0,rightGap:1/0};X&&(y._fullLayout._roundFnOpts[X]||(y._fullLayout._roundFnOpts[X]=J),J=y._fullLayout._roundFnOpts[X]);var De,ue=h.length,re=!0,ne=J.leftGap,se=J.rightGap,de={};for(S=0;S<P.length;S++){var be=P[S];(B=I.findBin(be,_))>=0&&B<ue&&(O+=oe(B,S,h,ae,D),re&&k[B].length&&be!==P[k[B][0]]&&(re=!1),k[B].push(S),de[S]=B,ne=Math.min(ne,be-F[B]),se=Math.min(se,F[B+1]-be))}J.leftGap=ne,J.rightGap=se,re||(De=function(ze,Pe){return function(){var Ie=y._fullLayout._roundFnOpts[X];return r(Ie.leftGap,Ie.rightGap,F,m,b)(ze,Pe)}}),V&&(O=a(h,D)),ie&&ie(h,O,z),c.enabled&&function l(y,s,x){var h,g,m;function d(b){m=y[b],y[b]/=2}function A(b){g=y[b],y[b]=m+g/2,m+=g}if("half"===x)if("increasing"===s)for(d(0),h=1;h<y.length;h++)A(h);else for(d(y.length-1),h=y.length-2;h>=0;h--)A(h);else if("increasing"===s){for(h=1;h<y.length;h++)y[h]+=y[h-1];"exclude"===x&&(y.unshift(0),y.pop())}else{for(h=y.length-2;h>=0;h--)y[h]+=y[h+1];"exclude"===x&&(y.push(0),y.shift())}}(h,c.direction,c.currentbin);var _e=Math.min(x.length,h.length),Ce=[],Le=0,Fe=_e-1;for(S=0;S<_e;S++)if(h[S]){Le=S;break}for(S=_e-1;S>=Le;S--)if(h[S]){Fe=S;break}for(S=Le;S<=Fe;S++)if(M(x[S])&&M(h[S])){var ke={p:x[S],s:h[S],b:0};c.enabled||(ke.pts=k[S],re?ke.ph0=ke.ph1=k[S].length?P[k[S][0]]:x[S]:(s._computePh=!0,ke.ph0=De(F[S]),ke.ph1=De(F[S+1],!0))),Ce.push(ke)}return 1===Ce.length&&(Ce[0].width1=T.tickIncrement(Ce[0].p,E.size,!1,b)-Ce[0].p),n(Ce,s),I.isArrayOrTypedArray(s.selectedpoints)&&I.tagSelected(Ce,s,de),Ce},calcAllAutoBins:v}},46732:$=>{"use strict";$.exports={eventDataKeys:["binNumber"]}},70200:($,K,e)=>{"use strict";var M=e(5228),I=e(78168),t=e(97799).traceIs,T=e(36711),n=M.nestedProperty,i=e(93698).getAxisGroup,u=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];$.exports=function(o,v){var s,x,h,g,m,d,A,p=v._histogramBinOpts={},f=[],l={},y=[];function b(ee,W){return M.coerce(s._input,s,s._module.attributes,ee,W)}function c(ee){return"v"===ee.orientation?"x":"y"}function w(ee,W,B){var te=ee.uid+"__"+B;W||(W=te);var q=function S(ee,W){return I.getFromTrace({_fullLayout:v},ee,W).type}(ee,B),oe=ee[B+"calendar"]||"",ie=p[W],V=!0;ie&&(q===ie.axType&&oe===ie.calendar?(V=!1,ie.traces.push(ee),ie.dirs.push(B)):(W=te,q!==ie.axType&&M.warn(["Attempted to group the bins of trace",ee.index,"set on a","type:"+q,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),oe!==ie.calendar&&M.warn(["Attempted to group the bins of trace",ee.index,"set with a",oe,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),V&&(p[W]={traces:[ee],dirs:[B],axType:q,calendar:ee[B+"calendar"]||""}),ee["_"+B+"bingroup"]=W}for(m=0;m<o.length;m++)s=o[m],t(s,"histogram")&&(f.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,t(s,"2dMap")||T(s._input,s,v,b));var E=v._alignmentOpts||{};for(m=0;m<f.length;m++){if(s=f[m],h="",!t(s,"2dMap")){if(g=c(s),"group"===v.barmode&&s.alignmentgroup){var P=s[g+"axis"],R=i(v,P)+s.orientation;(E[R]||{})[s.alignmentgroup]&&(h=R)}!h&&"overlay"!==v.barmode&&(h=i(v,s.xaxis)+i(v,s.yaxis)+c(s))}h?(l[h]||(l[h]=[]),l[h].push(s)):y.push(s)}for(h in l)if(1!==(x=l[h]).length){var F=!1;for(x.length&&(s=x[0],F=b("bingroup")),h=F||h,m=0;m<x.length;m++){var _=(s=x[m])._input.bingroup;_&&_!==h&&M.warn(["Trace",s.index,"must match","within bingroup",h+".","Ignoring its bingroup:",_,"setting."].join(" ")),s.bingroup=h,w(s,h,c(s))}}else y.push(x[0]);for(m=0;m<y.length;m++){s=y[m];var z=b("bingroup");if(t(s,"2dMap"))for(A=0;A<2;A++){var D=b((g=a[A])+"bingroup",z?z+"__"+g:null);w(s,D,g)}else w(s,z,c(s))}for(h in p){var k=p[h];for(x=k.traces,d=0;d<u.length;d++){var H,j,O=u[d],U=O.name;if("nbins"!==U||!k.sizeFound){for(m=0;m<x.length;m++){if(s=x[m],g=k.dirs[m],H=O.aStr[g],void 0!==n(s._input,H).get()){k[U]=b(H),k[U+"Found"]=!0;break}(j=(s._autoBin||{})[g]||{})[U]&&n(s,H).set(j[U])}if("start"===U||"end"===U)for(;m<x.length;m++)(s=x[m])["_"+g+"bingroup"]&&b(H,(j=(s._autoBin||{})[g]||{})[U]);"nbins"===U&&!k.sizeFound&&!k.nbinsFound&&(s=x[0],k[U]=b(H))}}}}},62623:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(8416),T=e(74401).handleText,n=e(61115),i=e(16680);$.exports=function(a,r,o,v){function p(S,w){return I.coerce(a,r,i,S,w)}var f=p("x"),l=p("y");p("cumulative.enabled")&&(p("cumulative.direction"),p("cumulative.currentbin")),p("text");var s=p("textposition");T(a,r,v,p,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat");var x=p("orientation",l&&!f?"h":"v"),h="v"===x?"x":"y",g="v"===x?"y":"x",m=f&&l?Math.min(I.minRowLength(f)&&I.minRowLength(l)):I.minRowLength(r[h]||[]);if(m){r._length=m,M.getComponentMethod("calendars","handleTraceDefaults")(a,r,["x","y"],v),r[g]&&p("histfunc"),p("histnorm"),p("autobin"+h),n(a,r,p,o,v),I.coerceSelectionMarkerOpacity(r,p);var b=(r.marker.line||{}).color,c=M.getComponentMethod("errorbars","supplyDefaults");c(a,r,b||t.defaultLine,{axis:"y"}),c(a,r,b||t.defaultLine,{axis:"x",inherit:"y"})}else r.visible=!1}},4423:$=>{"use strict";$.exports=function(e,M,I,t,T){if(e.x="xVal"in M?M.xVal:M.x,e.y="yVal"in M?M.yVal:M.y,"zLabelVal"in M&&(e.z=M.zLabelVal),M.xa&&(e.xaxis=M.xa),M.ya&&(e.yaxis=M.ya),!(I.cumulative||{}).enabled){var i,n=Array.isArray(T)?t[0].pts[T[0]][T[1]]:t[T].pts;if(e.pointNumbers=n,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,I._indexToPoints){i=[];for(var u=0;u<n.length;u++)i=i.concat(I._indexToPoints[n[u]])}else i=n;e.pointIndices=i}return e}},15440:($,K,e)=>{"use strict";var M=e(54283).hoverPoints,I=e(91464).hoverLabelText;$.exports=function(T,n,i,u,a){var r=M(T,n,i,u,a);if(r){var o=(T=r[0]).cd[T.index],v=T.cd[0].trace;if(!v.cumulative.enabled){var p="h"===v.orientation?"y":"x";T[p+"Label"]=I(T[p+"a"],[o.ph0,o.ph1],v[p+"hoverformat"])}return r}}},23053:($,K,e)=>{"use strict";$.exports={attributes:e(16680),layoutAttributes:e(32518),supplyDefaults:e(62623),crossTraceDefaults:e(70200),supplyLayoutDefaults:e(1865),calc:e(94106).calc,crossTraceCalc:e(23870).crossTraceCalc,plot:e(23038).plot,layerName:"barlayer",style:e(82563).style,styleOnSelect:e(82563).styleOnSelect,colorbar:e(74899),hoverPoints:e(15440),selectPoints:e(85499),eventData:e(4423),moduleType:"trace",name:"histogram",basePlotModule:e(24329),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}}},32519:$=>{"use strict";$.exports={percent:function(K,e){for(var M=K.length,I=100/e,t=0;t<M;t++)K[t]*=I},probability:function(K,e){for(var M=K.length,I=0;I<M;I++)K[I]/=e},density:function(K,e,M,I){var t=K.length;I=I||1;for(var T=0;T<t;T++)K[T]*=M[T]*I},"probability density":function(K,e,M,I){var t=K.length;I&&(e/=I);for(var T=0;T<t;T++)K[T]*=M[T]/e}}},20792:($,K,e)=>{"use strict";var M=e(16680),I=e(58435),t=e(63726),T=e(82684),n=e(88489).axisHoverFormat,i=e(9430).fF,u=e(9430).si,a=e(567),r=e(18836).extendFlat;$.exports=r({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},marker:{color:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:I("x"),nbinsy:M.nbinsy,ybins:I("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:r({},M.bingroup,{description:["Set the `xbingroup` and `ybingroup` default prefix","For example, setting a `bingroup` of *1* on two histogram2d traces","will make them their x-bins and y-bins match separately."].join(" ")}),xbingroup:r({},M.bingroup,{description:["Set a group of histogram traces which will have compatible x-bin settings.","Using `xbingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible x-bin settings.","Note that the same `xbingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),ybingroup:r({},M.bingroup,{description:["Set a group of histogram traces which will have compatible y-bin settings.","Using `ybingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible y-bin settings.","Note that the same `ybingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),xgap:t.xgap,ygap:t.ygap,zsmooth:t.zsmooth,xhoverformat:n("x"),yhoverformat:n("y"),zhoverformat:n("z",1),hovertemplate:i({},{keys:"z"}),texttemplate:u({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:t.textfont,showlegend:r({},T.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},36952:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(14482),T=e(32519),n=e(3950),i=e(87763),u=e(94106).calcAllAutoBins;function a(v,p,f,l){var s,y=new Array(v);if(l)for(s=0;s<v;s++)y[s]=1/(p[s+1]-p[s]);else{var x=1/f;for(s=0;s<v;s++)y[s]=x}return y}function r(v,p){return{start:v(p.start),end:v(p.end),size:p.size}}function o(v,p,f,l,y,s){var x,h=v.length-1,g=new Array(h),m=i(f,l,v,y,s);for(x=0;x<h;x++){var d=(p||[])[x];g[x]=void 0===d?[m(v[x]),m(v[x+1],!0)]:[d,d]}return g}$.exports=function(p,f){var A,b,c,S,l=I.getFromId(p,f.xaxis),y=I.getFromId(p,f.yaxis),s=f.xcalendar,x=f.ycalendar,h=function(st){return l.r2c(st,0,s)},g=function(st){return y.r2c(st,0,x)},w=u(p,f,l,"x"),E=w[0],P=w[1],R=u(p,f,y,"y"),F=R[0],_=R[1],z=f._length;P.length>z&&P.splice(z,P.length-z),_.length>z&&_.splice(z,_.length-z);var D=[],k=[],O=[],U="string"==typeof E.size,H="string"==typeof F.size,j=[],ee=[],W=U?j:E,B=H?ee:F,te=0,q=[],oe=[],ie=f.histnorm,V=f.histfunc,Y=-1!==ie.indexOf("density"),X="max"===V||"min"===V?null:0,J=t.count,ue=T[ie],re=!1,ne=[],se=[],de="z"in f?f.z:"marker"in f&&Array.isArray(f.marker.color)?f.marker.color:"";de&&"count"!==V&&(re="avg"===V,J=t[V]);var be=E.size,De=h(E.start),_e=h(E.end)+(De-I.tickIncrement(De,be,!1,s))/1e6;for(A=De;A<_e;A=I.tickIncrement(A,be,!1,s))k.push(X),j.push(A),re&&O.push(0);j.push(A);var st,Ce=k.length,Le=(A-De)/Ce,Fe=(st=De+Le/2,l.c2r(st,0,s)),ke=F.size,ze=g(F.start),Pe=g(F.end)+(ze-I.tickIncrement(ze,ke,!1,x))/1e6;for(A=ze;A<Pe;A=I.tickIncrement(A,ke,!1,x)){D.push(k.slice()),ee.push(A);var Ie=new Array(Ce);for(b=0;b<Ce;b++)Ie[b]=[];oe.push(Ie),re&&q.push(O.slice())}ee.push(A);var Qe=D.length,at=(A-ze)/Qe,Be=function(st){return y.c2r(st,0,x)}(ze+at/2);Y&&(ne=a(k.length,W,Le,U),se=a(D.length,B,at,H)),!U&&"date"===l.type&&(W=r(h,W)),!H&&"date"===y.type&&(B=r(g,B));var Ne=!0,nt=!0,ct=new Array(Ce),mt=new Array(Qe),Bt=1/0,Rt=1/0,zt=1/0,St=1/0;for(A=0;A<z;A++){var Xt=P[A],Mt=_[A];c=M.findBin(Xt,W),S=M.findBin(Mt,B),c>=0&&c<Ce&&S>=0&&S<Qe&&(te+=J(c,A,D[S],de,q[S]),oe[S][c].push(A),Ne&&(void 0===ct[c]?ct[c]=Xt:ct[c]!==Xt&&(Ne=!1)),nt&&(void 0===mt[S]?mt[S]=Mt:mt[S]!==Mt&&(nt=!1)),Bt=Math.min(Bt,Xt-j[c]),Rt=Math.min(Rt,j[c+1]-Xt),zt=Math.min(zt,Mt-ee[S]),St=Math.min(St,ee[S+1]-Mt))}if(re)for(S=0;S<Qe;S++)te+=n(D[S],q[S]);if(ue)for(S=0;S<Qe;S++)ue(D[S],te,ne,se[S]);return{x:P,xRanges:o(j,Ne&&ct,Bt,Rt,l,s),x0:Fe,dx:Le,y:_,yRanges:o(ee,nt&&mt,zt,St,y,x),y0:Be,dy:at,z:D,pts:oe}}},36685:($,K,e)=>{"use strict";var M=e(5228),I=e(95480),t=e(90347),T=e(14739),n=e(35411),i=e(20792);$.exports=function(a,r,o,v){function p(f,l){return M.coerce(a,r,i,f,l)}I(a,r,p,v),!1!==r.visible&&(t(a,r,p,v),T(a,r,v,p,{prefix:"",cLetter:"z"}),p("hovertemplate"),n(p,v),p("xhoverformat"),p("yhoverformat"))}},55383:($,K,e)=>{"use strict";var M=e(22996),I=e(91464).hoverLabelText;$.exports=function(T,n,i,u,a){var r=M(T,n,i,u,a);if(r){var o=(T=r[0]).index,v=o[0],p=o[1],f=T.cd[0],l=f.trace,y=f.xRanges[p],s=f.yRanges[v];return T.xLabel=I(T.xa,[y[0],y[1]],l.xhoverformat),T.yLabel=I(T.ya,[s[0],s[1]],l.yhoverformat),r}}},77605:($,K,e)=>{"use strict";$.exports={attributes:e(20792),supplyDefaults:e(36685),crossTraceDefaults:e(70200),calc:e(15576),plot:e(63996),layerName:"heatmaplayer",colorbar:e(36661),style:e(61829),hoverPoints:e(55383),eventData:e(4423),moduleType:"trace",name:"histogram2d",basePlotModule:e(24329),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{hrName:"histogram_2d",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a heatmap."].join(" ")}}},95480:($,K,e)=>{"use strict";var M=e(97799),I=e(5228);$.exports=function(T,n,i,u){var a=i("x"),r=i("y"),o=I.minRowLength(a),v=I.minRowLength(r);o&&v?(n._length=Math.min(o,v),M.getComponentMethod("calendars","handleTraceDefaults")(T,n,["x","y"],u),(i("z")||i("marker.color"))&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")):n.visible=!1}},8645:($,K,e)=>{"use strict";var M=e(20792),I=e(5763),t=e(567),T=e(88489).axisHoverFormat,n=e(18836).extendFlat;$.exports=n({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:I.autocontour,ncontours:I.ncontours,contours:I.contours,line:{color:I.line.color,width:n({},I.line.width,{dflt:.5,description:"Sets the contour line width in (in px)"}),dash:I.line.dash,smoothing:I.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:I.texttemplate,textfont:I.textfont},t("",{cLetter:"z",editTypeOverride:"calc"}))},91225:($,K,e)=>{"use strict";var M=e(5228),I=e(95480),t=e(32042),T=e(40920),n=e(35411),i=e(8645);$.exports=function(a,r,o,v){function p(l,y){return M.coerce(a,r,i,l,y)}I(a,r,p,v),!1!==r.visible&&(t(a,r,p,function f(l){return M.coerce2(a,r,i,l)}),T(a,r,p,v),p("xhoverformat"),p("yhoverformat"),p("hovertemplate"),r.contours&&"heatmap"===r.contours.coloring&&n(p,v))}},59490:($,K,e)=>{"use strict";$.exports={attributes:e(8645),supplyDefaults:e(91225),crossTraceDefaults:e(70200),calc:e(47676),plot:e(34120).plot,layerName:"contourlayer",style:e(57327),colorbar:e(81060),hoverPoints:e(86140),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(24329),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{hrName:"histogram_2d_contour",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a contour plot."].join(" ")}}},779:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(9430).si,t=e(567),T=e(47472).Y,n=e(23441),i=e(36772),u=e(66513),a=e(84036),r=e(18836).extendFlat,o=e(65822).u;$.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot",description:["When set in conjunction with `tiling.flip`, determines on","which side the root nodes are drawn in the chart. If","`tiling.orientation` is *v* and `tiling.flip` is **, the root","nodes appear at the top. If `tiling.orientation` is *v* and","`tiling.flip` is *y*, the root nodes appear at the bottom. If","`tiling.orientation` is *h* and `tiling.flip` is **, the","root nodes appear at the left. If `tiling.orientation` is *h*","and `tiling.flip` is *x*, the root nodes appear at the right."].join(" ")},flip:u.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:r({colors:i.marker.colors,line:i.marker.line,pattern:o,editType:"calc"},t("marker",{colorAttr:"colors",anim:!1})),leaf:i.leaf,pathbar:u.pathbar,text:n.text,textinfo:i.textinfo,texttemplate:I({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:n.hovertext,hoverinfo:i.hoverinfo,hovertemplate:M({},{keys:a.eventDataKeys}),textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:u.outsidetextfont,textposition:u.textposition,sort:n.sort,root:i.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},99100:($,K,e)=>{"use strict";var M=e(31556);K.name="icicle",K.plot=function(I,t,T,n){M.plotBasePlot(K.name,I,t,T,n)},K.clean=function(I,t,T,n){M.cleanBasePlot(K.name,I,t,T,n)}},19709:($,K,e)=>{"use strict";var M=e(34285);K.y=function(I,t){return M.calc(I,t)},K.T=function(I){return M._runCrossTraceCalc("icicle",I)}},6908:($,K,e)=>{"use strict";var M=e(5228),I=e(779),t=e(8416),T=e(47472).c,n=e(74401).handleText,i=e(98466).TEXTPAD,u=e(20297).handleMarkerDefaults,a=e(45103),r=a.hasColorscale,o=a.handleDefaults;$.exports=function(p,f,l,y){function s(c,S){return M.coerce(p,f,I,c,S)}var x=s("labels"),h=s("parents");if(x&&x.length&&h&&h.length){var g=s("values");g&&g.length?s("branchvalues"):s("count"),s("level"),s("maxdepth"),s("tiling.orientation"),s("tiling.flip"),s("tiling.pad");var m=s("text");s("texttemplate"),f.texttemplate||s("textinfo",M.isArrayOrTypedArray(m)?"text+label":"label"),s("hovertext"),s("hovertemplate");var d=s("pathbar.visible");n(p,f,y,s,"auto",{hasPathbar:d,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("textposition"),u(p,f,y,s);var b=f._hasColorscale=r(p,"marker","colors")||(p.marker||{}).coloraxis;b&&o(p,f,y,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",b?1:.7),f._hovered={marker:{line:{width:2,color:t.contrast(y.paper_bgcolor)}}},d&&(s("pathbar.thickness",f.pathbar.textfont.size+2*i),s("pathbar.side"),s("pathbar.edgeshape")),s("sort"),s("root.color"),T(f,y,s),f._length=null}else f.visible=!1}},32424:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(88565),n=e(90829),i=e(45556).styleOne,u=e(84036),a=e(50797),r=e(48113),o=e(56446).formatSliceLabel,v=!1;$.exports=function(f,l,y,s,x){var h=x.width,g=x.height,m=x.viewX,d=x.viewY,A=x.pathSlice,b=x.toMoveInsideSlice,c=x.strTransform,S=x.hasTransition,w=x.handleSlicesExit,E=x.makeUpdateSliceInterpolator,P=x.makeUpdateTextInterpolator,R=x.prevEntry,_=f._context.staticPlot,z=f._fullLayout,k=l[0].trace,O=-1!==k.textposition.indexOf("left"),U=-1!==k.textposition.indexOf("right"),H=-1!==k.textposition.indexOf("bottom"),ee=n(y,[h,g],{flipX:k.tiling.flip.indexOf("x")>-1,flipY:k.tiling.flip.indexOf("y")>-1,orientation:k.tiling.orientation,pad:{inner:k.tiling.pad},maxDepth:k._maxDepth}).descendants(),W=1/0,B=-1/0;ee.forEach(function(V){var Y=V.depth;Y>=k._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(W=Math.min(W,Y),B=Math.max(B,Y))}),s=s.data(ee,a.getPtId),k._maxVisibleLayers=isFinite(B)?B-W+1:0,s.enter().append("g").classed("slice",!0),w(s,v,{},[h,g],A),s.order();var te=null;if(S&&R){var q=a.getPtId(R);s.each(function(V){null===te&&a.getPtId(V)===q&&(te={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var oe=function(){return te||{x0:0,x1:h,y0:0,y1:g}},ie=s;return S&&(ie=ie.transition().each("end",function(){var V=M.select(this);a.setSliceCursor(V,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ie.each(function(V){V._x0=m(V.x0),V._x1=m(V.x1),V._y0=d(V.y0),V._y1=d(V.y1),V._hoverX=m(V.x1-k.tiling.pad),V._hoverY=d(H?V.y1-k.tiling.pad/2:V.y0+k.tiling.pad/2);var Y=M.select(this),ae=I.ensureSingle(Y,"path","surface",function(re){re.style("pointer-events",_?"none":"all")});S?ae.transition().attrTween("d",function(re){var ne=E(re,v,oe(),[h,g],{orientation:k.tiling.orientation,flipX:k.tiling.flip.indexOf("x")>-1,flipY:k.tiling.flip.indexOf("y")>-1});return function(se){return A(ne(se))}}):ae.attr("d",A),Y.call(r,y,f,l,{styleOne:i,eventDataKeys:u.eventDataKeys,transitionTime:u.CLICK_TRANSITION_TIME,transitionEasing:u.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,f,{isTransitioning:f._transitioning}),ae.call(i,V,k,f,{hovered:!1}),V.x0===V.x1||V.y0===V.y1?V._text="":V._text=o(V,y,k,l,z)||"";var X=I.ensureSingle(Y,"g","slicetext"),J=I.ensureSingle(X,"text","",function(re){re.attr("data-notex",1)}),ue=I.ensureUniformFontSize(f,a.determineTextFont(k,V,z.font));J.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",U?"end":O?"start":"middle").call(t.font,ue).call(T.convertToTspans,f),V.textBB=t.bBox(J.node()),V.transform=b(V,{fontSize:ue.size}),V.transform.fontSize=ue.size,S?J.transition().attrTween("transform",function(re){var ne=P(re,v,oe(),[h,g]);return function(se){return c(ne(se))}}):J.attr("transform",c(V))}),te}},65812:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"icicle",basePlotModule:e(99100),categories:[],animatable:!0,attributes:e(779),layoutAttributes:e(10545),supplyDefaults:e(6908),supplyLayoutDefaults:e(17685),calc:e(19709).y,crossTraceCalc:e(19709).T,plot:e(34690),style:e(45556).style,colorbar:e(74899),meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The icicle sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}},10545:$=>{"use strict";$.exports={iciclecolorway:{valType:"colorlist",editType:"calc",description:["Sets the default icicle slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendiciclecolors`."].join(" ")},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the icicle slice colors (whether given by `iciclecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},17685:($,K,e)=>{"use strict";var M=e(5228),I=e(10545);$.exports=function(T,n){function i(u,a){return M.coerce(T,n,I,u,a)}i("iciclecolorway",n.colorway),i("extendiciclecolors")}},90829:($,K,e)=>{"use strict";var M=e(32906),I=e(58521);$.exports=function(T,n,i){var u=i.flipX,a=i.flipY,r="h"===i.orientation,o=i.maxDepth,v=n[0],p=n[1];o&&(v=(T.height+1)*n[0]/Math.min(T.height+1,o),p=(T.height+1)*n[1]/Math.min(T.height+1,o));var f=M.partition().padding(i.pad.inner).size(r?[n[1],v]:[n[0],p])(T);return(r||u||a)&&I(f,n,{swapXY:r,flipX:u,flipY:a}),f}},34690:($,K,e)=>{"use strict";var M=e(6405),I=e(32424);$.exports=function(T,n,i,u){return M(T,n,i,u,{type:"icicle",drawDescendants:I})}},45556:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(5228),T=e(99771).resizeText,n=e(9101);function u(a,r,o,v){var p=r.data.data,f=!r.children,l=p.i,y=t.castOption(o,l,"marker.line.color")||I.defaultLine,s=t.castOption(o,l,"marker.line.width")||0;a.call(n,r,o,v).style("stroke-width",s).call(I.stroke,y).style("opacity",f?o.leaf.opacity:null)}$.exports={style:function i(a){var r=a._fullLayout._iciclelayer.selectAll(".trace");T(a,r,"icicle"),r.each(function(o){var v=M.select(this),f=o[0].trace;v.style("opacity",f.opacity),v.selectAll("path.surface").each(function(l){M.select(this).call(u,l,f,a)})})},styleOne:u}},37555:($,K,e)=>{"use strict";for(var M=e(82684),I=e(9430).fF,t=e(18836).extendFlat,T=e(7240).colormodel,n=["rgb","rgba","rgba256","hsl","hsla"],i=[],u=[],a=0;a<n.length;a++){var r=T[n[a]];i.push("For the `"+n[a]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),u.push("For the `"+n[a]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}$.exports=t({source:{valType:"string",editType:"calc",description:["Specifies the data URI of the image to be visualized.",'The URI consists of "data:image/[<media subtype>][;base64],<data>"'].join(" ")},z:{valType:"data_array",editType:"calc",description:["A 2-dimensional array in which each element is an array of 3 or 4 numbers representing a color."].join(" ")},colormodel:{valType:"enumerated",values:n,editType:"calc",description:["Color model used to map the numerical color components described in `z` into colors.","If `source` is specified, this attribute will be set to `rgba256`","otherwise it defaults to `rgb`."].join(" ")},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot",description:["Picks a smoothing algorithm used to smooth `z` data.","This only applies for image traces that use the `source` attribute."].join(" ")},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the lower bound for each color component.","Note that the default value will depend on the colormodel.",i.join(" ")].join(" ")},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the higher bound for each color component.","Note that the default value will depend on the colormodel.",u.join(" ")].join(" ")},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Set the image's x position. The left edge of the image","(or the right edge if the x axis is reversed or dx is negative)","will be found at xmin=x0-dx/2"].join(" ")},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Set the image's y position. The top edge of the image","(or the bottom edge if the y axis is NOT reversed or if dy is negative)","will be found at ymin=y0-dy/2. By default when an image trace is","included, the y axis will be reversed so that the image is right-side-up,","but you can disable this by setting yaxis.autorange=true or by providing","an explicit y axis range."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's horizontal size."},dy:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's vertical size"},text:{valType:"data_array",editType:"plot",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"plot",description:"Same as `text`."},hoverinfo:t({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:I({},{keys:["z","color","colormodel"]}),transforms:void 0})},66456:($,K,e)=>{"use strict";var M=e(5228),I=e(7240),t=e(7347),T=e(91464),n=e(5228).maxRowLength,i=e(88238).A;function u(o,v,p,f){return function(l){return M.constrain((l-o)*v,p,f)}}function a(o,v){return function(p){return M.constrain(p,o,v)}}$.exports=function(v,p){var f,l;if(p._hasZ)f=p.z.length,l=n(p.z);else if(p._hasSource){var y=i(p.source);f=y.height,l=y.width}var m,s=T.getFromId(v,p.xaxis||"x"),x=T.getFromId(v,p.yaxis||"y"),h=s.d2c(p.x0)-p.dx/2,g=x.d2c(p.y0)-p.dy/2,d=[h,h+l*p.dx],A=[g,g+f*p.dy];if(s&&"log"===s.type)for(m=0;m<l;m++)d.push(h+m*p.dx);if(x&&"log"===x.type)for(m=0;m<f;m++)A.push(g+m*p.dy);return p._extremes[s._id]=T.findExtremes(s,d),p._extremes[x._id]=T.findExtremes(x,A),p._scaler=function r(o){var v=I.colormodel[o.colormodel],p=v.colormodel||o.colormodel,f=p.length;o._sArray=[];for(var l=0;l<f;l++)v.min[l]!==o.zmin[l]||v.max[l]!==o.zmax[l]?o._sArray.push(u(o.zmin[l],(v.max[l]-v.min[l])/(o.zmax[l]-o.zmin[l]),v.min[l],v.max[l])):o._sArray.push(a(v.min[l],v.max[l]));return function(y){for(var s=y.slice(0,f),x=0;x<f;x++){var h=s[x];if(!t(h))return!1;s[x]=o._sArray[x](h)}return s}}(p),[{x0:h,y0:g,z:p.z,w:l,h:f}]}},7240:$=>{"use strict";$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(K){return K.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(K){return K.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(K){return K.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(K){var e=K.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(K){var e=K.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xb0","%","%",""]}}}},5893:($,K,e)=>{"use strict";var M=e(5228),I=e(37555),t=e(7240),T=e(80307).IMAGE_URL_PREFIX;$.exports=function(i,u){function a(v,p){return M.coerce(i,u,I,v,p)}a("source"),u.source&&!u.source.match(T)&&delete u.source,u._hasSource=!!u.source;var o,r=a("z");(u._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length),u._hasZ||u._hasSource)?(a("x0"),a("y0"),a("dx"),a("dy"),u._hasZ?(a("colormodel","rgb"),a("zmin",(o=t.colormodel[u.colormodel]).zminDflt||o.min),a("zmax",o.zmaxDflt||o.max)):u._hasSource&&(u.colormodel="rgba256",o=t.colormodel[u.colormodel],u.zmin=o.zminDflt,u.zmax=o.zmaxDflt),a("zsmooth"),a("text"),a("hovertext"),a("hovertemplate"),u._length=null):u.visible=!1}},48251:$=>{"use strict";$.exports=function(e,M){return"xVal"in M&&(e.x=M.xVal),"yVal"in M&&(e.y=M.yVal),M.xa&&(e.xaxis=M.xa),M.ya&&(e.yaxis=M.ya),e.color=M.color,e.colormodel=M.trace.colormodel,e.z||(e.z=M.color),e}},88238:($,K,e)=>{"use strict";var M=e(31176),I=e(80307).IMAGE_URL_PREFIX,t=e(94007).Buffer;K.A=function(T){var n=T.replace(I,""),i=new t(n,"base64");return M(i)}},3609:($,K,e)=>{"use strict";var M=e(76863),I=e(5228),t=I.isArrayOrTypedArray,T=e(7240);$.exports=function(i,u,a){var r=i.cd[0],o=r.trace,v=i.xa,p=i.ya;if(!(M.inbox(u-r.x0,u-(r.x0+r.w*o.dx),0)>0||M.inbox(a-r.y0,a-(r.y0+r.h*o.dy),0)>0)){var y,f=Math.floor((u-r.x0)/o.dx),l=Math.floor(Math.abs(a-r.y0)/o.dy);if(o._hasZ?y=r.z[l][f]:o._hasSource&&(y=o._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(f,l,1,1).data),y){var x,s=r.hi||o.hoverinfo;if(s){var h=s.split("+");-1!==h.indexOf("all")&&(h=["color"]),-1!==h.indexOf("color")&&(x=!0)}var S,g=T.colormodel[o.colormodel],m=g.colormodel||o.colormodel,d=m.length,A=o._scaler(y),b=g.suffix,c=[];(o.hovertemplate||x)&&(c.push("["+[A[0]+b[0],A[1]+b[1],A[2]+b[2]].join(", ")),4===d&&c.push(", "+A[3]+b[3]),c.push("]"),c=c.join(""),i.extraText=m.toUpperCase()+": "+c),t(o.hovertext)&&t(o.hovertext[l])?S=o.hovertext[l][f]:t(o.text)&&t(o.text[l])&&(S=o.text[l][f]);var w=p.c2p(r.y0+(l+.5)*o.dy),E=r.x0+(f+.5)*o.dx,P=r.y0+(l+.5)*o.dy,R="["+y.slice(0,o.colormodel.length).join(", ")+"]";return[I.extendFlat(i,{index:[l,f],x0:v.c2p(r.x0+f*o.dx),x1:v.c2p(r.x0+(f+1)*o.dx),y0:w,y1:w,color:A,xVal:E,xLabelVal:E,yVal:P,yLabelVal:P,zLabelVal:R,text:S,hovertemplateLabels:{zLabel:R,colorLabel:c,"color[0]Label":A[0]+b[0],"color[1]Label":A[1]+b[1],"color[2]Label":A[2]+b[2],"color[3]Label":A[3]+b[3]}})]}}}},67487:($,K,e)=>{"use strict";$.exports={attributes:e(37555),supplyDefaults:e(5893),calc:e(66456),plot:e(62218),style:e(74038),hoverPoints:e(3609),eventData:e(48251),moduleType:"trace",name:"image",basePlotModule:e(24329),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{description:["Display an image, i.e. data on a 2D regular raster.","By default, when an image is displayed in a subplot,","its y axis will be reversed (ie. `autorange: 'reversed'`),","constrained to the domain (ie. `constrain: 'domain'`)","and it will have the same scale as its x axis (ie. `scaleanchor: 'x,`)","in order for pixels to be rendered as squares."].join(" ")}}},62218:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=I.strTranslate,T=e(70415),n=e(7240),i=e(69585),u=e(44727).STYLE;$.exports=function(r,o,v,p){var f=o.xaxis,l=o.yaxis,y=!r._context._exportedPlot&&i();I.makeTraceGroups(p,v,"im").each(function(s){var x=M.select(this),h=s[0],g=h.trace,m=("fast"===g.zsmooth||!1===g.zsmooth&&y)&&!g._hasZ&&g._hasSource&&"linear"===f.type&&"linear"===l.type;g._realImage=m;var P,R,F,_,z,D,d=h.z,A=h.x0,b=h.y0,c=h.w,S=h.h,w=g.dx,E=g.dy;for(D=0;void 0===P&&D<c;)P=f.c2p(A+D*w),D++;for(D=c;void 0===R&&D>0;)R=f.c2p(A+D*w),D--;for(D=0;void 0===_&&D<S;)_=l.c2p(b+D*E),D++;for(D=S;void 0===z&&D>0;)z=l.c2p(b+D*E),D--;if(R<P&&(F=R,R=P,P=F),z<_&&(F=_,_=z,z=F),!m){var k=.5;P=Math.max(-k*f._length,P),R=Math.min(1.5*f._length,R),_=Math.max(-k*l._length,_),z=Math.min(1.5*l._length,z)}var O=Math.round(R-P),U=Math.round(z-_);if(O<=0||U<=0){x.selectAll("image").data([]).exit().remove()}else{var W=x.selectAll("image").data([s]);W.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),W.exit().remove();var B=!1===g.zsmooth?u:"";if(m){var te=I.simpleMap(f.range,f.r2l),q=I.simpleMap(l.range,l.r2l),oe=te[1]<te[0],ie=q[1]>q[0];if(oe||ie){var V=P+O/2,Y=_+U/2;B+="transform:"+t(V+"px",Y+"px")+"scale("+(oe?-1:1)+","+(ie?-1:1)+")"+t(-V+"px",-Y+"px")+";"}}W.attr("style",B);var ae=new Promise(function(X){if(g._hasZ)X();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===c&&g._canvas.el.height===S&&g._canvas.source===g.source)X();else{var J=document.createElement("canvas");J.width=c,J.height=S;var ue=J.getContext("2d",{willReadFrequently:!0});g._image=g._image||new Image;var re=g._image;re.onload=function(){ue.drawImage(re,0,0),g._canvas={el:J,source:g.source},X()},re.setAttribute("src",g.source)}}).then(function(){var X;if(g._hasZ)X=ee(function(ne,se){var de=d[se][ne];return I.isTypedArray(de)&&(de=Array.from(de)),de}).toDataURL("image/png");else if(g._hasSource)if(m)X=g.source;else{var re=g._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,c,S).data;X=ee(function(ne,se){var de=4*(se*c+ne);return[re[de],re[de+1],re[de+2],re[de+3]]}).toDataURL("image/png")}W.attr({"xlink:href":X,height:U,width:O,x:P,y:_})});r._promises.push(ae)}function ee(X){var J=document.createElement("canvas");J.width=O,J.height=U;var De,ue=J.getContext("2d",{willReadFrequently:!0}),re=function(ze){return I.constrain(Math.round(f.c2p(A+ze*w)-P),0,O)},ne=function(ze){return I.constrain(Math.round(l.c2p(b+ze*E)-_),0,U)},se=n.colormodel[g.colormodel],de=se.colormodel||g.colormodel,be=se.fmt;for(D=0;D<h.w;D++){var _e=re(D),Ce=re(D+1);if(Ce!==_e&&!isNaN(Ce)&&!isNaN(_e))for(var Le=0;Le<h.h;Le++){var Fe=ne(Le),ke=ne(Le+1);ke===Fe||isNaN(ke)||isNaN(Fe)||!X(D,Le)||(De=g._scaler(X(D,Le)),ue.fillStyle=De?de+"("+be(De).join(",")+")":"rgba(0,0,0,0)",ue.fillRect(_e,Fe,Ce-_e,ke-Fe))}}return J}})}},74038:($,K,e)=>{"use strict";var M=e(21572);$.exports=function(t){M.select(t).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},12613:($,K,e)=>{"use strict";var M=e(18836).extendFlat,I=e(18836).extendDeep,t=e(71859).overrideAll,T=e(47297),n=e(36593),i=e(47472).Y,u=e(38330),a=e(96906).templatedArray,r=e(73673),o=e(88489).descriptionOnlyNumbers,v=T({editType:"plot",colorEditType:"plot"}),p={color:{valType:"color",editType:"plot",description:["Sets the background color of the arc."].join(" ")},line:{color:{valType:"color",dflt:n.defaultLine,editType:"plot",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot",description:["Sets the thickness of the bar as a fraction of the total thickness of the gauge."].join(" ")},editType:"calc"},f={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["Sets the range of this axis."].join(" ")},l=a("step",I({},p,{range:f}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number",description:["Determines how the value is displayed on the graph.","`number` displays the value numerically in text.","`delta` displays the difference to a reference value in text.","Finally, `gauge` displays the value graphically on an axis."].join(" ")},value:{valType:"number",editType:"calc",anim:!0,description:["Sets the number to be displayed."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the `text` within the box.","Note that this attribute has no effect if an angular gauge is displayed:","in this case, it is always centered"].join(" ")},domain:i({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot",description:["Sets the title of this indicator."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the title.","It defaults to `center` except for bullet charts","for which it defaults to right."].join(" ")},font:M({},v,{description:["Set the font used to display the title"].join(" ")}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:o("value")},font:M({},v,{description:["Set the font used to display main number"].join(" ")}),prefix:{valType:"string",dflt:"",editType:"plot",description:["Sets a prefix appearing before the number."].join(" ")},suffix:{valType:"string",dflt:"",editType:"plot",description:["Sets a suffix appearing next to the number."].join(" ")},editType:"plot"},delta:{reference:{valType:"number",editType:"calc",description:["Sets the reference value to compute the delta.","By default, it is set to the current value."].join(" ")},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot",description:["Sets the position of delta with respect to the number."].join(" ")},relative:{valType:"boolean",editType:"plot",dflt:!1,description:["Show relative change"].join(" ")},valueformat:{valType:"string",editType:"plot",description:o("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},font:M({},v,{description:["Set the font used to display the delta"].join(" ")}),prefix:{valType:"string",dflt:"",editType:"plot",description:["Sets a prefix appearing before the delta."].join(" ")},suffix:{valType:"string",dflt:"",editType:"plot",description:["Sets a suffix appearing next to the delta."].join(" ")},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"],description:["Set the shape of the gauge"].join(" ")},bar:I({},p,{color:{dflt:"green"},description:["Set the appearance of the gauge's value"].join(" ")}),bgcolor:{valType:"color",editType:"plot",description:"Sets the gauge background color."},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the gauge."},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot",description:"Sets the width (in px) of the border enclosing the gauge."},axis:t({range:f,visible:M({},u.visible,{dflt:!0}),tickmode:u.minor.tickmode,nticks:u.nticks,tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:M({},u.ticks,{dflt:"outside"}),ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,ticklabelstep:u.ticklabelstep,showticklabels:u.showticklabels,labelalias:u.labelalias,tickfont:T({description:"Sets the color bar's tick label font"}),tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,tickprefix:u.tickprefix,showtickprefix:u.showtickprefix,ticksuffix:u.ticksuffix,showticksuffix:u.showticksuffix,separatethousands:u.separatethousands,exponentformat:u.exponentformat,minexponent:u.minexponent,showexponent:u.showexponent,editType:"plot"},"plot"),steps:l,threshold:{line:{color:M({},p.line.color,{description:["Sets the color of the threshold line."].join(" ")}),width:M({},p.line.width,{dflt:1,description:["Sets the width (in px) of the threshold line."].join(" ")}),editType:"plot"},thickness:M({},p.thickness,{dflt:.85,description:["Sets the thickness of the threshold line as a fraction of the thickness of the gauge."].join(" ")}),value:{valType:"number",editType:"calc",dflt:!1,description:["Sets a treshold value drawn as a line."].join(" ")},editType:"plot"},description:"The gauge of the Indicator plot.",editType:"plot"}}},29951:($,K,e)=>{"use strict";var M=e(31556);K.name="indicator",K.plot=function(I,t,T,n){M.plotBasePlot(K.name,I,t,T,n)},K.clean=function(I,t,T,n){M.cleanBasePlot(K.name,I,t,T,n)}},15377:$=>{"use strict";$.exports={calc:function K(e,M){var I=[],t=M.value;"number"!=typeof M._lastValue&&(M._lastValue=M.value);var T=M._lastValue,n=T;return M._hasDelta&&"number"==typeof M.delta.reference&&(n=M.delta.reference),I[0]={y:t,lastY:T,delta:t-n,relativeDelta:(t-n)/n},I}}},73635:$=>{"use strict";$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},5246:($,K,e)=>{"use strict";var M=e(5228),I=e(12613),t=e(47472).c,T=e(96906),n=e(84322),i=e(73635),u=e(61606),a=e(6705),r=e(85357),o=e(72323);function p(f,l){function y(s,x){return M.coerce(f,l,I.gauge.steps,s,x)}y("color"),y("line.color"),y("line.width"),y("range"),y("thickness")}$.exports={supplyDefaults:function v(f,l,y,s){function x(z,D){return M.coerce(f,l,I,z,D)}t(l,s,x),x("mode"),l._hasNumber=-1!==l.mode.indexOf("number"),l._hasDelta=-1!==l.mode.indexOf("delta"),l._hasGauge=-1!==l.mode.indexOf("gauge");var h=x("value");l._range=[0,"number"==typeof h?1.5*h:1];var m,d,A,b,c,S,g=new Array(2);function w(z,D){return M.coerce(A,b,I.gauge,z,D)}function E(z,D){return M.coerce(c,S,I.gauge.axis,z,D)}if(l._hasNumber&&(x("number.valueformat"),x("number.font.color",s.font.color),x("number.font.family",s.font.family),x("number.font.size"),void 0===l.number.font.size&&(l.number.font.size=i.defaultNumberFontSize,g[0]=!0),x("number.prefix"),x("number.suffix"),m=l.number.font.size),l._hasDelta&&(x("delta.font.color",s.font.color),x("delta.font.family",s.font.family),x("delta.font.size"),void 0===l.delta.font.size&&(l.delta.font.size=(l._hasNumber?.5:1)*(m||i.defaultNumberFontSize),g[1]=!0),x("delta.reference",l.value),x("delta.relative"),x("delta.valueformat",l.delta.relative?"2%":""),x("delta.increasing.symbol"),x("delta.increasing.color"),x("delta.decreasing.symbol"),x("delta.decreasing.color"),x("delta.position"),x("delta.prefix"),x("delta.suffix"),d=l.delta.font.size),l._scaleNumbers=(!l._hasNumber||g[0])&&(!l._hasDelta||g[1])||!1,x("title.font.color",s.font.color),x("title.font.family",s.font.family),x("title.font.size",.25*(m||d||i.defaultNumberFontSize)),x("title.text"),l._hasGauge){(A=f.gauge)||(A={}),b=T.newContainer(l,"gauge"),w("shape"),(l._isBullet="bullet"===l.gauge.shape)||x("title.align","center"),(l._isAngular="angular"===l.gauge.shape)||x("align","center"),w("bgcolor",s.paper_bgcolor),w("borderwidth"),w("bordercolor"),w("bar.color"),w("bar.line.color"),w("bar.line.width"),w("bar.thickness",i.valueThickness*("bullet"===l.gauge.shape?.5:1)),n(A,b,{name:"steps",handleItemDefaults:p}),w("threshold.value"),w("threshold.thickness"),w("threshold.line.width"),w("threshold.line.color"),c={},A&&(c=A.axis||{}),S=T.newContainer(b,"axis"),E("visible"),l._range=E("range",l._range);var _={outerTicks:!0};u(c,S,E,"linear"),o(c,S,E,"linear",_),r(c,S,E,"linear",_),a(c,S,E,_)}else x("title.align","center"),x("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},46552:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"indicator",basePlotModule:e(29951),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(12613),supplyDefaults:e(5246).supplyDefaults,calc:e(15377).calc,plot:e(52021),meta:{description:["An indicator is used to visualize a single `value` along with some","contextual information such as `steps` or a `threshold`, using a","combination of three visual elements: a number, a delta, and/or a gauge.","Deltas are taken with respect to a `reference`.","Gauges can be either angular or bullet (aka linear) gauges."].join(" ")}}},52021:($,K,e)=>{"use strict";var M=e(21572),I=e(55609).sX,t=e(55609).k4,T=e(5228),n=T.strScale,i=T.strTranslate,u=T.rad2deg,a=e(94598).MID_SHIFT,r=e(27630),o=e(73635),v=e(88565),p=e(91464),f=e(67178),l=e(74697),y=e(38330),s=e(8416),x={left:"start",center:"middle",right:"end"},h={left:0,center:.5,right:1},g=/[yzafpn\xb5mkMGTPEZY]/;function m(_){return _&&_.duration>0}function c(_){_.each(function(z){s.stroke(M.select(this),z.line.color)}).each(function(z){s.fill(M.select(this),z.color)}).style("stroke-width",function(z){return z.line.width})}function w(_,z,D){var k=_._fullLayout,O=T.extendFlat({type:"linear",ticks:"outside",range:D,showline:!0},z),U={type:"linear",_id:"x"+z._id},H={letter:"x",font:k.font,noHover:!0,noTickson:!0};function j(ee,W){return T.coerce(O,U,y,ee,W)}return f(O,U,j,H,k),l(O,U,j,H),U}function E(_,z,D){return[Math.min(z/_.width,D/_.height),_,z+"x"+D]}function R(_,z,D,k){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),U=M.select(O);return U.text(_).attr("x",0).attr("y",0).attr("text-anchor",D).attr("data-unformatted",_).call(v.convertToTspans,k).call(r.font,z),r.bBox(U.node())}function F(_,z,D,k,O,U){var H="_cache"+z;_[H]&&_[H].key===O||(_[H]={key:O,value:D});var j=T.aggNums(U,null,[_[H].value,k],2);return _[H].value=j,j}$.exports=function(z,D,k,O){var H,U=z._fullLayout;m(k)&&O&&(H=O()),T.makeTraceGroups(U._indicatorlayer,D,"trace").each(function(j){var ue,re,ne,De,_e,W=j[0].trace,B=M.select(this),te=W._hasGauge,q=W._isAngular,oe=W._isBullet,ie=W.domain,V={w:U._size.w*(ie.x[1]-ie.x[0]),h:U._size.h*(ie.y[1]-ie.y[0]),l:U._size.l+U._size.w*ie.x[0],r:U._size.r+U._size.w*(1-ie.x[1]),t:U._size.t+U._size.h*(1-ie.y[1]),b:U._size.b+U._size.h*ie.y[0]},Y=V.l+V.w/2,ae=V.t+V.h/2,X=Math.min(V.w/2,V.h),J=o.innerRadius*X,se=W.align||"center";if(re=ae,te){if(q&&(ue=Y,re=ae+X/2,ne=function(Pe){return function P(_,z){var D=Math.sqrt(_.width/2*(_.width/2)+_.height*_.height),k=z/D;return[k,_,z]}(Pe,.9*J)}),oe){var de=o.bulletPadding,be=1-o.bulletNumberDomainSize+de;ue=V.l+(be+(1-be)*h[se])*V.w,ne=function(Pe){return E(Pe,(o.bulletNumberDomainSize-de)*V.w,V.h)}}}else ue=V.l+h[se]*V.w,ne=function(Pe){return E(Pe,V.w,V.h)};!function b(_,z,D,k){var q,oe,ie,O=D[0].trace,U=k.numbersX,H=k.numbersY,j=O.align||"center",ee=x[j],W=k.transitionOpts,B=k.onComplete,te=T.ensureSingle(z,"g","numbers"),V=[];O._hasNumber&&V.push("number"),O._hasDelta&&(V.push("delta"),"left"===O.delta.position&&V.reverse());var Y=te.selectAll("text").data(V);function ae(_e,Ce,Le,Fe){if(!_e.match("s")||Le>=0==Fe>=0||Ce(Le).slice(-1).match(g)||Ce(Fe).slice(-1).match(g))return Ce;var ke=_e.slice().replace("s","f").replace(/\d+/,function(Pe){return parseInt(Pe)-1}),ze=w(_,{tickformat:ke});return function(Pe){return Math.abs(Pe)<1?p.tickText(ze,Pe).text:Ce(Pe)}}function X(){var _e=w(_,{tickformat:O.number.valueformat},O._range);_e.setScale(),p.prepTicks(_e);var Ce=function(Pe){return p.tickText(_e,Pe).text},Le=O.number.suffix,Fe=O.number.prefix,ke=te.select("text.number");function ze(){var Pe="number"==typeof D[0].y?Fe+Ce(D[0].y)+Le:"-";ke.text(Pe).call(r.font,O.number.font).call(v.convertToTspans,_)}return m(W)?ke.transition().duration(W.duration).ease(W.easing).each("end",function(){ze(),B&&B()}).each("interrupt",function(){ze(),B&&B()}).attrTween("text",function(){var Pe=M.select(this),Ie=t(D[0].lastY,D[0].y);O._lastValue=D[0].y;var Qe=ae(O.number.valueformat,Ce,D[0].lastY,D[0].y);return function(at){Pe.text(Fe+Qe(Ie(at))+Le)}}):ze(),q=R(Fe+Ce(D[0].y)+Le,O.number.font,ee,_),ke}function J(){var _e=w(_,{tickformat:O.delta.valueformat},O._range);_e.setScale(),p.prepTicks(_e);var Ce=function(at){return p.tickText(_e,at).text},Le=O.delta.suffix,Fe=O.delta.prefix,ke=function(at){return O.delta.relative?at.relativeDelta:at.delta},ze=function(at,Be){return 0===at||"number"!=typeof at||isNaN(at)?"-":(at>0?O.delta.increasing.symbol:O.delta.decreasing.symbol)+Fe+Be(at)+Le},Pe=function(at){return at.delta>=0?O.delta.increasing.color:O.delta.decreasing.color};void 0===O._deltaLastValue&&(O._deltaLastValue=ke(D[0]));var Ie=te.select("text.delta");function Qe(){Ie.text(ze(ke(D[0]),Ce)).call(s.fill,Pe(D[0])).call(v.convertToTspans,_)}return Ie.call(r.font,O.delta.font).call(s.fill,Pe({delta:O._deltaLastValue})),m(W)?Ie.transition().duration(W.duration).ease(W.easing).tween("text",function(){var at=M.select(this),Be=ke(D[0]),Ne=O._deltaLastValue,nt=ae(O.delta.valueformat,Ce,Ne,Be),ct=t(Ne,Be);return O._deltaLastValue=Be,function(mt){at.text(ze(ct(mt),nt)),at.call(s.fill,Pe({delta:ct(mt)}))}}).each("end",function(){Qe(),B&&B()}).each("interrupt",function(){Qe(),B&&B()}):Qe(),oe=R(ze(ke(D[0]),Ce),O.delta.font,ee,_),Ie}Y.enter().append("text"),Y.attr("text-anchor",function(){return ee}).attr("class",function(_e){return _e}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Y.exit().remove();var re,ue=O.mode+O.align;if(O._hasDelta&&(re=J(),ue+=O.delta.position+O.delta.font.size+O.delta.font.family+O.delta.valueformat,ue+=O.delta.increasing.symbol+O.delta.decreasing.symbol,ie=oe),O._hasNumber&&(X(),ue+=O.number.font.size+O.number.font.family+O.number.valueformat+O.number.suffix+O.number.prefix,ie=q),O._hasDelta&&O._hasNumber){var de,be,ne=[(q.left+q.right)/2,(q.top+q.bottom)/2],se=[(oe.left+oe.right)/2,(oe.top+oe.bottom)/2],De=.75*O.delta.font.size;"left"===O.delta.position&&(de=F(O,"deltaPos",0,-1*(q.width*h[O.align]+oe.width*(1-h[O.align])+De),ue,Math.min),be=ne[1]-se[1],ie={width:q.width+oe.width+De,height:Math.max(q.height,oe.height),left:oe.left+de,right:q.right,top:Math.min(q.top,oe.top+be),bottom:Math.max(q.bottom,oe.bottom+be)}),"right"===O.delta.position&&(de=F(O,"deltaPos",0,q.width*(1-h[O.align])+oe.width*h[O.align]+De,ue,Math.max),be=ne[1]-se[1],ie={width:q.width+oe.width+De,height:Math.max(q.height,oe.height),left:q.left,right:oe.right+de,top:Math.min(q.top,oe.top+be),bottom:Math.max(q.bottom,oe.bottom+be)}),"bottom"===O.delta.position&&(de=null,be=oe.height,ie={width:Math.max(q.width,oe.width),height:q.height+oe.height,left:Math.min(q.left,oe.left),right:Math.max(q.right,oe.right),top:q.bottom-q.height,bottom:q.bottom+oe.height}),"top"===O.delta.position&&(de=null,be=q.top,ie={width:Math.max(q.width,oe.width),height:q.height+oe.height,left:Math.min(q.left,oe.left),right:Math.max(q.right,oe.right),top:q.bottom-q.height-oe.height,bottom:q.bottom}),re.attr({dx:de,dy:be})}(O._hasNumber||O._hasDelta)&&te.attr("transform",function(){var _e=k.numbersScaler(ie);ue+=_e[2];var Le,Ce=F(O,"numbersScale",1,_e[0],ue,Math.min);O._scaleNumbers||(Ce=1),Le=O._isAngular?H-Ce*ie.bottom:H-Ce*(ie.top+ie.bottom)/2,O._numbersTop=Ce*ie.top+Le;var Fe=ie[j];"center"===j&&(Fe=(ie.left+ie.right)/2);var ke=U-Ce*Fe;return ke=F(O,"numbersTranslate",0,ke,ue,Math.max),i(ke,Le)+n(Ce)})}(z,B,j,{numbersX:ue,numbersY:re,numbersScaler:ne,transitionOpts:k,onComplete:H}),te&&(De={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},_e={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var Ce=B.selectAll("g.angular").data(q?j:[]);Ce.exit().remove();var Le=B.selectAll("g.angularaxis").data(q?j:[]);Le.exit().remove(),q&&function A(_,z,D,k){var J,ue,re,ne,O=D[0].trace,U=k.size,H=k.radius,j=k.innerRadius,ee=k.gaugeBg,W=k.gaugeOutline,B=[U.l+U.w/2,U.t+U.h/2+H/2],te=k.gauge,q=k.layer,oe=k.transitionOpts,ie=k.onComplete,V=Math.PI/2;function Y(Ne){var nt=O.gauge.axis.range[0],mt=(Ne-nt)/(O.gauge.axis.range[1]-nt)*Math.PI-V;return mt<-V?-V:mt>V?V:mt}function ae(Ne){return M.svg.arc().innerRadius((j+H)/2-Ne/2*(H-j)).outerRadius((j+H)/2+Ne/2*(H-j)).startAngle(-V)}function X(Ne){Ne.attr("d",function(nt){return ae(nt.thickness).startAngle(Y(nt.range[0])).endAngle(Y(nt.range[1]))()})}te.enter().append("g").classed("angular",!0),te.attr("transform",i(B[0],B[1])),q.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),q.selectAll("g.xangularaxistick,path,text").remove(),J=w(_,O.gauge.axis),J.type="linear",J.range=O.gauge.axis.range,J._id="xangularaxis",J.ticklabeloverflow="allow",J.setScale();var se=function(Ne){return(J.range[0]-Ne.x)/(J.range[1]-J.range[0])*Math.PI+Math.PI},de={},be=p.makeLabelFns(J,0),De=be.labelStandoff;de.xFn=function(Ne){var nt=se(Ne);return Math.cos(nt)*De},de.yFn=function(Ne){var nt=se(Ne),ct=Math.sin(nt)>0?.2:1;return-Math.sin(nt)*(De+Ne.fontSize*ct)+Math.abs(Math.cos(nt))*(Ne.fontSize*a)},de.anchorFn=function(Ne){var nt=se(Ne),ct=Math.cos(nt);return Math.abs(ct)<.1?"middle":ct>0?"start":"end"},de.heightFn=function(Ne,nt,ct){var mt=se(Ne);return-.5*(1+Math.sin(mt))*ct};var _e=function(Ne){return i(B[0]+H*Math.cos(Ne),B[1]-H*Math.sin(Ne))};re=function(Ne){return _e(se(Ne))};var Ce=function(Ne){var nt=se(Ne);return _e(nt)+"rotate("+-u(nt)+")"};if(ue=p.calcTicks(J),ne=p.getTickSigns(J)[2],J.visible){ne="inside"===J.ticks?-1:1;var Le=(J.linewidth||1)/2;p.drawTicks(_,J,{vals:ue,layer:q,path:"M"+ne*Le+",0h"+ne*J.ticklen,transFn:Ce}),p.drawLabels(_,J,{vals:ue,layer:q,transFn:re,labelFns:de})}var Fe=[ee].concat(O.gauge.steps),ke=te.selectAll("g.bg-arc").data(Fe);ke.enter().append("g").classed("bg-arc",!0).append("path"),ke.select("path").call(X).call(c),ke.exit().remove();var ze=ae(O.gauge.bar.thickness),Pe=te.selectAll("g.value-arc").data([O.gauge.bar]);Pe.enter().append("g").classed("value-arc",!0).append("path");var Ie=Pe.select("path");m(oe)?(Ie.transition().duration(oe.duration).ease(oe.easing).each("end",function(){ie&&ie()}).each("interrupt",function(){ie&&ie()}).attrTween("d",function S(_,z,D){return function(){var k=I(z,D);return function(O){return _.endAngle(k(O))()}}}(ze,Y(D[0].lastY),Y(D[0].y))),O._lastValue=D[0].y):Ie.attr("d","number"==typeof D[0].y?ze.endAngle(Y(D[0].y)):"M0,0Z"),Ie.call(c),Pe.exit().remove(),Fe=[];var Qe=O.gauge.threshold.value;(Qe||0===Qe)&&Fe.push({range:[Qe,Qe],color:O.gauge.threshold.color,line:{color:O.gauge.threshold.line.color,width:O.gauge.threshold.line.width},thickness:O.gauge.threshold.thickness});var at=te.selectAll("g.threshold-arc").data(Fe);at.enter().append("g").classed("threshold-arc",!0).append("path"),at.select("path").call(X).call(c),at.exit().remove();var Be=te.selectAll("g.gauge-outline").data([W]);Be.enter().append("g").classed("gauge-outline",!0).append("path"),Be.select("path").call(X).call(c),Be.exit().remove()}(z,0,j,{radius:X,innerRadius:J,gauge:Ce,layer:Le,size:V,gaugeBg:De,gaugeOutline:_e,transitionOpts:k,onComplete:H});var Fe=B.selectAll("g.bullet").data(oe?j:[]);Fe.exit().remove();var ke=B.selectAll("g.bulletaxis").data(oe?j:[]);ke.exit().remove(),oe&&function d(_,z,D,k){var oe,ie,V,Y,ae,O=D[0].trace,U=k.gauge,H=k.layer,j=k.gaugeBg,ee=k.gaugeOutline,W=k.size,B=O.domain,te=k.transitionOpts,q=k.onComplete;U.enter().append("g").classed("bullet",!0),U.attr("transform",i(W.l,W.t)),H.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),H.selectAll("g.xbulletaxistick,path,text").remove();var X=W.h,J=O.gauge.bar.thickness*X,ue=B.x[0],re=B.x[0]+(B.x[1]-B.x[0])*(O._hasNumber||O._hasDelta?1-o.bulletNumberDomainSize:1);function ne(Le){Le.attr("width",function(Fe){return Math.max(0,oe.c2p(Fe.range[1])-oe.c2p(Fe.range[0]))}).attr("x",function(Fe){return oe.c2p(Fe.range[0])}).attr("y",function(Fe){return.5*(1-Fe.thickness)*X}).attr("height",function(Fe){return Fe.thickness*X})}oe=w(_,O.gauge.axis),oe._id="xbulletaxis",oe.domain=[ue,re],oe.setScale(),ie=p.calcTicks(oe),V=p.makeTransTickFn(oe),Y=p.getTickSigns(oe)[2],ae=W.t+W.h,oe.visible&&(p.drawTicks(_,oe,{vals:"inside"===oe.ticks?p.clipEnds(oe,ie):ie,layer:H,path:p.makeTickPath(oe,ae,Y),transFn:V}),p.drawLabels(_,oe,{vals:ie,layer:H,transFn:V,labelFns:p.makeLabelFns(oe,ae)}));var se=[j].concat(O.gauge.steps),de=U.selectAll("g.bg-bullet").data(se);de.enter().append("g").classed("bg-bullet",!0).append("rect"),de.select("rect").call(ne).call(c),de.exit().remove();var be=U.selectAll("g.value-bullet").data([O.gauge.bar]);be.enter().append("g").classed("value-bullet",!0).append("rect"),be.select("rect").attr("height",J).attr("y",(X-J)/2).call(c),m(te)?be.select("rect").transition().duration(te.duration).ease(te.easing).each("end",function(){q&&q()}).each("interrupt",function(){q&&q()}).attr("width",Math.max(0,oe.c2p(Math.min(O.gauge.axis.range[1],D[0].y)))):be.select("rect").attr("width","number"==typeof D[0].y?Math.max(0,oe.c2p(Math.min(O.gauge.axis.range[1],D[0].y))):0),be.exit().remove();var De=D.filter(function(){return O.gauge.threshold.value||0===O.gauge.threshold.value}),_e=U.selectAll("g.threshold-bullet").data(De);_e.enter().append("g").classed("threshold-bullet",!0).append("line"),_e.select("line").attr("x1",oe.c2p(O.gauge.threshold.value)).attr("x2",oe.c2p(O.gauge.threshold.value)).attr("y1",(1-O.gauge.threshold.thickness)/2*X).attr("y2",(1-(1-O.gauge.threshold.thickness)/2)*X).call(s.stroke,O.gauge.threshold.line.color).style("stroke-width",O.gauge.threshold.line.width),_e.exit().remove();var Ce=U.selectAll("g.gauge-outline").data([ee]);Ce.enter().append("g").classed("gauge-outline",!0).append("rect"),Ce.select("rect").call(ne).call(c),Ce.exit().remove()}(z,0,j,{gauge:Fe,layer:ke,size:V,gaugeBg:De,gaugeOutline:_e,transitionOpts:k,onComplete:H});var ze=B.selectAll("text.title").data(j);ze.exit().remove(),ze.enter().append("text").classed("title",!0),ze.attr("text-anchor",function(){return oe?x.right:x[W.title.align]}).text(W.title.text).call(r.font,W.title.font).call(v.convertToTspans,z),ze.attr("transform",function(){var Ie,Pe=V.l+V.w*h[W.title.align],Qe=o.titlePadding,at=r.bBox(ze.node());if(te){if(q)if(W.gauge.axis.visible){Ie=r.bBox(Le.node()).top-Qe-at.bottom}else Ie=V.t+V.h/2-X/2-at.bottom-Qe;oe&&(Ie=re-(at.top+at.bottom)/2,Pe=V.l-o.bulletPadding*V.w)}else Ie=W._numbersTop-Qe-at.bottom;return i(Pe,Ie)})})}},16636:($,K,e)=>{"use strict";var M=e(567),I=e(88489).axisHoverFormat,t=e(9430).fF,T=e(67787),n=e(82684),i=e(18836).extendFlat,u=e(71859).overrideAll;function a(v){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",v,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",v,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}function r(v){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",v,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}var o=$.exports=u(i({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:a("x"),y:a("y"),z:a("z")},caps:{x:r("x"),y:r("y"),z:r("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:t(),xhoverformat:I("x"),yhoverformat:I("y"),zhoverformat:I("z"),valuehoverformat:I("value",1),showlegend:i({},n.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:i({},n.hoverinfo)}),"calc","nested");o.flatshading.dflt=!0,o.lighting.facenormalsepsilon.dflt=0,o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},11367:($,K,e)=>{"use strict";var M=e(93727),I=e(55957).processGrid,t=e(55957).filter;$.exports=function(n,i){i._len=Math.min(i.x.length,i.y.length,i.z.length,i.value.length),i._x=t(i.x,i._len),i._y=t(i.y,i._len),i._z=t(i.z,i._len),i._value=t(i.value,i._len);var u=I(i);i._gridFill=u.fill,i._Xs=u.Xs,i._Ys=u.Ys,i._Zs=u.Zs,i._len=u.len;for(var a=1/0,r=-1/0,o=0;o<i._len;o++){var v=i._value[o];a=Math.min(a,v),r=Math.max(r,v)}i._minValues=a,i._maxValues=r,i._vMin=void 0===i.isomin||null===i.isomin?a:i.isomin,i._vMax=void 0===i.isomax||null===i.isomin?r:i.isomax,M(n,i,{vals:[i._vMin,i._vMax],containerStr:"",cLetter:"c"})}},28256:($,K,e)=>{"use strict";var M=e(17745).gl_mesh3d,I=e(15989).parseColorScale,t=e(5228).isArrayOrTypedArray,T=e(31936),n=e(45103).extractOpts,i=e(9964),u=function(f,l){for(var y=l.length-1;y>0;y--){var s=Math.min(l[y],l[y-1]),x=Math.max(l[y],l[y-1]);if(x>s&&s<f&&f<=x)return{id:y,distRatio:(x-f)/(x-s)}}return{id:0,distRatio:0}};function a(f,l,y){this.scene=f,this.uid=y,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var r=a.prototype;r.handlePick=function(f){if(f.object===this.mesh){var l=f.data.index,y=this.data._meshX[l],s=this.data._meshY[l],x=this.data._meshZ[l],h=this.data._Ys.length,g=this.data._Zs.length,m=u(y,this.data._Xs).id,d=u(s,this.data._Ys).id,A=u(x,this.data._Zs).id,b=f.index=A+g*d+g*h*m;f.traceCoordinate=[this.data._meshX[b],this.data._meshY[b],this.data._meshZ[b],this.data._value[b]];var c=this.data.hovertext||this.data.text;return t(c)&&void 0!==c[b]?f.textLabel=c[b]:c&&(f.textLabel=c),!0}},r.update=function(f){var l=this.scene,y=l.fullSceneLayout;function s(d,A,b,c){return A.map(function(S){return d.d2l(S,0,c)*b})}this.data=v(f);var g={positions:i(s(y.xaxis,f._meshX,l.dataScale[0],f.xcalendar),s(y.yaxis,f._meshY,l.dataScale[1],f.ycalendar),s(y.zaxis,f._meshZ,l.dataScale[2],f.zcalendar)),cells:i(f._meshI,f._meshJ,f._meshK),lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:T(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading},m=n(f);g.vertexIntensity=f._meshIntensity,g.vertexIntensityBounds=[m.min,m.max],g.colormap=I(f),this.mesh.update(g)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var o=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(f){f._meshI=[],f._meshJ=[],f._meshK=[];var d,A,O,U,H,j,V,l=f.surface.show,y=f.spaceframe.show,s=f.surface.fill,x=f.spaceframe.fill,h=!1,g=!1,m=0,b=f._Xs,c=f._Ys,S=f._Zs,w=b.length,E=c.length,P=S.length,R=o.indexOf(f._gridFill.replace(/-/g,"").replace(/\+/g,"")),F=function(Mt,st,Se){switch(R){case 5:return Se+P*st+P*E*Mt;case 4:return Se+P*Mt+P*w*st;case 3:return st+E*Se+E*P*Mt;case 2:return st+E*Mt+E*w*Se;case 1:return Mt+w*Se+w*P*st;default:return Mt+w*st+w*E*Se}},_=f._minValues,z=f._maxValues,D=f._vMin,k=f._vMax;function ee(Mt,st,Se){for(var pe=j.length,ge=A;ge<pe;ge++)if(Mt===O[ge]&&st===U[ge]&&Se===H[ge])return ge;return-1}function W(){A=d}function B(){O=[],U=[],H=[],j=[],d=0,W()}function te(Mt,st,Se,pe){return O.push(Mt),U.push(st),H.push(Se),j.push(pe),++d-1}function q(Mt,st,Se){return f._meshI.push(Mt),f._meshJ.push(st),f._meshK.push(Se),++m-1}function ie(Mt,st,Se){for(var pe=[],ge=0;ge<Mt.length;ge++)pe[ge]=Mt[ge]*(1-Se)+Se*st[ge];return pe}function Y(Mt){V=Mt}function X(Mt,st){return"all"===Mt||null===Mt||Mt.indexOf(st)>-1}function J(Mt,st){return null===Mt?st:Mt}function ue(Mt,st,Se){W();var pe=[st],ge=[Se];if(V>=1)pe=[st],ge=[Se];else if(V>0){var Oe=function ae(Mt,st){var Se=Mt[0],pe=Mt[1],ge=Mt[2],Oe=function oe(Mt,st,Se){for(var pe=[],ge=0;ge<Mt.length;ge++)pe[ge]=(Mt[ge]+st[ge]+Se[ge])/3;return pe}(Se,pe,ge),we=Math.sqrt(1-V),He=ie(Oe,Se,we),Xe=ie(Oe,pe,we),ut=ie(Oe,ge,we),Ze=st[0],qe=st[1],Dt=st[2];return{xyzv:[[Se,pe,Xe],[Xe,He,Se],[pe,ge,ut],[ut,Xe,pe],[ge,Se,He],[He,ut,ge]],abc:[[Ze,qe,-1],[-1,-1,Ze],[qe,Dt,-1],[-1,-1,qe],[Dt,Ze,-1],[-1,-1,Dt]]}}(st,Se);pe=Oe.xyzv,ge=Oe.abc}for(var we=0;we<pe.length;we++){st=pe[we],Se=ge[we];for(var He=[],Xe=0;Xe<3;Xe++){var ut=st[Xe][0],Ze=st[Xe][1],qe=st[Xe][2],Dt=st[Xe][3],Ft=Se[Xe]>-1?Se[Xe]:ee(ut,Ze,qe);He[Xe]=Ft>-1?Ft:te(ut,Ze,qe,J(Mt,Dt))}q(He[0],He[1],He[2])}}function se(Mt,st,Se,pe){var ge=Mt[3];ge<Se&&(ge=Se),ge>pe&&(ge=pe);for(var Oe=(Mt[3]-ge)/(Mt[3]-st[3]+1e-9),we=[],He=0;He<4;He++)we[He]=(1-Oe)*Mt[He]+Oe*st[He];return we}function de(Mt,st,Se){return Mt>=st&&Mt<=Se}function be(Mt){var st=.001*(k-D);return Mt>=D-st&&Mt<=k+st}function De(Mt){for(var st=[],Se=0;Se<4;Se++){var pe=Mt[Se];st.push([f._x[pe],f._y[pe],f._z[pe],f._value[pe]])}return st}function Ce(Mt,st,Se,pe,ge,Oe){Oe||(Oe=1),Se=[-1,-1,-1];var we=!1,He=[de(st[0][3],pe,ge),de(st[1][3],pe,ge),de(st[2][3],pe,ge)];if(!He[0]&&!He[1]&&!He[2])return!1;var Xe=function(Ze,qe,Dt){return be(qe[0][3])&&be(qe[1][3])&&be(qe[2][3])?(ue(Ze,qe,Dt),!0):Oe<3&&Ce(Ze,qe,Dt,D,k,++Oe)};if(He[0]&&He[1]&&He[2])return Xe(Mt,st,Se)||we;var ut=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Ze){if(He[Ze[0]]&&He[Ze[1]]&&!He[Ze[2]]){var qe=st[Ze[0]],Dt=st[Ze[1]],Ft=st[Ze[2]],bt=se(Ft,qe,pe,ge),Pt=se(Ft,Dt,pe,ge);we=Xe(Mt,[Pt,bt,qe],[-1,-1,Se[Ze[0]]])||we,we=Xe(Mt,[qe,Dt,Pt],[Se[Ze[0]],Se[Ze[1]],-1])||we,ut=!0}}),ut||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Ze){if(He[Ze[0]]&&!He[Ze[1]]&&!He[Ze[2]]){var qe=st[Ze[0]],Dt=st[Ze[1]],Ft=st[Ze[2]],bt=se(Dt,qe,pe,ge),Pt=se(Ft,qe,pe,ge);we=Xe(Mt,[Pt,bt,qe],[-1,-1,Se[Ze[0]]])||we,ut=!0}}),we}function Le(Mt,st,Se,pe){var ge=!1,Oe=De(st),we=[de(Oe[0][3],Se,pe),de(Oe[1][3],Se,pe),de(Oe[2][3],Se,pe),de(Oe[3][3],Se,pe)];if(!(we[0]||we[1]||we[2]||we[3]))return ge;if(we[0]&&we[1]&&we[2]&&we[3])return g&&(ge=function ne(Mt,st,Se){var pe=function(ge,Oe,we){ue(Mt,[st[ge],st[Oe],st[we]],[Se[ge],Se[Oe],Se[we]])};pe(0,1,2),pe(3,0,1),pe(2,3,0),pe(1,2,3)}(Mt,Oe,st)||ge),ge;var He=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Xe){if(we[Xe[0]]&&we[Xe[1]]&&we[Xe[2]]&&!we[Xe[3]]){var ut=Oe[Xe[0]],Ze=Oe[Xe[1]],qe=Oe[Xe[2]],Dt=Oe[Xe[3]];if(g)ge=ue(Mt,[ut,Ze,qe],[st[Xe[0]],st[Xe[1]],st[Xe[2]]])||ge;else{var Ft=se(Dt,ut,Se,pe),bt=se(Dt,Ze,Se,pe),Pt=se(Dt,qe,Se,pe);ge=ue(null,[Ft,bt,Pt],[-1,-1,-1])||ge}He=!0}}),He||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Xe){if(we[Xe[0]]&&we[Xe[1]]&&!we[Xe[2]]&&!we[Xe[3]]){var ut=Oe[Xe[0]],Ze=Oe[Xe[1]],qe=Oe[Xe[2]],Dt=Oe[Xe[3]],Ft=se(qe,ut,Se,pe),bt=se(qe,Ze,Se,pe),Pt=se(Dt,Ze,Se,pe),cr=se(Dt,ut,Se,pe);g?(ge=ue(Mt,[ut,cr,Ft],[st[Xe[0]],-1,-1])||ge,ge=ue(Mt,[Ze,bt,Pt],[st[Xe[1]],-1,-1])||ge):ge=function re(Mt,st,Se){var pe=function(ge,Oe,we){ue(Mt,[st[ge],st[Oe],st[we]],[Se[ge],Se[Oe],Se[we]])};pe(0,1,2),pe(2,3,0)}(null,[Ft,bt,Pt,cr],[-1,-1,-1,-1])||ge,He=!0}}),He)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Xe){if(we[Xe[0]]&&!we[Xe[1]]&&!we[Xe[2]]&&!we[Xe[3]]){var ut=Oe[Xe[0]],Ze=Oe[Xe[1]],qe=Oe[Xe[2]],Dt=Oe[Xe[3]],Ft=se(Ze,ut,Se,pe),bt=se(qe,ut,Se,pe),Pt=se(Dt,ut,Se,pe);g?(ge=ue(Mt,[ut,Ft,bt],[st[Xe[0]],-1,-1])||ge,ge=ue(Mt,[ut,bt,Pt],[st[Xe[0]],-1,-1])||ge,ge=ue(Mt,[ut,Pt,Ft],[st[Xe[0]],-1,-1])||ge):ge=ue(null,[Ft,bt,Pt],[-1,-1,-1])||ge,He=!0}}),ge}function Fe(Mt,st,Se,pe,ge,Oe,we,He,Xe,ut,Ze){var qe=!1;return h&&(X(Mt,"A")&&(qe=Le(null,[st,Se,pe,Oe],ut,Ze)||qe),X(Mt,"B")&&(qe=Le(null,[Se,pe,ge,Xe],ut,Ze)||qe),X(Mt,"C")&&(qe=Le(null,[Se,Oe,we,Xe],ut,Ze)||qe),X(Mt,"D")&&(qe=Le(null,[pe,Oe,He,Xe],ut,Ze)||qe),X(Mt,"E")&&(qe=Le(null,[Se,pe,Oe,Xe],ut,Ze)||qe)),g&&(qe=Le(Mt,[Se,pe,Oe,Xe],ut,Ze)||qe),qe}function ke(Mt,st,Se,pe,ge,Oe,we,He){return[!0===He[0]||Ce(Mt,De([st,Se,pe]),[st,Se,pe],Oe,we),!0===He[1]||Ce(Mt,De([pe,ge,st]),[pe,ge,st],Oe,we)]}function ze(Mt,st,Se,pe,ge,Oe,we,He,Xe){return He?ke(Mt,st,Se,ge,pe,Oe,we,Xe):ke(Mt,Se,ge,pe,st,Oe,we,Xe)}function Pe(Mt,st,Se,pe,ge,Oe,we){var Xe,ut,Ze,qe,He=!1,Dt=function(){He=Ce(Mt,[Xe,ut,Ze],[-1,-1,-1],ge,Oe)||He,He=Ce(Mt,[Ze,qe,Xe],[-1,-1,-1],ge,Oe)||He},Ft=we[0],bt=we[1],Pt=we[2];return Ft&&(Xe=ie(De([F(st,Se-0,pe-0)])[0],De([F(st-1,Se-0,pe-0)])[0],Ft),ut=ie(De([F(st,Se-0,pe-1)])[0],De([F(st-1,Se-0,pe-1)])[0],Ft),Ze=ie(De([F(st,Se-1,pe-1)])[0],De([F(st-1,Se-1,pe-1)])[0],Ft),qe=ie(De([F(st,Se-1,pe-0)])[0],De([F(st-1,Se-1,pe-0)])[0],Ft),Dt()),bt&&(Xe=ie(De([F(st-0,Se,pe-0)])[0],De([F(st-0,Se-1,pe-0)])[0],bt),ut=ie(De([F(st-0,Se,pe-1)])[0],De([F(st-0,Se-1,pe-1)])[0],bt),Ze=ie(De([F(st-1,Se,pe-1)])[0],De([F(st-1,Se-1,pe-1)])[0],bt),qe=ie(De([F(st-1,Se,pe-0)])[0],De([F(st-1,Se-1,pe-0)])[0],bt),Dt()),Pt&&(Xe=ie(De([F(st-0,Se-0,pe)])[0],De([F(st-0,Se-0,pe-1)])[0],Pt),ut=ie(De([F(st-0,Se-1,pe)])[0],De([F(st-0,Se-1,pe-1)])[0],Pt),Ze=ie(De([F(st-1,Se-1,pe)])[0],De([F(st-1,Se-1,pe-1)])[0],Pt),qe=ie(De([F(st-1,Se-0,pe)])[0],De([F(st-1,Se-0,pe-1)])[0],Pt),Dt()),He}function Ie(Mt,st,Se,pe,ge,Oe,we,He,Xe,ut,Ze,qe){var Dt=Mt;return qe?(h&&"even"===Mt&&(Dt=null),Fe(Dt,st,Se,pe,ge,Oe,we,He,Xe,ut,Ze)):(h&&"odd"===Mt&&(Dt=null),Fe(Dt,Xe,He,we,Oe,ge,pe,Se,st,ut,Ze))}function Qe(Mt,st,Se,pe,ge){for(var Oe=[],we=0,He=0;He<st.length;He++)for(var Xe=st[He],ut=1;ut<P;ut++)for(var Ze=1;Ze<E;Ze++)Oe.push(ze(Mt,F(Xe,Ze-1,ut-1),F(Xe,Ze-1,ut),F(Xe,Ze,ut-1),F(Xe,Ze,ut),Se,pe,(Xe+Ze+ut)%2,ge&&ge[we]?ge[we]:[])),we++;return Oe}function at(Mt,st,Se,pe,ge){for(var Oe=[],we=0,He=0;He<st.length;He++)for(var Xe=st[He],ut=1;ut<w;ut++)for(var Ze=1;Ze<P;Ze++)Oe.push(ze(Mt,F(ut-1,Xe,Ze-1),F(ut,Xe,Ze-1),F(ut-1,Xe,Ze),F(ut,Xe,Ze),Se,pe,(ut+Xe+Ze)%2,ge&&ge[we]?ge[we]:[])),we++;return Oe}function Be(Mt,st,Se,pe,ge){for(var Oe=[],we=0,He=0;He<st.length;He++)for(var Xe=st[He],ut=1;ut<E;ut++)for(var Ze=1;Ze<w;Ze++)Oe.push(ze(Mt,F(Ze-1,ut-1,Xe),F(Ze-1,ut,Xe),F(Ze,ut-1,Xe),F(Ze,ut,Xe),Se,pe,(Ze+ut+Xe)%2,ge&&ge[we]?ge[we]:[])),we++;return Oe}function Ne(Mt,st,Se){for(var pe=1;pe<P;pe++)for(var ge=1;ge<E;ge++)for(var Oe=1;Oe<w;Oe++)Ie(Mt,F(Oe-1,ge-1,pe-1),F(Oe-1,ge-1,pe),F(Oe-1,ge,pe-1),F(Oe-1,ge,pe),F(Oe,ge-1,pe-1),F(Oe,ge-1,pe),F(Oe,ge,pe-1),F(Oe,ge,pe),st,Se,(Oe+ge+pe)%2)}function ct(Mt,st,Se){h=!0,Ne(Mt,st,Se),h=!1}function mt(Mt,st,Se,pe,ge,Oe){for(var we=[],He=0,Xe=0;Xe<st.length;Xe++)for(var ut=st[Xe],Ze=1;Ze<P;Ze++)for(var qe=1;qe<E;qe++)we.push(Pe(Mt,ut,qe,Ze,Se,pe,ge[Xe],Oe&&Oe[He]&&Oe[He])),He++;return we}function Bt(Mt,st,Se,pe,ge,Oe){for(var we=[],He=0,Xe=0;Xe<st.length;Xe++)for(var ut=st[Xe],Ze=1;Ze<w;Ze++)for(var qe=1;qe<P;qe++)we.push(Pe(Mt,Ze,ut,qe,Se,pe,ge[Xe],Oe&&Oe[He]&&Oe[He])),He++;return we}function Rt(Mt,st,Se,pe,ge,Oe){for(var we=[],He=0,Xe=0;Xe<st.length;Xe++)for(var ut=st[Xe],Ze=1;Ze<E;Ze++)for(var qe=1;qe<w;qe++)we.push(Pe(Mt,qe,Ze,ut,Se,pe,ge[Xe],Oe&&Oe[He]&&Oe[He])),He++;return we}function zt(Mt,st){for(var Se=[],pe=Mt;pe<st;pe++)Se.push(pe);return Se}return function Xt(){B(),function St(){for(var Mt=0;Mt<w;Mt++)for(var st=0;st<E;st++)for(var Se=0;Se<P;Se++){var pe=F(Mt,st,Se);te(f._x[pe],f._y[pe],f._z[pe],f._value[pe])}}();var Mt=null;if(y&&x&&(Y(x),function nt(Mt,st,Se){g=!0,Ne(Mt,st,Se),g=!1}(Mt,D,k)),l&&s){Y(s);for(var st=f.surface.pattern,Se=f.surface.count,pe=0;pe<Se;pe++){var ge=1===Se?.5:pe/(Se-1),Oe=(1-ge)*D+ge*k,Xe=Math.abs(Oe-_)>Math.abs(Oe-z)?[_,Oe]:[Oe,z];ct(st,Xe[0],Xe[1])}}var ut=[[Math.min(D,z),Math.max(D,z)],[Math.min(_,k),Math.max(_,k)]];["x","y","z"].forEach(function(Ze){for(var qe=[],Dt=0;Dt<ut.length;Dt++){var Ft=0,bt=ut[Dt][0],Pt=ut[Dt][1],cr=f.slices[Ze];if(cr.show&&cr.fill){Y(cr.fill);var Sr=[],Kr=[],It=[];if(cr.locations.length)for(var $t=0;$t<cr.locations.length;$t++){var kr=u(cr.locations[$t],"x"===Ze?b:"y"===Ze?c:S);0===kr.distRatio?Sr.push(kr.id):kr.id>0&&(Kr.push(kr.id),"x"===Ze?It.push([kr.distRatio,0,0]):"y"===Ze?It.push([0,kr.distRatio,0]):It.push([0,0,kr.distRatio]))}else Sr=zt(1,"x"===Ze?w-1:"y"===Ze?E-1:P-1);Kr.length>0&&(qe[Ft]="x"===Ze?mt(Mt,Kr,bt,Pt,It,qe[Ft]):"y"===Ze?Bt(Mt,Kr,bt,Pt,It,qe[Ft]):Rt(Mt,Kr,bt,Pt,It,qe[Ft]),Ft++),Sr.length>0&&(qe[Ft]="x"===Ze?Qe(Mt,Sr,bt,Pt,qe[Ft]):"y"===Ze?at(Mt,Sr,bt,Pt,qe[Ft]):Be(Mt,Sr,bt,Pt,qe[Ft]),Ft++)}var lr=f.caps[Ze];lr.show&&lr.fill&&(Y(lr.fill),qe[Ft]="x"===Ze?Qe(Mt,[0,w-1],bt,Pt,qe[Ft]):"y"===Ze?at(Mt,[0,E-1],bt,Pt,qe[Ft]):Be(Mt,[0,P-1],bt,Pt,qe[Ft]),Ft++)}}),0===m&&B(),f._meshX=O,f._meshY=U,f._meshZ=H,f._meshIntensity=j,f._Xs=b,f._Ys=c,f._Zs=S}(),f}$.exports={findNearestOnAxis:u,generateIsoMeshes:v,createIsosurfaceTrace:function p(f,l){var y=f.glplot.gl,s=M({gl:y}),x=new a(f,s,l.uid);return s._trace=x,x.update(l),f.glplot.add(s),x}}},50295:($,K,e)=>{"use strict";var M=e(5228),I=e(97799),t=e(16636),T=e(14739);function i(u,a,r,o,v){var p=v("isomin"),f=v("isomax");null!=f&&null!=p&&p>f&&(a.isomin=null,a.isomax=null);var l=v("x"),y=v("y"),s=v("z"),x=v("value");l&&l.length&&y&&y.length&&s&&s.length&&x&&x.length?(I.getComponentMethod("calendars","handleTraceDefaults")(u,a,["x","y","z"],o),v("valuehoverformat"),["x","y","z"].forEach(function(A){v(A+"hoverformat");var b="caps."+A;v(b+".show")&&v(b+".fill");var S="slices."+A;v(S+".show")&&(v(S+".fill"),v(S+".locations"))}),v("spaceframe.show")&&v("spaceframe.fill"),v("surface.show")&&(v("surface.count"),v("surface.fill"),v("surface.pattern")),v("contour.show")&&(v("contour.color"),v("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(A){v(A)}),T(u,a,o,v,{prefix:"",cLetter:"c"}),a._length=null):a.visible=!1}$.exports={supplyDefaults:function n(u,a,r,o){i(u,a,r,o,function v(p,f){return M.coerce(u,a,t,p,f)})},supplyIsoDefaults:i}},25289:($,K,e)=>{"use strict";$.exports={attributes:e(16636),supplyDefaults:e(50295).supplyDefaults,calc:e(11367),colorbar:{min:"cmin",max:"cmax"},plot:e(28256).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(9275),categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}},67787:($,K,e)=>{"use strict";var M=e(567),I=e(88489).axisHoverFormat,t=e(9430).fF,T=e(53225),n=e(82684),i=e(18836).extendFlat;$.exports=i({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:t({editType:"calc"}),xhoverformat:I("x"),yhoverformat:I("y"),zhoverformat:I("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:i({},T.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:i({},T.lightposition.x,{dflt:1e5}),y:i({},T.lightposition.y,{dflt:1e5}),z:i({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:i({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},T.lighting),hoverinfo:i({},n.hoverinfo,{editType:"calc"}),showlegend:i({},n.showlegend,{dflt:!1})})},25771:($,K,e)=>{"use strict";var M=e(93727);$.exports=function(t,T){T.intensity&&M(t,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},48875:($,K,e)=>{"use strict";var M=e(17745).gl_mesh3d,I=e(17745).delaunay_triangulate,t=e(17745).alpha_shape,T=e(17745).convex_hull,n=e(15989).parseColorScale,i=e(5228).isArrayOrTypedArray,u=e(31936),a=e(45103).extractOpts,r=e(9964);function o(h,g,m){this.scene=h,this.uid=m,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=o.prototype;function p(h){for(var g=[],m=h.length,d=0;d<m;d++)g[d]=u(h[d]);return g}function f(h,g,m,d){for(var A=[],b=g.length,c=0;c<b;c++)A[c]=h.d2l(g[c],0,d)*m;return A}function l(h){for(var g=[],m=h.length,d=0;d<m;d++)g[d]=Math.round(h[d]);return g}function s(h,g){for(var m=h.length,d=0;d<m;d++)if(h[d]<=-.5||h[d]>=g-.5)return!1;return!0}v.handlePick=function(h){if(h.object===this.mesh){var g=h.index=h.data.index;h.data._cellCenter?h.traceCoordinate=h.data.dataCoordinate:h.traceCoordinate=[this.data.x[g],this.data.y[g],this.data.z[g]];var m=this.data.hovertext||this.data.text;return i(m)&&void 0!==m[g]?h.textLabel=m[g]:m&&(h.textLabel=m),!0}},v.update=function(h){var g=this.scene,m=g.fullSceneLayout;this.data=h;var b,d=h.x.length,A=r(f(m.xaxis,h.x,g.dataScale[0],h.xcalendar),f(m.yaxis,h.y,g.dataScale[1],h.ycalendar),f(m.zaxis,h.z,g.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!s(h.i,d)||!s(h.j,d)||!s(h.k,d))return;b=r(l(h.i),l(h.j),l(h.k))}else b=0===h.alphahull?T(A):h.alphahull>0?t(h.alphahull,A):function y(h,g){for(var m=["x","y","z"].indexOf(h),d=[],A=g.length,b=0;b<A;b++)d[b]=[g[b][(m+1)%3],g[b][(m+2)%3]];return I(d)}(h.delaunayaxis,A);var c={positions:A,cells:b,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:u(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var S=a(h);this.color="#fff";var w=h.intensitymode;c[w+"Intensity"]=h.intensity,c[w+"IntensityBounds"]=[S.min,S.max],c.colormap=n(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],c.vertexColors=p(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],c.cellColors=p(h.facecolor)):(this.color=h.color,c.meshColor=u(h.color));this.mesh.update(c)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function x(h,g){var m=h.glplot.gl,d=M({gl:m}),A=new o(h,d,g.uid);return d._trace=A,A.update(g),h.glplot.add(d),A}},63862:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(14739),T=e(67787);$.exports=function(i,u,a,r){function o(y,s){return I.coerce(i,u,T,y,s)}function v(y){var s=y.map(function(x){var h=o(x);return h&&I.isArrayOrTypedArray(h)?h:null});return s.every(function(x){return x&&x.length===s[0].length})&&s}v(["x","y","z"])?(v(["i","j","k"]),(!u.i||u.j&&u.k)&&(!u.j||u.k&&u.i)&&(!u.k||u.i&&u.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(i,u,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(y){o(y)}),o("contour.show")&&(o("contour.color"),o("contour.width")),"intensity"in i?(o("intensity"),o("intensitymode"),t(i,u,r,o,{prefix:"",cLetter:"c"})):(u.showscale=!1,"facecolor"in i?o("facecolor"):"vertexcolor"in i?o("vertexcolor"):o("color",a)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),u._length=null):u.visible=!1):u.visible=!1}},59805:($,K,e)=>{"use strict";$.exports={attributes:e(67787),supplyDefaults:e(63862),calc:e(25771),colorbar:{min:"cmin",max:"cmax"},plot:e(48875),moduleType:"trace",name:"mesh3d",basePlotModule:e(9275),categories:["gl3d","showLegend"],meta:{description:["Draws sets of triangles with coordinates given by","three 1-dimensional arrays in `x`, `y`, `z` and","(1) a sets of `i`, `j`, `k` indices","(2) Delaunay triangulation or","(3) the Alpha-shape algorithm or","(4) the Convex-hull algorithm"].join(" ")}}},71368:($,K,e)=>{"use strict";var M=e(5228).extendFlat,I=e(55405),t=e(88489).axisHoverFormat,T=e(65822).P,n=e(44777),i=e(73673),u=i.INCREASING.COLOR,a=i.DECREASING.COLOR,r=I.line;function o(v){return{line:{color:M({},r.color,{dflt:v}),width:r.width,dash:T,editType:"style"},editType:"style"}}$.exports={xperiod:I.xperiod,xperiod0:I.xperiod0,xperiodalignment:I.xperiodalignment,xhoverformat:t("x"),yhoverformat:t("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x coordinates.","If absent, linear coordinate will be generated."].join(" ")},open:{valType:"data_array",editType:"calc",description:"Sets the open values."},high:{valType:"data_array",editType:"calc",description:"Sets the high values."},low:{valType:"data_array",editType:"calc",description:"Sets the low values."},close:{valType:"data_array",editType:"calc",description:"Sets the close values."},line:{width:M({},r.width,{description:[r.width,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),dash:M({},T,{description:[T.description,"Note that this style setting can also be set per","direction via `increasing.line.dash` and","`decreasing.line.dash`."].join(" ")}),editType:"style"},increasing:o(u),decreasing:o(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets hover text elements associated with each sample point.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to","this trace's sample points."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc",description:["Sets the width of the open/close tick marks","relative to the *x* minimal interval."].join(" ")},hoverlabel:M({},n.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style",description:["Show hover information (open, close, high, low) in","separate labels."].join(" ")}})}},64243:($,K,e)=>{"use strict";var M=e(5228),I=M._,t=e(91464),T=e(62311),n=e(71103).BADNUM;function u(o,v,p,f){return{o,h:v,l:p,c:f}}function a(o,v,p,f,l,y){for(var s=l.makeCalcdata(v,"open"),x=l.makeCalcdata(v,"high"),h=l.makeCalcdata(v,"low"),g=l.makeCalcdata(v,"close"),m=M.isArrayOrTypedArray(v.text),d=M.isArrayOrTypedArray(v.hovertext),A=!0,b=null,c=!!v.xperiodalignment,S=[],w=0;w<f.length;w++){var E=f[w],P=s[w],R=x[w],F=h[w],_=g[w];if(E!==n&&P!==n&&R!==n&&F!==n&&_!==n){_===P?null!==b&&_!==b&&(A=_>b):A=_>P,b=_;var z=y(P,R,F,_);z.pos=E,z.yc=(P+_)/2,z.i=w,z.dir=A?"increasing":"decreasing",z.x=z.pos,z.y=[F,R],c&&(z.orig_p=p[w]),m&&(z.tx=v.text[w]),d&&(z.htx=v.hovertext[w]),S.push(z)}else S.push({pos:E,empty:!0})}return v._extremes[l._id]=t.findExtremes(l,M.concat(h,x),{padded:!0}),S.length&&(S[0].t={labels:{open:I(o,"open:")+" ",high:I(o,"high:")+" ",low:I(o,"low:")+" ",close:I(o,"close:")+" "}}),S}$.exports={calc:function i(o,v){var p=t.getFromId(o,v.xaxis),f=t.getFromId(o,v.yaxis),l=function r(o,v,p){var f=p._minDiff;if(!f){var s,l=o._fullData,y=[];for(f=1/0,s=0;s<l.length;s++){var x=l[s];if("ohlc"===x.type&&!0===x.visible&&x.xaxis===v._id){y.push(x);var h=v.makeCalcdata(x,"x");x._origX=h;var g=T(p,v,"x",h).vals;x._xcalc=g;var m=M.distinctVals(g).minDiff;m&&isFinite(m)&&(f=Math.min(f,m))}}for(f===1/0&&(f=1),s=0;s<y.length;s++)y[s]._minDiff=f}return f*p.tickwidth}(o,p,v),y=v._minDiff;v._minDiff=null;var s=v._origX;v._origX=null;var x=v._xcalc;v._xcalc=null;var h=a(o,v,s,x,f,u);return v._extremes[p._id]=t.findExtremes(p,x,{vpad:y/2}),h.length?(M.extendFlat(h[0].t,{wHover:y/2,tickLen:l}),h):[{t:{empty:!0}}]},calcCommon:a}},69783:($,K,e)=>{"use strict";var M=e(5228),I=e(14075),t=e(18031),T=e(71368);function n(i,u,a,r){a(r+".line.color"),a(r+".line.width",u.line.width),a(r+".line.dash",u.line.dash)}$.exports=function(u,a,r,o){function v(f,l){return M.coerce(u,a,T,f,l)}I(u,a,v,o)?(t(u,a,o,v,{x:!0}),v("xhoverformat"),v("yhoverformat"),v("line.width"),v("line.dash"),n(u,a,v,"increasing"),n(u,a,v,"decreasing"),v("text"),v("hovertext"),v("tickwidth"),o._requestRangeslider[a.xaxis]=!0):a.visible=!1}},76554:($,K,e)=>{"use strict";var M=e(91464),I=e(5228),t=e(76863),T=e(8416),n=e(5228).fillText,i=e(73673),u={increasing:i.INCREASING.SYMBOL,decreasing:i.DECREASING.SYMBOL};function r(p,f,l,y){var b,c,s=p.cd,x=p.xa,h=s[0].trace,g=s[0].t,m=h.type,d="ohlc"===m?"l":"min",A="ohlc"===m?"h":"max",S=g.bPos||0,E=g.bdPos||g.tickLen,P=g.wHover,R=Math.min(1,E/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));function F(j){var ee=function(j){return j.pos+S-f}(j);return t.inbox(ee-P,ee+P,b)}function _(j){var ee=j[d],W=j[A];return ee===W||t.inbox(ee-l,W-l,b)}function z(j){return(F(j)+_(j))/2}b=p.maxHoverDistance-R,c=p.maxSpikeDistance-R;var D=t.getDistanceFunction(y,F,_,z);if(t.getClosest(s,D,p),!1===p.index)return null;var k=s[p.index];if(k.empty)return null;var U=h[k.dir],H=U.line.color;return T.opacity(H)&&U.line.width?p.color=H:p.color=U.fillcolor,p.x0=x.c2p(k.pos+S-E,!0),p.x1=x.c2p(k.pos+S+E,!0),p.xLabelVal=void 0!==k.orig_p?k.orig_p:k.pos,p.spikeDistance=z(k)*c/b,p.xSpike=x.c2p(k.pos,!0),p}function o(p,f,l,y){var s=p.cd,x=p.ya,h=s[0].trace,g=s[0].t,m=[],d=r(p,f,l,y);if(!d)return[];var c=s[d.index].hi||h.hoverinfo,S=c.split("+");if(!("all"===c||-1!==S.indexOf("y")))return[];for(var P=["high","open","close","low"],R={},F=0;F<P.length;F++){var k,_=P[F],z=h[_][d.index],D=x.c2p(z,!0);z in R?(k=R[z]).yLabel+="<br>"+g.labels[_]+M.hoverLabelText(x,z,h.yhoverformat):((k=I.extendFlat({},d)).y0=k.y1=D,k.yLabelVal=z,k.yLabel=g.labels[_]+M.hoverLabelText(x,z,h.yhoverformat),k.name="",m.push(k),R[z]=k)}return m}function v(p,f,l,y){var s=p.cd,x=p.ya,h=s[0].trace,g=s[0].t,m=r(p,f,l,y);if(!m)return[];var A=s[m.index],b=m.index=A.i,c=A.dir;function S(z){return g.labels[z]+M.hoverLabelText(x,h[z][b],h.yhoverformat)}var w=A.hi||h.hoverinfo,E=w.split("+"),P="all"===w,R=P||-1!==E.indexOf("y"),F=P||-1!==E.indexOf("text"),_=R?[S("open"),S("high"),S("low"),S("close")+"  "+u[c]]:[];return F&&n(A,h,_),m.extraText=_.join("<br>"),m.y0=m.y1=x.c2p(A.yc,!0),[m]}$.exports={hoverPoints:function a(p,f,l,y){return p.cd[0].trace.hoverlabel.split?o(p,f,l,y):v(p,f,l,y)},hoverSplit:o,hoverOnPoints:v}},12686:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(24329),categories:["cartesian","svg","showLegend"],meta:{description:["The ohlc (short for Open-High-Low-Close) is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The tip of the lines represent the `low` and `high` values and","the horizontal segments represent the `open` and `close` values.","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing items are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:e(71368),supplyDefaults:e(69783),calc:e(64243).calc,plot:e(22278),style:e(29131),hoverPoints:e(76554).hoverPoints,selectPoints:e(86005)}},14075:($,K,e)=>{"use strict";var M=e(97799),I=e(5228);$.exports=function(T,n,i,u){var a=i("x"),r=i("open"),o=i("high"),v=i("low"),p=i("close");if(i("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(T,n,["x"],u),r&&o&&v&&p){var l=Math.min(r.length,o.length,v.length,p.length);return a&&(l=Math.min(l,I.minRowLength(a))),n._length=l,l}}},22278:($,K,e)=>{"use strict";var M=e(21572),I=e(5228);$.exports=function(T,n,i,u){var a=n.yaxis,r=n.xaxis,o=!!r.rangebreaks;I.makeTraceGroups(u,i,"trace ohlc").each(function(v){var p=M.select(this),f=v[0],l=f.t;if(!0!==f.trace.visible||l.empty)p.remove();else{var s=l.tickLen,x=p.selectAll("path").data(I.identity);x.enter().append("path"),x.exit().remove(),x.attr("d",function(h){if(h.empty)return"M0,0Z";var g=r.c2p(h.pos-s,!0),m=r.c2p(h.pos+s,!0),d=o?(g+m)/2:r.c2p(h.pos,!0);return"M"+g+","+a.c2p(h.o,!0)+"H"+d+"M"+d+","+a.c2p(h.h,!0)+"V"+a.c2p(h.l,!0)+"M"+m+","+a.c2p(h.c,!0)+"H"+d})}})}},86005:$=>{"use strict";$.exports=function(e,M){var i,I=e.cd,t=e.xaxis,T=e.yaxis,n=[],u=I[0].t.bPos||0;if(!1===M)for(i=0;i<I.length;i++)I[i].selected=0;else for(i=0;i<I.length;i++){var a=I[i];M.contains([t.c2p(a.pos+u),T.c2p(a.yc)],null,a.i,e)?(n.push({pointNumber:a.i,x:t.c2d(a.pos),y:T.c2d(a.yc)}),a.selected=1):a.selected=0}return n}},29131:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(8416);$.exports=function(n,i,u){var a=u||M.select(n).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(r){return r[0].trace.opacity}),a.each(function(r){var o=r[0].trace;M.select(this).selectAll("path").each(function(v){if(!v.empty){var p=o[v.dir].line;M.select(this).style("fill","none").call(t.stroke,p.color).call(I.dashLine,p.dash,p.width).style("opacity",o.selectedpoints&&!v.selected?.3:1)}})})}},97577:($,K,e)=>{"use strict";var M=e(18836).extendFlat,I=e(82684),t=e(47297),T=e(567),n=e(9430).fF,i=e(47472).Y,u=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot",description:["Sets the shape of the paths.","If `linear`, paths are composed of straight lines.","If `hspline`, paths are composed of horizontal curved splines"].join(" ")},hovertemplate:n({editType:"plot",arrayOk:!1},{keys:["count","probability"],description:["This value here applies when hovering over lines."].join(" ")})});$.exports={domain:i({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},I.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot",description:["Sets the hover interaction mode for the parcats diagram.","If `category`, hover interaction take place per category.","If `color`, hover interactions take place per color per category.","If `dimension`, hover interactions take place across all categories per dimension."].join(" ")},hovertemplate:n({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"],description:["This value here applies when hovering over dimensions.","Note that `*categorycount`, *colorcount* and *bandcolorcount*","are only available when `hoveron` contains the *color* flag"].join(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot",description:["Sets the drag interaction mode for categories and dimensions.","If `perpendicular`, the categories can only move along a line perpendicular to the paths.","If `freeform`, the categories can freely move on the plane.","If `fixed`, the categories and dimensions are stationary."].join(" ")},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot",description:"Sort paths so that like colors are bundled together within each category."},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot",description:["Sets the path sorting algorithm.","If `forward`, sort paths based on dimension categories from left to right.","If `backward`, sort paths based on dimensions categories from right to left."].join(" ")},labelfont:t({editType:"calc",description:"Sets the font for the `dimension` labels."}),tickfont:t({editType:"calc",description:"Sets the font for the `category` labels."}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc",description:"The shown name of the dimension."},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the categories in the dimension.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories in this dimension appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},ticktext:{valType:"data_array",editType:"calc",description:["Sets alternative tick labels for the categories in this dimension.","Only has an effect if `categoryorder` is set to *array*.","Should be an array the same length as `categoryarray`","Used with `categoryorder`."].join(" ")},values:{valType:"data_array",dflt:[],editType:"calc",description:["Dimension values. `values[n]` represents the category value of the `n`th point in the dataset,","therefore the `values` vector for all dimensions must be the same (longer vectors","will be truncated)."].join(" ")},displayindex:{valType:"integer",editType:"calc",description:["The display index of dimension, from left to right, zero indexed, defaults to dimension","index."].join(" ")},editType:"calc",description:"The dimensions (variables) of the parallel categories diagram.",visible:{valType:"boolean",dflt:!0,editType:"calc",description:"Shows the dimension when set to `true` (the default). Hides the dimension for `false`."}},line:u,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc",description:["The number of observations represented by each state. Defaults to 1 so that each state represents","one observation"].join(" ")},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},69672:($,K,e)=>{"use strict";var M=e(65644).a0,I=e(41582),t="parcats";K.name=t,K.plot=function(T,n,i,u){var a=M(T.calcdata,t);if(a.length){var r=a[0];I(T,r,i,u)}},K.clean=function(T,n,i,u){var a=u._has&&u._has("parcats"),r=n._has&&n._has("parcats");a&&!r&&u._paperdiv.selectAll(".parcats").remove()}},52099:($,K,e)=>{"use strict";var M=e(47764).wrap,I=e(981).hasColorscale,t=e(93727),T=e(1639),n=e(27630),i=e(5228),u=e(7347);function o(h,g,m,d){return{dimensionInd:h,categoryInd:g,categoryValue:m,displayInd:g,categoryLabel:d,valueInds:[],count:0,dragY:null}}function v(h,g,m){h.valueInds.push(g),h.count+=m}function p(h,g,m){return{categoryInds:h,color:g,rawColor:m,valueInds:[],count:0}}function f(h,g,m){h.valueInds.push(g),h.count+=m}$.exports=function(g,m){var d=i.filterVisible(m.dimensions);if(0===d.length)return[];var b,c,S,A=d.map(function(q){var oe;if("trace"===q.categoryorder)oe=null;else if("array"===q.categoryorder)oe=q.categoryarray;else{oe=T(q.values);for(var ie=!0,V=0;V<oe.length;V++)if(!u(oe[V])){ie=!1;break}oe.sort(ie?i.sorterAsc:void 0),"category descending"===q.categoryorder&&(oe=oe.reverse())}return function l(h,g){g=null==g?[]:g.map(function(E){return E});var m={},d={},A=[];g.forEach(function(E,P){m[E]=0,d[E]=P});for(var b=0;b<h.length;b++){var S,c=h[b];void 0===m[c]?(m[c]=1,S=g.push(c)-1,d[c]=S):(m[c]++,S=d[c]),A.push(S)}var w=g.map(function(E){return m[E]});return{uniqueValues:g,uniqueCounts:w,inds:A}}(q.values,oe)});b=i.isArrayOrTypedArray(m.counts)?m.counts:[m.counts],function y(h){var m,g=h.map(function(d){return d.displayindex});if(function x(h){for(var g=new Array(h.length),m=0;m<h.length;m++){if(h[m]<0||h[m]>=h.length||void 0!==g[h[m]])return!1;g[h[m]]=!0}return!0}(g))for(m=0;m<h.length;m++)h[m]._displayindex=h[m].displayindex;else for(m=0;m<h.length;m++)h[m]._displayindex=m}(d),d.forEach(function(q,oe){!function s(h,g){h._categoryarray=g.uniqueValues,null===h.ticktext||void 0===h.ticktext?h._ticktext=[]:h._ticktext=h.ticktext.slice();for(var m=h._ticktext.length;m<g.uniqueValues.length;m++)h._ticktext.push(g.uniqueValues[m])}(q,A[oe])});var E,w=m.line;w?(I(m,"line")&&t(g,m,{vals:m.line.color,containerStr:"line",cLetter:"c"}),E=n.tryColorscale(w)):E=i.identity;var z,D,q,oe,ie,R=d[0].values.length,F={},_=A.map(function(q){return q.inds});for(S=0,z=0;z<R;z++){var k=[];for(D=0;D<_.length;D++)k.push(_[D][z]);c=b[z%b.length],S+=c;var O=(q=z,oe=void 0,ie=void 0,i.isArrayOrTypedArray(w.color)?ie=oe=w.color[q%w.color.length]:oe=w.color,{color:E(oe),rawColor:ie}),U=k+"-"+O.rawColor;void 0===F[U]&&(F[U]=p(k,O.color,O.rawColor)),f(F[U],z,c)}var H=d.map(function(q,oe){return function r(h,g,m,d,A){return{dimensionInd:h,containerInd:g,displayInd:m,dimensionLabel:d,count:A,categories:[],dragX:null}}(oe,q._index,q._displayindex,q.label,S)});for(z=0;z<R;z++)for(c=b[z%b.length],D=0;D<H.length;D++){var j=H[D].containerInd,ee=A[D].inds[z],W=H[D].categories;if(void 0===W[ee]){var B=m.dimensions[j]._categoryarray[ee],te=m.dimensions[j]._ticktext[ee];W[ee]=o(D,ee,B,te)}v(W[ee],z,c)}return M(function a(h,g,m){var d=h.map(function(A){return A.categories.length}).reduce(function(A,b){return Math.max(A,b)});return{dimensions:h,paths:g,trace:void 0,maxCats:d,count:m}}(H,F,S))}},20234:($,K,e)=>{"use strict";var M=e(5228),I=e(981).hasColorscale,t=e(14739),T=e(47472).c,n=e(84322),i=e(97577),u=e(39548),a=e(90406).isTypedArraySpec;function o(v,p){function f(m,d){return M.coerce(v,p,i.dimensions,m,d)}var l=f("values"),y=f("visible");if(l&&l.length||(y=p.visible=!1),y){f("label"),f("displayindex",p._index);var h,s=v.categoryarray,x=M.isArrayOrTypedArray(s)&&s.length>0||a(s);x&&(h="array");var g=f("categoryorder",h);"array"===g?(f("categoryarray"),f("ticktext")):(delete v.categoryarray,delete v.ticktext),!x&&"array"===g&&(p.categoryorder="trace")}}$.exports=function(p,f,l,y){function s(d,A){return M.coerce(p,f,i,d,A)}var x=n(p,f,{name:"dimensions",handleItemDefaults:o}),h=function r(v,p,f,l,y){y("line.shape"),y("line.hovertemplate");var s=y("line.color",l.colorway[0]);if(I(v,"line")&&M.isArrayOrTypedArray(s)){if(s.length)return y("line.colorscale"),t(v,p,l,y,{prefix:"line.",cLetter:"c"}),s.length;p.line.color=f}return 1/0}(p,f,l,y,s);T(f,y,s),(!Array.isArray(x)||!x.length)&&(f.visible=!1),u(f,x,"values",h),s("hoveron"),s("hovertemplate"),s("arrangement"),s("bundlecolors"),s("sortpaths"),s("counts");var g={family:y.font.family,size:Math.round(y.font.size),color:y.font.color};M.coerceFont(s,"labelfont",g);var m={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};M.coerceFont(s,"tickfont",m)}},84779:($,K,e)=>{"use strict";$.exports={attributes:e(97577),supplyDefaults:e(20234),calc:e(52099),plot:e(41582),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(69672),categories:["noOpacity"],meta:{description:["Parallel categories diagram for multidimensional categorical data."].join(" ")}}},85626:($,K,e)=>{"use strict";var M=e(21572),I=e(55609).k4,t=e(98171),T=e(76863),n=e(5228),i=n.strTranslate,u=e(27630),a=e(80791),r=e(88565);function o(V,Y,ae,X){var J=Y._context.staticPlot,ue=V.map(B.bind(0,Y,ae)),re=X.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",J?"none":"all");var ne=re.selectAll("g.trace.parcats").data(ue,v),se=ne.enter().append("g").attr("class","trace parcats");ne.attr("transform",function(Ie){return i(Ie.x,Ie.y)}),se.append("g").attr("class","paths");var be=ne.select("g.paths").selectAll("path.path").data(function(Ie){return Ie.paths},v);be.attr("fill",function(Ie){return Ie.model.color});var De=be.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.model.color}).attr("fill-opacity",0);g(De),be.attr("d",function(Ie){return Ie.svgD}),De.empty()||be.sort(f),be.exit().remove(),be.on("mouseover",l).on("mouseout",y).on("click",h),se.append("g").attr("class","dimensions");var Ce=ne.select("g.dimensions").selectAll("g.dimension").data(function(Ie){return Ie.dimensions},v);Ce.enter().append("g").attr("class","dimension"),Ce.attr("transform",function(Ie){return i(Ie.x,0)}),Ce.exit().remove();var Le=Ce.selectAll("g.category").data(function(Ie){return Ie.categories},v),Fe=Le.enter().append("g").attr("class","category");Le.attr("transform",function(Ie){return i(0,Ie.y)}),Fe.append("rect").attr("class","catrect").attr("pointer-events","none"),Le.select("rect.catrect").attr("fill","none").attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}),A(Fe);var ke=Le.selectAll("rect.bandrect").data(function(Ie){return Ie.bands},v);ke.each(function(){n.raiseToTop(this)}),ke.attr("fill",function(Ie){return Ie.color});var ze=ke.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.color}).attr("fill-opacity",0);ke.attr("fill",function(Ie){return Ie.color}).attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}).attr("y",function(Ie){return Ie.y}).attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"perpendicular"===Ie.parcatsViewModel.arrangement?"ns-resize":"move"}),c(ze),ke.exit().remove(),Fe.append("text").attr("class","catlabel").attr("pointer-events","none");var Pe=Y._fullLayout.paper_bgcolor;Le.select("text.catlabel").attr("text-anchor",function(Ie){return p(Ie)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Pe)).style("fill","rgb(0, 0, 0)").attr("x",function(Ie){return p(Ie)?Ie.width+5:-5}).attr("y",function(Ie){return Ie.height/2}).text(function(Ie){return Ie.model.categoryLabel}).each(function(Ie){u.font(M.select(this),Ie.parcatsViewModel.categorylabelfont),r.convertToTspans(M.select(this),Y)}),Fe.append("text").attr("class","dimlabel"),Le.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Ie){return Ie.width/2}).attr("y",-5).text(function(Ie,Qe){return 0===Qe?Ie.parcatsViewModel.model.dimensions[Ie.model.dimensionInd].dimensionLabel:null}).each(function(Ie){u.font(M.select(this),Ie.parcatsViewModel.labelfont)}),Le.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",k),Le.exit().remove(),Ce.call(M.behavior.drag().origin(function(Ie){return{x:Ie.x,y:0}}).on("dragstart",O).on("drag",U).on("dragend",H)),ne.each(function(Ie){Ie.traceSelection=M.select(this),Ie.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),Ie.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ne.exit().remove()}function v(V){return V.key}function p(V){var Y=V.parcatsViewModel.dimensions.length,ae=V.parcatsViewModel.dimensions[Y-1].model.dimensionInd;return V.model.dimensionInd===ae}function f(V,Y){return V.model.rawColor>Y.model.rawColor?1:V.model.rawColor<Y.model.rawColor?-1:0}function l(V){if(!V.parcatsViewModel.dragDimension&&-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){n.raiseToTop(this),m(M.select(this));var Y=s(V),ae=x(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:Y,event:M.event,constraints:ae}),-1===V.parcatsViewModel.hoverinfoItems.indexOf("none")){var de,be,De,X=M.mouse(this)[0],J=V.parcatsViewModel.graphDiv,ue=V.parcatsViewModel.trace,re=J._fullLayout,ne=re._paperdiv.node().getBoundingClientRect(),se=V.parcatsViewModel.graphDiv.getBoundingClientRect();for(De=0;De<V.leftXs.length-1;De++)if(V.leftXs[De]+V.dimWidths[De]-2<=X&&X<=V.leftXs[De+1]+2){var _e=V.parcatsViewModel.dimensions[De],Ce=V.parcatsViewModel.dimensions[De+1];de=(_e.x+_e.width+Ce.x)/2,be=(V.topYs[De]+V.topYs[De+1]+V.height)/2;break}var Le=V.parcatsViewModel.x+de,Fe=V.parcatsViewModel.y+be,ke=a.mostReadable(V.model.color,["black","white"]),ze=V.model.count,Pe=ze/V.parcatsViewModel.model.count,Ie={countLabel:ze,probabilityLabel:Pe.toFixed(3)},Qe=[];-1!==V.parcatsViewModel.hoverinfoItems.indexOf("count")&&Qe.push(["Count:",Ie.countLabel].join(" ")),-1!==V.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Qe.push(["P:",Ie.probabilityLabel].join(" "));var at=Qe.join("<br>"),Be=M.mouse(J)[0];T.loneHover({trace:ue,x:Le-ne.left+se.left,y:Fe-ne.top+se.top,text:at,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ke,idealAlign:Be<Le?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:Ie,eventData:[{data:ue._input,fullData:ue,count:ze,probability:Pe}]},{container:re._hoverlayer.node(),outerContainer:re._paper.node(),gd:J})}}}function y(V){if(!V.parcatsViewModel.dragDimension&&(g(M.select(this)),T.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(f),-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var Y=s(V),ae=x(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:Y,event:M.event,constraints:ae})}}function s(V){for(var Y=[],ae=j(V.parcatsViewModel),X=0;X<V.model.valueInds.length;X++){var J=V.model.valueInds[X];Y.push({curveNumber:ae,pointNumber:J})}return Y}function x(V){for(var Y={},ae=V.parcatsViewModel.model.dimensions,X=0;X<ae.length;X++){var J=ae[X],ue=J.categories[V.model.categoryInds[X]];Y[J.containerInd]=ue.categoryValue}return void 0!==V.model.rawColor&&(Y.color=V.model.rawColor),Y}function h(V){if(-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){var Y=s(V),ae=x(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:Y,event:M.event,constraints:ae})}}function g(V){V.attr("fill",function(Y){return Y.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function m(V){V.attr("fill-opacity",.8).attr("stroke",function(Y){return a.mostReadable(Y.model.color,["black","white"])}).attr("stroke-width",.3)}function A(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function c(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function S(V){var Y=V.parcatsViewModel.pathSelection,ae=V.categoryViewModel.model.dimensionInd,X=V.categoryViewModel.model.categoryInd;return Y.filter(function(J){return J.model.categoryInds[ae]===X&&J.model.color===V.color})}function P(V,Y,ae){var X=M.select(V).datum(),J=X.categoryViewModel.model,ue=X.parcatsViewModel.graphDiv,re=M.select(V.parentNode).selectAll("rect.bandrect"),ne=[];re.each(function(de){S(de).each(function(De){Array.prototype.push.apply(ne,s(De))})});var se={};se[J.dimensionInd]=J.categoryValue,ue.emit(Y,{points:ne,event:ae,constraints:se})}function R(V,Y,ae){var X=M.select(V).datum(),J=X.categoryViewModel.model,ue=X.parcatsViewModel.graphDiv,re=S(X),ne=[];re.each(function(de){Array.prototype.push.apply(ne,s(de))});var se={};se[J.dimensionInd]=J.categoryValue,void 0!==X.rawColor&&(se.color=X.rawColor),ue.emit(Y,{points:ne,event:ae,constraints:se})}function F(V,Y,ae){V._fullLayout._calcInverseTransform(V);var _e,Ce,X=V._fullLayout._invScaleX,J=V._fullLayout._invScaleY,ue=M.select(ae.parentNode).select("rect.catrect"),re=ue.node().getBoundingClientRect(),ne=ue.datum(),se=ne.parcatsViewModel,de=se.model.dimensions[ne.model.dimensionInd],be=se.trace,De=re.top+re.height/2;se.dimensions.length>1&&de.displayInd===se.dimensions.length-1?(_e=re.left,Ce="left"):(_e=re.left+re.width,Ce="right");var Le=ne.model.count,Fe=ne.model.categoryLabel,ke=Le/ne.parcatsViewModel.model.count,ze={countLabel:Le,categoryLabel:Fe,probabilityLabel:ke.toFixed(3)},Pe=[];-1!==ne.parcatsViewModel.hoverinfoItems.indexOf("count")&&Pe.push(["Count:",ze.countLabel].join(" ")),-1!==ne.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Pe.push(["P("+ze.categoryLabel+"):",ze.probabilityLabel].join(" "));var Ie=Pe.join("<br>");return{trace:be,x:X*(_e-Y.left),y:J*(De-Y.top),text:Ie,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Ce,hovertemplate:be.hovertemplate,hovertemplateLabels:ze,eventData:[{data:be._input,fullData:be,count:Le,category:Fe,probability:ke}]}}function D(V){if(!V.parcatsViewModel.dragDimension&&-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(M.mouse(this)[1]<-1)return;var ne,ae=V.parcatsViewModel.graphDiv,X=ae._fullLayout,J=X._paperdiv.node().getBoundingClientRect(),ue=V.parcatsViewModel.hoveron,re=this;if("color"===ue?(function E(V){var Y=M.select(V).datum(),ae=S(Y);m(ae),ae.each(function(){n.raiseToTop(this)}),M.select(V.parentNode).selectAll("rect.bandrect").filter(function(X){return X.color===Y.color}).each(function(){n.raiseToTop(this),function b(V){V.attr("stroke","black").attr("stroke-width",1.5)}(M.select(this))})}(re),R(re,"plotly_hover",M.event)):(function w(V){M.select(V.parentNode).selectAll("rect.bandrect").each(function(ae){var X=S(ae);m(X),X.each(function(){n.raiseToTop(this)})}),function d(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(M.select(V.parentNode))}(re),P(re,"plotly_hover",M.event)),-1===V.parcatsViewModel.hoverinfoItems.indexOf("none"))"category"===ue?ne=F(ae,J,re):"color"===ue?ne=function z(V,Y,ae){V._fullLayout._calcInverseTransform(V);var _e,Ce,X=V._fullLayout._invScaleX,J=V._fullLayout._invScaleY,ue=ae.getBoundingClientRect(),re=M.select(ae).datum(),ne=re.categoryViewModel,se=ne.parcatsViewModel,de=se.model.dimensions[ne.model.dimensionInd],be=se.trace,De=ue.y+ue.height/2;se.dimensions.length>1&&de.displayInd===se.dimensions.length-1?(_e=ue.left,Ce="left"):(_e=ue.left+ue.width,Ce="right");var Le=ne.model.categoryLabel,Fe=re.parcatsViewModel.model.count,ke=0;re.categoryViewModel.bands.forEach(function(mt){mt.color===re.color&&(ke+=mt.count)});var ze=ne.model.count,Pe=0;se.pathSelection.each(function(mt){mt.model.color===re.color&&(Pe+=mt.model.count)});var Ie=ke/Fe,Qe=ke/Pe,at=ke/ze,Be={countLabel:Fe,categoryLabel:Le,probabilityLabel:Ie.toFixed(3)},Ne=[];-1!==ne.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ne.push(["Count:",Be.countLabel].join(" ")),-1!==ne.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Ne.push("P(color \u2229 "+Le+"): "+Be.probabilityLabel),Ne.push("P("+Le+" | color): "+Qe.toFixed(3)),Ne.push("P(color | "+Le+"): "+at.toFixed(3)));var nt=Ne.join("<br>"),ct=a.mostReadable(re.color,["black","white"]);return{trace:be,x:X*(_e-Y.left),y:J*(De-Y.top),text:nt,color:re.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ct,fontSize:10,idealAlign:Ce,hovertemplate:be.hovertemplate,hovertemplateLabels:Be,eventData:[{data:be._input,fullData:be,category:Le,count:Fe,probability:Ie,categorycount:ze,colorcount:Pe,bandcolorcount:ke}]}}(ae,J,re):"dimension"===ue&&(ne=function _(V,Y,ae){var X=[];return M.select(ae.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){X.push(F(V,Y,this))}),X}(ae,J,re)),ne&&T.loneHover(ne,{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:ae})}}function k(V){var Y=V.parcatsViewModel;if(!Y.dragDimension&&(g(Y.pathSelection),A(Y.dimensionSelection.selectAll("g.category")),c(Y.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(Y.graphDiv._fullLayout._hoverlayer.node()),Y.pathSelection.sort(f),-1===Y.hoverinfoItems.indexOf("skip"))){"color"===V.parcatsViewModel.hoveron?R(this,"plotly_unhover",M.event):P(this,"plotly_unhover",M.event)}}function O(V){"fixed"!==V.parcatsViewModel.arrangement&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(Y){return Y.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(Y){var ae=M.mouse(this)[0],X=M.mouse(this)[1];-2<=ae&&ae<=Y.width+2&&-2<=X&&X<=Y.height+2&&(V.dragCategoryDisplayInd=Y.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(J){return J.displayInd}),Y.model.dragY=Y.y,n.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(J){J.y<X&&X<=J.y+J.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,T.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function U(V){if("fixed"!==V.parcatsViewModel.arrangement&&(V.dragHasMoved=!0,null!==V.dragDimensionDisplayInd)){var Y=V.dragDimensionDisplayInd,ae=Y-1,X=Y+1,J=V.parcatsViewModel.dimensions[Y];if(null!==V.dragCategoryDisplayInd){var ue=J.categories[V.dragCategoryDisplayInd];ue.model.dragY+=M.event.dy;var re=ue.model.dragY,ne=ue.model.displayInd,se=J.categories,de=se[ne-1],be=se[ne+1];void 0!==de&&re<de.y+de.height/2&&(ue.model.displayInd=de.model.displayInd,de.model.displayInd=ne),void 0!==be&&re+ue.height>be.y+be.height/2&&(ue.model.displayInd=be.model.displayInd,be.model.displayInd=ne),V.dragCategoryDisplayInd=ue.model.displayInd}if(null===V.dragCategoryDisplayInd||"freeform"===V.parcatsViewModel.arrangement){J.model.dragX=M.event.x;var De=V.parcatsViewModel.dimensions[ae],_e=V.parcatsViewModel.dimensions[X];void 0!==De&&J.model.dragX<De.x+De.width&&(J.model.displayInd=De.model.displayInd,De.model.displayInd=Y),void 0!==_e&&J.model.dragX+J.width>_e.x&&(J.model.displayInd=_e.model.displayInd,_e.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=J.model.displayInd}oe(V.parcatsViewModel),q(V.parcatsViewModel),W(V.parcatsViewModel),ee(V.parcatsViewModel)}}function H(V){if("fixed"!==V.parcatsViewModel.arrangement&&null!==V.dragDimensionDisplayInd){M.select(this).selectAll("text").attr("font-weight","normal");var Y={},ae=j(V.parcatsViewModel),X=V.parcatsViewModel.model.dimensions.map(function(_e){return _e.displayInd}),J=V.initialDragDimensionDisplayInds.some(function(_e,Ce){return _e!==X[Ce]});J&&X.forEach(function(_e,Ce){var Le=V.parcatsViewModel.model.dimensions[Ce].containerInd;Y["dimensions["+Le+"].displayindex"]=_e});var ue=!1;if(null!==V.dragCategoryDisplayInd){var re=V.model.categories.map(function(_e){return _e.displayInd});if(ue=V.initialDragCategoryDisplayInds.some(function(_e,Ce){return _e!==re[Ce]})){var ne=V.model.categories.slice().sort(function(_e,Ce){return _e.displayInd-Ce.displayInd}),se=ne.map(function(_e){return _e.categoryValue}),de=ne.map(function(_e){return _e.categoryLabel});Y["dimensions["+V.model.containerInd+"].categoryarray"]=[se],Y["dimensions["+V.model.containerInd+"].ticktext"]=[de],Y["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}if(-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!V.dragHasMoved&&V.potentialClickBand&&("color"===V.parcatsViewModel.hoveron?R(V.potentialClickBand,"plotly_click",M.event.sourceEvent):P(V.potentialClickBand,"plotly_click",M.event.sourceEvent)),V.model.dragX=null,null!==V.dragCategoryDisplayInd)V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd].model.dragY=null,V.dragCategoryDisplayInd=null;V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,oe(V.parcatsViewModel),q(V.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){W(V.parcatsViewModel,!0),ee(V.parcatsViewModel,!0)}).each("end",function(){(J||ue)&&t.restyle(V.parcatsViewModel.graphDiv,Y,[ae])})}}function j(V){for(var Y,ae=V.graphDiv._fullData,X=0;X<ae.length;X++)if(V.key===ae[X].uid){Y=X;break}return Y}function ee(V,Y){void 0===Y&&(Y=!1),V.pathSelection.data(function(X){return X.paths},v),function ae(X){return Y?X.transition():X}(V.pathSelection).attr("d",function(X){return X.svgD})}function W(V,Y){function ae(se){return Y?se.transition():se}void 0===Y&&(Y=!1),V.dimensionSelection.data(function(se){return se.dimensions},v);var X=V.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},v);ae(V.dimensionSelection).attr("transform",function(se){return i(se.x,0)}),ae(X).attr("transform",function(se){return i(0,se.y)}),X.select(".dimlabel").text(function(se,de){return 0===de?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}),X.select(".catlabel").attr("text-anchor",function(se){return p(se)?"start":"end"}).attr("x",function(se){return p(se)?se.width+5:-5}).each(function(se){var de,be;p(se)?(de=se.width+5,be="start"):(de=-5,be="end"),M.select(this).selectAll("tspan").attr("x",de).attr("text-anchor",be)});var re=X.selectAll("rect.bandrect").data(function(se){return se.bands},v),ne=re.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);re.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),c(ne),re.each(function(){n.raiseToTop(this)}),re.exit().remove()}function B(V,Y,ae){var Le,X=ae[0],J=Y.margin||{l:80,r:80,t:100,b:80},ue=X.trace,re=ue.domain,ne=Y.width,se=Y.height,de=Math.floor(ne*(re.x[1]-re.x[0])),be=Math.floor(se*(re.y[1]-re.y[0])),De=re.x[0]*ne+J.l,_e=Y.height-re.y[1]*Y.height+J.t,Ce=ue.line.shape;Le="all"===ue.hoverinfo?["count","probability"]:(ue.hoverinfo||"").split("+");var Fe={trace:ue,key:ue.uid,model:X,x:De,y:_e,width:de,height:be,hoveron:ue.hoveron,hoverinfoItems:Le,arrangement:ue.arrangement,bundlecolors:ue.bundlecolors,sortpaths:ue.sortpaths,labelfont:ue.labelfont,categorylabelfont:ue.tickfont,pathShape:Ce,dragDimension:null,margin:J,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(oe(Fe),q(Fe)),Fe}function te(V,Y,ae,X,J){var ne,se,ue=[],re=[];for(se=0;se<ae.length-1;se++)ne=I(ae[se]+V[se],V[se+1]),ue.push(ne(J)),re.push(ne(1-J));var de="M "+V[0]+","+Y[0];for(de+="l"+ae[0]+",0 ",se=1;se<ae.length;se++)de+="C"+ue[se-1]+","+Y[se-1]+" "+re[se-1]+","+Y[se]+" "+V[se]+","+Y[se],de+="l"+ae[se]+",0 ";for(de+="l0,"+X+" ",de+="l -"+ae[ae.length-1]+",0 ",se=ae.length-2;se>=0;se--)de+="C"+re[se]+","+(Y[se+1]+X)+" "+ue[se]+","+(Y[se]+X)+" "+(V[se]+ae[se])+","+(Y[se]+X),de+="l-"+ae[se]+",0 ";return de+="Z"}function q(V){var Y=V.dimensions,ae=V.model,X=Y.map(function(zt){return zt.categories.map(function(St){return St.y})}),J=V.model.dimensions.map(function(zt){return zt.categories.map(function(St){return St.displayInd})}),ue=V.model.dimensions.map(function(zt){return zt.displayInd}),re=V.dimensions.map(function(zt){return zt.model.dimensionInd}),ne=Y.map(function(zt){return zt.x}),se=Y.map(function(zt){return zt.width}),de=[];for(var be in ae.paths)ae.paths.hasOwnProperty(be)&&de.push(ae.paths[be]);function De(zt){var St=zt.categoryInds.map(function(Mt,st){return J[st][Mt]});return re.map(function(Mt){return St[Mt]})}de.sort(function(zt,St){var Xt=De(zt),Mt=De(St);return"backward"===V.sortpaths&&(Xt.reverse(),Mt.reverse()),Xt.push(zt.valueInds[0]),Mt.push(St.valueInds[0]),V.bundlecolors&&(Xt.unshift(zt.rawColor),Mt.unshift(St.rawColor)),Xt<Mt?-1:Xt>Mt?1:0});for(var _e=new Array(de.length),Ce=Y[0].model.count,Le=Y[0].categories.map(function(zt){return zt.height}).reduce(function(zt,St){return zt+St}),Fe=0;Fe<de.length;Fe++){var ze,Rt,ke=de[Fe];ze=Ce>0?Le*(ke.count/Ce):0;for(var Pe=new Array(X.length),Ie=0;Ie<ke.categoryInds.length;Ie++){var Qe=ke.categoryInds[Ie],at=J[Ie][Qe],Be=ue[Ie];Pe[Be]=X[Be][at],X[Be][at]+=ze;var Ne=V.dimensions[Be].categories[at],nt=Ne.bands.length,ct=Ne.bands[nt-1];if(void 0===ct||ke.rawColor!==ct.rawColor){var mt=void 0===ct?0:ct.y+ct.height;Ne.bands.push({key:mt,color:ke.color,rawColor:ke.rawColor,height:ze,width:Ne.width,count:ke.count,y:mt,categoryViewModel:Ne,parcatsViewModel:V})}else{var Bt=Ne.bands[nt-1];Bt.height+=ze,Bt.count+=ke.count}}Rt="hspline"===V.pathShape?te(ne,Pe,se,ze,.5):te(ne,Pe,se,ze,0),_e[Fe]={key:ke.valueInds[0],model:ke,height:ze,leftXs:ne,topYs:Pe,dimWidths:se,svgD:Rt,parcatsViewModel:V}}V.paths=_e}function oe(V){var Y=V.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});Y.sort(function(re,ne){return re.displayInd-ne.displayInd});var ae=[];for(var X in Y){var J=Y[X].dimensionInd,ue=V.model.dimensions[J];ae.push(ie(V,ue))}V.dimensions=ae}function ie(V,Y){var se,J=V.model.dimensions.length,ue=Y.displayInd;se=40+(J>1?(V.width-80-16)/(J-1):0)*ue;var Fe,ke,ze,Pe,Ie,de=[],be=V.model.maxCats,De=Y.categories.length,Ce=Y.count,Le=V.height-8*(be-1),Qe=8*(be-De)/2,at=Y.categories.map(function(Be){return{displayInd:Be.displayInd,categoryInd:Be.categoryInd}});for(at.sort(function(Be,Ne){return Be.displayInd-Ne.displayInd}),Ie=0;Ie<De;Ie++)Pe=at[Ie].categoryInd,ke=Y.categories[Pe],Fe=Ce>0?ke.count/Ce*Le:0,ze={key:ke.valueInds[0],model:ke,width:16,height:Fe,y:null!==ke.dragY?ke.dragY:Qe,bands:[],parcatsViewModel:V},Qe=Qe+Fe+8,de.push(ze);return{key:Y.dimensionInd,x:null!==Y.dragX?Y.dragX:se,y:0,width:16,model:Y,categories:de,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(V,Y,ae,X){o(ae,V,X,Y)}},41582:($,K,e)=>{"use strict";var M=e(85626);$.exports=function(t,T,n,i){var u=t._fullLayout,a=u._paper,r=u._size;M(t,a,T,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},n,i)}},46874:($,K,e)=>{"use strict";var M=e(567),I=e(38330),t=e(47297),T=e(47472).Y,n=e(18836).extendFlat,i=e(96906).templatedArray;$.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot",description:["Sets the angle of the labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the labels vertically.","Tilted labels with *labelangle* may be positioned better","inside margins when `labelposition` is set to *bottom*."].join(" ")},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Specifies the location of the `label`.","*top* positions labels above, next to the title","*bottom* positions labels below the graph","Tilted labels with *labelangle* may be positioned better","inside margins when `labelposition` is set to *bottom*."].join(" ")},labelfont:t({editType:"plot",description:"Sets the font for the `dimension` labels."}),tickfont:t({editType:"plot",description:"Sets the font for the `dimension` tick values."}),rangefont:t({editType:"plot",description:"Sets the font for the `dimension` range values."}),dimensions:i("dimension",{label:{valType:"string",editType:"plot",description:"The shown name of the dimension."},tickvals:n({},I.tickvals,{editType:"plot",description:["Sets the values at which ticks on this axis appear."].join(" ")}),ticktext:n({},I.ticktext,{editType:"plot",description:["Sets the text displayed at the ticks position via `tickvals`."].join(" ")}),tickformat:n({},I.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Shows the dimension when set to `true` (the default). Hides the dimension for `false`."},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["The domain range that represents the full, shown axis extent. Defaults to the `values` extent.","Must be an array of `[fromValue, toValue]` with finite numbers as elements."].join(" ")},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["The domain range to which the filter on the dimension is constrained. Must be an array","of `[fromValue, toValue]` with `fromValue <= toValue`, or if `multiselect` is not","disabled, you may give an array of arrays, where each inner array is `[fromValue, toValue]`."].join(" ")},multiselect:{valType:"boolean",dflt:!0,editType:"plot",description:"Do we allow multiple selection ranges or just a single range?"},values:{valType:"data_array",editType:"calc",description:["Dimension values. `values[n]` represents the value of the `n`th point in the dataset,","therefore the `values` vector for all dimensions must be the same (longer vectors","will be truncated). Each value must be a finite number."].join(" ")},editType:"calc",description:"The dimensions (variables) of the parallel coordinates chart. 2..60 dimensions are supported."}),line:n({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot",description:["Sets the base color of unselected lines.","in connection with `unselected.line.opacity`."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot",description:["Sets the opacity of unselected lines.","The default *auto* decreases the opacity smoothly as the number of lines increases.","Use *1* to achieve exact `unselected.line.color`."].join(" ")},editType:"plot"},editType:"plot"}}},85605:($,K,e)=>{"use strict";var M=e(92416),I=e(21572),t=e(47764).keyFun,T=e(47764).repeat,n=e(5228).sorterAsc,i=e(5228).strTranslate,u=M.bar.snapRatio;function a(H,j){return H*(1-u)+j*u}var r=M.bar.snapClose;function o(H,j){return H*(1-r)+j*r}function v(H,j,ee,W){if(function p(H,j){for(var ee=0;ee<j.length;ee++)if(H>=j[ee][0]&&H<=j[ee][1])return!0;return!1}(ee,W))return ee;var B=H?-1:1,te=0,q=j.length-1;if(B<0){var oe=te;te=q,q=oe}for(var ie=j[te],V=ie,Y=te;B*Y<B*q;Y+=B){var ae=Y+B,X=j[ae];if(B*ee<B*o(ie,X))return a(ie,V);if(B*ee<B*X||ae===q)return a(X,ie);V=ie,ie=X}}function f(H){H.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function l(H){H.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(H){if(!H.brush.filterSpecified)return"0,"+H.height;for(var W,B,te,j=s(H.brush.filter.getConsolidated(),H.height),ee=[0],q=j.length?j[0][0]:null,oe=0;oe<j.length;oe++)B=(W=j[oe])[1]-W[0],ee.push(q),ee.push(B),(te=oe+1)<j.length&&(q=j[te][0]-W[1]);return ee.push(H.height),ee}function s(H,j){return H.map(function(ee){return ee.map(function(W){return Math.max(0,W*j)}).sort(n)})}function h(){I.select(document.body).style("cursor",null)}function g(H){H.attr("stroke-dasharray",y)}function m(H,j){var ee=I.select(H).selectAll(".highlight, .highlight-shadow");g(j?ee.transition().duration(M.bar.snapDuration).each("end",j):ee)}function d(H,j){var q,ee=H.brush,B=NaN,te={};if(ee.filterSpecified){var oe=H.height,ie=ee.filter.getConsolidated(),V=s(ie,oe),Y=NaN,ae=NaN,X=NaN;for(q=0;q<=V.length;q++){var J=V[q];if(J&&J[0]<=j&&j<=J[1]){Y=q;break}if(ae=q?q-1:NaN,J&&J[0]>j){X=q;break}}if(B=Y,isNaN(B)&&(B=isNaN(ae)||isNaN(X)?isNaN(ae)?X:ae:j-V[ae][1]<V[X][0]-j?ae:X),!isNaN(B)){var ue=V[B],re=function x(H,j){var ee=M.bar.handleHeight;if(!(j>H[1]+ee||j<H[0]-ee))return j>=.9*H[1]+.1*H[0]?"n":j<=.9*H[0]+.1*H[1]?"s":"ns"}(ue,j);re&&(te.interval=ie[B],te.intervalPix=ue,te.region=re)}}if(H.ordinal&&!te.region){var ne=H.unitTickvals,se=H.unitToPaddedPx.invert(j);for(q=0;q<ne.length;q++){var de=[.25*ne[Math.max(q-1,0)]+.75*ne[q],.25*ne[Math.min(q+1,ne.length-1)]+.75*ne[q]];if(se>=de[0]&&se<=de[1]){te.clickableOrdinalRange=de;break}}}return te}function b(H,j){I.event.sourceEvent.stopPropagation();var ee=j.height-I.mouse(H)[1]-2*M.verticalPadding,W=j.brush.svgBrush;W.wasDragged=!0,W._dragging=!0,W.grabbingBar?W.newExtent=[ee-W.grabPoint,ee+W.barLength-W.grabPoint].map(j.unitToPaddedPx.invert):W.newExtent=[W.startExtent,j.unitToPaddedPx.invert(ee)].sort(n),j.brush.filterSpecified=!0,W.extent=W.stayingIntervals.concat([W.newExtent]),W.brushCallback(j),m(H.parentNode)}function S(H,j){var W=d(j,j.height-I.mouse(H)[1]-2*M.verticalPadding),B="crosshair";W.clickableOrdinalRange?B="pointer":W.region&&(B=W.region+"-resize"),I.select(document.body).style("cursor",B)}function w(H){H.on("mousemove",function(j){I.event.preventDefault(),j.parent.inBrushDrag||S(this,j)}).on("mouseleave",function(j){j.parent.inBrushDrag||h()}).call(I.behavior.drag().on("dragstart",function(j){!function A(H,j){I.event.sourceEvent.stopPropagation();var ee=j.height-I.mouse(H)[1]-2*M.verticalPadding,W=j.unitToPaddedPx.invert(ee),B=j.brush,te=d(j,ee),q=te.interval,oe=B.svgBrush;if(oe.wasDragged=!1,oe.grabbingBar="ns"===te.region,oe.grabbingBar){var ie=q.map(j.unitToPaddedPx);oe.grabPoint=ee-ie[0]-M.verticalPadding,oe.barLength=ie[1]-ie[0]}oe.clickableOrdinalRange=te.clickableOrdinalRange,oe.stayingIntervals=j.multiselect&&B.filterSpecified?B.filter.getConsolidated():[],q&&(oe.stayingIntervals=oe.stayingIntervals.filter(function(V){return V[0]!==q[0]&&V[1]!==q[1]})),oe.startExtent=te.region?q["s"===te.region?1:0]:W,j.parent.inBrushDrag=!0,oe.brushStartCallback()}(this,j)}).on("drag",function(j){b(this,j)}).on("dragend",function(j){!function c(H,j){var ee=j.brush,W=ee.filter,B=ee.svgBrush;B._dragging||(S(H,j),b(H,j),j.brush.svgBrush.wasDragged=!1),B._dragging=!1,I.event.sourceEvent.stopPropagation();var q=B.grabbingBar;if(B.grabbingBar=!1,B.grabLocation=void 0,j.parent.inBrushDrag=!1,h(),!B.wasDragged)return B.wasDragged=void 0,B.clickableOrdinalRange?ee.filterSpecified&&j.multiselect?B.extent.push(B.clickableOrdinalRange):(B.extent=[B.clickableOrdinalRange],ee.filterSpecified=!0):q?(B.extent=B.stayingIntervals,0===B.extent.length&&_(ee)):_(ee),B.brushCallback(j),m(H.parentNode),void B.brushEndCallback(ee.filterSpecified?W.getConsolidated():[]);var oe=function(){W.set(W.getConsolidated())};if(j.ordinal){var ie=j.unitTickvals;ie[ie.length-1]<ie[0]&&ie.reverse(),B.newExtent=[v(0,ie,B.newExtent[0],B.stayingIntervals),v(1,ie,B.newExtent[1],B.stayingIntervals)];var V=B.newExtent[1]>B.newExtent[0];B.extent=B.stayingIntervals.concat(V?[B.newExtent]:[]),B.extent.length||_(ee),B.brushCallback(j),V?m(H.parentNode,oe):(oe(),m(H.parentNode))}else oe();B.brushEndCallback(ee.filterSpecified?W.getConsolidated():[])}(this,j)}))}function E(H,j){return H[0]-j[0]}function _(H){H.filterSpecified=!1,H.svgBrush.extent=[[-1/0,1/0]]}function z(H){return function(ee){var W=ee.brush,B=function F(H){return H.svgBrush.extent.map(function(j){return j.slice()})}(W),te=B.slice();W.filter.set(te),H()}}function D(H){for(var W,j=H.slice(),ee=[],B=j.shift();B;){for(W=B.slice();(B=j.shift())&&B[0]<=W[1];)W[1]=Math.max(W[1],B[1]);ee.push(W)}return 1===ee.length&&ee[0][0]>ee[0][1]&&(ee=[]),ee}$.exports={makeBrush:function O(H,j,ee,W,B,te){var q=function k(){var j,ee,H=[];return{set:function(W){1===(H=W.map(function(B){return B.slice().sort(n)}).sort(E)).length&&H[0][0]===-1/0&&H[0][1]===1/0&&(H=[[0,-1]]),j=D(H),ee=H.reduce(function(B,te){return[Math.min(B[0],te[0]),Math.max(B[1],te[1])]},[1/0,-1/0])},get:function(){return H.slice()},getConsolidated:function(){return j},getBounds:function(){return ee}}}();return q.set(ee),{filter:q,filterSpecified:j,svgBrush:{extent:[],brushStartCallback:W,brushCallback:z(B),brushEndCallback:te}}},ensureAxisBrush:function R(H,j,ee){var W=H.selectAll("."+M.cn.axisBrush).data(T,t);W.enter().append("g").classed(M.cn.axisBrush,!0),function P(H,j,ee){var W=ee._context.staticPlot,B=H.selectAll(".background").data(T);B.enter().append("rect").classed("background",!0).call(f).call(l).style("pointer-events",W?"none":"auto").attr("transform",i(0,M.verticalPadding)),B.call(w).attr("height",function(oe){return oe.height-M.verticalPadding});var te=H.selectAll(".highlight-shadow").data(T);te.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",j).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),te.attr("y1",function(oe){return oe.height}).call(g);var q=H.selectAll(".highlight").data(T);q.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),q.attr("y1",function(oe){return oe.height}).call(g)}(W,j,ee)},cleanRanges:function U(H,j){if(Array.isArray(H[0])?(H=H.map(function(W){return W.sort(n)}),H=j.multiselect?D(H.sort(E)):[H[0]]):H=[H.sort(n)],j.tickvals){var ee=j.tickvals.slice().sort(n);if(!(H=H.map(function(W){var B=[v(0,ee,W[0],[]),v(1,ee,W[1],[])];if(B[1]>B[0])return B}).filter(function(W){return W})).length)return}return H.length>1?H:H[0]}}},54433:($,K,e)=>{"use strict";$.exports={attributes:e(46874),supplyDefaults:e(77991),calc:e(85938),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(55816),categories:["gl","regl","noOpacity","noHover"],meta:{description:["Parallel coordinates for multidimensional exploratory data analysis.","The samples are specified in `dimensions`.","The colors are set in `line.color`."].join(" ")}}},55816:($,K,e)=>{"use strict";var M=e(21572),I=e(65644).a0,t=e(42231),T=e(70415);K.name="parcoords",K.plot=function(n){var i=I(n.calcdata,"parcoords")[0];i.length&&t(n,i)},K.clean=function(n,i,u,a){var r=a._has&&a._has("parcoords"),o=i._has&&i._has("parcoords");r&&!o&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},K.toSVG=function(n){var i=n._fullLayout._glimages,u=M.select(n).selectAll(".svg-container");u.filter(function(o,v){return v===u.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function r(){var o=this,v=o.toDataURL("image/png");i.append("svg:image").attr({xmlns:T.svg,"xlink:href":v,preserveAspectRatio:"none",x:0,y:0,width:o.style.width,height:o.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},85938:($,K,e)=>{"use strict";var M=e(5228).isArrayOrTypedArray,I=e(45103),t=e(47764).wrap;$.exports=function(i,u){var a,r;return I.hasColorscale(u,"line")&&M(u.line.color)?(a=u.line.color,r=I.extractOpts(u.line).colorscale,I.calc(i,u,{vals:a,containerStr:"line",cLetter:"c"})):(a=function T(n){for(var i=new Array(n),u=0;u<n;u++)i[u]=.5;return i}(u._length),r=[[0,u.line.color],[1,u.line.color]]),t({lineColor:a,cscale:r})}},92416:$=>{"use strict";$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},77991:($,K,e)=>{"use strict";var M=e(5228),I=e(981).hasColorscale,t=e(14739),T=e(47472).c,n=e(84322),i=e(91464),u=e(46874),a=e(85605),r=e(92416).maxDimensionCount,o=e(39548);function p(f,l,y,s){function x(A,b){return M.coerce(f,l,u.dimensions,A,b)}var h=x("values"),g=x("visible");if(h&&h.length||(g=l.visible=!1),g){x("label"),x("tickvals"),x("ticktext"),x("tickformat");var m=x("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:m},i.setConvert(l._ax,s.layout),x("multiselect");var d=x("constraintrange");d&&(l.constraintrange=a.cleanRanges(d,l))}}$.exports=function(l,y,s,x){function h(b,c){return M.coerce(l,y,u,b,c)}var g=l.dimensions;Array.isArray(g)&&g.length>r&&(M.log("parcoords traces support up to "+r+" dimensions at the moment"),g.splice(r));var m=n(l,y,{name:"dimensions",layout:x,handleItemDefaults:p}),d=function v(f,l,y,s,x){var h=x("line.color",y);if(I(f,"line")&&M.isArrayOrTypedArray(h)){if(h.length)return x("line.colorscale"),t(f,l,s,x,{prefix:"line.",cLetter:"c"}),h.length;l.line.color=y}return 1/0}(l,y,s,x,h);T(y,x,h),(!Array.isArray(m)||!m.length)&&(y.visible=!1),o(y,m,"values",d);var A={family:x.font.family,size:Math.round(x.font.size/1.2),color:x.font.color};M.coerceFont(h,"labelfont",A),M.coerceFont(h,"tickfont",A),M.coerceFont(h,"rangefont",A),h("labelangle"),h("labelside"),h("unselected.line.color"),h("unselected.line.opacity")}},88966:($,K,e)=>{"use strict";var M=e(5228).isTypedArray;K.convertTypedArray=function(I){return M(I)?Array.prototype.slice.call(I):I},K.isOrdinal=function(I){return!!I.tickvals},K.isVisible=function(I){return I.visible||!("visible"in I)}},96934:($,K,e)=>{"use strict";var M=e(54433);M.plot=e(42231),$.exports=M},43298:($,K,e)=>{"use strict";var M=e(13215),I=M("./shaders/vertex.glsl"),t=M("./shaders/fragment.glsl"),T=e(92416).maxDimensionCount,n=e(5228),i=1e-6,u=2048,a=new Uint8Array(4),r=new Uint8Array(4),o={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function p(S,w,E,P,R){var F=S._gl;F.enable(F.SCISSOR_TEST),F.scissor(w,E,P,R),S.clear({color:[0,0,0,0],depth:1})}function f(S,w,E,P,R,F){var _=F.key;E.drawCompleted||(function v(S){S.read({x:0,y:0,width:1,height:1,data:a})}(S),E.drawCompleted=!0),function z(D){var k=Math.min(P,R-D*P);0===D&&(window.cancelAnimationFrame(E.currentRafs[_]),delete E.currentRafs[_],p(S,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!E.clearOnly&&(F.count=2*k,F.offset=2*D*P,w(F),D*P+k<R&&(E.currentRafs[_]=window.requestAnimationFrame(function(){z(D+1)})),E.drawCompleted=!1)}(0)}function l(S){return Math.max(i,Math.min(1-i,S))}function y(S,w){for(var E=new Array(256),P=0;P<256;P++)E[P]=S(P/255).concat(w);return E}function s(S,w){return(S>>>8*w)%256/255}function h(S,w,E){for(var P=new Array(8*w),R=0,F=0;F<w;F++)for(var _=0;_<2;_++)for(var z=0;z<4;z++){var D=4*S+z,k=E[64*F+D];63===D&&0===_&&(k*=-1),P[R++]=k}return P}function g(S){var w="0"+S;return w.substr(w.length-2)}function m(S){return S<T?"p"+g(S+1)+"_"+g(S+4):"colors"}function b(S,w,E,P,R,F,_,z,D,k,O,U,H,j){for(var ee=[[],[]],W=0;W<64;W++)ee[0][W]=W===R?1:0,ee[1][W]=W===F?1:0;_*=j,z*=j,D*=j,k*=j;var B=S.lines.canvasOverdrag*j,te=S.domain,q=S.canvasWidth*j,oe=S.canvasHeight*j,ie=S.pad.l*j,V=S.pad.b*j,Y=S.layoutHeight*j,ae=S.layoutWidth*j,X=S.deselectedLines.color,J=S.deselectedLines.opacity;return n.extendFlat({key:O,resolution:[q,oe],viewBoxPos:[_+B,z],viewBoxSize:[D,k],i0:R,i1:F,dim0A:ee[0].slice(0,16),dim0B:ee[0].slice(16,32),dim0C:ee[0].slice(32,48),dim0D:ee[0].slice(48,64),dim1A:ee[1].slice(0,16),dim1B:ee[1].slice(16,32),dim1C:ee[1].slice(32,48),dim1D:ee[1].slice(48,64),drwLayer:U,contextColor:[X[0]/255,X[1]/255,X[2]/255,"auto"!==J?X[3]*J:Math.max(1/255,Math.pow(1/S.lines.color.length,1/3))],scissorX:(P===w?0:_+B)+(ie-B)+ae*te.x[0],scissorWidth:(P===E?q-_+B:D+.5)+(P===w?_+B:0),scissorY:z+V+Y*te.y[0],scissorHeight:k,viewportX:ie-B+ae*te.x[0],viewportY:V+Y*te.y[0],viewportWidth:q,viewportHeight:oe},H)}function c(S){var w=u-1,E=Math.max(0,Math.floor(S[0]*w),0),P=Math.min(w,Math.ceil(S[1]*w),w);return[Math.min(E,P),Math.max(E,P)]}$.exports=function(S,w){var k,O,U,H,ee,E=w.context,P=w.pick,R=w.regl,F=R._gl,_=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),z=Math.max(_[0],Math.min(_[1],w.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},j=function A(S){for(var w={},E=0;E<=T;E+=4)w[m(E)]=S.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return w}(R),W=R.texture(o),B=[];q(w);var te=R({profile:!1,blend:{enable:E,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!E,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:R.prop("scissorX"),y:R.prop("scissorY"),width:R.prop("scissorWidth"),height:R.prop("scissorHeight")}},viewport:{x:R.prop("viewportX"),y:R.prop("viewportY"),width:R.prop("viewportWidth"),height:R.prop("viewportHeight")},dither:!1,vert:I,frag:t,primitive:"lines",lineWidth:z,attributes:j,uniforms:{resolution:R.prop("resolution"),viewBoxPos:R.prop("viewBoxPos"),viewBoxSize:R.prop("viewBoxSize"),dim0A:R.prop("dim0A"),dim1A:R.prop("dim1A"),dim0B:R.prop("dim0B"),dim1B:R.prop("dim1B"),dim0C:R.prop("dim0C"),dim1C:R.prop("dim1C"),dim0D:R.prop("dim0D"),dim1D:R.prop("dim1D"),loA:R.prop("loA"),hiA:R.prop("hiA"),loB:R.prop("loB"),hiB:R.prop("hiB"),loC:R.prop("loC"),hiC:R.prop("hiC"),loD:R.prop("loD"),hiD:R.prop("hiD"),palette:W,contextColor:R.prop("contextColor"),maskTexture:R.prop("maskTexture"),drwLayer:R.prop("drwLayer"),maskHeight:R.prop("maskHeight")},offset:R.prop("offset"),count:R.prop("count")});function q(X){k=X.model,O=X.viewModel,U=O.dimensions.slice(),H=U[0]?U[0].values.length:0;var J=k.lines,ue=P?J.color.map(function(ne,se){return se/J.color.length}):J.color,re=function x(S,w,E){for(var P=new Array(S*(T+4)),R=0,F=0;F<S;F++){for(var _=0;_<T;_++)P[R++]=_<w.length?w[_].paddedUnitValues[F]:.5;P[R++]=s(F,2),P[R++]=s(F,1),P[R++]=s(F,0),P[R++]=l(E[F])}return P}(H,U,ue);(function d(S,w,E){for(var P=0;P<=T;P+=4)S[m(P)](h(P/4,w,E))})(j,H,re),!E&&!P&&(W=R.texture(n.extendFlat({data:y(k.unitToColor,255)},o)))}return{render:function ie(X,J,ue){var ne,se,de,re=X.length,be=1/0,De=-1/0;for(ne=0;ne<re;ne++)X[ne].dim0.canvasX<be&&(be=X[ne].dim0.canvasX,se=ne),X[ne].dim1.canvasX>De&&(De=X[ne].dim1.canvasX,de=ne);0===re&&p(R,0,0,k.canvasWidth,k.canvasHeight);var _e=function oe(X){var J,ue,re,ne=[[],[]];for(re=0;re<64;re++){var se=!X&&re<U.length?U[re].brush.filter.getBounds():[-1/0,1/0];ne[0][re]=se[0],ne[1][re]=se[1]}var be=new Array(16384);for(J=0;J<16384;J++)be[J]=255;if(!X)for(J=0;J<U.length;J++){var De=J%8,_e=(J-De)/8,Ce=Math.pow(2,De),Fe=U[J].brush.filter.get();if(!(Fe.length<2)){var ke=c(Fe[0])[1];for(ue=1;ue<Fe.length;ue++){var ze=c(Fe[ue]);for(re=ke+1;re<ze[0];re++)be[8*re+_e]&=~Ce;ke=Math.max(ke,ze[1])}}}var Pe={shape:[8,u],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:be};return ee?ee(Pe):ee=R.texture(Pe),{maskTexture:ee,maskHeight:u,loA:ne[0].slice(0,16),loB:ne[0].slice(16,32),loC:ne[0].slice(32,48),loD:ne[0].slice(48,64),hiA:ne[1].slice(0,16),hiB:ne[1].slice(16,32),hiC:ne[1].slice(32,48),hiD:ne[1].slice(48,64)}}(E);for(ne=0;ne<re;ne++){var Ce=X[ne],Le=Ce.dim0.crossfilterDimensionIndex,Fe=Ce.dim1.crossfilterDimensionIndex,ke=Ce.canvasX,ze=Ce.canvasY,Pe=ke+Ce.panelSizeX,Ie=Ce.plotGlPixelRatio;if(J||!B[Le]||B[Le][0]!==ke||B[Le][1]!==Pe){B[Le]=[ke,Pe];var Qe=b(k,se,de,ne,Le,Fe,ke,ze,Ce.panelSizeX,Ce.panelSizeY,Ce.dim0.crossfilterDimensionIndex,E?0:P?2:1,_e,Ie);D.clearOnly=ue;var at=J?k.lines.blockLineCount:H;f(R,te,D,at,H,Qe)}}},readPixel:function V(X,J){return R.read({x:X,y:J,width:1,height:1,data:r}),r},readPixels:function Y(X,J,ue,re){var ne=new Uint8Array(4*ue*re);return R.read({x:X,y:J,width:ue,height:re,data:ne}),ne},destroy:function ae(){for(var X in S.style["pointer-events"]="none",W.destroy(),ee&&ee.destroy(),j)j[X].destroy()},update:q}}},39548:$=>{"use strict";$.exports=function(K,e,M,I){var t,T;for(I||(I=1/0),t=0;t<e.length;t++)(T=e[t]).visible&&(I=Math.min(I,T[M].length));for(I===1/0&&(I=0),K._length=I,t=0;t<e.length;t++)(T=e[t]).visible&&(T._length=I);return I}},4712:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=I.isArrayOrTypedArray,T=I.numberFormat,n=e(63707),i=e(91464),u=I.strRotate,a=I.strTranslate,r=e(88565),o=e(27630),v=e(45103),p=e(47764),f=p.keyFun,l=p.repeat,y=p.unwrap,s=e(88966),x=e(92416),h=e(85605),g=e(43298);function m(W,B,te){return I.aggNums(W,null,B,te)}function d(W,B){return b(m(Math.min,W,B),m(Math.max,W,B))}function A(W){var B=W.range;return B?b(B[0],B[1]):d(W.values,W._length)}function b(W,B){return(isNaN(W)||!isFinite(W))&&(W=0),(isNaN(B)||!isFinite(B))&&(B=0),W===B&&(0===W?(W-=1,B+=1):(W*=.9,B*=1.1)),[W,B]}function S(W,B,te,q,oe){var ie=A(te);return q?M.scale.ordinal().domain(q.map(function c(W,B){return B?function(te,q){return B[q]??W(te)}:W}(T(te.tickformat),oe))).range(q.map(function(V){var Y=(V-ie[0])/(ie[1]-ie[0]);return W-B+Y*(2*B-W)})):M.scale.linear().domain(ie).range([W-B,B])}function P(W){if(W.tickvals){var B=A(W);return M.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(te){return(te-B[0])/(B[1]-B[0])}))}}function R(W){var B=W.map(function(ie){return ie[0]}),te=W.map(function(ie){var V=n(ie[1]);return M.rgb("rgb("+V[0]+","+V[1]+","+V[2]+")")}),oe="rgb".split("").map(function(ie){return M.scale.linear().clamp(!0).domain(B).range(te.map(function(ie){return function(V){return V[ie]}}(ie)))});return function(ie){return oe.map(function(V){return V(ie)})}}function F(W){return W.dimensions.some(function(B){return B.brush.filterSpecified})}function _(W,B,te){var q=y(B),oe=q.trace,ie=s.convertTypedArray(q.lineColor),V=oe.line,Y={color:n(oe.unselected.line.color),opacity:oe.unselected.line.opacity},ae=v.extractOpts(V),X=ae.reversescale?v.flipScale(q.cscale):q.cscale,J=oe.domain,ue=oe.dimensions,re=W.width,ne=oe.labelangle,se=oe.labelside,de=oe.labelfont,be=oe.tickfont,De=oe.rangefont,_e=I.extendDeepNoArrays({},V,{color:ie.map(M.scale.linear().domain(A({values:ie,range:[ae.min,ae.max],_length:oe._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),Ce=Math.floor(re*(J.x[1]-J.x[0])),Le=Math.floor(W.height*(J.y[1]-J.y[0])),Fe=W.margin||{l:80,r:80,t:100,b:80},ke=Ce,ze=Le;return{key:te,colCount:ue.filter(s.isVisible).length,dimensions:ue,tickDistance:x.tickDistance,unitToColor:R(X),lines:_e,deselectedLines:Y,labelAngle:ne,labelSide:se,labelFont:de,tickFont:be,rangeFont:De,layoutWidth:re,layoutHeight:W.height,domain:J,translateX:J.x[0]*re,translateY:W.height-J.y[1]*W.height,pad:Fe,canvasWidth:ke*x.canvasPixelRatio+2*_e.canvasOverdrag,canvasHeight:ze*x.canvasPixelRatio,width:ke,height:ze,canvasPixelRatio:x.canvasPixelRatio}}function z(W,B,te){var q=te.width,oe=te.height,ie=te.dimensions,V=te.canvasPixelRatio,Y=function(re){return q*re/Math.max(1,te.colCount-1)},ae=x.verticalPadding/oe,X=function w(W,B){return M.scale.linear().range([B,W-B])}(oe,x.verticalPadding),J={key:te.key,xScale:Y,model:te,inBrushDrag:!1},ue={};return J.dimensions=ie.filter(s.isVisible).map(function(re,ne){var se=function E(W,B){return M.scale.linear().domain(A(W)).range([B,1-B])}(re,ae),de=ue[re.label];ue[re.label]=(de||0)+1;var be=re.label+(de?"__"+de:""),De=re.constraintrange,_e=De&&De.length;_e&&!t(De[0])&&(De=[De]);var Ce=_e?De.map(function(Ne){return Ne.map(se)}):[[-1/0,1/0]],Fe=re.values;Fe.length>re._length&&(Fe=Fe.slice(0,re._length));var ze,ke=re.tickvals;function Pe(Ne,nt){return{val:Ne,text:ze[nt]}}function Ie(Ne,nt){return Ne.val-nt.val}if(t(ke)&&ke.length){I.isTypedArray(ke)&&(ke=Array.from(ke)),ze=re.ticktext,t(ze)&&ze.length?ze.length>ke.length?ze=ze.slice(0,ke.length):ke.length>ze.length&&(ke=ke.slice(0,ze.length)):ze=ke.map(T(re.tickformat));for(var Qe=1;Qe<ke.length;Qe++)if(ke[Qe]<ke[Qe-1]){for(var at=ke.map(Pe).sort(Ie),Be=0;Be<ke.length;Be++)ke[Be]=at[Be].val,ze[Be]=at[Be].text;break}}else ke=void 0;return Fe=s.convertTypedArray(Fe),{key:be,label:re.label,tickFormat:re.tickformat,tickvals:ke,ticktext:ze,ordinal:s.isOrdinal(re),multiselect:re.multiselect,xIndex:ne,crossfilterDimensionIndex:ne,visibleIndex:re._index,height:oe,values:Fe,paddedUnitValues:Fe.map(se),unitTickvals:ke&&ke.map(se),xScale:Y,x:Y(ne),canvasX:Y(ne)*V,unitToPaddedPx:X,domainScale:S(oe,x.verticalPadding,re,ke,ze),ordinalScale:P(re),parent:J,model:te,brush:h.makeBrush(W,_e,Ce,function(){W.linePickActive(!1)},function(){var Ne=J;Ne.focusLayer&&Ne.focusLayer.render(Ne.panels,!0);var nt=F(Ne);!W.contextShown()&&nt?(Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!0),W.contextShown(!0)):W.contextShown()&&!nt&&(Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!0,!0),W.contextShown(!1))},function(Ne){if(J.focusLayer.render(J.panels,!0),J.pickLayer&&J.pickLayer.render(J.panels,!0),W.linePickActive(!0),B&&B.filterChanged){var nt=se.invert,ct=Ne.map(function(mt){return mt.map(nt).sort(I.sorterAsc)}).sort(function(mt,Bt){return mt[0]-Bt[0]});B.filterChanged(J.key,re._index,ct)}})}}),J}function D(W){W.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function O(W,B){var te="top"===B?1:-1,q=W*Math.PI/180;return{dir:te,dx:Math.sin(q),dy:Math.cos(q),degrees:W}}function U(W,B,te){for(var q=B.panels||(B.panels=[]),oe=W.data(),ie=0;ie<oe.length-1;ie++){var V=q[ie]||(q[ie]={}),Y=oe[ie],ae=oe[ie+1];V.dim0=Y,V.dim1=ae,V.canvasX=Y.canvasX,V.panelSizeX=ae.canvasX-Y.canvasX,V.panelSizeY=B.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=te}}function j(W,B){return i.tickText(W._ax,B,!1).text}function ee(W,B){if(W.ordinal)return"";var te=W.domainScale.domain(),q=te[B?te.length-1:0];return j(W.model.dimensions[W.visibleIndex],q)}$.exports=function(B,te,q,oe){var ie=B._context.staticPlot,V=B._fullLayout,Y=V._toppaper,ae=V._glcontainer,X=B._context.plotGlPixelRatio,J=B._fullLayout.paper_bgcolor;!function H(W){for(var B=0;B<W.length;B++)for(var te=0;te<W[B].length;te++)for(var q=W[B][te].trace,oe=q.dimensions,ie=0;ie<oe.length;ie++){var V=oe[ie].values,Y=oe[ie]._ax;Y&&(Y.range?Y.range=b(Y.range[0],Y.range[1]):Y.range=d(V,q._length),Y.dtick||(Y.dtick=.01*(Math.abs(Y.range[1]-Y.range[0])||1)),Y.tickformat=oe[ie].tickformat,i.calcTicks(Y),Y.cleanRange())}}(te);var ue=function k(){var W=!0,B=!1;return{linePickActive:function(te){return arguments.length?W=!!te:W},contextShown:function(te){return arguments.length?B=!!te:B}}}(),re=te.filter(function(Be){return y(Be).trace.visible}).map(_.bind(0,q)).map(z.bind(0,ue,oe));ae.each(function(Be,Ne){return I.extendFlat(Be,re[Ne])});var ne=ae.selectAll(".gl-canvas").each(function(Be){Be.viewModel=re[0],Be.viewModel.plotGlPixelRatio=X,Be.viewModel.paperColor=J,Be.model=Be.viewModel?Be.viewModel.model:null}),se=null;ne.filter(function(Be){return Be.pick}).style("pointer-events",ie?"none":"auto").on("mousemove",function(Be){if(ue.linePickActive()&&Be.lineLayer&&oe&&oe.hover){var Ne=M.event,nt=this.width,ct=this.height,mt=M.mouse(this),Bt=mt[0],Rt=mt[1];if(Bt<0||Rt<0||Bt>=nt||Rt>=ct)return;var zt=Be.lineLayer.readPixel(Bt,ct-1-Rt),St=0!==zt[3],Xt=St?zt[2]+256*(zt[1]+256*zt[0]):null,Mt={x:Bt,y:Rt,clientX:Ne.clientX,clientY:Ne.clientY,dataIndex:Be.model.key,curveNumber:Xt};Xt!==se&&(St?oe.hover(Mt):oe.unhover&&oe.unhover(Mt),se=Xt)}}),ne.style("opacity",function(Be){return Be.pick?0:1}),Y.style("background","rgba(255, 255, 255, 0)");var be=Y.selectAll("."+x.cn.parcoords).data(re,f);be.exit().remove(),be.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),be.attr("transform",function(Be){return a(Be.model.translateX,Be.model.translateY)});var De=be.selectAll("."+x.cn.parcoordsControlView).data(l,f);De.enter().append("g").classed(x.cn.parcoordsControlView,!0),De.attr("transform",function(Be){return a(Be.model.pad.l,Be.model.pad.t)});var _e=De.selectAll("."+x.cn.yAxis).data(function(Be){return Be.dimensions},f);_e.enter().append("g").classed(x.cn.yAxis,!0),De.each(function(Be){U(_e,Be,X)}),ne.each(function(Be){if(Be.viewModel){!Be.lineLayer||oe?Be.lineLayer=g(this,Be):Be.lineLayer.update(Be),(Be.key||0===Be.key)&&(Be.viewModel[Be.key]=Be.lineLayer);var Ne=!Be.context||oe;Be.lineLayer.render(Be.viewModel.panels,Ne)}}),_e.attr("transform",function(Be){return a(Be.xScale(Be.xIndex),0)}),_e.call(M.behavior.drag().origin(function(Be){return Be}).on("drag",function(Be){var Ne=Be.parent;ue.linePickActive(!1),Be.x=Math.max(-x.overdrag,Math.min(Be.model.width+x.overdrag,M.event.x)),Be.canvasX=Be.x*Be.model.canvasPixelRatio,_e.sort(function(nt,ct){return nt.x-ct.x}).each(function(nt,ct){nt.xIndex=ct,nt.x=Be===nt?nt.x:nt.xScale(nt.xIndex),nt.canvasX=nt.x*nt.model.canvasPixelRatio}),U(_e,Ne,X),_e.filter(function(nt){return 0!==Math.abs(Be.xIndex-nt.xIndex)}).attr("transform",function(nt){return a(nt.xScale(nt.xIndex),0)}),M.select(this).attr("transform",a(Be.x,0)),_e.each(function(nt,ct,mt){mt===Be.parent.key&&(Ne.dimensions[ct]=nt)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!F(Ne)),Ne.focusLayer.render&&Ne.focusLayer.render(Ne.panels)}).on("dragend",function(Be){var Ne=Be.parent;Be.x=Be.xScale(Be.xIndex),Be.canvasX=Be.x*Be.model.canvasPixelRatio,U(_e,Ne,X),M.select(this).attr("transform",function(nt){return a(nt.x,0)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!F(Ne)),Ne.focusLayer&&Ne.focusLayer.render(Ne.panels),Ne.pickLayer&&Ne.pickLayer.render(Ne.panels,!0),ue.linePickActive(!0),oe&&oe.axesMoved&&oe.axesMoved(Ne.key,Ne.dimensions.map(function(nt){return nt.crossfilterDimensionIndex}))})),_e.exit().remove();var Ce=_e.selectAll("."+x.cn.axisOverlays).data(l,f);Ce.enter().append("g").classed(x.cn.axisOverlays,!0),Ce.selectAll("."+x.cn.axis).remove();var Le=Ce.selectAll("."+x.cn.axis).data(l,f);Le.enter().append("g").classed(x.cn.axis,!0),Le.each(function(Be){var Ne=Be.model.height/Be.model.tickDistance,nt=Be.domainScale,ct=nt.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ne,Be.tickFormat).tickValues(Be.ordinal?ct:null).tickFormat(function(mt){return s.isOrdinal(Be)?mt:j(Be.model.dimensions[Be.visibleIndex],mt)}).scale(nt)),o.font(Le.selectAll("text"),Be.model.tickFont)}),Le.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Le.selectAll("text").style("text-shadow",r.makeTextShadow(J)).style("cursor","default");var Fe=Ce.selectAll("."+x.cn.axisHeading).data(l,f);Fe.enter().append("g").classed(x.cn.axisHeading,!0);var ke=Fe.selectAll("."+x.cn.axisTitle).data(l,f);ke.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ie?"none":"auto"),ke.text(function(Be){return Be.label}).each(function(Be){var Ne=M.select(this);o.font(Ne,Be.model.labelFont),r.convertToTspans(Ne,B)}).attr("transform",function(Be){var Ne=O(Be.model.labelAngle,Be.model.labelSide),nt=x.axisTitleOffset;return(Ne.dir>0?"":a(0,2*nt+Be.model.height))+u(Ne.degrees)+a(-nt*Ne.dx,-nt*Ne.dy)}).attr("text-anchor",function(Be){var Ne=O(Be.model.labelAngle,Be.model.labelSide);return 2*Math.abs(Ne.dx)>Math.abs(Ne.dy)?Ne.dir*Ne.dx<0?"start":"end":"middle"});var ze=Ce.selectAll("."+x.cn.axisExtent).data(l,f);ze.enter().append("g").classed(x.cn.axisExtent,!0);var Pe=ze.selectAll("."+x.cn.axisExtentTop).data(l,f);Pe.enter().append("g").classed(x.cn.axisExtentTop,!0),Pe.attr("transform",a(0,-x.axisExtentOffset));var Ie=Pe.selectAll("."+x.cn.axisExtentTopText).data(l,f);Ie.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(D),Ie.text(function(Be){return ee(Be,!0)}).each(function(Be){o.font(M.select(this),Be.model.rangeFont)});var Qe=ze.selectAll("."+x.cn.axisExtentBottom).data(l,f);Qe.enter().append("g").classed(x.cn.axisExtentBottom,!0),Qe.attr("transform",function(Be){return a(0,Be.model.height+x.axisExtentOffset)});var at=Qe.selectAll("."+x.cn.axisExtentBottomText).data(l,f);at.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),at.text(function(Be){return ee(Be,!1)}).each(function(Be){o.font(M.select(this),Be.model.rangeFont)}),h.ensureAxisBrush(Ce,J,B)}},42231:($,K,e)=>{"use strict";var M=e(4712),I=e(90676),t=e(88966).isVisible,T={};function n(a,r,o){var v=r.indexOf(o),p=a.indexOf(v);return-1===p&&(p+=r.length),p}($.exports=function(r,o){var v=r._fullLayout;if(I(r,[],T)){var f={},l={},y={},s={},x=v._size;o.forEach(function(A,b){var c=A[0].trace;y[b]=c.index;var S=s[b]=c._fullInput.index;f[b]=r.data[S].dimensions,l[b]=r.data[S].dimensions.slice()});M(r,o,{width:x.w,height:x.h,margin:{t:x.t,r:x.r,b:x.b,l:x.l}},{filterChanged:function(A,b,c){var S=l[A][b],w=c.map(function(z){return z.slice()}),E="dimensions["+b+"].constraintrange",P=v._tracePreGUI[r._fullData[y[A]]._fullInput.uid];if(void 0===P[E]){var R=S.constraintrange;P[E]=R||null}var F=r._fullData[y[A]].dimensions[b];w.length?(1===w.length&&(w=w[0]),S.constraintrange=w,F.constraintrange=w.slice(),w=[w]):(delete S.constraintrange,delete F.constraintrange,w=null);var _={};_[E]=w,r.emit("plotly_restyle",[_,[s[A]]])},hover:function(A){r.emit("plotly_hover",A)},unhover:function(A){r.emit("plotly_unhover",A)},axesMoved:function(A,b){var c=function i(a,r){return function(v,p){return n(a,r,v)-n(a,r,p)}}(b,l[A].filter(t));f[A].sort(c),l[A].filter(function(S){return!t(S)}).sort(function(S){return l[A].indexOf(S)}).forEach(function(S){f[A].splice(f[A].indexOf(S),1),f[A].splice(l[A].indexOf(S),0,S)}),r.emit("plotly_restyle",[{dimensions:[f[A]]},[s[A]]])}})}}).reglPrecompiled=T},23441:($,K,e)=>{"use strict";var M=e(82684),I=e(47472).Y,t=e(47297),T=e(36593),n=e(9430).fF,i=e(9430).si,u=e(18836).extendFlat,a=e(65822).u,r=t({editType:"plot",arrayOk:!0,colorEditType:"plot",description:"Sets the font used for `textinfo`."});$.exports={labels:{valType:"data_array",editType:"calc",description:["Sets the sector labels.","If `labels` entries are duplicated, we sum associated `values`","or simply count occurrences if `values` is not provided.","For other array attributes (including color) we use the first","non-empty entry among all occurrences of the label."].join(" ")},label0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `labels`.","Builds a numeric set of labels.","Use with `dlabel`","where `label0` is the starting label and `dlabel` the step."].join(" ")},dlabel:{valType:"number",dflt:1,editType:"calc",description:"Sets the label step. See `label0` for more info."},values:{valType:"data_array",editType:"calc",description:["Sets the values of the sectors.","If omitted, we count occurrences of each label."].join(" ")},marker:{colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},pattern:a,editType:"calc"},text:{valType:"data_array",editType:"plot",description:["Sets text elements associated with each sector.","If trace `textinfo` contains a *text* flag, these elements will be seen","on the chart.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each sector.","If a single string, the same string appears for","all data points.","If an array of string, the items are mapped in order of","this trace's sectors.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple pie charts that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc",description:["Determines which trace information appear on the graph."].join(" ")},hoverinfo:u({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:n({},{keys:["label","color","value","percent","text"]}),texttemplate:i({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot",description:["Specifies the location of the `textinfo`."].join(" ")},textfont:u({},r,{description:"Sets the font used for `textinfo`."}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot",description:["Controls the orientation of the text inside chart sectors.","When set to *auto*, text may be oriented in any direction in order","to be as big as possible in the middle of a sector.","The *horizontal* option orients text to be parallel with the bottom","of the chart, and may make text smaller in order to achieve that goal.","The *radial* option orients text along the radius of the sector.","The *tangential* option orients text perpendicular to the radius of the sector."].join(" ")},insidetextfont:u({},r,{description:"Sets the font used for `textinfo` lying inside the sector."}),outsidetextfont:u({},r,{description:"Sets the font used for `textinfo` lying outside the sector."}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether outside text labels can push the margins."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"plot",description:["Sets the title of the chart.","If it is empty, no title is displayed.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:u({},r,{description:["Sets the font used for `title`.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot",description:["Specifies the location of the `title`.","Note that the title's position used to be set","by the now deprecated `titleposition` attribute."].join(" ")},editType:"plot"},domain:I({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the fraction of the radius to cut out of the pie.","Use this to make a donut chart."].join(" ")},sort:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the sectors are reordered","from largest to smallest."].join(" ")},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc",description:["Specifies the direction at which succeeding sectors follow","one another."].join(" ")},rotation:{valType:"angle",dflt:0,editType:"calc",description:["Instead of the first slice starting at 12 o'clock,","rotate to some other angle."].join(" ")},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc",description:["Sets the fraction of larger radius to pull the sectors","out from the center. This can be a constant","to pull all slices apart from each other equally","or an array to highlight one or more slices."].join(" ")},_deprecated:{title:{valType:"string",dflt:"",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:u({},r,{description:"Deprecated in favor of `title.font`."}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc",description:"Deprecated in favor of `title.position`."}}}},828:($,K,e)=>{"use strict";var M=e(31556);K.name="pie",K.plot=function(I,t,T,n){M.plotBasePlot(K.name,I,t,T,n)},K.clean=function(I,t,T,n){M.cleanBasePlot(K.name,I,t,T,n)}},19160:($,K,e)=>{"use strict";var M=e(7347),I=e(80791),t=e(8416),T={};function i(r){return function(v,p){return!(!v||(v=I(v),!v.isValid()))&&(v=t.addOpacity(v,v.getAlpha()),r[p]||(r[p]=v),v)}}function a(r,o){var v,p=JSON.stringify(r),f=o[p];if(!f){for(f=r.slice(),v=0;v<r.length;v++)f.push(I(r[v]).lighten(20).toHexString());for(v=0;v<r.length;v++)f.push(I(r[v]).darken(20).toHexString());o[p]=f}return f}$.exports={calc:function n(r,o){var g,m,v=[],p=r._fullLayout,f=p.hiddenlabels||[],l=o.labels,y=o.marker.colors||[],s=o.values,x=o._length,h=o._hasValues&&x;if(o.dlabel)for(l=new Array(x),g=0;g<x;g++)l[g]=String(o.label0+g*o.dlabel);var d={},A=i(p["_"+o.type+"colormap"]),b=0,c=!1;for(g=0;g<x;g++){var S,w,E;if(h){if(S=s[g],!M(S))continue;S=+S}else S=1;(void 0===(w=l[g])||""===w)&&(w=g);var P=d[w=String(w)];void 0===P?(d[w]=v.length,(E=-1!==f.indexOf(w))||(b+=S),v.push({v:S,label:w,color:A(y[g],w),i:g,pts:[g],hidden:E})):(c=!0,(m=v[P]).v+=S,m.pts.push(g),m.hidden||(b+=S),!1===m.color&&y[g]&&(m.color=A(y[g],w)))}return v=v.filter(function(F){return F.v>=0}),("funnelarea"===o.type?c:o.sort)&&v.sort(function(F,_){return _.v-F.v}),v[0]&&(v[0].vTotal=b),v},crossTraceCalc:function u(r,o){var v=(o||{}).type;v||(v="pie");var p=r._fullLayout,f=r.calcdata,l=p[v+"colorway"],y=p["_"+v+"colormap"];p["extend"+v+"colors"]&&(l=a(l,T));for(var s=0,x=0;x<f.length;x++){var h=f[x];if(h[0].trace.type===v)for(var m=0;m<h.length;m++){var d=h[m];!1===d.color&&(y[d.label]?d.color=y[d.label]:(y[d.label]=d.color=l[s%l.length],s++))}}},makePullColorFn:i,generateExtendedColors:a}},20297:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(23441),T=e(47472).c,n=e(74401).handleText,i=e(5228).coercePattern;function u(o,v){var p=I.isArrayOrTypedArray(o),f=I.isArrayOrTypedArray(v),l=Math.min(p?o.length:1/0,f?v.length:1/0);if(isFinite(l)||(l=0),l&&f){for(var y,s=0;s<l;s++){var x=v[s];if(M(x)&&x>0){y=!0;break}}y||(l=0)}return{hasLabels:p,hasValues:f,len:l}}function a(o,v,p,f,l){f("marker.line.width")&&f("marker.line.color",l?void 0:p.paper_bgcolor);var s=f("marker.colors");i(f,"marker.pattern",s),o.marker&&!v.marker.pattern.fgcolor&&(v.marker.pattern.fgcolor=o.marker.colors),v.marker.pattern.bgcolor||(v.marker.pattern.bgcolor=p.paper_bgcolor)}$.exports={handleLabelsAndValues:u,handleMarkerDefaults:a,supplyDefaults:function r(o,v,p,f){function l(P,R){return I.coerce(o,v,t,P,R)}var x=u(l("labels"),l("values")),h=x.len;if(v._hasLabels=x.hasLabels,v._hasValues=x.hasValues,!v._hasLabels&&v._hasValues&&(l("label0"),l("dlabel")),h){v._length=h,a(o,v,f,l,!0),l("scalegroup");var d,g=l("text"),m=l("texttemplate");if(m||(d=l("textinfo",I.isArrayOrTypedArray(g)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),m||d&&"none"!==d){var A=l("textposition");n(o,v,f,l,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(A)||"auto"===A||"outside"===A)&&l("automargin"),("inside"===A||"auto"===A||Array.isArray(A))&&l("insidetextorientation")}T(v,f,l);var S=l("hole");if(l("title.text")){var E=l("title.position",S?"middle center":"top center");!S&&"middle center"===E&&(v.title.position="top center"),I.coerceFont(l,"title.font",f.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else v.visible=!1}}},44349:($,K,e)=>{"use strict";var M=e(40235).appendArrayMultiPointValues;$.exports=function(t,T){var n={curveNumber:T.index,pointNumbers:t.pts,data:T._input,fullData:T,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,bbox:t.bbox,v:t.v};return 1===t.pts.length&&(n.pointNumber=n.i=t.pts[0]),M(n,T,t.pts),"funnelarea"===T.type&&(delete n.v,delete n.i),n}},22711:($,K,e)=>{"use strict";var M=e(27630),I=e(8416);$.exports=function(T,n,i,u){var a=i.marker.pattern;a&&a.shape?M.pointStyle(T,i,u,n):I.fill(T,n.color)}},63149:($,K,e)=>{"use strict";var M=e(5228);function I(t){return-1!==t.indexOf("e")?t.replace(/[.]?0+e/,"e"):-1!==t.indexOf(".")?t.replace(/[.]?0+$/,""):t}K.formatPiePercent=function(T,n){var i=I((100*T).toPrecision(3));return M.numSeparate(i,n)+"%"},K.formatPieValue=function(T,n){var i=I(T.toPrecision(10));return M.numSeparate(i,n)},K.getFirstFilled=function(T,n){if(M.isArrayOrTypedArray(T))for(var i=0;i<n.length;i++){var u=T[n[i]];if(u||0===u||""===u)return u}},K.castOption=function(T,n){return M.isArrayOrTypedArray(T)?K.getFirstFilled(T,n):T||void 0},K.getRotationAngle=function(t){return("auto"===t?0:t)*Math.PI/180}},22959:($,K,e)=>{"use strict";$.exports={attributes:e(23441),supplyDefaults:e(20297).supplyDefaults,supplyLayoutDefaults:e(65782),layoutAttributes:e(67201),calc:e(19160).calc,crossTraceCalc:e(19160).crossTraceCalc,plot:e(49015).plot,style:e(92780),styleOne:e(40631),moduleType:"trace",name:"pie",basePlotModule:e(828),categories:["pie-like","pie","showLegend"],meta:{description:["A data visualized by the sectors of the pie is set in `values`.","The sector labels are set in `labels`.","The sector colors are set in `marker.colors`"].join(" ")}}},67201:$=>{"use strict";$.exports={hiddenlabels:{valType:"data_array",editType:"calc",description:["hiddenlabels is the funnelarea & pie chart analog of","visible:'legendonly'","but it can contain many labels, and can simultaneously","hide slices from several pies/funnelarea charts"].join(" ")},piecolorway:{valType:"colorlist",editType:"calc",description:["Sets the default pie slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendpiecolors`."].join(" ")},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the pie slice colors (whether given by `piecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},65782:($,K,e)=>{"use strict";var M=e(5228),I=e(67201);$.exports=function(T,n){function i(u,a){return M.coerce(T,n,I,u,a)}i("hiddenlabels"),i("piecolorway",n.colorway),i("extendpiecolors")}},49015:($,K,e)=>{"use strict";var M=e(21572),I=e(31556),t=e(76863),T=e(8416),n=e(27630),i=e(5228),u=i.strScale,a=i.strTranslate,r=e(88565),o=e(99771),v=o.recordMinTextSize,p=o.clearMinTextSize,f=e(98466).TEXTPAD,l=e(63149),y=e(44349),s=e(5228).isValidTextValue;function g(oe,ie,V){var Y=V[0],ae=Y.cx,X=Y.cy,J=Y.trace,ue="funnelarea"===J.type;"_hasHoverLabel"in J||(J._hasHoverLabel=!1),"_hasHoverEvent"in J||(J._hasHoverEvent=!1),oe.on("mouseover",function(re){var ne=ie._fullLayout,se=ie._fullData[J.index];if(!ie._dragging&&!1!==ne.hovermode){var de=se.hoverinfo;if(Array.isArray(de)&&(de=t.castHoverinfo({hoverinfo:[l.castOption(de,re.pts)],_module:J._module},ne,0)),"all"===de&&(de="label+text+value+percent+name"),se.hovertemplate||"none"!==de&&"skip"!==de&&de){var be=re.rInscribed||0,De=ae+re.pxmid[0]*(1-be),_e=X+re.pxmid[1]*(1-be),Ce=ne.separators,Le=[];if(de&&-1!==de.indexOf("label")&&Le.push(re.label),re.text=l.castOption(se.hovertext||se.text,re.pts),de&&-1!==de.indexOf("text")){var Fe=re.text;i.isValidTextValue(Fe)&&Le.push(Fe)}re.value=re.v,re.valueLabel=l.formatPieValue(re.v,Ce),de&&-1!==de.indexOf("value")&&Le.push(re.valueLabel),re.percent=re.v/Y.vTotal,re.percentLabel=l.formatPiePercent(re.percent,Ce),de&&-1!==de.indexOf("percent")&&Le.push(re.percentLabel);var ke=se.hoverlabel,ze=ke.font,Pe=[];t.loneHover({trace:J,x0:De-be*Y.r,x1:De+be*Y.r,y:_e,_x0:ue?ae+re.TL[0]:De-be*Y.r,_x1:ue?ae+re.TR[0]:De+be*Y.r,_y0:ue?X+re.TL[1]:_e-be*Y.r,_y1:ue?X+re.BL[1]:_e+be*Y.r,text:Le.join("<br>"),name:se.hovertemplate||-1!==de.indexOf("name")?se.name:void 0,idealAlign:re.pxmid[0]<0?"left":"right",color:l.castOption(ke.bgcolor,re.pts)||re.color,borderColor:l.castOption(ke.bordercolor,re.pts),fontFamily:l.castOption(ze.family,re.pts),fontSize:l.castOption(ze.size,re.pts),fontColor:l.castOption(ze.color,re.pts),nameLength:l.castOption(ke.namelength,re.pts),textAlign:l.castOption(ke.align,re.pts),hovertemplate:l.castOption(se.hovertemplate,re.pts),hovertemplateLabels:re,eventData:[y(re,se)]},{container:ne._hoverlayer.node(),outerContainer:ne._paper.node(),gd:ie,inOut_bbox:Pe}),re.bbox=Pe[0],J._hasHoverLabel=!0}J._hasHoverEvent=!0,ie.emit("plotly_hover",{points:[y(re,se)],event:M.event})}}),oe.on("mouseout",function(re){var ne=ie._fullLayout,se=ie._fullData[J.index],de=M.select(this).datum();J._hasHoverEvent&&(re.originalEvent=M.event,ie.emit("plotly_unhover",{points:[y(de,se)],event:M.event}),J._hasHoverEvent=!1),J._hasHoverLabel&&(t.loneUnhover(ne._hoverlayer.node()),J._hasHoverLabel=!1)}),oe.on("click",function(re){var ne=ie._fullLayout,se=ie._fullData[J.index];ie._dragging||!1===ne.hovermode||(ie._hoverdata=[y(re,se)],t.click(ie,M.event))})}function d(oe,ie,V){var Y=l.castOption(oe.insidetextfont.color,ie.pts);!Y&&oe._input.textfont&&(Y=l.castOption(oe._input.textfont.color,ie.pts));var ae=l.castOption(oe.insidetextfont.family,ie.pts)||l.castOption(oe.textfont.family,ie.pts)||V.family,X=l.castOption(oe.insidetextfont.size,ie.pts)||l.castOption(oe.textfont.size,ie.pts)||V.size;return{color:Y||T.contrast(ie.color),family:ae,size:X}}function A(oe,ie){for(var V,Y,ae=0;ae<oe.length;ae++)if((Y=(V=oe[ae][0]).trace).title.text){var X=Y.title.text;Y._meta&&(X=i.templateString(X,Y._meta));var J=n.tester.append("text").attr("data-notex",1).text(X).call(n.font,Y.title.font).call(r.convertToTspans,ie),ue=n.bBox(J.node(),!0);V.titleBox={width:ue.width,height:ue.height},J.remove()}}function b(oe,ie,V){var Y=V.r||ie.rpx1,ae=ie.rInscribed;if(ie.startangle===ie.stopangle)return{rCenter:1-ae,scale:0,rotate:0,textPosAngle:0};var Le,J=ie.ring,ue=1===J&&Math.abs(ie.startangle-ie.stopangle)===2*Math.PI,re=ie.halfangle,ne=ie.midangle,se=V.trace.insidetextorientation,de="horizontal"===se,be="tangential"===se,De="radial"===se,_e="auto"===se,Ce=[];if(!_e){var ke,Fe=function(Be,Ne){if(function c(oe,ie){var V=oe.startangle,Y=oe.stopangle;return V>ie&&ie>Y||V<ie&&ie<Y}(ie,Be)){var nt=Math.abs(Be-ie.startangle),ct=Math.abs(Be-ie.stopangle),mt=nt<ct?nt:ct;(Le="tan"===Ne?w(oe,Y,J,mt,0):S(oe,Y,J,mt,Math.PI/2)).textPosAngle=Be,Ce.push(Le)}};if(de||be){for(ke=4;ke>=-4;ke-=2)Fe(Math.PI*ke,"tan");for(ke=4;ke>=-4;ke-=2)Fe(Math.PI*(ke+1),"tan")}if(de||De){for(ke=4;ke>=-4;ke-=2)Fe(Math.PI*(ke+1.5),"rad");for(ke=4;ke>=-4;ke-=2)Fe(Math.PI*(ke+.5),"rad")}}if(ue||_e||de){var ze=Math.sqrt(oe.width*oe.width+oe.height*oe.height);if((Le={scale:ae*Y*2/ze,rCenter:1-ae,rotate:0}).textPosAngle=(ie.startangle+ie.stopangle)/2,Le.scale>=1)return Le;Ce.push(Le)}(_e||De)&&((Le=S(oe,Y,J,re,ne)).textPosAngle=(ie.startangle+ie.stopangle)/2,Ce.push(Le)),(_e||be)&&((Le=w(oe,Y,J,re,ne)).textPosAngle=(ie.startangle+ie.stopangle)/2,Ce.push(Le));for(var Pe=0,Ie=0,Qe=0;Qe<Ce.length;Qe++){var at=Ce[Qe].scale;if(Ie<at&&(Ie=at,Pe=Qe),!_e&&Ie>=1)break}return Ce[Pe]}function S(oe,ie,V,Y,ae){ie=Math.max(0,ie-2*f);var X=oe.width/oe.height,J=R(X,Y,ie,V);return{scale:2*J/oe.height,rCenter:E(X,J/ie),rotate:P(ae)}}function w(oe,ie,V,Y,ae){ie=Math.max(0,ie-2*f);var X=oe.height/oe.width,J=R(X,Y,ie,V);return{scale:2*J/oe.width,rCenter:E(X,J/ie),rotate:P(ae+Math.PI/2)}}function E(oe,ie){return Math.cos(ie)-oe*ie}function P(oe){return(180/Math.PI*oe+720)%180-90}function R(oe,ie,V,Y){var ae=oe+1/(2*Math.tan(ie));return V*Math.min(1/(Math.sqrt(ae*ae+.5)+ae),Y/(Math.sqrt(oe*oe+Y/2)+oe))}function F(oe,ie){return oe.v!==ie.vTotal||ie.trace.hole?Math.min(1/(1+1/Math.sin(oe.halfangle)),oe.ring/2):1}function _(oe,ie){var V=ie.pxmid[0],Y=ie.pxmid[1],ae=oe.width/2,X=oe.height/2;return V<0&&(ae*=-1),Y<0&&(X*=-1),{scale:1,rCenter:1,rotate:0,x:ae+Math.abs(X)*(ae>0?1:-1)/2,y:X/(1+V*V/(Y*Y)),outside:!0}}function D(oe,ie){var V,Y,ae,X=oe.trace,J={x:oe.cx,y:oe.cy},ue={tx:0,ty:0};ue.ty+=X.title.font.size,ae=U(X),-1!==X.title.position.indexOf("top")?(J.y-=(1+ae)*oe.r,ue.ty-=oe.titleBox.height):-1!==X.title.position.indexOf("bottom")&&(J.y+=(1+ae)*oe.r);var re=function k(oe,ie){return oe/(void 0===ie?1:ie)}(oe.r,oe.trace.aspectratio),ne=ie.w*(X.domain.x[1]-X.domain.x[0])/2;return-1!==X.title.position.indexOf("left")?(ne+=re,J.x-=(1+ae)*re,ue.tx+=oe.titleBox.width/2):-1!==X.title.position.indexOf("center")?ne*=2:-1!==X.title.position.indexOf("right")&&(ne+=re,J.x+=(1+ae)*re,ue.tx-=oe.titleBox.width/2),V=ne/oe.titleBox.width,Y=O(oe,ie)/oe.titleBox.height,{x:J.x,y:J.y,scale:Math.min(V,Y),tx:ue.tx,ty:ue.ty}}function O(oe,ie){var V=oe.trace,Y=ie.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(oe.titleBox.height,Y/2)}function U(oe){var V,ie=oe.pull;if(!ie)return 0;if(i.isArrayOrTypedArray(ie))for(ie=0,V=0;V<oe.pull.length;V++)oe.pull[V]>ie&&(ie=oe.pull[V]);return ie}function j(oe,ie){for(var V=[],Y=0;Y<oe.length;Y++){var ae=oe[Y][0],X=ae.trace,J=X.domain,ue=ie.w*(J.x[1]-J.x[0]),re=ie.h*(J.y[1]-J.y[0]);X.title.text&&"middle center"!==X.title.position&&(re-=O(ae,ie));var ne=ue/2,se=re/2;"funnelarea"===X.type&&!X.scalegroup&&(se/=X.aspectratio),ae.r=Math.min(ne,se)/(1+U(X)),ae.cx=ie.l+ie.w*(X.domain.x[1]+X.domain.x[0])/2,ae.cy=ie.t+ie.h*(1-X.domain.y[0])-re/2,X.title.text&&-1!==X.title.position.indexOf("bottom")&&(ae.cy-=O(ae,ie)),X.scalegroup&&-1===V.indexOf(X.scalegroup)&&V.push(X.scalegroup)}!function ee(oe,ie){for(var V,Y,ae,X=0;X<ie.length;X++){var J=1/0,ue=ie[X];for(Y=0;Y<oe.length;Y++)if((ae=(V=oe[Y][0]).trace).scalegroup===ue){var re;if("pie"===ae.type)re=V.r*V.r;else if("funnelarea"===ae.type){var ne,se;ae.aspectratio>1?se=(ne=V.r)/ae.aspectratio:ne=(se=V.r)*ae.aspectratio,re=(ne*=(1+ae.baseratio)/2)*se}J=Math.min(J,re/V.vTotal)}for(Y=0;Y<oe.length;Y++)if((ae=(V=oe[Y][0]).trace).scalegroup===ue){var de=J*V.vTotal;"funnelarea"===ae.type&&(de/=(1+ae.baseratio)/2,de/=ae.aspectratio),V.r=Math.sqrt(de)}}}(oe,V)}function B(oe,ie){return[oe*Math.sin(ie),-oe*Math.cos(ie)]}function te(oe,ie,V){var Y=oe._fullLayout,ae=V.trace,X=ae.texttemplate,J=ae.textinfo;if(!X&&J&&"none"!==J){var _e,ue=J.split("+"),re=function(Pe){return-1!==ue.indexOf(Pe)},ne=re("label"),se=re("text"),de=re("value"),be=re("percent"),De=Y.separators;if(_e=ne?[ie.label]:[],se){var Ce=l.getFirstFilled(ae.text,ie.pts);s(Ce)&&_e.push(Ce)}de&&_e.push(l.formatPieValue(ie.v,De)),be&&_e.push(l.formatPiePercent(ie.v/V.vTotal,De)),ie.text=_e.join("<br>")}if(X){var Fe=i.castOption(ae,ie.i,"texttemplate");if(Fe){var ke=function Le(Pe){return{label:Pe.label,value:Pe.v,valueLabel:l.formatPieValue(Pe.v,Y.separators),percent:Pe.v/V.vTotal,percentLabel:l.formatPiePercent(Pe.v/V.vTotal,Y.separators),color:Pe.color,text:Pe.text,customdata:i.castOption(ae,Pe.i,"customdata")}}(ie),ze=l.getFirstFilled(ae.text,ie.pts);(s(ze)||""===ze)&&(ke.text=ze),ie.text=i.texttemplateString(Fe,ke,oe._fullLayout._d3locale,ke,ae._meta||{})}else ie.text=""}}function q(oe,ie){var V=oe.rotate*Math.PI/180,Y=Math.cos(V),ae=Math.sin(V),X=(ie.left+ie.right)/2,J=(ie.top+ie.bottom)/2;oe.textX=X*Y-J*ae,oe.textY=X*ae+J*Y,oe.noCenter=!0}$.exports={plot:function x(oe,ie){var V=oe._context.staticPlot,Y=oe._fullLayout,ae=Y._size;p("pie",Y),A(ie,oe),j(ie,ae);var X=i.makeTraceGroups(Y._pielayer,ie,"trace").each(function(J){var ue=M.select(this),re=J[0],ne=re.trace;(function W(oe){var re,ne,se,ie=oe[0],V=ie.r,Y=ie.trace,ae=l.getRotationAngle(Y.rotation),X=2*Math.PI/ie.vTotal,J="px0",ue="px1";if("counterclockwise"===Y.direction){for(re=0;re<oe.length&&oe[re].hidden;re++);if(re===oe.length)return;ae+=X*oe[re].v,X*=-1,J="px1",ue="px0"}for(se=B(V,ae),re=0;re<oe.length;re++)!(ne=oe[re]).hidden&&(ne[J]=se,ne.startangle=ae,ae+=X*ne.v/2,ne.pxmid=B(V,ae),ne.midangle=ae,ae+=X*ne.v/2,se=B(V,ae),ne.stopangle=ae,ne[ue]=se,ne.largeArc=ne.v>ie.vTotal/2?1:0,ne.halfangle=Math.PI*Math.min(ne.v/ie.vTotal,.5),ne.ring=1-Y.hole,ne.rInscribed=F(ne,ie))})(J),ue.attr("stroke-linejoin","round"),ue.each(function(){var se=M.select(this).selectAll("g.slice").data(J);se.enter().append("g").classed("slice",!0),se.exit().remove();var de=[[[],[]],[[],[]]],be=!1;se.each(function(Pe,Ie){if(Pe.hidden)M.select(this).selectAll("path,g").remove();else{Pe.pointNumber=Pe.i,Pe.curveNumber=ne.index,de[Pe.pxmid[1]<0?0:1][Pe.pxmid[0]<0?0:1].push(Pe);var Qe=re.cx,at=re.cy,Be=M.select(this),Ne=Be.selectAll("path.surface").data([Pe]);if(Ne.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),Be.call(g,oe,J),ne.pull){var nt=+l.castOption(ne.pull,Pe.pts)||0;nt>0&&(Qe+=nt*Pe.pxmid[0],at+=nt*Pe.pxmid[1])}Pe.cxFinal=Qe,Pe.cyFinal=at;var mt=ne.hole;if(Pe.v===re.vTotal){var Bt="M"+(Qe+Pe.px0[0])+","+(at+Pe.px0[1])+ct(Pe.px0,Pe.pxmid,!0,1)+ct(Pe.pxmid,Pe.px0,!0,1)+"Z";mt?Ne.attr("d","M"+(Qe+mt*Pe.px0[0])+","+(at+mt*Pe.px0[1])+ct(Pe.px0,Pe.pxmid,!1,mt)+ct(Pe.pxmid,Pe.px0,!1,mt)+"Z"+Bt):Ne.attr("d",Bt)}else{var Rt=ct(Pe.px0,Pe.px1,!0,1);if(mt){var zt=1-mt;Ne.attr("d","M"+(Qe+mt*Pe.px1[0])+","+(at+mt*Pe.px1[1])+ct(Pe.px1,Pe.px0,!1,mt)+"l"+zt*Pe.px0[0]+","+zt*Pe.px0[1]+Rt+"Z")}else Ne.attr("d","M"+Qe+","+at+"l"+Pe.px0[0]+","+Pe.px0[1]+Rt+"Z")}te(oe,Pe,re);var St=l.castOption(ne.textposition,Pe.pts),Xt=Be.selectAll("g.slicetext").data(Pe.text&&"none"!==St?[0]:[]);Xt.enter().append("g").classed("slicetext",!0),Xt.exit().remove(),Xt.each(function(){var Mt=i.ensureSingle(M.select(this),"text","",function(Xe){Xe.attr("data-notex",1)}),st=i.ensureUniformFontSize(oe,"outside"===St?function m(oe,ie,V){var Y=l.castOption(oe.outsidetextfont.color,ie.pts)||l.castOption(oe.textfont.color,ie.pts)||V.color,ae=l.castOption(oe.outsidetextfont.family,ie.pts)||l.castOption(oe.textfont.family,ie.pts)||V.family,X=l.castOption(oe.outsidetextfont.size,ie.pts)||l.castOption(oe.textfont.size,ie.pts)||V.size;return{color:Y,family:ae,size:X}}(ne,Pe,Y.font):d(ne,Pe,Y.font));Mt.text(Pe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(n.font,st).call(r.convertToTspans,oe);var pe,Se=n.bBox(Mt.node());if("outside"===St)pe=_(Se,Pe);else if(pe=b(Se,Pe,re),"auto"===St&&pe.scale<1){var ge=i.ensureUniformFontSize(oe,ne.outsidetextfont);Mt.call(n.font,ge),pe=_(Se=n.bBox(Mt.node()),Pe)}var Oe=pe.textPosAngle,we=void 0===Oe?Pe.pxmid:B(re.r,Oe);if(pe.targetX=Qe+we[0]*pe.rCenter+(pe.x||0),pe.targetY=at+we[1]*pe.rCenter+(pe.y||0),q(pe,Se),pe.outside){var He=pe.targetY;Pe.yLabelMin=He-Se.height/2,Pe.yLabelMid=He,Pe.yLabelMax=He+Se.height/2,Pe.labelExtraX=0,Pe.labelExtraY=0,be=!0}pe.fontSize=st.size,v(ne.type,pe,Y),J[Ie].transform=pe,i.setTransormAndDisplay(Mt,pe)})}function ct(Mt,st,Se,pe){var ge=pe*(st[0]-Mt[0]),Oe=pe*(st[1]-Mt[1]);return"a"+pe*re.r+","+pe*re.r+" 0 "+Pe.largeArc+(Se?" 1 ":" 0 ")+ge+","+Oe}});var De=M.select(this).selectAll("g.titletext").data(ne.title.text?[0]:[]);if(De.enter().append("g").classed("titletext",!0),De.exit().remove(),De.each(function(){var Qe,Pe=i.ensureSingle(M.select(this),"text","",function(at){at.attr("data-notex",1)}),Ie=ne.title.text;ne._meta&&(Ie=i.templateString(Ie,ne._meta)),Pe.text(Ie).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(n.font,ne.title.font).call(r.convertToTspans,oe),Qe="middle center"===ne.title.position?function z(oe){var ie=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/ie,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}(re):D(re,ae),Pe.attr("transform",a(Qe.x,Qe.y)+u(Math.min(1,Qe.scale))+a(Qe.tx,Qe.ty))}),be&&function H(oe,ie){var V,Y,ae,X,J,ue,re,ne,se,de,be,De,_e;function Ce(ze,Pe){return ze.pxmid[1]-Pe.pxmid[1]}function Le(ze,Pe){return Pe.pxmid[1]-ze.pxmid[1]}function Fe(ze,Pe){Pe||(Pe={});var nt,ct,mt,zt,Ie=Pe.labelExtraY+(Y?Pe.yLabelMax:Pe.yLabelMin),Qe=Y?ze.yLabelMin:ze.yLabelMax,at=Y?ze.yLabelMax:ze.yLabelMin,Be=ze.cyFinal+J(ze.px0[1],ze.px1[1]),Ne=Ie-Qe;if(Ne*re>0&&(ze.labelExtraY=Ne),i.isArrayOrTypedArray(ie.pull))for(ct=0;ct<de.length;ct++)!((mt=de[ct])===ze||(l.castOption(ie.pull,ze.pts)||0)>=(l.castOption(ie.pull,mt.pts)||0))&&((ze.pxmid[1]-mt.pxmid[1])*re>0?(Ne=mt.cyFinal+J(mt.px0[1],mt.px1[1])-Qe-ze.labelExtraY)*re>0&&(ze.labelExtraY+=Ne):(at+ze.labelExtraY-Be)*re>0&&(nt=3*ue*Math.abs(ct-de.indexOf(ze)),(zt=mt.cxFinal+X(mt.px0[0],mt.px1[0])+nt-(ze.cxFinal+ze.pxmid[0])-ze.labelExtraX)*ue>0&&(ze.labelExtraX+=zt)))}for(Y=0;Y<2;Y++)for(ae=Y?Ce:Le,J=Y?Math.max:Math.min,re=Y?1:-1,V=0;V<2;V++){for(X=V?Math.max:Math.min,ue=V?1:-1,(ne=oe[Y][V]).sort(ae),se=oe[1-Y][V],de=se.concat(ne),De=[],be=0;be<ne.length;be++)void 0!==ne[be].yLabelMid&&De.push(ne[be]);for(_e=!1,be=0;Y&&be<se.length;be++)if(void 0!==se[be].yLabelMid){_e=se[be];break}for(be=0;be<De.length;be++){var ke=be&&De[be-1];_e&&!be&&(ke=_e),Fe(De[be],ke)}}}(de,ne),function h(oe,ie){oe.each(function(V){var Y=M.select(this);if(V.labelExtraX||V.labelExtraY){var ae=Y.select("g.slicetext text");V.transform.targetX+=V.labelExtraX,V.transform.targetY+=V.labelExtraY,i.setTransormAndDisplay(ae,V.transform);var X=V.cxFinal+V.pxmid[0],ue="M"+X+","+(V.cyFinal+V.pxmid[1]),re=(V.yLabelMax-V.yLabelMin)*(V.pxmid[0]<0?-1:1)/4;if(V.labelExtraX){var ne=V.labelExtraX*V.pxmid[1]/V.pxmid[0],se=V.yLabelMid+V.labelExtraY-(V.cyFinal+V.pxmid[1]);Math.abs(ne)>Math.abs(se)?ue+="l"+se*V.pxmid[0]/V.pxmid[1]+","+se+"H"+(X+V.labelExtraX+re):ue+="l"+V.labelExtraX+","+ne+"v"+(se-ne)+"h"+re}else ue+="V"+(V.yLabelMid+V.labelExtraY)+"h"+re;i.ensureSingle(Y,"path","textline").call(T.stroke,ie.outsidetextfont.color).attr({"stroke-width":Math.min(2,ie.outsidetextfont.size/8),d:ue,fill:"none"})}else Y.select("path.textline").remove()})}(se,ne),be&&ne.automargin){var _e=n.bBox(ue.node()),Ce=ne.domain,Le=ae.w*(Ce.x[1]-Ce.x[0]),Fe=ae.h*(Ce.y[1]-Ce.y[0]),ke=(.5*Le-re.r)/ae.w,ze=(.5*Fe-re.r)/ae.h;I.autoMargin(oe,"pie."+ne.uid+".automargin",{xl:Ce.x[0]-ke,xr:Ce.x[1]+ke,yb:Ce.y[0]-ze,yt:Ce.y[1]+ze,l:Math.max(re.cx-re.r-_e.left,0),r:Math.max(_e.right-(re.cx+re.r),0),b:Math.max(_e.bottom-(re.cy+re.r),0),t:Math.max(re.cy-re.r-_e.top,0),pad:5})}})});setTimeout(function(){X.selectAll("tspan").each(function(){var J=M.select(this);J.attr("dy")&&J.attr("dy",J.attr("dy"))})},0)},formatSliceLabel:te,transformInsideText:b,determineInsideTextFont:d,positionTitleOutside:D,prerenderTitles:A,layoutAreas:j,attachFxHandlers:g,computeTransform:q}},92780:($,K,e)=>{"use strict";var M=e(21572),I=e(40631),t=e(99771).resizeText;$.exports=function(n){var i=n._fullLayout._pielayer.selectAll(".trace");t(n,i,"pie"),i.each(function(u){var r=u[0].trace,o=M.select(this);o.style({opacity:r.opacity}),o.selectAll("path.surface").each(function(v){M.select(this).call(I,v,r,n)})})}},40631:($,K,e)=>{"use strict";var M=e(8416),I=e(63149).castOption,t=e(22711);$.exports=function(n,i,u,a){var r=u.marker.line,o=I(r.color,i.pts)||M.defaultLine,v=I(r.width,i.pts)||0;n.call(t,i,u,a).style("stroke-width",v).call(M.stroke,o)}},52525:($,K,e)=>{"use strict";var M=e(55405);$.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc",description:["Faster alternative to specifying `x` and `y` separately.","If supplied, it must be a typed `Float32Array` array that","represents points such that `xy[i * 2] = x[i]` and `xy[i * 2 + 1] = y[i]`"].join(" ")},indices:{valType:"data_array",editType:"calc",description:["A sequential value, 0..n, supply it to avoid creating this array inside plotting.","If specified, it must be a typed `Int32Array` array.","Its length must be equal to or greater than the number of points.","For the best performance and memory use, create one large `indices` typed array","that is guaranteed to be at least as long as the largest number of points during","use, and reuse it on each `Plotly.restyle()` call."].join(" ")},xbounds:{valType:"data_array",editType:"calc",description:["Specify `xbounds` in the shape of `[xMin, xMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `ybounds` for the performance benefits."].join(" ")},ybounds:{valType:"data_array",editType:"calc",description:["Specify `ybounds` in the shape of `[yMin, yMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `xbounds` for the performance benefits."].join(" ")},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc",description:["Sets the marker fill color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc",description:["Sets the marker opacity. The default value is `1` (fully opaque).","If the markers are not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning.","Opacity fades the color even if `blend` is left on `false` even if there","is no translucency effect in that case."].join(" ")},blend:{valType:"boolean",dflt:null,editType:"calc",description:["Determines if colors are blended together for a translucency effect","in case `opacity` is specified as a value less then `1`.","Setting `blend` to `true` reduces zoom/pan","speed if used with large numbers of points."].join(" ")},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc",description:["Sets the minimum size (in px) of the rendered marker points, effective when","the `pointcloud` shows a million or more points."].join(" ")},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc",description:["Sets the maximum size (in px) of the rendered marker points.","Effective when the `pointcloud` shows only few points."].join(" ")},border:{color:{valType:"color",arrayOk:!1,editType:"calc",description:["Sets the stroke color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join(" ")},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Specifies what fraction of the marker area is covered with the","border."].join(" ")},editType:"calc"},editType:"calc"},transforms:void 0}},93526:($,K,e)=>{"use strict";var M=e(17745).gl_pointcloud2d,I=e(5228).isArrayOrTypedArray,t=e(31936),T=e(73332).findExtremes,n=e(26384);function i(r,o){this.scene=r,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var u=i.prototype;u.handlePick=function(r){var o=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*o],this.pickXYData[2*o+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:I(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},u.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=n(r,{})},u.updateFast=function(r){var y,s,x,g,m,d,o=this.xData=this.pickXData=r.x,v=this.yData=this.pickYData=r.y,p=this.pickXYData=r.xy,f=r.xbounds&&r.ybounds,l=r.indices,h=this.bounds;if(p){if(x=p,y=p.length>>>1,f)h[0]=r.xbounds[0],h[2]=r.xbounds[1],h[1]=r.ybounds[0],h[3]=r.ybounds[1];else for(d=0;d<y;d++)g=x[2*d],m=x[2*d+1],g<h[0]&&(h[0]=g),g>h[2]&&(h[2]=g),m<h[1]&&(h[1]=m),m>h[3]&&(h[3]=m);if(l)s=l;else for(s=new Int32Array(y),d=0;d<y;d++)s[d]=d}else for(y=o.length,x=new Float32Array(2*y),s=new Int32Array(y),d=0;d<y;d++)g=o[d],m=v[d],s[d]=d,x[2*d]=g,x[2*d+1]=m,g<h[0]&&(h[0]=g),g>h[2]&&(h[2]=g),m<h[1]&&(h[1]=m),m>h[3]&&(h[3]=m);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=x;var A=t(r.marker.color),b=t(r.marker.border.color),c=r.opacity*r.marker.opacity;A[3]*=c,this.pointcloudOptions.color=A;var S=r.marker.blend;if(null===S){S=o.length<100||v.length<100}this.pointcloudOptions.blend=S,b[3]*=c,this.pointcloudOptions.borderColor=b;var E=r.marker.sizemin,P=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=P,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var R=this.scene.xaxis,F=this.scene.yaxis,_=P/2||.5;r._extremes[R._id]=T(R,[h[0],h[2]],{ppad:_}),r._extremes[F._id]=T(F,[h[1],h[3]],{ppad:_})},u.dispose=function(){this.pointcloud.dispose()},$.exports=function a(r,o){var v=new i(r,o.uid);return v.update(o),v}},94312:($,K,e)=>{"use strict";var M=e(5228),I=e(52525);$.exports=function(T,n,i){function u(a,r){return M.coerce(T,n,I,a,r)}u("x"),u("y"),u("xbounds"),u("ybounds"),T.xy&&T.xy instanceof Float32Array&&(n.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(n.indices=T.indices),u("text"),u("marker.color",i),u("marker.opacity"),u("marker.blend"),u("marker.sizemin"),u("marker.sizemax"),u("marker.border.color",i),u("marker.border.arearatio"),n._length=null}},39154:($,K,e)=>{"use strict";var M=["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" ");$.exports={attributes:e(52525),supplyDefaults:e(94312),calc:e(69926),plot:e(93526),moduleType:"trace",name:"pointcloud",basePlotModule:e(94652),categories:["gl","gl2d","showLegend"],meta:{description:[M,"The data visualized as a point cloud set in `x` and `y`","using the WebGl plotting engine."].join(" ")}}},68796:($,K,e)=>{"use strict";var M=e(47297),I=e(82684),t=e(36593),T=e(44777),n=e(47472).Y,i=e(9430).fF,u=e(567),a=e(96906).templatedArray,r=e(88489).descriptionOnlyNumbers,o=e(18836).extendFlat,v=e(71859).overrideAll;($.exports=v({hoverinfo:o({},I.hoverinfo,{flags:[],arrayOk:!1,description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired.","Note that this attribute is superseded by `node.hoverinfo` and `node.hoverinfo`","for nodes and links respectively."].join(" ")}),hoverlabel:T.hoverlabel,domain:n({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h",description:"Sets the orientation of the Sankey diagram."},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:"",description:["Adds a unit to follow the value in the hover tooltip. Add a space if a separation","is necessary from the value."].join(" ")},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap",description:["If value is `snap` (the default), the node arrangement is assisted by automatic snapping of elements to","preserve space between nodes specified via `nodepad`.","If value is `perpendicular`, the nodes can only move along a line perpendicular to the flow.","If value is `freeform`, the nodes can freely move on the plane.","If value is `fixed`, the nodes are stationary."].join(" ")},textfont:M({description:"Sets the font for node labels"}),customdata:void 0,node:{label:{valType:"data_array",dflt:[],description:"The shown name of the node."},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"},description:["Groups of nodes.","Each group is defined by an array with the indices of the nodes it contains.","Multiple groups can be specified."].join(" ")},x:{valType:"data_array",dflt:[],description:"The normalized horizontal position of the node."},y:{valType:"data_array",dflt:[],description:"The normalized vertical position of the node."},color:{valType:"color",arrayOk:!0,description:["Sets the `node` color. It can be a single value, or an array for specifying color for each `node`.","If `node.color` is omitted, then the default `Plotly` color palette will be cycled through","to have a variety of colors. These defaults are not fully opaque, to allow some visibility of","what is beneath the node."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each node."].join(" ")},line:{color:{valType:"color",dflt:t.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `node`."].join(" ")},width:{valType:"number",min:0,dflt:.5,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `node`."].join(" ")}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20,description:"Sets the padding (in px) between the `nodes`."},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20,description:"Sets the thickness (in px) of the `nodes`."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering nodes.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:T.hoverlabel,hovertemplate:i({},{description:"Variables `sourceLinks` and `targetLinks` are arrays of link objects.",keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify",description:"Sets the alignment method used to position the nodes along the horizontal axis."},description:"The nodes of the Sankey plot."},link:{arrowlen:{valType:"number",min:0,dflt:0,description:["Sets the length (in px) of the links arrow, if 0 no arrow will be drawn."].join(" ")},label:{valType:"data_array",dflt:[],description:"The shown name of the link."},color:{valType:"color",arrayOk:!0,description:["Sets the `link` color. It can be a single value, or an array for specifying color for each `link`.","If `link.color` is omitted, then by default, a translucent grey link will be used."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each link."].join(" ")},line:{color:{valType:"color",dflt:t.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `link`."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `link`."].join(" ")}},source:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the source node."},target:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the target node."},value:{valType:"data_array",dflt:[],description:"A numeric value representing the flow volume value."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering links.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:T.hoverlabel,hovertemplate:i({},{description:"Variables `source` and `target` are node objects.",keys:["value","label"]}),colorscales:a("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",description:"The label of the links to color based on their concentration within a flow.",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1,description:"Sets the upper bound of the color domain."},cmin:{valType:"number",editType:"calc",dflt:0,description:"Sets the lower bound of the color domain."},colorscale:o(u().colorscale,{dflt:[[0,"white"],[1,"black"]]})}),description:"The links of the Sankey plot."}},"calc","nested")).transforms=void 0},41035:($,K,e)=>{"use strict";var M=e(71859).overrideAll,I=e(65644).a0,t=e(13388),T=e(82815),n=e(93720),i=e(25429),u=e(48356).prepSelect,a=e(5228),r=e(97799),o="sankey";function v(p,f){var l=p._fullData[f],y=p._fullLayout,s=y.dragmode,x="pan"===y.dragmode?"move":"crosshair",h=l._bgRect;if(h&&"pan"!==s&&"zoom"!==s){n(h,x);var g={_id:"x",c2p:a.identity,_offset:l._sankey.translateX,_length:l._sankey.width},m={_id:"y",c2p:a.identity,_offset:l._sankey.translateY,_length:l._sankey.height},d={gd:p,element:h.node(),plotinfo:{id:f,xaxis:g,yaxis:m,fillRangeItems:a.noop},subplot:f,xaxes:[g],yaxes:[m],doneFnCompleted:function(A){var c,b=p._fullData[f],S=b.node.groups.slice(),w=[];function E(_){for(var z=b._sankey.graph.nodes,D=0;D<z.length;D++)if(z[D].pointNumber===_)return z[D]}for(var P=0;P<A.length;P++){var R=E(A[P].pointNumber);if(R)if(R.group){for(var F=0;F<R.childrenNodes.length;F++)w.push(R.childrenNodes[F].pointNumber);S[R.pointNumber-b.node._count]=!1}else w.push(R.pointNumber)}c=S.filter(Boolean).concat([w]),r.call("_guiRestyle",p,{"node.groups":[c]},f)},prepFn:function(A,b,c){u(A,b,c,d,s)}};i.init(d)}}K.name=o,K.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),K.plot=function(p){var f=I(p.calcdata,o)[0];t(p,f),K.updateFx(p)},K.clean=function(p,f,l,y){var s=y._has&&y._has(o),x=f._has&&f._has(o);s&&!x&&(y._paperdiv.selectAll(".sankey").remove(),y._paperdiv.selectAll(".bgsankey").remove())},K.updateFx=function(p){for(var f=0;f<p._fullData.length;f++)v(p,f)}},55160:($,K,e)=>{"use strict";var M=e(93113),I=e(5228),t=e(47764).wrap,T=I.isArrayOrTypedArray,n=I.isIndex,i=e(45103);function u(r){var h,o=r.node,v=r.link,p=[],f=T(v.color),l=T(v.customdata),y={},s={},x=v.colorscales.length;for(h=0;h<x;h++){var g=v.colorscales[h],m=i.extractScale(g,{cLetter:"c"}),d=i.makeColorScaleFunc(m);s[g.label]=d}var A=0;for(h=0;h<v.value.length;h++)v.source[h]>A&&(A=v.source[h]),v.target[h]>A&&(A=v.target[h]);var b=A+1;r.node._count=b;var c,S=r.node.groups,w={};for(h=0;h<S.length;h++){var E=S[h];for(c=0;c<E.length;c++){var P=E[c],R=b+h;w.hasOwnProperty(P)?I.warn("Node "+P+" is already part of a group."):w[P]=R}}var F={source:[],target:[]};for(h=0;h<v.value.length;h++){var _=v.value[h],z=v.source[h],D=v.target[h];if(_>0&&n(z,b)&&n(D,b)&&(!w.hasOwnProperty(z)||!w.hasOwnProperty(D)||w[z]!==w[D])){w.hasOwnProperty(D)&&(D=w[D]),w.hasOwnProperty(z)&&(z=w[z]),D=+D,y[z=+z]=y[D]=!0;var k="";v.label&&v.label[h]&&(k=v.label[h]);var O=null;k&&s.hasOwnProperty(k)&&(O=s[k]),p.push({pointNumber:h,label:k,color:f?v.color[h]:v.color,customdata:l?v.customdata[h]:v.customdata,concentrationscale:O,source:z,target:D,value:+_}),F.source.push(z),F.target.push(D)}}var U=b+S.length,H=T(o.color),j=T(o.customdata),ee=[];for(h=0;h<U;h++)if(y[h]){var W=o.label[h];ee.push({group:h>b-1,childrenNodes:[],pointNumber:h,label:W,color:H?o.color[h]:o.color,customdata:j?o.customdata[h]:o.customdata})}var B=!1;return function a(r,o,v){for(var p=I.init2dArray(r,0),f=0;f<Math.min(o.length,v.length);f++)if(I.isIndex(o[f],r)&&I.isIndex(v[f],r)){if(o[f]===v[f])return!0;p[o[f]].push(v[f])}var l=M(p);return l.components.some(function(y){return y.length>1})}(U,F.source,F.target)&&(B=!0),{circular:B,links:p,nodes:ee,groups:S,groupLookup:w}}$.exports=function(o,v){var p=u(v);return t({circular:p.circular,_nodes:p.nodes,_links:p.links,_groups:p.groups,_groupLookup:p.groupLookup})}},22438:$=>{"use strict";$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47743:($,K,e)=>{"use strict";var M=e(5228),I=e(68796),t=e(8416),T=e(80791),n=e(47472).c,i=e(62362),u=e(96906),a=e(84322);function r(o,v){function p(f,l){return M.coerce(o,v,I.link.colorscales,f,l)}p("label"),p("cmin"),p("cmax"),p("colorscale")}$.exports=function(v,p,f,l){function y(E,P){return M.coerce(v,p,I,E,P)}var s=M.extendDeep(l.hoverlabel,v.hoverlabel),x=v.node,h=u.newContainer(p,"node");function g(E,P){return M.coerce(x,h,I.node,E,P)}g("label"),g("groups"),g("x"),g("y"),g("pad"),g("thickness"),g("line.color"),g("line.width"),g("hoverinfo",v.hoverinfo),i(x,h,g,s),g("hovertemplate"),g("align");var m=l.colorway;g("color",h.label.map(function(E,P){return t.addOpacity(function(E){return m[E%m.length]}(P),.8)})),g("customdata");var A=v.link||{},b=u.newContainer(p,"link");function c(E,P){return M.coerce(A,b,I.link,E,P)}c("label"),c("arrowlen"),c("source"),c("target"),c("value"),c("line.color"),c("line.width"),c("hoverinfo",v.hoverinfo),i(A,b,c,s),c("hovertemplate");var w,S=T(l.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";c("color",M.repeat(S,b.value.length)),c("customdata"),a(A,b,{name:"colorscales",handleItemDefaults:r}),n(p,l,y),y("orientation"),y("valueformat"),y("valuesuffix"),h.x.length&&h.y.length&&(w="freeform"),y("arrangement",w),M.coerceFont(y,"textfont",M.extendFlat({},l.font)),p._length=null}},8909:($,K,e)=>{"use strict";$.exports={attributes:e(68796),supplyDefaults:e(47743),calc:e(55160),plot:e(13388),moduleType:"trace",name:"sankey",basePlotModule:e(41035),selectPoints:e(23984),categories:["noOpacity"],meta:{description:["Sankey plots for network flow data analysis.","The nodes are specified in `nodes` and the links between sources and targets in `links`.","The colors are set in `nodes[i].color` and `links[i].color`, otherwise defaults are used."].join(" ")}}},13388:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=I.numberFormat,T=e(84421),n=e(76863),i=e(8416),u=e(22438).cn,a=I._;function r(m){return""!==m}function o(m,d){return m.filter(function(A){return A.key===d.traceId})}function v(m,d){M.select(m).select("path").style("fill-opacity",d),M.select(m).select("rect").style("fill-opacity",d)}function p(m){M.select(m).select("text.name").style("fill","black")}function f(m){return function(d){return-1!==m.node.sourceLinks.indexOf(d.link)||-1!==m.node.targetLinks.indexOf(d.link)}}function l(m){return function(d){return-1!==d.node.sourceLinks.indexOf(m.link)||-1!==d.node.targetLinks.indexOf(m.link)}}function y(m,d,A){d&&A&&o(A,d).selectAll("."+u.sankeyLink).filter(f(d)).call(x.bind(0,d,A,!1))}function s(m,d,A){d&&A&&o(A,d).selectAll("."+u.sankeyLink).filter(f(d)).call(h.bind(0,d,A,!1))}function x(m,d,A,b){b.style("fill-opacity",function(c){if(!c.link.concentrationscale)return.4}),b.each(function(c){var S=c.link.label;""!==S&&o(d,m).selectAll("."+u.sankeyLink).filter(function(w){return w.link.label===S}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return.4})}),A&&o(d,m).selectAll("."+u.sankeyNode).filter(l(m)).call(y)}function h(m,d,A,b){b.style("fill-opacity",function(c){return c.tinyColorAlpha}),b.each(function(c){var S=c.link.label;""!==S&&o(d,m).selectAll("."+u.sankeyLink).filter(function(w){return w.link.label===S}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),A&&o(d,m).selectAll(u.sankeyNode).filter(l(m)).call(s)}function g(m,d){var A=m.hoverlabel||{},b=I.nestedProperty(A,d).get();return!Array.isArray(b)&&b}$.exports=function(d,A){for(var b=d._fullLayout,c=b._paper,S=b._size,w=0;w<d._fullData.length;w++)if(d._fullData[w].visible&&d._fullData[w].type===u.sankey&&!d._fullData[w]._viewInitial){var E=d._fullData[w].node;d._fullData[w]._viewInitial={node:{groups:E.groups.slice(),x:E.x.slice(),y:E.y.slice()}}}var F=a(d,"source:")+" ",_=a(d,"target:")+" ",z=a(d,"concentration:")+" ",D=a(d,"incoming flow count:")+" ",k=a(d,"outgoing flow count:")+" ";T(d,c,A,{width:S.w,height:S.h,margin:{t:S.t,r:S.r,b:S.b,l:S.l}},{linkEvents:{hover:function(B,te,q){!1!==d._fullLayout.hovermode&&(M.select(B).call(x.bind(0,te,q,!0)),"skip"!==te.link.trace.link.hoverinfo&&(te.link.fullData=te.link.trace,d.emit("plotly_hover",{event:M.event,points:[te.link]})))},follow:function(B,te){if(!1!==d._fullLayout.hovermode){var q=te.link.trace.link;if("none"!==q.hoverinfo&&"skip"!==q.hoverinfo){for(var oe=[],V=0,Y=0;Y<te.flow.links.length;Y++){var ae=te.flow.links[Y];if("closest"!==d._fullLayout.hovermode||te.link.pointNumber===ae.pointNumber){te.link.pointNumber===ae.pointNumber&&(V=Y),ae.fullData=ae.trace,q=te.link.trace.link;var X=ie(ae),J={valueLabel:t(te.valueFormat)(ae.value)+te.valueSuffix};oe.push({x:X[0],y:X[1],name:J.valueLabel,text:[ae.label||"",F+ae.source.label,_+ae.target.label,ae.concentrationscale?z+t("%0.2f")(ae.flow.labelConcentration):""].filter(r).join("<br>"),color:g(q,"bgcolor")||i.addOpacity(ae.color,1),borderColor:g(q,"bordercolor"),fontFamily:g(q,"font.family"),fontSize:g(q,"font.size"),fontColor:g(q,"font.color"),nameLength:g(q,"namelength"),textAlign:g(q,"align"),idealAlign:M.event.x<X[0]?"right":"left",hovertemplate:q.hovertemplate,hovertemplateLabels:J,eventData:[ae]})}}n.loneHover(oe,{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:d,anchorIndex:V}).each(function(){te.link.concentrationscale||v(this,.65),p(this)})}}function ie(re){var ne,se;re.circular?(ne=(re.circularPathData.leftInnerExtent+re.circularPathData.rightInnerExtent)/2,se=re.circularPathData.verticalFullExtent):(ne=(re.source.x1+re.target.x0)/2,se=(re.y0+re.y1)/2);var de=[ne,se];return"v"===re.trace.orientation&&de.reverse(),de[0]+=te.parent.translateX,de[1]+=te.parent.translateY,de}},unhover:function(B,te,q){!1!==d._fullLayout.hovermode&&(M.select(B).call(h.bind(0,te,q,!0)),"skip"!==te.link.trace.link.hoverinfo&&(te.link.fullData=te.link.trace,d.emit("plotly_unhover",{event:M.event,points:[te.link]})),n.loneUnhover(b._hoverlayer.node()))},select:function(B,te){var q=te.link;q.originalEvent=M.event,d._hoverdata=[q],n.click(d,{target:!0})}},nodeEvents:{hover:function(B,te,q){!1!==d._fullLayout.hovermode&&(M.select(B).call(y,te,q),"skip"!==te.node.trace.node.hoverinfo&&(te.node.fullData=te.node.trace,d.emit("plotly_hover",{event:M.event,points:[te.node]})))},follow:function(B,te){if(!1!==d._fullLayout.hovermode){var q=te.node.trace.node;if("none"!==q.hoverinfo&&"skip"!==q.hoverinfo){var oe=M.select(B).select("."+u.nodeRect),ie=d._fullLayout._paperdiv.node().getBoundingClientRect(),V=oe.node().getBoundingClientRect(),Y=V.left-2-ie.left,ae=V.right+2-ie.left,X=V.top+V.height/4-ie.top,J={valueLabel:t(te.valueFormat)(te.node.value)+te.valueSuffix};te.node.fullData=te.node.trace,d._fullLayout._calcInverseTransform(d);var ue=d._fullLayout._invScaleX,re=d._fullLayout._invScaleY,ne=n.loneHover({x0:ue*Y,x1:ue*ae,y:re*X,name:t(te.valueFormat)(te.node.value)+te.valueSuffix,text:[te.node.label,D+te.node.targetLinks.length,k+te.node.sourceLinks.length].filter(r).join("<br>"),color:g(q,"bgcolor")||te.tinyColorHue,borderColor:g(q,"bordercolor"),fontFamily:g(q,"font.family"),fontSize:g(q,"font.size"),fontColor:g(q,"font.color"),nameLength:g(q,"namelength"),textAlign:g(q,"align"),idealAlign:"left",hovertemplate:q.hovertemplate,hovertemplateLabels:J,eventData:[te.node]},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:d});v(ne,.85),p(ne)}}},unhover:function(B,te,q){!1!==d._fullLayout.hovermode&&(M.select(B).call(s,te,q),"skip"!==te.node.trace.node.hoverinfo&&(te.node.fullData=te.node.trace,d.emit("plotly_unhover",{event:M.event,points:[te.node]})),n.loneUnhover(b._hoverlayer.node()))},select:function(B,te,q){var oe=te.node;oe.originalEvent=M.event,d._hoverdata=[oe],M.select(B).call(s,te,q),n.click(d,{target:!0})}}})}},84421:($,K,e)=>{"use strict";var M=e(65167),I=e(55609).k4,t=e(21572),T=e(28010),n=e(16),i=e(22438),u=e(80791),a=e(8416),r=e(27630),o=e(5228),v=o.strTranslate,p=o.strRotate,f=e(47764),l=f.keyFun,y=f.repeat,s=f.unwrap,x=e(88565),h=e(97799),g=e(94598),m=g.CAP_SHIFT,d=g.LINE_SPACING;function b(ie,V,Y){var Le,ae=s(V),X=ae.trace,J=X.domain,ue="h"===X.orientation,re=X.node.pad,ne=X.node.thickness,se={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[X.node.align],de=ie.width*(J.x[1]-J.x[0]),be=ie.height*(J.y[1]-J.y[0]),De=ae._nodes,_e=ae._links,Ce=ae.circular;(Le=Ce?n.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(i.sankeyIterations).size(ue?[de,be]:[be,de]).nodeWidth(ne).nodePadding(re).nodeId(function(zt){return zt.pointNumber}).nodeAlign(se).nodes(De).links(_e);var ke,ze,Pe,Fe=Le();for(var Ie in Le.nodePadding()<re&&o.warn("node.pad was reduced to ",Le.nodePadding()," to fit within the figure."),ae._groupLookup){var at,Qe=parseInt(ae._groupLookup[Ie]);for(ke=0;ke<Fe.nodes.length;ke++)if(Fe.nodes[ke].pointNumber===Qe){at=Fe.nodes[ke];break}if(at){var Be={pointNumber:parseInt(Ie),x0:at.x0,x1:at.x1,y0:at.y0,y1:at.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Fe.nodes.unshift(Be),at.childrenNodes.unshift(Be)}}if(function Ne(){for(ke=0;ke<Fe.nodes.length;ke++){var Xt,Mt,zt=Fe.nodes[ke],St={};for(ze=0;ze<zt.targetLinks.length;ze++)Xt=(Mt=zt.targetLinks[ze]).source.pointNumber+":"+Mt.target.pointNumber,St.hasOwnProperty(Xt)||(St[Xt]=[]),St[Xt].push(Mt);var st=Object.keys(St);for(ze=0;ze<st.length;ze++){var Se=St[Xt=st[ze]],pe=0,ge={};for(Pe=0;Pe<Se.length;Pe++)ge[(Mt=Se[Pe]).label]||(ge[Mt.label]=0),ge[Mt.label]+=Mt.value,pe+=Mt.value;for(Pe=0;Pe<Se.length;Pe++)(Mt=Se[Pe]).flow={value:pe,labelConcentration:ge[Mt.label]/pe,concentration:Mt.value/pe,links:Se},Mt.concentrationscale&&(Mt.color=u(Mt.concentrationscale(Mt.flow.labelConcentration)))}var Oe=0;for(ze=0;ze<zt.sourceLinks.length;ze++)Oe+=zt.sourceLinks[ze].value;for(ze=0;ze<zt.sourceLinks.length;ze++)(Mt=zt.sourceLinks[ze]).concentrationOut=Mt.value/Oe;var we=0;for(ze=0;ze<zt.targetLinks.length;ze++)we+=zt.targetLinks[ze].value;for(ze=0;ze<zt.targetLinks.length;ze++)(Mt=zt.targetLinks[ze]).concenrationIn=Mt.value/we}}(),X.node.x.length&&X.node.y.length){for(ke=0;ke<Math.min(X.node.x.length,X.node.y.length,Fe.nodes.length);ke++)if(X.node.x[ke]&&X.node.y[ke]){var mt=[X.node.x[ke]*de,X.node.y[ke]*be];Fe.nodes[ke].x0=mt[0]-ne/2,Fe.nodes[ke].x1=mt[0]+ne/2;var Bt=Fe.nodes[ke].y1-Fe.nodes[ke].y0;Fe.nodes[ke].y0=mt[1]-Bt/2,Fe.nodes[ke].y1=mt[1]+Bt/2}if("snap"===X.arrangement)!function nt(zt){zt.forEach(function(St){var Xt,Mt,pe,st=0,Se=St.length;for(St.sort(function(ge,Oe){return ge.y0-Oe.y0}),pe=0;pe<Se;++pe)(Xt=St[pe]).y0>=st||(Mt=st-Xt.y0)>1e-6&&(Xt.y0+=Mt,Xt.y1+=Mt),st=Xt.y1+re})}(function ct(zt){var st,pe,St=zt.map(function(Oe,we){return{x0:Oe.x0,index:we}}).sort(function(Oe,we){return Oe.x0-we.x0}),Xt=[],Mt=-1,Se=-1/0;for(ke=0;ke<St.length;ke++){var ge=zt[St[ke].index];ge.x0>Se+ne&&(Mt+=1,st=ge.x0),Se=ge.x0,Xt[Mt]||(Xt[Mt]=[]),Xt[Mt].push(ge),pe=st-ge.x0,ge.x0+=pe,ge.x1+=pe}return Xt}(De=Fe.nodes));Le.update(Fe)}return{circular:Ce,key:Y,trace:X,guid:o.randstr(),horizontal:ue,width:de,height:be,nodePad:X.node.pad,nodeLineColor:X.node.line.color,nodeLineWidth:X.node.line.width,linkLineColor:X.link.line.color,linkLineWidth:X.link.line.width,linkArrowLength:X.link.arrowlen,valueFormat:X.valueformat,valueSuffix:X.valuesuffix,textFont:X.textfont,translateX:J.x[0]*ie.width+ie.margin.l,translateY:ie.height-J.y[1]*ie.height+ie.margin.t,dragParallel:ue?be:de,dragPerpendicular:ue?de:be,arrangement:X.arrangement,sankey:Le,graph:Fe,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function c(ie,V,Y){var ae=u(V.color),J=V.source.label+"|"+V.target.label+"__"+Y;return V.trace=ie.trace,V.curveNumber=ie.trace.index,{circular:ie.circular,key:J,traceId:ie.key,pointNumber:V.pointNumber,link:V,tinyColorHue:a.tinyRGB(ae),tinyColorAlpha:ae.getAlpha(),linkPath:w,linkLineColor:ie.linkLineColor,linkLineWidth:ie.linkLineWidth,linkArrowLength:ie.linkArrowLength,valueFormat:ie.valueFormat,valueSuffix:ie.valueSuffix,sankey:ie.sankey,parent:ie,interactionState:ie.interactionState,flow:V.flow}}function w(){return function V(Y){var ae=Y.linkArrowLength;if(Y.link.circular)return function S(ie,V){var ae=ie.width/2,X=ie.circularPathData;return"top"===ie.circularLinkType?"M "+(X.targetX-V)+" "+(X.targetY+ae)+" L"+(X.rightInnerExtent-V)+" "+(X.targetY+ae)+"A"+(X.rightLargeArcRadius+ae)+" "+(X.rightSmallArcRadius+ae)+" 0 0 1 "+(X.rightFullExtent-ae-V)+" "+(X.targetY-X.rightSmallArcRadius)+"L"+(X.rightFullExtent-ae-V)+" "+X.verticalRightInnerExtent+"A"+(X.rightLargeArcRadius+ae)+" "+(X.rightLargeArcRadius+ae)+" 0 0 1 "+(X.rightInnerExtent-V)+" "+(X.verticalFullExtent-ae)+"L"+X.leftInnerExtent+" "+(X.verticalFullExtent-ae)+"A"+(X.leftLargeArcRadius+ae)+" "+(X.leftLargeArcRadius+ae)+" 0 0 1 "+(X.leftFullExtent+ae)+" "+X.verticalLeftInnerExtent+"L"+(X.leftFullExtent+ae)+" "+(X.sourceY-X.leftSmallArcRadius)+"A"+(X.leftLargeArcRadius+ae)+" "+(X.leftSmallArcRadius+ae)+" 0 0 1 "+X.leftInnerExtent+" "+(X.sourceY+ae)+"L"+X.sourceX+" "+(X.sourceY+ae)+"L"+X.sourceX+" "+(X.sourceY-ae)+"L"+X.leftInnerExtent+" "+(X.sourceY-ae)+"A"+(X.leftLargeArcRadius-ae)+" "+(X.leftSmallArcRadius-ae)+" 0 0 0 "+(X.leftFullExtent-ae)+" "+(X.sourceY-X.leftSmallArcRadius)+"L"+(X.leftFullExtent-ae)+" "+X.verticalLeftInnerExtent+"A"+(X.leftLargeArcRadius-ae)+" "+(X.leftLargeArcRadius-ae)+" 0 0 0 "+X.leftInnerExtent+" "+(X.verticalFullExtent+ae)+"L"+(X.rightInnerExtent-V)+" "+(X.verticalFullExtent+ae)+"A"+(X.rightLargeArcRadius-ae)+" "+(X.rightLargeArcRadius-ae)+" 0 0 0 "+(X.rightFullExtent+ae-V)+" "+X.verticalRightInnerExtent+"L"+(X.rightFullExtent+ae-V)+" "+(X.targetY-X.rightSmallArcRadius)+"A"+(X.rightLargeArcRadius-ae)+" "+(X.rightSmallArcRadius-ae)+" 0 0 0 "+(X.rightInnerExtent-V)+" "+(X.targetY-ae)+"L"+(X.targetX-V)+" "+(X.targetY-ae)+(V>0?"L"+X.targetX+" "+X.targetY:"")+"Z":"M "+(X.targetX-V)+" "+(X.targetY-ae)+" L"+(X.rightInnerExtent-V)+" "+(X.targetY-ae)+"A"+(X.rightLargeArcRadius+ae)+" "+(X.rightSmallArcRadius+ae)+" 0 0 0 "+(X.rightFullExtent-ae-V)+" "+(X.targetY+X.rightSmallArcRadius)+"L"+(X.rightFullExtent-ae-V)+" "+X.verticalRightInnerExtent+"A"+(X.rightLargeArcRadius+ae)+" "+(X.rightLargeArcRadius+ae)+" 0 0 0 "+(X.rightInnerExtent-V)+" "+(X.verticalFullExtent+ae)+"L"+X.leftInnerExtent+" "+(X.verticalFullExtent+ae)+"A"+(X.leftLargeArcRadius+ae)+" "+(X.leftLargeArcRadius+ae)+" 0 0 0 "+(X.leftFullExtent+ae)+" "+X.verticalLeftInnerExtent+"L"+(X.leftFullExtent+ae)+" "+(X.sourceY+X.leftSmallArcRadius)+"A"+(X.leftLargeArcRadius+ae)+" "+(X.leftSmallArcRadius+ae)+" 0 0 0 "+X.leftInnerExtent+" "+(X.sourceY-ae)+"L"+X.sourceX+" "+(X.sourceY-ae)+"L"+X.sourceX+" "+(X.sourceY+ae)+"L"+X.leftInnerExtent+" "+(X.sourceY+ae)+"A"+(X.leftLargeArcRadius-ae)+" "+(X.leftSmallArcRadius-ae)+" 0 0 1 "+(X.leftFullExtent-ae)+" "+(X.sourceY+X.leftSmallArcRadius)+"L"+(X.leftFullExtent-ae)+" "+X.verticalLeftInnerExtent+"A"+(X.leftLargeArcRadius-ae)+" "+(X.leftLargeArcRadius-ae)+" 0 0 1 "+X.leftInnerExtent+" "+(X.verticalFullExtent-ae)+"L"+(X.rightInnerExtent-V)+" "+(X.verticalFullExtent-ae)+"A"+(X.rightLargeArcRadius-ae)+" "+(X.rightLargeArcRadius-ae)+" 0 0 1 "+(X.rightFullExtent+ae-V)+" "+X.verticalRightInnerExtent+"L"+(X.rightFullExtent+ae-V)+" "+(X.targetY+X.rightSmallArcRadius)+"A"+(X.rightLargeArcRadius-ae)+" "+(X.rightSmallArcRadius-ae)+" 0 0 1 "+(X.rightInnerExtent-V)+" "+(X.targetY+ae)+"L"+(X.targetX-V)+" "+(X.targetY+ae)+(V>0?"L"+X.targetX+" "+X.targetY:"")+"Z"}(Y.link,ae);var X=Math.abs((Y.link.target.x0-Y.link.source.x1)/2);ae>X&&(ae=X);var J=Y.link.source.x1,ue=Y.link.target.x0-ae,re=I(J,ue),ne=re(.5),se=re(.5),de=Y.link.y0-Y.link.width/2,be=Y.link.y0+Y.link.width/2,De=Y.link.y1-Y.link.width/2,_e=Y.link.y1+Y.link.width/2,Ce="M"+J+","+de,Le="C"+ne+","+de+" "+se+","+De+" "+ue+","+De,Fe="C"+se+","+_e+" "+ne+","+be+" "+J+","+be,ke=ae>0?"L"+(ue+ae)+","+(De+Y.link.width/2):"";return Ce+Le+(ke+="L"+ue+","+_e)+Fe+"Z"}}function E(ie,V){var Y=u(V.color),ae=i.nodePadAcross,X=ie.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var J=V.dx,ue=Math.max(.5,V.dy),re="node_"+V.pointNumber;return V.group&&(re=o.randstr()),V.trace=ie.trace,V.curveNumber=ie.trace.index,{index:V.pointNumber,key:re,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:ie.key,trace:ie.trace,node:V,nodePad:ie.nodePad,nodeLineColor:ie.nodeLineColor,nodeLineWidth:ie.nodeLineWidth,textFont:ie.textFont,size:ie.horizontal?ie.height:ie.width,visibleWidth:Math.ceil(J),visibleHeight:ue,zoneX:-ae,zoneY:-X,zoneWidth:J+2*ae,zoneHeight:ue+2*X,labelY:ie.horizontal?V.dy/2+1:V.dx/2+1,left:1===V.originalLayer,sizeAcross:ie.width,forceLayouts:ie.forceLayouts,horizontal:ie.horizontal,darkBackground:Y.getBrightness()<=128,tinyColorHue:a.tinyRGB(Y),tinyColorAlpha:Y.getAlpha(),valueFormat:ie.valueFormat,valueSuffix:ie.valueSuffix,sankey:ie.sankey,graph:ie.graph,arrangement:ie.arrangement,uniqueNodeLabelPathId:[ie.guid,ie.key,re].join("_"),interactionState:ie.interactionState,figure:ie}}function P(ie){ie.attr("transform",function(V){return v(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function R(ie){ie.call(P)}function F(ie,V){ie.call(R),V.attr("d",w())}function _(ie){ie.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function z(ie){return ie.link.width>1||ie.linkLineWidth>0}function D(ie){return v(ie.translateX,ie.translateY)+(ie.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function k(ie,V,Y){ie.on(".basic",null).on("mouseover.basic",function(ae){!ae.interactionState.dragInProgress&&!ae.partOfGroup&&(Y.hover(this,ae,V),ae.interactionState.hovered=[this,ae])}).on("mousemove.basic",function(ae){!ae.interactionState.dragInProgress&&!ae.partOfGroup&&(Y.follow(this,ae),ae.interactionState.hovered=[this,ae])}).on("mouseout.basic",function(ae){!ae.interactionState.dragInProgress&&!ae.partOfGroup&&(Y.unhover(this,ae,V),ae.interactionState.hovered=!1)}).on("click.basic",function(ae){ae.interactionState.hovered&&(Y.unhover(this,ae,V),ae.interactionState.hovered=!1),!ae.interactionState.dragInProgress&&!ae.partOfGroup&&Y.select(this,ae,V)})}function O(ie,V,Y,ae){var X=t.behavior.drag().origin(function(J){return{x:J.node.x0+J.visibleWidth/2,y:J.node.y0+J.visibleHeight/2}}).on("dragstart",function(J){if("fixed"!==J.arrangement&&(o.ensureSingle(ae._fullLayout._infolayer,"g","dragcover",function(re){ae._fullLayout._dragCover=re}),o.raiseToTop(this),J.interactionState.dragInProgress=J.node,B(J.node),J.interactionState.hovered&&(Y.nodeEvents.unhover.apply(0,J.interactionState.hovered),J.interactionState.hovered=!1),"snap"===J.arrangement)){var ue=J.traceId+"|"+J.key;J.forceLayouts[ue]?J.forceLayouts[ue].alpha(1):function U(ie,V,Y,ae){!function q(ie){for(var V=0;V<ie.length;V++)ie[V].y=(ie[V].y0+ie[V].y1)/2,ie[V].x=(ie[V].x0+ie[V].x1)/2}(Y.graph.nodes);var X=Y.graph.nodes.filter(function(J){return J.originalX===Y.node.originalX}).filter(function(J){return!J.partOfGroup});Y.forceLayouts[V]=M.forceSimulation(X).alphaDecay(0).force("collide",M.forceCollide().radius(function(J){return J.dy/2+Y.nodePad/2}).strength(1).iterations(i.forceIterations)).force("constrain",function j(ie,V,Y,ae){return function(){for(var J=0,ue=0;ue<Y.length;ue++){var re=Y[ue];re===ae.interactionState.dragInProgress?(re.x=re.lastDraggedX,re.y=re.lastDraggedY):(re.vx=(re.originalX-re.x)/i.forceTicksPerFrame,re.y=Math.min(ae.size-re.dy/2,Math.max(re.dy/2,re.y))),J=Math.max(J,Math.abs(re.vx),Math.abs(re.vy))}!ae.interactionState.dragInProgress&&J<.1&&ae.forceLayouts[V].alpha()>0&&ae.forceLayouts[V].alpha(0)}}(0,V,X,Y)).stop()}(0,ue,J),function H(ie,V,Y,ae,X){window.requestAnimationFrame(function J(){var ue;for(ue=0;ue<i.forceTicksPerFrame;ue++)Y.forceLayouts[ae].tick();if(function oe(ie){for(var V=0;V<ie.length;V++)ie[V].y0=ie[V].y-ie[V].dy/2,ie[V].y1=ie[V].y0+ie[V].dy,ie[V].x0=ie[V].x-ie[V].dx/2,ie[V].x1=ie[V].x0+ie[V].dx}(Y.graph.nodes),Y.sankey.update(Y.graph),F(ie.filter(te(Y)),V),Y.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(J);else{var ne=Y.node.originalX;Y.node.x0=ne-Y.visibleWidth/2,Y.node.x1=ne+Y.visibleWidth/2,ee(Y,X)}})}(ie,V,J,ue,ae)}}).on("drag",function(J){if("fixed"!==J.arrangement){var ue=t.event.x,re=t.event.y;"snap"===J.arrangement?(J.node.x0=ue-J.visibleWidth/2,J.node.x1=ue+J.visibleWidth/2,J.node.y0=re-J.visibleHeight/2,J.node.y1=re+J.visibleHeight/2):("freeform"===J.arrangement&&(J.node.x0=ue-J.visibleWidth/2,J.node.x1=ue+J.visibleWidth/2),re=Math.max(0,Math.min(J.size-J.visibleHeight/2,re)),J.node.y0=re-J.visibleHeight/2,J.node.y1=re+J.visibleHeight/2),B(J.node),"snap"!==J.arrangement&&(J.sankey.update(J.graph),F(ie.filter(te(J)),V))}}).on("dragend",function(J){if("fixed"!==J.arrangement){J.interactionState.dragInProgress=!1;for(var ue=0;ue<J.node.childrenNodes.length;ue++)J.node.childrenNodes[ue].x=J.node.x,J.node.childrenNodes[ue].y=J.node.y;"snap"!==J.arrangement&&ee(J,ae)}});ie.on(".drag",null).call(X)}function ee(ie,V){for(var Y=[],ae=[],X=0;X<ie.graph.nodes.length;X++){var J=(ie.graph.nodes[X].x0+ie.graph.nodes[X].x1)/2,ue=(ie.graph.nodes[X].y0+ie.graph.nodes[X].y1)/2;Y.push(J/ie.figure.width),ae.push(ue/ie.figure.height)}h.call("_guiRestyle",V,{"node.x":[Y],"node.y":[ae]},ie.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function B(ie){ie.lastDraggedX=ie.x0+ie.dx/2,ie.lastDraggedY=ie.y0+ie.dy/2}function te(ie){return function(V){return V.node.originalX===ie.node.originalX}}$.exports=function(ie,V,Y,ae,X){var J=ie._context.staticPlot,ue=!1;o.ensureSingle(ie._fullLayout._infolayer,"g","first-render",function(){ue=!0});var re=ie._fullLayout._dragCover,ne=Y.filter(function(Fe){return s(Fe).trace.visible}).map(b.bind(null,ae)),se=V.selectAll("."+i.cn.sankey).data(ne,l);se.exit().remove(),se.enter().append("g").classed(i.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",J?"none":"auto").attr("transform",D),se.each(function(Fe,ke){ie._fullData[ke]._sankey=Fe;var ze="bgsankey-"+Fe.trace.uid+"-"+ke;o.ensureSingle(ie._fullLayout._draggers,"rect",ze),ie._fullData[ke]._bgRect=t.select("."+ze),ie._fullData[ke]._bgRect.style("pointer-events",J?"none":"all").attr("width",Fe.width).attr("height",Fe.height).attr("x",Fe.translateX).attr("y",Fe.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(i.ease).duration(i.duration).attr("transform",D);var de=se.selectAll("."+i.cn.sankeyLinks).data(y,l);de.enter().append("g").classed(i.cn.sankeyLinks,!0).style("fill","none");var be=de.selectAll("."+i.cn.sankeyLink).data(function(Fe){return Fe.graph.links.filter(function(ze){return ze.value}).map(c.bind(null,Fe))},l);be.enter().append("path").classed(i.cn.sankeyLink,!0).call(k,se,X.linkEvents),be.style("stroke",function(Fe){return z(Fe)?a.tinyRGB(u(Fe.linkLineColor)):Fe.tinyColorHue}).style("stroke-opacity",function(Fe){return z(Fe)?a.opacity(Fe.linkLineColor):Fe.tinyColorAlpha}).style("fill",function(Fe){return Fe.tinyColorHue}).style("fill-opacity",function(Fe){return Fe.tinyColorAlpha}).style("stroke-width",function(Fe){return z(Fe)?Fe.linkLineWidth:1}).attr("d",w()),be.style("opacity",function(){return ie._context.staticPlot||ue||re?1:0}).transition().ease(i.ease).duration(i.duration).style("opacity",1),be.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var De=se.selectAll("."+i.cn.sankeyNodeSet).data(y,l);De.enter().append("g").classed(i.cn.sankeyNodeSet,!0),De.style("cursor",function(Fe){switch(Fe.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var _e=De.selectAll("."+i.cn.sankeyNode).data(function(Fe){var ke=Fe.graph.nodes;return function W(ie){var Y,V=[];for(Y=0;Y<ie.length;Y++)ie[Y].originalX=(ie[Y].x0+ie[Y].x1)/2,ie[Y].originalY=(ie[Y].y0+ie[Y].y1)/2,-1===V.indexOf(ie[Y].originalX)&&V.push(ie[Y].originalX);for(V.sort(function(ae,X){return ae-X}),Y=0;Y<ie.length;Y++)ie[Y].originalLayerIndex=V.indexOf(ie[Y].originalX),ie[Y].originalLayer=ie[Y].originalLayerIndex/(V.length-1)}(ke),ke.map(E.bind(null,Fe))},l);_e.enter().append("g").classed(i.cn.sankeyNode,!0).call(P).style("opacity",function(Fe){return!ie._context.staticPlot&&!ue||Fe.partOfGroup?0:1}),_e.call(k,se,X.nodeEvents).call(O,be,X,ie),_e.transition().ease(i.ease).duration(i.duration).call(P).style("opacity",function(Fe){return Fe.partOfGroup?0:1}),_e.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var Ce=_e.selectAll("."+i.cn.nodeRect).data(y);Ce.enter().append("rect").classed(i.cn.nodeRect,!0).call(_),Ce.style("stroke-width",function(Fe){return Fe.nodeLineWidth}).style("stroke",function(Fe){return a.tinyRGB(u(Fe.nodeLineColor))}).style("stroke-opacity",function(Fe){return a.opacity(Fe.nodeLineColor)}).style("fill",function(Fe){return Fe.tinyColorHue}).style("fill-opacity",function(Fe){return Fe.tinyColorAlpha}),Ce.transition().ease(i.ease).duration(i.duration).call(_);var Le=_e.selectAll("."+i.cn.nodeLabel).data(y);Le.enter().append("text").classed(i.cn.nodeLabel,!0).style("cursor","default"),Le.attr("data-notex",1).text(function(Fe){return Fe.node.label}).each(function(Fe){var ke=t.select(this);r.font(ke,Fe.textFont),x.convertToTspans(ke,ie)}).style("text-shadow",x.makeTextShadow(ie._fullLayout.paper_bgcolor)).attr("text-anchor",function(Fe){return Fe.horizontal&&Fe.left?"end":"start"}).attr("transform",function(Fe){var ke=t.select(this),ze=x.lineCount(ke),Pe=Fe.textFont.size*((ze-1)*d-m),Ie=Fe.nodeLineWidth/2+3,Qe=((Fe.horizontal?Fe.visibleHeight:Fe.visibleWidth)-Pe)/2;Fe.horizontal&&(Fe.left?Ie=-Ie:Ie+=Fe.visibleWidth);var at=Fe.horizontal?"":"scale(-1,1)"+p(90);return v(Fe.horizontal?Ie:Qe,Fe.horizontal?Qe:Ie)+at}),Le.transition().ease(i.ease).duration(i.duration)}},23984:$=>{"use strict";$.exports=function(e,M){for(var t=[],T=e.cd[0].trace,n=T._sankey.graph.nodes,i=0;i<n.length;i++){var u=n[i];if(!u.partOfGroup){var a=[(u.x0+u.x1)/2,(u.y0+u.y1)/2];"v"===T.orientation&&a.reverse(),M&&M.contains(a,!1,i,e)&&t.push({pointNumber:u.pointNumber})}}return t}},79179:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){for(var n=0;n<t.length;n++)t[n].i=n;M.mergeArray(T.text,t,"tx"),M.mergeArray(T.texttemplate,t,"txt"),M.mergeArray(T.hovertext,t,"htx"),M.mergeArray(T.customdata,t,"data"),M.mergeArray(T.textposition,t,"tp"),T.textfont&&(M.mergeArrayCastPositive(T.textfont.size,t,"ts"),M.mergeArray(T.textfont.color,t,"tc"),M.mergeArray(T.textfont.family,t,"tf"));var i=T.marker;if(i){M.mergeArrayCastPositive(i.size,t,"ms"),M.mergeArrayCastPositive(i.opacity,t,"mo"),M.mergeArray(i.symbol,t,"mx"),M.mergeArray(i.angle,t,"ma"),M.mergeArray(i.standoff,t,"mf"),M.mergeArray(i.color,t,"mc");var u=i.line;i.line&&(M.mergeArray(u.color,t,"mlc"),M.mergeArrayCastPositive(u.width,t,"mlw"));var a=i.gradient;a&&"none"!==a.type&&(M.mergeArray(a.type,t,"mgt"),M.mergeArray(a.color,t,"mgc"))}}},55405:($,K,e)=>{"use strict";var M=e(88489).axisHoverFormat,I=e(9430).si,t=e(9430).fF,T=e(567),n=e(47297),i=e(65822).P,u=e(65822).u,a=e(27630),r=e(47715),o=e(18836).extendFlat;function v(l){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+l+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function p(l){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+l+" axis.","When `"+l+"period` is round number of weeks,","the `"+l+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function f(l){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+l+" axis."].join(" ")}}$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:v("x"),yperiod:v("y"),xperiod0:p("x0"),yperiod0:p("y0"),xperiodalignment:f("x"),yperiodalignment:f("y"),xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant in the following cases:","1. when `scattermode` is set to *group*.","2. when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:I({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+r.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:t({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:o({},i,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot",description:["Sets the line back off from the end point of the nth line segment (in px).","This option is useful e.g. to avoid overlap with arrowhead markers.","With *auto* the lines would trim before markers if `marker.angleref` is set to *previous*."].join(" ")},simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},fillpattern:u,marker:o({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1,description:["Sets the marker angle in respect to `angleref`."].join(" ")},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1,description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen."].join(" ")},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0,description:["Moves the marker away from the data point in the direction of `angle` (in px).","This can be useful for example if you have another marker at this","location and you want to point an arrowhead marker at it."].join(" ")},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:o({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:n({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."})}},9451:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(91464),T=e(62311),n=e(71103).BADNUM,i=e(49258),u=e(50930),a=e(79179),r=e(20107);function v(s,x,h,g,m,d,A){var b=x._length,c=s._fullLayout,S=h._id,w=g._id,E=c._firstScatter[l(x)]===x.uid,P=(y(x,c,h,g)||{}).orientation,R=x.fill;h._minDtick=0,g._minDtick=0;var F={padded:!0},_={padded:!0};A&&(F.ppad=_.ppad=A);var z=b<2||m[0]!==m[b-1]||d[0]!==d[b-1];z&&("tozerox"===R||"tonextx"===R&&(E||"h"===P))?F.tozero=!0:!(x.error_y||{}).visible&&("tonexty"===R||"tozeroy"===R||!i.hasMarkers(x)&&!i.hasText(x))&&(F.padded=!1,F.ppad=0),z&&("tozeroy"===R||"tonexty"===R&&(E||"v"===P))?_.tozero=!0:("tonextx"===R||"tozerox"===R)&&(_.padded=!1),S&&(x._extremes[S]=t.findExtremes(h,m,F)),w&&(x._extremes[w]=t.findExtremes(g,d,_))}function p(s,x){if(i.hasMarkers(s)){var m,h=s.marker,g=1.6*(s.marker.sizeref||1);if(m="area"===s.marker.sizemode?function(S){return Math.max(Math.sqrt((S||0)/g),3)}:function(S){return Math.max((S||0)/g,3)},I.isArrayOrTypedArray(h.size)){var d={type:"linear"};t.setConvert(d);for(var A=d.makeCalcdata(s.marker,"size"),b=new Array(x),c=0;c<x;c++)b[c]=m(A[c]);return b}return m(h.size)}}function f(s,x){var h=l(x),g=s._firstScatter;g[h]||(g[h]=x.uid)}function l(s){var x=s.stackgroup;return s.xaxis+s.yaxis+s.type+(x?"-"+x:"")}function y(s,x,h,g){var m=s.stackgroup;if(m){var d=x._scatterStackOpts[h._id+g._id][m],A="v"===d.orientation?g:h;if("linear"===A.type||"log"===A.type)return d}}$.exports={calc:function o(s,x){var z,D,k,O,U,H,h=s._fullLayout,g=x._xA=t.getFromId(s,x.xaxis||"x","x"),m=x._yA=t.getFromId(s,x.yaxis||"y","y"),d=g.makeCalcdata(x,"x"),A=m.makeCalcdata(x,"y"),b=T(x,g,"x",d),c=T(x,m,"y",A),S=b.vals,w=c.vals,E=x._length,P=new Array(E),R=x.ids,F=y(x,h,g,m),_=!1;f(h,x);var W,j="x",ee="y";F?(I.pushUnique(F.traceIndices,x._expandedIndex),(z="v"===F.orientation)?(ee="s",W="x"):(j="s",W="y"),U="interpolate"===F.stackgaps):v(s,x,g,m,S,w,p(x,E));var te=!!x.xperiodalignment,q=!!x.yperiodalignment;for(D=0;D<E;D++){var oe=P[D]={},ie=M(S[D]),V=M(w[D]);ie&&V?(oe[j]=S[D],oe[ee]=w[D],te&&(oe.orig_x=d[D],oe.xEnd=b.ends[D],oe.xStart=b.starts[D]),q&&(oe.orig_y=A[D],oe.yEnd=c.ends[D],oe.yStart=c.starts[D])):F&&(z?ie:V)?(oe[W]=z?S[D]:w[D],oe.gap=!0,U?(oe.s=n,_=!0):oe.s=0):oe[j]=oe[ee]=n,R&&(oe.id=String(R[D]))}if(a(P,x),u(s,x),r(P,x),F){for(D=0;D<P.length;)P[D][W]===n?P.splice(D,1):D++;if(I.sort(P,function(J,ue){return J[W]-ue[W]||J.i-ue.i}),_){for(D=0;D<P.length-1&&P[D].gap;)D++;for((H=P[D].s)||(H=P[D].s=0),k=0;k<D;k++)P[k].s=H;for(O=P.length-1;O>D&&P[O].gap;)O--;for(H=P[O].s,k=P.length-1;k>O;k--)P[k].s=H;for(;D<O;)if(P[++D].gap){for(k=D+1;P[k].gap;)k++;for(var Y=P[D-1][W],ae=P[D-1].s,X=(P[k].s-ae)/(P[k][W]-Y);D<k;)P[D].s=ae+(P[D][W]-Y)*X,D++}}}return P},calcMarkerSize:p,calcAxisExpansion:v,setFirstScatter:f,getStackOpts:y}},20107:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){M.isArrayOrTypedArray(T.selectedpoints)&&M.tagSelected(t,T)}},50930:($,K,e)=>{"use strict";var M=e(981).hasColorscale,I=e(93727),t=e(49258);$.exports=function(n,i){t.hasLines(i)&&M(i,"line")&&I(n,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),t.hasMarkers(i)&&(M(i,"marker")&&I(n,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),M(i,"marker.line")&&I(n,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47715:$=>{"use strict";$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},53623:($,K,e)=>{"use strict";var M=e(9451),I=e(23870).setGroupPositions;function T(i,u,a,r,o,v,p){o[r]=!0;var f={i:null,gap:!0,s:0};if(f[p]=a,i.splice(u,0,f),u&&a===i[u-1][p]){var l=i[u-1];f.s=l.s,f.i=l.i,f.gap=l.gap}else v&&(f.s=function n(i,u,a,r){var o=i[u-1],v=i[u+1];return v?o?o.s+(v.s-o.s)*(a-o[r])/(v[r]-o[r]):v.s:o.s}(i,u,a,p));u||(i[0].t=i[1].t,i[0].trace=i[1].trace,delete i[1].t,delete i[1].trace)}$.exports=function(u,a){"group"===u._fullLayout.scattermode&&function t(i,u){for(var a=u.xaxis,r=u.yaxis,o=i._fullLayout,v=i._fullData,p=i.calcdata,f=[],l=[],y=0;y<v.length;y++){var s=v[y];!0===s.visible&&"scatter"===s.type&&s.xaxis===a._id&&s.yaxis===r._id&&("h"===s.orientation?f.push(p[y]):"v"===s.orientation&&l.push(p[y]))}var x={mode:o.scattermode,gap:o.scattergap};I(i,a,r,l,x),I(i,r,a,f,x)}(u,a);var r=a.xaxis,o=a.yaxis,v=r._id+o._id,p=u._fullLayout._scatterStackOpts[v];if(p){var l,y,s,x,h,g,m,d,A,b,c,S,w,E,P,f=u.calcdata;for(var R in p){var F=(b=p[R]).traceIndices;if(F.length){for(c="interpolate"===b.stackgaps,S=b.groupnorm,"v"===b.orientation?(w="x",E="y"):(w="y",E="x"),P=new Array(F.length),l=0;l<P.length;l++)P[l]=!1;g=f[F[0]];var _=new Array(g.length);for(l=0;l<g.length;l++)_[l]=g[l][w];for(l=1;l<F.length;l++){for(h=f[F[l]],y=s=0;y<h.length;y++){for(m=h[y][w];m>_[s]&&s<_.length;s++)T(h,y,_[s],l,P,c,w),y++;if(m!==_[s]){for(x=0;x<l;x++)T(f[F[x]],s,m,x,P,c,w);_.splice(s,0,m)}s++}for(;s<_.length;s++)T(h,y,_[s],l,P,c,w),y++}var z=_.length;for(y=0;y<g.length;y++){for(d=g[y][E]=g[y].s,l=1;l<F.length;l++)(h=f[F[l]])[0].trace._rawLength=h[0].trace._length,h[0].trace._length=z,d+=h[y].s,h[y][E]=d;if(S)for(A=("fraction"===S?d:d/100)||1,l=0;l<F.length;l++){var D=f[F[l]][y];D[E]/=A,D.sNorm=D.s/A}}for(l=0;l<F.length;l++){var k=(h=f[F[l]])[0].trace,O=M.calcMarkerSize(k,k._rawLength),U=Array.isArray(O);if(O&&P[l]||U){var H=O;for(O=new Array(z),y=0;y<z;y++)O[y]=h[y].gap?0:U?H[h[y].i]:H}var j=new Array(z),ee=new Array(z);for(y=0;y<z;y++)j[y]=h[y].x,ee[y]=h[y].y;M.calcAxisExpansion(u,k,r,o,j,ee,O),h[0].t.orientation=b.orientation}}}}}},38541:($,K,e)=>{"use strict";var M=e(5228),I=e(36711),t=e(55405);$.exports=function(n,i){var u,a,r;function o(y){return M.coerce(a._input,a,t,y)}if("group"===i.scattermode)for(r=0;r<n.length;r++)"scatter"===(a=n[r]).type&&(u=a._input,I(u,a,i,o));for(r=0;r<n.length;r++){var v=n[r];if("scatter"===v.type){var p=v.fill;if("none"!==p&&"toself"!==p&&(v.opacity=void 0,"tonexty"===p||"tonextx"===p))for(var f=r-1;f>=0;f--){var l=n[f];if("scatter"===l.type&&l.xaxis===v.xaxis&&l.yaxis===v.yaxis){l.opacity=void 0;break}}}}}},38613:($,K,e)=>{"use strict";var M=e(5228),I=e(97799),t=e(55405),T=e(47715),n=e(49258),i=e(82069),u=e(18031),a=e(91496),r=e(57265),o=e(50078),v=e(35558),p=e(42622),f=e(27950),l=e(5228).coercePattern;$.exports=function(s,x,h,g){function m(P,R){return M.coerce(s,x,t,P,R)}var d=i(s,x,g,m);if(d||(x.visible=!1),x.visible){u(s,x,g,m),m("xhoverformat"),m("yhoverformat");var A=a(s,x,g,m);"group"===g.scattermode&&void 0===x.orientation&&m("orientation","v");var b=!A&&d<T.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("mode",b),n.hasMarkers(x)&&r(s,x,h,g,m,{gradient:!0}),n.hasLines(x)&&(o(s,x,h,g,m,{backoff:!0}),v(s,x,m),m("connectgaps"),m("line.simplify")),n.hasText(x)&&(m("texttemplate"),p(s,x,g,m));var c=[];(n.hasMarkers(x)||n.hasText(x))&&(m("cliponaxis"),m("marker.maxdisplayed"),c.push("points")),m("fill",A?A.fillDflt:"none"),"none"!==x.fill&&(f(s,x,h,m),n.hasLines(x)||v(s,x,m),l(m,"fillpattern",x.fillcolor,!1));var S=(x.line||{}).color,w=(x.marker||{}).color;("tonext"===x.fill||"toself"===x.fill)&&c.push("fills"),m("hoveron",c.join("+")||"points"),"fills"!==x.hoveron&&m("hovertemplate");var E=I.getComponentMethod("errorbars","supplyDefaults");E(s,x,S||w||h,{axis:"y"}),E(s,x,S||w||h,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(x,m)}}},27950:($,K,e)=>{"use strict";var M=e(8416),I=e(5228).isArrayOrTypedArray;$.exports=function(T,n,i,u){var a=!1;if(n.marker){var r=n.marker.color,o=(n.marker.line||{}).color;r&&!I(r)?a=r:o&&!I(o)&&(a=o)}u("fillcolor",M.addOpacity((n.line||{}).color||a||i,.5))}},59921:($,K,e)=>{"use strict";var M=e(91464);$.exports=function(t,T,n){var i={},u={_fullLayout:n},a=M.getFromTrace(u,T,"x"),r=M.getFromTrace(u,T,"y"),o=t.orig_x;void 0===o&&(o=t.x);var v=t.orig_y;return void 0===v&&(v=t.y),i.xLabel=M.tickText(a,a.c2l(o),!0).text,i.yLabel=M.tickText(r,r.c2l(v),!0).text,i}},26384:($,K,e)=>{"use strict";var M=e(8416),I=e(49258);$.exports=function(T,n){var i,u;if("lines"===T.mode)return(i=T.line.color)&&M.opacity(i)?i:T.fillcolor;if("none"===T.mode)return T.fill?T.fillcolor:"";var a=n.mcc||(T.marker||{}).color,r=n.mlcc||((T.marker||{}).line||{}).color;return(u=a&&M.opacity(a)?a:r&&M.opacity(r)&&(n.mlw||((T.marker||{}).line||{}).width)?r:"")?M.opacity(u)<.3?M.addOpacity(u,.3):u:(i=(T.line||{}).color)&&M.opacity(i)&&I.hasLines(T)&&T.line.width?i:T.fillcolor}},36711:($,K,e)=>{"use strict";var M=e(93698).getAxisGroup;$.exports=function(t,T,n,i){var u=T.orientation,a=T[{v:"x",h:"y"}[u]+"axis"],r=M(n,a)+u,o=n._alignmentOpts||{},v=i("alignmentgroup"),p=o[r];p||(p=o[r]={});var f=p[v];f?f.traces.push(T):f=p[v]={traces:[T],alignmentIndex:Object.keys(p).length,offsetGroups:{}};var l=i("offsetgroup"),y=f.offsetGroups,s=y[l];l&&(s||(s=y[l]={offsetIndex:Object.keys(y).length}),T._offsetIndex=s.offsetIndex)}},27016:($,K,e)=>{"use strict";var M=e(5228),I=e(76863),t=e(97799),T=e(26384),n=e(8416),i=M.fillText;$.exports=function(a,r,o,v){var p=a.cd,f=p[0].trace,l=a.xa,y=a.ya,s=l.c2p(r),x=y.c2p(o),h=[s,x],g=f.hoveron||"",m=-1!==f.mode.indexOf("markers")?3:.5,d=!!f.xperiodalignment,A=!!f.yperiodalignment;if(-1!==g.indexOf("points")){var S=function(ne){var se=Math.max(m,ne.mrc||0),de=l.c2p(ne.x)-s,be=y.c2p(ne.y)-x;return Math.max(Math.sqrt(de*de+be*be)-se,1-m/se)},w=I.getDistanceFunction(v,function(ne){if(d){var se=l.c2p(ne.xStart),de=l.c2p(ne.xEnd);return s>=Math.min(se,de)&&s<=Math.max(se,de)?0:1/0}var be=Math.max(3,ne.mrc||0),De=1-1/be,_e=Math.abs(l.c2p(ne.x)-s);return _e<be?De*_e/be:_e-be+De},function(ne){if(A){var se=y.c2p(ne.yStart),de=y.c2p(ne.yEnd);return x>=Math.min(se,de)&&x<=Math.max(se,de)?0:1/0}var be=Math.max(3,ne.mrc||0),De=1-1/be,_e=Math.abs(y.c2p(ne.y)-x);return _e<be?De*_e/be:_e-be+De},S);if(I.getClosest(p,w,a),!1!==a.index){var E=p[a.index],P=l.c2p(E.x,!0),R=y.c2p(E.y,!0),F=E.mrc||1;a.index=E.i;var _=p[0].t.orientation,z=_&&(E.sNorm||E.s),D="h"===_?z:void 0!==E.orig_x?E.orig_x:E.x,k="v"===_?z:void 0!==E.orig_y?E.orig_y:E.y;return M.extendFlat(a,{color:T(f,E),x0:P-F,x1:P+F,xLabelVal:D,y0:R-F,y1:R+F,yLabelVal:k,spikeDistance:S(E),hovertemplate:f.hovertemplate}),i(E,f,a),t.getComponentMethod("errorbars","hoverInfo")(E,f,a),[a]}}if(-1!==g.indexOf("fills")&&f._polygons){var te,q,oe,ie,V,Y,ae,X,J,O=f._polygons,U=[],H=!1,j=1/0,ee=-1/0,W=1/0,B=-1/0;for(te=0;te<O.length;te++)(oe=O[te]).contains(h)&&(H=!H,U.push(oe),W=Math.min(W,oe.ymin),B=Math.max(B,oe.ymax));if(H){var ue=((W=Math.max(W,0))+(B=Math.min(B,y._length)))/2;for(te=0;te<U.length;te++)for(ie=U[te].pts,q=1;q<ie.length;q++)(X=ie[q-1][1])>ue!=(J=ie[q][1])>=ue&&(Y=ie[q-1][0],ae=ie[q][0],J-X&&(V=Y+(ae-Y)*(ue-X)/(J-X),j=Math.min(j,V),ee=Math.max(ee,V)));j=Math.max(j,0),ee=Math.min(ee,l._length);var re=n.defaultLine;return n.opacity(f.fillcolor)?re=f.fillcolor:n.opacity((f.line||{}).color)&&(re=f.line.color),M.extendFlat(a,{distance:a.maxHoverDistance,x0:j,x1:ee,y0:ue,y1:ue,color:re,hovertemplate:!1}),delete a.index,f.text&&!M.isArrayOrTypedArray(f.text)?a.text=String(f.text):a.text=f.name,[a]}}}},39524:($,K,e)=>{"use strict";var M=e(49258);$.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(55405),layoutAttributes:e(84814),supplyDefaults:e(38613),crossTraceDefaults:e(38541),supplyLayoutDefaults:e(53435),calc:e(9451).calc,crossTraceCalc:e(53623),arraysToCalcdata:e(79179),plot:e(73507),colorbar:e(74899),formatLabels:e(59921),style:e(54675).style,styleOnSelect:e(54675).styleOnSelect,hoverPoints:e(27016),selectPoints:e(177),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(24329),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},84814:$=>{"use strict";$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how scatter points at the same location coordinate","are displayed on the graph.","With *group*, the scatter points are plotted next to one another","centered around the shared location.","With *overlay*, the scatter points are plotted over one another,","you might need to reduce *opacity* to see multiple scatter points."].join(" ")},scattergap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between scatter points of","adjacent location coordinates.","Defaults to `bargap`."].join(" ")}}},53435:($,K,e)=>{"use strict";var M=e(5228),I=e(84814);$.exports=function(t,T){var i="group"===T.barmode;"group"===T.scattermode&&function n(u,a){return M.coerce(t,T,I,u,a)}("scattergap",i?T.bargap:.2)}},50078:($,K,e)=>{"use strict";var M=e(5228).isArrayOrTypedArray,I=e(981).hasColorscale,t=e(14739);$.exports=function(n,i,u,a,r,o){o||(o={});var v=(n.marker||{}).color;(v&&v._inputArray&&(v=v._inputArray),r("line.color",u),I(n,"line"))?t(n,i,a,r,{prefix:"line.",cLetter:"c"}):r("line.color",!M(v)&&v||u);r("line.width"),o.noDash||r("line.dash"),o.backoff&&r("line.backoff")}},6050:($,K,e)=>{"use strict";var M=e(27630),I=e(71103),t=I.BADNUM,T=I.LOG_CLIP,n=T+.5,i=T-.5,u=e(5228),a=u.segmentsIntersect,r=u.constrain,o=e(47715);$.exports=function(p,f){var D,k,O,U,H,j,ee,W,B,te,q,oe,ie,V,Y,ae,ue,re,l=f.trace||{},y=f.xaxis,s=f.yaxis,x="log"===y.type,h="log"===s.type,g=y._length,m=s._length,d=f.backoff,A=l.marker,b=f.connectGaps,c=f.baseTolerance,S=f.shape,w="linear"===S,E=l.fill&&"none"!==l.fill,P=[],R=o.minTolerance,F=p.length,_=new Array(F),z=0;function X(Ze){var qe=p[Ze];if(!qe)return!1;var Dt=f.linearized?y.l2p(qe.x):y.c2p(qe.x),Ft=f.linearized?s.l2p(qe.y):s.c2p(qe.y);if(Dt===t){if(x&&(Dt=y.c2p(qe.x,!0)),Dt===t)return!1;h&&Ft===t&&(Dt*=Math.abs(y._m*m*(y._m>0?n:i)/(s._m*g*(s._m>0?n:i)))),Dt*=1e3}if(Ft===t){if(h&&(Ft=s.c2p(qe.y,!0)),Ft===t)return!1;Ft*=1e3}return[Dt,Ft]}function J(Ze,qe,Dt,Ft){var bt=Dt-Ze,Pt=Ft-qe,cr=.5-Ze,Sr=.5-qe,Kr=bt*bt+Pt*Pt,It=bt*cr+Pt*Sr;if(It>0&&It<Kr){var $t=cr*Pt-Sr*bt;if($t*$t<Kr)return!0}}function ne(Ze,qe){var Dt=Ze[0]/g,Ft=Ze[1]/m,bt=Math.max(0,-Dt,Dt-1,-Ft,Ft-1);return bt&&void 0!==ue&&J(Dt,Ft,ue,re)&&(bt=0),bt&&qe&&J(Dt,Ft,qe[0]/g,qe[1]/m)&&(bt=0),(1+o.toleranceGrowth*bt)*c}function se(Ze,qe){var Dt=Ze[0]-qe[0],Ft=Ze[1]-qe[1];return Math.sqrt(Dt*Dt+Ft*Ft)}var Fe,ke,ze,Pe,Ie,Qe,mt,de=o.maxScreensAway,be=-g*de,De=g*(1+de),_e=-m*de,Ce=m*(1+de),Le=[[be,_e,De,_e],[De,_e,De,Ce],[De,Ce,be,Ce],[be,Ce,be,_e]];function Be(Ze){if(Ze[0]<be||Ze[0]>De||Ze[1]<_e||Ze[1]>Ce)return[r(Ze[0],be,De),r(Ze[1],_e,Ce)]}function Ne(Ze,qe){if(Ze[0]===qe[0]&&(Ze[0]===be||Ze[0]===De)||Ze[1]===qe[1]&&(Ze[1]===_e||Ze[1]===Ce))return!0}function ct(Ze,qe,Dt){return function(Ft,bt){var Pt=Be(Ft),cr=Be(bt),Sr=[];if(Pt&&cr&&Ne(Pt,cr))return Sr;Pt&&Sr.push(Pt),cr&&Sr.push(cr);var Kr=2*u.constrain((Ft[Ze]+bt[Ze])/2,qe,Dt)-((Pt||Ft)[Ze]+(cr||bt)[Ze]);Kr&&((Pt&&cr?Kr>0==Pt[Ze]>cr[Ze]?Pt:cr:Pt||cr)[Ze]+=Kr);return Sr}}function Rt(Ze){var qe=Ze[0],Dt=Ze[1],Ft=qe===_[z-1][0],bt=Dt===_[z-1][1];if(!Ft||!bt)if(z>1){var Pt=qe===_[z-2][0],cr=Dt===_[z-2][1];Ft&&(qe===be||qe===De)&&Pt?cr?z--:_[z-1]=Ze:bt&&(Dt===_e||Dt===Ce)&&cr?Pt?z--:_[z-1]=Ze:_[z++]=Ze}else _[z++]=Ze}function zt(Ze){_[z-1][0]!==Ze[0]&&_[z-1][1]!==Ze[1]&&Rt([ze,Pe]),Rt(Ze),Ie=null,ze=Pe=0}"linear"===S||"spline"===S?mt=function at(Ze,qe){for(var Dt=[],Ft=0,bt=0;bt<4;bt++){var Pt=Le[bt],cr=a(Ze[0],Ze[1],qe[0],qe[1],Pt[0],Pt[1],Pt[2],Pt[3]);cr&&(!Ft||Math.abs(cr.x-Dt[0][0])>1||Math.abs(cr.y-Dt[0][1])>1)&&(cr=[cr.x,cr.y],Ft&&se(cr,Ze)<se(Dt[0],Ze)?Dt.unshift(cr):Dt.push(cr),Ft++)}return Dt}:"hv"===S||"vh"===S?mt=function nt(Ze,qe){var Dt=[],Ft=Be(Ze),bt=Be(qe);return Ft&&bt&&Ne(Ft,bt)||(Ft&&Dt.push(Ft),bt&&Dt.push(bt)),Dt}:"hvh"===S?mt=ct(0,be,De):"vhv"===S&&(mt=ct(1,_e,Ce));var St=u.isArrayOrTypedArray(A);function Xt(Ze){if(Ze&&d&&(Ze.i=D,Ze.d=p,Ze.trace=l,Ze.marker=St?A[Ze.i]:A,Ze.backoff=d),ue=Ze[0]/g,re=Ze[1]/m,Fe=Ze[0]<be?be:Ze[0]>De?De:0,ke=Ze[1]<_e?_e:Ze[1]>Ce?Ce:0,Fe||ke){if(z)if(Ie){var qe=mt(Ie,Ze);qe.length>1&&(zt(qe[0]),_[z++]=qe[1])}else Qe=mt(_[z-1],Ze)[0],_[z++]=Qe;else _[z++]=[Fe||Ze[0],ke||Ze[1]];var Dt=_[z-1];Fe&&ke&&(Dt[0]!==Fe||Dt[1]!==ke)?(Ie&&(ze!==Fe&&Pe!==ke?Rt(ze&&Pe?function Bt(Ze,qe){var Dt=qe[0]-Ze[0],Ft=(qe[1]-Ze[1])/Dt;return(Ze[1]*qe[0]-qe[1]*Ze[0])/Dt>0?[Ft>0?be:De,Ce]:[Ft>0?De:be,_e]}(Ie,Ze):[ze||Fe,Pe||ke]):ze&&Pe&&Rt([ze,Pe])),Rt([Fe,ke])):ze-Fe&&Pe-ke&&Rt([Fe||ze,ke||Pe]),Ie=Ze,ze=Fe,Pe=ke}else Ie&&zt(mt(Ie,Ze)[0]),_[z++]=Ze}for(D=0;D<F;D++)if(k=X(D)){for(z=0,Ie=null,Xt(k),D++;D<F;D++){if(!(U=X(D))){if(b)continue;break}if(w&&f.simplify){var Mt=X(D+1);if(te=se(U,k),E&&(0===z||z===F-1)||!(te<ne(U,Mt)*R)){for(W=[(U[0]-k[0])/te,(U[1]-k[1])/te],H=k,q=te,oe=V=Y=0,ee=!1,O=U,D++;D<p.length;D++){if(j=Mt,Mt=X(D+1),!j){if(b)continue;break}if(ae=(B=[j[0]-k[0],j[1]-k[1]])[0]*W[1]-B[1]*W[0],V=Math.min(V,ae),(Y=Math.max(Y,ae))-V>ne(j,Mt))break;O=j,(ie=B[0]*W[0]+B[1]*W[1])>q?(q=ie,U=j,ee=!1):ie<oe&&(oe=ie,H=j,ee=!0)}if(ee?(Xt(U),O!==H&&Xt(H)):(H!==k&&Xt(H),O!==U&&Xt(U)),Xt(O),D>=p.length||!j)break;Xt(j),k=j}}else Xt(U)}Ie&&Rt([ze||Ie[0],Pe||Ie[1]]),P.push(_.slice(0,z))}var st=S.slice(S.length-1);if(d&&"h"!==st&&"v"!==st){for(var Se=!1,pe=-1,ge=[],Oe=0;Oe<P.length;Oe++)for(var we=0;we<P[Oe].length-1;we++){var He=P[Oe][we],Xe=P[Oe][we+1],ut=M.applyBackoff(Xe,He);(ut[0]!==Xe[0]||ut[1]!==Xe[1])&&(Se=!0),ge[pe+1]||(ge[++pe]=[He,[ut[0],ut[1]]])}return Se?ge:P}return P}},35558:$=>{"use strict";$.exports=function(e,M,I){"spline"===I("line.shape")&&I("line.smoothing")}},33197:$=>{"use strict";var K={tonextx:1,tonexty:1,tonext:1};$.exports=function(M,I,t){var T,n,i,u,a,r={},o=!1,v=-1,p=0,f=-1;for(n=0;n<t.length;n++)(i=(T=t[n][0].trace).stackgroup||"")?i in r?a=r[i]:(a=r[i]=p,p++):T.fill in K&&f>=0?a=f:(a=f=p,p++),a<v&&(o=!0),T._groupIndex=v=a;var l=t.slice();o&&l.sort(function(s,x){var h=s[0].trace,g=x[0].trace;return h._groupIndex-g._groupIndex||h.index-g.index});var y={};for(n=0;n<l.length;n++)i=(T=l[n][0].trace).stackgroup||"",!0===T.visible?(T._nexttrace=null,T.fill in K&&(u=y[i],T._prevtrace=u||null,u&&(u._nexttrace=T)),T._ownfill=T.fill&&("tozero"===T.fill.substr(0,6)||"toself"===T.fill||"to"===T.fill.substr(0,2)&&!T._prevtrace),y[i]=T):T._prevtrace=T._nexttrace=T._ownfill=null;return l}},47173:($,K,e)=>{"use strict";var M=e(7347);$.exports=function(t,T){T||(T=2);var n=t.marker,i=n.sizeref||1,u=n.sizemin||0,a="area"===n.sizemode?function(r){return Math.sqrt(r/i)}:function(r){return r/i};return function(r){var o=a(r/T);return M(o)&&o>0?Math.max(o,u):0}}},74899:$=>{"use strict";$.exports={container:"marker",min:"cmin",max:"cmax"}},57265:($,K,e)=>{"use strict";var M=e(8416),I=e(981).hasColorscale,t=e(14739),T=e(49258);$.exports=function(i,u,a,r,o,v){var p=T.isBubble(i),f=(i.line||{}).color;(v=v||{},f&&(a=f),o("marker.symbol"),o("marker.opacity",p?.7:1),o("marker.size"),v.noAngle||(o("marker.angle"),v.noAngleRef||o("marker.angleref"),v.noStandOff||o("marker.standoff")),o("marker.color",a),I(i,"marker")&&t(i,u,r,o,{prefix:"marker.",cLetter:"c"}),v.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),v.noLine||(o("marker.line.color",f&&!Array.isArray(f)&&u.marker.color!==f?f:p?M.background:M.defaultLine),I(i,"marker.line")&&t(i,u,r,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",p?1:0)),p&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),v.gradient)&&("none"!==o("marker.gradient.type")&&o("marker.gradient.color"))}},18031:($,K,e)=>{"use strict";var M=e(5228).dateTick0,t=e(71103).ONEWEEK;function T(n,i){return M(i,n%t==0?1:0)}$.exports=function(i,u,a,r,o){if(o||(o={x:!0,y:!0}),o.x){var v=r("xperiod");v&&(r("xperiod0",T(v,u.xcalendar)),r("xperiodalignment"))}if(o.y){var p=r("yperiod");p&&(r("yperiod0",T(p,u.ycalendar)),r("yperiodalignment"))}}},73507:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(5228),T=t.ensureSingle,n=t.identity,i=e(27630),u=e(49258),a=e(6050),r=e(33197),o=e(80134).tester;function p(l,y,s,x,h,g,m){var A,d=l._context.staticPlot;!function f(l,y,s,x,h){var g=s.xaxis,m=s.yaxis,d=M.extent(t.simpleMap(g.range,g.r2c)),A=M.extent(t.simpleMap(m.range,m.r2c)),b=x[0].trace;if(u.hasMarkers(b)){var c=b.marker.maxdisplayed;if(0!==c){var S=x.filter(function(R){return R.x>=d[0]&&R.x<=d[1]&&R.y>=A[0]&&R.y<=A[1]}),w=Math.ceil(S.length/c),E=0;h.forEach(function(R,F){var _=R[0].trace;u.hasMarkers(_)&&_.marker.maxdisplayed>0&&F<y&&E++});var P=Math.round(E*w/3+Math.floor(E/3)*w/7.1);x.forEach(function(R){delete R.vis}),S.forEach(function(R,F){0===Math.round((F+P)%w)&&(R.vis=!0)})}}}(0,y,s,x,h);var b=!!m&&m.duration>0;function c(Pe){return b?Pe.transition():Pe}var S=s.xaxis,w=s.yaxis,E=x[0].trace,P=E.line,R=M.select(g),F=T(R,"g","errorbars"),_=T(R,"g","lines"),z=T(R,"g","points"),D=T(R,"g","text");if(I.getComponentMethod("errorbars","plot")(l,F,s,m),!0===E.visible){c(R).style("opacity",E.opacity);var k,O,U=E.fill.charAt(E.fill.length-1);"x"!==U&&"y"!==U&&(U=""),x[0][s.isRangePlot?"nodeRangePlot3":"node3"]=R;var H="",j=[],ee=E._prevtrace;ee&&(H=ee._prevRevpath||"",O=ee._nextFill,j=ee._polygons);var W,B,oe,ie,V,Y,ae,X,J,te="",q="",ue=[],re=t.noop;if(k=E._ownFill,u.hasLines(E)||"none"!==E.fill){for(O&&O.datum(x),-1!==["hv","vh","hvh","vhv"].indexOf(P.shape)?(oe=i.steps(P.shape),ie=i.steps(P.shape.split("").reverse().join(""))):oe=ie="spline"===P.shape?function(Pe){var Ie=Pe[Pe.length-1];return Pe.length>1&&Pe[0][0]===Ie[0]&&Pe[0][1]===Ie[1]?i.smoothclosed(Pe.slice(1),P.smoothing):i.smoothopen(Pe,P.smoothing)}:function(Pe){return"M"+Pe.join("L")},V=function(Pe){return ie(Pe.reverse())},ue=a(x,{xaxis:S,yaxis:w,trace:E,connectGaps:E.connectgaps,baseTolerance:Math.max(P.width||1,3)/4,shape:P.shape,backoff:P.backoff,simplify:P.simplify,fill:E.fill}),J=E._polygons=new Array(ue.length),A=0;A<ue.length;A++)E._polygons[A]=o(ue[A]);ue.length&&(Y=ue[0][0],X=(ae=ue[ue.length-1])[ae.length-1]),re=function(Pe){return function(Ie){if(W=oe(Ie),B=V(Ie),te?U?(te+="L"+W.substr(1),q=B+"L"+q.substr(1)):(te+="Z"+W,q=B+"Z"+q):(te=W,q=B),u.hasLines(E)){var Qe=M.select(this);if(Qe.datum(x),Pe)c(Qe.style("opacity",0).attr("d",W).call(i.lineGroupStyle)).style("opacity",1);else{var at=c(Qe);at.attr("d",W),i.singleLineStyle(x,at)}}}}}var ne=_.selectAll(".js-line").data(ue);c(ne.exit()).style("opacity",0).remove(),ne.each(re(!1)),ne.enter().append("path").classed("js-line",!0).style("vector-effect",d?"none":"non-scaling-stroke").call(i.lineGroupStyle).each(re(!0)),i.setClipUrl(ne,s.layerClipId,l),ue.length?(k?(k.datum(x),Y&&X&&(U?("y"===U?Y[1]=X[1]=w.c2p(0,!0):"x"===U&&(Y[0]=X[0]=S.c2p(0,!0)),c(k).attr("d","M"+X+"L"+Y+"L"+te.substr(1)).call(i.singleFillStyle,l)):c(k).attr("d",te+"Z").call(i.singleFillStyle,l))):O&&("tonext"===E.fill.substr(0,6)&&te&&H?("tonext"===E.fill?c(O).attr("d",te+"Z"+H+"Z").call(i.singleFillStyle,l):c(O).attr("d",te+"L"+H.substr(1)+"Z").call(i.singleFillStyle,l),E._polygons=E._polygons.concat(j)):(se(O),E._polygons=null)),E._prevRevpath=q,E._prevPolygons=J):(k?se(k):O&&se(O),E._polygons=E._prevRevpath=E._prevPolygons=null),z.datum(x),D.datum(x),function Fe(Pe,Ie,Qe){var at,nt=Qe[0].trace,ct=u.hasMarkers(nt),mt=u.hasText(nt),Bt=function Ce(Pe){if(Pe.ids)return _e}(nt),Rt=Le,zt=Le;if(ct||mt){var St=n,Xt=nt.stackgroup,Mt=Xt&&"infer zero"===l._fullLayout._scatterStackOpts[S._id+w._id][Xt].stackgaps;nt.marker.maxdisplayed||nt._needsCull?St=Mt?be:de:Xt&&!Mt&&(St=De),ct&&(Rt=St),mt&&(zt=St)}var Se,st=(at=Pe.selectAll("path.point").data(Rt,Bt)).enter().append("path").classed("point",!0);b&&st.call(i.pointStyle,nt,l).call(i.translatePoints,S,w).style("opacity",0).transition().style("opacity",1),at.order(),ct&&(Se=i.makePointStyleFns(nt)),at.each(function(pe){var ge=M.select(this),Oe=c(ge);i.translatePoint(pe,Oe,S,w)?(i.singlePointStyle(pe,Oe,nt,Se,l),s.layerClipId&&i.hideOutsideRangePoint(pe,Oe,S,w,nt.xcalendar,nt.ycalendar),nt.customdata&&ge.classed("plotly-customdata",null!==pe.data&&void 0!==pe.data)):Oe.remove()}),b?at.exit().transition().style("opacity",0).remove():at.exit().remove(),(at=Ie.selectAll("g").data(zt,Bt)).enter().append("g").classed("textpoint",!0).append("text"),at.order(),at.each(function(pe){var ge=M.select(this),Oe=c(ge.select("text"));i.translatePoint(pe,Oe,S,w)?s.layerClipId&&i.hideOutsideRangePoint(pe,ge,S,w,nt.xcalendar,nt.ycalendar):ge.remove()}),at.selectAll("text").call(i.textPointStyle,nt,l).each(function(pe){var ge=S.c2p(pe.x),Oe=w.c2p(pe.y);M.select(this).selectAll("tspan.line").each(function(){c(M.select(this)).attr({x:ge,y:Oe})})}),at.exit().remove()}(z,D,x);var ze=!1===E.cliponaxis?null:s.layerClipId;i.setClipUrl(z,ze,l),i.setClipUrl(D,ze,l)}function se(Pe){c(Pe).attr("d","M0,0Z")}function de(Pe){return Pe.filter(function(Ie){return!Ie.gap&&Ie.vis})}function be(Pe){return Pe.filter(function(Ie){return Ie.vis})}function De(Pe){return Pe.filter(function(Ie){return!Ie.gap})}function _e(Pe){return Pe.id}function Le(){return!1}}$.exports=function(y,s,x,h,g,m){var d,A,b=!g,c=!!g&&g.duration>0,S=r(y,s,x);((d=h.selectAll("g.trace").data(S,function(E){return E[0].trace.uid})).enter().append("g").attr("class",function(E){return"trace scatter trace"+E[0].trace.uid}).style("stroke-miterlimit",2),d.order(),function v(l,y,s){y.each(function(x){var h=T(M.select(this),"g","fills");i.setClipUrl(h,s.layerClipId,l);var g=x[0].trace,m=[];g._ownfill&&m.push("_ownFill"),g._nexttrace&&m.push("_nextFill");var d=h.selectAll("g").data(m,n);d.enter().append("g"),d.exit().each(function(A){g[A]=null}).remove(),d.order().each(function(A){g[A]=T(M.select(this),"path","js-fill")})})}(y,d,s),c)?(m&&(A=m()),M.transition().duration(g.duration).ease(g.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){h.selectAll("g.trace").each(function(E,P){p(y,P,s,E,S,this,g)})})):d.each(function(E,P){p(y,P,s,E,S,this,g)});b&&d.exit().remove(),h.selectAll("path:not([d])").remove()}},177:($,K,e)=>{"use strict";var M=e(49258);$.exports=function(t,T){var o,v,p,f,n=t.cd,i=t.xaxis,u=t.yaxis,a=[],r=n[0].trace;if(!M.hasMarkers(r)&&!M.hasText(r))return[];if(!1===T)for(o=0;o<n.length;o++)n[o].selected=0;else for(o=0;o<n.length;o++)v=n[o],p=i.c2p(v.x),f=u.c2p(v.y),null!==v.i&&T.contains([p,f],!1,o,t)?(a.push({pointNumber:v.i,x:i.c2d(v.x),y:u.c2d(v.y)}),v.selected=1):v.selected=0;return a}},91496:$=>{"use strict";var K=["orientation","groupnorm","stackgaps"];$.exports=function(M,I,t,T){var n=t._scatterStackOpts,i=T("stackgroup");if(i){var u=I.xaxis+I.yaxis,a=n[u];a||(a=n[u]={});var r=a[i],o=!1;r?r.traces.push(I):(r=a[i]={traceIndices:[],traces:[I]},o=!0);for(var v={orientation:I.x&&!I.y?"h":"v"},p=0;p<K.length;p++){var f=K[p],l=f+"Found";if(!r[l]){var y=void 0!==M[f],s="orientation"===f;if((y||o)&&(r[f]=T(f,v[f]),s&&(r.fillDflt="h"===r[f]?"tonextx":"tonexty"),y&&(r[l]=!0,!o&&(delete r.traces[0][f],s))))for(var x=0;x<r.traces.length-1;x++){var h=r.traces[x];h._input.fill!==h.fill&&(h.fill=r.fillDflt)}}}return r}}},54675:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(97799);function n(a,r,o){I.pointStyle(a.selectAll("path.point"),r,o)}function i(a,r,o){I.textPointStyle(a.selectAll("text"),r,o)}$.exports={style:function T(a){var r=M.select(a).selectAll("g.trace.scatter");r.style("opacity",function(o){return o[0].trace.opacity}),r.selectAll("g.points").each(function(o){n(M.select(this),o.trace||o[0].trace,a)}),r.selectAll("g.text").each(function(o){i(M.select(this),o.trace||o[0].trace,a)}),r.selectAll("g.trace path.js-line").call(I.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(I.fillGroupStyle,a),t.getComponentMethod("errorbars","style")(r)},stylePoints:n,styleText:i,styleOnSelect:function u(a,r,o){var v=r[0].trace;v.selectedpoints?(I.selectedPointStyle(o.selectAll("path.point"),v),I.selectedTextStyle(o.selectAll("text"),v)):(n(o,v,a),i(o,v,a))}}},49258:($,K,e)=>{"use strict";var M=e(5228),I=e(90406).isTypedArraySpec;$.exports={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){var T=t.marker;return M.isPlainObject(T)&&(M.isArrayOrTypedArray(T.size)||I(T.size))}}},42622:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(I,t,T,n,i){i=i||{},n("textposition"),M.coerceFont(n,"textfont",i.font||T.font),i.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))}},82069:($,K,e)=>{"use strict";var M=e(5228),I=e(97799);$.exports=function(T,n,i,u){var o,a=u("x"),r=u("y");if(I.getComponentMethod("calendars","handleTraceDefaults")(T,n,["x","y"],i),a){var p=M.minRowLength(a);r?o=Math.min(p,M.minRowLength(r)):(o=p,u("y0"),u("dy"))}else{if(!r)return 0;o=M.minRowLength(r),u("x0"),u("dx")}return n._length=o,o}},37487:($,K,e)=>{"use strict";var M=e(55405),I=e(567),t=e(88489).axisHoverFormat,T=e(9430).fF,n=e(9430).si,i=e(82684),u=e(8041),a=e(49767),r=e(18836).extendFlat,o=e(71859).overrideAll,v=e(65452),p=M.line,f=M.marker,l=f.line,y=r({width:p.width,dash:{valType:"enumerated",values:v(u),dflt:"solid",description:"Sets the dash style of the lines."}},I("line"));function s(h){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",h,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}var x=$.exports=o({x:M.x,y:M.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:r({},M.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:n({},{}),hovertext:r({},M.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:T(),xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z"),mode:r({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:s("x"),y:s("y"),z:s("z")},connectgaps:M.connectgaps,line:y,marker:r({symbol:{valType:"enumerated",values:v(a),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:r({},f.size,{dflt:8}),sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:r({},f.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:f.colorbar,line:r({width:r({},l.width,{arrayOk:!1})},I("marker.line"))},I("marker")),textposition:r({},M.textposition,{dflt:"top center"}),textfont:{color:M.textfont.color,size:M.textfont.size,family:r({},M.textfont.family,{arrayOk:!1})},opacity:i.opacity,hoverinfo:r({},i.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},69926:($,K,e)=>{"use strict";var M=e(79179),I=e(50930);$.exports=function(T,n){var i=[{x:!1,y:!1,trace:n,t:{}}];return M(i,n),I(T,n),i}},67486:($,K,e)=>{"use strict";var M=e(97799);function I(n,i,u,a){if(!i||!i.visible)return null;for(var r=M.getComponentMethod("errorbars","makeComputeError")(i),o=new Array(n.length),v=0;v<n.length;v++){var p=r(+n[v],v);if("log"===a.type){var f=a.c2l(n[v]),l=n[v]-p[0],y=n[v]+p[1];if(o[v]=[(a.c2l(l,!0)-f)*u,(a.c2l(y,!0)-f)*u],l>0){var s=a.c2l(l);a._lowerLogErrorBound||(a._lowerLogErrorBound=s),a._lowerErrorBound=Math.min(a._lowerLogErrorBound,s)}}else o[v]=[-p[0]*u,p[1]*u]}return o}$.exports=function T(n,i,u){var a=[I(n.x,n.error_x,i[0],u.xaxis),I(n.y,n.error_y,i[1],u.yaxis),I(n.z,n.error_z,i[2],u.zaxis)],r=function t(n){for(var i=0;i<n.length;i++)if(n[i])return n[i].length;return 0}(a);if(0===r)return null;for(var o=new Array(r),v=0;v<r;v++){for(var p=[[0,0,0],[0,0,0]],f=0;f<3;f++)if(a[f])for(var l=0;l<2;l++)p[l][f]=a[f][v][l];o[v]=p}return o}},43388:($,K,e)=>{"use strict";var M=e(17745).gl_line3d,I=e(17745).gl_scatter3d,t=e(17745).gl_error3d,T=e(17745).gl_mesh3d,n=e(17745).delaunay_triangulate,i=e(5228),u=e(31936),a=e(15989).formatColor,r=e(47173),o=e(8041),v=e(49767),p=e(91464),f=e(40235).appendArrayPointValue,l=e(67486);function y(R,F){this.scene=R,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var s=y.prototype;function g(R){return null==R?0:R.indexOf("left")>-1?-1:R.indexOf("right")>-1?1:0}function m(R){return null==R?0:R.indexOf("top")>-1?-1:R.indexOf("bottom")>-1?1:0}function A(R,F){return F(4*R)}function b(R){return v[R]}function c(R,F,_,z,D){var k=null;if(i.isArrayOrTypedArray(R)){k=[];for(var O=0;O<F;O++)void 0===R[O]?k[O]=z:k[O]=_(R[O],D)}else k=_(R,i.identity);return k}function S(R,F){var V,Y,ae,X,J,ue,_=[],z=R.fullSceneLayout,D=R.dataScale,k=z.xaxis,O=z.yaxis,U=z.zaxis,H=F.marker,j=F.line,ee=F.x||[],W=F.y||[],B=F.z||[],te=ee.length,q=F.xcalendar,oe=F.ycalendar,ie=F.zcalendar;for(J=0;J<te;J++)V=k.d2l(ee[J],0,q)*D[0],Y=O.d2l(W[J],0,oe)*D[1],ae=U.d2l(B[J],0,ie)*D[2],_[J]=[V,Y,ae];if(Array.isArray(F.text))ue=F.text;else if(i.isTypedArray(F.text))ue=Array.from(F.text);else if(void 0!==F.text)for(ue=new Array(te),J=0;J<te;J++)ue[J]=F.text;function re(at,Be){var Ne=z[at];return p.tickText(Ne,Ne.d2l(Be),!0).text}var ne=F.texttemplate;if(ne){var de=R.fullLayout._d3locale,be=Array.isArray(ne),De=be?Math.min(ne.length,te):te,_e=be?function(at){return ne[at]}:function(){return ne};for(ue=new Array(De),J=0;J<De;J++){var Ce={x:ee[J],y:W[J],z:B[J]},Le={xLabel:re("xaxis",ee[J]),yLabel:re("yaxis",W[J]),zLabel:re("zaxis",B[J])},Fe={};f(Fe,F,J);var ke=F._meta||{};ue[J]=i.texttemplateString(_e(J),Le,de,Fe,Ce,ke)}}if(X={position:_,mode:F.mode,text:ue},"line"in F&&(X.lineColor=a(j,1,te),X.lineWidth=j.width,X.lineDashes=j.dash),"marker"in F){var ze=r(F);X.scatterColor=a(H,1,te),X.scatterSize=c(H.size,te,A,20,ze),X.scatterMarker=c(H.symbol,te,b,"\u25cf"),X.scatterLineWidth=H.line.width,X.scatterLineColor=a(H.line,1,te),X.scatterAngle=0}"textposition"in F&&(X.textOffset=function d(R){var z=[0,0];if(Array.isArray(R))for(var D=0;D<R.length;D++)z[D]=[0,0],R[D]&&(z[D][0]=g(R[D]),z[D][1]=m(R[D]));else z[0]=g(R),z[1]=m(R);return z}(F.textposition),X.textColor=a(F.textfont,1,te),X.textSize=c(F.textfont.size,te,i.identity,12),X.textFont=F.textfont.family,X.textAngle=0);var Pe=["x","y","z"];for(X.project=[!1,!1,!1],X.projectScale=[1,1,1],X.projectOpacity=[1,1,1],J=0;J<3;++J){var Ie=F.projection[Pe[J]];(X.project[J]=Ie.show)&&(X.projectOpacity[J]=Ie.opacity,X.projectScale[J]=Ie.scale)}X.errorBounds=l(F,D,z);var Qe=function h(R){for(var F=[0,0,0],_=[[0,0,0],[0,0,0],[0,0,0]],z=[1,1,1],D=0;D<3;D++){var k=R[D];k&&!1!==k.copy_zstyle&&!1!==R[2].visible&&(k=R[2]),k&&k.visible&&(F[D]=k.width/2,_[D]=u(k.color),z[D]=k.thickness)}return{capSize:F,color:_,lineWidth:z}}([F.error_x,F.error_y,F.error_z]);return X.errorColor=Qe.color,X.errorLineWidth=Qe.lineWidth,X.errorCapSize=Qe.capSize,X.delaunayAxis=F.surfaceaxis,X.delaunayColor=u(F.surfacecolor),X}function w(R){if(i.isArrayOrTypedArray(R)){var F=R[0];return i.isArrayOrTypedArray(F)&&(R=F),"rgb("+R.slice(0,3).map(function(_){return Math.round(255*_)})+")"}return null}function E(R){return i.isArrayOrTypedArray(R)?4===R.length&&"number"==typeof R[0]?w(R):R.map(w):null}s.handlePick=function(R){if(R.object&&(R.object===this.linePlot||R.object===this.delaunayMesh||R.object===this.textMarkers||R.object===this.scatterPlot)){var F=R.index=R.data.index;return R.object.highlight&&R.object.highlight(null),this.scatterPlot&&(R.object=this.scatterPlot,this.scatterPlot.highlight(R.data)),R.textLabel="",this.textLabels&&(i.isArrayOrTypedArray(this.textLabels)?(this.textLabels[F]||0===this.textLabels[F])&&(R.textLabel=this.textLabels[F]):R.textLabel=this.textLabels),R.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}},s.update=function(R){var _,z,D,k,F=this.scene.glplot.gl,O=o.solid;this.data=R;var U=S(this.scene,R);"mode"in U&&(this.mode=U.mode),"lineDashes"in U&&U.lineDashes in o&&(O=o[U.lineDashes]),this.color=E(U.scatterColor)||E(U.lineColor),this.dataPoints=U.position,_={gl:this.scene.glplot.gl,position:U.position,color:U.lineColor,lineWidth:U.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:R.opacity,connectGaps:R.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(_):(this.linePlot=M(_),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var H=R.opacity;if(R.marker&&void 0!==R.marker.opacity&&(H*=R.marker.opacity),z={gl:this.scene.glplot.gl,position:U.position,color:U.scatterColor,size:U.scatterSize,glyph:U.scatterMarker,opacity:H,orthographic:!0,lineWidth:U.scatterLineWidth,lineColor:U.scatterLineColor,project:U.project,projectScale:U.projectScale,projectOpacity:U.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(z):(this.scatterPlot=I(z),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),k={gl:this.scene.glplot.gl,position:U.position,glyph:U.text,color:U.textColor,size:U.textSize,angle:U.textAngle,alignment:U.textOffset,font:U.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:R.opacity},this.textLabels=R.hovertext||R.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(k):(this.textMarkers=I(k),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:U.position,color:U.errorColor,error:U.errorBounds,lineWidth:U.errorLineWidth,capSize:U.errorCapSize,opacity:R.opacity},this.errorBars?U.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):U.errorBounds&&(this.errorBars=t(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),U.delaunayAxis>=0){var j=function x(R,F,_){var U,z=(_+1)%3,D=(_+2)%3,k=[],O=[];for(U=0;U<R.length;++U){var H=R[U];isNaN(H[z])||!isFinite(H[z])||isNaN(H[D])||!isFinite(H[D])||(k.push([H[z],H[D]]),O.push(U))}var j=n(k);for(U=0;U<j.length;++U)for(var ee=j[U],W=0;W<ee.length;++W)ee[W]=O[ee[W]];return{positions:R,cells:j,meshColor:F}}(U.position,U.delaunayColor,U.delaunayAxis);j.opacity=R.opacity,this.delaunayMesh?this.delaunayMesh.update(j):(j.gl=F,this.delaunayMesh=T(j),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},s.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function P(R,F){var _=new y(R,F.uid);return _.update(F),_}},47960:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(49258),T=e(57265),n=e(50078),i=e(42622),u=e(37487);$.exports=function(o,v,p,f){function l(A,b){return I.coerce(o,v,u,A,b)}var y=function a(r,o,v,p){var f=0,l=v("x"),y=v("y"),s=v("z"),x=M.getComponentMethod("calendars","handleTraceDefaults");return x(r,o,["x","y","z"],p),l&&y&&s&&(f=Math.min(l.length,y.length,s.length),o._length=o._xlength=o._ylength=o._zlength=f),f}(o,v,l,f);if(y){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),l("mode"),t.hasMarkers(v)&&T(o,v,p,f,l,{noSelect:!0,noAngle:!0}),t.hasLines(v)&&(l("connectgaps"),n(o,v,p,f,l)),t.hasText(v)&&(l("texttemplate"),i(o,v,f,l,{noSelect:!0}));var s=(v.line||{}).color,x=(v.marker||{}).color;l("surfaceaxis")>=0&&l("surfacecolor",s||x);for(var h=["x","y","z"],g=0;g<3;++g){var m="projection."+h[g];l(m+".show")&&(l(m+".opacity"),l(m+".scale"))}var d=M.getComponentMethod("errorbars","supplyDefaults");d(o,v,s||x||p,{axis:"z"}),d(o,v,s||x||p,{axis:"y",inherit:"z"}),d(o,v,s||x||p,{axis:"x",inherit:"z"})}else v.visible=!1}},83167:($,K,e)=>{"use strict";$.exports={plot:e(43388),attributes:e(37487),markerSymbols:e(49767),supplyDefaults:e(47960),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(69926),moduleType:"trace",name:"scatter3d",basePlotModule:e(9275),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}}},35650:($,K,e)=>{"use strict";var M=e(55405),I=e(82684),t=e(9430).fF,T=e(9430).si,n=e(567),i=e(18836).extendFlat,u=M.marker,a=M.line,r=u.line;$.exports={carpet:{valType:"string",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},a:{valType:"data_array",editType:"calc",description:"Sets the a-axis coordinates."},b:{valType:"data_array",editType:"calc",description:"Sets the b-axis coordinates."},mode:i({},M.mode,{dflt:"markers"}),text:i({},M.text,{description:["Sets text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:i({},M.hovertext,{description:["Sets hover text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:i({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:M.connectgaps,fill:i({},M.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:M.fillcolor,marker:i({symbol:u.symbol,opacity:u.opacity,maxdisplayed:u.maxdisplayed,angle:u.angle,angleref:u.angleref,standoff:u.standoff,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,line:i({width:r.width,editType:"calc"},n("marker.line")),gradient:u.gradient,editType:"calc"},n("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:i({},I.hoverinfo,{flags:["a","b","text","name"]}),hoveron:M.hoveron,hovertemplate:t()}},79112:($,K,e)=>{"use strict";var M=e(7347),I=e(50930),t=e(79179),T=e(20107),n=e(9451).calcMarkerSize,i=e(19374);$.exports=function(a,r){var o=r._carpetTrace=i(a,r);if(o&&o.visible&&"legendonly"!==o.visible){var v;r.xaxis=o.xaxis,r.yaxis=o.yaxis;var l,y,p=r._length,f=new Array(p),s=!1;for(v=0;v<p;v++)if(l=r.a[v],y=r.b[v],M(l)&&M(y)){var x=o.ab2xy(+l,+y,!0),h=o.isVisible(+l,+y);h||(s=!0),f[v]={x:x[0],y:x[1],a:l,b:y,vis:h}}else f[v]={x:!1,y:!1};return r._needsCull=s,f[0].carpet=o,f[0].trace=r,n(r,p),I(a,r),t(f,r),T(f,r),f}}},72263:($,K,e)=>{"use strict";var M=e(5228),I=e(47715),t=e(49258),T=e(57265),n=e(50078),i=e(35558),u=e(42622),a=e(27950),r=e(35650);$.exports=function(v,p,f,l){function y(A,b){return M.coerce(v,p,r,A,b)}y("carpet"),p.xaxis="x",p.yaxis="y";var s=y("a"),x=y("b"),h=Math.min(s.length,x.length);if(h){p._length=h,y("text"),y("texttemplate"),y("hovertext"),y("mode",h<I.PTS_LINESONLY?"lines+markers":"lines"),t.hasMarkers(p)&&T(v,p,f,l,y,{gradient:!0}),t.hasLines(p)&&(n(v,p,f,l,y,{backoff:!0}),i(v,p,y),y("connectgaps")),t.hasText(p)&&u(v,p,l,y);var m=[];(t.hasMarkers(p)||t.hasText(p))&&(y("marker.maxdisplayed"),m.push("points")),y("fill"),"none"!==p.fill&&(a(v,p,f,y),t.hasLines(p)||i(v,p,y)),("tonext"===p.fill||"toself"===p.fill)&&m.push("fills"),"fills"!==y("hoveron",m.join("+")||"points")&&y("hovertemplate"),M.coerceSelectionMarkerOpacity(p,y)}else p.visible=!1}},24478:$=>{"use strict";$.exports=function(e,M,I,t,T){var n=t[T];return e.a=n.a,e.b=n.b,e.y=n.y,e}},57022:$=>{"use strict";$.exports=function(e,M){var I={},t=M._carpet,T=t.ab2ij([e.a,e.b]),n=Math.floor(T[0]),i=T[0]-n,u=Math.floor(T[1]),a=T[1]-u,r=t.evalxy([],n,u,i,a);return I.yLabel=r[1].toFixed(3),I}},55847:($,K,e)=>{"use strict";var M=e(27016),I=e(5228).fillText;$.exports=function(T,n,i,u){var a=M(T,n,i,u);if(a&&!1!==a[0].index){var r=a[0];if(void 0===r.index){var o=1-r.y0/T.ya._length,v=T.xa._length,p=v*o/2,f=v-p;return r.x0=Math.max(Math.min(r.x0,f),p),r.x1=Math.max(Math.min(r.x1,f),p),a}var l=r.cd[r.index];r.a=l.a,r.b=l.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var y=r.trace,s=y._carpet,x=y._module.formatLabels(l,y);r.yLabel=x.yLabel,delete r.text;var h=[];if(!y.hovertemplate){var d=(l.hi||y.hoverinfo).split("+");-1!==d.indexOf("all")&&(d=["a","b","text"]),-1!==d.indexOf("a")&&g(s.aaxis,l.a),-1!==d.indexOf("b")&&g(s.baxis,l.b),h.push("y: "+r.yLabel),-1!==d.indexOf("text")&&I(l,y,h),r.extraText=h.join("<br>")}return a}function g(A,b){var c;c=A.labelprefix&&A.labelprefix.length>0?A.labelprefix.replace(/ = $/,""):A._hovertitle,h.push(c+": "+b.toFixed(3)+A.labelsuffix)}}},62279:($,K,e)=>{"use strict";$.exports={attributes:e(35650),supplyDefaults:e(72263),colorbar:e(74899),formatLabels:e(57022),calc:e(79112),plot:e(9634),style:e(54675).style,styleOnSelect:e(54675).styleOnSelect,hoverPoints:e(55847),selectPoints:e(177),eventData:e(24478),moduleType:"trace",name:"scattercarpet",basePlotModule:e(24329),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{hrName:"scatter_carpet",description:["Plots a scatter trace on either the first carpet axis or the","carpet axis with a matching `carpet` attribute."].join(" ")}}},9634:($,K,e)=>{"use strict";var M=e(73507),I=e(91464),t=e(27630);$.exports=function(n,i,u,a){var r,o,v,p=u[0][0].carpet,f=I.getFromId(n,p.xaxis||"x"),l=I.getFromId(n,p.yaxis||"y"),y={xaxis:f,yaxis:l,plot:i.plot};for(r=0;r<u.length;r++)(o=u[r][0].trace)._xA=f,o._yA=l;for(M(n,y,u,a),r=0;r<u.length;r++)o=u[r][0].trace,v=a.selectAll("g.trace"+o.uid+" .js-line"),t.setClipUrl(v,u[r][0].carpet._clipPathId,n)}},50971:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(9430).si,t=e(55405),T=e(82684),n=e(567),i=e(65822).P,u=e(18836).extendFlat,a=e(71859).overrideAll,r=t.marker,o=t.line,v=r.line;$.exports=a({lon:{valType:"data_array",description:"Sets the longitude coordinates (in degrees East)."},lat:{valType:"data_array",description:"Sets the latitude coordinates (in degrees North)."},locations:{valType:"data_array",description:["Sets the coordinates via location IDs or names.","Coordinates correspond to the centroid of each location given.","See `locationmode` for more info."].join(" ")},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3",description:["Determines the set of locations used to match entries in `locations`","to regions on the map.","Values *ISO-3*, *USA-states*, *country names* correspond to features on","the base map and value *geojson-id* corresponds to features from a custom","GeoJSON linked to the `geojson` attribute."].join(" ")},geojson:{valType:"any",editType:"calc",description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used when `locations` is set.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:{valType:"string",editType:"calc",dflt:"id",description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Only has an effect when `geojson` is set.","Support nested property, for example *properties.name*."].join(" ")},mode:u({},t.mode,{dflt:"markers"}),text:u({},t.text,{description:["Sets text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:I({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:u({},t.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),textfont:t.textfont,textposition:t.textposition,line:{color:o.color,width:o.width,dash:i},connectgaps:t.connectgaps,marker:u({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:u({},r.angleref,{values:["previous","up","north"],description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen.","With *north*, angle 0 points north based on the current map projection."].join(" ")}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:u({width:v.width},n("marker.line")),gradient:r.gradient},n("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape."].join(" ")},fillcolor:t.fillcolor,selected:t.selected,unselected:t.unselected,hoverinfo:u({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},4023:($,K,e)=>{"use strict";var M=e(7347),I=e(71103).BADNUM,t=e(50930),T=e(79179),n=e(20107),i=e(5228).isArrayOrTypedArray,u=e(5228)._;function a(r){return r&&"string"==typeof r}$.exports=function(o,v){var y,p=i(v.locations),f=p?v.locations.length:v._length,l=new Array(f);y=v.geojson?function(d){return a(d)||M(d)}:a;for(var s=0;s<f;s++){var x=l[s]={};if(p){var h=v.locations[s];x.loc=y(h)?h:null}else{var g=v.lon[s],m=v.lat[s];M(g)&&M(m)?x.lonlat=[+g,+m]:x.lonlat=[I,I]}}return T(l,v),t(o,v),n(l,v),f&&(l[0].t={labels:{lat:u(o,"lat:")+" ",lon:u(o,"lon:")+" "}}),l}},47613:($,K,e)=>{"use strict";var M=e(5228),I=e(49258),t=e(57265),T=e(50078),n=e(42622),i=e(27950),u=e(50971);$.exports=function(r,o,v,p){function f(d,A){return M.coerce(r,o,u,d,A)}var y,l=f("locations");if(l&&l.length){var x,s=f("geojson");("string"==typeof s&&""!==s||M.isPlainObject(s))&&(x="geojson-id"),"geojson-id"===f("locationmode",x)&&f("featureidkey"),y=l.length}else{var g=f("lon")||[],m=f("lat")||[];y=Math.min(g.length,m.length)}y?(o._length=y,f("text"),f("hovertext"),f("hovertemplate"),f("mode"),I.hasMarkers(o)&&t(r,o,v,p,f,{gradient:!0}),I.hasLines(o)&&(T(r,o,v,p,f),f("connectgaps")),I.hasText(o)&&(f("texttemplate"),n(r,o,p,f)),f("fill"),"none"!==o.fill&&i(r,o,v,f),M.coerceSelectionMarkerOpacity(o,f)):o.visible=!1}},5255:$=>{"use strict";$.exports=function(e,M,I,t,T){e.lon=M.lon,e.lat=M.lat,e.location=M.loc?M.loc:null;var n=t[T];return n.fIn&&n.fIn.properties&&(e.properties=n.fIn.properties),e}},65562:($,K,e)=>{"use strict";var M=e(91464);$.exports=function(t,T,n){var i={},a=n[T.geo]._subplot.mockAxis,r=t.lonlat;return i.lonLabel=M.tickText(a,a.c2l(r[0]),!0).text,i.latLabel=M.tickText(a,a.c2l(r[1]),!0).text,i}},38311:($,K,e)=>{"use strict";var M=e(76863),I=e(71103).BADNUM,t=e(26384),T=e(5228).fillText,n=e(50971);$.exports=function(a,r,o){var v=a.cd,p=v[0].trace,f=a.xa,l=a.ya,y=a.subplot,s=y.projection.isLonLatOverEdges,x=y.project;if(M.getClosest(v,function h(S){var w=S.lonlat;if(w[0]===I||s(w))return 1/0;var E=x(w),P=x([r,o]),R=Math.abs(E[0]-P[0]),F=Math.abs(E[1]-P[1]),_=Math.max(3,S.mrc||0);return Math.max(Math.sqrt(R*R+F*F)-_,1-3/_)},a),!1!==a.index){var g=v[a.index],m=g.lonlat,d=[f.c2p(m),l.c2p(m)],A=g.mrc||1;a.x0=d[0]-A,a.x1=d[0]+A,a.y0=d[1]-A,a.y1=d[1]+A,a.loc=g.loc,a.lon=m[0],a.lat=m[1];var b={};b[p.geo]={_subplot:y};var c=p._module.formatLabels(g,p,b);return a.lonLabel=c.lonLabel,a.latLabel=c.latLabel,a.color=t(p,g),a.extraText=function i(u,a,r,o){if(u.hovertemplate)return;var v=a.hi||u.hoverinfo,p="all"===v?n.hoverinfo.flags:v.split("+"),f=-1!==p.indexOf("location")&&Array.isArray(u.locations),l=-1!==p.indexOf("lon"),y=-1!==p.indexOf("lat"),s=-1!==p.indexOf("text"),x=[];function h(g){return g+"\xb0"}return f?x.push(a.loc):l&&y?x.push("("+h(r.latLabel)+", "+h(r.lonLabel)+")"):l?x.push(o.lon+h(r.lonLabel)):y&&x.push(o.lat+h(r.latLabel)),s&&T(a,u,x),x.join("<br>")}(p,g,a,v[0].t.labels),a.hovertemplate=p.hovertemplate,[a]}}},13411:($,K,e)=>{"use strict";$.exports={attributes:e(50971),supplyDefaults:e(47613),colorbar:e(74899),formatLabels:e(65562),calc:e(4023),calcGeoJSON:e(8470).calcGeoJSON,plot:e(8470).plot,style:e(72933),styleOnSelect:e(54675).styleOnSelect,hoverPoints:e(38311),eventData:e(5255),selectPoints:e(97205),moduleType:"trace",name:"scattergeo",basePlotModule:e(48096),categories:["geo","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_geo",description:["The data visualized as scatter point or lines on a geographic map","is provided either by longitude/latitude pairs in `lon` and `lat`","respectively or by geographic location IDs or names in `locations`."].join(" ")}}},8470:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(55024).getTopojsonFeatures,T=e(41368),n=e(14369),i=e(73332).findExtremes,u=e(71103).BADNUM,a=e(9451).calcMarkerSize,r=e(49258),o=e(72933);$.exports={calcGeoJSON:function p(f,l){var g,m,y=f[0].trace,s=l[y.geo],x=s._subplot,h=y._length;if(I.isArrayOrTypedArray(y.locations)){var d=y.locationmode,A="geojson-id"===d?n.extractTraceFeature(f):t(y,x.topojson);for(g=0;g<h;g++){m=f[g];var b="geojson-id"===d?m.fOut:n.locationToFeature(d,m.loc,A);m.lonlat=b?b.properties.ct:[u,u]}}var S,w,c={padded:!0};if("geojson"===s.fitbounds&&"geojson-id"===y.locationmode){var E=n.computeBbox(n.getTraceGeojson(y));S=[E[0],E[2]],w=[E[1],E[3]]}else{for(S=new Array(h),w=new Array(h),g=0;g<h;g++)m=f[g],S[g]=m.lonlat[0],w[g]=m.lonlat[1];c.ppad=a(y,h)}y._extremes.lon=i(s.lonaxis._ax,S,c),y._extremes.lat=i(s.lataxis._ax,w,c)},plot:function v(f,l,y){var s=l.layers.frontplot.select(".scatterlayer"),x=I.makeTraceGroups(s,y,"trace scattergeo");function h(g,m){g.lonlat[0]===u&&M.select(m).remove()}x.selectAll("*").remove(),x.each(function(g){var m=M.select(this),d=g[0].trace;if(r.hasLines(d)||"none"!==d.fill){var A=T.calcTraceToLineCoords(g),b="none"!==d.fill?T.makePolygon(A):T.makeLine(A);m.selectAll("path.js-line").data([{geojson:b,trace:d}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(d)&&m.selectAll("path.point").data(I.identity).enter().append("path").classed("point",!0).each(function(c){h(c,this)}),r.hasText(d)&&m.selectAll("g").data(I.identity).enter().append("g").append("text").each(function(c){h(c,this)}),o(f,g)})}}},97205:($,K,e)=>{"use strict";var M=e(49258),I=e(71103).BADNUM;$.exports=function(T,n){var v,p,f,l,y,i=T.cd,u=T.xaxis,a=T.yaxis,r=[],o=i[0].trace;if(!M.hasMarkers(o)&&!M.hasText(o))return[];if(!1===n)for(y=0;y<i.length;y++)i[y].selected=0;else for(y=0;y<i.length;y++)(p=(v=i[y]).lonlat)[0]!==I&&(f=u.c2p(p),l=a.c2p(p),n.contains([f,l],null,y,T)?(r.push({pointNumber:y,lon:p[0],lat:p[1]}),v.selected=1):v.selected=0);return r}},72933:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(8416),T=e(54675),n=T.stylePoints,i=T.styleText;$.exports=function(r,o){o&&function u(a,r){var o=r[0].trace,v=r[0].node3;v.style("opacity",r[0].trace.opacity),n(v,o,a),i(v,o,a),v.selectAll("path.js-line").style("fill","none").each(function(p){var f=M.select(this),l=p.trace,y=l.line||{};f.call(t.stroke,y.color).call(I.dashLine,y.dash||"",y.width||0),"none"!==l.fill&&f.call(t.fill,l.fillcolor)})}(r,o)}},15917:($,K,e)=>{"use strict";var M=e(82684),I=e(55405),t=e(88489).axisHoverFormat,T=e(567),n=e(65452),i=e(18836).extendFlat,u=e(71859).overrideAll,a=e(6906).DASHES,r=I.line,o=I.marker,v=o.line,p=$.exports=u({x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,xhoverformat:t("x"),yhoverformat:t("y"),text:I.text,hovertext:I.hovertext,textposition:I.textposition,textfont:I.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],description:["Determines the drawing mode for this scatter trace."].join(" ")},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","The values correspond to step-wise line shapes."].join(" ")},dash:{valType:"enumerated",values:n(a),dflt:"solid",description:"Sets the style of the lines."}},marker:i({},T("marker"),{symbol:o.symbol,angle:o.angle,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:i({},T("marker.line"),{width:v.width})}),connectgaps:I.connectgaps,fill:i({},I.fill,{dflt:"none"}),fillcolor:I.fillcolor,selected:{marker:I.selected.marker,textfont:I.selected.textfont},unselected:{marker:I.unselected.marker,textfont:I.unselected.textfont},opacity:M.opacity},"calc","nested");p.x.editType=p.y.editType=p.x0.editType=p.y0.editType="calc+clearAxisTypes",p.hovertemplate=I.hovertemplate,p.texttemplate=I.texttemplate},97497:($,K,e)=>{"use strict";var M=e(77466);$.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(24329),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(15917),supplyDefaults:e(87533),crossTraceDefaults:e(38541),colorbar:e(74899),formatLabels:e(23582),calc:e(59923),hoverPoints:M.hoverPoints,selectPoints:e(18897),meta:{hrName:"scatter_gl",description:["The data visualized as scatter point or lines is set in `x` and `y`","using the WebGL plotting engine.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to a numerical arrays."].join(" ")}}},59923:($,K,e)=>{"use strict";var M=e(52092),I=e(5228),t=e(78168),T=e(73332).findExtremes,n=e(62311),i=e(9451),u=i.calcMarkerSize,a=i.calcAxisExpansion,r=i.setFirstScatter,o=e(50930),v=e(54414),p=e(97645),f=e(71103).BADNUM,l=e(6906).TOO_MANY_POINTS;function y(x,h,g){var m=x._extremes[h._id],d=T(h,g._bnds,{padded:!0});m.min=m.min.concat(d.min),m.max=m.max.concat(d.max)}$.exports=function(h,g){var P,m=h._fullLayout,d=g._xA=t.getFromId(h,g.xaxis,"x"),A=g._yA=t.getFromId(h,g.yaxis,"y"),b=m._plots[g.xaxis+g.yaxis],c=g._length,S=c>=l,w=2*c,E={},R=d.makeCalcdata(g,"x"),F=A.makeCalcdata(g,"y"),_=n(g,d,"x",R),z=n(g,A,"y",F),D=_.vals,k=z.vals;g._x=D,g._y=k,g.xperiodalignment&&(g._origX=R,g._xStarts=_.starts,g._xEnds=_.ends),g.yperiodalignment&&(g._origY=F,g._yStarts=z.starts,g._yEnds=z.ends);var O=new Array(w),U=new Array(c);for(P=0;P<c;P++)O[2*P]=D[P]===f?NaN:D[P],O[2*P+1]=k[P]===f?NaN:k[P],U[P]=P;if("log"===d.type)for(P=0;P<w;P+=2)O[P]=d.c2l(O[P]);if("log"===A.type)for(P=1;P<w;P+=2)O[P]=A.c2l(O[P]);S&&"log"!==d.type&&"log"!==A.type?E.tree=M(O):E.ids=U,o(h,g);var ee,H=function s(x,h,g,m,d,A){var b=v.style(x,g);if(b.marker&&(b.marker.positions=m),b.line&&m.length>1&&I.extendFlat(b.line,v.linePositions(x,g,m)),b.errorX||b.errorY){var c=v.errorBarPositions(x,g,m,d,A);b.errorX&&I.extendFlat(b.errorX,c.x),b.errorY&&I.extendFlat(b.errorY,c.y)}return b.text&&(I.extendFlat(b.text,{positions:m},v.textPosition(x,g,b.text,b.marker)),I.extendFlat(b.textSel,{positions:m},v.textPosition(x,g,b.text,b.markerSel)),I.extendFlat(b.textUnsel,{positions:m},v.textPosition(x,g,b.text,b.markerUnsel))),b}(h,0,g,O,D,k),j=p(h,b);return r(m,g),S?H.marker&&(ee=H.marker.sizeAvg||Math.max(H.marker.size,3)):ee=u(g,c),a(h,g,d,A,D,k,ee),H.errorX&&y(g,d,H.errorX),H.errorY&&y(g,A,H.errorY),H.fill&&!j.fill2d&&(j.fill2d=!0),H.marker&&!j.scatter2d&&(j.scatter2d=!0),H.line&&!j.line2d&&(j.line2d=!0),(H.errorX||H.errorY)&&!j.error2d&&(j.error2d=!0),H.text&&!j.glText&&(j.glText=!0),H.marker&&(H.marker.snap=c),j.lineOptions.push(H.line),j.errorXOptions.push(H.errorX),j.errorYOptions.push(H.errorY),j.fillOptions.push(H.fill),j.markerOptions.push(H.marker),j.markerSelectedOptions.push(H.markerSel),j.markerUnselectedOptions.push(H.markerUnsel),j.textOptions.push(H.text),j.textSelectedOptions.push(H.textSel),j.textUnselectedOptions.push(H.textUnsel),j.selectBatch.push([]),j.unselectBatch.push([]),E._scene=j,E.index=j.count,E.x=D,E.y=k,E.positions=O,j.count++,[{x:!1,y:!1,t:E,trace:g}]}},6906:$=>{"use strict";$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},54414:($,K,e)=>{"use strict";var M=e(7347),I=e(3550),t=e(92473),T=e(97799),n=e(5228),i=n.isArrayOrTypedArray,u=e(27630),a=e(78168),r=e(15989).formatColor,o=e(49258),v=e(47173),p=e(36207),f=e(6906),l=e(49431).DESELECTDIM,y={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},s=e(40235).appendArrayPointValue;function h(z,D){var q,k=z._fullLayout,O=D._length,U=D.textfont,H=D.textposition,j=i(H)?H:[H],ee=U.color,W=U.size,B=U.family,te={},oe=z._context.plotGlPixelRatio,ie=D.texttemplate;if(ie){te.text=[];var V=k._d3locale,Y=Array.isArray(ie),ae=Y?Math.min(ie.length,O):O,X=Y?function(be){return ie[be]}:function(){return ie};for(q=0;q<ae;q++){var J={i:q},ue=D._module.formatLabels(J,D,k),re={};s(re,D,q);var ne=D._meta||{};te.text.push(n.texttemplateString(X(q),ue,V,re,J,ne))}}else i(D.text)&&D.text.length<O?te.text=D.text.slice():te.text=D.text;if(i(te.text))for(q=te.text.length;q<O;q++)te.text[q]="";for(te.opacity=D.opacity,te.font={},te.align=[],te.baseline=[],q=0;q<j.length;q++){var se=j[q].split(/\s+/);switch(se[1]){case"left":te.align.push("right");break;case"right":te.align.push("left");break;default:te.align.push(se[1])}switch(se[0]){case"top":te.baseline.push("bottom");break;case"bottom":te.baseline.push("top");break;default:te.baseline.push(se[0])}}if(i(ee))for(te.color=new Array(O),q=0;q<O;q++)te.color[q]=ee[q];else te.color=ee;if(i(W)||i(B))for(te.font=new Array(O),q=0;q<O;q++){var de=te.font[q]={};de.size=(n.isTypedArray(W)?W[q]:i(W)?M(W[q])?W[q]:0:W)*oe,de.family=i(B)?B[q]:B}else te.font={size:W*oe,family:B};return te}function g(z,D){var H,ie,k=D._length,O=D.marker,U={},j=i(O.symbol),ee=i(O.angle),W=i(O.color),B=i(O.line.color),te=i(O.opacity),q=i(O.size),oe=i(O.line.width);if(j||(ie=p.isOpenSymbol(O.symbol)),j||W||B||te||ee){U.symbols=new Array(k),U.angles=new Array(k),U.colors=new Array(k),U.borderColors=new Array(k);var V=O.symbol,Y=O.angle,ae=r(O,O.opacity,k),X=r(O.line,O.opacity,k);if(!i(X[0])){var J=X;for(X=Array(k),H=0;H<k;H++)X[H]=J}if(!i(ae[0])){var ue=ae;for(ae=Array(k),H=0;H<k;H++)ae[H]=ue}if(!i(V)){var re=V;for(V=Array(k),H=0;H<k;H++)V[H]=re}if(!i(Y)){var ne=Y;for(Y=Array(k),H=0;H<k;H++)Y[H]=ne}for(U.symbols=V,U.angles=Y,U.colors=ae,U.borderColors=X,H=0;H<k;H++)j&&(ie=p.isOpenSymbol(O.symbol[H])),ie&&(X[H]=ae[H].slice(),ae[H]=ae[H].slice(),ae[H][3]=0);for(U.opacity=D.opacity,U.markers=new Array(k),H=0;H<k;H++)U.markers[H]=P({mx:U.symbols[H],ma:U.angles[H]},D)}else ie?(U.color=t(O.color,"uint8"),U.color[3]=0,U.borderColor=t(O.color,"uint8")):(U.color=t(O.color,"uint8"),U.borderColor=t(O.line.color,"uint8")),U.opacity=D.opacity*O.opacity,U.marker=P({mx:O.symbol,ma:O.angle},D);var be,de=v(D,1);if(q||oe){var Le,De=U.sizes=new Array(k),_e=U.borderSizes=new Array(k),Ce=0;if(q){for(H=0;H<k;H++)De[H]=de(O.size[H]),Ce+=De[H];Le=Ce/k}else for(be=de(O.size),H=0;H<k;H++)De[H]=be;if(oe)for(H=0;H<k;H++)_e[H]=O.line.width[H];else for(be=O.line.width,H=0;H<k;H++)_e[H]=be;U.sizeAvg=Le}else U.size=de(O&&O.size||10),U.borderSizes=de(O.line.width);return U}function m(z,D,k){var O=D.marker,U={};return k&&(k.marker&&k.marker.symbol?U=g(0,n.extendFlat({},O,k.marker)):k.marker&&(k.marker.size&&(U.size=k.marker.size),k.marker.color&&(U.colors=k.marker.color),void 0!==k.marker.opacity&&(U.opacity=k.marker.opacity))),U}function d(z,D,k){var O={};if(!k)return O;if(k.textfont){var U={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:n.extendFlat({},D.textfont)};k.textfont&&n.extendFlat(U.textfont,k.textfont),O=h(z,U)}return O}function A(z,D,k){var O={capSize:2*D.width*k,lineWidth:D.thickness*k,color:D.color};return D.copy_ystyle&&(O=z.error_y),O}var b=f.SYMBOL_SDF_SIZE,c=f.SYMBOL_SIZE,S=f.SYMBOL_STROKE,w={},E=u.symbolFuncs[0](.05*c);function P(z,D){var k=z.mx;if("circle"===k)return null;var O,U,H=u.symbolNumber(k),j=u.symbolFuncs[H%100],ee=!!u.symbolNoDot[H%100],W=!!u.symbolNoFill[H%100],B=p.isDotSymbol(k);if(z.ma&&(k+="_"+z.ma),w[k])return w[k];var te=u.getMarkerAngle(z,D);return O=B&&!ee?j(1.1*c,te)+E:j(c,te),U=I(O,{w:b,h:b,viewBox:[-c,-c,c,c],stroke:W?S:-S}),w[k]=U,U||null}$.exports={style:function x(z,D){var k,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},U=z._context.plotGlPixelRatio;if(!0!==D.visible)return O;if(o.hasText(D)&&(O.text=h(z,D),O.textSel=d(z,D,D.selected),O.textUnsel=d(z,D,D.unselected)),o.hasMarkers(D)&&(O.marker=g(z,D),O.markerSel=m(z,D,D.selected),O.markerUnsel=m(z,D,D.unselected),!D.unselected&&i(D.marker.opacity))){var H=D.marker.opacity;for(O.markerUnsel.opacity=new Array(H.length),k=0;k<H.length;k++)O.markerUnsel.opacity[k]=l*H[k]}if(o.hasLines(D)){O.line={overlay:!0,thickness:D.line.width*U,color:D.line.color,opacity:D.opacity};var j=(f.DASHES[D.line.dash]||[1]).slice();for(k=0;k<j.length;++k)j[k]*=D.line.width*U;O.line.dashes=j}return D.error_x&&D.error_x.visible&&(O.errorX=A(D,D.error_x,U)),D.error_y&&D.error_y.visible&&(O.errorY=A(D,D.error_y,U)),D.fill&&"none"!==D.fill&&(O.fill={closed:!0,fill:D.fillcolor,thickness:0}),O},markerStyle:g,markerSelection:m,linePositions:function R(z,D,k){var H,j,O=k.length,U=O/2;if(o.hasLines(D)&&U)if("hv"===D.line.shape){for(H=[],j=0;j<U-1;j++)isNaN(k[2*j])||isNaN(k[2*j+1])?H.push(NaN,NaN,NaN,NaN):(H.push(k[2*j],k[2*j+1]),isNaN(k[2*j+2])||isNaN(k[2*j+3])?H.push(NaN,NaN):H.push(k[2*j+2],k[2*j+1]));H.push(k[O-2],k[O-1])}else if("hvh"===D.line.shape){for(H=[],j=0;j<U-1;j++)if(isNaN(k[2*j])||isNaN(k[2*j+1])||isNaN(k[2*j+2])||isNaN(k[2*j+3]))isNaN(k[2*j])||isNaN(k[2*j+1])?H.push(NaN,NaN):H.push(k[2*j],k[2*j+1]),H.push(NaN,NaN);else{var ee=(k[2*j]+k[2*j+2])/2;H.push(k[2*j],k[2*j+1],ee,k[2*j+1],ee,k[2*j+3])}H.push(k[O-2],k[O-1])}else if("vhv"===D.line.shape){for(H=[],j=0;j<U-1;j++)if(isNaN(k[2*j])||isNaN(k[2*j+1])||isNaN(k[2*j+2])||isNaN(k[2*j+3]))isNaN(k[2*j])||isNaN(k[2*j+1])?H.push(NaN,NaN):H.push(k[2*j],k[2*j+1]),H.push(NaN,NaN);else{var W=(k[2*j+1]+k[2*j+3])/2;H.push(k[2*j],k[2*j+1],k[2*j],W,k[2*j+2],W)}H.push(k[O-2],k[O-1])}else if("vh"===D.line.shape){for(H=[],j=0;j<U-1;j++)isNaN(k[2*j])||isNaN(k[2*j+1])?H.push(NaN,NaN,NaN,NaN):(H.push(k[2*j],k[2*j+1]),isNaN(k[2*j+2])||isNaN(k[2*j+3])?H.push(NaN,NaN):H.push(k[2*j],k[2*j+3]));H.push(k[O-2],k[O-1])}else H=k;var B=!1;for(j=0;j<H.length;j++)if(isNaN(H[j])){B=!0;break}var te=B||H.length>f.TOO_MANY_POINTS||o.hasMarkers(D)?"rect":"round";if(B&&D.connectgaps){var q=H[0],oe=H[1];for(j=0;j<H.length;j+=2)isNaN(H[j])||isNaN(H[j+1])?(H[j]=q,H[j+1]=oe):(q=H[j],oe=H[j+1])}return{join:te,positions:H}},errorBarPositions:function F(z,D,k,O,U){var H=T.getComponentMethod("errorbars","makeComputeError"),j=a.getFromId(z,D.xaxis,"x"),ee=a.getFromId(z,D.yaxis,"y"),W=k.length/2,B={};function te(q,oe){var ie=oe._id.charAt(0),V=D["error_"+ie];if(V&&V.visible&&("linear"===oe.type||"log"===oe.type)){for(var Y=H(V),ae={x:0,y:1}[ie],X={x:[0,1,2,3],y:[2,3,0,1]}[ie],J=new Float64Array(4*W),ue=1/0,re=-1/0,ne=0,se=0;ne<W;ne++,se+=4){var de=q[ne];if(M(de)){var be=k[2*ne+ae],De=Y(de,ne),_e=De[0],Ce=De[1];if(M(_e)&&M(Ce)){var Le=de-_e,Fe=de+Ce;J[se+X[0]]=be-oe.c2l(Le),J[se+X[1]]=oe.c2l(Fe)-be,J[se+X[2]]=0,J[se+X[3]]=0,ue=Math.min(ue,de-_e),re=Math.max(re,de+Ce)}}}B[ie]={positions:k,errors:J,_bnds:[ue,re]}}}return te(O,j),te(U,ee),B},textPosition:function _(z,D,k,O){var j,U=D._length,H={};if(o.hasMarkers(D)){var ee=k.font,W=k.align,B=k.baseline;for(H.offset=new Array(U),j=0;j<U;j++){var te=O.sizes?O.sizes[j]:O.size,q=i(ee)?ee[j].size:ee.size,oe=i(W)?W.length>1?W[j]:W[0]:W,ie=i(B)?B.length>1?B[j]:B[0]:B,V=y[oe],Y=y[ie],ae=te?te/.8+1:0,X=-Y*ae-.5*Y;H.offset[j]=[V*ae/q,X/q]}}return H}}},87533:($,K,e)=>{"use strict";var M=e(5228),I=e(97799),t=e(36207),T=e(15917),n=e(47715),i=e(49258),u=e(82069),a=e(18031),r=e(57265),o=e(50078),v=e(27950),p=e(42622);$.exports=function(l,y,s,x){function h(w,E){return M.coerce(l,y,T,w,E)}var g=!!l.marker&&t.isOpenSymbol(l.marker.symbol),m=i.isBubble(l),d=u(l,y,x,h);if(d){a(l,y,x,h),h("xhoverformat"),h("yhoverformat");var A=d<n.PTS_LINESONLY?"lines+markers":"lines";h("text"),h("hovertext"),h("hovertemplate"),h("mode",A),i.hasMarkers(y)&&(r(l,y,s,x,h,{noAngleRef:!0,noStandOff:!0}),h("marker.line.width",g||m?1:0)),i.hasLines(y)&&(h("connectgaps"),o(l,y,s,x,h),h("line.shape")),i.hasText(y)&&(h("texttemplate"),p(l,y,x,h));var b=(y.line||{}).color,c=(y.marker||{}).color;h("fill"),"none"!==y.fill&&v(l,y,s,h);var S=I.getComponentMethod("errorbars","supplyDefaults");S(l,y,b||c||s,{axis:"y"}),S(l,y,b||c||s,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(y,h)}else y.visible=!1}},36625:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(49431).DESELECTDIM;$.exports={styleTextSelection:function T(n){var x,h,i=n[0],u=i.trace,a=i.t,r=a._scene,o=a.index,v=r.selectBatch[o],p=r.unselectBatch[o],f=r.textOptions[o],l=r.textSelectedOptions[o]||{},y=r.textUnselectedOptions[o]||{},s=M.extendFlat({},f);if(v.length||p.length){var g=l.color,m=y.color,d=f.color,A=M.isArrayOrTypedArray(d);for(s.color=new Array(u._length),x=0;x<v.length;x++)h=v[x],s.color[h]=g||(A?d[h]:d);for(x=0;x<p.length;x++){h=p[x];var b=A?d[h]:d;s.color[h]=m||(g?b:I.addOpacity(b,t))}}r.glText[o].update(s)}}},23582:($,K,e)=>{"use strict";var M=e(59921);$.exports=function(t,T,n){var i=t.i;return"x"in t||(t.x=T._x[i]),"y"in t||(t.y=T._y[i]),M(t,T,n)}},36207:($,K,e)=>{"use strict";var M=e(6906);K.isOpenSymbol=function(I){return"string"==typeof I?M.OPEN_RE.test(I):I%200>100},K.isDotSymbol=function(I){return"string"==typeof I?M.DOT_RE.test(I):I>200}},77466:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(26384);function n(i,u,a,r){var o=i.xa,v=i.ya,p=i.distance,f=i.dxy,l=i.index,y={pointNumber:l,x:u[l],y:a[l]};y.tx=I.isArrayOrTypedArray(r.text)?r.text[l]:r.text,y.htx=Array.isArray(r.hovertext)?r.hovertext[l]:r.hovertext,y.data=Array.isArray(r.customdata)?r.customdata[l]:r.customdata,y.tp=Array.isArray(r.textposition)?r.textposition[l]:r.textposition;var s=r.textfont;s&&(y.ts=I.isArrayOrTypedArray(s.size)?s.size[l]:s.size,y.tc=Array.isArray(s.color)?s.color[l]:s.color,y.tf=Array.isArray(s.family)?s.family[l]:s.family);var x=r.marker;x&&(y.ms=I.isArrayOrTypedArray(x.size)?x.size[l]:x.size,y.mo=I.isArrayOrTypedArray(x.opacity)?x.opacity[l]:x.opacity,y.mx=I.isArrayOrTypedArray(x.symbol)?x.symbol[l]:x.symbol,y.ma=I.isArrayOrTypedArray(x.angle)?x.angle[l]:x.angle,y.mc=I.isArrayOrTypedArray(x.color)?x.color[l]:x.color);var h=x&&x.line;h&&(y.mlc=Array.isArray(h.color)?h.color[l]:h.color,y.mlw=I.isArrayOrTypedArray(h.width)?h.width[l]:h.width);var g=x&&x.gradient;g&&"none"!==g.type&&(y.mgt=Array.isArray(g.type)?g.type[l]:g.type,y.mgc=Array.isArray(g.color)?g.color[l]:g.color);var m=o.c2p(y.x,!0),d=v.c2p(y.y,!0),A=y.mrc||1,b=r.hoverlabel;b&&(y.hbg=Array.isArray(b.bgcolor)?b.bgcolor[l]:b.bgcolor,y.hbc=Array.isArray(b.bordercolor)?b.bordercolor[l]:b.bordercolor,y.hts=I.isArrayOrTypedArray(b.font.size)?b.font.size[l]:b.font.size,y.htc=Array.isArray(b.font.color)?b.font.color[l]:b.font.color,y.htf=Array.isArray(b.font.family)?b.font.family[l]:b.font.family,y.hnl=I.isArrayOrTypedArray(b.namelength)?b.namelength[l]:b.namelength);var c=r.hoverinfo;c&&(y.hi=Array.isArray(c)?c[l]:c);var S=r.hovertemplate;S&&(y.ht=Array.isArray(S)?S[l]:S);var w={};w[i.index]=y;var E=r._origX,P=r._origY,R=I.extendFlat({},i,{color:t(r,y),x0:m-A,x1:m+A,xLabelVal:E?E[l]:y.x,y0:d-A,y1:d+A,yLabelVal:P?P[l]:y.y,cd:w,distance:p,spikeDistance:f,hovertemplate:y.ht});return y.htx?R.text=y.htx:y.tx?R.text=y.tx:r.text&&(R.text=r.text),I.fillText(y,r,R),M.getComponentMethod("errorbars","hoverInfo")(y,r,R),R}$.exports={hoverPoints:function T(i,u,a,r){var m,o=i.cd,v=o[0].t,p=o[0].trace,f=i.xa,l=i.ya,y=v.x,s=v.y,x=f.c2p(u),h=l.c2p(a),g=i.distance;if(v.tree){var d=f.p2c(x-g),A=f.p2c(x+g),b=l.p2c(h-g),c=l.p2c(h+g);m="x"===r?v.tree.range(Math.min(d,A),Math.min(l._rl[0],l._rl[1]),Math.max(d,A),Math.max(l._rl[0],l._rl[1])):v.tree.range(Math.min(d,A),Math.min(b,c),Math.max(d,A),Math.max(b,c))}else m=v.ids;var S,w,E,P,R,F,_,z,D,k=g;if("x"===r){var O=!!p.xperiodalignment,U=!!p.yperiodalignment;for(R=0;R<m.length;R++){if(E=y[S=m[R]],F=Math.abs(f.c2p(E)-x),O){var H=f.c2p(p._xStarts[S]),j=f.c2p(p._xEnds[S]);F=x>=Math.min(H,j)&&x<=Math.max(H,j)?0:1/0}if(F<k){if(k=F,P=s[S],_=l.c2p(P)-h,U){var ee=l.c2p(p._yStarts[S]),W=l.c2p(p._yEnds[S]);_=h>=Math.min(ee,W)&&h<=Math.max(ee,W)?0:1/0}D=Math.sqrt(F*F+_*_),w=m[R]}}}else for(R=m.length-1;R>-1;R--)E=y[S=m[R]],P=s[S],F=f.c2p(E)-x,_=l.c2p(P)-h,(z=Math.sqrt(F*F+_*_))<k&&(k=D=z,w=S);return i.index=w,i.distance=k,i.dxy=D,void 0===w?[i]:[n(i,y,s,p)]},calcHover:n}},69750:($,K,e)=>{"use strict";var M=e(97497);M.plot=e(4043),$.exports=M},4043:($,K,e)=>{"use strict";var M=e(68762),I=e(36224),t=e(98399),T=e(60532),n=e(5228),i=e(85996).selectMode,u=e(90676),a=e(49258),r=e(33197),o=e(36625).styleTextSelection,v={};function p(l,y,s,x){var h=l._size,g=l.width*x,m=l.height*x,d=h.l*x,A=h.b*x,b=h.r*x,c=h.t*x,S=h.w*x,w=h.h*x;return[d+y.domain[0]*S,A+s.domain[0]*w,g-b-(1-y.domain[1])*S,m-c-(1-s.domain[1])*w]}($.exports=function(y,s,x){if(x.length){var A,b,h=y._fullLayout,g=s._scene,m=s.xaxis,d=s.yaxis;if(g){if(!u(y,["ANGLE_instanced_arrays","OES_element_index_uint"],v))return void g.init();var S=g.count,w=h._glcanvas.data()[0].regl;if(r(y,s,x),g.dirty){if((g.line2d||g.error2d)&&!(g.scatter2d||g.fill2d||g.glText)&&w.clear({}),!0===g.error2d&&(g.error2d=t(w)),!0===g.line2d&&(g.line2d=I(w)),!0===g.scatter2d&&(g.scatter2d=M(w)),!0===g.fill2d&&(g.fill2d=I(w)),!0===g.glText)for(g.glText=new Array(S),A=0;A<S;A++)g.glText[A]=new T(w);if(g.glText){if(S>g.glText.length){var E=S-g.glText.length;for(A=0;A<E;A++)g.glText.push(new T(w))}else if(S<g.glText.length){var P=g.glText.length-S;g.glText.splice(S,P).forEach(function(X){X.destroy()})}for(A=0;A<S;A++)g.glText[A].update(g.textOptions[A])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(X){if(X&&X.positions){for(var J=X.positions,ue=0;ue<J.length&&(isNaN(J[ue])||isNaN(J[ue+1]));)ue+=2;for(var re=J.length-2;re>ue&&(isNaN(J[re])||isNaN(J[re+1]));)re-=2;X.positions=J.slice(ue,re+2)}return X}),g.line2d.update(g.lineOptions)),g.error2d){var F=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(F)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=n.repeat(null,S),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(X,J){var ue=x[J];if(X&&ue&&ue[0]&&ue[0].trace){var be,De,re=ue[0],ne=re.trace,se=re.t,de=g.lineOptions[J],_e=[];ne._ownfill&&_e.push(J),ne._nexttrace&&_e.push(J+1),_e.length&&(g.fillOrder[J]=_e);var Fe,ke,Ce=[],Le=de&&de.positions||se.positions;if("tozeroy"===ne.fill){for(Fe=0;Fe<Le.length&&isNaN(Le[Fe+1]);)Fe+=2;for(ke=Le.length-2;ke>Fe&&isNaN(Le[ke+1]);)ke-=2;0!==Le[Fe+1]&&(Ce=[Le[Fe],0]),Ce=Ce.concat(Le.slice(Fe,ke+2)),0!==Le[ke+1]&&(Ce=Ce.concat([Le[ke],0]))}else if("tozerox"===ne.fill){for(Fe=0;Fe<Le.length&&isNaN(Le[Fe]);)Fe+=2;for(ke=Le.length-2;ke>Fe&&isNaN(Le[ke]);)ke-=2;0!==Le[Fe]&&(Ce=[0,Le[Fe+1]]),Ce=Ce.concat(Le.slice(Fe,ke+2)),0!==Le[ke]&&(Ce=Ce.concat([0,Le[ke+1]]))}else if("toself"===ne.fill||"tonext"===ne.fill){for(Ce=[],be=0,X.splitNull=!0,De=0;De<Le.length;De+=2)(isNaN(Le[De])||isNaN(Le[De+1]))&&((Ce=Ce.concat(Le.slice(be,De))).push(Le[be],Le[be+1]),Ce.push(null,null),be=De+2);Ce=Ce.concat(Le.slice(be)),be&&Ce.push(Le[be],Le[be+1])}else{var ze=ne._nexttrace;if(ze){var Pe=g.lineOptions[J+1];if(Pe){var Ie=Pe.positions;if("tonexty"===ne.fill){for(Ce=Le.slice(),J=Math.floor(Ie.length/2);J--;){var Qe=Ie[2*J],at=Ie[2*J+1];isNaN(Qe)||isNaN(at)||Ce.push(Qe,at)}X.fill=ze.fillcolor}}}}if(ne._prevtrace&&"tonext"===ne._prevtrace.fill){var Be=g.lineOptions[J-1].positions,Ne=Ce.length/2,nt=[be=Ne];for(De=0;De<Be.length;De+=2)(isNaN(Be[De])||isNaN(Be[De+1]))&&(nt.push(De/2+Ne+1),be=De+2);Ce=Ce.concat(Be),X.hole=nt}return X.fillmode=ne.fill,X.opacity=ne.opacity,X.positions=Ce,X}}),g.fill2d.update(g.fillOptions))}var _=h.dragmode,z=i(_),D=h.clickmode.indexOf("select")>-1;for(A=0;A<S;A++){var k=x[A][0],O=k.trace,U=k.t,H=U.index,j=O._length,ee=U.x,W=U.y;if(O.selectedpoints||z||D){if(z||(z=!0),O.selectedpoints){var B=g.selectBatch[H]=n.selIndices2selPoints(O),te={};for(b=0;b<B.length;b++)te[B[b]]=1;var q=[];for(b=0;b<j;b++)te[b]||q.push(b);g.unselectBatch[H]=q}var oe=U.xpx=new Array(j),ie=U.ypx=new Array(j);for(b=0;b<j;b++)oe[b]=m.c2p(ee[b]),ie[b]=d.c2p(W[b])}else U.xpx=U.ypx=null}if(z){if(g.select2d||(g.select2d=M(h._glcanvas.data()[1].regl)),g.scatter2d){var V=new Array(S);for(A=0;A<S;A++)V[A]=g.selectBatch[A].length||g.unselectBatch[A].length?g.markerUnselectedOptions[A]:{};g.scatter2d.update(V)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&x.forEach(function(X){var J=((X||[])[0]||{}).trace||{};a.hasText(J)&&o(X)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var Y={viewport:p(h,m,d,y._context.plotGlPixelRatio),range:[(m._rl||m.range)[0],(d._rl||d.range)[0],(m._rl||m.range)[1],(d._rl||d.range)[1]]},ae=n.repeat(Y,g.count);g.fill2d&&g.fill2d.update(ae),g.line2d&&g.line2d.update(ae),g.error2d&&g.error2d.update(ae.concat(ae)),g.scatter2d&&g.scatter2d.update(ae),g.select2d&&g.select2d.update(ae),g.glText&&g.glText.forEach(function(X){X.update(Y)})}}}).reglPrecompiled=v},97645:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){var n=T._scene,i={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},u={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||((n=T._scene={}).init=function(){M.extendFlat(n,u,i)},n.init(),n.update=function(r){var o=M.repeat(r,n.count);if(n.fill2d&&n.fill2d.update(o),n.scatter2d&&n.scatter2d.update(o),n.line2d&&n.line2d.update(o),n.error2d&&n.error2d.update(o.concat(o)),n.select2d&&n.select2d.update(o),n.glText)for(var v=0;v<n.count;v++)n.glText[v].update(r)},n.draw=function(){for(var r=n.count,o=n.fill2d,v=n.error2d,p=n.line2d,f=n.scatter2d,l=n.glText,y=n.select2d,s=n.selectBatch,x=n.unselectBatch,h=0;h<r;h++){if(o&&n.fillOrder[h]&&o.draw(n.fillOrder[h]),p&&n.lineOptions[h]&&p.draw(h),v&&(n.errorXOptions[h]&&v.draw(h),n.errorYOptions[h]&&v.draw(h+r)),f&&n.markerOptions[h])if(x[h].length){var g=M.repeat([],n.count);g[h]=x[h],f.draw(g)}else s[h].length||f.draw(h);l[h]&&n.textOptions[h]&&l[h].render()}y&&y.draw(s),n.dirty=!1},n.destroy=function(){n.fill2d&&n.fill2d.destroy&&n.fill2d.destroy(),n.scatter2d&&n.scatter2d.destroy&&n.scatter2d.destroy(),n.error2d&&n.error2d.destroy&&n.error2d.destroy(),n.line2d&&n.line2d.destroy&&n.line2d.destroy(),n.select2d&&n.select2d.destroy&&n.select2d.destroy(),n.glText&&n.glText.forEach(function(r){r.destroy&&r.destroy()}),n.lineOptions=null,n.fillOptions=null,n.markerOptions=null,n.markerSelectedOptions=null,n.markerUnselectedOptions=null,n.errorXOptions=null,n.errorYOptions=null,n.textOptions=null,n.textSelectedOptions=null,n.textUnselectedOptions=null,n.selectBatch=null,n.unselectBatch=null,T._scene=null}),n.dirty||M.extendFlat(n,i),n}},18897:($,K,e)=>{"use strict";var M=e(49258),I=e(36625).styleTextSelection;$.exports=function(T,n){var i=T.cd,u=T.xaxis,a=T.yaxis,r=[],o=i[0].trace,v=i[0].t,p=o._length,f=v.x,l=v.y,y=v._scene,s=v.index;if(!y)return r;var x=M.hasText(o),h=M.hasMarkers(o),g=!h&&!x;if(!0!==o.visible||g)return r;var m=[],d=[];if(!1!==n&&!n.degenerate)for(var A=0;A<p;A++)n.contains([v.xpx[A],v.ypx[A]],!1,A,T)?(m.push(A),r.push({pointNumber:A,x:u.c2d(f[A]),y:a.c2d(l[A])})):d.push(A);if(h){var b=y.scatter2d;if(m.length||d.length){if(!y.selectBatch[s].length&&!y.unselectBatch[s].length){var S=new Array(y.count);S[s]=y.markerUnselectedOptions[s],b.update.apply(b,S)}}else{var c=new Array(y.count);c[s]=y.markerOptions[s],b.update.apply(b,c)}}return y.selectBatch[s]=m,y.unselectBatch[s]=d,x&&I(i),r}},79757:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(9430).si,t=e(50971),T=e(55405),n=e(98617),i=e(82684),u=e(567),a=e(18836).extendFlat,r=e(71859).overrideAll,o=e(98617),v=t.line,p=t.marker;$.exports=r({lon:t.lon,lat:t.lat,cluster:{enabled:{valType:"boolean",description:"Determines whether clustering is enabled or disabled."},maxzoom:a({},o.layers.maxzoom,{description:["Sets the maximum zoom level.","At zoom levels equal to or greater than this, points will never be clustered."].join(" ")}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1,description:["Sets how many points it takes to create a cluster or advance to the next cluster step.","Use this in conjunction with arrays for `size` and / or `color`.","If an integer, steps start at multiples of this number.","If an array, each step extends from the given value until one less than the next value."].join(" ")},size:{valType:"number",arrayOk:!0,dflt:20,min:0,description:["Sets the size for each cluster step."].join(" ")},color:{valType:"color",arrayOk:!0,description:["Sets the color for each cluster step."].join(" ")},opacity:a({},p.opacity,{dflt:1})},mode:a({},T.mode,{dflt:"markers",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover."].join(" ")}),text:a({},T.text,{description:["Sets text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:I({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:a({},T.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:v.color,width:v.width},connectgaps:T.connectgaps,marker:a({symbol:{valType:"string",dflt:"circle",arrayOk:!0,description:["Sets the marker symbol.","Full list: https://www.mapbox.com/maki-icons/","Note that the array `marker.color` and `marker.size`","are only available for *circle* symbols."].join(" ")},angle:{valType:"number",dflt:"auto",arrayOk:!0,description:["Sets the marker orientation from true North, in degrees clockwise.","When using the *auto* default, no rotation would be applied","in perspective views which is different from using a zero angle."].join(" ")},allowoverlap:{valType:"boolean",dflt:!1,description:["Flag to draw all symbols, even if they overlap."].join(" ")},opacity:p.opacity,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode},u("marker")),fill:t.fill,fillcolor:T.fillcolor,textfont:n.layers.symbol.textfont,textposition:n.layers.symbol.textposition,below:{valType:"string",description:["Determines if this scattermapbox trace's layers are to be inserted","before the layer with the specified ID.","By default, scattermapbox layers are inserted","above all the base layers.","To place the scattermapbox layers above every other layer, set `below` to *''*."].join(" ")},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:a({},i.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},74895:($,K,e)=>{"use strict";var M=e(7347),I=e(5228),t=e(71103).BADNUM,T=e(41368),n=e(45103),i=e(27630),u=e(47173),a=e(49258),r=e(34641),o=e(40235).appendArrayPointValue,v=e(88565).NEWLINES,p=e(88565).BR_TAG_ALL;function f(m){return{type:m,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function s(m,d){return I.isArrayOrTypedArray(m)?d?function(A){return M(m[A])?+m[A]:0}:function(A){return m[A]}:m?function(){return m}:x}function x(){return""}function h(m){return m[0]===t}function g(m,d){var A;if(I.isArrayOrTypedArray(m)&&I.isArrayOrTypedArray(d)){A=["step",["get","point_count"],m[0]];for(var b=1;b<m.length;b++)A.push(d[b-1],m[b])}else A=m;return A}$.exports=function(d,A){var H,b=A[0].trace,c=!0===b.visible&&0!==b._length,S="none"!==b.fill,w=a.hasLines(b),E=a.hasMarkers(b),P=a.hasText(b),R=E&&"circle"===b.marker.symbol,F=E&&"circle"!==b.marker.symbol,_=b.cluster&&b.cluster.enabled,z=f("fill"),D=f("line"),k=f("circle"),O=f("symbol"),U={fill:z,line:D,circle:k,symbol:O};if(!c)return U;if((S||w)&&(H=T.calcTraceToLineCoords(A)),S&&(z.geojson=T.makePolygon(H),z.layout.visibility="visible",I.extendFlat(z.paint,{"fill-color":b.fillcolor})),w&&(D.geojson=T.makeLine(H),D.layout.visibility="visible",I.extendFlat(D.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),R){var j=function l(m){var E,F,_,z,d=m[0].trace,A=d.marker,b=d.selectedpoints,c=I.isArrayOrTypedArray(A.color),S=I.isArrayOrTypedArray(A.size),w=I.isArrayOrTypedArray(A.opacity);function P(ee){return d.opacity*ee}function R(ee){return ee/2}c&&(F=n.hasColorscale(d,"marker")?n.makeColorScaleFuncFromTrace(A):I.identity),S&&(_=u(d)),w&&(z=function(ee){return P(M(ee)?+I.constrain(ee,0,1):0)});var H,D=[];for(E=0;E<m.length;E++){var k=m[E],O=k.lonlat;if(!h(O)){var U={};F&&(U.mcc=k.mcc=F(k.mc)),_&&(U.mrc=k.mrc=_(k.ms)),z&&(U.mo=z(k.mo)),b&&(U.selected=k.selected||0),D.push({type:"Feature",id:E+1,geometry:{type:"Point",coordinates:O},properties:U})}}if(b)for(H=i.makeSelectedPointStyleFns(d),E=0;E<D.length;E++){var j=D[E].properties;H.selectedOpacityFn&&(j.mo=P(H.selectedOpacityFn(j))),H.selectedColorFn&&(j.mcc=H.selectedColorFn(j)),H.selectedSizeFn&&(j.mrc=H.selectedSizeFn(j))}return{geojson:{type:"FeatureCollection",features:D},mcc:c||H&&H.selectedColorFn?{type:"identity",property:"mcc"}:A.color,mrc:S||H&&H.selectedSizeFn?{type:"identity",property:"mrc"}:R(A.size),mo:w||H&&H.selectedOpacityFn?{type:"identity",property:"mo"}:P(A.opacity)}}(A);k.geojson=j.geojson,k.layout.visibility="visible",_&&(k.filter=["!",["has","point_count"]],U.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":g(b.cluster.color,b.cluster.step),"circle-radius":g(b.cluster.size,b.cluster.step),"circle-opacity":g(b.cluster.opacity,b.cluster.step)}},U.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),I.extendFlat(k.paint,{"circle-color":j.mcc,"circle-radius":j.mrc,"circle-opacity":j.mo})}if(R&&_&&(k.filter=["!",["has","point_count"]]),(F||P)&&(O.geojson=function y(m,d){for(var A=d._fullLayout,b=m[0].trace,c=b.marker||{},S=c.symbol,w=c.angle,E="circle"!==S?s(S):x,P="auto"!==w?s(w,!0):x,R=a.hasText(b)?s(b.text):x,F=[],_=0;_<m.length;_++){var z=m[_];if(!h(z.lonlat)){var k,D=b.texttemplate;if(D){var O=Array.isArray(D)?D[_]||"":D,U=b._module.formatLabels(z,b,A),H={};o(H,b,z.i);var j=b._meta||{};k=I.texttemplateString(O,U,A._d3locale,H,z,j)}else k=R(_);k&&(k=k.replace(v,"").replace(p,"\n")),F.push({type:"Feature",geometry:{type:"Point",coordinates:z.lonlat},properties:{symbol:E(_),angle:P(_),text:k}})}}return{type:"FeatureCollection",features:F}}(A,d),I.extendFlat(O.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(I.extendFlat(O.layout,{"icon-size":b.marker.size/10}),"angle"in b.marker&&"auto"!==b.marker.angle&&I.extendFlat(O.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),O.layout["icon-allow-overlap"]=b.marker.allowoverlap,I.extendFlat(O.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),P)){var ee=(b.marker||{}).size,W=r(b.textposition,ee);I.extendFlat(O.layout,{"text-size":b.textfont.size,"text-anchor":W.anchor,"text-offset":W.offset,"text-font":b.textfont.family.split(", ")}),I.extendFlat(O.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return U}},1928:($,K,e)=>{"use strict";var M=e(5228),I=e(49258),t=e(57265),T=e(50078),n=e(42622),i=e(27950),u=e(79757),a=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];$.exports=function(v,p,f,l){function y(S,w){return M.coerce(v,p,u,S,w)}function s(S,w){return M.coerce2(v,p,u,S,w)}var x=function r(o,v,p){var f=p("lon")||[],l=p("lat")||[],y=Math.min(f.length,l.length);return v._length=y,y}(0,p,y);if(x){if(y("text"),y("texttemplate"),y("hovertext"),y("hovertemplate"),y("mode"),y("below"),I.hasMarkers(p)){t(v,p,f,l,y,{noLine:!0,noAngle:!0}),y("marker.allowoverlap"),y("marker.angle");var h=p.marker;"circle"!==h.symbol&&(M.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),M.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}I.hasLines(p)&&(T(v,p,f,l,y,{noDash:!0}),y("connectgaps"));var g=s("cluster.maxzoom"),m=s("cluster.step"),d=s("cluster.color",p.marker&&p.marker.color||f),A=s("cluster.size"),b=s("cluster.opacity");y("cluster.enabled",!1!==g||!1!==m||!1!==d||!1!==A||!1!==b),I.hasText(p)&&n(v,p,l,y,{noSelect:!0,font:{family:-1!==a.indexOf(l.font.family)?l.font.family:"Open Sans Regular",size:l.font.size,color:l.font.color}}),y("fill"),"none"!==p.fill&&i(v,p,f,y),M.coerceSelectionMarkerOpacity(p,y)}else p.visible=!1}},13202:$=>{"use strict";$.exports=function(e,M){return e.lon=M.lon,e.lat=M.lat,e}},8754:($,K,e)=>{"use strict";var M=e(91464);$.exports=function(t,T,n){var i={},a=n[T.subplot]._subplot.mockAxis,r=t.lonlat;return i.lonLabel=M.tickText(a,a.c2l(r[0]),!0).text,i.latLabel=M.tickText(a,a.c2l(r[1]),!0).text,i}},77898:($,K,e)=>{"use strict";var M=e(76863),I=e(5228),t=e(26384),T=I.fillText,n=e(71103).BADNUM,i=e(97094).traceLayerPrefix;function a(r,o,v){if(!r.hovertemplate){var f=(o.hi||r.hoverinfo).split("+"),l=-1!==f.indexOf("all"),y=-1!==f.indexOf("lon"),s=-1!==f.indexOf("lat"),x=o.lonlat,h=[];return l||y&&s?h.push("("+g(x[1])+", "+g(x[0])+")"):y?h.push(v.lon+g(x[0])):s&&h.push(v.lat+g(x[1])),(l||-1!==f.indexOf("text"))&&T(o,r,h),h.join("<br>")}function g(m){return m+"\xb0"}}$.exports={hoverPoints:function u(r,o,v){var p=r.cd,f=p[0].trace,l=r.xa,y=r.ya,s=r.subplot,x=[],h=i+f.uid+"-circle",g=f.cluster&&f.cluster.enabled;if(g){var m=s.map.queryRenderedFeatures(null,{layers:[h]});x=m.map(function(D){return D.id})}var A=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),b=o-A;if(M.getClosest(p,function c(D){var k=D.lonlat;if(k[0]===n||g&&-1===x.indexOf(D.i+1))return 1/0;var O=I.modHalf(k[0],360),U=k[1],H=s.project([O,U]),j=H.x-l.c2p([b,U]),ee=H.y-y.c2p([O,v]),W=Math.max(3,D.mrc||0);return Math.max(Math.sqrt(j*j+ee*ee)-W,1-3/W)},r),!1!==r.index){var S=p[r.index],w=S.lonlat,E=[I.modHalf(w[0],360)+A,w[1]],P=l.c2p(E),R=y.c2p(E),F=S.mrc||1;r.x0=P-F,r.x1=P+F,r.y0=R-F,r.y1=R+F;var _={};_[f.subplot]={_subplot:s};var z=f._module.formatLabels(S,f,_);return r.lonLabel=z.lonLabel,r.latLabel=z.latLabel,r.color=t(f,S),r.extraText=a(f,S,p[0].t.labels),r.hovertemplate=f.hovertemplate,[r]}},getExtraText:a}},41845:($,K,e)=>{"use strict";$.exports={attributes:e(79757),supplyDefaults:e(1928),colorbar:e(74899),formatLabels:e(8754),calc:e(4023),plot:e(17185),hoverPoints:e(77898).hoverPoints,eventData:e(13202),selectPoints:e(62770),styleOnSelect:function(M,I){I&&I[0].trace._glTrace.update(I)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(8382),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_mapbox",description:["The data visualized as scatter point, lines or marker symbols","on a Mapbox GL geographic map","is provided by longitude/latitude pairs in `lon` and `lat`."].join(" ")}}},17185:($,K,e)=>{"use strict";var M=e(5228),I=e(74895),t=e(97094).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function n(u,a,r,o){this.type="scattermapbox",this.subplot=u,this.uid=a,this.clusterEnabled=r,this.isHidden=o,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol",cluster:"source-"+a+"-circle",clusterCount:"source-"+a+"-circle"},this.layerIds={fill:t+a+"-fill",line:t+a+"-line",circle:t+a+"-circle",symbol:t+a+"-symbol",cluster:t+a+"-cluster",clusterCount:t+a+"-cluster-count"},this.below=null}var i=n.prototype;i.addSource=function(u,a,r){var o={type:"geojson",data:a.geojson};r&&r.enabled&&M.extendFlat(o,{cluster:!0,clusterMaxZoom:r.maxzoom});var v=this.subplot.map.getSource(this.sourceIds[u]);v?v.setData(a.geojson):this.subplot.map.addSource(this.sourceIds[u],o)},i.setSourceData=function(u,a){this.subplot.map.getSource(this.sourceIds[u]).setData(a.geojson)},i.addLayer=function(u,a,r){var o={type:a.type,id:this.layerIds[u],source:this.sourceIds[u],layout:a.layout,paint:a.paint};a.filter&&(o.filter=a.filter);for(var p,v=this.layerIds[u],f=this.subplot.getMapLayers(),l=0;l<f.length;l++)if(f[l].id===v){p=!0;break}p?(this.subplot.setOptions(v,"setLayoutProperty",o.layout),"visible"===o.layout.visibility&&this.subplot.setOptions(v,"setPaintProperty",o.paint)):this.subplot.addLayer(o,r)},i.update=function(a){var r=a[0].trace,o=this.subplot,v=o.map,p=I(o.gd,a),f=o.belowLookup["trace-"+this.uid],l=!(!r.cluster||!r.cluster.enabled),y=!!this.clusterEnabled,s=this;function d(w){y?function h(w){for(var E=T.cluster,P=E.length-1;P>=0;P--){var R=E[P];v.removeLayer(s.layerIds[R])}w||v.removeSource(s.sourceIds.circle)}(w):function m(w){for(var E=T.nonCluster,P=E.length-1;P>=0;P--){var R=E[P];v.removeLayer(s.layerIds[R]),w||v.removeSource(s.sourceIds[R])}}(w)}function A(w){l?function x(w){w||s.addSource("circle",p.circle,r.cluster);for(var E=T.cluster,P=0;P<E.length;P++){var R=E[P],F=p[R];s.addLayer(R,F,f)}}(w):function g(w){for(var E=T.nonCluster,P=0;P<E.length;P++){var R=E[P],F=p[R];w||s.addSource(R,F),s.addLayer(R,F,f)}}(w)}var c=this.isHidden,S=!0!==r.visible;S?c||d():c?S||A():y!==l?(d(),A()):(this.below!==f&&(d(!0),A(!0)),function b(){for(var w=l?T.cluster:T.nonCluster,E=0;E<w.length;E++){var P=w[E],R=p[P];R&&(o.setOptions(s.layerIds[P],"setLayoutProperty",R.layout),"visible"===R.layout.visibility&&("cluster"!==P&&s.setSourceData(P,R),o.setOptions(s.layerIds[P],"setPaintProperty",R.paint)))}}()),this.clusterEnabled=l,this.isHidden=S,this.below=f,a[0].trace._glTrace=this},i.dispose=function(){for(var a=this.subplot.map,r=this.clusterEnabled?T.cluster:T.nonCluster,o=r.length-1;o>=0;o--){var v=r[o];a.removeLayer(this.layerIds[v]),a.removeSource(this.sourceIds[v])}},$.exports=function(a,r){var s,x,h,o=r[0].trace,v=o.cluster&&o.cluster.enabled,p=!0!==o.visible,f=new n(a,o.uid,v,p),l=I(a.gd,r),y=f.below=a.belowLookup["trace-"+o.uid];if(v)for(f.addSource("circle",l.circle,o.cluster),s=0;s<T.cluster.length;s++)h=l[x=T.cluster[s]],f.addLayer(x,h,y);else for(s=0;s<T.nonCluster.length;s++)h=l[x=T.nonCluster[s]],f.addSource(x,h,o.cluster),f.addLayer(x,h,y);return r[0].trace._glTrace=f,f}},62770:($,K,e)=>{"use strict";var M=e(5228),I=e(49258),t=e(71103).BADNUM;$.exports=function(n,i){var p,u=n.cd,a=n.xaxis,r=n.yaxis,o=[],v=u[0].trace;if(!I.hasMarkers(v))return[];if(!1===i)for(p=0;p<u.length;p++)u[p].selected=0;else for(p=0;p<u.length;p++){var f=u[p],l=f.lonlat;if(l[0]!==t){var y=[M.modHalf(l[0],360),l[1]],s=[a.c2p(y),r.c2p(y)];i.contains(s,null,p,n)?(o.push({pointNumber:p,lon:l[0],lat:l[1]}),f.selected=1):f.selected=0}}return o}},75728:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(9430).si,t=e(18836).extendFlat,T=e(55405),n=e(82684),i=T.line;$.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the radial coordinates"},theta:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the angular coordinates"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `r`.","Builds a linear space of r coordinates.","Use with `dr`","where `r0` is the starting coordinate and `dr` the step."].join(" ")},dr:{valType:"number",dflt:1,editType:"calc",description:"Sets the r coordinate step."},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `theta`.","Builds a linear space of theta coordinates.","Use with `dtheta`","where `theta0` is the starting coordinate and `dtheta` the step."].join(" ")},dtheta:{valType:"number",editType:"calc",description:["Sets the theta coordinate step.","By default, the `dtheta` step equals the subplot's period divided","by the length of the `r` coordinates."].join(" ")},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes",description:["Sets the unit of input *theta* values.","Has an effect only when on *linear* angular axes."].join(" ")},text:T.text,texttemplate:I({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:t({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:t({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterpolar has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:T.fillcolor,hoverinfo:t({},n.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},5058:($,K,e)=>{"use strict";var M=e(7347),I=e(71103).BADNUM,t=e(91464),T=e(50930),n=e(79179),i=e(20107),u=e(9451).calcMarkerSize;$.exports=function(r,o){for(var v=r._fullLayout,p=o.subplot,f=v[p].radialaxis,l=v[p].angularaxis,y=f.makeCalcdata(o,"r"),s=l.makeCalcdata(o,"theta"),x=o._length,h=new Array(x),g=0;g<x;g++){var m=y[g],d=s[g],A=h[g]={};M(m)&&M(d)?(A.r=m,A.theta=d):A.r=I}var b=u(o,x);return o._extremes.x=t.findExtremes(f,y,{ppad:b}),T(r,o),n(h,o),i(h,o),h}},81424:($,K,e)=>{"use strict";var M=e(5228),I=e(49258),t=e(57265),T=e(50078),n=e(35558),i=e(42622),u=e(27950),a=e(47715).PTS_LINESONLY,r=e(75728);function v(p,f,l,y){var h,s=y("r"),x=y("theta");if(M.isTypedArray(s)&&(f.r=s=Array.from(s)),M.isTypedArray(x)&&(f.theta=x=Array.from(x)),s)x?h=Math.min(s.length,x.length):(h=s.length,y("theta0"),y("dtheta"));else{if(!x)return 0;h=f.theta.length,y("r0"),y("dr")}return f._length=h,h}$.exports={handleRThetaDefaults:v,supplyDefaults:function o(p,f,l,y){function s(g,m){return M.coerce(p,f,r,g,m)}var x=v(p,f,y,s);if(x){s("thetaunit"),s("mode",x<a?"lines+markers":"lines"),s("text"),s("hovertext"),"fills"!==f.hoveron&&s("hovertemplate"),I.hasMarkers(f)&&t(p,f,l,y,s,{gradient:!0}),I.hasLines(f)&&(T(p,f,l,y,s,{backoff:!0}),n(p,f,s),s("connectgaps")),I.hasText(f)&&(s("texttemplate"),i(p,f,y,s));var h=[];(I.hasMarkers(f)||I.hasText(f))&&(s("cliponaxis"),s("marker.maxdisplayed"),h.push("points")),s("fill"),"none"!==f.fill&&(u(p,f,l,s),I.hasLines(f)||n(p,f,s)),("tonext"===f.fill||"toself"===f.fill)&&h.push("fills"),s("hoveron",h.join("+")||"points"),M.coerceSelectionMarkerOpacity(f,s)}else f.visible=!1}}},75818:($,K,e)=>{"use strict";var M=e(5228),I=e(91464);$.exports=function(T,n,i){var r,o,u={},a=i[n.subplot]._subplot;a?(r=a.radialAxis,o=a.angularAxis):(r=(a=i[n.subplot]).radialaxis,o=a.angularaxis);var v=r.c2l(T.r);u.rLabel=I.tickText(r,v,!0).text;var p="degrees"===o.thetaunit?M.rad2deg(T.theta):T.theta;return u.thetaLabel=I.tickText(o,p,!0).text,u}},87329:($,K,e)=>{"use strict";var M=e(27016);function t(T,n,i,u){var a=i.radialAxis,r=i.angularAxis;a._hovertitle="r",r._hovertitle="\u03b8";var o={};o[n.subplot]={_subplot:i};var v=n._module.formatLabels(T,n,o);u.rLabel=v.rLabel,u.thetaLabel=v.thetaLabel;var p=T.hi||n.hoverinfo,f=[];function l(s,x){f.push(s._hovertitle+": "+x)}if(!n.hovertemplate){var y=p.split("+");-1!==y.indexOf("all")&&(y=["r","theta","text"]),-1!==y.indexOf("r")&&l(a,u.rLabel),-1!==y.indexOf("theta")&&l(r,u.thetaLabel),-1!==y.indexOf("text")&&u.text&&(f.push(u.text),delete u.text),u.extraText=f.join("<br>")}}$.exports={hoverPoints:function I(T,n,i,u){var a=M(T,n,i,u);if(a&&!1!==a[0].index){var r=a[0];if(void 0===r.index)return a;var o=T.subplot,v=r.cd[r.index],p=r.trace;if(o.isPtInside(v))return r.xLabelVal=void 0,r.yLabelVal=void 0,t(v,p,o,r),r.hovertemplate=p.hovertemplate,a}},makeHoverPointText:t}},5478:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(80147),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(75728),supplyDefaults:e(81424).supplyDefaults,colorbar:e(74899),formatLabels:e(75818),calc:e(5058),plot:e(60877),style:e(54675).style,styleOnSelect:e(54675).styleOnSelect,hoverPoints:e(87329).hoverPoints,selectPoints:e(177),meta:{hrName:"scatter_polar",description:["The scatterpolar trace type encompasses line charts, scatter charts, text charts, and bubble charts","in polar coordinates.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},60877:($,K,e)=>{"use strict";var M=e(73507),I=e(71103).BADNUM;$.exports=function(T,n,i){for(var u=n.layers.frontplot.select("g.scatterlayer"),a=n.xaxis,r=n.yaxis,o={xaxis:a,yaxis:r,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},v=n.radialAxis,p=n.angularAxis,f=0;f<i.length;f++)for(var l=i[f],y=0;y<l.length;y++){0===y&&(l[0].trace._xA=a,l[0].trace._yA=r);var s=l[y],x=s.r;if(x===I)s.x=s.y=I;else{var h=v.c2g(x),g=p.c2g(s.theta);s.x=h*Math.cos(g),s.y=h*Math.sin(g)}}M(T,o,i,u)}},60425:($,K,e)=>{"use strict";var M=e(75728),I=e(15917),t=e(9430).si;$.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:t({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:I.line.color,width:I.line.width,dash:I.line.dash,editType:"calc"},connectgaps:I.connectgaps,marker:I.marker,fill:I.fill,fillcolor:I.fillcolor,textposition:I.textposition,textfont:I.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},7782:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(80147),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(60425),supplyDefaults:e(23149),colorbar:e(74899),formatLabels:e(93887),calc:e(71758),hoverPoints:e(82316).hoverPoints,selectPoints:e(18897),meta:{hrName:"scatter_polar_gl",description:["The scatterpolargl trace type encompasses line charts, scatter charts, and bubble charts","in polar coordinates using the WebGL plotting engine.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},71758:($,K,e)=>{"use strict";var M=e(50930),I=e(9451).calcMarkerSize,t=e(54414),T=e(91464),n=e(6906).TOO_MANY_POINTS;$.exports=function(u,a){var r=u._fullLayout,o=a.subplot,v=r[o].radialaxis,p=r[o].angularaxis,f=a._r=v.makeCalcdata(a,"r"),l=a._theta=p.makeCalcdata(a,"theta"),y=a._length,s={};y<f.length&&(f=f.slice(0,y)),y<l.length&&(l=l.slice(0,y)),s.r=f,s.theta=l,M(u,a);var h,x=s.opts=t.style(u,a);return y<n?h=I(a,y):x.marker&&(h=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),a._extremes.x=T.findExtremes(v,f,{ppad:h}),[{x:!1,y:!1,t:s,trace:a}]}},23149:($,K,e)=>{"use strict";var M=e(5228),I=e(49258),t=e(81424).handleRThetaDefaults,T=e(57265),n=e(50078),i=e(42622),u=e(27950),a=e(47715).PTS_LINESONLY,r=e(60425);$.exports=function(v,p,f,l){function y(x,h){return M.coerce(v,p,r,x,h)}var s=t(v,p,l,y);s?(y("thetaunit"),y("mode",s<a?"lines+markers":"lines"),y("text"),y("hovertext"),"fills"!==p.hoveron&&y("hovertemplate"),I.hasMarkers(p)&&T(v,p,f,l,y,{noAngleRef:!0,noStandOff:!0}),I.hasLines(p)&&(n(v,p,f,l,y),y("connectgaps")),I.hasText(p)&&(y("texttemplate"),i(v,p,l,y)),y("fill"),"none"!==p.fill&&u(v,p,f,y),M.coerceSelectionMarkerOpacity(p,y)):p.visible=!1}},93887:($,K,e)=>{"use strict";var M=e(75818);$.exports=function(t,T,n){var i=t.i;return"r"in t||(t.r=T._r[i]),"theta"in t||(t.theta=T._theta[i]),M(t,T,n)}},82316:($,K,e)=>{"use strict";var M=e(77466),I=e(87329).makeHoverPointText;$.exports={hoverPoints:function t(T,n,i,u){var r=T.cd[0].t,o=r.r,v=r.theta,p=M.hoverPoints(T,n,i,u);if(p&&!1!==p[0].index){var f=p[0];if(void 0===f.index)return p;var l=T.subplot,y=f.cd[f.index],s=f.trace;if(y.r=o[f.index],y.theta=v[f.index],l.isPtInside(y))return f.xLabelVal=void 0,f.yLabelVal=void 0,I(y,s,l,f),p}}}},71933:($,K,e)=>{"use strict";var M=e(7782);M.plot=e(73674),$.exports=M},73674:($,K,e)=>{"use strict";var M=e(52092),I=e(7347),t=e(4043),T=e(97645),n=e(54414),i=e(5228),u=e(6906).TOO_MANY_POINTS;$.exports=function(o,v,p){if(p.length){var f=v.radialAxis,l=v.angularAxis,y=T(o,v);return p.forEach(function(s){if(s&&s[0]&&s[0].trace){var c,x=s[0],h=x.trace,g=x.t,m=h._length,d=g.r,A=g.theta,b=g.opts,S=d.slice(),w=A.slice();for(c=0;c<d.length;c++)v.isPtInside({r:d[c],theta:A[c]})||(S[c]=NaN,w[c]=NaN);var E=new Array(2*m),P=Array(m),R=Array(m);for(c=0;c<m;c++){var _,z,F=S[c];if(I(F)){var D=f.c2g(F),k=l.c2g(w[c],h.thetaunit);_=D*Math.cos(k),z=D*Math.sin(k)}else _=z=NaN;P[c]=E[2*c]=_,R[c]=E[2*c+1]=z}g.tree=M(E),b.marker&&m>=u&&(b.marker.cluster=g.tree),b.marker&&(b.markerSel.positions=b.markerUnsel.positions=b.marker.positions=E),b.line&&E.length>1&&i.extendFlat(b.line,n.linePositions(o,h,E)),b.text&&(i.extendFlat(b.text,{positions:E},n.textPosition(o,h,b.text,b.marker)),i.extendFlat(b.textSel,{positions:E},n.textPosition(o,h,b.text,b.markerSel)),i.extendFlat(b.textUnsel,{positions:E},n.textPosition(o,h,b.text,b.markerUnsel))),b.fill&&!y.fill2d&&(y.fill2d=!0),b.marker&&!y.scatter2d&&(y.scatter2d=!0),b.line&&!y.line2d&&(y.line2d=!0),b.text&&!y.glText&&(y.glText=!0),y.lineOptions.push(b.line),y.fillOptions.push(b.fill),y.markerOptions.push(b.marker),y.markerSelectedOptions.push(b.markerSel),y.markerUnselectedOptions.push(b.markerUnsel),y.textOptions.push(b.text),y.textSelectedOptions.push(b.textSel),y.textUnselectedOptions.push(b.textUnsel),y.selectBatch.push([]),y.unselectBatch.push([]),g.x=P,g.y=R,g.rawx=P,g.rawy=R,g.r=d,g.theta=A,g.positions=E,g._scene=y,g.index=y.count,y.count++}}),t(o,v,p)}},$.exports.reglPrecompiled={}},8179:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(9430).si,t=e(18836).extendFlat,T=e(55405),n=e(82684),i=T.line;$.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the real component of the data, in units of normalized impedance","such that real=1, imag=0 is the center of the chart."].join(" ")},imag:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the imaginary component of the data, in units of normalized impedance","such that real=1, imag=0 is the center of the chart."].join(" ")},text:T.text,texttemplate:I({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:t({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:t({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scattersmith has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:T.fillcolor,hoverinfo:t({},n.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},98869:($,K,e)=>{"use strict";var M=e(7347),I=e(71103).BADNUM,t=e(50930),T=e(79179),n=e(20107),i=e(9451).calcMarkerSize;$.exports=function(a,r){for(var o=a._fullLayout,v=r.subplot,p=o[v].realaxis,f=o[v].imaginaryaxis,l=p.makeCalcdata(r,"real"),y=f.makeCalcdata(r,"imag"),s=r._length,x=new Array(s),h=0;h<s;h++){var g=l[h],m=y[h],d=x[h]={};M(g)&&M(m)?(d.real=g,d.imag=m):d.real=I}return i(r,s),t(a,r),T(x,r),n(x,r),x}},10057:($,K,e)=>{"use strict";var M=e(5228),I=e(49258),t=e(57265),T=e(50078),n=e(35558),i=e(42622),u=e(27950),a=e(47715).PTS_LINESONLY,r=e(8179);$.exports=function(p,f,l,y){function s(g,m){return M.coerce(p,f,r,g,m)}var x=function o(v,p,f,l){var x,y=l("real"),s=l("imag");return y&&s&&(x=Math.min(y.length,s.length)),M.isTypedArray(y)&&(p.real=y=Array.from(y)),M.isTypedArray(s)&&(p.imag=s=Array.from(s)),p._length=x,x}(0,f,0,s);if(x){s("mode",x<a?"lines+markers":"lines"),s("text"),s("hovertext"),"fills"!==f.hoveron&&s("hovertemplate"),I.hasMarkers(f)&&t(p,f,l,y,s,{gradient:!0}),I.hasLines(f)&&(T(p,f,l,y,s,{backoff:!0}),n(p,f,s),s("connectgaps")),I.hasText(f)&&(s("texttemplate"),i(p,f,y,s));var h=[];(I.hasMarkers(f)||I.hasText(f))&&(s("cliponaxis"),s("marker.maxdisplayed"),h.push("points")),s("fill"),"none"!==f.fill&&(u(p,f,l,s),I.hasLines(f)||n(p,f,s)),("tonext"===f.fill||"toself"===f.fill)&&h.push("fills"),s("hoveron",h.join("+")||"points"),M.coerceSelectionMarkerOpacity(f,s)}else f.visible=!1}},19141:($,K,e)=>{"use strict";var M=e(91464);$.exports=function(t,T,n){var i={},u=n[T.subplot]._subplot;return i.realLabel=M.tickText(u.radialAxis,t.real,!0).text,i.imagLabel=M.tickText(u.angularAxis,t.imag,!0).text,i}},80677:($,K,e)=>{"use strict";var M=e(27016);function t(T,n,i,u){var a=i.radialAxis,r=i.angularAxis;a._hovertitle="real",r._hovertitle="imag";var o={};o[n.subplot]={_subplot:i};var v=n._module.formatLabels(T,n,o);u.realLabel=v.realLabel,u.imagLabel=v.imagLabel;var p=T.hi||n.hoverinfo,f=[];function l(s,x){f.push(s._hovertitle+": "+x)}if(!n.hovertemplate){var y=p.split("+");-1!==y.indexOf("all")&&(y=["real","imag","text"]),-1!==y.indexOf("real")&&l(a,u.realLabel),-1!==y.indexOf("imag")&&l(r,u.imagLabel),-1!==y.indexOf("text")&&u.text&&(f.push(u.text),delete u.text),u.extraText=f.join("<br>")}}$.exports={hoverPoints:function I(T,n,i,u){var a=M(T,n,i,u);if(a&&!1!==a[0].index){var r=a[0];if(void 0===r.index)return a;var o=T.subplot,v=r.cd[r.index],p=r.trace;if(o.isPtInside(v))return r.xLabelVal=void 0,r.yLabelVal=void 0,t(v,p,o,r),r.hovertemplate=p.hovertemplate,a}},makeHoverPointText:t}},40770:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(49197),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(8179),supplyDefaults:e(10057),colorbar:e(74899),formatLabels:e(19141),calc:e(98869),plot:e(26928),style:e(54675).style,styleOnSelect:e(54675).styleOnSelect,hoverPoints:e(80677).hoverPoints,selectPoints:e(177),meta:{hrName:"scatter_smith",description:["The scattersmith trace type encompasses line charts, scatter charts, text charts, and bubble charts","in smith coordinates.","The data visualized as scatter point or lines is set in","`real` and `imag` (imaginary) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},26928:($,K,e)=>{"use strict";var M=e(73507),I=e(71103).BADNUM,T=e(13988).smith;$.exports=function(i,u,a){for(var r=u.layers.frontplot.select("g.scatterlayer"),o=u.xaxis,v=u.yaxis,p={xaxis:o,yaxis:v,plot:u.framework,layerClipId:u._hasClipOnAxisFalse?u.clipIds.forTraces:null},f=0;f<a.length;f++)for(var l=a[f],y=0;y<l.length;y++){0===y&&(l[0].trace._xA=o,l[0].trace._yA=v);var s=l[y],x=s.real;if(x===I)s.x=s.y=I;else{var h=T([x,s.imag]);s.x=h[0],s.y=h[1]}}M(i,p,a,r)}},53850:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(9430).si,t=e(55405),T=e(82684),n=e(567),i=e(65822).P,u=e(18836).extendFlat,a=t.marker,r=t.line,o=a.line;$.exports={a:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},b:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},c:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},sum:{valType:"number",dflt:0,min:0,editType:"calc",description:["The number each triplet should sum to,","if only two of `a`, `b`, and `c` are provided.","This overrides `ternary<i>.sum` to normalize this specific","trace, but does not affect the values displayed on the axes.","0 (or missing) means to use ternary<i>.sum"].join(" ")},mode:u({},t.mode,{dflt:"markers"}),text:u({},t.text,{description:["Sets text elements associated with each (a,b,c) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b,c).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:I({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:u({},t.hovertext,{description:["Sets hover text elements associated with each (a,b,c) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b,c).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:r.color,width:r.width,dash:i,backoff:r.backoff,shape:u({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:t.connectgaps,cliponaxis:t.cliponaxis,fill:u({},t.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:t.fillcolor,marker:u({symbol:a.symbol,opacity:a.opacity,angle:a.angle,angleref:a.angleref,standoff:a.standoff,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:u({width:o.width,editType:"calc"},n("marker.line")),gradient:a.gradient,editType:"calc"},n("marker")),textfont:t.textfont,textposition:t.textposition,selected:t.selected,unselected:t.unselected,hoverinfo:u({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:t.hoveron,hovertemplate:M()}},16577:($,K,e)=>{"use strict";var M=e(7347),I=e(50930),t=e(79179),T=e(20107),n=e(9451).calcMarkerSize,i=["a","b","c"],u={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(r,o){var y,s,x,h,g,m,p=r._fullLayout[o.subplot].sum,f=o.sum||p,l={a:o.a,b:o.b,c:o.c};for(y=0;y<i.length;y++)if(!l[x=i[y]]){for(g=l[u[x][0]],m=l[u[x][1]],h=new Array(g.length),s=0;s<g.length;s++)h[s]=f-g[s]-m[s];l[x]=h}var b,c,S,w,E,P,d=o._length,A=new Array(d);for(y=0;y<d;y++)b=l.a[y],c=l.b[y],S=l.c[y],M(b)&&M(c)&&M(S)?(1!==(w=p/((b=+b)+(c=+c)+(S=+S)))&&(b*=w,c*=w,S*=w),P=b,E=S-c,A[y]={x:E,y:P,a:b,b:c,c:S}):A[y]={x:!1,y:!1};return n(o,d),I(r,o),t(A,o),T(A,o),A}},47247:($,K,e)=>{"use strict";var M=e(5228),I=e(47715),t=e(49258),T=e(57265),n=e(50078),i=e(35558),u=e(42622),a=e(27950),r=e(53850);$.exports=function(v,p,f,l){function y(A,b){return M.coerce(v,p,r,A,b)}var g,s=y("a"),x=y("b"),h=y("c");if(s?(g=s.length,x?(g=Math.min(g,x.length),h&&(g=Math.min(g,h.length))):g=h?Math.min(g,h.length):0):x&&h&&(g=Math.min(x.length,h.length)),g){p._length=g,y("sum"),y("text"),y("hovertext"),"fills"!==p.hoveron&&y("hovertemplate"),y("mode",g<I.PTS_LINESONLY?"lines+markers":"lines"),t.hasMarkers(p)&&T(v,p,f,l,y,{gradient:!0}),t.hasLines(p)&&(n(v,p,f,l,y,{backoff:!0}),i(v,p,y),y("connectgaps")),t.hasText(p)&&(y("texttemplate"),u(v,p,l,y));var d=[];(t.hasMarkers(p)||t.hasText(p))&&(y("cliponaxis"),y("marker.maxdisplayed"),d.push("points")),y("fill"),"none"!==p.fill&&(a(v,p,f,y),t.hasLines(p)||i(v,p,y)),("tonext"===p.fill||"toself"===p.fill)&&d.push("fills"),y("hoveron",d.join("+")||"points"),M.coerceSelectionMarkerOpacity(p,y)}else p.visible=!1}},15179:$=>{"use strict";$.exports=function(e,M,I,t,T){if(M.xa&&(e.xaxis=M.xa),M.ya&&(e.yaxis=M.ya),t[T]){var n=t[T];e.a=n.a,e.b=n.b,e.c=n.c}else e.a=M.a,e.b=M.b,e.c=M.c;return e}},86919:($,K,e)=>{"use strict";var M=e(91464);$.exports=function(t,T,n){var i={},u=n[T.subplot]._subplot;return i.aLabel=M.tickText(u.aaxis,t.a,!0).text,i.bLabel=M.tickText(u.baxis,t.b,!0).text,i.cLabel=M.tickText(u.caxis,t.c,!0).text,i}},76030:($,K,e)=>{"use strict";var M=e(27016);$.exports=function(t,T,n,i){var u=M(t,T,n,i);if(u&&!1!==u[0].index){var a=u[0];if(void 0===a.index){var r=1-a.y0/t.ya._length,o=t.xa._length,v=o*r/2,p=o-v;return a.x0=Math.max(Math.min(a.x0,p),v),a.x1=Math.max(Math.min(a.x1,p),v),u}var f=a.cd[a.index],l=a.trace,y=a.subplot;a.a=f.a,a.b=f.b,a.c=f.c,a.xLabelVal=void 0,a.yLabelVal=void 0;var s={};s[l.subplot]={_subplot:y};var x=l._module.formatLabels(f,l,s);a.aLabel=x.aLabel,a.bLabel=x.bLabel,a.cLabel=x.cLabel;var h=f.hi||l.hoverinfo,g=[];if(!l.hovertemplate){var d=h.split("+");-1!==d.indexOf("all")&&(d=["a","b","c"]),-1!==d.indexOf("a")&&m(y.aaxis,a.aLabel),-1!==d.indexOf("b")&&m(y.baxis,a.bLabel),-1!==d.indexOf("c")&&m(y.caxis,a.cLabel)}return a.extraText=g.join("<br>"),a.hovertemplate=l.hovertemplate,u}function m(A,b){g.push(A._hovertitle+": "+b)}}},16116:($,K,e)=>{"use strict";$.exports={attributes:e(53850),supplyDefaults:e(47247),colorbar:e(74899),formatLabels:e(86919),calc:e(16577),plot:e(18166),style:e(54675).style,styleOnSelect:e(54675).styleOnSelect,hoverPoints:e(76030),selectPoints:e(177),eventData:e(15179),moduleType:"trace",name:"scatterternary",basePlotModule:e(35421),categories:["ternary","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_ternary",description:["Provides similar functionality to the *scatter* type but on a ternary phase diagram.","The data is provided by at least two arrays out of `a`, `b`, `c` triplets."].join(" ")}}},18166:($,K,e)=>{"use strict";var M=e(73507);$.exports=function(t,T,n){var i=T.plotContainer;i.select(".scatterlayer").selectAll("*").remove();for(var u=T.xaxis,a=T.yaxis,r={xaxis:u,yaxis:a,plot:i,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},o=T.layers.frontplot.select("g.scatterlayer"),v=0;v<n.length;v++){var p=n[v];p.length&&(p[0].trace._xA=u,p[0].trace._yA=a)}M(t,r,n,o)}},15238:($,K,e)=>{"use strict";var M=e(55405),I=e(567),t=e(88489).axisHoverFormat,T=e(9430).fF,n=e(15917),i=e(4669).idRegex,u=e(96906).templatedArray,a=e(18836).extendFlat,r=M.marker,o=r.line,v=a(I("marker.line",{editTypeOverride:"calc"}),{width:a({},o.width,{editType:"calc"}),editType:"calc"}),p=a(I("marker"),{symbol:r.symbol,angle:r.angle,size:a({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:v,editType:"calc"});function f(l){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:i[l],editType:"plot"},description:["Sets the list of "+l+" axes","corresponding to dimensions of this splom trace.","By default, a splom will match the first N "+l+"axes","where N is the number of input dimensions.","Note that, in case where `diagonal.visible` is false and `showupperhalf`","or `showlowerhalf` is false, this splom trace will generate","one less x-axis and one less y-axis."].join(" ")}}p.color.editType=p.cmin.editType=p.cmax.editType="style",$.exports={dimensions:u("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not this dimension is shown on the graph.","Note that even visible false dimension contribute to the","default grid generate by this splom trace."].join(" ")},label:{valType:"string",editType:"calc",description:"Sets the label corresponding to this splom dimension."},values:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the dimension values to be plotted."},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes",description:["Sets the axis type for this dimension's generated","x and y axes.","Note that the axis `type` values set in layout take","precedence over this attribute."].join(" ")},matches:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not the x & y axes generated by this","dimension match.","Equivalent to setting the `matches` axis attribute in the layout","with the correct axis id."].join(" ")},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},n.text,{description:["Sets text elements associated with each (x,y) pair to appear on hover.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates."].join(" ")}),hovertext:a({},n.hovertext,{description:"Same as `text`."}),hovertemplate:T(),xhoverformat:t("x"),yhoverformat:t("y"),marker:p,xaxes:f("x"),yaxes:f("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the diagonal are displayed."].join(" ")},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the upper half","from the diagonal are displayed."].join(" ")},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the lower half","from the diagonal are displayed."].join(" ")},selected:{marker:n.selected.marker,editType:"calc"},unselected:{marker:n.unselected.marker,editType:"calc"},opacity:n.opacity}},11542:($,K,e)=>{"use strict";var M=e(97799),I=e(99399);$.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(15238),supplyDefaults:e(35253),colorbar:e(74899),calc:e(91754),plot:e(61726),hoverPoints:e(35047).hoverPoints,selectPoints:e(7319),editStyle:e(68377),meta:{description:["Splom traces generate scatter plot matrix visualizations.","Each splom `dimensions` items correspond to a generated axis.","Values for each of those dimensions are set in `dimensions[i].values`.","Splom traces support all `scattergl` marker style attributes.","Specify `layout.grid` attributes and/or layout x-axis and y-axis attributes","for more control over the axis positioning and style. "].join(" ")}},M.register(I)},55812:($,K,e)=>{"use strict";var M=e(36224),I=e(97799),t=e(90676),T=e(65644).a0,n=e(24329),i=e(78168).getFromId,u=e(91464).shouldShowZeroLine,a="splom",r={};function p(s,x,h){for(var g=h.matrixOptions.data.length,m=x._visibleDims,d=h.viewOpts.ranges=new Array(g),A=0;A<m.length;A++){var b=m[A],c=d[A]=new Array(4),S=i(s,x._diag[b][0]);S&&(c[0]=S.r2l(S.range[0]),c[2]=S.r2l(S.range[1]));var w=i(s,x._diag[b][1]);w&&(c[1]=w.r2l(w.range[0]),c[3]=w.r2l(w.range[1]))}h.selectBatch.length||h.unselectBatch.length?h.matrix.update({ranges:d},{ranges:d}):h.matrix.update({ranges:d})}function f(s){var x=s._fullLayout,h=x._glcanvas.data()[0].regl,g=x._splomGrid;g||(g=x._splomGrid=M(h)),g.update(function l(s){var A,x=s._context.plotGlPixelRatio,h=s._fullLayout,g=h._size,m=[0,0,h.width*x,h.height*x],d={};function b(j,ee,W,B,te,q){W*=x,B*=x,te*=x,q*=x;var oe=ee[j+"color"],ie=ee[j+"width"],V=String(oe+ie);V in d?d[V].data.push(NaN,NaN,W,B,te,q):d[V]={data:[W,B,te,q],join:"rect",thickness:ie*x,color:oe,viewport:m,range:m,overlay:!1}}for(A in h._splomSubplots){var O,U,c=h._plots[A],S=c.xaxis,w=c.yaxis,E=S._gridVals,P=w._gridVals,R=S._offset,F=S._length,_=w._length,z=g.b+w.domain[0]*g.h,D=-w._m,k=-D*w.r2l(w.range[0],w.calendar);if(S.showgrid)for(A=0;A<E.length;A++)O=R+S.l2p(E[A].x),b("grid",S,O,z,O,z+_);if(w.showgrid)for(A=0;A<P.length;A++)b("grid",w,R,U=z+k+D*P[A].x,R+F,U);u(s,S,w)&&(O=R+S.l2p(0),b("zeroline",S,O,z,O,z+_)),u(s,w,S)&&b("zeroline",w,R,U=z+k+0,R+F,U)}var H=[];for(A in d)H.push(d[A]);return H}(s))}$.exports={name:a,attr:n.attr,attrRegex:n.attrRegex,layoutAttributes:n.layoutAttributes,supplyLayoutDefaults:n.supplyLayoutDefaults,drawFramework:n.drawFramework,plot:function o(s){var x=s._fullLayout,h=I.getModule(a),g=T(s.calcdata,h)[0];t(s,["ANGLE_instanced_arrays","OES_element_index_uint"],r)&&(x._hasOnlyLargeSploms&&f(s),h.plot(s,{},g))},drag:function v(s){var x=s.calcdata,h=s._fullLayout;h._hasOnlyLargeSploms&&f(s);for(var g=0;g<x.length;g++){var d=x[g][0].trace,A=h._splomScenes[d.uid];"splom"===d.type&&A&&A.matrix&&p(s,d,A)}},updateGrid:f,clean:function y(s,x,h,g){var d,m={};if(g._splomScenes){for(d=0;d<s.length;d++){var A=s[d];"splom"===A.type&&(m[A.uid]=1)}for(d=0;d<h.length;d++){var b=h[d];if(!m[b.uid]){var c=g._splomScenes[b.uid];c&&c.destroy&&c.destroy(),g._splomScenes[b.uid]=null,delete g._splomScenes[b.uid]}}}0===Object.keys(g._splomScenes||{}).length&&delete g._splomScenes,g._splomGrid&&!x._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid),n.clean(s,x,h,g)},updateFx:n.updateFx,toSVG:n.toSVG,reglPrecompiled:r}},91754:($,K,e)=>{"use strict";var M=e(5228),I=e(78168),t=e(9451).calcMarkerSize,T=e(9451).calcAxisExpansion,n=e(50930),i=e(54414).markerSelection,u=e(54414).markerStyle,a=e(56907),r=e(71103).BADNUM,o=e(6906).TOO_MANY_POINTS;$.exports=function(p,f){var m,d,A,b,c,P,l=f.dimensions,y=f._length,s={},x=s.cdata=[],h=s.data=[],g=f._visibleDims=[];function S(F,_){for(var z=F.makeCalcdata({v:_.values,vcalendar:f.calendar},"v"),D=0;D<z.length;D++)z[D]=z[D]===r?NaN:z[D];x.push(z),h.push("log"===F.type?M.simpleMap(z,F.c2l):z)}for(m=0;m<l.length;m++)if((A=l[m]).visible){if(b=I.getFromId(p,f._diag[m][0]),c=I.getFromId(p,f._diag[m][1]),b&&c&&b.type!==c.type){M.log("Skipping splom dimension "+m+" with conflicting axis types");continue}b?(S(b,A),c&&"category"===c.type&&(c._categories=b._categories.slice())):S(c,A),g.push(m)}for(n(p,f),M.extendFlat(s,u(p,f)),P=x.length*y>o?s.sizeAvg||Math.max(s.size,3):t(f,y),d=0;d<g.length;d++)A=l[m=g[d]],b=I.getFromId(p,f._diag[m][0])||{},c=I.getFromId(p,f._diag[m][1])||{},T(p,f,b,c,x[d],x[d],P);var R=a(p,f);return R.matrix||(R.matrix=!0),R.matrixOptions=s,R.selectedOptions=i(p,f,f.selected),R.unselectedOptions=i(p,f,f.unselected),[{x:!1,y:!1,t:{},trace:f}]}},35253:($,K,e)=>{"use strict";var M=e(5228),I=e(84322),t=e(15238),T=e(49258),n=e(57265),i=e(39548),u=e(36207).isOpenSymbol;function a(o,v){function p(l,y){return M.coerce(o,v,t.dimensions,l,y)}p("label");var f=p("values");f&&f.length?p("visible"):v.visible=!1,p("axis.type"),p("axis.matches")}$.exports=function(v,p,f,l){function y(b,c){return M.coerce(v,p,t,b,c)}var s=I(v,p,{name:"dimensions",handleItemDefaults:a}),x=y("diagonal.visible"),h=y("showupperhalf"),g=y("showlowerhalf");if(i(p,s,"values")&&(x||h||g)){y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),n(v,p,f,l,y,{noAngleRef:!0,noStandOff:!0});var d=u(p.marker.symbol),A=T.isBubble(p);y("marker.line.width",d||A?1:0),function r(o,v,p,f){var g,m,l=v.dimensions,y=l.length,s=v.showupperhalf,x=v.showlowerhalf,h=v.diagonal.visible,d=new Array(y),A=new Array(y);for(g=0;g<y;g++){var b=g?g+1:"";d[g]="x"+b,A[g]="y"+b}var c=f("xaxes",d),S=f("yaxes",A),w=v._diag=new Array(y);v._xaxes={},v._yaxes={};var E=[],P=[];function R(j,ee,W,B){if(j){var te=j.charAt(0),q=p._splomAxes[te];if(v["_"+te+"axes"][j]=1,B.push(j),!(j in q)){var oe=q[j]={};W&&(oe.label=W.label||"",W.visible&&W.axis&&(W.axis.type&&(oe.type=W.axis.type),W.axis.matches&&(oe.matches=ee)))}}}var F=!h&&!x,_=!h&&!s;for(v._axesDim={},g=0;g<y;g++){var z=l[g],D=0===g,k=g===y-1,O=D&&F||k&&_?void 0:c[g],U=D&&_||k&&F?void 0:S[g];R(O,U,z,E),R(U,O,z,P),w[g]=[O,U],v._axesDim[O]=g,v._axesDim[U]=g}for(g=0;g<E.length;g++)for(m=0;m<P.length;m++){var H=E[g]+P[m];(g>m&&s||g<m&&x||g===m&&(h||!x||!s))&&(p._splomSubplots[H]=1)}(!x||!h&&s&&x)&&(p._splomGridDflt.xside="bottom",p._splomGridDflt.yside="left")}(0,p,l,y),M.coerceSelectionMarkerOpacity(p,y)}else p.visible=!1}},68377:($,K,e)=>{"use strict";var M=e(5228),I=e(50930),t=e(54414).markerStyle;$.exports=function(n,i){var u=i.trace,a=n._fullLayout._splomScenes[u.uid];if(a){I(n,u),M.extendFlat(a.matrixOptions,t(n,u));var r=M.extendFlat({},a.matrixOptions,a.viewOpts);a.matrix.update(r,null)}}},24950:($,K)=>{"use strict";K.getDimIndex=function(M,I){for(var t=I._id,n={x:0,y:1}[t.charAt(0)],i=M._visibleDims,u=0;u<i.length;u++){var a=i[u];if(M._diag[a][n]===t)return u}return!1}},35047:($,K,e)=>{"use strict";var M=e(24950),I=e(77466).calcHover;$.exports={hoverPoints:function t(T,n,i){var a=T.cd[0].trace,o=T.scene.matrixOptions.cdata,v=T.xa,p=T.ya,f=v.c2p(n),l=p.c2p(i),y=T.distance,s=M.getDimIndex(a,v),x=M.getDimIndex(a,p);if(!1===s||!1===x)return[T];for(var m,d,h=o[s],g=o[x],A=y,b=0;b<h.length;b++){var c=h[b],S=g[b],w=v.c2p(c)-f,E=p.c2p(S)-l,P=Math.sqrt(w*w+E*E);P<A&&(A=d=P,m=b)}return T.index=m,T.distance=A,T.dxy=d,void 0===m?[T]:[I(T,h,g,a)]}}},12152:($,K,e)=>{"use strict";var M=e(11542);M.basePlotModule=e(55812),$.exports=M},61726:($,K,e)=>{"use strict";var M=e(13167),I=e(5228),t=e(78168),T=e(85996).selectMode;function n(i,u){var x,h,g,m,d,a=i._fullLayout,r=a._size,o=u.trace,v=u.t,p=a._splomScenes[o.uid],f=p.matrixOptions,l=f.cdata,y=a._glcanvas.data()[0].regl,s=a.dragmode;if(0!==l.length){f.lower=o.showupperhalf,f.upper=o.showlowerhalf,f.diagonal=o.diagonal.visible;var A=o._visibleDims,b=l.length,c=p.viewOpts={};for(c.ranges=new Array(b),c.domains=new Array(b),d=0;d<A.length;d++){g=A[d];var S=c.ranges[d]=new Array(4),w=c.domains[d]=new Array(4);(x=t.getFromId(i,o._diag[g][0]))&&(S[0]=x._rl[0],S[2]=x._rl[1],w[0]=x.domain[0],w[2]=x.domain[1]),(h=t.getFromId(i,o._diag[g][1]))&&(S[1]=h._rl[0],S[3]=h._rl[1],w[1]=h.domain[0],w[3]=h.domain[1])}var E=i._context.plotGlPixelRatio,P=r.l*E,R=r.b*E,F=r.w*E,_=r.h*E;c.viewport=[P,R,F+P,_+R],!0===p.matrix&&(p.matrix=M(y));var z=a.clickmode.indexOf("select")>-1,k=!0;if(T(s)||!!o.selectedpoints||z){var O=o._length;if(o.selectedpoints){p.selectBatch=o.selectedpoints;var U=o.selectedpoints,H={};for(g=0;g<U.length;g++)H[U[g]]=!0;var j=[];for(g=0;g<O;g++)H[g]||j.push(g);p.unselectBatch=j}var ee=v.xpx=new Array(b),W=v.ypx=new Array(b);for(d=0;d<A.length;d++){if(g=A[d],x=t.getFromId(i,o._diag[g][0]))for(ee[d]=new Array(O),m=0;m<O;m++)ee[d][m]=x.c2p(l[d][m]);if(h=t.getFromId(i,o._diag[g][1]))for(W[d]=new Array(O),m=0;m<O;m++)W[d][m]=h.c2p(l[d][m])}if(p.selectBatch.length||p.unselectBatch.length){var B=I.extendFlat({},f,p.unselectedOptions,c),te=I.extendFlat({},f,p.selectedOptions,c);p.matrix.update(B,te),k=!1}}else v.xpx=v.ypx=null;if(k){var q=I.extendFlat({},f,c);p.matrix.update(q,null)}}}$.exports=function(u,a,r){if(r.length)for(var o=0;o<r.length;o++)n(u,r[o][0])}},56907:($,K,e)=>{"use strict";var M=e(5228);$.exports=function(t,T){var n=t._fullLayout,i=T.uid,u=n._splomScenes;u||(u=n._splomScenes={});var a={dirty:!0,selectBatch:[],unselectBatch:[]},o=u[T.uid];return o||((o=u[i]=M.extendFlat({},a,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){o.matrix&&o.matrix.draw&&(o.selectBatch.length||o.unselectBatch.length?o.matrix.draw(o.unselectBatch,o.selectBatch):o.matrix.draw()),o.dirty=!1},o.destroy=function(){o.matrix&&o.matrix.destroy&&o.matrix.destroy(),o.matrixOptions=null,o.selectBatch=null,o.unselectBatch=null,o=null}),o.dirty||M.extendFlat(o,a),o}},7319:($,K,e)=>{"use strict";var M=e(5228),I=M.pushUnique,t=e(49258),T=e(24950);$.exports=function(i,u){var a=i.cd,r=a[0].trace,o=a[0].t,v=i.scene,p=v.matrixOptions.cdata,f=i.xaxis,l=i.yaxis,y=[];if(!v)return y;var s=!t.hasMarkers(r)&&!t.hasText(r);if(!0!==r.visible||s)return y;var x=T.getDimIndex(r,f),h=T.getDimIndex(r,l);if(!1===x||!1===h)return y;var g=o.xpx[x],m=o.ypx[h],d=p[x],A=p[h],b=(i.scene.selectBatch||[]).slice(),c=[];if(!1!==u&&!u.degenerate)for(var S=0;S<d.length;S++)u.contains([g[S],m[S]],null,S,i)?(y.push({pointNumber:S,x:d[S],y:A[S]}),I(b,S)):-1!==b.indexOf(S)?I(b,S):c.push(S);var w=v.matrixOptions;return b.length||c.length?!v.selectBatch.length&&!v.unselectBatch.length&&v.matrix.update(v.unselectedOptions,M.extendFlat({},w,v.selectedOptions,v.viewOpts)):v.matrix.update(w,null),v.selectBatch=b,v.unselectBatch=c,y}},26828:($,K,e)=>{"use strict";var M=e(567),I=e(88489).axisHoverFormat,t=e(9430).fF,T=e(67787),n=e(82684),i=e(18836).extendFlat,u={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the x coordinates of the vector field."},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the y coordinates of the vector field."},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the z coordinates of the vector field."},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},starts:{x:{valType:"data_array",editType:"calc",description:["Sets the x components of the starting position of the streamtubes"].join(" ")},y:{valType:"data_array",editType:"calc",description:["Sets the y components of the starting position of the streamtubes"].join(" ")},z:{valType:"data_array",editType:"calc",description:["Sets the z components of the starting position of the streamtubes"].join(" ")},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc",description:["The maximum number of displayed segments in a streamtube."].join(" ")},sizeref:{valType:"number",editType:"calc",min:0,dflt:1,description:["The scaling factor for the streamtubes.","The default is 1, which avoids two max divergence tubes from touching","at adjacent starting positions."].join(" ")},text:{valType:"string",dflt:"",editType:"calc",description:["Sets a text element associated with this trace.","If trace `hoverinfo` contains a *text* flag,","this text element will be seen in all hover labels.","Note that streamtube traces do not support array `text` values."].join(" ")},hovertext:{valType:"string",dflt:"",editType:"calc",description:"Same as `text`."},hovertemplate:t({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:I("u",1),vhoverformat:I("v",1),whoverformat:I("w",1),xhoverformat:I("x"),yhoverformat:I("y"),zhoverformat:I("z"),showlegend:i({},n.showlegend,{dflt:!1})};i(u,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(r){u[r]=T[r]}),u.hoverinfo=i({},n.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),u.transforms=void 0,$.exports=u},55957:($,K,e)=>{"use strict";var M=e(5228),I=e(93727);function T(u){var p,f,l,A,b,c,S,w,E,P,R,F,a=u._x,r=u._y,o=u._z,v=u._len,y=-1/0,s=1/0,x=-1/0,h=1/0,g=-1/0,m=1/0,d="";for(v&&(S=a[0],E=r[0],R=o[0]),v>1&&(w=a[v-1],P=r[v-1],F=o[v-1]),p=0;p<v;p++)y=Math.max(y,a[p]),s=Math.min(s,a[p]),x=Math.max(x,r[p]),h=Math.min(h,r[p]),g=Math.max(g,o[p]),m=Math.min(m,o[p]),!A&&a[p]!==S&&(A=!0,d+="x"),!b&&r[p]!==E&&(b=!0,d+="y"),!c&&o[p]!==R&&(c=!0,d+="z");A||(d+="x"),b||(d+="y"),c||(d+="z");var _=n(u._x),z=n(u._y),D=n(u._z);d=(d=(d=d.replace("x",(S>w?"-":"+")+"x")).replace("y",(E>P?"-":"+")+"y")).replace("z",(R>F?"-":"+")+"z");var k=function(){v=0,_=[],z=[],D=[]};(!v||v<_.length*z.length*D.length)&&k();var O=function(ne){return"x"===ne?a:"y"===ne?r:o},U=function(ne){return"x"===ne?_:"y"===ne?z:D},H=function(ne){return ne[v-1]<ne[0]?-1:1},j=O(d[1]),ee=O(d[3]),W=O(d[5]),B=U(d[1]).length,te=U(d[3]).length,q=U(d[5]).length,oe=!1,ie=function(ne,se,de){return B*(te*ne+se)+de},V=H(O(d[1])),Y=H(O(d[3])),ae=H(O(d[5]));for(p=0;p<q-1;p++){for(f=0;f<te-1;f++){for(l=0;l<B-1;l++){var X=ie(p,f,l),J=ie(p,f,l+1),ue=ie(p,f+1,l),re=ie(p+1,f,l);if(j[X]*V<j[J]*V&&ee[X]*Y<ee[ue]*Y&&W[X]*ae<W[re]*ae||(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),k()),{xMin:s,yMin:h,zMin:m,xMax:y,yMax:x,zMax:g,Xs:_,Ys:z,Zs:D,len:v,fill:d}}function n(u){return M.distinctVals(u).vals}function i(u,a){if(void 0===a&&(a=u.length),M.isTypedArray(u))return u.subarray(0,a);for(var r=[],o=0;o<a;o++)r[o]=+u[o];return r}$.exports={calc:function t(u,a){a._len=Math.min(a.u.length,a.v.length,a.w.length,a.x.length,a.y.length,a.z.length),a._u=i(a.u,a._len),a._v=i(a.v,a._len),a._w=i(a.w,a._len),a._x=i(a.x,a._len),a._y=i(a.y,a._len),a._z=i(a.z,a._len);var r=T(a);a._gridFill=r.fill,a._Xs=r.Xs,a._Ys=r.Ys,a._Zs=r.Zs,a._len=r.len;var v,p,f,o=0;a.starts&&(v=i(a.starts.x||[]),p=i(a.starts.y||[]),f=i(a.starts.z||[]),o=Math.min(v.length,p.length,f.length)),a._startsX=v||[],a._startsY=p||[],a._startsZ=f||[];var s,l=0,y=1/0;for(s=0;s<a._len;s++){var x=a._u[s],h=a._v[s],g=a._w[s],m=Math.sqrt(x*x+h*h+g*g);l=Math.max(l,m),y=Math.min(y,m)}for(I(u,a,{vals:[y,l],containerStr:"",cLetter:"c"}),s=0;s<o;s++){var d=v[s];r.xMax=Math.max(r.xMax,d),r.xMin=Math.min(r.xMin,d);var A=p[s];r.yMax=Math.max(r.yMax,A),r.yMin=Math.min(r.yMin,A);var b=f[s];r.zMax=Math.max(r.zMax,b),r.zMin=Math.min(r.zMin,b)}a._slen=o,a._normMax=l,a._xbnds=[r.xMin,r.xMax],a._ybnds=[r.yMin,r.yMax],a._zbnds=[r.zMin,r.zMax]},filter:i,processGrid:T}},56951:($,K,e)=>{"use strict";var M=e(17745).gl_streamtube3d,I=M.createTubeMesh,t=e(5228),T=e(15989).parseColorScale,n=e(45103).extractOpts,i=e(9964),u={xaxis:0,yaxis:1,zaxis:2};function a(l,y){this.scene=l,this.uid=y,this.mesh=null,this.data=null}var r=a.prototype;function o(l){var y=l.length;return y>2?l.slice(1,y-1):2===y?[(l[0]+l[1])/2]:l}function v(l){var y=l.length;return 1===y?[.5,.5]:[l[1]-l[0],l[y-1]-l[y-2]]}function p(l,y){var s=l.fullSceneLayout,x=l.dataScale,h=y._len,g={};function m(te,q){var oe=s[q],ie=x[u[q]];return t.simpleMap(te,function(V){return oe.d2l(V)*ie})}if(g.vectors=i(m(y._u,"xaxis"),m(y._v,"yaxis"),m(y._w,"zaxis"),h),!h)return{positions:[],cells:[]};var d=m(y._Xs,"xaxis"),A=m(y._Ys,"yaxis"),b=m(y._Zs,"zaxis");if(g.meshgrid=[d,A,b],g.gridFill=y._gridFill,y._slen)g.startingPositions=i(m(y._startsX,"xaxis"),m(y._startsY,"yaxis"),m(y._startsZ,"zaxis"));else{for(var S=A[0],w=o(d),E=o(b),P=new Array(w.length*E.length),R=0,F=0;F<w.length;F++)for(var _=0;_<E.length;_++)P[R++]=[w[F],S,E[_]];g.startingPositions=P}g.colormap=T(y),g.tubeSize=y.sizeref,g.maxLength=y.maxdisplayed;var z=m(y._xbnds,"xaxis"),D=m(y._ybnds,"yaxis"),k=m(y._zbnds,"zaxis"),O=v(d),U=v(A),H=v(b),j=[[z[0]-O[0],D[0]-U[0],k[0]-H[0]],[z[1]+O[1],D[1]+U[1],k[1]+H[1]]],ee=M(g,j),W=n(y);ee.vertexIntensityBounds=[W.min/y._normMax,W.max/y._normMax];var B=y.lightposition;return ee.lightPosition=[B.x,B.y,B.z],ee.ambient=y.lighting.ambient,ee.diffuse=y.lighting.diffuse,ee.specular=y.lighting.specular,ee.roughness=y.lighting.roughness,ee.fresnel=y.lighting.fresnel,ee.opacity=y.opacity,y._pad=ee.tubeScale*y.sizeref*2,ee}r.handlePick=function(l){var y=this.scene.fullSceneLayout,s=this.scene.dataScale;function x(m,d){var A=y[d],b=s[u[d]];return A.l2c(m)/b}if(l.object===this.mesh){var h=l.data.position,g=l.data.velocity;return l.traceCoordinate=[x(h[0],"xaxis"),x(h[1],"yaxis"),x(h[2],"zaxis"),x(g[0],"xaxis"),x(g[1],"yaxis"),x(g[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},r.update=function(l){this.data=l;var y=p(this.scene,l);this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function f(l,y){var s=l.glplot.gl,x=p(l,y),h=I(s,x),g=new a(l,y.uid);return g.mesh=h,g.data=y,h._trace=g,l.glplot.add(h),g}},67468:($,K,e)=>{"use strict";var M=e(5228),I=e(14739),t=e(26828);$.exports=function(n,i,u,a){function r(s,x){return M.coerce(n,i,t,s,x)}var o=r("u"),v=r("v"),p=r("w"),f=r("x"),l=r("y"),y=r("z");o&&o.length&&v&&v.length&&p&&p.length&&f&&f.length&&l&&l.length&&y&&y.length?(r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),I(n,i,a,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),i._length=null):i.visible=!1}},3066:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(9275),categories:["gl3d","showLegend"],attributes:e(26828),supplyDefaults:e(67468),colorbar:{min:"cmin",max:"cmax"},calc:e(55957).calc,plot:e(56951),eventData:function(M,I){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=I.traceCoordinate[3],M.tubev=I.traceCoordinate[4],M.tubew=I.traceCoordinate[5],M.norm=I.traceCoordinate[6],M.divergence=I.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{description:["Use a streamtube trace to visualize flow in a vector field.","","Specify a vector field using 6 1D arrays of equal length,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, and `w`.","","By default, the tubes' starting positions will be cut from the vector field's","x-z plane at its minimum y value.","To specify your own starting position, use attributes `starts.x`, `starts.y`","and `starts.z`.","The color is encoded by the norm of (u, v, w), and the local radius","by the divergence of (u, v, w)."].join(" ")}}},36772:($,K,e)=>{"use strict";var M=e(82684),I=e(9430).fF,t=e(9430).si,T=e(567),n=e(47472).Y,i=e(23441),u=e(52445),a=e(18836).extendFlat,r=e(65822).u;$.exports={labels:{valType:"data_array",editType:"calc",description:["Sets the labels of each of the sectors."].join(" ")},parents:{valType:"data_array",editType:"calc",description:["Sets the parent sectors for each of the sectors.","Empty string items '' are understood to reference","the root node in the hierarchy.",'If `ids` is filled, `parents` items are understood to be "ids" themselves.',"When `ids` is not set, plotly attempts to find matching items in `labels`,","but beware they must be unique."].join(" ")},values:{valType:"data_array",editType:"calc",description:["Sets the values associated with each of the sectors.","Use with `branchvalues` to determine how the values are summed."].join(" ")},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc",description:["Determines how the items in `values` are summed.","When set to *total*, items in `values` are taken to be value of all its descendants.","When set to *remainder*, items in `values` corresponding to the root and the branches sectors","are taken to be the extra part not part of the sum of the values at their leaves."].join(" ")},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc",description:["Determines default for `values` when it is not provided,","by inferring a 1 for each of the *leaves* and/or *branches*, otherwise 0."].join(" ")},level:{valType:"any",editType:"plot",anim:!0,description:["Sets the level from which this trace hierarchy is rendered.","Set `level` to `''` to start from the root node in the hierarchy.",'Must be an "id" if `ids` is filled in, otherwise plotly attempts to find a matching',"item in `labels`."].join(" ")},maxdepth:{valType:"integer",editType:"plot",dflt:-1,description:["Sets the number of rendered sectors from any given `level`.","Set `maxdepth` to *-1* to render all the levels in the hierarchy."].join(" ")},marker:a({colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector of this trace.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:a({},i.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:a({},i.marker.line.width,{dflt:1}),editType:"calc"},pattern:r,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the leaves. With colorscale","it is defaulted to 1; otherwise it is defaulted to 0.7"].join(" ")},editType:"plot"},text:i.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot",description:["Determines which trace information appear on the graph."].join(" ")},texttemplate:t({editType:"plot"},{keys:u.eventDataKeys.concat(["label","value"])}),hovertext:i.hovertext,hoverinfo:a({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:I({},{keys:u.eventDataKeys}),textfont:i.textfont,insidetextorientation:i.insidetextorientation,insidetextfont:i.insidetextfont,outsidetextfont:a({},i.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented at the center of a sunburst graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),rotation:{valType:"angle",dflt:0,editType:"plot",description:["Rotates the whole diagram counterclockwise by some angle.","By default the first slice starts at 3 o'clock."].join(" ")},sort:i.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)",description:["sets the color of the root node for a sunburst/treemap/icicle trace.","this has no effect when a colorscale is used to set the markers."].join(" ")},editType:"calc"},domain:n({name:"sunburst",trace:!0,editType:"calc"})}},57961:($,K,e)=>{"use strict";var M=e(31556);K.name="sunburst",K.plot=function(I,t,T,n){M.plotBasePlot(K.name,I,t,T,n)},K.clean=function(I,t,T,n){M.cleanBasePlot(K.name,I,t,T,n)}},34285:($,K,e)=>{"use strict";var M=e(32906),I=e(7347),t=e(5228),T=e(45103).makeColorScaleFuncFromTrace,n=e(19160).makePullColorFn,i=e(19160).generateExtendedColors,u=e(45103).calc,a=e(71103).ALMOST_EQUAL,r={},o={},v={};function p(f,l,y){var s=0,x=f.children;if(x){for(var h=x.length,g=0;g<h;g++)s+=p(x[g],l,y);y.branches&&s++}else y.leaves&&s++;return f.value=f.data.data.value=s,l._values||(l._values=[]),l._values[f.data.data.i]=s,s}K.calc=function(f,l){var P,R,F,V,Y,ee,y=f._fullLayout,s=l.ids,x=t.isArrayOrTypedArray(s),h=l.labels,g=l.parents,m=l.values,d=t.isArrayOrTypedArray(m),A=[],b={},c={},w=function(V){return V||"number"==typeof V},E=function(V){return!d||I(m[V])&&m[V]>=0};x?(P=Math.min(s.length,g.length),R=function(V){return w(s[V])&&E(V)},F=function(V){return String(s[V])}):(P=Math.min(h.length,g.length),R=function(V){return w(h[V])&&E(V)},F=function(V){return String(h[V])}),d&&(P=Math.min(P,m.length));for(var _=0;_<P;_++)if(R(_)){var z=F(_),D=w(g[_])?String(g[_]):"",k={i:_,id:z,pid:D,label:w(h[_])?String(h[_]):""};d&&(k.v=+m[_]),A.push(k),Y=z,b[V=D]?b[V].push(Y):b[V]=[Y],c[Y]=1}if(b[""]){if(b[""].length>1){for(var H=t.randstr(),j=0;j<A.length;j++)""===A[j].pid&&(A[j].pid=H);A.unshift({hasMultipleRoots:!0,id:H,pid:"",label:""})}}else{var U,O=[];for(U in b)c[U]||O.push(U);if(1!==O.length)return t.warn(["Multiple implied roots, cannot build",l.type,"hierarchy of",l.name+".","These roots include:",O.join(", ")].join(" "));U=O[0],A.unshift({hasImpliedRoot:!0,id:U,pid:"",label:U})}try{ee=M.stratify().id(function(V){return V.id}).parentId(function(V){return V.pid})(A)}catch(V){return t.warn(["Failed to build",l.type,"hierarchy of",l.name+".","Error:",V.message].join(" "))}var W=M.hierarchy(ee),B=!1;if(d)switch(l.branchvalues){case"remainder":W.sum(function(V){return V.data.v});break;case"total":W.each(function(V){var Y=V.data.data,ae=Y.v;if(V.children){var X=V.children.reduce(function(J,ue){return J+ue.data.data.v},0);if((Y.hasImpliedRoot||Y.hasMultipleRoots)&&(ae=X),ae<X*a)return B=!0,t.warn(["Total value for node",V.data.data.id,"of",l.name,"is smaller than the sum of its children.","\nparent value =",ae,"\nchildren sum =",X].join(" "))}V.value=ae})}else p(W,l,{branches:-1!==l.count.indexOf("branches"),leaves:-1!==l.count.indexOf("leaves")});if(!B){l.sort&&W.sort(function(V,Y){return Y.value-V.value});var te,q,oe=l.marker.colors||[],ie=!!oe.length;return l._hasColorscale?(ie||(oe=d?l.values:l._values),u(f,l,{vals:oe,containerStr:"marker",cLetter:"c"}),q=T(l.marker)):te=n(y["_"+l.type+"colormap"]),W.each(function(V){var Y=V.data.data;Y.color=l._hasColorscale?q(oe[Y.i]):te(oe[Y.i],Y.id)}),A[0].hierarchy=W,A}},K._runCrossTraceCalc=function(f,l){var y=l._fullLayout,s=l.calcdata,x=y[f+"colorway"],h=y["_"+f+"colormap"];y["extend"+f+"colors"]&&(x=i(x,"icicle"===f?v:"treemap"===f?o:r));var m,g=0;function d(S){var w=S.data.data,E=w.id;!1===w.color&&(h[E]?w.color=h[E]:S.parent?S.parent.parent?w.color=S.parent.data.data.color:(h[E]=w.color=x[g%x.length],g++):w.color=m)}for(var A=0;A<s.length;A++){var c=s[A][0];c.trace.type===f&&c.hierarchy&&(m=c.trace.root.color,c.hierarchy.each(d))}},K.crossTraceCalc=function(f){return K._runCrossTraceCalc("sunburst",f)}},52445:$=>{"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},97139:($,K,e)=>{"use strict";var M=e(5228),I=e(36772),t=e(47472).c,T=e(74401).handleText,n=e(20297).handleMarkerDefaults,i=e(45103),u=i.hasColorscale,a=i.handleDefaults;$.exports=function(o,v,p,f){function l(d,A){return M.coerce(o,v,I,d,A)}var y=l("labels"),s=l("parents");if(y&&y.length&&s&&s.length){var x=l("values");x&&x.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),n(o,v,f,l);var h=v._hasColorscale=u(o,"marker","colors")||(o.marker||{}).coloraxis;h&&a(o,v,f,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",h?1:.7);var g=l("text");l("texttemplate"),v.texttemplate||l("textinfo",M.isArrayOrTypedArray(g)?"text+label":"label"),l("hovertext"),l("hovertemplate");T(o,v,f,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),t(v,f,l),v._length=null}else v.visible=!1}},9101:($,K,e)=>{"use strict";var M=e(27630),I=e(8416);$.exports=function(T,n,i,u,a){var r=n.data.data,o=r.i,v=a||r.color;if(o>=0){n.i=r.i;var p=i.marker;p.pattern?(!p.colors||!p.pattern.shape)&&(p.color=v,n.color=v):(p.color=v,n.color=v),M.pointStyle(T,i,u,n)}else I.fill(T,v)}},48113:($,K,e)=>{"use strict";var M=e(21572),I=e(97799),t=e(40235).appendArrayPointValue,T=e(76863),n=e(5228),i=e(70074),u=e(50797),r=e(63149).formatPieValue;function o(v,p,f){for(var l=v.data.data,y={curveNumber:p.index,pointNumber:l.i,data:p._input,fullData:p},s=0;s<f.length;s++){var x=f[s];x in v&&(y[x]=v[x])}return"parentString"in v&&!u.isHierarchyRoot(v)&&(y.parent=v.parentString),t(y,p,l.i),y}$.exports=function(p,f,l,y,s){var x=y[0],h=x.trace,g=x.hierarchy,m="sunburst"===h.type,d="treemap"===h.type||"icicle"===h.type;"_hasHoverLabel"in h||(h._hasHoverLabel=!1),"_hasHoverEvent"in h||(h._hasHoverEvent=!1);p.on("mouseover",function(S){var w=l._fullLayout;if(!l._dragging&&!1!==w.hovermode){var H,E=l._fullData[h.index],P=S.data.data,R=P.i,F=u.isHierarchyRoot(S),_=u.getParent(g,S),z=u.getValue(S),D=function(J){return n.castOption(E,R,J)},k=D("hovertemplate"),O=T.castHoverinfo(E,w,R),U=w.separators;if(k||O&&"none"!==O&&"skip"!==O){var j,ee;m&&(j=x.cx+S.pxmid[0]*(1-S.rInscribed),ee=x.cy+S.pxmid[1]*(1-S.rInscribed)),d&&(j=S._hoverX,ee=S._hoverY);var W={},B=[],te=[],q=function(J){return-1!==B.indexOf(J)};O&&(B="all"===O?E._module.attributes.hoverinfo.flags:O.split("+")),W.label=P.label,q("label")&&W.label&&te.push(W.label),P.hasOwnProperty("v")&&(W.value=P.v,W.valueLabel=r(W.value,U),q("value")&&te.push(W.valueLabel)),W.currentPath=S.currentPath=u.getPath(S.data),q("current path")&&!F&&te.push(W.currentPath);var oe,ie=[],V=function(){-1===ie.indexOf(oe)&&(te.push(oe),ie.push(oe))};W.percentParent=S.percentParent=z/u.getValue(_),W.parent=S.parentString=u.getPtLabel(_),q("percent parent")&&(oe=u.formatPercent(W.percentParent,U)+" of "+W.parent,V()),W.percentEntry=S.percentEntry=z/u.getValue(f),W.entry=S.entry=u.getPtLabel(f),q("percent entry")&&!F&&!S.onPathbar&&(oe=u.formatPercent(W.percentEntry,U)+" of "+W.entry,V()),W.percentRoot=S.percentRoot=z/u.getValue(g),W.root=S.root=u.getPtLabel(g),q("percent root")&&!F&&(oe=u.formatPercent(W.percentRoot,U)+" of "+W.root,V()),W.text=D("hovertext")||D("text"),q("text")&&(oe=W.text,n.isValidTextValue(oe)&&te.push(oe)),H=[o(S,E,s.eventDataKeys)];var Y={trace:E,y:ee,_x0:S._x0,_x1:S._x1,_y0:S._y0,_y1:S._y1,text:te.join("<br>"),name:k||q("name")?E.name:void 0,color:D("hoverlabel.bgcolor")||P.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:k,hovertemplateLabels:W,eventData:H};m&&(Y.x0=j-S.rInscribed*S.rpx1,Y.x1=j+S.rInscribed*S.rpx1,Y.idealAlign=S.pxmid[0]<0?"left":"right"),d&&(Y.x=j,Y.idealAlign=j<0?"left":"right");var ae=[];T.loneHover(Y,{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:l,inOut_bbox:ae}),H[0].bbox=ae[0],h._hasHoverLabel=!0}if(d){var X=p.select("path.surface");s.styleOne(X,S,E,l,{hovered:!0})}h._hasHoverEvent=!0,l.emit("plotly_hover",{points:H||[o(S,E,s.eventDataKeys)],event:M.event})}}),p.on("mouseout",function(S){var w=l._fullLayout,E=l._fullData[h.index],P=M.select(this).datum();if(h._hasHoverEvent&&(S.originalEvent=M.event,l.emit("plotly_unhover",{points:[o(P,E,s.eventDataKeys)],event:M.event}),h._hasHoverEvent=!1),h._hasHoverLabel&&(T.loneUnhover(w._hoverlayer.node()),h._hasHoverLabel=!1),d){var R=p.select("path.surface");s.styleOne(R,P,E,l,{hovered:!1})}}),p.on("click",function(S){var w=l._fullLayout,E=l._fullData[h.index],P=m&&(u.isHierarchyRoot(S)||u.isLeaf(S)),R=u.getPtId(S),F=u.isEntry(S)?u.findEntryWithChild(g,R):u.findEntryWithLevel(g,R),_=u.getPtId(F),z={points:[o(S,E,s.eventDataKeys)],event:M.event};P||(z.nextLevel=_);var D=i.triggerHandler(l,"plotly_"+h.type+"click",z);if(!1!==D&&w.hovermode&&(l._hoverdata=[o(S,E,s.eventDataKeys)],T.click(l,M.event)),!P&&!1!==D&&!l._dragging&&!l._transitioning){I.call("_storeDirectGUIEdit",E,w._tracePreGUI[E.uid],{level:E.level});var k={data:[{level:_}],traces:[h.index]},O={frame:{redraw:!1,duration:s.transitionTime},transition:{duration:s.transitionTime,easing:s.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(w._hoverlayer.node()),I.call("animate",l,k,O)}})}},50797:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(93720),T=e(63149);function u(a){return a.data.data.pid}K.findEntryWithLevel=function(a,r){var o;return r&&a.eachAfter(function(v){if(K.getPtId(v)===r)return o=v.copy()}),o||a},K.findEntryWithChild=function(a,r){var o;return a.eachAfter(function(v){for(var p=v.children||[],f=0;f<p.length;f++){var l=p[f];if(K.getPtId(l)===r)return o=v.copy()}}),o||a},K.isEntry=function(a){return!a.parent},K.isLeaf=function(a){return!a.children},K.getPtId=function(a){return a.data.data.id},K.getPtLabel=function(a){return a.data.data.label},K.getValue=function(a){return a.value},K.isHierarchyRoot=function(a){return""===u(a)},K.setSliceCursor=function(a,r,o){var v=o.isTransitioning;if(!v){var p=a.datum();v=o.hideOnRoot&&K.isHierarchyRoot(p)||o.hideOnLeaves&&K.isLeaf(p)}t(a,v?null:"pointer")},K.getInsideTextFontKey=function(a,r,o,v,p){var l=(p||{}).onPathbar?"pathbar.textfont":"insidetextfont",y=o.data.data.i;return M.castOption(r,y,l+"."+a)||M.castOption(r,y,"textfont."+a)||v.size},K.getOutsideTextFontKey=function(a,r,o,v){var p=o.data.data.i;return M.castOption(r,p,"outsidetextfont."+a)||M.castOption(r,p,"textfont."+a)||v.size},K.isOutsideText=function(a,r){return!a._hasColorscale&&K.isHierarchyRoot(r)},K.determineTextFont=function(a,r,o,v){return K.isOutsideText(a,r)?function n(a,r,o){return{color:K.getOutsideTextFontKey("color",a,r,o),family:K.getOutsideTextFontKey("family",a,r,o),size:K.getOutsideTextFontKey("size",a,r,o)}}(a,r,o):function i(a,r,o,v){var p=(v||{}).onPathbar,f=r.data.data,l=f.i,y=M.castOption(a,l,(p?"pathbar.textfont":"insidetextfont")+".color");return!y&&a._input.textfont&&(y=M.castOption(a._input,l,"textfont.color")),{color:y||I.contrast(f.color),family:K.getInsideTextFontKey("family",a,r,o,v),size:K.getInsideTextFontKey("size",a,r,o,v)}}(a,r,o,v)},K.hasTransition=function(a){return!!(a&&a.duration>0)},K.getMaxDepth=function(a){return a.maxdepth>=0?a.maxdepth:1/0},K.isHeader=function(a,r){return!(K.isLeaf(a)||a.depth===r._maxDepth-1)},K.getParent=function(a,r){return K.findEntryWithLevel(a,u(r))},K.listPath=function(a,r){var o=a.parent;if(!o)return[];var v=r?[o.data[r]]:[o];return K.listPath(o,r).concat(v)},K.getPath=function(a){return K.listPath(a,"label").join("/")+"/"},K.formatValue=T.formatPieValue,K.formatPercent=function(a,r){var o=M.formatPercent(a,0);return"0%"===o&&(o=T.formatPiePercent(a,r)),o}},20270:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(57961),categories:[],animatable:!0,attributes:e(36772),layoutAttributes:e(64653),supplyDefaults:e(97139),supplyLayoutDefaults:e(7522),calc:e(34285).calc,crossTraceCalc:e(34285).crossTraceCalc,plot:e(56446).plot,style:e(39958).style,colorbar:e(74899),meta:{description:["Visualize hierarchal data spanning outward radially from root to leaves.","The sunburst sectors are determined by the entries in *labels* or *ids*","and in *parents*."].join(" ")}}},64653:$=>{"use strict";$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default sunburst slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendsunburstcolors`."].join(" ")},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the sunburst slice colors (whether given by `sunburstcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},7522:($,K,e)=>{"use strict";var M=e(5228),I=e(64653);$.exports=function(T,n){function i(u,a){return M.coerce(T,n,I,u,a)}i("sunburstcolorway",n.colorway),i("extendsunburstcolors")}},56446:($,K,e)=>{"use strict";var M=e(21572),I=e(32906),t=e(55609).sX,T=e(27630),n=e(5228),i=e(88565),u=e(99771),a=u.recordMinTextSize,r=u.clearMinTextSize,o=e(49015),v=e(63149).getRotationAngle,p=o.computeTransform,f=o.transformInsideText,l=e(39958).styleOne,y=e(82563).resizeText,s=e(48113),x=e(52445),h=e(50797);function g(c,S,w,E){var P=c._context.staticPlot,R=c._fullLayout,F=!R.uniformtext.mode&&h.hasTransition(E),z=M.select(w).selectAll("g.slice"),D=S[0],k=D.trace,O=D.hierarchy,U=h.findEntryWithLevel(O,k.level),H=h.getMaxDepth(k),j=R._size,ee=k.domain,W=j.w*(ee.x[1]-ee.x[0]),B=j.h*(ee.y[1]-ee.y[0]),te=.5*Math.min(W,B),q=D.cx=j.l+j.w*(ee.x[1]+ee.x[0])/2,oe=D.cy=j.t+j.h*(1-ee.y[0])-B/2;if(!U)return z.remove();var ie=null,V={};F&&z.each(function(Ie){V[h.getPtId(Ie)]={rpx0:Ie.rpx0,rpx1:Ie.rpx1,x0:Ie.x0,x1:Ie.x1,transform:Ie.transform},!ie&&h.isEntry(Ie)&&(ie=Ie)});var Y=function m(c){return I.partition().size([2*Math.PI,c.height+1])(c)}(U).descendants(),ae=U.height+1,X=0,J=H;D.hasMultipleRoots&&h.isHierarchyRoot(U)&&(Y=Y.slice(1),ae-=1,X=1,J+=1),Y=Y.filter(function(Ie){return Ie.y1<=J});var ue=v(k.rotation);ue&&Y.forEach(function(Ie){Ie.x0+=ue,Ie.x1+=ue});var re=Math.min(ae,H),ne=function(Ie){return(Ie-X)/re*te},se=function(Ie,Qe){return[Ie*Math.cos(Qe),-Ie*Math.sin(Qe)]},de=function(Ie){return n.pathAnnulus(Ie.rpx0,Ie.rpx1,Ie.x0,Ie.x1,q,oe)},be=function(Ie){return q+A(Ie)[0]*(Ie.transform.rCenter||0)+(Ie.transform.x||0)},De=function(Ie){return oe+A(Ie)[1]*(Ie.transform.rCenter||0)+(Ie.transform.y||0)};(z=z.data(Y,h.getPtId)).enter().append("g").classed("slice",!0),F?z.exit().transition().each(function(){var Ie=M.select(this);Ie.select("path.surface").transition().attrTween("d",function(Be){var Ne=function Fe(Ie){var Ne,Qe=h.getPtId(Ie),at=V[Qe],Be=V[h.getPtId(U)];if(Be){var nt=(Ie.x1>Be.x1?2*Math.PI:0)+ue;Ne=Ie.rpx1<Be.rpx1?{x0:Ie.x0,x1:Ie.x1,rpx0:0,rpx1:0}:{x0:nt,x1:nt,rpx0:Ie.rpx0,rpx1:Ie.rpx1}}else{var ct,mt=h.getPtId(Ie.parent);z.each(function(Xt){if(h.getPtId(Xt)===mt)return ct=Xt});var Rt,Bt=ct.children;Bt.forEach(function(Xt,Mt){if(h.getPtId(Xt)===Qe)return Rt=Mt});var zt=Bt.length,St=t(ct.x0,ct.x1);Ne={rpx0:te,rpx1:te,x0:St(Rt/zt),x1:St((Rt+1)/zt)}}return t(at,Ne)}(Be);return function(nt){return de(Ne(nt))}}),Ie.select("g.slicetext").attr("opacity",0)}).remove():z.exit().remove(),z.order();var _e=null;if(F&&ie){var Ce=h.getPtId(ie);z.each(function(Ie){null===_e&&h.getPtId(Ie)===Ce&&(_e=Ie.x1)})}var Le=z;function Pe(Ie){var Qe=Ie.parent,at=V[h.getPtId(Qe)],Be={};if(at){var Ne=Qe.children,nt=Ne.indexOf(Ie),ct=Ne.length,mt=t(at.x0,at.x1);Be.x0=mt(nt/ct),Be.x1=mt(nt/ct)}else Be.x0=Be.x1=0;return Be}F&&(Le=Le.transition().each("end",function(){var Ie=M.select(this);h.setSliceCursor(Ie,c,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Le.each(function(Ie){var Qe=M.select(this),at=n.ensureSingle(Qe,"path","surface",function(Bt){Bt.style("pointer-events",P?"none":"all")});Ie.rpx0=ne(Ie.y0),Ie.rpx1=ne(Ie.y1),Ie.xmid=(Ie.x0+Ie.x1)/2,Ie.pxmid=se(Ie.rpx1,Ie.xmid),Ie.midangle=-(Ie.xmid-Math.PI/2),Ie.startangle=-(Ie.x0-Math.PI/2),Ie.stopangle=-(Ie.x1-Math.PI/2),Ie.halfangle=.5*Math.min(n.angleDelta(Ie.x0,Ie.x1)||Math.PI,Math.PI),Ie.ring=1-Ie.rpx0/Ie.rpx1,Ie.rInscribed=function d(c){return 0===c.rpx0&&n.isFullCircle([c.x0,c.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(c.halfangle)),c.ring/2))}(Ie),F?at.transition().attrTween("d",function(Bt){var Rt=function ke(Ie){var at,Qe=V[h.getPtId(Ie)],Be={x0:Ie.x0,x1:Ie.x1,rpx0:Ie.rpx0,rpx1:Ie.rpx1};if(Qe)at=Qe;else if(ie)if(Ie.parent)if(_e){var Ne=(Ie.x1>_e?2*Math.PI:0)+ue;at={x0:Ne,x1:Ne}}else at={rpx0:te,rpx1:te},n.extendFlat(at,Pe(Ie));else at={rpx0:0,rpx1:0};else at={x0:ue,x1:ue};return t(at,Be)}(Bt);return function(zt){return de(Rt(zt))}}):at.attr("d",de),Qe.call(s,U,c,S,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,c,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:c._transitioning}),at.call(l,Ie,k,c);var Be=n.ensureSingle(Qe,"g","slicetext"),Ne=n.ensureSingle(Be,"text","",function(Bt){Bt.attr("data-notex",1)}),nt=n.ensureUniformFontSize(c,h.determineTextFont(k,Ie,R.font));Ne.text(K.formatSliceLabel(Ie,U,k,S,R)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,nt).call(i.convertToTspans,c);var ct=T.bBox(Ne.node());Ie.transform=f(ct,Ie,D),Ie.transform.targetX=be(Ie),Ie.transform.targetY=De(Ie);var mt=function(Bt,Rt){var zt=Bt.transform;return p(zt,Rt),zt.fontSize=nt.size,a(k.type,zt,R),n.getTextTransform(zt)};F?Ne.transition().attrTween("transform",function(Bt){var Rt=function ze(Ie){var at,Qe=V[h.getPtId(Ie)],Be=Ie.transform;if(Qe)at=Qe;else if(at={rpx1:Ie.rpx1,transform:{textPosAngle:Be.textPosAngle,scale:0,rotate:Be.rotate,rCenter:Be.rCenter,x:Be.x,y:Be.y}},ie)if(Ie.parent)if(_e){var Ne=Ie.x1>_e?2*Math.PI:0;at.x0=at.x1=Ne}else n.extendFlat(at,Pe(Ie));else at.x0=at.x1=ue;else at.x0=at.x1=ue;var nt=t(at.transform.textPosAngle,Ie.transform.textPosAngle),ct=t(at.rpx1,Ie.rpx1),mt=t(at.x0,Ie.x0),Bt=t(at.x1,Ie.x1),Rt=t(at.transform.scale,Be.scale),zt=t(at.transform.rotate,Be.rotate),St=0===Be.rCenter?3:0===at.transform.rCenter?1/3:1,Xt=t(at.transform.rCenter,Be.rCenter),Mt=function(st){return Xt(Math.pow(st,St))};return function(st){var Se=ct(st),pe=mt(st),ge=Bt(st),Oe=Mt(st),Xe={pxmid:se(Se,(pe+ge)/2),rpx1:Se,transform:{textPosAngle:nt(st),rCenter:Oe,x:Be.x,y:Be.y}};return a(k.type,Be,R),{transform:{targetX:be(Xe),targetY:De(Xe),scale:Rt(st),rotate:zt(st),rCenter:Oe}}}}(Bt);return function(zt){return mt(Rt(zt),ct)}}):Ne.attr("transform",mt(Ie,ct))})}function A(c){return function b(c,S){return[c*Math.sin(S),-c*Math.cos(S)]}(c.rpx1,c.transform.textPosAngle)}K.plot=function(c,S,w,E){var F,_,P=c._fullLayout,R=P._sunburstlayer,z=!w,D=!P.uniformtext.mode&&h.hasTransition(w);(r("sunburst",P),(F=R.selectAll("g.trace.sunburst").data(S,function(O){return O[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),D)?(E&&(_=E()),M.transition().duration(w.duration).ease(w.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){R.selectAll("g.trace").each(function(O){g(c,O,this,w)})})):(F.each(function(O){g(c,O,this,w)}),P.uniformtext.mode&&y(c,P._sunburstlayer.selectAll(".trace"),"sunburst"));z&&F.exit().remove()},K.formatSliceLabel=function(c,S,w,E,P){var R=w.texttemplate,F=w.textinfo;if(!(R||F&&"none"!==F))return"";var _=P.separators,z=E[0],D=c.data.data,k=z.hierarchy,O=h.isHierarchyRoot(c),U=h.getParent(k,c),H=h.getValue(c);if(!R){var B,j=F.split("+"),ee=function(X){return-1!==j.indexOf(X)},W=[];if(ee("label")&&D.label&&W.push(D.label),D.hasOwnProperty("v")&&ee("value")&&W.push(h.formatValue(D.v,_)),!O){ee("current path")&&W.push(h.getPath(c.data));var te=0;ee("percent parent")&&te++,ee("percent entry")&&te++,ee("percent root")&&te++;var q=te>1;if(te){var oe,ie=function(X){B=h.formatPercent(oe,_),q&&(B+=" of "+X),W.push(B)};ee("percent parent")&&!O&&(oe=H/h.getValue(U),ie("parent")),ee("percent entry")&&(oe=H/h.getValue(S),ie("entry")),ee("percent root")&&(oe=H/h.getValue(k),ie("root"))}}return ee("text")&&(B=n.castOption(w,D.i,"text"),n.isValidTextValue(B)&&W.push(B)),W.join("<br>")}var V=n.castOption(w,D.i,"texttemplate");if(!V)return"";var Y={};D.label&&(Y.label=D.label),D.hasOwnProperty("v")&&(Y.value=D.v,Y.valueLabel=h.formatValue(D.v,_)),Y.currentPath=h.getPath(c.data),O||(Y.percentParent=H/h.getValue(U),Y.percentParentLabel=h.formatPercent(Y.percentParent,_),Y.parent=h.getPtLabel(U)),Y.percentEntry=H/h.getValue(S),Y.percentEntryLabel=h.formatPercent(Y.percentEntry,_),Y.entry=h.getPtLabel(S),Y.percentRoot=H/h.getValue(k),Y.percentRootLabel=h.formatPercent(Y.percentRoot,_),Y.root=h.getPtLabel(k),D.hasOwnProperty("color")&&(Y.color=D.color);var ae=n.castOption(w,D.i,"text");return(n.isValidTextValue(ae)||""===ae)&&(Y.text=ae),Y.customdata=n.castOption(w,D.i,"customdata"),n.texttemplateString(V,Y,P._d3locale,Y,w._meta||{})}},39958:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(5228),T=e(99771).resizeText,n=e(9101);function u(a,r,o,v){var p=r.data.data,f=!r.children,l=p.i,y=t.castOption(o,l,"marker.line.color")||I.defaultLine,s=t.castOption(o,l,"marker.line.width")||0;a.call(n,r,o,v).style("stroke-width",s).call(I.stroke,y).style("opacity",f?o.leaf.opacity:null)}$.exports={style:function i(a){var r=a._fullLayout._sunburstlayer.selectAll(".trace");T(a,r,"sunburst"),r.each(function(o){var v=M.select(this),f=o[0].trace;v.style("opacity",f.opacity),v.selectAll("path.surface").each(function(l){M.select(this).call(u,l,f,a)})})},styleOne:u}},53225:($,K,e)=>{"use strict";var M=e(8416),I=e(567),t=e(88489).axisHoverFormat,T=e(9430).fF,n=e(82684),i=e(18836).extendFlat,u=e(71859).overrideAll;function a(v){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",v,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}function r(v){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",v,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:a("x"),y:a("y"),z:a("z")},color:{valType:"color",dflt:M.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",v,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:M.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}var o=$.exports=u(i({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:T(),xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},I("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r("x"),y:r("y"),z:r("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale.","The opacityscale must be an array containing","arrays mapping a normalized value to an opacity value.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have","higher opacity values and those in the middle would be more transparent","Alternatively, `opacityscale` may be a palette name string","of the following list: 'min', 'max', 'extremes' and 'uniform'.","The default is 'uniform'."].join(" ")},_deprecated:{zauto:i({},I.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:i({},I.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:i({},I.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:i({},n.hoverinfo),showlegend:i({},n.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},64699:($,K,e)=>{"use strict";var M=e(93727);$.exports=function(t,T){T.surfacecolor?M(t,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):M(t,T,{vals:T.z,containerStr:"",cLetter:"c"})}},13582:($,K,e)=>{"use strict";var M=e(17745).gl_surface3d,I=e(17745).ndarray,t=e(17745).ndarray_linear_interpolate.d2,T=e(82147),n=e(70011),i=e(5228).isArrayOrTypedArray,u=e(15989).parseColorScale,a=e(31936),r=e(45103).extractOpts;function o(E,P,R){this.scene=E,this.uid=R,this.surface=P,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var v=o.prototype;v.getXat=function(E,P,R,F){var _=i(this.data.x)?i(this.data.x[0])?this.data.x[P][E]:this.data.x[E]:E;return void 0===R?_:F.d2l(_,0,R)},v.getYat=function(E,P,R,F){var _=i(this.data.y)?i(this.data.y[0])?this.data.y[P][E]:this.data.y[P]:P;return void 0===R?_:F.d2l(_,0,R)},v.getZat=function(E,P,R,F){var _=this.data.z[P][E];return null===_&&this.data.connectgaps&&this.data._interpolatedZ&&(_=this.data._interpolatedZ[P][E]),void 0===R?_:F.d2l(_,0,R)},v.handlePick=function(E){if(E.object===this.surface){var P=(E.data.index[0]-1)/this.dataScaleX-1,R=(E.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(P),this.data.z[0].length-1),0),_=Math.max(Math.min(Math.round(R),this.data._ylength-1),0);E.index=[F,_],E.traceCoordinate=[this.getXat(F,_),this.getYat(F,_),this.getZat(F,_)],E.dataCoordinate=[this.getXat(F,_,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,_,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,_,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var z=0;z<3;z++){null!=E.dataCoordinate[z]&&(E.dataCoordinate[z]*=this.scene.dataScale[z])}var k=this.data.hovertext||this.data.text;return i(k)&&k[_]&&void 0!==k[_][F]?E.textLabel=k[_][F]:E.textLabel=k||"",E.data.dataCoordinate=E.dataCoordinate.slice(),this.surface.highlight(E.data),this.scene.glplot.spikes.position=E.dataCoordinate,!0}};var f=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(E,P){if(E<P)return 0;for(var R=0;0===Math.floor(E%P);)E/=P,R++;return R}function y(E){for(var P=[],R=0;R<f.length;R++){var F=f[R];P.push(l(E,F))}return P}function s(E){for(var P=y(E),R=E,F=0;F<f.length;F++)if(P[F]>0){R=f[F];break}return R}function x(E,P){if(!(E<1||P<1)){for(var R=y(E),F=y(P),_=1,z=0;z<f.length;z++)_*=Math.pow(f[z],Math.max(R[z],F[z]));return _}}v.calcXnums=function(E){var P,R=[];for(P=1;P<E;P++){var F=this.getXat(P-1,0),_=this.getXat(P,0);R[P-1]=_!==F&&null!=F&&null!=_?Math.abs(_-F):0}var z=0;for(P=1;P<E;P++)z+=R[P-1];for(P=1;P<E;P++)0===R[P-1]?R[P-1]=1:R[P-1]=Math.round(z/R[P-1]);return R},v.calcYnums=function(E){var P,R=[];for(P=1;P<E;P++){var F=this.getYat(0,P-1),_=this.getYat(0,P);R[P-1]=_!==F&&null!=F&&null!=_?Math.abs(_-F):0}var z=0;for(P=1;P<E;P++)z+=R[P-1];for(P=1;P<E;P++)0===R[P-1]?R[P-1]=1:R[P-1]=Math.round(z/R[P-1]);return R};var g=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],m=g[9],d=g[13];function A(E,P,R){var F=R[8]+R[2]*P[0]+R[5]*P[1];return E[0]=(R[6]+R[0]*P[0]+R[3]*P[1])/F,E[1]=(R[7]+R[1]*P[0]+R[4]*P[1])/F,E}function b(E,P,R){return function c(E,P,R,F){for(var _=[0,0],z=E.shape[0],D=E.shape[1],k=0;k<z;k++)for(var O=0;O<D;O++)R(_,[k,O],F),E.set(k,O,t(P,_[0],_[1]));return E}(E,P,A,R),E}function S(E,P){for(var R=!1,F=0;F<E.length;F++)if(P===E[F]){R=!0;break}!1===R&&E.push(P)}v.estimateScale=function(E,P){for(var F=1+function h(E){if(0!==E.length){for(var P=1,R=0;R<E.length;R++)P=x(P,E[R]);return P}}(0===P?this.calcXnums(E):this.calcYnums(E));F<m;)F*=2;for(;F>d;)F--,F/=s(F),++F<m&&(F=d);var _=Math.round(F/E);return _>1?_:1},v.refineCoords=function(E){for(var P=this.dataScaleX,R=this.dataScaleY,F=E[0].shape[0],_=E[0].shape[1],z=0|Math.floor(E[0].shape[0]*P+1),D=0|Math.floor(E[0].shape[1]*R+1),k=1+F+1,O=1+_+1,U=I(new Float32Array(k*O),[k,O]),H=[1/P,0,0,0,1/R,0,0,0,1],j=0;j<E.length;++j){this.surface.padField(U,E[j]);var ee=I(new Float32Array(z*D),[z,D]);b(ee,U,H),E[j]=ee}},v.setContourLevels=function(){var F,_,z,E=[[],[],[]],P=[!1,!1,!1],R=!1;for(F=0;F<3;++F)if(this.showContour[F]&&(R=!0,this.contourSize[F]>0&&null!==this.contourStart[F]&&null!==this.contourEnd[F]&&this.contourEnd[F]>this.contourStart[F]))for(P[F]=!0,_=this.contourStart[F];_<this.contourEnd[F];_+=this.contourSize[F])z=_*this.scene.dataScale[F],S(E[F],z);if(R){var D=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(D[F]=P[F]?E[F]:this.scene.contourLevels[F]);this.surface.update({levels:D})}},v.update=function(E){var P=this.scene,R=P.fullSceneLayout,F=this.surface,_=u(E),z=P.dataScale,D=E.z[0].length,k=E._ylength,O=P.contourLevels;this.data=E;var U,H,j,ee,W=[];for(U=0;U<3;U++)for(W[U]=[],H=0;H<D;H++)W[U][H]=[];for(H=0;H<D;H++)for(j=0;j<k;j++)W[0][H][j]=this.getXat(H,j,E.xcalendar,R.xaxis),W[1][H][j]=this.getYat(H,j,E.ycalendar,R.yaxis),W[2][H][j]=this.getZat(H,j,E.zcalendar,R.zaxis);if(E.connectgaps)for(E._emptypoints=n(W[2]),T(W[2],E._emptypoints),E._interpolatedZ=[],H=0;H<D;H++)for(E._interpolatedZ[H]=[],j=0;j<k;j++)E._interpolatedZ[H][j]=W[2][H][j];for(U=0;U<3;U++)for(H=0;H<D;H++)for(j=0;j<k;j++)null==(ee=W[U][H][j])?W[U][H][j]=NaN:ee=W[U][H][j]*=z[U];for(U=0;U<3;U++)for(H=0;H<D;H++)for(j=0;j<k;j++)null!=(ee=W[U][H][j])&&(this.minValues[U]>ee&&(this.minValues[U]=ee),this.maxValues[U]<ee&&(this.maxValues[U]=ee));for(U=0;U<3;U++)this.objectOffset[U]=.5*(this.minValues[U]+this.maxValues[U]);for(U=0;U<3;U++)for(H=0;H<D;H++)for(j=0;j<k;j++)null!=(ee=W[U][H][j])&&(W[U][H][j]-=this.objectOffset[U]);var B=[I(new Float32Array(D*k),[D,k]),I(new Float32Array(D*k),[D,k]),I(new Float32Array(D*k),[D,k])];for(U=0;U<3;U++)for(H=0;H<D;H++)for(j=0;j<k;j++)B[U].set(H,j,W[U][H][j]);W=[];var te={colormap:_,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!E.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:E.opacityscale,opacity:E.opacity},q=r(E);if(te.intensityBounds=[q.min,q.max],E.surfacecolor){var oe=I(new Float32Array(D*k),[D,k]);for(H=0;H<D;H++)for(j=0;j<k;j++)oe.set(H,j,E.surfacecolor[j][H]);B.push(oe)}else te.intensityBounds[0]*=z[2],te.intensityBounds[1]*=z[2];(d<B[0].shape[0]||d<B[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(B[0].shape[0],0),this.dataScaleY=this.estimateScale(B[0].shape[1],1),(1!==this.dataScaleX||1!==this.dataScaleY)&&this.refineCoords(B)),E.surfacecolor&&(te.intensity=B.pop());var ie=[!0,!0,!0],V=["x","y","z"];for(U=0;U<3;++U){var Y=E.contours[V[U]];ie[U]=Y.highlight,te.showContour[U]=Y.show||Y.highlight,te.showContour[U]&&(te.contourProject[U]=[Y.project.x,Y.project.y,Y.project.z],Y.show?(this.showContour[U]=!0,te.levels[U]=O[U],F.highlightColor[U]=te.contourColor[U]=a(Y.color),Y.usecolormap?F.highlightTint[U]=te.contourTint[U]=0:F.highlightTint[U]=te.contourTint[U]=1,te.contourWidth[U]=Y.width,this.contourStart[U]=Y.start,this.contourEnd[U]=Y.end,this.contourSize[U]=Y.size):(this.showContour[U]=!1,this.contourStart[U]=null,this.contourEnd[U]=null,this.contourSize[U]=0),Y.highlight&&(te.dynamicColor[U]=a(Y.highlightcolor),te.dynamicWidth[U]=Y.highlightwidth))}(function p(E){var P=E[0].rgb,R=E[E.length-1].rgb;return P[0]===R[0]&&P[1]===R[1]&&P[2]===R[2]&&P[3]===R[3]})(_)&&(te.vertexColor=!0),te.objectOffset=this.objectOffset,te.coords=B,F.update(te),F.visible=E.visible,F.enableDynamic=ie,F.enableHighlight=ie,F.snapToData=!0,"lighting"in E&&(F.ambientLight=E.lighting.ambient,F.diffuseLight=E.lighting.diffuse,F.specularLight=E.lighting.specular,F.roughness=E.lighting.roughness,F.fresnel=E.lighting.fresnel),"lightposition"in E&&(F.lightPosition=[E.lightposition.x,E.lightposition.y,E.lightposition.z])},v.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function w(E,P){var R=E.glplot.gl,F=M({gl:R}),_=new o(E,F,P.uid);return F._trace=_,_.update(P),E.glplot.add(F),_}},94412:($,K,e)=>{"use strict";var M=e(97799),I=e(5228),t=e(14739),T=e(53225);function r(v,p,f,l){var y=l("opacityscale");"max"===y?p.opacityscale=[[0,.1],[1,1]]:"min"===y?p.opacityscale=[[0,1],[1,.1]]:"extremes"===y?p.opacityscale=function i(v,p){for(var f=[],y=0;y<32;y++){var s=y/31,x=p+(1-p)*(1-Math.pow(Math.sin(v*s*Math.PI),2));f.push([s,Math.max(0,Math.min(1,x))])}return f}(1,.1):function u(v){var p=0;if(!Array.isArray(v)||v.length<2||!v[0]||!v[v.length-1]||0!=+v[0][0]||1!=+v[v.length-1][0])return!1;for(var f=0;f<v.length;f++){var l=v[f];if(2!==l.length||+l[0]<p)return!1;p=+l[0]}return!0}(y)||(p.opacityscale=void 0)}function o(v,p,f){p in v&&!(f in v)&&(v[f]=v[p])}$.exports={supplyDefaults:function a(v,p,f,l){var y,s;function x(E,P){return I.coerce(v,p,T,E,P)}var h=x("x"),g=x("y"),m=x("z");if(!m||!m.length||h&&h.length<1||g&&g.length<1)p.visible=!1;else{p._xlength=Array.isArray(h)&&I.isArrayOrTypedArray(h[0])?m.length:m[0].length,p._ylength=m.length,M.getComponentMethod("calendars","handleTraceDefaults")(v,p,["x","y","z"],l),x("text"),x("hovertext"),x("hovertemplate"),x("xhoverformat"),x("yhoverformat"),x("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(E){x(E)});var A=x("surfacecolor"),b=["x","y","z"];for(y=0;y<3;++y){var c="contours."+b[y],S=x(c+".show"),w=x(c+".highlight");if(S||w)for(s=0;s<3;++s)x(c+".project."+b[s]);S&&(x(c+".color"),x(c+".width"),x(c+".usecolormap")),w&&(x(c+".highlightcolor"),x(c+".highlightwidth")),x(c+".start"),x(c+".end"),x(c+".size")}A||(o(v,"zmin","cmin"),o(v,"zmax","cmax"),o(v,"zauto","cauto")),t(v,p,l,x,{prefix:"",cLetter:"c"}),r(v,p,l,x),p._length=null}},opacityscaleDefaults:r}},44798:($,K,e)=>{"use strict";$.exports={attributes:e(53225),supplyDefaults:e(94412).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(64699),plot:e(13582),moduleType:"trace",name:"surface",basePlotModule:e(9275),categories:["gl3d","2dMap","showLegend"],meta:{description:["The data the describes the coordinates of the surface is set in `z`.","Data in `z` should be a {2D array}.","Coordinates in `x` and `y` can either be 1D {arrays}","or {2D arrays} (e.g. to graph parametric surfaces).","If not provided in `x` and `y`, the x and y coordinates are assumed","to be linear starting at 0 with a unit step.","The color scale corresponds to the `z` values by default.","For custom color scales, use `surfacecolor` which should be a {2D array},","where its bounds can be controlled using `cmin` and `cmax`."].join(" ")}}},90208:($,K,e)=>{"use strict";var M=e(6991),I=e(18836).extendFlat,t=e(71859).overrideAll,T=e(47297),n=e(47472).Y,i=e(88489).descriptionOnlyNumbers;($.exports=t({domain:n({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null,description:["The width of columns expressed as a ratio. Columns fill the available width","in proportion of their specified column widths."].join(" ")},columnorder:{valType:"data_array",description:["Specifies the rendered order of the data columns; for example, a value `2` at position `0`","means that column index `0` in the data will be rendered as the","third column, as columns have an index base of zero."].join(" ")},header:{values:{valType:"data_array",dflt:[],description:["Header cell values. `values[m][n]` represents the value of the `n`th point in column `m`,","therefore the `values[m]` vector length for all columns must be the same (longer vectors","will be truncated). Each value must be a finite number or a string."].join(" ")},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null,description:"Prefix for cell values."},suffix:{valType:"string",arrayOk:!0,dflt:null,description:"Suffix for cell values."},height:{valType:"number",dflt:28,description:"The height of cells."},align:I({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white",description:["Sets the cell fill color. It accepts either a specific color","or an array of colors or a 2D array of colors."].join(" ")}},font:I({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[],description:["Cell values. `values[m][n]` represents the value of the `n`th point in column `m`,","therefore the `values[m]` vector length for all columns must be the same (longer vectors","will be truncated). Each value must be a finite number or a string."].join(" ")},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null,description:"Prefix for cell values."},suffix:{valType:"string",arrayOk:!0,dflt:null,description:"Suffix for cell values."},height:{valType:"number",dflt:20,description:"The height of cells."},align:I({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white",description:["Sets the cell fill color. It accepts either a specific color","or an array of colors or a 2D array of colors."].join(" ")}},font:I({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},49508:($,K,e)=>{"use strict";var M=e(65644).a0,I=e(96705),t="table";K.name=t,K.plot=function(T){var n=M(T.calcdata,t)[0];n.length&&I(T,n)},K.clean=function(T,n,i,u){var a=u._has&&u._has(t),r=n._has&&n._has(t);a&&!r&&u._paperdiv.selectAll(".table").remove()}},66594:($,K,e)=>{"use strict";var M=e(47764).wrap;$.exports=function(){return M({})}},36322:$=>{"use strict";$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},74265:($,K,e)=>{"use strict";var M=e(36322),I=e(18836).extendFlat,t=e(7347),T=e(90406).isTypedArray,n=e(90406).isArrayOrTypedArray;function i(l){if(n(l)){for(var y=0,s=0;s<l.length;s++)y=Math.max(y,i(l[s]));return y}return l}function u(l,y){return l+y}function a(l){var h,y=l.slice(),s=1/0,x=0;for(h=0;h<y.length;h++)T(y[h])?y[h]=Array.from(y[h]):n(y[h])||(y[h]=[y[h]]),s=Math.min(s,y[h].length),x=Math.max(x,y[h].length);if(s!==x)for(h=0;h<y.length;h++){var g=x-y[h].length;g&&(y[h]=y[h].concat(r(g)))}return y}function r(l){for(var y=new Array(l),s=0;s<l;s++)y[s]="";return y}function o(l){return l.calcdata.columns.reduce(function(y,s){return s.xIndex<l.xIndex?y+s.columnWidth:y},0)}function v(l,y){return Object.keys(l).map(function(x){return I({},l[x],{auxiliaryBlocks:y})})}function p(l,y){for(var x,s={},h=0,g=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},d=0,A=0,b=0;b<l.length;b++)x=l[b],m.rows.push({rowIndex:b,rowHeight:x}),((g+=x)>=y||b===l.length-1)&&(s[h]=m,m.key=A++,m.firstRowIndex=d,m.lastRowIndex=b,m={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=g,d=b+1,g=0);return s}$.exports=function(y,s){var x=a(s.cells.values),h=function(ee){return ee.slice(s.header.values.length,ee.length)},g=a(s.header.values);g.length&&!g[0].length&&(g[0]=[""],g=a(g));var m=g.concat(h(x).map(function(){return r((g[0]||[""]).length)})),d=s.domain,A=Math.floor(y._fullLayout._size.w*(d.x[1]-d.x[0])),b=Math.floor(y._fullLayout._size.h*(d.y[1]-d.y[0])),c=s.header.values.length?m[0].map(function(){return s.header.height}):[M.emptyHeaderHeight],S=x.length?x[0].map(function(){return s.cells.height}):[],w=c.reduce(u,0),R=p(S,b-w+M.uplift),_=v(p(c,w),[]),z=v(R,_),D={},k=s._fullInput.columnorder;n(k)&&(k=Array.from(k)),k=k.concat(h(x.map(function(ee,W){return W})));var O=m.map(function(ee,W){var B=n(s.columnwidth)?s.columnwidth[Math.min(W,s.columnwidth.length-1)]:s.columnwidth;return t(B)?Number(B):1}),U=O.reduce(u,0);O=O.map(function(ee){return ee/U*A});var H=Math.max(i(s.header.line.width),i(s.cells.line.width)),j={key:s.uid+y._context.staticPlot,translateX:d.x[0]*y._fullLayout._size.w,translateY:y._fullLayout._size.h*(1-d.y[1]),size:y._fullLayout._size,width:A,maxLineWidth:H,height:b,columnOrder:k,groupHeight:b,rowBlocks:z,headerRowBlocks:_,scrollY:0,cells:I({},s.cells,{values:x}),headerCells:I({},s.header,{values:m}),gdColumns:m.map(function(ee){return ee[0]}),gdColumnsOriginalOrder:m.map(function(ee){return ee[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:m.map(function(ee,W){var B=D[ee];return D[ee]=(B||0)+1,{key:ee+"__"+D[ee],label:ee,specIndex:W,xIndex:k[W],xScale:o,x:void 0,calcdata:void 0,columnWidth:O[W]}})};return j.columns.forEach(function(ee){ee.calcdata=j,ee.x=o(ee)}),j}},39758:($,K,e)=>{"use strict";var M=e(18836).extendFlat;K.splitToPanels=function(t){var T=[0,0],n=M({},t,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:t.calcdata.headerCells.values[t.specIndex],rowBlocks:t.calcdata.headerRowBlocks,calcdata:M({},t.calcdata,{cells:t.calcdata.headerCells})});return[M({},t,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:t.calcdata.cells.values[t.specIndex],rowBlocks:t.calcdata.rowBlocks}),M({},t,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:t.calcdata.cells.values[t.specIndex],rowBlocks:t.calcdata.rowBlocks}),n]},K.splitToCells=function(t){var T=function I(t){var T=t.rowBlocks[t.page],n=T?T.rows[0].rowIndex:0,i=T?n+T.rows.length:0;return[n,i]}(t);return(t.values||[]).slice(T[0],T[1]).map(function(n,i){return{keyWithinBlock:i+("string"==typeof n&&n.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:T[0]+i,column:t,calcdata:t.calcdata,page:t.page,rowBlocks:t.rowBlocks,value:n}})}},80086:($,K,e)=>{"use strict";var M=e(5228),I=e(90208),t=e(47472).c;$.exports=function(i,u,a,r){function o(v,p){return M.coerce(i,u,I,v,p)}t(u,r,o),o("columnwidth"),o("header.values"),o("header.format"),o("header.align"),o("header.prefix"),o("header.suffix"),o("header.height"),o("header.line.width"),o("header.line.color"),o("header.fill.color"),M.coerceFont(o,"header.font",M.extendFlat({},r.font)),function T(n,i){for(var u=n.columnorder||[],a=n.header.values.length,r=u.slice(0,a),o=r.slice().sort(function(f,l){return f-l}),v=r.map(function(f){return o.indexOf(f)}),p=v.length;p<a;p++)v.push(p);i("columnorder",v)}(u,o),o("cells.values"),o("cells.format"),o("cells.align"),o("cells.prefix"),o("cells.suffix"),o("cells.height"),o("cells.line.width"),o("cells.line.color"),o("cells.fill.color"),M.coerceFont(o,"cells.font",M.extendFlat({},r.font)),u._length=null}},17949:($,K,e)=>{"use strict";$.exports={attributes:e(90208),supplyDefaults:e(80086),calc:e(66594),plot:e(96705),moduleType:"trace",name:"table",basePlotModule:e(49508),categories:["noOpacity"],meta:{description:["Table view for detailed data viewing.","The data are arranged in a grid of rows and columns.","Most styling can be specified for columns, rows or individual cells.","Table is using a column-major order, ie. the grid is represented as a vector of column vectors."].join(" ")}}},96705:($,K,e)=>{"use strict";var M=e(36322),I=e(21572),t=e(5228),T=t.numberFormat,n=e(47764),i=e(27630),u=e(88565),a=e(5228).raiseToTop,r=e(5228).strTranslate,o=e(5228).cancelTransition,v=e(74265),p=e(39758),f=e(8416);function l(J){return Math.ceil(J.calcdata.maxLineWidth/2)}function y(J,ue){return"clip"+J._fullLayout._uid+"_scrollAreaBottomClip_"+ue.key}function s(J,ue){return"clip"+J._fullLayout._uid+"_columnBoundaryClippath_"+ue.calcdata.key+"_"+ue.specIndex}function x(J){return[].concat.apply([],J.map(function(ue){return ue})).map(function(ue){return ue.__data__})}function h(J,ue,re){var se=J.selectAll("."+M.cn.scrollbarKit).data(n.repeat,n.keyFun);se.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),se.each(function(Ce){var Le=Ce.scrollbarState;Le.totalHeight=function ne(Ce){var Le=Ce.rowBlocks;return ie(Le,Le.length-1)+(Le.length?V(Le[Le.length-1],1/0):1)}(Ce),Le.scrollableAreaHeight=Ce.groupHeight-U(Ce),Le.currentlyVisibleHeight=Math.min(Le.totalHeight,Le.scrollableAreaHeight),Le.ratio=Le.currentlyVisibleHeight/Le.totalHeight,Le.barLength=Math.max(Le.ratio*Le.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),Le.barWiggleRoom=Le.currentlyVisibleHeight-Le.barLength,Le.wiggleRoom=Math.max(0,Le.totalHeight-Le.scrollableAreaHeight),Le.topY=0===Le.barWiggleRoom?0:Ce.scrollY/Le.wiggleRoom*Le.barWiggleRoom,Le.bottomY=Le.topY+Le.barLength,Le.dragMultiplier=Le.wiggleRoom/Le.barWiggleRoom}).attr("transform",function(Ce){var Le=Ce.width+M.scrollbarWidth/2+M.scrollbarOffset;return r(Le,U(Ce))});var de=se.selectAll("."+M.cn.scrollbar).data(n.repeat,n.keyFun);de.enter().append("g").classed(M.cn.scrollbar,!0);var be=de.selectAll("."+M.cn.scrollbarSlider).data(n.repeat,n.keyFun);be.enter().append("g").classed(M.cn.scrollbarSlider,!0),be.attr("transform",function(Ce){return r(0,Ce.scrollbarState.topY||0)});var De=be.selectAll("."+M.cn.scrollbarGlyph).data(n.repeat,n.keyFun);De.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),De.attr("y2",function(Ce){return Ce.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(Ce){return Ce.columnDragInProgress||!Ce.scrollbarState.barWiggleRoom||re?0:.4}),De.transition().delay(0).duration(0),De.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var _e=de.selectAll("."+M.cn.scrollbarCaptureZone).data(n.repeat,n.keyFun);_e.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Ce){var Le=I.event.y,Fe=this.getBoundingClientRect(),ke=Ce.scrollbarState,ze=Le-Fe.top,Pe=I.scale.linear().domain([0,ke.scrollableAreaHeight]).range([0,ke.totalHeight]).clamp(!0);ke.topY<=ze&&ze<=ke.bottomY||ee(ue,J,null,Pe(ze-ke.barLength/2))(Ce)}).call(I.behavior.drag().origin(function(Ce){return I.event.stopPropagation(),Ce.scrollbarState.scrollbarScrollInProgress=!0,Ce}).on("drag",ee(ue,J)).on("dragend",function(){})),_e.attr("y2",function(Ce){return Ce.scrollbarState.scrollableAreaHeight}),ue._context.staticPlot&&(De.remove(),_e.remove())}function g(J,ue,re,ne){var se=function m(J){var ue=J.selectAll("."+M.cn.columnCells).data(n.repeat,n.keyFun);return ue.enter().append("g").classed(M.cn.columnCells,!0),ue.exit().remove(),ue}(re),de=function d(J){var ue=J.selectAll("."+M.cn.columnCell).data(p.splitToCells,function(re){return re.keyWithinBlock});return ue.enter().append("g").classed(M.cn.columnCell,!0),ue.exit().remove(),ue}(se);!function S(J){J.each(function(ue,re){var ne=ue.calcdata.cells.font,se=ue.column.specIndex,de={size:z(ne.size,se,re),color:z(ne.color,se,re),family:z(ne.family,se,re)};ue.rowNumber=ue.key,ue.align=z(ue.calcdata.cells.align,se,re),ue.cellBorderWidth=z(ue.calcdata.cells.line.width,se,re),ue.font=de})}(de);var be=function A(J){var ue=J.selectAll("."+M.cn.cellRect).data(n.repeat,function(re){return re.keyWithinBlock});return ue.enter().append("rect").classed(M.cn.cellRect,!0),ue}(de);!function E(J){J.attr("width",function(ue){return ue.column.columnWidth}).attr("stroke-width",function(ue){return ue.cellBorderWidth}).each(function(ue){var re=I.select(this);f.stroke(re,z(ue.calcdata.cells.line.color,ue.column.specIndex,ue.rowNumber)),f.fill(re,z(ue.calcdata.cells.fill.color,ue.column.specIndex,ue.rowNumber))})}(be);var De=function c(J){var ue=J.selectAll("."+M.cn.cellTextHolder).data(n.repeat,function(re){return re.keyWithinBlock});return ue.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ue}(de),_e=function b(J){var ue=J.selectAll("."+M.cn.cellText).data(n.repeat,function(re){return re.keyWithinBlock});return ue.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){I.event.stopPropagation()}),ue}(De);(function w(J){J.each(function(ue){i.font(I.select(this),ue.font)})})(_e),P(_e,ue,ne,J),oe(de)}function P(J,ue,re,ne){J.text(function(se){var de=se.column.specIndex,be=se.rowNumber,De=se.value,_e="string"==typeof De,Ce=_e&&De.match(/<br>/i),Le=!_e||Ce;se.mayHaveMarkup=_e&&De.match(/[<&>]/);var Fe=function R(J){return"string"==typeof J&&J.match(M.latexCheck)}(De);se.latex=Fe;var Qe,at,ke=Fe?"":z(se.calcdata.cells.prefix,de,be)||"",ze=Fe?"":z(se.calcdata.cells.suffix,de,be)||"",Pe=Fe?null:z(se.calcdata.cells.format,de,be)||null,Ie=ke+(Pe?T(Pe)(se.value):se.value)+ze;if(se.wrappingNeeded=!se.wrapped&&!Le&&!Fe&&(Qe=F(Ie)),se.cellHeightMayIncrease=Ce||Fe||se.mayHaveMarkup||(void 0===Qe?F(Ie):Qe),se.needsConvertToTspans=se.mayHaveMarkup||se.wrappingNeeded||se.latex,se.wrappingNeeded){var Ne=(" "===M.wrapSplitCharacter?Ie.replace(/<a href=/gi,"<a_href="):Ie).split(M.wrapSplitCharacter),nt=" "===M.wrapSplitCharacter?Ne.map(function(ct){return ct.replace(/<a_href=/gi,"<a href=")}):Ne;se.fragments=nt.map(function(ct){return{text:ct,width:null}}),se.fragments.push({fragment:M.wrapSpacer,width:null}),at=nt.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete se.fragments,at=Ie;return at}).attr("dy",function(se){return se.needsConvertToTspans?0:"0.75em"}).each(function(se){var be=I.select(this),De=se.wrappingNeeded?B:te;se.needsConvertToTspans?u.convertToTspans(be,ne,De(re,this,ue,ne,se)):I.select(this.parentNode).attr("transform",function(_e){return r(q(_e),M.cellPad)}).attr("text-anchor",function(_e){return{left:"start",center:"middle",right:"end"}[_e.align]})})}function F(J){return-1!==J.indexOf(M.wrapSplitCharacter)}function z(J,ue,re){if(t.isArrayOrTypedArray(J)){var ne=J[Math.min(ue,J.length-1)];return t.isArrayOrTypedArray(ne)?ne[Math.min(re,ne.length-1)]:ne}return J}function D(J,ue,re){J.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",r(ue.x,re))}function k(J){return"cells"===J.type}function O(J){return"header"===J.type}function U(J){return(J.rowBlocks.length?J.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(re,ne){return re+V(ne,1/0)},0)}function j(J,ue,re){var ne=x(ue)[0];if(void 0!==ne){var se=ne.rowBlocks,de=ne.calcdata,be=ie(se,se.length),De=ne.calcdata.groupHeight-U(ne),_e=de.scrollY=Math.max(0,Math.min(be-De,de.scrollY)),Ce=function H(J,ue,re){for(var ne=[],se=0,de=0;de<J.length;de++){for(var be=J[de],De=be.rows,_e=0,Ce=0;Ce<De.length;Ce++)_e+=De[Ce].rowHeight;be.allRowsHeight=_e,ue<se+_e&&ue+re>se&&ne.push(de),se+=_e}return ne}(se,_e,De);1===Ce.length&&(Ce[0]===se.length-1?Ce.unshift(Ce[0]-1):Ce.push(Ce[0]+1)),Ce[0]%2&&Ce.reverse(),ue.each(function(Le,Fe){Le.page=Ce[Fe],Le.scrollY=_e}),ue.attr("transform",function(Le){var Fe=ie(Le.rowBlocks,Le.page)-Le.scrollY;return r(0,Fe)}),J&&(W(J,re,ue,Ce,ne.prevPages,ne,0),W(J,re,ue,Ce,ne.prevPages,ne,1),h(re,J))}}function ee(J,ue,re,ne){return function(de){var be=de.calcdata?de.calcdata:de,De=ue.filter(function(Fe){return be.key===Fe.key}),_e=re||be.scrollbarState.dragMultiplier,Ce=be.scrollY;be.scrollY=void 0===ne?be.scrollY+_e*I.event.dy:ne;var Le=De.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(k);return j(J,Le,De),be.scrollY===Ce}}function W(J,ue,re,ne,se,de,be){ne[be]!==se[be]&&(clearTimeout(de.currentRepaint[be]),de.currentRepaint[be]=setTimeout(function(){var _e=re.filter(function(Ce,Le){return Le===be&&ne[Le]!==se[Le]});g(J,ue,_e,re),se[be]=ne[be]}))}function B(J,ue,re,ne){return function(){var de=I.select(ue.parentNode);de.each(function(be){var De=be.fragments;de.selectAll("tspan.line").each(function(Ie,Qe){De[Qe].width=this.getComputedTextLength()});var Fe,ke,_e=De[De.length-1].width,Ce=De.slice(0,-1),Le=[],ze=0,Pe=be.column.columnWidth-2*M.cellPad;for(be.value="";Ce.length;)ze+(ke=(Fe=Ce.shift()).width+_e)>Pe&&(be.value+=Le.join(M.wrapSpacer)+M.lineBreaker,Le=[],ze=0),Le.push(Fe.text),ze+=ke;ze&&(be.value+=Le.join(M.wrapSpacer)),be.wrapped=!0}),de.selectAll("tspan.line").remove(),P(de.select("."+M.cn.cellText),re,J,ne),I.select(ue.parentNode.parentNode).call(oe)}}function te(J,ue,re,ne,se){return function(){if(!se.settledY){var be=I.select(ue.parentNode),De=ae(se),_e=se.key-De.firstRowIndex,Ce=De.rows[_e].rowHeight,Le=se.cellHeightMayIncrease?ue.parentNode.getBoundingClientRect().height+2*M.cellPad:Ce,Fe=Math.max(Le,Ce);Fe-De.rows[_e].rowHeight&&(De.rows[_e].rowHeight=Fe,J.selectAll("."+M.cn.columnCell).call(oe),j(null,J.filter(k),0),h(re,ne,!0)),be.attr("transform",function(){var Ie=this.parentNode.getBoundingClientRect(),Qe=I.select(this.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),at=this.transform.baseVal.consolidate(),Be=Qe.top-Ie.top+(at?at.matrix.f:M.cellPad);return r(q(se,I.select(this.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),Be)}),se.settledY=!0}}}function q(J,ue){switch(J.align){case"left":default:return M.cellPad;case"right":return J.column.columnWidth-(ue||0)-M.cellPad;case"center":return(J.column.columnWidth-(ue||0))/2}}function oe(J){J.attr("transform",function(ue){var re=ue.rowBlocks[0].auxiliaryBlocks.reduce(function(be,De){return be+V(De,1/0)},0),se=V(ae(ue),ue.key);return r(0,se+re)}).selectAll("."+M.cn.cellRect).attr("height",function(ue){return function X(J,ue){return J.rows[ue-J.firstRowIndex]}(ae(ue),ue.key).rowHeight})}function ie(J,ue){for(var re=0,ne=ue-1;ne>=0;ne--)re+=Y(J[ne]);return re}function V(J,ue){for(var re=0,ne=0;ne<J.rows.length&&J.rows[ne].rowIndex<ue;ne++)re+=J.rows[ne].rowHeight;return re}function Y(J){var ue=J.allRowsHeight;if(void 0!==ue)return ue;for(var re=0,ne=0;ne<J.rows.length;ne++)re+=J.rows[ne].rowHeight;return J.allRowsHeight=re,re}function ae(J){return J.rowBlocks[J.page]}$.exports=function(ue,re){var ne=!ue._context.staticPlot,se=ue._fullLayout._paper.selectAll("."+M.cn.table).data(re.map(function(Be){var nt=n.unwrap(Be).trace;return v(ue,nt)}),n.keyFun);se.exit().remove(),se.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),se.attr("width",function(Be){return Be.width+Be.size.l+Be.size.r}).attr("height",function(Be){return Be.height+Be.size.t+Be.size.b}).attr("transform",function(Be){return r(Be.translateX,Be.translateY)});var de=se.selectAll("."+M.cn.tableControlView).data(n.repeat,n.keyFun),be=de.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(ne){var De="onwheel"in document?"wheel":"mousewheel";be.on("mousemove",function(Be){de.filter(function(Ne){return Be===Ne}).call(h,ue)}).on(De,function(Be){if(!Be.scrollbarState.wheeling){Be.scrollbarState.wheeling=!0;var Ne=Be.scrollY+I.event.deltaY;ee(ue,de,null,Ne)(Be)||(I.event.stopPropagation(),I.event.preventDefault()),Be.scrollbarState.wheeling=!1}}).call(h,ue,!0)}de.attr("transform",function(Be){return r(Be.size.l,Be.size.t)});var _e=de.selectAll("."+M.cn.scrollBackground).data(n.repeat,n.keyFun);_e.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),_e.attr("width",function(Be){return Be.width}).attr("height",function(Be){return Be.height}),de.each(function(Be){i.setClipUrl(I.select(this),y(ue,Be),ue)});var Ce=de.selectAll("."+M.cn.yColumn).data(function(Be){return Be.columns},n.keyFun);Ce.enter().append("g").classed(M.cn.yColumn,!0),Ce.exit().remove(),Ce.attr("transform",function(Be){return r(Be.x,0)}),ne&&Ce.call(I.behavior.drag().origin(function(Be){return D(I.select(this),Be,-M.uplift),a(this),Be.calcdata.columnDragInProgress=!0,h(de.filter(function(nt){return Be.calcdata.key===nt.key}),ue),Be}).on("drag",function(Be){var Ne=I.select(this),nt=function(Bt){return(Be===Bt?I.event.x:Bt.x)+Bt.columnWidth/2};Be.x=Math.max(-M.overdrag,Math.min(Be.calcdata.width+M.overdrag-Be.columnWidth,I.event.x)),x(Ce).filter(function(Bt){return Bt.calcdata.key===Be.calcdata.key}).sort(function(Bt,Rt){return nt(Bt)-nt(Rt)}).forEach(function(Bt,Rt){Bt.xIndex=Rt,Bt.x=Be===Bt?Bt.x:Bt.xScale(Bt)}),Ce.filter(function(Bt){return Be!==Bt}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(Bt){return r(Bt.x,0)}),Ne.call(o).attr("transform",r(Be.x,-M.uplift))}).on("dragend",function(Be){var Ne=I.select(this),nt=Be.calcdata;Be.x=Be.xScale(Be),Be.calcdata.columnDragInProgress=!1,D(Ne,Be,0),function _(J,ue,re){var ne=ue.gdColumnsOriginalOrder;ue.gdColumns.sort(function(se,de){return re[ne.indexOf(se)]-re[ne.indexOf(de)]}),ue.columnorder=re,J.emit("plotly_restyle")}(ue,nt,nt.columns.map(function(ct){return ct.xIndex}))})),Ce.each(function(Be){i.setClipUrl(I.select(this),s(ue,Be),ue)});var Le=Ce.selectAll("."+M.cn.columnBlock).data(p.splitToPanels,n.keyFun);Le.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(Be){return Be.key}),Le.style("cursor",function(Be){return Be.dragHandle?"ew-resize":Be.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Fe=Le.filter(O),ke=Le.filter(k);ne&&ke.call(I.behavior.drag().origin(function(Be){return I.event.stopPropagation(),Be}).on("drag",ee(ue,de,-1)).on("dragend",function(){})),g(ue,de,Fe,Le),g(ue,de,ke,Le);var ze=de.selectAll("."+M.cn.scrollAreaClip).data(n.repeat,n.keyFun);ze.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(Be){return y(ue,Be)});var Pe=ze.selectAll("."+M.cn.scrollAreaClipRect).data(n.repeat,n.keyFun);Pe.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),Pe.attr("width",function(Be){return Be.width+2*M.overdrag}).attr("height",function(Be){return Be.height+M.uplift}),Ce.selectAll("."+M.cn.columnBoundary).data(n.repeat,n.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var Qe=Ce.selectAll("."+M.cn.columnBoundaryClippath).data(n.repeat,n.keyFun);Qe.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),Qe.attr("id",function(Be){return s(ue,Be)});var at=Qe.selectAll("."+M.cn.columnBoundaryRect).data(n.repeat,n.keyFun);at.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),at.attr("width",function(Be){return Be.columnWidth+2*l(Be)}).attr("height",function(Be){return Be.calcdata.height+2*l(Be)+M.uplift}).attr("x",function(Be){return-l(Be)}).attr("y",function(Be){return-l(Be)}),j(null,ke,de)}},66513:($,K,e)=>{"use strict";var M=e(9430).fF,I=e(9430).si,t=e(567),T=e(47472).Y,n=e(23441),i=e(36772),u=e(84036),a=e(18836).extendFlat,r=e(65822).u;$.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot",description:["Determines d3 treemap solver.","For more info please refer to https://github.com/d3/d3-hierarchy#treemap-tiling"].join(" ")},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot",description:["When using *squarify* `packing` algorithm, according to https://github.com/d3/d3-hierarchy/blob/v3.1.1/README.md#squarify_ratio","this option specifies the desired aspect ratio of the generated rectangles.","The ratio must be specified as a number greater than or equal to one.","Note that the orientation of the generated rectangles (tall or wide)","is not implied by the ratio; for example, a ratio of two will attempt","to produce a mixture of rectangles whose width:height ratio is either 2:1 or 1:2.","When using *squarify*, unlike d3 which uses the Golden Ratio i.e. 1.618034,","Plotly applies 1 to increase squares in treemap layouts."].join(" ")},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot",description:["Determines if the positions obtained from solver are flipped on each axis."].join(" ")},pad:{valType:"number",min:0,dflt:3,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:a({pad:{t:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the top (in px)."].join(" ")},l:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the left (in px)."].join(" ")},r:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the right (in px)."].join(" ")},b:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the bottom (in px)."].join(" ")},editType:"calc"},colors:i.marker.colors,pattern:r,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style",description:["Determines if the sector colors are faded towards","the background from the leaves up to the headers.","This option is unavailable when a `colorscale` is present,","defaults to false when `marker.colors` is set,","but otherwise defaults to true.","When set to *reversed*, the fading direction is inverted,","that is the top elements within hierarchy are drawn with fully saturated colors","while the leaves are faded towards the background color."].join(" ")},line:i.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the maximum rounding of corners (in px)."].join(" ")},editType:"calc"},t("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if the path bar is drawn","i.e. outside the trace `domain` and","with one pixel gap."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of the the treemap the","`pathbar` should be presented."].join(" ")},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot",description:["Determines which shape is used for edges between `barpath` labels."].join(" ")},thickness:{valType:"number",min:12,editType:"plot",description:["Sets the thickness of `pathbar` (in px). If not specified the `pathbar.textfont.size` is used","with 3 pixles extra padding on each side."].join(" ")},textfont:a({},n.textfont,{description:"Sets the font used inside `pathbar`."}),editType:"calc"},text:n.text,textinfo:i.textinfo,texttemplate:I({editType:"plot"},{keys:u.eventDataKeys.concat(["label","value"])}),hovertext:n.hovertext,hoverinfo:i.hoverinfo,hovertemplate:M({},{keys:u.eventDataKeys}),textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:a({},n.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented on top left corner of a treemap graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot",description:["Sets the positions of the `text` elements."].join(" ")},sort:n.sort,root:i.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},12442:($,K,e)=>{"use strict";var M=e(31556);K.name="treemap",K.plot=function(I,t,T,n){M.plotBasePlot(K.name,I,t,T,n)},K.clean=function(I,t,T,n){M.cleanBasePlot(K.name,I,t,T,n)}},9079:($,K,e)=>{"use strict";var M=e(34285);K.y=function(I,t){return M.calc(I,t)},K.T=function(I){return M._runCrossTraceCalc("treemap",I)}},84036:$=>{"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},10191:($,K,e)=>{"use strict";var M=e(5228),I=e(66513),t=e(8416),T=e(47472).c,n=e(74401).handleText,i=e(98466).TEXTPAD,u=e(20297).handleMarkerDefaults,a=e(45103),r=a.hasColorscale,o=a.handleDefaults;$.exports=function(p,f,l,y){function s(E,P){return M.coerce(p,f,I,E,P)}var x=s("labels"),h=s("parents");if(x&&x.length&&h&&h.length){var g=s("values");g&&g.length?s("branchvalues"):s("count"),s("level"),s("maxdepth"),"squarify"===s("tiling.packing")&&s("tiling.squarifyratio"),s("tiling.flip"),s("tiling.pad");var d=s("text");s("texttemplate"),f.texttemplate||s("textinfo",M.isArrayOrTypedArray(d)?"text+label":"label"),s("hovertext"),s("hovertemplate");var A=s("pathbar.visible");n(p,f,y,s,"auto",{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("textposition");var c=-1!==f.textposition.indexOf("bottom");u(p,f,y,s),(f._hasColorscale=r(p,"marker","colors")||(p.marker||{}).coloraxis)?o(p,f,y,s,{prefix:"marker.",cLetter:"c"}):s("marker.depthfade",!(f.marker.colors||[]).length);var w=2*f.textfont.size;s("marker.pad.t",c?w/4:w),s("marker.pad.l",w/4),s("marker.pad.r",w/4),s("marker.pad.b",c?w:w/4),s("marker.cornerradius"),f._hovered={marker:{line:{width:2,color:t.contrast(y.paper_bgcolor)}}},A&&(s("pathbar.thickness",f.pathbar.textfont.size+2*i),s("pathbar.side"),s("pathbar.edgeshape")),s("sort"),s("root.color"),T(f,y,s),f._length=null}else f.visible=!1}},6405:($,K,e)=>{"use strict";var M=e(21572),I=e(50797),T=e(99771).clearMinTextSize,n=e(82563).resizeText,i=e(62487);$.exports=function(a,r,o,v,p){var x,h,f=p.type,l=p.drawDescendants,y=a._fullLayout,s=y["_"+f+"layer"],g=!o;(T(f,y),(x=s.selectAll("g.trace."+f).data(r,function(d){return d[0].trace.uid})).enter().append("g").classed("trace",!0).classed(f,!0),x.order(),!y.uniformtext.mode&&I.hasTransition(o))?(v&&(h=v()),M.transition().duration(o.duration).ease(o.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).each(function(){s.selectAll("g.trace").each(function(d){i(a,d,this,o,l)})})):(x.each(function(d){i(a,d,this,o,l)}),y.uniformtext.mode&&n(a,s.selectAll(".trace"),f));g&&x.exit().remove()}},25679:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(88565),n=e(22318),i=e(10347).styleOne,u=e(84036),a=e(50797),r=e(48113),o=!0;$.exports=function(p,f,l,y,s){var x=s.barDifY,h=s.width,g=s.height,m=s.viewX,d=s.viewY,A=s.pathSlice,b=s.toMoveInsideSlice,c=s.strTransform,S=s.hasTransition,w=s.handleSlicesExit,E=s.makeUpdateSliceInterpolator,P=s.makeUpdateTextInterpolator,R={},F=p._context.staticPlot,_=p._fullLayout,z=f[0],D=z.trace,k=z.hierarchy,O=h/D._entryDepth,U=a.listPath(l.data,"id"),H=n(k.copy(),[h,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(H=H.filter(function(ee){var W=U.indexOf(ee.data.id);return-1!==W&&(ee.x0=O*W,ee.x1=O*(W+1),ee.y0=x,ee.y1=x+g,ee.onPathbar=!0,!0)})).reverse(),(y=y.data(H,a.getPtId)).enter().append("g").classed("pathbar",!0),w(y,o,R,[h,g],A),y.order();var j=y;S&&(j=j.transition().each("end",function(){var ee=M.select(this);a.setSliceCursor(ee,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(ee){ee._x0=m(ee.x0),ee._x1=m(ee.x1),ee._y0=d(ee.y0),ee._y1=d(ee.y1),ee._hoverX=m(ee.x1-Math.min(h,g)/2),ee._hoverY=d(ee.y1-g/2);var W=M.select(this),B=I.ensureSingle(W,"path","surface",function(ie){ie.style("pointer-events",F?"none":"all")});S?B.transition().attrTween("d",function(ie){var V=E(ie,o,R,[h,g]);return function(Y){return A(V(Y))}}):B.attr("d",A),W.call(r,l,p,f,{styleOne:i,eventDataKeys:u.eventDataKeys,transitionTime:u.CLICK_TRANSITION_TIME,transitionEasing:u.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:p._transitioning}),B.call(i,ee,D,p,{hovered:!1}),ee._text=(a.getPtLabel(ee)||"").split("<br>").join(" ")||"";var te=I.ensureSingle(W,"g","slicetext"),q=I.ensureSingle(te,"text","",function(ie){ie.attr("data-notex",1)}),oe=I.ensureUniformFontSize(p,a.determineTextFont(D,ee,_.font,{onPathbar:!0}));q.text(ee._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(t.font,oe).call(T.convertToTspans,p),ee.textBB=t.bBox(q.node()),ee.transform=b(ee,{fontSize:oe.size,onPathbar:!0}),ee.transform.fontSize=oe.size,S?q.transition().attrTween("transform",function(ie){var V=P(ie,o,R,[h,g]);return function(Y){return c(V(Y))}}):q.attr("transform",c(ee))})}},52495:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(88565),n=e(22318),i=e(10347).styleOne,u=e(84036),a=e(50797),r=e(48113),o=e(56446).formatSliceLabel,v=!1;$.exports=function(f,l,y,s,x){var h=x.width,g=x.height,m=x.viewX,d=x.viewY,A=x.pathSlice,b=x.toMoveInsideSlice,c=x.strTransform,S=x.hasTransition,w=x.handleSlicesExit,E=x.makeUpdateSliceInterpolator,P=x.makeUpdateTextInterpolator,R=x.prevEntry,_=f._context.staticPlot,z=f._fullLayout,k=l[0].trace,O=-1!==k.textposition.indexOf("left"),U=-1!==k.textposition.indexOf("right"),H=-1!==k.textposition.indexOf("bottom"),j=!H&&!k.marker.pad.t||H&&!k.marker.pad.b,W=n(y,[h,g],{packing:k.tiling.packing,squarifyratio:k.tiling.squarifyratio,flipX:k.tiling.flip.indexOf("x")>-1,flipY:k.tiling.flip.indexOf("y")>-1,pad:{inner:k.tiling.pad,top:k.marker.pad.t,left:k.marker.pad.l,right:k.marker.pad.r,bottom:k.marker.pad.b}}).descendants(),B=1/0,te=-1/0;W.forEach(function(Y){var ae=Y.depth;ae>=k._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(B=Math.min(B,ae),te=Math.max(te,ae))}),s=s.data(W,a.getPtId),k._maxVisibleLayers=isFinite(te)?te-B+1:0,s.enter().append("g").classed("slice",!0),w(s,v,{},[h,g],A),s.order();var q=null;if(S&&R){var oe=a.getPtId(R);s.each(function(Y){null===q&&a.getPtId(Y)===oe&&(q={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var ie=function(){return q||{x0:0,x1:h,y0:0,y1:g}},V=s;return S&&(V=V.transition().each("end",function(){var Y=M.select(this);a.setSliceCursor(Y,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(Y){var ae=a.isHeader(Y,k);Y._x0=m(Y.x0),Y._x1=m(Y.x1),Y._y0=d(Y.y0),Y._y1=d(Y.y1),Y._hoverX=m(Y.x1-k.marker.pad.r),Y._hoverY=d(H?Y.y1-k.marker.pad.b/2:Y.y0+k.marker.pad.t/2);var X=M.select(this),J=I.ensureSingle(X,"path","surface",function(se){se.style("pointer-events",_?"none":"all")});S?J.transition().attrTween("d",function(se){var de=E(se,v,ie(),[h,g]);return function(be){return A(de(be))}}):J.attr("d",A),X.call(r,y,f,l,{styleOne:i,eventDataKeys:u.eventDataKeys,transitionTime:u.CLICK_TRANSITION_TIME,transitionEasing:u.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,f,{isTransitioning:f._transitioning}),J.call(i,Y,k,f,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":Y._text=ae?j?"":a.getPtLabel(Y)||"":o(Y,y,k,l,z)||"";var ue=I.ensureSingle(X,"g","slicetext"),re=I.ensureSingle(ue,"text","",function(se){se.attr("data-notex",1)}),ne=I.ensureUniformFontSize(f,a.determineTextFont(k,Y,z.font));re.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",U?"end":O||ae?"start":"middle").call(t.font,ne).call(T.convertToTspans,f),Y.textBB=t.bBox(re.node()),Y.transform=b(Y,{fontSize:ne.size,isHeader:ae}),Y.transform.fontSize=ne.size,S?re.transition().attrTween("transform",function(se){var de=P(se,v,ie(),[h,g]);return function(be){return c(de(be))}}):re.attr("transform",c(Y))}),q}},58521:$=>{"use strict";$.exports=function K(e,M,I){var t;I.swapXY&&(t=e.x0,e.x0=e.y0,e.y0=t,t=e.x1,e.x1=e.y1,e.y1=t),I.flipX&&(t=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-t),I.flipY&&(t=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-t);var T=e.children;if(T)for(var n=0;n<T.length;n++)K(T[n],M,I)}},32045:($,K,e)=>{"use strict";$.exports={moduleType:"trace",name:"treemap",basePlotModule:e(12442),categories:[],animatable:!0,attributes:e(66513),layoutAttributes:e(96758),supplyDefaults:e(10191),supplyLayoutDefaults:e(33361),calc:e(9079).y,crossTraceCalc:e(9079).T,plot:e(28069),style:e(10347).style,colorbar:e(74899),meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The treemap sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}},96758:$=>{"use strict";$.exports={treemapcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default treemap slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendtreemapcolors`."].join(" ")},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the treemap slice colors (whether given by `treemapcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},33361:($,K,e)=>{"use strict";var M=e(5228),I=e(96758);$.exports=function(T,n){function i(u,a){return M.coerce(T,n,I,u,a)}i("treemapcolorway",n.colorway),i("extendtreemapcolors")}},22318:($,K,e)=>{"use strict";var M=e(32906),I=e(58521);$.exports=function(n,i,u){var y,a=u.flipX,r=u.flipY,o="dice-slice"===u.packing,v=u.pad[r?"bottom":"top"],p=u.pad[a?"right":"left"],f=u.pad[a?"left":"right"],l=u.pad[r?"top":"bottom"];o&&(y=p,p=v,v=y,y=f,f=l,l=y);var s=M.treemap().tile(function t(T,n){switch(T){case"squarify":return M.treemapSquarify.ratio(n);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(u.packing,u.squarifyratio)).paddingInner(u.pad.inner).paddingLeft(p).paddingRight(f).paddingTop(v).paddingBottom(l).size(o?[i[1],i[0]]:i)(n);return(o||a||r)&&I(s,i,{swapXY:o,flipX:a,flipY:r}),s}},28069:($,K,e)=>{"use strict";var M=e(6405),I=e(52495);$.exports=function(T,n,i,u){return M(T,n,i,u,{type:"treemap",drawDescendants:I})}},62487:($,K,e)=>{"use strict";var M=e(21572),I=e(55609).sX,t=e(50797),T=e(5228),n=e(98466).TEXTPAD,u=e(23038).toMoveInsideBar,r=e(99771).recordMinTextSize,o=e(84036),v=e(25679);function p(f){return t.isHierarchyRoot(f)?"":t.getPtId(f)}$.exports=function(l,y,s,x,h){var g=l._fullLayout,m=y[0],d=m.trace,b="icicle"===d.type,c=m.hierarchy,S=t.findEntryWithLevel(c,d.level),w=M.select(s),E=w.selectAll("g.pathbar"),P=w.selectAll("g.slice");if(!S)return E.remove(),void P.remove();var R=t.isHierarchyRoot(S),F=!g.uniformtext.mode&&t.hasTransition(x),_=t.getMaxDepth(d),D=g._size,k=d.domain,O=D.w*(k.x[1]-k.x[0]),U=D.h*(k.y[1]-k.y[0]),H=O,j=d.pathbar.thickness,ee=d.marker.line.width+o.gapWithPathbar,W=d.pathbar.visible?d.pathbar.side.indexOf("bottom")>-1?U+ee:-(j+ee):0,B={x0:H,x1:H,y0:W,y1:W+j},te=function(St,Xt,Mt){var st=d.tiling.pad,Se=function(we){return we-st<=Xt.x0},pe=function(we){return we+st>=Xt.x1},ge=function(we){return we-st<=Xt.y0},Oe=function(we){return we+st>=Xt.y1};return St.x0===Xt.x0&&St.x1===Xt.x1&&St.y0===Xt.y0&&St.y1===Xt.y1?{x0:St.x0,x1:St.x1,y0:St.y0,y1:St.y1}:{x0:Se(St.x0-st)?0:pe(St.x0-st)?Mt[0]:St.x0,x1:Se(St.x1+st)?0:pe(St.x1+st)?Mt[0]:St.x1,y0:ge(St.y0-st)?0:Oe(St.y0-st)?Mt[1]:St.y0,y1:ge(St.y1+st)?0:Oe(St.y1+st)?Mt[1]:St.y1}},q=null,oe={},ie={},V=null,Y=function(St,Xt){return Xt?oe[p(St)]:ie[p(St)]},ae=function(St,Xt,Mt,st){if(Xt)return oe[p(c)]||B;var Se=ie[d.level]||Mt;return function(St){return St.data.depth-S.data.depth<_}(St)?te(St,Se,st):{}};m.hasMultipleRoots&&R&&_++,d._maxDepth=_,d._backgroundColor=g.paper_bgcolor,d._entryDepth=S.data.depth,d._atRootLevel=R;var X=-O/2+D.l+D.w*(k.x[1]+k.x[0])/2,J=-U/2+D.t+D.h*(1-(k.y[1]+k.y[0])/2),ue=function(St){return X+St},re=function(St){return J+St},ne=re(0),se=ue(0),de=function(St){return se+St},be=function(St){return ne+St};function De(St,Xt){return St+","+Xt}var _e=de(0),Ce=function(St){St.x=Math.max(_e,St.x)},Le=d.pathbar.edgeshape,ke=d[b?"tiling":"marker"].pad,ze=function(St){return-1!==d.textposition.indexOf(St)},Pe=ze("top"),Ie=ze("left"),Qe=ze("right"),at=ze("bottom"),Ne=function(St,Xt){var Mt=St.x0,st=St.x1,Se=St.y0,pe=St.y1,ge=St.textBB,we=Pe||Xt.isHeader&&!at?"start":at?"end":"middle",He=ze("right"),ut=ze("left")||Xt.onPathbar?-1:He?1:0;if(Xt.isHeader){if((Mt+=(b?ke:ke.l)-n)>=(st-=(b?ke:ke.r)-n)){var Ze=(Mt+st)/2;Mt=Ze,st=Ze}var qe;at?Se<(qe=pe-(b?ke:ke.b))&&qe<pe&&(Se=qe):Se<(qe=Se+(b?ke:ke.t))&&qe<pe&&(pe=qe)}var Dt=u(Mt,st,Se,pe,ge,{isHorizontal:!1,constrained:!0,angle:0,anchor:we,leftToRight:ut});return Dt.fontSize=Xt.fontSize,Dt.targetX=ue(Dt.targetX),Dt.targetY=re(Dt.targetY),isNaN(Dt.targetX)||isNaN(Dt.targetY)?{}:(Mt!==st&&Se!==pe&&r(d.type,Dt,g),{scale:Dt.scale,rotate:Dt.rotate,textX:Dt.textX,textY:Dt.textY,anchorX:Dt.anchorX,anchorY:Dt.anchorY,targetX:Dt.targetX,targetY:Dt.targetY})},nt=function(St,Xt){for(var Mt,st=0,Se=St;!Mt&&st<_;)st++,(Se=Se.parent)?Mt=Y(Se,Xt):st=_;return Mt||{}},mt=function(St,Xt,Mt,st,Se){var ge,pe=Y(St,Xt);if(pe)ge=pe;else if(Xt)ge=B;else if(q)if(St.parent){var Oe=V||Mt;Oe&&!Xt?ge=te(St,Oe,st):(ge={},T.extendFlat(ge,nt(St,Xt)))}else ge=T.extendFlat({},St),b&&("h"===Se.orientation?Se.flipX?ge.x0=St.x1:ge.x1=0:Se.flipY?ge.y0=St.y1:ge.y1=0);else ge={};return I(ge,{x0:St.x0,x1:St.x1,y0:St.y0,y1:St.y1})},Bt=function(St,Xt,Mt,st){var Se=Y(St,Xt),pe={},ge=ae(St,Xt,Mt,st);T.extendFlat(pe,{transform:Ne({x0:ge.x0,x1:ge.x1,y0:ge.y0,y1:ge.y1,textBB:St.textBB,_text:St._text},{isHeader:t.isHeader(St,d)})}),Se?pe=Se:St.parent&&T.extendFlat(pe,nt(St,Xt));var Oe=St.transform;return St.x0!==St.x1&&St.y0!==St.y1&&r(d.type,Oe,g),I(pe,{transform:{scale:Oe.scale,rotate:Oe.rotate,textX:Oe.textX,textY:Oe.textY,anchorX:Oe.anchorX,anchorY:Oe.anchorY,targetX:Oe.targetX,targetY:Oe.targetY}})},Rt=function(St,Xt,Mt,st,Se){var pe=st[0],ge=st[1];F?St.exit().transition().each(function(){var Oe=M.select(this);Oe.select("path.surface").transition().attrTween("d",function(Xe){var ut=function(St,Xt,Mt,st){var pe,Se=Y(St,Xt);if(Xt)pe=B;else{var ge=Y(S,Xt);pe=ge?te(St,ge,st):{}}return I(Se,pe)}(Xe,Xt,0,[pe,ge]);return function(Ze){return Se(ut(Ze))}}),Oe.select("g.slicetext").attr("opacity",0)}).remove():St.exit().remove()},zt=function(St){var Xt=St.transform;return St.x0!==St.x1&&St.y0!==St.y1&&r(d.type,Xt,g),T.getTextTransform({textX:Xt.textX,textY:Xt.textY,anchorX:Xt.anchorX,anchorY:Xt.anchorY,targetX:Xt.targetX,targetY:Xt.targetY,scale:Xt.scale,rotate:Xt.rotate})};F&&(E.each(function(St){oe[p(St)]={x0:St.x0,x1:St.x1,y0:St.y0,y1:St.y1},St.transform&&(oe[p(St)].transform={textX:St.transform.textX,textY:St.transform.textY,anchorX:St.transform.anchorX,anchorY:St.transform.anchorY,targetX:St.transform.targetX,targetY:St.transform.targetY,scale:St.transform.scale,rotate:St.transform.rotate})}),P.each(function(St){ie[p(St)]={x0:St.x0,x1:St.x1,y0:St.y0,y1:St.y1},St.transform&&(ie[p(St)].transform={textX:St.transform.textX,textY:St.transform.textY,anchorX:St.transform.anchorX,anchorY:St.transform.anchorY,targetX:St.transform.targetX,targetY:St.transform.targetY,scale:St.transform.scale,rotate:St.transform.rotate}),!q&&t.isEntry(St)&&(q=St)})),V=h(l,y,S,P,{width:O,height:U,viewX:ue,viewY:re,pathSlice:function(St){var Xt=ue(St.x0),Mt=ue(St.x1),st=re(St.y0),Se=re(St.y1),pe=Mt-Xt,ge=Se-st;if(!pe||!ge)return"";var Oe=d.marker.cornerradius||0,we=Math.min(Oe,pe/2,ge/2);we&&St.data&&St.data.data&&St.data.data.label&&(Pe&&(we=Math.min(we,ke.t)),Ie&&(we=Math.min(we,ke.l)),Qe&&(we=Math.min(we,ke.r)),at&&(we=Math.min(we,ke.b)));var He=function(Xe,ut){return we?"a"+De(we,we)+" 0 0 1 "+De(Xe,ut):""};return"M"+De(Xt,st+we)+He(we,-we)+"L"+De(Mt-we,st)+He(we,we)+"L"+De(Mt,Se-we)+He(-we,we)+"L"+De(Xt+we,Se)+He(-we,-we)+"Z"},toMoveInsideSlice:Ne,prevEntry:q,makeUpdateSliceInterpolator:mt,makeUpdateTextInterpolator:Bt,handleSlicesExit:Rt,hasTransition:F,strTransform:zt}),d.pathbar.visible?v(l,y,S,E,{barDifY:W,width:H,height:j,viewX:de,viewY:be,pathSlice:function(St){var Xt=de(Math.max(Math.min(St.x0,St.x0),0)),Mt=de(Math.min(Math.max(St.x1,St.x1),H)),st=be(St.y0),Se=be(St.y1),pe=j/2,ge={},Oe={};ge.x=Xt,Oe.x=Mt,ge.y=Oe.y=(st+Se)/2;var we={x:Xt,y:st},He={x:Mt,y:st},Xe={x:Mt,y:Se},ut={x:Xt,y:Se};return">"===Le?(we.x-=pe,He.x-=pe,Xe.x-=pe,ut.x-=pe):"/"===Le?(Xe.x-=pe,ut.x-=pe,ge.x-=pe/2,Oe.x-=pe/2):"\\"===Le?(we.x-=pe,He.x-=pe,ge.x-=pe/2,Oe.x-=pe/2):"<"===Le&&(ge.x-=pe,Oe.x-=pe),Ce(we),Ce(ut),Ce(ge),Ce(He),Ce(Xe),Ce(Oe),"M"+De(we.x,we.y)+"L"+De(He.x,He.y)+"L"+De(Oe.x,Oe.y)+"L"+De(Xe.x,Xe.y)+"L"+De(ut.x,ut.y)+"L"+De(ge.x,ge.y)+"Z"},toMoveInsideSlice:Ne,makeUpdateSliceInterpolator:mt,makeUpdateTextInterpolator:Bt,handleSlicesExit:Rt,hasTransition:F,strTransform:zt}):E.remove()}},10347:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(5228),T=e(50797),n=e(99771).resizeText,i=e(9101);function a(r,o,v,p,f){var x,h,l=(f||{}).hovered,y=o.data.data,s=y.i,g=y.color,m=T.isHierarchyRoot(o),d=1;if(l)x=v._hovered.marker.line.color,h=v._hovered.marker.line.width;else if(m&&g===v.root.color)d=100,x="rgba(0,0,0,0)",h=0;else if(x=t.castOption(v,s,"marker.line.color")||I.defaultLine,h=t.castOption(v,s,"marker.line.width")||0,!v._hasColorscale&&!o.onPathbar){var A=v.marker.depthfade;if(A){var c,b=I.combine(I.addOpacity(v._backgroundColor,.75),g);if(!0===A){var S=T.getMaxDepth(v);c=isFinite(S)?T.isLeaf(o)?0:v._maxVisibleLayers-(o.data.depth-v._entryDepth):o.data.height+1}else c=o.data.depth-v._entryDepth,v._atRootLevel||c++;if(c>0)for(var w=0;w<c;w++){var E=.5*w/c;g=I.combine(I.addOpacity(b,E),g)}}}r.call(i,o,v,p,g).style("stroke-width",h).call(I.stroke,x).style("opacity",d)}$.exports={style:function u(r){var o=r._fullLayout._treemaplayer.selectAll(".trace");n(r,o,"treemap"),o.each(function(v){var p=M.select(this),l=v[0].trace;p.style("opacity",l.opacity),p.selectAll("path.surface").each(function(y){M.select(this).call(a,y,l,r,{hovered:!1})})})},styleOne:a}},57463:($,K,e)=>{"use strict";var M=e(76643),I=e(18836).extendFlat,t=e(88489).axisHoverFormat;$.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:t("x"),yhoverformat:t("y"),name:I({},M.name,{description:["Sets the trace name.","The trace name appears as the legend item and on hover.","For violin traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical.","Note that the trace name is also used as a default value","for attribute `scalegroup` (please see its description for details)."].join(" ")}),orientation:I({},M.orientation,{description:["Sets the orientation of the violin(s).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")}),bandwidth:{valType:"number",min:0,editType:"calc",description:["Sets the bandwidth used to compute the kernel density estimate.","By default, the bandwidth is determined by Silverman's rule of thumb."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple violins that should be sized according to","to some metric (see `scalemode`), link them by providing a non-empty group id here","shared by every trace in the same group.","If a violin's `width` is undefined, `scalegroup` will default to the trace's name.","In this case, violins with the same names will be linked together"].join(" ")},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc",description:["Sets the metric by which the width of each violin is determined.","*width* means each violin has the same (max) width","*count* means the violins are scaled by the number of sample points making","up each violin."].join(" ")},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc",description:["Sets the method by which the span in data space where the density function will be computed.","*soft* means the span goes from the sample's minimum value minus two bandwidths","to the sample's maximum value plus two bandwidths.","*hard* means the span goes from the sample's minimum to its maximum value.","For custom span settings, use mode *manual* and fill in the `span` attribute."].join(" ")},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the span in data space for which the density function will be computed.","Has an effect only when `spanmode` is set to *manual*."].join(" ")},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the violin(s)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the violin(s)."},editType:"plot"},fillcolor:M.fillcolor,points:I({},M.boxpoints,{description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the violins are shown with no sample points.","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set,","otherwise defaults to *outliers*."].join(" ")}),jitter:I({},M.jitter,{description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the violins."].join(" ")}),pointpos:I({},M.pointpos,{description:["Sets the position of the sample points in relation to the violins.","If *0*, the sample points are places over the center of the violins.","Positive (negative) values correspond to positions to the","right (left) for vertical violins and above (below) for horizontal violins."].join(" ")}),width:I({},M.width,{description:["Sets the width of the violin in data coordinates.","If *0* (default value) the width is automatically selected based on the positions","of other violin traces in the same subplot."].join(" ")}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if an miniature box plot is drawn inside the violins. "].join(" ")},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot",description:["Sets the width of the inner box plots relative to","the violins' width.","For example, with 1, the inner box plots are as wide as the violins."].join(" ")},fillcolor:{valType:"color",editType:"style",description:"Sets the inner box plot fill color."},line:{color:{valType:"color",editType:"style",description:"Sets the inner box plot bounding line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the inner box plot bounding line width."},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if a line corresponding to the sample's mean is shown","inside the violins.","If `box.visible` is turned on, the mean line is drawn inside the inner box.","Otherwise, the mean line is drawn from one side of the violin to other."].join(" ")},color:{valType:"color",editType:"style",description:"Sets the mean line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the mean line width."},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc",description:["Determines on which side of the position value the density function making up","one half of a violin is plotted.","Useful when comparing two violin traces under *overlay* mode, where one trace","has `side` set to *positive* and the other to *negative*."].join(" ")},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style",description:["Do the hover effects highlight individual violins","or sample points or the kernel density estimate or any combination of them?"].join(" ")}}},38724:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(92667),T=e(45122),n=e(71103).BADNUM;function u(r,o,v){var p=o.max-o.min;if(!p)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,p/1e4);var f=v.length,l=M.stdev(v,f-1,o.mean);return Math.max(function i(r,o,v){return 1.059*Math.min(o,v/1.349)*Math.pow(r,-.2)}(f,l,o.q3-o.q1),p/100)}function a(r,o,v,p){var x,f=r.spanmode,l=r.span||[],y=[o.min,o.max],s=[o.min-2*p,o.max+2*p];function h(m){var d=l[m],A="multicategory"===v.type?v.r2c(d):v.d2c(d,0,r[o.valLetter+"calendar"]);return A===n?s[m]:A}var g={type:"linear",range:x="soft"===f?s:"hard"===f?y:[h(0),h(1)]};return I.setConvert(g),g.cleanRange(),x}$.exports=function(o,v){var p=t(o,v);if(p[0].t.empty)return p;for(var f=o._fullLayout,l=I.getFromId(o,v["h"===v.orientation?"xaxis":"yaxis"]),y=1/0,s=-1/0,x=0,h=0,g=0;g<p.length;g++){var m=p[g],d=m.pts.map(T.extractVal),A=m.bandwidth=u(v,m,d),b=m.span=a(v,m,l,A);if(m.min===m.max&&0===A)b=m.span=[m.min,m.max],m.density=[{v:1,t:b[0]}],m.bandwidth=A,x=Math.max(x,1);else{var c=b[1]-b[0],S=Math.ceil(c/(A/3)),w=c/S;if(!isFinite(w)||!isFinite(S))return M.error("Something went wrong with computing the violin span"),p[0].t.empty=!0,p;var E=T.makeKDE(m,v,d);m.density=new Array(S);for(var P=0,R=b[0];R<b[1]+w/2;P++,R+=w){var F=E(R);m.density[P]={v:F,t:R},x=Math.max(x,F)}}h=Math.max(h,d.length),y=Math.min(y,b[0]),s=Math.max(s,b[1])}var _=I.findExtremes(l,[y,s],{padded:!0});if(v._extremes[l._id]=_,v.width)p[0].t.maxKDE=x;else{var z=f._violinScaleGroupStats,D=v.scalegroup,k=z[D];k?(k.maxKDE=Math.max(k.maxKDE,x),k.maxCount=Math.max(k.maxCount,h)):z[D]={maxKDE:x,maxCount:h}}return p[0].t.labels.kde=M._(o,"kde:"),p}},52265:($,K,e)=>{"use strict";var M=e(88267).setPositionOffset,I=["v","h"];$.exports=function(T,n){for(var i=T.calcdata,u=n.xaxis,a=n.yaxis,r=0;r<I.length;r++){for(var o=I[r],v="h"===o?a:u,p=[],f=0;f<i.length;f++){var l=i[f],y=l[0].t,s=l[0].trace;!0===s.visible&&"violin"===s.type&&!y.empty&&s.orientation===o&&s.xaxis===u._id&&s.yaxis===a._id&&p.push(f)}M("violin",T,p,v)}}},75025:($,K,e)=>{"use strict";var M=e(5228),I=e(8416),t=e(62560),T=e(57463);$.exports=function(i,u,a,r){function o(w,E){return M.coerce(i,u,T,w,E)}function v(w,E){return M.coerce2(i,u,T,w,E)}if(t.handleSampleDefaults(i,u,o,r),!1!==u.visible){o("bandwidth"),o("side"),o("width")||(o("scalegroup",u.name),o("scalemode"));var l,f=o("span");Array.isArray(f)&&(l="manual"),o("spanmode",l);var y=o("line.color",(i.marker||{}).color||a),s=o("line.width"),x=o("fillcolor",I.addOpacity(u.line.color,.5));t.handlePointsDefaults(i,u,o,{prefix:""});var h=v("box.width"),g=v("box.fillcolor",x),m=v("box.line.color",y),d=v("box.line.width",s);o("box.visible",Boolean(h||g||m||d))||(u.box={visible:!1});var b=v("meanline.color",y),c=v("meanline.width",s);o("meanline.visible",Boolean(b||c))||(u.meanline={visible:!1}),o("quartilemethod")}}},45122:($,K,e)=>{"use strict";var M=e(5228),I_gaussian=function(t){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*t*t)};K.makeKDE=function(t,T,n){var i=n.length,u=I_gaussian,a=t.bandwidth,r=1/(i*a);return function(o){for(var v=0,p=0;p<i;p++)v+=u((o-n[p])/a);return r*v}},K.getPositionOnKdePath=function(t,T,n){var i,u;"h"===T.orientation?(i="y",u="x"):(i="x",u="y");var a=M.findPointOnPath(t.path,n,u,{pathLength:t.pathLength}),r=t.posCenterPx,o=a[i];return[o,"both"===T.side?2*r-o:r]},K.getKdeValue=function(t,T,n){var i=t.pts.map(K.extractVal);return K.makeKDE(t,T,i)(n)/t.posDensityScale},K.extractVal=function(t){return t.v}},48936:($,K,e)=>{"use strict";var M=e(8416),I=e(5228),t=e(91464),T=e(60426),n=e(45122);$.exports=function(u,a,r,o,v){v||(v={});var g,m,p=v.hoverLayer,f=u.cd,l=f[0].trace,y=l.hoveron,s=-1!==y.indexOf("violins"),x=-1!==y.indexOf("kde"),h=[];if(s||x){var d=T.hoverOnBoxes(u,a,r,o);if(x&&d.length>0){var c,S,w,E,P,A=u.xa,b=u.ya;"h"===l.orientation?(P=a,c="y",w=b,S="x",E=A):(P=r,c="x",w=A,S="y",E=b);var R=f[u.index];if(P>=R.span[0]&&P<=R.span[1]){var F=I.extendFlat({},u),_=E.c2p(P,!0),z=n.getKdeValue(R,l,P),D=n.getPositionOnKdePath(R,l,_),k=w._offset,O=w._length;F[c+"0"]=D[0],F[c+"1"]=D[1],F[S+"0"]=F[S+"1"]=_,F[S+"Label"]=S+": "+t.hoverLabelText(E,P,l[S+"hoverformat"])+", "+f[0].t.labels.kde+" "+z.toFixed(3);for(var U=0,H=0;H<d.length;H++)if("med"===d[H].attr){U=H;break}F.spikeDistance=d[U].spikeDistance;var j=c+"Spike";F[j]=d[U][j],d[U].spikeDistance=void 0,d[U][j]=void 0,F.hovertemplate=!1,h.push(F),(m={})[c+"1"]=I.constrain(k+D[0],k,k+O),m[c+"2"]=I.constrain(k+D[1],k,k+O),m[S+"1"]=m[S+"2"]=E._offset+_}}s&&(h=h.concat(d))}-1!==y.indexOf("points")&&(g=T.hoverOnPoints(u,a,r));var ee=p.selectAll(".violinline-"+l.uid).data(m?[0]:[]);return ee.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5),ee.exit().remove(),ee.attr(m).call(M.stroke,u.color),"closest"===o?g?[g]:h:(g&&h.push(g),h)}},62746:($,K,e)=>{"use strict";$.exports={attributes:e(57463),layoutAttributes:e(64779),supplyDefaults:e(75025),crossTraceDefaults:e(62560).crossTraceDefaults,supplyLayoutDefaults:e(27622),calc:e(38724),crossTraceCalc:e(52265),plot:e(79550),style:e(79318),styleOnSelect:e(54675).styleOnSelect,hoverPoints:e(48936),selectPoints:e(61355),moduleType:"trace",name:"violin",basePlotModule:e(24329),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{description:["In vertical (horizontal) violin plots,","statistics are computed using `y` (`x`) values.","By supplying an `x` (`y`) array, one violin per distinct x (y) value","is drawn","If no `x` (`y`) {array} is provided, a single violin is drawn.","That violin position is then positioned with","with `name` or with `x0` (`y0`) if provided."].join(" ")}}},64779:($,K,e)=>{"use strict";var M=e(11578),I=e(5228).extendFlat;$.exports={violinmode:I({},M.boxmode,{description:["Determines how violins at the same location coordinate","are displayed on the graph.","If *group*, the violins are plotted next to one another","centered around the shared location.","If *overlay*, the violins are plotted over one another,","you might need to set *opacity* to see them multiple violins.","Has no effect on traces that have *width* set."].join(" ")}),violingap:I({},M.boxgap,{description:["Sets the gap (in plot fraction) between violins of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")}),violingroupgap:I({},M.boxgroupgap,{description:["Sets the gap (in plot fraction) between violins of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")})}},27622:($,K,e)=>{"use strict";var M=e(5228),I=e(64779),t=e(93172);$.exports=function(n,i,u){t._supply(n,i,u,function a(r,o){return M.coerce(n,i,I,r,o)},"violin")}},79550:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(46736),n=e(6050),i=e(45122);$.exports=function(a,r,o,v){var p=a._context.staticPlot,f=a._fullLayout,l=r.xaxis,y=r.yaxis;function s(x,h){var g=n(x,{xaxis:l,yaxis:y,trace:h,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return t.smoothopen(g[0],1)}I.makeTraceGroups(v,o,"trace violins").each(function(x){var h=M.select(this),g=x[0],m=g.t,d=g.trace;if(!0!==d.visible||m.empty)h.remove();else{var A=m.bPos,b=m.bdPos,c=r[m.valLetter+"axis"],S=r[m.posLetter+"axis"],w="both"===d.side,E=w||"positive"===d.side,P=w||"negative"===d.side,R=h.selectAll("path.violin").data(I.identity);R.enter().append("path").style("vector-effect",p?"none":"non-scaling-stroke").attr("class","violin"),R.exit().remove(),R.each(function(H){var q,ie,V,Y,ae,X,J,ue,j=M.select(this),ee=H.density,W=ee.length,B=S.c2l(H.pos+A,!0),te=S.l2p(B);if(d.width)q=m.maxKDE/b;else{var oe=f._violinScaleGroupStats[d.scalegroup];q="count"===d.scalemode?oe.maxKDE/b*(oe.maxCount/H.pts.length):oe.maxKDE/b}if(E){for(J=new Array(W),ae=0;ae<W;ae++)(ue=J[ae]={})[m.posLetter]=B+ee[ae].v/q,ue[m.valLetter]=c.c2l(ee[ae].t,!0);ie=s(J,d)}if(P){for(J=new Array(W),X=0,ae=W-1;X<W;X++,ae--)(ue=J[X]={})[m.posLetter]=B-ee[ae].v/q,ue[m.valLetter]=c.c2l(ee[ae].t,!0);V=s(J,d)}if(w)Y=ie+"L"+V.substr(1)+"Z";else{var re=[te,c.c2p(ee[0].t)],ne=[te,c.c2p(ee[W-1].t)];"h"===d.orientation&&(re.reverse(),ne.reverse()),Y=E?"M"+re+"L"+ie.substr(1)+"L"+ne:"M"+ne+"L"+V.substr(1)+"L"+re}j.attr("d",Y),H.posCenterPx=te,H.posDensityScale=q*b,H.path=j.node(),H.pathLength=H.path.getTotalLength()/(w?2:1)});var D,k,O,F=d.box,_=F.width,z=(F.line||{}).width;w?(D=b*_,k=0):E?(D=[0,b*_/2],k=z*{x:1,y:-1}[m.posLetter]):(D=[b*_/2,0],k=z*{x:-1,y:1}[m.posLetter]),T.plotBoxAndWhiskers(h,{pos:S,val:c},d,{bPos:A,bdPos:D,bPosPxOffset:k}),T.plotBoxMean(h,{pos:S,val:c},d,{bPos:A,bdPos:D,bPosPxOffset:k}),!d.box.visible&&d.meanline.visible&&(O=I.identity);var U=h.selectAll("path.meanline").data(O||[]);U.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",p?"none":"non-scaling-stroke"),U.exit().remove(),U.each(function(H){var j=c.c2p(H.mean,!0),ee=i.getPositionOnKdePath(H,d,j);M.select(this).attr("d","h"===d.orientation?"M"+j+","+ee[0]+"V"+ee[1]:"M"+ee[0]+","+j+"H"+ee[1])}),T.plotPoints(h,{x:l,y},d,m)}})}},79318:($,K,e)=>{"use strict";var M=e(21572),I=e(8416),t=e(54675).stylePoints;$.exports=function(n){var i=M.select(n).selectAll("g.trace.violins");i.style("opacity",function(u){return u[0].trace.opacity}),i.each(function(u){var a=u[0].trace,r=M.select(this),o=a.box||{},v=o.line||{},p=a.meanline||{},f=p.width;r.selectAll("path.violin").style("stroke-width",a.line.width+"px").call(I.stroke,a.line.color).call(I.fill,a.fillcolor),r.selectAll("path.box").style("stroke-width",v.width+"px").call(I.stroke,v.color).call(I.fill,o.fillcolor);var l={"stroke-width":f+"px","stroke-dasharray":2*f+"px,"+f+"px"};r.selectAll("path.mean").style(l).call(I.stroke,p.color),r.selectAll("path.meanline").style(l).call(I.stroke,p.color),t(r,a,n)})}},55893:($,K,e)=>{"use strict";var M=e(567),I=e(16636),t=e(53225),T=e(82684),n=e(18836).extendFlat,i=e(71859).overrideAll,u=$.exports=i(n({x:I.x,y:I.y,z:I.z,value:I.value,isomin:I.isomin,isomax:I.isomax,surface:I.surface,spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 1 meaning that they are entirely shaded. Applying a `fill` ratio less","than one would allow the creation of openings parallel to the edges."].join(" ")}},slices:I.slices,caps:I.caps,text:I.text,hovertext:I.hovertext,xhoverformat:I.xhoverformat,yhoverformat:I.yhoverformat,zhoverformat:I.zhoverformat,valuehoverformat:I.valuehoverformat,hovertemplate:I.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:I.colorbar,opacity:I.opacity,opacityscale:t.opacityscale,lightposition:I.lightposition,lighting:I.lighting,flatshading:I.flatshading,contour:I.contour,hoverinfo:n({},T.hoverinfo),showlegend:n({},T.showlegend,{dflt:!1})}),"calc","nested");u.x.editType=u.y.editType=u.z.editType=u.value.editType="calc+clearAxisTypes",u.transforms=void 0},59726:($,K,e)=>{"use strict";var M=e(17745).gl_mesh3d,I=e(15989).parseColorScale,t=e(5228).isArrayOrTypedArray,T=e(31936),n=e(45103).extractOpts,i=e(9964),u=e(28256).findNearestOnAxis,a=e(28256).generateIsoMeshes;function r(p,f,l){this.scene=p,this.uid=l,this.mesh=f,this.name="",this.data=null,this.showContour=!1}var o=r.prototype;o.handlePick=function(p){if(p.object===this.mesh){var f=p.data.index,l=this.data._meshX[f],y=this.data._meshY[f],s=this.data._meshZ[f],x=this.data._Ys.length,h=this.data._Zs.length,g=u(l,this.data._Xs).id,m=u(y,this.data._Ys).id,d=u(s,this.data._Zs).id,A=p.index=d+h*m+h*x*g;p.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var b=this.data.hovertext||this.data.text;return t(b)&&void 0!==b[A]?p.textLabel=b[A]:b&&(p.textLabel=b),!0}},o.update=function(p){var f=this.scene,l=f.fullSceneLayout;function y(m,d,A,b){return d.map(function(c){return m.d2l(c,0,b)*A})}this.data=a(p);var h={positions:i(y(l.xaxis,p._meshX,f.dataScale[0],p.xcalendar),y(l.yaxis,p._meshY,f.dataScale[1],p.ycalendar),y(l.zaxis,p._meshZ,f.dataScale[2],p.zcalendar)),cells:i(p._meshI,p._meshJ,p._meshK),lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,opacityscale:p.opacityscale,contourEnable:p.contour.show,contourColor:T(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading},g=n(p);h.vertexIntensity=p._meshIntensity,h.vertexIntensityBounds=[g.min,g.max],h.colormap=I(p),this.mesh.update(h)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function v(p,f){var l=p.glplot.gl,y=M({gl:l}),s=new r(p,y,f.uid);return y._trace=s,s.update(f),p.glplot.add(y),s}},2591:($,K,e)=>{"use strict";var M=e(5228),I=e(55893),t=e(50295).supplyIsoDefaults,T=e(94412).opacityscaleDefaults;$.exports=function(i,u,a,r){function o(v,p){return M.coerce(i,u,I,v,p)}t(i,u,a,r,o),T(i,u,r,o)}},39342:($,K,e)=>{"use strict";$.exports={attributes:e(55893),supplyDefaults:e(2591),calc:e(11367),colorbar:{min:"cmin",max:"cmax"},plot:e(59726),moduleType:"trace",name:"volume",basePlotModule:e(9275),categories:["gl3d","showLegend"],meta:{description:["Draws volume trace between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}},96050:($,K,e)=>{"use strict";var M=e(99009),I=e(55405).line,t=e(82684),T=e(88489).axisHoverFormat,n=e(9430).fF,i=e(9430).si,u=e(14203),a=e(18836).extendFlat,r=e(8416);function o(v){return{marker:{color:a({},M.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+v+" values."}),line:{color:a({},M.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+v+" values."}),width:a({},M.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+v+" values."}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:n({},{keys:u.eventDataKeys}),hoverinfo:a({},t.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:i({editType:"plot"},{keys:u.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:o("increasing"),decreasing:o("decreasing"),totals:o("intermediate sums and total"),connector:{line:{color:a({},I.color,{dflt:r.defaultLine}),width:a({},I.width,{editType:"plot"}),dash:I.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},75439:($,K,e)=>{"use strict";var M=e(91464),I=e(62311),t=e(5228).mergeArray,T=e(20107),n=e(71103).BADNUM;function i(a){return"a"===a||"absolute"===a}function u(a){return"t"===a||"total"===a}$.exports=function(r,o){var f,l,y,s,x,h,v=M.getFromId(r,o.xaxis||"x"),p=M.getFromId(r,o.yaxis||"y");"h"===o.orientation?(f=v.makeCalcdata(o,"x"),y=p.makeCalcdata(o,"y"),s=I(o,p,"y",y),x=!!o.yperiodalignment,h="y"):(f=p.makeCalcdata(o,"y"),y=v.makeCalcdata(o,"x"),s=I(o,v,"x",y),x=!!o.xperiodalignment,h="x"),l=s.vals;for(var A,g=Math.min(l.length,f.length),m=new Array(g),d=0,b=!1,c=0;c<g;c++){var S=f[c]||0,w=!1;(f[c]!==n||u(o.measure[c])||i(o.measure[c]))&&c+1<g&&(f[c+1]!==n||u(o.measure[c+1])||i(o.measure[c+1]))&&(w=!0);var E=m[c]={i:c,p:l[c],s:S,rawS:S,cNext:w};i(o.measure[c])?(d=E.s,E.isSum=!0,E.dir="totals",E.s=d):u(o.measure[c])?(E.isSum=!0,E.dir="totals",E.s=d):(E.isSum=!1,E.dir=E.rawS<0?"decreasing":"increasing",A=E.s,E.s=d+A,d+=A),"totals"===E.dir&&(b=!0),x&&(m[c].orig_p=y[c],m[c][h+"End"]=s.ends[c],m[c][h+"Start"]=s.starts[c]),o.ids&&(E.id=String(o.ids[c])),E.v=(o.base||0)+d}return m.length&&(m[0].hasTotals=b),t(o.text,m,"tx"),t(o.hovertext,m,"htx"),T(m,o),m}},14203:$=>{"use strict";$.exports={eventDataKeys:["initial","delta","final"]}},50377:($,K,e)=>{"use strict";var M=e(23870).setGroupPositions;$.exports=function(t,T){var f,l,n=t._fullLayout,i=t._fullData,u=t.calcdata,a=T.xaxis,r=T.yaxis,o=[],v=[],p=[];for(l=0;l<i.length;l++){var y=i[l];!0===y.visible&&y.xaxis===a._id&&y.yaxis===r._id&&"waterfall"===y.type&&(f=u[l],"h"===y.orientation?p.push(f):v.push(f),o.push(f))}var s={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(M(t,a,r,v,s),M(t,r,a,p,s),l=0;l<o.length;l++){f=o[l];for(var x=0;x<f.length;x++){var h=f[x];!1===h.isSum&&(h.s0+=0===x?0:f[x-1].s),x+1<f.length&&(f[x].nextP0=f[x+1].p0,f[x].nextS0=f[x+1].s0)}}}},99325:($,K,e)=>{"use strict";var M=e(5228),I=e(36711),t=e(74401).handleText,T=e(82069),n=e(18031),i=e(96050),u=e(8416),a=e(73673),r=a.INCREASING.COLOR,o=a.DECREASING.COLOR;function p(y,s,x){y(s+".marker.color",x),y(s+".marker.line.color",u.defaultLine),y(s+".marker.line.width")}$.exports={supplyDefaults:function f(y,s,x,h){function g(c,S){return M.coerce(y,s,i,c,S)}if(T(y,s,h,g)){n(y,s,h,g),g("xhoverformat"),g("yhoverformat"),g("measure"),g("orientation",s.x&&!s.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var d=g("textposition");if(t(y,s,h,g,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==s.textposition&&(g("texttemplate"),s.texttemplate||g("textinfo")),p(g,"increasing",r),p(g,"decreasing",o),p(g,"totals","#4499FF"),g("connector.visible"))g("connector.mode"),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash"))}else s.visible=!1},crossTraceDefaults:function l(y,s){var x,h;function g(d){return M.coerce(h._input,h,i,d)}if("group"===s.waterfallmode)for(var m=0;m<y.length;m++)x=(h=y[m])._input,I(x,h,s,g)}}},62310:$=>{"use strict";$.exports=function(e,M){return e.x="xVal"in M?M.xVal:M.x,e.y="yVal"in M?M.yVal:M.y,"initial"in M&&(e.initial=M.initial),"delta"in M&&(e.delta=M.delta),"final"in M&&(e.final=M.final),M.xa&&(e.xaxis=M.xa),M.ya&&(e.yaxis=M.ya),e}},12439:($,K,e)=>{"use strict";var M=e(91464).hoverLabelText,I=e(8416).opacity,t=e(54283).hoverOnBars,T=e(73673),n_increasing=T.INCREASING.SYMBOL,n_decreasing=T.DECREASING.SYMBOL;$.exports=function(a,r,o,v,p){var f=t(a,r,o,v,p);if(f){var l=f.cd,y=l[0].trace,s="h"===y.orientation,x=s?"x":"y",h=s?a.xa:a.ya,d=l[f.index],A=d.isSum?d.b+d.s:d.rawS;f.initial=d.b+d.s-A,f.delta=A,f.final=f.initial+f.delta;var b=g(Math.abs(f.delta));f.deltaLabel=A<0?"("+b+")":b,f.finalLabel=g(f.final),f.initialLabel=g(f.initial);var c=d.hi||y.hoverinfo,S=[];if(c&&"none"!==c&&"skip"!==c){var w="all"===c,E=c.split("+"),P=function(R){return w||-1!==E.indexOf(R)};d.isSum||(P("final")&&(s?!P("x"):!P("y"))&&S.push(f.finalLabel),P("delta")&&(A<0?S.push(f.deltaLabel+" "+n_decreasing):S.push(f.deltaLabel+" "+n_increasing)),P("initial")&&S.push("Initial: "+f.initialLabel))}return S.length&&(f.extraText=S.join("<br>")),f.color=function i(u,a){var r=u[a.dir].marker,o=r.color,v=r.line.color,p=r.line.width;if(I(o))return o;if(I(v)&&p)return v}(y,d),[f]}function g(R){return M(h,R,y[x+"hoverformat"])}}},16310:($,K,e)=>{"use strict";$.exports={attributes:e(96050),layoutAttributes:e(88635),supplyDefaults:e(99325).supplyDefaults,crossTraceDefaults:e(99325).crossTraceDefaults,supplyLayoutDefaults:e(97369),calc:e(75439),crossTraceCalc:e(50377),plot:e(56905),style:e(59969).style,hoverPoints:e(12439),eventData:e(62310),selectPoints:e(85499),moduleType:"trace",name:"waterfall",basePlotModule:e(24329),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set to *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},88635:$=>{"use strict";$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},97369:($,K,e)=>{"use strict";var M=e(5228),I=e(88635);$.exports=function(t,T,n){var i=!1;function u(o,v){return M.coerce(t,T,I,o,v)}for(var a=0;a<n.length;a++){var r=n[a];if(r.visible&&"waterfall"===r.type){i=!0;break}}i&&(u("waterfallmode"),u("waterfallgap",.2),u("waterfallgroupgap"))}},56905:($,K,e)=>{"use strict";var M=e(21572),I=e(5228),t=e(27630),T=e(71103).BADNUM,n=e(23038),i=e(99771).clearMinTextSize;$.exports=function(o,v,p,f){var l=o._fullLayout;i("waterfall",l),n.plot(o,v,p,f,{mode:l.waterfallmode,norm:l.waterfallmode,gap:l.waterfallgap,groupgap:l.waterfallgroupgap}),function u(r,o,v,p){var f=o.xaxis,l=o.yaxis;I.makeTraceGroups(p,v,"trace bars").each(function(y){var s=M.select(this),x=y[0].trace,h=I.ensureSingle(s,"g","lines");if(x.connector&&x.connector.visible){var g="h"===x.orientation,m=x.connector.mode,d=h.selectAll("g.line").data(I.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var A=d.size();d.each(function(b,c){if(c===A-1||b.cNext){var S=function a(r,o,v,p){var f=[],l=[],y=p?o:v,s=p?v:o;return f[0]=y.c2p(r.s0,!0),l[0]=s.c2p(r.p0,!0),f[1]=y.c2p(r.s1,!0),l[1]=s.c2p(r.p1,!0),f[2]=y.c2p(r.nextS0,!0),l[2]=s.c2p(r.nextP0,!0),p?[f,l]:[l,f]}(b,f,l,g),w=S[0],E=S[1],P="";w[0]!==T&&E[0]!==T&&w[1]!==T&&E[1]!==T&&("spanning"===m&&!b.isSum&&c>0&&(P+=g?"M"+w[0]+","+E[1]+"V"+E[0]:"M"+w[1]+","+E[0]+"H"+w[0]),"between"!==m&&(b.isSum||c<A-1)&&(P+=g?"M"+w[1]+","+E[0]+"V"+E[1]:"M"+w[0]+","+E[1]+"H"+w[1]),w[2]!==T&&E[2]!==T&&(P+=g?"M"+w[1]+","+E[1]+"V"+E[2]:"M"+w[1]+","+E[1]+"H"+w[2])),""===P&&(P="M0,0Z"),I.ensureSingle(M.select(this),"path").attr("d",P).call(t.setClipUrl,o.layerClipId,r)}})}else h.remove()})}(o,v,p,f)}},59969:($,K,e)=>{"use strict";var M=e(21572),I=e(27630),t=e(8416),T=e(49431).DESELECTDIM,n=e(82563),i=e(99771).resizeText,u=n.styleTextPoints;$.exports={style:function a(r,o,v){var p=v||M.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");i(r,p,"waterfall"),p.style("opacity",function(f){return f[0].trace.opacity}),p.each(function(f){var l=M.select(this),y=f[0].trace;l.selectAll(".point > path").each(function(s){if(!s.isBlank){var x=y[s.dir].marker;M.select(this).call(t.fill,x.color).call(t.stroke,x.line.color).call(I.dashLine,x.line.dash,x.line.width).style("opacity",y.selectedpoints&&!s.selected?T:1)}}),u(l,y,r),l.selectAll(".lines").each(function(){var s=y.connector.line;I.lineGroupStyle(M.select(this).selectAll("path"),s.width,s.color,s.dash)})})}}},11762:($,K,e)=>{"use strict";var M=e(91464),I=e(5228),t=e(55773),T=e(98026).p,n=e(71103).BADNUM;K.moduleType="transform",K.name="aggregate";var i=K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this aggregate transform is enabled or disabled."].join(" ")},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the grouping target to which the aggregation is applied.","Data points with matching group values will be coalesced into","one point, using the supplied aggregation functions to reduce data","in other data arrays.","If a string, `groups` is assumed to be a reference to a data array","in the parent trace object.","To aggregate by nested variables, use *.* to access them.","For example, set `groups` to *marker.color* to aggregate","about the marker color array.","If an array, `groups` is itself the data array by which we aggregate."].join(" ")},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc",description:["A reference to the data array in the parent trace to aggregate.","To aggregate by nested variables, use *.* to access them.","For example, set `groups` to *marker.color* to aggregate","over the marker color array.","The referenced array must already exist, unless `func` is *count*,","and each array may only be referenced once."].join(" ")},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc",description:["Sets the aggregation function.","All values from the linked `target`, corresponding to the same value","in the `groups` array, are collected and reduced by this function.","*count* is simply the number of values in the `groups` array, so does","not even require the linked array to exist. *first* (*last*) is just","the first (last) linked value.","Invalid values are ignored, so for example in *avg* they do not","contribute to either the numerator or the denominator.","Any data type (numeric, date, category) may be aggregated with any","function, even though in certain cases it is unlikely to make sense,","for example a sum of dates or average of categories.","*median* will return the average of the two central values if there is","an even count. *mode* will return the first value to reach the maximum","count, in case of a tie.","*change* will return the difference between the first and last linked values.","*range* will return the difference between the min and max linked values."].join(" ")},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc",description:["*stddev* supports two formula variants: *sample* (normalize by N-1)","and *population* (normalize by N)."].join(" ")},enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this aggregation function is enabled or disabled."].join(" ")},editType:"calc"},editType:"calc"},u=i.aggregations;function a(f,l,y,s){if(s.enabled){for(var x=s.target,h=I.nestedProperty(l,x),g=h.get(),d=function r(f,l){var y=f.func,s=l.d2c,x=l.c2d;switch(y){case"count":return o;case"first":return v;case"last":return p;case"sum":return function(h,g){for(var m=0,d=0;d<g.length;d++){var A=s(h[g[d]]);A!==n&&(m+=A)}return x(m)};case"avg":return function(h,g){for(var m=0,d=0,A=0;A<g.length;A++){var b=s(h[g[A]]);b!==n&&(m+=b,d++)}return d?x(m/d):n};case"min":return function(h,g){for(var m=1/0,d=0;d<g.length;d++){var A=s(h[g[d]]);A!==n&&(m=Math.min(m,A))}return m===1/0?n:x(m)};case"max":return function(h,g){for(var m=-1/0,d=0;d<g.length;d++){var A=s(h[g[d]]);A!==n&&(m=Math.max(m,A))}return m===-1/0?n:x(m)};case"range":return function(h,g){for(var m=1/0,d=-1/0,A=0;A<g.length;A++){var b=s(h[g[A]]);b!==n&&(m=Math.min(m,b),d=Math.max(d,b))}return d===-1/0||m===1/0?n:x(d-m)};case"change":return function(h,g){var m=s(h[g[0]]),d=s(h[g[g.length-1]]);return m===n||d===n?n:x(d-m)};case"median":return function(h,g){for(var m=[],d=0;d<g.length;d++){var A=s(h[g[d]]);A!==n&&m.push(A)}if(!m.length)return n;m.sort(I.sorterAsc);var b=(m.length-1)/2;return x((m[Math.floor(b)]+m[Math.ceil(b)])/2)};case"mode":return function(h,g){for(var m={},d=0,A=n,b=0;b<g.length;b++){var c=s(h[g[b]]);if(c!==n){var S=m[c]=(m[c]||0)+1;S>d&&(d=S,A=c)}}return d?x(A):n};case"rms":return function(h,g){for(var m=0,d=0,A=0;A<g.length;A++){var b=s(h[g[A]]);b!==n&&(m+=b*b,d++)}return d?x(Math.sqrt(m/d)):n};case"stddev":return function(h,g){var c,m=0,d=0,A=1,b=n;for(c=0;c<g.length&&b===n;c++)b=s(h[g[c]]);if(b===n)return n;for(;c<g.length;c++){var S=s(h[g[c]]);if(S!==n){var w=S-b;m+=w,d+=w*w,A++}}var E="sample"===f.funcmode?A-1:A;return E?Math.sqrt((d-m*m/A)/E):0}}}(s,M.getDataConversions(f,l,x,g)),A=new Array(y.length),b=0;b<y.length;b++)A[b]=d(g,y[b]);h.set(A),"count"===s.func&&I.pushUnique(l._arrayAttrs,x)}}function o(f,l){return l.length}function v(f,l){return f[l[0]]}function p(f,l){return f[l[l.length-1]]}K.supplyDefaults=function(f,l){var s,y={};function x(R,F){return I.coerce(f,y,i,R,F)}if(!x("enabled"))return y;var g=t.findArrayAttributes(l),m={};for(s=0;s<g.length;s++)m[g[s]]=1;var d=x("groups");if(!Array.isArray(d)){if(!m[d])return y.enabled=!1,y;m[d]=0}var c,A=f.aggregations||[],b=y.aggregations=new Array(A.length);function S(R,F){return I.coerce(A[s],c,u,R,F)}for(s=0;s<A.length;s++){c={_index:s};var w=S("target"),E=S("func");S("enabled")&&w&&(m[w]||"count"===E&&void 0===m[w])?("stddev"===E&&S("funcmode"),m[w]=0,b[s]=c):b[s]={enabled:!1,_index:s}}for(s=0;s<g.length;s++)m[g[s]]&&b.push({target:g[s],func:u.func.dflt,enabled:!0,_index:-1});return y},K.calcTransform=function(f,l,y){if(y.enabled){var s=y.groups,x=I.getTargetArray(l,{target:s});if(x){var h,g,m,d,A={},b={},c=[],S=T(l.transforms,y),w=x.length;for(l._length&&(w=Math.min(w,l._length)),h=0;h<w;h++)void 0===(m=A[g=x[h]])?(A[g]=c.length,d=[h],c.push(d),b[A[g]]=S(h)):(c[m].push(h),b[A[g]]=(b[A[g]]||[]).concat(S(h)));y._indexToPoints=b;var E=y.aggregations;for(h=0;h<E.length;h++)a(f,l,c,E[h]);"string"==typeof s&&a(f,l,c,{target:s,func:"first",enabled:!0}),l._length=c.length}}}},8987:($,K,e)=>{"use strict";var M=e(5228),I=e(97799),t=e(91464),T=e(98026).p,n=e(80797),i=n.COMPARISON_OPS,u=n.INTERVAL_OPS,a=n.SET_OPS;K.moduleType="transform",K.name="filter",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this filter transform is enabled or disabled."].join(" ")},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the filter target by which the filter is applied.","If a string, `target` is assumed to be a reference to a data array","in the parent trace object.","To filter about nested variables, use *.* to access them.","For example, set `target` to *marker.color* to filter","about the marker color array.","If an array, `target` is then the data array by which the filter is applied."].join(" ")},operation:{valType:"enumerated",values:[].concat(i).concat(u).concat(a),dflt:"=",editType:"calc",description:["Sets the filter operation.","*=* keeps items equal to `value`","*!=* keeps items not equal to `value`","*<* keeps items less than `value`","*<=* keeps items less than or equal to `value`","*>* keeps items greater than `value`","*>=* keeps items greater than or equal to `value`","*[]* keeps items inside `value[0]` to `value[1]` including both bounds","*()* keeps items inside `value[0]` to `value[1]` excluding both bounds","*[)* keeps items inside `value[0]` to `value[1]` including `value[0]` but excluding `value[1]","*(]* keeps items inside `value[0]` to `value[1]` excluding `value[0]` but including `value[1]","*][* keeps items outside `value[0]` to `value[1]` and equal to both bounds","*)(* keeps items outside `value[0]` to `value[1]`","*](* keeps items outside `value[0]` to `value[1]` and equal to `value[0]`","*)[* keeps items outside `value[0]` to `value[1]` and equal to `value[1]`","*{}* keeps items present in a set of values","*}{* keeps items not present in a set of values"].join(" ")},value:{valType:"any",dflt:0,editType:"calc",description:["Sets the value or values by which to filter.","Values are expected to be in the same type as the data linked","to `target`.","When `operation` is set to one of","the comparison values ("+i+")","`value` is expected to be a number or a string.","When `operation` is set to one of the interval values","("+u+")","`value` is expected to be 2-item array where the first item","is the lower bound and the second item is the upper bound.","When `operation`, is set to one of the set values","("+a+")","`value` is expected to be an array with as many items as","the desired set elements."].join(" ")},preservegaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps in data arrays produced by the filter operation","are preserved.","Setting this to *true* might be useful when plotting a line chart","with `connectgaps` set to *false*."].join(" ")},editType:"calc"},K.supplyDefaults=function(o){var v={};function p(s,x){return M.coerce(o,v,K.attributes,s,x)}if(p("enabled")){var l=p("target");if(M.isArrayOrTypedArray(l)&&0===l.length)return v.enabled=!1,v;p("preservegaps"),p("operation"),p("value");var y=I.getComponentMethod("calendars","handleDefaults");y(o,v,"valuecalendar",null),y(o,v,"targetcalendar",null)}return v},K.calcTransform=function(o,v,p){if(p.enabled){var f=M.getTargetArray(v,p);if(f){var l=p.target,y=f.length;v._length&&(y=Math.min(y,v._length));var s=p.targetcalendar,x=v._arrayAttrs,h=p.preservegaps;if("string"==typeof l){var g=M.nestedProperty(v,l+"calendar").get();g&&(s=g)}var w,E,d=function r(o,v,p){var f=o.operation,l=o.value,y=M.isArrayOrTypedArray(l);function s(m){return-1!==m.indexOf(f)}var g,x=function(m){return v(m,0,o.valuecalendar)},h=function(m){return v(m,0,p)};switch(s(i)?g=x(y?l[0]:l):s(u)?g=y?[x(l[0]),x(l[1])]:[x(l),x(l)]:s(a)&&(g=y?l.map(x):[x(l)]),f){case"=":return function(m){return h(m)===g};case"!=":return function(m){return h(m)!==g};case"<":return function(m){return h(m)<g};case"<=":return function(m){return h(m)<=g};case">":return function(m){return h(m)>g};case">=":return function(m){return h(m)>=g};case"[]":return function(m){var d=h(m);return d>=g[0]&&d<=g[1]};case"()":return function(m){var d=h(m);return d>g[0]&&d<g[1]};case"[)":return function(m){var d=h(m);return d>=g[0]&&d<g[1]};case"(]":return function(m){var d=h(m);return d>g[0]&&d<=g[1]};case"][":return function(m){var d=h(m);return d<=g[0]||d>=g[1]};case")(":return function(m){var d=h(m);return d<g[0]||d>g[1]};case"](":return function(m){var d=h(m);return d<=g[0]||d>g[1]};case")[":return function(m){var d=h(m);return d<g[0]||d>=g[1]};case"{}":return function(m){return-1!==g.indexOf(h(m))};case"}{":return function(m){return-1===g.indexOf(h(m))}}}(p,t.getDataToCoordFunc(o,v,l,f),s),A={},b={},c=0;h?(w=function(_){A[_.astr]=M.extendDeep([],_.get()),_.set(new Array(y))},E=function(_,z){var D=A[_.astr][z];_.get()[z]=D}):(w=function(_){A[_.astr]=M.extendDeep([],_.get()),_.set([])},E=function(_,z){var D=A[_.astr][z];_.get().push(D)}),S(w);for(var P=T(v.transforms,p),R=0;R<y;R++){d(f[R])?(S(E,R),b[c++]=P(R)):h&&c++}p._indexToPoints=b,v._length=c}}function S(_,z){for(var D=0;D<x.length;D++){_(M.nestedProperty(v,x[D]),z)}}}},2903:($,K,e)=>{"use strict";var M=e(5228),I=e(55773),t=e(31556),T=e(98026).p;function n(i,u){var a,r,o,v,p,f,l,y,s,x,h=u.transform,g=u.transformIndex,m=i.transforms[g].groups,d=T(i.transforms,h);if(!M.isArrayOrTypedArray(m)||0===m.length)return[i];var A=M.filterUnique(m),b=new Array(A.length),c=m.length,S=I.findArrayAttributes(i),w=h.styles||[],E={};for(a=0;a<w.length;a++)E[w[a].target]=w[a].value;h.styles&&(x=M.keyedContainer(h,"styles","target","value.name"));var P={},R={};for(a=0;a<A.length;a++){P[f=A[a]]=a,R[f]=0,(l=b[a]=M.extendDeepNoArrays({},i))._group=f,l.transforms[g]._indexToPoints={};var F=null;for(x&&(F=x.get(f)),l.name=F||""===F?F:M.templateString(h.nameformat,{trace:i.name,group:f}),y=l.transforms,l.transforms=[],r=0;r<y.length;r++)l.transforms[r]=M.extendDeepNoArrays({},y[r]);for(r=0;r<S.length;r++)M.nestedProperty(l,S[r]).set([])}for(o=0;o<S.length;o++){for(v=S[o],r=0,s=[];r<A.length;r++)s[r]=M.nestedProperty(b[r],v).get();for(p=M.nestedProperty(i,v).get(),r=0;r<c;r++)s[P[m[r]]].push(p[r])}for(r=0;r<c;r++){(l=b[P[m[r]]]).transforms[g]._indexToPoints[R[m[r]]]=d(r),R[m[r]]++}for(a=0;a<A.length;a++)f=A[a],l=b[a],t.clearExpandedTraceDefaultColors(l),l=M.extendDeepNoArrays(l,E[f]||{});return b}K.moduleType="transform",K.name="groupby",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this group-by transform is enabled or disabled."].join(" ")},groups:{valType:"data_array",dflt:[],editType:"calc",description:["Sets the groups in which the trace data will be split.","For example, with `x` set to *[1, 2, 3, 4]* and","`groups` set to *['a', 'b', 'a', 'b']*,","the groupby transform with split in one trace","with `x` [1, 3] and one trace with `x` [2, 4]."].join(" ")},nameformat:{valType:"string",editType:"calc",description:["Pattern by which grouped traces are named. If only one trace is present,",'defaults to the group name (`"%{group}"`), otherwise defaults to the group name','with trace name (`"%{group} (%{trace})"`). Available escape sequences are `%{group}`, which',"inserts the group name, and `%{trace}`, which inserts the trace name. If grouping","GDP data by country when more than one trace is present, for example, the",'default "%{group} (%{trace})" would return "Monaco (GDP per capita)".'].join(" ")},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc",description:["The group value which receives these styles."].join(" ")},value:{valType:"any",dflt:{},editType:"calc",description:["Sets each group styles.","For example, with `groups` set to *['a', 'b', 'a', 'b']*","and `styles` set to *[{target: 'a', value: { marker: { color: 'red' } }}]","marker points in group *'a'* will be drawn in red."].join(" "),_compareAsJSON:!0},editType:"calc"},editType:"calc"},K.supplyDefaults=function(i,u,a){var r,o={};function v(x,h){return M.coerce(i,o,K.attributes,x,h)}if(!v("enabled"))return o;v("groups"),v("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var f=i.styles,l=o.styles=[];if(f)for(r=0;r<f.length;r++){var y=l[r]={};M.coerce(f[r],l[r],K.attributes.styles,"target");var s=M.coerce(f[r],l[r],K.attributes.styles,"value");M.isPlainObject(s)?y.value=M.extendDeep({},s):s&&delete y.value}return o},K.transform=function(i,u){var a,r,o,v=[];for(r=0;r<i.length;r++)for(a=n(i[r],u),o=0;o<a.length;o++)v.push(a[o]);return v}},98026:($,K)=>{"use strict";K.p=function(e,M){for(var I,t,T=0;T<e.length&&(I=e[T])!==M;T++)!I._indexToPoints||!1===I.enabled||(t=I._indexToPoints);return t?function(i){return t[i]}:function(i){return[i]}}},48684:($,K,e)=>{"use strict";var M=e(5228),I=e(91464),t=e(98026).p,T=e(71103).BADNUM;K.moduleType="transform",K.name="sort",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this sort transform is enabled or disabled."].join(" ")},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the target by which the sort transform is applied.","If a string, *target* is assumed to be a reference to a data array","in the parent trace object.","To sort about nested variables, use *.* to access them.","For example, set `target` to *marker.size* to sort","about the marker size array.","If an array, *target* is then the data array by which","the sort transform is applied."].join(" ")},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc",description:["Sets the sort transform order."].join(" ")},editType:"calc"},K.supplyDefaults=function(u){var a={};function r(v,p){return M.coerce(u,a,K.attributes,v,p)}return r("enabled")&&(r("target"),r("order")),a},K.calcTransform=function(u,a,r){if(r.enabled){var o=M.getTargetArray(a,r);if(o){var v=r.target,p=o.length;a._length&&(p=Math.min(p,a._length));var h,g,f=a._arrayAttrs,y=function n(u,a,r,o){var f,v=new Array(o),p=new Array(o);for(f=0;f<o;f++)v[f]={v:a[f],i:f};for(v.sort(function i(u,a){switch(u.order){case"ascending":return function(r,o){var v=a(r.v),p=a(o.v);return v===T?1:p===T?-1:v-p};case"descending":return function(r,o){var v=a(r.v),p=a(o.v);return v===T?1:p===T?-1:p-v}}}(u,r)),f=0;f<o;f++)p[f]=v[f].i;return p}(r,o,I.getDataToCoordFunc(u,a,v,o),p),s=t(a.transforms,r),x={};for(h=0;h<f.length;h++){var m=M.nestedProperty(a,f[h]),d=m.get(),A=new Array(p);for(g=0;g<p;g++)A[g]=d[y[g]];m.set(A)}for(g=0;g<p;g++)x[g]=s(y[g]);r._indexToPoints=x,a._length=p}}}},60994:($,K)=>{"use strict";K.version="2.28.0"},17745:$=>{self,$.exports=function(){var K={7386:function(t,T,n){t.exports={alpha_shape:n(2350),convex_hull:n(5537),delaunay_triangulate:n(4419),gl_cone3d:n(1140),gl_error3d:n(3110),gl_heatmap2d:n(6386),gl_line3d:n(6086),gl_mesh3d:n(8116),gl_plot2d:n(2117),gl_plot3d:n(1059),gl_pointcloud2d:n(8271),gl_scatter3d:n(2182),gl_select_box:n(6623),gl_spikes2d:n(3050),gl_streamtube3d:n(7307),gl_surface3d:n(3754),ndarray:n(5050),ndarray_linear_interpolate:n(3581)}},2146:function(t,T,n){"use strict";function u(Se,pe){if(!(Se instanceof pe))throw new TypeError("Cannot call a class as a function")}function a(Se,pe){for(var ge=0;ge<pe.length;ge++){var Oe=pe[ge];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(Se,Oe.key,Oe)}}function r(Se,pe,ge){return pe&&a(Se.prototype,pe),ge&&a(Se,ge),Object.defineProperty(Se,"prototype",{writable:!1}),Se}function o(Se,pe){if("function"!=typeof pe&&null!==pe)throw new TypeError("Super expression must either be null or a function");Se.prototype=Object.create(pe&&pe.prototype,{constructor:{value:Se,writable:!0,configurable:!0}}),Object.defineProperty(Se,"prototype",{writable:!1}),pe&&v(Se,pe)}function v(Se,pe){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Oe,we){return Oe.__proto__=we,Oe})(Se,pe)}function p(Se){var pe=y();return function(){var we,Oe=s(Se);if(pe){var He=s(this).constructor;we=Reflect.construct(Oe,arguments,He)}else we=Oe.apply(this,arguments);return f(this,we)}}function f(Se,pe){if(pe&&("object"===x(pe)||"function"==typeof pe))return pe;if(void 0!==pe)throw new TypeError("Derived constructors may only return object or undefined");return l(Se)}function l(Se){if(void 0===Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(Se){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)})(Se)}function x(Se){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(Se)}var h=n(3910),g=n(3187),m="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;T.lW=c,T.h2=50;var d=2147483647;function A(){try{var Se=new Uint8Array(1),pe={foo:function(){return 42}};return Object.setPrototypeOf(pe,Uint8Array.prototype),Object.setPrototypeOf(Se,pe),42===Se.foo()}catch{return!1}}function b(Se){if(Se>d)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var pe=new Uint8Array(Se);return Object.setPrototypeOf(pe,c.prototype),pe}function c(Se,pe,ge){if("number"==typeof Se){if("string"==typeof pe)throw new TypeError('The "string" argument must be of type string. Received type number');return P(Se)}return S(Se,pe,ge)}function S(Se,pe,ge){if("string"==typeof Se)return R(Se,pe);if(ArrayBuffer.isView(Se))return _(Se);if(null==Se)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(Se));if(zt(Se,ArrayBuffer)||Se&&zt(Se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(zt(Se,SharedArrayBuffer)||Se&&zt(Se.buffer,SharedArrayBuffer)))return z(Se,pe,ge);if("number"==typeof Se)throw new TypeError('The "value" argument must not be of type number. Received type number');var Oe=Se.valueOf&&Se.valueOf();if(null!=Oe&&Oe!==Se)return c.from(Oe,pe,ge);var we=D(Se);if(we)return we;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Se[Symbol.toPrimitive])return c.from(Se[Symbol.toPrimitive]("string"),pe,ge);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(Se))}function w(Se){if("number"!=typeof Se)throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function E(Se,pe,ge){return w(Se),Se<=0?b(Se):void 0!==pe?"string"==typeof ge?b(Se).fill(pe,ge):b(Se).fill(pe):b(Se)}function P(Se){return w(Se),b(Se<0?0:0|k(Se))}function R(Se,pe){if(("string"!=typeof pe||""===pe)&&(pe="utf8"),!c.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var ge=0|U(Se,pe),Oe=b(ge),we=Oe.write(Se,pe);return we!==ge&&(Oe=Oe.slice(0,we)),Oe}function F(Se){for(var pe=Se.length<0?0:0|k(Se.length),ge=b(pe),Oe=0;Oe<pe;Oe+=1)ge[Oe]=255&Se[Oe];return ge}function _(Se){if(zt(Se,Uint8Array)){var pe=new Uint8Array(Se);return z(pe.buffer,pe.byteOffset,pe.byteLength)}return F(Se)}function z(Se,pe,ge){if(pe<0||Se.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<pe+(ge||0))throw new RangeError('"length" is outside of buffer bounds');var Oe;return Oe=void 0===pe&&void 0===ge?new Uint8Array(Se):void 0===ge?new Uint8Array(Se,pe):new Uint8Array(Se,pe,ge),Object.setPrototypeOf(Oe,c.prototype),Oe}function D(Se){if(c.isBuffer(Se)){var pe=0|k(Se.length),ge=b(pe);return 0===ge.length||Se.copy(ge,0,0,pe),ge}return void 0!==Se.length?"number"!=typeof Se.length||St(Se.length)?b(0):F(Se):"Buffer"===Se.type&&Array.isArray(Se.data)?F(Se.data):void 0}function k(Se){if(Se>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|Se}function U(Se,pe){if(c.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||zt(Se,ArrayBuffer))return Se.byteLength;if("string"!=typeof Se)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+x(Se));var ge=Se.length,Oe=arguments.length>2&&!0===arguments[2];if(!Oe&&0===ge)return 0;for(var we=!1;;)switch(pe){case"ascii":case"latin1":case"binary":return ge;case"utf8":case"utf-8":return nt(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ge;case"hex":return ge>>>1;case"base64":return Bt(Se).length;default:if(we)return Oe?-1:nt(Se).length;pe=(""+pe).toLowerCase(),we=!0}}function H(Se,pe,ge){var Oe=!1;if((void 0===pe||pe<0)&&(pe=0),pe>this.length||((void 0===ge||ge>this.length)&&(ge=this.length),ge<=0)||(ge>>>=0)<=(pe>>>=0))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return re(this,pe,ge);case"utf8":case"utf-8":return Y(this,pe,ge);case"ascii":return J(this,pe,ge);case"latin1":case"binary":return ue(this,pe,ge);case"base64":return V(this,pe,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,pe,ge);default:if(Oe)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),Oe=!0}}function j(Se,pe,ge){var Oe=Se[pe];Se[pe]=Se[ge],Se[ge]=Oe}function ee(Se,pe,ge,Oe,we){if(0===Se.length)return-1;if("string"==typeof ge?(Oe=ge,ge=0):ge>2147483647?ge=2147483647:ge<-2147483648&&(ge=-2147483648),St(ge=+ge)&&(ge=we?0:Se.length-1),ge<0&&(ge=Se.length+ge),ge>=Se.length){if(we)return-1;ge=Se.length-1}else if(ge<0){if(!we)return-1;ge=0}if("string"==typeof pe&&(pe=c.from(pe,Oe)),c.isBuffer(pe))return 0===pe.length?-1:W(Se,pe,ge,Oe,we);if("number"==typeof pe)return pe&=255,"function"==typeof Uint8Array.prototype.indexOf?we?Uint8Array.prototype.indexOf.call(Se,pe,ge):Uint8Array.prototype.lastIndexOf.call(Se,pe,ge):W(Se,[pe],ge,Oe,we);throw new TypeError("val must be string, number or Buffer")}function W(Se,pe,ge,Oe,we){var qe,He=1,Xe=Se.length,ut=pe.length;if(void 0!==Oe&&("ucs2"===(Oe=String(Oe).toLowerCase())||"ucs-2"===Oe||"utf16le"===Oe||"utf-16le"===Oe)){if(Se.length<2||pe.length<2)return-1;He=2,Xe/=2,ut/=2,ge/=2}function Ze(Pt,cr){return 1===He?Pt[cr]:Pt.readUInt16BE(cr*He)}if(we){var Dt=-1;for(qe=ge;qe<Xe;qe++)if(Ze(Se,qe)===Ze(pe,-1===Dt?0:qe-Dt)){if(-1===Dt&&(Dt=qe),qe-Dt+1===ut)return Dt*He}else-1!==Dt&&(qe-=qe-Dt),Dt=-1}else for(ge+ut>Xe&&(ge=Xe-ut),qe=ge;qe>=0;qe--){for(var Ft=!0,bt=0;bt<ut;bt++)if(Ze(Se,qe+bt)!==Ze(pe,bt)){Ft=!1;break}if(Ft)return qe}return-1}function B(Se,pe,ge,Oe){ge=Number(ge)||0;var we=Se.length-ge;Oe?(Oe=Number(Oe))>we&&(Oe=we):Oe=we;var Xe,He=pe.length;for(Oe>He/2&&(Oe=He/2),Xe=0;Xe<Oe;++Xe){var ut=parseInt(pe.substr(2*Xe,2),16);if(St(ut))return Xe;Se[ge+Xe]=ut}return Xe}function te(Se,pe,ge,Oe){return Rt(nt(pe,Se.length-ge),Se,ge,Oe)}function q(Se,pe,ge,Oe){return Rt(ct(pe),Se,ge,Oe)}function oe(Se,pe,ge,Oe){return Rt(Bt(pe),Se,ge,Oe)}function ie(Se,pe,ge,Oe){return Rt(mt(pe,Se.length-ge),Se,ge,Oe)}function V(Se,pe,ge){return 0===pe&&ge===Se.length?h.fromByteArray(Se):h.fromByteArray(Se.slice(pe,ge))}function Y(Se,pe,ge){ge=Math.min(Se.length,ge);for(var Oe=[],we=pe;we<ge;){var He=Se[we],Xe=null,ut=He>239?4:He>223?3:He>191?2:1;if(we+ut<=ge){var Ze=void 0,qe=void 0,Dt=void 0,Ft=void 0;switch(ut){case 1:He<128&&(Xe=He);break;case 2:128==(192&(Ze=Se[we+1]))&&(Ft=(31&He)<<6|63&Ze)>127&&(Xe=Ft);break;case 3:Ze=Se[we+1],qe=Se[we+2],128==(192&Ze)&&128==(192&qe)&&(Ft=(15&He)<<12|(63&Ze)<<6|63&qe)>2047&&(Ft<55296||Ft>57343)&&(Xe=Ft);break;case 4:Ze=Se[we+1],qe=Se[we+2],Dt=Se[we+3],128==(192&Ze)&&128==(192&qe)&&128==(192&Dt)&&(Ft=(15&He)<<18|(63&Ze)<<12|(63&qe)<<6|63&Dt)>65535&&Ft<1114112&&(Xe=Ft)}}null===Xe?(Xe=65533,ut=1):Xe>65535&&(Xe-=65536,Oe.push(Xe>>>10&1023|55296),Xe=56320|1023&Xe),Oe.push(Xe),we+=ut}return X(Oe)}c.TYPED_ARRAY_SUPPORT=A(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(Se,pe,ge){return S(Se,pe,ge)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(Se,pe,ge){return E(Se,pe,ge)},c.allocUnsafe=function(Se){return P(Se)},c.allocUnsafeSlow=function(Se){return P(Se)},c.isBuffer=function(pe){return null!=pe&&!0===pe._isBuffer&&pe!==c.prototype},c.compare=function(pe,ge){if(zt(pe,Uint8Array)&&(pe=c.from(pe,pe.offset,pe.byteLength)),zt(ge,Uint8Array)&&(ge=c.from(ge,ge.offset,ge.byteLength)),!c.isBuffer(pe)||!c.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===ge)return 0;for(var Oe=pe.length,we=ge.length,He=0,Xe=Math.min(Oe,we);He<Xe;++He)if(pe[He]!==ge[He]){Oe=pe[He],we=ge[He];break}return Oe<we?-1:we<Oe?1:0},c.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(pe,ge){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(0===pe.length)return c.alloc(0);var Oe;if(void 0===ge)for(ge=0,Oe=0;Oe<pe.length;++Oe)ge+=pe[Oe].length;var we=c.allocUnsafe(ge),He=0;for(Oe=0;Oe<pe.length;++Oe){var Xe=pe[Oe];if(zt(Xe,Uint8Array))He+Xe.length>we.length?(c.isBuffer(Xe)||(Xe=c.from(Xe)),Xe.copy(we,He)):Uint8Array.prototype.set.call(we,Xe,He);else{if(!c.isBuffer(Xe))throw new TypeError('"list" argument must be an Array of Buffers');Xe.copy(we,He)}He+=Xe.length}return we},c.byteLength=U,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var pe=this.length;if(pe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ge=0;ge<pe;ge+=2)j(this,ge,ge+1);return this},c.prototype.swap32=function(){var pe=this.length;if(pe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ge=0;ge<pe;ge+=4)j(this,ge,ge+3),j(this,ge+1,ge+2);return this},c.prototype.swap64=function(){var pe=this.length;if(pe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ge=0;ge<pe;ge+=8)j(this,ge,ge+7),j(this,ge+1,ge+6),j(this,ge+2,ge+5),j(this,ge+3,ge+4);return this},c.prototype.toString=function(){var pe=this.length;return 0===pe?"":0===arguments.length?Y(this,0,pe):H.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(pe){if(!c.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe||0===c.compare(this,pe)},c.prototype.inspect=function(){var pe="",ge=T.h2;return pe=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(pe+=" ... "),"<Buffer "+pe+">"},m&&(c.prototype[m]=c.prototype.inspect),c.prototype.compare=function(pe,ge,Oe,we,He){if(zt(pe,Uint8Array)&&(pe=c.from(pe,pe.offset,pe.byteLength)),!c.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+x(pe));if(void 0===ge&&(ge=0),void 0===Oe&&(Oe=pe?pe.length:0),void 0===we&&(we=0),void 0===He&&(He=this.length),ge<0||Oe>pe.length||we<0||He>this.length)throw new RangeError("out of range index");if(we>=He&&ge>=Oe)return 0;if(we>=He)return-1;if(ge>=Oe)return 1;if(this===pe)return 0;for(var Xe=(He>>>=0)-(we>>>=0),ut=(Oe>>>=0)-(ge>>>=0),Ze=Math.min(Xe,ut),qe=this.slice(we,He),Dt=pe.slice(ge,Oe),Ft=0;Ft<Ze;++Ft)if(qe[Ft]!==Dt[Ft]){Xe=qe[Ft],ut=Dt[Ft];break}return Xe<ut?-1:ut<Xe?1:0},c.prototype.includes=function(pe,ge,Oe){return-1!==this.indexOf(pe,ge,Oe)},c.prototype.indexOf=function(pe,ge,Oe){return ee(this,pe,ge,Oe,!0)},c.prototype.lastIndexOf=function(pe,ge,Oe){return ee(this,pe,ge,Oe,!1)},c.prototype.write=function(pe,ge,Oe,we){if(void 0===ge)we="utf8",Oe=this.length,ge=0;else if(void 0===Oe&&"string"==typeof ge)we=ge,Oe=this.length,ge=0;else{if(!isFinite(ge))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ge>>>=0,isFinite(Oe)?(Oe>>>=0,void 0===we&&(we="utf8")):(we=Oe,Oe=void 0)}var He=this.length-ge;if((void 0===Oe||Oe>He)&&(Oe=He),pe.length>0&&(Oe<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");for(var Xe=!1;;)switch(we){case"hex":return B(this,pe,ge,Oe);case"utf8":case"utf-8":return te(this,pe,ge,Oe);case"ascii":case"latin1":case"binary":return q(this,pe,ge,Oe);case"base64":return oe(this,pe,ge,Oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,pe,ge,Oe);default:if(Xe)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),Xe=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ae=4096;function X(Se){var pe=Se.length;if(pe<=ae)return String.fromCharCode.apply(String,Se);for(var ge="",Oe=0;Oe<pe;)ge+=String.fromCharCode.apply(String,Se.slice(Oe,Oe+=ae));return ge}function J(Se,pe,ge){var Oe="";ge=Math.min(Se.length,ge);for(var we=pe;we<ge;++we)Oe+=String.fromCharCode(127&Se[we]);return Oe}function ue(Se,pe,ge){var Oe="";ge=Math.min(Se.length,ge);for(var we=pe;we<ge;++we)Oe+=String.fromCharCode(Se[we]);return Oe}function re(Se,pe,ge){var Oe=Se.length;(!pe||pe<0)&&(pe=0),(!ge||ge<0||ge>Oe)&&(ge=Oe);for(var we="",He=pe;He<ge;++He)we+=Xt[Se[He]];return we}function ne(Se,pe,ge){for(var Oe=Se.slice(pe,ge),we="",He=0;He<Oe.length-1;He+=2)we+=String.fromCharCode(Oe[He]+256*Oe[He+1]);return we}function se(Se,pe,ge){if(Se%1!=0||Se<0)throw new RangeError("offset is not uint");if(Se+pe>ge)throw new RangeError("Trying to access beyond buffer length")}function de(Se,pe,ge,Oe,we,He){if(!c.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(pe>we||pe<He)throw new RangeError('"value" argument is out of bounds');if(ge+Oe>Se.length)throw new RangeError("Index out of range")}function be(Se,pe,ge,Oe,we){Ie(pe,Oe,we,Se,ge,7);var He=Number(pe&BigInt(4294967295));Se[ge++]=He,He>>=8,Se[ge++]=He,He>>=8,Se[ge++]=He,He>>=8,Se[ge++]=He;var Xe=Number(pe>>BigInt(32)&BigInt(4294967295));return Se[ge++]=Xe,Xe>>=8,Se[ge++]=Xe,Xe>>=8,Se[ge++]=Xe,Xe>>=8,Se[ge++]=Xe,ge}function De(Se,pe,ge,Oe,we){Ie(pe,Oe,we,Se,ge,7);var He=Number(pe&BigInt(4294967295));Se[ge+7]=He,He>>=8,Se[ge+6]=He,He>>=8,Se[ge+5]=He,He>>=8,Se[ge+4]=He;var Xe=Number(pe>>BigInt(32)&BigInt(4294967295));return Se[ge+3]=Xe,Xe>>=8,Se[ge+2]=Xe,Xe>>=8,Se[ge+1]=Xe,Xe>>=8,Se[ge]=Xe,ge+8}function _e(Se,pe,ge,Oe,we,He){if(ge+Oe>Se.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("Index out of range")}function Ce(Se,pe,ge,Oe,we){return pe=+pe,ge>>>=0,we||_e(Se,pe,ge,4,34028234663852886e22,-34028234663852886e22),g.write(Se,pe,ge,Oe,23,4),ge+4}function Le(Se,pe,ge,Oe,we){return pe=+pe,ge>>>=0,we||_e(Se,pe,ge,8,17976931348623157e292,-17976931348623157e292),g.write(Se,pe,ge,Oe,52,8),ge+8}c.prototype.slice=function(pe,ge){var Oe=this.length;(pe=~~pe)<0?(pe+=Oe)<0&&(pe=0):pe>Oe&&(pe=Oe),(ge=void 0===ge?Oe:~~ge)<0?(ge+=Oe)<0&&(ge=0):ge>Oe&&(ge=Oe),ge<pe&&(ge=pe);var we=this.subarray(pe,ge);return Object.setPrototypeOf(we,c.prototype),we},c.prototype.readUintLE=c.prototype.readUIntLE=function(pe,ge,Oe){pe>>>=0,ge>>>=0,Oe||se(pe,ge,this.length);for(var we=this[pe],He=1,Xe=0;++Xe<ge&&(He*=256);)we+=this[pe+Xe]*He;return we},c.prototype.readUintBE=c.prototype.readUIntBE=function(pe,ge,Oe){pe>>>=0,ge>>>=0,Oe||se(pe,ge,this.length);for(var we=this[pe+--ge],He=1;ge>0&&(He*=256);)we+=this[pe+--ge]*He;return we},c.prototype.readUint8=c.prototype.readUInt8=function(pe,ge){return pe>>>=0,ge||se(pe,1,this.length),this[pe]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(pe,ge){return pe>>>=0,ge||se(pe,2,this.length),this[pe]|this[pe+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(pe,ge){return pe>>>=0,ge||se(pe,2,this.length),this[pe]<<8|this[pe+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(pe,ge){return pe>>>=0,ge||se(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+16777216*this[pe+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(pe,ge){return pe>>>=0,ge||se(pe,4,this.length),16777216*this[pe]+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},c.prototype.readBigUInt64LE=Mt(function(pe){Qe(pe>>>=0,"offset");var ge=this[pe],Oe=this[pe+7];(void 0===ge||void 0===Oe)&&at(pe,this.length-8);var we=ge+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24),He=this[++pe]+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+Oe*Math.pow(2,24);return BigInt(we)+(BigInt(He)<<BigInt(32))}),c.prototype.readBigUInt64BE=Mt(function(pe){Qe(pe>>>=0,"offset");var ge=this[pe],Oe=this[pe+7];(void 0===ge||void 0===Oe)&&at(pe,this.length-8);var we=ge*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe],He=this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+Oe;return(BigInt(we)<<BigInt(32))+BigInt(He)}),c.prototype.readIntLE=function(pe,ge,Oe){pe>>>=0,ge>>>=0,Oe||se(pe,ge,this.length);for(var we=this[pe],He=1,Xe=0;++Xe<ge&&(He*=256);)we+=this[pe+Xe]*He;return we>=(He*=128)&&(we-=Math.pow(2,8*ge)),we},c.prototype.readIntBE=function(pe,ge,Oe){pe>>>=0,ge>>>=0,Oe||se(pe,ge,this.length);for(var we=ge,He=1,Xe=this[pe+--we];we>0&&(He*=256);)Xe+=this[pe+--we]*He;return Xe>=(He*=128)&&(Xe-=Math.pow(2,8*ge)),Xe},c.prototype.readInt8=function(pe,ge){return pe>>>=0,ge||se(pe,1,this.length),128&this[pe]?-1*(255-this[pe]+1):this[pe]},c.prototype.readInt16LE=function(pe,ge){pe>>>=0,ge||se(pe,2,this.length);var Oe=this[pe]|this[pe+1]<<8;return 32768&Oe?4294901760|Oe:Oe},c.prototype.readInt16BE=function(pe,ge){pe>>>=0,ge||se(pe,2,this.length);var Oe=this[pe+1]|this[pe]<<8;return 32768&Oe?4294901760|Oe:Oe},c.prototype.readInt32LE=function(pe,ge){return pe>>>=0,ge||se(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},c.prototype.readInt32BE=function(pe,ge){return pe>>>=0,ge||se(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},c.prototype.readBigInt64LE=Mt(function(pe){Qe(pe>>>=0,"offset");var ge=this[pe],Oe=this[pe+7];(void 0===ge||void 0===Oe)&&at(pe,this.length-8);var we=this[pe+4]+this[pe+5]*Math.pow(2,8)+this[pe+6]*Math.pow(2,16)+(Oe<<24);return(BigInt(we)<<BigInt(32))+BigInt(ge+this[++pe]*Math.pow(2,8)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,24))}),c.prototype.readBigInt64BE=Mt(function(pe){Qe(pe>>>=0,"offset");var ge=this[pe],Oe=this[pe+7];(void 0===ge||void 0===Oe)&&at(pe,this.length-8);var we=(ge<<24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+this[++pe];return(BigInt(we)<<BigInt(32))+BigInt(this[++pe]*Math.pow(2,24)+this[++pe]*Math.pow(2,16)+this[++pe]*Math.pow(2,8)+Oe)}),c.prototype.readFloatLE=function(pe,ge){return pe>>>=0,ge||se(pe,4,this.length),g.read(this,pe,!0,23,4)},c.prototype.readFloatBE=function(pe,ge){return pe>>>=0,ge||se(pe,4,this.length),g.read(this,pe,!1,23,4)},c.prototype.readDoubleLE=function(pe,ge){return pe>>>=0,ge||se(pe,8,this.length),g.read(this,pe,!0,52,8)},c.prototype.readDoubleBE=function(pe,ge){return pe>>>=0,ge||se(pe,8,this.length),g.read(this,pe,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(pe,ge,Oe,we){pe=+pe,ge>>>=0,Oe>>>=0,we||de(this,pe,ge,Oe,Math.pow(2,8*Oe)-1,0);var Xe=1,ut=0;for(this[ge]=255&pe;++ut<Oe&&(Xe*=256);)this[ge+ut]=pe/Xe&255;return ge+Oe},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(pe,ge,Oe,we){pe=+pe,ge>>>=0,Oe>>>=0,we||de(this,pe,ge,Oe,Math.pow(2,8*Oe)-1,0);var Xe=Oe-1,ut=1;for(this[ge+Xe]=255&pe;--Xe>=0&&(ut*=256);)this[ge+Xe]=pe/ut&255;return ge+Oe},c.prototype.writeUint8=c.prototype.writeUInt8=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,1,255,0),this[ge]=255&pe,ge+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,2,65535,0),this[ge]=255&pe,this[ge+1]=pe>>>8,ge+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,2,65535,0),this[ge]=pe>>>8,this[ge+1]=255&pe,ge+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,4,4294967295,0),this[ge+3]=pe>>>24,this[ge+2]=pe>>>16,this[ge+1]=pe>>>8,this[ge]=255&pe,ge+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,4,4294967295,0),this[ge]=pe>>>24,this[ge+1]=pe>>>16,this[ge+2]=pe>>>8,this[ge+3]=255&pe,ge+4},c.prototype.writeBigUInt64LE=Mt(function(pe){return be(this,pe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Mt(function(pe){return De(this,pe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(pe,ge,Oe,we){if(pe=+pe,ge>>>=0,!we){var He=Math.pow(2,8*Oe-1);de(this,pe,ge,Oe,He-1,-He)}var Xe=0,ut=1,Ze=0;for(this[ge]=255&pe;++Xe<Oe&&(ut*=256);)pe<0&&0===Ze&&0!==this[ge+Xe-1]&&(Ze=1),this[ge+Xe]=(pe/ut>>0)-Ze&255;return ge+Oe},c.prototype.writeIntBE=function(pe,ge,Oe,we){if(pe=+pe,ge>>>=0,!we){var He=Math.pow(2,8*Oe-1);de(this,pe,ge,Oe,He-1,-He)}var Xe=Oe-1,ut=1,Ze=0;for(this[ge+Xe]=255&pe;--Xe>=0&&(ut*=256);)pe<0&&0===Ze&&0!==this[ge+Xe+1]&&(Ze=1),this[ge+Xe]=(pe/ut>>0)-Ze&255;return ge+Oe},c.prototype.writeInt8=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,1,127,-128),pe<0&&(pe=255+pe+1),this[ge]=255&pe,ge+1},c.prototype.writeInt16LE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,2,32767,-32768),this[ge]=255&pe,this[ge+1]=pe>>>8,ge+2},c.prototype.writeInt16BE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,2,32767,-32768),this[ge]=pe>>>8,this[ge+1]=255&pe,ge+2},c.prototype.writeInt32LE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,4,2147483647,-2147483648),this[ge]=255&pe,this[ge+1]=pe>>>8,this[ge+2]=pe>>>16,this[ge+3]=pe>>>24,ge+4},c.prototype.writeInt32BE=function(pe,ge,Oe){return pe=+pe,ge>>>=0,Oe||de(this,pe,ge,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[ge]=pe>>>24,this[ge+1]=pe>>>16,this[ge+2]=pe>>>8,this[ge+3]=255&pe,ge+4},c.prototype.writeBigInt64LE=Mt(function(pe){return be(this,pe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Mt(function(pe){return De(this,pe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(pe,ge,Oe){return Ce(this,pe,ge,!0,Oe)},c.prototype.writeFloatBE=function(pe,ge,Oe){return Ce(this,pe,ge,!1,Oe)},c.prototype.writeDoubleLE=function(pe,ge,Oe){return Le(this,pe,ge,!0,Oe)},c.prototype.writeDoubleBE=function(pe,ge,Oe){return Le(this,pe,ge,!1,Oe)},c.prototype.copy=function(pe,ge,Oe,we){if(!c.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(Oe||(Oe=0),!we&&0!==we&&(we=this.length),ge>=pe.length&&(ge=pe.length),ge||(ge=0),we>0&&we<Oe&&(we=Oe),we===Oe||0===pe.length||0===this.length)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(Oe<0||Oe>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),pe.length-ge<we-Oe&&(we=pe.length-ge+Oe);var He=we-Oe;return this===pe&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ge,Oe,we):Uint8Array.prototype.set.call(pe,this.subarray(Oe,we),ge),He},c.prototype.fill=function(pe,ge,Oe,we){if("string"==typeof pe){if("string"==typeof ge?(we=ge,ge=0,Oe=this.length):"string"==typeof Oe&&(we=Oe,Oe=this.length),void 0!==we&&"string"!=typeof we)throw new TypeError("encoding must be a string");if("string"==typeof we&&!c.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(1===pe.length){var He=pe.charCodeAt(0);("utf8"===we&&He<128||"latin1"===we)&&(pe=He)}}else"number"==typeof pe?pe&=255:"boolean"==typeof pe&&(pe=Number(pe));if(ge<0||this.length<ge||this.length<Oe)throw new RangeError("Out of range index");if(Oe<=ge)return this;var Xe;if(ge>>>=0,Oe=void 0===Oe?this.length:Oe>>>0,pe||(pe=0),"number"==typeof pe)for(Xe=ge;Xe<Oe;++Xe)this[Xe]=pe;else{var ut=c.isBuffer(pe)?pe:c.from(pe,we),Ze=ut.length;if(0===Ze)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(Xe=0;Xe<Oe-ge;++Xe)this[Xe+ge]=ut[Xe%Ze]}return this};var Fe={};function ke(Se,pe,ge){Fe[Se]=function(Oe){o(He,Oe);var we=p(He);function He(){var Xe;return u(this,He),Xe=we.call(this),Object.defineProperty(l(Xe),"message",{value:pe.apply(l(Xe),arguments),writable:!0,configurable:!0}),Xe.name="".concat(Xe.name," [").concat(Se,"]"),Xe.stack,delete Xe.name,Xe}return r(He,[{key:"code",get:function(){return Se},set:function(ut){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ut,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Se,"]: ").concat(this.message)}}]),He}(ge)}function ze(Se){for(var pe="",ge=Se.length,Oe="-"===Se[0]?1:0;ge>=Oe+4;ge-=3)pe="_".concat(Se.slice(ge-3,ge)).concat(pe);return"".concat(Se.slice(0,ge)).concat(pe)}function Pe(Se,pe,ge){Qe(pe,"offset"),(void 0===Se[pe]||void 0===Se[pe+ge])&&at(pe,Se.length-(ge+1))}function Ie(Se,pe,ge,Oe,we,He){if(Se>ge||Se<pe){var ut,Xe="bigint"==typeof pe?"n":"";throw ut=He>3?0===pe||pe===BigInt(0)?">= 0".concat(Xe," and < 2").concat(Xe," ** ").concat(8*(He+1)).concat(Xe):">= -(2".concat(Xe," ** ").concat(8*(He+1)-1).concat(Xe,") and < 2 ** ")+"".concat(8*(He+1)-1).concat(Xe):">= ".concat(pe).concat(Xe," and <= ").concat(ge).concat(Xe),new Fe.ERR_OUT_OF_RANGE("value",ut,Se)}Pe(Oe,we,He)}function Qe(Se,pe){if("number"!=typeof Se)throw new Fe.ERR_INVALID_ARG_TYPE(pe,"number",Se)}function at(Se,pe,ge){throw Math.floor(Se)!==Se?(Qe(Se,ge),new Fe.ERR_OUT_OF_RANGE(ge||"offset","an integer",Se)):pe<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE(ge||"offset",">= ".concat(ge?1:0," and <= ").concat(pe),Se)}ke("ERR_BUFFER_OUT_OF_BOUNDS",function(Se){return Se?"".concat(Se," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function(Se,pe){return'The "'.concat(Se,'" argument must be of type number. Received type ').concat(x(pe))},TypeError),ke("ERR_OUT_OF_RANGE",function(Se,pe,ge){var Oe='The value of "'.concat(Se,'" is out of range.'),we=ge;return Number.isInteger(ge)&&Math.abs(ge)>Math.pow(2,32)?we=ze(String(ge)):"bigint"==typeof ge&&(we=String(ge),(ge>Math.pow(BigInt(2),BigInt(32))||ge<-Math.pow(BigInt(2),BigInt(32)))&&(we=ze(we)),we+="n"),Oe+=" It must be ".concat(pe,". Received ").concat(we)},RangeError);var Be=/[^+/0-9A-Za-z-_]/g;function Ne(Se){if((Se=(Se=Se.split("=")[0]).trim().replace(Be,"")).length<2)return"";for(;Se.length%4!=0;)Se+="=";return Se}function nt(Se,pe){pe=pe||1/0;for(var ge,Oe=Se.length,we=null,He=[],Xe=0;Xe<Oe;++Xe){if((ge=Se.charCodeAt(Xe))>55295&&ge<57344){if(!we){if(ge>56319){(pe-=3)>-1&&He.push(239,191,189);continue}if(Xe+1===Oe){(pe-=3)>-1&&He.push(239,191,189);continue}we=ge;continue}if(ge<56320){(pe-=3)>-1&&He.push(239,191,189),we=ge;continue}ge=65536+(we-55296<<10|ge-56320)}else we&&(pe-=3)>-1&&He.push(239,191,189);if(we=null,ge<128){if((pe-=1)<0)break;He.push(ge)}else if(ge<2048){if((pe-=2)<0)break;He.push(ge>>6|192,63&ge|128)}else if(ge<65536){if((pe-=3)<0)break;He.push(ge>>12|224,ge>>6&63|128,63&ge|128)}else{if(!(ge<1114112))throw new Error("Invalid code point");if((pe-=4)<0)break;He.push(ge>>18|240,ge>>12&63|128,ge>>6&63|128,63&ge|128)}}return He}function ct(Se){for(var pe=[],ge=0;ge<Se.length;++ge)pe.push(255&Se.charCodeAt(ge));return pe}function mt(Se,pe){for(var ge,Oe,we,He=[],Xe=0;Xe<Se.length&&!((pe-=2)<0);++Xe)Oe=(ge=Se.charCodeAt(Xe))>>8,we=ge%256,He.push(we),He.push(Oe);return He}function Bt(Se){return h.toByteArray(Ne(Se))}function Rt(Se,pe,ge,Oe){var we;for(we=0;we<Oe&&!(we+ge>=pe.length||we>=Se.length);++we)pe[we+ge]=Se[we];return we}function zt(Se,pe){return Se instanceof pe||null!=Se&&null!=Se.constructor&&null!=Se.constructor.name&&Se.constructor.name===pe.name}function St(Se){return Se!=Se}var Xt=function(){for(var Se="0123456789abcdef",pe=new Array(256),ge=0;ge<16;++ge)for(var Oe=16*ge,we=0;we<16;++we)pe[Oe+we]=Se[ge]+Se[we];return pe}();function Mt(Se){return typeof BigInt>"u"?st:Se}function st(){throw new Error("BigInt not supported")}},2321:function(t){"use strict";t.exports=u,t.exports.isMobile=u,t.exports.default=u;var T=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,i=/android|ipad|playbook|silk/i;function u(a){a||(a={});var r=a.ua;if(!r&&typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var o=T.test(r)&&!n.test(r)||!!a.tablet&&i.test(r);return!o&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(o=!0),o}},3910:function(t,T){"use strict";T.byteLength=p,T.toByteArray=l,T.fromByteArray=x;for(var n=[],i=[],u=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=a.length;r<o;++r)n[r]=a[r],i[a.charCodeAt(r)]=r;function v(h){var g=h.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=h.indexOf("=");return-1===m&&(m=g),[m,m===g?0:4-m%4]}function p(h){var g=v(h),m=g[0],d=g[1];return 3*(m+d)/4-d}function f(h,g,m){return 3*(g+m)/4-m}function l(h){var g,w,m=v(h),d=m[0],A=m[1],b=new u(f(h,d,A)),c=0,S=A>0?d-4:d;for(w=0;w<S;w+=4)g=i[h.charCodeAt(w)]<<18|i[h.charCodeAt(w+1)]<<12|i[h.charCodeAt(w+2)]<<6|i[h.charCodeAt(w+3)],b[c++]=g>>16&255,b[c++]=g>>8&255,b[c++]=255&g;return 2===A&&(g=i[h.charCodeAt(w)]<<2|i[h.charCodeAt(w+1)]>>4,b[c++]=255&g),1===A&&(g=i[h.charCodeAt(w)]<<10|i[h.charCodeAt(w+1)]<<4|i[h.charCodeAt(w+2)]>>2,b[c++]=g>>8&255,b[c++]=255&g),b}function y(h){return n[h>>18&63]+n[h>>12&63]+n[h>>6&63]+n[63&h]}function s(h,g,m){for(var d,A=[],b=g;b<m;b+=3)d=(h[b]<<16&16711680)+(h[b+1]<<8&65280)+(255&h[b+2]),A.push(y(d));return A.join("")}function x(h){for(var g,m=h.length,d=m%3,A=[],b=16383,c=0,S=m-d;c<S;c+=b)A.push(s(h,c,c+b>S?S:c+b));return 1===d?(g=h[m-1],A.push(n[g>>2]+n[g<<4&63]+"==")):2===d&&(g=(h[m-2]<<8)+h[m-1],A.push(n[g>>10]+n[g>>4&63]+n[g<<2&63]+"=")),A.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3187:function(t,T){T.read=function(n,i,u,a,r){var o,v,p=8*r-a-1,f=(1<<p)-1,l=f>>1,y=-7,s=u?r-1:0,x=u?-1:1,h=n[i+s];for(s+=x,o=h&(1<<-y)-1,h>>=-y,y+=p;y>0;o=256*o+n[i+s],s+=x,y-=8);for(v=o&(1<<-y)-1,o>>=-y,y+=a;y>0;v=256*v+n[i+s],s+=x,y-=8);if(0===o)o=1-l;else{if(o===f)return v?NaN:1/0*(h?-1:1);v+=Math.pow(2,a),o-=l}return(h?-1:1)*v*Math.pow(2,o-a)},T.write=function(n,i,u,a,r,o){var v,p,f,l=8*o-r-1,y=(1<<l)-1,s=y>>1,x=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=a?0:o-1,g=a?1:-1,m=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(p=isNaN(i)?1:0,v=y):(v=Math.floor(Math.log(i)/Math.LN2),i*(f=Math.pow(2,-v))<1&&(v--,f*=2),(i+=v+s>=1?x/f:x*Math.pow(2,1-s))*f>=2&&(v++,f/=2),v+s>=y?(p=0,v=y):v+s>=1?(p=(i*f-1)*Math.pow(2,r),v+=s):(p=i*Math.pow(2,s-1)*Math.pow(2,r),v=0));r>=8;n[u+h]=255&p,h+=g,p/=256,r-=8);for(v=v<<r|p,l+=r;l>0;n[u+h]=255&v,h+=g,v/=256,l-=8);n[u+h-g]|=128*m}},1152:function(t,T,n){"use strict";t.exports=v;var i=n(3440),u=n(7774),a=n(9298);function r(p,f){this._controllerNames=Object.keys(p),this._controllerList=this._controllerNames.map(function(l){return p[l]}),this._mode=f,this._active=p[f],this._active||(this._mode="turntable",this._active=p.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=r.prototype;function v(p){var f=(p=p||{}).eye||[0,0,1],l=p.center||[0,0,0],y=p.up||[0,1,0],s=p.distanceLimits||[0,1/0],x=p.mode||"turntable",h=i(),g=u(),m=a();return h.setDistanceLimits(s[0],s[1]),h.lookAt(0,f,l,y),g.setDistanceLimits(s[0],s[1]),g.lookAt(0,f,l,y),m.setDistanceLimits(s[0],s[1]),m.lookAt(0,f,l,y),new r({turntable:h,orbit:g,matrix:m},x)}o.flush=function(p){for(var f=this._controllerList,l=0;l<f.length;++l)f[l].flush(p)},o.idle=function(p){for(var f=this._controllerList,l=0;l<f.length;++l)f[l].idle(p)},o.lookAt=function(p,f,l,y){for(var s=this._controllerList,x=0;x<s.length;++x)s[x].lookAt(p,f,l,y)},o.rotate=function(p,f,l,y){for(var s=this._controllerList,x=0;x<s.length;++x)s[x].rotate(p,f,l,y)},o.pan=function(p,f,l,y){for(var s=this._controllerList,x=0;x<s.length;++x)s[x].pan(p,f,l,y)},o.translate=function(p,f,l,y){for(var s=this._controllerList,x=0;x<s.length;++x)s[x].translate(p,f,l,y)},o.setMatrix=function(p,f){for(var l=this._controllerList,y=0;y<l.length;++y)l[y].setMatrix(p,f)},o.setDistanceLimits=function(p,f){for(var l=this._controllerList,y=0;y<l.length;++y)l[y].setDistanceLimits(p,f)},o.setDistance=function(p,f){for(var l=this._controllerList,y=0;y<l.length;++y)l[y].setDistance(p,f)},o.recalcMatrix=function(p){this._active.recalcMatrix(p)},o.getDistance=function(p){return this._active.getDistance(p)},o.getDistanceLimits=function(p){return this._active.getDistanceLimits(p)},o.lastT=function(){return this._active.lastT()},o.setMode=function(p){if(p!==this._mode){var f=this._controllerNames.indexOf(p);if(!(f<0)){var l=this._active,y=this._controllerList[f],s=Math.max(l.lastT(),y.lastT());l.recalcMatrix(s),y.setMatrix(s,l.computedMatrix),this._active=y,this._mode=p,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode}},8126:function(t,T,n){"use strict";var i=typeof WeakMap>"u"?n(5346):WeakMap,u=n(5827),a=n(2944),r=new i;function o(v){var p=r.get(v),f=p&&(p._triangleBuffer.handle||p._triangleBuffer.buffer);if(!f||!v.isBuffer(f)){var l=u(v,new Float32Array([-1,-1,-1,4,4,-1]));(p=a(v,[{buffer:l,type:v.FLOAT,size:2}]))._triangleBuffer=l,r.set(v,p)}p.bind(),v.drawArrays(v.TRIANGLES,0,3),p.unbind()}t.exports=o},8008:function(t,T,n){var i=n(4930);function u(a,r,o){r="number"==typeof r?r:1,o=o||": ";var v=a.split(/\r?\n/),p=String(v.length+r-1).length;return v.map(function(f,l){var y=l+r,s=String(y).length;return i(y,p-s)+o+f}).join("\n")}t.exports=u},2153:function(t,T,n){"use strict";t.exports=a;var i=n(417);function u(r,o){for(var v=new Array(o+1),p=0;p<r.length;++p)v[p]=r[p];for(p=0;p<=r.length;++p){for(var f=r.length;f<=o;++f){for(var l=new Array(o),y=0;y<o;++y)l[y]=Math.pow(f+1-p,y);v[f]=l}if(i.apply(void 0,v))return!0}return!1}function a(r){var o=r.length;if(0===o)return[];if(1===o)return[0];for(var v=r[0].length,p=[r[0]],f=[0],l=1;l<o;++l)if(p.push(r[l]),u(p,v)){if(f.push(l),f.length===v+1)return f}else p.pop();return f}},4653:function(t,T,n){"use strict";t.exports=a;var i=n(4419),u=n(1778);function a(r,o){return i(o).filter(function(v){for(var p=new Array(v.length),f=0;f<v.length;++f)p[f]=o[v[f]];return u(p)*r<1})}},2350:function(t,T,n){t.exports=a;var i=n(4653),u=n(8691);function a(r,o){return u(i(r,o))}},7896:function(t){t.exports=function(n){return atob(n)}},957:function(t,T,n){"use strict";t.exports=a;var i=n(6606);function u(r){for(var o=0,v=0;v<r.length;++v)o+=r[v];return o}function a(r,o){for(var v=o.length,p=new Array(v+1),f=0;f<v;++f){for(var l=new Array(v+1),y=0;y<=v;++y)l[y]=r[y][f];p[f]=l}for(p[v]=new Array(v+1),f=0;f<=v;++f)p[v][f]=1;var s=new Array(v+1);for(f=0;f<v;++f)s[f]=o[f];s[v]=1;var x=i(p,s),h=u(x[v+1]);0===h&&(h=1);var g=new Array(v+1);for(f=0;f<=v;++f)g[f]=u(x[f])/h;return g}},1539:function(t,T,n){"use strict";var i=n(8524);function u(a,r){return i(a[0].mul(r[1]).add(r[0].mul(a[1])),a[1].mul(r[1]))}t.exports=u},8846:function(t){"use strict";function T(n,i){return n[0].mul(i[1]).cmp(i[0].mul(n[1]))}t.exports=T},9189:function(t,T,n){"use strict";var i=n(8524);function u(a,r){return i(a[0].mul(r[1]),a[1].mul(r[0]))}t.exports=u},5125:function(t,T,n){"use strict";var i=n(234),u=n(3218),a=n(5514),r=n(2813),o=n(8524),v=n(9189);function p(f,l){if(i(f))return l?v(f,p(l)):[f[0].clone(),f[1].clone()];var s,x,y=0;if(u(f))s=f.clone();else if("string"==typeof f)s=r(f);else{if(0===f)return[a(0),a(1)];if(f===Math.floor(f))s=a(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),y-=256;s=a(f)}}if(i(l))s.mul(l[1]),x=l[0].clone();else if(u(l))x=l.clone();else if("string"==typeof l)x=r(l);else if(l)if(l===Math.floor(l))x=a(l);else{for(;l!==Math.floor(l);)l*=Math.pow(2,256),y+=256;x=a(l)}else x=a(1);return y>0?s=s.ushln(y):y<0&&(x=x.ushln(-y)),o(s,x)}t.exports=p},234:function(t,T,n){"use strict";var i=n(3218);function u(a){return Array.isArray(a)&&2===a.length&&i(a[0])&&i(a[1])}t.exports=u},4275:function(t,T,n){"use strict";var i=n(1928);function u(a){return a.cmp(new i(0))}t.exports=u},9958:function(t,T,n){"use strict";var i=n(4275);function u(a){var r=a.length,o=a.words,v=0;if(1===r)v=o[0];else if(2===r)v=o[0]+67108864*o[1];else for(var p=0;p<r;p++)v+=o[p]*Math.pow(67108864,p);return i(a)*v}t.exports=u},1112:function(t,T,n){"use strict";var i=n(8362),u=n(2288).countTrailingZeros;function a(r){var o=u(i.lo(r));if(o<32)return o;var v=u(i.hi(r));return v>20?52:v+32}t.exports=a},3218:function(t,T,n){"use strict";function u(a){return a&&"object"==typeof a&&Boolean(a.words)}n(1928),t.exports=u},5514:function(t,T,n){"use strict";var i=n(1928),u=n(8362);function a(r){var o=u.exponent(r);return o<52?new i(r):new i(r*Math.pow(2,52-o)).ushln(o-52)}t.exports=a},8524:function(t,T,n){"use strict";var i=n(5514),u=n(4275);function a(r,o){var v=u(r),p=u(o);if(0===v)return[i(0),i(1)];if(0===p)return[i(0),i(0)];p<0&&(r=r.neg(),o=o.neg());var f=r.gcd(o);return f.cmpn(1)?[r.div(f),o.div(f)]:[r,o]}t.exports=a},2813:function(t,T,n){"use strict";var i=n(1928);function u(a){return new i(a)}t.exports=u},3962:function(t,T,n){"use strict";var i=n(8524);function u(a,r){return i(a[0].mul(r[0]),a[1].mul(r[1]))}t.exports=u},4951:function(t,T,n){"use strict";var i=n(4275);function u(a){return i(a[0])*i(a[1])}t.exports=u},4354:function(t,T,n){"use strict";var i=n(8524);function u(a,r){return i(a[0].mul(r[1]).sub(a[1].mul(r[0])),a[1].mul(r[1]))}t.exports=u},7999:function(t,T,n){"use strict";var i=n(9958),u=n(1112);function a(r){var o=r[0],v=r[1];if(0===o.cmpn(0))return 0;var p=o.abs().divmod(v.abs()),f=p.div,l=i(f),y=p.mod,s=o.negative!==v.negative?-1:1;if(0===y.cmpn(0))return s*l;if(l){var x=u(l)+4;return s*(l+(h=i(y.ushln(x).divRound(v)))*Math.pow(2,-x))}var g=v.bitLength()-y.bitLength()+53,h=i(y.ushln(g).divRound(v));return g<1023?s*h*Math.pow(2,-g):s*(h*=Math.pow(2,-1023))*Math.pow(2,1023-g)}t.exports=a},5070:function(t){"use strict";function T(o,v,p,f,l){for(var y=l+1;f<=l;){var s=f+l>>>1,x=o[s];(void 0!==p?p(x,v):x-v)>=0?(y=s,l=s-1):f=s+1}return y}function n(o,v,p,f,l){for(var y=l+1;f<=l;){var s=f+l>>>1,x=o[s];(void 0!==p?p(x,v):x-v)>0?(y=s,l=s-1):f=s+1}return y}function i(o,v,p,f,l){for(var y=f-1;f<=l;){var s=f+l>>>1,x=o[s];(void 0!==p?p(x,v):x-v)<0?(y=s,f=s+1):l=s-1}return y}function u(o,v,p,f,l){for(var y=f-1;f<=l;){var s=f+l>>>1,x=o[s];(void 0!==p?p(x,v):x-v)<=0?(y=s,f=s+1):l=s-1}return y}function a(o,v,p,f,l){for(;f<=l;){var y=f+l>>>1,s=o[y],x=void 0!==p?p(s,v):s-v;if(0===x)return y;x<=0?f=y+1:l=y-1}return-1}function r(o,v,p,f,l,y){return"function"==typeof p?y(o,v,p,void 0===f?0:0|f,void 0===l?o.length-1:0|l):y(o,v,void 0,void 0===p?0:0|p,void 0===f?o.length-1:0|f)}t.exports={ge:function(o,v,p,f,l){return r(o,v,p,f,l,T)},gt:function(o,v,p,f,l){return r(o,v,p,f,l,n)},lt:function(o,v,p,f,l){return r(o,v,p,f,l,i)},le:function(o,v,p,f,l){return r(o,v,p,f,l,u)},eq:function(o,v,p,f,l){return r(o,v,p,f,l,a)}}},2288:function(t,T){"use strict";var n=32;function i(a){var r=32;return(a&=-a)&&r--,65535&a&&(r-=16),16711935&a&&(r-=8),252645135&a&&(r-=4),858993459&a&&(r-=2),1431655765&a&&(r-=1),r}T.INT_BITS=n,T.INT_MAX=2147483647,T.INT_MIN=-1<<n-1,T.sign=function(a){return(a>0)-(a<0)},T.abs=function(a){var r=a>>n-1;return(a^r)-r},T.min=function(a,r){return r^(a^r)&-(a<r)},T.max=function(a,r){return a^(a^r)&-(a<r)},T.isPow2=function(a){return!(a&a-1||!a)},T.log2=function(a){var r,o;return r=(a>65535)<<4,r|=o=((a>>>=r)>255)<<3,r|=o=((a>>>=o)>15)<<2,(r|=o=((a>>>=o)>3)<<1)|(a>>>=o)>>1},T.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},T.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},T.countTrailingZeros=i,T.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,1+(a|=a>>>16)},T.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},T.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var u=new Array(256);(function(a){for(var r=0;r<256;++r){var o=r,v=r,p=7;for(o>>>=1;o;o>>>=1)v<<=1,v|=1&o,--p;a[r]=v<<p&255}})(u),T.reverse=function(a){return u[255&a]<<24|u[a>>>8&255]<<16|u[a>>>16&255]<<8|u[a>>>24&255]},T.interleave2=function(a,r){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},T.deinterleave2=function(a,r){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>r&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},T.interleave3=function(a,r,o){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<2},T.deinterleave3=function(a,r){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>r&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},T.nextCombination=function(a){var r=a|a-1;return r+1|(~r&-~r)-1>>>i(a)+1}},1928:function(t,T,n){!function(i,u){"use strict";function a(z,D){if(!z)throw new Error(D||"Assertion failed")}function r(z,D){z.super_=D;var k=function(){};k.prototype=D.prototype,z.prototype=new k,z.prototype.constructor=z}function o(z,D,k){if(o.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,null!==z&&(("le"===D||"be"===D)&&(k=D,D=10),this._init(z||0,D||10,k||"be"))}var v;"object"==typeof i?i.exports=o:u.BN=o,o.BN=o,o.wordSize=26;try{v=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:n(6601).Buffer}catch{}function p(z,D){var k=z.charCodeAt(D);return k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:k-48&15}function f(z,D,k){var O=p(z,k);return k-1>=D&&(O|=p(z,k-1)<<4),O}function l(z,D,k,O){for(var U=0,H=Math.min(z.length,k),j=D;j<H;j++){var ee=z.charCodeAt(j)-48;U*=O,U+=ee>=49?ee-49+10:ee>=17?ee-17+10:ee}return U}o.isBN=function(D){return D instanceof o||null!==D&&"object"==typeof D&&D.constructor.wordSize===o.wordSize&&Array.isArray(D.words)},o.max=function(D,k){return D.cmp(k)>0?D:k},o.min=function(D,k){return D.cmp(k)<0?D:k},o.prototype._init=function(D,k,O){if("number"==typeof D)return this._initNumber(D,k,O);if("object"==typeof D)return this._initArray(D,k,O);"hex"===k&&(k=16),a(k===(0|k)&&k>=2&&k<=36);var U=0;"-"===(D=D.toString().replace(/\s+/g,""))[0]&&(U++,this.negative=1),U<D.length&&(16===k?this._parseHex(D,U,O):(this._parseBase(D,k,U),"le"===O&&this._initArray(this.toArray(),k,O)))},o.prototype._initNumber=function(D,k,O){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(a(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),"le"===O&&this._initArray(this.toArray(),k,O)},o.prototype._initArray=function(D,k,O){if(a("number"==typeof D.length),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var H,j,ee=0;if("be"===O)for(U=D.length-1,H=0;U>=0;U-=3)j=D[U]|D[U-1]<<8|D[U-2]<<16,this.words[H]|=j<<ee&67108863,this.words[H+1]=j>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,H++);else if("le"===O)for(U=0,H=0;U<D.length;U+=3)j=D[U]|D[U+1]<<8|D[U+2]<<16,this.words[H]|=j<<ee&67108863,this.words[H+1]=j>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,H++);return this.strip()},o.prototype._parseHex=function(D,k,O){this.length=Math.ceil((D.length-k)/6),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var ee,H=0,j=0;if("be"===O)for(U=D.length-1;U>=k;U-=2)ee=f(D,k,U)<<H,this.words[j]|=67108863&ee,H>=18?(H-=18,j+=1,this.words[j]|=ee>>>26):H+=8;else for(U=(D.length-k)%2==0?k+1:k;U<D.length;U+=2)ee=f(D,k,U)<<H,this.words[j]|=67108863&ee,H>=18?(H-=18,j+=1,this.words[j]|=ee>>>26):H+=8;this.strip()},o.prototype._parseBase=function(D,k,O){this.words=[0],this.length=1;for(var U=0,H=1;H<=67108863;H*=k)U++;U--,H=H/k|0;for(var j=D.length-O,ee=j%U,W=Math.min(j,j-ee)+O,B=0,te=O;te<W;te+=U)B=l(D,te,te+U,k),this.imuln(H),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B);if(0!==ee){var q=1;for(B=l(D,te,D.length,k),te=0;te<ee;te++)q*=k;this.imuln(q),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B)}this.strip()},o.prototype.copy=function(D){D.words=new Array(this.length);for(var k=0;k<this.length;k++)D.words[k]=this.words[k];D.length=this.length,D.negative=this.negative,D.red=this.red},o.prototype.clone=function(){var D=new o(null);return this.copy(D),D},o.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(z){for(var D=new Array(z.bitLength()),k=0;k<D.length;k++){var O=k/26|0,U=k%26;D[k]=(z.words[O]&1<<U)>>>U}return D}function g(z,D,k){k.negative=D.negative^z.negative;var O=z.length+D.length|0;k.length=O,O=O-1|0;var U=0|z.words[0],H=0|D.words[0],j=U*H,ee=67108863&j,W=j/67108864|0;k.words[0]=ee;for(var B=1;B<O;B++){for(var te=W>>>26,q=67108863&W,oe=Math.min(B,D.length-1),ie=Math.max(0,B-z.length+1);ie<=oe;ie++){var V=B-ie|0;te+=(j=(U=0|z.words[V])*(H=0|D.words[ie])+q)/67108864|0,q=67108863&j}k.words[B]=0|q,W=0|te}return 0!==W?k.words[B]=0|W:k.length--,k.strip()}o.prototype.toString=function(D,k){var O;if(k=0|k||1,16===(D=D||10)||"hex"===D){O="";for(var U=0,H=0,j=0;j<this.length;j++){var ee=this.words[j],W=(16777215&(ee<<U|H)).toString(16);O=0!=(H=ee>>>24-U&16777215)||j!==this.length-1?y[6-W.length]+W+O:W+O,(U+=2)>=26&&(U-=26,j--)}for(0!==H&&(O=H.toString(16)+O);O.length%k!=0;)O="0"+O;return 0!==this.negative&&(O="-"+O),O}if(D===(0|D)&&D>=2&&D<=36){var B=s[D],te=x[D];O="";var q=this.clone();for(q.negative=0;!q.isZero();){var oe=q.modn(te).toString(D);O=(q=q.idivn(te)).isZero()?oe+O:y[B-oe.length]+oe+O}for(this.isZero()&&(O="0"+O);O.length%k!=0;)O="0"+O;return 0!==this.negative&&(O="-"+O),O}a(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var D=this.words[0];return 2===this.length?D+=67108864*this.words[1]:3===this.length&&1===this.words[2]?D+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-D:D},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(D,k){return a(typeof v<"u"),this.toArrayLike(v,D,k)},o.prototype.toArray=function(D,k){return this.toArrayLike(Array,D,k)},o.prototype.toArrayLike=function(D,k,O){var U=this.byteLength(),H=O||Math.max(1,U);a(U<=H,"byte array longer than desired length"),a(H>0,"Requested array length <= 0"),this.strip();var W,B,j="le"===k,ee=new D(H),te=this.clone();if(j){for(B=0;!te.isZero();B++)W=te.andln(255),te.iushrn(8),ee[B]=W;for(;B<H;B++)ee[B]=0}else{for(B=0;B<H-U;B++)ee[B]=0;for(B=0;!te.isZero();B++)W=te.andln(255),te.iushrn(8),ee[H-B-1]=W}return ee},Math.clz32?o.prototype._countBits=function(D){return 32-Math.clz32(D)}:o.prototype._countBits=function(D){var k=D,O=0;return k>=4096&&(O+=13,k>>>=13),k>=64&&(O+=7,k>>>=7),k>=8&&(O+=4,k>>>=4),k>=2&&(O+=2,k>>>=2),O+k},o.prototype._zeroBits=function(D){if(0===D)return 26;var k=D,O=0;return 8191&k||(O+=13,k>>>=13),127&k||(O+=7,k>>>=7),15&k||(O+=4,k>>>=4),3&k||(O+=2,k>>>=2),1&k||O++,O},o.prototype.bitLength=function(){var D=this.words[this.length-1],k=this._countBits(D);return 26*(this.length-1)+k},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,k=0;k<this.length;k++){var O=this._zeroBits(this.words[k]);if(D+=O,26!==O)break}return D},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(D){return 0!==this.negative?this.abs().inotn(D).iaddn(1):this.clone()},o.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var k=0;k<D.length;k++)this.words[k]=this.words[k]|D.words[k];return this.strip()},o.prototype.ior=function(D){return a(0==(this.negative|D.negative)),this.iuor(D)},o.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},o.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},o.prototype.iuand=function(D){var k;k=this.length>D.length?D:this;for(var O=0;O<k.length;O++)this.words[O]=this.words[O]&D.words[O];return this.length=k.length,this.strip()},o.prototype.iand=function(D){return a(0==(this.negative|D.negative)),this.iuand(D)},o.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},o.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},o.prototype.iuxor=function(D){var k,O;this.length>D.length?(k=this,O=D):(k=D,O=this);for(var U=0;U<O.length;U++)this.words[U]=k.words[U]^O.words[U];if(this!==k)for(;U<k.length;U++)this.words[U]=k.words[U];return this.length=k.length,this.strip()},o.prototype.ixor=function(D){return a(0==(this.negative|D.negative)),this.iuxor(D)},o.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},o.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},o.prototype.inotn=function(D){a("number"==typeof D&&D>=0);var k=0|Math.ceil(D/26),O=D%26;this._expand(k),O>0&&k--;for(var U=0;U<k;U++)this.words[U]=67108863&~this.words[U];return O>0&&(this.words[U]=~this.words[U]&67108863>>26-O),this.strip()},o.prototype.notn=function(D){return this.clone().inotn(D)},o.prototype.setn=function(D,k){a("number"==typeof D&&D>=0);var O=D/26|0,U=D%26;return this._expand(O+1),this.words[O]=k?this.words[O]|1<<U:this.words[O]&~(1<<U),this.strip()},o.prototype.iadd=function(D){var k,O,U;if(0!==this.negative&&0===D.negative)return this.negative=0,k=this.isub(D),this.negative^=1,this._normSign();if(0===this.negative&&0!==D.negative)return D.negative=0,k=this.isub(D),D.negative=1,k._normSign();this.length>D.length?(O=this,U=D):(O=D,U=this);for(var H=0,j=0;j<U.length;j++)k=(0|O.words[j])+(0|U.words[j])+H,this.words[j]=67108863&k,H=k>>>26;for(;0!==H&&j<O.length;j++)k=(0|O.words[j])+H,this.words[j]=67108863&k,H=k>>>26;if(this.length=O.length,0!==H)this.words[this.length]=H,this.length++;else if(O!==this)for(;j<O.length;j++)this.words[j]=O.words[j];return this},o.prototype.add=function(D){var k;return 0!==D.negative&&0===this.negative?(D.negative=0,k=this.sub(D),D.negative^=1,k):0===D.negative&&0!==this.negative?(this.negative=0,k=D.sub(this),this.negative=1,k):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},o.prototype.isub=function(D){if(0!==D.negative){D.negative=0;var k=this.iadd(D);return D.negative=1,k._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var U,H,O=this.cmp(D);if(0===O)return this.negative=0,this.length=1,this.words[0]=0,this;O>0?(U=this,H=D):(U=D,H=this);for(var j=0,ee=0;ee<H.length;ee++)j=(k=(0|U.words[ee])-(0|H.words[ee])+j)>>26,this.words[ee]=67108863&k;for(;0!==j&&ee<U.length;ee++)j=(k=(0|U.words[ee])+j)>>26,this.words[ee]=67108863&k;if(0===j&&ee<U.length&&U!==this)for(;ee<U.length;ee++)this.words[ee]=U.words[ee];return this.length=Math.max(this.length,ee),U!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(D){return this.clone().isub(D)};var m=function(D,k,O){var W,B,te,U=D.words,H=k.words,j=O.words,ee=0,q=0|U[0],oe=8191&q,ie=q>>>13,V=0|U[1],Y=8191&V,ae=V>>>13,X=0|U[2],J=8191&X,ue=X>>>13,re=0|U[3],ne=8191&re,se=re>>>13,de=0|U[4],be=8191&de,De=de>>>13,_e=0|U[5],Ce=8191&_e,Le=_e>>>13,Fe=0|U[6],ke=8191&Fe,ze=Fe>>>13,Pe=0|U[7],Ie=8191&Pe,Qe=Pe>>>13,at=0|U[8],Be=8191&at,Ne=at>>>13,nt=0|U[9],ct=8191&nt,mt=nt>>>13,Bt=0|H[0],Rt=8191&Bt,zt=Bt>>>13,St=0|H[1],Xt=8191&St,Mt=St>>>13,st=0|H[2],Se=8191&st,pe=st>>>13,ge=0|H[3],Oe=8191&ge,we=ge>>>13,He=0|H[4],Xe=8191&He,ut=He>>>13,Ze=0|H[5],qe=8191&Ze,Dt=Ze>>>13,Ft=0|H[6],bt=8191&Ft,Pt=Ft>>>13,cr=0|H[7],Sr=8191&cr,Kr=cr>>>13,It=0|H[8],$t=8191&It,kr=It>>>13,lr=0|H[9],rt=8191&lr,$e=lr>>>13;O.negative=D.negative^k.negative,O.length=19;var ht=(ee+(W=Math.imul(oe,Rt))|0)+((8191&(B=(B=Math.imul(oe,zt))+Math.imul(ie,Rt)|0))<<13)|0;ee=((te=Math.imul(ie,zt))+(B>>>13)|0)+(ht>>>26)|0,ht&=67108863,W=Math.imul(Y,Rt),B=(B=Math.imul(Y,zt))+Math.imul(ae,Rt)|0,te=Math.imul(ae,zt);var gt=(ee+(W=W+Math.imul(oe,Xt)|0)|0)+((8191&(B=(B=B+Math.imul(oe,Mt)|0)+Math.imul(ie,Xt)|0))<<13)|0;ee=((te=te+Math.imul(ie,Mt)|0)+(B>>>13)|0)+(gt>>>26)|0,gt&=67108863,W=Math.imul(J,Rt),B=(B=Math.imul(J,zt))+Math.imul(ue,Rt)|0,te=Math.imul(ue,zt),W=W+Math.imul(Y,Xt)|0,B=(B=B+Math.imul(Y,Mt)|0)+Math.imul(ae,Xt)|0,te=te+Math.imul(ae,Mt)|0;var ft=(ee+(W=W+Math.imul(oe,Se)|0)|0)+((8191&(B=(B=B+Math.imul(oe,pe)|0)+Math.imul(ie,Se)|0))<<13)|0;ee=((te=te+Math.imul(ie,pe)|0)+(B>>>13)|0)+(ft>>>26)|0,ft&=67108863,W=Math.imul(ne,Rt),B=(B=Math.imul(ne,zt))+Math.imul(se,Rt)|0,te=Math.imul(se,zt),W=W+Math.imul(J,Xt)|0,B=(B=B+Math.imul(J,Mt)|0)+Math.imul(ue,Xt)|0,te=te+Math.imul(ue,Mt)|0,W=W+Math.imul(Y,Se)|0,B=(B=B+Math.imul(Y,pe)|0)+Math.imul(ae,Se)|0,te=te+Math.imul(ae,pe)|0;var Ct=(ee+(W=W+Math.imul(oe,Oe)|0)|0)+((8191&(B=(B=B+Math.imul(oe,we)|0)+Math.imul(ie,Oe)|0))<<13)|0;ee=((te=te+Math.imul(ie,we)|0)+(B>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,W=Math.imul(be,Rt),B=(B=Math.imul(be,zt))+Math.imul(De,Rt)|0,te=Math.imul(De,zt),W=W+Math.imul(ne,Xt)|0,B=(B=B+Math.imul(ne,Mt)|0)+Math.imul(se,Xt)|0,te=te+Math.imul(se,Mt)|0,W=W+Math.imul(J,Se)|0,B=(B=B+Math.imul(J,pe)|0)+Math.imul(ue,Se)|0,te=te+Math.imul(ue,pe)|0,W=W+Math.imul(Y,Oe)|0,B=(B=B+Math.imul(Y,we)|0)+Math.imul(ae,Oe)|0,te=te+Math.imul(ae,we)|0;var sr=(ee+(W=W+Math.imul(oe,Xe)|0)|0)+((8191&(B=(B=B+Math.imul(oe,ut)|0)+Math.imul(ie,Xe)|0))<<13)|0;ee=((te=te+Math.imul(ie,ut)|0)+(B>>>13)|0)+(sr>>>26)|0,sr&=67108863,W=Math.imul(Ce,Rt),B=(B=Math.imul(Ce,zt))+Math.imul(Le,Rt)|0,te=Math.imul(Le,zt),W=W+Math.imul(be,Xt)|0,B=(B=B+Math.imul(be,Mt)|0)+Math.imul(De,Xt)|0,te=te+Math.imul(De,Mt)|0,W=W+Math.imul(ne,Se)|0,B=(B=B+Math.imul(ne,pe)|0)+Math.imul(se,Se)|0,te=te+Math.imul(se,pe)|0,W=W+Math.imul(J,Oe)|0,B=(B=B+Math.imul(J,we)|0)+Math.imul(ue,Oe)|0,te=te+Math.imul(ue,we)|0,W=W+Math.imul(Y,Xe)|0,B=(B=B+Math.imul(Y,ut)|0)+Math.imul(ae,Xe)|0,te=te+Math.imul(ae,ut)|0;var tr=(ee+(W=W+Math.imul(oe,qe)|0)|0)+((8191&(B=(B=B+Math.imul(oe,Dt)|0)+Math.imul(ie,qe)|0))<<13)|0;ee=((te=te+Math.imul(ie,Dt)|0)+(B>>>13)|0)+(tr>>>26)|0,tr&=67108863,W=Math.imul(ke,Rt),B=(B=Math.imul(ke,zt))+Math.imul(ze,Rt)|0,te=Math.imul(ze,zt),W=W+Math.imul(Ce,Xt)|0,B=(B=B+Math.imul(Ce,Mt)|0)+Math.imul(Le,Xt)|0,te=te+Math.imul(Le,Mt)|0,W=W+Math.imul(be,Se)|0,B=(B=B+Math.imul(be,pe)|0)+Math.imul(De,Se)|0,te=te+Math.imul(De,pe)|0,W=W+Math.imul(ne,Oe)|0,B=(B=B+Math.imul(ne,we)|0)+Math.imul(se,Oe)|0,te=te+Math.imul(se,we)|0,W=W+Math.imul(J,Xe)|0,B=(B=B+Math.imul(J,ut)|0)+Math.imul(ue,Xe)|0,te=te+Math.imul(ue,ut)|0,W=W+Math.imul(Y,qe)|0,B=(B=B+Math.imul(Y,Dt)|0)+Math.imul(ae,qe)|0,te=te+Math.imul(ae,Dt)|0;var Cr=(ee+(W=W+Math.imul(oe,bt)|0)|0)+((8191&(B=(B=B+Math.imul(oe,Pt)|0)+Math.imul(ie,bt)|0))<<13)|0;ee=((te=te+Math.imul(ie,Pt)|0)+(B>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,W=Math.imul(Ie,Rt),B=(B=Math.imul(Ie,zt))+Math.imul(Qe,Rt)|0,te=Math.imul(Qe,zt),W=W+Math.imul(ke,Xt)|0,B=(B=B+Math.imul(ke,Mt)|0)+Math.imul(ze,Xt)|0,te=te+Math.imul(ze,Mt)|0,W=W+Math.imul(Ce,Se)|0,B=(B=B+Math.imul(Ce,pe)|0)+Math.imul(Le,Se)|0,te=te+Math.imul(Le,pe)|0,W=W+Math.imul(be,Oe)|0,B=(B=B+Math.imul(be,we)|0)+Math.imul(De,Oe)|0,te=te+Math.imul(De,we)|0,W=W+Math.imul(ne,Xe)|0,B=(B=B+Math.imul(ne,ut)|0)+Math.imul(se,Xe)|0,te=te+Math.imul(se,ut)|0,W=W+Math.imul(J,qe)|0,B=(B=B+Math.imul(J,Dt)|0)+Math.imul(ue,qe)|0,te=te+Math.imul(ue,Dt)|0,W=W+Math.imul(Y,bt)|0,B=(B=B+Math.imul(Y,Pt)|0)+Math.imul(ae,bt)|0,te=te+Math.imul(ae,Pt)|0;var Hr=(ee+(W=W+Math.imul(oe,Sr)|0)|0)+((8191&(B=(B=B+Math.imul(oe,Kr)|0)+Math.imul(ie,Sr)|0))<<13)|0;ee=((te=te+Math.imul(ie,Kr)|0)+(B>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,W=Math.imul(Be,Rt),B=(B=Math.imul(Be,zt))+Math.imul(Ne,Rt)|0,te=Math.imul(Ne,zt),W=W+Math.imul(Ie,Xt)|0,B=(B=B+Math.imul(Ie,Mt)|0)+Math.imul(Qe,Xt)|0,te=te+Math.imul(Qe,Mt)|0,W=W+Math.imul(ke,Se)|0,B=(B=B+Math.imul(ke,pe)|0)+Math.imul(ze,Se)|0,te=te+Math.imul(ze,pe)|0,W=W+Math.imul(Ce,Oe)|0,B=(B=B+Math.imul(Ce,we)|0)+Math.imul(Le,Oe)|0,te=te+Math.imul(Le,we)|0,W=W+Math.imul(be,Xe)|0,B=(B=B+Math.imul(be,ut)|0)+Math.imul(De,Xe)|0,te=te+Math.imul(De,ut)|0,W=W+Math.imul(ne,qe)|0,B=(B=B+Math.imul(ne,Dt)|0)+Math.imul(se,qe)|0,te=te+Math.imul(se,Dt)|0,W=W+Math.imul(J,bt)|0,B=(B=B+Math.imul(J,Pt)|0)+Math.imul(ue,bt)|0,te=te+Math.imul(ue,Pt)|0,W=W+Math.imul(Y,Sr)|0,B=(B=B+Math.imul(Y,Kr)|0)+Math.imul(ae,Sr)|0,te=te+Math.imul(ae,Kr)|0;var zr=(ee+(W=W+Math.imul(oe,$t)|0)|0)+((8191&(B=(B=B+Math.imul(oe,kr)|0)+Math.imul(ie,$t)|0))<<13)|0;ee=((te=te+Math.imul(ie,kr)|0)+(B>>>13)|0)+(zr>>>26)|0,zr&=67108863,W=Math.imul(ct,Rt),B=(B=Math.imul(ct,zt))+Math.imul(mt,Rt)|0,te=Math.imul(mt,zt),W=W+Math.imul(Be,Xt)|0,B=(B=B+Math.imul(Be,Mt)|0)+Math.imul(Ne,Xt)|0,te=te+Math.imul(Ne,Mt)|0,W=W+Math.imul(Ie,Se)|0,B=(B=B+Math.imul(Ie,pe)|0)+Math.imul(Qe,Se)|0,te=te+Math.imul(Qe,pe)|0,W=W+Math.imul(ke,Oe)|0,B=(B=B+Math.imul(ke,we)|0)+Math.imul(ze,Oe)|0,te=te+Math.imul(ze,we)|0,W=W+Math.imul(Ce,Xe)|0,B=(B=B+Math.imul(Ce,ut)|0)+Math.imul(Le,Xe)|0,te=te+Math.imul(Le,ut)|0,W=W+Math.imul(be,qe)|0,B=(B=B+Math.imul(be,Dt)|0)+Math.imul(De,qe)|0,te=te+Math.imul(De,Dt)|0,W=W+Math.imul(ne,bt)|0,B=(B=B+Math.imul(ne,Pt)|0)+Math.imul(se,bt)|0,te=te+Math.imul(se,Pt)|0,W=W+Math.imul(J,Sr)|0,B=(B=B+Math.imul(J,Kr)|0)+Math.imul(ue,Sr)|0,te=te+Math.imul(ue,Kr)|0,W=W+Math.imul(Y,$t)|0,B=(B=B+Math.imul(Y,kr)|0)+Math.imul(ae,$t)|0,te=te+Math.imul(ae,kr)|0;var Wr=(ee+(W=W+Math.imul(oe,rt)|0)|0)+((8191&(B=(B=B+Math.imul(oe,$e)|0)+Math.imul(ie,rt)|0))<<13)|0;ee=((te=te+Math.imul(ie,$e)|0)+(B>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,W=Math.imul(ct,Xt),B=(B=Math.imul(ct,Mt))+Math.imul(mt,Xt)|0,te=Math.imul(mt,Mt),W=W+Math.imul(Be,Se)|0,B=(B=B+Math.imul(Be,pe)|0)+Math.imul(Ne,Se)|0,te=te+Math.imul(Ne,pe)|0,W=W+Math.imul(Ie,Oe)|0,B=(B=B+Math.imul(Ie,we)|0)+Math.imul(Qe,Oe)|0,te=te+Math.imul(Qe,we)|0,W=W+Math.imul(ke,Xe)|0,B=(B=B+Math.imul(ke,ut)|0)+Math.imul(ze,Xe)|0,te=te+Math.imul(ze,ut)|0,W=W+Math.imul(Ce,qe)|0,B=(B=B+Math.imul(Ce,Dt)|0)+Math.imul(Le,qe)|0,te=te+Math.imul(Le,Dt)|0,W=W+Math.imul(be,bt)|0,B=(B=B+Math.imul(be,Pt)|0)+Math.imul(De,bt)|0,te=te+Math.imul(De,Pt)|0,W=W+Math.imul(ne,Sr)|0,B=(B=B+Math.imul(ne,Kr)|0)+Math.imul(se,Sr)|0,te=te+Math.imul(se,Kr)|0,W=W+Math.imul(J,$t)|0,B=(B=B+Math.imul(J,kr)|0)+Math.imul(ue,$t)|0,te=te+Math.imul(ue,kr)|0;var Ke=(ee+(W=W+Math.imul(Y,rt)|0)|0)+((8191&(B=(B=B+Math.imul(Y,$e)|0)+Math.imul(ae,rt)|0))<<13)|0;ee=((te=te+Math.imul(ae,$e)|0)+(B>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,W=Math.imul(ct,Se),B=(B=Math.imul(ct,pe))+Math.imul(mt,Se)|0,te=Math.imul(mt,pe),W=W+Math.imul(Be,Oe)|0,B=(B=B+Math.imul(Be,we)|0)+Math.imul(Ne,Oe)|0,te=te+Math.imul(Ne,we)|0,W=W+Math.imul(Ie,Xe)|0,B=(B=B+Math.imul(Ie,ut)|0)+Math.imul(Qe,Xe)|0,te=te+Math.imul(Qe,ut)|0,W=W+Math.imul(ke,qe)|0,B=(B=B+Math.imul(ke,Dt)|0)+Math.imul(ze,qe)|0,te=te+Math.imul(ze,Dt)|0,W=W+Math.imul(Ce,bt)|0,B=(B=B+Math.imul(Ce,Pt)|0)+Math.imul(Le,bt)|0,te=te+Math.imul(Le,Pt)|0,W=W+Math.imul(be,Sr)|0,B=(B=B+Math.imul(be,Kr)|0)+Math.imul(De,Sr)|0,te=te+Math.imul(De,Kr)|0,W=W+Math.imul(ne,$t)|0,B=(B=B+Math.imul(ne,kr)|0)+Math.imul(se,$t)|0,te=te+Math.imul(se,kr)|0;var We=(ee+(W=W+Math.imul(J,rt)|0)|0)+((8191&(B=(B=B+Math.imul(J,$e)|0)+Math.imul(ue,rt)|0))<<13)|0;ee=((te=te+Math.imul(ue,$e)|0)+(B>>>13)|0)+(We>>>26)|0,We&=67108863,W=Math.imul(ct,Oe),B=(B=Math.imul(ct,we))+Math.imul(mt,Oe)|0,te=Math.imul(mt,we),W=W+Math.imul(Be,Xe)|0,B=(B=B+Math.imul(Be,ut)|0)+Math.imul(Ne,Xe)|0,te=te+Math.imul(Ne,ut)|0,W=W+Math.imul(Ie,qe)|0,B=(B=B+Math.imul(Ie,Dt)|0)+Math.imul(Qe,qe)|0,te=te+Math.imul(Qe,Dt)|0,W=W+Math.imul(ke,bt)|0,B=(B=B+Math.imul(ke,Pt)|0)+Math.imul(ze,bt)|0,te=te+Math.imul(ze,Pt)|0,W=W+Math.imul(Ce,Sr)|0,B=(B=B+Math.imul(Ce,Kr)|0)+Math.imul(Le,Sr)|0,te=te+Math.imul(Le,Kr)|0,W=W+Math.imul(be,$t)|0,B=(B=B+Math.imul(be,kr)|0)+Math.imul(De,$t)|0,te=te+Math.imul(De,kr)|0;var Jt=(ee+(W=W+Math.imul(ne,rt)|0)|0)+((8191&(B=(B=B+Math.imul(ne,$e)|0)+Math.imul(se,rt)|0))<<13)|0;ee=((te=te+Math.imul(se,$e)|0)+(B>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,W=Math.imul(ct,Xe),B=(B=Math.imul(ct,ut))+Math.imul(mt,Xe)|0,te=Math.imul(mt,ut),W=W+Math.imul(Be,qe)|0,B=(B=B+Math.imul(Be,Dt)|0)+Math.imul(Ne,qe)|0,te=te+Math.imul(Ne,Dt)|0,W=W+Math.imul(Ie,bt)|0,B=(B=B+Math.imul(Ie,Pt)|0)+Math.imul(Qe,bt)|0,te=te+Math.imul(Qe,Pt)|0,W=W+Math.imul(ke,Sr)|0,B=(B=B+Math.imul(ke,Kr)|0)+Math.imul(ze,Sr)|0,te=te+Math.imul(ze,Kr)|0,W=W+Math.imul(Ce,$t)|0,B=(B=B+Math.imul(Ce,kr)|0)+Math.imul(Le,$t)|0,te=te+Math.imul(Le,kr)|0;var Gt=(ee+(W=W+Math.imul(be,rt)|0)|0)+((8191&(B=(B=B+Math.imul(be,$e)|0)+Math.imul(De,rt)|0))<<13)|0;ee=((te=te+Math.imul(De,$e)|0)+(B>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,W=Math.imul(ct,qe),B=(B=Math.imul(ct,Dt))+Math.imul(mt,qe)|0,te=Math.imul(mt,Dt),W=W+Math.imul(Be,bt)|0,B=(B=B+Math.imul(Be,Pt)|0)+Math.imul(Ne,bt)|0,te=te+Math.imul(Ne,Pt)|0,W=W+Math.imul(Ie,Sr)|0,B=(B=B+Math.imul(Ie,Kr)|0)+Math.imul(Qe,Sr)|0,te=te+Math.imul(Qe,Kr)|0,W=W+Math.imul(ke,$t)|0,B=(B=B+Math.imul(ke,kr)|0)+Math.imul(ze,$t)|0,te=te+Math.imul(ze,kr)|0;var hr=(ee+(W=W+Math.imul(Ce,rt)|0)|0)+((8191&(B=(B=B+Math.imul(Ce,$e)|0)+Math.imul(Le,rt)|0))<<13)|0;ee=((te=te+Math.imul(Le,$e)|0)+(B>>>13)|0)+(hr>>>26)|0,hr&=67108863,W=Math.imul(ct,bt),B=(B=Math.imul(ct,Pt))+Math.imul(mt,bt)|0,te=Math.imul(mt,Pt),W=W+Math.imul(Be,Sr)|0,B=(B=B+Math.imul(Be,Kr)|0)+Math.imul(Ne,Sr)|0,te=te+Math.imul(Ne,Kr)|0,W=W+Math.imul(Ie,$t)|0,B=(B=B+Math.imul(Ie,kr)|0)+Math.imul(Qe,$t)|0,te=te+Math.imul(Qe,kr)|0;var br=(ee+(W=W+Math.imul(ke,rt)|0)|0)+((8191&(B=(B=B+Math.imul(ke,$e)|0)+Math.imul(ze,rt)|0))<<13)|0;ee=((te=te+Math.imul(ze,$e)|0)+(B>>>13)|0)+(br>>>26)|0,br&=67108863,W=Math.imul(ct,Sr),B=(B=Math.imul(ct,Kr))+Math.imul(mt,Sr)|0,te=Math.imul(mt,Kr),W=W+Math.imul(Be,$t)|0,B=(B=B+Math.imul(Be,kr)|0)+Math.imul(Ne,$t)|0,te=te+Math.imul(Ne,kr)|0;var Ut=(ee+(W=W+Math.imul(Ie,rt)|0)|0)+((8191&(B=(B=B+Math.imul(Ie,$e)|0)+Math.imul(Qe,rt)|0))<<13)|0;ee=((te=te+Math.imul(Qe,$e)|0)+(B>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,W=Math.imul(ct,$t),B=(B=Math.imul(ct,kr))+Math.imul(mt,$t)|0,te=Math.imul(mt,kr);var Kt=(ee+(W=W+Math.imul(Be,rt)|0)|0)+((8191&(B=(B=B+Math.imul(Be,$e)|0)+Math.imul(Ne,rt)|0))<<13)|0;ee=((te=te+Math.imul(Ne,$e)|0)+(B>>>13)|0)+(Kt>>>26)|0,Kt&=67108863;var wt=(ee+(W=Math.imul(ct,rt))|0)+((8191&(B=(B=Math.imul(ct,$e))+Math.imul(mt,rt)|0))<<13)|0;return ee=((te=Math.imul(mt,$e))+(B>>>13)|0)+(wt>>>26)|0,wt&=67108863,j[0]=ht,j[1]=gt,j[2]=ft,j[3]=Ct,j[4]=sr,j[5]=tr,j[6]=Cr,j[7]=Hr,j[8]=zr,j[9]=Wr,j[10]=Ke,j[11]=We,j[12]=Jt,j[13]=Gt,j[14]=hr,j[15]=br,j[16]=Ut,j[17]=Kt,j[18]=wt,0!==ee&&(j[19]=ee,O.length++),O};function d(z,D,k){k.negative=D.negative^z.negative,k.length=z.length+D.length;for(var O=0,U=0,H=0;H<k.length-1;H++){var j=U;U=0;for(var ee=67108863&O,W=Math.min(H,D.length-1),B=Math.max(0,H-z.length+1);B<=W;B++){var te=H-B,ie=(0|z.words[te])*(0|D.words[B]),V=67108863&ie;ee=67108863&(V=V+ee|0),U+=(j=(j=j+(ie/67108864|0)|0)+(V>>>26)|0)>>>26,j&=67108863}k.words[H]=ee,O=j,j=U}return 0!==O?k.words[H]=O:k.length--,k.strip()}function A(z,D,k){return(new b).mulp(z,D,k)}function b(z,D){this.x=z,this.y=D}Math.imul||(m=g),o.prototype.mulTo=function(D,k){var U=this.length+D.length;return 10===this.length&&10===D.length?m(this,D,k):U<63?g(this,D,k):U<1024?d(this,D,k):A(this,D,k)},b.prototype.makeRBT=function(D){for(var k=new Array(D),O=o.prototype._countBits(D)-1,U=0;U<D;U++)k[U]=this.revBin(U,O,D);return k},b.prototype.revBin=function(D,k,O){if(0===D||D===O-1)return D;for(var U=0,H=0;H<k;H++)U|=(1&D)<<k-H-1,D>>=1;return U},b.prototype.permute=function(D,k,O,U,H,j){for(var ee=0;ee<j;ee++)U[ee]=k[D[ee]],H[ee]=O[D[ee]]},b.prototype.transform=function(D,k,O,U,H,j){this.permute(j,D,k,O,U,H);for(var ee=1;ee<H;ee<<=1)for(var W=ee<<1,B=Math.cos(2*Math.PI/W),te=Math.sin(2*Math.PI/W),q=0;q<H;q+=W)for(var oe=B,ie=te,V=0;V<ee;V++){var Y=O[q+V],ae=U[q+V],X=O[q+V+ee],J=U[q+V+ee],ue=oe*X-ie*J;J=oe*J+ie*X,X=ue,O[q+V]=Y+X,U[q+V]=ae+J,O[q+V+ee]=Y-X,U[q+V+ee]=ae-J,V!==W&&(ue=B*oe-te*ie,ie=B*ie+te*oe,oe=ue)}},b.prototype.guessLen13b=function(D,k){var O=1|Math.max(k,D),U=1&O,H=0;for(O=O/2|0;O;O>>>=1)H++;return 1<<H+1+U},b.prototype.conjugate=function(D,k,O){if(!(O<=1))for(var U=0;U<O/2;U++){var H=D[U];D[U]=D[O-U-1],D[O-U-1]=H,H=k[U],k[U]=-k[O-U-1],k[O-U-1]=-H}},b.prototype.normalize13b=function(D,k){for(var O=0,U=0;U<k/2;U++){var H=8192*Math.round(D[2*U+1]/k)+Math.round(D[2*U]/k)+O;D[U]=67108863&H,O=H<67108864?0:H/67108864|0}return D},b.prototype.convert13b=function(D,k,O,U){for(var H=0,j=0;j<k;j++)H+=0|D[j],O[2*j]=8191&H,H>>>=13,O[2*j+1]=8191&H,H>>>=13;for(j=2*k;j<U;++j)O[j]=0;a(0===H),a(0==(-8192&H))},b.prototype.stub=function(D){for(var k=new Array(D),O=0;O<D;O++)k[O]=0;return k},b.prototype.mulp=function(D,k,O){var U=2*this.guessLen13b(D.length,k.length),H=this.makeRBT(U),j=this.stub(U),ee=new Array(U),W=new Array(U),B=new Array(U),te=new Array(U),q=new Array(U),oe=new Array(U),ie=O.words;ie.length=U,this.convert13b(D.words,D.length,ee,U),this.convert13b(k.words,k.length,te,U),this.transform(ee,j,W,B,U,H),this.transform(te,j,q,oe,U,H);for(var V=0;V<U;V++){var Y=W[V]*q[V]-B[V]*oe[V];B[V]=W[V]*oe[V]+B[V]*q[V],W[V]=Y}return this.conjugate(W,B,U),this.transform(W,B,ie,j,U,H),this.conjugate(ie,j,U),this.normalize13b(ie,U),O.negative=D.negative^k.negative,O.length=D.length+k.length,O.strip()},o.prototype.mul=function(D){var k=new o(null);return k.words=new Array(this.length+D.length),this.mulTo(D,k)},o.prototype.mulf=function(D){var k=new o(null);return k.words=new Array(this.length+D.length),A(this,D,k)},o.prototype.imul=function(D){return this.clone().mulTo(D,this)},o.prototype.imuln=function(D){a("number"==typeof D),a(D<67108864);for(var k=0,O=0;O<this.length;O++){var U=(0|this.words[O])*D,H=(67108863&U)+(67108863&k);k>>=26,k+=U/67108864|0,k+=H>>>26,this.words[O]=67108863&H}return 0!==k&&(this.words[O]=k,this.length++),this},o.prototype.muln=function(D){return this.clone().imuln(D)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(D){var k=h(D);if(0===k.length)return new o(1);for(var O=this,U=0;U<k.length&&0===k[U];U++,O=O.sqr());if(++U<k.length)for(var H=O.sqr();U<k.length;U++,H=H.sqr())0!==k[U]&&(O=O.mul(H));return O},o.prototype.iushln=function(D){a("number"==typeof D&&D>=0);var H,k=D%26,O=(D-k)/26,U=67108863>>>26-k<<26-k;if(0!==k){var j=0;for(H=0;H<this.length;H++){var ee=this.words[H]&U,W=(0|this.words[H])-ee<<k;this.words[H]=W|j,j=ee>>>26-k}j&&(this.words[H]=j,this.length++)}if(0!==O){for(H=this.length-1;H>=0;H--)this.words[H+O]=this.words[H];for(H=0;H<O;H++)this.words[H]=0;this.length+=O}return this.strip()},o.prototype.ishln=function(D){return a(0===this.negative),this.iushln(D)},o.prototype.iushrn=function(D,k,O){var U;a("number"==typeof D&&D>=0),U=k?(k-k%26)/26:0;var H=D%26,j=Math.min((D-H)/26,this.length),ee=67108863^67108863>>>H<<H,W=O;if(U-=j,U=Math.max(0,U),W){for(var B=0;B<j;B++)W.words[B]=this.words[B];W.length=j}if(0!==j)if(this.length>j)for(this.length-=j,B=0;B<this.length;B++)this.words[B]=this.words[B+j];else this.words[0]=0,this.length=1;var te=0;for(B=this.length-1;B>=0&&(0!==te||B>=U);B--){var q=0|this.words[B];this.words[B]=te<<26-H|q>>>H,te=q&ee}return W&&0!==te&&(W.words[W.length++]=te),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(D,k,O){return a(0===this.negative),this.iushrn(D,k,O)},o.prototype.shln=function(D){return this.clone().ishln(D)},o.prototype.ushln=function(D){return this.clone().iushln(D)},o.prototype.shrn=function(D){return this.clone().ishrn(D)},o.prototype.ushrn=function(D){return this.clone().iushrn(D)},o.prototype.testn=function(D){a("number"==typeof D&&D>=0);var k=D%26,O=(D-k)/26,U=1<<k;return!(this.length<=O||!(this.words[O]&U))},o.prototype.imaskn=function(D){a("number"==typeof D&&D>=0);var k=D%26,O=(D-k)/26;if(a(0===this.negative,"imaskn works only with positive numbers"),this.length<=O)return this;if(0!==k&&O++,this.length=Math.min(O,this.length),0!==k){var U=67108863^67108863>>>k<<k;this.words[this.length-1]&=U}return this.strip()},o.prototype.maskn=function(D){return this.clone().imaskn(D)},o.prototype.iaddn=function(D){return a("number"==typeof D),a(D<67108864),D<0?this.isubn(-D):0!==this.negative?1===this.length&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},o.prototype._iaddn=function(D){this.words[0]+=D;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},o.prototype.isubn=function(D){if(a("number"==typeof D),a(D<67108864),D<0)return this.iaddn(-D);if(0!==this.negative)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this.strip()},o.prototype.addn=function(D){return this.clone().iaddn(D)},o.prototype.subn=function(D){return this.clone().isubn(D)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(D,k,O){var H,U=D.length+O;this._expand(U);var j,ee=0;for(H=0;H<D.length;H++){j=(0|this.words[H+O])+ee;var W=(0|D.words[H])*k;ee=((j-=67108863&W)>>26)-(W/67108864|0),this.words[H+O]=67108863&j}for(;H<this.length-O;H++)ee=(j=(0|this.words[H+O])+ee)>>26,this.words[H+O]=67108863&j;if(0===ee)return this.strip();for(a(-1===ee),ee=0,H=0;H<this.length;H++)ee=(j=-(0|this.words[H])+ee)>>26,this.words[H]=67108863&j;return this.negative=1,this.strip()},o.prototype._wordDiv=function(D,k){var O=this.length-D.length,U=this.clone(),H=D,j=0|H.words[H.length-1];0!=(O=26-this._countBits(j))&&(H=H.ushln(O),U.iushln(O),j=0|H.words[H.length-1]);var B,W=U.length-H.length;if("mod"!==k){(B=new o(null)).length=W+1,B.words=new Array(B.length);for(var te=0;te<B.length;te++)B.words[te]=0}var q=U.clone()._ishlnsubmul(H,1,W);0===q.negative&&(U=q,B&&(B.words[W]=1));for(var oe=W-1;oe>=0;oe--){var ie=67108864*(0|U.words[H.length+oe])+(0|U.words[H.length+oe-1]);for(ie=Math.min(ie/j|0,67108863),U._ishlnsubmul(H,ie,oe);0!==U.negative;)ie--,U.negative=0,U._ishlnsubmul(H,1,oe),U.isZero()||(U.negative^=1);B&&(B.words[oe]=ie)}return B&&B.strip(),U.strip(),"div"!==k&&0!==O&&U.iushrn(O),{div:B||null,mod:U}},o.prototype.divmod=function(D,k,O){return a(!D.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===D.negative?(j=this.neg().divmod(D,k),"mod"!==k&&(U=j.div.neg()),"div"!==k&&(H=j.mod.neg(),O&&0!==H.negative&&H.iadd(D)),{div:U,mod:H}):0===this.negative&&0!==D.negative?(j=this.divmod(D.neg(),k),"mod"!==k&&(U=j.div.neg()),{div:U,mod:j.mod}):this.negative&D.negative?(j=this.neg().divmod(D.neg(),k),"div"!==k&&(H=j.mod.neg(),O&&0!==H.negative&&H.isub(D)),{div:j.div,mod:H}):D.length>this.length||this.cmp(D)<0?{div:new o(0),mod:this}:1===D.length?"div"===k?{div:this.divn(D.words[0]),mod:null}:"mod"===k?{div:null,mod:new o(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new o(this.modn(D.words[0]))}:this._wordDiv(D,k);var U,H,j},o.prototype.div=function(D){return this.divmod(D,"div",!1).div},o.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},o.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},o.prototype.divRound=function(D){var k=this.divmod(D);if(k.mod.isZero())return k.div;var O=0!==k.div.negative?k.mod.isub(D):k.mod,U=D.ushrn(1),H=D.andln(1),j=O.cmp(U);return j<0||1===H&&0===j?k.div:0!==k.div.negative?k.div.isubn(1):k.div.iaddn(1)},o.prototype.modn=function(D){a(D<=67108863);for(var k=(1<<26)%D,O=0,U=this.length-1;U>=0;U--)O=(k*O+(0|this.words[U]))%D;return O},o.prototype.idivn=function(D){a(D<=67108863);for(var k=0,O=this.length-1;O>=0;O--){var U=(0|this.words[O])+67108864*k;this.words[O]=U/D|0,k=U%D}return this.strip()},o.prototype.divn=function(D){return this.clone().idivn(D)},o.prototype.egcd=function(D){a(0===D.negative),a(!D.isZero());var k=this,O=D.clone();k=0!==k.negative?k.umod(D):k.clone();for(var U=new o(1),H=new o(0),j=new o(0),ee=new o(1),W=0;k.isEven()&&O.isEven();)k.iushrn(1),O.iushrn(1),++W;for(var B=O.clone(),te=k.clone();!k.isZero();){for(var q=0,oe=1;!(k.words[0]&oe)&&q<26;++q,oe<<=1);if(q>0)for(k.iushrn(q);q-- >0;)(U.isOdd()||H.isOdd())&&(U.iadd(B),H.isub(te)),U.iushrn(1),H.iushrn(1);for(var ie=0,V=1;!(O.words[0]&V)&&ie<26;++ie,V<<=1);if(ie>0)for(O.iushrn(ie);ie-- >0;)(j.isOdd()||ee.isOdd())&&(j.iadd(B),ee.isub(te)),j.iushrn(1),ee.iushrn(1);k.cmp(O)>=0?(k.isub(O),U.isub(j),H.isub(ee)):(O.isub(k),j.isub(U),ee.isub(H))}return{a:j,b:ee,gcd:O.iushln(W)}},o.prototype._invmp=function(D){a(0===D.negative),a(!D.isZero());var q,k=this,O=D.clone();k=0!==k.negative?k.umod(D):k.clone();for(var U=new o(1),H=new o(0),j=O.clone();k.cmpn(1)>0&&O.cmpn(1)>0;){for(var ee=0,W=1;!(k.words[0]&W)&&ee<26;++ee,W<<=1);if(ee>0)for(k.iushrn(ee);ee-- >0;)U.isOdd()&&U.iadd(j),U.iushrn(1);for(var B=0,te=1;!(O.words[0]&te)&&B<26;++B,te<<=1);if(B>0)for(O.iushrn(B);B-- >0;)H.isOdd()&&H.iadd(j),H.iushrn(1);k.cmp(O)>=0?(k.isub(O),U.isub(H)):(O.isub(k),H.isub(U))}return(q=0===k.cmpn(1)?U:H).cmpn(0)<0&&q.iadd(D),q},o.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var k=this.clone(),O=D.clone();k.negative=0,O.negative=0;for(var U=0;k.isEven()&&O.isEven();U++)k.iushrn(1),O.iushrn(1);for(;;){for(;k.isEven();)k.iushrn(1);for(;O.isEven();)O.iushrn(1);var H=k.cmp(O);if(H<0){var j=k;k=O,O=j}else if(0===H||0===O.cmpn(1))break;k.isub(O)}return O.iushln(U)},o.prototype.invm=function(D){return this.egcd(D).a.umod(D)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(D){return this.words[0]&D},o.prototype.bincn=function(D){a("number"==typeof D);var k=D%26,O=(D-k)/26,U=1<<k;if(this.length<=O)return this._expand(O+1),this.words[O]|=U,this;for(var H=U,j=O;0!==H&&j<this.length;j++){var ee=0|this.words[j];H=(ee+=H)>>>26,ee&=67108863,this.words[j]=ee}return 0!==H&&(this.words[j]=H,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(D){var O,k=D<0;if(0!==this.negative&&!k)return-1;if(0===this.negative&&k)return 1;if(this.strip(),this.length>1)O=1;else{k&&(D=-D),a(D<=67108863,"Number is too big");var U=0|this.words[0];O=U===D?0:U<D?-1:1}return 0!==this.negative?0|-O:O},o.prototype.cmp=function(D){if(0!==this.negative&&0===D.negative)return-1;if(0===this.negative&&0!==D.negative)return 1;var k=this.ucmp(D);return 0!==this.negative?0|-k:k},o.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var k=0,O=this.length-1;O>=0;O--){var U=0|this.words[O],H=0|D.words[O];if(U!==H){U<H?k=-1:U>H&&(k=1);break}}return k},o.prototype.gtn=function(D){return 1===this.cmpn(D)},o.prototype.gt=function(D){return 1===this.cmp(D)},o.prototype.gten=function(D){return this.cmpn(D)>=0},o.prototype.gte=function(D){return this.cmp(D)>=0},o.prototype.ltn=function(D){return-1===this.cmpn(D)},o.prototype.lt=function(D){return-1===this.cmp(D)},o.prototype.lten=function(D){return this.cmpn(D)<=0},o.prototype.lte=function(D){return this.cmp(D)<=0},o.prototype.eqn=function(D){return 0===this.cmpn(D)},o.prototype.eq=function(D){return 0===this.cmp(D)},o.red=function(D){return new F(D)},o.prototype.toRed=function(D){return a(!this.red,"Already a number in reduction context"),a(0===this.negative,"red works only with positives"),D.convertTo(this)._forceRed(D)},o.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(D){return this.red=D,this},o.prototype.forceRed=function(D){return a(!this.red,"Already a number in reduction context"),this._forceRed(D)},o.prototype.redAdd=function(D){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},o.prototype.redIAdd=function(D){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},o.prototype.redSub=function(D){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},o.prototype.redISub=function(D){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},o.prototype.redShl=function(D){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},o.prototype.redMul=function(D){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},o.prototype.redIMul=function(D){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},o.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(D){return a(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var c={k256:null,p224:null,p192:null,p25519:null};function S(z,D){this.name=z,this.p=new o(D,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function R(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(z){if("string"==typeof z){var D=o._prime(z);this.m=D.p,this.prime=D}else a(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}function _(z){F.call(this,z),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var D=new o(null);return D.words=new Array(Math.ceil(this.n/13)),D},S.prototype.ireduce=function(D){var O,k=D;do{this.split(k,this.tmp),O=(k=(k=this.imulK(k)).iadd(this.tmp)).bitLength()}while(O>this.n);var U=O<this.n?-1:k.ucmp(this.p);return 0===U?(k.words[0]=0,k.length=1):U>0?k.isub(this.p):void 0!==k.strip?k.strip():k._strip(),k},S.prototype.split=function(D,k){D.iushrn(this.n,0,k)},S.prototype.imulK=function(D){return D.imul(this.k)},r(w,S),w.prototype.split=function(D,k){for(var O=4194303,U=Math.min(D.length,9),H=0;H<U;H++)k.words[H]=D.words[H];if(k.length=U,D.length<=9)return D.words[0]=0,void(D.length=1);var j=D.words[9];for(k.words[k.length++]=j&O,H=10;H<D.length;H++){var ee=0|D.words[H];D.words[H-10]=(ee&O)<<4|j>>>22,j=ee}j>>>=22,D.words[H-10]=j,0===j&&D.length>10?D.length-=10:D.length-=9},w.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var k=0,O=0;O<D.length;O++){var U=0|D.words[O];k+=977*U,D.words[O]=67108863&k,k=64*U+(k/67108864|0)}return 0===D.words[D.length-1]&&(D.length--,0===D.words[D.length-1]&&D.length--),D},r(E,S),r(P,S),r(R,S),R.prototype.imulK=function(D){for(var k=0,O=0;O<D.length;O++){var U=19*(0|D.words[O])+k,H=67108863&U;U>>>=26,D.words[O]=H,k=U}return 0!==k&&(D.words[D.length++]=k),D},o._prime=function(D){if(c[D])return c[D];var k;if("k256"===D)k=new w;else if("p224"===D)k=new E;else if("p192"===D)k=new P;else{if("p25519"!==D)throw new Error("Unknown prime "+D);k=new R}return c[D]=k,k},F.prototype._verify1=function(D){a(0===D.negative,"red works only with positives"),a(D.red,"red works only with red numbers")},F.prototype._verify2=function(D,k){a(0==(D.negative|k.negative),"red works only with positives"),a(D.red&&D.red===k.red,"red works only with red numbers")},F.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},F.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},F.prototype.add=function(D,k){this._verify2(D,k);var O=D.add(k);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},F.prototype.iadd=function(D,k){this._verify2(D,k);var O=D.iadd(k);return O.cmp(this.m)>=0&&O.isub(this.m),O},F.prototype.sub=function(D,k){this._verify2(D,k);var O=D.sub(k);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},F.prototype.isub=function(D,k){this._verify2(D,k);var O=D.isub(k);return O.cmpn(0)<0&&O.iadd(this.m),O},F.prototype.shl=function(D,k){return this._verify1(D),this.imod(D.ushln(k))},F.prototype.imul=function(D,k){return this._verify2(D,k),this.imod(D.imul(k))},F.prototype.mul=function(D,k){return this._verify2(D,k),this.imod(D.mul(k))},F.prototype.isqr=function(D){return this.imul(D,D.clone())},F.prototype.sqr=function(D){return this.mul(D,D)},F.prototype.sqrt=function(D){if(D.isZero())return D.clone();var k=this.m.andln(3);if(a(k%2==1),3===k){var O=this.m.add(new o(1)).iushrn(2);return this.pow(D,O)}for(var U=this.m.subn(1),H=0;!U.isZero()&&0===U.andln(1);)H++,U.iushrn(1);a(!U.isZero());var j=new o(1).toRed(this),ee=j.redNeg(),W=this.m.subn(1).iushrn(1),B=this.m.bitLength();for(B=new o(2*B*B).toRed(this);0!==this.pow(B,W).cmp(ee);)B.redIAdd(ee);for(var te=this.pow(B,U),q=this.pow(D,U.addn(1).iushrn(1)),oe=this.pow(D,U),ie=H;0!==oe.cmp(j);){for(var V=oe,Y=0;0!==V.cmp(j);Y++)V=V.redSqr();a(Y<ie);var ae=this.pow(te,new o(1).iushln(ie-Y-1));q=q.redMul(ae),te=ae.redSqr(),oe=oe.redMul(te),ie=Y}return q},F.prototype.invm=function(D){var k=D._invmp(this.m);return 0!==k.negative?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},F.prototype.pow=function(D,k){if(k.isZero())return new o(1).toRed(this);if(0===k.cmpn(1))return D.clone();var O=4,U=new Array(1<<O);U[0]=new o(1).toRed(this),U[1]=D;for(var H=2;H<U.length;H++)U[H]=this.mul(U[H-1],D);var j=U[0],ee=0,W=0,B=k.bitLength()%26;for(0===B&&(B=26),H=k.length-1;H>=0;H--){for(var te=k.words[H],q=B-1;q>=0;q--){var oe=te>>q&1;j!==U[0]&&(j=this.sqr(j)),0!==oe||0!==ee?(ee<<=1,ee|=oe,(++W===O||0===H&&0===q)&&(j=this.mul(j,U[ee]),W=0,ee=0)):W=0}B=26}return j},F.prototype.convertTo=function(D){var k=D.umod(this.m);return k===D?k.clone():k},F.prototype.convertFrom=function(D){var k=D.clone();return k.red=null,k},o.mont=function(D){return new _(D)},r(_,F),_.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},_.prototype.convertFrom=function(D){var k=this.imod(D.mul(this.rinv));return k.red=null,k},_.prototype.imul=function(D,k){if(D.isZero()||k.isZero())return D.words[0]=0,D.length=1,D;var O=D.imul(k),U=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=O.isub(U).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},_.prototype.mul=function(D,k){if(D.isZero()||k.isZero())return new o(0)._forceRed(this);var O=D.mul(k),U=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=O.isub(U).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},_.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=n.nmd(t),this)},2692:function(t){"use strict";function T(n){var i,u,a,r=n.length,o=0;for(i=0;i<r;++i)o+=n[i].length;var v=new Array(o),p=0;for(i=0;i<r;++i){var f=n[i],l=f.length;for(u=0;u<l;++u){var y=v[p++]=new Array(l-1),s=0;for(a=0;a<l;++a)a!==u&&(y[s++]=f[a]);if(1&u){var x=y[1];y[1]=y[0],y[0]=x}}}return v}t.exports=T},2569:function(t,T,n){"use strict";t.exports=s;var p,i=n(5306),u=n(1390),a=n(2337);function r(x,h){for(var g=0;g<x;++g)if(!(h[g]<=h[g+x]))return!0;return!1}function o(x,h,g,m){for(var d=0,A=0,b=0,c=x.length;b<c;++b){var S=x[b];if(!r(h,S)){for(var w=0;w<2*h;++w)g[d++]=S[w];m[A++]=b}}return A}function v(x,h,g,m){var d=x.length,A=h.length;if(!(d<=0||A<=0)){var b=x[0].length>>>1;if(!(b<=0)){var c,S=i.mallocDouble(2*b*d),w=i.mallocInt32(d);if((d=o(x,b,S,w))>0){if(1===b&&m)u.init(d),c=u.sweepComplete(b,g,0,d,S,w,0,d,S,w);else{var E=i.mallocDouble(2*b*A),P=i.mallocInt32(A);(A=o(h,b,E,P))>0&&(u.init(d+A),c=1===b?u.sweepBipartite(b,g,0,d,S,w,0,A,E,P):a(b,g,m,d,S,w,A,E,P),i.free(E),i.free(P))}i.free(S),i.free(w)}return c}}}function f(x,h){p.push([x,h])}function l(x){return p=[],v(x,x,f,!0),p}function y(x,h){return p=[],v(x,h,f,!1),p}function s(x,h,g){switch(arguments.length){case 1:return l(x);case 2:return"function"==typeof h?v(x,x,h,!0):y(x,h);case 3:return v(x,h,g,!1);default:throw new Error("box-intersect: Invalid arguments")}}},7333:function(t,T){"use strict";function n(){function a(v,p,f,l,y,s,x,h,g,m,d){for(var A=2*v,b=l,c=A*l;b<y;++b,c+=A){var S=s[p+c],w=s[p+c+v],E=x[b];e:for(var P=h,R=A*h;P<g;++P,R+=A){var F=m[p+R],_=m[p+R+v],z=d[P];if(!(_<S||w<F)){for(var D=p+1;D<v;++D){var k=s[D+c],O=s[D+v+c],U=m[D+R],H=m[D+v+R];if(O<U||H<k)continue e}var j=f(E,z);if(void 0!==j)return j}}}}function r(v,p,f,l,y,s,x,h,g,m,d){for(var A=2*v,b=h,c=A*h;b<g;++b,c+=A){var S=m[p+c],w=m[p+c+v],E=d[b];e:for(var P=l,R=A*l;P<y;++P,R+=A){var F=s[p+R],_=s[p+R+v],z=x[P];if(!(w<F||_<S)){for(var D=p+1;D<v;++D){var k=s[D+R],O=s[D+v+R],U=m[D+c],H=m[D+v+c];if(O<U||H<k)continue e}var j=f(z,E);if(void 0!==j)return j}}}}function o(v,p,f,l,y,s,x,h,g,m,d){return y-l>g-h?a(v,p,f,l,y,s,x,h,g,m,d):r(v,p,f,l,y,s,x,h,g,m,d)}return o}function i(){function a(f,l,y,s,x,h,g,m,d,A,b){for(var c=2*f,S=s,w=c*s;S<x;++S,w+=c){var E=h[l+w],P=h[l+w+f],R=g[S];e:for(var F=m,_=c*m;F<d;++F,_+=c){var z=A[l+_],D=b[F];if(!(z<=E||P<z)){for(var k=l+1;k<f;++k){var O=h[k+w],U=h[k+f+w],H=A[k+_],j=A[k+f+_];if(U<H||j<O)continue e}var ee=y(D,R);if(void 0!==ee)return ee}}}}function r(f,l,y,s,x,h,g,m,d,A,b){for(var c=2*f,S=s,w=c*s;S<x;++S,w+=c){var E=h[l+w],P=h[l+w+f],R=g[S];e:for(var F=m,_=c*m;F<d;++F,_+=c){var z=A[l+_],D=b[F];if(!(z<E||P<z)){for(var k=l+1;k<f;++k){var O=h[k+w],U=h[k+f+w],H=A[k+_],j=A[k+f+_];if(U<H||j<O)continue e}var ee=y(R,D);if(void 0!==ee)return ee}}}}function o(f,l,y,s,x,h,g,m,d,A,b){for(var c=2*f,S=m,w=c*m;S<d;++S,w+=c){var E=A[l+w],P=b[S];e:for(var R=s,F=c*s;R<x;++R,F+=c){var _=h[l+F],z=h[l+F+f],D=g[R];if(!(E<=_||z<E)){for(var k=l+1;k<f;++k){var O=h[k+F],U=h[k+f+F],H=A[k+w],j=A[k+f+w];if(U<H||j<O)continue e}var ee=y(P,D);if(void 0!==ee)return ee}}}}function v(f,l,y,s,x,h,g,m,d,A,b){for(var c=2*f,S=m,w=c*m;S<d;++S,w+=c){var E=A[l+w],P=b[S];e:for(var R=s,F=c*s;R<x;++R,F+=c){var _=h[l+F],z=h[l+F+f],D=g[R];if(!(E<_||z<E)){for(var k=l+1;k<f;++k){var O=h[k+F],U=h[k+f+F],H=A[k+w],j=A[k+f+w];if(U<H||j<O)continue e}var ee=y(D,P);if(void 0!==ee)return ee}}}}function p(f,l,y,s,x,h,g,m,d,A,b,c){return h-x>A-d?s?a(f,l,y,x,h,g,m,d,A,b,c):r(f,l,y,x,h,g,m,d,A,b,c):s?o(f,l,y,x,h,g,m,d,A,b,c):v(f,l,y,x,h,g,m,d,A,b,c)}return p}function u(a){return a?n():i()}T.partial=u(!1),T.full=u(!0)},2337:function(t,T,n){"use strict";t.exports=z;var i=n(5306),u=n(2288),a=n(7333),r=a.partial,o=a.full,v=n(1390),p=n(2464),f=n(122),l=128,y=1<<22,s=1<<22,x=f("!(lo>=p0)&&!(p1>=hi)"),h=f("lo===p0"),g=f("lo<p0"),m=f("hi<=p0"),d=f("lo<=p0&&p0<=hi"),A=f("lo<p0&&p0<=hi"),b=6,c=2,S=1024,w=i.mallocInt32(S),E=i.mallocDouble(S);function P(D,k){var O=8*u.log2(k+1)*(D+1)|0,U=u.nextPow2(b*O);w.length<U&&(i.free(w),w=i.mallocInt32(U));var H=u.nextPow2(c*O);E.length<H&&(i.free(E),E=i.mallocDouble(H))}function R(D,k,O,U,H,j,ee,W,B){var te=b*D;w[te]=k,w[te+1]=O,w[te+2]=U,w[te+3]=H,w[te+4]=j,w[te+5]=ee;var q=c*D;E[q]=W,E[q+1]=B}function F(D,k,O,U,H,j,ee,W,B,te,q){var oe=2*D,ie=B*oe,V=te[ie+k];e:for(var Y=H,ae=H*oe;Y<j;++Y,ae+=oe){var X=ee[ae+k],J=ee[ae+k+D];if(!(V<X||J<V||U&&V===X)){for(var ue=W[Y],re=k+1;re<D;++re){X=ee[ae+re],J=ee[ae+re+D];var ne=te[ie+re],se=te[ie+re+D];if(J<ne||se<X)continue e}var de;if(void 0!==(de=U?O(q,ue):O(ue,q)))return de}}}function _(D,k,O,U,H,j,ee,W,B,te){var q=2*D,oe=W*q,ie=B[oe+k];e:for(var V=U,Y=U*q;V<H;++V,Y+=q){var ae=ee[V];if(ae!==te){var X=j[Y+k],J=j[Y+k+D];if(!(ie<X||J<ie)){for(var ue=k+1;ue<D;++ue){X=j[Y+ue],J=j[Y+ue+D];var re=B[oe+ue],ne=B[oe+ue+D];if(J<re||ne<X)continue e}var se=O(ae,te);if(void 0!==se)return se}}}}function z(D,k,O,U,H,j,ee,W,B){P(D,U+ee);var oe,te=0,q=2*D;for(R(te++,0,0,U,0,ee,O?16:0,-1/0,1/0),O||R(te++,0,0,ee,0,U,1,-1/0,1/0);te>0;){var ie=(te-=1)*b,V=w[ie],Y=w[ie+1],ae=w[ie+2],X=w[ie+3],J=w[ie+4],ue=w[ie+5],re=te*c,ne=E[re],se=E[re+1],de=1&ue,be=!!(16&ue),De=H,_e=j,Ce=W,Le=B;if(de&&(De=W,_e=B,Ce=H,Le=j),!(2&ue&&(ae=g(D,V,Y,ae,De,_e,se),Y>=ae)||4&ue&&(Y=m(D,V,Y,ae,De,_e,ne),Y>=ae))){var Fe=ae-Y,ke=J-X;if(be){if(D*Fe*(Fe+ke)<s){if(void 0!==(oe=v.scanComplete(D,V,k,Y,ae,De,_e,X,J,Ce,Le)))return oe;continue}}else{if(D*Math.min(Fe,ke)<l){if(void 0!==(oe=r(D,V,k,de,Y,ae,De,_e,X,J,Ce,Le)))return oe;continue}if(D*Fe*ke<y){if(void 0!==(oe=v.scanBipartite(D,V,k,de,Y,ae,De,_e,X,J,Ce,Le)))return oe;continue}}var ze=x(D,V,Y,ae,De,_e,ne,se);if(Y<ze)if(D*(ze-Y)<l){if(void 0!==(oe=o(D,V+1,k,Y,ze,De,_e,X,J,Ce,Le)))return oe}else if(V===D-2){if(void 0!==(oe=de?v.sweepBipartite(D,k,X,J,Ce,Le,Y,ze,De,_e):v.sweepBipartite(D,k,Y,ze,De,_e,X,J,Ce,Le)))return oe}else R(te++,V+1,Y,ze,X,J,de,-1/0,1/0),R(te++,V+1,X,J,Y,ze,1^de,-1/0,1/0);if(ze<ae){var Pe=p(D,V,X,J,Ce,Le),Ie=Ce[q*Pe+V],Qe=h(D,V,Pe,J,Ce,Le,Ie);if(Qe<J&&R(te++,V,ze,ae,Qe,J,(4|de)+(be?16:0),Ie,se),X<Pe&&R(te++,V,ze,ae,X,Pe,(2|de)+(be?16:0),ne,Ie),Pe+1===Qe){if(void 0!==(oe=be?_(D,V,k,ze,ae,De,_e,Pe,Ce,Le[Pe]):F(D,V,k,de,ze,ae,De,_e,Pe,Ce,Le[Pe])))return oe}else if(Pe<Qe){var at;if(be){if(ze<(at=d(D,V,ze,ae,De,_e,Ie))){var Be=h(D,V,ze,at,De,_e,Ie);if(V===D-2){if(ze<Be&&void 0!==(oe=v.sweepComplete(D,k,ze,Be,De,_e,Pe,Qe,Ce,Le))||Be<at&&void 0!==(oe=v.sweepBipartite(D,k,Be,at,De,_e,Pe,Qe,Ce,Le)))return oe}else ze<Be&&R(te++,V+1,ze,Be,Pe,Qe,16,-1/0,1/0),Be<at&&(R(te++,V+1,Be,at,Pe,Qe,0,-1/0,1/0),R(te++,V+1,Pe,Qe,Be,at,1,-1/0,1/0))}}else ze<(at=de?A(D,V,ze,ae,De,_e,Ie):d(D,V,ze,ae,De,_e,Ie))&&(V===D-2?oe=de?v.sweepBipartite(D,k,Pe,Qe,Ce,Le,ze,at,De,_e):v.sweepBipartite(D,k,ze,at,De,_e,Pe,Qe,Ce,Le):(R(te++,V+1,ze,at,Pe,Qe,de,-1/0,1/0),R(te++,V+1,Pe,Qe,ze,at,1^de,-1/0,1/0)))}}}}}},2464:function(t,T,n){"use strict";t.exports=o;var u=n(122)("lo<p0"),a=8;function r(v,p,f,l,y,s){for(var x=2*v,h=x*(f+1)+p,g=f+1;g<l;++g,h+=x)for(var m=y[h],d=g,A=x*(g-1);d>f&&y[A+p]>m;--d,A-=x){for(var b=A,c=A+x,S=0;S<x;++S,++b,++c){var w=y[b];y[b]=y[c],y[c]=w}var E=s[d];s[d]=s[d-1],s[d-1]=E}}function o(v,p,f,l,y,s){if(l<=f+1)return f;for(var x=f,h=l,g=l+f>>>1,m=2*v,d=g,A=y[m*g+p];x<h;){if(h-x<a){r(v,p,x,h,y,s),A=y[m*g+p];break}var b=h-x,c=Math.random()*b+x|0,S=y[m*c+p],w=Math.random()*b+x|0,E=y[m*w+p],P=Math.random()*b+x|0,R=y[m*P+p];S<=E?R>=E?(d=w,A=E):S>=R?(d=c,A=S):(d=P,A=R):E>=R?(d=w,A=E):R>=S?(d=c,A=S):(d=P,A=R);for(var z=m*(h-1),D=m*d,F=0;F<m;++F,++z,++D){var _=y[z];y[z]=y[D],y[D]=_}var k=s[h-1];for(s[h-1]=s[d],s[d]=k,z=m*(h-1),D=m*(d=u(v,p,x,h-1,y,s,A)),F=0;F<m;++F,++z,++D)_=y[z],y[z]=y[D],y[D]=_;if(k=s[h-1],s[h-1]=s[d],s[d]=k,g<d){for(h=d-1;x<h&&y[m*(h-1)+p]===A;)h-=1;h+=1}else{if(!(d<g))break;for(x=d+1;x<h&&y[m*x+p]===A;)x+=1}}return u(v,p,f,g,y,s,y[m*g+p])}},122:function(t){"use strict";t.exports=n;var T={"lo===p0":i,"lo<p0":u,"lo<=p0":a,"hi<=p0":r,"lo<p0&&p0<=hi":v,"lo<=p0&&p0<=hi":o,"!(lo>=p0)&&!(p1>=hi)":p};function n(f){return T[f]}function i(f,l,y,s,x,h,g){for(var m=2*f,d=m*y,A=d,b=y,c=l,w=y;s>w;++w,d+=m)if(x[d+c]===g)if(b===w)b+=1,A+=m;else{for(var P=0;m>P;++P){var R=x[d+P];x[d+P]=x[A],x[A++]=R}var F=h[w];h[w]=h[b],h[b++]=F}return b}function u(f,l,y,s,x,h,g){for(var m=2*f,d=m*y,A=d,b=y,c=l,w=y;s>w;++w,d+=m)if(x[d+c]<g)if(b===w)b+=1,A+=m;else{for(var P=0;m>P;++P){var R=x[d+P];x[d+P]=x[A],x[A++]=R}var F=h[w];h[w]=h[b],h[b++]=F}return b}function a(f,l,y,s,x,h,g){for(var m=2*f,d=m*y,A=d,b=y,S=f+l,w=y;s>w;++w,d+=m)if(x[d+S]<=g)if(b===w)b+=1,A+=m;else{for(var P=0;m>P;++P){var R=x[d+P];x[d+P]=x[A],x[A++]=R}var F=h[w];h[w]=h[b],h[b++]=F}return b}function r(f,l,y,s,x,h,g){for(var m=2*f,d=m*y,A=d,b=y,S=f+l,w=y;s>w;++w,d+=m)if(x[d+S]<=g)if(b===w)b+=1,A+=m;else{for(var P=0;m>P;++P){var R=x[d+P];x[d+P]=x[A],x[A++]=R}var F=h[w];h[w]=h[b],h[b++]=F}return b}function o(f,l,y,s,x,h,g){for(var m=2*f,d=m*y,A=d,b=y,c=l,S=f+l,w=y;s>w;++w,d+=m){var E=x[d+c],P=x[d+S];if(E<=g&&g<=P)if(b===w)b+=1,A+=m;else{for(var R=0;m>R;++R){var F=x[d+R];x[d+R]=x[A],x[A++]=F}var _=h[w];h[w]=h[b],h[b++]=_}}return b}function v(f,l,y,s,x,h,g){for(var m=2*f,d=m*y,A=d,b=y,c=l,S=f+l,w=y;s>w;++w,d+=m){var E=x[d+c],P=x[d+S];if(E<g&&g<=P)if(b===w)b+=1,A+=m;else{for(var R=0;m>R;++R){var F=x[d+R];x[d+R]=x[A],x[A++]=F}var _=h[w];h[w]=h[b],h[b++]=_}}return b}function p(f,l,y,s,x,h,g,m){for(var d=2*f,A=d*y,b=A,c=y,S=l,w=f+l,E=y;s>E;++E,A+=d){var P=x[A+S],R=x[A+w];if(!(P>=g||m>=R))if(c===E)c+=1,b+=d;else{for(var F=0;d>F;++F){var _=x[A+F];x[A+F]=x[b],x[b++]=_}var z=h[E];h[E]=h[c],h[c++]=z}}return c}},309:function(t){"use strict";t.exports=n;var T=32;function n(l,y){y<=4*T?i(0,y-1,l):f(0,y-1,l)}function i(l,y,s){for(var x=2*(l+1),h=l+1;h<=y;++h){for(var g=s[x++],m=s[x++],d=h,A=x-2;d-- >l;){var b=s[A-2],c=s[A-1];if(b<g)break;if(b===g&&c<m)break;s[A]=b,s[A+1]=c,A-=2}s[A]=g,s[A+1]=m}}function u(l,y,s){y*=2;var x=s[l*=2],h=s[l+1];s[l]=s[y],s[l+1]=s[y+1],s[y]=x,s[y+1]=h}function a(l,y,s){y*=2,s[l*=2]=s[y],s[l+1]=s[y+1]}function r(l,y,s,x){y*=2,s*=2;var h=x[l*=2],g=x[l+1];x[l]=x[y],x[l+1]=x[y+1],x[y]=x[s],x[y+1]=x[s+1],x[s]=h,x[s+1]=g}function o(l,y,s,x,h){y*=2,h[l*=2]=h[y],h[y]=s,h[l+1]=h[y+1],h[y+1]=x}function v(l,y,s){y*=2;var x=s[l*=2],h=s[y];return!(x<h)&&(x!==h||s[l+1]>s[y+1])}function p(l,y,s,x){var h=x[l*=2];return h<y||h===y&&x[l+1]<s}function f(l,y,s){var x=(y-l+1)/6|0,h=l+x,g=y-x,m=l+y>>1,d=m-x,A=m+x,b=h,c=d,S=m,w=A,E=g,P=l+1,R=y-1,F=0;v(b,c,s)&&(F=b,b=c,c=F),v(w,E,s)&&(F=w,w=E,E=F),v(b,S,s)&&(F=b,b=S,S=F),v(c,S,s)&&(F=c,c=S,S=F),v(b,w,s)&&(F=b,b=w,w=F),v(S,w,s)&&(F=S,S=w,w=F),v(c,E,s)&&(F=c,c=E,E=F),v(c,S,s)&&(F=c,c=S,S=F),v(w,E,s)&&(F=w,w=E,E=F);for(var _=s[2*c],z=s[2*c+1],D=s[2*w],k=s[2*w+1],O=2*b,U=2*S,H=2*E,j=2*h,ee=2*m,W=2*g,B=0;B<2;++B){var te=s[O+B],q=s[U+B],oe=s[H+B];s[j+B]=te,s[ee+B]=q,s[W+B]=oe}a(d,l,s),a(A,y,s);for(var ie=P;ie<=R;++ie)if(p(ie,_,z,s))ie!==P&&u(ie,P,s),++P;else if(!p(ie,D,k,s))for(;;){if(p(R,D,k,s)){p(R,_,z,s)?(r(ie,P,R,s),++P,--R):(u(ie,R,s),--R);break}if(--R<ie)break}o(l,P-1,_,z,s),o(y,R+1,D,k,s),P-2-l<=T?i(l,P-2,s):f(l,P-2,s),y-(R+2)<=T?i(R+2,y,s):f(R+2,y,s),R-P<=T?i(P,R,s):f(P,R,s)}},1390:function(t,T,n){"use strict";t.exports={init:h,sweepBipartite:d,sweepComplete:A,scanBipartite:b,scanComplete:c};var i=n(5306),u=n(2288),a=n(309),r=1<<28,o=1024,v=i.mallocInt32(o),p=i.mallocInt32(o),f=i.mallocInt32(o),l=i.mallocInt32(o),y=i.mallocInt32(o),s=i.mallocInt32(o),x=i.mallocDouble(8*o);function h(S){var w=u.nextPow2(S);v.length<w&&(i.free(v),v=i.mallocInt32(w)),p.length<w&&(i.free(p),p=i.mallocInt32(w)),f.length<w&&(i.free(f),f=i.mallocInt32(w)),l.length<w&&(i.free(l),l=i.mallocInt32(w)),y.length<w&&(i.free(y),y=i.mallocInt32(w)),s.length<w&&(i.free(s),s=i.mallocInt32(w));var E=8*w;x.length<E&&(i.free(x),x=i.mallocDouble(E))}function g(S,w,E,P){var R=w[P],F=S[E-1];S[R]=F,w[F]=R}function m(S,w,E,P){S[E]=P,w[P]=E}function d(S,w,E,P,R,F,_,z,D,k){for(var O=0,U=2*S,H=S-1,j=U-1,ee=E;ee<P;++ee){var W=F[ee],B=U*ee;x[O++]=R[B+H],x[O++]=-(W+1),x[O++]=R[B+j],x[O++]=W}for(ee=_;ee<z;++ee){W=k[ee]+r;var te=U*ee;x[O++]=D[te+H],x[O++]=-W,x[O++]=D[te+j],x[O++]=W}var q=O>>>1;a(x,q);var oe=0,ie=0;for(ee=0;ee<q;++ee){var V=0|x[2*ee+1];if(V>=r)g(f,l,ie--,V=V-r|0);else if(V>=0)g(v,p,oe--,V);else if(V<=-r){V=-V-r|0;for(var Y=0;Y<oe;++Y)if(void 0!==(ae=w(v[Y],V)))return ae;m(f,l,ie++,V)}else{for(V=-V-1|0,Y=0;Y<ie;++Y){var ae;if(void 0!==(ae=w(V,f[Y])))return ae}m(v,p,oe++,V)}}}function A(S,w,E,P,R,F,_,z,D,k){for(var O=0,U=2*S,H=S-1,j=U-1,ee=E;ee<P;++ee){var W=F[ee]+1<<1,B=U*ee;x[O++]=R[B+H],x[O++]=-W,x[O++]=R[B+j],x[O++]=W}for(ee=_;ee<z;++ee){W=k[ee]+1<<1;var te=U*ee;x[O++]=D[te+H],x[O++]=1|-W,x[O++]=D[te+j],x[O++]=1|W}var q=O>>>1;a(x,q);var oe=0,ie=0,V=0;for(ee=0;ee<q;++ee){var Y=0|x[2*ee+1],ae=1&Y;if(ee<q-1&&Y>>1==x[2*ee+3]>>1&&(ae=2,ee+=1),Y<0){for(var X=-(Y>>1)-1,J=0;J<V;++J)if(void 0!==(ue=w(y[J],X)))return ue;if(0!==ae)for(J=0;J<oe;++J)if(void 0!==(ue=w(v[J],X)))return ue;if(1!==ae)for(J=0;J<ie;++J){var ue;if(void 0!==(ue=w(f[J],X)))return ue}0===ae?m(v,p,oe++,X):1===ae?m(f,l,ie++,X):2===ae&&m(y,s,V++,X)}else X=(Y>>1)-1,0===ae?g(v,p,oe--,X):1===ae?g(f,l,ie--,X):2===ae&&g(y,s,V--,X)}}function b(S,w,E,P,R,F,_,z,D,k,O,U){var H=0,j=2*S,ee=w,W=w+S,B=1,te=1;P?te=r:B=r;for(var q=R;q<F;++q){var oe=q+B,ie=j*q;x[H++]=_[ie+ee],x[H++]=-oe,x[H++]=_[ie+W],x[H++]=oe}for(q=D;q<k;++q){oe=q+te;var V=j*q;x[H++]=O[V+ee],x[H++]=-oe}var Y=H>>>1;a(x,Y);var ae=0;for(q=0;q<Y;++q){var X=0|x[2*q+1];if(X<0){var J=!1;if((oe=-X)>=r?(J=!P,oe-=r):(J=!!P,oe-=1),J)m(v,p,ae++,oe);else{var ue=U[oe],re=j*oe,ne=O[re+w+1],se=O[re+w+1+S];e:for(var de=0;de<ae;++de){var be=v[de],De=j*be;if(!(se<_[De+w+1]||_[De+w+1+S]<ne)){for(var _e=w+2;_e<S;++_e)if(O[re+_e+S]<_[De+_e]||_[De+_e+S]<O[re+_e])continue e;var Le,Ce=z[be];if(void 0!==(Le=P?E(ue,Ce):E(Ce,ue)))return Le}}}}else g(v,p,ae--,X-B)}}function c(S,w,E,P,R,F,_,z,D,k,O){for(var U=0,H=2*S,j=w,ee=w+S,W=P;W<R;++W){var B=W+r,te=H*W;x[U++]=F[te+j],x[U++]=-B,x[U++]=F[te+ee],x[U++]=B}for(W=z;W<D;++W){B=W+1;var q=H*W;x[U++]=k[q+j],x[U++]=-B}var oe=U>>>1;a(x,oe);var ie=0;for(W=0;W<oe;++W){var V=0|x[2*W+1];if(V<0)if((B=-V)>=r)v[ie++]=B-r;else{var Y=O[B-=1],ae=H*B,X=k[ae+w+1],J=k[ae+w+1+S];e:for(var ue=0;ue<ie;++ue){var re=v[ue],ne=_[re];if(ne===Y)break;var se=H*re;if(!(J<F[se+w+1]||F[se+w+1+S]<X)){for(var de=w+2;de<S;++de)if(k[ae+de+S]<F[se+de]||F[se+de+S]<k[ae+de])continue e;var be=E(ne,Y);if(void 0!==be)return be}}}else{for(B=V-r,ue=ie-1;ue>=0;--ue)if(v[ue]===B){for(de=ue+1;de<ie;++de)v[de-1]=v[de];break}--ie}}}},7761:function(t,T,n){"use strict";var i=n(9971),u=n(743),a=n(2161),r=n(7098);function o(y){return[Math.min(y[0],y[1]),Math.max(y[0],y[1])]}function v(y,s){return y[0]-s[0]||y[1]-s[1]}function p(y){return y.map(o).sort(v)}function f(y,s,x){return s in y?y[s]:x}function l(y,s,x){Array.isArray(s)?(x=x||{},s=s||[]):(x=s||{},s=[]);var h=!!f(x,"delaunay",!0),g=!!f(x,"interior",!0),m=!!f(x,"exterior",!0),d=!!f(x,"infinity",!1);if(!g&&!m||0===y.length)return[];var A=i(y,s);if(h||g!==m||d){for(var b=u(y.length,p(s)),c=0;c<A.length;++c){var S=A[c];b.addTriangle(S[0],S[1],S[2])}return h&&a(y,b),m?g?d?r(b,0,d):b.cells():r(b,1,d):r(b,-1)}return A}t.exports=l},2161:function(t,T,n){"use strict";var i=n(2227)[4];function a(o,v,p,f,l,y){var s=v.opposite(f,l);if(!(s<0)){if(l<f){var x=f;f=l,l=x,x=y,y=s,s=x}v.isConstraint(f,l)||i(o[f],o[l],o[y],o[s])<0&&p.push(f,l)}}function r(o,v){for(var p=[],f=o.length,l=v.stars,y=0;y<f;++y)for(var s=l[y],x=1;x<s.length;x+=2)if(!((h=s[x])<y||v.isConstraint(y,h))){for(var g=s[x-1],m=-1,d=1;d<s.length;d+=2)if(s[d-1]===h){m=s[d];break}m<0||i(o[y],o[h],o[g],o[m])<0&&p.push(y,h)}for(;p.length>0;){for(var h=p.pop(),A=(g=-1,m=-1,s=l[y=p.pop()],1);A<s.length;A+=2){var b=s[A-1],c=s[A];b===h?m=c:c===h&&(g=b)}g<0||m<0||i(o[y],o[h],o[g],o[m])>=0||(v.flip(y,h),a(o,v,p,g,y,m),a(o,v,p,y,m,g),a(o,v,p,m,h,g),a(o,v,p,h,g,m))}}n(5070),t.exports=r},7098:function(t,T,n){"use strict";var f,i=n(5070);function u(f,l,y,s,x,h,g){this.cells=f,this.neighbor=l,this.flags=s,this.constraint=y,this.active=x,this.next=h,this.boundary=g}function r(f,l){return f[0]-l[0]||f[1]-l[1]||f[2]-l[2]}function o(f,l){for(var y=f.cells(),s=y.length,x=0;x<s;++x){var g=(h=y[x])[0],m=h[1],d=h[2];m<d?m<g&&(h[0]=m,h[1]=d,h[2]=g):d<g&&(h[0]=d,h[1]=g,h[2]=m)}y.sort(r);var A=new Array(s);for(x=0;x<A.length;++x)A[x]=0;var b=[],c=[],S=new Array(3*s),w=new Array(3*s),E=null;l&&(E=[]);var P=new u(y,S,w,A,b,c,E);for(x=0;x<s;++x)for(var h=y[x],R=0;R<3;++R){g=h[R],m=h[(R+1)%3];var F=S[3*x+R]=P.locate(m,g,f.opposite(m,g)),_=w[3*x+R]=f.isConstraint(g,m);F<0&&(_?c.push(x):(b.push(x),A[x]=1),l&&E.push([m,g,-1]))}return P}function v(f,l,y){for(var s=0,x=0;x<f.length;++x)l[x]===y&&(f[s++]=f[x]);return f.length=s,f}function p(f,l,y){var s=o(f,y);if(0===l)return y?s.cells.concat(s.boundary):s.cells;for(var x=1,h=s.active,g=s.next,m=s.flags,d=s.cells,A=s.constraint,b=s.neighbor;h.length>0||g.length>0;){for(;h.length>0;){var c=h.pop();if(m[c]!==-x){m[c]=x,d[c];for(var w=0;w<3;++w){var E=b[3*c+w];E>=0&&0===m[E]&&(A[3*c+w]?g.push(E):(h.push(E),m[E]=x))}}}var P=g;g=h,h=P,g.length=0,x=-x}var R=v(d,m,l);return y?R.concat(s.boundary):R}t.exports=p,u.prototype.locate=(f=[0,0,0],function(l,y,s){var x=l,h=y,g=s;return y<s?y<l&&(x=y,h=s,g=l):s<l&&(x=s,h=l,g=y),x<0?-1:(f[0]=x,f[1]=h,f[2]=g,i.eq(this.cells,f,r))})},9971:function(t,T,n){"use strict";var i=n(5070),u=n(417)[3],a=0,r=1,o=2;function v(m,d,A,b,c){this.a=m,this.b=d,this.idx=A,this.lowerIds=b,this.upperIds=c}function p(m,d,A,b){this.a=m,this.b=d,this.type=A,this.idx=b}function f(m,d){var A=m.a[0]-d.a[0]||m.a[1]-d.a[1]||m.type-d.type;return A||m.type!==a&&(A=u(m.a,m.b,d.b))?A:m.idx-d.idx}function l(m,d){return u(m.a,m.b,d)}function y(m,d,A,b,c){for(var S=i.lt(d,b,l),w=i.gt(d,b,l),E=S;E<w;++E){for(var P=d[E],R=P.lowerIds,_=R.length;_>1&&u(A[R[_-2]],A[R[_-1]],b)>0;)m.push([R[_-1],R[_-2],c]),_-=1;R.length=_,R.push(c);var F=P.upperIds;for(_=F.length;_>1&&u(A[F[_-2]],A[F[_-1]],b)<0;)m.push([F[_-2],F[_-1],c]),_-=1;F.length=_,F.push(c)}}function s(m,d){return(m.a[0]<d.a[0]?u(m.a,m.b,d.a):u(d.b,d.a,m.a))||(d.b[0]<m.b[0]?u(m.a,m.b,d.b):u(d.b,d.a,m.b))||m.idx-d.idx}function x(m,d,A){var b=i.le(m,A,s),c=m[b],S=c.upperIds,w=S[S.length-1];c.upperIds=[w],m.splice(b+1,0,new v(A.a,A.b,A.idx,[w],S))}function h(m,d,A){var b=A.a;A.a=A.b,A.b=b;var c=i.eq(m,A,s),S=m[c];m[c-1].upperIds=S.upperIds,m.splice(c,1)}function g(m,d){for(var A=m.length,b=d.length,c=[],S=0;S<A;++S)c.push(new p(m[S],null,a,S));for(S=0;S<b;++S){var w=d[S],E=m[w[0]],P=m[w[1]];E[0]<P[0]?c.push(new p(E,P,o,S),new p(P,E,r,S)):E[0]>P[0]&&c.push(new p(P,E,o,S),new p(E,P,r,S))}c.sort(f);for(var R=c[0].a[0]-(1+Math.abs(c[0].a[0]))*Math.pow(2,-52),F=[new v([R,1],[R,0],-1,[],[],[],[])],_=[],z=(S=0,c.length);S<z;++S){var D=c[S],k=D.type;k===a?y(_,F,m,D.a,D.idx):k===o?x(F,m,D):h(F,m,D)}return _}t.exports=g},743:function(t,T,n){"use strict";var i=n(5070);function u(v,p){this.stars=v,this.edges=p}t.exports=o;var a=u.prototype;function r(v,p,f){for(var l=1,y=v.length;l<y;l+=2)if(v[l-1]===p&&v[l]===f)return v[l-1]=v[y-2],v[l]=v[y-1],void(v.length=y-2)}function o(v,p){for(var f=new Array(v),l=0;l<v;++l)f[l]=[];return new u(f,p)}a.isConstraint=function(){var v=[0,0];function p(f,l){return f[0]-l[0]||f[1]-l[1]}return function(f,l){return v[0]=Math.min(f,l),v[1]=Math.max(f,l),i.eq(this.edges,v,p)>=0}}(),a.removeTriangle=function(v,p,f){var l=this.stars;r(l[v],p,f),r(l[p],f,v),r(l[f],v,p)},a.addTriangle=function(v,p,f){var l=this.stars;l[v].push(p,f),l[p].push(f,v),l[f].push(v,p)},a.opposite=function(v,p){for(var f=this.stars[p],l=1,y=f.length;l<y;l+=2)if(f[l]===v)return f[l-1];return-1},a.flip=function(v,p){var f=this.opposite(v,p),l=this.opposite(p,v);this.removeTriangle(v,p,f),this.removeTriangle(p,v,l),this.addTriangle(v,l,f),this.addTriangle(p,f,l)},a.edges=function(){for(var v=this.stars,p=[],f=0,l=v.length;f<l;++f)for(var y=v[f],s=0,x=y.length;s<x;s+=2)p.push([y[s],y[s+1]]);return p},a.cells=function(){for(var v=this.stars,p=[],f=0,l=v.length;f<l;++f)for(var y=v[f],s=0,x=y.length;s<x;s+=2){var h=y[s],g=y[s+1];f<Math.min(h,g)&&p.push([f,h,g])}return p}},9887:function(t){"use strict";function T(n){for(var i=1,u=1;u<n.length;++u)for(var a=0;a<u;++a)if(n[u]<n[a])i=-i;else if(n[a]===n[u])return 0;return i}t.exports=T},9243:function(t,T,n){"use strict";var i=n(3094),u=n(6606);function a(v,p){for(var f=0,l=v.length,y=0;y<l;++y)f+=v[y]*p[y];return f}function r(v){var p=v.length;if(0===p)return[];v[0].length;var l=i([v.length+1,v.length+1],1),y=i([v.length+1],1);l[p][p]=0;for(var s=0;s<p;++s){for(var x=0;x<=s;++x)l[x][s]=l[s][x]=2*a(v[s],v[x]);y[s]=a(v[s],v[s])}var h=u(l,y),g=0,m=h[p+1];for(s=0;s<m.length;++s)g+=m[s];var d=new Array(p);for(s=0;s<p;++s){m=h[s];var A=0;for(x=0;x<m.length;++x)A+=m[x];d[s]=A/g}return d}function o(v){if(0===v.length)return[];for(var p=v[0].length,f=i([p]),l=r(v),y=0;y<v.length;++y)for(var s=0;s<p;++s)f[s]+=v[y][s]*l[y];return f}o.barycenetric=r,t.exports=o},1778:function(t,T,n){t.exports=u;var i=n(9243);function u(a){for(var r=i(a),o=0,v=0;v<a.length;++v)for(var p=a[v],f=0;f<r.length;++f)o+=Math.pow(p[f]-r[f],2);return Math.sqrt(o/a.length)}},197:function(t,T,n){"use strict";t.exports=E;var i=n(1731),u=n(2569),a=n(4434),r=n(5125),o=n(8846),v=n(7999),p=n(2826),f=n(8551),l=n(5528);function y(P){var R=v(P);return[f(R,-1/0),f(R,1/0)]}function s(P,R){for(var F=new Array(R.length),_=0;_<R.length;++_){var z=R[_],D=P[z[0]],k=P[z[1]];F[_]=[f(Math.min(D[0],k[0]),-1/0),f(Math.min(D[1],k[1]),-1/0),f(Math.max(D[0],k[0]),1/0),f(Math.max(D[1],k[1]),1/0)]}return F}function x(P){for(var R=new Array(P.length),F=0;F<P.length;++F){var _=P[F];R[F]=[f(_[0],-1/0),f(_[1],-1/0),f(_[0],1/0),f(_[1],1/0)]}return R}function h(P,R,F){var _=[];return u(F,function(z,D){var k=R[z],O=R[D];if(k[0]!==O[0]&&k[0]!==O[1]&&k[1]!==O[0]&&k[1]!==O[1]){var U=P[k[0]],H=P[k[1]],j=P[O[0]],ee=P[O[1]];a(U,H,j,ee)&&_.push([z,D])}}),_}function g(P,R,F,_){var z=[];return u(F,_,function(D,k){var O=R[D];if(O[0]!==k&&O[1]!==k){var U=P[k],H=P[O[0]],j=P[O[1]];a(H,j,U,U)&&z.push([D,k])}}),z}function m(P,R,F,_,z){var D,k,O=P.map(function(re){return[r(re[0]),r(re[1])]});for(D=0;D<F.length;++D){var U=F[D];k=U[0];var H=U[1],j=R[k],ee=R[H],W=l(p(P[j[0]]),p(P[j[1]]),p(P[ee[0]]),p(P[ee[1]]));if(W){var B=P.length;P.push([v(W[0]),v(W[1])]),O.push(W),_.push([k,B],[H,B])}}for(_.sort(function(re,ne){if(re[0]!==ne[0])return re[0]-ne[0];var se=O[re[1]],de=O[ne[1]];return o(se[0],de[0])||o(se[1],de[1])}),D=_.length-1;D>=0;--D){var q=R[k=(te=_[D])[0]],oe=q[0],ie=q[1],V=P[oe],Y=P[ie];if((V[0]-Y[0]||V[1]-Y[1])<0){var ae=oe;oe=ie,ie=ae}q[0]=oe;var J,X=q[1]=te[1];for(z&&(J=q[2]);D>0&&_[D-1][0]===k;){var te,ue=(te=_[--D])[1];z?R.push([X,ue,J]):R.push([X,ue]),X=ue}z?R.push([X,ie,J]):R.push([X,ie])}return O}function d(P,R,F){for(var _=R.length,z=new i(_),D=[],k=0;k<R.length;++k){var O=R[k],U=y(O[0]),H=y(O[1]);D.push([f(U[0],-1/0),f(H[0],-1/0),f(U[1],1/0),f(H[1],1/0)])}u(D,function(te,q){z.link(te,q)});var j=!0,ee=new Array(_);for(k=0;k<_;++k)(W=z.find(k))!==k&&(j=!1,P[W]=[Math.min(P[k][0],P[W][0]),Math.min(P[k][1],P[W][1])]);if(j)return null;var B=0;for(k=0;k<_;++k){var W;(W=z.find(k))===k?(ee[k]=B,P[B++]=P[k]):ee[k]=-1}for(P.length=B,k=0;k<_;++k)ee[k]<0&&(ee[k]=ee[z.find(k)]);return ee}function A(P,R){return P[0]-R[0]||P[1]-R[1]}function b(P,R){return P[0]-R[0]||P[1]-R[1]||(P[2]<R[2]?-1:P[2]>R[2]?1:0)}function c(P,R,F){if(0!==P.length){if(R)for(var _=0;_<P.length;++_){var D=R[(z=P[_])[0]],k=R[z[1]];z[0]=Math.min(D,k),z[1]=Math.max(D,k)}else for(_=0;_<P.length;++_){var z;D=(z=P[_])[0],k=z[1],z[0]=Math.min(D,k),z[1]=Math.max(D,k)}F?P.sort(b):P.sort(A);var O=1;for(_=1;_<P.length;++_){var U=P[_-1],H=P[_];H[0]===U[0]&&H[1]===U[1]&&(!F||H[2]===U[2])||(P[O++]=H)}P.length=O}}function S(P,R,F){var _=d(P,[],x(P));return c(R,_,F),!!_}function w(P,R,F){var _=s(P,R),z=h(P,R,_),D=x(P),k=g(P,R,_,D),U=d(P,m(P,R,z,k,F),D);return c(R,U,F),!!U||z.length>0||k.length>0}function E(P,R,F){var _;if(F){_=R;for(var z=new Array(R.length),D=0;D<R.length;++D){var k=R[D];z[D]=[k[0],k[1],F[D]]}R=z}for(var O=S(P,R,!!F);w(P,R,!!F);)O=!0;if(F&&O)for(_.length=0,F.length=0,D=0;D<R.length;++D)k=R[D],_.push([k[0],k[1]]),F.push(k[2]);return O}},5528:function(t,T,n){"use strict";t.exports=l;var i=n(3962),u=n(9189),a=n(4354),r=n(4951),o=n(6695),v=n(7584),p=n(4469);function f(y,s){return a(i(y[0],s[1]),i(y[1],s[0]))}function l(y,s,x,h){var g=o(s,y),m=o(h,x),d=f(g,m);if(0===r(d))return null;var b=f(m,o(y,x)),c=u(b,d),S=p(g,c);return v(y,S)}},5692:function(t){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(t,T,n){"use strict";var i=n(5692),u=n(3578);function a(p){var f,l,y,s,x,h,g,m,d,A;if(p||(p={}),m=(p.nshades||72)-1,g=p.format||"hex",(h=p.colormap)||(h="jet"),"string"==typeof h){if(h=h.toLowerCase(),!i[h])throw Error(h+" not a supported colorscale");x=i[h]}else{if(!Array.isArray(h))throw Error("unsupported colormap option",h);x=h.slice()}if(x.length>m+1)throw new Error(h+" map requires nshades to be at least size "+x.length);d=Array.isArray(p.alpha)?2!==p.alpha.length?[1,1]:p.alpha.slice():"number"==typeof p.alpha?[p.alpha,p.alpha]:[1,1],f=x.map(function(E){return Math.round(E.index*m)}),d[0]=Math.min(Math.max(d[0],0),1),d[1]=Math.min(Math.max(d[1],0),1);var b=x.map(function(E,P){var R=x[P].index,F=x[P].rgb.slice();return 4===F.length&&F[3]>=0&&F[3]<=1||(F[3]=d[0]+(d[1]-d[0])*R),F}),c=[];for(A=0;A<f.length-1;++A){s=f[A+1]-f[A],l=b[A],y=b[A+1];for(var S=0;S<s;S++){var w=S/s;c.push([Math.round(u(l[0],y[0],w)),Math.round(u(l[1],y[1],w)),Math.round(u(l[2],y[2],w)),u(l[3],y[3],w)])}}return c.push(x[x.length-1].rgb.concat(d[1])),"hex"===g?c=c.map(o):"rgbaString"===g?c=c.map(v):"float"===g&&(c=c.map(r)),c}function r(p){return[p[0]/255,p[1]/255,p[2]/255,p[3]]}function o(p){for(var f,l="#",y=0;y<3;++y)l+=("00"+(f=(f=p[y]).toString(16))).substr(f.length);return l}function v(p){return"rgba("+p.join(",")+")"}t.exports=a},9398:function(t,T,n){"use strict";t.exports=p;var i=n(417),u=n(7538),a=n(87),r=n(2019),o=n(9662);function v(f,l,y){var s=a(f[0],-l[0]),x=a(f[1],-l[1]),h=a(y[0],-l[0]),g=a(y[1],-l[1]),m=o(r(s,h),r(x,g));return m[m.length-1]>=0}function p(f,l,y,s){var x=i(l,y,s);if(0===x){var h=u(i(f,l,y)),g=u(i(f,l,s));if(h===g){if(0===h){var m=v(f,l,y);return m===v(f,l,s)?0:m?1:-1}return 0}return 0===g?h>0||v(f,l,s)?-1:1:0===h?g>0||v(f,l,y)?1:-1:u(g-h)}var A=i(f,l,y);return A>0?x>0&&i(f,l,s)>0?1:-1:A<0?x>0||i(f,l,s)>0?1:-1:i(f,l,s)>0||v(f,l,y)?1:-1}},7538:function(t){"use strict";t.exports=function(n){return n<0?-1:n>0?1:0}},9209:function(t){t.exports=i;var T=Math.min;function n(u,a){return u-a}function i(u,a){var r=u.length,o=u.length-a.length;if(o)return o;switch(r){case 0:return 0;case 1:return u[0]-a[0];case 2:return u[0]+u[1]-a[0]-a[1]||T(u[0],u[1])-T(a[0],a[1]);case 3:var v=u[0]+u[1],p=a[0]+a[1];if(o=v+u[2]-(p+a[2]))return o;var f=T(u[0],u[1]),l=T(a[0],a[1]);return T(f,u[2])-T(l,a[2])||T(f+u[2],v)-T(l+a[2],p);case 4:var y=u[0],s=u[1],x=u[2],h=u[3],g=a[0],m=a[1],d=a[2],A=a[3];return y+s+x+h-(g+m+d+A)||T(y,s,x,h)-T(g,m,d,A,g)||T(y+s,y+x,y+h,s+x,s+h,x+h)-T(g+m,g+d,g+A,m+d,m+A,d+A)||T(y+s+x,y+s+h,y+x+h,s+x+h)-T(g+m+d,g+m+A,g+d+A,m+d+A);default:for(var b=u.slice().sort(n),c=a.slice().sort(n),S=0;S<r;++S)if(o=b[S]-c[S])return o;return 0}}},1284:function(t,T,n){"use strict";var i=n(9209),u=n(9887);function a(r,o){return i(r,o)||u(r)-u(o)}t.exports=a},5537:function(t,T,n){"use strict";var i=n(8950),u=n(8722),a=n(3332);function r(o){var v=o.length;if(0===v)return[];if(1===v)return[[0]];var p=o[0].length;return 0===p?[]:1===p?i(o):2===p?u(o):a(o,p)}t.exports=r},8950:function(t){"use strict";function T(n){for(var i=0,u=0,a=1;a<n.length;++a)n[a][0]<n[i][0]&&(i=a),n[a][0]>n[u][0]&&(u=a);return i<u?[[i],[u]]:i>u?[[u],[i]]:[[i]]}t.exports=T},8722:function(t,T,n){"use strict";t.exports=u;var i=n(3266);function u(a){var r=i(a),o=r.length;if(o<=2)return[];for(var v=new Array(o),p=r[o-1],f=0;f<o;++f){var l=r[f];v[f]=[p,l],p=l}return v}},3332:function(t,T,n){"use strict";t.exports=o;var i=n(2183),u=n(2153);function a(v,p){for(var f=v.length,l=new Array(f),y=0;y<p.length;++y)l[y]=v[p[y]];var s=p.length;for(y=0;y<f;++y)p.indexOf(y)<0&&(l[s++]=v[y]);return l}function r(v,p){for(var f=v.length,l=p.length,y=0;y<f;++y)for(var s=v[y],x=0;x<s.length;++x){var h=s[x];if(h<l)s[x]=p[h];else{h-=l;for(var g=0;g<l;++g)h>=p[g]&&(h+=1);s[x]=h}}return v}function o(v,p){try{return i(v,!0)}catch{var f=u(v);if(f.length<=p)return[];var l=a(v,f);return r(i(l,!0),f)}}},9680:function(t){"use strict";function T(i,u,a,r,o,v){var p=6*o*o-6*o,f=3*o*o-4*o+1,l=-6*o*o+6*o,y=3*o*o-2*o;if(i.length){v||(v=new Array(i.length));for(var s=i.length-1;s>=0;--s)v[s]=p*i[s]+f*u[s]+l*a[s]+y*r[s];return v}return p*i+f*u+l*a[s]+y*r}function n(i,u,a,r,o,v){var p=o-1,f=o*o,l=p*p,y=(1+2*o)*l,s=o*l,x=f*(3-2*o),h=f*p;if(i.length){v||(v=new Array(i.length));for(var g=i.length-1;g>=0;--g)v[g]=y*i[g]+s*u[g]+x*a[g]+h*r[g];return v}return y*i+s*u+x*a+h*r}t.exports=n,t.exports.derivative=T},4419:function(t,T,n){"use strict";var i=n(2183),u=n(1215);function a(p,f){this.point=p,this.index=f}function r(p,f){for(var l=p.point,y=f.point,s=l.length,x=0;x<s;++x){var h=y[x]-l[x];if(h)return h}return 0}function o(p,f,l){if(1===p)return l?[[-1,0]]:[];var y=f.map(function(m,d){return[m[0],d]});y.sort(function(m,d){return m[0]-d[0]});for(var s=new Array(p-1),x=1;x<p;++x){var h=y[x-1],g=y[x];s[x-1]=[h[1],g[1]]}return l&&s.push([-1,s[0][1]],[s[p-1][1],-1]),s}function v(p,f){var l=p.length;if(0===l)return[];var y=p[0].length;if(y<1)return[];if(1===y)return o(l,p,f);for(var s=new Array(l),x=1,h=0;h<l;++h){for(var g=p[h],m=new Array(y+1),d=0,A=0;A<y;++A){var b=g[A];m[A]=b,d+=b*b}m[y]=d,s[h]=new a(m,h),x=Math.max(d,x)}u(s,r),l=s.length;var c=new Array(l+y+1),S=new Array(l+y+1),w=(y+1)*(y+1)*x,E=new Array(y+1);for(h=0;h<=y;++h)E[h]=0;for(E[y]=w,c[0]=E.slice(),S[0]=-1,h=0;h<=y;++h)(m=E.slice())[h]=1,c[h+1]=m,S[h+1]=-1;for(h=0;h<l;++h){var P=s[h];c[h+y+1]=P.point,S[h+y+1]=P.index}var R=i(c,!1);if(R=f?R.filter(function(F){for(var _=0,z=0;z<=y;++z){var D=S[F[z]];if(D<0&&++_>=2)return!1;F[z]=D}return!0}):R.filter(function(F){for(var _=0;_<=y;++_){var z=S[F[_]];if(z<0)return!1;F[_]=z}return!0}),1&y)for(h=0;h<R.length;++h)m=(P=R[h])[0],P[0]=P[1],P[1]=m;return R}t.exports=v},8362:function(t){var T=!1;if(typeof Float64Array<"u"){var n=new Float64Array(1),i=new Uint32Array(n.buffer);if(n[0]=1,T=!0,1072693248===i[1]){let x=function(m,d){return i[0]=m,i[1]=d,n[0]},h=function(m){return n[0]=m,i[0]},g=function(m){return n[0]=m,i[1]};t.exports=function(d){return n[0]=d,[i[0],i[1]]},t.exports.pack=x,t.exports.lo=h,t.exports.hi=g}else if(1072693248===i[0]){let x=function(m,d){return i[1]=m,i[0]=d,n[0]},h=function(m){return n[0]=m,i[1]},g=function(m){return n[0]=m,i[0]};t.exports=function(d){return n[0]=d,[i[1],i[0]]},t.exports.pack=x,t.exports.lo=h,t.exports.hi=g}else T=!1}if(!T){let x=function(m,d){return u.writeUInt32LE(m,0,!0),u.writeUInt32LE(d,4,!0),u.readDoubleLE(0,!0)},h=function(m){return u.writeDoubleLE(m,0,!0),u.readUInt32LE(0,!0)},g=function(m){return u.writeDoubleLE(m,0,!0),u.readUInt32LE(4,!0)};var u=new Buffer(8);t.exports=function(d){return u.writeDoubleLE(d,0,!0),[u.readUInt32LE(0,!0),u.readUInt32LE(4,!0)]},t.exports.pack=x,t.exports.lo=h,t.exports.hi=g}t.exports.sign=function(x){return t.exports.hi(x)>>>31},t.exports.exponent=function(x){return(t.exports.hi(x)<<1>>>21)-1023},t.exports.fraction=function(x){var h=t.exports.lo(x),g=t.exports.hi(x),m=1048575&g;return 2146435072&g&&(m+=1048576),[h,m]},t.exports.denormalized=function(x){return!(2146435072&t.exports.hi(x))}},3094:function(t){"use strict";function T(u,a,r){var o=0|u[r];if(o<=0)return[];var p,v=new Array(o);if(r===u.length-1)for(p=0;p<o;++p)v[p]=a;else for(p=0;p<o;++p)v[p]=T(u,a,r+1);return v}function n(u,a){var r,o;for(r=new Array(u),o=0;o<u;++o)r[o]=a;return r}function i(u,a){switch(typeof a>"u"&&(a=0),typeof u){case"number":if(u>0)return n(0|u,a);break;case"object":if("number"==typeof u.length)return T(u,a,0)}return[]}t.exports=i},8348:function(t,T,n){"use strict";t.exports=u;var i=n(1215);function u(a,r){var o=a.length;if("number"!=typeof r){r=0;for(var v=0;v<o;++v){var p=a[v];r=Math.max(r,p[0],p[1])}r=1+(0|r)}r|=0;var f=new Array(r);for(v=0;v<r;++v)f[v]=[];for(v=0;v<o;++v)f[(p=a[v])[0]].push(p[1]),f[p[1]].push(p[0]);for(var l=0;l<r;++l)i(f[l],function(y,s){return y-s});return f}},5795:function(t){"use strict";function T(n,i,u){var a=i||0,r=u||1;return[[n[12]+n[0],n[13]+n[1],n[14]+n[2],n[15]+n[3]],[n[12]-n[0],n[13]-n[1],n[14]-n[2],n[15]-n[3]],[n[12]+n[4],n[13]+n[5],n[14]+n[6],n[15]+n[7]],[n[12]-n[4],n[13]-n[5],n[14]-n[6],n[15]-n[7]],[a*n[12]+n[8],a*n[13]+n[9],a*n[14]+n[10],a*n[15]+n[11]],[r*n[12]-n[8],r*n[13]-n[9],r*n[14]-n[10],r*n[15]-n[11]]]}t.exports=T},8444:function(t,T,n){"use strict";t.exports=p;var i=n(9680),u=n(5070);function a(f,l,y){return Math.min(l,Math.max(f,y))}function r(f,l,y){this.dimension=f.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var s=0;s<this.dimension;++s)this.bounds[0][s]=-1/0,this.bounds[1][s]=1/0;this._state=f.slice().reverse(),this._velocity=l.slice().reverse(),this._time=[y],this._scratch=[f.slice(),f.slice(),f.slice(),f.slice(),f.slice()]}var o=r.prototype;function v(f){for(var l=new Array(f),y=0;y<f;++y)l[y]=0;return l}function p(f,l,y){switch(arguments.length){case 0:return new r([0],[0],0);case 1:return"number"==typeof f?new r(s=v(f),s,0):new r(f,v(f.length),0);case 2:var s;if("number"==typeof l)return new r(f,s=v(f.length),+l);y=0;case 3:if(f.length!==l.length)throw new Error("state and velocity lengths must match");return new r(f,l,y)}}o.flush=function(f){var l=u.gt(this._time,f)-1;l<=0||(this._time.splice(0,l),this._state.splice(0,l*this.dimension),this._velocity.splice(0,l*this.dimension))},o.curve=function(f){var l=this._time,y=l.length,s=u.le(l,f),x=this._scratch[0],h=this._state,g=this._velocity,m=this.dimension,d=this.bounds;if(s<0)for(var A=m-1,b=0;b<m;++b,--A)x[b]=h[A];else if(s>=y-1){A=h.length-1;var c=f-l[y-1];for(b=0;b<m;++b,--A)x[b]=h[A]+c*g[A]}else{A=m*(s+1)-1;var S=l[s],E=l[s+1]-S||1,P=this._scratch[1],R=this._scratch[2],F=this._scratch[3],_=this._scratch[4],z=!0;for(b=0;b<m;++b,--A)P[b]=h[A],F[b]=g[A]*E,R[b]=h[A+m],_[b]=g[A+m]*E,z=z&&P[b]===R[b]&&F[b]===_[b]&&0===F[b];if(z)for(b=0;b<m;++b)x[b]=P[b];else i(P,F,R,_,(f-S)/E,x)}var D=d[0],k=d[1];for(b=0;b<m;++b)x[b]=a(D[b],k[b],x[b]);return x},o.dcurve=function(f){var l=this._time,y=l.length,s=u.le(l,f),x=this._scratch[0],h=this._state,g=this._velocity,m=this.dimension;if(s>=y-1)for(var d=h.length-1,b=(l[y-1],0);b<m;++b,--d)x[b]=g[d];else{d=m*(s+1)-1;var c=l[s],w=l[s+1]-c||1,E=this._scratch[1],P=this._scratch[2],R=this._scratch[3],F=this._scratch[4],_=!0;for(b=0;b<m;++b,--d)E[b]=h[d],R[b]=g[d]*w,P[b]=h[d+m],F[b]=g[d+m]*w,_=_&&E[b]===P[b]&&R[b]===F[b]&&0===R[b];if(_)for(b=0;b<m;++b)x[b]=0;else for(i.derivative(E,R,P,F,(f-c)/w,x),b=0;b<m;++b)x[b]/=w}return x},o.lastT=function(){var f=this._time;return f[f.length-1]},o.stable=function(){for(var f=this._velocity,l=f.length,y=this.dimension-1;y>=0;--y)if(f[--l])return!1;return!0},o.jump=function(f){var l=this.lastT(),y=this.dimension;if(!(f<l||arguments.length!==y+1)){var s=this._state,x=this._velocity,h=s.length-this.dimension,g=this.bounds,m=g[0],d=g[1];this._time.push(l,f);for(var A=0;A<2;++A)for(var b=0;b<y;++b)s.push(s[h++]),x.push(0);for(this._time.push(f),b=y;b>0;--b)s.push(a(m[b-1],d[b-1],arguments[b])),x.push(0)}},o.push=function(f){var l=this.lastT(),y=this.dimension;if(!(f<l||arguments.length!==y+1)){var s=this._state,x=this._velocity,h=s.length-this.dimension,g=f-l,m=this.bounds,d=m[0],A=m[1],b=g>1e-6?1/g:0;this._time.push(f);for(var c=y;c>0;--c){var S=a(d[c-1],A[c-1],arguments[c]);s.push(S),x.push((S-s[h++])*b)}}},o.set=function(f){var l=this.dimension;if(!(f<this.lastT()||arguments.length!==l+1)){var y=this._state,s=this._velocity,x=this.bounds,h=x[0],g=x[1];this._time.push(f);for(var m=l;m>0;--m)y.push(a(h[m-1],g[m-1],arguments[m])),s.push(0)}},o.move=function(f){var l=this.lastT(),y=this.dimension;if(!(f<=l||arguments.length!==y+1)){var s=this._state,x=this._velocity,h=s.length-this.dimension,g=this.bounds,m=g[0],d=g[1],A=f-l,b=A>1e-6?1/A:0;this._time.push(f);for(var c=y;c>0;--c){var S=arguments[c];s.push(a(m[c-1],d[c-1],s[h++]+S)),x.push(S*b)}}},o.idle=function(f){var l=this.lastT();if(!(f<l)){var y=this.dimension,s=this._state,x=this._velocity,h=s.length-y,g=this.bounds,m=g[0],d=g[1],A=f-l;this._time.push(f);for(var b=y-1;b>=0;--b)s.push(a(m[b],d[b],s[h]+A*x[h])),x.push(0),h+=1}}},7080:function(t){"use strict";t.exports=m;var T=0,n=1;function i(d,A,b,c,S,w){this._color=d,this.key=A,this.value=b,this.left=c,this.right=S,this._count=w}function u(d){return new i(d._color,d.key,d.value,d.left,d.right,d._count)}function a(d,A){return new i(d,A.key,A.value,A.left,A.right,A._count)}function r(d){d._count=1+(d.left?d.left._count:0)+(d.right?d.right._count:0)}function o(d,A){this._compare=d,this.root=A}var v=o.prototype;function p(d,A){var b;return A.left&&(b=p(d,A.left))?b:(b=d(A.key,A.value))||(A.right?p(d,A.right):void 0)}function f(d,A,b,c){if(A(d,c.key)<=0){var w;if(c.left&&(w=f(d,A,b,c.left)))return w;if(w=b(c.key,c.value))return w}if(c.right)return f(d,A,b,c.right)}function l(d,A,b,c,S){var P,w=b(d,S.key),E=b(A,S.key);return w<=0&&(S.left&&(P=l(d,A,b,c,S.left))||E>0&&(P=c(S.key,S.value)))?P:E>0&&S.right?l(d,A,b,c,S.right):void 0}function y(d,A){this.tree=d,this._stack=A}Object.defineProperty(v,"keys",{get:function(){var d=[];return this.forEach(function(A,b){d.push(A)}),d}}),Object.defineProperty(v,"values",{get:function(){var d=[];return this.forEach(function(A,b){d.push(b)}),d}}),Object.defineProperty(v,"length",{get:function(){return this.root?this.root._count:0}}),v.insert=function(d,A){for(var b=this._compare,c=this.root,S=[],w=[];c;){var E=b(d,c.key);S.push(c),w.push(E),c=E<=0?c.left:c.right}S.push(new i(T,d,A,null,null,1));for(var P=S.length-2;P>=0;--P)c=S[P],w[P]<=0?S[P]=new i(c._color,c.key,c.value,S[P+1],c.right,c._count+1):S[P]=new i(c._color,c.key,c.value,c.left,S[P+1],c._count+1);for(P=S.length-1;P>1;--P){var R=S[P-1];if(c=S[P],R._color===n||c._color===n)break;var F=S[P-2];if(F.left===R)if(R.left===c){if(!(_=F.right)||_._color!==T){F._color=T,F.left=R.right,R._color=n,R.right=F,S[P-2]=R,S[P-1]=c,r(F),r(R),P>=3&&((z=S[P-3]).left===F?z.left=R:z.right=R);break}R._color=n,F.right=a(n,_),F._color=T,P-=1}else{if(!(_=F.right)||_._color!==T){R.right=c.left,F._color=T,F.left=c.right,c._color=n,c.left=R,c.right=F,S[P-2]=c,S[P-1]=R,r(F),r(R),r(c),P>=3&&((z=S[P-3]).left===F?z.left=c:z.right=c);break}R._color=n,F.right=a(n,_),F._color=T,P-=1}else if(R.right===c){if(!(_=F.left)||_._color!==T){F._color=T,F.right=R.left,R._color=n,R.left=F,S[P-2]=R,S[P-1]=c,r(F),r(R),P>=3&&((z=S[P-3]).right===F?z.right=R:z.left=R);break}R._color=n,F.left=a(n,_),F._color=T,P-=1}else{var _;if(!(_=F.left)||_._color!==T){var z;R.left=c.right,F._color=T,F.right=c.left,c._color=n,c.right=R,c.left=F,S[P-2]=c,S[P-1]=R,r(F),r(R),r(c),P>=3&&((z=S[P-3]).right===F?z.right=c:z.left=c);break}R._color=n,F.left=a(n,_),F._color=T,P-=1}}return S[0]._color=n,new o(b,S[0])},v.forEach=function(A,b,c){if(this.root)switch(arguments.length){case 1:return p(A,this.root);case 2:return f(b,this._compare,A,this.root);case 3:return this._compare(b,c)>=0?void 0:l(b,c,this._compare,A,this.root)}},Object.defineProperty(v,"begin",{get:function(){for(var d=[],A=this.root;A;)d.push(A),A=A.left;return new y(this,d)}}),Object.defineProperty(v,"end",{get:function(){for(var d=[],A=this.root;A;)d.push(A),A=A.right;return new y(this,d)}}),v.at=function(d){if(d<0)return new y(this,[]);for(var A=this.root,b=[];;){if(b.push(A),A.left){if(d<A.left._count){A=A.left;continue}d-=A.left._count}if(!d)return new y(this,b);if(d-=1,!A.right)break;if(d>=A.right._count)break;A=A.right}return new y(this,[])},v.ge=function(d){for(var A=this._compare,b=this.root,c=[],S=0;b;){var w=A(d,b.key);c.push(b),w<=0&&(S=c.length),b=w<=0?b.left:b.right}return c.length=S,new y(this,c)},v.gt=function(d){for(var A=this._compare,b=this.root,c=[],S=0;b;){var w=A(d,b.key);c.push(b),w<0&&(S=c.length),b=w<0?b.left:b.right}return c.length=S,new y(this,c)},v.lt=function(d){for(var A=this._compare,b=this.root,c=[],S=0;b;){var w=A(d,b.key);c.push(b),w>0&&(S=c.length),b=w<=0?b.left:b.right}return c.length=S,new y(this,c)},v.le=function(d){for(var A=this._compare,b=this.root,c=[],S=0;b;){var w=A(d,b.key);c.push(b),w>=0&&(S=c.length),b=w<0?b.left:b.right}return c.length=S,new y(this,c)},v.find=function(d){for(var A=this._compare,b=this.root,c=[];b;){var S=A(d,b.key);if(c.push(b),0===S)return new y(this,c);b=S<=0?b.left:b.right}return new y(this,[])},v.remove=function(d){var A=this.find(d);return A?A.remove():this},v.get=function(d){for(var A=this._compare,b=this.root;b;){var c=A(d,b.key);if(0===c)return b.value;b=c<=0?b.left:b.right}};var s=y.prototype;function x(d,A){d.key=A.key,d.value=A.value,d.left=A.left,d.right=A.right,d._color=A._color,d._count=A._count}function h(d){for(var A,b,c,S,w=d.length-1;w>=0;--w){if(A=d[w],0===w)return void(A._color=n);if((b=d[w-1]).left===A){if((c=b.right).right&&c.right._color===T)return S=(c=b.right=u(c)).right=u(c.right),b.right=c.left,c.left=b,c.right=S,c._color=b._color,A._color=n,b._color=n,S._color=n,r(b),r(c),w>1&&((E=d[w-2]).left===b?E.left=c:E.right=c),void(d[w-1]=c);if(c.left&&c.left._color===T)return S=(c=b.right=u(c)).left=u(c.left),b.right=S.left,c.left=S.right,S.left=b,S.right=c,S._color=b._color,b._color=n,c._color=n,A._color=n,r(b),r(c),r(S),w>1&&((E=d[w-2]).left===b?E.left=S:E.right=S),void(d[w-1]=S);if(c._color===n){if(b._color===T)return b._color=n,void(b.right=a(T,c));b.right=a(T,c);continue}c=u(c),b.right=c.left,c.left=b,c._color=b._color,b._color=T,r(b),r(c),w>1&&((E=d[w-2]).left===b?E.left=c:E.right=c),d[w-1]=c,d[w]=b,w+1<d.length?d[w+1]=A:d.push(A),w+=2}else{if((c=b.left).left&&c.left._color===T)return S=(c=b.left=u(c)).left=u(c.left),b.left=c.right,c.right=b,c.left=S,c._color=b._color,A._color=n,b._color=n,S._color=n,r(b),r(c),w>1&&((E=d[w-2]).right===b?E.right=c:E.left=c),void(d[w-1]=c);if(c.right&&c.right._color===T)return S=(c=b.left=u(c)).right=u(c.right),b.left=S.right,c.right=S.left,S.right=b,S.left=c,S._color=b._color,b._color=n,c._color=n,A._color=n,r(b),r(c),r(S),w>1&&((E=d[w-2]).right===b?E.right=S:E.left=S),void(d[w-1]=S);if(c._color===n){if(b._color===T)return b._color=n,void(b.left=a(T,c));b.left=a(T,c);continue}var E;c=u(c),b.left=c.right,c.right=b,c._color=b._color,b._color=T,r(b),r(c),w>1&&((E=d[w-2]).right===b?E.right=c:E.left=c),d[w-1]=c,d[w]=b,w+1<d.length?d[w+1]=A:d.push(A),w+=2}}}function g(d,A){return d<A?-1:d>A?1:0}function m(d){return new o(d||g,null)}Object.defineProperty(s,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(s,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),s.clone=function(){return new y(this.tree,this._stack.slice())},s.remove=function(){var d=this._stack;if(0===d.length)return this.tree;var A=new Array(d.length),b=d[d.length-1];A[A.length-1]=new i(b._color,b.key,b.value,b.left,b.right,b._count);for(var c=d.length-2;c>=0;--c)(b=d[c]).left===d[c+1]?A[c]=new i(b._color,b.key,b.value,A[c+1],b.right,b._count):A[c]=new i(b._color,b.key,b.value,b.left,A[c+1],b._count);if((b=A[A.length-1]).left&&b.right){var S=A.length;for(b=b.left;b.right;)A.push(b),b=b.right;var w=A[S-1];for(A.push(new i(b._color,w.key,w.value,b.left,b.right,b._count)),A[S-1].key=b.key,A[S-1].value=b.value,c=A.length-2;c>=S;--c)b=A[c],A[c]=new i(b._color,b.key,b.value,b.left,A[c+1],b._count);A[S-1].left=A[S]}if((b=A[A.length-1])._color===T){var E=A[A.length-2];for(E.left===b?E.left=null:E.right===b&&(E.right=null),A.pop(),c=0;c<A.length;++c)A[c]._count--;return new o(this.tree._compare,A[0])}if(b.left||b.right){for(b.left?x(b,b.left):b.right&&x(b,b.right),b._color=n,c=0;c<A.length-1;++c)A[c]._count--;return new o(this.tree._compare,A[0])}if(1===A.length)return new o(this.tree._compare,null);for(c=0;c<A.length;++c)A[c]._count--;var P=A[A.length-2];return h(A),P.left===b?P.left=null:P.right=null,new o(this.tree._compare,A[0])},Object.defineProperty(s,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(s,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(s,"index",{get:function(){var d=0,A=this._stack;if(0===A.length){var b=this.tree.root;return b?b._count:0}A[A.length-1].left&&(d=A[A.length-1].left._count);for(var c=A.length-2;c>=0;--c)A[c+1]===A[c].right&&(++d,A[c].left&&(d+=A[c].left._count));return d},enumerable:!0}),s.next=function(){var d=this._stack;if(0!==d.length){var A=d[d.length-1];if(A.right)for(A=A.right;A;)d.push(A),A=A.left;else for(d.pop();d.length>0&&d[d.length-1].right===A;)A=d[d.length-1],d.pop()}},Object.defineProperty(s,"hasNext",{get:function(){var d=this._stack;if(0===d.length)return!1;if(d[d.length-1].right)return!0;for(var A=d.length-1;A>0;--A)if(d[A-1].left===d[A])return!0;return!1}}),s.update=function(d){var A=this._stack;if(0===A.length)throw new Error("Can't update empty node!");var b=new Array(A.length),c=A[A.length-1];b[b.length-1]=new i(c._color,c.key,d,c.left,c.right,c._count);for(var S=A.length-2;S>=0;--S)(c=A[S]).left===A[S+1]?b[S]=new i(c._color,c.key,c.value,b[S+1],c.right,c._count):b[S]=new i(c._color,c.key,c.value,c.left,b[S+1],c._count);return new o(this.tree._compare,b[0])},s.prev=function(){var d=this._stack;if(0!==d.length){var A=d[d.length-1];if(A.left)for(A=A.left;A;)d.push(A),A=A.right;else for(d.pop();d.length>0&&d[d.length-1].left===A;)A=d[d.length-1],d.pop()}},Object.defineProperty(s,"hasPrev",{get:function(){var d=this._stack;if(0===d.length)return!1;if(d[d.length-1].left)return!0;for(var A=d.length-1;A>0;--A)if(d[A-1].right===d[A])return!0;return!1}})},7453:function(t,T,n){"use strict";t.exports=c;var i=n(9557),u=n(1681),a=n(1011),r=n(2864),o=n(8468),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function p(S,w){return S[0]=w[0],S[1]=w[1],S[2]=w[2],S}function f(S){this.gl=S,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(S)}var l=f.prototype;function y(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}l.update=function(S){function w(j,ee,W){if(W in S){var q,B=S[W],te=this[W];(j?Array.isArray(B)&&Array.isArray(B[0]):Array.isArray(B))?this[W]=q=[ee(B[0]),ee(B[1]),ee(B[2])]:this[W]=q=[ee(B),ee(B),ee(B)];for(var oe=0;oe<3;++oe)if(q[oe]!==te[oe])return!0}return!1}S=S||{};var _,E=w.bind(this,!1,Number),P=w.bind(this,!1,Boolean),R=w.bind(this,!1,String),F=w.bind(this,!0,function(j){if(Array.isArray(j)){if(3===j.length)return[+j[0],+j[1],+j[2],1];if(4===j.length)return[+j[0],+j[1],+j[2],+j[3]]}return[0,0,0,1]}),z=!1,D=!1;if("bounds"in S)for(var k=S.bounds,O=0;O<2;++O)for(var U=0;U<3;++U)k[O][U]!==this.bounds[O][U]&&(D=!0),this.bounds[O][U]=k[O][U];if("ticks"in S)for(_=S.ticks,z=!0,this.autoTicks=!1,O=0;O<3;++O)this.tickSpacing[O]=0;else E("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in S||"tickSpacing"in S||(this.autoTicks=!0),D=!0,z=!0,this._firstInit=!1),D&&this.autoTicks&&(_=o.create(this.bounds,this.tickSpacing),z=!0),z){for(O=0;O<3;++O)_[O].sort(function(ee,W){return ee.x-W.x});o.equal(_,this.ticks)?z=!1:this.ticks=_}P("tickEnable"),R("tickFont")&&(z=!0),E("tickSize"),E("tickAngle"),E("tickPad"),F("tickColor");var H=R("labels");R("labelFont")&&(H=!0),P("labelEnable"),E("labelSize"),E("labelPad"),F("labelColor"),P("lineEnable"),P("lineMirror"),E("lineWidth"),F("lineColor"),P("lineTickEnable"),P("lineTickMirror"),E("lineTickLength"),E("lineTickWidth"),F("lineTickColor"),P("gridEnable"),E("gridWidth"),F("gridColor"),P("zeroEnable"),F("zeroLineColor"),E("zeroLineWidth"),P("backgroundEnable"),F("backgroundColor"),this._text?this._text&&(H||z)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&z&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=u(this.gl,this.bounds,this.ticks))};var s=[new y,new y,new y];function x(S,w,E,P,R){for(var F=S.primalOffset,_=S.primalMinor,z=S.mirrorOffset,D=S.mirrorMinor,k=P[w],O=0;O<3;++O)if(w!==O){var U=F,H=z,j=_,ee=D;k&1<<O&&(U=z,H=F,j=D,ee=_),U[O]=E[0][O],H[O]=E[1][O],R[O]>0?(j[O]=-1,ee[O]=0):(j[O]=0,ee[O]=1)}}var h=[0,0,0],g={model:v,view:v,projection:v,_ortho:!1};l.isOpaque=function(){return!0},l.isTransparent=function(){return!1},l.drawTransparent=function(S){};var m=0,d=[0,0,0],A=[0,0,0],b=[0,0,0];function c(S,w){var E=new f(S);return E.update(w),E}l.draw=function(S){S=S||g;for(var te=this.gl,w=S.model||v,E=S.view||v,P=S.projection||v,R=this.bounds,F=S._ortho||!1,_=r(w,E,P,R,F),z=_.cubeEdges,D=_.axis,k=E[12],O=E[13],U=E[14],H=E[15],ee=(F?2:1)*this.pixelRatio*(P[3]*k+P[7]*O+P[11]*U+P[15]*H)/te.drawingBufferHeight,W=0;W<3;++W)this.lastCubeProps.cubeEdges[W]=z[W],this.lastCubeProps.axis[W]=D[W];var B=s;for(W=0;W<3;++W)x(s[W],W,this.bounds,z,D);te=this.gl;var q=h;for(W=0;W<3;++W)this.backgroundEnable[W]?q[W]=D[W]:q[W]=0;for(this._background.draw(w,E,P,R,q,this.backgroundColor),this._lines.bind(w,E,P,this),W=0;W<3;++W){var oe=[0,0,0];D[W]>0?oe[W]=R[1][W]:oe[W]=R[0][W];for(var ie=0;ie<2;++ie){var V=(W+1+ie)%3,Y=(W+1+(1^ie))%3;this.gridEnable[V]&&this._lines.drawGrid(V,Y,this.bounds,oe,this.gridColor[V],this.gridWidth[V]*this.pixelRatio)}for(ie=0;ie<2;++ie)V=(W+1+ie)%3,Y=(W+1+(1^ie))%3,this.zeroEnable[Y]&&Math.min(R[0][Y],R[1][Y])<=0&&Math.max(R[0][Y],R[1][Y])>=0&&this._lines.drawZero(V,Y,this.bounds,oe,this.zeroLineColor[Y],this.zeroLineWidth[Y]*this.pixelRatio)}for(W=0;W<3;++W){this.lineEnable[W]&&this._lines.drawAxisLine(W,this.bounds,B[W].primalOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio),this.lineMirror[W]&&this._lines.drawAxisLine(W,this.bounds,B[W].mirrorOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio);var ae=p(d,B[W].primalMinor),X=p(A,B[W].mirrorMinor),J=this.lineTickLength;for(ie=0;ie<3;++ie){var ue=ee/w[5*ie];ae[ie]*=J[ie]*ue,X[ie]*=J[ie]*ue}this.lineTickEnable[W]&&this._lines.drawAxisTicks(W,B[W].primalOffset,ae,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio),this.lineTickMirror[W]&&this._lines.drawAxisTicks(W,B[W].mirrorOffset,X,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio)}this._lines.unbind(),this._text.bind(w,E,P,this.pixelRatio);var re,se,de,ne=.5;function be(ke){(de=[0,0,0])[ke]=1}function De(ke,ze,Pe){var Ie=(ke+1)%3,Qe=(ke+2)%3,at=ze[Ie],Be=ze[Qe],Ne=Pe[Ie],nt=Pe[Qe];at>0&&nt>0||at>0&&nt<0||at<0&&nt>0||at<0&&nt<0?be(Ie):(Be>0&&Ne>0||Be>0&&Ne<0||Be<0&&Ne>0||Be<0&&Ne<0)&&be(Qe)}for(W=0;W<3;++W){var _e=B[W].primalMinor,Ce=B[W].mirrorMinor,Le=p(b,B[W].primalOffset);for(ie=0;ie<3;++ie)this.lineTickEnable[W]&&(Le[ie]+=ee*_e[ie]*Math.max(this.lineTickLength[ie],0)/w[5*ie]);var Fe=[0,0,0];if(Fe[W]=1,this.tickEnable[W]){for(-3600===this.tickAngle[W]?(this.tickAngle[W]=0,this.tickAlign[W]="auto"):this.tickAlign[W]=-1,se=1,"auto"===(re=[this.tickAlign[W],ne,se])[0]?re[0]=m:re[0]=parseInt(""+re[0]),de=[0,0,0],De(W,_e,Ce),ie=0;ie<3;++ie)Le[ie]+=ee*_e[ie]*this.tickPad[ie]/w[5*ie];this._text.drawTicks(W,this.tickSize[W],this.tickAngle[W],Le,this.tickColor[W],Fe,de,re)}if(this.labelEnable[W]){for(se=0,de=[0,0,0],this.labels[W].length>4&&(be(W),se=1),"auto"===(re=[this.labelAlign[W],ne,se])[0]?re[0]=m:re[0]=parseInt(""+re[0]),ie=0;ie<3;++ie)Le[ie]+=ee*_e[ie]*this.labelPad[ie]/w[5*ie];Le[W]+=.5*(R[0][W]+R[1][W]),this._text.drawLabel(W,this.labelSize[W],this.labelAngle[W],Le,this.labelColor[W],[0,0,0],de,re)}}this._text.unbind()},l.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(t,T,n){"use strict";t.exports=v;var i=n(5827),u=n(2944),a=n(1943).bg;function r(p,f,l,y){this.gl=p,this.buffer=f,this.vao=l,this.shader=y}var o=r.prototype;function v(p){for(var f=[],l=[],y=0,s=0;s<3;++s)for(var x=(s+1)%3,h=(s+2)%3,g=[0,0,0],m=[0,0,0],d=-1;d<=1;d+=2){l.push(y,y+2,y+1,y+1,y+2,y+3),g[s]=d,m[s]=d;for(var A=-1;A<=1;A+=2){g[x]=A;for(var b=-1;b<=1;b+=2)g[h]=b,f.push(g[0],g[1],g[2],m[0],m[1],m[2]),y+=1}var c=x;x=h,h=c}var S=i(p,new Float32Array(f)),w=i(p,new Uint16Array(l),p.ELEMENT_ARRAY_BUFFER),E=u(p,[{buffer:S,type:p.FLOAT,size:3,offset:0,stride:24},{buffer:S,type:p.FLOAT,size:3,offset:12,stride:24}],w),P=a(p);return P.attributes.position.location=0,P.attributes.normal.location=1,new r(p,S,E,P)}o.draw=function(p,f,l,y,s,x){for(var h=!1,g=0;g<3;++g)h=h||s[g];if(h){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:p,view:f,projection:l,bounds:y,enable:s,colors:x},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},o.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(t,T,n){"use strict";t.exports=d;var i=n(2288),u=n(104),a=n(4670),r=n(417),o=new Array(16),v=new Array(8),p=new Array(8),f=new Array(3),l=[0,0,0];function y(A,b,c){for(var S=0;S<4;++S){A[S]=c[12+S];for(var w=0;w<3;++w)A[S]+=b[w]*c[4*w+S]}}!function(){for(var A=0;A<8;++A)v[A]=[1,1,1,1],p[A]=[1,1,1]}();var s=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function x(A){for(var b=0;b<s.length;++b)if((A=a.positive(A,s[b])).length<3)return 0;var c=A[0],S=c[0]/c[3],w=c[1]/c[3],E=0;for(b=1;b+1<A.length;++b){var P=A[b],R=A[b+1],k=P[0]/P[3]-S,O=P[1]/P[3]-w,U=R[0]/R[3]-S,H=R[1]/R[3]-w;E+=Math.abs(k*H-O*U)}return E}var h=[1,1,1],g=[0,0,0],m={cubeEdges:h,axis:g};function d(A,b,c,S,w){u(o,b,A),u(o,c,o);for(var E=0,P=0;P<2;++P){f[2]=S[P][2];for(var R=0;R<2;++R){f[1]=S[R][1];for(var F=0;F<2;++F)f[0]=S[F][0],y(v[E],f,o),E+=1}}var _=-1;for(P=0;P<8;++P){for(var z=v[P][3],D=0;D<3;++D)p[P][D]=v[P][D]/z;w&&(p[P][2]*=-1),z<0&&(_<0||p[P][2]<p[_][2])&&(_=P)}if(_<0){_=0;for(var k=0;k<3;++k){for(var O=(k+2)%3,U=(k+1)%3,H=-1,j=-1,ee=0;ee<2;++ee){var B=(W=ee<<k)+(ee<<O)+(1-ee<<U),te=W+(1-ee<<O)+(ee<<U);r(p[W],p[B],p[te],l)<0||(ee?H=1:j=1)}if(H<0||j<0)j>H&&(_|=1<<k);else{for(ee=0;ee<2;++ee){B=(W=ee<<k)+(ee<<O)+(1-ee<<U),te=W+(1-ee<<O)+(ee<<U);var W,q=x([v[W],v[B],v[te],v[W+(1<<O)+(1<<U)]]);ee?H=q:j=q}j>H&&(_|=1<<k)}}}var oe=7^_,ie=-1;for(P=0;P<8;++P)P===_||P===oe||(ie<0||p[ie][1]>p[P][1])&&(ie=P);var V=-1;for(P=0;P<3;++P)(Y=ie^1<<P)!==_&&Y!==oe&&(V<0&&(V=Y),(U=p[Y])[0]<p[V][0]&&(V=Y));var ae=-1;for(P=0;P<3;++P){var Y;(Y=ie^1<<P)!==_&&Y!==oe&&Y!==V&&(ae<0&&(ae=Y),(U=p[Y])[0]>p[ae][0]&&(ae=Y))}var X=h;X[0]=X[1]=X[2]=0,X[i.log2(V^ie)]=ie&V,X[i.log2(ie^ae)]=ie&ae;var J=7^ae;J===_||J===oe?(J=7^V,X[i.log2(ae^J)]=J&ae):X[i.log2(V^J)]=J&V;var ue=g,re=_;for(k=0;k<3;++k)ue[k]=re&1<<k?-1:1;return m}},1681:function(t,T,n){"use strict";t.exports=h;var i=n(5827),u=n(2944),a=n(1943).j,r=[0,0,0],o=[0,0,0],v=[0,0,0],p=[0,0,0],f=[1,1];function l(g){return g[0]=g[1]=g[2]=0,g}function y(g,m){return g[0]=m[0],g[1]=m[1],g[2]=m[2],g}function s(g,m,d,A,b,c,S,w){this.gl=g,this.vertBuffer=m,this.vao=d,this.shader=A,this.tickCount=b,this.tickOffset=c,this.gridCount=S,this.gridOffset=w}var x=s.prototype;function h(g,m,d){var A=[],b=[0,0,0],c=[0,0,0],S=[0,0,0],w=[0,0,0];A.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var E=0;E<3;++E){for(var F=A.length/3|0,P=0;P<d[E].length;++P){var R=+d[E][P].x;A.push(R,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1)}var z=A.length/3|0;b[E]=F,c[E]=z-F,F=A.length/3|0;for(var _=0;_<d[E].length;++_)R=+d[E][_].x,A.push(R,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1);z=A.length/3|0,S[E]=F,w[E]=z-F}var D=i(g,new Float32Array(A)),k=u(g,[{buffer:D,type:g.FLOAT,size:3,stride:0,offset:0}]),O=a(g);return O.attributes.position.location=0,new s(g,D,k,O,c,b,w,S)}x.bind=function(g,m,d){this.shader.bind(),this.shader.uniforms.model=g,this.shader.uniforms.view=m,this.shader.uniforms.projection=d,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},x.unbind=function(){this.vao.unbind()},x.drawAxisLine=function(g,m,d,A,b){var c=l(o);this.shader.uniforms.majorAxis=o,c[g]=m[1][g]-m[0][g],this.shader.uniforms.minorAxis=c;var w,S=y(p,d);S[g]+=m[0][g],this.shader.uniforms.offset=S,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=A,(w=l(v))[(g+2)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6),(w=l(v))[(g+1)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6)},x.drawAxisTicks=function(g,m,d,A,b){if(this.tickCount[g]){var c=l(r);c[g]=1,this.shader.uniforms.majorAxis=c,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=d,this.shader.uniforms.color=A,this.shader.uniforms.lineWidth=b;var S=l(v);S[g]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}},x.drawGrid=function(g,m,d,A,b,c){if(this.gridCount[g]){var S=l(o);S[m]=d[1][m]-d[0][m],this.shader.uniforms.minorAxis=S;var w=y(p,A);w[m]+=d[0][m],this.shader.uniforms.offset=w;var E=l(r);E[g]=1,this.shader.uniforms.majorAxis=E;var P=l(v);P[g]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=c,this.shader.uniforms.color=b,this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}},x.drawZero=function(g,m,d,A,b,c){var S=l(o);this.shader.uniforms.majorAxis=S,S[g]=d[1][g]-d[0][g],this.shader.uniforms.minorAxis=S;var w=y(p,A);w[g]+=d[0][g],this.shader.uniforms.offset=w;var E=l(v);E[m]=1,this.shader.uniforms.screenAxis=E,this.shader.uniforms.lineWidth=c,this.shader.uniforms.color=b,this.vao.draw(this.gl.TRIANGLES,6)},x.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(t,T,n){"use strict";var i=n(6832),u=n(5158),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);T.j=function(l){return u(l,a,r,null,[{name:"position",type:"vec3"}])};var o=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),v=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);T.f=function(l){return u(l,o,v,null,[{name:"position",type:"vec3"}])};var p=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),f=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);T.bg=function(l){return u(l,p,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(t,T,n){"use strict";t.exports=x;var i=n(5827),u=n(2944),a=n(875),r=n(1943).f,o=window||process.global||{},v=o.__TEXT_CACHE||{};o.__TEXT_CACHE={};var p=3;function f(h,g,m,d){this.gl=h,this.shader=g,this.buffer=m,this.vao=d,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var l=f.prototype,y=[0,0];function s(h,g){try{return a(h,g)}catch(m){return console.warn('error vectorizing text:"'+h+'" error:',m),{cells:[],positions:[]}}}function x(h,g,m,d,A,b){var c=i(h),S=u(h,[{buffer:c,size:3}]),w=r(h);w.attributes.position.location=0;var E=new f(h,w,c,S);return E.update(g,m,d,A,b),E}l.bind=function(h,g,m,d){this.vao.bind(),this.shader.bind();var A=this.shader.uniforms;A.model=h,A.view=g,A.projection=m,A.pixelScale=d,y[0]=this.gl.drawingBufferWidth,y[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=y},l.unbind=function(){this.vao.unbind()},l.update=function(h,g,m,d,A){var b=[];function c(D,k,O,U,H,j){var ee=v[O];ee||(ee=v[O]={});var W=ee[k];W||(W=ee[k]=s(k,{triangles:!0,font:O,textAlign:"center",textBaseline:"middle",lineSpacing:H,styletags:j}));for(var B=(U||12)/12,te=W.positions,q=W.cells,oe=0,ie=q.length;oe<ie;++oe)for(var V=q[oe],Y=2;Y>=0;--Y){var ae=te[V[Y]];b.push(B*ae[0],-B*ae[1],D)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0],R=1.25,F={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},_=0;_<3;++_){E[_]=b.length/p|0,c(.5*(h[0][_]+h[1][_]),g[_],m[_],12,R,F),P[_]=(b.length/p|0)-E[_],S[_]=b.length/p|0;for(var z=0;z<d[_].length;++z)d[_][z].text&&c(d[_][z].x,d[_][z].text,d[_][z].font||A,d[_][z].fontSize||12,R,F);w[_]=(b.length/p|0)-S[_]}this.buffer.update(b),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=P},l.drawTicks=function(h,g,m,d,A,b,c,S){this.tickCount[h]&&(this.shader.uniforms.axis=b,this.shader.uniforms.color=A,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=c,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[h],this.tickOffset[h]))},l.drawLabel=function(h,g,m,d,A,b,c,S){this.labelCount[h]&&(this.shader.uniforms.axis=b,this.shader.uniforms.color=A,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=c,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[h],this.labelOffset[h]))},l.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(t,T){"use strict";function n(a,r){var o=a+"",v=o.indexOf("."),p=0;v>=0&&(p=o.length-v-1);var f=Math.pow(10,p),l=Math.round(a*r*f),y=l+"";if(y.indexOf("e")>=0)return y;var s=l/f,x=l%f;l<0?(s=0|-Math.ceil(s),x=0|-x):(s=0|Math.floor(s),x|=0);var h=""+s;if(l<0&&(h="-"+h),p){for(var g=""+x;g.length<p;)g="0"+g;return h+"."+g}return h}function i(a,r){for(var o=[],v=0;v<3;++v){for(var p=[],l=(a[0][v],a[1][v],0);l*r[v]<=a[1][v];++l)p.push({x:l*r[v],text:n(r[v],l)});for(l=-1;l*r[v]>=a[0][v];--l)p.push({x:l*r[v],text:n(r[v],l)});o.push(p)}return o}function u(a,r){for(var o=0;o<3;++o){if(a[o].length!==r[o].length)return!1;for(var v=0;v<a[o].length;++v){var p=a[o][v],f=r[o][v];if(p.x!==f.x||p.text!==f.text||p.font!==f.font||p.fontColor!==f.fontColor||p.fontSize!==f.fontSize||p.dx!==f.dx||p.dy!==f.dy)return!1}}return!0}T.create=i,T.equal=u},2771:function(t,T,n){"use strict";t.exports=m;var i=n(5795),u=n(4670),a=n(2864),r=n(104),o=n(2142),v=n(6342),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function l(d,A,b){this.lo=d,this.hi=A,this.pixelsPerDataUnit=b}var y=[0,0,0,1],s=[0,0,0,1];function x(d,A,b,c,S){for(var w=0;w<3;++w){for(var E=y,P=s,R=0;R<3;++R)P[R]=E[R]=b[R];P[3]=E[3]=1,P[w]+=1,v(P,P,A),P[3]<0&&(d[w]=1/0),E[w]-=1,v(E,E,A),E[3]<0&&(d[w]=1/0);var F=(E[0]/E[3]-P[0]/P[3])*c,_=(E[1]/E[3]-P[1]/P[3])*S;d[w]=.25*Math.sqrt(F*F+_*_)}return d}var h=[new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0)],g=[0,0,0];function m(d,A,b,c,_){var w=A.model||p,E=A.view||p,P=A.projection||p,R=A._ortho||!1,F=d.bounds,z=(_=_||a(w,E,P,F,R)).axis;r(f,E,w),r(f,P,f);for(var D=h,k=0;k<3;++k)D[k].lo=1/0,D[k].hi=-1/0,D[k].pixelsPerDataUnit=1/0;var O=i(o(f,f));o(f,f);for(var U=0;U<3;++U){var H=(U+1)%3,j=(U+2)%3,ee=g;e:for(k=0;k<2;++k){var W=[];if(z[U]<0!=!!k){ee[U]=F[k][U];for(var B=0;B<2;++B){ee[H]=F[B^k][H];for(var te=0;te<2;++te)ee[j]=F[te^B^k][j],W.push(ee.slice())}var q=R?5:4;for(B=q;B===q;++B){if(0===W.length)continue e;W=u.positive(W,O[B])}for(B=0;B<W.length;++B){j=W[B];var oe=x(g,f,j,b,c);for(te=0;te<3;++te)D[te].lo=Math.min(D[te].lo,j[te]),D[te].hi=Math.max(D[te].hi,j[te]),te!==U&&(D[te].pixelsPerDataUnit=Math.min(D[te].pixelsPerDataUnit,Math.abs(oe[te])))}}}}return D}},5827:function(t,T,n){"use strict";var i=n(5306),u=n(7498),a=n(5050),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(s,x,h,g,m){this.gl=s,this.type=x,this.handle=h,this.length=g,this.usage=m}var v=o.prototype;function p(s,x,h,g,m,d){var A=m.length*m.BYTES_PER_ELEMENT;if(d<0)return s.bufferData(x,m,g),A;if(A+d>h)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return s.bufferSubData(x,d,m),h}function f(s,x){for(var h=i.malloc(s.length,x),g=s.length,m=0;m<g;++m)h[m]=s[m];return h}function l(s,x){for(var h=1,g=x.length-1;g>=0;--g){if(x[g]!==h)return!1;h*=s[g]}return!0}function y(s,x,h,g){if(h=h||s.ARRAY_BUFFER,g=g||s.DYNAMIC_DRAW,h!==s.ARRAY_BUFFER&&h!==s.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==s.DYNAMIC_DRAW&&g!==s.STATIC_DRAW&&g!==s.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=s.createBuffer(),d=new o(s,h,m,0,g);return d.update(x),d}v.bind=function(){this.gl.bindBuffer(this.type,this.handle)},v.unbind=function(){this.gl.bindBuffer(this.type,null)},v.dispose=function(){this.gl.deleteBuffer(this.handle)},v.update=function(s,x){if("number"!=typeof x&&(x=-1),this.bind(),"object"==typeof s&&typeof s.shape<"u"){var h=s.dtype;if(r.indexOf(h)<0&&(h="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(h=gl.getExtension("OES_element_index_uint")&&"uint16"!==h?"uint32":"uint16"),h===s.dtype&&l(s.shape,s.stride))0===s.offset&&s.data.length===s.shape[0]?this.length=p(this.gl,this.type,this.length,this.usage,s.data,x):this.length=p(this.gl,this.type,this.length,this.usage,s.data.subarray(s.offset,s.shape[0]),x);else{var m=i.malloc(s.size,h),d=a(m,s.shape);u.assign(d,s),this.length=p(this.gl,this.type,this.length,this.usage,x<0?m:m.subarray(0,s.size),x),i.free(m)}}else if(Array.isArray(s)){var A;A=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(s,"uint16"):f(s,"float32"),this.length=p(this.gl,this.type,this.length,this.usage,x<0?A:A.subarray(0,s.length),x),i.free(A)}else if("object"==typeof s&&"number"==typeof s.length)this.length=p(this.gl,this.type,this.length,this.usage,s,x);else{if("number"!=typeof s&&void 0!==s)throw new Error("gl-buffer: Invalid data type");if(x>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(s|=0)<=0&&(s=1),this.gl.bufferData(this.type,0|s,this.usage),this.length=s}},t.exports=y},1140:function(t,T,n){"use strict";var i=n(2858);t.exports=function(a,r){var o=a.positions,v=a.vectors,p={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(0===a.positions.length)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),p;for(var f=0,l=1/0,y=-1/0,s=1/0,x=-1/0,h=1/0,g=-1/0,m=null,d=null,A=[],b=1/0,c=!1,S=0;S<o.length;S++){var w=o[S];l=Math.min(w[0],l),y=Math.max(w[0],y),s=Math.min(w[1],s),x=Math.max(w[1],x),h=Math.min(w[2],h),g=Math.max(w[2],g);var E=v[S];if(i.length(E)>f&&(f=i.length(E)),S){var P=2*i.distance(m,w)/(i.length(d)+i.length(E));P?(b=Math.min(b,P),c=!1):c=!0}c||(m=w,d=E),A.push(E)}var R=[l,s,h],F=[y,x,g];r&&(r[0]=R,r[1]=F),0===f&&(f=1);var _=1/f;isFinite(b)||(b=1),p.vectorScale=b;var z=a.coneSize||.5;a.absoluteConeSize&&(z=a.absoluteConeSize*_),p.coneScale=z,S=0;for(var D=0;S<o.length;S++)for(var k=(w=o[S])[0],O=w[1],U=w[2],H=A[S],j=i.length(H)*_,ee=0,W=8;ee<W;ee++){p.positions.push([k,O,U,D++]),p.positions.push([k,O,U,D++]),p.positions.push([k,O,U,D++]),p.positions.push([k,O,U,D++]),p.positions.push([k,O,U,D++]),p.positions.push([k,O,U,D++]),p.vectors.push(H),p.vectors.push(H),p.vectors.push(H),p.vectors.push(H),p.vectors.push(H),p.vectors.push(H),p.vertexIntensity.push(j,j,j),p.vertexIntensity.push(j,j,j);var B=p.positions.length;p.cells.push([B-6,B-5,B-4],[B-3,B-2,B-1])}return p};var u=n(7234);t.exports.createMesh=n(5028),t.exports.createConeMesh=function(a,r){return t.exports.createMesh(a,r,{shaders:u,traceType:"cone"})}},5028:function(t,T,n){"use strict";var i=n(5158),u=n(5827),a=n(2944),r=n(8931),o=n(104),v=n(7437),p=n(5050),f=n(9156),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(A,b,c,S,w,E,P,R,F,_,z){this.gl=A,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=c,this.pickShader=S,this.trianglePositions=w,this.triangleVectors=E,this.triangleColors=R,this.triangleUVs=F,this.triangleIds=P,this.triangleVAO=_,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=z,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=l,this._view=l,this._projection=l,this._resolution=[1,1]}var s=y.prototype;function x(A){for(var b=f({colormap:A,nshades:256,format:"rgba"}),c=new Uint8Array(1024),S=0;S<256;++S){for(var w=b[S],E=0;E<3;++E)c[4*S+E]=w[E];c[4*S+3]=255*w[3]}return p(c,[256,256,4],[4,0,1])}function h(A){for(var b=A.length,c=new Array(b),S=0;S<b;++S)c[S]=A[S][2];return c}function g(A,b){var c=i(A,b.meshShader.vertex,b.meshShader.fragment,null,b.meshShader.attributes);return c.attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c.attributes.vector.location=4,c}function m(A,b){var c=i(A,b.pickShader.vertex,b.pickShader.fragment,null,b.pickShader.attributes);return c.attributes.position.location=0,c.attributes.id.location=1,c.attributes.vector.location=4,c}function d(A,b,c){var S=c.shaders;1===arguments.length&&(A=(b=A).gl);var w=g(A,S),E=m(A,S),P=r(A,p(new Uint8Array([255,255,255,255]),[1,1,4]));P.generateMipmap(),P.minFilter=A.LINEAR_MIPMAP_LINEAR,P.magFilter=A.LINEAR;var R=u(A),F=u(A),_=u(A),z=u(A),D=u(A),O=new y(A,P,w,E,R,F,D,_,z,a(A,[{buffer:R,type:A.FLOAT,size:4},{buffer:D,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:A.FLOAT,size:4},{buffer:z,type:A.FLOAT,size:2},{buffer:F,type:A.FLOAT,size:4}]),c.traceType||"cone");return O.update(b),O}s.isOpaque=function(){return this.opacity>=1},s.isTransparent=function(){return this.opacity<1},s.pickSlots=1,s.setPickBase=function(A){this.pickId=A},s.update=function(A){A=A||{};var b=this.gl;this.dirty=!0,"lightPosition"in A&&(this.lightPosition=A.lightPosition),"opacity"in A&&(this.opacity=A.opacity),"ambient"in A&&(this.ambientLight=A.ambient),"diffuse"in A&&(this.diffuseLight=A.diffuse),"specular"in A&&(this.specularLight=A.specular),"roughness"in A&&(this.roughness=A.roughness),"fresnel"in A&&(this.fresnel=A.fresnel),void 0!==A.tubeScale&&(this.tubeScale=A.tubeScale),void 0!==A.vectorScale&&(this.vectorScale=A.vectorScale),void 0!==A.coneScale&&(this.coneScale=A.coneScale),void 0!==A.coneOffset&&(this.coneOffset=A.coneOffset),A.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(x(A.colormap)),this.texture.generateMipmap());var c=A.cells,S=A.positions,w=A.vectors;if(S&&c&&w){var E=[],P=[],R=[],F=[],_=[];this.cells=c,this.positions=S,this.vectors=w;var z=A.meshColor||[1,1,1,1],D=A.vertexIntensity,k=1/0,O=-1/0;if(D)if(A.vertexIntensityBounds)k=+A.vertexIntensityBounds[0],O=+A.vertexIntensityBounds[1];else for(var U=0;U<D.length;++U){var H=D[U];k=Math.min(k,H),O=Math.max(O,H)}else for(U=0;U<S.length;++U)H=S[U][2],k=Math.min(k,H),O=Math.max(O,H);for(this.intensity=D||h(S),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],U=0;U<S.length;++U)for(var j=S[U],ee=0;ee<3;++ee)isNaN(j[ee])||!isFinite(j[ee])||(this.bounds[0][ee]=Math.min(this.bounds[0][ee],j[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],j[ee]));var W=0;e:for(U=0;U<c.length;++U){var B=c[U];if(3===B.length){for(ee=0;ee<3;++ee){j=S[te=B[ee]];for(var q=0;q<3;++q)if(isNaN(j[q])||!isFinite(j[q]))continue e}for(ee=0;ee<3;++ee){var te;j=S[te=B[2-ee]],E.push(j[0],j[1],j[2],j[3]);var oe=w[te];P.push(oe[0],oe[1],oe[2],oe[3]||0);var V,ie=z;3===ie.length?R.push(ie[0],ie[1],ie[2],1):R.push(ie[0],ie[1],ie[2],ie[3]),V=D?[(D[te]-k)/(O-k),0]:[(j[2]-k)/(O-k),0],F.push(V[0],V[1]),_.push(U)}W+=1}}this.triangleCount=W,this.trianglePositions.update(E),this.triangleVectors.update(P),this.triangleColors.update(R),this.triangleUVs.update(F),this.triangleIds.update(new Uint32Array(_))}},s.drawTransparent=s.draw=function(A){A=A||{};for(var b=this.gl,c=A.model||l,S=A.view||l,w=A.projection||l,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],P=0;P<3;++P)E[0][P]=Math.max(E[0][P],this.clipBounds[0][P]),E[1][P]=Math.min(E[1][P],this.clipBounds[1][P]);var R={model:c,view:S,projection:w,inverseModel:l.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};R.inverseModel=v(R.inverseModel,R.model),b.disable(b.CULL_FACE),this.texture.bind(0);var F=new Array(16);for(o(F,R.view,R.model),o(F,R.projection,F),v(F,F),P=0;P<3;++P)R.eyePosition[P]=F[12+P]/F[15];var _=F[15];for(P=0;P<3;++P)_+=this.lightPosition[P]*F[4*P+3];for(P=0;P<3;++P){for(var z=F[12+P],D=0;D<3;++D)z+=F[4*D+P]*this.lightPosition[D];R.lightPosition[P]=z/_}if(this.triangleCount>0){var k=this.triShader;k.bind(),k.uniforms=R,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},s.drawPick=function(A){A=A||{};for(var b=this.gl,c=A.model||l,S=A.view||l,w=A.projection||l,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],P=0;P<3;++P)E[0][P]=Math.max(E[0][P],this.clipBounds[0][P]),E[1][P]=Math.min(E[1][P],this.clipBounds[1][P]);this._model=[].slice.call(c),this._view=[].slice.call(S),this._projection=[].slice.call(w),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var R={model:c,view:S,projection:w,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},F=this.pickShader;F.bind(),F.uniforms=R,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},s.pick=function(A){if(!A||A.id!==this.pickId)return null;var b=A.value[0]+256*A.value[1]+65536*A.value[2],c=this.cells[b],S=this.positions[c[1]].slice(0,3),w={position:S,dataCoordinate:S,index:Math.floor(c[1]/48)};return"cone"===this.traceType?w.index=Math.floor(c[1]/48):"streamtube"===this.traceType&&(w.intensity=this.intensity[c[1]],w.velocity=this.vectors[c[1]].slice(0,3),w.divergence=this.vectors[c[1]][3],w.index=b),w},s.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=d},7234:function(t,T,n){var i=n(6832),u=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);T.meshShader={vertex:u,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:r,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(t){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(t,T,n){var i=n(1950);t.exports=function(a){return i[a]}},3110:function(t,T,n){"use strict";t.exports=y;var i=n(5827),u=n(2944),a=n(7667),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(s,x,h,g){this.gl=s,this.shader=g,this.buffer=x,this.vao=h,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var v=o.prototype;function p(s,x){for(var h=0;h<3;++h)s[0][h]=Math.min(s[0][h],x[h]),s[1][h]=Math.max(s[1][h],x[h])}v.isOpaque=function(){return!this.hasAlpha},v.isTransparent=function(){return this.hasAlpha},v.drawTransparent=v.draw=function(s){var x=this.gl,h=this.shader.uniforms;this.shader.bind();var g=h.view=s.view||r,m=h.projection=s.projection||r;h.model=s.model||r,h.clipBounds=this.clipBounds,h.opacity=this.opacity;var d=g[12],A=g[13],b=g[14],c=g[15],E=(s._ortho?2:1)*this.pixelRatio*(m[3]*d+m[7]*A+m[11]*b+m[15]*c)/x.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)x.lineWidth(this.lineWidth[P]*this.pixelRatio),h.capSize=this.capSize[P]*E,this.lineCount[P]&&x.drawArrays(x.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var f=function(){for(var s=new Array(3),x=0;x<3;++x){for(var h=[],g=1;g<=2;++g)for(var m=-1;m<=1;m+=2){var A=[0,0,0];A[(g+x)%3]=m,h.push(A)}s[x]=h}return s}();function l(s,x,h,g){for(var m=f[g],d=0;d<m.length;++d){var A=m[d];s.push(x[0],x[1],x[2],h[0],h[1],h[2],h[3],A[0],A[1],A[2])}return m.length}function y(s){var x=s.gl,h=i(x),g=u(x,[{buffer:h,type:x.FLOAT,size:3,offset:0,stride:40},{buffer:h,type:x.FLOAT,size:4,offset:12,stride:40},{buffer:h,type:x.FLOAT,size:3,offset:28,stride:40}]),m=a(x);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var d=new o(x,h,g,m);return d.update(s),d}v.update=function(s){"lineWidth"in(s=s||{})&&(this.lineWidth=s.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in s&&(this.capSize=s.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in s&&(this.opacity=+s.opacity,this.opacity<1&&(this.hasAlpha=!0));var x=s.color||[[0,0,0],[0,0,0],[0,0,0]],h=s.position,g=s.error;if(Array.isArray(x[0])||(x=[x,x,x]),h&&g){var m=[],d=h.length,A=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var b=0;b<3;++b){this.lineOffset[b]=A;e:for(var c=0;c<d;++c){for(var S=h[c],w=0;w<3;++w)if(isNaN(S[w])||!isFinite(S[w]))continue e;var R,E=g[c],P=x[b];Array.isArray(P[0])&&(P=x[c]),3===P.length?P=[P[0],P[1],P[2],1]:4===P.length&&(P=[P[0],P[1],P[2],P[3]],!this.hasAlpha&&P[3]<1&&(this.hasAlpha=!0)),isNaN(E[0][b])||isNaN(E[1][b])||(E[0][b]<0&&((R=S.slice())[b]+=E[0][b],m.push(S[0],S[1],S[2],P[0],P[1],P[2],P[3],0,0,0,R[0],R[1],R[2],P[0],P[1],P[2],P[3],0,0,0),p(this.bounds,R),A+=2+l(m,R,P,b)),E[1][b]>0&&((R=S.slice())[b]+=E[1][b],m.push(S[0],S[1],S[2],P[0],P[1],P[2],P[3],0,0,0,R[0],R[1],R[2],P[0],P[1],P[2],P[3],0,0,0),p(this.bounds,R),A+=2+l(m,R,P,b)))}this.lineCount[b]=A-this.lineOffset[b]}this.buffer.update(m)}},v.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(t,T,n){"use strict";var i=n(6832),u=n(5158),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);t.exports=function(o){return u(o,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(t,T,n){"use strict";var i=n(8931);t.exports=A;var a,r,o,v,u=null;function p(b){return[b.getParameter(b.FRAMEBUFFER_BINDING),b.getParameter(b.RENDERBUFFER_BINDING),b.getParameter(b.TEXTURE_BINDING_2D)]}function f(b,c){b.bindFramebuffer(b.FRAMEBUFFER,c[0]),b.bindRenderbuffer(b.RENDERBUFFER,c[1]),b.bindTexture(b.TEXTURE_2D,c[2])}function l(b,c){var S=b.getParameter(c.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(S+1);for(var w=0;w<=S;++w){for(var E=new Array(S),P=0;P<w;++P)E[P]=b.COLOR_ATTACHMENT0+P;for(P=w;P<S;++P)E[P]=b.NONE;u[w]=E}}function y(b){switch(b){case a:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case v:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function s(b,c,S,w,E,P){if(!w)return null;var R=i(b,c,S,E,w);return R.magFilter=b.NEAREST,R.minFilter=b.NEAREST,R.mipSamples=1,R.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,P,b.TEXTURE_2D,R.handle,0),R}function x(b,c,S,w,E){var P=b.createRenderbuffer();return b.bindRenderbuffer(b.RENDERBUFFER,P),b.renderbufferStorage(b.RENDERBUFFER,w,c,S),b.framebufferRenderbuffer(b.FRAMEBUFFER,E,b.RENDERBUFFER,P),P}function h(b){var c=p(b.gl),S=b.gl,w=b.handle=S.createFramebuffer(),E=b._shape[0],P=b._shape[1],R=b.color.length,F=b._ext,_=b._useStencil,z=b._useDepth,D=b._colorType;S.bindFramebuffer(S.FRAMEBUFFER,w);for(var k=0;k<R;++k)b.color[k]=s(S,E,P,D,S.RGBA,S.COLOR_ATTACHMENT0+k);0===R?(b._color_rb=x(S,E,P,S.RGBA4,S.COLOR_ATTACHMENT0),F&&F.drawBuffersWEBGL(u[0])):R>1&&F.drawBuffersWEBGL(u[R]);var O=S.getExtension("WEBGL_depth_texture");O?_?b.depth=s(S,E,P,O.UNSIGNED_INT_24_8_WEBGL,S.DEPTH_STENCIL,S.DEPTH_STENCIL_ATTACHMENT):z&&(b.depth=s(S,E,P,S.UNSIGNED_SHORT,S.DEPTH_COMPONENT,S.DEPTH_ATTACHMENT)):z&&_?b._depth_rb=x(S,E,P,S.DEPTH_STENCIL,S.DEPTH_STENCIL_ATTACHMENT):z?b._depth_rb=x(S,E,P,S.DEPTH_COMPONENT16,S.DEPTH_ATTACHMENT):_&&(b._depth_rb=x(S,E,P,S.STENCIL_INDEX,S.STENCIL_ATTACHMENT));var U=S.checkFramebufferStatus(S.FRAMEBUFFER);if(U!==S.FRAMEBUFFER_COMPLETE){for(b._destroyed=!0,S.bindFramebuffer(S.FRAMEBUFFER,null),S.deleteFramebuffer(b.handle),b.handle=null,b.depth&&(b.depth.dispose(),b.depth=null),b._depth_rb&&(S.deleteRenderbuffer(b._depth_rb),b._depth_rb=null),k=0;k<b.color.length;++k)b.color[k].dispose(),b.color[k]=null;b._color_rb&&(S.deleteRenderbuffer(b._color_rb),b._color_rb=null),f(S,c),y(U)}f(S,c)}function g(b,c,S,w,E,P,R,F){this.gl=b,this._shape=[0|c,0|S],this._destroyed=!1,this._ext=F,this.color=new Array(E);for(var _=0;_<E;++_)this.color[_]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=P,this._useStencil=R;var z=this,D=[0|c,0|S];Object.defineProperties(D,{0:{get:function(){return z._shape[0]},set:function(k){return z.width=k}},1:{get:function(){return z._shape[1]},set:function(k){return z.height=k}}}),this._shapeVector=D,h(this)}var m=g.prototype;function d(b,c,S){if(b._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==c||b._shape[1]!==S){var w=b.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(c<0||c>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=c,b._shape[1]=S;for(var P=p(w),R=0;R<b.color.length;++R)b.color[R].shape=b._shape;b._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,b._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,b._shape[0],b._shape[1])),b.depth&&(b.depth.shape=b._shape),b._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,b._shape[0],b._shape[1]):b._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,b._shape[0],b._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,b.handle);var F=w.checkFramebufferStatus(w.FRAMEBUFFER);F!==w.FRAMEBUFFER_COMPLETE&&(b.dispose(),f(w,P),y(F)),f(w,P)}}function A(b,c,S,w){a||(a=b.FRAMEBUFFER_UNSUPPORTED,r=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,v=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=b.getExtension("WEBGL_draw_buffers");if(!u&&E&&l(b,E),Array.isArray(c)&&(w=S,S=0|c[1],c=0|c[0]),"number"!=typeof c)throw new Error("gl-fbo: Missing shape parameter");var P=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(c<0||c>P||S<0||S>P)throw new Error("gl-fbo: Parameters are too large for FBO");var R=1;if("color"in(w=w||{})){if((R=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(R>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(R>b.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+R+" draw buffers")}}var F=b.UNSIGNED_BYTE,_=b.getExtension("OES_texture_float");if(w.float&&R>0){if(!_)throw new Error("gl-fbo: Context does not support floating point textures");F=b.FLOAT}else w.preferFloat&&R>0&&_&&(F=b.FLOAT);var z=!0;"depth"in w&&(z=!!w.depth);var D=!1;return"stencil"in w&&(D=!!w.stencil),new g(b,c,S,F,R,z,D,E)}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){if(Array.isArray(b)||(b=[0|b,0|b]),2!==b.length)throw new Error("gl-fbo: Shape vector must be length 2");var c=0|b[0],S=0|b[1];return d(this,c,S),[c,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){return d(this,b|=0,this._shape[1]),b},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){return b|=0,d(this,this._shape[0],b),b},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle),b.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var c=0;c<this.color.length;++c)this.color[c].dispose(),this.color[c]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(t,T,n){var i=n(8974).sprintf,u=n(6603),a=n(9365),r=n(8008);function o(v,p,f){"use strict";var l=a(p)||"of unknown name (see npm glsl-shader-name)",y="unknown type";void 0!==f&&(y=f===u.FRAGMENT_SHADER?"fragment":"vertex");for(var s=i("Error compiling %s shader %s:\n",y,l),x=i("%s%s",s,v),h=v.split("\n"),g={},m=0;m<h.length;m++){var d=h[m];if(""!==d&&"\0"!==d){var A=parseInt(d.split(":")[2]);if(isNaN(A))throw new Error(i("Could not parse error: %s",d));g[A]=d}}var b=r(p).split("\n");for(m=0;m<b.length;m++)if((g[m+3]||g[m+2]||g[m+1])&&(s+=b[m]+"\n",g[m+1])){var S=g[m+1];S=S.substr(S.split(":",3).join(":").length+1).trim(),s+=i("^^^ %s\n\n",S)}return{long:s.trim(),short:x.trim()}}t.exports=o},6386:function(t,T,n){"use strict";t.exports=y;var i=n(5070),u=n(9560),a=n(5306),r=n(5158),o=n(5827),v=n(1292);function p(s,x,h,g,m,d,A){this.plot=s,this.shader=x,this.pickShader=h,this.positionBuffer=g,this.weightBuffer=m,this.colorBuffer=d,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var s,f=p.prototype,l=[0,0,1,0,0,1,1,0,1,1,0,1];function y(s,x){var h=s.gl,S=new p(s,r(h,v.vertex,v.fragment),r(h,v.pickVertex,v.pickFragment),o(h),o(h),o(h),o(h));return S.update(x),s.addObject(S),S}f.draw=(s=[1,0,0,0,1,0,0,0,1],function(){var x=this.plot,h=this.shader,g=this.bounds,m=this.numVertices;if(!(m<=0)){var d=x.gl,A=x.dataBox,b=g[2]-g[0],c=g[3]-g[1],S=A[2]-A[0],w=A[3]-A[1];s[0]=2*b/S,s[4]=2*c/w,s[6]=2*(g[0]-A[0])/S-1,s[7]=2*(g[1]-A[1])/w-1,h.bind();var E=h.uniforms;E.viewTransform=s,E.shape=this.shape;var P=h.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(d.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(d.UNSIGNED_BYTE,!0),d.drawArrays(d.TRIANGLES,0,m)}}),f.drawPick=function(){var s=[1,0,0,0,1,0,0,0,1],x=[0,0,0,0];return function(h){var g=this.plot,m=this.pickShader,d=this.bounds,A=this.numVertices;if(!(A<=0)){var b=g.gl,c=g.dataBox,S=d[2]-d[0],w=d[3]-d[1],E=c[2]-c[0],P=c[3]-c[1];s[0]=2*S/E,s[4]=2*w/P,s[6]=2*(d[0]-c[0])/E-1,s[7]=2*(d[1]-c[1])/P-1;for(var R=0;R<4;++R)x[R]=h>>8*R&255;this.pickOffset=h,m.bind();var F=m.uniforms;F.viewTransform=s,F.pickOffset=x,F.shape=this.shape;var _=m.attributes;return this.positionBuffer.bind(),_.position.pointer(),this.weightBuffer.bind(),_.weight.pointer(b.UNSIGNED_BYTE,!1),this.idBuffer.bind(),_.pickId.pointer(b.UNSIGNED_BYTE,!1),b.drawArrays(b.TRIANGLES,0,A),h+this.shape[0]*this.shape[1]}}}(),f.pick=function(s,x,h){var g=this.pickOffset,m=this.shape[0]*this.shape[1];if(h<g||h>=g+m)return null;var d=h-g,A=this.xData,b=this.yData;return{object:this,pointId:d,dataCoord:[A[d%this.shape[0]],b[d/this.shape[0]|0]]}},f.update=function(s){var x=(s=s||{}).shape||[0,0],h=s.x||u(x[0]),g=s.y||u(x[1]),m=s.z||new Float32Array(x[0]*x[1]),d=!1!==s.zsmooth;this.xData=h,this.yData=g;var w,E,P,R,A=s.colorLevels||[0],b=s.colorValues||[0,0,0,1],c=A.length,S=this.bounds;d?(w=S[0]=h[0],E=S[1]=g[0],P=S[2]=h[h.length-1],R=S[3]=g[g.length-1]):(w=S[0]=h[0]+(h[1]-h[0])/2,E=S[1]=g[0]+(g[1]-g[0])/2,P=S[2]=h[h.length-1]+(h[h.length-1]-h[h.length-2])/2,R=S[3]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2);var F=1/(P-w),_=1/(R-E),z=x[0],D=x[1];this.shape=[z,D];var k=(d?(z-1)*(D-1):z*D)*(l.length>>>1);this.numVertices=k;for(var O=a.mallocUint8(4*k),U=a.mallocFloat32(2*k),H=a.mallocUint8(2*k),j=a.mallocUint32(k),ee=0,W=d?z-1:z,B=d?D-1:D,te=0;te<B;++te){var q,oe;d?(q=_*(g[te]-E),oe=_*(g[te+1]-E)):(q=te<D-1?_*(g[te]-(g[te+1]-g[te])/2-E):_*(g[te]-(g[te]-g[te-1])/2-E),oe=te<D-1?_*(g[te]+(g[te+1]-g[te])/2-E):_*(g[te]+(g[te]-g[te-1])/2-E));for(var ie=0;ie<W;++ie){var V,Y;d?(V=F*(h[ie]-w),Y=F*(h[ie+1]-w)):(V=ie<z-1?F*(h[ie]-(h[ie+1]-h[ie])/2-w):F*(h[ie]-(h[ie]-h[ie-1])/2-w),Y=ie<z-1?F*(h[ie]+(h[ie+1]-h[ie])/2-w):F*(h[ie]+(h[ie]-h[ie-1])/2-w));for(var ae=0;ae<l.length;ae+=2){var se,de,be,De,X=l[ae],J=l[ae+1],re=m[d?(te+J)*z+(ie+X):te*z+ie],ne=i.le(A,re);if(ne<0)se=b[0],de=b[1],be=b[2],De=b[3];else if(ne===c-1)se=b[4*c-4],de=b[4*c-3],be=b[4*c-2],De=b[4*c-1];else{var _e=(re-A[ne])/(A[ne+1]-A[ne]),Ce=1-_e,Le=4*ne,Fe=4*(ne+1);se=Ce*b[Le]+_e*b[Fe],de=Ce*b[Le+1]+_e*b[Fe+1],be=Ce*b[Le+2]+_e*b[Fe+2],De=Ce*b[Le+3]+_e*b[Fe+3]}O[4*ee]=255*se,O[4*ee+1]=255*de,O[4*ee+2]=255*be,O[4*ee+3]=255*De,U[2*ee]=.5*V+.5*Y,U[2*ee+1]=.5*q+.5*oe,H[2*ee]=X,H[2*ee+1]=J,j[ee]=te*z+ie,ee+=1}}}this.positionBuffer.update(U),this.weightBuffer.update(H),this.colorBuffer.update(O),this.idBuffer.update(j),a.free(U),a.free(O),a.free(H),a.free(j)},f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(t,T,n){"use strict";var i=n(6832);t.exports={fragment:i(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(t,T,n){var i=n(6832),u=n(5158),a=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),v=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(p){return u(p,a,r,null,v)},T.createPickShader=function(p){return u(p,a,o,null,v)}},6086:function(t,T,n){"use strict";t.exports=b;var i=n(5827),u=n(2944),a=n(8931),r=new Uint8Array(4),o=new Float32Array(r.buffer);function v(c,S,w,E){return r[0]=E,r[1]=w,r[2]=S,r[3]=c,o[0]}var p=n(5070),f=n(5050),l=n(248),y=l.createShader,s=l.createPickShader,x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(c,S){for(var w=0,E=0;E<3;++E){var P=c[E]-S[E];w+=P*P}return Math.sqrt(w)}function g(c){for(var S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(c[0][w],S[0][w]),S[1][w]=Math.min(c[1][w],S[1][w]);return S}function m(c,S,w,E){this.arcLength=c,this.position=S,this.index=w,this.dataCoordinate=E}function d(c,S,w,E,P,R){this.gl=c,this.shader=S,this.pickShader=w,this.buffer=E,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=R,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var A=d.prototype;function b(c){var S=c.gl||c.scene&&c.scene.gl,w=y(S);w.attributes.position.location=0,w.attributes.nextPosition.location=1,w.attributes.arcLength.location=2,w.attributes.lineWidth.location=3,w.attributes.color.location=4;var E=s(S);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;for(var P=i(S),R=u(S,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),F=f(new Array(1024),[256,1,4]),_=0;_<1024;++_)F.data[_]=255;var z=a(S,F);z.wrap=S.REPEAT;var D=new d(S,w,E,P,R,z);return D.update(c),D}A.isTransparent=function(){return this.hasAlpha},A.isOpaque=function(){return!this.hasAlpha},A.pickSlots=1,A.setPickBase=function(c){this.pickId=c},A.drawTransparent=A.draw=function(c){if(this.vertexCount){var S=this.gl,w=this.shader,E=this.vao;w.bind(),w.uniforms={model:c.model||x,view:c.view||x,projection:c.projection||x,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[S.drawingBufferWidth,S.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(S.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},A.drawPick=function(c){if(this.vertexCount){var S=this.gl,w=this.pickShader,E=this.vao;w.bind(),w.uniforms={model:c.model||x,view:c.view||x,projection:c.projection||x,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[S.drawingBufferWidth,S.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(S.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},A.update=function(c){var S,w;this.dirty=!0;var E=!!c.connectGaps;"dashScale"in c&&(this.dashScale=c.dashScale),this.hasAlpha=!1,"opacity"in c&&(this.opacity=+c.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],R=[],F=[],_=0,z=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],k=c.position||c.positions;if(k){var O=c.color||c.colors||[0,0,0,1],U=c.lineWidth||1,H=!1;e:for(S=1;S<k.length;++S){var B,te,q,j=k[S-1],ee=k[S];for(R.push(_),F.push(j.slice()),w=0;w<3;++w){if(isNaN(j[w])||isNaN(ee[w])||!isFinite(j[w])||!isFinite(ee[w])){if(!E&&P.length>0){for(var W=0;W<24;++W)P.push(P[P.length-12]);z+=2,H=!0}continue e}D[0][w]=Math.min(D[0][w],j[w],ee[w]),D[1][w]=Math.max(D[1][w],j[w],ee[w])}Array.isArray(O[0])?(B=O.length>S-1?O[S-1]:O.length>0?O[O.length-1]:[0,0,0,1],te=O.length>S?O[S]:O.length>0?O[O.length-1]:[0,0,0,1]):B=te=O,3===B.length&&(B=[B[0],B[1],B[2],1]),3===te.length&&(te=[te[0],te[1],te[2],1]),!this.hasAlpha&&B[3]<1&&(this.hasAlpha=!0),q=Array.isArray(U)?U.length>S-1?U[S-1]:U.length>0?U[U.length-1]:[0,0,0,1]:U;var oe=_;if(_+=h(j,ee),H){for(w=0;w<2;++w)P.push(j[0],j[1],j[2],ee[0],ee[1],ee[2],oe,q,B[0],B[1],B[2],B[3]);z+=2,H=!1}P.push(j[0],j[1],j[2],ee[0],ee[1],ee[2],oe,q,B[0],B[1],B[2],B[3],j[0],j[1],j[2],ee[0],ee[1],ee[2],oe,-q,B[0],B[1],B[2],B[3],ee[0],ee[1],ee[2],j[0],j[1],j[2],_,-q,te[0],te[1],te[2],te[3],ee[0],ee[1],ee[2],j[0],j[1],j[2],_,q,te[0],te[1],te[2],te[3]),z+=4}}if(this.buffer.update(P),R.push(_),F.push(k[k.length-1].slice()),this.bounds=D,this.vertexCount=z,this.points=F,this.arcLength=R,"dashes"in c){var V=c.dashes.slice();for(V.unshift(0),S=1;S<V.length;++S)V[S]=V[S-1]+V[S];var Y=f(new Array(1024),[256,1,4]);for(S=0;S<256;++S){for(w=0;w<4;++w)Y.set(S,0,w,0);1&p.le(V,V[V.length-1]*S/255)?Y.set(S,0,0,0):Y.set(S,0,0,255)}this.texture.setPixels(Y)}},A.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},A.pick=function(c){if(!c||c.id!==this.pickId)return null;var S=v(c.value[0],c.value[1],c.value[2],0),w=p.le(this.arcLength,S);if(w<0)return null;if(w===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),w);for(var E=this.points[w],P=this.points[Math.min(w+1,this.points.length-1)],R=(S-this.arcLength[w])/(this.arcLength[w+1]-this.arcLength[w]),F=1-R,_=[0,0,0],z=0;z<3;++z)_[z]=F*E[z]+R*P[z];var D=Math.min(R<.5?w:w+1,this.points.length-1);return new m(S,_,D,this.points[D])}},7332:function(t){function T(n){var i=new Float32Array(16);return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}t.exports=T},9823:function(t){function T(){var n=new Float32Array(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}t.exports=T},7787:function(t){function T(n){var i=n[0],u=n[1],a=n[2],r=n[3],o=n[4],v=n[5],p=n[6],f=n[7],l=n[8],y=n[9],s=n[10],x=n[11],h=n[12],g=n[13],m=n[14],d=n[15];return(i*v-u*o)*(s*d-x*m)-(i*p-a*o)*(y*d-x*g)+(i*f-r*o)*(y*m-s*g)+(u*p-a*v)*(l*d-x*h)-(u*f-r*v)*(l*m-s*h)+(a*f-r*p)*(l*g-y*h)}t.exports=T},5950:function(t){function T(n,i){var u=i[0],a=i[1],r=i[2],o=i[3],v=u+u,p=a+a,f=r+r,l=u*v,y=a*v,s=a*p,x=r*v,h=r*p,g=r*f,m=o*v,d=o*p,A=o*f;return n[0]=1-s-g,n[1]=y+A,n[2]=x-d,n[3]=0,n[4]=y-A,n[5]=1-l-g,n[6]=h+m,n[7]=0,n[8]=x+d,n[9]=h-m,n[10]=1-l-s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}t.exports=T},7280:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2],v=i[3],p=a+a,f=r+r,l=o+o,y=a*p,s=a*f,x=a*l,h=r*f,g=r*l,m=o*l,d=v*p,A=v*f,b=v*l;return n[0]=1-(h+m),n[1]=s+b,n[2]=x-A,n[3]=0,n[4]=s-b,n[5]=1-(y+m),n[6]=g+d,n[7]=0,n[8]=x+A,n[9]=g-d,n[10]=1-(y+h),n[11]=0,n[12]=u[0],n[13]=u[1],n[14]=u[2],n[15]=1,n}t.exports=T},9947:function(t){function T(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}t.exports=T},7437:function(t){function T(n,i){var u=i[0],a=i[1],r=i[2],o=i[3],v=i[4],p=i[5],f=i[6],l=i[7],y=i[8],s=i[9],x=i[10],h=i[11],g=i[12],m=i[13],d=i[14],A=i[15],b=u*p-a*v,c=u*f-r*v,S=u*l-o*v,w=a*f-r*p,E=a*l-o*p,P=r*l-o*f,R=y*m-s*g,F=y*d-x*g,_=y*A-h*g,z=s*d-x*m,D=s*A-h*m,k=x*A-h*d,O=b*k-c*D+S*z+w*_-E*F+P*R;return O?(O=1/O,n[0]=(p*k-f*D+l*z)*O,n[1]=(r*D-a*k-o*z)*O,n[2]=(m*P-d*E+A*w)*O,n[3]=(x*E-s*P-h*w)*O,n[4]=(f*_-v*k-l*F)*O,n[5]=(u*k-r*_+o*F)*O,n[6]=(d*S-g*P-A*c)*O,n[7]=(y*P-x*S+h*c)*O,n[8]=(v*D-p*_+l*R)*O,n[9]=(a*_-u*D-o*R)*O,n[10]=(g*E-m*S+A*b)*O,n[11]=(s*S-y*E-h*b)*O,n[12]=(p*F-v*z-f*R)*O,n[13]=(u*z-a*F+r*R)*O,n[14]=(m*c-g*w-d*b)*O,n[15]=(y*w-s*c+x*b)*O,n):null}t.exports=T},3012:function(t,T,n){var i=n(9947);function u(a,r,o,v){var p,f,l,y,s,x,h,g,m,d,A=r[0],b=r[1],c=r[2],S=v[0],w=v[1],E=v[2],P=o[0],R=o[1],F=o[2];return Math.abs(A-P)<1e-6&&Math.abs(b-R)<1e-6&&Math.abs(c-F)<1e-6?i(a):(h=A-P,g=b-R,m=c-F,p=w*(m*=d=1/Math.sqrt(h*h+g*g+m*m))-E*(g*=d),f=E*(h*=d)-S*m,l=S*g-w*h,(d=Math.sqrt(p*p+f*f+l*l))?(p*=d=1/d,f*=d,l*=d):(p=0,f=0,l=0),y=g*l-m*f,s=m*p-h*l,x=h*f-g*p,(d=Math.sqrt(y*y+s*s+x*x))?(y*=d=1/d,s*=d,x*=d):(y=0,s=0,x=0),a[0]=p,a[1]=y,a[2]=h,a[3]=0,a[4]=f,a[5]=s,a[6]=g,a[7]=0,a[8]=l,a[9]=x,a[10]=m,a[11]=0,a[12]=-(p*A+f*b+l*c),a[13]=-(y*A+s*b+x*c),a[14]=-(h*A+g*b+m*c),a[15]=1,a)}t.exports=u},104:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2],v=i[3],p=i[4],f=i[5],l=i[6],y=i[7],s=i[8],x=i[9],h=i[10],g=i[11],m=i[12],d=i[13],A=i[14],b=i[15],c=u[0],S=u[1],w=u[2],E=u[3];return n[0]=c*a+S*p+w*s+E*m,n[1]=c*r+S*f+w*x+E*d,n[2]=c*o+S*l+w*h+E*A,n[3]=c*v+S*y+w*g+E*b,c=u[4],S=u[5],w=u[6],E=u[7],n[4]=c*a+S*p+w*s+E*m,n[5]=c*r+S*f+w*x+E*d,n[6]=c*o+S*l+w*h+E*A,n[7]=c*v+S*y+w*g+E*b,c=u[8],S=u[9],w=u[10],E=u[11],n[8]=c*a+S*p+w*s+E*m,n[9]=c*r+S*f+w*x+E*d,n[10]=c*o+S*l+w*h+E*A,n[11]=c*v+S*y+w*g+E*b,c=u[12],S=u[13],w=u[14],E=u[15],n[12]=c*a+S*p+w*s+E*m,n[13]=c*r+S*f+w*x+E*d,n[14]=c*o+S*l+w*h+E*A,n[15]=c*v+S*y+w*g+E*b,n}t.exports=T},5268:function(t){function T(n,i,u,a,r,o,v){var p=1/(i-u),f=1/(a-r),l=1/(o-v);return n[0]=-2*p,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*f,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(i+u)*p,n[13]=(r+a)*f,n[14]=(v+o)*l,n[15]=1,n}t.exports=T},1120:function(t){function T(n,i,u,a,r){var o=1/Math.tan(i/2),v=1/(a-r);return n[0]=o/u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+a)*v,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*r*a*v,n[15]=0,n}t.exports=T},4422:function(t){function T(n,i,u,a){var f,l,y,s,x,h,g,m,d,A,b,c,S,w,E,P,R,F,_,z,D,k,O,U,r=a[0],o=a[1],v=a[2],p=Math.sqrt(r*r+o*o+v*v);return Math.abs(p)<1e-6?null:(r*=p=1/p,o*=p,v*=p,f=Math.sin(u),y=1-(l=Math.cos(u)),s=i[0],x=i[1],h=i[2],g=i[3],m=i[4],d=i[5],A=i[6],b=i[7],c=i[8],S=i[9],w=i[10],E=i[11],P=r*r*y+l,R=o*r*y+v*f,F=v*r*y-o*f,_=r*o*y-v*f,z=o*o*y+l,D=v*o*y+r*f,k=r*v*y+o*f,O=o*v*y-r*f,U=v*v*y+l,n[0]=s*P+m*R+c*F,n[1]=x*P+d*R+S*F,n[2]=h*P+A*R+w*F,n[3]=g*P+b*R+E*F,n[4]=s*_+m*z+c*D,n[5]=x*_+d*z+S*D,n[6]=h*_+A*z+w*D,n[7]=g*_+b*z+E*D,n[8]=s*k+m*O+c*U,n[9]=x*k+d*O+S*U,n[10]=h*k+A*O+w*U,n[11]=g*k+b*O+E*U,i!==n&&(n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15]),n)}t.exports=T},6109:function(t){function T(n,i,u){var a=Math.sin(u),r=Math.cos(u),o=i[4],v=i[5],p=i[6],f=i[7],l=i[8],y=i[9],s=i[10],x=i[11];return i!==n&&(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15]),n[4]=o*r+l*a,n[5]=v*r+y*a,n[6]=p*r+s*a,n[7]=f*r+x*a,n[8]=l*r-o*a,n[9]=y*r-v*a,n[10]=s*r-p*a,n[11]=x*r-f*a,n}t.exports=T},7115:function(t){function T(n,i,u){var a=Math.sin(u),r=Math.cos(u),o=i[0],v=i[1],p=i[2],f=i[3],l=i[8],y=i[9],s=i[10],x=i[11];return i!==n&&(n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15]),n[0]=o*r-l*a,n[1]=v*r-y*a,n[2]=p*r-s*a,n[3]=f*r-x*a,n[8]=o*a+l*r,n[9]=v*a+y*r,n[10]=p*a+s*r,n[11]=f*a+x*r,n}t.exports=T},5240:function(t){function T(n,i,u){var a=Math.sin(u),r=Math.cos(u),o=i[0],v=i[1],p=i[2],f=i[3],l=i[4],y=i[5],s=i[6],x=i[7];return i!==n&&(n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15]),n[0]=o*r+l*a,n[1]=v*r+y*a,n[2]=p*r+s*a,n[3]=f*r+x*a,n[4]=l*r-o*a,n[5]=y*r-v*a,n[6]=s*r-p*a,n[7]=x*r-f*a,n}t.exports=T},3668:function(t){function T(n,i,u){var a=u[0],r=u[1],o=u[2];return n[0]=i[0]*a,n[1]=i[1]*a,n[2]=i[2]*a,n[3]=i[3]*a,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[7]=i[7]*r,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=i[11]*o,n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n}t.exports=T},998:function(t){function T(n,i,u){var v,p,f,l,y,s,x,h,g,m,d,A,a=u[0],r=u[1],o=u[2];return i===n?(n[12]=i[0]*a+i[4]*r+i[8]*o+i[12],n[13]=i[1]*a+i[5]*r+i[9]*o+i[13],n[14]=i[2]*a+i[6]*r+i[10]*o+i[14],n[15]=i[3]*a+i[7]*r+i[11]*o+i[15]):(v=i[0],p=i[1],f=i[2],l=i[3],y=i[4],s=i[5],x=i[6],h=i[7],g=i[8],m=i[9],d=i[10],A=i[11],n[0]=v,n[1]=p,n[2]=f,n[3]=l,n[4]=y,n[5]=s,n[6]=x,n[7]=h,n[8]=g,n[9]=m,n[10]=d,n[11]=A,n[12]=v*a+y*r+g*o+i[12],n[13]=p*a+s*r+m*o+i[13],n[14]=f*a+x*r+d*o+i[14],n[15]=l*a+h*r+A*o+i[15]),n}t.exports=T},2142:function(t){function T(n,i){if(n===i){var u=i[1],a=i[2],r=i[3],o=i[6],v=i[7],p=i[11];n[1]=i[4],n[2]=i[8],n[3]=i[12],n[4]=u,n[6]=i[9],n[7]=i[13],n[8]=a,n[9]=o,n[11]=i[14],n[12]=r,n[13]=v,n[14]=p}else n[0]=i[0],n[1]=i[4],n[2]=i[8],n[3]=i[12],n[4]=i[1],n[5]=i[5],n[6]=i[9],n[7]=i[13],n[8]=i[2],n[9]=i[6],n[10]=i[10],n[11]=i[14],n[12]=i[3],n[13]=i[7],n[14]=i[11],n[15]=i[15];return n}t.exports=T},4340:function(t,T,n){"use strict";var i=n(957),u=n(7309);function a(f,l){for(var y=[0,0,0,0],s=0;s<4;++s)for(var x=0;x<4;++x)y[x]+=f[4*s+x]*l[s];return y}function r(f,l,y,s,x){for(var h=a(s,a(y,a(l,[f[0],f[1],f[2],1]))),g=0;g<3;++g)h[g]/=h[3];return[.5*x[0]*(1+h[0]),.5*x[1]*(1-h[1])]}function o(f,l){if(2===f.length){for(var y=0,s=0,x=0;x<2;++x)y+=Math.pow(l[x]-f[0][x],2),s+=Math.pow(l[x]-f[1][x],2);return(y=Math.sqrt(y))+(s=Math.sqrt(s))<1e-6?[1,0]:[s/(y+s),y/(s+y)]}if(3===f.length){var h=[0,0];return u(f[0],f[1],f[2],l,h),i(f,h)}return[]}function v(f,l){for(var y=[0,0,0],s=0;s<f.length;++s)for(var x=f[s],h=l[s],g=0;g<3;++g)y[g]+=h*x[g];return y}function p(f,l,y,s,x,h){if(1===f.length)return[0,f[0].slice()];for(var g=new Array(f.length),m=0;m<f.length;++m)g[m]=r(f[m],y,s,x,h);var d=0,A=1/0;for(m=0;m<g.length;++m){for(var b=0,c=0;c<2;++c)b+=Math.pow(g[m][c]-l[c],2);b<A&&(A=b,d=m)}var S=o(g,l),w=0;for(m=0;m<3;++m){if(S[m]<-.001||S[m]>1.0001)return null;w+=S[m]}return Math.abs(w-1)>.001?null:[d,v(f,S),S]}t.exports=p},2056:function(t,T,n){var i=n(6832),u=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),r=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),v=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),p=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),f=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),y=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),x=i(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);T.meshShader={vertex:u,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:r,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:v,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:y,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:s,fragment:x,attributes:[{name:"position",type:"vec3"}]}},8116:function(t,T,n){"use strict";var i=1e-6,u=1e-6,a=n(5158),r=n(5827),o=n(2944),v=n(8931),p=n(115),f=n(104),l=n(7437),y=n(5050),s=n(9156),x=n(7212),h=n(5306),g=n(2056),m=n(4340),d=g.meshShader,A=g.wireShader,b=g.pointShader,c=g.pickShader,S=g.pointPickShader,w=g.contourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(W,B,te,q,oe,ie,V,Y,ae,X,J,ue,re,ne,se,de,be,De,_e,Ce,Le,Fe,ke,ze,Pe,Ie,Qe){this.gl=W,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=B,this.dirty=!0,this.triShader=te,this.lineShader=q,this.pointShader=oe,this.pickShader=ie,this.pointPickShader=V,this.contourShader=Y,this.trianglePositions=ae,this.triangleColors=J,this.triangleNormals=re,this.triangleUVs=ue,this.triangleIds=X,this.triangleVAO=ne,this.triangleCount=0,this.lineWidth=1,this.edgePositions=se,this.edgeColors=be,this.edgeUVs=De,this.edgeIds=de,this.edgeVAO=_e,this.edgeCount=0,this.pointPositions=Ce,this.pointColors=Fe,this.pointUVs=ke,this.pointSizes=ze,this.pointIds=Le,this.pointVAO=Pe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ie,this.contourVAO=Qe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=E,this._view=E,this._projection=E,this._resolution=[1,1]}var R=P.prototype;function F(W,B){if(!B||!B.length)return 1;for(var te=0;te<B.length;++te){if(B.length<2)return 1;if(B[te][0]===W)return B[te][1];if(B[te][0]>W&&te>0){var q=(B[te][0]-W)/(B[te][0]-B[te-1][0]);return B[te][1]*(1-q)+q*B[te-1][1]}}return 1}function _(W,B){for(var te=s({colormap:W,nshades:256,format:"rgba"}),q=new Uint8Array(1024),oe=0;oe<256;++oe){for(var ie=te[oe],V=0;V<3;++V)q[4*oe+V]=ie[V];q[4*oe+3]=B?255*F(oe/255,B):255*ie[3]}return y(q,[256,256,4],[4,0,1])}function z(W){for(var B=W.length,te=new Array(B),q=0;q<B;++q)te[q]=W[q][2];return te}function D(W){var B=a(W,d.vertex,d.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.normal.location=4,B}function k(W){var B=a(W,A.vertex,A.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B}function O(W){var B=a(W,b.vertex,b.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.pointSize.location=4,B}function U(W){var B=a(W,c.vertex,c.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B}function H(W){var B=a(W,S.vertex,S.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B.attributes.pointSize.location=4,B}function j(W){var B=a(W,w.vertex,w.fragment);return B.attributes.position.location=0,B}function ee(W,B){if(1===arguments.length&&(W=(B=W).gl),!(W.getExtension("OES_standard_derivatives")||W.getExtension("MOZ_OES_standard_derivatives")||W.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=D(W),oe=k(W),ie=O(W),V=U(W),Y=H(W),ae=j(W),X=v(W,y(new Uint8Array([255,255,255,255]),[1,1,4]));X.generateMipmap(),X.minFilter=W.LINEAR_MIPMAP_LINEAR,X.magFilter=W.LINEAR;var J=r(W),ue=r(W),re=r(W),ne=r(W),se=r(W),de=o(W,[{buffer:J,type:W.FLOAT,size:3},{buffer:se,type:W.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:W.FLOAT,size:4},{buffer:re,type:W.FLOAT,size:2},{buffer:ne,type:W.FLOAT,size:3}]),be=r(W),De=r(W),_e=r(W),Ce=r(W),Le=o(W,[{buffer:be,type:W.FLOAT,size:3},{buffer:Ce,type:W.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:De,type:W.FLOAT,size:4},{buffer:_e,type:W.FLOAT,size:2}]),Fe=r(W),ke=r(W),ze=r(W),Pe=r(W),Ie=r(W),Qe=o(W,[{buffer:Fe,type:W.FLOAT,size:3},{buffer:Ie,type:W.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ke,type:W.FLOAT,size:4},{buffer:ze,type:W.FLOAT,size:2},{buffer:Pe,type:W.FLOAT,size:1}]),at=r(W),Ne=new P(W,X,q,oe,ie,V,Y,ae,J,se,ue,re,ne,de,be,Ce,De,_e,Le,Fe,Ie,ke,ze,Pe,Qe,at,o(W,[{buffer:at,type:W.FLOAT,size:3}]));return Ne.update(B),Ne}R.isOpaque=function(){return!this.hasAlpha},R.isTransparent=function(){return this.hasAlpha},R.pickSlots=1,R.setPickBase=function(W){this.pickId=W},R.highlight=function(W){if(W&&this.contourEnable){for(var B=x(this.cells,this.intensity,W.intensity),te=B.cells,q=B.vertexIds,oe=B.vertexWeights,ie=te.length,V=h.mallocFloat32(6*ie),Y=0,ae=0;ae<ie;++ae)for(var X=te[ae],J=0;J<2;++J){var ue=X[0];2===X.length&&(ue=X[J]);for(var re=q[ue][0],ne=q[ue][1],se=oe[ue],de=1-se,be=this.positions[re],De=this.positions[ne],_e=0;_e<3;++_e)V[Y++]=se*be[_e]+de*De[_e]}this.contourCount=Y/3|0,this.contourPositions.update(V.subarray(0,Y)),h.free(V)}else this.contourCount=0},R.update=function(W){W=W||{};var B=this.gl;this.dirty=!0,"contourEnable"in W&&(this.contourEnable=W.contourEnable),"contourColor"in W&&(this.contourColor=W.contourColor),"lineWidth"in W&&(this.lineWidth=W.lineWidth),"lightPosition"in W&&(this.lightPosition=W.lightPosition),this.hasAlpha=!1,"opacity"in W&&(this.opacity=W.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in W&&(this.opacityscale=W.opacityscale,this.hasAlpha=!0),"ambient"in W&&(this.ambientLight=W.ambient),"diffuse"in W&&(this.diffuseLight=W.diffuse),"specular"in W&&(this.specularLight=W.specular),"roughness"in W&&(this.roughness=W.roughness),"fresnel"in W&&(this.fresnel=W.fresnel),W.texture?(this.texture.dispose(),this.texture=v(B,W.texture)):W.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=B.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=B.LINEAR,this.texture.setPixels(_(W.colormap,this.opacityscale)),this.texture.generateMipmap());var te=W.cells,q=W.positions;if(q&&te){var oe=[],ie=[],V=[],Y=[],ae=[],X=[],J=[],ue=[],re=[],ne=[],se=[],de=[],be=[],De=[];this.cells=te,this.positions=q;var _e=W.vertexNormals,Ce=W.cellNormals,Le=void 0===W.vertexNormalsEpsilon?i:W.vertexNormalsEpsilon,Fe=void 0===W.faceNormalsEpsilon?u:W.faceNormalsEpsilon;W.useFacetNormals&&!Ce&&(Ce=p.faceNormals(te,q,Fe)),!Ce&&!_e&&(_e=p.vertexNormals(te,q,Le));var ke=W.vertexColors,ze=W.cellColors,Pe=W.meshColor||[1,1,1,1],Ie=W.vertexUVs,Qe=W.vertexIntensity,at=W.cellUVs,Be=W.cellIntensity,Ne=1/0,nt=-1/0;if(!Ie&&!at)if(Qe)if(W.vertexIntensityBounds)Ne=+W.vertexIntensityBounds[0],nt=+W.vertexIntensityBounds[1];else for(var ct=0;ct<Qe.length;++ct){var mt=Qe[ct];Ne=Math.min(Ne,mt),nt=Math.max(nt,mt)}else if(Be)if(W.cellIntensityBounds)Ne=+W.cellIntensityBounds[0],nt=+W.cellIntensityBounds[1];else for(ct=0;ct<Be.length;++ct)mt=Be[ct],Ne=Math.min(Ne,mt),nt=Math.max(nt,mt);else for(ct=0;ct<q.length;++ct)mt=q[ct][2],Ne=Math.min(Ne,mt),nt=Math.max(nt,mt);this.intensity=Qe||Be||z(q),this.pickVertex=!(Be||ze);var Bt=W.pointSizes,Rt=W.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ct=0;ct<q.length;++ct)for(var zt=q[ct],St=0;St<3;++St)isNaN(zt[St])||!isFinite(zt[St])||(this.bounds[0][St]=Math.min(this.bounds[0][St],zt[St]),this.bounds[1][St]=Math.max(this.bounds[1][St],zt[St]));var Xt=0,Mt=0,st=0;e:for(ct=0;ct<te.length;++ct){var Se=te[ct];switch(Se.length){case 1:for(zt=q[pe=Se[0]],St=0;St<3;++St)if(isNaN(zt[St])||!isFinite(zt[St]))continue e;ne.push(zt[0],zt[1],zt[2]),ge=ke?ke[pe]:ze?ze[ct]:Pe,this.opacityscale&&Qe?ie.push(ge[0],ge[1],ge[2],this.opacity*F((Qe[pe]-Ne)/(nt-Ne),this.opacityscale)):3===ge.length?se.push(ge[0],ge[1],ge[2],this.opacity):(se.push(ge[0],ge[1],ge[2],ge[3]*this.opacity),ge[3]<1&&(this.hasAlpha=!0)),Oe=Ie?Ie[pe]:Qe?[(Qe[pe]-Ne)/(nt-Ne),0]:at?at[ct]:Be?[(Be[ct]-Ne)/(nt-Ne),0]:[(zt[2]-Ne)/(nt-Ne),0],de.push(Oe[0],Oe[1]),Bt?be.push(Bt[pe]):be.push(Rt),De.push(ct),st+=1;break;case 2:for(St=0;St<2;++St){zt=q[pe=Se[St]];for(var we=0;we<3;++we)if(isNaN(zt[we])||!isFinite(zt[we]))continue e}for(St=0;St<2;++St)zt=q[pe=Se[St]],X.push(zt[0],zt[1],zt[2]),ge=ke?ke[pe]:ze?ze[ct]:Pe,this.opacityscale&&Qe?ie.push(ge[0],ge[1],ge[2],this.opacity*F((Qe[pe]-Ne)/(nt-Ne),this.opacityscale)):3===ge.length?J.push(ge[0],ge[1],ge[2],this.opacity):(J.push(ge[0],ge[1],ge[2],ge[3]*this.opacity),ge[3]<1&&(this.hasAlpha=!0)),Oe=Ie?Ie[pe]:Qe?[(Qe[pe]-Ne)/(nt-Ne),0]:at?at[ct]:Be?[(Be[ct]-Ne)/(nt-Ne),0]:[(zt[2]-Ne)/(nt-Ne),0],ue.push(Oe[0],Oe[1]),re.push(ct);Mt+=1;break;case 3:for(St=0;St<3;++St)for(zt=q[pe=Se[St]],we=0;we<3;++we)if(isNaN(zt[we])||!isFinite(zt[we]))continue e;for(St=0;St<3;++St){var pe,ge,Oe,He;zt=q[pe=Se[2-St]],oe.push(zt[0],zt[1],zt[2]),(ge=ke?ke[pe]:ze?ze[ct]:Pe)?this.opacityscale&&Qe?ie.push(ge[0],ge[1],ge[2],this.opacity*F((Qe[pe]-Ne)/(nt-Ne),this.opacityscale)):3===ge.length?ie.push(ge[0],ge[1],ge[2],this.opacity):(ie.push(ge[0],ge[1],ge[2],ge[3]*this.opacity),ge[3]<1&&(this.hasAlpha=!0)):ie.push(.5,.5,.5,1),Oe=Ie?Ie[pe]:Qe?[(Qe[pe]-Ne)/(nt-Ne),0]:at?at[ct]:Be?[(Be[ct]-Ne)/(nt-Ne),0]:[(zt[2]-Ne)/(nt-Ne),0],Y.push(Oe[0],Oe[1]),He=_e?_e[pe]:Ce[ct],V.push(He[0],He[1],He[2]),ae.push(ct)}Xt+=1}}this.pointCount=st,this.edgeCount=Mt,this.triangleCount=Xt,this.pointPositions.update(ne),this.pointColors.update(se),this.pointUVs.update(de),this.pointSizes.update(be),this.pointIds.update(new Uint32Array(De)),this.edgePositions.update(X),this.edgeColors.update(J),this.edgeUVs.update(ue),this.edgeIds.update(new Uint32Array(re)),this.trianglePositions.update(oe),this.triangleColors.update(ie),this.triangleUVs.update(Y),this.triangleNormals.update(V),this.triangleIds.update(new Uint32Array(ae))}},R.drawTransparent=R.draw=function(W){W=W||{};for(var B=this.gl,te=W.model||E,q=W.view||E,oe=W.projection||E,ie=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)ie[0][V]=Math.max(ie[0][V],this.clipBounds[0][V]),ie[1][V]=Math.min(ie[1][V],this.clipBounds[1][V]);var Y={model:te,view:q,projection:oe,inverseModel:E.slice(),clipBounds:ie,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=l(Y.inverseModel,Y.model),B.disable(B.CULL_FACE),this.texture.bind(0);var re,ae=new Array(16);for(f(ae,Y.view,Y.model),f(ae,Y.projection,ae),l(ae,ae),V=0;V<3;++V)Y.eyePosition[V]=ae[12+V]/ae[15];var X=ae[15];for(V=0;V<3;++V)X+=this.lightPosition[V]*ae[4*V+3];for(V=0;V<3;++V){for(var J=ae[12+V],ue=0;ue<3;++ue)J+=ae[4*ue+V]*this.lightPosition[ue];Y.lightPosition[V]=J/X}this.triangleCount>0&&((re=this.triShader).bind(),re.uniforms=Y,this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((re=this.lineShader).bind(),re.uniforms=Y,this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((re=this.pointShader).bind(),re.uniforms=Y,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((re=this.contourShader).bind(),re.uniforms=Y,this.contourVAO.bind(),B.drawArrays(B.LINES,0,this.contourCount),this.contourVAO.unbind())},R.drawPick=function(W){W=W||{};for(var B=this.gl,te=W.model||E,q=W.view||E,oe=W.projection||E,ie=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)ie[0][V]=Math.max(ie[0][V],this.clipBounds[0][V]),ie[1][V]=Math.min(ie[1][V],this.clipBounds[1][V]);this._model=[].slice.call(te),this._view=[].slice.call(q),this._projection=[].slice.call(oe),this._resolution=[B.drawingBufferWidth,B.drawingBufferHeight];var ae,Y={model:te,view:q,projection:oe,clipBounds:ie,pickId:this.pickId/255};(ae=this.pickShader).bind(),ae.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ae=this.pointPickShader).bind(),ae.uniforms=Y,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind())},R.pick=function(W){if(!W||W.id!==this.pickId)return null;for(var B=W.value[0]+256*W.value[1]+65536*W.value[2],te=this.cells[B],q=this.positions,oe=new Array(te.length),ie=0;ie<te.length;++ie)oe[ie]=q[te[ie]];var V=W.coord[0],Y=W.coord[1];if(!this.pickVertex){var ae=this.positions[te[0]],X=this.positions[te[1]],J=this.positions[te[2]],ue=[(ae[0]+X[0]+J[0])/3,(ae[1]+X[1]+J[1])/3,(ae[2]+X[2]+J[2])/3];return{_cellCenter:!0,position:[V,Y],index:B,cell:te,cellId:B,intensity:this.intensity[B],dataCoordinate:ue}}var re=m(oe,[V*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!re)return null;var ne=re[2],se=0;for(ie=0;ie<te.length;++ie)se+=ne[ie]*this.intensity[te[ie]];return{position:re[1],index:te[re[0]],cell:te,cellId:B,intensity:se,dataCoordinate:this.positions[te[re[0]]]}},R.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=ee},4554:function(t,T,n){"use strict";t.exports=v;var i=n(5827),u=n(5158),a=n(2709);function r(p,f,l){this.plot=p,this.vbo=f,this.shader=l}var p,f,o=r.prototype;function v(p){var f=p.gl;return new r(p,i(f,[0,0,0,1,1,0,1,1]),u(f,a.boxVert,a.lineFrag))}o.bind=function(){var p=this.shader;this.vbo.bind(),this.shader.bind(),p.attributes.coord.pointer(),p.uniforms.screenBox=this.plot.screenBox},o.drawBox=(p=[0,0],f=[0,0],function(l,y,s,x,h){var g=this.plot,m=this.shader,d=g.gl;p[0]=l,p[1]=y,f[0]=s,f[1]=x,m.uniforms.lo=p,m.uniforms.hi=f,m.uniforms.color=h,d.drawArrays(d.TRIANGLE_STRIP,0,4)}),o.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(t,T,n){"use strict";t.exports=f;var i=n(5827),u=n(5158),a=n(5070),r=n(2709);function o(l,y,s,x){this.plot=l,this.vbo=y,this.shader=s,this.tickShader=x,this.ticks=[[],[]]}function v(l,y){return l-y}var l,y,s,p=o.prototype;function f(l){var y=l.gl;return new o(l,i(y),u(y,r.gridVert,r.gridFrag),u(y,r.tickVert,r.gridFrag))}p.draw=(l=[0,0],y=[0,0],s=[0,0],function(){for(var x=this.plot,h=this.vbo,g=this.shader,m=this.ticks,d=x.gl,A=x._tickBounds,b=x.dataBox,c=x.viewBox,S=x.gridLineWidth,w=x.gridLineColor,E=x.gridLineEnable,P=x.pixelRatio,R=0;R<2;++R){var F=A[R],z=A[R+2]-F,D=.5*(b[R+2]+b[R]),k=b[R+2]-b[R];y[R]=2*z/k,l[R]=2*(F-D)/k}g.bind(),h.bind(),g.attributes.dataCoord.pointer(),g.uniforms.dataShift=l,g.uniforms.dataScale=y;var O=0;for(R=0;R<2;++R){s[0]=s[1]=0,s[R]=1,g.uniforms.dataAxis=s,g.uniforms.lineWidth=S[R]/(c[R+2]-c[R])*P,g.uniforms.color=w[R];var U=6*m[R].length;E[R]&&U&&d.drawArrays(d.TRIANGLES,O,U),O+=U}}),p.drawTickMarks=function(){var l=[0,0],y=[0,0],s=[1,0],x=[0,1],h=[0,0],g=[0,0];return function(){for(var m=this.plot,d=this.vbo,A=this.tickShader,b=this.ticks,c=m.gl,S=m._tickBounds,w=m.dataBox,E=m.viewBox,P=m.pixelRatio,R=m.screenBox,F=R[2]-R[0],_=R[3]-R[1],z=E[2]-E[0],D=E[3]-E[1],k=0;k<2;++k){var O=S[k],H=S[k+2]-O,j=.5*(w[k+2]+w[k]),ee=w[k+2]-w[k];y[k]=2*H/ee,l[k]=2*(O-j)/ee}y[0]*=z/F,l[0]*=z/F,y[1]*=D/_,l[1]*=D/_,A.bind(),d.bind(),A.attributes.dataCoord.pointer();var W=A.uniforms;W.dataShift=l,W.dataScale=y;var B=m.tickMarkLength,te=m.tickMarkWidth,q=m.tickMarkColor,oe=0,ie=6*b[0].length,V=Math.min(a.ge(b[0],(w[0]-S[0])/(S[2]-S[0]),v),b[0].length),Y=Math.min(a.gt(b[0],(w[2]-S[0])/(S[2]-S[0]),v),b[0].length),ae=oe+6*V,X=6*Math.max(0,Y-V),J=Math.min(a.ge(b[1],(w[1]-S[1])/(S[3]-S[1]),v),b[1].length),ue=Math.min(a.gt(b[1],(w[3]-S[1])/(S[3]-S[1]),v),b[1].length),re=ie+6*J,ne=6*Math.max(0,ue-J);h[0]=2*(E[0]-B[1])/F-1,h[1]=(E[3]+E[1])/_-1,g[0]=B[1]*P/F,g[1]=te[1]*P/_,ne&&(W.color=q[1],W.tickScale=g,W.dataAxis=x,W.screenOffset=h,c.drawArrays(c.TRIANGLES,re,ne)),h[0]=(E[2]+E[0])/F-1,h[1]=2*(E[1]-B[0])/_-1,g[0]=te[0]*P/F,g[1]=B[0]*P/_,X&&(W.color=q[0],W.tickScale=g,W.dataAxis=s,W.screenOffset=h,c.drawArrays(c.TRIANGLES,ae,X)),h[0]=2*(E[2]+B[3])/F-1,h[1]=(E[3]+E[1])/_-1,g[0]=B[3]*P/F,g[1]=te[3]*P/_,ne&&(W.color=q[3],W.tickScale=g,W.dataAxis=x,W.screenOffset=h,c.drawArrays(c.TRIANGLES,re,ne)),h[0]=(E[2]+E[0])/F-1,h[1]=2*(E[3]+B[2])/_-1,g[0]=te[2]*P/F,g[1]=B[2]*P/_,X&&(W.color=q[2],W.tickScale=g,W.dataAxis=s,W.screenOffset=h,c.drawArrays(c.TRIANGLES,ae,X))}}(),p.update=function(){var l=[1,1,-1,-1,1,-1],y=[1,-1,1,1,-1,-1];return function(s){for(var x=s.ticks,h=s.bounds,g=new Float32Array(18*(x[0].length+x[1].length)),d=(this.plot.zeroLineEnable,0),A=[[],[]],b=0;b<2;++b)for(var c=A[b],S=x[b],w=h[b],E=h[b+2],P=0;P<S.length;++P){var R=(S[P].x-w)/(E-w);c.push(R);for(var F=0;F<6;++F)g[d++]=R,g[d++]=l[F],g[d++]=y[F]}this.ticks=A,this.vbo.update(g)}}(),p.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(t,T,n){"use strict";t.exports=v;var i=n(5827),u=n(5158),a=n(2709);function r(p,f,l){this.plot=p,this.vbo=f,this.shader=l}var p,f,o=r.prototype;function v(p){var f=p.gl;return new r(p,i(f,[-1,-1,-1,1,1,-1,1,1]),u(f,a.lineVert,a.lineFrag))}o.bind=function(){var p=this.shader;this.vbo.bind(),this.shader.bind(),p.attributes.coord.pointer(),p.uniforms.screenBox=this.plot.screenBox},o.drawLine=(p=[0,0],f=[0,0],function(l,y,s,x,h,g){var m=this.plot,d=this.shader,A=m.gl;p[0]=l,p[1]=y,f[0]=s,f[1]=x,d.uniforms.start=p,d.uniforms.end=f,d.uniforms.width=h*m.pixelRatio,d.uniforms.color=g,A.drawArrays(A.TRIANGLE_STRIP,0,4)}),o.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(t,T,n){"use strict";var i=n(6832),u=i(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:u,textVert:i(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:u,gridVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:u,boxVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(t,T,n){"use strict";t.exports=f;var i=n(5827),u=n(5158),a=n(6946),r=n(5070),o=n(2709);function v(l,y,s){this.plot=l,this.vbo=y,this.shader=s,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var l,y,s,p=v.prototype;function f(l){var y=l.gl;return new v(l,i(y),u(y,o.textVert,o.textFrag))}p.drawTicks=(l=[0,0],y=[0,0],s=[0,0],function(x){var h=this.plot,g=this.shader,m=this.tickX[x],d=this.tickOffset[x],A=h.gl,b=h.viewBox,c=h.dataBox,S=h.screenBox,w=h.pixelRatio,E=h.tickEnable,P=h.tickPad,R=h.tickColor,F=h.tickAngle,_=h.labelEnable,z=h.labelPad,D=h.labelColor,k=h.labelAngle,O=this.labelOffset[x],U=this.labelCount[x],H=r.lt(m,c[x]),j=r.le(m,c[x+2]);l[0]=l[1]=0,l[x]=1,y[x]=(b[2+x]+b[x])/(S[2+x]-S[x])-1;var ee=2/S[2+(1^x)]-S[1^x];y[1^x]=ee*b[1^x]-1,E[x]&&(y[1^x]-=ee*w*P[x],H<j&&d[j]>d[H]&&(g.uniforms.dataAxis=l,g.uniforms.screenOffset=y,g.uniforms.color=R[x],g.uniforms.angle=F[x],A.drawArrays(A.TRIANGLES,d[H],d[j]-d[H]))),_[x]&&U&&(y[1^x]-=ee*w*z[x],g.uniforms.dataAxis=s,g.uniforms.screenOffset=y,g.uniforms.color=D[x],g.uniforms.angle=k[x],A.drawArrays(A.TRIANGLES,O,U)),y[1^x]=ee*b[2+(1^x)]-1,E[x+2]&&(y[1^x]+=ee*w*P[x+2],H<j&&d[j]>d[H]&&(g.uniforms.dataAxis=l,g.uniforms.screenOffset=y,g.uniforms.color=R[x+2],g.uniforms.angle=F[x+2],A.drawArrays(A.TRIANGLES,d[H],d[j]-d[H]))),_[x+2]&&U&&(y[1^x]+=ee*w*z[x+2],g.uniforms.dataAxis=s,g.uniforms.screenOffset=y,g.uniforms.color=D[x+2],g.uniforms.angle=k[x+2],A.drawArrays(A.TRIANGLES,O,U))}),p.drawTitle=function(){var l=[0,0],y=[0,0];return function(){var s=this.plot,x=this.shader,h=s.gl,g=s.screenBox,m=s.titleCenter,d=s.titleAngle,A=s.titleColor,b=s.pixelRatio;if(this.titleCount){for(var c=0;c<2;++c)y[c]=2*(m[c]*b-g[c])/(g[2+c]-g[c])-1;x.bind(),x.uniforms.dataAxis=l,x.uniforms.screenOffset=y,x.uniforms.angle=d,x.uniforms.color=A,h.drawArrays(h.TRIANGLES,this.titleOffset,this.titleCount)}}}(),p.bind=function(){var l=[0,0],y=[0,0],s=[0,0];return function(){var x=this.plot,h=this.shader,g=x._tickBounds,m=x.dataBox,d=x.screenBox,A=x.viewBox;h.bind();for(var b=0;b<2;++b){var c=g[b],w=g[b+2]-c,E=.5*(m[b+2]+m[b]),P=m[b+2]-m[b],R=A[b],_=A[b+2]-R,z=d[b],k=d[b+2]-z;y[b]=2*w/P*_/k,l[b]=2*(c-E)/P*_/k}s[1]=2*x.pixelRatio/(d[3]-d[1]),s[0]=s[1]*(d[3]-d[1])/(d[2]-d[0]),h.uniforms.dataScale=y,h.uniforms.dataShift=l,h.uniforms.textScale=s,this.vbo.bind(),h.attributes.textCoordinate.pointer()}}(),p.update=function(l){var h,g,d,A,b,y=[],s=l.ticks,x=l.bounds;for(b=0;b<2;++b){var c=[Math.floor(y.length/3)],S=[-1/0],w=s[b];for(h=0;h<w.length;++h){var E=w[h],P=E.x,R=E.text,F=E.font||"sans-serif";A=E.fontSize||12;for(var _=1/(x[b+2]-x[b]),z=x[b],D=R.split("\n"),k=0;k<D.length;k++)for(d=a(F,D[k]).data,g=0;g<d.length;g+=2)y.push(d[g]*A,-d[g+1]*A-k*A*1.2,(P-z)*_);c.push(Math.floor(y.length/3)),S.push(P)}this.tickOffset[b]=c,this.tickX[b]=S}for(b=0;b<2;++b){for(this.labelOffset[b]=Math.floor(y.length/3),d=a(l.labelFont[b],l.labels[b],{textAlign:"center"}).data,A=l.labelSize[b],h=0;h<d.length;h+=2)y.push(d[h]*A,-d[h+1]*A,0);this.labelCount[b]=Math.floor(y.length/3)-this.labelOffset[b]}for(this.titleOffset=Math.floor(y.length/3),d=a(l.titleFont,l.title).data,A=l.titleSize,h=0;h<d.length;h+=2)y.push(d[h]*A,-d[h+1]*A,0);this.titleCount=Math.floor(y.length/3)-this.titleOffset,this.vbo.update(y)},p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(t,T,n){"use strict";t.exports=s;var i=n(2611),u=n(3016),a=n(5613),r=n(1154),o=n(4554);function v(x,h){this.gl=x,this.pickBuffer=h,this.screenBox=[0,0,x.drawingBufferWidth,x.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var p=v.prototype;function l(x){for(var h=x.slice(),g=0;g<h.length;++g)h[g]=h[g].slice();return h}function y(x,h){return x.x-h.x}function s(x){var h=x.gl,m=new v(h,i(h,[h.drawingBufferWidth,h.drawingBufferHeight]));return m.grid=u(m),m.text=a(m),m.line=r(m),m.box=o(m),m.update(x),m}p.setDirty=function(){this.dirty=this.pickDirty=!0},p.setOverlayDirty=function(){this.dirty=!0},p.nextDepthValue=function(){return this._depthCounter++/65536},p.draw=function(){var h=this.gl,g=this.screenBox,m=this.viewBox,d=this.dataBox,A=this.pixelRatio,b=this.grid,c=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,h.bindFramebuffer(h.FRAMEBUFFER,null),h.enable(h.SCISSOR_TEST),h.disable(h.DEPTH_TEST),h.depthFunc(h.LESS),h.depthMask(!1),h.enable(h.BLEND),h.blendEquation(h.FUNC_ADD,h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA),this.borderColor){h.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;h.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT)}h.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),h.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var P=this.backgroundColor;h.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),h.clear(h.COLOR_BUFFER_BIT),b.draw();var R=this.zeroLineEnable,F=this.zeroLineColor,_=this.zeroLineWidth;if(R[0]||R[1]){c.bind();for(var z=0;z<2;++z)if(R[z]&&d[z]<=0&&d[z+2]>=0){var D=g[z]-d[z]*(g[z+2]-g[z])/(d[z+2]-d[z]);0===z?c.drawLine(D,g[1],D,g[3],_[z],F[z]):c.drawLine(g[0],D,g[2],D,_[z],F[z])}}for(z=0;z<w.length;++z)w[z].draw();h.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),h.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),c.bind();var k=this.borderLineEnable,O=this.borderLineWidth,U=this.borderLineColor;for(k[1]&&c.drawLine(m[0],m[1]-.5*O[1]*A,m[0],m[3]+.5*O[3]*A,O[1],U[1]),k[0]&&c.drawLine(m[0]-.5*O[0]*A,m[1],m[2]+.5*O[2]*A,m[1],O[0],U[0]),k[3]&&c.drawLine(m[2],m[1]-.5*O[1]*A,m[2],m[3]+.5*O[3]*A,O[3],U[3]),k[2]&&c.drawLine(m[0]-.5*O[0]*A,m[3],m[2]+.5*O[2]*A,m[3],O[2],U[2]),S.bind(),z=0;z<2;++z)S.drawTicks(z);this.titleEnable&&S.drawTitle();var H=this.overlays;for(z=0;z<H.length;++z)H[z].draw();h.disable(h.SCISSOR_TEST),h.disable(h.BLEND),h.depthMask(!0)}},p.drawPick=function(){if(!this.static){var x=this.pickBuffer;this.gl,this._pickTimeout=null,x.begin();for(var g=1,m=this.objects,d=0;d<m.length;++d)g=m[d].drawPick(g);x.end()}},p.pick=function(x,h){if(!this.static){var g=this.pixelRatio,m=this.pickPixelRatio,d=this.viewBox,A=0|Math.round((x-d[0]/g)*m),b=0|Math.round((h-d[1]/g)*m),c=this.pickBuffer.query(A,b,this.pickRadius);if(!c)return null;for(var S=c.id+(c.value[0]<<8)+(c.value[1]<<16)+(c.value[2]<<24),w=this.objects,E=0;E<w.length;++E){var P=w[E].pick(A,b,S);if(P)return P}return null}},p.setScreenBox=function(x){var h=this.screenBox,g=this.pixelRatio;h[0]=0|Math.round(x[0]*g),h[1]=0|Math.round(x[1]*g),h[2]=0|Math.round(x[2]*g),h[3]=0|Math.round(x[3]*g),this.setDirty()},p.setDataBox=function(x){var h=this.dataBox;(h[0]!==x[0]||h[1]!==x[1]||h[2]!==x[2]||h[3]!==x[3])&&(h[0]=x[0],h[1]=x[1],h[2]=x[2],h[3]=x[3],this.setDirty())},p.setViewBox=function(x){var h=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(x[0]*h),g[1]=0|Math.round(x[1]*h),g[2]=0|Math.round(x[2]*h),g[3]=0|Math.round(x[3]*h);var m=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((x[2]-x[0])*m),0|Math.round((x[3]-x[1])*m)],this.setDirty()},p.update=function(x){x=x||{};var h=this.gl;this.pixelRatio=x.pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(x.screenBox||[0,0,h.drawingBufferWidth/g,h.drawingBufferHeight/g]),this.screenBox,this.setViewBox(x.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var d=this.viewBox,A=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(x.dataBox||[-10,-10/A,10,10/A]),this.borderColor=!1!==x.borderColor&&(x.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(x.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(x.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(x.gridLineWidth||[1,1]).slice(),this.gridLineColor=l(x.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(x.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(x.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=l(x.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(x.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(x.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=l(x.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(x.titleCenter||[.5*(d[0]+d[2])/g,(d[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in x)||!!x.titleEnable,this.titleAngle=x.titleAngle||0,this.titleColor=(x.titleColor||[0,0,0,1]).slice(),this.labelPad=(x.labelPad||[15,15,15,15]).slice(),this.labelAngle=(x.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(x.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=l(x.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(x.tickPad||[15,15,15,15]).slice(),this.tickAngle=(x.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(x.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=l(x.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(x.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(x.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=l(x.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=x.ticks||[[],[]],c=this._tickBounds;c[0]=c[1]=1/0,c[2]=c[3]=-1/0;for(var S=0;S<2;++S){var w=b[S].slice(0);0!==w.length&&(w.sort(y),c[S]=Math.min(c[S],w[0].x),c[S+2]=Math.max(c[S+2],w[w.length-1].x))}this.grid.update({bounds:c,ticks:b}),this.text.update({bounds:c,ticks:b,labels:x.labels||["x","y"],labelSize:x.labelSize||[12,12],labelFont:x.labelFont||["sans-serif","sans-serif"],title:x.title||"",titleSize:x.titleSize||18,titleFont:x.titleFont||"sans-serif"}),this.static=!!x.static,this.setDirty()},p.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var x=this.objects.length-1;x>=0;--x)this.objects[x].dispose();for(this.objects.length=0,x=this.overlays.length-1;x>=0;--x)this.overlays[x].dispose();this.overlays.length=0,this.gl=null},p.addObject=function(x){this.objects.indexOf(x)<0&&(this.objects.push(x),this.setDirty())},p.removeObject=function(x){for(var h=this.objects,g=0;g<h.length;++g)if(h[g]===x){h.splice(g,1),this.setDirty();break}},p.addOverlay=function(x){this.overlays.indexOf(x)<0&&(this.overlays.push(x),this.setOverlayDirty())},p.removeOverlay=function(x){for(var h=this.overlays,g=0;g<h.length;++g)if(h[g]===x){h.splice(g,1),this.setOverlayDirty();break}}},4296:function(t,T,n){"use strict";t.exports=p;var i=n(8161),u=n(1152),a=n(6145),r=n(6475),o=n(2565),v=n(5233);function p(f,l){f=f||document.body;var y=[.01,1/0];"distanceLimits"in(l=l||{})&&(y[0]=l.distanceLimits[0],y[1]=l.distanceLimits[1]),"zoomMin"in l&&(y[0]=l.zoomMin),"zoomMax"in l&&(y[1]=l.zoomMax);var s=u({center:l.center||[0,0,0],up:l.up||[0,1,0],eye:l.eye||[0,0,10],mode:l.mode||"orbit",distanceLimits:y}),x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0,g=f.clientWidth,m=f.clientHeight,d={keyBindingMode:"rotate",enableWheel:!0,view:s,element:f,delay:l.delay||16,rotateSpeed:l.rotateSpeed||1,zoomSpeed:l.zoomSpeed||1,translateSpeed:l.translateSpeed||1,flipX:!!l.flipX,flipY:!!l.flipY,modes:s.modes,_ortho:l._ortho||l.projection&&"orthographic"===l.projection.type||!1,tick:function(){var A=i(),b=this.delay,c=A-2*b;s.idle(A-b),s.recalcMatrix(c),s.flush(A-(100+2*b));for(var S=!0,w=s.computedMatrix,E=0;E<16;++E)S=S&&x[E]===w[E],x[E]=w[E];var P=f.clientWidth===g&&f.clientHeight===m;return g=f.clientWidth,m=f.clientHeight,S?!P:(h=Math.exp(s.computedRadius[0]),!0)},lookAt:function(A,b,c){s.lookAt(s.lastT(),A,b,c)},rotate:function(A,b,c){s.rotate(s.lastT(),A,b,c)},pan:function(A,b,c){s.pan(s.lastT(),A,b,c)},translate:function(A,b,c){s.translate(s.lastT(),A,b,c)}};return Object.defineProperties(d,{matrix:{get:function(){return s.computedMatrix},set:function(A){return s.setMatrix(s.lastT(),A),s.computedMatrix},enumerable:!0},mode:{get:function(){return s.getMode()},set:function(A){var b=s.computedUp.slice(),c=s.computedEye.slice(),S=s.computedCenter.slice();if(s.setMode(A),"turntable"===A){var w=i();s._active.lookAt(w,c,S,b),s._active.lookAt(w+500,c,S,[0,0,1]),s._active.flush(w)}return s.getMode()},enumerable:!0},center:{get:function(){return s.computedCenter},set:function(A){return s.lookAt(s.lastT(),null,A),s.computedCenter},enumerable:!0},eye:{get:function(){return s.computedEye},set:function(A){return s.lookAt(s.lastT(),A),s.computedEye},enumerable:!0},up:{get:function(){return s.computedUp},set:function(A){return s.lookAt(s.lastT(),null,null,A),s.computedUp},enumerable:!0},distance:{get:function(){return h},set:function(A){return s.setDistance(s.lastT(),A),A},enumerable:!0},distanceLimits:{get:function(){return s.getDistanceLimits(y)},set:function(A){return s.setDistanceLimits(A),A},enumerable:!0}}),f.addEventListener("contextmenu",function(A){return A.preventDefault(),!1}),d._lastX=-1,d._lastY=-1,d._lastMods={shift:!1,control:!1,alt:!1,meta:!1},d.enableMouseListeners=function(){function A(b,c,S,w){var E=d.keyBindingMode;if(!1!==E){var P="rotate"===E,R="pan"===E,F="zoom"===E,_=!!w.control,z=!!w.alt,D=!!w.shift,k=!!(1&b),O=!!(2&b),U=!!(4&b),H=1/f.clientHeight,j=H*(c-d._lastX),ee=H*(S-d._lastY),W=d.flipX?1:-1,B=d.flipY?1:-1,te=Math.PI*d.rotateSpeed,q=i();if(-1!==d._lastX&&-1!==d._lastY&&((P&&k&&!_&&!z&&!D||k&&!_&&!z&&D)&&s.rotate(q,W*te*j,-B*te*ee,0),(R&&k&&!_&&!z&&!D||O||k&&_&&!z&&!D)&&s.pan(q,-d.translateSpeed*j*h,d.translateSpeed*ee*h,0),F&&k&&!_&&!z&&!D||U||k&&!_&&z&&!D)){var oe=-d.zoomSpeed*ee/window.innerHeight*(q-s.lastT())*100;s.pan(q,0,0,h*(Math.exp(oe)-1))}return d._lastX=c,d._lastY=S,d._lastMods=w,!0}}d.mouseListener=a(f,A),f.addEventListener("touchstart",function(b){var c=o(b.changedTouches[0],f);A(0,c[0],c[1],d._lastMods),A(1,c[0],c[1],d._lastMods)},!!v&&{passive:!0}),f.addEventListener("touchmove",function(b){var c=o(b.changedTouches[0],f);A(1,c[0],c[1],d._lastMods),b.preventDefault()},!!v&&{passive:!1}),f.addEventListener("touchend",function(b){A(0,d._lastX,d._lastY,d._lastMods)},!!v&&{passive:!0}),d.wheelListener=r(f,function(b,c){if(!1!==d.keyBindingMode&&d.enableWheel){var S=d.flipX?1:-1,w=d.flipY?1:-1,E=i();if(Math.abs(b)>Math.abs(c))s.rotate(E,0,0,-b*S*Math.PI*d.rotateSpeed/window.innerWidth);else if(!d._ortho){var P=-d.zoomSpeed*w*c/window.innerHeight*(E-s.lastT())/20;s.pan(E,0,0,h*(Math.exp(P)-1))}}},!0)},d.enableMouseListeners(),d}},8245:function(t,T,n){var i=n(6832),u=n(5158),a=i(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),r=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);t.exports=function(o){return u(o,a,r,null,[{name:"position",type:"vec2"}])}},1059:function(t,T,n){"use strict";var i=n(4296),u=n(7453),a=n(2771),r=n(6496),o=n(2611),v=n(4234),p=n(8126),f=n(6145),l=n(1120),y=n(5268),s=n(8245),x=n(2321)({tablet:!0,featureDetect:!0});function h(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(c,S){var w=null;try{(w=c.getContext("webgl",S))||(w=c.getContext("experimental-webgl",S))}catch{return null}return w}function m(c){var S=Math.round(Math.log(Math.abs(c))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(c*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(c/w)*w):Math.ceil(c)}function d(c){return"boolean"!=typeof c||c}function A(c){(c=c||{}).camera=c.camera||{};var S=c.canvas;S||(S=document.createElement("canvas"),c.container?c.container.appendChild(S):document.body.appendChild(S));var E=c.gl;if(E||(c.glOptions&&(x=!!c.glOptions.preserveDrawingBuffer),E=g(S,c.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:x})),!E)throw new Error("webgl not supported");var P=c.bounds||[[-10,-10,-10],[10,10,10]],R=new h,F=v(E,E.drawingBufferWidth,E.drawingBufferHeight,{preferFloat:!x}),_=s(E),z=c.cameraObject&&!0===c.cameraObject._ortho||c.camera.projection&&"orthographic"===c.camera.projection.type||!1,D={eye:c.camera.eye||[2,0,0],center:c.camera.center||[0,0,0],up:c.camera.up||[0,1,0],zoomMin:c.camera.zoomMax||.1,zoomMax:c.camera.zoomMin||100,mode:c.camera.mode||"turntable",_ortho:z},k=c.axes||{},O=u(E,k);O.enable=!k.disable;var U=c.spikes||{},H=r(E,U),j=[],ee=[],W=[],B=[],te=!0,V=!0,ie={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Y=(V=!0,[E.drawingBufferWidth,E.drawingBufferHeight]),ae=c.cameraObject||i(S,D),X={gl:E,contextLost:!1,pixelRatio:c.pixelRatio||1,canvas:S,selection:R,camera:ae,axes:O,axesPixels:null,spikes:H,bounds:P,objects:j,shape:Y,aspect:c.aspectRatio||[1,1,1],pickRadius:c.pickRadius||10,zNear:c.zNear||.01,zFar:c.zFar||1e3,fovy:c.fovy||Math.PI/4,clearColor:c.clearColor||[0,0,0,0],autoResize:d(c.autoResize),autoBounds:d(c.autoBounds),autoScale:!!c.autoScale,autoCenter:d(c.autoCenter),clipToBounds:d(c.clipToBounds),snapToData:!!c.snapToData,onselect:c.onselect||null,onrender:c.onrender||null,onclick:c.onclick||null,cameraParams:ie,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ce){this.aspect[0]=Ce.x,this.aspect[1]=Ce.y,this.aspect[2]=Ce.z,V=!0},setBounds:function(Ce,Le){this.bounds[0][Ce]=Le.min,this.bounds[1][Ce]=Le.max},setClearColor:function(Ce){this.clearColor=Ce},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},J=[E.drawingBufferWidth/X.pixelRatio|0,E.drawingBufferHeight/X.pixelRatio|0];function ue(){if(!X._stopped&&X.autoResize){var Ce=S.parentNode,Le=1,Fe=1;Ce&&Ce!==document.body?(Le=Ce.clientWidth,Fe=Ce.clientHeight):(Le=window.innerWidth,Fe=window.innerHeight);var ke=0|Math.ceil(Le*X.pixelRatio),ze=0|Math.ceil(Fe*X.pixelRatio);if(ke!==S.width||ze!==S.height){S.width=ke,S.height=ze;var Pe=S.style;Pe.position=Pe.position||"absolute",Pe.left="0px",Pe.top="0px",Pe.width=Le+"px",Pe.height=Fe+"px",te=!0}}}function re(){for(var Ce=j.length,Le=B.length,Fe=0;Fe<Le;++Fe)W[Fe]=0;e:for(Fe=0;Fe<Ce;++Fe){var ke=j[Fe],ze=ke.pickSlots;if(ze){for(var Pe=0;Pe<Le;++Pe)if(W[Pe]+ze<255){ee[Fe]=Pe,ke.setPickBase(W[Pe]+1),W[Pe]+=ze;continue e}var Ie=o(E,Y);ee[Fe]=Le,B.push(Ie),W.push(ze),ke.setPickBase(1),Le+=1}else ee[Fe]=-1}for(;Le>0&&0===W[Le-1];)W.pop(),B.pop().dispose()}function ne(){if(X.contextLost)return!0;E.isContextLost()&&(X.contextLost=!0,X.mouseListener.enabled=!1,X.selection.object=null,X.oncontextloss&&X.oncontextloss())}function se(){if(!ne()){E.colorMask(!0,!0,!0,!0),E.depthMask(!0),E.disable(E.BLEND),E.enable(E.DEPTH_TEST),E.depthFunc(E.LEQUAL);for(var Ce=j.length,Le=B.length,Fe=0;Fe<Le;++Fe){var ke=B[Fe];ke.shape=J,ke.begin();for(var ze=0;ze<Ce;++ze)if(ee[ze]===Fe){var Pe=j[ze];Pe.drawPick&&(Pe.pixelRatio=1,Pe.drawPick(ie))}ke.end()}}}X.autoResize&&ue(),window.addEventListener("resize",ue),X.update=function(Ce){X._stopped||(Ce=Ce||{},te=!0,V=!0)},X.add=function(Ce){X._stopped||(Ce.axes=O,j.push(Ce),ee.push(-1),te=!0,V=!0,re())},X.remove=function(Ce){if(!X._stopped){var Le=j.indexOf(Ce);Le<0||(j.splice(Le,1),ee.pop(),te=!0,V=!0,re())}},X.dispose=function(){if(!X._stopped&&(X._stopped=!0,window.removeEventListener("resize",ue),S.removeEventListener("webglcontextlost",ne),X.mouseListener.enabled=!1,!X.contextLost)){O.dispose(),H.dispose();for(var Ce=0;Ce<j.length;++Ce)j[Ce].dispose();for(F.dispose(),Ce=0;Ce<B.length;++Ce)B[Ce].dispose();_.dispose(),E=null,O=null,H=null,j=[]}},X._mouseRotating=!1,X._prevButtons=0,X.enableMouseListeners=function(){X.mouseListener=f(S,function(Ce,Le,Fe){if(!X._stopped){var ke=B.length,ze=j.length,Pe=R.object;R.distance=1/0,R.mouse[0]=Le,R.mouse[1]=Fe,R.object=null,R.screen=null,R.dataCoordinate=R.dataPosition=null;var Ie=!1;if(Ce&&X._prevButtons)X._mouseRotating=!0;else{X._mouseRotating&&(V=!0),X._mouseRotating=!1;for(var Qe=0;Qe<ke;++Qe){var at=B[Qe].query(Le,J[1]-Fe-1,X.pickRadius);if(at){if(at.distance>R.distance)continue;for(var Be=0;Be<ze;++Be){var Ne=j[Be];if(ee[Be]===Qe){var nt=Ne.pick(at);nt&&(R.buttons=Ce,R.screen=at.coord,R.distance=at.distance,R.object=Ne,R.index=nt.distance,R.dataPosition=nt.position,R.dataCoordinate=nt.dataCoordinate,R.data=nt,Ie=!0)}}}}}Pe&&Pe!==R.object&&(Pe.highlight&&Pe.highlight(null),te=!0),R.object&&(R.object.highlight&&R.object.highlight(R.data),te=!0),(Ie=Ie||R.object!==Pe)&&X.onselect&&X.onselect(R),1&Ce&&!(1&X._prevButtons)&&X.onclick&&X.onclick(R),X._prevButtons=Ce}})},S.addEventListener("webglcontextlost",ne);var de=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=[de[0].slice(),de[1].slice()];function De(){if(!ne()){ue();var Ce=X.camera.tick();ie.view=X.camera.matrix,te=te||Ce,V=V||Ce,O.pixelRatio=X.pixelRatio,H.pixelRatio=X.pixelRatio;var Le=j.length,Fe=de[0],ke=de[1];Fe[0]=Fe[1]=Fe[2]=1/0,ke[0]=ke[1]=ke[2]=-1/0;for(var ze=0;ze<Le;++ze){(Pe=j[ze]).pixelRatio=X.pixelRatio,Pe.axes=X.axes,te=te||!!Pe.dirty,V=V||!!Pe.dirty;var Ie=Pe.bounds;if(Ie)for(var Qe=Ie[0],at=Ie[1],Be=0;Be<3;++Be)Fe[Be]=Math.min(Fe[Be],Qe[Be]),ke[Be]=Math.max(ke[Be],at[Be])}var Ne=X.bounds;if(X.autoBounds)for(Be=0;Be<3;++Be){if(ke[Be]<Fe[Be])Fe[Be]=-1,ke[Be]=1;else{Fe[Be]===ke[Be]&&(Fe[Be]-=1,ke[Be]+=1);var nt=.05*(ke[Be]-Fe[Be]);Fe[Be]=Fe[Be]-nt,ke[Be]=ke[Be]+nt}Ne[0][Be]=Fe[Be],Ne[1][Be]=ke[Be]}var ct=!1;for(Be=0;Be<3;++Be)ct=ct||be[0][Be]!==Ne[0][Be]||be[1][Be]!==Ne[1][Be],be[0][Be]=Ne[0][Be],be[1][Be]=Ne[1][Be];if(V=V||ct,te=te||ct){if(ct){var mt=[0,0,0];for(ze=0;ze<3;++ze)mt[ze]=m((Ne[1][ze]-Ne[0][ze])/10);O.autoTicks?O.update({bounds:Ne,tickSpacing:mt}):O.update({bounds:Ne})}var Bt=E.drawingBufferWidth,Rt=E.drawingBufferHeight;for(Y[0]=Bt,Y[1]=Rt,J[0]=0|Math.max(Bt/X.pixelRatio,1),J[1]=0|Math.max(Rt/X.pixelRatio,1),b(X,z),ze=0;ze<Le;++ze)(Pe=j[ze]).axesBounds=Ne,X.clipToBounds&&(Pe.clipBounds=Ne);R.object&&(X.snapToData?H.position=R.dataCoordinate:H.position=R.dataPosition,H.bounds=Ne),V&&(V=!1,se()),X.axesPixels=a(X.axes,ie,Bt,Rt),X.onrender&&X.onrender(),E.bindFramebuffer(E.FRAMEBUFFER,null),E.viewport(0,0,Bt,Rt),X.clearRGBA(),E.depthMask(!0),E.colorMask(!0,!0,!0,!0),E.enable(E.DEPTH_TEST),E.depthFunc(E.LEQUAL),E.disable(E.BLEND),E.disable(E.CULL_FACE);var zt=!1;for(O.enable&&(zt=zt||O.isTransparent(),O.draw(ie)),H.axes=O,R.object&&H.draw(ie),E.disable(E.CULL_FACE),ze=0;ze<Le;++ze)(Pe=j[ze]).axes=O,Pe.pixelRatio=X.pixelRatio,Pe.isOpaque&&Pe.isOpaque()&&Pe.draw(ie),Pe.isTransparent&&Pe.isTransparent()&&(zt=!0);if(zt){for(F.shape=Y,F.bind(),E.clear(E.DEPTH_BUFFER_BIT),E.colorMask(!1,!1,!1,!1),E.depthMask(!0),E.depthFunc(E.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(ie),ze=0;ze<Le;++ze)(Pe=j[ze]).isOpaque&&Pe.isOpaque()&&Pe.draw(ie);for(E.enable(E.BLEND),E.blendEquation(E.FUNC_ADD),E.blendFunc(E.ONE,E.ONE_MINUS_SRC_ALPHA),E.colorMask(!0,!0,!0,!0),E.depthMask(!1),E.clearColor(0,0,0,0),E.clear(E.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(ie),ze=0;ze<Le;++ze){var Pe;(Pe=j[ze]).isTransparent&&Pe.isTransparent()&&Pe.drawTransparent(ie)}E.bindFramebuffer(E.FRAMEBUFFER,null),E.blendFunc(E.ONE,E.ONE_MINUS_SRC_ALPHA),E.disable(E.DEPTH_TEST),_.bind(),F.color[0].bind(0),_.uniforms.accumBuffer=0,p(E),E.disable(E.BLEND)}for(te=!1,ze=0;ze<Le;++ze)j[ze].dirty=!1}}}function _e(){X._stopped||X.contextLost||(De(),requestAnimationFrame(_e))}return X.enableMouseListeners(),_e(),X.redraw=function(){X._stopped||(te=!0,De())},X}function b(c,S){var w=c.bounds,E=c.cameraParams,P=E.projection,R=E.model,F=c.gl.drawingBufferWidth,_=c.gl.drawingBufferHeight,z=c.zNear,D=c.zFar,k=c.fovy,O=F/_;S?(y(P,-O,O,-1,1,z,D),E._ortho=!0):(l(P,k,O,z,D),E._ortho=!1);for(var U=0;U<16;++U)R[U]=0;R[15]=1;var H=0;for(U=0;U<3;++U)H=Math.max(H,w[1][U]-w[0][U]);for(U=0;U<3;++U)c.autoScale?R[5*U]=c.aspect[U]/(w[1][U]-w[0][U]):R[5*U]=1/H,c.autoCenter&&(R[12+U]=.5*-R[5*U]*(w[0][U]+w[1][U]))}t.exports={createScene:A,createCamera:i}},8023:function(t,T,n){var i=n(6832);T.pointVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),T.pointFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),T.pickVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),T.pickFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(t,T,n){"use strict";var i=n(5158),u=n(5827),a=n(5306),r=n(8023);function o(l,y,s,x,h){this.plot=l,this.offsetBuffer=y,this.pickBuffer=s,this.shader=x,this.pickShader=h,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}t.exports=f;var l,y,v=o.prototype;function p(l,y){var h,s=0,x=l.length>>>1;for(h=0;h<x;h++){var g=l[2*h],m=l[2*h+1];g>=y[0]&&g<=y[2]&&m>=y[1]&&m<=y[3]&&s++}return s}function f(l,y){var s=l.gl,d=new o(l,u(s),u(s),i(s,r.pointVertex,r.pointFragment),i(s,r.pickVertex,r.pickFragment));return d.update(y),l.addObject(d),d}v.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},v.update=function(l){var y;function s(b,c){return b in l?l[b]:c}l=l||{},this.sizeMin=s("sizeMin",.5),this.sizeMax=s("sizeMax",20),this.color=s("color",[1,0,0,1]).slice(),this.areaRatio=s("areaRatio",1),this.borderColor=s("borderColor",[0,0,0,1]).slice(),this.blend=s("blend",!1);var x=l.positions.length>>>1,h=l.positions instanceof Float32Array,g=l.idToIndex instanceof Int32Array&&l.idToIndex.length>=x,m=l.positions,d=h?m:a.mallocFloat32(m.length),A=g?l.idToIndex:a.mallocInt32(x);if(h||d.set(m),!g)for(d.set(m),y=0;y<x;y++)A[y]=y;this.points=m,this.offsetBuffer.update(d),this.pickBuffer.update(A),h||a.free(d),g||a.free(A),this.pointCount=x,this.pickOffset=0},v.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0],function(s){var x=void 0!==s,h=x?this.pickShader:this.shader,g=this.plot.gl,m=this.plot.dataBox;if(0===this.pointCount)return s;var d=m[2]-m[0],A=m[3]-m[1],b=p(this.points,m),c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(b,.33333)));l[0]=2/d,l[4]=2/A,l[6]=-2*m[0]/d-1,l[7]=-2*m[1]/A-1,this.offsetBuffer.bind(),h.bind(),h.attributes.position.pointer(),h.uniforms.matrix=l,h.uniforms.color=this.color,h.uniforms.borderColor=this.borderColor,h.uniforms.pointCloud=c<5,h.uniforms.pointSize=c,h.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),x&&(y[0]=255&s,y[1]=s>>8&255,y[2]=s>>16&255,y[3]=s>>24&255,this.pickBuffer.bind(),h.attributes.pickId.pointer(g.UNSIGNED_BYTE),h.uniforms.pickOffset=y,this.pickOffset=s);var S=g.getParameter(g.BLEND),w=g.getParameter(g.DITHER);return S&&!this.blend&&g.disable(g.BLEND),w&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),S&&!this.blend&&g.enable(g.BLEND),w&&g.enable(g.DITHER),s+this.pointCount}),v.draw=v.unifiedDraw,v.drawPick=v.unifiedDraw,v.pick=function(l,y,s){var x=this.pickOffset,h=this.pointCount;if(s<x||s>=x+h)return null;var g=s-x,m=this.points;return{object:this,pointId:g,dataCoord:[m[2*g],m[2*g+1]]}}},6093:function(t){function T(n,i,u,a){var x,h,g,m,d,r=i[0],o=i[1],v=i[2],p=i[3],f=u[0],l=u[1],y=u[2],s=u[3];return(h=r*f+o*l+v*y+p*s)<0&&(h=-h,f=-f,l=-l,y=-y,s=-s),1-h>1e-6?(x=Math.acos(h),g=Math.sin(x),m=Math.sin((1-a)*x)/g,d=Math.sin(a*x)/g):(m=1-a,d=a),n[0]=m*r+d*f,n[1]=m*o+d*l,n[2]=m*v+d*y,n[3]=m*p+d*s,n}t.exports=T},8240:function(t){"use strict";t.exports=function(T){return T||0===T?T.toString():""}},4123:function(t,T,n){"use strict";var i=n(875);t.exports=a;var u={};function a(r,o,v){var p=u[o];if(p||(p=u[o]={}),r in p)return p[r];var f={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},l=i(r,f);f.triangles=!1;var s,x,y=i(r,f);if(v&&1!==v){for(s=0;s<l.positions.length;++s)for(x=0;x<l.positions[s].length;++x)l.positions[s][x]/=v;for(s=0;s<y.positions.length;++s)for(x=0;x<y.positions[s].length;++x)y.positions[s][x]/=v}var h=[[1/0,1/0],[-1/0,-1/0]],g=y.positions.length;for(s=0;s<g;++s){var m=y.positions[s];for(x=0;x<2;++x)h[0][x]=Math.min(h[0][x],m[x]),h[1][x]=Math.max(h[1][x],m[x])}return p[r]=[l,y,h]}},9282:function(t,T,n){var i=n(5158),u=n(6832),a=u(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),r=u(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=u(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),v=u(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),p=u(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:a,fragment:v,attributes:f},y={vertex:r,fragment:v,attributes:f},s={vertex:o,fragment:v,attributes:f},x={vertex:a,fragment:p,attributes:f},h={vertex:r,fragment:p,attributes:f},g={vertex:o,fragment:p,attributes:f};function m(d,A){var b=i(d,A),c=b.attributes;return c.position.location=0,c.color.location=1,c.glyph.location=2,c.id.location=3,b}T.createPerspective=function(d){return m(d,l)},T.createOrtho=function(d){return m(d,y)},T.createProject=function(d){return m(d,s)},T.createPickPerspective=function(d){return m(d,x)},T.createPickOrtho=function(d){return m(d,h)},T.createPickProject=function(d){return m(d,g)}},2182:function(t,T,n){"use strict";var i=n(3596),u=n(5827),a=n(2944),r=n(5306),o=n(104),v=n(9282),p=n(4123),f=n(8240),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(W,B){var te=W[0],q=W[1],oe=W[2],ie=W[3];return W[0]=B[0]*te+B[4]*q+B[8]*oe+B[12]*ie,W[1]=B[1]*te+B[5]*q+B[9]*oe+B[13]*ie,W[2]=B[2]*te+B[6]*q+B[10]*oe+B[14]*ie,W[3]=B[3]*te+B[7]*q+B[11]*oe+B[15]*ie,W}function s(W,B,te,q){return y(q,q,te),y(q,q,B),y(q,q,W)}function x(W,B){this.index=W,this.dataCoordinate=this.position=B}function h(W){return!0===W||W>1?1:W}function g(W,B,te,q,oe,ie,V,Y,ae,X,J,ue){this.gl=W,this.pixelRatio=1,this.shader=B,this.orthoShader=te,this.projectShader=q,this.pointBuffer=oe,this.colorBuffer=ie,this.glyphBuffer=V,this.idBuffer=Y,this.vao=ae,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=X,this.pickOrthoShader=J,this.pickProjectShader=ue,this.points=[],this._selectResult=new x(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=ee;var m=g.prototype;m.pickSlots=1,m.setPickBase=function(W){this.pickId=W},m.isTransparent=function(){if(this.hasAlpha)return!0;for(var W=0;W<3;++W)if(this.axesProject[W]&&this.projectHasAlpha)return!0;return!1},m.isOpaque=function(){if(!this.hasAlpha)return!0;for(var W=0;W<3;++W)if(this.axesProject[W]&&!this.projectHasAlpha)return!0;return!1};var d=[0,0],A=[0,0,0],b=[0,0,0],c=[0,0,0,1],S=[0,0,0,1],w=l.slice(),E=[0,0,0],P=[[0,0,0],[0,0,0]];function R(W){return W[0]=W[1]=W[2]=0,W}function F(W,B){return W[0]=B[0],W[1]=B[1],W[2]=B[2],W[3]=1,W}function _(W,B,te,q){return W[0]=B[0],W[1]=B[1],W[2]=B[2],W[te]=q,W}function z(W){for(var B=P,te=0;te<2;++te)for(var q=0;q<3;++q)B[te][q]=Math.max(Math.min(W[te][q],1e8),-1e8);return B}function D(W,B,te,q){var re,oe=B.axesProject,ie=B.gl,V=W.uniforms,Y=te.model||l,ae=te.view||l,X=te.projection||l,J=B.axesBounds,ue=z(B.clipBounds);re=B.axes&&B.axes.lastCubeProps?B.axes.lastCubeProps.axis:[1,1,1],d[0]=2/ie.drawingBufferWidth,d[1]=2/ie.drawingBufferHeight,W.bind(),V.view=ae,V.projection=X,V.screenSize=d,V.highlightId=B.highlightId,V.highlightScale=B.highlightScale,V.clipBounds=ue,V.pickGroup=B.pickId/255,V.pixelRatio=q;for(var ne=0;ne<3;++ne)if(oe[ne]){V.scale=B.projectScale[ne],V.opacity=B.projectOpacity[ne];for(var se=w,de=0;de<16;++de)se[de]=0;for(de=0;de<4;++de)se[5*de]=1;se[5*ne]=0,re[ne]<0?se[12+ne]=J[0][ne]:se[12+ne]=J[1][ne],o(se,Y,se),V.model=se;var be=(ne+1)%3,De=(ne+2)%3,_e=R(A),Ce=R(b);_e[be]=1,Ce[De]=1;var Le=s(X,ae,Y,F(c,_e)),Fe=s(X,ae,Y,F(S,Ce));if(Math.abs(Le[1])>Math.abs(Fe[1])){var ke=Le;Le=Fe,Fe=ke,ke=_e,_e=Ce,Ce=ke;var ze=be;be=De,De=ze}Le[0]<0&&(_e[be]=-1),Fe[1]>0&&(Ce[De]=-1);var Pe=0,Ie=0;for(de=0;de<4;++de)Pe+=Math.pow(Y[4*be+de],2),Ie+=Math.pow(Y[4*De+de],2);_e[be]/=Math.sqrt(Pe),Ce[De]/=Math.sqrt(Ie),V.axes[0]=_e,V.axes[1]=Ce,V.fragClipBounds[0]=_(E,ue[0],ne,-1e8),V.fragClipBounds[1]=_(E,ue[1],ne,1e8),B.vao.bind(),B.vao.draw(ie.TRIANGLES,B.vertexCount),B.lineWidth>0&&(ie.lineWidth(B.lineWidth*q),B.vao.draw(ie.LINES,B.lineVertexCount,B.vertexCount)),B.vao.unbind()}}var U=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function H(W,B,te,q,oe,ie,V){var Y=te.gl;if((ie===te.projectHasAlpha||V)&&D(B,te,q,oe),ie===te.hasAlpha||V){W.bind();var ae=W.uniforms;ae.model=q.model||l,ae.view=q.view||l,ae.projection=q.projection||l,d[0]=2/Y.drawingBufferWidth,d[1]=2/Y.drawingBufferHeight,ae.screenSize=d,ae.highlightId=te.highlightId,ae.highlightScale=te.highlightScale,ae.fragClipBounds=U,ae.clipBounds=te.axes.bounds,ae.opacity=te.opacity,ae.pickGroup=te.pickId/255,ae.pixelRatio=oe,te.vao.bind(),te.vao.draw(Y.TRIANGLES,te.vertexCount),te.lineWidth>0&&(Y.lineWidth(te.lineWidth*oe),te.vao.draw(Y.LINES,te.lineVertexCount,te.vertexCount)),te.vao.unbind()}}function j(W,B,te,q){var oe;oe=Array.isArray(W)?B<W.length?W[B]:void 0:W,oe=f(oe);var ie=!0;i(oe)&&(oe="\u25bc",ie=!1);var V=p(oe,te,q);return{mesh:V[0],lines:V[1],bounds:V[2],visible:ie}}function ee(W){var B=W.gl,te=v.createPerspective(B),q=v.createOrtho(B),oe=v.createProject(B),ie=v.createPickPerspective(B),V=v.createPickOrtho(B),Y=v.createPickProject(B),ae=u(B),X=u(B),J=u(B),ue=u(B),ne=new g(B,te,q,oe,ae,X,J,ue,a(B,[{buffer:ae,size:3,type:B.FLOAT},{buffer:X,size:4,type:B.FLOAT},{buffer:J,size:2,type:B.FLOAT},{buffer:ue,size:4,type:B.UNSIGNED_BYTE,normalized:!0}]),ie,V,Y);return ne.update(W),ne}m.draw=function(W){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,W,this.pixelRatio,!1,!1)},m.drawTransparent=function(W){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,W,this.pixelRatio,!0,!1)},m.drawPick=function(W){H(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,W,1,!0,!0)},m.pick=function(W){if(!W||W.id!==this.pickId)return null;var B=W.value[2]+(W.value[1]<<8)+(W.value[0]<<16);if(B>=this.pointCount||B<0)return null;var te=this.points[B],q=this._selectResult;q.index=B;for(var oe=0;oe<3;++oe)q.position[oe]=q.dataCoordinate[oe]=te[oe];return q},m.highlight=function(W){if(W){var B=W.index,te=255&B,q=B>>8&255,oe=B>>16&255;this.highlightId=[te/255,q/255,oe/255,0]}else this.highlightId=[1,1,1,1]},m.update=function(W){if("perspective"in(W=W||{})&&(this.useOrtho=!W.perspective),"orthographic"in W&&(this.useOrtho=!!W.orthographic),"lineWidth"in W&&(this.lineWidth=W.lineWidth),"project"in W)if(Array.isArray(W.project))this.axesProject=W.project;else{var B=!!W.project;this.axesProject=[B,B,B]}if("projectScale"in W)if(Array.isArray(W.projectScale))this.projectScale=W.projectScale.slice();else{var te=+W.projectScale;this.projectScale=[te,te,te]}if(this.projectHasAlpha=!1,"projectOpacity"in W){Array.isArray(W.projectOpacity)?this.projectOpacity=W.projectOpacity.slice():(te=+W.projectOpacity,this.projectOpacity=[te,te,te]);for(var q=0;q<3;++q)this.projectOpacity[q]=h(this.projectOpacity[q]),this.projectOpacity[q]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in W&&(this.opacity=h(W.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Y,ae,oe=W.position,ie=W.font||"normal",V=W.alignment||[0,0];if(2===V.length)Y=V[0],ae=V[1];else for(Y=[],ae=[],q=0;q<V.length;++q)Y[q]=V[q][0],ae[q]=V[q][1];var X=[1/0,1/0,1/0],J=[-1/0,-1/0,-1/0],ue=W.glyph,re=W.color,ne=W.size,se=W.angle,de=W.lineColor,be=-1,De=0,_e=0,Ce=0;if(oe.length){Ce=oe.length;e:for(q=0;q<Ce;++q){for(var Le=oe[q],Fe=0;Fe<3;++Fe)if(isNaN(Le[Fe])||!isFinite(Le[Fe]))continue e;var ze=(ke=j(ue,q,ie,this.pixelRatio)).mesh,Pe=ke.lines,Ie=ke.bounds;De+=3*ze.cells.length,_e+=2*Pe.edges.length}}var Qe=De+_e,at=r.mallocFloat(3*Qe),Be=r.mallocFloat(4*Qe),Ne=r.mallocFloat(2*Qe),nt=r.mallocUint32(Qe);if(Qe>0){var ct=0,mt=De,Bt=[0,0,0,1],Rt=[0,0,0,1],zt=Array.isArray(re)&&Array.isArray(re[0]),St=Array.isArray(de)&&Array.isArray(de[0]);e:for(q=0;q<Ce;++q){for(be+=1,Le=oe[q],Fe=0;Fe<3;++Fe){if(isNaN(Le[Fe])||!isFinite(Le[Fe]))continue e;J[Fe]=Math.max(J[Fe],Le[Fe]),X[Fe]=Math.min(X[Fe],Le[Fe])}ze=(ke=j(ue,q,ie,this.pixelRatio)).mesh,Pe=ke.lines,Ie=ke.bounds;var ke,Xt=ke.visible;if(Xt)if(Array.isArray(re)){if(3===(Mt=zt?q<re.length?re[q]:[0,0,0,0]:re).length){for(Fe=0;Fe<3;++Fe)Bt[Fe]=Mt[Fe];Bt[3]=1}else if(4===Mt.length){for(Fe=0;Fe<4;++Fe)Bt[Fe]=Mt[Fe];!this.hasAlpha&&Mt[3]<1&&(this.hasAlpha=!0)}}else Bt[0]=Bt[1]=Bt[2]=0,Bt[3]=1;else Bt=[1,1,1,0];if(Xt)if(Array.isArray(de)){var Mt;if(3===(Mt=St?q<de.length?de[q]:[0,0,0,0]:de).length){for(Fe=0;Fe<3;++Fe)Rt[Fe]=Mt[Fe];Rt[Fe]=1}else if(4===Mt.length){for(Fe=0;Fe<4;++Fe)Rt[Fe]=Mt[Fe];!this.hasAlpha&&Mt[3]<1&&(this.hasAlpha=!0)}}else Rt[0]=Rt[1]=Rt[2]=0,Rt[3]=1;else Rt=[1,1,1,0];var st=.5;Xt?Array.isArray(ne)?st=q<ne.length?+ne[q]:12:ne?st=+ne:this.useOrtho&&(st=12):st=0;var Se=0;Array.isArray(se)?Se=q<se.length?+se[q]:0:se&&(Se=+se);var pe=Math.cos(Se),ge=Math.sin(Se);for(Le=oe[q],Fe=0;Fe<3;++Fe)J[Fe]=Math.max(J[Fe],Le[Fe]),X[Fe]=Math.min(X[Fe],Le[Fe]);var Oe=Y,we=ae;Oe=0,Array.isArray(Y)?Oe=q<Y.length?Y[q]:0:Y&&(Oe=Y),we=0,Array.isArray(ae)?we=q<ae.length?ae[q]:0:ae&&(we=ae);var He=[Oe*=Oe>0?1-Ie[0][0]:Oe<0?1+Ie[1][0]:1,we*=we>0?1-Ie[0][1]:we<0?1+Ie[1][1]:1],Dt=ze.cells||[],Ft=ze.positions||[];for(Fe=0;Fe<Dt.length;++Fe)for(var Xe=Dt[Fe],ut=0;ut<3;++ut){for(var Ze=0;Ze<3;++Ze)at[3*ct+Ze]=Le[Ze];for(Ze=0;Ze<4;++Ze)Be[4*ct+Ze]=Bt[Ze];nt[ct]=be;var qe=Ft[Xe[ut]];Ne[2*ct]=st*(pe*qe[0]-ge*qe[1]+He[0]),Ne[2*ct+1]=st*(ge*qe[0]+pe*qe[1]+He[1]),ct+=1}for(Dt=Pe.edges,Ft=Pe.positions,Fe=0;Fe<Dt.length;++Fe)for(Xe=Dt[Fe],ut=0;ut<2;++ut){for(Ze=0;Ze<3;++Ze)at[3*mt+Ze]=Le[Ze];for(Ze=0;Ze<4;++Ze)Be[4*mt+Ze]=Rt[Ze];nt[mt]=be,qe=Ft[Xe[ut]],Ne[2*mt]=st*(pe*qe[0]-ge*qe[1]+He[0]),Ne[2*mt+1]=st*(ge*qe[0]+pe*qe[1]+He[1]),mt+=1}}}this.bounds=[X,J],this.points=oe,this.pointCount=oe.length,this.vertexCount=De,this.lineVertexCount=_e,this.pointBuffer.update(at),this.colorBuffer.update(Be),this.glyphBuffer.update(Ne),this.idBuffer.update(nt),r.free(at),r.free(Be),r.free(Ne),r.free(nt)},m.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(t,T,n){"use strict";var i=n(6832);T.boxVertex=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),T.boxFragment=i(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(t,T,n){"use strict";var i=n(5158),u=n(5827),a=n(1884);function r(p,f,l){this.plot=p,this.boxBuffer=f,this.boxShader=l,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t.exports=v;var o=r.prototype;function v(p,f){var l=p.gl,x=new r(p,u(l,[0,0,0,1,1,0,1,1]),i(l,a.boxVertex,a.boxFragment));return x.update(f),p.addOverlay(x),x}o.draw=function(){if(this.enabled){var p=this.plot,f=this.selectBox,l=this.borderWidth,s=(this.innerFill,this.innerColor),h=(this.outerFill,this.outerColor),g=this.borderColor,m=p.box,d=p.screenBox,A=p.dataBox,b=p.viewBox,c=p.pixelRatio,S=(f[0]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],w=(f[1]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1],E=(f[2]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],P=(f[3]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1];if(S=Math.max(S,b[0]),w=Math.max(w,b[1]),E=Math.min(E,b[2]),P=Math.min(P,b[3]),!(E<S||P<w)){m.bind();var R=d[2]-d[0],F=d[3]-d[1];if(this.outerFill&&(m.drawBox(0,0,R,w,h),m.drawBox(0,w,S,P,h),m.drawBox(0,P,R,F,h),m.drawBox(E,w,R,P,h)),this.innerFill&&m.drawBox(S,w,E,P,s),l>0){var _=l*c;m.drawBox(S-_,w-_,E+_,w+_,g),m.drawBox(S-_,P-_,E+_,P+_,g),m.drawBox(S-_,w-_,S+_,P+_,g),m.drawBox(E-_,w-_,E+_,P+_,g)}}}},o.update=function(p){p=p||{},this.innerFill=!!p.innerFill,this.outerFill=!!p.outerFill,this.innerColor=(p.innerColor||[0,0,0,.5]).slice(),this.outerColor=(p.outerColor||[0,0,0,.5]).slice(),this.borderColor=(p.borderColor||[0,0,0,1]).slice(),this.borderWidth=p.borderWidth||0,this.selectBox=(p.selectBox||this.selectBox).slice()},o.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(t,T,n){"use strict";t.exports=l;var i=n(4234),u=n(5306),a=n(5050),r=n(2288).nextPow2,o=function(y,s,x){for(var h=1e8,g=-1,m=-1,d=y.shape[0],A=y.shape[1],b=0;b<d;b++)for(var c=0;c<A;c++){var S=y.get(b,c,0),w=y.get(b,c,1),E=y.get(b,c,2),P=y.get(b,c,3);if(S<255||w<255||E<255||P<255){var R=s-b,F=x-c,_=R*R+F*F;_<h&&(h=_,g=b,m=c)}}return[g,m,h]};function v(y,s,x,h,g){this.coord=[y,s],this.id=x,this.value=h,this.distance=g}function p(y,s,x){this.gl=y,this.fbo=s,this.buffer=x,this._readTimeout=null;var h=this;this._readCallback=function(){h.gl&&(s.bind(),y.readPixels(0,0,s.shape[0],s.shape[1],y.RGBA,y.UNSIGNED_BYTE,h.buffer),h._readTimeout=null)}}var f=p.prototype;function l(y,s){var x=s[0],h=s[1];return new p(y,i(y,x,h,{}),u.mallocUint8(x*h*4))}Object.defineProperty(f,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(y){if(this.gl){this.fbo.shape=y;var s=this.fbo.shape[0],x=this.fbo.shape[1];if(x*s*4>this.buffer.length){u.free(this.buffer);for(var h=this.buffer=u.mallocUint8(r(x*s*4)),g=0;g<x*s*4;++g)h[g]=255}return y}}}),f.begin=function(){var y=this.gl;this.shape,y&&(this.fbo.bind(),y.clearColor(1,1,1,1),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT))},f.end=function(){var y=this.gl;y&&(y.bindFramebuffer(y.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},f.query=function(y,s,x){if(!this.gl)return null;var h=this.fbo.shape.slice();y|=0,s|=0,"number"!=typeof x&&(x=1);var g=0|Math.min(Math.max(y-x,0),h[0]),m=0|Math.min(Math.max(y+x,0),h[0]),d=0|Math.min(Math.max(s-x,0),h[1]),A=0|Math.min(Math.max(s+x,0),h[1]);if(m<=g||A<=d)return null;var b=[m-g,A-d],c=a(this.buffer,[b[0],b[1],4],[4,4*h[0],1],4*(g+h[0]*d)),S=o(c.hi(b[0],b[1],1),x,x),w=S[0],E=S[1];return w<0||Math.pow(this.radius,2)<S[2]?null:new v(w+g|0,E+d|0,c.get(w,E,0),[c.get(w,E,1),c.get(w,E,2),c.get(w,E,3)],Math.sqrt(S[2]))},f.dispose=function(){this.gl&&(this.fbo.dispose(),u.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(t,T,n){"use strict";var i=n(9016),u=n(4280),a=n(3984),r=n(1628),o=n(2631),v=n(9068);function p(s){this.gl=s,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=p.prototype;function l(s,x){return s.name<x.name?-1:1}function y(s,x,h,g,m){var d=new p(s);return d.update(x,h,g,m),d}f.bind=function(){this.program||this._relink();var s,x=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),h=this.gl.lastAttribCount;if(x>h)for(s=h;s<x;s++)this.gl.enableVertexAttribArray(s);else if(h>x)for(s=x;s<h;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=x,this.gl.useProgram(this.program)},f.dispose=function(){for(var s=this.gl.lastAttribCount,x=0;x<s;x++)this.gl.disableVertexAttribArray(x);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(s,x,h,g){if(!x||1===arguments.length){var m=s;s=m.vertex,x=m.fragment,h=m.uniforms,g=m.attributes}var d=this,A=d.gl,b=d._vref;d._vref=r.shader(A,A.VERTEX_SHADER,s),b&&b.dispose(),d.vertShader=d._vref.shader;var c=this._fref;if(d._fref=r.shader(A,A.FRAGMENT_SHADER,x),c&&c.dispose(),d.fragShader=d._fref.shader,!h||!g){var S=A.createProgram();if(A.attachShader(S,d.fragShader),A.attachShader(S,d.vertShader),A.linkProgram(S),!A.getProgramParameter(S,A.LINK_STATUS)){var w=A.getProgramInfoLog(S);throw new v(w,"Error linking program:"+w)}h=h||o.uniforms(A,S),g=g||o.attributes(A,S),A.deleteProgram(S)}(g=g.slice()).sort(l);var F,E=[],P=[],R=[];for(F=0;F<g.length;++F){var _=g[F];if(_.type.indexOf("mat")>=0){for(var z=0|_.type.charAt(_.type.length-1),D=new Array(z),k=0;k<z;++k)D[k]=R.length,P.push(_.name+"["+k+"]"),"number"==typeof _.location?R.push(_.location+k):Array.isArray(_.location)&&_.location.length===z&&"number"==typeof _.location[k]?R.push(0|_.location[k]):R.push(-1);E.push({name:_.name,type:_.type,locations:D})}else E.push({name:_.name,type:_.type,locations:[R.length]}),P.push(_.name),"number"==typeof _.location?R.push(0|_.location):R.push(-1)}var O=0;for(F=0;F<R.length;++F)if(R[F]<0){for(;R.indexOf(O)>=0;)O+=1;R[F]=O}var U=new Array(h.length);function H(){d.program=r.program(A,d._vref,d._fref,P,R);for(var j=0;j<h.length;++j)U[j]=A.getUniformLocation(d.program,h[j].name)}H(),d._relink=H,d.types={uniforms:a(h),attributes:a(g)},d.attributes=u(A,d,E,R),Object.defineProperty(d,"uniforms",i(A,d,h,U))},t.exports=y},9068:function(t){function T(n,i,u){this.shortMessage=i||"",this.longMessage=u||"",this.rawError=n||"",this.message="gl-shader: "+(i||n||"")+(u?"\n"+u:""),this.stack=(new Error).stack}T.prototype=new Error,T.prototype.name="GLError",T.prototype.constructor=T,t.exports=T},4280:function(t,T,n){"use strict";t.exports=p;var i=n(9068);function u(f,l,y,s,x,h){this._gl=f,this._wrapper=l,this._index=y,this._locations=s,this._dimension=x,this._constFunc=h}var a=u.prototype;a.pointer=function(l,y,s,x){var h=this,g=h._gl,m=h._locations[h._index];g.vertexAttribPointer(m,h._dimension,l||g.FLOAT,!!y,s||0,x||0),g.enableVertexAttribArray(m)},a.set=function(f,l,y,s){return this._constFunc(this._locations[this._index],f,l,y,s)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(f){return f!==this._locations[this._index]&&(this._locations[this._index]=0|f,this._wrapper.program=null),0|f}});var r=[function(f,l,y){return void 0===y.length?f.vertexAttrib1f(l,y):f.vertexAttrib1fv(l,y)},function(f,l,y,s){return void 0===y.length?f.vertexAttrib2f(l,y,s):f.vertexAttrib2fv(l,y)},function(f,l,y,s,x){return void 0===y.length?f.vertexAttrib3f(l,y,s,x):f.vertexAttrib3fv(l,y)},function(f,l,y,s,x,h){return void 0===y.length?f.vertexAttrib4f(l,y,s,x,h):f.vertexAttrib4fv(l,y)}];function o(f,l,y,s,x,h,g){var m=r[x],d=new u(f,l,y,s,x,m);Object.defineProperty(h,g,{set:function(A){return f.disableVertexAttribArray(s[y]),m(f,s[y],A),A},get:function(){return d},enumerable:!0})}function v(f,l,y,s,x,h,g){for(var m=new Array(x),d=new Array(x),A=0;A<x;++A)o(f,l,y[A],s,x,m,A),d[A]=m[A];Object.defineProperty(m,"location",{set:function(S){if(Array.isArray(S))for(var w=0;w<x;++w)d[w].location=S[w];else for(w=0;w<x;++w)d[w].location=S+w;return S},get:function(){for(var S=new Array(x),w=0;w<x;++w)S[w]=s[y[w]];return S},enumerable:!0}),m.pointer=function(S,w,E,P){S=S||f.FLOAT,w=!!w,E=E||x*x,P=P||0;for(var R=0;R<x;++R){var F=s[y[R]];f.vertexAttribPointer(F,x,S,w,E,P+R*x),f.enableVertexAttribArray(F)}};var b=new Array(x),c=f["vertexAttrib"+x+"fv"];Object.defineProperty(h,g,{set:function(S){for(var w=0;w<x;++w){var E=s[y[w]];if(f.disableVertexAttribArray(E),Array.isArray(S[0]))c.call(f,E,S[w]);else{for(var P=0;P<x;++P)b[P]=S[x*w+P];c.call(f,E,b)}}return S},get:function(){return m},enumerable:!0})}function p(f,l,y,s){for(var x={},h=0,g=y.length;h<g;++h){var m=y[h],d=m.name,A=m.type,b=m.locations;switch(A){case"bool":case"int":case"float":o(f,l,b[0],s,1,x,d);break;default:if(A.indexOf("vec")>=0){if((c=A.charCodeAt(A.length-1)-48)<2||c>4)throw new i("","Invalid data type for attribute "+d+": "+A);o(f,l,b[0],s,c,x,d)}else{if(!(A.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+d+": "+A);var c;if((c=A.charCodeAt(A.length-1)-48)<2||c>4)throw new i("","Invalid data type for attribute "+d+": "+A);v(f,l,b,s,c,x,d)}}}return x}},9016:function(t,T,n){"use strict";var i=n(3984),u=n(9068);function a(v){return function(){return v}}function r(v,p){for(var f=new Array(v),l=0;l<v;++l)f[l]=p;return f}function o(v,p,f,l){function y(A){return function(b,c,S){return b.getUniform(c.program,S[A])}}function s(A){return function(c){for(var S=x("",A),w=0;w<S.length;++w){var E=S[w],P=E[0],R=E[1];if(l[R]){var F=c;if("string"==typeof P&&(0===P.indexOf(".")||0===P.indexOf("["))){var _=P;if(0===P.indexOf(".")&&(_=P.slice(1)),_.indexOf("]")===_.length-1){var z=_.indexOf("["),D=_.slice(0,z),k=_.slice(z+1,_.length-1);F=D?c[D][k]:c[k]}else F=c[_]}var U,O=f[R].type;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":v.uniform1i(l[R],F);break;case"float":v.uniform1f(l[R],F);break;default:var H=O.indexOf("vec");if(!(0<=H&&H<=1&&O.length===4+H)){if(0===O.indexOf("mat")&&4===O.length){if((U=O.charCodeAt(O.length-1)-48)<2||U>4)throw new u("","Invalid uniform dimension type for matrix "+name+": "+O);v["uniformMatrix"+U+"fv"](l[R],!1,F);break}throw new u("","Unknown uniform data type for "+name+": "+O)}if((U=O.charCodeAt(O.length-1)-48)<2||U>4)throw new u("","Invalid data type");switch(O.charAt(0)){case"b":case"i":v["uniform"+U+"iv"](l[R],F);break;case"v":v["uniform"+U+"fv"](l[R],F);break;default:throw new u("","Unrecognized data type for vector "+name+": "+O)}}}}}}function x(A,b){if("object"!=typeof b)return[[A,b]];var c=[];for(var S in b){var w=b[S],E=A;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,"object"==typeof w?c.push.apply(c,x(E,w)):c.push([E,w])}return c}function h(A){switch(A){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var b=A.indexOf("vec");if(0<=b&&b<=1&&A.length===4+b){if((c=A.charCodeAt(A.length-1)-48)<2||c>4)throw new u("","Invalid data type");return"b"===A.charAt(0)?r(c,!1):r(c,0)}if(0===A.indexOf("mat")&&4===A.length){var c;if((c=A.charCodeAt(A.length-1)-48)<2||c>4)throw new u("","Invalid uniform dimension type for matrix "+name+": "+A);return r(c*c,0)}throw new u("","Unknown uniform data type for "+name+": "+A)}}function g(A,b,c){if("object"==typeof c){var S=m(c);Object.defineProperty(A,b,{get:a(S),set:s(c),enumerable:!0,configurable:!1})}else l[c]?Object.defineProperty(A,b,{get:y(c),set:s(c),enumerable:!0,configurable:!1}):A[b]=h(f[c].type)}function m(A){var b;if(Array.isArray(A)){b=new Array(A.length);for(var c=0;c<A.length;++c)g(b,c,A[c])}else for(var S in b={},A)g(b,S,A[S]);return b}var d=i(f,!0);return{get:a(m(d)),set:s(d),enumerable:!0,configurable:!0}}t.exports=o},3984:function(t){"use strict";function T(n,i){for(var u={},a=0;a<n.length;++a)for(var o=n[a].name.split("."),v=u,p=0;p<o.length;++p){var f=o[p].split("[");if(f.length>1){f[0]in v||(v[f[0]]=[]),v=v[f[0]];for(var l=1;l<f.length;++l){var y=parseInt(f[l]);l<f.length-1||p<o.length-1?(y in v||(l<f.length-1?v[y]=[]:v[y]={}),v=v[y]):v[y]=i?a:n[a].type}}else p<o.length-1?(f[0]in v||(v[f[0]]={}),v=v[f[0]]):v[f[0]]=i?a:n[a].type}return u}t.exports=T},2631:function(t,T){"use strict";T.uniforms=a,T.attributes=r;var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function u(o,v){if(!i){var p=Object.keys(n);i={};for(var f=0;f<p.length;++f){var l=p[f];i[o[l]]=n[l]}}return i[v]}function a(o,v){for(var p=o.getProgramParameter(v,o.ACTIVE_UNIFORMS),f=[],l=0;l<p;++l){var y=o.getActiveUniform(v,l);if(y){var s=u(o,y.type);if(y.size>1)for(var x=0;x<y.size;++x)f.push({name:y.name.replace("[0]","["+x+"]"),type:s});else f.push({name:y.name,type:s})}}return f}function r(o,v){for(var p=o.getProgramParameter(v,o.ACTIVE_ATTRIBUTES),f=[],l=0;l<p;++l){var y=o.getActiveAttrib(v,l);y&&f.push({name:y.name,type:u(o,y.type)})}return f}},1628:function(t,T,n){"use strict";T.shader=x,T.program=h;var i=n(9068),u=n(3530),r=new(typeof WeakMap>"u"?n(4037):WeakMap),o=0;function v(g,m,d,A,b,c,S){this.id=g,this.src=m,this.type=d,this.shader=A,this.count=c,this.programs=[],this.cache=S}function p(g){this.gl=g,this.shaders=[{},{}],this.programs={}}v.prototype.dispose=function(){if(0==--this.count){for(var g=this.cache,m=g.gl,d=this.programs,A=0,b=d.length;A<b;++A){var c=g.programs[d[A]];c&&(delete g.programs[A],m.deleteProgram(c))}m.deleteShader(this.shader),delete g.shaders[this.type===m.FRAGMENT_SHADER|0][this.src]}};var f=p.prototype;function l(g,m,d){var A=g.createShader(m);if(g.shaderSource(A,d),g.compileShader(A),!g.getShaderParameter(A,g.COMPILE_STATUS)){var b=g.getShaderInfoLog(A);try{var c=u(b,d,m)}catch(S){throw console.warn("Failed to format compiler error: "+S),new i(b,"Error compiling shader:\n"+b)}throw new i(b,c.short,c.long)}return A}function y(g,m,d,A,b){var c=g.createProgram();g.attachShader(c,m),g.attachShader(c,d);for(var S=0;S<A.length;++S)g.bindAttribLocation(c,b[S],A[S]);if(g.linkProgram(c),!g.getProgramParameter(c,g.LINK_STATUS)){var w=g.getProgramInfoLog(c);throw new i(w,"Error linking program: "+w)}return c}function s(g){var m=r.get(g);return m||(m=new p(g),r.set(g,m)),m}function x(g,m,d){return s(g).getShaderReference(m,d)}function h(g,m,d,A,b){return s(g).getProgram(m,d,A,b)}f.getShaderReference=function(g,m){var d=this.gl,A=this.shaders[g===d.FRAGMENT_SHADER|0],b=A[m];if(b&&d.isShader(b.shader))b.count+=1;else{var c=l(d,g,m);b=A[m]=new v(o++,m,g,c,[],1,this)}return b},f.getProgram=function(g,m,d,A){var b=[g.id,m.id,d.join(":"),A.join(":")].join("@"),c=this.programs[b];return(!c||!this.gl.isProgram(c))&&(this.programs[b]=c=y(this.gl,g.shader,m.shader,d,A),g.programs.push(b),m.programs.push(b)),c}},3050:function(t){"use strict";function T(u){this.plot=u,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t.exports=i;var n=T.prototype;function i(u,a){var r=new T(u);return r.update(a),u.addOverlay(r),r}n.update=function(u){u=u||{},this.enable=(u.enable||[!0,!0,!1,!1]).slice(),this.width=(u.width||[1,1,1,1]).slice(),this.color=(u.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(u.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var u=this.enable,a=this.width,r=this.color,o=this.center,v=this.plot,p=v.line,f=v.dataBox,l=v.viewBox;if(p.bind(),f[0]<=o[0]&&o[0]<=f[2]&&f[1]<=o[1]&&o[1]<=f[3]){var y=l[0]+(o[0]-f[0])/(f[2]-f[0])*(l[2]-l[0]),s=l[1]+(o[1]-f[1])/(f[3]-f[1])*(l[3]-l[1]);u[0]&&p.drawLine(y,s,l[0],s,a[0],r[0]),u[1]&&p.drawLine(y,s,y,l[1],a[1],r[1]),u[2]&&p.drawLine(y,s,l[2],s,a[2],r[2]),u[3]&&p.drawLine(y,s,y,l[3],a[3],r[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},3540:function(t,T,n){"use strict";var i=n(6832),u=n(5158),a=i(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),r=i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);t.exports=function(o){return u(o,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(t,T,n){"use strict";var i=n(5827),u=n(2944),a=n(3540);t.exports=y;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(s,x,h,g){this.gl=s,this.buffer=x,this.vao=h,this.shader=g,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var v=o.prototype,p=[0,0,0],f=[0,0,0],l=[0,0];function y(s,x){var h=[];function g(c,S,w,E,P,R){var F=[c,S,w,0,0,0,1];F[E+3]=1,F[E]=P,h.push.apply(h,F),F[6]=-1,h.push.apply(h,F),F[E]=R,h.push.apply(h,F),h.push.apply(h,F),F[6]=1,h.push.apply(h,F),F[E]=P,h.push.apply(h,F)}g(0,0,0,0,0,1),g(0,0,0,1,0,1),g(0,0,0,2,0,1),g(1,0,0,1,-1,1),g(1,0,0,2,-1,1),g(0,1,0,0,-1,1),g(0,1,0,2,-1,1),g(0,0,1,0,-1,1),g(0,0,1,1,-1,1);var m=i(s,h),d=u(s,[{type:s.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:s.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:s.FLOAT,buffer:m,size:1,offset:24,stride:28}]),A=a(s);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.weight.location=2;var b=new o(s,m,d,A);return b.update(x),b}v.isTransparent=function(){return!1},v.drawTransparent=function(s){},v.draw=function(s){var x=this.gl,h=this.vao,g=this.shader;h.bind(),g.bind();var b,m=s.model||r,d=s.view||r,A=s.projection||r;this.axes&&(b=this.axes.lastCubeProps.axis);for(var c=p,S=f,w=0;w<3;++w)b&&b[w]<0?(c[w]=this.bounds[0][w],S[w]=this.bounds[1][w]):(c[w]=this.bounds[1][w],S[w]=this.bounds[0][w]);for(l[0]=x.drawingBufferWidth,l[1]=x.drawingBufferHeight,g.uniforms.model=m,g.uniforms.view=d,g.uniforms.projection=A,g.uniforms.coordinates=[this.position,c,S],g.uniforms.colors=this.colors,g.uniforms.screenShape=l,w=0;w<3;++w)g.uniforms.lineWidth=this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(h.draw(x.TRIANGLES,6,6*w),this.drawSides[w]&&h.draw(x.TRIANGLES,12,18+12*w));h.unbind()},v.update=function(s){s&&("bounds"in s&&(this.bounds=s.bounds),"position"in s&&(this.position=s.position),"lineWidth"in s&&(this.lineWidth=s.lineWidth),"colors"in s&&(this.colors=s.colors),"enabled"in s&&(this.enabled=s.enabled),"drawSides"in s&&(this.drawSides=s.drawSides))},v.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(t,T,n){var i=n(6832),u=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=i(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),r=i(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);T.meshShader={vertex:u,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:r,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(t,T,n){"use strict";var i=n(2858),u=n(4020),a=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(g,m,d,A){for(var b=g.points,c=g.velocities,S=g.divergences,w=[],E=[],P=[],R=[],F=[],_=[],z=0,D=0,k=u.create(),O=u.create(),U=8,H=0;H<b.length;H++){var j=b[H],ee=c[H],W=S[H];0===m&&(W=.05*d),D=i.length(ee)/A,k=u.create(),i.copy(k,ee),k[3]=W;for(var B=0;B<U;B++)F[B]=[j[0],j[1],j[2],B];if(R.length>0)for(B=0;B<U;B++){var te=(B+1)%U;w.push(R[B],F[B],F[te],F[te],R[te],R[B]),P.push(O,k,k,k,O,O),_.push(z,D,D,D,z,z);var q=w.length;E.push([q-6,q-5,q-4],[q-3,q-2,q-1])}var oe=R;R=F,F=oe;var ie=O;O=k,k=ie;var V=z;z=D,D=V}return{positions:w,cells:E,vectors:P,vertexIntensity:_}},o=function(g,m,d,A){for(var b=0,c=0;c<g.length;c++)for(var S=g[c].velocities,w=0;w<S.length;w++)b=Math.max(b,i.length(S[w]));var E=g.map(function(H){return r(H,d,A,b)}),P=[],R=[],F=[],_=[];for(c=0;c<E.length;c++){var z=E[c],D=P.length;for(P=P.concat(z.positions),F=F.concat(z.vectors),_=_.concat(z.vertexIntensity),w=0;w<z.cells.length;w++){var k=z.cells[w],O=[];R.push(O);for(var U=0;U<k.length;U++)O.push(k[U]+D)}}return{positions:P,cells:R,vectors:F,vertexIntensity:_,colormap:m}},v=function(g,m){var A,d=g.length;for(A=0;A<d;A++){var b=g[A];if(b===m)return A;if(b>m)return A-1}return A},p=function(g,m,d){return g<m?m:g>d?d:g},f=function(g,m,d){var A=m.vectors,b=m.meshgrid,c=g[0],S=g[1],w=g[2],E=b[0].length,P=b[1].length,R=b[2].length,F=v(b[0],c),_=v(b[1],S),z=v(b[2],w),D=F+1,k=_+1,O=z+1;if(F=p(F,0,E-1),D=p(D,0,E-1),_=p(_,0,P-1),k=p(k,0,P-1),z=p(z,0,R-1),O=p(O,0,R-1),F<0||_<0||z<0||D>E-1||k>P-1||O>R-1)return i.create();var ie,V,Y,ae,X,J,U=b[0][F],H=b[0][D],j=b[1][_],ee=b[1][k],W=b[2][z],te=(c-U)/(H-U),q=(S-j)/(ee-j),oe=(w-W)/(b[2][O]-W);switch(isFinite(te)||(te=.5),isFinite(q)||(q=.5),isFinite(oe)||(oe=.5),d.reversedX&&(F=E-1-F,D=E-1-D),d.reversedY&&(_=P-1-_,k=P-1-k),d.reversedZ&&(z=R-1-z,O=R-1-O),d.filled){case 5:X=z,J=O,Y=_*R,ae=k*R,ie=F*R*P,V=D*R*P;break;case 4:X=z,J=O,ie=F*R,V=D*R,Y=_*R*E,ae=k*R*E;break;case 3:Y=_,ae=k,X=z*P,J=O*P,ie=F*P*R,V=D*P*R;break;case 2:Y=_,ae=k,ie=F*P,V=D*P,X=z*P*E,J=O*P*E;break;case 1:ie=F,V=D,X=z*E,J=O*E,Y=_*E*R,ae=k*E*R;break;default:ie=F,V=D,Y=_*E,ae=k*E,X=z*E*P,J=O*E*P}var ue=A[ie+Y+X],re=A[ie+Y+J],ne=A[ie+ae+X],se=A[ie+ae+J],de=A[V+Y+X],be=A[V+Y+J],De=A[V+ae+X],_e=A[V+ae+J],Ce=i.create(),Le=i.create(),Fe=i.create(),ke=i.create();i.lerp(Ce,ue,de,te),i.lerp(Le,re,be,te),i.lerp(Fe,ne,De,te),i.lerp(ke,se,_e,te);var ze=i.create(),Pe=i.create();i.lerp(ze,Ce,Fe,q),i.lerp(Pe,Le,ke,q);var Ie=i.create();return i.lerp(Ie,ze,Pe,oe),Ie},y=function(g){var m=1/0;g.sort(function(c,S){return c-S});for(var d=g.length,A=1;A<d;A++){var b=Math.abs(g[A]-g[A-1]);b<m&&(m=b)}return m},s=function(g){for(var m=[],d=[],A=[],b={},c={},S={},w=g.length,E=0;E<w;E++){var P=g[E],R=P[0],F=P[1],_=P[2];b[R]||(m.push(R),b[R]=!0),c[F]||(d.push(F),c[F]=!0),S[_]||(A.push(_),S[_]=!0)}var z=y(m),D=y(d),k=y(A),O=Math.min(z,D,k);return isFinite(O)?O:1};t.exports=function(g,m){var d=g.startingPositions,A=g.maxLength||1e3,b=g.tubeSize||1,c=g.absoluteTubeSize,S=g.gridFill||"+x+y+z",w={};-1!==S.indexOf("-x")&&(w.reversedX=!0),-1!==S.indexOf("-y")&&(w.reversedY=!0),-1!==S.indexOf("-z")&&(w.reversedZ=!0),w.filled=a.indexOf(S.replace(/-/g,"").replace(/\+/g,""));var E=g.getVelocity||function(be){return f(be,g,w)},P=g.getDivergence||function(be,De){var _e=i.create(),Ce=1e-4;i.add(_e,be,[Ce,0,0]);var Le=E(_e);i.subtract(Le,Le,De),i.scale(Le,Le,1/Ce),i.add(_e,be,[0,Ce,0]);var Fe=E(_e);i.subtract(Fe,Fe,De),i.scale(Fe,Fe,1/Ce),i.add(_e,be,[0,0,Ce]);var ke=E(_e);return i.subtract(ke,ke,De),i.scale(ke,ke,1/Ce),i.add(_e,Le,Fe),i.add(_e,_e,ke),_e},R=[],F=m[0][0],_=m[0][1],z=m[0][2],D=m[1][0],k=m[1][1],O=m[1][2],U=function(be){var De=be[0],_e=be[1],Ce=be[2];return!(De<F||De>D||_e<_||_e>k||Ce<z||Ce>O)},j=10*i.distance(m[0],m[1])/A,ee=j*j,W=1,B=0,te=d.length;te>1&&(W=s(d));for(var q=0;q<te;q++){var oe=i.create();i.copy(oe,d[q]);var ie=[oe],V=[],Y=E(oe),ae=oe;V.push(Y);var X=[],J=P(oe,Y),ue=i.length(J);isFinite(ue)&&ue>B&&(B=ue),X.push(ue),R.push({points:ie,velocities:V,divergences:X});for(var re=0;re<100*A&&ie.length<A&&U(oe);){re++;var ne=i.clone(Y),se=i.squaredLength(ne);if(0===se)break;se>ee&&i.scale(ne,ne,j/Math.sqrt(se)),i.add(ne,ne,oe),Y=E(ne),i.squaredDistance(ae,ne)-ee>-1e-4*ee&&(ie.push(ne),ae=ne,V.push(Y),J=P(ne,Y),ue=i.length(J),isFinite(ue)&&ue>B&&(B=ue),X.push(ue)),oe=ne}}var de=o(R,g.colormap,B,W);return c?de.tubeScale=c:(0===B&&(B=1),de.tubeScale=.5*b*W/B),de};var x=n(9578),h=n(1140).createMesh;t.exports.createTubeMesh=function(g,m){return h(g,m,{shaders:x,traceType:"streamtube"})}},9054:function(t,T,n){var i=n(5158),u=n(6832),a=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),r=u(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),o=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),v=u(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);T.createShader=function(p){var f=i(p,a,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},T.createPickShader=function(p){var f=i(p,a,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},T.createContourShader=function(p){var f=i(p,o,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},T.createPickContourShader=function(p){var f=i(p,o,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},3754:function(t,T,n){"use strict";t.exports=ie;var i=n(2288),u=n(5827),a=n(2944),r=n(8931),o=n(5306),v=n(9156),p=n(7498),f=n(7382),l=n(5050),y=n(4162),s=n(104),x=n(7437),h=n(5070),g=n(9144),m=n(9054),d=m.createShader,A=m.createContourShader,b=m.createPickShader,c=m.createPickContourShader,S=40,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function R(V,Y,ae,X,J){this.position=V,this.index=Y,this.uv=ae,this.level=X,this.dataCoordinate=J}!function(){for(var V=0;V<3;++V){var Y=P[V],X=(V+2)%3;Y[(V+1)%3+0]=1,Y[X+3]=1,Y[V+6]=1}}();var F=256;function _(V,Y,ae,X,J,ue,re,ne,se,de,be,De,_e,Ce,Le){this.gl=V,this.shape=Y,this.bounds=ae,this.objectOffset=Le,this.intensityBounds=[],this._shader=X,this._pickShader=J,this._coordinateBuffer=ue,this._vao=re,this._colorMap=ne,this._contourShader=se,this._contourPickShader=de,this._contourBuffer=be,this._contourVAO=De,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new R([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=_e,this._dynamicVAO=Ce,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[l(o.mallocFloat(1024),[0,0]),l(o.mallocFloat(1024),[0,0]),l(o.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var z=_.prototype;function D(V,Y){if(!Y||!Y.length)return 1;for(var ae=0;ae<Y.length;++ae){if(Y.length<2)return 1;if(Y[ae][0]===V)return Y[ae][1];if(Y[ae][0]>V&&ae>0){var X=(Y[ae][0]-V)/(Y[ae][0]-Y[ae-1][0]);return Y[ae][1]*(1-X)+X*Y[ae-1][1]}}return 1}z.genColormap=function(V,Y){var ae=!1,X=f([v({colormap:V,nshades:F,format:"rgba"}).map(function(J,ue){var re=Y?D(ue/255,Y):J[3];return re<1&&(ae=!0),[J[0],J[1],J[2],255*re]})]);return p.divseq(X,255),this.hasAlphaScale=ae,X},z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},z.isOpaque=function(){return!this.isTransparent()},z.pickSlots=1,z.setPickBase=function(V){this.pickId=V};var k=[0,0,0],O={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function U(V,Y){var ae,X,J,ue=Y.axes&&Y.axes.lastCubeProps.axis||k,re=Y.showSurface,ne=Y.showContour;for(ae=0;ae<3;++ae)for(re=re||Y.surfaceProject[ae],X=0;X<3;++X)ne=ne||Y.contourProject[ae][X];for(ae=0;ae<3;++ae){var se=O.projections[ae];for(X=0;X<16;++X)se[X]=0;for(X=0;X<4;++X)se[5*X]=1;se[5*ae]=0,se[12+ae]=Y.axesBounds[+(ue[ae]>0)][ae],s(se,V.model,se);var de=O.clipBounds[ae];for(J=0;J<2;++J)for(X=0;X<3;++X)de[J][X]=V.clipBounds[J][X];de[0][ae]=-1e8,de[1][ae]=1e8}return O.showSurface=re,O.showContour=ne,O}var H={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},j=w.slice(),ee=[1,0,0,0,1,0,0,0,1];function W(V,Y){V=V||{};var ae=this.gl;ae.disable(ae.CULL_FACE),this._colorMap.bind(0);var X=H;X.model=V.model||w,X.view=V.view||w,X.projection=V.projection||w,X.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],X.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],X.objectOffset=this.objectOffset,X.contourColor=this.contourColor[0],X.inverseModel=x(X.inverseModel,X.model);for(var J=0;J<2;++J)for(var ue=X.clipBounds[J],re=0;re<3;++re)ue[re]=Math.min(Math.max(this.clipBounds[J][re],-1e8),1e8);X.kambient=this.ambientLight,X.kdiffuse=this.diffuseLight,X.kspecular=this.specularLight,X.roughness=this.roughness,X.fresnel=this.fresnel,X.opacity=this.opacity,X.height=0,X.permutation=ee,X.vertexColor=this.vertexColor;var ne=j;for(s(ne,X.view,X.model),s(ne,X.projection,ne),x(ne,ne),J=0;J<3;++J)X.eyePosition[J]=ne[12+J]/ne[15];var se=ne[15];for(J=0;J<3;++J)se+=this.lightPosition[J]*ne[4*J+3];for(J=0;J<3;++J){var de=ne[12+J];for(re=0;re<3;++re)de+=ne[4*re+J]*this.lightPosition[re];X.lightPosition[J]=de/se}var be=U(X,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=X,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ae.TRIANGLES,this._vertexCount),J=0;J<3;++J)!this.surfaceProject[J]||!this.vertexCount||(this._shader.uniforms.model=be.projections[J],this._shader.uniforms.clipBounds=be.clipBounds[J],this._vao.draw(ae.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var De=this._contourShader;X.kambient=1,X.kdiffuse=0,X.kspecular=0,X.opacity=1,De.bind(),De.uniforms=X;var _e=this._contourVAO;for(_e.bind(),J=0;J<3;++J)for(De.uniforms.permutation=P[J],ae.lineWidth(this.contourWidth[J]*this.pixelRatio),re=0;re<this.contourLevels[J].length;++re)re===this.highlightLevel[J]?(De.uniforms.contourColor=this.highlightColor[J],De.uniforms.contourTint=this.highlightTint[J]):(0===re||re-1===this.highlightLevel[J])&&(De.uniforms.contourColor=this.contourColor[J],De.uniforms.contourTint=this.contourTint[J]),this._contourCounts[J][re]&&(De.uniforms.height=this.contourLevels[J][re],_e.draw(ae.LINES,this._contourCounts[J][re],this._contourOffsets[J][re]));for(J=0;J<3;++J)for(De.uniforms.model=be.projections[J],De.uniforms.clipBounds=be.clipBounds[J],re=0;re<3;++re)if(this.contourProject[J][re]){De.uniforms.permutation=P[re],ae.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var Ce=0;Ce<this.contourLevels[re].length;++Ce)Ce===this.highlightLevel[re]?(De.uniforms.contourColor=this.highlightColor[re],De.uniforms.contourTint=this.highlightTint[re]):(0===Ce||Ce-1===this.highlightLevel[re])&&(De.uniforms.contourColor=this.contourColor[re],De.uniforms.contourTint=this.contourTint[re]),this._contourCounts[re][Ce]&&(De.uniforms.height=this.contourLevels[re][Ce],_e.draw(ae.LINES,this._contourCounts[re][Ce],this._contourOffsets[re][Ce]))}for(_e.unbind(),(_e=this._dynamicVAO).bind(),J=0;J<3;++J)if(0!==this._dynamicCounts[J])for(De.uniforms.model=X.model,De.uniforms.clipBounds=X.clipBounds,De.uniforms.permutation=P[J],ae.lineWidth(this.dynamicWidth[J]*this.pixelRatio),De.uniforms.contourColor=this.dynamicColor[J],De.uniforms.contourTint=this.dynamicTint[J],De.uniforms.height=this.dynamicLevel[J],_e.draw(ae.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]),re=0;re<3;++re)this.contourProject[re][J]&&(De.uniforms.model=be.projections[re],De.uniforms.clipBounds=be.clipBounds[re],_e.draw(ae.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]));_e.unbind()}}z.draw=function(V){return W.call(this,V,!1)},z.drawTransparent=function(V){return W.call(this,V,!0)};var B={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function te(V,Y){return Array.isArray(V)?[Y(V[0]),Y(V[1]),Y(V[2])]:[Y(V),Y(V),Y(V)]}function q(V){return Array.isArray(V)?3===V.length?[V[0],V[1],V[2],1]:[V[0],V[1],V[2],V[3]]:[0,0,0,1]}function oe(V){if(Array.isArray(V)){if(Array.isArray(V))return[q(V[0]),q(V[1]),q(V[2])];var Y=q(V);return[Y.slice(),Y.slice(),Y.slice()]}}function ie(V){var Y=V.gl,ae=d(Y),X=b(Y),J=A(Y),ue=c(Y),re=u(Y),ne=a(Y,[{buffer:re,size:4,stride:S,offset:0},{buffer:re,size:3,stride:S,offset:16},{buffer:re,size:3,stride:S,offset:28}]),se=u(Y),de=a(Y,[{buffer:se,size:4,stride:20,offset:0},{buffer:se,size:1,stride:20,offset:16}]),be=u(Y),De=a(Y,[{buffer:be,size:2,type:Y.FLOAT}]),_e=r(Y,1,F,Y.RGBA,Y.UNSIGNED_BYTE);_e.minFilter=Y.LINEAR,_e.magFilter=Y.LINEAR;var Ce=new _(Y,[0,0],[[0,0,0],[0,0,0]],ae,X,re,ne,_e,J,ue,se,de,be,De,[0,0,0]),Le={levels:[[],[],[]]};for(var Fe in V)Le[Fe]=V[Fe];return Le.colormap=Le.colormap||"jet",Ce.update(Le),Ce}z.drawPick=function(V){V=V||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var ae=B;ae.model=V.model||w,ae.view=V.view||w,ae.projection=V.projection||w,ae.shape=this._field[2].shape,ae.pickId=this.pickId/255,ae.lowerBound=this.bounds[0],ae.upperBound=this.bounds[1],ae.objectOffset=this.objectOffset,ae.permutation=ee;for(var X=0;X<2;++X)for(var J=ae.clipBounds[X],ue=0;ue<3;++ue)J[ue]=Math.min(Math.max(this.clipBounds[X][ue],-1e8),1e8);var re=U(ae,this);if(re.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ae,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),X=0;X<3;++X)this.surfaceProject[X]&&(this._pickShader.uniforms.model=re.projections[X],this._pickShader.uniforms.clipBounds=re.clipBounds[X],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(re.showContour){var ne=this._contourPickShader;ne.bind(),ne.uniforms=ae;var se=this._contourVAO;for(se.bind(),ue=0;ue<3;++ue)for(Y.lineWidth(this.contourWidth[ue]*this.pixelRatio),ne.uniforms.permutation=P[ue],X=0;X<this.contourLevels[ue].length;++X)this._contourCounts[ue][X]&&(ne.uniforms.height=this.contourLevels[ue][X],se.draw(Y.LINES,this._contourCounts[ue][X],this._contourOffsets[ue][X]));for(X=0;X<3;++X)for(ne.uniforms.model=re.projections[X],ne.uniforms.clipBounds=re.clipBounds[X],ue=0;ue<3;++ue)if(this.contourProject[X][ue]){ne.uniforms.permutation=P[ue],Y.lineWidth(this.contourWidth[ue]*this.pixelRatio);for(var de=0;de<this.contourLevels[ue].length;++de)this._contourCounts[ue][de]&&(ne.uniforms.height=this.contourLevels[ue][de],se.draw(Y.LINES,this._contourCounts[ue][de],this._contourOffsets[ue][de]))}se.unbind()}},z.pick=function(V){if(!V||V.id!==this.pickId)return null;var Y=this._field[2].shape,ae=this._pickResult,X=Y[0]*(V.value[0]+(V.value[2]>>4)/16)/255,J=Math.floor(X),ue=X-J,re=Y[1]*(V.value[1]+(15&V.value[2])/16)/255,ne=Math.floor(re),se=re-ne;J+=1,ne+=1;var de=ae.position;de[0]=de[1]=de[2]=0;for(var be=0;be<2;++be)for(var De=be?ue:1-ue,_e=0;_e<2;++_e)for(var Le=J+be,Fe=ne+_e,ke=De*(_e?se:1-se),ze=0;ze<3;++ze)de[ze]+=this._field[ze].get(Le,Fe)*ke;for(var Pe=this._pickResult.level,Ie=0;Ie<3;++Ie)if(Pe[Ie]=h.le(this.contourLevels[Ie],de[Ie]),Pe[Ie]<0)this.contourLevels[Ie].length>0&&(Pe[Ie]=0);else if(Pe[Ie]<this.contourLevels[Ie].length-1){var Qe=this.contourLevels[Ie][Pe[Ie]],at=this.contourLevels[Ie][Pe[Ie]+1];Math.abs(Qe-de[Ie])>Math.abs(at-de[Ie])&&(Pe[Ie]+=1)}for(ae.index[0]=ue<.5?J:J+1,ae.index[1]=se<.5?ne:ne+1,ae.uv[0]=X/Y[0],ae.uv[1]=re/Y[1],ze=0;ze<3;++ze)ae.dataCoordinate[ze]=this._field[ze].get(ae.index[0],ae.index[1]);return ae},z.padField=function(V,Y){var ae=Y.shape.slice(),X=V.shape.slice();p.assign(V.lo(1,1).hi(ae[0],ae[1]),Y),p.assign(V.lo(1).hi(ae[0],1),Y.hi(ae[0],1)),p.assign(V.lo(1,X[1]-1).hi(ae[0],1),Y.lo(0,ae[1]-1).hi(ae[0],1)),p.assign(V.lo(0,1).hi(1,ae[1]),Y.hi(1)),p.assign(V.lo(X[0]-1,1).hi(1,ae[1]),Y.lo(ae[0]-1)),V.set(0,0,Y.get(0,0)),V.set(0,X[1]-1,Y.get(0,ae[1]-1)),V.set(X[0]-1,0,Y.get(ae[0]-1,0)),V.set(X[0]-1,X[1]-1,Y.get(ae[0]-1,ae[1]-1))},z.update=function(V){V=V||{},this.objectOffset=V.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in V&&(this.contourWidth=te(V.contourWidth,Number)),"showContour"in V&&(this.showContour=te(V.showContour,Boolean)),"showSurface"in V&&(this.showSurface=!!V.showSurface),"contourTint"in V&&(this.contourTint=te(V.contourTint,Boolean)),"contourColor"in V&&(this.contourColor=oe(V.contourColor)),"contourProject"in V&&(this.contourProject=te(V.contourProject,function(Ke){return te(Ke,Boolean)})),"surfaceProject"in V&&(this.surfaceProject=V.surfaceProject),"dynamicColor"in V&&(this.dynamicColor=oe(V.dynamicColor)),"dynamicTint"in V&&(this.dynamicTint=te(V.dynamicTint,Number)),"dynamicWidth"in V&&(this.dynamicWidth=te(V.dynamicWidth,Number)),"opacity"in V&&(this.opacity=V.opacity),"opacityscale"in V&&(this.opacityscale=V.opacityscale),"colorBounds"in V&&(this.colorBounds=V.colorBounds),"vertexColor"in V&&(this.vertexColor=V.vertexColor?1:0),"colormap"in V&&this._colorMap.setPixels(this.genColormap(V.colormap,this.opacityscale));var Y=V.field||V.coords&&V.coords[2]||null,ae=!1;if(Y||(Y=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in V||"coords"in V){var X=(Y.shape[0]+2)*(Y.shape[1]+2);X>this._field[2].data.length&&(o.freeFloat(this._field[2].data),this._field[2].data=o.mallocFloat(i.nextPow2(X))),this._field[2]=l(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var J=this.shape,ue=0;ue<2;++ue)this._field[2].size>this._field[ue].data.length&&(o.freeFloat(this._field[ue].data),this._field[ue].data=o.mallocFloat(this._field[2].size)),this._field[ue]=l(this._field[ue].data,[J[0]+2,J[1]+2]);if(V.coords){var re=V.coords;if(!Array.isArray(re)||3!==re.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ue=0;ue<2;++ue){var ne=re[ue];for(_e=0;_e<2;++_e)if(ne.shape[_e]!==J[_e])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ue],ne)}}else if(V.ticks){var se=V.ticks;if(!Array.isArray(se)||2!==se.length)throw new Error("gl-surface: invalid ticks");for(ue=0;ue<2;++ue){var de=se[ue];if((Array.isArray(de)||de.length)&&(de=l(de)),de.shape[0]!==J[ue])throw new Error("gl-surface: invalid tick length");var be=l(de.data,J);be.stride[ue]=de.stride[0],be.stride[1^ue]=0,this.padField(this._field[ue],be)}}else{for(ue=0;ue<2;++ue){var De=[0,0];De[ue]=1,this._field[ue]=l(this._field[ue].data,[J[0]+2,J[1]+2],De,0)}this._field[0].set(0,0,0);for(var _e=0;_e<J[0];++_e)this._field[0].set(_e+1,0,_e);for(this._field[0].set(J[0]+1,0,J[0]-1),this._field[1].set(0,0,0),_e=0;_e<J[1];++_e)this._field[1].set(0,_e+1,_e);this._field[1].set(0,J[1]+1,J[1]-1)}var Ce=this._field,Le=l(o.mallocFloat(3*Ce[2].size*2),[3,J[0]+2,J[1]+2,2]);for(ue=0;ue<3;++ue)g(Le.pick(ue),Ce[ue],"mirror");var Fe=l(o.mallocFloat(3*Ce[2].size),[J[0]+2,J[1]+2,3]);for(ue=0;ue<J[0]+2;++ue)for(_e=0;_e<J[1]+2;++_e){var ke=Le.get(0,ue,_e,0),ze=Le.get(0,ue,_e,1),Pe=Le.get(1,ue,_e,0),Ie=Le.get(1,ue,_e,1),Qe=Le.get(2,ue,_e,0),at=Le.get(2,ue,_e,1),Be=Pe*at-Ie*Qe,Ne=Qe*ze-at*ke,nt=ke*Ie-ze*Pe,ct=Math.sqrt(Be*Be+Ne*Ne+nt*nt);ct<1e-8?(ct=Math.max(Math.abs(Be),Math.abs(Ne),Math.abs(nt)))<1e-8?(nt=1,Ne=Be=0,ct=1):ct=1/ct:ct=1/Math.sqrt(ct),Fe.set(ue,_e,0,Be*ct),Fe.set(ue,_e,1,Ne*ct),Fe.set(ue,_e,2,nt*ct)}o.free(Le.data);var mt=[1/0,1/0,1/0],Bt=[-1/0,-1/0,-1/0],Rt=1/0,zt=-1/0,St=(J[0]-1)*(J[1]-1)*6,Xt=o.mallocFloat(i.nextPow2(10*St)),Mt=0,st=0;for(ue=0;ue<J[0]-1;++ue)e:for(_e=0;_e<J[1]-1;++_e){for(var Se=0;Se<2;++Se)for(var pe=0;pe<2;++pe)for(var ge=0;ge<3;++ge){var Oe=this._field[ge].get(1+ue+Se,1+_e+pe);if(isNaN(Oe)||!isFinite(Oe))continue e}for(ge=0;ge<6;++ge){var we=ue+E[ge][0],He=_e+E[ge][1],Xe=this._field[0].get(we+1,He+1),ut=this._field[1].get(we+1,He+1);Oe=this._field[2].get(we+1,He+1),Be=Fe.get(we+1,He+1,0),Ne=Fe.get(we+1,He+1,1),nt=Fe.get(we+1,He+1,2),V.intensity&&(Ze=V.intensity.get(we,He));var Ze=V.intensity?V.intensity.get(we,He):Oe+this.objectOffset[2];Xt[Mt++]=we,Xt[Mt++]=He,Xt[Mt++]=Xe,Xt[Mt++]=ut,Xt[Mt++]=Oe,Xt[Mt++]=0,Xt[Mt++]=Ze,Xt[Mt++]=Be,Xt[Mt++]=Ne,Xt[Mt++]=nt,mt[0]=Math.min(mt[0],Xe+this.objectOffset[0]),mt[1]=Math.min(mt[1],ut+this.objectOffset[1]),mt[2]=Math.min(mt[2],Oe+this.objectOffset[2]),Rt=Math.min(Rt,Ze),Bt[0]=Math.max(Bt[0],Xe+this.objectOffset[0]),Bt[1]=Math.max(Bt[1],ut+this.objectOffset[1]),Bt[2]=Math.max(Bt[2],Oe+this.objectOffset[2]),zt=Math.max(zt,Ze),st+=1}}for(V.intensityBounds&&(Rt=+V.intensityBounds[0],zt=+V.intensityBounds[1]),ue=6;ue<Mt;ue+=10)Xt[ue]=(Xt[ue]-Rt)/(zt-Rt);this._vertexCount=st,this._coordinateBuffer.update(Xt.subarray(0,Mt)),o.freeFloat(Xt),o.free(Fe.data),this.bounds=[mt,Bt],this.intensity=V.intensity||this._field[2],(this.intensityBounds[0]!==Rt||this.intensityBounds[1]!==zt)&&(ae=!0),this.intensityBounds=[Rt,zt]}if("levels"in V){var qe=V.levels;for(qe=Array.isArray(qe[0])?qe.slice():[[],[],qe],ue=0;ue<3;++ue)qe[ue]=qe[ue].slice(),qe[ue].sort(function(Ke,We){return Ke-We});for(ue=0;ue<3;++ue)for(_e=0;_e<qe[ue].length;++_e)qe[ue][_e]-=this.objectOffset[ue];e:for(ue=0;ue<3;++ue){if(qe[ue].length!==this.contourLevels[ue].length){ae=!0;break}for(_e=0;_e<qe[ue].length;++_e)if(qe[ue][_e]!==this.contourLevels[ue][_e]){ae=!0;break e}}this.contourLevels=qe}if(ae){Ce=this._field,J=this.shape;for(var Dt=[],Ft=0;Ft<3;++Ft){var bt=this.contourLevels[Ft],Pt=[],cr=[],Sr=[0,0,0];for(ue=0;ue<bt.length;++ue){var Kr=y(this._field[Ft],bt[ue]);Pt.push(Dt.length/5|0),st=0;e:for(_e=0;_e<Kr.cells.length;++_e){var It=Kr.cells[_e];for(ge=0;ge<2;++ge){var $t=Kr.positions[It[ge]],kr=$t[0],lr=0|Math.floor(kr),rt=kr-lr,$e=$t[1],ht=0|Math.floor($e),gt=$e-ht,ft=!1;t:for(var Ct=0;Ct<3;++Ct){Sr[Ct]=0;var sr=(Ft+Ct+1)%3;for(Se=0;Se<2;++Se){var tr=Se?rt:1-rt;for(we=0|Math.min(Math.max(lr+Se,0),J[0]),pe=0;pe<2;++pe){var Cr=pe?gt:1-gt;if(He=0|Math.min(Math.max(ht+pe,0),J[1]),Oe=Ct<2?this._field[sr].get(we,He):(this.intensity.get(we,He)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Oe)||isNaN(Oe)){ft=!0;break t}var Hr=tr*Cr;Sr[Ct]+=Hr*Oe}}}if(ft){if(ge>0){for(var zr=0;zr<5;++zr)Dt.pop();st-=1}continue e}Dt.push(Sr[0],Sr[1],$t[0],$t[1],Sr[2]),st+=1}}cr.push(st)}this._contourOffsets[Ft]=Pt,this._contourCounts[Ft]=cr}var Wr=o.mallocFloat(Dt.length);for(ue=0;ue<Dt.length;++ue)Wr[ue]=Dt[ue];this._contourBuffer.update(Wr),o.freeFloat(Wr)}},z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var V=0;V<3;++V)o.freeFloat(this._field[V].data)},z.highlight=function(V){var Y,ae;if(!V)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(Y=0;Y<3;++Y)this.enableHighlight[Y]?this.highlightLevel[Y]=V.level[Y]:this.highlightLevel[Y]=-1;for(ae=this.snapToData?V.dataCoordinate:V.position,Y=0;Y<3;++Y)ae[Y]-=this.objectOffset[Y];if(this.enableDynamic[0]&&ae[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ae[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ae[2]!==this.dynamicLevel[2]){for(var X=0,J=this.shape,ue=o.mallocFloat(12*J[0]*J[1]),re=0;re<3;++re)if(this.enableDynamic[re]){this.dynamicLevel[re]=ae[re];var ne=(re+1)%3,se=(re+2)%3,de=this._field[re],be=this._field[ne],De=this._field[se],_e=y(de,ae[re]),Ce=_e.cells,Le=_e.positions;for(this._dynamicOffsets[re]=X,Y=0;Y<Ce.length;++Y)for(var Fe=Ce[Y],ke=0;ke<2;++ke){var ze=Le[Fe[ke]],Pe=+ze[0],Ie=0|Pe,Qe=0|Math.min(Ie+1,J[0]),at=Pe-Ie,Be=1-at,Ne=+ze[1],nt=0|Ne,ct=0|Math.min(nt+1,J[1]),mt=Ne-nt,Bt=1-mt,Rt=Be*Bt,zt=Be*mt,St=at*Bt,Xt=at*mt,Mt=Rt*be.get(Ie,nt)+zt*be.get(Ie,ct)+St*be.get(Qe,nt)+Xt*be.get(Qe,ct),st=Rt*De.get(Ie,nt)+zt*De.get(Ie,ct)+St*De.get(Qe,nt)+Xt*De.get(Qe,ct);if(isNaN(Mt)||isNaN(st)){ke&&(X-=1);break}ue[2*X+0]=Mt,ue[2*X+1]=st,X+=1}this._dynamicCounts[re]=X-this._dynamicOffsets[re]}else this.dynamicLevel[re]=NaN,this._dynamicCounts[re]=0;this._dynamicBuffer.update(ue.subarray(0,2*X)),o.freeFloat(ue)}}},8931:function(t,T,n){"use strict";var i=n(5050),u=n(7498),a=n(5306);t.exports=c;var r=null,o=null,v=null;function p(S){r=[S.LINEAR,S.NEAREST_MIPMAP_LINEAR,S.LINEAR_MIPMAP_NEAREST,S.LINEAR_MIPMAP_NEAREST],o=[S.NEAREST,S.LINEAR,S.NEAREST_MIPMAP_NEAREST,S.NEAREST_MIPMAP_LINEAR,S.LINEAR_MIPMAP_NEAREST,S.LINEAR_MIPMAP_LINEAR],v=[S.REPEAT,S.CLAMP_TO_EDGE,S.MIRRORED_REPEAT]}function f(S){return typeof HTMLCanvasElement<"u"&&S instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&S instanceof HTMLVideoElement||typeof ImageData<"u"&&S instanceof ImageData}var l=function(S,w){u.muls(S,w,255)};function y(S,w,E){var P=S.gl,R=P.getParameter(P.MAX_TEXTURE_SIZE);if(w<0||w>R||E<0||E>R)throw new Error("gl-texture2d: Invalid texture size");return S._shape=[w,E],S.bind(),P.texImage2D(P.TEXTURE_2D,0,S.format,w,E,0,S.format,S.type,null),S._mipLevels=[0],S}function s(S,w,E,P,R,F){this.gl=S,this.handle=w,this.format=R,this.type=F,this._shape=[E,P],this._mipLevels=[0],this._magFilter=S.NEAREST,this._minFilter=S.NEAREST,this._wrapS=S.CLAMP_TO_EDGE,this._wrapT=S.CLAMP_TO_EDGE,this._anisoSamples=1;var _=this,z=[this._wrapS,this._wrapT];Object.defineProperties(z,[{get:function(){return _._wrapS},set:function(k){return _.wrapS=k}},{get:function(){return _._wrapT},set:function(k){return _.wrapT=k}}]),this._wrapVector=z;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return _._shape[0]},set:function(k){return _.width=k}},{get:function(){return _._shape[1]},set:function(k){return _.height=k}}]),this._shapeVector=D}var x=s.prototype;function h(S,w){return 3===S.length?1===w[2]&&w[1]===S[0]*S[2]&&w[0]===S[2]:1===w[0]&&w[1]===S[0]}function g(S,w,E,P,R,F,_,z){var D=z.dtype,k=z.shape.slice();if(k.length<2||k.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,U=0,H=h(k,z.stride.slice());if("float32"===D?O=S.FLOAT:"float64"===D?(O=S.FLOAT,H=!1,D="float32"):"uint8"===D?O=S.UNSIGNED_BYTE:(O=S.UNSIGNED_BYTE,H=!1,D="uint8"),2===k.length)U=S.LUMINANCE,k=[k[0],k[1],1],z=i(z.data,k,[z.stride[0],z.stride[1],1],z.offset);else{if(3!==k.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===k[2])U=S.ALPHA;else if(2===k[2])U=S.LUMINANCE_ALPHA;else if(3===k[2])U=S.RGB;else{if(4!==k[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");U=S.RGBA}k[2]}if((U===S.LUMINANCE||U===S.ALPHA)&&(R===S.LUMINANCE||R===S.ALPHA)&&(U=R),U!==R)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ee=z.size,W=_.indexOf(P)<0;if(W&&_.push(P),O===F&&H)0===z.offset&&z.data.length===ee?W?S.texImage2D(S.TEXTURE_2D,P,R,k[0],k[1],0,R,F,z.data):S.texSubImage2D(S.TEXTURE_2D,P,w,E,k[0],k[1],R,F,z.data):W?S.texImage2D(S.TEXTURE_2D,P,R,k[0],k[1],0,R,F,z.data.subarray(z.offset,z.offset+ee)):S.texSubImage2D(S.TEXTURE_2D,P,w,E,k[0],k[1],R,F,z.data.subarray(z.offset,z.offset+ee));else{var B;B=F===S.FLOAT?a.mallocFloat32(ee):a.mallocUint8(ee);var te=i(B,k,[k[2],k[2]*k[0],1]);O===S.FLOAT&&F===S.UNSIGNED_BYTE?l(te,z):u.assign(te,z),W?S.texImage2D(S.TEXTURE_2D,P,R,k[0],k[1],0,R,F,B.subarray(0,ee)):S.texSubImage2D(S.TEXTURE_2D,P,w,E,k[0],k[1],R,F,B.subarray(0,ee)),F===S.FLOAT?a.freeFloat32(B):a.freeUint8(B)}}function m(S){var w=S.createTexture();return S.bindTexture(S.TEXTURE_2D,w),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.NEAREST),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.NEAREST),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),w}function d(S,w,E,P,R){var F=S.getParameter(S.MAX_TEXTURE_SIZE);if(w<0||w>F||E<0||E>F)throw new Error("gl-texture2d: Invalid texture shape");if(R===S.FLOAT&&!S.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var _=m(S);return S.texImage2D(S.TEXTURE_2D,0,P,w,E,0,P,R,null),new s(S,_,w,E,P,R)}function A(S,w,E,P,R,F){var _=m(S);return S.texImage2D(S.TEXTURE_2D,0,R,R,F,w),new s(S,_,E,P,R,F)}function b(S,w){var E=w.dtype,P=w.shape.slice(),R=S.getParameter(S.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>R||P[1]<0||P[1]>R)throw new Error("gl-texture2d: Invalid texture size");var F=h(P,w.stride.slice()),_=0;"float32"===E?_=S.FLOAT:"float64"===E?(_=S.FLOAT,F=!1,E="float32"):"uint8"===E?_=S.UNSIGNED_BYTE:(_=S.UNSIGNED_BYTE,F=!1,E="uint8");var z=0;if(2===P.length)z=S.LUMINANCE,P=[P[0],P[1],1],w=i(w.data,P,[w.stride[0],w.stride[1],1],w.offset);else{if(3!==P.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===P[2])z=S.ALPHA;else if(2===P[2])z=S.LUMINANCE_ALPHA;else if(3===P[2])z=S.RGB;else{if(4!==P[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");z=S.RGBA}}_===S.FLOAT&&!S.getExtension("OES_texture_float")&&(_=S.UNSIGNED_BYTE,F=!1);var D,k,O=w.size;if(F)D=0===w.offset&&w.data.length===O?w.data:w.data.subarray(w.offset,w.offset+O);else{var U=[P[2],P[2]*P[0],1];k=a.malloc(O,E);var H=i(k,P,U,0);"float32"!==E&&"float64"!==E||_!==S.UNSIGNED_BYTE?u.assign(H,w):l(H,w),D=k.subarray(0,O)}var j=m(S);return S.texImage2D(S.TEXTURE_2D,0,z,P[0],P[1],0,z,_,D),F||a.free(k),new s(S,j,P[0],P[1],z,_)}function c(S){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||p(S),"number"==typeof arguments[1])return d(S,arguments[1],arguments[2],arguments[3]||S.RGBA,arguments[4]||S.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return d(S,0|arguments[1][0],0|arguments[1][1],arguments[2]||S.RGBA,arguments[3]||S.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var w=arguments[1],E=f(w)?w:w.raw;if(E)return A(S,E,0|w.width,0|w.height,arguments[2]||S.RGBA,arguments[3]||S.UNSIGNED_BYTE);if(w.shape&&w.data&&w.stride)return b(S,w)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}Object.defineProperties(x,{minFilter:{get:function(){return this._minFilter},set:function(S){this.bind();var w=this.gl;if(this.type===w.FLOAT&&r.indexOf(S)>=0&&(w.getExtension("OES_texture_float_linear")||(S=w.NEAREST)),o.indexOf(S)<0)throw new Error("gl-texture2d: Unknown filter mode "+S);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,S),this._minFilter=S}},magFilter:{get:function(){return this._magFilter},set:function(S){this.bind();var w=this.gl;if(this.type===w.FLOAT&&r.indexOf(S)>=0&&(w.getExtension("OES_texture_float_linear")||(S=w.NEAREST)),o.indexOf(S)<0)throw new Error("gl-texture2d: Unknown filter mode "+S);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,S),this._magFilter=S}},mipSamples:{get:function(){return this._anisoSamples},set:function(S){var w=this._anisoSamples;if(this._anisoSamples=0|Math.max(S,1),w!==this._anisoSamples){var E=this.gl.getExtension("EXT_texture_filter_anisotropic");E&&this.gl.texParameterf(this.gl.TEXTURE_2D,E.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(S){if(this.bind(),v.indexOf(S)<0)throw new Error("gl-texture2d: Unknown wrap mode "+S);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,S),this._wrapS=S}},wrapT:{get:function(){return this._wrapT},set:function(S){if(this.bind(),v.indexOf(S)<0)throw new Error("gl-texture2d: Unknown wrap mode "+S);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,S),this._wrapT=S}},wrap:{get:function(){return this._wrapVector},set:function(S){if(Array.isArray(S)||(S=[S,S]),2!==S.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var w=0;w<2;++w)if(v.indexOf(S[w])<0)throw new Error("gl-texture2d: Unknown wrap mode "+S);this._wrapS=S[0],this._wrapT=S[1];var E=this.gl;return this.bind(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this._wrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this._wrapT),S}},shape:{get:function(){return this._shapeVector},set:function(S){if(Array.isArray(S)){if(2!==S.length)throw new Error("gl-texture2d: Invalid texture shape")}else S=[0|S,0|S];return y(this,0|S[0],0|S[1]),[0|S[0],0|S[1]]}},width:{get:function(){return this._shape[0]},set:function(S){return y(this,S|=0,this._shape[1]),S}},height:{get:function(){return this._shape[1]},set:function(S){return S|=0,y(this,this._shape[0],S),S}}}),x.bind=function(S){var w=this.gl;return void 0!==S&&w.activeTexture(w.TEXTURE0+(0|S)),w.bindTexture(w.TEXTURE_2D,this.handle),void 0!==S?0|S:w.getParameter(w.ACTIVE_TEXTURE)-w.TEXTURE0},x.dispose=function(){this.gl.deleteTexture(this.handle)},x.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var S=Math.min(this._shape[0],this._shape[1]),w=0;S>0;++w,S>>>=1)this._mipLevels.indexOf(w)<0&&this._mipLevels.push(w)},x.setPixels=function(S,w,E,P){var R=this.gl;this.bind(),Array.isArray(w)?(P=E,E=0|w[1],w=0|w[0]):(w=w||0,E=E||0),P=P||0;var F=f(S)?S:S.raw;if(F)this._mipLevels.indexOf(P)<0?(R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,this.type,F),this._mipLevels.push(P)):R.texSubImage2D(R.TEXTURE_2D,P,w,E,this.format,this.type,F);else{if(!(S.shape&&S.stride&&S.data))throw new Error("gl-texture2d: Unsupported data type");if(S.shape.length<2||w+S.shape[1]>this._shape[1]>>>P||E+S.shape[0]>this._shape[0]>>>P||w<0||E<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");g(R,w,E,P,this.format,this.type,this._mipLevels,S)}}},3056:function(t){"use strict";function T(n,i,u){i?i.bind():n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);var a=0|n.getParameter(n.MAX_VERTEX_ATTRIBS);if(u){if(u.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<u.length;++r){var o=u[r];if(o.buffer){var v=o.buffer,p=o.size||4,f=o.type||n.FLOAT,l=!!o.normalized,y=o.stride||0,s=o.offset||0;v.bind(),n.enableVertexAttribArray(r),n.vertexAttribPointer(r,p,f,l,y,s)}else{if("number"==typeof o)n.vertexAttrib1f(r,o);else if(1===o.length)n.vertexAttrib1f(r,o[0]);else if(2===o.length)n.vertexAttrib2f(r,o[0],o[1]);else if(3===o.length)n.vertexAttrib3f(r,o[0],o[1],o[2]);else{if(4!==o.length)throw new Error("gl-vao: Invalid vertex attribute");n.vertexAttrib4f(r,o[0],o[1],o[2],o[3])}n.disableVertexAttribArray(r)}}for(;r<a;++r)n.disableVertexAttribArray(r)}else for(n.bindBuffer(n.ARRAY_BUFFER,null),r=0;r<a;++r)n.disableVertexAttribArray(r)}t.exports=T},7220:function(t,T,n){"use strict";var i=n(3056);function u(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}function a(r){return new u(r)}u.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},u.prototype.update=function(r,o,v){this._elements=o,this._attributes=r,this._elementsType=v||this.gl.UNSIGNED_SHORT},u.prototype.dispose=function(){},u.prototype.unbind=function(){},u.prototype.draw=function(r,o,v){v=v||0;var p=this.gl;this._elements?p.drawElements(r,o,this._elementsType,v):p.drawArrays(r,v,o)},t.exports=a},3778:function(t,T,n){"use strict";var i=n(3056);function u(o,v,p,f,l,y){this.location=o,this.dimension=v,this.a=p,this.b=f,this.c=l,this.d=y}function a(o,v,p){this.gl=o,this._ext=v,this.handle=p,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}function r(o,v){return new a(o,v,v.createVertexArrayOES())}u.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(o,v,p){if(this.bind(),i(this.gl,v,o),this.unbind(),this._attribs.length=0,o)for(var f=0;f<o.length;++f){var l=o[f];"number"==typeof l?this._attribs.push(new u(f,1,l)):Array.isArray(l)&&this._attribs.push(new u(f,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!v,this._elementsType=p||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(o,v,p){p=p||0;var f=this.gl;this._useElements?f.drawElements(o,v,this._elementsType,p):f.drawArrays(o,p,v)},t.exports=r},2944:function(t,T,n){"use strict";var i=n(3778),u=n(7220);function a(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}function r(o,v,p,f){var y,l=o.createVertexArray?new a(o):o.getExtension("OES_vertex_array_object");return(y=l?i(o,l):u(o)).update(v,p,f),y}t.exports=r},2598:function(t){function T(n,i,u){return n[0]=i[0]+u[0],n[1]=i[1]+u[1],n[2]=i[2]+u[2],n}t.exports=T},5879:function(t,T,n){t.exports=r;var i=n(5415),u=n(899),a=n(9305);function r(o,v){var p=i(o[0],o[1],o[2]),f=i(v[0],v[1],v[2]);u(p,p),u(f,f);var l=a(p,f);return l>1?0:Math.acos(l)}},8827:function(t){function T(n,i){return n[0]=Math.ceil(i[0]),n[1]=Math.ceil(i[1]),n[2]=Math.ceil(i[2]),n}t.exports=T},7622:function(t){function T(n){var i=new Float32Array(3);return i[0]=n[0],i[1]=n[1],i[2]=n[2],i}t.exports=T},8782:function(t){function T(n,i){return n[0]=i[0],n[1]=i[1],n[2]=i[2],n}t.exports=T},8501:function(t){function T(){var n=new Float32Array(3);return n[0]=0,n[1]=0,n[2]=0,n}t.exports=T},903:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2],v=u[0],p=u[1],f=u[2];return n[0]=r*f-o*p,n[1]=o*v-a*f,n[2]=a*p-r*v,n}t.exports=T},5981:function(t,T,n){t.exports=n(8288)},8288:function(t){function T(n,i){var u=i[0]-n[0],a=i[1]-n[1],r=i[2]-n[2];return Math.sqrt(u*u+a*a+r*r)}t.exports=T},8629:function(t,T,n){t.exports=n(7979)},7979:function(t){function T(n,i,u){return n[0]=i[0]/u[0],n[1]=i[1]/u[1],n[2]=i[2]/u[2],n}t.exports=T},9305:function(t){function T(n,i){return n[0]*i[0]+n[1]*i[1]+n[2]*i[2]}t.exports=T},154:function(t){t.exports=1e-6},4932:function(t,T,n){t.exports=u;var i=n(154);function u(a,r){var o=a[0],v=a[1],p=a[2],f=r[0],l=r[1],y=r[2];return Math.abs(o-f)<=i*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(v-l)<=i*Math.max(1,Math.abs(v),Math.abs(l))&&Math.abs(p-y)<=i*Math.max(1,Math.abs(p),Math.abs(y))}},5777:function(t){function T(n,i){return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]}t.exports=T},3306:function(t){function T(n,i){return n[0]=Math.floor(i[0]),n[1]=Math.floor(i[1]),n[2]=Math.floor(i[2]),n}t.exports=T},7447:function(t,T,n){t.exports=u;var i=n(8501)();function u(a,r,o,v,p,f){var l,y;for(r||(r=3),o||(o=0),y=v?Math.min(v*r+o,a.length):a.length,l=o;l<y;l+=r)i[0]=a[l],i[1]=a[l+1],i[2]=a[l+2],p(i,i,f),a[l]=i[0],a[l+1]=i[1],a[l+2]=i[2];return a}},5415:function(t){function T(n,i,u){var a=new Float32Array(3);return a[0]=n,a[1]=i,a[2]=u,a}t.exports=T},2858:function(t,T,n){t.exports={EPSILON:n(154),create:n(8501),clone:n(7622),angle:n(5879),fromValues:n(5415),copy:n(8782),set:n(831),equals:n(4932),exactEquals:n(5777),add:n(2598),subtract:n(911),sub:n(8921),multiply:n(105),mul:n(5733),divide:n(7979),div:n(8629),min:n(3605),max:n(1716),floor:n(3306),ceil:n(8827),round:n(1624),scale:n(5685),scaleAndAdd:n(6722),distance:n(8288),dist:n(5981),squaredDistance:n(6403),sqrDist:n(5294),length:n(4693),len:n(1468),squaredLength:n(4337),sqrLen:n(3303),negate:n(435),inverse:n(2073),normalize:n(899),dot:n(9305),cross:n(903),lerp:n(1868),random:n(6660),transformMat4:n(3255),transformMat3:n(9908),transformQuat:n(6568),rotateX:n(392),rotateY:n(3222),rotateZ:n(3388),forEach:n(7447)}},2073:function(t){function T(n,i){return n[0]=1/i[0],n[1]=1/i[1],n[2]=1/i[2],n}t.exports=T},1468:function(t,T,n){t.exports=n(4693)},4693:function(t){function T(n){var i=n[0],u=n[1],a=n[2];return Math.sqrt(i*i+u*u+a*a)}t.exports=T},1868:function(t){function T(n,i,u,a){var r=i[0],o=i[1],v=i[2];return n[0]=r+a*(u[0]-r),n[1]=o+a*(u[1]-o),n[2]=v+a*(u[2]-v),n}t.exports=T},1716:function(t){function T(n,i,u){return n[0]=Math.max(i[0],u[0]),n[1]=Math.max(i[1],u[1]),n[2]=Math.max(i[2],u[2]),n}t.exports=T},3605:function(t){function T(n,i,u){return n[0]=Math.min(i[0],u[0]),n[1]=Math.min(i[1],u[1]),n[2]=Math.min(i[2],u[2]),n}t.exports=T},5733:function(t,T,n){t.exports=n(105)},105:function(t){function T(n,i,u){return n[0]=i[0]*u[0],n[1]=i[1]*u[1],n[2]=i[2]*u[2],n}t.exports=T},435:function(t){function T(n,i){return n[0]=-i[0],n[1]=-i[1],n[2]=-i[2],n}t.exports=T},899:function(t){function T(n,i){var u=i[0],a=i[1],r=i[2],o=u*u+a*a+r*r;return o>0&&(o=1/Math.sqrt(o),n[0]=i[0]*o,n[1]=i[1]*o,n[2]=i[2]*o),n}t.exports=T},6660:function(t){function T(n,i){i=i||1;var u=2*Math.random()*Math.PI,a=2*Math.random()-1,r=Math.sqrt(1-a*a)*i;return n[0]=Math.cos(u)*r,n[1]=Math.sin(u)*r,n[2]=a*i,n}t.exports=T},392:function(t){function T(n,i,u,a){var r=u[1],o=u[2],v=i[1]-r,p=i[2]-o,f=Math.sin(a),l=Math.cos(a);return n[0]=i[0],n[1]=r+v*l-p*f,n[2]=o+v*f+p*l,n}t.exports=T},3222:function(t){function T(n,i,u,a){var r=u[0],o=u[2],v=i[0]-r,p=i[2]-o,f=Math.sin(a),l=Math.cos(a);return n[0]=r+p*f+v*l,n[1]=i[1],n[2]=o+p*l-v*f,n}t.exports=T},3388:function(t){function T(n,i,u,a){var r=u[0],o=u[1],v=i[0]-r,p=i[1]-o,f=Math.sin(a),l=Math.cos(a);return n[0]=r+v*l-p*f,n[1]=o+v*f+p*l,n[2]=i[2],n}t.exports=T},1624:function(t){function T(n,i){return n[0]=Math.round(i[0]),n[1]=Math.round(i[1]),n[2]=Math.round(i[2]),n}t.exports=T},5685:function(t){function T(n,i,u){return n[0]=i[0]*u,n[1]=i[1]*u,n[2]=i[2]*u,n}t.exports=T},6722:function(t){function T(n,i,u,a){return n[0]=i[0]+u[0]*a,n[1]=i[1]+u[1]*a,n[2]=i[2]+u[2]*a,n}t.exports=T},831:function(t){function T(n,i,u,a){return n[0]=i,n[1]=u,n[2]=a,n}t.exports=T},5294:function(t,T,n){t.exports=n(6403)},3303:function(t,T,n){t.exports=n(4337)},6403:function(t){function T(n,i){var u=i[0]-n[0],a=i[1]-n[1],r=i[2]-n[2];return u*u+a*a+r*r}t.exports=T},4337:function(t){function T(n){var i=n[0],u=n[1],a=n[2];return i*i+u*u+a*a}t.exports=T},8921:function(t,T,n){t.exports=n(911)},911:function(t){function T(n,i,u){return n[0]=i[0]-u[0],n[1]=i[1]-u[1],n[2]=i[2]-u[2],n}t.exports=T},9908:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2];return n[0]=a*u[0]+r*u[3]+o*u[6],n[1]=a*u[1]+r*u[4]+o*u[7],n[2]=a*u[2]+r*u[5]+o*u[8],n}t.exports=T},3255:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2],v=u[3]*a+u[7]*r+u[11]*o+u[15];return v=v||1,n[0]=(u[0]*a+u[4]*r+u[8]*o+u[12])/v,n[1]=(u[1]*a+u[5]*r+u[9]*o+u[13])/v,n[2]=(u[2]*a+u[6]*r+u[10]*o+u[14])/v,n}t.exports=T},6568:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2],v=u[0],p=u[1],f=u[2],l=u[3],y=l*a+p*o-f*r,s=l*r+f*a-v*o,x=l*o+v*r-p*a,h=-v*a-p*r-f*o;return n[0]=y*l+h*-v+s*-f-x*-p,n[1]=s*l+h*-p+x*-v-y*-f,n[2]=x*l+h*-f+y*-p-s*-v,n}t.exports=T},3433:function(t){function T(n,i,u){return n[0]=i[0]+u[0],n[1]=i[1]+u[1],n[2]=i[2]+u[2],n[3]=i[3]+u[3],n}t.exports=T},1413:function(t){function T(n){var i=new Float32Array(4);return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i}t.exports=T},3470:function(t){function T(n,i){return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n}t.exports=T},5313:function(t){function T(){var n=new Float32Array(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}t.exports=T},5446:function(t){function T(n,i){var u=i[0]-n[0],a=i[1]-n[1],r=i[2]-n[2],o=i[3]-n[3];return Math.sqrt(u*u+a*a+r*r+o*o)}t.exports=T},205:function(t){function T(n,i,u){return n[0]=i[0]/u[0],n[1]=i[1]/u[1],n[2]=i[2]/u[2],n[3]=i[3]/u[3],n}t.exports=T},4242:function(t){function T(n,i){return n[0]*i[0]+n[1]*i[1]+n[2]*i[2]+n[3]*i[3]}t.exports=T},5680:function(t){function T(n,i,u,a){var r=new Float32Array(4);return r[0]=n,r[1]=i,r[2]=u,r[3]=a,r}t.exports=T},4020:function(t,T,n){t.exports={create:n(5313),clone:n(1413),fromValues:n(5680),copy:n(3470),set:n(6453),add:n(3433),subtract:n(2705),multiply:n(746),divide:n(205),min:n(2170),max:n(3030),scale:n(5510),scaleAndAdd:n(4224),distance:n(5446),squaredDistance:n(1542),length:n(8177),squaredLength:n(9037),negate:n(6459),inverse:n(8057),normalize:n(381),dot:n(4242),lerp:n(8746),random:n(3770),transformMat4:n(6342),transformQuat:n(5022)}},8057:function(t){function T(n,i){return n[0]=1/i[0],n[1]=1/i[1],n[2]=1/i[2],n[3]=1/i[3],n}t.exports=T},8177:function(t){function T(n){var i=n[0],u=n[1],a=n[2],r=n[3];return Math.sqrt(i*i+u*u+a*a+r*r)}t.exports=T},8746:function(t){function T(n,i,u,a){var r=i[0],o=i[1],v=i[2],p=i[3];return n[0]=r+a*(u[0]-r),n[1]=o+a*(u[1]-o),n[2]=v+a*(u[2]-v),n[3]=p+a*(u[3]-p),n}t.exports=T},3030:function(t){function T(n,i,u){return n[0]=Math.max(i[0],u[0]),n[1]=Math.max(i[1],u[1]),n[2]=Math.max(i[2],u[2]),n[3]=Math.max(i[3],u[3]),n}t.exports=T},2170:function(t){function T(n,i,u){return n[0]=Math.min(i[0],u[0]),n[1]=Math.min(i[1],u[1]),n[2]=Math.min(i[2],u[2]),n[3]=Math.min(i[3],u[3]),n}t.exports=T},746:function(t){function T(n,i,u){return n[0]=i[0]*u[0],n[1]=i[1]*u[1],n[2]=i[2]*u[2],n[3]=i[3]*u[3],n}t.exports=T},6459:function(t){function T(n,i){return n[0]=-i[0],n[1]=-i[1],n[2]=-i[2],n[3]=-i[3],n}t.exports=T},381:function(t){function T(n,i){var u=i[0],a=i[1],r=i[2],o=i[3],v=u*u+a*a+r*r+o*o;return v>0&&(v=1/Math.sqrt(v),n[0]=u*v,n[1]=a*v,n[2]=r*v,n[3]=o*v),n}t.exports=T},3770:function(t,T,n){var i=n(381),u=n(5510);function a(r,o){return o=o||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),i(r,r),u(r,r,o),r}t.exports=a},5510:function(t){function T(n,i,u){return n[0]=i[0]*u,n[1]=i[1]*u,n[2]=i[2]*u,n[3]=i[3]*u,n}t.exports=T},4224:function(t){function T(n,i,u,a){return n[0]=i[0]+u[0]*a,n[1]=i[1]+u[1]*a,n[2]=i[2]+u[2]*a,n[3]=i[3]+u[3]*a,n}t.exports=T},6453:function(t){function T(n,i,u,a,r){return n[0]=i,n[1]=u,n[2]=a,n[3]=r,n}t.exports=T},1542:function(t){function T(n,i){var u=i[0]-n[0],a=i[1]-n[1],r=i[2]-n[2],o=i[3]-n[3];return u*u+a*a+r*r+o*o}t.exports=T},9037:function(t){function T(n){var i=n[0],u=n[1],a=n[2],r=n[3];return i*i+u*u+a*a+r*r}t.exports=T},2705:function(t){function T(n,i,u){return n[0]=i[0]-u[0],n[1]=i[1]-u[1],n[2]=i[2]-u[2],n[3]=i[3]-u[3],n}t.exports=T},6342:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2],v=i[3];return n[0]=u[0]*a+u[4]*r+u[8]*o+u[12]*v,n[1]=u[1]*a+u[5]*r+u[9]*o+u[13]*v,n[2]=u[2]*a+u[6]*r+u[10]*o+u[14]*v,n[3]=u[3]*a+u[7]*r+u[11]*o+u[15]*v,n}t.exports=T},5022:function(t){function T(n,i,u){var a=i[0],r=i[1],o=i[2],v=u[0],p=u[1],f=u[2],l=u[3],y=l*a+p*o-f*r,s=l*r+f*a-v*o,x=l*o+v*r-p*a,h=-v*a-p*r-f*o;return n[0]=y*l+h*-v+s*-f-x*-p,n[1]=s*l+h*-p+x*-v-y*-f,n[2]=x*l+h*-f+y*-p-s*-v,n[3]=i[3],n}t.exports=T},9365:function(t,T,n){var i=n(8096),u=n(7896);function a(r){for(var o=Array.isArray(r)?r:i(r),v=0;v<o.length;v++){var p=o[v];if("preprocessor"===p.type){var f=p.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(f&&f[2]){var l=f[1],y=f[2];return(l?u(y):y).trim()}}}}t.exports=a},3193:function(t,T,n){t.exports=w;var i=n(399),u=n(9746),a=n(9525),r=n(9458),o=n(3585),v=999,p=9999,f=0,l=1,y=2,s=3,x=4,h=5,g=6,m=7,d=8,A=9,b=10,c=11,S=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function w(E){var _,z,q,P=0,R=0,F=v,D=[],k=[],H=1,j=0,ee=0,W=!1,B=!1,te="",oe=a,ie=i;"300 es"===(E=E||{}).version&&(oe=o,ie=r);var V={},Y={};for(P=0;P<oe.length;P++)V[oe[P]]=!0;for(P=0;P<ie.length;P++)Y[ie[P]]=!0;return function(ke){return k=[],null!==ke?X(ke):J()};function ae(ke){ke.length&&k.push({type:S[F],data:ke,position:ee,line:H,column:j})}function X(ke){P=0,ke.toString&&(ke=ke.toString()),te+=ke.replace(/\r\n/g,"\n"),q=te.length;for(var ze;_=te[P],P<q;){switch(ze=P,F){case f:P=de();break;case l:P=se();break;case y:P=ne();break;case s:P=be();break;case x:P=Ce();break;case c:P=_e();break;case h:P=Le();break;case p:P=Fe();break;case A:P=re();break;case v:P=ue()}ze!==P&&("\n"===te[ze]?(j=0,++H):++j)}return R+=P,te=te.slice(P),k}function J(ke){return D.length&&ae(D.join("")),F=b,ae("(eof)"),k}function ue(){return D=D.length?[]:D,"/"===z&&"*"===_?(ee=R+P-1,F=f,z=_,P+1):"/"===z&&"/"===_?(ee=R+P-1,F=l,z=_,P+1):"#"===_?(F=y,ee=R+P,P):/\s/.test(_)?(F=A,ee=R+P,P):(W=/\d/.test(_),B=/[^\w_]/.test(_),ee=R+P,F=W?x:B?s:p,P)}function re(){return/[^\s]/g.test(_)?(ae(D.join("")),F=v,P):(D.push(_),z=_,P+1)}function ne(){return"\r"!==_&&"\n"!==_||"\\"===z?(D.push(_),z=_,P+1):(ae(D.join("")),F=v,P)}function se(){return ne()}function de(){return"/"===_&&"*"===z?(D.push(_),ae(D.join("")),F=v,P+1):(D.push(_),z=_,P+1)}function be(){if("."===z&&/\d/.test(_))return F=h,P;if("/"===z&&"*"===_)return F=f,P;if("/"===z&&"/"===_)return F=l,P;if("."===_&&D.length){for(;De(D););return F=h,P}if(";"===_||")"===_||"("===_){if(D.length)for(;De(D););return ae(_),F=v,P+1}var ke=2===D.length&&"="!==_;if(/[\w_\d\s]/.test(_)||ke){for(;De(D););return F=v,P}return D.push(_),z=_,P+1}function De(ke){for(var Pe,Ie,ze=0;;){if(Pe=u.indexOf(ke.slice(0,ke.length+ze).join("")),Ie=u[Pe],-1===Pe){if(ze--+ke.length>0)continue;Ie=ke.slice(0,1).join("")}return ae(Ie),ee+=Ie.length,(D=D.slice(Ie.length)).length}}function _e(){return/[^a-fA-F0-9]/.test(_)?(ae(D.join("")),F=v,P):(D.push(_),z=_,P+1)}function Ce(){return"."===_||/[eE]/.test(_)?(D.push(_),F=h,z=_,P+1):"x"===_&&1===D.length&&"0"===D[0]?(F=c,D.push(_),z=_,P+1):/[^\d]/.test(_)?(ae(D.join("")),F=v,P):(D.push(_),z=_,P+1)}function Le(){return"f"===_&&(D.push(_),z=_,P+=1),/[eE]/.test(_)||("-"===_||"+"===_)&&/[eE]/.test(z)?(D.push(_),z=_,P+1):/[^\d]/.test(_)?(ae(D.join("")),F=v,P):(D.push(_),z=_,P+1)}function Fe(){if(/[^\d\w_]/.test(_)){var ke=D.join("");return F=Y[ke]?d:V[ke]?m:g,ae(D.join("")),F=v,P}return D.push(_),z=_,P+1}}},3585:function(t,T,n){var i=n(9525);i=i.slice().filter(function(u){return!/^(gl\_|texture)/.test(u)}),t.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(t){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(t,T,n){var i=n(399);t.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(t){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(t){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(t,T,n){var i=n(3193);function u(a,r){var o=i(r),v=[];return v=(v=v.concat(o(a))).concat(o(null))}t.exports=u},6832:function(t){t.exports=function(T){"string"==typeof T&&(T=[T]);for(var n=[].slice.call(arguments,1),i=[],u=0;u<T.length-1;u++)i.push(T[u],n[u]||"");return i.push(T[u]),i.join("")}},5233:function(t,T,n){"use strict";var i=n(4846);function u(){var a=!1;try{var r=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{a=!1}return a}t.exports=i&&u()},2183:function(t,T,n){"use strict";t.exports=s;var i=n(417),u=n(8211).H;function a(x,h,g){this.vertices=x,this.adjacent=h,this.boundary=g,this.lastVisited=-1}function r(x,h,g){this.vertices=x,this.cell=h,this.index=g}function o(x,h){return u(x.vertices,h.vertices)}function v(x){return function(){var h=this.tuple;return x.apply(this,h)}}function p(x){var h=i[x+1];return h||(h=i),v(h)}a.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var h=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=h};var f=[];function l(x,h,g){this.dimension=x,this.vertices=h,this.simplices=g,this.interior=g.filter(function(A){return!A.boundary}),this.tuple=new Array(x+1);for(var m=0;m<=x;++m)this.tuple[m]=this.vertices[m];var d=f[x];d||(d=f[x]=p(x)),this.orient=d}var y=l.prototype;function s(x,h){var g=x.length;if(0===g)throw new Error("Must have at least d+1 points");var m=x[0].length;if(g<=m)throw new Error("Must input at least d+1 points");var d=x.slice(0,m+1),A=i.apply(void 0,d);if(0===A)throw new Error("Input not in general position");for(var b=new Array(m+1),c=0;c<=m;++c)b[c]=c;A<0&&(b[0]=1,b[1]=0);var S=new a(b,new Array(m+1),!1),w=S.adjacent,E=new Array(m+2);for(c=0;c<=m;++c){for(var P=b.slice(),R=0;R<=m;++R)R===c&&(P[R]=-1);var F=P[0];P[0]=P[1],P[1]=F;var _=new a(P,new Array(m+1),!0);w[c]=_,E[c]=_}for(E[m+1]=S,c=0;c<=m;++c){P=w[c].vertices;var z=w[c].adjacent;for(R=0;R<=m;++R){var D=P[R];if(D<0)z[R]=S;else for(var k=0;k<=m;++k)w[k].vertices.indexOf(D)<0&&(z[R]=w[k])}}var O=new l(m,d,E),U=!!h;for(c=m+1;c<g;++c)O.insert(x[c],U);return O.boundary()}y.handleBoundaryDegeneracy=function(x,h){var g=this.dimension,m=this.vertices.length-1,d=this.tuple,A=this.vertices,b=[x];for(x.lastVisited=-m;b.length>0;)for(var c=(x=b.pop()).adjacent,S=0;S<=g;++S){var w=c[S];if(w.boundary&&!(w.lastVisited<=-m)){for(var E=w.vertices,P=0;P<=g;++P){var R=E[P];d[P]=R<0?h:A[R]}var F=this.orient();if(F>0)return w;w.lastVisited=-m,0===F&&b.push(w)}}return null},y.walk=function(x,h){var g=this.vertices.length-1,m=this.dimension,d=this.vertices,A=this.tuple,b=h?this.interior.length*Math.random()|0:this.interior.length-1,c=this.interior[b];e:for(;!c.boundary;){for(var S=c.vertices,w=c.adjacent,E=0;E<=m;++E)A[E]=d[S[E]];for(c.lastVisited=g,E=0;E<=m;++E){var P=w[E];if(!(P.lastVisited>=g)){var R=A[E];A[E]=x;var F=this.orient();if(A[E]=R,F<0){c=P;continue e}P.boundary?P.lastVisited=-g:P.lastVisited=g}}return}return c},y.addPeaks=function(x,h){var g=this.vertices.length-1,m=this.dimension,d=this.vertices,A=this.tuple,b=this.interior,c=this.simplices,S=[h];h.lastVisited=g,h.vertices[h.vertices.indexOf(-1)]=g,h.boundary=!1,b.push(h);for(var w=[];S.length>0;){var E=(h=S.pop()).vertices,P=h.adjacent,R=E.indexOf(g);if(!(R<0))for(var F=0;F<=m;++F)if(F!==R){var _=P[F];if(_.boundary&&!(_.lastVisited>=g)){var z=_.vertices;if(_.lastVisited!==-g){for(var D=0,k=0;k<=m;++k)z[k]<0?(D=k,A[k]=x):A[k]=d[z[k]];if(this.orient()>0){z[D]=g,_.boundary=!1,b.push(_),S.push(_),_.lastVisited=g;continue}_.lastVisited=-g}var U=_.adjacent,H=E.slice(),j=P.slice(),ee=new a(H,j,!0);c.push(ee);var W=U.indexOf(h);if(!(W<0))for(U[W]=ee,j[R]=_,H[F]=-1,j[F]=h,P[F]=ee,ee.flip(),k=0;k<=m;++k){var B=H[k];if(!(B<0||B===g)){for(var te=new Array(m-1),q=0,oe=0;oe<=m;++oe){var ie=H[oe];ie<0||oe===k||(te[q++]=ie)}w.push(new r(te,ee,k))}}}}}for(w.sort(o),F=0;F+1<w.length;F+=2){var V=w[F],Y=w[F+1],ae=V.index,X=Y.index;ae<0||X<0||(V.cell.adjacent[V.index]=Y.cell,Y.cell.adjacent[Y.index]=V.cell)}},y.insert=function(x,h){var g=this.vertices;g.push(x);var m=this.walk(x,h);if(m){for(var d=this.dimension,A=this.tuple,b=0;b<=d;++b){var c=m.vertices[b];A[b]=c<0?x:g[c]}var S=this.orient(A);S<0||0===S&&!(m=this.handleBoundaryDegeneracy(m,x))||this.addPeaks(x,m)}},y.boundary=function(){for(var x=this.dimension,h=[],g=this.simplices,m=g.length,d=0;d<m;++d){var A=g[d];if(A.boundary){for(var b=new Array(x),c=A.vertices,S=0,w=0,E=0;E<=x;++E)c[E]>=0?b[S++]=c[E]:w=1&E;if(w===(1&x)){var P=b[0];b[0]=b[1],b[1]=P}h.push(b)}}return h}},9014:function(t,T,n){"use strict";var i=n(5070),u=0,a=1,r=2;function o(w,E,P,R,F){this.mid=w,this.left=E,this.right=P,this.leftPoints=R,this.rightPoints=F,this.count=(E?E.count:0)+(P?P.count:0)+R.length}t.exports=S;var v=o.prototype;function p(w,E){w.mid=E.mid,w.left=E.left,w.right=E.right,w.leftPoints=E.leftPoints,w.rightPoints=E.rightPoints,w.count=E.count}function f(w,E){var P=A(E);w.mid=P.mid,w.left=P.left,w.right=P.right,w.leftPoints=P.leftPoints,w.rightPoints=P.rightPoints,w.count=P.count}function l(w,E){var P=w.intervals([]);P.push(E),f(w,P)}function y(w,E){var P=w.intervals([]),R=P.indexOf(E);return R<0?u:(P.splice(R,1),f(w,P),a)}function s(w,E,P){for(var R=0;R<w.length&&w[R][0]<=E;++R){var F=P(w[R]);if(F)return F}}function x(w,E,P){for(var R=w.length-1;R>=0&&w[R][1]>=E;--R){var F=P(w[R]);if(F)return F}}function h(w,E){for(var P=0;P<w.length;++P){var R=E(w[P]);if(R)return R}}function g(w,E){return w-E}function m(w,E){return w[0]-E[0]||w[1]-E[1]}function d(w,E){return w[1]-E[1]||w[0]-E[0]}function A(w){if(0===w.length)return null;for(var E=[],P=0;P<w.length;++P)E.push(w[P][0],w[P][1]);E.sort(g);var R=E[E.length>>1],F=[],_=[],z=[];for(P=0;P<w.length;++P){var D=w[P];D[1]<R?F.push(D):R<D[0]?_.push(D):z.push(D)}var k=z,O=z.slice();return k.sort(m),O.sort(d),new o(R,A(F),A(_),k,O)}function b(w){this.root=w}v.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},v.insert=function(w){var E=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(E+1)?l(this,w):this.left.insert(w):this.left=A([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(E+1)?l(this,w):this.right.insert(w):this.right=A([w]);else{var P=i.ge(this.leftPoints,w,m),R=i.ge(this.rightPoints,w,d);this.leftPoints.splice(P,0,w),this.rightPoints.splice(R,0,w)}},v.remove=function(w){var E=this.count-this.leftPoints;if(w[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(E-1)?y(this,w):(R=this.left.remove(w))===r?(this.left=null,this.count-=1,a):(R===a&&(this.count-=1),R):u;if(w[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(E-1)?y(this,w):(R=this.right.remove(w))===r?(this.right=null,this.count-=1,a):(R===a&&(this.count-=1),R):u;if(1===this.count)return this.leftPoints[0]===w?r:u;if(1===this.leftPoints.length&&this.leftPoints[0]===w){if(this.left&&this.right){for(var _=this,z=this.left;z.right;)_=z,z=z.right;if(_===this)z.right=this.right;else{var D=this.left,R=this.right;_.count-=z.count,_.right=z.left,z.left=D,z.right=R}p(this,z),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?p(this,this.left):p(this,this.right);return a}for(D=i.ge(this.leftPoints,w,m);D<this.leftPoints.length&&this.leftPoints[D][0]===w[0];++D)if(this.leftPoints[D]===w)for(this.count-=1,this.leftPoints.splice(D,1),R=i.ge(this.rightPoints,w,d);R<this.rightPoints.length&&this.rightPoints[R][1]===w[1];++R)if(this.rightPoints[R]===w)return this.rightPoints.splice(R,1),a;return u},v.queryPoint=function(w,E){return w<this.mid?this.left&&(P=this.left.queryPoint(w,E))?P:s(this.leftPoints,w,E):w>this.mid?this.right&&(P=this.right.queryPoint(w,E))?P:x(this.rightPoints,w,E):h(this.leftPoints,E);var P},v.queryInterval=function(w,E,P){var R;return w<this.mid&&this.left&&(R=this.left.queryInterval(w,E,P))||E>this.mid&&this.right&&(R=this.right.queryInterval(w,E,P))?R:E<this.mid?s(this.leftPoints,E,P):w>this.mid?x(this.rightPoints,w,P):h(this.leftPoints,P)};var c=b.prototype;function S(w){return w&&0!==w.length?new b(A(w)):new b(null)}c.insert=function(w){this.root?this.root.insert(w):this.root=new o(w[0],null,null,[w],[w])},c.remove=function(w){if(this.root){var E=this.root.remove(w);return E===r&&(this.root=null),E!==u}return!1},c.queryPoint=function(w,E){if(this.root)return this.root.queryPoint(w,E)},c.queryInterval=function(w,E,P){if(w<=E&&this.root)return this.root.queryInterval(w,E,P)},Object.defineProperty(c,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(c,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(t){"use strict";function T(n){for(var i=new Array(n),u=0;u<n;++u)i[u]=u;return i}t.exports=T},4846:function(t){t.exports=!0},4780:function(t){function T(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}function n(i){return"function"==typeof i.readFloatLE&&"function"==typeof i.slice&&T(i.slice(0,0))}t.exports=function(i){return null!=i&&(T(i)||n(i)||!!i._isBuffer)}},3596:function(t){"use strict";t.exports=function(T){for(var i,n=T.length,u=0;u<n;u++)if(((i=T.charCodeAt(u))<9||i>13)&&32!==i&&133!==i&&160!==i&&5760!==i&&6158!==i&&(i<8192||i>8205)&&8232!==i&&8233!==i&&8239!==i&&8287!==i&&8288!==i&&12288!==i&&65279!==i)return!1;return!0}},3578:function(t){function T(n,i,u){return n*(1-u)+i*u}t.exports=T},7191:function(t,T,n){var i=n(4690),u=n(9823),a=n(7332),r=n(7787),o=n(7437),v=n(2142),p={length:n(4693),normalize:n(899),dot:n(9305),cross:n(903)},f=u(),l=u(),y=[0,0,0,0],s=[[0,0,0],[0,0,0],[0,0,0]],x=[0,0,0];function h(d,A,b){var c=A[0],S=A[1],w=A[2],E=A[3];return d[0]=b[0]*c+b[4]*S+b[8]*w+b[12]*E,d[1]=b[1]*c+b[5]*S+b[9]*w+b[13]*E,d[2]=b[2]*c+b[6]*S+b[10]*w+b[14]*E,d[3]=b[3]*c+b[7]*S+b[11]*w+b[15]*E,d}function g(d,A){d[0][0]=A[0],d[0][1]=A[1],d[0][2]=A[2],d[1][0]=A[4],d[1][1]=A[5],d[1][2]=A[6],d[2][0]=A[8],d[2][1]=A[9],d[2][2]=A[10]}function m(d,A,b,c,S){d[0]=A[0]*c+b[0]*S,d[1]=A[1]*c+b[1]*S,d[2]=A[2]*c+b[2]*S}t.exports=function(A,b,c,S,w,E){if(b||(b=[0,0,0]),c||(c=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(f,A)||(a(l,f),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(r(l)<1e-8)))return!1;var P=f[3],R=f[7],F=f[11],_=f[12],z=f[13],D=f[14],k=f[15];if(0!==P||0!==R||0!==F){if(y[0]=P,y[1]=R,y[2]=F,y[3]=k,!o(l,l))return!1;v(l,l),h(w,y,l)}else w[0]=w[1]=w[2]=0,w[3]=1;if(b[0]=_,b[1]=z,b[2]=D,g(s,f),c[0]=p.length(s[0]),p.normalize(s[0],s[0]),S[0]=p.dot(s[0],s[1]),m(s[1],s[1],s[0],1,-S[0]),c[1]=p.length(s[1]),p.normalize(s[1],s[1]),S[0]/=c[1],S[1]=p.dot(s[0],s[2]),m(s[2],s[2],s[0],1,-S[1]),S[2]=p.dot(s[1],s[2]),m(s[2],s[2],s[1],1,-S[2]),c[2]=p.length(s[2]),p.normalize(s[2],s[2]),S[1]/=c[2],S[2]/=c[2],p.cross(x,s[1],s[2]),p.dot(s[0],x)<0)for(var U=0;U<3;U++)c[U]*=-1,s[U][0]*=-1,s[U][1]*=-1,s[U][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+s[0][0]-s[1][1]-s[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-s[0][0]+s[1][1]-s[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-s[0][0]-s[1][1]+s[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+s[0][0]+s[1][1]+s[2][2],0)),s[2][1]>s[1][2]&&(E[0]=-E[0]),s[0][2]>s[2][0]&&(E[1]=-E[1]),s[1][0]>s[0][1]&&(E[2]=-E[2]),!0}},4690:function(t){t.exports=function(n,i){var u=i[15];if(0===u)return!1;for(var a=1/u,r=0;r<16;r++)n[r]=i[r]*a;return!0}},7649:function(t,T,n){var i=n(1868),u=n(1102),a=n(7191),r=n(7787),o=n(1116),v=y(),p=y(),f=y();function l(h,g,m,d){if(0===r(g)||0===r(m))return!1;var A=a(g,v.translate,v.scale,v.skew,v.perspective,v.quaternion),b=a(m,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!(!A||!b||(i(f.translate,v.translate,p.translate,d),i(f.skew,v.skew,p.skew,d),i(f.scale,v.scale,p.scale,d),i(f.perspective,v.perspective,p.perspective,d),o(f.quaternion,v.quaternion,p.quaternion,d),u(h,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}function y(){return{translate:s(),scale:s(1),skew:s(),perspective:x(),quaternion:x()}}function s(h){return[h||0,h||0,h||0]}function x(){return[0,0,0,1]}t.exports=l},1102:function(t,T,n){var i={identity:n(9947),translate:n(998),multiply:n(104),create:n(9823),scale:n(3668),fromRotationTranslation:n(7280)},a=(i.create(),i.create());t.exports=function(o,v,p,f,l,y){return i.identity(o),i.fromRotationTranslation(o,y,v),o[3]=l[0],o[7]=l[1],o[11]=l[2],o[15]=l[3],i.identity(a),0!==f[2]&&(a[9]=f[2],i.multiply(o,o,a)),0!==f[1]&&(a[9]=0,a[8]=f[1],i.multiply(o,o,a)),0!==f[0]&&(a[8]=0,a[4]=f[0],i.multiply(o,o,a)),i.scale(o,o,p),o}},9298:function(t,T,n){"use strict";var i=n(5070),u=n(7649),a=n(7437),r=n(6109),o=n(7115),v=n(5240),p=n(3012),f=n(998),y=(n(3668),n(899)),s=[0,0,0];function x(d){this._components=d.slice(),this._time=[0],this.prevMatrix=d.slice(),this.nextMatrix=d.slice(),this.computedMatrix=d.slice(),this.computedInverse=d.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=m;var h=x.prototype;h.recalcMatrix=function(d){var A=this._time,b=i.le(A,d),c=this.computedMatrix;if(!(b<0)){var S=this._components;if(b===A.length-1)for(var w=16*b,E=0;E<16;++E)c[E]=S[w++];else{var P=A[b+1]-A[b],R=(w=16*b,this.prevMatrix),F=!0;for(E=0;E<16;++E)R[E]=S[w++];var _=this.nextMatrix;for(E=0;E<16;++E)_[E]=S[w++],F=F&&R[E]===_[E];if(P<1e-6||F)for(E=0;E<16;++E)c[E]=R[E];else u(c,R,_,(d-A[b])/P)}var z=this.computedUp;z[0]=c[1],z[1]=c[5],z[2]=c[9],y(z,z);var D=this.computedInverse;a(D,c);var k=this.computedEye,O=D[15];k[0]=D[12]/O,k[1]=D[13]/O,k[2]=D[14]/O;var U=this.computedCenter,H=Math.exp(this.computedRadius[0]);for(E=0;E<3;++E)U[E]=k[E]-c[2+4*E]*H}},h.idle=function(d){if(!(d<this.lastT())){for(var A=this._components,b=A.length-16,c=0;c<16;++c)A.push(A[b++]);this._time.push(d)}},h.flush=function(d){var A=i.gt(this._time,d)-2;A<0||(this._time.splice(0,A),this._components.splice(0,16*A))},h.lastT=function(){return this._time[this._time.length-1]},h.lookAt=function(d,A,b,c){this.recalcMatrix(d),A=A||this.computedEye,b=b||s,c=c||this.computedUp,this.setMatrix(d,p(this.computedMatrix,A,b,c));for(var S=0,w=0;w<3;++w)S+=Math.pow(b[w]-A[w],2);S=Math.log(Math.sqrt(S)),this.computedRadius[0]=S},h.rotate=function(d,A,b,c){this.recalcMatrix(d);var S=this.computedInverse;A&&o(S,S,A),b&&r(S,S,b),c&&v(S,S,c),this.setMatrix(d,a(this.computedMatrix,S))};var g=[0,0,0];function m(d){return new x((d=d||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}h.pan=function(d,A,b,c){g[0]=-(A||0),g[1]=-(b||0),g[2]=-(c||0),this.recalcMatrix(d);var S=this.computedInverse;f(S,S,g),this.setMatrix(d,a(S,S))},h.translate=function(d,A,b,c){g[0]=A||0,g[1]=b||0,g[2]=c||0,this.recalcMatrix(d);var S=this.computedMatrix;f(S,S,g),this.setMatrix(d,S)},h.setMatrix=function(d,A){if(!(d<this.lastT())){this._time.push(d);for(var b=0;b<16;++b)this._components.push(A[b])}},h.setDistance=function(d,A){this.computedRadius[0]=A},h.setDistanceLimits=function(d,A){var b=this._limits;b[0]=d,b[1]=A},h.getDistanceLimits=function(d){var A=this._limits;return d?(d[0]=A[0],d[1]=A[1],d):A}},3266:function(t,T,n){"use strict";t.exports=u;var i=n(417)[3];function u(a){var r=a.length;if(r<3){for(var x=new Array(r),o=0;o<r;++o)x[o]=o;return 2===r&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:x}var v=new Array(r);for(o=0;o<r;++o)v[o]=o;v.sort(function(d,A){return a[d][0]-a[A][0]||a[d][1]-a[A][1]});var p=[v[0],v[1]],f=[v[0],v[1]];for(o=2;o<r;++o){for(var l=v[o],y=a[l],s=p.length;s>1&&i(a[p[s-2]],a[p[s-1]],y)<=0;)s-=1,p.pop();for(p.push(l),s=f.length;s>1&&i(a[f[s-2]],a[f[s-1]],y)>=0;)s-=1,f.pop();f.push(l)}x=new Array(f.length+p.length-2);for(var h=0,g=(o=0,p.length);o<g;++o)x[h++]=p[o];for(var m=f.length-2;m>0;--m)x[h++]=f[m];return x}},6145:function(t,T,n){"use strict";t.exports=u;var i=n(4110);function u(a,r){r||(r=a,a=window);var o=0,v=0,p=0,f={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function y(w){var E=!1;return"altKey"in w&&(E=E||w.altKey!==f.alt,f.alt=!!w.altKey),"shiftKey"in w&&(E=E||w.shiftKey!==f.shift,f.shift=!!w.shiftKey),"ctrlKey"in w&&(E=E||w.ctrlKey!==f.control,f.control=!!w.ctrlKey),"metaKey"in w&&(E=E||w.metaKey!==f.meta,f.meta=!!w.metaKey),E}function s(w,E){var P=i.x(E),R=i.y(E);"buttons"in E&&(w=0|E.buttons),(w!==o||P!==v||R!==p||y(E))&&(o=0|w,v=P||0,p=R||0,r&&r(o,v,p,f))}function x(w){s(0,w)}function h(){(o||v||p||f.shift||f.alt||f.meta||f.control)&&(v=p=0,o=0,f.shift=f.alt=f.control=f.meta=!1,r&&r(0,0,0,f))}function g(w){y(w)&&r&&r(o,v,p,f)}function m(w){0===i.buttons(w)?s(0,w):s(o,w)}function d(w){s(o|i.buttons(w),w)}function A(w){s(o&~i.buttons(w),w)}function b(){l||(l=!0,a.addEventListener("mousemove",m),a.addEventListener("mousedown",d),a.addEventListener("mouseup",A),a.addEventListener("mouseleave",x),a.addEventListener("mouseenter",x),a.addEventListener("mouseout",x),a.addEventListener("mouseover",x),a.addEventListener("blur",h),a.addEventListener("keyup",g),a.addEventListener("keydown",g),a.addEventListener("keypress",g),a!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function c(){l&&(l=!1,a.removeEventListener("mousemove",m),a.removeEventListener("mousedown",d),a.removeEventListener("mouseup",A),a.removeEventListener("mouseleave",x),a.removeEventListener("mouseenter",x),a.removeEventListener("mouseout",x),a.removeEventListener("mouseover",x),a.removeEventListener("blur",h),a.removeEventListener("keyup",g),a.removeEventListener("keydown",g),a.removeEventListener("keypress",g),a!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}b();var S={element:a};return Object.defineProperties(S,{enabled:{get:function(){return l},set:function(w){w?b():c()},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return f},enumerable:!0}}),S}},2565:function(t){var T={left:0,top:0};function n(u,a,r){a=a||u.currentTarget||u.srcElement,Array.isArray(r)||(r=[0,0]);var o=u.clientX||0,v=u.clientY||0,p=i(a);return r[0]=o-p.left,r[1]=v-p.top,r}function i(u){return u===window||u===document||u===document.body?T:u.getBoundingClientRect()}t.exports=n},4110:function(t,T){"use strict";function n(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(o=r.which))return 4;if(3===o)return 2;if(o>0)return 1<<o-1}else if("button"in r){var o;if(1===(o=r.button))return 4;if(2===o)return 2;if(o>=0)return 1<<o}}return 0}function i(r){return r.target||r.srcElement||window}function u(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var v=i(r).getBoundingClientRect();return r.clientX-v.left}return 0}function a(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var v=i(r).getBoundingClientRect();return r.clientY-v.top}return 0}T.buttons=n,T.element=i,T.x=u,T.y=a},6475:function(t,T,n){"use strict";var i=n(14);function u(a,r,o){"function"==typeof a&&(o=!!r,r=a,a=window);var v=i("ex",a),p=function(f){o&&f.preventDefault();var l=f.deltaX||0,y=f.deltaY||0,s=f.deltaZ||0,h=1;switch(f.deltaMode){case 1:h=v;break;case 2:h=window.innerHeight}if(y*=h,s*=h,(l*=h)||y||s)return r(l,y,s,f)};return a.addEventListener("wheel",p),p}t.exports=u},9284:function(t,T,n){"use strict";var i=n(5306);t.exports=r;var u={"false,0,1":function(v,p,f,l,y){return function(x,h,g,m){var P,d=0|x.shape[0],A=0|x.shape[1],b=x.data,c=0|x.offset,S=0|x.stride[0],w=0|x.stride[1],E=c,R=0|-S,F=0,_=0|-w,z=0,D=-S-w|0,k=0,O=0|S,U=w-S*d|0,H=0,j=0,ee=0,W=2*d|0,B=l(W),te=l(W),q=0,oe=0,ie=-1,V=-1,Y=0,ae=0|-d,X=0|d,J=0,ue=-d-1|0,re=d-1|0,ne=0,se=0,de=0;for(H=0;H<d;++H)B[q++]=f(b[E],h,g,m),E+=O;if(E+=U,A>0){if(j=1,B[q++]=f(b[E],h,g,m),E+=O,d>0)for(H=1,P=b[E],oe=B[q]=f(P,h,g,m),Y=B[q+ie],J=B[q+ae],ne=B[q+ue],(oe!==Y||oe!==J||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,Y,J,ne,h,g,m),se=te[q]=ee++),q+=1,E+=O,H=2;H<d;++H)P=b[E],oe=B[q]=f(P,h,g,m),Y=B[q+ie],J=B[q+ae],ne=B[q+ue],(oe!==Y||oe!==J||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,Y,J,ne,h,g,m),se=te[q]=ee++,ne!==Y&&p(te[q+ie],se,k,F,ne,Y,h,g,m)),q+=1,E+=O;for(E+=U,q=0,de=ie,ie=V,V=de,de=ae,ae=X,X=de,de=ue,ue=re,re=de,j=2;j<A;++j){if(B[q++]=f(b[E],h,g,m),E+=O,d>0)for(H=1,P=b[E],oe=B[q]=f(P,h,g,m),Y=B[q+ie],J=B[q+ae],ne=B[q+ue],(oe!==Y||oe!==J||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,Y,J,ne,h,g,m),se=te[q]=ee++,ne!==J&&p(te[q+ae],se,z,k,J,ne,h,g,m)),q+=1,E+=O,H=2;H<d;++H)P=b[E],oe=B[q]=f(P,h,g,m),Y=B[q+ie],J=B[q+ae],ne=B[q+ue],(oe!==Y||oe!==J||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,Y,J,ne,h,g,m),se=te[q]=ee++,ne!==J&&p(te[q+ae],se,z,k,J,ne,h,g,m),ne!==Y&&p(te[q+ie],se,k,F,ne,Y,h,g,m)),q+=1,E+=O;1&j&&(q=0),de=ie,ie=V,V=de,de=ae,ae=X,X=de,de=ue,ue=re,re=de,E+=U}}y(te),y(B)}},"false,1,0":function(v,p,f,l,y){return function(x,h,g,m){var P,d=0|x.shape[0],A=0|x.shape[1],b=x.data,c=0|x.offset,S=0|x.stride[0],w=0|x.stride[1],E=c,R=0|-S,F=0,_=0|-w,z=0,D=-S-w|0,k=0,O=0|w,U=S-w*A|0,H=0,j=0,ee=0,W=2*A|0,B=l(W),te=l(W),q=0,oe=0,ie=-1,V=-1,Y=0,ae=0|-A,X=0|A,J=0,ue=-A-1|0,re=A-1|0,ne=0,se=0,de=0;for(j=0;j<A;++j)B[q++]=f(b[E],h,g,m),E+=O;if(E+=U,d>0){if(H=1,B[q++]=f(b[E],h,g,m),E+=O,A>0)for(j=1,P=b[E],oe=B[q]=f(P,h,g,m),J=B[q+ae],Y=B[q+ie],ne=B[q+ue],(oe!==J||oe!==Y||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,J,Y,ne,h,g,m),se=te[q]=ee++),q+=1,E+=O,j=2;j<A;++j)P=b[E],oe=B[q]=f(P,h,g,m),J=B[q+ae],Y=B[q+ie],ne=B[q+ue],(oe!==J||oe!==Y||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,J,Y,ne,h,g,m),se=te[q]=ee++,ne!==Y&&p(te[q+ie],se,z,k,Y,ne,h,g,m)),q+=1,E+=O;for(E+=U,q=0,de=ae,ae=X,X=de,de=ie,ie=V,V=de,de=ue,ue=re,re=de,H=2;H<d;++H){if(B[q++]=f(b[E],h,g,m),E+=O,A>0)for(j=1,P=b[E],oe=B[q]=f(P,h,g,m),J=B[q+ae],Y=B[q+ie],ne=B[q+ue],(oe!==J||oe!==Y||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,J,Y,ne,h,g,m),se=te[q]=ee++,ne!==J&&p(te[q+ae],se,k,F,ne,J,h,g,m)),q+=1,E+=O,j=2;j<A;++j)P=b[E],oe=B[q]=f(P,h,g,m),J=B[q+ae],Y=B[q+ie],ne=B[q+ue],(oe!==J||oe!==Y||oe!==ne)&&(F=b[E+R],z=b[E+_],k=b[E+D],v(H,j,P,F,z,k,oe,J,Y,ne,h,g,m),se=te[q]=ee++,ne!==Y&&p(te[q+ie],se,z,k,Y,ne,h,g,m),ne!==J&&p(te[q+ae],se,k,F,ne,J,h,g,m)),q+=1,E+=O;1&H&&(q=0),de=ae,ae=X,X=de,de=ie,ie=V,V=de,de=ue,ue=re,re=de,E+=U}}y(te),y(B)}}};function a(o,v,p,f,l,y){var s=[y,l].join(",");return(0,u[s])(o,v,p,i.mallocUint32,i.freeUint32)}function r(o){function v(h){throw new Error("ndarray-extract-contour: "+h)}"object"!=typeof o&&v("Must specify arguments");var p=o.order;Array.isArray(p)||v("Must specify order");var f=o.arrayArguments||1;f<1&&v("Must have at least one array argument");var l=o.scalarArguments||0;l<0&&v("Scalar arg count must be > 0"),"function"!=typeof o.vertex&&v("Must specify vertex creation function"),"function"!=typeof o.cell&&v("Must specify cell creation function"),"function"!=typeof o.phase&&v("Must specify phase function");for(var y=o.getters||[],s=new Array(f),x=0;x<f;++x)y.indexOf(x)>=0?s[x]=!0:s[x]=!1;return a(o.vertex,o.cell,o.phase,l,p,s)}},9144:function(t,T,n){"use strict";var i=n(3094),u={zero:function(m,d,A,b){var c=m[0];b|=0;var w=0,E=A[0];for(w=0;w<c;++w)d[b]=0,b+=E},fdTemplate1:function(m,d,A,b,c,S,w){var E=m[0],P=A[0],F=-1*P,_=P;b|=0,w|=0;var z=0,D=P,k=S[0];for(z=0;z<E;++z)c[w]=.5*(d[b+F]-d[b+_]),b+=D,w+=k},fdTemplate2:function(m,d,A,b,c,S,w,E,P,R){var F=m[0],_=m[1],z=A[0],D=A[1],k=S[0],O=S[1],U=P[0],H=P[1],j=-1*z,ee=z,W=-1*D,B=D;b|=0,w|=0,R|=0;var te=0,q=0,oe=D,ie=z-_*D,V=O,Y=k-_*O,ae=H,X=U-_*H;for(q=0;q<F;++q){for(te=0;te<_;++te)c[w]=.5*(d[b+j]-d[b+ee]),E[R]=.5*(d[b+W]-d[b+B]),b+=oe,w+=V,R+=ae;b+=ie,w+=Y,R+=X}}},a={cdiff:function(m){var d={};return function(b,c,S){var w=b.dtype,E=b.order,P=c.dtype,R=c.order,F=S.dtype,_=S.order,z=[w,E.join(),P,R.join(),F,_.join()].join(),D=d[z];return D||(d[z]=D=m([w,E,P,R,F,_])),D(b.shape.slice(0),b.data,b.stride,0|b.offset,c.data,c.stride,0|c.offset,S.data,S.stride,0|S.offset)}},zero:function(m){var d={};return function(b){var c=b.dtype,S=b.order,w=[c,S.join()].join(),E=d[w];return E||(d[w]=E=m([c,S])),E(b.shape.slice(0),b.data,b.stride,0|b.offset)}},fdTemplate1:function(m){var d={};return function(b,c){var S=b.dtype,w=b.order,E=c.dtype,P=c.order,R=[S,w.join(),E,P.join()].join(),F=d[R];return F||(d[R]=F=m([S,w,E,P])),F(b.shape.slice(0),b.data,b.stride,0|b.offset,c.data,c.stride,0|c.offset)}},fdTemplate2:function(m){var d={};return function(b,c,S){var w=b.dtype,E=b.order,P=c.dtype,R=c.order,F=S.dtype,_=S.order,z=[w,E.join(),P,R.join(),F,_.join()].join(),D=d[z];return D||(d[z]=D=m([w,E,P,R,F,_])),D(b.shape.slice(0),b.data,b.stride,0|b.offset,c.data,c.stride,0|c.offset,S.data,S.stride,0|S.offset)}}};function r(m){return(0,a[m.funcName])(o.bind(void 0,m))}function o(m){return u[m.funcName]}function v(m){return r({funcName:m.funcName})}var p={},f={},y=v({funcName:"cdiff"}),s=v({funcName:"zero"});function x(m){return m in p?p[m]:p[m]=v({funcName:"fdTemplate"+m})}function h(m,d,A,b){return function(c,S){var w=S.shape.slice();return w[0]>2&&w[1]>2&&b(S.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),c.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),c.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(A(S.pick(0,-1).lo(1).hi(w[1]-2),c.pick(0,-1,1).lo(1).hi(w[1]-2)),d(c.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(A(S.pick(w[0]-1,-1).lo(1).hi(w[1]-2),c.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),d(c.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(A(S.pick(-1,0).lo(1).hi(w[0]-2),c.pick(-1,0,0).lo(1).hi(w[0]-2)),d(c.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(A(S.pick(-1,w[1]-1).lo(1).hi(w[0]-2),c.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),d(c.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),c.set(0,0,0,0),c.set(0,0,1,0),c.set(w[0]-1,0,0,0),c.set(w[0]-1,0,1,0),c.set(0,w[1]-1,0,0),c.set(0,w[1]-1,1,0),c.set(w[0]-1,w[1]-1,0,0),c.set(w[0]-1,w[1]-1,1,0),c}}function g(m){var d=m.join();if(w=f[d])return w;for(var A=m.length,b=[y,s],c=1;c<=A;++c)b.push(x(c));var w=h.apply(void 0,b);return f[d]=w,w}t.exports=function(d,A,b){return Array.isArray(b)||(b=i(A.dimension,"string"==typeof b?b:"clamp")),0===A.size?d:0===A.dimension?(d.set(0),d):g(b)(d,A)}},3581:function(t){"use strict";function T(r,o){var v=Math.floor(o),p=o-v,f=0<=v&&v<r.shape[0],l=0<=v+1&&v+1<r.shape[0];return(1-p)*(f?+r.get(v):0)+p*(l?+r.get(v+1):0)}function n(r,o,v){var p=Math.floor(o),f=o-p,l=0<=p&&p<r.shape[0],y=0<=p+1&&p+1<r.shape[0],s=Math.floor(v),x=v-s,h=0<=s&&s<r.shape[1],g=0<=s+1&&s+1<r.shape[1],m=l&&h?r.get(p,s):0,d=l&&g?r.get(p,s+1):0;return(1-x)*((1-f)*m+f*(y&&h?r.get(p+1,s):0))+x*((1-f)*d+f*(y&&g?r.get(p+1,s+1):0))}function i(r,o,v,p){var f=Math.floor(o),l=o-f,y=0<=f&&f<r.shape[0],s=0<=f+1&&f+1<r.shape[0],x=Math.floor(v),h=v-x,g=0<=x&&x<r.shape[1],m=0<=x+1&&x+1<r.shape[1],d=Math.floor(p),A=p-d,b=0<=d&&d<r.shape[2],c=0<=d+1&&d+1<r.shape[2],S=y&&g&&b?r.get(f,x,d):0,w=y&&m&&b?r.get(f,x+1,d):0,E=s&&g&&b?r.get(f+1,x,d):0,P=s&&m&&b?r.get(f+1,x+1,d):0,R=y&&g&&c?r.get(f,x,d+1):0,F=y&&m&&c?r.get(f,x+1,d+1):0;return(1-A)*((1-h)*((1-l)*S+l*E)+h*((1-l)*w+l*P))+A*((1-h)*((1-l)*R+l*(s&&g&&c?r.get(f+1,x,d+1):0))+h*((1-l)*F+l*(s&&m&&c?r.get(f+1,x+1,d+1):0)))}function u(r){var y,s,o=0|r.shape.length,v=new Array(o),p=new Array(o),f=new Array(o),l=new Array(o);for(y=0;y<o;++y)s=+arguments[y+1],v[y]=Math.floor(s),p[y]=s-v[y],f[y]=0<=v[y]&&v[y]<r.shape[y],l[y]=0<=v[y]+1&&v[y]+1<r.shape[y];var h,g,m,x=0;e:for(y=0;y<1<<o;++y){for(g=1,m=r.offset,h=0;h<o;++h)if(y&1<<h){if(!l[h])continue e;g*=p[h],m+=r.stride[h]*(v[h]+1)}else{if(!f[h])continue e;g*=1-p[h],m+=r.stride[h]*v[h]}x+=g*r.data[m]}return x}function a(r,o,v,p){switch(r.shape.length){case 0:return 0;case 1:return T(r,o);case 2:return n(r,o,v);case 3:return i(r,o,v,p);default:return u.apply(void 0,arguments)}}t.exports=a,t.exports.d1=T,t.exports.d2=n,t.exports.d3=i},7498:function(t,T){"use strict";var n={"float64,2,1,0":function(){return function(f,l,y,s,x){var h=f[0],g=f[1],m=f[2],d=y[0],A=y[1],b=y[2];s|=0;var c=0,S=0,w=0,E=b,P=A-m*b,R=d-g*A;for(w=0;w<h;++w){for(S=0;S<g;++S){for(c=0;c<m;++c)l[s]/=x,s+=E;s+=P}s+=R}}},"uint8,2,0,1,float64,2,1,0":function(){return function(f,l,y,s,x,h,g,m){for(var d=f[0],A=f[1],b=f[2],c=y[0],S=y[1],w=y[2],E=h[0],P=h[1],R=h[2],F=s|=0,_=g|=0,z=0|f[0];z>0;){z<64?(d=z,z=0):(d=64,z-=64);for(var D=0|f[1];D>0;){D<64?(A=D,D=0):(A=64,D-=64),s=F+z*c+D*S,g=_+z*E+D*P;var k=0,O=0,U=0,H=w,j=c-b*w,ee=S-d*c,W=R,B=E-b*R,te=P-d*E;for(U=0;U<A;++U){for(O=0;O<d;++O){for(k=0;k<b;++k)l[s]=x[g]*m,s+=H,g+=W;s+=j,g+=B}s+=ee,g+=te}}}}},"float32,1,0,float32,1,0":function(){return function(f,l,y,s,x,h,g){var m=f[0],d=f[1],A=y[0],b=y[1],c=h[0],S=h[1];s|=0,g|=0;var w=0,E=0,P=b,R=A-d*b,F=S,_=c-d*S;for(E=0;E<m;++E){for(w=0;w<d;++w)l[s]=x[g],s+=P,g+=F;s+=R,g+=_}}},"float32,1,0,float32,0,1":function(){return function(f,l,y,s,x,h,g){for(var m=f[0],d=f[1],A=y[0],b=y[1],c=h[0],S=h[1],w=s|=0,E=g|=0,P=0|f[1];P>0;){P<64?(d=P,P=0):(d=64,P-=64);for(var R=0|f[0];R>0;){R<64?(m=R,R=0):(m=64,R-=64),s=w+P*b+R*A,g=E+P*S+R*c;var F=0,_=0,z=b,D=A-d*b,k=S,O=c-d*S;for(_=0;_<m;++_){for(F=0;F<d;++F)l[s]=x[g],s+=z,g+=k;s+=D,g+=O}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(f,l,y,s,x,h,g){for(var m=f[0],d=f[1],A=f[2],b=y[0],c=y[1],S=y[2],w=h[0],E=h[1],P=h[2],R=s|=0,F=g|=0,_=0|f[2];_>0;){_<64?(A=_,_=0):(A=64,_-=64);for(var z=0|f[0];z>0;){z<64?(m=z,z=0):(m=64,z-=64);for(var D=0|f[1];D>0;){D<64?(d=D,D=0):(d=64,D-=64),s=R+_*S+z*b+D*c,g=F+_*P+z*w+D*E;var k=0,O=0,U=0,H=S,j=b-A*S,ee=c-m*b,W=P,B=w-A*P,te=E-m*w;for(U=0;U<d;++U){for(O=0;O<m;++O){for(k=0;k<A;++k)l[s]=x[g],s+=H,g+=W;s+=j,g+=B}s+=ee,g+=te}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(f,l,y,s,x,h,g){var m=f[0],d=f[1],A=f[2],b=y[0],c=y[1],S=y[2],w=h[0],E=h[1],P=h[2];s|=0,g|=0;var R=0,F=0,_=0,z=S,D=b-A*S,k=c-m*b,O=P,U=w-A*P,H=E-m*w;for(_=0;_<d;++_){for(F=0;F<m;++F){for(R=0;R<A;++R)l[s]=x[g],s+=z,g+=O;s+=D,g+=U}s+=k,g+=H}}}};function i(p,f){var l=f.join(",");return(0,n[l])()}var u=i,a={mul:function(p){var f={};return function(y,s,x){var h=y.dtype,g=y.order,m=s.dtype,d=s.order,A=x.dtype,b=x.order,c=[h,g.join(),m,d.join(),A,b.join()].join(),S=f[c];return S||(f[c]=S=p([h,g,m,d,A,b])),S(y.shape.slice(0),y.data,y.stride,0|y.offset,s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset)}},muls:function(p){var f={};return function(y,s,x){var h=y.dtype,g=y.order,m=s.dtype,d=s.order,A=[h,g.join(),m,d.join()].join(),b=f[A];return b||(f[A]=b=p([h,g,m,d])),b(y.shape.slice(0),y.data,y.stride,0|y.offset,s.data,s.stride,0|s.offset,x)}},mulseq:function(p){var f={};return function(y,s){var x=y.dtype,h=y.order,g=[x,h.join()].join(),m=f[g];return m||(f[g]=m=p([x,h])),m(y.shape.slice(0),y.data,y.stride,0|y.offset,s)}},div:function(p){var f={};return function(y,s,x){var h=y.dtype,g=y.order,m=s.dtype,d=s.order,A=x.dtype,b=x.order,c=[h,g.join(),m,d.join(),A,b.join()].join(),S=f[c];return S||(f[c]=S=p([h,g,m,d,A,b])),S(y.shape.slice(0),y.data,y.stride,0|y.offset,s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset)}},divs:function(p){var f={};return function(y,s,x){var h=y.dtype,g=y.order,m=s.dtype,d=s.order,A=[h,g.join(),m,d.join()].join(),b=f[A];return b||(f[A]=b=p([h,g,m,d])),b(y.shape.slice(0),y.data,y.stride,0|y.offset,s.data,s.stride,0|s.offset,x)}},divseq:function(p){var f={};return function(y,s){var x=y.dtype,h=y.order,g=[x,h.join()].join(),m=f[g];return m||(f[g]=m=p([x,h])),m(y.shape.slice(0),y.data,y.stride,0|y.offset,s)}},assign:function(p){var f={};return function(y,s){var x=y.dtype,h=y.order,g=s.dtype,m=s.order,d=[x,h.join(),g,m.join()].join(),A=f[d];return A||(f[d]=A=p([x,h,g,m])),A(y.shape.slice(0),y.data,y.stride,0|y.offset,s.data,s.stride,0|s.offset)}}};function r(p){return(0,a[p.funcName])(u.bind(void 0,p))}function o(p){return r({funcName:p.funcName})}var v={mul:"*",div:"/"};(function(){for(var p in v)T[p]=o({funcName:p}),T[p+"s"]=o({funcName:p+"s"}),T[p+"seq"]=o({funcName:p+"seq"})})(),T.assign=o({funcName:"assign"})},7382:function(t,T,n){"use strict";var i=n(5050),u=n(9262);t.exports=function(r,o){for(var v=[],p=r,f=1;Array.isArray(p);)v.push(p.length),f*=p.length,p=p[0];return 0===v.length?i():(o||(o=i(new Float64Array(f),v)),u(o,r),o)}},9262:function(t){"use strict";function T(){return function(o,v,p,f,l){var y=o[0],s=o[1],x=o[2],h=p[0],g=p[1],m=p[2],d=[0,0,0];f|=0;var A=0,b=0,c=0,S=m,w=g-x*m,E=h-s*g;for(c=0;c<y;++c){for(b=0;b<s;++b){for(A=0;A<x;++A){var R,P=l;for(R=0;R<d.length-1;++R)P=P[d[R]];v[f]=P[d[d.length-1]],f+=S,++d[2]}f+=w,d[2]-=x,++d[1]}f+=E,d[1]-=s,++d[0]}}}function n(){return T()}var i=n;function u(o){var v={};return function(f,l){var y=f.dtype,s=f.order,x=[y,s.join()].join(),h=v[x];return h||(v[x]=h=o([y,s])),h(f.shape.slice(0),f.data,f.stride,0|f.offset,l)}}function a(o){return u(i.bind(void 0,o))}function r(o){return a({funcName:o.funcName})}t.exports=r({funcName:"convert"})},8139:function(t,T,n){"use strict";var i=n(5306);function u(l){return"uint32"===l?[i.mallocUint32,i.freeUint32]:null}var a={"uint32,1,0":function(l,y){return function(x,h,g,m,d,A,b,c,S,w,E){var P,R,F,z,k,O,U,H,_=x*d+m,D=l(c);for(P=x+1;P<=h;++P){for(R=P,F=_+=d,k=0,O=_,z=0;z<c;++z)D[k++]=g[O],O+=S;e:for(;R-- >x;){k=0,O=F-d;t:for(z=0;z<c;++z){if((U=g[O])<(H=D[k]))break e;if(U>H)break t;O+=w,k+=E}for(k=F,O=F-d,z=0;z<c;++z)g[k]=g[O],k+=S,O+=S;F-=d}for(k=F,O=0,z=0;z<c;++z)g[k]=D[O++],k+=S}y(D)}}};function r(l,y){var s=u(y),x=[y,l].join(","),h=a[x];return s?h(s[0],s[1]):h()}var o={"uint32,1,0":function(l,y,s){return function x(h,g,m,d,A,b,c,S,w,E,P){var q,oe,ie,V,Y,ae,X,J,ue,de,be,De,_e,Ce,Le,Fe,ke,ze,Pe,Ie,Qe,at,Be,Ne,nt,R=(g-h+1)/6|0,F=h+R,_=g-R,z=h+g>>1,D=z-R,k=z+R,O=F,U=D,H=z,j=k,ee=_,W=h+1,B=g-1,te=!0,re=0,ne=0,se=0,ct=S,mt=y(ct),Bt=y(ct);be=A*O,De=A*U,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=O,O=U,U=oe;break e}if(se<0)break e;nt+=E}be=A*j,De=A*ee,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=j,j=ee,ee=oe;break e}if(se<0)break e;nt+=E}be=A*O,De=A*H,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=O,O=H,H=oe;break e}if(se<0)break e;nt+=E}be=A*U,De=A*H,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=U,U=H,H=oe;break e}if(se<0)break e;nt+=E}be=A*O,De=A*j,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=O,O=j,j=oe;break e}if(se<0)break e;nt+=E}be=A*H,De=A*j,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=H,H=j,j=oe;break e}if(se<0)break e;nt+=E}be=A*U,De=A*ee,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=U,U=ee,ee=oe;break e}if(se<0)break e;nt+=E}be=A*U,De=A*H,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=U,U=H,H=oe;break e}if(se<0)break e;nt+=E}be=A*j,De=A*ee,nt=d;e:for(de=0;de<S;++de){if(J=De+nt,(se=m[X=be+nt]-m[J])>0){oe=j,j=ee,ee=oe;break e}if(se<0)break e;nt+=E}for(be=A*O,De=A*U,_e=A*H,Ce=A*j,Le=A*ee,Fe=A*F,ke=A*z,ze=A*_,Ne=0,nt=d,de=0;de<S;++de)X=be+nt,J=De+nt,ue=_e+nt,Pe=Ce+nt,Ie=Le+nt,Qe=Fe+nt,at=ke+nt,Be=ze+nt,mt[Ne]=m[J],Bt[Ne]=m[Pe],te=te&&mt[Ne]===Bt[Ne],ie=m[X],V=m[ue],Y=m[Ie],m[Qe]=ie,m[at]=V,m[Be]=Y,++Ne,nt+=w;for(be=A*D,De=A*h,nt=d,de=0;de<S;++de)J=De+nt,m[X=be+nt]=m[J],nt+=w;for(be=A*k,De=A*g,nt=d,de=0;de<S;++de)J=De+nt,m[X=be+nt]=m[J],nt+=w;if(te)for(ae=W;ae<=B;++ae){for(X=d+ae*A,Ne=0,de=0;de<S&&0==(se=m[X]-mt[Ne]);++de)Ne+=P,X+=E;if(0!==se)if(se<0){if(ae!==W)for(be=A*ae,De=A*W,nt=d,de=0;de<S;++de)J=De+nt,q=m[X=be+nt],m[X]=m[J],m[J]=q,nt+=w;++W}else for(;;){for(X=d+B*A,Ne=0,de=0;de<S&&0==(se=m[X]-mt[Ne]);++de)Ne+=P,X+=E;if(!(se>0)){if(se<0){for(be=A*ae,De=A*W,_e=A*B,nt=d,de=0;de<S;++de)J=De+nt,ue=_e+nt,q=m[X=be+nt],m[X]=m[J],m[J]=m[ue],m[ue]=q,nt+=w;++W,--B;break}for(be=A*ae,De=A*B,nt=d,de=0;de<S;++de)J=De+nt,q=m[X=be+nt],m[X]=m[J],m[J]=q,nt+=w;--B;break}B--}}else for(ae=W;ae<=B;++ae){for(X=d+ae*A,Ne=0,de=0;de<S&&0==(re=m[X]-mt[Ne]);++de)Ne+=P,X+=E;if(re<0){if(ae!==W)for(be=A*ae,De=A*W,nt=d,de=0;de<S;++de)J=De+nt,q=m[X=be+nt],m[X]=m[J],m[J]=q,nt+=w;++W}else{for(X=d+ae*A,Ne=0,de=0;de<S&&0==(ne=m[X]-Bt[Ne]);++de)Ne+=P,X+=E;if(ne>0)for(;;){for(X=d+B*A,Ne=0,de=0;de<S&&0==(se=m[X]-Bt[Ne]);++de)Ne+=P,X+=E;if(!(se>0)){for(X=d+B*A,Ne=0,de=0;de<S&&0==(se=m[X]-mt[Ne]);++de)Ne+=P,X+=E;if(se<0){for(be=A*ae,De=A*W,_e=A*B,nt=d,de=0;de<S;++de)J=De+nt,ue=_e+nt,q=m[X=be+nt],m[X]=m[J],m[J]=m[ue],m[ue]=q,nt+=w;++W,--B}else{for(be=A*ae,De=A*B,nt=d,de=0;de<S;++de)J=De+nt,q=m[X=be+nt],m[X]=m[J],m[J]=q,nt+=w;--B}break}if(--B<ae)break}}}for(be=A*h,De=A*(W-1),Ne=0,nt=d,de=0;de<S;++de)J=De+nt,m[X=be+nt]=m[J],m[J]=mt[Ne],++Ne,nt+=w;for(be=A*g,De=A*(B+1),Ne=0,nt=d,de=0;de<S;++de)J=De+nt,m[X=be+nt]=m[J],m[J]=Bt[Ne],++Ne,nt+=w;if(W-2-h<=32?l(h,W-2,m,d,A,b,c,S,w,E,P):x(h,W-2,m,d,A,b,c,S,w,E,P),g-(B+2)<=32?l(B+2,g,m,d,A,b,c,S,w,E,P):x(B+2,g,m,d,A,b,c,S,w,E,P),te)return s(mt),void s(Bt);if(W<F&&B>_){e:for(;;){for(X=d+W*A,Ne=0,nt=d,de=0;de<S;++de){if(m[X]!==mt[Ne])break e;++Ne,X+=w}++W}e:for(;;){for(X=d+B*A,Ne=0,nt=d,de=0;de<S;++de){if(m[X]!==Bt[Ne])break e;++Ne,X+=w}--B}for(ae=W;ae<=B;++ae){for(X=d+ae*A,Ne=0,de=0;de<S&&0==(re=m[X]-mt[Ne]);++de)Ne+=P,X+=E;if(0===re){if(ae!==W)for(be=A*ae,De=A*W,nt=d,de=0;de<S;++de)J=De+nt,q=m[X=be+nt],m[X]=m[J],m[J]=q,nt+=w;++W}else{for(X=d+ae*A,Ne=0,de=0;de<S&&0==(ne=m[X]-Bt[Ne]);++de)Ne+=P,X+=E;if(0===ne)for(;;){for(X=d+B*A,Ne=0,de=0;de<S&&0==(se=m[X]-Bt[Ne]);++de)Ne+=P,X+=E;if(0!==se){for(X=d+B*A,Ne=0,de=0;de<S&&0==(se=m[X]-mt[Ne]);++de)Ne+=P,X+=E;if(se<0){for(be=A*ae,De=A*W,_e=A*B,nt=d,de=0;de<S;++de)J=De+nt,ue=_e+nt,q=m[X=be+nt],m[X]=m[J],m[J]=m[ue],m[ue]=q,nt+=w;++W,--B}else{for(be=A*ae,De=A*B,nt=d,de=0;de<S;++de)J=De+nt,q=m[X=be+nt],m[X]=m[J],m[J]=q,nt+=w;--B}break}if(--B<ae)break}}}}s(mt),s(Bt),B-W<=32?l(W,B,m,d,A,b,c,S,w,E,P):x(W,B,m,d,A,b,c,S,w,E,P)}}};function v(l,y,s){var x=u(y),h=[y,l].join(","),g=o[h];return l.length>1&&x?g(s,x[0],x[1]):g(s)}var p={"uint32,1,0":function(l,y){return function(s){var x=s.data,h=0|s.offset,g=s.shape,m=s.stride,d=0|m[0],A=0|g[0],b=0|m[1],c=0|g[1],S=b,w=b,E=1;A<=32?l(0,A-1,x,h,d,b,A,c,S,w,E):y(0,A-1,x,h,d,b,A,c,S,w,E)}}};function f(l,y){var s=[y,l].join(","),x=p[s],h=r(l,y);return x(h,v(l,y,h))}t.exports=f},8729:function(t,T,n){"use strict";var i=n(8139),u={};function a(r){var o=r.order,v=r.dtype,f=[o,v].join(":"),l=u[f];return l||(u[f]=l=i(o,v)),l(r),r}t.exports=a},5050:function(t,T,n){var i=n(4780),u=typeof Float64Array<"u";function a(y,s){return y[0]-s[0]}function r(){var x,y=this.stride,s=new Array(y.length);for(x=0;x<s.length;++x)s[x]=[Math.abs(y[x]),x];s.sort(a);var h=new Array(s.length);for(x=0;x<h.length;++x)h[x]=s[x][1];return h}var o={T:function(y){function s(h){this.data=h}var x=s.prototype;return x.dtype=y,x.index=function(){return-1},x.size=0,x.dimension=-1,x.shape=x.stride=x.order=[],x.lo=x.hi=x.transpose=x.step=function(){return new s(this.data)},x.get=x.set=function(){},x.pick=function(){return null},function(g){return new s(g)}},0:function(y,s){function x(g,m){this.data=g,this.offset=m}var h=x.prototype;return h.dtype=y,h.index=function(){return this.offset},h.dimension=0,h.size=1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new x(this.data,this.offset)},h.pick=function(){return s(this.data)},h.valueOf=h.get=function(){return"generic"===y?this.data.get(this.offset):this.data[this.offset]},h.set=function(m){return"generic"===y?this.data.set(this.offset,m):this.data[this.offset]=m},function(m,d,A,b){return new x(m,b)}},1:function(y,s,x){function h(m,d,A,b){this.data=m,this.shape=[d],this.stride=[A],this.offset=0|b}var g=h.prototype;return g.dtype=y,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(d,A){return"generic"===y?this.data.set(this.offset+this.stride[0]*d,A):this.data[this.offset+this.stride[0]*d]=A},g.get=function(d){return"generic"===y?this.data.get(this.offset+this.stride[0]*d):this.data[this.offset+this.stride[0]*d]},g.index=function(d){return this.offset+this.stride[0]*d},g.hi=function(d){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,this.stride[0],this.offset)},g.lo=function(d){var A=this.offset,b=0,c=this.shape[0],S=this.stride[0];return"number"==typeof d&&d>=0&&(A+=S*(b=0|d),c-=b),new h(this.data,c,S,A)},g.step=function(d){var A=this.shape[0],b=this.stride[0],c=this.offset,S=0,w=Math.ceil;return"number"==typeof d&&((S=0|d)<0?(c+=b*(A-1),A=w(-A/S)):A=w(A/S),b*=S),new h(this.data,A,b,c)},g.transpose=function(d){d=void 0===d?0:0|d;var A=this.shape,b=this.stride;return new h(this.data,A[d],b[d],this.offset)},g.pick=function(d){var A=[],b=[],c=this.offset;return"number"==typeof d&&d>=0?c=c+this.stride[0]*d|0:(A.push(this.shape[0]),b.push(this.stride[0])),(0,s[A.length+1])(this.data,A,b,c)},function(d,A,b,c){return new h(d,A[0],b[0],c)}},2:function(y,s,x){function h(m,d,A,b,c,S){this.data=m,this.shape=[d,A],this.stride=[b,c],this.offset=0|S}var g=h.prototype;return g.dtype=y,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(d,A,b){return"generic"===y?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*A,b):this.data[this.offset+this.stride[0]*d+this.stride[1]*A]=b},g.get=function(d,A){return"generic"===y?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*A):this.data[this.offset+this.stride[0]*d+this.stride[1]*A]},g.index=function(d,A){return this.offset+this.stride[0]*d+this.stride[1]*A},g.hi=function(d,A){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof A||A<0?this.shape[1]:0|A,this.stride[0],this.stride[1],this.offset)},g.lo=function(d,A){var b=this.offset,c=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],P=this.stride[1];return"number"==typeof d&&d>=0&&(b+=E*(c=0|d),S-=c),"number"==typeof A&&A>=0&&(b+=P*(c=0|A),w-=c),new h(this.data,S,w,E,P,b)},g.step=function(d,A){var b=this.shape[0],c=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,P=0,R=Math.ceil;return"number"==typeof d&&((P=0|d)<0?(E+=S*(b-1),b=R(-b/P)):b=R(b/P),S*=P),"number"==typeof A&&((P=0|A)<0?(E+=w*(c-1),c=R(-c/P)):c=R(c/P),w*=P),new h(this.data,b,c,S,w,E)},g.transpose=function(d,A){d=void 0===d?0:0|d,A=void 0===A?1:0|A;var b=this.shape,c=this.stride;return new h(this.data,b[d],b[A],c[d],c[A],this.offset)},g.pick=function(d,A){var b=[],c=[],S=this.offset;return"number"==typeof d&&d>=0?S=S+this.stride[0]*d|0:(b.push(this.shape[0]),c.push(this.stride[0])),"number"==typeof A&&A>=0?S=S+this.stride[1]*A|0:(b.push(this.shape[1]),c.push(this.stride[1])),(0,s[b.length+1])(this.data,b,c,S)},function(d,A,b,c){return new h(d,A[0],A[1],b[0],b[1],c)}},3:function(y,s,x){function h(m,d,A,b,c,S,w,E){this.data=m,this.shape=[d,A,b],this.stride=[c,S,w],this.offset=0|E}var g=h.prototype;return g.dtype=y,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var d=Math.abs(this.stride[0]),A=Math.abs(this.stride[1]),b=Math.abs(this.stride[2]);return d>A?A>b?[2,1,0]:d>b?[1,2,0]:[1,0,2]:d>b?[2,0,1]:b>A?[0,1,2]:[0,2,1]}}),g.set=function(d,A,b,c){return"generic"===y?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b,c):this.data[this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b]=c},g.get=function(d,A,b){return"generic"===y?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b):this.data[this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b]},g.index=function(d,A,b){return this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b},g.hi=function(d,A,b){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof A||A<0?this.shape[1]:0|A,"number"!=typeof b||b<0?this.shape[2]:0|b,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(d,A,b){var c=this.offset,S=0,w=this.shape[0],E=this.shape[1],P=this.shape[2],R=this.stride[0],F=this.stride[1],_=this.stride[2];return"number"==typeof d&&d>=0&&(c+=R*(S=0|d),w-=S),"number"==typeof A&&A>=0&&(c+=F*(S=0|A),E-=S),"number"==typeof b&&b>=0&&(c+=_*(S=0|b),P-=S),new h(this.data,w,E,P,R,F,_,c)},g.step=function(d,A,b){var c=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],P=this.stride[1],R=this.stride[2],F=this.offset,_=0,z=Math.ceil;return"number"==typeof d&&((_=0|d)<0?(F+=E*(c-1),c=z(-c/_)):c=z(c/_),E*=_),"number"==typeof A&&((_=0|A)<0?(F+=P*(S-1),S=z(-S/_)):S=z(S/_),P*=_),"number"==typeof b&&((_=0|b)<0?(F+=R*(w-1),w=z(-w/_)):w=z(w/_),R*=_),new h(this.data,c,S,w,E,P,R,F)},g.transpose=function(d,A,b){d=void 0===d?0:0|d,A=void 0===A?1:0|A,b=void 0===b?2:0|b;var c=this.shape,S=this.stride;return new h(this.data,c[d],c[A],c[b],S[d],S[A],S[b],this.offset)},g.pick=function(d,A,b){var c=[],S=[],w=this.offset;return"number"==typeof d&&d>=0?w=w+this.stride[0]*d|0:(c.push(this.shape[0]),S.push(this.stride[0])),"number"==typeof A&&A>=0?w=w+this.stride[1]*A|0:(c.push(this.shape[1]),S.push(this.stride[1])),"number"==typeof b&&b>=0?w=w+this.stride[2]*b|0:(c.push(this.shape[2]),S.push(this.stride[2])),(0,s[c.length+1])(this.data,c,S,w)},function(d,A,b,c){return new h(d,A[0],A[1],A[2],b[0],b[1],b[2],c)}},4:function(y,s,x){function h(m,d,A,b,c,S,w,E,P,R){this.data=m,this.shape=[d,A,b,c],this.stride=[S,w,E,P],this.offset=0|R}var g=h.prototype;return g.dtype=y,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:x}),g.set=function(d,A,b,c,S){return"generic"===y?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b+this.stride[3]*c,S):this.data[this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b+this.stride[3]*c]=S},g.get=function(d,A,b,c){return"generic"===y?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b+this.stride[3]*c):this.data[this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b+this.stride[3]*c]},g.index=function(d,A,b,c){return this.offset+this.stride[0]*d+this.stride[1]*A+this.stride[2]*b+this.stride[3]*c},g.hi=function(d,A,b,c){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof A||A<0?this.shape[1]:0|A,"number"!=typeof b||b<0?this.shape[2]:0|b,"number"!=typeof c||c<0?this.shape[3]:0|c,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(d,A,b,c){var S=this.offset,w=0,E=this.shape[0],P=this.shape[1],R=this.shape[2],F=this.shape[3],_=this.stride[0],z=this.stride[1],D=this.stride[2],k=this.stride[3];return"number"==typeof d&&d>=0&&(S+=_*(w=0|d),E-=w),"number"==typeof A&&A>=0&&(S+=z*(w=0|A),P-=w),"number"==typeof b&&b>=0&&(S+=D*(w=0|b),R-=w),"number"==typeof c&&c>=0&&(S+=k*(w=0|c),F-=w),new h(this.data,E,P,R,F,_,z,D,k,S)},g.step=function(d,A,b,c){var S=this.shape[0],w=this.shape[1],E=this.shape[2],P=this.shape[3],R=this.stride[0],F=this.stride[1],_=this.stride[2],z=this.stride[3],D=this.offset,k=0,O=Math.ceil;return"number"==typeof d&&((k=0|d)<0?(D+=R*(S-1),S=O(-S/k)):S=O(S/k),R*=k),"number"==typeof A&&((k=0|A)<0?(D+=F*(w-1),w=O(-w/k)):w=O(w/k),F*=k),"number"==typeof b&&((k=0|b)<0?(D+=_*(E-1),E=O(-E/k)):E=O(E/k),_*=k),"number"==typeof c&&((k=0|c)<0?(D+=z*(P-1),P=O(-P/k)):P=O(P/k),z*=k),new h(this.data,S,w,E,P,R,F,_,z,D)},g.transpose=function(d,A,b,c){d=void 0===d?0:0|d,A=void 0===A?1:0|A,b=void 0===b?2:0|b,c=void 0===c?3:0|c;var S=this.shape,w=this.stride;return new h(this.data,S[d],S[A],S[b],S[c],w[d],w[A],w[b],w[c],this.offset)},g.pick=function(d,A,b,c){var S=[],w=[],E=this.offset;return"number"==typeof d&&d>=0?E=E+this.stride[0]*d|0:(S.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof A&&A>=0?E=E+this.stride[1]*A|0:(S.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof b&&b>=0?E=E+this.stride[2]*b|0:(S.push(this.shape[2]),w.push(this.stride[2])),"number"==typeof c&&c>=0?E=E+this.stride[3]*c|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,s[S.length+1])(this.data,S,w,E)},function(d,A,b,c){return new h(d,A[0],A[1],A[2],A[3],b[0],b[1],b[2],b[3],c)}},5:function(s,x,h){function g(d,A,b,c,S,w,E,P,R,F,_,z){this.data=d,this.shape=[A,b,c,S,w],this.stride=[E,P,R,F,_],this.offset=0|z}var m=g.prototype;return m.dtype=s,m.dimension=5,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(m,"order",{get:h}),m.set=function(A,b,c,S,w,E){return"generic"===s?this.data.set(this.offset+this.stride[0]*A+this.stride[1]*b+this.stride[2]*c+this.stride[3]*S+this.stride[4]*w,E):this.data[this.offset+this.stride[0]*A+this.stride[1]*b+this.stride[2]*c+this.stride[3]*S+this.stride[4]*w]=E},m.get=function(A,b,c,S,w){return"generic"===s?this.data.get(this.offset+this.stride[0]*A+this.stride[1]*b+this.stride[2]*c+this.stride[3]*S+this.stride[4]*w):this.data[this.offset+this.stride[0]*A+this.stride[1]*b+this.stride[2]*c+this.stride[3]*S+this.stride[4]*w]},m.index=function(A,b,c,S,w){return this.offset+this.stride[0]*A+this.stride[1]*b+this.stride[2]*c+this.stride[3]*S+this.stride[4]*w},m.hi=function(A,b,c,S,w){return new g(this.data,"number"!=typeof A||A<0?this.shape[0]:0|A,"number"!=typeof b||b<0?this.shape[1]:0|b,"number"!=typeof c||c<0?this.shape[2]:0|c,"number"!=typeof S||S<0?this.shape[3]:0|S,"number"!=typeof w||w<0?this.shape[4]:0|w,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},m.lo=function(A,b,c,S,w){var E=this.offset,P=0,R=this.shape[0],F=this.shape[1],_=this.shape[2],z=this.shape[3],D=this.shape[4],k=this.stride[0],O=this.stride[1],U=this.stride[2],H=this.stride[3],j=this.stride[4];return"number"==typeof A&&A>=0&&(E+=k*(P=0|A),R-=P),"number"==typeof b&&b>=0&&(E+=O*(P=0|b),F-=P),"number"==typeof c&&c>=0&&(E+=U*(P=0|c),_-=P),"number"==typeof S&&S>=0&&(E+=H*(P=0|S),z-=P),"number"==typeof w&&w>=0&&(E+=j*(P=0|w),D-=P),new g(this.data,R,F,_,z,D,k,O,U,H,j,E)},m.step=function(A,b,c,S,w){var E=this.shape[0],P=this.shape[1],R=this.shape[2],F=this.shape[3],_=this.shape[4],z=this.stride[0],D=this.stride[1],k=this.stride[2],O=this.stride[3],U=this.stride[4],H=this.offset,j=0,ee=Math.ceil;return"number"==typeof A&&((j=0|A)<0?(H+=z*(E-1),E=ee(-E/j)):E=ee(E/j),z*=j),"number"==typeof b&&((j=0|b)<0?(H+=D*(P-1),P=ee(-P/j)):P=ee(P/j),D*=j),"number"==typeof c&&((j=0|c)<0?(H+=k*(R-1),R=ee(-R/j)):R=ee(R/j),k*=j),"number"==typeof S&&((j=0|S)<0?(H+=O*(F-1),F=ee(-F/j)):F=ee(F/j),O*=j),"number"==typeof w&&((j=0|w)<0?(H+=U*(_-1),_=ee(-_/j)):_=ee(_/j),U*=j),new g(this.data,E,P,R,F,_,z,D,k,O,U,H)},m.transpose=function(A,b,c,S,w){A=void 0===A?0:0|A,b=void 0===b?1:0|b,c=void 0===c?2:0|c,S=void 0===S?3:0|S,w=void 0===w?4:0|w;var E=this.shape,P=this.stride;return new g(this.data,E[A],E[b],E[c],E[S],E[w],P[A],P[b],P[c],P[S],P[w],this.offset)},m.pick=function(A,b,c,S,w){var E=[],P=[],R=this.offset;return"number"==typeof A&&A>=0?R=R+this.stride[0]*A|0:(E.push(this.shape[0]),P.push(this.stride[0])),"number"==typeof b&&b>=0?R=R+this.stride[1]*b|0:(E.push(this.shape[1]),P.push(this.stride[1])),"number"==typeof c&&c>=0?R=R+this.stride[2]*c|0:(E.push(this.shape[2]),P.push(this.stride[2])),"number"==typeof S&&S>=0?R=R+this.stride[3]*S|0:(E.push(this.shape[3]),P.push(this.stride[3])),"number"==typeof w&&w>=0?R=R+this.stride[4]*w|0:(E.push(this.shape[4]),P.push(this.stride[4])),(0,x[E.length+1])(this.data,E,P,R)},function(A,b,c,S){return new g(A,b[0],b[1],b[2],b[3],b[4],c[0],c[1],c[2],c[3],c[4],S)}}};function v(y,s){var x=-1===s?"T":String(s),h=o[x];return-1===s?h(y):0===s?h(y,f[y][0]):h(y,f[y],r)}function p(y){if(i(y))return"buffer";if(u)switch(Object.prototype.toString.call(y)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(y)?"array":"generic"}var f={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function l(y,s,x,h){if(void 0===y)return(0,f.array[0])([]);"number"==typeof y&&(y=[y]),void 0===s&&(s=[y.length]);var g=s.length;if(void 0===x){x=new Array(g);for(var m=g-1,d=1;m>=0;--m)x[m]=d,d*=s[m]}if(void 0===h)for(h=0,m=0;m<g;++m)x[m]<0&&(h-=(s[m]-1)*x[m]);for(var A=p(y),b=f[A];b.length<=g+1;)b.push(v(A,b.length-1));return(0,b[g+1])(y,s,x,h)}t.exports=l},8551:function(t,T,n){"use strict";var i=n(8362),u=Math.pow(2,-1074),a=-1>>>0;function r(o,v){if(isNaN(o)||isNaN(v))return NaN;if(o===v)return o;if(0===o)return v<0?-u:u;var p=i.hi(o),f=i.lo(o);return v>o==o>0?f===a?(p+=1,f=0):f+=1:0===f?(f=a,p-=1):f-=1,i.pack(f,p)}t.exports=r},115:function(t,T){var n=1e-6,i=1e-6;T.vertexNormals=function(u,a,r){for(var o=a.length,v=new Array(o),p=void 0===r?n:r,f=0;f<o;++f)v[f]=[0,0,0];for(f=0;f<u.length;++f)for(var l=u[f],y=0,s=l[l.length-1],x=l[0],h=0;h<l.length;++h){y=s,s=x,x=l[(h+1)%l.length];for(var g=a[y],m=a[s],d=a[x],A=new Array(3),b=0,c=new Array(3),S=0,w=0;w<3;++w)A[w]=g[w]-m[w],b+=A[w]*A[w],c[w]=d[w]-m[w],S+=c[w]*c[w];if(b*S>p){var E=v[s],P=1/Math.sqrt(b*S);for(w=0;w<3;++w){var R=(w+1)%3,F=(w+2)%3;E[w]+=P*(c[R]*A[F]-c[F]*A[R])}}}for(f=0;f<o;++f){E=v[f];var _=0;for(w=0;w<3;++w)_+=E[w]*E[w];if(_>p)for(P=1/Math.sqrt(_),w=0;w<3;++w)E[w]*=P;else for(w=0;w<3;++w)E[w]=0}return v},T.faceNormals=function(u,a,r){for(var o=u.length,v=new Array(o),p=void 0===r?i:r,f=0;f<o;++f){for(var l=u[f],y=new Array(3),s=0;s<3;++s)y[s]=a[l[s]];var x=new Array(3),h=new Array(3);for(s=0;s<3;++s)x[s]=y[1][s]-y[0][s],h[s]=y[2][s]-y[0][s];var g=new Array(3),m=0;for(s=0;s<3;++s){var d=(s+1)%3,A=(s+2)%3;g[s]=x[d]*h[A]-x[A]*h[d],m+=g[s]*g[s]}for(m=m>p?1/Math.sqrt(m):0,s=0;s<3;++s)g[s]*=m;v[f]=g}return v}},567:function(t){"use strict";function T(n,i,u,a,r,o,v,p,f,l){var y=i+o+l;if(s>0){var s=Math.sqrt(y+1);n[0]=.5*(v-f)/s,n[1]=.5*(p-a)/s,n[2]=.5*(u-o)/s,n[3]=.5*s}else{var x=Math.max(i,o,l);s=Math.sqrt(2*x-y+1),i>=x?(n[0]=.5*s,n[1]=.5*(r+u)/s,n[2]=.5*(p+a)/s,n[3]=.5*(v-f)/s):o>=x?(n[0]=.5*(u+r)/s,n[1]=.5*s,n[2]=.5*(f+v)/s,n[3]=.5*(p-a)/s):(n[0]=.5*(a+p)/s,n[1]=.5*(v+f)/s,n[2]=.5*s,n[3]=.5*(u-r)/s)}return n}t.exports=T},7774:function(t,T,n){"use strict";t.exports=s;var i=n(8444),u=n(3012),a=n(5950),r=n(7437),o=n(567);function v(x,h,g){return Math.sqrt(Math.pow(x,2)+Math.pow(h,2)+Math.pow(g,2))}function p(x,h,g,m){return Math.sqrt(Math.pow(x,2)+Math.pow(h,2)+Math.pow(g,2)+Math.pow(m,2))}function f(x,h){var g=h[0],m=h[1],d=h[2],A=h[3],b=p(g,m,d,A);b>1e-6?(x[0]=g/b,x[1]=m/b,x[2]=d/b,x[3]=A/b):(x[0]=x[1]=x[2]=0,x[3]=1)}function l(x,h,g){this.radius=i([g]),this.center=i(h),this.rotation=i(x),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var y=l.prototype;function s(x){var h=(x=x||{}).center||[0,0,0],g=x.rotation||[0,0,0,1],m=x.radius||1;h=[].slice.call(h,0,3),f(g=[].slice.call(g,0,4),g);var d=new l(g,h,Math.log(m));return d.setDistanceLimits(x.zoomMin,x.zoomMax),("eye"in x||"up"in x)&&d.lookAt(0,x.eye,x.center,x.up),d}y.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},y.recalcMatrix=function(x){this.radius.curve(x),this.center.curve(x),this.rotation.curve(x);var h=this.computedRotation;f(h,h);var g=this.computedMatrix;a(g,h);var m=this.computedCenter,d=this.computedEye,A=this.computedUp,b=Math.exp(this.computedRadius[0]);d[0]=m[0]+b*g[2],d[1]=m[1]+b*g[6],d[2]=m[2]+b*g[10],A[0]=g[1],A[1]=g[5],A[2]=g[9];for(var c=0;c<3;++c){for(var S=0,w=0;w<3;++w)S+=g[c+4*w]*d[w];g[12+c]=-S}},y.getMatrix=function(x,h){this.recalcMatrix(x);var g=this.computedMatrix;if(h){for(var m=0;m<16;++m)h[m]=g[m];return h}return g},y.idle=function(x){this.center.idle(x),this.radius.idle(x),this.rotation.idle(x)},y.flush=function(x){this.center.flush(x),this.radius.flush(x),this.rotation.flush(x)},y.pan=function(x,h,g,m){h=h||0,g=g||0,m=m||0,this.recalcMatrix(x);var d=this.computedMatrix,A=d[1],b=d[5],c=d[9],S=v(A,b,c);A/=S,b/=S,c/=S;var w=d[0],E=d[4],P=d[8],R=w*A+E*b+P*c,F=v(w-=A*R,E-=b*R,P-=c*R);w/=F,E/=F,P/=F;var _=d[2],z=d[6],D=d[10],k=_*A+z*b+D*c,O=_*w+z*E+D*P,U=v(_-=k*A+O*w,z-=k*b+O*E,D-=k*c+O*P);_/=U,z/=U,D/=U;var H=w*h+A*g,j=E*h+b*g,ee=P*h+c*g;this.center.move(x,H,j,ee);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+m),this.radius.set(x,Math.log(W))},y.rotate=function(x,h,g,m){this.recalcMatrix(x),h=h||0,g=g||0;var d=this.computedMatrix,A=d[0],b=d[4],c=d[8],S=d[1],w=d[5],E=d[9],P=d[2],R=d[6],F=d[10],_=h*A+g*S,z=h*b+g*w,D=h*c+g*E,k=-(R*D-F*z),O=-(F*_-P*D),U=-(P*z-R*_),H=Math.sqrt(Math.max(0,1-Math.pow(k,2)-Math.pow(O,2)-Math.pow(U,2))),j=p(k,O,U,H);j>1e-6?(k/=j,O/=j,U/=j,H/=j):(k=O=U=0,H=1);var ee=this.computedRotation,W=ee[0],B=ee[1],te=ee[2],q=ee[3],oe=W*H+q*k+B*U-te*O,ie=B*H+q*O+te*k-W*U,V=te*H+q*U+W*O-B*k,Y=q*H-W*k-B*O-te*U;if(m){k=P,O=R,U=F;var ae=Math.sin(m)/v(k,O,U);k*=ae,O*=ae,U*=ae,Y=Y*(H=Math.cos(h))-(oe=oe*H+Y*k+ie*U-V*O)*k-(ie=ie*H+Y*O+V*k-oe*U)*O-(V=V*H+Y*U+oe*O-ie*k)*U}var X=p(oe,ie,V,Y);X>1e-6?(oe/=X,ie/=X,V/=X,Y/=X):(oe=ie=V=0,Y=1),this.rotation.set(x,oe,ie,V,Y)},y.lookAt=function(x,h,g,m){this.recalcMatrix(x),g=g||this.computedCenter,h=h||this.computedEye,m=m||this.computedUp;var d=this.computedMatrix;u(d,h,g,m);var A=this.computedRotation;o(A,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]),f(A,A),this.rotation.set(x,A[0],A[1],A[2],A[3]);for(var b=0,c=0;c<3;++c)b+=Math.pow(g[c]-h[c],2);this.radius.set(x,.5*Math.log(Math.max(b,1e-6))),this.center.set(x,g[0],g[1],g[2])},y.translate=function(x,h,g,m){this.center.move(x,h||0,g||0,m||0)},y.setMatrix=function(x,h){var g=this.computedRotation;o(g,h[0],h[1],h[2],h[4],h[5],h[6],h[8],h[9],h[10]),f(g,g),this.rotation.set(x,g[0],g[1],g[2],g[3]);var m=this.computedMatrix;r(m,h);var d=m[15];if(Math.abs(d)>1e-6){var A=m[12]/d,b=m[13]/d,c=m[14]/d;this.recalcMatrix(x);var S=Math.exp(this.computedRadius[0]);this.center.set(x,A-m[2]*S,b-m[6]*S,c-m[10]*S),this.radius.idle(x)}else this.center.idle(x),this.radius.idle(x)},y.setDistance=function(x,h){h>0&&this.radius.set(x,Math.log(h))},y.setDistanceLimits=function(x,h){x=x>0?Math.log(x):-1/0,h=h>0?Math.log(h):1/0,h=Math.max(h,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=h},y.getDistanceLimits=function(x){var h=this.radius.bounds;return x?(x[0]=Math.exp(h[0][0]),x[1]=Math.exp(h[1][0]),x):[Math.exp(h[0][0]),Math.exp(h[1][0])]},y.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},y.fromJSON=function(x){var h=this.lastT(),g=x.center;g&&this.center.set(h,g[0],g[1],g[2]);var m=x.rotation;m&&this.rotation.set(h,m[0],m[1],m[2],m[3]);var d=x.distance;d&&d>0&&this.radius.set(h,Math.log(d)),this.setDistanceLimits(x.zoomMin,x.zoomMax)}},4930:function(t,T,n){"use strict";var i=n(6184);t.exports=function(a,r,o){return i(o=typeof o<"u"?o+"":" ",r)+a}},4405:function(t){t.exports=function(n,i){i||(i=[0,""]),n=String(n);var u=parseFloat(n,10);return i[0]=u,i[1]=n.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},4166:function(t,T,n){"use strict";t.exports=u;var i=n(9398);function u(a,r){for(var o=0|r.length,v=a.length,p=[new Array(o),new Array(o)],f=0;f<o;++f)p[0][f]=[],p[1][f]=[];for(f=0;f<v;++f){var l=a[f];p[0][l[0]].push(l),p[1][l[1]].push(l)}var y=[];for(f=0;f<o;++f)p[0][f].length+p[1][f].length===0&&y.push([f]);function s(c,S){var w=p[S][c[S]];w.splice(w.indexOf(c),1)}function x(c,S,w){for(var E,P,R,F=0;F<2;++F)if(p[F][S].length>0){E=p[F][S][0],R=F;break}P=E[1^R];for(var _=0;_<2;++_)for(var z=p[_][S],D=0;D<z.length;++D){var k=z[D],O=k[1^_];i(r[c],r[S],r[P],r[O])>0&&(E=k,P=O,R=_)}return w||E&&s(E,R),P}function h(c,S){var w=p[S][c][0],E=[c];s(w,S);for(var P=w[1^S];;){for(;P!==c;)E.push(P),P=x(E[E.length-2],P,!1);if(p[0][c].length+p[1][c].length===0)break;var F=E[E.length-1],_=c,z=E[1],D=x(F,_,!0);if(i(r[F],r[_],r[z],r[D])<0)break;E.push(c),P=x(F,_)}return E}function g(c,S){return S[1]===S[S.length-1]}for(f=0;f<o;++f)for(var m=0;m<2;++m){for(var d=[];p[m][f].length>0;){p[0][f].length;var b=h(f,m);g(d,b)?d.push.apply(d,b):(d.length>0&&y.push(d),d=b)}d.length>0&&y.push(d)}return y}},3959:function(t,T,n){"use strict";t.exports=u;var i=n(8348);function u(a,r){for(var o=i(a,r.length),v=new Array(r.length),p=new Array(r.length),f=[],l=0;l<r.length;++l){var y=o[l].length;p[l]=y,v[l]=!0,y<=1&&f.push(l)}for(;f.length>0;){v[s=f.pop()]=!1;var x=o[s];for(l=0;l<x.length;++l){var h=x[l];0==--p[h]&&f.push(h)}}var g=new Array(r.length),m=[];for(l=0;l<r.length;++l)if(v[l]){var s=m.length;g[l]=s,m.push(r[l])}else g[l]=-1;var d=[];for(l=0;l<a.length;++l){var A=a[l];v[A[0]]&&v[A[1]]&&d.push([g[A[0]],g[A[1]]])}return[d,m]}},8040:function(t,T,n){"use strict";t.exports=y;var i=n(8348),u=n(4166),a=n(211),r=n(9660),o=n(9662),v=n(1215),p=n(3959);function f(s,x){for(var h=new Array(s),g=0;g<s;++g)h[g]=x;return h}function l(s){for(var x=new Array(s),h=0;h<s;++h)x[h]=[];return x}function y(s,x){s=(ae=p(s,x))[0];for(var h=(x=ae[1]).length,m=(s.length,i(s,x.length)),d=0;d<h;++d)if(m[d].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var A=u(s,x);function b(de){for(var be=de.length,De=[0],_e=0;_e<be;++_e){var Ce=x[de[_e]],Le=x[de[(_e+1)%be]],Fe=r(-Ce[0],Ce[1]),ke=r(-Ce[0],Le[1]),ze=r(Le[0],Ce[1]),Pe=r(Le[0],Le[1]);De=o(De,o(o(Fe,ke),o(ze,Pe)))}return De[De.length-1]>0}var c=(A=A.filter(b)).length,S=new Array(c),w=new Array(c);for(d=0;d<c;++d){S[d]=d;var E=new Array(c),P=A[d].map(function(be){return x[be]}),R=a([P]),F=0;e:for(var _=0;_<c;++_)if(E[_]=0,d!==_){for(var D=(z=A[_]).length,k=0;k<D;++k){var O=R(x[z[k]]);if(0!==O){O<0&&(E[_]=1,F+=1);continue e}}E[_]=1,F+=1}w[d]=[F,d,E]}for(w.sort(function(de,be){return be[0]-de[0]}),d=0;d<c;++d){var U=(E=w[d])[1],H=E[2];for(_=0;_<c;++_)H[_]&&(S[_]=U)}var j=l(c);for(d=0;d<c;++d)j[d].push(S[d]),j[S[d]].push(d);var ee={},W=f(h,!1);for(d=0;d<c;++d)for(D=(z=A[d]).length,_=0;_<D;++_){var B=z[_],te=z[(_+1)%D],q=Math.min(B,te)+":"+Math.max(B,te);if(q in ee){var oe=ee[q];j[oe].push(d),j[d].push(oe),W[B]=W[te]=!0}else ee[q]=d}function ie(de){for(var be=de.length,De=0;De<be;++De)if(!W[de[De]])return!1;return!0}var V=[],Y=f(c,-1);for(d=0;d<c;++d)S[d]!==d||ie(A[d])?Y[d]=-1:(V.push(d),Y[d]=0);for(var ae=[];V.length>0;){var X=V.pop(),J=j[X];v(J,function(de,be){return de-be});var ne,ue=J.length,re=Y[X];for(0===re&&(ne=[z=A[X]]),d=0;d<ue;++d){var z,se=J[d];Y[se]>=0||(Y[se]=1^re,V.push(se),0!==re)||ie(z=A[se])||(z.reverse(),ne.push(z))}0===re&&ae.push(ne)}return ae}},211:function(t,T,n){t.exports=x;var i=n(417)[3],u=n(4385),a=n(9014),r=n(5070);function o(){return!0}function v(h){return function(g,m){var d=h[g];return!!d&&!!d.queryPoint(m,o)}}function p(h){for(var g={},m=0;m<h.length;++m){var d=h[m],A=d[0][0],b=d[0][1],c=d[1][1],S=[Math.min(b,c),Math.max(b,c)];A in g?g[A].push(S):g[A]=[S]}var w={},E=Object.keys(g);for(m=0;m<E.length;++m){var P=g[E[m]];w[E[m]]=a(P)}return v(w)}function f(h,g){return function(m){var d=r.le(g,m[0]);if(d<0)return 1;var A=h[d];if(!A){if(!(d>0&&g[d]===m[0]))return 1;A=h[d-1]}for(var b=1;A;){var c=A.key,S=i(m,c[0],c[1]);if(c[0][0]<c[1][0])if(S<0)A=A.left;else{if(!(S>0))return 0;b=-1,A=A.right}else if(S>0)A=A.left;else{if(!(S<0))return 0;b=1,A=A.right}}return b}}function l(h){return 1}function y(h){return function(m){return h(m[0],m[1])?0:1}}function s(h,g){return function(d){return h(d[0],d[1])?0:g(d)}}function x(h){for(var g=h.length,m=[],d=[],b=0;b<g;++b)for(var c=h[b],S=c.length,w=S-1,E=0;E<S;w=E++){var P=c[w],R=c[E];P[0]===R[0]?d.push([P,R]):m.push([P,R])}if(0===m.length)return 0===d.length?l:y(p(d));var F=u(m),_=f(F.slabs,F.coordinates);return 0===d.length?_:s(p(d),_)}},7309:function(t){"use strict";var T=new Float64Array(4),n=new Float64Array(4),i=new Float64Array(4);function u(a,r,o,v,p){T.length<v.length&&(T=new Float64Array(v.length),n=new Float64Array(v.length),i=new Float64Array(v.length));for(var f=0;f<v.length;++f)T[f]=a[f]-v[f],n[f]=r[f]-a[f],i[f]=o[f]-a[f];var l=0,y=0,s=0,x=0,h=0,g=0;for(f=0;f<v.length;++f){var m=n[f],d=i[f],A=T[f];l+=m*m,y+=m*d,s+=d*d,x+=A*m,h+=A*d,g+=A*A}var w,P,R,F,_,b=Math.abs(l*s-y*y),c=y*h-s*x,S=y*x-l*h;if(c+S<=b)if(c<0)S<0&&x<0?(S=0,-x>=l?(c=1,w=l+2*x+g):w=x*(c=-x/l)+g):(c=0,h>=0?(S=0,w=g):-h>=s?(S=1,w=s+2*h+g):w=h*(S=-h/s)+g);else if(S<0)S=0,x>=0?(c=0,w=g):-x>=l?(c=1,w=l+2*x+g):w=x*(c=-x/l)+g;else{var E=1/b;w=(c*=E)*(l*c+y*(S*=E)+2*x)+S*(y*c+s*S+2*h)+g}else c<0?(R=s+h)>(P=y+x)?(F=R-P)>=(_=l-2*y+s)?(c=1,S=0,w=l+2*x+g):w=(c=F/_)*(l*c+y*(S=1-c)+2*x)+S*(y*c+s*S+2*h)+g:(c=0,R<=0?(S=1,w=s+2*h+g):h>=0?(S=0,w=g):w=h*(S=-h/s)+g):S<0?(R=l+x)>(P=y+h)?(F=R-P)>=(_=l-2*y+s)?(S=1,c=0,w=s+2*h+g):w=(c=1-(S=F/_))*(l*c+y*S+2*x)+S*(y*c+s*S+2*h)+g:(S=0,R<=0?(c=1,w=l+2*x+g):x>=0?(c=0,w=g):w=x*(c=-x/l)+g):(F=s+h-y-x)<=0?(c=0,S=1,w=s+2*h+g):F>=(_=l-2*y+s)?(c=1,S=0,w=l+2*x+g):w=(c=F/_)*(l*c+y*(S=1-c)+2*x)+S*(y*c+s*S+2*h)+g;var z=1-c-S;for(f=0;f<v.length;++f)p[f]=z*a[f]+c*r[f]+S*o[f];return w<0?0:w}t.exports=u},1116:function(t,T,n){t.exports=n(6093)},7584:function(t,T,n){"use strict";var i=n(1539);function u(a,r){for(var o=a.length,v=new Array(o),p=0;p<o;++p)v[p]=i(a[p],r[p]);return v}t.exports=u},2826:function(t,T,n){"use strict";t.exports=u;var i=n(5125);function u(a){for(var r=new Array(a.length),o=0;o<a.length;++o)r[o]=i(a[o]);return r}},4469:function(t,T,n){"use strict";var i=n(5125),u=n(3962);function a(r,o){for(var v=i(o),p=r.length,f=new Array(p),l=0;l<p;++l)f[l]=u(r[l],v);return f}t.exports=a},6695:function(t,T,n){"use strict";var i=n(4354);function u(a,r){for(var o=a.length,v=new Array(o),p=0;p<o;++p)v[p]=i(a[p],r[p]);return v}t.exports=u},7037:function(t,T,n){"use strict";var i=n(9209),u=n(1284),a=n(9887);function r(o){o.sort(u);for(var v=o.length,p=0,f=0;f<v;++f){var l=o[f],y=a(l);if(0!==y){if(p>0){var s=o[p-1];if(0===i(l,s)&&a(s)!==y){p-=1;continue}}o[p++]=l}}return o.length=p,o}t.exports=r},6184:function(t){"use strict";var n,T="";function i(u,a){if("string"!=typeof u)throw new TypeError("expected a string");if(1===a)return u;if(2===a)return u+u;var r=u.length*a;if(n!==u||typeof n>"u")n=u,T="";else if(T.length>=r)return T.substr(0,r);for(;r>T.length&&a>1;)1&a&&(T+=u),a>>=1,u+=u;return T=(T+=u).substr(0,r)}t.exports=i},8161:function(t,T,n){t.exports=n.g.performance&&n.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(t){"use strict";function T(n){for(var i=n.length,u=n[n.length-1],a=i,r=i-2;r>=0;--r){var o=u;(f=(v=n[r])-((u=o+v)-o))&&(n[--a]=u,u=f)}var l=0;for(r=a;r<i;++r){var v,f;(f=(v=u)-((u=(o=n[r])+v)-o))&&(n[l++]=f)}return n[l++]=u,n.length=l,n}t.exports=T},8167:function(t,T,n){"use strict";var i=n(9660),u=n(9662),a=n(8289),r=n(402),o=6;function v(g,m,d,A){return function(c){return A(g(d(c[0][0],c[1][1]),d(-c[0][1],c[1][0])))}}function p(g,m,d,A){return function(c){return A(g(m(g(d(c[1][1],c[2][2]),d(-c[1][2],c[2][1])),c[0][0]),g(m(g(d(c[1][0],c[2][2]),d(-c[1][2],c[2][0])),-c[0][1]),m(g(d(c[1][0],c[2][1]),d(-c[1][1],c[2][0])),c[0][2]))))}}function f(g,m,d,A){return function(c){return A(g(g(m(g(m(g(d(c[2][2],c[3][3]),d(-c[2][3],c[3][2])),c[1][1]),g(m(g(d(c[2][1],c[3][3]),d(-c[2][3],c[3][1])),-c[1][2]),m(g(d(c[2][1],c[3][2]),d(-c[2][2],c[3][1])),c[1][3]))),c[0][0]),m(g(m(g(d(c[2][2],c[3][3]),d(-c[2][3],c[3][2])),c[1][0]),g(m(g(d(c[2][0],c[3][3]),d(-c[2][3],c[3][0])),-c[1][2]),m(g(d(c[2][0],c[3][2]),d(-c[2][2],c[3][0])),c[1][3]))),-c[0][1])),g(m(g(m(g(d(c[2][1],c[3][3]),d(-c[2][3],c[3][1])),c[1][0]),g(m(g(d(c[2][0],c[3][3]),d(-c[2][3],c[3][0])),-c[1][1]),m(g(d(c[2][0],c[3][1]),d(-c[2][1],c[3][0])),c[1][3]))),c[0][2]),m(g(m(g(d(c[2][1],c[3][2]),d(-c[2][2],c[3][1])),c[1][0]),g(m(g(d(c[2][0],c[3][2]),d(-c[2][2],c[3][0])),-c[1][1]),m(g(d(c[2][0],c[3][1]),d(-c[2][1],c[3][0])),c[1][2]))),-c[0][3]))))}}function l(g,m,d,A){return function(c){return A(g(g(m(g(g(m(g(m(g(d(c[3][3],c[4][4]),d(-c[3][4],c[4][3])),c[2][2]),g(m(g(d(c[3][2],c[4][4]),d(-c[3][4],c[4][2])),-c[2][3]),m(g(d(c[3][2],c[4][3]),d(-c[3][3],c[4][2])),c[2][4]))),c[1][1]),m(g(m(g(d(c[3][3],c[4][4]),d(-c[3][4],c[4][3])),c[2][1]),g(m(g(d(c[3][1],c[4][4]),d(-c[3][4],c[4][1])),-c[2][3]),m(g(d(c[3][1],c[4][3]),d(-c[3][3],c[4][1])),c[2][4]))),-c[1][2])),g(m(g(m(g(d(c[3][2],c[4][4]),d(-c[3][4],c[4][2])),c[2][1]),g(m(g(d(c[3][1],c[4][4]),d(-c[3][4],c[4][1])),-c[2][2]),m(g(d(c[3][1],c[4][2]),d(-c[3][2],c[4][1])),c[2][4]))),c[1][3]),m(g(m(g(d(c[3][2],c[4][3]),d(-c[3][3],c[4][2])),c[2][1]),g(m(g(d(c[3][1],c[4][3]),d(-c[3][3],c[4][1])),-c[2][2]),m(g(d(c[3][1],c[4][2]),d(-c[3][2],c[4][1])),c[2][3]))),-c[1][4]))),c[0][0]),m(g(g(m(g(m(g(d(c[3][3],c[4][4]),d(-c[3][4],c[4][3])),c[2][2]),g(m(g(d(c[3][2],c[4][4]),d(-c[3][4],c[4][2])),-c[2][3]),m(g(d(c[3][2],c[4][3]),d(-c[3][3],c[4][2])),c[2][4]))),c[1][0]),m(g(m(g(d(c[3][3],c[4][4]),d(-c[3][4],c[4][3])),c[2][0]),g(m(g(d(c[3][0],c[4][4]),d(-c[3][4],c[4][0])),-c[2][3]),m(g(d(c[3][0],c[4][3]),d(-c[3][3],c[4][0])),c[2][4]))),-c[1][2])),g(m(g(m(g(d(c[3][2],c[4][4]),d(-c[3][4],c[4][2])),c[2][0]),g(m(g(d(c[3][0],c[4][4]),d(-c[3][4],c[4][0])),-c[2][2]),m(g(d(c[3][0],c[4][2]),d(-c[3][2],c[4][0])),c[2][4]))),c[1][3]),m(g(m(g(d(c[3][2],c[4][3]),d(-c[3][3],c[4][2])),c[2][0]),g(m(g(d(c[3][0],c[4][3]),d(-c[3][3],c[4][0])),-c[2][2]),m(g(d(c[3][0],c[4][2]),d(-c[3][2],c[4][0])),c[2][3]))),-c[1][4]))),-c[0][1])),g(m(g(g(m(g(m(g(d(c[3][3],c[4][4]),d(-c[3][4],c[4][3])),c[2][1]),g(m(g(d(c[3][1],c[4][4]),d(-c[3][4],c[4][1])),-c[2][3]),m(g(d(c[3][1],c[4][3]),d(-c[3][3],c[4][1])),c[2][4]))),c[1][0]),m(g(m(g(d(c[3][3],c[4][4]),d(-c[3][4],c[4][3])),c[2][0]),g(m(g(d(c[3][0],c[4][4]),d(-c[3][4],c[4][0])),-c[2][3]),m(g(d(c[3][0],c[4][3]),d(-c[3][3],c[4][0])),c[2][4]))),-c[1][1])),g(m(g(m(g(d(c[3][1],c[4][4]),d(-c[3][4],c[4][1])),c[2][0]),g(m(g(d(c[3][0],c[4][4]),d(-c[3][4],c[4][0])),-c[2][1]),m(g(d(c[3][0],c[4][1]),d(-c[3][1],c[4][0])),c[2][4]))),c[1][3]),m(g(m(g(d(c[3][1],c[4][3]),d(-c[3][3],c[4][1])),c[2][0]),g(m(g(d(c[3][0],c[4][3]),d(-c[3][3],c[4][0])),-c[2][1]),m(g(d(c[3][0],c[4][1]),d(-c[3][1],c[4][0])),c[2][3]))),-c[1][4]))),c[0][2]),g(m(g(g(m(g(m(g(d(c[3][2],c[4][4]),d(-c[3][4],c[4][2])),c[2][1]),g(m(g(d(c[3][1],c[4][4]),d(-c[3][4],c[4][1])),-c[2][2]),m(g(d(c[3][1],c[4][2]),d(-c[3][2],c[4][1])),c[2][4]))),c[1][0]),m(g(m(g(d(c[3][2],c[4][4]),d(-c[3][4],c[4][2])),c[2][0]),g(m(g(d(c[3][0],c[4][4]),d(-c[3][4],c[4][0])),-c[2][2]),m(g(d(c[3][0],c[4][2]),d(-c[3][2],c[4][0])),c[2][4]))),-c[1][1])),g(m(g(m(g(d(c[3][1],c[4][4]),d(-c[3][4],c[4][1])),c[2][0]),g(m(g(d(c[3][0],c[4][4]),d(-c[3][4],c[4][0])),-c[2][1]),m(g(d(c[3][0],c[4][1]),d(-c[3][1],c[4][0])),c[2][4]))),c[1][2]),m(g(m(g(d(c[3][1],c[4][2]),d(-c[3][2],c[4][1])),c[2][0]),g(m(g(d(c[3][0],c[4][2]),d(-c[3][2],c[4][0])),-c[2][1]),m(g(d(c[3][0],c[4][1]),d(-c[3][1],c[4][0])),c[2][2]))),-c[1][4]))),-c[0][3]),m(g(g(m(g(m(g(d(c[3][2],c[4][3]),d(-c[3][3],c[4][2])),c[2][1]),g(m(g(d(c[3][1],c[4][3]),d(-c[3][3],c[4][1])),-c[2][2]),m(g(d(c[3][1],c[4][2]),d(-c[3][2],c[4][1])),c[2][3]))),c[1][0]),m(g(m(g(d(c[3][2],c[4][3]),d(-c[3][3],c[4][2])),c[2][0]),g(m(g(d(c[3][0],c[4][3]),d(-c[3][3],c[4][0])),-c[2][2]),m(g(d(c[3][0],c[4][2]),d(-c[3][2],c[4][0])),c[2][3]))),-c[1][1])),g(m(g(m(g(d(c[3][1],c[4][3]),d(-c[3][3],c[4][1])),c[2][0]),g(m(g(d(c[3][0],c[4][3]),d(-c[3][3],c[4][0])),-c[2][1]),m(g(d(c[3][0],c[4][1]),d(-c[3][1],c[4][0])),c[2][3]))),c[1][2]),m(g(m(g(d(c[3][1],c[4][2]),d(-c[3][2],c[4][1])),c[2][0]),g(m(g(d(c[3][0],c[4][2]),d(-c[3][2],c[4][0])),-c[2][1]),m(g(d(c[3][0],c[4][1]),d(-c[3][1],c[4][0])),c[2][2]))),-c[1][3]))),c[0][4])))))}}function y(g){return(2===g?v:3===g?p:4===g?f:5===g?l:void 0)(u,a,i,r)}var s=[function(){return[0]},function(m){return[m[0][0]]}];function x(g,m,d,A,b,c,S,w){return function(P){switch(P.length){case 0:return g(P);case 1:return m(P);case 2:return d(P);case 3:return A(P);case 4:return b(P);case 5:return c(P)}var R=S[P.length];return R||(R=S[P.length]=w(P.length)),R(P)}}function h(){for(;s.length<o;)s.push(y(s.length));t.exports=x.apply(void 0,s.concat([s,y]));for(var g=0;g<s.length;++g)t.exports[g]=s[g]}h()},9130:function(t,T,n){"use strict";var i=n(9660),u=n(9662);function a(r,o){for(var v=i(r[0],o[0]),p=1;p<r.length;++p)v=u(v,i(r[p],o[p]));return v}t.exports=a},2227:function(t,T,n){"use strict";var i=n(9660),u=n(9662),a=n(4078),r=n(8289),o=6;function v(b){return(3===b?y:4===b?s:5===b?x:h)(u,a,i,r)}function p(){return 0}function f(){return 0}function l(){return 0}function y(b,c,S,w){function E(P,R,F){var _=S(P[0],P[0]),z=w(_,R[0]),D=w(_,F[0]),k=S(R[0],R[0]),O=w(k,P[0]),U=w(k,F[0]),H=S(F[0],F[0]),j=w(H,P[0]),ee=w(H,R[0]),W=b(c(ee,U),c(O,z)),B=c(j,D),te=c(W,B);return te[te.length-1]}return E}function s(b,c,S,w){function E(P,R,F,_){var z=b(S(P[0],P[0]),S(P[1],P[1])),D=w(z,R[0]),k=w(z,F[0]),O=w(z,_[0]),U=b(S(R[0],R[0]),S(R[1],R[1])),H=w(U,P[0]),j=w(U,F[0]),ee=w(U,_[0]),W=b(S(F[0],F[0]),S(F[1],F[1])),B=w(W,P[0]),te=w(W,R[0]),q=w(W,_[0]),oe=b(S(_[0],_[0]),S(_[1],_[1])),ie=w(oe,P[0]),V=w(oe,R[0]),Y=w(oe,F[0]),ae=b(b(w(c(Y,q),R[1]),b(w(c(V,ee),-F[1]),w(c(te,j),_[1]))),b(w(c(V,ee),P[1]),b(w(c(ie,O),-R[1]),w(c(H,D),_[1])))),X=b(b(w(c(Y,q),P[1]),b(w(c(ie,O),-F[1]),w(c(B,k),_[1]))),b(w(c(te,j),P[1]),b(w(c(B,k),-R[1]),w(c(H,D),F[1])))),J=c(ae,X);return J[J.length-1]}return E}function x(b,c,S,w){function E(P,R,F,_,z){var D=b(S(P[0],P[0]),b(S(P[1],P[1]),S(P[2],P[2]))),k=w(D,R[0]),O=w(D,F[0]),U=w(D,_[0]),H=w(D,z[0]),j=b(S(R[0],R[0]),b(S(R[1],R[1]),S(R[2],R[2]))),ee=w(j,P[0]),W=w(j,F[0]),B=w(j,_[0]),te=w(j,z[0]),q=b(S(F[0],F[0]),b(S(F[1],F[1]),S(F[2],F[2]))),oe=w(q,P[0]),ie=w(q,R[0]),V=w(q,_[0]),Y=w(q,z[0]),ae=b(S(_[0],_[0]),b(S(_[1],_[1]),S(_[2],_[2]))),X=w(ae,P[0]),J=w(ae,R[0]),ue=w(ae,F[0]),re=w(ae,z[0]),ne=b(S(z[0],z[0]),b(S(z[1],z[1]),S(z[2],z[2]))),se=w(ne,P[0]),de=w(ne,R[0]),be=w(ne,F[0]),De=w(ne,_[0]),_e=b(b(b(w(b(w(c(De,re),F[1]),b(w(c(be,Y),-_[1]),w(c(ue,V),z[1]))),R[2]),b(w(b(w(c(De,re),R[1]),b(w(c(de,te),-_[1]),w(c(J,B),z[1]))),-F[2]),w(b(w(c(be,Y),R[1]),b(w(c(de,te),-F[1]),w(c(ie,W),z[1]))),_[2]))),b(w(b(w(c(ue,V),R[1]),b(w(c(J,B),-F[1]),w(c(ie,W),_[1]))),-z[2]),b(w(b(w(c(De,re),R[1]),b(w(c(de,te),-_[1]),w(c(J,B),z[1]))),P[2]),w(b(w(c(De,re),P[1]),b(w(c(se,H),-_[1]),w(c(X,U),z[1]))),-R[2])))),b(b(w(b(w(c(de,te),P[1]),b(w(c(se,H),-R[1]),w(c(ee,k),z[1]))),_[2]),b(w(b(w(c(J,B),P[1]),b(w(c(X,U),-R[1]),w(c(ee,k),_[1]))),-z[2]),w(b(w(c(ue,V),R[1]),b(w(c(J,B),-F[1]),w(c(ie,W),_[1]))),P[2]))),b(w(b(w(c(ue,V),P[1]),b(w(c(X,U),-F[1]),w(c(oe,O),_[1]))),-R[2]),b(w(b(w(c(J,B),P[1]),b(w(c(X,U),-R[1]),w(c(ee,k),_[1]))),F[2]),w(b(w(c(ie,W),P[1]),b(w(c(oe,O),-R[1]),w(c(ee,k),F[1]))),-_[2]))))),Ce=b(b(b(w(b(w(c(De,re),F[1]),b(w(c(be,Y),-_[1]),w(c(ue,V),z[1]))),P[2]),w(b(w(c(De,re),P[1]),b(w(c(se,H),-_[1]),w(c(X,U),z[1]))),-F[2])),b(w(b(w(c(be,Y),P[1]),b(w(c(se,H),-F[1]),w(c(oe,O),z[1]))),_[2]),w(b(w(c(ue,V),P[1]),b(w(c(X,U),-F[1]),w(c(oe,O),_[1]))),-z[2]))),b(b(w(b(w(c(be,Y),R[1]),b(w(c(de,te),-F[1]),w(c(ie,W),z[1]))),P[2]),w(b(w(c(be,Y),P[1]),b(w(c(se,H),-F[1]),w(c(oe,O),z[1]))),-R[2])),b(w(b(w(c(de,te),P[1]),b(w(c(se,H),-R[1]),w(c(ee,k),z[1]))),F[2]),w(b(w(c(ie,W),P[1]),b(w(c(oe,O),-R[1]),w(c(ee,k),F[1]))),-z[2])))),Le=c(_e,Ce);return Le[Le.length-1]}return E}function h(b,c,S,w){function E(P,R,F,_,z,D){var k=b(b(S(P[0],P[0]),S(P[1],P[1])),b(S(P[2],P[2]),S(P[3],P[3]))),O=w(k,R[0]),U=w(k,F[0]),H=w(k,_[0]),j=w(k,z[0]),ee=w(k,D[0]),W=b(b(S(R[0],R[0]),S(R[1],R[1])),b(S(R[2],R[2]),S(R[3],R[3]))),B=w(W,P[0]),te=w(W,F[0]),q=w(W,_[0]),oe=w(W,z[0]),ie=w(W,D[0]),V=b(b(S(F[0],F[0]),S(F[1],F[1])),b(S(F[2],F[2]),S(F[3],F[3]))),Y=w(V,P[0]),ae=w(V,R[0]),X=w(V,_[0]),J=w(V,z[0]),ue=w(V,D[0]),re=b(b(S(_[0],_[0]),S(_[1],_[1])),b(S(_[2],_[2]),S(_[3],_[3]))),ne=w(re,P[0]),se=w(re,R[0]),de=w(re,F[0]),be=w(re,z[0]),De=w(re,D[0]),_e=b(b(S(z[0],z[0]),S(z[1],z[1])),b(S(z[2],z[2]),S(z[3],z[3]))),Ce=w(_e,P[0]),Le=w(_e,R[0]),Fe=w(_e,F[0]),ke=w(_e,_[0]),ze=w(_e,D[0]),Pe=b(b(S(D[0],D[0]),S(D[1],D[1])),b(S(D[2],D[2]),S(D[3],D[3]))),Ie=w(Pe,P[0]),Qe=w(Pe,R[0]),at=w(Pe,F[0]),Be=w(Pe,_[0]),Ne=w(Pe,z[0]),nt=b(b(b(w(b(b(w(b(w(c(Ne,ze),_[1]),b(w(c(Be,De),-z[1]),w(c(ke,be),D[1]))),F[2]),w(b(w(c(Ne,ze),F[1]),b(w(c(at,ue),-z[1]),w(c(Fe,J),D[1]))),-_[2])),b(w(b(w(c(Be,De),F[1]),b(w(c(at,ue),-_[1]),w(c(de,X),D[1]))),z[2]),w(b(w(c(ke,be),F[1]),b(w(c(Fe,J),-_[1]),w(c(de,X),z[1]))),-D[2]))),R[3]),b(w(b(b(w(b(w(c(Ne,ze),_[1]),b(w(c(Be,De),-z[1]),w(c(ke,be),D[1]))),R[2]),w(b(w(c(Ne,ze),R[1]),b(w(c(Qe,ie),-z[1]),w(c(Le,oe),D[1]))),-_[2])),b(w(b(w(c(Be,De),R[1]),b(w(c(Qe,ie),-_[1]),w(c(se,q),D[1]))),z[2]),w(b(w(c(ke,be),R[1]),b(w(c(Le,oe),-_[1]),w(c(se,q),z[1]))),-D[2]))),-F[3]),w(b(b(w(b(w(c(Ne,ze),F[1]),b(w(c(at,ue),-z[1]),w(c(Fe,J),D[1]))),R[2]),w(b(w(c(Ne,ze),R[1]),b(w(c(Qe,ie),-z[1]),w(c(Le,oe),D[1]))),-F[2])),b(w(b(w(c(at,ue),R[1]),b(w(c(Qe,ie),-F[1]),w(c(ae,te),D[1]))),z[2]),w(b(w(c(Fe,J),R[1]),b(w(c(Le,oe),-F[1]),w(c(ae,te),z[1]))),-D[2]))),_[3]))),b(b(w(b(b(w(b(w(c(Be,De),F[1]),b(w(c(at,ue),-_[1]),w(c(de,X),D[1]))),R[2]),w(b(w(c(Be,De),R[1]),b(w(c(Qe,ie),-_[1]),w(c(se,q),D[1]))),-F[2])),b(w(b(w(c(at,ue),R[1]),b(w(c(Qe,ie),-F[1]),w(c(ae,te),D[1]))),_[2]),w(b(w(c(de,X),R[1]),b(w(c(se,q),-F[1]),w(c(ae,te),_[1]))),-D[2]))),-z[3]),w(b(b(w(b(w(c(ke,be),F[1]),b(w(c(Fe,J),-_[1]),w(c(de,X),z[1]))),R[2]),w(b(w(c(ke,be),R[1]),b(w(c(Le,oe),-_[1]),w(c(se,q),z[1]))),-F[2])),b(w(b(w(c(Fe,J),R[1]),b(w(c(Le,oe),-F[1]),w(c(ae,te),z[1]))),_[2]),w(b(w(c(de,X),R[1]),b(w(c(se,q),-F[1]),w(c(ae,te),_[1]))),-z[2]))),D[3])),b(w(b(b(w(b(w(c(Ne,ze),_[1]),b(w(c(Be,De),-z[1]),w(c(ke,be),D[1]))),R[2]),w(b(w(c(Ne,ze),R[1]),b(w(c(Qe,ie),-z[1]),w(c(Le,oe),D[1]))),-_[2])),b(w(b(w(c(Be,De),R[1]),b(w(c(Qe,ie),-_[1]),w(c(se,q),D[1]))),z[2]),w(b(w(c(ke,be),R[1]),b(w(c(Le,oe),-_[1]),w(c(se,q),z[1]))),-D[2]))),P[3]),w(b(b(w(b(w(c(Ne,ze),_[1]),b(w(c(Be,De),-z[1]),w(c(ke,be),D[1]))),P[2]),w(b(w(c(Ne,ze),P[1]),b(w(c(Ie,ee),-z[1]),w(c(Ce,j),D[1]))),-_[2])),b(w(b(w(c(Be,De),P[1]),b(w(c(Ie,ee),-_[1]),w(c(ne,H),D[1]))),z[2]),w(b(w(c(ke,be),P[1]),b(w(c(Ce,j),-_[1]),w(c(ne,H),z[1]))),-D[2]))),-R[3])))),b(b(b(w(b(b(w(b(w(c(Ne,ze),R[1]),b(w(c(Qe,ie),-z[1]),w(c(Le,oe),D[1]))),P[2]),w(b(w(c(Ne,ze),P[1]),b(w(c(Ie,ee),-z[1]),w(c(Ce,j),D[1]))),-R[2])),b(w(b(w(c(Qe,ie),P[1]),b(w(c(Ie,ee),-R[1]),w(c(B,O),D[1]))),z[2]),w(b(w(c(Le,oe),P[1]),b(w(c(Ce,j),-R[1]),w(c(B,O),z[1]))),-D[2]))),_[3]),w(b(b(w(b(w(c(Be,De),R[1]),b(w(c(Qe,ie),-_[1]),w(c(se,q),D[1]))),P[2]),w(b(w(c(Be,De),P[1]),b(w(c(Ie,ee),-_[1]),w(c(ne,H),D[1]))),-R[2])),b(w(b(w(c(Qe,ie),P[1]),b(w(c(Ie,ee),-R[1]),w(c(B,O),D[1]))),_[2]),w(b(w(c(se,q),P[1]),b(w(c(ne,H),-R[1]),w(c(B,O),_[1]))),-D[2]))),-z[3])),b(w(b(b(w(b(w(c(ke,be),R[1]),b(w(c(Le,oe),-_[1]),w(c(se,q),z[1]))),P[2]),w(b(w(c(ke,be),P[1]),b(w(c(Ce,j),-_[1]),w(c(ne,H),z[1]))),-R[2])),b(w(b(w(c(Le,oe),P[1]),b(w(c(Ce,j),-R[1]),w(c(B,O),z[1]))),_[2]),w(b(w(c(se,q),P[1]),b(w(c(ne,H),-R[1]),w(c(B,O),_[1]))),-z[2]))),D[3]),w(b(b(w(b(w(c(Be,De),F[1]),b(w(c(at,ue),-_[1]),w(c(de,X),D[1]))),R[2]),w(b(w(c(Be,De),R[1]),b(w(c(Qe,ie),-_[1]),w(c(se,q),D[1]))),-F[2])),b(w(b(w(c(at,ue),R[1]),b(w(c(Qe,ie),-F[1]),w(c(ae,te),D[1]))),_[2]),w(b(w(c(de,X),R[1]),b(w(c(se,q),-F[1]),w(c(ae,te),_[1]))),-D[2]))),P[3]))),b(b(w(b(b(w(b(w(c(Be,De),F[1]),b(w(c(at,ue),-_[1]),w(c(de,X),D[1]))),P[2]),w(b(w(c(Be,De),P[1]),b(w(c(Ie,ee),-_[1]),w(c(ne,H),D[1]))),-F[2])),b(w(b(w(c(at,ue),P[1]),b(w(c(Ie,ee),-F[1]),w(c(Y,U),D[1]))),_[2]),w(b(w(c(de,X),P[1]),b(w(c(ne,H),-F[1]),w(c(Y,U),_[1]))),-D[2]))),-R[3]),w(b(b(w(b(w(c(Be,De),R[1]),b(w(c(Qe,ie),-_[1]),w(c(se,q),D[1]))),P[2]),w(b(w(c(Be,De),P[1]),b(w(c(Ie,ee),-_[1]),w(c(ne,H),D[1]))),-R[2])),b(w(b(w(c(Qe,ie),P[1]),b(w(c(Ie,ee),-R[1]),w(c(B,O),D[1]))),_[2]),w(b(w(c(se,q),P[1]),b(w(c(ne,H),-R[1]),w(c(B,O),_[1]))),-D[2]))),F[3])),b(w(b(b(w(b(w(c(at,ue),R[1]),b(w(c(Qe,ie),-F[1]),w(c(ae,te),D[1]))),P[2]),w(b(w(c(at,ue),P[1]),b(w(c(Ie,ee),-F[1]),w(c(Y,U),D[1]))),-R[2])),b(w(b(w(c(Qe,ie),P[1]),b(w(c(Ie,ee),-R[1]),w(c(B,O),D[1]))),F[2]),w(b(w(c(ae,te),P[1]),b(w(c(Y,U),-R[1]),w(c(B,O),F[1]))),-D[2]))),-_[3]),w(b(b(w(b(w(c(de,X),R[1]),b(w(c(se,q),-F[1]),w(c(ae,te),_[1]))),P[2]),w(b(w(c(de,X),P[1]),b(w(c(ne,H),-F[1]),w(c(Y,U),_[1]))),-R[2])),b(w(b(w(c(se,q),P[1]),b(w(c(ne,H),-R[1]),w(c(B,O),_[1]))),F[2]),w(b(w(c(ae,te),P[1]),b(w(c(Y,U),-R[1]),w(c(B,O),F[1]))),-_[2]))),D[3]))))),ct=b(b(b(w(b(b(w(b(w(c(Ne,ze),_[1]),b(w(c(Be,De),-z[1]),w(c(ke,be),D[1]))),F[2]),w(b(w(c(Ne,ze),F[1]),b(w(c(at,ue),-z[1]),w(c(Fe,J),D[1]))),-_[2])),b(w(b(w(c(Be,De),F[1]),b(w(c(at,ue),-_[1]),w(c(de,X),D[1]))),z[2]),w(b(w(c(ke,be),F[1]),b(w(c(Fe,J),-_[1]),w(c(de,X),z[1]))),-D[2]))),P[3]),b(w(b(b(w(b(w(c(Ne,ze),_[1]),b(w(c(Be,De),-z[1]),w(c(ke,be),D[1]))),P[2]),w(b(w(c(Ne,ze),P[1]),b(w(c(Ie,ee),-z[1]),w(c(Ce,j),D[1]))),-_[2])),b(w(b(w(c(Be,De),P[1]),b(w(c(Ie,ee),-_[1]),w(c(ne,H),D[1]))),z[2]),w(b(w(c(ke,be),P[1]),b(w(c(Ce,j),-_[1]),w(c(ne,H),z[1]))),-D[2]))),-F[3]),w(b(b(w(b(w(c(Ne,ze),F[1]),b(w(c(at,ue),-z[1]),w(c(Fe,J),D[1]))),P[2]),w(b(w(c(Ne,ze),P[1]),b(w(c(Ie,ee),-z[1]),w(c(Ce,j),D[1]))),-F[2])),b(w(b(w(c(at,ue),P[1]),b(w(c(Ie,ee),-F[1]),w(c(Y,U),D[1]))),z[2]),w(b(w(c(Fe,J),P[1]),b(w(c(Ce,j),-F[1]),w(c(Y,U),z[1]))),-D[2]))),_[3]))),b(b(w(b(b(w(b(w(c(Be,De),F[1]),b(w(c(at,ue),-_[1]),w(c(de,X),D[1]))),P[2]),w(b(w(c(Be,De),P[1]),b(w(c(Ie,ee),-_[1]),w(c(ne,H),D[1]))),-F[2])),b(w(b(w(c(at,ue),P[1]),b(w(c(Ie,ee),-F[1]),w(c(Y,U),D[1]))),_[2]),w(b(w(c(de,X),P[1]),b(w(c(ne,H),-F[1]),w(c(Y,U),_[1]))),-D[2]))),-z[3]),w(b(b(w(b(w(c(ke,be),F[1]),b(w(c(Fe,J),-_[1]),w(c(de,X),z[1]))),P[2]),w(b(w(c(ke,be),P[1]),b(w(c(Ce,j),-_[1]),w(c(ne,H),z[1]))),-F[2])),b(w(b(w(c(Fe,J),P[1]),b(w(c(Ce,j),-F[1]),w(c(Y,U),z[1]))),_[2]),w(b(w(c(de,X),P[1]),b(w(c(ne,H),-F[1]),w(c(Y,U),_[1]))),-z[2]))),D[3])),b(w(b(b(w(b(w(c(Ne,ze),F[1]),b(w(c(at,ue),-z[1]),w(c(Fe,J),D[1]))),R[2]),w(b(w(c(Ne,ze),R[1]),b(w(c(Qe,ie),-z[1]),w(c(Le,oe),D[1]))),-F[2])),b(w(b(w(c(at,ue),R[1]),b(w(c(Qe,ie),-F[1]),w(c(ae,te),D[1]))),z[2]),w(b(w(c(Fe,J),R[1]),b(w(c(Le,oe),-F[1]),w(c(ae,te),z[1]))),-D[2]))),P[3]),w(b(b(w(b(w(c(Ne,ze),F[1]),b(w(c(at,ue),-z[1]),w(c(Fe,J),D[1]))),P[2]),w(b(w(c(Ne,ze),P[1]),b(w(c(Ie,ee),-z[1]),w(c(Ce,j),D[1]))),-F[2])),b(w(b(w(c(at,ue),P[1]),b(w(c(Ie,ee),-F[1]),w(c(Y,U),D[1]))),z[2]),w(b(w(c(Fe,J),P[1]),b(w(c(Ce,j),-F[1]),w(c(Y,U),z[1]))),-D[2]))),-R[3])))),b(b(b(w(b(b(w(b(w(c(Ne,ze),R[1]),b(w(c(Qe,ie),-z[1]),w(c(Le,oe),D[1]))),P[2]),w(b(w(c(Ne,ze),P[1]),b(w(c(Ie,ee),-z[1]),w(c(Ce,j),D[1]))),-R[2])),b(w(b(w(c(Qe,ie),P[1]),b(w(c(Ie,ee),-R[1]),w(c(B,O),D[1]))),z[2]),w(b(w(c(Le,oe),P[1]),b(w(c(Ce,j),-R[1]),w(c(B,O),z[1]))),-D[2]))),F[3]),w(b(b(w(b(w(c(at,ue),R[1]),b(w(c(Qe,ie),-F[1]),w(c(ae,te),D[1]))),P[2]),w(b(w(c(at,ue),P[1]),b(w(c(Ie,ee),-F[1]),w(c(Y,U),D[1]))),-R[2])),b(w(b(w(c(Qe,ie),P[1]),b(w(c(Ie,ee),-R[1]),w(c(B,O),D[1]))),F[2]),w(b(w(c(ae,te),P[1]),b(w(c(Y,U),-R[1]),w(c(B,O),F[1]))),-D[2]))),-z[3])),b(w(b(b(w(b(w(c(Fe,J),R[1]),b(w(c(Le,oe),-F[1]),w(c(ae,te),z[1]))),P[2]),w(b(w(c(Fe,J),P[1]),b(w(c(Ce,j),-F[1]),w(c(Y,U),z[1]))),-R[2])),b(w(b(w(c(Le,oe),P[1]),b(w(c(Ce,j),-R[1]),w(c(B,O),z[1]))),F[2]),w(b(w(c(ae,te),P[1]),b(w(c(Y,U),-R[1]),w(c(B,O),F[1]))),-z[2]))),D[3]),w(b(b(w(b(w(c(ke,be),F[1]),b(w(c(Fe,J),-_[1]),w(c(de,X),z[1]))),R[2]),w(b(w(c(ke,be),R[1]),b(w(c(Le,oe),-_[1]),w(c(se,q),z[1]))),-F[2])),b(w(b(w(c(Fe,J),R[1]),b(w(c(Le,oe),-F[1]),w(c(ae,te),z[1]))),_[2]),w(b(w(c(de,X),R[1]),b(w(c(se,q),-F[1]),w(c(ae,te),_[1]))),-z[2]))),P[3]))),b(b(w(b(b(w(b(w(c(ke,be),F[1]),b(w(c(Fe,J),-_[1]),w(c(de,X),z[1]))),P[2]),w(b(w(c(ke,be),P[1]),b(w(c(Ce,j),-_[1]),w(c(ne,H),z[1]))),-F[2])),b(w(b(w(c(Fe,J),P[1]),b(w(c(Ce,j),-F[1]),w(c(Y,U),z[1]))),_[2]),w(b(w(c(de,X),P[1]),b(w(c(ne,H),-F[1]),w(c(Y,U),_[1]))),-z[2]))),-R[3]),w(b(b(w(b(w(c(ke,be),R[1]),b(w(c(Le,oe),-_[1]),w(c(se,q),z[1]))),P[2]),w(b(w(c(ke,be),P[1]),b(w(c(Ce,j),-_[1]),w(c(ne,H),z[1]))),-R[2])),b(w(b(w(c(Le,oe),P[1]),b(w(c(Ce,j),-R[1]),w(c(B,O),z[1]))),_[2]),w(b(w(c(se,q),P[1]),b(w(c(ne,H),-R[1]),w(c(B,O),_[1]))),-z[2]))),F[3])),b(w(b(b(w(b(w(c(Fe,J),R[1]),b(w(c(Le,oe),-F[1]),w(c(ae,te),z[1]))),P[2]),w(b(w(c(Fe,J),P[1]),b(w(c(Ce,j),-F[1]),w(c(Y,U),z[1]))),-R[2])),b(w(b(w(c(Le,oe),P[1]),b(w(c(Ce,j),-R[1]),w(c(B,O),z[1]))),F[2]),w(b(w(c(ae,te),P[1]),b(w(c(Y,U),-R[1]),w(c(B,O),F[1]))),-z[2]))),-_[3]),w(b(b(w(b(w(c(de,X),R[1]),b(w(c(se,q),-F[1]),w(c(ae,te),_[1]))),P[2]),w(b(w(c(de,X),P[1]),b(w(c(ne,H),-F[1]),w(c(Y,U),_[1]))),-R[2])),b(w(b(w(c(se,q),P[1]),b(w(c(ne,H),-R[1]),w(c(B,O),_[1]))),F[2]),w(b(w(c(ae,te),P[1]),b(w(c(Y,U),-R[1]),w(c(B,O),F[1]))),-_[2]))),z[3]))))),mt=c(nt,ct);return mt[mt.length-1]}return E}var g=[p,f,l];function m(b){var c=g[b.length];return c||(c=g[b.length]=v(b.length)),c.apply(void 0,b)}function d(b,c,S,w,E,P,R,F){function _(z,D,k,O,U,H){switch(arguments.length){case 0:case 1:return 0;case 2:return w(z,D);case 3:return E(z,D,k);case 4:return P(z,D,k,O);case 5:return R(z,D,k,O,U);case 6:return F(z,D,k,O,U,H)}for(var j=new Array(arguments.length),ee=0;ee<arguments.length;++ee)j[ee]=arguments[ee];return b(j)}return _}function A(){for(;g.length<=o;)g.push(v(g.length));t.exports=d.apply(void 0,[m].concat(g));for(var b=0;b<=o;++b)t.exports[b]=g[b]}A()},6606:function(t,T,n){"use strict";var i=n(8167),u=6;function a(g){var m=2===g?v:3===g?p:4===g?f:5===g?l:y;return m(g<6?i[g]:i)}function r(){return[[0]]}function o(g,m){return[[m[0]],[g[0][0]]]}function v(g){return function(d,A){return[g([[+A[0],+d[0][1]],[+A[1],+d[1][1]]]),g([[+d[0][0],+A[0]],[+d[1][0],+A[1]]]),g(d)]}}function p(g){return function(d,A){return[g([[+A[0],+d[0][1],+d[0][2]],[+A[1],+d[1][1],+d[1][2]],[+A[2],+d[2][1],+d[2][2]]]),g([[+d[0][0],+A[0],+d[0][2]],[+d[1][0],+A[1],+d[1][2]],[+d[2][0],+A[2],+d[2][2]]]),g([[+d[0][0],+d[0][1],+A[0]],[+d[1][0],+d[1][1],+A[1]],[+d[2][0],+d[2][1],+A[2]]]),g(d)]}}function f(g){return function(d,A){return[g([[+A[0],+d[0][1],+d[0][2],+d[0][3]],[+A[1],+d[1][1],+d[1][2],+d[1][3]],[+A[2],+d[2][1],+d[2][2],+d[2][3]],[+A[3],+d[3][1],+d[3][2],+d[3][3]]]),g([[+d[0][0],+A[0],+d[0][2],+d[0][3]],[+d[1][0],+A[1],+d[1][2],+d[1][3]],[+d[2][0],+A[2],+d[2][2],+d[2][3]],[+d[3][0],+A[3],+d[3][2],+d[3][3]]]),g([[+d[0][0],+d[0][1],+A[0],+d[0][3]],[+d[1][0],+d[1][1],+A[1],+d[1][3]],[+d[2][0],+d[2][1],+A[2],+d[2][3]],[+d[3][0],+d[3][1],+A[3],+d[3][3]]]),g([[+d[0][0],+d[0][1],+d[0][2],+A[0]],[+d[1][0],+d[1][1],+d[1][2],+A[1]],[+d[2][0],+d[2][1],+d[2][2],+A[2]],[+d[3][0],+d[3][1],+d[3][2],+A[3]]]),g(d)]}}function l(g){return function(d,A){return[g([[+A[0],+d[0][1],+d[0][2],+d[0][3],+d[0][4]],[+A[1],+d[1][1],+d[1][2],+d[1][3],+d[1][4]],[+A[2],+d[2][1],+d[2][2],+d[2][3],+d[2][4]],[+A[3],+d[3][1],+d[3][2],+d[3][3],+d[3][4]],[+A[4],+d[4][1],+d[4][2],+d[4][3],+d[4][4]]]),g([[+d[0][0],+A[0],+d[0][2],+d[0][3],+d[0][4]],[+d[1][0],+A[1],+d[1][2],+d[1][3],+d[1][4]],[+d[2][0],+A[2],+d[2][2],+d[2][3],+d[2][4]],[+d[3][0],+A[3],+d[3][2],+d[3][3],+d[3][4]],[+d[4][0],+A[4],+d[4][2],+d[4][3],+d[4][4]]]),g([[+d[0][0],+d[0][1],+A[0],+d[0][3],+d[0][4]],[+d[1][0],+d[1][1],+A[1],+d[1][3],+d[1][4]],[+d[2][0],+d[2][1],+A[2],+d[2][3],+d[2][4]],[+d[3][0],+d[3][1],+A[3],+d[3][3],+d[3][4]],[+d[4][0],+d[4][1],+A[4],+d[4][3],+d[4][4]]]),g([[+d[0][0],+d[0][1],+d[0][2],+A[0],+d[0][4]],[+d[1][0],+d[1][1],+d[1][2],+A[1],+d[1][4]],[+d[2][0],+d[2][1],+d[2][2],+A[2],+d[2][4]],[+d[3][0],+d[3][1],+d[3][2],+A[3],+d[3][4]],[+d[4][0],+d[4][1],+d[4][2],+A[4],+d[4][4]]]),g([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+A[0]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+A[1]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+A[2]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+A[3]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+A[4]]]),g(d)]}}function y(g){return function(d,A){return[g([[+A[0],+d[0][1],+d[0][2],+d[0][3],+d[0][4],+d[0][5]],[+A[1],+d[1][1],+d[1][2],+d[1][3],+d[1][4],+d[1][5]],[+A[2],+d[2][1],+d[2][2],+d[2][3],+d[2][4],+d[2][5]],[+A[3],+d[3][1],+d[3][2],+d[3][3],+d[3][4],+d[3][5]],[+A[4],+d[4][1],+d[4][2],+d[4][3],+d[4][4],+d[4][5]],[+A[5],+d[5][1],+d[5][2],+d[5][3],+d[5][4],+d[5][5]]]),g([[+d[0][0],+A[0],+d[0][2],+d[0][3],+d[0][4],+d[0][5]],[+d[1][0],+A[1],+d[1][2],+d[1][3],+d[1][4],+d[1][5]],[+d[2][0],+A[2],+d[2][2],+d[2][3],+d[2][4],+d[2][5]],[+d[3][0],+A[3],+d[3][2],+d[3][3],+d[3][4],+d[3][5]],[+d[4][0],+A[4],+d[4][2],+d[4][3],+d[4][4],+d[4][5]],[+d[5][0],+A[5],+d[5][2],+d[5][3],+d[5][4],+d[5][5]]]),g([[+d[0][0],+d[0][1],+A[0],+d[0][3],+d[0][4],+d[0][5]],[+d[1][0],+d[1][1],+A[1],+d[1][3],+d[1][4],+d[1][5]],[+d[2][0],+d[2][1],+A[2],+d[2][3],+d[2][4],+d[2][5]],[+d[3][0],+d[3][1],+A[3],+d[3][3],+d[3][4],+d[3][5]],[+d[4][0],+d[4][1],+A[4],+d[4][3],+d[4][4],+d[4][5]],[+d[5][0],+d[5][1],+A[5],+d[5][3],+d[5][4],+d[5][5]]]),g([[+d[0][0],+d[0][1],+d[0][2],+A[0],+d[0][4],+d[0][5]],[+d[1][0],+d[1][1],+d[1][2],+A[1],+d[1][4],+d[1][5]],[+d[2][0],+d[2][1],+d[2][2],+A[2],+d[2][4],+d[2][5]],[+d[3][0],+d[3][1],+d[3][2],+A[3],+d[3][4],+d[3][5]],[+d[4][0],+d[4][1],+d[4][2],+A[4],+d[4][4],+d[4][5]],[+d[5][0],+d[5][1],+d[5][2],+A[5],+d[5][4],+d[5][5]]]),g([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+A[0],+d[0][5]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+A[1],+d[1][5]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+A[2],+d[2][5]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+A[3],+d[3][5]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+A[4],+d[4][5]],[+d[5][0],+d[5][1],+d[5][2],+d[5][3],+A[5],+d[5][5]]]),g([[+d[0][0],+d[0][1],+d[0][2],+d[0][3],+d[0][4],+A[0]],[+d[1][0],+d[1][1],+d[1][2],+d[1][3],+d[1][4],+A[1]],[+d[2][0],+d[2][1],+d[2][2],+d[2][3],+d[2][4],+A[2]],[+d[3][0],+d[3][1],+d[3][2],+d[3][3],+d[3][4],+A[3]],[+d[4][0],+d[4][1],+d[4][2],+d[4][3],+d[4][4],+A[4]],[+d[5][0],+d[5][1],+d[5][2],+d[5][3],+d[5][4],+A[5]]]),g(d)]}}var s=[r,o];function x(g,m,d,A,b,c,S,w){return function(P,R){switch(P.length){case 0:return g(P,R);case 1:return m(P,R);case 2:return d(P,R);case 3:return A(P,R);case 4:return b(P,R);case 5:return c(P,R)}var F=S[P.length];return F||(F=S[P.length]=w(P.length)),F(P,R)}}function h(){for(;s.length<u;)s.push(a(s.length));t.exports=x.apply(void 0,s.concat([s,a]));for(var g=0;g<u;++g)t.exports[g]=s[g]}h()},417:function(t,T,n){"use strict";var i=n(9660),u=n(9662),a=n(8289),r=n(4078),o=5,v=11102230246251565e-32,p=(3+16*v)*v,f=(7+56*v)*v;function l(c,S,w,E){return function(R,F,_){var z=c(c(S(F[1],_[0]),S(-_[1],F[0])),c(S(R[1],F[0]),S(-F[1],R[0]))),D=c(S(R[1],_[0]),S(-_[1],R[0])),k=E(z,D);return k[k.length-1]}}function y(c,S,w,E){return function(R,F,_,z){var D=c(c(w(c(S(_[1],z[0]),S(-z[1],_[0])),F[2]),c(w(c(S(F[1],z[0]),S(-z[1],F[0])),-_[2]),w(c(S(F[1],_[0]),S(-_[1],F[0])),z[2]))),c(w(c(S(F[1],z[0]),S(-z[1],F[0])),R[2]),c(w(c(S(R[1],z[0]),S(-z[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),z[2])))),k=c(c(w(c(S(_[1],z[0]),S(-z[1],_[0])),R[2]),c(w(c(S(R[1],z[0]),S(-z[1],R[0])),-_[2]),w(c(S(R[1],_[0]),S(-_[1],R[0])),z[2]))),c(w(c(S(F[1],_[0]),S(-_[1],F[0])),R[2]),c(w(c(S(R[1],_[0]),S(-_[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),_[2])))),O=E(D,k);return O[O.length-1]}}function s(c,S,w,E){return function(R,F,_,z,D){var k=c(c(c(w(c(w(c(S(z[1],D[0]),S(-D[1],z[0])),_[2]),c(w(c(S(_[1],D[0]),S(-D[1],_[0])),-z[2]),w(c(S(_[1],z[0]),S(-z[1],_[0])),D[2]))),F[3]),c(w(c(w(c(S(z[1],D[0]),S(-D[1],z[0])),F[2]),c(w(c(S(F[1],D[0]),S(-D[1],F[0])),-z[2]),w(c(S(F[1],z[0]),S(-z[1],F[0])),D[2]))),-_[3]),w(c(w(c(S(_[1],D[0]),S(-D[1],_[0])),F[2]),c(w(c(S(F[1],D[0]),S(-D[1],F[0])),-_[2]),w(c(S(F[1],_[0]),S(-_[1],F[0])),D[2]))),z[3]))),c(w(c(w(c(S(_[1],z[0]),S(-z[1],_[0])),F[2]),c(w(c(S(F[1],z[0]),S(-z[1],F[0])),-_[2]),w(c(S(F[1],_[0]),S(-_[1],F[0])),z[2]))),-D[3]),c(w(c(w(c(S(z[1],D[0]),S(-D[1],z[0])),F[2]),c(w(c(S(F[1],D[0]),S(-D[1],F[0])),-z[2]),w(c(S(F[1],z[0]),S(-z[1],F[0])),D[2]))),R[3]),w(c(w(c(S(z[1],D[0]),S(-D[1],z[0])),R[2]),c(w(c(S(R[1],D[0]),S(-D[1],R[0])),-z[2]),w(c(S(R[1],z[0]),S(-z[1],R[0])),D[2]))),-F[3])))),c(c(w(c(w(c(S(F[1],D[0]),S(-D[1],F[0])),R[2]),c(w(c(S(R[1],D[0]),S(-D[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),D[2]))),z[3]),c(w(c(w(c(S(F[1],z[0]),S(-z[1],F[0])),R[2]),c(w(c(S(R[1],z[0]),S(-z[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),z[2]))),-D[3]),w(c(w(c(S(_[1],z[0]),S(-z[1],_[0])),F[2]),c(w(c(S(F[1],z[0]),S(-z[1],F[0])),-_[2]),w(c(S(F[1],_[0]),S(-_[1],F[0])),z[2]))),R[3]))),c(w(c(w(c(S(_[1],z[0]),S(-z[1],_[0])),R[2]),c(w(c(S(R[1],z[0]),S(-z[1],R[0])),-_[2]),w(c(S(R[1],_[0]),S(-_[1],R[0])),z[2]))),-F[3]),c(w(c(w(c(S(F[1],z[0]),S(-z[1],F[0])),R[2]),c(w(c(S(R[1],z[0]),S(-z[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),z[2]))),_[3]),w(c(w(c(S(F[1],_[0]),S(-_[1],F[0])),R[2]),c(w(c(S(R[1],_[0]),S(-_[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),_[2]))),-z[3]))))),O=c(c(c(w(c(w(c(S(z[1],D[0]),S(-D[1],z[0])),_[2]),c(w(c(S(_[1],D[0]),S(-D[1],_[0])),-z[2]),w(c(S(_[1],z[0]),S(-z[1],_[0])),D[2]))),R[3]),w(c(w(c(S(z[1],D[0]),S(-D[1],z[0])),R[2]),c(w(c(S(R[1],D[0]),S(-D[1],R[0])),-z[2]),w(c(S(R[1],z[0]),S(-z[1],R[0])),D[2]))),-_[3])),c(w(c(w(c(S(_[1],D[0]),S(-D[1],_[0])),R[2]),c(w(c(S(R[1],D[0]),S(-D[1],R[0])),-_[2]),w(c(S(R[1],_[0]),S(-_[1],R[0])),D[2]))),z[3]),w(c(w(c(S(_[1],z[0]),S(-z[1],_[0])),R[2]),c(w(c(S(R[1],z[0]),S(-z[1],R[0])),-_[2]),w(c(S(R[1],_[0]),S(-_[1],R[0])),z[2]))),-D[3]))),c(c(w(c(w(c(S(_[1],D[0]),S(-D[1],_[0])),F[2]),c(w(c(S(F[1],D[0]),S(-D[1],F[0])),-_[2]),w(c(S(F[1],_[0]),S(-_[1],F[0])),D[2]))),R[3]),w(c(w(c(S(_[1],D[0]),S(-D[1],_[0])),R[2]),c(w(c(S(R[1],D[0]),S(-D[1],R[0])),-_[2]),w(c(S(R[1],_[0]),S(-_[1],R[0])),D[2]))),-F[3])),c(w(c(w(c(S(F[1],D[0]),S(-D[1],F[0])),R[2]),c(w(c(S(R[1],D[0]),S(-D[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),D[2]))),_[3]),w(c(w(c(S(F[1],_[0]),S(-_[1],F[0])),R[2]),c(w(c(S(R[1],_[0]),S(-_[1],R[0])),-F[2]),w(c(S(R[1],F[0]),S(-F[1],R[0])),_[2]))),-D[3])))),U=E(k,O);return U[U.length-1]}}function x(c){return(3===c?l:4===c?y:s)(u,i,a,r)}var h=x(3),g=x(4),m=[function(){return 0},function(){return 0},function(S,w){return w[0]-S[0]},function(S,w,E){var _,P=(S[1]-E[1])*(w[0]-E[0]),R=(S[0]-E[0])*(w[1]-E[1]),F=P-R;if(P>0){if(R<=0)return F;_=P+R}else{if(!(P<0))return F;if(R>=0)return F;_=-(P+R)}var z=p*_;return F>=z||F<=-z?F:h(S,w,E)},function(S,w,E,P){var R=S[0]-P[0],F=w[0]-P[0],_=E[0]-P[0],z=S[1]-P[1],D=w[1]-P[1],k=E[1]-P[1],O=S[2]-P[2],U=w[2]-P[2],H=E[2]-P[2],j=F*k,ee=_*D,W=_*z,B=R*k,te=R*D,q=F*z,oe=O*(j-ee)+U*(W-B)+H*(te-q),ie=(Math.abs(j)+Math.abs(ee))*Math.abs(O)+(Math.abs(W)+Math.abs(B))*Math.abs(U)+(Math.abs(te)+Math.abs(q))*Math.abs(H),V=f*ie;return oe>V||-oe>V?oe:g(S,w,E,P)}];function d(c){var S=m[c.length];return S||(S=m[c.length]=x(c.length)),S.apply(void 0,c)}function A(c,S,w,E,P,R,F){return function(z,D,k,O,U){switch(arguments.length){case 0:case 1:return 0;case 2:return E(z,D);case 3:return P(z,D,k);case 4:return R(z,D,k,O);case 5:return F(z,D,k,O,U)}for(var H=new Array(arguments.length),j=0;j<arguments.length;++j)H[j]=arguments[j];return c(H)}}function b(){for(;m.length<=o;)m.push(x(m.length));t.exports=A.apply(void 0,[d].concat(m));for(var c=0;c<=o;++c)t.exports[c]=m[c]}b()},2019:function(t,T,n){"use strict";var i=n(9662),u=n(8289);function a(r,o){if(1===r.length)return u(o,r[0]);if(1===o.length)return u(r,o[0]);if(0===r.length||0===o.length)return[0];var v=[0];if(r.length<o.length)for(var p=0;p<r.length;++p)v=i(v,u(o,r[p]));else for(p=0;p<o.length;++p)v=i(v,u(r,o[p]));return v}t.exports=a},8289:function(t,T,n){"use strict";var i=n(9660),u=n(87);function a(r,o){var v=r.length;if(1===v){var p=i(r[0],o);return p[0]?p:[p[1]]}var f=new Array(2*v),l=[.1,.1],y=[.1,.1],s=0;i(r[0],o,l),l[0]&&(f[s++]=l[0]);for(var x=1;x<v;++x){i(r[x],o,y);var h=l[1];u(h,y[0],l),l[0]&&(f[s++]=l[0]);var g=y[1],m=l[1],d=g+m,b=m-(d-g);l[1]=d,b&&(f[s++]=b)}return l[1]&&(f[s++]=l[1]),0===s&&(f[s++]=0),f.length=s,f}t.exports=a},4434:function(t,T,n){"use strict";t.exports=a;var i=n(417)[3];function u(r,o,v,p){for(var f=0;f<2;++f){var l=r[f],y=o[f],s=Math.min(l,y),x=Math.max(l,y),h=v[f],g=p[f],m=Math.min(h,g);if(Math.max(h,g)<s||x<m)return!1}return!0}function a(r,o,v,p){var f=i(r,v,p),l=i(o,v,p);if(f>0&&l>0||f<0&&l<0)return!1;var y=i(v,r,o),s=i(p,r,o);return!(y>0&&s>0||y<0&&s<0)&&(0!==f||0!==l||0!==y||0!==s||u(r,o,v,p))}},4078:function(t){"use strict";function T(i,u){var a=i+u,r=a-i,f=i-(a-r)+(u-r);return f?[f,a]:[a]}function n(i,u){var a=0|i.length,r=0|u.length;if(1===a&&1===r)return T(i[0],-u[0]);var m,d,v=new Array(a+r),p=0,f=0,l=0,y=Math.abs,s=i[f],x=y(s),h=-u[l],g=y(h);x<g?(d=s,(f+=1)<a&&(x=y(s=i[f]))):(d=h,(l+=1)<r&&(g=y(h=-u[l]))),f<a&&x<g||l>=r?(m=s,(f+=1)<a&&(x=y(s=i[f]))):(m=h,(l+=1)<r&&(g=y(h=-u[l])));for(var E,P,A=m+d,b=A-m,c=d-b,S=c,w=A;f<a&&l<r;)x<g?(m=s,(f+=1)<a&&(x=y(s=i[f]))):(m=h,(l+=1)<r&&(g=y(h=-u[l]))),(c=(d=S)-(b=(A=m+d)-m))&&(v[p++]=c),S=w-((E=w+A)-(P=E-w))+(A-P),w=E;for(;f<a;)(c=(d=S)-(b=(A=(m=s)+d)-m))&&(v[p++]=c),S=w-((E=w+A)-(P=E-w))+(A-P),w=E,(f+=1)<a&&(s=i[f]);for(;l<r;)(c=(d=S)-(b=(A=(m=h)+d)-m))&&(v[p++]=c),S=w-((E=w+A)-(P=E-w))+(A-P),w=E,(l+=1)<r&&(h=-u[l]);return S&&(v[p++]=S),w&&(v[p++]=w),p||(v[p++]=0),v.length=p,v}t.exports=n},9662:function(t){"use strict";function T(i,u){var a=i+u,r=a-i,f=i-(a-r)+(u-r);return f?[f,a]:[a]}function n(i,u){var a=0|i.length,r=0|u.length;if(1===a&&1===r)return T(i[0],u[0]);var m,d,v=new Array(a+r),p=0,f=0,l=0,y=Math.abs,s=i[f],x=y(s),h=u[l],g=y(h);x<g?(d=s,(f+=1)<a&&(x=y(s=i[f]))):(d=h,(l+=1)<r&&(g=y(h=u[l]))),f<a&&x<g||l>=r?(m=s,(f+=1)<a&&(x=y(s=i[f]))):(m=h,(l+=1)<r&&(g=y(h=u[l])));for(var E,P,A=m+d,b=A-m,c=d-b,S=c,w=A;f<a&&l<r;)x<g?(m=s,(f+=1)<a&&(x=y(s=i[f]))):(m=h,(l+=1)<r&&(g=y(h=u[l]))),(c=(d=S)-(b=(A=m+d)-m))&&(v[p++]=c),S=w-((E=w+A)-(P=E-w))+(A-P),w=E;for(;f<a;)(c=(d=S)-(b=(A=(m=s)+d)-m))&&(v[p++]=c),S=w-((E=w+A)-(P=E-w))+(A-P),w=E,(f+=1)<a&&(s=i[f]);for(;l<r;)(c=(d=S)-(b=(A=(m=h)+d)-m))&&(v[p++]=c),S=w-((E=w+A)-(P=E-w))+(A-P),w=E,(l+=1)<r&&(h=u[l]);return S&&(v[p++]=S),w&&(v[p++]=w),p||(v[p++]=0),v.length=p,v}t.exports=n},8691:function(t,T,n){"use strict";t.exports=a;var i=n(2692),u=n(7037);function a(r){return u(i(r))}},7212:function(t,T,n){"use strict";t.exports=s;var i=n(5050),u=n(5306),a=n(8729),r=n(1168);function o(x){for(var h=x.length,g=0,m=0;m<h;++m)g=0|Math.max(g,x[m].length);return g-1}function v(x,h){for(var g=x.length,m=u.mallocUint8(g),d=0;d<g;++d)m[d]=x[d]<h|0;return m}function p(x,h){for(var g=x.length,m=h*(h+1)/2*g|0,d=u.mallocUint32(2*m),A=0,b=0;b<g;++b)for(var c=x[b],S=(h=c.length,0);S<h;++S)for(var w=0;w<S;++w){var E=c[w],P=c[S];d[A++]=0|Math.min(E,P),d[A++]=0|Math.max(E,P)}a(i(d,[A/2|0,2]));var F=2;for(b=2;b<A;b+=2)d[b-2]===d[b]&&d[b-1]===d[b+1]||(d[F++]=d[b],d[F++]=d[b+1]);return i(d,[F/2|0,2])}function f(x,h,g,m){for(var d=x.data,A=x.shape[0],b=u.mallocDouble(A),c=0,S=0;S<A;++S){var w=d[2*S],E=d[2*S+1];if(g[w]!==g[E]){var P=h[w],R=h[E];d[2*c]=w,d[2*c+1]=E,b[c++]=(R-m)/(R-P)}}return x.shape[0]=c,i(b,[c])}function l(x,h){var g=u.mallocInt32(2*h),m=x.shape[0],d=x.data;g[0]=0;for(var A=0,b=0;b<m;++b){var c=d[2*b];if(c!==A){for(g[2*A+1]=b;++A<c;)g[2*A]=b,g[2*A+1]=b;g[2*A]=b}}for(g[2*A+1]=m;++A<h;)g[2*A]=g[2*A+1]=m;return g}function y(x){for(var h=0|x.shape[0],g=x.data,m=new Array(h),d=0;d<h;++d)m[d]=[g[2*d],g[2*d+1]];return m}function s(x,h,g,m){if(g=g||0,typeof m>"u"&&(m=o(x)),0===x.length||m<1)return{cells:[],vertexIds:[],vertexWeights:[]};var A=v(h,+g),b=p(x,m),c=f(b,h,A,+g),S=l(b,0|h.length),w=r(m)(x,b.data,S,A),E=y(b),P=[].slice.call(c.data,0,c.shape[0]);return u.free(A),u.free(b.data),u.free(c.data),u.free(S),{cells:w,vertexIds:E,vertexWeights:P}}},1168:function(t){"use strict";t.exports=n;var T=[function(){function a(r,o,v,p){for(var f=r.length,l=[],y=0;y<f;++y)r[y].length;return l}return a},function(){function u(r,o,v,p){for(var f=0|Math.min(v,p),l=0|Math.max(v,p),y=r[2*f],s=r[2*f+1];y<s;){var x=y+s>>1,h=o[2*x+1];if(h===l)return x;l<h?s=x:y=x+1}return y}function a(r,o,v,p){for(var f=r.length,l=[],y=0;y<f;++y){var s=r[y];if(2===s.length){var h=(p[s[0]]<<0)+(p[s[1]]<<1);if(0===h||3===h)continue;switch(h){case 0:case 3:break;case 1:l.push([u(v,o,s[0],s[1])]);break;case 2:l.push([u(v,o,s[1],s[0])])}}}return l}return a},function(){function u(r,o,v,p){for(var f=0|Math.min(v,p),l=0|Math.max(v,p),y=r[2*f],s=r[2*f+1];y<s;){var x=y+s>>1,h=o[2*x+1];if(h===l)return x;l<h?s=x:y=x+1}return y}function a(r,o,v,p){for(var f=r.length,l=[],y=0;y<f;++y){var s=r[y],x=s.length;if(3===x){if(0==(h=(p[s[0]]<<0)+(p[s[1]]<<1)+(p[s[2]]<<2))||7===h)continue;switch(h){case 0:case 7:break;case 1:l.push([u(v,o,s[0],s[2]),u(v,o,s[0],s[1])]);break;case 2:l.push([u(v,o,s[1],s[0]),u(v,o,s[1],s[2])]);break;case 3:l.push([u(v,o,s[0],s[2]),u(v,o,s[1],s[2])]);break;case 4:l.push([u(v,o,s[2],s[1]),u(v,o,s[2],s[0])]);break;case 5:l.push([u(v,o,s[2],s[1]),u(v,o,s[0],s[1])]);break;case 6:l.push([u(v,o,s[1],s[0]),u(v,o,s[2],s[0])])}}else if(2===x){var h;if(0==(h=(p[s[0]]<<0)+(p[s[1]]<<1))||3===h)continue;switch(h){case 0:case 3:break;case 1:l.push([u(v,o,s[0],s[1])]);break;case 2:l.push([u(v,o,s[1],s[0])])}}}return l}return a},function(){function u(r,o,v,p){for(var f=0|Math.min(v,p),l=0|Math.max(v,p),y=r[2*f],s=r[2*f+1];y<s;){var x=y+s>>1,h=o[2*x+1];if(h===l)return x;l<h?s=x:y=x+1}return y}function a(r,o,v,p){for(var f=r.length,l=[],y=0;y<f;++y){var s=r[y],x=s.length;if(4===x){if(0==(h=(p[s[0]]<<0)+(p[s[1]]<<1)+(p[s[2]]<<2)+(p[s[3]]<<3))||15===h)continue;switch(h){case 0:case 15:break;case 1:l.push([u(v,o,s[0],s[1]),u(v,o,s[0],s[2]),u(v,o,s[0],s[3])]);break;case 2:l.push([u(v,o,s[1],s[2]),u(v,o,s[1],s[0]),u(v,o,s[1],s[3])]);break;case 3:l.push([u(v,o,s[1],s[2]),u(v,o,s[0],s[2]),u(v,o,s[0],s[3])],[u(v,o,s[1],s[3]),u(v,o,s[1],s[2]),u(v,o,s[0],s[3])]);break;case 4:l.push([u(v,o,s[2],s[0]),u(v,o,s[2],s[1]),u(v,o,s[2],s[3])]);break;case 5:l.push([u(v,o,s[0],s[1]),u(v,o,s[2],s[1]),u(v,o,s[0],s[3])],[u(v,o,s[2],s[1]),u(v,o,s[2],s[3]),u(v,o,s[0],s[3])]);break;case 6:l.push([u(v,o,s[2],s[0]),u(v,o,s[1],s[0]),u(v,o,s[1],s[3])],[u(v,o,s[2],s[3]),u(v,o,s[2],s[0]),u(v,o,s[1],s[3])]);break;case 7:l.push([u(v,o,s[0],s[3]),u(v,o,s[1],s[3]),u(v,o,s[2],s[3])]);break;case 8:l.push([u(v,o,s[3],s[1]),u(v,o,s[3],s[0]),u(v,o,s[3],s[2])]);break;case 9:l.push([u(v,o,s[3],s[1]),u(v,o,s[0],s[1]),u(v,o,s[0],s[2])],[u(v,o,s[3],s[2]),u(v,o,s[3],s[1]),u(v,o,s[0],s[2])]);break;case 10:l.push([u(v,o,s[1],s[0]),u(v,o,s[3],s[0]),u(v,o,s[1],s[2])],[u(v,o,s[3],s[0]),u(v,o,s[3],s[2]),u(v,o,s[1],s[2])]);break;case 11:l.push([u(v,o,s[1],s[2]),u(v,o,s[0],s[2]),u(v,o,s[3],s[2])]);break;case 12:l.push([u(v,o,s[3],s[0]),u(v,o,s[2],s[0]),u(v,o,s[2],s[1])],[u(v,o,s[3],s[1]),u(v,o,s[3],s[0]),u(v,o,s[2],s[1])]);break;case 13:l.push([u(v,o,s[0],s[1]),u(v,o,s[2],s[1]),u(v,o,s[3],s[1])]);break;case 14:l.push([u(v,o,s[2],s[0]),u(v,o,s[1],s[0]),u(v,o,s[3],s[0])])}}else if(3===x){if(0==(h=(p[s[0]]<<0)+(p[s[1]]<<1)+(p[s[2]]<<2))||7===h)continue;switch(h){case 0:case 7:break;case 1:l.push([u(v,o,s[0],s[2]),u(v,o,s[0],s[1])]);break;case 2:l.push([u(v,o,s[1],s[0]),u(v,o,s[1],s[2])]);break;case 3:l.push([u(v,o,s[0],s[2]),u(v,o,s[1],s[2])]);break;case 4:l.push([u(v,o,s[2],s[1]),u(v,o,s[2],s[0])]);break;case 5:l.push([u(v,o,s[2],s[1]),u(v,o,s[0],s[1])]);break;case 6:l.push([u(v,o,s[1],s[0]),u(v,o,s[2],s[0])])}}else if(2===x){var h;if(0==(h=(p[s[0]]<<0)+(p[s[1]]<<1))||3===h)continue;switch(h){case 0:case 3:break;case 1:l.push([u(v,o,s[0],s[1])]);break;case 2:l.push([u(v,o,s[1],s[0])])}}}return l}return a}];function n(i){return T[i]()}},8211:function(t,T,n){"use strict";function p(S,w){var E=S.length,P=S.length-w.length,R=Math.min;if(P)return P;switch(E){case 0:return 0;case 1:return S[0]-w[0];case 2:return(k=S[0]+S[1]-w[0]-w[1])||R(S[0],S[1])-R(w[0],w[1]);case 3:var F=S[0]+S[1],_=w[0]+w[1];if(k=F+S[2]-(_+w[2]))return k;var k,z=R(S[0],S[1]),D=R(w[0],w[1]);return(k=R(z,S[2])-R(D,w[2]))||R(z+S[2],F)-R(D+w[2],_);default:var O=S.slice(0);O.sort();var U=w.slice(0);U.sort();for(var H=0;H<E;++H)if(P=O[H]-U[H])return P;return 0}}n(2288),n(1731),T.H=p},9392:function(t,T){"use strict";var n=32;function i(a){var r=32;return(a&=-a)&&r--,65535&a&&(r-=16),16711935&a&&(r-=8),252645135&a&&(r-=4),858993459&a&&(r-=2),1431655765&a&&(r-=1),r}T.INT_BITS=n,T.INT_MAX=2147483647,T.INT_MIN=-1<<n-1,T.sign=function(a){return(a>0)-(a<0)},T.abs=function(a){var r=a>>n-1;return(a^r)-r},T.min=function(a,r){return r^(a^r)&-(a<r)},T.max=function(a,r){return a^(a^r)&-(a<r)},T.isPow2=function(a){return!(a&a-1||!a)},T.log2=function(a){var r,o;return r=(a>65535)<<4,r|=o=((a>>>=r)>255)<<3,r|=o=((a>>>=o)>15)<<2,(r|=o=((a>>>=o)>3)<<1)|(a>>>=o)>>1},T.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},T.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},T.countTrailingZeros=i,T.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,1+(a|=a>>>16)},T.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},T.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var u=new Array(256);(function(a){for(var r=0;r<256;++r){var o=r,v=r,p=7;for(o>>>=1;o;o>>>=1)v<<=1,v|=1&o,--p;a[r]=v<<p&255}})(u),T.reverse=function(a){return u[255&a]<<24|u[a>>>8&255]<<16|u[a>>>16&255]<<8|u[a>>>24&255]},T.interleave2=function(a,r){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},T.deinterleave2=function(a,r){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>r&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},T.interleave3=function(a,r,o){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<2},T.deinterleave3=function(a,r){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>r&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},T.nextCombination=function(a){var r=a|a-1;return r+1|(~r&-~r)-1>>>i(a)+1}},6656:function(t,T,n){"use strict";var i=n(9392),u=n(9521);function a(c){for(var S=0,w=Math.max,E=0,P=c.length;E<P;++E)S=w(S,c[E].length);return S-1}function r(c){for(var S=-1,w=Math.max,E=0,P=c.length;E<P;++E)for(var R=c[E],F=0,_=R.length;F<_;++F)S=w(S,R[F]);return S+1}function o(c){for(var S=new Array(c.length),w=0,E=c.length;w<E;++w)S[w]=c[w].slice(0);return S}function v(c,S){var w=c.length,E=c.length-S.length,P=Math.min;if(E)return E;switch(w){case 0:return 0;case 1:return c[0]-S[0];case 2:return(D=c[0]+c[1]-S[0]-S[1])||P(c[0],c[1])-P(S[0],S[1]);case 3:var R=c[0]+c[1],F=S[0]+S[1];if(D=R+c[2]-(F+S[2]))return D;var D,_=P(c[0],c[1]),z=P(S[0],S[1]);return(D=P(_,c[2])-P(z,S[2]))||P(_+c[2],R)-P(z+S[2],F);default:var k=c.slice(0);k.sort();var O=S.slice(0);O.sort();for(var U=0;U<w;++U)if(E=k[U]-O[U])return E;return 0}}function p(c,S){return v(c[0],S[0])}function f(c,S){if(S){for(var w=c.length,E=new Array(w),P=0;P<w;++P)E[P]=[c[P],S[P]];for(E.sort(p),P=0;P<w;++P)c[P]=E[P][0],S[P]=E[P][1];return c}return c.sort(v),c}function l(c){if(0===c.length)return[];for(var S=1,w=c.length,E=1;E<w;++E){var P=c[E];if(v(P,c[E-1])){if(E===S){S++;continue}c[S++]=P}}return c.length=S,c}function y(c,S){for(var w=0,E=c.length-1,P=-1;w<=E;){var R=w+E>>1,F=v(c[R],S);F<=0?(0===F&&(P=R),w=R+1):F>0&&(E=R-1)}return P}function s(c,S){for(var w=new Array(c.length),E=0,P=w.length;E<P;++E)w[E]=[];for(var R=[],F=(E=0,S.length);E<F;++E)for(var _=S[E],z=_.length,D=1,k=1<<z;D<k;++D){R.length=i.popCount(D);for(var O=0,U=0;U<z;++U)D&1<<U&&(R[O++]=_[U]);var H=y(c,R);if(!(H<0))for(;w[H++].push(E),!(H>=c.length||0!==v(c[H],R)););}return w}function x(c,S){if(!S)return s(l(g(c,0)),c,0);for(var w=new Array(S),E=0;E<S;++E)w[E]=[];E=0;for(var P=c.length;E<P;++E)for(var R=c[E],F=0,_=R.length;F<_;++F)w[R[F]].push(E);return w}function h(c){for(var S=[],w=0,E=c.length;w<E;++w)for(var P=c[w],R=0|P.length,F=1,_=1<<R;F<_;++F){for(var z=[],D=0;D<R;++D)F>>>D&1&&z.push(P[D]);S.push(z)}return f(S)}function g(c,S){if(S<0)return[];for(var w=[],E=(1<<S+1)-1,P=0;P<c.length;++P)for(var R=c[P],F=E;F<1<<R.length;F=i.nextCombination(F)){for(var _=new Array(S+1),z=0,D=0;D<R.length;++D)F&1<<D&&(_[z++]=R[D]);w.push(_)}return f(w)}function m(c){for(var S=[],w=0,E=c.length;w<E;++w)for(var P=c[w],R=0,F=P.length;R<F;++R){for(var _=new Array(P.length-1),z=0,D=0;z<F;++z)z!==R&&(_[D++]=P[z]);S.push(_)}return f(S)}function d(c,S){for(var w=new u(S),E=0;E<c.length;++E)for(var P=c[E],R=0;R<P.length;++R)for(var F=R+1;F<P.length;++F)w.link(P[R],P[F]);var _=[],z=w.ranks;for(E=0;E<z.length;++E)z[E]=-1;for(E=0;E<c.length;++E){var D=w.find(c[E][0]);z[D]<0?(z[D]=_.length,_.push([c[E].slice(0)])):_[z[D]].push(c[E].slice(0))}return _}function A(c){for(var S=l(f(g(c,0))),w=new u(S.length),E=0;E<c.length;++E)for(var P=c[E],R=0;R<P.length;++R)for(var F=y(S,[P[R]]),_=R+1;_<P.length;++_)w.link(F,y(S,[P[_]]));var z=[],D=w.ranks;for(E=0;E<D.length;++E)D[E]=-1;for(E=0;E<c.length;++E){var k=w.find(y(S,[c[E][0]]));D[k]<0?(D[k]=z.length,z.push([c[E].slice(0)])):z[D[k]].push(c[E].slice(0))}return z}function b(c,S){return S?d(c,S):A(c)}T.dimension=a,T.countVertices=r,T.cloneCells=o,T.compareCells=v,T.normalize=f,T.unique=l,T.findCell=y,T.incidence=s,T.dual=x,T.explode=h,T.skeleton=g,T.boundary=m,T.connectedComponents=b},9521:function(t){"use strict";function T(n){this.roots=new Array(n),this.ranks=new Array(n);for(var i=0;i<n;++i)this.roots[i]=i,this.ranks[i]=0}t.exports=T,T.prototype.length=function(){return this.roots.length},T.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},T.prototype.find=function(n){for(var i=this.roots;i[n]!==n;){var u=i[n];i[n]=i[u],n=u}return n},T.prototype.link=function(n,i){var u=this.find(n),a=this.find(i);if(u!==a){var r=this.ranks,o=this.roots,v=r[u],p=r[a];v<p?o[u]=a:p<v?o[a]=u:(o[a]=u,++r[u])}}},8243:function(t,T,n){"use strict";t.exports=r;var i=n(417),u=n(6656);function a(o,v,p){return Math.abs(i(o,v,p))/Math.sqrt(Math.pow(v[0]-p[0],2)+Math.pow(v[1]-p[1],2))}function r(o,v,p){for(var f=v.length,l=o.length,y=new Array(f),s=new Array(f),x=new Array(f),h=new Array(f),g=0;g<f;++g)y[g]=s[g]=-1,x[g]=1/0,h[g]=!1;for(g=0;g<l;++g){var m=o[g];if(2!==m.length)throw new Error("Input must be a graph");var d=m[1],A=m[0];-1!==s[A]?s[A]=-2:s[A]=d,-1!==y[d]?y[d]=-2:y[d]=A}function b(B){if(h[B])return 1/0;var te=y[B],q=s[B];return te<0||q<0?1/0:a(v[B],v[te],v[q])}function c(B,te){var q=z[B],oe=z[te];z[B]=oe,z[te]=q,D[q]=te,D[oe]=B}function S(B){return x[z[B]]}function w(B){return 1&B?B-1>>1:(B>>1)-1}function E(B){for(var te=S(B);;){var q=te,oe=2*B+1,ie=2*(B+1),V=B;if(oe<O){var Y=S(oe);Y<q&&(V=oe,q=Y)}if(ie<O&&S(ie)<q&&(V=ie),V===B)return B;c(B,V),B=V}}function P(B){for(var te=S(B);B>0;){var q=w(B);if(!(q>=0&&te<S(q)))return B;c(B,q),B=q}}function R(){if(O>0){var B=z[0];return c(0,O-1),O-=1,E(0),B}return-1}function F(B,te){var q=z[B];return x[q]===te?B:(x[q]=-1/0,P(B),R(),x[q]=te,P((O+=1)-1))}function _(B){if(!h[B]){h[B]=!0;var te=y[B],q=s[B];y[q]>=0&&(y[q]=te),s[te]>=0&&(s[te]=q),D[te]>=0&&F(D[te],b(te)),D[q]>=0&&F(D[q],b(q))}}var z=[],D=new Array(f);for(g=0;g<f;++g)(x[g]=b(g))<1/0?(D[g]=z.length,z.push(g)):D[g]=-1;var O=z.length;for(g=O>>1;g>=0;--g)E(g);for(;;){var U=R();if(U<0||x[U]>p)break;_(U)}var H=[];for(g=0;g<f;++g)h[g]||(D[g]=H.length,H.push(v[g].slice()));function ee(B,te){if(B[te]<0)return te;var q=te,oe=te;do{var ie=B[oe];if(!h[oe]||ie<0||ie===oe||(ie=B[oe=ie],!h[oe]||ie<0||ie===oe))break;oe=ie,q=B[q]}while(q!==oe);for(var V=te;V!==oe;V=B[V])B[V]=oe;return oe}H.length;var W=[];return o.forEach(function(B){var te=ee(y,B[0]),q=ee(s,B[1]);if(te>=0&&q>=0&&te!==q){var oe=D[te],ie=D[q];oe!==ie&&W.push([oe,ie])}}),u.unique(u.normalize(W)),{positions:H,edges:W}}},6638:function(t,T,n){"use strict";t.exports=a;var i=n(417);function u(r,o){var v,p,x,h;if(o[0][0]<o[1][0])v=o[0],p=o[1];else{if(!(o[0][0]>o[1][0])){var f=Math.min(r[0][1],r[1][1]),l=Math.max(r[0][1],r[1][1]),y=Math.min(o[0][1],o[1][1]),s=Math.max(o[0][1],o[1][1]);return l<y?l-y:f>s?f-s:l-s}v=o[1],p=o[0]}r[0][1]<r[1][1]?(x=r[0],h=r[1]):(x=r[1],h=r[0]);var g=i(p,v,x);return g||(g=i(p,v,h))?g:h-p}function a(r,o){var v,p,f,l;if(o[0][0]<o[1][0])v=o[0],p=o[1];else{if(!(o[0][0]>o[1][0]))return u(o,r);v=o[1],p=o[0]}if(r[0][0]<r[1][0])f=r[0],l=r[1];else{if(!(r[0][0]>r[1][0]))return-u(r,o);f=r[1],l=r[0]}var y=i(v,p,l),s=i(v,p,f);if(y<0){if(s<=0)return y}else if(y>0){if(s>=0)return y}else if(s)return s;if(y=i(l,f,p),s=i(l,f,v),y<0){if(s<=0)return y}else if(y>0){if(s>=0)return y}else if(s)return s;return p[0]-l[0]}},4385:function(t,T,n){"use strict";t.exports=s;var i=n(5070),u=n(7080),a=n(417),r=n(6638);function o(x,h,g){this.slabs=x,this.coordinates=h,this.horizontal=g}function p(x,h){return x.y-h}function f(x,h){for(var g=null;x;){var d,A,m=x.key;m[0][0]<m[1][0]?(d=m[0],A=m[1]):(d=m[1],A=m[0]);var b=a(d,A,h);if(b<0)x=x.left;else if(b>0)if(h[0]!==m[1][0])g=x,x=x.right;else{if(c=f(x.right,h))return c;x=x.left}else{if(h[0]!==m[1][0])return x;var c;if(c=f(x.right,h))return c;x=x.left}}return g}function l(x,h,g,m){this.y=x,this.index=h,this.start=g,this.closed=m}function y(x,h,g,m){this.x=x,this.segment=h,this.create=g,this.index=m}function s(x){for(var h=x.length,g=2*h,m=new Array(g),d=0;d<h;++d){var A=x[d],b=A[0][0]<A[1][0];m[2*d]=new y(A[0][0],A,b,d),m[2*d+1]=new y(A[1][0],A,!b,d)}m.sort(function(z,D){var k=z.x-D.x;return k||(k=z.create-D.create)?k:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var c=u(r),S=[],w=[],E=[];for(d=0;d<g;){for(var R=m[d].x,F=[];d<g;){var _=m[d];if(_.x!==R)break;d+=1,_.segment[0][0]===_.x&&_.segment[1][0]===_.x?_.create&&(_.segment[0][1]<_.segment[1][1]?(F.push(new l(_.segment[0][1],_.index,!0,!0)),F.push(new l(_.segment[1][1],_.index,!1,!1))):(F.push(new l(_.segment[1][1],_.index,!0,!1)),F.push(new l(_.segment[0][1],_.index,!1,!0)))):c=_.create?c.insert(_.segment,_.index):c.remove(_.segment)}S.push(c.root),w.push(R),E.push(F)}return new o(S,w,E)}o.prototype.castUp=function(x){var h=i.le(this.coordinates,x[0]);if(h<0)return-1;this.slabs[h];var m=f(this.slabs[h],x),d=-1;if(m&&(d=m.value),this.coordinates[h]===x[0]){var A=null;if(m&&(A=m.key),h>0){var b=f(this.slabs[h-1],x);b&&(A?r(b.key,A)>0&&(A=b.key,d=b.value):(d=b.value,A=b.key))}var c=this.horizontal[h];if(c.length>0){var S=i.ge(c,x[1],p);if(S<c.length){var w=c[S];if(x[1]===w.y){if(w.closed)return w.index;for(;S<c.length-1&&c[S+1].y===x[1];)if((w=c[S+=1]).closed)return w.index;if(w.y===x[1]&&!w.start){if((S+=1)>=c.length)return d;w=c[S]}}if(w.start)if(A){var E=a(A[0],A[1],[x[0],w.y]);A[0][0]>A[1][0]&&(E=-E),E>0&&(d=w.index)}else d=w.index;else w.y!==x[1]&&(d=w.index)}}}return d}},4670:function(t,T,n){"use strict";var i=n(9130),u=n(9662);function a(f,l){var y=u(i(f,l),[l[l.length-1]]);return y[y.length-1]}function r(f,l,y,s){var h=-l/(s-l);h<0?h=0:h>1&&(h=1);for(var g=1-h,m=f.length,d=new Array(m),A=0;A<m;++A)d[A]=h*f[A]+g*y[A];return d}function o(f,l){for(var y=[],s=[],x=a(f[f.length-1],l),h=f[f.length-1],g=f[0],m=0;m<f.length;++m,h=g){var d=a(g=f[m],l);if(x<0&&d>0||x>0&&d<0){var A=r(h,d,g,x);y.push(A),s.push(A.slice())}d<0?s.push(g.slice()):d>0?y.push(g.slice()):(y.push(g.slice()),s.push(g.slice())),x=d}return{positive:y,negative:s}}function v(f,l){for(var y=[],s=a(f[f.length-1],l),x=f[f.length-1],h=f[0],g=0;g<f.length;++g,x=h){var m=a(h=f[g],l);(s<0&&m>0||s>0&&m<0)&&y.push(r(x,m,h,s)),m>=0&&y.push(h.slice()),s=m}return y}function p(f,l){for(var y=[],s=a(f[f.length-1],l),x=f[f.length-1],h=f[0],g=0;g<f.length;++g,x=h){var m=a(h=f[g],l);(s<0&&m>0||s>0&&m<0)&&y.push(r(x,m,h,s)),m<=0&&y.push(h.slice()),s=m}return y}t.exports=o,t.exports.positive=v,t.exports.negative=p},8974:function(t,T,n){var i;!function(){"use strict";var u={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(f){return o(p(f),arguments)}function r(f,l){return a.apply(null,[f].concat(l||[]))}function o(f,l){var x,g,m,d,A,b,c,S,w,y=1,s=f.length,h="";for(g=0;g<s;g++)if("string"==typeof f[g])h+=f[g];else if("object"==typeof f[g]){if((d=f[g]).keys)for(x=l[y],m=0;m<d.keys.length;m++){if(null==x)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',d.keys[m],d.keys[m-1]));x=x[d.keys[m]]}else x=d.param_no?l[d.param_no]:l[y++];if(u.not_type.test(d.type)&&u.not_primitive.test(d.type)&&x instanceof Function&&(x=x()),u.numeric_arg.test(d.type)&&"number"!=typeof x&&isNaN(x))throw new TypeError(a("[sprintf] expecting number but found %T",x));switch(u.number.test(d.type)&&(S=x>=0),d.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,d.width?parseInt(d.width):0);break;case"e":x=d.precision?parseFloat(x).toExponential(d.precision):parseFloat(x).toExponential();break;case"f":x=d.precision?parseFloat(x).toFixed(d.precision):parseFloat(x);break;case"g":x=d.precision?String(Number(x.toPrecision(d.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=d.precision?x.substring(0,d.precision):x;break;case"t":x=String(!!x),x=d.precision?x.substring(0,d.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=d.precision?x.substring(0,d.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=d.precision?x.substring(0,d.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}u.json.test(d.type)?h+=x:(!u.number.test(d.type)||S&&!d.sign?w="":(w=S?"+":"-",x=x.toString().replace(u.sign,"")),b=d.pad_char?"0"===d.pad_char?"0":d.pad_char.charAt(1):" ",c=d.width-(w+x).length,A=d.width&&c>0?b.repeat(c):"",h+=d.align?w+x+A:"0"===b?w+A+x:A+w+x)}return h}var v=Object.create(null);function p(f){if(v[f])return v[f];for(var y,l=f,s=[],x=0;l;){if(null!==(y=u.text.exec(l)))s.push(y[0]);else if(null!==(y=u.modulo.exec(l)))s.push("%");else{if(null===(y=u.placeholder.exec(l)))throw new SyntaxError("[sprintf] unexpected placeholder");if(y[2]){x|=1;var h=[],g=y[2],m=[];if(null===(m=u.key.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(h.push(m[1]);""!==(g=g.substring(m[0].length));)if(null!==(m=u.key_access.exec(g)))h.push(m[1]);else{if(null===(m=u.index_access.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");h.push(m[1])}y[2]=h}else x|=2;if(3===x)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:y[0],param_no:y[1],keys:y[2],sign:y[3],pad_char:y[4],align:y[5],width:y[6],precision:y[7],type:y[8]})}l=l.substring(y[0].length)}return v[f]=s}T.sprintf=a,T.vsprintf=r,typeof window<"u"&&(window.sprintf=a,window.vsprintf=r,void 0!==(i=function(){return{sprintf:a,vsprintf:r}}.call(T,n,T,t))&&(t.exports=i))}()},4162:function(t,T,n){"use strict";t.exports=p;var i=n(9284),u=n(9584),a={"2d":function(f,l,y){var s=f({order:l,scalarArguments:3,getters:"generic"===y?[0]:void 0,phase:function(h,g,m,d){return h>d|0},vertex:function(h,g,m,d,A,b,c,S,w,E,P,R,F){var _=(c<<0)+(S<<1)+(w<<2)+(E<<3)|0;if(0!==_&&15!==_)switch(_){case 0:case 15:P.push([h-.5,g-.5]);break;case 1:P.push([h-.25-.25*(d+m-2*F)/(m-d),g-.25-.25*(A+m-2*F)/(m-A)]);break;case 2:P.push([h-.75-.25*(-d-m+2*F)/(d-m),g-.25-.25*(b+d-2*F)/(d-b)]);break;case 3:P.push([h-.5,g-.5-.5*(A+m+b+d-4*F)/(m-A+d-b)]);break;case 4:P.push([h-.25-.25*(b+A-2*F)/(A-b),g-.75-.25*(-A-m+2*F)/(A-m)]);break;case 5:P.push([h-.5-.5*(d+m+b+A-4*F)/(m-d+A-b),g-.5]);break;case 6:P.push([h-.5-.25*(-d-m+b+A)/(d-m+A-b),g-.5-.25*(-A-m+b+d)/(A-m+d-b)]);break;case 7:P.push([h-.75-.25*(b+A-2*F)/(A-b),g-.75-.25*(b+d-2*F)/(d-b)]);break;case 8:P.push([h-.75-.25*(-b-A+2*F)/(b-A),g-.75-.25*(-b-d+2*F)/(b-d)]);break;case 9:P.push([h-.5-.25*(d+m+-b-A)/(m-d+b-A),g-.5-.25*(A+m+-b-d)/(m-A+b-d)]);break;case 10:P.push([h-.5-.5*(-d-m-b-A+4*F)/(d-m+b-A),g-.5]);break;case 11:P.push([h-.25-.25*(-b-A+2*F)/(b-A),g-.75-.25*(A+m-2*F)/(m-A)]);break;case 12:P.push([h-.5,g-.5-.5*(-A-m-b-d+4*F)/(A-m+b-d)]);break;case 13:P.push([h-.75-.25*(d+m-2*F)/(m-d),g-.25-.25*(-b-d+2*F)/(b-d)]);break;case 14:P.push([h-.25-.25*(-d-m+2*F)/(d-m),g-.25-.25*(-A-m+2*F)/(A-m)])}},cell:function(h,g,m,d,A,b,c,S,w){A?S.push([h,g]):S.push([g,h])}});return function(x,h){var g=[],m=[];return s(x,g,m,h),{positions:g,cells:m}}}};function r(f,l){var y=f.length+"d",s=a[y];if(s)return s(i,f,l)}function o(f,l){for(var y=u(f,l),s=y.length,x=new Array(s),h=new Array(s),g=0;g<s;++g)x[g]=[y[g]],h[g]=[g];return{positions:x,cells:h}}var v={};function p(f,x){if(f.dimension<=0)return{positions:[],cells:[]};if(1===f.dimension)return o(f,x);var y=f.order.join()+"-"+f.dtype,s=v[y];return x=+x||0,s||(s=v[y]=r(f.order,f.dtype)),s(f,x)}},6946:function(t,T,n){"use strict";t.exports=o;var i=n(875),u=window||process.global||{},a=u.__TEXT_CACHE||{};function r(v){for(var p=v.cells,f=v.positions,l=new Float32Array(6*p.length),y=0,s=0,x=0;x<p.length;++x)for(var h=p[x],g=0;g<3;++g){var m=f[h[g]];l[y++]=m[0],l[y++]=m[1]+1.4,s=Math.max(m[0],s)}return{data:l,shape:s}}function o(v,p,l){l=l||{};var y=a[v];y||(y=a[v]={" ":{data:new Float32Array(0),shape:.2}});var s=y[p];if(!s)if(p.length<=1||!/\d/.test(p))s=y[p]=r(i(p,{triangles:!0,font:v,textAlign:l.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var x=p.split(/(\d|\s)/),h=new Array(x.length),g=0,m=0,d=0;d<x.length;++d)h[d]=o(v,x[d]),g+=h[d].data.length,m+=h[d].shape,d>0&&(m+=.02);var A=new Float32Array(g),b=0,c=-.5*m;for(d=0;d<h.length;++d){for(var S=h[d].data,w=0;w<S.length;w+=2)A[b++]=S[w]+c,A[b++]=S[w+1];c+=h[d].shape+.02}s=y[p]={data:A,shape:m}}return s}u.__TEXT_CACHE={}},14:function(t,T,n){"use strict";var i=n(4405);t.exports=o;var u=96;function a(v,p){var f=i(getComputedStyle(v).getPropertyValue(p));return f[0]*o(f[1],v)}function r(v,p){var f=document.createElement("div");f.style["font-size"]="128"+v,p.appendChild(f);var l=a(f,"font-size")/128;return p.removeChild(f),l}function o(v,p){switch(p=p||document.body,v=(v||"px").trim().toLowerCase(),(p===window||p===document)&&(p=document.body),v){case"%":return p.clientHeight/100;case"ch":case"ex":return r(v,p);case"em":return a(p,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return u;case"cm":return u/2.54;case"mm":return u/25.4;case"pt":return u/72;case"pc":return u/6}return 1}},3440:function(t,T,n){"use strict";t.exports=h;var i=n(8444),u=n(7437),a=n(4422),r=n(903),o=n(899),v=n(9305);function p(g,m,d){return Math.sqrt(Math.pow(g,2)+Math.pow(m,2)+Math.pow(d,2))}function f(g){return Math.min(1,Math.max(-1,g))}function l(g){var m=Math.abs(g[0]),d=Math.abs(g[1]),A=Math.abs(g[2]),b=[0,0,0];m>Math.max(d,A)?b[2]=1:d>Math.max(m,A)?b[0]=1:b[1]=1;for(var c=0,S=0,w=0;w<3;++w)c+=g[w]*g[w],S+=b[w]*g[w];for(w=0;w<3;++w)b[w]-=S/c*g[w];return o(b,b),b}function y(g,m,d,A,b,c,S,w){this.center=i(d),this.up=i(A),this.right=i(b),this.radius=i([c]),this.angle=i([S,w]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(g,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var E=0;E<16;++E)this.computedMatrix[E]=.5;this.recalcMatrix(0)}var s=y.prototype;s.setDistanceLimits=function(g,m){g=g>0?Math.log(g):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=m},s.getDistanceLimits=function(g){var m=this.radius.bounds[0];return g?(g[0]=Math.exp(m[0][0]),g[1]=Math.exp(m[1][0]),g):[Math.exp(m[0][0]),Math.exp(m[1][0])]},s.recalcMatrix=function(g){this.center.curve(g),this.up.curve(g),this.right.curve(g),this.radius.curve(g),this.angle.curve(g);for(var m=this.computedUp,d=this.computedRight,A=0,b=0,c=0;c<3;++c)b+=m[c]*d[c],A+=m[c]*m[c];var S=Math.sqrt(A),w=0;for(c=0;c<3;++c)d[c]-=m[c]*b/A,w+=d[c]*d[c],m[c]/=S;var E=Math.sqrt(w);for(c=0;c<3;++c)d[c]/=E;var P=this.computedToward;r(P,m,d),o(P,P);var R=Math.exp(this.computedRadius[0]),F=this.computedAngle[0],_=this.computedAngle[1],z=Math.cos(F),D=Math.sin(F),k=Math.cos(_),O=Math.sin(_),U=this.computedCenter,H=z*k,j=D*k,ee=O,W=-z*O,B=-D*O,te=k,q=this.computedEye,oe=this.computedMatrix;for(c=0;c<3;++c){var ie=H*d[c]+j*P[c]+ee*m[c];oe[4*c+1]=W*d[c]+B*P[c]+te*m[c],oe[4*c+2]=ie,oe[4*c+3]=0}var V=oe[1],Y=oe[5],ae=oe[9],X=oe[2],J=oe[6],ue=oe[10],re=Y*ue-ae*J,ne=ae*X-V*ue,se=V*J-Y*X,de=p(re,ne,se);for(re/=de,ne/=de,se/=de,oe[0]=re,oe[4]=ne,oe[8]=se,c=0;c<3;++c)q[c]=U[c]+oe[2+4*c]*R;for(c=0;c<3;++c){w=0;for(var be=0;be<3;++be)w+=oe[c+4*be]*q[be];oe[12+c]=-w}oe[15]=1},s.getMatrix=function(g,m){this.recalcMatrix(g);var d=this.computedMatrix;if(m){for(var A=0;A<16;++A)m[A]=d[A];return m}return d};var x=[0,0,0];function h(g){var m=(g=g||{}).center||[0,0,0],d=g.up||[0,1,0],A=g.right||l(d),b=g.radius||1,c=g.theta||0,S=g.phi||0;if(m=[].slice.call(m,0,3),d=[].slice.call(d,0,3),o(d,d),A=[].slice.call(A,0,3),o(A,A),"eye"in g){var w=g.eye,E=[w[0]-m[0],w[1]-m[1],w[2]-m[2]];r(A,E,d),p(A[0],A[1],A[2])<1e-6?A=l(d):o(A,A),b=p(E[0],E[1],E[2]);var P=v(d,E)/b,R=v(A,E)/b;S=Math.acos(P),c=Math.acos(R)}return b=Math.log(b),new y(g.zoomMin,g.zoomMax,m,d,A,b,c,S)}s.rotate=function(g,m,d,A){if(this.angle.move(g,m,d),A){this.recalcMatrix(g);var b=this.computedMatrix;x[0]=b[2],x[1]=b[6],x[2]=b[10];for(var c=this.computedUp,S=this.computedRight,w=this.computedToward,E=0;E<3;++E)b[4*E]=c[E],b[4*E+1]=S[E],b[4*E+2]=w[E];for(a(b,b,A,x),E=0;E<3;++E)c[E]=b[4*E],S[E]=b[4*E+1];this.up.set(g,c[0],c[1],c[2]),this.right.set(g,S[0],S[1],S[2])}},s.pan=function(g,m,d,A){m=m||0,d=d||0,A=A||0,this.recalcMatrix(g);var b=this.computedMatrix,S=(Math.exp(this.computedRadius[0]),b[1]),w=b[5],E=b[9],P=p(S,w,E);S/=P,w/=P,E/=P;var R=b[0],F=b[4],_=b[8],z=R*S+F*w+_*E,D=p(R-=S*z,F-=w*z,_-=E*z),k=(R/=D)*m+S*d,O=(F/=D)*m+w*d,U=(_/=D)*m+E*d;this.center.move(g,k,O,U);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+A),this.radius.set(g,Math.log(H))},s.translate=function(g,m,d,A){this.center.move(g,m||0,d||0,A||0)},s.setMatrix=function(g,m,d,A){var b=1;"number"==typeof d&&(b=0|d),(b<0||b>3)&&(b=1);var c=(b+2)%3;m||(this.recalcMatrix(g),m=this.computedMatrix);var w=m[b],E=m[b+4],P=m[b+8];if(A){var F=Math.abs(w),_=Math.abs(E),z=Math.abs(P),D=Math.max(F,_,z);F===D?(w=w<0?-1:1,E=P=0):z===D?(P=P<0?-1:1,w=E=0):(E=E<0?-1:1,w=P=0)}else{var R=p(w,E,P);w/=R,E/=R,P/=R}var q,oe,k=m[c],O=m[c+4],U=m[c+8],H=k*w+O*E+U*P,j=p(k-=w*H,O-=E*H,U-=P*H),ee=E*(U/=j)-P*(O/=j),W=P*(k/=j)-w*U,B=w*O-E*k,te=p(ee,W,B);if(ee/=te,W/=te,B/=te,this.center.jump(g,Fe,ke,ze),this.radius.idle(g),this.up.jump(g,w,E,P),this.right.jump(g,k,O,U),2===b){var ie=m[1],V=m[5],Y=m[9],ae=ie*k+V*O+Y*U,X=ie*ee+V*W+Y*B;q=ne<0?-Math.PI/2:Math.PI/2,oe=Math.atan2(X,ae)}else{var J=m[2],ue=m[6],re=m[10],ne=J*w+ue*E+re*P,se=J*k+ue*O+re*U,de=J*ee+ue*W+re*B;q=Math.asin(f(ne)),oe=Math.atan2(de,se)}this.angle.jump(g,oe,q),this.recalcMatrix(g);var be=m[2],De=m[6],_e=m[10],Ce=this.computedMatrix;u(Ce,m);var Le=Ce[15],Fe=Ce[12]/Le,ke=Ce[13]/Le,ze=Ce[14]/Le,Pe=Math.exp(this.computedRadius[0]);this.center.jump(g,Fe-be*Pe,ke-De*Pe,ze-_e*Pe)},s.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},s.idle=function(g){this.center.idle(g),this.up.idle(g),this.right.idle(g),this.radius.idle(g),this.angle.idle(g)},s.flush=function(g){this.center.flush(g),this.up.flush(g),this.right.flush(g),this.radius.flush(g),this.angle.flush(g)},s.setDistance=function(g,m){m>0&&this.radius.set(g,Math.log(m))},s.lookAt=function(g,m,d,A){this.recalcMatrix(g),m=m||this.computedEye,d=d||this.computedCenter;var b=(A=A||this.computedUp)[0],c=A[1],S=A[2],w=p(b,c,S);if(!(w<1e-6)){b/=w,c/=w,S/=w;var E=m[0]-d[0],P=m[1]-d[1],R=m[2]-d[2],F=p(E,P,R);if(!(F<1e-6)){E/=F,P/=F,R/=F;var _=this.computedRight,z=_[0],D=_[1],k=_[2],O=b*z+c*D+S*k,U=p(z-=O*b,D-=O*c,k-=O*S);if(!(U<.01&&(z=c*R-S*P,D=S*E-b*R,k=b*P-c*E,U=p(z,D,k),U<1e-6))){z/=U,D/=U,k/=U,this.up.set(g,b,c,S),this.right.set(g,z,D,k),this.center.set(g,d[0],d[1],d[2]),this.radius.set(g,Math.log(F));var H=c*k-S*D,j=S*z-b*k,ee=b*D-c*z,W=p(H,j,ee),B=b*E+c*P+S*R,te=z*E+D*P+k*R,q=(H/=W)*E+(j/=W)*P+(ee/=W)*R,oe=Math.asin(f(B)),ie=Math.atan2(q,te),V=this.angle._state,Y=V[V.length-1],ae=V[V.length-2];Y%=2*Math.PI;var X=Math.abs(Y+2*Math.PI-ie),J=Math.abs(Y-ie),ue=Math.abs(Y-2*Math.PI-ie);X<J&&(Y+=2*Math.PI),ue<J&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,ae),this.angle.set(g,ie,oe)}}}}},9660:function(t){"use strict";t.exports=n;var T=+(Math.pow(2,27)+1);function n(i,u,a){var r=i*u,o=T*i,p=o-(o-i),f=i-p,l=T*u,s=l-(l-u),x=u-s,d=f*x-(r-p*s-f*s-p*x);return a?(a[0]=d,a[1]=r,a):[d,r]}},87:function(t){"use strict";function T(n,i,u){var a=n+i,r=a-n,v=i-r,p=n-(a-r);return u?(u[0]=p+v,u[1]=a,u):[p+v,a]}t.exports=T},5306:function(t,T,n){"use strict";var i=n(2288),u=n(3094),a=n(2146).lW;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:u([32,0]),UINT16:u([32,0]),UINT32:u([32,0]),BIGUINT64:u([32,0]),INT8:u([32,0]),INT16:u([32,0]),INT32:u([32,0]),BIGINT64:u([32,0]),FLOAT:u([32,0]),DOUBLE:u([32,0]),DATA:u([32,0]),UINT8C:u([32,0]),BUFFER:u([32,0])});var r=typeof Uint8ClampedArray<"u",o=typeof BigUint64Array<"u",v=typeof BigInt64Array<"u",p=n.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=u([32,0])),p.BIGUINT64||(p.BIGUINT64=u([32,0])),p.BIGINT64||(p.BIGINT64=u([32,0])),p.BUFFER||(p.BUFFER=u([32,0]));var f=p.DATA,l=p.BUFFER;function y(_){if(_){var z=_.length||_.byteLength,D=i.log2(z);f[D].push(_)}}function s(_){y(_.buffer)}function x(z){z=i.nextPow2(z);var D=i.log2(z),k=f[D];return k.length>0?k.pop():new ArrayBuffer(z)}function h(_){return new Uint8Array(x(_),0,_)}function g(_){return new Uint16Array(x(2*_),0,_)}function m(_){return new Uint32Array(x(4*_),0,_)}function d(_){return new Int8Array(x(_),0,_)}function A(_){return new Int16Array(x(2*_),0,_)}function b(_){return new Int32Array(x(4*_),0,_)}function c(_){return new Float32Array(x(4*_),0,_)}function S(_){return new Float64Array(x(8*_),0,_)}function w(_){return r?new Uint8ClampedArray(x(_),0,_):h(_)}function E(_){return o?new BigUint64Array(x(8*_),0,_):null}function P(_){return v?new BigInt64Array(x(8*_),0,_):null}function R(_){return new DataView(x(_),0,_)}function F(_){_=i.nextPow2(_);var z=i.log2(_),D=l[z];return D.length>0?D.pop():new a(_)}T.free=function(z){if(a.isBuffer(z))l[i.log2(z.length)].push(z);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(z)&&(z=z.buffer),!z)return;var D=z.length||z.byteLength,k=0|i.log2(D);f[k].push(z)}},T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=s,T.freeArrayBuffer=y,T.freeBuffer=function(z){l[i.log2(z.length)].push(z)},T.malloc=function(z,D){if(void 0===D||"arraybuffer"===D)return x(z);switch(D){case"uint8":return h(z);case"uint16":return g(z);case"uint32":return m(z);case"int8":return d(z);case"int16":return A(z);case"int32":return b(z);case"float":case"float32":return c(z);case"double":case"float64":return S(z);case"uint8_clamped":return w(z);case"bigint64":return P(z);case"biguint64":return E(z);case"buffer":return F(z);case"data":case"dataview":return R(z);default:return null}return null},T.mallocArrayBuffer=x,T.mallocUint8=h,T.mallocUint16=g,T.mallocUint32=m,T.mallocInt8=d,T.mallocInt16=A,T.mallocInt32=b,T.mallocFloat32=T.mallocFloat=c,T.mallocFloat64=T.mallocDouble=S,T.mallocUint8Clamped=w,T.mallocBigUint64=E,T.mallocBigInt64=P,T.mallocDataView=R,T.mallocBuffer=F,T.clearCache=function(){for(var z=0;z<32;++z)p.UINT8[z].length=0,p.UINT16[z].length=0,p.UINT32[z].length=0,p.INT8[z].length=0,p.INT16[z].length=0,p.INT32[z].length=0,p.FLOAT[z].length=0,p.DOUBLE[z].length=0,p.BIGUINT64[z].length=0,p.BIGINT64[z].length=0,p.UINT8C[z].length=0,f[z].length=0,l[z].length=0}},1731:function(t){"use strict";function T(i){this.roots=new Array(i),this.ranks=new Array(i);for(var u=0;u<i;++u)this.roots[u]=u,this.ranks[u]=0}t.exports=T;var n=T.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},n.find=function(i){for(var u=i,a=this.roots;a[i]!==i;)i=a[i];for(;a[u]!==i;){var r=a[u];a[u]=i,u=r}return i},n.link=function(i,u){var a=this.find(i),r=this.find(u);if(a!==r){var o=this.ranks,v=this.roots,p=o[a],f=o[r];p<f?v[a]=r:f<p?v[r]=a:(v[r]=a,++o[a])}}},1215:function(t){"use strict";function T(u,a){for(var r=1,o=u.length,v=u[0],p=u[0],f=1;f<o;++f)if(p=v,a(v=u[f],p)){if(f===r){r++;continue}u[r++]=v}return u.length=r,u}function n(u){for(var a=1,r=u.length,o=u[0],v=u[0],p=1;p<r;++p,v=o)if(v=o,(o=u[p])!==v){if(p===a){a++;continue}u[a++]=o}return u.length=a,u}function i(u,a,r){return 0===u.length?u:a?(r||u.sort(a),T(u,a)):(r||u.sort(),n(u))}t.exports=i},875:function(t,T,n){"use strict";t.exports=r;var i=n(712),u=null,a=null;function r(o,v){return("object"!=typeof v||null===v)&&(v={}),i(o,v.canvas||u,v.context||a,v)}typeof document<"u"&&((u=document.createElement("canvas")).width=8192,u.height=1024,a=u.getContext("2d"))},712:function(t,T,n){t.exports=P,t.exports.processPixels=E;var i=n(4162),u=n(5050),a=n(8243),r=n(197),o=n(7761),v=n(8040),p="b",f="b|",l="i",y="i|",s="sup",x="+",h="+1",g="sub",m="-",d="-1";function A(R,F,_,z){for(var D="<"+R+">",k="</"+R+">",O=D.length,U=k.length,H=F[0]===x||F[0]===m,j=0,ee=-U;j>-1&&!(-1===(j=_.indexOf(D,j))||(ee=_.indexOf(k,j+O),-1===ee)||ee<=j);){for(var W=j;W<ee+U;++W)if(W<j+O||W>=ee)z[W]=null,_=_.substr(0,W)+" "+_.substr(W+1);else if(null!==z[W]){var B=z[W].indexOf(F[0]);-1===B?z[W]+=F:H&&(z[W]=z[W].substr(0,B+1)+(1+parseInt(z[W][B+1]))+z[W].substr(B+2))}var te=j+O,oe=_.substr(te,ee-te).indexOf(D);j=-1!==oe?oe:ee+U}return z}function b(R,F,_){for(var z=F.textAlign||"start",D=F.textBaseline||"alphabetic",k=[1<<30,1<<30],O=[0,0],U=R.length,H=0;H<U;++H)for(var j=R[H],ee=0;ee<2;++ee)k[ee]=0|Math.min(k[ee],j[ee]),O[ee]=0|Math.max(O[ee],j[ee]);var W=0;switch(z){case"center":W=-.5*(k[0]+O[0]);break;case"right":case"end":W=-O[0];break;case"left":case"start":W=-k[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+z+"'")}var B=0;switch(D){case"hanging":case"top":B=-k[1];break;case"middle":B=-.5*(k[1]+O[1]);break;case"alphabetic":case"ideographic":B=-3*_;break;case"bottom":B=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var te=1/_;return"lineHeight"in F?te*=+F.lineHeight:"width"in F?te=F.width/(O[0]-k[0]):"height"in F&&(te=F.height/(O[1]-k[1])),R.map(function(q){return[te*(q[0]+W),te*(q[1]+B)]})}function c(R,F,_,z,D,k){_=_.replace(/\n/g,""),_=!0===k.breaklines?_.replace(/\<br\>/g,"\n"):_.replace(/\<br\>/g," ");var O="",U=[];for(Y=0;Y<_.length;++Y)U[Y]=O;!0===k.bolds&&(U=A(p,f,_,U)),!0===k.italics&&(U=A(l,y,_,U)),!0===k.superscripts&&(U=A(s,h,_,U)),!0===k.subscripts&&(U=A(g,d,_,U));var H=[],j="";for(Y=0;Y<_.length;++Y)null!==U[Y]&&(j+=_[Y],H.push(U[Y]));var ee=j.split("\n"),W=ee.length,B=Math.round(D*z),te=z,q=2*z,oe=0,ie=W*B+q;R.height<ie&&(R.height=ie),F.fillStyle="#000",F.fillRect(0,0,R.width,R.height),F.fillStyle="#fff";var V,Y,ae,X,J,ue=0,re="";function ne(){if(""!==re){var ke=F.measureText(re).width;F.fillText(re,te+ae,q+X),ae+=ke}}function se(){return Math.round(J)+"px "}function de(ke,ze){var Pe=""+F.font;if(!0===k.subscripts){var Ie=ke.indexOf(m),Qe=ze.indexOf(m),at=Ie>-1?parseInt(ke[1+Ie]):0,Be=Qe>-1?parseInt(ze[1+Qe]):0;at!==Be&&(Pe=Pe.replace(se(),"?px "),J*=Math.pow(.75,Be-at),Pe=Pe.replace("?px ",se())),X+=.25*B*(Be-at)}if(!0===k.superscripts){var Ne=ke.indexOf(x),nt=ze.indexOf(x),ct=Ne>-1?parseInt(ke[1+Ne]):0,mt=nt>-1?parseInt(ze[1+nt]):0;ct!==mt&&(Pe=Pe.replace(se(),"?px "),J*=Math.pow(.75,mt-ct),Pe=Pe.replace("?px ",se())),X-=.25*B*(mt-ct)}if(!0===k.bolds){var Bt=ke.indexOf(f)>-1,Rt=ze.indexOf(f)>-1;!Bt&&Rt&&(Pe=zt?Pe.replace("italic ","italic bold "):"bold "+Pe),Bt&&!Rt&&(Pe=Pe.replace("bold ",""))}if(!0===k.italics){var zt=ke.indexOf(y)>-1,St=ze.indexOf(y)>-1;!zt&&St&&(Pe="italic "+Pe),zt&&!St&&(Pe=Pe.replace("italic ",""))}F.font=Pe}for(V=0;V<W;++V){var be=ee[V]+"\n";for(ae=0,X=V*B,J=z,re="",Y=0;Y<be.length;++Y){var De=Y+ue<H.length?H[Y+ue]:H[H.length-1];O===De?re+=be[Y]:(ne(),re=be[Y],void 0!==De&&(de(O,De),O=De))}ne(),ue+=be.length;var _e=0|Math.round(ae+2*te);oe<_e&&(oe=_e)}var Ce=oe,Le=q+B*W;return u(F.getImageData(0,0,Ce,Le).data,[Le,Ce,4]).pick(-1,-1,0).transpose(1,0)}function S(R,F){var _=i(R,128);return F?a(_.cells,_.positions,.25):{edges:_.cells,positions:_.positions}}function w(R,F,_,z){var D=S(R,z),k=b(D.positions,F,_),O=D.edges,U="ccw"===F.orientation;if(r(k,O),F.polygons||F.polygon||F.polyline){for(var H=v(O,k),j=new Array(H.length),ee=0;ee<H.length;++ee){for(var W=H[ee],B=new Array(W.length),te=0;te<W.length;++te){for(var q=W[te],oe=new Array(q.length),ie=0;ie<q.length;++ie)oe[ie]=k[q[ie]].slice();U&&oe.reverse(),B[te]=oe}j[ee]=B}return j}return F.triangles||F.triangulate||F.triangle?{cells:o(k,O,{delaunay:!1,exterior:!1,interior:!0}),positions:k}:{edges:O,positions:k}}function E(R,F,_){try{return w(R,F,_,!0)}catch{}try{return w(R,F,_,!1)}catch{}return F.polygons||F.polyline||F.polygon?[]:F.triangles||F.triangulate||F.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function P(R,F,_,z){var D=64,k=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return z&&(z.size&&z.size>0&&(D=z.size),z.lineSpacing&&z.lineSpacing>0&&(k=z.lineSpacing),z.styletags&&z.styletags.breaklines&&(O.breaklines=!!z.styletags.breaklines),z.styletags&&z.styletags.bolds&&(O.bolds=!!z.styletags.bolds),z.styletags&&z.styletags.italics&&(O.italics=!!z.styletags.italics),z.styletags&&z.styletags.subscripts&&(O.subscripts=!!z.styletags.subscripts),z.styletags&&z.styletags.superscripts&&(O.superscripts=!!z.styletags.superscripts)),_.font=[z.fontStyle,z.fontVariant,z.fontWeight,D+"px",z.font].filter(function(H){return H}).join(" "),_.textAlign="start",_.textBaseline="alphabetic",_.direction="ltr",E(c(F,_,R,D,k,O),z,D)}},5346:function(t){!function(){"use strict";if(!(typeof ses<"u"&&ses.ok)||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=n);var i=!1;if("function"==typeof WeakMap){var u=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var a=new u,r=Object.freeze({});if(a.set(r,1),1===a.get(r))return void(t.exports=WeakMap);i=!0}}Object.prototype.hasOwnProperty;var v=Object.getOwnPropertyNames,p=Object.defineProperty,f=Object.isExtensible,l="weakmap:",y=l+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var s=new ArrayBuffer(25),x=new Uint8Array(s);crypto.getRandomValues(x),y=l+"rand:"+Array.prototype.map.call(x,function(w){return(w%36).toString(36)}).join("")+"___"}if(p(Object,"getOwnPropertyNames",{value:function(E){return v(E).filter(h)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;p(Object,"getPropertyNames",{value:function(E){return g(E).filter(h)}})}!function(){var w=Object.freeze;p(Object,"freeze",{value:function(F){return m(F),w(F)}});var E=Object.seal;p(Object,"seal",{value:function(F){return m(F),E(F)}});var P=Object.preventExtensions;p(Object,"preventExtensions",{value:function(F){return m(F),P(F)}})}();var A=!1,c=0,S=function(){this instanceof S||b();var w=[],E=[],P=c++;function R(D,k){var O,U=m(D);return U?P in U?U[P]:k:(O=w.indexOf(D))>=0?E[O]:k}function F(D){var k=m(D);return k?P in k:w.indexOf(D)>=0}function _(D,k){var O,U=m(D);return U?U[P]=k:(O=w.indexOf(D))>=0?E[O]=k:(O=w.length,E[O]=k,w[O]=D),this}function z(D){var O,U,k=m(D);return k?P in k&&delete k[P]:!((O=w.indexOf(D))<0||(U=w.length-1,w[O]=void 0,E[O]=E[U],w[O]=w[U],w.length=U,E.length=U,0))}return Object.create(S.prototype,{get___:{value:d(R)},has___:{value:d(F)},set___:{value:d(_)},delete___:{value:d(z)}})};S.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof u?function(){function w(){this instanceof S||b();var z,E=new u,P=void 0,R=!1;function F(k,O){return P?E.has(k)?E.get(k):P.get___(k,O):E.get(k,O)}function _(k){return E.has(k)||!!P&&P.has___(k)}function D(k){var O=!!E.delete(k);return P&&P.delete___(k)||O}return z=i?function(k,O){return E.set(k,O),E.has(k)||(P||(P=new S),P.set(k,O)),this}:function(k,O){if(R)try{E.set(k,O)}catch{P||(P=new S),P.set___(k,O)}else E.set(k,O);return this},Object.create(S.prototype,{get___:{value:d(F)},has___:{value:d(_)},set___:{value:d(z)},delete___:{value:d(D)},permitHostObjects___:{value:d(function(k){if(k!==n)throw new Error("bogus call to permitHostObjects___");R=!0})}})}i&&typeof Proxy<"u"&&(Proxy=void 0),w.prototype=S.prototype,t.exports=w,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),t.exports=S)}function n(w){w.permitHostObjects___&&w.permitHostObjects___(n)}function h(w){return!(w.substr(0,l.length)==l&&"___"===w.substr(w.length-3))}function m(w){if(w!==Object(w))throw new TypeError("Not an object: "+w);var E=w[y];if(E&&E.key===w)return E;if(f(w)){E={key:w};try{return p(w,y,{value:E,writable:!1,enumerable:!1,configurable:!1}),E}catch{return}}}function d(w){return w.prototype=null,Object.freeze(w)}function b(){!A&&typeof console<"u"&&(A=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(t,T,n){var i=n(7178);function u(){var a={};return function(r){if(("object"!=typeof r||null===r)&&"function"!=typeof r)throw new Error("Weakmap-shim: Key must be object");var o=r.valueOf(a);return o&&o.identity===a?o:i(r,a)}}t.exports=u},7178:function(t){function T(n,i){var u={identity:i},a=n.valueOf;return Object.defineProperty(n,"valueOf",{value:function(r){return r!==i?a.apply(this,arguments):u},writable:!0}),u}t.exports=T},4037:function(t,T,n){var i=n(9222);function u(){var a=i();return{get:function(r,o){var v=a(r);return v.hasOwnProperty("value")?v.value:o},set:function(r,o){return a(r).value=o,this},has:function(r){return"value"in a(r)},delete:function(r){return delete a(r).value}}}t.exports=u},6183:function(t){"use strict";function T(){return function(o,v,p,f,l,y){var s=o[0],x=p[0],h=[0],g=x;f|=0;var m=0,d=x;for(m=0;m<s;++m){var A=v[f]-y,b=v[f+g]-y;A>=0!=b>=0&&l.push(h[0]+.5+.5*(A+b)/(A-b)),f+=d,++h[0]}}}function n(){return T()}var i=n;function u(o){var v={};return function(f,l,y){var s=f.dtype,x=f.order,h=[s,x.join()].join(),g=v[h];return g||(v[h]=g=o([s,x])),g(f.shape.slice(0),f.data,f.stride,0|f.offset,l,y)}}function a(o){return u(i.bind(void 0,o))}function r(o){return a({funcName:o.funcName})}t.exports=r({funcName:"zeroCrossings"})},9584:function(t,T,n){"use strict";t.exports=u;var i=n(6183);function u(a,r){var o=[];return r=+r||0,i(a.hi(a.shape[0]-1),o,r),o}},6601:function(){}},e={};function M(t){var T=e[t];if(void 0!==T)return T.exports;var n=e[t]={id:t,loaded:!1,exports:{}};return K[t].call(n.exports,n,n.exports,M),n.loaded=!0,n.exports}return M.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),M.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},M(7386)}()},82260:$=>{$.exports=function(e,M,I,t){var T=e[0],n=e[1],i=!1;void 0===I&&(I=0),void 0===t&&(t=M.length);for(var u=t-I,a=0,r=u-1;a<u;r=a++){var o=M[a+I][0],v=M[a+I][1],p=M[r+I][0],f=M[r+I][1];v>n!=f>n&&T<(p-o)*(n-v)/(f-v)+o&&(i=!i)}return i}},98883:($,K,e)=>{var r,M=e(22494),I=e(61446),t=e(43296),T=e(95360),n=e(99250),i=e(52207),u=!1,a=I();function o(v,p,f){var l=r.segments(v),y=r.segments(p),x=f(r.combine(l,y));return r.polygon(x)}r={buildLog:function(v){return!0===v?u=M():!1===v&&(u=!1),!1!==u&&u.list},epsilon:function(v){return a.epsilon(v)},segments:function(v){var p=t(!0,a,u);return v.regions.forEach(p.addRegion),{segments:p.calculate(v.inverted),inverted:v.inverted}},combine:function(v,p){return{combined:t(!1,a,u).calculate(v.segments,v.inverted,p.segments,p.inverted),inverted1:v.inverted,inverted2:p.inverted}},selectUnion:function(v){return{segments:n.union(v.combined,u),inverted:v.inverted1||v.inverted2}},selectIntersect:function(v){return{segments:n.intersect(v.combined,u),inverted:v.inverted1&&v.inverted2}},selectDifference:function(v){return{segments:n.difference(v.combined,u),inverted:v.inverted1&&!v.inverted2}},selectDifferenceRev:function(v){return{segments:n.differenceRev(v.combined,u),inverted:!v.inverted1&&v.inverted2}},selectXor:function(v){return{segments:n.xor(v.combined,u),inverted:v.inverted1!==v.inverted2}},polygon:function(v){return{regions:T(v.segments,a,u),inverted:v.inverted}},polygonFromGeoJSON:function(v){return i.toPolygon(r,v)},polygonToGeoJSON:function(v){return i.fromPolygon(r,a,v)},union:function(v,p){return o(v,p,r.selectUnion)},intersect:function(v,p){return o(v,p,r.selectIntersect)},difference:function(v,p){return o(v,p,r.selectDifference)},differenceRev:function(v,p){return o(v,p,r.selectDifferenceRev)},xor:function(v,p){return o(v,p,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),$.exports=r},22494:$=>{$.exports=function K(){var e,M=0,I=!1;function t(T,n){return e.list.push({type:T,data:n?JSON.parse(JSON.stringify(n)):void 0}),e}return e={list:[],segmentId:function(){return M++},checkIntersection:function(T,n){return t("check",{seg1:T,seg2:n})},segmentChop:function(T,n){return t("div_seg",{seg:T,pt:n}),t("chop",{seg:T,pt:n})},statusRemove:function(T){return t("pop_seg",{seg:T})},segmentUpdate:function(T){return t("seg_update",{seg:T})},segmentNew:function(T,n){return t("new_seg",{seg:T,primary:n})},segmentRemove:function(T){return t("rem_seg",{seg:T})},tempStatus:function(T,n,i){return t("temp_status",{seg:T,above:n,below:i})},rewind:function(T){return t("rewind",{seg:T})},status:function(T,n,i){return t("status",{seg:T,above:n,below:i})},vert:function(T){return T===I?e:(I=T,t("vert",{x:T}))},log:function(T){return"string"!=typeof T&&(T=JSON.stringify(T,!1,"  ")),t("log",{txt:T})},reset:function(){return t("reset")},selected:function(T){return t("selected",{segs:T})},chainStart:function(T){return t("chain_start",{seg:T})},chainRemoveHead:function(T,n){return t("chain_rem_head",{index:T,pt:n})},chainRemoveTail:function(T,n){return t("chain_rem_tail",{index:T,pt:n})},chainNew:function(T,n){return t("chain_new",{pt1:T,pt2:n})},chainMatch:function(T){return t("chain_match",{index:T})},chainClose:function(T){return t("chain_close",{index:T})},chainAddHead:function(T,n){return t("chain_add_head",{index:T,pt:n})},chainAddTail:function(T,n){return t("chain_add_tail",{index:T,pt:n})},chainConnect:function(T,n){return t("chain_con",{index1:T,index2:n})},chainReverse:function(T){return t("chain_rev",{index:T})},chainJoin:function(T,n){return t("chain_join",{index1:T,index2:n})},done:function(){return t("done")}}}},61446:$=>{$.exports=function K(e){"number"!=typeof e&&(e=1e-10);var M={epsilon:function(I){return"number"==typeof I&&(e=I),e},pointAboveOrOnLine:function(I,t,T){var n=t[0],i=t[1],u=T[0],a=T[1],r=I[0];return(u-n)*(I[1]-i)-(a-i)*(r-n)>=-e},pointBetween:function(I,t,T){var n=I[1]-t[1],i=T[0]-t[0],u=I[0]-t[0],a=T[1]-t[1],r=u*i+n*a;return!(r<e)&&!(r-(i*i+a*a)>-e)},pointsSameX:function(I,t){return Math.abs(I[0]-t[0])<e},pointsSameY:function(I,t){return Math.abs(I[1]-t[1])<e},pointsSame:function(I,t){return M.pointsSameX(I,t)&&M.pointsSameY(I,t)},pointsCompare:function(I,t){return M.pointsSameX(I,t)?M.pointsSameY(I,t)?0:I[1]<t[1]?-1:1:I[0]<t[0]?-1:1},pointsCollinear:function(I,t,T){var n=I[0]-t[0],i=I[1]-t[1],u=t[0]-T[0],a=t[1]-T[1];return Math.abs(n*a-u*i)<e},linesIntersect:function(I,t,T,n){var i=t[0]-I[0],u=t[1]-I[1],a=n[0]-T[0],r=n[1]-T[1],o=i*r-u*a;if(Math.abs(o)<e)return!1;var v=I[0]-T[0],p=I[1]-T[1],f=(a*p-r*v)/o,l=(i*p-u*v)/o,y={alongA:0,alongB:0,pt:[I[0]+f*i,I[1]+f*u]};return y.alongA=f<=-e?-2:f<e?-1:f-1<=-e?0:f-1<e?1:2,y.alongB=l<=-e?-2:l<e?-1:l-1<=-e?0:l-1<e?1:2,y},pointInsideRegion:function(I,t){for(var T=I[0],n=I[1],i=t[t.length-1][0],u=t[t.length-1][1],a=!1,r=0;r<t.length;r++){var o=t[r][0],v=t[r][1];v-n>e!=u-n>e&&(i-o)*(n-v)/(u-v)+o-T>e&&(a=!a),i=o,u=v}return a}};return M}},52207:$=>{var K={toPolygon:function(e,M){function I(n){if(n.length<=0)return e.segments({inverted:!1,regions:[]});function i(r){var o=r.slice(0,r.length-1);return e.segments({inverted:!1,regions:[o]})}for(var u=i(n[0]),a=1;a<n.length;a++)u=e.selectDifference(e.combine(u,i(n[a])));return u}if("Polygon"===M.type)return e.polygon(I(M.coordinates));if("MultiPolygon"===M.type){for(var t=e.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)t=e.selectUnion(e.combine(t,I(M.coordinates[T])));return e.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,I){function t(f,l){return M.pointInsideRegion([.5*(f[0][0]+f[1][0]),.5*(f[0][1]+f[1][1])],l)}function T(f){return{region:f,children:[]}}I=e.polygon(e.segments(I));var n=T(null);function i(f,l){for(var y=0;y<f.children.length;y++){if(t(l,(s=f.children[y]).region))return void i(s,l)}var x=T(l);for(y=0;y<f.children.length;y++){var s;t((s=f.children[y]).region,l)&&(x.children.push(s),f.children.splice(y,1),y--)}f.children.push(x)}for(var u=0;u<I.regions.length;u++){var a=I.regions[u];a.length<3||i(n,a)}function r(f,l){for(var y=0,s=f[f.length-1][0],x=f[f.length-1][1],h=[],g=0;g<f.length;g++){var m=f[g][0],d=f[g][1];h.push([m,d]),y+=d*s-m*x,s=m,x=d}return y<0!==l&&h.reverse(),h.push([h[0][0],h[0][1]]),h}var o=[];function v(f){var l=[r(f.region,!1)];o.push(l);for(var y=0;y<f.children.length;y++)l.push(p(f.children[y]))}function p(f){for(var l=0;l<f.children.length;l++)v(f.children[l]);return r(f.region,!0)}for(u=0;u<n.children.length;u++)v(n.children[u]);return o.length<=0?{type:"Polygon",coordinates:[]}:1==o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};$.exports=K},43296:($,K,e)=>{var M=e(96388);$.exports=function I(t,T,n){function i(x,h){return{id:n?n.segmentId():-1,start:x,end:h,myFill:{above:null,below:null},otherFill:null}}function u(x,h,g){return{id:n?n.segmentId():-1,start:x,end:h,myFill:{above:g.myFill.above,below:g.myFill.below},otherFill:null}}var a=M.create();function o(x,h){a.insertBefore(x,function(g){var m=function r(x,h,g,m,d,A){var b=T.pointsCompare(h,d);return 0!==b?b:T.pointsSame(g,A)?0:x!==m?x?1:-1:T.pointAboveOrOnLine(g,m?d:A,m?A:d)?1:-1}(x.isStart,x.pt,h,g.isStart,g.pt,g.other.pt);return m<0})}function f(x,h){var g=function v(x,h){var g=M.node({isStart:!0,pt:x.start,seg:x,primary:h,other:null,status:null});return o(g,x.end),g}(x,h);return function p(x,h,g){var m=M.node({isStart:!1,pt:h.end,seg:h,primary:g,other:x,status:null});x.other=m,o(m,x.pt)}(g,x,h),g}function y(x,h){var g=u(h,x.seg.end,x.seg);return function l(x,h){n&&n.segmentChop(x.seg,h),x.other.remove(),x.seg.end=h,x.other.pt=h,o(x.other,x.pt)}(x,h),f(g,x.primary)}function s(x,h){var g=M.create();function d(k){return g.findTransition(function(O){var U=function m(k,O){var U=k.seg.start,H=k.seg.end,j=O.seg.start,ee=O.seg.end;return T.pointsCollinear(U,j,ee)?T.pointsCollinear(H,j,ee)||T.pointAboveOrOnLine(H,j,ee)?1:-1:T.pointAboveOrOnLine(U,j,ee)?1:-1}(k,O.ev);return U>0})}function A(k,O){var U=k.seg,H=O.seg,j=U.start,ee=U.end,W=H.start,B=H.end;n&&n.checkIntersection(U,H);var te=T.linesIntersect(j,ee,W,B);if(!1===te){if(!T.pointsCollinear(j,ee,W)||T.pointsSame(j,B)||T.pointsSame(ee,W))return!1;var q=T.pointsSame(j,W),oe=T.pointsSame(ee,B);if(q&&oe)return O;var ie=!q&&T.pointBetween(j,W,B),V=!oe&&T.pointBetween(ee,W,B);if(q)return V?y(O,ee):y(k,B),O;ie&&(oe||(V?y(O,ee):y(k,B)),y(O,j))}else 0===te.alongA&&(-1===te.alongB?y(k,W):0===te.alongB?y(k,te.pt):1===te.alongB&&y(k,B)),0===te.alongB&&(-1===te.alongA?y(O,j):0===te.alongA?y(O,te.pt):1===te.alongA&&y(O,ee));return!1}for(var b=[];!a.isEmpty();){var c=a.getHead();if(n&&n.vert(c.pt[0]),c.isStart){let k=function(){if(w){var O=A(c,w);if(O)return O}return!!E&&A(c,E)};n&&n.segmentNew(c.seg,c.primary);var S=d(c),w=S.before?S.before.ev:null,E=S.after?S.after.ev:null;n&&n.tempStatus(c.seg,!!w&&w.seg,!!E&&E.seg);var P=k();if(P){var R;if(t)(R=null===c.seg.myFill.below||c.seg.myFill.above!==c.seg.myFill.below)&&(P.seg.myFill.above=!P.seg.myFill.above);else P.seg.otherFill=c.seg.myFill;n&&n.segmentUpdate(P.seg),c.other.remove(),c.remove()}if(a.getHead()!==c){n&&n.rewind(c.seg);continue}if(t)R=null===c.seg.myFill.below||c.seg.myFill.above!==c.seg.myFill.below,c.seg.myFill.below=E?E.seg.myFill.above:x,c.seg.myFill.above=R?!c.seg.myFill.below:c.seg.myFill.below;else if(null===c.seg.otherFill){var F;F=E?c.primary===E.primary?E.seg.otherFill.above:E.seg.myFill.above:c.primary?h:x,c.seg.otherFill={above:F,below:F}}n&&n.status(c.seg,!!w&&w.seg,!!E&&E.seg),c.other.status=S.insert(M.node({ev:c}))}else{var _=c.status;if(null===_)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(g.exists(_.prev)&&g.exists(_.next)&&A(_.prev.ev,_.next.ev),n&&n.statusRemove(_.ev.seg),_.remove(),!c.primary){var z=c.seg.myFill;c.seg.myFill=c.seg.otherFill,c.seg.otherFill=z}b.push(c.seg)}a.getHead().remove()}return n&&n.done(),b}return t?{addRegion:function(x){for(var h,g=x[x.length-1],m=0;m<x.length;m++){h=g,g=x[m];var d=T.pointsCompare(h,g);0!==d&&f(i(d<0?h:g,d<0?g:h),!0)}},calculate:function(x){return s(x,!1)}}:{calculate:function(x,h,g,m){return x.forEach(function(d){f(u(d.start,d.end,d),!0)}),g.forEach(function(d){f(u(d.start,d.end,d),!1)}),s(h,m)}}}},96388:$=>{$.exports={create:function(){var e={root:{root:!0,next:null},exists:function(M){return!(null===M||M===e.root)},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(M,I){for(var t=e.root,T=e.root.next;null!==T;){if(I(T))return M.prev=T.prev,M.next=T,T.prev.next=M,void(T.prev=M);t=T,T=T.next}t.next=M,M.prev=t,M.next=null},findTransition:function(M){for(var I=e.root,t=e.root.next;null!==t&&!M(t);)I=t,t=t.next;return{before:I===e.root?null:I,after:t,insert:function(T){return T.prev=I,T.next=t,I.next=T,null!==t&&(t.prev=T),T}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},95360:$=>{$.exports=function K(e,M,I){var t=[],T=[];return e.forEach(function(n){var i=n.start,u=n.end;if(M.pointsSame(i,u))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{I&&I.chainStart(n);for(var a={index:0,matches_head:!1,matches_pt1:!1},r={index:0,matches_head:!1,matches_pt1:!1},o=a,p=0;p<t.length;p++){var l=(f=t[p])[0],s=(f[1],f[f.length-1]);f[f.length-2];if(M.pointsSame(l,i)){if(v(p,!0,!0))break}else if(M.pointsSame(l,u)){if(v(p,!0,!1))break}else if(M.pointsSame(s,i)){if(v(p,!1,!0))break}else if(M.pointsSame(s,u)&&v(p,!1,!1))break}if(o===a)return t.push([i,u]),void(I&&I.chainNew(i,u));if(o===r){I&&I.chainMatch(a.index);var h=a.index,g=a.matches_pt1?u:i,m=a.matches_head,f=t[h],d=m?f[0]:f[f.length-1],A=m?f[1]:f[f.length-2],b=m?f[f.length-1]:f[0],c=m?f[f.length-2]:f[1];return M.pointsCollinear(A,d,g)&&(m?(I&&I.chainRemoveHead(a.index,g),f.shift()):(I&&I.chainRemoveTail(a.index,g),f.pop()),d=A),M.pointsSame(b,g)?(t.splice(h,1),M.pointsCollinear(c,b,d)&&(m?(I&&I.chainRemoveTail(a.index,d),f.pop()):(I&&I.chainRemoveHead(a.index,d),f.shift())),I&&I.chainClose(a.index),void T.push(f)):void(m?(I&&I.chainAddHead(a.index,g),f.unshift(g)):(I&&I.chainAddTail(a.index,g),f.push(g)))}var E=a.index,P=r.index;I&&I.chainConnect(E,P);var R=t[E].length<t[P].length;a.matches_head?r.matches_head?R?(S(E),w(E,P)):(S(P),w(P,E)):w(P,E):r.matches_head?w(E,P):R?(S(E),w(P,E)):(S(P),w(E,P))}function v(F,_,z){return o.index=F,o.matches_head=_,o.matches_pt1=z,o===a?(o=r,!1):(o=null,!0)}function S(F){I&&I.chainReverse(F),t[F].reverse()}function w(F,_){var z=t[F],D=t[_],k=z[z.length-1],O=z[z.length-2],U=D[0],H=D[1];M.pointsCollinear(O,k,U)&&(I&&I.chainRemoveTail(F,k),z.pop(),k=O),M.pointsCollinear(k,U,H)&&(I&&I.chainRemoveHead(_,U),D.shift()),I&&I.chainJoin(F,_),t[F]=z.concat(D),t.splice(_,1)}}),T}},99250:$=>{function K(M,I,t){var T=[];return M.forEach(function(n){var i=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);0!==I[i]&&T.push({id:t?t.segmentId():-1,start:n.start,end:n.end,myFill:{above:1===I[i],below:2===I[i]},otherFill:null})}),t&&t.selected(T),T}var e={union:function(M,I){return K(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],I)},intersect:function(M,I){return K(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],I)},difference:function(M,I){return K(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],I)},differenceRev:function(M,I){return K(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],I)},xor:function(M,I){return K(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],I)}};$.exports=e},17093:($,K,e)=>{"use strict";var I=e(295).Transform,t=e(36743);function T(){I.call(this,{readableObjectMode:!0})}function n(i,u,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=i,u&&(this.code=u),a&&(this.statusCode=a)}T.prototype=Object.create(I.prototype),T.prototype.constructor=T,t(T.prototype),K.OF=function(i,u,a){for(var r=u,o=0;o<a.length;)if(i[r++]!==a[o++])return!1;return!0},K.eG=function(i,u){var a=[],r=0;if(u&&"hex"===u)for(;r<i.length;)a.push(parseInt(i.slice(r,r+2),16)),r+=2;else for(;r<i.length;r++)a.push(255&i.charCodeAt(r));return a},K.mP=function(i,u){return i[u]|i[u+1]<<8},K.n8=function(i,u){return i[u+1]|i[u]<<8},K.nm=function(i,u){return i[u]|i[u+1]<<8|i[u+2]<<16|16777216*i[u+3]},K.Ag=function(i,u){return i[u+3]|i[u+2]<<8|i[u+1]<<16|16777216*i[u]},n.prototype=Object.create(Error.prototype),n.prototype.constructor=n},69005:$=>{"use strict";function K(I,t){var T=new Error(I);return T.code=t,T}function e(I){try{return decodeURIComponent(escape(I))}catch{return I}}function M(I,t,T){this.input=I.subarray(t,T),this.start=t;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==n&&"MM\0*"!==n)throw K("invalid TIFF signature","EBADDATA");this.big_endian="M"===n[0]}M.prototype.each=function(I){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,I)}},M.prototype.read_uint16=function(I){var t=this.input;if(I+2>t.length)throw K("unexpected EOF","EBADDATA");return this.big_endian?256*t[I]+t[I+1]:t[I]+256*t[I+1]},M.prototype.read_uint32=function(I){var t=this.input;if(I+4>t.length)throw K("unexpected EOF","EBADDATA");return this.big_endian?16777216*t[I]+65536*t[I+1]+256*t[I+2]+t[I+3]:t[I]+256*t[I+1]+65536*t[I+2]+16777216*t[I+3]},M.prototype.is_subifd_link=function(I,t){return 0===I&&34665===t||0===I&&34853===t||34665===I&&40965===t},M.prototype.exif_format_length=function(I){switch(I){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(I,t){var T;switch(I){case 1:case 2:return T=this.input[t];case 6:return(T=this.input[t])|33554430*(128&T);case 3:return T=this.read_uint16(t);case 8:return(T=this.read_uint16(t))|131070*(32768&T);case 4:return T=this.read_uint32(t);case 9:return 0|(T=this.read_uint32(t));default:return null}},M.prototype.scan_ifd=function(I,t,T){var n=this.read_uint16(t);t+=2;for(var i=0;i<n;i++){var u=this.read_uint16(t),a=this.read_uint16(t+2),r=this.read_uint32(t+4),o=this.exif_format_length(a),v=r*o,p=v<=4?t+8:this.read_uint32(t+8),f=!1;if(p+v>this.input.length)throw K("unexpected EOF","EBADDATA");for(var l=[],y=p,s=0;s<r;s++,y+=o){var x=this.exif_format_read(a,y);if(null===x){l=null;break}l.push(x)}if(Array.isArray(l)&&2===a&&((l=e(String.fromCharCode.apply(null,l)))&&"\0"===l[l.length-1]&&(l=l.slice(0,-1))),this.is_subifd_link(I,u)&&Array.isArray(l)&&Number.isInteger(l[0])&&l[0]>0&&(this.ifds_to_read.push({id:u,offset:l[0]}),f=!0),!1===T({is_big_endian:this.big_endian,ifd:I,tag:u,format:a,count:r,entry_offset:t+this.start,data_length:v,data_offset:p+this.start,value:l,is_subifd_link:f}))return void(this.aborted=!0);t+=12}0===I&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},$.exports.ExifParser=M,$.exports.get_orientation=function(I){var t=0;try{return new M(I,0,I.length).each(function(T){if(0===T.ifd&&274===T.tag&&Array.isArray(T.value))return t=T.value[0],!1}),t}catch{return-1}}},17959:($,K,e)=>{"use strict";var M=e(17093).n8,I=e(17093).Ag;function t(v,p){if(v.length<4+p)return null;var f=I(v,p);return v.length<f+p||f<8?null:{boxtype:String.fromCharCode.apply(null,v.slice(p+4,p+8)),data:v.slice(p+8,p+f),end:p+f}}function T(v,p){for(var f=0;;){var l=t(v,f);if(!l)break;switch(l.boxtype){case"ispe":p.sizes.push({width:I(l.data,4),height:I(l.data,8)});break;case"irot":p.transforms.push({type:"irot",value:3&l.data[0]});break;case"imir":p.transforms.push({type:"imir",value:1&l.data[0]})}f=l.end}}function n(v,p,f){for(var l=0,y=0;y<f;y++)l=256*l+(v[p+y]||0);return l}function i(v,p){for(var f=v[4]>>4&15,l=15&v[4],y=v[5]>>4&15,s=M(v,6),x=8,h=0;h<s;h++){var g=M(v,x),m=M(v,x+=2),d=n(v,x+=2,y),A=M(v,x+=y);if(x+=2,0===m&&1===A){var b=n(v,x,f),c=n(v,x+f,l);p.item_loc[g]={length:c,offset:b+d}}x+=A*(f+l)}}function u(v,p){for(var f=M(v,4),l=6,y=0;y<f;y++){var s=t(v,l);if(!s)break;if("infe"===s.boxtype){for(var x=M(s.data,4),h="",g=8;g<s.data.length&&s.data[g];g++)h+=String.fromCharCode(s.data[g]);p.item_inf[h]=x}l=s.end}}function a(v,p){for(var f=0;;){var l=t(v,f);if(!l)break;"ipco"===l.boxtype&&T(l.data,p),f=l.end}}$.exports.unbox=t,$.exports.readSizeFromMeta=function(v){var p={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function r(v,p){for(var f=4;;){var l=t(v,f);if(!l)break;"iprp"===l.boxtype&&a(l.data,p),"iloc"===l.boxtype&&i(l.data,p),"iinf"===l.boxtype&&u(l.data,p),f=l.end}}(v,p),p.sizes.length){var f=function o(v){var p=v.reduce(function(y,s){return y.width>s.width||y.width===s.width&&y.height>s.height?y:s}),f=v.reduce(function(y,s){return y.height>s.height||y.height===s.height&&y.width>s.width?y:s});return p.width>f.height||p.width===f.height&&p.height>f.width?p:f}(p.sizes),l=1;p.transforms.forEach(function(s){var x={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},h={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===s.type&&(0===s.value?l=h[l]:l=x[l=x[l=h[l]]]),"irot"===s.type)for(var g=0;g<s.value;g++)l=x[l]});var y=null;return p.item_inf.Exif&&(y=p.item_loc[p.item_inf.Exif]),{width:f.width,height:f.height,orientation:p.transforms.length?l:null,variants:p.sizes,exif_location:y}}},$.exports.getMimeType=function(v){var p=String.fromCharCode.apply(null,v.slice(0,4)),f={};f[p]=!0;for(var l=8;l<v.length;l+=4)f[String.fromCharCode.apply(null,v.slice(l,l+4))]=!0;if(f.mif1||f.msf1||f.miaf)return"avif"===p||"avis"===p||"avio"===p?{type:"avif",mime:"image/avif"}:"heic"===p||"heix"===p?{type:"heic",mime:"image/heic"}:"hevc"===p||"hevx"===p?{type:"heic",mime:"image/heic-sequence"}:f.avif||f.avis?{type:"avif",mime:"image/avif"}:f.heic||f.heix||f.hevc||f.hevx||f.heis?f.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24536:($,K,e)=>{"use strict";var M=e(17093).eG,I=e(17093).OF,t=e(17093).Ag,T=e(17959),n=e(69005),i=M("ftyp");$.exports=function(u){if(I(u,4,i)){var a=T.unbox(u,0);if(a){var r=T.getMimeType(a.data);if(r){for(var o,v=a.end;;){var p=T.unbox(u,v);if(!p)break;if(v=p.end,"mdat"===p.boxtype)return;if("meta"===p.boxtype){o=p.data;break}}if(o){var f=T.readSizeFromMeta(o);if(f){var l={width:f.width,height:f.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(f.variants.length>1&&(l.variants=f.variants),f.orientation&&(l.orientation=f.orientation),f.exif_location&&f.exif_location.offset+f.exif_location.length<=u.length){var y=t(u,f.exif_location.offset),s=u.slice(f.exif_location.offset+y+4,f.exif_location.offset+f.exif_location.length),x=n.get_orientation(s);x>0&&(l.orientation=x)}return l}}}}}}},13477:($,K,e)=>{"use strict";var M=e(17093).eG,I=e(17093).OF,t=e(17093).mP,T=M("BM");$.exports=function(n){if(!(n.length<26)&&I(n,0,T))return{width:t(n,18),height:t(n,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},89218:($,K,e)=>{"use strict";var M=e(17093).eG,I=e(17093).OF,t=e(17093).mP,T=M("GIF87a"),n=M("GIF89a");$.exports=function(i){if(!(i.length<10)&&(I(i,0,T)||I(i,0,n)))return{width:t(i,6),height:t(i,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},8644:($,K,e)=>{"use strict";var M=e(17093).mP;$.exports=function(n){var i=M(n,0),u=M(n,2),a=M(n,4);if(0===i&&1===u&&a){for(var r=[],o={width:0,height:0},v=0;v<a;v++){var p=n[6+16*v]||256,f=n[6+16*v+1]||256,l={width:p,height:f};r.push(l),(p>o.width||f>o.height)&&(o=l)}return{width:o.width,height:o.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},13394:($,K,e)=>{"use strict";var M=e(17093).n8,I=e(17093).eG,t=e(17093).OF,T=e(69005),n=I("Exif\0\0");$.exports=function(i){if(!(i.length<2)&&255===i[0]&&216===i[1]&&255===i[2])for(var u=2;;){for(;;){if(i.length-u<2)return;if(255===i[u++])break}for(var r,a=i[u++];255===a;)a=i[u++];if(208<=a&&a<=217||1===a)r=0;else{if(!(192<=a&&a<=254))return;if(i.length-u<2)return;r=M(i,u)-2,u+=2}if(217===a||218===a)return;var o;if(225===a&&r>=10&&t(i,u,n)&&(o=T.get_orientation(i.slice(u+6,u+r))),r>=5&&192<=a&&a<=207&&196!==a&&200!==a&&204!==a){if(i.length-u<r)return;var v={width:M(i,u+3),height:M(i,u+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(v.orientation=o),v}u+=r}}},82982:($,K,e)=>{"use strict";var M=e(17093).eG,I=e(17093).OF,t=e(17093).Ag,T=M("\x89PNG\r\n\x1a\n"),n=M("IHDR");$.exports=function(i){if(!(i.length<24)&&I(i,0,T)&&I(i,12,n))return{width:t(i,16),height:t(i,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},1445:($,K,e)=>{"use strict";var M=e(17093).eG,I=e(17093).OF,t=e(17093).Ag,T=M("8BPS\0\x01");$.exports=function(n){if(!(n.length<22)&&I(n,0,T))return{width:t(n,18),height:t(n,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},82158:$=>{"use strict";function K(o){return 32===o||9===o||13===o||10===o}function e(o){return"number"==typeof o&&isFinite(o)&&o>0}var I=/<[-_.:a-zA-Z0-9][^>]*>/,t=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,T=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,n=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,i=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,u=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function r(o){return u.test(o)?o.match(u)[0]:"px"}$.exports=function(o){if(function M(o){var v=0,p=o.length;for(239===o[0]&&187===o[1]&&191===o[2]&&(v=3);v<p&&K(o[v]);)v++;return v!==p&&60===o[v]}(o)){for(var v="",p=0;p<o.length;p++)v+=String.fromCharCode(o[p]);var f=(v.match(I)||[""])[0];if(t.test(f)){var l=function a(o){var v=o.match(T),p=o.match(n),f=o.match(i);return{width:v&&(v[1]||v[2]),height:p&&(p[1]||p[2]),viewbox:f&&(f[1]||f[2])}}(f),y=parseFloat(l.width),s=parseFloat(l.height);if(l.width&&l.height)return e(y)&&e(s)?{width:y,height:s,type:"svg",mime:"image/svg+xml",wUnits:r(l.width),hUnits:r(l.height)}:void 0;var x=(l.viewbox||"").split(" "),h={width:x[2],height:x[3]},g=parseFloat(h.width),m=parseFloat(h.height);if(e(g)&&e(m)&&r(h.width)===r(h.height)){var d=g/m;return l.width?e(y)?{width:y,height:y/d,type:"svg",mime:"image/svg+xml",wUnits:r(l.width),hUnits:r(l.width)}:void 0:l.height?e(s)?{width:s*d,height:s,type:"svg",mime:"image/svg+xml",wUnits:r(l.height),hUnits:r(l.height)}:void 0:{width:g,height:m,type:"svg",mime:"image/svg+xml",wUnits:r(h.width),hUnits:r(h.height)}}}}}},27269:($,K,e)=>{"use strict";var M=e(17093).eG,I=e(17093).OF,t=e(17093).mP,T=e(17093).n8,n=e(17093).nm,i=e(17093).Ag,u=M("II*\0"),a=M("MM\0*");function r(p,f,l){return l?T(p,f):t(p,f)}function o(p,f,l){return l?i(p,f):n(p,f)}function v(p,f,l){var y=r(p,f+2,l);return 1!==o(p,f+4,l)||3!==y&&4!==y?null:3===y?r(p,f+8,l):o(p,f+8,l)}$.exports=function(p){if(!(p.length<8)&&(I(p,0,u)||I(p,0,a))){var f=77===p[0],l=o(p,4,f)-8;if(!(l<0)){var y=l+8;if(!(p.length-y<2)){var s=12*r(p,y+0,f);if(!(s<=0||(y+=2,p.length-y<s))){var x,h,g,m;for(x=0;x<s;x+=12)256===(m=r(p,y+x,f))?h=v(p,y+x,f):257===m&&(g=v(p,y+x,f));if(h&&g)return{width:h,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},3902:($,K,e)=>{"use strict";var M=e(17093).eG,I=e(17093).OF,t=e(17093).mP,T=e(17093).nm,n=e(69005),i=M("RIFF"),u=M("WEBP");function a(v,p){if(157===v[p+3]&&1===v[p+4]&&42===v[p+5])return{width:16383&t(v,p+6),height:16383&t(v,p+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(v,p){if(47===v[p]){var f=T(v,p+1);return{width:1+(16383&f),height:1+(f>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function o(v,p){return{width:1+(v[p+6]<<16|v[p+5]<<8|v[p+4]),height:1+(v[p+9]<<p|v[p+8]<<8|v[p+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(v){if(!(v.length<16)&&(I(v,0,i)||I(v,8,u))){var p=12,f=null,l=0,y=T(v,4)+8;if(!(y>v.length)){for(;p+8<y;)if(0!==v[p]){var s=String.fromCharCode.apply(null,v.slice(p,p+4)),x=T(v,p+4);"VP8 "===s&&x>=10?f=f||a(v,p+8):"VP8L"===s&&x>=9?f=f||r(v,p+8):"VP8X"===s&&x>=10?f=f||o(v,p+8):"EXIF"===s&&(l=n.get_orientation(v.slice(p+8,p+8+x)),p=1/0),p+=8+x}else p++;if(f)return l>0&&(f.orientation=l),f}}}},62270:($,K,e)=>{"use strict";$.exports={avif:e(24536),bmp:e(13477),gif:e(89218),ico:e(8644),jpeg:e(13394),png:e(82982),psd:e(1445),svg:e(82158),tiff:e(27269),webp:e(3902)}},31176:($,K,e)=>{"use strict";var M=e(62270);$.exports=function(T){return function I(t){for(var T=Object.keys(M),n=0;n<T.length;n++){var i=M[T[n]](t);if(i)return i}return null}(T)},$.exports.parsers=M},46489:($,K,e)=>{for(var M=e(14270),I=typeof window>"u"?global:window,t=["moz","webkit"],T="AnimationFrame",n=I["request"+T],i=I["cancel"+T]||I["cancelRequest"+T],u=0;!n&&u<t.length;u++)n=I[t[u]+"Request"+T],i=I[t[u]+"Cancel"+T]||I[t[u]+"CancelRequest"+T];if(!n||!i){var a=0,r=0,o=[];n=function(p){if(0===o.length){var f=M(),l=Math.max(0,16.666666666666668-(f-a));a=l+f,setTimeout(function(){var y=o.slice(0);o.length=0;for(var s=0;s<y.length;s++)if(!y[s].cancelled)try{y[s].callback(a)}catch(x){setTimeout(function(){throw x},0)}},Math.round(l))}return o.push({handle:++r,callback:p,cancelled:!1}),r},i=function(p){for(var f=0;f<o.length;f++)o[f].handle===p&&(o[f].cancelled=!0)}}$.exports=function(p){return n.call(I,p)},$.exports.cancel=function(){i.apply(I,arguments)},$.exports.polyfill=function(p){p||(p=I),p.requestAnimationFrame=n,p.cancelAnimationFrame=i}},70891:$=>{"use strict";var e={};function M(i,u,a){a||(a=Error);var o=function(v){function p(f,l,y){return v.call(this,function r(v,p,f){return"string"==typeof u?u:u(v,p,f)}(f,l,y))||this}return function K(i,u){i.prototype=Object.create(u.prototype),i.prototype.constructor=i,i.__proto__=u}(p,v),p}(a);o.prototype.name=a.name,o.prototype.code=i,e[i]=o}function I(i,u){if(Array.isArray(i)){var a=i.length;return i=i.map(function(r){return String(r)}),a>2?"one of ".concat(u," ").concat(i.slice(0,a-1).join(", "),", or ")+i[a-1]:2===a?"one of ".concat(u," ").concat(i[0]," or ").concat(i[1]):"of ".concat(u," ").concat(i[0])}return"of ".concat(u," ").concat(String(i))}M("ERR_INVALID_OPT_VALUE",function(i,u){return'The value "'+u+'" is invalid for option "'+i+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(i,u,a){var r,o;if("string"==typeof u&&function t(i,u,a){return i.substr(!a||a<0?0:+a,u.length)===u}(u,"not ")?(r="must not be",u=u.replace(/^not /,"")):r="must be",function T(i,u,a){return(void 0===a||a>i.length)&&(a=i.length),i.substring(a-u.length,a)===u}(i," argument"))o="The ".concat(i," ").concat(r," ").concat(I(u,"type"));else{var v=function n(i,u,a){return"number"!=typeof a&&(a=0),!(a+u.length>i.length)&&-1!==i.indexOf(u,a)}(i,".")?"property":"argument";o='The "'.concat(i,'" ').concat(v," ").concat(r," ").concat(I(u,"type"))}return o+=". Received type ".concat(typeof a)},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.q=e},41339:($,K,e)=>{"use strict";var M=Object.keys||function(o){var v=[];for(var p in o)v.push(p);return v};$.exports=u;var I=e(3154),t=e(20520);e(83894)(u,I);for(var T=M(t.prototype),n=0;n<T.length;n++){var i=T[n];u.prototype[i]||(u.prototype[i]=t.prototype[i])}function u(o){if(!(this instanceof u))return new u(o);I.call(this,o),t.call(this,o),this.allowHalfOpen=!0,o&&(!1===o.readable&&(this.readable=!1),!1===o.writable&&(this.writable=!1),!1===o.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||process.nextTick(r,this)}function r(o){o.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(v){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=v,this._writableState.destroyed=v)}})},56071:($,K,e)=>{"use strict";$.exports=I;var M=e(6025);function I(t){if(!(this instanceof I))return new I(t);M.call(this,t)}e(83894)(I,M),I.prototype._transform=function(t,T,n){n(null,t)}},3154:($,K,e)=>{"use strict";var M;$.exports=E,E.ReadableState=w;e(59069).EventEmitter;var t=function(J,ue){return J.listeners(ue).length},T=e(4970),n=e(94007).Buffer,i=global.Uint8Array||function(){};var o,r=e(94616);o=r&&r.debuglog?r.debuglog("stream"):function(){};var m,d,A,v=e(25019),p=e(41920),l=e(47102).getHighWaterMark,y=e(70891).q,s=y.ERR_INVALID_ARG_TYPE,x=y.ERR_STREAM_PUSH_AFTER_EOF,h=y.ERR_METHOD_NOT_IMPLEMENTED,g=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(83894)(E,T);var b=p.errorOrDestroy,c=["error","close","destroy","pause","resume"];function w(X,J,ue){M=M||e(41339),X=X||{},"boolean"!=typeof ue&&(ue=J instanceof M),this.objectMode=!!X.objectMode,ue&&(this.objectMode=this.objectMode||!!X.readableObjectMode),this.highWaterMark=l(this,X,"readableHighWaterMark",ue),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==X.emitClose,this.autoDestroy=!!X.autoDestroy,this.destroyed=!1,this.defaultEncoding=X.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,X.encoding&&(m||(m=e(73054).s),this.decoder=new m(X.encoding),this.encoding=X.encoding)}function E(X){if(M=M||e(41339),!(this instanceof E))return new E(X);var J=this instanceof M;this._readableState=new w(X,this,J),this.readable=!0,X&&("function"==typeof X.read&&(this._read=X.read),"function"==typeof X.destroy&&(this._destroy=X.destroy)),T.call(this)}function P(X,J,ue,re,ne){o("readableAddChunk",J);var de,se=X._readableState;if(null===J)se.reading=!1,function k(X,J){if(o("onEofChunk"),!J.ended){if(J.decoder){var ue=J.decoder.end();ue&&ue.length&&(J.buffer.push(ue),J.length+=J.objectMode?1:ue.length)}J.ended=!0,J.sync?O(X):(J.needReadable=!1,J.emittedReadable||(J.emittedReadable=!0,U(X)))}}(X,se);else if(ne||(de=function F(X,J){var ue;return!function a(X){return n.isBuffer(X)||X instanceof i}(J)&&"string"!=typeof J&&void 0!==J&&!X.objectMode&&(ue=new s("chunk",["string","Buffer","Uint8Array"],J)),ue}(se,J)),de)b(X,de);else if(se.objectMode||J&&J.length>0)if("string"!=typeof J&&!se.objectMode&&Object.getPrototypeOf(J)!==n.prototype&&(J=function u(X){return n.from(X)}(J)),re)se.endEmitted?b(X,new g):R(X,se,J,!0);else if(se.ended)b(X,new x);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!ue?(J=se.decoder.write(J),se.objectMode||0!==J.length?R(X,se,J,!1):H(X,se)):R(X,se,J,!1)}else re||(se.reading=!1,H(X,se));return!se.ended&&(se.length<se.highWaterMark||0===se.length)}function R(X,J,ue,re){J.flowing&&0===J.length&&!J.sync?(J.awaitDrain=0,X.emit("data",ue)):(J.length+=J.objectMode?1:ue.length,re?J.buffer.unshift(ue):J.buffer.push(ue),J.needReadable&&O(X)),H(X,J)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(J){this._readableState&&(this._readableState.destroyed=J)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(X,J){J(X)},E.prototype.push=function(X,J){var re,ue=this._readableState;return ue.objectMode?re=!0:"string"==typeof X&&((J=J||ue.defaultEncoding)!==ue.encoding&&(X=n.from(X,J),J=""),re=!0),P(this,X,J,!1,re)},E.prototype.unshift=function(X){return P(this,X,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(X){m||(m=e(73054).s);var J=new m(X);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;for(var ue=this._readableState.buffer.head,re="";null!==ue;)re+=J.write(ue.data),ue=ue.next;return this._readableState.buffer.clear(),""!==re&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};var _=1073741824;function D(X,J){return X<=0||0===J.length&&J.ended?0:J.objectMode?1:X!=X?J.flowing&&J.length?J.buffer.head.data.length:J.length:(X>J.highWaterMark&&(J.highWaterMark=function z(X){return X>=_?X=_:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}(X)),X<=J.length?X:J.ended?J.length:(J.needReadable=!0,0))}function O(X){var J=X._readableState;o("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,J.emittedReadable||(o("emitReadable",J.flowing),J.emittedReadable=!0,process.nextTick(U,X))}function U(X){var J=X._readableState;o("emitReadable_",J.destroyed,J.length,J.ended),!J.destroyed&&(J.length||J.ended)&&(X.emit("readable"),J.emittedReadable=!1),J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,oe(X)}function H(X,J){J.readingMore||(J.readingMore=!0,process.nextTick(j,X,J))}function j(X,J){for(;!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&0===J.length);){var ue=J.length;if(o("maybeReadMore read 0"),X.read(0),ue===J.length)break}J.readingMore=!1}function W(X){var J=X._readableState;J.readableListening=X.listenerCount("readable")>0,J.resumeScheduled&&!J.paused?J.flowing=!0:X.listenerCount("data")>0&&X.resume()}function B(X){o("readable nexttick read 0"),X.read(0)}function q(X,J){o("resume",J.reading),J.reading||X.read(0),J.resumeScheduled=!1,X.emit("resume"),oe(X),J.flowing&&!J.reading&&X.read(0)}function oe(X){var J=X._readableState;for(o("flow",J.flowing);J.flowing&&null!==X.read(););}function ie(X,J){return 0===J.length?null:(J.objectMode?ue=J.buffer.shift():!X||X>=J.length?(ue=J.decoder?J.buffer.join(""):1===J.buffer.length?J.buffer.first():J.buffer.concat(J.length),J.buffer.clear()):ue=J.buffer.consume(X,J.decoder),ue);var ue}function V(X){var J=X._readableState;o("endReadable",J.endEmitted),J.endEmitted||(J.ended=!0,process.nextTick(Y,J,X))}function Y(X,J){if(o("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&0===X.length&&(X.endEmitted=!0,J.readable=!1,J.emit("end"),X.autoDestroy)){var ue=J._writableState;(!ue||ue.autoDestroy&&ue.finished)&&J.destroy()}}function ae(X,J){for(var ue=0,re=X.length;ue<re;ue++)if(X[ue]===J)return ue;return-1}E.prototype.read=function(X){o("read",X),X=parseInt(X,10);var J=this._readableState,ue=X;if(0!==X&&(J.emittedReadable=!1),0===X&&J.needReadable&&((0!==J.highWaterMark?J.length>=J.highWaterMark:J.length>0)||J.ended))return o("read: emitReadable",J.length,J.ended),0===J.length&&J.ended?V(this):O(this),null;if(0===(X=D(X,J))&&J.ended)return 0===J.length&&V(this),null;var ne,re=J.needReadable;return o("need readable",re),(0===J.length||J.length-X<J.highWaterMark)&&o("length less than watermark",re=!0),J.ended||J.reading?o("reading or ended",re=!1):re&&(o("do read"),J.reading=!0,J.sync=!0,0===J.length&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1,J.reading||(X=D(ue,J))),null===(ne=X>0?ie(X,J):null)?(J.needReadable=J.length<=J.highWaterMark,X=0):(J.length-=X,J.awaitDrain=0),0===J.length&&(J.ended||(J.needReadable=!0),ue!==X&&J.ended&&V(this)),null!==ne&&this.emit("data",ne),ne},E.prototype._read=function(X){b(this,new h("_read()"))},E.prototype.pipe=function(X,J){var ue=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=X;break;case 1:re.pipes=[re.pipes,X];break;default:re.pipes.push(X)}re.pipesCount+=1,o("pipe count=%d opts=%j",re.pipesCount,J);var se=(!J||!1!==J.end)&&X!==process.stdout&&X!==process.stderr?be:Pe;function de(Ie,Qe){o("onunpipe"),Ie===ue&&Qe&&!1===Qe.hasUnpiped&&(Qe.hasUnpiped=!0,function Ce(){o("cleanup"),X.removeListener("close",ke),X.removeListener("finish",ze),X.removeListener("drain",De),X.removeListener("error",Fe),X.removeListener("unpipe",de),ue.removeListener("end",be),ue.removeListener("end",Pe),ue.removeListener("data",Le),_e=!0,re.awaitDrain&&(!X._writableState||X._writableState.needDrain)&&De()}())}function be(){o("onend"),X.end()}re.endEmitted?process.nextTick(se):ue.once("end",se),X.on("unpipe",de);var De=function ee(X){return function(){var ue=X._readableState;o("pipeOnDrain",ue.awaitDrain),ue.awaitDrain&&ue.awaitDrain--,0===ue.awaitDrain&&t(X,"data")&&(ue.flowing=!0,oe(X))}}(ue);X.on("drain",De);var _e=!1;function Le(Ie){o("ondata");var Qe=X.write(Ie);o("dest.write",Qe),!1===Qe&&((1===re.pipesCount&&re.pipes===X||re.pipesCount>1&&-1!==ae(re.pipes,X))&&!_e&&(o("false write response, pause",re.awaitDrain),re.awaitDrain++),ue.pause())}function Fe(Ie){o("onerror",Ie),Pe(),X.removeListener("error",Fe),0===t(X,"error")&&b(X,Ie)}function ke(){X.removeListener("finish",ze),Pe()}function ze(){o("onfinish"),X.removeListener("close",ke),Pe()}function Pe(){o("unpipe"),ue.unpipe(X)}return ue.on("data",Le),function S(X,J,ue){if("function"==typeof X.prependListener)return X.prependListener(J,ue);X._events&&X._events[J]?Array.isArray(X._events[J])?X._events[J].unshift(ue):X._events[J]=[ue,X._events[J]]:X.on(J,ue)}(X,"error",Fe),X.once("close",ke),X.once("finish",ze),X.emit("pipe",ue),re.flowing||(o("pipe resume"),ue.resume()),X},E.prototype.unpipe=function(X){var J=this._readableState,ue={hasUnpiped:!1};if(0===J.pipesCount)return this;if(1===J.pipesCount)return X&&X!==J.pipes||(X||(X=J.pipes),J.pipes=null,J.pipesCount=0,J.flowing=!1,X&&X.emit("unpipe",this,ue)),this;if(!X){var re=J.pipes,ne=J.pipesCount;J.pipes=null,J.pipesCount=0,J.flowing=!1;for(var se=0;se<ne;se++)re[se].emit("unpipe",this,{hasUnpiped:!1});return this}var de=ae(J.pipes,X);return-1===de||(J.pipes.splice(de,1),J.pipesCount-=1,1===J.pipesCount&&(J.pipes=J.pipes[0]),X.emit("unpipe",this,ue)),this},E.prototype.on=function(X,J){var ue=T.prototype.on.call(this,X,J),re=this._readableState;return"data"===X?(re.readableListening=this.listenerCount("readable")>0,!1!==re.flowing&&this.resume()):"readable"===X&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,o("on readable",re.length,re.reading),re.length?O(this):re.reading||process.nextTick(B,this)),ue},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(X,J){var ue=T.prototype.removeListener.call(this,X,J);return"readable"===X&&process.nextTick(W,this),ue},E.prototype.removeAllListeners=function(X){var J=T.prototype.removeAllListeners.apply(this,arguments);return("readable"===X||void 0===X)&&process.nextTick(W,this),J},E.prototype.resume=function(){var X=this._readableState;return X.flowing||(o("resume"),X.flowing=!X.readableListening,function te(X,J){J.resumeScheduled||(J.resumeScheduled=!0,process.nextTick(q,X,J))}(this,X)),X.paused=!1,this},E.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(X){var J=this,ue=this._readableState,re=!1;for(var ne in X.on("end",function(){if(o("wrapped end"),ue.decoder&&!ue.ended){var de=ue.decoder.end();de&&de.length&&J.push(de)}J.push(null)}),X.on("data",function(de){(o("wrapped data"),ue.decoder&&(de=ue.decoder.write(de)),ue.objectMode&&null==de||!(ue.objectMode||de&&de.length))||(J.push(de)||(re=!0,X.pause()))}),X)void 0===this[ne]&&"function"==typeof X[ne]&&(this[ne]=function(be){return function(){return X[be].apply(X,arguments)}}(ne));for(var se=0;se<c.length;se++)X.on(c[se],this.emit.bind(this,c[se]));return this._read=function(de){o("wrapped _read",de),re&&(re=!1,X.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=e(13872)),d(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(J){this._readableState&&(this._readableState.flowing=J)}}),E._fromList=ie,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(X,J){return void 0===A&&(A=e(47412)),A(E,X,J)})},6025:($,K,e)=>{"use strict";$.exports=a;var M=e(70891).q,I=M.ERR_METHOD_NOT_IMPLEMENTED,t=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=M.ERR_TRANSFORM_WITH_LENGTH_0,i=e(41339);function u(v,p){var f=this._transformState;f.transforming=!1;var l=f.writecb;if(null===l)return this.emit("error",new t);f.writechunk=null,f.writecb=null,null!=p&&this.push(p),l(v);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function a(v){if(!(this instanceof a))return new a(v);i.call(this,v),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",r)}function r(){var v=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush(function(p,f){o(v,p,f)})}function o(v,p,f){if(p)return v.emit("error",p);if(null!=f&&v.push(f),v._writableState.length)throw new n;if(v._transformState.transforming)throw new T;return v.push(null)}e(83894)(a,i),a.prototype.push=function(v,p){return this._transformState.needTransform=!1,i.prototype.push.call(this,v,p)},a.prototype._transform=function(v,p,f){f(new I("_transform()"))},a.prototype._write=function(v,p,f){var l=this._transformState;if(l.writecb=f,l.writechunk=v,l.writeencoding=p,!l.transforming){var y=this._readableState;(l.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},a.prototype._read=function(v){var p=this._transformState;null===p.writechunk||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},a.prototype._destroy=function(v,p){i.prototype._destroy.call(this,v,function(f){p(f)})}},20520:($,K,e)=>{"use strict";function I(oe){var ie=this;this.next=null,this.entry=null,this.finish=function(){!function q(oe,ie,V){var Y=oe.entry;for(oe.entry=null;Y;){var ae=Y.callback;ie.pendingcb--,ae(V),Y=Y.next}ie.corkedRequestsFree.next=oe}(ie,oe)}}var t;$.exports=w,w.WritableState=c;var T={deprecate:e(23532)},n=e(4970),i=e(94007).Buffer,u=global.Uint8Array||function(){};var S,o=e(41920),p=e(47102).getHighWaterMark,f=e(70891).q,l=f.ERR_INVALID_ARG_TYPE,y=f.ERR_METHOD_NOT_IMPLEMENTED,s=f.ERR_MULTIPLE_CALLBACK,x=f.ERR_STREAM_CANNOT_PIPE,h=f.ERR_STREAM_DESTROYED,g=f.ERR_STREAM_NULL_VALUES,m=f.ERR_STREAM_WRITE_AFTER_END,d=f.ERR_UNKNOWN_ENCODING,A=o.errorOrDestroy;function b(){}function c(oe,ie,V){t=t||e(41339),oe=oe||{},"boolean"!=typeof V&&(V=ie instanceof t),this.objectMode=!!oe.objectMode,V&&(this.objectMode=this.objectMode||!!oe.writableObjectMode),this.highWaterMark=p(this,oe,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Y=!1===oe.decodeStrings;this.decodeStrings=!Y,this.defaultEncoding=oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ae){!function k(oe,ie){var V=oe._writableState,Y=V.sync,ae=V.writecb;if("function"!=typeof ae)throw new s;if(function D(oe){oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0}(V),ie)!function z(oe,ie,V,Y,ae){--ie.pendingcb,V?(process.nextTick(ae,Y),process.nextTick(B,oe,ie),oe._writableState.errorEmitted=!0,A(oe,Y)):(ae(Y),oe._writableState.errorEmitted=!0,A(oe,Y),B(oe,ie))}(oe,V,Y,ie,ae);else{var X=j(V)||oe.destroyed;!X&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&H(oe,V),Y?process.nextTick(O,oe,V,X,ae):O(oe,V,X,ae)}}(ie,ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==oe.emitClose,this.autoDestroy=!!oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new I(this)}function w(oe){var ie=this instanceof(t=t||e(41339));if(!ie&&!S.call(w,this))return new w(oe);this._writableState=new c(oe,this,ie),this.writable=!0,oe&&("function"==typeof oe.write&&(this._write=oe.write),"function"==typeof oe.writev&&(this._writev=oe.writev),"function"==typeof oe.destroy&&(this._destroy=oe.destroy),"function"==typeof oe.final&&(this._final=oe.final)),n.call(this)}function _(oe,ie,V,Y,ae,X,J){ie.writelen=Y,ie.writecb=J,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new h("write")):V?oe._writev(ae,ie.onwrite):oe._write(ae,X,ie.onwrite),ie.sync=!1}function O(oe,ie,V,Y){V||function U(oe,ie){0===ie.length&&ie.needDrain&&(ie.needDrain=!1,oe.emit("drain"))}(oe,ie),ie.pendingcb--,Y(),B(oe,ie)}function H(oe,ie){ie.bufferProcessing=!0;var V=ie.bufferedRequest;if(oe._writev&&V&&V.next){var Y=ie.bufferedRequestCount,ae=new Array(Y),X=ie.corkedRequestsFree;X.entry=V;for(var J=0,ue=!0;V;)ae[J]=V,V.isBuf||(ue=!1),V=V.next,J+=1;ae.allBuffers=ue,_(oe,ie,!0,ie.length,ae,"",X.finish),ie.pendingcb++,ie.lastBufferedRequest=null,X.next?(ie.corkedRequestsFree=X.next,X.next=null):ie.corkedRequestsFree=new I(ie),ie.bufferedRequestCount=0}else{for(;V;){var re=V.chunk,ne=V.encoding,se=V.callback;if(_(oe,ie,!1,ie.objectMode?1:re.length,re,ne,se),V=V.next,ie.bufferedRequestCount--,ie.writing)break}null===V&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=V,ie.bufferProcessing=!1}function j(oe){return oe.ending&&0===oe.length&&null===oe.bufferedRequest&&!oe.finished&&!oe.writing}function ee(oe,ie){oe._final(function(V){ie.pendingcb--,V&&A(oe,V),ie.prefinished=!0,oe.emit("prefinish"),B(oe,ie)})}function B(oe,ie){var V=j(ie);if(V&&(function W(oe,ie){!ie.prefinished&&!ie.finalCalled&&("function"!=typeof oe._final||ie.destroyed?(ie.prefinished=!0,oe.emit("prefinish")):(ie.pendingcb++,ie.finalCalled=!0,process.nextTick(ee,oe,ie)))}(oe,ie),0===ie.pendingcb&&(ie.finished=!0,oe.emit("finish"),ie.autoDestroy))){var Y=oe._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&oe.destroy()}return V}e(83894)(w,n),c.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,V=[];ie;)V.push(ie),ie=ie.next;return V},function(){try{Object.defineProperty(c.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(ie){return!!S.call(this,ie)||this===w&&(ie&&ie._writableState instanceof c)}})):S=function(ie){return ie instanceof this},w.prototype.pipe=function(){A(this,new x)},w.prototype.write=function(oe,ie,V){var Y=this._writableState,ae=!1,X=!Y.objectMode&&function r(oe){return i.isBuffer(oe)||oe instanceof u}(oe);return X&&!i.isBuffer(oe)&&(oe=function a(oe){return i.from(oe)}(oe)),"function"==typeof ie&&(V=ie,ie=null),X?ie="buffer":ie||(ie=Y.defaultEncoding),"function"!=typeof V&&(V=b),Y.ending?function E(oe,ie){var V=new m;A(oe,V),process.nextTick(ie,V)}(this,V):(X||function P(oe,ie,V,Y){var ae;return null===V?ae=new g:"string"!=typeof V&&!ie.objectMode&&(ae=new l("chunk",["string","Buffer"],V)),!ae||(A(oe,ae),process.nextTick(Y,ae),!1)}(this,Y,oe,V))&&(Y.pendingcb++,ae=function F(oe,ie,V,Y,ae,X){if(!V){var J=function R(oe,ie,V){return!oe.objectMode&&!1!==oe.decodeStrings&&"string"==typeof ie&&(ie=i.from(ie,V)),ie}(ie,Y,ae);Y!==J&&(V=!0,ae="buffer",Y=J)}var ue=ie.objectMode?1:Y.length;ie.length+=ue;var re=ie.length<ie.highWaterMark;if(re||(ie.needDrain=!0),ie.writing||ie.corked){var ne=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:Y,encoding:ae,isBuf:V,callback:X,next:null},ne?ne.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else _(oe,ie,!1,ue,Y,ae,X);return re}(this,Y,X,oe,ie,V)),ae},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var oe=this._writableState;oe.corked&&(oe.corked--,!oe.writing&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&H(this,oe))},w.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new d(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(oe,ie,V){V(new y("_write()"))},w.prototype._writev=null,w.prototype.end=function(oe,ie,V){var Y=this._writableState;return"function"==typeof oe?(V=oe,oe=null,ie=null):"function"==typeof ie&&(V=ie,ie=null),null!=oe&&this.write(oe,ie),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||function te(oe,ie,V){ie.ending=!0,B(oe,ie),V&&(ie.finished?process.nextTick(V):oe.once("finish",V)),ie.ended=!0,oe.writable=!1}(this,Y,V),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),w.prototype.destroy=o.destroy,w.prototype._undestroy=o.undestroy,w.prototype._destroy=function(oe,ie){ie(oe)}},13872:($,K,e)=>{"use strict";var M;function I(h,g,m){return g in h?Object.defineProperty(h,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[g]=m,h}var t=e(67542),T=Symbol("lastResolve"),n=Symbol("lastReject"),i=Symbol("error"),u=Symbol("ended"),a=Symbol("lastPromise"),r=Symbol("handlePromise"),o=Symbol("stream");function v(h,g){return{value:h,done:g}}function p(h){var g=h[T];if(null!==g){var m=h[o].read();null!==m&&(h[a]=null,h[T]=null,h[n]=null,g(v(m,!1)))}}function f(h){process.nextTick(p,h)}var y=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((I(M={get stream(){return this[o]},next:function(){var g=this,m=this[i];if(null!==m)return Promise.reject(m);if(this[u])return Promise.resolve(v(void 0,!0));if(this[o].destroyed)return new Promise(function(c,S){process.nextTick(function(){g[i]?S(g[i]):c(v(void 0,!0))})});var A,d=this[a];if(d)A=new Promise(function l(h,g){return function(m,d){h.then(function(){g[u]?m(v(void 0,!0)):g[r](m,d)},d)}}(d,this));else{var b=this[o].read();if(null!==b)return Promise.resolve(v(b,!1));A=new Promise(this[r])}return this[a]=A,A}},Symbol.asyncIterator,function(){return this}),I(M,"return",function(){var g=this;return new Promise(function(m,d){g[o].destroy(null,function(A){A?d(A):m(v(void 0,!0))})})}),M),y);$.exports=function(g){var m,d=Object.create(s,(I(m={},o,{value:g,writable:!0}),I(m,T,{value:null,writable:!0}),I(m,n,{value:null,writable:!0}),I(m,i,{value:null,writable:!0}),I(m,u,{value:g._readableState.endEmitted,writable:!0}),I(m,r,{value:function(b,c){var S=d[o].read();S?(d[a]=null,d[T]=null,d[n]=null,b(v(S,!1))):(d[T]=b,d[n]=c)},writable:!0}),m));return d[a]=null,t(g,function(A){if(A&&"ERR_STREAM_PREMATURE_CLOSE"!==A.code){var b=d[n];return null!==b&&(d[a]=null,d[T]=null,d[n]=null,b(A)),void(d[i]=A)}var c=d[T];null!==c&&(d[a]=null,d[T]=null,d[n]=null,c(v(void 0,!0))),d[u]=!0}),g.on("readable",f.bind(null,d)),d}},25019:($,K,e)=>{"use strict";function M(f,l){var y=Object.keys(f);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(f);l&&(s=s.filter(function(x){return Object.getOwnPropertyDescriptor(f,x).enumerable})),y.push.apply(y,s)}return y}function t(f,l,y){return l in f?Object.defineProperty(f,l,{value:y,enumerable:!0,configurable:!0,writable:!0}):f[l]=y,f}function n(f,l){for(var y=0;y<l.length;y++){var s=l[y];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}var a=e(94007).Buffer,o=e(52361).inspect,v=o&&o.custom||"inspect";function p(f,l,y){a.prototype.copy.call(f,l,y)}$.exports=function(){function f(){(function T(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}return function i(f,l,y){return l&&n(f.prototype,l),y&&n(f,y),f}(f,[{key:"push",value:function(y){var s={data:y,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(y){var s={data:y,next:this.head};0===this.length&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(0!==this.length){var y=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(0===this.length)return"";for(var s=this.head,x=""+s.data;s=s.next;)x+=y+s.data;return x}},{key:"concat",value:function(y){if(0===this.length)return a.alloc(0);for(var s=a.allocUnsafe(y>>>0),x=this.head,h=0;x;)p(x.data,s,h),h+=x.data.length,x=x.next;return s}},{key:"consume",value:function(y,s){var x;return y<this.head.data.length?(x=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):x=y===this.head.data.length?this.shift():s?this._getString(y):this._getBuffer(y),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var s=this.head,x=1,h=s.data;for(y-=h.length;s=s.next;){var g=s.data,m=y>g.length?g.length:y;if(m===g.length?h+=g:h+=g.slice(0,y),0===(y-=m)){m===g.length?(++x,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=g.slice(m));break}++x}return this.length-=x,h}},{key:"_getBuffer",value:function(y){var s=a.allocUnsafe(y),x=this.head,h=1;for(x.data.copy(s),y-=x.data.length;x=x.next;){var g=x.data,m=y>g.length?g.length:y;if(g.copy(s,s.length-y,0,m),0===(y-=m)){m===g.length?(++h,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=g.slice(m));break}++h}return this.length-=h,s}},{key:v,value:function(y,s){return o(this,function I(f){for(var l=1;l<arguments.length;l++){var y=null!=arguments[l]?arguments[l]:{};l%2?M(Object(y),!0).forEach(function(s){t(f,s,y[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(y)):M(Object(y)).forEach(function(s){Object.defineProperty(f,s,Object.getOwnPropertyDescriptor(y,s))})}return f}({},s,{depth:0,customInspect:!1}))}}]),f}()},41920:$=>{"use strict";function e(n,i){t(n,i),M(n)}function M(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function t(n,i){n.emit("error",i)}$.exports={destroy:function K(n,i){var u=this,a=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return a||r?(i?i(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(t,this,n)):process.nextTick(t,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(o){!i&&o?u._writableState?u._writableState.errorEmitted?process.nextTick(M,u):(u._writableState.errorEmitted=!0,process.nextTick(e,u,o)):process.nextTick(e,u,o):i?(process.nextTick(M,u),i(o)):process.nextTick(M,u)}),this)},undestroy:function I(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function T(n,i){var u=n._readableState,a=n._writableState;u&&u.autoDestroy||a&&a.autoDestroy?n.destroy(i):n.emit("error",i)}}},67542:($,K,e)=>{"use strict";var M=e(70891).q.ERR_STREAM_PREMATURE_CLOSE;function t(){}$.exports=function n(i,u,a){if("function"==typeof u)return n(i,null,u);u||(u={}),a=function I(i){var u=!1;return function(){if(!u){u=!0;for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];i.apply(this,r)}}}(a||t);var r=u.readable||!1!==u.readable&&i.readable,o=u.writable||!1!==u.writable&&i.writable,v=function(){i.writable||f()},p=i._writableState&&i._writableState.finished,f=function(){o=!1,p=!0,r||a.call(i)},l=i._readableState&&i._readableState.endEmitted,y=function(){r=!1,l=!0,o||a.call(i)},s=function(m){a.call(i,m)},x=function(){var m;return r&&!l?((!i._readableState||!i._readableState.ended)&&(m=new M),a.call(i,m)):o&&!p?((!i._writableState||!i._writableState.ended)&&(m=new M),a.call(i,m)):void 0},h=function(){i.req.on("finish",f)};return function T(i){return i.setHeader&&"function"==typeof i.abort}(i)?(i.on("complete",f),i.on("abort",x),i.req?h():i.on("request",h)):o&&!i._writableState&&(i.on("end",v),i.on("close",v)),i.on("end",y),i.on("finish",f),!1!==u.error&&i.on("error",s),i.on("close",x),function(){i.removeListener("complete",f),i.removeListener("abort",x),i.removeListener("request",h),i.req&&i.req.removeListener("finish",f),i.removeListener("end",v),i.removeListener("close",v),i.removeListener("finish",f),i.removeListener("end",y),i.removeListener("error",s),i.removeListener("close",x)}}},47412:$=>{$.exports=function(){throw new Error("Readable.from is not available in the browser")}},90954:($,K,e)=>{"use strict";var M;var t=e(70891).q,T=t.ERR_MISSING_ARGS,n=t.ERR_STREAM_DESTROYED;function i(f){if(f)throw f}function a(f,l,y,s){s=function I(f){var l=!1;return function(){l||(l=!0,f.apply(void 0,arguments))}}(s);var x=!1;f.on("close",function(){x=!0}),void 0===M&&(M=e(67542)),M(f,{readable:l,writable:y},function(g){if(g)return s(g);x=!0,s()});var h=!1;return function(g){if(!x&&!h){if(h=!0,function u(f){return f.setHeader&&"function"==typeof f.abort}(f))return f.abort();if("function"==typeof f.destroy)return f.destroy();s(g||new n("pipe"))}}}function r(f){f()}function o(f,l){return f.pipe(l)}function v(f){return f.length&&"function"==typeof f[f.length-1]?f.pop():i}$.exports=function p(){for(var f=arguments.length,l=new Array(f),y=0;y<f;y++)l[y]=arguments[y];var s=v(l);if(Array.isArray(l[0])&&(l=l[0]),l.length<2)throw new T("streams");var x,h=l.map(function(g,m){var d=m<l.length-1;return a(g,d,m>0,function(b){x||(x=b),b&&h.forEach(r),!d&&(h.forEach(r),s(x))})});return l.reduce(o)}},47102:($,K,e)=>{"use strict";var M=e(70891).q.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function t(T,n,i,u){var a=function I(T,n,i){return null!=T.highWaterMark?T.highWaterMark:n?T[i]:null}(n,u,i);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new M(u?i:"highWaterMark",a);return Math.floor(a)}return T.objectMode?16:16384}}},4970:($,K,e)=>{$.exports=e(59069).EventEmitter},98399:($,K,e)=>{"use strict";const M=e(8236),I=e(92473),t=e(6694),T=e(9284),n=e(35943),i=e(97604),{float32:u,fract32:a}=e(19606);$.exports=function o(v,p){if("function"==typeof v?(p||(p={}),p.regl=v):p=v,p.length&&(p.positions=p),!(v=p.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");let l,y,s,x,h,g,f=v._gl,m={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},d=[];return x=v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),y=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=v.buffer({usage:"static",type:"float",data:r}),S(p),l=v({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:v.prop("range"),lineWidth:v.prop("lineWidth"),capSize:v.prop("capSize"),opacity:v.prop("opacity"),scale:v.prop("scale"),translate:v.prop("translate"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),viewport:(E,P)=>[P.viewport.x,P.viewport.y,E.viewportWidth,E.viewportHeight]},attributes:{color:{buffer:x,offset:(E,P)=>4*P.offset,divisor:1},position:{buffer:y,offset:(E,P)=>8*P.offset,divisor:1},positionFract:{buffer:s,offset:(E,P)=>8*P.offset,divisor:1},error:{buffer:h,offset:(E,P)=>16*P.offset,divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport"),stencil:!1,instances:v.prop("count"),count:r.length}),n(A,{update:S,draw:b,destroy:w,regl:v,gl:f,canvas:f.canvas,groups:d}),A;function A(E){E?S(E):null===E&&w(),b()}function b(E){if("number"==typeof E)return c(E);E&&!Array.isArray(E)&&(E=[E]),v._refresh(),d.forEach((P,R)=>{if(P){if(E&&(E[R]?P.draw=!0:P.draw=!1),!P.draw)return void(P.draw=!0);c(R)}})}function c(E){"number"==typeof E&&(E=d[E]),null!=E&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(!E)return;null!=E.length?"number"==typeof E[0]&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);let P=0,R=0;if(A.groups=d=E.map((z,D)=>{let k=d[D];return z?("function"==typeof z?z={after:z}:"number"==typeof z[0]&&(z={positions:z}),z=T(z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),k||(d[D]=k={id:D,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},z=n({},m,z)),t(k,z,[{lineWidth:O=>.5*+O,capSize:O=>.5*+O,opacity:parseFloat,errors:O=>(O=i(O),R+=O.length,O),positions:(O,U)=>(O=i(O,"float64"),U.count=Math.floor(O.length/2),U.bounds=M(O,2),U.offset=P,P+=U.count,O)},{color:(O,U)=>{let H=U.count;if(O||(O="transparent"),!Array.isArray(O)||"number"==typeof O[0]){let ee=O;O=Array(H);for(let W=0;W<H;W++)O[W]=ee}if(O.length<H)throw Error("Not enough colors");let j=new Uint8Array(4*H);for(let ee=0;ee<H;ee++){let W=I(O[ee],"uint8");j.set(W,4*ee)}return j},range:(O,U,H)=>{let j=U.bounds;return O||(O=j),U.scale=[1/(O[2]-O[0]),1/(O[3]-O[1])],U.translate=[-O[0],-O[1]],U.scaleFract=a(U.scale),U.translateFract=a(U.translate),O},viewport:O=>{let U;return Array.isArray(O)?U={x:O[0],y:O[1],width:O[2]-O[0],height:O[3]-O[1]}:O?(U={x:O.x||O.left||0,y:O.y||O.top||0},O.right?U.width=O.right-U.x:U.width=O.w||O.width||0,O.bottom?U.height=O.bottom-U.y:U.height=O.h||O.height||0):U={x:0,y:0,width:f.drawingBufferWidth,height:f.drawingBufferHeight},U}}]),k):k}),P||R){let z=d.reduce((U,H,j)=>U+(H?H.count:0),0),D=new Float64Array(2*z),k=new Uint8Array(4*z),O=new Float32Array(4*z);d.forEach((U,H)=>{if(!U)return;let{positions:j,count:ee,offset:W,color:B,errors:te}=U;ee&&(k.set(B,4*W),O.set(te,4*W),D.set(j,2*W))});var F=u(D);y(F);var _=a(D,F);s(_),x(k),h(O)}}function w(){y.destroy(),s.destroy(),x.destroy(),h.destroy(),g.destroy()}};const r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},36224:($,K,e)=>{"use strict";const M=e(92473),I=e(8236),t=e(35943),T=e(13215),n=e(9284),i=e(97604),u=e(5469),a=e(31138),{float32:r,fract32:o}=e(19606),v=e(21713),p=e(60574),f=e(14010);function l(y,s){if(!(this instanceof l))return new l(y,s);if("function"==typeof y?(s||(s={}),s.regl=y):s=y,s.length&&(s.positions=s),!(y=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=y._gl,this.regl=y,this.passes=[],this.shaders=l.shaders.has(y)?l.shaders.get(y):l.shaders.set(y,l.createShaders(y)).get(y),this.update(s)}$.exports=l,l.dashMult=2,l.maxPatternLength=256,l.precisionThreshold=3e6,l.maxPoints=1e4,l.maxLines=2048,l.shaders=new v,l.createShaders=function(y){let g,s=y.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x={primitive:"triangle strip",instances:y.prop("count"),count:4,offset:0,uniforms:{miterMode:(d,A)=>"round"===A.join?2:1,miterLimit:y.prop("miterLimit"),scale:y.prop("scale"),scaleFract:y.prop("scaleFract"),translateFract:y.prop("translateFract"),translate:y.prop("translate"),thickness:y.prop("thickness"),dashTexture:y.prop("dashTexture"),opacity:y.prop("opacity"),pixelRatio:y.context("pixelRatio"),id:y.prop("id"),dashLength:y.prop("dashLength"),viewport:(d,A)=>[A.viewport.x,A.viewport.y,d.viewportWidth,d.viewportHeight],depth:y.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:(d,A)=>!A.overlay},stencil:{enable:!1},scissor:{enable:!0,box:y.prop("viewport")},viewport:y.prop("viewport")},h=y(t({vert:T("./rect-vert.glsl"),frag:T("./rect-frag.glsl"),attributes:{lineEnd:{buffer:s,divisor:0,stride:8,offset:0},lineTop:{buffer:s,divisor:0,stride:8,offset:4},aCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:y.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},x));try{g=y(t({cull:{enable:!0,face:"back"},vert:T("./miter-vert.glsl"),frag:T("./miter-frag.glsl"),attributes:{lineEnd:{buffer:s,divisor:0,stride:8,offset:0},lineTop:{buffer:s,divisor:0,stride:8,offset:4},aColor:{buffer:y.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:y.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:y.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},x))}catch{g=h}return{fill:y({primitive:"triangle",elements:(d,A)=>A.triangles,offset:0,vert:T("./fill-vert.glsl"),frag:T("./fill-frag.glsl"),uniforms:{scale:y.prop("scale"),color:y.prop("fill"),scaleFract:y.prop("scaleFract"),translateFract:y.prop("translateFract"),translate:y.prop("translate"),opacity:y.prop("opacity"),pixelRatio:y.context("pixelRatio"),id:y.prop("id"),viewport:(d,A)=>[A.viewport.x,A.viewport.y,d.viewportWidth,d.viewportHeight]},attributes:{position:{buffer:y.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:y.prop("positionFractBuffer"),stride:8,offset:8}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport}),rect:h,miter:g}},l.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},l.prototype.render=function(...y){y.length&&this.update(...y),this.draw()},l.prototype.draw=function(...y){return(y.length?y:this.passes).forEach((s,x)=>{if(s&&Array.isArray(s))return this.draw(...s);"number"==typeof s&&(s=this.passes[s]),s&&s.count>1&&s.opacity&&(this.regl._refresh(),s.fill&&s.triangles&&s.triangles.length>2&&this.shaders.fill(s),s.thickness&&(s.scale[0]*s.viewport.width>l.precisionThreshold||s.scale[1]*s.viewport.height>l.precisionThreshold||"rect"===s.join||!s.join&&(s.thickness<=2||s.count>=l.maxPoints)?this.shaders.rect(s):this.shaders.miter(s)))}),this},l.prototype.update=function(y){if(!y)return;null!=y.length?"number"==typeof y[0]&&(y=[{positions:y}]):Array.isArray(y)||(y=[y]);let{regl:s,gl:x}=this;if(y.forEach((g,m)=>{let d=this.passes[m];if(void 0!==g){if(null===g)return void(this.passes[m]=null);if("number"==typeof g[0]&&(g={positions:g}),g=n(g,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),d||(this.passes[m]=d={id:m,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:s.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},g=t({},l.defaults,g)),null!=g.thickness&&(d.thickness=parseFloat(g.thickness)),null!=g.opacity&&(d.opacity=parseFloat(g.opacity)),null!=g.miterLimit&&(d.miterLimit=parseFloat(g.miterLimit)),null!=g.overlay&&(d.overlay=!!g.overlay,m<l.maxLines&&(d.depth=2*(l.maxLines-1-m%l.maxLines)/l.maxLines-1)),null!=g.join&&(d.join=g.join),null!=g.hole&&(d.hole=g.hole),null!=g.fill&&(d.fill=g.fill?M(g.fill,"uint8"):null),null!=g.viewport&&(d.viewport=p(g.viewport)),d.viewport||(d.viewport=p([x.drawingBufferWidth,x.drawingBufferHeight])),null!=g.close&&(d.close=g.close),null===g.positions&&(g.positions=[]),g.positions){let c,S;if(g.positions.x&&g.positions.y){let R=g.positions.x,F=g.positions.y;S=d.count=Math.max(R.length,F.length),c=new Float64Array(2*S);for(let _=0;_<S;_++)c[2*_]=R[_],c[2*_+1]=F[_]}else c=i(g.positions,"float64"),S=d.count=Math.floor(c.length/2);let w=d.bounds=I(c,2);if(d.fill){let R=[],F={},_=0;for(let z=0,D=0,k=d.count;z<k;z++){let O=c[2*z],U=c[2*z+1];isNaN(O)||isNaN(U)||null==O||null==U?(O=c[2*_],U=c[2*_+1],F[z]=_):_=z,R[D++]=O,R[D++]=U}if(g.splitNull){d.count-1 in F||(F[d.count]=d.count-1);let z=Object.keys(F).map(Number).sort((U,H)=>U-H),D=[],k=0,O=null!=d.hole?d.hole[0]:null;if(null!=O){let U=f(z,H=>H>=O);z=z.slice(0,U),z.push(O)}for(let U=0;U<z.length;U++){let H=R.slice(2*k,2*z[U]).concat(O?R.slice(2*O):[]),j=(d.hole||[]).map(W=>W-O+(z[U]-k)),ee=u(H,j);ee=ee.map(W=>W+k+(W+k<z[U]?0:O-z[U])),D.push(...ee),k=z[U]+1}for(let U=0,H=D.length;U<H;U++)null!=F[D[U]]&&(D[U]=F[D[U]]);d.triangles=D}else{let z=u(R,d.hole||[]);for(let D=0,k=z.length;D<k;D++)null!=F[z[D]]&&(z[D]=F[z[D]]);d.triangles=z}}let E=new Float64Array(c);a(E,2,w);let P=new Float64Array(2*S+6);d.close?c[0]===c[2*S-2]&&c[1]===c[2*S-1]?(P[0]=E[2*S-4],P[1]=E[2*S-3]):(P[0]=E[2*S-2],P[1]=E[2*S-1]):(P[0]=E[0],P[1]=E[1]),P.set(E,2),d.close?c[0]===c[2*S-2]&&c[1]===c[2*S-1]?(P[2*S+2]=E[2],P[2*S+3]=E[3],d.count-=1):(P[2*S+2]=E[0],P[2*S+3]=E[1],P[2*S+4]=E[2],P[2*S+5]=E[3]):(P[2*S+2]=E[2*S-2],P[2*S+3]=E[2*S-1],P[2*S+4]=E[2*S-2],P[2*S+5]=E[2*S-1]);var A=r(P);d.positionBuffer(A);var b=o(P,A);d.positionFractBuffer(b)}if(g.range?d.range=g.range:d.range||(d.range=d.bounds),(g.range||g.positions)&&d.count){let c=d.bounds,S=c[2]-c[0],w=c[3]-c[1],E=d.range[2]-d.range[0],P=d.range[3]-d.range[1];d.scale=[S/E,w/P],d.translate=[-d.range[0]/E+c[0]/E||0,-d.range[1]/P+c[1]/P||0],d.scaleFract=o(d.scale),d.translateFract=o(d.translate)}if(g.dashes){let S,c=0;if(!g.dashes||g.dashes.length<2)c=1,S=new Uint8Array([255,255,255,255,255,255,255,255]);else{c=0;for(let P=0;P<g.dashes.length;++P)c+=g.dashes[P];S=new Uint8Array(c*l.dashMult);let w=0,E=255;for(let P=0;P<2;P++)for(let R=0;R<g.dashes.length;++R){for(let F=0,_=g.dashes[R]*l.dashMult*.5;F<_;++F)S[w++]=E;E^=255}}d.dashLength=c,d.dashTexture({channels:1,data:S,width:S.length,height:1,mag:"linear",min:"linear"},0,0)}if(g.color){let c=d.count,S=g.color;S||(S="transparent");let w=new Uint8Array(4*c+4);if(Array.isArray(S)&&"number"!=typeof S[0]){for(let E=0;E<c;E++){let P=M(S[E],"uint8");w.set(P,4*E)}w.set(M(S[0],"uint8"),4*c)}else{let E=M(S,"uint8");for(let P=0;P<c+1;P++)w.set(E,4*P)}d.colorBuffer({usage:"dynamic",type:"uint8",data:w})}}}),y.length<this.passes.length){for(let g=y.length;g<this.passes.length;g++){let m=this.passes[g];m&&(m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy())}this.passes.length=y.length}let h=[];for(let g=0;g<this.passes.length;g++)null!==this.passes[g]&&h.push(this.passes[g]);return this.passes=h,this},l.prototype.destroy=function(){return this.passes.forEach(y=>{y.colorBuffer.destroy(),y.positionBuffer.destroy(),y.dashTexture.destroy()}),this.passes.length=0,this}},68762:($,K,e)=>{"use strict";function I(E,P){return function n(E){if(Array.isArray(E))return E}(E)||function M(E,P){var R=null==E?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(null!=R){var F,_,z,D,k=[],O=!0,U=!1;try{if(z=(R=R.call(E)).next,0===P){if(Object(R)!==R)return;O=!1}else for(;!(O=(F=z.call(R)).done)&&(k.push(F.value),k.length!==P);O=!0);}catch(H){U=!0,_=H}finally{try{if(!O&&null!=R.return&&(D=R.return(),Object(D)!==D))return}finally{if(U)throw _}}return k}}(E,P)||u(E,P)||function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(E){return function T(E){if(Array.isArray(E))return a(E)}(E)||function i(E){if(typeof Symbol<"u"&&null!=E[Symbol.iterator]||null!=E["@@iterator"])return Array.from(E)}(E)||u(E)||function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(E,P){if(E){if("string"==typeof E)return a(E,P);var R=Object.prototype.toString.call(E).slice(8,-1);if("Object"===R&&E.constructor&&(R=E.constructor.name),"Map"===R||"Set"===R)return Array.from(E);if("Arguments"===R||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return a(E,P)}}function a(E,P){(null==P||P>E.length)&&(P=E.length);for(var R=0,F=new Array(P);R<P;R++)F[R]=E[R];return F}var v=e(92473),p=e(8236),f=e(11213),l=e(52092),y=e(35943),s=e(13215),x=e(9284),h=e(6694),g=e(97604),m=e(39521),d=e(19606),A=e(60574),b=c;function c(E,P){var R=this;if(!(this instanceof c))return new c(E,P);"function"==typeof E?(P||(P={}),P.regl=E):(P=E,E=null),P&&P.length&&(P.positions=P);var _,F=(E=P.regl)._gl,z=[],H=255;this.tooManyColors=m,_=E.texture({data:new Uint8Array(4*H),width:H,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),y(this,{regl:E,gl:F,groups:[],markerCache:[null],markerTextures:[null],palette:z,paletteIds:{},paletteTexture:_,maxColors:H,maxSize:100,canvas:F.canvas}),this.update(P);var ee={uniforms:{constPointSize:!!P.constPointSize,opacity:E.prop("opacity"),paletteSize:function(q,oe){return[R.tooManyColors?0:H,_.height]},pixelRatio:E.context("pixelRatio"),scale:E.prop("scale"),scaleFract:E.prop("scaleFract"),translate:E.prop("translate"),translateFract:E.prop("translateFract"),markerTexture:E.prop("markerTexture"),paletteTexture:_},attributes:{x:function(q,oe){return oe.xAttr||{buffer:oe.positionBuffer,stride:8,offset:0}},y:function(q,oe){return oe.yAttr||{buffer:oe.positionBuffer,stride:8,offset:4}},xFract:function(q,oe){return oe.xAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:0}},yFract:function(q,oe){return oe.yAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:4}},size:function(q,oe){return oe.size.length?{buffer:oe.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*oe.size/R.maxSize)]}},borderSize:function(q,oe){return oe.borderSize.length?{buffer:oe.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*oe.borderSize/R.maxSize)]}},colorId:function(q,oe){return oe.color.length?{buffer:oe.colorBuffer,stride:R.tooManyColors?8:4,offset:0}:{constant:R.tooManyColors?z.slice(4*oe.color,4*oe.color+4):[oe.color]}},borderColorId:function(q,oe){return oe.borderColor.length?{buffer:oe.colorBuffer,stride:R.tooManyColors?8:4,offset:R.tooManyColors?4:2}:{constant:R.tooManyColors?z.slice(4*oe.borderColor,4*oe.borderColor+4):[oe.borderColor]}},isActive:function(q,oe){return!0===oe.activation?{constant:[1]}:oe.activation?oe.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:E.prop("viewport")},viewport:E.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:E.prop("elements"),count:E.prop("count"),offset:E.prop("offset"),primitive:"points"},W=y({},ee);W.frag=s(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),W.vert=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),this.drawMarker=E(W);var B=y({},ee);B.frag=s(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),B.vert=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),m&&(B.frag=B.frag.replace("smoothstep","smoothStep"),W.frag=W.frag.replace("smoothstep","smoothStep")),this.drawCircle=E(B)}c.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},c.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},c.prototype.draw=function(){for(var E=this,P=arguments.length,R=new Array(P),F=0;F<P;F++)R[F]=arguments[F];var _=this.groups;if(1===R.length&&Array.isArray(R[0])&&(null===R[0][0]||Array.isArray(R[0][0]))&&(R=R[0]),this.regl._refresh(),R.length)for(var z=0;z<R.length;z++)this.drawItem(z,R[z]);else _.forEach(function(D,k){E.drawItem(k)});return this},c.prototype.drawItem=function(E,P){var R=this.groups,F=R[E];if("number"==typeof P&&(E=P,F=R[P],P=null),F&&F.count&&F.opacity){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,P));for(var _=[],z=1;z<F.activation.length;z++)!F.activation[z]||!0!==F.activation[z]&&!F.activation[z].data.length||_.push.apply(_,t(this.getMarkerDrawOptions(z,F,P)));_.length&&this.drawMarker(_)}},c.prototype.getMarkerDrawOptions=function(E,P,R){var F=P.range,_=P.tree,z=P.viewport,D=P.activation,k=P.selectionBuffer,O=P.count;this.regl;if(!_)return R?[y({},P,{markerTexture:this.markerTextures[E],activation:D[E],count:R.length,elements:R,offset:0})]:[y({},P,{markerTexture:this.markerTextures[E],activation:D[E],offset:0})];var H=[],j=_.range(F,{lod:!0,px:[(F[2]-F[0])/z.width,(F[3]-F[1])/z.height]});if(R){for(var W=D[E].data,B=new Uint8Array(O),te=0;te<R.length;te++){var q=R[te];B[q]=W?W[q]:1}k.subdata(B)}for(var oe=j.length;oe--;){var ie=I(j[oe],2),V=ie[0],Y=ie[1];H.push(y({},P,{markerTexture:this.markerTextures[E],activation:R?k:D[E],offset:V,count:Y-V}))}return H},c.prototype.update=function(){for(var E=this,P=arguments.length,R=new Array(P),F=0;F<P;F++)R[F]=arguments[F];if(R.length){1===R.length&&Array.isArray(R[0])&&(R=R[0]);var _=this.groups,z=this.gl,D=this.regl,k=this.maxSize,O=this.maxColors,U=this.palette;this.groups=_=R.map(function(H,j){var ee=_[j];if(void 0===H)return ee;null===H?H={positions:null}:"function"==typeof H?H={ondraw:H}:"number"==typeof H[0]&&(H={positions:H}),null===(H=x(H,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(H.positions=[]),null!=H.tooManyColors&&(E.tooManyColors=H.tooManyColors),ee||(_[j]=ee={id:j,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},H=y({},c.defaults,H)),H.positions&&!("marker"in H)&&(H.marker=ee.marker,delete ee.marker),H.marker&&!("positions"in H)&&(H.positions=ee.positions,delete ee.positions);var W=0,B=0;if(h(ee,H,[{snap:!0,size:function(Le,Fe){return null==Le&&(Le=c.defaults.size),W+=Le&&Le.length?1:0,Le},borderSize:function(Le,Fe){return null==Le&&(Le=c.defaults.borderSize),W+=Le&&Le.length?1:0,Le},opacity:parseFloat,color:function(Le,Fe){return null==Le&&(Le=c.defaults.color),Le=E.updateColor(Le),B++,Le},borderColor:function(Le,Fe){return null==Le&&(Le=c.defaults.borderColor),Le=E.updateColor(Le),B++,Le},bounds:function(Le,Fe,ke){return"range"in ke||(ke.range=null),Le},positions:function(Le,Fe,ke){var ze=Fe.snap,Pe=Fe.positionBuffer,Ie=Fe.positionFractBuffer,Qe=Fe.selectionBuffer;if(Le.x||Le.y)return Le.x.length?Fe.xAttr={buffer:D.buffer(Le.x),offset:0,stride:4,count:Le.x.length}:Fe.xAttr={buffer:Le.x.buffer,offset:4*Le.x.offset||0,stride:4*(Le.x.stride||1),count:Le.x.count},Le.y.length?Fe.yAttr={buffer:D.buffer(Le.y),offset:0,stride:4,count:Le.y.length}:Fe.yAttr={buffer:Le.y.buffer,offset:4*Le.y.offset||0,stride:4*(Le.y.stride||1),count:Le.y.count},Fe.count=Math.max(Fe.xAttr.count,Fe.yAttr.count),Le;Le=g(Le,"float64");var at=Fe.count=Math.floor(Le.length/2),Be=Fe.bounds=at?p(Le,2):null;if(!ke.range&&!Fe.range&&(delete Fe.range,ke.range=Be),!ke.marker&&!Fe.marker&&(delete Fe.marker,ke.marker=null),ze&&(!0===ze||at>ze)?Fe.tree=l(Le,{bounds:Be}):ze&&ze.length&&(Fe.tree=ze),Fe.tree){var Ne={primitive:"points",usage:"static",data:Fe.tree,type:"uint32"};Fe.elements?Fe.elements(Ne):Fe.elements=D.elements(Ne)}var nt=d.float32(Le);return Pe({data:nt,usage:"dynamic"}),Ie({data:d.fract32(Le,nt),usage:"dynamic"}),Qe({data:new Uint8Array(at),type:"uint8",usage:"stream"}),Le}},{marker:function(Le,Fe,ke){var ze=Fe.activation;if(ze.forEach(function(ct){return ct&&ct.destroy&&ct.destroy()}),ze.length=0,Le&&"number"!=typeof Le[0]){for(var Ie=[],Qe=0,at=Math.min(Le.length,Fe.count);Qe<at;Qe++){var Be=E.addMarker(Le[Qe]);Ie[Be]||(Ie[Be]=new Uint8Array(Fe.count)),Ie[Be][Qe]=1}for(var Ne=0;Ne<Ie.length;Ne++)if(Ie[Ne]){var nt={data:Ie[Ne],type:"uint8",usage:"static"};ze[Ne]?ze[Ne](nt):ze[Ne]=D.buffer(nt),ze[Ne].data=Ie[Ne]}}else{ze[E.addMarker(Le)]=!0}return Le},range:function(Le,Fe,ke){var ze=Fe.bounds;if(ze)return Le||(Le=ze),Fe.scale=[1/(Le[2]-Le[0]),1/(Le[3]-Le[1])],Fe.translate=[-Le[0],-Le[1]],Fe.scaleFract=d.fract(Fe.scale),Fe.translateFract=d.fract(Fe.translate),Le},viewport:function(Le){return A(Le||[z.drawingBufferWidth,z.drawingBufferHeight])}}]),W){var te=ee,q=te.count,oe=te.size,ie=te.borderSize,V=te.sizeBuffer,Y=new Uint8Array(2*q);if(oe.length||ie.length)for(var ae=0;ae<q;ae++)Y[2*ae]=Math.round(255*(null==oe[ae]?oe:oe[ae])/k),Y[2*ae+1]=Math.round(255*(null==ie[ae]?ie:ie[ae])/k);V({data:Y,usage:"dynamic"})}if(B){var se,X=ee,J=X.count,ue=X.color,re=X.borderColor,ne=X.colorBuffer;if(E.tooManyColors){if(ue.length||re.length){se=new Uint8Array(8*J);for(var de=0;de<J;de++){var be=ue[de];se[8*de]=U[4*be],se[8*de+1]=U[4*be+1],se[8*de+2]=U[4*be+2],se[8*de+3]=U[4*be+3];var De=re[de];se[8*de+4]=U[4*De],se[8*de+5]=U[4*De+1],se[8*de+6]=U[4*De+2],se[8*de+7]=U[4*De+3]}}}else if(ue.length||re.length){se=new Uint8Array(4*J+2);for(var _e=0;_e<J;_e++)null!=ue[_e]&&(se[4*_e]=ue[_e]%O,se[4*_e+1]=Math.floor(ue[_e]/O)),null!=re[_e]&&(se[4*_e+2]=re[_e]%O,se[4*_e+3]=Math.floor(re[_e]/O))}ne({data:se||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return ee})}},c.prototype.addMarker=function(E){var z,P=this.markerTextures,R=this.regl,F=this.markerCache,_=null==E?0:F.indexOf(E);if(_>=0)return _;if(E instanceof Uint8Array||E instanceof Uint8ClampedArray)z=E;else{z=new Uint8Array(E.length);for(var D=0,k=E.length;D<k;D++)z[D]=255*E[D]}var O=Math.floor(Math.sqrt(z.length));return _=P.length,F.push(E),P.push(R.texture({channels:1,data:z,radius:O,mag:"linear",min:"linear"})),_},c.prototype.updateColor=function(E){var P=this.paletteIds,R=this.palette,F=this.maxColors;Array.isArray(E)||(E=[E]);var _=[];if("number"==typeof E[0]){var z=[];if(Array.isArray(E))for(var D=0;D<E.length;D+=4)z.push(E.slice(D,D+4));else for(var k=0;k<E.length;k+=4)z.push(E.subarray(k,k+4));E=z}for(var O=0;O<E.length;O++){var U=E[O];U=v(U,"uint8");var H=f(U,!1);if(null==P[H]){var j=R.length;P[H]=Math.floor(j/4),R[j]=U[0],R[j+1]=U[1],R[j+2]=U[2],R[j+3]=U[3]}_[O]=P[H]}return!this.tooManyColors&&R.length>4*F&&(this.tooManyColors=!0),this.updatePalette(R),1===_.length?_[0]:_},c.prototype.updatePalette=function(E){if(!this.tooManyColors){var P=this.maxColors,R=this.paletteTexture,F=Math.ceil(.25*E.length/P);if(F>1)for(var _=.25*(E=E.slice()).length%P;_<F*P;_++)E.push(0,0,0,0);R.height<F&&R.resize(P,F),R.subimage({width:Math.min(.25*E.length,P),height:F,data:E},0,0)}},c.prototype.destroy=function(){return this.groups.forEach(function(E){E.sizeBuffer.destroy(),E.positionBuffer.destroy(),E.positionFractBuffer.destroy(),E.colorBuffer.destroy(),E.activation.forEach(function(P){return P&&P.destroy&&P.destroy()}),E.selectionBuffer.destroy(),E.elements&&E.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(E){return E&&E.destroy&&E.destroy()}),this};var S=e(35943);$.exports=function(P,R){var F=new b(P,R),_=F.render.bind(F);return S(_,{render:_,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),_}},13167:($,K,e)=>{"use strict";const M=e(68762),I=e(9284),t=e(8236),T=e(46489),n=e(57019),i=e(60574),u=e(97604);function a(p,f){if(!(this instanceof a))return new a(p,f);this.traces=[],this.passes={},this.regl=p,this.scatter=M(p),this.canvas=this.scatter.canvas}function r(p,f,l){return(null!=p.id?p.id:p)<<16|(255&f)<<8|255&l}function o(p,f,l){let y,s,x,h,g,m,d,A,b=p[f],c=p[l];return b.length>2?(y=b[0],x=b[2],s=b[1],h=b[3]):b.length?(y=s=b[0],x=h=b[1]):(y=b.x,s=b.y,x=b.x+b.width,h=b.y+b.height),c.length>2?(g=c[0],d=c[2],m=c[1],A=c[3]):c.length?(g=m=c[0],d=A=c[1]):(g=c.x,m=c.y,d=c.x+c.width,A=c.y+c.height),[g,s,d,h]}function v(p){if("number"==typeof p)return[p,p,p,p];if(2===p.length)return[p[0],p[1],p[0],p[1]];{let f=i(p);return[f.x,f.y,f.x+f.width,f.y+f.height]}}$.exports=a,a.prototype.render=function(...p){return p.length&&this.update(...p),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=T(()=>{this.draw(),this.dirty=!0,this.planned=null})):(this.draw(),this.dirty=!0,T(()=>{this.dirty=!1})),this)},a.prototype.update=function(...p){if(!p.length)return;for(let y=0;y<p.length;y++)this.updateItem(y,p[y]);this.traces=this.traces.filter(Boolean);let f=[],l=0;for(let y=0;y<this.traces.length;y++){let s=this.traces[y],x=this.traces[y].passes;for(let h=0;h<x.length;h++)f.push(this.passes[x[h]]);s.passOffset=l,l+=s.passes.length}return this.scatter.update(...f),this},a.prototype.updateItem=function(p,f){let{regl:l}=this;if(null===f)return this.traces[p]=null,this;if(!f)return this;let x,y=I(f,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),s=this.traces[p]||(this.traces[p]={id:p,buffer:l.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:i([l._gl.drawingBufferWidth,l._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=y.color&&(s.color=y.color),null!=y.size&&(s.size=y.size),null!=y.marker&&(s.marker=y.marker),null!=y.borderColor&&(s.borderColor=y.borderColor),null!=y.borderSize&&(s.borderSize=y.borderSize),null!=y.opacity&&(s.opacity=y.opacity),y.viewport&&(s.viewport=i(y.viewport)),null!=y.diagonal&&(s.diagonal=y.diagonal),null!=y.upper&&(s.upper=y.upper),null!=y.lower&&(s.lower=y.lower),y.data){s.buffer(u(y.data)),s.columns=y.data.length,s.count=y.data[0].length,s.bounds=[];for(let E=0;E<s.columns;E++)s.bounds[E]=t(y.data[E],1)}y.range&&(s.range=y.range,x=s.range&&"number"!=typeof s.range[0]),y.domain&&(s.domain=y.domain);let h=!1;null!=y.padding&&(Array.isArray(y.padding)&&y.padding.length===s.columns&&"number"==typeof y.padding[y.padding.length-1]?(s.padding=y.padding.map(v),h=!0):s.padding=v(y.padding));let g=s.columns,m=s.count,d=s.viewport.width,A=s.viewport.height,b=s.viewport.x,c=s.viewport.y,S=d/g,w=A/g;s.passes=[];for(let E=0;E<g;E++)for(let P=0;P<g;P++){if(!s.diagonal&&P===E||!s.upper&&E>P||!s.lower&&E<P)continue;let R=r(s.id,E,P),F=this.passes[R]||(this.passes[R]={});if(y.data&&(y.transpose?F.positions={x:{buffer:s.buffer,offset:P,count:m,stride:g},y:{buffer:s.buffer,offset:E,count:m,stride:g}}:F.positions={x:{buffer:s.buffer,offset:P*m,count:m},y:{buffer:s.buffer,offset:E*m,count:m}},F.bounds=o(s.bounds,E,P)),y.domain||y.viewport||y.data){let _=h?o(s.padding,E,P):s.padding;if(s.domain){let[z,D,k,O]=o(s.domain,E,P);F.viewport=[b+z*d+_[0],c+D*A+_[1],b+k*d-_[2],c+O*A-_[3]]}else F.viewport=[b+P*S+S*_[0],c+E*w+w*_[1],b+(P+1)*S-S*_[2],c+(E+1)*w-w*_[3]]}y.color&&(F.color=s.color),y.size&&(F.size=s.size),y.marker&&(F.marker=s.marker),y.borderSize&&(F.borderSize=s.borderSize),y.borderColor&&(F.borderColor=s.borderColor),y.opacity&&(F.opacity=s.opacity),y.range&&(F.range=x?o(s.range,E,P):s.range||F.bounds),s.passes.push(R)}return this},a.prototype.draw=function(...p){if(p.length){let f=[];for(let l=0;l<p.length;l++)if("number"==typeof p[l]){let{passes:y,passOffset:s}=this.traces[p[l]];f.push(...n(s,s+y.length))}else if(p[l].length){let y=p[l],{passes:s,passOffset:x}=this.traces[l];s=s.map((h,g)=>{f[x+g]=y})}this.scatter.draw(...f)}else this.scatter.draw();return this},a.prototype.destroy=function(){return this.traces.forEach(p=>{p.buffer&&p.buffer.destroy&&p.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},20884:function($){$.exports=function(){"use strict";var K=function(Et,wr){for(var Nr=Object.keys(wr),vn=0;vn<Nr.length;++vn)Et[Nr[vn]]=wr[Nr[vn]];return Et},e=0,M=0,I=5,t=6;function T(Et,wr){this.id=e++,this.type=Et,this.data=wr}function n(Et){return Et.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function i(Et){if(0===Et.length)return[];var wr=Et.charAt(0),Nr=Et.charAt(Et.length-1);if(Et.length>1&&wr===Nr&&('"'===wr||"'"===wr))return['"'+n(Et.substr(1,Et.length-2))+'"'];var vn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Et);if(vn)return i(Et.substr(0,vn.index)).concat(i(vn[1])).concat(i(Et.substr(vn.index+vn[0].length)));var bn=Et.split(".");if(1===bn.length)return['"'+n(Et)+'"'];for(var xn=[],Tn=0;Tn<bn.length;++Tn)xn=xn.concat(i(bn[Tn]));return xn}function u(Et){return"["+i(Et).join("][")+"]"}function a(Et,wr){return new T(Et,u(wr+""))}function r(Et){return"function"==typeof Et&&!Et._reglType||Et instanceof T}function o(Et,wr){return"function"==typeof Et?new T(M,Et):"number"==typeof Et||"boolean"==typeof Et?new T(I,Et):Array.isArray(Et)?new T(t,Et.map(function(Nr,vn){return o(Nr,wr+"["+vn+"]")})):Et instanceof T?Et:void 0}var v={DynamicVariable:T,define:a,isDynamic:r,unbox:o,accessor:u},p={next:"function"==typeof requestAnimationFrame?function(Et){return requestAnimationFrame(Et)}:function(Et){return setTimeout(Et,16)},cancel:"function"==typeof cancelAnimationFrame?function(Et){return cancelAnimationFrame(Et)}:clearTimeout},f=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function l(){var Et={"":0},wr=[""];return{id:function(Nr){var vn=Et[Nr];return vn||(vn=Et[Nr]=wr.length,wr.push(Nr),vn)},str:function(Nr){return wr[Nr]}}}function y(Et,wr,Nr){var xn,vn=document.createElement("canvas");function bn(){var Gn=window.innerWidth,ba=window.innerHeight;if(Et!==document.body){var wa=vn.getBoundingClientRect();Gn=wa.right-wa.left,ba=wa.bottom-wa.top}vn.width=Nr*Gn,vn.height=Nr*ba}function Tn(){xn?xn.disconnect():window.removeEventListener("resize",bn),Et.removeChild(vn)}return K(vn.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Et.appendChild(vn),Et===document.body&&(vn.style.position="absolute",K(Et.style,{margin:0,padding:0})),Et!==document.body&&"function"==typeof ResizeObserver?(xn=new ResizeObserver(function(){setTimeout(bn)})).observe(Et):window.addEventListener("resize",bn,!1),bn(),{canvas:vn,onDestroy:Tn}}function s(Et,wr){function Nr(vn){try{return Et.getContext(vn,wr)}catch{return null}}return Nr("webgl")||Nr("experimental-webgl")||Nr("webgl-experimental")}function x(Et){return"string"==typeof Et.nodeName&&"function"==typeof Et.appendChild&&"function"==typeof Et.getBoundingClientRect}function h(Et){return"function"==typeof Et.drawArrays||"function"==typeof Et.drawElements}function g(Et){return"string"==typeof Et?Et.split():Et}function m(Et){return"string"==typeof Et?document.querySelector(Et):Et}function d(Et){var Nr,vn,bn,xn,wr=Et||{},Tn={},Gn=[],ba=[],wa=typeof window>"u"?1:window.devicePixelRatio,Qn=!1,Fa={},ea=function(dn){},ra=function(){};if("string"==typeof wr?Nr=document.querySelector(wr):"object"==typeof wr&&(x(wr)?Nr=wr:h(wr)?bn=(xn=wr).canvas:("gl"in wr?xn=wr.gl:"canvas"in wr?bn=m(wr.canvas):"container"in wr&&(vn=m(wr.container)),"attributes"in wr&&(Tn=wr.attributes),"extensions"in wr&&(Gn=g(wr.extensions)),"optionalExtensions"in wr&&(ba=g(wr.optionalExtensions)),"onDone"in wr&&(ea=wr.onDone),"profile"in wr&&(Qn=!!wr.profile),"pixelRatio"in wr&&(wa=+wr.pixelRatio),"cachedCode"in wr&&(Fa=wr.cachedCode))),Nr&&("canvas"===Nr.nodeName.toLowerCase()?bn=Nr:vn=Nr),!xn){if(!bn){var Bn=y(vn||document.body,ea,wa);if(!Bn)return null;bn=Bn.canvas,ra=Bn.onDestroy}void 0===Tn.premultipliedAlpha&&(Tn.premultipliedAlpha=!0),xn=s(bn,Tn)}return xn?{gl:xn,canvas:bn,container:vn,extensions:Gn,optionalExtensions:ba,pixelRatio:wa,profile:Qn,cachedCode:Fa,onDone:ea,onDestroy:ra}:(ra(),ea("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function A(Et,wr){var Nr={};function vn(Tn){var ba,Gn=Tn.toLowerCase();try{ba=Nr[Gn]=Et.getExtension(Gn)}catch{}return!!ba}for(var bn=0;bn<wr.extensions.length;++bn){var xn=wr.extensions[bn];if(!vn(xn))return wr.onDestroy(),wr.onDone('"'+xn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return wr.optionalExtensions.forEach(vn),{extensions:Nr,restore:function(){Object.keys(Nr).forEach(function(Tn){if(Nr[Tn]&&!vn(Tn))throw new Error("(regl): error restoring extension "+Tn)})}}}function b(Et,wr){for(var Nr=Array(Et),vn=0;vn<Et;++vn)Nr[vn]=wr(vn);return Nr}var c=5120,S=5121,w=5122,E=5123,P=5124,R=5125,F=5126;function _(Et){for(var wr=16;wr<=1<<28;wr*=16)if(Et<=wr)return wr;return 0}function z(Et){var wr,Nr;return wr=(Et>65535)<<4,wr|=Nr=((Et>>>=wr)>255)<<3,wr|=Nr=((Et>>>=Nr)>15)<<2,(wr|=Nr=((Et>>>=Nr)>3)<<1)|(Et>>>=Nr)>>1}function D(){var Et=b(8,function(){return[]});function wr(xn){var Tn=_(xn),Gn=Et[z(Tn)>>2];return Gn.length>0?Gn.pop():new ArrayBuffer(Tn)}function Nr(xn){Et[z(xn.byteLength)>>2].push(xn)}function vn(xn,Tn){var Gn=null;switch(xn){case c:Gn=new Int8Array(wr(Tn),0,Tn);break;case S:Gn=new Uint8Array(wr(Tn),0,Tn);break;case w:Gn=new Int16Array(wr(2*Tn),0,Tn);break;case E:Gn=new Uint16Array(wr(2*Tn),0,Tn);break;case P:Gn=new Int32Array(wr(4*Tn),0,Tn);break;case R:Gn=new Uint32Array(wr(4*Tn),0,Tn);break;case F:Gn=new Float32Array(wr(4*Tn),0,Tn);break;default:return null}return Gn.length!==Tn?Gn.subarray(0,Tn):Gn}function bn(xn){Nr(xn.buffer)}return{alloc:wr,free:Nr,allocType:vn,freeType:bn}}var k=D();k.zero=D();var O=3408,U=3410,H=3411,j=3412,ee=3413,W=3414,B=3415,te=33901,q=33902,oe=3379,ie=3386,V=34921,Y=36347,ae=36348,X=35661,J=35660,ue=34930,re=36349,ne=34076,se=34024,de=7936,be=7937,De=7938,_e=35724,Ce=34047,Le=36063,Fe=34852,ke=3553,ze=34067,Pe=34069,Ie=33984,Qe=6408,at=5126,Be=5121,Ne=36160,nt=36053,ct=36064,mt=16384,Bt=function(Et,wr){var Nr=1;wr.ext_texture_filter_anisotropic&&(Nr=Et.getParameter(Ce));var vn=1,bn=1;wr.webgl_draw_buffers&&(vn=Et.getParameter(Fe),bn=Et.getParameter(Le));var xn=!!wr.oes_texture_float;if(xn){var Tn=Et.createTexture();Et.bindTexture(ke,Tn),Et.texImage2D(ke,0,Qe,1,1,0,Qe,at,null);var Gn=Et.createFramebuffer();if(Et.bindFramebuffer(Ne,Gn),Et.framebufferTexture2D(Ne,ct,ke,Tn,0),Et.bindTexture(ke,null),Et.checkFramebufferStatus(Ne)!==nt)xn=!1;else{Et.viewport(0,0,1,1),Et.clearColor(1,0,0,1),Et.clear(mt);var ba=k.allocType(at,4);Et.readPixels(0,0,1,1,Qe,at,ba),Et.getError()?xn=!1:(Et.deleteFramebuffer(Gn),Et.deleteTexture(Tn),xn=1===ba[0]),k.freeType(ba)}}var Qn=!0;if(!(typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)))){var Fa=Et.createTexture(),ea=k.allocType(Be,36);Et.activeTexture(Ie),Et.bindTexture(ze,Fa),Et.texImage2D(Pe,0,Qe,3,3,0,Qe,Be,ea),k.freeType(ea),Et.bindTexture(ze,null),Et.deleteTexture(Fa),Qn=!Et.getError()}return{colorBits:[Et.getParameter(U),Et.getParameter(H),Et.getParameter(j),Et.getParameter(ee)],depthBits:Et.getParameter(W),stencilBits:Et.getParameter(B),subpixelBits:Et.getParameter(O),extensions:Object.keys(wr).filter(function(ra){return!!wr[ra]}),maxAnisotropic:Nr,maxDrawbuffers:vn,maxColorAttachments:bn,pointSizeDims:Et.getParameter(te),lineWidthDims:Et.getParameter(q),maxViewportDims:Et.getParameter(ie),maxCombinedTextureUnits:Et.getParameter(X),maxCubeMapSize:Et.getParameter(ne),maxRenderbufferSize:Et.getParameter(se),maxTextureUnits:Et.getParameter(ue),maxTextureSize:Et.getParameter(oe),maxAttributes:Et.getParameter(V),maxVertexUniforms:Et.getParameter(Y),maxVertexTextureUnits:Et.getParameter(J),maxVaryingVectors:Et.getParameter(ae),maxFragmentUniforms:Et.getParameter(re),glsl:Et.getParameter(_e),renderer:Et.getParameter(be),vendor:Et.getParameter(de),version:Et.getParameter(De),readFloat:xn,npotTextureCube:Qn}},Rt=function(Et){return Et instanceof Uint8Array||Et instanceof Uint16Array||Et instanceof Uint32Array||Et instanceof Int8Array||Et instanceof Int16Array||Et instanceof Int32Array||Et instanceof Float32Array||Et instanceof Float64Array||Et instanceof Uint8ClampedArray};function zt(Et){return!!Et&&"object"==typeof Et&&Array.isArray(Et.shape)&&Array.isArray(Et.stride)&&"number"==typeof Et.offset&&Et.shape.length===Et.stride.length&&(Array.isArray(Et.data)||Rt(Et.data))}var St=function(Et){return Object.keys(Et).map(function(wr){return Et[wr]})},Xt={shape:Oe,flatten:ge};function Mt(Et,wr,Nr){for(var vn=0;vn<wr;++vn)Nr[vn]=Et[vn]}function st(Et,wr,Nr,vn){for(var bn=0,xn=0;xn<wr;++xn)for(var Tn=Et[xn],Gn=0;Gn<Nr;++Gn)vn[bn++]=Tn[Gn]}function Se(Et,wr,Nr,vn,bn,xn){for(var Tn=xn,Gn=0;Gn<wr;++Gn)for(var ba=Et[Gn],wa=0;wa<Nr;++wa)for(var Qn=ba[wa],Fa=0;Fa<vn;++Fa)bn[Tn++]=Qn[Fa]}function pe(Et,wr,Nr,vn,bn){for(var xn=1,Tn=Nr+1;Tn<wr.length;++Tn)xn*=wr[Tn];var Gn=wr[Nr];if(wr.length-Nr==4){var ba=wr[Nr+1],wa=wr[Nr+2],Qn=wr[Nr+3];for(Tn=0;Tn<Gn;++Tn)Se(Et[Tn],ba,wa,Qn,vn,bn),bn+=xn}else for(Tn=0;Tn<Gn;++Tn)pe(Et[Tn],wr,Nr+1,vn,bn),bn+=xn}function ge(Et,wr,Nr,vn){var bn=1;if(wr.length)for(var xn=0;xn<wr.length;++xn)bn*=wr[xn];else bn=0;var Tn=vn||k.allocType(Nr,bn);switch(wr.length){case 0:break;case 1:Mt(Et,wr[0],Tn);break;case 2:st(Et,wr[0],wr[1],Tn);break;case 3:Se(Et,wr[0],wr[1],wr[2],Tn,0);break;default:pe(Et,wr,0,Tn,0)}return Tn}function Oe(Et){for(var wr=[],Nr=Et;Nr.length;Nr=Nr[0])wr.push(Nr.length);return wr}var we={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Kr={dynamic:35048,stream:35040,static:35044},It=Xt.flatten,$t=Xt.shape,kr=35044,lr=35040,rt=5121,$e=5126,ht=[];function gt(Et){return 0|we[Object.prototype.toString.call(Et)]}function ft(Et,wr){for(var Nr=0;Nr<wr.length;++Nr)Et[Nr]=wr[Nr]}function Ct(Et,wr,Nr,vn,bn,xn,Tn){for(var Gn=0,ba=0;ba<Nr;++ba)for(var wa=0;wa<vn;++wa)Et[Gn++]=wr[bn*ba+xn*wa+Tn]}function sr(Et,wr,Nr,vn){var bn=0,xn={};function Tn(dn){this.id=bn++,this.buffer=Et.createBuffer(),this.type=dn,this.usage=kr,this.byteLength=0,this.dimension=1,this.dtype=rt,this.persistentData=null,Nr.profile&&(this.stats={size:0})}Tn.prototype.bind=function(){Et.bindBuffer(this.type,this.buffer)},Tn.prototype.destroy=function(){ea(this)};var Gn=[];function ba(dn,kn){var $n=Gn.pop();return $n||($n=new Tn(dn)),$n.bind(),Fa($n,kn,lr,0,1,!1),$n}function wa(dn){Gn.push(dn)}function Qn(dn,kn,$n){dn.byteLength=kn.byteLength,Et.bufferData(dn.type,kn,$n)}function Fa(dn,kn,$n,na,jn,ka){var ga,ni;if(dn.usage=$n,Array.isArray(kn)){if(dn.dtype=na||$e,kn.length>0)if(Array.isArray(kn[0])){ga=$t(kn);for(var Kn=1,Hn=1;Hn<ga.length;++Hn)Kn*=ga[Hn];dn.dimension=Kn,Qn(dn,ni=It(kn,ga,dn.dtype),$n),ka?dn.persistentData=ni:k.freeType(ni)}else if("number"==typeof kn[0]){dn.dimension=jn;var Va=k.allocType(dn.dtype,kn.length);ft(Va,kn),Qn(dn,Va,$n),ka?dn.persistentData=Va:k.freeType(Va)}else Rt(kn[0])&&(dn.dimension=kn[0].length,dn.dtype=na||gt(kn[0])||$e,Qn(dn,ni=It(kn,[kn.length,kn[0].length],dn.dtype),$n),ka?dn.persistentData=ni:k.freeType(ni))}else if(Rt(kn))dn.dtype=na||gt(kn),dn.dimension=jn,Qn(dn,kn,$n),ka&&(dn.persistentData=new Uint8Array(new Uint8Array(kn.buffer)));else if(zt(kn)){ga=kn.shape;var Pa=kn.stride,ca=kn.offset,oa=0,Oa=0,li=0,xi=0;1===ga.length?(oa=ga[0],Oa=1,li=Pa[0],xi=0):2===ga.length&&(oa=ga[0],Oa=ga[1],li=Pa[0],xi=Pa[1]),dn.dtype=na||gt(kn.data)||$e,dn.dimension=Oa;var Da=k.allocType(dn.dtype,oa*Oa);Ct(Da,kn.data,oa,Oa,li,xi,ca),Qn(dn,Da,$n),ka?dn.persistentData=Da:k.freeType(Da)}else kn instanceof ArrayBuffer&&(dn.dtype=rt,dn.dimension=jn,Qn(dn,kn,$n),ka&&(dn.persistentData=new Uint8Array(new Uint8Array(kn))))}function ea(dn){wr.bufferCount--,vn(dn);var kn=dn.buffer;Et.deleteBuffer(kn),dn.buffer=null,delete xn[dn.id]}function ra(dn,kn,$n,na){wr.bufferCount++;var jn=new Tn(kn);function ka(Kn){var Hn=kr,Va=null,Pa=0,ca=0,oa=1;return Array.isArray(Kn)||Rt(Kn)||zt(Kn)||Kn instanceof ArrayBuffer?Va=Kn:"number"==typeof Kn?Pa=0|Kn:Kn&&("data"in Kn&&(Va=Kn.data),"usage"in Kn&&(Hn=Kr[Kn.usage]),"type"in Kn&&(ca=Pt[Kn.type]),"dimension"in Kn&&(oa=0|Kn.dimension),"length"in Kn&&(Pa=0|Kn.length)),jn.bind(),Va?Fa(jn,Va,Hn,ca,oa,na):(Pa&&Et.bufferData(jn.type,Pa,Hn),jn.dtype=ca||rt,jn.usage=Hn,jn.dimension=oa,jn.byteLength=Pa),Nr.profile&&(jn.stats.size=jn.byteLength*ht[jn.dtype]),ka}function ga(Kn,Hn){Et.bufferSubData(jn.type,Hn,Kn)}function ni(Kn,Hn){var Pa,Va=0|(Hn||0);if(jn.bind(),Rt(Kn)||Kn instanceof ArrayBuffer)ga(Kn,Va);else if(Array.isArray(Kn)){if(Kn.length>0)if("number"==typeof Kn[0]){var ca=k.allocType(jn.dtype,Kn.length);ft(ca,Kn),ga(ca,Va),k.freeType(ca)}else if(Array.isArray(Kn[0])||Rt(Kn[0])){Pa=$t(Kn);var oa=It(Kn,Pa,jn.dtype);ga(oa,Va),k.freeType(oa)}}else if(zt(Kn)){Pa=Kn.shape;var Oa=Kn.stride,li=0,xi=0,Da=0,$a=0;1===Pa.length?(li=Pa[0],xi=1,Da=Oa[0],$a=0):2===Pa.length&&(li=Pa[0],xi=Pa[1],Da=Oa[0],$a=Oa[1]);var gi=Array.isArray(Kn.data)?jn.dtype:gt(Kn.data),wi=k.allocType(gi,li*xi);Ct(wi,Kn.data,li,xi,Da,$a,Kn.offset),ga(wi,Va),k.freeType(wi)}return ka}return xn[jn.id]=jn,$n||ka(dn),ka._reglType="buffer",ka._buffer=jn,ka.subdata=ni,Nr.profile&&(ka.stats=jn.stats),ka.destroy=function(){ea(jn)},ka}function Bn(){St(xn).forEach(function(dn){dn.buffer=Et.createBuffer(),Et.bindBuffer(dn.type,dn.buffer),Et.bufferData(dn.type,dn.persistentData||dn.byteLength,dn.usage)})}return Nr.profile&&(wr.getTotalBufferSize=function(){var dn=0;return Object.keys(xn).forEach(function(kn){dn+=xn[kn].stats.size}),dn}),{create:ra,createStream:ba,destroyStream:wa,clear:function(){St(xn).forEach(ea),Gn.forEach(ea)},getBuffer:function(dn){return dn&&dn._buffer instanceof Tn?dn._buffer:null},restore:Bn,_initBuffer:Fa}}ht[5120]=1,ht[5122]=2,ht[5124]=4,ht[5121]=1,ht[5123]=2,ht[5125]=4,ht[5126]=4;var We={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Jt=0,Gt=1,hr=4,br=5120,Ut=5121,Kt=5122,wt=5123,xr=5124,Ir=5125,Ur=34963,qt=35040,on=35044;function an(Et,wr,Nr,vn){var bn={},xn=0,Tn={uint8:Ut,uint16:wt};function Gn(Bn){this.id=xn++,bn[this.id]=this,this.buffer=Bn,this.primType=hr,this.vertCount=0,this.type=0}wr.oes_element_index_uint&&(Tn.uint32=Ir),Gn.prototype.bind=function(){this.buffer.bind()};var ba=[];function wa(Bn){var dn=ba.pop();return dn||(dn=new Gn(Nr.create(null,Ur,!0,!1)._buffer)),Fa(dn,Bn,qt,-1,-1,0,0),dn}function Qn(Bn){ba.push(Bn)}function Fa(Bn,dn,kn,$n,na,jn,ka){var ga;if(Bn.buffer.bind(),dn){var ni=ka;!ka&&(!Rt(dn)||zt(dn)&&!Rt(dn.data))&&(ni=wr.oes_element_index_uint?Ir:wt),Nr._initBuffer(Bn.buffer,dn,kn,ni,3)}else Et.bufferData(Ur,jn,kn),Bn.buffer.dtype=ga||Ut,Bn.buffer.usage=kn,Bn.buffer.dimension=3,Bn.buffer.byteLength=jn;if(ga=ka,!ka){switch(Bn.buffer.dtype){case Ut:case br:ga=Ut;break;case wt:case Kt:ga=wt;break;case Ir:case xr:ga=Ir}Bn.buffer.dtype=ga}Bn.type=ga;var Kn=na;Kn<0&&(Kn=Bn.buffer.byteLength,ga===wt?Kn>>=1:ga===Ir&&(Kn>>=2)),Bn.vertCount=Kn;var Hn=$n;if($n<0){Hn=hr;var Va=Bn.buffer.dimension;1===Va&&(Hn=Jt),2===Va&&(Hn=Gt),3===Va&&(Hn=hr)}Bn.primType=Hn}function ea(Bn){vn.elementsCount--,delete bn[Bn.id],Bn.buffer.destroy(),Bn.buffer=null}function ra(Bn,dn){var kn=Nr.create(null,Ur,!0),$n=new Gn(kn._buffer);function na(jn){if(jn)if("number"==typeof jn)kn(jn),$n.primType=hr,$n.vertCount=0|jn,$n.type=Ut;else{var ka=null,ga=on,ni=-1,Kn=-1,Hn=0,Va=0;Array.isArray(jn)||Rt(jn)||zt(jn)?ka=jn:("data"in jn&&(ka=jn.data),"usage"in jn&&(ga=Kr[jn.usage]),"primitive"in jn&&(ni=We[jn.primitive]),"count"in jn&&(Kn=0|jn.count),"type"in jn&&(Va=Tn[jn.type]),"length"in jn?Hn=0|jn.length:(Hn=Kn,Va===wt||Va===Kt?Hn*=2:(Va===Ir||Va===xr)&&(Hn*=4))),Fa($n,ka,ga,ni,Kn,Hn,Va)}else kn(),$n.primType=hr,$n.vertCount=0,$n.type=Ut;return na}return vn.elementsCount++,na(Bn),na._reglType="elements",na._elements=$n,na.subdata=function(jn,ka){return kn.subdata(jn,ka),na},na.destroy=function(){ea($n)},na}return{create:ra,createStream:wa,destroyStream:Qn,getElements:function(Bn){return"function"==typeof Bn&&Bn._elements instanceof Gn?Bn._elements:null},clear:function(){St(bn).forEach(ea)}}}var hn=new Float32Array(1),An=new Uint32Array(hn.buffer),Sn=5123;function sa(Et){for(var wr=k.allocType(Sn,Et.length),Nr=0;Nr<Et.length;++Nr)if(isNaN(Et[Nr]))wr[Nr]=65535;else if(Et[Nr]===1/0)wr[Nr]=31744;else if(Et[Nr]===-1/0)wr[Nr]=64512;else{hn[0]=Et[Nr];var vn=An[0],bn=vn>>>31<<15,xn=(vn<<1>>>24)-127,Tn=vn>>13&1023;if(xn<-24)wr[Nr]=bn;else if(xn<-14){var Gn=-14-xn;wr[Nr]=bn+(Tn+1024>>Gn)}else wr[Nr]=xn>15?bn+31744:bn+(xn+15<<10)+Tn}return wr}function Rn(Et){return Array.isArray(Et)||Rt(Et)}var Yr=34467,vr=3553,nn=34067,Or=34069,Xn=6408,Vr=6406,wn=6407,Ca=6409,Ba=6410,Ka=32854,Ja=32855,si=36194,Ra=32819,Na=32820,Ni=33635,ha=34042,yi=6402,gn=34041,Eo=35904,Qi=35906,Ii=36193,Xo=33776,ao=33777,io=33778,Lo=33779,qo=35986,wo=35987,In=34798,Ta=35840,ls=35841,Do=35842,oo=35843,ys=36196,as=5121,el=5123,To=5125,va=5126,Ai=10242,bi=10243,so=10497,eo=33071,fi=33648,Ql=10240,Os=10241,ms=9728,tl=9729,Ro=9984,yo=9985,Ls=9986,xs=9987,Ll=33170,Hs=4352,rl=4353,Pl=4354,ji=34046,Il=3317,pu=37440,Ho=37441,Zo=37443,Vs=37444,Ps=33984,Vo=[Ro,Ls,yo,xs],nl=[0,Ca,Ba,wn,Xn],Bo={};function ko(Et){return"[object "+Et+"]"}Bo[Ca]=Bo[Vr]=Bo[yi]=1,Bo[gn]=Bo[Ba]=2,Bo[wn]=Bo[Eo]=3,Bo[Xn]=Bo[Qi]=4;var gu=ko("HTMLCanvasElement"),Ao=ko("OffscreenCanvas"),us=ko("CanvasRenderingContext2D"),fs=ko("ImageBitmap"),Dl=ko("HTMLImageElement"),Go=ko("HTMLVideoElement"),yu=Object.keys(we).concat([gu,Ao,us,fs,Dl,Go]),es=[];es[as]=1,es[va]=4,es[Ii]=2,es[el]=2,es[To]=4;var Wi=[];function mu(Et){return Array.isArray(Et)&&(0===Et.length||"number"==typeof Et[0])}function Is(Et){return!!Array.isArray(Et)&&!(0===Et.length||!Rn(Et[0]))}function ts(Et){return Object.prototype.toString.call(Et)}function Rl(Et){return ts(Et)===gu}function $l(Et){return ts(Et)===Ao}function hf(Et){return ts(Et)===us}function rs(Et){return ts(Et)===fs}function is(Et){return ts(Et)===Dl}function bs(Et){return ts(Et)===Go}function Ns(Et){if(!Et)return!1;var wr=ts(Et);return yu.indexOf(wr)>=0||mu(Et)||Is(Et)||zt(Et)}function Ds(Et){return 0|we[Object.prototype.toString.call(Et)]}function Bs(Et,wr){var Nr=wr.length;switch(Et.type){case as:case el:case To:case va:var vn=k.allocType(Et.type,Nr);vn.set(wr),Et.data=vn;break;case Ii:Et.data=sa(wr)}}function Gs(Et,wr){return k.allocType(Et.type===Ii?va:Et.type,wr)}function Gl(Et,wr){Et.type===Ii?(Et.data=sa(wr),k.freeType(wr)):Et.data=wr}function zf(Et,wr,Nr,vn,bn,xn){for(var Tn=Et.width,Gn=Et.height,ba=Et.channels,Qn=Gs(Et,Tn*Gn*ba),Fa=0,ea=0;ea<Gn;++ea)for(var ra=0;ra<Tn;++ra)for(var Bn=0;Bn<ba;++Bn)Qn[Fa++]=wr[Nr*ra+vn*ea+bn*Bn+xn];Gl(Et,Qn)}function $u(Et,wr,Nr,vn,bn,xn){var Tn;if(Tn=typeof Wi[Et]<"u"?Wi[Et]:Bo[Et]*es[wr],xn&&(Tn*=6),bn){for(var Gn=0,ba=Nr;ba>=1;)Gn+=Tn*ba*ba,ba/=2;return Gn}return Tn*Nr*vn}function Of(Et,wr,Nr,vn,bn,xn,Tn){var Gn={"don't care":Hs,"dont care":Hs,nice:Pl,fast:rl},ba={repeat:so,clamp:eo,mirror:fi},wa={nearest:ms,linear:tl},Qn=K({mipmap:xs,"nearest mipmap nearest":Ro,"linear mipmap nearest":yo,"nearest mipmap linear":Ls,"linear mipmap linear":xs},wa),Fa={none:0,browser:Vs},ea={uint8:as,rgba4:Ra,rgb565:Ni,"rgb5 a1":Na},ra={alpha:Vr,luminance:Ca,"luminance alpha":Ba,rgb:wn,rgba:Xn,rgba4:Ka,"rgb5 a1":Ja,rgb565:si},Bn={};wr.ext_srgb&&(ra.srgb=Eo,ra.srgba=Qi),wr.oes_texture_float&&(ea.float32=ea.float=va),wr.oes_texture_half_float&&(ea.float16=ea["half float"]=Ii),wr.webgl_depth_texture&&(K(ra,{depth:yi,"depth stencil":gn}),K(ea,{uint16:el,uint32:To,"depth stencil":ha})),wr.webgl_compressed_texture_s3tc&&K(Bn,{"rgb s3tc dxt1":Xo,"rgba s3tc dxt1":ao,"rgba s3tc dxt3":io,"rgba s3tc dxt5":Lo}),wr.webgl_compressed_texture_atc&&K(Bn,{"rgb atc":qo,"rgba atc explicit alpha":wo,"rgba atc interpolated alpha":In}),wr.webgl_compressed_texture_pvrtc&&K(Bn,{"rgb pvrtc 4bppv1":Ta,"rgb pvrtc 2bppv1":ls,"rgba pvrtc 4bppv1":Do,"rgba pvrtc 2bppv1":oo}),wr.webgl_compressed_texture_etc1&&(Bn["rgb etc1"]=ys);var dn=Array.prototype.slice.call(Et.getParameter(Yr));Object.keys(Bn).forEach(function(Ae){var Ge=Bn[Ae];dn.indexOf(Ge)>=0&&(ra[Ae]=Ge)});var kn=Object.keys(ra);Nr.textureFormats=kn;var $n=[];Object.keys(ra).forEach(function(Ae){var Ge=ra[Ae];$n[Ge]=Ae});var na=[];Object.keys(ea).forEach(function(Ae){var Ge=ea[Ae];na[Ge]=Ae});var jn=[];Object.keys(wa).forEach(function(Ae){var Ge=wa[Ae];jn[Ge]=Ae});var ka=[];Object.keys(Qn).forEach(function(Ae){var Ge=Qn[Ae];ka[Ge]=Ae});var ga=[];Object.keys(ba).forEach(function(Ae){var Ge=ba[Ae];ga[Ge]=Ae});var ni=kn.reduce(function(Ae,Ge){var ot=ra[Ge];return ot===Ca||ot===Vr||ot===Ca||ot===Ba||ot===yi||ot===gn||wr.ext_srgb&&(ot===Eo||ot===Qi)?Ae[ot]=ot:ot===Ja||Ge.indexOf("rgba")>=0?Ae[ot]=Xn:Ae[ot]=wn,Ae},{});function Kn(){this.internalformat=Xn,this.format=Xn,this.type=as,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Vs,this.width=0,this.height=0,this.channels=0}function Hn(Ae,Ge){Ae.internalformat=Ge.internalformat,Ae.format=Ge.format,Ae.type=Ge.type,Ae.compressed=Ge.compressed,Ae.premultiplyAlpha=Ge.premultiplyAlpha,Ae.flipY=Ge.flipY,Ae.unpackAlignment=Ge.unpackAlignment,Ae.colorSpace=Ge.colorSpace,Ae.width=Ge.width,Ae.height=Ge.height,Ae.channels=Ge.channels}function Va(Ae,Ge){if("object"==typeof Ge&&Ge){if("premultiplyAlpha"in Ge&&(Ae.premultiplyAlpha=Ge.premultiplyAlpha),"flipY"in Ge&&(Ae.flipY=Ge.flipY),"alignment"in Ge&&(Ae.unpackAlignment=Ge.alignment),"colorSpace"in Ge&&(Ae.colorSpace=Fa[Ge.colorSpace]),"type"in Ge){var ot=Ge.type;Ae.type=ea[ot]}var xt=Ae.width,Wt=Ae.height,ar=Ae.channels,Yt=!1;"shape"in Ge?(xt=Ge.shape[0],Wt=Ge.shape[1],3===Ge.shape.length&&(ar=Ge.shape[2],Yt=!0)):("radius"in Ge&&(xt=Wt=Ge.radius),"width"in Ge&&(xt=Ge.width),"height"in Ge&&(Wt=Ge.height),"channels"in Ge&&(ar=Ge.channels,Yt=!0)),Ae.width=0|xt,Ae.height=0|Wt,Ae.channels=0|ar;var Tt=!1;if("format"in Ge){var _t=Ge.format,Nt=Ae.internalformat=ra[_t];Ae.format=ni[Nt],_t in ea&&("type"in Ge||(Ae.type=ea[_t])),_t in Bn&&(Ae.compressed=!0),Tt=!0}!Yt&&Tt?Ae.channels=Bo[Ae.format]:Yt&&!Tt&&Ae.channels!==nl[Ae.format]&&(Ae.format=Ae.internalformat=nl[Ae.channels])}}function Pa(Ae){Et.pixelStorei(pu,Ae.flipY),Et.pixelStorei(Ho,Ae.premultiplyAlpha),Et.pixelStorei(Zo,Ae.colorSpace),Et.pixelStorei(Il,Ae.unpackAlignment)}function ca(){Kn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function oa(Ae,Ge){var ot=null;if(Ns(Ge)?ot=Ge:Ge&&(Va(Ae,Ge),"x"in Ge&&(Ae.xOffset=0|Ge.x),"y"in Ge&&(Ae.yOffset=0|Ge.y),Ns(Ge.data)&&(ot=Ge.data)),Ge.copy){var xt=bn.viewportWidth,Wt=bn.viewportHeight;Ae.width=Ae.width||xt-Ae.xOffset,Ae.height=Ae.height||Wt-Ae.yOffset,Ae.needsCopy=!0}else if(ot){if(Rt(ot))Ae.channels=Ae.channels||4,Ae.data=ot,!("type"in Ge)&&Ae.type===as&&(Ae.type=Ds(ot));else if(mu(ot))Ae.channels=Ae.channels||4,Bs(Ae,ot),Ae.alignment=1,Ae.needsFree=!0;else if(zt(ot)){var ar=ot.data;!Array.isArray(ar)&&Ae.type===as&&(Ae.type=Ds(ar));var _t,Nt,rr,dr,pr,Lr,Yt=ot.shape,Tt=ot.stride;3===Yt.length?(rr=Yt[2],Lr=Tt[2]):(rr=1,Lr=1),_t=Yt[0],Nt=Yt[1],dr=Tt[0],pr=Tt[1],Ae.alignment=1,Ae.width=_t,Ae.height=Nt,Ae.channels=rr,Ae.format=Ae.internalformat=nl[rr],Ae.needsFree=!0,zf(Ae,ar,dr,pr,Lr,ot.offset)}else if(Rl(ot)||$l(ot)||hf(ot))Rl(ot)||$l(ot)?Ae.element=ot:Ae.element=ot.canvas,Ae.width=Ae.element.width,Ae.height=Ae.element.height,Ae.channels=4;else if(rs(ot))Ae.element=ot,Ae.width=ot.width,Ae.height=ot.height,Ae.channels=4;else if(is(ot))Ae.element=ot,Ae.width=ot.naturalWidth,Ae.height=ot.naturalHeight,Ae.channels=4;else if(bs(ot))Ae.element=ot,Ae.width=ot.videoWidth,Ae.height=ot.videoHeight,Ae.channels=4;else if(Is(ot)){var Tr=Ae.width||ot[0].length,mr=Ae.height||ot.length,Er=Ae.channels;Er=Rn(ot[0][0])?Er||ot[0][0].length:Er||1;for(var fr=Xt.shape(ot),Br=1,$r=0;$r<fr.length;++$r)Br*=fr[$r];var ln=Gs(Ae,Br);Xt.flatten(ot,fr,"",ln),Gl(Ae,ln),Ae.alignment=1,Ae.width=Tr,Ae.height=mr,Ae.channels=Er,Ae.format=Ae.internalformat=nl[Er],Ae.needsFree=!0}}else Ae.width=Ae.width||1,Ae.height=Ae.height||1,Ae.channels=Ae.channels||4;Ae.type===va||Ae.type}function Oa(Ae,Ge,ot){var xt=Ae.element,Wt=Ae.data,ar=Ae.internalformat,Yt=Ae.format,Tt=Ae.type,_t=Ae.width,Nt=Ae.height;Pa(Ae),xt?Et.texImage2D(Ge,ot,Yt,Yt,Tt,xt):Ae.compressed?Et.compressedTexImage2D(Ge,ot,ar,_t,Nt,0,Wt):Ae.needsCopy?(vn(),Et.copyTexImage2D(Ge,ot,Yt,Ae.xOffset,Ae.yOffset,_t,Nt,0)):Et.texImage2D(Ge,ot,Yt,_t,Nt,0,Yt,Tt,Wt||null)}function li(Ae,Ge,ot,xt,Wt){var ar=Ae.element,Yt=Ae.data,Tt=Ae.internalformat,_t=Ae.format,Nt=Ae.type,rr=Ae.width,dr=Ae.height;Pa(Ae),ar?Et.texSubImage2D(Ge,Wt,ot,xt,_t,Nt,ar):Ae.compressed?Et.compressedTexSubImage2D(Ge,Wt,ot,xt,Tt,rr,dr,Yt):Ae.needsCopy?(vn(),Et.copyTexSubImage2D(Ge,Wt,ot,xt,Ae.xOffset,Ae.yOffset,rr,dr)):Et.texSubImage2D(Ge,Wt,ot,xt,rr,dr,_t,Nt,Yt)}var xi=[];function Da(){return xi.pop()||new ca}function $a(Ae){Ae.needsFree&&k.freeType(Ae.data),ca.call(Ae),xi.push(Ae)}function gi(){Kn.call(this),this.genMipmaps=!1,this.mipmapHint=Hs,this.mipmask=0,this.images=Array(16)}function wi(Ae,Ge,ot){var xt=Ae.images[0]=Da();Ae.mipmask=1,xt.width=Ae.width=Ge,xt.height=Ae.height=ot,xt.channels=Ae.channels=4}function ki(Ae,Ge){var ot=null;if(Ns(Ge))Hn(ot=Ae.images[0]=Da(),Ae),oa(ot,Ge),Ae.mipmask=1;else if(Va(Ae,Ge),Array.isArray(Ge.mipmap))for(var xt=Ge.mipmap,Wt=0;Wt<xt.length;++Wt)Hn(ot=Ae.images[Wt]=Da(),Ae),ot.width>>=Wt,ot.height>>=Wt,oa(ot,xt[Wt]),Ae.mipmask|=1<<Wt;else Hn(ot=Ae.images[0]=Da(),Ae),oa(ot,Ge),Ae.mipmask=1;Hn(Ae,Ae.images[0]),Ae.compressed&&(Ae.internalformat===Xo||Ae.internalformat===ao||Ae.internalformat===io||Ae.internalformat)}function Po(Ae,Ge){for(var ot=Ae.images,xt=0;xt<ot.length;++xt){if(!ot[xt])return;Oa(ot[xt],Ge,xt)}}var As=[];function Gi(){var Ae=As.pop()||new gi;Kn.call(Ae),Ae.mipmask=0;for(var Ge=0;Ge<16;++Ge)Ae.images[Ge]=null;return Ae}function hs(Ae){for(var Ge=Ae.images,ot=0;ot<Ge.length;++ot)Ge[ot]&&$a(Ge[ot]),Ge[ot]=null;As.push(Ae)}function mo(){this.minFilter=ms,this.magFilter=ms,this.wrapS=eo,this.wrapT=eo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Hs}function gs(Ae,Ge){if("min"in Ge){var ot=Ge.min;Ae.minFilter=Qn[ot],Vo.indexOf(Ae.minFilter)>=0&&!("faces"in Ge)&&(Ae.genMipmaps=!0)}if("mag"in Ge){var xt=Ge.mag;Ae.magFilter=wa[xt]}var Wt=Ae.wrapS,ar=Ae.wrapT;if("wrap"in Ge){var Yt=Ge.wrap;"string"==typeof Yt?Wt=ar=ba[Yt]:Array.isArray(Yt)&&(Wt=ba[Yt[0]],ar=ba[Yt[1]])}else{if("wrapS"in Ge){var Tt=Ge.wrapS;Wt=ba[Tt]}if("wrapT"in Ge){var _t=Ge.wrapT;ar=ba[_t]}}if(Ae.wrapS=Wt,Ae.wrapT=ar,"anisotropic"in Ge&&(Ge.anisotropic,Ae.anisotropic=Ge.anisotropic),"mipmap"in Ge){var rr=!1;switch(typeof Ge.mipmap){case"string":Ae.mipmapHint=Gn[Ge.mipmap],Ae.genMipmaps=!0,rr=!0;break;case"boolean":rr=Ae.genMipmaps=Ge.mipmap;break;case"object":Ae.genMipmaps=!1,rr=!0}rr&&!("min"in Ge)&&(Ae.minFilter=Ro)}}function hl(Ae,Ge){Et.texParameteri(Ge,Os,Ae.minFilter),Et.texParameteri(Ge,Ql,Ae.magFilter),Et.texParameteri(Ge,Ai,Ae.wrapS),Et.texParameteri(Ge,bi,Ae.wrapT),wr.ext_texture_filter_anisotropic&&Et.texParameteri(Ge,ji,Ae.anisotropic),Ae.genMipmaps&&(Et.hint(Ll,Ae.mipmapHint),Et.generateMipmap(Ge))}var Al=0,Io={},vs=Nr.maxTextureUnits,Ss=Array(vs).map(function(){return null});function _i(Ae){Kn.call(this),this.mipmask=0,this.internalformat=Xn,this.id=Al++,this.refCount=1,this.target=Ae,this.texture=Et.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new mo,Tn.profile&&(this.stats={size:0})}function xo(Ae){Et.activeTexture(Ps),Et.bindTexture(Ae.target,Ae.texture)}function Mi(){var Ae=Ss[0];Ae?Et.bindTexture(Ae.target,Ae.texture):Et.bindTexture(vr,null)}function fe(Ae){var Ge=Ae.texture,ot=Ae.unit,xt=Ae.target;ot>=0&&(Et.activeTexture(Ps+ot),Et.bindTexture(xt,null),Ss[ot]=null),Et.deleteTexture(Ge),Ae.texture=null,Ae.params=null,Ae.pixels=null,Ae.refCount=0,delete Io[Ae.id],xn.textureCount--}function G(Ae,Ge){var ot=new _i(vr);function xt(Yt,Tt){var _t=ot.texInfo;mo.call(_t);var Nt=Gi();return"number"==typeof Yt?wi(Nt,0|Yt,"number"==typeof Tt?0|Tt:0|Yt):Yt?(gs(_t,Yt),ki(Nt,Yt)):wi(Nt,1,1),_t.genMipmaps&&(Nt.mipmask=(Nt.width<<1)-1),ot.mipmask=Nt.mipmask,Hn(ot,Nt),ot.internalformat=Nt.internalformat,xt.width=Nt.width,xt.height=Nt.height,xo(ot),Po(Nt,vr),hl(_t,vr),Mi(),hs(Nt),Tn.profile&&(ot.stats.size=$u(ot.internalformat,ot.type,Nt.width,Nt.height,_t.genMipmaps,!1)),xt.format=$n[ot.internalformat],xt.type=na[ot.type],xt.mag=jn[_t.magFilter],xt.min=ka[_t.minFilter],xt.wrapS=ga[_t.wrapS],xt.wrapT=ga[_t.wrapT],xt}function Wt(Yt,Tt,_t,Nt){var rr=0|Tt,dr=0|_t,pr=0|Nt,Lr=Da();return Hn(Lr,ot),Lr.width=0,Lr.height=0,oa(Lr,Yt),Lr.width=Lr.width||(ot.width>>pr)-rr,Lr.height=Lr.height||(ot.height>>pr)-dr,xo(ot),li(Lr,vr,rr,dr,pr),Mi(),$a(Lr),xt}function ar(Yt,Tt){var _t=0|Yt,Nt=0|Tt||_t;if(_t===ot.width&&Nt===ot.height)return xt;xt.width=ot.width=_t,xt.height=ot.height=Nt,xo(ot);for(var rr=0;ot.mipmask>>rr;++rr){var dr=_t>>rr,pr=Nt>>rr;if(!dr||!pr)break;Et.texImage2D(vr,rr,ot.format,dr,pr,0,ot.format,ot.type,null)}return Mi(),Tn.profile&&(ot.stats.size=$u(ot.internalformat,ot.type,_t,Nt,!1,!1)),xt}return Io[ot.id]=ot,xn.textureCount++,xt(Ae,Ge),xt.subimage=Wt,xt.resize=ar,xt._reglType="texture2d",xt._texture=ot,Tn.profile&&(xt.stats=ot.stats),xt.destroy=function(){ot.decRef()},xt}function ce(Ae,Ge,ot,xt,Wt,ar){var Yt=new _i(nn);Io[Yt.id]=Yt,xn.cubeCount++;var Tt=new Array(6);function _t(dr,pr,Lr,Tr,mr,Er){var fr,Br=Yt.texInfo;for(mo.call(Br),fr=0;fr<6;++fr)Tt[fr]=Gi();if("number"!=typeof dr&&dr){if("object"==typeof dr)if(pr)ki(Tt[0],dr),ki(Tt[1],pr),ki(Tt[2],Lr),ki(Tt[3],Tr),ki(Tt[4],mr),ki(Tt[5],Er);else if(gs(Br,dr),Va(Yt,dr),"faces"in dr){var ln=dr.faces;for(fr=0;fr<6;++fr)Hn(Tt[fr],Yt),ki(Tt[fr],ln[fr])}else for(fr=0;fr<6;++fr)ki(Tt[fr],dr)}else{var $r=0|dr||1;for(fr=0;fr<6;++fr)wi(Tt[fr],$r,$r)}for(Hn(Yt,Tt[0]),Br.genMipmaps?Yt.mipmask=(Tt[0].width<<1)-1:Yt.mipmask=Tt[0].mipmask,Yt.internalformat=Tt[0].internalformat,_t.width=Tt[0].width,_t.height=Tt[0].height,xo(Yt),fr=0;fr<6;++fr)Po(Tt[fr],Or+fr);for(hl(Br,nn),Mi(),Tn.profile&&(Yt.stats.size=$u(Yt.internalformat,Yt.type,_t.width,_t.height,Br.genMipmaps,!0)),_t.format=$n[Yt.internalformat],_t.type=na[Yt.type],_t.mag=jn[Br.magFilter],_t.min=ka[Br.minFilter],_t.wrapS=ga[Br.wrapS],_t.wrapT=ga[Br.wrapT],fr=0;fr<6;++fr)hs(Tt[fr]);return _t}function Nt(dr,pr,Lr,Tr,mr){var Er=0|Lr,fr=0|Tr,Br=0|mr,$r=Da();return Hn($r,Yt),$r.width=0,$r.height=0,oa($r,pr),$r.width=$r.width||(Yt.width>>Br)-Er,$r.height=$r.height||(Yt.height>>Br)-fr,xo(Yt),li($r,Or+dr,Er,fr,Br),Mi(),$a($r),_t}function rr(dr){var pr=0|dr;if(pr!==Yt.width){_t.width=Yt.width=pr,_t.height=Yt.height=pr,xo(Yt);for(var Lr=0;Lr<6;++Lr)for(var Tr=0;Yt.mipmask>>Tr;++Tr)Et.texImage2D(Or+Lr,Tr,Yt.format,pr>>Tr,pr>>Tr,0,Yt.format,Yt.type,null);return Mi(),Tn.profile&&(Yt.stats.size=$u(Yt.internalformat,Yt.type,_t.width,_t.height,!1,!0)),_t}}return _t(Ae,Ge,ot,xt,Wt,ar),_t.subimage=Nt,_t.resize=rr,_t._reglType="textureCube",_t._texture=Yt,Tn.profile&&(_t.stats=Yt.stats),_t.destroy=function(){Yt.decRef()},_t}function Z(){for(var Ae=0;Ae<vs;++Ae)Et.activeTexture(Ps+Ae),Et.bindTexture(vr,null),Ss[Ae]=null;St(Io).forEach(fe),xn.cubeCount=0,xn.textureCount=0}function ve(){for(var Ae=0;Ae<vs;++Ae){var Ge=Ss[Ae];Ge&&(Ge.bindCount=0,Ge.unit=-1,Ss[Ae]=null)}St(Io).forEach(function(ot){ot.texture=Et.createTexture(),Et.bindTexture(ot.target,ot.texture);for(var xt=0;xt<32;++xt)if(ot.mipmask&1<<xt)if(ot.target===vr)Et.texImage2D(vr,xt,ot.internalformat,ot.width>>xt,ot.height>>xt,0,ot.internalformat,ot.type,null);else for(var Wt=0;Wt<6;++Wt)Et.texImage2D(Or+Wt,xt,ot.internalformat,ot.width>>xt,ot.height>>xt,0,ot.internalformat,ot.type,null);hl(ot.texInfo,ot.target)})}function Ee(){for(var Ae=0;Ae<vs;++Ae){var Ge=Ss[Ae];Ge&&(Ge.bindCount=0,Ge.unit=-1,Ss[Ae]=null),Et.activeTexture(Ps+Ae),Et.bindTexture(vr,null),Et.bindTexture(nn,null)}}return K(_i.prototype,{bind:function(){var Ae=this;Ae.bindCount+=1;var Ge=Ae.unit;if(Ge<0){for(var ot=0;ot<vs;++ot){var xt=Ss[ot];if(xt){if(xt.bindCount>0)continue;xt.unit=-1}Ss[ot]=Ae,Ge=ot;break}Tn.profile&&xn.maxTextureUnits<Ge+1&&(xn.maxTextureUnits=Ge+1),Ae.unit=Ge,Et.activeTexture(Ps+Ge),Et.bindTexture(Ae.target,Ae.texture)}return Ge},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&fe(this)}}),Tn.profile&&(xn.getTotalTextureSize=function(){var Ae=0;return Object.keys(Io).forEach(function(Ge){Ae+=Io[Ge].stats.size}),Ae}),{create2D:G,createCube:ce,clear:Z,getTexture:function(Ae){return null},restore:ve,refresh:Ee}}Wi[Ka]=2,Wi[Ja]=2,Wi[si]=2,Wi[gn]=4,Wi[Xo]=.5,Wi[ao]=.5,Wi[io]=1,Wi[Lo]=1,Wi[qo]=.5,Wi[wo]=1,Wi[In]=1,Wi[Ta]=.5,Wi[ls]=.25,Wi[Do]=.5,Wi[oo]=.25,Wi[ys]=.5;var kl=36161,xu=32854,qu=32855,ql=36194,vf=33189,zu=36168,jl=34041,ef=35907,Ou=34836,js=34842,bu=34843,co=[];function Wl(Et,wr,Nr){return co[Et]*wr*Nr}co[xu]=2,co[qu]=2,co[ql]=2,co[vf]=2,co[zu]=1,co[jl]=4,co[ef]=4,co[Ou]=16,co[js]=8,co[bu]=6;var al=function(Et,wr,Nr,vn,bn){var xn={rgba4:xu,rgb565:ql,"rgb5 a1":qu,depth:vf,stencil:zu,"depth stencil":jl};wr.ext_srgb&&(xn.srgba=ef),wr.ext_color_buffer_half_float&&(xn.rgba16f=js,xn.rgb16f=bu),wr.webgl_color_buffer_float&&(xn.rgba32f=Ou);var Tn=[];Object.keys(xn).forEach(function(ra){var Bn=xn[ra];Tn[Bn]=ra});var Gn=0,ba={};function wa(ra){this.id=Gn++,this.refCount=1,this.renderbuffer=ra,this.format=xu,this.width=0,this.height=0,bn.profile&&(this.stats={size:0})}function Qn(ra){var Bn=ra.renderbuffer;Et.bindRenderbuffer(kl,null),Et.deleteRenderbuffer(Bn),ra.renderbuffer=null,ra.refCount=0,delete ba[ra.id],vn.renderbufferCount--}function Fa(ra,Bn){var dn=new wa(Et.createRenderbuffer());function kn(na,jn){var ka=0,ga=0,ni=xu;if("object"==typeof na&&na){var Kn=na;if("shape"in Kn){var Hn=Kn.shape;ka=0|Hn[0],ga=0|Hn[1]}else"radius"in Kn&&(ka=ga=0|Kn.radius),"width"in Kn&&(ka=0|Kn.width),"height"in Kn&&(ga=0|Kn.height);"format"in Kn&&(ni=xn[Kn.format])}else"number"==typeof na?(ka=0|na,ga="number"==typeof jn?0|jn:ka):na||(ka=ga=1);if(ka!==dn.width||ga!==dn.height||ni!==dn.format)return kn.width=dn.width=ka,kn.height=dn.height=ga,dn.format=ni,Et.bindRenderbuffer(kl,dn.renderbuffer),Et.renderbufferStorage(kl,ni,ka,ga),bn.profile&&(dn.stats.size=Wl(dn.format,dn.width,dn.height)),kn.format=Tn[dn.format],kn}function $n(na,jn){var ka=0|na,ga=0|jn||ka;return ka===dn.width&&ga===dn.height||(kn.width=dn.width=ka,kn.height=dn.height=ga,Et.bindRenderbuffer(kl,dn.renderbuffer),Et.renderbufferStorage(kl,dn.format,ka,ga),bn.profile&&(dn.stats.size=Wl(dn.format,dn.width,dn.height))),kn}return ba[dn.id]=dn,vn.renderbufferCount++,kn(ra,Bn),kn.resize=$n,kn._reglType="renderbuffer",kn._renderbuffer=dn,bn.profile&&(kn.stats=dn.stats),kn.destroy=function(){dn.decRef()},kn}function ea(){St(ba).forEach(function(ra){ra.renderbuffer=Et.createRenderbuffer(),Et.bindRenderbuffer(kl,ra.renderbuffer),Et.renderbufferStorage(kl,ra.format,ra.width,ra.height)}),Et.bindRenderbuffer(kl,null)}return wa.prototype.decRef=function(){--this.refCount<=0&&Qn(this)},bn.profile&&(vn.getTotalRenderbufferSize=function(){var ra=0;return Object.keys(ba).forEach(function(Bn){ra+=ba[Bn].stats.size}),ra}),{create:Fa,clear:function(){St(ba).forEach(Qn)},restore:ea}},ws=36160,_l=36161,il=3553,pl=34069,Fo=36064,Nf=36096,Ef=36128,Fl=33306,df=36193,wu=5121,eu=5126,Us=6407,Bu=[];Bu[6408]=4,Bu[Us]=3;var pf=[];function gf(Et,wr,Nr,vn,bn,xn){var Tn={cur:null,next:null,dirty:!1,setFBO:null},Gn=["rgba"],ba=["rgba4","rgb565","rgb5 a1"];wr.ext_srgb&&ba.push("srgba"),wr.ext_color_buffer_half_float&&ba.push("rgba16f","rgb16f"),wr.webgl_color_buffer_float&&ba.push("rgba32f");var wa=["uint8"];function Qn(ca,oa,Oa){this.target=ca,this.texture=oa,this.renderbuffer=Oa;var li=0,xi=0;oa?(li=oa.width,xi=oa.height):Oa&&(li=Oa.width,xi=Oa.height),this.width=li,this.height=xi}function Fa(ca){ca&&(ca.texture&&ca.texture._texture.decRef(),ca.renderbuffer&&ca.renderbuffer._renderbuffer.decRef())}function ea(ca,oa,Oa){if(ca)if(ca.texture){var li=ca.texture._texture;Math.max(1,li.width),Math.max(1,li.height),li.refCount+=1}else ca.renderbuffer._renderbuffer.refCount+=1}function ra(ca,oa){oa&&(oa.texture?Et.framebufferTexture2D(ws,ca,oa.target,oa.texture._texture.texture,0):Et.framebufferRenderbuffer(ws,ca,_l,oa.renderbuffer._renderbuffer.renderbuffer))}function Bn(ca){var oa=il,Oa=null,li=null,xi=ca;"object"==typeof ca&&(xi=ca.data,"target"in ca&&(oa=0|ca.target));var Da=xi._reglType;return"texture2d"===Da||"textureCube"===Da?Oa=xi:"renderbuffer"===Da&&(li=xi,oa=_l),new Qn(oa,Oa,li)}function dn(ca,oa,Oa,li,xi){if(Oa){var Da=vn.create2D({width:ca,height:oa,format:li,type:xi});return Da._texture.refCount=0,new Qn(il,Da,null)}var $a=bn.create({width:ca,height:oa,format:li});return $a._renderbuffer.refCount=0,new Qn(_l,null,$a)}function kn(ca){return ca&&(ca.texture||ca.renderbuffer)}function $n(ca,oa,Oa){ca&&(ca.texture?ca.texture.resize(oa,Oa):ca.renderbuffer&&ca.renderbuffer.resize(oa,Oa),ca.width=oa,ca.height=Oa)}wr.oes_texture_half_float&&wa.push("half float","float16"),wr.oes_texture_float&&wa.push("float","float32");var na=0,jn={};function ka(){this.id=na++,jn[this.id]=this,this.framebuffer=Et.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ga(ca){ca.colorAttachments.forEach(Fa),Fa(ca.depthAttachment),Fa(ca.stencilAttachment),Fa(ca.depthStencilAttachment)}function ni(ca){var oa=ca.framebuffer;Et.deleteFramebuffer(oa),ca.framebuffer=null,xn.framebufferCount--,delete jn[ca.id]}function Kn(ca){var oa;Et.bindFramebuffer(ws,ca.framebuffer);var Oa=ca.colorAttachments;for(oa=0;oa<Oa.length;++oa)ra(Fo+oa,Oa[oa]);for(oa=Oa.length;oa<Nr.maxColorAttachments;++oa)Et.framebufferTexture2D(ws,Fo+oa,il,null,0);Et.framebufferTexture2D(ws,Fl,il,null,0),Et.framebufferTexture2D(ws,Nf,il,null,0),Et.framebufferTexture2D(ws,Ef,il,null,0),ra(Nf,ca.depthAttachment),ra(Ef,ca.stencilAttachment),ra(Fl,ca.depthStencilAttachment),Et.checkFramebufferStatus(ws),Et.isContextLost(),Et.bindFramebuffer(ws,Tn.next?Tn.next.framebuffer:null),Tn.cur=Tn.next,Et.getError()}function Hn(ca,oa){var Oa=new ka;function li(Da,$a){var gi,wi=0,ki=0,Po=!0,As=!0,Gi=null,hs=!0,mo="rgba",gs="uint8",hl=1,Al=null,Io=null,vs=null,Ss=!1;if("number"==typeof Da)wi=0|Da,ki=0|$a||wi;else if(Da){var _i=Da;if("shape"in _i){var xo=_i.shape;wi=xo[0],ki=xo[1]}else"radius"in _i&&(wi=ki=_i.radius),"width"in _i&&(wi=_i.width),"height"in _i&&(ki=_i.height);("color"in _i||"colors"in _i)&&(Gi=_i.color||_i.colors,Array.isArray(Gi)),Gi||("colorCount"in _i&&(hl=0|_i.colorCount),"colorTexture"in _i&&(hs=!!_i.colorTexture,mo="rgba4"),"colorType"in _i&&(gs=_i.colorType,hs||("half float"===gs||"float16"===gs?mo="rgba16f":("float"===gs||"float32"===gs)&&(mo="rgba32f"))),"colorFormat"in _i&&(mo=_i.colorFormat,Gn.indexOf(mo)>=0?hs=!0:ba.indexOf(mo)>=0&&(hs=!1))),("depthTexture"in _i||"depthStencilTexture"in _i)&&(Ss=!(!_i.depthTexture&&!_i.depthStencilTexture)),"depth"in _i&&("boolean"==typeof _i.depth?Po=_i.depth:(Al=_i.depth,As=!1)),"stencil"in _i&&("boolean"==typeof _i.stencil?As=_i.stencil:(Io=_i.stencil,Po=!1)),"depthStencil"in _i&&("boolean"==typeof _i.depthStencil?Po=As=_i.depthStencil:(vs=_i.depthStencil,Po=!1,As=!1))}else wi=ki=1;var Mi=null,fe=null,G=null,ce=null;if(Array.isArray(Gi))Mi=Gi.map(Bn);else if(Gi)Mi=[Bn(Gi)];else for(Mi=new Array(hl),gi=0;gi<hl;++gi)Mi[gi]=dn(wi,ki,hs,mo,gs);wi=wi||Mi[0].width,ki=ki||Mi[0].height,Al?fe=Bn(Al):Po&&!As&&(fe=dn(wi,ki,Ss,"depth","uint32")),Io?G=Bn(Io):As&&!Po&&(G=dn(wi,ki,!1,"stencil","uint8")),vs?ce=Bn(vs):!Al&&!Io&&As&&Po&&(ce=dn(wi,ki,Ss,"depth stencil","depth stencil"));var Z=null;for(gi=0;gi<Mi.length;++gi)if(ea(Mi[gi],wi,ki),Mi[gi]&&Mi[gi].texture){var ve=Bu[Mi[gi].texture._texture.format]*pf[Mi[gi].texture._texture.type];null===Z&&(Z=ve)}return ea(fe,wi,ki),ea(G,wi,ki),ea(ce,wi,ki),ga(Oa),Oa.width=wi,Oa.height=ki,Oa.colorAttachments=Mi,Oa.depthAttachment=fe,Oa.stencilAttachment=G,Oa.depthStencilAttachment=ce,li.color=Mi.map(kn),li.depth=kn(fe),li.stencil=kn(G),li.depthStencil=kn(ce),li.width=Oa.width,li.height=Oa.height,Kn(Oa),li}function xi(Da,$a){var gi=Math.max(0|Da,1),wi=Math.max(0|$a||gi,1);if(gi===Oa.width&&wi===Oa.height)return li;for(var ki=Oa.colorAttachments,Po=0;Po<ki.length;++Po)$n(ki[Po],gi,wi);return $n(Oa.depthAttachment,gi,wi),$n(Oa.stencilAttachment,gi,wi),$n(Oa.depthStencilAttachment,gi,wi),Oa.width=li.width=gi,Oa.height=li.height=wi,Kn(Oa),li}return xn.framebufferCount++,li(ca,oa),K(li,{resize:xi,_reglType:"framebuffer",_framebuffer:Oa,destroy:function(){ni(Oa),ga(Oa)},use:function(Da){Tn.setFBO({framebuffer:li},Da)}})}function Va(ca){var oa=Array(6);function Oa(xi){var Da,mo,$a={color:null},gi=0,wi=null,ki="rgba",Po="uint8",As=1;if("number"==typeof xi)gi=0|xi;else if(xi){var Gi=xi;"shape"in Gi?gi=Gi.shape[0]:("radius"in Gi&&(gi=0|Gi.radius),"width"in Gi?gi=0|Gi.width:"height"in Gi&&(gi=0|Gi.height)),("color"in Gi||"colors"in Gi)&&(wi=Gi.color||Gi.colors,Array.isArray(wi)),wi||("colorCount"in Gi&&(As=0|Gi.colorCount),"colorType"in Gi&&(Po=Gi.colorType),"colorFormat"in Gi&&(ki=Gi.colorFormat)),"depth"in Gi&&($a.depth=Gi.depth),"stencil"in Gi&&($a.stencil=Gi.stencil),"depthStencil"in Gi&&($a.depthStencil=Gi.depthStencil)}else gi=1;if(wi)if(Array.isArray(wi))for(mo=[],Da=0;Da<wi.length;++Da)mo[Da]=wi[Da];else mo=[wi];else{mo=Array(As);var gs={radius:gi,format:ki,type:Po};for(Da=0;Da<As;++Da)mo[Da]=vn.createCube(gs)}for($a.color=Array(mo.length),Da=0;Da<mo.length;++Da){var hl=mo[Da];gi=gi||hl.width,$a.color[Da]={target:pl,data:mo[Da]}}for(Da=0;Da<6;++Da){for(var Al=0;Al<mo.length;++Al)$a.color[Al].target=pl+Da;Da>0&&($a.depth=oa[0].depth,$a.stencil=oa[0].stencil,$a.depthStencil=oa[0].depthStencil),oa[Da]?oa[Da]($a):oa[Da]=Hn($a)}return K(Oa,{width:gi,height:gi,color:mo})}function li(xi){var Da,$a=0|xi;if($a===Oa.width)return Oa;var gi=Oa.color;for(Da=0;Da<gi.length;++Da)gi[Da].resize($a);for(Da=0;Da<6;++Da)oa[Da].resize($a);return Oa.width=Oa.height=$a,Oa}return Oa(ca),K(Oa,{faces:oa,resize:li,_reglType:"framebufferCube",destroy:function(){oa.forEach(function(xi){xi.destroy()})}})}function Pa(){Tn.cur=null,Tn.next=null,Tn.dirty=!0,St(jn).forEach(function(ca){ca.framebuffer=Et.createFramebuffer(),Kn(ca)})}return K(Tn,{getFramebuffer:function(ca){if("function"==typeof ca&&"framebuffer"===ca._reglType){var oa=ca._framebuffer;if(oa instanceof ka)return oa}return null},create:Hn,createCube:Va,clear:function(){St(jn).forEach(ni)},restore:Pa})}pf[wu]=1,pf[eu]=4,pf[df]=2;var Cf=5126,Tu=34962,Uu=34963;function tu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Cf,this.offset=0,this.stride=0,this.divisor=0}function yf(Et,wr,Nr,vn,bn,xn,Tn){for(var Gn=Nr.maxAttributes,ba=new Array(Gn),wa=0;wa<Gn;++wa)ba[wa]=new tu;var Qn=0,Fa={},ea={Record:tu,scope:{},state:ba,currentVAO:null,targetVAO:null,restore:Bn()?ga:function(){},createVAO:ni,getVAO:kn,destroyBuffer:ra,setVAO:Bn()?$n:na,clear:Bn()?jn:function(){}};function ra(Kn){for(var Hn=0;Hn<ba.length;++Hn){var Va=ba[Hn];Va.buffer===Kn&&(Et.disableVertexAttribArray(Hn),Va.buffer=null)}}function Bn(){return wr.oes_vertex_array_object}function dn(){return wr.angle_instanced_arrays}function kn(Kn){return"function"==typeof Kn&&Kn._vao?Kn._vao:null}function $n(Kn){if(Kn!==ea.currentVAO){var Hn=Bn();Kn?Hn.bindVertexArrayOES(Kn.vao):Hn.bindVertexArrayOES(null),ea.currentVAO=Kn}}function na(Kn){if(Kn!==ea.currentVAO){if(Kn)Kn.bindAttrs();else{for(var Hn=dn(),Va=0;Va<ba.length;++Va){var Pa=ba[Va];Pa.buffer?(Et.enableVertexAttribArray(Va),Pa.buffer.bind(),Et.vertexAttribPointer(Va,Pa.size,Pa.type,Pa.normalized,Pa.stride,Pa.offfset),Hn&&Pa.divisor&&Hn.vertexAttribDivisorANGLE(Va,Pa.divisor)):(Et.disableVertexAttribArray(Va),Et.vertexAttrib4f(Va,Pa.x,Pa.y,Pa.z,Pa.w))}Tn.elements?Et.bindBuffer(Uu,Tn.elements.buffer.buffer):Et.bindBuffer(Uu,null)}ea.currentVAO=Kn}}function jn(){St(Fa).forEach(function(Kn){Kn.destroy()})}function ka(){this.id=++Qn,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Kn=Bn();this.vao=Kn?Kn.createVertexArrayOES():null,Fa[this.id]=this,this.buffers=[]}function ga(){Bn()&&St(Fa).forEach(function(Hn){Hn.refresh()})}function ni(Kn){var Hn=new ka;function Va(Pa){var ca;if(Array.isArray(Pa))ca=Pa,Hn.elements&&Hn.ownsElements&&Hn.elements.destroy(),Hn.elements=null,Hn.ownsElements=!1,Hn.offset=0,Hn.count=0,Hn.instances=-1,Hn.primitive=4;else{if(Pa.elements){var oa=Pa.elements;Hn.ownsElements?"function"==typeof oa&&"elements"===oa._reglType?(Hn.elements.destroy(),Hn.ownsElements=!1):(Hn.elements(oa),Hn.ownsElements=!1):xn.getElements(Pa.elements)?(Hn.elements=Pa.elements,Hn.ownsElements=!1):(Hn.elements=xn.create(Pa.elements),Hn.ownsElements=!0)}else Hn.elements=null,Hn.ownsElements=!1;ca=Pa.attributes,Hn.offset=0,Hn.count=-1,Hn.instances=-1,Hn.primitive=4,Hn.elements&&(Hn.count=Hn.elements._elements.vertCount,Hn.primitive=Hn.elements._elements.primType),"offset"in Pa&&(Hn.offset=0|Pa.offset),"count"in Pa&&(Hn.count=0|Pa.count),"instances"in Pa&&(Hn.instances=0|Pa.instances),"primitive"in Pa&&(Hn.primitive=We[Pa.primitive])}var Oa={},li=Hn.attributes;li.length=ca.length;for(var xi=0;xi<ca.length;++xi){var wi,Da=ca[xi],$a=li[xi]=new tu,gi=Da.data||Da;Array.isArray(gi)||Rt(gi)||zt(gi)?(Hn.buffers[xi]&&(wi=Hn.buffers[xi],Rt(gi)&&wi._buffer.byteLength>=gi.byteLength?wi.subdata(gi):(wi.destroy(),Hn.buffers[xi]=null)),Hn.buffers[xi]||(wi=Hn.buffers[xi]=bn.create(Da,Tu,!1,!0)),$a.buffer=bn.getBuffer(wi),$a.size=0|$a.buffer.dimension,$a.normalized=!1,$a.type=$a.buffer.dtype,$a.offset=0,$a.stride=0,$a.divisor=0,$a.state=1,Oa[xi]=1):bn.getBuffer(Da)?($a.buffer=bn.getBuffer(Da),$a.size=0|$a.buffer.dimension,$a.normalized=!1,$a.type=$a.buffer.dtype,$a.offset=0,$a.stride=0,$a.divisor=0,$a.state=1):bn.getBuffer(Da.buffer)?($a.buffer=bn.getBuffer(Da.buffer),$a.size=0|(+Da.size||$a.buffer.dimension),$a.normalized=!!Da.normalized||!1,$a.type="type"in Da?Pt[Da.type]:$a.buffer.dtype,$a.offset=0|(Da.offset||0),$a.stride=0|(Da.stride||0),$a.divisor=0|(Da.divisor||0),$a.state=1):"x"in Da&&($a.x=+Da.x||0,$a.y=+Da.y||0,$a.z=+Da.z||0,$a.w=+Da.w||0,$a.state=2)}for(var ki=0;ki<Hn.buffers.length;++ki)!Oa[ki]&&Hn.buffers[ki]&&(Hn.buffers[ki].destroy(),Hn.buffers[ki]=null);return Hn.refresh(),Va}return vn.vaoCount+=1,Va.destroy=function(){for(var Pa=0;Pa<Hn.buffers.length;++Pa)Hn.buffers[Pa]&&Hn.buffers[Pa].destroy();Hn.buffers.length=0,Hn.ownsElements&&(Hn.elements.destroy(),Hn.elements=null,Hn.ownsElements=!1),Hn.destroy()},Va._vao=Hn,Va._reglType="vao",Va(Kn)}return ka.prototype.bindAttrs=function(){for(var Kn=dn(),Hn=this.attributes,Va=0;Va<Hn.length;++Va){var Pa=Hn[Va];Pa.buffer?(Et.enableVertexAttribArray(Va),Et.bindBuffer(Tu,Pa.buffer.buffer),Et.vertexAttribPointer(Va,Pa.size,Pa.type,Pa.normalized,Pa.stride,Pa.offset),Kn&&Pa.divisor&&Kn.vertexAttribDivisorANGLE(Va,Pa.divisor)):(Et.disableVertexAttribArray(Va),Et.vertexAttrib4f(Va,Pa.x,Pa.y,Pa.z,Pa.w))}for(var ca=Hn.length;ca<Gn;++ca)Et.disableVertexAttribArray(ca);var oa=xn.getElements(this.elements);oa?Et.bindBuffer(Uu,oa.buffer.buffer):Et.bindBuffer(Uu,null)},ka.prototype.refresh=function(){var Kn=Bn();Kn&&(Kn.bindVertexArrayOES(this.vao),this.bindAttrs(),ea.currentVAO=null,Kn.bindVertexArrayOES(null))},ka.prototype.destroy=function(){if(this.vao){var Kn=Bn();this===ea.currentVAO&&(ea.currentVAO=null,Kn.bindVertexArrayOES(null)),Kn.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Fa[this.id]&&(delete Fa[this.id],vn.vaoCount-=1)},ea}var mf=35632,Xi=35633,Au=35718,ru=35721;function xf(Et,wr,Nr,vn){var bn={},xn={};function Tn(dn,kn,$n,na){this.name=dn,this.id=kn,this.location=$n,this.info=na}function Gn(dn,kn){for(var $n=0;$n<dn.length;++$n)if(dn[$n].id===kn.id)return void(dn[$n].location=kn.location);dn.push(kn)}function ba(dn,kn,$n){var na=dn===mf?bn:xn,jn=na[kn];if(!jn){var ka=wr.str(kn);jn=Et.createShader(dn),Et.shaderSource(jn,ka),Et.compileShader(jn),na[kn]=jn}return jn}var wa={},Qn=[],Fa=0;function ea(dn,kn){this.id=Fa++,this.fragId=dn,this.vertId=kn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,vn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ra(dn,kn,$n){var na,jn,ka=ba(mf,dn.fragId),ga=ba(Xi,dn.vertId),ni=dn.program=Et.createProgram();if(Et.attachShader(ni,ka),Et.attachShader(ni,ga),$n)for(na=0;na<$n.length;++na){var Kn=$n[na];Et.bindAttribLocation(ni,Kn[0],Kn[1])}Et.linkProgram(ni);var Hn=Et.getProgramParameter(ni,Au);vn.profile&&(dn.stats.uniformsCount=Hn);var Va=dn.uniforms;for(na=0;na<Hn;++na)if(jn=Et.getActiveUniform(ni,na))if(jn.size>1)for(var Pa=0;Pa<jn.size;++Pa){var ca=jn.name.replace("[0]","["+Pa+"]");Gn(Va,new Tn(ca,wr.id(ca),Et.getUniformLocation(ni,ca),jn))}else Gn(Va,new Tn(jn.name,wr.id(jn.name),Et.getUniformLocation(ni,jn.name),jn));var oa=Et.getProgramParameter(ni,ru);vn.profile&&(dn.stats.attributesCount=oa);var Oa=dn.attributes;for(na=0;na<oa;++na)(jn=Et.getActiveAttrib(ni,na))&&Gn(Oa,new Tn(jn.name,wr.id(jn.name),Et.getAttribLocation(ni,jn.name),jn))}function Bn(){bn={},xn={};for(var dn=0;dn<Qn.length;++dn)ra(Qn[dn],null,Qn[dn].attributes.map(function(kn){return[kn.location,kn.name]}))}return vn.profile&&(Nr.getMaxUniformsCount=function(){var dn=0;return Qn.forEach(function(kn){kn.stats.uniformsCount>dn&&(dn=kn.stats.uniformsCount)}),dn},Nr.getMaxAttributesCount=function(){var dn=0;return Qn.forEach(function(kn){kn.stats.attributesCount>dn&&(dn=kn.stats.attributesCount)}),dn}),{clear:function(){var dn=Et.deleteShader.bind(Et);St(bn).forEach(dn),bn={},St(xn).forEach(dn),xn={},Qn.forEach(function(kn){Et.deleteProgram(kn.program)}),Qn.length=0,wa={},Nr.shaderCount=0},program:function(dn,kn,$n,na){var jn=wa[kn];jn||(jn=wa[kn]={});var ka=jn[dn];if(ka&&(ka.refCount++,!na))return ka;var ga=new ea(kn,dn);return Nr.shaderCount++,ra(ga,$n,na),ka||(jn[dn]=ga),Qn.push(ga),K(ga,{destroy:function(){if(ga.refCount--,ga.refCount<=0){Et.deleteProgram(ga.program);var ni=Qn.indexOf(ga);Qn.splice(ni,1),Nr.shaderCount--}jn[ga.vertId].refCount<=0&&(Et.deleteShader(xn[ga.vertId]),delete xn[ga.vertId],delete wa[ga.fragId][ga.vertId]),Object.keys(wa[ga.fragId]).length||(Et.deleteShader(bn[ga.fragId]),delete bn[ga.fragId],delete wa[ga.fragId])}})},restore:Bn,shader:ba,frag:-1,vert:-1}}var Lf=6408,ol=5121,Hu=3333,tf=5126;function cs(Et,wr,Nr,vn,bn,xn,Tn){function Gn(Qn){var Fa;Fa=null===wr.next?ol:wr.next.colorAttachments[0].texture._texture.type;var ea=0,ra=0,Bn=vn.framebufferWidth,dn=vn.framebufferHeight,kn=null;Rt(Qn)?kn=Qn:Qn&&(ea=0|Qn.x,ra=0|Qn.y,Bn=0|(Qn.width||vn.framebufferWidth-ea),dn=0|(Qn.height||vn.framebufferHeight-ra),kn=Qn.data||null),Nr();var $n=Bn*dn*4;return kn||(Fa===ol?kn=new Uint8Array($n):Fa===tf&&(kn=kn||new Float32Array($n))),Et.pixelStorei(Hu,4),Et.readPixels(ea,ra,Bn,dn,Lf,Fa,kn),kn}function ba(Qn){var Fa;return wr.setFBO({framebuffer:Qn.framebuffer},function(){Fa=Gn(Qn)}),Fa}function wa(Qn){return Qn&&"framebuffer"in Qn?ba(Qn):Gn(Qn)}return wa}var Su=0;function sl(Et){return Zl(Yl(zl(Et)))}function Yl(Et){return Vu(Kl(ml(Et),8*Et.length))}function Zl(Et){for(var vn,wr=Su?"0123456789ABCDEF":"0123456789abcdef",Nr="",bn=0;bn<Et.length;bn++)vn=Et.charCodeAt(bn),Nr+=wr.charAt(vn>>>4&15)+wr.charAt(15&vn);return Nr}function zl(Et){for(var vn,bn,wr="",Nr=-1;++Nr<Et.length;)vn=Et.charCodeAt(Nr),bn=Nr+1<Et.length?Et.charCodeAt(Nr+1):0,55296<=vn&&vn<=56319&&56320<=bn&&bn<=57343&&(vn=65536+((1023&vn)<<10)+(1023&bn),Nr++),vn<=127?wr+=String.fromCharCode(vn):vn<=2047?wr+=String.fromCharCode(192|vn>>>6&31,128|63&vn):vn<=65535?wr+=String.fromCharCode(224|vn>>>12&15,128|vn>>>6&63,128|63&vn):vn<=2097151&&(wr+=String.fromCharCode(240|vn>>>18&7,128|vn>>>12&63,128|vn>>>6&63,128|63&vn));return wr}function ml(Et){for(var wr=Array(Et.length>>2),Nr=0;Nr<wr.length;Nr++)wr[Nr]=0;for(Nr=0;Nr<8*Et.length;Nr+=8)wr[Nr>>5]|=(255&Et.charCodeAt(Nr/8))<<24-Nr%32;return wr}function Vu(Et){for(var wr="",Nr=0;Nr<32*Et.length;Nr+=8)wr+=String.fromCharCode(Et[Nr>>5]>>>24-Nr%32&255);return wr}function ul(Et,wr){return Et>>>wr|Et<<32-wr}function Mu(Et,wr){return Et>>>wr}function Xf(Et,wr,Nr){return Et&wr^~Et&Nr}function Pf(Et,wr,Nr){return Et&wr^Et&Nr^wr&Nr}function Zf(Et){return ul(Et,2)^ul(Et,13)^ul(Et,22)}function nu(Et){return ul(Et,6)^ul(Et,11)^ul(Et,25)}function Eu(Et){return ul(Et,7)^ul(Et,18)^Mu(Et,3)}function Cu(Et){return ul(Et,17)^ul(Et,19)^Mu(Et,10)}var au=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function Kl(Et,wr){var bn,xn,Tn,Gn,ba,wa,Qn,Fa,ea,ra,Bn,dn,Nr=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),vn=new Array(64);for(Et[wr>>5]|=128<<24-wr%32,Et[15+(wr+64>>9<<4)]=wr,ea=0;ea<Et.length;ea+=16){for(bn=Nr[0],xn=Nr[1],Tn=Nr[2],Gn=Nr[3],ba=Nr[4],wa=Nr[5],Qn=Nr[6],Fa=Nr[7],ra=0;ra<64;ra++)vn[ra]=ra<16?Et[ra+ea]:zo(zo(zo(Cu(vn[ra-2]),vn[ra-7]),Eu(vn[ra-15])),vn[ra-16]),Bn=zo(zo(zo(zo(Fa,nu(ba)),Xf(ba,wa,Qn)),au[ra]),vn[ra]),dn=zo(Zf(bn),Pf(bn,xn,Tn)),Fa=Qn,Qn=wa,wa=ba,ba=zo(Gn,Bn),Gn=Tn,Tn=xn,xn=bn,bn=zo(Bn,dn);Nr[0]=zo(bn,Nr[0]),Nr[1]=zo(xn,Nr[1]),Nr[2]=zo(Tn,Nr[2]),Nr[3]=zo(Gn,Nr[3]),Nr[4]=zo(ba,Nr[4]),Nr[5]=zo(wa,Nr[5]),Nr[6]=zo(Qn,Nr[6]),Nr[7]=zo(Fa,Nr[7])}return Nr}function zo(Et,wr){var Nr=(65535&Et)+(65535&wr);return(Et>>16)+(wr>>16)+(Nr>>16)<<16|65535&Nr}function Ts(Et){return Array.prototype.slice.call(Et)}function Gu(Et){return Ts(Et).join("")}function rf(Et){var wr=Et&&Et.cache,Nr=0,vn=[],bn=[],xn=[];function Tn(Bn,dn){var kn=dn&&dn.stable;if(!kn)for(var $n=0;$n<bn.length;++$n)if(bn[$n]===Bn&&!xn[$n])return vn[$n];var na="g"+Nr++;return vn.push(na),bn.push(Bn),xn.push(kn),na}function Gn(){var Bn=[];function dn(){Bn.push.apply(Bn,Ts(arguments))}var kn=[];function $n(){var na="v"+Nr++;return kn.push(na),arguments.length>0&&(Bn.push(na,"="),Bn.push.apply(Bn,Ts(arguments)),Bn.push(";")),na}return K(dn,{def:$n,toString:function(){return Gu([kn.length>0?"var "+kn.join(",")+";":"",Gu(Bn)])}})}function ba(){var Bn=Gn(),dn=Gn(),kn=Bn.toString,$n=dn.toString;function na(jn,ka){dn(jn,ka,"=",Bn.def(jn,ka),";")}return K(function(){Bn.apply(Bn,Ts(arguments))},{def:Bn.def,entry:Bn,exit:dn,save:na,set:function(jn,ka,ga){na(jn,ka),Bn(jn,ka,"=",ga,";")},toString:function(){return kn()+$n()}})}function wa(){var Bn=Gu(arguments),dn=ba(),kn=ba(),$n=dn.toString,na=kn.toString;return K(dn,{then:function(){return dn.apply(dn,Ts(arguments)),this},else:function(){return kn.apply(kn,Ts(arguments)),this},toString:function(){var jn=na();return jn&&(jn="else{"+jn+"}"),Gu(["if(",Bn,"){",$n(),"}",jn])}})}var Qn=Gn(),Fa={};function ea(Bn,dn){var kn=[];function $n(){var ni="a"+kn.length;return kn.push(ni),ni}dn=dn||0;for(var na=0;na<dn;++na)$n();var jn=ba(),ka=jn.toString;return Fa[Bn]=K(jn,{arg:$n,toString:function(){return Gu(["function(",kn.join(),"){",ka(),"}"])}})}function ra(){var Bn=['"use strict";',Qn,"return {"];Object.keys(Fa).forEach(function(na){Bn.push('"',na,'":',Fa[na].toString(),",")}),Bn.push("}");var kn,dn=Gu(Bn).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");if(wr&&(kn=sl(dn),wr[kn]))return wr[kn].apply(null,bn);var $n=Function.apply(null,vn.concat(dn));return wr&&(wr[kn]=$n),$n.apply(null,bn)}return{global:Qn,link:Tn,block:Gn,proc:ea,scope:ba,cond:wa,compile:ra}}var Lu="xyzw".split(""),bf=5121,iu=1,ou=2,ks=0,Ol=1,fl=2,ju=3,Nl=4,Wu=5,pt=6,kt="dither",yr="blend.enable",er="blend.color",Mr="blend.equation",Zr="blend.func",un="depth.enable",fn="depth.func",Dn="depth.range",Wn="depth.mask",yn="colorMask",_n="cull.enable",Mn="cull.face",Un="frontFace",ta="lineWidth",Qa="polygonOffset.enable",ja="polygonOffset.offset",ii="sample.alpha",oi="sample.enable",fa="sample.coverage",pa="stencil.enable",ti="stencil.mask",pi="stencil.func",Hi="stencil.opFront",no="stencil.opBack",Zi="scissor.enable",Ki="scissor.box",mi="viewport",So="profile",Co="framebuffer",to="vert",Ia="frag",Ri="elements",Uo="primitive",jo="count",os="offset",Bl="instances",cl="vao",Ys="Width",xl="Height",_o=Co+Ys,_s=Co+xl,If=mi+Ys,Yu=mi+xl,nf="drawingBuffer",af=nf+Ys,Df=nf+xl,Rf=[Zr,Mr,pi,Hi,no,fa,mi,Ki,ja],of=34962,sf=34963,Kf=2884,Bf=3042,Jf=3024,Xu=2960,Uf=2929,Hf=3089,Vf=32823,rc=32926,nc=32928,Qf=5126,lf=35664,Xs=35665,Mo=35666,Jl=5124,bl=35667,lo=35668,Vi=35669,$i=35670,Pu=35671,wl=35672,uf=35673,Ul=35674,Tl=35675,Zs=35676,Gf=35678,su=35680,lu=4,Wa=1028,ns=1029,Zu=2304,jf=2305,le=32775,xe=32776,Re=519,Ue=7680,Je=0,tt=1,Lt=32774,yt=513,Ot=36160,or=36064,ir={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Rr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Dr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},tn={cw:Zu,ccw:jf};function sn(Et){return Array.isArray(Et)||Rt(Et)||zt(Et)}function _r(Et){return Et.sort(function(wr,Nr){return wr===mi?-1:Nr===mi?1:wr<Nr?-1:1})}function Gr(Et,wr,Nr,vn){this.thisDep=Et,this.contextDep=wr,this.propDep=Nr,this.append=vn}function Jr(Et){return Et&&!(Et.thisDep||Et.contextDep||Et.propDep)}function qr(Et){return new Gr(!1,!1,!1,Et)}function en(Et,wr){var Nr=Et.type;if(Nr===ks){var vn=Et.data.length;return new Gr(!0,vn>=1,vn>=2,wr)}if(Nr===Nl){var bn=Et.data;return new Gr(bn.thisDep,bn.contextDep,bn.propDep,wr)}if(Nr===Wu)return new Gr(!1,!1,!1,wr);if(Nr===pt){for(var xn=!1,Tn=!1,Gn=!1,ba=0;ba<Et.data.length;++ba){var wa=Et.data[ba];if(wa.type===Ol)Gn=!0;else if(wa.type===fl)Tn=!0;else if(wa.type===ju)xn=!0;else if(wa.type===ks){xn=!0;var Qn=wa.data;Qn>=1&&(Tn=!0),Qn>=2&&(Gn=!0)}else wa.type===Nl&&(xn=xn||wa.data.thisDep,Tn=Tn||wa.data.contextDep,Gn=Gn||wa.data.propDep)}return new Gr(xn,Tn,Gn,wr)}return new Gr(Nr===ju,Nr===fl,Nr===Ol,wr)}var Qr=new Gr(!1,!1,!1,function(){});function Vn(Et,wr,Nr,vn,bn,xn,Tn,Gn,ba,wa,Qn,Fa,ea,ra,Bn,dn){var kn=wa.Record,$n={add:32774,subtract:32778,"reverse subtract":32779};Nr.ext_blend_minmax&&($n.min=le,$n.max=xe);var na=Nr.angle_instanced_arrays,jn=Nr.webgl_draw_buffers,ka=Nr.oes_vertex_array_object,ga={dirty:!0,profile:dn.profile},ni={},Kn=[],Hn={},Va={};function Pa(Tt){return Tt.replace(".","_")}function ca(Tt,_t,Nt){var rr=Pa(Tt);Kn.push(Tt),ni[rr]=ga[rr]=!!Nt,Hn[rr]=_t}function oa(Tt,_t,Nt){var rr=Pa(Tt);Kn.push(Tt),Array.isArray(Nt)?(ga[rr]=Nt.slice(),ni[rr]=Nt.slice()):ga[rr]=ni[rr]=Nt,Va[rr]=_t}function Oa(Tt){return!!isNaN(Tt)}ca(kt,Jf),ca(yr,Bf),oa(er,"blendColor",[0,0,0,0]),oa(Mr,"blendEquationSeparate",[Lt,Lt]),oa(Zr,"blendFuncSeparate",[tt,Je,tt,Je]),ca(un,Uf,!0),oa(fn,"depthFunc",yt),oa(Dn,"depthRange",[0,1]),oa(Wn,"depthMask",!0),oa(yn,yn,[!0,!0,!0,!0]),ca(_n,Kf),oa(Mn,"cullFace",ns),oa(Un,Un,jf),oa(ta,ta,1),ca(Qa,Vf),oa(ja,"polygonOffset",[0,0]),ca(ii,rc),ca(oi,nc),oa(fa,"sampleCoverage",[1,!1]),ca(pa,Xu),oa(ti,"stencilMask",-1),oa(pi,"stencilFunc",[Re,0,-1]),oa(Hi,"stencilOpSeparate",[Wa,Ue,Ue,Ue]),oa(no,"stencilOpSeparate",[ns,Ue,Ue,Ue]),ca(Zi,Hf),oa(Ki,"scissor",[0,0,Et.drawingBufferWidth,Et.drawingBufferHeight]),oa(mi,mi,[0,0,Et.drawingBufferWidth,Et.drawingBufferHeight]);var li={gl:Et,context:ea,strings:wr,next:ni,current:ga,draw:Fa,elements:xn,buffer:bn,shader:Qn,attributes:wa.state,vao:wa,uniforms:ba,framebuffer:Gn,extensions:Nr,timer:ra,isBufferArgs:sn},xi={primTypes:We,compareFuncs:Rr,blendFuncs:ir,blendEquations:$n,stencilOps:Dr,glTypes:Pt,orientationType:tn};jn&&(xi.backBuffer=[ns],xi.drawBuffer=b(vn.maxDrawbuffers,function(Tt){return 0===Tt?[0]:b(Tt,function(_t){return or+_t})}));var Da=0;function $a(){var Tt=rf({cache:Bn}),_t=Tt.link,Nt=Tt.global;Tt.id=Da++,Tt.batchId="0";var rr=_t(li),dr=Tt.shared={props:"a0"};Object.keys(li).forEach(function(Er){dr[Er]=Nt.def(rr,".",Er)});var pr=Tt.next={},Lr=Tt.current={};Object.keys(Va).forEach(function(Er){Array.isArray(ga[Er])&&(pr[Er]=Nt.def(dr.next,".",Er),Lr[Er]=Nt.def(dr.current,".",Er))});var Tr=Tt.constants={};Object.keys(xi).forEach(function(Er){Tr[Er]=Nt.def(JSON.stringify(xi[Er]))}),Tt.invoke=function(Er,fr){switch(fr.type){case ks:var Br=["this",dr.context,dr.props,Tt.batchId];return Er.def(_t(fr.data),".call(",Br.slice(0,Math.max(fr.data.length+1,4)),")");case Ol:return Er.def(dr.props,fr.data);case fl:return Er.def(dr.context,fr.data);case ju:return Er.def("this",fr.data);case Nl:return fr.data.append(Tt,Er),fr.data.ref;case Wu:return fr.data.toString();case pt:return fr.data.map(function($r){return Tt.invoke(Er,$r)})}},Tt.attribCache={};var mr={};return Tt.scopeAttrib=function(Er){var fr=wr.id(Er);if(fr in mr)return mr[fr];var Br=wa.scope[fr];return Br||(Br=wa.scope[fr]=new kn),mr[fr]=_t(Br)},Tt}function gi(Tt){var rr,_t=Tt.static,Nt=Tt.dynamic;if(So in _t){var dr=!!_t[So];(rr=qr(function(Lr,Tr){return dr})).enable=dr}else if(So in Nt){var pr=Nt[So];rr=en(pr,function(Lr,Tr){return Lr.invoke(Tr,pr)})}return rr}function wi(Tt,_t){var Nt=Tt.static,rr=Tt.dynamic;if(Co in Nt){var dr=Nt[Co];return dr?(dr=Gn.getFramebuffer(dr),qr(function(Lr,Tr){var mr=Lr.link(dr),Er=Lr.shared;Tr.set(Er.framebuffer,".next",mr);var fr=Er.context;return Tr.set(fr,"."+_o,mr+".width"),Tr.set(fr,"."+_s,mr+".height"),mr})):qr(function(Lr,Tr){var mr=Lr.shared;Tr.set(mr.framebuffer,".next","null");var Er=mr.context;return Tr.set(Er,"."+_o,Er+"."+af),Tr.set(Er,"."+_s,Er+"."+Df),"null"})}if(Co in rr){var pr=rr[Co];return en(pr,function(Lr,Tr){var mr=Lr.invoke(Tr,pr),Er=Lr.shared,fr=Er.framebuffer,Br=Tr.def(fr,".getFramebuffer(",mr,")");Tr.set(fr,".next",Br);var $r=Er.context;return Tr.set($r,"."+_o,Br+"?"+Br+".width:"+$r+"."+af),Tr.set($r,"."+_s,Br+"?"+Br+".height:"+$r+"."+Df),Br})}return null}function ki(Tt,_t,Nt){var rr=Tt.static,dr=Tt.dynamic;function pr(mr){if(mr in rr){var ln,zn,Er=rr[mr],fr=!0,Br=0|Er.x,$r=0|Er.y;return"width"in Er?ln=0|Er.width:fr=!1,"height"in Er?zn=0|Er.height:fr=!1,new Gr(!fr&&_t&&_t.thisDep,!fr&&_t&&_t.contextDep,!fr&&_t&&_t.propDep,function(ya,aa){var On=ya.shared.context,Zn=ln;"width"in Er||(Zn=aa.def(On,".",_o,"-",Br));var Yn=zn;return"height"in Er||(Yn=aa.def(On,".",_s,"-",$r)),[Br,$r,Zn,Yn]})}if(mr in dr){var En=dr[mr],Nn=en(En,function(ya,aa){var On=ya.invoke(aa,En),Zn=ya.shared.context,Yn=aa.def(On,".x|0"),ua=aa.def(On,".y|0");return[Yn,ua,aa.def('"width" in ',On,"?",On,".width|0:","(",Zn,".",_o,"-",Yn,")"),aa.def('"height" in ',On,"?",On,".height|0:","(",Zn,".",_s,"-",ua,")")]});return _t&&(Nn.thisDep=Nn.thisDep||_t.thisDep,Nn.contextDep=Nn.contextDep||_t.contextDep,Nn.propDep=Nn.propDep||_t.propDep),Nn}return _t?new Gr(_t.thisDep,_t.contextDep,_t.propDep,function(ya,aa){var On=ya.shared.context;return[0,0,aa.def(On,".",_o),aa.def(On,".",_s)]}):null}var Lr=pr(mi);if(Lr){var Tr=Lr;Lr=new Gr(Lr.thisDep,Lr.contextDep,Lr.propDep,function(mr,Er){var fr=Tr.append(mr,Er),Br=mr.shared.context;return Er.set(Br,"."+If,fr[2]),Er.set(Br,"."+Yu,fr[3]),fr})}return{viewport:Lr,scissor_box:pr(Ki)}}function Po(Tt,_t){var Nt=Tt.static;if("string"==typeof Nt[Ia]&&"string"==typeof Nt[to]){if(Object.keys(_t.dynamic).length>0)return null;var dr=_t.static,pr=Object.keys(dr);if(pr.length>0&&"number"==typeof dr[pr[0]]){for(var Lr=[],Tr=0;Tr<pr.length;++Tr)Lr.push([0|dr[pr[Tr]],pr[Tr]]);return Lr}}return null}function As(Tt,_t,Nt){var rr=Tt.static,dr=Tt.dynamic;function pr(fr){if(fr in rr){var Br=wr.id(rr[fr]),$r=qr(function(){return Br});return $r.id=Br,$r}if(fr in dr){var ln=dr[fr];return en(ln,function(zn,En){var Nn=zn.invoke(En,ln);return En.def(zn.shared.strings,".id(",Nn,")")})}return null}var Er,Lr=pr(Ia),Tr=pr(to),mr=null;return Jr(Lr)&&Jr(Tr)?(mr=Qn.program(Tr.id,Lr.id,null,Nt),Er=qr(function(fr,Br){return fr.link(mr)})):Er=new Gr(Lr&&Lr.thisDep||Tr&&Tr.thisDep,Lr&&Lr.contextDep||Tr&&Tr.contextDep,Lr&&Lr.propDep||Tr&&Tr.propDep,function(fr,Br){var ln,$r=fr.shared.shader;ln=Lr?Lr.append(fr,Br):Br.def($r,".",Ia);var En=$r+".program("+(Tr?Tr.append(fr,Br):Br.def($r,".",to))+","+ln;return Br.def(En+")")}),{frag:Lr,vert:Tr,progVar:Er,program:mr}}function Gi(Tt,_t){var Nt=Tt.static,rr=Tt.dynamic,dr={},pr=!1;function Lr(){if(cl in Nt){var aa=Nt[cl];return null!==aa&&null===wa.getVAO(aa)&&(aa=wa.createVAO(aa)),pr=!0,dr.vao=aa,qr(function(Zn){var Yn=wa.getVAO(aa);return Yn?Zn.link(Yn):"null"})}if(cl in rr){pr=!0;var On=rr[cl];return en(On,function(Zn,Yn){var ua=Zn.invoke(Yn,On);return Yn.def(Zn.shared.vao+".getVAO("+ua+")")})}return null}var Tr=Lr(),mr=!1;function Er(){if(Ri in Nt){var aa=Nt[Ri];if(dr.elements=aa,sn(aa)){var On=dr.elements=xn.create(aa,!0);aa=xn.getElements(On),mr=!0}else aa&&(aa=xn.getElements(aa),mr=!0);var Zn=qr(function(ua,_a){if(aa){var Ci=ua.link(aa);return ua.ELEMENTS=Ci,Ci}return ua.ELEMENTS=null,null});return Zn.value=aa,Zn}if(Ri in rr){mr=!0;var Yn=rr[Ri];return en(Yn,function(ua,_a){var Ci=ua.shared,Ei=Ci.isBufferArgs,qi=Ci.elements,di=ua.invoke(_a,Yn),Fi=_a.def("null"),ho=_a.def(Ei,"(",di,")"),Ko=ua.cond(ho).then(Fi,"=",qi,".createStream(",di,");").else(Fi,"=",qi,".getElements(",di,");");return _a.entry(Ko),_a.exit(ua.cond(ho).then(qi,".destroyStream(",Fi,");")),ua.ELEMENTS=Fi,Fi})}return pr?new Gr(Tr.thisDep,Tr.contextDep,Tr.propDep,function(ua,_a){return _a.def(ua.shared.vao+".currentVAO?"+ua.shared.elements+".getElements("+ua.shared.vao+".currentVAO.elements):null")}):null}var fr=Er();function Br(){if(Uo in Nt){var aa=Nt[Uo];return dr.primitive=aa,qr(function(Zn,Yn){return We[aa]})}if(Uo in rr){var On=rr[Uo];return en(On,function(Zn,Yn){var ua=Zn.constants.primTypes,_a=Zn.invoke(Yn,On);return Yn.def(ua,"[",_a,"]")})}return mr?Jr(fr)?fr.value?qr(function(Zn,Yn){return Yn.def(Zn.ELEMENTS,".primType")}):qr(function(){return lu}):new Gr(fr.thisDep,fr.contextDep,fr.propDep,function(Zn,Yn){var ua=Zn.ELEMENTS;return Yn.def(ua,"?",ua,".primType:",lu)}):pr?new Gr(Tr.thisDep,Tr.contextDep,Tr.propDep,function(Zn,Yn){return Yn.def(Zn.shared.vao+".currentVAO?"+Zn.shared.vao+".currentVAO.primitive:"+lu)}):null}function $r(aa,On){if(aa in Nt){var Zn=0|Nt[aa];return On?dr.offset=Zn:dr.instances=Zn,qr(function(ua,_a){return On&&(ua.OFFSET=Zn),Zn})}if(aa in rr){var Yn=rr[aa];return en(Yn,function(ua,_a){var Ci=ua.invoke(_a,Yn);return On&&(ua.OFFSET=Ci),Ci})}if(On){if(mr)return qr(function(ua,_a){return ua.OFFSET=0,0});if(pr)return new Gr(Tr.thisDep,Tr.contextDep,Tr.propDep,function(ua,_a){return _a.def(ua.shared.vao+".currentVAO?"+ua.shared.vao+".currentVAO.offset:0")})}else if(pr)return new Gr(Tr.thisDep,Tr.contextDep,Tr.propDep,function(ua,_a){return _a.def(ua.shared.vao+".currentVAO?"+ua.shared.vao+".currentVAO.instances:-1")});return null}var ln=$r(os,!0);function zn(){if(jo in Nt){var aa=0|Nt[jo];return dr.count=aa,qr(function(){return aa})}if(jo in rr){var On=rr[jo];return en(On,function(_a,Ci){return _a.invoke(Ci,On)})}return mr?Jr(fr)?fr?ln?new Gr(ln.thisDep,ln.contextDep,ln.propDep,function(_a,Ci){return Ci.def(_a.ELEMENTS,".vertCount-",_a.OFFSET)}):qr(function(_a,Ci){return Ci.def(_a.ELEMENTS,".vertCount")}):qr(function(){return-1}):new Gr(fr.thisDep||ln.thisDep,fr.contextDep||ln.contextDep,fr.propDep||ln.propDep,function(_a,Ci){var Ei=_a.ELEMENTS;return _a.OFFSET?Ci.def(Ei,"?",Ei,".vertCount-",_a.OFFSET,":-1"):Ci.def(Ei,"?",Ei,".vertCount:-1")}):pr?new Gr(Tr.thisDep,Tr.contextDep,Tr.propDep,function(_a,Ci){return Ci.def(_a.shared.vao,".currentVAO?",_a.shared.vao,".currentVAO.count:-1")}):null}var En=Br(),Nn=zn(),ya=$r(Bl,!1);return{elements:fr,primitive:En,count:Nn,instances:ya,offset:ln,vao:Tr,vaoActive:pr,elementsActive:mr,static:dr}}function hs(Tt,_t){var Nt=Tt.static,rr=Tt.dynamic,dr={};return Kn.forEach(function(pr){var Lr=Pa(pr);function Tr(mr,Er){if(pr in Nt){var fr=mr(Nt[pr]);dr[Lr]=qr(function(){return fr})}else if(pr in rr){var Br=rr[pr];dr[Lr]=en(Br,function($r,ln){return Er($r,ln,$r.invoke(ln,Br))})}}switch(pr){case _n:case yr:case kt:case pa:case un:case Zi:case Qa:case ii:case oi:case Wn:return Tr(function(mr){return mr},function(mr,Er,fr){return fr});case fn:return Tr(function(mr){return Rr[mr]},function(mr,Er,fr){var Br=mr.constants.compareFuncs;return Er.def(Br,"[",fr,"]")});case Dn:return Tr(function(mr){return mr},function(mr,Er,fr){return[Er.def("+",fr,"[0]"),Er.def("+",fr,"[1]")]});case Zr:return Tr(function(mr){var Er="srcRGB"in mr?mr.srcRGB:mr.src,fr="srcAlpha"in mr?mr.srcAlpha:mr.src,Br="dstRGB"in mr?mr.dstRGB:mr.dst,$r="dstAlpha"in mr?mr.dstAlpha:mr.dst;return[ir[Er],ir[Br],ir[fr],ir[$r]]},function(mr,Er,fr){var Br=mr.constants.blendFuncs;function $r(On,Zn){return Er.def('"',On,Zn,'" in ',fr,"?",fr,".",On,Zn,":",fr,".",On)}var ln=$r("src","RGB"),zn=$r("dst","RGB"),En=Er.def(Br,"[",ln,"]"),Nn=Er.def(Br,"[",$r("src","Alpha"),"]");return[En,Er.def(Br,"[",zn,"]"),Nn,Er.def(Br,"[",$r("dst","Alpha"),"]")]});case Mr:return Tr(function(mr){return"string"==typeof mr?[$n[mr],$n[mr]]:"object"==typeof mr?[$n[mr.rgb],$n[mr.alpha]]:void 0},function(mr,Er,fr){var Br=mr.constants.blendEquations,$r=Er.def(),ln=Er.def(),zn=mr.cond("typeof ",fr,'==="string"');return zn.then($r,"=",ln,"=",Br,"[",fr,"];"),zn.else($r,"=",Br,"[",fr,".rgb];",ln,"=",Br,"[",fr,".alpha];"),Er(zn),[$r,ln]});case er:return Tr(function(mr){return b(4,function(Er){return+mr[Er]})},function(mr,Er,fr){return b(4,function(Br){return Er.def("+",fr,"[",Br,"]")})});case ti:return Tr(function(mr){return 0|mr},function(mr,Er,fr){return Er.def(fr,"|0")});case pi:return Tr(function(mr){var Er=mr.cmp||"keep",fr=mr.ref||0,Br="mask"in mr?mr.mask:-1;return[Rr[Er],fr,Br]},function(mr,Er,fr){var Br=mr.constants.compareFuncs;return[Er.def('"cmp" in ',fr,"?",Br,"[",fr,".cmp]",":",Ue),Er.def(fr,".ref|0"),Er.def('"mask" in ',fr,"?",fr,".mask|0:-1")]});case Hi:case no:return Tr(function(mr){var Er=mr.fail||"keep",fr=mr.zfail||"keep",Br=mr.zpass||"keep";return[pr===no?ns:Wa,Dr[Er],Dr[fr],Dr[Br]]},function(mr,Er,fr){var Br=mr.constants.stencilOps;function $r(ln){return Er.def('"',ln,'" in ',fr,"?",Br,"[",fr,".",ln,"]:",Ue)}return[pr===no?ns:Wa,$r("fail"),$r("zfail"),$r("zpass")]});case ja:return Tr(function(mr){return[0|mr.factor,0|mr.units]},function(mr,Er,fr){return[Er.def(fr,".factor|0"),Er.def(fr,".units|0")]});case Mn:return Tr(function(mr){var Er=0;return"front"===mr?Er=Wa:"back"===mr&&(Er=ns),Er},function(mr,Er,fr){return Er.def(fr,'==="front"?',Wa,":",ns)});case ta:return Tr(function(mr){return mr},function(mr,Er,fr){return fr});case Un:return Tr(function(mr){return tn[mr]},function(mr,Er,fr){return Er.def(fr+'==="cw"?'+Zu+":"+jf)});case yn:return Tr(function(mr){return mr.map(function(Er){return!!Er})},function(mr,Er,fr){return b(4,function(Br){return"!!"+fr+"["+Br+"]"})});case fa:return Tr(function(mr){return["value"in mr?mr.value:1,!!mr.invert]},function(mr,Er,fr){return[Er.def('"value" in ',fr,"?+",fr,".value:1"),Er.def("!!",fr,".invert")]})}}),dr}function mo(Tt,_t){var Nt=Tt.static,rr=Tt.dynamic,dr={};return Object.keys(Nt).forEach(function(pr){var Tr,Lr=Nt[pr];if("number"==typeof Lr||"boolean"==typeof Lr)Tr=qr(function(){return Lr});else if("function"==typeof Lr){var mr=Lr._reglType;"texture2d"===mr||"textureCube"===mr?Tr=qr(function(Er){return Er.link(Lr)}):("framebuffer"===mr||"framebufferCube"===mr)&&(Tr=qr(function(Er){return Er.link(Lr.color[0])}))}else Rn(Lr)&&(Tr=qr(function(Er){return Er.global.def("[",b(Lr.length,function(Br){return Lr[Br]}),"]")}));Tr.value=Lr,dr[pr]=Tr}),Object.keys(rr).forEach(function(pr){var Lr=rr[pr];dr[pr]=en(Lr,function(Tr,mr){return Tr.invoke(mr,Lr)})}),dr}function gs(Tt,_t){var Nt=Tt.static,rr=Tt.dynamic,dr={};return Object.keys(Nt).forEach(function(pr){var Lr=Nt[pr],Tr=wr.id(pr),mr=new kn;if(sn(Lr))mr.state=iu,mr.buffer=bn.getBuffer(bn.create(Lr,of,!1,!0)),mr.type=0;else{var Er=bn.getBuffer(Lr);if(Er)mr.state=iu,mr.buffer=Er,mr.type=0;else if("constant"in Lr){var fr=Lr.constant;mr.buffer="null",mr.state=ou,"number"==typeof fr?mr.x=fr:Lu.forEach(function(ya,aa){aa<fr.length&&(mr[ya]=fr[aa])})}else{Er=sn(Lr.buffer)?bn.getBuffer(bn.create(Lr.buffer,of,!1,!0)):bn.getBuffer(Lr.buffer);var Br=0|Lr.offset,$r=0|Lr.stride,ln=0|Lr.size,zn=!!Lr.normalized,En=0;"type"in Lr&&(En=Pt[Lr.type]);var Nn=0|Lr.divisor;mr.buffer=Er,mr.state=iu,mr.size=ln,mr.normalized=zn,mr.type=En||Er.dtype,mr.offset=Br,mr.stride=$r,mr.divisor=Nn}}dr[pr]=qr(function(ya,aa){var On=ya.attribCache;if(Tr in On)return On[Tr];var Zn={isStream:!1};return Object.keys(mr).forEach(function(Yn){Zn[Yn]=mr[Yn]}),mr.buffer&&(Zn.buffer=ya.link(mr.buffer),Zn.type=Zn.type||Zn.buffer+".dtype"),On[Tr]=Zn,Zn})}),Object.keys(rr).forEach(function(pr){var Lr=rr[pr];function Tr(mr,Er){var fr=mr.invoke(Er,Lr),Br=mr.shared,$r=mr.constants,ln=Br.isBufferArgs,zn=Br.buffer,En={isStream:Er.def(!1)},Nn=new kn;Nn.state=iu,Object.keys(Nn).forEach(function(Zn){En[Zn]=Er.def(""+Nn[Zn])});var ya=En.buffer,aa=En.type;function On(Zn){Er(En[Zn],"=",fr,".",Zn,"|0;")}return Er("if(",ln,"(",fr,")){",En.isStream,"=true;",ya,"=",zn,".createStream(",of,",",fr,");",aa,"=",ya,".dtype;","}else{",ya,"=",zn,".getBuffer(",fr,");","if(",ya,"){",aa,"=",ya,".dtype;",'}else if("constant" in ',fr,"){",En.state,"=",ou,";","if(typeof "+fr+'.constant === "number"){',En[Lu[0]],"=",fr,".constant;",Lu.slice(1).map(function(Zn){return En[Zn]}).join("="),"=0;","}else{",Lu.map(function(Zn,Yn){return En[Zn]+"="+fr+".constant.length>"+Yn+"?"+fr+".constant["+Yn+"]:0;"}).join(""),"}}else{","if(",ln,"(",fr,".buffer)){",ya,"=",zn,".createStream(",of,",",fr,".buffer);","}else{",ya,"=",zn,".getBuffer(",fr,".buffer);","}",aa,'="type" in ',fr,"?",$r.glTypes,"[",fr,".type]:",ya,".dtype;",En.normalized,"=!!",fr,".normalized;"),On("size"),On("offset"),On("stride"),On("divisor"),Er("}}"),Er.exit("if(",En.isStream,"){",zn,".destroyStream(",ya,");","}"),En}dr[pr]=en(Lr,Tr)}),dr}function hl(Tt){var _t=Tt.static,Nt=Tt.dynamic,rr={};return Object.keys(_t).forEach(function(dr){var pr=_t[dr];rr[dr]=qr(function(Lr,Tr){return"number"==typeof pr||"boolean"==typeof pr?""+pr:Lr.link(pr)})}),Object.keys(Nt).forEach(function(dr){var pr=Nt[dr];rr[dr]=en(pr,function(Lr,Tr){return Lr.invoke(Tr,pr)})}),rr}function Al(Tt,_t,Nt,rr,dr){Tt.static,Tt.dynamic;var Tr=Po(Tt,_t),mr=wi(Tt,dr),Er=ki(Tt,mr,dr),fr=Gi(Tt,dr),Br=hs(Tt,dr),$r=As(Tt,dr,Tr);function ln(On){var Zn=Er[On];Zn&&(Br[On]=Zn)}ln(mi),ln(Pa(Ki));var zn=Object.keys(Br).length>0,En={framebuffer:mr,draw:fr,shader:$r,state:Br,dirty:zn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(En.profile=gi(Tt,dr),En.uniforms=mo(Nt,dr),En.drawVAO=En.scopeVAO=fr.vao,!En.drawVAO&&$r.program&&!Tr&&Nr.angle_instanced_arrays&&fr.static.elements){var Nn=!0,ya=$r.program.attributes.map(function(On){var Zn=_t.static[On];return Nn=Nn&&!!Zn,Zn});if(Nn&&ya.length>0){var aa=wa.getVAO(wa.createVAO({attributes:ya,elements:fr.static.elements}));En.drawVAO=new Gr(null,null,null,function(On,Zn){return On.link(aa)}),En.useVAO=!0}}return Tr?En.useVAO=!0:En.attributes=gs(_t,dr),En.context=hl(rr,dr),En}function Io(Tt,_t,Nt){var dr=Tt.shared.context,pr=Tt.scope();Object.keys(Nt).forEach(function(Lr){_t.save(dr,"."+Lr);var mr=Nt[Lr].append(Tt,_t);Array.isArray(mr)?pr(dr,".",Lr,"=[",mr.join(),"];"):pr(dr,".",Lr,"=",mr,";")}),_t(pr)}function vs(Tt,_t,Nt,rr){var Tr,dr=Tt.shared,pr=dr.gl,Lr=dr.framebuffer;jn&&(Tr=_t.def(dr.extensions,".webgl_draw_buffers"));var Br,mr=Tt.constants,Er=mr.drawBuffer,fr=mr.backBuffer;Br=Nt?Nt.append(Tt,_t):_t.def(Lr,".next"),rr||_t("if(",Br,"!==",Lr,".cur){"),_t("if(",Br,"){",pr,".bindFramebuffer(",Ot,",",Br,".framebuffer);"),jn&&_t(Tr,".drawBuffersWEBGL(",Er,"[",Br,".colorAttachments.length]);"),_t("}else{",pr,".bindFramebuffer(",Ot,",null);"),jn&&_t(Tr,".drawBuffersWEBGL(",fr,");"),_t("}",Lr,".cur=",Br,";"),rr||_t("}")}function Ss(Tt,_t,Nt){var rr=Tt.shared,dr=rr.gl,pr=Tt.current,Lr=Tt.next,Tr=rr.current,mr=rr.next,Er=Tt.cond(Tr,".dirty");Kn.forEach(function(fr){var $r,ln,Br=Pa(fr);if(!(Br in Nt.state))if(Br in Lr){$r=Lr[Br],ln=pr[Br];var zn=b(ga[Br].length,function(Nn){return Er.def($r,"[",Nn,"]")});Er(Tt.cond(zn.map(function(Nn,ya){return Nn+"!=="+ln+"["+ya+"]"}).join("||")).then(dr,".",Va[Br],"(",zn,");",zn.map(function(Nn,ya){return ln+"["+ya+"]="+Nn}).join(";"),";"))}else{$r=Er.def(mr,".",Br);var En=Tt.cond($r,"!==",Tr,".",Br);Er(En),Br in Hn?En(Tt.cond($r).then(dr,".enable(",Hn[Br],");").else(dr,".disable(",Hn[Br],");"),Tr,".",Br,"=",$r,";"):En(dr,".",Va[Br],"(",$r,");",Tr,".",Br,"=",$r,";")}}),0===Object.keys(Nt.state).length&&Er(Tr,".dirty=false;"),_t(Er)}function _i(Tt,_t,Nt,rr){var mr,dr=Tt.shared,pr=Tt.current,Lr=dr.current,Tr=dr.gl;_r(Object.keys(Nt)).forEach(function(Er){var fr=Nt[Er];if(!rr||rr(fr)){var Br=fr.append(Tt,_t);if(Hn[Er]){var $r=Hn[Er];Jr(fr)?(mr=Tt.link(Br,{stable:!0}),_t(Tt.cond(mr).then(Tr,".enable(",$r,");").else(Tr,".disable(",$r,");")),_t(Lr,".",Er,"=",mr,";")):(_t(Tt.cond(Br).then(Tr,".enable(",$r,");").else(Tr,".disable(",$r,");")),_t(Lr,".",Er,"=",Br,";"))}else if(Rn(Br)){var ln=pr[Er];_t(Tr,".",Va[Er],"(",Br,");",Br.map(function(zn,En){return ln+"["+En+"]="+zn}).join(";"),";")}else Jr(fr)?(mr=Tt.link(Br,{stable:!0}),_t(Tr,".",Va[Er],"(",mr,");",Lr,".",Er,"=",mr,";")):_t(Tr,".",Va[Er],"(",Br,");",Lr,".",Er,"=",Br,";")}})}function xo(Tt,_t){na&&(Tt.instancing=_t.def(Tt.shared.extensions,".angle_instanced_arrays"))}function Mi(Tt,_t,Nt,rr,dr){var Br,$r,Nn,pr=Tt.shared,Lr=Tt.stats,Tr=pr.current,mr=pr.timer,Er=Nt.profile;function fr(){return typeof performance>"u"?"Date.now()":"performance.now()"}function ln(On){On(Br=_t.def(),"=",fr(),";"),"string"==typeof dr?On(Lr,".count+=",dr,";"):On(Lr,".count++;"),ra&&(rr?On($r=_t.def(),"=",mr,".getNumPendingQueries();"):On(mr,".beginQuery(",Lr,");"))}function zn(On){On(Lr,".cpuTime+=",fr(),"-",Br,";"),ra&&(rr?On(mr,".pushScopeStats(",$r,",",mr,".getNumPendingQueries(),",Lr,");"):On(mr,".endQuery();"))}function En(On){var Zn=_t.def(Tr,".profile");_t(Tr,".profile=",On,";"),_t.exit(Tr,".profile=",Zn,";")}if(Er){if(Jr(Er))return void(Er.enable?(ln(_t),zn(_t.exit),En("true")):En("false"));En(Nn=Er.append(Tt,_t))}else Nn=_t.def(Tr,".profile");var ya=Tt.block();ln(ya),_t("if(",Nn,"){",ya,"}");var aa=Tt.block();zn(aa),_t.exit("if(",Nn,"){",aa,"}")}function fe(Tt,_t,Nt,rr,dr){var pr=Tt.shared;function Lr(mr){switch(mr){case lf:case bl:case Pu:return 2;case Xs:case lo:case wl:return 3;case Mo:case Vi:case uf:return 4;default:return 1}}function Tr(mr,Er,fr){var Br=pr.gl,$r=_t.def(mr,".location"),ln=_t.def(pr.attributes,"[",$r,"]"),zn=fr.state,En=fr.buffer,Nn=[fr.x,fr.y,fr.z,fr.w],ya=["buffer","normalized","offset","stride"];function aa(){_t("if(!",ln,".buffer){",Br,".enableVertexAttribArray(",$r,");}");var Yn,Zn=fr.type;if(Yn=fr.size?_t.def(fr.size,"||",Er):Er,_t("if(",ln,".type!==",Zn,"||",ln,".size!==",Yn,"||",ya.map(function(_a){return ln+"."+_a+"!=="+fr[_a]}).join("||"),"){",Br,".bindBuffer(",of,",",En,".buffer);",Br,".vertexAttribPointer(",[$r,Yn,Zn,fr.normalized,fr.stride,fr.offset],");",ln,".type=",Zn,";",ln,".size=",Yn,";",ya.map(function(_a){return ln+"."+_a+"="+fr[_a]+";"}).join(""),"}"),na){var ua=fr.divisor;_t("if(",ln,".divisor!==",ua,"){",Tt.instancing,".vertexAttribDivisorANGLE(",[$r,ua],");",ln,".divisor=",ua,";}")}}function On(){_t("if(",ln,".buffer){",Br,".disableVertexAttribArray(",$r,");",ln,".buffer=null;","}if(",Lu.map(function(Zn,Yn){return ln+"."+Zn+"!=="+Nn[Yn]}).join("||"),"){",Br,".vertexAttrib4f(",$r,",",Nn,");",Lu.map(function(Zn,Yn){return ln+"."+Zn+"="+Nn[Yn]+";"}).join(""),"}")}zn===iu?aa():zn===ou?On():(_t("if(",zn,"===",iu,"){"),aa(),_t("}else{"),On(),_t("}"))}rr.forEach(function(mr){var Br,Er=mr.name,fr=Nt.attributes[Er];if(fr){if(!dr(fr))return;Br=fr.append(Tt,_t)}else{if(!dr(Qr))return;var $r=Tt.scopeAttrib(Er);Br={},Object.keys(new kn).forEach(function(ln){Br[ln]=_t.def($r,".",ln)})}Tr(Tt.link(mr),Lr(mr.info.type),Br)})}function G(Tt,_t,Nt,rr,dr,pr){for(var mr,Lr=Tt.shared,Tr=Lr.gl,Er=0;Er<rr.length;++Er){var Nn,fr=rr[Er],Br=fr.name,$r=fr.info.type,ln=Nt.uniforms[Br],En=Tt.link(fr)+".location";if(ln){if(!dr(ln))continue;if(Jr(ln)){var ya=ln.value;if($r===Gf||$r===su){var aa=Tt.link(ya._texture||ya.color[0]._texture);_t(Tr,".uniform1i(",En,",",aa+".bind());"),_t.exit(aa,".unbind();")}else if($r===Ul||$r===Tl||$r===Zs){var On=Tt.global.def("new Float32Array(["+Array.prototype.slice.call(ya)+"])"),Zn=2;$r===Tl?Zn=3:$r===Zs&&(Zn=4),_t(Tr,".uniformMatrix",Zn,"fv(",En,",false,",On,");")}else{switch($r){case Qf:mr="1f";break;case lf:mr="2f";break;case Xs:mr="3f";break;case Mo:mr="4f";break;case $i:case Jl:mr="1i";break;case Pu:case bl:mr="2i";break;case wl:case lo:mr="3i";break;case uf:case Vi:mr="4i"}_t(Tr,".uniform",mr,"(",En,",",Rn(ya)?Array.prototype.slice.call(ya):ya,");")}continue}Nn=ln.append(Tt,_t)}else{if(!dr(Qr))continue;Nn=_t.def(Lr.uniforms,"[",wr.id(Br),"]")}$r===Gf?_t("if(",Nn,"&&",Nn,'._reglType==="framebuffer"){',Nn,"=",Nn,".color[0];","}"):$r===su&&_t("if(",Nn,"&&",Nn,'._reglType==="framebufferCube"){',Nn,"=",Nn,".color[0];","}");var Yn=1;switch($r){case Gf:case su:var ua=_t.def(Nn,"._texture");_t(Tr,".uniform1i(",En,",",ua,".bind());"),_t.exit(ua,".unbind();");continue;case Jl:case $i:mr="1i";break;case bl:case Pu:mr="2i",Yn=2;break;case lo:case wl:mr="3i",Yn=3;break;case Vi:case uf:mr="4i",Yn=4;break;case Qf:mr="1f";break;case lf:mr="2f",Yn=2;break;case Xs:mr="3f",Yn=3;break;case Mo:mr="4f",Yn=4;break;case Ul:mr="Matrix2fv";break;case Tl:mr="Matrix3fv";break;case Zs:mr="Matrix4fv"}if("M"===mr.charAt(0)){_t(Tr,".uniform",mr,"(",En,",");var _a=Math.pow($r-Ul+2,2),Ci=Tt.global.def("new Float32Array(",_a,")");Array.isArray(Nn)?_t("false,(",b(_a,function(ho){return Ci+"["+ho+"]="+Nn[ho]}),",",Ci,")"):_t("false,(Array.isArray(",Nn,")||",Nn," instanceof Float32Array)?",Nn,":(",b(_a,function(ho){return Ci+"["+ho+"]="+Nn+"["+ho+"]"}),",",Ci,")"),_t(");")}else if(Yn>1){for(var Ei=[],qi=[],di=0;di<Yn;++di)Array.isArray(Nn)?qi.push(Nn[di]):qi.push(_t.def(Nn+"["+di+"]")),pr&&Ei.push(_t.def());pr&&_t("if(!",Tt.batchId,"||",Ei.map(function(ho,Ko){return ho+"!=="+qi[Ko]}).join("||"),"){",Ei.map(function(ho,Ko){return ho+"="+qi[Ko]+";"}).join("")),_t(Tr,".uniform",mr,"(",En,",",qi.join(","),");"),pr&&_t("}")}else{if(pr){var Fi=_t.def();_t("if(!",Tt.batchId,"||",Fi,"!==",Nn,"){",Fi,"=",Nn,";")}_t(Tr,".uniform",mr,"(",En,",",Nn,");"),pr&&_t("}")}}}function ce(Tt,_t,Nt,rr){var dr=Tt.shared,pr=dr.gl,Lr=dr.draw,Tr=rr.draw;function mr(){var ua,Yn=Tr.elements,_a=_t;return Yn?((Yn.contextDep&&rr.contextDynamic||Yn.propDep)&&(_a=Nt),ua=Yn.append(Tt,_a),Tr.elementsActive&&_a("if("+ua+")"+pr+".bindBuffer("+sf+","+ua+".buffer.buffer);")):(ua=_a.def(),_a(ua,"=",Lr,".",Ri,";","if(",ua,"){",pr,".bindBuffer(",sf,",",ua,".buffer.buffer);}","else if(",dr.vao,".currentVAO){",ua,"=",Tt.shared.elements+".getElements("+dr.vao,".currentVAO.elements);",ka?"":"if("+ua+")"+pr+".bindBuffer("+sf+","+ua+".buffer.buffer);","}")),ua}function Er(){var ua,Yn=Tr.count,_a=_t;return Yn?((Yn.contextDep&&rr.contextDynamic||Yn.propDep)&&(_a=Nt),ua=Yn.append(Tt,_a)):ua=_a.def(Lr,".",jo),ua}var fr=mr();function Br(Yn){var ua=Tr[Yn];return ua?ua.contextDep&&rr.contextDynamic||ua.propDep?ua.append(Tt,Nt):ua.append(Tt,_t):_t.def(Lr,".",Yn)}var En,Nn,$r=Br(Uo),ln=Br(os),zn=Er();if("number"==typeof zn){if(0===zn)return}else Nt("if(",zn,"){"),Nt.exit("}");na&&(En=Br(Bl),Nn=Tt.instancing);var ya=fr+".type",aa=Tr.elements&&Jr(Tr.elements)&&!Tr.vaoActive;function On(){function Yn(){Nt(Nn,".drawElementsInstancedANGLE(",[$r,zn,ya,ln+"<<(("+ya+"-"+bf+")>>1)",En],");")}function ua(){Nt(Nn,".drawArraysInstancedANGLE(",[$r,ln,zn,En],");")}fr&&"null"!==fr?aa?Yn():(Nt("if(",fr,"){"),Yn(),Nt("}else{"),ua(),Nt("}")):ua()}function Zn(){function Yn(){Nt(pr+".drawElements("+[$r,zn,ya,ln+"<<(("+ya+"-"+bf+")>>1)"]+");")}function ua(){Nt(pr+".drawArrays("+[$r,ln,zn]+");")}fr&&"null"!==fr?aa?Yn():(Nt("if(",fr,"){"),Yn(),Nt("}else{"),ua(),Nt("}")):ua()}na&&("number"!=typeof En||En>=0)?"string"==typeof En?(Nt("if(",En,">0){"),On(),Nt("}else if(",En,"<0){"),Zn(),Nt("}")):On():Zn()}function Z(Tt,_t,Nt,rr,dr){var pr=$a(),Lr=pr.proc("body",dr);return na&&(pr.instancing=Lr.def(pr.shared.extensions,".angle_instanced_arrays")),Tt(pr,Lr,Nt,rr),pr.compile().body}function ve(Tt,_t,Nt,rr){xo(Tt,_t),Nt.useVAO?Nt.drawVAO?_t(Tt.shared.vao,".setVAO(",Nt.drawVAO.append(Tt,_t),");"):_t(Tt.shared.vao,".setVAO(",Tt.shared.vao,".targetVAO);"):(_t(Tt.shared.vao,".setVAO(null);"),fe(Tt,_t,Nt,rr.attributes,function(){return!0})),G(Tt,_t,Nt,rr.uniforms,function(){return!0},!1),ce(Tt,_t,_t,Nt)}function Ee(Tt,_t){var Nt=Tt.proc("draw",1);xo(Tt,Nt),Io(Tt,Nt,_t.context),vs(Tt,Nt,_t.framebuffer),Ss(Tt,Nt,_t),_i(Tt,Nt,_t.state),Mi(Tt,Nt,_t,!1,!0);var rr=_t.shader.progVar.append(Tt,Nt);if(Nt(Tt.shared.gl,".useProgram(",rr,".program);"),_t.shader.program)ve(Tt,Nt,_t,_t.shader.program);else{Nt(Tt.shared.vao,".setVAO(null);");var dr=Tt.global.def("{}"),pr=Nt.def(rr,".id"),Lr=Nt.def(dr,"[",pr,"]");Nt(Tt.cond(Lr).then(Lr,".call(this,a0);").else(Lr,"=",dr,"[",pr,"]=",Tt.link(function(Tr){return Z(ve,Tt,_t,Tr,1)}),"(",rr,");",Lr,".call(this,a0);"))}Object.keys(_t.state).length>0&&Nt(Tt.shared.current,".dirty=true;"),Tt.shared.vao&&Nt(Tt.shared.vao,".setVAO(null);")}function Ae(Tt,_t,Nt,rr){function dr(){return!0}Tt.batchId="a1",xo(Tt,_t),fe(Tt,_t,Nt,rr.attributes,dr),G(Tt,_t,Nt,rr.uniforms,dr,!1),ce(Tt,_t,_t,Nt)}function Ge(Tt,_t,Nt,rr){xo(Tt,_t);var dr=Nt.contextDep,pr=_t.def(),Lr="a0",Tr="a1",mr=_t.def();Tt.shared.props=mr,Tt.batchId=pr;var Er=Tt.scope(),fr=Tt.scope();function Br(ya){return ya.contextDep&&dr||ya.propDep}function $r(ya){return!Br(ya)}if(_t(Er.entry,"for(",pr,"=0;",pr,"<",Tr,";++",pr,"){",mr,"=",Lr,"[",pr,"];",fr,"}",Er.exit),Nt.needsContext&&Io(Tt,fr,Nt.context),Nt.needsFramebuffer&&vs(Tt,fr,Nt.framebuffer),_i(Tt,fr,Nt.state,Br),Nt.profile&&Br(Nt.profile)&&Mi(Tt,fr,Nt,!1,!0),rr)Nt.useVAO?Nt.drawVAO?Br(Nt.drawVAO)?fr(Tt.shared.vao,".setVAO(",Nt.drawVAO.append(Tt,fr),");"):Er(Tt.shared.vao,".setVAO(",Nt.drawVAO.append(Tt,Er),");"):Er(Tt.shared.vao,".setVAO(",Tt.shared.vao,".targetVAO);"):(Er(Tt.shared.vao,".setVAO(null);"),fe(Tt,Er,Nt,rr.attributes,$r),fe(Tt,fr,Nt,rr.attributes,Br)),G(Tt,Er,Nt,rr.uniforms,$r,!1),G(Tt,fr,Nt,rr.uniforms,Br,!0),ce(Tt,Er,fr,Nt);else{var ln=Tt.global.def("{}"),zn=Nt.shader.progVar.append(Tt,fr),En=fr.def(zn,".id"),Nn=fr.def(ln,"[",En,"]");fr(Tt.shared.gl,".useProgram(",zn,".program);","if(!",Nn,"){",Nn,"=",ln,"[",En,"]=",Tt.link(function(ya){return Z(Ae,Tt,Nt,ya,2)}),"(",zn,");}",Nn,".call(this,a0[",pr,"],",pr,");")}}function ot(Tt,_t){var Nt=Tt.proc("batch",2);Tt.batchId="0",xo(Tt,Nt);var rr=!1,dr=!0;Object.keys(_t.context).forEach(function(ln){rr=rr||_t.context[ln].propDep}),rr||(Io(Tt,Nt,_t.context),dr=!1);var pr=_t.framebuffer,Lr=!1;function Tr(ln){return ln.contextDep&&rr||ln.propDep}pr?(pr.propDep?rr=Lr=!0:pr.contextDep&&rr&&(Lr=!0),Lr||vs(Tt,Nt,pr)):vs(Tt,Nt,null),_t.state.viewport&&_t.state.viewport.propDep&&(rr=!0),Ss(Tt,Nt,_t),_i(Tt,Nt,_t.state,function(ln){return!Tr(ln)}),(!_t.profile||!Tr(_t.profile))&&Mi(Tt,Nt,_t,!1,"a1"),_t.contextDep=rr,_t.needsContext=dr,_t.needsFramebuffer=Lr;var mr=_t.shader.progVar;if(mr.contextDep&&rr||mr.propDep)Ge(Tt,Nt,_t,null);else{var Er=mr.append(Tt,Nt);if(Nt(Tt.shared.gl,".useProgram(",Er,".program);"),_t.shader.program)Ge(Tt,Nt,_t,_t.shader.program);else{Nt(Tt.shared.vao,".setVAO(null);");var fr=Tt.global.def("{}"),Br=Nt.def(Er,".id"),$r=Nt.def(fr,"[",Br,"]");Nt(Tt.cond($r).then($r,".call(this,a0,a1);").else($r,"=",fr,"[",Br,"]=",Tt.link(function(ln){return Z(Ge,Tt,_t,ln,2)}),"(",Er,");",$r,".call(this,a0,a1);"))}}Object.keys(_t.state).length>0&&Nt(Tt.shared.current,".dirty=true;"),Tt.shared.vao&&Nt(Tt.shared.vao,".setVAO(null);")}function xt(Tt,_t){var Nt=Tt.proc("scope",3);Tt.batchId="a2";var rr=Tt.shared,dr=rr.current;if(Io(Tt,Nt,_t.context),_t.framebuffer&&_t.framebuffer.append(Tt,Nt),_r(Object.keys(_t.state)).forEach(function(Tr){var mr=_t.state[Tr],Er=mr.append(Tt,Nt);Rn(Er)?Er.forEach(function(fr,Br){Oa(fr)?Nt.set(Tt.next[Tr],"["+Br+"]",fr):Nt.set(Tt.next[Tr],"["+Br+"]",Tt.link(fr,{stable:!0}))}):Jr(mr)?Nt.set(rr.next,"."+Tr,Tt.link(Er,{stable:!0})):Nt.set(rr.next,"."+Tr,Er)}),Mi(Tt,Nt,_t,!0,!0),[Ri,os,jo,Bl,Uo].forEach(function(Tr){var mr=_t.draw[Tr];if(mr){var Er=mr.append(Tt,Nt);Oa(Er)?Nt.set(rr.draw,"."+Tr,Er):Nt.set(rr.draw,"."+Tr,Tt.link(Er),{stable:!0})}}),Object.keys(_t.uniforms).forEach(function(Tr){var mr=_t.uniforms[Tr].append(Tt,Nt);Array.isArray(mr)&&(mr="["+mr.map(function(Er){return Oa(Er)?Er:Tt.link(Er,{stable:!0})})+"]"),Nt.set(rr.uniforms,"["+Tt.link(wr.id(Tr),{stable:!0})+"]",mr)}),Object.keys(_t.attributes).forEach(function(Tr){var mr=_t.attributes[Tr].append(Tt,Nt),Er=Tt.scopeAttrib(Tr);Object.keys(new kn).forEach(function(fr){Nt.set(Er,"."+fr,mr[fr])})}),_t.scopeVAO){var pr=_t.scopeVAO.append(Tt,Nt);Oa(pr)?Nt.set(rr.vao,".targetVAO",pr):Nt.set(rr.vao,".targetVAO",Tt.link(pr,{stable:!0}))}function Lr(Tr){var mr=_t.shader[Tr];if(mr){var Er=mr.append(Tt,Nt);Oa(Er)?Nt.set(rr.shader,"."+Tr,Er):Nt.set(rr.shader,"."+Tr,Tt.link(Er,{stable:!0}))}}Lr(to),Lr(Ia),Object.keys(_t.state).length>0&&(Nt(dr,".dirty=true;"),Nt.exit(dr,".dirty=true;")),Nt("a1(",Tt.shared.context,",a0,",Tt.batchId,");")}function Wt(Tt){if("object"==typeof Tt&&!Rn(Tt)){for(var _t=Object.keys(Tt),Nt=0;Nt<_t.length;++Nt)if(v.isDynamic(Tt[_t[Nt]]))return!0;return!1}}function ar(Tt,_t,Nt){var rr=_t.static[Nt];if(rr&&Wt(rr)){var dr=Tt.global,pr=Object.keys(rr),Lr=!1,Tr=!1,mr=!1,Er=Tt.global.def("{}");pr.forEach(function(Br){var $r=rr[Br];if(v.isDynamic($r)){"function"==typeof $r&&($r=rr[Br]=v.unbox($r));var ln=en($r,null);Lr=Lr||ln.thisDep,mr=mr||ln.propDep,Tr=Tr||ln.contextDep}else{switch(dr(Er,".",Br,"="),typeof $r){case"number":dr($r);break;case"string":dr('"',$r,'"');break;case"object":Array.isArray($r)&&dr("[",$r.join(),"]");break;default:dr(Tt.link($r))}dr(";")}}),_t.dynamic[Nt]=new v.DynamicVariable(Nl,{thisDep:Lr,contextDep:Tr,propDep:mr,ref:Er,append:fr}),delete _t.static[Nt]}function fr(Br,$r){pr.forEach(function(ln){var zn=rr[ln];if(v.isDynamic(zn)){var En=Br.invoke($r,zn);$r(Er,".",ln,"=",En,";")}})}}function Yt(Tt,_t,Nt,rr,dr){var pr=$a();pr.stats=pr.link(dr),Object.keys(_t.static).forEach(function(Tr){ar(pr,_t,Tr)}),Rf.forEach(function(Tr){ar(pr,Tt,Tr)});var Lr=Al(Tt,_t,Nt,rr,pr);return Lr.shader.program&&(Lr.shader.program.attributes.sort(function(Tr,mr){return Tr.name<mr.name?-1:1}),Lr.shader.program.uniforms.sort(function(Tr,mr){return Tr.name<mr.name?-1:1})),Ee(pr,Lr),xt(pr,Lr),ot(pr,Lr),K(pr.compile(),{destroy:function(){Lr.shader.program.destroy()}})}return{next:ni,current:ga,procs:function(){var Tt=$a(),_t=Tt.proc("poll"),Nt=Tt.proc("refresh"),rr=Tt.block();_t(rr),Nt(rr);var mr,dr=Tt.shared,pr=dr.gl,Lr=dr.next,Tr=dr.current;rr(Tr,".dirty=false;"),vs(Tt,_t),vs(Tt,Nt,null,!0),na&&(mr=Tt.link(na)),Nr.oes_vertex_array_object&&Nt(Tt.link(Nr.oes_vertex_array_object),".bindVertexArrayOES(null);");var Er=Nt.def(dr.attributes),fr=Nt.def(0),Br=Tt.cond(fr,".buffer");Br.then(pr,".enableVertexAttribArray(i);",pr,".bindBuffer(",of,",",fr,".buffer.buffer);",pr,".vertexAttribPointer(i,",fr,".size,",fr,".type,",fr,".normalized,",fr,".stride,",fr,".offset);").else(pr,".disableVertexAttribArray(i);",pr,".vertexAttrib4f(i,",fr,".x,",fr,".y,",fr,".z,",fr,".w);",fr,".buffer=null;");var $r=Tt.link(vn.maxAttributes,{stable:!0});return Nt("for(var i=0;i<",$r,";++i){",fr,"=",Er,"[i];",Br,"}"),na&&Nt("for(var i=0;i<",$r,";++i){",mr,".vertexAttribDivisorANGLE(i,",Er,"[i].divisor);","}"),Nt(Tt.shared.vao,".currentVAO=null;",Tt.shared.vao,".setVAO(",Tt.shared.vao,".targetVAO);"),Object.keys(Hn).forEach(function(ln){var zn=Hn[ln],En=rr.def(Lr,".",ln),Nn=Tt.block();Nn("if(",En,"){",pr,".enable(",zn,")}else{",pr,".disable(",zn,")}",Tr,".",ln,"=",En,";"),Nt(Nn),_t("if(",En,"!==",Tr,".",ln,"){",Nn,"}")}),Object.keys(Va).forEach(function(ln){var Nn,ya,zn=Va[ln],En=ga[ln],aa=Tt.block();if(aa(pr,".",zn,"("),Rn(En)){var On=En.length;Nn=Tt.global.def(Lr,".",ln),ya=Tt.global.def(Tr,".",ln),aa(b(On,function(Zn){return Nn+"["+Zn+"]"}),");",b(On,function(Zn){return ya+"["+Zn+"]="+Nn+"["+Zn+"];"}).join("")),_t("if(",b(On,function(Zn){return Nn+"["+Zn+"]!=="+ya+"["+Zn+"]"}).join("||"),"){",aa,"}")}else Nn=rr.def(Lr,".",ln),ya=rr.def(Tr,".",ln),aa(Nn,");",Tr,".",ln,"=",Nn,";"),_t("if(",Nn,"!==",ya,"){",aa,"}");Nt(aa)}),Tt.compile()}(),compile:Yt}}function Aa(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var La=34918,xa=34919,Ya=35007,Ga=function(Et,wr){if(!wr.ext_disjoint_timer_query)return null;var Nr=[];function vn(){return Nr.pop()||wr.ext_disjoint_timer_query.createQueryEXT()}function bn($n){Nr.push($n)}var xn=[];function Tn($n){var na=vn();wr.ext_disjoint_timer_query.beginQueryEXT(Ya,na),xn.push(na),ra(xn.length-1,xn.length,$n)}function Gn(){wr.ext_disjoint_timer_query.endQueryEXT(Ya)}function ba(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var wa=[];function Qn(){return wa.pop()||new ba}function Fa($n){wa.push($n)}var ea=[];function ra($n,na,jn){var ka=Qn();ka.startQueryIndex=$n,ka.endQueryIndex=na,ka.sum=0,ka.stats=jn,ea.push(ka)}var Bn=[],dn=[];function kn(){var $n,na,jn=xn.length;if(0!==jn){dn.length=Math.max(dn.length,jn+1),Bn.length=Math.max(Bn.length,jn+1),Bn[0]=0,dn[0]=0;var ka=0;for($n=0,na=0;na<xn.length;++na){var ga=xn[na];wr.ext_disjoint_timer_query.getQueryObjectEXT(ga,xa)?(ka+=wr.ext_disjoint_timer_query.getQueryObjectEXT(ga,La),bn(ga)):xn[$n++]=ga,Bn[na+1]=ka,dn[na+1]=$n}for(xn.length=$n,$n=0,na=0;na<ea.length;++na){var ni=ea[na],Kn=ni.startQueryIndex,Hn=ni.endQueryIndex;ni.sum+=Bn[Hn]-Bn[Kn];var Va=dn[Kn],Pa=dn[Hn];Pa===Va?(ni.stats.gpuTime+=ni.sum/1e6,Fa(ni)):(ni.startQueryIndex=Va,ni.endQueryIndex=Pa,ea[$n++]=ni)}ea.length=$n}}return{beginQuery:Tn,endQuery:Gn,pushScopeStats:ra,update:kn,getNumPendingQueries:function(){return xn.length},clear:function(){Nr.push.apply(Nr,xn);for(var $n=0;$n<Nr.length;$n++)wr.ext_disjoint_timer_query.deleteQueryEXT(Nr[$n]);xn.length=0,Nr.length=0},restore:function(){xn.length=0,Nr.length=0}}},ui=16384,Za=256,Ha=1024,hi=34962,Yi="webglcontextlost",ai="webglcontextrestored",ia=1,vi=2,Si=3;function Pi(Et,wr){for(var Nr=0;Nr<Et.length;++Nr)if(Et[Nr]===wr)return Nr;return-1}function uo(Et){var wr=d(Et);if(!wr)return null;var Nr=wr.gl,vn=Nr.getContextAttributes(),xn=(Nr.isContextLost(),A(Nr,wr));if(!xn)return null;var Tn=l(),Gn=Aa(),ba=wr.cachedCode||{},wa=xn.extensions,Qn=Ga(Nr,wa),Fa=f(),ea=Nr.drawingBufferWidth,ra=Nr.drawingBufferHeight,Bn={tick:0,time:0,viewportWidth:ea,viewportHeight:ra,framebufferWidth:ea,framebufferHeight:ra,drawingBufferWidth:ea,drawingBufferHeight:ra,pixelRatio:wr.pixelRatio},dn={},kn={elements:null,primitive:4,count:-1,offset:0,instances:-1},$n=Bt(Nr,wa),na=sr(Nr,Gn,wr,ga),jn=an(Nr,wa,na,Gn),ka=yf(Nr,wa,$n,Gn,na,jn,kn);function ga(Z){return ka.destroyBuffer(Z)}var ni=xf(Nr,Tn,Gn,wr),Kn=Of(Nr,wa,$n,function(){Pa.procs.poll()},Bn,Gn,wr),Hn=al(Nr,wa,$n,Gn,wr),Va=gf(Nr,wa,$n,Kn,Hn,Gn),Pa=Vn(Nr,Tn,wa,$n,na,jn,Kn,Va,dn,ka,ni,kn,Bn,Qn,ba,wr),ca=cs(Nr,Va,Pa.procs.poll,Bn,vn,wa,$n),oa=Pa.next,Oa=Nr.canvas,li=[],xi=[],Da=[],$a=[wr.onDestroy],gi=null;function wi(){if(0===li.length)return Qn&&Qn.update(),void(gi=null);gi=p.next(wi),Ss();for(var Z=li.length-1;Z>=0;--Z){var ve=li[Z];ve&&ve(Bn,null,0)}Nr.flush(),Qn&&Qn.update()}function ki(){!gi&&li.length>0&&(gi=p.next(wi))}function Po(){gi&&(p.cancel(wi),gi=null)}function As(Z){Z.preventDefault(),Po(),xi.forEach(function(ve){ve()})}function Gi(Z){Nr.getError(),xn.restore(),ni.restore(),na.restore(),Kn.restore(),Hn.restore(),Va.restore(),ka.restore(),Qn&&Qn.restore(),Pa.procs.refresh(),ki(),Da.forEach(function(ve){ve()})}function hs(){li.length=0,Po(),Oa&&(Oa.removeEventListener(Yi,As),Oa.removeEventListener(ai,Gi)),ni.clear(),Va.clear(),Hn.clear(),ka.clear(),Kn.clear(),jn.clear(),na.clear(),Qn&&Qn.clear(),$a.forEach(function(Z){Z()})}function mo(Z){function ve(pr){var Lr=K({},pr);function Tr(mr){if(mr in Lr){var Er=Lr[mr];delete Lr[mr],Object.keys(Er).forEach(function(fr){Lr[mr+"."+fr]=Er[fr]})}}return delete Lr.uniforms,delete Lr.attributes,delete Lr.context,delete Lr.vao,"stencil"in Lr&&Lr.stencil.op&&(Lr.stencil.opBack=Lr.stencil.opFront=Lr.stencil.op,delete Lr.stencil.op),Tr("blend"),Tr("depth"),Tr("cull"),Tr("stencil"),Tr("polygonOffset"),Tr("scissor"),Tr("sample"),"vao"in pr&&(Lr.vao=pr.vao),Lr}function Ee(pr,Lr){var Tr={},mr={};return Object.keys(pr).forEach(function(Er){var fr=pr[Er];if(v.isDynamic(fr))mr[Er]=v.unbox(fr,Er);else{if(Lr&&Array.isArray(fr))for(var Br=0;Br<fr.length;++Br)if(v.isDynamic(fr[Br]))return void(mr[Er]=v.unbox(fr,Er));Tr[Er]=fr}}),{dynamic:mr,static:Tr}}var Ae=Ee(Z.context||{},!0),Ge=Ee(Z.uniforms||{},!0),ot=Ee(Z.attributes||{},!1),xt=Ee(ve(Z),!1),Wt={gpuTime:0,cpuTime:0,count:0},ar=Pa.compile(xt,ot,Ge,Ae,Wt),Yt=ar.draw,Tt=ar.batch,_t=ar.scope,Nt=[];function rr(pr){for(;Nt.length<pr;)Nt.push(null);return Nt}function dr(pr,Lr){var Tr;if("function"==typeof pr)return _t.call(this,null,pr,0);if("function"==typeof Lr)if("number"==typeof pr)for(Tr=0;Tr<pr;++Tr)_t.call(this,null,Lr,Tr);else{if(!Array.isArray(pr))return _t.call(this,pr,Lr,0);for(Tr=0;Tr<pr.length;++Tr)_t.call(this,pr[Tr],Lr,Tr)}else if("number"==typeof pr){if(pr>0)return Tt.call(this,rr(0|pr),0|pr)}else{if(!Array.isArray(pr))return Yt.call(this,pr);if(pr.length)return Tt.call(this,pr,pr.length)}}return K(dr,{stats:Wt,destroy:function(){ar.destroy()}})}Oa&&(Oa.addEventListener(Yi,As,!1),Oa.addEventListener(ai,Gi,!1));var gs=Va.setFBO=mo({framebuffer:v.define.call(null,ia,"framebuffer")});function hl(Z,ve){var Ee=0;Pa.procs.poll();var Ae=ve.color;Ae&&(Nr.clearColor(+Ae[0]||0,+Ae[1]||0,+Ae[2]||0,+Ae[3]||0),Ee|=ui),"depth"in ve&&(Nr.clearDepth(+ve.depth),Ee|=Za),"stencil"in ve&&(Nr.clearStencil(0|ve.stencil),Ee|=Ha),Nr.clear(Ee)}function Al(Z){if("framebuffer"in Z)if(Z.framebuffer&&"framebufferCube"===Z.framebuffer_reglType)for(var ve=0;ve<6;++ve)gs(K({framebuffer:Z.framebuffer.faces[ve]},Z),hl);else gs(Z,hl);else hl(null,Z)}function Io(Z){function ve(){var Ee=Pi(li,Z);function Ae(){var Ge=Pi(li,Ae);li[Ge]=li[li.length-1],li.length-=1,li.length<=0&&Po()}li[Ee]=Ae}return li.push(Z),ki(),{cancel:ve}}function vs(){var Z=oa.viewport,ve=oa.scissor_box;Z[0]=Z[1]=ve[0]=ve[1]=0,Bn.viewportWidth=Bn.framebufferWidth=Bn.drawingBufferWidth=Z[2]=ve[2]=Nr.drawingBufferWidth,Bn.viewportHeight=Bn.framebufferHeight=Bn.drawingBufferHeight=Z[3]=ve[3]=Nr.drawingBufferHeight}function Ss(){Bn.tick+=1,Bn.time=xo(),vs(),Pa.procs.poll()}function _i(){Kn.refresh(),vs(),Pa.procs.refresh(),Qn&&Qn.update()}function xo(){return(f()-Fa)/1e3}function Mi(Z,ve){var Ee;switch(Z){case"frame":return Io(ve);case"lost":Ee=xi;break;case"restore":Ee=Da;break;case"destroy":Ee=$a}return Ee.push(ve),{cancel:function(){for(var Ae=0;Ae<Ee.length;++Ae)if(Ee[Ae]===ve)return Ee[Ae]=Ee[Ee.length-1],void Ee.pop()}}}function fe(){return ba}function G(Z){Object.entries(Z).forEach(function(ve){ba[ve[0]]=ve[1]})}_i();var ce=K(mo,{clear:Al,prop:v.define.bind(null,ia),context:v.define.bind(null,vi),this:v.define.bind(null,Si),draw:mo({}),buffer:function(Z){return na.create(Z,hi,!1,!1)},elements:function(Z){return jn.create(Z,!1)},texture:Kn.create2D,cube:Kn.createCube,renderbuffer:Hn.create,framebuffer:Va.create,framebufferCube:Va.createCube,vao:ka.createVAO,attributes:vn,frame:Io,on:Mi,limits:$n,hasExtension:function(Z){return $n.extensions.indexOf(Z.toLowerCase())>=0},read:ca,destroy:hs,_gl:Nr,_refresh:_i,poll:function(){Ss(),Qn&&Qn.update()},now:xo,stats:Gn,getCachedCode:fe,preloadCachedCode:G});return wr.onDone(null,ce),ce}return uo}()},73502:($,K,e)=>{var M=e(94007),I=M.Buffer;function t(n,i){for(var u in n)i[u]=n[u]}function T(n,i,u){return I(n,i,u)}I.from&&I.alloc&&I.allocUnsafe&&I.allocUnsafeSlow?$.exports=M:(t(M,K),K.Buffer=T),T.prototype=Object.create(I.prototype),t(I,T),T.from=function(n,i,u){if("number"==typeof n)throw new TypeError("Argument must not be a number");return I(n,i,u)},T.alloc=function(n,i,u){if("number"!=typeof n)throw new TypeError("Argument must be a number");var a=I(n);return void 0!==i?"string"==typeof u?a.fill(i,u):a.fill(i):a.fill(0),a},T.allocUnsafe=function(n){if("number"!=typeof n)throw new TypeError("Argument must be a number");return I(n)},T.allocUnsafeSlow=function(n){if("number"!=typeof n)throw new TypeError("Argument must be a number");return M.SlowBuffer(n)}},9511:($,K,e)=>{"use strict";var M=e(95203),I=e(27484),t=e(77027)(),T=e(47378),n=M("%TypeError%"),i=M("%Math.floor%");$.exports=function(a,r){if("function"!=typeof a)throw new n("`fn` is not a function");if("number"!=typeof r||r<0||r>4294967295||i(r)!==r)throw new n("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],v=!0,p=!0;if("length"in a&&T){var f=T(a,"length");f&&!f.configurable&&(v=!1),f&&!f.writable&&(p=!1)}return(v||p||!o)&&(t?I(a,"length",r,!0,!0):I(a,"length",r)),a}},295:($,K,e)=>{$.exports=t;var M=e(59069).EventEmitter;function t(){M.call(this)}e(83894)(t,M),t.Readable=e(3154),t.Writable=e(20520),t.Duplex=e(41339),t.Transform=e(6025),t.PassThrough=e(56071),t.finished=e(67542),t.pipeline=e(90954),t.Stream=t,t.prototype.pipe=function(T,n){var i=this;function u(l){T.writable&&!1===T.write(l)&&i.pause&&i.pause()}function a(){i.readable&&i.resume&&i.resume()}i.on("data",u),T.on("drain",a),!T._isStdio&&(!n||!1!==n.end)&&(i.on("end",o),i.on("close",v));var r=!1;function o(){r||(r=!0,T.end())}function v(){r||(r=!0,"function"==typeof T.destroy&&T.destroy())}function p(l){if(f(),0===M.listenerCount(this,"error"))throw l}function f(){i.removeListener("data",u),T.removeListener("drain",a),i.removeListener("end",o),i.removeListener("close",v),i.removeListener("error",p),T.removeListener("error",p),i.removeListener("end",f),i.removeListener("close",f),T.removeListener("close",f)}return i.on("error",p),T.on("error",p),i.on("end",f),i.on("close",f),T.on("close",f),T.emit("pipe",i),T}},36743:($,K,e)=>{var M=e(40214),I=e(37697)("stream-parser");$.exports=function u(h){var g=h&&"function"==typeof h._transform,m=h&&"function"==typeof h._write;if(!g&&!m)throw new Error("must pass a Writable or Transform stream in");I("extending Parser into stream"),h._bytes=r,h._skipBytes=o,g&&(h._passthrough=v),g?h._transform=f:h._write=p};function a(h){I("initializing parser stream"),h._parserBytesLeft=0,h._parserBuffers=[],h._parserBuffered=0,h._parserState=-1,h._parserCallback=null,"function"==typeof h.push&&(h._parserOutput=h.push.bind(h)),h._parserInit=!0}function r(h,g){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(h)&&h>0,'can only buffer a finite number of bytes > 0, got "'+h+'"'),this._parserInit||a(this),I("buffering %o bytes",h),this._parserBytesLeft=h,this._parserCallback=g,this._parserState=0}function o(h,g){M(!this._parserCallback,'there is already a "callback" set!'),M(h>0,'can only skip > 0 bytes, got "'+h+'"'),this._parserInit||a(this),I("skipping %o bytes",h),this._parserBytesLeft=h,this._parserCallback=g,this._parserState=1}function v(h,g){M(!this._parserCallback,'There is already a "callback" set!'),M(h>0,'can only pass through > 0 bytes, got "'+h+'"'),this._parserInit||a(this),I("passing through %o bytes",h),this._parserBytesLeft=h,this._parserCallback=g,this._parserState=2}function p(h,g,m){this._parserInit||a(this),I("write(%o bytes)",h.length),"function"==typeof g&&(m=g),s(this,h,null,m)}function f(h,g,m){this._parserInit||a(this),I("transform(%o bytes)",h.length),"function"!=typeof g&&(g=this._parserOutput),s(this,h,g,m)}function y(h,g,m,d){if(h._parserBytesLeft-=g.length,I("%o bytes left for stream piece",h._parserBytesLeft),0===h._parserState?(h._parserBuffers.push(g),h._parserBuffered+=g.length):2===h._parserState&&m(g),0!==h._parserBytesLeft)return d;var A=h._parserCallback;if(A&&0===h._parserState&&h._parserBuffers.length>1&&(g=Buffer.concat(h._parserBuffers,h._parserBuffered)),0!==h._parserState&&(g=null),h._parserCallback=null,h._parserBuffered=0,h._parserState=-1,h._parserBuffers.splice(0),A){var b=[];g&&b.push(g),m&&b.push(m);var c=A.length>b.length;c&&b.push(x(d));var S=A.apply(h,b);if(!c||d===S)return d}}var s=x(function l(h,g,m,d){return h._parserBytesLeft<=0?d(new Error("got data but not currently parsing anything")):g.length<=h._parserBytesLeft?function(){return y(h,g,m,d)}:function(){var A=g.slice(0,h._parserBytesLeft);return y(h,A,m,function(b){return b?d(b):g.length>A.length?function(){return l(h,g.slice(A.length),m,d)}:void 0})}});function x(h){return function(){for(var g=h.apply(this,arguments);"function"==typeof g;)g=g();return g}}},37697:($,K,e)=>{function n(){var u;try{u=K.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}(K=$.exports=e(8433)).log=function t(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},K.formatArgs=function I(u){var a=this.useColors;if(u[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+u[0]+(a?"%c ":" ")+"+"+K.humanize(this.diff),a){var r="color: "+this.color;u.splice(1,0,r,"color: inherit");var o=0,v=0;u[0].replace(/%[a-zA-Z%]/g,function(p){"%%"!==p&&(o++,"%c"===p&&(v=o))}),u.splice(v,0,r)}},K.save=function T(u){try{null==u?K.storage.removeItem("debug"):K.storage.debug=u}catch{}},K.load=n,K.useColors=function M(){return!!(typeof window<"u"&&window.process&&"renderer"===window.process.type)||(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},K.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:function i(){try{return window.localStorage}catch{}}(),K.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],K.formatters.j=function(u){try{return JSON.stringify(u)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}},K.enable(n())},8433:($,K,e)=>{var M;function t(a){function r(){if(r.enabled){var o=r,v=+new Date,p=v-(M||v);o.diff=p,o.prev=M,o.curr=v,M=v;for(var f=new Array(arguments.length),l=0;l<f.length;l++)f[l]=arguments[l];f[0]=K.coerce(f[0]),"string"!=typeof f[0]&&f.unshift("%O");var y=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,function(x,h){if("%%"===x)return x;y++;var g=K.formatters[h];if("function"==typeof g){var m=f[y];x=g.call(o,m),f.splice(y,1),y--}return x}),K.formatArgs.call(o,f);var s=r.log||K.log||console.log.bind(console);s.apply(o,f)}}return r.namespace=a,r.enabled=K.enabled(a),r.useColors=K.useColors(),r.color=function I(a){var o,r=0;for(o in a)r=(r<<5)-r+a.charCodeAt(o),r|=0;return K.colors[Math.abs(r)%K.colors.length]}(a),"function"==typeof K.init&&K.init(r),r}(K=$.exports=t.debug=t.default=t).coerce=function u(a){return a instanceof Error?a.stack||a.message:a},K.disable=function n(){K.enable("")},K.enable=function T(a){K.save(a),K.names=[],K.skips=[];for(var r=("string"==typeof a?a:"").split(/[\s,]+/),o=r.length,v=0;v<o;v++)r[v]&&("-"===(a=r[v].replace(/\*/g,".*?"))[0]?K.skips.push(new RegExp("^"+a.substr(1)+"$")):K.names.push(new RegExp("^"+a+"$")))},K.enabled=function i(a){var r,o;for(r=0,o=K.skips.length;r<o;r++)if(K.skips[r].test(a))return!1;for(r=0,o=K.names.length;r<o;r++)if(K.names[r].test(a))return!0;return!1},K.humanize=e(67284),K.names=[],K.skips=[],K.formatters={}},67284:$=>{var K=1e3,e=60*K,M=60*e,I=24*M,t=365.25*I;function u(a,r,o){if(!(a<r))return a<1.5*r?Math.floor(a/r)+" "+o:Math.ceil(a/r)+" "+o+"s"}$.exports=function(a,r){r=r||{};var o=typeof a;if("string"===o&&a.length>0)return function T(a){if(a=String(a),!(a.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(r){var o=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*t;case"days":case"day":case"d":return o*I;case"hours":case"hour":case"hrs":case"hr":case"h":return o*M;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*K;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(a);if("number"===o&&!1===isNaN(a))return r.long?function i(a){return u(a,I,"day")||u(a,M,"hour")||u(a,e,"minute")||u(a,K,"second")||a+" ms"}(a):function n(a){return a>=I?Math.round(a/I)+"d":a>=M?Math.round(a/M)+"h":a>=e?Math.round(a/e)+"m":a>=K?Math.round(a/K)+"s":a+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},85491:($,K,e)=>{"use strict";var M=e(34461);$.exports=function(t,T,n){if(null==t)throw Error("First argument should be a string");if(null==T)throw Error("Separator should be a string or a RegExp");n?("string"==typeof n||Array.isArray(n))&&(n={ignore:n}):n={},null==n.escape&&(n.escape=!0),null==n.ignore?n.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof n.ignore&&(n.ignore=[n.ignore]),n.ignore=n.ignore.map(function(f){return 1===f.length&&(f+=f),f}));var i=M.parse(t,{flat:!0,brackets:n.ignore}),a=i[0].split(T);if(n.escape){for(var r=[],o=0;o<a.length;o++){var v=a[o],p=a[o+1];"\\"===v[v.length-1]&&"\\"!==v[v.length-2]?(r.push(v+T+p),o++):r.push(v)}a=r}for(o=0;o<a.length;o++)i[0]=a[o],a[o]=M.stringify(i,{flat:!0});return a}},73054:($,K,e)=>{"use strict";var M=e(73502).Buffer,I=M.isEncoding||function(h){switch((h=""+h)&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(h){var g;switch(this.encoding=function T(h){var g=function t(h){if(!h)return"utf8";for(var g;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(g)return;h=(""+h).toLowerCase(),g=!0}}(h);if("string"!=typeof g&&(M.isEncoding===I||!I(h)))throw new Error("Unknown encoding: "+h);return g||h}(h),this.encoding){case"utf16le":this.text=p,this.end=f,g=4;break;case"utf8":this.fillLast=r,g=4;break;case"base64":this.text=l,this.end=y,g=3;break;default:return this.write=s,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(g)}function i(h){return h<=127?0:h>>5==6?2:h>>4==14?3:h>>3==30?4:h>>6==2?-1:-2}function r(h){var g=this.lastTotal-this.lastNeed,m=function a(h,g,m){if(128!=(192&g[0]))return h.lastNeed=0,"\ufffd";if(h.lastNeed>1&&g.length>1){if(128!=(192&g[1]))return h.lastNeed=1,"\ufffd";if(h.lastNeed>2&&g.length>2&&128!=(192&g[2]))return h.lastNeed=2,"\ufffd"}}(this,h);return void 0!==m?m:this.lastNeed<=h.length?(h.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(h.copy(this.lastChar,g,0,h.length),void(this.lastNeed-=h.length))}function p(h,g){if((h.length-g)%2==0){var m=h.toString("utf16le",g);if(m){var d=m.charCodeAt(m.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",g,h.length-1)}function f(h){var g=h&&h.length?this.write(h):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,m)}return g}function l(h,g){var m=(h.length-g)%3;return 0===m?h.toString("base64",g):(this.lastNeed=3-m,this.lastTotal=3,1===m?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",g,h.length-m))}function y(h){var g=h&&h.length?this.write(h):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function s(h){return h.toString(this.encoding)}function x(h){return h&&h.length?this.write(h):""}K.s=n,n.prototype.write=function(h){if(0===h.length)return"";var g,m;if(this.lastNeed){if(void 0===(g=this.fillLast(h)))return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<h.length?g?g+this.text(h,m):this.text(h,m):g||""},n.prototype.end=function v(h){var g=h&&h.length?this.write(h):"";return this.lastNeed?g+"\ufffd":g},n.prototype.text=function o(h,g){var m=function u(h,g,m){var d=g.length-1;if(d<m)return 0;var A=i(g[d]);return A>=0?(A>0&&(h.lastNeed=A-1),A):--d<m||-2===A?0:(A=i(g[d]),A>=0?(A>0&&(h.lastNeed=A-2),A):--d<m||-2===A?0:(A=i(g[d]),A>=0?(A>0&&(2===A?A=0:h.lastNeed=A-3),A):0))}(this,h,g);if(!this.lastNeed)return h.toString("utf8",g);this.lastTotal=m;var d=h.length-(m-this.lastNeed);return h.copy(this.lastChar,0,d),h.toString("utf8",g,d)},n.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length}},93113:$=>{"use strict";$.exports=function K(e){for(var M=e.length,I=new Array(M),t=new Array(M),T=new Array(M),n=new Array(M),i=new Array(M),u=new Array(M),a=0;a<M;++a)I[a]=-1,t[a]=0,T[a]=!1,n[a]=0,i[a]=-1,u[a]=[];var r=0,o=[],v=[];function p(s){var x=[s],h=[s];for(I[s]=t[s]=r,T[s]=!0,r+=1;h.length>0;){s=h[h.length-1];var g=e[s];if(n[s]<g.length){for(var m=n[s];m<g.length;++m){var d=g[m];if(I[d]<0){I[d]=t[d]=r,T[d]=!0,r+=1,x.push(d),h.push(d);break}T[d]&&(t[s]=0|Math.min(t[s],t[d])),i[d]>=0&&u[s].push(i[d])}n[s]=m}else{if(t[s]===I[s]){var A=[],b=[],c=0;for(m=x.length-1;m>=0;--m){var S=x[m];if(T[S]=!1,A.push(S),b.push(u[S]),c+=u[S].length,i[S]=o.length,S===s){x.length=m;break}}o.push(A);var w=new Array(c);for(m=0;m<b.length;m++)for(var E=0;E<b[m].length;E++)w[--c]=b[m][E];v.push(w)}h.pop()}}}for(a=0;a<M;++a)I[a]<0&&p(a);var f;for(a=0;a<v.length;a++){var l=v[a];if(0!==l.length){l.sort(function(x,h){return x-h}),f=[l[0]];for(var y=1;y<l.length;y++)l[y]!==l[y-1]&&f.push(l[y]);v[a]=f}}return{components:o,adjacencyList:v}}},70531:($,K,e)=>{"use strict";e.r(K),e.d(K,{default:()=>a});var M=function(o,v){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return function r(o,v){var p=[],f=!0,l=!1,y=void 0;try{for(var x,s=o[Symbol.iterator]();!(f=(x=s.next()).done)&&(p.push(x.value),!v||p.length!==v);f=!0);}catch(h){l=!0,y=h}finally{try{!f&&s.return&&s.return()}finally{if(l)throw y}}return p}(o,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I=2*Math.PI,t=function(o,v,p,f,l,y,s){var x=o.x,h=o.y;return{x:f*(x*=v)-l*(h*=p)+y,y:l*x+f*h+s}},T=function(o,v){var p=1.5707963267948966===v?.551915024494:-1.5707963267948966===v?-.551915024494:1.3333333333333333*Math.tan(v/4),f=Math.cos(o),l=Math.sin(o),y=Math.cos(o+v),s=Math.sin(o+v);return[{x:f-l*p,y:l+f*p},{x:y+s*p,y:s-y*p},{x:y,y:s}]},n=function(o,v,p,f){var y=o*p+v*f;return y>1&&(y=1),y<-1&&(y=-1),(o*f-v*p<0?-1:1)*Math.acos(y)};const a=function(o){var v=o.px,p=o.py,f=o.cx,l=o.cy,y=o.rx,s=o.ry,x=o.xAxisRotation,h=void 0===x?0:x,g=o.largeArcFlag,m=void 0===g?0:g,d=o.sweepFlag,A=void 0===d?0:d,b=[];if(0===y||0===s)return[];var c=Math.sin(h*I/360),S=Math.cos(h*I/360),w=S*(v-f)/2+c*(p-l)/2,E=-c*(v-f)/2+S*(p-l)/2;if(0===w&&0===E)return[];y=Math.abs(y),s=Math.abs(s);var P=Math.pow(w,2)/Math.pow(y,2)+Math.pow(E,2)/Math.pow(s,2);P>1&&(y*=Math.sqrt(P),s*=Math.sqrt(P));var R=function(o,v,p,f,l,y,s,x,h,g,m,d){var A=Math.pow(l,2),b=Math.pow(y,2),c=Math.pow(m,2),S=Math.pow(d,2),w=A*b-A*S-b*c;w<0&&(w=0),w/=A*S+b*c;var E=(w=Math.sqrt(w)*(s===x?-1:1))*l/y*d,P=w*-y/l*m,R=g*E-h*P+(o+p)/2,F=h*E+g*P+(v+f)/2,_=(m-E)/l,z=(d-P)/y,D=(-m-E)/l,k=(-d-P)/y,O=n(1,0,_,z),U=n(_,z,D,k);return 0===x&&U>0&&(U-=I),1===x&&U<0&&(U+=I),[R,F,O,U]}(v,p,f,l,y,s,m,A,c,S,w,E),F=M(R,4),_=F[0],z=F[1],D=F[2],k=F[3],O=Math.abs(k)/(I/4);Math.abs(1-O)<1e-7&&(O=1);var U=Math.max(Math.ceil(O),1);k/=U;for(var H=0;H<U;H++)b.push(T(D,k)),D+=k;return b.map(function(j){var ee=t(j[0],y,s,S,c,_,z),W=ee.x,B=ee.y,te=t(j[1],y,s,S,c,_,z),q=te.x,oe=te.y,ie=t(j[2],y,s,S,c,_,z);return{x1:W,y1:B,x2:q,y2:oe,x:ie.x,y:ie.y}})}},93876:($,K,e)=>{"use strict";var M=e(72823),I=e(83377),t=e(12377),T=e(40051);$.exports=function n(i){if(Array.isArray(i)&&1===i.length&&"string"==typeof i[0]&&(i=i[0]),"string"==typeof i){if(!T(i))throw Error("String is not an SVG path.");i=M(i)}if(!Array.isArray(i))throw Error("Argument should be a string or an array of path segments.");if(i=I(i),!(i=t(i)).length)return[0,0,0,0];for(var u=[1/0,1/0,-1/0,-1/0],a=0,r=i.length;a<r;a++)for(var o=i[a].slice(1),v=0;v<o.length;v+=2)o[v+0]<u[0]&&(u[0]=o[v+0]),o[v+1]<u[1]&&(u[1]=o[v+1]),o[v+0]>u[2]&&(u[2]=o[v+0]),o[v+1]>u[3]&&(u[3]=o[v+1]);return u}},12377:($,K,e)=>{"use strict";$.exports=function I(n){for(var i,u=[],a=0,r=0,o=0,v=0,p=null,f=null,l=0,y=0,s=0,x=n.length;s<x;s++){var h=n[s],g=h[0];switch(g){case"M":o=h[1],v=h[2];break;case"A":var m=M({px:l,py:y,cx:h[6],cy:h[7],rx:h[1],ry:h[2],xAxisRotation:h[3],largeArcFlag:h[4],sweepFlag:h[5]});if(!m.length)continue;for(var A,d=0;d<m.length;d++)h=["C",(A=m[d]).x1,A.y1,A.x2,A.y2,A.x,A.y],d<m.length-1&&u.push(h);break;case"S":var b=l,c=y;("C"==i||"S"==i)&&(b+=b-a,c+=c-r),h=["C",b,c,h[1],h[2],h[3],h[4]];break;case"T":"Q"==i||"T"==i?(p=2*l-p,f=2*y-f):(p=l,f=y),h=T(l,y,p,f,h[1],h[2]);break;case"Q":p=h[1],f=h[2],h=T(l,y,h[1],h[2],h[3],h[4]);break;case"L":h=t(l,y,h[1],h[2]);break;case"H":h=t(l,y,h[1],y);break;case"V":h=t(l,y,l,h[1]);break;case"Z":h=t(l,y,o,v)}i=g,l=h[h.length-2],y=h[h.length-1],h.length>4?(a=h[h.length-4],r=h[h.length-3]):(a=l,r=y),u.push(h)}return u};var M=e(70531);function t(n,i,u,a){return["C",n,i,u,a,u,a]}function T(n,i,u,a,r,o){return["C",n/3+2/3*u,i/3+2/3*a,r/3+2/3*u,o/3+2/3*a,r,o]}},3550:($,K,e)=>{"use strict";var r,M=e(93876),I=e(72823),t=e(72005),T=e(40051),n=e(83426),i=document.createElement("canvas"),u=i.getContext("2d");$.exports=function a(v,p){if(!T(v))throw Error("Argument should be valid svg path string");var f,l;p||(p={}),p.shape?(f=p.shape[0],l=p.shape[1]):(f=i.width=p.w||p.width||200,l=i.height=p.h||p.height||200);var y=Math.min(f,l),s=p.stroke||0,x=p.viewbox||p.viewBox||M(v),h=[f/(x[2]-x[0]),l/(x[3]-x[1])],g=Math.min(h[0]||0,h[1]||0)/2;if(u.fillStyle="black",u.fillRect(0,0,f,l),u.fillStyle="white",s&&("number"!=typeof s&&(s=1),u.strokeStyle=s>0?"white":"black",u.lineWidth=Math.abs(s)),u.translate(.5*f,.5*l),u.scale(g,g),function o(){if(null!=r)return r;var v=document.createElement("canvas").getContext("2d");if(v.canvas.width=v.canvas.height=1,!window.Path2D)return r=!1;var p=new Path2D("M0,0h1v1h-1v-1Z");v.fillStyle="black",v.fill(p);var f=v.getImageData(0,0,1,1);return r=f&&f.data&&255===f.data[3]}()){var m=new Path2D(v);u.fill(m),s&&u.stroke(m)}else{var d=I(v);t(u,d),u.fill(),s&&u.stroke()}return u.setTransform(1,0,0,1,0,0),n(u,{cutoff:null!=p.cutoff?p.cutoff:.5,radius:null!=p.radius?p.radius:.5*y})}},19606:$=>{"use strict";$.exports=M,$.exports.float32=$.exports.float=M,$.exports.fract32=$.exports.fract=function e(I,t){if(I.length){if(I instanceof Float32Array)return new Float32Array(I.length);t instanceof Float32Array||(t=M(I));for(var T=0,n=t.length;T<n;T++)t[T]=I[T]-t[T];return t}return M(I-M(I))};var K=new Float32Array(1);function M(I){return I.length?I instanceof Float32Array?I:new Float32Array(I):(K[0]=I,K[0])}},11538:($,K,e)=>{"use strict";var M=e(97252);$.exports=n;function t(i,u){var a=M(getComputedStyle(i).getPropertyValue(u));return a[0]*n(a[1],i)}function n(i,u){switch(u=u||document.body,i=(i||"px").trim().toLowerCase(),(u===window||u===document)&&(u=document.body),i){case"%":return u.clientHeight/100;case"ch":case"ex":return function T(i,u){var a=document.createElement("div");a.style["font-size"]="128"+i,u.appendChild(a);var r=t(a,"font-size")/128;return u.removeChild(a),r}(i,u);case"em":return t(u,"font-size");case"rem":return t(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}},18191:($,K,e)=>{"use strict";function I(u){return u}function T(u,a){return"string"==typeof a&&(a=u.objects[a]),"GeometryCollection"===a.type?{type:"FeatureCollection",features:a.geometries.map(function(r){return n(u,r)})}:n(u,a)}function n(u,a){var r=a.id,o=a.bbox,v=null==a.properties?{}:a.properties,p=function i(u,a){var r=function t(u){if(null==u)return I;var a,r,o=u.scale[0],v=u.scale[1],p=u.translate[0],f=u.translate[1];return function(l,y){y||(a=r=0);var s=2,x=l.length,h=new Array(x);for(h[0]=(a+=l[0])*o+p,h[1]=(r+=l[1])*v+f;s<x;)h[s]=l[s],++s;return h}}(u.transform),o=u.arcs;function v(x,h){h.length&&h.pop();for(var g=o[x<0?~x:x],m=0,d=g.length;m<d;++m)h.push(r(g[m],m));x<0&&function M(u,a){for(var r,o=u.length,v=o-a;v<--o;)r=u[v],u[v++]=u[o],u[o]=r}(h,d)}function p(x){return r(x)}function f(x){for(var h=[],g=0,m=x.length;g<m;++g)v(x[g],h);return h.length<2&&h.push(h[0]),h}function l(x){for(var h=f(x);h.length<4;)h.push(h[0]);return h}function y(x){return x.map(l)}function s(x){var g,h=x.type;switch(h){case"GeometryCollection":return{type:h,geometries:x.geometries.map(s)};case"Point":g=p(x.coordinates);break;case"MultiPoint":g=x.coordinates.map(p);break;case"LineString":g=f(x.arcs);break;case"MultiLineString":g=x.arcs.map(f);break;case"Polygon":g=y(x.arcs);break;case"MultiPolygon":g=x.arcs.map(y);break;default:return null}return{type:h,coordinates:g}}return s(a)}(u,a);return null==r&&null==o?{type:"Feature",properties:v,geometry:p}:null==o?{type:"Feature",id:r,properties:v,geometry:p}:{type:"Feature",id:r,bbox:o,properties:v,geometry:p}}e.d(K,{zL:()=>T})},5574:($,K,e)=>{"use strict";var M=e(22940);$.exports=function(I){if("function"!=typeof I||!hasOwnProperty.call(I,"length"))return!1;try{if("number"!=typeof I.length||"function"!=typeof I.call||"function"!=typeof I.apply)return!1}catch{return!1}return!M(I)}},47644:($,K,e)=>{"use strict";var M=e(6493),I=e(36458),t=e(23240),T=e(29401),n=function(i,u){return i.replace("%v",T(u))};$.exports=function(i,u,a){if(!I(a))throw new TypeError(n(u,i));if(!M(i)){if("default"in a)return a.default;if(a.isOptional)return null}var r=t(a.errorMessage);throw M(r)||(r=u),new TypeError(n(r,i))}},84738:$=>{"use strict";$.exports=function(K){try{return K.toString()}catch{try{return String(K)}catch{return null}}}},29401:($,K,e)=>{"use strict";var M=e(84738),I=/[\n\r\u2028\u2029]/g;$.exports=function(t){var T=M(t);return null===T?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(I,function(n){switch(n){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},36458:($,K,e)=>{"use strict";var M=e(6493),I={object:!0,function:!0,undefined:!0};$.exports=function(t){return!!M(t)&&hasOwnProperty.call(I,typeof t)}},63959:($,K,e)=>{"use strict";var M=e(47644),I=e(47717);$.exports=function(t){return I(t)?t:M(t,"%v is not a plain function",arguments[1])}},47717:($,K,e)=>{"use strict";var M=e(5574),I=/^\s*class[\s{/}]/,t=Function.prototype.toString;$.exports=function(T){return!(!M(T)||I.test(t.call(T)))}},22940:($,K,e)=>{"use strict";var M=e(36458);$.exports=function(I){if(!M(I))return!1;try{return!!I.constructor&&I.constructor.prototype===I}catch{return!1}}},23240:($,K,e)=>{"use strict";var M=e(6493),I=e(36458),t=Object.prototype.toString;$.exports=function(T){if(!M(T))return null;if(I(T)){var n=T.toString;if("function"!=typeof n||n===t)return null}try{return""+T}catch{return null}}},1986:($,K,e)=>{"use strict";var M=e(47644),I=e(6493);$.exports=function(t){return I(t)?t:M(t,"Cannot use %v",arguments[1])}},6493:$=>{"use strict";$.exports=function(e){return null!=e}},87296:($,K,e)=>{"use strict";var M=e(67708),I=e(50646),t=e(94007).Buffer;global.__TYPEDARRAY_POOL||(global.__TYPEDARRAY_POOL={UINT8:I([32,0]),UINT16:I([32,0]),UINT32:I([32,0]),BIGUINT64:I([32,0]),INT8:I([32,0]),INT16:I([32,0]),INT32:I([32,0]),BIGINT64:I([32,0]),FLOAT:I([32,0]),DOUBLE:I([32,0]),DATA:I([32,0]),UINT8C:I([32,0]),BUFFER:I([32,0])});var T=typeof Uint8ClampedArray<"u",n=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",u=global.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=I([32,0])),u.BIGUINT64||(u.BIGUINT64=I([32,0])),u.BIGINT64||(u.BIGINT64=I([32,0])),u.BUFFER||(u.BUFFER=I([32,0]));var a=u.DATA,r=u.BUFFER;function o(w){if(w){var E=w.length||w.byteLength,P=M.log2(E);a[P].push(w)}}function p(E){E=M.nextPow2(E);var P=M.log2(E),R=a[P];return R.length>0?R.pop():new ArrayBuffer(E)}function f(w){return new Uint8Array(p(w),0,w)}function l(w){return new Uint16Array(p(2*w),0,w)}function y(w){return new Uint32Array(p(4*w),0,w)}function s(w){return new Int8Array(p(w),0,w)}function x(w){return new Int16Array(p(2*w),0,w)}function h(w){return new Int32Array(p(4*w),0,w)}function g(w){return new Float32Array(p(4*w),0,w)}function m(w){return new Float64Array(p(8*w),0,w)}function d(w){return T?new Uint8ClampedArray(p(w),0,w):f(w)}function A(w){return n?new BigUint64Array(p(8*w),0,w):null}function b(w){return i?new BigInt64Array(p(8*w),0,w):null}function c(w){return new DataView(p(w),0,w)}function S(w){w=M.nextPow2(w);var E=M.log2(w),P=r[E];return P.length>0?P.pop():new t(w)}K.free=function(E){if(t.isBuffer(E))r[M.log2(E.length)].push(E);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(E)&&(E=E.buffer),!E)return;var P=E.length||E.byteLength,R=0|M.log2(P);a[R].push(E)}},K.freeUint8=K.freeUint16=K.freeUint32=K.freeBigUint64=K.freeInt8=K.freeInt16=K.freeInt32=K.freeBigInt64=K.freeFloat32=K.freeFloat=K.freeFloat64=K.freeDouble=K.freeUint8Clamped=K.freeDataView=function v(w){o(w.buffer)},K.freeArrayBuffer=o,K.freeBuffer=function(E){r[M.log2(E.length)].push(E)},K.malloc=function(E,P){if(void 0===P||"arraybuffer"===P)return p(E);switch(P){case"uint8":return f(E);case"uint16":return l(E);case"uint32":return y(E);case"int8":return s(E);case"int16":return x(E);case"int32":return h(E);case"float":case"float32":return g(E);case"double":case"float64":return m(E);case"uint8_clamped":return d(E);case"bigint64":return b(E);case"biguint64":return A(E);case"buffer":return S(E);case"data":case"dataview":return c(E);default:return null}return null},K.mallocArrayBuffer=p,K.mallocUint8=f,K.mallocUint16=l,K.mallocUint32=y,K.mallocInt8=s,K.mallocInt16=x,K.mallocInt32=h,K.mallocFloat32=K.mallocFloat=g,K.mallocFloat64=K.mallocDouble=m,K.mallocUint8Clamped=d,K.mallocBigUint64=A,K.mallocBigInt64=b,K.mallocDataView=c,K.mallocBuffer=S,K.clearCache=function(){for(var E=0;E<32;++E)u.UINT8[E].length=0,u.UINT16[E].length=0,u.UINT32[E].length=0,u.INT8[E].length=0,u.INT16[E].length=0,u.INT32[E].length=0,u.FLOAT[E].length=0,u.DOUBLE[E].length=0,u.BIGUINT64[E].length=0,u.BIGINT64[E].length=0,u.UINT8C[E].length=0,a[E].length=0,r[E].length=0}},9299:$=>{var K=/[\'\"]/;$.exports=function(M){return M?(K.test(M.charAt(0))&&(M=M.substr(1)),K.test(M.charAt(M.length-1))&&(M=M.substr(0,M.length-1)),M):""}},6694:$=>{"use strict";$.exports=function(e,M,I){Array.isArray(I)||(I=[].slice.call(arguments,2));for(var t=0,T=I.length;t<T;t++){var n=I[t];for(var i in n)if((void 0===M[i]||Array.isArray(M[i])||e[i]!==M[i])&&i in M){var u;if(!0===n[i])u=M[i];else{if(!1===n[i])continue;if("function"==typeof n[i]&&void 0===(u=n[i](M[i],e,M)))continue}e[i]=u}}return e}},23532:$=>{function e(M){try{if(!global.localStorage)return!1}catch{return!1}var I=global.localStorage[M];return null!=I&&"true"===String(I).toLowerCase()}$.exports=function K(M,I){if(e("noDeprecation"))return M;var t=!1;return function T(){if(!t){if(e("throwDeprecation"))throw new Error(I);e("traceDeprecation")?console.trace(I):console.warn(I),t=!0}return M.apply(this,arguments)}}},11451:$=>{$.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},78791:($,K,e)=>{"use strict";var M=e(13407),I=e(20110),t=e(42031),T=e(80597);function n(de){return de.call.bind(de)}var i=typeof BigInt<"u",u=typeof Symbol<"u",a=n(Object.prototype.toString),r=n(Number.prototype.valueOf),o=n(String.prototype.valueOf),v=n(Boolean.prototype.valueOf);if(i)var p=n(BigInt.prototype.valueOf);if(u)var f=n(Symbol.prototype.valueOf);function l(de,be){if("object"!=typeof de)return!1;try{return be(de),!0}catch{return!1}}function P(de){return"[object Map]"===a(de)}function F(de){return"[object Set]"===a(de)}function z(de){return"[object WeakMap]"===a(de)}function k(de){return"[object WeakSet]"===a(de)}function U(de){return"[object ArrayBuffer]"===a(de)}function H(de){return!(typeof ArrayBuffer>"u")&&(U.working?U(de):de instanceof ArrayBuffer)}function j(de){return"[object DataView]"===a(de)}function ee(de){return!(typeof DataView>"u")&&(j.working?j(de):de instanceof DataView)}K.isArgumentsObject=M,K.isGeneratorFunction=I,K.isTypedArray=T,K.isPromise=function y(de){return typeof Promise<"u"&&de instanceof Promise||null!==de&&"object"==typeof de&&"function"==typeof de.then&&"function"==typeof de.catch},K.isArrayBufferView=function s(de){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(de):T(de)||ee(de)},K.isUint8Array=function x(de){return"Uint8Array"===t(de)},K.isUint8ClampedArray=function h(de){return"Uint8ClampedArray"===t(de)},K.isUint16Array=function g(de){return"Uint16Array"===t(de)},K.isUint32Array=function m(de){return"Uint32Array"===t(de)},K.isInt8Array=function d(de){return"Int8Array"===t(de)},K.isInt16Array=function A(de){return"Int16Array"===t(de)},K.isInt32Array=function b(de){return"Int32Array"===t(de)},K.isFloat32Array=function c(de){return"Float32Array"===t(de)},K.isFloat64Array=function S(de){return"Float64Array"===t(de)},K.isBigInt64Array=function w(de){return"BigInt64Array"===t(de)},K.isBigUint64Array=function E(de){return"BigUint64Array"===t(de)},P.working=typeof Map<"u"&&P(new Map),K.isMap=function R(de){return!(typeof Map>"u")&&(P.working?P(de):de instanceof Map)},F.working=typeof Set<"u"&&F(new Set),K.isSet=function _(de){return!(typeof Set>"u")&&(F.working?F(de):de instanceof Set)},z.working=typeof WeakMap<"u"&&z(new WeakMap),K.isWeakMap=function D(de){return!(typeof WeakMap>"u")&&(z.working?z(de):de instanceof WeakMap)},k.working=typeof WeakSet<"u"&&k(new WeakSet),K.isWeakSet=function O(de){return k(de)},U.working=typeof ArrayBuffer<"u"&&U(new ArrayBuffer),K.isArrayBuffer=H,j.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&j(new DataView(new ArrayBuffer(1),0,1)),K.isDataView=ee;var W=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function B(de){return"[object SharedArrayBuffer]"===a(de)}function te(de){return!(typeof W>"u")&&(typeof B.working>"u"&&(B.working=B(new W)),B.working?B(de):de instanceof W)}function ae(de){return l(de,r)}function X(de){return l(de,o)}function J(de){return l(de,v)}function ue(de){return i&&l(de,p)}function re(de){return u&&l(de,f)}K.isSharedArrayBuffer=te,K.isAsyncFunction=function q(de){return"[object AsyncFunction]"===a(de)},K.isMapIterator=function oe(de){return"[object Map Iterator]"===a(de)},K.isSetIterator=function ie(de){return"[object Set Iterator]"===a(de)},K.isGeneratorObject=function V(de){return"[object Generator]"===a(de)},K.isWebAssemblyCompiledModule=function Y(de){return"[object WebAssembly.Module]"===a(de)},K.isNumberObject=ae,K.isStringObject=X,K.isBooleanObject=J,K.isBigIntObject=ue,K.isSymbolObject=re,K.isBoxedPrimitive=function ne(de){return ae(de)||X(de)||J(de)||ue(de)||re(de)},K.isAnyArrayBuffer=function se(de){return typeof Uint8Array<"u"&&(H(de)||te(de))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(de){Object.defineProperty(K,de,{enumerable:!1,value:function(){throw new Error(de+" is not supported in userland")}})})},26788:($,K,e)=>{var M=Object.getOwnPropertyDescriptors||function(ee){for(var W=Object.keys(ee),B={},te=0;te<W.length;te++)B[W[te]]=Object.getOwnPropertyDescriptor(ee,W[te]);return B},I=/%[sdj%]/g;K.format=function(j){if(!d(j)){for(var ee=[],W=0;W<arguments.length;W++)ee.push(i(arguments[W]));return ee.join(" ")}W=1;for(var B=arguments,te=B.length,q=String(j).replace(I,function(ie){if("%%"===ie)return"%";if(W>=te)return ie;switch(ie){case"%s":return String(B[W++]);case"%d":return Number(B[W++]);case"%j":try{return JSON.stringify(B[W++])}catch{return"[Circular]"}default:return ie}}),oe=B[W];W<te;oe=B[++W])h(oe)||!S(oe)?q+=" "+oe:q+=" "+i(oe);return q},K.deprecate=function(j,ee){if(typeof process<"u"&&!0===process.noDeprecation)return j;if(typeof process>"u")return function(){return K.deprecate(j,ee).apply(this,arguments)};var W=!1;return function B(){if(!W){if(process.throwDeprecation)throw new Error(ee);process.traceDeprecation?console.trace(ee):console.error(ee),W=!0}return j.apply(this,arguments)}};var t={},T=/^$/;if(process.env.NODE_DEBUG){var n=process.env.NODE_DEBUG;n=n.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),T=new RegExp("^"+n+"$","i")}function i(j,ee){var W={seen:[],stylize:a};return arguments.length>=3&&(W.depth=arguments[2]),arguments.length>=4&&(W.colors=arguments[3]),x(ee)?W.showHidden=ee:ee&&K._extend(W,ee),b(W.showHidden)&&(W.showHidden=!1),b(W.depth)&&(W.depth=2),b(W.colors)&&(W.colors=!1),b(W.customInspect)&&(W.customInspect=!0),W.colors&&(W.stylize=u),o(W,j,W.depth)}function u(j,ee){var W=i.styles[ee];return W?"\x1b["+i.colors[W][0]+"m"+j+"\x1b["+i.colors[W][1]+"m":j}function a(j,ee){return j}function o(j,ee,W){if(j.customInspect&&ee&&P(ee.inspect)&&ee.inspect!==K.inspect&&(!ee.constructor||ee.constructor.prototype!==ee)){var B=ee.inspect(W,j);return d(B)||(B=o(j,B,W)),B}var te=function v(j,ee){if(b(ee))return j.stylize("undefined","undefined");if(d(ee)){var W="'"+JSON.stringify(ee).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(W,"string")}if(m(ee))return j.stylize(""+ee,"number");if(x(ee))return j.stylize(""+ee,"boolean");if(h(ee))return j.stylize("null","null")}(j,ee);if(te)return te;var q=Object.keys(ee),oe=function r(j){var ee={};return j.forEach(function(W,B){ee[W]=!0}),ee}(q);if(j.showHidden&&(q=Object.getOwnPropertyNames(ee)),E(ee)&&(q.indexOf("message")>=0||q.indexOf("description")>=0))return p(ee);if(0===q.length){if(P(ee)){var ie=ee.name?": "+ee.name:"";return j.stylize("[Function"+ie+"]","special")}if(c(ee))return j.stylize(RegExp.prototype.toString.call(ee),"regexp");if(w(ee))return j.stylize(Date.prototype.toString.call(ee),"date");if(E(ee))return p(ee)}var J,V="",Y=!1,ae=["{","}"];(s(ee)&&(Y=!0,ae=["[","]"]),P(ee))&&(V=" [Function"+(ee.name?": "+ee.name:"")+"]");return c(ee)&&(V=" "+RegExp.prototype.toString.call(ee)),w(ee)&&(V=" "+Date.prototype.toUTCString.call(ee)),E(ee)&&(V=" "+p(ee)),0!==q.length||Y&&0!=ee.length?W<0?c(ee)?j.stylize(RegExp.prototype.toString.call(ee),"regexp"):j.stylize("[Object]","special"):(j.seen.push(ee),J=Y?function f(j,ee,W,B,te){for(var q=[],oe=0,ie=ee.length;oe<ie;++oe)k(ee,String(oe))?q.push(l(j,ee,W,B,String(oe),!0)):q.push("");return te.forEach(function(V){V.match(/^\d+$/)||q.push(l(j,ee,W,B,V,!0))}),q}(j,ee,W,oe,q):q.map(function(ue){return l(j,ee,W,oe,ue,Y)}),j.seen.pop(),function y(j,ee,W){var te=j.reduce(function(q,oe){return oe.indexOf("\n")>=0&&0,q+oe.replace(/\u001b\[\d\d?m/g,"").length+1},0);return te>60?W[0]+(""===ee?"":ee+"\n ")+" "+j.join(",\n  ")+" "+W[1]:W[0]+ee+" "+j.join(", ")+" "+W[1]}(J,V,ae)):ae[0]+V+ae[1]}function p(j){return"["+Error.prototype.toString.call(j)+"]"}function l(j,ee,W,B,te,q){var oe,ie,V;if((V=Object.getOwnPropertyDescriptor(ee,te)||{value:ee[te]}).get?ie=V.set?j.stylize("[Getter/Setter]","special"):j.stylize("[Getter]","special"):V.set&&(ie=j.stylize("[Setter]","special")),k(B,te)||(oe="["+te+"]"),ie||(j.seen.indexOf(V.value)<0?(ie=h(W)?o(j,V.value,null):o(j,V.value,W-1)).indexOf("\n")>-1&&(ie=q?ie.split("\n").map(function(Y){return"  "+Y}).join("\n").slice(2):"\n"+ie.split("\n").map(function(Y){return"   "+Y}).join("\n")):ie=j.stylize("[Circular]","special")),b(oe)){if(q&&te.match(/^\d+$/))return ie;(oe=JSON.stringify(""+te)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=j.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=j.stylize(oe,"string"))}return oe+": "+ie}function s(j){return Array.isArray(j)}function x(j){return"boolean"==typeof j}function h(j){return null===j}function m(j){return"number"==typeof j}function d(j){return"string"==typeof j}function b(j){return void 0===j}function c(j){return S(j)&&"[object RegExp]"===F(j)}function S(j){return"object"==typeof j&&null!==j}function w(j){return S(j)&&"[object Date]"===F(j)}function E(j){return S(j)&&("[object Error]"===F(j)||j instanceof Error)}function P(j){return"function"==typeof j}function F(j){return Object.prototype.toString.call(j)}function _(j){return j<10?"0"+j.toString(10):j.toString(10)}K.debuglog=function(j){if(j=j.toUpperCase(),!t[j])if(T.test(j)){var ee=process.pid;t[j]=function(){var W=K.format.apply(K,arguments);console.error("%s %d: %s",j,ee,W)}}else t[j]=function(){};return t[j]},K.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},K.types=e(78791),K.isArray=s,K.isBoolean=x,K.isNull=h,K.isNullOrUndefined=function g(j){return null==j},K.isNumber=m,K.isString=d,K.isSymbol=function A(j){return"symbol"==typeof j},K.isUndefined=b,K.isRegExp=c,K.types.isRegExp=c,K.isObject=S,K.isDate=w,K.types.isDate=w,K.isError=E,K.types.isNativeError=E,K.isFunction=P,K.isPrimitive=function R(j){return null===j||"boolean"==typeof j||"number"==typeof j||"string"==typeof j||"symbol"==typeof j||typeof j>"u"},K.isBuffer=e(11451);var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var j=new Date,ee=[_(j.getHours()),_(j.getMinutes()),_(j.getSeconds())].join(":");return[j.getDate(),z[j.getMonth()],ee].join(" ")}function k(j,ee){return Object.prototype.hasOwnProperty.call(j,ee)}K.log=function(){console.log("%s - %s",D(),K.format.apply(K,arguments))},K.inherits=e(83894),K._extend=function(j,ee){if(!ee||!S(ee))return j;for(var W=Object.keys(ee),B=W.length;B--;)j[W[B]]=ee[W[B]];return j};var O=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function U(j,ee){if(!j){var W=new Error("Promise was rejected with a falsy value");W.reason=j,j=W}return ee(j)}K.promisify=function(ee){if("function"!=typeof ee)throw new TypeError('The "original" argument must be of type Function');if(O&&ee[O]){var W;if("function"!=typeof(W=ee[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(W,O,{value:W,enumerable:!1,writable:!1,configurable:!0}),W}function W(){for(var B,te,q=new Promise(function(V,Y){B=V,te=Y}),oe=[],ie=0;ie<arguments.length;ie++)oe.push(arguments[ie]);oe.push(function(V,Y){V?te(V):B(Y)});try{ee.apply(this,oe)}catch(V){te(V)}return q}return Object.setPrototypeOf(W,Object.getPrototypeOf(ee)),O&&Object.defineProperty(W,O,{value:W,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(W,M(ee))},K.promisify.custom=O,K.callbackify=function H(j){if("function"!=typeof j)throw new TypeError('The "original" argument must be of type Function');function ee(){for(var W=[],B=0;B<arguments.length;B++)W.push(arguments[B]);var te=W.pop();if("function"!=typeof te)throw new TypeError("The last argument must be of type Function");var q=this,oe=function(){return te.apply(q,arguments)};j.apply(this,W).then(function(ie){process.nextTick(oe.bind(null,null,ie))},function(ie){process.nextTick(U.bind(null,ie,oe))})}return Object.setPrototypeOf(ee,Object.getPrototypeOf(j)),Object.defineProperties(ee,M(j)),ee}},28669:($,K,e)=>{var M=e(49944);$.exports=function(t){return M("webgl",t)}},42031:($,K,e)=>{"use strict";var M=e(9435),I=e(87029),t=e(55685),T=e(75834),n=e(47378),i=T("Object.prototype.toString"),u=e(46259)(),a=typeof globalThis>"u"?global:globalThis,r=I(),o=T("String.prototype.slice"),v=Object.getPrototypeOf,p=T("Array.prototype.indexOf",!0)||function(x,h){for(var g=0;g<x.length;g+=1)if(x[g]===h)return g;return-1},f={__proto__:null};M(r,u&&n&&v?function(s){var x=new a[s];if(Symbol.toStringTag in x){var h=v(x),g=n(h,Symbol.toStringTag);if(!g){var m=v(h);g=n(m,Symbol.toStringTag)}f["$"+s]=t(g.get)}}:function(s){var x=new a[s],h=x.slice||x.set;h&&(f["$"+s]=t(h))});$.exports=function(x){if(!x||"object"!=typeof x)return!1;if(!u){var h=o(i(x),8,-1);return p(r,h)>-1?h:"Object"===h&&function(x){var h=!1;return M(f,function(g,m){if(!h)try{g(x),h=o(m,1)}catch{}}),h}(x)}return n?function(x){var h=!1;return M(f,function(g,m){if(!h)try{"$"+g(x)===m&&(h=o(m,1))}catch{}}),h}(x):null}},64414:($,K,e)=>{var M=e(77304),I=e(35943),t=M.instance();function T(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,I(T.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(f,l){if("string"==typeof f){var y=f.match(i);return y?y[0]:""}var s=this._validateYear(f),x=f.month(),h=""+this.toChineseMonth(s,x);return l&&h.length<2&&(h="0"+h),this.isIntercalaryMonth(s,x)&&(h+="i"),h},monthNames:function(f){if("string"==typeof f){var l=f.match(u);return l?l[0]:""}var y=this._validateYear(f),s=f.month(),h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(y,s)-1];return this.isIntercalaryMonth(y,s)&&(h="\u95f0"+h),h},monthNamesShort:function(f){if("string"==typeof f){var l=f.match(a);return l?l[0]:""}var y=this._validateYear(f),s=f.month(),h=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(y,s)-1];return this.isIntercalaryMonth(y,s)&&(h="\u95f0"+h),h},parseMonth:function(f,l){f=this._validateYear(f);var s,y=parseInt(l);if(isNaN(y))"\u95f0"===l[0]&&(s=!0,l=l.substring(1)),"\u6708"===l[l.length-1]&&(l=l.substring(0,l.length-1)),y=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(l);else{var x=l[l.length-1];s="i"===x||"I"===x}return this.toMonthIndex(f,y,s)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(f,l){if(f.year&&(f=f.year()),"number"!=typeof f||f<1888||f>2111)throw l.replace(/\{0\}/,this.local.name);return f},toMonthIndex:function(f,l,y){var s=this.intercalaryMonth(f);if(y&&l!==s||l<1||l>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?!y&&l<=s?l-1:l:l-1},toChineseMonth:function(f,l){f.year&&(l=(f=f.year()).month());var y=this.intercalaryMonth(f);if(l<0||l>(y?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return y?l<y?l+1:l:l+1},intercalaryMonth:function(f){return f=this._validateYear(f),r[f-r[0]]>>13},isIntercalaryMonth:function(f,l){f.year&&(l=(f=f.year()).month());var y=this.intercalaryMonth(f);return!!y&&y===l},leapYear:function(f){return 0!==this.intercalaryMonth(f)},weekOfYear:function(f,l,y){var d,s=this._validateYear(f,M.local.invalidyear),x=o[s-o[0]],h=x>>9&4095,g=x>>5&15,m=31&x;(d=t.newDate(h,g,m)).add(4-(d.dayOfWeek()||7),"d");var A=this.toJD(f,l,y)-d.toJD();return 1+Math.floor(A/7)},monthsInYear:function(f){return this.leapYear(f)?13:12},daysInMonth:function(f,l){f.year&&(l=f.month(),f=f.year()),f=this._validateYear(f);var y=r[f-r[0]];if(l>(y>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return y&1<<12-l?30:29},weekDay:function(f,l,y){return(this.dayOfWeek(f,l,y)||7)<6},toJD:function(f,l,y){var s=this._validate(f,h,y,M.local.invalidDate);f=this._validateYear(s.year()),l=s.month(),y=s.day();var x=this.isIntercalaryMonth(f,l),h=this.toChineseMonth(f,l),g=function p(f,l,y,s,x){var h,g,c;if("object"==typeof f)g=f,h=l||{};else{var b;if(!("number"==typeof f&&f>=1888&&f<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof l&&l>=1&&l<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof y&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof s?(b=!1,h=s):(b=!!s,h=x||{}),g={year:f,month:l,day:y,isIntercalary:b}}c=g.day-1;var E,S=r[g.year-r[0]],w=S>>13;E=w&&(g.month>w||g.isIntercalary)?g.month:g.month-1;for(var P=0;P<E;P++){c+=S&1<<12-P?30:29}var F=o[g.year-o[0]],k=new Date(F>>9&4095,(F>>5&15)-1,(31&F)+c);return h.year=k.getFullYear(),h.month=1+k.getMonth(),h.day=k.getDate(),h}(f,h,y,x);return t.toJD(g.year,g.month,g.day)},fromJD:function(f){var l=t.fromJD(f),y=function v(f,l,y,s){var x,h;if("object"==typeof f)x=f,h=l||{};else{if(!("number"==typeof f&&f>=1888&&f<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof l&&l>=1&&l<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof y&&y>=1&&y<=31))throw new Error("Solar day outside range 1 - 31");x={year:f,month:l,day:y},h=s||{}}var A=o[x.year-o[0]],b=x.year<<9|x.month<<5|x.day;h.year=b>=A?x.year:x.year-1,A=o[h.year-o[0]];var E,P=new Date(A>>9&4095,(A>>5&15)-1,31&A),R=new Date(x.year,x.month-1,x.day);E=Math.round((R-P)/864e5);var _,F=r[h.year-r[0]];for(_=0;_<13;_++){var z=F&1<<12-_?30:29;if(E<z)break;E-=z}var D=F>>13;return!D||_<D?(h.isIntercalary=!1,h.month=1+_):_===D?(h.isIntercalary=!0,h.month=_):(h.isIntercalary=!1,h.month=_),h.day=1+E,h}(l.year(),l.month(),l.day()),s=this.toMonthIndex(y.year,y.month,y.isIntercalary);return this.newDate(y.year,s,y.day)},fromString:function(f){var l=f.match(n),y=this._validateYear(+l[1]),s=+l[2],x=!!l[3],h=this.toMonthIndex(y,s,x),g=+l[4];return this.newDate(y,h,g)},add:function(f,l,y){var s=f.year(),x=f.month(),h=this.isIntercalaryMonth(s,x),g=this.toChineseMonth(s,x),m=Object.getPrototypeOf(T.prototype).add.call(this,f,l,y);if("y"===y){var d=m.year(),A=m.month(),b=this.isIntercalaryMonth(d,g),c=h&&b?this.toMonthIndex(d,g,!0):this.toMonthIndex(d,g,!1);c!==A&&m.month(c)}return m}});var n=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,i=/^\d?\d[iI]?/m,u=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;M.calendars.chinese=T;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],o=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},24091:($,K,e)=>{var M=e(77304),I=e(35943);function t(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var n=this._validate(i,this.minMonth,this.minDay,M.local.invalidYear);return(i=n.year()+(n.year()<0?1:0))%4==3||i%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,n,i){var u=this.newDate(T,n,i);return u.add(-u.dayOfWeek(),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(T,n){var i=this._validate(T,n,this.minDay,M.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(T,n,i){return(this.dayOfWeek(T,n,i)||7)<6},toJD:function(T,n,i){var u=this._validate(T,n,i,M.local.invalidDate);return(T=u.year())<0&&T++,u.day()+30*(u.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var n=Math.floor(T)+.5-this.jdEpoch,i=Math.floor((n-Math.floor((n+366)/1461))/365)+1;i<=0&&i--,n=Math.floor(T)+.5-this.newDate(i,1,1).toJD();var u=Math.floor(n/30)+1,a=n-30*(u-1)+1;return this.newDate(i,u,a)}}),M.calendars.coptic=t},68332:($,K,e)=>{var M=e(77304),I=e(35943);function t(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(n){return this._validate(n,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(n){return this._validate(n,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(n,i,u){var a=this.newDate(n,i,u);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(n,i){var u=this._validate(n,i,this.minDay,M.local.invalidMonth);return this.daysPerMonth[u.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(n,i,u){return(this._validate(n,i,u,M.local.invalidDate).day()+1)%8},weekDay:function(n,i,u){var a=this.dayOfWeek(n,i,u);return a>=2&&a<=6},extraInfo:function(n,i,u){var a=this._validate(n,i,u,M.local.invalidDate);return{century:T[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(n,i,u){var a=this._validate(n,i,u,M.local.invalidDate);return n=a.year()+(a.year()<0?1:0),i=a.month(),(u=a.day())+(i>1?16:0)+(i>2?32*(i-2):0)+400*(n-1)+this.jdEpoch-1},fromJD:function(n){n=Math.floor(n+.5)-Math.floor(this.jdEpoch)-1;var i=Math.floor(n/400)+1;n-=400*(i-1),n+=n>15?16:0;var u=Math.floor(n/32)+1,a=n-32*(u-1)+1;return this.newDate(i<=0?i-1:i,u,a)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=t},37452:($,K,e)=>{var M=e(77304),I=e(35943);function t(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var n=this._validate(i,this.minMonth,this.minDay,M.local.invalidYear);return(i=n.year()+(n.year()<0?1:0))%4==3||i%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,n,i){var u=this.newDate(T,n,i);return u.add(-u.dayOfWeek(),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(T,n){var i=this._validate(T,n,this.minDay,M.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(T,n,i){return(this.dayOfWeek(T,n,i)||7)<6},toJD:function(T,n,i){var u=this._validate(T,n,i,M.local.invalidDate);return(T=u.year())<0&&T++,u.day()+30*(u.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var n=Math.floor(T)+.5-this.jdEpoch,i=Math.floor((n-Math.floor((n+366)/1461))/365)+1;i<=0&&i--,n=Math.floor(T)+.5-this.newDate(i,1,1).toJD();var u=Math.floor(n/30)+1,a=n-30*(u-1)+1;return this.newDate(i,u,a)}}),M.calendars.ethiopian=t},33212:($,K,e)=>{var M=e(77304),I=e(35943);function t(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}function T(n,i){return n-i*Math.floor(n/i)}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var i=this._validate(n,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(i.year())},_leapYear:function(n){return T(7*(n=n<0?n+1:n)+1,19)<7},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(n.year?n.year():n)?13:12},weekOfYear:function(n,i,u){var a=this.newDate(n,i,u);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(n){return n=this._validate(n,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(-1===n?1:n+1,7,1)-this.toJD(n,7,1)},daysInMonth:function(n,i){return n.year&&(i=n.month(),n=n.year()),this._validate(n,i,this.minDay,M.local.invalidMonth),12===i&&this.leapYear(n)||8===i&&5===T(this.daysInYear(n),10)?30:9===i&&3===T(this.daysInYear(n),10)?29:this.daysPerMonth[i-1]},weekDay:function(n,i,u){return 6!==this.dayOfWeek(n,i,u)},extraInfo:function(n,i,u){var a=this._validate(n,i,u,M.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(n,i,u){var a=this._validate(n,i,u,M.local.invalidDate);n=a.year(),i=a.month(),u=a.day();var r=n<=0?n+1:n,o=this.jdEpoch+this._delay1(r)+this._delay2(r)+u+1;if(i<7){for(var v=7;v<=this.monthsInYear(n);v++)o+=this.daysInMonth(n,v);for(v=1;v<i;v++)o+=this.daysInMonth(n,v)}else for(v=7;v<i;v++)o+=this.daysInMonth(n,v);return o},_delay1:function(n){var i=Math.floor((235*n-234)/19),u=12084+13753*i,a=29*i+Math.floor(u/25920);return T(3*(a+1),7)<3&&a++,a},_delay2:function(n){var i=this._delay1(n-1),u=this._delay1(n);return this._delay1(n+1)-u==356?2:u-i==382?1:0},fromJD:function(n){n=Math.floor(n)+.5;for(var i=Math.floor(98496*(n-this.jdEpoch)/35975351)-1;n>=this.toJD(-1===i?1:i+1,7,1);)i++;for(var u=n<this.toJD(i,1,1)?7:1;n>this.toJD(i,u,this.daysInMonth(i,u));)u++;var a=n-this.toJD(i,u,1)+1;return this.newDate(i,u,a)}}),M.calendars.hebrew=t},81568:($,K,e)=>{var M=e(77304),I=e(35943);function t(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,n,i){var u=this.newDate(T,n,i);return u.add(-u.dayOfWeek(),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,n){var i=this._validate(T,n,this.minDay,M.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(T,n,i){return 5!==this.dayOfWeek(T,n,i)},toJD:function(T,n,i){var u=this._validate(T,n,i,M.local.invalidDate);return T=u.year(),n=u.month(),T=T<=0?T+1:T,(i=u.day())+Math.ceil(29.5*(n-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var n=Math.floor((30*(T-this.jdEpoch)+10646)/10631);n=n<=0?n-1:n;var i=Math.min(12,Math.ceil((T-29-this.toJD(n,1,1))/29.5)+1),u=T-this.toJD(n,i,1)+1;return this.newDate(n,i,u)}}),M.calendars.islamic=t},67436:($,K,e)=>{var M=e(77304),I=e(35943);function t(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var n=this._validate(i,this.minMonth,this.minDay,M.local.invalidYear);return(i=n.year()<0?n.year()+1:n.year())%4==0},weekOfYear:function(T,n,i){var u=this.newDate(T,n,i);return u.add(4-(u.dayOfWeek()||7),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(T,n){var i=this._validate(T,n,this.minDay,M.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(T,n,i){return(this.dayOfWeek(T,n,i)||7)<6},toJD:function(T,n,i){var u=this._validate(T,n,i,M.local.invalidDate);return T=u.year(),n=u.month(),i=u.day(),T<0&&T++,n<=2&&(T--,n+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(n+1))+i-1524.5},fromJD:function(T){var i=Math.floor(T+.5)+1524,u=Math.floor((i-122.1)/365.25),a=Math.floor(365.25*u),r=Math.floor((i-a)/30.6001),o=r-Math.floor(r<14?1:13),v=u-Math.floor(o>2?4716:4715),p=i-a-Math.floor(30.6001*r);return v<=0&&v--,this.newDate(v,o,p)}}),M.calendars.julian=t},52873:($,K,e)=>{var M=e(77304),I=e(35943);function t(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function T(i,u){return i-u*Math.floor(i/u)}function n(i,u){return T(i-1,u)+1}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(i){i=this._validate(i,this.minMonth,this.minDay,M.local.invalidYear).year();var a=Math.floor(i/400);return i%=400,i+=i<0?400:0,a+"."+Math.floor(i/20)+"."+i%20},forYear:function(i){if((i=i.split(".")).length<3)throw"Invalid Mayan year";for(var u=0,a=0;a<i.length;a++){var r=parseInt(i[a],10);if(Math.abs(r)>19||a>0&&r<0)throw"Invalid Mayan year";u=20*u+r}return u},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(i,u,a){return this._validate(i,u,a,M.local.invalidDate),0},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(i,u){return this._validate(i,u,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(i,u,a){return this._validate(i,u,a,M.local.invalidDate).day()},weekDay:function(i,u,a){return this._validate(i,u,a,M.local.invalidDate),!0},extraInfo:function(i,u,a){var o=this._validate(i,u,a,M.local.invalidDate).toJD(),v=this._toHaab(o),p=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[v[0]-1],haabMonth:v[0],haabDay:v[1],tzolkinDayName:this.local.tzolkinMonths[p[0]-1],tzolkinDay:p[0],tzolkinTrecena:p[1]}},_toHaab:function(i){var u=T((i-=this.jdEpoch)+8+340,365);return[Math.floor(u/20)+1,T(u,20)]},_toTzolkin:function(i){return[n((i-=this.jdEpoch)+20,20),n(i+4,13)]},toJD:function(i,u,a){var r=this._validate(i,u,a,M.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(i){i=Math.floor(i)+.5-this.jdEpoch;var u=Math.floor(i/360);i%=360,i+=i<0?360:0;var a=Math.floor(i/20),r=i%20;return this.newDate(u,a,r)}}),M.calendars.mayan=t},51361:($,K,e)=>{var M=e(77304),I=e(35943);function t(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar;var T=M.instance("gregorian");I(t.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var i=this._validate(n,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(i.year()+(i.year()<1?1:0)+1469)},weekOfYear:function(n,i,u){var a=this.newDate(n,i,u);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(n,i){var u=this._validate(n,i,this.minDay,M.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(12===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(n,i,u){return(this.dayOfWeek(n,i,u)||7)<6},toJD:function(r,i,u){var a=this._validate(r,i,u,M.local.invalidMonth);(r=a.year())<0&&r++;for(var o=a.day(),v=1;v<a.month();v++)o+=this.daysPerMonth[v-1];return o+T.toJD(r+1468,3,13)},fromJD:function(n){n=Math.floor(n+.5);for(var i=Math.floor((n-(this.jdEpoch-1))/366);n>=this.toJD(i+1,1,1);)i++;for(var u=n-Math.floor(this.toJD(i,1,1)+.5)+1,a=1;u>this.daysInMonth(i,a);)u-=this.daysInMonth(i,a),a++;return this.newDate(i,a,u)}}),M.calendars.nanakshahi=t},98892:($,K,e)=>{var M=e(77304),I=e(35943);function t(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,n,i){var u=this.newDate(T,n,i);return u.add(-u.dayOfWeek(),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var i=0,u=this.minMonth;u<=12;u++)i+=this.NEPALI_CALENDAR_DATA[T][u];return i},daysInMonth:function(T,n){return T.year&&(n=T.month(),T=T.year()),this._validate(T,n,this.minDay,M.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[n-1]:this.NEPALI_CALENDAR_DATA[T][n]},weekDay:function(T,n,i){return 6!==this.dayOfWeek(T,n,i)},toJD:function(T,n,i){var u=this._validate(T,n,i,M.local.invalidDate);T=u.year(),n=u.month(),i=u.day();var a=M.instance(),r=0,o=n,v=T;this._createMissingCalendarData(T);var p=T-(o>9||9===o&&i>=this.NEPALI_CALENDAR_DATA[v][0]?56:57);for(9!==n&&(r=i,o--);9!==o;)o<=0&&(o=12,v--),r+=this.NEPALI_CALENDAR_DATA[v][o],o--;return 9===n?(r+=i-this.NEPALI_CALENDAR_DATA[v][0])<0&&(r+=a.daysInYear(p)):r+=this.NEPALI_CALENDAR_DATA[v][9]-this.NEPALI_CALENDAR_DATA[v][0],a.newDate(p,1,1).add(r,"d").toJD()},fromJD:function(T){var i=M.instance().fromJD(T),u=i.year(),a=i.dayOfYear(),r=u+56;this._createMissingCalendarData(r);for(var o=9,v=this.NEPALI_CALENDAR_DATA[r][0],p=this.NEPALI_CALENDAR_DATA[r][o]-v+1;a>p;)++o>12&&(o=1,r++),p+=this.NEPALI_CALENDAR_DATA[r][o];var f=this.NEPALI_CALENDAR_DATA[r][o]-(p-a);return this.newDate(r,o,f)},_createMissingCalendarData:function(T){var n=this.daysPerMonth.slice(0);n.unshift(17);for(var i=T-1;i<T+2;i++)typeof this.NEPALI_CALENDAR_DATA[i]>"u"&&(this.NEPALI_CALENDAR_DATA[i]=n)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=t},70310:($,K,e)=>{var M=e(77304),I=e(35943);function t(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}function T(n,i){return n-i*Math.floor(n/i)}t.prototype=new M.baseCalendar,I(t.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(n){var i=this._validate(n,this.minMonth,this.minDay,M.local.invalidYear);return 682*((i.year()-(i.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(n,i,u){var a=this.newDate(n,i,u);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(n,i){var u=this._validate(n,i,this.minDay,M.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(12===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(n,i,u){return 5!==this.dayOfWeek(n,i,u)},toJD:function(n,i,u){var a=this._validate(n,i,u,M.local.invalidDate);n=a.year(),i=a.month(),u=a.day();var r=n-(n>=0?474:473),o=474+T(r,2820);return u+(i<=7?31*(i-1):30*(i-1)+6)+Math.floor((682*o-110)/2816)+365*(o-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(n){var i=(n=Math.floor(n)+.5)-this.toJD(475,1,1),u=Math.floor(i/1029983),a=T(i,1029983),r=2820;if(1029982!==a){var o=Math.floor(a/366),v=T(a,366);r=Math.floor((2134*o+2816*v+2815)/1028522)+o+1}var p=r+2820*u+474;p=p<=0?p-1:p;var f=n-this.toJD(p,1,1)+1,l=f<=186?Math.ceil(f/31):Math.ceil((f-6)/30),y=n-this.toJD(p,l,1)+1;return this.newDate(p,l,y)}}),M.calendars.persian=t,M.calendars.jalali=t},4238:($,K,e)=>{var M=e(77304),I=e(35943),t=M.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,I(T.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(u){var i=this._validate(u,this.minMonth,this.minDay,M.local.invalidYear);u=this._t2gYear(i.year());return t.leapYear(u)},weekOfYear:function(r,i,u){var a=this._validate(r,this.minMonth,this.minDay,M.local.invalidYear);r=this._t2gYear(a.year());return t.weekOfYear(r,a.month(),a.day())},daysInMonth:function(n,i){var u=this._validate(n,i,this.minDay,M.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(2===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(n,i,u){return(this.dayOfWeek(n,i,u)||7)<6},toJD:function(r,i,u){var a=this._validate(r,i,u,M.local.invalidDate);r=this._t2gYear(a.year());return t.toJD(r,a.month(),a.day())},fromJD:function(n){var i=t.fromJD(n),u=this._g2tYear(i.year());return this.newDate(u,i.month(),i.day())},_t2gYear:function(n){return n+this.yearsOffset+(n>=-this.yearsOffset&&n<=-1?1:0)},_g2tYear:function(n){return n-this.yearsOffset-(n>=1&&n<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},30435:($,K,e)=>{var M=e(77304),I=e(35943),t=M.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,I(T.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(u){var i=this._validate(u,this.minMonth,this.minDay,M.local.invalidYear);u=this._t2gYear(i.year());return t.leapYear(u)},weekOfYear:function(r,i,u){var a=this._validate(r,this.minMonth,this.minDay,M.local.invalidYear);r=this._t2gYear(a.year());return t.weekOfYear(r,a.month(),a.day())},daysInMonth:function(n,i){var u=this._validate(n,i,this.minDay,M.local.invalidMonth);return this.daysPerMonth[u.month()-1]+(2===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(n,i,u){return(this.dayOfWeek(n,i,u)||7)<6},toJD:function(r,i,u){var a=this._validate(r,i,u,M.local.invalidDate);r=this._t2gYear(a.year());return t.toJD(r,a.month(),a.day())},fromJD:function(n){var i=t.fromJD(n),u=this._g2tYear(i.year());return this.newDate(u,i.month(),i.day())},_t2gYear:function(n){return n-this.yearsOffset-(n>=1&&n<=this.yearsOffset?1:0)},_g2tYear:function(n){return n+this.yearsOffset+(n>=-this.yearsOffset&&n<=-1?1:0)}}),M.calendars.thai=T},9768:($,K,e)=>{var M=e(77304),I=e(35943);function t(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}t.prototype=new M.baseCalendar,I(t.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(n){var i=this._validate(n,this.minMonth,this.minDay,M.local.invalidYear);return 355===this.daysInYear(i.year())},weekOfYear:function(n,i,u){var a=this.newDate(n,i,u);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(n){for(var i=0,u=1;u<=12;u++)i+=this.daysInMonth(n,u);return i},daysInMonth:function(n,i){for(var a=this._validate(n,i,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,r=0,o=0;o<T.length;o++){if(T[o]>a)return T[r]-T[r-1];r++}return 30},weekDay:function(n,i,u){return 5!==this.dayOfWeek(n,i,u)},toJD:function(n,i,u){var a=this._validate(n,i,u,M.local.invalidDate),r=12*(a.year()-1)+a.month()-15292;return a.day()+T[r-1]-1+24e5-.5},fromJD:function(n){for(var i=n-24e5+.5,u=0,a=0;a<T.length&&!(T[a]>i);a++)u++;var r=u+15292,o=Math.floor((r-1)/12),v=o+1,p=r-12*o,f=i-T[u-1]+1;return this.newDate(v,p,f)},isValid:function(n,i,u){var a=M.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(a=(n=null!=n.year?n.year:n)>=1276&&n<=1500),a},_validate:function(n,i,u,a){var r=M.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw a.replace(/\{0\}/,this.local.name);return r}}),M.calendars.ummalqura=t;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},77304:($,K,e)=>{var M=e(35943);function I(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function t(a,r,o,v){if(this._calendar=a,this._year=r,this._month=o,this._day=v,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(a,r){return a=""+a,"000000".substring(0,r-a.length)+a}function n(){this.shortYearCutoff="+10"}function i(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}M(I.prototype,{instance:function(a,r){a=(a||"gregorian").toLowerCase(),r=r||"";var o=this._localCals[a+"-"+r];if(!o&&this.calendars[a]&&(o=new this.calendars[a](r),this._localCals[a+"-"+r]=o),!o)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return o},newDate:function(a,r,o,v,p){return(v=(null!=a&&a.year?a.calendar():"string"==typeof v?this.instance(v,p):v)||this.instance()).newDate(a,r,o)},substituteDigits:function(a){return function(r){return(r+"").replace(/[0-9]/g,function(o){return a[o]})}},substituteChineseDigits:function(a,r){return function(o){for(var v="",p=0;o>0;){var f=o%10;v=(0===f?"":a[f]+r[p])+v,p++,o=Math.floor(o/10)}return 0===v.indexOf(a[1]+r[1])&&(v=v.substr(1)),v||a[0]}}}),M(t.prototype,{newDate:function(a,r,o){return this._calendar.newDate(a??this,r,o)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,r,o){if(!this._calendar.isValid(a,r,o))throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=r,this._day=o,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,r){return this._calendar.add(this,a,r)},set:function(a,r){return this._calendar.set(this,a,r)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var r=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===r?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(n.prototype,{_validateLevel:0,newDate:function(a,r,o){return null==a?this.today():(a.year&&(this._validate(a,r,o,u.local.invalidDate||u.regionalOptions[""].invalidDate),o=a.day(),r=a.month(),a=a.year()),new t(this,a,r,o))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return this._validate(a,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+T(Math.abs(r.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear),12},monthOfYear:function(a,r){var o=this._validate(a,r,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return(o.month()+this.monthsInYear(o)-this.firstMonth)%this.monthsInYear(o)+this.minMonth},fromMonthOfYear:function(a,r){var o=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,o,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth),o},daysInYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(a,r,o){var v=this._validate(a,r,o,u.local.invalidDate||u.regionalOptions[""].invalidDate);return v.toJD()-this.newDate(v.year(),this.fromMonthOfYear(v.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,r,o){var v=this._validate(a,r,o,u.local.invalidDate||u.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(v))+2)%this.daysInWeek()},extraInfo:function(a,r,o){return this._validate(a,r,o,u.local.invalidDate||u.regionalOptions[""].invalidDate),{}},add:function(a,r,o){return this._validate(a,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,r,o),r,o)},_add:function(a,r,o){if(this._validateLevel++,"d"===o||"w"===o){var v=a.toJD()+r*("w"===o?this.daysInWeek():1),p=a.calendar().fromJD(v);return this._validateLevel--,[p.year(),p.month(),p.day()]}try{var f=a.year()+("y"===o?r:0),l=a.monthOfYear()+("m"===o?r:0);p=a.day();"y"===o?(a.month()!==this.fromMonthOfYear(f,l)&&(l=this.newDate(f,a.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(f)),p=Math.min(p,this.daysInMonth(f,this.fromMonthOfYear(f,l)))):"m"===o&&(function(h){for(;l<h.minMonth;)f--,l+=h.monthsInYear(f);for(var g=h.monthsInYear(f);l>g-1+h.minMonth;)f++,l-=g,g=h.monthsInYear(f)}(this),p=Math.min(p,this.daysInMonth(f,this.fromMonthOfYear(f,l))));var s=[f,this.fromMonthOfYear(f,l),p];return this._validateLevel--,s}catch(x){throw this._validateLevel--,x}},_correctAdd:function(a,r,o,v){if(!(this.hasYearZero||"y"!==v&&"m"!==v||0!==r[0]&&a.year()>0==r[0]>0)){var p={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[v],f=o<0?-1:1;r=this._add(a,o*p[0]+f*p[1],p[2])}return a.date(r[0],r[1],r[2])},set:function(a,r,o){this._validate(a,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);var v="y"===o?r:a.year(),p="m"===o?r:a.month(),f="d"===o?r:a.day();return("y"===o||"m"===o)&&(f=Math.min(f,this.daysInMonth(v,p))),a.date(v,p,f)},isValid:function(a,r,o){this._validateLevel++;var v=this.hasYearZero||0!==a;if(v){var p=this.newDate(a,r,this.minDay);v=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(p)&&o>=this.minDay&&o-this.minDay<this.daysInMonth(p)}return this._validateLevel--,v},toJSDate:function(a,r,o){var v=this._validate(a,r,o,u.local.invalidDate||u.regionalOptions[""].invalidDate);return u.instance().fromJD(this.toJD(v)).toJSDate()},fromJSDate:function(a){return this.fromJD(u.instance().fromJSDate(a).toJD())},_validate:function(a,r,o,v){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(a,r,o))throw v.replace(/\{0\}/,this.local.name);var p=this.newDate(a,r,o);return this._validateLevel--,p}catch(f){throw this._validateLevel--,f}}}),i.prototype=new n,M(i.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var r=this._validate(o,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return(o=r.year()+(r.year()<0?1:0))%4==0&&(o%100!=0||o%400==0)},weekOfYear:function(a,r,o){var v=this.newDate(a,r,o);return v.add(4-(v.dayOfWeek()||7),"d"),Math.floor((v.dayOfYear()-1)/7)+1},daysInMonth:function(a,r){var o=this._validate(a,r,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return this.daysPerMonth[o.month()-1]+(2===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(a,r,o){return(this.dayOfWeek(a,r,o)||7)<6},toJD:function(a,r,o){var v=this._validate(a,r,o,u.local.invalidDate||u.regionalOptions[""].invalidDate);a=v.year(),r=v.month(),o=v.day(),a<0&&a++,r<3&&(r+=12,a--);var p=Math.floor(a/100),f=2-p+Math.floor(p/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(r+1))+o+f-1524.5},fromJD:function(a){var r=Math.floor(a+.5),o=Math.floor((r-1867216.25)/36524.25),v=(o=r+1+o-Math.floor(o/4))+1524,p=Math.floor((v-122.1)/365.25),f=Math.floor(365.25*p),l=Math.floor((v-f)/30.6001),y=v-f-Math.floor(30.6001*l),s=l-(l>13.5?13:1),x=p-(s>2.5?4716:4715);return x<=0&&x--,this.newDate(x,s,y)},toJSDate:function(a,r,o){var v=this._validate(a,r,o,u.local.invalidDate||u.regionalOptions[""].invalidDate),p=new Date(v.year(),v.month()-1,v.day());return p.setHours(0),p.setMinutes(0),p.setSeconds(0),p.setMilliseconds(0),p.setHours(p.getHours()>12?p.getHours()+2:0),p},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var u=$.exports=new I;u.cdate=t,u.baseCalendar=n,u.calendars.gregorian=i},43050:($,K,e)=>{var M=e(35943),I=e(77304);M(I.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),I.local=I.regionalOptions[""],M(I.cdate.prototype,{formatDate:function(t,T){return"string"!=typeof t&&(T=t,t=""),this._calendar.formatDate(t||"",this,T)}}),M(I.baseCalendar.prototype,{UNIX_EPOCH:I.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:I.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(t,T,n){if("string"!=typeof t&&(n=T,T=t,t=""),!T)return"";if(T.calendar()!==this)throw I.local.invalidFormat||I.regionalOptions[""].invalidFormat;t=t||this.local.dateFormat;for(var i=(n=n||{}).dayNamesShort||this.local.dayNamesShort,u=n.dayNames||this.local.dayNames,a=n.monthNumbers||this.local.monthNumbers,r=n.monthNamesShort||this.local.monthNamesShort,o=n.monthNames||this.local.monthNames,p=(n.calculateWeek||this.local.calculateWeek,function(b,c){for(var S=1;A+S<t.length&&t.charAt(A+S)===b;)S++;return A+=S-1,Math.floor(S/(c||1))>1}),f=function(b,c,S,w){var E=""+c;if(p(b,w))for(;E.length<S;)E="0"+E;return E},y=this,s=function(b){return"function"==typeof a?a.call(y,b,p("m")):g(f("m",b.month(),2))},x=function(b,c){return c?"function"==typeof o?o.call(y,b):o[b.month()-y.minMonth]:"function"==typeof r?r.call(y,b):r[b.month()-y.minMonth]},h=this.local.digits,g=function(b){return n.localNumbers&&h?h(b):b},m="",d=!1,A=0;A<t.length;A++)if(d)"'"!==t.charAt(A)||p("'")?m+=t.charAt(A):d=!1;else switch(t.charAt(A)){case"d":m+=g(f("d",T.day(),2));break;case"D":m+=(b="D",c=T.dayOfWeek(),S=i,w=u,p(b)?w[c]:S[c]);break;case"o":m+=f("o",T.dayOfYear(),3);break;case"w":m+=f("w",T.weekOfYear(),2);break;case"m":m+=s(T);break;case"M":m+=x(T,p("M"));break;case"y":m+=p("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":p("Y",2),m+=T.formatYear();break;case"J":m+=T.toJD();break;case"@":m+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":p("'")?m+="'":d=!0;break;default:m+=t.charAt(A)}var b,c,S,w;return m},parseDate:function(t,T,n){if(null==T)throw I.local.invalidArguments||I.regionalOptions[""].invalidArguments;if(""===(T="object"==typeof T?T.toString():T+""))return null;t=t||this.local.dateFormat;var i=(n=n||{}).shortYearCutoff||this.shortYearCutoff;i="string"!=typeof i?i:this.today().year()%100+parseInt(i,10);for(var u=n.dayNamesShort||this.local.dayNamesShort,a=n.dayNames||this.local.dayNames,r=n.parseMonth||this.local.parseMonth,o=n.monthNumbers||this.local.monthNumbers,v=n.monthNamesShort||this.local.monthNamesShort,p=n.monthNames||this.local.monthNames,f=-1,l=-1,y=-1,s=-1,x=-1,h=!1,g=!1,m=function(_,z){for(var D=1;P+D<t.length&&t.charAt(P+D)===_;)D++;return P+=D-1,Math.floor(D/(z||1))>1},d=function(_,z){var D=m(_,z),k=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(_)+1],O=new RegExp("^-?\\d{1,"+k+"}"),U=T.substring(E).match(O);if(!U)throw(I.local.missingNumberAt||I.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=U[0].length,parseInt(U[0],10)},A=this,b=function(){if("function"==typeof o){m("m");var _=o.call(A,T.substring(E));return E+=_.length,_}return d("m")},c=function(_,z,D,k){for(var O=m(_,k)?D:z,U=0;U<O.length;U++)if(T.substr(E,O[U].length).toLowerCase()===O[U].toLowerCase())return E+=O[U].length,U+A.minMonth;throw(I.local.unknownNameAt||I.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if("function"==typeof p){var _=m("M")?p.call(A,T.substring(E)):v.call(A,T.substring(E));return E+=_.length,_}return c("M",v,p)},w=function(){if(T.charAt(E)!==t.charAt(P))throw(I.local.unexpectedLiteralAt||I.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,P=0;P<t.length;P++)if(g)"'"!==t.charAt(P)||m("'")?w():g=!1;else switch(t.charAt(P)){case"d":s=d("d");break;case"D":c("D",u,a);break;case"o":x=d("o");break;case"w":d("w");break;case"m":y=b();break;case"M":y=S();break;case"y":var R=P;h=!m("y",2),P=R,l=d("y",2);break;case"Y":l=d("Y",2);break;case"J":f=d("J")+.5,"."===T.charAt(E)&&(E++,d("J"));break;case"@":f=d("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=d("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":m("'")?w():g=!0;break;default:w()}if(E<T.length)throw I.local.unexpectedText||I.regionalOptions[""].unexpectedText;if(-1===l?l=this.today().year():l<100&&h&&(l+=-1===i?1900:this.today().year()-this.today().year()%100-(l<=i?0:100)),"string"==typeof y&&(y=r.call(this,l,y)),x>-1){y=1,s=x;for(var F=this.daysInMonth(l,y);s>F;F=this.daysInMonth(l,y))y++,s-=F}return f>-1?this.fromJD(f):this.newDate(l,y,s)},determineDate:function(t,T,n,i,u){n&&"object"!=typeof n&&(u=i,i=n,n=null),"string"!=typeof i&&(u=i,i="");var a=this;return T=T?T.newDate():null,t=null==t?T:"string"==typeof t?function(o){try{return a.parseDate(i,o,u)}catch{}for(var v=((o=o.toLowerCase()).match(/^c/)&&n?n.newDate():null)||a.today(),p=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,f=p.exec(o);f;)v.add(parseInt(f[1],10),f[2]||"d"),f=p.exec(o);return v}(t):"number"==typeof t?isNaN(t)||t===1/0||t===-1/0?T:a.today().add(t,"d"):a.newDate(t)}})},52361:()=>{},94616:()=>{},87029:$=>{"use strict";var K=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],e=typeof globalThis>"u"?global:globalThis;$.exports=function(){for(var I=[],t=0;t<K.length;t++)"function"==typeof e[K[t]]&&(I[I.length]=K[t]);return I}},80791:function($){$.exports=function(){"use strict";function K(B){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(te){return typeof te}:function(te){return te&&"function"==typeof Symbol&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te})(B)}var e=/^\s+/,M=/\s+$/;function I(B,te){if(te=te||{},(B=B||"")instanceof I)return B;if(!(this instanceof I))return new I(B,te);var q=t(B);this._originalInput=B,this._r=q.r,this._g=q.g,this._b=q.b,this._a=q.a,this._roundA=Math.round(100*this._a)/100,this._format=te.format||q.format,this._gradientType=te.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=q.ok}function t(B){var te={r:0,g:0,b:0},q=1,oe=null,ie=null,V=null,Y=!1,ae=!1;return"string"==typeof B&&(B=ee(B)),"object"==K(B)&&(j(B.r)&&j(B.g)&&j(B.b)?(te=T(B.r,B.g,B.b),Y=!0,ae="%"===String(B.r).substr(-1)?"prgb":"rgb"):j(B.h)&&j(B.s)&&j(B.v)?(oe=k(B.s),ie=k(B.v),te=a(B.h,oe,ie),Y=!0,ae="hsv"):j(B.h)&&j(B.s)&&j(B.l)&&(oe=k(B.s),V=k(B.l),te=i(B.h,oe,V),Y=!0,ae="hsl"),B.hasOwnProperty("a")&&(q=B.a)),q=E(q),{ok:Y,format:B.format||ae,r:Math.min(255,Math.max(te.r,0)),g:Math.min(255,Math.max(te.g,0)),b:Math.min(255,Math.max(te.b,0)),a:q}}function T(B,te,q){return{r:255*P(B,255),g:255*P(te,255),b:255*P(q,255)}}function n(B,te,q){B=P(B,255),te=P(te,255),q=P(q,255);var V,Y,oe=Math.max(B,te,q),ie=Math.min(B,te,q),ae=(oe+ie)/2;if(oe==ie)V=Y=0;else{var X=oe-ie;switch(Y=ae>.5?X/(2-oe-ie):X/(oe+ie),oe){case B:V=(te-q)/X+(te<q?6:0);break;case te:V=(q-B)/X+2;break;case q:V=(B-te)/X+4}V/=6}return{h:V,s:Y,l:ae}}function i(B,te,q){var oe,ie,V;function Y(J,ue,re){return re<0&&(re+=1),re>1&&(re-=1),re<1/6?J+6*(ue-J)*re:re<.5?ue:re<2/3?J+(ue-J)*(2/3-re)*6:J}if(B=P(B,360),te=P(te,100),q=P(q,100),0===te)oe=ie=V=q;else{var ae=q<.5?q*(1+te):q+te-q*te,X=2*q-ae;oe=Y(X,ae,B+1/3),ie=Y(X,ae,B),V=Y(X,ae,B-1/3)}return{r:255*oe,g:255*ie,b:255*V}}function u(B,te,q){B=P(B,255),te=P(te,255),q=P(q,255);var V,Y,oe=Math.max(B,te,q),ie=Math.min(B,te,q),ae=oe,X=oe-ie;if(Y=0===oe?0:X/oe,oe==ie)V=0;else{switch(oe){case B:V=(te-q)/X+(te<q?6:0);break;case te:V=(q-B)/X+2;break;case q:V=(B-te)/X+4}V/=6}return{h:V,s:Y,v:ae}}function a(B,te,q){B=6*P(B,360),te=P(te,100),q=P(q,100);var oe=Math.floor(B),ie=B-oe,V=q*(1-te),Y=q*(1-ie*te),ae=q*(1-(1-ie)*te),X=oe%6;return{r:255*[q,Y,V,V,ae,q][X],g:255*[ae,q,q,Y,V,V][X],b:255*[V,V,ae,q,q,Y][X]}}function r(B,te,q,oe){var ie=[D(Math.round(B).toString(16)),D(Math.round(te).toString(16)),D(Math.round(q).toString(16))];return oe&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function o(B,te,q,oe,ie){var V=[D(Math.round(B).toString(16)),D(Math.round(te).toString(16)),D(Math.round(q).toString(16)),D(O(oe))];return ie&&V[0].charAt(0)==V[0].charAt(1)&&V[1].charAt(0)==V[1].charAt(1)&&V[2].charAt(0)==V[2].charAt(1)&&V[3].charAt(0)==V[3].charAt(1)?V[0].charAt(0)+V[1].charAt(0)+V[2].charAt(0)+V[3].charAt(0):V.join("")}function v(B,te,q,oe){return[D(O(oe)),D(Math.round(B).toString(16)),D(Math.round(te).toString(16)),D(Math.round(q).toString(16))].join("")}function p(B,te){te=0===te?0:te||10;var q=I(B).toHsl();return q.s-=te/100,q.s=R(q.s),I(q)}function f(B,te){te=0===te?0:te||10;var q=I(B).toHsl();return q.s+=te/100,q.s=R(q.s),I(q)}function l(B){return I(B).desaturate(100)}function y(B,te){te=0===te?0:te||10;var q=I(B).toHsl();return q.l+=te/100,q.l=R(q.l),I(q)}function s(B,te){te=0===te?0:te||10;var q=I(B).toRgb();return q.r=Math.max(0,Math.min(255,q.r-Math.round(-te/100*255))),q.g=Math.max(0,Math.min(255,q.g-Math.round(-te/100*255))),q.b=Math.max(0,Math.min(255,q.b-Math.round(-te/100*255))),I(q)}function x(B,te){te=0===te?0:te||10;var q=I(B).toHsl();return q.l-=te/100,q.l=R(q.l),I(q)}function h(B,te){var q=I(B).toHsl(),oe=(q.h+te)%360;return q.h=oe<0?360+oe:oe,I(q)}function g(B){var te=I(B).toHsl();return te.h=(te.h+180)%360,I(te)}function m(B,te){if(isNaN(te)||te<=0)throw new Error("Argument to polyad must be a positive number");for(var q=I(B).toHsl(),oe=[I(B)],ie=360/te,V=1;V<te;V++)oe.push(I({h:(q.h+V*ie)%360,s:q.s,l:q.l}));return oe}function d(B){var te=I(B).toHsl(),q=te.h;return[I(B),I({h:(q+72)%360,s:te.s,l:te.l}),I({h:(q+216)%360,s:te.s,l:te.l})]}function A(B,te,q){te=te||6,q=q||30;var oe=I(B).toHsl(),ie=360/q,V=[I(B)];for(oe.h=(oe.h-(ie*te>>1)+720)%360;--te;)oe.h=(oe.h+ie)%360,V.push(I(oe));return V}function b(B,te){te=te||6;for(var q=I(B).toHsv(),oe=q.h,ie=q.s,V=q.v,Y=[],ae=1/te;te--;)Y.push(I({h:oe,s:ie,v:V})),V=(V+ae)%1;return Y}I.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var te=this.toRgb();return(299*te.r+587*te.g+114*te.b)/1e3},getLuminance:function(){var q,oe,ie,te=this.toRgb();return q=te.r/255,oe=te.g/255,ie=te.b/255,.2126*(q<=.03928?q/12.92:Math.pow((q+.055)/1.055,2.4))+.7152*(oe<=.03928?oe/12.92:Math.pow((oe+.055)/1.055,2.4))+.0722*(ie<=.03928?ie/12.92:Math.pow((ie+.055)/1.055,2.4))},setAlpha:function(te){return this._a=E(te),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var te=u(this._r,this._g,this._b);return{h:360*te.h,s:te.s,v:te.v,a:this._a}},toHsvString:function(){var te=u(this._r,this._g,this._b),q=Math.round(360*te.h),oe=Math.round(100*te.s),ie=Math.round(100*te.v);return 1==this._a?"hsv("+q+", "+oe+"%, "+ie+"%)":"hsva("+q+", "+oe+"%, "+ie+"%, "+this._roundA+")"},toHsl:function(){var te=n(this._r,this._g,this._b);return{h:360*te.h,s:te.s,l:te.l,a:this._a}},toHslString:function(){var te=n(this._r,this._g,this._b),q=Math.round(360*te.h),oe=Math.round(100*te.s),ie=Math.round(100*te.l);return 1==this._a?"hsl("+q+", "+oe+"%, "+ie+"%)":"hsla("+q+", "+oe+"%, "+ie+"%, "+this._roundA+")"},toHex:function(te){return r(this._r,this._g,this._b,te)},toHexString:function(te){return"#"+this.toHex(te)},toHex8:function(te){return o(this._r,this._g,this._b,this._a,te)},toHex8String:function(te){return"#"+this.toHex8(te)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*P(this._r,255))+"%",g:Math.round(100*P(this._g,255))+"%",b:Math.round(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%)":"rgba("+Math.round(100*P(this._r,255))+"%, "+Math.round(100*P(this._g,255))+"%, "+Math.round(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[r(this._r,this._g,this._b,!0)]||!1)},toFilter:function(te){var q="#"+v(this._r,this._g,this._b,this._a),oe=q,ie=this._gradientType?"GradientType = 1, ":"";if(te){var V=I(te);oe="#"+v(V._r,V._g,V._b,V._a)}return"progid:DXImageTransform.Microsoft.gradient("+ie+"startColorstr="+q+",endColorstr="+oe+")"},toString:function(te){var q=!!te;te=te||this._format;var oe=!1,ie=this._a<1&&this._a>=0;return q||!ie||"hex"!==te&&"hex6"!==te&&"hex3"!==te&&"hex4"!==te&&"hex8"!==te&&"name"!==te?("rgb"===te&&(oe=this.toRgbString()),"prgb"===te&&(oe=this.toPercentageRgbString()),("hex"===te||"hex6"===te)&&(oe=this.toHexString()),"hex3"===te&&(oe=this.toHexString(!0)),"hex4"===te&&(oe=this.toHex8String(!0)),"hex8"===te&&(oe=this.toHex8String()),"name"===te&&(oe=this.toName()),"hsl"===te&&(oe=this.toHslString()),"hsv"===te&&(oe=this.toHsvString()),oe||this.toHexString()):"name"===te&&0===this._a?this.toName():this.toRgbString()},clone:function(){return I(this.toString())},_applyModification:function(te,q){var oe=te.apply(null,[this].concat([].slice.call(q)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(s,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(l,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(te,q){return te.apply(null,[this].concat([].slice.call(q)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(b,arguments)},splitcomplement:function(){return this._applyCombination(d,arguments)},triad:function(){return this._applyCombination(m,[3])},tetrad:function(){return this._applyCombination(m,[4])}},I.fromRatio=function(B,te){if("object"==K(B)){var q={};for(var oe in B)B.hasOwnProperty(oe)&&(q[oe]="a"===oe?B[oe]:k(B[oe]));B=q}return I(B,te)},I.equals=function(B,te){return!(!B||!te)&&I(B).toRgbString()==I(te).toRgbString()},I.random=function(){return I.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},I.mix=function(B,te,q){q=0===q?0:q||50;var oe=I(B).toRgb(),ie=I(te).toRgb(),V=q/100;return I({r:(ie.r-oe.r)*V+oe.r,g:(ie.g-oe.g)*V+oe.g,b:(ie.b-oe.b)*V+oe.b,a:(ie.a-oe.a)*V+oe.a})},I.readability=function(B,te){var q=I(B),oe=I(te);return(Math.max(q.getLuminance(),oe.getLuminance())+.05)/(Math.min(q.getLuminance(),oe.getLuminance())+.05)},I.isReadable=function(B,te,q){var ie,V,oe=I.readability(B,te);switch(V=!1,(ie=W(q)).level+ie.size){case"AAsmall":case"AAAlarge":V=oe>=4.5;break;case"AAlarge":V=oe>=3;break;case"AAAsmall":V=oe>=7}return V},I.mostReadable=function(B,te,q){var V,Y,ae,X,oe=null,ie=0;Y=(q=q||{}).includeFallbackColors,ae=q.level,X=q.size;for(var J=0;J<te.length;J++)(V=I.readability(B,te[J]))>ie&&(ie=V,oe=I(te[J]));return I.isReadable(B,oe,{level:ae,size:X})||!Y?oe:(q.includeFallbackColors=!1,I.mostReadable(B,["#fff","#000"],q))};var c=I.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=I.hexNames=w(c);function w(B){var te={};for(var q in B)B.hasOwnProperty(q)&&(te[B[q]]=q);return te}function E(B){return B=parseFloat(B),(isNaN(B)||B<0||B>1)&&(B=1),B}function P(B,te){_(B)&&(B="100%");var q=z(B);return B=Math.min(te,Math.max(0,parseFloat(B))),q&&(B=parseInt(B*te,10)/100),Math.abs(B-te)<1e-6?1:B%te/parseFloat(te)}function R(B){return Math.min(1,Math.max(0,B))}function F(B){return parseInt(B,16)}function _(B){return"string"==typeof B&&-1!=B.indexOf(".")&&1===parseFloat(B)}function z(B){return"string"==typeof B&&-1!=B.indexOf("%")}function D(B){return 1==B.length?"0"+B:""+B}function k(B){return B<=1&&(B=100*B+"%"),B}function O(B){return Math.round(255*parseFloat(B)).toString(16)}function U(B){return F(B)/255}var q,oe,ie,H=(oe="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",ie="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+oe),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+oe),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+oe),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(B){return!!H.CSS_UNIT.exec(B)}function ee(B){B=B.replace(e,"").replace(M,"").toLowerCase();var q,te=!1;if(c[B])B=c[B],te=!0;else if("transparent"==B)return{r:0,g:0,b:0,a:0,format:"name"};return(q=H.rgb.exec(B))?{r:q[1],g:q[2],b:q[3]}:(q=H.rgba.exec(B))?{r:q[1],g:q[2],b:q[3],a:q[4]}:(q=H.hsl.exec(B))?{h:q[1],s:q[2],l:q[3]}:(q=H.hsla.exec(B))?{h:q[1],s:q[2],l:q[3],a:q[4]}:(q=H.hsv.exec(B))?{h:q[1],s:q[2],v:q[3]}:(q=H.hsva.exec(B))?{h:q[1],s:q[2],v:q[3],a:q[4]}:(q=H.hex8.exec(B))?{r:F(q[1]),g:F(q[2]),b:F(q[3]),a:U(q[4]),format:te?"name":"hex8"}:(q=H.hex6.exec(B))?{r:F(q[1]),g:F(q[2]),b:F(q[3]),format:te?"name":"hex"}:(q=H.hex4.exec(B))?{r:F(q[1]+""+q[1]),g:F(q[2]+""+q[2]),b:F(q[3]+""+q[3]),a:U(q[4]+""+q[4]),format:te?"name":"hex8"}:!!(q=H.hex3.exec(B))&&{r:F(q[1]+""+q[1]),g:F(q[2]+""+q[2]),b:F(q[3]+""+q[3]),format:te?"name":"hex"}}function W(B){var te,q;return"AA"!==(te=((B=B||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==te&&(te="AA"),"small"!==(q=(B.size||"small").toLowerCase())&&"large"!==q&&(q="small"),{level:te,size:q}}return I}()},8537:($,K,e)=>{"use strict";function M(W,B,te){W.prototype=B.prototype=te,te.constructor=W}function I(W,B){var te=Object.create(W.prototype);for(var q in B)te[q]=B[q];return te}function t(){}e.d(K,{ZP:()=>d,B8:()=>S});var T=.7,n=1/T,i="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,o=new RegExp(`^rgb\\(${i},${i},${i}\\)$`),v=new RegExp(`^rgb\\(${a},${a},${a}\\)$`),p=new RegExp(`^rgba\\(${i},${i},${i},${u}\\)$`),f=new RegExp(`^rgba\\(${a},${a},${a},${u}\\)$`),l=new RegExp(`^hsl\\(${u},${a},${a}\\)$`),y=new RegExp(`^hsla\\(${u},${a},${a},${u}\\)$`),s={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function d(W){var B,te;return W=(W+"").trim().toLowerCase(),(B=r.exec(W))?(te=B[1].length,B=parseInt(B[1],16),6===te?A(B):3===te?new w(B>>8&15|B>>4&240,B>>4&15|240&B,(15&B)<<4|15&B,1):8===te?b(B>>24&255,B>>16&255,B>>8&255,(255&B)/255):4===te?b(B>>12&15|B>>8&240,B>>8&15|B>>4&240,B>>4&15|240&B,((15&B)<<4|15&B)/255):null):(B=o.exec(W))?new w(B[1],B[2],B[3],1):(B=v.exec(W))?new w(255*B[1]/100,255*B[2]/100,255*B[3]/100,1):(B=p.exec(W))?b(B[1],B[2],B[3],B[4]):(B=f.exec(W))?b(255*B[1]/100,255*B[2]/100,255*B[3]/100,B[4]):(B=l.exec(W))?D(B[1],B[2]/100,B[3]/100,1):(B=y.exec(W))?D(B[1],B[2]/100,B[3]/100,B[4]):s.hasOwnProperty(W)?A(s[W]):"transparent"===W?new w(NaN,NaN,NaN,0):null}function A(W){return new w(W>>16&255,W>>8&255,255&W,1)}function b(W,B,te,q){return q<=0&&(W=B=te=NaN),new w(W,B,te,q)}function c(W){return W instanceof t||(W=d(W)),W?new w((W=W.rgb()).r,W.g,W.b,W.opacity):new w}function S(W,B,te,q){return 1===arguments.length?c(W):new w(W,B,te,q??1)}function w(W,B,te,q){this.r=+W,this.g=+B,this.b=+te,this.opacity=+q}function E(){return`#${z(this.r)}${z(this.g)}${z(this.b)}`}function R(){const W=F(this.opacity);return`${1===W?"rgb(":"rgba("}${_(this.r)}, ${_(this.g)}, ${_(this.b)}${1===W?")":`, ${W})`}`}function F(W){return isNaN(W)?1:Math.max(0,Math.min(1,W))}function _(W){return Math.max(0,Math.min(255,Math.round(W)||0))}function z(W){return((W=_(W))<16?"0":"")+W.toString(16)}function D(W,B,te,q){return q<=0?W=B=te=NaN:te<=0||te>=1?W=B=NaN:B<=0&&(W=NaN),new U(W,B,te,q)}function k(W){if(W instanceof U)return new U(W.h,W.s,W.l,W.opacity);if(W instanceof t||(W=d(W)),!W)return new U;if(W instanceof U)return W;var B=(W=W.rgb()).r/255,te=W.g/255,q=W.b/255,oe=Math.min(B,te,q),ie=Math.max(B,te,q),V=NaN,Y=ie-oe,ae=(ie+oe)/2;return Y?(V=B===ie?(te-q)/Y+6*(te<q):te===ie?(q-B)/Y+2:(B-te)/Y+4,Y/=ae<.5?ie+oe:2-ie-oe,V*=60):Y=ae>0&&ae<1?0:V,new U(V,Y,ae,W.opacity)}function U(W,B,te,q){this.h=+W,this.s=+B,this.l=+te,this.opacity=+q}function H(W){return(W=(W||0)%360)<0?W+360:W}function j(W){return Math.max(0,Math.min(1,W||0))}function ee(W,B,te){return 255*(W<60?B+(te-B)*W/60:W<180?te:W<240?B+(te-B)*(240-W)/60:B)}M(t,d,{copy(W){return Object.assign(new this.constructor,this,W)},displayable(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function h(){return this.rgb().formatHex8()},formatHsl:function g(){return k(this).formatHsl()},formatRgb:m,toString:m}),M(w,S,I(t,{brighter(W){return W=null==W?n:Math.pow(n,W),new w(this.r*W,this.g*W,this.b*W,this.opacity)},darker(W){return W=null==W?T:Math.pow(T,W),new w(this.r*W,this.g*W,this.b*W,this.opacity)},rgb(){return this},clamp(){return new w(_(this.r),_(this.g),_(this.b),F(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatHex8:function P(){return`#${z(this.r)}${z(this.g)}${z(this.b)}${z(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:R,toString:R})),M(U,function O(W,B,te,q){return 1===arguments.length?k(W):new U(W,B,te,q??1)},I(t,{brighter(W){return W=null==W?n:Math.pow(n,W),new U(this.h,this.s,this.l*W,this.opacity)},darker(W){return W=null==W?T:Math.pow(T,W),new U(this.h,this.s,this.l*W,this.opacity)},rgb(){var W=this.h%360+360*(this.h<0),B=isNaN(W)||isNaN(this.s)?0:this.s,te=this.l,q=te+(te<.5?te:1-te)*B,oe=2*te-q;return new w(ee(W>=240?W-240:W+120,oe,q),ee(W,oe,q),ee(W<120?W+240:W-120,oe,q),this.opacity)},clamp(){return new U(H(this.h),j(this.s),j(this.l),F(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const W=F(this.opacity);return`${1===W?"hsl(":"hsla("}${H(this.h)}, ${100*j(this.s)}%, ${100*j(this.l)}%${1===W?")":`, ${W})`}`}}))},78104:($,K,e)=>{"use strict";e.d(K,{Z:()=>M});const M=I=>()=>I},55609:($,K,e)=>{"use strict";e.d(K,{sX:()=>p,k4:()=>i.Z});var M=e(8537),I=e(59109);function T(f,l){var g,y=l?l.length:0,s=f?Math.min(y,f.length):0,x=new Array(s),h=new Array(y);for(g=0;g<s;++g)x[g]=p(f[g],l[g]);for(;g<y;++g)h[g]=l[g];return function(m){for(g=0;g<s;++g)h[g]=x[g](m);return h}}function n(f,l){var y=new Date;return f=+f,l=+l,function(s){return y.setTime(f*(1-s)+l*s),y}}var i=e(61023);function u(f,l){var x,y={},s={};for(x in(null===f||"object"!=typeof f)&&(f={}),(null===l||"object"!=typeof l)&&(l={}),l)x in f?y[x]=p(f[x],l[x]):s[x]=l[x];return function(h){for(x in y)s[x]=y[x](h);return s}}var a=e(65683),r=e(78104);function o(f,l){l||(l=[]);var x,y=f?Math.min(l.length,f.length):0,s=l.slice();return function(h){for(x=0;x<y;++x)s[x]=f[x]*(1-h)+l[x]*h;return s}}function p(f,l){var s,y=typeof l;return null==l||"boolean"===y?(0,r.Z)(l):("number"===y?i.Z:"string"===y?(s=(0,M.ZP)(l))?(l=s,I.ZP):a.Z:l instanceof M.ZP?I.ZP:l instanceof Date?n:function v(f){return ArrayBuffer.isView(f)&&!(f instanceof DataView)}(l)?o:Array.isArray(l)?T:"function"!=typeof l.valueOf&&"function"!=typeof l.toString||isNaN(l)?u:i.Z)(f,l)}},61023:($,K,e)=>{"use strict";function M(I,t){return I=+I,t=+t,function(T){return I*(1-T)+t*T}}e.d(K,{Z:()=>M})},59109:($,K,e)=>{"use strict";e.d(K,{ZP:()=>v});var M=e(8537);function I(y,s,x,h,g){var m=y*y,d=m*y;return((1-3*y+3*m-d)*s+(4-6*m+3*d)*x+(1+3*y+3*m-3*d)*h+d*g)/6}var n=e(78104);function i(y,s){return function(x){return y+x*s}}function r(y){return 1==(y=+y)?o:function(s,x){return x-s?function u(y,s,x){return y=Math.pow(y,x),s=Math.pow(s,x)-y,x=1/x,function(h){return Math.pow(y+h*s,x)}}(s,x,y):(0,n.Z)(isNaN(s)?x:s)}}function o(y,s){var x=s-y;return x?i(y,x):(0,n.Z)(isNaN(y)?s:y)}const v=function y(s){var x=r(s);function h(g,m){var d=x((g=(0,M.B8)(g)).r,(m=(0,M.B8)(m)).r),A=x(g.g,m.g),b=x(g.b,m.b),c=o(g.opacity,m.opacity);return function(S){return g.r=d(S),g.g=A(S),g.b=b(S),g.opacity=c(S),g+""}}return h.gamma=y,h}(1);function p(y){return function(s){var d,A,x=s.length,h=new Array(x),g=new Array(x),m=new Array(x);for(d=0;d<x;++d)A=(0,M.B8)(s[d]),h[d]=A.r||0,g[d]=A.g||0,m[d]=A.b||0;return h=y(h),g=y(g),m=y(m),A.opacity=1,function(b){return A.r=h(b),A.g=g(b),A.b=m(b),A+""}}}p(function t(y){var s=y.length-1;return function(x){var h=x<=0?x=0:x>=1?(x=1,s-1):Math.floor(x*s),g=y[h],m=y[h+1],d=h>0?y[h-1]:2*g-m,A=h<s-1?y[h+2]:2*m-g;return I((x-h/s)*s,d,g,m,A)}}),p(function T(y){var s=y.length;return function(x){var h=Math.floor(((x%=1)<0?++x:x)*s),g=y[(h+s-1)%s],m=y[h%s],d=y[(h+1)%s],A=y[(h+2)%s];return I((x-h/s)*s,g,m,d,A)}})},65683:($,K,e)=>{"use strict";e.d(K,{Z:()=>i});var M=e(61023),I=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,t=new RegExp(I.source,"g");function i(u,a){var o,v,p,r=I.lastIndex=t.lastIndex=0,f=-1,l=[],y=[];for(u+="",a+="";(o=I.exec(u))&&(v=t.exec(a));)(p=v.index)>r&&(p=a.slice(r,p),l[f]?l[f]+=p:l[++f]=p),(o=o[0])===(v=v[0])?l[f]?l[f]+=v:l[++f]=v:(l[++f]=null,y.push({i:f,x:(0,M.Z)(o,v)})),r=t.lastIndex;return r<a.length&&(p=a.slice(r),l[f]?l[f]+=p:l[++f]=p),l.length<2?y[0]?function n(u){return function(a){return u(a)+""}}(y[0].x):function T(u){return function(){return u}}(a):(a=y.length,function(s){for(var h,x=0;x<a;++x)l[(h=y[x]).i]=h.x(s);return l.join("")})}},40402:$=>{"use strict";$.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:$=>{"use strict";$.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:$=>{"use strict";$.exports=JSON.parse('["normal","italic","oblique"]')},15659:$=>{"use strict";$.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:$=>{"use strict";$.exports=JSON.parse('["inherit","initial","unset"]')},41901:$=>{"use strict";$.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}}]);