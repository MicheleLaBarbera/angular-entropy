"use strict";(self.webpackChunkangular_entropy=self.webpackChunkangular_entropy||[]).push([[414],{5227:(Pn,Ot,R)=>{R.d(Ot,{c:()=>ht});var Tt=R(1571);class ht{}ht.\u0275fac=function(a){return new(a||ht)},ht.\u0275cmp=Tt.Xpm({type:ht,selectors:[["app-footer"]],decls:0,vars:0,template:function(a,Ze){},encapsulation:2})},8414:(Pn,Ot,R)=>{R.r(Ot),R.d(Ot,{SimulationModule:()=>At});var Tt=R(6895),ht=R(2340),yt=R(5059),a=R(1571),Ze=R(529),Hn=R(9985);class ft{constructor(e,n){this._http=e,this._httpErrorHandler=n,this._simulationEndpointUrl=ht.N.apiEndpointUrl+"simulations/",this._handleError=this._httpErrorHandler.createHandleError("UserService")}getSimulationsCounts(){return this._http.get(this._simulationEndpointUrl).pipe((0,yt.K)(this._handleError("getSimulationsCounts",{error:!0})))}getSimulation(e){return this._http.get(this._simulationEndpointUrl+e).pipe((0,yt.K)(this._handleError("getSimulation",{error:!0})))}createSimulation(e){return this._http.post(this._simulationEndpointUrl,e).pipe((0,yt.K)(this._handleError("createSimulation",{error:!0})))}}ft.\u0275fac=function(e){return new(e||ft)(a.LFG(Ze.eN),a.LFG(Hn.G))},ft.\u0275prov=a.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"root"});var On=R(3135),Xt=R(4415),Xn=R(7618);function Yn(){}function ce(t){return null==t?Yn:function(){return this.querySelector(t)}}function $e(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Bn(){return[]}function Ie(t){return null==t?Bn:function(){return this.querySelectorAll(t)}}function ze(t){return function(){return this.matches(t)}}function qe(t){return function(e){return e.matches(t)}}var Gn=Array.prototype.find;function Wn(){return this.firstElementChild}var ti=Array.prototype.filter;function ei(){return Array.from(this.children)}function Ue(t){return new Array(t.length)}function Yt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function si(t){return function(){return t}}function ai(t,e,n,i,r,s){for(var u,o=0,l=e.length,c=s.length;o<c;++o)(u=e[o])?(u.__data__=s[o],i[o]=u):n[o]=new Yt(t,s[o]);for(;o<l;++o)(u=e[o])&&(r[o]=u)}function ui(t,e,n,i,r,s,o){var u,l,x,c=new Map,h=e.length,p=s.length,g=new Array(h);for(u=0;u<h;++u)(l=e[u])&&(g[u]=x=o.call(l,l.__data__,u,e)+"",c.has(x)?r[u]=l:c.set(x,l));for(u=0;u<p;++u)x=o.call(t,s[u],u,s)+"",(l=c.get(x))?(i[u]=l,l.__data__=s[u],c.delete(x)):n[u]=new Yt(t,s[u]);for(u=0;u<h;++u)(l=e[u])&&c.get(g[u])===l&&(r[u]=l)}function li(t){return t.__data__}function hi(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function gi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Yt.prototype={constructor:Yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var he="http://www.w3.org/1999/xhtml";const Re={svg:"http://www.w3.org/2000/svg",xhtml:he,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lt(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Re.hasOwnProperty(e)?{space:Re[e],local:t}:t}function ki(t){return function(){this.removeAttribute(t)}}function Mi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ai(t,e){return function(){this.setAttribute(t,e)}}function Ei(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ti(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ci(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function De(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ni(t){return function(){this.style.removeProperty(t)}}function Vi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Zi(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function vt(t,e){return t.style.getPropertyValue(e)||De(t).getComputedStyle(t,null).getPropertyValue(e)}function Ii(t){return function(){delete this[t]}}function zi(t,e){return function(){this[t]=e}}function qi(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Pe(t){return t.trim().split(/^|\s+/)}function fe(t){return t.classList||new He(t)}function He(t){this._node=t,this._names=Pe(t.getAttribute("class")||"")}function Oe(t,e){for(var n=fe(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Xe(t,e){for(var n=fe(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Ri(t){return function(){Oe(this,t)}}function Di(t){return function(){Xe(this,t)}}function Pi(t,e){return function(){(e.apply(this,arguments)?Oe:Xe)(this,t)}}function Oi(){this.textContent=""}function Xi(t){return function(){this.textContent=t}}function Yi(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Bi(){this.innerHTML=""}function Ki(t){return function(){this.innerHTML=t}}function Ji(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Qi(){this.nextSibling&&this.parentNode.appendChild(this)}function ji(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function er(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===he&&e.documentElement.namespaceURI===he?e.createElement(t):e.createElementNS(n,t)}}function nr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ye(t){var e=Lt(t);return(e.local?nr:er)(e)}function rr(){return null}function sr(){var t=this.parentNode;t&&t.removeChild(this)}function ur(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function dr(t){return function(){var e=this.__on;if(e){for(var s,n=0,i=-1,r=e.length;n<r;++n)s=e[n],t.type&&s.type!==t.type||s.name!==t.name?e[++i]=s:this.removeEventListener(s.type,s.listener,s.options);++i?e.length=i:delete this.__on}}}function pr(t,e,n){return function(){var r,i=this.__on,s=function fr(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,u=i.length;o<u;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Le(t,e,n){var i=De(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function gr(t,e){return function(){return Le(this,t,e)}}function yr(t,e){return function(){return Le(this,t,e.apply(this,arguments))}}He.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var me=[null];function K(t,e){this._groups=t,this._parents=e}function Be(){return new K([[document.documentElement]],me)}K.prototype=Be.prototype={constructor:K,select:function Ln(t){"function"!=typeof t&&(t=ce(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var l,c,s=e[r],o=s.length,u=i[r]=new Array(o),h=0;h<o;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),u[h]=c);return new K(i,this._parents)},selectAll:function Jn(t){t="function"==typeof t?function Kn(t){return function(){return $e(t.apply(this,arguments))}}(t):Ie(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var l,o=e[s],u=o.length,c=0;c<u;++c)(l=o[c])&&(i.push(t.call(l,l.__data__,c,o)),r.push(l));return new K(i,r)},selectChild:function jn(t){return this.select(null==t?Wn:function Qn(t){return function(){return Gn.call(this.children,t)}}("function"==typeof t?t:qe(t)))},selectChildren:function ii(t){return this.selectAll(null==t?ei:function ni(t){return function(){return ti.call(this.children,t)}}("function"==typeof t?t:qe(t)))},filter:function ri(t){"function"!=typeof t&&(t=ze(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var l,s=e[r],o=s.length,u=i[r]=[],c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&u.push(l);return new K(i,this._parents)},data:function ci(t,e){if(!arguments.length)return Array.from(this,li);var n=e?ui:ai,i=this._parents,r=this._groups;"function"!=typeof t&&(t=si(t));for(var s=r.length,o=new Array(s),u=new Array(s),l=new Array(s),c=0;c<s;++c){var h=i[c],p=r[c],g=p.length,x=hi(t.call(h,h&&h.__data__,c,i)),$=x.length,V=u[c]=new Array($),_=o[c]=new Array($),d=l[c]=new Array(g);n(h,p,V,_,d,x,e);for(var F,C,b=0,w=0;b<$;++b)if(F=V[b]){for(b>=w&&(w=b+1);!(C=_[w])&&++w<$;);F._next=C||null}}return(o=new K(o,i))._enter=u,o._exit=l,o},enter:function oi(){return new K(this._enter||this._groups.map(Ue),this._parents)},exit:function fi(){return new K(this._exit||this._groups.map(Ue),this._parents)},join:function mi(t,e,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function di(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=Math.min(r,i.length),u=new Array(r),l=0;l<o;++l)for(var x,c=n[l],h=i[l],p=c.length,g=u[l]=new Array(p),$=0;$<p;++$)(x=c[$]||h[$])&&(g[$]=x);for(;l<r;++l)u[l]=n[l];return new K(u,this._parents)},selection:function wr(){return this},order:function pi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o,i=t[e],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function _i(t){function e(p,g){return p&&g?t(p.__data__,g.__data__):!p-!g}t||(t=gi);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var c,o=n[s],u=o.length,l=r[s]=new Array(u),h=0;h<u;++h)(c=o[h])&&(l[h]=c);l.sort(e)}return new K(r,this._parents).order()},call:function yi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function vi(){return Array.from(this)},node:function xi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function wi(){let t=0;for(const e of this)++t;return t},empty:function bi(){return!this.node()},each:function Fi(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var u,r=e[n],s=0,o=r.length;s<o;++s)(u=r[s])&&t.call(u,u.__data__,s,r);return this},attr:function Si(t,e){var n=Lt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Mi:ki:"function"==typeof e?n.local?Ci:Ti:n.local?Ei:Ai)(n,e))},style:function $i(t,e,n){return arguments.length>1?this.each((null==e?Ni:"function"==typeof e?Zi:Vi)(t,e,n??"")):vt(this.node(),t)},property:function Ui(t,e){return arguments.length>1?this.each((null==e?Ii:"function"==typeof e?qi:zi)(t,e)):this.node()[t]},classed:function Hi(t,e){var n=Pe(t+"");if(arguments.length<2){for(var i=fe(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?Pi:e?Ri:Di)(n,e))},text:function Li(t){return arguments.length?this.each(null==t?Oi:("function"==typeof t?Yi:Xi)(t)):this.node().textContent},html:function Gi(t){return arguments.length?this.each(null==t?Bi:("function"==typeof t?Ji:Ki)(t)):this.node().innerHTML},raise:function Wi(){return this.each(Qi)},lower:function tr(){return this.each(ji)},append:function ir(t){var e="function"==typeof t?t:Ye(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function or(t,e){var n="function"==typeof t?t:Ye(t),i=null==e?rr:"function"==typeof e?e:ce(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function ar(){return this.each(sr)},clone:function cr(t){return this.select(t?lr:ur)},datum:function hr(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function _r(t,e,n){var r,o,i=mr(t+""),s=i.length;if(!(arguments.length<2)){for(u=e?pr:dr,r=0;r<s;++r)this.each(u(i[r],e,n));return this}var u=this.node().__on;if(u)for(var h,l=0,c=u.length;l<c;++l)for(r=0,h=u[l];r<s;++r)if((o=i[r]).type===h.type&&o.name===h.name)return h.value},dispatch:function vr(t,e){return this.each(("function"==typeof e?yr:gr)(t,e))},[Symbol.iterator]:function*xr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o,i=t[e],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const Ct=Be;var br={value:()=>{}};function Ke(){for(var i,t=0,e=arguments.length,n={};t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Bt(n)}function Bt(t){this._=t}function Fr(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}function kr(t,e){for(var r,n=0,i=t.length;n<i;++n)if((r=t[n]).name===e)return r.value}function Je(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=br,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}Bt.prototype=Ke.prototype={constructor:Bt,on:function(t,e){var r,n=this._,i=Fr(t+"",n),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=Je(n[r],t.name,e);else if(null==e)for(r in n)n[r]=Je(n[r],t.name,null);return this}for(;++s<o;)if((r=(t=i[s]).type)&&(r=kr(n[r],t.name)))return r},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Bt(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,s,n=new Array(r),i=0;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,r=(s=this._[t]).length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};const Mr=Ke;var Kt,Vt,xt=0,St=0,Nt=0,Jt=0,mt=0,Gt=0,Zt="object"==typeof performance&&performance.now?performance:Date,Qe="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function de(){return mt||(Qe(Ar),mt=Zt.now()+Gt)}function Ar(){mt=0}function Qt(){this._call=this._time=this._next=null}function We(t,e,n){var i=new Qt;return i.restart(t,e,n),i}function je(){mt=(Jt=Zt.now())+Gt,xt=St=0;try{!function Er(){de(),++xt;for(var e,t=Kt;t;)(e=mt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xt}()}finally{xt=0,function Cr(){for(var t,n,e=Kt,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Kt=n);Vt=t,pe(i)}(),mt=0}}function Tr(){var t=Zt.now(),e=t-Jt;e>1e3&&(Gt-=e,Jt=t)}function pe(t){xt||(St&&(St=clearTimeout(St)),t-mt>24?(t<1/0&&(St=setTimeout(je,t-Zt.now()-Gt)),Nt&&(Nt=clearInterval(Nt))):(Nt||(Jt=Zt.now(),Nt=setInterval(Tr,1e3)),xt=1,Qe(je)))}function tn(t,e,n){var i=new Qt;return i.restart(r=>{i.stop(),t(r+e)},e=null==e?0:+e,n),i}Qt.prototype=We.prototype={constructor:Qt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?de():+n)+(null==e?0:+e),!this._next&&Vt!==this&&(Vt?Vt._next=this:Kt=this,Vt=this),this._call=t,this._time=n,pe()},stop:function(){this._call&&(this._call=null,this._time=1/0,pe())}};var Sr=Mr("start","end","cancel","interrupt"),Nr=[];function te(t,e,n,i,r,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function Vr(t,e,n){var r,i=t.__transition;function o(c){var h,p,g,x;if(1!==n.state)return l();for(h in i)if((x=i[h]).name===n.name){if(3===x.state)return tn(o);4===x.state?(x.state=6,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[h]):+h<e&&(x.state=6,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[h])}if(tn(function(){3===n.state&&(n.state=4,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(g=n.tween.length),h=0,p=-1;h<g;++h)(x=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(r[++p]=x);r.length=p+1}}function u(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=5,1),p=-1,g=r.length;++p<g;)r[p].call(t,h);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var c in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=We(function s(c){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:r,on:Sr,tween:Nr,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function ye(t,e){var n=tt(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function it(t,e){var n=tt(t,e);if(n.state>3)throw new Error("too late; already running");return n}function tt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function lt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ee,on=180/Math.PI,ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sn(t,e,n,i,r,s){var o,u,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,l/=u),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*on,skewX:Math.atan(l)*on,scaleX:o,scaleY:u}}function an(t,e,n,i){function r(c){return c.length?c.pop()+" ":""}return function(c,h){var p=[],g=[];return c=t(c),h=t(h),function s(c,h,p,g,x,$){if(c!==p||h!==g){var V=x.push("translate(",null,e,null,n);$.push({i:V-4,x:lt(c,p)},{i:V-2,x:lt(h,g)})}else(p||g)&&x.push("translate("+p+e+g+n)}(c.translateX,c.translateY,h.translateX,h.translateY,p,g),function o(c,h,p,g){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),g.push({i:p.push(r(p)+"rotate(",null,i)-2,x:lt(c,h)})):h&&p.push(r(p)+"rotate("+h+i)}(c.rotate,h.rotate,p,g),function u(c,h,p,g){c!==h?g.push({i:p.push(r(p)+"skewX(",null,i)-2,x:lt(c,h)}):h&&p.push(r(p)+"skewX("+h+i)}(c.skewX,h.skewX,p,g),function l(c,h,p,g,x,$){if(c!==p||h!==g){var V=x.push(r(x)+"scale(",null,",",null,")");$.push({i:V-4,x:lt(c,p)},{i:V-2,x:lt(h,g)})}else(1!==p||1!==g)&&x.push(r(x)+"scale("+p+","+g+")")}(c.scaleX,c.scaleY,h.scaleX,h.scaleY,p,g),c=h=null,function(x){for(var _,$=-1,V=g.length;++$<V;)p[(_=g[$]).i]=_.x(x);return p.join("")}}}var qr=an(function Ir(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ve:sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Ur=an(function zr(t){return null!=t&&(ee||(ee=document.createElementNS("http://www.w3.org/2000/svg","g")),ee.setAttribute("transform",t),t=ee.transform.baseVal.consolidate())?sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ve},", ",")",")");function Rr(t,e){var n,i;return function(){var r=it(this,t),s=r.tween;if(s!==n)for(var o=0,u=(i=n=s).length;o<u;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function Dr(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=it(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var u={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=u;break}l===c&&r.push(u)}s.tween=r}}function xe(t,e,n){var i=t._id;return t.each(function(){var r=it(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return tt(r,i).value[e]}}function we(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function un(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function $t(){}var ne=1/.7,wt="\\s*([+-]?\\d+)\\s*",zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hr=/^#([0-9a-f]{3,8})$/,Or=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),Xr=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),Yr=new RegExp(`^rgba\\(${wt},${wt},${wt},${zt}\\)$`),Lr=new RegExp(`^rgba\\(${rt},${rt},${rt},${zt}\\)$`),Br=new RegExp(`^hsl\\(${zt},${rt},${rt}\\)$`),Kr=new RegExp(`^hsla\\(${zt},${rt},${rt},${zt}\\)$`),ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cn(){return this.rgb().formatHex()}function hn(){return this.rgb().formatRgb()}function qt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?fn(e):3===n?new Q(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ie(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ie(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Or.exec(t))?new Q(e[1],e[2],e[3],1):(e=Xr.exec(t))?new Q(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Yr.exec(t))?ie(e[1],e[2],e[3],e[4]):(e=Lr.exec(t))?ie(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Br.exec(t))?pn(e[1],e[2]/100,e[3]/100,1):(e=Kr.exec(t))?pn(e[1],e[2]/100,e[3]/100,e[4]):ln.hasOwnProperty(t)?fn(ln[t]):"transparent"===t?new Q(NaN,NaN,NaN,0):null}function fn(t){return new Q(t>>16&255,t>>8&255,255&t,1)}function ie(t,e,n,i){return i<=0&&(t=e=n=NaN),new Q(t,e,n,i)}function Qr(t){return t instanceof $t||(t=qt(t)),t?new Q((t=t.rgb()).r,t.g,t.b,t.opacity):new Q}function re(t,e,n,i){return 1===arguments.length?Qr(t):new Q(t,e,n,i??1)}function Q(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function mn(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}`}function dn(){const t=oe(this.opacity);return`${1===t?"rgb(":"rgba("}${dt(this.r)}, ${dt(this.g)}, ${dt(this.b)}${1===t?")":`, ${t})`}`}function oe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pt(t){return((t=dt(t))<16?"0":"")+t.toString(16)}function pn(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new et(t,e,n,i)}function _n(t){if(t instanceof et)return new et(t.h,t.s,t.l,t.opacity);if(t instanceof $t||(t=qt(t)),!t)return new et;if(t instanceof et)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,u=s-r,l=(s+r)/2;return u?(o=e===s?(n-i)/u+6*(n<i):n===s?(i-e)/u+2:(e-n)/u+4,u/=l<.5?s+r:2-s-r,o*=60):u=l>0&&l<1?0:o,new et(o,u,l,t.opacity)}function et(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function gn(t){return(t=(t||0)%360)<0?t+360:t}function se(t){return Math.max(0,Math.min(1,t||0))}function be(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function yn(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}we($t,qt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cn,formatHex:cn,formatHex8:function Jr(){return this.rgb().formatHex8()},formatHsl:function Gr(){return _n(this).formatHsl()},formatRgb:hn,toString:hn}),we(Q,re,un($t,{brighter(t){return t=null==t?ne:Math.pow(ne,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Q(dt(this.r),dt(this.g),dt(this.b),oe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mn,formatHex:mn,formatHex8:function Wr(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}${pt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:dn,toString:dn})),we(et,function jr(t,e,n,i){return 1===arguments.length?_n(t):new et(t,e,n,i??1)},un($t,{brighter(t){return t=null==t?ne:Math.pow(ne,t),new et(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new et(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Q(be(t>=240?t-240:t+120,r,i),be(t,r,i),be(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new et(gn(this.h),se(this.s),se(this.l),oe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=oe(this.opacity);return`${1===t?"hsl(":"hsla("}${gn(this.h)}, ${100*se(this.s)}%, ${100*se(this.l)}%${1===t?")":`, ${t})`}`}}));const vn=t=>()=>t;function wn(t,e){var n=e-t;return n?function xn(t,e){return function(n){return t+n*e}}(t,n):vn(isNaN(t)?e:t)}const bn=function t(e){var n=function io(t){return 1==(t=+t)?wn:function(e,n){return n-e?function no(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):vn(isNaN(e)?n:e)}}(e);function i(r,s){var o=n((r=re(r)).r,(s=re(s)).r),u=n(r.g,s.g),l=n(r.b,s.b),c=wn(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=u(h),r.b=l(h),r.opacity=c(h),r+""}}return i.gamma=t,i}(1);function Fn(t){return function(e){var o,u,n=e.length,i=new Array(n),r=new Array(n),s=new Array(n);for(o=0;o<n;++o)u=re(e[o]),i[o]=u.r||0,r[o]=u.g||0,s[o]=u.b||0;return i=t(i),r=t(r),s=t(s),u.opacity=1,function(l){return u.r=i(l),u.g=r(l),u.b=s(l),u+""}}}Fn(function to(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1];return yn((n-i/e)*e,i>0?t[i-1]:2*r-s,r,s,i<e-1?t[i+2]:2*s-r)}}),Fn(function eo(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e);return yn((n-i/e)*e,t[(i+e-1)%e],t[i%e],t[(i+1)%e],t[(i+2)%e])}});var Fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ke=new RegExp(Fe.source,"g");function so(t,e){var i,r,s,n=Fe.lastIndex=ke.lastIndex=0,o=-1,u=[],l=[];for(t+="",e+="";(i=Fe.exec(t))&&(r=ke.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(i=i[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,l.push({i:o,x:lt(i,r)})),n=ke.lastIndex;return n<e.length&&(s=e.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?l[0]?function oo(t){return function(e){return t(e)+""}}(l[0].x):function ro(t){return function(){return t}}(e):(e=l.length,function(c){for(var p,h=0;h<e;++h)u[(p=l[h]).i]=p.x(c);return u.join("")})}function kn(t,e){var n;return("number"==typeof e?lt:e instanceof qt?bn:(n=qt(e))?(e=n,bn):so)(t,e)}function ao(t){return function(){this.removeAttribute(t)}}function uo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lo(t,e,n){var i,s,r=n+"";return function(){var o=this.getAttribute(t);return o===r?null:o===i?s:s=e(i=o,n)}}function co(t,e,n){var i,s,r=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?s:s=e(i=o,n)}}function ho(t,e,n){var i,r,s;return function(){var o,l,u=n(this);return null==u?void this.removeAttribute(t):(o=this.getAttribute(t))===(l=u+"")?null:o===i&&l===r?s:(r=l,s=e(i=o,u))}}function fo(t,e,n){var i,r,s;return function(){var o,l,u=n(this);return null==u?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local))===(l=u+"")?null:o===i&&l===r?s:(r=l,s=e(i=o,u))}}function po(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function _o(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function go(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&_o(t,s)),n}return r._value=e,r}function yo(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&po(t,s)),n}return r._value=e,r}function xo(t,e){return function(){ye(this,t).delay=+e.apply(this,arguments)}}function wo(t,e){return e=+e,function(){ye(this,t).delay=e}}function Fo(t,e){return function(){it(this,t).duration=+e.apply(this,arguments)}}function ko(t,e){return e=+e,function(){it(this,t).duration=e}}function Ao(t,e){if("function"!=typeof e)throw new Error;return function(){it(this,t).ease=e}}function Zo(t,e,n){var i,r,s=function Vo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e})}(e)?ye:it;return function(){var o=s(this,t),u=o.on;u!==i&&(r=(i=u).copy()).on(e,n),o.on=r}}var Ro=Ct.prototype.constructor;function Mn(t){return function(){this.style.removeProperty(t)}}function Lo(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Bo(t,e,n){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&Lo(t,o,n)),i}return s._value=e,s}function Wo(t){return function(e){this.textContent=t.call(this,e)}}function jo(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Wo(r)),e}return i._value=t,i}var is=0;function st(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function An(){return++is}var at=Ct.prototype;st.prototype=function rs(t){return Ct().transition(t)}.prototype={constructor:st,select:function qo(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ce(t));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var h,p,u=i[o],l=u.length,c=s[o]=new Array(l),g=0;g<l;++g)(h=u[g])&&(p=t.call(h,h.__data__,g,u))&&("__data__"in h&&(p.__data__=h.__data__),c[g]=p,te(c[g],e,n,g,c,tt(h,n)));return new st(s,this._parents,e,n)},selectAll:function Uo(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ie(t));for(var i=this._groups,r=i.length,s=[],o=[],u=0;u<r;++u)for(var h,l=i[u],c=l.length,p=0;p<c;++p)if(h=l[p]){for(var x,g=t.call(h,h.__data__,p,l),$=tt(h,n),V=0,_=g.length;V<_;++V)(x=g[V])&&te(x,e,n,V,g,$);s.push(g),o.push(h)}return new st(s,o,e,n)},selectChild:at.selectChild,selectChildren:at.selectChildren,filter:function So(t){"function"!=typeof t&&(t=ze(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var l,s=e[r],o=s.length,u=i[r]=[],c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&u.push(l);return new st(i,this._parents,this._name,this._id)},merge:function No(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,s=Math.min(i,n.length),o=new Array(i),u=0;u<s;++u)for(var g,l=e[u],c=n[u],h=l.length,p=o[u]=new Array(h),x=0;x<h;++x)(g=l[x]||c[x])&&(p[x]=g);for(;u<i;++u)o[u]=e[u];return new st(o,this._parents,this._name,this._id)},selection:function Do(){return new Ro(this._groups,this._parents)},transition:function es(){for(var t=this._name,e=this._id,n=An(),i=this._groups,r=i.length,s=0;s<r;++s)for(var l,o=i[s],u=o.length,c=0;c<u;++c)if(l=o[c]){var h=tt(l,e);te(l,t,n,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new st(i,this._parents,t,n)},call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:function $o(t,e){var n=this._id;return arguments.length<2?tt(this.node(),n).on.on(t):this.each(Zo(n,t,e))},attr:function mo(t,e){var n=Lt(t),i="transform"===n?Ur:kn;return this.attrTween(t,"function"==typeof e?(n.local?fo:ho)(n,i,xe(this,"attr."+t,e)):null==e?(n.local?uo:ao)(n):(n.local?co:lo)(n,i,e))},attrTween:function vo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Lt(t);return this.tween(n,(i.local?go:yo)(i,e))},style:function Yo(t,e,n){var i="transform"==(t+="")?qr:kn;return null==e?this.styleTween(t,function Po(t,e){var n,i,r;return function(){var s=vt(this,t),o=(this.style.removeProperty(t),vt(this,t));return s===o?null:s===n&&o===i?r:r=e(n=s,i=o)}}(t,i)).on("end.style."+t,Mn(t)):"function"==typeof e?this.styleTween(t,function Oo(t,e,n){var i,r,s;return function(){var o=vt(this,t),u=n(this),l=u+"";return null==u&&(this.style.removeProperty(t),l=u=vt(this,t)),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,u))}}(t,i,xe(this,"style."+t,e))).each(function Xo(t,e){var n,i,r,u,s="style."+e,o="end."+s;return function(){var l=it(this,t),c=l.on,h=null==l.value[s]?u||(u=Mn(e)):void 0;(c!==n||r!==h)&&(i=(n=c).copy()).on(o,r=h),l.on=i}}(this._id,t)):this.styleTween(t,function Ho(t,e,n){var i,s,r=n+"";return function(){var o=vt(this,t);return o===r?null:o===i?s:s=e(i=o,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function Ko(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Bo(t,e,n??""))},text:function Qo(t){return this.tween("text","function"==typeof t?function Go(t){return function(){var e=t(this);this.textContent=e??""}}(xe(this,"text",t)):function Jo(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function ts(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,jo(t))},remove:function zo(){return this.on("end.remove",function Io(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Pr(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o,i=tt(this.node(),n).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((null==e?Rr:Dr)(n,t,e))},delay:function bo(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?xo:wo)(e,t)):tt(this.node(),e).delay},duration:function Mo(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fo:ko)(e,t)):tt(this.node(),e).duration},ease:function Eo(t){var e=this._id;return arguments.length?this.each(Ao(e,t)):tt(this.node(),e).ease},easeVarying:function Co(t){if("function"!=typeof t)throw new Error;return this.each(function To(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;it(this,t).ease=n}}(this._id,t))},end:function ns(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var u={value:o},l={value:function(){0==--r&&s()}};n.each(function(){var c=it(this,i),h=c.on;h!==t&&((e=(t=h).copy())._.cancel.push(u),e._.interrupt.push(u),e._.end.push(l)),c.on=e}),0===r&&s()})},[Symbol.iterator]:at[Symbol.iterator]};var ss={time:null,delay:0,duration:250,ease:function os(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function as(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Ct.prototype.interrupt=function $r(t){return this.each(function(){!function Zr(t,e){var i,r,o,n=t.__transition,s=!0;if(n){for(o in e=null==e?null:e+"",n)(i=n[o]).name===e?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]):s=!1;s&&delete t.__transition}}(this,t)})},Ct.prototype.transition=function us(t){var e,n;t instanceof st?(e=t._id,t=t._name):(e=An(),(n=ss).time=de(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var l,o=i[s],u=o.length,c=0;c<u;++c)(l=o[c])&&te(l,t,e,c,o,n||as(l,e));return new st(i,this._parents,t,e)};Math;function Ut(t){return{type:t}}function nt(t){return"string"==typeof t?new K([[document.querySelector(t)]],[document.documentElement]):new K([[t]],me)}["w","e"].map(Ut),["n","s"].map(Ut),["n","w","e","s","nw","ne","sw","se"].map(Ut);var gs=Array.prototype.slice;function Vn(t){return function(){return t}}class Zn{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n)}this._x0=e,this._y0=n}}function vs(t){return new Zn(t,!0)}function xs(t){return new Zn(t,!1)}const Ce=Math.PI,Se=2*Ce,_t=1e-6,ws=Se-_t;function $n(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class le{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$n:function bs(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $n;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,(s=+s)<0)throw new Error(`negative radius: ${s}`);let o=this._x1,u=this._y1,l=i-e,c=r-n,h=o-e,p=u-n,g=h*h+p*p;if(null===this._x1)this._append`M${this._x1=e},${this._y1=n}`;else if(g>_t)if(Math.abs(p*l-c*h)>_t&&s){let x=i-o,$=r-u,V=l*l+c*c,_=x*x+$*$,d=Math.sqrt(V),b=Math.sqrt(g),w=s*Math.tan((Ce-Math.acos((V+g-_)/(2*d*b)))/2),F=w/b,C=w/d;Math.abs(F-1)>_t&&this._append`L${e+F*h},${n+F*p}`,this._append`A${s},${s},0,0,${+(p*x>h*$)},${this._x1=e+C*l},${this._y1=n+C*c}`}else this._append`L${this._x1=e},${this._y1=n}`}arc(e,n,i,r,s,o){if(e=+e,n=+n,o=!!o,(i=+i)<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),l=i*Math.sin(r),c=e+u,h=n+l,p=1^o,g=o?r-s:s-r;null===this._x1?this._append`M${c},${h}`:(Math.abs(this._x1-c)>_t||Math.abs(this._y1-h)>_t)&&this._append`L${c},${h}`,i&&(g<0&&(g=g%Se+Se),g>ws?this._append`A${i},${i},0,1,${p},${e-u},${n-l}A${i},${i},0,1,${p},${this._x1=c},${this._y1=h}`:g>_t&&this._append`A${i},${i},0,${+(g>=Ce)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Ms(t){return t[0]}function As(t){return t[1]}function Es(t){return t.source}function Ts(t){return t.target}function Ne(t){let e=Es,n=Ts,i=Ms,r=As,s=null,o=null,u=function ks(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new le(e)}(l);function l(){let c;const h=gs.call(arguments),p=e.apply(this,h),g=n.apply(this,h);if(null==s&&(o=t(c=u())),o.lineStart(),h[0]=p,o.point(+i.apply(this,h),+r.apply(this,h)),h[0]=g,o.point(+i.apply(this,h),+r.apply(this,h)),o.lineEnd(),c)return o=null,c+""||null}return l.source=function(c){return arguments.length?(e=c,l):e},l.target=function(c){return arguments.length?(n=c,l):n},l.x=function(c){return arguments.length?(i="function"==typeof c?c:Vn(+c),l):i},l.y=function(c){return arguments.length?(r="function"==typeof c?c:Vn(+c),l):r},l.context=function(c){return arguments.length?(null==c?s=o=null:o=t(s=c),l):s},l}function kt(t,e,n){this.k=t,this.x=e,this.y=n}kt.prototype={constructor:kt,scale:function(t){return 1===t?this:new kt(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new kt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new kt(1,0,0);var zn=R(9886);class Rt{constructor(e){this._modalService=e}ngOnInit(){this.drawMap(this.map)}drawMap(e){if(!e)return;const r=window.innerWidth/4;(function _s(t){return"string"==typeof t?new K([document.querySelectorAll(t)],[document.documentElement]):new K([$e(t)],me)})("svg").remove();let o=nt("#map").append("svg").attr("viewBox",[0,0,r,450]),u=0,l=[],c=r/2,h=20,x=(o.append("circle").attr("id","node0").attr("cx",c).attr("cy",h).attr("r",5).style("fill","green"),[0]),$=[0];for(;x.length>0;){u=x[0],x.shift(),c=parseInt(nt("#node"+u).attr("cx")),h=parseInt(nt("#node"+u).attr("cy"));let _,V=[];for(let F=0;F<e.adjacency_matrix[u].length;F++)1==e.adjacency_matrix[u][F]&&(V.push(F),!l.includes(F)&&!x.includes(F)&&x.push(F));let b=1!=V.length?c-V.length/2*30:c,w=0;for(_=V.length;V.length;){if($.includes(V[0])){let F=parseInt(nt("#node"+u).attr("cx")),C=parseInt(nt("#node"+u).attr("cy")),Z=parseInt(nt("#node"+V[0]).attr("cx")),X=parseInt(nt("#node"+V[0]).attr("cy"));F<Z?(F+=5,Z-=5):(F-=5,Z+=5);const z=Ne(vs)({source:[F,C],target:[Z,X]});o.append("path").attr("d",z).attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none")}else{b==c&&_>1&&(b+=30),o.append("circle").attr("id","node"+V[0]).attr("cx",b).attr("cy",h+40+Math.floor(15*Math.random())+Math.floor(15*Math.random())+Math.floor(15*Math.random())).attr("r",5).style("fill","green");let C=parseInt(nt("#node"+u).attr("cx")),Z=parseInt(nt("#node"+u).attr("cy"))+5,X=parseInt(nt("#node"+V[0]).attr("cx")),z=parseInt(nt("#node"+V[0]).attr("cy"))-5;const J=Ne(xs)({source:[C,Z],target:[X,z]});o.append("svg:defs").selectAll("marker").data(["arrow"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",9).attr("refY",0).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),o.append("path").attr("d",J).attr("stroke","black").attr("marker-end","url(#arrow)").attr("fill","none"),w++,b+=30,$.push(V[0])}V.shift()}l.push(u)}o.attr("viewBox",[0,0,r,450])}hideModal(){this._modalService.hide("SimulationMapViewComponent")}}Rt.\u0275fac=function(e){return new(e||Rt)(a.Y36(zn.tT))},Rt.\u0275cmp=a.Xpm({type:Rt,selectors:[["app-simulation-map-view"]],decls:34,vars:5,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn-close","close","pull-right",3,"click"],[1,"visually-hidden"],[1,"modal-body"],["role","alert",1,"alert","alert-primary","mb-0"],[1,"mb-0"],[1,"fa-solid","fa-genderless"],[1,"ms-2"],["id","map"]],template:function(e,n){1&e&&(a.TgZ(0,"div",0)(1,"h4",1),a._uU(2,"Map Graph"),a.qZA(),a.TgZ(3,"button",2),a.NdJ("click",function(){return n.hideModal()}),a.TgZ(4,"span",3),a._uU(5,"\xd7"),a.qZA()()(),a.TgZ(6,"div",4)(7,"div",5)(8,"p",6),a._UZ(9,"i",7),a._uU(10," Nodes Count: "),a.TgZ(11,"span",8),a._uU(12),a.qZA()(),a.TgZ(13,"p",6),a._UZ(14,"i",7),a._uU(15," Edges Count: "),a.TgZ(16,"span",8),a._uU(17),a.qZA()(),a.TgZ(18,"p",6),a._UZ(19,"i",7),a._uU(20," Entropy (H): "),a.TgZ(21,"span",8),a._uU(22),a.qZA()(),a.TgZ(23,"p",6),a._UZ(24,"i",7),a._uU(25," Entropy Percent (Hr): "),a.TgZ(26,"span",8),a._uU(27),a.qZA()(),a.TgZ(28,"p",6),a._UZ(29,"i",7),a._uU(30," Effort (M): "),a.TgZ(31,"span",8),a._uU(32),a.qZA()()(),a._UZ(33,"div",9),a.qZA()),2&e&&(a.xp6(12),a.Oqu(n.map.nodes_count),a.xp6(5),a.Oqu(n.map.edges_count),a.xp6(5),a.Oqu(n.map.entropy.toFixed(2)),a.xp6(5),a.Oqu(n.map.entropy_percent.toFixed(2)),a.xp6(5),a.Oqu(n.map.effort.toFixed(2)))},encapsulation:2});var qn=R(9102),E=R(433),Us=R(4696),Rs=R(5227);function Ds(t,e){1&t&&(a.TgZ(0,"div",9),a._UZ(1,"div",10),a.TgZ(2,"div",11),a._UZ(3,"div",12),a.qZA()())}const Ve=function(t){return{"btn-primary":t}};function Ps(t,e){if(1&t){const n=a.EpF();a.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",5)(5,"h5",6),a._uU(6,"Simulation: "),a.TgZ(7,"small"),a._uU(8),a.qZA()(),a.TgZ(9,"i",17),a.NdJ("click",function(){a.CHM(n);const r=a.oxw();return a.KtG(r.downloadJson())}),a.qZA()(),a.TgZ(10,"div",18)(11,"div",19)(12,"p",6),a._UZ(13,"i",20),a._uU(14," Number of Maps: "),a.TgZ(15,"span",21),a._uU(16),a.qZA()(),a.TgZ(17,"p",22),a._UZ(18,"i",20),a._uU(19," Minimum Nodes Count: "),a.TgZ(20,"span",21),a._uU(21),a.qZA()(),a.TgZ(22,"p",6),a._UZ(23,"i",20),a._uU(24," Maximum Nodes Count: "),a.TgZ(25,"span",21),a._uU(26),a.qZA()(),a.TgZ(27,"p",22),a._UZ(28,"i",20),a._uU(29," Minimum Edges Count: "),a.TgZ(30,"span",21),a._uU(31),a.qZA()(),a.TgZ(32,"p",6),a._UZ(33,"i",20),a._uU(34," Maximum Edges Count: "),a.TgZ(35,"span",21),a._uU(36),a.qZA()()(),a.TgZ(37,"label",23),a._uU(38,"Scatter Plot Param:"),a.qZA(),a.TgZ(39,"div")(40,"button",24),a.NdJ("click",function(){a.CHM(n);const r=a.oxw();return a.KtG(r.updateChartType(0))}),a._uU(41,"Entropy"),a.qZA(),a.TgZ(42,"button",24),a.NdJ("click",function(){a.CHM(n);const r=a.oxw();return a.KtG(r.updateChartType(1))}),a._uU(43,"Entropy Percent"),a.qZA(),a.TgZ(44,"button",25),a.NdJ("click",function(){a.CHM(n);const r=a.oxw();return a.KtG(r.updateChartType(2))}),a._uU(45,"Effort"),a.qZA()(),a.TgZ(46,"form",26),a.NdJ("ngSubmit",function(){a.CHM(n);const r=a.oxw();return a.KtG(r.renderScatterPlot(r.current_chart_type))}),a.TgZ(47,"div",27)(48,"div",28)(49,"label",29),a._uU(50,"Nodes Min:"),a.qZA(),a._UZ(51,"input",30),a.qZA(),a.TgZ(52,"div",28)(53,"label",31),a._uU(54,"Nodes Max:"),a.qZA(),a._UZ(55,"input",32),a.qZA()(),a.TgZ(56,"div",33)(57,"div",28)(58,"label",34),a._uU(59,"Edges Min:"),a.qZA(),a._UZ(60,"input",35),a.qZA(),a.TgZ(61,"div",28)(62,"label",36),a._uU(63,"Edges Max:"),a.qZA(),a._UZ(64,"input",37),a.qZA()(),a.TgZ(65,"div",33)(66,"div",28)(67,"label",38),a._uU(68),a.qZA(),a._UZ(69,"input",39),a.qZA(),a.TgZ(70,"div",28)(71,"label",40),a._uU(72),a.qZA(),a._UZ(73,"input",41),a.qZA()(),a.TgZ(74,"div",42)(75,"div",43)(76,"button",44),a._uU(77,"Filter"),a.qZA(),a.TgZ(78,"button",45),a.NdJ("click",function(){a.CHM(n);const r=a.oxw();return a.KtG(r.resetFilterForm(r.current_chart_type))}),a._uU(79,"Reset"),a.qZA()()()()()()()()()}if(2&t){const n=a.oxw();a.xp6(8),a.Oqu(n.simulation.name),a.xp6(8),a.Oqu(n.simulation.maps_count),a.xp6(5),a.Oqu(n.simulation.node_min),a.xp6(5),a.Oqu(n.simulation.node_max),a.xp6(5),a.Oqu(n.simulation.node_min),a.xp6(5),a.Oqu(n.maxMapsValues.edges),a.xp6(4),a.Q6J("ngClass",a.VKq(13,Ve,0==n.current_chart_type)),a.xp6(2),a.Q6J("ngClass",a.VKq(15,Ve,1==n.current_chart_type)),a.xp6(2),a.Q6J("ngClass",a.VKq(17,Ve,2==n.current_chart_type)),a.xp6(2),a.Q6J("formGroup",n.simulationFilterForm),a.xp6(22),a.hij("",n.getChartTypeLabel(n.current_chart_type)," Min:"),a.xp6(4),a.hij("",n.getChartTypeLabel(n.current_chart_type)," Max:"),a.xp6(4),a.Q6J("disabled",!n.simulationFilterForm.valid)}}const Hs=function(t){return{"d-none":t}};var O=(()=>{return(t=O||(O={}))[t.Entropy=0]="Entropy",t[t.EntropyPercent=1]="EntropyPercent",t[t.Effort=2]="Effort",O;var t})();const Os=t=>{const e=parseInt(t.get("node_min").value),n=parseInt(t.get("node_max").value),i=parseInt(t.get("edge_min").value),r=parseInt(t.get("edge_max").value),s=parseInt(t.get("param_min").value),o=parseInt(t.get("param_max").value);return e>n||i>r||s>o?{inRange:!1}:null};class Dt{constructor(e,n,i,r,s){this._simulationService=e,this._route=n,this._router=i,this._modalService=r,this._fb=s,this.simulationFilterForm=new E.cw({node_min:new E.NI(0,E.kI.required),node_max:new E.NI(0,E.kI.required),edge_min:new E.NI(0,E.kI.required),edge_max:new E.NI(0,E.kI.required),param_min:new E.NI(0,E.kI.required),param_max:new E.NI(0,E.kI.required)},Os),this.simulation_id=null,this.simulation=null,this.currentMap=null,this.current_chart_type=O.Entropy,this.maxMapsValues={nodes:0,edges:0,entropy:0,entropy_percent:0,effort:0},this.loading=!0}unpack(e,n){return e.map(function(i){return i[n]})}resetFilterForm(e){this.simulationFilterForm.get("node_min").setValidators([E.kI.min(this.simulation.node_min),E.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([E.kI.min(this.simulation.node_min),E.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),e==O.Entropy?(this.simulationFilterForm.get("param_min").setValidators([E.kI.min(0),E.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([E.kI.max(this.maxMapsValues.entropy),E.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):e==O.EntropyPercent?(this.simulationFilterForm.get("param_min").setValidators([E.kI.min(0),E.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([E.kI.max(this.maxMapsValues.entropy_percent),E.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy_percent}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):e==O.Effort&&(this.simulationFilterForm.get("param_min").setValidators([E.kI.min(0),E.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([E.kI.max(this.maxMapsValues.effort),E.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.effort}),this.simulationFilterForm.get("param_max").updateValueAndValidity()),this.simulationFilterForm.get("node_max").setValidators([E.kI.max(this.simulation.node_max),E.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity(),this.simulationFilterForm.get("edge_max").setValidators([E.kI.max(this.maxMapsValues.edges),E.kI.required]),this.simulationFilterForm.patchValue({edge_max:this.maxMapsValues.edges}),this.simulationFilterForm.get("edge_max").updateValueAndValidity()}ngOnInit(){this.simulation_id=this._route.snapshot.paramMap.get("id"),this.simulation_id&&this._simulationService.getSimulation(this.simulation_id).subscribe(e=>{if(this.loading=!1,e.hasOwnProperty("error"))this._router.navigate(["/not-found"]);else if(this.simulation=e,this.simulation.maps){this.simulationFilterForm.get("node_min").setValidators([E.kI.min(this.simulation.node_min),E.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([E.kI.min(this.simulation.node_min),E.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),this.simulationFilterForm.get("node_max").setValidators([E.kI.max(this.simulation.node_max),E.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity();for(let n of this.simulation.maps)n.nodes_count>this.maxMapsValues.nodes&&(this.maxMapsValues.nodes=n.nodes_count),n.edges_count>this.maxMapsValues.edges&&(this.maxMapsValues.edges=n.edges_count),n.entropy>this.maxMapsValues.entropy&&(this.maxMapsValues.entropy=n.entropy),n.entropy_percent>this.maxMapsValues.entropy_percent&&(this.maxMapsValues.entropy_percent=n.entropy_percent),n.effort>this.maxMapsValues.effort&&(this.maxMapsValues.effort=n.effort);this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}})}getCoordsDatum(e,n){let i=this.unpack(this.simulation.maps.filter(o=>o.color_entropy==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.entropy>=this.simulationFilterForm.value.param_min&&o.entropy<=this.simulationFilterForm.value.param_max),"nodes_count"),r=this.unpack(this.simulation.maps.filter(o=>o.color_entropy==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.entropy>=this.simulationFilterForm.value.param_min&&o.entropy<=this.simulationFilterForm.value.param_max),"edges_count"),s=this.unpack(this.simulation.maps.filter(o=>o.color_entropy==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.entropy>=this.simulationFilterForm.value.param_min&&o.entropy<=this.simulationFilterForm.value.param_max),"entropy");return e==O.EntropyPercent?(i=this.unpack(this.simulation.maps.filter(o=>o.color_entropy_percent==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.entropy_percent>=this.simulationFilterForm.value.param_min&&o.entropy_percent<=this.simulationFilterForm.value.param_max),"nodes_count"),r=this.unpack(this.simulation.maps.filter(o=>o.color_entropy_percent==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.entropy_percent>=this.simulationFilterForm.value.param_min&&o.entropy_percent<=this.simulationFilterForm.value.param_max),"edges_count"),s=this.unpack(this.simulation.maps.filter(o=>o.color_entropy_percent==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.entropy_percent>=this.simulationFilterForm.value.param_min&&o.entropy_percent<=this.simulationFilterForm.value.param_max),"entropy_percent")):e==O.Effort&&(i=this.unpack(this.simulation.maps.filter(o=>o.color_effort==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.effort>=this.simulationFilterForm.value.param_min&&o.effort<=this.simulationFilterForm.value.param_max),"nodes_count"),r=this.unpack(this.simulation.maps.filter(o=>o.color_effort==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.effort>=this.simulationFilterForm.value.param_min&&o.effort<=this.simulationFilterForm.value.param_max),"edges_count"),s=this.unpack(this.simulation.maps.filter(o=>o.color_effort==n&&o.nodes_count>=this.simulationFilterForm.value.node_min&&o.nodes_count<=this.simulationFilterForm.value.node_max&&o.edges_count>=this.simulationFilterForm.value.edge_min&&o.edges_count<=this.simulationFilterForm.value.edge_max&&o.effort>=this.simulationFilterForm.value.param_min&&o.effort<=this.simulationFilterForm.value.param_max),"effort")),[i,r,s]}renderScatterPlot(e){qn.purge("container");const n=["rgba(168, 50, 50, 0.95)","rgba(161, 158, 157, 0.95)","rgba(86, 199, 30, 0.95)"];let o=[{x:this.getCoordsDatum(e,0)[0],y:this.getCoordsDatum(e,0)[1],z:this.getCoordsDatum(e,0)[2],mode:"markers",marker:{size:5,line:{color:n[0],width:.5},opacity:.8},type:"scatter3d"},{x:this.getCoordsDatum(e,1)[0],y:this.getCoordsDatum(e,1)[1],z:this.getCoordsDatum(e,1)[2],mode:"markers",marker:{size:5,line:{color:n[1],width:.5},opacity:.8},type:"scatter3d"},{x:this.getCoordsDatum(e,2)[0],y:this.getCoordsDatum(e,2)[1],z:this.getCoordsDatum(e,2)[2],mode:"markers",marker:{size:5,line:{color:n[2],width:.5},opacity:.8},type:"scatter3d"}],u={margin:{l:0,r:0,b:0,t:50},width:window.innerWidth-window.innerWidth/2.5,height:window.innerHeight-200,colorway:n,scene:{xaxis:{title:"Nodes",range:[0,this.maxMapsValues.nodes]},yaxis:{title:"Edges",range:[0,this.maxMapsValues.edges]},zaxis:{title:this.getChartTypeLabel(this.current_chart_type)}}};qn.newPlot("container",o,u,{responsive:!0}),document.getElementById("container").on("plotly_click",c=>{this.current_chart_type==O.Entropy?this.currentMap=this.simulation?.maps?.filter(h=>c.points[0].x==h.nodes_count&&c.points[0].y==h.edges_count&&c.points[0].z==h.entropy)[0]:this.current_chart_type==O.EntropyPercent?this.currentMap=this.simulation?.maps?.filter(h=>c.points[0].x==h.nodes_count&&c.points[0].y==h.edges_count&&c.points[0].z==h.entropy_percent)[0]:this.current_chart_type==O.Effort&&(this.currentMap=this.simulation?.maps?.filter(h=>c.points[0].x==h.nodes_count&&c.points[0].y==h.edges_count&&c.points[0].z==h.effort)[0]),this.showCurrentMap()})}getChartTypeLabel(e){switch(e){case O.Entropy:return"Entropy (H)";case O.EntropyPercent:return"Entropy Percent (Hr)";case O.Effort:return"Effort (M)"}}getChartId(e){switch(e){case O.Entropy:return"chartHolderEntropy";case O.EntropyPercent:return"chartHolderEntropyPercent";case O.Effort:return"chartHolderEffort"}}updateChartType(e){this.currentMap=null,this.current_chart_type=e,this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}showCurrentMap(){this._modalService.show(Rt,{id:"SimulationMapViewComponent",class:"modal-lg",initialState:{map:this.currentMap}})}downloadJson(){var e=JSON.stringify(this.simulation),n=document.createElement("a");n.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(e)),n.setAttribute("download",this.simulation?.name?this.simulation?.name+".json":"undefined.json"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}Dt.\u0275fac=function(e){return new(e||Dt)(a.Y36(ft),a.Y36(Xt.gz),a.Y36(Xt.F0),a.Y36(zn.tT),a.Y36(E.qu))},Dt.\u0275cmp=a.Xpm({type:Dt,selectors:[["app-simulation-view"]],decls:14,vars:6,consts:[["class","row mt-5",4,"ngIf"],[1,"row","h-90","my-4","mx-2"],["class","col-4 h-100",4,"ngIf"],[1,"col-8",3,"ngClass"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"card-body","text-center","p-0"],["id","container"],[1,"row","mt-5"],[1,"col-5"],[1,"col-2","ms-5","mt-5"],[1,"ms-3","custom-big-loader","mt-5"],[1,"col-4","h-100"],[1,"row","h-100"],[1,"col-12","h-100"],[1,"card","mb-4","h-100"],[1,"fa-solid","fa-download","pe-clickable",3,"click"],[1,"card-body"],["role","alert",1,"alert","alert-primary","mb-2"],[1,"fa-solid","fa-genderless"],[1,"ms-2"],[1,"mb-0","mt-2"],[1,"form-label"],[1,"me-3","btn","btn-secondary",3,"ngClass","click"],[1,"btn","btn-secondary",3,"ngClass","click"],[1,"mt-3",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6"],["for","node_min",1,"form-label"],["type","text","id","node_min","name","simulation_node_min","placeholder","","formControlName","node_min",1,"form-control"],["for","node_max",1,"form-label"],["type","text","id","node_max","name","simulation_node_max","placeholder","","formControlName","node_max",1,"form-control"],[1,"row","mt-2"],["for","edge_min",1,"form-label"],["type","text","id","edge_min","name","simulation_edge_min","placeholder","","formControlName","edge_min",1,"form-control"],["for","edge_max",1,"form-label"],["type","text","id","edge_max","name","simulation_edge_max","placeholder","","formControlName","edge_max",1,"form-control"],["for","param_min",1,"form-label"],["type","text","id","param_min","name","simulation_param_min","placeholder","","formControlName","param_min",1,"form-control"],["for","param_max",1,"form-label"],["type","text","id","param_max","name","simulation_param_max","placeholder","","formControlName","param_max",1,"form-control"],[1,"row","mt-4"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-primary","me-3",3,"disabled"],[1,"btn","btn-secondary",3,"click"]],template:function(e,n){1&e&&(a._UZ(0,"app-navbar"),a.YNc(1,Ds,4,0,"div",0),a.TgZ(2,"div",1),a.YNc(3,Ps,80,19,"div",2),a.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),a._uU(8,"Scatter Plot: "),a.TgZ(9,"small"),a._uU(10),a.qZA()()(),a.TgZ(11,"div",7),a._UZ(12,"div",8),a.qZA()()()(),a._UZ(13,"app-footer")),2&e&&(a.xp6(1),a.Q6J("ngIf",n.loading),a.xp6(2),a.Q6J("ngIf",!n.loading),a.xp6(1),a.Q6J("ngClass",a.VKq(4,Hs,n.loading)),a.xp6(6),a.Oqu(n.getChartTypeLabel(n.current_chart_type)))},dependencies:[Tt.mk,Tt.O5,E._Y,E.Fj,E.JJ,E.JL,E.sg,E.u,Us.S,Rs.c],encapsulation:2});const Xs=[{path:":id",component:Dt,canActivate:[Xn.a]}];class Mt{}Mt.\u0275fac=function(e){return new(e||Mt)},Mt.\u0275mod=a.oAB({type:Mt}),Mt.\u0275inj=a.cJS({imports:[Xt.Bz.forChild(Xs),Xt.Bz]});var Ys=R(9181);class At{}At.\u0275fac=function(e){return new(e||At)},At.\u0275mod=a.oAB({type:At}),At.\u0275inj=a.cJS({providers:[ft],imports:[Tt.ez,On.m,Ys.UserModule,Mt]})}}]);