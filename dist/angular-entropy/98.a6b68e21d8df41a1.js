(self.webpackChunkangular_entropy=self.webpackChunkangular_entropy||[]).push([[98],{4696:(Wc,_u,Us)=>{"use strict";Us.d(_u,{S:()=>l});var Xr=Us(1571),$=Us(4415),I=Us(6895);function t(T,x){1&T&&(Xr.TgZ(0,"li",8)(1,"a",9),Xr._UZ(2,"i",10),Xr.qZA()())}function M(T,x){1&T&&(Xr.TgZ(0,"li",8)(1,"a",11),Xr._UZ(2,"i",12),Xr.qZA()())}const k=function(){return["/dashboard"]};class l{constructor(x){this._router=x}ngOnInit(){let x=JSON.parse(localStorage.getItem("currentUserData"));x||this._router.navigate(["/users/auth"]),this.user=x}}l.\u0275fac=function(x){return new(x||l)(Xr.Y36($.F0))},l.\u0275cmp=Xr.Xpm({type:l,selectors:[["app-navbar"]],decls:11,vars:6,consts:[[1,"navbar","navbar-expand","bg-white","border-1","border-bottom","p-0"],["src","/assets/images/logo-nav.png","alt","Logo",1,"nav-logo","ms-4","pe-clickable",2,"height","50px",3,"routerLink"],[1,"navbar-nav","me-auto","h-100"],[1,"nav-item","active"],[1,"ms-3","text-black","fs-6","fw-light","text-decoration-underline",3,"routerLink"],[1,"navbar-nav"],[1,"nav-item","separator","mt-2"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["routerLink","/profile",1,"nav-link"],[1,"fa-regular","fa-user","navbar-ico"],["routerLink","/users/logout",1,"nav-link"],[1,"fa-regular","fa-circle-right","navbar-ico"]],template:function(x,p){1&x&&(Xr.TgZ(0,"nav",0),Xr._UZ(1,"img",1),Xr.TgZ(2,"ul",2)(3,"li",3)(4,"a",4),Xr._uU(5,"Dashboard"),Xr.qZA()()(),Xr.TgZ(6,"ul",5),Xr._UZ(7,"li",6),Xr.qZA(),Xr.TgZ(8,"ul",5),Xr.YNc(9,t,3,0,"li",7),Xr.YNc(10,M,3,0,"li",7),Xr.qZA()()),2&x&&(Xr.xp6(1),Xr.Q6J("routerLink",Xr.DdM(4,k)),Xr.xp6(3),Xr.Q6J("routerLink",Xr.DdM(5,k)),Xr.xp6(5),Xr.Q6J("ngIf",p.user),Xr.xp6(1),Xr.Q6J("ngIf",p.user))},dependencies:[I.O5,$.rH],encapsulation:2})},9102:Wc=>{self,Wc.exports=function(){var _u={98847:function($,I,t){"use strict";var M=t(71828),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in k){var T=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,k[l])}},98222:function($,I,t){"use strict";$.exports=t(82887)},27206:function($,I,t){"use strict";$.exports=t(60822)},59893:function($,I,t){"use strict";$.exports=t(23381)},5224:function($,I,t){"use strict";$.exports=t(83832)},59509:function($,I,t){"use strict";$.exports=t(72201)},75557:function($,I,t){"use strict";$.exports=t(91815)},40338:function($,I,t){"use strict";$.exports=t(21462)},35080:function($,I,t){"use strict";$.exports=t(51319)},61396:function($,I,t){"use strict";$.exports=t(57516)},40549:function($,I,t){"use strict";$.exports=t(98128)},49866:function($,I,t){"use strict";$.exports=t(99442)},36089:function($,I,t){"use strict";$.exports=t(93740)},19548:function($,I,t){"use strict";$.exports=t(8729)},35831:function($,I,t){"use strict";$.exports=t(93814)},61039:function($,I,t){"use strict";$.exports=t(14382)},97040:function($,I,t){"use strict";$.exports=t(51759)},77986:function($,I,t){"use strict";$.exports=t(10421)},24296:function($,I,t){"use strict";$.exports=t(43102)},58872:function($,I,t){"use strict";$.exports=t(92165)},29626:function($,I,t){"use strict";$.exports=t(3325)},65591:function($,I,t){"use strict";$.exports=t(36071)},69738:function($,I,t){"use strict";$.exports=t(43905)},92650:function($,I,t){"use strict";$.exports=t(35902)},35630:function($,I,t){"use strict";$.exports=t(69816)},73434:function($,I,t){"use strict";$.exports=t(94507)},27909:function($,I,t){"use strict";var M=t(19548);M.register([t(27206),t(5224),t(58872),t(65591),t(69738),t(92650),t(49866),t(25743),t(6197),t(97040),t(85461),t(73434),t(54201),t(81299),t(47645),t(35630),t(77986),t(83043),t(93005),t(96881),t(4534),t(50581),t(40549),t(77900),t(47582),t(35080),t(21641),t(17280),t(5861),t(29626),t(10021),t(65317),t(96268),t(61396),t(35831),t(16122),t(46163),t(40344),t(40338),t(48131),t(36089),t(55334),t(75557),t(19440),t(99488),t(59893),t(97393),t(98222),t(61039),t(24296),t(66398),t(59509)]),$.exports=M},46163:function($,I,t){"use strict";$.exports=t(15154)},96881:function($,I,t){"use strict";$.exports=t(64943)},50581:function($,I,t){"use strict";$.exports=t(21164)},55334:function($,I,t){"use strict";$.exports=t(54186)},65317:function($,I,t){"use strict";$.exports=t(94873)},10021:function($,I,t){"use strict";$.exports=t(67618)},54201:function($,I,t){"use strict";$.exports=t(58810)},5861:function($,I,t){"use strict";$.exports=t(20593)},16122:function($,I,t){"use strict";$.exports=t(29396)},83043:function($,I,t){"use strict";$.exports=t(13551)},48131:function($,I,t){"use strict";$.exports=t(46858)},47582:function($,I,t){"use strict";$.exports=t(17988)},21641:function($,I,t){"use strict";$.exports=t(68868)},96268:function($,I,t){"use strict";$.exports=t(20467)},19440:function($,I,t){"use strict";$.exports=t(91271)},99488:function($,I,t){"use strict";$.exports=t(21461)},97393:function($,I,t){"use strict";$.exports=t(85956)},25743:function($,I,t){"use strict";$.exports=t(52979)},66398:function($,I,t){"use strict";$.exports=t(32275)},17280:function($,I,t){"use strict";$.exports=t(6419)},77900:function($,I,t){"use strict";$.exports=t(61510)},81299:function($,I,t){"use strict";$.exports=t(87619)},93005:function($,I,t){"use strict";$.exports=t(93601)},40344:function($,I,t){"use strict";$.exports=t(96595)},47645:function($,I,t){"use strict";$.exports=t(70954)},6197:function($,I,t){"use strict";$.exports=t(47462)},4534:function($,I,t){"use strict";$.exports=t(17659)},85461:function($,I,t){"use strict";$.exports=t(19990)},82884:function($){"use strict";$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function($,I,t){"use strict";var M=t(82884),k=t(41940),l=t(85555),T=t(44467).templatedArray;t(24695),$.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(92605).draw;function T(p){M.filterVisible(p._fullLayout.annotations).forEach(function(e){var o=k.getFromId(p,e.xref),r=k.getFromId(p,e.yref),n=k.getRefType(e.xref),a=k.getRefType(e.yref);e._extremes={},"range"===n&&x(e,o),"range"===a&&x(e,r)})}function x(p,s){var e,o=s._id,r=o.charAt(0),n=p[r],a=p["a"+r],h=p["_"+r+"padplus"],f=p["_"+r+"padminus"],b={x:1,y:-1}[r]*p[r+"shift"],v=3*p.arrowsize*p.arrowwidth||0,g=v+b,y=v-b,d=3*p.startarrowsize*p.arrowwidth||0,m=d+b,w=d-b;if(p["a"+r+"ref"]===p[r+"ref"]){var u=k.findExtremes(s,[s.r2c(n)],{ppadplus:g,ppadminus:y}),S=k.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(h,m),ppadminus:Math.max(f,w)});e={min:[u.min[0],S.min[0]],max:[u.max[0],S.max[0]]}}else m=a?m+a:m,w=a?w-a:w,e=k.findExtremes(s,[s.r2c(n)],{ppadplus:Math.max(h,g,m),ppadminus:Math.max(f,y,w)});p._extremes[o]=e}$.exports=function(p){if(M.filterVisible(p._fullLayout.annotations).length&&p._fullData.length)return M.syncOrAsync([l,T],p)}},44317:function($,I,t){"use strict";var M=t(71828),k=t(73972),l=t(44467).arrayEditor;function T(p,s){var e,o,r,n,a,i,c,h=p._fullLayout.annotations,f=[],b=[],v=[],g=(s||[]).length;for(e=0;e<h.length;e++)if(n=(r=h[e]).clicktoshow){for(o=0;o<g;o++)if(i=(a=s[o]).xaxis,c=a.yaxis,i._id===r.xref&&c._id===r.yref&&i.d2r(a.x)===x(r._xclick,i)&&c.d2r(a.y)===x(r._yclick,c)){(r.visible?"onout"===n?b:v:f).push(e);break}o===g&&r.visible&&"onout"===n&&b.push(e)}return{on:f,off:b,explicitOff:v}}function x(p,s){return"log"===s.type?s.l2r(p):s.d2r(p)}$.exports={hasClickToShow:function(p,s){var e=T(p,s);return e.on.length>0||e.explicitOff.length>0},onClick:function(p,s){var e,o,r=T(p,s),n=r.on,a=r.off.concat(r.explicitOff),i={},c=p._fullLayout.annotations;if(n.length||a.length){for(e=0;e<n.length;e++)(o=l(p.layout,"annotations",c[n[e]])).modifyItem("visible",!0),M.extendFlat(i,o.getUpdateObj());for(e=0;e<a.length;e++)(o=l(p.layout,"annotations",c[a[e]])).modifyItem("visible",!1),M.extendFlat(i,o.getUpdateObj());return k.call("update",p,{},i)}}}},25625:function($,I,t){"use strict";var M=t(71828),k=t(7901);$.exports=function(l,T,x,p){p("opacity");var s=p("bgcolor"),e=p("bordercolor"),o=k.opacity(e);p("borderpad");var r=p("borderwidth"),n=p("showarrow");if(p("text",n?" ":x._dfltTitle.annotation),p("textangle"),M.coerceFont(p,"font",x.font),p("width"),p("align"),p("height")&&p("valign"),n){var a,i,c=p("arrowside");-1!==c.indexOf("end")&&(a=p("arrowhead"),i=p("arrowsize")),-1!==c.indexOf("start")&&(p("startarrowhead",a),p("startarrowsize",i)),p("arrowcolor",o?T.bordercolor:k.defaultLine),p("arrowwidth",2*(o&&r||1)),p("standoff"),p("startstandoff")}var h=p("hovertext"),f=x.hoverlabel||{};if(h){var b=p("hoverlabel.bgcolor",f.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),v=p("hoverlabel.bordercolor",f.bordercolor||k.contrast(b));M.coerceFont(p,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||v})}p("captureevents",!!h)}},94128:function($,I,t){"use strict";var M=t(92770),k=t(58163);$.exports=function(l,T,x,p){T=T||{};var s="log"===x&&"linear"===T.type;if(s||"linear"===x&&"log"===T.type)for(var o,r,n=l._fullLayout.annotations,a=T._id.charAt(0),i=0;i<n.length;i++)r="annotations["+i+"].",(o=n[i])[a+"ref"]===T._id&&c(a),o["a"+a+"ref"]===T._id&&c("a"+a);function c(h){var f=o[h],b=null;b=s?k(f,T.range):Math.pow(10,f),M(b)||(b=null),p(r+h,b)}}},84046:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(85501),T=t(25625),x=t(50215);function p(s,e,o){function r(S,_){return M.coerce(s,e,x,S,_)}var n=r("visible"),a=r("clicktoshow");if(n||a){T(s,e,o,r);for(var i=e.showarrow,c=["x","y"],h=[-10,-30],f={_fullLayout:o},b=0;b<2;b++){var v=c[b],g=k.coerceRef(s,e,f,v,"","paper");if("paper"!==g&&k.getFromId(f,g)._annIndices.push(e._index),k.coercePosition(e,f,r,g,v,.5),i){var y="a"+v,d=k.coerceRef(s,e,f,y,"pixel",["pixel","paper"]);"pixel"!==d&&d!==g&&(d=e[y]="pixel"),k.coercePosition(e,f,r,d,y,"pixel"===d?h[b]:.4)}r(v+"anchor"),r(v+"shift")}if(M.noneOrAll(s,e,["x","y"]),i&&M.noneOrAll(s,e,["ax","ay"]),a){var w=r("xclick"),u=r("yclick");e._xclick=void 0===w?e.x:k.cleanPosition(w,f,e.xref),e._yclick=void 0===u?e.y:k.cleanPosition(u,f,e.yref)}}}$.exports=function(s,e){l(s,e,{name:"annotations",handleItemDefaults:p})}},92605:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(74875),T=t(71828),x=T.strTranslate,p=t(89298),s=t(7901),e=t(91424),o=t(30211),r=t(63893),n=t(6964),a=t(28569),i=t(44467).arrayEditor,c=t(13011);function h(v,g){var y=v._fullLayout.annotations[g]||{},d=p.getFromId(v,y.xref),m=p.getFromId(v,y.yref);d&&d.setScale(),m&&m.setScale(),b(v,y,g,!1,d,m)}function f(v,g,y,d,m){var w=m[y],u=m[y+"ref"],S=-1!==y.indexOf("y"),_="domain"===p.getRefType(u),E=S?d.h:d.w;return v?_?w+(S?-g:g)/v._length:v.p2r(v.r2p(w)+g):w+(S?-g:g)/E}function b(v,g,y,d,m,w){var u,S,_=v._fullLayout,E=v._fullLayout._size,L=v._context.edits;d?(u="annotation-"+d,S=d+".annotations"):(u="annotation",S="annotations");var C=i(v.layout,S,g),P=C.modifyBase,z=C.modifyItem,j=C.getUpdateObj;_._infolayer.selectAll("."+u+'[data-index="'+y+'"]').remove();var R="clip"+_._uid+"_ann"+y;if(g._input&&!1!==g.visible){var V={x:{},y:{}},D=+g.textangle||0,B=_._infolayer.append("g").classed(u,!0).attr("data-index",String(y)).style("opacity",g.opacity),N=B.append("g").classed("annotation-text-g",!0),U=L[g.showarrow?"annotationTail":"annotationPosition"],J=g.captureevents||L.annotationText||U,Y=N.append("g").style("pointer-events",J?"all":null).call(n,"pointer").on("click",function(){v._dragging=!1,v.emit("plotly_clickannotation",ke(M.event))});g.hovertext&&Y.on("mouseover",function(){var ue=g.hoverlabel,Ee=ue.font,de=this.getBoundingClientRect(),xe=v.getBoundingClientRect();o.loneHover({x0:de.left-xe.left,x1:de.right-xe.left,y:(de.top+de.bottom)/2-xe.top,text:g.hovertext,color:ue.bgcolor,borderColor:ue.bordercolor,fontFamily:Ee.family,fontSize:Ee.size,fontColor:Ee.color},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:v})}).on("mouseout",function(){o.loneUnhover(_._hoverlayer.node())});var q=g.borderwidth,X=q+g.borderpad,Q=Y.append("rect").attr("class","bg").style("stroke-width",q+"px").call(s.stroke,g.bordercolor).call(s.fill,g.bgcolor),ne=g.width||g.height,re=_._topclips.selectAll("#"+R).data(ne?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",R).append("rect"),re.exit().remove();var ae=g.font,se=_._meta?T.templateString(g.text,_._meta):g.text,pe=Y.append("text").classed("annotation-text",!0).text(se);L.annotationText?pe.call(r.makeEditable,{delegate:Y,gd:v}).call(me).on("edit",function(ue){g.text=ue,this.call(me),z("text",ue),m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0),k.call("_guiRelayout",v,j())}):pe.call(me)}else M.selectAll("#"+R).remove();function ke(ue){var Ee={index:y,annotation:g._input,fullAnnotation:g,event:ue};return d&&(Ee.subplotId=d),Ee}function me(ue){return ue.call(e.font,ae).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),r.convertToTspans(ue,v,le),ue}function le(){var ue=pe.selectAll("a");1===ue.size()&&ue.text()===pe.text()&&Y.insert("a",":first-child").attr({"xlink:xlink:href":ue.attr("xlink:href"),"xlink:xlink:show":ue.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Q.node());var Ee=Y.select(".annotation-text-math-group"),de=!Ee.empty(),xe=e.bBox((de?Ee:pe).node()),Te=xe.width,we=xe.height,K=g.width||Te,oe=g.height||we,he=Math.round(K+2*X),ye=Math.round(oe+2*X);function Me(At,ht){return"auto"===ht&&(ht=At<.3333333333333333?"left":At>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ht]}for(var Re=!1,Pe=["x","y"],De=0;De<Pe.length;De++){var fe,ge,be,Ie,He,Ve=Pe[De],tt=g[Ve+"ref"]||Ve,nt=g["a"+Ve+"ref"],st={x:m,y:w}[Ve],dt=(D+("x"===Ve?0:-90))*Math.PI/180,wt=he*Math.cos(dt),_t=ye*Math.sin(dt),pt=Math.abs(wt)+Math.abs(_t),Pt=g[Ve+"anchor"],St=g[Ve+"shift"]*("x"===Ve?1:-1),Ot=V[Ve],jt=p.getRefType(tt);if(st&&"domain"!==jt){var Dt=st.r2fraction(g[Ve]);(Dt<0||Dt>1)&&(nt===tt?((Dt=st.r2fraction(g["a"+Ve]))<0||Dt>1)&&(Re=!0):Re=!0),fe=st._offset+st.r2p(g[Ve]),Ie=.5}else{var Ye="domain"===jt;"x"===Ve?(be=g[Ve],fe=Ye?st._offset+st._length*be:fe=E.l+E.w*be):(be=1-g[Ve],fe=Ye?st._offset+st._length*be:fe=E.t+E.h*be),Ie=g.showarrow?.5:be}if(g.showarrow){Ot.head=fe;var Ze=g["a"+Ve];if(He=wt*Me(.5,g.xanchor)-_t*Me(.5,g.yanchor),nt===tt){var Ne=p.getRefType(nt);"domain"===Ne?("y"===Ve&&(Ze=1-Ze),Ot.tail=st._offset+st._length*Ze):Ot.tail="paper"===Ne?"y"===Ve?E.t+E.h*(Ze=1-Ze):E.l+E.w*Ze:st._offset+st.r2p(Ze),ge=He}else Ot.tail=fe+Ze,ge=He+Ze;Ot.text=Ot.tail+He;var Je=_["x"===Ve?"width":"height"];if("paper"===tt&&(Ot.head=T.constrain(Ot.head,1,Je-1)),"pixel"===nt){var at=-Math.max(Ot.tail-3,Ot.text),Se=Math.min(Ot.tail+3,Ot.text)-Je;at>0?(Ot.tail+=at,Ot.text+=at):Se>0&&(Ot.tail-=Se,Ot.text-=Se)}Ot.tail+=St,Ot.head+=St}else ge=He=pt*Me(Ie,Pt),Ot.text=fe+He;Ot.text+=St,He+=St,g["_"+Ve+"padplus"]=pt/2+(ge+=St),g["_"+Ve+"padminus"]=pt/2-ge,g["_"+Ve+"size"]=pt,g["_"+Ve+"shift"]=He}if(Re)Y.remove();else{var ze=0,Ke=0;"left"!==g.align&&(ze=(K-Te)*("center"===g.align?.5:1)),"top"!==g.valign&&(Ke=(oe-we)*("middle"===g.valign?.5:1)),de?Ee.select("svg").attr({x:X+ze-1,y:X+Ke}).call(e.setClipUrl,ne?R:null,v):pe.call(r.positionText,X+ze-xe.left,X+Ke-xe.top).call(e.setClipUrl,ne?R:null,v),re.select("rect").call(e.setRect,X,X,K,oe),Q.call(e.setRect,q/2,q/2,he-q,ye-q),Y.call(e.setTranslate,Math.round(V.x.text-he/2),Math.round(V.y.text-ye/2)),N.attr({transform:"rotate("+D+","+V.x.text+","+V.y.text+")"});var mt,Lt=function(At,ht){B.selectAll(".annotation-arrow-g").remove();var Et=V.x.head,gt=V.y.head,kt=V.x.tail+At,It=V.y.tail+ht,Ut=V.x.text+At,Nt=V.y.text+ht,qt=T.rotationXYMatrix(D,Ut,Nt),Xt=T.apply2DTransform(qt),Kt=T.apply2DTransform2(qt),fn=+Q.attr("width"),nn=+Q.attr("height"),xn=Ut-.5*fn,jn=xn+fn,mn=Nt-.5*nn,en=mn+nn,vn=[[xn,mn,xn,en],[xn,en,jn,en],[jn,en,jn,mn],[jn,mn,xn,mn]].map(Kt);if(!vn.reduce(function($n,lr){return $n^!!T.segmentsIntersect(Et,gt,Et+1e6,gt+1e6,lr[0],lr[1],lr[2],lr[3])},!1)){vn.forEach(function($n){var lr=T.segmentsIntersect(kt,It,Et,gt,$n[0],$n[1],$n[2],$n[3]);lr&&(kt=lr.x,It=lr.y)});var on=g.arrowwidth,sn=g.arrowcolor,En=g.arrowside,kn=B.append("g").style({opacity:s.opacity(sn)}).classed("annotation-arrow-g",!0),zn=kn.append("path").attr("d","M"+kt+","+It+"L"+Et+","+gt).style("stroke-width",on+"px").call(s.stroke,s.rgb(sn));if(c(zn,En,g),L.annotationPosition&&zn.node().parentNode&&!d){var Fn=Et,Bn=gt;if(g.standoff){var er=Math.sqrt(Math.pow(Et-kt,2)+Math.pow(gt-It,2));Fn+=g.standoff*(kt-Et)/er,Bn+=g.standoff*(It-gt)/er}var Xn,mr,ur=kn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(kt-Fn)+","+(It-Bn),transform:x(Fn,Bn)}).style("stroke-width",on+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:ur.node(),gd:v,prepFn:function(){var $n=e.getTranslate(Y);Xn=$n.x,mr=$n.y,m&&m.autorange&&P(m._name+".autorange",!0),w&&w.autorange&&P(w._name+".autorange",!0)},moveFn:function($n,lr){var hr=Xt(Xn,mr),Gt=hr[0]+$n,pn=hr[1]+lr;Y.call(e.setTranslate,Gt,pn),z("x",f(m,$n,"x",E,g)),z("y",f(w,lr,"y",E,g)),g.axref===g.xref&&z("ax",f(m,$n,"ax",E,g)),g.ayref===g.yref&&z("ay",f(w,lr,"ay",E,g)),kn.attr("transform",x($n,lr)),N.attr({transform:"rotate("+D+","+Gt+","+pn+")"})},doneFn:function(){k.call("_guiRelayout",v,j());var $n=document.querySelector(".js-notes-box-panel");$n&&$n.redraw($n.selectedObj)}})}}};g.showarrow&&Lt(0,0),U&&a.init({element:Y.node(),gd:v,prepFn:function(){mt=N.attr("transform")},moveFn:function(At,ht){var Et="pointer";if(g.showarrow)z("ax",g.axref===g.xref?f(m,At,"ax",E,g):g.ax+At),z("ay",g.ayref===g.yref?f(w,ht,"ay",E.w,g):g.ay+ht),Lt(At,ht);else{if(d)return;var gt,kt;if(m)gt=f(m,At,"x",E,g);else{var It=g._xsize/E.w;gt=a.align(g.x+(g._xshift-g.xshift)/E.w-It/2+At/E.w,It,0,1,g.xanchor)}if(w)kt=f(w,ht,"y",E,g);else{var Nt=g._ysize/E.h;kt=a.align(g.y-(g._yshift+g.yshift)/E.h-Nt/2-ht/E.h,Nt,0,1,g.yanchor)}z("x",gt),z("y",kt),m&&w||(Et=a.getCursor(m?.5:gt,w?.5:kt,g.xanchor,g.yanchor))}N.attr({transform:x(At,ht)+mt}),n(Y,Et)},clickFn:function(At,ht){g.captureevents&&v.emit("plotly_clickannotation",ke(ht))},doneFn:function(){n(Y),k.call("_guiRelayout",v,j());var At=document.querySelector(".js-notes-box-panel");At&&At.redraw(At.selectedObj)}})}}}$.exports={draw:function(v){var g=v._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var y=0;y<g.annotations.length;y++)g.annotations[y].visible&&h(v,y);return l.previousPromises(v)},drawOne:h,drawRaw:b}},13011:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(82884),T=t(71828),x=T.strScale,p=T.strRotate,s=T.strTranslate;$.exports=function(e,o,r){var n,a,i,c,h=e.node(),f=l[r.arrowhead||0],b=l[r.startarrowhead||0],v=(r.arrowwidth||1)*(r.arrowsize||1),g=(r.arrowwidth||1)*(r.startarrowsize||1),y=o.indexOf("start")>=0,d=o.indexOf("end")>=0,m=f.backoff*v+r.standoff,w=b.backoff*g+r.startstandoff;if("line"===h.nodeName){n={x:+e.attr("x1"),y:+e.attr("y1")},a={x:+e.attr("x2"),y:+e.attr("y2")};var u=n.x-a.x,S=n.y-a.y;if(c=(i=Math.atan2(S,u))+Math.PI,m&&w&&m+w>Math.sqrt(u*u+S*S))return void B();if(m){if(m*m>u*u+S*S)return void B();var _=m*Math.cos(i),E=m*Math.sin(i);a.x+=_,a.y+=E,e.attr({x2:a.x,y2:a.y})}if(w){if(w*w>u*u+S*S)return void B();var L=w*Math.cos(i),C=w*Math.sin(i);n.x-=L,n.y-=C,e.attr({x1:n.x,y1:n.y})}}else if("path"===h.nodeName){var P=h.getTotalLength(),z="";if(P<m+w)return void B();var j=h.getPointAtLength(0),R=h.getPointAtLength(.1);i=Math.atan2(j.y-R.y,j.x-R.x),n=h.getPointAtLength(Math.min(w,P)),z="0px,"+w+"px,";var V=h.getPointAtLength(P),D=h.getPointAtLength(P-.1);c=Math.atan2(V.y-D.y,V.x-D.x),a=h.getPointAtLength(Math.max(0,P-m)),e.style("stroke-dasharray",z+=P-(z?w+m:m)+"px,"+P+"px")}function B(){e.style("stroke-dasharray","0px,100px")}function N(U,J,Y,q){U.path&&(U.noRotate&&(Y=0),M.select(h.parentNode).append("path").attr({class:e.attr("class"),d:U.path,transform:s(J.x,J.y)+p(180*Y/Math.PI)+x(q)}).style({fill:k.rgb(r.arrowcolor),"stroke-width":0}))}y&&N(b,n,i,g),d&&N(f,a,c,v)}},32745:function($,I,t){"use strict";var M=t(92605),k=t(44317);$.exports={moduleType:"component",name:"annotations",layoutAttributes:t(50215),supplyLayoutDefaults:t(84046),includeBasePlot:t(76325)("annotations"),calcAutorange:t(3749),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:t(94128)}},26997:function($,I,t){"use strict";var M=t(50215),k=t(30962).overrideAll,l=t(44467).templatedArray;$.exports=k(l("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},5485:function($,I,t){"use strict";var M=t(71828),k=t(89298);function l(T,x){var p=x.fullSceneLayout.domain,s=x.fullLayout._size,e={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,e),k.setConvert(T._xa),T._xa._offset=s.l+p.x[0]*s.w,T._xa.l2p=function(){return.5*(1+T._pdata[0]/T._pdata[3])*s.w*(p.x[1]-p.x[0])},T._ya={},M.extendFlat(T._ya,e),k.setConvert(T._ya),T._ya._offset=s.t+(1-p.y[1])*s.h,T._ya.l2p=function(){return.5*(1-T._pdata[1]/T._pdata[3])*s.h*(p.y[1]-p.y[0])}}$.exports=function(T){for(var x=T.fullSceneLayout.annotations,p=0;p<x.length;p++)l(x[p],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},20226:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(85501),T=t(25625),x=t(26997);function p(s,e,o,r){function n(i,c){return M.coerce(s,e,x,i,c)}function a(i){var c=i+"axis",h={_fullLayout:{}};return h._fullLayout[c]=o[c],k.coercePosition(e,h,n,i,i,.5)}n("visible")&&(T(s,e,r.fullLayout,n),a("x"),a("y"),a("z"),M.noneOrAll(s,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",n("ax",-10),n("ay",-30),M.noneOrAll(s,e,["ax","ay"])))}$.exports=function(s,e,o){l(s,e,{name:"annotations",handleItemDefaults:p,fullLayout:o.fullLayout})}},82188:function($,I,t){"use strict";var M=t(92605).drawRaw,k=t(63538),l=["x","y","z"];$.exports=function(T){for(var x=T.fullSceneLayout,p=T.dataScale,s=x.annotations,e=0;e<s.length;e++){for(var o=s[e],r=!1,n=0;n<3;n++){var a=l[n],c=x[a+"axis"].r2fraction(o[a]);if(c<0||c>1){r=!0;break}}r?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+e+'"]').remove():(o._pdata=k(T.glplot.cameraParams,[x.xaxis.r2l(o.x)*p[0],x.yaxis.r2l(o.y)*p[1],x.zaxis.r2l(o.z)*p[2]]),M(T.graphDiv,o,e,T.id,o._xa,o._ya))}}},2468:function($,I,t){"use strict";var M=t(73972),k=t(71828);$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t(26997)}}},layoutAttributes:t(26997),handleDefaults:t(20226),includeBasePlot:function(l,T){var x=M.subplotsRegistry.gl3d;if(x)for(var p=x.attrRegex,s=Object.keys(l),e=0;e<s.length;e++){var o=s[e];p.test(o)&&(l[o].annotations||[]).length&&(k.pushUnique(T._basePlotModules,x),k.pushUnique(T._subplots.gl3d,o))}},convert:t(5485),draw:t(82188)}},7561:function($,I,t){"use strict";$.exports=t(63489),t(94338),t(3961),t(38751),t(86825),t(37715),t(99384),t(43805),t(88874),t(83290),t(29108),t(55422),t(94320),t(31320),t(51367),t(21457)},72201:function($,I,t){"use strict";var M=t(7561),k=t(71828),l=t(50606),T=l.EPOCHJD,x=l.ONEDAY,p={valType:"enumerated",values:k.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},s=function(v,g,y,d){var m={};return m[y]=p,k.coerce(v,g,m,y,d)},e="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:e,w:e,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(v){return r[v]||(r[v]=M.instance(v))}function a(v){return k.extendFlat({},p,{description:v})}function i(v){return"Sets the calendar system to use with `"+v+"` date data."}var c={xcalendar:a(i("x"))},h=k.extendFlat({},c,{ycalendar:a(i("y"))}),f=k.extendFlat({},h,{zcalendar:a(i("z"))}),b=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:f,surface:f,mesh3d:f,scattergl:h,ohlc:c,candlestick:c},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:p,handleDefaults:s,handleTraceDefaults:function(v,g,y,d){for(var m=0;m<y.length;m++)s(v,g,y[m]+"calendar",d.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(v,g,y){for(var d,m,w,u,S,_=Math.floor((g+.05)/x)+T,E=n(y).fromJD(_),L=0;-1!==(L=v.indexOf("%",L));)"0"===(d=v.charAt(L+1))||"-"===d||"_"===d?(w=3,m=v.charAt(L+2),"_"===d&&(d="-")):(m=d,d="0",w=2),(u=o[m])?(S=u===e?e:E.formatDate(u[d]),v=v.substr(0,L)+S+v.substr(L+w),L+=S.length):L+=w;return v}}},22399:function($,I){"use strict";I.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],I.defaultLine="#444",I.lightLine="#eee",I.background="#fff",I.borderLine="#BEC8D9",I.lightFraction=90.9090909090909},7901:function($,I,t){"use strict";var M=t(84267),k=t(92770),l=t(73627).isTypedArray,T=$.exports={},x=t(22399);T.defaults=x.defaults;var p=T.defaultLine=x.defaultLine;T.lightLine=x.lightLine;var s=T.background=x.background;function e(o){if(k(o)||"string"!=typeof o)return o;var r=o.trim();if("rgb"!==r.substr(0,3))return o;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return o;var a=n[1].trim().split(/\s*[\s,]\s*/),i="a"===r.charAt(3)&&4===a.length;if(!i&&3!==a.length)return o;for(var c=0;c<a.length;c++){if(!(a[c].length&&(a[c]=Number(a[c]),a[c]>=0)))return o;if(3===c)a[c]>1&&(a[c]=1);else if(a[c]>=1)return o}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return i?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(o){var r=o.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},T.rgb=function(o){return T.tinyRGB(M(o))},T.opacity=function(o){return o?M(o).getAlpha():0},T.addOpacity=function(o,r){var n=M(o).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},T.combine=function(o,r){var n=M(o).toRgb();if(1===n.a)return M(o).toRgbString();var a=M(r||s).toRgb(),i=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};return M({r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a}).toRgbString()},T.contrast=function(o,r,n){var a=M(o);return 1!==a.getAlpha()&&(a=M(T.combine(o,s))),(a.isDark()?r?a.lighten(r):s:n?a.darken(n):p).toString()},T.stroke=function(o,r){var n=M(r);o.style({stroke:T.tinyRGB(n),"stroke-opacity":n.getAlpha()})},T.fill=function(o,r){var n=M(r);o.style({fill:T.tinyRGB(n),"fill-opacity":n.getAlpha()})},T.clean=function(o){if(o&&"object"==typeof o){var r,n,a,i,c=Object.keys(o);for(r=0;r<c.length;r++)if(i=o[a=c[r]],"color"===a.substr(a.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=e(i[n]);else o[a]=e(i);else if("colorscale"===a.substr(a.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=e(i[n][1]));else if(Array.isArray(i)){var h=i[0];if(!Array.isArray(h)&&h&&"object"==typeof h)for(n=0;n<i.length;n++)T.clean(i[n])}else i&&"object"==typeof i&&!l(i)&&T.clean(i)}}},63583:function($,I,t){"use strict";var M=t(13838),k=t(41940),l=t(1426).extendFlat,T=t(30962).overrideAll;$.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:l({},M.ticks,{dflt:""}),ticklabeloverflow:l({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:k({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function($){"use strict";$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function($,I,t){"use strict";var M=t(71828),k=t(44467),l=t(26218),T=t(38701),x=t(96115),p=t(89426),s=t(63583);$.exports=function(e,o,r){var n=k.newContainer(o,"colorbar"),a=e.colorbar||{};function i(S,_){return M.coerce(a,n,s,S,_)}var c=r.margin||{t:0,b:0,l:0,r:0},h=r.width-c.l-c.r,f=r.height-c.t-c.b,b="v"===i("orientation"),v=i("thicknessmode");i("thickness","fraction"===v?30/(b?h:f):30);var g=i("lenmode");i("len","fraction"===g?1:b?f:h),i("x",b?1.02:.5),i("xanchor",b?"left":"center"),i("xpad"),i("y",b?.5:1.02),i("yanchor",b?"middle":"bottom"),i("ypad"),M.noneOrAll(a,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor");var y=M.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:b?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");i("ticklabeloverflow",-1!==y.indexOf("inside")?"hide past domain":"hide past div"),l(a,n,i,"linear");var d=r.font,m={outerTicks:!1,font:d};-1!==y.indexOf("inside")&&(m.bgColor="black"),p(a,n,i,"linear",m),x(a,n,i,"linear",m),T(a,n,i,"linear",m),i("title.text",r._dfltTitle.colorbar);var w=n.tickfont,u=M.extendFlat({},w,{color:d.color,size:M.bigFont(w.size)});M.coerceFont(i,"title.font",u),i("title.side",b?"top":"right")}},98981:function($,I,t){"use strict";var M=t(39898),k=t(84267),l=t(74875),T=t(73972),x=t(89298),p=t(28569),s=t(71828),e=s.strTranslate,o=t(1426).extendFlat,r=t(6964),n=t(91424),a=t(7901),i=t(92998),c=t(63893),h=t(52075).flipScale,f=t(71453),b=t(52830),v=t(13838),g=t(18783),y=g.LINE_SPACING,d=g.FROM_TL,m=g.FROM_BR,w=t(30939).cn;$.exports={draw:function(u){var S=u._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(_){var E,L,C,P,z=_._fullLayout,j=_.calcdata,R=[];function V(ne){return o(ne,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function D(){"function"==typeof P.calc?P.calc(_,C,E):(E._fillgradient=L.reversescale?h(L.colorscale):L.colorscale,E._zrange=[L[P.min],L[P.max]])}for(var B=0;B<j.length;B++){var U=(C=j[B][0].trace)._module.colorbar;if(!0===C.visible&&U)for(var J=Array.isArray(U),Y=J?U:[U],q=0;q<Y.length;q++){var H=(P=Y[q]).container;(L=H?C[H]:C)&&L.showscale&&((E=V(L.colorbar))._id="cb"+C.uid+(J&&H?"-"+H:""),E._traceIndex=C.index,E._propPrefix=(H?H+".":"")+"colorbar.",E._meta=C._meta,D(),R.push(E))}}for(var X in z._colorAxes)if((L=z[X]).showscale){var Q=z._colorAxes[X];(E=V(L.colorbar))._id="cb"+X,E._propPrefix=X+".colorbar.",E._meta=z._meta,P={min:"cmin",max:"cmax"},"heatmap"!==Q[0]&&(P.calc=(C=Q[1])._module.colorbar.calc),D(),R.push(E)}return R}(u),function(_){return _._id});S.enter().append("g").attr("class",function(_){return _._id}).classed(w.colorbar,!0),S.each(function(_){var E=M.select(this);s.ensureSingle(E,"rect",w.cbbg),s.ensureSingle(E,"g",w.cbfills),s.ensureSingle(E,"g",w.cblines),s.ensureSingle(E,"g",w.cbaxis,function(C){C.classed(w.crisp,!0)}),s.ensureSingle(E,"g",w.cbtitleunshift,function(C){C.append("g").classed(w.cbtitle,!0)}),s.ensureSingle(E,"rect",w.cboutline);var C,P,z,j,R,V,D,B,L=function(C,P,z){var j="v"===P.orientation,R=P.len,V=P.lenmode,D=P.thickness,B=P.thicknessmode,N=P.outlinewidth,U=P.borderwidth,J=P.bgcolor,Y=P.xanchor,q=P.yanchor,H=P.xpad,X=P.ypad,Q=P.x,ne=j?P.y:1-P.y,re=z._fullLayout,ae=re._size,se=P._fillcolor,pe=P._line,ke=P.title,me=ke.side,le=P._zrange||M.extent(("function"==typeof se?se:pe.color).domain()),ue="function"==typeof pe.color?pe.color:function(){return pe.color},Ee="function"==typeof se?se:function(){return se},de=P._levels,xe=function(jt,Dt,Ye){var Ze,Ne,Je=Dt._levels,at=[],Se=[],ze=Je.end+Je.size/100,Ke=Je.size,it=1.001*Ye[0]-.001*Ye[1],ct=1.001*Ye[1]-.001*Ye[0];for(Ne=0;Ne<1e5&&(Ze=Je.start+Ne*Ke,!(Ke>0?Ze>=ze:Ze<=ze));Ne++)Ze>it&&Ze<ct&&at.push(Ze);if(Dt._fillgradient)Se=[0];else if("function"==typeof Dt._fillcolor){var mt=Dt._filllevels;if(mt)for(ze=mt.end+mt.size/100,Ke=mt.size,Ne=0;Ne<1e5&&(Ze=mt.start+Ne*Ke,!(Ke>0?Ze>=ze:Ze<=ze));Ne++)Ze>Ye[0]&&Ze<Ye[1]&&Se.push(Ze);else(Se=at.map(function(Lt){return Lt-Je.size/2})).push(Se[Se.length-1]+Je.size)}else Dt._fillcolor&&"string"==typeof Dt._fillcolor&&(Se=[0]);return Je.size<0&&(at.reverse(),Se.reverse()),{line:at,fill:Se}}(0,P,le),Te=xe.fill,we=xe.line,K=Math.round(D*("fraction"===B?j?ae.w:ae.h:1)),oe=K/(j?ae.w:ae.h),he=Math.round(R*("fraction"===V?j?ae.h:ae.w:1)),ye=he/(j?ae.h:ae.w),Me=Math.round(j?Q*ae.w+H:ne*ae.h+X),Re={center:.5,right:1}[Y]||0,Pe={top:1,middle:.5}[q]||0,De=j?Q-Re*oe:ne-Pe*oe,fe=j?ne-Pe*ye:Q-Re*ye,ge=Math.round(j?ae.h*(1-fe):ae.w*fe);P._lenFrac=ye,P._thickFrac=oe,P._uFrac=De,P._vFrac=fe;var be=P._axis=function(jt,Dt,Ye){var Ze=jt._fullLayout,Ne="v"===Dt.orientation,Je={type:"linear",range:Ye,tickmode:Dt.tickmode,nticks:Dt.nticks,tick0:Dt.tick0,dtick:Dt.dtick,tickvals:Dt.tickvals,ticktext:Dt.ticktext,ticks:Dt.ticks,ticklen:Dt.ticklen,tickwidth:Dt.tickwidth,tickcolor:Dt.tickcolor,showticklabels:Dt.showticklabels,labelalias:Dt.labelalias,ticklabelposition:Dt.ticklabelposition,ticklabeloverflow:Dt.ticklabeloverflow,ticklabelstep:Dt.ticklabelstep,tickfont:Dt.tickfont,tickangle:Dt.tickangle,tickformat:Dt.tickformat,exponentformat:Dt.exponentformat,minexponent:Dt.minexponent,separatethousands:Dt.separatethousands,showexponent:Dt.showexponent,showtickprefix:Dt.showtickprefix,tickprefix:Dt.tickprefix,showticksuffix:Dt.showticksuffix,ticksuffix:Dt.ticksuffix,title:Dt.title,showline:!0,anchor:"free",side:Ne?"right":"bottom",position:1},at=Ne?"y":"x",Se={type:"linear",_id:at+Dt._id},ze={letter:at,font:Ze.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ze.calendar};function Ke(it,ct){return s.coerce(Je,Se,v,it,ct)}return f(Je,Se,Ke,ze,Ze),b(Je,Se,Ke,ze),Se}(z,P,le);be.position=oe+(j?Q+H/ae.w:ne+X/ae.h);var Ie=-1!==["top","bottom"].indexOf(me);if(j&&Ie&&(be.title.side=me,be.titlex=Q+H/ae.w,be.titley=fe+("top"===ke.side?ye-X/ae.h:X/ae.h)),j||Ie||(be.title.side=me,be.titley=ne+X/ae.h,be.titlex=fe+H/ae.w),pe.color&&"auto"===P.tickmode){be.tickmode="linear",be.tick0=de.start;var He=de.size,Ve=s.constrain(he/50,4,15)+1,tt=(le[1]-le[0])/((P.nticks||Ve)*He);if(tt>1){var nt=Math.pow(10,Math.floor(Math.log(tt)/Math.LN10));He*=nt*s.roundUp(tt/nt,[2,5,10]),(Math.abs(de.start)/de.size+1e-6)%1<2e-6&&(be.tick0=0)}be.dtick=He}be.domain=j?[fe+X/ae.h,fe+ye-X/ae.h]:[fe+H/ae.w,fe+ye-H/ae.w],be.setScale(),C.attr("transform",e(Math.round(ae.l),Math.round(ae.t)));var st,dt=C.select("."+w.cbtitleunshift).attr("transform",e(-Math.round(ae.l),-Math.round(ae.t))),wt=be.ticklabelposition,_t=be.title.font.size,pt=C.select("."+w.cbaxis),Pt=0,St=0;function Ot(jt,Dt){var Ye={propContainer:be,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:re._dfltTitle.colorbar,containerGroup:C.select("."+w.cbtitle)},Ze="h"===jt.charAt(0)?jt.substr(1):"h"+jt;C.selectAll("."+Ze+",."+Ze+"-math-group").remove(),i.draw(z,jt,o(Ye,Dt||{}))}return s.syncOrAsync([l.previousPromises,function(){var jt,Dt;(j&&Ie||!j&&!Ie)&&("top"===me&&(jt=H+ae.l+ae.w*Q,Dt=X+ae.t+ae.h*(1-fe-ye)+3+.75*_t),"bottom"===me&&(jt=H+ae.l+ae.w*Q,Dt=X+ae.t+ae.h*(1-fe)-3-.25*_t),"right"===me&&(Dt=X+ae.t+ae.h*ne+3+.75*_t,jt=H+ae.l+ae.w*fe),Ot(be._id+"title",{attributes:{x:jt,y:Dt,"text-anchor":j?"start":"middle"}}))},function(){if(!j&&!Ie||j&&Ie){var jt,Dt=C.select("."+w.cbtitle),Ye=Dt.select("text"),Ze=[-N/2,N/2],Ne=Dt.select(".h"+be._id+"title-math-group").node(),Je=15.6;if(Ye.node()&&(Je=parseInt(Ye.node().style.fontSize,10)*y),Ne?(jt=n.bBox(Ne),St=jt.width,(Pt=jt.height)>Je&&(Ze[1]-=(Pt-Je)/2)):Ye.node()&&!Ye.classed(w.jsPlaceholder)&&(jt=n.bBox(Ye.node()),St=jt.width,Pt=jt.height),j){if(Pt){if(Pt+=5,"top"===me)be.domain[1]-=Pt/ae.h,Ze[1]*=-1;else{be.domain[0]+=Pt/ae.h;var at=c.lineCount(Ye);Ze[1]+=(1-at)*Je}Dt.attr("transform",e(Ze[0],Ze[1])),be.setScale()}}else St&&("right"===me&&(be.domain[0]+=(St+_t/2)/ae.w),Dt.attr("transform",e(Ze[0],Ze[1])),be.setScale())}C.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",j?e(0,Math.round(ae.h*(1-be.domain[1]))):e(Math.round(ae.w*be.domain[0]),0)),pt.attr("transform",j?e(0,Math.round(-ae.t)):e(Math.round(-ae.l),0));var Se=C.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(Te);Se.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),Se.exit().remove();var ze=le.map(be.c2p).map(Math.round).sort(function(Lt,At){return Lt-At});Se.each(function(Lt,At){var ht=[0===At?le[0]:(Te[At]+Te[At-1])/2,At===Te.length-1?le[1]:(Te[At]+Te[At+1])/2].map(be.c2p).map(Math.round);j&&(ht[1]=s.constrain(ht[1]+(ht[1]>ht[0])?1:-1,ze[0],ze[1]));var Et=M.select(this).attr(j?"x":"y",Me).attr(j?"y":"x",M.min(ht)).attr(j?"width":"height",Math.max(K,2)).attr(j?"height":"width",Math.max(M.max(ht)-M.min(ht),2));if(P._fillgradient)n.gradient(Et,z,P._id,j?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var gt=Ee(Lt).replace("e-","");Et.attr("fill",k(gt).toHexString())}});var Ke=C.select("."+w.cblines).selectAll("path."+w.cbline).data(pe.color&&pe.width?we:[]);Ke.enter().append("path").classed(w.cbline,!0),Ke.exit().remove(),Ke.each(function(Lt){var At=Me,ht=Math.round(be.c2p(Lt))+pe.width/2%1;M.select(this).attr("d","M"+(j?At+","+ht:ht+","+At)+(j?"h":"v")+K).call(n.lineGroupStyle,pe.width,ue(Lt),pe.dash)}),pt.selectAll("g."+be._id+"tick,path").remove();var it=Me+K+(N||0)/2-("outside"===P.ticks?1:0),ct=x.calcTicks(be),mt=x.getTickSigns(be)[2];return x.drawTicks(z,be,{vals:"inside"===be.ticks?x.clipEnds(be,ct):ct,layer:pt,path:x.makeTickPath(be,it,mt),transFn:x.makeTransTickFn(be)}),x.drawLabels(z,be,{vals:ct,layer:pt,transFn:x.makeTransTickLabelFn(be),labelFns:x.makeLabelFns(be,it)})},function(){if(j&&!Ie||!j&&Ie){var jt,Dt,Ye=be.position||0,Ze=be._offset+be._length/2;if("right"===me)Dt=Ze,jt=ae.l+ae.w*Ye+10+_t*(be.showticklabels?1:.5);else if(jt=Ze,"bottom"===me&&(Dt=ae.t+ae.h*Ye+10+(-1===wt.indexOf("inside")?be.tickfont.size:0)+("intside"!==be.ticks&&P.ticklen||0)),"top"===me){var Ne=ke.text.split("<br>").length;Dt=ae.t+ae.h*Ye+10-K-y*_t*Ne}Ot((j?"h":"v")+be._id+"title",{avoid:{selection:M.select(z).selectAll("g."+be._id+"tick"),side:me,offsetTop:j?0:ae.t,offsetLeft:j?ae.l:0,maxShift:j?re.width:re.height},attributes:{x:jt,y:Dt,"text-anchor":"middle"},transform:{rotate:j?-90:0,offset:0}})}},l.previousPromises,function(){var jt,Dt=K+N/2;-1===wt.indexOf("inside")&&(jt=n.bBox(pt.node()),Dt+=j?jt.width:jt.height),st=dt.select("text");var Ye=0,Ze=j&&"top"===me,Ne=!j&&"right"===me,Je=0;if(st.node()&&!st.classed(w.jsPlaceholder)){var at,Se=dt.select(".h"+be._id+"title-math-group").node();Se&&(j&&Ie||!j&&!Ie)?(Ye=(jt=n.bBox(Se)).width,at=jt.height):(Ye=(jt=n.bBox(dt.node())).right-ae.l-(j?Me:ge),at=jt.bottom-ae.t-(j?ge:Me),j||"top"!==me||(Dt+=jt.height,Je=jt.height)),Ne&&(st.attr("transform",e(Ye/2+_t/2,0)),Ye*=2),Dt=Math.max(Dt,j?Ye:at)}var ze=2*(j?H:X)+Dt+U+N/2,Ke=0;!j&&ke.text&&"bottom"===q&&ne<=0&&(ze+=Ke=ze/2,Je+=Ke),re._hColorbarMoveTitle=Ke,re._hColorbarMoveCBTitle=Je;var it=U+N;C.select("."+w.cbbg).attr("x",(j?Me:ge)-it/2-(j?H:0)).attr("y",(j?ge:Me)-(j?he:X+Je-Ke)).attr(j?"width":"height",Math.max(ze-Ke,2)).attr(j?"height":"width",Math.max(he+it,2)).call(a.fill,J).call(a.stroke,P.bordercolor).style("stroke-width",U);var ct=Ne?Math.max(Ye-10,0):0;if(C.selectAll("."+w.cboutline).attr("x",(j?Me:ge+H)+ct).attr("y",(j?ge+X-he:Me)+(Ze?Pt:0)).attr(j?"width":"height",Math.max(K,2)).attr(j?"height":"width",Math.max(he-(j?2*X+Pt:2*H+ct),2)).call(a.stroke,P.outlinecolor).style({fill:"none","stroke-width":N}),C.attr("transform",e(ae.l-(j?Re*ze:0),ae.t-(j?0:(1-Pe)*ze-Je))),!j&&(U||k(J).getAlpha()&&!k.equals(re.paper_bgcolor,J))){var mt=pt.selectAll("text"),Lt=mt[0].length,At=C.select("."+w.cbbg).node(),ht=n.bBox(At),Et=n.getTranslate(C);mt.each(function(Xt,Kt){var fn=Lt-1;if(0===Kt||Kt===fn){var nn,xn=n.bBox(this),jn=n.getTranslate(this);Kt===fn?(nn=ht.right+Et.x+ge-U-2+Q-(xn.right+jn.x))>0&&(nn=0):0===Kt&&(nn=ht.left+Et.x+ge+U+2-(xn.left+jn.x))<0&&(nn=0),nn&&(Lt<3?this.setAttribute("transform","translate("+nn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var gt={},kt=d[Y],It=m[Y],Ut=d[q],Nt=m[q],qt=ze-K;j?("pixels"===V?(gt.y=ne,gt.t=he*Ut,gt.b=he*Nt):(gt.t=gt.b=0,gt.yt=ne+R*Ut,gt.yb=ne-R*Nt),"pixels"===B?(gt.x=Q,gt.l=ze*kt,gt.r=ze*It):(gt.l=qt*kt,gt.r=qt*It,gt.xl=Q-D*kt,gt.xr=Q+D*It)):("pixels"===V?(gt.x=Q,gt.l=he*kt,gt.r=he*It):(gt.l=gt.r=0,gt.xl=Q+R*kt,gt.xr=Q-R*It),"pixels"===B?(gt.y=1-ne,gt.t=ze*Ut,gt.b=ze*Nt):(gt.t=qt*Ut,gt.b=qt*Nt,gt.yt=ne-D*Ut,gt.yb=ne+D*Nt)),l.autoMargin(z,P._id,gt)}],z)}(E,_,u);L&&L.then&&(u._promises||[]).push(L),u._context.edits.colorbarPosition&&(D="v"===(P=_).orientation,B=(z=u)._fullLayout._size,p.init({element:(C=E).node(),gd:z,prepFn:function(){j=C.attr("transform"),r(C)},moveFn:function(N,U){C.attr("transform",j+e(N,U)),R=p.align((D?P._uFrac:P._vFrac)+N/B.w,D?P._thickFrac:P._lenFrac,0,1,P.xanchor),V=p.align((D?P._vFrac:1-P._uFrac)-U/B.h,D?P._lenFrac:P._thickFrac,0,1,P.yanchor);var J=p.getCursor(R,V,P.xanchor,P.yanchor);r(C,J)},doneFn:function(){if(r(C),void 0!==R&&void 0!==V){var N={};N[P._propPrefix+"x"]=R,N[P._propPrefix+"y"]=V,void 0!==P._traceIndex?T.call("_guiRestyle",z,N,P._traceIndex):T.call("_guiRelayout",z,N)}}}))}),S.exit().each(function(_){l.autoMargin(u,_._id)}).remove(),S.order()}}},76228:function($,I,t){"use strict";var M=t(71828);$.exports=function(k){return M.isPlainObject(k.colorbar)}},12311:function($,I,t){"use strict";$.exports={moduleType:"component",name:"colorbar",attributes:t(63583),supplyDefaults:t(62499),draw:t(98981).draw,hasColorbar:t(76228)}},50693:function($,I,t){"use strict";var M=t(63583),k=t(30587).counter,l=t(78607),T=t(63282).scales;function x(p){return"`"+p+"`"}l(T),$.exports=function(p,s){p=p||"";var e,o=(s=s||{}).cLetter||"c",r=("onlyIfNumerical"in s||Boolean(p),"noScale"in s?s.noScale:"marker.line"===p),n="showScaleDflt"in s?s.showScaleDflt:"z"===o,a="string"==typeof s.colorscaleDflt?T[s.colorscaleDflt]:null,i=s.editTypeOverride||"",c=p?p+".":"";"colorAttr"in s?e=s.colorAttr:x(c+(e={z:"z",c:"color"}[o]));var h=o+"auto",f=o+"min",b=o+"max",v=o+"mid",g=(x(c+h),x(c+f),x(c+b),{});g[f]=g[b]=void 0;var y={};y[h]=!1;var d={};return"color"===e&&(d.color={valType:"color",arrayOk:!0,editType:i||"style"},s.anim&&(d.color.anim=!0)),d[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},d[f]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},d[b]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:y},d[v]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},d.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},d.autocolorscale={valType:"boolean",dflt:!1!==s.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},d.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(d.showscale={valType:"boolean",dflt:n,editType:"calc"},d.colorbar=M),s.noColorAxis||(d.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),d}},78803:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(52075).extractOpts;$.exports=function(T,x,p){var e=T._fullLayout,o=p.vals,r=p.containerStr,n=r?k.nestedProperty(x,r).get():x,a=l(n),i=!1!==a.auto,c=a.min,h=a.max,f=a.mid,b=function(){return k.aggNums(Math.min,null,o)},v=function(){return k.aggNums(Math.max,null,o)};void 0===c?c=b():i&&(c=n._colorAx&&M(c)?Math.min(c,b()):b()),void 0===h?h=v():i&&(h=n._colorAx&&M(h)?Math.max(h,v()):v()),i&&void 0!==f&&(h-f>f-c?c=f-(h-f):h-f<f-c&&(h=f+(f-c))),c===h&&(c-=.5,h+=.5),a._sync("min",c),a._sync("max",h),a.autocolorscale&&a._sync("colorscale",c*h<0?e.colorscale.diverging:c>=0?e.colorscale.sequential:e.colorscale.sequentialminus)}},33046:function($,I,t){"use strict";var M=t(71828),k=t(52075).hasColorscale,l=t(52075).extractOpts;$.exports=function(T,x){function p(i,c){var h=i["_"+c];void 0!==h&&(i[c]=h)}function s(i,c){var h=c.container?M.nestedProperty(i,c.container).get():i;if(h)if(h.coloraxis)h._colorAx=x[h.coloraxis];else{var f=l(h),b=f.auto;(b||void 0===f.min)&&p(h,c.min),(b||void 0===f.max)&&p(h,c.max),f.autocolorscale&&p(h,"colorscale")}}for(var e=0;e<T.length;e++){var o=T[e],r=o._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)s(o,r[n]);else s(o,r);k(o,"marker.line")&&s(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in x._colorAxes)s(x[a],{min:"cmin",max:"cmax"})}},1586:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(76228),T=t(62499),x=t(63282).isValid,p=t(73972).traceIs;function s(e,o){var r=o.slice(0,o.length-1);return o?k.nestedProperty(e,r).get()||{}:e}$.exports=function e(o,r,n,a,i){var c=i.prefix,h=i.cLetter,f="_module"in r,b=s(o,c),v=s(r,c),g=s(r._template||{},c)||{},y=function(){return delete o.coloraxis,delete r.coloraxis,e(o,r,n,a,i)};if(f){var d=n._colorAxes||{},m=a(c+"coloraxis");if(m){var w=p(r,"contour")&&k.nestedProperty(r,"contours.coloring").get()||"heatmap",u=d[m];return void(u?(u[2].push(y),u[0]!==w&&(u[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):d[m]=[w,r,[y]])}}var S=b[h+"min"],_=b[h+"max"],E=M(S)&&M(_)&&S<_;a(c+h+"auto",!E)?a(c+h+"mid"):(a(c+h+"min"),a(c+h+"max"));var L,C,P=b.colorscale,z=g.colorscale;void 0!==P&&(L=!x(P)),void 0!==z&&(L=!x(z)),a(c+"autocolorscale",L),a(c+"colorscale"),a(c+"reversescale"),"marker.line."!==c&&(c&&f&&(C=l(b)),a(c+"showscale",C)&&(c&&g&&(v._template=g),T(b,v,n)))}},52075:function($,I,t){"use strict";var M=t(39898),k=t(84267),l=t(92770),T=t(71828),x=t(7901),p=t(63282).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],e=["min","max","mid","auto"];function o(c){var h,f,b,v=c._colorAx,g=v||c,y={};for(f=0;f<s.length;f++)y[b=s[f]]=g[b];if(v)for(h="c",f=0;f<e.length;f++)y[b=e[f]]=g["c"+b];else{var d;for(f=0;f<e.length;f++)((d="c"+(b=e[f]))in g||(d="z"+b)in g)&&(y[b]=g[d]);h=d.charAt(0)}return y._sync=function(m,w){var u=-1!==e.indexOf(m)?h+m:m;g[u]=g["_"+u]=w},y}function r(c){for(var h=o(c),f=h.min,b=h.max,v=h.reversescale?n(h.colorscale):h.colorscale,g=v.length,y=new Array(g),d=new Array(g),m=0;m<g;m++){var w=v[m];y[m]=f+w[0]*(b-f),d[m]=w[1]}return{domain:y,range:d}}function n(c){for(var h=c.length,f=new Array(h),b=h-1,v=0;b>=0;b--,v++){var g=c[b];f[v]=[1-g[0],g[1]]}return f}function a(c,h){h=h||{};for(var f=c.domain,b=c.range,v=b.length,g=new Array(v),y=0;y<v;y++){var d=k(b[y]).toRgb();g[y]=[d.r,d.g,d.b,d.a]}var m,w=M.scale.linear().domain(f).range(g).clamp(!0),u=h.noNumericCheck,S=h.returnArray;return(m=u&&S?w:u?function(_){return i(w(_))}:S?function(_){return l(_)?w(_):k(_).isValid()?_:x.defaultLine}:function(_){return l(_)?i(w(_)):k(_).isValid()?_:x.defaultLine}).domain=w.domain,m.range=function(){return b},m}function i(c){return k({r:c[0],g:c[1],b:c[2],a:c[3]}).toRgbString()}$.exports={hasColorscale:function(c,h,f){var b=h?T.nestedProperty(c,h).get()||{}:c,v=b[f||"color"],g=!1;if(T.isArrayOrTypedArray(v))for(var y=0;y<v.length;y++)if(l(v[y])){g=!0;break}return T.isPlainObject(b)&&(g||!0===b.showscale||l(b.cmin)&&l(b.cmax)||p(b.colorscale)||T.isPlainObject(b.colorbar))},extractOpts:o,extractScale:r,flipScale:n,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(c,h){return a(r(c),h)}}},21081:function($,I,t){"use strict";var M=t(63282),k=t(52075);$.exports={moduleType:"component",name:"colorscale",attributes:t(50693),layoutAttributes:t(72673),supplyLayoutDefaults:t(30959),handleDefaults:t(1586),crossTraceDefaults:t(33046),calc:t(78803),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},72673:function($,I,t){"use strict";var M=t(1426).extendFlat,k=t(50693),l=t(63282).scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function($,I,t){"use strict";var M=t(71828),k=t(44467),l=t(72673),T=t(1586);$.exports=function(x,p){function s(h,f){return M.coerce(x,p,l,h,f)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var e,o,r=p._colorAxes;function n(h,f){return M.coerce(e,o,l.coloraxis,h,f)}for(var a in r){var i=r[a];if(i[0])e=x[a]||{},(o=k.newContainer(p,a,"coloraxis"))._name=a,T(e,o,p,n,{prefix:"",cLetter:"c"});else{for(var c=0;c<i[2].length;c++)i[2][c]();delete p._colorAxes[a]}}}},63282:function($,I,t){"use strict";var M=t(84267),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=k.RdBu;function T(x){var p=0;if(!Array.isArray(x)||x.length<2||!x[0]||!x[x.length-1]||0!=+x[0][0]||1!=+x[x.length-1][0])return!1;for(var s=0;s<x.length;s++){var e=x[s];if(2!==e.length||+e[0]<p||!M(e[1]).isValid())return!1;p=+e[0]}return!0}$.exports={scales:k,defaultScale:l,get:function(x,p){if(p||(p=l),!x)return p;function s(){try{x=k[x]||JSON.parse(x)}catch{x=p}}return"string"==typeof x&&(s(),"string"==typeof x&&s()),T(x)?x:p},isValid:function(x){return void 0!==k[x]||T(x)}}},92807:function($){"use strict";$.exports=function(I,t,M,k,l){var T=(I-M)/(k-M),x=T+t/(k-M),p=(T+x)/2;return"left"===l||"bottom"===l?T:"center"===l||"middle"===l?p:"right"===l||"top"===l?x:T<.6666666666666666-p?T:x>1.3333333333333333-p?x:p}},70461:function($,I,t){"use strict";var M=t(71828),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(l,T,x,p){return l="left"===x?0:"center"===x?1:"right"===x?2:M.constrain(Math.floor(3*l),0,2),T="bottom"===p?0:"middle"===p?1:"top"===p?2:M.constrain(Math.floor(3*T),0,2),k[T][l]}},64505:function($,I){"use strict";I.selectMode=function(t){return"lasso"===t||"select"===t},I.drawMode=function(t){return"drawclosedpath"===t||"drawopenpath"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},I.openMode=function(t){return"drawline"===t||"drawopenpath"===t},I.rectMode=function(t){return"select"===t||"drawline"===t||"drawrect"===t||"drawcircle"===t},I.freeMode=function(t){return"lasso"===t||"drawclosedpath"===t||"drawopenpath"===t},I.selectingOrDrawing=function(t){return I.freeMode(t)||I.rectMode(t)}},28569:function($,I,t){"use strict";var M=t(48956),k=t(57035),l=t(38520),T=t(71828).removeElement,x=t(85555),p=$.exports={};p.align=t(92807),p.getCursor=t(70461);var s=t(26041);function e(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function o(r){return M(r.changedTouches?r.changedTouches[0]:r,document.body)}p.unhover=s.wrapped,p.unhoverRaw=s.raw,p.init=function(r){var n,a,i,c,h,f,b,v,g=r.gd,y=1,d=g._context.doubleClickDelay,m=r.element;g._mouseDownTime||(g._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=u,l?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=u,m.addEventListener("touchstart",u,{passive:!1})):m.ontouchstart=u;var w=r.clampFn||function(E,L,C){return Math.abs(E)<C&&(E=0),Math.abs(L)<C&&(L=0),[E,L]};function u(E){g._dragged=!1,g._dragging=!0;var L=o(E);n=L[0],a=L[1],b=E.target,f=E,v=2===E.buttons||E.ctrlKey,void 0===E.clientX&&void 0===E.clientY&&(E.clientX=n,E.clientY=a),(i=(new Date).getTime())-g._mouseDownTime<d?y+=1:(y=1,g._mouseDownTime=i),r.prepFn&&r.prepFn(E,n,a),k&&!v?(h=e()).style.cursor=window.getComputedStyle(m).cursor:k||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",_),document.addEventListener("touchend",_),!1!==r.dragmode&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var L=o(E),P=w(L[0]-n,L[1]-a,r.minDrag||x.MINDRAG),z=P[0],j=P[1];(z||j)&&(g._dragged=!0,p.unhover(g,E)),g._dragged&&r.moveFn&&!v&&(g._dragdata={element:m,dx:z,dy:j},r.moveFn(z,j))}function _(E){if(delete g._dragdata,!1!==r.dragmode&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",_),document.removeEventListener("touchend",_),k?T(h):c&&(h.documentElement.style.cursor=c,c=null),g._dragging){if(g._dragging=!1,(new Date).getTime()-g._mouseDownTime>d&&(y=Math.max(y-1,1)),g._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(y,f),!v){var L;try{L=new MouseEvent("click",E)}catch{var C=o(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}b.dispatchEvent(L)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},p.coverSlip=e},26041:function($,I,t){"use strict";var M=t(11086),k=t(79990),l=t(24401).getGraphDiv,T=t(26675),x=$.exports={};x.wrapped=function(p,s,e){(p=l(p))._fullLayout&&k.clear(p._fullLayout._uid+T.HOVERID),x.raw(p,s,e)},x.raw=function(p,s){var e=p._fullLayout,o=p._hoverdata;s||(s={}),s.target&&!p._dragged&&!1===M.triggerHandler(p,"plotly_beforehover",s)||(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),p._hoverdata=void 0,s.target&&o&&p.emit("plotly_unhover",{event:s,points:o}))}},79952:function($,I){"use strict";I.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},I.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=k.numberFormat,T=t(92770),x=t(84267),p=t(73972),s=t(7901),e=t(21081),o=k.strTranslate,r=t(63893),n=t(77922),a=t(18783).LINE_SPACING,i=t(37822).DESELECTDIM,c=t(34098),h=t(39984),f=t(23469).appendArrayPointValue,b=$.exports={};function v(de,xe,Te){var we=xe.fillpattern,K=we&&b.getPatternAttr(we.shape,0,"");if(K){var oe=b.getPatternAttr(we.bgcolor,0,null),he=b.getPatternAttr(we.fgcolor,0,null),ye=we.fgopacity,Me=b.getPatternAttr(we.size,0,8),Re=b.getPatternAttr(we.solidity,0,.3);b.pattern(de,"point",Te,xe.uid,K,Me,Re,void 0,we.fillmode,oe,he,ye)}else xe.fillcolor&&de.call(s.fill,xe.fillcolor)}b.font=function(de,xe,Te,we){k.isPlainObject(xe)&&(we=xe.color,Te=xe.size,xe=xe.family),xe&&de.style("font-family",xe),Te+1&&de.style("font-size",Te+"px"),we&&de.call(s.fill,we)},b.setPosition=function(de,xe,Te){de.attr("x",xe).attr("y",Te)},b.setSize=function(de,xe,Te){de.attr("width",xe).attr("height",Te)},b.setRect=function(de,xe,Te,we,K){de.call(b.setPosition,xe,Te).call(b.setSize,we,K)},b.translatePoint=function(de,xe,Te,we){var K=Te.c2p(de.x),oe=we.c2p(de.y);return!!(T(K)&&T(oe)&&xe.node())&&("text"===xe.node().nodeName?xe.attr("x",K).attr("y",oe):xe.attr("transform",o(K,oe)),!0)},b.translatePoints=function(de,xe,Te){de.each(function(we){var K=M.select(this);b.translatePoint(we,K,xe,Te)})},b.hideOutsideRangePoint=function(de,xe,Te,we,K,oe){xe.attr("display",Te.isPtWithinRange(de,K)&&we.isPtWithinRange(de,oe)?null:"none")},b.hideOutsideRangePoints=function(de,xe){if(xe._hasClipOnAxisFalse){var Te=xe.xaxis,we=xe.yaxis;de.each(function(K){var oe=K[0].trace,he=oe.xcalendar,ye=oe.ycalendar,Me=p.traceIs(oe,"bar-like")?".bartext":".point,.textpoint";de.selectAll(Me).each(function(Re){b.hideOutsideRangePoint(Re,M.select(this),Te,we,he,ye)})})}},b.crispRound=function(de,xe,Te){return xe&&T(xe)?de._context.staticPlot?xe:xe<1?1:Math.round(xe):Te||0},b.singleLineStyle=function(de,xe,Te,we,K){xe.style("fill","none");var oe=(((de||[])[0]||{}).trace||{}).line||{},he=Te||oe.width||0,ye=K||oe.dash||"";s.stroke(xe,we||oe.color),b.dashLine(xe,ye,he)},b.lineGroupStyle=function(de,xe,Te,we){de.style("fill","none").each(function(K){var oe=(((K||[])[0]||{}).trace||{}).line||{},he=xe||oe.width||0,ye=we||oe.dash||"";M.select(this).call(s.stroke,Te||oe.color).call(b.dashLine,ye,he)})},b.dashLine=function(de,xe,Te){xe=b.dashStyle(xe,Te=+Te||0),de.style({"stroke-dasharray":xe,"stroke-width":Te+"px"})},b.dashStyle=function(de,xe){xe=+xe||1;var Te=Math.max(xe,3);return"solid"===de?de="":"dot"===de?de=Te+"px,"+Te+"px":"dash"===de?de=3*Te+"px,"+3*Te+"px":"longdash"===de?de=5*Te+"px,"+5*Te+"px":"dashdot"===de?de=3*Te+"px,"+Te+"px,"+Te+"px,"+Te+"px":"longdashdot"===de&&(de=5*Te+"px,"+2*Te+"px,"+Te+"px,"+2*Te+"px"),de},b.singleFillStyle=function(de,xe){var Te=M.select(de.node());v(de,((Te.data()[0]||[])[0]||{}).trace||{},xe)},b.fillGroupStyle=function(de,xe){de.style("stroke-width",0).each(function(Te){var we=M.select(this);Te[0].trace&&v(we,Te[0].trace,xe)})};var g=t(90998);b.symbolNames=[],b.symbolFuncs=[],b.symbolBackOffs=[],b.symbolNeedLines={},b.symbolNoDot={},b.symbolNoFill={},b.symbolList=[],Object.keys(g).forEach(function(de){var xe=g[de],Te=xe.n;b.symbolList.push(Te,String(Te),de,Te+100,String(Te+100),de+"-open"),b.symbolNames[Te]=de,b.symbolFuncs[Te]=xe.f,b.symbolBackOffs[Te]=xe.backoff||0,xe.needLine&&(b.symbolNeedLines[Te]=!0),xe.noDot?b.symbolNoDot[Te]=!0:b.symbolList.push(Te+200,String(Te+200),de+"-dot",Te+300,String(Te+300),de+"-open-dot"),xe.noFill&&(b.symbolNoFill[Te]=!0)});var y=b.symbolNames.length;function d(de,xe,Te,we){return b.symbolFuncs[de%100](xe,Te,we)+(de>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}b.symbolNumber=function(de){if(T(de))de=+de;else if("string"==typeof de){var xe=0;de.indexOf("-open")>0&&(xe=100,de=de.replace("-open","")),de.indexOf("-dot")>0&&(xe+=200,de=de.replace("-dot","")),(de=b.symbolNames.indexOf(de))>=0&&(de+=xe)}return de%100>=y||de>=400?0:Math.floor(Math.max(de,0))};var m={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},u=l("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:m},horizontalreversed:{node:"linearGradient",attrs:m,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};b.gradient=function(de,xe,Te,we,K,oe){for(var he=K.length,ye=S[we],Me=new Array(he),Re=0;Re<he;Re++)ye.reversed?Me[he-1-Re]=[u(100*(1-K[Re][0])),K[Re][1]]:Me[Re]=[u(100*K[Re][0]),K[Re][1]];var Pe=xe._fullLayout,De="g"+Pe._uid+"-"+Te,fe=Pe._defs.select(".gradients").selectAll("#"+De).data([we+Me.join(";")],k.identity);fe.exit().remove(),fe.enter().append(ye.node).each(function(){var ge=M.select(this);ye.attrs&&ge.attr(ye.attrs),ge.attr("id",De);var be=ge.selectAll("stop").data(Me);be.exit().remove(),be.enter().append("stop"),be.each(function(Ie){var He=x(Ie[1]);M.select(this).attr({offset:Ie[0]+"%","stop-color":s.tinyRGB(He),"stop-opacity":He.getAlpha()})})}),de.style(oe,Y(De,xe)).style(oe+"-opacity",null),de.classed("gradient_filled",!0)},b.pattern=function(de,xe,Te,we,K,oe,he,ye,Me,Re,Pe,De){var fe="legend"===xe;ye&&("overlay"===Me?Pe=s.contrast(Re=ye):(Re=void 0,Pe=ye));var ge,be,Ie,He,Ve,tt,nt,st,dt,wt=Te._fullLayout,_t="p"+wt._uid+"-"+we,pt={},Pt=x(Pe),St=s.tinyRGB(Pt),Ot=De*Pt.getAlpha();switch(K){case"/":ge=oe*Math.sqrt(2),be=oe*Math.sqrt(2),tt="path",pt={d:Ie="M-"+ge/4+","+be/4+"l"+ge/2+",-"+be/2+"M0,"+be+"L"+ge+",0M"+ge/4*3+","+be/4*5+"l"+ge/2+",-"+be/2,opacity:Ot,stroke:St,"stroke-width":(He=he*oe)+"px"};break;case"\\":ge=oe*Math.sqrt(2),be=oe*Math.sqrt(2),tt="path",pt={d:Ie="M"+ge/4*3+",-"+be/4+"l"+ge/2+","+be/2+"M0,0L"+ge+","+be+"M-"+ge/4+","+be/4*3+"l"+ge/2+","+be/2,opacity:Ot,stroke:St,"stroke-width":(He=he*oe)+"px"};break;case"x":ge=oe*Math.sqrt(2),be=oe*Math.sqrt(2),Ie="M-"+ge/4+","+be/4+"l"+ge/2+",-"+be/2+"M0,"+be+"L"+ge+",0M"+ge/4*3+","+be/4*5+"l"+ge/2+",-"+be/2+"M"+ge/4*3+",-"+be/4+"l"+ge/2+","+be/2+"M0,0L"+ge+","+be+"M-"+ge/4+","+be/4*3+"l"+ge/2+","+be/2,He=oe-oe*Math.sqrt(1-he),tt="path",pt={d:Ie,opacity:Ot,stroke:St,"stroke-width":He+"px"};break;case"|":tt="path",tt="path",pt={d:Ie="M"+(ge=oe)/2+",0L"+ge/2+","+(be=oe),opacity:Ot,stroke:St,"stroke-width":(He=he*oe)+"px"};break;case"-":tt="path",tt="path",pt={d:Ie="M0,"+(be=oe)/2+"L"+(ge=oe)+","+be/2,opacity:Ot,stroke:St,"stroke-width":(He=he*oe)+"px"};break;case"+":tt="path",Ie="M"+(ge=oe)/2+",0L"+ge/2+","+(be=oe)+"M0,"+be/2+"L"+ge+","+be/2,He=oe-oe*Math.sqrt(1-he),tt="path",pt={d:Ie,opacity:Ot,stroke:St,"stroke-width":He+"px"};break;case".":ge=oe,be=oe,he<Math.PI/4?Ve=Math.sqrt(he*oe*oe/Math.PI):(nt=he,st=Math.PI/4,Ve=(dt=oe/2)+(oe/Math.sqrt(2)-dt)*(nt-st)/(1-st)),tt="circle",pt={cx:ge/2,cy:be/2,r:Ve,opacity:Ot,fill:St}}var jt=[K||"noSh",Re||"noBg",Pe||"noFg",oe,he].join(";"),Dt=wt._defs.select(".patterns").selectAll("#"+_t).data([jt],k.identity);Dt.exit().remove(),Dt.enter().append("pattern").each(function(){var Ye=M.select(this);if(Ye.attr({id:_t,width:ge+"px",height:be+"px",patternUnits:"userSpaceOnUse",patternTransform:fe?"scale(0.8)":""}),Re){var Ze=x(Re),Ne=s.tinyRGB(Ze),Je=Ze.getAlpha(),at=Ye.selectAll("rect").data([0]);at.exit().remove(),at.enter().append("rect").attr({width:ge+"px",height:be+"px",fill:Ne,"fill-opacity":Je})}var Se=Ye.selectAll(tt).data([0]);Se.exit().remove(),Se.enter().append(tt).attr(pt)}),de.style("fill",Y(_t,Te)).style("fill-opacity",null),de.classed("pattern_filled",!0)},b.initGradients=function(de){k.ensureSingle(de._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(de).selectAll(".gradient_filled").classed("gradient_filled",!1)},b.initPatterns=function(de){k.ensureSingle(de._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),M.select(de).selectAll(".pattern_filled").classed("pattern_filled",!1)},b.getPatternAttr=function(de,xe,Te){return de&&k.isArrayOrTypedArray(de)?xe<de.length?de[xe]:Te:de},b.pointStyle=function(de,xe,Te){if(de.size()){var we=b.makePointStyleFns(xe);de.each(function(K){b.singlePointStyle(K,M.select(this),xe,we,Te)})}},b.singlePointStyle=function(de,xe,Te,we,K){var oe=Te.marker,he=oe.line;if(xe.style("opacity",we.selectedOpacityFn?we.selectedOpacityFn(de):void 0===de.mo?oe.opacity:de.mo),we.ms2mrc){var ye;ye="various"===de.ms||"various"===oe.size?3:we.ms2mrc(de.ms),de.mrc=ye,we.selectedSizeFn&&(ye=de.mrc=we.selectedSizeFn(de));var Me=b.symbolNumber(de.mx||oe.symbol)||0;de.om=Me%200>=100;var Re=Ee(de,Te),Pe=X(de,Te);xe.attr("d",d(Me,ye,Re,Pe))}var De,fe,ge,be=!1;if(de.so?(ge=he.outlierwidth,fe=he.outliercolor,De=oe.outliercolor):(ge=(de.mlw+1||(he||{}).width+1||(de.trace?(de.trace.marker.line||{}).width:0)+1)-1||0,fe="mlc"in de?de.mlcc=we.lineScale(de.mlc):k.isArrayOrTypedArray(he.color)?s.defaultLine:he.color,k.isArrayOrTypedArray(oe.color)&&(De=s.defaultLine,be=!0),De="mc"in de?de.mcc=we.markerScale(de.mc):oe.color||"rgba(0,0,0,0)",we.selectedColorFn&&(De=we.selectedColorFn(de))),de.om)xe.call(s.stroke,De).style({"stroke-width":(ge||1)+"px",fill:"none"});else{xe.style("stroke-width",(de.isBlank?0:ge)+"px");var He=oe.gradient,Ve=de.mgt;Ve?be=!0:Ve=He&&He.type,k.isArrayOrTypedArray(Ve)&&(S[Ve=Ve[0]]||(Ve=0));var tt=oe.pattern,nt=tt&&b.getPatternAttr(tt.shape,de.i,"");if(Ve&&"none"!==Ve){var st=de.mgc;st?be=!0:st=He.color;var dt=Te.uid;be&&(dt+="-"+de.i),b.gradient(xe,K,dt,Ve,[[0,st],[1,De]],"fill")}else if(nt){var wt=b.getPatternAttr(tt.bgcolor,de.i,null),_t=b.getPatternAttr(tt.fgcolor,de.i,null),pt=tt.fgopacity,Pt=b.getPatternAttr(tt.size,de.i,8),St=b.getPatternAttr(tt.solidity,de.i,.3),Ot=de.mcc||k.isArrayOrTypedArray(tt.shape)||k.isArrayOrTypedArray(tt.bgcolor)||k.isArrayOrTypedArray(tt.size)||k.isArrayOrTypedArray(tt.solidity),jt=Te.uid;Ot&&(jt+="-"+de.i),b.pattern(xe,"point",K,jt,nt,Pt,St,de.mcc,tt.fillmode,wt,_t,pt)}else s.fill(xe,De);ge&&s.stroke(xe,fe)}},b.makePointStyleFns=function(de){var xe={},Te=de.marker;return xe.markerScale=b.tryColorscale(Te,""),xe.lineScale=b.tryColorscale(Te,"line"),p.traceIs(de,"symbols")&&(xe.ms2mrc=c.isBubble(de)?h(de):function(){return(Te.size||6)/2}),de.selectedpoints&&k.extendFlat(xe,b.makeSelectedPointStyleFns(de)),xe},b.makeSelectedPointStyleFns=function(de){var xe={},K=de.marker||{},oe=(de.selected||{}).marker||{},he=(de.unselected||{}).marker||{},Me=oe.opacity,Re=he.opacity,Pe=void 0!==Me,De=void 0!==Re;(k.isArrayOrTypedArray(K.opacity)||Pe||De)&&(xe.selectedOpacityFn=function(st){var dt=void 0===st.mo?K.opacity:st.mo;return st.selected?Pe?Me:dt:De?Re:i*dt});var fe=K.color,ge=oe.color,be=he.color;(ge||be)&&(xe.selectedColorFn=function(st){var dt=st.mcc||fe;return st.selected?ge||dt:be||dt});var Ie=K.size,He=oe.size,Ve=he.size,tt=void 0!==He,nt=void 0!==Ve;return p.traceIs(de,"symbols")&&(tt||nt)&&(xe.selectedSizeFn=function(st){var dt=st.mrc||Ie/2;return st.selected?tt?He/2:dt:nt?Ve/2:dt}),xe},b.makeSelectedTextStyleFns=function(de){var xe={},ye=(de.textfont||{}).color,Me=((de.selected||{}).textfont||{}).color,Re=((de.unselected||{}).textfont||{}).color;return xe.selectedTextColorFn=function(Pe){var De=Pe.tc||ye;return Pe.selected?Me||De:Re||(Me?De:s.addOpacity(De,i))},xe},b.selectedPointStyle=function(de,xe){if(de.size()&&xe.selectedpoints){var Te=b.makeSelectedPointStyleFns(xe),we=xe.marker||{},K=[];Te.selectedOpacityFn&&K.push(function(oe,he){oe.style("opacity",Te.selectedOpacityFn(he))}),Te.selectedColorFn&&K.push(function(oe,he){s.fill(oe,Te.selectedColorFn(he))}),Te.selectedSizeFn&&K.push(function(oe,he){var ye=he.mx||we.symbol||0,Me=Te.selectedSizeFn(he);oe.attr("d",d(b.symbolNumber(ye),Me,Ee(he,xe),X(he,xe))),he.mrc2=Me}),K.length&&de.each(function(oe){for(var he=M.select(this),ye=0;ye<K.length;ye++)K[ye](he,oe)})}},b.tryColorscale=function(de,xe){var Te=xe?k.nestedProperty(de,xe).get():de;return Te&&(Te.colorscale||Te._colorAx)&&k.isArrayOrTypedArray(Te.color)?e.makeColorScaleFuncFromTrace(Te):k.identity};var _,E,L={start:1,end:-1,middle:0,bottom:1,top:-1};function C(de,xe,Te,we,K){var oe=M.select(de.node().parentNode),he=-1!==xe.indexOf("top")?"top":-1!==xe.indexOf("bottom")?"bottom":"middle",ye=-1!==xe.indexOf("left")?"end":-1!==xe.indexOf("right")?"start":"middle",Me=we?we/.8+1:0,Re=(r.lineCount(de)-1)*a+1,Pe=L[ye]*Me,De=.75*Te+L[he]*Me+(L[he]-1)*Re*Te/2;de.attr("text-anchor",ye),K||oe.attr("transform",o(Pe,De))}function P(de,xe){var Te=de.ts||xe.textfont.size;return T(Te)&&Te>0?Te:0}function z(de,xe,Te){return Te&&(de=N(de)),xe?R(de[1]):j(de[0])}function j(de){var xe=M.round(de,2);return _=xe,xe}function R(de){var xe=M.round(de,2);return E=xe,xe}function V(de,xe,Te,we){var K=de[0]-xe[0],oe=de[1]-xe[1],he=Te[0]-xe[0],ye=Te[1]-xe[1],Me=Math.pow(K*K+oe*oe,.25),Re=Math.pow(he*he+ye*ye,.25),Pe=(Re*Re*K-Me*Me*he)*we,De=(Re*Re*oe-Me*Me*ye)*we,fe=3*Re*(Me+Re),ge=3*Me*(Me+Re);return[[j(xe[0]+(fe&&Pe/fe)),R(xe[1]+(fe&&De/fe))],[j(xe[0]-(ge&&Pe/ge)),R(xe[1]-(ge&&De/ge))]]}b.textPointStyle=function(de,xe,Te){if(de.size()){var we;if(xe.selectedpoints){var K=b.makeSelectedTextStyleFns(xe);we=K.selectedTextColorFn}var oe=xe.texttemplate,he=Te._fullLayout;de.each(function(ye){var Me=M.select(this),Re=oe?k.extractOption(ye,xe,"txt","texttemplate"):k.extractOption(ye,xe,"tx","text");if(Re||0===Re){if(oe){var Pe=xe._module.formatLabels,De=Pe?Pe(ye,xe,he):{},fe={};f(fe,xe,ye.i),Re=k.texttemplateString(Re,De,he._d3locale,fe,ye,xe._meta||{})}var be=ye.tp||xe.textposition,Ie=P(ye,xe),He=we?we(ye):ye.tc||xe.textfont.color;Me.call(b.font,ye.tf||xe.textfont.family,Ie,He).text(Re).call(r.convertToTspans,Te).call(C,be,Ie,ye.mrc)}else Me.remove()})}},b.selectedTextStyle=function(de,xe){if(de.size()&&xe.selectedpoints){var Te=b.makeSelectedTextStyleFns(xe);de.each(function(we){var K=M.select(this),oe=Te.selectedTextColorFn(we),he=we.tp||xe.textposition,ye=P(we,xe);s.fill(K,oe);var Me=p.traceIs(xe,"bar-like");C(K,he,ye,we.mrc2||we.mrc,Me)})}},b.smoothopen=function(de,xe){if(de.length<3)return"M"+de.join("L");var Te,we="M"+de[0],K=[];for(Te=1;Te<de.length-1;Te++)K.push(V(de[Te-1],de[Te],de[Te+1],xe));for(we+="Q"+K[0][0]+" "+de[1],Te=2;Te<de.length-1;Te++)we+="C"+K[Te-2][1]+" "+K[Te-1][0]+" "+de[Te];return we+"Q"+K[de.length-3][1]+" "+de[de.length-1]},b.smoothclosed=function(de,xe){if(de.length<3)return"M"+de.join("L")+"Z";var Te,we="M"+de[0],K=de.length-1,oe=[V(de[K],de[0],de[1],xe)];for(Te=1;Te<K;Te++)oe.push(V(de[Te-1],de[Te],de[Te+1],xe));for(oe.push(V(de[K-1],de[K],de[0],xe)),Te=1;Te<=K;Te++)we+="C"+oe[Te-1][1]+" "+oe[Te][0]+" "+de[Te];return we+"C"+oe[K][1]+" "+oe[0][0]+" "+de[0]+"Z"};var D={hv:function(de,xe,Te){return"H"+j(xe[0])+"V"+z(xe,1,Te)},vh:function(de,xe,Te){return"V"+R(xe[1])+"H"+z(xe,0,Te)},hvh:function(de,xe,Te){return"H"+j((de[0]+xe[0])/2)+"V"+R(xe[1])+"H"+z(xe,0,Te)},vhv:function(de,xe,Te){return"V"+R((de[1]+xe[1])/2)+"H"+j(xe[0])+"V"+z(xe,1,Te)}},B=function(de,xe,Te){return"L"+z(xe,0,Te)+","+z(xe,1,Te)};function N(de,xe){var Te=de.backoff,we=de.trace,K=de.d,oe=de.i;if(Te&&we&&we.marker&&we.marker.angle%360==0&&we.line&&"spline"!==we.line.shape){var he=k.isArrayOrTypedArray(Te),ye=de,Me=xe?xe[0]:_||0,Re=xe?xe[1]:E||0,Pe=ye[0],De=ye[1],be=Math.atan2(De-Re,Pe-Me),Ie=he?Te[oe]:Te;if("auto"===Ie){var He=ye.i;"scatter"===we.type&&He--;var Ve=ye.marker,tt=Ve.symbol;k.isArrayOrTypedArray(tt)&&(tt=tt[He]);var nt=Ve.size;k.isArrayOrTypedArray(nt)&&(nt=nt[He]),Ie=Ve?b.symbolBackOffs[b.symbolNumber(tt)]*nt:0,Ie+=b.getMarkerStandoff(K[He],we)||0}var st=Pe-Ie*Math.cos(be),dt=De-Ie*Math.sin(be);(st<=Pe&&st>=Me||st>=Pe&&st<=Me)&&(dt<=De&&dt>=Re||dt>=De&&dt<=Re)&&(de=[st,dt])}return de}b.steps=function(de){var xe=D[de]||B;return function(Te){for(var we="M"+j(Te[0][0])+","+R(Te[0][1]),K=Te.length,oe=1;oe<K;oe++)we+=xe(Te[oe-1],Te[oe],oe===K-1);return we}},b.applyBackoff=N,b.makeTester=function(){var de=k.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(Te){Te.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),xe=k.ensureSingle(de,"path","js-reference-point",function(Te){Te.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});b.tester=de,b.testref=xe},b.savedBBoxes={};var U=0;function J(de){var xe=de.getAttribute("data-unformatted");if(null!==xe)return xe+de.getAttribute("data-math")+de.getAttribute("text-anchor")+de.getAttribute("style")}function Y(de,xe){if(!de)return null;var Te=xe._context,we=Te._exportedPlot?"":Te._baseUrl||"";return we?"url('"+we+"#"+de+"')":"url(#"+de+")"}b.bBox=function(de,xe,Te){var we,K,oe;if(Te||(Te=J(de)),Te){if(we=b.savedBBoxes[Te])return k.extendFlat({},we)}else if(1===de.childNodes.length){var he=de.childNodes[0];if(Te=J(he)){var ye=+he.getAttribute("x")||0,Me=+he.getAttribute("y")||0,Re=he.getAttribute("transform");if(!Re){var Pe=b.bBox(he,!1,Te);return ye&&(Pe.left+=ye,Pe.right+=ye),Me&&(Pe.top+=Me,Pe.bottom+=Me),Pe}if(we=b.savedBBoxes[Te+="~"+ye+"~"+Me+"~"+Re])return k.extendFlat({},we)}}xe?K=de:(oe=b.tester.node(),K=de.cloneNode(!0),oe.appendChild(K)),M.select(K).attr("transform",null).call(r.positionText,0,0);var De=K.getBoundingClientRect(),fe=b.testref.node().getBoundingClientRect();xe||oe.removeChild(K);var ge={height:De.height,width:De.width,left:De.left-fe.left,top:De.top-fe.top,right:De.right-fe.left,bottom:De.bottom-fe.top};return U>=1e4&&(b.savedBBoxes={},U=0),Te&&(b.savedBBoxes[Te]=ge),U++,k.extendFlat({},ge)},b.setClipUrl=function(de,xe,Te){de.attr("clip-path",Y(xe,Te))},b.getTranslate=function(de){var xe=(de[de.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Te,we,K){return[we,K].join(" ")}).split(" ");return{x:+xe[0]||0,y:+xe[1]||0}},b.setTranslate=function(de,xe,Te){var K=de.attr?"attr":"setAttribute",oe=de[de.attr?"attr":"getAttribute"]("transform")||"";return xe=xe||0,Te=Te||0,oe=oe.replace(/(\btranslate\(.*?\);?)/,"").trim(),oe=(oe+=o(xe,Te)).trim(),de[K]("transform",oe),oe},b.getScale=function(de){var xe=(de[de.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Te,we,K){return[we,K].join(" ")}).split(" ");return{x:+xe[0]||1,y:+xe[1]||1}},b.setScale=function(de,xe,Te){var K=de.attr?"attr":"setAttribute",oe=de[de.attr?"attr":"getAttribute"]("transform")||"";return xe=xe||1,Te=Te||1,oe=oe.replace(/(\bscale\(.*?\);?)/,"").trim(),oe=(oe+="scale("+xe+","+Te+")").trim(),de[K]("transform",oe),oe};var q=/\s*sc.*/;b.setPointGroupScale=function(de,xe,Te){if(xe=xe||1,Te=Te||1,de){var we=1===xe&&1===Te?"":"scale("+xe+","+Te+")";de.each(function(){var K=(this.getAttribute("transform")||"").replace(q,"");K=(K+=we).trim(),this.setAttribute("transform",K)})}};var H=/translate\([^)]*\)\s*$/;function X(de,xe){var Te;return de&&(Te=de.mf),void 0===Te&&(Te=xe.marker&&xe.marker.standoff||0),xe._geo||xe._xA?Te:-Te}b.setTextPointsScale=function(de,xe,Te){de&&de.each(function(){var we,K=M.select(this),oe=K.select("text");if(oe.node()){var he=parseFloat(oe.attr("x")||0),ye=parseFloat(oe.attr("y")||0),Me=(K.attr("transform")||"").match(H);we=1===xe&&1===Te?[]:[o(he,ye),"scale("+xe+","+Te+")",o(-he,-ye)],Me&&we.push(Me),K.attr("transform",we.join(""))}})},b.getMarkerStandoff=X;var Q,ne,re,ae,se,pe,ke=Math.atan2,me=Math.cos,le=Math.sin;function ue(de,xe){var Te=xe[0],we=xe[1];return[Te*me(de)-we*le(de),Te*le(de)+we*me(de)]}function Ee(de,xe){var Te,we,K=de.ma;void 0===K&&(K=xe.marker.angle||0);var oe=xe.marker.angleref;if("previous"===oe||"north"===oe){if(xe._geo){var he=xe._geo.project(de.lonlat);Te=he[0],we=he[1]}else{var ye=xe._xA,Me=xe._yA;if(!ye||!Me)return 90;Te=ye.c2p(de.x),we=Me.c2p(de.y)}if(xe._geo){var Re,Pe=de.lonlat[0],De=de.lonlat[1],fe=xe._geo.project([Pe,De+1e-5]),ge=xe._geo.project([Pe+1e-5,De]),be=ke(ge[1]-we,ge[0]-Te),Ie=ke(fe[1]-we,fe[0]-Te);if("north"===oe)Re=K/180*Math.PI;else if("previous"===oe){var He=Pe/180*Math.PI,Ve=De/180*Math.PI,tt=Q/180*Math.PI,nt=ne/180*Math.PI,st=tt-He,dt=me(nt)*le(st),wt=le(nt)*me(Ve)-me(nt)*le(Ve)*me(st);Re=-ke(dt,wt)-Math.PI,Q=Pe,ne=De}var _t=ue(be,[me(Re),0]),pt=ue(Ie,[le(Re),0]);K=ke(_t[1]+pt[1],_t[0]+pt[0])/Math.PI*180,"previous"!==oe||pe===xe.uid&&de.i===se+1||(K=null)}if("previous"===oe&&!xe._geo)if(pe===xe.uid&&de.i===se+1&&T(Te)&&T(we)){var Pt=Te-re,St=we-ae,Ot=xe.line&&xe.line.shape||"",jt=Ot.slice(Ot.length-1);"h"===jt&&(St=0),"v"===jt&&(Pt=0),K+=ke(St,Pt)/Math.PI*180+90}else K=null}return re=Te,ae=we,se=de.i,pe=xe.uid,K}b.getMarkerAngle=Ee},90998:function($,I,t){"use strict";var M,k,l,T,x=t(95616),p=t(39898).round,s="M0,0Z",e=Math.sqrt(2),o=Math.sqrt(3),r=Math.PI,n=Math.cos,a=Math.sin;function i(h){return null===h}function c(h,f,b){if(!(h&&h%360!=0||f))return b;if(l===h&&T===f&&M===b)return k;function v(z,j){var R=n(z),V=a(z),D=j[0],B=j[1]+(f||0);return[D*R-B*V,D*V+B*R]}l=h,T=f,M=b;for(var g=h/180*r,y=0,d=0,m=x(b),w="",u=0;u<m.length;u++){var S=m[u],_=S[0],E=y,L=d;if("M"===_||"L"===_)y=+S[1],d=+S[2];else if("m"===_||"l"===_)y+=+S[1],d+=+S[2];else if("H"===_)y=+S[1];else if("h"===_)y+=+S[1];else if("V"===_)d=+S[1];else if("v"===_)d+=+S[1];else if("A"===_){y=+S[1],d=+S[2];var C=v(g,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+h}"H"!==_&&"V"!==_||(_="L"),"h"!==_&&"v"!==_||(_="l"),"m"!==_&&"l"!==_||(y-=E,d-=L);var P=v(g,[y,d]);"H"!==_&&"V"!==_||(_="L"),"M"!==_&&"L"!==_&&"m"!==_&&"l"!==_||(S[1]=P[0],S[2]=P[1]),S[0]=_,w+=S[0]+S.slice(1).join(",")}return k=w,w}$.exports={circle:{n:0,f:function(h,f,b){if(i(f))return s;var v=p(h,2),g="M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z";return b?c(f,b,g):g}},square:{n:1,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")}},diamond:{n:2,f:function(h,f,b){if(i(f))return s;var v=p(1.3*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"Z")}},cross:{n:3,f:function(h,f,b){if(i(f))return s;var v=p(.4*h,2),g=p(1.2*h,2);return c(f,b,"M"+g+","+v+"H"+v+"V"+g+"H-"+v+"V"+v+"H-"+g+"V-"+v+"H-"+v+"V-"+g+"H"+v+"V-"+v+"H"+g+"Z")}},x:{n:4,f:function(h,f,b){if(i(f))return s;var v=p(.8*h/e,2),g="l"+v+","+v,y="l"+v+",-"+v,d="l-"+v+",-"+v,m="l-"+v+","+v;return c(f,b,"M0,"+v+g+y+d+y+d+m+d+m+g+m+g+"Z")}},"triangle-up":{n:5,f:function(h,f,b){if(i(f))return s;var v=p(2*h/o,2);return c(f,b,"M-"+v+","+p(h/2,2)+"H"+v+"L0,-"+p(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,f,b){if(i(f))return s;var v=p(2*h/o,2);return c(f,b,"M-"+v+",-"+p(h/2,2)+"H"+v+"L0,"+p(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,f,b){if(i(f))return s;var v=p(2*h/o,2);return c(f,b,"M"+p(h/2,2)+",-"+v+"V"+v+"L-"+p(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,f,b){if(i(f))return s;var v=p(2*h/o,2);return c(f,b,"M-"+p(h/2,2)+",-"+v+"V"+v+"L"+p(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,f,b){if(i(f))return s;var v=p(.6*h,2),g=p(1.2*h,2);return c(f,b,"M-"+g+",-"+v+"H"+v+"V"+g+"Z")}},"triangle-se":{n:10,f:function(h,f,b){if(i(f))return s;var v=p(.6*h,2),g=p(1.2*h,2);return c(f,b,"M"+v+",-"+g+"V"+v+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(h,f,b){if(i(f))return s;var v=p(.6*h,2),g=p(1.2*h,2);return c(f,b,"M"+g+","+v+"H-"+v+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(h,f,b){if(i(f))return s;var v=p(.6*h,2),g=p(1.2*h,2);return c(f,b,"M-"+v+","+g+"V-"+v+"H"+g+"Z")}},pentagon:{n:13,f:function(h,f,b){if(i(f))return s;var v=p(.951*h,2),g=p(.588*h,2),y=p(-h,2),d=p(-.309*h,2);return c(f,b,"M"+v+","+d+"L"+g+","+p(.809*h,2)+"H-"+g+"L-"+v+","+d+"L0,"+y+"Z")}},hexagon:{n:14,f:function(h,f,b){if(i(f))return s;var v=p(h,2),g=p(h/2,2),y=p(h*o/2,2);return c(f,b,"M"+y+",-"+g+"V"+g+"L0,"+v+"L-"+y+","+g+"V-"+g+"L0,-"+v+"Z")}},hexagon2:{n:15,f:function(h,f,b){if(i(f))return s;var v=p(h,2),g=p(h/2,2),y=p(h*o/2,2);return c(f,b,"M-"+g+","+y+"H"+g+"L"+v+",0L"+g+",-"+y+"H-"+g+"L-"+v+",0Z")}},octagon:{n:16,f:function(h,f,b){if(i(f))return s;var v=p(.924*h,2),g=p(.383*h,2);return c(f,b,"M-"+g+",-"+v+"H"+g+"L"+v+",-"+g+"V"+g+"L"+g+","+v+"H-"+g+"L-"+v+","+g+"V-"+g+"Z")}},star:{n:17,f:function(h,f,b){if(i(f))return s;var v=1.4*h,g=p(.225*v,2),y=p(.951*v,2),d=p(.363*v,2),m=p(.588*v,2),w=p(-v,2),u=p(-.309*v,2),S=p(.118*v,2),_=p(.809*v,2);return c(f,b,"M"+g+","+u+"H"+y+"L"+d+","+S+"L"+m+","+_+"L0,"+p(.382*v,2)+"L-"+m+","+_+"L-"+d+","+S+"L-"+y+","+u+"H-"+g+"L0,"+w+"Z")}},hexagram:{n:18,f:function(h,f,b){if(i(f))return s;var v=p(.66*h,2),g=p(.38*h,2),y=p(.76*h,2);return c(f,b,"M-"+y+",0l-"+g+",-"+v+"h"+y+"l"+g+",-"+v+"l"+g+","+v+"h"+y+"l-"+g+","+v+"l"+g+","+v+"h-"+y+"l-"+g+","+v+"l-"+g+",-"+v+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(h,f,b){if(i(f))return s;var v=p(h*o*.8,2),g=p(.8*h,2),y=p(1.6*h,2),d=p(4*h,2),m="A "+d+","+d+" 0 0 1 ";return c(f,b,"M-"+v+","+g+m+v+","+g+m+"0,-"+y+m+"-"+v+","+g+"Z")}},"star-triangle-down":{n:20,f:function(h,f,b){if(i(f))return s;var v=p(h*o*.8,2),g=p(.8*h,2),y=p(1.6*h,2),d=p(4*h,2),m="A "+d+","+d+" 0 0 1 ";return c(f,b,"M"+v+",-"+g+m+"-"+v+",-"+g+m+"0,"+y+m+v+",-"+g+"Z")}},"star-square":{n:21,f:function(h,f,b){if(i(f))return s;var v=p(1.1*h,2),g=p(2*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,b,"M-"+v+",-"+v+y+"-"+v+","+v+y+v+","+v+y+v+",-"+v+y+"-"+v+",-"+v+"Z")}},"star-diamond":{n:22,f:function(h,f,b){if(i(f))return s;var v=p(1.4*h,2),g=p(1.9*h,2),y="A "+g+","+g+" 0 0 1 ";return c(f,b,"M-"+v+",0"+y+"0,"+v+y+v+",0"+y+"0,-"+v+y+"-"+v+",0Z")}},"diamond-tall":{n:23,f:function(h,f,b){if(i(f))return s;var v=p(.7*h,2),g=p(1.4*h,2);return c(f,b,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},"diamond-wide":{n:24,f:function(h,f,b){if(i(f))return s;var v=p(1.4*h,2),g=p(.7*h,2);return c(f,b,"M0,"+g+"L"+v+",0L0,-"+g+"L-"+v+",0Z")}},hourglass:{n:25,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M"+v+","+v+"H-"+v+"L"+v+",-"+v+"H-"+v+"Z")},noDot:!0},bowtie:{n:26,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M"+v+","+v+"V-"+v+"L-"+v+","+v+"V-"+v+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,f,b){if(i(f))return s;var v=p(h,2),g=p(h/e,2);return c(f,b,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+v+",0A"+v+","+v+" 0 1,1 0,-"+v+"A"+v+","+v+" 0 0,1 "+v+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+v+","+v+"H-"+v+"V-"+v+"H"+v+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,f,b){if(i(f))return s;var v=p(1.3*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM0,-"+v+"V"+v+"M-"+v+",0H"+v)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,f,b){if(i(f))return s;var v=p(1.3*h,2),g=p(.65*h,2);return c(f,b,"M"+v+",0L0,"+v+"L-"+v+",0L0,-"+v+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,f,b){if(i(f))return s;var v=p(1.4*h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,f,b){if(i(f))return s;var v=p(1.2*h,2),g=p(.85*h,2);return c(f,b,"M0,"+v+"V-"+v+"M"+v+",0H-"+v+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,f,b){if(i(f))return s;var v=p(h/2,2),g=p(h,2);return c(f,b,"M"+v+","+g+"V-"+g+"M"+(v-g)+",-"+g+"V"+g+"M"+g+","+v+"H-"+g+"M-"+g+","+(v-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,f,b){if(i(f))return s;var v=p(1.2*h,2),g=p(1.6*h,2),y=p(.8*h,2);return c(f,b,"M-"+v+","+y+"L0,0M"+v+","+y+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,f,b){if(i(f))return s;var v=p(1.2*h,2),g=p(1.6*h,2),y=p(.8*h,2);return c(f,b,"M-"+v+",-"+y+"L0,0M"+v+",-"+y+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,f,b){if(i(f))return s;var v=p(1.2*h,2),g=p(1.6*h,2),y=p(.8*h,2);return c(f,b,"M"+y+","+v+"L0,0M"+y+",-"+v+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,f,b){if(i(f))return s;var v=p(1.2*h,2),g=p(1.6*h,2),y=p(.8*h,2);return c(f,b,"M-"+y+","+v+"L0,0M-"+y+",-"+v+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,f,b){if(i(f))return s;var v=p(1.4*h,2);return c(f,b,"M"+v+",0H-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,f,b){if(i(f))return s;var v=p(1.4*h,2);return c(f,b,"M0,"+v+"V-"+v)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M"+v+","+v+"L-"+v+",-"+v)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M0,0L-"+v+","+p(2*h,2)+"H"+v+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M0,0L-"+v+",-"+p(2*h,2)+"H"+v+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,f,b){if(i(f))return s;var v=p(2*h,2),g=p(h,2);return c(f,b,"M0,0L"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,f,b){if(i(f))return s;var v=p(2*h,2),g=p(h,2);return c(f,b,"M0,0L-"+v+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+","+p(2*h,2)+"H"+v+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,f,b){if(i(f))return s;var v=p(h,2);return c(f,b,"M-"+v+",0H"+v+"M0,0L-"+v+",-"+p(2*h,2)+"H"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,f,b){if(i(f))return s;var v=p(2*h,2),g=p(h,2);return c(f,b,"M0,-"+g+"V"+g+"M0,0L"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,f,b){if(i(f))return s;var v=p(2*h,2),g=p(h,2);return c(f,b,"M0,-"+g+"V"+g+"M0,0L-"+v+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,f,b){if(i(f))return s;var v=r/2.5,g=2*h*n(v),y=2*h*a(v);return c(f,b,"M0,0L"+-g+","+y+"L"+g+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,f,b){if(i(f))return s;var v=r/4,g=2*h*n(v),y=2*h*a(v);return c(f,b,"M0,0L"+-g+","+y+"A "+2*h+","+2*h+" 0 0 1 "+g+","+y+"Z")},backoff:.4,noDot:!0}}},25673:function($){"use strict";$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function($,I,t){"use strict";var M=t(92770),k=t(73972),l=t(89298),T=t(71828),x=t(45827);function p(s,e,o,r){var n=e["error_"+r]||{},a=[];if(n.visible&&-1!==["linear","log"].indexOf(o.type)){for(var i=x(n),c=0;c<s.length;c++){var h=s[c],f=h.i;if(void 0===f)f=c;else if(null===f)continue;var b=h[r];if(M(o.c2l(b))){var v=i(b,f);if(M(v[0])&&M(v[1])){var g=h[r+"s"]=b-v[0],y=h[r+"h"]=b+v[1];a.push(g,y)}}}var m=e._extremes[o._id],w=l.findExtremes(o,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(w.min),m.max=m.max.concat(w.max)}}$.exports=function(s){for(var e=s.calcdata,o=0;o<e.length;o++){var r=e[o],n=r[0].trace;if(!0===n.visible&&k.traceIs(n,"errorBarsOK")){var a=l.getFromId(s,n.xaxis),i=l.getFromId(s,n.yaxis);p(r,n,a,"x"),p(r,n,i,"y")}}}},45827:function($){"use strict";function I(t,M){return"percent"===t?function(k){return Math.abs(k*M/100)}:"constant"===t?function(){return Math.abs(M)}:"sqrt"===t?function(k){return Math.sqrt(Math.abs(k))}:void 0}$.exports=function(t){var M=t.type,k=t.symmetric;if("data"===M){var l=t.array||[];if(k)return function(s,e){var o=+l[e];return[o,o]};var T=t.arrayminus||[];return function(s,e){var o=+l[e],r=+T[e];return isNaN(o)&&isNaN(r)?[NaN,NaN]:[r||0,o||0]}}var x=I(M,t.value),p=I(M,t.valueminus);return k||void 0===t.valueminus?function(s){var e=x(s);return[e,e]}:function(s){return[p(s),x(s)]}}},97587:function($,I,t){"use strict";var M=t(92770),k=t(73972),l=t(71828),T=t(44467),x=t(25673);$.exports=function(p,s,e,o){var r="error_"+o.axis,n=T.newContainer(s,r),a=p[r]||{};function i(b,v){return l.coerce(a,n,x,b,v)}if(!1!==i("visible",void 0!==a.array||void 0!==a.value||"sqrt"===a.type)){var c=i("type","array"in a?"data":"percent"),h=!0;"sqrt"!==c&&(h=i("symmetric",!(("data"===c?"arrayminus":"valueminus")in a))),"data"===c?(i("array"),i("traceref"),h||(i("arrayminus"),i("tracerefminus"))):"percent"!==c&&"constant"!==c||(i("value"),h||i("valueminus"));var f="copy_"+o.inherit+"style";o.inherit&&(s["error_"+o.inherit]||{}).visible&&i(f,!(a.color||M(a.thickness)||M(a.width))),o.inherit&&n[f]||(i("color",e),i("thickness"),i("width",k.traceIs(s,"gl3d")?0:4))}}},37369:function($,I,t){"use strict";var M=t(71828),k=t(30962).overrideAll,l=t(25673),T={error_x:M.extendFlat({},l),error_y:M.extendFlat({},l)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var x={error_x:M.extendFlat({},l),error_y:M.extendFlat({},l),error_z:M.extendFlat({},l)};delete x.error_x.copy_ystyle,delete x.error_y.copy_ystyle,delete x.error_z.copy_ystyle,delete x.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(x,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:t(97587),calc:t(84532),makeComputeError:t(45827),plot:t(19398),style:t(62662),hoverInfo:function(p,s,e){(s.error_y||{}).visible&&(e.yerr=p.yh-p.y,s.error_y.symmetric||(e.yerrneg=p.y-p.ys)),(s.error_x||{}).visible&&(e.xerr=p.xh-p.x,s.error_x.symmetric||(e.xerrneg=p.x-p.xs))}}},19398:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(91424),T=t(34098);$.exports=function(x,p,s,e){var o=s.xaxis,r=s.yaxis,n=e&&e.duration>0,a=x._context.staticPlot;p.each(function(i){var c,h=i[0].trace,f=h.error_x||{},b=h.error_y||{};h.ids&&(c=function(d){return d.id});var v=T.hasMarkers(h)&&h.marker.maxdisplayed>0;b.visible||f.visible||(i=[]);var g=M.select(this).selectAll("g.errorbar").data(i,c);if(g.exit().remove(),i.length){f.visible||g.selectAll("path.xerror").remove(),b.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var y=g.enter().append("g").classed("errorbar",!0);n&&y.style("opacity",0).transition().duration(e.duration).style("opacity",1),l.setClipUrl(g,s.layerClipId,x),g.each(function(d){var C,P,z,j,m=M.select(this),w=(z=r,j={x:(P=o).c2p((C=d).x),y:z.c2p(C.y)},void 0!==C.yh&&(j.yh=z.c2p(C.yh),j.ys=z.c2p(C.ys),k(j.ys)||(j.noYS=!0,j.ys=z.c2p(C.ys,!0))),void 0!==C.xh&&(j.xh=P.c2p(C.xh),j.xs=P.c2p(C.xs),k(j.xs)||(j.noXS=!0,j.xs=P.c2p(C.xs,!0))),j);if(!v||d.vis){var u,S=m.select("path.yerror");if(b.visible&&k(w.x)&&k(w.yh)&&k(w.ys)){var _=b.width;u="M"+(w.x-_)+","+w.yh+"h"+2*_+"m-"+_+",0V"+w.ys,w.noYS||(u+="m-"+_+",0h"+2*_),S.size()?n&&(S=S.transition().duration(e.duration).ease(e.easing)):S=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",u)}else S.remove();var E=m.select("path.xerror");if(f.visible&&k(w.y)&&k(w.xh)&&k(w.xs)){var L=(f.copy_ystyle?b:f).width;u="M"+w.xh+","+(w.y-L)+"v"+2*L+"m0,-"+L+"H"+w.xs,w.noXS||(u+="m0,-"+L+"v"+2*L),E.size()?n&&(E=E.transition().duration(e.duration).ease(e.easing)):E=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",u)}else E.remove()}})}})}},62662:function($,I,t){"use strict";var M=t(39898),k=t(7901);$.exports=function(l){l.each(function(T){var x=T[0].trace,p=x.error_y||{},s=x.error_x||{},e=M.select(this);e.selectAll("path.yerror").style("stroke-width",p.thickness+"px").call(k.stroke,p.color),s.copy_ystyle&&(s=p),e.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},77914:function($,I,t){"use strict";var M=t(41940),k=t(528).hoverlabel,l=t(1426).extendFlat;$.exports={hoverlabel:{bgcolor:l({},k.bgcolor,{arrayOk:!0}),bordercolor:l({},k.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:l({},k.align,{arrayOk:!0}),namelength:l({},k.namelength,{arrayOk:!0}),editType:"none"}}},30732:function($,I,t){"use strict";var M=t(71828),k=t(73972);function l(T,x,p,s){s=s||M.identity,Array.isArray(T)&&(x[0][p]=s(T))}$.exports=function(T){var x=T.calcdata,p=T._fullLayout;function s(a){return function(i){return M.coerceHoverinfo({hoverinfo:i},{_module:a._module},p)}}for(var e=0;e<x.length;e++){var o=x[e],r=o[0].trace;if(!k.traceIs(r,"pie-like")){var n=k.traceIs(r,"2dMap")?l:M.fillArray;n(r.hoverinfo,o,"hi",s(r)),r.hovertemplate&&n(r.hovertemplate,o,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,o,"hbg"),n(r.hoverlabel.bordercolor,o,"hbc"),n(r.hoverlabel.font.size,o,"hts"),n(r.hoverlabel.font.color,o,"htc"),n(r.hoverlabel.font.family,o,"htf"),n(r.hoverlabel.namelength,o,"hnl"),n(r.hoverlabel.align,o,"hta"))}}}},75914:function($,I,t){"use strict";var M=t(73972),k=t(88335).hover;$.exports=function(l,T,x){var p=M.getComponentMethod("annotations","onClick")(l,l._hoverdata);function s(){l.emit("plotly_click",{points:l._hoverdata,event:T})}void 0!==x&&k(l,T,x,!0),l._hoverdata&&T&&T.target&&(p&&p.then?p.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},26675:function($){"use strict";$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function($,I,t){"use strict";var M=t(71828),k=t(77914),l=t(38048);$.exports=function(T,x,p,s){var e=M.extendFlat({},s.hoverlabel);x.hovertemplate&&(e.namelength=-1),l(T,x,function(o,r){return M.coerce(T,x,k,o,r)},e)}},23469:function($,I,t){"use strict";var M=t(71828);I.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},I.isTraceInSubplots=function(s,e){if("splom"===s.type){for(var o=s.xaxes||[],r=s.yaxes||[],n=0;n<o.length;n++)for(var a=0;a<r.length;a++)if(-1!==e.indexOf(o[n]+r[a]))return!0;return!1}return-1!==e.indexOf(I.getSubplot(s))},I.flat=function(s,e){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=e;return o},I.p2c=function(s,e){for(var o=new Array(s.length),r=0;r<s.length;r++)o[r]=s[r].p2c(e);return o},I.getDistanceFunction=function(s,e,o,r){return"closest"===s?r||I.quadrature(e,o):"x"===s.charAt(0)?e:o},I.getClosest=function(s,e,o){if(!1!==o.index)o.index>=0&&o.index<s.length?o.distance=0:o.index=!1;else for(var r=0;r<s.length;r++){var n=e(s[r]);n<=o.distance&&(o.index=r,o.distance=n)}return o},I.inbox=function(s,e,o){return s*e<0||0===s?o:1/0},I.quadrature=function(s,e){return function(o){var r=s(o),n=e(o);return Math.sqrt(r*r+n*n)}},I.makeEventData=function(s,e,o){var r="index"in s?s.index:s.pointNumber,n={data:e._input,fullData:e,curveNumber:e.index,pointNumber:r};if(e._indexToPoints){var a=e._indexToPoints[r];1===a.length?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=r;return e._module.eventData?n=e._module.eventData(n,s,e,o,r):("xVal"in s?n.x=s.xVal:"x"in s&&(n.x=s.x),"yVal"in s?n.y=s.yVal:"y"in s&&(n.y=s.y),s.xa&&(n.xaxis=s.xa),s.ya&&(n.yaxis=s.ya),void 0!==s.zLabelVal&&(n.z=s.zLabelVal)),I.appendArrayPointValue(n,e,r),n},I.appendArrayPointValue=function(s,e,o){var r=e._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(void 0===s[i]){var c=T(M.nestedProperty(e,a).get(),o);void 0!==c&&(s[i]=c)}}},I.appendArrayMultiPointValues=function(s,e,o){var r=e._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var a=r[n],i=l(a);if(void 0===s[i]){for(var c=M.nestedProperty(e,a).get(),h=new Array(o.length),f=0;f<o.length;f++)h[f]=T(c,o[f]);s[i]=h}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(s){return k[s]||s}function T(s,e){return Array.isArray(e)?Array.isArray(s)&&Array.isArray(s[e[0]])?s[e[0]][e[1]]:void 0:s[e]}var x={x:!0,y:!0},p={"x unified":!0,"y unified":!0};I.isUnifiedHover=function(s){return"string"==typeof s&&!!p[s]},I.isXYhover=function(s){return"string"==typeof s&&!!x[s]}},88335:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(84267),T=t(71828),x=T.strTranslate,p=T.strRotate,s=t(11086),e=t(63893),o=t(39918),r=t(91424),n=t(7901),a=t(28569),i=t(89298),c=t(73972),h=t(23469),f=t(26675),b=t(99017),v=t(43969),g=f.YANGLE,y=Math.PI*g/180,d=1/Math.sin(y),m=Math.cos(y),w=Math.sin(y),u=f.HOVERARROWSIZE,S=f.HOVERTEXTPAD,_={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function L(H){return[H.trace.index,H.index,H.x0,H.y0,H.name,H.attr,H.xa?H.xa._id:"",H.ya?H.ya._id:""].join(",")}I.hover=function(H,X,Q,ne){H=T.getGraphDiv(H);var re=X.target;T.throttle(H._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){!function(ae,se,pe,ke,me){pe||(pe="xy");var le=Array.isArray(pe)?pe:[pe],ue=ae._fullLayout,Ee=ue._plots||[],de=Ee[pe],xe=ue._has("cartesian");if(de){var Te=de.overlays.map(function(Gt){return Gt.id});le=le.concat(Te)}for(var we=le.length,K=new Array(we),oe=new Array(we),he=!1,ye=0;ye<we;ye++){var Me=le[ye];if(Ee[Me])he=!0,K[ye]=Ee[Me].xaxis,oe[ye]=Ee[Me].yaxis;else{if(!ue[Me]||!ue[Me]._subplot)return void T.warn("Unrecognized subplot: "+Me);var Re=ue[Me]._subplot;K[ye]=Re.xaxis,oe[ye]=Re.yaxis}}var Pe=se.hovermode||ue.hovermode;if(Pe&&!he&&(Pe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Pe)||!ae.calcdata||ae.querySelector(".zoombox")||ae._dragging)return a.unhoverRaw(ae,se);var De=ue.hoverdistance;-1===De&&(De=1/0);var fe=ue.spikedistance;-1===fe&&(fe=1/0);var ge,be,Ie,He,Ve,tt,nt,st,dt,wt,_t,pt,Pt,St=[],Ot=[],jt={hLinePoint:null,vLinePoint:null},Dt=!1;if(Array.isArray(se))for(Pe="array",Ie=0;Ie<se.length;Ie++)(Ve=ae.calcdata[se[Ie].curveNumber||0])&&(tt=Ve[0].trace,"skip"!==Ve[0].trace.hoverinfo&&(Ot.push(Ve),"h"===tt.orientation&&(Dt=!0)));else{for(He=0;He<ae.calcdata.length;He++)"skip"!==(tt=(Ve=ae.calcdata[He])[0].trace).hoverinfo&&h.isTraceInSubplots(tt,le)&&(Ot.push(Ve),"h"===tt.orientation&&(Dt=!0));var Ye,Ze;if(me){if(!1===s.triggerHandler(ae,"plotly_beforehover",se))return;var Ne=me.getBoundingClientRect();Ye=se.clientX-Ne.left,Ze=se.clientY-Ne.top,ue._calcInverseTransform(ae);var Je=T.apply3DTransform(ue._invTransform)(Ye,Ze);if(Ze=Je[1],(Ye=Je[0])<0||Ye>K[0]._length||Ze<0||Ze>oe[0]._length)return a.unhoverRaw(ae,se)}else Ye="xpx"in se?se.xpx:K[0]._length/2,Ze="ypx"in se?se.ypx:oe[0]._length/2;if(se.pointerX=Ye+K[0]._offset,se.pointerY=Ze+oe[0]._offset,ge="xval"in se?h.flat(le,se.xval):h.p2c(K,Ye),be="yval"in se?h.flat(le,se.yval):h.p2c(oe,Ze),!k(ge[0])||!k(be[0]))return T.warn("Fx.hover failed",se,ae),a.unhoverRaw(ae,se)}var at=1/0;function Se(Gt,pn){for(He=0;He<Ot.length;He++)if((Ve=Ot[He])&&Ve[0]&&Ve[0].trace&&!0===(tt=Ve[0].trace).visible&&0!==tt._length&&-1===["carpet","contourcarpet"].indexOf(tt._module.name)){if("splom"===tt.type?nt=le[st=0]:(nt=h.getSubplot(tt),st=le.indexOf(nt)),h.isUnifiedHover(dt=Pe)&&(dt=dt.charAt(0)),pt={cd:Ve,trace:tt,xa:K[st],ya:oe[st],maxHoverDistance:De,maxSpikeDistance:fe,index:!1,distance:Math.min(at,De),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:tt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ue[nt]&&(pt.subplot=ue[nt]._subplot),ue._splomScenes&&ue._splomScenes[tt.uid]&&(pt.scene=ue._splomScenes[tt.uid]),Pt=St.length,"array"===dt){var An=se[He];"pointNumber"in An?(pt.index=An.pointNumber,dt="closest"):(dt="","xval"in An&&(wt=An.xval,dt="x"),"yval"in An&&(_t=An.yval,dt=dt?"closest":"y"))}else void 0!==Gt&&void 0!==pn?(wt=Gt,_t=pn):(wt=ge[st],_t=be[st]);if(0!==De)if(tt._module&&tt._module.hoverPoints){var Tn=tt._module.hoverPoints(pt,wt,_t,dt,{finiteRange:!0,hoverLayer:ue._hoverlayer});if(Tn)for(var Rn,qn=0;qn<Tn.length;qn++)k((Rn=Tn[qn]).x0)&&k(Rn.y0)&&St.push(V(Rn,Pe))}else T.log("Unrecognized trace type in hover:",tt);if("closest"===Pe&&St.length>Pt&&(St.splice(0,Pt),at=St[0].distance),xe&&0!==fe&&0===St.length){pt.distance=fe,pt.index=!1;var Un=tt._module.hoverPoints(pt,wt,_t,"closest",{hoverLayer:ue._hoverlayer});if(Un&&(Un=Un.filter(function(Zt){return Zt.spikeDistance<=fe})),Un&&Un.length){var Yn,or=Un.filter(function(Zt){return Zt.xa.showspikes&&"hovered data"!==Zt.xa.spikesnap});if(or.length){var Jt=or[0];k(Jt.x0)&&k(Jt.y0)&&(Yn=Ke(Jt),(!jt.vLinePoint||jt.vLinePoint.spikeDistance>Yn.spikeDistance)&&(jt.vLinePoint=Yn))}var Mn=Un.filter(function(Zt){return Zt.ya.showspikes&&"hovered data"!==Zt.ya.spikesnap});if(Mn.length){var zt=Mn[0];k(zt.x0)&&k(zt.y0)&&(Yn=Ke(zt),(!jt.hLinePoint||jt.hLinePoint.spikeDistance>Yn.spikeDistance)&&(jt.hLinePoint=Yn))}}}}}function ze(Gt,pn,An){for(var Tn,Rn=null,qn=1/0,Un=0;Un<Gt.length;Un++)Tn=Gt[Un].spikeDistance,An&&0===Un&&(Tn=-1/0),Tn<=qn&&Tn<=pn&&(Rn=Gt[Un],qn=Tn);return Rn}function Ke(Gt){return Gt?{xa:Gt.xa,ya:Gt.ya,x:void 0!==Gt.xSpike?Gt.xSpike:(Gt.x0+Gt.x1)/2,y:void 0!==Gt.ySpike?Gt.ySpike:(Gt.y0+Gt.y1)/2,distance:Gt.distance,spikeDistance:Gt.spikeDistance,curveNumber:Gt.trace.index,color:Gt.color,pointNumber:Gt.index}:null}Se();var it={fullLayout:ue,container:ue._hoverlayer,event:se},ct=ae._spikepoints;ae._spikepoints={vLinePoint:jt.vLinePoint,hLinePoint:jt.hLinePoint};var Lt=function(){St.sort(function(Gt,pn){return Gt.distance-pn.distance}),St=function(Gt,pn){for(var An=pn.charAt(0),Tn=[],Rn=[],qn=[],Un=0;Un<Gt.length;Un++){var Yn=Gt[Un];c.traceIs(Yn.trace,"bar-like")||c.traceIs(Yn.trace,"box-violin")?qn.push(Yn):Yn.trace[An+"period"]?Rn.push(Yn):Tn.push(Yn)}return Tn.concat(Rn).concat(qn)}(St,Pe)};Lt();var At=Pe.charAt(0),ht=("x"===At||"y"===At)&&St[0]&&E[St[0].trace.type];if(xe&&0!==fe&&0!==St.length){var Et=ze(St.filter(function(Gt){return Gt.ya.showspikes}),fe,ht);jt.hLinePoint=Ke(Et);var gt=ze(St.filter(function(Gt){return Gt.xa.showspikes}),fe,ht);jt.vLinePoint=Ke(gt)}if(0===St.length){var kt=a.unhoverRaw(ae,se);return!xe||null===jt.hLinePoint&&null===jt.vLinePoint||B(ct)&&D(ae,jt,it),kt}if(xe&&B(ct)&&D(ae,jt,it),h.isXYhover(dt)&&0!==St[0].length&&"splom"!==St[0].trace.type){var It=St[0],Ut=(St=_[It.trace.type]?St.filter(function(Gt){return Gt.trace.index===It.trace.index}):[It]).length;Se(U("x",It,ue),U("y",It,ue));var Nt,qt=[],Xt={},Kt=0,fn=function(Gt){var pn=_[Gt.trace.type]?L(Gt):Gt.trace.index;if(Xt[pn]){var An=Xt[pn]-1,Tn=qt[An];An>0&&Math.abs(Gt.distance)<Math.abs(Tn.distance)&&(qt[An]=Gt)}else Kt++,Xt[pn]=Kt,qt.push(Gt)};for(Nt=0;Nt<Ut;Nt++)fn(St[Nt]);for(Nt=St.length-1;Nt>Ut-1;Nt--)fn(St[Nt]);St=qt,Lt()}var nn=ae._hoverdata,xn=[],jn=J(ae),mn=Y(ae);for(Ie=0;Ie<St.length;Ie++){var en=St[Ie],vn=h.makeEventData(en,en.trace,en.cd);if(!1!==en.hovertemplate){var on=!1;en.cd[en.index]&&en.cd[en.index].ht&&(on=en.cd[en.index].ht),en.hovertemplate=on||en.trace.hovertemplate||!1}if(en.xa&&en.ya){var sn=en.x0+en.xa._offset,En=en.x1+en.xa._offset,kn=en.y0+en.ya._offset,zn=en.y1+en.ya._offset,Fn=Math.min(sn,En),Bn=Math.max(sn,En),er=Math.min(kn,zn),Xn=Math.max(kn,zn);vn.bbox={x0:Fn+mn,x1:Bn+mn,y0:er+jn,y1:Xn+jn}}en.eventData=[vn],xn.push(vn)}ae._hoverdata=xn;var mr="y"===Pe&&(Ot.length>1||St.length>1)||"closest"===Pe&&Dt&&St.length>1,ur=n.combine(ue.plot_bgcolor||n.background,ue.paper_bgcolor),$n=P(St,{gd:ae,hovermode:Pe,rotateLabels:mr,bgColor:ur,container:ue._hoverlayer,outerContainer:ue._paper.node(),commonLabelOpts:ue.hoverlabel,hoverdistance:ue.hoverdistance}),lr=$n.hoverLabels;if(h.isUnifiedHover(Pe)||(function(Gt,pn,An,Tn){var Rn,qn,Un,Yn,or,Jt,Mn,zt=pn?"xa":"ya",Zt=pn?"ya":"xa",rn=0,Ln=1,Sn=Gt.size(),wn=new Array(Sn),ln=0,gn=Tn.minX,un=Tn.maxX,hn=Tn.minY,bn=Tn.maxY,In=function(xr){return xr*An._invScaleX},Hn=function(xr){return xr*An._invScaleY};function Wn(xr){var Tr=xr[0],sr=xr[xr.length-1];if(Un=sr.pos+sr.dp+sr.size-Tr.pmax,(qn=Tr.pmin-Tr.pos-Tr.dp+Tr.size)>.01){for(or=xr.length-1;or>=0;or--)xr[or].dp+=qn;Rn=!1}if(!(Un<.01)){if(qn<-.01){for(or=xr.length-1;or>=0;or--)xr[or].dp-=Un;Rn=!1}if(Rn){var kr=0;for(Yn=0;Yn<xr.length;Yn++)(Jt=xr[Yn]).pos+Jt.dp+Jt.size>Tr.pmax&&kr++;for(Yn=xr.length-1;Yn>=0&&!(kr<=0);Yn--)(Jt=xr[Yn]).pos>Tr.pmax-1&&(Jt.del=!0,kr--);for(Yn=0;Yn<xr.length&&!(kr<=0);Yn++)if((Jt=xr[Yn]).pos<Tr.pmin+1)for(Jt.del=!0,kr--,Un=2*Jt.size,or=xr.length-1;or>=0;or--)xr[or].dp-=Un;for(Yn=xr.length-1;Yn>=0&&!(kr<=0);Yn--)(Jt=xr[Yn]).pos+Jt.dp+Jt.size>Tr.pmax&&(Jt.del=!0,kr--)}}}for(Gt.each(function(xr){var Tr=xr[zt],sr=xr[Zt],kr="x"===Tr._id.charAt(0),Rr=Tr.range;0===ln&&Rr&&Rr[0]>Rr[1]!==kr&&(Ln=-1);var ei=0,fi=kr?An.width:An.height;if("x"===An.hovermode||"y"===An.hovermode){var di,Gi,Li=j(xr,pn),si=xr.anchor,ua="end"===si?-1:1;if("middle"===si)Gi=(di=xr.crossPos+(kr?Hn(Li.y-xr.by/2):In(xr.bx/2+xr.tx2width/2)))+(kr?Hn(xr.by):In(xr.bx));else if(kr)Gi=(di=xr.crossPos+Hn(u+Li.y)-Hn(xr.by/2-u))+Hn(xr.by);else{var Ma=In(ua*u+Li.x),ro=Ma+In(ua*xr.bx);di=xr.crossPos+Math.min(Ma,ro),Gi=xr.crossPos+Math.max(Ma,ro)}kr?void 0!==hn&&void 0!==bn&&Math.min(Gi,bn)-Math.max(di,hn)>1&&("left"===sr.side?(ei=sr._mainLinePosition,fi=An.width):fi=sr._mainLinePosition):void 0!==gn&&void 0!==un&&Math.min(Gi,un)-Math.max(di,gn)>1&&("top"===sr.side?(ei=sr._mainLinePosition,fi=An.height):fi=sr._mainLinePosition)}wn[ln++]=[{datum:xr,traceIndex:xr.trace.index,dp:0,pos:xr.pos,posref:xr.posref,size:xr.by*(kr?d:1)/2,pmin:ei,pmax:fi}]}),wn.sort(function(xr,Tr){return xr[0].posref-Tr[0].posref||Ln*(Tr[0].traceIndex-xr[0].traceIndex)});!Rn&&rn<=Sn;){for(rn++,Rn=!0,Yn=0;Yn<wn.length-1;){var Gn=wn[Yn],nr=wn[Yn+1],tr=Gn[Gn.length-1],ar=nr[0];if((qn=tr.pos+tr.dp+tr.size-ar.pos-ar.dp+ar.size)>.01&&tr.pmin===ar.pmin&&tr.pmax===ar.pmax){for(or=nr.length-1;or>=0;or--)nr[or].dp+=qn;for(Gn.push.apply(Gn,nr),wn.splice(Yn+1,1),Mn=0,or=Gn.length-1;or>=0;or--)Mn+=Gn[or].dp;for(Un=Mn/Gn.length,or=Gn.length-1;or>=0;or--)Gn[or].dp-=Un;Rn=!1}else Yn++}wn.forEach(Wn)}for(Yn=wn.length-1;Yn>=0;Yn--){var ir=wn[Yn];for(or=ir.length-1;or>=0;or--){var cr=ir[or],br=cr.datum;br.offset=cr.dp,br.del=cr.del}}}(lr,mr,ue,$n.commonLabelBoundingBox),R(lr,mr,ue._invScaleX,ue._invScaleY)),me&&me.tagName){var hr=c.getComponentMethod("annotations","hasClickToShow")(ae,xn);o(M.select(me),hr?"pointer":"")}me&&!ke&&function(Gt,pn,An){if(!An||An.length!==Gt._hoverdata.length)return!0;for(var Tn=An.length-1;Tn>=0;Tn--){var Rn=An[Tn],qn=Gt._hoverdata[Tn];if(Rn.curveNumber!==qn.curveNumber||String(Rn.pointNumber)!==String(qn.pointNumber)||String(Rn.pointNumbers)!==String(qn.pointNumbers))return!0}return!1}(ae,0,nn)&&(nn&&ae.emit("plotly_unhover",{event:se,points:nn}),ae.emit("plotly_hover",{event:se,points:ae._hoverdata,xaxes:K,yaxes:oe,xvals:ge,yvals:be}))}(H,X,Q,ne,re)})},I.loneHover=function(H,X){var Q=!0;Array.isArray(H)||(Q=!1,H=[H]);var ne=X.gd,re=J(ne),ae=Y(ne),se=P(H.map(function(me){var le=me._x0||me.x0||me.x||0,ue=me._x1||me.x1||me.x||0,Ee=me._y0||me.y0||me.y||0,de=me._y1||me.y1||me.y||0,xe=me.eventData;if(xe){var Te=Math.min(le,ue),we=Math.max(le,ue),K=Math.min(Ee,de),oe=Math.max(Ee,de),he=me.trace;if(c.traceIs(he,"gl3d")){var ye=ne._fullLayout[he.scene]._scene.container,Me=ye.offsetLeft,Re=ye.offsetTop;Te+=Me,we+=Me,K+=Re,oe+=Re}xe.bbox={x0:Te+ae,x1:we+ae,y0:K+re,y1:oe+re},X.inOut_bbox&&X.inOut_bbox.push(xe.bbox)}else xe=!1;return{color:me.color||n.defaultLine,x0:me.x0||me.x||0,x1:me.x1||me.x||0,y0:me.y0||me.y||0,y1:me.y1||me.y||0,xLabel:me.xLabel,yLabel:me.yLabel,zLabel:me.zLabel,text:me.text,name:me.name,idealAlign:me.idealAlign,borderColor:me.borderColor,fontFamily:me.fontFamily,fontSize:me.fontSize,fontColor:me.fontColor,nameLength:me.nameLength,textAlign:me.textAlign,trace:me.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:me.hovertemplate||!1,hovertemplateLabels:me.hovertemplateLabels||!1,eventData:xe}}),{gd:ne,hovermode:"closest",rotateLabels:!1,bgColor:X.bgColor||n.background,container:M.select(X.container),outerContainer:X.outerContainer||X.container}).hoverLabels,pe=0,ke=0;return se.sort(function(me,le){return me.y0-le.y0}).each(function(me,le){var ue=me.y0-me.by/2;me.offset=ue-5<pe?pe-ue+5:0,pe=ue+me.by+me.offset,le===X.anchorIndex&&(ke=me.offset)}).each(function(me){me.offset-=ke}),R(se,!1,ne._fullLayout._invScaleX,ne._fullLayout._invScaleY),Q?se:se.node()};var C=/<extra>([\s\S]*)<\/extra>/;function P(H,X){var Q=X.gd,ne=Q._fullLayout,re=X.hovermode,ae=X.rotateLabels,se=X.bgColor,pe=X.container,ke=X.outerContainer,me=X.commonLabelOpts||{};if(0===H.length)return[[]];var le=X.fontFamily||f.HOVERFONT,ue=X.fontSize||f.HOVERFONTSIZE,Ee=H[0],de=Ee.xa,xe=Ee.ya,Te=re.charAt(0),we=Te+"Label",K=Ee[we];if(void 0===K&&"multicategory"===de.type)for(var oe=0;oe<H.length&&void 0===(K=H[oe][we]);oe++);var he=q(Q,ke),ye=he.top,Me=he.width,Re=he.height,Pe=void 0!==K&&Ee.distance<=X.hoverdistance&&("x"===re||"y"===re);if(Pe){var De,fe,ge=!0;for(De=0;De<H.length;De++)if(ge&&void 0===H[De].zLabel&&(ge=!1),fe=H[De].hoverinfo||H[De].trace.hoverinfo){var be=Array.isArray(fe)?fe:fe.split("+");if(-1===be.indexOf("all")&&-1===be.indexOf(re)){Pe=!1;break}}ge&&(Pe=!1)}var Ie=pe.selectAll("g.axistext").data(Pe?[0]:[]);Ie.enter().append("g").classed("axistext",!0),Ie.exit().remove();var He={minX:0,maxX:0,minY:0,maxY:0};if(Ie.each(function(){var kt=M.select(this),It=T.ensureSingle(kt,"path","",function(er){er.style({"stroke-width":"1px"})}),Ut=T.ensureSingle(kt,"text","",function(er){er.attr("data-notex",1)}),Nt=me.bgcolor||n.defaultLine,qt=me.bordercolor||n.contrast(Nt),Xt=n.contrast(Nt),Kt={family:me.font.family||le,size:me.font.size||ue,color:me.font.color||Xt};It.style({fill:Nt,stroke:qt}),Ut.text(K).call(r.font,Kt).call(e.positionText,0,0).call(e.convertToTspans,Q),kt.attr("transform","");var fn,nn,xn=q(Q,Ut.node());if("x"===re){var jn="top"===de.side?"-":"";Ut.attr("text-anchor","middle").call(e.positionText,0,"top"===de.side?ye-xn.bottom-u-S:ye-xn.top+u+S),nn=xe._offset+("top"===de.side?0:xe._length);var mn=xn.width/2+S;(fn=de._offset+(Ee.x0+Ee.x1)/2)<mn?(fn=mn,It.attr("d","M-"+(mn-u)+",0L-"+(mn-2*u)+","+jn+u+"H"+mn+"v"+jn+(2*S+xn.height)+"H-"+mn+"V"+jn+u+"Z")):fn>ne.width-mn?(fn=ne.width-mn,It.attr("d","M"+(mn-u)+",0L"+mn+","+jn+u+"v"+jn+(2*S+xn.height)+"H-"+mn+"V"+jn+u+"H"+(mn-2*u)+"Z")):It.attr("d","M0,0L"+u+","+jn+u+"H"+mn+"v"+jn+(2*S+xn.height)+"H-"+mn+"V"+jn+u+"H-"+u+"Z"),He.minX=fn-mn,He.maxX=fn+mn,"top"===de.side?(He.minY=nn-(2*S+xn.height),He.maxY=nn-S):(He.minY=nn+S,He.maxY=nn+(2*S+xn.height))}else{var en,vn,on;"right"===xe.side?(en="start",vn=1,on="",fn=de._offset+de._length):(en="end",vn=-1,on="-",fn=de._offset),nn=xe._offset+(Ee.y0+Ee.y1)/2,Ut.attr("text-anchor",en),It.attr("d","M0,0L"+on+u+","+u+"V"+(S+xn.height/2)+"h"+on+(2*S+xn.width)+"V-"+(S+xn.height/2)+"H"+on+u+"V-"+u+"Z"),He.minY=nn-(S+xn.height/2),He.maxY=nn+(S+xn.height/2),"right"===xe.side?(He.minX=fn+u,He.maxX=fn+u+(2*S+xn.width)):(He.minX=fn-u-(2*S+xn.width),He.maxX=fn-u);var sn,En=xn.height/2,kn=ye-xn.top-En,zn="clip"+ne._uid+"commonlabel"+xe._id;if(fn<xn.width+2*S+u){sn="M-"+(u+S)+"-"+En+"h-"+(xn.width-S)+"V"+En+"h"+(xn.width-S)+"Z";var Fn=xn.width-fn+S;e.positionText(Ut,Fn,kn),"end"===en&&Ut.selectAll("tspan").each(function(){var er=M.select(this),Xn=r.tester.append("text").text(er.text()).call(r.font,Kt),mr=q(Q,Xn.node());Math.round(mr.width)<Math.round(xn.width)&&er.attr("x",Fn-mr.width),Xn.remove()})}else e.positionText(Ut,vn*(S+u),kn),sn=null;var Bn=ne._topclips.selectAll("#"+zn).data(sn?[0]:[]);Bn.enter().append("clipPath").attr("id",zn).append("path"),Bn.exit().remove(),Bn.select("path").attr("d",sn),r.setClipUrl(Ut,sn?zn:null,Q)}kt.attr("transform",x(fn,nn))}),h.isUnifiedHover(re)){pe.selectAll("g.hovertext").remove();var Ve=H.filter(function(kt){return"none"!==kt.hoverinfo});if(0===Ve.length)return;var tt=ne.hoverlabel,nt=tt.font,dt={font:nt};b({showlegend:!0,legend:{title:{text:K,font:nt},font:nt,bgcolor:tt.bgcolor,bordercolor:tt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ne.legend?ne.legend.traceorder:void 0,orientation:"v"}},dt,Q._fullData);var wt=dt.legend;wt.entries=[];for(var _t=0;_t<Ve.length;_t++){var pt=Ve[_t];if("none"!==pt.hoverinfo){var Pt=z(pt,!0,re,ne,K),St=Pt[0],Ot=Pt[1];pt.name=Ot,pt.text=""!==Ot?Ot+" : "+St:St;var jt=pt.cd[pt.index];jt&&(jt.mc&&(pt.mc=jt.mc),jt.mcc&&(pt.mc=jt.mcc),jt.mlc&&(pt.mlc=jt.mlc),jt.mlcc&&(pt.mlc=jt.mlcc),jt.mlw&&(pt.mlw=jt.mlw),jt.mrc&&(pt.mrc=jt.mrc),jt.dir&&(pt.dir=jt.dir)),pt._distinct=!0,wt.entries.push([pt])}}wt.entries.sort(function(kt,It){return kt[0].trace.index-It[0].trace.index}),wt.layer=pe,wt._inHover=!0,wt._groupTitleFont=tt.grouptitlefont,v(Q,wt);var Dt,Ye,Ze,Ne,Je=pe.select("g.legend"),at=q(Q,Je.node()),Se=at.width+2*S,ze=at.height+2*S,Ke=Ve[0],it=(Ke.x0+Ke.x1)/2,ct=(Ke.y0+Ke.y1)/2,mt=!(c.traceIs(Ke.trace,"bar-like")||c.traceIs(Ke.trace,"box-violin"));"y"===Te?mt?(Ye=ct-S,Dt=ct+S):(Ye=Math.min.apply(null,Ve.map(function(kt){return Math.min(kt.y0,kt.y1)})),Dt=Math.max.apply(null,Ve.map(function(kt){return Math.max(kt.y0,kt.y1)}))):Ye=Dt=T.mean(Ve.map(function(kt){return(kt.y0+kt.y1)/2}))-ze/2,"x"===Te?mt?(Ze=it+S,Ne=it-S):(Ze=Math.max.apply(null,Ve.map(function(kt){return Math.max(kt.x0,kt.x1)})),Ne=Math.min.apply(null,Ve.map(function(kt){return Math.min(kt.x0,kt.x1)}))):Ze=Ne=T.mean(Ve.map(function(kt){return(kt.x0+kt.x1)/2}))-Se/2;var Lt,At,ht=de._offset,Et=xe._offset;return Ne+=ht-Se,Ye+=Et-ze,Lt=(Ze+=ht)+Se<Me&&Ze>=0?Ze:Ne+Se<Me&&Ne>=0?Ne:ht+Se<Me?ht:Ze-it<it-Ne+Se?Me-Se:0,At=(Dt+=Et)+ze<Re&&Dt>=0?Dt:Ye+ze<Re&&Ye>=0?Ye:Et+ze<Re?Et:Dt-ct<ct-Ye+ze?Re-ze:0,Je.attr("transform",x((Lt+=S)-1,(At+=S)-1)),Je}var gt=pe.selectAll("g.hovertext").data(H,function(kt){return L(kt)});return gt.enter().append("g").classed("hovertext",!0).each(function(){var kt=M.select(this);kt.append("rect").call(n.fill,n.addOpacity(se,.8)),kt.append("text").classed("name",!0),kt.append("path").style("stroke-width","1px"),kt.append("text").classed("nums",!0).call(r.font,le,ue)}),gt.exit().remove(),gt.each(function(kt){var It=M.select(this).attr("transform",""),Ut=kt.color;Array.isArray(Ut)&&(Ut=Ut[kt.eventData[0].pointNumber]);var Nt=kt.bgcolor||Ut,qt=n.combine(n.opacity(Nt)?Nt:n.defaultLine,se),Xt=n.combine(n.opacity(Ut)?Ut:n.defaultLine,se),Kt=kt.borderColor||n.contrast(qt),fn=z(kt,Pe,re,ne,K,It),nn=fn[0],xn=fn[1],jn=It.select("text.nums").call(r.font,kt.fontFamily||le,kt.fontSize||ue,kt.fontColor||Kt).text(nn).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,Q),mn=It.select("text.name"),en=0,vn=0;if(xn&&xn!==nn){mn.call(r.font,kt.fontFamily||le,kt.fontSize||ue,Xt).text(xn).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,Q);var on=q(Q,mn.node());en=on.width+2*S,vn=on.height+2*S}else mn.remove(),It.select("rect").remove();It.select("path").style({fill:qt,stroke:Kt});var sn=kt.xa._offset+(kt.x0+kt.x1)/2,En=kt.ya._offset+(kt.y0+kt.y1)/2,kn=Math.abs(kt.x1-kt.x0),zn=Math.abs(kt.y1-kt.y0),Fn=q(Q,jn.node()),Bn=Fn.width/ne._invScaleX,er=Fn.height/ne._invScaleY;kt.ty0=(ye-Fn.top)/ne._invScaleY,kt.bx=Bn+2*S,kt.by=Math.max(er+2*S,vn),kt.anchor="start",kt.txwidth=Bn,kt.tx2width=en,kt.offset=0;var Xn,mr,ur=(Bn+u+S+en)*ne._invScaleX;if(ae)kt.pos=sn,Xn=En+zn/2+ur<=Re,mr=En-zn/2-ur>=0,"top"!==kt.idealAlign&&Xn||!mr?Xn?(En+=zn/2,kt.anchor="start"):kt.anchor="middle":(En-=zn/2,kt.anchor="end"),kt.crossPos=En;else{if(kt.pos=En,Xn=sn+kn/2+ur<=Me,mr=sn-kn/2-ur>=0,"left"!==kt.idealAlign&&Xn||!mr)if(Xn)sn+=kn/2,kt.anchor="start";else{kt.anchor="middle";var $n=ur/2,lr=sn+$n-Me,hr=sn-$n;lr>0&&(sn-=lr),hr<0&&(sn+=-hr)}else sn-=kn/2,kt.anchor="end";kt.crossPos=sn}jn.attr("text-anchor",kt.anchor),en&&mn.attr("text-anchor",kt.anchor),It.attr("transform",x(sn,En)+(ae?p(g):""))}),{hoverLabels:gt,commonLabelBoundingBox:He}}function z(H,X,Q,ne,re,ae){var se="",pe="";void 0!==H.nameOverride&&(H.name=H.nameOverride),H.name&&(H.trace._meta&&(H.name=T.templateString(H.name,H.trace._meta)),se=N(H.name,H.nameLength));var ke=Q.charAt(0);void 0!==H.zLabel?(void 0!==H.xLabel&&(pe+="x: "+H.xLabel+"<br>"),void 0!==H.yLabel&&(pe+="y: "+H.yLabel+"<br>"),"choropleth"!==H.trace.type&&"choroplethmapbox"!==H.trace.type&&(pe+=(pe?"z: ":"")+H.zLabel)):X&&H[ke+"Label"]===re?pe=H[("x"===ke?"y":"x")+"Label"]||"":void 0===H.xLabel?void 0!==H.yLabel&&"scattercarpet"!==H.trace.type&&(pe=H.yLabel):pe=void 0===H.yLabel?H.xLabel:"("+H.xLabel+", "+H.yLabel+")",!H.text&&0!==H.text||Array.isArray(H.text)||(pe+=(pe?"<br>":"")+H.text),void 0!==H.extraText&&(pe+=(pe?"<br>":"")+H.extraText),ae&&""===pe&&!H.hovertemplate&&(""===se&&ae.remove(),pe=se);var le=H.hovertemplate||!1;if(le){var ue=H.hovertemplateLabels||H;H[ke+"Label"]!==re&&(ue[ke+"other"]=ue[ke+"Val"],ue[ke+"otherLabel"]=ue[ke+"Label"]),pe=(pe=T.hovertemplateString(le,ue,ne._d3locale,H.eventData[0]||{},H.trace._meta)).replace(C,function(Ee,de){return se=N(de,H.nameLength),""})}return[pe,se]}function j(H,X){var Q=0,ne=H.offset;return X&&(ne*=-w,Q=H.offset*m),{x:Q,y:ne}}function R(H,X,Q,ne){var re=function(se){return se*Q},ae=function(se){return se*ne};H.each(function(se){var pe=M.select(this);if(se.del)return pe.remove();var ke,me,le,ue,Ee=pe.select("text.nums"),de=se.anchor,xe="end"===de?-1:1,Te=(ue=(le=(me={start:1,end:-1,middle:0}[(ke=se).anchor])*(u+S))+me*(ke.txwidth+S),"middle"===ke.anchor&&(le-=ke.tx2width/2,ue+=ke.txwidth/2+S),{alignShift:me,textShiftX:le,text2ShiftX:ue}),we=j(se,X),K=we.x,oe=we.y,he="middle"===de;pe.select("path").attr("d",he?"M-"+re(se.bx/2+se.tx2width/2)+","+ae(oe-se.by/2)+"h"+re(se.bx)+"v"+ae(se.by)+"h-"+re(se.bx)+"Z":"M0,0L"+re(xe*u+K)+","+ae(u+oe)+"v"+ae(se.by/2-u)+"h"+re(xe*se.bx)+"v-"+ae(se.by)+"H"+re(xe*u+K)+"V"+ae(oe-u)+"Z");var ye=K+Te.textShiftX,Me=oe+se.ty0-se.by/2+S,Re=se.textAlign||"auto";"auto"!==Re&&("left"===Re&&"start"!==de?(Ee.attr("text-anchor","start"),ye=he?-se.bx/2-se.tx2width/2+S:-se.bx-S):"right"===Re&&"end"!==de&&(Ee.attr("text-anchor","end"),ye=he?se.bx/2-se.tx2width/2-S:se.bx+S)),Ee.call(e.positionText,re(ye),ae(Me)),se.tx2width&&(pe.select("text.name").call(e.positionText,re(Te.text2ShiftX+Te.alignShift*S+K),ae(oe+se.ty0-se.by/2+S)),pe.select("rect").call(r.setRect,re(Te.text2ShiftX+(Te.alignShift-1)*se.tx2width/2+K),ae(oe-se.by/2-1),re(se.tx2width),ae(se.by+2)))})}function V(H,X){var Q=H.index,ne=H.trace||{},re=H.cd[0],ae=H.cd[Q]||{};function se(Ee){return Ee||k(Ee)&&0===Ee}var pe=Array.isArray(Q)?function(Ee,de){var xe=T.castOption(re,Q,Ee);return se(xe)?xe:T.extractOption({},ne,"",de)}:function(Ee,de){return T.extractOption(ae,ne,Ee,de)};function ke(Ee,de,xe){var Te=pe(de,xe);se(Te)&&(H[Ee]=Te)}if(ke("hoverinfo","hi","hoverinfo"),ke("bgcolor","hbg","hoverlabel.bgcolor"),ke("borderColor","hbc","hoverlabel.bordercolor"),ke("fontFamily","htf","hoverlabel.font.family"),ke("fontSize","hts","hoverlabel.font.size"),ke("fontColor","htc","hoverlabel.font.color"),ke("nameLength","hnl","hoverlabel.namelength"),ke("textAlign","hta","hoverlabel.align"),H.posref="y"===X||"closest"===X&&"h"===ne.orientation?H.xa._offset+(H.x0+H.x1)/2:H.ya._offset+(H.y0+H.y1)/2,H.x0=T.constrain(H.x0,0,H.xa._length),H.x1=T.constrain(H.x1,0,H.xa._length),H.y0=T.constrain(H.y0,0,H.ya._length),H.y1=T.constrain(H.y1,0,H.ya._length),void 0!==H.xLabelVal&&(H.xLabel="xLabel"in H?H.xLabel:i.hoverLabelText(H.xa,H.xLabelVal,ne.xhoverformat),H.xVal=H.xa.c2d(H.xLabelVal)),void 0!==H.yLabelVal&&(H.yLabel="yLabel"in H?H.yLabel:i.hoverLabelText(H.ya,H.yLabelVal,ne.yhoverformat),H.yVal=H.ya.c2d(H.yLabelVal)),void 0!==H.zLabelVal&&void 0===H.zLabel&&(H.zLabel=String(H.zLabelVal)),!(isNaN(H.xerr)||"log"===H.xa.type&&H.xerr<=0)){var me=i.tickText(H.xa,H.xa.c2l(H.xerr),"hover").text;H.xLabel+=void 0!==H.xerrneg?" +"+me+" / -"+i.tickText(H.xa,H.xa.c2l(H.xerrneg),"hover").text:" \xb1 "+me,"x"===X&&(H.distance+=1)}if(!(isNaN(H.yerr)||"log"===H.ya.type&&H.yerr<=0)){var le=i.tickText(H.ya,H.ya.c2l(H.yerr),"hover").text;H.yLabel+=void 0!==H.yerrneg?" +"+le+" / -"+i.tickText(H.ya,H.ya.c2l(H.yerrneg),"hover").text:" \xb1 "+le,"y"===X&&(H.distance+=1)}var ue=H.hoverinfo||H.trace.hoverinfo;return ue&&"all"!==ue&&(-1===(ue=Array.isArray(ue)?ue:ue.split("+")).indexOf("x")&&(H.xLabel=void 0),-1===ue.indexOf("y")&&(H.yLabel=void 0),-1===ue.indexOf("z")&&(H.zLabel=void 0),-1===ue.indexOf("text")&&(H.text=void 0),-1===ue.indexOf("name")&&(H.name=void 0)),H}function D(H,X,Q){var ne,re,ae=Q.container,se=Q.fullLayout,pe=se._size,ke=Q.event,me=!!X.hLinePoint,le=!!X.vLinePoint;if(ae.selectAll(".spikeline").remove(),le||me){var ue=n.combine(se.plot_bgcolor,se.paper_bgcolor);if(me){var Ee,de,xe=X.hLinePoint;ne=xe&&xe.xa,"cursor"===(re=xe&&xe.ya).spikesnap?(Ee=ke.pointerX,de=ke.pointerY):(Ee=ne._offset+xe.x,de=re._offset+xe.y);var Te,we,K=l.readability(xe.color,ue)<1.5?n.contrast(ue):xe.color,oe=re.spikemode,he=re.spikethickness,ye=re.spikecolor||K,Me=i.getPxPosition(H,re);if(-1!==oe.indexOf("toaxis")||-1!==oe.indexOf("across")){if(-1!==oe.indexOf("toaxis")&&(Te=Me,we=Ee),-1!==oe.indexOf("across")){var Re=re._counterDomainMin,Pe=re._counterDomainMax;"free"===re.anchor&&(Re=Math.min(Re,re.position),Pe=Math.max(Pe,re.position)),Te=pe.l+Re*pe.w,we=pe.l+Pe*pe.w}ae.insert("line",":first-child").attr({x1:Te,x2:we,y1:de,y2:de,"stroke-width":he,stroke:ye,"stroke-dasharray":r.dashStyle(re.spikedash,he)}).classed("spikeline",!0).classed("crisp",!0),ae.insert("line",":first-child").attr({x1:Te,x2:we,y1:de,y2:de,"stroke-width":he+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}-1!==oe.indexOf("marker")&&ae.insert("circle",":first-child").attr({cx:Me+("right"!==re.side?he:-he),cy:de,r:he,fill:ye}).classed("spikeline",!0)}if(le){var De,fe,ge=X.vLinePoint;re=ge&&ge.ya,"cursor"===(ne=ge&&ge.xa).spikesnap?(De=ke.pointerX,fe=ke.pointerY):(De=ne._offset+ge.x,fe=re._offset+ge.y);var be,Ie,He=l.readability(ge.color,ue)<1.5?n.contrast(ue):ge.color,Ve=ne.spikemode,tt=ne.spikethickness,nt=ne.spikecolor||He,st=i.getPxPosition(H,ne);if(-1!==Ve.indexOf("toaxis")||-1!==Ve.indexOf("across")){if(-1!==Ve.indexOf("toaxis")&&(be=st,Ie=fe),-1!==Ve.indexOf("across")){var dt=ne._counterDomainMin,wt=ne._counterDomainMax;"free"===ne.anchor&&(dt=Math.min(dt,ne.position),wt=Math.max(wt,ne.position)),be=pe.t+(1-wt)*pe.h,Ie=pe.t+(1-dt)*pe.h}ae.insert("line",":first-child").attr({x1:De,x2:De,y1:be,y2:Ie,"stroke-width":tt,stroke:nt,"stroke-dasharray":r.dashStyle(ne.spikedash,tt)}).classed("spikeline",!0).classed("crisp",!0),ae.insert("line",":first-child").attr({x1:De,x2:De,y1:be,y2:Ie,"stroke-width":tt+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}-1!==Ve.indexOf("marker")&&ae.insert("circle",":first-child").attr({cx:De,cy:st-("top"!==ne.side?tt:-tt),r:tt,fill:nt}).classed("spikeline",!0)}}}function B(H,X){return!X||X.vLinePoint!==H._spikepoints.vLinePoint||X.hLinePoint!==H._spikepoints.hLinePoint}function N(H,X){return e.plainText(H||"",{len:X,allowedTags:["br","sub","sup","b","i","em"]})}function U(H,X,Q){var ne=X[H+"a"],re=X[H+"Val"],ae=X.cd[0];if("category"===ne.type||"multicategory"===ne.type)re=ne._categoriesMap[re];else if("date"===ne.type){var se=X.trace[H+"periodalignment"];if(se){var pe=X.cd[X.index],ke=pe[H+"Start"];void 0===ke&&(ke=pe[H]);var me=pe[H+"End"];void 0===me&&(me=pe[H]);var le=me-ke;"end"===se?re+=le:"middle"===se&&(re+=le/2)}re=ne.d2c(re)}return ae&&ae.t&&ae.t.posLetter===ne._id&&("group"!==Q.boxmode&&"group"!==Q.violinmode||(re+=ae.t.dPos)),re}function J(H){return H.offsetTop+H.clientTop}function Y(H){return H.offsetLeft+H.clientLeft}function q(H,X){var Q=H._fullLayout,ne=X.getBoundingClientRect(),re=ne.left,ae=ne.top,se=re+ne.width,pe=ae+ne.height,ke=T.apply3DTransform(Q._invTransform)(re,ae),me=T.apply3DTransform(Q._invTransform)(se,pe),le=ke[0],ue=ke[1],Ee=me[0],de=me[1];return{x:le,y:ue,width:Ee-le,height:de-ue,top:Math.min(ue,de),left:Math.min(le,Ee),right:Math.max(le,Ee),bottom:Math.max(ue,de)}}},38048:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(23469).isUnifiedHover;$.exports=function(T,x,p,s){s=s||{};var e=x.legend;function o(r){s.font[r]||(s.font[r]=e?x.legend.font[r]:x.font[r])}x&&l(x.hovermode)&&(s.font||(s.font={}),o("size"),o("family"),o("color"),e?(s.bgcolor||(s.bgcolor=k.combine(x.legend.bgcolor,x.paper_bgcolor)),s.bordercolor||(s.bordercolor=x.legend.bordercolor)):s.bgcolor||(s.bgcolor=x.paper_bgcolor)),p("hoverlabel.bgcolor",s.bgcolor),p("hoverlabel.bordercolor",s.bordercolor),p("hoverlabel.namelength",s.namelength),M.coerceFont(p,"hoverlabel.font",s.font),p("hoverlabel.align",s.align)}},98212:function($,I,t){"use strict";var M=t(71828),k=t(528);$.exports=function(l,T){function x(p,s){return void 0!==T[p]?T[p]:M.coerce(l,T,k,p,s)}return x("clickmode"),x("hovermode")}},30211:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(28569),T=t(23469),x=t(528),p=t(88335);$.exports={moduleType:"component",name:"fx",constants:t(26675),schema:{layout:x},attributes:t(77914),layoutAttributes:x,supplyLayoutGlobalDefaults:t(22774),supplyDefaults:t(54268),supplyLayoutDefaults:t(34938),calc:t(30732),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,e,o){return k.castOption(s,e,"hoverlabel."+o)},castHoverinfo:function(s,e,o){return k.castOption(s,o,"hoverinfo",function(r){return k.coerceHoverinfo({hoverinfo:r},{_module:s._module},e)})},hover:p.hover,unhover:l.unhover,loneHover:p.loneHover,loneUnhover:function(s){var e=k.isD3Selection(s)?s:M.select(s);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t(75914)}},528:function($,I,t){"use strict";var M=t(26675),k=t(41940),l=k({editType:"none"});l.family.dflt=M.HOVERFONT,l.size.dflt=M.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function($,I,t){"use strict";var M=t(71828),k=t(528),l=t(98212),T=t(38048);$.exports=function(x,p){function s(n,a){return M.coerce(x,p,k,n,a)}l(x,p)&&(s("hoverdistance"),s("spikedistance")),"select"===s("dragmode")&&s("selectdirection");var e=p._has("mapbox"),o=p._has("geo"),r=p._basePlotModules.length;"zoom"===p.dragmode&&((e||o)&&1===r||e&&o&&2===r)&&(p.dragmode="pan"),T(x,p,s),M.coerceFont(s,"hoverlabel.grouptitlefont",p.hoverlabel.font)}},22774:function($,I,t){"use strict";var M=t(71828),k=t(38048),l=t(528);$.exports=function(T,x){k(T,x,function(p,s){return M.coerce(T,x,l,p,s)})}},83312:function($,I,t){"use strict";var M=t(71828),k=t(30587).counter,l=t(27670).Y,T=t(85555).idRegex,x=t(44467),p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(r,n,a){var i=n[a+"axes"],c=Object.keys((r._splomAxes||{})[a]||{});return Array.isArray(i)?i:c.length?c:void 0}function e(r,n,a,i,c,h){var f=n(r+"gap",a),b=n("domain."+r);n(r+"side",i);for(var v=new Array(c),g=b[0],y=(b[1]-g)/(c-f),d=y*(1-f),m=0;m<c;m++){var w=g+y*m;v[h?c-1-m:m]=[w,w+d]}return v}function o(r,n,a,i,c){var h,f=new Array(a);function b(v,g){-1!==n.indexOf(g)&&void 0===i[g]?(f[v]=g,i[g]=v):f[v]=""}if(Array.isArray(r))for(h=0;h<a;h++)b(h,r[h]);else for(b(0,c),h=1;h<a;h++)b(h,c+(h+1));return f}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(r,n){var a=r.grid||{},i=s(n,a,"x"),c=s(n,a,"y");if(r.grid||i||c){var h,f,b=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),v=Array.isArray(i),g=Array.isArray(c),y=v&&i!==a.xaxes&&g&&c!==a.yaxes;b?(h=a.subplots.length,f=a.subplots[0].length):(g&&(h=c.length),v&&(f=i.length));var d=x.newContainer(n,"grid"),m=C("rows",h),w=C("columns",f);if(m*w>1){b||v||g||"independent"===C("pattern")&&(b=!0),d._hasSubplotGrid=b;var u,S,_="top to bottom"===C("roworder"),L=b?.3:.1;y&&n._splomGridDflt&&(u=n._splomGridDflt.xside,S=n._splomGridDflt.yside),d._domains={x:e("x",C,b?.2:.1,u,w),y:e("y",C,L,S,m,_)}}else delete n.grid}function C(P,z){return M.coerce(a,d,p,P,z)}},contentDefaults:function(r,n){var a=n.grid;if(a&&a._domains){var i,c,h,f,b,v,g,y=r.grid||{},d=n._subplots,m=a._hasSubplotGrid,w=a.rows,u=a.columns,S="independent"===a.pattern,_=a._axisMap={};if(m){var E=y.subplots||[];v=a.subplots=new Array(w);var L=1;for(i=0;i<w;i++){var C=v[i]=new Array(u),P=E[i]||[];for(c=0;c<u;c++)if(S?(b=1===L?"xy":"x"+L+"y"+L,L++):b=P[c],C[c]="",-1!==d.cartesian.indexOf(b)){if(g=b.indexOf("y"),h=b.slice(0,g),f=b.slice(g),void 0!==_[h]&&_[h]!==c||void 0!==_[f]&&_[f]!==i)continue;C[c]=b,_[h]=c,_[f]=i}}}else{var z=s(n,y,"x"),j=s(n,y,"y");a.xaxes=o(z,d.xaxis,u,_,"x"),a.yaxes=o(j,d.yaxis,w,_,"y")}var R=a._anchors={},V="top to bottom"===a.roworder;for(var D in _){var B,N,U,J=D.charAt(0),Y=a[J+"side"];if(Y.length<8)R[D]="free";else if("x"===J){if("t"===Y.charAt(0)===V?(B=0,N=1,U=w):(B=w-1,N=-1,U=-1),m){var q=_[D];for(i=B;i!==U;i+=N)if((b=v[i][q])&&(g=b.indexOf("y"),b.slice(0,g)===D)){R[D]=b.slice(g);break}}else for(i=B;i!==U;i+=N)if(-1!==d.cartesian.indexOf(D+(f=a.yaxes[i]))){R[D]=f;break}}else if("l"===Y.charAt(0)?(B=0,N=1,U=u):(B=u-1,N=-1,U=-1),m){var H=_[D];for(i=B;i!==U;i+=N)if((b=v[H][i])&&(g=b.indexOf("y"),b.slice(g)===D)){R[D]=b.slice(0,g);break}}else for(i=B;i!==U;i+=N)if(-1!==d.cartesian.indexOf((h=a.xaxes[i])+D)){R[D]=h;break}}}}}},69819:function($,I,t){"use strict";var M=t(85555),k=t(44467).templatedArray;t(24695),$.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function($,I,t){"use strict";var M=t(92770),k=t(58163);$.exports=function(l,T,x,p){T=T||{};var s="log"===x&&"linear"===T.type;if(s||"linear"===x&&"log"===T.type)for(var o,r,n=l._fullLayout.images,a=T._id.charAt(0),i=0;i<n.length;i++)if(r="images["+i+"].",(o=n[i])[a+"ref"]===T._id){var c=o[a],h=o["size"+a],f=null,b=null;if(s){f=k(c,T.range);var v=h/Math.pow(10,f)/2;b=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else b=(f=Math.pow(10,c))*(Math.pow(10,h/2)-Math.pow(10,-h/2));M(f)?M(b)||(b=null):(f=null,b=null),p(r+a,f),p(r+"size"+a,b)}}},81603:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(85501),T=t(69819);function x(p,s,e){function o(f,b){return M.coerce(p,s,T,f,b)}var r=o("source");if(!o("visible",!!r))return s;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var n={_fullLayout:e},a=["x","y"],i=0;i<2;i++){var c=a[i],h=k.coerceRef(p,s,n,c,"paper",void 0);"paper"!==h&&k.getFromId(n,h)._imgIndices.push(s._index),k.coercePosition(s,n,o,h,c,0)}return s}$.exports=function(p,s){l(p,s,{name:"images",handleItemDefaults:x})}},80750:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(89298),T=t(41675),x=t(77922);$.exports=function(p){var s,e,o=p._fullLayout,r=[],n={},a=[];for(e=0;e<o.images.length;e++){var i=o.images[e];if(i.visible)if("below"===i.layer&&"paper"!==i.xref&&"paper"!==i.yref){s=T.ref2id(i.xref)+T.ref2id(i.yref);var c=o._plots[s];if(!c){a.push(i);continue}c.mainplot&&(s=c.mainplot.id),n[s]||(n[s]=[]),n[s].push(i)}else"above"===i.layer?r.push(i):a.push(i)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},f={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function b(u){var S=M.select(this);if(this._imgSrc!==u.source)if(S.attr("xmlns",x.svg),u.source&&"data:"===u.source.slice(0,5))S.attr("xlink:href",u.source),this._imgSrc=u.source;else{var _=new Promise(function(E){var L=new Image;function C(){S.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=C,L.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=P.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",C),L.src=u.source,this._imgSrc=u.source}.bind(this));p._promises.push(_)}}function v(u){var S,_,E=M.select(this),L=l.getFromId(p,u.xref),C=l.getFromId(p,u.yref),P="domain"===l.getRefType(u.xref),z="domain"===l.getRefType(u.yref),j=o._size;S=void 0!==L?"string"==typeof u.xref&&P?L._length*u.sizex:Math.abs(L.l2p(u.sizex)-L.l2p(0)):u.sizex*j.w,_=void 0!==C?"string"==typeof u.yref&&z?C._length*u.sizey:Math.abs(C.l2p(u.sizey)-C.l2p(0)):u.sizey*j.h;var R,V,D=S*h[u.xanchor].offset,B=_*f[u.yanchor].offset,N=h[u.xanchor].sizing+f[u.yanchor].sizing;switch(R=void 0!==L?"string"==typeof u.xref&&P?L._length*u.x+L._offset:L.r2p(u.x)+L._offset:u.x*j.w+j.l,R+=D,V=void 0!==C?"string"==typeof u.yref&&z?C._length*(1-u.y)+C._offset:C.r2p(u.y)+C._offset:j.h-u.y*j.h+j.t,V+=B,u.sizing){case"fill":N+=" slice";break;case"stretch":N="none"}E.attr({x:R,y:V,width:S,height:_,preserveAspectRatio:N,opacity:u.opacity});var U=(L&&"domain"!==l.getRefType(u.xref)?L._id:"")+(C&&"domain"!==l.getRefType(u.yref)?C._id:"");k.setClipUrl(E,U?"clip"+o._uid+U:null,p)}var g=o._imageLowerLayer.selectAll("image").data(a),y=o._imageUpperLayer.selectAll("image").data(r);g.enter().append("image"),y.enter().append("image"),g.exit().remove(),y.exit().remove(),g.each(function(u){b.bind(this)(u),v.bind(this)(u)}),y.each(function(u){b.bind(this)(u),v.bind(this)(u)});var d=Object.keys(o._plots);for(e=0;e<d.length;e++){var m=o._plots[s=d[e]];if(m.imagelayer){var w=m.imagelayer.selectAll("image").data(n[s]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(u){b.bind(this)(u),v.bind(this)(u)})}}}},68804:function($,I,t){"use strict";$.exports={moduleType:"component",name:"images",layoutAttributes:t(69819),supplyLayoutDefaults:t(81603),includeBasePlot:t(76325)("images"),draw:t(80750),convertCoords:t(75378)}},33030:function($,I,t){"use strict";var M=t(41940),k=t(22399);$.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function($){"use strict";$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(44467),T=t(9012),x=t(33030),p=t(10820),s=t(10130);$.exports=function(e,o,r){var n,a=e.legend||{},i=l.newContainer(o,"legend");function c(C,P){return k.coerce(a,i,x,C,P)}for(var h=function(C,P){return k.coerce(n._input,n,T,C,P)},f=o.font||{},b=k.coerceFont(c,"grouptitlefont",k.extendFlat({},f,{size:Math.round(1.1*f.size)})),v=0,g=!1,y="normal",d=0;d<r.length;d++)(n=r[d]).visible&&((n.showlegend||n._dfltShowLegend&&!(n._module&&n._module.attributes&&n._module.attributes.showlegend&&!1===n._module.attributes.showlegend.dflt))&&(v++,n.showlegend&&(g=!0,(M.traceIs(n,"pie-like")||!0===n._input.showlegend)&&v++),k.coerceFont(h,"legendgrouptitle.font",b)),(M.traceIs(n,"bar")&&"stack"===o.barmode||-1!==["tonextx","tonexty"].indexOf(n.fill))&&(y=s.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),void 0!==n.legendgroup&&""!==n.legendgroup&&(y=s.isReversed({traceorder:y})?"reversed+grouped":"grouped"));var m=k.coerce(e,o,p,"showlegend",g&&v>1);if(!1===m&&(o.legend=void 0),(!1!==m||a.uirevision)&&(c("uirevision",o.uirevision),!1!==m)){c("bgcolor",o.paper_bgcolor),c("bordercolor"),c("borderwidth");var w,u,S,_=k.coerceFont(c,"font",o.font),E="h"===c("orientation");if(E?(w=0,M.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(u=1.1,S="bottom"):(u=-.1,S="top")):(w=1.02,u=1,S="auto"),c("traceorder",y),s.isGrouped(o.legend)&&c("tracegroupgap"),c("entrywidth"),c("entrywidthmode"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("groupclick"),c("x",w),c("xanchor"),c("y",u),c("yanchor",S),c("valign"),k.noneOrAll(a,i,["x","y"]),c("title.text")){c("title.side",E?"left":"top");var L=k.extendFlat({},_,{size:k.bigFont(_.size)});k.coerceFont(c,"title.font",L)}}}},43969:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(74875),T=t(73972),x=t(11086),p=t(28569),s=t(91424),e=t(7901),o=t(63893),r=t(85167),n=t(14928),a=t(18783),i=a.LINE_SPACING,c=a.FROM_TL,h=a.FROM_BR,f=t(82424),b=t(53630),v=t(10130);function g(E,L,C){var P=E[0],R=P.trace.legendwidth||L.entrywidth;return"fraction"===L.entrywidthmode?L._maxWidth*R:C+(R||P.width)}function y(E,L,C,P,z){var j=C.data()[0][0].trace,R={event:z,node:C.node(),curveNumber:j.index,expandedIndex:j._expandedIndex,data:E.data,layout:E.layout,frames:E._transitionData._frames,config:E._context,fullData:E._fullData,fullLayout:E._fullLayout};j._group&&(R.group=j._group),T.traceIs(j,"pie-like")&&(R.label=C.datum()[0].label),!1!==x.triggerHandler(E,"plotly_legendclick",R)&&(1===P?L._clickTimeout=setTimeout(function(){E._fullLayout&&r(C,E,P)},E._context.doubleClickDelay):2===P&&(L._clickTimeout&&clearTimeout(L._clickTimeout),E._legendMouseDownTime=0,!1!==x.triggerHandler(E,"plotly_legenddoubleclick",R)&&r(C,E,P)))}function d(E,L,C){var P,z,j=E.data()[0][0],R=j.trace,V=T.traceIs(R,"pie-like"),D=!C._inHover&&L._context.edits.legendText&&!V,B=C._maxNameLength;j.groupTitle?(P=j.groupTitle.text,z=j.groupTitle.font):(z=C.font,C.entries?P=j.text:(P=V?j.label:R.name,R._meta&&(P=k.templateString(P,R._meta))));var N=k.ensureSingle(E,"text","legendtext");N.attr("text-anchor","start").call(s.font,z).text(D?m(P,B):P),o.positionText(N,C.itemwidth+2*n.itemGap,0),D?N.call(o.makeEditable,{gd:L,text:P}).call(u,E,L,C).on("edit",function(J){this.text(m(J,B)).call(u,E,L,C);var Y=j.trace._fullInput||{},q={};if(T.hasTransform(Y,"groupby")){var H=T.getTransformIndices(Y,"groupby"),Q=k.keyedContainer(Y,"transforms["+H[H.length-1]+"].styles","target","value.name");Q.set(j.trace._group,J),q=Q.constructUpdate()}else q.name=J;return T.call("_guiRestyle",L,q,R.index)}):u(N,E,L,C)}function m(E,L){var C=Math.max(4,L);if(E&&E.trim().length>=C/2)return E;for(var P=C-(E=E||"").length;P>0;P--)E+=" ";return E}function w(E,L){var C,P=L._context.doubleClickDelay,z=1,j=k.ensureSingle(E,"rect","legendtoggle",function(R){L._context.staticPlot||R.style("cursor","pointer").attr("pointer-events","all"),R.call(e.fill,"rgba(0,0,0,0)")});L._context.staticPlot||(j.on("mousedown",function(){(C=(new Date).getTime())-L._legendMouseDownTime<P?z+=1:(z=1,L._legendMouseDownTime=C)}),j.on("mouseup",function(){if(!L._dragged&&!L._editing){var R=L._fullLayout.legend;(new Date).getTime()-L._legendMouseDownTime>P&&(z=Math.max(z-1,1)),y(L,R,E,z,M.event)}}))}function u(E,L,C,P,z){P._inHover&&E.attr("data-notex",!0),o.convertToTspans(E,C,function(){!function(j,R,V,D){var B=j.data()[0][0];if(V._inHover||!B||B.trace.showlegend){var N=j.select("g[class*=math-group]"),U=N.node();V||(V=R._fullLayout.legend);var J,Y,q=V.borderwidth,H=(1===D?V.title.font:B.groupTitle?B.groupTitle.font:V.font).size*i;if(U){var X=s.bBox(U);J=X.height,Y=X.width,1===D?s.setTranslate(N,q,q+.75*J):s.setTranslate(N,0,.25*J)}else{var Q=j.select(1===D?".legendtitletext":".legendtext"),ne=o.lineCount(Q),re=Q.node();if(J=H*ne,Y=re?s.bBox(re).width:0,1===D)"left"===V.title.side&&(Y+=2*n.itemGap),o.positionText(Q,q+n.titlePad,q+H);else{var ae=2*n.itemGap+V.itemwidth;B.groupTitle&&(ae=n.itemGap,Y-=V.itemwidth),o.positionText(Q,ae,-H*((ne-1)/2-.3))}}1===D?(V._titleWidth=Y,V._titleHeight=J):(B.lineHeight=H,B.height=Math.max(J,16)+3,B.width=Y)}else j.remove()}(L,C,P,z)})}function S(E){return k.isRightAnchor(E)?"right":k.isCenterAnchor(E)?"center":"left"}function _(E){return k.isBottomAnchor(E)?"bottom":k.isMiddleAnchor(E)?"middle":"top"}$.exports=function(E,L){return L||(L=E._fullLayout.legend||{}),function(C,P){var z,j,R=C._fullLayout,V="legend"+R._uid,D=P._inHover;if(D?(z=P.layer,V+="-hover"):z=R._infolayer,z){if(C._legendMouseDownTime||(C._legendMouseDownTime=0),D){if(!P.entries)return;j=f(P.entries,P)}else{if(!C.calcdata)return;j=R.showlegend&&f(C.calcdata,P)}var B=R.hiddenlabels||[];if(!(D||R.showlegend&&j.length))return z.selectAll(".legend").remove(),R._topdefs.select("#"+V).remove(),l.autoMargin(C,"legend");var N=k.ensureSingle(z,"g","legend",function(re){D||re.attr("pointer-events","all")}),U=k.ensureSingleById(R._topdefs,"clipPath",V,function(re){re.append("rect")}),J=k.ensureSingle(N,"rect","bg",function(re){re.attr("shape-rendering","crispEdges")});J.call(e.stroke,P.bordercolor).call(e.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px");var Y=k.ensureSingle(N,"g","scrollbox"),q=P.title;if(P._titleWidth=0,P._titleHeight=0,q.text){var H=k.ensureSingle(Y,"text","legendtitletext");H.attr("text-anchor","start").call(s.font,q.font).text(q.text),u(H,Y,C,P,1)}else Y.selectAll(".legendtitletext").remove();var X=k.ensureSingle(N,"rect","scrollbar",function(re){re.attr(n.scrollBarEnterAttrs).call(e.fill,n.scrollBarColor)}),Q=Y.selectAll("g.groups").data(j);Q.enter().append("g").attr("class","groups"),Q.exit().remove();var ne=Q.selectAll("g.traces").data(k.identity);ne.enter().append("g").attr("class","traces"),ne.exit().remove(),ne.style("opacity",function(re){var ae=re[0].trace;return T.traceIs(ae,"pie-like")?-1!==B.indexOf(re[0].label)?.5:1:"legendonly"===ae.visible?.5:1}).each(function(){M.select(this).call(d,C,P)}).call(b,C,P).each(function(){D||M.select(this).call(w,C)}),k.syncOrAsync([l.previousPromises,function(){return function(re,ae,se,pe){var ke=re._fullLayout;pe||(pe=ke.legend);var me=ke._size,le=v.isVertical(pe),ue=v.isGrouped(pe),Ee="fraction"===pe.entrywidthmode,de=pe.borderwidth,xe=2*de,Te=n.itemGap,we=pe.itemwidth+2*Te,K=2*(de+Te),oe=_(pe),he=pe.y<0||0===pe.y&&"top"===oe,ye=pe.y>1||1===pe.y&&"bottom"===oe,Me=pe.tracegroupgap,Re={};pe._maxHeight=Math.max(he||ye?ke.height/2:me.h,30);var Pe=0;pe._width=0,pe._height=0;var Ze,Ne,Je,at,De=(Ne=0,Je=0,(at=(Ze=pe).title.side)&&(-1!==at.indexOf("left")&&(Ne=Ze._titleWidth),-1!==at.indexOf("top")&&(Je=Ze._titleHeight)),[Ne,Je]);if(le)se.each(function(Ze){var Ne=Ze[0].height;s.setTranslate(this,de+De[0],de+De[1]+pe._height+Ne/2+Te),pe._height+=Ne,pe._width=Math.max(pe._width,Ze[0].width)}),Pe=we+pe._width,pe._width+=Te+we+xe,pe._height+=K,ue&&(ae.each(function(Ze,Ne){s.setTranslate(this,0,Ne*pe.tracegroupgap)}),pe._height+=(pe._lgroupsLength-1)*pe.tracegroupgap);else{var fe=S(pe),Ie=ye||he,He=ke.width/2;pe._maxWidth=Math.max(pe.x<0||0===pe.x&&"right"===fe?Ie&&"left"===fe?me.l+me.w:He:pe.x>1||1===pe.x&&"left"===fe?Ie&&"right"===fe?me.r+me.w:He:me.w,2*we);var Ve=0,tt=0;se.each(function(Ze){var Ne=g(Ze,pe,we);Ve=Math.max(Ve,Ne),tt+=Ne}),Pe=null;var nt=0;if(ue){var st=0,dt=0,wt=0;ae.each(function(){var Ze=0,Ne=0;M.select(this).selectAll("g.traces").each(function(at){var Se=g(at,pe,we),ze=at[0].height;s.setTranslate(this,De[0],De[1]+de+Te+ze/2+Ne),Ne+=ze,Ze=Math.max(Ze,Se),Re[at[0].trace.legendgroup]=Ze});var Je=Ze+Te;dt>0&&Je+de+dt>pe._maxWidth?(nt=Math.max(nt,dt),dt=0,wt+=st+Me,st=Ne):st=Math.max(st,Ne),s.setTranslate(this,dt,wt),dt+=Je}),pe._width=Math.max(nt,dt)+de,pe._height=wt+st+K}else{var _t=se.size(),pt=tt+xe+(_t-1)*Te<pe._maxWidth,Pt=0,St=0,Ot=0,jt=0;se.each(function(Ze){var Ne=Ze[0].height,Je=g(Ze,pe,we),at=pt?Je:Ve;Ee||(at+=Te),at+de+St-Te>=pe._maxWidth&&(nt=Math.max(nt,jt),St=0,Ot+=Pt,pe._height+=Pt,Pt=0),s.setTranslate(this,De[0]+de+St,De[1]+de+Ot+Ne/2+Te),jt=St+Je+Te,St+=at,Pt=Math.max(Pt,Ne)}),pt?(pe._width=St+xe,pe._height=Pt+K):(pe._width=Math.max(nt,jt)+xe,pe._height+=Pt+K)}}pe._width=Math.ceil(Math.max(pe._width+De[0],pe._titleWidth+2*(de+n.titlePad))),pe._height=Math.ceil(Math.max(pe._height+De[1],pe._titleHeight+2*(de+n.itemGap))),pe._effHeight=Math.min(pe._height,pe._maxHeight);var Dt=re._context.edits,Ye=Dt.legendText||Dt.legendPosition;se.each(function(Ze){var Ne=M.select(this).select(".legendtoggle"),Je=Ze[0].height,at=Ze[0].trace.legendgroup,Se=g(Ze,pe,we);ue&&""!==at&&(Se=Re[at]);var ze=Ye?we:Pe||Se;le||Ee||(ze+=Te/2),s.setRect(Ne,0,-Je/2,ze,Je)})}(C,Q,ne,P)},function(){var re,ae,se,pe,be,Ie,He,Ve,ke=R._size,me=P.borderwidth;if(!D){if(He=S(Ie=(be=C)._fullLayout.legend),Ve=_(Ie),l.autoMargin(be,"legend",{x:Ie.x,y:Ie.y,l:Ie._width*c[He],r:Ie._width*h[He],b:Ie._effHeight*h[Ve],t:Ie._effHeight*c[Ve]}))return;var ue=ke.l+ke.w*P.x-c[S(P)]*P._width,Ee=ke.t+ke.h*(1-P.y)-c[_(P)]*P._effHeight;if(R.margin.autoexpand){var de=ue,xe=Ee;ue=k.constrain(ue,0,R.width-P._width),Ee=k.constrain(Ee,0,R.height-P._effHeight),ue!==de&&k.log("Constrain legend.x to make legend fit inside graph"),Ee!==xe&&k.log("Constrain legend.y to make legend fit inside graph")}s.setTranslate(N,ue,Ee)}if(X.on(".drag",null),N.on("wheel",null),D||P._height<=P._maxHeight||C._context.staticPlot){var Te=P._effHeight;D&&(Te=P._height),J.attr({width:P._width-me,height:Te-me,x:me/2,y:me/2}),s.setTranslate(Y,0,0),U.select("rect").attr({width:P._width-2*me,height:Te-2*me,x:me,y:me}),s.setClipUrl(Y,V,C),s.setRect(X,0,0,0,0),delete P._scrollY}else{var we,oe,he=Math.max(n.scrollBarMinHeight,P._effHeight*P._effHeight/P._height),ye=P._effHeight-he-2*n.scrollBarMargin,Me=P._height-P._effHeight,Re=ye/Me,Pe=Math.min(P._scrollY||0,Me);J.attr({width:P._width-2*me+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-me,x:me/2,y:me/2}),U.select("rect").attr({width:P._width-2*me+n.scrollBarWidth+n.scrollBarMargin,height:P._effHeight-2*me,x:me,y:me+Pe}),s.setClipUrl(Y,V,C),ge(Pe,he,Re),N.on("wheel",function(){ge(Pe=k.constrain(P._scrollY+M.event.deltaY/ye*Me,0,Me),he,Re),0!==Pe&&Pe!==Me&&M.event.preventDefault()});var De=M.behavior.drag().on("dragstart",function(){var be=M.event.sourceEvent;we="touchstart"===be.type?be.changedTouches[0].clientY:be.clientY,oe=Pe}).on("drag",function(){var be=M.event.sourceEvent;2===be.buttons||be.ctrlKey||ge(Pe=function(Ie,He,Ve){return k.constrain((Ve-He)/Re+Ie,0,Me)}(oe,we,"touchmove"===be.type?be.changedTouches[0].clientY:be.clientY),he,Re)});X.call(De);var fe=M.behavior.drag().on("dragstart",function(){var be=M.event.sourceEvent;"touchstart"===be.type&&(we=be.changedTouches[0].clientY,oe=Pe)}).on("drag",function(){var be=M.event.sourceEvent;"touchmove"===be.type&&ge(Pe=function(Ie,He,Ve){return k.constrain((He-Ve)/Re+Ie,0,Me)}(oe,we,be.changedTouches[0].clientY),he,Re)});Y.call(fe)}function ge(be,Ie,He){P._scrollY=C._fullLayout.legend._scrollY=be,s.setTranslate(Y,0,-be),s.setRect(X,P._width,n.scrollBarMargin+be*He,n.scrollBarWidth,Ie),U.select("rect").attr("y",me+be)}C._context.edits.legendPosition&&(N.classed("cursor-move",!0),p.init({element:N.node(),gd:C,prepFn:function(){var be=s.getTranslate(N);se=be.x,pe=be.y},moveFn:function(be,Ie){var He=se+be,Ve=pe+Ie;s.setTranslate(N,He,Ve),re=p.align(He,0,ke.l,ke.l+ke.w,P.xanchor),ae=p.align(Ve,0,ke.t+ke.h,ke.t,P.yanchor)},doneFn:function(){void 0!==re&&void 0!==ae&&T.call("_guiRelayout",C,{"legend.x":re,"legend.y":ae})},clickFn:function(be,Ie){var He=z.selectAll("g.traces").filter(function(){var Ve=this.getBoundingClientRect();return Ie.clientX>=Ve.left&&Ie.clientX<=Ve.right&&Ie.clientY>=Ve.top&&Ie.clientY<=Ve.bottom});He.size()>0&&y(C,N,He,be,Ie)}}))}],C)}}(E,L)}},82424:function($,I,t){"use strict";var M=t(73972),k=t(10130);$.exports=function(l,T){var x,p,s=T._inHover,e=k.isGrouped(T),o=k.isReversed(T),r={},n=[],a=!1,i={},c=0,h=0;function f(j,R){if(""!==j&&k.isGrouped(T))-1===n.indexOf(j)?(n.push(j),a=!0,r[j]=[R]):r[j].push(R);else{var V="~~i"+c;n.push(V),r[V]=[R],c++}}for(x=0;x<l.length;x++){var b=l[x],v=b[0],g=v.trace,y=g.legendgroup;if(s||g.visible&&g.showlegend)if(M.traceIs(g,"pie-like"))for(i[y]||(i[y]={}),p=0;p<b.length;p++){var d=b[p].label;i[y][d]||(f(y,{label:d,color:b[p].color,i:b[p].i,trace:g,pts:b[p].pts}),i[y][d]=!0,h=Math.max(h,(d||"").length))}else f(y,v),h=Math.max(h,(g.name||"").length)}if(!n.length)return[];var m=!a||!e,w=[];for(x=0;x<n.length;x++){var u=r[n[x]];w.push(m?u[0]:u)}for(m&&(w=[w]),x=0;x<w.length;x++){var S=1/0;for(p=0;p<w[x].length;p++){var _=w[x][p].trace.legendrank;S>_&&(S=_)}w[x][0]._groupMinRank=S,w[x][0]._preGroupSort=x}var E=function(j,R){return j.trace.legendrank-R.trace.legendrank||j._preSort-R._preSort};for(w.forEach(function(j,R){j[0]._preGroupSort=R}),w.sort(function(j,R){return j[0]._groupMinRank-R[0]._groupMinRank||j[0]._preGroupSort-R[0]._preGroupSort}),x=0;x<w.length;x++){w[x].forEach(function(j,R){j._preSort=R}),w[x].sort(E);var L=w[x][0].trace,C=null;for(p=0;p<w[x].length;p++){var P=w[x][p].trace.legendgrouptitle;if(P&&P.text){C=P,s&&(P.font=T._groupTitleFont);break}}if(o&&w[x].reverse(),C){var z=!1;for(p=0;p<w[x].length;p++)if(M.traceIs(w[x][p].trace,"pie-like")){z=!0;break}w[x].unshift({i:-1,groupTitle:C,noClick:z,trace:{showlegend:L.showlegend,legendgroup:L.legendgroup,visible:"toggleitem"===T.groupclick||L.visible}})}for(p=0;p<w[x].length;p++)w[x][p]=[w[x][p]]}return T._lgroupsLength=w.length,T._maxNameLength=h,w}},85167:function($,I,t){"use strict";var M=t(71828),k=t(73972),l=!0;$.exports=function(T,x,p){var s=x._fullLayout;if(!x._dragged&&!x._editing){var e,o=s.legend.itemclick,r=s.legend.itemdoubleclick,n=s.legend.groupclick;if(1===p&&"toggle"===o&&"toggleothers"===r&&l&&x.data&&x._context.showTips&&M.notifier(M._(x,"Double-click on legend to isolate one trace"),"long"),l=!1,1===p?e=o:2===p&&(e=r),e){var a="togglegroup"===n,i=s.hiddenlabels?s.hiddenlabels.slice():[],c=T.data()[0][0];if(!c.groupTitle||!c.noClick){var h,f,b,v,g,y=x._fullData,d=c.trace,m=d.legendgroup,w={},u=[],S=[],_=[];if(k.traceIs(d,"pie-like")){var E=c.label,L=i.indexOf(E);"toggle"===e?-1===L?i.push(E):i.splice(L,1):"toggleothers"===e&&(i=[],x.calcdata[0].forEach(function(H){E!==H.label&&i.push(H.label)}),x._fullLayout.hiddenlabels&&x._fullLayout.hiddenlabels.length===i.length&&-1===L&&(i=[])),k.call("_guiRelayout",x,"hiddenlabels",i)}else{var C,P=m&&m.length,z=[];if(P)for(h=0;h<y.length;h++)(C=y[h]).visible&&C.legendgroup===m&&z.push(h);if("toggle"===e){var j;switch(d.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0}if(P)if(a)for(h=0;h<y.length;h++)!1!==y[h].visible&&y[h].legendgroup===m&&q(y[h],j);else q(d,j);else q(d,j)}else if("toggleothers"===e){var D,N=!0;for(h=0;h<y.length;h++)if(D=!0!==y[h].showlegend,!(y[h]===d||D||P&&y[h].legendgroup===m||!0!==y[h].visible||k.traceIs(y[h],"notLegendIsolatable"))){N=!1;break}for(h=0;h<y.length;h++)if(!1!==y[h].visible&&!k.traceIs(y[h],"notLegendIsolatable"))switch(d.visible){case"legendonly":q(y[h],!0);break;case!0:D=!0!==y[h].showlegend&&!y[h].legendgroup,q(y[h],!!(y[h]===d||P&&y[h].legendgroup===m||D)||!!N||"legendonly")}}for(h=0;h<S.length;h++)if(b=S[h]){var U=b.constructUpdate(),J=Object.keys(U);for(f=0;f<J.length;f++)(w[v=J[f]]=w[v]||[])[_[h]]=U[v]}for(g=Object.keys(w),h=0;h<g.length;h++)for(v=g[h],f=0;f<u.length;f++)w[v].hasOwnProperty(f)||(w[v][f]=void 0);k.call("_guiRestyle",x,w,u)}}}}function Y(H,X,Q){var ne=u.indexOf(H),re=w[X];return re||(re=w[X]=[]),-1===u.indexOf(H)&&(u.push(H),ne=u.length-1),re[ne]=Q,ne}function q(H,X){if(!c.groupTitle||a){var Q=H._fullInput;if(k.hasTransform(Q,"groupby")){var ne=S[Q.index];if(!ne){var re=k.getTransformIndices(Q,"groupby");ne=M.keyedContainer(Q,"transforms["+re[re.length-1]+"].styles","target","value.visible"),S[Q.index]=ne}var se=ne.get(H._group);void 0===se&&(se=!0),!1!==se&&ne.set(H._group,X),_[Q.index]=Y(Q.index,"visible",!1!==Q.visible)}else Y(Q.index,"visible",!1!==Q.visible&&X)}}}},10130:function($,I){"use strict";I.isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},I.isVertical=function(t){return"h"!==t.orientation},I.isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},2199:function($,I,t){"use strict";$.exports={moduleType:"component",name:"legend",layoutAttributes:t(33030),supplyLayoutDefaults:t(99017),draw:t(43969),style:t(53630)}},53630:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(71828),T=l.strTranslate,x=t(91424),p=t(7901),s=t(52075).extractOpts,e=t(34098),o=t(63463),r=t(53581).castOption,n=t(14928);function a(h,f){return(f?"radial":"horizontal")+(h?"":"reversed")}function i(h){var f=h[0].trace,b=f.contours,v=e.hasLines(f),g=e.hasMarkers(f),y=f.visible&&f.fill&&"none"!==f.fill,d=!1,m=!1;if(b){var w=b.coloring;"lines"===w?d=!0:v="none"===w||"heatmap"===w||b.showlines,"constraint"===b.type?y="="!==b._operation:"fill"!==w&&"heatmap"!==w||(m=!0)}return{showMarker:g,showLine:v,showFill:y,showGradientLine:d,showGradientFill:m,anyLine:v||d,anyFill:y||m}}function c(h,f,b){return h&&l.isArrayOrTypedArray(h)?f:h>b?b:h}$.exports=function(h,f,b){b||(b=f._fullLayout.legend);var g="constant"===b.itemsizing,y=b.itemwidth,m=T((y+2*n.itemGap)/2,0),w=function(_,E,L,C){var P;if(_+1)P=_;else{if(!(E&&E.width>0))return 0;P=E.width}return g?C:Math.min(P,L)};function u(_,E,L){var C=_[0].trace,P=C.marker||{},z=P.line||{},j=L?C.visible&&C.type===L:k.traceIs(C,"bar"),R=M.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(j?[_]:[]);R.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),R.exit().remove(),R.each(function(V){var D=M.select(this),B=V[0],N=w(B.mlw,P.line,5,2);D.style("stroke-width",N+"px");var U=B.mcc;if(!b._inHover&&"mc"in B){var J=s(P),Y=J.mid;void 0===Y&&(Y=(J.max+J.min)/2),U=x.tryColorscale(P,"")(Y)}var q=U||B.mc||P.color,H=P.pattern,X=H&&x.getPatternAttr(H.shape,0,"");if(X){var Q=x.getPatternAttr(H.bgcolor,0,null),ne=x.getPatternAttr(H.fgcolor,0,null),re=H.fgopacity,ae=c(H.size,8,10),se=c(H.solidity,.5,1);D.call(x.pattern,"legend",f,"legend-"+C.uid,X,ae,se,U,H.fillmode,Q,ne,re)}else D.call(p.fill,q);N&&p.stroke(D,B.mlc||z.color)})}function S(_,E,L){var C=_[0],P=C.trace,z=L?P.visible&&P.type===L:k.traceIs(P,L),j=M.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(z?[_]:[]);if(j.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),j.exit().remove(),j.size()){var R=(P.marker||{}).line,V=w(r(R.width,C.pts),R,5,2),D=l.minExtend(P,{marker:{line:{width:V}}});D.marker.line.color=R.color;var B=l.minExtend(C,{trace:D});o(j,B,D)}}h.each(function(_){var E=M.select(this),L=l.ensureSingle(E,"g","layers");L.style("opacity",_[0].trace.opacity);var C=b.valign,P=_[0].lineHeight,z=_[0].height;L.attr("transform","middle"!==C&&P&&z?T(0,{top:1,bottom:-1}[C]*(.5*(P-z+3))):null),L.selectAll("g.legendfill").data([_]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([_]).enter().append("g").classed("legendlines",!0);var R=L.selectAll("g.legendsymbols").data([_]);R.enter().append("g").classed("legendsymbols",!0),R.selectAll("g.legendpoints").data([_]).enter().append("g").classed("legendpoints",!0)}).each(function(_){var E,L=_[0].trace,C=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(z,j){var R,V=M.select(this),D=s(L),B=D.colorscale,N=D.reversescale;if(B){if(!E){var U=B.length;R=0===j?B[N?U-1:0][1]:1===j?B[N?0:U-1][1]:B[Math.floor((U-1)/2)][1]}}else{var J=L.vertexcolor||L.facecolor||L.color;R=l.isArrayOrTypedArray(J)?J[j]||J[0]:J}V.attr("d",z[0]),R?V.call(p.fill,R):V.call(function(Y){Y.size()&&x.gradient(Y,f,"legendfill-"+L.uid,a(N,"radial"===E),B,"fill")})})}).each(function(_){var E=_[0].trace,L="waterfall"===E.type;if(_[0]._distinct&&L){var C=_[0].trace[_[0].dir].marker;return _[0].mc=C.color,_[0].mlw=C.line.width,_[0].mlc=C.line.color,u(_,this,"waterfall")}var P=[];E.visible&&L&&(P=_[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(j){var R=M.select(this),V=E[j[0]].marker,D=w(void 0,V.line,5,2);R.attr("d",j[1]).style("stroke-width",D+"px").call(p.fill,V.color),D&&R.call(p.stroke,V.line.color)})}).each(function(_){u(_,this,"funnel")}).each(function(_){u(_,this)}).each(function(_){var E=_[0].trace,L=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[_]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),L.exit().remove(),L.each(function(){var C=M.select(this);if("all"!==E.boxpoints&&"all"!==E.points||0!==p.opacity(E.fillcolor)||0!==p.opacity((E.line||{}).color)){var P=w(void 0,E.line,5,2);C.style("stroke-width",P+"px").call(p.fill,E.fillcolor),P&&p.stroke(C,E.line.color)}else{var z=l.minExtend(E,{marker:{size:g?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(x.pointStyle,z,f)}})}).each(function(_){S(_,this,"funnelarea")}).each(function(_){S(_,this,"pie")}).each(function(_){var E,L,C=i(_),P=C.showFill,z=C.showLine,j=C.showGradientLine,R=C.showGradientFill,V=C.anyFill,D=C.anyLine,B=_[0],N=B.trace,U=s(N),J=U.colorscale,Y=U.reversescale,q=e.hasMarkers(N)||!V?"M5,0":D?"M5,-2":"M5,-3",H=M.select(this),X=H.select(".legendfill").selectAll("path").data(P||R?[_]:[]);if(X.enter().append("path").classed("js-fill",!0),X.exit().remove(),X.attr("d",q+"h"+y+"v6h-"+y+"z").call(function(re){re.size()&&(P?x.fillGroupStyle(re,f):x.gradient(re,f,"legendfill-"+N.uid,a(Y),J,"fill"))}),z||j){var Q=w(void 0,N.line,10,5);L=l.minExtend(N,{line:{width:Q}}),E=[l.minExtend(B,{trace:L})]}var ne=H.select(".legendlines").selectAll("path").data(z||j?[E]:[]);ne.enter().append("path").classed("js-line",!0),ne.exit().remove(),ne.attr("d",q+(j?"l"+y+",0.0001":"h"+y)).call(z?x.lineGroupStyle:function(re){if(re.size()){var ae="legendline-"+N.uid;x.lineGroupStyle(re),x.gradient(re,f,ae,a(Y),J,"stroke")}})}).each(function(_){var E,L,C=i(_),j=C.showLine,R=C.showMarker,V=_[0],D=V.trace,B=!R&&!C.anyLine&&!C.anyFill&&e.hasText(D);function N(ne,re,ae,se){var pe=l.nestedProperty(D,ne).get(),ke=l.isArrayOrTypedArray(pe)&&re?re(pe):pe;if(g&&ke&&void 0!==se&&(ke=se),ae){if(ke<ae[0])return ae[0];if(ke>ae[1])return ae[1]}return ke}function U(ne){return V._distinct&&V.index&&ne[V.index]?ne[V.index]:ne[0]}if(R||B||j){var J={},Y={};if(R){J.mc=N("marker.color",U),J.mx=N("marker.symbol",U),J.mo=N("marker.opacity",l.mean,[.2,1]),J.mlc=N("marker.line.color",U),J.mlw=N("marker.line.width",l.mean,[0,5],2),Y.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var q=N("marker.size",l.mean,[2,16],12);J.ms=q,Y.marker.size=q}j&&(Y.line={width:N("line.width",U,[0,10],5)}),B&&(J.tx="Aa",J.tp=N("textposition",U),J.ts=10,J.tc=N("textfont.color",U),J.tf=N("textfont.family",U)),E=[l.minExtend(V,J)],(L=l.minExtend(D,Y)).selectedpoints=null,L.texttemplate=null}var H=M.select(this).select("g.legendpoints"),X=H.selectAll("path.scatterpts").data(R?E:[]);X.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),X.exit().remove(),X.call(x.pointStyle,L,f),R&&(E[0].mrc=3);var Q=H.selectAll("g.pointtext").data(B?E:[]);Q.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),Q.exit().remove(),Q.selectAll("text").call(x.textPointStyle,L,f)}).each(function(_){var E=_[0].trace,L=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&"candlestick"===E.type?[_,_]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(C,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var z=M.select(this),j=E[P?"increasing":"decreasing"],R=w(void 0,j.line,5,2);z.style("stroke-width",R+"px").call(p.fill,j.fillcolor),R&&p.stroke(z,j.line.color)})}).each(function(_){var E=_[0].trace,L=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&"ohlc"===E.type?[_,_]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(C,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(C,P){var z=M.select(this),j=E[P?"increasing":"decreasing"],R=w(void 0,j.line,5,2);z.style("fill","none").call(x.dashLine,j.line.dash,R),R&&p.stroke(z,j.line.color)})})}},42068:function($,I,t){"use strict";t(93348),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function($,I,t){"use strict";var M=t(73972),k=t(74875),l=t(41675),T=t(24255),x=t(34031).eraseActiveShape,p=t(71828),s=p._,e=$.exports={};function o(v,g){var y,d,m=g.currentTarget,w=m.getAttribute("data-attr"),u=m.getAttribute("data-val")||!0,S=v._fullLayout,_={},E=l.list(v,null,!0),L=S._cartesianSpikesEnabled;if("zoom"===w){var C,P="in"===u?.5:2,z=(1+P)/2,j=(1-P)/2;for(d=0;d<E.length;d++)if(!(y=E[d]).fixedrange)if(C=y._name,"auto"===u)_[C+".autorange"]=!0;else if("reset"===u){if(void 0===y._rangeInitial)_[C+".autorange"]=!0;else{var R=y._rangeInitial.slice();_[C+".range[0]"]=R[0],_[C+".range[1]"]=R[1]}void 0!==y._showSpikeInitial&&(_[C+".showspikes"]=y._showSpikeInitial,"on"!==L||y._showSpikeInitial||(L="off"))}else{var V=[y.r2l(y.range[0]),y.r2l(y.range[1])],D=[z*V[0]+j*V[1],z*V[1]+j*V[0]];_[C+".range[0]"]=y.l2r(D[0]),_[C+".range[1]"]=y.l2r(D[1])}}else"hovermode"!==w||"x"!==u&&"y"!==u||m.setAttribute("data-val",u=S._isHoriz?"y":"x"),_[w]=u;S._cartesianSpikesEnabled=L,M.call("_guiRelayout",v,_)}function r(v,g){for(var y=g.currentTarget,d=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout._subplots.gl3d||[],u={},S=d.split("."),_=0;_<w.length;_++)u[w[_]+"."+S[1]]=m;u.dragmode="pan"===m?m:"zoom",M.call("_guiRelayout",v,u)}function n(v,g){for(var y=g.currentTarget.getAttribute("data-attr"),d="resetLastSave"===y,m="resetDefault"===y,w=v._fullLayout,u=w._subplots.gl3d||[],S={},_=0;_<u.length;_++){var E,L=u[_],C=L+".camera",P=L+".aspectratio",z=L+".aspectmode",j=w[L]._scene;d?(S[C+".up"]=j.viewInitial.up,S[C+".eye"]=j.viewInitial.eye,S[C+".center"]=j.viewInitial.center,E=!0):m&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[P+".x"]=j.viewInitial.aspectratio.x,S[P+".y"]=j.viewInitial.aspectratio.y,S[P+".z"]=j.viewInitial.aspectratio.z,S[z]=j.viewInitial.aspectmode)}M.call("_guiRelayout",v,S)}function a(v,g){var y=g.currentTarget,d=y._previousVal,m=v._fullLayout,w=m._subplots.gl3d||[],u=["xaxis","yaxis","zaxis"],S={},_={};if(d)_=d,y._previousVal=null;else{for(var E=0;E<w.length;E++){var L=w[E],C=m[L],P=L+".hovermode";S[P]=C.hovermode,_[P]=!1;for(var z=0;z<3;z++){var j=u[z],R=L+"."+j+".showspikes";_[R]=!1,S[R]=C[j].showspikes}}y._previousVal=S}return _}function i(v,g){for(var y=g.currentTarget,d=y.getAttribute("data-attr"),m=y.getAttribute("data-val")||!0,w=v._fullLayout,u=w._subplots.geo||[],S=0;S<u.length;S++){var _=u[S];if("zoom"===d){var L=w[_].projection.scale;M.call("_guiRelayout",v,_+".projection.scale","in"===m?2*L:.5*L)}}"reset"===d&&b(v,"geo")}function c(v){var g=v._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function h(v){var g=c(v);M.call("_guiRelayout",v,"hovermode",g)}function f(v,g){for(var y=g.currentTarget.getAttribute("data-val"),d=v._fullLayout,m=d._subplots.mapbox||[],w={},u=0;u<m.length;u++){var S=m[u],_=d[S].zoom;w[S+".zoom"]="in"===y?1.05*_:_/1.05}M.call("_guiRelayout",v,w)}function b(v,g){for(var y=v._fullLayout,d=y._subplots[g]||[],m={},w=0;w<d.length;w++)for(var u=d[w],S=y[u]._subplot.viewInitial,_=Object.keys(S),E=0;E<_.length;E++){var L=_[E];m[u+"."+L]=S[L]}M.call("_guiRelayout",v,m)}e.toImage={name:"toImage",title:function(v){return s(v,"png"===((v._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:T.camera,click:function(v){var g=v._context.toImageButtonOptions,y={format:g.format||"png"};p.notifier(s(v,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==y.format&&p.isIE()&&(p.notifier(s(v,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(d){d in g&&(y[d]=g[d])}),M.call("downloadImage",v,y).then(function(d){p.notifier(s(v,"Snapshot succeeded")+" - "+d,"long")}).catch(function(){p.notifier(s(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}},e.sendDataToCloud={name:"sendDataToCloud",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.disk,click:function(v){k.sendDataToCloud(v)}},e.editInChartStudio={name:"editInChartStudio",title:function(v){return s(v,"Edit in Chart Studio")},icon:T.pencil,click:function(v){k.sendDataToCloud(v)}},e.zoom2d={name:"zoom2d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:o},e.pan2d={name:"pan2d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:o},e.select2d={name:"select2d",_cat:"select",title:function(v){return s(v,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:o},e.lasso2d={name:"lasso2d",_cat:"lasso",title:function(v){return s(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:o},e.drawclosedpath={name:"drawclosedpath",title:function(v){return s(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:o},e.drawopenpath={name:"drawopenpath",title:function(v){return s(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:o},e.drawline={name:"drawline",title:function(v){return s(v,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:o},e.drawrect={name:"drawrect",title:function(v){return s(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:o},e.drawcircle={name:"drawcircle",title:function(v){return s(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:o},e.eraseshape={name:"eraseshape",title:function(v){return s(v,"Erase active shape")},icon:T.eraseshape,click:x},e.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:o},e.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:o},e.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(v){return s(v,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:o},e.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(v){return s(v,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:o},e.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(v){return s(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:o},e.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(v){return s(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:o},e.zoom3d={name:"zoom3d",_cat:"zoom",title:function(v){return s(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:r},e.pan3d={name:"pan3d",_cat:"pan",title:function(v){return s(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:r},e.orbitRotation={name:"orbitRotation",title:function(v){return s(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:r},e.tableRotation={name:"tableRotation",title:function(v){return s(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:r},e.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(v){return s(v,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:n},e.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(v){return s(v,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:n},e.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);M.call("_guiRelayout",v,y)}},e.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},e.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},e.resetGeo={name:"resetGeo",_cat:"reset",title:function(v){return s(v,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:i},e.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},e.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},e.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},e.resetViewSankey={name:"resetSankeyGroup",title:function(v){return s(v,"Reset view")},icon:T.home,click:function(v){for(var g={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<v._fullData.length;y++){var d=v._fullData[y]._viewInitial;g["node.groups"].push(d.node.groups.slice()),g["node.x"].push(d.node.x.slice()),g["node.y"].push(d.node.y.slice())}M.call("restyle",v,g)}},e.toggleHover={name:"toggleHover",title:function(v){return s(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(v,g){var y=a(v,g);y.hovermode=c(v),M.call("_guiRelayout",v,y)}},e.resetViews={name:"resetViews",title:function(v){return s(v,"Reset views")},icon:T.home,click:function(v,g){var y=g.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),o(v,g),y.setAttribute("data-attr","resetLastSave"),n(v,g),b(v,"geo"),b(v,"mapbox")}},e.toggleSpikelines={name:"toggleSpikelines",title:function(v){return s(v,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var g=v._fullLayout;g._cartesianSpikesEnabled="on"===g._cartesianSpikesEnabled?"off":"on",M.call("_guiRelayout",v,function(d){for(var m="on"===d._fullLayout._cartesianSpikesEnabled,w=l.list(d,null,!0),u={},S=0;S<w.length;S++){var _=w[S];u[_._name+".showspikes"]=!!m||_._showSpikeInitial}return u}(v))}},e.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(v){return s(v,"Reset view")},attr:"reset",icon:T.home,click:function(v){b(v,"mapbox")}},e.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(v){return s(v,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:f},e.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(v){return s(v,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:f}},93348:function($,I,t){"use strict";var M=t(26023),k=Object.keys(M),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),x=[];k.forEach(function(p){!function(s){if(-1===T.indexOf(s._cat||s.name)){var e=s.name,o=(s._cat||s.name).toLowerCase();-1===x.indexOf(e)&&x.push(e),-1===x.indexOf(o)&&x.push(o)}}(M[p])}),x.sort(),$.exports={DRAW_MODES:l,backButtons:T,foreButtons:x}},35750:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(44467),T=t(42068);$.exports=function(x,p){var s=x.modebar||{},e=l.newContainer(p,"modebar");function o(n,a){return M.coerce(s,e,T,n,a)}o("orientation"),o("bgcolor",k.addOpacity(p.paper_bgcolor,.5));var r=k.contrast(k.rgb(p.modebar.bgcolor));o("color",k.addOpacity(r,.3)),o("activecolor",k.addOpacity(r,.7)),o("uirevision",p.uirevision),o("add"),o("remove")}},64168:function($,I,t){"use strict";$.exports={moduleType:"component",name:"modebar",layoutAttributes:t(42068),supplyLayoutDefaults:t(35750),manage:t(14192)}},14192:function($,I,t){"use strict";var M=t(41675),k=t(34098),l=t(73972),T=t(23469).isUnifiedHover,x=t(37676),p=t(26023),s=t(93348).DRAW_MODES,e=t(71828).extendDeep;$.exports=function(o){var r=o._fullLayout,n=o._context,a=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,c=n.modeBarButtons;i=Array.isArray(c)&&c.length?function(h){for(var f=e([],h),b=0;b<f.length;b++)for(var v=f[b],g=0;g<v.length;g++){var y=v[g];if("string"==typeof y){if(void 0===p[y])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[b][g]=p[y]}}return f}(c):!n.displayModeBar&&n.watermark?[]:function(h){var f=h._fullLayout,b=h._fullData,v=h._context;function g(pe,ke){if("string"==typeof ke){if(ke.toLowerCase()===pe.toLowerCase())return!0}else if(ke.name===pe||(ke._cat||ke.name)===pe.toLowerCase())return!0;return!1}var y=f.modebar.add;"string"==typeof y&&(y=[y]);var d=f.modebar.remove;"string"==typeof d&&(d=[d]);var m=v.modeBarButtonsToAdd.concat(y.filter(function(pe){for(var ke=0;ke<v.modeBarButtonsToRemove.length;ke++)if(g(pe,v.modeBarButtonsToRemove[ke]))return!1;return!0})),w=v.modeBarButtonsToRemove.concat(d.filter(function(pe){for(var ke=0;ke<v.modeBarButtonsToAdd.length;ke++)if(g(pe,v.modeBarButtonsToAdd[ke]))return!1;return!0})),u=f._has("cartesian"),S=f._has("gl3d"),_=f._has("geo"),E=f._has("pie"),L=f._has("funnelarea"),C=f._has("gl2d"),P=f._has("ternary"),z=f._has("mapbox"),j=f._has("polar"),R=f._has("smith"),V=f._has("sankey"),D=function(pe){for(var ke=M.list({_fullLayout:pe},null,!0),me=0;me<ke.length;me++)if(!ke[me].fixedrange)return!1;return!0}(f),B=T(f.hovermode),N=[];function U(pe){if(pe.length){for(var ke=[],me=0;me<pe.length;me++){for(var le=pe[me],ue=p[le],Ee=ue.name.toLowerCase(),de=(ue._cat||ue.name).toLowerCase(),xe=!1,Te=0;Te<w.length;Te++){var we=w[Te].toLowerCase();if(we===Ee||we===de){xe=!0;break}}xe||ke.push(p[le])}N.push(ke)}}var J=["toImage"];v.showEditInChartStudio?J.push("editInChartStudio"):v.showSendToCloud&&J.push("sendDataToCloud"),U(J);var Y=[],q=[],H=[],X=[];(u||C||E||L||P)+_+S+z+j+R>1?(q=["toggleHover"],H=["resetViews"]):_?(Y=["zoomInGeo","zoomOutGeo"],q=["hoverClosestGeo"],H=["resetGeo"]):S?(q=["hoverClosest3d"],H=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(Y=["zoomInMapbox","zoomOutMapbox"],q=["toggleHover"],H=["resetViewMapbox"]):C?q=["hoverClosestGl2d"]:E?q=["hoverClosestPie"]:V?(q=["hoverClosestCartesian","hoverCompareCartesian"],H=["resetViewSankey"]):q=["toggleHover"],u&&(q=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(pe){for(var ke=0;ke<pe.length;ke++)if(!l.traceIs(pe[ke],"noHover"))return!1;return!0}(b)||B)&&(q=[]),!u&&!C||D||(Y=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==H[0]&&(H=["resetScale2d"])),S?X=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||C)&&!D||P?X=["zoom2d","pan2d"]:z||_?X=["pan2d"]:j&&(X=["zoom2d"]),function(pe){for(var ke=!1,me=0;me<pe.length&&!ke;me++){var le=pe[me];le._module&&le._module.selectPoints&&(l.traceIs(le,"scatter-like")?(k.hasMarkers(le)||k.hasText(le))&&(ke=!0):l.traceIs(le,"box-violin")&&"all"!==le.boxpoints&&"all"!==le.points||(ke=!0))}return ke}(b)&&X.push("select2d","lasso2d");var Q=[],ne=function(pe){-1===Q.indexOf(pe)&&-1!==q.indexOf(pe)&&Q.push(pe)};if(Array.isArray(m)){for(var re=[],ae=0;ae<m.length;ae++){var se=m[ae];"string"==typeof se?(se=se.toLowerCase(),-1!==s.indexOf(se)?(f._has("mapbox")||f._has("cartesian"))&&X.push(se):"togglespikelines"===se?ne("toggleSpikelines"):"togglehover"===se?ne("toggleHover"):"hovercompare"===se?ne("hoverCompareCartesian"):"hoverclosest"===se?(ne("hoverClosestCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie")):"v1hovermode"===se&&(ne("toggleHover"),ne("hoverClosestCartesian"),ne("hoverCompareCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie"))):re.push(se)}m=re}return U(X),U(Y.concat(H)),U(Q),function(pe,ke){if(ke.length)if(Array.isArray(ke[0]))for(var me=0;me<ke.length;me++)pe.push(ke[me]);else pe.push(ke);return pe}(N,m)}(o),a?a.update(o,i):r._modeBar=x(o,i)}else a&&(a.destroy(),delete r._modeBar)}},37676:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(71828),T=t(24255),x=t(11506).version,p=new DOMParser;function s(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var e=s.prototype;e.update=function(o,r){this.graphInfo=o;var n=this.graphInfo._context,a=this.graphInfo._fullLayout,i="modebar-"+a._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===n.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===a.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var c=a.modebar,h="hover"===n.displayModeBar?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(i),l.addRelatedStyleRule(i,h+"#"+i+" .modebar-group","background-color: "+c.bgcolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+c.color),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+c.activecolor),l.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+c.activecolor);var f=!this.hasButtons(r),b=this.hasLogo!==n.displaylogo,v=this.locale!==n.locale;if(this.locale=n.locale,(f||b||v)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var g=this.getLogo();n.watermark&&(g.className=g.className+" watermark"),"v"===a.modebar.orientation?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},e.updateButtons=function(o){var r=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var a=r.createGroup();n.forEach(function(i){var c=i.name;if(!c)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(c))throw new Error("button name '"+c+"' is taken");r.buttonsNames.push(c);var h=r.createButton(i);r.buttonElements.push(h),a.appendChild(h)}),r.element.appendChild(a)})},e.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},e.createButton=function(o){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=o.title;void 0===a?a=o.name:"function"==typeof a&&(a=a(this.graphInfo)),(a||0===a)&&n.setAttribute("data-title",a),void 0!==o.attr&&n.setAttribute("data-attr",o.attr);var i=o.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),"function"!=typeof o.click)throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(h){o.click(r.graphInfo,h),r.updateActiveButton(h.currentTarget)}),n.setAttribute("data-toggle",o.toggle||!1),o.toggle&&M.select(n).classed("active",!0);var c=o.icon;return n.appendChild("function"==typeof c?c():this.createIcon(c||T.question)),n.setAttribute("data-gravity",o.gravity||"n"),n},e.createIcon=function(o){var r,n=k(o.height)?Number(o.height):o.ascent-o.descent,a="http://www.w3.org/2000/svg";if(o.path){(r=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,o.width,n].join(" ")),r.setAttribute("class","icon");var i=document.createElementNS(a,"path");i.setAttribute("d",o.path),o.transform?i.setAttribute("transform",o.transform):void 0!==o.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),r.appendChild(i)}return o.svg&&(r=p.parseFromString(o.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},e.updateActiveButton=function(o){var r=this.graphInfo._fullLayout,n=void 0!==o?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var i=a.getAttribute("data-val")||!0,c=a.getAttribute("data-attr"),h="true"===a.getAttribute("data-toggle"),f=M.select(a);if(h)c===n&&f.classed("active",!f.classed("active"));else{var b=null===c?c:l.nestedProperty(r,c).get();f.classed("active",b===i)}})},e.hasButtons=function(o){var r=this.buttons;if(!r||o.length!==r.length)return!1;for(var n=0;n<o.length;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;a++)if(o[n][a].name!==r[n][a].name)return!1}return!0},e.getLogo=function(){var o=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+x+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(T.newplotlylogo)),o.appendChild(r),o},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},$.exports=function(o,r){var n=o._fullLayout,a=new s({graphInfo:o,container:n._modebardiv.node(),buttons:r});return n._privateplot&&M.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},37113:function($,I,t){"use strict";var M=t(41940),k=t(22399),l=(0,t(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function($){"use strict";$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(44467),T=t(85501),x=t(37113),p=t(89573);function s(e,o,r,n){var a=n.calendar;function i(h,f){return M.coerce(e,o,x.buttons,h,f)}if(i("visible")){var c=i("step");"all"!==c&&(!a||"gregorian"===a||"month"!==c&&"year"!==c?i("stepmode"):o.stepmode="backward",i("count")),i("label")}}$.exports=function(e,o,r,n,a){var i=e.rangeselector||{},c=l.newContainer(o,"rangeselector");function h(v,g){return M.coerce(i,c,x,v,g)}if(h("visible",T(i,c,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var f=function(v,g,y){for(var d=y.filter(function(S){return g[S].anchor===v._id}),m=0,w=0;w<d.length;w++){var u=g[d[w]].domain;u&&(m=Math.max(u[1],m))}return[v.domain[0],m+p.yPad]}(o,r,n);h("x",f[0]),h("y",f[1]),M.noneOrAll(e,o,["x","y"]),h("xanchor"),h("yanchor"),M.coerceFont(h,"font",r.font);var b=h("bgcolor");h("activecolor",k.contrast(b,p.lightAmount,p.darkAmount)),h("bordercolor"),h("borderwidth")}}},21598:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(74875),T=t(7901),x=t(91424),p=t(71828),s=p.strTranslate,e=t(63893),o=t(41675),r=t(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR,c=t(89573),h=t(70565);function f(g){return g._id}function b(g,y,d){var w,u,m=p.ensureSingle(g,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});m.attr({rx:c.rx,ry:c.ry}),m.call(T.stroke,y.bordercolor).call(T.fill,(w=y,u=d,u._isActive||u._isHovered?w.activecolor:w.bgcolor)).style("stroke-width",y.borderwidth+"px")}function v(g,y,d,m){var w,u;p.ensureSingle(g,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(x.font,y.font).text((w=d,u=m._fullLayout._meta,w.label?u?p.templateString(w.label,u):w.label:"all"===w.step?"all":w.count+w.step.charAt(0))).call(function(S){e.convertToTspans(S,m)})}$.exports=function(g){var y=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(d){for(var m=o.list(d,"x",!0),w=[],u=0;u<m.length;u++){var S=m[u];S.rangeselector&&S.rangeselector.visible&&w.push(S)}return w}(g),f);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(d){var m=M.select(this),w=d,u=w.rangeselector,S=m.selectAll("g.button").data(p.filterVisible(u.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(_){var E=M.select(this),L=h(w,_);_._isActive=function(C,P,z){if("all"===P.step)return!0===C.autorange;var j=Object.keys(z);return C.range[0]===z[j[0]]&&C.range[1]===z[j[1]]}(w,_,L),E.call(b,u,_),E.call(v,u,_,g),E.on("click",function(){g._dragged||k.call("_guiRelayout",g,L)}),E.on("mouseover",function(){_._isHovered=!0,E.call(b,u,_)}),E.on("mouseout",function(){_._isHovered=!1,E.call(b,u,_)})}),function(_,E,L,C,P){var z=0,j=0,R=L.borderwidth;E.each(function(){var J=M.select(this).select(".selector-text"),q=Math.max(L.font.size*n*e.lineCount(J),16)+3;j=Math.max(j,q)}),E.each(function(){var J=M.select(this),Y=J.select(".selector-rect"),q=J.select(".selector-text"),H=q.node()&&x.bBox(q.node()).width,X=L.font.size*n,Q=e.lineCount(q),ne=Math.max(H+10,c.minButtonWidth);J.attr("transform",s(R+z,R)),Y.attr({x:0,y:0,width:ne,height:j}),e.positionText(q,ne/2,j/2-(Q-1)*X/2+3),z+=ne+5});var V=_._fullLayout._size,D=V.l+V.w*L.x,B=V.t+V.h*(1-L.y),N="left";p.isRightAnchor(L)&&(D-=z,N="right"),p.isCenterAnchor(L)&&(D-=z/2,N="center");var U="top";p.isBottomAnchor(L)&&(B-=j,U="bottom"),p.isMiddleAnchor(L)&&(B-=j/2,U="middle"),z=Math.ceil(z),j=Math.ceil(j),D=Math.round(D),B=Math.round(B),l.autoMargin(_,C+"-range-selector",{x:L.x,y:L.y,l:z*a[N],r:z*i[N],b:j*i[U],t:j*a[U]}),P.attr("transform",s(D,B))}(g,S,u,w._name,m)})}},70565:function($,I,t){"use strict";var M=t(81041),k=t(71828).titleCase;$.exports=function(l,T){var x=l._name,p={};if("all"===T.step)p[x+".autorange"]=!0;else{var s=function(e,o){var r,n=e.range,a=new Date(e.r2l(n[1])),c=M["utc"+k(o.step)],h=o.count;switch(o.stepmode){case"backward":r=e.l2r(+c.offset(a,-h));break;case"todate":var f=c.offset(a,-h);r=e.l2r(+c.ceil(f))}return[r,n[1]]}(l,T);p[x+".range[0]"]=s[0],p[x+".range[1]"]=s[1]}return p}},97218:function($,I,t){"use strict";$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t(37113)}}},layoutAttributes:t(37113),handleDefaults:t(28674),draw:t(21598)}},75148:function($,I,t){"use strict";var M=t(22399);$.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function($,I,t){"use strict";var M=t(41675).list,k=t(71739).getAutoRange,l=t(73251);$.exports=function(T){for(var x=M(T,"x",!0),p=0;p<x.length;p++){var s=x[p],e=s[l.name];e&&e.visible&&e.autorange&&(e._input.autorange=!0,e._input.range=e.range=k(T,s))}}},73251:function($){"use strict";$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function($,I,t){"use strict";var M=t(71828),k=t(44467),l=t(41675),T=t(75148),x=t(47850);$.exports=function(p,s,e){var o=p[e],r=s[e];if(o.rangeslider||s._requestRangeslider[r._id]){M.isPlainObject(o.rangeslider)||(o.rangeslider={});var n,a,i=o.rangeslider,c=k.newContainer(r,"rangeslider");if(m("visible")){m("bgcolor",s.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!r.isValidRange(i.range)),m("range");var h=s._subplots;if(h)for(var f=h.cartesian.filter(function(u){return u.substr(0,u.indexOf("y"))===l.name2id(e)}).map(function(u){return u.substr(u.indexOf("y"),u.length)}),b=M.simpleMap(f,l.id2name),v=0;v<b.length;v++){var g=b[v];n=i[g]||{},a=k.newContainer(c,g,"yaxis");var y,d=s[g];n.range&&d.isValidRange(n.range)&&(y="fixed"),"match"!==w("rangemode",y)&&w("range",d.range.slice())}c._input=i}}function m(u,S){return M.coerce(i,c,T,u,S)}function w(u,S){return M.coerce(n,a,x,u,S)}}},72413:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(74875),T=t(71828),x=T.strTranslate,p=t(91424),s=t(7901),e=t(92998),o=t(93612),r=t(41675),n=t(28569),a=t(6964),i=t(73251);function c(y,d,m,w){var u=T.ensureSingle(y,"rect",i.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),S=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,_=-w._offsetShift,E=p.crispRound(d,w.borderwidth);u.attr({width:w._width+S,height:w._height+S,transform:x(_,_),"stroke-width":E}).call(s.stroke,w.bordercolor).call(s.fill,w.bgcolor)}function h(y,d,m,w){T.ensureSingleById(d._fullLayout._topdefs,"clipPath",w._clipId,function(S){S.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function f(y,d,m,w){var u,S=d.calcdata,_=y.selectAll("g."+i.rangePlotClassName).data(m._subplotsWith,T.identity);_.enter().append("g").attr("class",function(E){return i.rangePlotClassName+" "+E}).call(p.setClipUrl,w._clipId,d),_.order(),_.exit().remove(),_.each(function(E,L){var C=M.select(this),P=0===L,z=r.getFromId(d,E,"y"),j=z._name,R=w[j],V={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:w.range.slice(),calendar:m.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:d._context};m.rangebreaks&&(V.layout.xaxis.rangebreaks=m.rangebreaks),V.layout[j]={type:z.type,domain:[0,1],range:"match"!==R.rangemode?R.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(V.layout[j].rangebreaks=z.rangebreaks),l.supplyDefaults(V);var D=V._fullLayout.xaxis,B=V._fullLayout[j];D.clearCalc(),D.setScale(),B.clearCalc(),B.setScale();var N={id:E,plotgroup:C,xaxis:D,yaxis:B,isRangePlot:!0};P?u=N:(N.mainplot="xy",N.mainplotinfo=u),o.rangePlot(d,N,function(U,J){for(var Y=[],q=0;q<U.length;q++){var H=U[q],X=H[0].trace;X.xaxis+X.yaxis===J&&Y.push(H)}return Y}(S,E))})}function b(y,d,m,w,u){T.ensureSingle(y,"rect",i.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),T.ensureSingle(y,"rect",i.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(s.fill,i.maskColor),"match"!==u.rangemode&&(T.ensureSingle(y,"rect",i.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(s.fill,i.maskOppAxisColor),T.ensureSingle(y,"rect",i.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",i.maskOppBorder).call(s.fill,i.maskOppAxisColor))}function v(y,d,m,w){d._context.staticPlot||T.ensureSingle(y,"rect",i.slideBoxClassName,function(u){u.attr({y:0,cursor:i.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:i.slideBoxFill})}function g(y,d,m,w){var u=T.ensureSingle(y,"g",i.grabberMinClassName),S=T.ensureSingle(y,"g",i.grabberMaxClassName),_={x:0,width:i.handleWidth,rx:i.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":i.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(w._height/4),height:Math.round(w._height/2)};T.ensureSingle(u,"rect",i.handleMinClassName,function(C){C.attr(_)}).attr(E),T.ensureSingle(S,"rect",i.handleMaxClassName,function(C){C.attr(_)}).attr(E);var L={width:i.grabAreaWidth,x:0,y:0,fill:i.grabAreaFill,cursor:d._context.staticPlot?void 0:i.grabAreaCursor};T.ensureSingle(u,"rect",i.grabAreaMinClassName,function(C){C.attr(L)}).attr("height",w._height),T.ensureSingle(S,"rect",i.grabAreaMaxClassName,function(C){C.attr(L)}).attr("height",w._height)}$.exports=function(y){for(var d=y._fullLayout,m=d._rangeSliderData,w=0;w<m.length;w++){var u=m[w][i.name];u._clipId=u._id+"-"+d._uid}var S=d._infolayer.selectAll("g."+i.containerClassName).data(m,function(_){return _._name});S.exit().each(function(_){d._topdefs.select("#"+_[i.name]._clipId).remove()}).remove(),0!==m.length&&(S.enter().append("g").classed(i.containerClassName,!0).attr("pointer-events","all"),S.each(function(_){var E=M.select(this),L=_[i.name],C=d[r.id2name(_.anchor)],P=L[r.id2name(_.anchor)];if(L.range){var z,j=T.simpleMap(L.range,_.r2l),R=T.simpleMap(_.range,_.r2l);z=R[0]<R[1]?[Math.min(j[0],R[0]),Math.max(j[1],R[1])]:[Math.max(j[0],R[0]),Math.min(j[1],R[1])],L.range=L._input.range=T.simpleMap(z,_.l2r)}_.cleanRange("rangeslider.range");var V=d._size,D=_.domain;L._width=V.w*(D[1]-D[0]);var B=Math.round(V.l+V.w*D[0]),N=Math.round(V.t+V.h*(1-_._counterDomainMin)+("bottom"===_.side?_._depth:0)+L._offsetShift+i.extraPad);E.attr("transform",x(B,N)),L._rl=T.simpleMap(L.range,_.r2l);var U=L._rl[0],J=L._rl[1],Y=J-U;if(L.p2d=function(pe){return pe/L._width*Y+U},L.d2p=function(pe){return(pe-U)/Y*L._width},_.rangebreaks){var q=_.locateBreaks(U,J);if(q.length){var H,X,Q=0;for(H=0;H<q.length;H++)Q+=(X=q[H]).max-X.min;var ne=L._width/(J-U-Q),re=[-ne*U];for(H=0;H<q.length;H++)re.push(re[re.length-1]-ne*((X=q[H]).max-X.min));for(L.d2p=function(pe){for(var ke=re[0],me=0;me<q.length;me++){var le=q[me];if(pe>=le.max)ke=re[me+1];else if(pe<le.min)break}return ke+ne*pe},H=0;H<q.length;H++)(X=q[H]).pmin=L.d2p(X.min),X.pmax=L.d2p(X.max);L.p2d=function(pe){for(var ke=re[0],me=0;me<q.length;me++){var le=q[me];if(pe>=le.pmax)ke=re[me+1];else if(pe<le.pmin)break}return(pe-ke)/ne}}}if("match"!==P.rangemode){var ae=C.r2l(P.range[0]),se=C.r2l(P.range[1])-ae;L.d2pOppAxis=function(pe){return(pe-ae)/se*L._height}}E.call(c,y,_,L).call(h,y,_,L).call(f,y,_,L).call(b,y,_,L,P).call(v,y,_,L).call(g,y,_,L),function(pe,ke,me,le){if(!ke._context.staticPlot){var ue=pe.select("rect."+i.slideBoxClassName).node(),Ee=pe.select("rect."+i.grabAreaMinClassName).node(),de=pe.select("rect."+i.grabAreaMaxClassName).node();pe.on("mousedown",xe),pe.on("touchstart",xe)}function xe(){var Te=M.event,we=Te.target,K=Te.clientX||Te.touches[0].clientX,oe=K-pe.node().getBoundingClientRect().left,he=le.d2p(me._rl[0]),ye=le.d2p(me._rl[1]),Me=n.coverSlip();function Re(De){var fe,ge,be,Ie=+(De.clientX||De.touches[0].clientX)-K;switch(we){case ue:if(be="ew-resize",he+Ie>me._length||ye+Ie<0)return;fe=he+Ie,ge=ye+Ie;break;case Ee:if(be="col-resize",he+Ie>me._length)return;fe=he+Ie,ge=ye;break;case de:if(be="col-resize",ye+Ie<0)return;fe=he,ge=ye+Ie;break;default:be="ew-resize",fe=oe,ge=oe+Ie}if(ge<fe){var He=ge;ge=fe,fe=He}le._pixelMin=fe,le._pixelMax=ge,a(M.select(Me),be),function(Ve,tt,nt,st){function dt(pt){return nt.l2r(T.constrain(pt,st._rl[0],st._rl[1]))}var wt=dt(st.p2d(st._pixelMin)),_t=dt(st.p2d(st._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",tt,nt._name+".range",[wt,_t])})}(0,ke,me,le)}function Pe(){Me.removeEventListener("mousemove",Re),Me.removeEventListener("mouseup",Pe),this.removeEventListener("touchmove",Re),this.removeEventListener("touchend",Pe),T.removeElement(Me)}this.addEventListener("touchmove",Re),this.addEventListener("touchend",Pe),Me.addEventListener("mousemove",Re),Me.addEventListener("mouseup",Pe)}}(E,y,_,L),function(pe,ke,me,le,ue,Ee){var de=i.handleWidth/2;function xe(De){return T.constrain(De,0,le._width)}function Te(De){return T.constrain(De,0,le._height)}function we(De){return T.constrain(De,-de,le._width+de)}var K=xe(le.d2p(me._rl[0])),oe=xe(le.d2p(me._rl[1]));if(pe.select("rect."+i.slideBoxClassName).attr("x",K).attr("width",oe-K),pe.select("rect."+i.maskMinClassName).attr("width",K),pe.select("rect."+i.maskMaxClassName).attr("x",oe).attr("width",le._width-oe),"match"!==Ee.rangemode){var he=le._height-Te(le.d2pOppAxis(ue._rl[1])),ye=le._height-Te(le.d2pOppAxis(ue._rl[0]));pe.select("rect."+i.maskMinOppAxisClassName).attr("x",K).attr("height",he).attr("width",oe-K),pe.select("rect."+i.maskMaxOppAxisClassName).attr("x",K).attr("y",ye).attr("height",le._height-ye).attr("width",oe-K),pe.select("rect."+i.slideBoxClassName).attr("y",he).attr("height",ye-he)}var Re=Math.round(we(K-de))-.5,Pe=Math.round(we(oe-de))+.5;pe.select("g."+i.grabberMinClassName).attr("transform",x(Re,.5)),pe.select("g."+i.grabberMaxClassName).attr("transform",x(Pe,.5))}(E,0,_,L,C,P),"bottom"===_.side&&e.draw(y,_._id+"title",{propContainer:_,propName:_._name+".title",placeholder:d._dfltTitle.x,attributes:{x:_._offset+_._length/2,y:N+L._height+L._offsetShift+10+1.5*_.title.font.size,"text-anchor":"middle"}})}))}},549:function($,I,t){"use strict";var M=t(41675),k=t(63893),l=t(73251),T=t(18783).LINE_SPACING,x=l.name;function p(s){var e=s&&s[x];return e&&e.visible}I.isVisible=p,I.makeData=function(s){var e=M.list({_fullLayout:s},"x",!0),o=s.margin,r=[];if(!s._has("gl2d"))for(var n=0;n<e.length;n++){var a=e[n];if(p(a)){r.push(a);var i=a[x];i._id=x+a._id,i._height=(s.height-o.b-o.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2)}}s._rangeSliderData=r},I.autoMarginOpts=function(s,e){var o=s._fullLayout,r=e[x],n=e._id.charAt(0),a=0,i=0;return"bottom"===e.side&&(a=e._depth,e.title.text!==o._dfltTitle[n]&&(i=1.5*e.title.font.size+10+r._offsetShift,i+=(e.title.text.match(k.BR_TAG_ALL)||[]).length*e.title.font.size*T)),{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:r._height+a+Math.max(o.margin.b,i),pad:l.extraPad+2*r._offsetShift}}},13137:function($,I,t){"use strict";var M=t(71828),k=t(75148),l=t(47850),T=t(549);$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},k,{yaxis:l})}}},layoutAttributes:t(75148),handleDefaults:t(26377),calcAutorange:t(88443),draw:t(72413),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},47850:function($){"use strict";$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function($,I,t){"use strict";var M=t(50215),k=t(82196).line,l=t(79952).P,T=t(1426).extendFlat,x=t(30962).overrideAll,p=t(44467).templatedArray;t(24695),$.exports=x(p("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},M.xref,{}),yref:T({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function($){"use strict";$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(85501),T=t(8389),x=t(30477);function p(s,e,o){function r(E,L){return M.coerce(s,e,T,E,L)}var n=r("path"),a="path"!==r("type",n?"path":"rect");a&&delete e.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var i=["x","y"],c=0;c<2;c++){var h,f,b,v=i[c],g={_fullLayout:o},y=k.coerceRef(s,e,g,v);if((h=k.getFromId(g,y))._selectionIndices.push(e._index),b=x.rangeToShapePosition(h),f=x.shapePositionToRange(h),a){var d=v+"0",m=v+"1",w=s[d],u=s[m];s[d]=f(s[d],!0),s[m]=f(s[m],!0),k.coercePosition(e,g,r,y,d),k.coercePosition(e,g,r,y,m);var S=e[d],_=e[m];void 0!==S&&void 0!==_&&(e[d]=b(S),e[m]=b(_),s[d]=w,s[m]=u)}}a&&M.noneOrAll(s,e,["x0","x1","y0","y1"])}$.exports=function(s,e){l(s,e,{name:"selections",handleItemDefaults:p});for(var o=e.selections,r=0;r<o.length;r++){var n=o[r];n&&void 0===n.path&&(void 0!==n.x0&&void 0!==n.x1&&void 0!==n.y0&&void 0!==n.y1||(e.selections[r]=null))}}},32485:function($,I,t){"use strict";var M=t(60165).readPaths,k=t(42359),l=t(51873).clearOutlineControllers,T=t(7901),x=t(91424),p=t(44467).arrayEditor,s=t(30477),e=s.getPathString;function o(c){var h=c._fullLayout;for(var f in l(c),h._selectionLayer.selectAll("path").remove(),h._plots){var b=h._plots[f].selectionLayer;b&&b.selectAll("path").remove()}for(var v=0;v<h.selections.length;v++)n(c,v)}function r(c){return c._context.editSelection}function n(c,h){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var f=s.makeSelectionsOptionsAndPlotinfo(c,h),b=f.options,v=f.plotinfo;b._input&&function(g){var y=e(c,b),d={"data-index":h,"fill-rule":"evenodd",d:y},m=b.opacity,w="rgba(0,0,0,0)",u=b.line.color||T.contrast(c._fullLayout.plot_bgcolor),S=b.line.width,_=b.line.dash;S||(S=5,_="solid");var E=r(c)&&c._fullLayout._activeSelectionIndex===h;E&&(w=c._fullLayout.activeselection.fillcolor,m=c._fullLayout.activeselection.opacity);for(var L=[],C=1;C>=0;C--){var P=g.append("path").attr(d).style("opacity",C?.1:m).call(T.stroke,u).call(T.fill,w).call(x.dashLine,C?"solid":_,C?4+S:S);if(a(P,c,b),E){var z=p(c.layout,"selections",b);P.style({cursor:"move"});var j={element:P.node(),plotinfo:v,gd:c,editHelpers:z,isActiveSelection:!0},R=M(y,c);k(R,P,j)}else P.style("pointer-events",C?"all":"none");L[C]=P}var V=L[0];L[1].node().addEventListener("click",function(){return function(D,B){if(r(D)){var N=+B.node().getAttribute("data-index");if(N>=0){if(N===D._fullLayout._activeSelectionIndex)return void i(D);D._fullLayout._activeSelectionIndex=N,D._fullLayout._deactivateSelection=i,o(D)}}}(c,V)})}(c._fullLayout._selectionLayer)}function a(c,h,f){x.setClipUrl(c,"clip"+h._fullLayout._uid+(f.xref+f.yref),h)}function i(c){r(c)&&c._fullLayout._activeSelectionIndex>=0&&(l(c),delete c._fullLayout._activeSelectionIndex,o(c))}$.exports={draw:o,drawOne:n,activateLastSelection:function(c){r(c)&&(c._fullLayout._activeSelectionIndex=c._fullLayout.selections.length-1,c._fullLayout._deactivateSelection=i,o(c))}}},53777:function($,I,t){"use strict";var M=t(79952).P,k=t(1426).extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function($){"use strict";$.exports=function(I,t,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},35855:function($,I,t){"use strict";var M=t(64505).selectMode,k=t(51873).clearOutline,l=t(60165),T=l.readPaths,x=l.writePaths,p=l.fixDatesForPaths;$.exports=function(s,e){if(s.length){var o=s[0][0];if(o){var r=o.getAttribute("d"),n=e.gd,a=n._fullLayout.newselection,i=e.plotinfo,c=i.xaxis,h=i.yaxis,f=e.isActiveSelection,b=e.dragmode,v=(n.layout||{}).selections||[];if(!M(b)&&void 0!==f){var g=n._fullLayout._activeSelectionIndex;if(g<v.length)switch(n._fullLayout.selections[g].type){case"rect":b="select";break;case"path":b="lasso"}}var y,d=T(r,n,i,f),m={xref:c._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};1===d.length&&(y=d[0]),y&&5===y.length&&"select"===b?(m.type="rect",m.x0=y[0][1],m.y0=y[0][2],m.x1=y[2][1],m.y1=y[2][2]):(m.type="path",c&&h&&p(d,c,h),m.path=x(d),y=null),k(n);for(var w=e.editHelpers,u=(w||{}).modifyItem,S=[],_=0;_<v.length;_++){var E=n._fullLayout.selections[_];if(E){if(S[_]=E._input,void 0!==f&&_===n._fullLayout._activeSelectionIndex){var L=m;switch(E.type){case"rect":u("x0",L.x0),u("x1",L.x1),u("y0",L.y0),u("y1",L.y1);break;case"path":u("path",L.path)}}}else S[_]=E}return void 0===f?(S.push(m),S):w?w.getUpdateObj():{}}}}},75549:function($,I,t){"use strict";var M=t(71828).strTranslate;function k(l,T){switch(l.type){case"log":return l.p2d(T);case"date":return l.p2r(T,0,l.calendar);default:return l.p2r(T)}}$.exports={p2r:k,r2p:function(l,T){switch(l.type){case"log":return l.d2p(T);case"date":return l.r2p(T,0,l.calendar);default:return l.r2p(T)}},axValue:function(l){var T="y"===l._id.charAt(0)?1:0;return function(x){return k(l,x[T])}},getTransform:function(l){return M(l.xaxis._offset,l.yaxis._offset)}}},47322:function($,I,t){"use strict";var M=t(32485),k=t(3937);$.exports={moduleType:"component",name:"selections",layoutAttributes:t(8389),supplyLayoutDefaults:t(59402),supplyDrawNewSelectionDefaults:t(90849),includeBasePlot:t(76325)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},3937:function($,I,t){"use strict";var M=t(52142),k=t(38258),l=t(73972),T=t(91424).dashStyle,x=t(7901),p=t(30211),s=t(23469).makeEventData,e=t(64505),o=e.freeMode,r=e.rectMode,n=e.drawMode,a=e.openMode,i=e.selectMode,c=t(30477),h=t(21459),f=t(42359),b=t(51873).clearOutline,v=t(60165),g=v.handleEllipse,y=v.readPaths,d=t(90551),m=t(35855),w=t(32485).activateLastSelection,u=t(71828),S=u.sorterAsc,_=t(61082),E=t(79990),L=t(41675).getFromId,C=t(33306),P=t(61549).redrawReglTraces,z=t(34122),j=z.MINSELECT,R=_.filter,V=_.tester,D=t(75549),B=D.p2r,N=D.axValue,U=D.getTransform;function J(Pe){return void 0!==Pe.subplot}function Y(Pe,De,fe,ge,be,Ie,He){var Ve,tt,nt,st,dt,wt,_t,pt,Pt,Je,St=De._hoverdata,Ot=De._fullLayout.clickmode.indexOf("event")>-1,jt=[];if((Je=St)&&Array.isArray(Je)&&!0!==Je[0].hoverOnBox){Q(Pe,De,Ie);var Dt=function(Je,at){var Se,ze,Ke=Je[0],it=-1,ct=[];for(ze=0;ze<at.length;ze++)if(Ke.fullData._expandedIndex===(Se=at[ze]).cd[0].trace._expandedIndex){if(!0===Ke.hoverOnBox)break;void 0!==Ke.pointNumber?it=Ke.pointNumber:void 0!==Ke.binNumber&&(it=Ke.binNumber,ct=Ke.pointNumbers);break}return{pointNumber:it,pointNumbers:ct,searchInfo:Se}}(St,Ve=ae(De,fe,ge,be));if(Dt.pointNumbers.length>0?function(Je,at){var Se,ze,Ke,it=[];for(Ke=0;Ke<Je.length;Ke++)(Se=Je[Ke]).cd[0].trace.selectedpoints&&Se.cd[0].trace.selectedpoints.length>0&&it.push(Se);if(1===it.length&&it[0]===at.searchInfo&&(ze=at.searchInfo.cd[0].trace).selectedpoints.length===at.pointNumbers.length){for(Ke=0;Ke<at.pointNumbers.length;Ke++)if(ze.selectedpoints.indexOf(at.pointNumbers[Ke])<0)return!1;return!0}return!1}(Ve,Dt):function(Je){var at,Se,ze=0;for(Se=0;Se<Je.length;Se++)if((at=Je[Se].cd[0].trace).selectedpoints&&(at.selectedpoints.length>1||(ze+=at.selectedpoints.length)>1))return!1;return 1===ze}(Ve)&&(wt=pe(Dt))){for(He&&He.remove(),Pt=0;Pt<Ve.length;Pt++)(tt=Ve[Pt])._module.selectPoints(tt,!1);ke(De,Ve),ne(Ie),Ot&&Re(De)}else{for(_t=Pe.shiftKey&&(void 0!==wt?wt:pe(Dt)),nt=function(Je,at,Se){return{pointNumber:Je,searchInfo:at,subtract:!!Se}}(Dt.pointNumber,Dt.searchInfo,_t),st=X(Ie.selectionDefs.concat([nt])),Pt=0;Pt<Ve.length;Pt++)if(dt=le(Ve[Pt]._module.selectPoints(Ve[Pt],st),Ve[Pt]),jt.length)for(var Ye=0;Ye<dt.length;Ye++)jt.push(dt[Ye]);else jt=dt;if(ke(De,Ve,pt={points:jt}),nt&&Ie&&Ie.selectionDefs.push(nt),He){var Ze=Ie.mergedPolygons,Ne=a(Ie.dragmode);f(ue(Ze,Ne),He,Ie)}Ot&&Me(De,pt)}}}function q(Pe){return"pointNumber"in Pe&&"searchInfo"in Pe}function H(Pe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(De,fe,ge,be){return be.cd[0].trace._expandedIndex===Pe.searchInfo.cd[0].trace._expandedIndex&&ge===Pe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Pe.subtract}}function X(Pe){if(Pe.length){for(var De=[],fe=q(Pe[0])?0:Pe[0][0][0],ge=fe,be=q(Pe[0])?0:Pe[0][0][1],Ie=be,He=0;He<Pe.length;He++)if(q(Pe[He]))De.push(H(Pe[He]));else{var Ve=V(Pe[He]);Ve.subtract=!!Pe[He].subtract,De.push(Ve),fe=Math.min(fe,Ve.xmin),ge=Math.max(ge,Ve.xmax),be=Math.min(be,Ve.ymin),Ie=Math.max(Ie,Ve.ymax)}return{xmin:fe,xmax:ge,ymin:be,ymax:Ie,pts:[],contains:function(tt,nt,st,dt){for(var wt=!1,_t=0;_t<De.length;_t++)De[_t].contains(tt,nt,st,dt)&&(wt=!De[_t].subtract);return wt},isRect:!1,degenerate:!1}}}function Q(Pe,De,fe){var ge=De._fullLayout,be=fe.plotinfo,Ie=fe.dragmode,He=ge._lastSelectedSubplot&&ge._lastSelectedSubplot===be.id,Ve=(Pe.shiftKey||Pe.altKey)&&!(n(Ie)&&a(Ie));He&&Ve&&be.selection&&be.selection.selectionDefs&&!fe.selectionDefs?(fe.selectionDefs=be.selection.selectionDefs,fe.mergedPolygons=be.selection.mergedPolygons):Ve&&be.selection||ne(fe),He||(b(De),ge._lastSelectedSubplot=be.id)}function ne(Pe,De){var fe=Pe.dragmode,ge=Pe.plotinfo,be=Pe.gd;be._fullLayout._activeShapeIndex>=0&&be._fullLayout._deactivateShape(be),be._fullLayout._activeSelectionIndex>=0&&be._fullLayout._deactivateSelection(be);var Ie=be._fullLayout._zoomlayer,He=n(fe),Ve=i(fe);if(He||Ve){var tt,nt,st=Ie.selectAll(".select-outline-"+ge.id);st&&be._fullLayout._outlining&&(He&&(tt=d(st,Pe)),tt&&l.call("_guiRelayout",be,{shapes:tt}),Ve&&!J(Pe)&&(nt=m(st,Pe)),nt&&(be._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",be,{selections:nt}).then(function(){De&&w(be)})),be._fullLayout._outlining=!1)}ge.selection={},ge.selection.selectionDefs=Pe.selectionDefs=[],ge.selection.mergedPolygons=Pe.mergedPolygons=[]}function re(Pe){return Pe._id}function ae(Pe,De,fe,ge){if(!Pe.calcdata)return[];var be,Ie,He,Ve=[],tt=De.map(re),nt=fe.map(re);for(He=0;He<Pe.calcdata.length;He++)if(!0===(Ie=(be=Pe.calcdata[He])[0].trace).visible&&Ie._module&&Ie._module.selectPoints)if(!J({subplot:ge})||Ie.subplot!==ge&&Ie.geo!==ge)if("splom"===Ie.type){if(Ie._xaxes[tt[0]]&&Ie._yaxes[nt[0]]){var st=se(Ie._module,be,De[0],fe[0]);st.scene=Pe._fullLayout._splomScenes[Ie.uid],Ve.push(st)}}else if("sankey"===Ie.type){var dt=se(Ie._module,be,De[0],fe[0]);Ve.push(dt)}else{if(-1===tt.indexOf(Ie.xaxis)||-1===nt.indexOf(Ie.yaxis))continue;Ve.push(se(Ie._module,be,L(Pe,Ie.xaxis),L(Pe,Ie.yaxis)))}else Ve.push(se(Ie._module,be,De[0],fe[0]));return Ve}function se(Pe,De,fe,ge){return{_module:Pe,cd:De,xaxis:fe,yaxis:ge}}function pe(Pe){var De=Pe.searchInfo.cd[0].trace,ge=Pe.pointNumbers;return!!De.selectedpoints&&De.selectedpoints.indexOf(ge.length>0?ge[0]:Pe.pointNumber)>-1}function ke(Pe,De,fe){var ge,be;for(ge=0;ge<De.length;ge++){var Ie=De[ge].cd[0].trace._fullInput,He=Pe._fullLayout._tracePreGUI[Ie.uid]||{};void 0===He.selectedpoints&&(He.selectedpoints=Ie._input.selectedpoints||null)}if(fe){var Ve=fe.points||[];for(ge=0;ge<De.length;ge++)(be=De[ge].cd[0].trace)._input.selectedpoints=be._fullInput.selectedpoints=[],be._fullInput!==be&&(be.selectedpoints=[]);for(var tt=0;tt<Ve.length;tt++){var nt=Ve[tt],st=nt.data,dt=nt.fullData,wt=nt.pointIndex,_t=nt.pointIndices;_t?([].push.apply(st.selectedpoints,_t),be._fullInput!==be&&[].push.apply(dt.selectedpoints,_t)):(st.selectedpoints.push(wt),be._fullInput!==be&&dt.selectedpoints.push(wt))}}else for(ge=0;ge<De.length;ge++)delete(be=De[ge].cd[0].trace).selectedpoints,delete be._input.selectedpoints,be._fullInput!==be&&delete be._fullInput.selectedpoints;!function(pt,Pt){for(var St=!1,Ot=0;Ot<Pt.length;Ot++){var jt=Pt[Ot],Dt=jt.cd;l.traceIs(Dt[0].trace,"regl")&&(St=!0);var Ye=jt._module,Ze=Ye.styleOnSelect||Ye.style;Ze&&(Ze(pt,Dt,Dt[0].node3),Dt[0].nodeRangePlot3&&Ze(pt,Dt,Dt[0].nodeRangePlot3))}St&&(C(pt),P(pt))}(Pe,De)}function me(Pe,De,fe){for(var ge=(fe?M.difference:M.union)({regions:Pe},{regions:[De]}).regions.reverse(),be=0;be<ge.length;be++){var Ie=ge[be];Ie.subtract=K(Ie,ge.slice(0,be))}return ge}function le(Pe,De){if(Array.isArray(Pe))for(var fe=De.cd,ge=De.cd[0].trace,be=0;be<Pe.length;be++)Pe[be]=s(Pe[be],ge,fe);return Pe}function ue(Pe,De){for(var fe=[],ge=0;ge<Pe.length;ge++){fe[ge]=[];for(var be=0;be<Pe[ge].length;be++){fe[ge][be]=[],fe[ge][be][0]=be?"L":"M";for(var Ie=0;Ie<Pe[ge][be].length;Ie++)fe[ge][be].push(Pe[ge][be][Ie])}De||fe[ge].push(["Z",fe[ge][0][1],fe[ge][0][2]])}return fe}function Ee(Pe,De){for(var fe,ge,be=[],Ie=[],He=0;He<De.length;He++){var Ve=De[He];ge=Ve._module.selectPoints(Ve,Pe),Ie.push(ge),fe=le(ge,Ve),be=be.concat(fe)}return be}function de(Pe,De,fe,ge,be){var Ie,He,Ve,tt=!!ge;be&&(Ie=be.plotinfo,He=be.xaxes[0]._id,Ve=be.yaxes[0]._id);var nt=[],st=[],dt=we(Pe),wt=Pe._fullLayout;if(Ie){var _t=wt._zoomlayer,pt=wt.dragmode,Pt=n(pt),St=i(pt);if(Pt||St){var Ot=L(Pe,He,"x"),jt=L(Pe,Ve,"y");if(Ot&&jt){var Dt=_t.selectAll(".select-outline-"+Ie.id);if(Dt&&Pe._fullLayout._outlining&&Dt.length){for(var Ye=Dt[0][0].getAttribute("d"),Ze=y(Ye,Pe,Ie),Ne=[],Je=0;Je<Ze.length;Je++){for(var at=Ze[Je],Se=[],ze=0;ze<at.length;ze++)Se.push([oe(Ot,at[ze][1]),oe(jt,at[ze][2])]);Se.xref=He,Se.yref=Ve,Se.subtract=K(Se,Ne),Ne.push(Se)}dt=dt.concat(Ne)}}}}var Ke=He&&Ve?[He+Ve]:wt._subplots.cartesian;!function(zn){var Fn=zn.calcdata;if(Fn)for(var Bn=0;Bn<Fn.length;Bn++){var Xn=zn._fullLayout._splomScenes;if(Xn){var mr=Xn[Fn[Bn][0].trace.uid];mr&&(mr.selectBatch=[])}}}(Pe);for(var it={},ct=0;ct<Ke.length;ct++){var mt=Ke[ct],Lt=mt.indexOf("y"),At=mt.slice(0,Lt),ht=mt.slice(Lt),Et=He&&Ve?fe:void 0;if(Et=Te(dt,At,ht,Et)){var gt=ge;if(!tt){var kt=L(Pe,At,"x"),It=L(Pe,ht,"y");gt=ae(Pe,[kt],[It],mt);for(var Ut=0;Ut<gt.length;Ut++){var Nt=gt[Ut],qt=Nt.cd[0],Xt=qt.trace;if("scattergl"===Nt._module.name&&!qt.t.xpx){var Kt=Xt.x,fn=Xt.y,nn=Xt._length;qt.t.xpx=[],qt.t.ypx=[];for(var xn=0;xn<nn;xn++)qt.t.xpx[xn]=kt.c2p(Kt[xn]),qt.t.ypx[xn]=It.c2p(fn[xn])}"splom"===Nt._module.name&&(it[Xt.uid]||(it[Xt.uid]=!0))}}var jn=Ee(Et,gt);nt=nt.concat(jn),st=st.concat(gt)}}var mn={points:nt};ke(Pe,st,mn);var en=wt.clickmode.indexOf("event")>-1&&De;if(!Ie&&De){var vn=we(Pe,!0);if(vn.length){var on=vn[0].xref,sn=vn[0].yref;if(on&&sn){var En=he(vn);ye([L(Pe,on,"x"),L(Pe,sn,"y")])(mn,En)}}Pe._fullLayout._noEmitSelectedAtStart?Pe._fullLayout._noEmitSelectedAtStart=!1:en&&Me(Pe,mn),wt._reselect=!1}if(!Ie&&wt._deselect){var kn=wt._deselect;(function(zn,Fn,Bn){for(var er=0;er<Bn.length;er++){var Xn=Bn[er];if(Xn.xaxis&&Xn.xaxis._id===zn&&Xn.yaxis&&Xn.yaxis._id===Fn)return!0}return!1})(He=kn.xref,Ve=kn.yref,st)||xe(Pe,He,Ve,ge),en&&(mn.points.length?Me(Pe,mn):Re(Pe)),wt._deselect=!1}return{eventData:mn,selectionTesters:fe}}function xe(Pe,De,fe,ge){ge=ae(Pe,[L(Pe,De,"x")],[L(Pe,fe,"y")],De+fe);for(var be=0;be<ge.length;be++){var Ie=ge[be];Ie._module.selectPoints(Ie,!1)}ke(Pe,ge)}function Te(Pe,De,fe,ge){for(var be,Ie=0;Ie<Pe.length;Ie++){var He=Pe[Ie];De===He.xref&&fe===He.yref&&(be?ge=X(be=me(be,He,!!He.subtract)):(be=[He],ge=V(He)))}return ge}function we(Pe,De){for(var fe=[],ge=Pe._fullLayout,be=ge.selections,Ie=be.length,He=0;He<Ie;He++)if(!De||He===ge._activeSelectionIndex){var Ve=be[He];if(Ve){var tt,nt,st,dt,wt,_t=Ve.xref,pt=Ve.yref,Pt=L(Pe,_t,"x"),St=L(Pe,pt,"y");if("rect"===Ve.type){wt=[];var Ot=oe(Pt,Ve.x0),jt=oe(Pt,Ve.x1),Dt=oe(St,Ve.y0),Ye=oe(St,Ve.y1);wt=[[Ot,Dt],[Ot,Ye],[jt,Ye],[jt,Dt]],tt=Math.min(Ot,jt),nt=Math.max(Ot,jt),st=Math.min(Dt,Ye),dt=Math.max(Dt,Ye),wt.xmin=tt,wt.xmax=nt,wt.ymin=st,wt.ymax=dt,wt.xref=_t,wt.yref=pt,wt.subtract=!1,wt.isRect=!0,fe.push(wt)}else if("path"===Ve.type)for(var Ze=Ve.path.split("Z"),Ne=[],Je=0;Je<Ze.length;Je++){var at=Ze[Je];if(at){var Se=c.extractPathCoords(at+="Z",h.paramIsX,"raw"),ze=c.extractPathCoords(at,h.paramIsY,"raw");tt=1/0,nt=-1/0,st=1/0,dt=-1/0,wt=[];for(var Ke=0;Ke<Se.length;Ke++){var it=oe(Pt,Se[Ke]),ct=oe(St,ze[Ke]);wt.push([it,ct]),tt=Math.min(it,tt),nt=Math.max(it,nt),st=Math.min(ct,st),dt=Math.max(ct,dt)}wt.xmin=tt,wt.xmax=nt,wt.ymin=st,wt.ymax=dt,wt.xref=_t,wt.yref=pt,wt.subtract=K(wt,Ne),Ne.push(wt),fe.push(wt)}}}}return fe}function K(Pe,De){for(var fe=!1,ge=0;ge<De.length;ge++)for(var be=De[ge],Ie=0;Ie<Pe.length;Ie++)if(k(Pe[Ie],be)){fe=!fe;break}return fe}function oe(Pe,De){return"date"===Pe.type&&(De=De.replace("_"," ")),"log"===Pe.type?Pe.c2p(De):Pe.r2p(De,null,Pe.calendar)}function he(Pe){for(var De=Pe.length,fe=[],ge=0;ge<De;ge++){var be=Pe[ge];fe=(fe=fe.concat(be)).concat([be[0]])}return(Ie=fe).isRect=5===Ie.length&&Ie[0][0]===Ie[4][0]&&Ie[0][1]===Ie[4][1]&&Ie[0][0]===Ie[1][0]&&Ie[2][0]===Ie[3][0]&&Ie[0][1]===Ie[3][1]&&Ie[1][1]===Ie[2][1]||Ie[0][1]===Ie[1][1]&&Ie[2][1]===Ie[3][1]&&Ie[0][0]===Ie[3][0]&&Ie[1][0]===Ie[2][0],Ie.isRect&&(Ie.xmin=Math.min(Ie[0][0],Ie[2][0]),Ie.xmax=Math.max(Ie[0][0],Ie[2][0]),Ie.ymin=Math.min(Ie[0][1],Ie[2][1]),Ie.ymax=Math.max(Ie[0][1],Ie[2][1])),Ie;var Ie}function ye(Pe){return function(De,fe){for(var ge,be,Ie=0;Ie<Pe.length;Ie++){var He=Pe[Ie],Ve=He._id,tt=Ve.charAt(0);if(fe.isRect){ge||(ge={});var nt=fe[tt+"min"],st=fe[tt+"max"];void 0!==nt&&void 0!==st&&(ge[Ve]=[B(He,nt),B(He,st)].sort(S))}else be||(be={}),be[Ve]=fe.map(N(He))}ge&&(De.range=ge),be&&(De.lassoPoints=be)}}function Me(Pe,De){De&&(De.selections=(Pe.layout||{}).selections||[]),Pe.emit("plotly_selected",De)}function Re(Pe){Pe.emit("plotly_deselect",null)}$.exports={reselect:de,prepSelect:function(Pe,De,fe,ge,be){var Ie=!J(ge),He=o(be),Ve=r(be),tt=a(be),nt=n(be),st=i(be),dt="drawcircle"===be,wt="drawline"===be||dt,_t=ge.gd,pt=_t._fullLayout,Pt=st&&"immediate"===pt.newselection.mode&&Ie,St=pt._zoomlayer,Ot=ge.element.getBoundingClientRect(),jt=ge.plotinfo,Dt=U(jt),Ye=De-Ot.left,Ze=fe-Ot.top;pt._calcInverseTransform(_t);var Je,at,Se,ze,Ke,it,ct,Ne=u.apply3DTransform(pt._invTransform)(Ye,Ze),mt=pt._invScaleX,Lt=pt._invScaleY,At=Ye=Ne[0],ht=Ze=Ne[1],Et="M"+Ye+","+Ze,gt=ge.xaxes[0],kt=ge.yaxes[0],It=gt._length,Ut=kt._length,Nt=Pe.altKey&&!(n(be)&&tt);Q(Pe,_t,ge),He&&(Je=R([[Ye,Ze]],z.BENDPX));var qt=St.selectAll("path.select-outline-"+jt.id).data([1]),Xt=nt?pt.newshape:pt.newselection,Kt=nt&&!tt?Xt.fillcolor:"rgba(0,0,0,0)",fn=Xt.line.color||(Ie?x.contrast(_t._fullLayout.plot_bgcolor):"#7f7f7f");qt.enter().append("path").attr("class","select-outline select-outline-"+jt.id).style({opacity:nt?Xt.opacity/2:1,"stroke-dasharray":T(Xt.line.dash,Xt.line.width),"stroke-width":Xt.line.width+"px","shape-rendering":"crispEdges"}).call(x.stroke,fn).call(x.fill,Kt).attr("fill-rule","evenodd").classed("cursor-move",!!nt).attr("transform",Dt).attr("d",Et+"Z");var nn=St.append("path").attr("class","zoombox-corners").style({fill:x.background,stroke:x.defaultLine,"stroke-width":1}).attr("transform",Dt).attr("d","M0,0Z"),xn=pt._uid+z.SELECTID,jn=[],mn=ae(_t,ge.xaxes,ge.yaxes,ge.subplot);Pt&&!Pe.shiftKey&&(ge._clearSubplotSelections=function(){if(Ie){var vn=gt._id,on=kt._id;xe(_t,vn,on,mn);for(var sn=(_t.layout||{}).selections||[],En=[],kn=!1,zn=0;zn<sn.length;zn++){var Fn=pt.selections[zn];Fn.xref!==vn||Fn.yref!==on?En.push(sn[zn]):kn=!0}kn&&(_t._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",_t,{selections:En}))}});var vn,en=(vn=ge).plotinfo.fillRangeItems||ye(vn.xaxes.concat(vn.yaxes));ge.moveFn=function(vn,on){ge._clearSubplotSelections&&(ge._clearSubplotSelections(),ge._clearSubplotSelections=void 0),At=Math.max(0,Math.min(It,mt*vn+Ye)),ht=Math.max(0,Math.min(Ut,Lt*on+Ze));var sn=Math.abs(At-Ye),En=Math.abs(ht-Ze);if(Ve){var kn,zn,Fn;if(st){var Bn=pt.selectdirection;switch(kn="any"===Bn?En<Math.min(.6*sn,j)?"h":sn<Math.min(.6*En,j)?"v":"d":Bn){case"h":zn=dt?Ut/2:0,Fn=Ut;break;case"v":zn=dt?It/2:0,Fn=It}}if(nt)switch(pt.newshape.drawdirection){case"vertical":kn="h",zn=dt?Ut/2:0,Fn=Ut;break;case"horizontal":kn="v",zn=dt?It/2:0,Fn=It;break;case"ortho":sn<En?(kn="h",zn=Ze,Fn=ht):(kn="v",zn=Ye,Fn=At);break;default:kn="d"}"h"===kn?((ze=wt?g(dt,[At,zn],[At,Fn]):[[Ye,zn],[Ye,Fn],[At,Fn],[At,zn]]).xmin=wt?At:Math.min(Ye,At),ze.xmax=wt?At:Math.max(Ye,At),ze.ymin=Math.min(zn,Fn),ze.ymax=Math.max(zn,Fn),nn.attr("d","M"+ze.xmin+","+(Ze-j)+"h-4v"+2*j+"h4ZM"+(ze.xmax-1)+","+(Ze-j)+"h4v"+2*j+"h-4Z")):"v"===kn?((ze=wt?g(dt,[zn,ht],[Fn,ht]):[[zn,Ze],[zn,ht],[Fn,ht],[Fn,Ze]]).xmin=Math.min(zn,Fn),ze.xmax=Math.max(zn,Fn),ze.ymin=wt?ht:Math.min(Ze,ht),ze.ymax=wt?ht:Math.max(Ze,ht),nn.attr("d","M"+(Ye-j)+","+ze.ymin+"v-4h"+2*j+"v4ZM"+(Ye-j)+","+(ze.ymax-1)+"v4h"+2*j+"v-4Z")):"d"===kn&&((ze=wt?g(dt,[Ye,Ze],[At,ht]):[[Ye,Ze],[Ye,ht],[At,ht],[At,Ze]]).xmin=Math.min(Ye,At),ze.xmax=Math.max(Ye,At),ze.ymin=Math.min(Ze,ht),ze.ymax=Math.max(Ze,ht),nn.attr("d","M0,0Z"))}else He&&(Je.addPt([At,ht]),ze=Je.filtered);if(ge.selectionDefs&&ge.selectionDefs.length?(Se=me(ge.mergedPolygons,ze,Nt),ze.subtract=Nt,at=X(ge.selectionDefs.concat([ze]))):(Se=[ze],at=V(ze)),f(ue(Se,tt),qt,ge),st){var er,Xn=de(_t,!1),mr=Xn.eventData?Xn.eventData.points.slice():[];Xn=de(_t,!1,at,mn,ge),at=Xn.selectionTesters,ct=Xn.eventData,er=Je?Je.filtered:he(Se),E.throttle(xn,z.SELECTDELAY,function(){for(var ur=(jn=Ee(at,mn)).slice(),$n=0;$n<mr.length;$n++){for(var lr=mr[$n],hr=!1,Gt=0;Gt<ur.length;Gt++)if(ur[Gt].curveNumber===lr.curveNumber&&ur[Gt].pointNumber===lr.pointNumber){hr=!0;break}hr||ur.push(lr)}ur.length&&(ct||(ct={}),ct.points=ur),en(ct,er),_t.emit("plotly_selecting",ct)})}},ge.clickFn=function(vn,on){if(nn.remove(),_t._fullLayout._activeShapeIndex>=0)_t._fullLayout._deactivateShape(_t);else if(!nt){var sn=pt.clickmode;E.done(xn).then(function(){if(E.clear(xn),2===vn){for(qt.remove(),Ke=0;Ke<mn.length;Ke++)(it=mn[Ke])._module.selectPoints(it,!1);if(ke(_t,mn),ne(ge),Re(_t),mn.length){var En=mn[0].xaxis,kn=mn[0].yaxis;if(En&&kn){for(var zn=[],Fn=_t._fullLayout.selections,Bn=0;Bn<Fn.length;Bn++){var er=Fn[Bn];er&&(er.xref===En._id&&er.yref===kn._id||zn.push(er))}zn.length<Fn.length&&(_t._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",_t,{selections:zn}))}}}else sn.indexOf("select")>-1&&Y(on,_t,ge.xaxes,ge.yaxes,ge.subplot,ge,qt),"event"===sn&&Me(_t,void 0);p.click(_t,on)}).catch(u.error)}},ge.doneFn=function(){nn.remove(),E.done(xn).then(function(){E.clear(xn),!Pt&&ze&&ge.selectionDefs&&(ze.subtract=Nt,ge.selectionDefs.push(ze),ge.mergedPolygons.length=0,[].push.apply(ge.mergedPolygons,Se)),(Pt||nt)&&ne(ge,Pt),ge.doneFnCompleted&&ge.doneFnCompleted(jn),st&&Me(_t,ct)}).catch(u.error)}},clearOutline:b,clearSelectionsCache:ne,selectOnClick:Y}},89827:function($,I,t){"use strict";var M=t(50215),k=t(41940),l=t(82196).line,T=t(79952).P,x=t(1426).extendFlat,p=t(44467).templatedArray;t(24695),$.exports=p("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:x({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:x({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:x({},l.color,{editType:"arraydraw"}),width:x({},l.width,{editType:"calc+arraydraw"}),dash:x({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(21459),T=t(30477);function x(o){return s(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function p(o){return s(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function s(o,r,n,a,i,c){var h=o/2,f=c;if("pixel"===r){var b=i?T.extractPathCoords(i,c?l.paramIsY:l.paramIsX):[n,a],v=M.aggNums(Math.max,null,b),g=M.aggNums(Math.min,null,b),y=g<0?Math.abs(g)+h:h,d=v>0?v+h:h;return{ppad:h,ppadplus:f?y:d,ppadminus:f?d:y}}return{ppad:h}}function e(o,r,n,a,i){var c="category"===o.type||"multicategory"===o.type?o.r2c:o.d2c;if(void 0!==r)return[c(r),c(n)];if(a){var h,f,b,v,g=1/0,y=-1/0,d=a.match(l.segmentRE);for("date"===o.type&&(c=T.decodeDate(c)),h=0;h<d.length;h++)void 0!==(f=i[d[h].charAt(0)].drawn)&&(!(b=d[h].substr(1).match(l.paramRE))||b.length<f||((v=c(b[f]))<g&&(g=v),v>y&&(y=v)));return y>=g?[g,y]:void 0}}$.exports=function(o){var n=M.filterVisible(o._fullLayout.shapes);if(n.length&&o._fullData.length)for(var a=0;a<n.length;a++){var i,c,h=n[a];h._extremes={};var f=k.getRefType(h.xref),b=k.getRefType(h.yref);if("paper"!==h.xref&&"domain"!==f){var v="pixel"===h.xsizemode?h.xanchor:h.x0,g="pixel"===h.xsizemode?h.xanchor:h.x1;(c=e(i=k.getFromId(o,h.xref),v,g,h.path,l.paramIsX))&&(h._extremes[i._id]=k.findExtremes(i,c,x(h)))}if("paper"!==h.yref&&"domain"!==b){var y="pixel"===h.ysizemode?h.yanchor:h.y0,d="pixel"===h.ysizemode?h.yanchor:h.y1;(c=e(i=k.getFromId(o,h.yref),y,d,h.path,l.paramIsY))&&(h._extremes[i._id]=k.findExtremes(i,c,p(h)))}}}},21459:function($){"use strict";$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(85501),T=t(89827),x=t(30477);function p(s,e,o){function r(R,V){return M.coerce(s,e,T,R,V)}if(r("visible")){var n=r("path"),a=r("type",n?"path":"rect"),i="path"!==a;i&&delete e.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var c=r("xsizemode"),h=r("ysizemode"),f=["x","y"],b=0;b<2;b++){var v,g,y,d=f[b],m=d+"anchor",w="x"===d?c:h,u={_fullLayout:o},S=k.coerceRef(s,e,u,d,void 0,"paper");if("range"===k.getRefType(S)?((v=k.getFromId(u,S))._shapeIndices.push(e._index),y=x.rangeToShapePosition(v),g=x.shapePositionToRange(v)):g=y=M.identity,i){var _=d+"0",E=d+"1",L=s[_],C=s[E];s[_]=g(s[_],!0),s[E]=g(s[E],!0),"pixel"===w?(r(_,0),r(E,10)):(k.coercePosition(e,u,r,S,_,.25),k.coercePosition(e,u,r,S,E,.75)),e[_]=y(e[_]),e[E]=y(e[E]),s[_]=L,s[E]=C}if("pixel"===w){var P=s[m];s[m]=g(s[m],!0),k.coercePosition(e,u,r,S,m,.25),e[m]=y(e[m]),s[m]=P}}i&&M.noneOrAll(s,e,["x0","x1","y0","y1"]);var z="line"===a;if(r("label.text")){r("label.textangle");var j=r("label.textposition",z?"middle":"middle center");r("label.xanchor"),r("label.yanchor",(V=j,z?"bottom":-1!==V.indexOf("top")?"top":-1!==V.indexOf("bottom")?"bottom":"middle")),r("label.padding"),M.coerceFont(r,"label.font",o.font)}}var V}$.exports=function(s,e){l(s,e,{name:"shapes",handleItemDefaults:p})}},42359:function($,I,t){"use strict";var M=t(71828).strTranslate,k=t(28569),l=t(64505),T=l.drawMode,x=l.selectMode,p=t(73972),s=t(7901),e=t(89995),o=e.i000,r=e.i090,n=e.i180,a=e.i270,i=t(51873).clearOutlineControllers,c=t(60165),h=c.pointsOnRectangle,f=c.pointsOnEllipse,b=c.writePaths,v=t(90551),g=t(35855);function y(d,m){var w,u,S,L=d.length;return u=d[w=(m+1)%L][1],S=d[w][2],u===d[m][1]&&S===d[m][2]&&(u=d[w=(m+2)%L][1],S=d[w][2]),[w,u,S]}$.exports=function d(m,w,u,S){S||(S=0);var _=u.gd;function E(){d(m,w,u,S++),(f(m[0])||u.hasText)&&L({redrawing:!0})}function L(re){var ae={};void 0!==u.isActiveShape&&(u.isActiveShape=!1,ae=v(w,u)),void 0!==u.isActiveSelection&&(u.isActiveSelection=!1,ae=g(w,u),_._fullLayout._reselect=!0),Object.keys(ae).length&&p.call((re||{}).redrawing?"relayout":"_guiRelayout",_,ae)}var C,P,z,j,R,V=_._fullLayout._zoomlayer,D=u.dragmode,B=T(D),N=x(D);function U(re){z=+re.srcElement.getAttribute("data-i"),j=+re.srcElement.getAttribute("data-j"),C[z][j].moveFn=J}function J(re,ae){if(m.length){var se=R[z][j][1],pe=R[z][j][2],ke=m[z],me=ke.length;if(h(ke)){var le=re,ue=ae;u.isActiveSelection&&(y(ke,j)[1]===ke[j][1]?ue=0:le=0);for(var Ee=0;Ee<me;Ee++)if(Ee!==j){var de=ke[Ee];de[1]===ke[j][1]&&(de[1]=se+le),de[2]===ke[j][2]&&(de[2]=pe+ue)}if(ke[j][1]=se+le,ke[j][2]=pe+ue,!h(ke))for(var xe=0;xe<me;xe++)for(var Te=0;Te<ke[xe].length;Te++)ke[xe][Te]=R[z][xe][Te]}else ke[j][1]=se+re,ke[j][2]=pe+ae;E()}}function Y(){L()}function q(re,ae){if(2===re){z=+ae.srcElement.getAttribute("data-i"),j=+ae.srcElement.getAttribute("data-j");var se=m[z];h(se)||f(se)||function(){if(m.length&&m[z]&&m[z].length){for(var pe=[],ke=0;ke<m[z].length;ke++)ke!==j&&pe.push(m[z][ke]);pe.length>1&&(2!==pe.length||"Z"!==pe[1][0])&&(0===j&&(pe[0][0]="M"),m[z]=pe,E(),L())}}()}}function H(re,ae){(function(se,pe){if(m.length)for(var ke=0;ke<m.length;ke++)for(var me=0;me<m[ke].length;me++)for(var le=0;le+2<m[ke][me].length;le+=2)m[ke][me][le+1]=R[ke][me][le+1]+se,m[ke][me][le+2]=R[ke][me][le+2]+pe})(re,ae),E()}(B||N)&&(_._fullLayout._outlining=!0),i(_),w.attr("d",b(m)),S||!u.isActiveShape&&!u.isActiveSelection||(R=function(re,ae){for(var se=0;se<ae.length;se++){var pe=ae[se];re[se]=[];for(var ke=0;ke<pe.length;ke++){re[se][ke]=[];for(var me=0;me<pe[ke].length;me++)re[se][ke][me]=pe[ke][me]}}return re}([],m),function(re){C=[];for(var ae=0;ae<m.length;ae++){var se=m[ae],pe=h(se),ke=!pe&&f(se);C[ae]=[];for(var me=se.length,le=0;le<me;le++)if("Z"!==se[le][0]&&(!ke||le===o||le===r||le===n||le===a)){var ue,Ee=pe&&u.isActiveSelection;Ee&&(ue=y(se,le));var de=se[le][1],xe=se[le][2],Te=re.append(Ee?"rect":"circle").attr("data-i",ae).attr("data-j",le).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ee){var we=ue[1]-de,K=ue[2]-xe,oe=K?5:Math.max(Math.min(25,Math.abs(we)-5),5),he=we?5:Math.max(Math.min(25,Math.abs(K)-5),5);Te.classed(K?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",oe).attr("height",he).attr("x",de-oe/2).attr("y",xe-he/2).attr("transform",M(we/2,K/2))}else Te.classed("cursor-grab",!0).attr("r",5).attr("cx",de).attr("cy",xe);C[ae][le]={element:Te.node(),gd:_,prepFn:U,doneFn:Y,clickFn:q},k.init(C[ae][le])}}}(V.append("g").attr("class","outline-controllers")),P=[],m.length&&(P[0]={element:w[0][0],gd:_,prepFn:function X(re){(z=+re.srcElement.getAttribute("data-i"))||(z=0),P[z].moveFn=H},doneFn:function Q(){L()},clickFn:function ne(re){2===re&&function(ae){if(x(ae._fullLayout.dragmode)){i(ae);var se=ae._fullLayout._activeSelectionIndex,pe=(ae.layout||{}).selections||[];if(se<pe.length){for(var ke=[],me=0;me<pe.length;me++)me!==se&&ke.push(pe[me]);delete ae._fullLayout._activeSelectionIndex;var le=ae._fullLayout.selections[se];ae._fullLayout._deselect={xref:le.xref,yref:le.yref},p.call("_guiRelayout",ae,{selections:ke})}}}(_)}},k.init(P[0])))}},34031:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(71828),T=t(89298),x=t(60165).readPaths,p=t(42359),s=t(51873).clearOutlineControllers,e=t(7901),o=t(91424),r=t(44467).arrayEditor,n=t(28569),a=t(6964),i=t(63893),c=t(21459),h=t(30477),f=h.getPathString,b=t(18783).FROM_TL;function v(_){var E=_._fullLayout;for(var L in E._shapeUpperLayer.selectAll("path").remove(),E._shapeLowerLayer.selectAll("path").remove(),E._shapeUpperLayer.selectAll("text").remove(),E._shapeLowerLayer.selectAll("text").remove(),E._plots){var C=E._plots[L].shapelayer;C&&(C.selectAll("path").remove(),C.selectAll("text").remove())}for(var P=0;P<E.shapes.length;P++)E.shapes[P].visible&&d(_,P)}function g(_){return!!_._fullLayout._outlining}function y(_){return!_._context.edits.shapePosition}function d(_,E){_._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+E+'"]').remove();var L=h.makeShapesOptionsAndPlotinfo(_,E),C=L.options,P=L.plotinfo;C._input&&!1!==C.visible&&function z(j){var R=f(_,C),V={"data-index":E,"fill-rule":C.fillrule,d:R},D=C.opacity,B=C.fillcolor,N=C.line.width?C.line.color:"rgba(0,0,0,0)",U=C.line.width,J=C.line.dash;U||!0!==C.editable||(U=5,J="solid");var Y="Z"!==R[R.length-1],q=y(_)&&C.editable&&_._fullLayout._activeShapeIndex===E;q&&(B=Y?"rgba(0,0,0,0)":_._fullLayout.activeshape.fillcolor,D=_._fullLayout.activeshape.opacity);var H,X=j.append("g").classed("shape-group",!0).attr({"data-index":E}),Q=X.append("path").attr(V).style("opacity",D).call(e.stroke,N).call(e.fill,B).call(o.dashLine,J,U);if(m(X,_,C),w(_,E,C,X),(q||_._context.edits.shapePosition)&&(H=r(_.layout,"shapes",C)),q){Q.style({cursor:"move"});var ne={element:Q.node(),plotinfo:P,gd:_,editHelpers:H,hasText:C.label.text,isActiveShape:!0},re=x(R,_);p(re,Q,ne)}else _._context.edits.shapePosition?function(ae,se,pe,ke,me,le){var ue,Ee,de,xe,Te,we,K,oe,he,ye,Me,Re,Pe,De,fe,ge,be="pixel"===pe.xsizemode,Ie="pixel"===pe.ysizemode,He="line"===pe.type,Ve="path"===pe.type,tt=le.modifyItem,nt=M.select(se.node().parentNode),st=T.getFromId(ae,pe.xref),dt=T.getRefType(pe.xref),wt=T.getFromId(ae,pe.yref),_t=T.getRefType(pe.yref),pt=h.getDataToPixel(ae,st,!1,dt),Pt=h.getDataToPixel(ae,wt,!0,_t),St=h.getPixelToData(ae,st,!1,dt),Ot=h.getPixelToData(ae,wt,!0,_t),jt=He?function(){var ze=Math.max(pe.line.width,10),Ke=me.append("g").attr("data-index",ke).attr("drag-helper",!0);Ke.append("path").attr("d",se.attr("d")).style({cursor:"move","stroke-width":ze,"stroke-opacity":"0"});var it={"fill-opacity":"0"},ct=Math.max(ze/2,10);return Ke.append("circle").attr({"data-line-point":"start-point",cx:be?pt(pe.xanchor)+pe.x0:pt(pe.x0),cy:Ie?Pt(pe.yanchor)-pe.y0:Pt(pe.y0),r:ct}).style(it).classed("cursor-grab",!0),Ke.append("circle").attr({"data-line-point":"end-point",cx:be?pt(pe.xanchor)+pe.x1:pt(pe.x1),cy:Ie?Pt(pe.yanchor)-pe.y1:Pt(pe.y1),r:ct}).style(it).classed("cursor-grab",!0),Ke}():se,Dt={element:jt.node(),gd:ae,prepFn:function(Se){var ze,Ke,it,ct,mt,Lt,At,ht;g(ae)||(be&&(Te=pt(pe.xanchor)),Ie&&(we=Pt(pe.yanchor)),"path"===pe.type?fe=pe.path:(ue=be?pe.x0:pt(pe.x0),Ee=Ie?pe.y0:Pt(pe.y0),de=be?pe.x1:pt(pe.x1),xe=Ie?pe.y1:Pt(pe.y1)),ue<de?(he=ue,Pe="x0",ye=de,De="x1"):(he=de,Pe="x1",ye=ue,De="x0"),!Ie&&Ee<xe||Ie&&Ee>xe?(K=Ee,Me="y0",oe=xe,Re="y1"):(K=xe,Me="y1",oe=Ee,Re="y0"),Ye(Se),Je(me,pe),ze=se,mt=(Ke=pe).yref,Lt=T.getFromId(it=ae,ct=Ke.xref),At=T.getFromId(it,mt),ht="","paper"===ct||Lt.autorange||(ht+=ct),"paper"===mt||At.autorange||(ht+=mt),o.setClipUrl(ze,ht?"clip"+it._fullLayout._uid+ht:null,it),Dt.moveFn="move"===ge?Ze:Ne,Dt.altKey=Se.altKey)},doneFn:function(){g(ae)||(a(se),at(me),m(se,ae,pe),k.call("_guiRelayout",ae,le.getUpdateObj()))},clickFn:function(){g(ae)||at(me)}};function Ye(Se){if(g(ae))ge=null;else if(He)ge="path"===Se.target.tagName?"move":"start-point"===Se.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var ze=Dt.element.getBoundingClientRect(),Ke=ze.right-ze.left,it=ze.bottom-ze.top,Lt=!Ve&&Ke>10&&it>10&&!Se.shiftKey?n.getCursor((Se.clientX-ze.left)/Ke,1-(Se.clientY-ze.top)/it):"move";a(se,Lt),ge=Lt.split("-")[0]}}function Ze(Se,ze){if("path"===pe.type){var Ke=function(mt){return mt},it=Ke,ct=Ke;be?tt("xanchor",pe.xanchor=St(Te+Se)):(it=function(mt){return St(pt(mt)+Se)},st&&"date"===st.type&&(it=h.encodeDate(it))),Ie?tt("yanchor",pe.yanchor=Ot(we+ze)):(ct=function(mt){return Ot(Pt(mt)+ze)},wt&&"date"===wt.type&&(ct=h.encodeDate(ct))),tt("path",pe.path=u(fe,it,ct))}else be?tt("xanchor",pe.xanchor=St(Te+Se)):(tt("x0",pe.x0=St(ue+Se)),tt("x1",pe.x1=St(de+Se))),Ie?tt("yanchor",pe.yanchor=Ot(we+ze)):(tt("y0",pe.y0=Ot(Ee+ze)),tt("y1",pe.y1=Ot(xe+ze)));se.attr("d",f(ae,pe)),Je(me,pe),w(ae,ke,pe,nt)}function Ne(Se,ze){if(Ve){var Ke=function(fn){return fn},it=Ke,ct=Ke;be?tt("xanchor",pe.xanchor=St(Te+Se)):(it=function(fn){return St(pt(fn)+Se)},st&&"date"===st.type&&(it=h.encodeDate(it))),Ie?tt("yanchor",pe.yanchor=Ot(we+ze)):(ct=function(fn){return Ot(Pt(fn)+ze)},wt&&"date"===wt.type&&(ct=h.encodeDate(ct))),tt("path",pe.path=u(fe,it,ct))}else if(He){if("resize-over-start-point"===ge){var mt=ue+Se,Lt=Ie?Ee-ze:Ee+ze;tt("x0",pe.x0=be?mt:St(mt)),tt("y0",pe.y0=Ie?Lt:Ot(Lt))}else if("resize-over-end-point"===ge){var At=de+Se,ht=Ie?xe-ze:xe+ze;tt("x1",pe.x1=be?At:St(At)),tt("y1",pe.y1=Ie?ht:Ot(ht))}}else{var Et=function(fn){return-1!==ge.indexOf(fn)},gt=Et("n"),kt=Et("s"),It=Et("w"),Ut=Et("e"),Nt=gt?K+ze:K,qt=kt?oe+ze:oe,Xt=It?he+Se:he,Kt=Ut?ye+Se:ye;Ie&&(gt&&(Nt=K-ze),kt&&(qt=oe-ze)),(!Ie&&qt-Nt>10||Ie&&Nt-qt>10)&&(tt(Me,pe[Me]=Ie?Nt:Ot(Nt)),tt(Re,pe[Re]=Ie?qt:Ot(qt))),Kt-Xt>10&&(tt(Pe,pe[Pe]=be?Xt:St(Xt)),tt(De,pe[De]=be?Kt:St(Kt)))}se.attr("d",f(ae,pe)),Je(me,pe),w(ae,ke,pe,nt)}function Je(Se,ze){(be||Ie)&&function(){var Ke="path"!==ze.type,it=Se.selectAll(".visual-cue").data([0]);it.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var ct=pt(be?ze.xanchor:l.midRange(Ke?[ze.x0,ze.x1]:h.extractPathCoords(ze.path,c.paramIsX))),mt=Pt(Ie?ze.yanchor:l.midRange(Ke?[ze.y0,ze.y1]:h.extractPathCoords(ze.path,c.paramIsY)));ct=h.roundPositionForSharpStrokeRendering(ct,1),mt=h.roundPositionForSharpStrokeRendering(mt,1),it.attr("d",be&&Ie?"M"+(ct-1-1)+","+(mt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":be?"M"+(ct-1-1)+","+(mt-9-1)+"v18 h2 v-18 Z":"M"+(ct-9-1)+","+(mt-1-1)+"h18 v2 h-18 Z")}()}function at(Se){Se.selectAll(".visual-cue").remove()}n.init(Dt),jt.node().onmousemove=Ye}(_,Q,C,E,j,H):!0===C.editable&&Q.style("pointer-events",Y||e.opacity(B)*D<=.5?"stroke":"all");Q.node().addEventListener("click",function(){return function(ae,se){if(y(ae)){var pe=+se.node().getAttribute("data-index");if(pe>=0){if(pe===ae._fullLayout._activeShapeIndex)return void S(ae);ae._fullLayout._activeShapeIndex=pe,ae._fullLayout._deactivateShape=S,v(ae)}}}(_,Q)})}("below"!==C.layer?_._fullLayout._shapeUpperLayer:"paper"===C.xref||"paper"===C.yref?_._fullLayout._shapeLowerLayer:P._hadPlotinfo?(P.mainplotinfo||P).shapelayer:_._fullLayout._shapeLowerLayer)}function m(_,E,L){var C=(L.xref+L.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(_,C?"clip"+E._fullLayout._uid+C:null,E)}function w(_,E,L,C){if(C.selectAll(".shape-label").remove(),L.label.text){var P,z,j,R,V={"data-index":E},D=L.label.text,B=L.label.font,N=C.append("g").attr(V).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(D);if(L.path){var U=f(_,L),J=x(U,_);P=1/0,j=1/0,z=-1/0,R=-1/0;for(var Y=0;Y<J.length;Y++)for(var q=0;q<J[Y].length;q++)for(var H=J[Y][q],X=1;X<H.length;X+=2){var Q=H[X],ne=H[X+1];P=Math.min(P,Q),z=Math.max(z,Q),j=Math.min(j,ne),R=Math.max(R,ne)}}else{var re=T.getFromId(_,L.xref),ae=T.getRefType(L.xref),se=T.getFromId(_,L.yref),pe=T.getRefType(L.yref),ke=h.getDataToPixel(_,re,!1,ae),me=h.getDataToPixel(_,se,!0,pe);P=ke(L.x0),z=ke(L.x1),j=me(L.y0),R=me(L.y1)}var le=L.label.textangle;"auto"===le&&(le="line"===L.type?(Te=P,we=j,K=z,oe=R,ye=Math.abs(K-Te),-180/Math.PI*Math.atan2(K>=Te?we-oe:oe-we,ye)):0),N.call(function(Te){return Te.call(o.font,B).attr({}),i.convertToTspans(Te,_),Te});var ue=function(Te,we,K,oe,he,ye,Me){var Re,Pe,De,fe,ge=he.label.textposition,be=he.label.textangle,Ie=he.label.padding,He=he.type,Ve=Math.PI/180*ye,tt=Math.sin(Ve),nt=Math.cos(Ve),st=he.label.xanchor,dt=he.label.yanchor;if("line"===He){"start"===ge?(Re=Te,Pe=we):"end"===ge?(Re=K,Pe=oe):(Re=(Te+K)/2,Pe=(we+oe)/2),"auto"===st&&(st="start"===ge?"auto"===be?K>Te?"left":K<Te?"right":"center":K>Te?"right":K<Te?"left":"center":"end"===ge?"auto"===be?K>Te?"right":K<Te?"left":"center":K>Te?"left":K<Te?"right":"center":"center");var wt={bottom:-1,middle:0,top:1};if("auto"===be){var _t=wt[dt];De=-Ie*tt*_t,fe=Ie*nt*_t}else De=Ie*{left:1,center:0,right:-1}[st],fe=Ie*wt[dt];Re+=De,Pe+=fe}else De=Ie+3,-1!==ge.indexOf("right")?(Re=Math.max(Te,K)-De,"auto"===st&&(st="right")):-1!==ge.indexOf("left")?(Re=Math.min(Te,K)+De,"auto"===st&&(st="left")):(Re=(Te+K)/2,"auto"===st&&(st="center")),Pe=-1!==ge.indexOf("top")?Math.min(we,oe):-1!==ge.indexOf("bottom")?Math.max(we,oe):(we+oe)/2,fe=Ie,"bottom"===dt?Pe-=fe:"top"===dt&&(Pe+=fe);var pt=b[dt],Pt=he.label.font.size,St=Me.height;return{textx:Re+(St*pt-Pt)*tt,texty:Pe+-(St*pt-Pt)*nt,xanchor:st}}(P,j,z,R,L,le,o.bBox(N.node())),Ee=ue.textx,de=ue.texty;N.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ue.xanchor],y:de,x:Ee,transform:"rotate("+le+","+Ee+","+de+")"}).call(i.positionText,Ee,de)}var Te,we,K,oe,ye}function u(_,E,L){return _.replace(c.segmentRE,function(C){var P=0,z=C.charAt(0),j=c.paramIsX[z],R=c.paramIsY[z],V=c.numParams[z];return z+C.substr(1).replace(c.paramRE,function(D){return P>=V||(j[P]?D=E(D):R[P]&&(D=L(D)),P++),D})})}function S(_){y(_)&&_._fullLayout._activeShapeIndex>=0&&(s(_),delete _._fullLayout._activeShapeIndex,v(_))}$.exports={draw:v,drawOne:d,eraseActiveShape:function(_){if(y(_)){s(_);var E=_._fullLayout._activeShapeIndex,L=(_.layout||{}).shapes||[];if(E<L.length){for(var C=[],P=0;P<L.length;P++)P!==E&&C.push(L[P]);delete _._fullLayout._activeShapeIndex,k.call("_guiRelayout",_,{shapes:C})}}}}},29241:function($,I,t){"use strict";var M=t(41940),k=t(79952).P,l=t(1426).extendFlat;$.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:l({},k,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},label:{text:{valType:"string",dflt:"",editType:"none"},font:M({editType:"none"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"none"},textangle:{valType:"angle",dflt:"auto",editType:"none"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"none"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"none"},padding:{valType:"number",dflt:3,min:0,editType:"none"},editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},89995:function($){"use strict";$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function($,I,t){"use strict";var M=t(7901),k=t(71828);$.exports=function(l,T,x){x("newshape.drawdirection"),x("newshape.layer"),x("newshape.fillcolor"),x("newshape.fillrule"),x("newshape.opacity"),x("newshape.line.width")&&(x("newshape.line.color",M.contrast((l||{}).plot_bgcolor||"#FFF")),x("newshape.line.dash"));var r,s="drawline"===l.dragmode;if(x("newshape.label.text")){x("newshape.label.textangle");var e=x("newshape.label.textposition",s?"middle":"middle center");x("newshape.label.xanchor"),x("newshape.label.yanchor",(r=e,s?"bottom":-1!==r.indexOf("top")?"top":-1!==r.indexOf("bottom")?"bottom":"middle")),x("newshape.label.padding"),k.coerceFont(x,"newshape.label.font",T.font)}x("activeshape.fillcolor"),x("activeshape.opacity")}},60165:function($,I,t){"use strict";var M=t(95616),k=t(89995),l=k.CIRCLE_SIDES,T=k.SQRT2,x=t(75549),p=x.p2r,s=x.r2p,e=[0,3,4,5,6,1,2],o=[0,3,4,1,2];function r(a,i){return Math.abs(a-i)<=1e-6}function n(a,i){var c=i[1]-a[1],h=i[2]-a[2];return Math.sqrt(c*c+h*h)}I.writePaths=function(a){var i=a.length;if(!i)return"M0,0Z";for(var c="",h=0;h<i;h++)for(var f=a[h].length,b=0;b<f;b++){var v=a[h][b][0];if("Z"===v)c+="Z";else for(var g=a[h][b].length,y=0;y<g;y++){var d=y;"Q"===v||"S"===v?d=o[y]:"C"===v&&(d=e[y]),c+=a[h][b][d],y>0&&y<g-1&&(c+=",")}}return c},I.readPaths=function(a,i,c,h){var f,b,v,g=M(a),y=[],d=-1,m=0,w=0,u=function(){b=m,v=w};u();for(var S=0;S<g.length;S++){var P=[],z=g[S][0],j=z;switch(z){case"M":y[++d]=[],P.push([j,m=+g[S][1],w=+g[S][2]]),u();break;case"Q":case"S":P.push([j,m=+g[S][3],w=+g[S][4],+g[S][1],+g[S][2]]);break;case"C":P.push([j,m=+g[S][5],w=+g[S][6],+g[S][1],+g[S][2],+g[S][3],+g[S][4]]);break;case"T":case"L":P.push([j,m=+g[S][1],w=+g[S][2]]);break;case"H":P.push([j="L",m=+g[S][1],w]);break;case"V":P.push([j="L",m,w=+g[S][1]]);break;case"A":j="L";var R=+g[S][1],V=+g[S][2];+g[S][4]||(R=-R,V=-V);var D=m-R,B=w;for(f=1;f<=l/2;f++){var N=2*Math.PI*f/l;P.push([j,D+R*Math.cos(N),B+V*Math.sin(N)])}break;case"Z":m===b&&w===v||P.push([j,m=b,w=v])}for(var U=(c||{}).domain,J=i._fullLayout._size,Y=c&&"pixel"===c.xsizemode,q=c&&"pixel"===c.ysizemode,H=!1===h,X=0;X<P.length;X++){for(f=0;f+2<7;f+=2){var Q=P[X][f+1],ne=P[X][f+2];void 0!==Q&&void 0!==ne&&(m=Q,w=ne,c&&(c.xaxis&&c.xaxis.p2r?(H&&(Q-=c.xaxis._offset),Q=Y?s(c.xaxis,c.xanchor)+Q:p(c.xaxis,Q)):(H&&(Q-=J.l),U?Q=U.x[0]+Q/J.w:Q/=J.w),c.yaxis&&c.yaxis.p2r?(H&&(ne-=c.yaxis._offset),ne=q?s(c.yaxis,c.yanchor)-ne:p(c.yaxis,ne)):(H&&(ne-=J.t),ne=U?U.y[1]-ne/J.h:1-ne/J.h)),P[X][f+1]=Q,P[X][f+2]=ne)}y[d].push(P[X].slice())}}return y},I.pointsOnRectangle=function(a){if(5!==a.length)return!1;for(var i=1;i<3;i++)if(!r(a[0][i]-a[1][i],a[3][i]-a[2][i])||!r(a[0][i]-a[3][i],a[1][i]-a[2][i]))return!1;return!(!r(a[0][1],a[1][1])&&!r(a[0][1],a[3][1])||!(n(a[0],a[1])*n(a[0],a[3])))},I.pointsOnEllipse=function(a){var i=a.length;if(i!==l+1)return!1;i=l;for(var c=0;c<i;c++){var h=(2*i-c)%i,f=(i/2+h)%i;if(!r(n(a[c],a[(i/2+c)%i]),n(a[h],a[f])))return!1}return!0},I.handleEllipse=function(a,i,c){if(!a)return[i,c];var h=I.ellipseOver({x0:i[0],y0:i[1],x1:c[0],y1:c[1]}),f=(h.x1+h.x0)/2,b=(h.y1+h.y0)/2,v=(h.x1-h.x0)/2,g=(h.y1-h.y0)/2;v||(v=g/=T),g||(g=v/=T);for(var y=[],d=0;d<l;d++){var m=2*d*Math.PI/l;y.push([f+v*Math.cos(m),b+g*Math.sin(m)])}return y},I.ellipseOver=function(a){var i=a.x0,c=a.y0,h=a.x1,f=a.y1,b=h-i,v=f-c,g=((i-=b)+h)/2,y=((c-=v)+f)/2;return{x0:g-(b*=T),y0:y-(v*=T),x1:g+b,y1:y+v}},I.fixDatesForPaths=function(a,i,c){var h="date"===i.type,f="date"===c.type;if(!h&&!f)return a;for(var b=0;b<a.length;b++)for(var v=0;v<a[b].length;v++)for(var g=0;g+2<a[b][v].length;g+=2)h&&(a[b][v][g+1]=a[b][v][g+1].replace(" ","_")),f&&(a[b][v][g+2]=a[b][v][g+2].replace(" ","_"));return a}},90551:function($,I,t){"use strict";var M=t(64505),k=M.drawMode,l=M.openMode,T=t(89995),x=T.i000,p=T.i090,s=T.i180,e=T.i270,o=T.cos45,r=T.sin45,n=t(75549),a=n.p2r,i=n.r2p,c=t(51873).clearOutline,h=t(60165),f=h.readPaths,b=h.writePaths,v=h.ellipseOver,g=h.fixDatesForPaths;$.exports=function(y,d){if(y.length){var m=y[0][0];if(m){var w=m.getAttribute("d"),u=d.gd,S=u._fullLayout.newshape,_=d.plotinfo,E=_.xaxis,L=_.yaxis,C=!!_.domain||!_.xaxis,P=!!_.domain||!_.yaxis,z=d.isActiveShape,j=d.dragmode,R=(u.layout||{}).shapes||[];if(!k(j)&&void 0!==z){var V=u._fullLayout._activeShapeIndex;if(V<R.length)switch(u._fullLayout.shapes[V].type){case"rect":j="drawrect";break;case"circle":j="drawcircle";break;case"line":j="drawline";break;case"path":var D=R[V].path||"";j="Z"===D[D.length-1]?"drawclosedpath":"drawopenpath"}}var B,N=l(j),U=f(w,u,_,z),J={editable:!0,label:S.label,xref:C?"paper":E._id,yref:P?"paper":L._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};if(N||(J.fillcolor=S.fillcolor,J.fillrule=S.fillrule),1===U.length&&(B=U[0]),B&&5===B.length&&"drawrect"===j)J.type="rect",J.x0=B[0][1],J.y0=B[0][2],J.x1=B[2][1],J.y1=B[2][2];else if(B&&"drawline"===j)J.type="line",J.x0=B[0][1],J.y0=B[0][2],J.x1=B[1][1],J.y1=B[1][2];else if(B&&"drawcircle"===j){J.type="circle";var Y=B[x][1],q=B[p][1],H=B[s][1],X=B[e][1],Q=B[x][2],ne=B[p][2],re=B[s][2],ae=B[e][2],se=_.xaxis&&("date"===_.xaxis.type||"log"===_.xaxis.type),pe=_.yaxis&&("date"===_.yaxis.type||"log"===_.yaxis.type);se&&(Y=i(_.xaxis,Y),q=i(_.xaxis,q),H=i(_.xaxis,H),X=i(_.xaxis,X)),pe&&(Q=i(_.yaxis,Q),ne=i(_.yaxis,ne),re=i(_.yaxis,re),ae=i(_.yaxis,ae));var ke=(q+X)/2,me=(Q+re)/2,le=v({x0:ke,y0:me,x1:ke+(X-q+H-Y)/2*o,y1:me+(ae-ne+re-Q)/2*r});se&&(le.x0=a(_.xaxis,le.x0),le.x1=a(_.xaxis,le.x1)),pe&&(le.y0=a(_.yaxis,le.y0),le.y1=a(_.yaxis,le.y1)),J.x0=le.x0,J.y0=le.y0,J.x1=le.x1,J.y1=le.y1}else J.type="path",E&&L&&g(U,E,L),J.path=b(U),B=null;c(u);for(var ue=d.editHelpers,Ee=(ue||{}).modifyItem,de=[],xe=0;xe<R.length;xe++){var Te=u._fullLayout.shapes[xe];if(de[xe]=Te._input,void 0!==z&&xe===u._fullLayout._activeShapeIndex){var we=J;switch(Te.type){case"line":case"rect":case"circle":Ee("x0",we.x0),Ee("x1",we.x1),Ee("y0",we.y0),Ee("y1",we.y1);break;case"path":Ee("path",we.path)}}}return void 0===z?(de.push(J),de):ue?ue.getUpdateObj():{}}}}},51873:function($){"use strict";$.exports={clearOutlineControllers:function(I){var t=I._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()},clearOutline:function(I){var t=I._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),I._fullLayout._outlining=!1}}},30477:function($,I,t){"use strict";var M=t(21459),k=t(71828),l=t(89298);I.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(x){return x}},I.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(x){return x}},I.decodeDate=function(T){return function(x){return x.replace&&(x=x.replace("_"," ")),T(x)}},I.encodeDate=function(T){return function(x){return T(x).replace(" ","_")}},I.extractPathCoords=function(T,x,p){var s=[];return T.match(M.segmentRE).forEach(function(e){var o=x[e.charAt(0)].drawn;if(void 0!==o){var r=e.substr(1).match(M.paramRE);if(r&&!(r.length<o)){var n=r[o],a=p?n:k.cleanNumber(n);s.push(a)}}}),s},I.getDataToPixel=function(T,x,p,s){var e,o=T._fullLayout._size;if(x)if("domain"===s)e=function(n){return x._length*(p?1-n:n)+x._offset};else{var r=I.shapePositionToRange(x);e=function(n){return x._offset+x.r2p(r(n,!0))},"date"===x.type&&(e=I.decodeDate(e))}else e=p?function(n){return o.t+o.h*(1-n)}:function(n){return o.l+o.w*n};return e},I.getPixelToData=function(T,x,p,s){var e,o=T._fullLayout._size;if(x)if("domain"===s)e=function(n){var a=(n-x._offset)/x._length;return p?1-a:a};else{var r=I.rangeToShapePosition(x);e=function(n){return r(x.p2r(n-x._offset))}}else e=p?function(n){return 1-(n-o.t)/o.h}:function(n){return(n-o.l)/o.w};return e},I.roundPositionForSharpStrokeRendering=function(T,x){var p=1===Math.round(x%2),s=Math.round(T);return p?s+.5:s},I.makeShapesOptionsAndPlotinfo=function(T,x){var p=T._fullLayout.shapes[x]||{},s=T._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&"paper"!==p.xref&&(s.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&"paper"!==p.yref&&(s.yaxis=T._fullLayout[p.yref+"axis"])),s.xsizemode=p.xsizemode,s.ysizemode=p.ysizemode,s.xanchor=p.xanchor,s.yanchor=p.yanchor,{options:p,plotinfo:s}},I.makeSelectionsOptionsAndPlotinfo=function(T,x){var p=T._fullLayout.selections[x]||{},s=T._fullLayout._plots[p.xref+p.yref];return s?s._hadPlotinfo=!0:(s={},p.xref&&(s.xaxis=T._fullLayout[p.xref+"axis"]),p.yref&&(s.yaxis=T._fullLayout[p.yref+"axis"])),{options:p,plotinfo:s}},I.getPathString=function(T,x){var p,s,e,o,r,n,a,i,L,C,P,j,R,V,D,c=x.type,h=l.getRefType(x.xref),f=l.getRefType(x.yref),b=l.getFromId(T,x.xref),v=l.getFromId(T,x.yref),g=T._fullLayout._size;if(b?"domain"===h?s=function(L){return b._offset+b._length*L}:(p=I.shapePositionToRange(b),s=function(L){return b._offset+b.r2p(p(L,!0))}):s=function(L){return g.l+g.w*L},v?"domain"===f?o=function(L){return v._offset+v._length*(1-L)}:(e=I.shapePositionToRange(v),o=function(L){return v._offset+v.r2p(e(L,!0))}):o=function(L){return g.t+g.h*(1-L)},"path"===c)return b&&"date"===b.type&&(s=I.decodeDate(s)),v&&"date"===v.type&&(o=I.decodeDate(o)),C=s,P=o,j=(L=x).xsizemode,R=L.ysizemode,V=L.xanchor,D=L.yanchor,L.path.replace(M.segmentRE,function(B){var N=0,U=B.charAt(0),J=M.paramIsX[U],Y=M.paramIsY[U],q=M.numParams[U],H=B.substr(1).replace(M.paramRE,function(X){return J[N]?X="pixel"===j?C(V)+Number(X):C(X):Y[N]&&(X="pixel"===R?P(D)-Number(X):P(X)),++N>q&&(X="X"),X});return N>q&&(H=H.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+B)),U+H});if("pixel"===x.xsizemode){var y=s(x.xanchor);r=y+x.x0,n=y+x.x1}else r=s(x.x0),n=s(x.x1);if("pixel"===x.ysizemode){var d=o(x.yanchor);a=d-x.y0,i=d-x.y1}else a=o(x.y0),i=o(x.y1);if("line"===c)return"M"+r+","+a+"L"+n+","+i;if("rect"===c)return"M"+r+","+a+"H"+n+"V"+i+"H"+r+"Z";var m=(r+n)/2,w=(a+i)/2,u=Math.abs(m-r),S=Math.abs(w-a),_="A"+u+","+S,E=m+u+","+w;return"M"+E+_+" 0 1,1 "+m+","+(w-S)+_+" 0 0,1 "+E+"Z"}},89853:function($,I,t){"use strict";var M=t(34031);$.exports={moduleType:"component",name:"shapes",layoutAttributes:t(89827),supplyLayoutDefaults:t(84726),supplyDrawNewShapeDefaults:t(45547),includeBasePlot:t(76325)("shapes"),calcAutorange:t(5627),draw:M.draw,drawOne:M.drawOne}},75067:function($,I,t){"use strict";var M=t(41940),k=t(35025),l=t(1426).extendDeepAll,T=t(30962).overrideAll,x=t(85594),p=t(44467).templatedArray,s=t(98292),e=p("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=T(p("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:x.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},98292:function($){"use strict";$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function($,I,t){"use strict";var M=t(71828),k=t(85501),l=t(75067),T=t(98292).name,x=l.steps;function p(e,o,r){function n(f,b){return M.coerce(e,o,l,f,b)}for(var a=k(e,o,{name:"steps",handleItemDefaults:s}),i=0,c=0;c<a.length;c++)a[c].visible&&i++;if(i<2?o.visible=!1:n("visible")){o._stepCount=i;var h=o._visibleSteps=M.filterVisible(a);(a[n("active")]||{}).visible||(o.active=h[0]._index),n("x"),n("y"),M.noneOrAll(e,o,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),M.coerceFont(n,"currentvalue.font",o.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function s(e,o){function r(a,i){return M.coerce(e,o,x,a,i)}if("skip"===e.method||Array.isArray(e.args)?r("visible"):o.visible=!1){r("method"),r("args");var n=r("label","step-"+o._index);r("value",n),r("execute")}}$.exports=function(e,o){k(e,o,{name:T,handleItemDefaults:p})}},44504:function($,I,t){"use strict";var M=t(39898),k=t(74875),l=t(7901),T=t(91424),x=t(71828),p=x.strTranslate,s=t(63893),e=t(44467).arrayEditor,o=t(98292),r=t(18783),n=r.LINE_SPACING,a=r.FROM_TL,i=r.FROM_BR;function c(P){return o.autoMarginIdRoot+P._index}function h(P){return P._index}function f(P,z){var j=T.tester.selectAll("g."+o.labelGroupClass).data(z._visibleSteps);j.enter().append("g").classed(o.labelGroupClass,!0);var R=0,V=0;j.each(function(X){var Q=g(M.select(this),{step:X},z).node();if(Q){var ne=T.bBox(Q);V=Math.max(V,ne.height),R=Math.max(R,ne.width)}}),j.remove();var D=z._dims={};D.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var B=P._fullLayout._size;if(D.lx=B.l+B.w*z.x,D.ly=B.t+B.h*(1-z.y),D.outerLength="fraction"===z.lenmode?Math.round(B.w*z.len):z.len,D.inputAreaStart=0,D.inputAreaLength=Math.round(D.outerLength-z.pad.l-z.pad.r),D.labelStride=Math.max(1,Math.ceil((R+o.labelPadding)/((D.inputAreaLength-2*o.stepInset)/(z._stepCount-1)))),D.labelHeight=V,D.currentValueMaxWidth=0,D.currentValueHeight=0,D.currentValueTotalHeight=0,D.currentValueMaxLines=1,z.currentvalue.visible){var J=T.tester.append("g");j.each(function(X){var Q=b(J,z,X.label),ne=Q.node()&&T.bBox(Q.node())||{width:0,height:0},re=s.lineCount(Q);D.currentValueMaxWidth=Math.max(D.currentValueMaxWidth,Math.ceil(ne.width)),D.currentValueHeight=Math.max(D.currentValueHeight,Math.ceil(ne.height)),D.currentValueMaxLines=Math.max(D.currentValueMaxLines,re)}),D.currentValueTotalHeight=D.currentValueHeight+z.currentvalue.offset,J.remove()}D.height=D.currentValueTotalHeight+o.tickOffset+z.ticklen+o.labelOffset+D.labelHeight+z.pad.t+z.pad.b;var Y="left";x.isRightAnchor(z)&&(D.lx-=D.outerLength,Y="right"),x.isCenterAnchor(z)&&(D.lx-=D.outerLength/2,Y="center");var q="top";x.isBottomAnchor(z)&&(D.ly-=D.height,q="bottom"),x.isMiddleAnchor(z)&&(D.ly-=D.height/2,q="middle"),D.outerLength=Math.ceil(D.outerLength),D.height=Math.ceil(D.height),D.lx=Math.round(D.lx),D.ly=Math.round(D.ly);var H={y:z.y,b:D.height*i[q],t:D.height*a[q]};"fraction"===z.lenmode?(H.l=0,H.xl=z.x-z.len*a[Y],H.r=0,H.xr=z.x+z.len*i[Y]):(H.x=z.x,H.l=D.outerLength*a[Y],H.r=D.outerLength*i[Y]),k.autoMargin(P,c(z),H)}function b(P,z,j){if(z.currentvalue.visible){var R,V,D=z._dims;switch(z.currentvalue.xanchor){case"right":R=D.inputAreaLength-o.currentValueInset-D.currentValueMaxWidth,V="left";break;case"center":R=.5*D.inputAreaLength,V="middle";break;default:R=o.currentValueInset,V="left"}var B=x.ensureSingle(P,"text",o.labelClass,function(H){H.attr({"text-anchor":V,"data-notex":1})}),N=z.currentvalue.prefix?z.currentvalue.prefix:"";if("string"==typeof j)N+=j;else{var U=z.steps[z.active].label,J=z._gd._fullLayout._meta;J&&(U=x.templateString(U,J)),N+=U}z.currentvalue.suffix&&(N+=z.currentvalue.suffix),B.call(T.font,z.currentvalue.font).text(N).call(s.convertToTspans,z._gd);var Y=s.lineCount(B);return s.positionText(B,R,(D.currentValueMaxLines+1-Y)*z.currentvalue.font.size*n),B}}function v(P,z,j){x.ensureSingle(P,"rect",o.gripRectClass,function(R){R.call(w,z,P,j).style("pointer-events","all")}).attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(l.stroke,j.bordercolor).call(l.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px")}function g(P,z,j){var R=x.ensureSingle(P,"text",o.labelClass,function(B){B.attr({"text-anchor":"middle","data-notex":1})}),V=z.step.label,D=j._gd._fullLayout._meta;return D&&(V=x.templateString(V,D)),R.call(T.font,j.font).text(V).call(s.convertToTspans,j._gd),R}function y(P,z){var j=x.ensureSingle(P,"g",o.labelsClass),R=z._dims,V=j.selectAll("g."+o.labelGroupClass).data(R.labelSteps);V.enter().append("g").classed(o.labelGroupClass,!0),V.exit().remove(),V.each(function(D){var B=M.select(this);B.call(g,D,z),T.setTranslate(B,_(z,D.fraction),o.tickOffset+z.ticklen+z.font.size*n+o.labelOffset+R.currentValueTotalHeight)})}function d(P,z,j,R,V){var D=Math.round(R*(j._stepCount-1)),B=j._visibleSteps[D]._index;B!==j.active&&m(P,z,j,B,!0,V)}function m(P,z,j,R,V,D){var B=j.active;j.active=R,e(P.layout,o.name,j).applyUpdate("active",R);var N=j.steps[j.active];z.call(S,j,D),z.call(b,j),P.emit("plotly_sliderchange",{slider:j,step:j.steps[j.active],interaction:V,previousActive:B}),N&&N.method&&V&&(z._nextMethod?(z._nextMethod.step=N,z._nextMethod.doCallback=V,z._nextMethod.doTransition=D):(z._nextMethod={step:N,doCallback:V,doTransition:D},z._nextMethodRaf=window.requestAnimationFrame(function(){var U=z._nextMethod.step;U.method&&(U.execute&&k.executeAPICommand(P,U.method,U.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function w(P,z,j){if(!z._context.staticPlot){var R=j.node(),V=M.select(z);P.on("mousedown",B),P.on("touchstart",B)}function D(){return j.data()[0]}function B(){var N=D();z.emit("plotly_sliderstart",{slider:N});var U=j.select("."+o.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),U.call(l.fill,N.activebgcolor);var J=E(N,M.mouse(R)[0]);function Y(){var H=D(),X=E(H,M.mouse(R)[0]);d(z,j,H,X,!1)}function q(){var H=D();H._dragging=!1,U.call(l.fill,H.bgcolor),V.on("mouseup",null),V.on("mousemove",null),V.on("touchend",null),V.on("touchmove",null),z.emit("plotly_sliderend",{slider:H,step:H.steps[H.active]})}d(z,j,N,J,!0),N._dragging=!0,V.on("mousemove",Y),V.on("touchmove",Y),V.on("mouseup",q),V.on("touchend",q)}}function u(P,z){var j=P.selectAll("rect."+o.tickRectClass).data(z._visibleSteps),R=z._dims;j.enter().append("rect").classed(o.tickRectClass,!0),j.exit().remove(),j.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),j.each(function(V,D){var B=D%R.labelStride==0,N=M.select(this);N.attr({height:B?z.ticklen:z.minorticklen}).call(l.fill,z.tickcolor),T.setTranslate(N,_(z,D/(z._stepCount-1))-.5*z.tickwidth,(B?o.tickOffset:o.minorTickOffset)+R.currentValueTotalHeight)})}function S(P,z,j){for(var R=P.select("rect."+o.gripRectClass),V=0,D=0;D<z._stepCount;D++)if(z._visibleSteps[D]._index===z.active){V=D;break}var B=_(z,V/(z._stepCount-1));if(!z._invokingCommand){var N=R;j&&z.transition.duration>0&&(N=N.transition().duration(z.transition.duration).ease(z.transition.easing)),N.attr("transform",p(B-.5*o.gripWidth,z._dims.currentValueTotalHeight))}}function _(P,z){var j=P._dims;return j.inputAreaStart+o.stepInset+(j.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,z))}function E(P,z){var j=P._dims;return Math.min(1,Math.max(0,(z-o.stepInset-j.inputAreaStart)/(j.inputAreaLength-2*o.stepInset-2*j.inputAreaStart)))}function L(P,z,j){var R=j._dims,V=x.ensureSingle(P,"rect",o.railTouchRectClass,function(D){D.call(w,z,P,j).style("pointer-events","all")});V.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,o.tickOffset+j.ticklen+R.labelHeight)}).call(l.fill,j.bgcolor).attr("opacity",0),T.setTranslate(V,0,R.currentValueTotalHeight)}function C(P,z){var j=z._dims,R=j.inputAreaLength-2*o.railInset,V=x.ensureSingle(P,"rect",o.railRectClass);V.attr({width:R,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,z.bordercolor).call(l.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),T.setTranslate(V,o.railInset,.5*(j.inputAreaWidth-o.railWidth)+j.currentValueTotalHeight)}$.exports=function(P){var z=P._context.staticPlot,j=P._fullLayout,R=function(J,Y){for(var q=J[o.name],H=[],X=0;X<q.length;X++){var Q=q[X];Q.visible&&(Q._gd=Y,H.push(Q))}return H}(j,P),V=j._infolayer.selectAll("g."+o.containerClassName).data(R.length>0?[0]:[]);function D(J){J._commandObserver&&(J._commandObserver.remove(),delete J._commandObserver),k.autoMargin(P,c(J))}if(V.enter().append("g").classed(o.containerClassName,!0).style("cursor",z?null:"ew-resize"),V.exit().each(function(){M.select(this).selectAll("g."+o.groupClassName).each(D)}).remove(),0!==R.length){var B=V.selectAll("g."+o.groupClassName).data(R,h);B.enter().append("g").classed(o.groupClassName,!0),B.exit().each(D).remove();for(var N=0;N<R.length;N++)f(P,R[N]);B.each(function(J){var Y=M.select(this);(function(q){var H=q._dims;H.labelSteps=[];for(var X=q._stepCount,Q=0;Q<X;Q+=H.labelStride)H.labelSteps.push({fraction:Q/(X-1),step:q._visibleSteps[Q]})})(J),k.manageCommandObserver(P,J,J._visibleSteps,function(q){var H=Y.data()[0];H.active!==q.index&&(H._dragging||m(P,Y,H,q.index,!1,!0))}),function(q,H,X){(X.steps[X.active]||{}).visible||(X.active=X._visibleSteps[0]._index),H.call(b,X).call(C,X).call(y,X).call(u,X).call(L,q,X).call(v,q,X);var Q=X._dims;T.setTranslate(H,Q.lx+X.pad.l,Q.ly+X.pad.t),H.call(S,X,!1),H.call(b,X)}(P,M.select(this),J)})}}},23243:function($,I,t){"use strict";var M=t(98292);$.exports={moduleType:"component",name:M.name,layoutAttributes:t(75067),supplyLayoutDefaults:t(12343),draw:t(44504)}},92998:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(74875),T=t(73972),x=t(71828),p=x.strTranslate,s=t(91424),e=t(7901),o=t(63893),r=t(37822),n=t(18783).OPPOSITE_SIDE,a=/ [XY][0-9]* /;$.exports={draw:function(i,c,h){var f,b=h.propContainer,v=h.propName,g=h.placeholder,y=h.traceIndex,d=h.avoid||{},m=h.attributes,w=h.transform,u=h.containerGroup,S=i._fullLayout,_=1,E=!1,L=b.title,C=(L&&L.text?L.text:"").trim(),P=L&&L.font?L.font:{},z=P.family,j=P.size,R=P.color;"title.text"===v?f="titleText":-1!==v.indexOf("axis")?f="axisTitleText":v.indexOf(!0)&&(f="colorbarTitleText");var V=i._context.edits[f];""===C?_=0:C.replace(a," % ")===g.replace(a," % ")&&(_=.2,E=!0,V||(C="")),h._meta?C=x.templateString(C,h._meta):S._meta&&(C=x.templateString(C,S._meta));var D,B=C||V;u||(u=x.ensureSingle(S._infolayer,"g","g-"+c),D=S._hColorbarMoveTitle);var N=u.selectAll("text").data(B?[0]:[]);if(N.enter().append("text"),N.text(C).attr("class",c),N.exit().remove(),!B)return u;function U(q){x.syncOrAsync([J,Y],q)}function J(q){var H;return!w&&D&&(w={}),w?(H="",w.rotate&&(H+="rotate("+[w.rotate,m.x,m.y]+")"),(w.offset||D)&&(H+=p(0,(w.offset||0)-(D||0)))):H=null,q.attr("transform",H),q.style({"font-family":z,"font-size":M.round(j,2)+"px",fill:e.rgb(R),opacity:_*e.opacity(R),"font-weight":l.fontWeight}).attr(m).call(o.convertToTspans,i),l.previousPromises(i)}function Y(q){var H=M.select(q.node().parentNode);if(d&&d.selection&&d.side&&C){H.attr("transform",null);var X=n[d.side],Q="left"===d.side||"top"===d.side?-1:1,ne=k(d.pad)?d.pad:2,re=s.bBox(H.node()),ae={t:0,b:0,l:0,r:0},se=i._fullLayout._reservedMargin;for(var pe in se)for(var ke in se[pe])ae[ke]=Math.max(ae[ke],se[pe][ke]);var ue=d.maxShift||Q*({left:ae.l,top:ae.t,right:S.width-ae.r,bottom:S.height-ae.b}[d.side]-re[d.side]),Ee=0;if(ue<0)Ee=ue;else{var de=d.offsetLeft||0,xe=d.offsetTop||0;re.left-=de,re.right-=de,re.top-=xe,re.bottom-=xe,d.selection.each(function(){var we=s.bBox(this);x.bBoxIntersect(re,we,ne)&&(Ee=Math.max(Ee,Q*(we[d.side]-re[X])+ne))}),Ee=Math.min(ue,Ee),b._titleScoot=Math.abs(Ee)}if(Ee>0||ue<0){var Te={left:[-Ee,0],right:[Ee,0],top:[0,-Ee],bottom:[0,Ee]}[d.side];H.attr("transform",p(Te[0],Te[1]))}}}return N.call(U),V&&(C?N.on(".opacity",null):(_=0,E=!0,N.text(g).on("mouseover.opacity",function(){M.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),N.call(o.makeEditable,{gd:i}).on("edit",function(q){void 0!==y?T.call("_guiRestyle",i,v,q,y):T.call("_guiRelayout",i,v,q)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(U)}).on("input",function(q){this.text(q||" ").call(o.positionText,m.x,m.y)})),N.classed("js-placeholder",E),u}}},7163:function($,I,t){"use strict";var M=t(41940),k=t(22399),l=t(1426).extendFlat,T=t(30962).overrideAll,x=t(35025),p=t(44467).templatedArray,s=p("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=T(p("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(x({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function($){"use strict";$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},64897:function($,I,t){"use strict";var M=t(71828),k=t(85501),l=t(7163),T=t(75909).name,x=l.buttons;function p(e,o,r){function n(a,i){return M.coerce(e,o,l,a,i)}n("visible",k(e,o,{name:"buttons",handleItemDefaults:s}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),M.noneOrAll(e,o,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),M.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function s(e,o){function r(n,a){return M.coerce(e,o,x,n,a)}r("visible","skip"===e.method||Array.isArray(e.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}$.exports=function(e,o){k(e,o,{name:T,handleItemDefaults:p})}},13689:function($,I,t){"use strict";var M=t(39898),k=t(74875),l=t(7901),T=t(91424),x=t(71828),p=t(63893),s=t(44467).arrayEditor,e=t(18783).LINE_SPACING,o=t(75909),r=t(25849);function n(_){return _._index}function a(_,E){return+_.attr(o.menuIndexAttrName)===E._index}function i(_,E,L,C,P,z,j,R){E.active=j,s(_.layout,o.name,E).applyUpdate("active",j),"buttons"===E.type?h(_,C,null,null,E):"dropdown"===E.type&&(P.attr(o.menuIndexAttrName,"-1"),c(_,C,P,z,E),R||h(_,C,P,z,E))}function c(_,E,L,C,P){var z=x.ensureSingle(E,"g",o.headerClassName,function(N){N.style("pointer-events","all")}),j=P._dims,D={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},B={width:j.headerWidth,height:j.headerHeight};z.call(f,P,P.buttons[P.active]||o.blankHeaderOpts,_).call(u,P,D,B),x.ensureSingle(E,"text",o.headerArrowClassName,function(N){N.attr("text-anchor","end").call(T.font,P.font).text(o.arrowSymbol[P.direction])}).attr({x:j.headerWidth-o.arrowOffsetX+P.pad.l,y:j.headerHeight/2+o.textOffsetY+P.pad.t}),z.on("click",function(){L.call(S,String(a(L,P)?-1:P._index)),h(_,E,L,C,P)}),z.on("mouseover",function(){z.call(y)}),z.on("mouseout",function(){z.call(d,P)}),T.setTranslate(E,j.lx,j.ly)}function h(_,E,L,C,P){L||(L=E).attr("pointer-events","all");var z=-1==+L.attr(o.menuIndexAttrName)&&"buttons"!==P.type?[]:P.buttons,j="dropdown"===P.type?o.dropdownButtonClassName:o.buttonClassName,R=L.selectAll("g."+j).data(x.filterVisible(z)),V=R.enter().append("g").classed(j,!0),D=R.exit();"dropdown"===P.type?(V.attr("opacity","0").transition().attr("opacity","1"),D.transition().attr("opacity","0").remove()):D.remove();var B=0,N=0,U=P._dims,J=-1!==["up","down"].indexOf(P.direction);"dropdown"===P.type&&(J?N=U.headerHeight+o.gapButtonHeader:B=U.headerWidth+o.gapButtonHeader),"dropdown"===P.type&&"up"===P.direction&&(N=-o.gapButtonHeader+o.gapButton-U.openHeight),"dropdown"===P.type&&"left"===P.direction&&(B=-o.gapButtonHeader+o.gapButton-U.openWidth);var H,X,Q,Y={x:U.lx+B+P.pad.l,y:U.ly+N+P.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},q={l:Y.x+P.borderwidth,t:Y.y+P.borderwidth};R.each(function(H,X){var Q=M.select(this);Q.call(f,P,H,_).call(u,P,Y),Q.on("click",function(){M.event.defaultPrevented||(H.execute&&(H.args2&&P.active===X?(i(_,P,0,E,L,C,-1),k.executeAPICommand(_,H.method,H.args2)):(i(_,P,0,E,L,C,X),k.executeAPICommand(_,H.method,H.args))),_.emit("plotly_buttonclicked",{menu:P,button:H,active:P.active}))}),Q.on("mouseover",function(){Q.call(y)}),Q.on("mouseout",function(){Q.call(d,P),R.call(g,P)})}),R.call(g,P),J?(q.w=Math.max(U.openWidth,U.headerWidth),q.h=Y.y-q.t):(q.w=Y.x-q.l,q.h=Math.max(U.openHeight,U.headerHeight)),q.direction=P.direction,C&&(R.size()?function(H,X,Q,ne,re,ae){var se,pe,ke,me=re.direction,ue=re._dims,Ee=re.active;if("up"===me||"down"===me)for(pe=0,ke=0;ke<Ee;ke++)pe+=ue.heights[ke]+o.gapButton;else for(se=0,ke=0;ke<Ee;ke++)se+=ue.widths[ke]+o.gapButton;ne.enable(ae,se,pe),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,P,q):(Q=!!(H=C).vbar,(X=!!H.hbar)&&H.hbar.transition().attr("opacity","0").each("end",function(){X=!1,Q||H.disable()}),Q&&H.vbar.transition().attr("opacity","0").each("end",function(){Q=!1,X||H.disable()})))}function f(_,E,L,C){_.call(b,E).call(v,E,L,C)}function b(_,E){x.ensureSingle(_,"rect",o.itemRectClassName,function(L){L.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function v(_,E,L,C){var P=x.ensureSingle(_,"text",o.itemTextClassName,function(R){R.attr({"text-anchor":"start","data-notex":1})}),z=L.label,j=C._fullLayout._meta;j&&(z=x.templateString(z,j)),P.call(T.font,E.font).text(z).call(p.convertToTspans,C)}function g(_,E){var L=E.active;_.each(function(C,P){var z=M.select(this);P===L&&E.showactive&&z.select("rect."+o.itemRectClassName).call(l.fill,o.activeColor)})}function y(_){_.select("rect."+o.itemRectClassName).call(l.fill,o.hoverColor)}function d(_,E){_.select("rect."+o.itemRectClassName).call(l.fill,E.bgcolor)}function m(_,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+o.dropdownButtonClassName).data(x.filterVisible(E.buttons));C.enter().append("g").classed(o.dropdownButtonClassName,!0);var P=-1!==["up","down"].indexOf(E.direction);C.each(function(B,N){var U=M.select(this);U.call(f,E,B,_);var J=U.select("."+o.itemTextClassName),Y=J.node()&&T.bBox(J.node()).width,q=Math.max(Y+o.textPadX,o.minWidth),H=E.font.size*e,X=p.lineCount(J),Q=Math.max(H*X,o.minHeight)+o.textOffsetY;Q=Math.ceil(Q),q=Math.ceil(q),L.widths[N]=q,L.heights[N]=Q,L.height1=Math.max(L.height1,Q),L.width1=Math.max(L.width1,q),P?(L.totalWidth=Math.max(L.totalWidth,q),L.openWidth=L.totalWidth,L.totalHeight+=Q+o.gapButton,L.openHeight+=Q+o.gapButton):(L.totalWidth+=q+o.gapButton,L.openWidth+=q+o.gapButton,L.totalHeight=Math.max(L.totalHeight,Q),L.openHeight=L.totalHeight)}),P?L.totalHeight-=o.gapButton:L.totalWidth-=o.gapButton,L.headerWidth=L.width1+o.arrowPadX,L.headerHeight=L.height1,"dropdown"===E.type&&(P?(L.width1+=o.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=o.arrowPadX),C.remove();var z=L.totalWidth+E.pad.l+E.pad.r,j=L.totalHeight+E.pad.t+E.pad.b,R=_._fullLayout._size;L.lx=R.l+R.w*E.x,L.ly=R.t+R.h*(1-E.y);var V="left";x.isRightAnchor(E)&&(L.lx-=z,V="right"),x.isCenterAnchor(E)&&(L.lx-=z/2,V="center");var D="top";x.isBottomAnchor(E)&&(L.ly-=j,D="bottom"),x.isMiddleAnchor(E)&&(L.ly-=j/2,D="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),k.autoMargin(_,w(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[V]||0),r:z*({left:1,center:.5}[V]||0),b:j*({top:1,middle:.5}[D]||0),t:j*({bottom:1,middle:.5}[D]||0)})}function w(_){return o.autoMarginIdRoot+_._index}function u(_,E,L,C){C=C||{};var P=_.select("."+o.itemRectClassName),z=_.select("."+o.itemTextClassName),j=E.borderwidth,R=L.index,V=E._dims;T.setTranslate(_,j+L.x,j+L.y);var D=-1!==["up","down"].indexOf(E.direction),B=C.height||(D?V.heights[R]:V.height1);P.attr({x:0,y:0,width:C.width||(D?V.width1:V.widths[R]),height:B});var N=E.font.size*e,U=(p.lineCount(z)-1)*N/2;p.positionText(z,o.textOffsetX,B/2-U+o.textOffsetY),D?L.y+=V.heights[R]+L.yPad:L.x+=V.widths[R]+L.xPad,L.index++}function S(_,E){_.attr(o.menuIndexAttrName,E||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}$.exports=function(_){var E=_._fullLayout,L=x.filterVisible(E[o.name]);function C(N){k.autoMargin(_,w(N))}var P=E._menulayer.selectAll("g."+o.containerClassName).data(L.length>0?[0]:[]);if(P.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){M.select(this).selectAll("g."+o.headerGroupClassName).each(C)}).remove(),0!==L.length){var z=P.selectAll("g."+o.headerGroupClassName).data(L,n);z.enter().append("g").classed(o.headerGroupClassName,!0);for(var j=x.ensureSingle(P,"g",o.dropdownButtonGroupClassName,function(N){N.style("pointer-events","all")}),R=0;R<L.length;R++)m(_,L[R]);var B=new r(_,j,"updatemenus"+E._uid);z.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(S)),z.exit().each(function(N){j.call(S),C(N)}).remove(),z.each(function(N){var U=M.select(this),J="dropdown"===N.type?j:null;k.manageCommandObserver(_,N,N.buttons,function(Y){i(_,N,0,U,J,B,Y.index,!0)}),"dropdown"===N.type?(c(_,U,j,B,N),a(j,N)&&h(_,U,j,B,N)):h(_,U,null,null,N)})}}},20763:function($,I,t){"use strict";var M=t(75909);$.exports={moduleType:"component",name:M.name,layoutAttributes:t(7163),supplyLayoutDefaults:t(64897),draw:t(13689)}},25849:function($,I,t){"use strict";$.exports=x;var M=t(39898),k=t(7901),l=t(91424),T=t(71828);function x(p,s,e){this.gd=p,this.container=s,this.id=e,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}x.barWidth=2,x.barLength=20,x.barRadius=2,x.barPad=1,x.barColor="#808BA4",x.prototype.enable=function(p,s,e){var o=this.gd._fullLayout,r=o.width,n=o.height;this.position=p;var a,i,c,h,f=this.position.l,b=this.position.w,v=this.position.t,g=this.position.h,y=this.position.direction,d="down"===y,m="left"===y,w="up"===y,u=b,S=g;d||m||"right"===y||w||(this.position.direction="down",d=!0),d||w?(i=(a=f)+u,d?(c=v,S=(h=Math.min(c+S,n))-c):S=(h=v+S)-(c=Math.max(h-S,0))):(h=(c=v)+S,m?u=(i=f+u)-(a=Math.max(i-u,0)):(a=f,u=(i=Math.min(a+u,r))-a)),this._box={l:a,t:c,w:u,h:S};var _=b>u,E=x.barLength+2*x.barPad,L=x.barWidth+2*x.barPad,C=f,P=v+g;P+L>n&&(P=n-L);var z=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,x.barColor),_?(this.hbar=z.attr({rx:x.barRadius,ry:x.barRadius,x:C,y:P,width:E,height:L}),this._hbarXMin=C+E/2,this._hbarTranslateMax=u-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var j=g>S,R=x.barWidth+2*x.barPad,V=x.barLength+2*x.barPad,D=f+b,B=v;D+R>r&&(D=r-R);var N=this.container.selectAll("rect.scrollbar-vertical").data(j?[0]:[]);N.exit().on(".drag",null).remove(),N.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,x.barColor),j?(this.vbar=N.attr({rx:x.barRadius,ry:x.barRadius,x:D,y:B,width:R,height:V}),this._vbarYMin=B+V/2,this._vbarTranslateMax=S-V):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var U=this.id,J=a-.5,Y=j?i+R+.5:i+.5,q=c-.5,H=_?h+L+.5:h+.5,X=o._topdefs.selectAll("#"+U).data(_||j?[0]:[]);if(X.exit().remove(),X.enter().append("clipPath").attr("id",U).append("rect"),_||j?(this._clipRect=X.select("rect").attr({x:Math.floor(J),y:Math.floor(q),width:Math.ceil(Y)-Math.floor(J),height:Math.ceil(H)-Math.floor(q)}),this.container.call(l.setClipUrl,U,this.gd),this.bg.attr({x:f,y:v,width:b,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),_||j){var Q=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Q);var ne=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(ne),j&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(s,e)},x.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},x.prototype._onBoxDrag=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p-=M.event.dx),this.vbar&&(s-=M.event.dy),this.setTranslate(p,s)},x.prototype._onBoxWheel=function(){var p=this.translateX,s=this.translateY;this.hbar&&(p+=M.event.deltaY),this.vbar&&(s+=M.event.deltaY),this.setTranslate(p,s)},x.prototype._onBarDrag=function(){var p=this.translateX,s=this.translateY;if(this.hbar){var e=p+this._hbarXMin,o=e+this._hbarTranslateMax;p=(T.constrain(M.event.x,e,o)-e)/(o-e)*(this.position.w-this._box.w)}if(this.vbar){var r=s+this._vbarYMin,n=r+this._vbarTranslateMax;s=(T.constrain(M.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(p,s)},x.prototype.setTranslate=function(p,s){var e=this.position.w-this._box.w,o=this.position.h-this._box.h;p=T.constrain(p||0,0,e),s=T.constrain(s||0,0,o),this.translateX=p,this.translateY=s,this.container.call(l.setTranslate,this._box.l-this.position.l-p,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+p-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar&&this.hbar.call(l.setTranslate,p+p/e*this._hbarTranslateMax,s),this.vbar&&this.vbar.call(l.setTranslate,p,s+s/o*this._vbarTranslateMax)}},18783:function($){"use strict";$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function($){"use strict";$.exports={axisRefDescription:function(I,t,M){return["If set to a",I,"axis id (e.g. *"+I+"* or","*"+I+"2*), the `"+I+"` position refers to a",I,"coordinate. If set to *paper*, the `"+I+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+M+"). If set to a",I,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+I+"2 domain* refers to the domain of the second",I," axis and a",I,"position of 0.5 refers to the","point between the",t,"and the",M,"of the domain of the","second",I,"axis."].join(" ")}}},22372:function($){"use strict";$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},31562:function($){"use strict";$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function($){"use strict";$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function($){"use strict";$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function($){"use strict";$.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},37822:function($){"use strict";$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function($){"use strict";$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},77922:function($,I){"use strict";I.xmlns="http://www.w3.org/2000/xmlns/",I.svg="http://www.w3.org/2000/svg",I.xlink="http://www.w3.org/1999/xlink",I.svgAttrs={xmlns:I.svg,"xmlns:xlink":I.xlink}},8729:function($,I,t){"use strict";I.version=t(11506).version,t(7417),t(98847);for(var M=t(73972),k=I.register=M.register,l=t(10641),T=Object.keys(l),x=0;x<T.length;x++){var p=T[x];"_"!==p.charAt(0)&&(I[p]=l[p]),k({moduleType:"apiMethod",name:p,fn:l[p]})}k(t(67368)),k([t(2199),t(30211),t(32745),t(2468),t(47322),t(89853),t(68804),t(20763),t(23243),t(13137),t(97218),t(83312),t(37369),t(21081),t(12311),t(64168)]),k([t(92177),t(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),I.Icons=t(24255);var s=t(30211),e=t(74875);I.Plots={resize:e.resize,graphJson:e.graphJson,sendDataToCloud:e.sendDataToCloud},I.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},I.Snapshot=t(44511),I.PlotSchema=t(86281)},24255:function($){"use strict";$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function($,I){"use strict";I.isLeftAnchor=function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=.3333333333333333},I.isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>.3333333333333333&&t.x<.6666666666666666},I.isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=.6666666666666666},I.isTopAnchor=function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=.6666666666666666},I.isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>.3333333333333333&&t.y<.6666666666666666},I.isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=.3333333333333333}},26348:function($,I,t){"use strict";var M=t(64872),k=M.mod,l=M.modHalf,T=Math.PI,x=2*T;function p(r){return Math.abs(r[1]-r[0])>x-1e-14}function s(r,n){return l(n-r,x)}function e(r,n){if(p(n))return!0;var a,i;n[0]<n[1]?(a=n[0],i=n[1]):(a=n[1],i=n[0]),(a=k(a,x))>(i=k(i,x))&&(i+=x);var c=k(r,x),h=c+x;return c>=a&&c<=i||h>=a&&h<=i}function o(r,n,a,i,c,h,f){c=c||0,h=h||0;var b,v,g,y,d,m=p([a,i]);function w(E,L){return[E*Math.cos(L)+c,h-E*Math.sin(L)]}m?(b=0,v=T,g=x):a<i?(b=a,g=i):(b=i,g=a),r<n?(y=r,d=n):(y=n,d=r);var u,S=Math.abs(g-b)<=T?0:1;function _(E,L,C){return"A"+[E,E]+" "+[0,S,C]+" "+w(E,L)}return m?u=null===y?"M"+w(d,b)+_(d,v,0)+_(d,g,0)+"Z":"M"+w(y,b)+_(y,v,0)+_(y,g,0)+"ZM"+w(d,b)+_(d,v,1)+_(d,g,1)+"Z":null===y?(u="M"+w(d,b)+_(d,g,0),f&&(u+="L0,0Z")):u="M"+w(y,b)+"L"+w(d,b)+_(d,g,0)+"L"+w(y,g)+_(y,b,1)+"Z",u}$.exports={deg2rad:function(r){return r/180*T},rad2deg:function(r){return r/T*180},angleDelta:s,angleDist:function(r,n){return Math.abs(s(r,n))},isFullCircle:p,isAngleInsideSector:e,isPtInsideSector:function(r,n,a,i){return!!e(n,i)&&(a[0]<a[1]?(c=a[0],h=a[1]):(c=a[1],h=a[0]),r>=c&&r<=h);var c,h},pathArc:function(r,n,a,i,c){return o(null,r,n,a,i,c,0)},pathSector:function(r,n,a,i,c){return o(null,r,n,a,i,c,1)},pathAnnulus:function(r,n,a,i,c,h){return o(r,n,a,i,c,h,1)}}},73627:function($,I){"use strict";var t=Array.isArray,M=ArrayBuffer,k=DataView;function l(p){return M.isView(p)&&!(p instanceof k)}function T(p){return t(p)||l(p)}function x(p,s,e){if(T(p)){if(T(p[0])){for(var o=e,r=0;r<p.length;r++)o=s(o,p[r].length);return o}return p.length}return 0}I.isTypedArray=l,I.isArrayOrTypedArray=T,I.isArray1D=function(p){return!T(p[0])},I.ensureArray=function(p,s){return t(p)||(p=[]),p.length=s,p},I.concat=function(){var p,s,e,o,r,n,a,i,c=[],h=!0,f=0;for(e=0;e<arguments.length;e++)(n=(o=arguments[e]).length)&&(s?c.push(o):(s=o,r=n),t(o)?p=!1:(h=!1,f?p!==o.constructor&&(p=!1):p=o.constructor),f+=n);if(!f)return[];if(!c.length)return s;if(h)return s.concat.apply(s,c);if(p){for((a=new p(f)).set(s),e=0;e<c.length;e++)a.set(o=c[e],r),r+=o.length;return a}for(a=new Array(f),i=0;i<s.length;i++)a[i]=s[i];for(e=0;e<c.length;e++){for(o=c[e],i=0;i<o.length;i++)a[r+i]=o[i];r+=i}return a},I.maxRowLength=function(p){return x(p,Math.max,0)},I.minRowLength=function(p){return x(p,Math.min,1/0)}},95218:function($,I,t){"use strict";var M=t(92770),k=t(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(T){return"string"==typeof T&&(T=T.replace(l,"")),M(T)?Number(T):k}},33306:function($){"use strict";$.exports=function(I){var t=I._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},86367:function($){"use strict";$.exports=function(I){I._responsiveChartHandler&&(window.removeEventListener("resize",I._responsiveChartHandler),delete I._responsiveChartHandler)}},96554:function($,I,t){"use strict";var M=t(92770),k=t(84267),l=t(9012),T=t(63282),x=t(7901),p=t(37822).DESELECTDIM,s=t(65487),e=t(30587).counter,o=t(64872).modHalf,r=t(73627).isArrayOrTypedArray;function n(a,i){var c=I.valObjectMeta[i.valType];if(i.arrayOk&&r(a))return!0;if(c.validateFunction)return c.validateFunction(a,i);var h={},f=h;return c.coerceFunction(a,{set:function(v){f=v}},h,i),f!==h}I.valObjectMeta={data_array:{coerceFunction:function(a,i,c){r(a)?i.set(a):void 0!==c&&i.set(c)}},enumerated:{coerceFunction:function(a,i,c,h){h.coerceNumber&&(a=+a),-1===h.values.indexOf(a)?i.set(c):i.set(a)},validateFunction:function(a,i){i.coerceNumber&&(a=+a);for(var c=i.values,h=0;h<c.length;h++){var f=String(c[h]);if("/"===f.charAt(0)&&"/"===f.charAt(f.length-1)){if(new RegExp(f.substr(1,f.length-2)).test(a))return!0}else if(a===c[h])return!0}return!1}},boolean:{coerceFunction:function(a,i,c){i.set(!0===a||!1===a?a:c)}},number:{coerceFunction:function(a,i,c,h){!M(a)||void 0!==h.min&&a<h.min||void 0!==h.max&&a>h.max?i.set(c):i.set(+a)}},integer:{coerceFunction:function(a,i,c,h){a%1||!M(a)||void 0!==h.min&&a<h.min||void 0!==h.max&&a>h.max?i.set(c):i.set(+a)}},string:{coerceFunction:function(a,i,c,h){i.set("string"!=typeof a?!0!==h.strict&&"number"==typeof a?String(a):c:h.noBlank&&!a?c:a)}},color:{coerceFunction:function(a,i,c){k(a).isValid()?i.set(a):i.set(c)}},colorlist:{coerceFunction:function(a,i,c){Array.isArray(a)&&a.length&&a.every(function(h){return k(h).isValid()})?i.set(a):i.set(c)}},colorscale:{coerceFunction:function(a,i,c){i.set(T.get(a,c))}},angle:{coerceFunction:function(a,i,c){"auto"===a?i.set("auto"):M(a)?i.set(o(+a,360)):i.set(c)}},subplotid:{coerceFunction:function(a,i,c,h){var f=h.regex||e(c);"string"==typeof a&&f.test(a)?i.set(a):i.set(c)},validateFunction:function(a,i){var c=i.dflt;return a===c||"string"==typeof a&&!!e(c).test(a)}},flaglist:{coerceFunction:function(a,i,c,h){if(-1===(h.extras||[]).indexOf(a))if("string"==typeof a){for(var f=a.split("+"),b=0;b<f.length;){var v=f[b];-1===h.flags.indexOf(v)||f.indexOf(v)<b?f.splice(b,1):b++}i.set(f.length?f.join("+"):c)}else i.set(c);else i.set(a)}},any:{coerceFunction:function(a,i,c){i.set(void 0===a?c:a)}},info_array:{coerceFunction:function(a,i,c,h){function f(P,z,j){var R;return void 0===j&&(j=z.dflt),I.valObjectMeta[z.valType].coerceFunction(P,{set:function(D){R=D}},j,z),R}var b=2===h.dimensions||"1-2"===h.dimensions&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){var v,g,y,m,w,u=h.items,S=[],_=Array.isArray(u),E=_&&b&&Array.isArray(u[0]),L=b&&_&&!E,C=_&&!L?u.length:a.length;if(c=Array.isArray(c)?c:[],b)for(v=0;v<C;v++)for(S[v]=[],y=Array.isArray(a[v])?a[v]:[],m=L?u.length:_?u[v].length:y.length,g=0;g<m;g++)void 0!==(w=f(y[g],L?u[g]:_?u[v][g]:u,(c[v]||[])[g]))&&(S[v][g]=w);else for(v=0;v<C;v++)void 0!==(w=f(a[v],_?u[v]:u,c[v]))&&(S[v]=w);i.set(S)}else i.set(c)},validateFunction:function(a,i){if(!Array.isArray(a))return!1;var c=i.items,h=Array.isArray(c),f=2===i.dimensions;if(!i.freeLength&&a.length!==c.length)return!1;for(var b=0;b<a.length;b++)if(f){if(!Array.isArray(a[b])||!i.freeLength&&a[b].length!==c[b].length)return!1;for(var v=0;v<a[b].length;v++)if(!n(a[b][v],h?c[b][v]:c))return!1}else if(!n(a[b],h?c[b]:c))return!1;return!0}}},I.coerce=function(a,i,c,h,f){var b=s(c,h).get(),v=s(a,h),g=s(i,h),y=v.get(),d=i._template;if(void 0===y&&d&&(y=s(d,h).get(),d=0),void 0===f&&(f=b.dflt),b.arrayOk&&r(y))return g.set(y),y;var m=I.valObjectMeta[b.valType].coerceFunction;m(y,g,f,b);var w=g.get();return d&&w===f&&!n(y,b)&&(m(y=s(d,h).get(),g,f,b),w=g.get()),w},I.coerce2=function(a,i,c,h,f){var b=s(a,h),v=I.coerce(a,i,c,h,f);return null!=b.get()&&v},I.coerceFont=function(a,i,c){var h={};return h.family=a(i+".family",(c=c||{}).family),h.size=a(i+".size",c.size),h.color=a(i+".color",c.color),h},I.coercePattern=function(a,i,c,h){if(a(i+".shape")){a(i+".solidity"),a(i+".size");var f="overlay"===a(i+".fillmode");if(!h){var b=a(i+".bgcolor",f?c:void 0);a(i+".fgcolor",f?x.contrast(b):c)}a(i+".fgopacity",f?.5:1)}},I.coerceHoverinfo=function(a,i,c){var h,f=i._module.attributes,b=f.hoverinfo?f:l,v=b.hoverinfo;if(1===c._dataLength){var g="all"===v.dflt?v.flags.slice():v.dflt.split("+");g.splice(g.indexOf("name"),1),h=g.join("+")}return I.coerce(a,i,b,"hoverinfo",h)},I.coerceSelectionMarkerOpacity=function(a,i){if(a.marker){var c,h,f=a.marker.opacity;void 0!==f&&(r(f)||a.selected||a.unselected||(c=f,h=p*f),i("selected.marker.opacity",c),i("unselected.marker.opacity",h))}},I.validate=n},41631:function($,I,t){"use strict";var M,k,l=t(84096).i$,T=t(92770),x=t(47769),p=t(64872).mod,s=t(50606),e=s.BADNUM,o=s.ONEDAY,r=s.ONEHOUR,n=s.ONEMIN,a=s.ONESEC,i=s.EPOCHJD,c=t(73972),h=t(84096).g0,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=(new Date).getFullYear()-70;function g(z){return z&&c.componentsRegistry.calendars&&"string"==typeof z&&"gregorian"!==z}function y(z,j){return String(z+Math.pow(10,j)).substr(1)}I.dateTick0=function(z,j){var D,B,R=(B=!!j,g(D=z)?B?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[D]:c.getComponentMethod("calendars","CANONICAL_TICK")[D]:B?"2000-01-02":"2000-01-01");if(j<2)return R;var V=I.dateTime2ms(R,z);return I.ms2DateTime(V+=o*(j-1),0,z)},I.dfltRange=function(z){return g(z)?c.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},I.isJSDate=function(z){return"object"==typeof z&&null!==z&&"function"==typeof z.getTime},I.dateTime2ms=function(z,j){if(I.isJSDate(z)){var R=z.getTimezoneOffset()*n,V=(z.getUTCMinutes()-z.getMinutes())*n+(z.getUTCSeconds()-z.getSeconds())*a+(z.getUTCMilliseconds()-z.getMilliseconds());if(V){var D=3*n;R=R-D/2+p(V-R+D/2,D)}return(z=Number(z)-R)>=M&&z<=k?z:e}if("string"!=typeof z&&"number"!=typeof z)return e;z=String(z);var B=g(j),N=z.charAt(0);!B||"G"!==N&&"g"!==N||(z=z.substr(1),j="");var U=B&&"chinese"===j.substr(0,7),J=z.match(U?b:f);if(!J)return e;var Y=J[1],q=J[3]||"1",H=Number(J[5]||1),X=Number(J[7]||0),Q=Number(J[9]||0),ne=Number(J[11]||0);if(B){if(2===Y.length)return e;var re;Y=Number(Y);try{var ae=c.getComponentMethod("calendars","getCal")(j);if(U){var se="i"===q.charAt(q.length-1);q=parseInt(q,10),re=ae.newDate(Y,ae.toMonthIndex(Y,q,se),H)}else re=ae.newDate(Y,Number(q),H)}catch{return e}return re?(re.toJD()-i)*o+X*r+Q*n+ne*a:e}Y=2===Y.length?(Number(Y)+2e3-v)%100+v:Number(Y),q-=1;var pe=new Date(Date.UTC(2e3,q,H,X,Q));return pe.setUTCFullYear(Y),pe.getUTCMonth()!==q||pe.getUTCDate()!==H?e:pe.getTime()+ne*a},M=I.MIN_MS=I.dateTime2ms("-9999"),k=I.MAX_MS=I.dateTime2ms("9999-12-31 23:59:59.9999"),I.isDateTime=function(z,j){return I.dateTime2ms(z,j)!==e};var d=90*o,m=3*r,w=5*n;function u(z,j,R,V,D){if((j||R||V||D)&&(z+=" "+y(j,2)+":"+y(R,2),(V||D)&&(z+=":"+y(V,2),D))){for(var B=4;D%10==0;)B-=1,D/=10;z+="."+y(D,B)}return z}I.ms2DateTime=function(z,j,R){if("number"!=typeof z||!(z>=M&&z<=k))return e;j||(j=0);var V,D,B,N,U,J,Y=Math.floor(10*p(z+.05,1)),q=Math.round(z-Y/10);if(g(R)){var H=Math.floor(q/o)+i,X=Math.floor(p(z,o));try{V=c.getComponentMethod("calendars","getCal")(R).fromJD(H).formatDate("yyyy-mm-dd")}catch{V=h("G%Y-%m-%d")(new Date(q))}if("-"===V.charAt(0))for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;D=j<d?Math.floor(X/r):0,B=j<d?Math.floor(X%r/n):0,N=j<m?Math.floor(X%n/a):0,U=j<w?X%a*10+Y:0}else J=new Date(q),V=h("%Y-%m-%d")(J),D=j<d?J.getUTCHours():0,B=j<d?J.getUTCMinutes():0,N=j<m?J.getUTCSeconds():0,U=j<w?10*J.getUTCMilliseconds()+Y:0;return u(V,D,B,N,U)},I.ms2DateTimeLocal=function(z){if(!(z>=M+o&&z<=k-o))return e;var j=Math.floor(10*p(z+.05,1)),R=new Date(Math.round(z-j/10));return u(l("%Y-%m-%d")(R),R.getHours(),R.getMinutes(),R.getSeconds(),10*R.getUTCMilliseconds()+j)},I.cleanDate=function(z,j,R){if(z===e)return j;if(I.isJSDate(z)||"number"==typeof z&&isFinite(z)){if(g(R))return x.error("JS Dates and milliseconds are incompatible with world calendars",z),j;if(!(z=I.ms2DateTimeLocal(+z))&&void 0!==j)return j}else if(!I.isDateTime(z,R))return x.error("unrecognized date",z),j;return z};var S=/%\d?f/g,_=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(z,j,R,V){z=z.replace(S,function(B){var N=Math.min(+B.charAt(1)||6,6);return(j/1e3%1+2).toFixed(N).substr(2).replace(/0+$/,"")||"0"});var D=new Date(Math.floor(j+.05));if(z=z.replace(_,function(){return E[R("%q")(D)]}),g(V))try{z=c.getComponentMethod("calendars","worldCalFmt")(z,j,V)}catch{return"Invalid"}return R(z)(D)}var C=[59,59.9,59.99,59.999,59.9999];I.formatDate=function(z,j,R,V,D,B){if(D=g(D)&&D,!j)if("y"===R)j=B.year;else if("m"===R)j=B.month;else{if("d"!==R)return function(N,U){var J=p(N+.05,o),Y=y(Math.floor(J/r),2)+":"+y(p(Math.floor(J/n),60),2);if("M"!==U){T(U)||(U=0);var q=(100+Math.min(p(N/a,60),C[U])).toFixed(U).substr(1);U>0&&(q=q.replace(/0+$/,"").replace(/[\.]$/,"")),Y+=":"+q}return Y}(z,R)+"\n"+L(B.dayMonthYear,z,V,D);j=B.dayMonth+"\n"+B.year}return L(j,z,V,D)};var P=3*o;I.incrementMonth=function(z,j,R){R=g(R)&&R;var V=p(z,o);if(z=Math.round(z-V),R)try{var D=Math.round(z/o)+i,B=c.getComponentMethod("calendars","getCal")(R),N=B.fromJD(D);return j%12?B.add(N,j,"m"):B.add(N,j/12,"y"),(N.toJD()-i)*o+V}catch{x.error("invalid ms "+z+" in calendar "+R)}var U=new Date(z+P);return U.setUTCMonth(U.getUTCMonth()+j)+V-P},I.findExactDates=function(z,j){for(var R,V,D=0,B=0,N=0,U=0,J=g(j)&&c.getComponentMethod("calendars","getCal")(j),Y=0;Y<z.length;Y++)if(T(V=z[Y])){if(!(V%o))if(J)try{1===(R=J.fromJD(V/o+i)).day()?1===R.month()?D++:B++:N++}catch{}else 1===(R=new Date(V)).getUTCDate()?0===R.getUTCMonth()?D++:B++:N++}else U++;N+=B+=D;var q=z.length-U;return{exactYears:D/q,exactMonths:B/q,exactDays:N/q}}},24401:function($,I,t){"use strict";var M=t(39898),k=t(47769),l=t(35657),T=t(79576);function x(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function p(r,n,a){var i="plotly.js-style-"+r,c=document.getElementById(i);c||((c=document.createElement("style")).setAttribute("id",i),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var h=c.sheet;h.insertRule?h.insertRule(n+"{"+a+"}",0):h.addRule?h.addRule(n,a,0):k.warn("addStyleRule failed")}function s(r){var n=window.getComputedStyle(r,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return"none"===a?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function e(r){for(var n=[];o(r);)n.push(r),r=r.parentNode;return n}function o(r){return r&&(r instanceof Element||r instanceof HTMLElement)}$.exports={getGraphDiv:function(r){var n;if("string"==typeof r){if(null===(n=document.getElementById(r)))throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(null==r)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=M.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:x,addStyleRule:function(r,n){p("global",r,n)},addRelatedStyleRule:p,deleteRelatedStyleRule:function(r){var a=document.getElementById("plotly.js-style-"+r);a&&x(a)},getFullTransformMatrix:function(r){var n=e(r),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(i){var c=s(i);if(c){var h=l.convertCssMatrix(c);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:s,getElementAndAncestors:e,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function($,I,t){"use strict";var M=t(15398).EventEmitter;$.exports={init:function(l){if(l._ev instanceof M)return l;var T=new M,x=new M;return l._ev=T,l._internalEv=x,l.on=T.on.bind(T),l.once=T.once.bind(T),l.removeListener=T.removeListener.bind(T),l.removeAllListeners=T.removeAllListeners.bind(T),l._internalOn=x.on.bind(x),l._internalOnce=x.once.bind(x),l._removeInternalListener=x.removeListener.bind(x),l._removeAllInternalListeners=x.removeAllListeners.bind(x),l.emit=function(p,s){typeof jQuery<"u"&&jQuery(l).trigger(p,s),T.emit(p,s),x.emit(p,s)},l},triggerHandler:function(l,T,x){var p,s;typeof jQuery<"u"&&(p=jQuery(l).triggerHandler(T,x));var e=l._ev;if(!e)return p;var o,r=e._events[T];if(!r)return p;function n(a){return a.listener?(e.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(e,[x]))):a.apply(e,[x])}for(r=Array.isArray(r)?r:[r],o=0;o<r.length-1;o++)n(r[o]);return s=n(r[o]),void 0!==p?p:s},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}}},1426:function($,I,t){"use strict";var M=t(41965),k=Array.isArray;function l(T,x,p,s){var e,o,r,n,a,i,h=T[0],f=T.length;if(2===f&&k(h)&&k(T[1])&&0===h.length){if(function(v,g){var y,d;for(y=0;y<v.length;y++){if(null!==(d=v[y])&&"object"==typeof d)return!1;void 0!==d&&(g[y]=d)}return!0}(T[1],h))return h;h.splice(0,h.length)}for(var b=1;b<f;b++)for(o in e=T[b])r=h[o],n=e[o],s&&k(n)?h[o]=n:x&&n&&(M(n)||(a=k(n)))?(a?(a=!1,i=r&&k(r)?r:[]):i=r&&M(r)?r:{},h[o]=l([i,n],x,p,s)):(void 0!==n||p)&&(h[o]=n);return h}I.extendFlat=function(){return l(arguments,!1,!1,!1)},I.extendDeep=function(){return l(arguments,!0,!1,!1)},I.extendDeepAll=function(){return l(arguments,!0,!0,!1)},I.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function($){"use strict";$.exports=function(I){for(var t={},M=[],k=0,l=0;l<I.length;l++){var T=I[l];1!==t[T]&&(t[T]=1,M[k++]=T)}return M}},76756:function($){"use strict";function I(M){return!0===M.visible}function t(M){var k=M[0].trace;return!0===k.visible&&0!==k._length}$.exports=function(M){for(var k,l=(k=M,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?t:I),T=[],x=0;x<M.length;x++){var p=M[x];l(p)&&T.push(p)}return T}},41327:function($,I,t){"use strict";var M=t(39898),k=t(24138),l=t(30774),T=t(29261),x=t(85268),p=t(23389),s=t(47769),e=t(41965),o=t(65487),r=t(61082),n=Object.keys(k),a={"ISO-3":p,"USA-states":p,"country names":function(c){for(var h=0;h<n.length;h++){var f=n[h];if(new RegExp(k[f]).test(c.trim().toLowerCase()))return f}return s.log("Unrecognized country name: "+c+"."),!1}};function i(c){var h=c.geojson,f=window.PlotlyGeoAssets||{},b="string"==typeof h?f[h]:h;return e(b)?b:(s.error("Oops ... something went wrong when fetching "+h),!1)}$.exports={locationToFeature:function(c,h,f){if(!h||"string"!=typeof h)return!1;var b,v,g,y=a[c](h);if(y){if("USA-states"===c)for(b=[],g=0;g<f.length;g++)(v=f[g]).properties&&v.properties.gu&&"USA"===v.properties.gu&&b.push(v);else b=f;for(g=0;g<b.length;g++)if((v=b[g]).id===y)return v;s.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var h,f,b,v,g=c.geometry,y=g.coordinates,d=c.id,m=[];function w(u){for(var S=0;S<u.length-1;S++)if(u[S][0]>0&&u[S+1][0]<0)return S;return null}switch(h="RUS"===d||"FJI"===d?function(u){var S;if(null===w(u))S=u;else for(S=new Array(u.length),v=0;v<u.length;v++)S[v]=[u[v][0]<0?u[v][0]+360:u[v][0],u[v][1]];m.push(r.tester(S))}:"ATA"===d?function(u){var S=w(u);if(null===S)return m.push(r.tester(u));var _=new Array(u.length+1),E=0;for(v=0;v<u.length;v++)v>S?_[E++]=[u[v][0]+360,u[v][1]]:v===S?(_[E++]=u[v],_[E++]=[u[v][0],-90]):_[E++]=u[v];var L=r.tester(_);L.pts.pop(),m.push(L)}:function(u){m.push(r.tester(u))},g.type){case"MultiPolygon":for(f=0;f<y.length;f++)for(b=0;b<y[f].length;b++)h(y[f][b]);break;case"Polygon":for(f=0;f<y.length;f++)h(y[f])}return m},getTraceGeojson:i,extractTraceFeature:function(c){var h=c[0].trace,f=i(h);if(!f)return!1;var b,v={},g=[];for(b=0;b<h._length;b++){var y=c[b];(y.loc||0===y.loc)&&(v[y.loc]=y)}function d(u){var S=o(u,h.featureidkey||"id").get(),_=v[S];if(_){var E=u.geometry;if("Polygon"===E.type||"MultiPolygon"===E.type){var L={type:"Feature",id:S,geometry:E,properties:{}};L.properties.ct=function(C){var P,z=C.geometry;if("MultiPolygon"===z.type)for(var j=z.coordinates,R=0,V=0;V<j.length;V++){var D={type:"Polygon",coordinates:j[V]},B=l.default(D);B>R&&(R=B,P=D)}else P=z;return T.default(P).geometry.coordinates}(L),_.fIn=u,_.fOut=L,g.push(L)}else s.log(["Location",_.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete v[S]}switch(f.type){case"FeatureCollection":var m=f.features;for(b=0;b<m.length;b++)d(m[b]);break;case"Feature":d(f);break;default:return s.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in v)s.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(c){var h=window.PlotlyGeoAssets||{},f=[];function b(d){return new Promise(function(m,w){M.json(d,function(u,S){return u?(delete h[d],w(new Error(404===u.status?'GeoJSON at URL "'+d+'" does not exist.':"Unexpected error while fetching from "+d))):(h[d]=S,m(S))})})}function v(d){return new Promise(function(m,w){var u=0,S=setInterval(function(){return h[d]&&"pending"!==h[d]?(clearInterval(S),m(h[d])):u>100?(clearInterval(S),w("Unexpected error while fetching from "+d)):void u++},50)})}for(var g=0;g<c.length;g++){var y=c[g][0].trace.geojson;"string"==typeof y&&(h[y]?"pending"===h[y]&&f.push(v(y)):(h[y]="pending",f.push(b(y))))}return f},computeBbox:function(c){return x.default(c)}}},18214:function($,I,t){"use strict";var M=t(50606).BADNUM;I.calcTraceToLineCoords=function(k){for(var l=k[0].trace.connectgaps,T=[],x=[],p=0;p<k.length;p++){var s=k[p].lonlat;s[0]!==M?x.push(s):!l&&x.length>0&&(T.push(x),x=[])}return x.length>0&&T.push(x),T},I.makeLine=function(k){return 1===k.length?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},I.makePolygon=function(k){if(1===k.length)return{type:"Polygon",coordinates:k};for(var l=new Array(k.length),T=0;T<k.length;T++)l[T]=[k[T]];return{type:"MultiPolygon",coordinates:l}},I.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function($,I,t){"use strict";var M,k,l,T=t(64872).mod;function x(s,e,o,r,n,a,i,c){var h=o-s,f=n-s,b=i-n,v=r-e,g=a-e,y=c-a,d=h*y-b*v;if(0===d)return null;var m=(f*y-b*g)/d,w=(f*v-h*g)/d;return w<0||w>1||m<0||m>1?null:{x:s+h*m,y:e+v*m}}function p(s,e,o,r,n){var a=r*s+n*e;if(a<0)return r*r+n*n;if(a>o){var i=r-s,c=n-e;return i*i+c*c}var h=r*e-n*s;return h*h/o}I.segmentsIntersect=x,I.segmentDistance=function(s,e,o,r,n,a,i,c){if(x(s,e,o,r,n,a,i,c))return 0;var h=o-s,f=r-e,b=i-n,v=c-a,g=h*h+f*f,y=b*b+v*v,d=Math.min(p(h,f,g,n-s,a-e),p(h,f,g,i-s,c-e),p(b,v,y,s-n,e-a),p(b,v,y,o-n,r-a));return Math.sqrt(d)},I.getTextLocation=function(s,e,o,r){if(s===k&&r===l||(M={},k=s,l=r),M[o])return M[o];var n=s.getPointAtLength(T(o-r/2,e)),a=s.getPointAtLength(T(o+r/2,e)),i=Math.atan((a.y-n.y)/(a.x-n.x)),c=s.getPointAtLength(T(o,e)),h={x:(4*c.x+n.x+a.x)/6,y:(4*c.y+n.y+a.y)/6,theta:i};return M[o]=h,h},I.clearLocationCache=function(){k=null},I.getVisibleSegment=function(s,e,o){var r,n,a=e.left,i=e.right,c=e.top,h=e.bottom,f=0,b=s.getTotalLength(),v=b;function g(d){var m=s.getPointAtLength(d);0===d?r=m:d===b&&(n=m);var w=m.x<a?a-m.x:m.x>i?m.x-i:0,u=m.y<c?c-m.y:m.y>h?m.y-h:0;return Math.sqrt(w*w+u*u)}for(var y=g(f);y;){if((f+=y+o)>v)return;y=g(f)}for(y=g(v);y;){if(f>(v-=y+o))return;y=g(v)}return{min:f,max:v,len:v-f,total:b,isClosed:0===f&&v===b&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},I.findPointOnPath=function(s,e,o,r){for(var n,a,i,c=(r=r||{}).pathLength||s.getTotalLength(),h=r.tolerance||.001,f=r.iterationLimit||30,b=s.getPointAtLength(0)[o]>s.getPointAtLength(c)[o]?-1:1,v=0,g=0,y=c;v<f;){if(i=(a=s.getPointAtLength(n=(g+y)/2))[o]-e,Math.abs(i)<h)return a;b*i>0?y=n:g=n,v++}return a}},81697:function($,I,t){"use strict";var M=t(92770),k=t(84267),l=t(25075),T=t(21081),x=t(22399).defaultLine,p=t(73627).isArrayOrTypedArray,s=l(x);function e(n,a){var i=n;return i[3]*=a,i}function o(n){if(M(n))return s;var a=l(n);return a.length?a:s}function r(n){return M(n)?n:1}$.exports={formatColor:function(n,a,i){var c,h,f,b,v,g=n.color,y=p(g),d=p(a),m=T.extractOpts(n),w=[];if(c=void 0!==m.colorscale?T.makeColorScaleFuncFromTrace(n):o,h=y?function(S,_){return void 0===S[_]?s:l(c(S[_]))}:o,f=d?function(S,_){return void 0===S[_]?1:r(S[_])}:r,y||d)for(var u=0;u<i;u++)b=h(g,u),v=f(a,u),w[u]=e(b,v);else w=e(l(g),a);return w},parseColorScale:function(n){var a=T.extractOpts(n),i=a.colorscale;return a.reversescale&&(i=T.flipScale(a.colorscale)),i.map(function(c){var h=c[0],f=k(c[1]).toRgb();return{index:h,rgb:[f.r,f.g,f.b,f.a]}})}}},28984:function($,I,t){"use strict";var M=t(23389);function k(l){return[l]}$.exports={keyFun:function(l){return l.key},repeat:k,descend:M,wrap:k,unwrap:function(l){return l[0]}}},23389:function($){"use strict";$.exports=function(I){return I}},39240:function($){"use strict";$.exports=function(I,t){if(!t)return I;var M=1/Math.abs(t),k=M>1?(M*I+M*t)/M:I+t,l=String(k).length;if(l>16){var T=String(t).length;if(l>=String(I).length+T){var x=parseFloat(k).toPrecision(12);-1===x.indexOf("e+")&&(k=+x)}}return k}},71828:function($,I,t){"use strict";var M=t(39898),k=t(84096).g0,l=t(60721).WU,T=t(92770),x=t(50606),p=x.FP_SAFE,s=-p,e=x.BADNUM,o=$.exports={};o.adjustFormat=function(Y){return!Y||/^\d[.]\df/.test(Y)||/[.]\d%/.test(Y)?Y:"0.f"===Y?"~f":/^\d%/.test(Y)?"~%":/^\ds/.test(Y)?"~s":!/^[~,.0$]/.test(Y)&&/[&fps]/.test(Y)?"~"+Y:Y};var r={};o.warnBadFormat=function(Y){var q=String(Y);r[q]||(r[q]=1,o.warn('encountered bad format: "'+q+'"'))},o.noFormat=function(Y){return String(Y)},o.numberFormat=function(Y){var q;try{q=l(o.adjustFormat(Y))}catch{return o.warnBadFormat(Y),o.noFormat}return q},o.nestedProperty=t(65487),o.keyedContainer=t(66636),o.relativeAttr=t(6962),o.isPlainObject=t(41965),o.toLogRange=t(58163),o.relinkPrivateKeys=t(51332);var n=t(73627);o.isTypedArray=n.isTypedArray,o.isArrayOrTypedArray=n.isArrayOrTypedArray,o.isArray1D=n.isArray1D,o.ensureArray=n.ensureArray,o.concat=n.concat,o.maxRowLength=n.maxRowLength,o.minRowLength=n.minRowLength;var a=t(64872);o.mod=a.mod,o.modHalf=a.modHalf;var i=t(96554);o.valObjectMeta=i.valObjectMeta,o.coerce=i.coerce,o.coerce2=i.coerce2,o.coerceFont=i.coerceFont,o.coercePattern=i.coercePattern,o.coerceHoverinfo=i.coerceHoverinfo,o.coerceSelectionMarkerOpacity=i.coerceSelectionMarkerOpacity,o.validate=i.validate;var c=t(41631);o.dateTime2ms=c.dateTime2ms,o.isDateTime=c.isDateTime,o.ms2DateTime=c.ms2DateTime,o.ms2DateTimeLocal=c.ms2DateTimeLocal,o.cleanDate=c.cleanDate,o.isJSDate=c.isJSDate,o.formatDate=c.formatDate,o.incrementMonth=c.incrementMonth,o.dateTick0=c.dateTick0,o.dfltRange=c.dfltRange,o.findExactDates=c.findExactDates,o.MIN_MS=c.MIN_MS,o.MAX_MS=c.MAX_MS;var h=t(65888);o.findBin=h.findBin,o.sorterAsc=h.sorterAsc,o.sorterDes=h.sorterDes,o.distinctVals=h.distinctVals,o.roundUp=h.roundUp,o.sort=h.sort,o.findIndexOfMin=h.findIndexOfMin,o.sortObjectKeys=t(78607);var f=t(80038);o.aggNums=f.aggNums,o.len=f.len,o.mean=f.mean,o.median=f.median,o.midRange=f.midRange,o.variance=f.variance,o.stdev=f.stdev,o.interp=f.interp;var b=t(35657);o.init2dArray=b.init2dArray,o.transposeRagged=b.transposeRagged,o.dot=b.dot,o.translationMatrix=b.translationMatrix,o.rotationMatrix=b.rotationMatrix,o.rotationXYMatrix=b.rotationXYMatrix,o.apply3DTransform=b.apply3DTransform,o.apply2DTransform=b.apply2DTransform,o.apply2DTransform2=b.apply2DTransform2,o.convertCssMatrix=b.convertCssMatrix,o.inverseTransformMatrix=b.inverseTransformMatrix;var v=t(26348);o.deg2rad=v.deg2rad,o.rad2deg=v.rad2deg,o.angleDelta=v.angleDelta,o.angleDist=v.angleDist,o.isFullCircle=v.isFullCircle,o.isAngleInsideSector=v.isAngleInsideSector,o.isPtInsideSector=v.isPtInsideSector,o.pathArc=v.pathArc,o.pathSector=v.pathSector,o.pathAnnulus=v.pathAnnulus;var g=t(99863);o.isLeftAnchor=g.isLeftAnchor,o.isCenterAnchor=g.isCenterAnchor,o.isRightAnchor=g.isRightAnchor,o.isTopAnchor=g.isTopAnchor,o.isMiddleAnchor=g.isMiddleAnchor,o.isBottomAnchor=g.isBottomAnchor;var y=t(87642);o.segmentsIntersect=y.segmentsIntersect,o.segmentDistance=y.segmentDistance,o.getTextLocation=y.getTextLocation,o.clearLocationCache=y.clearLocationCache,o.getVisibleSegment=y.getVisibleSegment,o.findPointOnPath=y.findPointOnPath;var d=t(1426);o.extendFlat=d.extendFlat,o.extendDeep=d.extendDeep,o.extendDeepAll=d.extendDeepAll,o.extendDeepNoArrays=d.extendDeepNoArrays;var m=t(47769);o.log=m.log,o.warn=m.warn,o.error=m.error;var w=t(30587);o.counterRegex=w.counter;var u=t(79990);o.throttle=u.throttle,o.throttleDone=u.done,o.clearThrottle=u.clear;var S=t(24401);function _(Y){var q={};for(var H in Y)for(var X=Y[H],Q=0;Q<X.length;Q++)q[X[Q]]=+H;return q}o.getGraphDiv=S.getGraphDiv,o.isPlotDiv=S.isPlotDiv,o.removeElement=S.removeElement,o.addStyleRule=S.addStyleRule,o.addRelatedStyleRule=S.addRelatedStyleRule,o.deleteRelatedStyleRule=S.deleteRelatedStyleRule,o.getFullTransformMatrix=S.getFullTransformMatrix,o.getElementTransformMatrix=S.getElementTransformMatrix,o.getElementAndAncestors=S.getElementAndAncestors,o.equalDomRects=S.equalDomRects,o.clearResponsive=t(86367),o.preserveDrawingBuffer=t(45142),o.makeTraceGroups=t(77310),o._=t(15867),o.notifier=t(75046),o.filterUnique=t(75744),o.filterVisible=t(76756),o.pushUnique=t(75138),o.increment=t(39240),o.cleanNumber=t(95218),o.ensureNumber=function(Y){return T(Y)?(Y=Number(Y))>p||Y<s?e:Y:e},o.isIndex=function(Y,q){return!(void 0!==q&&Y>=q)&&T(Y)&&Y>=0&&Y%1==0},o.noop=t(64213),o.identity=t(23389),o.repeat=function(Y,q){for(var H=new Array(q),X=0;X<q;X++)H[X]=Y;return H},o.swapAttrs=function(Y,q,H,X){H||(H="x"),X||(X="y");for(var Q=0;Q<q.length;Q++){var ne=q[Q],re=o.nestedProperty(Y,ne.replace("?",H)),ae=o.nestedProperty(Y,ne.replace("?",X)),se=re.get();re.set(ae.get()),ae.set(se)}},o.raiseToTop=function(Y){Y.parentNode.appendChild(Y)},o.cancelTransition=function(Y){return Y.transition().duration(0)},o.constrain=function(Y,q,H){return q>H?Math.max(H,Math.min(q,Y)):Math.max(q,Math.min(H,Y))},o.bBoxIntersect=function(Y,q,H){return Y.left<=q.right+(H=H||0)&&q.left<=Y.right+H&&Y.top<=q.bottom+H&&q.top<=Y.bottom+H},o.simpleMap=function(Y,q,H,X,Q){for(var ne=Y.length,re=new Array(ne),ae=0;ae<ne;ae++)re[ae]=q(Y[ae],H,X,Q);return re},o.randstr=function Y(q,H,X,Q){if(X||(X=16),void 0===H&&(H=24),H<=0)return"0";var ne,re,ae=Math.log(Math.pow(2,H))/Math.log(X),se="";for(ne=2;ae===1/0;ne*=2)ae=Math.log(Math.pow(2,H/ne))/Math.log(X)*ne;var pe=ae-Math.floor(ae);for(ne=0;ne<Math.floor(ae);ne++)se=Math.floor(Math.random()*X).toString(X)+se;pe&&(re=Math.pow(X,pe),se=Math.floor(Math.random()*re).toString(X)+se);var ke=parseInt(se,X);return q&&q[se]||ke!==1/0&&ke>=Math.pow(2,H)?Q>10?(o.warn("randstr failed uniqueness"),se):Y(q,H,X,(Q||0)+1):se},o.OptionControl=function(Y,q){Y||(Y={}),q||(q="opt");var H={optionList:[],_newoption:function(X){X[q]=Y,H[X.name]=X,H.optionList.push(X)}};return H["_"+q]=Y,H},o.smooth=function(Y,q){if((q=Math.round(q)||0)<2)return Y;var H,X,Q,ne,re=Y.length,ae=2*re,se=2*q-1,pe=new Array(se),ke=new Array(re);for(H=0;H<se;H++)pe[H]=(1-Math.cos(Math.PI*(H+1)/q))/(2*q);for(H=0;H<re;H++){for(ne=0,X=0;X<se;X++)(Q=H+X+1-q)<-re?Q-=ae*Math.round(Q/ae):Q>=ae&&(Q-=ae*Math.floor(Q/ae)),Q<0?Q=-1-Q:Q>=re&&(Q=ae-1-Q),ne+=Y[Q]*pe[X];ke[H]=ne}return ke},o.syncOrAsync=function(Y,q,H){var X;function Q(){return o.syncOrAsync(Y,q,H)}for(;Y.length;)if((X=(0,Y.splice(0,1)[0])(q))&&X.then)return X.then(Q);return H&&H(q)},o.stripTrailingSlash=function(Y){return"/"===Y.substr(-1)?Y.substr(0,Y.length-1):Y},o.noneOrAll=function(Y,q,H){if(Y){var X,Q=!1,ne=!0;for(X=0;X<H.length;X++)null!=Y[H[X]]?Q=!0:ne=!1;if(Q&&!ne)for(X=0;X<H.length;X++)Y[H[X]]=q[H[X]]}},o.mergeArray=function(Y,q,H,X){var Q="function"==typeof X;if(o.isArrayOrTypedArray(Y))for(var ne=Math.min(Y.length,q.length),re=0;re<ne;re++){var ae=Y[re];q[re][H]=Q?X(ae):ae}},o.mergeArrayCastPositive=function(Y,q,H){return o.mergeArray(Y,q,H,function(X){var Q=+X;return isFinite(Q)&&Q>0?Q:0})},o.fillArray=function(Y,q,H,X){if(X=X||o.identity,o.isArrayOrTypedArray(Y))for(var Q=0;Q<q.length;Q++)q[Q][H]=X(Y[Q])},o.castOption=function(Y,q,H,X){X=X||o.identity;var Q=o.nestedProperty(Y,H).get();return o.isArrayOrTypedArray(Q)?Array.isArray(q)&&o.isArrayOrTypedArray(Q[q[0]])?X(Q[q[0]][q[1]]):X(Q[q]):Q},o.extractOption=function(Y,q,H,X){if(H in Y)return Y[H];var Q=o.nestedProperty(q,X).get();return Array.isArray(Q)?void 0:Q},o.tagSelected=function(Y,q,H){var X,Q,ne=q.selectedpoints,re=q._indexToPoints;re&&(X=_(re));for(var ae=0;ae<ne.length;ae++){var se=ne[ae];if(o.isIndex(se)||o.isArrayOrTypedArray(se)&&o.isIndex(se[0])&&o.isIndex(se[1])){var pe=X?X[se]:se,ke=H?H[pe]:pe;void 0!==(Q=ke)&&Q<Y.length&&(Y[ke].selected=1)}}},o.selIndices2selPoints=function(Y){var q=Y.selectedpoints,H=Y._indexToPoints;if(H){for(var X=_(H),Q=[],ne=0;ne<q.length;ne++){var re=q[ne];if(o.isIndex(re)){var ae=X[re];o.isIndex(ae)&&Q.push(ae)}}return Q}return q},o.getTargetArray=function(Y,q){var H=q.target;if("string"==typeof H&&H){var X=o.nestedProperty(Y,H).get();return!!Array.isArray(X)&&X}return!!Array.isArray(H)&&H},o.minExtend=function(Y,q){var H={};"object"!=typeof q&&(q={});var X,Q,ne,re=Object.keys(Y);for(X=0;X<re.length;X++)ne=Y[Q=re[X]],"_"!==Q.charAt(0)&&"function"!=typeof ne&&(H[Q]="module"===Q?ne:Array.isArray(ne)?"colorscale"===Q?ne.slice():ne.slice(0,3):o.isTypedArray(ne)?ne.subarray(0,3):ne&&"object"==typeof ne?o.minExtend(Y[Q],q[Q]):ne);for(re=Object.keys(q),X=0;X<re.length;X++)"object"==typeof(ne=q[Q=re[X]])&&Q in H&&"object"==typeof H[Q]||(H[Q]=ne);return H},o.titleCase=function(Y){return Y.charAt(0).toUpperCase()+Y.substr(1)},o.containsAny=function(Y,q){for(var H=0;H<q.length;H++)if(-1!==Y.indexOf(q[H]))return!0;return!1},o.isIE=function(){return void 0!==window.navigator.msSaveBlob};var E=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;o.isIOS=function(){return L.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var Y=C.exec(window.navigator.userAgent);if(Y&&2===Y.length){var q=parseInt(Y[1]);if(!isNaN(q))return q}return null},o.isD3Selection=function(Y){return Y instanceof M.selection},o.ensureSingle=function(Y,q,H,X){var Q=Y.select(q+(H?"."+H:""));if(Q.size())return Q;var ne=Y.append(q);return H&&ne.classed(H,!0),X&&ne.call(X),ne},o.ensureSingleById=function(Y,q,H,X){var Q=Y.select(q+"#"+H);if(Q.size())return Q;var ne=Y.append(q).attr("id",H);return X&&ne.call(X),ne},o.objectFromPath=function(Y,q){for(var H,X=Y.split("."),Q=H={},ne=0;ne<X.length;ne++){var re=X[ne],ae=null,se=X[ne].match(/(.*)\[([0-9]+)\]/);se?(ae=se[2],(H=H[re=se[1]]=[])[ae]=ne===X.length-1?q:{},H=H[ae]):(H[re]=ne===X.length-1?q:{},H=H[re])}return Q};var P=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;o.expandObjectPaths=function(Y){var q,H,X,Q,ne,re,ae;if("object"==typeof Y&&!Array.isArray(Y))for(H in Y)Y.hasOwnProperty(H)&&((q=H.match(P))?(Q=Y[H],X=q[1],delete Y[H],Y[X]=o.extendDeepNoArrays(Y[X]||{},o.objectFromPath(H,o.expandObjectPaths(Q))[X])):(q=H.match(z))?(Q=Y[H],X=q[1],ne=parseInt(q[2]),delete Y[H],Y[X]=Y[X]||[],"."===q[3]?(ae=q[4],re=Y[X][ne]=Y[X][ne]||{},o.extendDeepNoArrays(re,o.objectFromPath(ae,o.expandObjectPaths(Q)))):Y[X][ne]=o.expandObjectPaths(Q)):Y[H]=o.expandObjectPaths(Y[H]));return Y},o.numSeparate=function(Y,q,H){if(H||(H=!1),"string"!=typeof q||0===q.length)throw new Error("Separator string required for formatting!");"number"==typeof Y&&(Y=String(Y));var X=/(\d+)(\d{3})/,Q=q.charAt(0),ne=q.charAt(1),re=Y.split("."),ae=re[0],se=re.length>1?Q+re[1]:"";if(ne&&(re.length>1||ae.length>4||H))for(;X.test(ae);)ae=ae.replace(X,"$1"+ne+"$2");return ae+se},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var j=/^\w*$/;o.templateString=function(Y,q){var H={};return Y.replace(o.TEMPLATE_STRING_REGEX,function(X,Q){var ne;return j.test(Q)?ne=q[Q]:(H[Q]=H[Q]||o.nestedProperty(q,Q).get,ne=H[Q]()),o.isValidTextValue(ne)?ne:""})};var R={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return B.apply(R,arguments)};var V={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return B.apply(V,arguments)};var D=/^[:|\|]/;function B(Y,q,H){var X=this,Q=arguments;q||(q={});var ne={};return Y.replace(o.TEMPLATE_STRING_REGEX,function(re,ae,se){var pe,ke,me,le="_xother"===ae||"_yother"===ae,ue="_xother_"===ae||"_yother_"===ae,Ee="xother_"===ae||"yother_"===ae,de="xother"===ae||"yother"===ae||le||Ee||ue,xe=ae;if((le||ue)&&(xe=xe.substring(1)),(Ee||ue)&&(xe=xe.substring(0,xe.length-1)),de){if(void 0===(pe=q[xe]))return""}else for(me=3;me<Q.length;me++)if(ke=Q[me]){if(ke.hasOwnProperty(xe)){pe=ke[xe];break}if(j.test(xe)||(pe=o.nestedProperty(ke,xe).get(),(pe=ne[xe]||o.nestedProperty(ke,xe).get())&&(ne[xe]=pe)),void 0!==pe)break}if(void 0===pe&&X)return X.count<X.max&&(o.warn("Variable '"+xe+"' in "+X.name+" could not be found!"),pe=re),X.count===X.max&&o.warn("Too many "+X.name+" warnings - additional warnings will be suppressed"),X.count++,re;if(se){var Te;if(":"===se[0]&&(pe=(Te=H?H.numberFormat:o.numberFormat)(se.replace(D,""))(pe)),"|"===se[0]){Te=H?H.timeFormat:k;var we=o.dateTime2ms(pe);pe=o.formatDate(we,se.replace(D,""),!1,Te)}}else{var K=xe+"Label";q.hasOwnProperty(K)&&(pe=q[K])}return de&&(pe="("+pe+")",(le||ue)&&(pe=" "+pe),(Ee||ue)&&(pe+=" ")),pe})}o.subplotSort=function(Y,q){for(var H=Math.min(Y.length,q.length)+1,X=0,Q=0,ne=0;ne<H;ne++){var re=Y.charCodeAt(ne)||0,ae=q.charCodeAt(ne)||0,se=re>=48&&re<=57,pe=ae>=48&&ae<=57;if(se&&(X=10*X+re-48),pe&&(Q=10*Q+ae-48),!se||!pe){if(X!==Q)return X-Q;if(re!==ae)return re-ae}}return Q-X};var N=2e9;o.seedPseudoRandom=function(){N=2e9},o.pseudoRandom=function(){var Y=N;return N=(69069*N+1)%4294967296,Math.abs(N-Y)<429496729?o.pseudoRandom():N/4294967296},o.fillText=function(Y,q,H){var X=Array.isArray(H)?function(re){H.push(re)}:function(re){H.text=re},Q=o.extractOption(Y,q,"htx","hovertext");if(o.isValidTextValue(Q))return X(Q);var ne=o.extractOption(Y,q,"tx","text");return o.isValidTextValue(ne)?X(ne):void 0},o.isValidTextValue=function(Y){return Y||0===Y},o.formatPercent=function(Y,q){q=q||0;for(var H=(Math.round(100*Y*Math.pow(10,q))*Math.pow(.1,q)).toFixed(q)+"%",X=0;X<q;X++)-1!==H.indexOf(".")&&(H=(H=H.replace("0%","%")).replace(".%","%"));return H},o.isHidden=function(Y){var q=window.getComputedStyle(Y).display;return!q||"none"===q},o.strTranslate=function(Y,q){return Y||q?"translate("+Y+","+q+")":""},o.strRotate=function(Y){return Y?"rotate("+Y+")":""},o.strScale=function(Y){return 1!==Y?"scale("+Y+")":""},o.getTextTransform=function(Y){var q=Y.noCenter,H=Y.textX,X=Y.textY,se=Y.rotate,pe=Y.scale;return pe?pe>1&&(pe=1):pe=0,o.strTranslate(Y.targetX-pe*(H+(Y.anchorX||0)),Y.targetY-pe*(X+(Y.anchorY||0)))+o.strScale(pe)+(se?"rotate("+se+(q?"":" "+H+" "+X)+")":"")},o.setTransormAndDisplay=function(Y,q){Y.attr("transform",o.getTextTransform(q)),Y.style("display",q.scale?null:"none")},o.ensureUniformFontSize=function(Y,q){var H=o.extendFlat({},q);return H.size=Math.max(q.size,Y._fullLayout.uniformtext.minsize||0),H},o.join2=function(Y,q,H){var X=Y.length;return X>1?Y.slice(0,-1).join(q)+H+Y[X-1]:Y.join(q)},o.bigFont=function(Y){return Math.round(1.2*Y)};var U=o.getFirefoxVersion(),J=null!==U&&U<86;o.getPositionFromD3Event=function(){return J?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},41965:function($){"use strict";$.exports=function(I){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(I):"[object Object]"===Object.prototype.toString.call(I)&&Object.getPrototypeOf(I).hasOwnProperty("hasOwnProperty")}},66636:function($,I,t){"use strict";var M=t(65487),k=/^\w*$/;$.exports=function(l,T,x,p){var s,e,o;x=x||"name",p=p||"value";var r={};T&&T.length?(o=M(l,T),e=o.get()):e=l,T=T||"";var n={};if(e)for(s=0;s<e.length;s++)n[e[s][x]]=s;var a=k.test(p),i={set:function(c,h){var f=null===h?4:0;if(!e){if(!o||4===f)return;o.set(e=[])}var b=n[c];if(void 0===b){if(4===f)return;f|=3,n[c]=b=e.length}else h!==(a?e[b][p]:M(e[b],p).get())&&(f|=2);var v=e[b]=e[b]||{};return v[x]=c,a?v[p]=h:M(v,p).set(h),null!==h&&(f&=-5),r[b]=r[b]|f,i},get:function(c){if(e){var h=n[c];return void 0===h?void 0:a?e[h][p]:M(e[h],p).get()}},rename:function(c,h){var f=n[c];return void 0===f||(r[f]=1|r[f],n[h]=f,delete n[c],e[f][x]=h),i},remove:function(c){var h=n[c];if(void 0===h)return i;var f=e[h];if(Object.keys(f).length>2)return r[h]=2|r[h],i.set(c,null);if(a){for(s=h;s<e.length;s++)r[s]=3|r[s];for(s=h;s<e.length;s++)n[e[s][x]]--;e.splice(h,1),delete n[c]}else M(f,p).set(null),r[h]=6|r[h];return i},constructUpdate:function(){for(var c,h,f={},b=Object.keys(r),v=0;v<b.length;v++)c=T+"["+(h=b[v])+"]",e[h]?(1&r[h]&&(f[c+"."+x]=e[h][x]),2&r[h]&&(f[c+"."+p]=a?4&r[h]?null:e[h][p]:4&r[h]?null:M(e[h],p).get())):f[c]=null;return f}};return i}},15867:function($,I,t){"use strict";var M=t(73972);$.exports=function(k,l){for(var T=k._context.locale,x=0;x<2;x++){for(var p=k._context.locales,s=0;s<2;s++){var e=(p[T]||{}).dictionary;if(e){var o=e[l];if(o)return o}p=M.localeRegistry}var r=T.split("-")[0];if(r===T)break;T=r}return l}},47769:function($,I,t){"use strict";var M=t(72075).dfltConfig,k=t(75046),l=$.exports={};l.log=function(){var T;if(M.logging>1){var x=["LOG:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(M.notifyOnLogging>1){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"long")}},l.warn=function(){var T;if(M.logging>0){var x=["WARN:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.trace.apply(console,x)}if(M.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}},l.error=function(){var T;if(M.logging>0){var x=["ERROR:"];for(T=0;T<arguments.length;T++)x.push(arguments[T]);console.error.apply(console,x)}if(M.notifyOnLogging>0){var p=[];for(T=0;T<arguments.length;T++)p.push(arguments[T]);k(p.join("<br>"),"stick")}}},77310:function($,I,t){"use strict";var M=t(39898);$.exports=function(k,l,T){var x=k.selectAll("g."+T.replace(/\s/g,".")).data(l,function(s){return s[0].trace.uid});x.exit().remove(),x.enter().append("g").attr("class",T),x.order();var p=k.classed("rangeplot")?"nodeRangePlot3":"node3";return x.each(function(s){s[0][p]=M.select(this)}),x}},35657:function($,I,t){"use strict";var M=t(79576);I.init2dArray=function(k,l){for(var T=new Array(k),x=0;x<k;x++)T[x]=new Array(l);return T},I.transposeRagged=function(k){var l,T,x=0,p=k.length;for(l=0;l<p;l++)x=Math.max(x,k[l].length);var s=new Array(x);for(l=0;l<x;l++)for(s[l]=new Array(p),T=0;T<p;T++)s[l][T]=k[T][l];return s},I.dot=function(k,l){if(!k.length||!l.length||k.length!==l.length)return null;var T,x,p=k.length;if(k[0].length)for(T=new Array(p),x=0;x<p;x++)T[x]=I.dot(k[x],l);else if(l[0].length){var s=I.transposeRagged(l);for(T=new Array(s.length),x=0;x<s.length;x++)T[x]=I.dot(k,s[x])}else for(T=0,x=0;x<p;x++)T+=k[x]*l[x];return T},I.translationMatrix=function(k,l){return[[1,0,k],[0,1,l],[0,0,1]]},I.rotationMatrix=function(k){var l=k*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},I.rotationXYMatrix=function(k,l,T){return I.dot(I.dot(I.translationMatrix(l,T),I.rotationMatrix(k)),I.translationMatrix(-l,-T))},I.apply3DTransform=function(k){return function(){var l=arguments,T=1===arguments.length?l[0]:[l[0],l[1],l[2]||0];return I.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},I.apply2DTransform=function(k){return function(){var l=arguments;3===l.length&&(l=l[0]);var T=1===arguments.length?l[0]:[l[0],l[1]];return I.dot(k,[T[0],T[1],1]).slice(0,2)}},I.apply2DTransform2=function(k){var l=I.apply2DTransform(k);return function(T){return l(T.slice(0,2)).concat(l(T.slice(2,4)))}},I.convertCssMatrix=function(k){if(k){var l=k.length;if(16===l)return k;if(6===l)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},I.inverseTransformMatrix=function(k){var l=[];return M.invert(l,k),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function($){"use strict";$.exports={mod:function(I,t){var M=I%t;return M<0?M+t:M},modHalf:function(I,t){return Math.abs(I)>t/2?I-Math.round(I/t)*t:I}}},65487:function($,I,t){"use strict";var M=t(92770),k=t(73627).isArrayOrTypedArray;function l(r,n){return function(){var a,i,c,h,f,b=r;for(h=0;h<n.length-1;h++){if(-1===(a=n[h])){for(i=!0,c=[],f=0;f<b.length;f++)c[f]=l(b[f],n.slice(h+1))(),c[f]!==c[0]&&(i=!1);return i?c[0]:c}if("number"==typeof a&&!k(b)||"object"!=typeof(b=b[a])||null===b)return}if("object"==typeof b&&null!==b&&null!==(c=b[n[h]]))return c}}$.exports=function(r,n){if(M(n))n=String(n);else if("string"!=typeof n||"[-1]"===n.substr(n.length-4))throw"bad property string";for(var a,i,c,h=0,f=n.split(".");h<f.length;){if(a=String(f[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])f[h]=a[1];else{if(0!==h)throw"bad property string";f.splice(0,1)}for(i=a[2].substr(1,a[2].length-2).split("]["),c=0;c<i.length;c++)h++,f.splice(h,0,Number(i[c]))}h++}return"object"!=typeof r?{set:function(){throw"bad container"},get:function(){},astr:n,parts:f,obj:r}:{set:p(r,f,n),get:l(r,f),astr:n,parts:f,obj:r}};var T=/(^|\.)args\[/;function x(r,n){return void 0===r||null===r&&!n.match(T)}function p(r,n,a){return function(i){var c,h,f=r,b="",v=[[r,b]],g=x(i,a);for(h=0;h<n.length-1;h++){if("number"==typeof(c=n[h])&&!k(f))throw"array index but container is not an array";if(-1===c){if(g=!e(f,n.slice(h+1),i,a))break;return}if(!o(f,c,n[h+1],g))break;if("object"!=typeof(f=f[c])||null===f)throw"container is not an object";b=s(b,c),v.push([f,b])}if(g){if(h===n.length-1&&(delete f[n[h]],Array.isArray(f)&&+n[h]==f.length-1))for(;f.length&&void 0===f[f.length-1];)f.pop()}else f[n[h]]=i}}function s(r,n){var a=n;return M(n)?a="["+n+"]":r&&(a="."+n),r+a}function e(r,n,a,i){var c,h=k(a),f=!0,b=a,v=i.replace("-1",0),g=!h&&x(a,v),y=n[0];for(c=0;c<r.length;c++)v=i.replace("-1",c),h&&(g=x(b=a[c%a.length],v)),g&&(f=!1),o(r,c,y,g)&&p(r[c],n,i.replace("-1",c))(b);return f}function o(r,n,a,i){if(void 0===r[n]){if(i)return!1;r[n]="number"==typeof a?[]:{}}return!0}},64213:function($){"use strict";$.exports=function(){}},75046:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=[];$.exports=function(T,x){if(-1===l.indexOf(T)){l.push(T);var p=1e3;k(x)?p=x:"long"===x&&(p=3e3);var s=M.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var r=M.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(e)});for(var n=r.append("p"),a=o.split(/<br\s*\/?>/g),i=0;i<a.length;i++)i&&n.append("br"),n.append("span").text(a[i]);"stick"===x?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(p).call(e)})}function e(o){o.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);-1!==n&&l.splice(n,1),M.select(this).remove()})}}},39918:function($,I,t){"use strict";var M=t(6964),k="data-savedcursor";$.exports=function(l,T){var x=l.attr(k);if(T){if(!x){for(var p=(l.attr("class")||"").split(" "),s=0;s<p.length;s++){var e=p[s];0===e.indexOf("cursor-")&&l.attr(k,e.substr(7)).classed(e,!1)}l.attr(k)||l.attr(k,"!!")}M(l,T)}else x&&(l.attr(k,null),"!!"===x?M(l):M(l,x))}},61082:function($,I,t){"use strict";var M=t(35657).dot,k=t(50606).BADNUM,l=$.exports={};l.tester=function(T){var x,p=T.slice(),s=p[0][0],e=s,o=p[0][1],r=o;for(p[p.length-1][0]===p[0][0]&&p[p.length-1][1]===p[0][1]||p.push(p[0]),x=1;x<p.length;x++)s=Math.min(s,p[x][0]),e=Math.max(e,p[x][0]),o=Math.min(o,p[x][1]),r=Math.max(r,p[x][1]);var n,a=!1;5===p.length&&(p[0][0]===p[1][0]?p[2][0]===p[3][0]&&p[0][1]===p[3][1]&&p[1][1]===p[2][1]&&(a=!0,n=function(h){return h[0]===p[0][0]}):p[0][1]===p[1][1]&&p[2][1]===p[3][1]&&p[0][0]===p[3][0]&&p[1][0]===p[2][0]&&(a=!0,n=function(h){return h[1]===p[0][1]}));var i=!0,c=p[0];for(x=1;x<p.length;x++)if(c[0]!==p[x][0]||c[1]!==p[x][1]){i=!1;break}return{xmin:s,xmax:e,ymin:o,ymax:r,pts:p,contains:a?function(h,f){var b=h[0],v=h[1];return!(b===k||b<s||b>e||v===k||v<o||v>r||f&&n(h))}:function(h,f){var b=h[0],v=h[1];if(b===k||b<s||b>e||v===k||v<o||v>r)return!1;var g,y,d,m,w,u=p.length,S=p[0][0],_=p[0][1],E=0;for(g=1;g<u;g++)if(y=S,d=_,S=p[g][0],_=p[g][1],!(b<(m=Math.min(y,S))||b>Math.max(y,S)||v>Math.max(d,_)))if(v<Math.min(d,_))b!==m&&E++;else{if(v===(w=S===y?v:d+(b-y)*(_-d)/(S-y)))return 1!==g||!f;v<=w&&b!==m&&E++}return E%2==1},isRect:a,degenerate:i}},l.isSegmentBent=function(T,x,p,s){var e,o,r,n=T[x],a=[T[p][0]-n[0],T[p][1]-n[1]],i=M(a,a),c=Math.sqrt(i),h=[-a[1]/c,a[0]/c];for(e=x+1;e<p;e++)if((r=M(o=[T[e][0]-n[0],T[e][1]-n[1]],a))<0||r>i||Math.abs(M(o,h))>s)return!0;return!1},l.filter=function(T,x){var p=[T[0]],s=0,e=0;function o(r){T.push(r);var n=p.length,a=s;p.splice(e+1);for(var i=a+1;i<T.length;i++)(i===T.length-1||l.isSegmentBent(T,a,i+1,x))&&(p.push(T[i]),p.length<n-2&&(s=i,e=p.length-1),a=i)}return T.length>1&&o(T.pop()),{addPt:o,raw:T,filtered:p}}},79749:function($,I,t){"use strict";var M=t(58617),k=t(98580);$.exports=function(l,T,x){var p=l._fullLayout,s=!0;return p._glcanvas.each(function(e){if(e.regl)e.regl.preloadCachedCode(x);else if(!e.pick||p._has("parcoords")){try{e.regl=k({canvas:this,attributes:{antialias:!e.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||t.g.devicePixelRatio,extensions:T||[],cachedCode:x||{}})}catch{s=!1}e.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(o){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:o,layer:e.key})},!1)}}),s||M({container:p._glcontainer.node()}),s}},45142:function($,I,t){"use strict";var M=t(92770),k=t(35791);$.exports=function(l){var T,n;if("string"!=typeof(T=l&&l.hasOwnProperty("userAgent")?l.userAgent:(typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),n)))return!0;var x=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!x)for(var p=T.split(" "),s=1;s<p.length;s++)if(-1!==p[s].indexOf("Safari"))for(var e=s-1;e>-1;e--){var o=p[e];if("Version/"===o.substr(0,8)){var r=o.substr(8).split(".")[0];if(M(r)&&(r=+r),r>=13)return!0}}return x}},75138:function($){"use strict";$.exports=function(I,t){if(t instanceof RegExp){for(var M=t.toString(),k=0;k<I.length;k++)if(I[k]instanceof RegExp&&I[k].toString()===M)return I;I.push(t)}else!t&&0!==t||-1!==I.indexOf(t)||I.push(t);return I}},10847:function($,I,t){"use strict";var M=t(71828),k=t(72075).dfltConfig,l={add:function(T,x,p,s,e){var o,r;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},r=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(T.undoQueue.queue.splice(r,T.undoQueue.queue.length-r,o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),T.undoQueue.index+=1):o=T.undoQueue.queue[r-1],T.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(x),o.undo.args.unshift(p),o.redo.calls.push(s),o.redo.args.push(e)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var x,p;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<x.undo.calls.length;p++)l.plotDo(T,x.undo.calls[p],x.undo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var x,p;if(!(void 0===T.undoQueue||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(x=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,p=0;p<x.redo.calls.length;p++)l.plotDo(T,x.redo.calls[p],x.redo.args[p]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,x,p){T.autoplay=!0,p=function(s,e){for(var o,r=[],n=0;n<e.length;n++)r[n]=(o=e[n])===s?o:"object"==typeof o?Array.isArray(o)?M.extendDeep([],o):M.extendDeepAll({},o):o;return r}(T,p),x.apply(null,p)}};$.exports=l},30587:function($,I){"use strict";I.counter=function(t,M,k,l){var T=(M||"")+(k?"":"$"),x=!1===l?"":"^";return"xy"===t?new RegExp(x+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(x+t+"([2-9]|[1-9][0-9]+)?"+T)}},6962:function($){"use strict";var I=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,t=/^[^\.\[\]]+$/;$.exports=function(M,k){for(;k;){var l=M.match(I);if(l)M=l[1];else{if(!M.match(t))throw new Error("bad relativeAttr call:"+[M,k]);M=""}if("^"!==k.charAt(0))break;k=k.slice(1)}return M&&"["!==k.charAt(0)?M+"."+k:M+k}},51332:function($,I,t){"use strict";var M=t(73627).isArrayOrTypedArray,k=t(41965);$.exports=function l(T,x){for(var p in x){var s=x[p],e=T[p];if(e!==s)if("_"===p.charAt(0)||"function"==typeof s){if(p in T)continue;T[p]=s}else if(M(s)&&M(e)&&k(s[0])){if("customdata"===p||"ids"===p)continue;for(var o=Math.min(s.length,e.length),r=0;r<o;r++)e[r]!==s[r]&&k(s[r])&&k(e[r])&&l(e[r],s[r])}else k(s)&&k(e)&&(l(e,s),Object.keys(e).length||delete T[p])}}},65888:function($,I,t){"use strict";var M=t(92770),k=t(47769),l=t(23389),T=t(50606).BADNUM,x=1e-9;function p(r,n){return r<n}function s(r,n){return r<=n}function e(r,n){return r>n}function o(r,n){return r>=n}I.findBin=function(r,n,a){if(M(n.start))return a?Math.ceil((r-n.start)/n.size-x)-1:Math.floor((r-n.start)/n.size+x);var i,c,h=0,f=n.length,b=0,v=f>1?(n[f-1]-n[0])/(f-1):1;for(c=v>=0?a?p:s:a?o:e,r+=v*x*(a?-1:1)*(v>=0?1:-1);h<f&&b++<100;)c(n[i=Math.floor((h+f)/2)],r)?h=i+1:f=i;return b>90&&k.log("Long binary search..."),h-1},I.sorterAsc=function(r,n){return r-n},I.sorterDes=function(r,n){return n-r},I.distinctVals=function(r){var n,a=r.slice();for(a.sort(I.sorterAsc),n=a.length-1;n>-1&&a[n]===T;n--);for(var i,c=a[n]-a[0]||1,h=c/(n||1)/1e4,f=[],b=0;b<=n;b++){var v=a[b],g=v-i;void 0===i?(f.push(v),i=v):g>h&&(c=Math.min(c,g),f.push(v),i=v)}return{vals:f,minDiff:c}},I.roundUp=function(r,n,a){for(var i,c=0,h=n.length-1,f=0,b=a?0:1,v=a?1:0,g=a?Math.ceil:Math.floor;c<h&&f++<100;)n[i=g((c+h)/2)]<=r?c=i+b:h=i-v;return n[c]},I.sort=function(r,n){for(var a=0,i=0,c=1;c<r.length;c++){var h=n(r[c],r[c-1]);if(h<0?a=1:h>0&&(i=1),a&&i)return r.sort(n)}return i?r:r.reverse()},I.findIndexOfMin=function(r,n){n=n||l;for(var a,i=1/0,c=0;c<r.length;c++){var h=n(r[c]);h<i&&(i=h,a=c)}return a}},6964:function($){"use strict";$.exports=function(I,t){(I.attr("class")||"").split(" ").forEach(function(M){0===M.indexOf("cursor-")&&I.classed(M,!1)}),t&&I.classed("cursor-"+t,!0)}},58617:function($,I,t){"use strict";var M=t(7901),k=function(){};$.exports=function(l){for(var T in l)"function"==typeof l[T]&&(l[T]=k);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var x=document.createElement("div");x.className="no-webgl",x.style.cursor="pointer",x.style.fontSize="24px",x.style.color=M.defaults[0],x.style.position="absolute",x.style.left=x.style.top="0px",x.style.width=x.style.height="100%",x.style["background-color"]=M.lightLine,x.style["z-index"]=30;var p=document.createElement("p");return p.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",p.style.position="relative",p.style.top="50%",p.style.left="50%",p.style.height="30%",p.style.width="50%",p.style.margin="-15% 0 0 -25%",x.appendChild(p),l.container.appendChild(x),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function($){"use strict";$.exports=function(I){return Object.keys(I).sort()}},80038:function($,I,t){"use strict";var M=t(92770),k=t(73627).isArrayOrTypedArray;I.aggNums=function(l,T,x,p){var s,e;if((!p||p>x.length)&&(p=x.length),M(T)||(T=!1),k(x[0])){for(e=new Array(p),s=0;s<p;s++)e[s]=I.aggNums(l,T,x[s]);x=e}for(s=0;s<p;s++)M(T)?M(x[s])&&(T=l(+T,+x[s])):T=x[s];return T},I.len=function(l){return I.aggNums(function(T){return T+1},0,l)},I.mean=function(l,T){return T||(T=I.len(l)),I.aggNums(function(x,p){return x+p},0,l)/T},I.midRange=function(l){if(void 0!==l&&0!==l.length)return(I.aggNums(Math.max,null,l)+I.aggNums(Math.min,null,l))/2},I.variance=function(l,T,x){return T||(T=I.len(l)),M(x)||(x=I.mean(l,T)),I.aggNums(function(p,s){return p+Math.pow(s-x,2)},0,l)/T},I.stdev=function(l,T,x){return Math.sqrt(I.variance(l,T,x))},I.median=function(l){var T=l.slice().sort();return I.interp(T,.5)},I.interp=function(l,T){if(!M(T))throw"n should be a finite number";if((T=T*l.length-.5)<0)return l[0];if(T>l.length-1)return l[l.length-1];var x=T%1;return x*l[Math.ceil(T)]+(1-x)*l[Math.floor(T)]}},78614:function($,I,t){"use strict";var M=t(25075);$.exports=function(k){return k?M(k):[0,0,0,1]}},63893:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=k.strTranslate,T=t(77922),x=t(18783).LINE_SPACING,p=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;I.convertToTspans=function(z,j,R){var V=z.text(),D=!z.attr("data-notex")&&j&&j._context.typesetMath&&typeof MathJax<"u"&&V.match(p),B=M.select(z.node().parentNode);if(!B.empty()){var N=z.attr("class")?z.attr("class").split(" ")[0]:"text";return B.selectAll("svg."+(N+="-math")).remove(),B.selectAll("g."+N+"-group").remove(),z.style("display",null).attr({"data-unformatted":V,"data-math":"N"}),D?(j&&j._promises||[]).push(new Promise(function(J){z.style("display","none");var Y=parseInt(z.node().style.fontSize,10);!function(H,X,Q){var ne,re,ae,se,pe=parseInt((MathJax.version||"").split(".")[0]);if(2===pe||3===pe){var ke=function(){var le="math-output-"+k.randstr({},64),ue=(se=M.select("body").append("div").attr({id:le}).style({visibility:"hidden",position:"absolute","font-size":X.fontSize+"px"}).text(H.replace(s,"\\lt ").replace(e,"\\gt "))).node();return 2===pe?MathJax.Hub.Typeset(ue):MathJax.typeset([ue])},me=function(){var le=se.select(2===pe?".MathJax_SVG":".MathJax"),ue=!le.empty()&&se.select("svg").node();if(ue){var Ee,de=ue.getBoundingClientRect();Ee=2===pe?M.select("body").select("#MathJax_SVG_glyphs"):le.select("defs"),Q(le,Ee,de)}else k.log("There was an error in the tex syntax.",H),Q();se.remove()};2===pe?MathJax.Hub.Queue(function(){return re=k.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:o},displayAlign:"left"})},function(){if("SVG"!==(ne=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},ke,me,function(){if("SVG"!==ne)return MathJax.Hub.setRenderer(ne)},function(){return void 0!==ae&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(re)}):3===pe&&(re=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=o,"svg"!==(ne=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ke(),me(),"svg"!==ne&&(MathJax.config.startup.output=ne),MathJax.config=re}))}else k.warn("No MathJax version:",MathJax.version)}(D[2],{fontSize:Y},function(H,X,Q){B.selectAll("svg."+N).remove(),B.selectAll("g."+N+"-group").remove();var ne=H&&H.select("svg");if(!ne||!ne.node())return U(),void J();var re=B.append("g").classed(N+"-group",!0).attr({"pointer-events":"none","data-unformatted":V,"data-math":"Y"});re.node().appendChild(ne.node()),X&&X.node()&&ne.node().insertBefore(X.node().cloneNode(!0),ne.node().firstChild);var ae=Q.width,se=Q.height;ne.attr({class:N,height:se,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var pe=z.node().style.fill||"black",ke=ne.select("g");ke.attr({fill:pe,stroke:pe});var me=ke.node().getBoundingClientRect(),le=me.width,ue=me.height;(le>ae||ue>se)&&(ne.style("overflow","hidden"),le=(me=ne.node().getBoundingClientRect()).width,ue=me.height);var Ee=+z.attr("x"),de=+z.attr("y"),xe=-(Y||z.node().getBoundingClientRect().height)/4;if("y"===N[0])re.attr({transform:"rotate("+[-90,Ee,de]+")"+l(-le/2,xe-ue/2)});else if("l"===N[0])de=xe-ue/2;else if("a"===N[0]&&0!==N.indexOf("atitle"))Ee=0,de=xe;else{var Te=z.attr("text-anchor");Ee-=le*("middle"===Te?.5:"end"===Te?1:0),de=de+xe-ue/2}ne.attr({x:Ee,y:de}),R&&R.call(z,re),J(re)})})):U(),z}function U(){B.empty()||(N=z.attr("class")+"-math",B.select("svg."+N).remove()),z.text("").style("white-space","pre"),function(Y,q){q=q.replace(h," ");var H,X=!1,Q=[],ne=-1;function re(){ne++;var he=document.createElementNS(T.svg,"tspan");M.select(he).attr({class:"line",dy:ne*x+"em"}),Y.appendChild(he),H=he;var ye=Q;if(Q=[{node:he}],ye.length>1)for(var Me=1;Me<ye.length;Me++)ae(ye[Me])}function ae(he){var ye,Me=he.type,Re={};if("a"===Me){ye="a";var Pe=he.target,De=he.href,fe=he.popup;De&&(Re={"xlink:xlink:show":"_blank"===Pe||"_"!==Pe.charAt(0)?"new":"replace",target:Pe,"xlink:xlink:href":De},fe&&(Re.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+fe+'");return false;'))}else ye="tspan";he.style&&(Re.style=he.style);var ge=document.createElementNS(T.svg,ye);if("sup"===Me||"sub"===Me){se(H,i),H.appendChild(ge);var be=document.createElementNS(T.svg,"tspan");se(be,i),M.select(be).attr("dy",a[Me]),Re.dy=n[Me],H.appendChild(ge),H.appendChild(be)}else H.appendChild(ge);M.select(ge).attr(Re),H=he.node=ge,Q.push(he)}function se(he,ye){he.appendChild(document.createTextNode(ye))}function pe(he){if(1!==Q.length){var ye=Q.pop();he!==ye.type&&k.log("Start tag <"+ye.type+"> doesnt match end tag <"+he+">. Pretending it did match.",q),H=Q[Q.length-1].node}else k.log("Ignoring unexpected end tag </"+he+">.",q)}v.test(q)?re():(H=Y,Q=[{node:Y}]);for(var ke=q.split(f),me=0;me<ke.length;me++){var le=ke[me],ue=le.match(b),Ee=ue&&ue[2].toLowerCase(),de=r[Ee];if("br"===Ee)re();else if(void 0===de)se(H,E(le));else if(ue[1])pe(Ee);else{var xe=ue[4],Te={type:Ee},we=w(xe,g);if(we?(we=we.replace(u,"$1 fill:"),de&&(we+=";"+de)):de&&(we=de),we&&(Te.style=we),"a"===Ee){X=!0;var K=w(xe,y);if(K){var oe=L(K);oe&&(Te.href=oe,Te.target=w(xe,d)||"_blank",Te.popup=w(xe,m))}}ae(Te)}}return X}(z.node(),V)&&z.style("pointer-events","all"),I.positionText(z),R&&R.call(z)}};var s=/(<|&lt;|&#60;)/g,e=/(>|&gt;|&#62;)/g,o=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},i="\u200b",c=["http:","https:","mailto:","",void 0,":"],h=I.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,b=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;I.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,d=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(z,j){if(!z)return null;var R=z.match(j),V=R&&(R[3]||R[4]);return V&&E(V)}var u=/(^|;)\s*color:/;I.plainText=function(z,j){for(var R=void 0!==(j=j||{}).len&&-1!==j.len?j.len:1/0,V=void 0!==j.allowedTags?j.allowedTags:["br"],B=z.split(f),N=[],U="",J=0,Y=0;Y<B.length;Y++){var q=B[Y],H=q.match(b),X=H&&H[2].toLowerCase();if(X)-1!==V.indexOf(X)&&(N.push(q),U=X);else{var Q=q.length;if(J+Q<R)N.push(q),J+=Q;else if(J<R){var ne=R-J;U&&("br"!==U||ne<=3||Q<=3)&&N.pop(),N.push(R>3?q.substr(0,ne-3)+"...":q.substr(0,ne));break}U=""}}return N.join("")};var S={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},_=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(_,function(j,R){return("#"===R.charAt(0)?function(V){if(!(V>1114111)){var D=String.fromCodePoint;if(D)return D(V);var B=String.fromCharCode;return V<=65535?B(V):B(55232+(V>>10),V%1024+56320)}}("x"===R.charAt(1)?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):S[R])||j})}function L(z){var j=encodeURI(decodeURI(z)),R=document.createElement("a"),V=document.createElement("a");R.href=z,V.href=j;var B=V.protocol;return-1!==c.indexOf(R.protocol)&&-1!==c.indexOf(B)?j:""}function C(z,j,R){var V,D,B,N=R.horizontalAlign,U=R.verticalAlign||"top",J=z.node().getBoundingClientRect(),Y=j.node().getBoundingClientRect();return D="bottom"===U?function(){return J.bottom-V.height}:"middle"===U?function(){return J.top+(J.height-V.height)/2}:function(){return J.top},B="right"===N?function(){return J.right-V.width}:"center"===N?function(){return J.left+(J.width-V.width)/2}:function(){return J.left},function(){V=this.node().getBoundingClientRect();var q=B()-Y.left,H=D()-Y.top,X=R.gd||{};if(R.gd){X._fullLayout._calcInverseTransform(X);var Q=k.apply3DTransform(X._fullLayout._invTransform)(q,H);q=Q[0],H=Q[1]}return this.style({top:H+"px",left:q+"px","z-index":1e3}),this}}I.convertEntities=E,I.sanitizeHTML=function(z){z=z.replace(h," ");for(var j=document.createElement("p"),R=j,V=[],D=z.split(f),B=0;B<D.length;B++){var N=D[B],U=N.match(b),J=U&&U[2].toLowerCase();if(J in r)if(U[1])V.length&&(R=V.pop());else{var Y=U[4],q=w(Y,g),H=q?{style:q}:{};if("a"===J){var X=w(Y,y);if(X){var Q=L(X);if(Q){H.href=Q;var ne=w(Y,d);ne&&(H.target=ne)}}}var re=document.createElement(J);R.appendChild(re),M.select(re).attr(H),R=re,V.push(re)}else R.appendChild(document.createTextNode(E(N)))}return j.innerHTML},I.lineCount=function(z){return z.selectAll("tspan.line").size()||1},I.positionText=function(z,j,R){return z.each(function(){var V=M.select(this);function D(U,J){return void 0===J?null===(J=V.attr(U))&&(V.attr(U,0),J=0):V.attr(U,J),J}var B=D("x",j),N=D("y",R);"text"===this.nodeName&&V.selectAll("tspan.line").attr({x:B,y:N})})};var P="1px ";I.makeTextShadow=function(z){return"1px 1px 1px "+z+", -1px -"+P+P+z+", 1px -"+P+P+z+", -"+P+P+P+z},I.makeEditable=function(z,j){var R=j.gd,V=j.delegate,D=M.dispatch("edit","input","cancel"),B=V||z;if(z.style({"pointer-events":V?"none":"all"}),1!==z.size())throw new Error("boo");function N(){var J,Y,q,H,X;J=M.select(R).select(".svg-container"),Y=J.append("div"),q=z.node().style,H=parseFloat(q.fontSize||12),void 0===(X=j.text)&&(X=z.attr("data-unformatted")),Y.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":H,color:j.fill||q.fill||"black",opacity:1,"background-color":j.background||"transparent",outline:"#ffffff33 1px solid",margin:[-H/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(X).call(C(z,J,j)).on("blur",function(){R._editing=!1,z.text(this.textContent).style({opacity:1});var re,ae=M.select(this).attr("class");(re=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(re).style({opacity:0});var se=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),D.edit.call(z,se)}).on("focus",function(){var re=this;R._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===re)return!1;document.activeElement===Y.node()&&Y.node().blur()})}).on("keyup",function(){27===M.event.which?(R._editing=!1,z.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),D.cancel.call(z,this.textContent)):(D.input.call(z,this.textContent),M.select(this).call(C(z,J,j)))}).on("keydown",function(){13===M.event.which&&this.blur()}).call(U),z.style({opacity:0});var Q,ne=B.attr("class");(Q=ne?"."+ne.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(Q).style({opacity:0})}function U(J){var Y=J.node(),q=document.createRange();q.selectNodeContents(Y);var H=window.getSelection();H.removeAllRanges(),H.addRange(q),Y.focus()}return j.immediate?N():B.on("click",N),M.rebind(z,D,"on")}},79990:function($,I){"use strict";var t={};function M(k){k&&null!==k.timer&&(clearTimeout(k.timer),k.timer=null)}I.throttle=function(k,l,T){var x=t[k],p=Date.now();if(!x){for(var s in t)t[s].ts<p-6e4&&delete t[s];x=t[k]={ts:0,timer:null}}function e(){T(),x.ts=Date.now(),x.onDone&&(x.onDone(),x.onDone=null)}M(x),p>x.ts+l?e():x.timer=setTimeout(function(){e(),x.timer=null},l)},I.done=function(k){var l=t[k];return l&&l.timer?new Promise(function(T){var x=l.onDone;l.onDone=function(){x&&x(),T(),l.onDone=null}}):Promise.resolve()},I.clear=function(k){if(k)M(t[k]),delete t[k];else for(var l in t)I.clear(l)}},58163:function($,I,t){"use strict";var M=t(92770);$.exports=function(k,l){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(l[0],l[1]))/Math.LN10;return M(T)||(T=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),T}},90973:function($,I,t){"use strict";var M=$.exports={},k=t(78776).locationmodeToLayer,l=t(96892).zL;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,x){return T+x+".json"},M.getTopojsonFeatures=function(T,x){return l(x,x.objects[k[T.locationmode]]).features}},37815:function($){"use strict";$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function($){"use strict";$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function($,I,t){"use strict";var M=t(73972);$.exports=function(k){for(var l,T,x=M.layoutArrayContainers,p=M.layoutArrayRegexes,s=k.split("[")[0],e=0;e<p.length;e++)if((T=k.match(p[e]))&&0===T.index){l=T[0];break}if(l||(l=x[x.indexOf(s)]),!l)return!1;var o=k.substr(l.length);return o?!!(T=o.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(T[1]),property:T[3]||""}:{array:l,index:"",property:""}}},30962:function($,I,t){"use strict";var M=t(71828),k=M.extendFlat,l=M.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},x={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},p=T.flags.slice().concat(["fullReplot"]),s=x.flags.slice().concat("layoutReplot");function e(n){for(var a={},i=0;i<n.length;i++)a[n[i]]=!1;return a}function o(n,a,i){var c=k({},n);for(var h in c){var f=c[h];l(f)&&(c[h]=r(f,a,0,h))}return"from-root"===i&&(c.editType=a),c}function r(n,a,i,c){if(n.valType){var h=k({},n);if(h.editType=a,Array.isArray(n.items)){h.items=new Array(n.items.length);for(var f=0;f<n.items.length;f++)h.items[f]=r(n.items[f],a)}return h}return o(n,a,"_"===c.charAt(0)?"nested":"from-root")}$.exports={traces:T,layout:x,traceFlags:function(){return e(p)},layoutFlags:function(){return e(s)},update:function(n,a){var i=a.editType;if(i&&"none"!==i)for(var c=i.split("+"),h=0;h<c.length;h++)n[c[h]]=!0},overrideAll:o}},58377:function($,I,t){"use strict";var M=t(92770),k=t(27812),l=t(73972),T=t(71828),x=t(74875),p=t(41675),s=t(7901),e=p.cleanId,o=p.getFromTrace,r=l.traceIs;function n(y,d){var m=y[d],w=d.charAt(0);m&&"paper"!==m&&(y[d]=e(m,w,!0))}function a(y){function d(m,w){y[m]&&(!y.title||!y.title[w])&&(y.title||(y.title={}),y.title[w]=y[m],delete y[m])}y&&("string"!=typeof y.title&&"number"!=typeof y.title||(y.title={text:y.title}),d("titlefont","font"),d("titleposition","position"),d("titleside","side"),d("titleoffset","offset"))}function i(y){if(!T.isPlainObject(y))return!1;var d=y.name;return delete y.name,delete y.showlegend,("string"==typeof d||"number"==typeof d)&&String(d)}function c(y,d,m,w){if(m&&!w)return y;if(w&&!m||!y.trim())return d;if(!d.trim())return y;var u,S=Math.min(y.length,d.length);for(u=0;u<S&&y.charAt(u)===d.charAt(u);u++);return y.substr(0,u).trim()}function h(y){var d="middle",m="center";return"string"==typeof y&&(-1!==y.indexOf("top")?d="top":-1!==y.indexOf("bottom")&&(d="bottom"),-1!==y.indexOf("left")?m="left":-1!==y.indexOf("right")&&(m="right")),d+" "+m}function f(y,d){return d in y&&"object"==typeof y[d]&&0===Object.keys(y[d]).length}I.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&T.log("Clearing previous rejected promises from queue."),y._promises=[]},I.cleanLayout=function(y){var d,m;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var w=(x.subplotsRegistry.cartesian||{}).attrRegex,u=(x.subplotsRegistry.polar||{}).attrRegex,S=(x.subplotsRegistry.ternary||{}).attrRegex,_=(x.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(y);for(d=0;d<E.length;d++){var L=E[d];if(w&&w.test(L)){var C=y[L];C.anchor&&"free"!==C.anchor&&(C.anchor=e(C.anchor)),C.overlaying&&(C.overlaying=e(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":!1===C.isdate&&!1===C.islog&&(C.type="linear")),"withzero"!==C.autorange&&"tozero"!==C.autorange||(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,f(C,"domain")&&delete C.domain,void 0!==C.autotick&&(void 0===C.tickmode&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(u&&u.test(L))a(y[L].radialaxis);else if(S&&S.test(L)){var P=y[L];a(P.aaxis),a(P.baxis),a(P.caxis)}else if(_&&_.test(L)){var z=y[L],j=z.cameraposition;if(Array.isArray(j)&&4===j[0].length){var V=j[1],D=j[2],B=k([],j[0]),N=[];for(m=0;m<3;++m)N[m]=V[m]+D*B[2+4*m];z.camera={eye:{x:N[0],y:N[1],z:N[2]},center:{x:V[0],y:V[1],z:V[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}a(z.xaxis),a(z.yaxis),a(z.zaxis)}}var U=Array.isArray(y.annotations)?y.annotations.length:0;for(d=0;d<U;d++){var J=y.annotations[d];T.isPlainObject(J)&&(J.ref&&("paper"===J.ref?(J.xref="paper",J.yref="paper"):"data"===J.ref&&(J.xref="x",J.yref="y"),delete J.ref),n(J,"xref"),n(J,"yref"))}var Y=Array.isArray(y.shapes)?y.shapes.length:0;for(d=0;d<Y;d++){var q=y.shapes[d];T.isPlainObject(q)&&(n(q,"xref"),n(q,"yref"))}var H=Array.isArray(y.images)?y.images.length:0;for(d=0;d<H;d++){var X=y.images[d];T.isPlainObject(X)&&(n(X,"xref"),n(X,"yref"))}var Q=y.legend;return Q&&(Q.x>3?(Q.x=1.02,Q.xanchor="left"):Q.x<-2&&(Q.x=-.02,Q.xanchor="right"),Q.y>3?(Q.y=1.02,Q.yanchor="bottom"):Q.y<-2&&(Q.y=-.02,Q.yanchor="top")),a(y),"rotate"===y.dragmode&&(y.dragmode="orbit"),s.clean(y),y.template&&y.template.layout&&I.cleanLayout(y.template.layout),y},I.cleanData=function(y){for(var d=0;d<y.length;d++){var m,w=y[d];if("histogramy"===w.type&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var u=s.defaults,S=w.error_y.color||(r(w,"bar")?s.defaultLine:u[d%u.length]);w.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&("h"!==w.bardir||!r(w,"bar")&&"histogram"!==w.type.substr(0,9)||(w.orientation="h",I.swapXYData(w)),delete w.bardir),"histogramy"===w.type&&I.swapXYData(w),"histogramx"!==w.type&&"histogramy"!==w.type||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=e(w.xaxis,"x")),w.yaxis&&(w.yaxis=e(w.yaxis,"y")),r(w,"gl3d")&&w.scene&&(w.scene=x.subplotsRegistry.gl3d.cleanId(w.scene)),!r(w,"pie-like")&&!r(w,"bar-like"))if(Array.isArray(w.textposition))for(m=0;m<w.textposition.length;m++)w.textposition[m]=h(w.textposition[m]);else w.textposition&&(w.textposition=h(w.textposition));var _=l.getModule(w);if(_&&_.colorbar){var E=_.colorbar.container,L=E?w[E]:w;L&&L.colorscale&&("YIGnBu"===L.colorscale&&(L.colorscale="YlGnBu"),"YIOrRd"===L.colorscale&&(L.colorscale="YlOrRd"))}if("surface"===w.type&&T.isPlainObject(w.contours)){var C=["x","y","z"];for(m=0;m<C.length;m++){var P=w.contours[C[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if("candlestick"===w.type||"ohlc"===w.type){var z=!1!==(w.increasing||{}).showlegend,j=!1!==(w.decreasing||{}).showlegend,R=i(w.increasing),V=i(w.decreasing);if(!1!==R&&!1!==V){var D=c(R,V,z,j);D&&(w.name=D)}else!R&&!V||w.name||(w.name=R||V)}if(Array.isArray(w.transforms)){var B=w.transforms;for(m=0;m<B.length;m++){var N=B[m];if(T.isPlainObject(N))switch(N.type){case"filter":N.filtersrc&&(N.target=N.filtersrc,delete N.filtersrc),N.calendar&&(N.valuecalendar||(N.valuecalendar=N.calendar),delete N.calendar);break;case"groupby":if(N.styles=N.styles||N.style,N.styles&&!Array.isArray(N.styles)){var U=N.styles,J=Object.keys(U);N.styles=[];for(var Y=0;Y<J.length;Y++)N.styles.push({target:J[Y],value:U[J[Y]]})}}}}f(w,"line")&&delete w.line,"marker"in w&&(f(w.marker,"line")&&delete w.marker.line,f(w,"marker")&&delete w.marker),s.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),a(w),w.colorbar&&a(w.colorbar),w.marker&&w.marker.colorbar&&a(w.marker.colorbar),w.line&&w.line.colorbar&&a(w.line.colorbar),w.aaxis&&a(w.aaxis),w.baxis&&a(w.baxis)}},I.swapXYData=function(y){var d;if(T.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var m=y.error_y,w="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(y,["error_?.copy_ystyle"]),w&&T.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof y.hoverinfo){var u=y.hoverinfo.split("+");for(d=0;d<u.length;d++)"x"===u[d]?u[d]="y":"y"===u[d]&&(u[d]="x");y.hoverinfo=u.join("+")}},I.coerceTraceIndices=function(y,d){if(M(d))return[d];if(!Array.isArray(d)||!d.length)return y.data.map(function(u,S){return S});if(Array.isArray(d)){for(var m=[],w=0;w<d.length;w++)T.isIndex(d[w],y.data.length)?m.push(d[w]):T.warn("trace index (",d[w],") is not a number or is out of bounds");return m}return d},I.manageArrayContainers=function(y,d,m){var w=y.obj,u=y.parts,S=u.length,_=u[S-1],E=M(_);if(E&&null===d){var L=u.slice(0,S-1).join(".");T.nestedProperty(w,L).get().splice(_,1)}else E&&void 0===y.get()&&void 0===y.get()&&(m[y.astr]=null),y.set(d)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function v(y){var d=y.search(b);if(d>0)return y.substr(0,d)}I.hasParent=function(y,d){for(var m=v(d);m;){if(m in y)return!0;m=v(m)}return!1};var g=["x","y","z"];I.clearAxisTypes=function(y,d,m){for(var w=0;w<d.length;w++)for(var u=y._fullData[w],S=0;S<3;S++){var _=o(y,u,g[S]);if(_&&"log"!==_.type){var E=_._name,L=_._id.substr(1);if("scene"===L.substr(0,5)){if(void 0!==m[L])continue;E=L+"."+E}var C=E+".type";void 0===m[E]&&void 0===m[C]&&T.nestedProperty(y.layout,C).set(null)}}}},10641:function($,I,t){"use strict";var M=t(72391);I._doPlot=M._doPlot,I.newPlot=M.newPlot,I.restyle=M.restyle,I.relayout=M.relayout,I.redraw=M.redraw,I.update=M.update,I._guiRestyle=M._guiRestyle,I._guiRelayout=M._guiRelayout,I._guiUpdate=M._guiUpdate,I._storeDirectGUIEdit=M._storeDirectGUIEdit,I.react=M.react,I.extendTraces=M.extendTraces,I.prependTraces=M.prependTraces,I.addTraces=M.addTraces,I.deleteTraces=M.deleteTraces,I.moveTraces=M.moveTraces,I.purge=M.purge,I.addFrames=M.addFrames,I.deleteFrames=M.deleteFrames,I.animate=M.animate,I.setPlotConfig=M.setPlotConfig,I.toImage=t(403),I.validate=t(84936),I.downloadImage=t(7239);var k=t(96318);I.makeTemplate=k.makeTemplate,I.validateTemplate=k.validateTemplate},6611:function($,I,t){"use strict";var M=t(41965),k=t(64213),l=t(47769),T=t(65888).sorterAsc,x=t(73972);I.containerArrayMatch=t(14458);var p=I.isAddVal=function(e){return"add"===e||M(e)},s=I.isRemoveVal=function(e){return null===e||"remove"===e};I.applyContainerArrayChanges=function(e,o,r,n,a){var i=o.astr,c=x.getComponentMethod(i,"supplyLayoutDefaults"),h=x.getComponentMethod(i,"draw"),f=x.getComponentMethod(i,"drawOne"),b=n.replot||n.recalc||c===k||h===k,v=e.layout,g=e._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",i);var y=r[""][""];if(s(y))o.set(null);else{if(!Array.isArray(y))return l.warn("Unrecognized full array edit value",i,y),!0;o.set(y)}return!b&&(c(v,g),h(e),!0)}var d,m,w,u,S,_,E,C=Object.keys(r).map(Number).sort(T),P=o.get(),z=P||[],j=a(g,i).get(),R=[],V=-1,D=z.length;for(d=0;d<C.length;d++)if(u=r[w=C[d]],S=Object.keys(u),E=p(_=u[""]),w<0||w>z.length-(E?0:1))l.warn("index out of range",i,w);else if(void 0!==_)S.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",i,w),s(_)?R.push(w):E?("add"===_&&(_={}),z.splice(w,0,_),j&&j.splice(w,0,{})):l.warn("Unrecognized full object edit value",i,w,_),-1===V&&(V=w);else for(m=0;m<S.length;m++)a(z[w],S[m],i+"["+w+"].").set(u[S[m]]);for(d=R.length-1;d>=0;d--)z.splice(R[d],1),j&&j.splice(R[d],1);if(z.length?P||o.set(z):o.set(null),b)return!1;if(c(v,g),f!==k){var B;if(-1===V)B=C;else{for(D=Math.max(z.length,D),B=[],d=0;d<C.length&&!((w=C[d])>=V);d++)B.push(w);for(d=V;d<D;d++)B.push(d)}for(d=0;d<B.length;d++)f(e,B[d])}else h(e);return!0}},72391:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(57035),T=t(71828),x=T.nestedProperty,p=t(11086),s=t(10847),e=t(73972),o=t(86281),r=t(74875),n=t(89298),a=t(91424),i=t(7901),c=t(4305).initInteractions,h=t(77922),f=t(47322).clearOutline,b=t(72075).dfltConfig,v=t(6611),g=t(58377),y=t(61549),d=t(30962),m=t(85555).AX_NAME_PATTERN,w=0;function u(K){var oe=K._fullLayout;oe._redrawFromAutoMarginCount?oe._redrawFromAutoMarginCount--:K.emit("plotly_afterplot")}function S(K,oe){try{K._fullLayout._paper.style("background",oe)}catch(he){T.error(he)}}function _(K,oe){S(K,i.combine(oe,"white"))}function E(K,oe){if(!K._context){K._context=T.extendDeep({},b);var he=M.select("base");K._context._baseUrl=he.size()&&he.attr("href")?window.location.href.split("#")[0]:""}var ye,Me,Re,Pe=K._context;if(oe){for(Me=Object.keys(oe),ye=0;ye<Me.length;ye++)"editable"!==(Re=Me[ye])&&"edits"!==Re&&Re in Pe&&(Pe[Re]="setBackground"===Re&&"opaque"===oe[Re]?_:oe[Re]);oe.plot3dPixelRatio&&!Pe.plotGlPixelRatio&&(Pe.plotGlPixelRatio=Pe.plot3dPixelRatio);var De=oe.editable;if(void 0!==De)for(Pe.editable=De,Me=Object.keys(Pe.edits),ye=0;ye<Me.length;ye++)Pe.edits[Me[ye]]=De;if(oe.edits)for(Me=Object.keys(oe.edits),ye=0;ye<Me.length;ye++)(Re=Me[ye])in Pe.edits&&(Pe.edits[Re]=oe.edits[Re]);Pe._exportedPlot=oe._exportedPlot}Pe.staticPlot&&(Pe.editable=!1,Pe.edits={},Pe.autosizable=!1,Pe.scrollZoom=!1,Pe.doubleClick=!1,Pe.showTips=!1,Pe.showLink=!1,Pe.displayModeBar=!1),"hover"!==Pe.displayModeBar||l||(Pe.displayModeBar=!0),"transparent"!==Pe.setBackground&&"function"==typeof Pe.setBackground||(Pe.setBackground=S),Pe._hasZeroHeight=Pe._hasZeroHeight||0===K.clientHeight,Pe._hasZeroWidth=Pe._hasZeroWidth||0===K.clientWidth;var fe=Pe.scrollZoom,ge=Pe._scrollZoom={};if(!0===fe)ge.cartesian=1,ge.gl3d=1,ge.geo=1,ge.mapbox=1;else if("string"==typeof fe){var be=fe.split("+");for(ye=0;ye<be.length;ye++)ge[be[ye]]=1}else!1!==fe&&(ge.gl3d=1,ge.geo=1,ge.mapbox=1)}function L(K,oe){var he,ye,Me=oe+1,Re=[];for(he=0;he<K.length;he++)(ye=K[he])<0?Re.push(Me+ye):Re.push(ye);return Re}function C(K,oe,he){var ye,Me;for(ye=0;ye<oe.length;ye++){if((Me=oe[ye])!==parseInt(Me,10))throw new Error("all values in "+he+" must be integers");if(Me>=K.data.length||Me<-K.data.length)throw new Error(he+" must be valid indices for gd.data.");if(oe.indexOf(Me,ye+1)>-1||Me>=0&&oe.indexOf(-K.data.length+Me)>-1||Me<0&&oe.indexOf(K.data.length+Me)>-1)throw new Error("each index in "+he+" must be unique.")}}function P(K,oe,he){if(!Array.isArray(K.data))throw new Error("gd.data must be an array.");if(void 0===oe)throw new Error("currentIndices is a required argument.");if(Array.isArray(oe)||(oe=[oe]),C(K,oe,"currentIndices"),void 0===he||Array.isArray(he)||(he=[he]),void 0!==he&&C(K,he,"newIndices"),void 0!==he&&oe.length!==he.length)throw new Error("current and new indices must be of equal length.")}function z(K,oe,he,ye,Me){!function(He,Ve,tt,nt){var st=T.isPlainObject(nt);if(!Array.isArray(He.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ve))throw new Error("update must be a key:value object");if(void 0===tt)throw new Error("indices must be an integer or array of integers");for(var dt in C(He,tt,"indices"),Ve){if(!Array.isArray(Ve[dt])||Ve[dt].length!==tt.length)throw new Error("attribute "+dt+" must be an array of length equal to indices array length");if(st&&(!(dt in nt)||!Array.isArray(nt[dt])||nt[dt].length!==Ve[dt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(K,oe,he,ye);for(var Re=function(He,Ve,tt,nt){var dt,wt,_t,pt,Pt=T.isPlainObject(nt),St=[];for(var Ot in Array.isArray(tt)||(tt=[tt]),tt=L(tt,He.data.length-1),Ve)for(var jt=0;jt<tt.length;jt++){if(dt=(wt=x(He.data[tt[jt]],Ot)).get(),!T.isArrayOrTypedArray(_t=Ve[Ot][jt]))throw new Error("attribute: "+Ot+" index: "+jt+" must be an array");if(!T.isArrayOrTypedArray(dt))throw new Error("cannot extend missing or non-array attribute: "+Ot);if(dt.constructor!==_t.constructor)throw new Error("cannot extend array with an array of a different type: "+Ot);k(pt=Pt?nt[Ot][jt]:nt)||(pt=-1),St.push({prop:wt,target:dt,insert:_t,maxp:Math.floor(pt)})}return St}(K,oe,he,ye),Pe={},De={},fe=0;fe<Re.length;fe++){var ge=Re[fe].prop,Ie=Me(Re[fe].target,Re[fe].insert,Re[fe].maxp);ge.set(Ie[0]),Array.isArray(Pe[ge.astr])||(Pe[ge.astr]=[]),Pe[ge.astr].push(Ie[1]),Array.isArray(De[ge.astr])||(De[ge.astr]=[]),De[ge.astr].push(Re[fe].target.length)}return{update:Pe,maxPoints:De}}function j(K,oe){var he=new K.constructor(K.length+oe.length);return he.set(K),he.set(oe,K.length),he}function R(K,oe,he,ye){K=T.getGraphDiv(K),g.clearPromiseQueue(K);var Me={};if("string"==typeof oe)Me[oe]=he;else{if(!T.isPlainObject(oe))return T.warn("Restyle fail.",oe,he,ye),Promise.reject();Me=T.extendFlat({},oe),void 0===ye&&(ye=he)}Object.keys(Me).length&&(K.changed=!0);var Re=g.coerceTraceIndices(K,ye),Pe=N(K,Me,Re),De=Pe.flags;De.calc&&(K.calcdata=void 0),De.clearAxisTypes&&g.clearAxisTypes(K,Re,{});var fe=[];De.fullReplot?fe.push(I._doPlot):(fe.push(r.previousPromises),r.supplyDefaults(K),De.markerSize&&(r.doCalcdata(K),q(fe)),De.style&&fe.push(y.doTraceStyle),De.colorbars&&fe.push(y.doColorBars),fe.push(u)),fe.push(r.rehover,r.redrag,r.reselect),s.add(K,R,[K,Pe.undoit,Pe.traces],R,[K,Pe.redoit,Pe.traces]);var ge=T.syncOrAsync(fe,K);return ge&&ge.then||(ge=Promise.resolve()),ge.then(function(){return K.emit("plotly_restyle",Pe.eventData),K})}function V(K){return void 0===K?null:K}function D(K,oe){return oe?function(he,ye,Me){var Re=x(he,ye),Pe=Re.set;return Re.set=function(De){B((Me||"")+ye,Re.get(),De,K),Pe(De)},Re}:x}function B(K,oe,he,ye){if(Array.isArray(oe)||Array.isArray(he))for(var Me=Array.isArray(oe)?oe:[],Re=Array.isArray(he)?he:[],Pe=Math.max(Me.length,Re.length),De=0;De<Pe;De++)B(K+"["+De+"]",Me[De],Re[De],ye);else if(T.isPlainObject(oe)||T.isPlainObject(he)){var fe=T.isPlainObject(oe)?oe:{},ge=T.isPlainObject(he)?he:{},be=T.extendFlat({},fe,ge);for(var Ie in be)B(K+"."+Ie,fe[Ie],ge[Ie],ye)}else void 0===ye[K]&&(ye[K]=V(oe))}function N(K,oe,he){var ye,Me=K._fullLayout,Re=K._fullData,Pe=K.data,De=Me._guiEditing,fe=D(Me._preGUI,De),ge=T.extendDeepAll({},oe);U(oe);var be,Ie=d.traceFlags(),He={},Ve={};function tt(){return he.map(function(){})}function nt(qt){var Xt=n.id2name(qt);-1===be.indexOf(Xt)&&be.push(Xt)}function st(qt){return"LAYOUT"+qt+".autorange"}function dt(qt){return"LAYOUT"+qt+".range"}function wt(qt){for(var Xt=qt;Xt<Re.length;Xt++)if(Re[Xt]._input===Pe[qt])return Re[Xt]}function _t(qt,Xt,Kt){if(Array.isArray(qt))qt.forEach(function(xn){_t(xn,Xt,Kt)});else if(!(qt in oe)&&!g.hasParent(oe,qt)){var fn;if("LAYOUT"===qt.substr(0,6))fn=fe(K.layout,qt.replace("LAYOUT",""));else{var nn=he[Kt];fn=D(Me._tracePreGUI[wt(nn)._fullInput.uid],De)(Pe[nn],qt)}qt in Ve||(Ve[qt]=tt()),void 0===Ve[qt][Kt]&&(Ve[qt][Kt]=V(fn.get())),void 0!==Xt&&fn.set(Xt)}}function pt(qt){return function(Xt){return Re[Xt][qt]}}function Pt(qt){return function(Xt,Kt){return!1===Xt?Re[he[Kt]][qt]:null}}for(var St in oe){if(g.hasParent(oe,St))throw new Error("cannot set "+St+" and a parent attribute simultaneously");var Ot,jt,Dt,Ye,Ze,Ne,Je=oe[St];if("autobinx"!==St&&"autobiny"!==St||(St=St.charAt(St.length-1)+"bins",Je=Array.isArray(Je)?Je.map(Pt(St)):!1===Je?he.map(pt(St)):null),He[St]=Je,"LAYOUT"!==St.substr(0,6)){for(Ve[St]=tt(),ye=0;ye<he.length;ye++)if(Ot=Pe[he[ye]],jt=wt(he[ye]),Ye=(Dt=D(Me._tracePreGUI[jt._fullInput.uid],De)(Ot,St)).get(),void 0!==(Ze=Array.isArray(Je)?Je[ye%Je.length]:Je)){var at=Dt.parts[Dt.parts.length-1],Se=St.substr(0,St.length-at.length-1),ze=Se?Se+".":"",Ke=Se?x(jt,Se).get():jt;if((Ne=o.getTraceValObject(jt,Dt.parts))&&Ne.impliedEdits&&null!==Ze)for(var it in Ne.impliedEdits)_t(T.relativeAttr(St,it),Ne.impliedEdits[it],ye);else if("thicknessmode"!==at&&"lenmode"!==at||Ye===Ze||"fraction"!==Ze&&"pixels"!==Ze||!Ke){if("type"===St&&("pie"===Ze!=("pie"===Ye)||"funnelarea"===Ze!=("funnelarea"===Ye))){var ct="x",mt="y";"bar"!==Ze&&"bar"!==Ye||"h"!==Ot.orientation||(ct="y",mt="x"),T.swapAttrs(Ot,["?","?src"],"labels",ct),T.swapAttrs(Ot,["d?","?0"],"label",ct),T.swapAttrs(Ot,["?","?src"],"values",mt),"pie"===Ye||"funnelarea"===Ye?(x(Ot,"marker.color").set(x(Ot,"marker.colors").get()),Me._pielayer.selectAll("g.trace").remove()):e.traceIs(Ot,"cartesian")&&x(Ot,"marker.colors").set(x(Ot,"marker.color").get())}}else{var Lt=Me._size,At=Ke.orient,ht="top"===At||"bottom"===At;if("thicknessmode"===at){var Et=ht?Lt.h:Lt.w;_t(ze+"thickness",Ke.thickness*("fraction"===Ze?1/Et:Et),ye)}else{var gt=ht?Lt.w:Lt.h;_t(ze+"len",Ke.len*("fraction"===Ze?1/gt:gt),ye)}}if(Ve[St][ye]=V(Ye),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(St)){if("orientation"===St){Dt.set(Ze);var kt=Ot.x&&!Ot.y?"h":"v";if((Dt.get()||kt)===jt.orientation)continue}else"orientationaxes"===St&&(Ot.orientation={v:"h",h:"v"}[jt.orientation]);g.swapXYData(Ot),Ie.calc=Ie.clearAxisTypes=!0}else-1!==r.dataArrayContainers.indexOf(Dt.parts[0])?(g.manageArrayContainers(Dt,Ze,Ve),Ie.calc=!0):(Ne?Ne.arrayOk&&!e.traceIs(jt,"regl")&&(T.isArrayOrTypedArray(Ze)||T.isArrayOrTypedArray(Ye))?Ie.calc=!0:d.update(Ie,Ne):Ie.calc=!0,Dt.set(Ze))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(St)&&n.swap(K,he),"orientationaxes"===St){var It=x(K.layout,"hovermode"),Ut=It.get();"x"===Ut?It.set("y"):"y"===Ut?It.set("x"):"x unified"===Ut?It.set("y unified"):"y unified"===Ut&&It.set("x unified")}if(-1!==["orientation","type"].indexOf(St)){for(be=[],ye=0;ye<he.length;ye++){var Nt=Pe[he[ye]];e.traceIs(Nt,"cartesian")&&(nt(Nt.xaxis||"x"),nt(Nt.yaxis||"y"))}_t(be.map(st),!0,0),_t(be.map(dt),[0,1],0)}}else Dt=fe(K.layout,St.replace("LAYOUT","")),Ve[St]=[V(Dt.get())],Dt.set(Array.isArray(Je)?Je[0]:Je),Ie.calc=!0}return(Ie.calc||Ie.plot)&&(Ie.fullReplot=!0),{flags:Ie,undoit:Ve,redoit:He,traces:he,eventData:T.extendDeepNoArrays([],[ge,he])}}function U(K){var oe,he,ye,Me=T.counterRegex("axis",".title",!1,!1),Re=/colorbar\.title$/,Pe=Object.keys(K);for(oe=0;oe<Pe.length;oe++)ye=K[he=Pe[oe]],"title"!==he&&!Me.test(he)&&!Re.test(he)||"string"!=typeof ye&&"number"!=typeof ye?he.indexOf("titlefont")>-1&&-1===he.indexOf("grouptitlefont")?De(he,he.replace("titlefont","title.font")):he.indexOf("titleposition")>-1?De(he,he.replace("titleposition","title.position")):he.indexOf("titleside")>-1?De(he,he.replace("titleside","title.side")):he.indexOf("titleoffset")>-1&&De(he,he.replace("titleoffset","title.offset")):De(he,he.replace("title","title.text"));function De(fe,ge){K[ge]=K[fe],delete K[fe]}}function J(K,oe,he){K=T.getGraphDiv(K),g.clearPromiseQueue(K);var ye={};if("string"==typeof oe)ye[oe]=he;else{if(!T.isPlainObject(oe))return T.warn("Relayout fail.",oe,he),Promise.reject();ye=T.extendFlat({},oe)}Object.keys(ye).length&&(K.changed=!0);var Me=ne(K,ye),Re=Me.flags;Re.calc&&(K.calcdata=void 0);var Pe=[r.previousPromises];Re.layoutReplot?Pe.push(y.layoutReplot):Object.keys(ye).length&&(Y(K,Re,Me)||r.supplyDefaults(K),Re.legend&&Pe.push(y.doLegend),Re.layoutstyle&&Pe.push(y.layoutStyles),Re.axrange&&q(Pe,Me.rangesAltered),Re.ticks&&Pe.push(y.doTicksRelayout),Re.modebar&&Pe.push(y.doModeBar),Re.camera&&Pe.push(y.doCamera),Re.colorbars&&Pe.push(y.doColorBars),Pe.push(u)),Pe.push(r.rehover,r.redrag,r.reselect),s.add(K,J,[K,Me.undoit],J,[K,Me.redoit]);var De=T.syncOrAsync(Pe,K);return De&&De.then||(De=Promise.resolve(K)),De.then(function(){return K.emit("plotly_relayout",Me.eventData),K})}function Y(K,oe,he){var ye=K._fullLayout;if(!oe.axrange)return!1;for(var Me in oe)if("axrange"!==Me&&oe[Me])return!1;for(var Re in he.rangesAltered){var Pe=n.id2name(Re),De=K.layout[Pe],fe=ye[Pe];if(fe.autorange=De.autorange,De.range&&(fe.range=De.range.slice()),fe.cleanRange(),fe._matchGroup)for(var ge in fe._matchGroup)if(ge!==Re){var be=ye[n.id2name(ge)];be.autorange=fe.autorange,be.range=fe.range.slice(),be._input.range=fe.range.slice()}}return!0}function q(K,oe){K.push(f,y.doAutoRangeAndConstraints,oe?function(ye){var Me=[];for(var Re in oe){var Pe=n.getFromId(ye,Re);if(Me.push(Re),-1!==(Pe.ticklabelposition||"").indexOf("inside")&&Pe._anchorAxis&&Me.push(Pe._anchorAxis._id),Pe._matchGroup)for(var De in Pe._matchGroup)oe[De]||Me.push(De)}return n.draw(ye,Me,{skipTitle:!0})}:function(ye){return n.draw(ye,"redraw")},y.drawData,y.finalDraw)}var H=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,X=/^[xyz]axis[0-9]*\.autorange$/,Q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ne(K,oe){var he,ye,Me,Re=K.layout,Pe=K._fullLayout,fe=D(Pe._preGUI,Pe._guiEditing),ge=Object.keys(oe),be=n.list(K),Ie=T.extendDeepAll({},oe),He={};for(U(oe),ge=Object.keys(oe),ye=0;ye<ge.length;ye++)if(0===ge[ye].indexOf("allaxes")){for(Me=0;Me<be.length;Me++){var Ve=be[Me]._id.substr(1),tt=-1!==Ve.indexOf("scene")?Ve+".":"",nt=ge[ye].replace("allaxes",tt+be[Me]._name);oe[nt]||(oe[nt]=oe[ge[ye]])}delete oe[ge[ye]]}var st=d.layoutFlags(),dt={},wt={};function _t(nn,xn){if(Array.isArray(nn))nn.forEach(function(mn){_t(mn,xn)});else if(!(nn in oe)&&!g.hasParent(oe,nn)){var jn=fe(Re,nn);nn in wt||(wt[nn]=V(jn.get())),void 0!==xn&&jn.set(xn)}}var pt,Pt={};function St(nn){var xn=n.name2id(nn.split(".")[0]);return Pt[xn]=1,xn}for(var Ot in oe){if(g.hasParent(oe,Ot))throw new Error("cannot set "+Ot+" and a parent attribute simultaneously");for(var jt=fe(Re,Ot),Dt=oe[Ot],Ye=jt.parts.length-1;Ye>0&&"string"!=typeof jt.parts[Ye];)Ye--;var Ze=jt.parts[Ye],Ne=jt.parts[Ye-1]+"."+Ze,Je=jt.parts.slice(0,Ye).join("."),at=x(K.layout,Je).get(),Se=x(Pe,Je).get(),ze=jt.get();if(void 0!==Dt){dt[Ot]=Dt,wt[Ot]="reverse"===Ze?Dt:V(ze);var Ke=o.getLayoutValObject(Pe,jt.parts);if(Ke&&Ke.impliedEdits&&null!==Dt)for(var it in Ke.impliedEdits)_t(T.relativeAttr(Ot,it),Ke.impliedEdits[it]);if(-1!==["width","height"].indexOf(Ot))if(Dt){_t("autosize",null);var ct="height"===Ot?"width":"height";_t(ct,Pe[ct])}else Pe[Ot]=K._initialAutoSize[Ot];else if("autosize"===Ot)_t("width",Dt?null:Pe.width),_t("height",Dt?null:Pe.height);else if(Ne.match(H))St(Ne),x(Pe,Je+"._inputRange").set(null);else if(Ne.match(X)){St(Ne),x(Pe,Je+"._inputRange").set(null);var mt=x(Pe,Je).get();mt._inputDomain&&(mt._input.domain=mt._inputDomain.slice())}else Ne.match(Q)&&x(Pe,Je+"._inputDomain").set(null);if("type"===Ze){pt=at;var Lt="linear"===Se.type&&"log"===Dt;if(Lt||"log"===Se.type&&"linear"===Dt){if(pt&&pt.range)if(Se.autorange)Lt&&(pt.range=pt.range[1]>pt.range[0]?[1,2]:[2,1]);else{var ht=pt.range[0],Et=pt.range[1];Lt?(ht<=0&&Et<=0&&_t(Je+".autorange",!0),ht<=0?ht=Et/1e6:Et<=0&&(Et=ht/1e6),_t(Je+".range[0]",Math.log(ht)/Math.LN10),_t(Je+".range[1]",Math.log(Et)/Math.LN10)):(_t(Je+".range[0]",Math.pow(10,ht)),_t(Je+".range[1]",Math.pow(10,Et)))}else _t(Je+".autorange",!0);Array.isArray(Pe._subplots.polar)&&Pe._subplots.polar.length&&Pe[jt.parts[0]]&&"radialaxis"===jt.parts[1]&&delete Pe[jt.parts[0]]._subplot.viewInitial["radialaxis.range"],e.getComponentMethod("annotations","convertCoords")(K,Se,Dt,_t),e.getComponentMethod("images","convertCoords")(K,Se,Dt,_t)}else _t(Je+".autorange",!0),_t(Je+".range",null);x(Pe,Je+"._inputRange").set(null)}else if(Ze.match(m)){var gt=x(Pe,Ot).get(),kt=(Dt||{}).type;kt&&"-"!==kt||(kt="linear"),e.getComponentMethod("annotations","convertCoords")(K,gt,kt,_t),e.getComponentMethod("images","convertCoords")(K,gt,kt,_t)}var It=v.containerArrayMatch(Ot);if(It){he=It.array;var Ut=It.property,Nt=Ke||{editType:"calc"};""!==(ye=It.index)&&""===Ut&&(v.isAddVal(Dt)?wt[Ot]=null:v.isRemoveVal(Dt)?wt[Ot]=(x(Re,he).get()||[])[ye]:T.warn("unrecognized full object value",oe)),d.update(st,Nt),He[he]||(He[he]={});var qt=He[he][ye];qt||(qt=He[he][ye]={}),qt[Ut]=Dt,delete oe[Ot]}else"reverse"===Ze?(at.range?at.range.reverse():(_t(Je+".autorange",!0),at.range=[1,0]),Se.autorange?st.calc=!0:st.plot=!0):("dragmode"===Ot&&(!1===Dt&&!1!==ze||!1!==Dt&&!1===ze)||Pe._has("scatter-like")&&Pe._has("regl")&&"dragmode"===Ot&&("lasso"===Dt||"select"===Dt)&&"lasso"!==ze&&"select"!==ze||Pe._has("gl2d")?st.plot=!0:Ke?d.update(st,Ke):st.calc=!0,jt.set(Dt))}}for(he in He)v.applyContainerArrayChanges(K,fe(Re,he),He[he],st,fe)||(st.plot=!0);for(var Xt in Pt){var Kt=(pt=n.getFromId(K,Xt))&&pt._constraintGroup;if(Kt)for(var fn in st.calc=!0,Kt)Pt[fn]||(n.getFromId(K,fn)._constraintShrinkable=!0)}return(re(K)||oe.height||oe.width)&&(st.plot=!0),(st.plot||st.calc)&&(st.layoutReplot=!0),{flags:st,rangesAltered:Pt,undoit:wt,redoit:dt,eventData:Ie}}function re(K){var oe=K._fullLayout,he=oe.width,ye=oe.height;return K.layout.autosize&&r.plotAutoSize(K,K.layout,oe),oe.width!==he||oe.height!==ye}function ae(K,oe,he,ye){K=T.getGraphDiv(K),g.clearPromiseQueue(K),T.isPlainObject(oe)||(oe={}),T.isPlainObject(he)||(he={}),Object.keys(oe).length&&(K.changed=!0),Object.keys(he).length&&(K.changed=!0);var Me=g.coerceTraceIndices(K,ye),Re=N(K,T.extendFlat({},oe),Me),Pe=Re.flags,De=ne(K,T.extendFlat({},he)),fe=De.flags;(Pe.calc||fe.calc)&&(K.calcdata=void 0),Pe.clearAxisTypes&&g.clearAxisTypes(K,Me,he);var ge=[];fe.layoutReplot?ge.push(y.layoutReplot):Pe.fullReplot?ge.push(I._doPlot):(ge.push(r.previousPromises),Y(K,fe,De)||r.supplyDefaults(K),Pe.style&&ge.push(y.doTraceStyle),(Pe.colorbars||fe.colorbars)&&ge.push(y.doColorBars),fe.legend&&ge.push(y.doLegend),fe.layoutstyle&&ge.push(y.layoutStyles),fe.axrange&&q(ge,De.rangesAltered),fe.ticks&&ge.push(y.doTicksRelayout),fe.modebar&&ge.push(y.doModeBar),fe.camera&&ge.push(y.doCamera),ge.push(u)),ge.push(r.rehover,r.redrag,r.reselect),s.add(K,ae,[K,Re.undoit,De.undoit,Re.traces],ae,[K,Re.redoit,De.redoit,Re.traces]);var be=T.syncOrAsync(ge,K);return be&&be.then||(be=Promise.resolve(K)),be.then(function(){return K.emit("plotly_update",{data:Re.eventData,layout:De.eventData}),K})}function se(K){return function(oe){oe._fullLayout._guiEditing=!0;var he=K.apply(null,arguments);return oe._fullLayout._guiEditing=!1,he}}var pe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ke=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function me(K,oe){for(var he=0;he<oe.length;he++){var ye=oe[he],Me=K.match(ye.pattern);if(Me){var Re=Me[1]||"";return{head:Re,tail:K.substr(Re.length+1),attr:ye.attr}}}}function le(K,oe){var he=x(oe,K).get();if(void 0!==he)return he;var ye=K.split(".");for(ye.pop();ye.length>1;)if(ye.pop(),void 0!==(he=x(oe,ye.join(".")+".uirevision").get()))return he;return oe.uirevision}function ue(K,oe){for(var he=0;he<oe.length;he++)if(oe[he]._fullInput.uid===K)return he;return-1}function Ee(K,oe,he){for(var ye=0;ye<oe.length;ye++)if(oe[ye].uid===K)return ye;return!oe[he]||oe[he].uid?-1:he}function de(K,oe){var he=T.isPlainObject(K),ye=Array.isArray(K);return he||ye?(he&&T.isPlainObject(oe)||ye&&Array.isArray(oe))&&JSON.stringify(K)===JSON.stringify(oe):K===oe}function xe(K,oe,he,ye){var Me,Re,Pe,De=ye.getValObject,fe=ye.flags,ge=ye.immutable,be=ye.inArray,Ie=ye.arrayIndex;function He(){var at=Me.editType;be&&-1!==at.indexOf("arraydraw")?T.pushUnique(fe.arrays[be],Ie):(d.update(fe,Me),"none"!==at&&fe.nChanges++,ye.transition&&Me.anim&&fe.nChangesAnim++,(H.test(Pe)||X.test(Pe))&&(fe.rangesAltered[he[0]]=1),Q.test(Pe)&&x(oe,"_inputDomain").set(null),"datarevision"===Re&&(fe.newDataRevision=1))}function Ve(at){return"data_array"===at.valType||at.arrayOk}for(Re in K){if(fe.calc&&!ye.transition)return;var tt=K[Re],nt=oe[Re],st=he.concat(Re);if(Pe=st.join("."),"_"!==Re.charAt(0)&&"function"!=typeof tt&&tt!==nt){if(("tick0"===Re||"dtick"===Re)&&"geo"!==he[0]){var dt=oe.tickmode;if("auto"===dt||"array"===dt||!dt)continue}if(("range"!==Re||!oe.autorange)&&("zmin"!==Re&&"zmax"!==Re||"contourcarpet"!==oe.type)&&(Me=De(st))&&(!Me._compareAsJSON||JSON.stringify(tt)!==JSON.stringify(nt))){var wt,_t=Me.valType,pt=Ve(Me),Pt=Array.isArray(tt),St=Array.isArray(nt);if(Pt&&St){var Ot="_input_"+Re,jt=K[Ot],Dt=oe[Ot];if(Array.isArray(jt)&&jt===Dt)continue}if(void 0===nt)pt&&Pt?fe.calc=!0:He();else if(Me._isLinkedToArray){var Ye=[],Ze=!1;be||(fe.arrays[Re]=Ye);var Ne=Math.min(tt.length,nt.length),Je=Math.max(tt.length,nt.length);if(Ne!==Je){if("arraydraw"!==Me.editType){He();continue}Ze=!0}for(wt=0;wt<Ne;wt++)xe(tt[wt],nt[wt],st.concat(wt),T.extendFlat({inArray:Re,arrayIndex:wt},ye));if(Ze)for(wt=Ne;wt<Je;wt++)Ye.push(wt)}else!_t&&T.isPlainObject(tt)?xe(tt,nt,st,ye):pt?Pt&&St?(ge&&(fe.calc=!0),(ge||ye.newDataRevision)&&He()):Pt!==St?fe.calc=!0:He():Pt&&St&&tt.length===nt.length&&String(tt)===String(nt)||He()}}}for(Re in oe)if(!(Re in K)&&"_"!==Re.charAt(0)&&"function"!=typeof oe[Re]){if(Ve(Me=De(he.concat(Re)))&&Array.isArray(oe[Re]))return void(fe.calc=!0);He()}}function Te(K,oe){var he;for(he in K)if("_"!==he.charAt(0)){var ye=K[he],Me=oe[he];if(ye!==Me)if(T.isPlainObject(ye)&&T.isPlainObject(Me)){if(Te(ye,Me))return!0}else{if(!Array.isArray(ye)||!Array.isArray(Me)||ye.length!==Me.length)return!0;for(var Re=0;Re<ye.length;Re++)if(ye[Re]!==Me[Re]&&(!T.isPlainObject(ye[Re])||!T.isPlainObject(Me[Re])||Te(ye[Re],Me[Re])))return!0}}}function we(K){var oe=K._fullLayout,he=K.getBoundingClientRect();if(!T.equalDomRects(he,oe._lastBBox)){var ye=oe._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(K));oe._invScaleX=Math.sqrt(ye[0][0]*ye[0][0]+ye[0][1]*ye[0][1]+ye[0][2]*ye[0][2]),oe._invScaleY=Math.sqrt(ye[1][0]*ye[1][0]+ye[1][1]*ye[1][1]+ye[1][2]*ye[1][2]),oe._lastBBox=he}}I.animate=function(K,oe,he){if(K=T.getGraphDiv(K),!T.isPlotDiv(K))throw new Error("This element is not a Plotly plot: "+K+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ye=K._transitionData;ye._frameQueue||(ye._frameQueue=[]);var Me=(he=r.supplyAnimationDefaults(he)).transition,Re=he.frame;function Pe(ge){return Array.isArray(Me)?ge>=Me.length?Me[0]:Me[ge]:Me}function De(ge){return Array.isArray(Re)?ge>=Re.length?Re[0]:Re[ge]:Re}function fe(ge,be){var Ie=0;return function(){if(ge&&++Ie===be)return ge()}}return void 0===ye._frameWaitingCnt&&(ye._frameWaitingCnt=0),new Promise(function(ge,be){var He,Ve,tt=0;function nt(Ot){return Ot.transitionOpts=Array.isArray(Me)?tt>=Me.length?Me[tt]:Me[0]:Me,tt++,Ot}var st=[],dt=null==oe,wt=Array.isArray(oe);if(dt||wt||!T.isPlainObject(oe)){if(dt||-1!==["string","number"].indexOf(typeof oe))for(He=0;He<ye._frames.length;He++)(Ve=ye._frames[He])&&(dt||String(Ve.group)===String(oe))&&st.push({type:"byname",name:String(Ve.name),data:nt({name:Ve.name})});else if(wt)for(He=0;He<oe.length;He++){var _t=oe[He];-1!==["number","string"].indexOf(typeof _t)?(_t=String(_t),st.push({type:"byname",name:_t,data:nt({name:_t})})):T.isPlainObject(_t)&&st.push({type:"object",data:nt(T.extendFlat({},_t))})}}else st.push({type:"object",data:nt(T.extendFlat({},oe))});for(He=0;He<st.length;He++)if("byname"===(Ve=st[He]).type&&!ye._frameHash[Ve.data.name])return T.warn('animate failure: frame not found: "'+Ve.data.name+'"'),void be();-1!==["next","immediate"].indexOf(he.mode)&&function(){if(0!==ye._frameQueue.length){for(;ye._frameQueue.length;){var Ot=ye._frameQueue.pop();Ot.onInterrupt&&Ot.onInterrupt()}K.emit("plotly_animationinterrupted",[])}}(),"reverse"===he.direction&&st.reverse();var pt=K._fullLayout._currentFrame;if(pt&&he.fromcurrent){var Pt=-1;for(He=0;He<st.length;He++)if("byname"===(Ve=st[He]).type&&Ve.name===pt){Pt=He;break}if(Pt>0&&Pt<st.length-1){var St=[];for(He=0;He<st.length;He++)Ve=st[He],("byname"!==st[He].type||He>Pt)&&St.push(Ve);st=St}}st.length>0?function(Ot){if(0!==Ot.length){for(var jt=0;jt<Ot.length;jt++){var Dt;Dt="byname"===Ot[jt].type?r.computeFrame(K,Ot[jt].name):Ot[jt].data;var Ye=De(jt),Ze=Pe(jt);Ze.duration=Math.min(Ze.duration,Ye.duration);var Ne={frame:Dt,name:Ot[jt].name,frameOpts:Ye,transitionOpts:Ze};jt===Ot.length-1&&(Ne.onComplete=fe(ge,2),Ne.onInterrupt=be),ye._frameQueue.push(Ne)}"immediate"===he.mode&&(ye._lastFrameAt=-1/0),ye._animationRaf||function Ie(){K.emit("plotly_animating"),ye._lastFrameAt=-1/0,ye._timeToNext=0,ye._runningTransitions=0,ye._currentFrame=null;var Ot=function(){ye._animationRaf=window.requestAnimationFrame(Ot),Date.now()-ye._lastFrameAt>ye._timeToNext&&function(){ye._currentFrame&&ye._currentFrame.onComplete&&ye._currentFrame.onComplete();var jt=ye._currentFrame=ye._frameQueue.shift();if(jt){var Dt=jt.name?jt.name.toString():null;K._fullLayout._currentFrame=Dt,ye._lastFrameAt=Date.now(),ye._timeToNext=jt.frameOpts.duration,r.transition(K,jt.frame.data,jt.frame.layout,g.coerceTraceIndices(K,jt.frame.traces),jt.frameOpts,jt.transitionOpts).then(function(){jt.onComplete&&jt.onComplete()}),K.emit("plotly_animatingframe",{name:Dt,frame:jt.frame,animation:{frame:jt.frameOpts,transition:jt.transitionOpts}})}else K.emit("plotly_animated"),window.cancelAnimationFrame(ye._animationRaf),ye._animationRaf=null}()};Ot()}()}}(st):(K.emit("plotly_animated"),ge())})},I.addFrames=function(K,oe,he){if(K=T.getGraphDiv(K),null==oe)return Promise.resolve();if(!T.isPlotDiv(K))throw new Error("This element is not a Plotly plot: "+K+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ye,Me,Re,Pe,De=K._transitionData._frames,fe=K._transitionData._frameHash;if(!Array.isArray(oe))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+oe);var ge=De.length+2*oe.length,be=[],Ie={};for(ye=oe.length-1;ye>=0;ye--)if(T.isPlainObject(oe[ye])){var He=oe[ye].name,Ve=(fe[He]||Ie[He]||{}).name,tt=oe[ye].name;Ve&&tt&&"number"==typeof tt&&(fe[Ve]||Ie[Ve])&&w<5&&(w++,T.warn('addFrames: overwriting frame "'+(fe[Ve]||Ie[Ve]).name+'" with a frame whose name of type "number" also equates to "'+Ve+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ie[He]={name:He},be.push({frame:r.supplyFrameDefaults(oe[ye]),index:he&&null!=he[ye]?he[ye]:ge+ye})}be.sort(function(Ot,jt){return Ot.index>jt.index?-1:Ot.index<jt.index?1:0});var st=[],dt=[],wt=De.length;for(ye=be.length-1;ye>=0;ye--){if("number"==typeof(Me=be[ye].frame).name&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Me.name)for(;fe[Me.name="frame "+K._transitionData._counter++];);if(fe[Me.name]){for(Re=0;Re<De.length&&(De[Re]||{}).name!==Me.name;Re++);st.push({type:"replace",index:Re,value:Me}),dt.unshift({type:"replace",index:Re,value:De[Re]})}else Pe=Math.max(0,Math.min(be[ye].index,wt)),st.push({type:"insert",index:Pe,value:Me}),dt.unshift({type:"delete",index:Pe}),wt++}return s&&s.add(K,r.modifyFrames,[K,dt],r.modifyFrames,[K,st]),r.modifyFrames(K,st)},I.deleteFrames=function(K,oe){if(K=T.getGraphDiv(K),!T.isPlotDiv(K))throw new Error("This element is not a Plotly plot: "+K);var he,ye,Me=K._transitionData._frames,Re=[],Pe=[];if(!oe)for(oe=[],he=0;he<Me.length;he++)oe.push(he);for((oe=oe.slice()).sort(),he=oe.length-1;he>=0;he--)Re.push({type:"delete",index:ye=oe[he]}),Pe.unshift({type:"insert",index:ye,value:Me[ye]});return s&&s.add(K,r.modifyFrames,[K,Pe],r.modifyFrames,[K,Re]),r.modifyFrames(K,Re)},I.addTraces=function K(oe,he,ye){oe=T.getGraphDiv(oe);var Me,Re,Pe=[],De=I.deleteTraces,fe=K,ge=[oe,Pe],be=[oe,he];for(function(Ie,He,Ve){var tt,nt;if(!Array.isArray(Ie.data))throw new Error("gd.data must be an array.");if(void 0===He)throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),tt=0;tt<He.length;tt++)if("object"!=typeof(nt=He[tt])||Array.isArray(nt)||null===nt)throw new Error("all values in traces array must be non-array objects");if(void 0===Ve||Array.isArray(Ve)||(Ve=[Ve]),void 0!==Ve&&Ve.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(oe,he,ye),Array.isArray(he)||(he=[he]),he=he.map(function(Ie){return T.extendFlat({},Ie)}),g.cleanData(he),Me=0;Me<he.length;Me++)oe.data.push(he[Me]);for(Me=0;Me<he.length;Me++)Pe.push(-he.length+Me);if(void 0===ye)return Re=I.redraw(oe),s.add(oe,De,ge,fe,be),Re;Array.isArray(ye)||(ye=[ye]);try{P(oe,Pe,ye)}catch(Ie){throw oe.data.splice(oe.data.length-he.length,he.length),Ie}return s.startSequence(oe),s.add(oe,De,ge,fe,be),Re=I.moveTraces(oe,Pe,ye),s.stopSequence(oe),Re},I.deleteTraces=function K(oe,he){oe=T.getGraphDiv(oe);var ye,Me,Re=[],Pe=I.addTraces,De=K,fe=[oe,Re,he],ge=[oe,he];if(void 0===he)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(he)||(he=[he]),C(oe,he,"indices"),(he=L(he,oe.data.length-1)).sort(T.sorterDes),ye=0;ye<he.length;ye+=1)Me=oe.data.splice(he[ye],1)[0],Re.push(Me);var be=I.redraw(oe);return s.add(oe,Pe,fe,De,ge),be},I.extendTraces=function K(oe,he,ye,Me){function Re(ge,be,Ie){var He,Ve;if(T.isTypedArray(ge))if(Ie<0){var tt=new ge.constructor(0),nt=j(ge,be);Ie<0?(He=nt,Ve=tt):(He=tt,Ve=nt)}else if(He=new ge.constructor(Ie),Ve=new ge.constructor(ge.length+be.length-Ie),Ie===be.length)He.set(be),Ve.set(ge);else if(Ie<be.length){var st=be.length-Ie;He.set(be.subarray(st)),Ve.set(ge),Ve.set(be.subarray(0,st),ge.length)}else{var dt=Ie-be.length,wt=ge.length-dt;He.set(ge.subarray(wt)),He.set(be,dt),Ve.set(ge.subarray(0,wt))}else He=ge.concat(be),Ve=Ie>=0&&Ie<He.length?He.splice(0,He.length-Ie):[];return[He,Ve]}var Pe=z(oe=T.getGraphDiv(oe),he,ye,Me,Re),De=I.redraw(oe);return s.add(oe,I.prependTraces,[oe,Pe.update,ye,Pe.maxPoints],K,arguments),De},I.moveTraces=function K(oe,he,ye){var Me,Re=[],Pe=[],De=K,fe=K,ge=[oe=T.getGraphDiv(oe),ye,he],be=[oe,he,ye];if(P(oe,he,ye),he=Array.isArray(he)?he:[he],void 0===ye)for(ye=[],Me=0;Me<he.length;Me++)ye.push(-he.length+Me);for(ye=Array.isArray(ye)?ye:[ye],he=L(he,oe.data.length-1),ye=L(ye,oe.data.length-1),Me=0;Me<oe.data.length;Me++)-1===he.indexOf(Me)&&Re.push(oe.data[Me]);for(Me=0;Me<he.length;Me++)Pe.push({newIndex:ye[Me],trace:oe.data[he[Me]]});for(Pe.sort(function(He,Ve){return He.newIndex-Ve.newIndex}),Me=0;Me<Pe.length;Me+=1)Re.splice(Pe[Me].newIndex,0,Pe[Me].trace);oe.data=Re;var Ie=I.redraw(oe);return s.add(oe,De,ge,fe,be),Ie},I.prependTraces=function K(oe,he,ye,Me){function Re(ge,be,Ie){var He,Ve;if(T.isTypedArray(ge))if(Ie<=0){var tt=new ge.constructor(0),nt=j(be,ge);Ie<0?(He=nt,Ve=tt):(He=tt,Ve=nt)}else if(He=new ge.constructor(Ie),Ve=new ge.constructor(ge.length+be.length-Ie),Ie===be.length)He.set(be),Ve.set(ge);else if(Ie<be.length){var st=be.length-Ie;He.set(be.subarray(0,st)),Ve.set(be.subarray(st)),Ve.set(ge,st)}else{var dt=Ie-be.length;He.set(be),He.set(ge.subarray(0,dt),be.length),Ve.set(ge.subarray(dt))}else He=be.concat(ge),Ve=Ie>=0&&Ie<He.length?He.splice(Ie,He.length):[];return[He,Ve]}var Pe=z(oe=T.getGraphDiv(oe),he,ye,Me,Re),De=I.redraw(oe);return s.add(oe,I.extendTraces,[oe,Pe.update,ye,Pe.maxPoints],K,arguments),De},I.newPlot=function(K,oe,he,ye){return K=T.getGraphDiv(K),r.cleanPlot([],{},K._fullData||[],K._fullLayout||{}),r.purge(K),I._doPlot(K,oe,he,ye)},I._doPlot=function(K,oe,he,ye){var Me;if(K=T.getGraphDiv(K),p.init(K),T.isPlainObject(oe)){var Re=oe;oe=Re.data,he=Re.layout,ye=Re.config,Me=Re.frames}if(!1===p.triggerHandler(K,"plotly_beforeplot",[oe,he,ye]))return Promise.reject();oe||he||T.isPlotDiv(K)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",K),E(K,ye),he||(he={}),M.select(K).classed("js-plotly-plot",!0),a.makeTester(),Array.isArray(K._promises)||(K._promises=[]);var Pe=0===(K.data||[]).length&&Array.isArray(oe);Array.isArray(oe)&&(g.cleanData(oe),Pe?K.data=oe:K.data.push.apply(K.data,oe),K.empty=!1),K.layout&&!Pe||(K.layout=g.cleanLayout(he)),r.supplyDefaults(K);var De=K._fullLayout,fe=De._has("cartesian");De._replotting=!0,(Pe||De._shouldCreateBgLayer)&&(function(dt){var wt=M.select(dt),_t=dt._fullLayout;if(_t._calcInverseTransform=we,_t._calcInverseTransform(dt),_t._container=wt.selectAll(".plot-container").data([0]),_t._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),_t._paperdiv=_t._container.selectAll(".svg-container").data([0]),_t._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),_t._glcontainer=_t._paperdiv.selectAll(".gl-container").data([{}]),_t._glcontainer.enter().append("div").classed("gl-container",!0),_t._paperdiv.selectAll(".main-svg").remove(),_t._paperdiv.select(".modebar-container").remove(),_t._paper=_t._paperdiv.insert("svg",":first-child").classed("main-svg",!0),_t._toppaper=_t._paperdiv.append("svg").classed("main-svg",!0),_t._modebardiv=_t._paperdiv.append("div"),delete _t._modeBar,_t._hoverpaper=_t._paperdiv.append("svg").classed("main-svg",!0),!_t._uid){var pt={};M.selectAll("defs").each(function(){this.id&&(pt[this.id.split("-")[1]]=1)}),_t._uid=T.randstr(pt)}_t._paperdiv.selectAll(".main-svg").attr(h.svgAttrs),_t._defs=_t._paper.append("defs").attr("id","defs-"+_t._uid),_t._clips=_t._defs.append("g").classed("clips",!0),_t._topdefs=_t._toppaper.append("defs").attr("id","topdefs-"+_t._uid),_t._topclips=_t._topdefs.append("g").classed("clips",!0),_t._bgLayer=_t._paper.append("g").classed("bglayer",!0),_t._draggers=_t._paper.append("g").classed("draglayer",!0);var Pt=_t._paper.append("g").classed("layer-below",!0);_t._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),_t._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),_t._cartesianlayer=_t._paper.append("g").classed("cartesianlayer",!0),_t._polarlayer=_t._paper.append("g").classed("polarlayer",!0),_t._smithlayer=_t._paper.append("g").classed("smithlayer",!0),_t._ternarylayer=_t._paper.append("g").classed("ternarylayer",!0),_t._geolayer=_t._paper.append("g").classed("geolayer",!0),_t._funnelarealayer=_t._paper.append("g").classed("funnelarealayer",!0),_t._pielayer=_t._paper.append("g").classed("pielayer",!0),_t._iciclelayer=_t._paper.append("g").classed("iciclelayer",!0),_t._treemaplayer=_t._paper.append("g").classed("treemaplayer",!0),_t._sunburstlayer=_t._paper.append("g").classed("sunburstlayer",!0),_t._indicatorlayer=_t._toppaper.append("g").classed("indicatorlayer",!0),_t._glimages=_t._paper.append("g").classed("glimages",!0);var St=_t._toppaper.append("g").classed("layer-above",!0);_t._imageUpperLayer=St.append("g").classed("imagelayer",!0),_t._shapeUpperLayer=St.append("g").classed("shapelayer",!0),_t._selectionLayer=_t._toppaper.append("g").classed("selectionlayer",!0),_t._infolayer=_t._toppaper.append("g").classed("infolayer",!0),_t._menulayer=_t._toppaper.append("g").classed("menulayer",!0),_t._zoomlayer=_t._toppaper.append("g").classed("zoomlayer",!0),_t._hoverlayer=_t._hoverpaper.append("g").classed("hoverlayer",!0),_t._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),dt.emit("plotly_framework")}(K),De._shouldCreateBgLayer&&delete De._shouldCreateBgLayer),a.initGradients(K),a.initPatterns(K),Pe&&n.saveShowSpikeInitial(K);var ge=!K.calcdata||K.calcdata.length!==(K._fullData||[]).length;ge&&r.doCalcdata(K);for(var be=0;be<K.calcdata.length;be++)K.calcdata[be][0].trace=K._fullData[be];K._context.responsive?K._responsiveChartHandler||(K._responsiveChartHandler=function(){T.isHidden(K)||r.resize(K)},window.addEventListener("resize",K._responsiveChartHandler)):T.clearResponsive(K);var Ie=T.extendFlat({},De._size),He=0;function Ve(){if(r.clearAutoMarginIds(K),y.drawMarginPushers(K),n.allowAutoMargin(K),K._fullLayout.title.text&&K._fullLayout.title.automargin&&r.allowAutoMargin(K,"title.automargin"),De._has("pie"))for(var dt=K._fullData,wt=0;wt<dt.length;wt++){var _t=dt[wt];"pie"===_t.type&&_t.automargin&&r.allowAutoMargin(K,"pie."+_t.uid+".automargin")}return r.doAutoMargin(K),r.previousPromises(K)}function tt(){K._transitioning||(y.doAutoRangeAndConstraints(K),Pe&&n.saveRangeInitial(K),e.getComponentMethod("rangeslider","calcAutorange")(K))}var nt=[r.previousPromises,function(){if(Me)return I.addFrames(K,Me)},function dt(){for(var wt=De._basePlotModules,_t=0;_t<wt.length;_t++)wt[_t].drawFramework&&wt[_t].drawFramework(K);!De._glcanvas&&De._has("gl")&&(De._glcanvas=De._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ot){return Ot.key}),De._glcanvas.enter().append("canvas").attr("class",function(Ot){return"gl-canvas gl-canvas-"+Ot.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var pt=K._context.plotGlPixelRatio;if(De._glcanvas){De._glcanvas.attr("width",De.width*pt).attr("height",De.height*pt).style("width",De.width+"px").style("height",De.height+"px");var Pt=De._glcanvas.data()[0].regl;if(Pt&&(Math.floor(De.width*pt)!==Pt._gl.drawingBufferWidth||Math.floor(De.height*pt)!==Pt._gl.drawingBufferHeight)){var St="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!He)return T.log(St+" Clearing graph and plotting again."),r.cleanPlot([],{},K._fullData,De),r.supplyDefaults(K),De=K._fullLayout,r.doCalcdata(K),He++,dt();T.error(St)}}return"h"===De.modebar.orientation?De._modebardiv.style("height",null).style("width","100%"):De._modebardiv.style("width",null).style("height",De.height+"px"),r.previousPromises(K)},Ve,function(){if(r.didMarginChange(Ie,De._size))return T.syncOrAsync([Ve,y.layoutStyles],K)}];fe&&nt.push(function(){if(ge)return T.syncOrAsync([e.getComponentMethod("shapes","calcAutorange"),e.getComponentMethod("annotations","calcAutorange"),tt],K);tt()}),nt.push(y.layoutStyles),fe&&nt.push(function(){return n.draw(K,Pe?"":"redraw")},function(dt){dt._fullLayout._insideTickLabelsAutorange&&J(dt,dt._fullLayout._insideTickLabelsAutorange).then(function(){dt._fullLayout._insideTickLabelsAutorange=void 0})}),nt.push(y.drawData,y.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,function(dt){dt._fullLayout._insideTickLabelsAutorange&&Pe&&n.saveRangeInitial(dt,!0)},r.previousPromises);var st=T.syncOrAsync(nt,K);return st&&st.then||(st=Promise.resolve()),st.then(function(){return u(K),K})},I.purge=function(K){var oe=(K=T.getGraphDiv(K))._fullLayout||{};return r.cleanPlot([],{},K._fullData||[],oe),r.purge(K),p.purge(K),oe._container&&oe._container.remove(),delete K._context,K},I.react=function(K,oe,he,ye){var Me,Re;K=T.getGraphDiv(K),g.clearPromiseQueue(K);var Je,at,Se,ze,Ke,it,Pe=K._fullData,De=K._fullLayout;if(T.isPlotDiv(K)&&Pe&&De){if(T.isPlainObject(oe)){var fe=oe;oe=fe.data,he=fe.layout,ye=fe.config,Me=fe.frames}var ge=!1;if(ye){var be=T.extendDeep({},K._context);K._context=void 0,E(K,ye),ge=Te(be,K._context)}K.data=oe||[],g.cleanData(K.data),K.layout=he||{},g.cleanLayout(K.layout),function(Je,at,Se,ze){var Ke,it,ct,mt,Lt,At,ht,Et,gt,kt,It=ze._preGUI,Ut=[],Nt={},qt={};for(Ke in It){if(Lt=me(Ke,pe)){if(gt=Lt.head,kt=Lt.tail,(mt=(ct=x(ze,it=Lt.attr||gt+".uirevision").get())&&le(it,at))&&mt===ct){if(null===(At=It[Ke])&&(At=void 0),de(Et=(ht=x(at,Ke)).get(),At)){void 0===Et&&"autorange"===kt&&Ut.push(gt),ht.set(V(x(ze,Ke).get()));continue}if("autorange"===kt||"range["===kt.substr(0,6)){var fn=It[gt+".autorange"];if(fn||null===fn&&null===It[gt+".range[0]"]&&null===It[gt+".range[1]"]){if(!(gt in Nt)){var nn=x(at,gt).get();Nt[gt]=nn&&(nn.autorange||!1!==nn.autorange&&(!nn.range||2!==nn.range.length))}if(Nt[gt]){ht.set(V(x(ze,Ke).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Ke);delete It[Ke],Lt&&"range["===Lt.tail.substr(0,6)&&(qt[Lt.head]=1)}for(var xn=0;xn<Ut.length;xn++){var jn=Ut[xn];if(qt[jn]){var mn=x(at,jn).get();mn&&delete mn.autorange}}var en=ze._tracePreGUI;for(var vn in en){var on,sn=en[vn],En=null;for(Ke in sn){if(!En){var kn=ue(vn,Se);if(kn<0){delete en[vn];break}var zn=Ee(vn,Je,(on=Se[kn]._fullInput).index);if(zn<0){delete en[vn];break}En=Je[zn]}if(Lt=me(Ke,ke)){if(Lt.attr?mt=(ct=x(ze,Lt.attr).get())&&le(Lt.attr,at):(ct=on.uirevision,void 0===(mt=En.uirevision)&&(mt=at.uirevision)),mt&&mt===ct&&(null===(At=sn[Ke])&&(At=void 0),de(Et=(ht=x(En,Ke)).get(),At))){ht.set(V(x(on,Ke).get()));continue}}else T.warn("unrecognized GUI edit: "+Ke+" in trace uid "+vn);delete sn[Ke]}}}(K.data,K.layout,Pe,De),r.supplyDefaults(K,{skipUpdateCalc:!0});var Ie=K._fullData,He=K._fullLayout,Ve=void 0===He.datarevision,tt=He.transition,nt=(Je=K,at=De,Se=He,ze=Ve,Ke=tt,(it=d.layoutFlags()).arrays={},it.rangesAltered={},it.nChanges=0,it.nChangesAnim=0,xe(at,Se,[],{getValObject:function(ct){return o.getLayoutValObject(Se,ct)},flags:it,immutable:ze,transition:Ke,gd:Je}),(it.plot||it.calc)&&(it.layoutReplot=!0),Ke&&it.nChanges&&it.nChangesAnim&&(it.anim=it.nChanges===it.nChangesAnim?"all":"some"),it),dt=function(Je,at,Se,ze,Ke,it){var ct=at.length===Se.length;if(!Ke&&!ct)return{fullReplot:!0,calc:!0};var mt,Lt,At=d.traceFlags();At.arrays={},At.nChanges=0,At.nChangesAnim=0;var ht={getValObject:function(gt){var kt=o.getTraceValObject(Lt,gt);return!Lt._module.animatable&&kt.anim&&(kt.anim=!1),kt},flags:At,immutable:ze,transition:Ke,newDataRevision:it,gd:Je},Et={};for(mt=0;mt<at.length;mt++)if(Se[mt]){if(r.hasMakesDataTransform(Lt=Se[mt]._fullInput)&&(Lt=Se[mt]),Et[Lt.uid])continue;Et[Lt.uid]=1,xe(at[mt]._fullInput,Lt,[],ht)}return(At.calc||At.plot)&&(At.fullReplot=!0),Ke&&At.nChanges&&At.nChangesAnim&&(At.anim=At.nChanges===At.nChangesAnim&&ct?"all":"some"),At}(K,Pe,Ie,Ve,tt,nt.newDataRevision);if(re(K)&&(nt.layoutReplot=!0),dt.calc||nt.calc){K.calcdata=void 0;for(var wt=Object.getOwnPropertyNames(He),_t=0;_t<wt.length;_t++){var pt=wt[_t],Pt=pt.substring(0,5);if("xaxis"===Pt||"yaxis"===Pt){var St=He[pt]._emptyCategories;St&&St()}}}else r.supplyDefaultsUpdateCalc(K.calcdata,Ie);var Ot=[];if(Me&&(K._transitionData={},r.createTransitionData(K),Ot.push(function(){return I.addFrames(K,Me)})),He.transition&&!ge&&(dt.anim||nt.anim))nt.ticks&&Ot.push(y.doTicksRelayout),r.doCalcdata(K),y.doAutoRangeAndConstraints(K),Ot.push(function(){return r.transitionFromReact(K,dt,nt,De)});else if(dt.fullReplot||nt.layoutReplot||ge)K._fullLayout._skipDefaults=!0,Ot.push(I._doPlot);else{for(var jt in nt.arrays){var Dt=nt.arrays[jt];if(Dt.length){var Ye=e.getComponentMethod(jt,"drawOne");if(Ye!==T.noop)for(var Ze=0;Ze<Dt.length;Ze++)Ye(K,Dt[Ze]);else{var Ne=e.getComponentMethod(jt,"draw");if(Ne===T.noop)throw new Error("cannot draw components: "+jt);Ne(K)}}}Ot.push(r.previousPromises),dt.style&&Ot.push(y.doTraceStyle),(dt.colorbars||nt.colorbars)&&Ot.push(y.doColorBars),nt.legend&&Ot.push(y.doLegend),nt.layoutstyle&&Ot.push(y.layoutStyles),nt.axrange&&q(Ot),nt.ticks&&Ot.push(y.doTicksRelayout),nt.modebar&&Ot.push(y.doModeBar),nt.camera&&Ot.push(y.doCamera),Ot.push(u)}Ot.push(r.rehover,r.redrag,r.reselect),(Re=T.syncOrAsync(Ot,K))&&Re.then||(Re=Promise.resolve(K))}else Re=I.newPlot(K,oe,he,ye);return Re.then(function(){return K.emit("plotly_react",{data:oe,layout:he}),K})},I.redraw=function(K){if(K=T.getGraphDiv(K),!T.isPlotDiv(K))throw new Error("This element is not a Plotly plot: "+K);return g.cleanData(K.data),g.cleanLayout(K.layout),K.calcdata=void 0,I._doPlot(K).then(function(){return K.emit("plotly_redraw"),K})},I.relayout=J,I.restyle=R,I.setPlotConfig=function(K){return T.extendFlat(b,K)},I.update=ae,I._guiRelayout=se(J),I._guiRestyle=se(R),I._guiUpdate=se(ae),I._storeDirectGUIEdit=function(K,oe,he){for(var ye in he)B(ye,x(K,ye).get(),he[ye],oe)}},72075:function($){"use strict";var I={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},t={};(function M(k,l){for(var T in k){var x=k[T];x.valType?l[T]=x.dflt:(l[T]||(l[T]={}),M(x,l[T]))}})(I,t),$.exports={configAttributes:I,dfltConfig:t}},86281:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(9012),T=t(10820),x=t(31391),p=t(85594),s=t(72075).configAttributes,e=t(30962),o=k.extendDeepAll,r=k.isPlainObject,n=k.isArrayOrTypedArray,a=k.nestedProperty,i=k.valObjectMeta,c="_isSubplotObj",h="_isLinkedToArray",f="_deprecated",b=[c,h,"_arrayAttrRegexps",f];function v(u,S,_){if(!u)return!1;if(u._isLinkedToArray)if(g(S[_]))_++;else if(_<S.length)return!1;for(;_<S.length;_++){var E=u[S[_]];if(!r(E)||(u=E,_===S.length-1))break;if(u._isLinkedToArray){if(!g(S[++_]))return!1}else if("info_array"===u.valType){var L=S[++_];if(!g(L))return!1;var C=u.items;if(Array.isArray(C)){if(L>=C.length)return!1;if(2===u.dimensions){if(_++,S.length===_)return u;var P=S[_];if(!g(P))return!1;u=C[L][P]}else u=C[L]}else u=C}}return u}function g(u){return u===Math.round(u)&&u>=0}function y(){var u,S,_={};for(u in o(_,T),M.subplotsRegistry)if((S=M.subplotsRegistry[u]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(_,S,S.attr[E]);else m(_,S,"subplot"===S.attr?S.name:S.attr);for(u in M.componentsRegistry){var L=(S=M.componentsRegistry[u]).schema;if(L&&(L.subplots||L.layout)){var C=L.subplots;if(C&&C.xaxis&&!C.yaxis)for(var P in C.xaxis)delete _.yaxis[P];delete _.xaxis.shift,delete _.xaxis.autoshift}else"colorscale"===S.name?o(_,S.layoutAttributes):S.layoutAttributes&&w(_,S.layoutAttributes,S.name)}return{layoutAttributes:d(_)}}function d(u){return I.crawl(u,function(_,E,L){I.isValObject(_)?!0!==_.arrayOk&&"data_array"!==_.valType||(L[E+"src"]={valType:"string",editType:"none"}):r(_)&&(_.role="object")}),I.crawl(u,function(_,E,L){if(_){var C=_._isLinkedToArray;C&&(delete _._isLinkedToArray,L[E]={items:{}},L[E].items[C]=_,L[E].role="object")}}),function(S){!function _(E){for(var L in E)if(r(E[L]))_(E[L]);else if(Array.isArray(E[L]))for(var C=0;C<E[L].length;C++)_(E[L][C]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())}(S)}(u),u}function m(u,S,_){var E=a(u,_),L=o({},S.layoutAttributes);L._isSubplotObj=!0,E.set(L)}function w(u,S,_){var E=a(u,_);E.set(o(E.get()||{},S))}I.IS_SUBPLOT_OBJ=c,I.IS_LINKED_TO_ARRAY=h,I.DEPRECATED=f,I.UNDERSCORE_ATTRS=b,I.get=function(){var u={};M.allTypes.forEach(function(E){u[E]=function(L){var C,P;P=(C=M.modules[L]._module).basePlotModule;var z={type:null},j=o({},l),R=o({},C.attributes);I.crawl(R,function(B,N,U,J,Y){a(j,Y).set(void 0),void 0===B&&a(R,Y).set(void 0)}),o(z,j),M.traceIs(L,"noOpacity")&&delete z.opacity,M.traceIs(L,"showLegend")||(delete z.showlegend,delete z.legendgroup),M.traceIs(L,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),C.selectPoints||delete z.selectedpoints,o(z,R),P.attributes&&o(z,P.attributes),z.type=L;var V={meta:C.meta||{},categories:C.categories||{},animatable:Boolean(C.animatable),type:L,attributes:d(z)};if(C.layoutAttributes){var D={};o(D,C.layoutAttributes),V.layoutAttributes=d(D)}return C.animatable||I.crawl(V,function(B){I.isValObject(B)&&"anim"in B&&delete B.anim}),V}(E)});var S,_={};return Object.keys(M.transformsRegistry).forEach(function(E){var L,P;_[E]=(P=o({},M.transformsRegistry[L=E].attributes),Object.keys(M.componentsRegistry).forEach(function(z){var j=M.componentsRegistry[z];j.schema&&j.schema.transforms&&j.schema.transforms[L]&&Object.keys(j.schema.transforms[L]).forEach(function(R){w(P,j.schema.transforms[L][R],R)})}),{attributes:d(P)})}),{defs:{valObjects:i,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:e.traces,layout:e.layout},impliedEdits:{}},traces:u,layout:y(),transforms:_,frames:(S={frames:o({},x)},d(S),S.frames),animation:d(p),config:d(s)}},I.crawl=function(u,S,_,E){var L=_||0;E=E||"",Object.keys(u).forEach(function(C){var P=u[C];if(-1===b.indexOf(C)){var z=(E?E+".":"")+C;S(P,C,u,L,z),I.isValObject(P)||r(P)&&"impliedEdits"!==C&&I.crawl(P,S,L+1,z)}})},I.isValObject=function(u){return u&&void 0!==u.valType},I.findArrayAttributes=function(u){var S,_,E=[],L=[],C=[];function P(B,N,U,J){L=L.slice(0,J).concat([N]),C=C.slice(0,J).concat([B&&B._isLinkedToArray]),B&&("data_array"===B.valType||!0===B.arrayOk)&&("colorbar"!==L[J-1]||"ticktext"!==N&&"tickvals"!==N)&&z(S,0,"")}function z(B,N,U){var J=B[L[N]],Y=U+L[N];if(N===L.length-1)n(J)&&E.push(_+Y);else if(C[N]){if(Array.isArray(J))for(var q=0;q<J.length;q++)r(J[q])&&z(J[q],N+1,Y+"["+q+"].")}else r(J)&&z(J,N+1,Y+".")}S=u,_="",I.crawl(l,P),u._module&&u._module.attributes&&I.crawl(u._module.attributes,P);var j=u.transforms;if(j)for(var R=0;R<j.length;R++){var V=j[R],D=V._module;D&&(_="transforms["+R+"].",S=V,I.crawl(D.attributes,P))}return E},I.getTraceValObject=function(u,S){var _,E,L=S[0],C=1;if("transforms"===L){if(1===S.length)return l.transforms;var P=u.transforms;if(!Array.isArray(P)||!P.length)return!1;var z=S[1];if(!g(z)||z>=P.length)return!1;E=(_=(M.transformsRegistry[P[z].type]||{}).attributes)&&_[S[2]],C=3}else{var j=u._module;if(j||(j=(M.modules[u.type||l.type.dflt]||{})._module),!j)return!1;if(!(E=(_=j.attributes)&&_[L])){var R=j.basePlotModule;R&&R.attributes&&(E=R.attributes[L])}E||(E=l[L])}return v(E,S,C)},I.getLayoutValObject=function(u,S){return v(function(E,L){var C,P,z,j,R=E._basePlotModules;if(R){var V;for(C=0;C<R.length;C++){if((z=R[C]).attrRegex&&z.attrRegex.test(L)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!V&&z.layoutAttributes&&(V=z.layoutAttributes)}var D=z.baseLayoutAttrOverrides;if(D&&L in D)return D[L]}if(V)return V}var B=E._modules;if(B)for(C=0;C<B.length;C++)if((j=B[C].layoutAttributes)&&L in j)return j[L];for(P in M.componentsRegistry){if("colorscale"===(z=M.componentsRegistry[P]).name&&0===L.indexOf("coloraxis"))return z.layoutAttributes[L];if(!z.schema&&L===z.name)return z.layoutAttributes}return L in T&&T[L]}(u,S[0]),S,1)}},44467:function($,I,t){"use strict";var M=t(71828),k=t(9012),l={name:{valType:"string",editType:"none"}};function T(p){return p&&"string"==typeof p}function x(p){return"s"!==p.charAt(p.length-1)&&M.warn("bad argument to arrayDefaultKey: "+p),p.substr(0,p.length-1)+"defaults"}l.templateitemname={valType:"string",editType:"calc"},I.templatedArray=function(p,s){return s._isLinkedToArray=p,s.name=l.name,s.templateitemname=l.templateitemname,s},I.traceTemplater=function(p){var s,e,o={};for(s in p)e=p[s],Array.isArray(e)&&e.length&&(o[s]=0);return{newTrace:function(r){var n={type:s=M.coerce(r,{},k,"type"),_template:null};if(s in o){var a=o[s]%(e=p[s]).length;o[s]++,n._template=e[a]}return n}}},I.newContainer=function(p,s,e){var o=p._template,r=o&&(o[s]||e&&o[e]);return M.isPlainObject(r)||(r=null),p[s]={_template:r}},I.arrayTemplater=function(p,s,e){var o=p._template,r=o&&o[x(s)],n=o&&o[s];Array.isArray(n)&&n.length||(n=[]);var a={};return{newItem:function(i){var c={name:i.name,_input:i},h=c.templateitemname=i.templateitemname;if(!T(h))return c._template=r,c;for(var f=0;f<n.length;f++){var b=n[f];if(b.name===h)return a[h]=1,c._template=b,c}return c[e]=i[e]||!1,c._template=!1,c},defaultItems:function(){for(var i=[],c=0;c<n.length;c++){var h=n[c],f=h.name;if(T(f)&&!a[f]){var b={_template:h,name:f,_input:{_templateitemname:f}};b.templateitemname=h.templateitemname,i.push(b),a[f]=1}}return i}}},I.arrayDefaultKey=x,I.arrayEditor=function(p,s,e){var o=(M.nestedProperty(p,s).get()||[]).length,r=e._index,n=r>=o&&(e._input||{})._templateitemname;n&&(r=o);var a,i=s+"["+r+"]";function c(){a={},n&&(a[i]={},a[i].templateitemname=n)}function h(b,v){n?M.nestedProperty(a[i],b).set(v):a[i+"."+b]=v}function f(){var b=a;return c(),b}return c(),{modifyBase:function(b,v){a[b]=v},modifyItem:h,getUpdateObj:f,applyUpdate:function(b,v){b&&h(b,v);var g=f();for(var y in g)M.nestedProperty(p,y).set(g[y])}}}},61549:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(74875),T=t(71828),x=t(63893),p=t(33306),s=t(7901),e=t(91424),o=t(92998),r=t(64168),n=t(89298),a=t(18783),i=t(99082),c=i.enforce,h=i.clean,f=t(71739).doAutoRange,b="start";function v(w,u,S){for(var _=0;_<S.length;_++){var E=S[_][0],L=S[_][1];if(!(E[0]>=w[1]||E[1]<=w[0])&&L[0]<u[1]&&L[1]>u[0])return!0}return!1}function g(w){var u,S,_,E,L,C,P=w._fullLayout,z=P._size,j=z.p,R=n.list(w,"",!0);if(P._paperdiv.style({width:w._context.responsive&&P.autosize&&!w._context._hasZeroWidth&&!w.layout.width?"100%":P.width+"px",height:w._context.responsive&&P.autosize&&!w._context._hasZeroHeight&&!w.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(e.setSize,P.width,P.height),w._context.setBackground(w,P.paper_bgcolor),I.drawMainTitle(w),r.manage(w),!P._has("cartesian"))return l.previousPromises(w);function V(Ie,He,Ve){var tt=Ie._lw/2;return"x"===Ie._id.charAt(0)?He?"top"===Ve?He._offset-j-tt:He._offset+He._length+j+tt:z.t+z.h*(1-(Ie.position||0))+tt%1:He?"right"===Ve?He._offset+He._length+j+tt:He._offset-j-tt:z.l+z.w*(Ie.position||0)+tt%1}for(u=0;u<R.length;u++){var D=(E=R[u])._anchorAxis;E._linepositions={},E._lw=e.crispRound(w,E.linewidth,1),E._mainLinePosition=V(E,D,E.side),E._mainMirrorPosition=E.mirror&&D?V(E,D,a.OPPOSITE_SIDE[E.side]):null}var B=[],N=[],U=[],J=1===s.opacity(P.paper_bgcolor)&&1===s.opacity(P.plot_bgcolor)&&P.paper_bgcolor===P.plot_bgcolor;for(S in P._plots)if((_=P._plots[S]).mainplot)_.bg&&_.bg.remove(),_.bg=void 0;else{var Y=_.xaxis.domain,q=_.yaxis.domain,H=_.plotgroup;if(v(Y,q,U)){var X=H.node(),Q=_.bg=T.ensureSingle(H,"rect","bg");X.insertBefore(Q.node(),X.childNodes[0]),N.push(S)}else H.select("rect.bg").remove(),U.push([Y,q]),J||(B.push(S),N.push(S))}var ne,re,ae,se,pe,ke,me,le,ue,Ee,de,xe,Te,we=P._bgLayer.selectAll(".bg").data(B);for(we.enter().append("rect").classed("bg",!0),we.exit().remove(),we.each(function(Ie){P._plots[Ie].bg=M.select(this)}),u=0;u<N.length;u++)L=(_=P._plots[N[u]]).xaxis,C=_.yaxis,_.bg&&void 0!==L._offset&&void 0!==C._offset&&_.bg.call(e.setRect,L._offset-j,C._offset-j,L._length+2*j,C._length+2*j).call(s.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(S in P._plots){L=(_=P._plots[S]).xaxis,C=_.yaxis;var K,oe,he=_.clipId="clip"+P._uid+S+"plot",ye=T.ensureSingleById(P._clips,"clipPath",he,function(Ie){Ie.classed("plotclip",!0).append("rect")});_.clipRect=ye.select("rect").attr({width:L._length,height:C._length}),e.setTranslate(_.plot,L._offset,C._offset),_._hasClipOnAxisFalse?(K=null,oe=he):(K=he,oe=null),e.setClipUrl(_.plot,K,w),_.layerClipId=oe}function Me(Ie){return"M"+ne+","+Ie+"H"+re}function Re(Ie){return"M"+L._offset+","+Ie+"h"+L._length}function Pe(Ie){return"M"+Ie+","+le+"V"+me}function De(Ie){return void 0!==C._shift&&(Ie+=C._shift),"M"+Ie+","+C._offset+"v"+C._length}function fe(Ie,He,Ve){if(!Ie.showline||S!==Ie._mainSubplot)return"";if(!Ie._anchorAxis)return Ve(Ie._mainLinePosition);var tt=He(Ie._mainLinePosition);return Ie.mirror&&(tt+=He(Ie._mainMirrorPosition)),tt}for(S in P._plots){C=(_=P._plots[S]).yaxis;var ge="M0,0";y(L=_.xaxis,S)&&(pe=m(L,"left",C,R),ne=L._offset-(pe?j+pe:0),ke=m(L,"right",C,R),re=L._offset+L._length+(ke?j+ke:0),ae=V(L,C,"bottom"),se=V(L,C,"top"),!(Te=!L._anchorAxis||S!==L._mainSubplot)||"allticks"!==L.mirror&&"all"!==L.mirror||(L._linepositions[S]=[ae,se]),ge=fe(L,Me,Re),Te&&L.showline&&("all"===L.mirror||"allticks"===L.mirror)&&(ge+=Me(ae)+Me(se)),_.xlines.style("stroke-width",L._lw+"px").call(s.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),_.xlines.attr("d",ge);var be="M0,0";y(C,S)&&(de=m(C,"bottom",L,R),me=C._offset+C._length+(de?j:0),xe=m(C,"top",L,R),le=C._offset-(xe?j:0),ue=V(C,L,"left"),Ee=V(C,L,"right"),!(Te=!C._anchorAxis||S!==C._mainSubplot)||"allticks"!==C.mirror&&"all"!==C.mirror||(C._linepositions[S]=[ue,Ee]),be=fe(C,Pe,De),Te&&C.showline&&("all"===C.mirror||"allticks"===C.mirror)&&(be+=Pe(ue)+Pe(Ee)),_.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),_.ylines.attr("d",be)}return n.makeClipPaths(w),l.previousPromises(w)}function y(w,u){return(w.ticks||w.showline)&&(u===w._mainSubplot||"all"===w.mirror||"allticks"===w.mirror)}function d(w,u,S){if(!S.showline||!S._lw)return!1;if("all"===S.mirror||"allticks"===S.mirror)return!0;var _=S._anchorAxis;if(!_)return!1;var E=a.FROM_BL[u];return S.side===u?_.domain[E]===w.domain[E]:S.mirror&&_.domain[1-E]===w.domain[1-E]}function m(w,u,S,_){if(d(w,u,S))return S._lw;for(var E=0;E<_.length;E++){var L=_[E];if(L._mainAxis===S._mainAxis&&d(w,u,L))return L._lw}return 0}I.layoutStyles=function(w){return T.syncOrAsync([l.doAutoMargin,g],w)},I.drawMainTitle=function(w){var u,D,B,S=w._fullLayout.title,_=w._fullLayout,E=(B="middle",T.isRightAnchor(D=_.title)?B="end":T.isLeftAnchor(D)&&(B=b),B),L=function(V){var D=V.title,B="0em";return T.isTopAnchor(D)?B=a.CAP_SHIFT+"em":T.isMiddleAnchor(D)&&(B=a.MID_SHIFT+"em"),B}(_),C=function(V,D){var B=V.title,N=V._size,U=0;return"0em"!==D&&D?D===a.CAP_SHIFT+"em"&&(U=B.pad.t):U=-B.pad.b,"auto"===B.y?N.t/2:"paper"===B.yref?N.t+N.h-N.h*B.y+U:V.height-V.height*B.y+U}(_,L),P=function(V,D){var B=V.title,N=V._size,U=0;return D===b?U=B.pad.l:"end"===D&&(U=-B.pad.r),"paper"===B.xref?N.l+N.w*B.x+U:V.width*B.x+U}(_,E);if(o.draw(w,"gtitle",{propContainer:_,propName:"title.text",placeholder:_._dfltTitle.plot,attributes:{x:P,y:C,"text-anchor":E,dy:L}}),S.text&&S.automargin){var z=M.selectAll(".gtitle"),j=e.bBox(z.node()).height,R=function(V,D,B){var X,Q,ne,re,ae,N=D.y,J=N>.5?"t":"b",q=0;return"paper"===D.yref?q=B+D.pad.t+D.pad.b:"container"===D.yref&&(X=N,ne=V._fullLayout.height,re=B,ae=0,"middle"===(Q=D.yanchor)&&(ae+=re/2),"t"===J?("top"===Q&&(ae+=re),ae+=ne-X*ne):("bottom"===Q&&(ae+=re),ae+=X*ne),q=ae+D.pad.t+D.pad.b),q>V._fullLayout.margin[J]?q:0}(w,S,j);R>0&&(function(V,D,B,N){var X,Q,ne,re,ae,se,pe,ke,U="title.automargin",J=V._fullLayout.title,Y=J.y>.5?"t":"b",q={x:J.x,y:J.y,t:0,b:0},H={};"paper"===J.yref&&(X=V,ne=Y,re=D,ae=N,se="paper"===(Q=J).yref?X._fullLayout._size.h:X._fullLayout.height,pe=T.isTopAnchor(Q)?re:re-ae,ke="b"===ne?se-pe:pe,!(T.isTopAnchor(Q)&&"t"===ne||T.isBottomAnchor(Q)&&"b"===ne)&&ke<ae)?q[Y]=B:"container"===J.yref&&(H[Y]=B,V._fullLayout._reservedMargin[U]=H),l.allowAutoMargin(V,U),l.autoMargin(V,U,q)}(w,C,R,j),z.attr({x:P,y:C,"text-anchor":E,dy:(u=S.yanchor,"top"===u?a.CAP_SHIFT+.3+"em":"bottom"===u?"-0.3em":a.MID_SHIFT+"em")}).call(x.positionText,P,C))}},I.doTraceStyle=function(w){var u,S=w.calcdata,_=[];for(u=0;u<S.length;u++){var E=S[u],L=E[0]||{},C=L.trace||{},P=C._module||{},z=P.arraysToCalcdata;z&&z(E,C);var j=P.editStyle;j&&_.push({fn:j,cd0:L})}if(_.length){for(u=0;u<_.length;u++){var R=_[u];R.fn(w,R.cd0)}p(w),I.redrawReglTraces(w)}return l.style(w),k.getComponentMethod("legend","draw")(w),l.previousPromises(w)},I.doColorBars=function(w){return k.getComponentMethod("colorbar","draw")(w),l.previousPromises(w)},I.layoutReplot=function(w){var u=w.layout;return w.layout=void 0,k.call("_doPlot",w,"",u)},I.doLegend=function(w){return k.getComponentMethod("legend","draw")(w),l.previousPromises(w)},I.doTicksRelayout=function(w){return n.draw(w,"redraw"),w._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(w),p(w),I.redrawReglTraces(w)),I.drawMainTitle(w),l.previousPromises(w)},I.doModeBar=function(w){var u=w._fullLayout;r.manage(w);for(var S=0;S<u._basePlotModules.length;S++){var _=u._basePlotModules[S].updateFx;_&&_(w)}return l.previousPromises(w)},I.doCamera=function(w){for(var u=w._fullLayout,S=u._subplots.gl3d,_=0;_<S.length;_++){var E=u[S[_]];E._scene.setViewport(E)}},I.drawData=function(w){var u=w._fullLayout;p(w);for(var S=u._basePlotModules,_=0;_<S.length;_++)S[_].plot(w);return I.redrawReglTraces(w),l.style(w),k.getComponentMethod("selections","draw")(w),k.getComponentMethod("shapes","draw")(w),k.getComponentMethod("annotations","draw")(w),k.getComponentMethod("images","draw")(w),u._replotting=!1,l.previousPromises(w)},I.redrawReglTraces=function(w){var u=w._fullLayout;if(u._has("regl")){var S,_,E=w._fullData,L=[],C=[];for(u._hasOnlyLargeSploms&&u._splomGrid.draw(),S=0;S<E.length;S++){var P=E[S];!0===P.visible&&0!==P._length&&("splom"===P.type?u._splomScenes[P.uid].draw():"scattergl"===P.type?T.pushUnique(L,P.xaxis+P.yaxis):"scatterpolargl"===P.type&&T.pushUnique(C,P.subplot))}for(S=0;S<L.length;S++)(_=u._plots[L[S]])._scene&&_._scene.draw();for(S=0;S<C.length;S++)(_=u[C[S]]._subplot)._scene&&_._scene.draw()}},I.doAutoRangeAndConstraints=function(w){for(var u,S=n.list(w,"",!0),_={},E=0;E<S.length;E++)if(!_[(u=S[E])._id]){_[u._id]=1,h(w,u),f(w,u);var L=u._matchGroup;if(L)for(var C in L){var P=n.getFromId(w,C);f(w,P,u.range),_[C]=1}}c(w)},I.finalDraw=function(w){k.getComponentMethod("rangeslider","draw")(w),k.getComponentMethod("rangeselector","draw")(w)},I.drawMarginPushers=function(w){k.getComponentMethod("legend","draw")(w),k.getComponentMethod("rangeselector","draw")(w),k.getComponentMethod("sliders","draw")(w),k.getComponentMethod("updatemenus","draw")(w),k.getComponentMethod("colorbar","draw")(w)}},96318:function($,I,t){"use strict";var M=t(71828),k=M.isPlainObject,l=t(86281),T=t(74875),x=t(9012),p=t(44467),s=t(72075).dfltConfig;function e(f,b){f=M.extendDeep({},f);var v,g,y=Object.keys(f).sort();function d(_,E,L){if(k(E)&&k(_))e(_,E);else if(Array.isArray(E)&&Array.isArray(_)){var C=p.arrayTemplater({_template:f},L);for(g=0;g<E.length;g++){var P=E[g],z=C.newItem(P)._template;z&&e(z,P)}var j=C.defaultItems();for(g=0;g<j.length;g++)E.push(j[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(v=0;v<y.length;v++){var m=y[v],w=f[m];if(m in b?d(w,b[m],m):b[m]=w,o(m)===m)for(var u in b){var S=o(u);u===S||S!==m||u in f||d(w,b[u],m)}}}function o(f){return f.replace(/[0-9]+$/,"")}function r(f,b,v,g,y){var d=y&&v(y);for(var m in f){var w=f[m],u=i(f,m,g),S=i(f,m,y),_=v(S);if(!_){var E=o(m);E!==m&&(_=v(S=i(f,E,y)))}if(!(d&&d===_||!_||_._noTemplating||"data_array"===_.valType||_.arrayOk&&Array.isArray(w)))if(!_.valType&&k(w))r(w,b,v,u,S);else if(_._isLinkedToArray&&Array.isArray(w))for(var L=!1,C=0,P={},z=0;z<w.length;z++){var j=w[z];if(k(j)){var R=j.name;if(R)P[R]||(r(j,b,v,i(w,C,u),i(w,C,S)),C++,P[R]=1);else if(!L){var V=i(f,p.arrayDefaultKey(m),g),D=i(w,C,u);r(j,b,v,D,i(w,C,S));var B=M.nestedProperty(b,D);M.nestedProperty(b,V).set(B.get()),B.set(null),L=!0}}}else M.nestedProperty(b,u).set(w)}}function n(f,b){return l.getLayoutValObject(f,M.nestedProperty({},b).parts)}function a(f,b){return l.getTraceValObject(f,M.nestedProperty({},b).parts)}function i(f,b,v){return v?Array.isArray(f)?v+"["+b+"]":v+"."+b:b}function c(f){for(var b=0;b<f.length;b++)if(k(f[b]))return!0}function h(f){var b;switch(f.code){case"data":b="The template has no key data.";break;case"layout":b="The template has no key layout.";break;case"missing":b=f.path?"There are no templates for item "+f.path+" with name "+f.templateitemname:"There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":b=f.path?"The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?"Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":"The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":b="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type."}return f.msg=b,f}I.makeTemplate=function(f){f=M.isPlainObject(f)?f:M.getGraphDiv(f),f=M.extendDeep({_context:s},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var b=f.data||[],v=f.layout||{};v._basePlotModules=f._fullLayout._basePlotModules,v._modules=f._fullLayout._modules;var g={data:{},layout:{}};b.forEach(function(C){var P={};r(C,P,a.bind(null,C));var z=M.coerce(C,{},x,"type"),j=g.data[z];j||(j=g.data[z]=[]),j.push(P)}),r(v,g.layout,n.bind(null,v)),delete g.layout.template;var y=v.template;if(k(y)){var d,m,w,u,S,_,E=y.layout;k(E)&&e(E,g.layout);var L=y.data;if(k(L)){for(m in g.data)if(w=L[m],Array.isArray(w)){for(_=(S=g.data[m]).length,u=w.length,d=0;d<_;d++)e(w[d%u],S[d]);for(d=_;d<u;d++)S.push(M.extendDeep({},w[d]))}for(m in L)m in g.data||(g.data[m]=M.extendDeep([],L[m]))}}return g},I.validateTemplate=function(f,b){var v=M.extendDeep({},{_context:s,data:f.data,layout:f.layout}),g=v.layout||{};k(b)||(b=g.template||{});var y=b.layout,d=b.data,m=[];v.layout=g,v.layout.template=b,T.supplyDefaults(v);var w=v._fullLayout,u=v._fullData,S={};if(k(y)?(function j(R,V){for(var D in R)if("_"!==D.charAt(0)&&k(R[D])){var B,N=o(D),U=[];for(B=0;B<V.length;B++)U.push(i(R,D,V[B])),N!==D&&U.push(i(R,N,V[B]));for(B=0;B<U.length;B++)S[U[B]]=1;j(R[D],U)}}(w,["layout"]),function j(R,V){for(var D in R)if(-1===D.indexOf("defaults")&&k(R[D])){var B=i(R,D,V);S[B]?j(R[D],B):m.push({code:"unused",path:B})}}(y,"layout")):m.push({code:"layout"}),k(d)){for(var _,E={},L=0;L<u.length;L++){var C=u[L];E[_=C.type]=(E[_]||0)+1,C._fullInput._template||m.push({code:"missing",index:C._fullInput.index,traceType:_})}for(_ in d){var P=d[_].length,z=E[_]||0;P>z?m.push({code:"unused",traceType:_,templateCount:P,dataCount:z}):z>P&&m.push({code:"reused",traceType:_,templateCount:P,dataCount:z})}}else m.push({code:"data"});if(function j(R,V){for(var D in R)if("_"!==D.charAt(0)){var B=R[D],N=i(R,D,V);k(B)?(Array.isArray(R)&&!1===B._template&&B.templateitemname&&m.push({code:"missing",path:N,templateitemname:B.templateitemname}),j(B,N)):Array.isArray(B)&&c(B)&&j(B,N)}}({data:u,layout:w},""),m.length)return m.map(h)}},403:function($,I,t){"use strict";var M=t(92770),k=t(72391),l=t(74875),T=t(71828),x=t(25095),p=t(5900),s=t(70942),e=t(11506).version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};$.exports=function(r,n){var a,i,c,h;function f(z){return!(z in n)||T.validate(n[z],o[z])}if(n=n||{},T.isPlainObject(r)?(a=r.data||[],i=r.layout||{},c=r.config||{},h={}):(r=T.getGraphDiv(r),a=T.extendDeep([],r.data),i=T.extendDeep({},r.layout),c=r._context,h=r._fullLayout||{}),!f("width")&&null!==n.width||!f("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Export format is not "+T.join2(o.format.values,", "," or ")+".");var b={};function v(z,j){return T.coerce(n,b,o,z,j)}var g=v("format"),y=v("width"),d=v("height"),m=v("scale"),w=v("setBackground"),u=v("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var _=T.extendFlat({},i);y?_.width=y:null===n.width&&M(h.width)&&(_.width=h.width),d?_.height=d:null===n.height&&M(h.height)&&(_.height=h.height);var E=T.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=x.getRedrawFunc(S);function C(){return new Promise(function(z){setTimeout(z,x.getDelay(S._fullLayout))})}function P(){return new Promise(function(z,j){var R=p(S,g,m),V=S._fullLayout.width,D=S._fullLayout.height;function B(){k.purge(S),document.body.removeChild(S)}if("full-json"===g){var N=l.graphJson(S,!1,"keepdata","object",!0,!0);return N.version=e,N=JSON.stringify(N),B(),z(u?N:x.encodeJSON(N))}if(B(),"svg"===g)return z(u?R:x.encodeSVG(R));var U=document.createElement("canvas");U.id=T.randstr(),s({format:g,width:V,height:D,scale:m,canvas:U,svg:R,promise:!0}).then(z).catch(j)})}return new Promise(function(z,j){k.newPlot(S,a,_,E).then(L).then(C).then(P).then(function(R){var V;z((V=R,u?V.replace(x.IMAGE_URL_PREFIX,""):V))}).catch(function(R){j(R)})})}},84936:function($,I,t){"use strict";var M=t(71828),k=t(74875),l=t(86281),T=t(72075).dfltConfig,x=M.isPlainObject,p=Array.isArray,s=M.isArrayOrTypedArray;function e(b,v,g,y,d,m){m=m||[];for(var w=Object.keys(b),u=0;u<w.length;u++){var S=w[u];if("transforms"!==S){var _=m.slice();_.push(S);var E=b[S],L=v[S],C=c(g,S),P=(C||{}).valType,z="info_array"===P,j="colorscale"===P,R=(C||{}).items;if(i(g,S))if(x(E)&&x(L)&&"any"!==P)e(E,L,C,y,d,_);else if(z&&p(E)){E.length>L.length&&y.push(a("unused",d,_.concat(L.length)));var V,D,N,U,J=L.length,Y=Array.isArray(R);if(Y&&(J=Math.min(J,R.length)),2===C.dimensions)for(D=0;D<J;D++)if(p(E[D])){E[D].length>L[D].length&&y.push(a("unused",d,_.concat(D,L[D].length)));var q=L[D].length;for(V=0;V<(Y?Math.min(q,R[D].length):q);V++)U=L[D][V],M.validate(N=E[D][V],Y?R[D][V]:R)?U!==N&&U!==+N&&y.push(a("dynamic",d,_.concat(D,V),N,U)):y.push(a("value",d,_.concat(D,V),N))}else y.push(a("array",d,_.concat(D),E[D]));else for(D=0;D<J;D++)U=L[D],M.validate(N=E[D],Y?R[D]:R)?U!==N&&U!==+N&&y.push(a("dynamic",d,_.concat(D),N,U)):y.push(a("value",d,_.concat(D),N))}else if(C.items&&!z&&p(E)){var H,X,Q=R[Object.keys(R)[0]],ne=[];for(H=0;H<L.length;H++){var re=L[H]._index||H;if((X=_.slice()).push(re),x(E[re])&&x(L[H])){ne.push(re);var ae=E[re],se=L[H];x(ae)&&!1!==ae.visible&&!1===se.visible?y.push(a("invisible",d,X)):e(ae,se,Q,y,d,X)}}for(H=0;H<E.length;H++)(X=_.slice()).push(H),x(E[H])?-1===ne.indexOf(H)&&y.push(a("unused",d,X)):y.push(a("object",d,X,E[H]))}else!x(E)&&x(L)?y.push(a("object",d,_,E)):s(E)||!s(L)||z||j?S in v?M.validate(E,C)?"enumerated"===C.valType&&(C.coerceNumber&&E!==+L||E!==L)&&y.push(a("dynamic",d,_,E,L)):y.push(a("value",d,_,E)):y.push(a("unused",d,_,E)):y.push(a("array",d,_,E));else y.push(a("schema",d,_))}}return y}function o(b,v){for(var g=b.layout.layoutAttributes,y=0;y<v.length;y++){var d=v[y],m=b.traces[d.type],w=m.layoutAttributes;w&&M.extendFlat(d.subplot?g[m.attributes.subplot.dflt]:g,w)}return g}$.exports=function(b,v){void 0===b&&(b=[]),void 0===v&&(v={});var g,y,d=l.get(),m=[],w={_context:M.extendFlat({},T)};p(b)?(w.data=M.extendDeep([],b),g=b):(w.data=[],g=[],m.push(a("array","data"))),x(v)?(w.layout=M.extendDeep({},v),y=v):(w.layout={},y={},arguments.length>1&&m.push(a("object","layout"))),k.supplyDefaults(w);for(var u=w._fullData,S=g.length,_=0;_<S;_++){var E=g[_],L=["data",_];if(x(E)){var C=u[_],P=C.type,z=d.traces[P].attributes;z.type={valType:"enumerated",values:[P]},!1===C.visible&&!1!==E.visible&&m.push(a("invisible",L)),e(E,C,z,m,L);var j=E.transforms,R=C.transforms;if(j){p(j)||m.push(a("array",L,["transforms"])),L.push("transforms");for(var V=0;V<j.length;V++){var D=["transforms",V],B=j[V].type;if(x(j[V])){var N=d.transforms[B]?d.transforms[B].attributes:{};N.type={valType:"enumerated",values:Object.keys(d.transforms)},e(j[V],R[V],N,m,L,D)}else m.push(a("object",L,D))}}}else m.push(a("object",L))}return e(y,w._fullLayout,o(d,u),m,"layout"),0===m.length?void 0:m};var r={object:function(b,v){return("layout"===b&&""===v?"The layout argument":"data"===b[0]&&""===v?"Trace "+b[1]+" in the data argument":n(b)+"key "+v)+" must be linked to an object container"},array:function(b,v){return("data"===b?"The data argument":n(b)+"key "+v)+" must be linked to an array container"},schema:function(b,v){return n(b)+"key "+v+" is not part of the schema"},unused:function(b,v,g){var y=x(g)?"container":"key";return n(b)+y+" "+v+" did not get coerced"},dynamic:function(b,v,g,y){return[n(b)+"key",v,"(set to '"+g+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(b,v){return(v?n(b)+"item "+v:"Trace "+b[1])+" got defaulted to be not visible"},value:function(b,v,g){return[n(b)+"key "+v,"is set to an invalid value ("+g+")"].join(" ")}};function n(b){return p(b)?"In data trace "+b[1]+", ":"In "+b+", "}function a(b,v,g,y,d){var m,w;g=g||"",p(v)?(m=v[0],w=v[1]):(m=v,w=null);var u=function(_){if(!p(_))return String(_);for(var E="",L=0;L<_.length;L++){var C=_[L];"number"==typeof C?E=E.substr(0,E.length-1)+"["+C+"]":E+=C,L<_.length-1&&(E+=".")}return E}(g),S=r[b](v,u,y,d);return M.log(S),{code:b,container:m,trace:w,path:g,astr:u,msg:S}}function i(b,v){var g=f(v),y=g.keyMinusId;return!!(y in b&&b[y]._isSubplotObj&&g.id)||v in b}function c(b,v){return v in b?b[v]:b[f(v).keyMinusId]}var h=M.counterRegex("([a-z]+)");function f(b){var v=b.match(h);return{keyMinusId:v&&v[1],id:v&&v[2]}}},85594:function($){"use strict";$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function($,I,t){"use strict";var M=t(71828),k=t(44467);$.exports=function(l,T,x){var p,s,e=x.name,o=x.inclusionAttr||"visible",r=T[e],n=M.isArrayOrTypedArray(l[e])?l[e]:[],a=T[e]=[],i=k.arrayTemplater(T,e,o);for(p=0;p<n.length;p++){var c=n[p];M.isPlainObject(c)?s=i.newItem(c):(s=i.newItem({}))[o]=!1,s._index=p,!1!==s[o]&&x.handleItemDefaults(c,s,T,x),a.push(s)}var h=i.defaultItems();for(p=0;p<h.length;p++)(s=h[p])._index=a.length,x.handleItemDefaults({},s,T,x,{}),a.push(s);if(M.isArrayOrTypedArray(r)){var f=Math.min(r.length,a.length);for(p=0;p<f;p++)M.relinkPrivateKeys(a[p],r[p])}return a}},9012:function($,I,t){"use strict";var M=t(41940),k=t(77914);$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=k.dateTime2ms,T=k.incrementMonth,x=t(50606).ONEAVGMONTH;$.exports=function(p,s,e,o){if("date"!==s.type)return{vals:o};var r=p[e+"periodalignment"];if(!r)return{vals:o};var n,a=p[e+"period"];if(M(a)){if((a=+a)<=0)return{vals:o}}else if("string"==typeof a&&"M"===a.charAt(0)){var i=+a.substring(1);if(!(i>0&&Math.round(i)===i))return{vals:o};n=i}for(var c=s.calendar,h="start"===r,f="end"===r,v=l(p[e+"period0"],c)||0,g=[],y=[],d=[],m=o.length,w=0;w<m;w++){var u,S,_,E=o[w];if(n){for(u=Math.round((E-v)/(n*x)),_=T(v,n*u,c);_>E;)_=T(_,-n,c);for(;_<=E;)_=T(_,n,c);S=T(_,-n,c)}else{for(_=v+(u=Math.round((E-v)/a))*a;_>E;)_-=a;for(;_<=E;)_+=a;S=_-a}g[w]=h?S:f?_:(S+_)/2,y[w]=S,d[w]=_}return{vals:g,starts:y,ends:d}}},89502:function($){"use strict";$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(71828),T=t(50606).FP_SAFE,x=t(73972),p=t(91424),s=t(41675),e=s.getFromId,o=s.isLinked;function r(y,d){var m,w,u=[],S=y._fullLayout,_=a(S,d,0),E=a(S,d,1),L=i(y,d),C=L.min,P=L.max;if(0===C.length||0===P.length)return l.simpleMap(d.range,d.r2l);var z=C[0].val,j=P[0].val;for(m=1;m<C.length&&z===j;m++)z=Math.min(z,C[m].val);for(m=1;m<P.length&&z===j;m++)j=Math.max(j,P[m].val);var R=!1;if(d.range){var V=l.simpleMap(d.range,d.r2l);R=V[1]<V[0]}"reversed"===d.autorange&&(R=!0,d.autorange=!0);var D,B,N,U,J,Y,q=d.rangemode,H="tozero"===q,X="nonnegative"===q,Q=d._length,ne=Q/10,re=0;for(m=0;m<C.length;m++)for(D=C[m],w=0;w<P.length;w++)(Y=(B=P[w]).val-D.val-n(d,D.val,B.val))>0&&((J=Q-_(D)-E(B))>ne?Y/J>re&&(N=D,U=B,re=Y/J):Y/Q>re&&(N={val:D.val,nopad:1},U={val:B.val,nopad:1},re=Y/Q));if(z===j){var ae=z-1,se=z+1;if(H)if(0===z)u=[0,1];else{var pe=(z>0?P:C).reduce(function(me,le){return Math.max(me,E(le))},0),ke=z/(1-Math.min(.5,pe/Q));u=z>0?[0,ke]:[ke,0]}else u=X?[Math.max(0,ae),Math.max(1,se)]:[ae,se]}else H?(N.val>=0&&(N={val:0,nopad:1}),U.val<=0&&(U={val:0,nopad:1})):X&&(N.val-re*_(N)<0&&(N={val:0,nopad:1}),U.val<=0&&(U={val:1,nopad:1})),re=(U.val-N.val-n(d,D.val,B.val))/(Q-_(N)-E(U)),u=[N.val-re*_(N),U.val+re*E(U)];return R&&u.reverse(),l.simpleMap(u,d.l2r||Number)}function n(y,d,m){var w=0;if(y.rangebreaks)for(var u=y.locateBreaks(d,m),S=0;S<u.length;S++){var _=u[S];w+=_.max-_.min}return w}function a(y,d,m){var w=.05*d._length,u=d._anchorAxis||{};if(-1!==(d.ticklabelposition||"").indexOf("inside")||-1!==(u.ticklabelposition||"").indexOf("inside")){var S="reversed"===d.autorange;if(!S){var _=l.simpleMap(d.range,d.r2l);S=_[1]<_[0]}S&&(m=!m)}var E=0;return o(y,d._id)||(E=function(L,C,P){var z=0,j="x"===C._id.charAt(0);for(var R in L._plots){var V=L._plots[R];if(C._id===V.xaxis._id||C._id===V.yaxis._id){var D=(j?V.yaxis:V.xaxis)||{};if(-1!==(D.ticklabelposition||"").indexOf("inside")&&(!P&&("left"===D.side||"bottom"===D.side)||P&&("top"===D.side||"right"===D.side))){if(D._vals){var B=l.deg2rad(D._tickAngles[D._id+"tick"]||0),N=Math.abs(Math.cos(B)),U=Math.abs(Math.sin(B));D._vals[0].bb||D._selections[D._id+"tick"].each(function(Q){var ne=M.select(this);ne.select(".text-math-group").empty()&&(Q.bb=p.bBox(ne.node()))});for(var Y=0;Y<D._vals.length;Y++){var q=D._vals[Y].bb;if(q){var H=6+q.width,X=6+q.height;z=Math.max(z,j?Math.max(H*N,X*U):Math.max(X*N,H*U))}}}"inside"===D.ticks&&"inside"===D.ticklabelposition&&(z+=D.ticklen||0)}}}return z}(y,d,m)),w=Math.max(E,w),"domain"===d.constrain&&d._inputDomain&&(w*=(d._inputDomain[1]-d._inputDomain[0])/(d.domain[1]-d.domain[0])),function(L){return L.nopad?0:L.pad+(L.extrapad?w:E)}}function i(y,d,m){var w,u,S,_=d._id,L=y._fullLayout,C=[],P=[];function z(B,N){for(w=0;w<N.length;w++){var U=B[N[w]],J=(U._extremes||{})[_];if(!0===U.visible&&J){for(u=0;u<J.min.length;u++)c(C,(S=J.min[u]).val,S.pad,{extrapad:S.extrapad});for(u=0;u<J.max.length;u++)h(P,(S=J.max[u]).val,S.pad,{extrapad:S.extrapad})}}}if(z(y._fullData,d._traceIndices),z(L.annotations||[],d._annIndices||[]),z(L.shapes||[],d._shapeIndices||[]),d._matchGroup&&!m)for(var j in d._matchGroup)if(j!==d._id){var R=e(y,j),V=i(y,R,!0),D=d._length/R._length;for(u=0;u<V.min.length;u++)c(C,(S=V.min[u]).val,S.pad*D,{extrapad:S.extrapad});for(u=0;u<V.max.length;u++)h(P,(S=V.max[u]).val,S.pad*D,{extrapad:S.extrapad})}return{min:C,max:P}}function c(y,d,m,w){f(y,d,m,w,v)}function h(y,d,m,w){f(y,d,m,w,g)}function f(y,d,m,w,u){for(var S=w.tozero,_=w.extrapad,E=!0,L=0;L<y.length&&E;L++){var C=y[L];if(u(C.val,d)&&C.pad>=m&&(C.extrapad||!_)){E=!1;break}u(d,C.val)&&C.pad<=m&&(_||!C.extrapad)&&(y.splice(L,1),L--)}if(E){var P=S&&0===d;y.push({val:d,pad:P?0:m,extrapad:!P&&_})}}function b(y){return k(y)&&Math.abs(y)<T}function v(y,d){return y<=d}function g(y,d){return y>=d}$.exports={getAutoRange:r,makePadFn:a,doAutoRange:function(y,d,m){if(d.setScale(),d.autorange){d.range=m?m.slice():r(y,d),d._r=d.range.slice(),d._rl=l.simpleMap(d._r,d.r2l);var w=d._input,u={};u[d._attr+".range"]=d.range,u[d._attr+".autorange"]=d.autorange,x.call("_storeDirectGUIEdit",y.layout,y._fullLayout._preGUI,u),w.range=d.range.slice(),w.autorange=d.autorange}var S=d._anchorAxis;if(S&&S.rangeslider){var _=S.rangeslider[d._name];_&&"auto"===_.rangemode&&(_.range=r(y,d)),S._input.rangeslider[d._name]=l.extendFlat({},_)}},findExtremes:function(y,d,m){m||(m={}),y._m||y.setScale();var w,u,S,_,E,L,C,P,z,j=[],R=[],V=d.length,D=m.padded||!1,B=m.tozero&&("linear"===y.type||"-"===y.type),N="log"===y.type,U=!1,J=m.vpadLinearized||!1;function Y(se){if(Array.isArray(se))return U=!0,function(ke){return Math.max(Number(se[ke]||0),0)};var pe=Math.max(Number(se||0),0);return function(){return pe}}var q=Y((y._m>0?m.ppadplus:m.ppadminus)||m.ppad||0),H=Y((y._m>0?m.ppadminus:m.ppadplus)||m.ppad||0),X=Y(m.vpadplus||m.vpad),Q=Y(m.vpadminus||m.vpad);if(!U){if(P=1/0,z=-1/0,N)for(w=0;w<V;w++)(u=d[w])<P&&u>0&&(P=u),u>z&&u<T&&(z=u);else for(w=0;w<V;w++)(u=d[w])<P&&u>-T&&(P=u),u>z&&u<T&&(z=u);d=[P,z],V=2}var ne={tozero:B,extrapad:D};function re(se){k(S=d[se])&&(L=q(se),C=H(se),J?(_=y.c2l(S)-Q(se),E=y.c2l(S)+X(se)):(P=S-Q(se),z=S+X(se),N&&P<z/10&&(P=z/10),_=y.c2l(P),E=y.c2l(z)),B&&(_=Math.min(0,_),E=Math.max(0,E)),b(_)&&c(j,_,C,ne),b(E)&&h(R,E,L,ne))}var ae=Math.min(6,V);for(w=0;w<ae;w++)re(w);for(w=V-1;w>=ae;w--)re(w);return{min:j,max:R,opts:m}},concatExtremes:i}},89298:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(74875),T=t(73972),x=t(71828),p=x.strTranslate,s=t(63893),e=t(92998),o=t(7901),r=t(91424),n=t(13838),a=t(66287),i=t(50606),c=i.ONEMAXYEAR,h=i.ONEAVGYEAR,f=i.ONEMINYEAR,b=i.ONEMAXQUARTER,v=i.ONEAVGQUARTER,g=i.ONEMINQUARTER,y=i.ONEMAXMONTH,d=i.ONEAVGMONTH,m=i.ONEMINMONTH,w=i.ONEWEEK,u=i.ONEDAY,S=u/2,_=i.ONEHOUR,E=i.ONEMIN,L=i.ONESEC,C=i.MINUS_SIGN,P=i.BADNUM,z={K:"zeroline"},j={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},V={K:"tick",L:"path"},D={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},N=t(18783),U=N.MID_SHIFT,J=N.CAP_SHIFT,Y=N.LINE_SPACING,q=N.OPPOSITE_SIDE,H=$.exports={};H.setConvert=t(21994);var X=t(4322),Q=t(41675),ne=Q.idSort,re=Q.isLinked;H.id2name=Q.id2name,H.name2id=Q.name2id,H.cleanId=Q.cleanId,H.list=Q.list,H.listIds=Q.listIds,H.getFromId=Q.getFromId,H.getFromTrace=Q.getFromTrace;var ae=t(71739);function se(Se){var ze=1e-4*(Se[1]-Se[0]);return[Se[0]-ze,Se[1]+ze]}H.getAutoRange=ae.getAutoRange,H.findExtremes=ae.findExtremes,H.coerceRef=function(Se,ze,Ke,it,ct,mt){var Lt=it.charAt(it.length-1),At=Ke._fullLayout._subplots[Lt+"axis"],ht=it+"ref",Et={};return ct||(ct=At[0]||("string"==typeof mt?mt:mt[0])),mt||(mt=ct),At=At.concat(At.map(function(gt){return gt+" domain"})),Et[ht]={valType:"enumerated",values:At.concat(mt?"string"==typeof mt?[mt]:mt:[]),dflt:ct},x.coerce(Se,ze,Et,ht)},H.getRefType=function(Se){return void 0===Se?Se:"paper"===Se?"paper":"pixel"===Se?"pixel":/( domain)$/.test(Se)?"domain":"range"},H.coercePosition=function(Se,ze,Ke,it,ct,mt){var Lt,At;if("range"!==H.getRefType(it))Lt=x.ensureNumber,At=Ke(ct,mt);else{var ht=H.getFromId(ze,it);At=Ke(ct,mt=ht.fraction2r(mt)),Lt=ht.cleanPos}Se[ct]=Lt(At)},H.cleanPosition=function(Se,ze,Ke){return("paper"===Ke||"pixel"===Ke?x.ensureNumber:H.getFromId(ze,Ke).cleanPos)(Se)},H.redrawComponents=function(Se,ze){ze=ze||H.listIds(Se);var Ke=Se._fullLayout;function it(ct,mt,Lt,At){for(var ht=T.getComponentMethod(ct,mt),Et={},gt=0;gt<ze.length;gt++)for(var kt=Ke[H.id2name(ze[gt])][Lt],It=0;It<kt.length;It++){var Ut=kt[It];if(!Et[Ut]&&(ht(Se,Ut),Et[Ut]=1,At))return}}it("annotations","drawOne","_annIndices"),it("shapes","drawOne","_shapeIndices"),it("images","draw","_imgIndices",!0),it("selections","drawOne","_selectionIndices")};var pe=H.getDataConversions=function(Se,ze,Ke,it){var ct,mt="x"===Ke||"y"===Ke||"z"===Ke?Ke:it;if(Array.isArray(mt)){if(ct={type:X(it,void 0,{autotypenumbers:Se._fullLayout.autotypenumbers}),_categories:[]},H.setConvert(ct),"category"===ct.type)for(var Lt=0;Lt<it.length;Lt++)ct.d2c(it[Lt])}else ct=H.getFromTrace(Se,ze,mt);return ct?{d2c:ct.d2c,c2d:ct.c2d}:"ids"===mt?{d2c:me,c2d:me}:{d2c:ke,c2d:ke}};function ke(Se){return+Se}function me(Se){return String(Se)}function le(Se,ze){return Math.abs((Se/ze+.5)%1-.5)<.001}function ue(Se,ze){return Math.abs(Se/ze-1)<.001}function Ee(Se){return+Se.substring(1)}function de(Se,ze){return Se.rangebreaks&&(ze=ze.filter(function(Ke){return Se.maskBreaks(Ke.x)!==P})),ze}function xe(Se){var ze=Se._mainAxis,Ke=[];if(ze._vals)for(var it=0;it<ze._vals.length;it++)if(!ze._vals[it].noTick){var ct=ze.l2p(ze._vals[it].x),mt=Se.p2l(ct),Lt=H.tickText(Se,mt);ze._vals[it].minor&&(Lt.minor=!0,Lt.text=""),Ke.push(Lt)}return de(Se,Ke)}function Te(Se){var ze=se(x.simpleMap(Se.range,Se.r2l)),Ke=Math.min(ze[0],ze[1]),it=Math.max(ze[0],ze[1]),ct="category"===Se.type?Se.d2l_noadd:Se.d2l;"log"===Se.type&&"L"!==String(Se.dtick).charAt(0)&&(Se.dtick="L"+Math.pow(10,Math.floor(Math.min(Se.range[0],Se.range[1]))-1));for(var mt=[],Lt=0;Lt<=1;Lt++)if(!Lt||Se.minor){var At=Lt?Se.minor.tickvals:Se.tickvals,ht=Lt?[]:Se.ticktext;if(At){Array.isArray(ht)||(ht=[]);for(var Et=0;Et<At.length;Et++){var gt=ct(At[Et]);if(gt>Ke&&gt<it){var kt=void 0===ht[Et]?H.tickText(Se,gt):fe(Se,gt,String(ht[Et]));Lt&&(kt.minor=!0,kt.text=""),mt.push(kt)}}}}return de(Se,mt)}H.getDataToCoordFunc=function(Se,ze,Ke,it){return pe(Se,ze,Ke,it).d2c},H.counterLetter=function(Se){var ze=Se.charAt(0);return"x"===ze?"y":"y"===ze?"x":void 0},H.minDtick=function(Se,ze,Ke,it){-1===["log","category","multicategory"].indexOf(Se.type)&&it?void 0===Se._minDtick?(Se._minDtick=ze,Se._forceTick0=Ke):Se._minDtick&&((Se._minDtick/ze+1e-6)%1<2e-6&&((Ke-Se._forceTick0)/ze%1+1.000001)%1<2e-6?(Se._minDtick=ze,Se._forceTick0=Ke):((ze/Se._minDtick+1e-6)%1>2e-6||((Ke-Se._forceTick0)/Se._minDtick%1+1.000001)%1>2e-6)&&(Se._minDtick=0)):Se._minDtick=0},H.saveRangeInitial=function(Se,ze){for(var Ke=H.list(Se,"",!0),it=!1,ct=0;ct<Ke.length;ct++){var mt=Ke[ct],Lt=void 0===mt._rangeInitial;(Lt&&!1===mt.autorange||ze&&(Lt||mt.range[0]!==mt._rangeInitial[0]||mt.range[1]!==mt._rangeInitial[1]))&&(mt._rangeInitial=mt.range.slice(),it=!0)}return it},H.saveShowSpikeInitial=function(Se,ze){for(var Ke=H.list(Se,"",!0),it=!1,ct="on",mt=0;mt<Ke.length;mt++){var Lt=Ke[mt],At=void 0===Lt._showSpikeInitial;(At||ze&&(At||Lt.showspikes!==Lt._showspikes))&&(Lt._showSpikeInitial=Lt.showspikes,it=!0),"on"!==ct||Lt.showspikes||(ct="off")}return Se._fullLayout._cartesianSpikesEnabled=ct,it},H.autoBin=function(Se,ze,Ke,it,ct,mt){var Lt,At=x.aggNums(Math.min,null,Se),ht=x.aggNums(Math.max,null,Se);if("category"===ze.type||"multicategory"===ze.type)return{start:At-.5,end:ht+.5,size:Math.max(1,Math.round(mt)||1),_dataSpan:ht-At};if(ct||(ct=ze.calendar),Lt="log"===ze.type?{type:"linear",range:[At,ht]}:{type:ze.type,range:x.simpleMap([At,ht],ze.c2r,0,ct),calendar:ct},H.setConvert(Lt),mt=mt&&a.dtick(mt,Lt.type))Lt.dtick=mt,Lt.tick0=a.tick0(void 0,Lt.type,ct);else{var Et;if(Ke)Et=(ht-At)/Ke;else{var gt=x.distinctVals(Se),kt=Math.pow(10,Math.floor(Math.log(gt.minDiff)/Math.LN10)),It=kt*x.roundUp(gt.minDiff/kt,[.9,1.9,4.9,9.9],!0);Et=Math.max(It,2*x.stdev(Se)/Math.pow(Se.length,it?.25:.4)),k(Et)||(Et=1)}H.autoTicks(Lt,Et)}var Ut,Nt=Lt.dtick,qt=H.tickIncrement(H.tickFirst(Lt),Nt,"reverse",ct);if("number"==typeof Nt)Ut=(qt=function(Xt,Kt,fn,nn,xn){var jn=0,mn=0,en=0,vn=0;function on(zn){return(1+100*(zn-Xt)/fn.dtick)%100<2}for(var sn=0;sn<Kt.length;sn++)Kt[sn]%1==0?en++:k(Kt[sn])||vn++,on(Kt[sn])&&jn++,on(Kt[sn]+fn.dtick/2)&&mn++;var En=Kt.length-vn;if(en===En&&"date"!==fn.type)fn.dtick<1?Xt=nn-.5*fn.dtick:(Xt-=.5)+fn.dtick<nn&&(Xt+=fn.dtick);else if(mn<.1*En&&(jn>.3*En||on(nn)||on(xn))){var kn=fn.dtick/2;Xt+=Xt+kn<nn?kn:-kn}return Xt}(qt,Se,Lt,At,ht))+(1+Math.floor((ht-qt)/Nt))*Nt;else for("M"===Lt.dtick.charAt(0)&&(qt=function(Xt,Kt,fn,nn,xn){var jn=x.findExactDates(Kt,xn);if(jn.exactDays>.8){var mn=Number(fn.substr(1));jn.exactYears>.8&&mn%12==0?Xt=H.tickIncrement(Xt,"M6","reverse")+1.5*u:jn.exactMonths>.8?Xt=H.tickIncrement(Xt,"M1","reverse")+15.5*u:Xt-=S;var en=H.tickIncrement(Xt,fn);if(en<=nn)return en}return Xt}(qt,Se,Nt,At,ct)),Ut=qt;Ut<=ht;)Ut=H.tickIncrement(Ut,Nt,!1,ct);return{start:ze.c2r(qt,0,ct),end:ze.c2r(Ut,0,ct),size:Nt,_dataSpan:ht-At}},H.prepMinorTicks=function(Se,ze,Ke){if(!ze.minor.dtick){delete Se.dtick;var it,ct=ze.dtick&&k(ze._tmin);if(ct){var mt=H.tickIncrement(ze._tmin,ze.dtick,!0);it=[ze._tmin,.99*mt+.01*ze._tmin]}else{var Lt=x.simpleMap(ze.range,ze.r2l);it=[Lt[0],.8*Lt[0]+.2*Lt[1]]}if(Se.range=x.simpleMap(it,ze.l2r),Se._isMinor=!0,H.prepTicks(Se,Ke),ct){var At=k(ze.dtick),ht=k(Se.dtick),Et=At?ze.dtick:+ze.dtick.substring(1),gt=ht?Se.dtick:+Se.dtick.substring(1);At&&ht?le(Et,gt)?Et===2*w&&gt===2*u&&(Se.dtick=w):Se.dtick=Et===2*w&&gt===3*u?w:Et!==w||(ze._input.minor||{}).nticks?ue(Et/gt,2.5)?Et/2:Et:u:"M"===String(ze.dtick).charAt(0)?ht?Se.dtick="M1":le(Et,gt)?Et>=12&&2===gt&&(Se.dtick="M3"):Se.dtick=ze.dtick:"L"===String(Se.dtick).charAt(0)?"L"===String(ze.dtick).charAt(0)?le(Et,gt)||(Se.dtick=ue(Et/gt,2.5)?ze.dtick/2:ze.dtick):Se.dtick="D1":"D2"===Se.dtick&&+ze.dtick>1&&(Se.dtick=1)}Se.range=ze.range}void 0===ze.minor._tick0Init&&(Se.tick0=ze.tick0)},H.prepTicks=function(Se,ze){var Ke=x.simpleMap(Se.range,Se.r2l,void 0,void 0,ze);if("auto"===Se.tickmode||!Se.dtick){var it,ct=Se.nticks;ct||("category"===Se.type||"multicategory"===Se.type?(it=Se.tickfont?x.bigFont(Se.tickfont.size||12):15,ct=Se._length/it):(it="y"===Se._id.charAt(0)?40:80,ct=x.constrain(Se._length/it,4,9)+1),"radialaxis"===Se._name&&(ct*=2)),Se.minor&&"array"!==Se.minor.tickmode||"array"===Se.tickmode&&(ct*=100),Se._roughDTick=Math.abs(Ke[1]-Ke[0])/ct,H.autoTicks(Se,Se._roughDTick),Se._minDtick>0&&Se.dtick<2*Se._minDtick&&(Se.dtick=Se._minDtick,Se.tick0=Se.l2r(Se._forceTick0))}"period"===Se.ticklabelmode&&function(mt){var Lt;function At(){return!(k(mt.dtick)||"M"!==mt.dtick.charAt(0))}var ht=At(),Et=H.getTickFormat(mt);if(Et){var gt=mt._dtickInit!==mt.dtick;/%[fLQsSMX]/.test(Et)||(/%[HI]/.test(Et)?(Lt=_,gt&&!ht&&mt.dtick<_&&(mt.dtick=_)):/%p/.test(Et)?(Lt=S,gt&&!ht&&mt.dtick<S&&(mt.dtick=S)):/%[Aadejuwx]/.test(Et)?(Lt=u,gt&&!ht&&mt.dtick<u&&(mt.dtick=u)):/%[UVW]/.test(Et)?(Lt=w,gt&&!ht&&mt.dtick<w&&(mt.dtick=w)):/%[Bbm]/.test(Et)?(Lt=d,gt&&(ht?Ee(mt.dtick)<1:mt.dtick<m)&&(mt.dtick="M1")):/%[q]/.test(Et)?(Lt=v,gt&&(ht?Ee(mt.dtick)<3:mt.dtick<g)&&(mt.dtick="M3")):/%[Yy]/.test(Et)&&(Lt=h,gt&&(ht?Ee(mt.dtick)<12:mt.dtick<f)&&(mt.dtick="M12")))}(ht=At())&&mt.tick0===mt._dowTick0&&(mt.tick0=mt._rawTick0),mt._definedDelta=Lt}(Se),Se.tick0||(Se.tick0="date"===Se.type?"2000-01-01":0),"date"===Se.type&&Se.dtick<.1&&(Se.dtick=.1),De(Se)},H.calcTicks=function(Se,ze){for(var Ke,it,ct=Se.type,mt=Se.calendar,Lt=Se.ticklabelstep,At="period"===Se.ticklabelmode,ht=x.simpleMap(Se.range,Se.r2l,void 0,void 0,ze),Et=ht[1]<ht[0],gt=Math.min(ht[0],ht[1]),kt=Math.max(ht[0],ht[1]),It=Math.max(1e3,Se._length||0),Ut=[],Nt=[],qt=[],Xt=[],Kt=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),fn=1;fn>=(Kt?0:1);fn--){var nn=!fn;fn?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var xn=fn?Se:x.extendFlat({},Se,Se.minor);if(nn?H.prepMinorTicks(xn,Se,ze):H.prepTicks(xn,ze),"array"!==xn.tickmode)if("sync"!==xn.tickmode){var jn=se(ht),mn=jn[0],en=jn[1],vn=k(xn.dtick),on="log"===ct&&!(vn||"L"===xn.dtick.charAt(0)),sn=H.tickFirst(xn,ze);if(fn){if(Se._tmin=sn,sn<mn!==Et)break;"category"!==ct&&"multicategory"!==ct||(en=Et?Math.max(-.5,en):Math.min(Se._categories.length-.5,en))}var En,kn,zn=null,Fn=sn;fn&&(vn?kn=Se.dtick:"date"===ct?"string"==typeof Se.dtick&&"M"===Se.dtick.charAt(0)&&(kn=d*Se.dtick.substring(1)):kn=Se._roughDTick,En=Math.round((Se.r2l(Fn)-Se.r2l(Se.tick0))/kn)-1);var Bn=xn.dtick;for(xn.rangebreaks&&xn._tick0Init!==xn.tick0&&(Fn=Ze(Fn,Se),Et||(Fn=H.tickIncrement(Fn,Bn,!Et,mt))),fn&&At&&(Fn=H.tickIncrement(Fn,Bn,!Et,mt),En--);Et?Fn>=en:Fn<=en;Fn=H.tickIncrement(Fn,Bn,Et,mt)){if(fn&&En++,xn.rangebreaks&&!Et){if(Fn<mn)continue;if(xn.maskBreaks(Fn)===P&&Ze(Fn,xn)>=kt)break}if(qt.length>It||Fn===zn)break;zn=Fn;var er={value:Fn};fn?(on&&Fn!==(0|Fn)&&(er.simpleLabel=!0),Lt>1&&En%Lt&&(er.skipLabel=!0),qt.push(er)):(er.minor=!0,Xt.push(er))}}else qt=[],Ut=xe(Se);else fn?(qt=[],Ut=Te(Se)):(Xt=[],Nt=Te(Se))}if(Kt&&!("inside"===Se.minor.ticks&&"outside"===Se.ticks||"outside"===Se.minor.ticks&&"inside"===Se.ticks)){for(var Xn=qt.map(function(Mn){return Mn.value}),mr=[],ur=0;ur<Xt.length;ur++){var $n=Xt[ur],lr=$n.value;if(-1===Xn.indexOf(lr)){for(var hr=!1,Gt=0;!hr&&Gt<qt.length;Gt++)1e7+qt[Gt].value===1e7+lr&&(hr=!0);hr||mr.push($n)}}Xt=mr}if(At&&function(Mn,zt,Zt){for(var rn=0;rn<Mn.length;rn++){var Ln=Mn[rn].value,Sn=rn,wn=rn+1;rn<Mn.length-1?(Sn=rn,wn=rn+1):rn>0?(Sn=rn-1,wn=rn):(Sn=rn,wn=rn);var ln,hn=Math.abs(Mn[wn].value-Mn[Sn].value),bn=Zt||hn,In=0;bn>=f?In=hn>=f&&hn<=c?hn:h:Zt===v&&bn>=g?In=hn>=g&&hn<=b?hn:v:bn>=m?In=hn>=m&&hn<=y?hn:d:Zt===w&&bn>=w?In=w:bn>=u?In=u:Zt===S&&bn>=S?In=S:Zt===_&&bn>=_&&(In=_),In>=hn&&(In=hn,ln=!0);var Hn=Ln+In;if(zt.rangebreaks&&In>0){for(var Wn=0,Gn=0;Gn<84;Gn++){var nr=(Gn+.5)/84;zt.maskBreaks(Ln*(1-nr)+nr*Hn)!==P&&Wn++}(In*=Wn/84)||(Mn[rn].drop=!0),ln&&hn>w&&(In=hn)}(In>0||0===rn)&&(Mn[rn].periodX=Ln+In/2)}}(qt,Se,Se._definedDelta),Se.rangebreaks){var pn="y"===Se._id.charAt(0),An=1;"auto"===Se.tickmode&&(An=Se.tickfont?Se.tickfont.size:12);var Tn=NaN;for(Ke=qt.length-1;Ke>-1;Ke--)if(qt[Ke].drop)qt.splice(Ke,1);else{qt[Ke].value=Ze(qt[Ke].value,Se);var Rn=Se.c2p(qt[Ke].value);(pn?Tn>Rn-An:Tn<Rn+An)?qt.splice(Et?Ke+1:Ke,1):Tn=Rn}}Ye(Se)&&360===Math.abs(ht[1]-ht[0])&&qt.pop(),Se._tmax=(qt[qt.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var qn,Un,Yn=function(Mn){Mn.text="",Se._prevDateHead=it};for(qt=qt.concat(Xt),Ke=0;Ke<qt.length;Ke++){var Jt=qt[Ke].value;qt[Ke].minor?Nt.push({x:Jt,minor:!0}):(it=Se._prevDateHead,qn=H.tickText(Se,Jt,!1,qt[Ke].simpleLabel),void 0!==(Un=qt[Ke].periodX)&&(qn.periodX=Un,(Un>kt||Un<gt)&&(Un>kt&&(qn.periodX=kt),Un<gt&&(qn.periodX=gt),Yn(qn))),qt[Ke].skipLabel&&Yn(qn),Ut.push(qn))}return Ut=Ut.concat(Nt),Se._inCalcTicks=!1,At&&Ut.length&&(Ut[0].noTick=!0),Ut};var we=[2,5,10],K=[1,2,3,6,12],oe=[1,2,5,10,15,30],he=[1,2,3,7,14],ye=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Me=[-.301,0,.301,.699,1],Re=[15,30,45,90,180];function Pe(Se,ze,Ke){return ze*x.roundUp(Se/ze,Ke)}function De(Se){var ze=Se.dtick;if(Se._tickexponent=0,k(ze)||"string"==typeof ze||(ze=1),"category"!==Se.type&&"multicategory"!==Se.type||(Se._tickround=null),"date"===Se.type){var Ke=Se.r2l(Se.tick0),it=Se.l2r(Ke).replace(/(^-|i)/g,""),ct=it.length;if("M"===String(ze).charAt(0))Se._tickround=ct>10||"01-01"!==it.substr(5)?"d":+ze.substr(1)%12==0?"y":"m";else if(ze>=u&&ct<=10||ze>=15*u)Se._tickround="d";else if(ze>=E&&ct<=16||ze>=_)Se._tickround="M";else if(ze>=L&&ct<=19||ze>=E)Se._tickround="S";else{var mt=Se.l2r(Ke+ze).replace(/^-/,"").length;Se._tickround=Math.max(ct,mt)-20,Se._tickround<0&&(Se._tickround=4)}}else if(k(ze)||"L"===ze.charAt(0)){var Lt=Se.range.map(Se.r2d||Number);k(ze)||(ze=Number(ze.substr(1))),Se._tickround=2-Math.floor(Math.log(ze)/Math.LN10+.01);var At=Math.max(Math.abs(Lt[0]),Math.abs(Lt[1])),ht=Math.floor(Math.log(At)/Math.LN10+.01),Et=void 0===Se.minexponent?3:Se.minexponent;Math.abs(ht)>Et&&(Se._tickexponent=be(Se.exponentformat)&&!Ie(ht)?3*Math.round((ht-1)/3):ht)}else Se._tickround=null}function fe(Se,ze,Ke){var it=Se.tickfont||{};return{x:ze,dx:0,dy:0,text:Ke||"",fontSize:it.size,font:it.family,fontColor:it.color}}H.autoTicks=function(Se,ze,Ke){var it;function ct(kt){return Math.pow(kt,Math.floor(Math.log(ze)/Math.LN10))}if("date"===Se.type){Se.tick0=x.dateTick0(Se.calendar,0);var mt=2*ze;if(mt>h)ze/=h,it=ct(10),Se.dtick="M"+12*Pe(ze,it,we);else if(mt>d)Se.dtick="M"+Pe(ze/=d,1,K);else if(mt>u){if(Se.dtick=Pe(ze,u,Se._hasDayOfWeekBreaks?[1,2,7,14]:he),!Ke){var Lt=H.getTickFormat(Se),At="period"===Se.ticklabelmode;At&&(Se._rawTick0=Se.tick0),Se.tick0=/%[uVW]/.test(Lt)?x.dateTick0(Se.calendar,2):x.dateTick0(Se.calendar,1),At&&(Se._dowTick0=Se.tick0)}}else mt>_?Se.dtick=Pe(ze,_,K):mt>E?Se.dtick=Pe(ze,E,oe):mt>L?Se.dtick=Pe(ze,L,oe):(it=ct(10),Se.dtick=Pe(ze,it,we))}else if("log"===Se.type){Se.tick0=0;var ht=x.simpleMap(Se.range,Se.r2l);if(Se._isMinor&&(ze*=1.5),ze>.7)Se.dtick=Math.ceil(ze);else if(Math.abs(ht[1]-ht[0])<1){var Et=1.5*Math.abs((ht[1]-ht[0])/ze);ze=Math.abs(Math.pow(10,ht[1])-Math.pow(10,ht[0]))/Et,it=ct(10),Se.dtick="L"+Pe(ze,it,we)}else Se.dtick=ze>.3?"D2":"D1"}else"category"===Se.type||"multicategory"===Se.type?(Se.tick0=0,Se.dtick=Math.ceil(Math.max(ze,1))):Ye(Se)?(Se.tick0=0,Se.dtick=Pe(ze,it=1,Re)):(Se.tick0=0,it=ct(10),Se.dtick=Pe(ze,it,we));if(0===Se.dtick&&(Se.dtick=1),!k(Se.dtick)&&"string"!=typeof Se.dtick){var gt=Se.dtick;throw Se.dtick=1,"ax.dtick error: "+String(gt)}},H.tickIncrement=function(Se,ze,Ke,it){var ct=Ke?-1:1;if(k(ze))return x.increment(Se,ct*ze);var mt=ze.charAt(0),Lt=ct*Number(ze.substr(1));if("M"===mt)return x.incrementMonth(Se,Lt,it);if("L"===mt)return Math.log(Math.pow(10,Se)+Lt)/Math.LN10;if("D"===mt){var At="D2"===ze?Me:ye,ht=Se+.01*ct,Et=x.roundUp(x.mod(ht,1),At,Ke);return Math.floor(ht)+Math.log(M.round(Math.pow(10,Et),1))/Math.LN10}throw"unrecognized dtick "+String(ze)},H.tickFirst=function(Se,ze){var Ke=Se.r2l||Number,it=x.simpleMap(Se.range,Ke,void 0,void 0,ze),ct=it[1]<it[0],mt=ct?Math.floor:Math.ceil,Lt=se(it)[0],At=Se.dtick,ht=Ke(Se.tick0);if(k(At)){var Et=mt((Lt-ht)/At)*At+ht;return"category"!==Se.type&&"multicategory"!==Se.type||(Et=x.constrain(Et,0,Se._categories.length-1)),Et}var gt=At.charAt(0),kt=Number(At.substr(1));if("M"===gt){for(var It,Ut,Nt,qt=0,Xt=ht;qt<10;){if(((It=H.tickIncrement(Xt,At,ct,Se.calendar))-Lt)*(Xt-Lt)<=0)return ct?Math.min(Xt,It):Math.max(Xt,It);Ut=(Lt-(Xt+It)/2)/(It-Xt),Nt=gt+(Math.abs(Math.round(Ut))||1)*kt,Xt=H.tickIncrement(Xt,Nt,Ut<0?!ct:ct,Se.calendar),qt++}return x.error("tickFirst did not converge",Se),Xt}if("L"===gt)return Math.log(mt((Math.pow(10,Lt)-ht)/kt)*kt+ht)/Math.LN10;if("D"===gt){var Kt="D2"===At?Me:ye,fn=x.roundUp(x.mod(Lt,1),Kt,ct);return Math.floor(Lt)+Math.log(M.round(Math.pow(10,fn),1))/Math.LN10}throw"unrecognized dtick "+String(At)},H.tickText=function(Se,ze,Ke,it){var ct,mt=fe(Se,ze),Lt="array"===Se.tickmode,At=Ke||Lt,ht=Se.type,Et="category"===ht?Se.d2l_noadd:Se.d2l;if(Lt&&Array.isArray(Se.ticktext)){var gt=x.simpleMap(Se.range,Se.r2l),kt=(Math.abs(gt[1]-gt[0])-(Se._lBreaks||0))/1e4;for(ct=0;ct<Se.ticktext.length&&!(Math.abs(ze-Et(Se.tickvals[ct]))<kt);ct++);if(ct<Se.ticktext.length)return mt.text=String(Se.ticktext[ct]),mt}function It(Xt){return void 0===Xt||(Ke?"none"===Xt:"all"!==Xt&&ze!=={first:Se._tmin,last:Se._tmax}[Xt])}var Kt,fn,Ut=Ke?"never":"none"!==Se.exponentformat&&It(Se.showexponent)?"hide":"";if("date"===ht?function(Xt,Kt,fn,nn){var xn=Xt._tickround,jn=fn&&Xt.hoverformat||H.getTickFormat(Xt);nn&&(xn=k(xn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[xn]);var mn,en=x.formatDate(Kt.x,jn,xn,Xt._dateFormat,Xt.calendar,Xt._extraFormat),vn=en.indexOf("\n");if(-1!==vn&&(mn=en.substr(vn+1),en=en.substr(0,vn)),nn&&("00:00:00"===en||"00:00"===en?(en=mn,mn=""):8===en.length&&(en=en.replace(/:00$/,""))),mn)if(fn)"d"===xn?en+=", "+mn:en=mn+(en?", "+en:"");else if(Xt._inCalcTicks&&Xt._prevDateHead===mn){var on=Ne(Xt),sn=Xt._trueSide||Xt.side;(!on&&"top"===sn||on&&"bottom"===sn)&&(en+="<br> ")}else Xt._prevDateHead=mn,en+="<br>"+mn;Kt.text=en}(Se,mt,Ke,At):"log"===ht?function(Xt,Kt,fn,nn,xn){var jn=Xt.dtick,mn=Kt.x,en=Xt.tickformat,vn="string"==typeof jn&&jn.charAt(0);if("never"===xn&&(xn=""),nn&&"L"!==vn&&(jn="L3",vn="L"),en||"L"===vn)Kt.text=He(Math.pow(10,mn),Xt,xn,nn);else if(k(jn)||"D"===vn&&x.mod(mn+.01,1)<.1){var on=Math.round(mn),sn=Math.abs(on),En=Xt.exponentformat;"power"===En||be(En)&&Ie(on)?(Kt.text=0===on?1:1===on?"10":"10<sup>"+(on>1?"":C)+sn+"</sup>",Kt.fontSize*=1.25):("e"===En||"E"===En)&&sn>2?Kt.text="1"+En+(on>0?"+":C)+sn:(Kt.text=He(Math.pow(10,mn),Xt,"","fakehover"),"D1"===jn&&"y"===Xt._id.charAt(0)&&(Kt.dy-=Kt.fontSize/6))}else{if("D"!==vn)throw"unrecognized dtick "+String(jn);Kt.text=String(Math.round(Math.pow(10,x.mod(mn,1)))),Kt.fontSize*=.75}if("D1"===Xt.dtick){var kn=String(Kt.text).charAt(0);"0"!==kn&&"1"!==kn||("y"===Xt._id.charAt(0)?Kt.dx-=Kt.fontSize/4:(Kt.dy+=Kt.fontSize/2,Kt.dx+=(Xt.range[1]>Xt.range[0]?1:-1)*Kt.fontSize*(mn<0?.5:.25)))}}(Se,mt,0,At,Ut):"category"===ht?(Kt=mt,void 0===(fn=Se._categories[Math.round(Kt.x)])&&(fn=""),Kt.text=String(fn)):"multicategory"===ht?function(Xt,Kt,fn){var nn=Math.round(Kt.x),xn=Xt._categories[nn]||[],jn=void 0===xn[1]?"":String(xn[1]),mn=void 0===xn[0]?"":String(xn[0]);fn?Kt.text=mn+" - "+jn:(Kt.text=jn,Kt.text2=mn)}(Se,mt,Ke):Ye(Se)?function(Xt,Kt,fn,nn,xn){if("radians"!==Xt.thetaunit||fn)Kt.text=He(Kt.x,Xt,xn,nn);else{var jn=Kt.x/180;if(0===jn)Kt.text="0";else{var mn=function(vn){function on(zn,Fn){return Math.abs(zn-Fn)<=1e-6}var sn=function(zn){for(var Fn=1;!on(Math.round(zn*Fn)/Fn,zn);)Fn*=10;return Fn}(vn),En=vn*sn,kn=Math.abs(function zn(Fn,Bn){return on(Bn,0)?Fn:zn(Bn,Fn%Bn)}(En,sn));return[Math.round(En/kn),Math.round(sn/kn)]}(jn);if(mn[1]>=100)Kt.text=He(x.deg2rad(Kt.x),Xt,xn,nn);else{var en=Kt.x<0;Kt.text=1===mn[1]?1===mn[0]?"\u03c0":mn[0]+"\u03c0":["<sup>",mn[0],"</sup>","\u2044","<sub>",mn[1],"</sub>","\u03c0"].join(""),en&&(Kt.text=C+Kt.text)}}}}(Se,mt,Ke,At,Ut):function(Xt,Kt,fn,nn,xn){"never"===xn?xn="":"all"===Xt.showexponent&&Math.abs(Kt.x/Xt.dtick)<1e-6&&(xn="hide"),Kt.text=He(Kt.x,Xt,xn,nn)}(Se,mt,0,At,Ut),it||(Se.tickprefix&&!It(Se.showtickprefix)&&(mt.text=Se.tickprefix+mt.text),Se.ticksuffix&&!It(Se.showticksuffix)&&(mt.text+=Se.ticksuffix)),Se.labelalias&&Se.labelalias.hasOwnProperty(mt.text)){var Nt=Se.labelalias[mt.text];"string"==typeof Nt&&(mt.text=Nt)}if("boundaries"===Se.tickson||Se.showdividers){var qt=function(Xt){var Kt=Se.l2p(Xt);return Kt>=0&&Kt<=Se._length?Xt:null};mt.xbnd=[qt(mt.x-.5),qt(mt.x+Se.dtick-.5)]}return mt},H.hoverLabelText=function(Se,ze,Ke){Ke&&(Se=x.extendFlat({},Se,{hoverformat:Ke}));var it=Array.isArray(ze)?ze[0]:ze,ct=Array.isArray(ze)?ze[1]:void 0;if(void 0!==ct&&ct!==it)return H.hoverLabelText(Se,it,Ke)+" - "+H.hoverLabelText(Se,ct,Ke);var mt="log"===Se.type&&it<=0,Lt=H.tickText(Se,Se.c2l(mt?-it:it),"hover").text;return mt?0===it?"0":C+Lt:Lt};var ge=["f","p","n","\u03bc","m","","k","M","G","T"];function be(Se){return"SI"===Se||"B"===Se}function Ie(Se){return Se>14||Se<-15}function He(Se,ze,Ke,it){var ct=Se<0,mt=ze._tickround,Lt=Ke||ze.exponentformat||"B",At=ze._tickexponent,ht=H.getTickFormat(ze),Et=ze.separatethousands;if(it){var gt={exponentformat:Lt,minexponent:ze.minexponent,dtick:"none"===ze.showexponent?ze.dtick:k(Se)&&Math.abs(Se)||1,range:"none"===ze.showexponent?ze.range.map(ze.r2d):[0,Se||1]};De(gt),mt=(Number(gt._tickround)||0)+4,At=gt._tickexponent,ze.hoverformat&&(ht=ze.hoverformat)}if(ht)return ze._numFormat(ht)(Se).replace(/-/g,C);var kt,It=Math.pow(10,-mt)/2;if("none"===Lt&&(At=0),(Se=Math.abs(Se))<It)Se="0",ct=!1;else{if(Se+=It,At&&(Se*=Math.pow(10,-At),mt+=At),0===mt)Se=String(Math.floor(Se));else if(mt<0){Se=(Se=String(Math.round(Se))).substr(0,Se.length+mt);for(var Ut=mt;Ut<0;Ut++)Se+="0"}else{var Nt=(Se=String(Se)).indexOf(".")+1;Nt&&(Se=Se.substr(0,Nt+mt).replace(/\.?0+$/,""))}Se=x.numSeparate(Se,ze._separators,Et)}return At&&"hide"!==Lt&&(be(Lt)&&Ie(At)&&(Lt="power"),kt=At<0?C+-At:"power"!==Lt?"+"+At:String(At),"e"===Lt||"E"===Lt?Se+=Lt+kt:"power"===Lt?Se+="\xd710<sup>"+kt+"</sup>":"B"===Lt&&9===At?Se+="B":be(Lt)&&(Se+=ge[At/3+5])),ct?C+Se:Se}function Ve(Se,ze){if(Se){var Ke=Object.keys(B).reduce(function(it,ct){return-1!==ze.indexOf(ct)&&B[ct].forEach(function(mt){it[mt]=1}),it},{});Object.keys(Se).forEach(function(it){Ke[it]||(1===it.length?Se[it]=0:delete Se[it])})}}function tt(Se,ze){for(var Ke=[],it={},ct=0;ct<ze.length;ct++){var mt=ze[ct];it[mt.text2]?it[mt.text2].push(mt.x):it[mt.text2]=[mt.x]}for(var Lt in it)Ke.push(fe(Se,x.interp(it[Lt],.5),Lt));return Ke}function nt(Se){return void 0!==Se.periodX?Se.periodX:Se.x}function st(Se){return[Se.text,Se.x,Se.axInfo,Se.font,Se.fontSize,Se.fontColor].join("_")}function dt(Se){var ze=Se.title.font.size,Ke=(Se.title.text.match(s.BR_TAG_ALL)||[]).length;return Se.title.hasOwnProperty("standoff")?Ke?ze*(J+Ke*Y):ze*J:Ke?ze*(Ke+1)*Y:ze}function wt(Se,ze){var Ke=Se.l2p(ze);return Ke>1&&Ke<Se._length-1}function _t(Se){var ze=M.select(Se),Ke=ze.select(".text-math-group");return Ke.empty()?ze.select("text"):Ke}function pt(Se){return Se._id+".automargin"}function Pt(Se){return pt(Se)+".mirror"}function St(Se){return Se._id+".rangeslider"}function Ot(Se,ze){for(var Ke=0;Ke<ze.length;Ke++)-1===Se.indexOf(ze[Ke])&&Se.push(ze[Ke])}function jt(Se,ze,Ke){var it,ct,mt=[],Lt=[],At=Se.layout;for(it=0;it<ze.length;it++)mt.push(H.getFromId(Se,ze[it]));for(it=0;it<Ke.length;it++)Lt.push(H.getFromId(Se,Ke[it]));var ht=Object.keys(n),Et=["anchor","domain","overlaying","position","side","tickangle","editType"],gt=["linear","log"];for(it=0;it<ht.length;it++){var kt=ht[it],It=mt[0][kt],Ut=Lt[0][kt],Nt=!0,qt=!1,Xt=!1;if("_"!==kt.charAt(0)&&"function"!=typeof It&&-1===Et.indexOf(kt)){for(ct=1;ct<mt.length&&Nt;ct++){var Kt=mt[ct][kt];"type"===kt&&-1!==gt.indexOf(It)&&-1!==gt.indexOf(Kt)&&It!==Kt?qt=!0:Kt!==It&&(Nt=!1)}for(ct=1;ct<Lt.length&&Nt;ct++){var fn=Lt[ct][kt];"type"===kt&&-1!==gt.indexOf(Ut)&&-1!==gt.indexOf(fn)&&Ut!==fn?Xt=!0:Lt[ct][kt]!==Ut&&(Nt=!1)}Nt&&(qt&&(At[mt[0]._name].type="linear"),Xt&&(At[Lt[0]._name].type="linear"),Dt(At,kt,mt,Lt,Se._fullLayout._dfltTitle))}}for(it=0;it<Se._fullLayout.annotations.length;it++){var nn=Se._fullLayout.annotations[it];-1!==ze.indexOf(nn.xref)&&-1!==Ke.indexOf(nn.yref)&&x.swapAttrs(At.annotations[it],["?"])}}function Dt(Se,ze,Ke,it,ct){var mt,Lt=x.nestedProperty,At=Lt(Se[Ke[0]._name],ze).get(),ht=Lt(Se[it[0]._name],ze).get();for("title"===ze&&(At&&At.text===ct.x&&(At.text=ct.y),ht&&ht.text===ct.y&&(ht.text=ct.x)),mt=0;mt<Ke.length;mt++)Lt(Se,Ke[mt]._name+"."+ze).set(ht);for(mt=0;mt<it.length;mt++)Lt(Se,it[mt]._name+"."+ze).set(At)}function Ye(Se){return"angularaxis"===Se._id}function Ze(Se,ze){for(var Ke=ze._rangebreaks.length,it=0;it<Ke;it++){var ct=ze._rangebreaks[it];if(Se>=ct.min&&Se<ct.max)return ct.max}return Se}function Ne(Se){return-1!==(Se.ticklabelposition||"").indexOf("inside")}function Je(Se,ze){Ne(Se._anchorAxis||{})&&Se._hideCounterAxisInsideTickLabels&&Se._hideCounterAxisInsideTickLabels(ze)}function at(Se,ze,Ke,it){var ct,mt="free"===Se.anchor||void 0!==Se.overlaying&&!1!==Se.overlaying?Se.overlaying:Se._id;ct=it?"right"===Se.side?ze:-ze:ze,mt in Ke||(Ke[mt]={}),Se.side in Ke[mt]||(Ke[mt][Se.side]=0),Ke[mt][Se.side]+=ct}H.getTickFormat=function(Se){var ze,Ke,it,ct,mt,Lt,At,ht,It,Ut,Nt,qt,Xt,Kt;function Et(It){return"string"!=typeof It?It:Number(It.replace("M",""))*d}function gt(It,Ut){var Nt=["L","D"];if(typeof It==typeof Ut){if("number"==typeof It)return It-Ut;var qt=Nt.indexOf(It.charAt(0)),Xt=Nt.indexOf(Ut.charAt(0));return qt===Xt?Number(It.replace(/(L|D)/g,""))-Number(Ut.replace(/(L|D)/g,"")):qt-Xt}return"number"==typeof It?1:-1}if(Se.tickformatstops&&Se.tickformatstops.length>0)switch(Se.type){case"date":case"linear":for(ze=0;ze<Se.tickformatstops.length;ze++)if((it=Se.tickformatstops[ze]).enabled&&(ct=Se.dtick,Lt=void 0,void 0,void 0,Lt=Et||function(It){return It},ht=(mt=it.dtickrange)[1],(!(At=mt[0])&&"number"!=typeof At||Lt(At)<=Lt(ct))&&(!ht&&"number"!=typeof ht||Lt(ht)>=Lt(ct)))){Ke=it;break}break;case"log":for(ze=0;ze<Se.tickformatstops.length;ze++)if((it=Se.tickformatstops[ze]).enabled&&(Nt=void 0,qt=void 0,Xt=void 0,Kt=void 0,Nt=null===(Ut=it.dtickrange)[0],qt=null===Ut[1],Xt=gt(It=Se.dtick,Ut[0])>=0,Kt=gt(It,Ut[1])<=0,(Nt||Xt)&&(qt||Kt))){Ke=it;break}}return Ke?Ke.value:Se.tickformat},H.getSubplots=function(Se,ze){var Ke=Se._fullLayout._subplots,it=Ke.cartesian.concat(Ke.gl2d||[]),ct=ze?H.findSubplotsWithAxis(it,ze):it;return ct.sort(function(mt,Lt){var At=mt.substr(1).split("y"),ht=Lt.substr(1).split("y");return At[0]===ht[0]?+At[1]-+ht[1]:+At[0]-+ht[0]}),ct},H.findSubplotsWithAxis=function(Se,ze){for(var Ke=new RegExp("x"===ze._id.charAt(0)?"^"+ze._id+"y":ze._id+"$"),it=[],ct=0;ct<Se.length;ct++){var mt=Se[ct];Ke.test(mt)&&it.push(mt)}return it},H.makeClipPaths=function(Se){var ze=Se._fullLayout;if(!ze._hasOnlyLargeSploms){var Ke,it,ct={_offset:0,_length:ze.width,_id:""},mt={_offset:0,_length:ze.height,_id:""},Lt=H.list(Se,"x",!0),At=H.list(Se,"y",!0),ht=[];for(Ke=0;Ke<Lt.length;Ke++)for(ht.push({x:Lt[Ke],y:mt}),it=0;it<At.length;it++)0===Ke&&ht.push({x:ct,y:At[it]}),ht.push({x:Lt[Ke],y:At[it]});var Et=ze._clips.selectAll(".axesclip").data(ht,function(gt){return gt.x._id+gt.y._id});Et.enter().append("clipPath").classed("axesclip",!0).attr("id",function(gt){return"clip"+ze._uid+gt.x._id+gt.y._id}).append("rect"),Et.exit().remove(),Et.each(function(gt){M.select(this).select("rect").attr({x:gt.x._offset||0,y:gt.y._offset||0,width:gt.x._length||1,height:gt.y._length||1})})}},H.draw=function(Se,ze,Ke){var it=Se._fullLayout;"redraw"===ze&&it._paper.selectAll("g.subplot").each(function(At){var Et=it._plots[At[0]];if(Et){var gt=Et.xaxis,kt=Et.yaxis;Et.xaxislayer.selectAll("."+gt._id+"tick").remove(),Et.yaxislayer.selectAll("."+kt._id+"tick").remove(),Et.xaxislayer.selectAll("."+gt._id+"tick2").remove(),Et.yaxislayer.selectAll("."+kt._id+"tick2").remove(),Et.xaxislayer.selectAll("."+gt._id+"divider").remove(),Et.yaxislayer.selectAll("."+kt._id+"divider").remove(),Et.minorGridlayer&&Et.minorGridlayer.selectAll("path").remove(),Et.gridlayer&&Et.gridlayer.selectAll("path").remove(),Et.zerolinelayer&&Et.zerolinelayer.selectAll("path").remove(),it._infolayer.select(".g-"+gt._id+"title").remove(),it._infolayer.select(".g-"+kt._id+"title").remove()}});var ct=ze&&"redraw"!==ze?ze:H.listIds(Se),mt=H.list(Se).filter(function(At){return At.autoshift}).map(function(At){return At.overlaying});ct.map(function(At){var ht=H.getFromId(Se,At);if("sync"===ht.tickmode&&ht.overlaying){var Et=ct.findIndex(function(gt){return gt===ht.overlaying});Et>=0&&ct.unshift(ct.splice(Et,1).shift())}});var Lt={false:{left:0,right:0}};return x.syncOrAsync(ct.map(function(At){return function(){if(At){var ht=H.getFromId(Se,At);Ke||(Ke={}),Ke.axShifts=Lt,Ke.overlayingShiftedAx=mt;var Et=H.drawOne(Se,ht,Ke);return ht._shiftPusher&&at(ht,ht._fullDepth||0,Lt,!0),ht._r=ht.range.slice(),ht._rl=x.simpleMap(ht._r,ht.r2l),Et}}}))},H.drawOne=function(Se,ze,Ke){var it,ct,mt,Lt=(Ke=Ke||{}).axShifts||{},At=Ke.overlayingShiftedAx||[];ze.setScale();var wn,ht=Se._fullLayout,Et=ze._id,gt=Et.charAt(0),kt=H.counterLetter(Et),It=ht._plots[ze._mainSubplot];if(It){if(ze._shiftPusher=ze.autoshift||-1!==At.indexOf(ze._id)||-1!==At.indexOf(ze.overlaying),ze._shiftPusher&"free"===ze.anchor){var Ut=ze.linewidth/2||0;"inside"===ze.ticks&&(Ut+=ze.ticklen),at(ze,Ut,Lt,!0),at(ze,ze.shift||0,Lt,!1)}!0===Ke.skipTitle&&void 0!==ze._shift||(ze._shift=(wn=ze).autoshift?Lt[wn.overlaying][wn.side]:wn.shift||0);var Nt=It[gt+"axislayer"],qt=ze._mainLinePosition,Xt=qt+=ze._shift,Kt=ze._mainMirrorPosition,fn=ze._vals=H.calcTicks(ze),nn=[ze.mirror,Xt,Kt].join("_");for(it=0;it<fn.length;it++)fn[it].axInfo=nn;ze._selections={},ze._tickAngles&&(ze._prevTickAngles=ze._tickAngles),ze._tickAngles={},ze._depth=null;var xn={};if(ze.visible){var jn,mn,en=H.makeTransTickFn(ze),vn=H.makeTransTickLabelFn(ze),on="inside"===ze.ticks,sn="outside"===ze.ticks;if("boundaries"===ze.tickson){var En=function(wn,ln){var gn,un=[],hn=function(bn,In){var Hn=bn.xbnd[In];null!==Hn&&un.push(x.extendFlat({},bn,{x:Hn}))};if(ln.length){for(gn=0;gn<ln.length;gn++)hn(ln[gn],0);hn(ln[gn-1],1)}return un}(0,fn);mn=H.clipEnds(ze,En),jn=on?mn:En}else mn=H.clipEnds(ze,fn),jn=on&&"period"!==ze.ticklabelmode?mn:fn;var kn,zn=ze._gridVals=mn,Fn=function(wn,ln){var gn,un,hn=[],bn=ln.length&&ln[ln.length-1].x<ln[0].x,In=function(Wn,Gn){var nr=Wn.xbnd[Gn];null!==nr&&hn.push(x.extendFlat({},Wn,{x:nr}))};if(wn.showdividers&&ln.length){for(gn=0;gn<ln.length;gn++){var Hn=ln[gn];Hn.text2!==un&&In(Hn,bn?1:0),un=Hn.text2}In(ln[gn-1],bn?0:1)}return hn}(ze,fn);if(!ht._hasOnlyLargeSploms){var Bn=ze._subplotsWith,er={};for(it=0;it<Bn.length;it++){var Xn=(mt=ht._plots[ct=Bn[it]])[kt+"axis"],mr=Xn._mainAxis._id;if(!er[mr]){er[mr]=1;var ur="x"===gt?"M0,"+Xn._offset+"v"+Xn._length:"M"+Xn._offset+",0h"+Xn._length;H.drawGrid(Se,ze,{vals:zn,counterAxis:Xn,layer:mt.gridlayer.select("."+Et),minorLayer:mt.minorGridlayer.select("."+Et),path:ur,transFn:en}),H.drawZeroLine(Se,ze,{counterAxis:Xn,layer:mt.zerolinelayer,path:ur,transFn:en})}}}var $n=H.getTickSigns(ze),lr=H.getTickSigns(ze,"minor");if(ze.ticks||ze.minor&&ze.minor.ticks){var hr,Gt,pn,An,Tn=H.makeTickPath(ze,Xt,$n[2]),Rn=H.makeTickPath(ze,Xt,lr[2],{minor:!0});if(ze._anchorAxis&&ze.mirror&&!0!==ze.mirror?(hr=H.makeTickPath(ze,Kt,$n[3]),Gt=H.makeTickPath(ze,Kt,lr[3],{minor:!0}),pn=Tn+hr,An=Rn+Gt):(hr="",Gt="",pn=Tn,An=Rn),ze.showdividers&&sn&&"boundaries"===ze.tickson){var qn={};for(it=0;it<Fn.length;it++)qn[Fn[it].x]=1;kn=function(wn){return qn[wn.x]?hr:pn}}else kn=function(wn){return wn.minor?An:pn}}if(H.drawTicks(Se,ze,{vals:jn,layer:Nt,path:kn,transFn:en}),"allticks"===ze.mirror){var Un=Object.keys(ze._linepositions||{});for(it=0;it<Un.length;it++){mt=ht._plots[ct=Un[it]];var Yn=ze._linepositions[ct]||[],Jt=Yn[1],Mn=Yn[2],zt=H.makeTickPath(ze,Yn[0],Mn?$n[0]:lr[0],{minor:Mn})+H.makeTickPath(ze,Jt,Mn?$n[1]:lr[1],{minor:Mn});H.drawTicks(Se,ze,{vals:jn,layer:mt[gt+"axislayer"],path:zt,transFn:en})}}var Zt=[];if(Zt.push(function(){return H.drawLabels(Se,ze,{vals:fn,layer:Nt,plotinfo:mt,transFn:vn,labelFns:H.makeLabelFns(ze,Xt)})}),"multicategory"===ze.type){var rn={x:2,y:10}[gt];Zt.push(function(){var wn={x:"height",y:"width"}[gt],ln=Sn()[wn]+rn+(ze._tickAngles[Et+"tick"]?ze.tickfont.size*Y:0);return H.drawLabels(Se,ze,{vals:tt(ze,fn),layer:Nt,cls:Et+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:en,labelFns:H.makeLabelFns(ze,Xt+ln*$n[4])})}),Zt.push(function(){return ze._depth=$n[4]*(Sn("tick2")[ze.side]-Xt),function(wn,ln,gn){var un=ln._id+"divider",hn=gn.vals,bn=gn.layer.selectAll("path."+un).data(hn,st);bn.exit().remove(),bn.enter().insert("path",":first-child").classed(un,1).classed("crisp",1).call(o.stroke,ln.dividercolor).style("stroke-width",r.crispRound(wn,ln.dividerwidth,1)+"px"),bn.attr("transform",gn.transFn).attr("d",gn.path)}(Se,ze,{vals:Fn,layer:Nt,path:H.makeTickPath(ze,Xt,$n[4],{len:ze._depth}),transFn:en})})}else ze.title.hasOwnProperty("standoff")&&Zt.push(function(){ze._depth=$n[4]*(Sn()[ze.side]-Xt)});var Ln=T.getComponentMethod("rangeslider","isVisible")(ze);return Ke.skipTitle||Ln&&"bottom"===ze.side||Zt.push(function(){return function(wn,ln){var gn,un=wn._fullLayout,hn=ln._id,bn=hn.charAt(0),In=ln.title.font.size;if(ln.title.hasOwnProperty("standoff"))gn=ln._depth+ln.title.standoff+dt(ln);else{var Hn=Ne(ln);if("multicategory"===ln.type)gn=ln._depth;else{var Wn=1.5*In;Hn&&(Wn=.5*In,"outside"===ln.ticks&&(Wn+=ln.ticklen)),gn=10+Wn+(ln.linewidth?ln.linewidth-1:0)}Hn||(gn+="x"===bn?"top"===ln.side?In*(ln.showticklabels?1:0):In*(ln.showticklabels?1.5:.5):"right"===ln.side?In*(ln.showticklabels?1:.5):In*(ln.showticklabels?.5:0))}var Gn,nr,tr,ar,ir=H.getPxPosition(wn,ln);if("x"===bn?(nr=ln._offset+ln._length/2,tr="top"===ln.side?ir-gn:ir+gn):(tr=ln._offset+ln._length/2,nr="right"===ln.side?ir+gn:ir-gn,Gn={rotate:"-90",offset:0}),"multicategory"!==ln.type){var cr=ln._selections[ln._id+"tick"];if(ar={selection:cr,side:ln.side},cr&&cr.node()&&cr.node().parentNode){var br=r.getTranslate(cr.node().parentNode);ar.offsetLeft=br.x,ar.offsetTop=br.y}ln.title.hasOwnProperty("standoff")&&(ar.pad=0)}return ln._titleStandoff=gn,e.draw(wn,hn+"title",{propContainer:ln,propName:ln._name+".title.text",placeholder:un._dfltTitle[bn],avoid:ar,transform:Gn,attributes:{x:nr,y:tr,"text-anchor":"middle"}})}(Se,ze)}),Zt.push(function(){var wn,ln,gn,un,hn=ze.side.charAt(0),bn=q[ze.side].charAt(0),In=H.getPxPosition(Se,ze),Hn=sn?ze.ticklen:0;(ze.automargin||Ln||ze._shiftPusher)&&("multicategory"===ze.type?wn=Sn("tick2"):(wn=Sn(),"x"===gt&&"b"===hn&&(ze._depth=Math.max(wn.width>0?wn.bottom-In:0,Hn))));var Wn=0,Gn=0;if(ze._shiftPusher&&(Wn=Math.max(Hn,wn.height>0?"l"===hn?In-wn.left:wn.right-In:0),ze.title.text!==ht._dfltTitle[gt]&&(Gn=(ze._titleStandoff||0)+(ze._titleScoot||0),"l"===hn&&(Gn+=dt(ze))),ze._fullDepth=Math.max(Wn,Gn)),ze.automargin){ln={x:0,y:0,r:0,l:0,t:0,b:0};var nr=[0,1],tr="number"==typeof ze._shift?ze._shift:0;if("x"===gt){if("b"===hn?ln[hn]=ze._depth:(ln[hn]=ze._depth=Math.max(wn.width>0?In-wn.top:0,Hn),nr.reverse()),wn.width>0){var ar=wn.right-(ze._offset+ze._length);ar>0&&(ln.xr=1,ln.r=ar);var ir=ze._offset-wn.left;ir>0&&(ln.xl=0,ln.l=ir)}}else if("l"===hn?(ze._depth=Math.max(wn.height>0?In-wn.left:0,Hn),ln[hn]=ze._depth-tr):(ze._depth=Math.max(wn.height>0?wn.right-In:0,Hn),ln[hn]=ze._depth+tr,nr.reverse()),wn.height>0){var cr=wn.bottom-(ze._offset+ze._length);cr>0&&(ln.yb=0,ln.b=cr);var br=ze._offset-wn.top;br>0&&(ln.yt=1,ln.t=br)}ln[kt]="free"===ze.anchor?ze.position:ze._anchorAxis.domain[nr[0]],ze.title.text!==ht._dfltTitle[gt]&&(ln[hn]+=dt(ze)+(ze.title.standoff||0)),ze.mirror&&"free"!==ze.anchor&&((gn={x:0,y:0,r:0,l:0,t:0,b:0})[bn]=ze.linewidth,ze.mirror&&!0!==ze.mirror&&(gn[bn]+=Hn),!0===ze.mirror||"ticks"===ze.mirror?gn[kt]=ze._anchorAxis.domain[nr[1]]:"all"!==ze.mirror&&"allticks"!==ze.mirror||(gn[kt]=[ze._counterDomainMin,ze._counterDomainMax][nr[1]]))}Ln&&(un=T.getComponentMethod("rangeslider","autoMarginOpts")(Se,ze)),"string"==typeof ze.automargin&&(Ve(ln,ze.automargin),Ve(gn,ze.automargin)),l.autoMargin(Se,pt(ze),ln),l.autoMargin(Se,Pt(ze),gn),l.autoMargin(Se,St(ze),un)}),x.syncOrAsync(Zt)}}function Sn(wn){var gn,un,hn,bn,In,Hn,ln=Et+(wn||"tick");return xn[ln]||(xn[ln]=((gn=ze)._selections[un=ln].size()?(hn=1/0,bn=-1/0,In=1/0,Hn=-1/0,gn._selections[un].each(function(){var Wn=_t(this),Gn=r.bBox(Wn.node().parentNode);hn=Math.min(hn,Gn.top),bn=Math.max(bn,Gn.bottom),In=Math.min(In,Gn.left),Hn=Math.max(Hn,Gn.right)})):(hn=0,bn=0,In=0,Hn=0),{top:hn,bottom:bn,left:In,right:Hn,height:bn-hn,width:Hn-In})),xn[ln]}},H.getTickSigns=function(Se,ze){var Ke=Se._id.charAt(0),ct=Se.side==={x:"top",y:"right"}[Ke]?1:-1,mt=[-1,1,ct,-ct];return"inside"!==(ze?(Se.minor||{}).ticks:Se.ticks)==("x"===Ke)&&(mt=mt.map(function(Lt){return-Lt})),Se.side&&mt.push({l:-1,t:-1,r:1,b:1}[Se.side.charAt(0)]),mt},H.makeTransTickFn=function(Se){return"x"===Se._id.charAt(0)?function(ze){return p(Se._offset+Se.l2p(ze.x),0)}:function(ze){return p(0,Se._offset+Se.l2p(ze.x))}},H.makeTransTickLabelFn=function(Se){var ze=function(ct){var mt=ct.ticklabelposition||"",Lt=function(Kt){return-1!==mt.indexOf(Kt)},At=Lt("top"),ht=Lt("left"),Et=Lt("right"),gt=Lt("bottom"),kt=Lt("inside"),It=gt||ht||At||Et;if(!It&&!kt)return[0,0];var Ut=ct.side,Nt=It?(ct.tickwidth||0)/2:0,qt=3,Xt=ct.tickfont?ct.tickfont.size:12;return(gt||At)&&(Nt+=Xt*J,qt+=(ct.linewidth||0)/2),(ht||Et)&&(Nt+=(ct.linewidth||0)/2,qt+=3),kt&&"top"===Ut&&(qt-=Xt*(1-J)),(ht||At)&&(Nt=-Nt),"bottom"!==Ut&&"right"!==Ut||(qt=-qt),[It?Nt:0,kt?qt:0]}(Se),Ke=ze[0],it=ze[1];return"x"===Se._id.charAt(0)?function(ct){return p(Ke+Se._offset+Se.l2p(nt(ct)),it)}:function(ct){return p(it,Ke+Se._offset+Se.l2p(nt(ct)))}},H.makeTickPath=function(Se,ze,Ke,it){it||(it={});var ct=it.minor;if(ct&&!Se.minor)return"";var mt=void 0!==it.len?it.len:ct?Se.minor.ticklen:Se.ticklen,Lt=Se._id.charAt(0),At=(Se.linewidth||1)/2;return"x"===Lt?"M0,"+(ze+At*Ke)+"v"+mt*Ke:"M"+(ze+At*Ke)+",0h"+mt*Ke},H.makeLabelFns=function(Se,ze,Ke){var it=Se.ticklabelposition||"",ct=function(En){return-1!==it.indexOf(En)},mt=ct("top"),Lt=ct("left"),At=ct("right"),ht=ct("bottom")||Lt||mt||At,Et=ct("inside"),gt="inside"===it&&"inside"===Se.ticks||!Et&&"outside"===Se.ticks&&"boundaries"!==Se.tickson,kt=0,It=0,Ut=gt?Se.ticklen:0;if(Et?Ut*=-1:ht&&(Ut=0),gt&&(kt+=Ut,Ke)){var Nt=x.deg2rad(Ke);kt=Ut*Math.cos(Nt)+1,It=Ut*Math.sin(Nt)}Se.showticklabels&&(gt||Se.showline)&&(kt+=.2*Se.tickfont.size);var qt,Xt,Kt,fn,nn,xn={labelStandoff:kt+=(Se.linewidth||1)/2*(Et?-1:1),labelShift:It},jn=0,mn=Se.side,en=Se._id.charAt(0),vn=Se.tickangle;if("x"===en)fn=(nn=!Et&&"bottom"===mn||Et&&"top"===mn)?1:-1,Et&&(fn*=-1),qt=It*fn,Xt=ze+kt*fn,Kt=nn?1:-.2,90===Math.abs(vn)&&(Et?Kt+=U:Kt=-90===vn&&"bottom"===mn?J:90===vn&&"top"===mn?U:.5,jn=U/2*(vn/90)),xn.xFn=function(En){return En.dx+qt+jn*En.fontSize},xn.yFn=function(En){return En.dy+Xt+En.fontSize*Kt},xn.anchorFn=function(En,kn){if(ht){if(Lt)return"end";if(At)return"start"}return k(kn)&&0!==kn&&180!==kn?kn*fn<0!==Et?"end":"start":"middle"},xn.heightFn=function(En,kn,zn){return kn<-60||kn>60?-.5*zn:"top"===Se.side!==Et?-zn:0};else if("y"===en){if(fn=(nn=!Et&&"left"===mn||Et&&"right"===mn)?1:-1,Et&&(fn*=-1),qt=kt,Xt=It*fn,Kt=0,Et||90!==Math.abs(vn)||(Kt=-90===vn&&"left"===mn||90===vn&&"right"===mn?J:.5),Et){var on=k(vn)?+vn:0;if(0!==on){var sn=x.deg2rad(on);jn=Math.abs(Math.sin(sn))*J*fn,Kt=0}}xn.xFn=function(En){return En.dx+ze-(qt+En.fontSize*Kt)*fn+jn*En.fontSize},xn.yFn=function(En){return En.dy+Xt+En.fontSize*U},xn.anchorFn=function(En,kn){return k(kn)&&90===Math.abs(kn)?"middle":nn?"end":"start"},xn.heightFn=function(En,kn,zn){return"right"===Se.side&&(kn*=-1),kn<-30?-zn:kn<30?-.5*zn:0}}return xn},H.drawTicks=function(Se,ze,Ke){Ke=Ke||{};var it=ze._id+"tick",ct=[].concat(ze.minor&&ze.minor.ticks?Ke.vals.filter(function(Lt){return Lt.minor&&!Lt.noTick}):[]).concat(ze.ticks?Ke.vals.filter(function(Lt){return!Lt.minor&&!Lt.noTick}):[]),mt=Ke.layer.selectAll("path."+it).data(ct,st);mt.exit().remove(),mt.enter().append("path").classed(it,1).classed("ticks",1).classed("crisp",!1!==Ke.crisp).each(function(Lt){return o.stroke(M.select(this),Lt.minor?ze.minor.tickcolor:ze.tickcolor)}).style("stroke-width",function(Lt){return r.crispRound(Se,Lt.minor?ze.minor.tickwidth:ze.tickwidth,1)+"px"}).attr("d",Ke.path).style("display",null),Je(ze,[V]),mt.attr("transform",Ke.transFn)},H.drawGrid=function(Se,ze,Ke){if(Ke=Ke||{},"sync"!==ze.tickmode){var it=ze._id+"grid",ct=ze.minor&&ze.minor.showgrid,mt=ct?Ke.vals.filter(function(Kt){return Kt.minor}):[],Lt=ze.showgrid?Ke.vals.filter(function(Kt){return!Kt.minor}):[],At=Ke.counterAxis;if(At&&H.shouldShowZeroLine(Se,ze,At))for(var ht="array"===ze.tickmode,Et=0;Et<Lt.length;Et++){var gt=Lt[Et].x;if(ht?!gt:Math.abs(gt)<ze.dtick/100){if(Lt=Lt.slice(0,Et).concat(Lt.slice(Et+1)),!ht)break;Et--}}ze._gw=r.crispRound(Se,ze.gridwidth,1);for(var kt=ct?r.crispRound(Se,ze.minor.gridwidth,1):0,It=Ke.layer,Ut=Ke.minorLayer,Nt=1;Nt>=0;Nt--){var qt=Nt?It:Ut;if(qt){var Xt=qt.selectAll("path."+it).data(Nt?Lt:mt,st);Xt.exit().remove(),Xt.enter().append("path").classed(it,1).classed("crisp",!1!==Ke.crisp),Xt.attr("transform",Ke.transFn).attr("d",Ke.path).each(function(Kt){return o.stroke(M.select(this),Kt.minor?ze.minor.gridcolor:ze.gridcolor||"#ddd")}).style("stroke-dasharray",function(Kt){return r.dashStyle(Kt.minor?ze.minor.griddash:ze.griddash,Kt.minor?ze.minor.gridwidth:ze.gridwidth)}).style("stroke-width",function(Kt){return(Kt.minor?kt:ze._gw)+"px"}).style("display",null),"function"==typeof Ke.path&&Xt.attr("d",Ke.path)}}Je(ze,[j,R])}},H.drawZeroLine=function(Se,ze,Ke){var it=ze._id+"zl",ct=H.shouldShowZeroLine(Se,ze,(Ke=Ke||Ke).counterAxis),mt=Ke.layer.selectAll("path."+it).data(ct?[{x:0,id:ze._id}]:[]);mt.exit().remove(),mt.enter().append("path").classed(it,1).classed("zl",1).classed("crisp",!1!==Ke.crisp).each(function(){Ke.layer.selectAll("path").sort(function(Lt,At){return ne(Lt.id,At.id)})}),mt.attr("transform",Ke.transFn).attr("d",Ke.path).call(o.stroke,ze.zerolinecolor||o.defaultLine).style("stroke-width",r.crispRound(Se,ze.zerolinewidth,ze._gw||1)+"px").style("display",null),Je(ze,[z])},H.drawLabels=function(Se,ze,Ke){Ke=Ke||{};var it=Se._fullLayout,ct=ze._id,mt=ct.charAt(0),Lt=Ke.cls||ct+"tick",At=Ke.vals.filter(function(fn){return fn.text}),ht=Ke.labelFns,Et=Ke.secondary?0:ze.tickangle,gt=(ze._prevTickAngles||{})[Lt],kt=Ke.layer.selectAll("g."+Lt).data(ze.showticklabels?At:[],st),It=[];function Ut(fn,nn){fn.each(function(xn){var jn=M.select(this),mn=jn.select(".text-math-group"),en=ht.anchorFn(xn,nn),vn=Ke.transFn.call(jn.node(),xn)+(k(nn)&&0!=+nn?" rotate("+nn+","+ht.xFn(xn)+","+(ht.yFn(xn)-xn.fontSize/2)+")":""),on=s.lineCount(jn),sn=Y*xn.fontSize,En=ht.heightFn(xn,k(nn)?+nn:0,(on-1)*sn);if(En&&(vn+=p(0,En)),mn.empty()){var kn=jn.select("text");kn.attr({transform:vn,"text-anchor":en}),kn.style("opacity",1),ze._adjustTickLabelsOverflow&&ze._adjustTickLabelsOverflow()}else{var zn=r.bBox(mn.node()).width*{end:-.5,start:.5}[en];mn.attr("transform",vn+p(zn,0))}})}kt.enter().append("g").classed(Lt,1).append("text").attr("text-anchor","middle").each(function(fn){var nn=M.select(this),xn=Se._promises.length;nn.call(s.positionText,ht.xFn(fn),ht.yFn(fn)).call(r.font,fn.font,fn.fontSize,fn.fontColor).text(fn.text).call(s.convertToTspans,Se),Se._promises[xn]?It.push(Se._promises.pop().then(function(){Ut(nn,Et)})):Ut(nn,Et)}),Je(ze,[D]),kt.exit().remove(),Ke.repositionOnUpdate&&kt.each(function(fn){M.select(this).select("text").call(s.positionText,ht.xFn(fn),ht.yFn(fn))}),ze._adjustTickLabelsOverflow=function(){var fn=ze.ticklabeloverflow;if(fn&&"allow"!==fn){var nn=-1!==fn.indexOf("hide"),xn="x"===ze._id.charAt(0),jn=0,mn=xn?Se._fullLayout.width:Se._fullLayout.height;if(-1!==fn.indexOf("domain")){var en=x.simpleMap(ze.range,ze.r2l);jn=ze.l2p(en[0])+ze._offset,mn=ze.l2p(en[1])+ze._offset}var vn=Math.min(jn,mn),on=Math.max(jn,mn),sn=ze.side,En=1/0,kn=-1/0;for(var zn in kt.each(function(er){var Xn=M.select(this);if(Xn.select(".text-math-group").empty()){var mr=r.bBox(Xn.node()),ur=0;xn?(mr.right>on||mr.left<vn)&&(ur=1):(mr.bottom>on||mr.top+(ze.tickangle?0:er.fontSize/4)<vn)&&(ur=1);var $n=Xn.select("text");ur?nn&&$n.style("opacity",0):($n.style("opacity",1),En="bottom"===sn||"right"===sn?Math.min(En,xn?mr.top:mr.left):-1/0,kn="top"===sn||"left"===sn?Math.max(kn,xn?mr.bottom:mr.right):1/0)}}),it._plots){var Fn=it._plots[zn];if(ze._id===Fn.xaxis._id||ze._id===Fn.yaxis._id){var Bn=xn?Fn.yaxis:Fn.xaxis;Bn&&(Bn["_visibleLabelMin_"+ze._id]=En,Bn["_visibleLabelMax_"+ze._id]=kn)}}}},ze._hideCounterAxisInsideTickLabels=function(fn){var nn="x"===ze._id.charAt(0),xn=[];for(var jn in it._plots){var mn=it._plots[jn];ze._id!==mn.xaxis._id&&ze._id!==mn.yaxis._id||xn.push(nn?mn.yaxis:mn.xaxis)}xn.forEach(function(en,vn){en&&Ne(en)&&(fn||[z,R,j,V,D]).forEach(function(on){var sn="tick"===on.K&&"text"===on.L&&"period"===ze.ticklabelmode,En=it._plots[ze._mainSubplot];(on.K===z.K?En.zerolinelayer.selectAll("."+ze._id+"zl"):on.K===R.K?En.minorGridlayer.selectAll("."+ze._id):on.K===j.K?En.gridlayer.selectAll("."+ze._id):En[ze._id.charAt(0)+"axislayer"]).each(function(){var kn=M.select(this);on.L&&(kn=kn.selectAll(on.L)),kn.each(function(zn){var Fn=ze.l2p(sn?nt(zn):zn.x)+ze._offset,Bn=M.select(this);Fn<ze["_visibleLabelMax_"+en._id]&&Fn>ze["_visibleLabelMin_"+en._id]?Bn.style("display","none"):"tick"!==on.K||vn||Bn.style("display",null)})})})})},Ut(kt,gt+1?gt:Et);var Nt=null;ze._selections&&(ze._selections[Lt]=kt);var qt=[function(){return It.length&&Promise.all(It)}];ze.automargin&&it._redrawFromAutoMarginCount&&90===gt?(Nt=90,qt.push(function(){Ut(kt,gt)})):qt.push(function(){if(Ut(kt,Et),At.length&&"x"===mt&&!k(Et)&&("log"!==ze.type||"D"!==String(ze.dtick).charAt(0))){Nt=0;var fn,nn=0,xn=[];if(kt.each(function(Xn){nn=Math.max(nn,Xn.fontSize);var mr=ze.l2p(Xn.x),ur=_t(this),$n=r.bBox(ur.node());xn.push({top:0,bottom:10,height:10,left:mr-$n.width/2,right:mr+$n.width/2+2,width:$n.width+2})}),"boundaries"!==ze.tickson&&!ze.showdividers||Ke.secondary){var jn=At.length,mn=Math.abs((At[jn-1].x-At[0].x)*ze._m)/(jn-1),en=ze.ticklabelposition||"",vn=function(Xn){return-1!==en.indexOf(Xn)},on=vn("top"),sn=vn("left"),En=vn("right"),kn=vn("bottom")||sn||on||En?(ze.tickwidth||0)+6:0,zn=mn<2.5*nn||"multicategory"===ze.type||"realaxis"===ze._name;for(fn=0;fn<xn.length-1;fn++)if(x.bBoxIntersect(xn[fn],xn[fn+1],kn)){Nt=zn?90:30;break}}else{var Fn=2;for(ze.ticks&&(Fn+=ze.tickwidth/2),fn=0;fn<xn.length;fn++){var Bn=At[fn].xbnd,er=xn[fn];if(null!==Bn[0]&&er.left-ze.l2p(Bn[0])<Fn||null!==Bn[1]&&ze.l2p(Bn[1])-er.right<Fn){Nt=90;break}}}Nt&&Ut(kt,Nt)}}),ze._tickAngles&&qt.push(function(){ze._tickAngles[Lt]=null===Nt?k(Et)?Et:0:Nt});var Xt=ze._anchorAxis;Xt&&Xt.autorange&&Ne(ze)&&!re(it,ze._id)&&(it._insideTickLabelsAutorange||(it._insideTickLabelsAutorange={}),it._insideTickLabelsAutorange[Xt._name+".autorange"]=Xt.autorange,qt.push(function(){kt.each(function(fn,nn){var xn=_t(this);xn.select(".text-math-group").empty()&&(ze._vals[nn].bb=r.bBox(xn.node()))})}));var Kt=x.syncOrAsync(qt);return Kt&&Kt.then&&Se._promises.push(Kt),Kt},H.getPxPosition=function(Se,ze){var Ke,it=Se._fullLayout._size,ct=ze._id.charAt(0),mt=ze.side;return"free"!==ze.anchor?Ke=ze._anchorAxis:"x"===ct?Ke={_offset:it.t+(1-(ze.position||0))*it.h,_length:0}:"y"===ct&&(Ke={_offset:it.l+(ze.position||0)*it.w+ze._shift,_length:0}),"top"===mt||"left"===mt?Ke._offset:"bottom"===mt||"right"===mt?Ke._offset+Ke._length:void 0},H.shouldShowZeroLine=function(Se,ze,Ke){var it=x.simpleMap(ze.range,ze.r2l);return it[0]*it[1]<=0&&ze.zeroline&&("linear"===ze.type||"-"===ze.type)&&!(ze.rangebreaks&&ze.maskBreaks(0)===P)&&(wt(ze,0)||!function(ct,mt,Lt,At){var ht=Lt._mainAxis;if(ht){var Et=ct._fullLayout,gt=mt._id.charAt(0),kt=H.counterLetter(mt._id),It=mt._offset+(Math.abs(At[0])<Math.abs(At[1])==("x"===gt)?0:mt._length),Ut=Et._plots[Lt._mainSubplot];if(!(Ut.mainplotinfo||Ut).overlays.length)return Kt(Lt);for(var Nt=H.list(ct,kt),qt=0;qt<Nt.length;qt++){var Xt=Nt[qt];if(Xt._mainAxis===ht&&Kt(Xt))return!0}}function Kt(fn){if(!fn.showline||!fn.linewidth)return!1;var nn=Math.max((fn.linewidth+mt.zerolinewidth)/2,1);function xn(en){return"number"==typeof en&&Math.abs(en-It)<nn}if(xn(fn._mainLinePosition)||xn(fn._mainMirrorPosition))return!0;var jn=fn._linepositions||{};for(var mn in jn)if(xn(jn[mn][0])||xn(jn[mn][1]))return!0}}(Se,ze,Ke,it)||function(ct,mt){for(var Lt=ct._fullData,At=mt._mainSubplot,ht=mt._id.charAt(0),Et=0;Et<Lt.length;Et++){var gt=Lt[Et];if(!0===gt.visible&&gt.xaxis+gt.yaxis===At&&(T.traceIs(gt,"bar-like")&&gt.orientation==={x:"h",y:"v"}[ht]||gt.fill&&gt.fill.charAt(gt.fill.length-1)===ht))return!0}return!1}(Se,ze))},H.clipEnds=function(Se,ze){return ze.filter(function(Ke){return wt(Se,Ke.x)})},H.allowAutoMargin=function(Se){for(var ze=H.list(Se,"",!0),Ke=0;Ke<ze.length;Ke++){var it=ze[Ke];it.automargin&&(l.allowAutoMargin(Se,pt(it)),it.mirror&&l.allowAutoMargin(Se,Pt(it))),T.getComponentMethod("rangeslider","isVisible")(it)&&l.allowAutoMargin(Se,St(it))}},H.swap=function(Se,ze){for(var Ke=function(ct,mt){var Lt,At,ht=[];for(Lt=0;Lt<mt.length;Lt++){var Et=[],gt=ct._fullData[mt[Lt]].xaxis,kt=ct._fullData[mt[Lt]].yaxis;if(gt&&kt){for(At=0;At<ht.length;At++)-1===ht[At].x.indexOf(gt)&&-1===ht[At].y.indexOf(kt)||Et.push(At);if(Et.length){var It,Ut=ht[Et[0]];if(Et.length>1)for(At=1;At<Et.length;At++)Ot(Ut.x,(It=ht[Et[At]]).x),Ot(Ut.y,It.y);Ot(Ut.x,[gt]),Ot(Ut.y,[kt])}else ht.push({x:[gt],y:[kt]})}}return ht}(Se,ze),it=0;it<Ke.length;it++)jt(Se,Ke[it].x,Ke[it].y)}},4322:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(50606).BADNUM,T=k.isArrayOrTypedArray,x=k.isDateTime,p=k.cleanNumber,s=Math.round;function e(r,n){return n?M(r):"number"==typeof r}function o(r){return Math.max(1,(r-1)/1e3)}$.exports=function(r,n,a){var g,i=r,c=a.noMultiCategory;if(T(i)&&!i.length)return"-";if(!c&&T((g=i)[0])&&T(g[1]))return"multicategory";if(c&&Array.isArray(i[0])){for(var h=[],f=0;f<i.length;f++)if(T(i[f]))for(var b=0;b<i[f].length;b++)h.push(i[f][b]);i=h}if(function(g,y){for(var d=g.length,m=o(d),w=0,u=0,S={},_=0;_<d;_+=m){var E=g[s(_)],L=String(E);S[L]||(S[L]=1,x(E,y)&&w++,M(E)&&u++)}return w>2*u}(i,n))return"date";var v="strict"!==a.autotypenumbers;return function(g,y){for(var d=g.length,m=o(d),w=0,u=0,S={},_=0;_<d;_+=m){var E=g[s(_)],L=String(E);if(!S[L]){S[L]=1;var C=typeof E;"boolean"===C?u++:(y?p(E)!==l:"number"===C)?w++:"string"===C&&u++}}return u>2*w}(i,v)?"category":function(g,y){for(var d=g.length,m=0;m<d;m++)if(e(g[m],y))return!0;return!1}(i,v)?"linear":"-"}},71453:function($,I,t){"use strict";var M=t(92770),k=t(73972),l=t(71828),T=t(44467),x=t(85501),p=t(13838),s=t(26218),e=t(38701),o=t(96115),r=t(89426),n=t(15258),a=t(92128),i=t(21994),c=t(85555).WEEKDAY_PATTERN,h=t(85555).HOUR_PATTERN;function f(g,y,d){function m(P,z){return l.coerce(g,y,p.rangebreaks,P,z)}if(m("enabled")){var w=m("bounds");if(w&&w.length>=2){var u,S,_="";if(2===w.length)for(u=0;u<2;u++)if(S=v(w[u])){_=c;break}var E=m("pattern",_);if(E===c)for(u=0;u<2;u++)(S=v(w[u]))&&(y.bounds[u]=w[u]=S-1);if(E)for(u=0;u<2;u++)switch(S=w[u],E){case c:if(!M(S)||(S=+S)!==Math.floor(S)||S<0||S>=7)return void(y.enabled=!1);y.bounds[u]=w[u]=S;break;case h:if(!M(S)||(S=+S)<0||S>24)return void(y.enabled=!1);y.bounds[u]=w[u]=S}if(!1===d.autorange){var L=d.range;if(L[0]<L[1]){if(w[0]<L[0]&&w[1]>L[1])return void(y.enabled=!1)}else if(w[0]>L[0]&&w[1]<L[1])return void(y.enabled=!1)}}else{var C=m("values");if(!C||!C.length)return void(y.enabled=!1);m("dvalue")}}}$.exports=function(g,y,d,m,w){var u,S=m.letter,_=m.font||{},E=m.splomStash||{},L=d("visible",!m.visibleDflt),P=y.type||(y._template||{}).type||"-";"date"===P&&(k.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",m.calendar),m.noTicklabelmode||(u=d("ticklabelmode")));var z="";m.noTicklabelposition&&"multicategory"!==P||(z=l.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===u?["outside","inside"]:"x"===S?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),m.noTicklabeloverflow||d("ticklabeloverflow",-1!==z.indexOf("inside")?"hide past domain":"category"===P||"multicategory"===P?"allow":"hide past div"),i(y,w);var j=!y.isValidRange(g.range);j&&m.reverseDflt&&(j="reversed"),!d("autorange",j)||"linear"!==P&&"-"!==P||d("rangemode"),d("range"),y.cleanRange(),n(g,y,d,m),"category"===P||m.noHover||d("hoverformat");var R=d("color"),V=R!==p.color.dflt?R:_.color,D=E.label||w._dfltTitle[S];if(r(g,y,d,P,m),!L)return y;d("title.text",D),l.coerceFont(d,"title.font",{family:_.family,size:l.bigFont(_.size),color:V}),s(g,y,d,P);var B=m.hasMinor;if(B&&(T.newContainer(y,"minor"),s(g,y,d,P,{isMinor:!0})),o(g,y,d,P,m),e(g,y,d,m),B){var N=m.isMinor;m.isMinor=!0,e(g,y,d,m),m.isMinor=N}a(g,y,d,{dfltColor:R,bgColor:m.bgColor,showGrid:m.showGrid,hasMinor:B,attributes:p}),!B||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&d("mirror");var U,J="multicategory"===P;if(m.noTickson||"category"!==P&&!J||!y.ticks&&!y.showgrid||(J&&(U="boundaries"),"boundaries"===d("tickson",U)&&delete y.ticklabelposition),J&&d("showdividers")&&(d("dividercolor"),d("dividerwidth")),"date"===P)if(x(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),y.rangebreaks.length){for(var Y=0;Y<y.rangebreaks.length;Y++)if(y.rangebreaks[Y].pattern===c){y._hasDayOfWeekBreaks=!0;break}if(i(y,w),w._has("scattergl")||w._has("splom"))for(var q=0;q<m.data.length;q++){var H=m.data[q];"scattergl"!==H.type&&"splom"!==H.type||(H.visible=!1,l.warn(H.type+" traces do not work on axes with rangebreaks. Setting trace "+H.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function v(g){if("string"==typeof g)return b[g.substr(0,3).toLowerCase()]}},12663:function($,I,t){"use strict";var M=t(31562),k=M.FORMAT_LINK,l=M.DATE_FORMAT_LINK;function T(p,s){return["Sets the "+p+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function x(p,s){return T(p,s)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function(p,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:x)("hover text",p)+["By default the values are formatted using "+(s?"generic number format":"`"+p+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:x}},41675:function($,I,t){"use strict";var M=t(73972),k=t(85555);function l(T,x){if(x&&x.length)for(var p=0;p<x.length;p++)if(x[p][T])return!0;return!1}I.id2name=function(T){if("string"==typeof T&&T.match(k.AX_ID_PATTERN)){var x=T.split(" ")[0].substr(1);return"1"===x&&(x=""),T.charAt(0)+"axis"+x}},I.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var x=T.substr(5);return"1"===x&&(x=""),T.charAt(0)+x}},I.cleanId=function(T,x,p){var s=/( domain)$/.test(T);if("string"==typeof T&&T.match(k.AX_ID_PATTERN)&&(!x||T.charAt(0)===x)&&(!s||p)){var e=T.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===e&&(e=""),T.charAt(0)+e+(s&&p?" domain":"")}},I.list=function(T,x,p){var s=T._fullLayout;if(!s)return[];var e,o=I.listIds(T,x),r=new Array(o.length);for(e=0;e<o.length;e++){var n=o[e];r[e]=s[n.charAt(0)+"axis"+n.substr(1)]}if(!p){var a=s._subplots.gl3d||[];for(e=0;e<a.length;e++){var i=s[a[e]];x?r.push(i[x+"axis"]):r.push(i.xaxis,i.yaxis,i.zaxis)}}return r},I.listIds=function(T,x){var p=T._fullLayout;if(!p)return[];var s=p._subplots;return x?s[x+"axis"]:s.xaxis.concat(s.yaxis)},I.getFromId=function(T,x,p){var s=T._fullLayout;return x=void 0===x||"string"!=typeof x?x:x.replace(" domain",""),"x"===p?x=x.replace(/y[0-9]*/,""):"y"===p&&(x=x.replace(/x[0-9]*/,"")),s[I.id2name(x)]},I.getFromTrace=function(T,x,p){var s=T._fullLayout,e=null;if(M.traceIs(x,"gl3d")){var o=x.scene;"scene"===o.substr(0,5)&&(e=s[o][p+"axis"])}else e=I.getFromId(T,x[p+"axis"]||p);return e},I.idSort=function(T,x){var p=T.charAt(0),s=x.charAt(0);return p!==s?p>s?1:-1:+(T.substr(1)||1)-+(x.substr(1)||1)},I.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},I.isLinked=function(T,x){return l(x,T._axisMatchGroups)||l(x,T._axisConstraintGroups)}},15258:function($){"use strict";$.exports=function(I,t,M,k){if("category"===t.type){var l,T=I.categoryarray,x=Array.isArray(T)&&T.length>0;x&&(l="array");var p,s=M("categoryorder",l);"array"===s&&(p=M("categoryarray")),x||"array"!==s||(s=t.categoryorder="trace"),"trace"===s?t._initialCategories=[]:"array"===s?t._initialCategories=p.slice():(p=function(e,o){var r,n,a,i=o.dataAttr||e._id.charAt(0),c={};if(o.axData)r=o.axData;else for(r=[],n=0;n<o.data.length;n++){var h=o.data[n];h[i+"axis"]===e._id&&r.push(h)}for(n=0;n<r.length;n++){var f=r[n][i];for(a=0;a<f.length;a++){var b=f[a];null!=b&&(c[b]=1)}}return Object.keys(c)}(t,k).sort(),"category ascending"===s?t._initialCategories=p:"category descending"===s&&(t._initialCategories=p.reverse()))}}},66287:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(50606),T=l.ONEDAY,x=l.ONEWEEK;I.dtick=function(p,s){var e="log"===s,o="date"===s,r="category"===s,n=o?T:1;if(!p)return n;if(M(p))return(p=Number(p))<=0?n:r?Math.max(1,Math.round(p)):o?Math.max(.1,p):p;if("string"!=typeof p||!o&&!e)return n;var a=p.charAt(0),i=p.substr(1);return(i=M(i)?Number(i):0)<=0||!(o&&"M"===a&&i===Math.round(i)||e&&"L"===a||e&&"D"===a&&(1===i||2===i))?n:p},I.tick0=function(p,s,e,o){return"date"===s?k.cleanDate(p,k.dateTick0(e,o%x==0?1:0)):"D1"!==o&&"D2"!==o?M(p)?Number(p):0:void 0}},85555:function($,I,t){"use strict";var M=t(30587).counter;$.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function($,I,t){"use strict";var M=t(71828),k=t(71739),l=t(41675).id2name,T=t(13838),x=t(42449),p=t(21994),s=t(50606).ALMOST_EQUAL,e=t(18783).FROM_BL;function o(f,b,v){var g=v.axIds,y=v.layoutOut,d=v.hasImage,m=y._axisConstraintGroups,w=y._axisMatchGroups,u=b._id,S=u.charAt(0),_=((y._splomAxes||{})[S]||{})[u]||{},E=b._id,L="x"===E.charAt(0);function C(X,Q){return M.coerce(f,b,T,X,Q)}b._matchGroup=null,b._constraintGroup=null,C("constrain",d?"domain":"range"),M.coerce(f,b,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var P,z,j=b.type,R=[];for(P=0;P<g.length;P++)(z=g[P])!==E&&y[l(z)].type===j&&R.push(z);var V=n(m,E);if(V){var D=[];for(P=0;P<R.length;P++)V[z=R[P]]||D.push(z);R=D}var B,N,U=R.length;U&&(f.matches||_.matches)&&(B=M.coerce(f,b,{matches:{valType:"enumerated",values:R,dflt:-1!==R.indexOf(_.matches)?_.matches:void 0}},"matches"));var J=d&&!L?b.anchor:void 0;if(U&&!B&&(f.scaleanchor||J)&&(N=M.coerce(f,b,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",J)),B){b._matchGroup=a(w,E,B,1);var Y=y[l(B)],q=r(y,b)/r(y,Y);L!==("x"===B.charAt(0))&&(q=(L?"x":"y")+q),a(m,E,B,q)}else f.matches&&-1!==g.indexOf(f.matches)&&M.warn("ignored "+b._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(N){var H=C("scaleratio");H||(H=b.scaleratio=1),a(m,E,N,H)}else f.scaleanchor&&-1!==g.indexOf(f.scaleanchor)&&M.warn("ignored "+b._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(f,b){var v=b.domain;return v||(v=f[l(b.overlaying)].domain),v[1]-v[0]}function n(f,b){for(var v=0;v<f.length;v++)if(f[v][b])return f[v];return null}function a(f,b,v,g){var y,d,m,w,u,S=n(f,b);null===S?((S={})[b]=1,u=f.length,f.push(S)):u=f.indexOf(S);var _=Object.keys(S);for(y=0;y<f.length;y++)if(m=f[y],y!==u&&m[v]){var E=m[v];for(d=0;d<_.length;d++)m[w=_[d]]=i(E,i(g,S[w]));return void f.splice(u,1)}if(1!==g)for(d=0;d<_.length;d++){var L=_[d];S[L]=i(g,S[L])}S[v]=1}function i(f,b){var v,g,y="",d="";"string"==typeof f&&(v=(y=f.match(/^[xy]*/)[0]).length,f=+f.substr(v)),"string"==typeof b&&(g=(d=b.match(/^[xy]*/)[0]).length,b=+b.substr(g));var m=f*b;return v||g?v&&g&&y.charAt(0)!==d.charAt(0)?v===g?m:(v>g?y.substr(g):d.substr(v))+m:y+d+f*b:m}function c(f,b){for(var v=b._size,g=v.h/v.w,y={},d=Object.keys(f),m=0;m<d.length;m++){var w=d[m],u=f[w];if("string"==typeof u){var S=u.match(/^[xy]*/)[0],_=S.length;u=+u.substr(_);for(var E="y"===S.charAt(0)?g:1/g,L=0;L<_;L++)u*=E}y[w]=u}return y}function h(f,b){var v=f._inputDomain,y=v[0]+(v[1]-v[0])*e[f.constraintoward];f.domain=f._input.domain=[y+(v[0]-y)/b,y+(v[1]-y)/b],f.setScale()}I.handleDefaults=function(f,b,v){var g,y,d,m,w,u,S,_,E=v.axIds,L=v.axHasImage,C=b._axisConstraintGroups=[],P=b._axisMatchGroups=[];for(g=0;g<E.length;g++)o(w=f[m=l(E[g])],u=b[m],{axIds:E,layoutOut:b,hasImage:L[m]});function z(Y,q){for(g=0;g<Y.length;g++)for(d in y=Y[g])b[l(d)][q]=y}for(z(P,"_matchGroup"),g=0;g<C.length;g++)for(d in y=C[g])if((u=b[l(d)]).fixedrange){for(var j in y){var R=l(j);!1===(f[R]||{}).fixedrange&&M.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),b[R].fixedrange=!0}break}for(g=0;g<C.length;){for(d in y=C[g]){(u=b[l(d)])._matchGroup&&Object.keys(u._matchGroup).length===Object.keys(y).length&&(C.splice(g,1),g--);break}g++}z(C,"_constraintGroup");var V=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],D=!1,B=!1;function N(){_=u[S],"rangebreaks"===S&&(B=u._hasDayOfWeekBreaks)}for(g=0;g<P.length;g++){y=P[g];for(var U=0;U<V.length;U++){var J;for(d in S=V[U],_=null,y)if(w=f[m=l(d)],S in(u=b[m])){if(!u.matches&&(J=u,S in w)){N();break}null===_&&S in w&&N()}if("range"===S&&_&&(D=!0),"autorange"===S&&null===_&&D&&(_=!1),null===_&&S in J&&(_=J[S]),null!==_)for(d in y)(u=b[l(d)])[S]="range"===S?_.slice():_,"rangebreaks"===S&&(u._hasDayOfWeekBreaks=B,p(u,b))}}},I.enforce=function(f){var b,v,g,y,d,m,w,u,S=f._fullLayout,_=S._axisConstraintGroups||[];for(b=0;b<_.length;b++){g=c(_[b],S);var E=Object.keys(g),L=1/0,C=0,P=1/0,z={},j={},R=!1;for(v=0;v<E.length;v++)j[y=E[v]]=d=S[l(y)],d._inputDomain?d.domain=d._inputDomain.slice():d._inputDomain=d.domain.slice(),d._inputRange||(d._inputRange=d.range.slice()),d.setScale(),z[y]=m=Math.abs(d._m)/g[y],L=Math.min(L,m),"domain"!==d.constrain&&d._constraintShrinkable||(P=Math.min(P,m)),delete d._constraintShrinkable,C=Math.max(C,m),"domain"===d.constrain&&(R=!0);if(!(L>s*C)||R)for(v=0;v<E.length;v++)if(m=z[y=E[v]],w=(d=j[y]).constrain,m!==P||"domain"===w)if(u=m/P,"range"===w)x(d,u);else{var V=d._inputDomain,D=(d.domain[1]-d.domain[0])/(V[1]-V[0]),B=(d.r2l(d.range[1])-d.r2l(d.range[0]))/(d.r2l(d._inputRange[1])-d.r2l(d._inputRange[0]));if((u/=D)*B<1){d.domain=d._input.domain=V.slice(),x(d,u);continue}if(B<1&&(d.range=d._input.range=d._inputRange.slice(),u*=B),d.autorange){var N=d.r2l(d.range[0]),U=d.r2l(d.range[1]),J=(N+U)/2,Y=J,q=J,H=Math.abs(U-J),X=J-H*u*1.0001,Q=J+H*u*1.0001,ne=k.makePadFn(S,d,0),re=k.makePadFn(S,d,1);h(d,u);var ae,se,pe=Math.abs(d._m),ke=k.concatExtremes(f,d),me=ke.min,le=ke.max;for(se=0;se<me.length;se++)(ae=me[se].val-ne(me[se])/pe)>X&&ae<Y&&(Y=ae);for(se=0;se<le.length;se++)(ae=le[se].val+re(le[se])/pe)<Q&&ae>q&&(q=ae);u/=(q-Y)/(2*H),Y=d.l2r(Y),q=d.l2r(q),d.range=d._input.range=N<U?[Y,q]:[q,Y]}h(d,u)}}},I.getAxisGroup=function(f,b){for(var v=f._axisMatchGroups,g=0;g<v.length;g++)if(v[g][b])return"g"+g;return b},I.clean=function(f,b){if(b._inputDomain){for(var v=!1,g=b._id,y=f._fullLayout._axisConstraintGroups,d=0;d<y.length;d++)if(y[d][g]){v=!0;break}v&&"domain"===b.constrain||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},29323:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=k.numberFormat,T=t(84267),x=t(38520),p=t(73972),s=k.strTranslate,e=t(63893),o=t(7901),r=t(91424),n=t(30211),a=t(89298),i=t(6964),c=t(28569),h=t(64505),f=h.selectingOrDrawing,b=h.freeMode,v=t(18783).FROM_TL,g=t(33306),y=t(61549).redrawReglTraces,d=t(74875),m=t(41675).getFromId,w=t(47322).prepSelect,u=t(47322).clearOutline,S=t(47322).selectOnClick,_=t(42449),E=t(85555),L=E.MINDRAG,C=E.MINZOOM,P=!0;function z(ae,se,pe,ke){var me=k.ensureSingle(ae.draglayer,se,pe,function(le){le.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return me.call(i,ke),me.node()}function j(ae,se,pe,ke,me,le,ue){var Ee=z(ae,"rect",se,pe);return M.select(Ee).call(r.setRect,ke,me,le,ue),Ee}function R(ae,se){for(var pe=0;pe<ae.length;pe++)if(!ae[pe].fixedrange)return se;return""}function V(ae,se,pe,ke,me){for(var le=0;le<ae.length;le++){var ue=ae[le];if(!ue.fixedrange)if(ue.rangebreaks){var Ee="y"===ue._id.charAt(0),xe=Ee?1-pe:pe;ke[ue._name+".range[0]"]=ue.l2r(ue.p2l((Ee?1-se:se)*ue._length)),ke[ue._name+".range[1]"]=ue.l2r(ue.p2l(xe*ue._length))}else{var Te=ue._rl[0],we=ue._rl[1]-Te;ke[ue._name+".range[0]"]=ue.l2r(Te+we*se),ke[ue._name+".range[1]"]=ue.l2r(Te+we*pe)}}if(me&&me.length){var K=(se+(1-pe))/2;V(me,K,1-K,ke,[])}}function D(ae,se){for(var pe=0;pe<ae.length;pe++){var ke=ae[pe];if(!ke.fixedrange)if(ke.rangebreaks){var me=ke._length,le=(ke.p2l(0+se)-ke.p2l(0)+(ke.p2l(me+se)-ke.p2l(me)))/2;ke.range=[ke.l2r(ke._rl[0]-le),ke.l2r(ke._rl[1]-le)]}else ke.range=[ke.l2r(ke._rl[0]-se/ke._m),ke.l2r(ke._rl[1]-se/ke._m)]}}function B(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function N(ae,se,pe,ke,me){return ae.append("path").attr("class","zoombox").style({fill:se>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(pe,ke)).attr("d",me+"Z")}function U(ae,se,pe){return ae.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(se,pe)).attr("d","M0,0Z")}function J(ae,se,pe,ke,me,le){ae.attr("d",ke+"M"+pe.l+","+pe.t+"v"+pe.h+"h"+pe.w+"v-"+pe.h+"h-"+pe.w+"Z"),Y(ae,se,me,le)}function Y(ae,se,pe,ke){pe||(ae.transition().style("fill",ke>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),se.transition().style("opacity",1).duration(200))}function q(ae){M.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function H(ae){P&&ae.data&&ae._context.showTips&&(k.notifier(k._(ae,"Double-click to zoom back out"),"long"),P=!1)}function X(ae){var se=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,C)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+se)+"h3v"+-se+"h"+se+"v-3h-"+(se+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+se)+"h-3v"+-se+"h"+-se+"v-3h"+(se+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-se)+"h-3v"+se+"h"+-se+"v3h"+(se+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-se)+"h3v"+se+"h"+se+"v3h-"+(se+3)+"Z"}function Q(ae,se,pe,ke,me){for(var le,ue,Ee,de,xe=!1,Te={},we={},K=(me||{}).xaHash,oe=(me||{}).yaHash,he=0;he<se.length;he++){var ye=se[he];for(le in pe)if(ye[le]){for(Ee in ye)me&&(K[Ee]||oe[Ee])||("x"===Ee.charAt(0)?pe:ke)[Ee]||(Te[Ee]=le);for(ue in ke)me&&(K[ue]||oe[ue])||!ye[ue]||(xe=!0)}for(ue in ke)if(ye[ue])for(de in ye)me&&(K[de]||oe[de])||("x"===de.charAt(0)?pe:ke)[de]||(we[de]=ue)}xe&&(k.extendFlat(Te,we),we={});var Me={},Re=[];for(Ee in Te){var Pe=m(ae,Ee);Re.push(Pe),Me[Pe._id]=Pe}var De={},fe=[];for(de in we){var ge=m(ae,de);fe.push(ge),De[ge._id]=ge}return{xaHash:Me,yaHash:De,xaxes:Re,yaxes:fe,xLinks:Te,yLinks:we,isSubplotConstrained:xe}}function ne(ae,se){if(x){var pe=void 0!==ae.onwheel?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(pe,ae._onwheel),ae._onwheel=se,ae.addEventListener(pe,se,{passive:!1})}else void 0!==ae.onwheel?ae.onwheel=se:void 0!==ae.onmousewheel?ae.onmousewheel=se:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",se,{passive:!1}))}function re(ae){var se=[];for(var pe in ae)se.push(ae[pe]);return se}$.exports={makeDragBox:function(ae,se,pe,ke,me,le,ue,Ee){var de,xe,Te,we,K,oe,he,ye,Me,Re,Pe,De,fe,ge,be,Ie,He,Ve,tt,nt,st,dt,wt,_t=ae._fullLayout._zoomlayer,pt=ue+Ee==="nsew",Pt=1===(ue+Ee).length;function St(){if(Me=(de=se.xaxis)._length,Re=(xe=se.yaxis)._length,he=de._offset,ye=xe._offset,(Te={})[de._id]=de,(we={})[xe._id]=xe,ue&&Ee)for(var en=se.overlays,vn=0;vn<en.length;vn++){var on=en[vn].xaxis;Te[on._id]=on;var sn=en[vn].yaxis;we[sn._id]=sn}K=re(Te),oe=re(we),fe=R(K,Ee),ge=R(oe,ue),be=!ge&&!fe,De=Q(ae,ae._fullLayout._axisMatchGroups,Te,we);var En=(Pe=Q(ae,ae._fullLayout._axisConstraintGroups,Te,we,De)).isSubplotConstrained||De.isSubplotConstrained;Ie=Ee||En,He=ue||En;var kn=ae._fullLayout;Ve=kn._has("scattergl"),tt=kn._has("splom"),nt=kn._has("svg")}pe+=se.yaxis._shift,St();var en,Ot=(en=ge+fe)?"nsew"===en?pt?"":"pan"===ae._fullLayout.dragmode?"move":"crosshair":en.toLowerCase()+"-resize":"pointer",jt=j(se,ue+Ee+"drag",Ot,pe,ke,me,le);if(be&&!pt)return jt.onmousedown=null,jt.style.pointerEvents="none",jt;var Dt,Ye,Ze,Ne,Je,at,Se,ze,Ke,it,ct={element:jt,gd:ae,plotinfo:se};function mt(){ct.plotinfo.selection=!1,u(ae)}function Lt(en,vn){var Xn,mr,ur,$n,lr,on=ct.gd;if(on._fullLayout._activeShapeIndex>=0)on._fullLayout._deactivateShape(on);else{var sn=on._fullLayout.clickmode;if(q(on),2!==en||Pt||function Kt(){if(!ae._transitioningWithDuration){var en=ae._context.doubleClick,vn=[];fe&&(vn=vn.concat(K)),ge&&(vn=vn.concat(oe)),De.xaxes&&(vn=vn.concat(De.xaxes)),De.yaxes&&(vn=vn.concat(De.yaxes));var on,sn,En,kn={};if("reset+autosize"===en)for(en="autosize",sn=0;sn<vn.length;sn++)if((on=vn[sn])._rangeInitial&&(on.range[0]!==on._rangeInitial[0]||on.range[1]!==on._rangeInitial[1])||!on._rangeInitial&&!on.autorange){en="reset";break}if("autosize"===en)for(sn=0;sn<vn.length;sn++)(on=vn[sn]).fixedrange||(kn[on._name+".autorange"]=!0);else if("reset"===en)for((fe||Pe.isSubplotConstrained)&&(vn=vn.concat(Pe.xaxes)),ge&&!Pe.isSubplotConstrained&&(vn=vn.concat(Pe.yaxes)),Pe.isSubplotConstrained&&(fe?ge||(vn=vn.concat(oe)):vn=vn.concat(K)),sn=0;sn<vn.length;sn++)(on=vn[sn]).fixedrange||(on._rangeInitial?(kn[on._name+".range[0]"]=(En=on._rangeInitial)[0],kn[on._name+".range[1]"]=En[1]):kn[on._name+".autorange"]=!0);ae.emit("plotly_doubleclick",null),p.call("_guiRelayout",ae,kn)}}(),pt)sn.indexOf("select")>-1&&S(vn,on,K,oe,se.id,ct),sn.indexOf("event")>-1&&n.click(on,vn,se.id);else if(1===en&&Pt){var En=ue?xe:de,kn="s"===ue||"w"===Ee?0:1,zn=En._name+".range["+kn+"]",Fn=($n=(Xn=En).range[mr=kn],lr=Math.abs($n-Xn.range[1-mr]),"date"===Xn.type?$n:"log"===Xn.type?(ur=Math.ceil(Math.max(0,-Math.log(lr)/Math.LN10))+3,l("."+ur+"g")(Math.pow(10,$n))):(ur=Math.floor(Math.log(Math.abs($n))/Math.LN10)-Math.floor(Math.log(lr)/Math.LN10)+4,l("."+String(ur)+"g")($n))),Bn="left",er="middle";if(En.fixedrange)return;ue?(er="n"===ue?"top":"bottom","right"===En.side&&(Bn="right")):"e"===Ee&&(Bn="right"),on._context.showAxisRangeEntryBoxes&&M.select(jt).call(e.makeEditable,{gd:on,immediate:!0,background:on._fullLayout.paper_bgcolor,text:String(Fn),fill:En.tickfont?En.tickfont.color:"#444",horizontalAlign:Bn,verticalAlign:er}).on("edit",function(Xn){var mr=En.d2r(Xn);void 0!==mr&&p.call("_guiRelayout",on,zn,mr)})}}}function At(en,vn){if(ae._transitioningWithDuration)return!1;var er,Xn,on=Math.max(0,Math.min(Me,dt*en+Dt)),sn=Math.max(0,Math.min(Re,wt*vn+Ye)),En=Math.abs(on-Dt),kn=Math.abs(sn-Ye);function zn(){Se="",Ze.r=Ze.l,Ze.t=Ze.b,Ke.attr("d","M0,0Z")}if(Ze.l=Math.min(Dt,on),Ze.r=Math.max(Dt,on),Ze.t=Math.min(Ye,sn),Ze.b=Math.max(Ye,sn),Pe.isSubplotConstrained)En>C||kn>C?(Se="xy",En/Me>kn/Re?(kn=En*Re/Me,Ye>sn?Ze.t=Ye-kn:Ze.b=Ye+kn):(En=kn*Me/Re,Dt>on?Ze.l=Dt-En:Ze.r=Dt+En),Ke.attr("d",X(Ze))):zn();else if(De.isSubplotConstrained)if(En>C||kn>C){Se="xy";var Fn=Math.min(Ze.l/Me,(Re-Ze.b)/Re),Bn=Math.max(Ze.r/Me,(Re-Ze.t)/Re);Ze.l=Fn*Me,Ze.r=Bn*Me,Ze.b=(1-Fn)*Re,Ze.t=(1-Bn)*Re,Ke.attr("d",X(Ze))}else zn();else!ge||kn<Math.min(Math.max(.6*En,L),C)?En<L||!fe?zn():(Ze.t=0,Ze.b=Re,Se="x",Ke.attr("d","M"+((er=Ze).l-.5)+","+((Xn=Ye)-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(er.r+.5)+","+(Xn-C-.5)+"h3v"+(2*C+1)+"h-3Z")):!fe||En<Math.min(.6*kn,C)?(Ze.l=0,Ze.r=Me,Se="y",Ke.attr("d",function(er,Xn){return"M"+(Xn-C-.5)+","+(er.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Xn-C-.5)+","+(er.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(Ze,Dt))):(Se="xy",Ke.attr("d",X(Ze)));Ze.w=Ze.r-Ze.l,Ze.h=Ze.b-Ze.t,Se&&(it=!0),ae._dragged=it,J(ze,Ke,Ze,Je,at,Ne),ht(),ae.emit("plotly_relayouting",st),at=!0}function ht(){st={},"xy"!==Se&&"x"!==Se||(V(K,Ze.l/Me,Ze.r/Me,st,Pe.xaxes),qt("x",st)),"xy"!==Se&&"y"!==Se||(V(oe,(Re-Ze.b)/Re,(Re-Ze.t)/Re,st,Pe.yaxes),qt("y",st))}function Et(){ht(),q(ae),fn(),H(ae)}ct.prepFn=function(en,vn,on){var sn=ct.dragmode,En=ae._fullLayout.dragmode;En!==sn&&(ct.dragmode=En),St(),dt=ae._fullLayout._invScaleX,wt=ae._fullLayout._invScaleY,be||(pt?en.shiftKey?"pan"===En?En="zoom":f(En)||(En="pan"):en.ctrlKey&&(En="pan"):En="pan"),ct.minDrag=b(En)?1:void 0,f(En)?(ct.xaxes=K,ct.yaxes=oe,w(en,vn,on,ct,En)):(ct.clickFn=Lt,f(sn)&&mt(),be||("zoom"===En?(ct.moveFn=At,ct.doneFn=Et,ct.minDrag=1,function(kn,zn,Fn){var Bn=jt.getBoundingClientRect();Dt=zn-Bn.left,Ye=Fn-Bn.top,ae._fullLayout._calcInverseTransform(ae);var er=k.apply3DTransform(ae._fullLayout._invTransform)(Dt,Ye);Ze={l:Dt=er[0],r:Dt,w:0,t:Ye=er[1],b:Ye,h:0},Ne=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:T(ae._fullLayout.plot_bgcolor).getLuminance(),at=!1,Se="xy",it=!1,ze=N(_t,Ne,he,ye,Je="M0,0H"+Me+"V"+Re+"H0V0"),Ke=U(_t,he,ye)}(0,vn,on)):"pan"===En&&(ct.moveFn=Nt,ct.doneFn=fn))),ae._fullLayout._redrag=function(){var kn=ae._dragdata;kn&&kn.element===jt&&(f(ae._fullLayout.dragmode)||(St(),nn([0,0,Me,Re]),ct.moveFn(kn.dx,kn.dy)))}},c.init(ct);var gt=[0,0,Me,Re],kt=null,It=E.REDRAWDELAY,Ut=se.mainplot?ae._fullLayout._plots[se.mainplot]:se;function Nt(en,vn){if(en*=dt,vn*=wt,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,"ew"===fe||"ns"===ge){var on=fe?-en:0,sn=ge?-vn:0;if(De.isSubplotConstrained){if(fe&&ge){var En=(en/Me-vn/Re)/2;on=-(en=En*Me),sn=-(vn=-En*Re)}ge?on=-sn*Me/Re:sn=-on*Re/Me}return fe&&(D(K,en),qt("x")),ge&&(D(oe,vn),qt("y")),nn([on,sn,Me,Re]),Xt(),void ae.emit("plotly_relayouting",st)}var kn,zn,Fn="w"===fe==("n"===ge)?1:-1;if(fe&&ge&&(Pe.isSubplotConstrained||De.isSubplotConstrained)){var Bn=(en/Me+Fn*vn/Re)/2;en=Bn*Me,vn=Fn*Bn*Re}if("w"===fe?en=ur(K,0,en):"e"===fe?en=ur(K,1,-en):fe||(en=0),"n"===ge?vn=ur(oe,1,vn):"s"===ge?vn=ur(oe,0,-vn):ge||(vn=0),kn="w"===fe?en:0,zn="n"===ge?vn:0,Pe.isSubplotConstrained&&!De.isSubplotConstrained||De.isSubplotConstrained&&fe&&ge&&Fn>0){var er;if(De.isSubplotConstrained||!fe&&1===ge.length){for(er=0;er<K.length;er++)K[er].range=K[er]._r.slice(),_(K[er],1-vn/Re);kn=(en=vn*Me/Re)/2}if(De.isSubplotConstrained||!ge&&1===fe.length){for(er=0;er<oe.length;er++)oe[er].range=oe[er]._r.slice(),_(oe[er],1-en/Me);zn=(vn=en*Re/Me)/2}}De.isSubplotConstrained&&ge||qt("x"),De.isSubplotConstrained&&fe||qt("y");var Xn=Me-en,mr=Re-vn;!De.isSubplotConstrained||fe&&ge||(fe?(zn=kn?0:en*Re/Me,mr=Xn*Re/Me):(kn=zn?0:vn*Me/Re,Xn=mr*Me/Re)),nn([kn,zn,Xn,mr]),Xt(),ae.emit("plotly_relayouting",st)}function ur($n,lr,hr){for(var Gt,pn,An=1-lr,Tn=0;Tn<$n.length;Tn++){var Rn=$n[Tn];if(!Rn.fixedrange){Gt=Rn,pn=Rn._rl[An]+(Rn._rl[lr]-Rn._rl[An])/B(hr/Rn._length);var qn=Rn.l2r(pn);!1!==qn&&void 0!==qn&&(Rn.range[lr]=qn)}}return Gt._length*(Gt._rl[lr]-pn)/(Gt._rl[lr]-Gt._rl[An])}}function qt(en,vn){for(var on=De.isSubplotConstrained?{x:oe,y:K}[en]:De[en+"axes"],sn=De.isSubplotConstrained?{x:K,y:oe}[en]:[],En=0;En<on.length;En++){var kn=on[En],zn=kn._id,Fn=De.xLinks[zn]||De.yLinks[zn],Bn=sn[0]||Te[Fn]||we[Fn];Bn&&(vn?(vn[kn._name+".range[0]"]=vn[Bn._name+".range[0]"],vn[kn._name+".range[1]"]=vn[Bn._name+".range[1]"]):kn.range=Bn.range.slice())}}function Xt(){var en,vn=[];function on(zn){for(en=0;en<zn.length;en++)zn[en].fixedrange||vn.push(zn[en]._id)}function sn(zn,Fn){for(en=0;en<zn.length;en++){var Bn=zn[en],er=Bn[Fn];Bn.fixedrange||"sync"!==er.tickmode||vn.push(er._id)}}for(Ie&&(on(K),on(Pe.xaxes),on(De.xaxes),sn(se.overlays,"xaxis")),He&&(on(oe),on(Pe.yaxes),on(De.yaxes),sn(se.overlays,"yaxis")),st={},en=0;en<vn.length;en++){var kn=m(ae,vn[en]);a.drawOne(ae,kn,{skipTitle:!0}),st[kn._name+".range[0]"]=kn.range[0],st[kn._name+".range[1]"]=kn.range[1]}a.redrawComponents(ae,vn)}function fn(){nn([0,0,Me,Re]),k.syncOrAsync([d.previousPromises,function(){ae._fullLayout._replotting=!1,p.call("_guiRelayout",ae,st)}],ae)}function nn(en){var vn,on,sn,En,kn=ae._fullLayout,zn=kn._plots,Fn=kn._subplots.cartesian;if(tt&&p.subplotsRegistry.splom.drag(ae),Ve)for(vn=0;vn<Fn.length;vn++)if(sn=(on=zn[Fn[vn]]).xaxis,En=on.yaxis,on._scene){var Bn=k.simpleMap(sn.range,sn.r2l),er=k.simpleMap(En.range,En.r2l);on._scene.update({range:[Bn[0],er[0],Bn[1],er[1]]})}if((tt||Ve)&&(g(ae),y(ae)),nt){var Xn=en[2]/de._length,mr=en[3]/xe._length;for(vn=0;vn<Fn.length;vn++){sn=(on=zn[Fn[vn]]).xaxis,En=on.yaxis;var ur,$n,lr,hr,pn=(He||De.isSubplotConstrained)&&!En.fixedrange&&we[En._id];if((Ie||De.isSubplotConstrained)&&!sn.fixedrange&&Te[sn._id]?(ur=Xn,lr=Ee||De.isSubplotConstrained?en[0]:mn(sn,ur)):De.xaHash[sn._id]?(ur=Xn,lr=en[0]*sn._length/de._length):De.yaHash[sn._id]?(ur=mr,lr="ns"===ge?-en[1]*sn._length/xe._length:mn(sn,ur,{n:"top",s:"bottom"}[ge])):lr=jn(sn,ur=xn(sn,Xn,mr)),pn?($n=mr,hr=ue||De.isSubplotConstrained?en[1]:mn(En,$n)):De.yaHash[En._id]?($n=mr,hr=en[1]*En._length/xe._length):De.xaHash[En._id]?($n=Xn,hr="ew"===fe?-en[0]*En._length/de._length:mn(En,$n,{e:"right",w:"left"}[fe])):hr=jn(En,$n=xn(En,Xn,mr)),ur||$n){ur||(ur=1),$n||($n=1);var An=sn._offset-lr/ur,Tn=En._offset-hr/$n;on.clipRect.call(r.setTranslate,lr,hr).call(r.setScale,ur,$n),on.plot.call(r.setTranslate,An,Tn).call(r.setScale,1/ur,1/$n),ur===on.xScaleFactor&&$n===on.yScaleFactor||(r.setPointGroupScale(on.zoomScalePts,ur,$n),r.setTextPointsScale(on.zoomScaleTxt,ur,$n)),r.hideOutsideRangePoints(on.clipOnAxisFalseTraces,on),on.xScaleFactor=ur,on.yScaleFactor=$n}}}}function xn(en,vn,on){return en.fixedrange?0:Ie&&Pe.xaHash[en._id]?vn:He&&(Pe.isSubplotConstrained?Pe.xaHash:Pe.yaHash)[en._id]?on:0}function jn(en,vn){return vn?(en.range=en._r.slice(),_(en,vn),mn(en,vn)):0}function mn(en,vn,on){return en._length*(1-vn)*v[on||en.constraintoward||"middle"]}return ue.length*Ee.length!=1&&ne(jt,function(en){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(mt(),ae._transitioningWithDuration)return en.preventDefault(),void en.stopPropagation();St(),clearTimeout(kt);var vn=-en.deltaY;if(isFinite(vn)||(vn=en.wheelDelta/10),isFinite(vn)){var on,sn=Math.exp(-Math.min(Math.max(vn,-20),20)/200),En=Ut.draglayer.select(".nsewdrag").node().getBoundingClientRect(),kn=(en.clientX-En.left)/En.width,zn=(En.bottom-en.clientY)/En.height;if(Ie){for(Ee||(kn=.5),on=0;on<K.length;on++)Fn(K[on],kn,sn);qt("x"),gt[2]*=sn,gt[0]+=gt[2]*kn*(1/sn-1)}if(He){for(ue||(zn=.5),on=0;on<oe.length;on++)Fn(oe[on],zn,sn);qt("y"),gt[3]*=sn,gt[1]+=gt[3]*(1-zn)*(1/sn-1)}nn(gt),Xt(),ae.emit("plotly_relayouting",st),kt=setTimeout(function(){ae._fullLayout&&(gt=[0,0,Me,Re],fn())},It),en.preventDefault()}else k.log("Did not find wheel motion attributes: ",en)}function Fn(Bn,er,Xn){if(!Bn.fixedrange){var mr=k.simpleMap(Bn.range,Bn.r2l),ur=mr[0]+(mr[1]-mr[0])*er;Bn.range=mr.map(function($n){return Bn.l2r(ur+($n-ur)*Xn)})}}}),jt},makeDragger:z,makeRectDragger:j,makeZoombox:N,makeCorners:U,updateZoombox:J,xyCorners:X,transitionZoombox:Y,removeZoombox:q,showDoubleClickNotifier:H,attachWheelEventHandler:ne}},4305:function($,I,t){"use strict";var M=t(39898),k=t(30211),l=t(28569),T=t(6964),x=t(29323).makeDragBox,p=t(85555).DRAGGERSIZE;I.initInteractions=function(s){var e=s._fullLayout;if(s._context.staticPlot)M.select(s).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(r,n){if((e._plots[r].mainplot&&!0)===(e._plots[n].mainplot&&!0)){var a=r.split("y"),i=n.split("y");return a[0]===i[0]?Number(a[1]||1)-Number(i[1]||1):Number(a[0]||1)-Number(i[0]||1)}return e._plots[r].mainplot?1:-1}).forEach(function(r){var n=e._plots[r],a=n.xaxis,i=n.yaxis;if(!n.mainplot){var c=x(s,n,a._offset,i._offset,a._length,i._length,"ns","ew");c.onmousemove=function(b){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===r&&s._fullLayout._plots[r]&&k.hover(s,b,r)},k.hover(s,b,r),s._fullLayout._lasthover=c,s._fullLayout._hoversubplot=r},c.onmouseout=function(b){s._dragging||(s._fullLayout._hoversubplot=null,l.unhover(s,b))},s._context.showAxisDragHandles&&(x(s,n,a._offset-p,i._offset-p,p,p,"n","w"),x(s,n,a._offset+a._length,i._offset-p,p,p,"n","e"),x(s,n,a._offset-p,i._offset+i._length,p,p,"s","w"),x(s,n,a._offset+a._length,i._offset+i._length,p,p,"s","e"))}if(s._context.showAxisDragHandles){if(r===a._mainSubplot){var h=a._mainLinePosition;"top"===a.side&&(h-=p),x(s,n,a._offset+.1*a._length,h,.8*a._length,p,"","ew"),x(s,n,a._offset,h,.1*a._length,p,"","w"),x(s,n,a._offset+.9*a._length,h,.1*a._length,p,"","e")}if(r===i._mainSubplot){var f=i._mainLinePosition;"right"!==i.side&&(f-=p),x(s,n,f,i._offset+.1*i._length,p,.8*i._length,"ns",""),x(s,n,f,i._offset+.9*i._length,p,.1*i._length,"s",""),x(s,n,f,i._offset,p,.1*i._length,"n","")}}});var o=e._hoverlayer.node();o.onmousemove=function(r){r.target=s._fullLayout._lasthover,k.hover(s,r,e._hoversubplot)},o.onclick=function(r){r.target=s._fullLayout._lasthover,k.click(s,r)},o.onmousedown=function(r){s._fullLayout._lasthover.onmousedown(r)},I.updateFx(s)}},I.updateFx=function(s){var e=s._fullLayout;T(e._draggers,"pan"===e.dragmode?"move":"crosshair")}},76325:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(41675);$.exports=function(T){return function(x,p){var s=x[T];if(Array.isArray(s))for(var e=M.subplotsRegistry.cartesian,o=e.idRegex,r=p._subplots,n=r.xaxis,a=r.yaxis,i=r.cartesian,c=p._has("cartesian")||p._has("gl2d"),h=0;h<s.length;h++){var f=s[h];if(k.isPlainObject(f)){var b=l.cleanId(f.xref,"x",!1),v=l.cleanId(f.yref,"y",!1),g=o.x.test(b),y=o.y.test(v);if(g||y){c||k.pushUnique(p._basePlotModules,e);var d=!1;g&&-1===n.indexOf(b)&&(n.push(b),d=!0),y&&-1===a.indexOf(v)&&(a.push(v),d=!0),d&&g&&y&&i.push(b+v)}}}}}},93612:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(71828),T=t(74875),x=t(91424),p=t(27659).a0,s=t(41675),e=t(85555),o=t(77922),r=l.ensureSingle;function n(f,b,v){return l.ensureSingle(f,b,v,function(g){g.datum(v)})}function a(f,b,v,g,y){for(var d,m,w,u=e.traceLayerClasses,S=f._fullLayout,_=S._modules,E=[],L=[],C=0;C<_.length;C++){var P=(d=_[C]).name,z=k.modules[P].categories;if(z.svg){var j=d.layerName||P+"layer",R=d.plot;w=(m=p(v,R))[0],v=m[1],w.length&&E.push({i:u.indexOf(j),className:j,plotMethod:R,cdModule:w}),z.zoomScale&&L.push("."+j)}}E.sort(function(B,N){return B.i-N.i});var V=b.plot.selectAll("g.mlayer").data(E,function(B){return B.className});if(V.enter().append("g").attr("class",function(B){return B.className}).classed("mlayer",!0).classed("rangeplot",b.isRangePlot),V.exit().remove(),V.order(),V.each(function(B){var N=M.select(this),U=B.className;B.plotMethod(f,b,B.cdModule,N,g,y),-1===e.clipOnAxisFalseQuery.indexOf("."+U)&&x.setClipUrl(N,b.layerClipId,f)}),S._has("scattergl")&&(d=k.getModule("scattergl"),w=p(v,d)[0],d.plot(f,b,w)),!f._context.staticPlot&&(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(e.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var D=b.plot.selectAll(L.join(",")).selectAll(".trace");b.zoomScalePts=D.selectAll("path.point"),b.zoomScaleTxt=D.selectAll(".textpoint")}}function i(f,b){var v=b.plotgroup,g=b.id,y=e.layerValue2layerClass[b.xaxis.layer],d=e.layerValue2layerClass[b.yaxis.layer],m=f._fullLayout._hasOnlyLargeSploms;if(b.mainplot){var w=b.mainplotinfo,u=w.plotgroup,S=g+"-x",_=g+"-y";b.minorGridlayer=w.minorGridlayer,b.gridlayer=w.gridlayer,b.zerolinelayer=w.zerolinelayer,r(w.overlinesBelow,"path",S),r(w.overlinesBelow,"path",_),r(w.overaxesBelow,"g",S),r(w.overaxesBelow,"g",_),b.plot=r(w.overplot,"g",g),r(w.overlinesAbove,"path",S),r(w.overlinesAbove,"path",_),r(w.overaxesAbove,"g",S),r(w.overaxesAbove,"g",_),b.xlines=u.select(".overlines-"+y).select("."+S),b.ylines=u.select(".overlines-"+d).select("."+_),b.xaxislayer=u.select(".overaxes-"+y).select("."+S),b.yaxislayer=u.select(".overaxes-"+d).select("."+_)}else if(m)b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.xaxislayer=r(v,"g","xaxislayer-above"),b.yaxislayer=r(v,"g","yaxislayer-above");else{var E=r(v,"g","layer-subplot");b.shapelayer=r(E,"g","shapelayer"),b.imagelayer=r(E,"g","imagelayer"),b.minorGridlayer=r(v,"g","minor-gridlayer"),b.gridlayer=r(v,"g","gridlayer"),b.zerolinelayer=r(v,"g","zerolinelayer"),r(v,"path","xlines-below"),r(v,"path","ylines-below"),b.overlinesBelow=r(v,"g","overlines-below"),r(v,"g","xaxislayer-below"),r(v,"g","yaxislayer-below"),b.overaxesBelow=r(v,"g","overaxes-below"),b.plot=r(v,"g","plot"),b.overplot=r(v,"g","overplot"),b.xlines=r(v,"path","xlines-above"),b.ylines=r(v,"path","ylines-above"),b.overlinesAbove=r(v,"g","overlines-above"),r(v,"g","xaxislayer-above"),r(v,"g","yaxislayer-above"),b.overaxesAbove=r(v,"g","overaxes-above"),b.xlines=v.select(".xlines-"+y),b.ylines=v.select(".ylines-"+d),b.xaxislayer=v.select(".xaxislayer-"+y),b.yaxislayer=v.select(".yaxislayer-"+d)}m||(n(b.minorGridlayer,"g",b.xaxis._id),n(b.minorGridlayer,"g",b.yaxis._id),b.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort),n(b.gridlayer,"g",b.xaxis._id),n(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(s.idSort)),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0)}function c(f,b){if(f){var v={};for(var g in f.each(function(w){var u=w[0];M.select(this).remove(),h(u,b),v[u]=!0}),b._plots)for(var y=b._plots[g].overlays||[],d=0;d<y.length;d++){var m=y[d];v[m.id]&&m.plot.selectAll(".trace").remove()}}}function h(f,b){b._draggers.selectAll("g."+f).remove(),b._defs.select("#clip"+b._uid+f+"plot").remove()}I.name="cartesian",I.attr=["xaxis","yaxis"],I.idRoot=["x","y"],I.idRegex=e.idRegex,I.attrRegex=e.attrRegex,I.attributes=t(89502),I.layoutAttributes=t(13838),I.supplyLayoutDefaults=t(86763),I.transitionAxes=t(66847),I.finalizeSubplots=function(f,b){var v,g,y,d=b._subplots,m=d.xaxis,w=d.yaxis,u=d.cartesian,S=u.concat(d.gl2d||[]),_={},E={};for(v=0;v<S.length;v++){var L=S[v].split("y");_[L[0]]=1,E["y"+L[1]]=1}for(v=0;v<m.length;v++)_[g=m[v]]||(y=(f[s.id2name(g)]||{}).anchor,e.idRegex.y.test(y)||(y="y"),u.push(g+y),S.push(g+y),E[y]||(E[y]=1,l.pushUnique(w,y)));for(v=0;v<w.length;v++)E[y=w[v]]||(g=(f[s.id2name(y)]||{}).anchor,e.idRegex.x.test(g)||(g="x"),u.push(g+y),S.push(g+y),_[g]||(_[g]=1,l.pushUnique(m,g)));if(!S.length){for(var C in g="",y="",f)e.attrRegex.test(C)&&("x"===C.charAt(0)?(!g||+C.substr(5)<+g.substr(5))&&(g=C):(!y||+C.substr(5)<+y.substr(5))&&(y=C));g=g?s.name2id(g):"x",y=y?s.name2id(y):"y",m.push(g),w.push(y),u.push(g+y)}},I.plot=function(f,b,v,g){var y,d=f._fullLayout,m=d._subplots.cartesian,w=f.calcdata;if(!Array.isArray(b))for(b=[],y=0;y<w.length;y++)b.push(y);for(y=0;y<m.length;y++){for(var u,S=m[y],_=d._plots[S],E=[],L=0;L<w.length;L++){var C=w[L],P=C[0].trace;P.xaxis+P.yaxis===S&&((-1!==b.indexOf(P.index)||P.carpet)&&(u&&u[0].trace.xaxis+u[0].trace.yaxis===S&&-1!==["tonextx","tonexty","tonext"].indexOf(P.fill)&&-1===E.indexOf(u)&&E.push(u),E.push(C)),u=C)}a(f,_,E,v,g)}},I.clean=function(f,b,v,g){var y,d,m,w=g._plots||{},u=b._plots||{},S=g._subplots||{};if(g._hasOnlyLargeSploms&&!b._hasOnlyLargeSploms)for(m in w)(y=w[m]).plotgroup&&y.plotgroup.remove();var _=g._has&&g._has("gl"),E=b._has&&b._has("gl");if(_&&!E)for(m in w)(y=w[m])._scene&&y._scene.destroy();if(S.xaxis&&S.yaxis){var L=s.listIds({_fullLayout:g});for(d=0;d<L.length;d++){var C=L[d];b[s.id2name(C)]||g._infolayer.selectAll(".g-"+C+"title").remove()}}var P=g._has&&g._has("cartesian"),z=b._has&&b._has("cartesian");if(P&&!z)c(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(S.cartesian)for(d=0;d<S.cartesian.length;d++){var j=S.cartesian[d];u[j]||(g._cartesianlayer.selectAll("."+j+",."+j+"-x,."+j+"-y").remove(),h(j,g))}},I.drawFramework=function(f){var b=f._fullLayout,v=function(y){var d,m,w,u,S,_,E=y._fullLayout,L=E._subplots.cartesian,C=L.length,P=[],z=[];for(d=0;d<C;d++){var V=(S=(u=E._plots[w=L[d]]).xaxis)._mainAxis._id+(_=u.yaxis)._mainAxis._id,D=E._plots[V];u.overlays=[],V!==w&&D?(u.mainplot=V,u.mainplotinfo=D,z.push(w)):(u.mainplot=void 0,u.mainplotinfo=void 0,P.push(w))}for(d=0;d<z.length;d++)(u=E._plots[w=z[d]]).mainplotinfo.overlays.push(u);var B=P.concat(z),N=new Array(C);for(d=0;d<C;d++){var U=[w=B[d],(S=(u=E._plots[w]).xaxis).layer,(_=u.yaxis).layer,S.overlaying||"",_.overlaying||""];for(m=0;m<u.overlays.length;m++)U.push(u.overlays[m].id);N[d]=U}return N}(f),g=b._cartesianlayer.selectAll(".subplot").data(v,String);g.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),g.order(),g.exit().call(c,b),g.each(function(y){var d=y[0],m=b._plots[d];m.plotgroup=M.select(this),i(f,m),m.draglayer=r(b._draggers,"g",d)})},I.rangePlot=function(f,b,v){i(f,b),a(f,b,v),T.style(f)},I.toSVG=function(f){var b=f._fullLayout._glimages,v=M.select(f).selectAll(".svg-container");v.filter(function(g,y){return y===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,y=g.toDataURL("image/png");b.append("svg:image").attr({xmlns:o.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},I.updateFx=t(4305).updateFx},13838:function($,I,t){"use strict";var M=t(41940),k=t(22399),l=t(79952).P,T=t(1426).extendFlat,x=t(44467).templatedArray,p=t(12663).descriptionWithDates,s=t(50606).ONEDAY,e=t(85555),o=e.HOUR_PATTERN,r=e.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},n,{values:n.values.slice().concat(["sync"])});function i(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},b={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function v(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=5),_}function g(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=1),_}var y={valType:"color",dflt:k.defaultLine,editType:"ticks"},d={valType:"color",dflt:k.lightLine,editType:"ticks"};function m(S){var _={valType:"number",min:0,editType:"ticks"};return S||(_.dflt=1),_}var w=T({},l,{editType:"ticks"}),u={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"calc"},rangebreaks:x("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:i(),tick0:c,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:b,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:v(),tickwidth:g(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:p("tick label")},tickformatstops:x("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:p("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:u,gridcolor:d,gridwidth:m(),griddash:w,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:i("minor"),tick0:c,dtick:h,tickvals:f,ticks:b,ticklen:v("minor"),tickwidth:g("minor"),tickcolor:y,gridcolor:d,gridwidth:m("minor"),griddash:w,showgrid:u,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},86763:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(23469).isUnifiedHover,T=t(98212),x=t(44467),p=t(10820),s=t(13838),e=t(951),o=t(71453),r=t(99082),n=t(52830),a=t(41675),i=a.id2name,c=a.name2id,h=t(85555).AX_ID_PATTERN,f=t(73972),b=f.traceIs,v=f.getComponentMethod;function g(y,d,m){Array.isArray(y[d])?y[d].push(m):y[d]=[m]}$.exports=function(y,d,m){var w,u,S=d.autotypenumbers,_={},E={},L={},C={},P={},z={},j={},R={},V={},D={};for(w=0;w<m.length;w++){var B=m[w];if(b(B,"cartesian")||b(B,"gl2d")){var N,U;if(B.xaxis)N=i(B.xaxis),g(_,N,B);else if(B.xaxes)for(u=0;u<B.xaxes.length;u++)g(_,i(B.xaxes[u]),B);if(B.yaxis)U=i(B.yaxis),g(_,U,B);else if(B.yaxes)for(u=0;u<B.yaxes.length;u++)g(_,i(B.yaxes[u]),B);"funnel"===B.type?"h"===B.orientation?(N&&(E[N]=!0),U&&(j[U]=!0)):U&&(L[U]=!0):"image"===B.type?(U&&(R[U]=!0),N&&(R[N]=!0)):(U&&(P[U]=!0,z[U]=!0),b(B,"carpet")&&("carpet"!==B.type||B._cheater)||N&&(C[N]=!0)),"carpet"===B.type&&B._cheater&&N&&(E[N]=!0),b(B,"2dMap")&&(V[N]=!0,V[U]=!0),b(B,"oriented")&&(D["h"===B.orientation?U:N]=!0)}}var J=d._subplots,Y=J.xaxis,q=J.yaxis,H=M.simpleMap(Y,i),X=M.simpleMap(q,i),Q=H.concat(X),ne=k.background;Y.length&&q.length&&(ne=M.coerce(y,d,p,"plot_bgcolor"));var re,ae,se,pe,ke,me=k.combine(ne,d.paper_bgcolor);function le(){ke._traceIndices=(_[re]||[]).map(function(St){return St._expandedIndex}),ke._annIndices=[],ke._shapeIndices=[],ke._selectionIndices=[],ke._imgIndices=[],ke._subplotsWith=[],ke._counterAxes=[],ke._name=ke._attr=re,ke._id=ae}function ue(Pt,St){return M.coerce(pe,ke,s,Pt,St)}function Ee(Pt,St){return M.coerce2(pe,ke,s,Pt,St)}function de(Pt){return"x"===Pt?q:Y}function xe(Pt,St){for(var Ot="x"===Pt?H:X,jt=[],Dt=0;Dt<Ot.length;Dt++){var Ye=Ot[Dt];Ye===St||(y[Ye]||{}).overlaying||jt.push(c(Ye))}return jt}var Te={x:de("x"),y:de("y")},we=Te.x.concat(Te.y),K={},oe=[];function he(){var Pt=pe.matches;h.test(Pt)&&-1===we.indexOf(Pt)&&(K[Pt]=pe.type,oe=Object.keys(K))}var ye=T(y,d),Me=l(ye);for(w=0;w<Q.length;w++){ae=c(re=Q[w]),se=re.charAt(0),M.isPlainObject(y[re])||(y[re]={}),pe=y[re],ke=x.newContainer(d,re,se+"axis"),le();var De={hasMinor:!0,letter:se,font:d.font,outerTicks:V[re],showGrid:!D[re],data:_[re]||[],bgColor:me,calendar:d.calendar,automargin:!0,visibleDflt:"x"===se&&!C[re]&&E[re]||"y"===se&&!P[re]&&L[re],reverseDflt:"y"===se&&(!z[re]&&j[re]||R[re]),autotypenumbersDflt:S,splomStash:((d._splomAxes||{})[se]||{})[ae]};ue("uirevision",d.uirevision),e(pe,ke,ue,De),o(pe,ke,ue,De,d);var fe=Me&&se===ye.charAt(0),ge=Ee("spikecolor",Me?ke.color:void 0),be=Ee("spikethickness",Me?1.5:void 0),Ie=Ee("spikedash",Me?"dot":void 0),He=Ee("spikemode",Me?"across":void 0),Ve=Ee("spikesnap");ue("showspikes",!!(fe||ge||be||Ie||He||Ve))||(delete ke.spikecolor,delete ke.spikethickness,delete ke.spikedash,delete ke.spikemode,delete ke.spikesnap);var tt=i(pe.overlaying),nt=[0,1];if(void 0!==d[tt]){var st=i(d[tt].anchor);void 0!==d[st]&&(nt=d[st].domain)}n(pe,ke,ue,{letter:se,counterAxes:Te[se],overlayableAxes:xe(se,re),grid:d.grid,overlayingDomain:nt}),ue("title.standoff"),he(),ke._input=pe}for(w=0;w<oe.length;){ae=oe[w++],se=(re=i(ae)).charAt(0),M.isPlainObject(y[re])||(y[re]={}),pe=y[re],ke=x.newContainer(d,re,se+"axis"),le();var dt={letter:se,font:d.font,outerTicks:V[re],showGrid:!D[re],data:[],bgColor:me,calendar:d.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((d._splomAxes||{})[se]||{})[ae]};ue("uirevision",d.uirevision),ke.type=K[ae]||"linear",o(pe,ke,ue,dt,d),n(pe,ke,ue,{letter:se,counterAxes:Te[se],overlayableAxes:xe(se,re),grid:d.grid}),ue("fixedrange"),he(),ke._input=pe}var wt=v("rangeslider","handleDefaults"),_t=v("rangeselector","handleDefaults");for(w=0;w<H.length;w++)pe=y[re=H[w]],ke=d[re],wt(y,d,re),"date"===ke.type&&_t(pe,ke,d,X,ke.calendar),ue("fixedrange");for(w=0;w<X.length;w++){pe=y[re=X[w]];var pt=d[i((ke=d[re]).anchor)];ue("fixedrange",v("rangeslider","isVisible")(pt))}r.handleDefaults(y,d,{axIds:we.concat(oe).sort(a.idSort),axHasImage:R})}},92128:function($,I,t){"use strict";var M=t(84267).mix,k=t(22399),l=t(71828);$.exports=function(T,x,p,s){var e=(s=s||{}).dfltColor;function o(y,d){return l.coerce2(T,x,s.attributes,y,d)}var r=o("linecolor",e),n=o("linewidth");p("showline",s.showLine||!!r||!!n)||(delete x.linecolor,delete x.linewidth);var a=o("gridcolor",M(e,s.bgColor,s.blend||k.lightFraction).toRgbString()),i=o("gridwidth"),c=o("griddash");if(p("showgrid",s.showGrid||!!a||!!i||!!c)||(delete x.gridcolor,delete x.gridwidth,delete x.griddash),s.hasMinor){var h=o("minor.gridcolor",M(x.gridcolor,s.bgColor,67).toRgbString()),f=o("minor.gridwidth",x.gridwidth||1),b=o("minor.griddash",x.griddash||"solid");p("minor.showgrid",!!h||!!f||!!b)||(delete x.minor.gridcolor,delete x.minor.gridwidth,delete x.minor.griddash)}if(!s.noZeroLine){var v=o("zerolinecolor",e),g=o("zerolinewidth");p("zeroline",s.showGrid||!!v||!!g)||(delete x.zerolinecolor,delete x.zerolinewidth)}}},52830:function($,I,t){"use strict";var M=t(92770),k=t(71828);$.exports=function(l,T,x,p){var s,e,o,r,n,a,i=p.counterAxes||[],c=p.overlayableAxes||[],h=p.letter,f=p.grid,b=p.overlayingDomain;f&&(s=f._anchors[T._id],(e=f._domains[h][f._axisMap[T._id]])&&(o=f[h+"side"].split(" ")[0],r=f.domain[h]["right"===o||"top"===o?1:0])),e=e||[0,1],s=s||(M(l.position)?"free":i[0]||"free"),o=o||("x"===h?"bottom":"left"),r=r||0,n=0,a=!1;var v=k.coerce(l,T,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:s}},"anchor"),g=k.coerce(l,T,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:o}},"side");"free"===v&&("y"===h&&(x("autoshift")&&(r="left"===g?b[0]:b[1],a=!T.automargin||T.automargin,n="left"===g?-3:3),x("shift",n)),x("position",r)),x("automargin",a);var y=!1;if(c.length&&(y=k.coerce(l,T,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!y){var d=x("domain",e);d[0]>d[1]-.000244140625&&(T.domain=e),k.noneOrAll(l.domain,T.domain,e),"sync"===T.tickmode&&(T.tickmode="auto")}return x("layer"),T}},89426:function($,I,t){"use strict";var M=t(59652);$.exports=function(k,l,T,x,p){p||(p={});var s=p.tickSuffixDflt,e=M(k);T("tickprefix")&&T("showtickprefix",e),T("ticksuffix",s)&&T("showticksuffix",e)}},42449:function($,I,t){"use strict";var M=t(18783).FROM_BL;$.exports=function(k,l,T){void 0===T&&(T=M[k.constraintoward||"center"]);var x=[k.r2l(k.range[0]),k.r2l(k.range[1])],p=x[0]+(x[1]-x[0])*T;k.range=k._input.range=[k.l2r(p+(x[0]-p)*l),k.l2r(p+(x[1]-p)*l)],k.setScale()}},21994:function($,I,t){"use strict";var M=t(39898),k=t(84096).g0,l=t(71828),T=l.numberFormat,x=t(92770),p=l.cleanNumber,s=l.ms2DateTime,e=l.dateTime2ms,o=l.ensureNumber,r=l.isArrayOrTypedArray,n=t(50606),a=n.FP_SAFE,i=n.BADNUM,c=n.LOG_CLIP,h=n.ONEWEEK,f=n.ONEDAY,b=n.ONEHOUR,v=n.ONEMIN,g=n.ONESEC,y=t(41675),d=t(85555),m=d.HOUR_PATTERN,w=d.WEEKDAY_PATTERN;function u(_){return Math.pow(10,_)}function S(_){return null!=_}$.exports=function(_,E){E=E||{};var L=_._id||"x",C=L.charAt(0);function P(Q,ne){if(Q>0)return Math.log(Q)/Math.LN10;if(Q<=0&&ne&&_.range&&2===_.range.length){var re=_.range[0],ae=_.range[1];return.5*(re+ae-2*c*Math.abs(re-ae))}return i}function z(Q,ne,re,ae){if((ae||{}).msUTC&&x(Q))return+Q;var se=e(Q,re||_.calendar);if(se===i){if(!x(Q))return i;Q=+Q;var pe=Math.floor(10*l.mod(Q+.05,1)),ke=Math.round(Q-pe/10);se=e(new Date(ke))+pe/10}return se}function j(Q,ne,re){return s(Q,ne,re||_.calendar)}function R(Q){return _._categories[Math.round(Q)]}function V(Q){if(S(Q)){if(void 0===_._categoriesMap&&(_._categoriesMap={}),void 0!==_._categoriesMap[Q])return _._categoriesMap[Q];_._categories.push("number"==typeof Q?String(Q):Q);var ne=_._categories.length-1;return _._categoriesMap[Q]=ne,ne}return i}function D(Q){if(_._categoriesMap)return _._categoriesMap[Q]}function B(Q){var ne=D(Q);return void 0!==ne?ne:x(Q)?+Q:void 0}function N(Q){return x(Q)?+Q:D(Q)}function U(Q,ne,re){return M.round(re+ne*Q,2)}function J(Q,ne,re){return(Q-re)/ne}var Y=function(Q){return x(Q)?U(Q,_._m,_._b):i},q=function(Q){return J(Q,_._m,_._b)};if(_.rangebreaks){var H="y"===C;Y=function(Q){if(!x(Q))return i;var ne=_._rangebreaks.length;if(!ne)return U(Q,_._m,_._b);var re=H;_.range[0]>_.range[1]&&(re=!re);for(var ae=re?-1:1,se=ae*Q,pe=0,ke=0;ke<ne;ke++){var me=ae*_._rangebreaks[ke].min,le=ae*_._rangebreaks[ke].max;if(se<me)break;if(!(se>le)){pe=se<(me+le)/2?ke:ke+1;break}pe=ke+1}var ue=_._B[pe]||0;return isFinite(ue)?U(Q,_._m2,ue):0},q=function(Q){var ne=_._rangebreaks.length;if(!ne)return J(Q,_._m,_._b);for(var re=0,ae=0;ae<ne&&!(Q<_._rangebreaks[ae].pmin);ae++)Q>_._rangebreaks[ae].pmax&&(re=ae+1);return J(Q,_._m2,_._B[re])}}_.c2l="log"===_.type?P:o,_.l2c="log"===_.type?u:o,_.l2p=Y,_.p2l=q,_.c2p="log"===_.type?function(Q,ne){return Y(P(Q,ne))}:Y,_.p2c="log"===_.type?function(Q){return u(q(Q))}:q,-1!==["linear","-"].indexOf(_.type)?(_.d2r=_.r2d=_.d2c=_.r2c=_.d2l=_.r2l=p,_.c2d=_.c2r=_.l2d=_.l2r=o,_.d2p=_.r2p=function(Q){return _.l2p(p(Q))},_.p2d=_.p2r=q,_.cleanPos=o):"log"===_.type?(_.d2r=_.d2l=function(Q,ne){return P(p(Q),ne)},_.r2d=_.r2c=function(Q){return u(p(Q))},_.d2c=_.r2l=p,_.c2d=_.l2r=o,_.c2r=P,_.l2d=u,_.d2p=function(Q,ne){return _.l2p(_.d2r(Q,ne))},_.p2d=function(Q){return u(q(Q))},_.r2p=function(Q){return _.l2p(p(Q))},_.p2r=q,_.cleanPos=o):"date"===_.type?(_.d2r=_.r2d=l.identity,_.d2c=_.r2c=_.d2l=_.r2l=z,_.c2d=_.c2r=_.l2d=_.l2r=j,_.d2p=_.r2p=function(Q,ne,re){return _.l2p(z(Q,0,re))},_.p2d=_.p2r=function(Q,ne,re){return j(q(Q),ne,re)},_.cleanPos=function(Q){return l.cleanDate(Q,i,_.calendar)}):"category"===_.type?(_.d2c=_.d2l=V,_.r2d=_.c2d=_.l2d=R,_.d2r=_.d2l_noadd=B,_.r2c=function(Q){var ne=N(Q);return void 0!==ne?ne:_.fraction2r(.5)},_.l2r=_.c2r=o,_.r2l=N,_.d2p=function(Q){return _.l2p(_.r2c(Q))},_.p2d=function(Q){return R(q(Q))},_.r2p=_.d2p,_.p2r=q,_.cleanPos=function(Q){return"string"==typeof Q&&""!==Q?Q:o(Q)}):"multicategory"===_.type&&(_.r2d=_.c2d=_.l2d=R,_.d2r=_.d2l_noadd=B,_.r2c=function(Q){var ne=B(Q);return void 0!==ne?ne:_.fraction2r(.5)},_.r2c_just_indices=D,_.l2r=_.c2r=o,_.r2l=B,_.d2p=function(Q){return _.l2p(_.r2c(Q))},_.p2d=function(Q){return R(q(Q))},_.r2p=_.d2p,_.p2r=q,_.cleanPos=function(Q){return Array.isArray(Q)||"string"==typeof Q&&""!==Q?Q:o(Q)},_.setupMultiCategory=function(Q){var ne,re,ae=_._traceIndices,se=_._matchGroup;if(se&&0===_._categories.length)for(var pe in se)if(pe!==L){var ke=E[y.id2name(pe)];ae=ae.concat(ke._traceIndices)}var me=[[0,{}],[0,{}]],le=[];for(ne=0;ne<ae.length;ne++){var ue=Q[ae[ne]];if(C in ue){var Ee=ue[C],de=ue._length||l.minRowLength(Ee);if(r(Ee[0])&&r(Ee[1]))for(re=0;re<de;re++){var xe=Ee[0][re],Te=Ee[1][re];S(xe)&&S(Te)&&(le.push([xe,Te]),xe in me[0][1]||(me[0][1][xe]=me[0][0]++),Te in me[1][1]||(me[1][1][Te]=me[1][0]++))}}}for(le.sort(function(we,K){var oe=me[0][1],he=oe[we[0]]-oe[K[0]];if(he)return he;var ye=me[1][1];return ye[we[1]]-ye[K[1]]}),ne=0;ne<le.length;ne++)V(le[ne])}),_.fraction2r=function(Q){var ne=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return _.l2r(ne+Q*(re-ne))},_.r2fraction=function(Q){var ne=_.r2l(_.range[0]),re=_.r2l(_.range[1]);return(_.r2l(Q)-ne)/(re-ne)},_.cleanRange=function(Q,ne){ne||(ne={}),Q||(Q="range");var re,ae,se=l.nestedProperty(_,Q).get();if(ae=(ae="date"===_.type?l.dfltRange(_.calendar):"y"===C?d.DFLTRANGEY:"realaxis"===_._name?[0,1]:ne.dfltRange||d.DFLTRANGEX).slice(),"tozero"!==_.rangemode&&"nonnegative"!==_.rangemode||(ae[0]=0),se&&2===se.length)for("date"!==_.type||_.autorange||(se[0]=l.cleanDate(se[0],i,_.calendar),se[1]=l.cleanDate(se[1],i,_.calendar)),re=0;re<2;re++)if("date"===_.type){if(!l.isDateTime(se[re],_.calendar)){_[Q]=ae;break}if(_.r2l(se[0])===_.r2l(se[1])){var pe=l.constrain(_.r2l(se[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);se[0]=_.l2r(pe-1e3),se[1]=_.l2r(pe+1e3);break}}else{if(!x(se[re])){if(!x(se[1-re])){_[Q]=ae;break}se[re]=se[1-re]*(re?10:.1)}if(se[re]<-a?se[re]=-a:se[re]>a&&(se[re]=a),se[0]===se[1]){var ke=Math.max(1,Math.abs(1e-6*se[0]));se[0]-=ke,se[1]+=ke}}else l.nestedProperty(_,Q).set(ae)},_.setScale=function(Q){var ne=E._size;if(_.overlaying){var re=y.getFromId({_fullLayout:E},_.overlaying);_.domain=re.domain}var ae=Q&&_._r?"_r":"range",se=_.calendar;_.cleanRange(ae);var pe,ke,me=_.r2l(_[ae][0],se),le=_.r2l(_[ae][1],se),ue="y"===C;if(ue?(_._offset=ne.t+(1-_.domain[1])*ne.h,_._length=ne.h*(_.domain[1]-_.domain[0]),_._m=_._length/(me-le),_._b=-_._m*le):(_._offset=ne.l+_.domain[0]*ne.w,_._length=ne.w*(_.domain[1]-_.domain[0]),_._m=_._length/(le-me),_._b=-_._m*me),_._rangebreaks=[],_._lBreaks=0,_._m2=0,_._B=[],_.rangebreaks&&(_._rangebreaks=_.locateBreaks(Math.min(me,le),Math.max(me,le)),_._rangebreaks.length)){for(pe=0;pe<_._rangebreaks.length;pe++)ke=_._rangebreaks[pe],_._lBreaks+=Math.abs(ke.max-ke.min);var Ee=ue;me>le&&(Ee=!Ee),Ee&&_._rangebreaks.reverse();var de=Ee?-1:1;for(_._m2=de*_._length/(Math.abs(le-me)-_._lBreaks),_._B.push(-_._m2*(ue?le:me)),pe=0;pe<_._rangebreaks.length;pe++)_._B.push(_._B[_._B.length-1]-de*_._m2*((ke=_._rangebreaks[pe]).max-ke.min));for(pe=0;pe<_._rangebreaks.length;pe++)(ke=_._rangebreaks[pe]).pmin=Y(ke.min),ke.pmax=Y(ke.max)}if(!isFinite(_._m)||!isFinite(_._b)||_._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},_.maskBreaks=function(Q){var ne,re,ae,se,pe,ke=_.rangebreaks||[];ke._cachedPatterns||(ke._cachedPatterns=ke.map(function(xe){return xe.enabled&&xe.bounds?l.simpleMap(xe.bounds,xe.pattern?p:_.d2c):null})),ke._cachedValues||(ke._cachedValues=ke.map(function(xe){return xe.enabled&&xe.values?l.simpleMap(xe.values,_.d2c).sort(l.sorterAsc):null}));for(var me=0;me<ke.length;me++){var le=ke[me];if(le.enabled)if(le.bounds){switch(re=(ne=ke._cachedPatterns[me])[0],ae=ne[1],le.pattern){case w:se=(pe=new Date(Q)).getUTCDay(),re>ae&&(ae+=7,se<re&&(se+=7));break;case m:se=(pe=new Date(Q)).getUTCHours()+(pe.getUTCMinutes()/60+pe.getUTCSeconds()/3600+pe.getUTCMilliseconds()/36e5),re>ae&&(ae+=24,se<re&&(se+=24));break;case"":se=Q}if(se>=re&&se<ae)return i}else for(var Ee=ke._cachedValues[me],de=0;de<Ee.length;de++)if(ae=(re=Ee[de])+le.dvalue,Q>=re&&Q<ae)return i}return Q},_.locateBreaks=function(Q,ne){var re,ae,se,pe,ke=[];if(!_.rangebreaks)return ke;var me=_.rangebreaks.slice().sort(function(ye,Me){return ye.pattern===w&&Me.pattern===m?-1:Me.pattern===w&&ye.pattern===m?1:0}),le=function(ye,Me){if((ye=l.constrain(ye,Q,ne))!==(Me=l.constrain(Me,Q,ne))){for(var Re=!0,Pe=0;Pe<ke.length;Pe++){var De=ke[Pe];ye<De.max&&Me>=De.min&&(ye<De.min&&(De.min=ye),Me>De.max&&(De.max=Me),Re=!1)}Re&&ke.push({min:ye,max:Me})}};for(re=0;re<me.length;re++){var ue=me[re];if(ue.enabled)if(ue.bounds){var Ee=Q,de=ne;ue.pattern&&(Ee=Math.floor(Ee)),se=(ae=l.simpleMap(ue.bounds,ue.pattern?p:_.r2l))[0],pe=ae[1];var xe,Te,we=new Date(Ee);switch(ue.pattern){case w:Te=h,xe=(pe-se+(pe<se?7:0))*f,Ee+=se*f-(we.getUTCDay()*f+we.getUTCHours()*b+we.getUTCMinutes()*v+we.getUTCSeconds()*g+we.getUTCMilliseconds());break;case m:Te=f,xe=(pe-se+(pe<se?24:0))*b,Ee+=se*b-(we.getUTCHours()*b+we.getUTCMinutes()*v+we.getUTCSeconds()*g+we.getUTCMilliseconds());break;default:Ee=Math.min(ae[0],ae[1]),xe=Te=(de=Math.max(ae[0],ae[1]))-Ee}for(var K=Ee;K<de;K+=Te)le(K,K+xe)}else for(var oe=l.simpleMap(ue.values,_.d2c),he=0;he<oe.length;he++)le(se=oe[he],pe=se+ue.dvalue)}return ke.sort(function(ye,Me){return ye.min-Me.min}),ke},_.makeCalcdata=function(Q,ne,re){var ae,se,pe,ke,me=_.type,le="date"===me&&Q[ne+"calendar"];if(ne in Q){if(ae=Q[ne],ke=Q._length||l.minRowLength(ae),l.isTypedArray(ae)&&("linear"===me||"log"===me)){if(ke===ae.length)return ae;if(ae.subarray)return ae.subarray(0,ke)}if("multicategory"===me)return function(de,xe){for(var Te=new Array(xe),we=0;we<xe;we++)Te[we]=D([(de[0]||[])[we],(de[1]||[])[we]]);return Te}(ae,ke);for(se=new Array(ke),pe=0;pe<ke;pe++)se[pe]=_.d2c(ae[pe],0,le,re)}else{var ue=ne+"0"in Q?_.d2c(Q[ne+"0"],0,le):0,Ee=Q["d"+ne]?Number(Q["d"+ne]):1;for(ae=Q[{x:"y",y:"x"}[ne]],ke=Q._length||ae.length,se=new Array(ke),pe=0;pe<ke;pe++)se[pe]=ue+pe*Ee}if(_.rangebreaks)for(pe=0;pe<ke;pe++)se[pe]=_.maskBreaks(se[pe]);return se},_.isValidRange=function(Q){return Array.isArray(Q)&&2===Q.length&&x(_.r2l(Q[0]))&&x(_.r2l(Q[1]))},_.isPtWithinRange=function(Q,ne){var re=_.c2l(Q[C],null,ne),ae=_.r2l(_.range[0]),se=_.r2l(_.range[1]);return ae<se?ae<=re&&re<=se:se<=re&&re<=ae},_._emptyCategories=function(){_._categories=[],_._categoriesMap={}},_.clearCalc=function(){var Q=_._matchGroup;if(Q){var ne=null,re=null;for(var ae in Q){var se=E[y.id2name(ae)];if(se._categories){ne=se._categories,re=se._categoriesMap;break}}ne&&re?(_._categories=ne,_._categoriesMap=re):_._emptyCategories()}else _._emptyCategories();if(_._initialCategories)for(var pe=0;pe<_._initialCategories.length;pe++)V(_._initialCategories[pe])},_.sortByInitialCategories=function(){var Q=[];if(_._emptyCategories(),_._initialCategories)for(var ne=0;ne<_._initialCategories.length;ne++)V(_._initialCategories[ne]);Q=Q.concat(_._traceIndices);var re=_._matchGroup;for(var ae in re)if(L!==ae){var se=E[y.id2name(ae)];se._categories=_._categories,se._categoriesMap=_._categoriesMap,Q=Q.concat(se._traceIndices)}return Q};var X=E._d3locale;"date"===_.type&&(_._dateFormat=X?X.timeFormat:k,_._extraFormat=E._extraFormat),_._separators=E.separators,_._numFormat=X?X.numberFormat:T,delete _._minDtick,delete _._forceTick0}},59652:function($){"use strict";$.exports=function(I){var t=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return void 0!==I[M]});if(t.every(function(M){return I[M]===I[t[0]]})||1===t.length)return I[t[0]]}},96115:function($,I,t){"use strict";var M=t(71828),k=t(7901).contrast,l=t(13838),T=t(59652),x=t(85501);function p(s,e){function o(r,n){return M.coerce(s,e,l.tickformatstops,r,n)}o("enabled")&&(o("dtickrange"),o("value"))}$.exports=function(s,e,o,r,n){n||(n={});var a=o("labelalias");M.isPlainObject(a)||delete e.labelalias;var i=T(s);if(o("showticklabels")){var c=n.font||{},h=e.color,f=-1!==(e.ticklabelposition||"").indexOf("inside")?k(n.bgColor):h&&h!==l.color.dflt?h:c.color;if(M.coerceFont(o,"tickfont",{family:c.family,size:c.size,color:f}),n.noTicklabelstep||"multicategory"===r||"log"===r||o("ticklabelstep"),n.noAng||o("tickangle"),"category"!==r){var b=o("tickformat");x(s,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),e.tickformatstops.length||delete e.tickformatstops,n.noExp||b||"date"===r||(o("showexponent",i),o("exponentformat"),o("minexponent"),o("separatethousands"))}}}},38701:function($,I,t){"use strict";var M=t(71828),k=t(13838);$.exports=function(l,T,x,p){var s=p.isMinor,e=s?l.minor||{}:l,o=s?T.minor:T,r=s?k.minor:k,n=s?"minor.":"",a=M.coerce2(e,o,r,"ticklen",s?.6*(T.ticklen||5):void 0),i=M.coerce2(e,o,r,"tickwidth",s?T.tickwidth||1:void 0),c=M.coerce2(e,o,r,"tickcolor",(s?T.tickcolor:void 0)||o.color);x(n+"ticks",!s&&p.outerTicks||a||i||c?"outside":"")||(delete o.ticklen,delete o.tickwidth,delete o.tickcolor)}},26218:function($,I,t){"use strict";var M=t(66287),k=t(71828).isArrayOrTypedArray;$.exports=function(l,T,x,p,s){s||(s={});var e=s.isMinor,o=e?l.minor||{}:l,r=e?T.minor:T,n=e?"minor.":"";function a(v){var g=o[v];return void 0!==g?g:(r._template||{})[v]}var i=a("tick0"),c=a("dtick"),h=a("tickvals"),f=x(n+"tickmode",k(h)?"array":c?"linear":"auto");if("auto"===f||"sync"===f)x(n+"nticks");else if("linear"===f){var b=r.dtick=M.dtick(c,p);r.tick0=M.tick0(i,p,T.calendar,b)}else"multicategory"!==p&&(void 0===x(n+"tickvals")?r.tickmode="auto":e||x("ticktext"))}},66847:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(71828),T=t(91424),x=t(89298);$.exports=function(p,s,e,o){var r=p._fullLayout;if(0!==s.length){var n,a,i,c;o&&(n=o());var h=M.ease(e.easing);return p._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var v={},g=0;g<s.length;g++){var y=s[g],m=y.plotinfo.yaxis;y.xr0&&(v[y.plotinfo.xaxis._name+".range"]=y.xr0.slice()),y.yr0&&(v[m._name+".range"]=y.yr0.slice())}return k.call("relayout",p,v).then(function(){for(var w=0;w<s.length;w++)f(s[w].plotinfo)})}()}),a=Date.now(),c=window.requestAnimationFrame(function v(){i=Date.now();for(var g=Math.min(1,(i-a)/e.duration),y=h(g),d=0;d<s.length;d++)b(s[d],y);i-a>e.duration?(function(){for(var m={},w=0;w<s.length;w++){var u=s[w],_=u.plotinfo.yaxis;u.xr1&&(m[u.plotinfo.xaxis._name+".range"]=u.xr1.slice()),u.yr1&&(m[_._name+".range"]=u.yr1.slice())}n&&n(),k.call("relayout",p,m).then(function(){for(var E=0;E<s.length;E++)f(s[E].plotinfo)})}(),c=window.cancelAnimationFrame(v)):c=window.requestAnimationFrame(v)}),Promise.resolve()}function f(v){var g=v.xaxis,y=v.yaxis;r._defs.select("#"+v.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),v.plot.call(T.setTranslate,g._offset,y._offset).call(T.setScale,1,1);var d=v.plot.selectAll(".scatterlayer .trace");d.selectAll(".point").call(T.setPointGroupScale,1,1),d.selectAll(".textpoint").call(T.setTextPointsScale,1,1),d.call(T.hideOutsideRangePoints,v)}function b(v,g){var y=v.plotinfo,d=y.xaxis,m=y.yaxis,w=d._length,u=m._length,S=!!v.xr1,_=!!v.yr1,E=[];if(S){var L=l.simpleMap(v.xr0,d.r2l),C=l.simpleMap(v.xr1,d.r2l),P=L[1]-L[0],z=C[1]-C[0];E[0]=(L[0]*(1-g)+g*C[0]-L[0])/(L[1]-L[0])*w,E[2]=w*(1-g+g*z/P),d.range[0]=d.l2r(L[0]*(1-g)+g*C[0]),d.range[1]=d.l2r(L[1]*(1-g)+g*C[1])}else E[0]=0,E[2]=w;if(_){var j=l.simpleMap(v.yr0,m.r2l),R=l.simpleMap(v.yr1,m.r2l),V=j[1]-j[0],D=R[1]-R[0];E[1]=(j[1]*(1-g)+g*R[1]-j[1])/(j[0]-j[1])*u,E[3]=u*(1-g+g*D/V),m.range[0]=d.l2r(j[0]*(1-g)+g*R[0]),m.range[1]=m.l2r(j[1]*(1-g)+g*R[1])}else E[1]=0,E[3]=u;x.drawOne(p,d,{skipTitle:!0}),x.drawOne(p,m,{skipTitle:!0}),x.redrawComponents(p,[d._id,m._id]);var B=S?w/E[2]:1,N=_?u/E[3]:1,H=d._offset-(S?E[0]/E[2]*w:0),X=m._offset-(_?E[1]/E[3]*u:0);y.clipRect.call(T.setTranslate,S?E[0]:0,_?E[1]:0).call(T.setScale,1/B,1/N),y.plot.call(T.setTranslate,H,X).call(T.setScale,B,N),T.setPointGroupScale(y.zoomScalePts,1/B,1/N),T.setTextPointsScale(y.zoomScaleTxt,1/B,1/N)}x.redrawComponents(p)}},951:function($,I,t){"use strict";var M=t(73972).traceIs,k=t(4322);function l(x){return{v:"x",h:"y"}[x.orientation||"v"]}function T(x,p){var s=l(x),e=M(x,"box-violin"),o=M(x._fullInput||{},"candlestick");return e&&!o&&p===s&&void 0===x[s]&&void 0===x[s+"0"]}$.exports=function(x,p,s,e){s("autotypenumbers",e.autotypenumbersDflt),"-"===s("type",(e.splomStash||{}).type)&&(function(o,r){if("-"===o.type){var n,a=o._id,i=a.charAt(0);-1!==a.indexOf("scene")&&(a=i);var c=function(m,w,u){for(var S=0;S<m.length;S++){var _=m[S];if("splom"===_.type&&_._length>0&&(_["_"+u+"axes"]||{})[w]||(_[u+"axis"]||u)===w&&(T(_,u)||(_[u]||[]).length||_[u+"0"]))return _}}(r,a,i);if(c)if("histogram"!==c.type||i!=={v:"y",h:"x"}[c.orientation||"v"]){var h=i+"calendar",f=c[h],b={noMultiCategory:!M(c,"cartesian")||M(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&i==={h:"x",v:"y"}[c.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=o.autotypenumbers,T(c,i)){var v=l(c),g=[];for(n=0;n<r.length;n++){var y=r[n];M(y,"box-violin")&&(y[i+"axis"]||i)===a&&(g.push(void 0!==y[v]?y[v][0]:void 0!==y.name?y.name:"text"),y[h]!==f&&(f=void 0))}o.type=k(g,f,b)}else if("splom"===c.type){var d=c.dimensions[c._axesDim[a]];d.visible&&(o.type=k(d.values,f,b))}else o.type=k(c[i]||[c[i+"0"]],f,b)}else o.type="linear"}}(p,e.data),"-"===p.type?p.type="linear":x.type=p.type)}},31137:function($,I,t){"use strict";var M=t(73972),k=t(71828);function l(s,e,o){var r,n,a,i=!1;if("data"===e.type)r=s._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;r=s._fullLayout}return n=k.nestedProperty(r,e.prop).get(),(a=o[e.type]=o[e.type]||{}).hasOwnProperty(e.prop)&&a[e.prop]!==n&&(i=!0),a[e.prop]=n,{changed:i,value:n}}function T(s,e){var o=[],r=e[0],n={};if("string"==typeof r)n[r]=e[1];else{if(!k.isPlainObject(r))return o;n=r}return p(n,function(a,i,c){o.push({type:"layout",prop:a,value:c})},"",0),o}function x(s,e){var o,r,n,a,i=[];if(n=e[1],o=e[2],a={},"string"==typeof(r=e[0]))a[r]=n;else{if(!k.isPlainObject(r))return i;a=r,void 0===o&&(o=n)}return void 0===o&&(o=null),p(a,function(c,h,f){var b,v;if(Array.isArray(f)){v=f.slice();var g=Math.min(v.length,s.data.length);o&&(g=Math.min(g,o.length)),b=[];for(var y=0;y<g;y++)b[y]=o?o[y]:y}else v=f,b=o?o.slice():null;if(null===b)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(b)){if(!Array.isArray(v)){var d=v;v=[];for(var m=0;m<b.length;m++)v[m]=d}v.length=Math.min(b.length,v.length)}i.push({type:"data",prop:c,traces:b,value:v})},"",0),i}function p(s,e,o,r){Object.keys(s).forEach(function(n){var a=s[n];if("_"!==n[0]){var i=o+(r>0?".":"")+n;k.isPlainObject(a)?p(a,e,i,r+1):e(i,n,a)}})}I.manageCommandObserver=function(s,e,o,r){var n={},a=!0;e&&e._commandObserver&&(n=e._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var i=I.hasSimpleAPICommandBindings(s,o,n.lookupTable);if(e&&e._commandObserver){if(i)return n;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,n}if(i){l(s,i,n.cache),n.check=function(){if(a){var f=l(s,i,n.cache);return f.changed&&r&&void 0!==n.lookupTable[f.value]&&(n.disable(),Promise.resolve(r({value:f.value,type:i.type,prop:i.prop,traces:i.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<c.length;h++)s._internalOn(c[h],n.check);n.remove=function(){for(var f=0;f<c.length;f++)s._removeInternalListener(c[f],n.check)}}else k.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},e&&(e._commandObserver=n),n},I.hasSimpleAPICommandBindings=function(s,e,o){var r,n,a=e.length;for(r=0;r<a;r++){var i,c=e[r],h=c.method,f=c.args;if(Array.isArray(f)||(f=[]),!h)return!1;var b=I.computeAPICommandBindings(s,h,f);if(1!==b.length)return!1;if(n){if((i=b[0]).type!==n.type||i.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(i.traces))return!1;i.traces.sort();for(var v=0;v<n.traces.length;v++)if(n.traces[v]!==i.traces[v])return!1}else if(i.prop!==n.prop)return!1}else n=b[0],Array.isArray(n.traces)&&n.traces.sort();var g=(i=b[0]).value;if(Array.isArray(g)){if(1!==g.length)return!1;g=g[0]}o&&(o[g]=r)}return n},I.executeAPICommand=function(s,e,o){if("skip"===e)return Promise.resolve();var r=M.apiMethodRegistry[e],n=[s];Array.isArray(o)||(o=[]);for(var a=0;a<o.length;a++)n.push(o[a]);return r.apply(null,n).catch(function(i){return k.warn("API call to Plotly."+e+" rejected.",i),Promise.reject(i)})},I.computeAPICommandBindings=function(s,e,o){var r,a;switch(Array.isArray(o)||(o=[]),e){case"restyle":r=x(s,o);break;case"relayout":r=T(0,o);break;case"update":r=x(s,[o[0],o[2]]).concat(T(0,[o[1]]));break;case"animate":a=o,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},27670:function($,I,t){"use strict";var M=t(1426).extendFlat;I.Y=function(k,l){l=l||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},x={x:M({},T,{}),y:M({},T,{}),editType:k.editType};return k.noGridCell||(x.row={valType:"integer",min:0,dflt:0,editType:k.editType},x.column={valType:"integer",min:0,dflt:0,editType:k.editType}),x},I.c=function(k,l,T,x){var p=x&&x.x||[0,1],s=x&&x.y||[0,1],e=l.grid;if(e){var o=T("domain.column");void 0!==o&&(o<e.columns?p=e._domains.x[o]:delete k.domain.column);var r=T("domain.row");void 0!==r&&(r<e.rows?s=e._domains.y[r]:delete k.domain.row)}var n=T("domain.x",p),a=T("domain.y",s);n[0]<n[1]||(k.domain.x=p.slice()),a[0]<a[1]||(k.domain.y=s.slice())}},41940:function($){"use strict";$.exports=function(I){var t=I.editType,M=I.colorEditType;void 0===M&&(M=t);var k={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:M},editType:t};return I.autoSize&&(k.size.dflt="auto"),I.autoColor&&(k.color.dflt="auto"),I.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0),k}},31391:function($){"use strict";$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function($,I){"use strict";I.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},I.axesNames=["lonaxis","lataxis"],I.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},I.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},I.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},I.clipPad=.001,I.precision=.1,I.landColor="#F0DC82",I.waterColor="#3399FF",I.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},I.sphereSVG={type:"Sphere"},I.fillLayers={ocean:1,land:1,lakes:1},I.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},I.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],I.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],I.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function($,I,t){"use strict";var M=t(39898),k=t(27362),l=k.geoPath,T=k.geoDistance,x=t(65704),p=t(73972),s=t(71828),e=s.strTranslate,o=t(7901),r=t(91424),n=t(30211),a=t(74875),i=t(89298),c=t(71739).getAutoRange,h=t(28569),f=t(47322).prepSelect,b=t(47322).clearOutline,v=t(47322).selectOnClick,g=t(74455),y=t(78776),d=t(41327),m=t(90973),w=t(96892).zL;function u(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=u.prototype;function _(E,L){var C=y.clipPad,P=E[0]+C,z=E[1]-C,j=L[0]+C,R=L[1]-C;P>0&&z<0&&(z+=360);var V=(z-P)/4;return{type:"Polygon",coordinates:[[[P,j],[P,R],[P+V,R],[P+2*V,R],[P+3*V,R],[z,R],[z,j],[z-V,j],[z-2*V,j],[z-3*V,j],[P,j]]]}}$.exports=function(E){return new u(E)},S.plot=function(E,L,C,P){var z=this;if(P)return z.update(E,L,!0);z._geoCalcData=E,z._fullLayout=L;var j=L[this.id],R=[],V=!1;for(var D in y.layerNameToAdjective)if("frame"!==D&&j["show"+D]){V=!0;break}for(var B=!1,N=0;N<E.length;N++){var U=E[0][0].trace;U._geo=z,U.locationmode&&(V=!0);var J=U.marker;if(J){var q=J.angleref;(J.angle||"north"===q||"previous"===q)&&(B=!0)}}if(this._hasMarkerAngles=B,V){var H=m.getTopojsonName(j);null!==z.topojson&&H===z.topojsonName||(z.topojsonName=H,void 0===PlotlyGeoAssets.topojson[z.topojsonName]&&R.push(z.fetchTopojson()))}R=R.concat(d.fetchTraceGeoData(E)),C.push(new Promise(function(X,Q){Promise.all(R).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,L),X()}).catch(Q)}))},S.fetchTopojson=function(){var E=this,L=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,P){M.json(L,function(z,j){if(z)return P(404===z.status?new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=j,C()})})},S.update=function(E,L,C){var P=L[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var j=E[z],R=j[0].trace;"choropleth"===R.type&&(this.hasChoropleth=!0),!0===R.visible&&R._length>0&&R._module.calcGeoJSON(j,L)}if(!C){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(L,P),this.updateDims(L,P),this.updateFx(L,P),a.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var V=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=V.selectAll(".point"),this.dataPoints.text=V.selectAll("text"),this.dataPaths.line=V.selectAll(".js-line");var D=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=D.selectAll("path"),this._render()},S.updateProjection=function(E,L){var C=this.graphDiv,P=L[this.id],z=L._size,j=P.domain,R=P.projection,V=P.lonaxis,D=P.lataxis,B=V._ax,N=D._ax,U=this.projection=function(we){var K=we.projection,oe=K.type,he=y.projNames[oe];he="geo"+s.titleCase(he);for(var ye=(k[he]||x[he])(),Me=we._isSatellite?180*Math.acos(1/K.distance)/Math.PI:we._isClipped?y.lonaxisSpan[oe]/2:null,Re=["center","rotate","parallels","clipExtent"],Pe=function(ge){return ge?ye:[]},De=0;De<Re.length;De++){var fe=Re[De];"function"!=typeof ye[fe]&&(ye[fe]=Pe)}return ye.isLonLatOverEdges=function(ge){if(null===ye(ge))return!0;if(Me){var be=ye.rotate();return T(ge,[-be[0],-be[1]])>Me*Math.PI/180}return!1},ye.getPath=function(){return l().projection(ye)},ye.getBounds=function(ge){return ye.getPath().bounds(ge)},ye.precision(y.precision),we._isSatellite&&ye.tilt(K.tilt).distance(K.distance),Me&&ye.clipAngle(Me-y.clipPad),ye}(P),J=[[z.l+z.w*j.x[0],z.t+z.h*(1-j.y[1])],[z.l+z.w*j.x[1],z.t+z.h*(1-j.y[0])]],Y=P.center||{},q=R.rotation||{},H=V.range||[],X=D.range||[];if(P.fitbounds){B._length=J[1][0]-J[0][0],N._length=J[1][1]-J[0][1],B.range=c(C,B),N.range=c(C,N);var Q=(B.range[0]+B.range[1])/2,ne=(N.range[0]+N.range[1])/2;if(P._isScoped)Y={lon:Q,lat:ne};else if(P._isClipped){Y={lon:Q,lat:ne},q={lon:Q,lat:ne,roll:q.roll};var re=R.type,ae=y.lonaxisSpan[re]/2||180,se=y.lataxisSpan[re]/2||90;H=[Q-ae,Q+ae],X=[ne-se,ne+se]}else Y={lon:Q,lat:ne},q={lon:Q,lat:q.lat,roll:q.roll}}U.center([Y.lon-q.lon,Y.lat-q.lat]).rotate([-q.lon,-q.lat,q.roll]).parallels(R.parallels);var pe=_(H,X);U.fitExtent(J,pe);var ke=this.bounds=U.getBounds(pe),me=this.fitScale=U.scale(),le=U.translate();if(P.fitbounds){var ue=U.getBounds(_(B.range,N.range)),Ee=Math.min((ke[1][0]-ke[0][0])/(ue[1][0]-ue[0][0]),(ke[1][1]-ke[0][1])/(ue[1][1]-ue[0][1]));isFinite(Ee)?U.scale(Ee*me):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else U.scale(R.scale*me);var de=this.midPt=[(ke[0][0]+ke[1][0])/2,(ke[0][1]+ke[1][1])/2];if(U.translate([le[0]+(de[0]-le[0]),le[1]+(de[1]-le[1])]).clipExtent(ke),P._isAlbersUsa){var xe=U([Y.lon,Y.lat]),Te=U.translate();U.translate([Te[0]-(xe[0]-Te[0]),Te[1]-(xe[1]-Te[1])])}},S.updateBaseLayers=function(E,L){var C=this,P=C.topojson,z=C.layers,j=C.basePaths;function R(U){return"lonaxis"===U||"lataxis"===U}function V(U){return Boolean(y.lineLayers[U])}function D(U){return Boolean(y.fillLayers[U])}var B=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(U){return V(U)||D(U)?L["show"+U]:!R(U)||L[U].showgrid}),N=C.framework.selectAll(".layer").data(B,String);N.exit().each(function(U){delete z[U],delete j[U],M.select(this).remove()}),N.enter().append("g").attr("class",function(U){return"layer "+U}).each(function(U){var J=z[U]=M.select(this);"bg"===U?C.bgRect=J.append("rect").style("pointer-events","all"):R(U)?j[U]=J.append("path").style("fill","none"):"backplot"===U?J.append("g").classed("choroplethlayer",!0):"frontplot"===U?J.append("g").classed("scatterlayer",!0):V(U)?j[U]=J.append("path").style("fill","none").style("stroke-miterlimit",2):D(U)&&(j[U]=J.append("path").style("stroke","none"))}),N.order(),N.each(function(U){var J=j[U],Y=y.layerNameToAdjective[U];"frame"===U?J.datum(y.sphereSVG):V(U)||D(U)?J.datum(w(P,P.objects[U])):R(U)&&J.datum(function(q,H,X){var Q,ne,re,ae=H[q],se=y.scopeDefaults[H.scope];"lonaxis"===q?(Q=se.lonaxisRange,ne=se.lataxisRange,re=function(Te,we){return[Te,we]}):"lataxis"===q&&(Q=se.lataxisRange,ne=se.lonaxisRange,re=function(Te,we){return[we,Te]});var pe={type:"linear",range:[Q[0],Q[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};i.setConvert(pe,X);var ke=i.calcTicks(pe);H.isScoped||"lonaxis"!==q||ke.pop();for(var me=ke.length,le=new Array(me),ue=0;ue<me;ue++)for(var Ee=ke[ue].x,de=le[ue]=[],xe=ne[0];xe<ne[1]+2.5;xe+=2.5)de.push(re(Ee,xe));return{type:"MultiLineString",coordinates:le}}(U,L,E)).call(o.stroke,L[U].gridcolor).call(r.dashLine,L[U].griddash,L[U].gridwidth),V(U)?J.call(o.stroke,L[Y+"color"]).call(r.dashLine,"",L[Y+"width"]):D(U)&&J.call(o.fill,L[Y+"color"])})},S.updateDims=function(E,L){var C=this.bounds,P=(L.framewidth||0)/2,z=C[0][0]-P,j=C[0][1]-P,R=C[1][0]-z+P,V=C[1][1]-j+P;r.setRect(this.clipRect,z,j,R,V),this.bgRect.call(r.setRect,z,j,R,V).call(o.fill,L.bgcolor),this.xaxis._offset=z,this.xaxis._length=R,this.yaxis._offset=j,this.yaxis._length=V},S.updateFx=function(E,L){var C=this,P=C.graphDiv,z=C.bgRect,j=E.dragmode,R=E.clickmode;if(!C.isStatic){var V={element:C.bgRect.node(),gd:P,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(B,N){N.isRect?(B.range={})[C.id]=[D([N.xmin,N.ymin]),D([N.xmax,N.ymax])]:(B.lassoPoints={})[C.id]=N.map(D)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(B){2===B&&b(P)}};"pan"===j?(z.node().onmousedown=null,z.call(g(C,L)),z.on("dblclick.zoom",function(){var B=C.viewInitial,N={};for(var U in B)N[C.id+"."+U]=B[U];p.call("_guiRelayout",P,N),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||z.on("wheel.zoom",null)):"select"!==j&&"lasso"!==j||(z.on(".zoom",null),V.prepFn=function(B,N,U){f(B,N,U,V,j)},h.init(V)),z.on("mousemove",function(){var B=C.projection.invert(s.getPositionFromD3Event());if(!B)return h.unhover(P,M.event);C.xaxis.p2c=function(){return B[0]},C.yaxis.p2c=function(){return B[1]},n.hover(P,M.event,C.id)}),z.on("mouseout",function(){P._dragging||h.unhover(P,M.event)}),z.on("click",function(){"select"!==j&&"lasso"!==j&&(R.indexOf("select")>-1&&v(M.event,P,[C.xaxis],[C.yaxis],C.id,V),R.indexOf("event")>-1&&n.click(P,M.event))})}function D(B){return C.projection.invert([B[0]+C.xaxis._offset,B[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,L=E.graphDiv,C=L._fullLayout,P="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=M.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,P,L),E.project=function(z){var j=E.projection(z);return j?[j[0]-E.xaxis._offset,j[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},i.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var C=E.center||{},P=E.projection,z=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},s.extendFlat(this.viewInitial,E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":z.lon})},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,L=this.projection,C=L.getPath();function P(j){var R=L(j.lonlat);return R?e(R[0],R[1]):null}function z(j){return L.isLonLatOverEdges(j.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(j){return C(j.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",P)}},44622:function($,I,t){"use strict";var M=t(27659).AU,k=t(71828).counterRegex,l=t(69082),T="geo",x=k(T),p={};p.geo={valType:"subplotid",dflt:T,editType:"calc"},$.exports={attr:T,name:T,idRoot:T,idRegex:x,attrRegex:x,attributes:p,layoutAttributes:t(77519),supplyLayoutDefaults:t(82161),plot:function(s){for(var e=s._fullLayout,o=s.calcdata,r=e._subplots.geo,n=0;n<r.length;n++){var a=r[n],i=M(o,T,a),c=e[a]._subplot;c||(c=l({id:a,graphDiv:s,container:e._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),e[a]._subplot=c),c.plot(i,e,s._promises)}},updateFx:function(s){for(var e=s._fullLayout,o=e._subplots.geo,r=0;r<o.length;r++){var n=e[o[r]];n._subplot.updateFx(e,n)}},clean:function(s,e,o,r){for(var n=r._subplots.geo||[],a=0;a<n.length;a++){var i=n[a],c=r[i]._subplot;!e[i]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},77519:function($,I,t){"use strict";var M=t(22399),k=t(27670).Y,l=t(79952).P,T=t(78776),x=t(30962).overrideAll,p=t(78607),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};($.exports=x({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:p(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:p(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function($,I,t){"use strict";var M=t(71828),k=t(49119),l=t(27659).NG,T=t(78776),x=t(77519),p=T.axesNames;function s(e,o,r,n){var a=l(n.fullData,"geo",n.id).map(function(q){return q._expandedIndex}),i=r("resolution"),c=r("scope"),h=T.scopeDefaults[c],f=r("projection.type",h.projType),b=o._isAlbersUsa="albers usa"===f;b&&(c=o.scope="usa");var v=o._isScoped="world"!==c,g=o._isSatellite="satellite"===f,y=o._isConic=-1!==f.indexOf("conic")||"albers"===f,d=o._isClipped=!!T.lonaxisSpan[f];if(!1===e.visible){var m=M.extendDeep({},o._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),o._template=m}for(var w=r("visible"),u=0;u<p.length;u++){var S,_=p[u],E=[30,10][u];if(v)S=h[_+"Range"];else{var L=T[_+"Span"],C=(L[f]||L["*"])/2,P=r("projection.rotation."+_.substr(0,3),h.projRotate[u]);S=[P-C,P+C]}var z=r(_+".range",S);r(_+".tick0"),r(_+".dtick",E),r(_+".showgrid",!!w&&void 0)&&(r(_+".gridcolor"),r(_+".gridwidth"),r(_+".griddash")),o[_]._ax={type:"linear",_id:_.slice(0,3),_traceIndices:a,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var j=o.lonaxis.range,R=o.lataxis.range,V=j[0],D=j[1];V>0&&D<0&&(D+=360);var B,N,U,J=(V+D)/2;if(!b){var Y=v?h.projRotate:[J,0,0];B=r("projection.rotation.lon",Y[0]),r("projection.rotation.lat",Y[1]),r("projection.rotation.roll",Y[2]),r("showcoastlines",!v&&w)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!w&&void 0)&&r("oceancolor")}b?(N=-96.6,U=38.7):(N=v?J:B,U=(R[0]+R[1])/2),r("center.lon",N),r("center.lat",U),g&&(r("projection.tilt"),r("projection.distance")),y&&r("projection.parallels",h.projParallels||[0,60]),r("projection.scale"),r("showland",!!w&&void 0)&&r("landcolor"),r("showlakes",!!w&&void 0)&&r("lakecolor"),r("showrivers",!!w&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",v&&"usa"!==c&&w)&&(r("countrycolor"),r("countrywidth")),("usa"===c||"north america"===c&&50===i)&&(r("showsubunits",w),r("subunitcolor"),r("subunitwidth")),v||r("showframe",w)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete o.projection.scale,v?(delete o.center.lon,delete o.center.lat):d?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}$.exports=function(e,o,r){k(e,o,r,{type:"geo",attributes:x,handleDefaults:s,fullData:r,partition:"y"})}},74455:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(73972),T=Math.PI/180,x=180/Math.PI,p={cursor:"pointer"},s={cursor:"auto"};function e(w,u){return M.behavior.zoom().translate(u.translate()).scale(u.scale())}function o(w,u,S){var _=w.id,E=w.graphDiv,L=E.layout,C=L[_],P=E._fullLayout,z=P[_],j={},R={};function V(D,B){j[_+"."+D]=k.nestedProperty(C,D).get(),l.call("_storeDirectGUIEdit",L,P._preGUI,j);var N=k.nestedProperty(z,D);N.get()!==B&&(N.set(B),k.nestedProperty(C,D).set(B),R[_+"."+D]=B)}S(V),V("projection.scale",u.scale()/w.fitScale),V("fitbounds",!1),E.emit("plotly_relayout",R)}function r(w,u){var S=e(0,u);function _(E){var L=u.invert(w.midPt);E("center.lon",L[0]),E("center.lat",L[1])}return S.on("zoomstart",function(){M.select(this).style(p)}).on("zoom",function(){u.scale(M.event.scale).translate(M.event.translate),w.render(!0);var E=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":E[0],"geo.center.lat":E[1]})}).on("zoomend",function(){M.select(this).style(s),o(w,u,_)}),S}function n(w,u){var S,_,E,L,C,P,z,j,R,V=e(0,u);function D(N){return u.invert(N)}function B(N){var U=u.rotate(),J=u.invert(w.midPt);N("projection.rotation.lon",-U[0]),N("center.lon",J[0]),N("center.lat",J[1])}return V.on("zoomstart",function(){M.select(this).style(p),S=M.mouse(this),_=u.rotate(),E=u.translate(),L=_,C=D(S)}).on("zoom",function(){if(P=M.mouse(this),function(J){var Y=D(J);if(!Y)return!0;var q=u(Y);return Math.abs(q[0]-J[0])>2||Math.abs(q[1]-J[1])>2}(S))return V.scale(u.scale()),void V.translate(u.translate());u.scale(M.event.scale),u.translate([E[0],M.event.translate[1]]),C?D(P)&&(j=D(P),u.rotate(z=[L[0]+(j[0]-C[0]),_[1],_[2]]),L=z):C=D(S=P),R=!0,w.render(!0);var N=u.rotate(),U=u.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.center.lon":U[0],"geo.center.lat":U[1],"geo.projection.rotation.lon":-N[0]})}).on("zoomend",function(){M.select(this).style(s),R&&o(w,u,B)}),V}function a(w,u){var S,_={r:u.rotate(),k:u.scale()},E=e(0,u),L=function(D){for(var B=0,N=arguments.length,U=[];++B<N;)U.push(arguments[B]);var J=M.dispatch.apply(null,U);return J.of=function(Y,q){return function(H){var X;try{X=H.sourceEvent=M.event,H.target=D,M.event=H,J[H.type].apply(Y,q)}finally{M.event=X}}},J}(E,"zoomstart","zoom","zoomend"),C=0,P=E.on;function z(D){C++||D({type:"zoomstart"})}function j(D){D({type:"zoom"})}function R(D){--C||D({type:"zoomend"})}function V(D){var B=u.rotate();D("projection.rotation.lon",-B[0]),D("projection.rotation.lat",-B[1])}return E.on("zoomstart",function(){M.select(this).style(p);var D=M.mouse(this),B=u.rotate(),N=B,U=u.translate(),J=c(B);S=i(u,D),P.call(E,"zoom",function(){var Y=M.mouse(this);if(u.scale(_.k=M.event.scale),S){if(i(u,Y)){u.rotate(B).translate(U);var q=i(u,Y),H=f(S,q),X=d(h(J,H)),Q=_.r=b(X,S,N);isFinite(Q[0])&&isFinite(Q[1])&&isFinite(Q[2])||(Q=N),u.rotate(Q),N=Q}}else S=i(u,D=Y);j(L.of(this,arguments))}),z(L.of(this,arguments))}).on("zoomend",function(){M.select(this).style(s),P.call(E,"zoom",null),R(L.of(this,arguments)),o(w,u,V)}).on("zoom.redraw",function(){w.render(!0);var D=u.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":u.scale()/w.fitScale,"geo.projection.rotation.lon":-D[0],"geo.projection.rotation.lat":-D[1]})}),M.rebind(E,L,"on")}function i(w,u){var _,E,L,C,S=w.invert(u);return S&&isFinite(S[0])&&isFinite(S[1])&&(E=(_=S)[0]*T,L=_[1]*T,[(C=Math.cos(L))*Math.cos(E),C*Math.sin(E),Math.sin(L)])}function c(w){var u=.5*w[0]*T,S=.5*w[1]*T,_=.5*w[2]*T,E=Math.sin(u),L=Math.cos(u),C=Math.sin(S),P=Math.cos(S),z=Math.sin(_),j=Math.cos(_);return[L*P*j+E*C*z,E*P*j-L*C*z,L*C*j+E*P*z,L*P*z-E*C*j]}function h(w,u){var S=w[0],_=w[1],E=w[2],L=w[3],C=u[0],P=u[1],z=u[2],j=u[3];return[S*C-_*P-E*z-L*j,S*P+_*C+E*j-L*z,S*z-_*j+E*C+L*P,S*j+_*z-E*P+L*C]}function f(w,u){if(w&&u){var S=[(C=w)[1]*(P=u)[2]-C[2]*P[1],C[2]*P[0]-C[0]*P[2],C[0]*P[1]-C[1]*P[0]],_=Math.sqrt(m(S,S)),E=.5*Math.acos(Math.max(-1,Math.min(1,m(w,u)))),L=Math.sin(E)/_;return _&&[Math.cos(E),S[2]*L,-S[1]*L,S[0]*L]}var C,P}function b(w,u,S){var _=y(u,2,w[0]);_=y(_,1,w[1]),_=y(_,0,w[2]-S[2]);var E,L,C=u[0],P=u[1],z=u[2],j=_[0],R=_[1],V=_[2],D=Math.atan2(P,C)*x,B=Math.sqrt(C*C+P*P);Math.abs(R)>B?(L=(R>0?90:-90)-D,E=0):(L=Math.asin(R/B)*x-D,E=Math.sqrt(B*B-R*R));var N=180-L-2*D,U=(Math.atan2(V,j)-Math.atan2(z,E))*x,J=(Math.atan2(V,j)-Math.atan2(z,-E))*x;return v(S[0],S[1],L,U)<=v(S[0],S[1],N,J)?[L,U,S[2]]:[N,J,S[2]]}function v(w,u,S,_){var E=g(S-w),L=g(_-u);return Math.sqrt(E*E+L*L)}function g(w){return(w%360+540)%360-180}function y(w,u,S){var _=S*T,E=w.slice(),L=0===u?1:0,C=2===u?1:2,P=Math.cos(_),z=Math.sin(_);return E[L]=w[L]*P-w[C]*z,E[C]=w[C]*P+w[L]*z,E}function d(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*x,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*x]}function m(w,u){for(var S=0,_=0,E=w.length;_<E;++_)S+=w[_]*u[_];return S}$.exports=function(w,u){return(u._isScoped?r:u._isClipped?a:n)(w,w.projection)}},27659:function($,I,t){"use strict";var M=t(73972),k=t(85555).SUBPLOT_PATTERN;I.AU=function(l,T,x){var p=M.subplotsRegistry[T];if(!p)return[];for(var s=p.attr,e=[],o=0;o<l.length;o++){var r=l[o];r[0].trace[s]===x&&e.push(r)}return e},I.a0=function(l,T){var x,p=[],s=[];if(!(x="string"==typeof T?M.getModule(T).plot:"function"==typeof T?T:T.plot))return[p,l];for(var e=0;e<l.length;e++){var o=l[e],r=o[0].trace;!0===r.visible&&0!==r._length&&(r._module.plot===x?p.push(o):s.push(o))}return[p,s]},I.NG=function(l,T,x){if(!M.subplotsRegistry[T])return[];var p,s,e,o=M.subplotsRegistry[T].attr,r=[];if("gl2d"===T){var n=x.match(k);s="x"+n[1],e="y"+n[2]}for(var a=0;a<l.length;a++)p=l[a],"gl2d"===T&&M.traceIs(p,"gl2d")?p[o[0]]===s&&p[o[1]]===e&&r.push(p):p[o]===x&&r.push(p);return r}},75071:function($,I,t){"use strict";var M=t(16825),k=t(1195),l=t(48956),T=t(85555),x=t(38520);function p(s,e){this.element=s,this.plot=e,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function(s){var e=s.mouseContainer,o=s.glplot,r=new p(e,o);function n(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(i,c,h){var f,b,v=s.calcDataBox(),g=o.viewBox,y=r.lastPos[0],d=r.lastPos[1],m=T.MINDRAG*o.pixelRatio,w=T.MINZOOM*o.pixelRatio;function u(P,z,j){var R=Math.min(z,j),V=Math.max(z,j);R!==V?(v[P]=R,v[P+2]=V,r.dataBox=v,s.setRanges(v)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(c*=o.pixelRatio,h=g[3]-g[1]-(h*=o.pixelRatio),s.fullLayout.dragmode){case"zoom":if(i){var S=c/(g[2]-g[0])*(v[2]-v[0])+v[0],_=h/(g[3]-g[1])*(v[3]-v[1])+v[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=_,r.dragStart[0]=c,r.dragStart[1]=h),r.boxEnd[0]=S,r.boxEnd[1]=_,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-c)<w,L=Math.abs(r.dragStart[1]-h)<w;if(!function(){for(var P=s.graphDiv._fullLayout._axisConstraintGroups,z=s.xaxis._id,j=s.yaxis._id,R=0;R<P.length;R++)if(-1!==P[R][z]){if(-1!==P[R][j])return!0;break}return!1}()||E&&L)E&&(r.boxEnd[0]=r.boxStart[0]),L&&(r.boxEnd[1]=r.boxStart[1]);else{f=r.boxEnd[0]-r.boxStart[0],b=r.boxEnd[1]-r.boxStart[1];var C=(v[3]-v[1])/(v[2]-v[0]);Math.abs(f*C)>Math.abs(b)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(f)*C*(b>=0?1:-1),r.boxEnd[1]<v[1]?(r.boxEnd[1]=v[1],r.boxEnd[0]=r.boxStart[0]+(v[1]-r.boxStart[1])/Math.abs(C)):r.boxEnd[1]>v[3]&&(r.boxEnd[1]=v[3],r.boxEnd[0]=r.boxStart[0]+(v[3]-r.boxStart[1])/Math.abs(C))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(b)/C*(f>=0?1:-1),r.boxEnd[0]<v[0]?(r.boxEnd[0]=v[0],r.boxEnd[1]=r.boxStart[1]+(v[0]-r.boxStart[0])*Math.abs(C)):r.boxEnd[0]>v[2]&&(r.boxEnd[0]=v[2],r.boxEnd[1]=r.boxStart[1]+(v[2]-r.boxStart[0])*Math.abs(C)))}}else r.boxEnabled?(b=r.boxStart[1]!==r.boxEnd[1],(f=r.boxStart[0]!==r.boxEnd[0])||b?(f&&(u(0,r.boxStart[0],r.boxEnd[0]),s.xaxis.autorange=!1),b&&(u(1,r.boxStart[1],r.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,i?(r.panning||(r.dragStart[0]=c,r.dragStart[1]=h),Math.abs(r.dragStart[0]-c)<m&&(c=r.dragStart[0]),Math.abs(r.dragStart[1]-h)<m&&(h=r.dragStart[1]),b=(d-h)*(v[3]-v[1])/(o.viewBox[3]-o.viewBox[1]),v[0]+=f=(y-c)*(v[2]-v[0])/(o.viewBox[2]-o.viewBox[0]),v[2]+=f,v[1]+=b,v[3]+=b,s.setRanges(v),r.panning=!0,r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations()):r.panning&&(r.panning=!1,s.relayoutCallback())}r.lastPos[0]=c,r.lastPos[1]=h}return r.mouseListener=M(e,a),e.addEventListener("touchstart",function(i){var c=l(i.changedTouches[0],e);a(0,c[0],c[1]),a(1,c[0],c[1]),i.preventDefault()},!!x&&{passive:!1}),e.addEventListener("touchmove",function(i){i.preventDefault();var c=l(i.changedTouches[0],e);a(1,c[0],c[1]),i.preventDefault()},!!x&&{passive:!1}),e.addEventListener("touchend",function(i){a(0,r.lastPos[0],r.lastPos[1]),i.preventDefault()},!!x&&{passive:!1}),r.wheelListener=k(e,function(i,c){if(!s.scrollZoom)return!1;var h=s.calcDataBox(),f=o.viewBox,b=r.lastPos[0],v=r.lastPos[1],g=Math.exp(5*c/(f[3]-f[1])),y=b/(f[2]-f[0])*(h[2]-h[0])+h[0],d=v/(f[3]-f[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-y)*g+y,h[2]=(h[2]-y)*g+y,h[1]=(h[1]-d)*g+d,h[3]=(h[3]-d)*g+d,s.setRanges(h),r.lastInputTime=Date.now(),n(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),r}},82961:function($,I,t){"use strict";var M=t(89298),k=t(78614);function l(p){this.scene=p,this.gl=p.gl,this.pixelRatio=p.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=l.prototype,x=["xaxis","yaxis"];T.merge=function(p){var s,e,o,r,n,a,i,c,h,f,b;for(this.titleEnable=!1,this.backgroundColor=k(p.plot_bgcolor),f=0;f<2;++f){var v=(s=x[f]).charAt(0);for(o=(e=p[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[v]?"":e.title.text,b=0;b<=2;b+=2)this.labelEnable[f+b]=!1,this.labels[f+b]=o,this.labelColor[f+b]=k(e.title.font.color),this.labelFont[f+b]=e.title.font.family,this.labelSize[f+b]=e.title.font.size,this.labelPad[f+b]=this.getLabelPad(s,e),this.tickEnable[f+b]=!1,this.tickColor[f+b]=k((e.tickfont||{}).color),this.tickAngle[f+b]="auto"===e.tickangle?0:Math.PI*-e.tickangle/180,this.tickPad[f+b]=this.getTickPad(e),this.tickMarkLength[f+b]=0,this.tickMarkWidth[f+b]=e.tickwidth||0,this.tickMarkColor[f+b]=k(e.tickcolor),this.borderLineEnable[f+b]=!1,this.borderLineColor[f+b]=k(e.linecolor),this.borderLineWidth[f+b]=e.linewidth||0;i=this.hasSharedAxis(e),n=this.hasAxisInDfltPos(s,e)&&!i,a=this.hasAxisInAltrPos(s,e)&&!i,r=e.mirror||!1,c=i?-1!==String(r).indexOf("all"):!!r,h=i?"allticks"===r:-1!==String(r).indexOf("ticks"),n?this.labelEnable[f]=!0:a&&(this.labelEnable[f+2]=!0),n?this.tickEnable[f]=e.showticklabels:a&&(this.tickEnable[f+2]=e.showticklabels),(n||c)&&(this.borderLineEnable[f]=e.showline),(a||c)&&(this.borderLineEnable[f+2]=e.showline),(n||h)&&(this.tickMarkLength[f]=this.getTickMarkLength(e)),(a||h)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(e)),this.gridLineEnable[f]=e.showgrid,this.gridLineColor[f]=k(e.gridcolor),this.gridLineWidth[f]=e.gridwidth,this.zeroLineEnable[f]=e.zeroline,this.zeroLineColor[f]=k(e.zerolinecolor),this.zeroLineWidth[f]=e.zerolinewidth}},T.hasSharedAxis=function(p){var s=this.scene;return 0!==M.findSubplotsWithAxis(s.fullLayout._subplots.gl2d,p).indexOf(s.id)},T.hasAxisInDfltPos=function(p,s){var e=s.side;return"xaxis"===p?"bottom"===e:"yaxis"===p?"left"===e:void 0},T.hasAxisInAltrPos=function(p,s){var e=s.side;return"xaxis"===p?"top"===e:"yaxis"===p?"right"===e:void 0},T.getLabelPad=function(p,s){var e=1.5,o=s.title.font.size,r=s.showticklabels;return"xaxis"===p?"top"===s.side?o*(e+(r?1:0))-10:o*(e+(r?.5:0))-10:"yaxis"===p?"right"===s.side?10+o*(e+(r?1:.5)):10+o*(e+(r?.5:0)):void 0},T.getTickPad=function(p){return"outside"===p.ticks?10+p.ticklen:15},T.getTickMarkLength=function(p){if(!p.ticks)return 0;var s=p.ticklen;return"inside"===p.ticks?-s:s},$.exports=function(p){return new l(p)}},4796:function($,I,t){"use strict";var M=t(30962).overrideAll,k=t(92918),l=t(10820),T=t(77922),x=t(85555),p=t(93612),s=t(528),e=t(27659).NG;I.name="gl2d",I.attr=["xaxis","yaxis"],I.idRoot=["x","y"],I.idRegex=x.idRegex,I.attrRegex=x.attrRegex,I.attributes=t(89502),I.supplyLayoutDefaults=function(o,r,n){r._has("cartesian")||p.supplyLayoutDefaults(o,r,n)},I.layoutAttrOverrides=M(p.layoutAttributes,"plot","from-root"),I.baseLayoutAttrOverrides=M({plot_bgcolor:l.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),I.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl2d,i=0;i<a.length;i++){var c=a[i],h=r._plots[c],f=e(n,"gl2d",c),b=h._scene2d;void 0===b&&(b=new k({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio},r),h._scene2d=b),b.plot(f,o.calcdata,r,o.layout)}},I.clean=function(o,r,n,a){for(var i=a._subplots.gl2d||[],c=0;c<i.length;c++){var h=i[c],f=a._plots[h];f._scene2d&&0===e(o,"gl2d",h).length&&(f._scene2d.destroy(),delete a._plots[h])}p.clean.apply(this,arguments)},I.drawFramework=function(o){o._context.staticPlot||p.drawFramework(o)},I.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++){var i=r._plots[n[a]]._scene2d,c=i.toImage("png");r._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),i.destroy()}},I.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl2d,a=0;a<n.length;a++)r._plots[n[a]]._scene2d.updateFx(r.dragmode)}},92918:function($,I,t){"use strict";var M,k,l=t(73972),T=t(89298),x=t(30211),p=t(9330).gl_plot2d,s=t(9330).gl_spikes2d,e=t(9330).gl_select_box,o=t(40372),r=t(82961),n=t(75071),a=t(58617),i=t(99082),c=i.enforce,h=i.clean,f=t(71739).doAutoRange,b=t(64505),v=b.drawMode,g=b.selectMode,y=["xaxis","yaxis"],d=t(85555).SUBPLOT_PATTERN;function m(u,S){this.container=u.container,this.graphDiv=u.graphDiv,this.pixelRatio=u.plotGlPixelRatio||window.devicePixelRatio,this.id=u.id,this.staticPlot=!!u.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=p(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=e(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=m;var w=m.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(k||(M=document.createElement("canvas"),k=o({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=k}else{var u=this.container.querySelector(".gl-canvas-focus"),S=o({canvas:u,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=u,this.gl=S}var _=this.canvas;_.style.width="100%",_.style.height="100%",_.style.position="absolute",_.style.top="0px",_.style.left="0px",_.style["pointer-events"]="none",this.updateSize(_);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(L);var P=this;L.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),L.addEventListener("mouseover",function(){P.isMouseOver=!0})},w.toImage=function(u){u||(u="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var S=this.glplot.gl,_=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var L=new Uint8Array(_*E*4);S.readPixels(0,0,_,E,S.RGBA,S.UNSIGNED_BYTE,L);for(var C=0,P=E-1;C<P;++C,--P)for(var z=0;z<_;++z)for(var j=0;j<4;++j){var R=L[4*(_*C+z)+j];L[4*(_*C+z)+j]=L[4*(_*P+z)+j],L[4*(_*P+z)+j]=R}var V=document.createElement("canvas");V.width=_,V.height=E;var D,B=V.getContext("2d",{willReadFrequently:!0}),N=B.createImageData(_,E);switch(N.data.set(L),B.putImageData(N,0,0),u){case"jpeg":D=V.toDataURL("image/jpeg");break;case"webp":D=V.toDataURL("image/webp");break;default:D=V.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),D},w.updateSize=function(u){u||(u=this.canvas);var S=this.pixelRatio,_=this.fullLayout,L=_.height,C=0|Math.ceil(S*_.width),P=0|Math.ceil(S*L);return u.width===C&&u.height===P||(u.width=C,u.height=P),u},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var u=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var _=0;_<u[S].length;++_)u[S][_].text=u[S][_].text+"";return u},w.updateRefs=function(u){this.fullLayout=u;var S=this.id.match(d),E="yaxis"+S[2];this.xaxis=this.fullLayout["xaxis"+S[1]],this.yaxis=this.fullLayout[E]},w.relayoutCallback=function(){var u=this.graphDiv,S=this.xaxis,_=this.yaxis,E=u.layout,L={},C=L[S._name+".range"]=S.range.slice(),P=L[_._name+".range"]=_.range.slice();L[S._name+".autorange"]=S.autorange,L[_._name+".autorange"]=_.autorange,l.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,L);var z=E[S._name];z.range=C,z.autorange=S.autorange;var j=E[_._name];j.range=P,j.autorange=_.autorange,L.lastInputTime=this.camera.lastInputTime,u.emit("plotly_relayout",L)},w.cameraChanged=function(){var u=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(_,E){for(var L=0;L<2;++L){var C=_[L],P=E[L];if(C.length!==P.length)return!0;for(var z=0;z<C.length;++z)if(C[z].x!==P[z].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=u.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var u=this.graphDiv,S=this.fullLayout.annotations,_=0;_<S.length;_++){var E=S[_];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(u,_)}},w.destroy=function(){if(this.glplot){var u=this.traces;u&&Object.keys(u).map(function(S){u[S].dispose(),delete u[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(u,S,_){var E=this.glplot;this.updateRefs(_),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(u,S),this.updateFx(_.dragmode);var L=_.width,C=_.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(_),P.screenBox=[0,0,L,C];var z={_fullLayout:{_axisConstraintGroups:_._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:_._size}};h(z,this.xaxis),h(z,this.yaxis);var j,R,V=_._size,D=this.xaxis.domain,B=this.yaxis.domain;for(P.viewBox=[V.l+D[0]*V.w,V.b+B[0]*V.h,L-V.r-(1-D[1])*V.w,C-V.t-(1-B[1])*V.h],this.mouseContainer.style.width=V.w*(D[1]-D[0])+"px",this.mouseContainer.style.height=V.h*(B[1]-B[0])+"px",this.mouseContainer.height=V.h*(B[1]-B[0]),this.mouseContainer.style.left=V.l+D[0]*V.w+"px",this.mouseContainer.style.top=V.t+(1-B[1])*V.h+"px",R=0;R<2;++R)(j=this[y[R]])._length=P.viewBox[R+2]-P.viewBox[R],f(this.graphDiv,j),j.setScale();c(z),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(_),E.update(P),this.glplot.draw()},w.calcDataBox=function(){var u=this.xaxis,S=this.yaxis,_=u.range,E=S.range,L=u.r2l,C=S.r2l;return[L(_[0]),C(E[0]),L(_[1]),C(E[1])]},w.setRanges=function(u){var S=this.xaxis,_=this.yaxis,E=S.l2r,L=_.l2r;S.range=[E(u[0]),E(u[2])],_.range=[L(u[1]),L(u[3])]},w.updateTraces=function(u,S){var _,E,L,C=Object.keys(this.traces);this.fullData=u;e:for(_=0;_<C.length;_++){var P=C[_],z=this.traces[P];for(E=0;E<u.length;E++)if((L=u[E]).uid===P&&L.type===z.type)continue e;z.dispose(),delete this.traces[P]}for(_=0;_<u.length;_++){var j=S[_],R=this.traces[(L=u[_]).uid];R?R.update(L,j):(R=L._module.plot(this,L,j),this.traces[L.uid]=R)}this.glplot.objects.sort(function(V,D){return V._trace.index-D._trace.index})},w.updateFx=function(u){g(u)||v(u)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===u?"move":"zoom"===u?"crosshair":null},w.emitPointAction=function(u,S){for(var _,E=u.trace.uid,L=u.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(_=this.fullData[C]);var P={x:u.traceCoord[0],y:u.traceCoord[1],curveNumber:_.index,pointNumber:L,data:_._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};x.appendArrayPointValue(P,_,L),this.graphDiv.emit(S,{points:[P]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var u=this.glplot,S=this.camera,_=S.mouseListener,E=1===this.lastButtonState&&0===_.buttons,L=this.fullLayout;this.lastButtonState=_.buttons,this.cameraChanged();var C,P=_.x*u.pixelRatio,z=this.canvas.height-u.pixelRatio*_.y;if(S.boxEnabled&&"zoom"===L.dragmode){this.selectBox.enabled=!0;for(var j=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],R=0;R<2;R++)S.boxStart[R]===S.boxEnd[R]&&(j[R]=u.dataBox[R],j[R+2]=u.dataBox[R+2]);u.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var V=L._size,N=(C=u.pick(P/u.pixelRatio+V.l+this.xaxis.domain[0]*V.w,z/u.pixelRatio-(V.t+(1-this.yaxis.domain[1])*V.h)))&&C.object._trace.handlePick(C);if(N&&E&&this.emitPointAction(N,"plotly_click"),C&&"skip"!==C.object._trace.hoverinfo&&L.hovermode&&N&&(!this.lastPickResult||this.lastPickResult.traceUid!==N.trace.uid||this.lastPickResult.dataCoord[0]!==N.dataCoord[0]||this.lastPickResult.dataCoord[1]!==N.dataCoord[1])){var U=N;this.lastPickResult={traceUid:N.trace?N.trace.uid:null,dataCoord:N.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),U.screenCoord=[((u.viewBox[2]-u.viewBox[0])*(C.dataCoord[0]-u.dataBox[0])/(u.dataBox[2]-u.dataBox[0])+u.viewBox[0])/u.pixelRatio,(this.canvas.height-(u.viewBox[3]-u.viewBox[1])*(C.dataCoord[1]-u.dataBox[1])/(u.dataBox[3]-u.dataBox[1])-u.viewBox[1])/u.pixelRatio],this.emitPointAction(N,"plotly_hover");var J=this.fullData[U.trace.index]||{},Y=U.pointIndex,q=x.castHoverinfo(J,L,Y);if(q&&"all"!==q){var H=q.split("+");-1===H.indexOf("x")&&(U.traceCoord[0]=void 0),-1===H.indexOf("y")&&(U.traceCoord[1]=void 0),-1===H.indexOf("z")&&(U.traceCoord[2]=void 0),-1===H.indexOf("text")&&(U.textLabel=void 0),-1===H.indexOf("name")&&(U.name=void 0)}x.loneHover({x:U.screenCoord[0],y:U.screenCoord[1],xLabel:this.hoverFormatter("xaxis",U.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",U.traceCoord[1]),zLabel:U.traceCoord[2],text:U.textLabel,name:U.name,color:x.castHoverOption(J,Y,"bgcolor")||U.color,borderColor:x.castHoverOption(J,Y,"bordercolor"),fontFamily:x.castHoverOption(J,Y,"font.family"),fontSize:x.castHoverOption(J,Y,"font.size"),fontColor:x.castHoverOption(J,Y,"font.color"),nameLength:x.castHoverOption(J,Y,"namelength"),textAlign:x.castHoverOption(J,Y,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),u.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),x.loneUnhover(this.svgContainer))},w.hoverFormatter=function(u,S){if(void 0!==S){var _=this[u];return T.tickText(_,_.c2l(S),"hover").text}}},58547:function($,I,t){"use strict";var M=t(30962).overrideAll,k=t(528),l=t(33539),T=t(27659).NG,x=t(71828),p=t(77922),s="gl3d",e="scene";I.name=s,I.attr=e,I.idRoot=e,I.idRegex=I.attrRegex=x.counterRegex("scene"),I.attributes=t(59084),I.layoutAttributes=t(65500),I.baseLayoutAttrOverrides=M({hoverlabel:k.hoverlabel},"plot","nested"),I.supplyLayoutDefaults=t(24682),I.plot=function(o){for(var r=o._fullLayout,n=o._fullData,a=r._subplots.gl3d,i=0;i<a.length;i++){var c=a[i],h=T(n,s,c),f=r[c],b=f.camera,v=f._scene;v||(v=new l({id:c,graphDiv:o,container:o.querySelector(".gl-container"),staticPlot:o._context.staticPlot,plotGlPixelRatio:o._context.plotGlPixelRatio,camera:b},r),f._scene=v),v.viewInitial||(v.viewInitial={up:{x:b.up.x,y:b.up.y,z:b.up.z},eye:{x:b.eye.x,y:b.eye.y,z:b.eye.z},center:{x:b.center.x,y:b.center.y,z:b.center.z}}),v.plot(h,r,o.layout)}},I.clean=function(o,r,n,a){for(var i=a._subplots.gl3d||[],c=0;c<i.length;c++){var h=i[c];!r[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},I.toSVG=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=r._size,i=0;i<n.length;i++){var c=r[n[i]],h=c.domain,f=c._scene,b=f.toImage("png");r._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":b,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),f.destroy()}},I.cleanId=function(o){if(o.match(/^scene[0-9]*$/)){var r=o.substr(5);return"1"===r&&(r=""),e+r}},I.updateFx=function(o){for(var r=o._fullLayout,n=r._subplots.gl3d,a=0;a<n.length;a++)r[n[a]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function($){"use strict";$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function($,I,t){"use strict";var M=t(7901),k=t(13838),l=t(1426).extendFlat,T=t(30962).overrideAll;$.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:l({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,rangemode:k.rangemode,range:l({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:l({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},3277:function($,I,t){"use strict";var M=t(84267).mix,k=t(71828),l=t(44467),T=t(77894),x=t(951),p=t(71453),s=["xaxis","yaxis","zaxis"];$.exports=function(e,o,r){var n,a;function i(f,b){return k.coerce(n,a,T,f,b)}for(var c=0;c<s.length;c++){var h=s[c];n=e[h]||{},(a=l.newContainer(o,h))._id=h[0]+r.scene,a._name=h,x(n,a,i,r),p(n,a,i,{font:r.font,letter:h[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),i("gridcolor",M(a.color,r.bgColor,72.72727272727273).toRgbString()),i("title.text",h[0]),a.setScale=k.noop,i("showspikes")&&(i("spikesides"),i("spikethickness"),i("spikecolor",a.color)),i("showaxeslabels"),i("showbackground")&&i("backgroundcolor")}}},30422:function($,I,t){"use strict";var M=t(78614),k=t(71828),l=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(x,p){for(var s=this,e=0;e<3;++e){var o=p[l[e]];o.visible?(s.labels[e]=x._meta?k.templateString(o.title.text,x._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(s.labelColor[e]=M(o.title.font.color)),o.title.font.family&&(s.labelFont[e]=o.title.font.family),o.title.font.size&&(s.labelSize[e]=o.title.font.size)),"showline"in o&&(s.lineEnable[e]=o.showline),"linecolor"in o&&(s.lineColor[e]=M(o.linecolor)),"linewidth"in o&&(s.lineWidth[e]=o.linewidth),"showgrid"in o&&(s.gridEnable[e]=o.showgrid),"gridcolor"in o&&(s.gridColor[e]=M(o.gridcolor)),"gridwidth"in o&&(s.gridWidth[e]=o.gridwidth),"log"===o.type?s.zeroEnable[e]=!1:"zeroline"in o&&(s.zeroEnable[e]=o.zeroline),"zerolinecolor"in o&&(s.zeroLineColor[e]=M(o.zerolinecolor)),"zerolinewidth"in o&&(s.zeroLineWidth[e]=o.zerolinewidth),s.lineTickEnable[e]=!(!("ticks"in o)||!o.ticks),"ticklen"in o&&(s.lineTickLength[e]=s._defaultLineTickLength[e]=o.ticklen),"tickcolor"in o&&(s.lineTickColor[e]=M(o.tickcolor)),"tickwidth"in o&&(s.lineTickWidth[e]=o.tickwidth),"tickangle"in o&&(s.tickAngle[e]="auto"===o.tickangle?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(s.tickEnable[e]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(s.tickColor[e]=M(o.tickfont.color)),o.tickfont.family&&(s.tickFont[e]=o.tickfont.family),o.tickfont.size&&(s.tickSize[e]=o.tickfont.size)),"mirror"in o?-1!==["ticks","all","allticks"].indexOf(o.mirror)?(s.lineTickMirror[e]=!0,s.lineMirror[e]=!0):!0===o.mirror?(s.lineTickMirror[e]=!1,s.lineMirror[e]=!0):(s.lineTickMirror[e]=!1,s.lineMirror[e]=!1):s.lineMirror[e]=!1,"showbackground"in o&&!1!==o.showbackground?(s.backgroundEnable[e]=!0,s.backgroundColor[e]=M(o.backgroundcolor)):s.backgroundEnable[e]=!1):(s.tickEnable[e]=!1,s.labelEnable[e]=!1,s.lineEnable[e]=!1,s.lineTickEnable[e]=!1,s.gridEnable[e]=!1,s.zeroEnable[e]=!1,s.backgroundEnable[e]=!1)}},$.exports=function(x,p){var s=new T;return s.merge(x,p),s}},24682:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(73972),T=t(49119),x=t(3277),p=t(65500),s=t(27659).NG,e="gl3d";function o(r,n,a,i){for(var c=a("bgcolor"),h=k.combine(c,i.paper_bgcolor),f=["up","center","eye"],b=0;b<f.length;b++)a("camera."+f[b]+".x"),a("camera."+f[b]+".y"),a("camera."+f[b]+".z");a("camera.projection.type");var v=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),g=a("aspectmode",v?"manual":"auto");v||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===g&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=s(i.fullData,e,i.id);x(r,n,{font:i.font,scene:i.id,data:y,bgColor:h,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,i);var d=i.getDfltFromLayout("dragmode");if(!1!==d&&!d)if(d="orbit",r.camera&&r.camera.up){var m=r.camera.up.x,w=r.camera.up.y,u=r.camera.up.z;0!==u&&(m&&w&&u?u/Math.sqrt(m*m+w*w+u*u)>.999&&(d="turntable"):d="turntable")}else d="turntable";a("dragmode",d),a("hovermode",i.getDfltFromLayout("hovermode"))}$.exports=function(r,n,a){var i=n._basePlotModules.length>1;T(r,n,a,{type:e,attributes:p,handleDefaults:o,fullLayout:n,font:n.font,fullData:a,getDfltFromLayout:function(c){if(!i)return M.validate(r[c],p[c])?r[c]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function($,I,t){"use strict";var M=t(77894),k=t(27670).Y,l=t(1426).extendFlat,T=t(71828).counterRegex;function x(p,s,e){return{x:{valType:"number",dflt:p,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:e,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(x(0,0,1),{}),center:l(x(0,0,0),{}),eye:l(x(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function($,I,t){"use strict";var M=t(78614),k=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(T){for(var x=0;x<3;++x){var p=T[k[x]];p.visible?(this.enabled[x]=p.showspikes,this.colors[x]=M(p.spikecolor),this.drawSides[x]=p.spikesides,this.lineWidth[x]=p.spikethickness):(this.enabled[x]=!1,this.drawSides[x]=!1)}},$.exports=function(T){var x=new l;return x.merge(T),x}},96085:function($,I,t){"use strict";$.exports=function(x){for(var p=x.axesOptions,s=x.glplot.axesPixels,e=x.fullSceneLayout,o=[[],[],[]],r=0;r<3;++r){var n=e[l[r]];if(n._length=(s[r].hi-s[r].lo)*s[r].pixelsPerDataUnit/x.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))o[r]=[];else{n._input_range=n.range.slice(),n.range[0]=s[r].lo/x.dataScale[r],n.range[1]=s[r].hi/x.dataScale[r],n._m=1/(x.dataScale[r]*s[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var a=n.tickmode;if("auto"===n.tickmode){n.tickmode="linear";var i=n.nticks||k.constrain(n._length/40,4,9);M.autoTicks(n,Math.abs(n.range[1]-n.range[0])/i)}for(var c=M.calcTicks(n,{msUTC:!0}),h=0;h<c.length;++h)c[h].x=c[h].x*x.dataScale[r],"date"===n.type&&(c[h].text=c[h].text.replace(/\<br\>/g," "));o[r]=c,n.tickmode=a}}for(p.ticks=o,r=0;r<3;++r)for(T[r]=.5*(x.glplot.bounds[0][r]+x.glplot.bounds[1][r]),h=0;h<2;++h)p.bounds[h][r]=x.glplot.bounds[h][r];x.contourLevels=function(f){for(var b=new Array(3),v=0;v<3;++v){for(var g=f[v],y=new Array(g.length),d=0;d<g.length;++d)y[d]=g[d].x;b[v]=y}return b}(o)};var M=t(89298),k=t(71828),l=["xaxis","yaxis","zaxis"],T=[0,0,0]},63538:function($){"use strict";function I(t,M){var k,l,T=[0,0,0,0];for(k=0;k<4;++k)for(l=0;l<4;++l)T[l]+=t[4*k+l]*M[k];return T}$.exports=function(t,M){return I(t.projection,I(t.view,I(t.model,[M[0],M[1],M[2],1])))}},33539:function($,I,t){"use strict";var M,k,l=t(9330).gl_plot3d,T=l.createCamera,x=l.createScene,p=t(40372),s=t(38520),e=t(73972),o=t(71828),r=o.preserveDrawingBuffer(),n=t(89298),a=t(30211),i=t(78614),c=t(58617),h=t(63538),f=t(30422),b=t(13133),v=t(96085);function g(u,S){var _=document.createElement("div"),E=u.container;this.graphDiv=u.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none",_.appendChild(L),this.svgContainer=L,_.id=u.id,_.style.position="absolute",_.style.top=_.style.left="0px",_.style.width=_.style.height="100%",E.appendChild(_),this.fullLayout=S,this.id=u.id||"scene",this.fullSceneLayout=S[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(S,S[this.id]),this.spikeOptions=b(S[this.id]),this.container=_,this.staticMode=!!u.staticPlot,this.pixelRatio=this.pixelRatio||u.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=e.getComponentMethod("annotations3d","convert"),this.drawAnnotations=e.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=g.prototype;y.prepareOptions=function(){var u=this,S={canvas:u.canvas,gl:u.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:u.container,axes:u.axesOptions,spikes:u.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:u.camera,pixelRatio:u.pixelRatio};if(u.staticMode){if(!(k||(M=document.createElement("canvas"),k=p({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");S.gl=k,S.canvas=M}return S};var d=!0;y.tryCreatePlot=function(){var u=this,S=u.prepareOptions(),_=!0;try{u.glplot=x(S)}catch{if(u.staticMode||!d||r)_=!1;else{o.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=S.glOptions.preserveDrawingBuffer=!0,u.glplot=x(S)}catch{r=S.glOptions.preserveDrawingBuffer=!1,_=!1}}}return d=!1,_},y.initializeGLCamera=function(){var u=this,S=u.fullSceneLayout.camera;u.camera=T(u.container,{center:[S.center.x,S.center.y,S.center.z],eye:[S.eye.x,S.eye.y,S.eye.z],up:[S.up.x,S.up.y,S.up.z],_ortho:"orthographic"===S.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var u=this;if(u.initializeGLCamera(),!u.tryCreatePlot())return c(u);u.traces={},u.make4thDimension();var S=u.graphDiv,_=S.layout,E=function(){var C={};return u.isCameraChanged(_)&&(C[u.id+".camera"]=u.getCamera()),u.isAspectChanged(_)&&(C[u.id+".aspectratio"]=u.glplot.getAspectratio(),"manual"!==_[u.id].aspectmode&&(u.fullSceneLayout.aspectmode=_[u.id].aspectmode=C[u.id+".aspectmode"]="manual")),C},L=function(C){if(!1!==C.fullSceneLayout.dragmode){var P=E();C.saveLayout(_),C.graphDiv.emit("plotly_relayout",P)}};return u.glplot.canvas&&(u.glplot.canvas.addEventListener("mouseup",function(){L(u)}),u.glplot.canvas.addEventListener("wheel",function(C){if(S._context._scrollZoom.gl3d){if(u.camera._ortho){var P=C.deltaX>C.deltaY?1.1:.9090909090909091,z=u.glplot.getAspectratio();u.glplot.setAspectratio({x:P*z.x,y:P*z.y,z:P*z.z})}L(u)}},!!s&&{passive:!1}),u.glplot.canvas.addEventListener("mousemove",function(){if(!1!==u.fullSceneLayout.dragmode&&0!==u.camera.mouseListener.buttons){var C=E();u.graphDiv.emit("plotly_relayouting",C)}}),u.staticMode||u.glplot.canvas.addEventListener("webglcontextlost",function(C){S&&S.emit&&S.emit("plotly_webglcontextlost",{event:C,layer:u.id})},!1)),u.glplot.oncontextloss=function(){u.recoverContext()},u.glplot.onrender=function(){u.render()},!0},y.render=function(){var u,S=this,_=S.graphDiv,E=S.svgContainer,L=S.container.getBoundingClientRect();_._fullLayout._calcInverseTransform(_);var z=L.width*_._fullLayout._invScaleX,j=L.height*_._fullLayout._invScaleY;E.setAttributeNS(null,"viewBox","0 0 "+z+" "+j),E.setAttributeNS(null,"width",z),E.setAttributeNS(null,"height",j),v(S),S.glplot.axes.update(S.axesOptions);for(var R=Object.keys(S.traces),V=null,D=S.glplot.selection,B=0;B<R.length;++B)"skip"!==(u=S.traces[R[B]]).data.hoverinfo&&u.handlePick(D)&&(V=u),u.setContourLevels&&u.setContourLevels();function N(ke,me,le){var ue=S.fullSceneLayout[ke+"axis"];return"log"!==ue.type&&(me=ue.d2l(me)),n.hoverLabelText(ue,me,le)}if(null!==V){var J,U=h(S.glplot.cameraParams,D.dataCoordinate),Y=_._fullData[(u=V.data).index],q=D.index,H={xLabel:N("x",D.traceCoordinate[0],u.xhoverformat),yLabel:N("y",D.traceCoordinate[1],u.yhoverformat),zLabel:N("z",D.traceCoordinate[2],u.zhoverformat)},X=a.castHoverinfo(Y,S.fullLayout,q),Q=(X||"").split("+"),ne=X&&"all"===X;Y.hovertemplate||ne||(-1===Q.indexOf("x")&&(H.xLabel=void 0),-1===Q.indexOf("y")&&(H.yLabel=void 0),-1===Q.indexOf("z")&&(H.zLabel=void 0),-1===Q.indexOf("text")&&(D.textLabel=void 0),-1===Q.indexOf("name")&&(V.name=void 0));var re=[];"cone"===u.type||"streamtube"===u.type?(H.uLabel=N("x",D.traceCoordinate[3],u.uhoverformat),(ne||-1!==Q.indexOf("u"))&&re.push("u: "+H.uLabel),H.vLabel=N("y",D.traceCoordinate[4],u.vhoverformat),(ne||-1!==Q.indexOf("v"))&&re.push("v: "+H.vLabel),H.wLabel=N("z",D.traceCoordinate[5],u.whoverformat),(ne||-1!==Q.indexOf("w"))&&re.push("w: "+H.wLabel),H.normLabel=D.traceCoordinate[6].toPrecision(3),(ne||-1!==Q.indexOf("norm"))&&re.push("norm: "+H.normLabel),"streamtube"===u.type&&(H.divergenceLabel=D.traceCoordinate[7].toPrecision(3),(ne||-1!==Q.indexOf("divergence"))&&re.push("divergence: "+H.divergenceLabel)),D.textLabel&&re.push(D.textLabel),J=re.join("<br>")):"isosurface"===u.type||"volume"===u.type?(H.valueLabel=n.hoverLabelText(S._mockAxis,S._mockAxis.d2l(D.traceCoordinate[3]),u.valuehoverformat),re.push("value: "+H.valueLabel),D.textLabel&&re.push(D.textLabel),J=re.join("<br>")):J=D.textLabel;var ae={x:D.traceCoordinate[0],y:D.traceCoordinate[1],z:D.traceCoordinate[2],data:Y._input,fullData:Y,curveNumber:Y.index,pointNumber:q};a.appendArrayPointValue(ae,Y,q),u._module.eventData&&(ae=Y._module.eventData(ae,D,Y,{},q));var se={points:[ae]};if(S.fullSceneLayout.hovermode){var pe=[];a.loneHover({trace:Y,x:(.5+.5*U[0]/U[3])*z,y:(.5-.5*U[1]/U[3])*j,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:J,name:V.name,color:a.castHoverOption(Y,q,"bgcolor")||V.color,borderColor:a.castHoverOption(Y,q,"bordercolor"),fontFamily:a.castHoverOption(Y,q,"font.family"),fontSize:a.castHoverOption(Y,q,"font.size"),fontColor:a.castHoverOption(Y,q,"font.color"),nameLength:a.castHoverOption(Y,q,"namelength"),textAlign:a.castHoverOption(Y,q,"align"),hovertemplate:o.castOption(Y,q,"hovertemplate"),hovertemplateLabels:o.extendFlat({},ae,H),eventData:[ae]},{container:E,gd:_,inOut_bbox:pe}),ae.bbox=pe[0]}_.emit(D.buttons&&D.distance<5?"plotly_click":"plotly_hover",se),this.oldEventData=se}else a.loneUnhover(E),this.oldEventData&&_.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;S.drawAnnotations(S)},y.recoverContext=function(){var u=this;u.glplot.dispose();var S=function(){u.glplot.gl.isContextLost()?requestAnimationFrame(S):u.initializeGLPlot()?u.plot.apply(u,u.plotArgs):o.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(S)};var m=["xaxis","yaxis","zaxis"];function w(u,S,_){for(var E=u.fullSceneLayout,L=0;L<3;L++){var C=m[L],P=C.charAt(0),z=E[C],j=S[P],R=S[P+"calendar"],V=S["_"+P+"length"];if(o.isArrayOrTypedArray(j))for(var D,B=0;B<(V||j.length);B++)if(o.isArrayOrTypedArray(j[B]))for(var N=0;N<j[B].length;++N)D=z.d2l(j[B][N],0,R),!isNaN(D)&&isFinite(D)&&(_[0][L]=Math.min(_[0][L],D),_[1][L]=Math.max(_[1][L],D));else D=z.d2l(j[B],0,R),!isNaN(D)&&isFinite(D)&&(_[0][L]=Math.min(_[0][L],D),_[1][L]=Math.max(_[1][L],D));else _[0][L]=Math.min(_[0][L],0),_[1][L]=Math.max(_[1][L],V-1)}}y.plot=function(u,S,_){var E=this;if(E.plotArgs=[u,S,_],!E.glplot.contextLost){var L,C,P,z,j,R,V=S[E.id],D=_[E.id];E.fullLayout=S,E.fullSceneLayout=V,E.axesOptions.merge(S,V),E.spikeOptions.merge(V),E.setViewport(V),E.updateFx(V.dragmode,V.hovermode),E.camera.enableWheel=E.graphDiv._context._scrollZoom.gl3d,E.glplot.setClearColor(i(V.bgcolor)),E.setConvert(j),u?Array.isArray(u)||(u=[u]):u=[];var B=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(P=0;P<u.length;++P)!0===(L=u[P]).visible&&0!==L._length&&w(this,L,B);!function(he,ye){for(var Me=he.fullSceneLayout,Re=Me.annotations||[],Pe=0;Pe<3;Pe++)for(var De=m[Pe],fe=De.charAt(0),ge=Me[De],be=0;be<Re.length;be++){var Ie=Re[be];if(Ie.visible){var He=ge.r2l(Ie[fe]);!isNaN(He)&&isFinite(He)&&(ye[0][Pe]=Math.min(ye[0][Pe],He),ye[1][Pe]=Math.max(ye[1][Pe],He))}}}(this,B);var N=[1,1,1];for(z=0;z<3;++z)N[z]=B[1][z]===B[0][z]?1:1/(B[1][z]-B[0][z]);for(E.dataScale=N,E.convertAnnotations(this),P=0;P<u.length;++P)!0===(L=u[P]).visible&&0!==L._length&&((C=E.traces[L.uid])?C.data.type===L.type?C.update(L):(C.dispose(),C=L._module.plot(this,L),E.traces[L.uid]=C):(C=L._module.plot(this,L),E.traces[L.uid]=C),C.name=L.name);var U=Object.keys(E.traces);e:for(P=0;P<U.length;++P){for(z=0;z<u.length;++z)if(u[z].uid===U[P]&&!0===u[z].visible&&0!==u[z]._length)continue e;(C=E.traces[U[P]]).dispose(),delete E.traces[U[P]]}E.glplot.objects.sort(function(he,ye){return he._trace.data.index-ye._trace.data.index});var J,Y=[[0,0,0],[0,0,0]],q=[],H={};for(P=0;P<3;++P){if((R=(j=V[m[P]]).type)in H?(H[R].acc*=N[P],H[R].count+=1):H[R]={acc:N[P],count:1},j.autorange){Y[0][P]=1/0,Y[1][P]=-1/0;var X=E.glplot.objects,Q=E.fullSceneLayout.annotations||[],ne=j._name.charAt(0);for(z=0;z<X.length;z++){var re=X[z],ae=re.bounds,se=re._trace.data._pad||0;Y[0][P]="ErrorBars"===re.constructor.name&&j._lowerLogErrorBound?Math.min(Y[0][P],j._lowerLogErrorBound):Math.min(Y[0][P],ae[0][P]/N[P]-se),Y[1][P]=Math.max(Y[1][P],ae[1][P]/N[P]+se)}for(z=0;z<Q.length;z++){var pe=Q[z];if(pe.visible){var ke=j.r2l(pe[ne]);Y[0][P]=Math.min(Y[0][P],ke),Y[1][P]=Math.max(Y[1][P],ke)}}if("rangemode"in j&&"tozero"===j.rangemode&&(Y[0][P]=Math.min(Y[0][P],0),Y[1][P]=Math.max(Y[1][P],0)),Y[0][P]>Y[1][P])Y[0][P]=-1,Y[1][P]=1;else{var me=Y[1][P]-Y[0][P];Y[0][P]-=me/32,Y[1][P]+=me/32}if("reversed"===j.autorange){var le=Y[0][P];Y[0][P]=Y[1][P],Y[1][P]=le}}else{var ue=j.range;Y[0][P]=j.r2l(ue[0]),Y[1][P]=j.r2l(ue[1])}Y[0][P]===Y[1][P]&&(Y[0][P]-=1,Y[1][P]+=1),q[P]=Y[1][P]-Y[0][P],E.glplot.setBounds(P,{min:Y[0][P]*N[P],max:Y[1][P]*N[P]})}var Ee=V.aspectmode;if("cube"===Ee)J=[1,1,1];else if("manual"===Ee){var de=V.aspectratio;J=[de.x,de.y,de.z]}else{if("auto"!==Ee&&"data"!==Ee)throw new Error("scene.js aspectRatio was not one of the enumerated types");var xe=[1,1,1];for(P=0;P<3;++P){var Te=H[R=(j=V[m[P]]).type];xe[P]=Math.pow(Te.acc,1/Te.count)/N[P]}J="data"===Ee||Math.max.apply(null,xe)/Math.min.apply(null,xe)<=4?xe:[1,1,1]}V.aspectratio.x=D.aspectratio.x=J[0],V.aspectratio.y=D.aspectratio.y=J[1],V.aspectratio.z=D.aspectratio.z=J[2],E.glplot.setAspectratio(V.aspectratio),E.viewInitial.aspectratio||(E.viewInitial.aspectratio={x:V.aspectratio.x,y:V.aspectratio.y,z:V.aspectratio.z}),E.viewInitial.aspectmode||(E.viewInitial.aspectmode=V.aspectmode);var we=V.domain||null,K=S._size||null;if(we&&K){var oe=E.container.style;oe.position="absolute",oe.left=K.l+we.x[0]*K.w+"px",oe.top=K.t+(1-we.y[1])*K.h+"px",oe.width=K.w*(we.x[1]-we.x[0])+"px",oe.height=K.h*(we.y[1]-we.y[0])+"px"}E.glplot.redraw()}},y.destroy=function(){var u=this;u.glplot&&(u.camera.mouseListener.enabled=!1,u.container.removeEventListener("wheel",u.camera.wheelListener),u.camera=null,u.glplot.dispose(),u.container.parentNode.removeChild(u.container),u.glplot=null)},y.getCamera=function(){var u,S=this;return S.camera.view.recalcMatrix(S.camera.view.lastT()),{up:{x:(u=S.camera).up[0],y:u.up[1],z:u.up[2]},center:{x:u.center[0],y:u.center[1],z:u.center[2]},eye:{x:u.eye[0],y:u.eye[1],z:u.eye[2]},projection:{type:!0===u._ortho?"orthographic":"perspective"}}},y.setViewport=function(u){var S,_=this,E=u.camera;_.camera.lookAt.apply(this,[[(S=E).eye.x,S.eye.y,S.eye.z],[S.center.x,S.center.y,S.center.z],[S.up.x,S.up.y,S.up.z]]),_.glplot.setAspectratio(u.aspectratio),"orthographic"===E.projection.type!==_.camera._ortho&&(_.glplot.redraw(),_.glplot.clearRGBA(),_.glplot.dispose(),_.initializeGLPlot())},y.isCameraChanged=function(u){var S=this.getCamera(),_=o.nestedProperty(u,this.id+".camera").get();var z,j,R,V,D,B,L=!1;if(void 0===_)L=!0;else{for(var C=0;C<3;C++)for(var P=0;P<3;P++)if(z=S,V=P,D=void 0,B=void 0,B=["x","y","z"],!(j=_)[(D=["up","center","eye"])[R=C]]||z[D[R]][B[V]]!==j[D[R]][B[V]]){L=!0;break}(!_.projection||S.projection&&S.projection.type!==_.projection.type)&&(L=!0)}return L},y.isAspectChanged=function(u){var S=this.glplot.getAspectratio(),_=o.nestedProperty(u,this.id+".aspectratio").get();return void 0===_||_.x!==S.x||_.y!==S.y||_.z!==S.z},y.saveLayout=function(u){var S,_,E,L,C,P,z=this,j=z.fullLayout,R=z.isCameraChanged(u),V=z.isAspectChanged(u),D=R||V;if(D){var B={};R&&(S=z.getCamera(),E=(_=o.nestedProperty(u,z.id+".camera")).get(),B[z.id+".camera"]=E),V&&(L=z.glplot.getAspectratio(),P=(C=o.nestedProperty(u,z.id+".aspectratio")).get(),B[z.id+".aspectratio"]=P),e.call("_storeDirectGUIEdit",u,j._preGUI,B),R&&(_.set(S),o.nestedProperty(j,z.id+".camera").set(S)),V&&(C.set(L),o.nestedProperty(j,z.id+".aspectratio").set(L),z.glplot.redraw())}return D},y.updateFx=function(u,S){var _=this,E=_.camera;if(E)if("orbit"===u)E.mode="orbit",E.keyBindingMode="rotate";else if("turntable"===u){E.up=[0,0,1],E.mode="turntable",E.keyBindingMode="rotate";var L=_.graphDiv,C=L._fullLayout,P=_.fullSceneLayout.camera,z=P.up.x,j=P.up.y,R=P.up.z;if(R/Math.sqrt(z*z+j*j+R*R)<.999){var V=_.id+".camera.up",D={x:0,y:0,z:1},B={};B[V]=D;var N=L.layout;e.call("_storeDirectGUIEdit",N,C._preGUI,B),P.up=D,o.nestedProperty(N,V).set(D)}}else E.keyBindingMode=u;_.fullSceneLayout.hovermode=S},y.toImage=function(u){var S=this;u||(u="png"),S.staticMode&&S.container.appendChild(M),S.glplot.redraw();var _=S.glplot.gl,E=_.drawingBufferWidth,L=_.drawingBufferHeight;_.bindFramebuffer(_.FRAMEBUFFER,null);var C=new Uint8Array(E*L*4);_.readPixels(0,0,E,L,_.RGBA,_.UNSIGNED_BYTE,C),function(V,D,B){for(var N=0,U=B-1;N<U;++N,--U)for(var J=0;J<D;++J)for(var Y=0;Y<4;++Y){var q=4*(D*N+J)+Y,H=4*(D*U+J)+Y,X=V[q];V[q]=V[H],V[H]=X}}(C,E,L),function(V,D,B){for(var N=0;N<B;++N)for(var U=0;U<D;++U){var J=4*(D*N+U),Y=V[J+3];if(Y>0)for(var q=255/Y,H=0;H<3;++H)V[J+H]=Math.min(q*V[J+H],255)}}(C,E,L);var P=document.createElement("canvas");P.width=E,P.height=L;var z,j=P.getContext("2d",{willReadFrequently:!0}),R=j.createImageData(E,L);switch(R.data.set(C),j.putImageData(R,0,0),u){case"jpeg":z=P.toDataURL("image/jpeg");break;case"webp":z=P.toDataURL("image/webp");break;default:z=P.toDataURL("image/png")}return S.staticMode&&S.container.removeChild(M),z},y.setConvert=function(){for(var u=0;u<3;u++){var S=this.fullSceneLayout[m[u]];n.setConvert(S,this.fullLayout),S.setScale=o.noop}},y.make4thDimension=function(){var u=this,S=u.graphDiv._fullLayout;u._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(u._mockAxis,S)},$.exports=g},90060:function($){"use strict";$.exports=function(I,t,M,k){k=k||I.length;for(var l=new Array(k),T=0;T<k;T++)l[T]=[I[T],t[T],M[T]];return l}},10820:function($,I,t){"use strict";var M=t(41940),k=t(85594),l=t(22399),T=t(29241),x=t(53777),p=t(35025),s=t(1426).extendFlat,e=M({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=l.defaultLine,$.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(p({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:x.newselection,activeselection:x.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},77734:function($,I,t){"use strict";var M=t(78607),k='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',l=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',k].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),x={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:k,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},p=M(x);$.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:x,styleValuesNonMapbox:p,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",p.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){var T=k.split(" "),x=T[0],p=T[1],s=M.isArrayOrTypedArray(l)?M.mean(l):l,e=.5+s/100,o=1.5+s/100,r=["",""],n=[0,0];switch(x){case"top":r[0]="top",n[1]=-o;break;case"bottom":r[0]="bottom",n[1]=o}switch(p){case"left":r[1]="right",n[0]=-e;break;case"right":r[1]="left",n[0]=e}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function($,I,t){"use strict";var M=t(44517),k=t(71828),l=k.strTranslate,T=k.strScale,x=t(27659).AU,p=t(77922),s=t(39898),e=t(91424),o=t(63893),r=t(10481),n="mapbox",a=I.constants=t(77734);function i(c){return"string"==typeof c&&(-1!==a.styleValuesMapbox.indexOf(c)||0===c.indexOf("mapbox://"))}I.name=n,I.attr="subplot",I.idRoot=n,I.idRegex=I.attrRegex=k.counterRegex(n),I.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},I.layoutAttributes=t(23585),I.supplyLayoutDefaults=t(77882),I.plot=function(c){var h=c._fullLayout,f=c.calcdata,b=h._subplots.mapbox;if(M.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var v=function(u,S){var _=u._fullLayout;if(""===u._context.mapboxAccessToken)return"";for(var E=[],L=[],C=!1,P=!1,z=0;z<S.length;z++){var j=_[S[z]],R=j.accesstoken;i(j.style)&&(R?k.pushUnique(E,R):(i(j._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),P=!0)),R&&k.pushUnique(L,R)}if(P){var V=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(V),new Error(V)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(L.length&&k.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,b);M.accessToken=v;for(var g=0;g<b.length;g++){var y=b[g],d=x(f,n,y),m=h[y],w=m._subplot;w||(w=new r(c,y),h[y]._subplot=w),w.viewInitial||(w.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),w.plot(d,h,c._promises)}},I.clean=function(c,h,f,b){for(var v=b._subplots.mapbox||[],g=0;g<v.length;g++){var y=v[g];!h[y]&&b[y]._subplot&&b[y]._subplot.destroy()}},I.toSVG=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,b=h._size,v=0;v<f.length;v++){var g=h[f[v]],y=g.domain,d=g._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":d,x:b.l+b.w*y.x[0],y:b.t+b.h*(1-y.y[1]),width:b.w*(y.x[1]-y.x[0]),height:b.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var m=s.select(g._subplot.div);if(null!==m.select(".mapboxgl-ctrl-logo").node().offsetParent){var w=h._glimages.append("g");w.attr("transform",l(b.l+b.w*y.x[0]+10,b.t+b.h*(1-y.y[0])-31)),w.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),w.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),w.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),w.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var u=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=h._glimages.append("g"),_=S.append("text");_.text(u).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":u});var E=e.bBox(_.node()),L=b.w*(y.x[1]-y.x[0]);if(E.width>L/2){var C=u.split("|").join("<br>");_.text(C).attr("data-unformatted",C).call(o.convertToTspans,c),E=e.bBox(_.node())}_.attr("transform",l(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>L&&(P=L/(E.width+6));var z=[b.l+b.w*y.x[1],b.t+b.h*(1-y.y[0])];S.attr("transform",l(z[0],z[1])+T(P))}},I.updateFx=function(c){for(var h=c._fullLayout,f=h._subplots.mapbox,b=0;b<f.length;b++)h[f[b]]._subplot.updateFx(h)}},67911:function($,I,t){"use strict";var M=t(71828),k=t(63893).sanitizeHTML,l=t(13056),T=t(77734);function x(o,r){this.subplot=o,this.uid=o.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var p=x.prototype;function s(o){if(!o.visible)return!1;var r=o.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if("string"!=typeof r[n]||0===r[n].length)return!1;return!0}return M.isPlainObject(r)||"string"==typeof r&&r.length>0}function e(o){var r={},n={};switch(o.type){case"circle":M.extendFlat(n,{"circle-radius":o.circle.radius,"circle-color":o.color,"circle-opacity":o.opacity});break;case"line":M.extendFlat(n,{"line-width":o.line.width,"line-color":o.color,"line-opacity":o.opacity,"line-dasharray":o.line.dash});break;case"fill":M.extendFlat(n,{"fill-color":o.color,"fill-outline-color":o.fill.outlinecolor,"fill-opacity":o.opacity});break;case"symbol":var a=o.symbol,i=l(a.textposition,a.iconsize);M.extendFlat(r,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":i.anchor,"text-offset":i.offset,"symbol-placement":a.placement}),M.extendFlat(n,{"icon-color":o.color,"text-color":a.textfont.color,"text-opacity":o.opacity});break;case"raster":M.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":o.opacity})}return{layout:r,paint:n}}p.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=s(o)},p.needsNewImage=function(o){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===o.sourcetype&&(this.source!==o.source||JSON.stringify(this.coordinates)!==JSON.stringify(o.coordinates))},p.needsNewSource=function(o){return this.sourceType!==o.sourcetype||JSON.stringify(this.source)!==JSON.stringify(o.source)||this.layerType!==o.type},p.needsNewLayer=function(o){return this.layerType!==o.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},p.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},p.updateImage=function(o){this.subplot.map.getSource(this.idSource).updateImage({url:o.source,coordinates:o.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());null!==r&&this.subplot.map.moveLayer(this.idLayer,r)},p.updateSource=function(o){var a,i,c,h,f,r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=o.sourcetype,this.source=o.source,s(o)){var n=(h=(a=o).source,f={type:c=a.sourcetype},"geojson"===c?i="data":"vector"===c?i="string"==typeof h?"url":"tiles":"raster"===c?(i="tiles",f.tileSize=256):"image"===c&&(i="url",f.coordinates=a.coordinates),f[i]=h,a.sourceattribution&&(f.attribution=k(a.sourceattribution)),f);r.addSource(this.idSource,n)}},p.findFollowingMapboxLayerId=function(o){if("traces"===o)for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var a=r[n].id;if("string"==typeof a&&0===a.indexOf(T.traceLayerPrefix)){o=a;break}}return o},p.updateLayer=function(o){var r=this.subplot,n=e(o),a=this.lookupBelow(),i=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(o)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":o.sourcelayer||"",type:o.type,minzoom:o.minzoom,maxzoom:o.maxzoom,layout:n.layout,paint:n.paint},i),this.layerType=o.type,this.below=a},p.updateStyle=function(o){if(s(o)){var r=e(o);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},p.removeLayer=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer)},p.dispose=function(){var o=this.subplot.map;o.getLayer(this.idLayer)&&o.removeLayer(this.idLayer),o.getSource(this.idSource)&&o.removeSource(this.idSource)},$.exports=function(o,r,n){var a=new x(o,r);return a.update(n),a}},23585:function($,I,t){"use strict";var M=t(71828),k=t(7901).defaultLine,l=t(27670).Y,T=t(41940),x=t(82196).textposition,p=t(30962).overrideAll,s=t(44467).templatedArray,e=t(77734),o=T({});o.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=p({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:e.styleValuesMapbox.concat(e.styleValuesNonMapbox),dflt:e.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:o,textposition:M.extendFlat({},x,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function($,I,t){"use strict";var M=t(71828),k=t(49119),l=t(85501),T=t(23585);function x(s,e,o,r){o("accesstoken",r.accessToken),o("style"),o("center.lon"),o("center.lat"),o("zoom"),o("bearing"),o("pitch");var n=o("bounds.west"),a=o("bounds.east"),i=o("bounds.south"),c=o("bounds.north");void 0!==n&&void 0!==a&&void 0!==i&&void 0!==c||delete e.bounds,l(s,e,{name:"layers",handleItemDefaults:p}),e._input=s}function p(s,e){function o(c,h){return M.coerce(s,e,T.layers,c,h)}if(o("visible")){var r,n=o("sourcetype"),a="raster"===n||"image"===n;o("source"),o("sourceattribution"),"vector"===n&&o("sourcelayer"),"image"===n&&o("coordinates"),a&&(r="raster");var i=o("type",r);a&&"raster"!==i&&(i=e.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),o("below"),o("color"),o("opacity"),o("minzoom"),o("maxzoom"),"circle"===i&&o("circle.radius"),"line"===i&&(o("line.width"),o("line.dash")),"fill"===i&&o("fill.outlinecolor"),"symbol"===i&&(o("symbol.icon"),o("symbol.iconsize"),o("symbol.text"),M.coerceFont(o,"symbol.textfont"),o("symbol.textposition"),o("symbol.placement"))}}$.exports=function(s,e,o){k(s,e,o,{type:"mapbox",attributes:T,handleDefaults:x,partition:"y",accessToken:e._mapboxAccessToken})}},10481:function($,I,t){"use strict";var M=t(44517),k=t(71828),l=t(41327),T=t(73972),x=t(89298),p=t(28569),s=t(30211),e=t(64505),o=e.drawMode,r=e.selectMode,n=t(47322).prepSelect,a=t(47322).clearOutline,i=t(47322).clearSelectionsCache,c=t(47322).selectOnClick,h=t(77734),f=t(67911);function b(w,u){this.id=u,this.gd=w;var S=w._fullLayout,_=w._context;this.container=S._glcontainer.node(),this.isStatic=_.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var v=b.prototype;v.plot=function(w,u,S){var _,E=this;E.map&&u[E.id].accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),_=new Promise(E.map?function(C,P){E.updateMap(w,u,C,P)}:function(C,P){E.createMap(w,u,C,P)}),S.push(_)},v.createMap=function(w,u,S,_){var E=this,L=u[E.id],C=E.styleObj=y(L.style);E.accessToken=L.accesstoken;var P=L.bounds,z=P?[[P.west,P.south],[P.east,P.north]]:null,j=E.map=new M.Map({container:E.div,style:C.style,center:m(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));j._canvas.style.left="0px",j._canvas.style.top="0px",E.rejectOnError(_),E.isStatic||E.initFx(w,u);var R=[];R.push(new Promise(function(V){j.once("load",V)})),R=R.concat(l.fetchTraceGeoData(w)),Promise.all(R).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.updateMap=function(w,u,S,_){var E=this,L=E.map,C=u[this.id];E.rejectOnError(_);var P=[],z=y(C.style);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,L.setStyle(z.style),E.traceHash={},P.push(new Promise(function(j){L.once("styledata",j)}))),P=P.concat(l.fetchTraceGeoData(w)),Promise.all(P).then(function(){E.fillBelowLookup(w,u),E.updateData(w),E.updateLayout(u),E.resolveOnRender(S)}).catch(_)},v.fillBelowLookup=function(w,u){var S,_,E=u[this.id].layers,L=this.belowLookup={},C=!1;for(S=0;S<w.length;S++){var P=w[S][0].trace,z=P._module;"string"==typeof P.below?_=P.below:z.getBelow&&(_=z.getBelow(P,this)),""===_&&(C=!0),L["trace-"+P.uid]=_||""}for(S=0;S<E.length;S++){var j=E[S];L["layout-"+S]=_="string"==typeof j.below?j.below:C?"traces":""}var R,V,D={};for(R in L)D[_=L[R]]?D[_].push(R):D[_]=[R];for(_ in D){var B=D[_];if(B.length>1)for(S=0;S<B.length;S++)0===(R=B[S]).indexOf("trace-")?(V=R.split("trace-")[1],this.traceHash[V]&&(this.traceHash[V].below=null)):0===R.indexOf("layout-")&&(V=R.split("layout-")[1],this.layerList[V]&&(this.layerList[V].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function y(w){var u={};return k.isPlainObject(w)?(u.id=w.id,u.style=w):"string"==typeof w?(u.id=w,u.style=-1!==h.styleValuesMapbox.indexOf(w)?d(w):h.stylesNonMapbox[w]?h.stylesNonMapbox[w]:w):(u.id=h.styleValueDflt,u.style=d(h.styleValueDflt)),u.transition={duration:0,delay:0},u}function d(w){return h.styleUrlPrefix+w+"-"+h.styleUrlSuffix}function m(w){return[w.lon,w.lat]}v.updateData=function(w){var u,S,_,E,L=this.traceHash,C=w.slice().sort(function(V,D){return g[V[0].trace.type]-g[D[0].trace.type]});for(_=0;_<C.length;_++){var P=C[_],z=!1;(u=L[(S=P[0].trace).uid])&&(u.type===S.type?(u.update(P),z=!0):u.dispose()),!z&&S._module&&(L[S.uid]=S._module.plot(this,P))}var j=Object.keys(L);e:for(_=0;_<j.length;_++){var R=j[_];for(E=0;E<w.length;E++)if(R===(S=w[E][0].trace).uid)continue e;(u=L[R]).dispose(),delete L[R]}},v.updateLayout=function(w){var u=this.map,S=w[this.id];this.dragging||this.wheeling||(u.setCenter(m(S.center)),u.setZoom(S.zoom),u.setBearing(S.bearing),u.setPitch(S.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?u.scrollZoom.enable():u.scrollZoom.disable()},v.resolveOnRender=function(w){var u=this.map;u.on("render",function S(){u.loaded()&&(u.off("render",S),setTimeout(w,10))})},v.rejectOnError=function(w){var u=this.map;function S(){w(new Error(h.mapOnErrorMsg))}u.once("error",S),u.once("style.error",S),u.once("source.error",S),u.once("tile.error",S),u.once("layer.error",S)},v.createFramework=function(w){var u=this,S=u.div=document.createElement("div");S.id=u.uid,S.style.position="absolute",u.container.appendChild(S),u.xaxis={_id:"x",c2p:function(_){return u.project(_).x}},u.yaxis={_id:"y",c2p:function(_){return u.project(_).y}},u.updateFramework(w),u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},x.setConvert(u.mockAxis,w)},v.initFx=function(w,u){var S=this,_=S.gd,E=S.map;function L(){s.loneUnhover(u._hoverlayer)}function C(){var P=S.getView();_.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var z=_._fullLayout;if(P.originalEvent||S.wheeling){var j=z[S.id];T.call("_storeDirectGUIEdit",_.layout,z._preGUI,S.getViewEdits(j));var R=S.getView();j._input.center=j.center=R.center,j._input.zoom=j.zoom=R.zoom,j._input.bearing=j.bearing=R.bearing,j._input.pitch=j.pitch=R.pitch,_.emit("plotly_relayout",S.getViewEditsWithDerived(R))}P.originalEvent&&"mouseup"===P.originalEvent.type?S.dragging=!1:S.wheeling&&(S.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var z=S.div.getBoundingClientRect(),j=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return z},S.xaxis.p2c=function(){return E.unproject(j).lng},S.yaxis.p2c=function(){return E.unproject(j).lat},_._fullLayout._rehover=function(){_._fullLayout._hoversubplot===S.id&&_._fullLayout[S.id]&&s.hover(_,P,S.id)},s.hover(_,P,S.id),_._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){_._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var P=_._fullLayout[S.id];T.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,S.getViewEdits(P));var z=S.viewInitial;E.setCenter(m(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var j=S.getView();P._input.center=P.center=j.center,P._input.zoom=P.zoom=j.zoom,P._input.bearing=P.bearing=j.bearing,P._input.pitch=P.pitch=j.pitch,_.emit("plotly_doubleclick",null),_.emit("plotly_relayout",S.getViewEditsWithDerived(j))}),S.clearOutline=function(){i(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(z){var j=_._fullLayout.clickmode;j.indexOf("select")>-1&&c(z.originalEvent,_,[S.xaxis],[S.yaxis],S.id,P),j.indexOf("event")>-1&&s.click(_,z.originalEvent)}}},v.updateFx=function(w){var u=this,S=u.map;if(!u.isStatic){var L=w.dragmode;u.dragOptions=k.extendDeep(u.dragOptions||{},{dragmode:w.dragmode,element:u.div,gd:u.gd,plotinfo:{id:u.id,domain:w[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:function(z,j){j.isRect?(z.range={})[u.id]=[P([j.xmin,j.ymin]),P([j.xmax,j.ymax])]:(z.lassoPoints={})[u.id]=j.map(P)}},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id}),S.off("click",u.onClickInPanHandler),r(L)||o(L)?(S.dragPan.disable(),S.on("zoomstart",u.clearOutline),u.dragOptions.prepFn=function(z,j,R){n(z,j,R,u.dragOptions,L)},p.init(u.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",u.clearOutline),u.div.onmousedown=null,u.div.ontouchstart=null,u.div.removeEventListener("touchstart",u.div._ontouchstart),u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),S.on("click",u.onClickInPanHandler))}function P(z){var j=u.map.unproject(z);return[j.lng,j.lat]}},v.updateFramework=function(w){var u=w[this.id].domain,S=w._size,_=this.div.style;_.width=S.w*(u.x[1]-u.x[0])+"px",_.height=S.h*(u.y[1]-u.y[0])+"px",_.left=S.l+u.x[0]*S.w+"px",_.top=S.t+(1-u.y[1])*S.h+"px",this.xaxis._offset=S.l+u.x[0]*S.w,this.xaxis._length=S.w*(u.x[1]-u.x[0]),this.yaxis._offset=S.t+(1-u.y[1])*S.h,this.yaxis._length=S.h*(u.y[1]-u.y[0])},v.updateLayers=function(w){var u,S=w[this.id].layers,_=this.layerList;if(S.length!==_.length){for(u=0;u<_.length;u++)_[u].dispose();for(_=this.layerList=[],u=0;u<S.length;u++)_.push(f(this,u,S[u]))}else for(u=0;u<S.length;u++)_[u].update(S[u])},v.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},v.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},v.setOptions=function(w,u,S){for(var _ in S)this.map[u](w,_,S[_])},v.getMapLayers=function(){return this.map.getStyle().layers},v.addLayer=function(w,u){var S=this.map;if("string"==typeof u){if(""===u)return void S.addLayer(w,u);for(var _=this.getMapLayers(),E=0;E<_.length;E++)if(u===_[E].id)return void S.addLayer(w,u);k.warn(["Trying to add layer with *below* value",u,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(w)},v.project=function(w){return this.map.project(new M.LngLat(w[0],w[1]))},v.getView=function(){var w=this.map,u=w.getCenter(),S={lon:u.lng,lat:u.lat},_=w.getCanvas(),E=parseInt(_.style.width),L=parseInt(_.style.height);return{center:S,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([E,0]).toArray(),w.unproject([E,L]).toArray(),w.unproject([0,L]).toArray()]}}},v.getViewEdits=function(w){for(var u=this.id,S=["center","zoom","bearing","pitch"],_={},E=0;E<S.length;E++){var L=S[E];_[u+"."+L]=w[L]}return _},v.getViewEditsWithDerived=function(w){var u=this.id,S=this.getViewEdits(w);return S[u+"._derived"]=w._derived,S},$.exports=b},35025:function($){"use strict";$.exports=function(I){var t=I.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},74875:function($,I,t){"use strict";var M=t(39898),k=t(84096).Dq,l=t(60721).FF,T=t(92770),x=t(73972),p=t(86281),s=t(44467),e=t(71828),o=t(7901),r=t(50606).BADNUM,n=t(41675),a=t(51873).clearOutline,i=t(21479),c=t(85594),h=t(31391),f=t(27659).a0,b=e.relinkPrivateKeys,v=e._,g=$.exports={};e.extendFlat(g,x),g.attributes=t(9012),g.attributes.type.values=g.allTypes,g.fontAttrs=t(41940),g.layoutAttributes=t(10820),g.fontWeight="normal";var y=g.transformsRegistry,d=t(31137);g.executeAPICommand=d.executeAPICommand,g.computeAPICommandBindings=d.computeAPICommandBindings,g.manageCommandObserver=d.manageCommandObserver,g.hasSimpleAPICommandBindings=d.hasSimpleAPICommandBindings,g.redrawText=function(D){return D=e.getGraphDiv(D),new Promise(function(B){setTimeout(function(){D._fullLayout&&(x.getComponentMethod("annotations","draw")(D),x.getComponentMethod("legend","draw")(D),x.getComponentMethod("colorbar","draw")(D),B(g.previousPromises(D)))},300)})},g.resize=function(D){var B;D=e.getGraphDiv(D);var N=new Promise(function(U,J){D&&!e.isHidden(D)||J(new Error("Resize must be passed a displayed plot div element.")),D._redrawTimer&&clearTimeout(D._redrawTimer),D._resolveResize&&(B=D._resolveResize),D._resolveResize=U,D._redrawTimer=setTimeout(function(){if(!D.layout||D.layout.width&&D.layout.height||e.isHidden(D))U(D);else{delete D.layout.width,delete D.layout.height;var Y=D.changed;D.autoplay=!0,x.call("relayout",D,{autosize:!0}).then(function(){D.changed=Y,D._resolveResize===U&&(delete D._resolveResize,U(D))})}},100)});return B&&B(N),N},g.previousPromises=function(D){if((D._promises||[]).length)return Promise.all(D._promises).then(function(){D._promises=[]})},g.addLinks=function(D){if(D._context.showLink||D._context.showSources){var B=D._fullLayout,N=e.ensureSingle(B._paper,"text","js-plot-link-container",function(X){X.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var Q=M.select(this);Q.append("tspan").classed("js-link-to-tool",!0),Q.append("tspan").classed("js-link-spacer",!0),Q.append("tspan").classed("js-sourcelinks",!0)})}),U=N.node(),J={y:B._paper.attr("height")-9};document.body.contains(U)&&U.getComputedTextLength()>=B.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=B._paper.attr("width")-7),N.attr(J);var Y=N.select(".js-link-to-tool"),q=N.select(".js-link-spacer"),H=N.select(".js-sourcelinks");D._context.showSources&&D._context.showSources(D),D._context.showLink&&function(X,Q){Q.text("");var ne=Q.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(X._context.linkText+" "+String.fromCharCode(187));if(X._context.sendData)ne.on("click",function(){g.sendDataToCloud(X)});else{var re=window.location.pathname.split("/"),ae=window.location.search;ne.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ae})}}(D,Y),q.text(Y.text()&&H.text()?" - ":"")}},g.sendDataToCloud=function(D){var B=(window.PLOTLYENV||{}).BASE_URL||D._context.plotlyServerURL;if(B){D.emit("plotly_beforeexport");var N=M.select(D).append("div").attr("id","hiddenform").style("display","none"),U=N.append("form").attr({action:B+"/external",method:"post",target:"_blank"});return U.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(D,!1,"keepdata"),U.node().submit(),N.remove(),D.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],w=["year","month","dayMonth","dayMonthYear"];function u(D,B){var N=D._context.locale;N||(N="en-US");var U=!1,J={};function Y(re){for(var ae=!0,se=0;se<B.length;se++){var pe=B[se];J[pe]||(re[pe]?J[pe]=re[pe]:ae=!1)}ae&&(U=!0)}for(var q=0;q<2;q++){for(var H=D._context.locales,X=0;X<2;X++){var Q=(H[N]||{}).format;if(Q&&(Y(Q),U))break;H=x.localeRegistry}var ne=N.split("-")[0];if(U||ne===N)break;N=ne}return U||Y(x.localeRegistry.en.format),J}function S(D,B){var N={_fullLayout:B},U="x"===D._id.charAt(0),J=D._mainAxis._anchorAxis,Y="",q="",H="";if(J&&(H=J._mainAxis._id,Y=U?D._id+H:H+D._id),!Y||!B._plots[Y]){Y="";for(var X=D._counterAxes,Q=0;Q<X.length;Q++){var ne=X[Q],re=U?D._id+ne:ne+D._id;q||(q=re);var ae=n.getFromId(N,ne);if(H&&ae.overlaying===H){Y=re;break}}}return Y||q}function _(D){var B=D.transforms;if(Array.isArray(B)&&B.length)for(var N=0;N<B.length;N++){var U=B[N],J=U._module||y[U.type];if(J&&J.makesData)return!0}return!1}function E(D,B,N,U){for(var J=D.transforms,Y=[D],q=0;q<J.length;q++){var H=J[q],X=y[H.type];X&&X.transform&&(Y=X.transform(Y,{transform:H,fullTrace:D,fullData:B,layout:N,fullLayout:U,transformIndex:q}))}return Y}function L(D){return"string"==typeof D&&"px"===D.substr(D.length-2)&&parseFloat(D)}function C(D){var B=D.margin;if(!D._size){var N=D._size={l:Math.round(B.l),r:Math.round(B.r),t:Math.round(B.t),b:Math.round(B.b),p:Math.round(B.pad)};N.w=Math.round(D.width)-N.l-N.r,N.h=Math.round(D.height)-N.t-N.b}D._pushmargin||(D._pushmargin={}),D._pushmarginIds||(D._pushmarginIds={}),D._reservedMargin||(D._reservedMargin={})}g.supplyDefaults=function(D,B){var be,Ie,N=B&&B.skipUpdateCalc,U=D._fullLayout||{};if(U._skipDefaults)delete U._skipDefaults;else{var J,Y=D._fullLayout={},q=D.layout||{},H=D._fullData||[],X=D._fullData=[],Q=D.data||[],ne=D.calcdata||[],re=D._context||{};D._transitionData||g.createTransitionData(D),Y._dfltTitle={plot:v(D,"Click to enter Plot title"),x:v(D,"Click to enter X axis title"),y:v(D,"Click to enter Y axis title"),colorbar:v(D,"Click to enter Colorscale title"),annotation:v(D,"new text")},Y._traceWord=v(D,"trace");var ae=u(D,m);if(Y._mapboxAccessToken=re.mapboxAccessToken,U._initialAutoSizeIsDone){var se=U.width,pe=U.height;g.supplyLayoutGlobalDefaults(q,Y,ae),q.width||(Y.width=se),q.height||(Y.height=pe),g.sanitizeMargins(Y)}else{g.supplyLayoutGlobalDefaults(q,Y,ae);var ke=!q.width||!q.height,me=Y.autosize;ke&&(me||re.autosizable)?g.plotAutoSize(D,q,Y):ke&&g.sanitizeMargins(Y),!me&&ke&&(q.width=Y.width,q.height=Y.height)}Y._d3locale=((be=ae).decimal=(Ie=Y.separators).charAt(0),be.thousands=Ie.charAt(1),{numberFormat:function(He){try{He=l(be).format(e.adjustFormat(He))}catch{return e.warnBadFormat(He),e.noFormat}return He},timeFormat:k(be).utcFormat}),Y._extraFormat=u(D,w),Y._initialAutoSizeIsDone=!0,Y._dataLength=Q.length,Y._modules=[],Y._visibleModules=[],Y._basePlotModules=[];var ue=Y._subplots=function(){var be,Ie,He=x.collectableSubplotTypes,Ve={};if(!He){He=[];var tt=x.subplotsRegistry;for(var nt in tt){var st=tt[nt].attr;if(st&&(He.push(nt),Array.isArray(st)))for(Ie=0;Ie<st.length;Ie++)e.pushUnique(He,st[Ie])}}for(be=0;be<He.length;be++)Ve[He[be]]=[];return Ve}(),Ee=Y._splomAxes={x:{},y:{}},de=Y._splomSubplots={};Y._splomGridDflt={},Y._scatterStackOpts={},Y._firstScatter={},Y._alignmentOpts={},Y._colorAxes={},Y._requestRangeslider={},Y._traceUids=function(be,Ie){var He,Ve,tt=Ie.length,nt=[];for(He=0;He<be.length;He++){var st=be[He]._fullInput;st!==Ve&&nt.push(st),Ve=st}var dt=nt.length,wt=new Array(tt),_t={};function pt(Ot,jt){wt[jt]=Ot,_t[Ot]=1}function Pt(Ot,jt){if(Ot&&"string"==typeof Ot&&!_t[Ot])return pt(Ot,jt),!0}for(He=0;He<tt;He++){var St=Ie[He].uid;"number"==typeof St&&(St=String(St)),Pt(St,He)||He<dt&&Pt(nt[He].uid,He)||pt(e.randstr(_t),He)}return wt}(H,Q),Y._globalTransforms=(D._context||{}).globalTransforms,g.supplyDataDefaults(Q,X,q,Y);var xe=Object.keys(Ee.x),Te=Object.keys(Ee.y);if(xe.length>1&&Te.length>1){for(x.getComponentMethod("grid","sizeDefaults")(q,Y),J=0;J<xe.length;J++)e.pushUnique(ue.xaxis,xe[J]);for(J=0;J<Te.length;J++)e.pushUnique(ue.yaxis,Te[J]);for(var we in de)e.pushUnique(ue.cartesian,we)}if(Y._has=g._hasPlotType.bind(Y),H.length===X.length)for(J=0;J<X.length;J++)b(X[J],H[J]);g.supplyLayoutModuleDefaults(q,Y,X,D._transitionData);var K=Y._visibleModules,oe=[];for(J=0;J<K.length;J++){var he=K[J].crossTraceDefaults;he&&e.pushUnique(oe,he)}for(J=0;J<oe.length;J++)oe[J](X,Y);Y._hasOnlyLargeSploms=1===Y._basePlotModules.length&&"splom"===Y._basePlotModules[0].name&&xe.length>15&&Te.length>15&&0===Y.shapes.length&&0===Y.images.length,g.linkSubplots(X,Y,H,U),g.cleanPlot(X,Y,H,U);var ye=!(!U._has||!U._has("gl2d")),Me=!(!Y._has||!Y._has("gl2d")),Re=!(!U._has||!U._has("cartesian"))||ye,Pe=!(!Y._has||!Y._has("cartesian"))||Me;Re&&!Pe?U._bgLayer.remove():Pe&&!Re&&(Y._shouldCreateBgLayer=!0),U._zoomlayer&&!D._dragging&&a({_fullLayout:U}),function(be,Ie){var He,Ve=[];Ie.meta&&(He=Ie._meta={meta:Ie.meta,layout:{meta:Ie.meta}});for(var tt=0;tt<be.length;tt++){var nt=be[tt];nt.meta?Ve[nt.index]=nt._meta={meta:nt.meta}:Ie.meta&&(nt._meta={meta:Ie.meta}),Ie.meta&&(nt._meta.layout={meta:Ie.meta})}Ve.length&&(He||(He=Ie._meta={}),He.data=Ve)}(X,Y),b(Y,U),x.getComponentMethod("colorscale","crossTraceDefaults")(X,Y),Y._preGUI||(Y._preGUI={}),Y._tracePreGUI||(Y._tracePreGUI={});var De,fe=Y._tracePreGUI,ge={};for(De in fe)ge[De]="old";for(J=0;J<X.length;J++)ge[De=X[J]._fullInput.uid]||(fe[De]={}),ge[De]="new";for(De in ge)"old"===ge[De]&&delete fe[De];C(Y),x.getComponentMethod("rangeslider","makeData")(Y),N||ne.length!==X.length||g.supplyDefaultsUpdateCalc(ne,X)}},g.supplyDefaultsUpdateCalc=function(D,B){for(var N=0;N<B.length;N++){var U=B[N],J=(D[N]||[])[0];if(J&&J.trace){var Y=J.trace;if(Y._hasCalcTransform){var q,H,X,Q=Y._arrayAttrs;for(q=0;q<Q.length;q++)X=e.nestedProperty(Y,H=Q[q]).get().slice(),e.nestedProperty(U,H).set(X)}J.trace=U}}},g.createTransitionData=function(D){D._transitionData||(D._transitionData={}),D._transitionData._frames||(D._transitionData._frames=[]),D._transitionData._frameHash||(D._transitionData._frameHash={}),D._transitionData._counter||(D._transitionData._counter=0),D._transitionData._interruptCallbacks||(D._transitionData._interruptCallbacks=[])},g._hasPlotType=function(D){var B,N=this._basePlotModules||[];for(B=0;B<N.length;B++)if(N[B].name===D)return!0;var U=this._modules||[];for(B=0;B<U.length;B++){var J=U[B].name;if(J===D)return!0;var Y=x.modules[J];if(Y&&Y.categories[D])return!0}return!1},g.cleanPlot=function(D,B,N,U){var J,Y,q=U._basePlotModules||[];for(J=0;J<q.length;J++){var H=q[J];H.clean&&H.clean(D,B,N,U)}var X=U._has&&U._has("gl"),Q=B._has&&B._has("gl");X&&!Q&&void 0!==U._glcontainer&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.selectAll(".no-webgl").remove(),U._glcanvas=null);var ne=!!U._infolayer;e:for(J=0;J<N.length;J++){var re=N[J].uid;for(Y=0;Y<D.length;Y++)if(re===D[Y].uid)continue e;ne&&U._infolayer.select(".cb"+re).remove()}},g.linkSubplots=function(D,B,N,U){var J,Y,q=U._plots||{},H=B._plots={},X=B._subplots,Q={_fullData:D,_fullLayout:B},ne=X.cartesian.concat(X.gl2d||[]);for(J=0;J<ne.length;J++){var re,ae=ne[J],se=q[ae],pe=n.getFromId(Q,ae,"x"),ke=n.getFromId(Q,ae,"y");for(se?re=H[ae]=se:(re=H[ae]={}).id=ae,pe._counterAxes.push(ke._id),ke._counterAxes.push(pe._id),pe._subplotsWith.push(ae),ke._subplotsWith.push(ae),re.xaxis=pe,re.yaxis=ke,re._hasClipOnAxisFalse=!1,Y=0;Y<D.length;Y++){var me=D[Y];if(me.xaxis===re.xaxis._id&&me.yaxis===re.yaxis._id&&!1===me.cliponaxis){re._hasClipOnAxisFalse=!0;break}}}var le,ue=n.list(Q,null,!0);for(J=0;J<ue.length;J++){var Ee=null;(le=ue[J]).overlaying&&(Ee=n.getFromId(Q,le.overlaying))&&Ee.overlaying&&(le.overlaying=!1,Ee=null),le._mainAxis=Ee||le,Ee&&(le.domain=Ee.domain.slice()),le._anchorAxis="free"===le.anchor?null:n.getFromId(Q,le.anchor)}for(J=0;J<ue.length;J++)if((le=ue[J])._counterAxes.sort(n.idSort),le._subplotsWith.sort(e.subplotSort),le._mainSubplot=S(le,B),le._counterAxes.length&&(le.spikemode&&-1!==le.spikemode.indexOf("across")||le.automargin&&le.mirror&&"free"!==le.anchor||x.getComponentMethod("rangeslider","isVisible")(le))){var de=1,xe=0;for(Y=0;Y<le._counterAxes.length;Y++){var Te=n.getFromId(Q,le._counterAxes[Y]);de=Math.min(de,Te.domain[0]),xe=Math.max(xe,Te.domain[1])}de<xe&&(le._counterDomainMin=de,le._counterDomainMax=xe)}},g.clearExpandedTraceDefaultColors=function(D){var B,N,U;for(N=[],(B=D._module._colorAttrs)||(D._module._colorAttrs=B=[],p.crawl(D._module.attributes,function(J,Y,q,H){N[H]=Y,N.length=H+1,"color"===J.valType&&void 0===J.dflt&&B.push(N.join("."))})),U=0;U<B.length;U++)e.nestedProperty(D,"_input."+B[U]).get()||e.nestedProperty(D,B[U]).set(null)},g.supplyDataDefaults=function(D,B,N,U){var J,Y,q,H=U._modules,X=U._visibleModules,Q=U._basePlotModules,ne=0,re=0;function ae(we){B.push(we);var K=we._module;K&&(e.pushUnique(H,K),!0===we.visible&&e.pushUnique(X,K),e.pushUnique(Q,we._module.basePlotModule),ne++,!1!==we._input.visible&&re++)}U._transformModules=[];var se={},pe=[],me=s.traceTemplater((N.template||{}).data||{});for(J=0;J<D.length;J++){if((Y=me.newTrace(q=D[J])).uid=U._traceUids[J],g.supplyTraceDefaults(q,Y,re,U,J),Y.index=J,Y._input=q,Y._expandedIndex=ne,Y.transforms&&Y.transforms.length)for(var le=!1!==q.visible&&!1===Y.visible,ue=E(Y,B,N,U),Ee=0;Ee<ue.length;Ee++){var de=ue[Ee],xe={_template:Y._template,type:Y.type,uid:Y.uid+Ee};le&&!1===de.visible&&delete de.visible,g.supplyTraceDefaults(de,xe,ne,U,J),b(xe,de),xe.index=J,xe._input=q,xe._fullInput=Y,xe._expandedIndex=ne,xe._expandedInput=de,ae(xe)}else Y._fullInput=Y,Y._expandedInput=Y,ae(Y);x.traceIs(Y,"carpetAxis")&&(se[Y.carpet]=Y),x.traceIs(Y,"carpetDependent")&&pe.push(J)}for(J=0;J<pe.length;J++)if((Y=B[pe[J]]).visible){var Te=se[Y.carpet];Y._carpet=Te,Te&&Te.visible?(Y.xaxis=Te.xaxis,Y.yaxis=Te.yaxis):Y.visible=!1}},g.supplyAnimationDefaults=function(D){var B;D=D||{};var N={};function U(J,Y){return e.coerce(D||{},N,c,J,Y)}if(U("mode"),U("direction"),U("fromcurrent"),Array.isArray(D.frame))for(N.frame=[],B=0;B<D.frame.length;B++)N.frame[B]=g.supplyAnimationFrameDefaults(D.frame[B]||{});else N.frame=g.supplyAnimationFrameDefaults(D.frame||{});if(Array.isArray(D.transition))for(N.transition=[],B=0;B<D.transition.length;B++)N.transition[B]=g.supplyAnimationTransitionDefaults(D.transition[B]||{});else N.transition=g.supplyAnimationTransitionDefaults(D.transition||{});return N},g.supplyAnimationFrameDefaults=function(D){var B={};function N(U,J){return e.coerce(D||{},B,c.frame,U,J)}return N("duration"),N("redraw"),B},g.supplyAnimationTransitionDefaults=function(D){var B={};function N(U,J){return e.coerce(D||{},B,c.transition,U,J)}return N("duration"),N("easing"),B},g.supplyFrameDefaults=function(D){var B={};function N(U,J){return e.coerce(D,B,h,U,J)}return N("group"),N("name"),N("traces"),N("baseframe"),N("data"),N("layout"),B},g.supplyTraceDefaults=function(D,B,N,U,J){var Y,q=U.colorway||o.defaults,H=q[N%q.length];function X(ue,Ee){return e.coerce(D,B,g.attributes,ue,Ee)}var Q=X("visible");X("type"),X("name",U._traceWord+" "+J),X("uirevision",U.uirevision);var ne=g.getModule(B);if(B._module=ne,ne){var re=ne.basePlotModule,ae=re.attr,se=re.attributes;if(ae&&se){var pe=U._subplots,ke="";if(Q||"gl2d"!==re.name){if(Array.isArray(ae))for(Y=0;Y<ae.length;Y++){var me=ae[Y],le=e.coerce(D,B,se,me);pe[me]&&e.pushUnique(pe[me],le),ke+=le}else ke=e.coerce(D,B,se,ae);pe[re.name]&&e.pushUnique(pe[re.name],ke)}}}return Q&&(X("customdata"),X("ids"),X("meta"),x.traceIs(B,"showLegend")?(e.coerce(D,B,ne.attributes.showlegend?ne.attributes:g.attributes,"showlegend"),X("legendwidth"),X("legendgroup"),X("legendgrouptitle.text"),X("legendrank"),B._dfltShowLegend=!0):B._dfltShowLegend=!1,ne&&ne.supplyDefaults(D,B,H,U),x.traceIs(B,"noOpacity")||X("opacity"),x.traceIs(B,"notLegendIsolatable")&&(B.visible=!!B.visible),x.traceIs(B,"noHover")||(B.hovertemplate||e.coerceHoverinfo(D,B,U),"parcats"!==B.type&&x.getComponentMethod("fx","supplyDefaults")(D,B,H,U)),ne&&ne.selectPoints&&X("selectedpoints"),g.supplyTransformDefaults(D,B,U)),B},g.hasMakesDataTransform=_,g.supplyTransformDefaults=function(D,B,N){if(B._length||_(D)){var U=N._globalTransforms||[],J=N._transformModules||[];if(Array.isArray(D.transforms)||0!==U.length)for(var q=U.concat(D.transforms||[]),H=B.transforms=[],X=0;X<q.length;X++){var Q,ne=q[X],re=ne.type,ae=y[re],se=!(ne._module&&ne._module===ae),pe=ae&&"function"==typeof ae.transform;ae||e.warn("Unrecognized transform type "+re+"."),ae&&ae.supplyDefaults&&(se||pe)?((Q=ae.supplyDefaults(ne,B,N,D)).type=re,Q._module=ae,e.pushUnique(J,ae)):Q=e.extendFlat({},ne),H.push(Q)}}},g.supplyLayoutGlobalDefaults=function(D,B,N){function U(ne,re){return e.coerce(D,B,g.layoutAttributes,ne,re)}var J=D.template;e.isPlainObject(J)&&(B.template=J,B._template=J.layout,B._dataTemplate=J.data),U("autotypenumbers");var Y=e.coerceFont(U,"font");e.coerceFont(U,"title.font",e.extendFlat({},Y,{size:Math.round(1.4*Y.size)})),U("title.text",B._dfltTitle.plot),U("title.xref");var H=U("title.yref");U("title.pad.t"),U("title.pad.r"),U("title.pad.b"),U("title.pad.l");var X=U("title.automargin");U("title.x"),U("title.xanchor"),U("title.y"),U("title.yanchor"),X&&("paper"===H&&(0!==B.title.y&&(B.title.y=1),"auto"===B.title.yanchor&&(B.title.yanchor=0===B.title.y?"top":"bottom")),"container"===H&&("auto"===B.title.y&&(B.title.y=1),"auto"===B.title.yanchor&&(B.title.yanchor=B.title.y<.5?"bottom":"top"))),U("uniformtext.mode")&&U("uniformtext.minsize"),U("autosize",!(D.width&&D.height)),U("width"),U("height"),U("minreducedwidth"),U("minreducedheight"),U("margin.l"),U("margin.r"),U("margin.t"),U("margin.b"),U("margin.pad"),U("margin.autoexpand"),D.width&&D.height&&g.sanitizeMargins(B),x.getComponentMethod("grid","sizeDefaults")(D,B),U("paper_bgcolor"),U("separators",N.decimal+N.thousands),U("hidesources"),U("colorway"),U("datarevision");var Q=U("uirevision");U("editrevision",Q),U("selectionrevision",Q),x.getComponentMethod("modebar","supplyLayoutDefaults")(D,B),x.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(D,B,U),x.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(D,B,U),U("meta"),e.isPlainObject(D.transition)&&(U("transition.duration"),U("transition.easing"),U("transition.ordering")),x.getComponentMethod("calendars","handleDefaults")(D,B,"calendar"),x.getComponentMethod("fx","supplyLayoutGlobalDefaults")(D,B,U),e.coerce(D,B,i,"scattermode")},g.plotAutoSize=function(D,B,N){var U,J,Y=D._context||{},q=Y.frameMargins,H=e.isPlotDiv(D);if(H&&D.emit("plotly_autosize"),Y.fillFrame)U=window.innerWidth,J=window.innerHeight,document.body.style.overflow="hidden";else{var X=H?window.getComputedStyle(D):{};if(U=L(X.width)||L(X.maxWidth)||N.width,J=L(X.height)||L(X.maxHeight)||N.height,T(q)&&q>0){var Q=1-2*q;U=Math.round(Q*U),J=Math.round(Q*J)}}var ne=g.layoutAttributes.width.min,re=g.layoutAttributes.height.min;U<ne&&(U=ne),J<re&&(J=re);var ae=!B.width&&Math.abs(N.width-U)>1,se=!B.height&&Math.abs(N.height-J)>1;(se||ae)&&(ae&&(N.width=U),se&&(N.height=J)),D._initialAutoSize||(D._initialAutoSize={width:U,height:J}),g.sanitizeMargins(N)},g.supplyLayoutModuleDefaults=function(D,B,N,U){var J,Y,q,H=x.componentsRegistry,X=B._basePlotModules,Q=x.subplotsRegistry.cartesian;for(J in H)(q=H[J]).includeBasePlot&&q.includeBasePlot(D,B);for(var ne in X.length||X.push(Q),B._has("cartesian")&&(x.getComponentMethod("grid","contentDefaults")(D,B),Q.finalizeSubplots(D,B)),B._subplots)B._subplots[ne].sort(e.subplotSort);for(Y=0;Y<X.length;Y++)(q=X[Y]).supplyLayoutDefaults&&q.supplyLayoutDefaults(D,B,N);var re=B._modules;for(Y=0;Y<re.length;Y++)(q=re[Y]).supplyLayoutDefaults&&q.supplyLayoutDefaults(D,B,N);var ae=B._transformModules;for(Y=0;Y<ae.length;Y++)(q=ae[Y]).supplyLayoutDefaults&&q.supplyLayoutDefaults(D,B,N,U);for(J in H)(q=H[J]).supplyLayoutDefaults&&q.supplyLayoutDefaults(D,B,N)},g.purge=function(D){var B=D._fullLayout||{};void 0!==B._glcontainer&&(B._glcontainer.selectAll(".gl-canvas").remove(),B._glcontainer.remove(),B._glcanvas=null),B._modeBar&&B._modeBar.destroy(),D._transitionData&&(D._transitionData._interruptCallbacks&&(D._transitionData._interruptCallbacks.length=0),D._transitionData._animationRaf&&window.cancelAnimationFrame(D._transitionData._animationRaf)),e.clearThrottle(),e.clearResponsive(D),delete D.data,delete D.layout,delete D._fullData,delete D._fullLayout,delete D.calcdata,delete D.empty,delete D.fid,delete D.undoqueue,delete D.undonum,delete D.autoplay,delete D.changed,delete D._promises,delete D._redrawTimer,delete D._hmlumcount,delete D._hmpixcount,delete D._transitionData,delete D._transitioning,delete D._initialAutoSize,delete D._transitioningWithDuration,delete D._dragging,delete D._dragged,delete D._dragdata,delete D._hoverdata,delete D._snapshotInProgress,delete D._editing,delete D._mouseDownTime,delete D._legendMouseDownTime,D.removeAllListeners&&D.removeAllListeners()},g.style=function(D){var B,N=D._fullLayout._visibleModules,U=[];for(B=0;B<N.length;B++){var J=N[B];J.style&&e.pushUnique(U,J.style)}for(B=0;B<U.length;B++)U[B](D)},g.sanitizeMargins=function(D){if(D&&D.margin){var B,N=D.width,U=D.height,J=D.margin,q=U-(J.t+J.b);N-(J.l+J.r)<0&&(B=(N-1)/(J.l+J.r),J.l=Math.floor(B*J.l),J.r=Math.floor(B*J.r)),q<0&&(B=(U-1)/(J.t+J.b),J.t=Math.floor(B*J.t),J.b=Math.floor(B*J.b))}},g.clearAutoMarginIds=function(D){D._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(D,B){D._fullLayout._pushmarginIds[B]=1},g.autoMargin=function(D,B,N){var U=D._fullLayout,J=U.width,Y=U.height,q=U.margin,X=U.minreducedheight,Q=e.constrain(J-q.l-q.r,2,U.minreducedwidth),ne=e.constrain(Y-q.t-q.b,2,X),re=Math.max(0,J-Q),ae=Math.max(0,Y-ne),se=U._pushmargin,pe=U._pushmarginIds;if(!1!==q.autoexpand){if(N){var ke=N.pad;if(void 0===ke&&(ke=Math.min(12,q.l,q.r,q.t,q.b)),re){var me=(N.l+N.r)/re;me>1&&(N.l/=me,N.r/=me)}if(ae){var le=(N.t+N.b)/ae;le>1&&(N.t/=le,N.b/=le)}se[B]={l:{val:void 0!==N.xl?N.xl:N.x,size:N.l+ke},r:{val:void 0!==N.xr?N.xr:N.x,size:N.r+ke},b:{val:void 0!==N.yb?N.yb:N.y,size:N.b+ke},t:{val:void 0!==N.yt?N.yt:N.y,size:N.t+ke}},pe[B]=1}else delete se[B],delete pe[B];if(!U._replotting)return g.doAutoMargin(D)}},g.doAutoMargin=function(D){var B=D._fullLayout,N=B.width,U=B.height;B._size||(B._size={}),C(B);var J=B._size,Y=B.margin,q={t:0,b:0,l:0,r:0},H=e.extendFlat({},J),X=D._fullLayout._reservedMargin;for(var Q in X)for(var ne in X[Q])q[ne]=Math.max(q[ne],X[Q][ne]);var ae=Y.l,se=Y.r,pe=Y.t,ke=Y.b,me=B._pushmargin,le=B._pushmarginIds,ue=B.minreducedwidth,Ee=B.minreducedheight;if(!1!==B.margin.autoexpand){for(var de in me)le[de]||delete me[de];for(var xe in me.base={l:{val:0,size:ae},r:{val:1,size:se},t:{val:1,size:pe},b:{val:0,size:ke}},me){var Te=me[xe].l||{},we=me[xe].b||{},K=Te.val,oe=Te.size,he=we.val,ye=we.size,Me=N-q.r-q.l,Re=U-q.t-q.b;for(var Pe in me){if(T(oe)&&me[Pe].r){var De=me[Pe].r.val,fe=me[Pe].r.size;if(De>K){var ge=(oe*De+(fe-Me)*K)/(De-K),be=(fe*(1-K)+(oe-Me)*(1-De))/(De-K);ge+be>ae+se&&(ae=ge,se=be)}}if(T(ye)&&me[Pe].t){var Ie=me[Pe].t.val,He=me[Pe].t.size;if(Ie>he){var Ve=(ye*Ie+(He-Re)*he)/(Ie-he),tt=(He*(1-he)+(ye-Re)*(1-Ie))/(Ie-he);Ve+tt>ke+pe&&(ke=Ve,pe=tt)}}}}}var Ot,nt=e.constrain(N-Y.l-Y.r,2,ue),st=e.constrain(U-Y.t-Y.b,2,Ee),dt=Math.max(0,N-nt),wt=Math.max(0,U-st);if(dt){var _t=(ae+se)/dt;_t>1&&(ae/=_t,se/=_t)}if(wt){var pt=(ke+pe)/wt;pt>1&&(ke/=pt,pe/=pt)}if(J.l=Math.round(ae)+q.l,J.r=Math.round(se)+q.r,J.t=Math.round(pe)+q.t,J.b=Math.round(ke)+q.b,J.p=Math.round(Y.pad),J.w=Math.round(N)-J.l-J.r,J.h=Math.round(U)-J.t-J.b,!B._replotting&&(g.didMarginChange(H,J)||function(St){if("_redrawFromAutoMarginCount"in St._fullLayout)return!1;var Ot=n.list(St,"",!0);for(var jt in Ot)if(Ot[jt].autoshift||Ot[jt].shift)return!0;return!1}(D))){"_redrawFromAutoMarginCount"in B?B._redrawFromAutoMarginCount++:B._redrawFromAutoMarginCount=1;var Pt=3*(1+Object.keys(le).length);if(B._redrawFromAutoMarginCount<Pt)return x.call("_doPlot",D);B._size=H,e.warn("Too many auto-margin redraws.")}Ot=n.list(D,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(jt){for(var Dt=0;Dt<Ot.length;Dt++){var Ye=Ot[Dt][jt];Ye&&Ye()}})};var P=["l","r","t","b","p","w","h"];function z(D,B,N){var U=!1,Y=e.syncOrAsync([g.previousPromises,function(){if(D._transitionData)return D._transitioning=!1,function(q){var H=Promise.resolve();if(!q)return H;for(;q.length;)H=H.then(q.shift());return H}(D._transitionData._interruptCallbacks)},N.prepareFn,g.rehover,g.reselect,function(){return D.emit("plotly_transitioning",[]),new Promise(function(q){D._transitioning=!0,B.duration>0&&(D._transitioningWithDuration=!0),D._transitionData._interruptCallbacks.push(function(){U=!0}),N.redraw&&D._transitionData._interruptCallbacks.push(function(){return x.call("redraw",D)}),D._transitionData._interruptCallbacks.push(function(){D.emit("plotly_transitioninterrupted",[])});var H=0,X=0;function Q(){return H++,function(){var ne;X++,U||X!==H||(ne=q,D._transitionData&&(function(re){if(re)for(;re.length;)re.shift()}(D._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(N.redraw)return x.call("redraw",D)}).then(function(){D._transitioning=!1,D._transitioningWithDuration=!1,D.emit("plotly_transitioned",[])}).then(ne)))}}N.runFn(Q),setTimeout(Q())})}],D);return Y&&Y.then||(Y=Promise.resolve()),Y.then(function(){return D})}g.didMarginChange=function(D,B){for(var N=0;N<P.length;N++){var U=P[N],J=D[U],Y=B[U];if(!T(J)||Math.abs(Y-J)>1)return!0}return!1},g.graphJson=function(D,B,N,U,J,Y){(J&&B&&!D._fullData||J&&!B&&!D._fullLayout)&&g.supplyDefaults(D);var H=J?D._fullLayout:D.layout,X=(D._transitionData||{})._frames;function Q(ae,se){if("function"==typeof ae)return se?"_function_":null;if(e.isPlainObject(ae)){var pe,ke={};return Object.keys(ae).sort().forEach(function(me){if(-1===["_","["].indexOf(me.charAt(0)))if("function"!=typeof ae[me]){if("keepdata"===N){if("src"===me.substr(me.length-3))return}else if("keepstream"===N){if("string"==typeof(pe=ae[me+"src"])&&pe.indexOf(":")>0&&!e.isPlainObject(ae.stream))return}else if("keepall"!==N&&"string"==typeof(pe=ae[me+"src"])&&pe.indexOf(":")>0)return;ke[me]=Q(ae[me],se)}else se&&(ke[me]="_function")}),ke}return Array.isArray(ae)?ae.map(function(me){return Q(me,se)}):e.isTypedArray(ae)?e.simpleMap(ae,e.identity):e.isJSDate(ae)?e.ms2DateTimeLocal(+ae):ae}var ne={data:((J?D._fullData:D.data)||[]).map(function(ae){var se=Q(ae);return B&&delete se.fit,se})};if(!B&&(ne.layout=Q(H),J)){var re=H._size;ne.layout.computed={margin:{b:re.b,l:re.l,r:re.r,t:re.t}}}return X&&(ne.frames=Q(X)),Y&&(ne.config=Q(D._context,!0)),"object"===U?ne:JSON.stringify(ne)},g.modifyFrames=function(D,B){var N,U,J,Y=D._transitionData._frames,q=D._transitionData._frameHash;for(N=0;N<B.length;N++)switch((U=B[N]).type){case"replace":var H=(Y[U.index]||{}).name,X=(J=U.value).name;Y[U.index]=q[X]=J,X!==H&&(delete q[H],q[X]=J);break;case"insert":q[(J=U.value).name]=J,Y.splice(U.index,0,J);break;case"delete":delete q[(J=Y[U.index]).name],Y.splice(U.index,1)}return Promise.resolve()},g.computeFrame=function(D,B){var N,U,J,Y,q=D._transitionData._frameHash;if(!B)throw new Error("computeFrame must be given a string frame name");var H=q[B.toString()];if(!H)return!1;for(var X=[H],Q=[H.name];H.baseframe&&(H=q[H.baseframe.toString()])&&-1===Q.indexOf(H.name);)X.push(H),Q.push(H.name);for(var ne={};H=X.pop();)if(H.layout&&(ne.layout=g.extendLayout(ne.layout,H.layout)),H.data){if(ne.data||(ne.data=[]),!(U=H.traces))for(U=[],N=0;N<H.data.length;N++)U[N]=N;for(ne.traces||(ne.traces=[]),N=0;N<H.data.length;N++)null!=(J=U[N])&&(-1===(Y=ne.traces.indexOf(J))&&(ne.traces[Y=ne.data.length]=J),ne.data[Y]=g.extendTrace(ne.data[Y],H.data[N]))}return ne},g.recomputeFrameHash=function(D){for(var B=D._transitionData._frameHash={},N=D._transitionData._frames,U=0;U<N.length;U++){var J=N[U];J&&J.name&&(B[J.name]=J)}},g.extendObjectWithContainers=function(D,B,N){var U,J,Y,q,H,X,Q,ne=e.extendDeepNoArrays({},B||{}),re=e.expandObjectPaths(ne),ae={};if(N&&N.length)for(Y=0;Y<N.length;Y++)void 0===(J=(U=e.nestedProperty(re,N[Y])).get())?e.nestedProperty(ae,N[Y]).set(null):(U.set(null),e.nestedProperty(ae,N[Y]).set(J));if(D=e.extendDeepNoArrays(D||{},re),N&&N.length)for(Y=0;Y<N.length;Y++)if(X=e.nestedProperty(ae,N[Y]).get()){for(Q=(H=e.nestedProperty(D,N[Y])).get(),Array.isArray(Q)||H.set(Q=[]),q=0;q<X.length;q++){var se=X[q];Q[q]=null===se?null:g.extendObjectWithContainers(Q[q],se)}H.set(Q)}return D},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=x.layoutArrayContainers,g.extendTrace=function(D,B){return g.extendObjectWithContainers(D,B,g.dataArrayContainers)},g.extendLayout=function(D,B){return g.extendObjectWithContainers(D,B,g.layoutArrayContainers)},g.transition=function(D,B,N,U,J,Y){var q={redraw:J.redraw},H={},X=[];return q.prepareFn=function(){for(var Q=Array.isArray(B)?B.length:0,ne=U.slice(0,Q),re=0;re<ne.length;re++){var ae=ne[re],se=D._fullData[ae]._module;if(se){if(se.animatable){var pe=se.basePlotModule.name;H[pe]||(H[pe]=[]),H[pe].push(ae)}D.data[ne[re]]=g.extendTrace(D.data[ne[re]],B[re])}}var ke=e.expandObjectPaths(e.extendDeepNoArrays({},N)),me=/^[xy]axis[0-9]*$/;for(var le in ke)me.test(le)&&delete ke[le].range;g.extendLayout(D.layout,ke),delete D.calcdata,g.supplyDefaults(D),g.doCalcdata(D);var ue=e.expandObjectPaths(N);if(ue){var Ee=D._fullLayout._plots;for(var de in Ee){var xe=Ee[de],Te=xe.xaxis,we=xe.yaxis,K=Te.range.slice(),oe=we.range.slice(),he=null,ye=null,Me=null,Re=null;Array.isArray(ue[Te._name+".range"])?he=ue[Te._name+".range"].slice():Array.isArray((ue[Te._name]||{}).range)&&(he=ue[Te._name].range.slice()),Array.isArray(ue[we._name+".range"])?ye=ue[we._name+".range"].slice():Array.isArray((ue[we._name]||{}).range)&&(ye=ue[we._name].range.slice()),K&&he&&(Te.r2l(K[0])!==Te.r2l(he[0])||Te.r2l(K[1])!==Te.r2l(he[1]))&&(Me={xr0:K,xr1:he}),oe&&ye&&(we.r2l(oe[0])!==we.r2l(ye[0])||we.r2l(oe[1])!==we.r2l(ye[1]))&&(Re={yr0:oe,yr1:ye}),(Me||Re)&&X.push(e.extendFlat({plotinfo:xe},Me,Re))}}return Promise.resolve()},q.runFn=function(Q){var ne,re,ae=D._fullLayout._basePlotModules,se=X.length;if(N)for(re=0;re<ae.length;re++)ae[re].transitionAxes&&ae[re].transitionAxes(D,X,Y,Q);for(var pe in se?((ne=e.extendFlat({},Y)).duration=0,delete H.cartesian):ne=Y,H){var ke=H[pe];D._fullData[ke[0]]._module.basePlotModule.plot(D,ke,ne,Q)}},z(D,Y,q)},g.transitionFromReact=function(D,B,N,U){var J=D._fullLayout,Y=J.transition,q={},H=[];return q.prepareFn=function(){var X=J._plots;for(var Q in q.redraw=!1,"some"===B.anim&&(q.redraw=!0),"some"===N.anim&&(q.redraw=!0),X){var ne=X[Q],re=ne.xaxis,ae=ne.yaxis,se=U[re._name].range.slice(),pe=U[ae._name].range.slice(),ke=re.range.slice(),me=ae.range.slice();re.setScale(),ae.setScale();var le=null,ue=null;re.r2l(se[0])===re.r2l(ke[0])&&re.r2l(se[1])===re.r2l(ke[1])||(le={xr0:se,xr1:ke}),ae.r2l(pe[0])===ae.r2l(me[0])&&ae.r2l(pe[1])===ae.r2l(me[1])||(ue={yr0:pe,yr1:me}),(le||ue)&&H.push(e.extendFlat({plotinfo:ne},le,ue))}return Promise.resolve()},q.runFn=function(X){for(var Q,ne,re,ae=D._fullData,se=D._fullLayout._basePlotModules,pe=[],ke=0;ke<ae.length;ke++)pe.push(ke);function me(){if(D._fullLayout)for(var ue=0;ue<se.length;ue++)se[ue].transitionAxes&&se[ue].transitionAxes(D,H,Q,X)}function le(){if(D._fullLayout)for(var ue=0;ue<se.length;ue++)se[ue].plot(D,re,ne,X)}H.length&&B.anim?"traces first"===Y.ordering?(Q=e.extendFlat({},Y,{duration:0}),re=pe,ne=Y,setTimeout(me,Y.duration),le()):(Q=Y,re=null,ne=e.extendFlat({},Y,{duration:0}),setTimeout(le,Q.duration),me()):H.length?(Q=Y,me()):B.anim&&(re=pe,ne=Y,le())},z(D,Y,q)},g.doCalcdata=function(D,B){var N,U,J,Y,q=n.list(D),H=D._fullData,X=D._fullLayout,Q=new Array(H.length),ne=(D.calcdata||[]).slice();for(D.calcdata=Q,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},D._hmpixcount=0,D._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},J=0;J<H.length;J++)Array.isArray(B)&&-1===B.indexOf(J)&&(Q[J]=ne[J]);for(J=0;J<H.length;J++)(N=H[J])._arrayAttrs=p.findArrayAttributes(N),N._extremes={};var re=X._subplots.polar||[];for(J=0;J<re.length;J++)q.push(X[re[J]].radialaxis,X[re[J]].angularaxis);for(var ae in X._colorAxes){var se=X[ae];!1!==se.cauto&&(delete se.cmin,delete se.cmax)}var pe=!1;function ke(ue){if(U=(N=H[ue])._module,!0===N.visible&&N.transforms){if(U&&U.calc){var Ee=U.calc(D,N);Ee[0]&&Ee[0].t&&Ee[0].t._scene&&delete Ee[0].t._scene.dirty}for(Y=0;Y<N.transforms.length;Y++){var de=N.transforms[Y];(U=y[de.type])&&U.calcTransform&&(N._hasCalcTransform=!0,pe=!0,U.calcTransform(D,N,de))}}}function me(ue,Ee){if(!!(U=(N=H[ue])._module).isContainer===Ee){var de=[];if(!0===N.visible&&0!==N._length){delete N._indexToPoints;var xe=N.transforms||[];for(Y=xe.length-1;Y>=0;Y--)if(xe[Y].enabled){N._indexToPoints=xe[Y]._indexToPoints;break}U&&U.calc&&(de=U.calc(D,N))}Array.isArray(de)&&de[0]||(de=[{x:r,y:r}]),de[0].t||(de[0].t={}),de[0].trace=N,Q[ue]=de}}for(R(q,H,X),J=0;J<H.length;J++)me(J,!0);for(J=0;J<H.length;J++)ke(J);for(pe&&R(q,H,X),J=0;J<H.length;J++)me(J,!0);for(J=0;J<H.length;J++)me(J,!1);V(D);var le=function(ue,Ee){var de,xe,Te,we,K,oe=[];function he(Ye,Ze,Ne){var Je=Ze._id.charAt(0);if("histogram2dcontour"===Ye){var at=Ze._counterAxes[0],Se=n.getFromId(Ee,at),ze="x"===Je||"x"===at&&"category"===Se.type,Ke="y"===Je||"y"===at&&"category"===Se.type;return function(it,ct){return 0===it||0===ct||ze&&it===Ne[ct].length-1||Ke&&ct===Ne.length-1?-1:("y"===Je?ct:it)-1}}return function(it,ct){return"y"===Je?ct:it}}var ye={min:function(Ye){return e.aggNums(Math.min,null,Ye)},max:function(Ye){return e.aggNums(Math.max,null,Ye)},sum:function(Ye){return e.aggNums(function(Ze,Ne){return Ze+Ne},null,Ye)},total:function(Ye){return e.aggNums(function(Ze,Ne){return Ze+Ne},null,Ye)},mean:function(Ye){return e.mean(Ye)},median:function(Ye){return e.median(Ye)}};for(de=0;de<ue.length;de++){var Me=ue[de];if("category"===Me.type){var Re=Me.categoryorder.match(j);if(Re){var Pe=Re[1],De=Re[2],fe=Me._id.charAt(0),ge="x"===fe,be=[];for(xe=0;xe<Me._categories.length;xe++)be.push([Me._categories[xe],[]]);for(xe=0;xe<Me._traceIndices.length;xe++){var Ie=Me._traceIndices[xe],He=Ee._fullData[Ie];if(!0===He.visible){var Ve=He.type;x.traceIs(He,"histogram")&&(delete He._xautoBinFinished,delete He._yautoBinFinished);var tt="splom"===Ve,nt="scattergl"===Ve,st=Ee.calcdata[Ie];for(Te=0;Te<st.length;Te++){var dt,wt,_t=st[Te];if(tt){var pt=He._axesDim[Me._id];if(!ge){var Pt=He._diag[pt][0];Pt&&(Me=Ee._fullLayout[n.id2name(Pt)])}var St=_t.trace.dimensions[pt].values;for(we=0;we<St.length;we++)for(dt=Me._categoriesMap[St[we]],K=0;K<_t.trace.dimensions.length;K++)K!==pt&&be[dt][1].push(_t.trace.dimensions[K].values[we])}else if(nt){for(we=0;we<_t.t.x.length;we++)ge?(dt=_t.t.x[we],wt=_t.t.y[we]):(dt=_t.t.y[we],wt=_t.t.x[we]),be[dt][1].push(wt);_t.t&&_t.t._scene&&delete _t.t._scene.dirty}else if(_t.hasOwnProperty("z")){var jt=he(He.type,Me,wt=_t.z);for(we=0;we<wt.length;we++)for(K=0;K<wt[we].length;K++)(dt=jt(K,we))+1&&be[dt][1].push(wt[we][K])}else for(void 0===(dt=_t.p)&&(dt=_t[fe]),void 0===(wt=_t.s)&&(wt=_t.v),void 0===wt&&(wt=ge?_t.y:_t.x),Array.isArray(wt)||(wt=void 0===wt?[]:[wt]),we=0;we<wt.length;we++)be[dt][1].push(wt[we])}}}Me._categoriesValue=be;var Dt=[];for(xe=0;xe<be.length;xe++)Dt.push([be[xe][0],ye[Pe](be[xe][1])]);Dt.sort(function(Ye,Ze){return Ye[1]-Ze[1]}),Me._categoriesAggregatedValue=Dt,Me._initialCategories=Dt.map(function(Ye){return Ye[0]}),"descending"===De&&Me._initialCategories.reverse(),oe=oe.concat(Me.sortByInitialCategories())}}}return oe}(q,D);if(le.length){for(X._numBoxes=0,X._numViolins=0,J=0;J<le.length;J++)me(le[J],!0);for(J=0;J<le.length;J++)me(le[J],!1);V(D)}x.getComponentMethod("fx","calc")(D),x.getComponentMethod("errorbars","calc")(D)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function R(D,B,N){var U={};function J(X){X.clearCalc(),"multicategory"===X.type&&X.setupMultiCategory(B),U[X._id]=1}e.simpleMap(D,J);for(var Y=N._axisMatchGroups||[],q=0;q<Y.length;q++)for(var H in Y[q])U[H]||J(N[n.id2name(H)])}function V(D){var B,N,U,J=D._fullLayout,Y=J._visibleModules,q={};for(N=0;N<Y.length;N++){var H=Y[N],X=H.crossTraceCalc;if(X){var Q=H.basePlotModule.name;q[Q]?e.pushUnique(q[Q],X):q[Q]=[X]}}for(U in q){var ne=q[U],re=J._subplots[U];if(Array.isArray(re))for(B=0;B<re.length;B++){var ae=re[B],se="cartesian"===U?J._plots[ae]:J[ae];for(N=0;N<ne.length;N++)ne[N](D,se,ae)}else for(N=0;N<ne.length;N++)ne[N](D)}}g.rehover=function(D){D._fullLayout._rehover&&D._fullLayout._rehover()},g.redrag=function(D){D._fullLayout._redrag&&D._fullLayout._redrag()},g.reselect=function(D){var B=D._fullLayout,N=(D.layout||{}).selections,U=B._previousSelections;B._previousSelections=N;var J=B._reselect||JSON.stringify(N)!==JSON.stringify(U);x.getComponentMethod("selections","reselect")(D,J)},g.generalUpdatePerTraceModule=function(D,B,N,U){var J,Y=B.traceHash,q={};for(J=0;J<N.length;J++){var H=N[J],X=H[0].trace;X.visible&&(q[X.type]=q[X.type]||[],q[X.type].push(H))}for(var Q in Y)if(!q[Q]){var ne=Y[Q][0];ne[0].trace.visible=!1,q[Q]=[ne]}for(var re in q){var ae=q[re];ae[0][0].trace._module.plot(D,B,e.filterVisible(ae),U)}B.traceHash=q},g.plotBasePlot=function(D,B,N,U,J){var Y=x.getModule(D),q=f(B.calcdata,Y)[0];Y.plot(B,q,U,J)},g.cleanBasePlot=function(D,B,N,U,J){var Y=J._has&&J._has(D),q=N._has&&N._has(D);Y&&!q&&J["_"+D+"layer"].selectAll("g.trace").remove()}},9813:function($){"use strict";$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function($,I,t){"use strict";var M=t(71828),k=t(61082).tester,l=M.findIndexOfMin,T=M.isAngleInsideSector,x=M.angleDelta,p=M.angleDist;function s(n,a,i,c){var h,f,b=c[0],v=c[1],g=o(Math.sin(a)-Math.sin(n)),y=o(Math.cos(a)-Math.cos(n)),d=Math.tan(i),m=o(1/d),w=g/y,u=v-w*b;return m?g&&y?f=d*(h=u/(d-w)):y?(h=v*m,f=v):(h=b,f=b*d):g&&y?(h=0,f=u):y?(h=0,f=v):h=f=NaN,[h,f]}function e(n,a,i,c){return M.isFullCircle([a,i])?function(h,f){var b,v=f.length,g=new Array(v+1);for(b=0;b<v;b++){var y=f[b];g[b]=[h*Math.cos(y),h*Math.sin(y)]}return g[b]=g[0].slice(),g}(n,c):function(h,f,b,v){var g,y,d=v.length,m=[];function w(j){return[h*Math.cos(j),h*Math.sin(j)]}function u(j,R,V){return s(j,R,V,w(j))}function S(j){return M.mod(j,d)}function _(j){return T(j,[f,b])}var E=l(v,function(j){return _(j)?p(j,f):1/0}),L=u(v[E],v[S(E-1)],f);for(m.push(L),g=E,y=0;y<d;g++,y++){var C=v[S(g)];if(!_(C))break;m.push(w(C))}var P=l(v,function(j){return _(j)?p(j,b):1/0}),z=u(v[P],v[S(P+1)],b);return m.push(z),m.push([0,0]),m.push(m[0].slice()),m}(n,a,i,c)}function o(n){return Math.abs(n)>1e-10?n:0}function r(n,a,i){a=a||0,i=i||0;for(var c=n.length,h=new Array(c),f=0;f<c;f++){var b=n[f];h[f]=[a+b[0],i-b[1]]}return h}$.exports={isPtInsidePolygon:function(n,a,i,c,h){if(!T(a,c))return!1;var f,b;i[0]<i[1]?(f=i[0],b=i[1]):(f=i[1],b=i[0]);var v=k(e(f,c[0],c[1],h)),g=k(e(b,c[0],c[1],h)),y=[n*Math.cos(a),n*Math.sin(a)];return g.contains(y)&&!v.contains(y)},findPolygonOffset:function(n,a,i,c){for(var h=1/0,f=1/0,b=e(n,a,i,c),v=0;v<b.length;v++){var g=b[v];h=Math.min(h,g[0]),f=Math.min(f,-g[1])}return[h,f]},findEnclosingVertexAngles:function(n,a){var i=l(a,function(h){var f=x(h,n);return f>0?f:1/0}),c=M.mod(i+1,a.length);return[a[i],a[c]]},findIntersectionXY:s,findXYatLength:function(n,a,i,c){var h=-a*i,f=a*a+1,b=2*(a*h-i),g=Math.sqrt(b*b-4*f*(h*h+i*i-n*n)),y=(-b+g)/(2*f),d=(-b-g)/(2*f);return[[y,a*y+h+c],[d,a*d+h+c]]},clampTiny:o,pathPolygon:function(n,a,i,c,h,f){return"M"+r(e(n,a,i,c),h,f).join("L")},pathPolygonAnnulus:function(n,a,i,c,h,f,b){var v,g;n<a?(v=n,g=a):(v=a,g=n);var y=r(e(v,i,c,h),f,b);return"M"+r(e(g,i,c,h),f,b).reverse().join("L")+"M"+y.join("L")}}},23580:function($,I,t){"use strict";var M=t(27659).AU,k=t(71828).counterRegex,l=t(77997),T=t(9813),x=T.attr,p=T.name,s=k(p),e={};e[x]={valType:"subplotid",dflt:p,editType:"calc"},$.exports={attr:x,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:e,layoutAttributes:t(73812),supplyLayoutDefaults:t(68993),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[p],i=0;i<a.length;i++){var c=a[i],h=M(n,p,c),f=r[c]._subplot;f||(f=l(o,c),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[p]||[],c=a._has&&a._has("gl"),h=r._has&&r._has("gl"),f=c&&!h,b=0;b<i.length;b++){var v=i[b],g=a[v]._subplot;if(!r[v]&&g)for(var y in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[y].remove();f&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:t(93612).toSVG}},73812:function($,I,t){"use strict";var M=t(22399),k=t(13838),l=t(27670).Y,T=t(71828).extendFlat,x=t(30962).overrideAll,p=x({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=x({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),e={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(e,p,s);var o={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(o,p,s),$.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:e,angularaxis:o,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(44467),T=t(49119),x=t(27659).NG,p=t(26218),s=t(38701),e=t(96115),o=t(89426),r=t(15258),n=t(92128),a=t(4322),i=t(73812),c=t(12101),h=t(9813),f=h.axisNames;function b(g,y,d,m){var w=d("bgcolor");m.bgColor=k.combine(w,m.paper_bgcolor);var u=d("sector");d("hole");var S,_=x(m.fullData,h.name,m.id),E=m.layoutOut;function L(X,Q){return d(S+"."+X,Q)}for(var C=0;C<f.length;C++){M.isPlainObject(g[S=f[C]])||(g[S]={});var P=g[S],z=l.newContainer(y,S);z._id=z._name=S,z._attr=m.id+"."+S,z._traceIndices=_.map(function(X){return X._expandedIndex});var j=h.axisName2dataArray[S],R=v(P,z,L,_,j,m);r(P,z,L,{axData:_,dataAttr:j});var V=L("visible");switch(c(z,y,E),L("uirevision",y.uirevision),z._m=1,S){case"radialaxis":var D=L("autorange",!z.isValidRange(P.range));P.autorange=D,!D||"linear"!==R&&"-"!==R||L("rangemode"),"reversed"===D&&(z._m=-1),L("range"),z.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===R){M.log("Polar plots do not support date angular axes yet.");for(var B=0;B<_.length;B++)_[B].visible=!1;R=P.type=z.type="linear"}L("linear"===R?"thetaunit":"period");var N=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[N])}if(o(P,z,L,z.type,{tickSuffixDflt:"degrees"===z.thetaunit?"\xb0":void 0}),V){var U,J,Y,q,H=m.font||{};J=(U=L("color"))===P.color?U:H.color,Y=H.size,q=H.family,p(P,z,L,z.type),e(P,z,L,z.type,{font:{color:J,size:Y,family:q}}),s(P,z,L,{outerTicks:!0}),n(P,z,L,{dfltColor:U,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[S]}),L("layer"),"radialaxis"===S&&(L("side"),L("angle",u[0]),L("title.text"),M.coerceFont(L,"title.font",{color:J,size:M.bigFont(Y),family:q}))}"category"!==R&&L("hoverformat"),z._input=P}"category"===y.angularaxis.type&&d("gridshape")}function v(g,y,d,m,w,u){var S=d("autotypenumbers",u.autotypenumbersDflt);if("-"===d("type")){for(var _,E=0;E<m.length;E++)if(m[E].visible){_=m[E];break}_&&_[w]&&(y.type=a(_[w],"gregorian",{noMultiCategory:!0,autotypenumbers:S})),"-"===y.type?y.type="linear":g.type=y.type}return y.type}$.exports=function(g,y,d){T(g,y,d,{type:h.name,attributes:i,handleDefaults:b,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:d,layoutOut:y})}},77997:function($,I,t){"use strict";var M=t(39898),k=t(84267),l=t(73972),T=t(71828),x=T.strRotate,p=T.strTranslate,s=t(7901),e=t(91424),o=t(74875),r=t(89298),n=t(21994),a=t(12101),i=t(71739).doAutoRange,c=t(29323),h=t(28569),f=t(30211),b=t(92998),v=t(47322).prepSelect,g=t(47322).selectOnClick,y=t(47322).clearOutline,d=t(6964),m=t(33306),w=t(61549).redrawReglTraces,u=t(18783).MID_SHIFT,S=t(9813),_=t(10869),E=t(23893),L=E.smith,C=E.reactanceArc,P=E.resistanceArc,z=E.smithTransform,j=T._,R=T.mod,V=T.deg2rad,D=T.rad2deg;function B(q,H,X){this.isSmith=X||!1,this.id=H,this.gd=q,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Q=q._fullLayout;this.clipIds.forTraces="clip"+Q._uid+H+"-for-traces",this.clipPaths.forTraces=Q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Q["_"+(X?"smith":"polar")+"layer"].append("g").attr("class",H),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},X||(this.radialTickLayout=null,this.angularTickLayout=null)}var N=B.prototype;function U(q){var H=q.ticks+String(q.ticklen)+String(q.showticklabels);return"side"in q&&(H+=q.side),H}function J(q,H){return H[T.findIndexOfMin(H,function(X){return T.angleDist(q,X)})]}function Y(q,H,X){return H?(q.attr("display",null),q.attr(X)):q&&q.attr("display","none"),q}$.exports=function(q,H,X){return new B(q,H,X)},N.plot=function(q,H){for(var X=this,Q=H[X.id],ne=!1,re=0;re<q.length;re++)if(!1===q[re][0].trace.cliponaxis){ne=!0;break}X._hasClipOnAxisFalse=ne,X.updateLayers(H,Q),X.updateLayout(H,Q),o.generalUpdatePerTraceModule(X.gd,X,q,Q),X.updateFx(H,Q),X.isSmith&&(delete Q.realaxis.range,delete Q.imaginaryaxis.range)},N.updateLayers=function(q,H){var X=this,Q=X.isSmith,ne=X.layers,re=X.getRadial(H),ae=X.getAngular(H),se=S.layerNames,pe=se.indexOf("frontplot"),ke=se.slice(0,pe),me="below traces"===ae.layer,le="below traces"===re.layer;me&&ke.push("angular-line"),le&&ke.push("radial-line"),me&&ke.push("angular-axis"),le&&ke.push("radial-axis"),ke.push("frontplot"),me||ke.push("angular-line"),le||ke.push("radial-line"),me||ke.push("angular-axis"),le||ke.push("radial-axis");var ue=(Q?"smith":"polar")+"sublayer",Ee=X.framework.selectAll("."+ue).data(ke,String);Ee.enter().append("g").attr("class",function(de){return ue+" "+de}).each(function(de){var xe=ne[de]=M.select(this);switch(de){case"frontplot":Q||xe.append("g").classed("barlayer",!0),xe.append("g").classed("scatterlayer",!0);break;case"backplot":xe.append("g").classed("maplayer",!0);break;case"plotbg":ne.bg=xe.append("path");break;case"radial-grid":case"angular-grid":xe.style("fill","none");break;case"radial-line":xe.append("line").style("fill","none");break;case"angular-line":xe.append("path").style("fill","none")}}),Ee.order()},N.updateLayout=function(q,H){var X=this,Q=X.layers,ne=q._size,re=X.getRadial(H),ae=X.getAngular(H),se=H.domain.x,pe=H.domain.y;X.xOffset=ne.l+ne.w*se[0],X.yOffset=ne.t+ne.h*(1-pe[1]);var ke=X.xLength=ne.w*(se[1]-se[0]),me=X.yLength=ne.h*(pe[1]-pe[0]),le=X.getSector(H);X.sectorInRad=le.map(V);var ue,Ee,de,xe,Te,nt,st,dt,wt,_t,pt,Pt,St,Ot,jt,we=X.sectorBBox=(wt=(nt=le)[1]-(dt=nt[0]),pt=(_t=R(dt,360))+wt,Pt=Math.cos(V(_t)),St=Math.sin(V(_t)),Ot=Math.cos(V(pt)),jt=Math.sin(V(pt)),st=_t<=90&&pt>=90||_t>90&&pt>=450?1:St<=0&&jt<=0?0:Math.max(St,jt),[_t<=180&&pt>=180||_t>180&&pt>=540?-1:Pt>=0&&Ot>=0?0:Math.min(Pt,Ot),_t<=270&&pt>=270||_t>270&&pt>=630?-1:St>=0&&jt>=0?0:Math.min(St,jt),pt>=360?1:Pt<=0&&Ot<=0?0:Math.max(Pt,Ot),st]),K=we[2]-we[0],he=me/ke,ye=Math.abs((we[3]-we[1])/K);he>ye?(ue=ke,Te=(me-(Ee=ke*ye))/ne.h/2,de=[se[0],se[1]],xe=[pe[0]+Te,pe[1]-Te]):(Ee=me,Te=(ke-(ue=me/ye))/ne.w/2,de=[se[0]+Te,se[1]-Te],xe=[pe[0],pe[1]]),X.xLength2=ue,X.yLength2=Ee,X.xDomain2=de,X.yDomain2=xe;var Me,Re=X.xOffset2=ne.l+ne.w*de[0],Pe=X.yOffset2=ne.t+ne.h*(1-xe[1]),De=X.radius=ue/K,fe=X.innerRadius=X.getHole(H)*De,ge=X.cx=Re-De*we[0],be=X.cy=Pe+De*we[3],Ie=X.cxx=ge-Re,He=X.cyy=be-Pe,Ve=re.side;"counterclockwise"===Ve?(Me=Ve,Ve="top"):"clockwise"===Ve&&(Me=Ve,Ve="bottom"),X.radialAxis=X.mockAxis(q,H,re,{_id:"x",side:Ve,_trueSide:Me,domain:[fe/ne.w,De/ne.w]}),X.angularAxis=X.mockAxis(q,H,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),X.doAutoRange(q,H),X.updateAngularAxis(q,H),X.updateRadialAxis(q,H),X.updateRadialAxisTitle(q,H),X.xaxis=X.mockCartesianAxis(q,H,{_id:"x",domain:de}),X.yaxis=X.mockCartesianAxis(q,H,{_id:"y",domain:xe});var tt=X.pathSubplot();X.clipPaths.forTraces.select("path").attr("d",tt).attr("transform",p(Ie,He)),Q.frontplot.attr("transform",p(Re,Pe)).call(e.setClipUrl,X._hasClipOnAxisFalse?null:X.clipIds.forTraces,X.gd),Q.bg.attr("d",tt).attr("transform",p(ge,be)).call(s.fill,H.bgcolor)},N.mockAxis=function(q,H,X,Q){var ne=T.extendFlat({},X,Q);return a(ne,H,q),ne},N.mockCartesianAxis=function(q,H,X){var Q=this,ne=Q.isSmith,re=X._id,ae=T.extendFlat({type:"linear"},X);n(ae,q);var se={x:[0,2],y:[1,3]};return ae.setRange=function(){var pe=Q.sectorBBox,ke=se[re],me=Q.radialAxis._rl,le=(me[1]-me[0])/(1-Q.getHole(H));ae.range=[pe[ke[0]]*le,pe[ke[1]]*le]},ae.isPtWithinRange="x"!==re||ne?function(){return!0}:function(pe){return Q.isPtInside(pe)},ae.setRange(),ae.setScale(),ae},N.doAutoRange=function(q,H){var X=this,Q=X.gd,ne=X.radialAxis,re=X.getRadial(H);i(Q,ne);var ae=ne.range;re.range=ae.slice(),re._input.range=ae.slice(),ne._rl=[ne.r2l(ae[0],null,"gregorian"),ne.r2l(ae[1],null,"gregorian")]},N.updateRadialAxis=function(q,H){var X=this,Q=X.gd,ne=X.layers,re=X.radius,ae=X.innerRadius,se=X.cx,pe=X.cy,ke=X.getRadial(H),me=R(X.getSector(H)[0],360),le=X.radialAxis,ue=ae<re,Ee=X.isSmith;Ee||(X.fillViewInitialKey("radialaxis.angle",ke.angle),X.fillViewInitialKey("radialaxis.range",le.range.slice()),le.setGeometry()),"auto"===le.tickangle&&me>90&&me<=270&&(le.tickangle=180);var de=Ee?function(Pe){var De=z(X,L([Pe.x,0]));return p(De[0]-se,De[1]-pe)}:function(Pe){return p(le.l2p(Pe.x)+ae,0)},xe=Ee?function(Pe){return P(X,Pe.x,-1/0,1/0)}:function(Pe){return X.pathArc(le.r2p(Pe.x)+ae)},Te=U(ke);if(X.radialTickLayout!==Te&&(ne["radial-axis"].selectAll(".xtick").remove(),X.radialTickLayout=Te),ue){le.setScale();var we=0,K=Ee?(le.tickvals||[]).filter(function(Pe){return Pe>=0}).map(function(Pe){return r.tickText(le,Pe,!0,!1)}):r.calcTicks(le),oe=Ee?K:r.clipEnds(le,K),he=r.getTickSigns(le)[2];Ee&&(("top"===le.ticks&&"bottom"===le.side||"bottom"===le.ticks&&"top"===le.side)&&(he=-he),"top"===le.ticks&&"top"===le.side&&(we=-le.ticklen),"bottom"===le.ticks&&"bottom"===le.side&&(we=le.ticklen)),r.drawTicks(Q,le,{vals:K,layer:ne["radial-axis"],path:r.makeTickPath(le,0,he),transFn:de,crisp:!1}),r.drawGrid(Q,le,{vals:oe,layer:ne["radial-grid"],path:xe,transFn:T.noop,crisp:!1}),r.drawLabels(Q,le,{vals:K,layer:ne["radial-axis"],transFn:de,labelFns:r.makeLabelFns(le,we)})}var ye=X.radialAxisAngle=X.vangles?D(J(V(ke.angle),X.vangles)):ke.angle,Me=p(se,pe),Re=Me+x(-ye);Y(ne["radial-axis"],ue&&(ke.showticklabels||ke.ticks),{transform:Re}),Y(ne["radial-grid"],ue&&ke.showgrid,{transform:Ee?"":Me}),Y(ne["radial-line"].select("line"),ue&&ke.showline,{x1:Ee?-re:ae,y1:0,x2:re,y2:0,transform:Re}).attr("stroke-width",ke.linewidth).call(s.stroke,ke.linecolor)},N.updateRadialAxisTitle=function(q,H,X){if(!this.isSmith){var Q=this,ne=Q.gd,re=Q.radius,ae=Q.cx,se=Q.cy,pe=Q.getRadial(H),ke=Q.id+"title",me=0;if(pe.title){var le=e.bBox(Q.layers["radial-axis"].node()).height,ue=pe.title.font.size,Ee=pe.side;me="top"===Ee?ue:"counterclockwise"===Ee?-(le+.4*ue):le+.8*ue}var de=void 0!==X?X:Q.radialAxisAngle,xe=V(de),Te=Math.cos(xe),we=Math.sin(xe),K=ae+re/2*Te+me*we,oe=se-re/2*we+me*Te;Q.layers["radial-axis-title"]=b.draw(ne,ke,{propContainer:pe,propName:Q.id+".radialaxis.title",placeholder:j(ne,"Click to enter radial axis title"),attributes:{x:K,y:oe,"text-anchor":"middle"},transform:{rotate:-de}})}},N.updateAngularAxis=function(q,H){var X=this,Q=X.gd,ne=X.layers,re=X.radius,ae=X.innerRadius,se=X.cx,pe=X.cy,ke=X.getAngular(H),me=X.angularAxis,le=X.isSmith;le||(X.fillViewInitialKey("angularaxis.rotation",ke.rotation),me.setGeometry(),me.setScale());var ue=le?function(Pe){var De=z(X,L([0,Pe.x]));return Math.atan2(De[0]-se,De[1]-pe)-Math.PI/2}:function(Pe){return me.t2g(Pe.x)};"linear"===me.type&&"radians"===me.thetaunit&&(me.tick0=D(me.tick0),me.dtick=D(me.dtick));var Ee=function(Pe){return p(se+re*Math.cos(Pe),pe-re*Math.sin(Pe))},de=le?function(Pe){var De=z(X,L([0,Pe.x]));return p(De[0],De[1])}:function(Pe){return Ee(ue(Pe))},xe=le?function(Pe){var De=z(X,L([0,Pe.x])),fe=Math.atan2(De[0]-se,De[1]-pe)-Math.PI/2;return p(De[0],De[1])+x(-D(fe))}:function(Pe){var De=ue(Pe);return Ee(De)+x(-D(De))},Te=le?function(Pe){return C(X,Pe.x,0,1/0)}:function(Pe){var De=ue(Pe),fe=Math.cos(De),ge=Math.sin(De);return"M"+[se+ae*fe,pe-ae*ge]+"L"+[se+re*fe,pe-re*ge]},we=r.makeLabelFns(me,0).labelStandoff,K={xFn:function(Pe){var De=ue(Pe);return Math.cos(De)*we},yFn:function(Pe){var De=ue(Pe),fe=Math.sin(De)>0?.2:1;return-Math.sin(De)*(we+Pe.fontSize*fe)+Math.abs(Math.cos(De))*(Pe.fontSize*u)},anchorFn:function(Pe){var De=ue(Pe),fe=Math.cos(De);return Math.abs(fe)<.1?"middle":fe>0?"start":"end"},heightFn:function(Pe,De,fe){var ge=ue(Pe);return-.5*(1+Math.sin(ge))*fe}},oe=U(ke);X.angularTickLayout!==oe&&(ne["angular-axis"].selectAll("."+me._id+"tick").remove(),X.angularTickLayout=oe);var he,ye=le?[1/0].concat(me.tickvals||[]).map(function(Pe){return r.tickText(me,Pe,!0,!1)}):r.calcTicks(me);if(le&&(ye[0].text="\u221e",ye[0].fontSize*=1.75),"linear"===H.gridshape?(he=ye.map(ue),T.angleDelta(he[0],he[1])<0&&(he=he.slice().reverse())):he=null,X.vangles=he,"category"===me.type&&(ye=ye.filter(function(Pe){return T.isAngleInsideSector(ue(Pe),X.sectorInRad)})),me.visible){var Me="inside"===me.ticks?-1:1;r.drawTicks(Q,me,{vals:ye,layer:ne["angular-axis"],path:"M"+Me*((me.linewidth||1)/2)+",0h"+Me*me.ticklen,transFn:xe,crisp:!1}),r.drawGrid(Q,me,{vals:ye,layer:ne["angular-grid"],path:Te,transFn:T.noop,crisp:!1}),r.drawLabels(Q,me,{vals:ye,layer:ne["angular-axis"],repositionOnUpdate:!0,transFn:de,labelFns:K})}Y(ne["angular-line"].select("path"),ke.showline,{d:X.pathSubplot(),transform:p(se,pe)}).attr("stroke-width",ke.linewidth).call(s.stroke,ke.linecolor)},N.updateFx=function(q,H){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(q),this.updateRadialDrag(q,H,0),this.updateRadialDrag(q,H,1)),this.updateHoverAndMainDrag(q))},N.updateHoverAndMainDrag=function(q){var H,X,Q=this,ne=Q.isSmith,re=Q.gd,se=q._zoomlayer,pe=S.MINZOOM,ke=S.OFFEDGE,me=Q.radius,le=Q.innerRadius,ue=Q.cx,Ee=Q.cy,de=Q.cxx,xe=Q.cyy,Te=Q.sectorInRad,we=Q.vangles,K=Q.radialAxis,oe=_.clampTiny,he=_.findXYatLength,ye=_.findEnclosingVertexAngles,Me=S.cornerHalfWidth,Re=S.cornerLen/2,Pe=c.makeDragger(Q.layers,"path","maindrag",!1===q.dragmode?"none":"crosshair");M.select(Pe).attr("d",Q.pathSubplot()).attr("transform",p(ue,Ee)),Pe.onmousemove=function(Se){f.hover(re,Se,Q.id),re._fullLayout._lasthover=Pe,re._fullLayout._hoversubplot=Q.id},Pe.onmouseout=function(Se){re._dragging||h.unhover(re,Se)};var De,fe,ge,be,Ie,He,Ve,tt,nt,st={element:Pe,gd:re,subplot:Q.id,plotinfo:{id:Q.id,xaxis:Q.xaxis,yaxis:Q.yaxis},xaxes:[Q.xaxis],yaxes:[Q.yaxis]};function dt(Se,ze){return Math.sqrt(Se*Se+ze*ze)}function wt(Se,ze){return dt(Se-de,ze-xe)}function _t(Se,ze){return Math.atan2(xe-ze,Se-de)}function pt(Se,ze){return[Se*Math.cos(ze),Se*Math.sin(-ze)]}function Pt(Se,ze){if(0===Se)return Q.pathSector(2*Me);var Ke=Re/Se,it=ze-Ke,ct=ze+Ke,mt=Math.max(0,Math.min(Se,me)),Lt=mt-Me,At=mt+Me;return"M"+pt(Lt,it)+"A"+[Lt,Lt]+" 0,0,0 "+pt(Lt,ct)+"L"+pt(At,ct)+"A"+[At,At]+" 0,0,1 "+pt(At,it)+"Z"}function St(Se,ze,Ke){if(0===Se)return Q.pathSector(2*Me);var it,ct,mt=pt(Se,ze),Lt=pt(Se,Ke),At=oe((mt[0]+Lt[0])/2),ht=oe((mt[1]+Lt[1])/2);if(At&&ht){var Et=ht/At,gt=-1/Et,kt=he(Me,Et,At,ht);it=he(Re,gt,kt[0][0],kt[0][1]),ct=he(Re,gt,kt[1][0],kt[1][1])}else{var It,Ut;ht?(It=Re,Ut=Me):(It=Me,Ut=Re),it=[[At-It,ht-Ut],[At+It,ht-Ut]],ct=[[At-It,ht+Ut],[At+It,ht+Ut]]}return"M"+it.join("L")+"L"+ct.reverse().join("L")+"Z"}function Ot(Se,ze){return ze=Math.max(Math.min(ze,me),le),Se<ke?Se=0:me-Se<ke?Se=me:ze<ke?ze=0:me-ze<ke&&(ze=me),Math.abs(ze-Se)>pe?(Se<ze?(ge=Se,be=ze):(ge=ze,be=Se),!0):(ge=null,be=null,!1)}function jt(Se,ze){ze=ze||"M0,0Z",tt.attr("d",Se=Se||Ie),nt.attr("d",ze),c.transitionZoombox(tt,nt,He,Ve),He=!0;var Ke={};Je(Ke),re.emit("plotly_relayouting",Ke)}function Dt(Se,ze){var Ke,it,ct=De+(Se*=H),mt=fe+(ze*=X),Lt=wt(De,fe),At=Math.min(wt(ct,mt),me),ht=_t(De,fe);Ot(Lt,At)&&(Ke=Ie+Q.pathSector(be),ge&&(Ke+=Q.pathSector(ge)),it=Pt(ge,ht)+Pt(be,ht)),jt(Ke,it)}function Ye(Se,ze,Ke,it){var ct=_.findIntersectionXY(Ke,it,Ke,[Se-de,xe-ze]);return dt(ct[0],ct[1])}function Ze(Se,ze){var Ke,it,ct=De+Se,mt=fe+ze,Lt=_t(De,fe),At=_t(ct,mt),ht=ye(Lt,we),Et=ye(At,we);Ot(Ye(De,fe,ht[0],ht[1]),Math.min(Ye(ct,mt,Et[0],Et[1]),me))&&(Ke=Ie+Q.pathSector(be),ge&&(Ke+=Q.pathSector(ge)),it=[St(ge,ht[0],ht[1]),St(be,ht[0],ht[1])].join(" ")),jt(Ke,it)}function Ne(){if(c.removeZoombox(re),null!==ge&&null!==be){var Se={};Je(Se),c.showDoubleClickNotifier(re),l.call("_guiRelayout",re,Se)}}function Je(Se){var ze=K._rl,Ke=(ze[1]-ze[0])/(1-le/me)/me;Se[Q.id+".radialaxis.range"]=[ze[0]+(ge-le)*Ke,ze[0]+(be-le)*Ke]}function at(Se,ze){var Ke=re._fullLayout.clickmode;if(c.removeZoombox(re),2===Se){var it={};for(var ct in Q.viewInitial)it[Q.id+"."+ct]=Q.viewInitial[ct];re.emit("plotly_doubleclick",null),l.call("_guiRelayout",re,it)}Ke.indexOf("select")>-1&&1===Se&&g(ze,re,[Q.xaxis],[Q.yaxis],Q.id,st),Ke.indexOf("event")>-1&&f.click(re,ze,Q.id)}st.prepFn=function(Se,ze,Ke){var it=re._fullLayout.dragmode,ct=Pe.getBoundingClientRect();re._fullLayout._calcInverseTransform(re),H=re._fullLayout._invScaleX,X=re._fullLayout._invScaleY;var Lt=T.apply3DTransform(re._fullLayout._invTransform)(ze-ct.left,Ke-ct.top);if(De=Lt[0],fe=Lt[1],we){var At=_.findPolygonOffset(me,Te[0],Te[1],we);De+=de+At[0],fe+=xe+At[1]}switch(it){case"zoom":st.clickFn=at,ne||(st.moveFn=we?Ze:Dt,st.doneFn=Ne,ge=null,be=null,Ie=Q.pathSubplot(),He=!1,Ve=k(re._fullLayout[Q.id].bgcolor).getLuminance(),(tt=c.makeZoombox(se,Ve,ue,Ee,Ie)).attr("fill-rule","evenodd"),nt=c.makeCorners(se,ue,Ee),y(re));break;case"select":case"lasso":v(Se,ze,Ke,st,it)}},h.init(st)},N.updateRadialDrag=function(q,H,X){var Q=this,ne=Q.gd,re=Q.layers,ae=Q.radius,se=Q.innerRadius,pe=Q.cx,ke=Q.cy,me=Q.radialAxis,le=S.radialDragBoxSize,ue=le/2;if(me.visible){var Ee,de,xe,Te=V(Q.radialAxisAngle),we=me._rl,K=we[0],oe=we[1],he=we[X],ye=.75*(we[1]-we[0])/(1-Q.getHole(H))/ae;X?(Ee=pe+(ae+ue)*Math.cos(Te),de=ke-(ae+ue)*Math.sin(Te),xe="radialdrag"):(Ee=pe+(se-ue)*Math.cos(Te),de=ke-(se-ue)*Math.sin(Te),xe="radialdrag-inner");var Me,Re,Pe,De=c.makeRectDragger(re,xe,"crosshair",-ue,-ue,le,le),fe={element:De,gd:ne};!1===q.dragmode&&(fe.dragmode=!1),Y(M.select(De),me.visible&&se<ae,{transform:p(Ee,de)}),fe.prepFn=function(){Me=null,Re=null,Pe=null,fe.moveFn=ge,fe.doneFn=be,y(ne)},fe.clampFn=function(Ve,tt){return Math.sqrt(Ve*Ve+tt*tt)<S.MINDRAG&&(Ve=0,tt=0),[Ve,tt]},h.init(fe)}function ge(Ve,tt){if(Me)Me(Ve,tt);else{var nt=[Ve,-tt],st=[Math.cos(Te),Math.sin(Te)],dt=Math.abs(T.dot(nt,st)/Math.sqrt(T.dot(nt,nt)));isNaN(dt)||(Me=dt<.5?Ie:He)}var _t,wt={};_t=wt,null!==Re?_t[Q.id+".radialaxis.angle"]=Re:null!==Pe&&(_t[Q.id+".radialaxis.range["+X+"]"]=Pe),ne.emit("plotly_relayouting",wt)}function be(){null!==Re?l.call("_guiRelayout",ne,Q.id+".radialaxis.angle",Re):null!==Pe&&l.call("_guiRelayout",ne,Q.id+".radialaxis.range["+X+"]",Pe)}function Ie(Ve,tt){if(0!==X){Re=Math.atan2(ke-(de+tt),Ee+Ve-pe),Q.vangles&&(Re=J(Re,Q.vangles)),Re=D(Re);var dt=p(pe,ke)+x(-Re);re["radial-axis"].attr("transform",dt),re["radial-line"].select("line").attr("transform",dt);var wt=Q.gd._fullLayout;Q.updateRadialAxisTitle(wt,wt[Q.id],Re)}}function He(Ve,tt){var nt=T.dot([Ve,-tt],[Math.cos(Te),Math.sin(Te)]);if(Pe=he-ye*nt,ye>0==(X?Pe>K:Pe<oe)){var st=ne._fullLayout,dt=st[Q.id];me.range[X]=Pe,me._rl[X]=Pe,Q.updateRadialAxis(st,dt),Q.xaxis.setRange(),Q.xaxis.setScale(),Q.yaxis.setRange(),Q.yaxis.setScale();var wt=!1;for(var _t in Q.traceHash){var pt=Q.traceHash[_t],Pt=T.filterVisible(pt);pt[0][0].trace._module.plot(ne,Q,Pt,dt),l.traceIs(_t,"gl")&&Pt.length&&(wt=!0)}wt&&(m(ne),w(ne))}else Pe=null}},N.updateAngularDrag=function(q){var H=this,X=H.gd,Q=H.layers,ne=H.radius,re=H.angularAxis,ae=H.cx,se=H.cy,pe=H.cxx,ke=H.cyy,me=S.angularDragBoxSize,le=c.makeDragger(Q,"path","angulardrag",!1===q.dragmode?"none":"move"),ue={element:le,gd:X};function Ee(fe,ge){return Math.atan2(ke+me-ge,fe-pe-me)}!1===q.dragmode?ue.dragmode=!1:M.select(le).attr("d",H.pathAnnulus(ne,ne+me)).attr("transform",p(ae,se)).call(d,"move");var de,xe,Te,we,K,oe,he=Q.frontplot.select(".scatterlayer").selectAll(".trace"),ye=he.selectAll(".point"),Me=he.selectAll(".textpoint");function Re(fe,ge){var be=H.gd._fullLayout,Ie=be[H.id],He=Ee(de+fe*q._invScaleX,xe+ge*q._invScaleY),Ve=D(He-oe);if(we=Te+Ve,Q.frontplot.attr("transform",p(H.xOffset2,H.yOffset2)+x([-Ve,pe,ke])),H.vangles){K=H.radialAxisAngle+Ve;var tt=p(ae,se)+x(-Ve),nt=p(ae,se)+x(-K);Q.bg.attr("transform",tt),Q["radial-grid"].attr("transform",tt),Q["radial-axis"].attr("transform",nt),Q["radial-line"].select("line").attr("transform",nt),H.updateRadialAxisTitle(be,Ie,K)}else H.clipPaths.forTraces.select("path").attr("transform",p(pe,ke)+x(Ve));ye.each(function(){var Pt=M.select(this),St=e.getTranslate(Pt);Pt.attr("transform",p(St.x,St.y)+x([Ve]))}),Me.each(function(){var Pt=M.select(this),St=Pt.select("text"),Ot=e.getTranslate(Pt);Pt.attr("transform",x([Ve,St.attr("x"),St.attr("y")])+p(Ot.x,Ot.y))}),re.rotation=T.modHalf(we,360),H.updateAngularAxis(be,Ie),H._hasClipOnAxisFalse&&!T.isFullCircle(H.sectorInRad)&&he.call(e.hideOutsideRangePoints,H);var st=!1;for(var dt in H.traceHash)if(l.traceIs(dt,"gl")){var wt=H.traceHash[dt],_t=T.filterVisible(wt);wt[0][0].trace._module.plot(X,H,_t,Ie),_t.length&&(st=!0)}st&&(m(X),w(X));var pt={};Pe(pt),X.emit("plotly_relayouting",pt)}function Pe(fe){fe[H.id+".angularaxis.rotation"]=we,H.vangles&&(fe[H.id+".radialaxis.angle"]=K)}function De(){Me.select("text").attr("transform",null);var fe={};Pe(fe),l.call("_guiRelayout",X,fe)}ue.prepFn=function(fe,ge,be){Te=q[H.id].angularaxis.rotation;var He=le.getBoundingClientRect();de=ge-He.left,xe=be-He.top,X._fullLayout._calcInverseTransform(X);var Ve=T.apply3DTransform(q._invTransform)(de,xe);oe=Ee(de=Ve[0],xe=Ve[1]),ue.moveFn=Re,ue.doneFn=De,y(X)},H.vangles&&!T.isFullCircle(H.sectorInRad)&&(ue.prepFn=T.noop,d(M.select(le),null)),h.init(ue)},N.isPtInside=function(q){if(this.isSmith)return!0;var H=this.sectorInRad,X=this.vangles,Q=this.angularAxis.c2g(q.theta),ne=this.radialAxis,re=ne.c2l(q.r);return(X?_.isPtInsidePolygon:T.isPtInsideSector)(re,Q,ne._rl,H,X)},N.pathArc=function(q){var H=this.sectorInRad,X=this.vangles;return(X?_.pathPolygon:T.pathArc)(q,H[0],H[1],X)},N.pathSector=function(q){var H=this.sectorInRad,X=this.vangles;return(X?_.pathPolygon:T.pathSector)(q,H[0],H[1],X)},N.pathAnnulus=function(q,H){var X=this.sectorInRad,Q=this.vangles;return(Q?_.pathPolygonAnnulus:T.pathAnnulus)(q,H,X[0],X[1],Q)},N.pathSubplot=function(){var q=this.innerRadius,H=this.radius;return q?this.pathAnnulus(q,H):this.pathSector(H)},N.fillViewInitialKey=function(q,H){q in this.viewInitial||(this.viewInitial[q]=H)}},12101:function($,I,t){"use strict";var M=t(71828),k=t(21994),l=M.deg2rad,T=M.rad2deg;$.exports=function(x,p,s){switch(k(x,s),x._id){case"x":case"radialaxis":r=p._subplot,(e=x).setGeometry=function(){var n=e._rl[0],a=e._rl[1],i=r.innerRadius,c=(r.radius-i)/(a-n),h=i/c,f=n>a?function(b){return b<=0}:function(b){return b>=0};e.c2g=function(b){var v=e.c2l(b)-n;return(f(v)?v:0)+h},e.g2c=function(b){return e.l2c(b+n-h)},e.g2p=function(b){return b*c},e.c2p=function(b){return e.g2p(e.c2g(b))}};break;case"angularaxis":!function(e,o){var r=e.type;if("linear"===r){var n=e.d2c,a=e.c2d;e.d2c=function(i,c){return h=n(i),"degrees"===c?l(h):h;var h},e.c2d=function(i,c){return a((h=i,"degrees"===c?T(h):h));var h}}e.makeCalcdata=function(i,c){var h,f,b=i[c],v=i._length,g=function(u){return e.d2c(u,i.thetaunit)};if(b){if(M.isTypedArray(b)&&"linear"===r){if(v===b.length)return b;if(b.subarray)return b.subarray(0,v)}for(h=new Array(v),f=0;f<v;f++)h[f]=g(b[f])}else{var y=c+"0",d="d"+c,m=y in i?g(i[y]):0,w=i[d]?g(i[d]):(e.period||2*Math.PI)/v;for(h=new Array(v),f=0;f<v;f++)h[f]=m+f*w}return h},e.setGeometry=function(){var i,c,h,f,b=o.sector,v=b.map(l),g={clockwise:-1,counterclockwise:1}[e.direction],y=l(e.rotation),d=function(S){return g*S+y},m=function(S){return(S-y)/g};switch(r){case"linear":c=i=M.identity,f=l,h=T,e.range=M.isFullCircle(v)?[b[0],b[0]+360]:v.map(m).map(T);break;case"category":var w=e._categories.length,u=e.period?Math.max(e.period,w):w;0===u&&(u=1),c=f=function(S){return 2*S*Math.PI/u},i=h=function(S){return S*u/Math.PI/2},e.range=[0,u]}e.c2g=function(S){return d(c(S))},e.g2c=function(S){return i(m(S))},e.t2g=function(S){return d(f(S))},e.g2t=function(S){return h(m(S))}}}(x,p)}var e,r}},39779:function($){"use strict";$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function($){"use strict";function I(l){return l<0?-1:l>0?1:0}function t(l){var T=l[0],x=l[1];if(!isFinite(T)||!isFinite(x))return[1,0];var p=(T+1)*(T+1)+x*x;return[(T*T+x*x-1)/p,2*x/p]}function M(l,T){return[T[0]*l.radius+l.cx,-T[1]*l.radius+l.cy]}function k(l,T){return T*l.radius}$.exports={smith:t,reactanceArc:function(l,T,x,p){var s=M(l,t([x,T])),e=s[0],o=s[1],r=M(l,t([p,T])),n=r[0],a=r[1];if(0===T)return["M"+e+","+o,"L"+n+","+a].join(" ");var i=k(l,1/Math.abs(T));return["M"+e+","+o,"A"+i+","+i+" 0 0,"+(T<0?1:0)+" "+n+","+a].join(" ")},resistanceArc:function(l,T,x,p){var s=k(l,1/(T+1)),e=M(l,t([T,x])),o=e[0],r=e[1],n=M(l,t([T,p])),a=n[0],i=n[1];if(I(x)!==I(p)){var c=M(l,t([T,0]));return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(0<x?0:1)+" "+c[0]+","+c[1],"A"+s+","+s+" 0 0,"+(p<0?0:1)+a+","+i].join(" ")}return["M"+o+","+r,"A"+s+","+s+" 0 0,"+(p<x?0:1)+" "+a+","+i].join(" ")},smithTransform:M}},7504:function($,I,t){"use strict";var M=t(27659).AU,k=t(71828).counterRegex,l=t(77997),T=t(39779),x=T.attr,p=T.name,s=k(p),e={};e[x]={valType:"subplotid",dflt:p,editType:"calc"},$.exports={attr:x,name:p,idRoot:p,idRegex:s,attrRegex:s,attributes:e,layoutAttributes:t(33419),supplyLayoutDefaults:t(9558),plot:function(o){for(var r=o._fullLayout,n=o.calcdata,a=r._subplots[p],i=0;i<a.length;i++){var c=a[i],h=M(n,p,c),f=r[c]._subplot;f||(f=l(o,c,!0),r[c]._subplot=f),f.plot(h,r,o._promises)}},clean:function(o,r,n,a){for(var i=a._subplots[p]||[],c=0;c<i.length;c++){var h=i[c],f=a[h]._subplot;if(!r[h]&&f)for(var b in f.framework.remove(),f.clipPaths)f.clipPaths[b].remove()}},toSVG:t(93612).toSVG}},33419:function($,I,t){"use strict";var M=t(22399),k=t(13838),l=t(27670).Y,T=t(71828).extendFlat,x=t(30962).overrideAll,p=x({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=x({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),e=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},p,s),o=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},p,s);$.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:e,imaginaryaxis:o,editType:"calc"}},9558:function($,I,t){"use strict";var M,k,l,T=t(71828),x=t(7901),p=t(44467),s=t(49119),e=t(27659).NG,o=t(89426),r=t(96115),n=t(92128),a=t(21994),i=t(33419),c=t(39779),h=c.axisNames,f=(M=function(v){return v.slice().reverse().map(function(g){return-g}).concat([0]).concat(v)},k=String,l={},function(v){var g=k?k(v):v;if(g in l)return l[g];var y=M(v);return l[g]=y,y});function b(v,g,y,d){var m=y("bgcolor");d.bgColor=x.combine(m,d.paper_bgcolor);var w,u=e(d.fullData,c.name,d.id),S=d.layoutOut;function _(N,U){return y(w+"."+N,U)}for(var E=0;E<h.length;E++){T.isPlainObject(v[w=h[E]])||(v[w]={});var L=v[w],C=p.newContainer(g,w);C._id=C._name=w,C._attr=d.id+"."+w,C._traceIndices=u.map(function(N){return N._expandedIndex});var P=_("visible");if(C.type="linear",a(C,S),o(L,C,_,C.type),P){var z,j,R,V,D="realaxis"===w;D&&_("side"),D?_("tickvals"):_("tickvals",f(g.realaxis.tickvals||i.realaxis.tickvals.dflt));var B=d.font||{};P&&(j=(z=_("color"))===L.color?z:B.color,R=B.size,V=B.family),r(L,C,_,C.type,{noTicklabelstep:!0,noAng:!D,noExp:!0,font:{color:j,size:R,family:V}}),T.coerce2(v,g,i,w+".ticklen"),T.coerce2(v,g,i,w+".tickwidth"),T.coerce2(v,g,i,w+".tickcolor",g.color),_("ticks")||(delete g[w].ticklen,delete g[w].tickwidth,delete g[w].tickcolor),n(L,C,_,{dfltColor:z,bgColor:d.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:i[w]}),_("layer")}_("hoverformat"),delete C.type,C._input=L}}$.exports=function(v,g,y){s(v,g,y,{noUirevision:!0,type:c.name,attributes:i,handleDefaults:b,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:y,layoutOut:g})}},49119:function($,I,t){"use strict";var M=t(71828),k=t(44467),l=t(27670).c;$.exports=function(T,x,p,s){var e,o,n=s.attributes,a=s.handleDefaults,i=s.partition||"x",c=x._subplots[s.type],h=c.length,f=h&&c[0].replace(/\d+$/,"");function b(d,m){return M.coerce(e,o,n,d,m)}for(var v=0;v<h;v++){var g=c[v];e=T[g]?T[g]:T[g]={},o=k.newContainer(x,g,f),s.noUirevision||b("uirevision",x.uirevision);var y={};y[i]=[v/h,(v+1)/h],l(o,x,b,y),s.id=g,a(e,o,b,s)}}},5386:function($,I,t){"use strict";function k(l){var T=l.description?" "+l.description:"",x=l.keys||[];if(x.length>0){for(var p=[],s=0;s<x.length;s++)p[s]="`"+x[s]+"`";T+="Finally, the template string has access to ",T=1===x.length?"variable "+p[0]:"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return T}t(31562),I.f=function(l,T){l=l||{},k(T=T||{});var x={valType:"string",dflt:"",editType:l.editType||"none"};return!1!==l.arrayOk&&(x.arrayOk=!0),x},I.s=function(l,T){l=l||{},k(T=T||{});var x={valType:"string",dflt:"",editType:l.editType||"calc"};return!1!==l.arrayOk&&(x.arrayOk=!0),x}},61639:function($,I,t){"use strict";var M=t(64380),k=t(27659).AU,l=t(71828).counterRegex,T="ternary";I.name=T;var x=I.attr="subplot";I.idRoot=T,I.idRegex=I.attrRegex=l(T),(I.attributes={})[x]={valType:"subplotid",dflt:"ternary",editType:"calc"},I.layoutAttributes=t(81367),I.supplyLayoutDefaults=t(25369),I.plot=function(p){for(var s=p._fullLayout,e=p.calcdata,o=s._subplots.ternary,r=0;r<o.length;r++){var n=o[r],a=k(e,T,n),i=s[n]._subplot;i||(i=new M({id:n,graphDiv:p,container:s._ternarylayer.node()},s),s[n]._subplot=i),i.plot(a,s,p._promises)}},I.clean=function(p,s,e,o){for(var r=o._subplots.ternary||[],n=0;n<r.length;n++){var a=r[n],i=o[a]._subplot;!s[a]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},81367:function($,I,t){"use strict";var M=t(22399),k=t(27670).Y,l=t(13838),T=t(30962).overrideAll,x=t(1426).extendFlat,p={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.minor.tickmode,nticks:x({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,labelalias:l.labelalias,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:x({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:x({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},s=$.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:p,baxis:p,caxis:p},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},25369:function($,I,t){"use strict";var M=t(7901),k=t(44467),l=t(71828),T=t(49119),x=t(96115),p=t(89426),s=t(38701),e=t(26218),o=t(92128),r=t(81367),n=["aaxis","baxis","caxis"];function a(c,h,f,b){var v,g,y,d=f("bgcolor"),m=f("sum");b.bgColor=M.combine(d,b.paper_bgcolor);for(var w=0;w<n.length;w++)g=c[v=n[w]]||{},(y=k.newContainer(h,v))._name=v,i(g,y,b,h);var u=h.aaxis,S=h.baxis,_=h.caxis;u.min+S.min+_.min>=m&&(u.min=0,S.min=0,_.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function i(c,h,f,b){var v=r[h._name];function g(S,_){return l.coerce(c,h,v,S,_)}g("uirevision",b.uirevision),h.type="linear";var y=g("color"),d=y!==v.color.dflt?y:f.font.color,m=h._name.charAt(0).toUpperCase(),w="Component "+m,u=g("title.text",w);h._hovertitle=u===w?u:m,l.coerceFont(g,"title.font",{family:f.font.family,size:l.bigFont(f.font.size),color:d}),g("min"),e(c,h,g,"linear"),p(c,h,g,"linear"),x(c,h,g,"linear"),s(c,h,g,{outerTicks:!0}),g("showticklabels")&&(l.coerceFont(g,"tickfont",{family:f.font.family,size:f.font.size,color:d}),g("tickangle"),g("tickformat")),o(c,h,g,{dfltColor:y,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v}),g("hoverformat"),g("layer")}$.exports=function(c,h,f){T(c,h,f,{type:"ternary",attributes:r,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},64380:function($,I,t){"use strict";var M=t(39898),k=t(84267),l=t(73972),T=t(71828),x=T.strTranslate,p=T._,s=t(7901),e=t(91424),o=t(21994),r=t(1426).extendFlat,n=t(74875),a=t(89298),i=t(28569),c=t(30211),h=t(64505),f=h.freeMode,b=h.rectMode,v=t(92998),g=t(47322).prepSelect,y=t(47322).selectOnClick,d=t(47322).clearOutline,m=t(47322).clearSelectionsCache,w=t(85555);function u(R,V){this.id=R.id,this.graphDiv=R.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=u;var S=u.prototype;S.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},S.plot=function(R,V){var D=this,B=V[D.id],N=V._size;D._hasClipOnAxisFalse=!1;for(var U=0;U<R.length;U++)if(!1===R[U][0].trace.cliponaxis){D._hasClipOnAxisFalse=!0;break}D.updateLayers(B),D.adjustLayout(B,N),n.generalUpdatePerTraceModule(D.graphDiv,D,R,B),D.layers.plotbg.select("path").call(s.fill,B.bgcolor)},S.makeFramework=function(R){var V=this,D=V.graphDiv,B=R[V.id],N=V.clipId="clip"+V.layoutId+V.id,U=V.clipIdRelative="clip-relative"+V.layoutId+V.id;V.clipDef=T.ensureSingleById(R._clips,"clipPath",N,function(J){J.append("path").attr("d","M0,0Z")}),V.clipDefRelative=T.ensureSingleById(R._clips,"clipPath",U,function(J){J.append("path").attr("d","M0,0Z")}),V.plotContainer=T.ensureSingle(V.container,"g",V.id),V.updateLayers(B),e.setClipUrl(V.layers.backplot,N,D),e.setClipUrl(V.layers.grids,N,D)},S.updateLayers=function(R){var V=this.layers,D=["draglayer","plotbg","backplot","grids"];"below traces"===R.aaxis.layer&&D.push("aaxis","aline"),"below traces"===R.baxis.layer&&D.push("baxis","bline"),"below traces"===R.caxis.layer&&D.push("caxis","cline"),D.push("frontplot"),"above traces"===R.aaxis.layer&&D.push("aaxis","aline"),"above traces"===R.baxis.layer&&D.push("baxis","bline"),"above traces"===R.caxis.layer&&D.push("caxis","cline");var B=this.plotContainer.selectAll("g.toplevel").data(D,String),N=["agrid","bgrid","cgrid"];B.enter().append("g").attr("class",function(U){return"toplevel "+U}).each(function(U){var J=M.select(this);V[U]=J,"frontplot"===U?J.append("g").classed("scatterlayer",!0):"backplot"===U?J.append("g").classed("maplayer",!0):"plotbg"===U?J.append("path").attr("d","M0,0Z"):"aline"===U||"bline"===U||"cline"===U?J.append("path"):"grids"===U&&N.forEach(function(Y){V[Y]=J.append("g").classed("grid "+Y,!0)})}),B.order()};var _=Math.sqrt(4/3);S.adjustLayout=function(R,V){var D,B,N,U,J,Y,q=this,H=R.domain,X=(H.x[0]+H.x[1])/2,Q=(H.y[0]+H.y[1])/2,ne=H.x[1]-H.x[0],re=H.y[1]-H.y[0],ae=ne*V.w,se=re*V.h,pe=R.sum,ke=R.aaxis.min,me=R.baxis.min,le=R.caxis.min;ae>_*se?N=(U=se)*_:U=(N=ae)/_,J=ne*N/ae,Y=re*U/se,B=V.t+V.h*(1-Q)-U/2,q.x0=D=V.l+V.w*X-N/2,q.y0=B,q.w=N,q.h=U,q.sum=pe,q.xaxis={type:"linear",range:[ke+2*le-pe,pe-ke-2*me],domain:[X-J/2,X+J/2],_id:"x"},o(q.xaxis,q.graphDiv._fullLayout),q.xaxis.setScale(),q.xaxis.isPtWithinRange=function(Me){return Me.a>=q.aaxis.range[0]&&Me.a<=q.aaxis.range[1]&&Me.b>=q.baxis.range[1]&&Me.b<=q.baxis.range[0]&&Me.c>=q.caxis.range[1]&&Me.c<=q.caxis.range[0]},q.yaxis={type:"linear",range:[ke,pe-me-le],domain:[Q-Y/2,Q+Y/2],_id:"y"},o(q.yaxis,q.graphDiv._fullLayout),q.yaxis.setScale(),q.yaxis.isPtWithinRange=function(){return!0};var ue=q.yaxis.domain[0],Ee=q.aaxis=r({},R.aaxis,{range:[ke,pe-me-le],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[ue,ue+Y*_],anchor:"free",position:0,_id:"y",_length:N});o(Ee,q.graphDiv._fullLayout),Ee.setScale();var de=q.baxis=r({},R.baxis,{range:[pe-ke-le,me],side:"bottom",domain:q.xaxis.domain,anchor:"free",position:0,_id:"x",_length:N});o(de,q.graphDiv._fullLayout),de.setScale();var xe=q.caxis=r({},R.caxis,{range:[pe-ke-me,le],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[ue,ue+Y*_],anchor:"free",position:0,_id:"y",_length:N});o(xe,q.graphDiv._fullLayout),xe.setScale();var Te="M"+D+","+(B+U)+"h"+N+"l-"+N/2+",-"+U+"Z";q.clipDef.select("path").attr("d",Te),q.layers.plotbg.select("path").attr("d",Te);var we="M0,"+U+"h"+N+"l-"+N/2+",-"+U+"Z";q.clipDefRelative.select("path").attr("d",we);var K=x(D,B);q.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",K),q.clipDefRelative.select("path").attr("transform",null);var oe=x(D-de._offset,B+U);q.layers.baxis.attr("transform",oe),q.layers.bgrid.attr("transform",oe);var he=x(D+N/2,B)+"rotate(30)"+x(0,-Ee._offset);q.layers.aaxis.attr("transform",he),q.layers.agrid.attr("transform",he);var ye=x(D+N/2,B)+"rotate(-30)"+x(0,-xe._offset);q.layers.caxis.attr("transform",ye),q.layers.cgrid.attr("transform",ye),q.drawAxes(!0),q.layers.aline.select("path").attr("d",Ee.showline?"M"+D+","+(B+U)+"l"+N/2+",-"+U:"M0,0").call(s.stroke,Ee.linecolor||"#000").style("stroke-width",(Ee.linewidth||0)+"px"),q.layers.bline.select("path").attr("d",de.showline?"M"+D+","+(B+U)+"h"+N:"M0,0").call(s.stroke,de.linecolor||"#000").style("stroke-width",(de.linewidth||0)+"px"),q.layers.cline.select("path").attr("d",xe.showline?"M"+(D+N/2)+","+B+"l"+N/2+","+U:"M0,0").call(s.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),q.graphDiv._context.staticPlot||q.initInteractions(),e.setClipUrl(q.layers.frontplot,q._hasClipOnAxisFalse?null:q.clipId,q.graphDiv)},S.drawAxes=function(R){var V=this,D=V.graphDiv,B=V.id.substr(7)+"title",N=V.layers,U=V.aaxis,J=V.baxis,Y=V.caxis;if(V.drawAx(U),V.drawAx(J),V.drawAx(Y),R){var q=Math.max(U.showticklabels?U.tickfont.size/2:0,(Y.showticklabels?.75*Y.tickfont.size:0)+("outside"===Y.ticks?.87*Y.ticklen:0)),H=(J.showticklabels?J.tickfont.size:0)+("outside"===J.ticks?J.ticklen:0)+3;N["a-title"]=v.draw(D,"a"+B,{propContainer:U,propName:V.id+".aaxis.title",placeholder:p(D,"Click to enter Component A title"),attributes:{x:V.x0+V.w/2,y:V.y0-U.title.font.size/3-q,"text-anchor":"middle"}}),N["b-title"]=v.draw(D,"b"+B,{propContainer:J,propName:V.id+".baxis.title",placeholder:p(D,"Click to enter Component B title"),attributes:{x:V.x0-H,y:V.y0+V.h+.83*J.title.font.size+H,"text-anchor":"middle"}}),N["c-title"]=v.draw(D,"c"+B,{propContainer:Y,propName:V.id+".caxis.title",placeholder:p(D,"Click to enter Component C title"),attributes:{x:V.x0+V.w+H,y:V.y0+V.h+.83*Y.title.font.size+H,"text-anchor":"middle"}})}},S.drawAx=function(R){var V,D=this,B=D.graphDiv,N=R._name,U=N.charAt(0),J=R._id,Y=D.layers[N],q=U+"tickLayout",H=(V=R).ticks+String(V.ticklen)+String(V.showticklabels);D[q]!==H&&(Y.selectAll("."+J+"tick").remove(),D[q]=H),R.setScale();var X=a.calcTicks(R),Q=a.clipEnds(R,X),ne=a.makeTransTickFn(R),re=a.getTickSigns(R)[2],ae=T.deg2rad(30),se=re*(R.linewidth||1)/2,pe=re*R.ticklen,ke=D.w,me=D.h,le="b"===U?"M0,"+se+"l"+Math.sin(ae)*pe+","+Math.cos(ae)*pe:"M"+se+",0l"+Math.cos(ae)*pe+","+-Math.sin(ae)*pe,ue={a:"M0,0l"+me+",-"+ke/2,b:"M0,0l-"+ke/2+",-"+me,c:"M0,0l-"+me+","+ke/2}[U];a.drawTicks(B,R,{vals:"inside"===R.ticks?Q:X,layer:Y,path:le,transFn:ne,crisp:!1}),a.drawGrid(B,R,{vals:Q,layer:D.layers[U+"grid"],path:ue,transFn:ne,crisp:!1}),a.drawLabels(B,R,{vals:X,layer:Y,transFn:ne,labelFns:a.makeLabelFns(R,0,30)})};var E=w.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function j(R){M.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),d(this.dragOptions.gd)},S.initInteractions=function(){var R,V,D,B,N,U,J,Y,q,H,X,Q,ne=this,re=ne.layers.plotbg.select("path").node(),ae=ne.graphDiv,se=ae._fullLayout._zoomlayer;function pe(we){var K={};return K[ne.id+".aaxis.min"]=we.a,K[ne.id+".baxis.min"]=we.b,K[ne.id+".caxis.min"]=we.c,K}function ke(we,K){var oe=ae._fullLayout.clickmode;j(ae),2===we&&(ae.emit("plotly_doubleclick",null),l.call("_guiRelayout",ae,pe({a:0,b:0,c:0}))),oe.indexOf("select")>-1&&1===we&&y(K,ae,[ne.xaxis],[ne.yaxis],ne.id,ne.dragOptions),oe.indexOf("event")>-1&&c.click(ae,K,ne.id)}function me(we,K){return 1-K/ne.h}function le(we,K){return 1-(we+(ne.h-K)/Math.sqrt(3))/ne.w}function ue(we,K){return(we-(ne.h-K)/Math.sqrt(3))/ne.w}function Ee(we,K){var oe=D+we*R,he=B+K*V,ye=Math.max(0,Math.min(1,me(0,B),me(0,he))),Me=Math.max(0,Math.min(1,le(D,B),le(oe,he))),Re=Math.max(0,Math.min(1,ue(D,B),ue(oe,he))),Pe=(ye/2+Re)*ne.w,De=(1-ye/2-Me)*ne.w,fe=(Pe+De)/2,ge=De-Pe,be=(1-ye)*ne.h,Ie=be-ge/_;ge<w.MINZOOM?(J=N,X.attr("d",q),Q.attr("d","M0,0Z")):(J={a:N.a+ye*U,b:N.b+Me*U,c:N.c+Re*U},X.attr("d",q+"M"+Pe+","+be+"H"+De+"L"+fe+","+Ie+"L"+Pe+","+be+"Z"),Q.attr("d","M"+D+","+B+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Pe+","+be+L+"M"+De+","+be+C+"M"+fe+","+Ie+P)),H||(X.transition().style("fill",Y>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),H=!0),ae.emit("plotly_relayouting",pe(J))}function de(){j(ae),J!==N&&(l.call("_guiRelayout",ae,pe(J)),z&&ae.data&&ae._context.showTips&&(T.notifier(p(ae,"Double-click to zoom back out"),"long"),z=!1))}function xe(we,K){var oe=we/ne.xaxis._m,he=K/ne.yaxis._m,ye=[(J={a:N.a-he,b:N.b+(oe+he)/2,c:N.c-(oe-he)/2}).a,J.b,J.c].sort(T.sorterAsc),Me=ye.indexOf(J.a),Re=ye.indexOf(J.b),Pe=ye.indexOf(J.c);ye[0]<0&&(ye[1]+ye[0]/2<0?(ye[2]+=ye[0]+ye[1],ye[0]=ye[1]=0):(ye[2]+=ye[0]/2,ye[1]+=ye[0]/2,ye[0]=0),K=(N.a-(J={a:ye[Me],b:ye[Re],c:ye[Pe]}).a)*ne.yaxis._m,we=(N.c-J.c-N.b+J.b)*ne.xaxis._m);var De=x(ne.x0+we,ne.y0+K);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",De);var fe=x(-we,-K);ne.clipDefRelative.select("path").attr("transform",fe),ne.aaxis.range=[J.a,ne.sum-J.b-J.c],ne.baxis.range=[ne.sum-J.a-J.c,J.b],ne.caxis.range=[ne.sum-J.a-J.b,J.c],ne.drawAxes(!1),ne._hasClipOnAxisFalse&&ne.plotContainer.select(".scatterlayer").selectAll(".trace").call(e.hideOutsideRangePoints,ne),ae.emit("plotly_relayouting",pe(J))}function Te(){l.call("_guiRelayout",ae,pe(J))}this.dragOptions={element:re,gd:ae,plotinfo:{id:ne.id,domain:ae._fullLayout[ne.id].domain,xaxis:ne.xaxis,yaxis:ne.yaxis},subplot:ne.id,prepFn:function(we,K,oe){ne.dragOptions.xaxes=[ne.xaxis],ne.dragOptions.yaxes=[ne.yaxis],R=ae._fullLayout._invScaleX,V=ae._fullLayout._invScaleY;var he=ne.dragOptions.dragmode=ae._fullLayout.dragmode;ne.dragOptions.minDrag=f(he)?1:void 0,"zoom"===he?(ne.dragOptions.moveFn=Ee,ne.dragOptions.clickFn=ke,ne.dragOptions.doneFn=de,function(ye,Me,Re){var Pe=re.getBoundingClientRect();D=Me-Pe.left,B=Re-Pe.top,ae._fullLayout._calcInverseTransform(ae);var fe=T.apply3DTransform(ae._fullLayout._invTransform)(D,B);D=fe[0],B=fe[1],J=N={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},U=ne.aaxis.range[1]-N.a,Y=k(ne.graphDiv._fullLayout[ne.id].bgcolor).getLuminance(),q="M0,"+ne.h+"L"+ne.w/2+", 0L"+ne.w+","+ne.h+"Z",H=!1,X=se.append("path").attr("class","zoombox").attr("transform",x(ne.x0,ne.y0)).style({fill:Y>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),Q=se.append("path").attr("class","zoombox-corners").attr("transform",x(ne.x0,ne.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ne.clearOutline(ae)}(0,K,oe)):"pan"===he?(ne.dragOptions.moveFn=xe,ne.dragOptions.clickFn=ke,ne.dragOptions.doneFn=Te,J=N={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},ne.clearOutline(ae)):(b(he)||f(he))&&g(we,K,oe,ne.dragOptions,he)}},re.onmousemove=function(we){c.hover(ae,we,ne.id),ae._fullLayout._lasthover=re,ae._fullLayout._hoversubplot=ne.id},re.onmouseout=function(we){ae._dragging||i.unhover(ae,we)},i.init(this.dragOptions)}},73972:function($,I,t){"use strict";var M=t(47769),k=t(64213),l=t(75138),T=t(41965),x=t(24401).addStyleRule,p=t(1426),s=t(9012),e=t(10820),o=p.extendFlat,r=p.extendDeepAll;function n(y){var d=y.name,m=y.categories,w=y.meta;if(I.modules[d])M.log("Type "+d+" already registered");else{I.subplotsRegistry[y.basePlotModule.name]||function(z){var j=z.name;if(I.subplotsRegistry[j])M.log("Plot type "+j+" already registered.");else for(var R in h(z),I.subplotsRegistry[j]=z,I.componentsRegistry)v(R,z.name)}(y.basePlotModule);for(var u={},S=0;S<m.length;S++)u[m[S]]=!0,I.allCategories[m[S]]=!0;for(var _ in I.modules[d]={_module:y,categories:u},w&&Object.keys(w).length&&(I.modules[d].meta=w),I.allTypes.push(d),I.componentsRegistry)f(_,d);y.layoutAttributes&&o(I.traceLayoutAttributes,y.layoutAttributes);var E=y.basePlotModule,L=E.name;if("mapbox"===L){var C=E.constants.styleRules;for(var P in C)x(".js-plotly-plot .plotly .mapboxgl-"+P,C[P])}"geo"!==L&&"mapbox"!==L||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function a(y){if("string"!=typeof y.name)throw new Error("Component module *name* must be a string.");var d=y.name;for(var m in I.componentsRegistry[d]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&l(I.layoutArrayContainers,d),h(y)),I.modules)f(d,m);for(var w in I.subplotsRegistry)v(d,w);for(var u in I.transformsRegistry)b(d,u);y.schema&&y.schema.layout&&r(e,y.schema.layout)}function i(y){if("string"!=typeof y.name)throw new Error("Transform module *name* must be a string.");var d="Transform module "+y.name,m="function"==typeof y.transform,w="function"==typeof y.calcTransform;if(!m&&!w)throw new Error(d+" is missing a *transform* or *calcTransform* method.");for(var u in m&&w&&M.log([d+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(y.attributes)||M.log(d+" registered without an *attributes* object."),"function"!=typeof y.supplyDefaults&&M.log(d+" registered without a *supplyDefaults* method."),I.transformsRegistry[y.name]=y,I.componentsRegistry)b(u,y.name)}function c(y){var d=y.name,m=d.split("-")[0],w=y.dictionary,u=y.format,S=w&&Object.keys(w).length,_=u&&Object.keys(u).length,E=I.localeRegistry,L=E[d];if(L||(E[d]=L={}),m!==d){var C=E[m];C||(E[m]=C={}),S&&C.dictionary===L.dictionary&&(C.dictionary=w),_&&C.format===L.format&&(C.format=u)}S&&(L.dictionary=w),_&&(L.format=u)}function h(y){if(y.layoutAttributes){var d=y.layoutAttributes._arrayAttrRegexps;if(d)for(var m=0;m<d.length;m++)l(I.layoutArrayRegexes,d[m])}}function f(y,d){var m=I.componentsRegistry[y].schema;if(m&&m.traces){var w=m.traces[d];w&&r(I.modules[d]._module.attributes,w)}}function b(y,d){var m=I.componentsRegistry[y].schema;if(m&&m.transforms){var w=m.transforms[d];w&&r(I.transformsRegistry[d].attributes,w)}}function v(y,d){var m=I.componentsRegistry[y].schema;if(m&&m.subplots){var w=I.subplotsRegistry[d],u=w.layoutAttributes,S="subplot"===w.attr?w.name:w.attr;Array.isArray(S)&&(S=S[0]);var _=m.subplots[S];u&&_&&r(u,_)}}function g(y){return"object"==typeof y&&(y=y.type),y}I.modules={},I.allCategories={},I.allTypes=[],I.subplotsRegistry={},I.transformsRegistry={},I.componentsRegistry={},I.layoutArrayContainers=[],I.layoutArrayRegexes=[],I.traceLayoutAttributes={},I.localeRegistry={},I.apiMethodRegistry={},I.collectableSubplotTypes=null,I.register=function(y){if(I.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var d=0;d<y.length;d++){var m=y[d];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":n(m);break;case"transform":i(m);break;case"component":a(m);break;case"locale":c(m);break;case"apiMethod":I.apiMethodRegistry[m.name]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},I.getModule=function(y){var d=I.modules[g(y)];return!!d&&d._module},I.traceIs=function(y,d){if("various"===(y=g(y)))return!1;var m=I.modules[y];return m||(y&&M.log("Unrecognized trace type "+y+"."),m=I.modules[s.type.dflt]),!!m.categories[d]},I.getTransformIndices=function(y,d){for(var m=[],w=y.transforms||[],u=0;u<w.length;u++)w[u].type===d&&m.push(u);return m},I.hasTransform=function(y,d){for(var m=y.transforms||[],w=0;w<m.length;w++)if(m[w].type===d)return!0;return!1},I.getComponentMethod=function(y,d){var m=I.componentsRegistry[y];return m&&m[d]||k},I.call=function(){var y=arguments[0],d=[].slice.call(arguments,1);return I.apiMethodRegistry[y].apply(null,d)}},61914:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=k.extendFlat,T=k.extendDeep;function x(p){var s;switch(p){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}$.exports=function(p,s){var e,n=p.layout,a=T([],p.data),i=T({},n,x(s.tileClass)),c=p._context||{};if(s.width&&(i.width=s.width),s.height&&(i.height=s.height),"thumbnail"===s.tileClass||"themes__thumb"===s.tileClass){i.annotations=[];var h=Object.keys(i);for(e=0;e<h.length;e++)["xaxis","yaxis","zaxis"].indexOf(h[e].slice(0,5))>-1&&(i[h[e]].title={text:""});for(e=0;e<a.length;e++){var f=a[e];f.showscale=!1,f.marker&&(f.marker.showscale=!1),M.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(s.annotations))for(e=0;e<s.annotations.length;e++)i.annotations.push(s.annotations[e]);var b=Object.keys(i).filter(function(m){return m.match(/^scene\d*$/)});if(b.length){var v={};for("thumbnail"===s.tileClass&&(v={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),e=0;e<b.length;e++){var g=i[b[e]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),l(g.xaxis,v),l(g.yaxis,v),l(g.zaxis,v),g._scene=null}}var y=document.createElement("div");s.tileClass&&(y.className=s.tileClass);var d={gd:y,td:y,layout:i,data:a,config:{staticPlot:void 0===s.staticPlot||s.staticPlot,plotGlPixelRatio:void 0===s.plotGlPixelRatio?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==s.setBackground&&(d.config.setBackground=s.setBackground||"opaque"),d.gd.defaultLayout=x(s.tileClass),d}},7239:function($,I,t){"use strict";var M=t(71828),k=t(403),l=t(22435),T=t(25095);$.exports=function(x,p){var s;return M.isPlainObject(x)||(s=M.getGraphDiv(x)),(p=p||{}).format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(e,o){s&&s._snapshotInProgress&&o(new Error("Snapshotting already in progress.")),M.isIE()&&"svg"!==p.format&&o(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var r=k(x,p),n=p.filename||x.fn||"newplot";n+="."+p.format.replace("-","."),r.then(function(a){return s&&(s._snapshotInProgress=!1),l(a,n,p.format)}).then(function(a){e(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),o(a)})})}},22435:function($,I,t){"use strict";var M=t(71828),k=t(25095);$.exports=function(l,T,x){var p=document.createElement("a"),s="download"in p;return new Promise(function(e,o){var r,n;return M.isIE()?(r=k.createBlob(l,"svg"),window.navigator.msSaveBlob(r,T),r=null,e(T)):s?(r=k.createBlob(l,x),n=k.createObjectURL(r),p.href=n,p.download=T,document.body.appendChild(p),p.click(),document.body.removeChild(p),k.revokeObjectURL(n),r=null,e(T)):M.isSafari()?(k.octetStream(("svg"===x?",":";base64,")+encodeURIComponent(l)),e(T)):void o(new Error("download error"))})}},25095:function($,I,t){"use strict";var M=t(73972);I.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},I.getRedrawFunc=function(l){return function(){M.getComponentMethod("colorbar","draw")(l)}},I.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},I.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var k=window.URL||window.webkitURL;I.createObjectURL=function(l){return k.createObjectURL(l)},I.revokeObjectURL=function(l){return k.revokeObjectURL(l)},I.createBlob=function(l,T){if("svg"===T)return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if("full-json"===T)return new window.Blob([l],{type:"application/json;charset=utf-8"});var x=function(p){for(var s=p.length,e=new ArrayBuffer(s),o=new Uint8Array(e),r=0;r<s;r++)o[r]=p.charCodeAt(r);return e}(window.atob(l));return new window.Blob([x],{type:"image/"+T})},I.octetStream=function(l){document.location.href="data:application/octet-stream"+l},I.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,I.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function($,I,t){"use strict";var M=t(25095),k={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:t(61914),toSVG:t(5900),svgToImg:t(70942),toImage:t(56395),downloadImage:t(7239)};$.exports=k},70942:function($,I,t){"use strict";var M=t(71828),k=t(15398).EventEmitter,l=t(25095);$.exports=function(T){var x=T.emitter||new k,p=new Promise(function(s,e){var o=window.Image,r=T.svg,n=T.format||"png";if(M.isIE()&&"svg"!==n){var a=new Error(l.MSG_IE_BAD_FORMAT);return e(a),T.promise?p:x.emit("error",a)}var i,c,h=T.canvas,f=T.scale||1,g=f*(T.width||300),y=f*(T.height||150),d=h.getContext("2d",{willReadFrequently:!0}),m=new o;"svg"===n||M.isSafari()?c=l.encodeSVG(r):(i=l.createBlob(r,"svg"),c=l.createObjectURL(i)),h.width=g,h.height=y,m.onload=function(){var w;switch(i=null,l.revokeObjectURL(c),"svg"!==n&&d.drawImage(m,0,0,g,y),n){case"jpeg":w=h.toDataURL("image/jpeg");break;case"png":w=h.toDataURL("image/png");break;case"webp":w=h.toDataURL("image/webp");break;case"svg":w=c;break;default:var u="Image format is not jpeg, png, svg or webp.";if(e(new Error(u)),!T.promise)return x.emit("error",u)}s(w),T.promise||x.emit("success",w)},m.onerror=function(w){if(i=null,l.revokeObjectURL(c),e(w),!T.promise)return x.emit("error",w)},m.src=c});return T.promise?p:x}},56395:function($,I,t){"use strict";var M=t(15398).EventEmitter,k=t(73972),l=t(71828),T=t(25095),x=t(61914),p=t(5900),s=t(70942);$.exports=function(e,o){var r=new M,n=x(e,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var i=T.getRedrawFunc(a);return k.call("_doPlot",a,n.data,n.layout,n.config).then(i).then(function(){var c=T.getDelay(a._fullLayout);setTimeout(function(){var h=p(a),f=document.createElement("canvas");f.id=l.randstr(),(r=s({format:o.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:f,emitter:r,svg:h})).clean=function(){a&&document.body.removeChild(a)}},c)}).catch(function(c){r.emit("error",c)}),r}},5900:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(7901),x=t(77922),p=/"/g,s="TOBESTRIPPED",e=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");$.exports=function(o,r,n){var a,i=o._fullLayout,c=i._paper,h=i._toppaper,f=i.width,b=i.height;c.insert("rect",":first-child").call(l.setRect,0,0,f,b).call(T.fill,i.paper_bgcolor);var v=i._basePlotModules||[];for(a=0;a<v.length;a++){var g=v[a];g.toSVG&&g.toSVG(o)}if(h){var y=h.node().childNodes,d=Array.prototype.slice.call(y);for(a=0;a<d.length;a++){var m=d[a];m.childNodes.length&&c.node().appendChild(m)}}i._draggers&&i._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var u=M.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){u.style({visibility:null,display:null});var S=this.style.fontFamily;S&&-1!==S.indexOf('"')&&u.style("font-family",S.replace(p,s))}else u.remove()}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var u=M.select(this),S=this.style.fill;S&&-1!==S.indexOf("url(")&&u.style("fill",S.replace(p,s));var _=this.style.stroke;_&&-1!==_.indexOf("url(")&&u.style("stroke",_.replace(p,s))}),"pdf"!==r&&"eps"!==r||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(x.xmlns,"xmlns",x.svg),c.node().setAttributeNS(x.xmlns,"xmlns:xlink",x.xlink),"svg"===r&&n&&(c.attr("width",n*f),c.attr("height",n*b),c.attr("viewBox","0 0 "+f+" "+b));var u,S,_,w=(new window.XMLSerializer).serializeToString(c.node());return w=(w=(u=w,S=M.select("body").append("div").style({display:"none"}).html(""),_=u.replace(/(&[^;]*;)/gi,function(E){return"&lt;"===E?"&#60;":"&rt;"===E?"&#62;":-1!==E.indexOf("<")||-1!==E.indexOf(">")?"":S.html(E).text()}),S.remove(),w=_).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(e,"'"),k.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},75341:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(l.text,k,"tx"),M.mergeArray(l.hovertext,k,"htx");var x=l.marker;if(x){M.mergeArray(x.opacity,k,"mo",!0),M.mergeArray(x.color,k,"mc");var p=x.line;p&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"))}}},1486:function($,I,t){"use strict";var M=t(82196),k=t(12663).axisHoverFormat,l=t(5386).f,T=t(5386).s,x=t(50693),p=t(41940),s=t(97313),e=t(79952).u,o=t(1426).extendFlat,r=p({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=o({},M.marker.line.width,{dflt:0}),a=o({width:n,editType:"calc"},x("marker.line")),i=o({line:a,editType:"calc"},x("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:e});$.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:M.hovertext,hovertemplate:l({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},r,{}),insidetextfont:o({},r,{}),outsidetextfont:o({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:i,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function($,I,t){"use strict";var M=t(89298),k=t(42973),l=t(52075).hasColorscale,T=t(78803),x=t(75341),p=t(66279);$.exports=function(s,e){var o,r,n,a,i,c,h=M.getFromId(s,e.xaxis||"x"),f=M.getFromId(s,e.yaxis||"y"),b={msUTC:!(!e.base&&0!==e.base)};"h"===e.orientation?(o=h.makeCalcdata(e,"x",b),n=f.makeCalcdata(e,"y"),a=k(e,f,"y",n),i=!!e.yperiodalignment,c="y"):(o=f.makeCalcdata(e,"y",b),n=h.makeCalcdata(e,"x"),a=k(e,h,"x",n),i=!!e.xperiodalignment,c="x"),r=a.vals;for(var v=Math.min(r.length,o.length),g=new Array(v),y=0;y<v;y++)g[y]={p:r[y],s:o[y]},i&&(g[y].orig_p=n[y],g[y][c+"End"]=a.ends[y],g[y][c+"Start"]=a.starts[y]),e.ids&&(g[y].id=String(e.ids[y]));return l(e,"marker")&&T(s,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),l(e,"marker.line")&&T(s,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),x(g,e),p(g,e),g}},97313:function($){"use strict";$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function($,I,t){"use strict";var M=t(92770),k=t(71828).isArrayOrTypedArray,l=t(50606).BADNUM,T=t(73972),x=t(89298),p=t(99082).getAxisGroup,s=t(61546);function e(v,g,y,d,m){if(d.length){var w,u,S,_;switch(function(E,L){var C,P;for(C=0;C<L.length;C++){var z,j=L[C],R=j[0].trace,V="funnel"===R.type?R._base:R.base,D="h"===R.orientation?R.xcalendar:R.ycalendar,B="category"===E.type||"multicategory"===E.type?function(){return null}:E.d2c;if(k(V)){for(P=0;P<Math.min(V.length,j.length);P++)z=B(V[P],0,D),M(z)?(j[P].b=+z,j[P].hasB=1):j[P].b=0;for(;P<j.length;P++)j[P].b=0}else{z=B(V,0,D);var N=M(z);for(z=N?z:0,P=0;P<j.length;P++)j[P].b=z,N&&(j[P].hasB=1)}}}(y,d),m.mode){case"overlay":o(g,y,d,m);break;case"group":for(w=[],u=[],S=0;S<d.length;S++)void 0===(_=d[S])[0].trace.offset?u.push(_):w.push(_);u.length&&(E=v,C=y,j=new s(u,{posAxis:L=g,sepNegVal:!1,overlapNoMerge:!(z=m).norm}),function(R,V,D,B){for(var N=R._fullLayout,Y=D.minDiff,q=D.traces,H=q.length,X=D.positions.length!==D.distinctPositions.length,Q=Y*(1-B.gap),ne=p(N,V._id)+q[0][0].trace.orientation,re=N._alignmentOpts[ne]||{},ae=0;ae<H;ae++){var se,pe,ke=q[ae],me=ke[0].trace,ue=Object.keys((re[me.alignmentgroup]||{}).offsetGroups||{}).length,Ee=(se=ue?Q/ue:X?Q/H:Q)*(1-(B.groupgap||0));pe=ue?((2*me._offsetIndex+1-ue)*se-Ee)/2:X?((2*ae+1-H)*se-Ee)/2:-Ee/2;var de=ke[0].t;de.barwidth=Ee,de.poffset=pe,de.bargroupwidth=Q,de.bardelta=Y}D.binWidth=q[0][0].t.barwidth/100,n(D),a(V,D),i(V,D,X)}(E,L,j,z),function(R,V){for(var D=R.traces,B=0;B<D.length;B++){var N=D[B];if(void 0===N[0].trace.base)for(var U=new s([N],{posAxis:V,sepNegVal:!0,overlapNoMerge:!0}),J=0;J<N.length;J++){var Y=N[J];if(Y.p!==l){var q=U.put(Y.p,Y.b+Y.s);q&&(Y.b=q)}}}}(j,L),z.norm?(h(j),f(C,j,z)):c(C,j)),w.length&&o(g,y,w,m);break;case"stack":case"relative":for(w=[],u=[],S=0;S<d.length;S++)void 0===(_=d[S])[0].trace.base?u.push(_):w.push(_);u.length&&function(E,L,C,P,z){var j=new s(P,{posAxis:L,sepNegVal:"relative"===z.mode,overlapNoMerge:!(z.norm||"stack"===z.mode||"relative"===z.mode)});r(L,j,z),function(N,U,J){var Y,q,H,X,Q,ne,re=b(N),ae=U.traces;for(X=0;X<ae.length;X++)if("funnel"===(q=(Y=ae[X])[0].trace).type)for(Q=0;Q<Y.length;Q++)(ne=Y[Q]).s!==l&&U.put(ne.p,-.5*ne.s);for(X=0;X<ae.length;X++){H="funnel"===(q=(Y=ae[X])[0].trace).type;var se=[];for(Q=0;Q<Y.length;Q++)if((ne=Y[Q]).s!==l){var pe,ke=U.put(ne.p,pe=H?ne.s:ne.s+ne.b),me=ke+pe;ne.b=ke,ne[re]=me,J.norm||(se.push(me),ne.hasB&&se.push(ke))}J.norm||(q._extremes[N._id]=x.findExtremes(N,se,{tozero:!0,padded:!0}))}}(C,j,z);for(var R=0;R<P.length;R++)for(var V=P[R],D=0;D<V.length;D++){var B=V[D];B.s!==l&&B.b+B.s===j.get(B.p,B.s)&&(B._outmost=!0)}z.norm&&f(C,j,z)}(0,g,y,u,m),w.length&&o(g,y,w,m)}!function(E,L){var C,P,z,j=b(L),R={},V=1/0,D=-1/0;for(C=0;C<E.length;C++)for(z=E[C],P=0;P<z.length;P++){var B=z[P].p;M(B)&&(V=Math.min(V,B),D=Math.max(D,B))}var N=1e4/(D-V),U=R.round=function(ne){return String(Math.round(N*(ne-V)))};for(C=0;C<E.length;C++){(z=E[C])[0].t.extents=R;var J=z[0].t.poffset,Y=Array.isArray(J);for(P=0;P<z.length;P++){var q=z[P],H=q[j]-q.w/2;if(M(H)){var X=q[j]+q.w/2,Q=U(q.p);R[Q]=R[Q]?[Math.min(H,R[Q][0]),Math.max(X,R[Q][1])]:[H,X]}q.p0=q.p+(Y?J[P]:J),q.p1=q.p0+q.w,q.s0=q.b,q.s1=q.s0+q.s}}}(d,g)}var E,L,C,z,j}function o(v,g,y,d){for(var m=0;m<y.length;m++){var u=new s([y[m]],{posAxis:v,sepNegVal:!1,overlapNoMerge:!d.norm});r(v,u,d),d.norm?(h(u),f(g,u,d)):c(g,u)}}function r(v,g,y){for(var d=g.minDiff,m=g.traces,w=d*(1-y.gap),u=w*(1-(y.groupgap||0)),S=-u/2,_=0;_<m.length;_++){var E=m[_][0].t;E.barwidth=u,E.poffset=S,E.bargroupwidth=w,E.bardelta=d}g.binWidth=m[0][0].t.barwidth/100,n(g),a(v,g),i(v,g)}function n(v){var g,y,d=v.traces;for(g=0;g<d.length;g++){var m,w=d[g],u=w[0],S=u.trace,_=u.t,E=S._offset||S.offset,L=_.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,w.length),y=0;y<m.length;y++)M(m[y])||(m[y]=L);for(y=m.length;y<w.length;y++)m.push(L);_.poffset=m}else void 0!==E&&(_.poffset=E);var C=S._width||S.width,P=_.barwidth;if(k(C)){var z=Array.prototype.slice.call(C,0,w.length);for(y=0;y<z.length;y++)M(z[y])||(z[y]=P);for(y=z.length;y<w.length;y++)z.push(P);if(_.barwidth=z,void 0===E){for(m=[],y=0;y<w.length;y++)m.push(L+(P-z[y])/2);_.poffset=m}}else void 0!==C&&(_.barwidth=C,void 0===E&&(_.poffset=L+(P-C)/2))}}function a(v,g){for(var y=g.traces,d=b(v),m=0;m<y.length;m++)for(var w=y[m],u=w[0].t,S=u.poffset,_=Array.isArray(S),E=u.barwidth,L=Array.isArray(E),C=0;C<w.length;C++){var P=w[C],z=P.w=L?E[C]:E;void 0===P.p&&(P.p=P[d],P["orig_"+d]=P[d]),P[d]=P.p+((_?S[C]:S)+z/2)}}function i(v,g,y){var d=g.traces,m=g.minDiff/2;x.minDtick(v,g.minDiff,g.distinctPositions[0],y);for(var w=0;w<d.length;w++){var u,S,_,E,L=d[w],C=L[0],P=C.trace,z=[];for(E=0;E<L.length;E++)S=(u=L[E]).p-m,z.push(S,_=u.p+m);if(P.width||P.offset){var j=C.t,R=j.poffset,V=j.barwidth,D=Array.isArray(R),B=Array.isArray(V);for(E=0;E<L.length;E++)_=(S=(u=L[E]).p+(D?R[E]:R))+(B?V[E]:V),z.push(S,_)}P._extremes[v._id]=x.findExtremes(v,z,{padded:!1})}}function c(v,g){for(var y=g.traces,d=b(v),m=0;m<y.length;m++){for(var w=y[m],u=w[0].trace,S="scatter"===u.type,_="v"===u.orientation,E=[],L=!1,C=0;C<w.length;C++){var P=w[C],z=S?0:P.b,j=S?_?P.y:P.x:z+P.s;P[d]=j,E.push(j),P.hasB&&E.push(z),P.hasB&&P.b||(L=!0)}u._extremes[v._id]=x.findExtremes(v,E,{tozero:L,padded:!0})}}function h(v){for(var g=v.traces,y=0;y<g.length;y++)for(var d=g[y],m=0;m<d.length;m++){var w=d[m];w.s!==l&&v.put(w.p,w.b+w.s)}}function f(v,g,y){var d=g.traces,m=b(v),w="fraction"===y.norm?1:100,u=w/1e9,S=v.l2c(v.c2l(0)),_="stack"===y.mode?w:S;function E(J){return M(v.c2l(J))&&(J<S-u||J>_+u||!M(S))}for(var L=0;L<d.length;L++){for(var C=d[L],P=C[0].trace,z=[],j=!1,R=!1,V=0;V<C.length;V++){var D=C[V];if(D.s!==l){var B=Math.abs(w/g.get(D.p,D.s));D.b*=B,D.s*=B;var N=D.b,U=N+D.s;D[m]=U,z.push(U),R=R||E(U),D.hasB&&(z.push(N),R=R||E(N)),D.hasB&&D.b||(j=!0)}}P._extremes[v._id]=x.findExtremes(v,z,{tozero:j,padded:R})}}function b(v){return v._id.charAt(0)}$.exports={crossTraceCalc:function(v,g){for(var y=g.xaxis,d=g.yaxis,m=v._fullLayout,w=v._fullData,u=v.calcdata,S=[],_=[],E=0;E<w.length;E++){var L=w[E];if(!0===L.visible&&T.traceIs(L,"bar")&&L.xaxis===y._id&&L.yaxis===d._id&&("h"===L.orientation?S.push(u[E]):_.push(u[E]),L._computePh))for(var C=v.calcdata[E],P=0;P<C.length;P++)"function"==typeof C[P].ph0&&(C[P].ph0=C[P].ph0()),"function"==typeof C[P].ph1&&(C[P].ph1=C[P].ph1())}var z={xCat:"category"===y.type||"multicategory"===y.type,yCat:"category"===d.type||"multicategory"===d.type,mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};e(v,y,d,_,z),e(v,d,y,S,z)},setGroupPositions:e}},90769:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(73972),T=t(67513),x=t(73927),p=t(98340),s=t(26125),e=t(1486),o=M.coerceFont;function r(n,a,i,c,h,f){var b=!1!==(f=f||{}).moduleHasSelected,v=!1!==f.moduleHasUnselected,g=!1!==f.moduleHasConstrain,y=!1!==f.moduleHasCliponaxis,d=!1!==f.moduleHasTextangle,m=!1!==f.moduleHasInsideanchor,w=!!f.hasPathbar,u=Array.isArray(h)||"auto"===h,S=u||"inside"===h,_=u||"outside"===h;if(S||_){var E=o(c,"textfont",i.font),L=M.extendFlat({},E),C=!(n.textfont&&n.textfont.color);if(C&&delete L.color,o(c,"insidetextfont",L),w){var P=M.extendFlat({},E);C&&delete P.color,o(c,"pathbar.textfont",P)}_&&o(c,"outsidetextfont",E),b&&c("selected.textfont.color"),v&&c("unselected.textfont.color"),g&&c("constraintext"),y&&c("cliponaxis"),d&&c("textangle"),c("texttemplate")}S&&m&&c("insidetextanchor")}$.exports={supplyDefaults:function(n,a,i,c){function h(g,y){return M.coerce(n,a,e,g,y)}if(T(n,a,c,h)){x(n,a,c,h),h("xhoverformat"),h("yhoverformat"),h("orientation",a.x&&!a.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var f=h("textposition");r(n,0,c,h,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),p(n,a,h,i,c);var b=(a.marker.line||{}).color,v=l.getComponentMethod("errorbars","supplyDefaults");v(n,a,b||k.defaultLine,{axis:"y"}),v(n,a,b||k.defaultLine,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1},crossTraceDefaults:function(n,a){var c;function h(b){return M.coerce(c._input,c,e,b)}if("group"===a.barmode)for(var f=0;f<n.length;f++)"bar"===(c=n[f]).type&&s(c._input,c,a,h)},handleText:r}},58065:function($){"use strict";$.exports=function(I,t,M){return I.x="xVal"in t?t.xVal:t.x,I.y="yVal"in t?t.yVal:t.y,t.xa&&(I.xaxis=t.xa),t.ya&&(I.yaxis=t.ya),"h"===M.orientation?(I.label=I.y,I.value=I.x):(I.label=I.x,I.value=I.y),I}},69383:function($,I,t){"use strict";var M=t(92770),k=t(84267),l=t(71828).isArrayOrTypedArray;I.coerceString=function(T,x,p){if("string"==typeof x){if(x||!T.noBlank)return x}else if(("number"==typeof x||!0===x)&&!T.strict)return String(x);return void 0!==p?p:T.dflt},I.coerceNumber=function(T,x,p){if(M(x)){x=+x;var s=T.min,e=T.max;if(!(void 0!==s&&x<s||void 0!==e&&x>e))return x}return void 0!==p?p:T.dflt},I.coerceColor=function(T,x,p){return k(x).isValid()?x:void 0!==p?p:T.dflt},I.coerceEnumerated=function(T,x,p){return T.coerceNumber&&(x=+x),-1!==T.values.indexOf(x)?x:void 0!==p?p:T.dflt},I.getValue=function(T,x){var p;return Array.isArray(T)?x<T.length&&(p=T[x]):p=T,p},I.getLineWidth=function(T,x){return 0<x.mlw?x.mlw:l(T.marker.line.width)?0:T.marker.line.width}},95423:function($,I,t){"use strict";var M=t(30211),k=t(73972),l=t(7901),T=t(71828).fillText,x=t(69383).getLineWidth,p=t(89298).hoverLabelText,s=t(50606).BADNUM;function e(r,n,a,i,c){var h,f,b,v,g,y,d,m=r.cd,w=m[0].trace,u=m[0].t,S="closest"===i,_="waterfall"===w.type,E=r.maxHoverDistance,L=r.maxSpikeDistance;"h"===w.orientation?(h=a,f=n,b="y",v="x",g=Y,y=U):(h=n,f=a,b="x",v="y",y=Y,g=U);var C=w[b+"period"],P=S||C;function z(se){return R(se,-1)}function j(se){return R(se,1)}function R(se,pe){return se[b]+pe*se.w/2}function V(se){return se[b+"End"]-se[b+"Start"]}var D=S?z:C?function(se){return se.p-V(se)/2}:function(se){return Math.min(z(se),se.p-u.bardelta/2)},B=S?j:C?function(se){return se.p+V(se)/2}:function(se){return Math.max(j(se),se.p+u.bardelta/2)};function N(se,pe,ke){return c.finiteRange&&(ke=0),M.inbox(se-h,pe-h,ke+Math.min(1,Math.abs(pe-se)/d)-1)}function U(se){return N(D(se),B(se),E)}function J(se){var pe=se[v];if(_){var ke=Math.abs(se.rawS)||0;f>0?pe+=ke:f<0&&(pe-=ke)}return pe}function Y(se){var pe=f,ke=se.b,me=J(se);return M.inbox(ke-pe,me-pe,E+(me-pe)/(me-ke)-1)}var q=r[b+"a"],H=r[v+"a"];d=Math.abs(q.r2c(q.range[1])-q.r2c(q.range[0]));var se,pe,ke,me,X=M.getDistanceFunction(i,g,y,function(se){return(g(se)+y(se))/2});if(M.getClosest(m,X,r),!1!==r.index&&m[r.index].p!==s){P||(D=function(se){return Math.min(z(se),se.p-u.bargroupwidth/2)},B=function(se){return Math.max(j(se),se.p+u.bargroupwidth/2)});var Q=m[r.index],ne=w.base?Q.b+Q.s:Q.s;r[v+"0"]=r[v+"1"]=H.c2p(Q[v],!0),r[v+"LabelVal"]=ne;var re=u.extents[u.extents.round(Q.p)];return r[b+"0"]=q.c2p(S?D(Q):re[0],!0),r[b+"1"]=q.c2p(S?B(Q):re[1],!0),r[b+"LabelVal"]=void 0!==Q.orig_p?Q.orig_p:Q.p,r.labelLabel=p(q,r[b+"LabelVal"],w[b+"hoverformat"]),r.valueLabel=p(H,r[v+"LabelVal"],w[v+"hoverformat"]),r.baseLabel=p(H,Q.b,w[v+"hoverformat"]),r.spikeDistance=(pe=f,ke=(se=Q).b,me=J(se),(M.inbox(ke-pe,me-pe,L+(me-pe)/(me-ke)-1)+function(se){return N(z(se),j(se),L)}(Q))/2),r[b+"Spike"]=q.c2p(Q.p,!0),T(Q,w,r),r.hovertemplate=w.hovertemplate,r}}function o(r,n){var a=n.mcc||r.marker.color,i=n.mlcc||r.marker.line.color,c=x(r,n);return l.opacity(a)?a:l.opacity(i)&&c?i:void 0}$.exports={hoverPoints:function(r,n,a,i,c){var h=e(r,n,a,i,c);if(h){var f=h.cd,b=f[0].trace,v=f[h.index];return h.color=o(b,v),k.getComponentMethod("errorbars","hoverInfo")(v,b,h),[h]}},hoverOnBars:e,getTraceColor:o}},60822:function($,I,t){"use strict";$.exports={attributes:t(1486),layoutAttributes:t(43641),supplyDefaults:t(90769).supplyDefaults,crossTraceDefaults:t(90769).crossTraceDefaults,supplyLayoutDefaults:t(13957),calc:t(92290),crossTraceCalc:t(11661).crossTraceCalc,colorbar:t(4898),arraysToCalcdata:t(75341),plot:t(17295).plot,style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(95423).hoverPoints,eventData:t(58065),selectPoints:t(81974),moduleType:"trace",name:"bar",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function($){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function($,I,t){"use strict";var M=t(73972),k=t(89298),l=t(71828),T=t(43641);$.exports=function(x,p,s){function e(b,v){return l.coerce(x,p,T,b,v)}for(var o=!1,r=!1,n=!1,a={},i=e("barmode"),c=0;c<s.length;c++){var h=s[c];if(M.traceIs(h,"bar")&&h.visible){if(o=!0,"group"===i){var f=h.xaxis+h.yaxis;a[f]&&(n=!0),a[f]=!0}h.visible&&"histogram"===h.type&&"category"!==k.getFromId({_fullLayout:p},h["v"===h.orientation?"xaxis":"yaxis"]).type&&(r=!0)}}o?("overlay"!==i&&e("barnorm"),e("bargap",r&&!n?0:.2),e("bargroupgap")):delete p.barmode}},17295:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(71828),T=t(63893),x=t(7901),p=t(91424),s=t(73972),e=t(89298).tickText,o=t(72597),r=o.recordMinTextSize,n=o.clearMinTextSize,a=t(16688),i=t(69383),c=t(97313),h=t(1486),f=h.text,b=h.textposition,v=t(23469).appendArrayPointValue,g=c.TEXTPAD;function y(L){return L.id}function m(L,C){return L<C?1:-1}function w(L,C,P,z){var j;return!C.uniformtext.mode&&u(P)?(z&&(j=z()),L.transition().duration(P.duration).ease(P.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})):L}function u(L){return L&&L.duration>0}function S(L){return"auto"===L?0:L}function _(L,C){var P=Math.PI/180*C,z=Math.abs(Math.sin(P)),j=Math.abs(Math.cos(P));return{x:L.width*j+L.height*z,y:L.width*z+L.height*j}}function E(L,C,P,z,j,R){var V=!!R.isHorizontal,D=!!R.constrained,B=R.angle||0,N=R.anchor||"end",U="end"===N,J="start"===N,Y=((R.leftToRight||0)+1)/2,q=1-Y,H=j.width,X=j.height,Q=Math.abs(C-L),ne=Math.abs(z-P),re=Q>2*g&&ne>2*g?g:0;Q-=2*re,ne-=2*re;var ae=S(B);"auto"!==B||H<=Q&&X<=ne||!(H>Q||X>ne)||(H>ne||X>Q)&&H<X==Q<ne||(ae+=90);var se=_(j,ae),pe=1;D&&(pe=Math.min(1,Q/se.x,ne/se.y));var ke=j.left*q+j.right*Y,me=(j.top+j.bottom)/2,le=(L+g)*q+(C-g)*Y,ue=(P+z)/2,Ee=0,de=0;if(J||U){var xe=(V?se.x:se.y)/2,Te=V?m(L,C):m(P,z);V?J?(le=L+Te*re,Ee=-Te*xe):(le=C-Te*re,Ee=Te*xe):J?(ue=P+Te*re,de=-Te*xe):(ue=z-Te*re,de=Te*xe)}return{textX:ke,textY:me,targetX:le,targetY:ue,anchorX:Ee,anchorY:de,scale:pe,rotate:ae}}$.exports={plot:function(L,C,P,z,j,R){var V=C.xaxis,D=C.yaxis,B=L._fullLayout,N=L._context.staticPlot;j||(j={mode:B.barmode,norm:B.barmode,gap:B.bargap,groupgap:B.bargroupgap},n("bar",B));var U=l.makeTraceGroups(z,P,"trace bars").each(function(J){var Y=M.select(this),q=J[0].trace,Q="bar"===q.type||"funnel"===q.type,ne=0;"waterfall"===q.type&&q.connector.visible&&"between"===q.connector.mode&&(ne=q.connector.line.width/2);var re="h"===q.orientation,ae=u(j),se=l.ensureSingle(Y,"g","points"),pe=function d(L){if(L.ids)return y}(q),ke=se.selectAll("g.point").data(l.identity,pe);ke.enter().append("g").classed("point",!0),ke.exit().remove(),ke.each(function(le,ue){var Ee,de,ge,be,Ie,He,Ve,tt,nt,st,xe=M.select(this),Te=(be=V,Ie=D,tt=[],st=(He=re)?Ie:be,(Ve=[])[0]=(nt=He?be:Ie).c2p((ge=le).s0,!0),tt[0]=st.c2p(ge.p0,!0),Ve[1]=nt.c2p(ge.s1,!0),tt[1]=st.c2p(ge.p1,!0),He?[Ve,tt]:[tt,Ve]),we=Te[0][0],K=Te[0][1],oe=Te[1][0],he=Te[1][1],ye=0==(re?K-we:he-oe);if(ye&&Q&&i.getLineWidth(q,le)&&(ye=!1),ye||(ye=!(k(we)&&k(K)&&k(oe)&&k(he))),le.isBlank=ye,ye&&(re?K=we:he=oe),ne&&!ye&&(re?(we-=m(we,K)*ne,K+=m(we,K)*ne):(oe-=m(oe,he)*ne,he+=m(oe,he)*ne)),"waterfall"===q.type){if(!ye){var Me=q[le.dir].marker;Ee=Me.line.width,de=Me.color}}else Ee=i.getLineWidth(q,le),de=le.mc||q.marker.color;function Re(ge){var be=M.round(Ee/2%1,2);return 0===j.gap&&0===j.groupgap?M.round(Math.round(ge)-be,2):ge}if(!L._context.staticPlot){var Pe=x.opacity(de)<1||Ee>.01?Re:function(ge,be,Ie){return Ie&&ge===be?ge:Math.abs(ge-be)>=2?Re(ge):ge>be?Math.ceil(ge):Math.floor(ge)};we=Pe(we,K,re),K=Pe(K,we,re),oe=Pe(oe,he,!re),he=Pe(he,oe,!re)}var De=w(l.ensureSingle(xe,"path"),B,j,R);if(De.style("vector-effect",N?"none":"non-scaling-stroke").attr("d",isNaN((K-we)*(he-oe))||ye&&L._context.staticPlot?"M0,0Z":"M"+we+","+oe+"V"+he+"H"+K+"V"+oe+"Z").call(p.setClipUrl,C.layerClipId,L),!B.uniformtext.mode&&ae){var fe=p.makePointStyleFns(q);p.singlePointStyle(le,De,q,fe,L)}(function(ge,be,Ie,He,Ve,tt,nt,st,dt,wt,_t){var pt,Pt=be.xaxis,St=be.yaxis,Ot=ge._fullLayout;function jt(Xt,Kt,fn){return l.ensureSingle(Xt,"text").text(Kt).attr({class:"bartext bartext-"+pt,"text-anchor":"middle","data-notex":1}).call(p.font,fn).call(T.convertToTspans,ge)}var Kt,fn,nn,xn,jn,mn,Dt=He[0].trace,Ye="h"===Dt.orientation,Ze=(fn=Ve,nn=Pt,xn=St,jn=(mn=(Kt=He)[0].trace).texttemplate?function(en,vn,on,sn,En){var kn=vn[0].trace,zn=l.castOption(kn,on,"texttemplate");if(!zn)return"";var Fn,Bn,er,Xn,mr="histogram"===kn.type,ur="waterfall"===kn.type,$n="funnel"===kn.type,lr="h"===kn.orientation;function hr(Un){return e(Xn,Xn.c2l(Un),!0).text}lr?(Fn="y",Bn=En,er="x",Xn=sn):(Fn="x",Bn=sn,er="y",Xn=En);var pn=vn[on],An={};An.label=pn.p,An.labelLabel=An[Fn+"Label"]=e(Bn,Bn.c2l(pn.p),!0).text;var Tn=l.castOption(kn,pn.i,"text");(0===Tn||Tn)&&(An.text=Tn),An.value=pn.s,An.valueLabel=An[er+"Label"]=hr(pn.s);var Rn={};v(Rn,kn,pn.i),(mr||void 0===Rn.x)&&(Rn.x=lr?An.value:An.label),(mr||void 0===Rn.y)&&(Rn.y=lr?An.label:An.value),(mr||void 0===Rn.xLabel)&&(Rn.xLabel=lr?An.valueLabel:An.labelLabel),(mr||void 0===Rn.yLabel)&&(Rn.yLabel=lr?An.labelLabel:An.valueLabel),ur&&(An.delta=+pn.rawS||pn.s,An.deltaLabel=hr(An.delta),An.final=pn.v,An.finalLabel=hr(An.final),An.initial=An.final-An.delta,An.initialLabel=hr(An.initial)),$n&&(An.value=pn.s,An.valueLabel=hr(An.value),An.percentInitial=pn.begR,An.percentInitialLabel=l.formatPercent(pn.begR),An.percentPrevious=pn.difR,An.percentPreviousLabel=l.formatPercent(pn.difR),An.percentTotal=pn.sumR,An.percenTotalLabel=l.formatPercent(pn.sumR));var qn=l.castOption(kn,pn.i,"customdata");return qn&&(An.customdata=qn),l.texttemplateString(zn,An,en._d3locale,Rn,An,kn._meta||{})}(Ot,Kt,fn,nn,xn):mn.textinfo?function(en,vn,on,sn){var En=en[0].trace,kn="h"===En.orientation,zn="waterfall"===En.type,Fn="funnel"===En.type;function Bn(qn){return e(kn?on:sn,+qn,!0).text}var er,ur=en[vn],$n=En.textinfo.split("+"),lr=[],hr=function(qn){return-1!==$n.indexOf(qn)};if(hr("label")&&lr.push(e(kn?sn:on,en[vn].p,!0).text),hr("text")&&(0===(er=l.castOption(En,ur.i,"text"))||er)&&lr.push(er),zn){var Gt=+ur.rawS||ur.s,pn=ur.v,An=pn-Gt;hr("initial")&&lr.push(Bn(An)),hr("delta")&&lr.push(Bn(Gt)),hr("final")&&lr.push(Bn(pn))}if(Fn){hr("value")&&lr.push(Bn(ur.s));var Tn=0;hr("percent initial")&&Tn++,hr("percent previous")&&Tn++,hr("percent total")&&Tn++;var Rn=Tn>1;hr("percent initial")&&(er=l.formatPercent(ur.begR),Rn&&(er+=" of initial"),lr.push(er)),hr("percent previous")&&(er=l.formatPercent(ur.difR),Rn&&(er+=" of previous"),lr.push(er)),hr("percent total")&&(er=l.formatPercent(ur.sumR),Rn&&(er+=" of total"),lr.push(er))}return lr.join("<br>")}(Kt,fn,nn,xn):i.getValue(mn.text,fn),i.coerceString(f,jn));pt=function(Xt,Kt){var fn=i.getValue(Xt.textposition,Kt);return i.coerceEnumerated(b,fn)}(Dt,Ve);var Je=He[Ve],at=!("stack"===wt.mode||"relative"===wt.mode)||Je._outmost;if(Ze&&"none"!==pt&&(!Je.isBlank&&tt!==nt&&st!==dt||"auto"!==pt&&"inside"!==pt)){var Se=Ot.font,ze=a.getBarColor(He[Ve],Dt),Ke=a.getInsideTextFont(Dt,Ve,Se,ze),it=a.getOutsideTextFont(Dt,Ve,Se),ct=Ie.datum();Ye?"log"===Pt.type&&ct.s0<=0&&(tt=Pt.range[0]<Pt.range[1]?0:Pt._length):"log"===St.type&&ct.s0<=0&&(st=St.range[0]<St.range[1]?St._length:0);var mt,Lt,At,ht,Et,gt=Math.abs(nt-tt)-2*g,kt=Math.abs(dt-st)-2*g;if("outside"===pt&&(at||Je.hasB||(pt="inside")),"auto"===pt&&(at?(pt="inside",mt=jt(Ie,Ze,Et=l.ensureUniformFontSize(ge,Ke)),At=(Lt=p.bBox(mt.node())).width,ht=Lt.height,At>0&&ht>0&&(At<=gt&&ht<=kt||At<=kt&&ht<=gt||(Ye?gt>=At*(kt/ht):kt>=ht*(gt/At)))?pt="inside":(pt="outside",mt.remove(),mt=null)):pt="inside"),!mt){var It=(mt=jt(Ie,Ze,Et=l.ensureUniformFontSize(ge,"outside"===pt?it:Ke))).attr("transform");if(mt.attr("transform",""),At=(Lt=p.bBox(mt.node())).width,ht=Lt.height,mt.attr("transform",It),At<=0||ht<=0)return void mt.remove()}var Ut,Nt=Dt.textangle;Ut="outside"===pt?function(Xt,Kt,fn,nn,xn,jn){var mn,en=!!jn.isHorizontal,vn=!!jn.constrained,on=jn.angle||0,sn=xn.width,En=xn.height,kn=Math.abs(Kt-Xt),zn=Math.abs(nn-fn);mn=en?zn>2*g?g:0:kn>2*g?g:0;var Fn=1;vn&&(Fn=en?Math.min(1,zn/En):Math.min(1,kn/sn));var Bn=S(on),er=_(xn,Bn),Xn=(en?er.x:er.y)/2,mr=(xn.left+xn.right)/2,ur=(xn.top+xn.bottom)/2,$n=(Xt+Kt)/2,lr=(fn+nn)/2,hr=0,Gt=0,pn=en?m(Kt,Xt):m(fn,nn);return en?($n=Kt-pn*mn,hr=pn*Xn):(lr=nn+pn*mn,Gt=-pn*Xn),{textX:mr,textY:ur,targetX:$n,targetY:lr,anchorX:hr,anchorY:Gt,scale:Fn,rotate:Bn}}(tt,nt,st,dt,Lt,{isHorizontal:Ye,constrained:"both"===Dt.constraintext||"outside"===Dt.constraintext,angle:Nt}):E(tt,nt,st,dt,Lt,{isHorizontal:Ye,constrained:"both"===Dt.constraintext||"inside"===Dt.constraintext,angle:Nt,anchor:Dt.insidetextanchor}),Ut.fontSize=Et.size,r("histogram"===Dt.type?"bar":Dt.type,Ut,Ot),Je.transform=Ut;var qt=w(mt,Ot,wt,_t);l.setTransormAndDisplay(qt,Ut)}else Ie.select("text").remove()})(L,C,xe,J,ue,we,K,oe,he,j,R),C.layerClipId&&p.hideOutsideRangePoint(le,xe.select("text"),V,D,q.xcalendar,q.ycalendar)}),p.setClipUrl(Y,!1===q.cliponaxis?null:C.layerClipId,L)});s.getComponentMethod("errorbars","plot")(L,U,C,j)},toMoveInsideBar:E}},81974:function($){"use strict";function I(t,M,k,l,T){var x=M.c2p(l?t.s0:t.p0,!0),p=M.c2p(l?t.s1:t.p1,!0),s=k.c2p(l?t.p0:t.s0,!0),e=k.c2p(l?t.p1:t.s1,!0);return T?[(x+p)/2,(s+e)/2]:l?[p,(s+e)/2]:[(x+p)/2,e]}$.exports=function(t,M){var k,l=t.cd,T=t.xaxis,x=t.yaxis,p=l[0].trace,s="funnel"===p.type,e="h"===p.orientation,o=[];if(!1===M)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++){var r=l[k],n="ct"in r?r.ct:I(r,T,x,e,s);M.contains(n,!1,k,t)?(o.push({pointNumber:k,x:T.c2d(r.x),y:x.c2d(r.y)}),r.selected=1):r.selected=0}return o}},61546:function($,I,t){"use strict";$.exports=k;var M=t(71828).distinctVals;function k(l,T){this.traces=l,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var x=1/0,p=T.posAxis._id.charAt(0),s=[],e=0;e<l.length;e++){for(var o=l[e],r=0;r<o.length;r++){var n=o[r],a=n.p;void 0===a&&(a=n[p]),void 0!==a&&s.push(a)}o[0]&&o[0].width1&&(x=Math.min(o[0].width1,x))}this.positions=s;var i=M(s);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&x!==1/0?x:Math.min(i.minDiff,x);var c=(T.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(l,T){var x=this.getLabel(l,T),p=this.bins[x]||0;return this.bins[x]=p+T,p},k.prototype.get=function(l,T){var x=this.getLabel(l,T);return this.bins[x]||0},k.prototype.getLabel=function(l,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(91424),T=t(71828),x=t(73972),p=t(72597).resizeText,s=t(1486),e=s.textfont,o=s.insidetextfont,r=s.outsidetextfont,n=t(69383);function a(y,d,m){l.pointStyle(y.selectAll("path"),d,m),i(y,d,m)}function i(y,d,m){y.selectAll("text").each(function(w){var u=M.select(this),S=T.ensureUniformFontSize(m,c(u,w,d,m));l.font(u,S)})}function c(y,d,m,w){var u=w._fullLayout.font,S=m.textfont;if(y.classed("bartext-inside")){var _=g(d,m);S=f(m,d.i,u,_)}else y.classed("bartext-outside")&&(S=b(m,d.i,u));return S}function h(y,d,m){return v(e,y.textfont,d,m)}function f(y,d,m,w){var u=h(y,d,m);return(void 0===y._input.textfont||void 0===y._input.textfont.color||Array.isArray(y.textfont.color)&&void 0===y.textfont.color[d])&&(u={color:k.contrast(w),family:u.family,size:u.size}),v(o,y.insidetextfont,d,u)}function b(y,d,m){var w=h(y,d,m);return v(r,y.outsidetextfont,d,w)}function v(y,d,m,w){var u=n.getValue((d=d||{}).family,m),S=n.getValue(d.size,m),_=n.getValue(d.color,m);return{family:n.coerceString(y.family,u,w.family),size:n.coerceNumber(y.size,S,w.size),color:n.coerceColor(y.color,_,w.color)}}function g(y,d){return"waterfall"===d.type?d[y.dir].marker.color:y.mcc||y.mc||d.marker.color}$.exports={style:function(y){var d=M.select(y).selectAll("g.barlayer").selectAll("g.trace");p(y,d,"bar");var m=d.size(),w=y._fullLayout;d.style("opacity",function(u){return u[0].trace.opacity}).each(function(u){("stack"===w.barmode&&m>1||0===w.bargap&&0===w.bargroupgap&&!u[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),d.selectAll("g.points").each(function(u){a(M.select(this),u[0].trace,y)}),x.getComponentMethod("errorbars","style")(d)},styleTextPoints:i,styleOnSelect:function(y,d,m){var u,S,_,E,L,C,w=d[0].trace;w.selectedpoints?(S=w,_=y,l.selectedPointStyle((u=m).selectAll("path"),S),E=u.selectAll("text"),L=S,C=_,E.each(function(P){var z,j=M.select(this);if(P.selected){z=T.ensureUniformFontSize(C,c(j,P,L,C));var R=L.selected.textfont&&L.selected.textfont.color;R&&(z.color=R),l.font(j,z)}else l.selectedTextStyle(j,L)})):(a(m,w,y),x.getComponentMethod("errorbars","style")(m))},getInsideTextFont:f,getOutsideTextFont:b,getBarColor:g,resizeText:p}},98340:function($,I,t){"use strict";var M=t(7901),k=t(52075).hasColorscale,l=t(1586),T=t(71828).coercePattern;$.exports=function(x,p,s,e,o){var r=s("marker.color",e),n=k(x,"marker");n&&l(x,p,o,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",M.defaultLine),k(x,"marker.line")&&l(x,p,o,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",r,n),s("selected.marker.color"),s("unselected.marker.color")}},72597:function($,I,t){"use strict";var M=t(39898),k=t(71828);function l(T){return"_"+T+"Text_minsize"}$.exports={recordMinTextSize:function(T,x,p){if(p.uniformtext.mode){var s=l(T),e=p.uniformtext.minsize,o=x.scale*x.fontSize;x.hide=o<e,p[s]=p[s]||1/0,x.hide||(p[s]=Math.min(p[s],Math.max(o,e)))}},clearMinTextSize:function(T,x){x[l(T)]=void 0},resizeText:function(T,x,p){var s=T._fullLayout,e=s["_"+p+"Text_minsize"];if(e){var o,r="hide"===s.uniformtext.mode;switch(p){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}x.selectAll(o).each(function(n){var a=n.transform;if(a){a.scale=r&&a.hide?0:e/a.fontSize;var i=M.select(this).select("text");k.setTransormAndDisplay(i,a)}})}}}},55023:function($,I,t){"use strict";var M=t(5386).f,k=t(1426).extendFlat,l=t(81245),T=t(1486);$.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:k({},T.base,{}),offset:k({},T.offset,{}),width:k({},T.width,{}),text:k({},T.text,{}),hovertext:k({},T.hovertext,{}),marker:T.marker,hoverinfo:l.hoverinfo,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},74692:function($,I,t){"use strict";var M=t(52075).hasColorscale,k=t(78803),l=t(75341),T=t(11661).setGroupPositions,x=t(66279),p=t(73972).traceIs,s=t(71828).extendFlat;$.exports={calc:function(e,o){for(var r=e._fullLayout,n=o.subplot,i=r[n].angularaxis,c=r[n].radialaxis.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,b=new Array(f),v=c,g=h,y=0;y<f;y++)b[y]={p:g[y],s:v[y]};function d(m){var w=o[m];void 0!==w&&(o["_"+m]=Array.isArray(w)?i.makeCalcdata(o,m):i.d2c(w,o.thetaunit))}return"linear"===i.type&&(d("width"),d("offset")),M(o,"marker")&&k(e,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),M(o,"marker.line")&&k(e,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(b,o),x(b,o),b},crossTraceCalc:function(e,o,r){for(var n=e.calcdata,a=[],i=0;i<n.length;i++){var c=n[i],h=c[0].trace;!0===h.visible&&p(h,"bar")&&h.subplot===r&&a.push(c)}var f=s({},o.radialaxis,{_id:"x"});T(e,o.angularaxis,f,a,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}}},6135:function($,I,t){"use strict";var M=t(71828),k=t(22184).handleRThetaDefaults,l=t(98340),T=t(55023);$.exports=function(x,p,s,e){function o(r,n){return M.coerce(x,p,T,r,n)}k(x,p,e,o)?(o("thetaunit"),o("base"),o("offset"),o("width"),o("text"),o("hovertext"),o("hovertemplate"),l(x,p,o,s,e),M.coerceSelectionMarkerOpacity(p,o)):p.visible=!1}},27379:function($,I,t){"use strict";var M=t(30211),k=t(71828),l=t(95423).getTraceColor,T=k.fillText,x=t(59150).makeHoverPointText,p=t(10869).isPtInsidePolygon;$.exports=function(s,e,o){var r=s.cd,n=r[0].trace,a=s.subplot,i=a.radialAxis,h=a.vangles,f=h?p:k.isPtInsideSector,b=s.maxHoverDistance,v=a.angularAxis._period||2*Math.PI,g=Math.abs(i.g2p(Math.sqrt(e*e+o*o))),y=Math.atan2(o,e);if(i.range[0]>i.range[1]&&(y+=Math.PI),M.getClosest(r,function(w){return f(g,y,[w.rp0,w.rp1],[w.thetag0,w.thetag1],h)?b+Math.min(1,Math.abs(w.thetag1-w.thetag0)/v)-1+(w.rp1-g)/(w.rp1-w.rp0)-1:1/0},s),!1!==s.index){var d=r[s.index];s.x0=s.x1=d.ct[0],s.y0=s.y1=d.ct[1];var m=k.extendFlat({},d,{r:d.s,theta:d.p});return T(d,n,s),x(m,n,a,s),s.hovertemplate=n.hovertemplate,s.color=l(n,d),s.xLabelVal=s.yLabelVal=void 0,d.s<0&&(s.idealAlign="left"),[s]}}},23381:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"barpolar",basePlotModule:t(23580),categories:["polar","bar","showLegend"],attributes:t(55023),layoutAttributes:t(40151),supplyDefaults:t(6135),supplyLayoutDefaults:t(19860),calc:t(74692).calc,crossTraceCalc:t(74692).crossTraceCalc,plot:t(60173),colorbar:t(4898),formatLabels:t(98608),style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(27379),selectPoints:t(81974),meta:{}}},40151:function($){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function($,I,t){"use strict";var M=t(71828),k=t(40151);$.exports=function(l,T,x){var p,s={};function e(n,a){return M.coerce(l[p]||{},T[p],k,n,a)}for(var o=0;o<x.length;o++){var r=x[o];"barpolar"===r.type&&!0===r.visible&&(s[p=r.subplot]||(e("barmode"),e("bargap"),s[p]=1))}}},60173:function($,I,t){"use strict";var M=t(39898),k=t(92770),l=t(71828),T=t(91424),x=t(10869);$.exports=function(p,s,e){var f,b,v,o=p._context.staticPlot,r=s.xaxis,n=s.yaxis,a=s.radialAxis,i=s.angularAxis,c=(b=(f=s).cxx,v=f.cyy,f.vangles?function(g,y,d,m){var w,u;l.angleDelta(d,m)>0?(w=d,u=m):(w=m,u=d);var S=[x.findEnclosingVertexAngles(w,f.vangles)[0],(w+u)/2,x.findEnclosingVertexAngles(u,f.vangles)[1]];return x.pathPolygonAnnulus(g,y,w,u,S,b,v)}:function(g,y,d,m){return l.pathAnnulus(g,y,d,m,b,v)}),h=s.layers.frontplot.select("g.barlayer");l.makeTraceGroups(h,e,"trace bars").each(function(){var f=M.select(this),b=l.ensureSingle(f,"g","points").selectAll("g.point").data(l.identity);b.enter().append("g").style("vector-effect",o?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),b.exit().remove(),b.each(function(v){var g,y=M.select(this),d=v.rp0=a.c2p(v.s0),m=v.rp1=a.c2p(v.s1),w=v.thetag0=i.c2g(v.p0),u=v.thetag1=i.c2g(v.p1);if(k(d)&&k(m)&&k(w)&&k(u)&&d!==m&&w!==u){var S=a.c2g(v.s1),_=(w+u)/2;v.ct=[r.c2p(S*Math.cos(_)),n.c2p(S*Math.sin(_))],g=c(d,m,w,u)}else g="M0,0Z";l.ensureSingle(y,"path").attr("d",g)}),T.setClipUrl(f,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,p)})}},53522:function($,I,t){"use strict";var M=t(82196),k=t(1486),l=t(22399),T=t(12663).axisHoverFormat,x=t(5386).f,p=t(1426).extendFlat,s=M.marker,e=s.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:p({},s.symbol,{arrayOk:!1,editType:"plot"}),opacity:p({},s.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:p({},s.angle,{arrayOk:!1,editType:"calc"}),size:p({},s.size,{arrayOk:!1,editType:"calc"}),color:p({},s.color,{arrayOk:!1,editType:"style"}),line:{color:p({},e.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:p({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,selected:{marker:M.selected.marker,editType:"style"},unselected:{marker:M.unselected.marker,editType:"style"},text:p({},M.text,{}),hovertext:p({},M.hovertext,{}),hovertemplate:x({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function($,I,t){"use strict";var M=t(92770),k=t(89298),l=t(42973),T=t(71828),x=t(50606).BADNUM,p=T._;$.exports=function(f,b){var v,g,y,d,m,w,u,S=f._fullLayout,_=k.getFromId(f,b.xaxis||"x"),E=k.getFromId(f,b.yaxis||"y"),L=[],C="violin"===b.type?"_numViolins":"_numBoxes";"h"===b.orientation?(y=_,d="x",m=E,w="y",u=!!b.yperiodalignment):(y=E,d="y",m=_,w="x",u=!!b.xperiodalignment);var P,z,j,R,V,D,B=function(be,Ie,He,Ve){var tt,nt=Ie+"0"in be;if(Ie in be||nt&&"d"+Ie in be){var st=He.makeCalcdata(be,Ie);return[l(be,He,Ie,st).vals,st]}tt=nt?be[Ie+"0"]:"name"in be&&("category"===He.type||M(be.name)&&-1!==["linear","log"].indexOf(He.type)||T.isDateTime(be.name)&&"date"===He.type)?be.name:Ve;for(var dt="multicategory"===He.type?He.r2c_just_indices(tt):He.d2c(tt,0,be[Ie+"calendar"]),wt=be._length,_t=new Array(wt),pt=0;pt<wt;pt++)_t[pt]=dt;return[_t]}(b,w,m,S[C]),N=B[0],U=B[1],J=T.distinctVals(N,m),Y=J.vals,q=J.minDiff/2,H="all"===(b.boxpoints||b.points)?T.identity:function(be){return be.v<P.lf||be.v>P.uf};if(b._hasPreCompStats){var X=b[d],Q=function(be){return y.d2c((b[be]||[])[v])},ne=1/0,re=-1/0;for(v=0;v<b._length;v++){var ae=N[v];if(M(ae)){if((P={}).pos=P[w]=ae,u&&U&&(P.orig_p=U[v]),P.q1=Q("q1"),P.med=Q("median"),P.q3=Q("q3"),z=[],X&&T.isArrayOrTypedArray(X[v]))for(g=0;g<X[v].length;g++)(D=y.d2c(X[v][g]))!==x&&(e(V={v:D,i:[v,g]},b,[v,g]),z.push(V));if(P.pts=z.sort(o),R=(j=P[d]=z.map(r)).length,P.med!==x&&P.q1!==x&&P.q3!==x&&P.med>=P.q1&&P.q3>=P.med){var se=Q("lowerfence");P.lf=se!==x&&se<=P.q1?se:n(P,j,R);var pe=Q("upperfence");P.uf=pe!==x&&pe>=P.q3?pe:a(P,j,R);var ke=Q("mean");P.mean=ke!==x?ke:R?T.mean(j,R):(P.q1+P.q3)/2;var me=Q("sd");P.sd=ke!==x&&me>=0?me:R?T.stdev(j,R,P.mean):P.q3-P.q1,P.lo=i(P),P.uo=c(P);var le=Q("notchspan");le=le!==x&&le>0?le:h(P,R),P.ln=P.med-le,P.un=P.med+le;var ue=P.lf,Ee=P.uf;b.boxpoints&&j.length&&(ue=Math.min(ue,j[0]),Ee=Math.max(Ee,j[R-1])),b.notched&&(ue=Math.min(ue,P.ln),Ee=Math.max(Ee,P.un)),P.min=ue,P.max=Ee}else{var de;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join("\n")),P.med=de=P.med!==x?P.med:P.q1!==x?P.q3!==x?(P.q1+P.q3)/2:P.q1:P.q3!==x?P.q3:0,P.q1=P.q3=de,P.lf=P.uf=de,P.mean=P.sd=de,P.ln=P.un=de,P.min=P.max=de}ne=Math.min(ne,P.min),re=Math.max(re,P.max),P.pts2=z.filter(H),L.push(P)}}b._extremes[y._id]=k.findExtremes(y,[ne,re],{padded:!0})}else{var xe=y.makeCalcdata(b,d),Te=function(be,Ie){for(var He=be.length,Ve=new Array(He+1),tt=0;tt<He;tt++)Ve[tt]=be[tt]-Ie;return Ve[He]=be[He-1]+Ie,Ve}(Y,q),we=Y.length,K=function(be){for(var Ie=new Array(be),He=0;He<be;He++)Ie[He]=[];return Ie}(we);for(v=0;v<b._length;v++)if(M(D=xe[v])){var oe=T.findBin(N[v],Te);oe>=0&&oe<we&&(e(V={v:D,i:v},b,v),K[oe].push(V))}var he=1/0,ye=-1/0,Me=b.quartilemethod,Re="exclusive"===Me,Pe="inclusive"===Me;for(v=0;v<we;v++)if(K[v].length>0){var De,fe;(P={}).pos=P[w]=Y[v],z=P.pts=K[v].sort(o),R=(j=P[d]=z.map(r)).length,P.min=j[0],P.max=j[R-1],P.mean=T.mean(j,R),P.sd=T.stdev(j,R,P.mean),P.med=T.interp(j,.5),R%2&&(Re||Pe)?(Re?(De=j.slice(0,R/2),fe=j.slice(R/2+1)):Pe&&(De=j.slice(0,R/2+1),fe=j.slice(R/2)),P.q1=T.interp(De,.5),P.q3=T.interp(fe,.5)):(P.q1=T.interp(j,.25),P.q3=T.interp(j,.75)),P.lf=n(P,j,R),P.uf=a(P,j,R),P.lo=i(P),P.uo=c(P);var ge=h(P,R);P.ln=P.med-ge,P.un=P.med+ge,he=Math.min(he,P.ln),ye=Math.max(ye,P.un),P.pts2=z.filter(H),L.push(P)}b._extremes[y._id]=k.findExtremes(y,b.notched?xe.concat([he,ye]):xe,{padded:!0})}return function(be,Ie){if(T.isArrayOrTypedArray(Ie.selectedpoints))for(var He=0;He<be.length;He++){for(var Ve=be[He].pts||[],tt={},nt=0;nt<Ve.length;nt++)tt[Ve[nt].i]=nt;T.tagSelected(Ve,Ie,tt)}}(L,b),L.length>0?(L[0].t={num:S[C],dPos:q,posLetter:w,valLetter:d,labels:{med:p(f,"median:"),min:p(f,"min:"),q1:p(f,"q1:"),q3:p(f,"q3:"),max:p(f,"max:"),mean:p(f,"sd"===b.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:p(f,"lower fence:"),uf:p(f,"upper fence:")}},S[C]++,L):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function e(f,b,v){for(var g in s)T.isArrayOrTypedArray(b[g])&&(Array.isArray(v)?T.isArrayOrTypedArray(b[g][v[0]])&&(f[s[g]]=b[g][v[0]][v[1]]):f[s[g]]=b[g][v])}function o(f,b){return f.v-b.v}function r(f){return f.v}function n(f,b,v){return 0===v?f.q1:Math.min(f.q1,b[Math.min(T.findBin(2.5*f.q1-1.5*f.q3,b,!0)+1,v-1)])}function a(f,b,v){return 0===v?f.q3:Math.max(f.q3,b[Math.max(T.findBin(2.5*f.q3-1.5*f.q1,b),0)])}function i(f){return 4*f.q1-3*f.q3}function c(f){return 4*f.q3-3*f.q1}function h(f,b){return 0===b?0:1.57*(f.q3-f.q1)/Math.sqrt(b)}},37188:function($,I,t){"use strict";var M=t(89298),k=t(71828),l=t(99082).getAxisGroup,T=["v","h"];function x(p,s,e,o){var r,n,a,i=s.calcdata,c=s._fullLayout,h=o._id,f=h.charAt(0),b=[],v=0;for(r=0;r<e.length;r++)for(a=i[e[r]],n=0;n<a.length;n++)b.push(o.c2l(a[n].pos,!0)),v+=(a[n].pts2||[]).length;if(b.length){var g=k.distinctVals(b);"category"!==o.type&&"multicategory"!==o.type||(g.minDiff=1);var y=g.minDiff/2;M.minDtick(o,g.minDiff,g.vals[0],!0);var d=c["violin"===p?"_numViolins":"_numBoxes"],m="group"===c[p+"mode"]&&d>1,w=1-c[p+"gap"],u=1-c[p+"groupgap"];for(r=0;r<e.length;r++){var S,_,E,L,C,P,z=(a=i[e[r]])[0].trace,j=a[0].t,R=z.width,V=z.side;if(R)S=_=L=R/2,E=0;else if(S=y,m){var D=l(c,o._id)+z.orientation,N=Object.keys(((c._alignmentOpts[D]||{})[z.alignmentgroup]||{}).offsetGroups||{}).length,U=N||d;_=S*w*u/U,E=2*S*(((N?z._offsetIndex:j.num)+.5)/U-.5)*w,L=S*w/U}else _=S*w*u,E=0,L=S;j.dPos=S,j.bPos=E,j.bdPos=_,j.wHover=L;var J,Y,q,H,X,Q,ne=E+_,re=Boolean(R);if("positive"===V?(C=S*(R?1:.5),J=ne,P=J=E):"negative"===V?(C=J=E,P=S*(R?1:.5),Y=ne):(C=P=S,J=Y=ne),(z.boxpoints||z.points)&&v>0){var ae=z.pointpos,se=z.jitter,pe=z.marker.size/2,ke=0;ae+se>=0&&((ke=ne*(ae+se))>C?(re=!0,X=pe,q=ke):ke>J&&(X=pe,q=C)),ke<=C&&(q=C);var me=0;ae-se<=0&&((me=-ne*(ae-se))>P?(re=!0,Q=pe,H=me):me>Y&&(Q=pe,H=P)),me<=P&&(H=P)}else q=C,H=P;var le=new Array(a.length);for(n=0;n<a.length;n++)le[n]=a[n].pos;z._extremes[h]=M.findExtremes(o,le,{padded:re,vpadminus:H,vpadplus:q,vpadLinearized:!0,ppadminus:{x:Q,y:X}[f],ppadplus:{x:X,y:Q}[f]})}}}$.exports={crossTraceCalc:function(p,s){for(var e=p.calcdata,o=s.xaxis,r=s.yaxis,n=0;n<T.length;n++){for(var a=T[n],i="h"===a?r:o,c=[],h=0;h<e.length;h++){var f=e[h],v=f[0].trace;!0!==v.visible||"box"!==v.type&&"candlestick"!==v.type||f[0].t.empty||(v.orientation||"v")!==a||v.xaxis!==o._id||v.yaxis!==r._id||c.push(h)}x("box",p,c,i)}},setPositionOffset:x}},36411:function($,I,t){"use strict";var M=t(71828),k=t(73972),l=t(7901),T=t(73927),x=t(26125),p=t(4322),s=t(53522);function e(r,n,a,i){function c(V){var D=0;return V&&V.length&&(D+=1,M.isArrayOrTypedArray(V[0])&&V[0].length&&(D+=1)),D}function h(V){return M.validate(r[V],s[V])}var f,b=a("y"),v=a("x");if("box"===n.type){var g=a("q1"),y=a("median"),d=a("q3");n._hasPreCompStats=g&&g.length&&y&&y.length&&d&&d.length,f=Math.min(M.minRowLength(g),M.minRowLength(y),M.minRowLength(d))}var m,w,u=c(b),S=c(v),_=u&&M.minRowLength(b),E=S&&M.minRowLength(v),L=i.calendar,C={autotypenumbers:i.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(u)){case"00":var P=h("x0")||h("dx");m=!h("y0")&&!h("dy")||P?"v":"h",w=f;break;case"10":m="v",w=Math.min(f,E);break;case"20":m="h",w=Math.min(f,v.length);break;case"01":m="h",w=Math.min(f,_);break;case"02":m="v",w=Math.min(f,b.length);break;case"12":m="v",w=Math.min(f,E,b.length);break;case"21":m="h",w=Math.min(f,v.length,_);break;case"11":w=0;break;case"22":var z,j=!1;for(z=0;z<v.length;z++)if("category"===p(v[z],L,C)){j=!0;break}if(j)m="v",w=Math.min(f,E,b.length);else{for(z=0;z<b.length;z++)if("category"===p(b[z],L,C)){j=!0;break}j?(m="h",w=Math.min(f,v.length,_)):(m="v",w=Math.min(f,E,b.length))}}else u>0?(m="v",w=S>0?Math.min(E,_):Math.min(_)):S>0?(m="h",w=Math.min(E)):w=0;if(w){n._length=w;var R=a("orientation",m);n._hasPreCompStats?"v"===R&&0===S?(a("x0",0),a("dx",1)):"h"===R&&0===u&&(a("y0",0),a("dy",1)):"v"===R&&0===S?a("x0"):"h"===R&&0===u&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],i)}else n.visible=!1}function o(r,n,a,i){var c=i.prefix,h=M.coerce2(r,n,s,"marker.outliercolor"),f=a("marker.line.outliercolor"),b="outliers";n._hasPreCompStats?b="all":(h||f)&&(b="suspectedoutliers");var v=a(c+"points",b);v?(a("jitter","all"===v?.3:0),a("pointpos","all"===v?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",n.line.color),a("marker.line.color"),a("marker.line.width"),"suspectedoutliers"===v&&(a("marker.line.outliercolor",n.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete n.marker;var g=a("hoveron");"all"!==g&&-1===g.indexOf("points")||a("hovertemplate"),M.coerceSelectionMarkerOpacity(n,a)}$.exports={supplyDefaults:function(r,n,a,i){function c(d,m){return M.coerce(r,n,s,d,m)}if(e(r,n,c,i),!1!==n.visible){T(r,n,i,c),c("xhoverformat"),c("yhoverformat");var h=n._hasPreCompStats;h&&(c("lowerfence"),c("upperfence")),c("line.color",(r.marker||{}).color||a),c("line.width"),c("fillcolor",l.addOpacity(n.line.color,.5));var f=!1;if(h){var b=c("mean"),v=c("sd");b&&b.length&&(f=!0,v&&v.length&&(f="sd"))}c("boxmean",f),c("whiskerwidth"),c("width"),c("quartilemethod");var g=!1;if(h){var y=c("notchspan");y&&y.length&&(g=!0)}else M.validate(r.notchwidth,s.notchwidth)&&(g=!0);c("notched",g)&&c("notchwidth"),o(r,n,c,{prefix:"box"})}},crossTraceDefaults:function(r,n){var i;function c(b){return M.coerce(i._input,i,s,b)}for(var h=0;h<r.length;h++){var f=(i=r[h]).type;"box"!==f&&"violin"!==f||"group"===n[f+"mode"]&&x(i._input,i,n,c)}},handleSampleDefaults:e,handlePointsDefaults:o}},74907:function($){"use strict";$.exports=function(I,t){return t.hoverOnBox&&(I.hoverOnBox=t.hoverOnBox),"xVal"in t&&(I.x=t.xVal),"yVal"in t&&(I.y=t.yVal),t.xa&&(I.xaxis=t.xa),t.ya&&(I.yaxis=t.ya),I}},41868:function($,I,t){"use strict";var M=t(89298),k=t(71828),l=t(30211),T=t(7901),x=k.fillText;function p(e,o,r,n){var a,i,c,h,f,b,v,g,y,d,m,w,u,S,_=e.cd,E=e.xa,L=e.ya,C=_[0].trace,P=_[0].t,z="violin"===C.type,j=P.bdPos,R=P.wHover,V=function(de){return c.c2l(de.pos)+P.bPos-c.c2l(b)};z&&"both"!==C.side?("positive"===C.side&&(y=function(de){var xe=V(de);return l.inbox(xe,xe+R,d)},w=j,u=0),"negative"===C.side&&(y=function(de){var xe=V(de);return l.inbox(xe-R,xe,d)},w=0,u=j)):(y=function(de){var xe=V(de);return l.inbox(xe-R,xe+R,d)},w=u=j),S=z?function(de){return l.inbox(de.span[0]-f,de.span[1]-f,d)}:function(de){return l.inbox(de.min-f,de.max-f,d)},"h"===C.orientation?(f=o,b=r,v=S,g=y,a="y",c=L,i="x",h=E):(f=r,b=o,v=y,g=S,a="x",c=E,i="y",h=L);var D=Math.min(1,j/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function B(de){return(v(de)+g(de))/2}d=e.maxHoverDistance-D,m=e.maxSpikeDistance-D;var N=l.getDistanceFunction(n,v,g,B);if(l.getClosest(_,N,e),!1===e.index)return[];var U=_[e.index],J=C.line.color,Y=(C.marker||{}).color;e.color=T.opacity(J)&&C.line.width?J:T.opacity(Y)&&C.boxpoints?Y:C.fillcolor,e[a+"0"]=c.c2p(U.pos+P.bPos-u,!0),e[a+"1"]=c.c2p(U.pos+P.bPos+w,!0),e[a+"LabelVal"]=void 0!==U.orig_p?U.orig_p:U.pos;var q=a+"Spike";e.spikeDistance=B(U)*m/d,e[q]=c.c2p(U.pos,!0);var H=C.boxmean||(C.meanline||{}).visible,X=C.boxpoints||C.points,Q=X&&H?["max","uf","q3","med","mean","q1","lf","min"]:X&&!H?["max","uf","q3","med","q1","lf","min"]:!X&&H?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];C.orientation===(h.range[1]<h.range[0]?"v":"h")&&Q.reverse();for(var re=e.spikeDistance,ae=e[q],se=[],pe=0;pe<Q.length;pe++){var ke=Q[pe];if(ke in U){var me=U[ke],le=h.c2p(me,!0),ue=k.extendFlat({},e);ue.attr=ke,ue[i+"0"]=ue[i+"1"]=le,ue[i+"LabelVal"]=me,ue[i+"Label"]=(P.labels?P.labels[ke]+" ":"")+M.hoverLabelText(h,me,C[i+"hoverformat"]),ue.hoverOnBox=!0,"mean"===ke&&"sd"in U&&"sd"===C.boxmean&&(ue[i+"err"]=U.sd),ue.hovertemplate=!1,se.push(ue)}}e.name="",e.spikeDistance=void 0,e[q]=void 0;for(var Ee=0;Ee<se.length;Ee++)"med"!==se[Ee].attr?(se[Ee].name="",se[Ee].spikeDistance=void 0,se[Ee][q]=void 0):(se[Ee].spikeDistance=re,se[Ee][q]=ae);return se}function s(e,o,r){for(var n,a,i,c=e.cd,h=e.xa,f=e.ya,b=c[0].trace,v=h.c2p(o),g=f.c2p(r),y=l.quadrature(function(z){var j=Math.max(3,z.mrc||0);return Math.max(Math.abs(h.c2p(z.x)-v)-j,1-3/j)},function(z){var j=Math.max(3,z.mrc||0);return Math.max(Math.abs(f.c2p(z.y)-g)-j,1-3/j)}),d=!1,m=0;m<c.length;m++){a=c[m];for(var w=0;w<(a.pts||[]).length;w++){var u=y(i=a.pts[w]);u<=e.distance&&(e.distance=u,d=[m,w])}}if(!d)return!1;i=(a=c[d[0]]).pts[d[1]];var S=h.c2p(i.x,!0),_=f.c2p(i.y,!0),E=i.mrc||1;n=k.extendFlat({},e,{index:i.i,color:(b.marker||{}).color,name:b.name,x0:S-E,x1:S+E,y0:_-E,y1:_+E,spikeDistance:e.distance,hovertemplate:b.hovertemplate});var L,C=a.orig_p,P=void 0!==C?C:a.pos;return"h"===b.orientation?(L=f,n.xLabelVal=i.x,n.yLabelVal=P):(L=h,n.xLabelVal=P,n.yLabelVal=i.y),n[L._id.charAt(0)+"Spike"]=L.c2p(a.pos,!0),x(i,b,n),n}$.exports={hoverPoints:function(e,o,r,n){var a,i=e.cd[0].trace.hoveron,c=[];return-1!==i.indexOf("boxes")&&(c=c.concat(p(e,o,r,n))),-1!==i.indexOf("points")&&(a=s(e,o,r)),"closest"===n?a?[a]:c:(a&&c.push(a),c)},hoverOnBoxes:p,hoverOnPoints:s}},83832:function($,I,t){"use strict";$.exports={attributes:t(53522),layoutAttributes:t(40094),supplyDefaults:t(36411).supplyDefaults,crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(4199).supplyLayoutDefaults,calc:t(48518),crossTraceCalc:t(37188).crossTraceCalc,plot:t(86047).plot,style:t(58063).style,styleOnSelect:t(58063).styleOnSelect,hoverPoints:t(41868).hoverPoints,eventData:t(74907),selectPoints:t(24626),moduleType:"trace",name:"box",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function($){"use strict";$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(40094);function T(x,p,s,e,o){for(var r=o+"Layout",n=!1,a=0;a<s.length;a++)if(M.traceIs(s[a],r)){n=!0;break}n&&(e(o+"mode"),e(o+"gap"),e(o+"groupgap"))}$.exports={supplyLayoutDefaults:function(x,p,s){T(0,0,s,function(e,o){return k.coerce(x,p,l,e,o)},"box")},_supply:T}},86047:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424);function T(s,e,o,r,n){var a,i,c="h"===o.orientation,h=e.val,f=e.pos,b=!!f.rangebreaks,v=r.bPos,g=r.wdPos||0,y=r.bPosPxOffset||0,d=o.whiskerwidth||0,m=o.notched||!1,w=m?1-2*o.notchwidth:1;Array.isArray(r.bdPos)?(a=r.bdPos[0],i=r.bdPos[1]):(a=r.bdPos,i=r.bdPos);var u=s.selectAll("path.box").data("violin"!==o.type||o.box.visible?k.identity:[]);u.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),u.exit().remove(),u.each(function(S){if(S.empty)return"M0,0Z";var _=f.c2l(S.pos+v,!0),E=f.l2p(_-a)+y,L=f.l2p(_+i)+y,C=b?(E+L)/2:f.l2p(_)+y,P=o.whiskerwidth,z=b?E*P+(1-P)*C:f.l2p(_-g)+y,j=b?L*P+(1-P)*C:f.l2p(_+g)+y,R=f.l2p(_-a*w)+y,V=f.l2p(_+i*w)+y,D=h.c2p(S.q1,!0),B=h.c2p(S.q3,!0),N=k.constrain(h.c2p(S.med,!0),Math.min(D,B)+1,Math.max(D,B)-1),U=void 0===S.lf||!1===o.boxpoints,J=h.c2p(U?S.min:S.lf,!0),Y=h.c2p(U?S.max:S.uf,!0),q=h.c2p(S.ln,!0),H=h.c2p(S.un,!0);c?M.select(this).attr("d","M"+N+","+R+"V"+V+"M"+D+","+E+"V"+L+(m?"H"+q+"L"+N+","+V+"L"+H+","+L:"")+"H"+B+"V"+E+(m?"H"+H+"L"+N+","+R+"L"+q+","+E:"")+"ZM"+D+","+C+"H"+J+"M"+B+","+C+"H"+Y+(0===d?"":"M"+J+","+z+"V"+j+"M"+Y+","+z+"V"+j)):M.select(this).attr("d","M"+R+","+N+"H"+V+"M"+E+","+D+"H"+L+(m?"V"+q+"L"+V+","+N+"L"+L+","+H:"")+"V"+B+"H"+E+(m?"V"+H+"L"+R+","+N+"L"+E+","+q:"")+"ZM"+C+","+D+"V"+J+"M"+C+","+B+"V"+Y+(0===d?"":"M"+z+","+J+"H"+j+"M"+z+","+Y+"H"+j))})}function x(s,e,o,r){var n=e.x,a=e.y,i=r.bdPos,c=r.bPos,h=o.boxpoints||o.points;k.seedPseudoRandom();var f=s.selectAll("g.points").data(h?function(v){return v.forEach(function(g){g.t=r,g.trace=o}),v}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var b=f.selectAll("path").data(function(v){var g,y,d=v.pts2,m=Math.max((v.max-v.min)/10,v.q3-v.q1),w=1e-9*m,u=.01*m,S=[],_=0;if(o.jitter){if(0===m)for(_=1,S=new Array(d.length),g=0;g<d.length;g++)S[g]=1;else for(g=0;g<d.length;g++){var E=Math.max(0,g-5),L=d[E].v,C=Math.min(d.length-1,g+5),P=d[C].v;"all"!==h&&(d[g].v<v.lf?P=Math.min(P,v.lf):L=Math.max(L,v.uf));var z=Math.sqrt(u*(C-E)/(P-L+w))||0;z=k.constrain(Math.abs(z),0,1),S.push(z),_=Math.max(z,_)}y=2*o.jitter/(_||1)}for(g=0;g<d.length;g++){var j=d[g],R=j.v,V=o.jitter?y*S[g]*(k.pseudoRandom()-.5):0,D=v.pos+c+i*(o.pointpos+V);"h"===o.orientation?(j.y=D,j.x=R):(j.x=D,j.y=R),"suspectedoutliers"===h&&R<v.uo&&R>v.lo&&(j.so=!0)}return d});b.enter().append("path").classed("point",!0),b.exit().remove(),b.call(l.translatePoints,n,a)}function p(s,e,o,r){var n,a,i=e.val,c=e.pos,h=!!c.rangebreaks,f=r.bPos,b=r.bPosPxOffset||0,v=o.boxmean||(o.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],a=r.bdPos[1]):(n=r.bdPos,a=r.bdPos);var g=s.selectAll("path.mean").data("box"===o.type&&o.boxmean||"violin"===o.type&&o.box.visible&&o.meanline.visible?k.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(y){var d=c.c2l(y.pos+f,!0),m=c.l2p(d-n)+b,w=c.l2p(d+a)+b,u=h?(m+w)/2:c.l2p(d)+b,S=i.c2p(y.mean,!0),_=i.c2p(y.mean-y.sd,!0),E=i.c2p(y.mean+y.sd,!0);"h"===o.orientation?M.select(this).attr("d","M"+S+","+m+"V"+w+("sd"===v?"m0,0L"+_+","+u+"L"+S+","+m+"L"+E+","+u+"Z":"")):M.select(this).attr("d","M"+m+","+S+"H"+w+("sd"===v?"m0,0L"+u+","+_+"L"+m+","+S+"L"+u+","+E+"Z":""))})}$.exports={plot:function(s,e,o,r){var n=s._context.staticPlot,a=e.xaxis,i=e.yaxis;k.makeTraceGroups(r,o,"trace boxes").each(function(c){var h,f,b=M.select(this),v=c[0],g=v.t,y=v.trace;g.wdPos=g.bdPos*y.whiskerwidth,!0!==y.visible||g.empty?b.remove():("h"===y.orientation?(h=i,f=a):(h=a,f=i),T(b,{pos:h,val:f},y,g,n),x(b,{x:a,y:i},y,g),p(b,{pos:h,val:f},y,g))})},plotBoxAndWhiskers:T,plotPoints:x,plotBoxMean:p}},24626:function($){"use strict";$.exports=function(I,t){var M,k,l=I.cd,T=I.xaxis,x=I.yaxis,p=[];if(!1===t)for(M=0;M<l.length;M++)for(k=0;k<(l[M].pts||[]).length;k++)l[M].pts[k].selected=0;else for(M=0;M<l.length;M++)for(k=0;k<(l[M].pts||[]).length;k++){var s=l[M].pts[k],e=T.c2p(s.x),o=x.c2p(s.y);t.contains([e,o],null,s.i,I)?(p.push({pointNumber:s.i,x:T.c2d(s.x),y:x.c2d(s.y)}),s.selected=1):s.selected=0}return p}},58063:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(91424);$.exports={style:function(T,x,p){var s=p||M.select(T).selectAll("g.trace.boxes");s.style("opacity",function(e){return e[0].trace.opacity}),s.each(function(e){var o=M.select(this),r=e[0].trace,n=r.line.width;function a(h,f,b,v){h.style("stroke-width",f+"px").call(k.stroke,b).call(k.fill,v)}var i=o.selectAll("path.box");if("candlestick"===r.type)i.each(function(h){if(!h.empty){var f=M.select(this),b=r[h.dir];a(f,b.line.width,b.line.color,b.fillcolor),f.style("opacity",r.selectedpoints&&!h.selected?.3:1)}});else{a(i,n,r.line.color,r.fillcolor),o.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(k.stroke,r.line.color);var c=o.selectAll("path.point");l.pointStyle(c,r,T)}})},styleOnSelect:function(T,x,p){var s=x[0].trace,e=p.selectAll("path.point");s.selectedpoints?l.selectedPointStyle(e,s):l.pointStyle(e,s,T)}}},75343:function($,I,t){"use strict";var M=t(71828).extendFlat,k=t(12663).axisHoverFormat,l=t(2522),T=t(53522);function x(p){return{line:{color:M({},T.line.color,{dflt:p}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}$.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:M({},T.line.width,{}),editType:"style"},increasing:x(l.increasing.line.color.dflt),decreasing:x(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(42973),T=t(3485).calcCommon;function x(p,s,e,o){return{min:e,q1:Math.min(p,o),med:o,q3:Math.max(p,o),max:s}}$.exports=function(p,s){var e=p._fullLayout,o=k.getFromId(p,s.xaxis),r=k.getFromId(p,s.yaxis),n=o.makeCalcdata(s,"x"),a=l(s,o,"x",n).vals,i=T(p,s,n,a,r,x);return i.length?(M.extendFlat(i[0].t,{num:e._numBoxes,dPos:M.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),e._numBoxes++,i):[{t:{empty:!0}}]}},1026:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(14555),T=t(73927),x=t(75343);function p(s,e,o,r){var n=o(r+".line.color");o(r+".line.width",e.line.width),o(r+".fillcolor",k.addOpacity(n,.5))}$.exports=function(s,e,o,r){function n(a,i){return M.coerce(s,e,x,a,i)}l(s,e,n,r)?(T(s,e,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),p(0,e,n,"increasing"),p(0,e,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[e.xaxis]=!0):e.visible=!1}},91815:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"candlestick",basePlotModule:t(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t(75343),layoutAttributes:t(40094),supplyLayoutDefaults:t(4199).supplyLayoutDefaults,crossTraceCalc:t(37188).crossTraceCalc,supplyDefaults:t(1026),calc:t(41197),plot:t(86047).plot,layerName:"boxlayer",style:t(58063).style,hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},13145:function($,I,t){"use strict";var M=t(11500),k=t(44467);$.exports=function(l,T,x,p,s){var e,o,r,n;p("a")||(p("da"),p("a0")),p("b")||(p("db"),p("b0")),e=l,o=T,r=x,n=s,["aaxis","baxis"].forEach(function(a){var i=a.charAt(0),c=e[a]||{},h=k.newContainer(o,a);M(c,h,{noTicklabelstep:!0,tickfont:"x",id:i+"axis",letter:i,font:o.font,name:a,data:e[i],calendar:o.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r}),h._categories=h._categories||[],e[a]||"-"===c.type||(e[a]={type:c.type})})}},402:function($,I,t){"use strict";var M=t(71828).isArrayOrTypedArray;function k(l,T){if(!M(l)||T>=10)return null;for(var x=1/0,p=-1/0,s=l.length,e=0;e<s;e++){var o=l[e];if(M(o)){var r=k(o,T+1);r&&(x=Math.min(r[0],x),p=Math.max(r[1],p))}else x=Math.min(o,x),p=Math.max(o,p)}return[x,p]}$.exports=function(l){return k(l,0)}},99798:function($,I,t){"use strict";var M=t(41940),k=t(1928),l=t(22399),T=M({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=l.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function($,I,t){"use strict";var M=t(71828).isArrayOrTypedArray;$.exports=function(k,l,T,x){var p,s,e,o,r,n,a,i,c,h,f,b,v,g=M(T)?"a":"b",y=("a"===g?k.aaxis:k.baxis).smoothing,d="a"===g?k.a2i:k.b2j,m="a"===g?T:x,w="a"===g?x:T,u="a"===g?l.a.length:l.b.length,S="a"===g?l.b.length:l.a.length,_=Math.floor("a"===g?k.b2j(w):k.a2i(w)),E="a"===g?function(J){return k.evalxy([],J,_)}:function(J){return k.evalxy([],_,J)};y&&(e=Math.max(0,Math.min(S-2,_)),o=_-e,s="a"===g?function(J,Y){return k.dxydi([],J,e,Y,o)}:function(J,Y){return k.dxydj([],e,J,o,Y)});var L=d(m[0]),C=d(m[1]),P=L<C?1:-1,z=1e-8*(C-L),j=P>0?Math.floor:Math.ceil,R=P>0?Math.ceil:Math.floor,V=P>0?Math.min:Math.max,D=P>0?Math.max:Math.min,B=j(L+z),N=R(C-z),U=[[a=E(L)]];for(p=B;p*P<N*P;p+=P)r=[],f=D(L,p),v=(b=V(C,p+P))-f,n=Math.max(0,Math.min(u-2,Math.floor(.5*(f+b)))),i=E(b),y&&(c=s(n,f-n),h=s(n,b-n),r.push([a[0]+c[0]/3*v,a[1]+c[1]/3*v]),r.push([i[0]-h[0]/3*v,i[1]-h[1]/3*v])),r.push(i),U.push(r),a=i;return U}},1928:function($,I,t){"use strict";var M=t(41940),k=t(22399),l=t(13838),T=t(12663).descriptionWithDates,x=t(30962).overrideAll,p=t(79952).P,s=t(1426).extendFlat;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},l.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:x(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},p,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},p,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function($,I,t){"use strict";var M=t(99798),k=t(7901).addOpacity,l=t(73972),T=t(71828),x=t(26218),p=t(96115),s=t(89426),e=t(15258),o=t(21994),r=t(4322);$.exports=function(n,a,i){var c=i.letter,h=i.font||{},f=M[c+"axis"];function b(P,z){return T.coerce(n,a,f,P,z)}function v(P,z){return T.coerce2(n,a,f,P,z)}i.name&&(a._name=i.name,a._id=i.name),b("autotypenumbers",i.autotypenumbersDflt);var g=b("type");"-"===g&&(i.data&&function(P,z){if("-"===P.type){var j=P._id.charAt(0);P.type=r(z,P[j+"calendar"],{autotypenumbers:P.autotypenumbers})}}(a,i.data),"-"===a.type?a.type="linear":g=n.type=a.type),b("smoothing"),b("cheatertype"),b("showticklabels"),b("labelprefix",c+" = "),b("labelsuffix"),b("showtickprefix"),b("showticksuffix"),b("separatethousands"),b("tickformat"),b("exponentformat"),b("minexponent"),b("showexponent"),b("categoryorder"),b("tickmode"),b("tickvals"),b("ticktext"),b("tick0"),b("dtick"),"array"===a.tickmode&&(b("arraytick0"),b("arraydtick")),b("labelpadding"),a._hovertitle=c,"date"===g&&l.getComponentMethod("calendars","handleDefaults")(n,a,"calendar",i.calendar),o(a,i.fullLayout),a.c2p=T.identity;var y=b("color",i.dfltColor),d=y===n.color?y:h.color;b("title.text")&&(T.coerceFont(b,"title.font",{family:h.family,size:T.bigFont(h.size),color:d}),b("title.offset")),b("tickangle"),b("autorange",!a.isValidRange(n.range))&&b("rangemode"),b("range"),a.cleanRange(),b("fixedrange"),x(n,a,b,g),s(n,a,b,g,i),p(n,a,b,g,i),e(n,a,b,{data:i.data,dataAttr:c});var m=v("gridcolor",k(y,.3)),w=v("gridwidth"),u=v("griddash"),S=b("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var _=v("startlinecolor",y),E=v("startlinewidth",w);b("startline",a.showgrid||!!_||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var L=v("endlinecolor",y),C=v("endlinewidth",w);return b("endline",a.showgrid||!!L||!!C)||(delete a.endlinecolor,delete a.endlinewidth),S?(b("minorgridcount"),b("minorgridwidth",w),b("minorgriddash",u),b("minorgridcolor",k(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),"none"===a.showticklabels&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,b("tickmode"),a}},25281:function($,I,t){"use strict";var M=t(89298),k=t(71828).isArray1D,l=t(53824),T=t(402),x=t(20347),p=t(83311),s=t(44807),e=t(4742),o=t(72505),r=t(68296),n=t(11435);$.exports=function(a,i){var c=M.getFromId(a,i.xaxis),h=M.getFromId(a,i.yaxis),f=i.aaxis,b=i.baxis,v=i.x,g=i.y,y=[];v&&k(v)&&y.push("x"),g&&k(g)&&y.push("y"),y.length&&r(i,f,b,"a","b",y);var d=i._a=i._a||i.a,m=i._b=i._b||i.b;v=i._x||i.x,g=i._y||i.y;var w={};i._cheater&&(v=l("index"===f.cheatertype?d.length:d,"index"===b.cheatertype?m.length:m,i.cheaterslope)),i._x=v=e(v),i._y=g=e(g),o(v,d,m),o(g,d,m),n(i),i.setScale();var _=T(v),E=T(g),L=.5*(_[1]-_[0]),C=.5*(_[1]+_[0]),P=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),j=1.3;return E=[z-P*j,z+P*j],i._extremes[c._id]=M.findExtremes(c,_=[C-L*j,C+L*j],{padded:!0}),i._extremes[h._id]=M.findExtremes(h,E,{padded:!0}),x(i,"a","b"),x(i,"b","a"),p(i,f),p(i,b),w.clipsegments=s(i._xctrl,i._yctrl,f,b),w.x=v,w.y=g,w.a=d,w.b=m,[w]}},44807:function($){"use strict";$.exports=function(I,t,M,k){var l,T,x,p=[],s=!!M.smoothing,e=!!k.smoothing,o=I[0].length-1,r=I.length-1;for(l=0,T=[],x=[];l<=o;l++)T[l]=I[0][l],x[l]=t[0][l];for(p.push({x:T,y:x,bicubic:s}),l=0,T=[],x=[];l<=r;l++)T[l]=I[l][o],x[l]=t[l][o];for(p.push({x:T,y:x,bicubic:e}),l=o,T=[],x=[];l>=0;l--)T[o-l]=I[r][l],x[o-l]=t[r][l];for(p.push({x:T,y:x,bicubic:s}),l=r,T=[],x=[];l>=0;l--)T[r-l]=I[l][0],x[r-l]=t[l][0];return p.push({x:T,y:x,bicubic:e}),p}},20347:function($,I,t){"use strict";var M=t(89298),k=t(1426).extendFlat;$.exports=function(l,T,x){var p,s,e,o,r,n,a,i,c,h,f,b,v,g,y=l["_"+T],d=l[T+"axis"],m=d._gridlines=[],w=d._minorgridlines=[],u=d._boundarylines=[],S=l["_"+x],_=l[x+"axis"];"array"===d.tickmode&&(d.tickvals=y.slice());var E=l._xctrl,L=l._yctrl,C=E[0].length,P=E.length,z=l._a.length,j=l._b.length;M.prepTicks(d),"array"===d.tickmode&&delete d.tickvals;var R=d.smoothing?3:1;function V(B){var N,U,J,Y,q,H,X,Q,ne,re,ae,se,pe=[],ke=[],me={};if("b"===T)for(U=l.b2j(B),J=Math.floor(Math.max(0,Math.min(j-2,U))),Y=U-J,me.length=j,me.crossLength=z,me.xy=function(le){return l.evalxy([],le,U)},me.dxy=function(le,ue){return l.dxydi([],le,J,ue,Y)},N=0;N<z;N++)H=Math.min(z-2,N),X=N-H,Q=l.evalxy([],N,U),_.smoothing&&N>0&&(ne=l.dxydi([],N-1,J,0,Y),pe.push(q[0]+ne[0]/3),ke.push(q[1]+ne[1]/3),re=l.dxydi([],N-1,J,1,Y),pe.push(Q[0]-re[0]/3),ke.push(Q[1]-re[1]/3)),pe.push(Q[0]),ke.push(Q[1]),q=Q;else for(N=l.a2i(B),H=Math.floor(Math.max(0,Math.min(z-2,N))),X=N-H,me.length=z,me.crossLength=j,me.xy=function(le){return l.evalxy([],N,le)},me.dxy=function(le,ue){return l.dxydj([],H,le,X,ue)},U=0;U<j;U++)J=Math.min(j-2,U),Y=U-J,Q=l.evalxy([],N,U),_.smoothing&&U>0&&(ae=l.dxydj([],H,U-1,X,0),pe.push(q[0]+ae[0]/3),ke.push(q[1]+ae[1]/3),se=l.dxydj([],H,U-1,X,1),pe.push(Q[0]-se[0]/3),ke.push(Q[1]-se[1]/3)),pe.push(Q[0]),ke.push(Q[1]),q=Q;return me.axisLetter=T,me.axis=d,me.crossAxis=_,me.value=B,me.constvar=x,me.index=i,me.x=pe,me.y=ke,me.smoothing=_.smoothing,me}function D(B){var N,U,J,Y,q,H=[],X=[],Q={};if(Q.length=y.length,Q.crossLength=S.length,"b"===T)for(J=Math.max(0,Math.min(j-2,B)),q=Math.min(1,Math.max(0,B-J)),Q.xy=function(ne){return l.evalxy([],ne,B)},Q.dxy=function(ne,re){return l.dxydi([],ne,J,re,q)},N=0;N<C;N++)H[N]=E[B*R][N],X[N]=L[B*R][N];else for(U=Math.max(0,Math.min(z-2,B)),Y=Math.min(1,Math.max(0,B-U)),Q.xy=function(ne){return l.evalxy([],B,ne)},Q.dxy=function(ne,re){return l.dxydj([],U,ne,Y,re)},N=0;N<P;N++)H[N]=E[N][B*R],X[N]=L[N][B*R];return Q.axisLetter=T,Q.axis=d,Q.crossAxis=_,Q.value=y[B],Q.constvar=x,Q.index=B,Q.x=H,Q.y=X,Q.smoothing=_.smoothing,Q}if("array"===d.tickmode){for(o=5e-15,n=(r=[Math.floor((y.length-1-d.arraytick0)/d.arraydtick*(1+o)),Math.ceil(-d.arraytick0/d.arraydtick/(1+o))].sort(function(B,N){return B-N}))[0]-1,a=r[1]+1,i=n;i<a;i++)(s=d.arraytick0+d.arraydtick*i)<0||s>y.length-1||m.push(k(D(s),{color:d.gridcolor,width:d.gridwidth,dash:d.griddash}));for(i=n;i<a;i++)if(e=d.arraytick0+d.arraydtick*i,f=Math.min(e+d.arraydtick,y.length-1),!(e<0||e>y.length-1||f<0||f>y.length-1))for(b=y[e],v=y[f],p=0;p<d.minorgridcount;p++)(g=f-e)<=0||(h=b+(v-b)*(p+1)/(d.minorgridcount+1)*(d.arraydtick/g))<y[0]||h>y[y.length-1]||w.push(k(V(h),{color:d.minorgridcolor,width:d.minorgridwidth,dash:d.minorgriddash}));d.startline&&u.push(k(D(0),{color:d.startlinecolor,width:d.startlinewidth})),d.endline&&u.push(k(D(y.length-1),{color:d.endlinecolor,width:d.endlinewidth}))}else{for(o=5e-15,n=(r=[Math.floor((y[y.length-1]-d.tick0)/d.dtick*(1+o)),Math.ceil((y[0]-d.tick0)/d.dtick/(1+o))].sort(function(B,N){return B-N}))[0],a=r[1],i=n;i<=a;i++)m.push(k(V(c=d.tick0+d.dtick*i),{color:d.gridcolor,width:d.gridwidth,dash:d.griddash}));for(i=n-1;i<a+1;i++)for(c=d.tick0+d.dtick*i,p=0;p<d.minorgridcount;p++)(h=c+d.dtick*(p+1)/(d.minorgridcount+1))<y[0]||h>y[y.length-1]||w.push(k(V(h),{color:d.minorgridcolor,width:d.minorgridwidth,dash:d.minorgriddash}));d.startline&&u.push(k(V(y[0]),{color:d.startlinecolor,width:d.startlinewidth})),d.endline&&u.push(k(V(y[y.length-1]),{color:d.endlinecolor,width:d.endlinewidth}))}}},83311:function($,I,t){"use strict";var M=t(89298),k=t(1426).extendFlat;$.exports=function(l,T){var x,p,s,e=T._labels=[],o=T._gridlines;for(x=0;x<o.length;x++)s=o[x],-1!==["start","both"].indexOf(T.showticklabels)&&(p=M.tickText(T,s.value),k(p,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:0===x,isLast:x===o.length-1}),e.push(p)),-1!==["end","both"].indexOf(T.showticklabels)&&(p=M.tickText(T,s.value),k(p,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:0===x,isLast:x===o.length-1}),e.push(p))}},42048:function($){"use strict";$.exports=function(I,t,M,k){var l=I[0]-t[0],T=I[1]-t[1],x=M[0]-t[0],p=M[1]-t[1],s=Math.pow(l*l+T*T,.25),e=Math.pow(x*x+p*p,.25),o=(e*e*l-s*s*x)*k,r=(e*e*T-s*s*p)*k,n=e*(s+e)*3,a=s*(s+e)*3;return[[t[0]+(n&&o/n),t[1]+(n&&r/n)],[t[0]-(a&&o/a),t[1]-(a&&r/a)]]}},53824:function($,I,t){"use strict";var M=t(71828).isArrayOrTypedArray;$.exports=function(k,l,T){var x,p,s,e,o,r,n=[],a=M(k)?k.length:k,i=M(l)?l.length:l,c=M(k)?k:null,h=M(l)?l:null;c&&(s=(c.length-1)/(c[c.length-1]-c[0])/(a-1)),h&&(e=(h.length-1)/(h[h.length-1]-h[0])/(i-1));var f=1/0,b=-1/0;for(p=0;p<i;p++)for(n[p]=[],o=h?(h[p]-h[0])*e:p/(i-1),x=0;x<a;x++)r=(c?(c[x]-c[0])*s:x/(a-1))-o*T,f=Math.min(r,f),b=Math.max(r,b),n[p][x]=r;var v=1/(b-f),g=-f*v;for(p=0;p<i;p++)for(x=0;x<a;x++)n[p][x]=v*n[p][x]+g;return n}},45664:function($,I,t){"use strict";var M=t(42048),k=t(71828).ensureArray;function l(T,x,p){return[(2*(-.5*p[0]+1.5*x[0])+T[0])/3,(2*(-.5*p[1]+1.5*x[1])+T[1])/3]}$.exports=function(T,x,p,s,e,o){var r,n,a,i,c,h,f,b,v,g,y=p[0].length,d=p.length,m=e?3*y-2:y,w=o?3*d-2:d;for(T=k(T,w),x=k(x,w),a=0;a<w;a++)T[a]=k(T[a],m),x[a]=k(x[a],m);for(n=0,i=0;n<d;n++,i+=o?3:1)for(c=T[i],h=x[i],f=p[n],b=s[n],r=0,a=0;r<y;r++,a+=e?3:1)c[a]=f[r],h[a]=b[r];if(e)for(n=0,i=0;n<d;n++,i+=o?3:1){for(r=1,a=3;r<y-1;r++,a+=3)v=M([p[n][r-1],s[n][r-1]],[p[n][r],s[n][r]],[p[n][r+1],s[n][r+1]],e),T[i][a-1]=v[0][0],x[i][a-1]=v[0][1],T[i][a+1]=v[1][0],x[i][a+1]=v[1][1];g=l([T[i][0],x[i][0]],[T[i][2],x[i][2]],[T[i][3],x[i][3]]),T[i][1]=g[0],x[i][1]=g[1],g=l([T[i][m-1],x[i][m-1]],[T[i][m-3],x[i][m-3]],[T[i][m-4],x[i][m-4]]),T[i][m-2]=g[0],x[i][m-2]=g[1]}if(o)for(a=0;a<m;a++){for(i=3;i<w-3;i+=3)v=M([T[i-3][a],x[i-3][a]],[T[i][a],x[i][a]],[T[i+3][a],x[i+3][a]],o),T[i-1][a]=v[0][0],x[i-1][a]=v[0][1],T[i+1][a]=v[1][0],x[i+1][a]=v[1][1];g=l([T[0][a],x[0][a]],[T[2][a],x[2][a]],[T[3][a],x[3][a]]),T[1][a]=g[0],x[1][a]=g[1],g=l([T[w-1][a],x[w-1][a]],[T[w-3][a],x[w-3][a]],[T[w-4][a],x[w-4][a]]),T[w-2][a]=g[0],x[w-2][a]=g[1]}if(e&&o)for(i=1;i<w;i+=(i+1)%3==0?2:1){for(a=3;a<m-3;a+=3)v=M([T[i][a-3],x[i][a-3]],[T[i][a],x[i][a]],[T[i][a+3],x[i][a+3]],e),T[i][a-1]=.5*(T[i][a-1]+v[0][0]),x[i][a-1]=.5*(x[i][a-1]+v[0][1]),T[i][a+1]=.5*(T[i][a+1]+v[1][0]),x[i][a+1]=.5*(x[i][a+1]+v[1][1]);g=l([T[i][0],x[i][0]],[T[i][2],x[i][2]],[T[i][3],x[i][3]]),T[i][1]=.5*(T[i][1]+g[0]),x[i][1]=.5*(x[i][1]+g[1]),g=l([T[i][m-1],x[i][m-1]],[T[i][m-3],x[i][m-3]],[T[i][m-4],x[i][m-4]]),T[i][m-2]=.5*(T[i][m-2]+g[0]),x[i][m-2]=.5*(x[i][m-2]+g[1])}return[T,x]}},35509:function($){"use strict";$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function($){"use strict";$.exports=function(I,t,M){return t&&M?function(k,l,T,x,p){var s,n,a;k||(k=[]),l*=3,T*=3;var i=x*x,c=1-x,h=c*c,f=c*x*2,b=-3*h,v=3*(h-f),g=3*(f-i),y=3*i,d=p*p,m=d*p,w=1-p,u=w*w,S=u*w;for(a=0;a<I.length;a++)s=b*(n=I[a])[T][l]+v*n[T][l+1]+g*n[T][l+2]+y*n[T][l+3],k[a]=S*s+3*(u*p*(b*n[T+1][l]+v*n[T+1][l+1]+g*n[T+1][l+2]+y*n[T+1][l+3])+w*d*(b*n[T+2][l]+v*n[T+2][l+1]+g*n[T+2][l+2]+y*n[T+2][l+3]))+m*(b*n[T+3][l]+v*n[T+3][l+1]+g*n[T+3][l+2]+y*n[T+3][l+3]);return k}:t?function(k,l,T,x,p){var s,o,r;k||(k=[]),l*=3;var n=x*x,a=1-x,i=a*a,c=a*x*2,h=-3*i,f=3*(i-c),b=3*(c-n),v=3*n,g=1-p;for(o=0;o<I.length;o++)s=h*(r=I[o])[T][l]+f*r[T][l+1]+b*r[T][l+2]+v*r[T][l+3],k[o]=g*s+p*(h*r[T+1][l]+f*r[T+1][l+1]+b*r[T+1][l+2]+v*r[T+1][l+3]);return k}:M?function(k,l,T,x,p){var s,n,a;k||(k=[]),T*=3;var i=p*p,c=i*p,h=1-p,f=h*h,b=f*h;for(n=0;n<I.length;n++)s=(a=I[n])[T][l+1]-a[T][l],k[n]=b*s+3*(f*p*(a[T+1][l+1]-a[T+1][l])+h*i*(a[T+2][l+1]-a[T+2][l]))+c*(a[T+3][l+1]-a[T+3][l]);return k}:function(k,l,T,x,p){var s,o,r;k||(k=[]);var n=1-p;for(o=0;o<I.length;o++)s=(r=I[o])[T][l+1]-r[T][l],k[o]=n*s+p*(r[T+1][l+1]-r[T+1][l]);return k}}},73057:function($){"use strict";$.exports=function(I,t,M){return t&&M?function(k,l,T,x,p){var s,n,a;k||(k=[]),l*=3,T*=3;var i=x*x,c=i*x,h=1-x,f=h*h,b=f*h,v=p*p,g=1-p,y=g*g,d=g*p*2,m=-3*y,w=3*(y-d),u=3*(d-v),S=3*v;for(a=0;a<I.length;a++)s=m*(n=I[a])[T][l]+w*n[T+1][l]+u*n[T+2][l]+S*n[T+3][l],k[a]=b*s+3*(f*x*(m*n[T][l+1]+w*n[T+1][l+1]+u*n[T+2][l+1]+S*n[T+3][l+1])+h*i*(m*n[T][l+2]+w*n[T+1][l+2]+u*n[T+2][l+2]+S*n[T+3][l+2]))+c*(m*n[T][l+3]+w*n[T+1][l+3]+u*n[T+2][l+3]+S*n[T+3][l+3]);return k}:t?function(k,l,T,x,p){var s,n,a;k||(k=[]),l*=3;var i=p*p,c=i*p,h=1-p,f=h*h,b=f*h;for(n=0;n<I.length;n++)s=(a=I[n])[T+1][l]-a[T][l],k[n]=b*s+3*(f*p*(a[T+1][l+1]-a[T][l+1])+h*i*(a[T+1][l+2]-a[T][l+2]))+c*(a[T+1][l+3]-a[T][l+3]);return k}:M?function(k,l,T,x,p){var s,o,r;k||(k=[]),T*=3;var n=1-x,a=p*p,i=1-p,c=i*i,h=i*p*2,f=-3*c,b=3*(c-h),v=3*(h-a),g=3*a;for(o=0;o<I.length;o++)s=f*(r=I[o])[T][l]+b*r[T+1][l]+v*r[T+2][l]+g*r[T+3][l],k[o]=n*s+x*(f*r[T][l+1]+b*r[T+1][l+1]+v*r[T+2][l+1]+g*r[T+3][l+1]);return k}:function(k,l,T,x,p){var s,o,r;k||(k=[]);var n=1-x;for(o=0;o<I.length;o++)s=(r=I[o])[T+1][l]-r[T][l],k[o]=n*s+x*(r[T+1][l+1]-r[T][l+1]);return k}}},20349:function($){"use strict";$.exports=function(I,t,M,k,l){var T=t-2,x=M-2;return k&&l?function(p,s,e){var o,i,c;p||(p=[]);var h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(e),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,e-f));h*=3,f*=3;var g=b*b,y=g*b,d=1-b,m=d*d,w=m*d,u=v*v,S=u*v,_=1-v,E=_*_,L=E*_;for(c=0;c<I.length;c++)o=w*(i=I[c])[f][h]+3*(m*b*i[f][h+1]+d*g*i[f][h+2])+y*i[f][h+3],p[c]=L*o+3*(E*v*(w*i[f+1][h]+3*(m*b*i[f+1][h+1]+d*g*i[f+1][h+2])+y*i[f+1][h+3])+_*u*(w*i[f+2][h]+3*(m*b*i[f+2][h+1]+d*g*i[f+2][h+2])+y*i[f+2][h+3]))+S*(w*i[f+3][h]+3*(m*b*i[f+3][h+1]+d*g*i[f+3][h+2])+y*i[f+3][h+3]);return p}:k?function(p,s,e){p||(p=[]);var o,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(e),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,e-f));h*=3;var g=b*b,y=g*b,d=1-b,m=d*d,w=m*d,u=1-v;for(i=0;i<I.length;i++)o=u*(c=I[i])[f][h]+v*c[f+1][h],p[i]=w*o+3*(m*b*(u*c[f][h+1]+v*c[f+1][h+1])+d*g*(u*c[f][h+2]+v*c[f+1][h+1]))+y*(u*c[f][h+3]+v*c[f+1][h+1]);return p}:l?function(p,s,e){p||(p=[]);var o,i,c,h=Math.max(0,Math.min(Math.floor(s),T)),f=Math.max(0,Math.min(Math.floor(e),x)),b=Math.max(0,Math.min(1,s-h)),v=Math.max(0,Math.min(1,e-f));f*=3;var g=v*v,y=g*v,d=1-v,m=d*d,w=m*d,u=1-b;for(i=0;i<I.length;i++)o=u*(c=I[i])[f][h]+b*c[f][h+1],p[i]=w*o+3*(m*v*(u*c[f+1][h]+b*c[f+1][h+1])+d*g*(u*c[f+2][h]+b*c[f+2][h+1]))+y*(u*c[f+3][h]+b*c[f+3][h+1]);return p}:function(p,s,e){p||(p=[]);var o,n,a,i=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(e),x)),h=Math.max(0,Math.min(1,s-i)),f=Math.max(0,Math.min(1,e-c)),b=1-f,v=1-h;for(n=0;n<I.length;n++)o=v*(a=I[n])[c][i]+h*a[c][i+1],p[n]=b*o+f*(v*a[c+1][i]+h*a[c+1][i+1]);return p}}},92087:function($,I,t){"use strict";var M=t(71828),k=t(19237),l=t(13145),T=t(99798),x=t(22399);$.exports=function(p,s,e,o){function r(a,i){return M.coerce(p,s,T,a,i)}s._clipPathId="clip"+s.uid+"carpet";var n=r("color",x.defaultLine);M.coerceFont(r,"font"),r("carpet"),l(p,s,o,r,n),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(p,s,r)||(s.visible=!1),s._cheater&&r("cheaterslope")):s.visible=!1}},21462:function($,I,t){"use strict";$.exports={attributes:t(99798),supplyDefaults:t(92087),plot:t(89740),calc:t(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function($){"use strict";$.exports=function(I,t){for(var M,k=I._fullData.length,l=0;l<k;l++){var T=I._fullData[l];if(T.index!==t.index&&"carpet"===T.type&&(M||(M=T),T.carpet===t.carpet))return T}return M}},67961:function($){"use strict";$.exports=function(I,t,M){if(0===I.length)return"";var k,l=[],T=M?3:1;for(k=0;k<I.length;k+=T)l.push(I[k]+","+t[k]),M&&k<I.length-T&&(l.push("C"),l.push([I[k+1]+","+t[k+1],I[k+2]+","+t[k+2]+" "].join(" ")));return l.join(M?"":"L")}},27669:function($,I,t){"use strict";var M=t(71828).isArrayOrTypedArray;$.exports=function(k,l,T){var x;for(M(k)?k.length>l.length&&(k=k.slice(0,l.length)):k=[],x=0;x<l.length;x++)k[x]=T(l[x]);return k}},11651:function($){"use strict";$.exports=function(I,t,M,k,l,T){var x=l[0]*I.dpdx(t),p=l[1]*I.dpdy(M),s=1,e=1;if(T){var o=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(T[0]*T[0]+T[1]*T[1]);e=Math.max(0,(l[0]*T[0]+l[1]*T[1])/o/r)}var a=180*Math.atan2(p,x)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:I.c2p(k,t,M),offsetMultplier:e}}},89740:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(27669),T=t(67961),x=t(11651),p=t(63893),s=t(71828),e=s.strRotate,o=s.strTranslate,r=t(18783);function n(f,b,v,g,y,d,m){var w="const-"+y+"-lines",u=v.selectAll("."+w).data(d);u.enter().append("path").classed(w,!0).style("vector-effect",m?"none":"non-scaling-stroke"),u.each(function(S){var _=S,L=_.y,C=l([],_.x,f.c2p),P=l([],L,b.c2p),z="M"+T(C,P,_.smoothing);M.select(this).attr("d",z).style("stroke-width",_.width).style("stroke",_.color).style("stroke-dasharray",k.dashStyle(_.dash,_.width)).style("fill","none")}),u.exit().remove()}function a(f,b,v,g,y,d,m,w){var u=d.selectAll("text."+w).data(m);u.enter().append("text").classed(w,!0);var S=0,_={};return u.each(function(E,L){var C;if("auto"===E.axis.tickangle)C=x(g,b,v,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;C=x(g,b,v,E.xy,[Math.cos(P),Math.sin(P)])}L||(_={angle:C.angle,flip:C.flip});var z=(E.endAnchor?-1:1)*C.flip,j=M.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(p.convertToTspans,f),R=k.bBox(this);j.attr("transform",o(C.p[0],C.p[1])+e(C.angle)+o(E.axis.labelpadding*z,.3*R.height)),S=Math.max(S,R.width+E.axis.labelpadding)}),u.exit().remove(),_.maxExtent=S,_}$.exports=function(f,b,v,g){var y=f._context.staticPlot,d=b.xaxis,m=b.yaxis,w=f._fullLayout._clips;s.makeTraceGroups(g,v,"trace").each(function(u){var S=M.select(this),_=u[0],E=_.trace,L=E.aaxis,C=E.baxis,P=s.ensureSingle(S,"g","minorlayer"),z=s.ensureSingle(S,"g","majorlayer"),j=s.ensureSingle(S,"g","boundarylayer"),R=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),n(d,m,z,0,"a",L._gridlines,!0),n(d,m,z,0,"b",C._gridlines,!0),n(d,m,P,0,"a",L._minorgridlines,!0),n(d,m,P,0,"b",C._minorgridlines,!0),n(d,m,j,0,"a-boundary",L._boundarylines,y),n(d,m,j,0,"b-boundary",C._boundarylines,y);var B,N,U,Y,q,H,X,Q,ne,re,ae,se,pe,ke,me,V=a(f,d,m,E,0,R,L._labels,"a-label"),D=a(f,d,m,E,0,R,C._labels,"b-label");B=f,N=R,U=E,Y=d,q=m,H=V,X=D,se=s.aggNums(Math.min,null,U.a),pe=s.aggNums(Math.max,null,U.a),ke=s.aggNums(Math.min,null,U.b),me=s.aggNums(Math.max,null,U.b),re=U.ab2xy(Q=.5*(se+pe),ne=ke,!0),ae=U.dxyda_rough(Q,ne),void 0===H.angle&&s.extendFlat(H,x(U,Y,q,re,U.dxydb_rough(Q,ne))),h(B,N,U,0,re,ae,U.aaxis,Y,q,H,"a-title"),re=U.ab2xy(Q=se,ne=.5*(ke+me),!0),ae=U.dxydb_rough(Q,ne),void 0===X.angle&&s.extendFlat(X,x(U,Y,q,re,U.dxyda_rough(Q,ne))),h(B,N,U,0,re,ae,U.baxis,Y,q,X,"b-title"),function(B,N,U,J,Y){var q,H,X,Q,ne=U.select("#"+B._clipPathId);ne.size()||(ne=U.append("clipPath").classed("carpetclip",!0));var re=s.ensureSingle(ne,"path","carpetboundary"),ae=N.clipsegments,se=[];for(Q=0;Q<ae.length;Q++)H=l([],(q=ae[Q]).x,J.c2p),X=l([],q.y,Y.c2p),se.push(T(H,X,q.bicubic));var pe="M"+se.join("L")+"Z";ne.attr("id",B._clipPathId),re.attr("d",pe)}(E,_,w,d,m)})};var i=r.LINE_SPACING,c=(1-r.MID_SHIFT)/i+1;function h(f,b,v,g,y,d,m,w,u,S,_){var E=[];m.title.text&&E.push(m.title.text);var L=b.selectAll("text."+_).data(E),C=S.maxExtent;L.enter().append("text").classed(_,!0),L.each(function(){var P=x(v,w,u,y,d);-1===["start","both"].indexOf(m.showticklabels)&&(C=0);var z=m.title.font.size;C+=z+m.title.offset;var j=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,R=j>90&&j<270,V=M.select(this);V.text(m.title.text).call(p.convertToTspans,f),R&&(C=(-p.lineCount(V)+c)*i*z-C),V.attr("transform",o(P.p[0],P.p[1])+e(P.angle)+o(0,C)).attr("text-anchor","middle").call(k.font,m.title.font)}),L.exit().remove()}},11435:function($,I,t){"use strict";var M=t(35509),k=t(65888).findBin,l=t(45664),T=t(20349),x=t(54495),p=t(73057);$.exports=function(s){var e=s._a,o=s._b,r=e.length,n=o.length,a=s.aaxis,i=s.baxis,c=e[0],h=e[r-1],f=o[0],b=o[n-1],v=e[e.length-1]-e[0],g=o[o.length-1]-o[0],y=v*M.RELATIVE_CULL_TOLERANCE,d=g*M.RELATIVE_CULL_TOLERANCE;c-=y,h+=y,f-=d,b+=d,s.isVisible=function(m,w){return m>c&&m<h&&w>f&&w<b},s.isOccluded=function(m,w){return m<c||m>h||w<f||w>b},s.setScale=function(){var u=l(s._xctrl,s._yctrl,s._x,s._y,a.smoothing,i.smoothing);s._xctrl=u[0],s._yctrl=u[1],s.evalxy=T([s._xctrl,s._yctrl],r,n,a.smoothing,i.smoothing),s.dxydi=x([s._xctrl,s._yctrl],a.smoothing,i.smoothing),s.dxydj=p([s._xctrl,s._yctrl],a.smoothing,i.smoothing)},s.i2a=function(m){var w=Math.max(0,Math.floor(m[0]),r-2),u=m[0]-w;return(1-u)*e[w]+u*e[w+1]},s.j2b=function(m){var w=Math.max(0,Math.floor(m[1]),r-2),u=m[1]-w;return(1-u)*o[w]+u*o[w+1]},s.ij2ab=function(m){return[s.i2a(m[0]),s.j2b(m[1])]},s.a2i=function(m){var w=Math.max(0,Math.min(k(m,e),r-2)),u=e[w];return Math.max(0,Math.min(r-1,w+(m-u)/(e[w+1]-u)))},s.b2j=function(m){var w=Math.max(0,Math.min(k(m,o),n-2)),u=o[w];return Math.max(0,Math.min(n-1,w+(m-u)/(o[w+1]-u)))},s.ab2ij=function(m){return[s.a2i(m[0]),s.b2j(m[1])]},s.i2c=function(m,w){return s.evalxy([],m,w)},s.ab2xy=function(m,w,u){if(!u&&(m<e[0]||m>e[r-1]|w<o[0]||w>o[n-1]))return[!1,!1];var S=s.a2i(m),_=s.b2j(w),E=s.evalxy([],S,_);if(u){var L,C,P,z,j=0,R=0,V=[];m<e[0]?(L=0,C=0,j=(m-e[0])/(e[1]-e[0])):m>e[r-1]?(L=r-2,C=1,j=(m-e[r-1])/(e[r-1]-e[r-2])):C=S-(L=Math.max(0,Math.min(r-2,Math.floor(S)))),w<o[0]?(P=0,z=0,R=(w-o[0])/(o[1]-o[0])):w>o[n-1]?(P=n-2,z=1,R=(w-o[n-1])/(o[n-1]-o[n-2])):z=_-(P=Math.max(0,Math.min(n-2,Math.floor(_)))),j&&(s.dxydi(V,L,P,C,z),E[0]+=V[0]*j,E[1]+=V[1]*j),R&&(s.dxydj(V,L,P,C,z),E[0]+=V[0]*R,E[1]+=V[1]*R)}return E},s.c2p=function(m,w,u){return[w.c2p(m[0]),u.c2p(m[1])]},s.p2x=function(m,w,u){return[w.p2c(m[0]),u.p2c(m[1])]},s.dadi=function(m){var w=Math.max(0,Math.min(e.length-2,m));return e[w+1]-e[w]},s.dbdj=function(m){var w=Math.max(0,Math.min(o.length-2,m));return o[w+1]-o[w]},s.dxyda=function(m,w,u,S){var _=s.dxydi(null,m,w,u,S),E=s.dadi(m,u);return[_[0]/E,_[1]/E]},s.dxydb=function(m,w,u,S){var _=s.dxydj(null,m,w,u,S),E=s.dbdj(w,S);return[_[0]/E,_[1]/E]},s.dxyda_rough=function(m,w,u){var S=v*(u||.1),_=s.ab2xy(m+S,w,!0),E=s.ab2xy(m-S,w,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dxydb_rough=function(m,w,u){var S=g*(u||.1),_=s.ab2xy(m,w+S,!0),E=s.ab2xy(m,w-S,!0);return[.5*(_[0]-E[0])/S,.5*(_[1]-E[1])/S]},s.dpdx=function(m){return m._m},s.dpdy=function(m){return m._m}}},72505:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l,T){var x,p,s,e=[],o=[],r=k[0].length,n=k.length;var i,c,h,f,b,v,g,y,d,m,B,N,U,J,Y,u=0;for(x=0;x<r;x++)for(p=0;p<n;p++)void 0===k[p][x]&&(e.push(x),o.push(p),k[p][x]=(N=p,U=void 0,J=void 0,Y=void 0,J=0,Y=0,(B=x)>0&&void 0!==(U=k[N][B-1])&&(Y++,J+=U),B<r-1&&void 0!==(U=k[N][B+1])&&(Y++,J+=U),N>0&&void 0!==(U=k[N-1][B])&&(Y++,J+=U),N<n-1&&void 0!==(U=k[N+1][B])&&(Y++,J+=U),J/Math.max(1,Y))),u=Math.max(u,Math.abs(k[p][x]));if(!e.length)return k;var S=0,_=0,E=e.length;do{for(S=0,s=0;s<E;s++){p=o[s];var C,P,z,j,R,V=0,D=0;0===(x=e[s])?(P=l[j=Math.min(r-1,2)],D+=(C=k[p][1])+(C-k[p][j])*(l[0]-(z=l[1]))/(z-P),V++):x===r-1&&(P=l[j=Math.max(0,r-3)],D+=(C=k[p][r-2])+(C-k[p][j])*(l[r-1]-(z=l[r-2]))/(z-P),V++),(0===x||x===r-1)&&p>0&&p<n-1&&(D+=((c=T[p]-T[p-1])*k[p+1][x]+(i=T[p+1]-T[p])*k[p-1][x])/(c+i),V++),0===p?(P=T[R=Math.min(n-1,2)],D+=(C=k[1][x])+(C-k[R][x])*(T[0]-(z=T[1]))/(z-P),V++):p===n-1&&(P=T[R=Math.max(0,n-3)],D+=(C=k[n-2][x])+(C-k[R][x])*(T[n-1]-(z=T[n-2]))/(z-P),V++),(0===p||p===n-1)&&x>0&&x<r-1&&(D+=((c=l[x]-l[x-1])*k[p][x+1]+(i=l[x+1]-l[x])*k[p][x-1])/(c+i),V++),V?D/=V:(y=(b=T[p+1]-T[p])*(v=T[p]-T[p-1])*(b+v),D=((g=(h=l[x+1]-l[x])*(f=l[x]-l[x-1])*(h+f))*(v*k[p+1][x]+b*k[p-1][x])+y*(f*k[p][x+1]+h*k[p][x-1]))/(y*(f+h)+g*(v+b))),S+=(m=(d=D-k[p][x])/u)*m,k[p][x]+=d*(1+(V?0:.85))}S=Math.sqrt(S)}while(_++<100&&S>1e-5);return M.log("Smoother converged to",S,"after",_,"iterations"),k}},19237:function($,I,t){"use strict";var M=t(71828).isArray1D;$.exports=function(k,l,T){var x=T("x"),p=x&&x.length,s=T("y"),e=s&&s.length;if(!p&&!e)return!1;if(l._cheater=!x,p&&!M(x)||e&&!M(s))l._length=null;else{var o=p?x.length:1/0;e&&(o=Math.min(o,s.length)),l.a&&l.a.length&&(o=Math.min(o,l.a.length)),l.b&&l.b.length&&(o=Math.min(o,l.b.length)),l._length=o}return!0}},69568:function($,I,t){"use strict";var M=t(5386).f,k=t(19316),l=t(50693),T=t(9012),x=t(22399).defaultLine,p=t(1426).extendFlat,s=k.marker.line;$.exports=p({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:p({},k.geojson,{}),featureidkey:k.featureidkey,text:p({},k.text,{}),hovertext:p({},k.hovertext,{}),marker:{line:{color:p({},s.color,{dflt:x}),width:p({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:p({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:p({},T.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function($,I,t){"use strict";var M=t(92770),k=t(50606).BADNUM,l=t(78803),T=t(75225),x=t(66279);function p(s){return s&&"string"==typeof s}$.exports=function(s,e){var o,r=e._length,n=new Array(r);o=e.geojson?function(f){return p(f)||M(f)}:p;for(var a=0;a<r;a++){var i=n[a]={},c=e.locations[a],h=e.z[a];o(c)&&M(h)?(i.loc=c,i.z=h):(i.loc=null,i.z=k),i.index=a}return T(n,e),l(s,e,{vals:e.z,containerStr:"",cLetter:"z"}),x(n,e),n}},61869:function($,I,t){"use strict";var M=t(71828),k=t(1586),l=t(69568);$.exports=function(T,x,p,s){function e(i,c){return M.coerce(T,x,l,i,c)}var o=e("locations"),r=e("z");if(o&&o.length&&M.isArrayOrTypedArray(r)&&r.length){x._length=Math.min(o.length,r.length);var n,a=e("geojson");("string"==typeof a&&""!==a||M.isPlainObject(a))&&(n="geojson-id"),"geojson-id"===e("locationmode",n)&&e("featureidkey"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.width")&&e("marker.line.color"),e("marker.opacity"),k(T,x,s,e,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(x,e)}else x.visible=!1}},92069:function($){"use strict";$.exports=function(I,t,M,k,l){I.location=t.location,I.z=t.z;var T=k[l];return T.fIn&&T.fIn.properties&&(I.properties=T.fIn.properties),I.ct=T.ct,I}},42300:function($,I,t){"use strict";var M=t(89298),k=t(69568),l=t(71828).fillText;$.exports=function(T,x,p){var s,e,o,r,n=T.cd,a=n[0].trace,i=T.subplot,c=[x,p],h=[x+360,p];for(e=0;e<n.length;e++)if(r=!1,(s=n[e])._polygons){for(o=0;o<s._polygons.length;o++)s._polygons[o].contains(c)&&(r=!r),s._polygons[o].contains(h)&&(r=!r);if(r)break}if(r&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=M.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(f,b,v){if(!b.hovertemplate){var g=v.hi||b.hoverinfo,y=String(v.loc),d="all"===g?k.hoverinfo.flags:g.split("+"),m=-1!==d.indexOf("name"),w=-1!==d.indexOf("location"),u=-1!==d.indexOf("z"),S=-1!==d.indexOf("text"),_=[];!m&&w?f.nameOverride=y:(m&&(f.nameOverride=b.name),w&&_.push(y)),u&&_.push(f.zLabel),S&&l(v,b,_),f.extraText=_.join("<br>")}}(T,a,s),[T]}},51319:function($,I,t){"use strict";$.exports={attributes:t(69568),supplyDefaults:t(61869),colorbar:t(61243),calc:t(38675),calcGeoJSON:t(99841).calcGeoJSON,plot:t(99841).plot,style:t(99636).style,styleOnSelect:t(99636).styleOnSelect,hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),moduleType:"trace",name:"choropleth",basePlotModule:t(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(41327),T=t(90973).getTopojsonFeatures,x=t(71739).findExtremes,p=t(99636).style;$.exports={calcGeoJSON:function(s,e){for(var o=s[0].trace,r=e[o.geo],n=r._subplot,a=o.locationmode,i=o._length,c="geojson-id"===a?l.extractTraceFeature(s):T(o,n.topojson),h=[],f=[],b=0;b<i;b++){var v=s[b],g="geojson-id"===a?v.fOut:l.locationToFeature(a,v.loc,c);if(g){v.geojson=g,v.ct=g.properties.ct,v._polygons=l.feature2polygons(g);var y=l.computeBbox(g);h.push(y[0],y[2]),f.push(y[1],y[3])}else v.geojson=null}if("geojson"===r.fitbounds&&"geojson-id"===a){var d=l.computeBbox(l.getTraceGeojson(o));h=[d[0],d[2]],f=[d[1],d[3]]}var m={padded:!0};o._extremes.lon=x(r.lonaxis._ax,h,m),o._extremes.lat=x(r.lataxis._ax,f,m)},plot:function(s,e,o){var r=e.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(r,o,"trace choropleth").each(function(n){var a=M.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),p(s,n)})}}},81253:function($){"use strict";$.exports=function(I,t){var M,k,l,T,x,p=I.cd,s=I.xaxis,e=I.yaxis,o=[];if(!1===t)for(M=0;M<p.length;M++)p[M].selected=0;else for(M=0;M<p.length;M++)(l=(k=p[M]).ct)&&(T=s.c2p(l),x=e.c2p(l),t.contains([T,x],null,M,I)?(o.push({pointNumber:M,lon:l[0],lat:l[1]}),k.selected=1):k.selected=0);return o}},99636:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(91424),T=t(21081);function x(p,s){var e=s[0].trace,o=s[0].node3.selectAll(".choroplethlocation"),r=e.marker||{},n=r.line||{},a=T.makeColorScaleFuncFromTrace(e);o.each(function(i){M.select(this).attr("fill",a(i.z)).call(k.stroke,i.mlc||n.color).call(l.dashLine,"",i.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(o,e)}$.exports={style:function(p,s){s&&x(0,s)},styleOnSelect:function(p,s){var o=s[0].trace;o.selectedpoints?l.selectedPointStyle(s[0].node3.selectAll(".choroplethlocation"),o):x(0,s)}}},64496:function($,I,t){"use strict";var M=t(69568),k=t(50693),l=t(5386).f,T=t(9012),x=t(1426).extendFlat;$.exports=x({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:x({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:x({},M.marker.line.color,{editType:"plot"}),width:x({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:x({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:x({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:x({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(21081),T=t(91424),x=t(18214).makeBlank,p=t(41327);function s(e){var o,r=e[0].trace,n=r._opts;if(r.selectedpoints){for(var a=T.makeSelectedPointStyleFns(r),i=0;i<e.length;i++){var c=e[i];c.fOut&&(c.fOut.properties.mo2=a.selectedOpacityFn(c))}o={type:"identity",property:"mo2"}}else o=k.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return k.extendFlat(n.fill.paint,{"fill-opacity":o}),k.extendFlat(n.line.paint,{"line-opacity":o}),n}$.exports={convert:function(e){var o=e[0].trace,r=!0===o.visible&&0!==o._length,n={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},i=o._opts={fill:n,line:a,geojson:x()};if(!r)return i;var c=p.extractTraceFeature(e);if(!c)return i;var h,f,b,v=l.makeColorScaleFuncFromTrace(o),g=o.marker,y=g.line||{};k.isArrayOrTypedArray(g.opacity)&&(h=function(_){var E=_.mo;return M(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(y.color)&&(f=function(_){return _.mlc}),k.isArrayOrTypedArray(y.width)&&(b=function(_){return _.mlw});for(var d=0;d<e.length;d++){var m=e[d],w=m.fOut;if(w){var u=w.properties;u.fc=v(m.z),h&&(u.mo=h(m)),f&&(u.mlc=f(m)),b&&(u.mlw=b(m)),m.ct=u.ct,m._polygons=p.feature2polygons(w)}}var S=h?{type:"identity",property:"mo"}:g.opacity;return k.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(a.paint,{"line-color":f?{type:"identity",property:"mlc"}:y.color,"line-width":b?{type:"identity",property:"mlw"}:y.width,"line-opacity":S}),n.layout.visibility="visible",a.layout.visibility="visible",i.geojson={type:"FeatureCollection",features:c},s(e),i},convertOnSelect:s}},22654:function($,I,t){"use strict";var M=t(71828),k=t(1586),l=t(64496);$.exports=function(T,x,p,s){function e(a,i){return M.coerce(T,x,l,a,i)}var o=e("locations"),r=e("z"),n=e("geojson");M.isArrayOrTypedArray(o)&&o.length&&M.isArrayOrTypedArray(r)&&r.length&&("string"==typeof n&&""!==n||M.isPlainObject(n))?(e("featureidkey"),x._length=Math.min(o.length,r.length),e("below"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.width")&&e("marker.line.color"),e("marker.opacity"),k(T,x,s,e,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(x,e)):x.visible=!1}},57516:function($,I,t){"use strict";$.exports={attributes:t(64496),supplyDefaults:t(22654),colorbar:t(61243),calc:t(38675),plot:t(7852),hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(M,k){for(var l=k.getMapLayers(),T=l.length-2;T>=0;T--){var x=l[T].id;if("string"==typeof x&&0===x.indexOf("water"))for(var p=T+1;p<l.length;p++)if("string"==typeof(x=l[p].id)&&-1===x.indexOf("plotly-"))return x}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function($,I,t){"use strict";var M=t(82004).convert,k=t(82004).convertOnSelect,l=t(77734).traceLayerPrefix;function T(p,s){this.type="choroplethmapbox",this.subplot=p,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",l+s+"-fill"],["line",l+s+"-line"]],this.below=null}var x=T.prototype;x.update=function(p){this._update(M(p)),p[0].trace._glTrace=this},x.updateOnSelect=function(p){this._update(k(p))},x._update=function(p){var s=this.subplot,e=this.layerList,o=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(p.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(p,o),this.below=o);for(var r=0;r<e.length;r++){var n=e[r],i=n[1],c=p[n[0]];s.setOptions(i,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&s.setOptions(i,"setPaintProperty",c.paint)}},x._addLayers=function(p,s){for(var e=this.subplot,o=this.layerList,r=this.sourceId,n=0;n<o.length;n++){var a=o[n],i=a[0],c=p[i];e.addLayer({type:i,id:a[1],source:r,layout:c.layout,paint:c.paint},s)}},x._removeLayers=function(){for(var p=this.subplot.map,s=this.layerList,e=s.length-1;e>=0;e--)p.removeLayer(s[e][1])},x.dispose=function(){var p=this.subplot.map;this._removeLayers(),p.removeSource(this.sourceId)},$.exports=function(p,s){var e=s[0].trace,o=new T(p,e.uid),r=o.sourceId,n=M(s),a=o.below=p.belowLookup["trace-"+e.uid];return p.map.addSource(r,{type:"geojson",data:n.geojson}),o._addLayers(n,a),s[0].trace._glTrace=o,o}},12674:function($,I,t){"use strict";var M=t(50693),k=t(12663).axisHoverFormat,l=t(5386).f,T=t(2418),x=t(9012),p=t(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},x.showlegend,{dflt:!1})};p(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){s[e]=T[e]}),s.hoverinfo=p({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,$.exports=s},31371:function($,I,t){"use strict";var M=t(78803);$.exports=function(k,l){for(var T=l.u,x=l.v,p=l.w,s=Math.min(l.x.length,l.y.length,l.z.length,T.length,x.length,p.length),e=-1/0,o=1/0,r=0;r<s;r++){var n=T[r],a=x[r],i=p[r],c=Math.sqrt(n*n+a*a+i*i);e=Math.max(e,c),o=Math.min(o,c)}l._len=s,l._normMax=e,M(k,l,{vals:[o,e],containerStr:"",cLetter:"c"})}},5453:function($,I,t){"use strict";var M=t(9330).gl_cone3d,k=t(9330).gl_cone3d.createConeMesh,l=t(71828).simpleMap,T=t(81697).parseColorScale,x=t(21081).extractOpts,p=t(90060);function s(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var e=s.prototype;e.handlePick=function(i){if(i.object===this.mesh){var c=i.index=i.data.index,v=this.data.u[c],g=this.data.v[c],y=this.data.w[c];i.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c],v,g,y,Math.sqrt(v*v+g*g+y*y)];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[c]?i.textLabel=d[c]:d&&(i.textLabel=d),!0}};var o={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,b={};function v(m,w){var u=h[w],S=f[o[w]];return l(m,function(_){return u.d2l(_)*S})}b.vectors=p(v(c.u,"xaxis"),v(c.v,"yaxis"),v(c.w,"zaxis"),c._len),b.positions=p(v(c.x,"xaxis"),v(c.y,"yaxis"),v(c.z,"zaxis"),c._len);var g=x(c);b.colormap=T(c),b.vertexIntensityBounds=[g.min/c._normMax,g.max/c._normMax],b.coneOffset=r[c.anchor],b.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var y=M(b),d=c.lightposition;return y.lightPosition=[d.x,d.y,d.z],y.ambient=c.lighting.ambient,y.diffuse=c.lighting.diffuse,y.specular=c.lighting.specular,y.roughness=c.lighting.roughness,y.fresnel=c.lighting.fresnel,y.opacity=c.opacity,c._pad=n[c.anchor]*y.vectorScale*y.coneScale*c._normMax,y}e.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),b=k(h,f),v=new s(i,c.uid);return v.mesh=b,v.data=c,b._trace=v,i.glplot.add(b),v}},91750:function($,I,t){"use strict";var M=t(71828),k=t(1586),l=t(12674);$.exports=function(T,x,p,s){function e(h,f){return M.coerce(T,x,l,h,f)}var o=e("u"),r=e("v"),n=e("w"),a=e("x"),i=e("y"),c=e("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(e("sizeref"),e("sizemode"),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),k(T,x,s,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),x._length=null):x.visible=!1}},98128:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"cone",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(12674),supplyDefaults:t(91750),colorbar:{min:"cmin",max:"cmax"},calc:t(31371),plot:t(5453),eventData:function(M,k){return M.norm=k.traceCoordinate[6],M},meta:{}}},70600:function($,I,t){"use strict";var M=t(21606),k=t(82196),l=t(12663),T=l.axisHoverFormat,x=l.descriptionOnlyNumbers,p=t(50693),s=t(79952).P,e=t(41940),o=t(1426).extendFlat,r=t(74808),n=r.COMPARISON_OPS2,a=r.INTERVAL_OPS,i=k.line;$.exports=o({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:o({},M.texttemplate,{}),textfont:o({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:o({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:e({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:x("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o({},i.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:o({},i.smoothing,{}),editType:"plot"}},p("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function($,I,t){"use strict";var M=t(21081),k=t(90757),l=t(18670),T=t(53572);$.exports=function(x,p){var s=k(x,p),e=s[0].z;l(p,e);var o,r=p.contours,n=M.extractOpts(p);if("heatmap"===r.coloring&&n.auto&&!1===p.autocontour){var a=r.start,i=T(r),c=r.size||1,h=Math.floor((i-a)/c)+1;isFinite(c)||(c=1,h=1);var f=a-c/2;o=[f,f+h*c]}else o=e;return M.calc(x,p,{vals:o,cLetter:"z"}),s}},20083:function($){"use strict";$.exports=function(I,t){var M,k=I[0],l=k.z;switch(t.type){case"levels":var T=Math.min(l[0][0],l[0][1]);for(M=0;M<I.length;M++){var x=I[M];x.prefixBoundary=!x.edgepaths.length&&(T>x.level||x.starts.length&&T===x.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var p=k.x.length,s=k.y.length,e=-1/0,o=1/0;for(M=0;M<s;M++)o=Math.min(o,l[M][0]),o=Math.min(o,l[M][p-1]),e=Math.max(e,l[M][0]),e=Math.max(e,l[M][p-1]);for(M=1;M<p-1;M++)o=Math.min(o,l[0][M]),o=Math.min(o,l[s-1][M]),e=Math.max(e,l[0][M]),e=Math.max(e,l[s-1][M]);var r,n,a=t.value;switch(t._operation){case">":a>e&&(k.prefixBoundary=!0);break;case"<":(a<o||k.starts.length&&a===o)&&(k.prefixBoundary=!0);break;case"[]":r=Math.min(a[0],a[1]),((n=Math.max(a[0],a[1]))<o||r>e||k.starts.length&&n===o)&&(k.prefixBoundary=!0);break;case"][":r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),r<o&&n>e&&(k.prefixBoundary=!0)}}}},90654:function($,I,t){"use strict";var M=t(21081),k=t(86068),l=t(53572);$.exports={min:"zmin",max:"zmax",calc:function(T,x,p){var s=x.contours,e=x.line,o=s.size||1,r=s.coloring,n=k(x,{isColorbar:!0});if("heatmap"===r){var a=M.extractOpts(x);p._fillgradient=a.reversescale?M.flipScale(a.colorscale):a.colorscale,p._zrange=[a.min,a.max]}else"fill"===r&&(p._fillcolor=n);p._line={color:"lines"===r?n:e.color,width:!1!==s.showlines?e.width:0,dash:e.dash},p._levels={start:s.start,end:l(s),size:o}}}},36914:function($){"use strict";$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function($,I,t){"use strict";var M=t(92770),k=t(14523),l=t(7901),T=l.addOpacity,x=l.opacity,p=t(74808),s=p.CONSTRAINT_REDUCTION,e=p.COMPARISON_OPS2;$.exports=function(o,r,n,a,i,c){var h,f,b,y,d,m,v=r.contours,g=n("contours.operation");v._operation=s[g],y=n,-1===e.indexOf((d=v).operation)?(y("contours.value",[0,1]),Array.isArray(d.value)?d.value.length>2?d.value=d.value.slice(2):0===d.length?d.value=[0,1]:d.length<2?(m=parseFloat(d.value[0]),d.value=[m,m+1]):d.value=[parseFloat(d.value[0]),parseFloat(d.value[1])]:M(d.value)&&(m=parseFloat(d.value),d.value=[m,m+1])):(y("contours.value",0),M(d.value)||(d.value=Array.isArray(d.value)?parseFloat(d.value[0]):0)),"="===g?h=v.showlines=!0:(h=n("contours.showlines"),b=n("fillcolor",T((o.line||{}).color||i,.5))),h&&(f=n("line.color",b&&x(b)?T(r.fillcolor,1):i),n("line.width",2),n("line.dash")),n("line.smoothing"),k(n,a,f,c)}},64237:function($,I,t){"use strict";var M=t(74808),k=t(92770);function l(p,s){var e,o=Array.isArray(s);function r(n){return k(n)?+n:null}return-1!==M.COMPARISON_OPS2.indexOf(p)?e=r(o?s[0]:s):-1!==M.INTERVAL_OPS.indexOf(p)?e=o?[r(s[0]),r(s[1])]:[r(s),r(s)]:-1!==M.SET_OPS.indexOf(p)&&(e=o?s.map(r):[r(s)]),e}function T(p){return function(s){s=l(p,s);var e=Math.min(s[0],s[1]),o=Math.max(s[0],s[1]);return{start:e,end:o,size:o-e}}}function x(p){return function(s){return{start:s=l(p,s),end:1/0,size:1/0}}}$.exports={"[]":T("[]"),"][":T("]["),">":x(">"),"<":x("<"),"=":x("=")}},67217:function($){"use strict";$.exports=function(I,t,M,k){var l=k("contours.start"),T=k("contours.end"),x=!1===l||!1===T,p=M("contours.size");!(x?t.autocontour=!0:M("autocontour",!1))&&p||M("ncontours")}},84857:function($,I,t){"use strict";var M=t(71828);function k(l){return M.extendFlat({},l,{edgepaths:M.extendDeep([],l.edgepaths),paths:M.extendDeep([],l.paths),starts:M.extendDeep([],l.starts)})}$.exports=function(l,T){var x,p,s,e=function(n){return n.reverse()},o=function(n){return n};switch(T){case"=":case"<":return l;case">":for(1!==l.length&&M.warn("Contour data invalid for the specified inequality operation."),p=l[0],x=0;x<p.edgepaths.length;x++)p.edgepaths[x]=e(p.edgepaths[x]);for(x=0;x<p.paths.length;x++)p.paths[x]=e(p.paths[x]);for(x=0;x<p.starts.length;x++)p.starts[x]=e(p.starts[x]);return l;case"][":var r=e;e=o,o=r;case"[]":for(2!==l.length&&M.warn("Contour data invalid for the specified inequality range operation."),p=k(l[0]),s=k(l[1]),x=0;x<p.edgepaths.length;x++)p.edgepaths[x]=e(p.edgepaths[x]);for(x=0;x<p.paths.length;x++)p.paths[x]=e(p.paths[x]);for(x=0;x<p.starts.length;x++)p.starts[x]=e(p.starts[x]);for(;s.edgepaths.length;)p.edgepaths.push(o(s.edgepaths.shift()));for(;s.paths.length;)p.paths.push(o(s.paths.shift()));for(;s.starts.length;)p.starts.push(o(s.starts.shift()));return[p]}}},13031:function($,I,t){"use strict";var M=t(71828),k=t(67684),l=t(73927),T=t(83179),x=t(67217),p=t(8724),s=t(58623),e=t(70600);$.exports=function(o,r,n,a){function i(h,f){return M.coerce(o,r,e,h,f)}if(k(o,r,i,a)){l(o,r,a,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hoverongaps"),i("hovertemplate");var c="constraint"===i("contours.type");i("connectgaps",M.isArray1D(r.z)),c?T(o,r,i,a,n):(x(o,r,i,function(h){return M.coerce2(o,r,e,h)}),p(o,r,i,a)),r.contours&&"heatmap"===r.contours.coloring&&s(i,a)}else r.visible=!1}},87558:function($,I,t){"use strict";var M=t(71828),k=t(64237),l=t(53572);$.exports=function(T,x,p){for(var s="constraint"===T.type?k[T._operation](T.value):T,e=s.size,o=[],r=l(s),n=p.trace._carpetTrace,a=n?{xaxis:n.aaxis,yaxis:n.baxis,x:p.a,y:p.b}:{xaxis:x.xaxis,yaxis:x.yaxis,x:p.x,y:p.y},i=s.start;i<r;i+=e)if(o.push(M.extendFlat({level:i,crossings:{},starts:[],edgepaths:[],paths:[],z:p.z,smoothing:p.trace.line.smoothing},a)),o.length>1e3){M.warn("Too many contours, clipping at 1000",T);break}return o}},53572:function($){"use strict";$.exports=function(I){return I.end+I.size/1e6}},81696:function($,I,t){"use strict";var M=t(71828),k=t(36914);function l(p,s,e,o){return Math.abs(p[0]-s[0])<e&&Math.abs(p[1]-s[1])<o}function T(p,s,e,o,r){var n,ne,ae,se,pe,a=s.join(","),i=p.crossings[a],c=(ae=s,se=0,pe=0,(ne=i)>20&&e?208===ne||1114===ne?se=0===ae[0]?1:-1:pe=0===ae[1]?1:-1:-1!==k.BOTTOMSTART.indexOf(ne)?pe=1:-1!==k.LEFTSTART.indexOf(ne)?se=1:-1!==k.TOPSTART.indexOf(ne)?pe=-1:se=-1,[se,pe]),h=[x(p,s,[-c[0],-c[1]])],f=p.z.length,b=p.z[0].length,v=s.slice(),g=c.slice();for(n=0;n<1e4;n++){if(i>20?p.crossings[a]=k.SADDLEREMAINDER[i=k.CHOOSESADDLE[i][(c[0]||c[1])<0?0:1]]:delete p.crossings[a],!(c=k.NEWDELTA[i])){M.log("Found bad marching index:",i,s,p.level);break}if(h.push(x(p,s,c)),s[0]+=c[0],s[1]+=c[1],a=s.join(","),l(h[h.length-1],h[h.length-2],o,r)&&h.pop(),s[0]===v[0]&&s[1]===v[1]&&c[0]===g[0]&&c[1]===g[1]||e&&(c[0]&&(s[0]<0||s[0]>b-2)||c[1]&&(s[1]<0||s[1]>f-2)))break;i=p.crossings[a]}1e4===n&&M.log("Infinite loop in contour?");var d,m,w,u,S,_,E,L,C,P,z,j,R,V,D,B=l(h[0],h[h.length-1],o,r),N=0,U=.2*p.smoothing,J=[],Y=0;for(n=1;n<h.length;n++)V=(j=h[n])[2]-(R=h[n-1])[2],D=j[3]-R[3],N+=E=Math.sqrt(V*V+D*D),J.push(E);var q=N/J.length*U;function H(ne){return h[ne%h.length]}for(n=h.length-2;n>=Y;n--)if((d=J[n])<q){for(w=0,m=n-1;m>=Y&&d+J[m]<q;m--)d+=J[m];if(B&&n===h.length-2)for(w=0;w<m&&d+J[w]<q;w++)d+=J[w];S=n-m+w+1,_=Math.floor((n+m+w+2)/2),u=B||n!==h.length-2?B||-1!==m?S%2?H(_):[(H(_)[0]+H(_+1)[0])/2,(H(_)[1]+H(_+1)[1])/2]:h[0]:h[h.length-1],h.splice(m+1,n-m+1,u),n=m+1,w&&(Y=w),B&&(n===h.length-2?h[w]=h[h.length-1]:0===n&&(h[h.length-1]=h[0]))}for(h.splice(0,Y),n=0;n<h.length;n++)h[n].length=2;if(!(h.length<2))if(B)h.pop(),p.paths.push(h);else{e||M.log("Unclosed interior contour?",p.level,v.join(","),h.join("L"));var X=!1;for(L=0;L<p.edgepaths.length;L++)if(P=p.edgepaths[L],!X&&l(P[0],h[h.length-1],o,r)){h.pop(),X=!0;var Q=!1;for(C=0;C<p.edgepaths.length;C++)if(l((z=p.edgepaths[C])[z.length-1],h[0],o,r)){Q=!0,h.shift(),p.edgepaths.splice(L,1),C===L?p.paths.push(h.concat(z)):(C>L&&C--,p.edgepaths[C]=z.concat(h,P));break}Q||(p.edgepaths[L]=h.concat(P))}for(L=0;L<p.edgepaths.length&&!X;L++)l((P=p.edgepaths[L])[P.length-1],h[0],o,r)&&(h.shift(),p.edgepaths[L]=P.concat(h),X=!0);X||p.edgepaths.push(h)}}function x(p,s,e){var o=s[0]+Math.max(e[0],0),r=s[1]+Math.max(e[1],0),n=p.z[r][o],a=p.xaxis,i=p.yaxis;if(e[1]){var c=(p.level-n)/(p.z[r][o+1]-n),h=(1!==c?(1-c)*a.c2l(p.x[o]):0)+(0!==c?c*a.c2l(p.x[o+1]):0);return[a.c2p(a.l2c(h),!0),i.c2p(p.y[r],!0),o+c,r]}var f=(p.level-n)/(p.z[r+1][o]-n),b=(1!==f?(1-f)*i.c2l(p.y[r]):0)+(0!==f?f*i.c2l(p.y[r+1]):0);return[a.c2p(p.x[o],!0),i.c2p(i.l2c(b),!0),o,r+f]}$.exports=function(p,s,e){var o,r,n,a;for(s=s||.01,e=e||.01,r=0;r<p.length;r++){for(n=p[r],a=0;a<n.starts.length;a++)T(n,n.starts[a],"edge",s,e);for(o=0;Object.keys(n.crossings).length&&o<1e4;)o++,T(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,s,e);1e4===o&&M.log("Infinite loop in contour?")}}},52421:function($,I,t){"use strict";var M=t(7901),k=t(46248);$.exports=function(l,T,x,p,s){s||(s={}),s.isContour=!0;var e=k(l,T,x,p,s);return e&&e.forEach(function(o){var r=o.trace;"constraint"===r.contours.type&&(r.fillcolor&&M.opacity(r.fillcolor)?o.color=M.addOpacity(r.fillcolor,1):r.contours.showlines&&M.opacity(r.line.color)&&(o.color=M.addOpacity(r.line.color,1)))}),e}},99442:function($,I,t){"use strict";$.exports={attributes:t(70600),supplyDefaults:t(13031),calc:t(27529),plot:t(29854).plot,style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"contour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l,T,x){if(x||(x={}),k("contours.showlabels")){var p=l.font;M.coerceFont(k,"contours.labelfont",{family:p.family,size:p.size,color:T}),k("contours.labelformat")}!1!==x.hasHover&&k("zhoverformat")}},86068:function($,I,t){"use strict";var M=t(39898),k=t(21081),l=t(53572);$.exports=function(T){var x=T.contours,p=x.start,s=l(x),e=x.size||1,o=Math.floor((s-p)/e)+1,r="lines"===x.coloring?0:1,n=k.extractOpts(T);isFinite(e)||(e=1,o=1);var a,i,c=n.reversescale?k.flipScale(n.colorscale):n.colorscale,h=c.length,f=new Array(h),b=new Array(h);if("heatmap"===x.coloring){var v=n.min,g=n.max;for(i=0;i<h;i++)f[i]=(a=c[i])[0]*(g-v)+v,b[i]=a[1];var y=M.extent([v,g,x.start,x.start+e*(o-1)]),d=y[v<g?0:1],m=y[v<g?1:0];d!==v&&(f.splice(0,0,d),b.splice(0,0,b[0])),m!==g&&(f.push(m),b.push(b[b.length-1]))}else for(i=0;i<h;i++)f[i]=((a=c[i])[0]*(o+r-1)-r/2)*e+p,b[i]=a[1];return k.makeColorScaleFunc({domain:f,range:b},{noNumericCheck:!0})}},87678:function($,I,t){"use strict";var M=t(36914);function k(l,T){var x=(T[0][0]>l?0:1)+(T[0][1]>l?0:2)+(T[1][1]>l?0:4)+(T[1][0]>l?0:8);return 5===x||10===x?l>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?5===x?713:1114:5===x?104:208:15===x?0:x}$.exports=function(l){var T,x,p,s,e,o,r,n,a,i=l[0].z,c=i.length,h=i[0].length,f=2===c||2===h;for(x=0;x<c-1;x++)for(s=[],0===x&&(s=s.concat(M.BOTTOMSTART)),x===c-2&&(s=s.concat(M.TOPSTART)),T=0;T<h-1;T++)for(p=s.slice(),0===T&&(p=p.concat(M.LEFTSTART)),T===h-2&&(p=p.concat(M.RIGHTSTART)),e=T+","+x,o=[[i[x][T],i[x][T+1]],[i[x+1][T],i[x+1][T+1]]],a=0;a<l.length;a++)(r=k((n=l[a]).level,o))&&(n.crossings[e]=r,-1!==p.indexOf(r)&&(n.starts.push([T,x]),f&&-1!==p.indexOf(r,p.indexOf(r)+1)&&n.starts.push([T,x])))}},29854:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(21081),x=t(63893),p=t(89298),s=t(21994),e=t(50347),o=t(87678),r=t(81696),n=t(87558),a=t(84857),i=t(20083),c=t(36914),h=c.LABELOPTIMIZER;function f(g,y){var d,m,w,u,S,_,L="",C=0,P=g.edgepaths.map(function(B,N){return N}),z=!0;function j(B){return Math.abs(B[1]-y[2][1])<.01}function V(B){return Math.abs(B[0]-y[2][0])<.01}for(;P.length;){for(_=l.smoothopen(g.edgepaths[C],g.smoothing),L+=z?_:_.replace(/^M/,"L"),P.splice(P.indexOf(C),1),d=g.edgepaths[C][g.edgepaths[C].length-1],u=-1,w=0;w<4;w++){if(!d){k.log("Missing end?",C,g);break}for(Math.abs(d[1]-y[0][1])<.01&&!V(d)?m=y[1]:Math.abs(d[0]-y[0][0])<.01?m=y[0]:j(d)?m=y[3]:V(d)&&(m=y[2]),S=0;S<g.edgepaths.length;S++){var D=g.edgepaths[S][0];Math.abs(d[0]-m[0])<.01?Math.abs(d[0]-D[0])<.01&&(D[1]-d[1])*(m[1]-D[1])>=0&&(m=D,u=S):Math.abs(d[1]-m[1])<.01?Math.abs(d[1]-D[1])<.01&&(D[0]-d[0])*(m[0]-D[0])>=0&&(m=D,u=S):k.log("endpt to newendpt is not vert. or horz.",d,m,D)}if(d=m,u>=0)break;L+="L"+m}if(u===g.edgepaths.length){k.log("unclosed perimeter path");break}(z=-1===P.indexOf(C=u))&&(C=P[0],L+="Z")}for(C=0;C<g.paths.length;C++)L+=l.smoothclosed(g.paths[C],g.smoothing);return L}function b(g,y,d,m){var w=y.width/2,u=y.height/2,S=g.x,_=g.y,E=g.theta,L=Math.cos(E)*w,C=Math.sin(E)*w,P=(S>m.center?m.right-S:S-m.left)/(L+Math.abs(Math.sin(E)*u)),z=(_>m.middle?m.bottom-_:_-m.top)/(Math.abs(C)+Math.cos(E)*u);if(P<1||z<1)return 1/0;var j=h.EDGECOST*(1/(P-1)+1/(z-1));j+=h.ANGLECOST*E*E;for(var R=S-L,V=_-C,D=S+L,B=_+C,N=0;N<d.length;N++){var U=d[N],J=Math.cos(U.theta)*U.width/2,Y=Math.sin(U.theta)*U.width/2,q=2*k.segmentDistance(R,V,D,B,U.x-J,U.y-Y,U.x+J,U.y+Y)/(y.height+U.height),H=U.level===y.level,X=H?h.SAMELEVELDISTANCE:1;if(q<=X)return 1/0;j+=h.NEIGHBORCOST*(H?h.SAMELEVELFACTOR:1)/(q-X)}return j}function v(g){var y,d,m=g.trace._emptypoints,w=[],u=g.z.length,S=g.z[0].length,_=[];for(y=0;y<S;y++)_.push(1);for(y=0;y<u;y++)w.push(_.slice());for(y=0;y<m.length;y++)w[(d=m[y])[0]][d[1]]=0;return g.zmask=w,w}I.plot=function(g,y,d,m){var w=y.xaxis,u=y.yaxis;k.makeTraceGroups(m,d,"contour").each(function(S){var _=M.select(this),E=S[0],C=E.x,P=E.y,z=E.trace.contours,j=n(z,y,E),R=k.ensureSingle(_,"g","heatmapcoloring"),V=[];"heatmap"===z.coloring&&(V=[S]),e(g,y,V,R),o(j),r(j);var H,X,Q,D=w.c2p(C[0],!0),B=w.c2p(C[C.length-1],!0),N=u.c2p(P[0],!0),U=u.c2p(P[P.length-1],!0),J=[[D,U],[B,U],[B,N],[D,N]],Y=j;"constraint"===z.type&&(Y=a(j,z._operation)),H=J,X=z,(Q=k.ensureSingle(_,"g","contourbg").selectAll("path").data("fill"===X.coloring?[0]:[])).enter().append("path"),Q.exit().remove(),Q.attr("d","M"+H.join("L")+"Z").style("stroke","none"),function(q,H,X,Q){var ne="fill"===Q.coloring||"constraint"===Q.type&&"="!==Q._operation,re="M"+X.join("L")+"Z";ne&&i(H,Q);var ae=k.ensureSingle(q,"g","contourfill").selectAll("path").data(ne?H:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(se){var pe=(se.prefixBoundary?re:"")+f(se,X);pe?M.select(this).attr("d",pe).style("stroke","none"):M.select(this).remove()})}(_,Y,J,z),function(q,H,X,Q,ne){var re=X._context.staticPlot,ae=k.ensureSingle(q,"g","contourlines"),se=!1!==ne.showlines,pe=ne.showlabels,ke=se&&pe,me=I.createLines(ae,se||pe,H,re),le=I.createLineClip(ae,ke,X,Q.trace.uid),ue=q.selectAll("g.contourlabels").data(pe?[0]:[]);if(ue.exit().remove(),ue.enter().append("g").classed("contourlabels",!0),pe){var Ee=[],de=[];k.clearLocationCache();var xe=I.labelFormatter(X,Q),Te=l.tester.append("text").attr("data-notex",1).call(l.font,ne.labelfont),we=H[0].xaxis,K=H[0].yaxis,oe=we._length,he=K._length,ye=we.range,Me=K.range,Re=k.aggNums(Math.min,null,Q.x),Pe=k.aggNums(Math.max,null,Q.x),De=k.aggNums(Math.min,null,Q.y),fe=k.aggNums(Math.max,null,Q.y),ge=Math.max(we.c2p(Re,!0),0),be=Math.min(we.c2p(Pe,!0),oe),Ie=Math.max(K.c2p(fe,!0),0),He=Math.min(K.c2p(De,!0),he),Ve={};ye[0]<ye[1]?(Ve.left=ge,Ve.right=be):(Ve.left=be,Ve.right=ge),Me[0]<Me[1]?(Ve.top=Ie,Ve.bottom=He):(Ve.top=He,Ve.bottom=Ie),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,Ee.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var tt=Math.sqrt(oe*oe+he*he),nt=c.LABELDISTANCE*tt/Math.max(1,H.length/c.LABELINCREASE);me.each(function(st){var dt=I.calcTextOpts(st.level,xe,Te,X);M.select(this).selectAll("path").each(function(){var wt=k.getVisibleSegment(this,Ve,dt.height/2);if(wt&&!(wt.len<(dt.width+dt.height)*c.LABELMIN))for(var _t=Math.min(Math.ceil(wt.len/nt),c.LABELMAX),pt=0;pt<_t;pt++){var Pt=I.findBestTextLocation(this,wt,dt,de,Ve);if(!Pt)break;I.addLabelData(Pt,dt,de,Ee)}})}),Te.remove(),I.drawLabels(ue,de,X,le,ke?Ee:null)}pe&&!se&&me.remove()}(_,j,g,E,z),function(q,H,X,Q,ne){var re=Q.trace,se="clip"+re.uid,pe=X._fullLayout._clips.selectAll("#"+se).data(re.connectgaps?[]:[0]);if(pe.enter().append("clipPath").classed("contourclip",!0).attr("id",se),pe.exit().remove(),!1===re.connectgaps){var ke={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:H.xaxis,yaxis:H.yaxis,x:Q.x,y:Q.y,z:v(Q),smoothing:0};o([ke]),r([ke]),i([ke],{type:"levels"}),k.ensureSingle(pe,"path","").attr("d",(ke.prefixBoundary?"M"+ne.join("L")+"Z":"")+f(ke,ne))}else se=null;l.setClipUrl(q,se,X)}(_,y,g,E,J)})},I.createLines=function(g,y,d,m){var w=d[0].smoothing,u=g.selectAll("g.contourlevel").data(y?d:[]);if(u.exit().remove(),u.enter().append("g").classed("contourlevel",!0),y){var S=u.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return l.smoothopen(E,w)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var _=u.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});_.exit().remove(),_.enter().append("path").classed("closedline",!0),_.attr("d",function(E){return l.smoothclosed(E,w)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return u},I.createLineClip=function(g,y,d,m){var w=y?"clipline"+m:null,u=d._fullLayout._clips.selectAll("#"+w).data(y?[0]:[]);return u.exit().remove(),u.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),l.setClipUrl(g,w,d),u},I.labelFormatter=function(g,y){var d=g._fullLayout,m=y.trace,w=m.contours,u={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)u.tickformat=w.labelformat,s(u,d);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)u=S.colorbar._axis;else{if("constraint"===w.type){var _=w.value;u.range=Array.isArray(_)?[_[0],_[_.length-1]]:[_,_]}else u.range=[w.start,w.end],u.nticks=(w.end-w.start)/w.size;u.range[0]===u.range[1]&&(u.range[1]+=u.range[0]||1),u.nticks||(u.nticks=1e3),s(u,d),p.prepTicks(u),u._tmin=null,u._tmax=null}}return function(E){return p.tickText(u,E).text}},I.calcTextOpts=function(g,y,d,m){var w=y(g);d.text(w).call(x.convertToTspans,m);var u=d.node(),S=l.bBox(u,!0);return{text:w,width:S.width,height:S.height,fontSize:+u.style["font-size"].replace("px",""),level:g,dy:(S.top+S.bottom)/2}},I.findBestTextLocation=function(g,y,d,m,w){var u,S,_,E,L,C=d.width;y.isClosed?(u=y.min+(S=y.len/h.INITIALSEARCHPOINTS)/2,_=y.max):(u=y.min+(S=(y.len-C)/(h.INITIALSEARCHPOINTS+1))+C/2,_=y.max-(S+C)/2);for(var P=1/0,z=0;z<h.ITERATIONS;z++){for(var j=u;j<_;j+=S){var R=k.getTextLocation(g,y.total,j,C),V=b(R,d,m,w);V<P&&(P=V,L=R,E=j)}if(P>2*h.MAXCOST)break;z&&(S/=2),_=(u=E-S/2)+1.5*S}if(P<=h.MAXCOST)return L},I.addLabelData=function(g,y,d,m){var w=y.fontSize,u=y.width+w/3,S=Math.max(0,y.height-w/3),_=g.x,E=g.y,L=g.theta,C=Math.sin(L),P=Math.cos(L),z=function(R,V){return[_+R*P-V*C,E+R*C+V*P]},j=[z(-u/2,-S/2),z(-u/2,S/2),z(u/2,S/2),z(u/2,-S/2)];d.push({text:y.text,x:_,y:E,dy:y.dy,theta:L,level:y.level,width:u,height:S}),m.push(j)},I.drawLabels=function(g,y,d,m,w){var u=g.selectAll("text").data(y,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(u.exit().remove(),u.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;M.select(this).text(E.text).attr({x:L,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+C+")"}).call(x.convertToTspans,d)}),w){for(var S="",_=0;_<w.length;_++)S+="M"+w[_].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",S)}}},18670:function($,I,t){"use strict";var M=t(89298),k=t(71828);function l(T,x,p){var s={type:"linear",range:[T,x]};return M.autoTicks(s,(x-T)/(p||15)),s}$.exports=function(T,x){var p=T.contours;if(T.autocontour){var s=T.zmin,e=T.zmax;(T.zauto||void 0===s)&&(s=k.aggNums(Math.min,null,x)),(T.zauto||void 0===e)&&(e=k.aggNums(Math.max,null,x));var o=l(s,e,T.ncontours);p.size=o.dtick,p.start=M.tickFirst(o),o.range.reverse(),p.end=M.tickFirst(o),p.start===s&&(p.start+=p.size),p.end===e&&(p.end-=p.size),p.start>p.end&&(p.start=p.end=(p.start+p.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:p.start,end:p.end,size:p.size}),T._input.autocontour=!0}else if("constraint"!==p.type){var r,n=p.start,a=p.end,i=T._input.contours;n>a&&(p.start=i.start=a,a=p.end=i.end=n,n=p.start),p.size>0||(r=n===a?1:l(n,a,T.ncontours).dtick,i.size=p.size=r)}}},84426:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(70035),T=t(86068);$.exports=function(x){var p=M.select(x).selectAll("g.contour");p.style("opacity",function(s){return s[0].trace.opacity}),p.each(function(s){var e=M.select(this),o=s[0].trace,r=o.contours,n=o.line,a=r.size||1,i=r.start,c="constraint"===r.type,h=!c&&"lines"===r.coloring,f=!c&&"fill"===r.coloring,b=h||f?T(o):null;e.selectAll("g.contourlevel").each(function(y){M.select(this).selectAll("path").call(k.lineGroupStyle,n.width,h?b(y.level):n.color,n.dash)});var v=r.labelfont;if(e.selectAll("g.contourlabels text").each(function(y){k.font(M.select(this),{family:v.family,size:v.size,color:v.color||(h?b(y.level):n.color)})}),c)e.selectAll("g.contourfill path").style("fill",o.fillcolor);else if(f){var g;e.selectAll("g.contourfill path").style("fill",function(y){return void 0===g&&(g=y.level),b(y.level+.5*a)}),void 0===g&&(g=i),e.selectAll("g.contourbg path").style("fill",b(g-.5*a))}}),l(x)}},8724:function($,I,t){"use strict";var M=t(1586),k=t(14523);$.exports=function(l,T,x,p,s){var e,o=x("contours.coloring"),r="";"fill"===o&&(e=x("contours.showlines")),!1!==e&&("lines"!==o&&(r=x("line.color","#000")),x("line.width",.5),x("line.dash")),"none"!==o&&(!0!==l.showlegend&&(T.showlegend=!1),T._dfltShowLegend=!1,M(l,T,p,x,{prefix:"",cLetter:"z"})),x("line.smoothing"),k(x,p,r,s)}},88085:function($,I,t){"use strict";var M=t(21606),k=t(70600),l=t(50693),T=t(1426).extendFlat,x=k.contours;$.exports=T({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:x.type,start:x.start,end:x.end,size:x.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:x.showlines,showlabels:x.showlabels,labelfont:x.labelfont,labelformat:x.labelformat,operation:x.operation,value:x.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function($,I,t){"use strict";var M=t(78803),k=t(71828),l=t(68296),T=t(4742),x=t(824),p=t(43907),s=t(70769),e=t(75005),o=t(22882),r=t(18670);$.exports=function(n,a){var i=a._carpetTrace=o(n,a);if(i&&i.visible&&"legendonly"!==i.visible){if(!a.a||!a.b){var c=n.data[i.index],h=n.data[a.index];h.a||(h.a=c.a),h.b||(h.b=c.b),e(h,a,a._defaultColor,n._fullLayout)}var f=function(b,v){var g,y,d,m,w,u,S,_=v._carpetTrace,E=_.aaxis,L=_.baxis;E._minDtick=0,L._minDtick=0,k.isArray1D(v.z)&&l(v,E,L,"a","b",["z"]),g=v._a=v._a||v.a,m=v._b=v._b||v.b,g=g?E.makeCalcdata(v,"_a"):[],m=m?L.makeCalcdata(v,"_b"):[],y=v.a0||0,d=v.da||1,w=v.b0||0,u=v.db||1,S=v._z=T(v._z||v.z,v.transpose),v._emptypoints=p(S),x(S,v._emptypoints);var C=k.maxRowLength(S),R={a:s(v,"scaled"===v.xtype?"":g,y,d,C,E),b:s(v,"scaled"===v.ytype?"":m,w,u,S.length,L),z:S};return"levels"===v.contours.type&&"none"!==v.contours.coloring&&M(b,v,{vals:S,containerStr:"",cLetter:"z"}),[R]}(n,a);return r(a,a._z),f}}},75005:function($,I,t){"use strict";var M=t(71828),k=t(67684),l=t(88085),T=t(83179),x=t(67217),p=t(8724);$.exports=function(s,e,o,r){function n(a,i){return M.coerce(s,e,l,a,i)}if(n("carpet"),s.a&&s.b){if(!k(s,e,n,r,"a","b"))return void(e.visible=!1);n("text"),"constraint"===n("contours.type")?T(s,e,n,r,o,{hasHover:!1}):(x(s,e,n,function(a){return M.coerce2(s,e,l,a)}),p(s,e,n,r,{hasHover:!1}))}else e._defaultColor=o,e._length=null}},93740:function($,I,t){"use strict";$.exports={attributes:t(88085),supplyDefaults:t(75005),colorbar:t(90654),calc:t(59885),plot:t(51048),style:t(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function($,I,t){"use strict";var M=t(39898),k=t(27669),l=t(67961),T=t(91424),x=t(71828),p=t(87678),s=t(81696),e=t(29854),o=t(36914),r=t(84857),n=t(87558),a=t(20083),i=t(22882),c=t(4536);function h(v,g,y){var d=v.getPointAtLength(g),m=v.getPointAtLength(y),w=m.x-d.x,u=m.y-d.y,S=Math.sqrt(w*w+u*u);return[w/S,u/S]}function f(v){var g=Math.sqrt(v[0]*v[0]+v[1]*v[1]);return[v[0]/g,v[1]/g]}function b(v,g){var y=Math.abs(v[0]*g[0]+v[1]*g[1]);return Math.sqrt(1-y*y)/y}$.exports=function(v,g,y,d){var m=g.xaxis,w=g.yaxis;x.makeTraceGroups(d,y,"contour").each(function(u){var S=M.select(this),_=u[0],E=_.trace,L=E._carpetTrace=i(v,E),C=v.calcdata[L.index][0];if(L.visible&&"legendonly"!==L.visible){var P=_.a,z=_.b,j=E.contours,R=n(j,g,_),V="constraint"===j.type,D=j._operation,B=V?"="===D?"lines":"fill":j.coloring,N=[[P[0],z[z.length-1]],[P[P.length-1],z[z.length-1]],[P[P.length-1],z[0]],[P[0],z[0]]];p(R),s(R,1e-8*(P[P.length-1]-P[0]),1e-8*(z[z.length-1]-z[0]));var Y,q,H,X,Q=R;"constraint"===j.type&&(Q=r(R,D)),function(se,pe){var ke,me,le,ue,Ee,de,xe,Te,we;for(ke=0;ke<se.length;ke++){for(Ee=(ue=se[ke]).pedgepaths=[],de=ue.ppaths=[],me=0;me<ue.edgepaths.length;me++){for(we=ue.edgepaths[me],xe=[],le=0;le<we.length;le++)xe[le]=pe(we[le]);Ee.push(xe)}for(me=0;me<ue.paths.length;me++){for(we=ue.paths[me],Te=[],le=0;le<we.length;le++)Te[le]=pe(we[le]);de.push(Te)}}}(R,ae);var ne=[];for(X=C.clipsegments.length-1;X>=0;X--)q=k([],(Y=C.clipsegments[X]).x,m.c2p),H=k([],Y.y,w.c2p),q.reverse(),H.reverse(),ne.push(l(q,H,Y.bicubic));var re="M"+ne.join("L")+"Z";(function(se,pe,ke,me,le,ue){var Ee,de,xe,Te,we=x.ensureSingle(se,"g","contourbg").selectAll("path").data("fill"!==ue||le?[]:[0]);we.enter().append("path"),we.exit().remove();var K=[];for(Te=0;Te<pe.length;Te++)de=k([],(Ee=pe[Te]).x,ke.c2p),xe=k([],Ee.y,me.c2p),K.push(l(de,xe,Ee.bicubic));we.attr("d","M"+K.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,m,w,V,B),function(se,pe,ke,me,le,ue,Ee,de,xe,Te,we){var K="fill"===Te;K&&a(le,se.contours);var oe=x.ensureSingle(pe,"g","contourfill").selectAll("path").data(K?le:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(he){var ye=(he.prefixBoundary?we:"")+function(Me,Re,Pe,De,fe,ge,be,Ie){var He,Ve,tt,nt,st,dt,wt,_t="",pt=Re.edgepaths.map(function(Se,ze){return ze}),Pt=!0,St=1e-4*Math.abs(Pe[0][0]-Pe[2][0]),Ot=1e-4*Math.abs(Pe[0][1]-Pe[2][1]);function jt(Se){return Math.abs(Se[1]-Pe[0][1])<Ot}function Dt(Se){return Math.abs(Se[1]-Pe[2][1])<Ot}function Ye(Se){return Math.abs(Se[0]-Pe[0][0])<St}function Ze(Se){return Math.abs(Se[0]-Pe[2][0])<St}function Ne(Se,ze){var Ke,it,ct,mt,Lt="";for(jt(Se)&&!Ze(Se)||Dt(Se)&&!Ye(Se)?(mt=fe.aaxis,ct=c(fe,ge,[Se[0],ze[0]],.5*(Se[1]+ze[1]))):(mt=fe.baxis,ct=c(fe,ge,.5*(Se[0]+ze[0]),[Se[1],ze[1]])),Ke=1;Ke<ct.length;Ke++)for(Lt+=mt.smoothing?"C":"L",it=0;it<ct[Ke].length;it++){var At=ct[Ke][it];Lt+=[be.c2p(At[0]),Ie.c2p(At[1])]+" "}return Lt}for(He=0,Ve=null;pt.length;){for(Ve&&(_t+=Ne(Ve,Re.edgepaths[He][0])),wt=T.smoothopen(Re.edgepaths[He].map(De),Re.smoothing),_t+=Pt?wt:wt.replace(/^M/,"L"),pt.splice(pt.indexOf(He),1),Ve=Re.edgepaths[He][Re.edgepaths[He].length-1],st=-1,nt=0;nt<4;nt++){if(!Ve){x.log("Missing end?",He,Re);break}for(jt(Ve)&&!Ze(Ve)?tt=Pe[1]:Ye(Ve)?tt=Pe[0]:Dt(Ve)?tt=Pe[3]:Ze(Ve)&&(tt=Pe[2]),dt=0;dt<Re.edgepaths.length;dt++){var at=Re.edgepaths[dt][0];Math.abs(Ve[0]-tt[0])<St?Math.abs(Ve[0]-at[0])<St&&(at[1]-Ve[1])*(tt[1]-at[1])>=0&&(tt=at,st=dt):Math.abs(Ve[1]-tt[1])<Ot?Math.abs(Ve[1]-at[1])<Ot&&(at[0]-Ve[0])*(tt[0]-at[0])>=0&&(tt=at,st=dt):x.log("endpt to newendpt is not vert. or horz.",Ve,tt,at)}if(st>=0)break;_t+=Ne(Ve,tt),Ve=tt}if(st===Re.edgepaths.length){x.log("unclosed perimeter path");break}(Pt=-1===pt.indexOf(He=st))&&(He=pt[0],_t+=Ne(Ve,tt)+"Z",Ve=null)}for(He=0;He<Re.paths.length;He++)_t+=T.smoothclosed(Re.paths[He].map(De),Re.smoothing);return _t}(0,he,ue,Ee,de,xe,ke,me);ye?M.select(this).attr("d",ye).style("stroke","none"):M.select(this).remove()})}(E,S,m,w,Q,N,ae,L,C,B,re),function(se,pe,ke,me,le,ue,Ee){var de=ke._context.staticPlot,xe=x.ensureSingle(se,"g","contourlines"),Te=!1!==le.showlines,we=le.showlabels,K=Te&&we,oe=e.createLines(xe,Te||we,pe,de),he=e.createLineClip(xe,K,ke,me.trace.uid),ye=se.selectAll("g.contourlabels").data(we?[0]:[]);if(ye.exit().remove(),ye.enter().append("g").classed("contourlabels",!0),we){var Pe=ue.xaxis._length,De=ue.yaxis._length,fe=[[[0,0],[Pe,0],[Pe,De],[0,De]]],ge=[];x.clearLocationCache();var be=e.labelFormatter(ke,me),Ie=T.tester.append("text").attr("data-notex",1).call(T.font,le.labelfont),He={left:0,right:Pe,center:Pe/2,top:0,bottom:De,middle:De/2},Ve=Math.sqrt(Pe*Pe+De*De),tt=o.LABELDISTANCE*Ve/Math.max(1,pe.length/o.LABELINCREASE);oe.each(function(nt){var st=e.calcTextOpts(nt.level,be,Ie,ke);M.select(this).selectAll("path").each(function(dt){var _t=x.getVisibleSegment(this,He,st.height/2);if(_t&&(function(Ot,jt,Dt,Ye,Ze,Ne){for(var Je,at=0;at<Dt.pedgepaths.length;at++)jt===Dt.pedgepaths[at]&&(Je=Dt.edgepaths[at]);if(Je){var Se=Ze.a[0],ze=Ze.a[Ze.a.length-1],Ke=Ze.b[0],it=Ze.b[Ze.b.length-1],ct=h(Ot,0,1),mt=h(Ot,Ye.total,Ye.total-1),Lt=ht(Je[0],ct),At=Ye.total-ht(Je[Je.length-1],mt);Ye.min<Lt&&(Ye.min=Lt),Ye.max>At&&(Ye.max=At),Ye.len=Ye.max-Ye.min}function ht(Et,gt){var kt,It=0;return(Math.abs(Et[0]-Se)<.1||Math.abs(Et[0]-ze)<.1)&&(kt=f(Ze.dxydb_rough(Et[0],Et[1],.1)),It=Math.max(It,Ne*b(gt,kt)/2)),(Math.abs(Et[1]-Ke)<.1||Math.abs(Et[1]-it)<.1)&&(kt=f(Ze.dxyda_rough(Et[0],Et[1],.1)),It=Math.max(It,Ne*b(gt,kt)/2)),It}}(this,dt,nt,_t,Ee,st.height),!(_t.len<(st.width+st.height)*o.LABELMIN)))for(var pt=Math.min(Math.ceil(_t.len/tt),o.LABELMAX),Pt=0;Pt<pt;Pt++){var St=e.findBestTextLocation(this,_t,st,ge,He);if(!St)break;e.addLabelData(St,st,ge,fe)}})}),Ie.remove(),e.drawLabels(ye,ge,ke,he,K?fe:null)}we&&!Te&&oe.remove()}(S,R,v,_,j,g,L),T.setClipUrl(S,L._clipPathId,v)}function ae(se){var pe=L.ab2xy(se[0],se[1],!0);return[m.c2p(pe[0]),w.c2p(pe[1])]}})}},64096:function($,I,t){"use strict";var M=t(50693),k=t(5386).f,l=t(9012),T=t(99181),x=t(1426).extendFlat;$.exports=x({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:x({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:x({},l.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function($,I,t){"use strict";var M=t(92770),k=t(71828).isArrayOrTypedArray,l=t(50606).BADNUM,T=t(78803),x=t(71828)._;$.exports=function(p,s){for(var e=s._length,o=new Array(e),r=s.z,n=k(r)&&r.length,a=0;a<e;a++){var i=o[a]={},c=s.lon[a],h=s.lat[a];if(i.lonlat=M(c)&&M(h)?[+c,+h]:[l,l],n){var f=r[a];i.z=M(f)?f:l}}return T(p,s,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),e&&(o[0].t={labels:{lat:x(p,"lat:")+" ",lon:x(p,"lon:")+" "}}),o}},52414:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(7901),T=t(21081),x=t(50606).BADNUM,p=t(18214).makeBlank;$.exports=function(s){var e=s[0].trace,o=!0===e.visible&&0!==e._length,r=e._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:p()};if(!o)return r;var n,a=[],i=e.z,c=e.radius,h=k.isArrayOrTypedArray(i)&&i.length,f=k.isArrayOrTypedArray(c);for(n=0;n<s.length;n++){var b=s[n],v=b.lonlat;if(v[0]!==x){var g={};if(h){var y=b.z;g.z=y!==x?y:0}f&&(g.r=M(c[n])&&c[n]>0?+c[n]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:g})}}var d=T.extractOpts(e),m=d.reversescale?T.flipScale(d.colorscale):d.colorscale,w=m[0][1],u=["interpolate",["linear"],["heatmap-density"],0,l.opacity(w)<1?w:l.addOpacity(w,0)];for(n=1;n<m.length;n++)u.push(m[n][0],m[n][1]);return k.extendFlat(r.heatmap.paint,{"heatmap-weight":h?["interpolate",["linear"],["get","z"],d.min,0,d.max,1]:1/(d.max-d.min),"heatmap-color":u,"heatmap-radius":f?{type:"identity",property:"r"}:e.radius,"heatmap-opacity":e.opacity}),r.geojson={type:"FeatureCollection",features:a},r.heatmap.layout.visibility="visible",r}},79429:function($,I,t){"use strict";var M=t(71828),k=t(1586),l=t(64096);$.exports=function(T,x,p,s){function e(a,i){return M.coerce(T,x,l,a,i)}var o=e("lon")||[],r=e("lat")||[],n=Math.min(o.length,r.length);n?(x._length=n,e("z"),e("radius"),e("below"),e("text"),e("hovertext"),e("hovertemplate"),k(T,x,s,e,{prefix:"",cLetter:"z"})):x.visible=!1}},62474:function($){"use strict";$.exports=function(I,t){return I.lon=t.lon,I.lat=t.lat,I.z=t.z,I}},84684:function($,I,t){"use strict";var M=t(89298),k=t(28178).hoverPoints,l=t(28178).getExtraText;$.exports=function(T,x,p){var s=k(T,x,p);if(s){var e=s[0],o=e.cd,r=o[0].trace,n=o[e.index];if(delete e.color,"z"in n){var a=e.subplot.mockAxis;e.z=n.z,e.zLabel=M.tickText(a,a.c2l(n.z),"hover").text}return e.extraText=l(r,n,o[0].t.labels),[e]}}},93814:function($,I,t){"use strict";$.exports={attributes:t(64096),supplyDefaults:t(79429),colorbar:t(61243),formatLabels:t(15636),calc:t(85070),plot:t(7336),hoverPoints:t(84684),eventData:t(62474),getBelow:function(M,k){for(var l=k.getMapLayers(),T=0;T<l.length;T++){var x=l[T],p=x.id;if("symbol"===x.type&&"string"==typeof p&&-1===p.indexOf("plotly-"))return p}},moduleType:"trace",name:"densitymapbox",basePlotModule:t(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function($,I,t){"use strict";var M=t(52414),k=t(77734).traceLayerPrefix;function l(x,p){this.type="densitymapbox",this.subplot=x,this.uid=p,this.sourceId="source-"+p,this.layerList=[["heatmap",k+p+"-heatmap"]],this.below=null}var T=l.prototype;T.update=function(x){var p=this.subplot,s=this.layerList,e=M(x),o=p.belowLookup["trace-"+this.uid];p.map.getSource(this.sourceId).setData(e.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(e,o),this.below=o);for(var r=0;r<s.length;r++){var n=s[r],i=n[1],c=e[n[0]];p.setOptions(i,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&p.setOptions(i,"setPaintProperty",c.paint)}},T._addLayers=function(x,p){for(var s=this.subplot,e=this.layerList,o=this.sourceId,r=0;r<e.length;r++){var n=e[r],a=n[0],i=x[a];s.addLayer({type:a,id:n[1],source:o,layout:i.layout,paint:i.paint},p)}},T._removeLayers=function(){for(var x=this.subplot.map,p=this.layerList,s=p.length-1;s>=0;s--)x.removeLayer(p[s][1])},T.dispose=function(){var x=this.subplot.map;this._removeLayers(),x.removeSource(this.sourceId)},$.exports=function(x,p){var s=p[0].trace,e=new l(x,s.uid),o=e.sourceId,r=M(p),n=e.below=x.belowLookup["trace-"+s.uid];return x.map.addSource(o,{type:"geojson",data:r.geojson}),e._addLayers(r,n),e}},49789:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(l.text,k,"tx"),M.mergeArray(l.hovertext,k,"htx");var x=l.marker;if(x){M.mergeArray(x.opacity,k,"mo"),M.mergeArray(x.color,k,"mc");var p=x.line;p&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"))}}},1285:function($,I,t){"use strict";var M,k=t(1486),l=t(82196).line,T=t(9012),x=t(12663).axisHoverFormat,p=t(5386).f,s=t(5386).s,e=t(18517),o=t(1426).extendFlat,r=t(7901);$.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:k.hovertext,hovertemplate:p({},{keys:e.eventDataKeys}),hoverinfo:o({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:o({},k.insidetextanchor,{dflt:"middle"}),textangle:o({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:o({},k.orientation,{}),offset:o({},k.offset,{arrayOk:!1}),width:o({},k.width,{arrayOk:!1}),marker:(M=o({},k.marker),delete M.pattern,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:o({},l.color,{dflt:r.defaultLine}),width:o({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},9532:function($,I,t){"use strict";var M=t(89298),k=t(42973),l=t(49789),T=t(66279),x=t(50606).BADNUM;function p(s){return s===x?0:s}$.exports=function(s,e){var o,r,n,a,i,c,h,f,b=M.getFromId(s,e.xaxis||"x"),v=M.getFromId(s,e.yaxis||"y");"h"===e.orientation?(o=b.makeCalcdata(e,"x"),n=v.makeCalcdata(e,"y"),a=k(e,v,"y",n),i=!!e.yperiodalignment,c="y"):(o=v.makeCalcdata(e,"y"),n=b.makeCalcdata(e,"x"),a=k(e,b,"x",n),i=!!e.xperiodalignment,c="x"),r=a.vals;var g,y=Math.min(r.length,o.length),d=new Array(y);for(e._base=[],h=0;h<y;h++){o[h]<0&&(o[h]=x);var m=!1;o[h]!==x&&h+1<y&&o[h+1]!==x&&(m=!0),f=d[h]={p:r[h],s:o[h],cNext:m},e._base[h]=-.5*f.s,i&&(d[h].orig_p=n[h],d[h][c+"End"]=a.ends[h],d[h][c+"Start"]=a.starts[h]),e.ids&&(f.id=String(e.ids[h])),0===h&&(d[0].vTotal=0),d[0].vTotal+=p(f.s),f.begR=p(f.s)/p(d[0].s)}for(h=0;h<y;h++)(f=d[h]).s!==x&&(f.sumR=f.s/d[0].vTotal,f.difR=void 0!==g?f.s/g:1,g=f.s);return l(d,e),T(d,e),d}},18517:function($){"use strict";$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function($,I,t){"use strict";var M=t(11661).setGroupPositions;$.exports=function(k,l){var T,x,p=k._fullLayout,s=k._fullData,e=k.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(x=0;x<s.length;x++){var c=s[x];!0===c.visible&&c.xaxis===o._id&&c.yaxis===r._id&&"funnel"===c.type&&(T=e[x],"h"===c.orientation?i.push(T):a.push(T),n.push(T))}var f={mode:p.funnelmode,norm:p.funnelnorm,gap:p.funnelgap,groupgap:p.funnelgroupgap};for(M(k,o,r,a,f),M(k,r,o,i,f),x=0;x<n.length;x++){T=n[x];for(var b=0;b<T.length;b++)b+1<T.length&&(T[b].nextP0=T[b+1].p0,T[b].nextS0=T[b+1].s0,T[b].nextP1=T[b+1].p1,T[b].nextS1=T[b+1].s1)}}},26199:function($,I,t){"use strict";var M=t(71828),k=t(26125),l=t(90769).handleText,T=t(67513),x=t(73927),p=t(1285),s=t(7901);$.exports={supplyDefaults:function(e,o,r,n){function a(f,b){return M.coerce(e,o,p,f,b)}if(T(e,o,n,a)){x(e,o,n,a),a("xhoverformat"),a("yhoverformat"),a("orientation",o.y&&!o.x?"v":"h"),a("offset"),a("width");var i=a("text");a("hovertext"),a("hovertemplate");var c=a("textposition");l(e,o,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===o.textposition||o.texttemplate||a("textinfo",Array.isArray(i)?"text+value":"value");var h=a("marker.color",r);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",(b=M.isArrayOrTypedArray(f=h)?"#000":f,s.addOpacity(b,.5*s.opacity(b)))),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else o.visible=!1;var f,b},crossTraceDefaults:function(e,o){var r,n;function a(c){return M.coerce(n._input,n,p,c)}if("group"===o.funnelmode)for(var i=0;i<e.length;i++)r=(n=e[i])._input,k(r,n,o,a)}}},34598:function($){"use strict";$.exports=function(I,t){return I.x="xVal"in t?t.xVal:t.x,I.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(I.percentInitial=t.percentInitial),"percentPrevious"in t&&(I.percentPrevious=t.percentPrevious),"percentTotal"in t&&(I.percentTotal=t.percentTotal),t.xa&&(I.xaxis=t.xa),t.ya&&(I.yaxis=t.ya),I}},63341:function($,I,t){"use strict";var M=t(7901).opacity,k=t(95423).hoverOnBars,l=t(71828).formatPercent;$.exports=function(T,x,p,s,e){var y,d,m,w,u,o=k(T,x,p,s,e);if(o){var r=o.cd,n=r[0].trace,i=r[o.index];o[("h"===n.orientation?"x":"y")+"LabelVal"]=i.s,o.percentInitial=i.begR,o.percentInitialLabel=l(i.begR,1),o.percentPrevious=i.difR,o.percentPreviousLabel=l(i.difR,1),o.percentTotal=i.sumR,o.percentTotalLabel=l(i.sumR,1);var c=i.hi||n.hoverinfo,h=[];if(c&&"none"!==c&&"skip"!==c){var f="all"===c,b=c.split("+"),v=function(g){return f||-1!==b.indexOf(g)};v("percent initial")&&h.push(o.percentInitialLabel+" of initial"),v("percent previous")&&h.push(o.percentPreviousLabel+" of previous"),v("percent total")&&h.push(o.percentTotalLabel+" of total")}return o.extraText=h.join("<br>"),o.color=(d=n.marker,w=(y=i).mlc||d.line.color,u=y.mlw||d.line.width,M(m=y.mc||d.color)?m:M(w)&&u?w:void 0),[o]}}},51759:function($,I,t){"use strict";$.exports={attributes:t(1285),layoutAttributes:t(10440),supplyDefaults:t(26199).supplyDefaults,crossTraceDefaults:t(26199).crossTraceDefaults,supplyLayoutDefaults:t(93138),calc:t(9532),crossTraceCalc:t(8984),plot:t(80461),style:t(68266).style,hoverPoints:t(63341),eventData:t(34598),selectPoints:t(81974),moduleType:"trace",name:"funnel",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function($){"use strict";$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function($,I,t){"use strict";var M=t(71828),k=t(10440);$.exports=function(l,T,x){var p=!1;function s(r,n){return M.coerce(l,T,k,r,n)}for(var e=0;e<x.length;e++){var o=x[e];if(o.visible&&"funnel"===o.type){p=!0;break}}p&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},80461:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(50606).BADNUM,x=t(17295),p=t(72597).clearMinTextSize;function s(e,o,r,n){var a=[],i=[],c=n?o:r,h=n?r:o;return a[0]=c.c2p(e.s0,!0),i[0]=h.c2p(e.p0,!0),a[1]=c.c2p(e.s1,!0),i[1]=h.c2p(e.p1,!0),a[2]=c.c2p(e.nextS0,!0),i[2]=h.c2p(e.nextP0,!0),a[3]=c.c2p(e.nextS1,!0),i[3]=h.c2p(e.nextP1,!0),n?[a,i]:[i,a]}$.exports=function(e,o,r,n){var i,c,b,v,a=e._fullLayout;p("funnel",a),i=e,b=(c=o).xaxis,v=c.yaxis,k.makeTraceGroups(n,r,"trace bars").each(function(g){var y=M.select(this),d=g[0].trace,m=k.ensureSingle(y,"g","regions");if(d.connector&&d.connector.visible){var w="h"===d.orientation,u=m.selectAll("g.region").data(k.identity);u.enter().append("g").classed("region",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,b,v,w),C=L[0],P=L[1],z="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&C[2]!==T&&P[2]!==T&&C[3]!==T&&P[3]!==T&&(z+=w?"M"+C[0]+","+P[1]+"L"+C[2]+","+P[2]+"H"+C[3]+"L"+C[1]+","+P[1]+"Z":"M"+C[1]+","+P[1]+"L"+C[2]+","+P[3]+"V"+P[2]+"L"+C[1]+","+P[0]+"Z"),""===z&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()}),function(i,c,h,f){var b=c.xaxis,v=c.yaxis;k.makeTraceGroups(f,h,"trace bars").each(function(g){var y=M.select(this),d=g[0].trace,m=k.ensureSingle(y,"g","lines");if(d.connector&&d.connector.visible&&d.connector.line.width){var w="h"===d.orientation,u=m.selectAll("g.line").data(k.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=s(_,b,v,w),C=L[0],P=L[1],z="";void 0!==C[3]&&void 0!==P[3]&&(w?(z+="M"+C[0]+","+P[1]+"L"+C[2]+","+P[2],z+="M"+C[1]+","+P[1]+"L"+C[3]+","+P[2]):(z+="M"+C[1]+","+P[1]+"L"+C[2]+","+P[3],z+="M"+C[1]+","+P[0]+"L"+C[2]+","+P[2])),""===z&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(l.setClipUrl,c.layerClipId,i)}})}else m.remove()})}(e,o,r,n),x.plot(e,o,r,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},68266:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(7901),T=t(37822).DESELECTDIM,x=t(16688),p=t(72597).resizeText,s=x.styleTextPoints;$.exports={style:function(e,o,r){var n=r||M.select(e).selectAll("g.funnellayer").selectAll("g.trace");p(e,n,"funnel"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=M.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c.marker;M.select(this).call(l.fill,h.mc||f.color).call(l.stroke,h.mlc||f.line.color).call(k.dashLine,f.line.dash,h.mlw||f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,e),i.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(l.fill,c.connector.fillcolor)}),i.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},86807:function($,I,t){"use strict";var M=t(34e3),k=t(9012),l=t(27670).Y,T=t(5386).f,x=t(5386).s,p=t(1426).extendFlat;$.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:p({},M.marker.line.color,{dflt:null}),width:p({},M.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:p({},M.scalegroup,{}),textinfo:p({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:x({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:p({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:p({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:p({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function($,I,t){"use strict";var M=t(74875);I.name="funnelarea",I.plot=function(k,l,T,x){M.plotBasePlot(I.name,k,l,T,x)},I.clean=function(k,l,T,x){M.cleanBasePlot(I.name,k,l,T,x)}},89574:function($,I,t){"use strict";var M=t(32354);$.exports={calc:function(k,l){return M.calc(k,l)},crossTraceCalc:function(k){M.crossTraceCalc(k,{type:"funnelarea"})}}},86282:function($,I,t){"use strict";var M=t(71828),k=t(86807),l=t(27670).c,T=t(90769).handleText,x=t(37434).handleLabelsAndValues;$.exports=function(p,s,e,o){function r(g,y){return M.coerce(p,s,k,g,y)}var n=r("labels"),a=r("values"),i=x(n,a),c=i.len;if(s._hasLabels=i.hasLabels,s._hasValues=i.hasValues,!s._hasLabels&&s._hasValues&&(r("label0"),r("dlabel")),c){s._length=c,r("marker.line.width")&&r("marker.line.color",o.paper_bgcolor),r("marker.colors"),r("scalegroup");var h,f=r("text"),b=r("texttemplate");if(b||(h=r("textinfo",Array.isArray(f)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),b||h&&"none"!==h){var v=r("textposition");T(p,s,o,r,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(s,o,r),r("title.text")&&(r("title.position"),M.coerceFont(r,"title.font",o.font)),r("aspectratio"),r("baseratio")}else s.visible=!1}},10421:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t(6452),categories:["pie-like","funnelarea","showLegend"],attributes:t(86807),layoutAttributes:t(80097),supplyDefaults:t(86282),supplyLayoutDefaults:t(57402),calc:t(89574).calc,crossTraceCalc:t(89574).crossTraceCalc,plot:t(79187),style:t(71858),styleOne:t(63463),meta:{}}},80097:function($,I,t){"use strict";var M=t(92774).hiddenlabels;$.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function($,I,t){"use strict";var M=t(71828),k=t(80097);$.exports=function(l,T){function x(p,s){return M.coerce(l,T,k,p,s)}x("hiddenlabels"),x("funnelareacolorway",T.colorway),x("extendfunnelareacolors")}},79187:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(71828),T=l.strScale,x=l.strTranslate,p=t(63893),s=t(17295).toMoveInsideBar,e=t(72597),o=e.recordMinTextSize,r=e.clearMinTextSize,n=t(53581),a=t(14575),i=a.attachFxHandlers,c=a.determineInsideTextFont,h=a.layoutAreas,f=a.prerenderTitles,b=a.positionTitleOutside,v=a.formatSliceLabel;function g(y,d){return"l"+(d[0]-y[0])+","+(d[1]-y[1])}$.exports=function(y,d){var m=y._context.staticPlot,w=y._fullLayout;r("funnelarea",w),f(d,y),h(d,w._size),l.makeTraceGroups(w._funnelarealayer,d,"trace").each(function(u){var S=M.select(this),_=u[0],E=_.trace;(function(L){if(L.length){var C=L[0],P=C.trace,z=P.aspectratio,j=P.baseratio;j>.999&&(j=.999);var R,V,D,B=Math.pow(j,2),N=C.vTotal,U=N,J=N*B/(1-B)/N,Y=[];for(Y.push(xe()),V=L.length-1;V>-1;V--)(D=L[V]).hidden||(J+=D.v/U,Y.push(xe()));var H=1/0,X=-1/0;for(V=0;V<Y.length;V++)R=Y[V],H=Math.min(H,R[1]),X=Math.max(X,R[1]);for(V=0;V<Y.length;V++)Y[V][1]-=(X+H)/2;var ne=C.r,re=(X-H)/2,ae=ne/Y[Y.length-1][0],se=ne/re*z;for(C.r=se*re,V=0;V<Y.length;V++)Y[V][0]*=ae,Y[V][1]*=se;var pe,ke,me=[-(R=Y[0])[0],R[1]],le=[R[0],R[1]],ue=0;for(V=L.length-1;V>-1;V--)if(!(D=L[V]).hidden){var Ee=Y[ue+=1][0],de=Y[ue][1];D.TL=[-Ee,de],D.TR=[Ee,de],D.BL=me,D.BR=le,D.pxmid=[.5*((pe=D.TR)[0]+(ke=D.BR)[0]),.5*(pe[1]+ke[1])],me=D.TL,le=D.TR}}function xe(){var Te,we={x:Te=Math.sqrt(J),y:-Te};return[we.x,we.y]}})(u),S.each(function(){var L=M.select(this).selectAll("g.slice").data(u);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(P,z){if(P.hidden)M.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var j=_.cx,R=_.cy,V=M.select(this),D=V.selectAll("path.surface").data([P]);D.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),V.call(i,y,u);var B="M"+(j+P.TR[0])+","+(R+P.TR[1])+g(P.TR,P.BR)+g(P.BR,P.BL)+g(P.BL,P.TL)+"Z";D.attr("d",B),v(y,P,_);var N=n.castOption(E.textposition,P.pts),U=V.selectAll("g.slicetext").data(P.text&&"none"!==N?[0]:[]);U.enter().append("g").classed("slicetext",!0),U.exit().remove(),U.each(function(){var J=l.ensureSingle(M.select(this),"text","",function(ae){ae.attr("data-notex",1)}),Y=l.ensureUniformFontSize(y,c(E,P,w.font));J.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,Y).call(p.convertToTspans,y);var q,H,X,Q=k.bBox(J.node()),ne=Math.min(P.BL[1],P.BR[1])+R,re=Math.max(P.TL[1],P.TR[1])+R;H=Math.max(P.TL[0],P.BL[0])+j,X=Math.min(P.TR[0],P.BR[0])+j,(q=s(H,X,ne,re,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=Y.size,o(E.type,q,w),u[z].transform=q,l.setTransormAndDisplay(J,q)})}});var C=M.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var P=l.ensureSingle(M.select(this),"text","",function(R){R.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=l.templateString(z,E._meta)),P.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(p.convertToTspans,y);var j=b(_,w._size);P.attr("transform",x(j.x,j.y)+T(Math.min(1,j.scale))+x(j.tx,j.ty))})})})}},71858:function($,I,t){"use strict";var M=t(39898),k=t(63463),l=t(72597).resizeText;$.exports=function(T){var x=T._fullLayout._funnelarealayer.selectAll(".trace");l(T,x,"funnelarea"),x.each(function(p){var s=p[0].trace,e=M.select(this);e.style({opacity:s.opacity}),e.selectAll("path.surface").each(function(o){M.select(this).call(k,o,s)})})}},21606:function($,I,t){"use strict";var M=t(82196),k=t(9012),l=t(41940),T=t(12663).axisHoverFormat,x=t(5386).f,p=t(5386).s,s=t(50693),e=t(1426).extendFlat;$.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},M.x,{impliedEdits:{xtype:"array"}}),x0:e({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},M.y,{impliedEdits:{ytype:"array"}}),y0:e({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:x(),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:e({},k.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},90757:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(89298),T=t(42973),x=t(17562),p=t(78803),s=t(68296),e=t(4742),o=t(824),r=t(43907),n=t(70769),a=t(50606).BADNUM;function i(c){for(var h=[],f=c.length,b=0;b<f;b++){var v=c[b];v!==a&&h.push(v)}return h}$.exports=function(c,h){var f,b,v,g,y,d,m,w,u,S,_,E=l.getFromId(c,h.xaxis||"x"),L=l.getFromId(c,h.yaxis||"y"),C=M.traceIs(h,"contour"),P=M.traceIs(h,"histogram"),z=M.traceIs(h,"gl2d"),j=C?"best":h.zsmooth;if(E._minDtick=0,L._minDtick=0,P)g=(_=x(c,h)).orig_x,f=_.x,b=_.x0,v=_.dx,w=_.orig_y,y=_.y,d=_.y0,m=_.dy,u=_.z;else{var R=h.z;k.isArray1D(R)?(s(h,E,L,"x","y",["z"]),f=h._x,y=h._y,R=h._z):(g=h.x?E.makeCalcdata(h,"x"):[],w=h.y?L.makeCalcdata(h,"y"):[],f=T(h,E,"x",g).vals,y=T(h,L,"y",w).vals,h._x=f,h._y=y),b=h.x0,v=h.dx,d=h.y0,m=h.dy,u=e(R,h,E,L)}function V(re){j=h._input.zsmooth=h.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+re)}if((E.rangebreaks||L.rangebreaks)&&(u=function(re,ae,se){for(var pe=[],ke=-1,me=0;me<se.length;me++)if(ae[me]!==a){pe[++ke]=[];for(var le=0;le<se[me].length;le++)re[le]!==a&&pe[ke].push(se[me][le])}return pe}(f,y,u),P||(f=i(f),y=i(y),h._x=f,h._y=y)),P||!C&&!h.connectgaps||(h._emptypoints=r(u),o(u,h._emptypoints)),"fast"===j)if("log"===E.type||"log"===L.type)V("log axis found");else if(!P){if(f.length){var D=(f[f.length-1]-f[0])/(f.length-1),B=Math.abs(D/100);for(S=0;S<f.length-1;S++)if(Math.abs(f[S+1]-f[S]-D)>B){V("x scale is not linear");break}}if(y.length&&"fast"===j){var N=(y[y.length-1]-y[0])/(y.length-1),U=Math.abs(N/100);for(S=0;S<y.length-1;S++)if(Math.abs(y[S+1]-y[S]-N)>U){V("y scale is not linear");break}}}var J=k.maxRowLength(u),Y="scaled"===h.xtype?"":f,q=n(h,Y,b,v,J,E),H="scaled"===h.ytype?"":y,X=n(h,H,d,m,u.length,L);z||(h._extremes[E._id]=l.findExtremes(E,q),h._extremes[L._id]=l.findExtremes(L,X));var Q={x:q,y:X,z:u,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&g&&(Q.orig_x=g),h.yperiodalignment&&w&&(Q.orig_y=w),Y&&Y.length===q.length-1&&(Q.xCenter=Y),H&&H.length===X.length-1&&(Q.yCenter=H),P&&(Q.xRanges=_.xRanges,Q.yRanges=_.yRanges,Q.pts=_.pts),C||p(c,h,{vals:u,cLetter:"z"}),C&&h.contours&&"heatmap"===h.contours.coloring){var ne={type:"contour"===h.type?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};Q.xfill=n(ne,Y,b,v,J,E),Q.yfill=n(ne,H,d,m,u.length,L)}return[Q]}},4742:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(50606).BADNUM;$.exports=function(T,x,p,s){var e,o,r,n,a,i;function c(y){if(M(y))return+y}if(x&&x.transpose){for(e=0,a=0;a<T.length;a++)e=Math.max(e,T[a].length);if(0===e)return!1;r=function(y){return y.length},n=function(y,d,m){return(y[m]||[])[d]}}else e=T.length,r=function(y,d){return y[d].length},n=function(y,d,m){return(y[d]||[])[m]};function f(y){if(x&&"carpet"!==x.type&&"contourcarpet"!==x.type&&y&&"category"===y.type&&x["_"+y._id.charAt(0)].length){var d=y._id.charAt(0),m={},w=x["_"+d+"CategoryMap"]||x[d];for(a=0;a<w.length;a++)m[w[a]]=a;return function(u){var S=m[y._categories[u]];return S+1?S:l}}return k.identity}var b=f(p),v=f(s);s&&"category"===s.type&&(e=s._categories.length);var y,d,m,g=new Array(e);for(a=0;a<e;a++)for(o=p&&"category"===p.type?p._categories.length:r(T,a),g[a]=new Array(o),i=0;i<o;i++)g[a][i]=c((y=T,d=v(a),m=b(i),d===l||m===l?l:n(y,d,m)));return g}},61243:function($){"use strict";$.exports={min:"zmin",max:"zmax"}},68296:function($,I,t){"use strict";var M=t(71828),k=t(50606).BADNUM,l=t(42973);$.exports=function(T,x,p,s,e,o){var r=T._length,n=x.makeCalcdata(T,s),a=p.makeCalcdata(T,e);n=l(T,x,s,n).vals,a=l(T,p,e,a).vals;var i,c,h,f,b=T.text,v=void 0!==b&&M.isArray1D(b),g=T.hovertext,y=void 0!==g&&M.isArray1D(g),d=M.distinctVals(n),m=d.vals,w=M.distinctVals(a),u=w.vals,S=[],_=u.length,E=m.length;for(i=0;i<o.length;i++)S[i]=M.init2dArray(_,E);v&&(h=M.init2dArray(_,E)),y&&(f=M.init2dArray(_,E));var L=M.init2dArray(_,E);for(i=0;i<r;i++)if(n[i]!==k&&a[i]!==k){var C=M.findBin(n[i]+d.minDiff/2,m),P=M.findBin(a[i]+w.minDiff/2,u);for(c=0;c<o.length;c++)S[c][P][C]=T[o[c]][i],L[P][C]=i;v&&(h[P][C]=b[i]),y&&(f[P][C]=g[i])}for(T["_"+s]=m,T["_"+e]=u,c=0;c<o.length;c++)T["_"+o[c]]=S[c];v&&(T._text=h),y&&(T._hovertext=f),x&&"category"===x.type&&(T["_"+s+"CategoryMap"]=m.map(function(j){return x._categories[j]})),p&&"category"===p.type&&(T["_"+e+"CategoryMap"]=u.map(function(j){return p._categories[j]})),T._after2before=L}},76382:function($,I,t){"use strict";var M=t(71828),k=t(67684),l=t(58623),T=t(73927),x=t(49901),p=t(1586),s=t(21606);$.exports=function(e,o,r,n){function a(i,c){return M.coerce(e,o,s,i,c)}k(e,o,a,n)?(T(e,o,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),l(a,n),x(e,o,a,n),a("hoverongaps"),a("connectgaps",M.isArray1D(o.z)&&!1!==o.zsmooth),p(e,o,n,a,{prefix:"",cLetter:"z"})):o.visible=!1}},43907:function($,I,t){"use strict";var M=t(71828).maxRowLength;$.exports=function(k){var l,T,x,p,s,e,o,r,n=[],a={},i=[],c=k[0],h=[],f=[0,0,0],b=M(k);for(T=0;T<k.length;T++)for(l=h,h=c,c=k[T+1]||[],x=0;x<b;x++)void 0===h[x]&&((e=(void 0!==h[x-1]?1:0)+(void 0!==h[x+1]?1:0)+(void 0!==l[x]?1:0)+(void 0!==c[x]?1:0))?(0===T&&e++,0===x&&e++,T===k.length-1&&e++,x===h.length-1&&e++,e<4&&(a[[T,x]]=[T,x,e]),n.push([T,x,e])):i.push([T,x]));for(;i.length;){for(o={},r=!1,s=i.length-1;s>=0;s--)(e=((a[[(T=(p=i[s])[0])-1,x=p[1]]]||f)[2]+(a[[T+1,x]]||f)[2]+(a[[T,x-1]]||f)[2]+(a[[T,x+1]]||f)[2])/20)&&(o[p]=[T,x,e],i.splice(s,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(p in o)a[p]=o[p],n.push(o[p])}return n.sort(function(v,g){return g[2]-v[2]})}},46248:function($,I,t){"use strict";var M=t(30211),k=t(71828),l=t(89298),T=t(21081).extractOpts;$.exports=function(x,p,s,e,o){o||(o={});var r,n,a,i,c=o.isContour,h=x.cd[0],f=h.trace,b=x.xa,v=x.ya,g=h.x,y=h.y,d=h.z,m=h.xCenter,w=h.yCenter,u=h.zmask,S=f.zhoverformat,_=g,E=y;if(!1!==x.index){try{a=Math.round(x.index[1]),i=Math.round(x.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",x.index)}if(a<0||a>=d[0].length||i<0||i>d.length)return}else{if(M.inbox(p-g[0],p-g[g.length-1],0)>0||M.inbox(s-y[0],s-y[y.length-1],0)>0)return;if(c){var L;for(_=[2*g[0]-g[1]],L=1;L<g.length;L++)_.push((g[L]+g[L-1])/2);for(_.push([2*g[g.length-1]-g[g.length-2]]),E=[2*y[0]-y[1]],L=1;L<y.length;L++)E.push((y[L]+y[L-1])/2);E.push([2*y[y.length-1]-y[y.length-2]])}a=Math.max(0,Math.min(_.length-2,k.findBin(p,_))),i=Math.max(0,Math.min(E.length-2,k.findBin(s,E)))}var C,P,z=b.c2p(g[a]),j=b.c2p(g[a+1]),R=v.c2p(y[i]),V=v.c2p(y[i+1]);c?(j=z,r=(C=h.orig_x||g)[a],V=R,n=(P=h.orig_y||y)[i]):(C=h.orig_x||m||g,P=h.orig_y||w||y,r=m?C[a]:(C[a]+C[a+1])/2,n=w?P[i]:(P[i]+P[i+1])/2,b&&"category"===b.type&&(r=g[a]),v&&"category"===v.type&&(n=y[i]),f.zsmooth&&(z=j=b.c2p(r),R=V=v.c2p(n)));var D=d[i][a];if(u&&!u[i][a]&&(D=void 0),void 0!==D||f.hoverongaps){var B;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[i])?B=h.hovertext[i][a]:Array.isArray(h.text)&&Array.isArray(h.text[i])&&(B=h.text[i][a]);var N=T(f),J=l.tickText({type:"linear",range:[N.min,N.max],hoverformat:S,_separators:b._separators,_numFormat:b._numFormat},D,"hover").text;return[k.extendFlat(x,{index:f._after2before?f._after2before[i][a]:[i,a],distance:x.maxHoverDistance,spikeDistance:x.maxSpikeDistance,x0:z,x1:j,y0:R,y1:V,xLabelVal:r,yLabelVal:n,zLabelVal:D,zLabel:J,text:B})]}}},92165:function($,I,t){"use strict";$.exports={attributes:t(21606),supplyDefaults:t(76382),calc:t(90757),plot:t(50347),colorbar:t(61243),style:t(70035),hoverPoints:t(46248),moduleType:"trace",name:"heatmap",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function($,I,t){"use strict";var M=t(71828),k=[[-1,0],[1,0],[0,-1],[0,1]];function l(x){return.5-.25*Math.min(1,.5*x)}function T(x,p,s){var e,o,r,n,a,i,c,h,f,b,v,g,y,d=0;for(n=0;n<p.length;n++){for(v=x[o=(e=p[n])[0]][r=e[1]],b=0,f=0,a=0;a<4;a++)(c=x[o+(i=k[a])[0]])&&void 0!==(h=c[r+i[1]])&&(0===b?g=y=h:(g=Math.min(g,h),y=Math.max(y,h)),f++,b+=h);if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";x[o][r]=b/f,void 0===v?f<4&&(d=1):(x[o][r]=(1+s)*x[o][r]-s*v,y>g&&(d=Math.max(d,Math.abs(x[o][r]-v)/(y-g))))}return d}$.exports=function(x,p){var s,e=1;for(T(x,p),s=0;s<p.length&&!(p[s][2]<4);s++);for(p=p.slice(s),s=0;s<100&&e>.01;s++)e=T(x,p,l(e));return e>.01&&M.log("interp2d didn't converge quickly",e),x}},58623:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){k("texttemplate");var T=M.extendFlat({},l.font,{color:"auto",size:"auto"});M.coerceFont(k,"textfont",T)}},70769:function($,I,t){"use strict";var M=t(73972),k=t(71828).isArrayOrTypedArray;$.exports=function(l,T,x,p,s,e){var o,r,n,a=[],i=M.traceIs(l,"contour"),c=M.traceIs(l,"histogram"),h=M.traceIs(l,"gl2d");if(k(T)&&T.length>1&&!c&&"category"!==e.type){var f=T.length;if(!(f<=s))return T.slice(0,i?s:s+1);if(i||h)a=T.slice(0,s);else if(1===s)a=[T[0]-.5,T[0]+.5];else{for(a=[1.5*T[0]-.5*T[1]],n=1;n<f;n++)a.push(.5*(T[n-1]+T[n]));a.push(1.5*T[f-1]-.5*T[f-2])}if(f<s){var b=a[a.length-1],v=b-a[a.length-2];for(n=f;n<s;n++)a.push(b+=v)}}else{var g=l[e._id.charAt(0)+"calendar"];for(o=c?e.r2c(x,0,g):k(T)&&1===T.length?T[0]:void 0===x?0:("log"===e.type?e.d2c:e.r2c)(x,0,g),r=p||1,n=i||h?0:-.5;n<s;n++)a.push(o+r*n)}return a}},50347:function($,I,t){"use strict";var M=t(39898),k=t(84267),l=t(73972),T=t(91424),x=t(89298),p=t(71828),s=t(63893),e=t(8225),o=t(7901),r=t(21081).extractOpts,n=t(21081).makeColorScaleFuncFromTrace,a=t(77922),i=t(18783).LINE_SPACING,c="heatmap-label";function h(y){return y.selectAll("g."+c)}function f(y){h(y).remove()}function b(y,d){var m=d.length-2,w=p.constrain(p.findBin(y,d),0,m),u=d[w],_=p.constrain(w+(y-u)/(d[w+1]-u)-.5,0,m),E=Math.round(_),L=Math.abs(_-E);return _&&_!==m&&L?{bin0:E,frac:L,bin1:Math.round(E+L/(_-E))}:{bin0:E,bin1:E,frac:0}}function v(y,d){var m=d.length-1,w=p.constrain(p.findBin(y,d),0,m),u=d[w],S=(y-u)/(d[w+1]-u)||0;return S<=0?{bin0:w,bin1:w,frac:0}:S<.5?{bin0:w,bin1:w+1,frac:S}:{bin0:w+1,bin1:w,frac:1-S}}function g(y,d,m){y[d]=m[0],y[d+1]=m[1],y[d+2]=m[2],y[d+3]=Math.round(255*m[3])}$.exports=function(y,d,m,w){var u=d.xaxis,S=d.yaxis;p.makeTraceGroups(w,m,"hm").each(function(_){var E,L,C,P,z,j,R,V,D=M.select(this),B=_[0],N=B.trace,U=N.xgap||0,J=N.ygap||0,Y=B.z,q=B.x,H=B.y,X=B.xCenter,Q=B.yCenter,ne=l.traceIs(N,"contour"),re=ne?"best":N.zsmooth,ae=Y.length,se=p.maxRowLength(Y),pe=!1,ke=!1;for(j=0;void 0===E&&j<q.length-1;)E=u.c2p(q[j]),j++;for(j=q.length-1;void 0===L&&j>0;)L=u.c2p(q[j]),j--;for(L<E&&(C=L,L=E,E=C,pe=!0),j=0;void 0===P&&j<H.length-1;)P=S.c2p(H[j]),j++;for(j=H.length-1;void 0===z&&j>0;)z=S.c2p(H[j]),j--;if(z<P&&(C=P,P=z,z=C,ke=!0),ne&&(X=q,Q=H,q=B.xfill,H=B.yfill),"fast"!==re){var me="best"===re?0:.5;E=Math.max(-me*u._length,E),L=Math.min((1+me)*u._length,L),P=Math.max(-me*S._length,P),z=Math.min((1+me)*S._length,z)}var le,ue,Ee=Math.round(L-E),de=Math.round(z-P);if(Ee<=0||de<=0)return D.selectAll("image").data([]).exit().remove(),void f(D);"fast"===re?(le=se,ue=ae):(le=Ee,ue=de);var xe=document.createElement("canvas");xe.width=le,xe.height=ue;var Te,we,K=xe.getContext("2d"),oe=n(N,{noNumericCheck:!0,returnArray:!0});"fast"===re?(Te=pe?function($n){return se-1-$n}:p.identity,we=ke?function($n){return ae-1-$n}:p.identity):(Te=function($n){return p.constrain(Math.round(u.c2p(q[$n])-E),0,Ee)},we=function($n){return p.constrain(Math.round(S.c2p(H[$n])-P),0,de)});var he,ye,Me,Re,Pe=we(0),De=[Pe,Pe],fe=pe?0:1,ge=ke?0:1,be=0,Ie=0,He=0,Ve=0;function tt($n,lr){if(void 0!==$n){var hr=oe($n);return hr[0]=Math.round(hr[0]),hr[1]=Math.round(hr[1]),hr[2]=Math.round(hr[2]),be+=lr,Ie+=hr[0]*lr,He+=hr[1]*lr,Ve+=hr[2]*lr,hr}return[0,0,0,0]}function nt($n,lr,hr,Gt){var pn=$n[hr.bin0];if(void 0===pn)return tt(void 0,1);var Tn=$n[hr.bin1],Rn=lr[hr.bin0],qn=lr[hr.bin1];return tt(pn+hr.frac*(Tn-pn||0)+Gt.frac*((Rn-pn||0)+hr.frac*(void 0===Tn?void 0===qn?0:void 0===Rn?2*(qn-pn):2*(2*qn-Rn-pn)/3:void 0===qn?void 0===Rn?0:2*(2*pn-Tn-Rn)/3:void 0===Rn?2*(2*qn-Tn-pn)/3:qn+pn-Tn-Rn)))}if(re){var st,dt=0;try{st=new Uint8Array(Ee*de*4)}catch{st=new Array(Ee*de*4)}if("best"===re){var wt,_t,pt,Pt=X||q,St=Q||H,Ot=new Array(Pt.length),jt=new Array(St.length),Dt=new Array(Ee),Ye=X?v:b,Ze=Q?v:b;for(j=0;j<Pt.length;j++)Ot[j]=Math.round(u.c2p(Pt[j])-E);for(j=0;j<St.length;j++)jt[j]=Math.round(S.c2p(St[j])-P);for(j=0;j<Ee;j++)Dt[j]=Ye(j,Ot);for(R=0;R<de;R++)for(_t=Y[(wt=Ze(R,jt)).bin0],pt=Y[wt.bin1],j=0;j<Ee;j++,dt+=4)g(st,dt,Re=nt(_t,pt,Dt[j],wt))}else for(R=0;R<ae;R++)for(Me=Y[R],De=we(R),j=0;j<Ee;j++)Re=tt(Me[j],1),g(st,dt=4*(De*Ee+Te(j)),Re);var Ne=K.createImageData(Ee,de);try{Ne.data.set(st)}catch{var Je=Ne.data,at=Je.length;for(R=0;R<at;R++)Je[R]=st[R]}K.putImageData(Ne,0,0)}else{var Se=Math.floor(U/2),ze=Math.floor(J/2);for(R=0;R<ae;R++)if(Me=Y[R],De.reverse(),De[ge]=we(R+1),De[0]!==De[1]&&void 0!==De[0]&&void 0!==De[1])for(he=[ye=Te(0),ye],j=0;j<se;j++)he.reverse(),he[fe]=Te(j+1),he[0]!==he[1]&&void 0!==he[0]&&void 0!==he[1]&&(Re=tt(Me[j],(he[1]-he[0])*(De[1]-De[0])),K.fillStyle="rgba("+Re.join(",")+")",K.fillRect(he[0]+Se,De[0]+ze,he[1]-he[0]-U,De[1]-De[0]-J))}Ie=Math.round(Ie/be),He=Math.round(He/be),Ve=Math.round(Ve/be);var Ke=k("rgb("+Ie+","+He+","+Ve+")");y._hmpixcount=(y._hmpixcount||0)+be,y._hmlumcount=(y._hmlumcount||0)+be*Ke.getLuminance();var it=D.selectAll("image").data(_);it.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),it.attr({height:de,width:Ee,x:E,y:P,"xlink:href":xe.toDataURL("image/png")}),f(D);var ct=N.texttemplate;if(ct){var mt=r(N),Lt={type:"linear",range:[mt.min,mt.max],_separators:u._separators,_numFormat:u._numFormat},At="histogram2dcontour"===N.type,ht="contour"===N.type,Et=ht?ae-1:ae,gt=ht?1:0,kt=ht?se-1:se,It=[];for(j=ht?1:0;j<Et;j++){var Ut;if(ht)Ut=B.y[j];else if(At){if(0===j||j===ae-1)continue;Ut=B.y[j]}else if(B.yCenter)Ut=B.yCenter[j];else{if(j+1===ae&&void 0===B.y[j+1])continue;Ut=(B.y[j]+B.y[j+1])/2}var Nt=Math.round(S.c2p(Ut));if(!(0>Nt||Nt>S._length))for(R=gt;R<kt;R++){var qt;if(ht)qt=B.x[R];else if(At){if(0===R||R===se-1)continue;qt=B.x[R]}else if(B.xCenter)qt=B.xCenter[R];else{if(R+1===se&&void 0===B.x[R+1])continue;qt=(B.x[R]+B.x[R+1])/2}var Xt=Math.round(u.c2p(qt));if(!(0>Xt||Xt>u._length)){var Kt=e({x:qt,y:Ut},N,y._fullLayout);Kt.x=qt,Kt.y=Ut;var fn=B.z[j][R];void 0===fn?(Kt.z="",Kt.zLabel=""):(Kt.z=fn,Kt.zLabel=x.tickText(Lt,fn,"hover").text);var nn=B.text&&B.text[j]&&B.text[j][R];void 0!==nn&&!1!==nn||(nn=""),Kt.text=nn;var xn=p.texttemplateString(ct,Kt,y._fullLayout._d3locale,Kt,N._meta||{});if(xn){var jn=xn.split("<br>"),mn=jn.length,en=0;for(V=0;V<mn;V++)en=Math.max(en,jn[V].length);It.push({l:mn,c:en,t:xn,x:Xt,y:Nt,z:fn})}}}}var vn=N.textfont,on=vn.family,sn=vn.size,En=y._fullLayout.font.size;if(!sn||"auto"===sn){var kn=1/0,zn=1/0,Fn=0,Bn=0;for(V=0;V<It.length;V++){var er=It[V];if(Fn=Math.max(Fn,er.l),Bn=Math.max(Bn,er.c),V<It.length-1){var Xn=It[V+1],mr=Math.abs(Xn.x-er.x),ur=Math.abs(Xn.y-er.y);mr&&(kn=Math.min(kn,mr)),ur&&(zn=Math.min(zn,ur))}}isFinite(kn)&&isFinite(zn)?(kn-=U,zn-=J,kn/=Bn,zn/=Fn,kn/=i/2,zn/=i,sn=Math.min(Math.floor(kn),Math.floor(zn),En)):sn=En}if(sn<=0||!isFinite(sn))return;h(D).data(It).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function($n){var Gt,lr=M.select(this),hr=vn.color;hr&&"auto"!==hr||(hr=o.contrast("rgba("+oe($n.z).join()+")")),lr.attr("data-notex",1).call(s.positionText,(Gt=$n,Gt.x),function(Gt){return Gt.y-sn*(Gt.l*i/2-1)}($n)).call(T.font,on,sn,hr).text($n.t).call(s.convertToTspans,y)})}})}},70035:function($,I,t){"use strict";var M=t(39898);$.exports=function(k){M.select(k).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function($){"use strict";$.exports=function(I,t,M){!1===M("zsmooth")&&(M("xgap"),M("ygap")),M("zhoverformat")}},67684:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(73972);function T(x,p){var s=p(x);return"scaled"===(s?p(x+"type","array"):"scaled")&&(p(x+"0"),p("d"+x)),s}$.exports=function(x,p,s,e,o,r){var n,a,i=s("z");if(o=o||"x",r=r||"y",void 0===i||!i.length)return 0;if(k.isArray1D(x.z)){n=s(o),a=s(r);var c=k.minRowLength(n),h=k.minRowLength(a);if(0===c||0===h)return 0;p._length=Math.min(c,h,i.length)}else{if(n=T(o,s),a=T(r,s),!function(f){for(var b,v=!0,g=!1,y=!1,d=0;d<f.length;d++){if(!k.isArrayOrTypedArray(b=f[d])){v=!1;break}b.length>0&&(g=!0);for(var m=0;m<b.length;m++)if(M(b[m])){y=!0;break}}return v&&g&&y}(i))return 0;s("transpose"),p._length=null}return"heatmapgl"===x.type||l.getComponentMethod("calendars","handleTraceDefaults")(x,p,[o,r],e),!0}},16063:function($,I,t){"use strict";for(var M=t(21606),k=t(50693),l=t(1426).extendFlat,T=t(30962).overrideAll,x=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],p={},s=0;s<x.length;s++){var e=x[s];p[e]=M[e]}p.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(p,k("",{cLetter:"z",autoColorDflt:!1})),$.exports=T(p,"calc","nested")},59560:function($,I,t){"use strict";var M=t(9330).gl_heatmap2d,k=t(89298),l=t(78614);function T(p,s){this.scene=p,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(p.glplot,this.options),this.heatmap._trace=this}var x=T.prototype;x.handlePick=function(p){var s=this.options,e=s.shape,o=p.pointId,r=o%e[0],n=Math.floor(o/e[0]);return{trace:this,dataCoord:p.dataCoord,traceCoord:[s.x[r],s.y[n],s.z[o]],textLabel:this.textLabels[o],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},x.update=function(p,s){var e=s[0];this.index=p.index,this.name=p.name,this.hoverinfo=p.hoverinfo;var o=e.z;this.options.z=[].concat.apply([],o),this.options.shape=[o[0].length,o.length],this.options.x=e.x,this.options.y=e.y,this.options.zsmooth=p.zsmooth;var a=function(b){for(var v=b.colorscale,g=b.zmin,y=b.zmax,d=v.length,m=new Array(d),w=new Array(4*d),u=0;u<d;u++){var S=v[u],_=l(S[1]);m[u]=g+S[0]*(y-g);for(var E=0;E<4;E++)w[4*u+E]=_[E]}return{colorLevels:m,colorValues:w}}(p);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],p.text),this.heatmap.update(this.options);var i,c,h=this.scene.xaxis,f=this.scene.yaxis;!1===p.zsmooth&&(i={ppad:e.x[1]-e.x[0]},c={ppad:e.y[1]-e.y[0]}),p._extremes[h._id]=k.findExtremes(h,e.x,i),p._extremes[f._id]=k.findExtremes(f,e.y,c)},x.dispose=function(){this.heatmap.dispose()},$.exports=function(p,s,e){var o=new T(p,s.uid);return o.update(s,e),o}},19600:function($,I,t){"use strict";var M=t(71828),k=t(67684),l=t(1586),T=t(16063);$.exports=function(x,p,s,e){function o(r,n){return M.coerce(x,p,T,r,n)}k(x,p,o,e)?(o("text"),o("zsmooth"),l(x,p,e,o,{prefix:"",cLetter:"z"})):p.visible=!1}},3325:function($,I,t){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),$.exports={attributes:t(16063),supplyDefaults:t(19600),colorbar:t(61243),calc:t(90757),plot:t(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:t(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function($,I,t){"use strict";var M=t(1486),k=t(12663).axisHoverFormat,l=t(5386).f,T=t(5386).s,x=t(41940),p=t(17656),s=t(72406),e=t(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:e({},M.text,{}),hovertext:e({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:p("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:p("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:e({},M.textposition,{arrayOk:!1}),textfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:x({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir}}},42174:function($){"use strict";$.exports=function(I,t){for(var M=I.length,k=0,l=0;l<M;l++)t[l]?(I[l]/=t[l],k+=I[l]):I[l]=null;return k}},17656:function($){"use strict";$.exports=function(I,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function($,I,t){"use strict";var M=t(92770);$.exports={count:function(k,l,T){return T[k]++,1},sum:function(k,l,T,x){var p=x[l];return M(p)?(p=Number(p),T[k]+=p,p):0},avg:function(k,l,T,x,p){var s=x[l];return M(s)&&(s=Number(s),T[k]+=s,p[k]++),0},min:function(k,l,T,x){var p=x[l];if(M(p)){if(p=Number(p),!M(T[k]))return T[k]=p,p;if(T[k]>p){var s=p-T[k];return T[k]=p,s}}return 0},max:function(k,l,T,x){var p=x[l];if(M(p)){if(p=Number(p),!M(T[k]))return T[k]=p,p;if(T[k]<p){var s=p-T[k];return T[k]=p,s}}return 0}}},40965:function($,I,t){"use strict";var M=t(50606),k=M.ONEAVGYEAR,l=M.ONEAVGMONTH,T=M.ONEDAY,x=M.ONEHOUR,p=M.ONEMIN,s=M.ONESEC,e=t(89298).tickIncrement;function o(i,c,h,f){if(i*c<=0)return 1/0;for(var b=Math.abs(c-i),v="date"===h.type,g=r(b,v),y=0;y<10;y++){var d=r(80*g,v);if(g===d||!n(d,i,c,v,h,f))break;g=d}return g}function r(i,c){return c&&i>s?i>T?i>1.1*k?k:i>1.1*l?l:T:i>x?x:i>p?p:s:Math.pow(10,Math.floor(Math.log(i)/Math.LN10))}function n(i,c,h,f,b,v){if(f&&i>T){var g=a(c,b,v),y=a(h,b,v),d=i===k?0:1;return g[d]!==y[d]}return Math.floor(h/i)-Math.floor(c/i)>.1}function a(i,c,h){var f=c.c2d(i,k,h).split("-");return""===f[0]&&(f.unshift(),f[0]="-"+f[0]),f}$.exports=function(i,c,h,f,b){var v,g,y=-1.1*c,d=-.1*c,m=i-d,w=h[0],u=h[1],S=Math.min(o(w+d,w+m,f,b),o(u+d,u+m,f,b)),_=Math.min(o(w+y,w+d,f,b),o(u+y,u+d,f,b));if(S>_&&_<Math.abs(u-w)/4e3?(v=S,g=!1):(v=Math.min(S,_),g=!0),"date"===f.type&&v>T){var E=v===k?1:6,L=v===k?"M12":"M1";return function(C,P){var z=f.c2d(C,k,b),j=z.indexOf("-",E);j>0&&(z=z.substr(0,j));var R=f.d2c(z,0,b);if(R<C){var V=e(R,L,!1,b);(R+V)/2<C+i&&(R=V)}return P&&g?e(R,L,!0,b):R}}return function(C,P){var z=v*Math.round(C/v);return z+v/10<C&&z+.9*v<C+i&&(z+=v),P&&g&&(z-=v),z}}},72138:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(73972),T=t(89298),x=t(75341),p=t(59575),s=t(36362),e=t(42174),o=t(40965);function r(n,a,i,c,h){var f,b,v,g,y,d,m,w=c+"bins",u=n._fullLayout,_=u._histogramBinOpts[a["_"+c+"bingroup"]],E="overlay"===u.barmode,L=function(le){return i.r2c(le,0,g)},C=function(le){return i.c2r(le,0,g)},P="date"===i.type?function(le){return le||0===le?k.cleanDate(le,null,g):null}:function(le){return M(le)?Number(le):null};function z(le,ue,Ee){ue[le+"Found"]?(ue[le]=P(ue[le]),null===ue[le]&&(ue[le]=Ee[le])):(d[le]=ue[le]=Ee[le],k.nestedProperty(b[0],w+"."+le).set(Ee[le]))}if(a["_"+c+"autoBinFinished"])delete a["_"+c+"autoBinFinished"];else{b=_.traces;var j=[],R=!0,V=!1,D=!1;for(f=0;f<b.length;f++)if((v=b[f]).visible){var B=_.dirs[f];y=v["_"+B+"pos0"]=i.makeCalcdata(v,B),j=k.concat(j,y),delete v["_"+c+"autoBinFinished"],!0===a.visible&&(R?R=!1:(delete v._autoBin,v["_"+c+"autoBinFinished"]=1),l.traceIs(v,"2dMap")&&(V=!0),"histogram2dcontour"===v.type&&(D=!0))}var N=T.autoBin(j,i,_.nbins,V,g=b[0][c+"calendar"],_.sizeFound&&_.size),U=b[0]._autoBin={};if(d=U[_.dirs[0]]={},D&&(_.size||(N.start=C(T.tickIncrement(L(N.start),N.size,!0,g))),void 0===_.end&&(N.end=C(T.tickIncrement(L(N.end),N.size,!1,g)))),E&&!l.traceIs(a,"2dMap")&&0===N._dataSpan&&"category"!==i.type&&"multicategory"!==i.type){if(h)return[N,y,!0];N=function(le,ue,Ee,de,xe){var Te,we,K,oe=le._fullLayout,he=function(tt,nt){for(var st=nt.xaxis,dt=nt.yaxis,wt=nt.orientation,_t=[],pt=tt._fullData,Pt=0;Pt<pt.length;Pt++){var St=pt[Pt];"histogram"===St.type&&!0===St.visible&&St.orientation===wt&&St.xaxis===st&&St.yaxis===dt&&_t.push(St)}return _t}(le,ue),ye=!1,Me=1/0,Re=[ue];for(Te=0;Te<he.length;Te++)if((we=he[Te])===ue)ye=!0;else if(ye){var Pe=r(le,we,Ee,de,!0),De=Pe[0],fe=Pe[2];we["_"+de+"autoBinFinished"]=1,we["_"+de+"pos0"]=Pe[1],fe?Re.push(we):Me=Math.min(Me,De.size)}else K=oe._histogramBinOpts[we["_"+de+"bingroup"]],Me=Math.min(Me,K.size||we[xe].size);var ge=new Array(Re.length);for(Te=0;Te<Re.length;Te++)for(var be=Re[Te]["_"+de+"pos0"],Ie=0;Ie<be.length;Ie++)if(void 0!==be[Ie]){ge[Te]=be[Ie];break}for(isFinite(Me)||(Me=k.distinctVals(ge).minDiff),Te=0;Te<Re.length;Te++){var He=(we=Re[Te])[de+"calendar"],Ve={start:Ee.c2r(ge[Te]-Me/2,0,He),end:Ee.c2r(ge[Te]+Me/2,0,He),size:Me};we._input[xe]=we[xe]=Ve,(K=oe._histogramBinOpts[we["_"+de+"bingroup"]])&&k.extendFlat(K,Ve)}return ue[xe]}(n,a,i,c,w)}(m=v.cumulative||{}).enabled&&"include"!==m.currentbin&&("decreasing"===m.direction?N.start=C(T.tickIncrement(L(N.start),N.size,!0,g)):N.end=C(T.tickIncrement(L(N.end),N.size,!1,g))),_.size=N.size,_.sizeFound||(d.size=N.size,k.nestedProperty(b[0],w+".size").set(N.size)),z("start",_,N),z("end",_,N)}y=a["_"+c+"pos0"],delete a["_"+c+"pos0"];var J=a._input[w]||{},Y=k.extendFlat({},_),q=_.start,H=i.r2l(J.start),X=void 0!==H;if((_.startFound||X)&&H!==i.r2l(q)){var Q=X?H:k.aggNums(Math.min,null,y),ne={type:"category"===i.type||"multicategory"===i.type?"linear":i.type,r2l:i.r2l,dtick:_.size,tick0:q,calendar:g,range:[Q,T.tickIncrement(Q,_.size,!1,g)].map(i.l2r)},re=T.tickFirst(ne);re>i.r2l(Q)&&(re=T.tickIncrement(re,_.size,!0,g)),Y.start=i.l2r(re),X||k.nestedProperty(a,w+".start").set(Y.start)}var ae=_.end,se=i.r2l(J.end),pe=void 0!==se;if((_.endFound||pe)&&se!==i.r2l(ae)){var ke=pe?se:k.aggNums(Math.max,null,y);Y.end=i.l2r(ke),pe||k.nestedProperty(a,w+".start").set(Y.end)}var me="autobin"+c;return!1===a._input[me]&&(a._input[w]=k.extendFlat({},a[w]||{}),delete a._input[me],delete a[me]),[Y,y]}$.exports={calc:function(n,a){var i,c,h,f,b=[],v=[],g="h"===a.orientation,y=T.getFromId(n,g?a.yaxis:a.xaxis),d=g?"y":"x",m={x:"y",y:"x"}[d],w=a[d+"calendar"],u=a.cumulative,S=r(n,a,y,d),_=S[0],E=S[1],L="string"==typeof _.size,C=[],P=L?C:_,z=[],j=[],R=[],V=0,D=a.histnorm,B=a.histfunc,N=-1!==D.indexOf("density");u.enabled&&N&&(D=D.replace(/ ?density$/,""),N=!1);var U,J="max"===B||"min"===B?null:0,Y=p.count,q=s[D],H=!1,X=function(we){return y.r2c(we,0,w)};for(k.isArrayOrTypedArray(a[m])&&"count"!==B&&(U=a[m],H="avg"===B,Y=p[B]),i=X(_.start),h=X(_.end)+(i-T.tickIncrement(i,_.size,!1,w))/1e6;i<h&&b.length<1e6&&(c=T.tickIncrement(i,_.size,!1,w),b.push((i+c)/2),v.push(J),R.push([]),C.push(i),N&&z.push(1/(c-i)),H&&j.push(0),!(c<=i));)i=c;C.push(i),L||"date"!==y.type||(P={start:X(P.start),end:X(P.end),size:P.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var Q=a["_"+d+"bingroup"],ne={leftGap:1/0,rightGap:1/0};Q&&(n._fullLayout._roundFnOpts[Q]||(n._fullLayout._roundFnOpts[Q]=ne),ne=n._fullLayout._roundFnOpts[Q]);var re,ae=v.length,se=!0,pe=ne.leftGap,ke=ne.rightGap,me={};for(i=0;i<E.length;i++){var le=E[i];(f=k.findBin(le,P))>=0&&f<ae&&(V+=Y(f,i,v,U,j),se&&R[f].length&&le!==E[R[f][0]]&&(se=!1),R[f].push(i),me[i]=f,pe=Math.min(pe,le-C[f]),ke=Math.min(ke,C[f+1]-le))}ne.leftGap=pe,ne.rightGap=ke,se||(re=function(we,K){return function(){var oe=n._fullLayout._roundFnOpts[Q];return o(oe.leftGap,oe.rightGap,C,y,w)(we,K)}}),H&&(V=e(v,j)),q&&q(v,V,z),u.enabled&&function(we,K,oe){var he,ye,Me;function Re(De){Me=we[De],we[De]/=2}function Pe(De){we[De]=Me+(ye=we[De])/2,Me+=ye}if("half"===oe)if("increasing"===K)for(Re(0),he=1;he<we.length;he++)Pe(he);else for(Re(we.length-1),he=we.length-2;he>=0;he--)Pe(he);else if("increasing"===K){for(he=1;he<we.length;he++)we[he]+=we[he-1];"exclude"===oe&&(we.unshift(0),we.pop())}else{for(he=we.length-2;he>=0;he--)we[he]+=we[he+1];"exclude"===oe&&(we.push(0),we.shift())}}(v,u.direction,u.currentbin);var ue=Math.min(b.length,v.length),Ee=[],de=0,xe=ue-1;for(i=0;i<ue;i++)if(v[i]){de=i;break}for(i=ue-1;i>=de;i--)if(v[i]){xe=i;break}for(i=de;i<=xe;i++)if(M(b[i])&&M(v[i])){var Te={p:b[i],s:v[i],b:0};u.enabled||(Te.pts=R[i],se?Te.ph0=Te.ph1=R[i].length?E[R[i][0]]:b[i]:(a._computePh=!0,Te.ph0=re(C[i]),Te.ph1=re(C[i+1],!0))),Ee.push(Te)}return 1===Ee.length&&(Ee[0].width1=T.tickIncrement(Ee[0].p,_.size,!1,w)-Ee[0].p),x(Ee,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(Ee,a,me),Ee},calcAllAutoBins:r}},72406:function($){"use strict";$.exports={eventDataKeys:["binNumber"]}},82222:function($,I,t){"use strict";var M=t(71828),k=t(41675),l=t(73972).traceIs,T=t(26125),x=M.nestedProperty,p=t(99082).getAxisGroup,s=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],e=["x","y"];$.exports=function(o,r){var n,a,i,c,h,f,b,v=r._histogramBinOpts={},g=[],y={},d=[];function m(N,U){return M.coerce(n._input,n,n._module.attributes,N,U)}function w(N){return"v"===N.orientation?"x":"y"}function u(N,U,J){var Y=N.uid+"__"+J;U||(U=Y);var q=k.getFromTrace({_fullLayout:r},N,J).type,H=N[J+"calendar"]||"",X=v[U],Q=!0;X&&(q===X.axType&&H===X.calendar?(Q=!1,X.traces.push(N),X.dirs.push(J)):(U=Y,q!==X.axType&&M.warn(["Attempted to group the bins of trace",N.index,"set on a","type:"+q,"axis","with bins on","type:"+X.axType,"axis."].join(" ")),H!==X.calendar&&M.warn(["Attempted to group the bins of trace",N.index,"set with a",H,"calendar","with bins",X.calendar?"on a "+X.calendar+" calendar":"w/o a set calendar"].join(" ")))),Q&&(v[U]={traces:[N],dirs:[J],axType:q,calendar:N[J+"calendar"]||""}),N["_"+J+"bingroup"]=U}for(h=0;h<o.length;h++)l(n=o[h],"histogram")&&(g.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||T(n._input,n,r,m));var S=r._alignmentOpts||{};for(h=0;h<g.length;h++){if(i="",!l(n=g[h],"2dMap")){if(c=w(n),"group"===r.barmode&&n.alignmentgroup){var E=p(r,n[c+"axis"])+n.orientation;(S[E]||{})[n.alignmentgroup]&&(i=E)}i||"overlay"===r.barmode||(i=p(r,n.xaxis)+p(r,n.yaxis)+w(n))}i?(y[i]||(y[i]=[]),y[i].push(n)):d.push(n)}for(i in y)if(1!==(a=y[i]).length){var L=!1;for(a.length&&(n=a[0],L=m("bingroup")),i=L||i,h=0;h<a.length;h++){var C=(n=a[h])._input.bingroup;C&&C!==i&&M.warn(["Trace",n.index,"must match","within bingroup",i+".","Ignoring its bingroup:",C,"setting."].join(" ")),n.bingroup=i,u(n,i,w(n))}}else d.push(a[0]);for(h=0;h<d.length;h++){n=d[h];var P=m("bingroup");if(l(n,"2dMap"))for(b=0;b<2;b++){var z=m((c=e[b])+"bingroup",P?P+"__"+c:null);u(n,z,c)}else u(n,P,w(n))}for(i in v){var j=v[i];for(a=j.traces,f=0;f<s.length;f++){var R,V,D=s[f],B=D.name;if("nbins"!==B||!j.sizeFound){for(h=0;h<a.length;h++){if(void 0!==x((n=a[h])._input,R=D.aStr[c=j.dirs[h]]).get()){j[B]=m(R),j[B+"Found"]=!0;break}(V=(n._autoBin||{})[c]||{})[B]&&x(n,R).set(V[B])}if("start"===B||"end"===B)for(;h<a.length;h++)(n=a[h])["_"+c+"bingroup"]&&m(R,(V=(n._autoBin||{})[c]||{})[B]);"nbins"!==B||j.sizeFound||j.nbinsFound||(n=a[0],j[B]=m(R))}}}}},11385:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(7901),T=t(90769).handleText,x=t(98340),p=t(7745);$.exports=function(s,e,o,r){function n(d,m){return k.coerce(s,e,p,d,m)}var a=n("x"),i=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var c=n("textposition");T(s,e,r,n,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",i&&!a?"h":"v"),f="v"===h?"x":"y",b="v"===h?"y":"x",v=a&&i?Math.min(k.minRowLength(a)&&k.minRowLength(i)):k.minRowLength(e[f]||[]);if(v){e._length=v,M.getComponentMethod("calendars","handleTraceDefaults")(s,e,["x","y"],r),e[b]&&n("histfunc"),n("histnorm"),n("autobin"+f),x(s,e,n,o,r),k.coerceSelectionMarkerOpacity(e,n);var g=(e.marker.line||{}).color,y=M.getComponentMethod("errorbars","supplyDefaults");y(s,e,g||l.defaultLine,{axis:"y"}),y(s,e,g||l.defaultLine,{axis:"x",inherit:"y"})}else e.visible=!1}},84402:function($){"use strict";$.exports=function(I,t,M,k,l){if(I.x="xVal"in t?t.xVal:t.x,I.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(I.z=t.zLabelVal),t.xa&&(I.xaxis=t.xa),t.ya&&(I.yaxis=t.ya),!(M.cumulative||{}).enabled){var T,x=Array.isArray(l)?k[0].pts[l[0]][l[1]]:k[l].pts;if(I.pointNumbers=x,I.binNumber=I.pointNumber,delete I.pointNumber,delete I.pointIndex,M._indexToPoints){T=[];for(var p=0;p<x.length;p++)T=T.concat(M._indexToPoints[x[p]])}else T=x;I.pointIndices=T}return I}},76440:function($,I,t){"use strict";var M=t(95423).hoverPoints,k=t(89298).hoverLabelText;$.exports=function(l,T,x,p,s){var e=M(l,T,x,p,s);if(e){var o=(l=e[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n="h"===r.orientation?"y":"x";l[n+"Label"]=k(l[n+"a"],[o.ph0,o.ph1],r[n+"hoverformat"])}return e}}},36071:function($,I,t){"use strict";$.exports={attributes:t(7745),layoutAttributes:t(43641),supplyDefaults:t(11385),crossTraceDefaults:t(82222),supplyLayoutDefaults:t(13957),calc:t(72138).calc,crossTraceCalc:t(11661).crossTraceCalc,plot:t(17295).plot,layerName:"barlayer",style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,colorbar:t(4898),hoverPoints:t(76440),selectPoints:t(81974),eventData:t(84402),moduleType:"trace",name:"histogram",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function($){"use strict";$.exports={percent:function(I,t){for(var M=I.length,k=100/t,l=0;l<M;l++)I[l]*=k},probability:function(I,t){for(var M=I.length,k=0;k<M;k++)I[k]/=t},density:function(I,t,M,k){var l=I.length;k=k||1;for(var T=0;T<l;T++)I[T]*=M[T]*k},"probability density":function(I,t,M,k){var l=I.length;k&&(t/=k);for(var T=0;T<l;T++)I[T]*=M[T]/t}}},35361:function($,I,t){"use strict";var M=t(7745),k=t(17656),l=t(21606),T=t(9012),x=t(12663).axisHoverFormat,p=t(5386).f,s=t(5386).s,e=t(50693),o=t(1426).extendFlat;$.exports=o({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:k("x"),nbinsy:M.nbinsy,ybins:k("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:o({},M.bingroup,{}),xbingroup:o({},M.bingroup,{}),ybingroup:o({},M.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:p({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:o({},T.showlegend,{dflt:!1})},e("",{cLetter:"z",autoColorDflt:!1}))},17562:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(59575),T=t(36362),x=t(42174),p=t(40965),s=t(72138).calcAllAutoBins;function e(n,a,i,c){var h,f=new Array(n);if(c)for(h=0;h<n;h++)f[h]=1/(a[h+1]-a[h]);else{var b=1/i;for(h=0;h<n;h++)f[h]=b}return f}function o(n,a){return{start:n(a.start),end:n(a.end),size:a.size}}function r(n,a,i,c,h,f){var b,v=n.length-1,g=new Array(v),y=p(i,c,n,h,f);for(b=0;b<v;b++){var d=(a||[])[b];g[b]=void 0===d?[y(n[b]),y(n[b+1],!0)]:[d,d]}return g}$.exports=function(n,a){var i,c,h,f,b=k.getFromId(n,a.xaxis),v=k.getFromId(n,a.yaxis),g=a.xcalendar,y=a.ycalendar,d=function(dt){return b.r2c(dt,0,g)},m=function(dt){return v.r2c(dt,0,y)},w=s(n,a,b,"x"),u=w[0],S=w[1],_=s(n,a,v,"y"),E=_[0],L=_[1],C=a._length;S.length>C&&S.splice(C,S.length-C),L.length>C&&L.splice(C,L.length-C);var P=[],z=[],j=[],R="string"==typeof u.size,V="string"==typeof E.size,D=[],B=[],N=R?D:u,U=V?B:E,J=0,Y=[],q=[],H=a.histnorm,X=a.histfunc,Q=-1!==H.indexOf("density"),ne="max"===X||"min"===X?null:0,re=l.count,ae=T[H],se=!1,pe=[],ke=[],me="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";me&&"count"!==X&&(se="avg"===X,re=l[X]);var le=u.size,ue=d(u.start),Ee=d(u.end)+(ue-k.tickIncrement(ue,le,!1,g))/1e6;for(i=ue;i<Ee;i=k.tickIncrement(i,le,!1,g))z.push(ne),D.push(i),se&&j.push(0);D.push(i);var xe=z.length,Te=(i-ue)/xe,we=b.c2r(ue+Te/2,0,g),K=E.size,oe=m(E.start),he=m(E.end)+(oe-k.tickIncrement(oe,K,!1,y))/1e6;for(i=oe;i<he;i=k.tickIncrement(i,K,!1,y)){P.push(z.slice()),B.push(i);var ye=new Array(xe);for(c=0;c<xe;c++)ye[c]=[];q.push(ye),se&&Y.push(j.slice())}B.push(i);var Me=P.length,Re=(i-oe)/Me,Pe=v.c2r(oe+Re/2,0,y);Q&&(pe=e(z.length,N,Te,R),ke=e(P.length,U,Re,V)),R||"date"!==b.type||(N=o(d,N)),V||"date"!==v.type||(U=o(m,U));var De=!0,fe=!0,ge=new Array(xe),be=new Array(Me),Ie=1/0,He=1/0,Ve=1/0,tt=1/0;for(i=0;i<C;i++){var nt=S[i],st=L[i];h=M.findBin(nt,N),f=M.findBin(st,U),h>=0&&h<xe&&f>=0&&f<Me&&(J+=re(h,i,P[f],me,Y[f]),q[f][h].push(i),De&&(void 0===ge[h]?ge[h]=nt:ge[h]!==nt&&(De=!1)),fe&&(void 0===be[f]?be[f]=st:be[f]!==st&&(fe=!1)),Ie=Math.min(Ie,nt-D[h]),He=Math.min(He,D[h+1]-nt),Ve=Math.min(Ve,st-B[f]),tt=Math.min(tt,B[f+1]-st))}if(se)for(f=0;f<Me;f++)J+=x(P[f],Y[f]);if(ae)for(f=0;f<Me;f++)ae(P[f],J,pe,ke[f]);return{x:S,xRanges:r(D,De&&ge,Ie,He,b,g),x0:we,dx:Te,y:L,yRanges:r(B,fe&&be,Ve,tt,v,y),y0:Pe,dy:Re,z:P,pts:q}}},93888:function($,I,t){"use strict";var M=t(71828),k=t(75238),l=t(49901),T=t(1586),x=t(58623),p=t(35361);$.exports=function(s,e,o,r){function n(a,i){return M.coerce(s,e,p,a,i)}k(s,e,n,r),!1!==e.visible&&(l(s,e,n,r),T(s,e,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),x(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function($,I,t){"use strict";var M=t(46248),k=t(89298).hoverLabelText;$.exports=function(l,T,x,p,s){var e=M(l,T,x,p,s);if(e){var o=(l=e[0]).index,a=l.cd[0],i=a.trace,c=a.xRanges[o[1]],h=a.yRanges[o[0]];return l.xLabel=k(l.xa,[c[0],c[1]],i.xhoverformat),l.yLabel=k(l.ya,[h[0],h[1]],i.yhoverformat),e}}},43905:function($,I,t){"use strict";$.exports={attributes:t(35361),supplyDefaults:t(93888),crossTraceDefaults:t(82222),calc:t(90757),plot:t(50347),layerName:"heatmaplayer",colorbar:t(61243),style:t(70035),hoverPoints:t(76128),eventData:t(84402),moduleType:"trace",name:"histogram2d",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function($,I,t){"use strict";var M=t(73972),k=t(71828);$.exports=function(l,T,x,p){var s=x("x"),e=x("y"),o=k.minRowLength(s),r=k.minRowLength(e);o&&r?(T._length=Math.min(o,r),M.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],p),(x("z")||x("marker.color"))&&x("histfunc"),x("histnorm"),x("autobinx"),x("autobiny")):T.visible=!1}},99066:function($,I,t){"use strict";var M=t(35361),k=t(70600),l=t(50693),T=t(12663).axisHoverFormat,x=t(1426).extendFlat;$.exports=x({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:x({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function($,I,t){"use strict";var M=t(71828),k=t(75238),l=t(67217),T=t(8724),x=t(58623),p=t(99066);$.exports=function(s,e,o,r){function n(a,i){return M.coerce(s,e,p,a,i)}k(s,e,n,r),!1!==e.visible&&(l(s,e,n,function(a){return M.coerce2(s,e,p,a)}),T(s,e,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),e.contours&&"heatmap"===e.contours.coloring&&x(n,r))}},35902:function($,I,t){"use strict";$.exports={attributes:t(99066),supplyDefaults:t(62654),crossTraceDefaults:t(82222),calc:t(27529),plot:t(29854).plot,layerName:"contourlayer",style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function($,I,t){"use strict";var M=t(5386).f,k=t(5386).s,l=t(50693),T=t(27670).Y,x=t(34e3),p=t(57564),s=t(45802),e=t(43473),o=t(1426).extendFlat;$.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:o({colors:p.marker.colors,line:p.marker.line,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:p.leaf,pathbar:s.pathbar,text:x.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:e.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:x.sort,root:p.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},96346:function($,I,t){"use strict";var M=t(74875);I.name="icicle",I.plot=function(k,l,T,x){M.plotBasePlot(I.name,k,l,T,x)},I.clean=function(k,l,T,x){M.cleanBasePlot(I.name,k,l,T,x)}},46584:function($,I,t){"use strict";var M=t(52147);I.y=function(k,l){return M.calc(k,l)},I.T=function(k){return M._runCrossTraceCalc("icicle",k)}},56524:function($,I,t){"use strict";var M=t(71828),k=t(46291),l=t(7901),T=t(27670).c,x=t(90769).handleText,p=t(97313).TEXTPAD,s=t(21081),e=s.hasColorscale,o=s.handleDefaults;$.exports=function(r,n,a,i){function c(d,m){return M.coerce(r,n,k,d,m)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var b=c("values");c(b&&b.length?"branchvalues":"count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");x(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor),c("marker.colors");var y=n._hasColorscale=e(r,"marker","colors")||(r.marker||{}).coloraxis;y&&o(r,n,i,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",y?1:.7),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*p),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},90666:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(63893),x=t(21538),p=t(82454).styleOne,s=t(43473),e=t(2791),o=t(83523),r=t(24714).formatSliceLabel,n=!1;$.exports=function(a,i,c,h,f){var b=f.width,v=f.height,g=f.viewX,y=f.viewY,d=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,z=i[0].trace,j=-1!==z.textposition.indexOf("left"),R=-1!==z.textposition.indexOf("right"),V=-1!==z.textposition.indexOf("bottom"),D=x(c,[b,v],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),B=1/0,N=-1/0;D.forEach(function(H){var X=H.depth;X>=z._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(B=Math.min(B,X),N=Math.max(N,X))}),h=h.data(D,e.getPtId),z._maxVisibleLayers=isFinite(N)?N-B+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[b,v],d),h.order();var U=null;if(u&&L){var J=e.getPtId(L);h.each(function(H){null===U&&e.getPtId(H)===J&&(U={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var Y=function(){return U||{x0:0,x1:b,y0:0,y1:v}},q=h;return u&&(q=q.transition().each("end",function(){var H=M.select(this);e.setSliceCursor(H,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),q.each(function(H){H._x0=g(H.x0),H._x1=g(H.x1),H._y0=y(H.y0),H._y1=y(H.y1),H._hoverX=g(H.x1-z.tiling.pad),H._hoverY=y(V?H.y1-z.tiling.pad/2:H.y0+z.tiling.pad/2);var X=M.select(this),Q=k.ensureSingle(X,"path","surface",function(se){se.style("pointer-events",C?"none":"all")});u?Q.transition().attrTween("d",function(se){var pe=_(se,n,Y(),[b,v],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(ke){return d(pe(ke))}}):Q.attr("d",d),X.call(o,c,a,i,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,a,{isTransitioning:a._transitioning}),Q.call(p,H,z,{hovered:!1}),H._text=H.x0===H.x1||H.y0===H.y1?"":r(H,c,z,i,P)||"";var ne=k.ensureSingle(X,"g","slicetext"),re=k.ensureSingle(ne,"text","",function(se){se.attr("data-notex",1)}),ae=k.ensureUniformFontSize(a,e.determineTextFont(z,H,P.font));re.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":j?"start":"middle").call(l.font,ae).call(T.convertToTspans,a),H.textBB=l.bBox(re.node()),H.transform=m(H,{fontSize:ae.size}),H.transform.fontSize=ae.size,u?re.transition().attrTween("transform",function(se){var pe=E(se,n,Y(),[b,v]);return function(ke){return w(pe(ke))}}):re.attr("transform",w(H))}),U}},69816:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"icicle",basePlotModule:t(96346),categories:[],animatable:!0,attributes:t(46291),layoutAttributes:t(92894),supplyDefaults:t(56524),supplyLayoutDefaults:t(21070),calc:t(46584).y,crossTraceCalc:t(46584).T,plot:t(85596),style:t(82454).style,colorbar:t(4898),meta:{}}},92894:function($){"use strict";$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function($,I,t){"use strict";var M=t(71828),k=t(92894);$.exports=function(l,T){function x(p,s){return M.coerce(l,T,k,p,s)}x("iciclecolorway",T.colorway),x("extendiciclecolors")}},21538:function($,I,t){"use strict";var M=t(674),k=t(14102);$.exports=function(l,T,x){var p=x.flipX,s=x.flipY,e="h"===x.orientation,o=x.maxDepth,r=T[0],n=T[1];o&&(r=(l.height+1)*T[0]/Math.min(l.height+1,o),n=(l.height+1)*T[1]/Math.min(l.height+1,o));var a=M.partition().padding(x.pad.inner).size(e?[T[1],r]:[T[0],n])(l);return(e||p||s)&&k(a,T,{swapXY:e,flipX:p,flipY:s}),a}},85596:function($,I,t){"use strict";var M=t(80694),k=t(90666);$.exports=function(l,T,x,p){return M(l,T,x,p,{type:"icicle",drawDescendants:k})}},82454:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(71828),T=t(72597).resizeText;function x(p,s,e){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(e,n,"marker.line.color")||k.defaultLine,i=l.castOption(e,n,"marker.line.width")||0;p.style("stroke-width",i).call(k.fill,o.color).call(k.stroke,a).style("opacity",r?e.leaf.opacity:null)}$.exports={style:function(p){var s=p._fullLayout._iciclelayer.selectAll(".trace");T(p,s,"icicle"),s.each(function(e){var o=M.select(this),r=e[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){M.select(this).call(x,n,r)})})},styleOne:x}},17230:function($,I,t){"use strict";for(var M=t(9012),k=t(5386).f,l=t(1426).extendFlat,T=t(51877).colormodel,x=["rgb","rgba","rgba256","hsl","hsla"],p=[],s=[],e=0;e<x.length;e++){var o=T[x[e]];p.push("For the `"+x[e]+"` colormodel, it is ["+(o.zminDflt||o.min).join(", ")+"]."),s.push("For the `"+x[e]+"` colormodel, it is ["+(o.zmaxDflt||o.max).join(", ")+"].")}$.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:x,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function($,I,t){"use strict";var M=t(71828),k=t(51877),l=t(92770),T=t(89298),x=t(71828).maxRowLength,p=t(67395).A;function s(o,r,n,a){return function(i){return M.constrain((i-o)*r,n,a)}}function e(o,r){return function(n){return M.constrain(n,o,r)}}$.exports=function(o,r){var n,a;if(r._hasZ)n=r.z.length,a=x(r.z);else if(r._hasSource){var i=p(r.source);n=i.height,a=i.width}var c,h=T.getFromId(o,r.xaxis||"x"),f=T.getFromId(o,r.yaxis||"y"),b=h.d2c(r.x0)-r.dx/2,v=f.d2c(r.y0)-r.dy/2,g=[b,b+a*r.dx],y=[v,v+n*r.dy];if(h&&"log"===h.type)for(c=0;c<a;c++)g.push(b+c*r.dx);if(f&&"log"===f.type)for(c=0;c<n;c++)y.push(v+c*r.dy);return r._extremes[h._id]=T.findExtremes(h,g),r._extremes[f._id]=T.findExtremes(f,y),r._scaler=function(d){var m=k.colormodel[d.colormodel],w=(m.colormodel||d.colormodel).length;d._sArray=[];for(var u=0;u<w;u++)d._sArray.push(m.min[u]!==d.zmin[u]||m.max[u]!==d.zmax[u]?s(d.zmin[u],(m.max[u]-m.min[u])/(d.zmax[u]-d.zmin[u]),m.min[u],m.max[u]):e(m.min[u],m.max[u]));return function(S){for(var _=S.slice(0,w),E=0;E<w;E++){var L=_[E];if(!l(L))return!1;_[E]=d._sArray[E](L)}return _}}(r),[{x0:b,y0:v,z:r.z,w:a,h:n}]}},51877:function($){"use strict";$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(I){return I.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(I){return I.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(I){return I.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(I){var t=I.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(I){var t=I.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},13245:function($,I,t){"use strict";var M=t(71828),k=t(17230),l=t(51877),T=t(25095).IMAGE_URL_PREFIX;$.exports=function(x,p){function s(r,n){return M.coerce(x,p,k,r,n)}s("source"),p.source&&!p.source.match(T)&&delete p.source,p._hasSource=!!p.source;var e,o=s("z");p._hasZ=!(void 0===o||!o.length||!o[0]||!o[0].length),p._hasZ||p._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),p._hasZ?(s("colormodel","rgb"),s("zmin",(e=l.colormodel[p.colormodel]).zminDflt||e.min),s("zmax",e.zmaxDflt||e.max)):p._hasSource&&(p.colormodel="rgba256",p.zmin=(e=l.colormodel[p.colormodel]).zminDflt,p.zmax=e.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),p._length=null):p.visible=!1}},30835:function($){"use strict";$.exports=function(I,t){return"xVal"in t&&(I.x=t.xVal),"yVal"in t&&(I.y=t.yVal),t.xa&&(I.xaxis=t.xa),t.ya&&(I.yaxis=t.ya),I.color=t.color,I.colormodel=t.trace.colormodel,I.z||(I.z=t.color),I}},67395:function($,I,t){"use strict";var M=t(33575),k=t(25095).IMAGE_URL_PREFIX,l=t(12856).Buffer;I.A=function(T){var x=T.replace(k,""),p=new l(x,"base64");return M(p)}},28749:function($,I,t){"use strict";var M=t(30211),k=t(71828),l=t(51877);$.exports=function(T,x,p){var s=T.cd[0],e=s.trace,o=T.xa,r=T.ya;if(!(M.inbox(x-s.x0,x-(s.x0+s.w*e.dx),0)>0||M.inbox(p-s.y0,p-(s.y0+s.h*e.dy),0)>0)){var n,a=Math.floor((x-s.x0)/e.dx),i=Math.floor(Math.abs(p-s.y0)/e.dy);if(e._hasZ?n=s.z[i][a]:e._hasSource&&(n=e._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(a,i,1,1).data),n){var c,h=s.hi||e.hoverinfo;if(h){var f=h.split("+");-1!==f.indexOf("all")&&(f=["color"]),-1!==f.indexOf("color")&&(c=!0)}var b,v=l.colormodel[e.colormodel],g=v.colormodel||e.colormodel,y=g.length,d=e._scaler(n),m=v.suffix,w=[];(e.hovertemplate||c)&&(w.push("["+[d[0]+m[0],d[1]+m[1],d[2]+m[2]].join(", ")),4===y&&w.push(", "+d[3]+m[3]),w.push("]"),w=w.join(""),T.extraText=g.toUpperCase()+": "+w),Array.isArray(e.hovertext)&&Array.isArray(e.hovertext[i])?b=e.hovertext[i][a]:Array.isArray(e.text)&&Array.isArray(e.text[i])&&(b=e.text[i][a]);var u=r.c2p(s.y0+(i+.5)*e.dy),S=s.x0+(a+.5)*e.dx,_=s.y0+(i+.5)*e.dy,E="["+n.slice(0,e.colormodel.length).join(", ")+"]";return[k.extendFlat(T,{index:[i,a],x0:o.c2p(s.x0+a*e.dx),x1:o.c2p(s.x0+(a+1)*e.dx),y0:u,y1:u,color:d,xVal:S,xLabelVal:S,yVal:_,yLabelVal:_,zLabelVal:E,text:b,hovertemplateLabels:{zLabel:E,colorLabel:w,"color[0]Label":d[0]+m[0],"color[1]Label":d[1]+m[1],"color[2]Label":d[2]+m[2],"color[3]Label":d[3]+m[3]}})]}}}},94507:function($,I,t){"use strict";$.exports={attributes:t(17230),supplyDefaults:t(13245),calc:t(71113),plot:t(60775),style:t(12826),hoverPoints:t(28749),eventData:t(30835),moduleType:"trace",name:"image",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=k.strTranslate,T=t(77922),x=t(51877),p=k.isIOS()||k.isSafari()||k.isIE();$.exports=function(s,e,o,r){var n=e.xaxis,a=e.yaxis,i=!(p||s._context._exportedPlot);k.makeTraceGroups(r,o,"im").each(function(c){var h=M.select(this),f=c[0],b=f.trace,v=("fast"===b.zsmooth||!1===b.zsmooth&&i)&&!b._hasZ&&b._hasSource&&"linear"===n.type&&"linear"===a.type;b._realImage=v;var g,y,d,m,w,u,S=f.z,_=f.x0,E=f.y0,L=f.w,C=f.h,P=b.dx,z=b.dy;for(u=0;void 0===g&&u<L;)g=n.c2p(_+u*P),u++;for(u=L;void 0===y&&u>0;)y=n.c2p(_+u*P),u--;for(u=0;void 0===m&&u<C;)m=a.c2p(E+u*z),u++;for(u=C;void 0===w&&u>0;)w=a.c2p(E+u*z),u--;y<g&&(d=y,y=g,g=d),w<m&&(d=m,m=w,w=d),v||(g=Math.max(-.5*n._length,g),y=Math.min(1.5*n._length,y),m=Math.max(-.5*a._length,m),w=Math.min(1.5*a._length,w));var j=Math.round(y-g),R=Math.round(w-m);if(j<=0||R<=0)h.selectAll("image").data([]).exit().remove();else{var V=h.selectAll("image").data([c]);V.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),V.exit().remove();var D=!1===b.zsmooth?x.pixelatedStyle:"";if(v){var B=k.simpleMap(n.range,n.r2l),N=k.simpleMap(a.range,a.r2l),U=B[1]<B[0],J=N[1]>N[0];if(U||J){var Y=g+j/2,q=m+R/2;D+="transform:"+l(Y+"px",q+"px")+"scale("+(U?-1:1)+","+(J?-1:1)+")"+l(-Y+"px",-q+"px")+";"}}V.attr("style",D);var H=new Promise(function(Q){if(b._hasZ)Q();else if(b._hasSource)if(b._canvas&&b._canvas.el.width===L&&b._canvas.el.height===C&&b._canvas.source===b.source)Q();else{var ne=document.createElement("canvas");ne.width=L,ne.height=C;var re=ne.getContext("2d",{willReadFrequently:!0});b._image=b._image||new Image;var ae=b._image;ae.onload=function(){re.drawImage(ae,0,0),b._canvas={el:ne,source:b.source},Q()},ae.setAttribute("src",b.source)}}).then(function(){var Q;if(b._hasZ)Q=X(function(ae,se){return S[se][ae]}).toDataURL("image/png");else if(b._hasSource)if(v)Q=b.source;else{var re=b._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,C).data;Q=X(function(ae,se){var pe=4*(se*L+ae);return[re[pe],re[pe+1],re[pe+2],re[pe+3]]}).toDataURL("image/png")}V.attr({"xlink:href":Q,height:R,width:j,x:g,y:m})});s._promises.push(H)}function X(Q){var ne=document.createElement("canvas");ne.width=j,ne.height=R;var re,ae=ne.getContext("2d",{willReadFrequently:!0}),se=function(we){return k.constrain(Math.round(n.c2p(_+we*P)-g),0,j)},pe=function(we){return k.constrain(Math.round(a.c2p(E+we*z)-m),0,R)},ke=x.colormodel[b.colormodel],me=ke.colormodel||b.colormodel,le=ke.fmt;for(u=0;u<f.w;u++){var ue=se(u),Ee=se(u+1);if(Ee!==ue&&!isNaN(Ee)&&!isNaN(ue))for(var de=0;de<f.h;de++){var xe=pe(de),Te=pe(de+1);Te===xe||isNaN(Te)||isNaN(xe)||!Q(u,de)||(re=b._scaler(Q(u,de)),ae.fillStyle=re?me+"("+le(re).join(",")+")":"rgba(0,0,0,0)",ae.fillRect(ue,xe,Ee-ue,Te-xe))}}return ne}})}},12826:function($,I,t){"use strict";var M=t(39898);$.exports=function(k){M.select(k).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function($,I,t){"use strict";var M=t(1426).extendFlat,k=t(1426).extendDeep,l=t(30962).overrideAll,T=t(41940),x=t(22399),p=t(27670).Y,s=t(13838),e=t(44467).templatedArray,o=t(22372),r=t(12663).descriptionOnlyNumbers,n=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:x.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},i={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=e("step",k({},a,{range:i}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:p({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:o.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:o.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:o.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:i,visible:M({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:M({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:M({},a.line.color,{}),width:M({},a.line.width,{dflt:1}),editType:"plot"},thickness:M({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function($,I,t){"use strict";var M=t(74875);I.name="indicator",I.plot=function(k,l,T,x){M.plotBasePlot(I.name,k,l,T,x)},I.clean=function(k,l,T,x){M.cleanBasePlot(I.name,k,l,T,x)}},24667:function($){"use strict";$.exports={calc:function(I,t){var M=[],k=t.value;"number"!=typeof t._lastValue&&(t._lastValue=t.value);var l=t._lastValue,T=l;return t._hasDelta&&"number"==typeof t.delta.reference&&(T=t.delta.reference),M[0]={y:k,lastY:l,delta:k-T,relativeDelta:(k-T)/T},M}}},84577:function($){"use strict";$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function($,I,t){"use strict";var M=t(71828),k=t(54846),l=t(27670).c,T=t(44467),x=t(85501),p=t(84577),s=t(26218),e=t(38701),o=t(96115),r=t(89426);function n(a,i){function c(h,f){return M.coerce(a,i,k.gauge.steps,h,f)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}$.exports={supplyDefaults:function(a,i,c,h){function f(L,C){return M.coerce(a,i,k,L,C)}l(i,h,f),f("mode"),i._hasNumber=-1!==i.mode.indexOf("number"),i._hasDelta=-1!==i.mode.indexOf("delta"),i._hasGauge=-1!==i.mode.indexOf("gauge");var b=f("value");i._range=[0,"number"==typeof b?1.5*b:1];var v,g,y,d,m,w,u=new Array(2);function S(L,C){return M.coerce(y,d,k.gauge,L,C)}function _(L,C){return M.coerce(m,w,k.gauge.axis,L,C)}if(i._hasNumber&&(f("number.valueformat"),f("number.font.color",h.font.color),f("number.font.family",h.font.family),f("number.font.size"),void 0===i.number.font.size&&(i.number.font.size=p.defaultNumberFontSize,u[0]=!0),f("number.prefix"),f("number.suffix"),v=i.number.font.size),i._hasDelta&&(f("delta.font.color",h.font.color),f("delta.font.family",h.font.family),f("delta.font.size"),void 0===i.delta.font.size&&(i.delta.font.size=(i._hasNumber?.5:1)*(v||p.defaultNumberFontSize),u[1]=!0),f("delta.reference",i.value),f("delta.relative"),f("delta.valueformat",i.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),f("delta.prefix"),f("delta.suffix"),g=i.delta.font.size),i._scaleNumbers=(!i._hasNumber||u[0])&&(!i._hasDelta||u[1])||!1,f("title.font.color",h.font.color),f("title.font.family",h.font.family),f("title.font.size",.25*(v||g||p.defaultNumberFontSize)),f("title.text"),i._hasGauge){(y=a.gauge)||(y={}),d=T.newContainer(i,"gauge"),S("shape"),(i._isBullet="bullet"===i.gauge.shape)||f("title.align","center"),(i._isAngular="angular"===i.gauge.shape)||f("align","center"),S("bgcolor",h.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",p.valueThickness*("bullet"===i.gauge.shape?.5:1)),x(y,d,{name:"steps",handleItemDefaults:n}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),m={},y&&(m=y.axis||{}),w=T.newContainer(d,"axis"),_("visible"),i._range=_("range",i._range);var E={outerTicks:!0};s(m,w,_,"linear"),r(m,w,_,"linear",E),o(m,w,_,"linear",E),e(m,w,_,E)}else f("title.align","center"),f("align","center"),i._isAngular=i._isBullet=!1;i._length=null}}},15154:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"indicator",basePlotModule:t(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t(54846),supplyDefaults:t(94425).supplyDefaults,calc:t(24667).calc,plot:t(75634),meta:{}}},75634:function($,I,t){"use strict";var M=t(39898),k=t(81684).sX,l=t(81684).k4,T=t(71828),x=T.strScale,p=T.strTranslate,s=T.rad2deg,e=t(18783).MID_SHIFT,o=t(91424),r=t(84577),n=t(63893),a=t(89298),i=t(71453),c=t(52830),h=t(13838),f=t(7901),b={left:"start",center:"middle",right:"end"},v={left:0,center:.5,right:1},g=/[yzafpn\xb5mkMGTPEZY]/;function y(_){return _&&_.duration>0}function d(_){_.each(function(E){f.stroke(M.select(this),E.line.color)}).each(function(E){f.fill(M.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(_,E,L){var C=_._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),z={type:"linear",_id:"x"+E._id},j={letter:"x",font:C.font,noHover:!0,noTickson:!0};function R(V,D){return T.coerce(P,z,h,V,D)}return i(P,z,R,j,C),c(P,z,R,j),z}function w(_,E,L){return[Math.min(E/_.width,L/_.height),_,E+"x"+L]}function u(_,E,L,C){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),z=M.select(P);return z.text(_).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",_).call(n.convertToTspans,C).call(o.font,E),o.bBox(z.node())}function S(_,E,L,C,P,z){var j="_cache"+E;_[j]&&_[j].key===P||(_[j]={key:P,value:L});var R=T.aggNums(z,null,[_[j].value,C],2);return _[j].value=R,R}$.exports=function(_,E,L,C){var P,z=_._fullLayout;y(L)&&C&&(P=C()),T.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(j){var R,V,D,B,N,U=j[0].trace,J=M.select(this),Y=U._hasGauge,q=U._isAngular,H=U._isBullet,X=U.domain,Q={w:z._size.w*(X.x[1]-X.x[0]),h:z._size.h*(X.y[1]-X.y[0]),l:z._size.l+z._size.w*X.x[0],r:z._size.r+z._size.w*(1-X.x[1]),t:z._size.t+z._size.h*(1-X.y[1]),b:z._size.b+z._size.h*X.y[0]},ne=Q.l+Q.w/2,re=Q.t+Q.h/2,ae=Math.min(Q.w/2,Q.h),se=r.innerRadius*ae,pe=U.align||"center";if(V=re,Y){if(q&&(R=ne,V=re+ae/2,D=function(Te){return we=Te,[(K=.9*se)/Math.sqrt(we.width/2*(we.width/2)+we.height*we.height),we,K];var we,K}),H){var ke=r.bulletPadding,me=1-r.bulletNumberDomainSize+ke;R=Q.l+(me+(1-me)*v[pe])*Q.w,D=function(Te){return w(Te,(r.bulletNumberDomainSize-ke)*Q.w,Q.h)}}}else R=Q.l+v[pe]*Q.w,D=function(Te){return w(Te,Q.w,Q.h)};(function(Te,we,K,oe){var he,ye,Me,Re=K[0].trace,Pe=oe.numbersX,De=oe.numbersY,fe=Re.align||"center",ge=b[fe],be=oe.transitionOpts,Ie=oe.onComplete,He=T.ensureSingle(we,"g","numbers"),Ve=[];Re._hasNumber&&Ve.push("number"),Re._hasDelta&&(Ve.push("delta"),"left"===Re.delta.position&&Ve.reverse());var tt=He.selectAll("text").data(Ve);function nt(Ot,jt,Dt,Ye){if(!Ot.match("s")||Dt>=0==Ye>=0||jt(Dt).slice(-1).match(g)||jt(Ye).slice(-1).match(g))return jt;var Ze=Ot.slice().replace("s","f").replace(/\d+/,function(Je){return parseInt(Je)-1}),Ne=m(Te,{tickformat:Ze});return function(Je){return Math.abs(Je)<1?a.tickText(Ne,Je).text:jt(Je)}}tt.enter().append("text"),tt.attr("text-anchor",function(){return ge}).attr("class",function(Ot){return Ot}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),tt.exit().remove();var st,dt=Re.mode+Re.align;if(Re._hasDelta&&(st=function(){var Ot=m(Te,{tickformat:Re.delta.valueformat},Re._range);Ot.setScale(),a.prepTicks(Ot);var jt=function(ze){return a.tickText(Ot,ze).text},Dt=Re.delta.suffix,Ye=Re.delta.prefix,Ze=function(ze){return Re.delta.relative?ze.relativeDelta:ze.delta},Ne=function(ze,Ke){return 0===ze||"number"!=typeof ze||isNaN(ze)?"-":(ze>0?Re.delta.increasing.symbol:Re.delta.decreasing.symbol)+Ye+Ke(ze)+Dt},Je=function(ze){return ze.delta>=0?Re.delta.increasing.color:Re.delta.decreasing.color};void 0===Re._deltaLastValue&&(Re._deltaLastValue=Ze(K[0]));var at=He.select("text.delta");function Se(){at.text(Ne(Ze(K[0]),jt)).call(f.fill,Je(K[0])).call(n.convertToTspans,Te)}return at.call(o.font,Re.delta.font).call(f.fill,Je({delta:Re._deltaLastValue})),y(be)?at.transition().duration(be.duration).ease(be.easing).tween("text",function(){var ze=M.select(this),Ke=Ze(K[0]),it=Re._deltaLastValue,ct=nt(Re.delta.valueformat,jt,it,Ke),mt=l(it,Ke);return Re._deltaLastValue=Ke,function(Lt){ze.text(Ne(mt(Lt),ct)),ze.call(f.fill,Je({delta:mt(Lt)}))}}).each("end",function(){Se(),Ie&&Ie()}).each("interrupt",function(){Se(),Ie&&Ie()}):Se(),ye=u(Ne(Ze(K[0]),jt),Re.delta.font,ge,Te),at}(),dt+=Re.delta.position+Re.delta.font.size+Re.delta.font.family+Re.delta.valueformat,dt+=Re.delta.increasing.symbol+Re.delta.decreasing.symbol,Me=ye),Re._hasNumber&&(function(){var Ot=m(Te,{tickformat:Re.number.valueformat},Re._range);Ot.setScale(),a.prepTicks(Ot);var jt=function(Je){return a.tickText(Ot,Je).text},Dt=Re.number.suffix,Ye=Re.number.prefix,Ze=He.select("text.number");function Ne(){var Je="number"==typeof K[0].y?Ye+jt(K[0].y)+Dt:"-";Ze.text(Je).call(o.font,Re.number.font).call(n.convertToTspans,Te)}y(be)?Ze.transition().duration(be.duration).ease(be.easing).each("end",function(){Ne(),Ie&&Ie()}).each("interrupt",function(){Ne(),Ie&&Ie()}).attrTween("text",function(){var Je=M.select(this),at=l(K[0].lastY,K[0].y);Re._lastValue=K[0].y;var Se=nt(Re.number.valueformat,jt,K[0].lastY,K[0].y);return function(ze){Je.text(Ye+Se(at(ze))+Dt)}}):Ne(),he=u(Ye+jt(K[0].y)+Dt,Re.number.font,ge,Te)}(),dt+=Re.number.font.size+Re.number.font.family+Re.number.valueformat+Re.number.suffix+Re.number.prefix,Me=he),Re._hasDelta&&Re._hasNumber){var wt,_t,pt=[(he.left+he.right)/2,(he.top+he.bottom)/2],Pt=[(ye.left+ye.right)/2,(ye.top+ye.bottom)/2],St=.75*Re.delta.font.size;"left"===Re.delta.position&&(wt=S(Re,"deltaPos",0,-1*(he.width*v[Re.align]+ye.width*(1-v[Re.align])+St),dt,Math.min),_t=pt[1]-Pt[1],Me={width:he.width+ye.width+St,height:Math.max(he.height,ye.height),left:ye.left+wt,right:he.right,top:Math.min(he.top,ye.top+_t),bottom:Math.max(he.bottom,ye.bottom+_t)}),"right"===Re.delta.position&&(wt=S(Re,"deltaPos",0,he.width*(1-v[Re.align])+ye.width*v[Re.align]+St,dt,Math.max),_t=pt[1]-Pt[1],Me={width:he.width+ye.width+St,height:Math.max(he.height,ye.height),left:he.left,right:ye.right+wt,top:Math.min(he.top,ye.top+_t),bottom:Math.max(he.bottom,ye.bottom+_t)}),"bottom"===Re.delta.position&&(wt=null,_t=ye.height,Me={width:Math.max(he.width,ye.width),height:he.height+ye.height,left:Math.min(he.left,ye.left),right:Math.max(he.right,ye.right),top:he.bottom-he.height,bottom:he.bottom+ye.height}),"top"===Re.delta.position&&(wt=null,_t=he.top,Me={width:Math.max(he.width,ye.width),height:he.height+ye.height,left:Math.min(he.left,ye.left),right:Math.max(he.right,ye.right),top:he.bottom-he.height-ye.height,bottom:he.bottom}),st.attr({dx:wt,dy:_t})}(Re._hasNumber||Re._hasDelta)&&He.attr("transform",function(){var jt,Ot=oe.numbersScaler(Me),Dt=S(Re,"numbersScale",1,Ot[0],dt+=Ot[2],Math.min);Re._scaleNumbers||(Dt=1),Re._numbersTop=Dt*Me.top+(jt=Re._isAngular?De-Dt*Me.bottom:De-Dt*(Me.top+Me.bottom)/2);var Ye=Me[fe];"center"===fe&&(Ye=(Me.left+Me.right)/2);var Ze=Pe-Dt*Ye;return Ze=S(Re,"numbersTranslate",0,Ze,dt,Math.max),p(Ze,jt)+x(Dt)})})(_,J,j,{numbersX:R,numbersY:V,numbersScaler:D,transitionOpts:L,onComplete:P}),Y&&(B={range:U.gauge.axis.range,color:U.gauge.bgcolor,line:{color:U.gauge.bordercolor,width:0},thickness:1},N={range:U.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:U.gauge.bordercolor,width:U.gauge.borderwidth},thickness:1});var le=J.selectAll("g.angular").data(q?j:[]);le.exit().remove();var ue=J.selectAll("g.angularaxis").data(q?j:[]);ue.exit().remove(),q&&function(Te,we,K,oe){var he,ye,Me,Re,Pe=K[0].trace,De=oe.size,fe=oe.radius,ge=oe.innerRadius,be=oe.gaugeBg,Ie=oe.gaugeOutline,He=[De.l+De.w/2,De.t+De.h/2+fe/2],Ve=oe.gauge,tt=oe.layer,nt=oe.transitionOpts,st=oe.onComplete,dt=Math.PI/2;function wt(Lt){var At=Pe.gauge.axis.range[0],ht=(Lt-At)/(Pe.gauge.axis.range[1]-At)*Math.PI-dt;return ht<-dt?-dt:ht>dt?dt:ht}function _t(Lt){return M.svg.arc().innerRadius((ge+fe)/2-Lt/2*(fe-ge)).outerRadius((ge+fe)/2+Lt/2*(fe-ge)).startAngle(-dt)}function pt(Lt){Lt.attr("d",function(At){return _t(At.thickness).startAngle(wt(At.range[0])).endAngle(wt(At.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",p(He[0],He[1])),tt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),tt.selectAll("g.xangularaxistick,path,text").remove(),(he=m(Te,Pe.gauge.axis)).type="linear",he.range=Pe.gauge.axis.range,he._id="xangularaxis",he.ticklabeloverflow="allow",he.setScale();var Pt=function(Lt){return(he.range[0]-Lt.x)/(he.range[1]-he.range[0])*Math.PI+Math.PI},St={},Ot=a.makeLabelFns(he,0).labelStandoff;St.xFn=function(Lt){var At=Pt(Lt);return Math.cos(At)*Ot},St.yFn=function(Lt){var At=Pt(Lt),ht=Math.sin(At)>0?.2:1;return-Math.sin(At)*(Ot+Lt.fontSize*ht)+Math.abs(Math.cos(At))*(Lt.fontSize*e)},St.anchorFn=function(Lt){var At=Pt(Lt),ht=Math.cos(At);return Math.abs(ht)<.1?"middle":ht>0?"start":"end"},St.heightFn=function(Lt,At,ht){var Et=Pt(Lt);return-.5*(1+Math.sin(Et))*ht};var jt=function(Lt){return p(He[0]+fe*Math.cos(Lt),He[1]-fe*Math.sin(Lt))};Me=function(Lt){return jt(Pt(Lt))},ye=a.calcTicks(he),Re=a.getTickSigns(he)[2],he.visible&&(a.drawTicks(Te,he,{vals:ye,layer:tt,path:"M"+(Re="inside"===he.ticks?-1:1)*((he.linewidth||1)/2)+",0h"+Re*he.ticklen,transFn:function(Lt){var At=Pt(Lt);return jt(At)+"rotate("+-s(At)+")"}}),a.drawLabels(Te,he,{vals:ye,layer:tt,transFn:Me,labelFns:St}));var Ye=[be].concat(Pe.gauge.steps),Ze=Ve.selectAll("g.bg-arc").data(Ye);Ze.enter().append("g").classed("bg-arc",!0).append("path"),Ze.select("path").call(pt).call(d),Ze.exit().remove();var Ne=_t(Pe.gauge.bar.thickness),Je=Ve.selectAll("g.value-arc").data([Pe.gauge.bar]);Je.enter().append("g").classed("value-arc",!0).append("path");var at,Se,ze,Ke=Je.select("path");y(nt)?(Ke.transition().duration(nt.duration).ease(nt.easing).each("end",function(){st&&st()}).each("interrupt",function(){st&&st()}).attrTween("d",(at=Ne,Se=wt(K[0].lastY),ze=wt(K[0].y),function(){var Lt=k(Se,ze);return function(At){return at.endAngle(Lt(At))()}})),Pe._lastValue=K[0].y):Ke.attr("d","number"==typeof K[0].y?Ne.endAngle(wt(K[0].y)):"M0,0Z"),Ke.call(d),Je.exit().remove(),Ye=[];var it=Pe.gauge.threshold.value;(it||0===it)&&Ye.push({range:[it,it],color:Pe.gauge.threshold.color,line:{color:Pe.gauge.threshold.line.color,width:Pe.gauge.threshold.line.width},thickness:Pe.gauge.threshold.thickness});var ct=Ve.selectAll("g.threshold-arc").data(Ye);ct.enter().append("g").classed("threshold-arc",!0).append("path"),ct.select("path").call(pt).call(d),ct.exit().remove();var mt=Ve.selectAll("g.gauge-outline").data([Ie]);mt.enter().append("g").classed("gauge-outline",!0).append("path"),mt.select("path").call(pt).call(d),mt.exit().remove()}(_,0,j,{radius:ae,innerRadius:se,gauge:le,layer:ue,size:Q,gaugeBg:B,gaugeOutline:N,transitionOpts:L,onComplete:P});var Ee=J.selectAll("g.bullet").data(H?j:[]);Ee.exit().remove();var de=J.selectAll("g.bulletaxis").data(H?j:[]);de.exit().remove(),H&&function(Te,we,K,oe){var he,ye,Me,Re,Pe,De=K[0].trace,fe=oe.gauge,ge=oe.layer,be=oe.gaugeBg,Ie=oe.gaugeOutline,He=oe.size,Ve=De.domain,tt=oe.transitionOpts,nt=oe.onComplete;fe.enter().append("g").classed("bullet",!0),fe.attr("transform",p(He.l,He.t)),ge.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),ge.selectAll("g.xbulletaxistick,path,text").remove();var st=He.h,dt=De.gauge.bar.thickness*st,wt=Ve.x[0],_t=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(De._hasNumber||De._hasDelta?1-r.bulletNumberDomainSize:1);function pt(Ze){Ze.attr("width",function(Ne){return Math.max(0,he.c2p(Ne.range[1])-he.c2p(Ne.range[0]))}).attr("x",function(Ne){return he.c2p(Ne.range[0])}).attr("y",function(Ne){return.5*(1-Ne.thickness)*st}).attr("height",function(Ne){return Ne.thickness*st})}(he=m(Te,De.gauge.axis))._id="xbulletaxis",he.domain=[wt,_t],he.setScale(),ye=a.calcTicks(he),Me=a.makeTransTickFn(he),Re=a.getTickSigns(he)[2],Pe=He.t+He.h,he.visible&&(a.drawTicks(Te,he,{vals:"inside"===he.ticks?a.clipEnds(he,ye):ye,layer:ge,path:a.makeTickPath(he,Pe,Re),transFn:Me}),a.drawLabels(Te,he,{vals:ye,layer:ge,transFn:Me,labelFns:a.makeLabelFns(he,Pe)}));var Pt=[be].concat(De.gauge.steps),St=fe.selectAll("g.bg-bullet").data(Pt);St.enter().append("g").classed("bg-bullet",!0).append("rect"),St.select("rect").call(pt).call(d),St.exit().remove();var Ot=fe.selectAll("g.value-bullet").data([De.gauge.bar]);Ot.enter().append("g").classed("value-bullet",!0).append("rect"),Ot.select("rect").attr("height",dt).attr("y",(st-dt)/2).call(d),y(tt)?Ot.select("rect").transition().duration(tt.duration).ease(tt.easing).each("end",function(){nt&&nt()}).each("interrupt",function(){nt&&nt()}).attr("width",Math.max(0,he.c2p(Math.min(De.gauge.axis.range[1],K[0].y)))):Ot.select("rect").attr("width","number"==typeof K[0].y?Math.max(0,he.c2p(Math.min(De.gauge.axis.range[1],K[0].y))):0),Ot.exit().remove();var jt=K.filter(function(){return De.gauge.threshold.value||0===De.gauge.threshold.value}),Dt=fe.selectAll("g.threshold-bullet").data(jt);Dt.enter().append("g").classed("threshold-bullet",!0).append("line"),Dt.select("line").attr("x1",he.c2p(De.gauge.threshold.value)).attr("x2",he.c2p(De.gauge.threshold.value)).attr("y1",(1-De.gauge.threshold.thickness)/2*st).attr("y2",(1-(1-De.gauge.threshold.thickness)/2)*st).call(f.stroke,De.gauge.threshold.line.color).style("stroke-width",De.gauge.threshold.line.width),Dt.exit().remove();var Ye=fe.selectAll("g.gauge-outline").data([Ie]);Ye.enter().append("g").classed("gauge-outline",!0).append("rect"),Ye.select("rect").call(pt).call(d),Ye.exit().remove()}(_,0,j,{gauge:Ee,layer:de,size:Q,gaugeBg:B,gaugeOutline:N,transitionOpts:L,onComplete:P});var xe=J.selectAll("text.title").data(j);xe.exit().remove(),xe.enter().append("text").classed("title",!0),xe.attr("text-anchor",function(){return H?b.right:b[U.title.align]}).text(U.title.text).call(o.font,U.title.font).call(n.convertToTspans,_),xe.attr("transform",function(){var Te,we=Q.l+Q.w*v[U.title.align],K=r.titlePadding,oe=o.bBox(xe.node());return Y?(q&&(Te=U.gauge.axis.visible?o.bBox(ue.node()).top-K-oe.bottom:Q.t+Q.h/2-ae/2-oe.bottom-K),H&&(Te=V-(oe.top+oe.bottom)/2,we=Q.l-r.bulletPadding*Q.w)):Te=U._numbersTop-K-oe.bottom,p(we,Te)})})}},16249:function($,I,t){"use strict";var M=t(50693),k=t(12663).axisHoverFormat,l=t(5386).f,T=t(2418),x=t(9012),p=t(1426).extendFlat,s=t(30962).overrideAll,e=$.exports=s(p({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:p({},x.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:p({},x.hoverinfo)}),"calc","nested");e.flatshading.dflt=!0,e.lighting.facenormalsepsilon.dflt=0,e.x.editType=e.y.editType=e.z.editType=e.value.editType="calc+clearAxisTypes",e.transforms=void 0},56959:function($,I,t){"use strict";var M=t(78803),k=t(88489).processGrid,l=t(88489).filter;$.exports=function(T,x){x._len=Math.min(x.x.length,x.y.length,x.z.length,x.value.length),x._x=l(x.x,x._len),x._y=l(x.y,x._len),x._z=l(x.z,x._len),x._value=l(x.value,x._len);var p=k(x);x._gridFill=p.fill,x._Xs=p.Xs,x._Ys=p.Ys,x._Zs=p.Zs,x._len=p.len;for(var s=1/0,e=-1/0,o=0;o<x._len;o++){var r=x._value[o];s=Math.min(s,r),e=Math.max(e,r)}x._minValues=s,x._maxValues=e,x._vMin=null==x.isomin?s:x.isomin,x._vMax=void 0===x.isomax||null===x.isomin?e:x.isomax,M(T,x,{vals:[x._vMin,x._vMax],containerStr:"",cLetter:"c"})}},22674:function($,I,t){"use strict";var M=t(9330).gl_mesh3d,k=t(81697).parseColorScale,l=t(78614),T=t(21081).extractOpts,x=t(90060),p=function(n,a){for(var i=a.length-1;i>0;i--){var c=Math.min(a[i],a[i-1]),h=Math.max(a[i],a[i-1]);if(h>c&&c<n&&n<=h)return{id:i,distRatio:(h-n)/(h-c)}}return{id:0,distRatio:0}};function s(n,a,i){this.scene=n,this.uid=i,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var e=s.prototype;e.handlePick=function(n){if(n.object===this.mesh){var a=n.data.index,c=this.data._meshY[a],h=this.data._meshZ[a],f=this.data._Ys.length,b=this.data._Zs.length,v=p(this.data._meshX[a],this.data._Xs).id,g=p(c,this.data._Ys).id,y=p(h,this.data._Zs).id,d=n.index=y+b*g+b*f*v;n.traceCoordinate=[this.data._meshX[d],this.data._meshY[d],this.data._meshZ[d],this.data._value[d]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&void 0!==m[d]?n.textLabel=m[d]:m&&(n.textLabel=m),!0}},e.update=function(n){var a=this.scene,i=a.fullSceneLayout;function c(b,v,g,y){return v.map(function(d){return b.d2l(d,0,y)*g})}this.data=r(n);var h={positions:x(c(i.xaxis,n._meshX,a.dataScale[0],n.xcalendar),c(i.yaxis,n._meshY,a.dataScale[1],n.ycalendar),c(i.zaxis,n._meshZ,a.dataScale[2],n.zcalendar)),cells:x(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},f=T(n);h.vertexIntensity=n._meshIntensity,h.vertexIntensityBounds=[f.min,f.max],h.colormap=k(n),this.mesh.update(h)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var o=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var a,i,c,h,f,b,v,g=n.surface.show,y=n.spaceframe.show,d=n.surface.fill,m=n.spaceframe.fill,w=!1,u=!1,S=0,_=n._Xs,E=n._Ys,L=n._Zs,C=_.length,P=E.length,z=L.length,j=o.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),R=function(De,fe,ge){switch(j){case 5:return ge+z*fe+z*P*De;case 4:return ge+z*De+z*C*fe;case 3:return fe+P*ge+P*z*De;case 2:return fe+P*De+P*C*ge;case 1:return De+C*ge+C*z*fe;default:return De+C*fe+C*P*ge}},V=n._minValues,D=n._maxValues,B=n._vMin,N=n._vMax;function U(De,fe,ge){for(var be=b.length,Ie=i;Ie<be;Ie++)if(De===c[Ie]&&fe===h[Ie]&&ge===f[Ie])return Ie;return-1}function J(){i=a}function Y(){c=[],h=[],f=[],b=[],a=0,J()}function q(De,fe,ge,be){return c.push(De),h.push(fe),f.push(ge),b.push(be),++a-1}function H(De,fe,ge){for(var be=[],Ie=0;Ie<De.length;Ie++)be[Ie]=De[Ie]*(1-ge)+ge*fe[Ie];return be}function X(De){v=De}function Q(De,fe){return"all"===De||null===De||De.indexOf(fe)>-1}function ne(De,fe){return null===De?fe:De}function re(De,fe,ge){J();var Ie,He,jt,Dt,Ye,Ze,Ne,Je,at,Se,ze,Ke,it,ct,mt,Ve=[fe],tt=[ge];if(v>=1)Ve=[fe],tt=[ge];else if(v>0){var nt=(Dt=ge,Se=H(Je=function(Lt,At,ht){for(var Et=[],gt=0;gt<Lt.length;gt++)Et[gt]=(Lt[gt]+At[gt]+ht[gt])/3;return Et}(Ye=(jt=fe)[0],Ze=jt[1],Ne=jt[2]),Ye,at=Math.sqrt(1-v)),{xyzv:[[Ye,Ze,ze=H(Je,Ze,at)],[ze,Se,Ye],[Ze,Ne,Ke=H(Je,Ne,at)],[Ke,ze,Ze],[Ne,Ye,Se],[Se,Ke,Ne]],abc:[[it=Dt[0],ct=Dt[1],-1],[-1,-1,it],[ct,mt=Dt[2],-1],[-1,-1,ct],[mt,it,-1],[-1,-1,mt]]});Ve=nt.xyzv,tt=nt.abc}for(var st=0;st<Ve.length;st++){fe=Ve[st],ge=tt[st];for(var dt=[],wt=0;wt<3;wt++){var _t=fe[wt][0],pt=fe[wt][1],Pt=fe[wt][2],St=fe[wt][3],Ot=ge[wt]>-1?ge[wt]:U(_t,pt,Pt);dt[wt]=Ot>-1?Ot:q(_t,pt,Pt,ne(De,St))}Ie=dt[1],He=dt[2],n._meshI.push(dt[0]),n._meshJ.push(Ie),n._meshK.push(He),++S}}function ae(De,fe,ge,be){var Ie=De[3];Ie<ge&&(Ie=ge),Ie>be&&(Ie=be);for(var He=(De[3]-Ie)/(De[3]-fe[3]+1e-9),Ve=[],tt=0;tt<4;tt++)Ve[tt]=(1-He)*De[tt]+He*fe[tt];return Ve}function se(De,fe,ge){return De>=fe&&De<=ge}function pe(De){var fe=.001*(N-B);return De>=B-fe&&De<=N+fe}function ke(De){for(var fe=[],ge=0;ge<4;ge++){var be=De[ge];fe.push([n._x[be],n._y[be],n._z[be],n._value[be]])}return fe}function me(De,fe,ge,be,Ie,He){He||(He=1),ge=[-1,-1,-1];var Ve=!1,tt=[se(fe[0][3],be,Ie),se(fe[1][3],be,Ie),se(fe[2][3],be,Ie)];if(!tt[0]&&!tt[1]&&!tt[2])return!1;var nt=function(dt,wt,_t){return pe(wt[0][3])&&pe(wt[1][3])&&pe(wt[2][3])?(re(dt,wt,_t),!0):He<3&&me(dt,wt,_t,B,N,++He)};if(tt[0]&&tt[1]&&tt[2])return nt(De,fe,ge)||Ve;var st=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(dt){if(tt[dt[0]]&&tt[dt[1]]&&!tt[dt[2]]){var wt=fe[dt[0]],_t=fe[dt[1]],pt=fe[dt[2]],Pt=ae(pt,wt,be,Ie),St=ae(pt,_t,be,Ie);Ve=nt(De,[St,Pt,wt],[-1,-1,ge[dt[0]]])||Ve,Ve=nt(De,[wt,_t,St],[ge[dt[0]],ge[dt[1]],-1])||Ve,st=!0}}),st||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(dt){if(tt[dt[0]]&&!tt[dt[1]]&&!tt[dt[2]]){var wt=fe[dt[0]],pt=fe[dt[2]],Pt=ae(fe[dt[1]],wt,be,Ie),St=ae(pt,wt,be,Ie);Ve=nt(De,[St,Pt,wt],[-1,-1,ge[dt[0]]])||Ve,st=!0}}),Ve}function le(De,fe,ge,be){var nt,st,dt,wt,Ie=!1,He=ke(fe),Ve=[se(He[0][3],ge,be),se(He[1][3],ge,be),se(He[2][3],ge,be),se(He[3][3],ge,be)];if(!(Ve[0]||Ve[1]||Ve[2]||Ve[3]))return Ie;if(Ve[0]&&Ve[1]&&Ve[2]&&Ve[3])return u&&(nt=De,st=He,dt=fe,(wt=function(_t,pt,Pt){re(nt,[st[_t],st[pt],st[Pt]],[dt[_t],dt[pt],dt[Pt]])})(0,1,2),wt(3,0,1),wt(2,3,0),Ie=void wt(1,2,3)||Ie),Ie;var tt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(nt){if(Ve[nt[0]]&&Ve[nt[1]]&&Ve[nt[2]]&&!Ve[nt[3]]){var st=He[nt[0]],dt=He[nt[1]],wt=He[nt[2]],_t=He[nt[3]];if(u)Ie=re(De,[st,dt,wt],[fe[nt[0]],fe[nt[1]],fe[nt[2]]])||Ie;else{var pt=ae(_t,st,ge,be),Pt=ae(_t,dt,ge,be),St=ae(_t,wt,ge,be);Ie=re(null,[pt,Pt,St],[-1,-1,-1])||Ie}tt=!0}}),tt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(nt){if(Ve[nt[0]]&&Ve[nt[1]]&&!Ve[nt[2]]&&!Ve[nt[3]]){var st=He[nt[0]],dt=He[nt[1]],wt=He[nt[2]],_t=He[nt[3]],pt=ae(wt,st,ge,be),Pt=ae(wt,dt,ge,be),St=ae(_t,dt,ge,be),Ot=ae(_t,st,ge,be);u?(Ie=re(De,[st,Ot,pt],[fe[nt[0]],-1,-1])||Ie,Ie=re(De,[dt,Pt,St],[fe[nt[1]],-1,-1])||Ie):(Dt=[pt,Pt,St,Ot],Ye=[-1,-1,-1,-1],(Ze=function(Ne,Je,at){re(null,[Dt[Ne],Dt[Je],Dt[at]],[Ye[Ne],Ye[Je],Ye[at]])})(0,1,2),Ie=void Ze(2,3,0)||Ie),tt=!0}var Dt,Ye,Ze}),tt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(nt){if(Ve[nt[0]]&&!Ve[nt[1]]&&!Ve[nt[2]]&&!Ve[nt[3]]){var st=He[nt[0]],wt=He[nt[2]],_t=He[nt[3]],pt=ae(He[nt[1]],st,ge,be),Pt=ae(wt,st,ge,be),St=ae(_t,st,ge,be);u?(Ie=re(De,[st,pt,Pt],[fe[nt[0]],-1,-1])||Ie,Ie=re(De,[st,Pt,St],[fe[nt[0]],-1,-1])||Ie,Ie=re(De,[st,St,pt],[fe[nt[0]],-1,-1])||Ie):Ie=re(null,[pt,Pt,St],[-1,-1,-1])||Ie,tt=!0}})),Ie}function ue(De,fe,ge,be,Ie,He,Ve,tt,nt,st,dt){var wt=!1;return w&&(Q(De,"A")&&(wt=le(null,[fe,ge,be,He],st,dt)||wt),Q(De,"B")&&(wt=le(null,[ge,be,Ie,nt],st,dt)||wt),Q(De,"C")&&(wt=le(null,[ge,He,Ve,nt],st,dt)||wt),Q(De,"D")&&(wt=le(null,[be,He,tt,nt],st,dt)||wt),Q(De,"E")&&(wt=le(null,[ge,be,He,nt],st,dt)||wt)),u&&(wt=le(De,[ge,be,He,nt],st,dt)||wt),wt}function Ee(De,fe,ge,be,Ie,He,Ve,tt){return[!0===tt[0]||me(De,ke([fe,ge,be]),[fe,ge,be],He,Ve),!0===tt[1]||me(De,ke([be,Ie,fe]),[be,Ie,fe],He,Ve)]}function de(De,fe,ge,be,Ie,He,Ve,tt,nt){return tt?Ee(De,fe,ge,Ie,be,He,Ve,nt):Ee(De,ge,Ie,be,fe,He,Ve,nt)}function xe(De,fe,ge,be,Ie,He,Ve){var tt,nt,st,dt,wt=!1,_t=function(){wt=me(De,[tt,nt,st],[-1,-1,-1],Ie,He)||wt,wt=me(De,[st,dt,tt],[-1,-1,-1],Ie,He)||wt},pt=Ve[0],Pt=Ve[1],St=Ve[2];return pt&&(tt=H(ke([R(fe,ge-0,be-0)])[0],ke([R(fe-1,ge-0,be-0)])[0],pt),nt=H(ke([R(fe,ge-0,be-1)])[0],ke([R(fe-1,ge-0,be-1)])[0],pt),st=H(ke([R(fe,ge-1,be-1)])[0],ke([R(fe-1,ge-1,be-1)])[0],pt),dt=H(ke([R(fe,ge-1,be-0)])[0],ke([R(fe-1,ge-1,be-0)])[0],pt),_t()),Pt&&(tt=H(ke([R(fe-0,ge,be-0)])[0],ke([R(fe-0,ge-1,be-0)])[0],Pt),nt=H(ke([R(fe-0,ge,be-1)])[0],ke([R(fe-0,ge-1,be-1)])[0],Pt),st=H(ke([R(fe-1,ge,be-1)])[0],ke([R(fe-1,ge-1,be-1)])[0],Pt),dt=H(ke([R(fe-1,ge,be-0)])[0],ke([R(fe-1,ge-1,be-0)])[0],Pt),_t()),St&&(tt=H(ke([R(fe-0,ge-0,be)])[0],ke([R(fe-0,ge-0,be-1)])[0],St),nt=H(ke([R(fe-0,ge-1,be)])[0],ke([R(fe-0,ge-1,be-1)])[0],St),st=H(ke([R(fe-1,ge-1,be)])[0],ke([R(fe-1,ge-1,be-1)])[0],St),dt=H(ke([R(fe-1,ge-0,be)])[0],ke([R(fe-1,ge-0,be-1)])[0],St),_t()),wt}function Te(De,fe,ge,be,Ie,He,Ve,tt,nt,st,dt,wt){var _t=De;return wt?(w&&"even"===De&&(_t=null),ue(_t,fe,ge,be,Ie,He,Ve,tt,nt,st,dt)):(w&&"odd"===De&&(_t=null),ue(_t,nt,tt,Ve,He,Ie,be,ge,fe,st,dt))}function we(De,fe,ge,be,Ie){for(var He=[],Ve=0,tt=0;tt<fe.length;tt++)for(var nt=fe[tt],st=1;st<z;st++)for(var dt=1;dt<P;dt++)He.push(de(De,R(nt,dt-1,st-1),R(nt,dt-1,st),R(nt,dt,st-1),R(nt,dt,st),ge,be,(nt+dt+st)%2,Ie&&Ie[Ve]?Ie[Ve]:[])),Ve++;return He}function K(De,fe,ge,be,Ie){for(var He=[],Ve=0,tt=0;tt<fe.length;tt++)for(var nt=fe[tt],st=1;st<C;st++)for(var dt=1;dt<z;dt++)He.push(de(De,R(st-1,nt,dt-1),R(st,nt,dt-1),R(st-1,nt,dt),R(st,nt,dt),ge,be,(st+nt+dt)%2,Ie&&Ie[Ve]?Ie[Ve]:[])),Ve++;return He}function oe(De,fe,ge,be,Ie){for(var He=[],Ve=0,tt=0;tt<fe.length;tt++)for(var nt=fe[tt],st=1;st<P;st++)for(var dt=1;dt<C;dt++)He.push(de(De,R(dt-1,st-1,nt),R(dt-1,st,nt),R(dt,st-1,nt),R(dt,st,nt),ge,be,(dt+st+nt)%2,Ie&&Ie[Ve]?Ie[Ve]:[])),Ve++;return He}function he(De,fe,ge){for(var be=1;be<z;be++)for(var Ie=1;Ie<P;Ie++)for(var He=1;He<C;He++)Te(De,R(He-1,Ie-1,be-1),R(He-1,Ie-1,be),R(He-1,Ie,be-1),R(He-1,Ie,be),R(He,Ie-1,be-1),R(He,Ie-1,be),R(He,Ie,be-1),R(He,Ie,be),fe,ge,(He+Ie+be)%2)}function ye(De,fe,ge,be,Ie,He){for(var Ve=[],nt=0;nt<fe.length;nt++)for(var st=fe[nt],dt=1;dt<z;dt++)for(var wt=1;wt<P;wt++)Ve.push(xe(De,st,wt,dt,ge,be,Ie[nt]));return Ve}function Me(De,fe,ge,be,Ie,He){for(var Ve=[],nt=0;nt<fe.length;nt++)for(var st=fe[nt],dt=1;dt<C;dt++)for(var wt=1;wt<z;wt++)Ve.push(xe(De,dt,st,wt,ge,be,Ie[nt]));return Ve}function Re(De,fe,ge,be,Ie,He){for(var Ve=[],nt=0;nt<fe.length;nt++)for(var st=fe[nt],dt=1;dt<P;dt++)for(var wt=1;wt<C;wt++)Ve.push(xe(De,wt,dt,st,ge,be,Ie[nt]));return Ve}function Pe(De,fe){for(var ge=[],be=De;be<fe;be++)ge.push(be);return ge}return function(){Y(),function(){for(var nt=0;nt<C;nt++)for(var st=0;st<P;st++)for(var dt=0;dt<z;dt++){var wt=R(nt,st,dt);q(n._x[wt],n._y[wt],n._z[wt],n._value[wt])}}();var De=null;if(y&&m&&(X(m),u=!0,he(De,B,N),u=!1),g&&d){X(d);for(var fe=n.surface.pattern,ge=n.surface.count,be=0;be<ge;be++){var Ie=1===ge?.5:be/(ge-1),He=(1-Ie)*B+Ie*N,Ve=Math.abs(He-V)>Math.abs(He-D)?[V,He]:[He,D];w=!0,he(fe,Ve[0],Ve[1]),w=!1}}var tt=[[Math.min(B,D),Math.max(B,D)],[Math.min(V,N),Math.max(V,N)]];["x","y","z"].forEach(function(nt){for(var st=[],dt=0;dt<tt.length;dt++){var wt=0,_t=tt[dt][0],pt=tt[dt][1],Pt=n.slices[nt];if(Pt.show&&Pt.fill){X(Pt.fill);var St=[],Ot=[],jt=[];if(Pt.locations.length)for(var Dt=0;Dt<Pt.locations.length;Dt++){var Ye=p(Pt.locations[Dt],"x"===nt?_:"y"===nt?E:L);0===Ye.distRatio?St.push(Ye.id):Ye.id>0&&(Ot.push(Ye.id),jt.push("x"===nt?[Ye.distRatio,0,0]:"y"===nt?[0,Ye.distRatio,0]:[0,0,Ye.distRatio]))}else St=Pe(1,"x"===nt?C-1:"y"===nt?P-1:z-1);Ot.length>0&&(st[wt]="x"===nt?ye(De,Ot,_t,pt,jt):"y"===nt?Me(De,Ot,_t,pt,jt):Re(De,Ot,_t,pt,jt),wt++),St.length>0&&(st[wt]="x"===nt?we(De,St,_t,pt,st[wt]):"y"===nt?K(De,St,_t,pt,st[wt]):oe(De,St,_t,pt,st[wt]),wt++)}var Ze=n.caps[nt];Ze.show&&Ze.fill&&(X(Ze.fill),st[wt]="x"===nt?we(De,[0,C-1],_t,pt,st[wt]):"y"===nt?K(De,[0,P-1],_t,pt,st[wt]):oe(De,[0,z-1],_t,pt,st[wt]),wt++)}}),0===S&&Y(),n._meshX=c,n._meshY=h,n._meshZ=f,n._meshIntensity=b,n._Xs=_,n._Ys=E,n._Zs=L}(),n}$.exports={findNearestOnAxis:p,generateIsoMeshes:r,createIsosurfaceTrace:function(n,a){var c=M({gl:n.glplot.gl}),h=new s(n,c,a.uid);return c._trace=h,h.update(a),n.glplot.add(c),h}}},82738:function($,I,t){"use strict";var M=t(71828),k=t(73972),l=t(16249),T=t(1586);function x(p,s,e,o,r){var n=r("isomin"),a=r("isomax");null!=a&&null!=n&&n>a&&(s.isomin=null,s.isomax=null);var i=r("x"),c=r("y"),h=r("z"),f=r("value");i&&i.length&&c&&c.length&&h&&h.length&&f&&f.length?(k.getComponentMethod("calendars","handleTraceDefaults")(p,s,["x","y","z"],o),r("valuehoverformat"),["x","y","z"].forEach(function(b){r(b+"hoverformat");var v="caps."+b;r(v+".show")&&r(v+".fill");var g="slices."+b;r(g+".show")&&(r(g+".fill"),r(g+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(b){r(b)}),T(p,s,o,r,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}$.exports={supplyDefaults:function(p,s,e,o){x(p,s,0,o,function(r,n){return M.coerce(p,s,l,r,n)})},supplyIsoDefaults:x}},64943:function($,I,t){"use strict";$.exports={attributes:t(16249),supplyDefaults:t(82738).supplyDefaults,calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function($,I,t){"use strict";var M=t(50693),k=t(12663).axisHoverFormat,l=t(5386).f,T=t(54532),x=t(9012),p=t(1426).extendFlat;$.exports=p({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:p({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:p({},T.lightposition.x,{dflt:1e5}),y:p({},T.lightposition.y,{dflt:1e5}),z:p({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:p({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:p({},x.hoverinfo,{editType:"calc"}),showlegend:p({},x.showlegend,{dflt:!1})})},82932:function($,I,t){"use strict";var M=t(78803);$.exports=function(k,l){l.intensity&&M(k,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function($,I,t){"use strict";var M=t(9330).gl_mesh3d,k=t(9330).delaunay_triangulate,l=t(9330).alpha_shape,T=t(9330).convex_hull,x=t(81697).parseColorScale,p=t(78614),s=t(21081).extractOpts,e=t(90060);function o(h,f,b){this.scene=h,this.uid=b,this.mesh=f,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=o.prototype;function n(h){for(var f=[],b=h.length,v=0;v<b;v++)f[v]=p(h[v]);return f}function a(h,f,b,v){for(var g=[],y=f.length,d=0;d<y;d++)g[d]=h.d2l(f[d],0,v)*b;return g}function i(h){for(var f=[],b=h.length,v=0;v<b;v++)f[v]=Math.round(h[v]);return f}function c(h,f){for(var b=h.length,v=0;v<b;v++)if(h[v]<=-.5||h[v]>=f-.5)return!1;return!0}r.handlePick=function(h){if(h.object===this.mesh){var f=h.index=h.data.index;h.traceCoordinate=h.data._cellCenter?h.data.dataCoordinate:[this.data.x[f],this.data.y[f],this.data.z[f]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&void 0!==b[f]?h.textLabel=b[f]:b&&(h.textLabel=b),!0}},r.update=function(h){var f=this.scene,b=f.fullSceneLayout;this.data=h;var v,g=h.x.length,y=e(a(b.xaxis,h.x,f.dataScale[0],h.xcalendar),a(b.yaxis,h.y,f.dataScale[1],h.ycalendar),a(b.zaxis,h.z,f.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!c(h.i,g)||!c(h.j,g)||!c(h.k,g))return;v=e(i(h.i),i(h.j),i(h.k))}else v=0===h.alphahull?T(y):h.alphahull>0?l(h.alphahull,y):function(u,S){for(var _=["x","y","z"].indexOf(u),E=[],L=S.length,C=0;C<L;C++)E[C]=[S[C][(_+1)%3],S[C][(_+2)%3]];return k(E)}(h.delaunayaxis,y);var d={positions:y,cells:v,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:p(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var m=s(h);this.color="#fff";var w=h.intensitymode;d[w+"Intensity"]=h.intensity,d[w+"IntensityBounds"]=[m.min,m.max],d.colormap=x(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],d.vertexColors=n(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],d.cellColors=n(h.facecolor)):(this.color=h.color,d.meshColor=p(h.color));this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(h,f){var v=M({gl:h.glplot.gl}),g=new o(h,v,f.uid);return v._trace=g,g.update(f),h.glplot.add(v),g}},58669:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(1586),T=t(2418);$.exports=function(x,p,s,e){function o(n,a){return k.coerce(x,p,T,n,a)}function r(n){var a=n.map(function(i){var c=o(i);return c&&k.isArrayOrTypedArray(c)?c:null});return a.every(function(i){return i&&i.length===a[0].length})&&a}r(["x","y","z"])?(r(["i","j","k"]),(!p.i||p.j&&p.k)&&(!p.j||p.k&&p.i)&&(!p.k||p.i&&p.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(x,p,["x","y","z"],e),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){o(n)}),o("contour.show")&&(o("contour.color"),o("contour.width")),"intensity"in x?(o("intensity"),o("intensitymode"),l(x,p,e,o,{prefix:"",cLetter:"c"})):(p.showscale=!1,"facecolor"in x?o("facecolor"):"vertexcolor"in x?o("vertexcolor"):o("color",s)),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),p._length=null):p.visible=!1):p.visible=!1}},21164:function($,I,t){"use strict";$.exports={attributes:t(2418),supplyDefaults:t(58669),calc:t(82932),colorbar:{min:"cmin",max:"cmax"},plot:t(91134),moduleType:"trace",name:"mesh3d",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function($,I,t){"use strict";var M=t(71828).extendFlat,k=t(82196),l=t(12663).axisHoverFormat,T=t(79952).P,x=t(77914),p=t(22372),s=p.INCREASING.COLOR,e=p.DECREASING.COLOR,o=k.line;function r(n){return{line:{color:M({},o.color,{dflt:n}),width:o.width,dash:T,editType:"style"},editType:"style"}}$.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},o.width,{}),dash:M({},T,{}),editType:"style"},increasing:r(s),decreasing:r(e),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},x.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function($,I,t){"use strict";var M=t(71828),k=M._,l=t(89298),T=t(42973),x=t(50606).BADNUM;function p(e,o,r,n){return{o:e,h:o,l:r,c:n}}function s(e,o,r,n,a,i){for(var c=a.makeCalcdata(o,"open"),h=a.makeCalcdata(o,"high"),f=a.makeCalcdata(o,"low"),b=a.makeCalcdata(o,"close"),v=Array.isArray(o.text),g=Array.isArray(o.hovertext),y=!0,d=null,m=!!o.xperiodalignment,w=[],u=0;u<n.length;u++){var S=n[u],_=c[u],E=h[u],L=f[u],C=b[u];if(S!==x&&_!==x&&E!==x&&L!==x&&C!==x){C===_?null!==d&&C!==d&&(y=C>d):y=C>_,d=C;var P=i(_,E,L,C);P.pos=S,P.yc=(_+C)/2,P.i=u,P.dir=y?"increasing":"decreasing",P.x=P.pos,P.y=[L,E],m&&(P.orig_p=r[u]),v&&(P.tx=o.text[u]),g&&(P.htx=o.hovertext[u]),w.push(P)}else w.push({pos:S,empty:!0})}return o._extremes[a._id]=l.findExtremes(a,M.concat(f,h),{padded:!0}),w.length&&(w[0].t={labels:{open:k(e,"open:")+" ",high:k(e,"high:")+" ",low:k(e,"low:")+" ",close:k(e,"close:")+" "}}),w}$.exports={calc:function(e,o){var r=l.getFromId(e,o.xaxis),n=l.getFromId(e,o.yaxis),a=function(b,v,g){var y=g._minDiff;if(!y){var d,m=b._fullData,w=[];for(y=1/0,d=0;d<m.length;d++){var u=m[d];if("ohlc"===u.type&&!0===u.visible&&u.xaxis===v._id){w.push(u);var S=v.makeCalcdata(u,"x");u._origX=S;var _=T(g,v,"x",S).vals;u._xcalc=_;var E=M.distinctVals(_).minDiff;E&&isFinite(E)&&(y=Math.min(y,E))}}for(y===1/0&&(y=1),d=0;d<w.length;d++)w[d]._minDiff=y}return y*g.tickwidth}(e,r,o),i=o._minDiff;o._minDiff=null;var c=o._origX;o._origX=null;var h=o._xcalc;o._xcalc=null;var f=s(e,o,c,h,n,p);return o._extremes[r._id]=l.findExtremes(r,h,{vpad:i/2}),f.length?(M.extendFlat(f[0].t,{wHover:i/2,tickLen:a}),f):[{t:{empty:!0}}]},calcCommon:s}},16169:function($,I,t){"use strict";var M=t(71828),k=t(14555),l=t(73927),T=t(2522);function x(p,s,e,o){e(o+".line.color"),e(o+".line.width",s.line.width),e(o+".line.dash",s.line.dash)}$.exports=function(p,s,e,o){function r(n,a){return M.coerce(p,s,T,n,a)}k(p,s,r,o)?(l(p,s,o,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),x(0,s,r,"increasing"),x(0,s,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),o._requestRangeslider[s.xaxis]=!0):s.visible=!1}},66449:function($,I,t){"use strict";var M=t(89298),k=t(71828),l=t(30211),T=t(7901),x=t(71828).fillText,p=t(22372),s={increasing:p.INCREASING.SYMBOL,decreasing:p.DECREASING.SYMBOL};function e(n,a,i,c){var h,f,b=n.cd,v=n.xa,g=b[0].trace,y=b[0].t,d=g.type,m="ohlc"===d?"l":"min",w="ohlc"===d?"h":"max",u=y.bPos||0,S=y.bdPos||y.tickLen,_=y.wHover,E=Math.min(1,S/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));function L(D){var B=D.pos+u-a;return l.inbox(B-_,B+_,h)}function C(D){var B=D[m],N=D[w];return B===N||l.inbox(B-i,N-i,h)}function P(D){return(L(D)+C(D))/2}h=n.maxHoverDistance-E,f=n.maxSpikeDistance-E;var z=l.getDistanceFunction(c,L,C,P);if(l.getClosest(b,z,n),!1===n.index)return null;var j=b[n.index];if(j.empty)return null;var R=g[j.dir],V=R.line.color;return n.color=T.opacity(V)&&R.line.width?V:R.fillcolor,n.x0=v.c2p(j.pos+u-S,!0),n.x1=v.c2p(j.pos+u+S,!0),n.xLabelVal=void 0!==j.orig_p?j.orig_p:j.pos,n.spikeDistance=P(j)*f/h,n.xSpike=v.c2p(j.pos,!0),n}function o(n,a,i,c){var h=n.cd,f=n.ya,b=h[0].trace,v=h[0].t,g=[],y=e(n,a,i,c);if(!y)return[];var d=h[y.index].hi||b.hoverinfo,m=d.split("+");if("all"!==d&&-1===m.indexOf("y"))return[];for(var w=["high","open","close","low"],u={},S=0;S<w.length;S++){var _,E=w[S],L=b[E][y.index],C=f.c2p(L,!0);L in u?(_=u[L]).yLabel+="<br>"+v.labels[E]+M.hoverLabelText(f,L,b.yhoverformat):((_=k.extendFlat({},y)).y0=_.y1=C,_.yLabelVal=L,_.yLabel=v.labels[E]+M.hoverLabelText(f,L,b.yhoverformat),_.name="",g.push(_),u[L]=_)}return g}function r(n,a,i,c){var h=n.cd,f=n.ya,b=h[0].trace,v=h[0].t,g=e(n,a,i,c);if(!g)return[];var y=h[g.index],d=g.index=y.i,m=y.dir;function w(P){return v.labels[P]+M.hoverLabelText(f,b[P][d],b.yhoverformat)}var u=y.hi||b.hoverinfo,S=u.split("+"),_="all"===u,E=_||-1!==S.indexOf("y"),L=_||-1!==S.indexOf("text"),C=E?[w("open"),w("high"),w("low"),w("close")+"  "+s[m]]:[];return L&&x(y,b,C),g.extraText=C.join("<br>"),g.y0=g.y1=f.c2p(y.yc,!0),[g]}$.exports={hoverPoints:function(n,a,i,c){return n.cd[0].trace.hoverlabel.split?o(n,a,i,c):r(n,a,i,c)},hoverSplit:o,hoverOnPoints:r}},54186:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"ohlc",basePlotModule:t(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:t(2522),supplyDefaults:t(16169),calc:t(3485).calc,plot:t(72314),style:t(53101),hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},14555:function($,I,t){"use strict";var M=t(73972),k=t(71828);$.exports=function(l,T,x,p){var s=x("x"),e=x("open"),o=x("high"),r=x("low"),n=x("close");if(x("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x"],p),e&&o&&r&&n){var a=Math.min(e.length,o.length,r.length,n.length);return s&&(a=Math.min(a,k.minRowLength(s))),T._length=a,a}}},72314:function($,I,t){"use strict";var M=t(39898),k=t(71828);$.exports=function(l,T,x,p){var s=T.yaxis,e=T.xaxis,o=!!e.rangebreaks;k.makeTraceGroups(p,x,"trace ohlc").each(function(r){var n=M.select(this),a=r[0],i=a.t;if(!0!==a.trace.visible||i.empty)n.remove();else{var c=i.tickLen,h=n.selectAll("path").data(k.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(f){if(f.empty)return"M0,0Z";var b=e.c2p(f.pos-c,!0),v=e.c2p(f.pos+c,!0),g=o?(b+v)/2:e.c2p(f.pos,!0);return"M"+b+","+s.c2p(f.o,!0)+"H"+g+"M"+g+","+s.c2p(f.h,!0)+"V"+s.c2p(f.l,!0)+"M"+v+","+s.c2p(f.c,!0)+"H"+g})}})}},67324:function($){"use strict";$.exports=function(I,t){var M,k=I.cd,l=I.xaxis,T=I.yaxis,x=[],p=k[0].t.bPos||0;if(!1===t)for(M=0;M<k.length;M++)k[M].selected=0;else for(M=0;M<k.length;M++){var s=k[M];t.contains([l.c2p(s.pos+p),T.c2p(s.yc)],null,s.i,I)?(x.push({pointNumber:s.i,x:l.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return x}},53101:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(7901);$.exports=function(T,x,p){var s=p||M.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(e){return e[0].trace.opacity}),s.each(function(e){var o=e[0].trace;M.select(this).selectAll("path").each(function(r){if(!r.empty){var n=o[r.dir].line;M.select(this).style("fill","none").call(l.stroke,n.color).call(k.dashLine,n.dash,n.width).style("opacity",o.selectedpoints&&!r.selected?.3:1)}})})}},99506:function($,I,t){"use strict";var M=t(1426).extendFlat,k=t(9012),l=t(41940),T=t(50693),x=t(5386).f,p=t(27670).Y,s=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:p({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:x({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function($,I,t){"use strict";var M=t(27659).a0,k=t(45784),l="parcats";I.name=l,I.plot=function(T,x,p,s){var e=M(T.calcdata,l);e.length&&k(T,e[0],p,s)},I.clean=function(T,x,p,s){var e=s._has&&s._has("parcats"),o=x._has&&x._has("parcats");e&&!o&&s._paperdiv.selectAll(".parcats").remove()}},28699:function($,I,t){"use strict";var M=t(28984).wrap,k=t(52075).hasColorscale,l=t(78803),T=t(75744),x=t(91424),p=t(71828),s=t(92770);function e(n,a,i){n.valueInds.push(a),n.count+=i}function o(n,a,i){return{categoryInds:n,color:a,rawColor:i,valueInds:[],count:0}}function r(n,a,i){n.valueInds.push(a),n.count+=i}$.exports=function(n,a){var i=p.filterVisible(a.dimensions);if(0===i.length)return[];var c,h,f,b=i.map(function(U){var J;if("trace"===U.categoryorder)J=null;else if("array"===U.categoryorder)J=U.categoryarray;else{J=T(U.values);for(var Y=!0,q=0;q<J.length;q++)if(!s(J[q])){Y=!1;break}J.sort(Y?p.sorterAsc:void 0),"category descending"===U.categoryorder&&(J=J.reverse())}return function(H,X){X=null==X?[]:X.map(function(me){return me});var Q={},ne={},re=[];X.forEach(function(me,le){Q[me]=0,ne[me]=le});for(var ae=0;ae<H.length;ae++){var se,pe=H[ae];void 0===Q[pe]?(Q[pe]=1,se=X.push(pe)-1,ne[pe]=se):(Q[pe]++,se=ne[pe]),re.push(se)}var ke=X.map(function(me){return Q[me]});return{uniqueValues:X,uniqueCounts:ke,inds:re}}(U.values,J)});c=p.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(U){var J;if(function(q){for(var H=new Array(q.length),X=0;X<q.length;X++){if(q[X]<0||q[X]>=q.length||void 0!==H[q[X]])return!1;H[q[X]]=!0}return!0}(U.map(function(q){return q.displayindex})))for(J=0;J<U.length;J++)U[J]._displayindex=U[J].displayindex;else for(J=0;J<U.length;J++)U[J]._displayindex=J}(i),i.forEach(function(U,J){!function(Y,q){Y._categoryarray=q.uniqueValues,Y._ticktext=null==Y.ticktext?[]:Y.ticktext.slice();for(var H=Y._ticktext.length;H<q.uniqueValues.length;H++)Y._ticktext.push(q.uniqueValues[H])}(U,b[J])});var v,g=a.line;g?(k(a,"line")&&l(n,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),v=x.tryColorscale(g)):v=p.identity;var y,d,m,w,u,S=i[0].values.length,_={},E=b.map(function(U){return U.inds});for(f=0,y=0;y<S;y++){var L=[];for(d=0;d<E.length;d++)L.push(E[d][y]);f+=h=c[y%c.length];var C=(m=y,w=void 0,u=void 0,p.isArrayOrTypedArray(g.color)?u=w=g.color[m%g.color.length]:w=g.color,{color:v(w),rawColor:u}),P=L+"-"+C.rawColor;void 0===_[P]&&(_[P]=o(L,C.color,C.rawColor)),r(_[P],y,h)}var z,U,J,Y,q,j=i.map(function(U,J){return{dimensionInd:J,containerInd:U._index,displayInd:U._displayindex,dimensionLabel:U.label,count:f,categories:[],dragX:null}});for(y=0;y<S;y++)for(h=c[y%c.length],d=0;d<j.length;d++){var R=j[d].containerInd,V=b[d].inds[y],D=j[d].categories;void 0===D[V]&&(D[V]={dimensionInd:d,categoryInd:z=V,categoryValue:a.dimensions[R]._categoryarray[V],displayInd:z,categoryLabel:a.dimensions[R]._ticktext[V],valueInds:[],count:0,dragY:null}),e(D[V],y,h)}return M((J=_,Y=f,q=(U=j).map(function(H){return H.categories.length}).reduce(function(H,X){return Math.max(H,X)}),{dimensions:U,paths:J,trace:void 0,maxCats:q,count:Y}))}},14647:function($,I,t){"use strict";var M=t(71828),k=t(52075).hasColorscale,l=t(1586),T=t(27670).c,x=t(85501),p=t(99506),s=t(94397);function e(o,r){function n(v,g){return M.coerce(o,r,p.dimensions,v,g)}var a=n("values"),i=n("visible");if(a&&a.length||(i=r.visible=!1),i){n("label"),n("displayindex",r._index);var c,h=o.categoryarray,f=Array.isArray(h)&&h.length>0;f&&(c="array");var b=n("categoryorder",c);"array"===b?(n("categoryarray"),n("ticktext")):(delete o.categoryarray,delete o.ticktext),f||"array"!==b||(r.categoryorder="trace")}}$.exports=function(o,r,n,a){function i(v,g){return M.coerce(o,r,p,v,g)}var c=x(o,r,{name:"dimensions",handleItemDefaults:e}),h=function(v,g,y,d,m){m("line.shape"),m("line.hovertemplate");var w=m("line.color",d.colorway[0]);if(k(v,"line")&&M.isArrayOrTypedArray(w)){if(w.length)return m("line.colorscale"),l(v,g,d,m,{prefix:"line.",cLetter:"c"}),w.length;g.line.color=y}return 1/0}(o,r,n,a,i);T(r,a,i),Array.isArray(c)&&c.length||(r.visible=!1),s(r,c,"values",h),i("hoveron"),i("hovertemplate"),i("arrangement"),i("bundlecolors"),i("sortpaths"),i("counts");var f={family:a.font.family,size:Math.round(a.font.size),color:a.font.color};M.coerceFont(i,"labelfont",f);var b={family:a.font.family,size:Math.round(a.font.size/1.2),color:a.font.color};M.coerceFont(i,"tickfont",b)}},94873:function($,I,t){"use strict";$.exports={attributes:t(99506),supplyDefaults:t(14647),calc:t(28699),plot:t(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t(27677),categories:["noOpacity"],meta:{}}},45460:function($,I,t){"use strict";var M=t(39898),k=t(81684).k4,l=t(72391),T=t(30211),x=t(71828),p=x.strTranslate,s=t(91424),e=t(84267),o=t(63893);function r(Y,q,H,X){var Q=q._context.staticPlot,ne=Y.map(D.bind(0,q,H)),re=X.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",Q?"none":"all");var ae=re.selectAll("g.trace.parcats").data(ne,n),se=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(Te){return p(Te.x,Te.y)}),se.append("g").attr("class","paths");var pe=ae.select("g.paths").selectAll("path.path").data(function(Te){return Te.paths},n);pe.attr("fill",function(Te){return Te.model.color});var ke=pe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Te){return Te.model.color}).attr("fill-opacity",0);g(ke),pe.attr("d",function(Te){return Te.svgD}),ke.empty()||pe.sort(i),pe.exit().remove(),pe.on("mouseover",c).on("mouseout",h).on("click",v),se.append("g").attr("class","dimensions");var me=ae.select("g.dimensions").selectAll("g.dimension").data(function(Te){return Te.dimensions},n);me.enter().append("g").attr("class","dimension"),me.attr("transform",function(Te){return p(Te.x,0)}),me.exit().remove();var le=me.selectAll("g.category").data(function(Te){return Te.categories},n),ue=le.enter().append("g").attr("class","category");le.attr("transform",function(Te){return p(0,Te.y)}),ue.append("rect").attr("class","catrect").attr("pointer-events","none"),le.select("rect.catrect").attr("fill","none").attr("width",function(Te){return Te.width}).attr("height",function(Te){return Te.height}),d(ue);var Ee=le.selectAll("rect.bandrect").data(function(Te){return Te.bands},n);Ee.each(function(){x.raiseToTop(this)}),Ee.attr("fill",function(Te){return Te.color});var de=Ee.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Te){return Te.color}).attr("fill-opacity",0);Ee.attr("fill",function(Te){return Te.color}).attr("width",function(Te){return Te.width}).attr("height",function(Te){return Te.height}).attr("y",function(Te){return Te.y}).attr("cursor",function(Te){return"fixed"===Te.parcatsViewModel.arrangement?"default":"perpendicular"===Te.parcatsViewModel.arrangement?"ns-resize":"move"}),m(de),Ee.exit().remove(),ue.append("text").attr("class","catlabel").attr("pointer-events","none");var xe=q._fullLayout.paper_bgcolor;le.select("text.catlabel").attr("text-anchor",function(Te){return a(Te)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",o.makeTextShadow(xe)).style("fill","rgb(0, 0, 0)").attr("x",function(Te){return a(Te)?Te.width+5:-5}).attr("y",function(Te){return Te.height/2}).text(function(Te){return Te.model.categoryLabel}).each(function(Te){s.font(M.select(this),Te.parcatsViewModel.categorylabelfont),o.convertToTspans(M.select(this),q)}),ue.append("text").attr("class","dimlabel"),le.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Te){return"fixed"===Te.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Te){return Te.width/2}).attr("y",-5).text(function(Te,we){return 0===we?Te.parcatsViewModel.model.dimensions[Te.model.dimensionInd].dimensionLabel:null}).each(function(Te){s.font(M.select(this),Te.parcatsViewModel.labelfont)}),le.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),le.exit().remove(),me.call(M.behavior.drag().origin(function(Te){return{x:Te.x,y:0}}).on("dragstart",C).on("drag",P).on("dragend",z)),ae.each(function(Te){Te.traceSelection=M.select(this),Te.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),Te.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function n(Y){return Y.key}function a(Y){return Y.model.dimensionInd===Y.parcatsViewModel.dimensions[Y.parcatsViewModel.dimensions.length-1].model.dimensionInd}function i(Y,q){return Y.model.rawColor>q.model.rawColor?1:Y.model.rawColor<q.model.rawColor?-1:0}function c(Y){if(!Y.parcatsViewModel.dragDimension&&-1===Y.parcatsViewModel.hoverinfoItems.indexOf("skip")){x.raiseToTop(this),y(M.select(this));var q=f(Y),H=b(Y);if(Y.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:M.event,constraints:H}),-1===Y.parcatsViewModel.hoverinfoItems.indexOf("none")){var X,Q,ne,re=M.mouse(this)[0],ae=Y.parcatsViewModel.graphDiv,se=Y.parcatsViewModel.trace,pe=ae._fullLayout,ke=pe._paperdiv.node().getBoundingClientRect(),me=Y.parcatsViewModel.graphDiv.getBoundingClientRect();for(ne=0;ne<Y.leftXs.length-1;ne++)if(Y.leftXs[ne]+Y.dimWidths[ne]-2<=re&&re<=Y.leftXs[ne+1]+2){var le=Y.parcatsViewModel.dimensions[ne];X=(le.x+le.width+Y.parcatsViewModel.dimensions[ne+1].x)/2,Q=(Y.topYs[ne]+Y.topYs[ne+1]+Y.height)/2;break}var Ee=Y.parcatsViewModel.x+X,de=Y.parcatsViewModel.y+Q,xe=e.mostReadable(Y.model.color,["black","white"]),Te=Y.model.count,we=Te/Y.parcatsViewModel.model.count,K={countLabel:Te,probabilityLabel:we.toFixed(3)},oe=[];-1!==Y.parcatsViewModel.hoverinfoItems.indexOf("count")&&oe.push(["Count:",K.countLabel].join(" ")),-1!==Y.parcatsViewModel.hoverinfoItems.indexOf("probability")&&oe.push(["P:",K.probabilityLabel].join(" "));var he=oe.join("<br>"),ye=M.mouse(ae)[0];T.loneHover({trace:se,x:Ee-ke.left+me.left,y:de-ke.top+me.top,text:he,color:Y.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:xe,idealAlign:ye<Ee?"right":"left",hovertemplate:(se.line||{}).hovertemplate,hovertemplateLabels:K,eventData:[{data:se._input,fullData:se,count:Te,probability:we}]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:ae})}}}function h(Y){if(!Y.parcatsViewModel.dragDimension&&(g(M.select(this)),T.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),Y.parcatsViewModel.pathSelection.sort(i),-1===Y.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var q=f(Y),H=b(Y);Y.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:M.event,constraints:H})}}function f(Y){for(var q=[],H=j(Y.parcatsViewModel),X=0;X<Y.model.valueInds.length;X++)q.push({curveNumber:H,pointNumber:Y.model.valueInds[X]});return q}function b(Y){for(var q={},H=Y.parcatsViewModel.model.dimensions,X=0;X<H.length;X++){var Q=H[X];q[Q.containerInd]=Q.categories[Y.model.categoryInds[X]].categoryValue}return void 0!==Y.model.rawColor&&(q.color=Y.model.rawColor),q}function v(Y){if(-1===Y.parcatsViewModel.hoverinfoItems.indexOf("skip")){var q=f(Y),H=b(Y);Y.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:M.event,constraints:H})}}function g(Y){Y.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(Y){Y.attr("fill-opacity",.8).attr("stroke",function(q){return e.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function d(Y){Y.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(Y){Y.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(Y){var H=Y.categoryViewModel.model.dimensionInd,X=Y.categoryViewModel.model.categoryInd;return Y.parcatsViewModel.pathSelection.filter(function(Q){return Q.model.categoryInds[H]===X&&Q.model.color===Y.color})}function u(Y,q,H){var X=M.select(Y).datum(),Q=X.categoryViewModel.model,ne=X.parcatsViewModel.graphDiv,re=M.select(Y.parentNode).selectAll("rect.bandrect"),ae=[];re.each(function(pe){w(pe).each(function(ke){Array.prototype.push.apply(ae,f(ke))})});var se={};se[Q.dimensionInd]=Q.categoryValue,ne.emit(q,{points:ae,event:H,constraints:se})}function S(Y,q,H){var X=M.select(Y).datum(),Q=X.categoryViewModel.model,ne=X.parcatsViewModel.graphDiv,re=w(X),ae=[];re.each(function(pe){Array.prototype.push.apply(ae,f(pe))});var se={};se[Q.dimensionInd]=Q.categoryValue,void 0!==X.rawColor&&(se.color=X.rawColor),ne.emit(q,{points:ae,event:H,constraints:se})}function _(Y,q,H){Y._fullLayout._calcInverseTransform(Y);var X,Q,ne=Y._fullLayout._invScaleX,re=Y._fullLayout._invScaleY,ae=M.select(H.parentNode).select("rect.catrect"),se=ae.node().getBoundingClientRect(),pe=ae.datum(),ke=pe.parcatsViewModel,le=ke.trace,ue=se.top+se.height/2;ke.dimensions.length>1&&ke.model.dimensions[pe.model.dimensionInd].displayInd===ke.dimensions.length-1?(X=se.left,Q="left"):(X=se.left+se.width,Q="right");var Ee=pe.model.count,de=pe.model.categoryLabel,xe=Ee/pe.parcatsViewModel.model.count,Te={countLabel:Ee,categoryLabel:de,probabilityLabel:xe.toFixed(3)},we=[];-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("count")&&we.push(["Count:",Te.countLabel].join(" ")),-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("probability")&&we.push(["P("+Te.categoryLabel+"):",Te.probabilityLabel].join(" "));var K=we.join("<br>");return{trace:le,x:ne*(X-q.left),y:re*(ue-q.top),text:K,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Q,hovertemplate:le.hovertemplate,hovertemplateLabels:Te,eventData:[{data:le._input,fullData:le,count:Ee,category:de,probability:xe}]}}function E(Y){if(!Y.parcatsViewModel.dragDimension&&-1===Y.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(M.mouse(this)[1]<-1)return;var q,H=Y.parcatsViewModel.graphDiv,X=H._fullLayout,Q=X._paperdiv.node().getBoundingClientRect(),ne=Y.parcatsViewModel.hoveron,re=this;"color"===ne?(y(pe=w(se=M.select(ae=re).datum())),pe.each(function(){x.raiseToTop(this)}),M.select(ae.parentNode).selectAll("rect.bandrect").filter(function(ke){return ke.color===se.color}).each(function(){x.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)}),S(re,"plotly_hover",M.event)):(function(ae){M.select(ae.parentNode).selectAll("rect.bandrect").each(function(se){var pe=w(se);y(pe),pe.each(function(){x.raiseToTop(this)})}),M.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(re),u(re,"plotly_hover",M.event)),-1===Y.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ne?q=_(H,Q,re):"color"===ne?q=function(ae,se,pe){ae._fullLayout._calcInverseTransform(ae);var ke,me,le=ae._fullLayout._invScaleX,ue=ae._fullLayout._invScaleY,Ee=pe.getBoundingClientRect(),de=M.select(pe).datum(),xe=de.categoryViewModel,Te=xe.parcatsViewModel,K=Te.trace,oe=Ee.y+Ee.height/2;Te.dimensions.length>1&&Te.model.dimensions[xe.model.dimensionInd].displayInd===Te.dimensions.length-1?(ke=Ee.left,me="left"):(ke=Ee.left+Ee.width,me="right");var he=xe.model.categoryLabel,ye=de.parcatsViewModel.model.count,Me=0;de.categoryViewModel.bands.forEach(function(tt){tt.color===de.color&&(Me+=tt.count)});var Re=xe.model.count,Pe=0;Te.pathSelection.each(function(tt){tt.model.color===de.color&&(Pe+=tt.model.count)});var De=Me/ye,fe=Me/Pe,ge=Me/Re,be={countLabel:ye,categoryLabel:he,probabilityLabel:De.toFixed(3)},Ie=[];-1!==xe.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ie.push(["Count:",be.countLabel].join(" ")),-1!==xe.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Ie.push("P(color \u2229 "+he+"): "+be.probabilityLabel),Ie.push("P("+he+" | color): "+fe.toFixed(3)),Ie.push("P(color | "+he+"): "+ge.toFixed(3)));var He=Ie.join("<br>"),Ve=e.mostReadable(de.color,["black","white"]);return{trace:K,x:le*(ke-se.left),y:ue*(oe-se.top),text:He,color:de.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:me,hovertemplate:K.hovertemplate,hovertemplateLabels:be,eventData:[{data:K._input,fullData:K,category:he,count:ye,probability:De,categorycount:Re,colorcount:Pe,bandcolorcount:Me}]}}(H,Q,re):"dimension"===ne&&(q=function(ae,se,pe){var ke=[];return M.select(pe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ke.push(_(ae,se,this))}),ke}(H,Q,re)),q&&T.loneHover(q,{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:H}))}var ae,se,pe}function L(Y){var q=Y.parcatsViewModel;q.dragDimension||(g(q.pathSelection),d(q.dimensionSelection.selectAll("g.category")),m(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(i),-1!==q.hoverinfoItems.indexOf("skip"))||("color"===Y.parcatsViewModel.hoveron?S(this,"plotly_unhover",M.event):u(this,"plotly_unhover",M.event))}function C(Y){"fixed"!==Y.parcatsViewModel.arrangement&&(Y.dragDimensionDisplayInd=Y.model.displayInd,Y.initialDragDimensionDisplayInds=Y.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),Y.dragHasMoved=!1,Y.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var H=M.mouse(this)[0],X=M.mouse(this)[1];-2<=H&&H<=q.width+2&&-2<=X&&X<=q.height+2&&(Y.dragCategoryDisplayInd=q.model.displayInd,Y.initialDragCategoryDisplayInds=Y.model.categories.map(function(Q){return Q.displayInd}),q.model.dragY=q.y,x.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<X&&X<=Q.y+Q.height&&(Y.potentialClickBand=this)}))}),Y.parcatsViewModel.dragDimension=Y,T.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(Y){if("fixed"!==Y.parcatsViewModel.arrangement&&(Y.dragHasMoved=!0,null!==Y.dragDimensionDisplayInd)){var q=Y.dragDimensionDisplayInd,H=q-1,X=q+1,Q=Y.parcatsViewModel.dimensions[q];if(null!==Y.dragCategoryDisplayInd){var ne=Q.categories[Y.dragCategoryDisplayInd];ne.model.dragY+=M.event.dy;var re=ne.model.dragY,ae=ne.model.displayInd,se=Q.categories,pe=se[ae-1],ke=se[ae+1];void 0!==pe&&re<pe.y+pe.height/2&&(ne.model.displayInd=pe.model.displayInd,pe.model.displayInd=ae),void 0!==ke&&re+ne.height>ke.y+ke.height/2&&(ne.model.displayInd=ke.model.displayInd,ke.model.displayInd=ae),Y.dragCategoryDisplayInd=ne.model.displayInd}if(null===Y.dragCategoryDisplayInd||"freeform"===Y.parcatsViewModel.arrangement){Q.model.dragX=M.event.x;var me=Y.parcatsViewModel.dimensions[H],le=Y.parcatsViewModel.dimensions[X];void 0!==me&&Q.model.dragX<me.x+me.width&&(Q.model.displayInd=me.model.displayInd,me.model.displayInd=q),void 0!==le&&Q.model.dragX+Q.width>le.x&&(Q.model.displayInd=le.model.displayInd,le.model.displayInd=Y.dragDimensionDisplayInd),Y.dragDimensionDisplayInd=Q.model.displayInd}U(Y.parcatsViewModel),N(Y.parcatsViewModel),V(Y.parcatsViewModel),R(Y.parcatsViewModel)}}function z(Y){if("fixed"!==Y.parcatsViewModel.arrangement&&null!==Y.dragDimensionDisplayInd){M.select(this).selectAll("text").attr("font-weight","normal");var q={},H=j(Y.parcatsViewModel),X=Y.parcatsViewModel.model.dimensions.map(function(ke){return ke.displayInd}),Q=Y.initialDragDimensionDisplayInds.some(function(ke,me){return ke!==X[me]});Q&&X.forEach(function(ke,me){q["dimensions["+Y.parcatsViewModel.model.dimensions[me].containerInd+"].displayindex"]=ke});var ne=!1;if(null!==Y.dragCategoryDisplayInd){var re=Y.model.categories.map(function(ke){return ke.displayInd});if(ne=Y.initialDragCategoryDisplayInds.some(function(ke,me){return ke!==re[me]})){var ae=Y.model.categories.slice().sort(function(ke,me){return ke.displayInd-me.displayInd}),se=ae.map(function(ke){return ke.categoryValue}),pe=ae.map(function(ke){return ke.categoryLabel});q["dimensions["+Y.model.containerInd+"].categoryarray"]=[se],q["dimensions["+Y.model.containerInd+"].ticktext"]=[pe],q["dimensions["+Y.model.containerInd+"].categoryorder"]="array"}}-1===Y.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!Y.dragHasMoved&&Y.potentialClickBand&&("color"===Y.parcatsViewModel.hoveron?S(Y.potentialClickBand,"plotly_click",M.event.sourceEvent):u(Y.potentialClickBand,"plotly_click",M.event.sourceEvent)),Y.model.dragX=null,null!==Y.dragCategoryDisplayInd&&(Y.parcatsViewModel.dimensions[Y.dragDimensionDisplayInd].categories[Y.dragCategoryDisplayInd].model.dragY=null,Y.dragCategoryDisplayInd=null),Y.dragDimensionDisplayInd=null,Y.parcatsViewModel.dragDimension=null,Y.dragHasMoved=null,Y.potentialClickBand=null,U(Y.parcatsViewModel),N(Y.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){V(Y.parcatsViewModel,!0),R(Y.parcatsViewModel,!0)}).each("end",function(){(Q||ne)&&l.restyle(Y.parcatsViewModel.graphDiv,q,[H])})}}function j(Y){for(var q,H=Y.graphDiv._fullData,X=0;X<H.length;X++)if(Y.key===H[X].uid){q=X;break}return q}function R(Y,q){var H;void 0===q&&(q=!1),Y.pathSelection.data(function(X){return X.paths},n),(H=Y.pathSelection,q?H.transition():H).attr("d",function(X){return X.svgD})}function V(Y,q){function H(re){return q?re.transition():re}void 0===q&&(q=!1),Y.dimensionSelection.data(function(re){return re.dimensions},n);var X=Y.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},n);H(Y.dimensionSelection).attr("transform",function(re){return p(re.x,0)}),H(X).attr("transform",function(re){return p(0,re.y)}),X.select(".dimlabel").text(function(re,ae){return 0===ae?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),X.select(".catlabel").attr("text-anchor",function(re){return a(re)?"start":"end"}).attr("x",function(re){return a(re)?re.width+5:-5}).each(function(re){var ae,se;a(re)?(ae=re.width+5,se="start"):(ae=-5,se="end"),M.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",se)});var Q=X.selectAll("rect.bandrect").data(function(re){return re.bands},n),ne=Q.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);Q.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),m(ne),Q.each(function(){x.raiseToTop(this)}),Q.exit().remove()}function D(Y,q,H){var X,Q=H[0],ne=q.margin||{l:80,r:80,t:100,b:80},re=Q.trace,ae=re.domain,se=q.width,pe=q.height,ke=Math.floor(se*(ae.x[1]-ae.x[0])),me=Math.floor(pe*(ae.y[1]-ae.y[0])),le=ae.x[0]*se+ne.l,ue=q.height-ae.y[1]*q.height+ne.t,Ee=re.line.shape;X="all"===re.hoverinfo?["count","probability"]:(re.hoverinfo||"").split("+");var de={trace:re,key:re.uid,model:Q,x:le,y:ue,width:ke,height:me,hoveron:re.hoveron,hoverinfoItems:X,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Ee,dragDimension:null,margin:ne,paths:[],dimensions:[],graphDiv:Y,traceSelection:null,pathSelection:null,dimensionSelection:null};return Q.dimensions&&(U(de),N(de)),de}function B(Y,q,H,X,Q){var ne,re,ae=[],se=[];for(re=0;re<H.length-1;re++)ne=k(H[re]+Y[re],Y[re+1]),ae.push(ne(Q)),se.push(ne(1-Q));var pe="M "+Y[0]+","+q[0];for(pe+="l"+H[0]+",0 ",re=1;re<H.length;re++)pe+="C"+ae[re-1]+","+q[re-1]+" "+se[re-1]+","+q[re]+" "+Y[re]+","+q[re],pe+="l"+H[re]+",0 ";for(pe+="l0,"+X+" ",pe+="l -"+H[H.length-1]+",0 ",re=H.length-2;re>=0;re--)pe+="C"+se[re]+","+(q[re+1]+X)+" "+ae[re]+","+(q[re]+X)+" "+(Y[re]+H[re])+","+(q[re]+X),pe+="l-"+H[re]+",0 ";return pe+"Z"}function N(Y){var q=Y.dimensions,H=Y.model,X=q.map(function(be){return be.categories.map(function(Ie){return Ie.y})}),Q=Y.model.dimensions.map(function(be){return be.categories.map(function(Ie){return Ie.displayInd})}),ne=Y.model.dimensions.map(function(be){return be.displayInd}),re=Y.dimensions.map(function(be){return be.model.dimensionInd}),ae=q.map(function(be){return be.x}),se=q.map(function(be){return be.width}),pe=[];for(var ke in H.paths)H.paths.hasOwnProperty(ke)&&pe.push(H.paths[ke]);function me(be){var Ie=be.categoryInds.map(function(He,Ve){return Q[Ve][He]});return re.map(function(He){return Ie[He]})}pe.sort(function(be,Ie){var He=me(be),Ve=me(Ie);return"backward"===Y.sortpaths&&(He.reverse(),Ve.reverse()),He.push(be.valueInds[0]),Ve.push(Ie.valueInds[0]),Y.bundlecolors&&(He.unshift(be.rawColor),Ve.unshift(Ie.rawColor)),He<Ve?-1:He>Ve?1:0});for(var le=new Array(pe.length),ue=q[0].model.count,Ee=q[0].categories.map(function(be){return be.height}).reduce(function(be,Ie){return be+Ie}),de=0;de<pe.length;de++){var xe,Te=pe[de];xe=ue>0?Ee*(Te.count/ue):0;for(var we,K=new Array(X.length),oe=0;oe<Te.categoryInds.length;oe++){var ye=Q[oe][Te.categoryInds[oe]],Me=ne[oe];K[Me]=X[Me][ye],X[Me][ye]+=xe;var Re=Y.dimensions[Me].categories[ye],Pe=Re.bands.length,De=Re.bands[Pe-1];if(void 0===De||Te.rawColor!==De.rawColor){var fe=void 0===De?0:De.y+De.height;Re.bands.push({key:fe,color:Te.color,rawColor:Te.rawColor,height:xe,width:Re.width,count:Te.count,y:fe,categoryViewModel:Re,parcatsViewModel:Y})}else{var ge=Re.bands[Pe-1];ge.height+=xe,ge.count+=Te.count}}we=B(ae,K,se,xe,"hspline"===Y.pathShape?.5:0),le[de]={key:Te.valueInds[0],model:Te,height:xe,leftXs:ae,topYs:K,dimWidths:se,svgD:we,parcatsViewModel:Y}}Y.paths=le}function U(Y){var q=Y.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});q.sort(function(re,ae){return re.displayInd-ae.displayInd});var H=[];for(var X in q)H.push(J(Y,Y.model.dimensions[q[X].dimensionInd]));Y.dimensions=H}function J(Y,q){var H,X=Y.model.dimensions.length;H=40+(X>1?(Y.width-80-16)/(X-1):0)*q.displayInd;var ne,re,ae,pe,ke=[],me=Y.model.maxCats,le=q.categories.length,ue=q.count,Ee=Y.height-8*(me-1),de=8*(me-le)/2,xe=q.categories.map(function(Te){return{displayInd:Te.displayInd,categoryInd:Te.categoryInd}});for(xe.sort(function(Te,we){return Te.displayInd-we.displayInd}),pe=0;pe<le;pe++)ae={key:(re=q.categories[xe[pe].categoryInd]).valueInds[0],model:re,width:16,height:ne=ue>0?re.count/ue*Ee:0,y:null!==re.dragY?re.dragY:de,bands:[],parcatsViewModel:Y},de=de+ne+8,ke.push(ae);return{key:q.dimensionInd,x:null!==q.dragX?q.dragX:H,y:0,width:16,model:q,categories:ke,parcatsViewModel:Y,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(Y,q,H,X){r(H,Y,X,q)}},45784:function($,I,t){"use strict";var M=t(45460);$.exports=function(k,l,T,x){var p=k._fullLayout,e=p._size;M(k,p._paper,l,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},T,x)}},73362:function($,I,t){"use strict";var M=t(50693),k=t(13838),l=t(41940),T=t(27670).Y,x=t(1426).extendFlat,p=t(44467).templatedArray;$.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:p("dimension",{label:{valType:"string",editType:"plot"},tickvals:x({},k.tickvals,{editType:"plot"}),ticktext:x({},k.ticktext,{editType:"plot"}),tickformat:x({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:x({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function($,I,t){"use strict";var M=t(25706),k=t(39898),l=t(28984).keyFun,T=t(28984).repeat,x=t(71828).sorterAsc,p=t(71828).strTranslate,s=M.bar.snapRatio;function e(_,E){return _*(1-s)+E*s}var o=M.bar.snapClose;function r(_,E){return _*(1-o)+E*o}function n(_,E,L,C){if(function(J,Y){for(var q=0;q<Y.length;q++)if(J>=Y[q][0]&&J<=Y[q][1])return!0;return!1}(L,C))return L;var P=_?-1:1,z=0,j=E.length-1;if(P<0){var R=z;z=j,j=R}for(var V=E[z],D=V,B=z;P*B<P*j;B+=P){var N=B+P,U=E[N];if(P*L<P*r(V,U))return e(V,D);if(P*L<P*U||N===j)return e(U,V);D=V,V=U}}function a(_){_.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function i(_){_.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(_){if(!_.brush.filterSpecified)return"0,"+_.height;for(var E,L,C,P=h(_.brush.filter.getConsolidated(),_.height),z=[0],j=P.length?P[0][0]:null,R=0;R<P.length;R++)L=(E=P[R])[1]-E[0],z.push(j),z.push(L),(C=R+1)<P.length&&(j=P[C][0]-E[1]);return z.push(_.height),z}function h(_,E){return _.map(function(L){return L.map(function(C){return Math.max(0,C*E)}).sort(x)})}function f(){k.select(document.body).style("cursor",null)}function b(_){_.attr("stroke-dasharray",c)}function v(_,E){var L=k.select(_).selectAll(".highlight, .highlight-shadow");b(E?L.transition().duration(M.bar.snapDuration).each("end",E):L)}function g(_,E){var L,C=_.brush,P=NaN,z={};if(C.filterSpecified){var j=_.height,R=C.filter.getConsolidated(),V=h(R,j),D=NaN,B=NaN,N=NaN;for(L=0;L<=V.length;L++){var U=V[L];if(U&&U[0]<=E&&E<=U[1]){D=L;break}if(B=L?L-1:NaN,U&&U[0]>E){N=L;break}}if(P=D,isNaN(P)&&(P=isNaN(B)||isNaN(N)?isNaN(B)?N:B:E-V[B][1]<V[N][0]-E?B:N),!isNaN(P)){var J=V[P],Y=function(Q,ne){var re=M.bar.handleHeight;if(!(ne>Q[1]+re||ne<Q[0]-re))return ne>=.9*Q[1]+.1*Q[0]?"n":ne<=.9*Q[0]+.1*Q[1]?"s":"ns"}(J,E);Y&&(z.interval=R[P],z.intervalPix=J,z.region=Y)}}if(_.ordinal&&!z.region){var q=_.unitTickvals,H=_.unitToPaddedPx.invert(E);for(L=0;L<q.length;L++){var X=[.25*q[Math.max(L-1,0)]+.75*q[L],.25*q[Math.min(L+1,q.length-1)]+.75*q[L]];if(H>=X[0]&&H<=X[1]){z.clickableOrdinalRange=X;break}}}return z}function y(_,E){k.event.sourceEvent.stopPropagation();var L=E.height-k.mouse(_)[1]-2*M.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.newExtent=C.grabbingBar?[L-C.grabPoint,L+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):[C.startExtent,E.unitToPaddedPx.invert(L)].sort(x),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),v(_.parentNode)}function d(_,E){var L=g(E,E.height-k.mouse(_)[1]-2*M.verticalPadding),C="crosshair";L.clickableOrdinalRange?C="pointer":L.region&&(C=L.region+"-resize"),k.select(document.body).style("cursor",C)}function m(_){_.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||d(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||f()}).call(k.behavior.drag().on("dragstart",function(E){!function(L,C){k.event.sourceEvent.stopPropagation();var P=C.height-k.mouse(L)[1]-2*M.verticalPadding,z=C.unitToPaddedPx.invert(P),j=C.brush,R=g(C,P),V=R.interval,D=j.svgBrush;if(D.wasDragged=!1,D.grabbingBar="ns"===R.region,D.grabbingBar){var B=V.map(C.unitToPaddedPx);D.grabPoint=P-B[0]-M.verticalPadding,D.barLength=B[1]-B[0]}D.clickableOrdinalRange=R.clickableOrdinalRange,D.stayingIntervals=C.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],V&&(D.stayingIntervals=D.stayingIntervals.filter(function(N){return N[0]!==V[0]&&N[1]!==V[1]})),D.startExtent=R.region?V["s"===R.region?1:0]:z,C.parent.inBrushDrag=!0,D.brushStartCallback()}(this,E)}).on("drag",function(E){y(this,E)}).on("dragend",function(E){!function(L,C){var P=C.brush,z=P.filter,j=P.svgBrush;j._dragging||(d(L,C),y(L,C),C.brush.svgBrush.wasDragged=!1),j._dragging=!1,k.event.sourceEvent.stopPropagation();var R=j.grabbingBar;if(j.grabbingBar=!1,j.grabLocation=void 0,C.parent.inBrushDrag=!1,f(),!j.wasDragged)return j.wasDragged=void 0,j.clickableOrdinalRange?P.filterSpecified&&C.multiselect?j.extent.push(j.clickableOrdinalRange):(j.extent=[j.clickableOrdinalRange],P.filterSpecified=!0):R?(j.extent=j.stayingIntervals,0===j.extent.length&&u(P)):u(P),j.brushCallback(C),v(L.parentNode),void j.brushEndCallback(P.filterSpecified?z.getConsolidated():[]);var V=function(){z.set(z.getConsolidated())};if(C.ordinal){var D=C.unitTickvals;D[D.length-1]<D[0]&&D.reverse(),j.newExtent=[n(0,D,j.newExtent[0],j.stayingIntervals),n(1,D,j.newExtent[1],j.stayingIntervals)];var B=j.newExtent[1]>j.newExtent[0];j.extent=j.stayingIntervals.concat(B?[j.newExtent]:[]),j.extent.length||u(P),j.brushCallback(C),B?v(L.parentNode,V):(V(),v(L.parentNode))}else V();j.brushEndCallback(P.filterSpecified?z.getConsolidated():[])}(this,E)}))}function w(_,E){return _[0]-E[0]}function u(_){_.filterSpecified=!1,_.svgBrush.extent=[[-1/0,1/0]]}function S(_){for(var E,L=_.slice(),C=[],P=L.shift();P;){for(E=P.slice();(P=L.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);C.push(E)}return 1===C.length&&C[0][0]>C[0][1]&&(C=[]),C}$.exports={makeBrush:function(_,E,L,C,P,z){var j,V,D,B,R=(B=[],{set:function(N){1===(B=N.map(function(U){return U.slice().sort(x)}).sort(w)).length&&B[0][0]===-1/0&&B[0][1]===1/0&&(B=[[0,-1]]),V=S(B),D=B.reduce(function(U,J){return[Math.min(U[0],J[0]),Math.max(U[1],J[1])]},[1/0,-1/0])},get:function(){return B.slice()},getConsolidated:function(){return V},getBounds:function(){return D}});return R.set(L),{filter:R,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(j=P,function(V){var D=V.brush,N=D.svgBrush.extent.map(function(J){return J.slice()}).slice();D.filter.set(N),j()}),brushEndCallback:z}}},ensureAxisBrush:function(_,E,L){var C=_.selectAll("."+M.cn.axisBrush).data(T,l);C.enter().append("g").classed(M.cn.axisBrush,!0),function(P,z,j){var R=j._context.staticPlot,V=P.selectAll(".background").data(T);V.enter().append("rect").classed("background",!0).call(a).call(i).style("pointer-events",R?"none":"auto").attr("transform",p(0,M.verticalPadding)),V.call(m).attr("height",function(N){return N.height-M.verticalPadding});var D=P.selectAll(".highlight-shadow").data(T);D.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",z).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),D.attr("y1",function(N){return N.height}).call(b);var B=P.selectAll(".highlight").data(T);B.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(N){return N.height}).call(b)}(C,E,L)},cleanRanges:function(_,E){if(Array.isArray(_[0])?(_=_.map(function(C){return C.sort(x)}),_=E.multiselect?S(_.sort(w)):[_[0]]):_=[_.sort(x)],E.tickvals){var L=E.tickvals.slice().sort(x);if(!(_=_.map(function(C){var P=[n(0,L,C[0],[]),n(1,L,C[1],[])];if(P[1]>P[0])return P}).filter(function(C){return C})).length)return}return _.length>1?_:_[0]}}},71791:function($,I,t){"use strict";$.exports={attributes:t(73362),supplyDefaults:t(3633),calc:t(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function($,I,t){"use strict";var M=t(39898),k=t(27659).a0,l=t(21341),T=t(77922);I.name="parcoords",I.plot=function(x){var p=k(x.calcdata,"parcoords")[0];p.length&&l(x,p)},I.clean=function(x,p,s,e){var o=e._has&&e._has("parcoords"),r=p._has&&p._has("parcoords");o&&!r&&(e._paperdiv.selectAll(".parcoords").remove(),e._glimages.selectAll("*").remove())},I.toSVG=function(x){var p=x._fullLayout._glimages,s=M.select(x).selectAll(".svg-container");s.filter(function(e,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this,o=e.toDataURL("image/png");p.append("svg:image").attr({xmlns:T.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function($,I,t){"use strict";var M=t(71828).isArrayOrTypedArray,k=t(21081),l=t(28984).wrap;$.exports=function(T,x){var p,s;return k.hasColorscale(x,"line")&&M(x.line.color)?(p=x.line.color,s=k.extractOpts(x.line).colorscale,k.calc(T,x,{vals:p,containerStr:"line",cLetter:"c"})):(p=function(e){for(var o=new Array(e),r=0;r<e;r++)o[r]=.5;return o}(x._length),s=[[0,x.line.color],[1,x.line.color]]),l({lineColor:p,cscale:s})}},25706:function($){"use strict";$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function($,I,t){"use strict";var M=t(71828),k=t(52075).hasColorscale,l=t(1586),T=t(27670).c,x=t(85501),p=t(89298),s=t(73362),e=t(57920),o=t(25706).maxDimensionCount,r=t(94397);function n(a,i,c,h){function f(d,m){return M.coerce(a,i,s.dimensions,d,m)}var b=f("values"),v=f("visible");if(b&&b.length||(v=i.visible=!1),v){f("label"),f("tickvals"),f("ticktext"),f("tickformat");var g=f("range");i._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},p.setConvert(i._ax,h.layout),f("multiselect");var y=f("constraintrange");y&&(i.constraintrange=e.cleanRanges(y,i))}}$.exports=function(a,i,c,h){function f(d,m){return M.coerce(a,i,s,d,m)}var b=a.dimensions;Array.isArray(b)&&b.length>o&&(M.log("parcoords traces support up to "+o+" dimensions at the moment"),b.splice(o));var v=x(a,i,{name:"dimensions",layout:h,handleItemDefaults:n}),g=function(d,m,w,u,S){var _=S("line.color",w);if(k(d,"line")&&M.isArrayOrTypedArray(_)){if(_.length)return S("line.colorscale"),l(d,m,u,S,{prefix:"line.",cLetter:"c"}),_.length;m.line.color=w}return 1/0}(a,i,c,h,f);T(i,h,f),Array.isArray(v)&&v.length||(i.visible=!1),r(i,v,"values",g);var y={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};M.coerceFont(f,"labelfont",y),M.coerceFont(f,"tickfont",y),M.coerceFont(f,"rangefont",y),f("labelangle"),f("labelside"),f("unselected.line.color"),f("unselected.line.opacity")}},1602:function($,I,t){"use strict";var M=t(71828).isTypedArray;I.convertTypedArray=function(k){return M(k)?Array.prototype.slice.call(k):k},I.isOrdinal=function(k){return!!k.tickvals},I.isVisible=function(k){return k.visible||!("visible"in k)}},67618:function($,I,t){"use strict";var M=t(71791);M.plot=t(21341),$.exports=M},83398:function($,I,t){"use strict";var M=t(56068),k=M(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),l=M(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),T=t(25706).maxDimensionCount,x=t(71828),p=new Uint8Array(4),s=new Uint8Array(4),e={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(v,g,y,d,m){var w=v._gl;w.enable(w.SCISSOR_TEST),w.scissor(g,y,d,m),v.clear({color:[0,0,0,0],depth:1})}function r(v,g,y,d,m,w){var u=w.key;y.drawCompleted||(v.read({x:0,y:0,width:1,height:1,data:p}),y.drawCompleted=!0),function S(_){var E=Math.min(d,m-_*d);0===_&&(window.cancelAnimationFrame(y.currentRafs[u]),delete y.currentRafs[u],o(v,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),y.clearOnly||(w.count=2*E,w.offset=2*_*d,g(w),_*d+E<m&&(y.currentRafs[u]=window.requestAnimationFrame(function(){S(_+1)})),y.drawCompleted=!1)}(0)}function n(v,g){for(var y=new Array(256),d=0;d<256;d++)y[d]=v(d/255).concat(g);return y}function a(v,g){return(v>>>8*g)%256/255}function i(v,g,y){for(var d=new Array(8*g),m=0,w=0;w<g;w++)for(var u=0;u<2;u++)for(var S=0;S<4;S++){var _=4*v+S,E=y[64*w+_];63===_&&0===u&&(E*=-1),d[m++]=E}return d}function c(v){var g="0"+v;return g.substr(g.length-2)}function h(v){return v<T?"p"+c(v+1)+"_"+c(v+4):"colors"}function f(v,g,y,d,m,w,u,S,_,E,L,C,P,z){for(var j=[[],[]],R=0;R<64;R++)j[0][R]=R===m?1:0,j[1][R]=R===w?1:0;var V=v.lines.canvasOverdrag*z,D=v.domain,B=v.canvasWidth*z,N=v.canvasHeight*z,U=v.pad.l*z,J=v.pad.b*z,Y=v.layoutHeight*z,q=v.layoutWidth*z,H=v.deselectedLines.color,X=v.deselectedLines.opacity;return x.extendFlat({key:L,resolution:[B,N],viewBoxPos:[(u*=z)+V,S*=z],viewBoxSize:[_*=z,E*=z],i0:m,i1:w,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:C,contextColor:[H[0]/255,H[1]/255,H[2]/255,"auto"!==X?H[3]*X:Math.max(.00392156862745098,Math.pow(1/v.lines.color.length,.3333333333333333))],scissorX:(d===g?0:u+V)+(U-V)+q*D.x[0],scissorWidth:(d===y?B-u+V:_+.5)+(d===g?u+V:0),scissorY:S+J+Y*D.y[0],scissorHeight:E,viewportX:U-V+q*D.x[0],viewportY:J+Y*D.y[0],viewportWidth:B,viewportHeight:N},P)}function b(v){var g=2047,y=Math.max(0,Math.floor(v[0]*g),0),d=Math.min(g,Math.ceil(v[1]*g),g);return[Math.min(y,d),Math.max(y,d)]}$.exports=function(v,g){var y,m,w,u,S=g.context,_=g.pick,E=g.regl,L=E._gl,C=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),P=Math.max(C[0],Math.min(C[1],g.viewModel.plotGlPixelRatio)),z={currentRafs:{},drawCompleted:!0,clearOnly:!1},j=function(N){for(var U={},J=0;J<=T;J+=4)U[h(J)]=N.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return U}(E),R=E.texture(e),V=[];B(g);var D=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:k,frag:l,primitive:"lines",lineWidth:P,attributes:j,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:R,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function B(N){y=N.model,m=N.viewModel.dimensions.slice(),w=m[0]?m[0].values.length:0;var U=y.lines,J=_?U.color.map(function(q,H){return H/U.color.length}):U.color,Y=function(q,H,X){for(var ne=new Array(q*(T+4)),re=0,ae=0;ae<q;ae++){for(var se=0;se<T;se++)ne[re++]=se<H.length?H[se].paddedUnitValues[ae]:.5;ne[re++]=a(ae,2),ne[re++]=a(ae,1),ne[re++]=a(ae,0),ne[re++]=Math.max(1e-6,Math.min(.999999,X[ae]))}return ne}(w,m,J);(function(q,H,X){for(var Q=0;Q<=T;Q+=4)q[h(Q)](i(Q/4,H,X))})(j,w,Y),S||_||(R=E.texture(x.extendFlat({data:n(y.unitToColor,255)},e)))}return{render:function(N,U,J){var Y,q,H,X=N.length,Q=1/0,ne=-1/0;for(Y=0;Y<X;Y++)N[Y].dim0.canvasX<Q&&(Q=N[Y].dim0.canvasX,q=Y),N[Y].dim1.canvasX>ne&&(ne=N[Y].dim1.canvasX,H=Y);0===X&&o(E,0,0,y.canvasWidth,y.canvasHeight);var re=function(xe){var Te,we,K,oe=[[],[]];for(K=0;K<64;K++){var he=!xe&&K<m.length?m[K].brush.filter.getBounds():[-1/0,1/0];oe[0][K]=he[0],oe[1][K]=he[1]}var ye=new Array(16384);for(Te=0;Te<16384;Te++)ye[Te]=255;if(!xe)for(Te=0;Te<m.length;Te++){var Me=Te%8,Re=(Te-Me)/8,Pe=Math.pow(2,Me),De=m[Te].brush.filter.get();if(!(De.length<2)){var fe=b(De[0])[1];for(we=1;we<De.length;we++){var ge=b(De[we]);for(K=fe+1;K<ge[0];K++)ye[8*K+Re]&=~Pe;fe=Math.max(fe,ge[1])}}}var be={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ye};return u?u(be):u=E.texture(be),{maskTexture:u,maskHeight:2048,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}(S);for(Y=0;Y<X;Y++){var ae=N[Y],se=ae.dim0.crossfilterDimensionIndex,pe=ae.dim1.crossfilterDimensionIndex,ke=ae.canvasX,me=ae.canvasY,le=ke+ae.panelSizeX,ue=ae.plotGlPixelRatio;if(U||!V[se]||V[se][0]!==ke||V[se][1]!==le){V[se]=[ke,le];var Ee=f(y,q,H,Y,se,pe,ke,me,ae.panelSizeX,ae.panelSizeY,ae.dim0.crossfilterDimensionIndex,S?0:_?2:1,re,ue);z.clearOnly=J,r(E,D,z,U?y.lines.blockLineCount:w,w,Ee)}}},readPixel:function(N,U){return E.read({x:N,y:U,width:1,height:1,data:s}),s},readPixels:function(N,U,J,Y){var q=new Uint8Array(4*J*Y);return E.read({x:N,y:U,width:J,height:Y,data:q}),q},destroy:function(){for(var N in v.style["pointer-events"]="none",R.destroy(),u&&u.destroy(),j)j[N].destroy()},update:B}}},94397:function($){"use strict";$.exports=function(I,t,M,k){var l,T;for(k||(k=1/0),l=0;l<t.length;l++)(T=t[l]).visible&&(k=Math.min(k,T[M].length));for(k===1/0&&(k=0),I._length=k,l=0;l<t.length;l++)(T=t[l]).visible&&(T._length=k);return k}},17171:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=k.numberFormat,T=t(36652),x=t(89298),p=k.strRotate,s=k.strTranslate,e=t(63893),o=t(91424),r=t(21081),n=t(28984),a=n.keyFun,i=n.repeat,c=n.unwrap,h=t(1602),f=t(25706),b=t(57920),v=t(83398);function g(V,D,B){return k.aggNums(V,null,D,B)}function y(V,D){return m(g(Math.min,V,D),g(Math.max,V,D))}function d(V){var D=V.range;return D?m(D[0],D[1]):y(V.values,V._length)}function m(V,D){return!isNaN(V)&&isFinite(V)||(V=0),!isNaN(D)&&isFinite(D)||(D=0),V===D&&(0===V?(V-=1,D+=1):(V*=.9,D*=1.1)),[V,D]}function w(V,D,B,N,U){var J,Y,q=d(B);return N?M.scale.ordinal().domain(N.map((J=l(B.tickformat),Y=U,Y?function(H,X){return Y[X]??J(H)}:J))).range(N.map(function(H){return V-D+(H-q[0])/(q[1]-q[0])*(2*D-V)})):M.scale.linear().domain(q).range([V-D,D])}function u(V){if(V.tickvals){var D=d(V);return M.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(B){return(B-D[0])/(D[1]-D[0])}))}}function S(V){var D=V.map(function(U){return U[0]}),B=V.map(function(U){var J=T(U[1]);return M.rgb("rgb("+J[0]+","+J[1]+","+J[2]+")")}),N="rgb".split("").map(function(U){return M.scale.linear().clamp(!0).domain(D).range(B.map((J=U,function(Y){return Y[J]})));var J});return function(U){return N.map(function(J){return J(U)})}}function _(V){return V.dimensions.some(function(D){return D.brush.filterSpecified})}function E(V,D,B){var N=c(D),U=N.trace,J=h.convertTypedArray(N.lineColor),Y=U.line,q={color:T(U.unselected.line.color),opacity:U.unselected.line.opacity},H=r.extractOpts(Y),X=H.reversescale?r.flipScale(N.cscale):N.cscale,Q=U.domain,ne=U.dimensions,re=V.width,ae=U.labelangle,se=U.labelside,pe=U.labelfont,ke=U.tickfont,me=U.rangefont,le=k.extendDeepNoArrays({},Y,{color:J.map(M.scale.linear().domain(d({values:J,range:[H.min,H.max],_length:U._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),ue=Math.floor(re*(Q.x[1]-Q.x[0])),Ee=Math.floor(V.height*(Q.y[1]-Q.y[0])),de=V.margin||{l:80,r:80,t:100,b:80},xe=ue,Te=Ee;return{key:B,colCount:ne.filter(h.isVisible).length,dimensions:ne,tickDistance:f.tickDistance,unitToColor:S(X),lines:le,deselectedLines:q,labelAngle:ae,labelSide:se,labelFont:pe,tickFont:ke,rangeFont:me,layoutWidth:re,layoutHeight:V.height,domain:Q,translateX:Q.x[0]*re,translateY:V.height-Q.y[1]*V.height,pad:de,canvasWidth:xe*f.canvasPixelRatio+2*le.canvasOverdrag,canvasHeight:Te*f.canvasPixelRatio,width:xe,height:Te,canvasPixelRatio:f.canvasPixelRatio}}function L(V,D,B){var re,ae,N=B.width,U=B.height,J=B.dimensions,Y=B.canvasPixelRatio,q=function(re){return N*re/Math.max(1,B.colCount-1)},H=f.verticalPadding/U,X=(re=U,ae=f.verticalPadding,M.scale.linear().range([ae,re-ae])),Q={key:B.key,xScale:q,model:B,inBrushDrag:!1},ne={};return Q.dimensions=J.filter(h.isVisible).map(function(re,ae){var ye,Me,se=(ye=re,Me=H,M.scale.linear().domain(d(ye)).range([Me,1-Me])),pe=ne[re.label];ne[re.label]=(pe||0)+1;var ke=re.label+(pe?"__"+pe:""),me=re.constraintrange,le=me&&me.length;le&&!Array.isArray(me[0])&&(me=[me]);var ue=le?me.map(function(ye){return ye.map(se)}):[[-1/0,1/0]],Ee=re.values;Ee.length>re._length&&(Ee=Ee.slice(0,re._length));var de,xe=re.tickvals;function Te(ye,Me){return{val:ye,text:de[Me]}}function we(ye,Me){return ye.val-Me.val}if(Array.isArray(xe)&&xe.length){de=re.ticktext,Array.isArray(de)&&de.length?de.length>xe.length?de=de.slice(0,xe.length):xe.length>de.length&&(xe=xe.slice(0,de.length)):de=xe.map(l(re.tickformat));for(var K=1;K<xe.length;K++)if(xe[K]<xe[K-1]){for(var oe=xe.map(Te).sort(we),he=0;he<xe.length;he++)xe[he]=oe[he].val,de[he]=oe[he].text;break}}else xe=void 0;return Ee=h.convertTypedArray(Ee),{key:ke,label:re.label,tickFormat:re.tickformat,tickvals:xe,ticktext:de,ordinal:h.isOrdinal(re),multiselect:re.multiselect,xIndex:ae,crossfilterDimensionIndex:ae,visibleIndex:re._index,height:U,values:Ee,paddedUnitValues:Ee.map(se),unitTickvals:xe&&xe.map(se),xScale:q,x:q(ae),canvasX:q(ae)*Y,unitToPaddedPx:X,domainScale:w(U,f.verticalPadding,re,xe,de),ordinalScale:u(re),parent:Q,model:B,brush:b.makeBrush(V,le,ue,function(){V.linePickActive(!1)},function(){var ye=Q;ye.focusLayer&&ye.focusLayer.render(ye.panels,!0);var Me=_(ye);!V.contextShown()&&Me?(ye.contextLayer&&ye.contextLayer.render(ye.panels,!0),V.contextShown(!0)):V.contextShown()&&!Me&&(ye.contextLayer&&ye.contextLayer.render(ye.panels,!0,!0),V.contextShown(!1))},function(ye){if(Q.focusLayer.render(Q.panels,!0),Q.pickLayer&&Q.pickLayer.render(Q.panels,!0),V.linePickActive(!0),D&&D.filterChanged){var Me=se.invert,Re=ye.map(function(Pe){return Pe.map(Me).sort(k.sorterAsc)}).sort(function(Pe,De){return Pe[0]-De[0]});D.filterChanged(Q.key,re._index,Re)}})}}),Q}function C(V){V.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(V,D){var N=V*Math.PI/180;return{dir:"top"===D?1:-1,dx:Math.sin(N),dy:Math.cos(N),degrees:V}}function z(V,D,B){for(var N=D.panels||(D.panels=[]),U=V.data(),J=0;J<U.length-1;J++){var Y=N[J]||(N[J]={}),q=U[J],H=U[J+1];Y.dim0=q,Y.dim1=H,Y.canvasX=q.canvasX,Y.panelSizeX=H.canvasX-q.canvasX,Y.panelSizeY=D.model.canvasHeight,Y.y=0,Y.canvasY=0,Y.plotGlPixelRatio=B}}function j(V,D){return x.tickText(V._ax,D,!1).text}function R(V,D){if(V.ordinal)return"";var B=V.domainScale.domain();return j(V.model.dimensions[V.visibleIndex],B[D?B.length-1:0])}$.exports=function(V,D,B,N){var U=V._context.staticPlot,J=V._fullLayout,Y=J._toppaper,q=J._glcontainer,H=V._context.plotGlPixelRatio,X=V._fullLayout.paper_bgcolor;!function(ye){for(var Me=0;Me<ye.length;Me++)for(var Re=0;Re<ye[Me].length;Re++)for(var Pe=ye[Me][Re].trace,De=Pe.dimensions,fe=0;fe<De.length;fe++){var ge=De[fe].values,be=De[fe]._ax;be&&(be.range=be.range?m(be.range[0],be.range[1]):y(ge,Pe._length),be.dtick||(be.dtick=.01*(Math.abs(be.range[1]-be.range[0])||1)),be.tickformat=De[fe].tickformat,x.calcTicks(be),be.cleanRange())}}(D);var Q,ne,re=(Q=!0,ne=!1,{linePickActive:function(ye){return arguments.length?Q=!!ye:Q},contextShown:function(ye){return arguments.length?ne=!!ye:ne}}),ae=D.filter(function(ye){return c(ye).trace.visible}).map(E.bind(0,B)).map(L.bind(0,re,N));q.each(function(ye,Me){return k.extendFlat(ye,ae[Me])});var se=q.selectAll(".gl-canvas").each(function(ye){ye.viewModel=ae[0],ye.viewModel.plotGlPixelRatio=H,ye.viewModel.paperColor=X,ye.model=ye.viewModel?ye.viewModel.model:null}),pe=null;se.filter(function(ye){return ye.pick}).style("pointer-events",U?"none":"auto").on("mousemove",function(ye){if(re.linePickActive()&&ye.lineLayer&&N&&N.hover){var Me=M.event,Re=this.width,Pe=this.height,De=M.mouse(this),fe=De[0],ge=De[1];if(fe<0||ge<0||fe>=Re||ge>=Pe)return;var be=ye.lineLayer.readPixel(fe,Pe-1-ge),Ie=0!==be[3],He=Ie?be[2]+256*(be[1]+256*be[0]):null,Ve={x:fe,y:ge,clientX:Me.clientX,clientY:Me.clientY,dataIndex:ye.model.key,curveNumber:He};He!==pe&&(Ie?N.hover(Ve):N.unhover&&N.unhover(Ve),pe=He)}}),se.style("opacity",function(ye){return ye.pick?0:1}),Y.style("background","rgba(255, 255, 255, 0)");var ke=Y.selectAll("."+f.cn.parcoords).data(ae,a);ke.exit().remove(),ke.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ke.attr("transform",function(ye){return s(ye.model.translateX,ye.model.translateY)});var me=ke.selectAll("."+f.cn.parcoordsControlView).data(i,a);me.enter().append("g").classed(f.cn.parcoordsControlView,!0),me.attr("transform",function(ye){return s(ye.model.pad.l,ye.model.pad.t)});var le=me.selectAll("."+f.cn.yAxis).data(function(ye){return ye.dimensions},a);le.enter().append("g").classed(f.cn.yAxis,!0),me.each(function(ye){z(le,ye,H)}),se.each(function(ye){ye.viewModel&&(!ye.lineLayer||N?ye.lineLayer=v(this,ye):ye.lineLayer.update(ye),(ye.key||0===ye.key)&&(ye.viewModel[ye.key]=ye.lineLayer),ye.lineLayer.render(ye.viewModel.panels,!ye.context||N))}),le.attr("transform",function(ye){return s(ye.xScale(ye.xIndex),0)}),le.call(M.behavior.drag().origin(function(ye){return ye}).on("drag",function(ye){var Me=ye.parent;re.linePickActive(!1),ye.x=Math.max(-f.overdrag,Math.min(ye.model.width+f.overdrag,M.event.x)),ye.canvasX=ye.x*ye.model.canvasPixelRatio,le.sort(function(Re,Pe){return Re.x-Pe.x}).each(function(Re,Pe){Re.xIndex=Pe,Re.x=ye===Re?Re.x:Re.xScale(Re.xIndex),Re.canvasX=Re.x*Re.model.canvasPixelRatio}),z(le,Me,H),le.filter(function(Re){return 0!==Math.abs(ye.xIndex-Re.xIndex)}).attr("transform",function(Re){return s(Re.xScale(Re.xIndex),0)}),M.select(this).attr("transform",s(ye.x,0)),le.each(function(Re,Pe,De){De===ye.parent.key&&(Me.dimensions[Pe]=Re)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!_(Me)),Me.focusLayer.render&&Me.focusLayer.render(Me.panels)}).on("dragend",function(ye){var Me=ye.parent;ye.x=ye.xScale(ye.xIndex),ye.canvasX=ye.x*ye.model.canvasPixelRatio,z(le,Me,H),M.select(this).attr("transform",function(Re){return s(Re.x,0)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!_(Me)),Me.focusLayer&&Me.focusLayer.render(Me.panels),Me.pickLayer&&Me.pickLayer.render(Me.panels,!0),re.linePickActive(!0),N&&N.axesMoved&&N.axesMoved(Me.key,Me.dimensions.map(function(Re){return Re.crossfilterDimensionIndex}))})),le.exit().remove();var ue=le.selectAll("."+f.cn.axisOverlays).data(i,a);ue.enter().append("g").classed(f.cn.axisOverlays,!0),ue.selectAll("."+f.cn.axis).remove();var Ee=ue.selectAll("."+f.cn.axis).data(i,a);Ee.enter().append("g").classed(f.cn.axis,!0),Ee.each(function(ye){var Me=ye.model.height/ye.model.tickDistance,Re=ye.domainScale,Pe=Re.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Me,ye.tickFormat).tickValues(ye.ordinal?Pe:null).tickFormat(function(De){return h.isOrdinal(ye)?De:j(ye.model.dimensions[ye.visibleIndex],De)}).scale(Re)),o.font(Ee.selectAll("text"),ye.model.tickFont)}),Ee.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ee.selectAll("text").style("text-shadow",e.makeTextShadow(X)).style("cursor","default");var de=ue.selectAll("."+f.cn.axisHeading).data(i,a);de.enter().append("g").classed(f.cn.axisHeading,!0);var xe=de.selectAll("."+f.cn.axisTitle).data(i,a);xe.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",U?"none":"auto"),xe.text(function(ye){return ye.label}).each(function(ye){var Me=M.select(this);o.font(Me,ye.model.labelFont),e.convertToTspans(Me,V)}).attr("transform",function(ye){var Me=P(ye.model.labelAngle,ye.model.labelSide),Re=f.axisTitleOffset;return(Me.dir>0?"":s(0,2*Re+ye.model.height))+p(Me.degrees)+s(-Re*Me.dx,-Re*Me.dy)}).attr("text-anchor",function(ye){var Me=P(ye.model.labelAngle,ye.model.labelSide);return 2*Math.abs(Me.dx)>Math.abs(Me.dy)?Me.dir*Me.dx<0?"start":"end":"middle"});var Te=ue.selectAll("."+f.cn.axisExtent).data(i,a);Te.enter().append("g").classed(f.cn.axisExtent,!0);var we=Te.selectAll("."+f.cn.axisExtentTop).data(i,a);we.enter().append("g").classed(f.cn.axisExtentTop,!0),we.attr("transform",s(0,-f.axisExtentOffset));var K=we.selectAll("."+f.cn.axisExtentTopText).data(i,a);K.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(C),K.text(function(ye){return R(ye,!0)}).each(function(ye){o.font(M.select(this),ye.model.rangeFont)});var oe=Te.selectAll("."+f.cn.axisExtentBottom).data(i,a);oe.enter().append("g").classed(f.cn.axisExtentBottom,!0),oe.attr("transform",function(ye){return s(0,ye.model.height+f.axisExtentOffset)});var he=oe.selectAll("."+f.cn.axisExtentBottomText).data(i,a);he.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),he.text(function(ye){return R(ye,!1)}).each(function(ye){o.font(M.select(this),ye.model.rangeFont)}),b.ensureAxisBrush(ue,X,V)}},21341:function($,I,t){"use strict";var M=t(17171),k=t(79749),l=t(1602).isVisible,T={};function x(p,s,e){var o=s.indexOf(e),r=p.indexOf(o);return-1===r&&(r+=s.length),r}($.exports=function(p,s){var e=p._fullLayout;if(k(p,[],T)){var o={},r={},n={},a={},i=e._size;s.forEach(function(c,h){var f=c[0].trace;n[h]=f.index;var b=a[h]=f._fullInput.index;o[h]=p.data[b].dimensions,r[h]=p.data[b].dimensions.slice()}),M(p,s,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(c,h,f){var b=r[c][h],v=f.map(function(u){return u.slice()}),g="dimensions["+h+"].constraintrange",y=e._tracePreGUI[p._fullData[n[c]]._fullInput.uid];void 0===y[g]&&(y[g]=b.constraintrange||null);var m=p._fullData[n[c]].dimensions[h];v.length?(1===v.length&&(v=v[0]),b.constraintrange=v,m.constraintrange=v.slice(),v=[v]):(delete b.constraintrange,delete m.constraintrange,v=null);var w={};w[g]=v,p.emit("plotly_restyle",[w,[a[c]]])},hover:function(c){p.emit("plotly_hover",c)},unhover:function(c){p.emit("plotly_unhover",c)},axesMoved:function(c,h){var b,v,f=(b=h,v=r[c].filter(l),function(g,y){return x(b,v,g)-x(b,v,y)});o[c].sort(f),r[c].filter(function(b){return!l(b)}).sort(function(b){return r[c].indexOf(b)}).forEach(function(b){o[c].splice(o[c].indexOf(b),1),o[c].splice(r[c].indexOf(b),0,b)}),p.emit("plotly_restyle",[{dimensions:[o[c]]},[a[c]]])}})}}).reglPrecompiled=T},34e3:function($,I,t){"use strict";var M=t(9012),k=t(27670).Y,l=t(41940),T=t(22399),x=t(5386).f,p=t(5386).s,s=t(1426).extendFlat,e=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","percent","text"]}),texttemplate:p({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},e,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},e,{}),outsidetextfont:s({},e,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},e,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},e,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function($,I,t){"use strict";var M=t(74875);I.name="pie",I.plot=function(k,l,T,x){M.plotBasePlot(I.name,k,l,T,x)},I.clean=function(k,l,T,x){M.cleanBasePlot(I.name,k,l,T,x)}},32354:function($,I,t){"use strict";var M=t(92770),k=t(84267),l=t(7901),T={};function x(s){return function(e,o){return!!e&&!!(e=k(e)).isValid()&&(e=l.addOpacity(e,e.getAlpha()),s[o]||(s[o]=e),e)}}function p(s,e){var o,r=JSON.stringify(s),n=e[r];if(!n){for(n=s.slice(),o=0;o<s.length;o++)n.push(k(s[o]).lighten(20).toHexString());for(o=0;o<s.length;o++)n.push(k(s[o]).darken(20).toHexString());e[r]=n}return n}$.exports={calc:function(s,e){var o,r,n=[],a=s._fullLayout,i=a.hiddenlabels||[],c=e.labels,h=e.marker.colors||[],f=e.values,b=e._length,v=e._hasValues&&b;if(e.dlabel)for(c=new Array(b),o=0;o<b;o++)c[o]=String(e.label0+o*e.dlabel);var g={},y=x(a["_"+e.type+"colormap"]),d=0,m=!1;for(o=0;o<b;o++){var w,u,S;if(v){if(!M(w=f[o]))continue;w=+w}else w=1;void 0!==(u=c[o])&&""!==u||(u=o);var _=g[u=String(u)];void 0===_?(g[u]=n.length,(S=-1!==i.indexOf(u))||(d+=w),n.push({v:w,label:u,color:y(h[o],u),i:o,pts:[o],hidden:S})):(m=!0,(r=n[_]).v+=w,r.pts.push(o),r.hidden||(d+=w),!1===r.color&&h[o]&&(r.color=y(h[o],u)))}return n=n.filter(function(E){return E.v>=0}),("funnelarea"===e.type?m:e.sort)&&n.sort(function(E,L){return L.v-E.v}),n[0]&&(n[0].vTotal=d),n},crossTraceCalc:function(s,e){var o=(e||{}).type;o||(o="pie");var r=s._fullLayout,n=s.calcdata,a=r[o+"colorway"],i=r["_"+o+"colormap"];r["extend"+o+"colors"]&&(a=p(a,T));for(var c=0,h=0;h<n.length;h++){var f=n[h];if(f[0].trace.type===o)for(var b=0;b<f.length;b++){var v=f[b];!1===v.color&&(i[v.label]?v.color=i[v.label]:(i[v.label]=v.color=a[c%a.length],c++))}}},makePullColorFn:x,generateExtendedColors:p}},37434:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(34e3),T=t(27670).c,x=t(90769).handleText;function p(s,e){var o=Array.isArray(s),r=k.isArrayOrTypedArray(e),n=Math.min(o?s.length:1/0,r?e.length:1/0);if(isFinite(n)||(n=0),n&&r){for(var a,i=0;i<n;i++){var c=e[i];if(M(c)&&c>0){a=!0;break}}a||(n=0)}return{hasLabels:o,hasValues:r,len:n}}$.exports={handleLabelsAndValues:p,supplyDefaults:function(s,e,o,r){function n(y,d){return k.coerce(s,e,l,y,d)}var a=p(n("labels"),n("values")),i=a.len;if(e._hasLabels=a.hasLabels,e._hasValues=a.hasValues,!e._hasLabels&&e._hasValues&&(n("label0"),n("dlabel")),i){e._length=i,n("marker.line.width")&&n("marker.line.color"),n("marker.colors"),n("scalegroup");var c,h=n("text"),f=n("texttemplate");if(f||(c=n("textinfo",Array.isArray(h)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||c&&"none"!==c){var b=n("textposition");x(s,e,r,n,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(b)||"auto"===b||"outside"===b)&&n("automargin"),("inside"===b||"auto"===b||Array.isArray(b))&&n("insidetextorientation")}T(e,r,n);var v=n("hole");if(n("title.text")){var g=n("title.position",v?"middle center":"top center");v||"middle center"!==g||(e.title.position="top center"),k.coerceFont(n,"title.font",r.font)}n("sort"),n("direction"),n("rotation"),n("pull")}else e.visible=!1}}},20007:function($,I,t){"use strict";var M=t(23469).appendArrayMultiPointValues;$.exports=function(k,l){var T={curveNumber:l.index,pointNumbers:k.pts,data:l._input,fullData:l,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return 1===k.pts.length&&(T.pointNumber=T.i=k.pts[0]),M(T,l,k.pts),"funnelarea"===l.type&&(delete T.v,delete T.i),T}},53581:function($,I,t){"use strict";var M=t(71828);function k(l){return-1!==l.indexOf("e")?l.replace(/[.]?0+e/,"e"):-1!==l.indexOf(".")?l.replace(/[.]?0+$/,""):l}I.formatPiePercent=function(l,T){var x=k((100*l).toPrecision(3));return M.numSeparate(x,T)+"%"},I.formatPieValue=function(l,T){var x=k(l.toPrecision(10));return M.numSeparate(x,T)},I.getFirstFilled=function(l,T){if(Array.isArray(l))for(var x=0;x<T.length;x++){var p=l[T[x]];if(p||0===p||""===p)return p}},I.castOption=function(l,T){return Array.isArray(l)?I.getFirstFilled(l,T):l||void 0},I.getRotationAngle=function(l){return("auto"===l?0:l)*Math.PI/180}},58810:function($,I,t){"use strict";$.exports={attributes:t(34e3),supplyDefaults:t(37434).supplyDefaults,supplyLayoutDefaults:t(92097),layoutAttributes:t(92774),calc:t(32354).calc,crossTraceCalc:t(32354).crossTraceCalc,plot:t(14575).plot,style:t(68357),styleOne:t(63463),moduleType:"trace",name:"pie",basePlotModule:t(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function($){"use strict";$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function($,I,t){"use strict";var M=t(71828),k=t(92774);$.exports=function(l,T){function x(p,s){return M.coerce(l,T,k,p,s)}x("hiddenlabels"),x("piecolorway",T.colorway),x("extendpiecolors")}},14575:function($,I,t){"use strict";var M=t(39898),k=t(74875),l=t(30211),T=t(7901),x=t(91424),p=t(71828),s=p.strScale,e=p.strTranslate,o=t(63893),r=t(72597),n=r.recordMinTextSize,a=r.clearMinTextSize,i=t(97313).TEXTPAD,c=t(53581),h=t(20007),f=t(71828).isValidTextValue;function b(D,B,N){var U=N[0],J=U.cx,Y=U.cy,q=U.trace,H="funnelarea"===q.type;"_hasHoverLabel"in q||(q._hasHoverLabel=!1),"_hasHoverEvent"in q||(q._hasHoverEvent=!1),D.on("mouseover",function(X){var Q=B._fullLayout,ne=B._fullData[q.index];if(!B._dragging&&!1!==Q.hovermode){var re=ne.hoverinfo;if(Array.isArray(re)&&(re=l.castHoverinfo({hoverinfo:[c.castOption(re,X.pts)],_module:q._module},Q,0)),"all"===re&&(re="label+text+value+percent+name"),ne.hovertemplate||"none"!==re&&"skip"!==re&&re){var ae=X.rInscribed||0,se=J+X.pxmid[0]*(1-ae),pe=Y+X.pxmid[1]*(1-ae),ke=Q.separators,me=[];if(re&&-1!==re.indexOf("label")&&me.push(X.label),X.text=c.castOption(ne.hovertext||ne.text,X.pts),re&&-1!==re.indexOf("text")){var le=X.text;p.isValidTextValue(le)&&me.push(le)}X.value=X.v,X.valueLabel=c.formatPieValue(X.v,ke),re&&-1!==re.indexOf("value")&&me.push(X.valueLabel),X.percent=X.v/U.vTotal,X.percentLabel=c.formatPiePercent(X.percent,ke),re&&-1!==re.indexOf("percent")&&me.push(X.percentLabel);var ue=ne.hoverlabel,Ee=ue.font,de=[];l.loneHover({trace:q,x0:se-ae*U.r,x1:se+ae*U.r,y:pe,_x0:H?J+X.TL[0]:se-ae*U.r,_x1:H?J+X.TR[0]:se+ae*U.r,_y0:H?Y+X.TL[1]:pe-ae*U.r,_y1:H?Y+X.BL[1]:pe+ae*U.r,text:me.join("<br>"),name:ne.hovertemplate||-1!==re.indexOf("name")?ne.name:void 0,idealAlign:X.pxmid[0]<0?"left":"right",color:c.castOption(ue.bgcolor,X.pts)||X.color,borderColor:c.castOption(ue.bordercolor,X.pts),fontFamily:c.castOption(Ee.family,X.pts),fontSize:c.castOption(Ee.size,X.pts),fontColor:c.castOption(Ee.color,X.pts),nameLength:c.castOption(ue.namelength,X.pts),textAlign:c.castOption(ue.align,X.pts),hovertemplate:c.castOption(ne.hovertemplate,X.pts),hovertemplateLabels:X,eventData:[h(X,ne)]},{container:Q._hoverlayer.node(),outerContainer:Q._paper.node(),gd:B,inOut_bbox:de}),X.bbox=de[0],q._hasHoverLabel=!0}q._hasHoverEvent=!0,B.emit("plotly_hover",{points:[h(X,ne)],event:M.event})}}),D.on("mouseout",function(X){var Q=B._fullLayout,ne=B._fullData[q.index],re=M.select(this).datum();q._hasHoverEvent&&(X.originalEvent=M.event,B.emit("plotly_unhover",{points:[h(re,ne)],event:M.event}),q._hasHoverEvent=!1),q._hasHoverLabel&&(l.loneUnhover(Q._hoverlayer.node()),q._hasHoverLabel=!1)}),D.on("click",function(X){B._dragging||!1===B._fullLayout.hovermode||(B._hoverdata=[h(X,B._fullData[q.index])],l.click(B,M.event))})}function v(D,B,N){var U=c.castOption(D.insidetextfont.color,B.pts);!U&&D._input.textfont&&(U=c.castOption(D._input.textfont.color,B.pts));var J=c.castOption(D.insidetextfont.family,B.pts)||c.castOption(D.textfont.family,B.pts)||N.family,Y=c.castOption(D.insidetextfont.size,B.pts)||c.castOption(D.textfont.size,B.pts)||N.size;return{color:U||T.contrast(B.color),family:J,size:Y}}function g(D,B){for(var N,U,J=0;J<D.length;J++)if((U=(N=D[J][0]).trace).title.text){var Y=U.title.text;U._meta&&(Y=p.templateString(Y,U._meta));var q=x.tester.append("text").attr("data-notex",1).text(Y).call(x.font,U.title.font).call(o.convertToTspans,B),H=x.bBox(q.node(),!0);N.titleBox={width:H.width,height:H.height},q.remove()}}function y(D,B,N){var U=N.r||B.rpx1,J=B.rInscribed;if(B.startangle===B.stopangle)return{rCenter:1-J,scale:0,rotate:0,textPosAngle:0};var Y,q=B.ring,H=1===q&&Math.abs(B.startangle-B.stopangle)===2*Math.PI,X=B.halfangle,Q=B.midangle,ne=N.trace.insidetextorientation,re="horizontal"===ne,ae="tangential"===ne,se="radial"===ne,pe="auto"===ne,ke=[];if(!pe){var me,le=function(we,K){if(De=(Me=B).stopangle,(Pe=Me.startangle)>(Re=we)&&Re>De||Pe<Re&&Re<De){var oe=Math.abs(we-B.startangle),he=Math.abs(we-B.stopangle),ye=oe<he?oe:he;(Y="tan"===K?m(D,U,q,ye,0):d(D,U,q,ye,Math.PI/2)).textPosAngle=we,ke.push(Y)}var Me,Re,Pe,De};if(re||ae){for(me=4;me>=-4;me-=2)le(Math.PI*me,"tan");for(me=4;me>=-4;me-=2)le(Math.PI*(me+1),"tan")}if(re||se){for(me=4;me>=-4;me-=2)le(Math.PI*(me+1.5),"rad");for(me=4;me>=-4;me-=2)le(Math.PI*(me+.5),"rad")}}if(H||pe||re){var ue=Math.sqrt(D.width*D.width+D.height*D.height);if((Y={scale:J*U*2/ue,rCenter:1-J,rotate:0}).textPosAngle=(B.startangle+B.stopangle)/2,Y.scale>=1)return Y;ke.push(Y)}(pe||se)&&((Y=d(D,U,q,X,Q)).textPosAngle=(B.startangle+B.stopangle)/2,ke.push(Y)),(pe||ae)&&((Y=m(D,U,q,X,Q)).textPosAngle=(B.startangle+B.stopangle)/2,ke.push(Y));for(var Ee=0,de=0,xe=0;xe<ke.length;xe++){var Te=ke[xe].scale;if(de<Te&&(de=Te,Ee=xe),!pe&&de>=1)break}return ke[Ee]}function d(D,B,N,U,J){B=Math.max(0,B-2*i);var Y=D.width/D.height,q=S(Y,U,B,N);return{scale:2*q/D.height,rCenter:w(Y,q/B),rotate:u(J)}}function m(D,B,N,U,J){B=Math.max(0,B-2*i);var Y=D.height/D.width,q=S(Y,U,B,N);return{scale:2*q/D.width,rCenter:w(Y,q/B),rotate:u(J+Math.PI/2)}}function w(D,B){return Math.cos(B)-D*B}function u(D){return(180/Math.PI*D+720)%180-90}function S(D,B,N,U){var J=D+1/(2*Math.tan(B));return N*Math.min(1/(Math.sqrt(J*J+.5)+J),U/(Math.sqrt(D*D+U/2)+D))}function _(D,B){return D.v!==B.vTotal||B.trace.hole?Math.min(1/(1+1/Math.sin(D.halfangle)),D.ring/2):1}function E(D,B){var N=B.pxmid[0],U=B.pxmid[1],J=D.width/2,Y=D.height/2;return N<0&&(J*=-1),U<0&&(Y*=-1),{scale:1,rCenter:1,rotate:0,x:J+Math.abs(Y)*(J>0?1:-1)/2,y:Y/(1+N*N/(U*U)),outside:!0}}function L(D,B){var N,U,J,Y=D.trace,q={x:D.cx,y:D.cy},H={tx:0,ty:0};H.ty+=Y.title.font.size,J=P(Y),-1!==Y.title.position.indexOf("top")?(q.y-=(1+J)*D.r,H.ty-=D.titleBox.height):-1!==Y.title.position.indexOf("bottom")&&(q.y+=(1+J)*D.r);var X,Q=D.r/(void 0===(X=D.trace.aspectratio)?1:X),ne=B.w*(Y.domain.x[1]-Y.domain.x[0])/2;return-1!==Y.title.position.indexOf("left")?(ne+=Q,q.x-=(1+J)*Q,H.tx+=D.titleBox.width/2):-1!==Y.title.position.indexOf("center")?ne*=2:-1!==Y.title.position.indexOf("right")&&(ne+=Q,q.x+=(1+J)*Q,H.tx-=D.titleBox.width/2),N=ne/D.titleBox.width,U=C(D,B)/D.titleBox.height,{x:q.x,y:q.y,scale:Math.min(N,U),tx:H.tx,ty:H.ty}}function C(D,B){var N=D.trace;return Math.min(D.titleBox.height,B.h*(N.domain.y[1]-N.domain.y[0])/2)}function P(D){var B,N=D.pull;if(!N)return 0;if(Array.isArray(N))for(N=0,B=0;B<D.pull.length;B++)D.pull[B]>N&&(N=D.pull[B]);return N}function z(D,B){for(var N=[],U=0;U<D.length;U++){var J=D[U][0],Y=J.trace,q=Y.domain,H=B.w*(q.x[1]-q.x[0]),X=B.h*(q.y[1]-q.y[0]);Y.title.text&&"middle center"!==Y.title.position&&(X-=C(J,B));var ne=X/2;"funnelarea"!==Y.type||Y.scalegroup||(ne/=Y.aspectratio),J.r=Math.min(H/2,ne)/(1+P(Y)),J.cx=B.l+B.w*(Y.domain.x[1]+Y.domain.x[0])/2,J.cy=B.t+B.h*(1-Y.domain.y[0])-X/2,Y.title.text&&-1!==Y.title.position.indexOf("bottom")&&(J.cy-=C(J,B)),Y.scalegroup&&-1===N.indexOf(Y.scalegroup)&&N.push(Y.scalegroup)}!function(re,ae){for(var se,pe,ke,me=0;me<ae.length;me++){var le=1/0,ue=ae[me];for(pe=0;pe<re.length;pe++)if((ke=(se=re[pe][0]).trace).scalegroup===ue){var Ee;if("pie"===ke.type)Ee=se.r*se.r;else if("funnelarea"===ke.type){var de,xe;ke.aspectratio>1?xe=(de=se.r)/ke.aspectratio:de=(xe=se.r)*ke.aspectratio,Ee=(de*=(1+ke.baseratio)/2)*xe}le=Math.min(le,Ee/se.vTotal)}for(pe=0;pe<re.length;pe++)if((ke=(se=re[pe][0]).trace).scalegroup===ue){var Te=le*se.vTotal;"funnelarea"===ke.type&&(Te/=(1+ke.baseratio)/2,Te/=ke.aspectratio),se.r=Math.sqrt(Te)}}}(D,N)}function j(D,B){return[D*Math.sin(B),-D*Math.cos(B)]}function R(D,B,N){var Ee,U=D._fullLayout,J=N.trace,Y=J.texttemplate,q=J.textinfo;if(!Y&&q&&"none"!==q){var H,X=q.split("+"),Q=function(Ee){return-1!==X.indexOf(Ee)},ne=Q("label"),re=Q("text"),ae=Q("value"),se=Q("percent"),pe=U.separators;if(H=ne?[B.label]:[],re){var ke=c.getFirstFilled(J.text,B.pts);f(ke)&&H.push(ke)}ae&&H.push(c.formatPieValue(B.v,pe)),se&&H.push(c.formatPiePercent(B.v/N.vTotal,pe)),B.text=H.join("<br>")}if(Y){var me=p.castOption(J,B.i,"texttemplate");if(me){var le={label:(Ee=B).label,value:Ee.v,valueLabel:c.formatPieValue(Ee.v,U.separators),percent:Ee.v/N.vTotal,percentLabel:c.formatPiePercent(Ee.v/N.vTotal,U.separators),color:Ee.color,text:Ee.text,customdata:p.castOption(J,Ee.i,"customdata")},ue=c.getFirstFilled(J.text,B.pts);(f(ue)||""===ue)&&(le.text=ue),B.text=p.texttemplateString(me,le,D._fullLayout._d3locale,le,J._meta||{})}else B.text=""}}function V(D,B){var N=D.rotate*Math.PI/180,U=Math.cos(N),J=Math.sin(N),Y=(B.left+B.right)/2,q=(B.top+B.bottom)/2;D.textX=Y*U-q*J,D.textY=Y*J+q*U,D.noCenter=!0}$.exports={plot:function(D,B){var N=D._context.staticPlot,U=D._fullLayout,J=U._size;a("pie",U),g(B,D),z(B,J);var Y=p.makeTraceGroups(U._pielayer,B,"trace").each(function(q){var H=M.select(this),X=q[0],Q=X.trace;(function(ne){var re,ae,se,pe=ne[0],ke=pe.r,me=pe.trace,le=c.getRotationAngle(me.rotation),ue=2*Math.PI/pe.vTotal,Ee="px0",de="px1";if("counterclockwise"===me.direction){for(re=0;re<ne.length&&ne[re].hidden;re++);if(re===ne.length)return;le+=ue*ne[re].v,ue*=-1,Ee="px1",de="px0"}for(se=j(ke,le),re=0;re<ne.length;re++)(ae=ne[re]).hidden||(ae[Ee]=se,ae.startangle=le,ae.pxmid=j(ke,le+=ue*ae.v/2),ae.midangle=le,se=j(ke,le+=ue*ae.v/2),ae.stopangle=le,ae[de]=se,ae.largeArc=ae.v>pe.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/pe.vTotal,.5),ae.ring=1-me.hole,ae.rInscribed=_(ae,pe))})(q),H.attr("stroke-linejoin","round"),H.each(function(){var ne=M.select(this).selectAll("g.slice").data(q);ne.enter().append("g").classed("slice",!0),ne.exit().remove();var re=[[[],[]],[[],[]]],ae=!1;ne.each(function(de,xe){if(de.hidden)M.select(this).selectAll("path,g").remove();else{de.pointNumber=de.i,de.curveNumber=Q.index,re[de.pxmid[1]<0?0:1][de.pxmid[0]<0?0:1].push(de);var Te=X.cx,we=X.cy,K=M.select(this),oe=K.selectAll("path.surface").data([de]);if(oe.enter().append("path").classed("surface",!0).style({"pointer-events":N?"none":"all"}),K.call(b,D,q),Q.pull){var he=+c.castOption(Q.pull,de.pts)||0;he>0&&(Te+=he*de.pxmid[0],we+=he*de.pxmid[1])}de.cxFinal=Te,de.cyFinal=we;var ye=Q.hole;if(de.v===X.vTotal){var Me="M"+(Te+de.px0[0])+","+(we+de.px0[1])+ge(de.px0,de.pxmid,!0,1)+ge(de.pxmid,de.px0,!0,1)+"Z";oe.attr("d",ye?"M"+(Te+ye*de.px0[0])+","+(we+ye*de.px0[1])+ge(de.px0,de.pxmid,!1,ye)+ge(de.pxmid,de.px0,!1,ye)+"Z"+Me:Me)}else{var Re=ge(de.px0,de.px1,!0,1);if(ye){var Pe=1-ye;oe.attr("d","M"+(Te+ye*de.px1[0])+","+(we+ye*de.px1[1])+ge(de.px1,de.px0,!1,ye)+"l"+Pe*de.px0[0]+","+Pe*de.px0[1]+Re+"Z")}else oe.attr("d","M"+Te+","+we+"l"+de.px0[0]+","+de.px0[1]+Re+"Z")}R(D,de,X);var De=c.castOption(Q.textposition,de.pts),fe=K.selectAll("g.slicetext").data(de.text&&"none"!==De?[0]:[]);fe.enter().append("g").classed("slicetext",!0),fe.exit().remove(),fe.each(function(){var wt,_t,pt,be=p.ensureSingle(M.select(this),"text","",function(wt){wt.attr("data-notex",1)}),Ie=p.ensureUniformFontSize(D,"outside"===De?(pt=U.font,{color:c.castOption((wt=Q).outsidetextfont.color,(_t=de).pts)||c.castOption(wt.textfont.color,_t.pts)||pt.color,family:c.castOption(wt.outsidetextfont.family,_t.pts)||c.castOption(wt.textfont.family,_t.pts)||pt.family,size:c.castOption(wt.outsidetextfont.size,_t.pts)||c.castOption(wt.textfont.size,_t.pts)||pt.size}):v(Q,de,U.font));be.text(de.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,Ie).call(o.convertToTspans,D);var He,Ve=x.bBox(be.node());if("outside"===De)He=E(Ve,de);else if(He=y(Ve,de,X),"auto"===De&&He.scale<1){var tt=p.ensureUniformFontSize(D,Q.outsidetextfont);be.call(x.font,tt),He=E(Ve=x.bBox(be.node()),de)}var nt=He.textPosAngle,st=void 0===nt?de.pxmid:j(X.r,nt);if(He.targetX=Te+st[0]*He.rCenter+(He.x||0),He.targetY=we+st[1]*He.rCenter+(He.y||0),V(He,Ve),He.outside){var dt=He.targetY;de.yLabelMin=dt-Ve.height/2,de.yLabelMid=dt,de.yLabelMax=dt+Ve.height/2,de.labelExtraX=0,de.labelExtraY=0,ae=!0}He.fontSize=Ie.size,n(Q.type,He,U),q[xe].transform=He,p.setTransormAndDisplay(be,He)})}function ge(be,Ie,He,Ve){return"a"+Ve*X.r+","+Ve*X.r+" 0 "+de.largeArc+(He?" 1 ":" 0 ")+Ve*(Ie[0]-be[0])+","+Ve*(Ie[1]-be[1])}});var xe,se=M.select(this).selectAll("g.titletext").data(Q.title.text?[0]:[]);if(se.enter().append("g").classed("titletext",!0),se.exit().remove(),se.each(function(){var de,we,K,xe=p.ensureSingle(M.select(this),"text","",function(we){we.attr("data-notex",1)}),Te=Q.title.text;Q._meta&&(Te=p.templateString(Te,Q._meta)),xe.text(Te).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,Q.title.font).call(o.convertToTspans,D),de="middle center"===Q.title.position?(we=X,K=Math.sqrt(we.titleBox.width*we.titleBox.width+we.titleBox.height*we.titleBox.height),{x:we.cx,y:we.cy,scale:we.trace.hole*we.r*2/K,tx:0,ty:-we.titleBox.height/2+we.trace.title.font.size}):L(X,J),xe.attr("transform",e(de.x,de.y)+s(Math.min(1,de.scale))+e(de.tx,de.ty))}),ae&&function(de,xe){var Te,we,K,oe,he,ye,Me,Re,Pe,De,fe,ge,be;function Ie(nt,st){return nt.pxmid[1]-st.pxmid[1]}function He(nt,st){return st.pxmid[1]-nt.pxmid[1]}function Ve(nt,st){st||(st={});var dt,wt,_t,pt,Pt=st.labelExtraY+(we?st.yLabelMax:st.yLabelMin),St=we?nt.yLabelMin:nt.yLabelMax,Ot=we?nt.yLabelMax:nt.yLabelMin,jt=nt.cyFinal+he(nt.px0[1],nt.px1[1]),Dt=Pt-St;if(Dt*Me>0&&(nt.labelExtraY=Dt),Array.isArray(xe.pull))for(wt=0;wt<De.length;wt++)(_t=De[wt])===nt||(c.castOption(xe.pull,nt.pts)||0)>=(c.castOption(xe.pull,_t.pts)||0)||((nt.pxmid[1]-_t.pxmid[1])*Me>0?(Dt=_t.cyFinal+he(_t.px0[1],_t.px1[1])-St-nt.labelExtraY)*Me>0&&(nt.labelExtraY+=Dt):(Ot+nt.labelExtraY-jt)*Me>0&&(dt=3*ye*Math.abs(wt-De.indexOf(nt)),(pt=_t.cxFinal+oe(_t.px0[0],_t.px1[0])+dt-(nt.cxFinal+nt.pxmid[0])-nt.labelExtraX)*ye>0&&(nt.labelExtraX+=pt)))}for(we=0;we<2;we++)for(K=we?Ie:He,he=we?Math.max:Math.min,Me=we?1:-1,Te=0;Te<2;Te++){for(oe=Te?Math.max:Math.min,ye=Te?1:-1,(Re=de[we][Te]).sort(K),De=(Pe=de[1-we][Te]).concat(Re),ge=[],fe=0;fe<Re.length;fe++)void 0!==Re[fe].yLabelMid&&ge.push(Re[fe]);for(be=!1,fe=0;we&&fe<Pe.length;fe++)if(void 0!==Pe[fe].yLabelMid){be=Pe[fe];break}for(fe=0;fe<ge.length;fe++){var tt=fe&&ge[fe-1];be&&!fe&&(tt=be),Ve(ge[fe],tt)}}}(re,Q),xe=Q,ne.each(function(Te){var we=M.select(this);if(Te.labelExtraX||Te.labelExtraY){var K=we.select("g.slicetext text");Te.transform.targetX+=Te.labelExtraX,Te.transform.targetY+=Te.labelExtraY,p.setTransormAndDisplay(K,Te.transform);var oe=Te.cxFinal+Te.pxmid[0],he="M"+oe+","+(Te.cyFinal+Te.pxmid[1]),ye=(Te.yLabelMax-Te.yLabelMin)*(Te.pxmid[0]<0?-1:1)/4;if(Te.labelExtraX){var Me=Te.labelExtraX*Te.pxmid[1]/Te.pxmid[0],Re=Te.yLabelMid+Te.labelExtraY-(Te.cyFinal+Te.pxmid[1]);Math.abs(Me)>Math.abs(Re)?he+="l"+Re*Te.pxmid[0]/Te.pxmid[1]+","+Re+"H"+(oe+Te.labelExtraX+ye):he+="l"+Te.labelExtraX+","+Me+"v"+(Re-Me)+"h"+ye}else he+="V"+(Te.yLabelMid+Te.labelExtraY)+"h"+ye;p.ensureSingle(we,"path","textline").call(T.stroke,xe.outsidetextfont.color).attr({"stroke-width":Math.min(2,xe.outsidetextfont.size/8),d:he,fill:"none"})}else we.select("path.textline").remove()}),ae&&Q.automargin){var pe=x.bBox(H.node()),ke=Q.domain,ue=(J.w*(ke.x[1]-ke.x[0])*.5-X.r)/J.w,Ee=(J.h*(ke.y[1]-ke.y[0])*.5-X.r)/J.h;k.autoMargin(D,"pie."+Q.uid+".automargin",{xl:ke.x[0]-ue,xr:ke.x[1]+ue,yb:ke.y[0]-Ee,yt:ke.y[1]+Ee,l:Math.max(X.cx-X.r-pe.left,0),r:Math.max(pe.right-(X.cx+X.r),0),b:Math.max(pe.bottom-(X.cy+X.r),0),t:Math.max(X.cy-X.r-pe.top,0),pad:5})}})});setTimeout(function(){Y.selectAll("tspan").each(function(){var q=M.select(this);q.attr("dy")&&q.attr("dy",q.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:y,determineInsideTextFont:v,positionTitleOutside:L,prerenderTitles:g,layoutAreas:z,attachFxHandlers:b,computeTransform:V}},68357:function($,I,t){"use strict";var M=t(39898),k=t(63463),l=t(72597).resizeText;$.exports=function(T){var x=T._fullLayout._pielayer.selectAll(".trace");l(T,x,"pie"),x.each(function(p){var s=p[0].trace,e=M.select(this);e.style({opacity:s.opacity}),e.selectAll("path.surface").each(function(o){M.select(this).call(k,o,s)})})}},63463:function($,I,t){"use strict";var M=t(7901),k=t(53581).castOption;$.exports=function(l,T,x){var p=x.marker.line,s=k(p.color,T.pts)||M.defaultLine,e=k(p.width,T.pts)||0;l.style("stroke-width",e).call(M.fill,T.color).call(M.stroke,s)}},10959:function($,I,t){"use strict";var M=t(82196);$.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function($,I,t){"use strict";var M=t(9330).gl_pointcloud2d,k=t(78614),l=t(71739).findExtremes,T=t(34603);function x(s,e){this.scene=s,this.uid=e,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(s.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var p=x.prototype;p.handlePick=function(s){var e=this.idToIndex[s.pointId];return{trace:this,dataCoord:s.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}},p.update=function(s){this.index=s.index,this.textLabels=s.text,this.name=s.name,this.hoverinfo=s.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(s),this.color=T(s,{})},p.updateFast=function(s){var e,o,r,n,a,i,c=this.xData=this.pickXData=s.x,h=this.yData=this.pickYData=s.y,f=this.pickXYData=s.xy,v=s.indices,g=this.bounds;if(f){if(r=f,e=f.length>>>1,s.xbounds&&s.ybounds)g[0]=s.xbounds[0],g[2]=s.xbounds[1],g[1]=s.ybounds[0],g[3]=s.ybounds[1];else for(i=0;i<e;i++)a=r[2*i+1],(n=r[2*i])<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);if(v)o=v;else for(o=new Int32Array(e),i=0;i<e;i++)o[i]=i}else for(e=c.length,r=new Float32Array(2*e),o=new Int32Array(e),i=0;i<e;i++)n=c[i],a=h[i],o[i]=i,r[2*i]=n,r[2*i+1]=a,n<g[0]&&(g[0]=n),n>g[2]&&(g[2]=n),a<g[1]&&(g[1]=a),a>g[3]&&(g[3]=a);this.idToIndex=o,this.pointcloudOptions.idToIndex=o,this.pointcloudOptions.positions=r;var y=k(s.marker.color),d=k(s.marker.border.color),m=s.opacity*s.marker.opacity;y[3]*=m,this.pointcloudOptions.color=y;var w=s.marker.blend;null===w&&(w=c.length<100||h.length<100),this.pointcloudOptions.blend=w,d[3]*=m,this.pointcloudOptions.borderColor=d;var u=s.marker.sizemin,S=Math.max(s.marker.sizemax,s.marker.sizemin);this.pointcloudOptions.sizeMin=u,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=s.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var _=this.scene.xaxis,E=this.scene.yaxis,L=S/2||.5;s._extremes[_._id]=l(_,[g[0],g[2]],{ppad:L}),s._extremes[E._id]=l(E,[g[1],g[3]],{ppad:L})},p.dispose=function(){this.pointcloud.dispose()},$.exports=function(s,e){var o=new x(s,e.uid);return o.update(e),o}},33876:function($,I,t){"use strict";var M=t(71828),k=t(10959);$.exports=function(l,T,x){function p(s,e){return M.coerce(l,T,k,s,e)}p("x"),p("y"),p("xbounds"),p("ybounds"),l.xy&&l.xy instanceof Float32Array&&(T.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(T.indices=l.indices),p("text"),p("marker.color",x),p("marker.opacity"),p("marker.blend"),p("marker.sizemin"),p("marker.sizemax"),p("marker.border.color",x),p("marker.border.arearatio"),T._length=null}},20593:function($,I,t){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),$.exports={attributes:t(10959),supplyDefaults:t(33876),calc:t(36563),plot:t(42743),moduleType:"trace",name:"pointcloud",basePlotModule:t(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function($,I,t){"use strict";var M=t(41940),k=t(9012),l=t(22399),T=t(77914),x=t(27670).Y,p=t(5386).f,s=t(50693),e=t(44467).templatedArray,o=t(12663).descriptionOnlyNumbers,r=t(1426).extendFlat,n=t(30962).overrideAll;($.exports=n({hoverinfo:r({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:x({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:o("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:p({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function($,I,t){"use strict";var M=t(30962).overrideAll,k=t(27659).a0,l=t(60436),T=t(528),x=t(6964),p=t(28569),s=t(47322).prepSelect,e=t(71828),o=t(73972),r="sankey";function n(a,i){var c=a._fullData[i],h=a._fullLayout,f=h.dragmode,v=c._bgRect;if(v&&"pan"!==f&&"zoom"!==f){x(v,"pan"===h.dragmode?"move":"crosshair");var g={_id:"x",c2p:e.identity,_offset:c._sankey.translateX,_length:c._sankey.width},y={_id:"y",c2p:e.identity,_offset:c._sankey.translateY,_length:c._sankey.height},d={gd:a,element:v.node(),plotinfo:{id:i,xaxis:g,yaxis:y,fillRangeItems:e.noop},subplot:i,xaxes:[g],yaxes:[y],doneFnCompleted:function(m){var w,u=a._fullData[i],S=u.node.groups.slice(),_=[];function E(z){for(var j=u._sankey.graph.nodes,R=0;R<j.length;R++)if(j[R].pointNumber===z)return j[R]}for(var L=0;L<m.length;L++){var C=E(m[L].pointNumber);if(C)if(C.group){for(var P=0;P<C.childrenNodes.length;P++)_.push(C.childrenNodes[P].pointNumber);S[C.pointNumber-u.node._count]=!1}else _.push(C.pointNumber)}w=S.filter(Boolean).concat([_]),o.call("_guiRestyle",a,{"node.groups":[w]},i)},prepFn:function(m,w,u){s(m,w,u,d,f)}};p.init(d)}}I.name=r,I.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),I.plot=function(a){var i=k(a.calcdata,r)[0];l(a,i),I.updateFx(a)},I.clean=function(a,i,c,h){var f=h._has&&h._has(r),b=i._has&&i._has(r);f&&!b&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},I.updateFx=function(a){for(var i=0;i<a._fullData.length;i++)n(a,i)}},92930:function($,I,t){"use strict";var M=t(68664),k=t(71828),l=t(28984).wrap,T=k.isArrayOrTypedArray,x=k.isIndex,p=t(21081);$.exports=function(s,e){var o=function(r){var n,a=r.node,i=r.link,c=[],h=T(i.color),f=T(i.customdata),b={},v={},g=i.colorscales.length;for(n=0;n<g;n++){var y=i.colorscales[n],d=p.extractScale(y,{cLetter:"c"}),m=p.makeColorScaleFunc(d);v[y.label]=m}var w=0;for(n=0;n<i.value.length;n++)i.source[n]>w&&(w=i.source[n]),i.target[n]>w&&(w=i.target[n]);var u,S=w+1;r.node._count=S;var _=r.node.groups,E={};for(n=0;n<_.length;n++){var L=_[n];for(u=0;u<L.length;u++){var C=L[u],P=S+n;E.hasOwnProperty(C)?k.warn("Node "+C+" is already part of a group."):E[C]=P}}var z={source:[],target:[]};for(n=0;n<i.value.length;n++){var j=i.value[n],R=i.source[n],V=i.target[n];if(j>0&&x(R,S)&&x(V,S)&&(!E.hasOwnProperty(R)||!E.hasOwnProperty(V)||E[R]!==E[V])){E.hasOwnProperty(V)&&(V=E[V]),E.hasOwnProperty(R)&&(R=E[R]),b[R=+R]=b[V=+V]=!0;var D="";i.label&&i.label[n]&&(D=i.label[n]);var B=null;D&&v.hasOwnProperty(D)&&(B=v[D]),c.push({pointNumber:n,label:D,color:h?i.color[n]:i.color,customdata:f?i.customdata[n]:i.customdata,concentrationscale:B,source:R,target:V,value:+j}),z.source.push(R),z.target.push(V)}}var N=S+_.length,U=T(a.color),J=T(a.customdata),Y=[];for(n=0;n<N;n++)b[n]&&Y.push({group:n>S-1,childrenNodes:[],pointNumber:n,label:a.label[n],color:U?a.color[n]:a.color,customdata:J?a.customdata[n]:a.customdata});var H=!1;return function(X,Q,ne){for(var re=k.init2dArray(X,0),ae=0;ae<Math.min(Q.length,ne.length);ae++)if(k.isIndex(Q[ae],X)&&k.isIndex(ne[ae],X)){if(Q[ae]===ne[ae])return!0;re[Q[ae]].push(ne[ae])}return M(re).components.some(function(se){return se.length>1})}(N,z.source,z.target)&&(H=!0),{circular:H,links:c,nodes:Y,groups:_,groupLookup:E}}(e);return l({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},85247:function($){"use strict";$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function($,I,t){"use strict";var M=t(71828),k=t(39953),l=t(7901),T=t(84267),x=t(27670).c,p=t(38048),s=t(44467),e=t(85501);function o(r,n){function a(i,c){return M.coerce(r,n,k.link.colorscales,i,c)}a("label"),a("cmin"),a("cmax"),a("colorscale")}$.exports=function(r,n,a,i){function c(S,_){return M.coerce(r,n,k,S,_)}var h=M.extendDeep(i.hoverlabel,r.hoverlabel),f=r.node,b=s.newContainer(n,"node");function v(S,_){return M.coerce(f,b,k.node,S,_)}v("label"),v("groups"),v("x"),v("y"),v("pad"),v("thickness"),v("line.color"),v("line.width"),v("hoverinfo",r.hoverinfo),p(f,b,v,h),v("hovertemplate");var g=i.colorway;v("color",b.label.map(function(S,_){return l.addOpacity(g[_%g.length],.8)})),v("customdata");var y=r.link||{},d=s.newContainer(n,"link");function m(S,_){return M.coerce(y,d,k.link,S,_)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",r.hoverinfo),p(y,d,m,h),m("hovertemplate");var w,u=T(i.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";m("color",M.repeat(u,d.value.length)),m("customdata"),e(y,d,{name:"colorscales",handleItemDefaults:o}),x(n,i,c),c("orientation"),c("valueformat"),c("valuesuffix"),b.x.length&&b.y.length&&(w="freeform"),c("arrangement",w),M.coerceFont(c,"textfont",M.extendFlat({},i.font)),n._length=null}},29396:function($,I,t){"use strict";$.exports={attributes:t(39953),supplyDefaults:t(26857),calc:t(92930),plot:t(60436),moduleType:"trace",name:"sankey",basePlotModule:t(75536),selectPoints:t(84564),categories:["noOpacity"],meta:{}}},60436:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=k.numberFormat,T=t(3393),x=t(30211),p=t(7901),s=t(85247).cn,e=k._;function o(y){return""!==y}function r(y,d){return y.filter(function(m){return m.key===d.traceId})}function n(y,d){M.select(y).select("path").style("fill-opacity",d),M.select(y).select("rect").style("fill-opacity",d)}function a(y){M.select(y).select("text.name").style("fill","black")}function i(y){return function(d){return-1!==y.node.sourceLinks.indexOf(d.link)||-1!==y.node.targetLinks.indexOf(d.link)}}function c(y){return function(d){return-1!==d.node.sourceLinks.indexOf(y.link)||-1!==d.node.targetLinks.indexOf(y.link)}}function h(y,d,m){d&&m&&r(m,d).selectAll("."+s.sankeyLink).filter(i(d)).call(b.bind(0,d,m,!1))}function f(y,d,m){d&&m&&r(m,d).selectAll("."+s.sankeyLink).filter(i(d)).call(v.bind(0,d,m,!1))}function b(y,d,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){if(!S.link.concentrationscale)return.4}),u&&r(d,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return.4}),m&&r(d,y).selectAll("."+s.sankeyNode).filter(c(y)).call(h)}function v(y,d,m,w){var u=w.datum().link.label;w.style("fill-opacity",function(S){return S.tinyColorAlpha}),u&&r(d,y).selectAll("."+s.sankeyLink).filter(function(S){return S.link.label===u}).style("fill-opacity",function(S){return S.tinyColorAlpha}),m&&r(d,y).selectAll(s.sankeyNode).filter(c(y)).call(f)}function g(y,d){var w=k.nestedProperty(y.hoverlabel||{},d).get();return!Array.isArray(w)&&w}$.exports=function(y,d){for(var m=y._fullLayout,w=m._paper,u=m._size,S=0;S<y._fullData.length;S++)if(y._fullData[S].visible&&y._fullData[S].type===s.sankey&&!y._fullData[S]._viewInitial){var _=y._fullData[S].node;y._fullData[S]._viewInitial={node:{groups:_.groups.slice(),x:_.x.slice(),y:_.y.slice()}}}var E=e(y,"source:")+" ",L=e(y,"target:")+" ",C=e(y,"concentration:")+" ",P=e(y,"incoming flow count:")+" ",z=e(y,"outgoing flow count:")+" ";T(y,w,d,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:function(j,R,V){!1!==y._fullLayout.hovermode&&(M.select(j).call(b.bind(0,R,V,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,y.emit("plotly_hover",{event:M.event,points:[R.link]})))},follow:function(j,R){if(!1!==y._fullLayout.hovermode){var V=R.link.trace.link;if("none"!==V.hoverinfo&&"skip"!==V.hoverinfo){for(var D=[],B=0,N=0;N<R.flow.links.length;N++){var U=R.flow.links[N];if("closest"!==y._fullLayout.hovermode||R.link.pointNumber===U.pointNumber){R.link.pointNumber===U.pointNumber&&(B=N),U.fullData=U.trace,V=R.link.trace.link;var J=q(U),Y={valueLabel:l(R.valueFormat)(U.value)+R.valueSuffix};D.push({x:J[0],y:J[1],name:Y.valueLabel,text:[U.label||"",E+U.source.label,L+U.target.label,U.concentrationscale?C+l("%0.2f")(U.flow.labelConcentration):""].filter(o).join("<br>"),color:g(V,"bgcolor")||p.addOpacity(U.color,1),borderColor:g(V,"bordercolor"),fontFamily:g(V,"font.family"),fontSize:g(V,"font.size"),fontColor:g(V,"font.color"),nameLength:g(V,"namelength"),textAlign:g(V,"align"),idealAlign:M.event.x<J[0]?"right":"left",hovertemplate:V.hovertemplate,hovertemplateLabels:Y,eventData:[U]})}}x.loneHover(D,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y,anchorIndex:B}).each(function(){R.link.concentrationscale||n(this,.65),a(this)})}}function q(H){var X,Q;H.circular?(X=(H.circularPathData.leftInnerExtent+H.circularPathData.rightInnerExtent)/2,Q=H.circularPathData.verticalFullExtent):(X=(H.source.x1+H.target.x0)/2,Q=(H.y0+H.y1)/2);var ne=[X,Q];return"v"===H.trace.orientation&&ne.reverse(),ne[0]+=R.parent.translateX,ne[1]+=R.parent.translateY,ne}},unhover:function(j,R,V){!1!==y._fullLayout.hovermode&&(M.select(j).call(v.bind(0,R,V,!0)),"skip"!==R.link.trace.link.hoverinfo&&(R.link.fullData=R.link.trace,y.emit("plotly_unhover",{event:M.event,points:[R.link]})),x.loneUnhover(m._hoverlayer.node()))},select:function(j,R){var V=R.link;V.originalEvent=M.event,y._hoverdata=[V],x.click(y,{target:!0})}},nodeEvents:{hover:function(j,R,V){!1!==y._fullLayout.hovermode&&(M.select(j).call(h,R,V),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,y.emit("plotly_hover",{event:M.event,points:[R.node]})))},follow:function(j,R){if(!1!==y._fullLayout.hovermode){var V=R.node.trace.node;if("none"!==V.hoverinfo&&"skip"!==V.hoverinfo){var D=M.select(j).select("."+s.nodeRect),B=y._fullLayout._paperdiv.node().getBoundingClientRect(),N=D.node().getBoundingClientRect(),U=N.left-2-B.left,J=N.right+2-B.left,Y=N.top+N.height/4-B.top,q={valueLabel:l(R.valueFormat)(R.node.value)+R.valueSuffix};R.node.fullData=R.node.trace,y._fullLayout._calcInverseTransform(y);var H=y._fullLayout._invScaleX,Q=x.loneHover({x0:H*U,x1:H*J,y:y._fullLayout._invScaleY*Y,name:l(R.valueFormat)(R.node.value)+R.valueSuffix,text:[R.node.label,P+R.node.targetLinks.length,z+R.node.sourceLinks.length].filter(o).join("<br>"),color:g(V,"bgcolor")||R.tinyColorHue,borderColor:g(V,"bordercolor"),fontFamily:g(V,"font.family"),fontSize:g(V,"font.size"),fontColor:g(V,"font.color"),nameLength:g(V,"namelength"),textAlign:g(V,"align"),idealAlign:"left",hovertemplate:V.hovertemplate,hovertemplateLabels:q,eventData:[R.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:y});n(Q,.85),a(Q)}}},unhover:function(j,R,V){!1!==y._fullLayout.hovermode&&(M.select(j).call(f,R,V),"skip"!==R.node.trace.node.hoverinfo&&(R.node.fullData=R.node.trace,y.emit("plotly_unhover",{event:M.event,points:[R.node]})),x.loneUnhover(m._hoverlayer.node()))},select:function(j,R,V){var D=R.node;D.originalEvent=M.event,y._hoverdata=[D],M.select(j).call(f,R,V),x.click(y,{target:!0})}}})}},3393:function($,I,t){"use strict";var M=t(49887),k=t(81684).k4,l=t(39898),T=t(30838),x=t(86781),p=t(85247),s=t(84267),e=t(7901),o=t(91424),r=t(71828),n=r.strTranslate,a=r.strRotate,i=t(28984),c=i.keyFun,h=i.repeat,f=i.unwrap,b=t(63893),v=t(73972),g=t(18783),y=g.CAP_SHIFT,d=g.LINE_SPACING;function m(N,U,J){var Y,q=f(U),H=q.trace,X=H.domain,Q="h"===H.orientation,ne=H.node.pad,re=H.node.thickness,ae=N.width*(X.x[1]-X.x[0]),se=N.height*(X.y[1]-X.y[0]),pe=q._nodes,ke=q._links,me=q.circular;(Y=me?x.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(p.sankeyIterations).size(Q?[ae,se]:[se,ae]).nodeWidth(re).nodePadding(ne).nodeId(function(ye){return ye.pointNumber}).nodes(pe).links(ke);var le,ue,Ee,de=Y();for(var xe in Y.nodePadding()<ne&&r.warn("node.pad was reduced to ",Y.nodePadding()," to fit within the figure."),q._groupLookup){var Te,we=parseInt(q._groupLookup[xe]);for(le=0;le<de.nodes.length;le++)if(de.nodes[le].pointNumber===we){Te=de.nodes[le];break}if(Te){var K={pointNumber:parseInt(xe),x0:Te.x0,x1:Te.x1,y0:Te.y0,y1:Te.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};de.nodes.unshift(K),Te.childrenNodes.unshift(K)}}if(function(){for(le=0;le<de.nodes.length;le++){var ye,Me,Re=de.nodes[le],Pe={};for(ue=0;ue<Re.targetLinks.length;ue++)ye=(Me=Re.targetLinks[ue]).source.pointNumber+":"+Me.target.pointNumber,Pe.hasOwnProperty(ye)||(Pe[ye]=[]),Pe[ye].push(Me);var De=Object.keys(Pe);for(ue=0;ue<De.length;ue++){var fe=Pe[ye=De[ue]],ge=0,be={};for(Ee=0;Ee<fe.length;Ee++)be[(Me=fe[Ee]).label]||(be[Me.label]=0),be[Me.label]+=Me.value,ge+=Me.value;for(Ee=0;Ee<fe.length;Ee++)(Me=fe[Ee]).flow={value:ge,labelConcentration:be[Me.label]/ge,concentration:Me.value/ge,links:fe},Me.concentrationscale&&(Me.color=s(Me.concentrationscale(Me.flow.labelConcentration)))}var Ie=0;for(ue=0;ue<Re.sourceLinks.length;ue++)Ie+=Re.sourceLinks[ue].value;for(ue=0;ue<Re.sourceLinks.length;ue++)(Me=Re.sourceLinks[ue]).concentrationOut=Me.value/Ie;var He=0;for(ue=0;ue<Re.targetLinks.length;ue++)He+=Re.targetLinks[ue].value;for(ue=0;ue<Re.targetLinks.length;ue++)(Me=Re.targetLinks[ue]).concenrationIn=Me.value/He}}(),H.node.x.length&&H.node.y.length){for(le=0;le<Math.min(H.node.x.length,H.node.y.length,de.nodes.length);le++)if(H.node.x[le]&&H.node.y[le]){var oe=[H.node.x[le]*ae,H.node.y[le]*se];de.nodes[le].x0=oe[0]-re/2,de.nodes[le].x1=oe[0]+re/2;var he=de.nodes[le].y1-de.nodes[le].y0;de.nodes[le].y0=oe[1]-he/2,de.nodes[le].y1=oe[1]+he/2}"snap"===H.arrangement&&function(ye){var Me,Re,Pe=ye.map(function(Ie,He){return{x0:Ie.x0,index:He}}).sort(function(Ie,He){return Ie.x0-He.x0}),De=[],fe=-1,ge=-1/0;for(le=0;le<Pe.length;le++){var be=ye[Pe[le].index];be.x0>ge+re&&(fe+=1,Me=be.x0),ge=be.x0,De[fe]||(De[fe]=[]),De[fe].push(be),be.x0+=Re=Me-be.x0,be.x1+=Re}return De}(pe=de.nodes).forEach(function(ye){var Me,Re,Pe,De=0,fe=ye.length;for(ye.sort(function(ge,be){return ge.y0-be.y0}),Pe=0;Pe<fe;++Pe)(Me=ye[Pe]).y0>=De||(Re=De-Me.y0)>1e-6&&(Me.y0+=Re,Me.y1+=Re),De=Me.y1+ne}),Y.update(de)}return{circular:me,key:J,trace:H,guid:r.randstr(),horizontal:Q,width:ae,height:se,nodePad:H.node.pad,nodeLineColor:H.node.line.color,nodeLineWidth:H.node.line.width,linkLineColor:H.link.line.color,linkLineWidth:H.link.line.width,linkArrowLength:H.link.arrowlen,valueFormat:H.valueformat,valueSuffix:H.valuesuffix,textFont:H.textfont,translateX:X.x[0]*N.width+N.margin.l,translateY:N.height-X.y[1]*N.height+N.margin.t,dragParallel:Q?se:ae,dragPerpendicular:Q?ae:se,arrangement:H.arrangement,sankey:Y,graph:de,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(N,U,J){var Y=s(U.color),q=U.source.label+"|"+U.target.label+"__"+J;return U.trace=N.trace,U.curveNumber=N.trace.index,{circular:N.circular,key:q,traceId:N.key,pointNumber:U.pointNumber,link:U,tinyColorHue:e.tinyRGB(Y),tinyColorAlpha:Y.getAlpha(),linkPath:u,linkLineColor:N.linkLineColor,linkLineWidth:N.linkLineWidth,linkArrowLength:N.linkArrowLength,valueFormat:N.valueFormat,valueSuffix:N.valueSuffix,sankey:N.sankey,parent:N,interactionState:N.interactionState,flow:U.flow}}function u(){return function(N){var ue,Ee,de,xe,U=N.linkArrowLength;if(N.link.circular)return Ee=U,de=(ue=N.link).width/2,xe=ue.circularPathData,"top"===ue.circularLinkType?"M "+(xe.targetX-Ee)+" "+(xe.targetY+de)+" L"+(xe.rightInnerExtent-Ee)+" "+(xe.targetY+de)+"A"+(xe.rightLargeArcRadius+de)+" "+(xe.rightSmallArcRadius+de)+" 0 0 1 "+(xe.rightFullExtent-de-Ee)+" "+(xe.targetY-xe.rightSmallArcRadius)+"L"+(xe.rightFullExtent-de-Ee)+" "+xe.verticalRightInnerExtent+"A"+(xe.rightLargeArcRadius+de)+" "+(xe.rightLargeArcRadius+de)+" 0 0 1 "+(xe.rightInnerExtent-Ee)+" "+(xe.verticalFullExtent-de)+"L"+xe.leftInnerExtent+" "+(xe.verticalFullExtent-de)+"A"+(xe.leftLargeArcRadius+de)+" "+(xe.leftLargeArcRadius+de)+" 0 0 1 "+(xe.leftFullExtent+de)+" "+xe.verticalLeftInnerExtent+"L"+(xe.leftFullExtent+de)+" "+(xe.sourceY-xe.leftSmallArcRadius)+"A"+(xe.leftLargeArcRadius+de)+" "+(xe.leftSmallArcRadius+de)+" 0 0 1 "+xe.leftInnerExtent+" "+(xe.sourceY+de)+"L"+xe.sourceX+" "+(xe.sourceY+de)+"L"+xe.sourceX+" "+(xe.sourceY-de)+"L"+xe.leftInnerExtent+" "+(xe.sourceY-de)+"A"+(xe.leftLargeArcRadius-de)+" "+(xe.leftSmallArcRadius-de)+" 0 0 0 "+(xe.leftFullExtent-de)+" "+(xe.sourceY-xe.leftSmallArcRadius)+"L"+(xe.leftFullExtent-de)+" "+xe.verticalLeftInnerExtent+"A"+(xe.leftLargeArcRadius-de)+" "+(xe.leftLargeArcRadius-de)+" 0 0 0 "+xe.leftInnerExtent+" "+(xe.verticalFullExtent+de)+"L"+(xe.rightInnerExtent-Ee)+" "+(xe.verticalFullExtent+de)+"A"+(xe.rightLargeArcRadius-de)+" "+(xe.rightLargeArcRadius-de)+" 0 0 0 "+(xe.rightFullExtent+de-Ee)+" "+xe.verticalRightInnerExtent+"L"+(xe.rightFullExtent+de-Ee)+" "+(xe.targetY-xe.rightSmallArcRadius)+"A"+(xe.rightLargeArcRadius-de)+" "+(xe.rightSmallArcRadius-de)+" 0 0 0 "+(xe.rightInnerExtent-Ee)+" "+(xe.targetY-de)+"L"+(xe.targetX-Ee)+" "+(xe.targetY-de)+(Ee>0?"L"+xe.targetX+" "+xe.targetY:"")+"Z":"M "+(xe.targetX-Ee)+" "+(xe.targetY-de)+" L"+(xe.rightInnerExtent-Ee)+" "+(xe.targetY-de)+"A"+(xe.rightLargeArcRadius+de)+" "+(xe.rightSmallArcRadius+de)+" 0 0 0 "+(xe.rightFullExtent-de-Ee)+" "+(xe.targetY+xe.rightSmallArcRadius)+"L"+(xe.rightFullExtent-de-Ee)+" "+xe.verticalRightInnerExtent+"A"+(xe.rightLargeArcRadius+de)+" "+(xe.rightLargeArcRadius+de)+" 0 0 0 "+(xe.rightInnerExtent-Ee)+" "+(xe.verticalFullExtent+de)+"L"+xe.leftInnerExtent+" "+(xe.verticalFullExtent+de)+"A"+(xe.leftLargeArcRadius+de)+" "+(xe.leftLargeArcRadius+de)+" 0 0 0 "+(xe.leftFullExtent+de)+" "+xe.verticalLeftInnerExtent+"L"+(xe.leftFullExtent+de)+" "+(xe.sourceY+xe.leftSmallArcRadius)+"A"+(xe.leftLargeArcRadius+de)+" "+(xe.leftSmallArcRadius+de)+" 0 0 0 "+xe.leftInnerExtent+" "+(xe.sourceY-de)+"L"+xe.sourceX+" "+(xe.sourceY-de)+"L"+xe.sourceX+" "+(xe.sourceY+de)+"L"+xe.leftInnerExtent+" "+(xe.sourceY+de)+"A"+(xe.leftLargeArcRadius-de)+" "+(xe.leftSmallArcRadius-de)+" 0 0 1 "+(xe.leftFullExtent-de)+" "+(xe.sourceY+xe.leftSmallArcRadius)+"L"+(xe.leftFullExtent-de)+" "+xe.verticalLeftInnerExtent+"A"+(xe.leftLargeArcRadius-de)+" "+(xe.leftLargeArcRadius-de)+" 0 0 1 "+xe.leftInnerExtent+" "+(xe.verticalFullExtent-de)+"L"+(xe.rightInnerExtent-Ee)+" "+(xe.verticalFullExtent-de)+"A"+(xe.rightLargeArcRadius-de)+" "+(xe.rightLargeArcRadius-de)+" 0 0 1 "+(xe.rightFullExtent+de-Ee)+" "+xe.verticalRightInnerExtent+"L"+(xe.rightFullExtent+de-Ee)+" "+(xe.targetY+xe.rightSmallArcRadius)+"A"+(xe.rightLargeArcRadius-de)+" "+(xe.rightSmallArcRadius-de)+" 0 0 1 "+(xe.rightInnerExtent-Ee)+" "+(xe.targetY+de)+"L"+(xe.targetX-Ee)+" "+(xe.targetY+de)+(Ee>0?"L"+xe.targetX+" "+xe.targetY:"")+"Z";var J=Math.abs((N.link.target.x0-N.link.source.x1)/2);U>J&&(U=J);var Y=N.link.source.x1,q=N.link.target.x0-U,H=k(Y,q),X=H(.5),Q=H(.5),ne=N.link.y0-N.link.width/2,re=N.link.y0+N.link.width/2,ae=N.link.y1-N.link.width/2,se=N.link.y1+N.link.width/2,le=U>0?"L"+(q+U)+","+(ae+N.link.width/2):"";return"M"+Y+","+ne+"C"+X+","+ne+" "+Q+","+ae+" "+q+","+ae+(le+="L"+q+","+se)+"C"+Q+","+se+" "+X+","+re+" "+Y+","+re+"Z"}}function S(N,U){var J=s(U.color),Y=p.nodePadAcross,q=N.nodePad/2;U.dx=U.x1-U.x0,U.dy=U.y1-U.y0;var H=U.dx,X=Math.max(.5,U.dy),Q="node_"+U.pointNumber;return U.group&&(Q=r.randstr()),U.trace=N.trace,U.curveNumber=N.trace.index,{index:U.pointNumber,key:Q,partOfGroup:U.partOfGroup||!1,group:U.group,traceId:N.key,trace:N.trace,node:U,nodePad:N.nodePad,nodeLineColor:N.nodeLineColor,nodeLineWidth:N.nodeLineWidth,textFont:N.textFont,size:N.horizontal?N.height:N.width,visibleWidth:Math.ceil(H),visibleHeight:X,zoneX:-Y,zoneY:-q,zoneWidth:H+2*Y,zoneHeight:X+2*q,labelY:N.horizontal?U.dy/2+1:U.dx/2+1,left:1===U.originalLayer,sizeAcross:N.width,forceLayouts:N.forceLayouts,horizontal:N.horizontal,darkBackground:J.getBrightness()<=128,tinyColorHue:e.tinyRGB(J),tinyColorAlpha:J.getAlpha(),valueFormat:N.valueFormat,valueSuffix:N.valueSuffix,sankey:N.sankey,graph:N.graph,arrangement:N.arrangement,uniqueNodeLabelPathId:[N.guid,N.key,Q].join("_"),interactionState:N.interactionState,figure:N}}function _(N){N.attr("transform",function(U){return n(U.node.x0.toFixed(3),U.node.y0.toFixed(3))})}function E(N){N.call(_)}function L(N,U){N.call(E),U.attr("d",u())}function C(N){N.attr("width",function(U){return U.node.x1-U.node.x0}).attr("height",function(U){return U.visibleHeight})}function P(N){return N.link.width>1||N.linkLineWidth>0}function z(N){return n(N.translateX,N.translateY)+(N.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function j(N,U,J){N.on(".basic",null).on("mouseover.basic",function(Y){Y.interactionState.dragInProgress||Y.partOfGroup||(J.hover(this,Y,U),Y.interactionState.hovered=[this,Y])}).on("mousemove.basic",function(Y){Y.interactionState.dragInProgress||Y.partOfGroup||(J.follow(this,Y),Y.interactionState.hovered=[this,Y])}).on("mouseout.basic",function(Y){Y.interactionState.dragInProgress||Y.partOfGroup||(J.unhover(this,Y,U),Y.interactionState.hovered=!1)}).on("click.basic",function(Y){Y.interactionState.hovered&&(J.unhover(this,Y,U),Y.interactionState.hovered=!1),Y.interactionState.dragInProgress||Y.partOfGroup||J.select(this,Y,U)})}function R(N,U,J,Y){var q=l.behavior.drag().origin(function(H){return{x:H.node.x0+H.visibleWidth/2,y:H.node.y0+H.visibleHeight/2}}).on("dragstart",function(H){if("fixed"!==H.arrangement&&(r.ensureSingle(Y._fullLayout._infolayer,"g","dragcover",function(Q){Y._fullLayout._dragCover=Q}),r.raiseToTop(this),H.interactionState.dragInProgress=H.node,D(H.node),H.interactionState.hovered&&(J.nodeEvents.unhover.apply(0,H.interactionState.hovered),H.interactionState.hovered=!1),"snap"===H.arrangement)){var X=H.traceId+"|"+H.key;H.forceLayouts[X]?H.forceLayouts[X].alpha(1):function(Q,ne,re,ae){!function(pe){for(var ke=0;ke<pe.length;ke++)pe[ke].y=(pe[ke].y0+pe[ke].y1)/2,pe[ke].x=(pe[ke].x0+pe[ke].x1)/2}(re.graph.nodes);var ke,me,le,se=re.graph.nodes.filter(function(pe){return pe.originalX===re.node.originalX}).filter(function(pe){return!pe.partOfGroup});re.forceLayouts[ne]=M.forceSimulation(se).alphaDecay(0).force("collide",M.forceCollide().radius(function(pe){return pe.dy/2+re.nodePad/2}).strength(1).iterations(p.forceIterations)).force("constrain",(ke=ne,me=se,le=re,function(){for(var ue=0,Ee=0;Ee<me.length;Ee++){var de=me[Ee];de===le.interactionState.dragInProgress?(de.x=de.lastDraggedX,de.y=de.lastDraggedY):(de.vx=(de.originalX-de.x)/p.forceTicksPerFrame,de.y=Math.min(le.size-de.dy/2,Math.max(de.dy/2,de.y))),ue=Math.max(ue,Math.abs(de.vx),Math.abs(de.vy))}!le.interactionState.dragInProgress&&ue<.1&&le.forceLayouts[ke].alpha()>0&&le.forceLayouts[ke].alpha(0)})).stop()}(0,X,H),Q=N,ne=U,re=H,ae=X,se=Y,window.requestAnimationFrame(function pe(){var ke;for(ke=0;ke<p.forceTicksPerFrame;ke++)re.forceLayouts[ae].tick();if(function(le){for(var ue=0;ue<le.length;ue++)le[ue].y0=le[ue].y-le[ue].dy/2,le[ue].y1=le[ue].y0+le[ue].dy,le[ue].x0=le[ue].x-le[ue].dx/2,le[ue].x1=le[ue].x0+le[ue].dx}(re.graph.nodes),re.sankey.update(re.graph),L(Q.filter(B(re)),ne),re.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(pe);else{var me=re.node.originalX;re.node.x0=me-re.visibleWidth/2,re.node.x1=me+re.visibleWidth/2,V(re,se)}})}var Q,ne,re,ae,se}).on("drag",function(H){if("fixed"!==H.arrangement){var X=l.event.x,Q=l.event.y;"snap"===H.arrangement?(H.node.x0=X-H.visibleWidth/2,H.node.x1=X+H.visibleWidth/2,H.node.y0=Q-H.visibleHeight/2,H.node.y1=Q+H.visibleHeight/2):("freeform"===H.arrangement&&(H.node.x0=X-H.visibleWidth/2,H.node.x1=X+H.visibleWidth/2),Q=Math.max(0,Math.min(H.size-H.visibleHeight/2,Q)),H.node.y0=Q-H.visibleHeight/2,H.node.y1=Q+H.visibleHeight/2),D(H.node),"snap"!==H.arrangement&&(H.sankey.update(H.graph),L(N.filter(B(H)),U))}}).on("dragend",function(H){if("fixed"!==H.arrangement){H.interactionState.dragInProgress=!1;for(var X=0;X<H.node.childrenNodes.length;X++)H.node.childrenNodes[X].x=H.node.x,H.node.childrenNodes[X].y=H.node.y;"snap"!==H.arrangement&&V(H,Y)}});N.on(".drag",null).call(q)}function V(N,U){for(var J=[],Y=[],q=0;q<N.graph.nodes.length;q++){var X=(N.graph.nodes[q].y0+N.graph.nodes[q].y1)/2;J.push((N.graph.nodes[q].x0+N.graph.nodes[q].x1)/2/N.figure.width),Y.push(X/N.figure.height)}v.call("_guiRestyle",U,{"node.x":[J],"node.y":[Y]},N.trace.index).then(function(){U._fullLayout._dragCover&&U._fullLayout._dragCover.remove()})}function D(N){N.lastDraggedX=N.x0+N.dx/2,N.lastDraggedY=N.y0+N.dy/2}function B(N){return function(U){return U.node.originalX===N.node.originalX}}$.exports=function(N,U,J,Y,q){var H=N._context.staticPlot,X=!1;r.ensureSingle(N._fullLayout._infolayer,"g","first-render",function(){X=!0});var Q=N._fullLayout._dragCover,ne=J.filter(function(ue){return f(ue).trace.visible}).map(m.bind(null,Y)),re=U.selectAll("."+p.cn.sankey).data(ne,c);re.exit().remove(),re.enter().append("g").classed(p.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",H?"none":"auto").attr("transform",z),re.each(function(ue,Ee){N._fullData[Ee]._sankey=ue;var de="bgsankey-"+ue.trace.uid+"-"+Ee;r.ensureSingle(N._fullLayout._draggers,"rect",de),N._fullData[Ee]._bgRect=l.select("."+de),N._fullData[Ee]._bgRect.style("pointer-events",H?"none":"all").attr("width",ue.width).attr("height",ue.height).attr("x",ue.translateX).attr("y",ue.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(p.ease).duration(p.duration).attr("transform",z);var ae=re.selectAll("."+p.cn.sankeyLinks).data(h,c);ae.enter().append("g").classed(p.cn.sankeyLinks,!0).style("fill","none");var se=ae.selectAll("."+p.cn.sankeyLink).data(function(ue){return ue.graph.links.filter(function(Ee){return Ee.value}).map(w.bind(null,ue))},c);se.enter().append("path").classed(p.cn.sankeyLink,!0).call(j,re,q.linkEvents),se.style("stroke",function(ue){return P(ue)?e.tinyRGB(s(ue.linkLineColor)):ue.tinyColorHue}).style("stroke-opacity",function(ue){return P(ue)?e.opacity(ue.linkLineColor):ue.tinyColorAlpha}).style("fill",function(ue){return ue.tinyColorHue}).style("fill-opacity",function(ue){return ue.tinyColorAlpha}).style("stroke-width",function(ue){return P(ue)?ue.linkLineWidth:1}).attr("d",u()),se.style("opacity",function(){return N._context.staticPlot||X||Q?1:0}).transition().ease(p.ease).duration(p.duration).style("opacity",1),se.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var pe=re.selectAll("."+p.cn.sankeyNodeSet).data(h,c);pe.enter().append("g").classed(p.cn.sankeyNodeSet,!0),pe.style("cursor",function(ue){switch(ue.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ke=pe.selectAll("."+p.cn.sankeyNode).data(function(ue){var Ee=ue.graph.nodes;return function(de){var xe,Te=[];for(xe=0;xe<de.length;xe++)de[xe].originalX=(de[xe].x0+de[xe].x1)/2,de[xe].originalY=(de[xe].y0+de[xe].y1)/2,-1===Te.indexOf(de[xe].originalX)&&Te.push(de[xe].originalX);for(Te.sort(function(we,K){return we-K}),xe=0;xe<de.length;xe++)de[xe].originalLayerIndex=Te.indexOf(de[xe].originalX),de[xe].originalLayer=de[xe].originalLayerIndex/(Te.length-1)}(Ee),Ee.map(S.bind(null,ue))},c);ke.enter().append("g").classed(p.cn.sankeyNode,!0).call(_).style("opacity",function(ue){return!N._context.staticPlot&&!X||ue.partOfGroup?0:1}),ke.call(j,re,q.nodeEvents).call(R,se,q,N),ke.transition().ease(p.ease).duration(p.duration).call(_).style("opacity",function(ue){return ue.partOfGroup?0:1}),ke.exit().transition().ease(p.ease).duration(p.duration).style("opacity",0).remove();var me=ke.selectAll("."+p.cn.nodeRect).data(h);me.enter().append("rect").classed(p.cn.nodeRect,!0).call(C),me.style("stroke-width",function(ue){return ue.nodeLineWidth}).style("stroke",function(ue){return e.tinyRGB(s(ue.nodeLineColor))}).style("stroke-opacity",function(ue){return e.opacity(ue.nodeLineColor)}).style("fill",function(ue){return ue.tinyColorHue}).style("fill-opacity",function(ue){return ue.tinyColorAlpha}),me.transition().ease(p.ease).duration(p.duration).call(C);var le=ke.selectAll("."+p.cn.nodeLabel).data(h);le.enter().append("text").classed(p.cn.nodeLabel,!0).style("cursor","default"),le.attr("data-notex",1).text(function(ue){return ue.node.label}).each(function(ue){var Ee=l.select(this);o.font(Ee,ue.textFont),b.convertToTspans(Ee,N)}).style("text-shadow",b.makeTextShadow(N._fullLayout.paper_bgcolor)).attr("text-anchor",function(ue){return ue.horizontal&&ue.left?"end":"start"}).attr("transform",function(ue){var Ee=l.select(this),de=b.lineCount(Ee),Te=ue.nodeLineWidth/2+3,we=((ue.horizontal?ue.visibleHeight:ue.visibleWidth)-ue.textFont.size*((de-1)*d-y))/2;ue.horizontal&&(ue.left?Te=-Te:Te+=ue.visibleWidth);var K=ue.horizontal?"":"scale(-1,1)"+a(90);return n(ue.horizontal?Te:we,ue.horizontal?we:Te)+K}),le.transition().ease(p.ease).duration(p.duration)}},84564:function($){"use strict";$.exports=function(I,t){for(var M=[],k=I.cd[0].trace,l=k._sankey.graph.nodes,T=0;T<l.length;T++){var x=l[T];if(!x.partOfGroup){var p=[(x.x0+x.x1)/2,(x.y0+x.y1)/2];"v"===k.orientation&&p.reverse(),t&&t.contains(p,!1,T,I)&&M.push({pointNumber:x.pointNumber})}}return M}},75225:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(l.text,k,"tx"),M.mergeArray(l.texttemplate,k,"txt"),M.mergeArray(l.hovertext,k,"htx"),M.mergeArray(l.customdata,k,"data"),M.mergeArray(l.textposition,k,"tp"),l.textfont&&(M.mergeArrayCastPositive(l.textfont.size,k,"ts"),M.mergeArray(l.textfont.color,k,"tc"),M.mergeArray(l.textfont.family,k,"tf"));var x=l.marker;if(x){M.mergeArrayCastPositive(x.size,k,"ms"),M.mergeArrayCastPositive(x.opacity,k,"mo"),M.mergeArray(x.symbol,k,"mx"),M.mergeArray(x.angle,k,"ma"),M.mergeArray(x.standoff,k,"mf"),M.mergeArray(x.color,k,"mc");var p=x.line;x.line&&(M.mergeArray(p.color,k,"mlc"),M.mergeArrayCastPositive(p.width,k,"mlw"));var s=x.gradient;s&&"none"!==s.type&&(M.mergeArray(s.type,k,"mgt"),M.mergeArray(s.color,k,"mgc"))}}},82196:function($,I,t){"use strict";var M=t(12663).axisHoverFormat,k=t(5386).s,l=t(5386).f,T=t(50693),x=t(41940),p=t(79952).P,s=t(79952).u,e=t(91424),o=t(47581),r=t(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},p,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:s,marker:r({symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:x({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(89298),T=t(42973),x=t(50606).BADNUM,p=t(34098),s=t(36922),e=t(75225),o=t(66279);function r(h,f,b,v,g,y,d){var m=f._length,w=h._fullLayout,u=b._id,S=v._id,_=w._firstScatter[i(f)]===f.uid,E=(c(f,w,b,v)||{}).orientation,L=f.fill;b._minDtick=0,v._minDtick=0;var C={padded:!0},P={padded:!0};d&&(C.ppad=P.ppad=d);var z=m<2||g[0]!==g[m-1]||y[0]!==y[m-1];z&&("tozerox"===L||"tonextx"===L&&(_||"h"===E))?C.tozero=!0:(f.error_y||{}).visible||"tonexty"!==L&&"tozeroy"!==L&&(p.hasMarkers(f)||p.hasText(f))||(C.padded=!1,C.ppad=0),z&&("tozeroy"===L||"tonexty"===L&&(_||"v"===E))?P.tozero=!0:"tonextx"!==L&&"tozerox"!==L||(P.padded=!1),u&&(f._extremes[u]=l.findExtremes(b,g,C)),S&&(f._extremes[S]=l.findExtremes(v,y,P))}function n(h,f){if(p.hasMarkers(h)){var b,v=h.marker,g=1.6*(h.marker.sizeref||1);if(b="area"===h.marker.sizemode?function(u){return Math.max(Math.sqrt((u||0)/g),3)}:function(u){return Math.max((u||0)/g,3)},k.isArrayOrTypedArray(v.size)){var y={type:"linear"};l.setConvert(y);for(var d=y.makeCalcdata(h.marker,"size"),m=new Array(f),w=0;w<f;w++)m[w]=b(d[w]);return m}return b(v.size)}}function a(h,f){var b=i(f),v=h._firstScatter;v[b]||(v[b]=f.uid)}function i(h){var f=h.stackgroup;return h.xaxis+h.yaxis+h.type+(f?"-"+f:"")}function c(h,f,b,v){var g=h.stackgroup;if(g){var y=f._scatterStackOpts[b._id+v._id][g],d="v"===y.orientation?v:b;return"linear"===d.type||"log"===d.type?y:void 0}}$.exports={calc:function(h,f){var b,v,g,y,d,m,w=h._fullLayout,u=f._xA=l.getFromId(h,f.xaxis||"x","x"),S=f._yA=l.getFromId(h,f.yaxis||"y","y"),_=u.makeCalcdata(f,"x"),E=S.makeCalcdata(f,"y"),L=T(f,u,"x",_),C=T(f,S,"y",E),P=L.vals,z=C.vals,j=f._length,R=new Array(j),V=f.ids,D=c(f,w,u,S),B=!1;a(w,f);var N,U="x",J="y";D?(k.pushUnique(D.traceIndices,f._expandedIndex),(b="v"===D.orientation)?(J="s",N="x"):(U="s",N="y"),d="interpolate"===D.stackgaps):r(h,f,u,S,P,z,n(f,j));var Y=!!f.xperiodalignment,q=!!f.yperiodalignment;for(v=0;v<j;v++){var H=R[v]={},X=M(P[v]),Q=M(z[v]);X&&Q?(H[U]=P[v],H[J]=z[v],Y&&(H.orig_x=_[v],H.xEnd=L.ends[v],H.xStart=L.starts[v]),q&&(H.orig_y=E[v],H.yEnd=C.ends[v],H.yStart=C.starts[v])):D&&(b?X:Q)?(H[N]=b?P[v]:z[v],H.gap=!0,d?(H.s=x,B=!0):H.s=0):H[U]=H[J]=x,V&&(H.id=String(V[v]))}if(e(R,f),s(h,f),o(R,f),D){for(v=0;v<R.length;)R[v][N]===x?R.splice(v,1):v++;if(k.sort(R,function(se,pe){return se[N]-pe[N]||se.i-pe.i}),B){for(v=0;v<R.length-1&&R[v].gap;)v++;for((m=R[v].s)||(m=R[v].s=0),g=0;g<v;g++)R[g].s=m;for(y=R.length-1;y>v&&R[y].gap;)y--;for(m=R[y].s,g=R.length-1;g>y;g--)R[g].s=m;for(;v<y;)if(R[++v].gap){for(g=v+1;R[g].gap;)g++;for(var ne=R[v-1][N],re=R[v-1].s,ae=(R[g].s-re)/(R[g][N]-ne);v<g;)R[v].s=re+(R[v][N]-ne)*ae,v++}}}return R},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:a,getStackOpts:c}},66279:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){M.isArrayOrTypedArray(l.selectedpoints)&&M.tagSelected(k,l)}},36922:function($,I,t){"use strict";var M=t(52075).hasColorscale,k=t(78803),l=t(34098);$.exports=function(T,x){l.hasLines(x)&&M(x,"line")&&k(T,x,{vals:x.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(x)&&(M(x,"marker")&&k(T,x,{vals:x.marker.color,containerStr:"marker",cLetter:"c"}),M(x,"marker.line")&&k(T,x,{vals:x.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function($){"use strict";$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function($,I,t){"use strict";var M=t(47761),k=t(11661).setGroupPositions;function l(T,x,p,s,e,o,r){e[s]=!0;var i,c,f,b,v,n={i:null,gap:!0,s:0};if(n[r]=p,T.splice(x,0,n),x&&p===T[x-1][r]){var a=T[x-1];n.s=a.s,n.i=a.i,n.gap=a.gap}else o&&(n.s=(f=r,b=(i=T)[(c=x)-1],(v=i[c+1])?b?b.s+(v.s-b.s)*(p-b[f])/(v[f]-b[f]):v.s:b.s));x||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}$.exports=function(T,x){"group"===T._fullLayout.scattermode&&function(N,U){for(var J=U.xaxis,Y=U.yaxis,q=N._fullLayout,H=N._fullData,X=N.calcdata,Q=[],ne=[],re=0;re<H.length;re++){var ae=H[re];!0===ae.visible&&"scatter"===ae.type&&ae.xaxis===J._id&&ae.yaxis===Y._id&&("h"===ae.orientation?Q.push(X[re]):"v"===ae.orientation&&ne.push(X[re]))}var se={mode:q.scattermode,gap:q.scattergap};k(N,J,Y,ne,se),k(N,Y,J,Q,se)}(T,x);var p=x.xaxis,s=x.yaxis,o=T._fullLayout._scatterStackOpts[p._id+s._id];if(o){var r,n,a,i,c,h,f,b,v,g,y,d,m,w,u,S=T.calcdata;for(var _ in o){var E=(g=o[_]).traceIndices;if(E.length){for(y="interpolate"===g.stackgaps,d=g.groupnorm,"v"===g.orientation?(m="x",w="y"):(m="y",w="x"),u=new Array(E.length),r=0;r<u.length;r++)u[r]=!1;h=S[E[0]];var L=new Array(h.length);for(r=0;r<h.length;r++)L[r]=h[r][m];for(r=1;r<E.length;r++){for(c=S[E[r]],n=a=0;n<c.length;n++){for(f=c[n][m];f>L[a]&&a<L.length;a++)l(c,n,L[a],r,u,y,m),n++;if(f!==L[a]){for(i=0;i<r;i++)l(S[E[i]],a,f,i,u,y,m);L.splice(a,0,f)}a++}for(;a<L.length;a++)l(c,n,L[a],r,u,y,m),n++}var C=L.length;for(n=0;n<h.length;n++){for(b=h[n][w]=h[n].s,r=1;r<E.length;r++)(c=S[E[r]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=C,c[n][w]=b+=c[n].s;if(d)for(v=("fraction"===d?b:b/100)||1,r=0;r<E.length;r++){var P=S[E[r]][n];P[w]/=v,P.sNorm=P.s/v}}for(r=0;r<E.length;r++){var z=(c=S[E[r]])[0].trace,j=M.calcMarkerSize(z,z._rawLength),R=Array.isArray(j);if(j&&u[r]||R){var V=j;for(j=new Array(C),n=0;n<C;n++)j[n]=c[n].gap?0:R?V[c[n].i]:V}var D=new Array(C),B=new Array(C);for(n=0;n<C;n++)D[n]=c[n].x,B[n]=c[n].y;M.calcAxisExpansion(T,z,p,s,D,B,j),c[0].t.orientation=g.orientation}}}}}},34936:function($,I,t){"use strict";var M=t(71828),k=t(26125),l=t(82196);$.exports=function(T,x){var s,e;function o(c){return M.coerce(s._input,s,l,c)}if("group"===x.scattermode)for(e=0;e<T.length;e++)"scatter"===(s=T[e]).type&&k(s._input,s,x,o);for(e=0;e<T.length;e++){var r=T[e];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var a=e-1;a>=0;a--){var i=T[a];if("scatter"===i.type&&i.xaxis===r.xaxis&&i.yaxis===r.yaxis){i.opacity=void 0;break}}}}}},17438:function($,I,t){"use strict";var M=t(71828),k=t(73972),l=t(82196),T=t(47581),x=t(34098),p=t(67513),s=t(73927),e=t(565),o=t(49508),r=t(11058),n=t(94039),a=t(82410),i=t(28908),c=t(71828).coercePattern;$.exports=function(h,f,b,v){function g(E,L){return M.coerce(h,f,l,E,L)}var y=p(h,f,v,g);if(y||(f.visible=!1),f.visible){s(h,f,v,g),g("xhoverformat"),g("yhoverformat");var d=e(h,f,v,g);"group"===v.scattermode&&void 0===f.orientation&&g("orientation","v");var m=!d&&y<T.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",m),x.hasLines(f)&&(r(h,f,b,v,g,{backoff:!0}),n(h,f,g),g("connectgaps"),g("line.simplify")),x.hasMarkers(f)&&o(h,f,b,v,g,{gradient:!0}),x.hasText(f)&&(g("texttemplate"),a(h,f,v,g));var w=[];(x.hasMarkers(f)||x.hasText(f))&&(g("cliponaxis"),g("marker.maxdisplayed"),w.push("points")),g("fill",d?d.fillDflt:"none"),"none"!==f.fill&&(i(h,f,b,g),x.hasLines(f)||n(h,f,g),c(g,"fillpattern",f.fillcolor,!1));var u=(f.line||{}).color,S=(f.marker||{}).color;"tonext"!==f.fill&&"toself"!==f.fill||w.push("fills"),g("hoveron",w.join("+")||"points"),"fills"!==f.hoveron&&g("hovertemplate");var _=k.getComponentMethod("errorbars","supplyDefaults");_(h,f,u||S||b,{axis:"y"}),_(h,f,u||S||b,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(f,g)}}},28908:function($,I,t){"use strict";var M=t(7901),k=t(71828).isArrayOrTypedArray;$.exports=function(l,T,x,p){var s=!1;if(T.marker){var e=T.marker.color,o=(T.marker.line||{}).color;e&&!k(e)?s=e:o&&!k(o)&&(s=o)}p("fillcolor",M.addOpacity((T.line||{}).color||s||x,.5))}},8225:function($,I,t){"use strict";var M=t(89298);$.exports=function(k,l,T){var x={},p={_fullLayout:T},s=M.getFromTrace(p,l,"x"),e=M.getFromTrace(p,l,"y"),o=k.orig_x;void 0===o&&(o=k.x);var r=k.orig_y;return void 0===r&&(r=k.y),x.xLabel=M.tickText(s,s.c2l(o),!0).text,x.yLabel=M.tickText(e,e.c2l(r),!0).text,x}},34603:function($,I,t){"use strict";var M=t(7901),k=t(34098);$.exports=function(l,T){var x,p;if("lines"===l.mode)return(x=l.line.color)&&M.opacity(x)?x:l.fillcolor;if("none"===l.mode)return l.fill?l.fillcolor:"";var s=T.mcc||(l.marker||{}).color,e=T.mlcc||((l.marker||{}).line||{}).color;return(p=s&&M.opacity(s)?s:e&&M.opacity(e)&&(T.mlw||((l.marker||{}).line||{}).width)?e:"")?M.opacity(p)<.3?M.addOpacity(p,.3):p:(x=(l.line||{}).color)&&M.opacity(x)&&k.hasLines(l)&&l.line.width?x:l.fillcolor}},26125:function($,I,t){"use strict";var M=t(99082).getAxisGroup;$.exports=function(k,l,T,x){var p=l.orientation,e=M(T,l[{v:"x",h:"y"}[p]+"axis"])+p,o=T._alignmentOpts||{},r=x("alignmentgroup"),n=o[e];n||(n=o[e]={});var a=n[r];a?a.traces.push(l):a=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var i=x("offsetgroup"),c=a.offsetGroups,h=c[i];i&&(h||(h=c[i]={offsetIndex:Object.keys(c).length}),l._offsetIndex=h.offsetIndex)}},33720:function($,I,t){"use strict";var M=t(71828),k=t(30211),l=t(73972),T=t(34603),x=t(7901),p=M.fillText;$.exports=function(s,e,o,r){var n=s.cd,a=n[0].trace,i=s.xa,c=s.ya,h=i.c2p(e),f=c.c2p(o),b=[h,f],v=a.hoveron||"",g=-1!==a.mode.indexOf("markers")?3:.5,y=!!a.xperiodalignment,d=!!a.yperiodalignment;if(-1!==v.indexOf("points")){var m=function(ke){var me=Math.max(g,ke.mrc||0),le=i.c2p(ke.x)-h,ue=c.c2p(ke.y)-f;return Math.max(Math.sqrt(le*le+ue*ue)-me,1-g/me)},w=k.getDistanceFunction(r,function(ke){if(y){var me=i.c2p(ke.xStart),le=i.c2p(ke.xEnd);return h>=Math.min(me,le)&&h<=Math.max(me,le)?0:1/0}var ue=Math.max(3,ke.mrc||0),Ee=1-1/ue,de=Math.abs(i.c2p(ke.x)-h);return de<ue?Ee*de/ue:de-ue+Ee},function(ke){if(d){var me=c.c2p(ke.yStart),le=c.c2p(ke.yEnd);return f>=Math.min(me,le)&&f<=Math.max(me,le)?0:1/0}var ue=Math.max(3,ke.mrc||0),Ee=1-1/ue,de=Math.abs(c.c2p(ke.y)-f);return de<ue?Ee*de/ue:de-ue+Ee},m);if(k.getClosest(n,w,s),!1!==s.index){var u=n[s.index],S=i.c2p(u.x,!0),_=c.c2p(u.y,!0),E=u.mrc||1;s.index=u.i;var L=n[0].t.orientation,C=L&&(u.sNorm||u.s),P="h"===L?C:void 0!==u.orig_x?u.orig_x:u.x,z="v"===L?C:void 0!==u.orig_y?u.orig_y:u.y;return M.extendFlat(s,{color:T(a,u),x0:S-E,x1:S+E,xLabelVal:P,y0:_-E,y1:_+E,yLabelVal:z,spikeDistance:m(u),hovertemplate:a.hovertemplate}),p(u,a,s),l.getComponentMethod("errorbars","hoverInfo")(u,a,s),[s]}}if(-1!==v.indexOf("fills")&&a._polygons){var j,R,V,D,B,N,J,Y,q=a._polygons,H=[],X=!1,Q=1/0,ne=-1/0,re=1/0,ae=-1/0;for(j=0;j<q.length;j++)(V=q[j]).contains(b)&&(X=!X,H.push(V),re=Math.min(re,V.ymin),ae=Math.max(ae,V.ymax));if(X){var se=((re=Math.max(re,0))+(ae=Math.min(ae,c._length)))/2;for(j=0;j<H.length;j++)for(D=H[j].pts,R=1;R<D.length;R++)(J=D[R-1][1])>se!=(Y=D[R][1])>=se&&(N=D[R-1][0],Y-J&&(B=N+(D[R][0]-N)*(se-J)/(Y-J),Q=Math.min(Q,B),ne=Math.max(ne,B)));Q=Math.max(Q,0),ne=Math.min(ne,i._length);var pe=x.defaultLine;return x.opacity(a.fillcolor)?pe=a.fillcolor:x.opacity((a.line||{}).color)&&(pe=a.line.color),M.extendFlat(s,{distance:s.maxHoverDistance,x0:Q,x1:ne,y0:se,y1:se,color:pe,hovertemplate:!1}),delete s.index,s.text=a.text&&!Array.isArray(a.text)?String(a.text):a.name,[s]}}}},67368:function($,I,t){"use strict";var M=t(34098);$.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:t(82196),layoutAttributes:t(21479),supplyDefaults:t(17438),crossTraceDefaults:t(34936),supplyLayoutDefaults:t(79334),calc:t(47761).calc,crossTraceCalc:t(72626),arraysToCalcdata:t(75225),plot:t(32663),colorbar:t(4898),formatLabels:t(8225),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(33720),selectPoints:t(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function($){"use strict";$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function($,I,t){"use strict";var M=t(71828),k=t(21479);$.exports=function(l,T){"group"===T.scattermode&&M.coerce(l,T,k,"scattergap","group"===T.barmode?T.bargap:.2)}},11058:function($,I,t){"use strict";var M=t(71828).isArrayOrTypedArray,k=t(52075).hasColorscale,l=t(1586);$.exports=function(T,x,p,s,e,o){o||(o={});var r=(T.marker||{}).color;e("line.color",p),k(T,"line")?l(T,x,s,e,{prefix:"line.",cLetter:"c"}):e("line.color",!M(r)&&r||p),e("line.width"),o.noDash||e("line.dash"),o.backoff&&e("line.backoff")}},34621:function($,I,t){"use strict";var M=t(91424),k=t(50606),l=k.BADNUM,T=k.LOG_CLIP,x=T+.5,p=T-.5,s=t(71828),e=s.segmentsIntersect,o=s.constrain,r=t(47581);$.exports=function(n,a){var i,c,h,f,b,v,g,y,d,m,w,u,S,_,E,L,C,P,z=a.trace||{},j=a.xaxis,R=a.yaxis,V="log"===j.type,D="log"===R.type,B=j._length,N=R._length,U=a.backoff,J=z.marker,Y=a.connectGaps,q=a.baseTolerance,H=a.shape,X="linear"===H,Q=z.fill&&"none"!==z.fill,ne=[],re=r.minTolerance,ae=n.length,se=new Array(ae),pe=0;function ke(Dt){var Ye=n[Dt];if(!Ye)return!1;var Ze=a.linearized?j.l2p(Ye.x):j.c2p(Ye.x),Ne=a.linearized?R.l2p(Ye.y):R.c2p(Ye.y);if(Ze===l){if(V&&(Ze=j.c2p(Ye.x,!0)),Ze===l)return!1;D&&Ne===l&&(Ze*=Math.abs(j._m*N*(j._m>0?x:p)/(R._m*B*(R._m>0?x:p)))),Ze*=1e3}if(Ne===l){if(D&&(Ne=R.c2p(Ye.y,!0)),Ne===l)return!1;Ne*=1e3}return[Ze,Ne]}function me(Dt,Ye,Ze,Ne){var Je=Ze-Dt,at=Ne-Ye,Se=.5-Dt,ze=.5-Ye,Ke=Je*Je+at*at,it=Je*Se+at*ze;if(it>0&&it<Ke){var ct=Se*at-ze*Je;if(ct*ct<Ke)return!0}}function le(Dt,Ye){var Ze=Dt[0]/B,Ne=Dt[1]/N,Je=Math.max(0,-Ze,Ze-1,-Ne,Ne-1);return Je&&void 0!==C&&me(Ze,Ne,C,P)&&(Je=0),Je&&Ye&&me(Ze,Ne,Ye[0]/B,Ye[1]/N)&&(Je=0),(1+r.toleranceGrowth*Je)*q}function ue(Dt,Ye){var Ze=Dt[0]-Ye[0],Ne=Dt[1]-Ye[1];return Math.sqrt(Ze*Ze+Ne*Ne)}var Ee,de,xe,Te,we,K,oe,he=r.maxScreensAway,ye=-B*he,Me=B*(1+he),Re=-N*he,Pe=N*(1+he),De=[[ye,Re,Me,Re],[Me,Re,Me,Pe],[Me,Pe,ye,Pe],[ye,Pe,ye,Re]];function fe(Dt){if(Dt[0]<ye||Dt[0]>Me||Dt[1]<Re||Dt[1]>Pe)return[o(Dt[0],ye,Me),o(Dt[1],Re,Pe)]}function ge(Dt,Ye){return Dt[0]===Ye[0]&&(Dt[0]===ye||Dt[0]===Me)||Dt[1]===Ye[1]&&(Dt[1]===Re||Dt[1]===Pe)||void 0}function be(Dt,Ye,Ze){return function(Ne,Je){var at=fe(Ne),Se=fe(Je),ze=[];if(at&&Se&&ge(at,Se))return ze;at&&ze.push(at),Se&&ze.push(Se);var Ke=2*s.constrain((Ne[Dt]+Je[Dt])/2,Ye,Ze)-((at||Ne)[Dt]+(Se||Je)[Dt]);return Ke&&((at&&Se?Ke>0==at[Dt]>Se[Dt]?at:Se:at||Se)[Dt]+=Ke),ze}}function Ie(Dt){var Ye=Dt[0],Ze=Dt[1],Ne=Ye===se[pe-1][0],Je=Ze===se[pe-1][1];if(!Ne||!Je)if(pe>1){var at=Ye===se[pe-2][0],Se=Ze===se[pe-2][1];Ne&&(Ye===ye||Ye===Me)&&at?Se?pe--:se[pe-1]=Dt:Je&&(Ze===Re||Ze===Pe)&&Se?at?pe--:se[pe-1]=Dt:se[pe++]=Dt}else se[pe++]=Dt}function He(Dt){se[pe-1][0]!==Dt[0]&&se[pe-1][1]!==Dt[1]&&Ie([xe,Te]),Ie(Dt),we=null,xe=Te=0}"linear"===H||"spline"===H?oe=function(Dt,Ye){for(var Ze=[],Ne=0,Je=0;Je<4;Je++){var at=De[Je],Se=e(Dt[0],Dt[1],Ye[0],Ye[1],at[0],at[1],at[2],at[3]);Se&&(!Ne||Math.abs(Se.x-Ze[0][0])>1||Math.abs(Se.y-Ze[0][1])>1)&&(Se=[Se.x,Se.y],Ne&&ue(Se,Dt)<ue(Ze[0],Dt)?Ze.unshift(Se):Ze.push(Se),Ne++)}return Ze}:"hv"===H||"vh"===H?oe=function(Dt,Ye){var Ze=[],Ne=fe(Dt),Je=fe(Ye);return Ne&&Je&&ge(Ne,Je)||(Ne&&Ze.push(Ne),Je&&Ze.push(Je)),Ze}:"hvh"===H?oe=be(0,ye,Me):"vhv"===H&&(oe=be(1,Re,Pe));var Ve=s.isArrayOrTypedArray(J);function tt(Dt){if(Dt&&U&&(Dt.i=i,Dt.d=n,Dt.trace=z,Dt.marker=Ve?J[Dt.i]:J,Dt.backoff=U),C=Dt[0]/B,P=Dt[1]/N,de=Dt[1]<Re?Re:Dt[1]>Pe?Pe:0,(Ee=Dt[0]<ye?ye:Dt[0]>Me?Me:0)||de){if(pe)if(we){var Ye=oe(we,Dt);Ye.length>1&&(He(Ye[0]),se[pe++]=Ye[1])}else K=oe(se[pe-1],Dt)[0],se[pe++]=K;else se[pe++]=[Ee||Dt[0],de||Dt[1]];var Ze=se[pe-1];Ee&&de&&(Ze[0]!==Ee||Ze[1]!==de)?(we&&(xe!==Ee&&Te!==de?Ie(xe&&Te?(at=(Je=Dt)[0]-(Ne=we)[0],Se=(Je[1]-Ne[1])/at,(Ne[1]*Je[0]-Je[1]*Ne[0])/at>0?[Se>0?ye:Me,Pe]:[Se>0?Me:ye,Re]):[xe||Ee,Te||de]):xe&&Te&&Ie([xe,Te])),Ie([Ee,de])):xe-Ee&&Te-de&&Ie([Ee||xe,de||Te]),we=Dt,xe=Ee,Te=de}else we&&He(oe(we,Dt)[0]),se[pe++]=Dt;var Ne,Je,at,Se}for(i=0;i<ae;i++)if(c=ke(i)){for(pe=0,we=null,tt(c),i++;i<ae;i++){if(!(f=ke(i))){if(Y)continue;break}if(X&&a.simplify){var nt=ke(i+1);if(m=ue(f,c),Q&&(0===pe||pe===ae-1)||!(m<le(f,nt)*re)){for(y=[(f[0]-c[0])/m,(f[1]-c[1])/m],b=c,w=m,u=_=E=0,g=!1,h=f,i++;i<n.length;i++){if(v=nt,nt=ke(i+1),!v){if(Y)continue;break}if(L=(d=[v[0]-c[0],v[1]-c[1]])[0]*y[1]-d[1]*y[0],_=Math.min(_,L),(E=Math.max(E,L))-_>le(v,nt))break;h=v,(S=d[0]*y[0]+d[1]*y[1])>w?(w=S,f=v,g=!1):S<u&&(u=S,b=v,g=!0)}if(g?(tt(f),h!==b&&tt(b)):(b!==c&&tt(b),h!==f&&tt(f)),tt(h),i>=n.length||!v)break;tt(v),c=v}}else tt(f)}we&&Ie([xe||we[0],Te||we[1]]),ne.push(se.slice(0,pe))}var st=H.slice(H.length-1);if(U&&"h"!==st&&"v"!==st){for(var dt=!1,wt=-1,_t=[],pt=0;pt<ne.length;pt++)for(var Pt=0;Pt<ne[pt].length-1;Pt++){var St=ne[pt][Pt],Ot=ne[pt][Pt+1],jt=M.applyBackoff(Ot,St);jt[0]===Ot[0]&&jt[1]===Ot[1]||(dt=!0),_t[wt+1]||(_t[++wt]=[St,[jt[0],jt[1]]])}return dt?_t:ne}return ne}},94039:function($){"use strict";$.exports=function(I,t,M){"spline"===M("line.shape")&&M("line.smoothing")}},68687:function($){"use strict";var I={tonextx:1,tonexty:1,tonext:1};$.exports=function(t,M,k){var l,T,x,p,s,e={},o=!1,r=-1,n=0,a=-1;for(T=0;T<k.length;T++)(x=(l=k[T][0].trace).stackgroup||"")?x in e?s=e[x]:(s=e[x]=n,n++):l.fill in I&&a>=0?s=a:(s=a=n,n++),s<r&&(o=!0),l._groupIndex=r=s;var i=k.slice();o&&i.sort(function(h,f){var b=h[0].trace,v=f[0].trace;return b._groupIndex-v._groupIndex||b.index-v.index});var c={};for(T=0;T<i.length;T++)x=(l=i[T][0].trace).stackgroup||"",!0===l.visible?(l._nexttrace=null,l.fill in I&&(l._prevtrace=(p=c[x])||null,p&&(p._nexttrace=l)),l._ownfill=l.fill&&("tozero"===l.fill.substr(0,6)||"toself"===l.fill||"to"===l.fill.substr(0,2)&&!l._prevtrace),c[x]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return i}},39984:function($,I,t){"use strict";var M=t(92770);$.exports=function(k,l){l||(l=2);var T=k.marker,x=T.sizeref||1,p=T.sizemin||0,s="area"===T.sizemode?function(e){return Math.sqrt(e/x)}:function(e){return e/x};return function(e){var o=s(e/l);return M(o)&&o>0?Math.max(o,p):0}}},4898:function($){"use strict";$.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function($,I,t){"use strict";var M=t(7901),k=t(52075).hasColorscale,l=t(1586),T=t(34098);$.exports=function(x,p,s,e,o,r){var n=T.isBubble(x),a=(x.line||{}).color;r=r||{},a&&(s=a),o("marker.symbol"),o("marker.opacity",n?.7:1),o("marker.size"),r.noAngle||(o("marker.angle"),r.noAngleRef||o("marker.angleref"),r.noStandOff||o("marker.standoff")),o("marker.color",s),k(x,"marker")&&l(x,p,e,o,{prefix:"marker.",cLetter:"c"}),r.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),r.noLine||(o("marker.line.color",a&&!Array.isArray(a)&&p.marker.color!==a?a:n?M.background:M.defaultLine),k(x,"marker.line")&&l(x,p,e,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",n?1:0)),n&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),r.gradient&&"none"!==o("marker.gradient.type")&&o("marker.gradient.color")}},73927:function($,I,t){"use strict";var M=t(71828).dateTick0,k=t(50606).ONEWEEK;function l(T,x){return M(x,T%k==0?1:0)}$.exports=function(T,x,p,s,e){if(e||(e={x:!0,y:!0}),e.x){var o=s("xperiod");o&&(s("xperiod0",l(o,x.xcalendar)),s("xperiodalignment"))}if(e.y){var r=s("yperiod");r&&(s("yperiod0",l(r,x.ycalendar)),s("yperiodalignment"))}}},32663:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(71828),T=l.ensureSingle,x=l.identity,p=t(91424),s=t(34098),e=t(34621),o=t(68687),r=t(61082).tester;function n(a,i,c,h,f,b,v){var g,y=a._context.staticPlot;!function(oe,he,ye,Me,Re){var Pe=ye.xaxis,De=ye.yaxis,fe=M.extent(l.simpleMap(Pe.range,Pe.r2c)),ge=M.extent(l.simpleMap(De.range,De.r2c)),be=Me[0].trace;if(s.hasMarkers(be)){var Ie=be.marker.maxdisplayed;if(0!==Ie){var He=Me.filter(function(st){return st.x>=fe[0]&&st.x<=fe[1]&&st.y>=ge[0]&&st.y<=ge[1]}),Ve=Math.ceil(He.length/Ie),tt=0;Re.forEach(function(st,dt){var wt=st[0].trace;s.hasMarkers(wt)&&wt.marker.maxdisplayed>0&&dt<he&&tt++});var nt=Math.round(tt*Ve/3+Math.floor(tt/3)*Ve/7.1);Me.forEach(function(st){delete st.vis}),He.forEach(function(st,dt){0===Math.round((dt+nt)%Ve)&&(st.vis=!0)})}}}(0,i,c,h,f);var d=!!v&&v.duration>0;function m(oe){return d?oe.transition():oe}var w=c.xaxis,u=c.yaxis,S=h[0].trace,_=S.line,E=M.select(b),L=T(E,"g","errorbars"),C=T(E,"g","lines"),P=T(E,"g","points"),z=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,L,c,v),!0===S.visible){var j,R;m(E).style("opacity",S.opacity);var V=S.fill.charAt(S.fill.length-1);"x"!==V&&"y"!==V&&(V=""),h[0][c.isRangePlot?"nodeRangePlot3":"node3"]=E;var D,B,N="",U=[],J=S._prevtrace;J&&(N=J._prevRevpath||"",R=J._nextFill,U=J._polygons);var Y,q,H,X,Q,ne,re,ae="",se="",pe=[],ke=l.noop;if(j=S._ownFill,s.hasLines(S)||"none"!==S.fill){for(R&&R.datum(h),-1!==["hv","vh","hvh","vhv"].indexOf(_.shape)?(Y=p.steps(_.shape),q=p.steps(_.shape.split("").reverse().join(""))):Y=q="spline"===_.shape?function(oe){var he=oe[oe.length-1];return oe.length>1&&oe[0][0]===he[0]&&oe[0][1]===he[1]?p.smoothclosed(oe.slice(1),_.smoothing):p.smoothopen(oe,_.smoothing)}:function(oe){return"M"+oe.join("L")},H=function(oe){return q(oe.reverse())},pe=e(h,{xaxis:w,yaxis:u,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(_.width||1,3)/4,shape:_.shape,backoff:_.backoff,simplify:_.simplify,fill:S.fill}),re=S._polygons=new Array(pe.length),g=0;g<pe.length;g++)S._polygons[g]=r(pe[g]);pe.length&&(X=pe[0][0],ne=(Q=pe[pe.length-1])[Q.length-1]),ke=function(oe){return function(he){if(D=Y(he),B=H(he),ae?V?(ae+="L"+D.substr(1),se=B+"L"+se.substr(1)):(ae+="Z"+D,se=B+"Z"+se):(ae=D,se=B),s.hasLines(S)){var ye=M.select(this);if(ye.datum(h),oe)m(ye.style("opacity",0).attr("d",D).call(p.lineGroupStyle)).style("opacity",1);else{var Me=m(ye);Me.attr("d",D),p.singleLineStyle(h,Me)}}}}}var me=C.selectAll(".js-line").data(pe);m(me.exit()).style("opacity",0).remove(),me.each(ke(!1)),me.enter().append("path").classed("js-line",!0).style("vector-effect",y?"none":"non-scaling-stroke").call(p.lineGroupStyle).each(ke(!0)),p.setClipUrl(me,c.layerClipId,a),pe.length?(j?(j.datum(h),X&&ne&&(V?("y"===V?X[1]=ne[1]=u.c2p(0,!0):"x"===V&&(X[0]=ne[0]=w.c2p(0,!0)),m(j).attr("d","M"+ne+"L"+X+"L"+ae.substr(1)).call(p.singleFillStyle,a)):m(j).attr("d",ae+"Z").call(p.singleFillStyle,a))):R&&("tonext"===S.fill.substr(0,6)&&ae&&N?("tonext"===S.fill?m(R).attr("d",ae+"Z"+N+"Z").call(p.singleFillStyle,a):m(R).attr("d",ae+"L"+N.substr(1)+"Z").call(p.singleFillStyle,a),S._polygons=S._polygons.concat(U)):(ue(R),S._polygons=null)),S._prevRevpath=se,S._prevPolygons=re):(j?ue(j):R&&ue(R),S._polygons=S._prevRevpath=S._prevPolygons=null),P.datum(h),z.datum(h),function(oe,he,ye){var Me,Re=ye[0].trace,Pe=s.hasMarkers(Re),De=s.hasText(Re),fe=function we(oe){if(oe.ids)return Te}(Re),ge=K,be=K;if(Pe||De){var Ie=x,He=Re.stackgroup,Ve=He&&"infer zero"===a._fullLayout._scatterStackOpts[w._id+u._id][He].stackgaps;Re.marker.maxdisplayed||Re._needsCull?Ie=Ve?de:Ee:He&&!Ve&&(Ie=xe),Pe&&(ge=Ie),De&&(be=Ie)}var tt,nt=(Me=oe.selectAll("path.point").data(ge,fe)).enter().append("path").classed("point",!0);d&&nt.call(p.pointStyle,Re,a).call(p.translatePoints,w,u).style("opacity",0).transition().style("opacity",1),Me.order(),Pe&&(tt=p.makePointStyleFns(Re)),Me.each(function(st){var dt=M.select(this),wt=m(dt);p.translatePoint(st,wt,w,u)?(p.singlePointStyle(st,wt,Re,tt,a),c.layerClipId&&p.hideOutsideRangePoint(st,wt,w,u,Re.xcalendar,Re.ycalendar),Re.customdata&&dt.classed("plotly-customdata",null!=st.data)):wt.remove()}),d?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),(Me=he.selectAll("g").data(be,fe)).enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(st){var dt=M.select(this),wt=m(dt.select("text"));p.translatePoint(st,wt,w,u)?c.layerClipId&&p.hideOutsideRangePoint(st,dt,w,u,Re.xcalendar,Re.ycalendar):dt.remove()}),Me.selectAll("text").call(p.textPointStyle,Re,a).each(function(st){var dt=w.c2p(st.x),wt=u.c2p(st.y);M.select(this).selectAll("tspan.line").each(function(){m(M.select(this)).attr({x:dt,y:wt})})}),Me.exit().remove()}(P,z,h);var le=!1===S.cliponaxis?null:c.layerClipId;p.setClipUrl(P,le,a),p.setClipUrl(z,le,a)}function ue(oe){m(oe).attr("d","M0,0Z")}function Ee(oe){return oe.filter(function(he){return!he.gap&&he.vis})}function de(oe){return oe.filter(function(he){return he.vis})}function xe(oe){return oe.filter(function(he){return!he.gap})}function Te(oe){return oe.id}function K(){return!1}}$.exports=function(a,i,c,h,f,b){var v,g,w,S,y=!f,d=!!f&&f.duration>0,m=o(a,i,c);(v=h.selectAll("g.trace").data(m,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),v.order(),w=a,S=i,v.each(function(_){var E=T(M.select(this),"g","fills");p.setClipUrl(E,S.layerClipId,w);var L=_[0].trace,C=[];L._ownfill&&C.push("_ownFill"),L._nexttrace&&C.push("_nextFill");var P=E.selectAll("g").data(C,x);P.enter().append("g"),P.exit().each(function(z){L[z]=null}).remove(),P.order().each(function(z){L[z]=T(M.select(this),"path","js-fill")})}),d?(b&&(g=b()),M.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){h.selectAll("g.trace").each(function(w,u){n(a,u,i,w,m,this,f)})})):v.each(function(w,u){n(a,u,i,w,m,this,f)}),y&&v.exit().remove(),h.selectAll("path:not([d])").remove()}},98002:function($,I,t){"use strict";var M=t(34098);$.exports=function(k,l){var T,x,p,s,e=k.cd,o=k.xaxis,r=k.yaxis,n=[],a=e[0].trace;if(!M.hasMarkers(a)&&!M.hasText(a))return[];if(!1===l)for(T=0;T<e.length;T++)e[T].selected=0;else for(T=0;T<e.length;T++)p=o.c2p((x=e[T]).x),s=r.c2p(x.y),null!==x.i&&l.contains([p,s],!1,T,k)?(n.push({pointNumber:x.i,x:o.c2d(x.x),y:r.c2d(x.y)}),x.selected=1):x.selected=0;return n}},565:function($){"use strict";var I=["orientation","groupnorm","stackgaps"];$.exports=function(t,M,k,l){var T=k._scatterStackOpts,x=l("stackgroup");if(x){var p=M.xaxis+M.yaxis,s=T[p];s||(s=T[p]={});var e=s[x],o=!1;e?e.traces.push(M):(e=s[x]={traceIndices:[],traces:[M]},o=!0);for(var r={orientation:M.x&&!M.y?"h":"v"},n=0;n<I.length;n++){var a=I[n],i=a+"Found";if(!e[i]){var c=void 0!==t[a],h="orientation"===a;if((c||o)&&(e[a]=l(a,r[a]),h&&(e.fillDflt="h"===e[a]?"tonextx":"tonexty"),c&&(e[i]=!0,!o&&(delete e.traces[0][a],h))))for(var f=0;f<e.traces.length-1;f++){var b=e.traces[f];b._input.fill!==b.fill&&(b.fill=e.fillDflt)}}}return e}}},16296:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(73972);function T(p,s,e){k.pointStyle(p.selectAll("path.point"),s,e)}function x(p,s,e){k.textPointStyle(p.selectAll("text"),s,e)}$.exports={style:function(p){var s=M.select(p).selectAll("g.trace.scatter");s.style("opacity",function(e){return e[0].trace.opacity}),s.selectAll("g.points").each(function(e){T(M.select(this),e.trace||e[0].trace,p)}),s.selectAll("g.text").each(function(e){x(M.select(this),e.trace||e[0].trace,p)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,p),l.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:x,styleOnSelect:function(p,s,e){var o=s[0].trace;o.selectedpoints?(k.selectedPointStyle(e.selectAll("path.point"),o),k.selectedTextStyle(e.selectAll("text"),o)):(T(e,o,p),x(e,o,p))}}},34098:function($,I,t){"use strict";var M=t(71828);$.exports={hasLines:function(k){return k.visible&&k.mode&&-1!==k.mode.indexOf("lines")},hasMarkers:function(k){return k.visible&&(k.mode&&-1!==k.mode.indexOf("markers")||"splom"===k.type)},hasText:function(k){return k.visible&&k.mode&&-1!==k.mode.indexOf("text")},isBubble:function(k){return M.isPlainObject(k.marker)&&M.isArrayOrTypedArray(k.marker.size)}}},82410:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l,T,x,p){p=p||{},x("textposition"),M.coerceFont(x,"textfont",T.font),p.noSelect||(x("selected.textfont.color"),x("unselected.textfont.color"))}},67513:function($,I,t){"use strict";var M=t(71828),k=t(73972);$.exports=function(l,T,x,p){var s,e=p("x"),o=p("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(l,T,["x","y"],x),e){var r=M.minRowLength(e);o?s=Math.min(r,M.minRowLength(o)):(s=r,p("y0"),p("dy"))}else{if(!o)return 0;s=M.minRowLength(o),p("x0"),p("dx")}return T._length=s,s}},44542:function($,I,t){"use strict";var M=t(82196),k=t(50693),l=t(12663).axisHoverFormat,T=t(5386).f,x=t(5386).s,p=t(9012),s=t(29659),e=t(87381),o=t(1426).extendFlat,r=t(30962).overrideAll,n=t(78607),i=M.marker,c=i.line,h=o({width:M.line.width,dash:{valType:"enumerated",values:n(s),dflt:"solid"}},k("line")),f=$.exports=r({x:M.x,y:M.y,z:{valType:"data_array"},text:o({},M.text,{}),texttemplate:x({},{}),hovertext:o({},M.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:o({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:h,marker:o({symbol:{valType:"enumerated",values:n(e),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},c.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:o({},M.textposition,{dflt:"top center"}),textfont:{color:M.textfont.color,size:M.textfont.size,family:o({},M.textfont.family,{arrayOk:!1})},opacity:p.opacity,hoverinfo:o({},p.hoverinfo)},"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes"},36563:function($,I,t){"use strict";var M=t(75225),k=t(36922);$.exports=function(l,T){var x=[{x:!1,y:!1,trace:T,t:{}}];return M(x,T),k(l,T),x}},67336:function($,I,t){"use strict";var M=t(73972);function k(l,T,x,p){if(!T||!T.visible)return null;for(var s=M.getComponentMethod("errorbars","makeComputeError")(T),e=new Array(l.length),o=0;o<l.length;o++){var r=s(+l[o],o);if("log"===p.type){var n=p.c2l(l[o]),a=l[o]-r[0],i=l[o]+r[1];if(e[o]=[(p.c2l(a,!0)-n)*x,(p.c2l(i,!0)-n)*x],a>0){var c=p.c2l(a);p._lowerLogErrorBound||(p._lowerLogErrorBound=c),p._lowerErrorBound=Math.min(p._lowerLogErrorBound,c)}}else e[o]=[-r[0]*x,r[1]*x]}return e}$.exports=function(l,T,x){var p=[k(l.x,l.error_x,T[0],x.xaxis),k(l.y,l.error_y,T[1],x.yaxis),k(l.z,l.error_z,T[2],x.zaxis)],s=function(i){for(var c=0;c<i.length;c++)if(i[c])return i[c].length;return 0}(p);if(0===s)return null;for(var e=new Array(s),o=0;o<s;o++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(p[n])for(var a=0;a<2;a++)r[a][n]=p[n][o][a];e[o]=r}return e}},58925:function($,I,t){"use strict";var M=t(9330).gl_line3d,k=t(9330).gl_scatter3d,l=t(9330).gl_error3d,T=t(9330).gl_mesh3d,x=t(9330).delaunay_triangulate,p=t(71828),s=t(78614),e=t(81697).formatColor,o=t(39984),r=t(29659),n=t(87381),a=t(89298),i=t(23469).appendArrayPointValue,c=t(67336);function h(u,S){this.scene=u,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=h.prototype;function b(u){return null==u?0:u.indexOf("left")>-1?-1:u.indexOf("right")>-1?1:0}function v(u){return null==u?0:u.indexOf("top")>-1?-1:u.indexOf("bottom")>-1?1:0}function g(u,S){return S(4*u)}function y(u){return n[u]}function d(u,S,_,E,L){var C=null;if(p.isArrayOrTypedArray(u)){C=[];for(var P=0;P<S;P++)C[P]=void 0===u[P]?E:_(u[P],L)}else C=_(u,p.identity);return C}function m(u){if(p.isArrayOrTypedArray(u)){var S=u[0];return p.isArrayOrTypedArray(S)&&(u=S),"rgb("+u.slice(0,3).map(function(_){return Math.round(255*_)})+")"}return null}function w(u){return p.isArrayOrTypedArray(u)?4===u.length&&"number"==typeof u[0]?m(u):u.map(m):null}f.handlePick=function(u){if(u.object&&(u.object===this.linePlot||u.object===this.delaunayMesh||u.object===this.textMarkers||u.object===this.scatterPlot)){var S=u.index=u.data.index;return u.object.highlight&&u.object.highlight(null),this.scatterPlot&&(u.object=this.scatterPlot,this.scatterPlot.highlight(u.data)),u.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||0===this.textLabels[S])&&(u.textLabel=this.textLabels[S]):u.textLabel=this.textLabels),u.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},f.update=function(u){var S,_,E,L,C=this.scene.glplot.gl,P=r.solid;this.data=u;var z=function(V,D){var B,N,U,J,Y,q,H=[],X=V.fullSceneLayout,Q=V.dataScale,ne=X.xaxis,re=X.yaxis,ae=X.zaxis,se=D.marker,pe=D.line,ke=D.x||[],me=D.y||[],le=D.z||[],ue=ke.length,Ee=D.xcalendar,de=D.ycalendar,xe=D.zcalendar;for(Y=0;Y<ue;Y++)B=ne.d2l(ke[Y],0,Ee)*Q[0],N=re.d2l(me[Y],0,de)*Q[1],U=ae.d2l(le[Y],0,xe)*Q[2],H[Y]=[B,N,U];if(Array.isArray(D.text))q=D.text;else if(void 0!==D.text)for(q=new Array(ue),Y=0;Y<ue;Y++)q[Y]=D.text;function Te(He,Ve){var tt=X[He];return a.tickText(tt,tt.d2l(Ve),!0).text}var we=D.texttemplate;if(we){var K=V.fullLayout._d3locale,oe=Array.isArray(we),he=oe?Math.min(we.length,ue):ue,ye=oe?function(He){return we[He]}:function(){return we};for(q=new Array(he),Y=0;Y<he;Y++){var Me={x:ke[Y],y:me[Y],z:le[Y]},Re={xLabel:Te("xaxis",ke[Y]),yLabel:Te("yaxis",me[Y]),zLabel:Te("zaxis",le[Y])},Pe={};i(Pe,D,Y);var De=D._meta||{};q[Y]=p.texttemplateString(ye(Y),Re,K,Pe,Me,De)}}if(J={position:H,mode:D.mode,text:q},"line"in D&&(J.lineColor=e(pe,1,ue),J.lineWidth=pe.width,J.lineDashes=pe.dash),"marker"in D){var fe=o(D);J.scatterColor=e(se,1,ue),J.scatterSize=d(se.size,ue,g,20,fe),J.scatterMarker=d(se.symbol,ue,y,"\u25cf"),J.scatterLineWidth=se.line.width,J.scatterLineColor=e(se.line,1,ue),J.scatterAngle=0}"textposition"in D&&(J.textOffset=function(He){var Ve=[0,0];if(Array.isArray(He))for(var tt=0;tt<He.length;tt++)Ve[tt]=[0,0],He[tt]&&(Ve[tt][0]=b(He[tt]),Ve[tt][1]=v(He[tt]));else Ve[0]=b(He),Ve[1]=v(He);return Ve}(D.textposition),J.textColor=e(D.textfont,1,ue),J.textSize=d(D.textfont.size,ue,p.identity,12),J.textFont=D.textfont.family,J.textAngle=0);var ge=["x","y","z"];for(J.project=[!1,!1,!1],J.projectScale=[1,1,1],J.projectOpacity=[1,1,1],Y=0;Y<3;++Y){var be=D.projection[ge[Y]];(J.project[Y]=be.show)&&(J.projectOpacity[Y]=be.opacity,J.projectScale[Y]=be.scale)}J.errorBounds=c(D,Q,X);var Ie=function(He){for(var Ve=[0,0,0],tt=[[0,0,0],[0,0,0],[0,0,0]],nt=[1,1,1],st=0;st<3;st++){var dt=He[st];dt&&!1!==dt.copy_zstyle&&!1!==He[2].visible&&(dt=He[2]),dt&&dt.visible&&(Ve[st]=dt.width/2,tt[st]=s(dt.color),nt[st]=dt.thickness)}return{capSize:Ve,color:tt,lineWidth:nt}}([D.error_x,D.error_y,D.error_z]);return J.errorColor=Ie.color,J.errorLineWidth=Ie.lineWidth,J.errorCapSize=Ie.capSize,J.delaunayAxis=D.surfaceaxis,J.delaunayColor=s(D.surfacecolor),J}(this.scene,u);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in r&&(P=r[z.lineDashes]),this.color=w(z.scatterColor)||w(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:u.opacity,connectGaps:u.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(S):(this.linePlot=M(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=u.opacity;if(u.marker&&u.marker.opacity&&(j*=u.marker.opacity),_={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:j,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(_):(this.scatterPlot=k(_),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:u.opacity},this.textLabels=u.hovertext||u.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=k(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:u.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var R=function(V,D,B){var N,U=(B+1)%3,J=(B+2)%3,Y=[],q=[];for(N=0;N<V.length;++N){var H=V[N];!isNaN(H[U])&&isFinite(H[U])&&!isNaN(H[J])&&isFinite(H[J])&&(Y.push([H[U],H[J]]),q.push(N))}var X=x(Y);for(N=0;N<X.length;++N)for(var Q=X[N],ne=0;ne<Q.length;++ne)Q[ne]=q[Q[ne]];return{positions:V,cells:X,meshColor:D}}(z.position,z.delaunayColor,z.delaunayAxis);R.opacity=u.opacity,this.delaunayMesh?this.delaunayMesh.update(R):(R.gl=C,this.delaunayMesh=T(R),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function(u,S){var _=new h(u,S.uid);return _.update(S),_}},21428:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(34098),T=t(49508),x=t(11058),p=t(82410),s=t(44542);$.exports=function(e,o,r,n){function a(y,d){return k.coerce(e,o,s,y,d)}var y,d,m,w,u,S,_,E;if(y=e,d=o,w=n,u=0,S=(m=a)("x"),_=m("y"),E=m("z"),M.getComponentMethod("calendars","handleTraceDefaults")(y,d,["x","y","z"],w),S&&_&&E&&(u=Math.min(S.length,_.length,E.length),d._length=d._xlength=d._ylength=d._zlength=u),u){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),l.hasLines(o)&&(a("connectgaps"),x(e,o,r,n,a)),l.hasMarkers(o)&&T(e,o,r,n,a,{noSelect:!0,noAngle:!0}),l.hasText(o)&&(a("texttemplate"),p(e,o,n,a,{noSelect:!0}));var c=(o.line||{}).color,h=(o.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",c||h);for(var f=["x","y","z"],b=0;b<3;++b){var v="projection."+f[b];a(v+".show")&&(a(v+".opacity"),a(v+".scale"))}var g=M.getComponentMethod("errorbars","supplyDefaults");g(e,o,c||h||r,{axis:"z"}),g(e,o,c||h||r,{axis:"y",inherit:"z"}),g(e,o,c||h||r,{axis:"x",inherit:"z"})}else o.visible=!1}},13551:function($,I,t){"use strict";$.exports={plot:t(58925),attributes:t(44542),markerSymbols:t(87381),supplyDefaults:t(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t(36563),moduleType:"trace",name:"scatter3d",basePlotModule:t(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function($,I,t){"use strict";var M=t(82196),k=t(9012),l=t(5386).f,T=t(5386).s,x=t(50693),p=t(1426).extendFlat,s=M.marker,e=M.line,o=s.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:p({},M.mode,{dflt:"markers"}),text:p({},M.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:p({},M.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,backoff:e.backoff,shape:p({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:M.connectgaps,fill:p({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:p({symbol:s.symbol,opacity:s.opacity,maxdisplayed:s.maxdisplayed,angle:s.angle,angleref:s.angleref,standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,line:p({width:o.width,editType:"calc"},x("marker.line")),gradient:s.gradient,editType:"calc"},x("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:p({},k.hoverinfo,{flags:["a","b","text","name"]}),hoveron:M.hoveron,hovertemplate:l()}},34618:function($,I,t){"use strict";var M=t(92770),k=t(36922),l=t(75225),T=t(66279),x=t(47761).calcMarkerSize,p=t(22882);$.exports=function(s,e){var o=e._carpetTrace=p(s,e);if(o&&o.visible&&"legendonly"!==o.visible){var r;e.xaxis=o.xaxis,e.yaxis=o.yaxis;var n,a,i=e._length,c=new Array(i),h=!1;for(r=0;r<i;r++)if(a=e.b[r],M(n=e.a[r])&&M(a)){var f=o.ab2xy(+n,+a,!0),b=o.isVisible(+n,+a);b||(h=!0),c[r]={x:f[0],y:f[1],a:n,b:a,vis:b}}else c[r]={x:!1,y:!1};return e._needsCull=h,c[0].carpet=o,c[0].trace=e,x(e,i),k(s,e),l(c,e),T(c,e),c}}},98965:function($,I,t){"use strict";var M=t(71828),k=t(47581),l=t(34098),T=t(49508),x=t(11058),p=t(94039),s=t(82410),e=t(28908),o=t(97001);$.exports=function(r,n,a,i){function c(g,y){return M.coerce(r,n,o,g,y)}c("carpet"),n.xaxis="x",n.yaxis="y";var h=c("a"),f=c("b"),b=Math.min(h.length,f.length);if(b){n._length=b,c("text"),c("texttemplate"),c("hovertext"),c("mode",b<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(x(r,n,a,i,c,{backoff:!0}),p(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&s(r,n,i,c);var v=[];(l.hasMarkers(n)||l.hasText(n))&&(c("marker.maxdisplayed"),v.push("points")),c("fill"),"none"!==n.fill&&(e(r,n,a,c),l.hasLines(n)||p(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||v.push("fills"),"fills"!==c("hoveron",v.join("+")||"points")&&c("hovertemplate"),M.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},16165:function($){"use strict";$.exports=function(I,t,M,k,l){var T=k[l];return I.a=T.a,I.b=T.b,I.y=T.y,I}},48953:function($){"use strict";$.exports=function(I,t){var M={},k=t._carpet,l=k.ab2ij([I.a,I.b]),T=Math.floor(l[0]),x=l[0]-T,p=Math.floor(l[1]),e=k.evalxy([],T,p,x,l[1]-p);return M.yLabel=e[1].toFixed(3),M}},22931:function($,I,t){"use strict";var M=t(33720),k=t(71828).fillText;$.exports=function(l,T,x,p){var s=M(l,T,x,p);if(s&&!1!==s[0].index){var e=s[0];if(void 0===e.index){var r=l.xa._length,n=r*(1-e.y0/l.ya._length)/2,a=r-n;return e.x0=Math.max(Math.min(e.x0,a),n),e.x1=Math.max(Math.min(e.x1,a),n),s}var i=e.cd[e.index];e.a=i.a,e.b=i.b,e.xLabelVal=void 0,e.yLabelVal=void 0;var c=e.trace,h=c._carpet,f=c._module.formatLabels(i,c);e.yLabel=f.yLabel,delete e.text;var b=[];if(!c.hovertemplate){var v=(i.hi||c.hoverinfo).split("+");-1!==v.indexOf("all")&&(v=["a","b","text"]),-1!==v.indexOf("a")&&g(h.aaxis,i.a),-1!==v.indexOf("b")&&g(h.baxis,i.b),b.push("y: "+e.yLabel),-1!==v.indexOf("text")&&k(i,c,b),e.extraText=b.join("<br>")}return s}function g(y,d){var m;m=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,b.push(m+": "+d.toFixed(3)+y.labelsuffix)}}},46858:function($,I,t){"use strict";$.exports={attributes:t(97001),supplyDefaults:t(98965),colorbar:t(4898),formatLabels:t(48953),calc:t(34618),plot:t(1913),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(22931),selectPoints:t(98002),eventData:t(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:t(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function($,I,t){"use strict";var M=t(32663),k=t(89298),l=t(91424);$.exports=function(T,x,p,s){var e,o,r,n=p[0][0].carpet,a=k.getFromId(T,n.xaxis||"x"),i=k.getFromId(T,n.yaxis||"y"),c={xaxis:a,yaxis:i,plot:x.plot};for(e=0;e<p.length;e++)(o=p[e][0].trace)._xA=a,o._yA=i;for(M(T,c,p,s),e=0;e<p.length;e++)r=s.selectAll("g.trace"+(o=p[e][0].trace).uid+" .js-line"),l.setClipUrl(r,p[e][0].carpet._clipPathId,T)}},19316:function($,I,t){"use strict";var M=t(5386).f,k=t(5386).s,l=t(82196),T=t(9012),x=t(50693),p=t(79952).P,s=t(1426).extendFlat,e=t(30962).overrideAll,o=l.marker,r=l.line,n=o.line;$.exports=e({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:s({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:p},connectgaps:l.connectgaps,marker:s({symbol:o.symbol,opacity:o.opacity,angle:o.angle,angleref:s({},o.angleref,{values:["previous","up","north"]}),standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,colorbar:o.colorbar,line:s({width:n.width},x("marker.line")),gradient:o.gradient},x("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},84622:function($,I,t){"use strict";var M=t(92770),k=t(50606).BADNUM,l=t(36922),T=t(75225),x=t(66279),p=t(71828)._;function s(e){return e&&"string"==typeof e}$.exports=function(e,o){var r,n=Array.isArray(o.locations),a=n?o.locations.length:o._length,i=new Array(a);r=o.geojson?function(g){return s(g)||M(g)}:s;for(var c=0;c<a;c++){var h=i[c]={};if(n){var f=o.locations[c];h.loc=r(f)?f:null}else{var b=o.lon[c],v=o.lat[c];h.lonlat=M(b)&&M(v)?[+b,+v]:[k,k]}}return T(i,o),l(e,o),x(i,o),a&&(i[0].t={labels:{lat:p(e,"lat:")+" ",lon:p(e,"lon:")+" "}}),i}},10659:function($,I,t){"use strict";var M=t(71828),k=t(34098),l=t(49508),T=t(11058),x=t(82410),p=t(28908),s=t(19316);$.exports=function(e,o,r,n){function a(g,y){return M.coerce(e,o,s,g,y)}var i,c=a("locations");if(c&&c.length){var h,f=a("geojson");("string"==typeof f&&""!==f||M.isPlainObject(f))&&(h="geojson-id"),"geojson-id"===a("locationmode",h)&&a("featureidkey"),i=c.length}else{var b=a("lon")||[],v=a("lat")||[];i=Math.min(b.length,v.length)}i?(o._length=i,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasLines(o)&&(T(e,o,r,n,a),a("connectgaps")),k.hasMarkers(o)&&l(e,o,r,n,a,{gradient:!0}),k.hasText(o)&&(a("texttemplate"),x(e,o,n,a)),a("fill"),"none"!==o.fill&&p(e,o,r,a),M.coerceSelectionMarkerOpacity(o,a)):o.visible=!1}},84084:function($){"use strict";$.exports=function(I,t,M,k,l){I.lon=t.lon,I.lat=t.lat,I.location=t.loc?t.loc:null;var T=k[l];return T.fIn&&T.fIn.properties&&(I.properties=T.fIn.properties),I}},82719:function($,I,t){"use strict";var M=t(89298);$.exports=function(k,l,T){var x={},p=T[l.geo]._subplot.mockAxis,s=k.lonlat;return x.lonLabel=M.tickText(p,p.c2l(s[0]),!0).text,x.latLabel=M.tickText(p,p.c2l(s[1]),!0).text,x}},14977:function($,I,t){"use strict";var M=t(30211),k=t(50606).BADNUM,l=t(34603),T=t(71828).fillText,x=t(19316);$.exports=function(p,s,e){var o=p.cd,r=o[0].trace,n=p.xa,a=p.ya,i=p.subplot,c=i.projection.isLonLatOverEdges,h=i.project;if(M.getClosest(o,function(m){var w=m.lonlat;if(w[0]===k||c(w))return 1/0;var u=h(w),S=h([s,e]),_=Math.abs(u[0]-S[0]),E=Math.abs(u[1]-S[1]),L=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(_*_+E*E)-L,1-3/L)},p),!1!==p.index){var f=o[p.index],b=f.lonlat,v=[n.c2p(b),a.c2p(b)],g=f.mrc||1;p.x0=v[0]-g,p.x1=v[0]+g,p.y0=v[1]-g,p.y1=v[1]+g,p.loc=f.loc,p.lon=b[0],p.lat=b[1];var y={};y[r.geo]={_subplot:i};var d=r._module.formatLabels(f,r,y);return p.lonLabel=d.lonLabel,p.latLabel=d.latLabel,p.color=l(r,f),p.extraText=function(m,w,u,S){if(!m.hovertemplate){var _=w.hi||m.hoverinfo,E="all"===_?x.hoverinfo.flags:_.split("+"),L=-1!==E.indexOf("location")&&Array.isArray(m.locations),C=-1!==E.indexOf("lon"),P=-1!==E.indexOf("lat"),z=-1!==E.indexOf("text"),j=[];return L?j.push(w.loc):C&&P?j.push("("+R(u.latLabel)+", "+R(u.lonLabel)+")"):C?j.push(S.lon+R(u.lonLabel)):P&&j.push(S.lat+R(u.latLabel)),z&&T(w,m,j),j.join("<br>")}function R(V){return V+"\xb0"}}(r,f,p,o[0].t.labels),p.hovertemplate=r.hovertemplate,[p]}}},17988:function($,I,t){"use strict";$.exports={attributes:t(19316),supplyDefaults:t(10659),colorbar:t(4898),formatLabels:t(82719),calc:t(84622),calcGeoJSON:t(89171).calcGeoJSON,plot:t(89171).plot,style:t(33095),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(14977),eventData:t(84084),selectPoints:t(20548),moduleType:"trace",name:"scattergeo",basePlotModule:t(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(90973).getTopojsonFeatures,T=t(18214),x=t(41327),p=t(71739).findExtremes,s=t(50606).BADNUM,e=t(47761).calcMarkerSize,o=t(34098),r=t(33095);$.exports={calcGeoJSON:function(n,a){var i,c,h=n[0].trace,f=a[h.geo],b=f._subplot,v=h._length;if(Array.isArray(h.locations)){var g=h.locationmode,y="geojson-id"===g?x.extractTraceFeature(n):l(h,b.topojson);for(i=0;i<v;i++){c=n[i];var d="geojson-id"===g?c.fOut:x.locationToFeature(g,c.loc,y);c.lonlat=d?d.properties.ct:[s,s]}}var m,w,u={padded:!0};if("geojson"===f.fitbounds&&"geojson-id"===h.locationmode){var S=x.computeBbox(x.getTraceGeojson(h));m=[S[0],S[2]],w=[S[1],S[3]]}else{for(m=new Array(v),w=new Array(v),i=0;i<v;i++)m[i]=(c=n[i]).lonlat[0],w[i]=c.lonlat[1];u.ppad=e(h,v)}h._extremes.lon=p(f.lonaxis._ax,m,u),h._extremes.lat=p(f.lataxis._ax,w,u)},plot:function(n,a,i){var c=a.layers.frontplot.select(".scatterlayer"),h=k.makeTraceGroups(c,i,"trace scattergeo");function f(b,v){b.lonlat[0]===s&&M.select(v).remove()}h.selectAll("*").remove(),h.each(function(b){var v=M.select(this),g=b[0].trace;if(o.hasLines(g)||"none"!==g.fill){var y=T.calcTraceToLineCoords(b),d="none"!==g.fill?T.makePolygon(y):T.makeLine(y);v.selectAll("path.js-line").data([{geojson:d,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}o.hasMarkers(g)&&v.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){f(m,this)}),o.hasText(g)&&v.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){f(m,this)}),r(n,b)})}}},20548:function($,I,t){"use strict";var M=t(34098),k=t(50606).BADNUM;$.exports=function(l,T){var x,p,s,e,o,r=l.cd,n=l.xaxis,a=l.yaxis,i=[],c=r[0].trace;if(!M.hasMarkers(c)&&!M.hasText(c))return[];if(!1===T)for(o=0;o<r.length;o++)r[o].selected=0;else for(o=0;o<r.length;o++)(p=(x=r[o]).lonlat)[0]!==k&&(s=n.c2p(p),e=a.c2p(p),T.contains([s,e],null,o,l)?(i.push({pointNumber:o,lon:p[0],lat:p[1]}),x.selected=1):x.selected=0);return i}},33095:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(7901),T=t(16296),x=T.stylePoints,p=T.styleText;$.exports=function(s,e){var o,r,n,a;e&&(o=s,n=(r=e)[0].trace,(a=r[0].node3).style("opacity",r[0].trace.opacity),x(a,n,o),p(a,n,o),a.selectAll("path.js-line").style("fill","none").each(function(i){var c=M.select(this),h=i.trace,f=h.line||{};c.call(l.stroke,f.color).call(k.dashLine,f.dash||"",f.width||0),"none"!==h.fill&&c.call(l.fill,h.fillcolor)}))}},42341:function($,I,t){"use strict";var M=t(9012),k=t(82196),l=t(12663).axisHoverFormat,T=t(50693),x=t(78607),p=t(1426).extendFlat,s=t(30962).overrideAll,e=t(78232).DASHES,o=k.line,r=k.marker,n=r.line,a=$.exports=s({x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:k.text,hovertext:k.hovertext,textposition:k.textposition,textfont:k.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:o.color,width:o.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:x(e),dflt:"solid"}},marker:p({},T("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:p({},T("marker.line"),{width:n.width})}),connectgaps:k.connectgaps,fill:p({},k.fill,{dflt:"none"}),fillcolor:k.fillcolor,selected:{marker:k.selected.marker,textfont:k.selected.textfont},unselected:{marker:k.unselected.marker,textfont:k.unselected.textfont},opacity:M.opacity},"calc","nested");a.x.editType=a.y.editType=a.x0.editType=a.y0.editType="calc+clearAxisTypes",a.hovertemplate=k.hovertemplate,a.texttemplate=k.texttemplate},72156:function($,I,t){"use strict";var M=t(20794);$.exports={moduleType:"trace",name:"scattergl",basePlotModule:t(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t(42341),supplyDefaults:t(47148),crossTraceDefaults:t(34936),colorbar:t(4898),formatLabels:t(68101),calc:t(45032),hoverPoints:M.hoverPoints,selectPoints:t(58147),meta:{}}},45032:function($,I,t){"use strict";var M=t(88294),k=t(71828),l=t(41675),T=t(71739).findExtremes,x=t(42973),p=t(47761),s=p.calcMarkerSize,e=p.calcAxisExpansion,o=p.setFirstScatter,r=t(36922),n=t(19635),a=t(38967),i=t(50606).BADNUM,c=t(78232).TOO_MANY_POINTS;function h(f,b,v){var g=f._extremes[b._id],y=T(b,v._bnds,{padded:!0});g.min=g.min.concat(y.min),g.max=g.max.concat(y.max)}$.exports=function(f,b){var v,g=f._fullLayout,y=b._xA=l.getFromId(f,b.xaxis,"x"),d=b._yA=l.getFromId(f,b.yaxis,"y"),m=g._plots[b.xaxis+b.yaxis],w=b._length,u=w>=c,S=2*w,_={},E=y.makeCalcdata(b,"x"),L=d.makeCalcdata(b,"y"),C=x(b,y,"x",E),P=x(b,d,"y",L),z=C.vals,j=P.vals;b._x=z,b._y=j,b.xperiodalignment&&(b._origX=E,b._xStarts=C.starts,b._xEnds=C.ends),b.yperiodalignment&&(b._origY=L,b._yStarts=P.starts,b._yEnds=P.ends);var R=new Array(S),V=new Array(w);for(v=0;v<w;v++)R[2*v]=z[v]===i?NaN:z[v],R[2*v+1]=j[v]===i?NaN:j[v],V[v]=v;if("log"===y.type)for(v=0;v<S;v+=2)R[v]=y.c2l(R[v]);if("log"===d.type)for(v=1;v<S;v+=2)R[v]=d.c2l(R[v]);u&&"log"!==y.type&&"log"!==d.type?_.tree=M(R):_.ids=V,r(f,b);var D,B=function(U,J,Y,q,H,X){var Q=n.style(U,Y);if(Q.marker&&(Q.marker.positions=q),Q.line&&q.length>1&&k.extendFlat(Q.line,n.linePositions(U,Y,q)),Q.errorX||Q.errorY){var ne=n.errorBarPositions(U,Y,q,H,X);Q.errorX&&k.extendFlat(Q.errorX,ne.x),Q.errorY&&k.extendFlat(Q.errorY,ne.y)}return Q.text&&(k.extendFlat(Q.text,{positions:q},n.textPosition(U,Y,Q.text,Q.marker)),k.extendFlat(Q.textSel,{positions:q},n.textPosition(U,Y,Q.text,Q.markerSel)),k.extendFlat(Q.textUnsel,{positions:q},n.textPosition(U,Y,Q.text,Q.markerUnsel))),Q}(f,0,b,R,z,j),N=a(f,m);return o(g,b),u?B.marker&&(D=B.marker.sizeAvg||Math.max(B.marker.size,3)):D=s(b,w),e(f,b,y,d,z,j,D),B.errorX&&h(b,y,B.errorX),B.errorY&&h(b,d,B.errorY),B.fill&&!N.fill2d&&(N.fill2d=!0),B.marker&&!N.scatter2d&&(N.scatter2d=!0),B.line&&!N.line2d&&(N.line2d=!0),!B.errorX&&!B.errorY||N.error2d||(N.error2d=!0),B.text&&!N.glText&&(N.glText=!0),B.marker&&(B.marker.snap=w),N.lineOptions.push(B.line),N.errorXOptions.push(B.errorX),N.errorYOptions.push(B.errorY),N.fillOptions.push(B.fill),N.markerOptions.push(B.marker),N.markerSelectedOptions.push(B.markerSel),N.markerUnselectedOptions.push(B.markerUnsel),N.textOptions.push(B.text),N.textSelectedOptions.push(B.textSel),N.textUnselectedOptions.push(B.textUnsel),N.selectBatch.push([]),N.unselectBatch.push([]),_._scene=N,_.index=N.count,_.x=z,_.y=j,_.positions=R,N.count++,[{x:!1,y:!1,t:_,trace:b}]}},78232:function($){"use strict";$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function($,I,t){"use strict";var M=t(92770),k=t(82019),l=t(25075),T=t(73972),x=t(71828),p=t(91424),s=t(41675),e=t(81697).formatColor,o=t(34098),r=t(39984),n=t(68645),a=t(78232),i=t(37822).DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=t(23469).appendArrayPointValue;function f(E,L){var C,P=E._fullLayout,z=L._length,j=L.textfont,R=L.textposition,V=Array.isArray(R)?R:[R],D=j.color,B=j.size,N=j.family,U={},J=E._context.plotGlPixelRatio,Y=L.texttemplate;if(Y){U.text=[];var q=P._d3locale,H=Array.isArray(Y),X=H?Math.min(Y.length,z):z,Q=H?function(me){return Y[me]}:function(){return Y};for(C=0;C<X;C++){var ne={i:C},re=L._module.formatLabels(ne,L,P),ae={};h(ae,L,C);var se=L._meta||{};U.text.push(x.texttemplateString(Q(C),re,q,ae,ne,se))}}else U.text=Array.isArray(L.text)&&L.text.length<z?L.text.slice():L.text;if(Array.isArray(U.text))for(C=U.text.length;C<z;C++)U.text[C]="";for(U.opacity=L.opacity,U.font={},U.align=[],U.baseline=[],C=0;C<V.length;C++){var pe=V[C].split(/\s+/);switch(pe[1]){case"left":U.align.push("right");break;case"right":U.align.push("left");break;default:U.align.push(pe[1])}switch(pe[0]){case"top":U.baseline.push("bottom");break;case"bottom":U.baseline.push("top");break;default:U.baseline.push(pe[0])}}if(Array.isArray(D))for(U.color=new Array(z),C=0;C<z;C++)U.color[C]=D[C];else U.color=D;if(x.isArrayOrTypedArray(B)||Array.isArray(N))for(U.font=new Array(z),C=0;C<z;C++){var ke=U.font[C]={};ke.size=(x.isTypedArray(B)?B[C]:Array.isArray(B)?M(B[C])?B[C]:0:B)*J,ke.family=Array.isArray(N)?N[C]:N}else U.font={size:B*J,family:N};return U}function b(E,L){var C,P,z=L._length,j=L.marker,R={},V=x.isArrayOrTypedArray(j.symbol),D=x.isArrayOrTypedArray(j.angle),B=x.isArrayOrTypedArray(j.color),N=x.isArrayOrTypedArray(j.line.color),U=x.isArrayOrTypedArray(j.opacity),J=x.isArrayOrTypedArray(j.size),Y=x.isArrayOrTypedArray(j.line.width);if(V||(P=n.isOpenSymbol(j.symbol)),V||B||N||U||D){R.symbols=new Array(z),R.angles=new Array(z),R.colors=new Array(z),R.borderColors=new Array(z);var q=j.symbol,H=j.angle,X=e(j,j.opacity,z),Q=e(j.line,j.opacity,z);if(!Array.isArray(Q[0])){var ne=Q;for(Q=Array(z),C=0;C<z;C++)Q[C]=ne}if(!Array.isArray(X[0])){var re=X;for(X=Array(z),C=0;C<z;C++)X[C]=re}if(!Array.isArray(q)){var ae=q;for(q=Array(z),C=0;C<z;C++)q[C]=ae}if(!Array.isArray(H)){var se=H;for(H=Array(z),C=0;C<z;C++)H[C]=se}for(R.symbols=q,R.angles=H,R.colors=X,R.borderColors=Q,C=0;C<z;C++)V&&(P=n.isOpenSymbol(j.symbol[C])),P&&(Q[C]=X[C].slice(),X[C]=X[C].slice(),X[C][3]=0);for(R.opacity=L.opacity,R.markers=new Array(z),C=0;C<z;C++)R.markers[C]=_({mx:R.symbols[C],ma:R.angles[C]},L)}else P?(R.color=l(j.color,"uint8"),R.color[3]=0,R.borderColor=l(j.color,"uint8")):(R.color=l(j.color,"uint8"),R.borderColor=l(j.line.color,"uint8")),R.opacity=L.opacity*j.opacity,R.marker=_({mx:j.symbol,ma:j.angle},L);var pe,ke=r(L,1);if(J||Y){var me,le=R.sizes=new Array(z),ue=R.borderSizes=new Array(z),Ee=0;if(J){for(C=0;C<z;C++)le[C]=ke(j.size[C]),Ee+=le[C];me=Ee/z}else for(pe=ke(j.size),C=0;C<z;C++)le[C]=pe;if(Y)for(C=0;C<z;C++)ue[C]=j.line.width[C];else for(pe=j.line.width,C=0;C<z;C++)ue[C]=pe;R.sizeAvg=me}else R.size=ke(j&&j.size||10),R.borderSizes=ke(j.line.width);return R}function v(E,L,C){var z={};return C&&(C.marker&&C.marker.symbol?z=b(0,x.extendFlat({},L.marker,C.marker)):C.marker&&(C.marker.size&&(z.size=C.marker.size),C.marker.color&&(z.colors=C.marker.color),void 0!==C.marker.opacity&&(z.opacity=C.marker.opacity))),z}function g(E,L,C){var P={};if(!C)return P;if(C.textfont){var z={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:x.extendFlat({},L.textfont)};C.textfont&&x.extendFlat(z.textfont,C.textfont),P=f(E,z)}return P}function y(E,L,C){var P={capSize:2*L.width*C,lineWidth:L.thickness*C,color:L.color};return L.copy_ystyle&&(P=E.error_y),P}var d=a.SYMBOL_SDF_SIZE,m=a.SYMBOL_SIZE,w=a.SYMBOL_STROKE,u={},S=p.symbolFuncs[0](.05*m);function _(E,L){var C,P,z=E.mx;if("circle"===z)return null;var j=p.symbolNumber(z),R=p.symbolFuncs[j%100],V=!!p.symbolNoDot[j%100],D=!!p.symbolNoFill[j%100],B=n.isDotSymbol(z);if(E.ma&&(z+="_"+E.ma),u[z])return u[z];var N=p.getMarkerAngle(E,L);return C=B&&!V?R(1.1*m,N)+S:R(m,N),P=k(C,{w:d,h:d,viewBox:[-m,-m,m,m],stroke:D?w:-w}),u[z]=P,P||null}$.exports={style:function(E,L){var C,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=E._context.plotGlPixelRatio;if(!0!==L.visible)return P;if(o.hasText(L)&&(P.text=f(E,L),P.textSel=g(E,L,L.selected),P.textUnsel=g(E,L,L.unselected)),o.hasMarkers(L)&&(P.marker=b(0,L),P.markerSel=v(0,L,L.selected),P.markerUnsel=v(0,L,L.unselected),!L.unselected&&x.isArrayOrTypedArray(L.marker.opacity))){var j=L.marker.opacity;for(P.markerUnsel.opacity=new Array(j.length),C=0;C<j.length;C++)P.markerUnsel.opacity[C]=i*j[C]}if(o.hasLines(L)){P.line={overlay:!0,thickness:L.line.width*z,color:L.line.color,opacity:L.opacity};var R=(a.DASHES[L.line.dash]||[1]).slice();for(C=0;C<R.length;++C)R[C]*=L.line.width*z;P.line.dashes=R}return L.error_x&&L.error_x.visible&&(P.errorX=y(L,L.error_x,z)),L.error_y&&L.error_y.visible&&(P.errorY=y(L,L.error_y,z)),L.fill&&"none"!==L.fill&&(P.fill={closed:!0,fill:L.fillcolor,thickness:0}),P},markerStyle:b,markerSelection:v,linePositions:function(E,L,C){var P,z,j=C.length,R=j/2;if(o.hasLines(L)&&R)if("hv"===L.line.shape){for(P=[],z=0;z<R-1;z++)isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*z],C[2*z+1]),isNaN(C[2*z+2])||isNaN(C[2*z+3])?P.push(NaN,NaN):P.push(C[2*z+2],C[2*z+1]));P.push(C[j-2],C[j-1])}else if("hvh"===L.line.shape){for(P=[],z=0;z<R-1;z++)if(isNaN(C[2*z])||isNaN(C[2*z+1])||isNaN(C[2*z+2])||isNaN(C[2*z+3]))isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN):P.push(C[2*z],C[2*z+1]),P.push(NaN,NaN);else{var V=(C[2*z]+C[2*z+2])/2;P.push(C[2*z],C[2*z+1],V,C[2*z+1],V,C[2*z+3])}P.push(C[j-2],C[j-1])}else if("vhv"===L.line.shape){for(P=[],z=0;z<R-1;z++)if(isNaN(C[2*z])||isNaN(C[2*z+1])||isNaN(C[2*z+2])||isNaN(C[2*z+3]))isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN):P.push(C[2*z],C[2*z+1]),P.push(NaN,NaN);else{var D=(C[2*z+1]+C[2*z+3])/2;P.push(C[2*z],C[2*z+1],C[2*z],D,C[2*z+2],D)}P.push(C[j-2],C[j-1])}else if("vh"===L.line.shape){for(P=[],z=0;z<R-1;z++)isNaN(C[2*z])||isNaN(C[2*z+1])?P.push(NaN,NaN,NaN,NaN):(P.push(C[2*z],C[2*z+1]),isNaN(C[2*z+2])||isNaN(C[2*z+3])?P.push(NaN,NaN):P.push(C[2*z],C[2*z+3]));P.push(C[j-2],C[j-1])}else P=C;var B=!1;for(z=0;z<P.length;z++)if(isNaN(P[z])){B=!0;break}var N=B||P.length>a.TOO_MANY_POINTS||o.hasMarkers(L)?"rect":"round";if(B&&L.connectgaps){var U=P[0],J=P[1];for(z=0;z<P.length;z+=2)isNaN(P[z])||isNaN(P[z+1])?(P[z]=U,P[z+1]=J):(U=P[z],J=P[z+1])}return{join:N,positions:P}},errorBarPositions:function(E,L,C,P,z){var j=T.getComponentMethod("errorbars","makeComputeError"),R=s.getFromId(E,L.xaxis,"x"),V=s.getFromId(E,L.yaxis,"y"),D=C.length/2,B={};function N(U,J){var Y=J._id.charAt(0),q=L["error_"+Y];if(q&&q.visible&&("linear"===J.type||"log"===J.type)){for(var H=j(q),X={x:0,y:1}[Y],Q={x:[0,1,2,3],y:[2,3,0,1]}[Y],ne=new Float64Array(4*D),re=1/0,ae=-1/0,se=0,pe=0;se<D;se++,pe+=4){var ke=U[se];if(M(ke)){var me=C[2*se+X],le=H(ke,se),ue=le[0],Ee=le[1];if(M(ue)&&M(Ee)){var xe=ke+Ee;ne[pe+Q[0]]=me-J.c2l(ke-ue),ne[pe+Q[1]]=J.c2l(xe)-me,ne[pe+Q[2]]=0,ne[pe+Q[3]]=0,re=Math.min(re,ke-ue),ae=Math.max(ae,ke+Ee)}}}B[Y]={positions:C,errors:ne,_bnds:[re,ae]}}}return N(P,R),N(z,V),B},textPosition:function(E,L,C,P){var z,j=L._length,R={};if(o.hasMarkers(L)){var V=C.font,D=C.align,B=C.baseline;for(R.offset=new Array(j),z=0;z<j;z++){var N=P.sizes?P.sizes[z]:P.size,U=Array.isArray(V)?V[z].size:V.size,J=Array.isArray(D)?D.length>1?D[z]:D[0]:D,Y=Array.isArray(B)?B.length>1?B[z]:B[0]:B,H=c[Y],X=N?N/.8+1:0;R.offset[z]=[c[J]*X/U,(-H*X-.5*H)/U]}}return R}}},47148:function($,I,t){"use strict";var M=t(71828),k=t(73972),l=t(68645),T=t(42341),x=t(47581),p=t(34098),s=t(67513),e=t(73927),o=t(49508),r=t(11058),n=t(28908),a=t(82410);$.exports=function(i,c,h,f){function b(S,_){return M.coerce(i,c,T,S,_)}var v=!!i.marker&&l.isOpenSymbol(i.marker.symbol),g=p.isBubble(i),y=s(i,c,f,b);if(y){e(i,c,f,b),b("xhoverformat"),b("yhoverformat");var d=y<x.PTS_LINESONLY?"lines+markers":"lines";b("text"),b("hovertext"),b("hovertemplate"),b("mode",d),p.hasLines(c)&&(b("connectgaps"),r(i,c,h,f,b),b("line.shape")),p.hasMarkers(c)&&(o(i,c,h,f,b,{noAngleRef:!0,noStandOff:!0}),b("marker.line.width",v||g?1:0)),p.hasText(c)&&(b("texttemplate"),a(i,c,f,b));var m=(c.line||{}).color,w=(c.marker||{}).color;b("fill"),"none"!==c.fill&&n(i,c,h,b);var u=k.getComponentMethod("errorbars","supplyDefaults");u(i,c,m||w||h,{axis:"y"}),u(i,c,m||w||h,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,b)}else c.visible=!1}},5345:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(37822).DESELECTDIM;$.exports={styleTextSelection:function(T){var x,p,s=T[0],e=s.trace,o=s.t,r=o._scene,n=o.index,a=r.selectBatch[n],i=r.unselectBatch[n],c=r.textOptions[n],h=r.textSelectedOptions[n]||{},f=r.textUnselectedOptions[n]||{},b=M.extendFlat({},c);if(a.length||i.length){var v=h.color,g=f.color,y=c.color,d=Array.isArray(y);for(b.color=new Array(e._length),x=0;x<a.length;x++)b.color[p=a[x]]=v||(d?y[p]:y);for(x=0;x<i.length;x++){p=i[x];var m=d?y[p]:y;b.color[p]=g||(v?m:k.addOpacity(m,l))}}r.glText[n].update(b)}}},68101:function($,I,t){"use strict";var M=t(8225);$.exports=function(k,l,T){var x=k.i;return"x"in k||(k.x=l._x[x]),"y"in k||(k.y=l._y[x]),M(k,l,T)}},68645:function($,I,t){"use strict";var M=t(78232);I.isOpenSymbol=function(k){return"string"==typeof k?M.OPEN_RE.test(k):k%200>100},I.isDotSymbol=function(k){return"string"==typeof k?M.DOT_RE.test(k):k>200}},20794:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(34603);function T(x,p,s,e){var o=x.xa,r=x.ya,n=x.distance,a=x.dxy,i=x.index,c={pointNumber:i,x:p[i],y:s[i]};c.tx=Array.isArray(e.text)?e.text[i]:e.text,c.htx=Array.isArray(e.hovertext)?e.hovertext[i]:e.hovertext,c.data=Array.isArray(e.customdata)?e.customdata[i]:e.customdata,c.tp=Array.isArray(e.textposition)?e.textposition[i]:e.textposition;var h=e.textfont;h&&(c.ts=k.isArrayOrTypedArray(h.size)?h.size[i]:h.size,c.tc=Array.isArray(h.color)?h.color[i]:h.color,c.tf=Array.isArray(h.family)?h.family[i]:h.family);var f=e.marker;f&&(c.ms=k.isArrayOrTypedArray(f.size)?f.size[i]:f.size,c.mo=k.isArrayOrTypedArray(f.opacity)?f.opacity[i]:f.opacity,c.mx=k.isArrayOrTypedArray(f.symbol)?f.symbol[i]:f.symbol,c.ma=k.isArrayOrTypedArray(f.angle)?f.angle[i]:f.angle,c.mc=k.isArrayOrTypedArray(f.color)?f.color[i]:f.color);var b=f&&f.line;b&&(c.mlc=Array.isArray(b.color)?b.color[i]:b.color,c.mlw=k.isArrayOrTypedArray(b.width)?b.width[i]:b.width);var v=f&&f.gradient;v&&"none"!==v.type&&(c.mgt=Array.isArray(v.type)?v.type[i]:v.type,c.mgc=Array.isArray(v.color)?v.color[i]:v.color);var g=o.c2p(c.x,!0),y=r.c2p(c.y,!0),d=c.mrc||1,m=e.hoverlabel;m&&(c.hbg=Array.isArray(m.bgcolor)?m.bgcolor[i]:m.bgcolor,c.hbc=Array.isArray(m.bordercolor)?m.bordercolor[i]:m.bordercolor,c.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[i]:m.font.size,c.htc=Array.isArray(m.font.color)?m.font.color[i]:m.font.color,c.htf=Array.isArray(m.font.family)?m.font.family[i]:m.font.family,c.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[i]:m.namelength);var w=e.hoverinfo;w&&(c.hi=Array.isArray(w)?w[i]:w);var u=e.hovertemplate;u&&(c.ht=Array.isArray(u)?u[i]:u);var S={};S[x.index]=c;var _=e._origX,E=e._origY,L=k.extendFlat({},x,{color:l(e,c),x0:g-d,x1:g+d,xLabelVal:_?_[i]:c.x,y0:y-d,y1:y+d,yLabelVal:E?E[i]:c.y,cd:S,distance:n,spikeDistance:a,hovertemplate:c.ht});return c.htx?L.text=c.htx:c.tx?L.text=c.tx:e.text&&(L.text=e.text),k.fillText(c,e,L),M.getComponentMethod("errorbars","hoverInfo")(c,e,L),L}$.exports={hoverPoints:function(x,p,s,e){var o,r,n,a,i,c,h,f,b,v,g=x.cd,y=g[0].t,d=g[0].trace,m=x.xa,w=x.ya,u=y.x,S=y.y,_=m.c2p(p),E=w.c2p(s),L=x.distance;if(y.tree){var C=m.p2c(_-L),P=m.p2c(_+L),z=w.p2c(E-L),j=w.p2c(E+L);o="x"===e?y.tree.range(Math.min(C,P),Math.min(w._rl[0],w._rl[1]),Math.max(C,P),Math.max(w._rl[0],w._rl[1])):y.tree.range(Math.min(C,P),Math.min(z,j),Math.max(C,P),Math.max(z,j))}else o=y.ids;var R=L;if("x"===e){var V=!!d.xperiodalignment,D=!!d.yperiodalignment;for(c=0;c<o.length;c++){if(a=u[r=o[c]],h=Math.abs(m.c2p(a)-_),V){var B=m.c2p(d._xStarts[r]),N=m.c2p(d._xEnds[r]);h=_>=Math.min(B,N)&&_<=Math.max(B,N)?0:1/0}if(h<R){if(R=h,f=w.c2p(i=S[r])-E,D){var U=w.c2p(d._yStarts[r]),J=w.c2p(d._yEnds[r]);f=E>=Math.min(U,J)&&E<=Math.max(U,J)?0:1/0}v=Math.sqrt(h*h+f*f),n=o[c]}}}else for(c=o.length-1;c>-1;c--)a=u[r=o[c]],i=S[r],h=m.c2p(a)-_,f=w.c2p(i)-E,(b=Math.sqrt(h*h+f*f))<R&&(R=v=b,n=r);return x.index=n,x.distance=R,x.dxy=v,void 0===n?[x]:[T(x,u,S,d)]},calcHover:T}},68868:function($,I,t){"use strict";var M=t(72156);M.plot=t(26787),$.exports=M},26787:function($,I,t){"use strict";var M=t(11870),k=t(46075),l=t(3593),T=t(42505),x=t(71828),p=t(64505).selectMode,s=t(79749),e=t(34098),o=t(68687),r=t(5345).styleTextSelection,n={};function a(i,c,h,f){var b=i._size,u=b.w*f,S=b.h*f;return[b.l*f+c.domain[0]*u,b.b*f+h.domain[0]*S,i.width*f-b.r*f-(1-c.domain[1])*u,i.height*f-b.t*f-(1-h.domain[1])*S]}($.exports=function(i,c,h){if(h.length){var f,b,v=i._fullLayout,g=c._scene,y=c.xaxis,d=c.yaxis;if(g)if(s(i,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var m=g.count,w=v._glcanvas.data()[0].regl;if(o(i,c,h),g.dirty){if(!0===g.error2d&&(g.error2d=l(w)),!0===g.line2d&&(g.line2d=k(w)),!0===g.scatter2d&&(g.scatter2d=M(w)),!0===g.fill2d&&(g.fill2d=k(w)),!0===g.glText)for(g.glText=new Array(m),f=0;f<m;f++)g.glText[f]=new T(w);if(g.glText){if(m>g.glText.length){var u=m-g.glText.length;for(f=0;f<u;f++)g.glText.push(new T(w))}else m<g.glText.length&&g.glText.splice(m,g.glText.length-m).forEach(function(ne){ne.destroy()});for(f=0;f<m;f++)g.glText[f].update(g.textOptions[f])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(ne){if(ne&&ne.positions){for(var re=ne.positions,ae=0;ae<re.length&&(isNaN(re[ae])||isNaN(re[ae+1]));)ae+=2;for(var se=re.length-2;se>ae&&(isNaN(re[se])||isNaN(re[se+1]));)se-=2;ne.positions=re.slice(ae,se+2)}return ne}),g.line2d.update(g.lineOptions)),g.error2d){var _=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(_)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=x.repeat(null,m),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(ne,re){var ae=h[re];if(ne&&ae&&ae[0]&&ae[0].trace){var se,pe,ke=ae[0],me=ke.trace,le=ke.t,ue=g.lineOptions[re],Ee=[];me._ownfill&&Ee.push(re),me._nexttrace&&Ee.push(re+1),Ee.length&&(g.fillOrder[re]=Ee);var de,xe,Te=[],we=ue&&ue.positions||le.positions;if("tozeroy"===me.fill){for(de=0;de<we.length&&isNaN(we[de+1]);)de+=2;for(xe=we.length-2;xe>de&&isNaN(we[xe+1]);)xe-=2;0!==we[de+1]&&(Te=[we[de],0]),Te=Te.concat(we.slice(de,xe+2)),0!==we[xe+1]&&(Te=Te.concat([we[xe],0]))}else if("tozerox"===me.fill){for(de=0;de<we.length&&isNaN(we[de]);)de+=2;for(xe=we.length-2;xe>de&&isNaN(we[xe]);)xe-=2;0!==we[de]&&(Te=[0,we[de+1]]),Te=Te.concat(we.slice(de,xe+2)),0!==we[xe]&&(Te=Te.concat([0,we[xe+1]]))}else if("toself"===me.fill||"tonext"===me.fill){for(Te=[],se=0,ne.splitNull=!0,pe=0;pe<we.length;pe+=2)(isNaN(we[pe])||isNaN(we[pe+1]))&&((Te=Te.concat(we.slice(se,pe))).push(we[se],we[se+1]),Te.push(null,null),se=pe+2);Te=Te.concat(we.slice(se)),se&&Te.push(we[se],we[se+1])}else{var K=me._nexttrace;if(K){var oe=g.lineOptions[re+1];if(oe){var he=oe.positions;if("tonexty"===me.fill){for(Te=we.slice(),re=Math.floor(he.length/2);re--;){var ye=he[2*re],Me=he[2*re+1];isNaN(ye)||isNaN(Me)||Te.push(ye,Me)}ne.fill=K.fillcolor}}}}if(me._prevtrace&&"tonext"===me._prevtrace.fill){var Re=g.lineOptions[re-1].positions,Pe=Te.length/2,De=[se=Pe];for(pe=0;pe<Re.length;pe+=2)(isNaN(Re[pe])||isNaN(Re[pe+1]))&&(De.push(pe/2+Pe+1),se=pe+2);Te=Te.concat(Re),ne.hole=De}return ne.fillmode=me.fill,ne.opacity=me.opacity,ne.positions=Te,ne}}),g.fill2d.update(g.fillOptions))}var L=p(v.dragmode),C=v.clickmode.indexOf("select")>-1;for(f=0;f<m;f++){var P=h[f][0],z=P.trace,j=P.t,R=j.index,V=z._length,D=j.x,B=j.y;if(z.selectedpoints||L||C){if(L||(L=!0),z.selectedpoints){var N=g.selectBatch[R]=x.selIndices2selPoints(z),U={};for(b=0;b<N.length;b++)U[N[b]]=1;var J=[];for(b=0;b<V;b++)U[b]||J.push(b);g.unselectBatch[R]=J}var Y=j.xpx=new Array(V),q=j.ypx=new Array(V);for(b=0;b<V;b++)Y[b]=y.c2p(D[b]),q[b]=d.c2p(B[b])}else j.xpx=j.ypx=null}if(L){if(g.select2d||(g.select2d=M(v._glcanvas.data()[1].regl)),g.scatter2d){var H=new Array(m);for(f=0;f<m;f++)H[f]=g.selectBatch[f].length||g.unselectBatch[f].length?g.markerUnselectedOptions[f]:{};g.scatter2d.update(H)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&h.forEach(function(ne){e.hasText(((ne||[])[0]||{}).trace||{})&&r(ne)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var X={viewport:a(v,y,d,i._context.plotGlPixelRatio),range:[(y._rl||y.range)[0],(d._rl||d.range)[0],(y._rl||y.range)[1],(d._rl||d.range)[1]]},Q=x.repeat(X,g.count);g.fill2d&&g.fill2d.update(Q),g.line2d&&g.line2d.update(Q),g.error2d&&g.error2d.update(Q.concat(Q)),g.scatter2d&&g.scatter2d.update(Q),g.select2d&&g.select2d.update(Q),g.glText&&g.glText.forEach(function(ne){ne.update(X)})}else g.init()}}).reglPrecompiled=n},38967:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){var T=l._scene,x={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},p={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((T=l._scene={}).init=function(){M.extendFlat(T,p,x)},T.init(),T.update=function(s){var e=M.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(e),T.scatter2d&&T.scatter2d.update(e),T.line2d&&T.line2d.update(e),T.error2d&&T.error2d.update(e.concat(e)),T.select2d&&T.select2d.update(e),T.glText)for(var o=0;o<T.count;o++)T.glText[o].update(s)},T.draw=function(){for(var s=T.count,e=T.fill2d,o=T.error2d,r=T.line2d,n=T.scatter2d,a=T.glText,i=T.select2d,c=T.selectBatch,h=T.unselectBatch,f=0;f<s;f++){if(e&&T.fillOrder[f]&&e.draw(T.fillOrder[f]),r&&T.lineOptions[f]&&r.draw(f),o&&(T.errorXOptions[f]&&o.draw(f),T.errorYOptions[f]&&o.draw(f+s)),n&&T.markerOptions[f])if(h[f].length){var b=M.repeat([],T.count);b[f]=h[f],n.draw(b)}else c[f].length||n.draw(f);a[f]&&T.textOptions[f]&&a[f].render()}i&&i.draw(c),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,l._scene=null}),T.dirty||M.extendFlat(T,x),T}},58147:function($,I,t){"use strict";var M=t(34098),k=t(5345).styleTextSelection;$.exports=function(l,T){var x=l.cd,p=l.xaxis,s=l.yaxis,e=[],o=x[0].trace,r=x[0].t,n=o._length,a=r.x,i=r.y,c=r._scene,h=r.index;if(!c)return e;var f=M.hasText(o),b=M.hasMarkers(o);if(!0!==o.visible||!b&&!f)return e;var g=[],y=[];if(!1!==T&&!T.degenerate)for(var d=0;d<n;d++)T.contains([r.xpx[d],r.ypx[d]],!1,d,l)?(g.push(d),e.push({pointNumber:d,x:p.c2d(a[d]),y:s.c2d(i[d])})):y.push(d);if(b){var m=c.scatter2d;if(g.length||y.length){if(!c.selectBatch[h].length&&!c.unselectBatch[h].length){var w=new Array(c.count);w[h]=c.markerUnselectedOptions[h],m.update.apply(m,w)}}else{var u=new Array(c.count);u[h]=c.markerOptions[h],m.update.apply(m,u)}}return c.selectBatch[h]=g,c.unselectBatch[h]=y,f&&k(x),e}},99181:function($,I,t){"use strict";var M=t(5386).f,k=t(5386).s,l=t(19316),T=t(82196),x=t(23585),p=t(9012),s=t(50693),e=t(1426).extendFlat,o=t(30962).overrideAll,r=t(23585),n=l.line,a=l.marker;$.exports=o({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:e({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:e({},a.opacity,{dflt:1})},mode:e({},T.mode,{dflt:"markers"}),text:e({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},T.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:T.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},s("marker")),fill:l.fill,fillcolor:T.fillcolor,textfont:x.layers.symbol.textfont,textposition:x.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:e({},p.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},15790:function($,I,t){"use strict";var M=t(92770),k=t(71828),l=t(50606).BADNUM,T=t(18214),x=t(21081),p=t(91424),s=t(39984),e=t(34098),o=t(13056),r=t(23469).appendArrayPointValue,n=t(63893).NEWLINES,a=t(63893).BR_TAG_ALL;function i(v){return{type:v,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function c(v,g){return k.isArrayOrTypedArray(v)?g?function(y){return M(v[y])?+v[y]:0}:function(y){return v[y]}:v?function(){return v}:h}function h(){return""}function f(v){return v[0]===l}function b(v,g){var y;if(k.isArrayOrTypedArray(v)&&k.isArrayOrTypedArray(g)){y=["step",["get","point_count"],v[0]];for(var d=1;d<v.length;d++)y.push(g[d-1],v[d])}else y=v;return y}$.exports=function(v,g){var y,d=g[0].trace,m=!0===d.visible&&0!==d._length,w="none"!==d.fill,u=e.hasLines(d),S=e.hasMarkers(d),_=e.hasText(d),E=S&&"circle"===d.marker.symbol,L=S&&"circle"!==d.marker.symbol,C=d.cluster&&d.cluster.enabled,P=i("fill"),z=i("line"),j=i("circle"),R=i("symbol"),V={fill:P,line:z,circle:j,symbol:R};if(!m)return V;if((w||u)&&(y=T.calcTraceToLineCoords(g)),w&&(P.geojson=T.makePolygon(y),P.layout.visibility="visible",k.extendFlat(P.paint,{"fill-color":d.fillcolor})),u&&(z.geojson=T.makeLine(y),z.layout.visibility="visible",k.extendFlat(z.paint,{"line-width":d.line.width,"line-color":d.line.color,"line-opacity":d.opacity})),E){var D=function(U){var J,Y,q,H,X=U[0].trace,Q=X.marker,ne=X.selectedpoints,re=k.isArrayOrTypedArray(Q.color),ae=k.isArrayOrTypedArray(Q.size),se=k.isArrayOrTypedArray(Q.opacity);function pe(Te){return X.opacity*Te}re&&(Y=x.hasColorscale(X,"marker")?x.makeColorScaleFuncFromTrace(Q):k.identity),ae&&(q=s(X)),se&&(H=function(Te){return pe(M(Te)?+k.constrain(Te,0,1):0)});var ke,me,le=[];for(J=0;J<U.length;J++){var ue=U[J],Ee=ue.lonlat;if(!f(Ee)){var de={};Y&&(de.mcc=ue.mcc=Y(ue.mc)),q&&(de.mrc=ue.mrc=q(ue.ms)),H&&(de.mo=H(ue.mo)),ne&&(de.selected=ue.selected||0),le.push({type:"Feature",id:J+1,geometry:{type:"Point",coordinates:Ee},properties:de})}}if(ne)for(ke=p.makeSelectedPointStyleFns(X),J=0;J<le.length;J++){var xe=le[J].properties;ke.selectedOpacityFn&&(xe.mo=pe(ke.selectedOpacityFn(xe))),ke.selectedColorFn&&(xe.mcc=ke.selectedColorFn(xe)),ke.selectedSizeFn&&(xe.mrc=ke.selectedSizeFn(xe))}return{geojson:{type:"FeatureCollection",features:le},mcc:re||ke&&ke.selectedColorFn?{type:"identity",property:"mcc"}:Q.color,mrc:ae||ke&&ke.selectedSizeFn?{type:"identity",property:"mrc"}:(me=Q.size,me/2),mo:se||ke&&ke.selectedOpacityFn?{type:"identity",property:"mo"}:pe(Q.opacity)}}(g);j.geojson=D.geojson,j.layout.visibility="visible",C&&(j.filter=["!",["has","point_count"]],V.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":b(d.cluster.color,d.cluster.step),"circle-radius":b(d.cluster.size,d.cluster.step),"circle-opacity":b(d.cluster.opacity,d.cluster.step)}},V.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),k.extendFlat(j.paint,{"circle-color":D.mcc,"circle-radius":D.mrc,"circle-opacity":D.mo})}if(E&&C&&(j.filter=["!",["has","point_count"]]),(L||_)&&(R.geojson=function(U,J){for(var Y=J._fullLayout,q=U[0].trace,H=q.marker||{},X=H.symbol,Q=H.angle,ne="circle"!==X?c(X):h,re="auto"!==Q?c(Q,!0):h,ae=e.hasText(q)?c(q.text):h,se=[],pe=0;pe<U.length;pe++){var ke=U[pe];if(!f(ke.lonlat)){var me,le=q.texttemplate;if(le){var ue=Array.isArray(le)?le[pe]||"":le,Ee=q._module.formatLabels(ke,q,Y),de={};r(de,q,ke.i),me=k.texttemplateString(ue,Ee,Y._d3locale,de,ke,q._meta||{})}else me=ae(pe);me&&(me=me.replace(n,"").replace(a,"\n")),se.push({type:"Feature",geometry:{type:"Point",coordinates:ke.lonlat},properties:{symbol:ne(pe),angle:re(pe),text:me}})}}return{type:"FeatureCollection",features:se}}(g,v),k.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(k.extendFlat(R.layout,{"icon-size":d.marker.size/10}),"angle"in d.marker&&"auto"!==d.marker.angle&&k.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=d.marker.allowoverlap,k.extendFlat(R.paint,{"icon-opacity":d.opacity*d.marker.opacity,"icon-color":d.marker.color})),_)){var N=o(d.textposition,(d.marker||{}).size);k.extendFlat(R.layout,{"text-size":d.textfont.size,"text-anchor":N.anchor,"text-offset":N.offset}),k.extendFlat(R.paint,{"text-color":d.textfont.color,"text-opacity":d.opacity})}return V}},76645:function($,I,t){"use strict";var M=t(71828),k=t(34098),l=t(49508),T=t(11058),x=t(82410),p=t(28908),s=t(99181);$.exports=function(e,o,r,n){function a(d,m){return M.coerce(e,o,s,d,m)}function i(d,m){return M.coerce2(e,o,s,d,m)}var m,w,u,S,_;if(m=o,u=(w=a)("lon")||[],S=w("lat")||[],_=Math.min(u.length,S.length),m._length=_,_){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),k.hasLines(o)&&(T(e,o,r,n,a,{noDash:!0}),a("connectgaps")),k.hasMarkers(o)){l(e,o,r,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var h=o.marker;"circle"!==h.symbol&&(M.isArrayOrTypedArray(h.size)&&(h.size=h.size[0]),M.isArrayOrTypedArray(h.color)&&(h.color=h.color[0]))}var f=i("cluster.maxzoom"),b=i("cluster.step"),v=i("cluster.color",o.marker&&o.marker.color||r),g=i("cluster.size"),y=i("cluster.opacity");a("cluster.enabled",!1!==f||!1!==b||!1!==v||!1!==g||!1!==y),k.hasText(o)&&x(e,o,n,a,{noSelect:!0}),a("fill"),"none"!==o.fill&&p(e,o,r,a),M.coerceSelectionMarkerOpacity(o,a)}else o.visible=!1}},53353:function($){"use strict";$.exports=function(I,t){return I.lon=t.lon,I.lat=t.lat,I}},15636:function($,I,t){"use strict";var M=t(89298);$.exports=function(k,l,T){var x={},p=T[l.subplot]._subplot.mockAxis,s=k.lonlat;return x.lonLabel=M.tickText(p,p.c2l(s[0]),!0).text,x.latLabel=M.tickText(p,p.c2l(s[1]),!0).text,x}},28178:function($,I,t){"use strict";var M=t(30211),k=t(71828),l=t(34603),T=k.fillText,x=t(50606).BADNUM,p=t(77734).traceLayerPrefix;function s(e,o,r){if(!e.hovertemplate){var n=(o.hi||e.hoverinfo).split("+"),a=-1!==n.indexOf("all"),i=-1!==n.indexOf("lon"),c=-1!==n.indexOf("lat"),h=o.lonlat,f=[];return a||i&&c?f.push("("+b(h[1])+", "+b(h[0])+")"):i?f.push(r.lon+b(h[0])):c&&f.push(r.lat+b(h[1])),(a||-1!==n.indexOf("text"))&&T(o,e,f),f.join("<br>")}function b(v){return v+"\xb0"}}$.exports={hoverPoints:function(e,o,r){var n=e.cd,a=n[0].trace,i=e.xa,c=e.ya,h=e.subplot,f=[],v=a.cluster&&a.cluster.enabled;if(v){var g=h.map.queryRenderedFeatures(null,{layers:[p+a.uid+"-circle"]});f=g.map(function(P){return P.id})}var y=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),d=o-y;if(M.getClosest(n,function(P){var z=P.lonlat;if(z[0]===x||v&&-1===f.indexOf(P.i+1))return 1/0;var j=k.modHalf(z[0],360),R=z[1],V=h.project([j,R]),D=V.x-i.c2p([d,R]),B=V.y-c.c2p([j,r]),N=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(D*D+B*B)-N,1-3/N)},e),!1!==e.index){var m=n[e.index],w=m.lonlat,u=[k.modHalf(w[0],360)+y,w[1]],S=i.c2p(u),_=c.c2p(u),E=m.mrc||1;e.x0=S-E,e.x1=S+E,e.y0=_-E,e.y1=_+E;var L={};L[a.subplot]={_subplot:h};var C=a._module.formatLabels(m,a,L);return e.lonLabel=C.lonLabel,e.latLabel=C.latLabel,e.color=l(a,m),e.extraText=s(a,m,n[0].t.labels),e.hovertemplate=a.hovertemplate,[e]}},getExtraText:s}},20467:function($,I,t){"use strict";$.exports={attributes:t(99181),supplyDefaults:t(76645),colorbar:t(4898),formatLabels:t(15636),calc:t(84622),plot:t(86951),hoverPoints:t(28178).hoverPoints,eventData:t(53353),selectPoints:t(86387),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:t(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function($,I,t){"use strict";var M=t(71828),k=t(15790),l=t(77734).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function x(s,e,o,r){this.type="scattermapbox",this.subplot=s,this.uid=e,this.clusterEnabled=o,this.isHidden=r,this.sourceIds={fill:"source-"+e+"-fill",line:"source-"+e+"-line",circle:"source-"+e+"-circle",symbol:"source-"+e+"-symbol",cluster:"source-"+e+"-circle",clusterCount:"source-"+e+"-circle"},this.layerIds={fill:l+e+"-fill",line:l+e+"-line",circle:l+e+"-circle",symbol:l+e+"-symbol",cluster:l+e+"-cluster",clusterCount:l+e+"-cluster-count"},this.below=null}var p=x.prototype;p.addSource=function(s,e,o){var r={type:"geojson",data:e.geojson};o&&o.enabled&&M.extendFlat(r,{cluster:!0,clusterMaxZoom:o.maxzoom}),this.subplot.map.addSource(this.sourceIds[s],r)},p.setSourceData=function(s,e){this.subplot.map.getSource(this.sourceIds[s]).setData(e.geojson)},p.addLayer=function(s,e,o){var r={type:e.type,id:this.layerIds[s],source:this.sourceIds[s],layout:e.layout,paint:e.paint};e.filter&&(r.filter=e.filter),this.subplot.addLayer(r,o)},p.update=function(s){var e=s[0].trace,o=this.subplot,r=o.map,n=k(o.gd,s),a=o.belowLookup["trace-"+this.uid],i=!(!e.cluster||!e.cluster.enabled),c=!!this.clusterEnabled,h=this;function f(d){c?function(m){for(var w=T.cluster,u=w.length-1;u>=0;u--)r.removeLayer(h.layerIds[w[u]]);m||r.removeSource(h.sourceIds.circle)}(d):function(m){for(var w=T.nonCluster,u=w.length-1;u>=0;u--){var S=w[u];r.removeLayer(h.layerIds[S]),m||r.removeSource(h.sourceIds[S])}}(d)}function b(d){i?function(m){m||h.addSource("circle",n.circle,e.cluster);for(var w=T.cluster,u=0;u<w.length;u++){var S=w[u];h.addLayer(S,n[S],a)}}(d):function(m){for(var w=T.nonCluster,u=0;u<w.length;u++){var S=w[u],_=n[S];m||h.addSource(S,_),h.addLayer(S,_,a)}}(d)}var g=this.isHidden,y=!0!==e.visible;y?g||f():g?y||b():c!==i?(f(),b()):(this.below!==a&&(f(!0),b(!0)),function v(){for(var d=i?T.cluster:T.nonCluster,m=0;m<d.length;m++){var w=d[m],u=n[w];u&&(o.setOptions(h.layerIds[w],"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&("cluster"!==w&&h.setSourceData(w,u),o.setOptions(h.layerIds[w],"setPaintProperty",u.paint)))}}()),this.clusterEnabled=i,this.isHidden=y,this.below=a,s[0].trace._glTrace=this},p.dispose=function(){for(var s=this.subplot.map,e=this.clusterEnabled?T.cluster:T.nonCluster,o=e.length-1;o>=0;o--){var r=e[o];s.removeLayer(this.layerIds[r]),s.removeSource(this.sourceIds[r])}},$.exports=function(s,e){var o,r,n,a=e[0].trace,i=a.cluster&&a.cluster.enabled,h=new x(s,a.uid,i,!0!==a.visible),f=k(s.gd,e),b=h.below=s.belowLookup["trace-"+a.uid];if(i)for(h.addSource("circle",f.circle,a.cluster),o=0;o<T.cluster.length;o++)n=f[r=T.cluster[o]],h.addLayer(r,n,b);else for(o=0;o<T.nonCluster.length;o++)n=f[r=T.nonCluster[o]],h.addSource(r,n,a.cluster),h.addLayer(r,n,b);return e[0].trace._glTrace=h,h}},86387:function($,I,t){"use strict";var M=t(71828),k=t(34098),l=t(50606).BADNUM;$.exports=function(T,x){var p,s=T.cd,e=T.xaxis,o=T.yaxis,r=[];if(!k.hasMarkers(s[0].trace))return[];if(!1===x)for(p=0;p<s.length;p++)s[p].selected=0;else for(p=0;p<s.length;p++){var a=s[p],i=a.lonlat;if(i[0]!==l){var c=[M.modHalf(i[0],360),i[1]],h=[e.c2p(c),o.c2p(c)];x.contains(h,null,p,T)?(r.push({pointNumber:p,lon:i[0],lat:i[1]}),a.selected=1):a.selected=0}}return r}},81245:function($,I,t){"use strict";var M=t(5386).f,k=t(5386).s,l=t(1426).extendFlat,T=t(82196),x=t(9012),p=T.line;$.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:p.color,width:p.width,dash:p.dash,backoff:p.backoff,shape:l({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},x.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},26442:function($,I,t){"use strict";var M=t(92770),k=t(50606).BADNUM,l=t(89298),T=t(36922),x=t(75225),p=t(66279),s=t(47761).calcMarkerSize;$.exports=function(e,o){for(var r=e._fullLayout,n=o.subplot,a=r[n].radialaxis,i=r[n].angularaxis,c=a.makeCalcdata(o,"r"),h=i.makeCalcdata(o,"theta"),f=o._length,b=new Array(f),v=0;v<f;v++){var g=c[v],y=h[v],d=b[v]={};M(g)&&M(y)?(d.r=g,d.theta=y):d.r=k}var m=s(o,f);return o._extremes.x=l.findExtremes(a,c,{ppad:m}),T(e,o),x(b,o),p(b,o),b}},22184:function($,I,t){"use strict";var M=t(71828),k=t(34098),l=t(49508),T=t(11058),x=t(94039),p=t(82410),s=t(28908),e=t(47581).PTS_LINESONLY,o=t(81245);function r(n,a,i,c){var h,f=c("r"),b=c("theta");if(f)b?h=Math.min(f.length,b.length):(h=f.length,c("theta0"),c("dtheta"));else{if(!b)return 0;h=a.theta.length,c("r0"),c("dr")}return a._length=h,h}$.exports={handleRThetaDefaults:r,supplyDefaults:function(n,a,i,c){function h(v,g){return M.coerce(n,a,o,v,g)}var f=r(0,a,0,h);if(f){h("thetaunit"),h("mode",f<e?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==a.hoveron&&h("hovertemplate"),k.hasLines(a)&&(T(n,a,i,c,h,{backoff:!0}),x(n,a,h),h("connectgaps")),k.hasMarkers(a)&&l(n,a,i,c,h,{gradient:!0}),k.hasText(a)&&(h("texttemplate"),p(n,a,c,h));var b=[];(k.hasMarkers(a)||k.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),b.push("points")),h("fill"),"none"!==a.fill&&(s(n,a,i,h),k.hasLines(a)||x(n,a,h)),"tonext"!==a.fill&&"toself"!==a.fill||b.push("fills"),h("hoveron",b.join("+")||"points"),M.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},98608:function($,I,t){"use strict";var M=t(71828),k=t(89298);$.exports=function(l,T,x){var p,s,e={},o=x[T.subplot]._subplot;o?(p=o.radialAxis,s=o.angularAxis):(p=(o=x[T.subplot]).radialaxis,s=o.angularaxis);var r=p.c2l(l.r);e.rLabel=k.tickText(p,r,!0).text;var n="degrees"===s.thetaunit?M.rad2deg(l.theta):l.theta;return e.thetaLabel=k.tickText(s,n,!0).text,e}},59150:function($,I,t){"use strict";var M=t(33720);function k(l,T,x,p){var s=x.radialAxis,e=x.angularAxis;s._hovertitle="r",e._hovertitle="\u03b8";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(l,T,o);p.rLabel=r.rLabel,p.thetaLabel=r.thetaLabel;var a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=(l.hi||T.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["r","theta","text"]),-1!==c.indexOf("r")&&i(s,p.rLabel),-1!==c.indexOf("theta")&&i(e,p.thetaLabel),-1!==c.indexOf("text")&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}$.exports={hoverPoints:function(l,T,x,p){var s=M(l,T,x,p);if(s&&!1!==s[0].index){var e=s[0];if(void 0===e.index)return s;var o=l.subplot,r=e.cd[e.index],n=e.trace;if(o.isPtInside(r))return e.xLabelVal=void 0,e.yLabelVal=void 0,k(r,n,o,e),e.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},91271:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:t(81245),supplyDefaults:t(22184).supplyDefaults,colorbar:t(4898),formatLabels:t(98608),calc:t(26442),plot:t(45162),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(59150).hoverPoints,selectPoints:t(98002),meta:{}}},45162:function($,I,t){"use strict";var M=t(32663),k=t(50606).BADNUM;$.exports=function(l,T,x){for(var p=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,e=T.yaxis,o={xaxis:s,yaxis:e,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},r=T.radialAxis,n=T.angularAxis,a=0;a<x.length;a++)for(var i=x[a],c=0;c<i.length;c++){0===c&&(i[0].trace._xA=s,i[0].trace._yA=e);var h=i[c],f=h.r;if(f===k)h.x=h.y=k;else{var b=r.c2g(f),v=n.c2g(h.theta);h.x=b*Math.cos(v),h.y=b*Math.sin(v)}}M(l,o,x,p)}},53286:function($,I,t){"use strict";var M=t(81245),k=t(42341),l=t(5386).s;$.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:k.line,connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},65746:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t(53286),supplyDefaults:t(75485),colorbar:t(4898),formatLabels:t(46255),calc:t(37499),hoverPoints:t(29347).hoverPoints,selectPoints:t(58147),meta:{}}},37499:function($,I,t){"use strict";var M=t(36922),k=t(47761).calcMarkerSize,l=t(19635),T=t(89298),x=t(78232).TOO_MANY_POINTS;$.exports=function(p,s){var e=p._fullLayout,o=s.subplot,r=e[o].radialaxis,n=e[o].angularaxis,a=s._r=r.makeCalcdata(s,"r"),i=s._theta=n.makeCalcdata(s,"theta"),c=s._length,h={};c<a.length&&(a=a.slice(0,c)),c<i.length&&(i=i.slice(0,c)),h.r=a,h.theta=i,M(p,s);var f,b=h.opts=l.style(p,s);return c<x?f=k(s,c):b.marker&&(f=2*(b.marker.sizeAvg||Math.max(b.marker.size,3))),s._extremes.x=T.findExtremes(r,a,{ppad:f}),[{x:!1,y:!1,t:h,trace:s}]}},75485:function($,I,t){"use strict";var M=t(71828),k=t(34098),l=t(22184).handleRThetaDefaults,T=t(49508),x=t(11058),p=t(82410),s=t(28908),e=t(47581).PTS_LINESONLY,o=t(53286);$.exports=function(r,n,a,i){function c(f,b){return M.coerce(r,n,o,f,b)}var h=l(r,n,i,c);h?(c("thetaunit"),c("mode",h<e?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),k.hasLines(n)&&(x(r,n,a,i,c),c("connectgaps")),k.hasMarkers(n)&&T(r,n,a,i,c,{noAngleRef:!0,noStandOff:!0}),k.hasText(n)&&(c("texttemplate"),p(r,n,i,c)),c("fill"),"none"!==n.fill&&s(r,n,a,c),M.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},46255:function($,I,t){"use strict";var M=t(98608);$.exports=function(k,l,T){var x=k.i;return"r"in k||(k.r=l._r[x]),"theta"in k||(k.theta=l._theta[x]),M(k,l,T)}},29347:function($,I,t){"use strict";var M=t(20794),k=t(59150).makeHoverPointText;$.exports={hoverPoints:function(l,T,x,p){var s=l.cd[0].t,e=s.r,o=s.theta,r=M.hoverPoints(l,T,x,p);if(r&&!1!==r[0].index){var n=r[0];if(void 0===n.index)return r;var a=l.subplot,i=n.cd[n.index],c=n.trace;if(i.r=e[n.index],i.theta=o[n.index],a.isPtInside(i))return n.xLabelVal=void 0,n.yLabelVal=void 0,k(i,c,a,n),r}}}},21461:function($,I,t){"use strict";var M=t(65746);M.plot=t(49741),$.exports=M},49741:function($,I,t){"use strict";var M=t(88294),k=t(92770),l=t(26787),T=t(38967),x=t(19635),p=t(71828),s=t(78232).TOO_MANY_POINTS;$.exports=function(e,o,r){if(r.length){var n=o.radialAxis,a=o.angularAxis,i=T(e,o);return r.forEach(function(c){if(c&&c[0]&&c[0].trace){var h,f=c[0],b=f.trace,v=f.t,g=b._length,y=v.r,d=v.theta,m=v.opts,w=y.slice(),u=d.slice();for(h=0;h<y.length;h++)o.isPtInside({r:y[h],theta:d[h]})||(w[h]=NaN,u[h]=NaN);var S=new Array(2*g),_=Array(g),E=Array(g);for(h=0;h<g;h++){var L,C,P=w[h];if(k(P)){var z=n.c2g(P),j=a.c2g(u[h],b.thetaunit);L=z*Math.cos(j),C=z*Math.sin(j)}else L=C=NaN;_[h]=S[2*h]=L,E[h]=S[2*h+1]=C}v.tree=M(S),m.marker&&g>=s&&(m.marker.cluster=v.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&p.extendFlat(m.line,x.linePositions(e,b,S)),m.text&&(p.extendFlat(m.text,{positions:S},x.textPosition(e,b,m.text,m.marker)),p.extendFlat(m.textSel,{positions:S},x.textPosition(e,b,m.text,m.markerSel)),p.extendFlat(m.textUnsel,{positions:S},x.textPosition(e,b,m.text,m.markerUnsel))),m.fill&&!i.fill2d&&(i.fill2d=!0),m.marker&&!i.scatter2d&&(i.scatter2d=!0),m.line&&!i.line2d&&(i.line2d=!0),m.text&&!i.glText&&(i.glText=!0),i.lineOptions.push(m.line),i.fillOptions.push(m.fill),i.markerOptions.push(m.marker),i.markerSelectedOptions.push(m.markerSel),i.markerUnselectedOptions.push(m.markerUnsel),i.textOptions.push(m.text),i.textSelectedOptions.push(m.textSel),i.textUnselectedOptions.push(m.textUnsel),i.selectBatch.push([]),i.unselectBatch.push([]),v.x=_,v.y=E,v.rawx=_,v.rawy=E,v.r=y,v.theta=d,v.positions=S,v._scene=i,v.index=i.count,i.count++}}),l(e,o,r)}},$.exports.reglPrecompiled={}},48300:function($,I,t){"use strict";var M=t(5386).f,k=t(5386).s,l=t(1426).extendFlat,T=t(82196),x=t(9012),p=T.line;$.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:p.color,width:p.width,dash:p.dash,backoff:p.backoff,shape:l({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:l({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:l({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:l({},x.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},30621:function($,I,t){"use strict";var M=t(92770),k=t(50606).BADNUM,l=t(36922),T=t(75225),x=t(66279),p=t(47761).calcMarkerSize;$.exports=function(s,e){for(var o=s._fullLayout,r=e.subplot,a=o[r].imaginaryaxis,i=o[r].realaxis.makeCalcdata(e,"real"),c=a.makeCalcdata(e,"imag"),h=e._length,f=new Array(h),b=0;b<h;b++){var v=i[b],g=c[b],y=f[b]={};M(v)&&M(g)?(y.real=v,y.imag=g):y.real=k}return p(e,h),l(s,e),T(f,e),x(f,e),f}},65269:function($,I,t){"use strict";var M=t(71828),k=t(34098),l=t(49508),T=t(11058),x=t(94039),p=t(82410),s=t(28908),e=t(47581).PTS_LINESONLY,o=t(48300);$.exports=function(r,n,a,i){function c(b,v){return M.coerce(r,n,o,b,v)}var v,y,d,m,w,h=(v=n,m=(y=c)("real"),w=y("imag"),m&&w&&(d=Math.min(m.length,w.length)),v._length=d,d);if(h){c("mode",h<e?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),k.hasLines(n)&&(T(r,n,a,i,c,{backoff:!0}),x(r,n,c),c("connectgaps")),k.hasMarkers(n)&&l(r,n,a,i,c,{gradient:!0}),k.hasText(n)&&(c("texttemplate"),p(r,n,i,c));var f=[];(k.hasMarkers(n)||k.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),f.push("points")),c("fill"),"none"!==n.fill&&(s(r,n,a,c),k.hasLines(n)||x(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||f.push("fills"),c("hoveron",f.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},62047:function($,I,t){"use strict";var M=t(89298);$.exports=function(k,l,T){var x={},p=T[l.subplot]._subplot;return x.realLabel=M.tickText(p.radialAxis,k.real,!0).text,x.imagLabel=M.tickText(p.angularAxis,k.imag,!0).text,x}},11350:function($,I,t){"use strict";var M=t(33720);function k(l,T,x,p){var s=x.radialAxis,e=x.angularAxis;s._hovertitle="real",e._hovertitle="imag";var o={};o[T.subplot]={_subplot:x};var r=T._module.formatLabels(l,T,o);p.realLabel=r.realLabel,p.imagLabel=r.imagLabel;var a=[];function i(h,f){a.push(h._hovertitle+": "+f)}if(!T.hovertemplate){var c=(l.hi||T.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["real","imag","text"]),-1!==c.indexOf("real")&&i(s,p.realLabel),-1!==c.indexOf("imag")&&i(e,p.imagLabel),-1!==c.indexOf("text")&&p.text&&(a.push(p.text),delete p.text),p.extraText=a.join("<br>")}}$.exports={hoverPoints:function(l,T,x,p){var s=M(l,T,x,p);if(s&&!1!==s[0].index){var e=s[0];if(void 0===e.index)return s;var o=l.subplot,r=e.cd[e.index],n=e.trace;if(o.isPtInside(r))return e.xLabelVal=void 0,e.yLabelVal=void 0,k(r,n,o,e),e.hovertemplate=n.hovertemplate,s}},makeHoverPointText:k}},85956:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:t(48300),supplyDefaults:t(65269),colorbar:t(4898),formatLabels:t(62047),calc:t(30621),plot:t(12480),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(11350).hoverPoints,selectPoints:t(98002),meta:{}}},12480:function($,I,t){"use strict";var M=t(32663),k=t(50606).BADNUM,l=t(23893).smith;$.exports=function(T,x,p){for(var s=x.layers.frontplot.select("g.scatterlayer"),e=x.xaxis,o=x.yaxis,r={xaxis:e,yaxis:o,plot:x.framework,layerClipId:x._hasClipOnAxisFalse?x.clipIds.forTraces:null},n=0;n<p.length;n++)for(var a=p[n],i=0;i<a.length;i++){0===i&&(a[0].trace._xA=e,a[0].trace._yA=o);var c=a[i],h=c.real;if(h===k)c.x=c.y=k;else{var f=l([h,c.imag]);c.x=f[0],c.y=f[1]}}M(T,r,p,s)}},50413:function($,I,t){"use strict";var M=t(5386).f,k=t(5386).s,l=t(82196),T=t(9012),x=t(50693),p=t(79952).P,s=t(1426).extendFlat,e=l.marker,o=l.line,r=e.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},l.mode,{dflt:"markers"}),text:s({},l.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:s({},l.hovertext,{}),line:{color:o.color,width:o.width,dash:p,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:s({symbol:e.symbol,opacity:e.opacity,angle:e.angle,angleref:e.angleref,standoff:e.standoff,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:s({width:r.width,editType:"calc"},x("marker.line")),gradient:e.gradient,editType:"calc"},x("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:s({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:M()}},54337:function($,I,t){"use strict";var M=t(92770),k=t(36922),l=t(75225),T=t(66279),x=t(47761).calcMarkerSize,p=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(e,o){var r,n,a,i,c,h,f=e._fullLayout[o.subplot].sum,b=o.sum||f,v={a:o.a,b:o.b,c:o.c};for(r=0;r<p.length;r++)if(!v[a=p[r]]){for(c=v[s[a][0]],h=v[s[a][1]],i=new Array(c.length),n=0;n<c.length;n++)i[n]=b-c[n]-h[n];v[a]=i}var g,y,d,m,S=o._length,_=new Array(S);for(r=0;r<S;r++)y=v.b[r],d=v.c[r],M(g=v.a[r])&&M(y)&&M(d)?(1!=(m=f/((g=+g)+(y=+y)+(d=+d)))&&(g*=m,y*=m,d*=m),_[r]={x:d-y,y:g,a:g,b:y,c:d}):_[r]={x:!1,y:!1};return x(o,S),k(e,o),l(_,o),T(_,o),_}},46008:function($,I,t){"use strict";var M=t(71828),k=t(47581),l=t(34098),T=t(49508),x=t(11058),p=t(94039),s=t(82410),e=t(28908),o=t(50413);$.exports=function(r,n,a,i){function c(y,d){return M.coerce(r,n,o,y,d)}var h,f=c("a"),b=c("b"),v=c("c");if(f?(h=f.length,b?(h=Math.min(h,b.length),v&&(h=Math.min(h,v.length))):h=v?Math.min(h,v.length):0):b&&v&&(h=Math.min(b.length,v.length)),h){n._length=h,c("sum"),c("text"),c("hovertext"),"fills"!==n.hoveron&&c("hovertemplate"),c("mode",h<k.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(x(r,n,a,i,c,{backoff:!0}),p(r,n,c),c("connectgaps")),l.hasMarkers(n)&&T(r,n,a,i,c,{gradient:!0}),l.hasText(n)&&(c("texttemplate"),s(r,n,i,c));var g=[];(l.hasMarkers(n)||l.hasText(n))&&(c("cliponaxis"),c("marker.maxdisplayed"),g.push("points")),c("fill"),"none"!==n.fill&&(e(r,n,a,c),l.hasLines(n)||p(r,n,c)),"tonext"!==n.fill&&"toself"!==n.fill||g.push("fills"),c("hoveron",g.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,c)}else n.visible=!1}},4524:function($){"use strict";$.exports=function(I,t,M,k,l){if(t.xa&&(I.xaxis=t.xa),t.ya&&(I.yaxis=t.ya),k[l]){var T=k[l];I.a=T.a,I.b=T.b,I.c=T.c}else I.a=t.a,I.b=t.b,I.c=t.c;return I}},93645:function($,I,t){"use strict";var M=t(89298);$.exports=function(k,l,T){var x={},p=T[l.subplot]._subplot;return x.aLabel=M.tickText(p.aaxis,k.a,!0).text,x.bLabel=M.tickText(p.baxis,k.b,!0).text,x.cLabel=M.tickText(p.caxis,k.c,!0).text,x}},47250:function($,I,t){"use strict";var M=t(33720);$.exports=function(k,l,T,x){var p=M(k,l,T,x);if(p&&!1!==p[0].index){var s=p[0];if(void 0===s.index){var o=k.xa._length,r=o*(1-s.y0/k.ya._length)/2,n=o-r;return s.x0=Math.max(Math.min(s.x0,n),r),s.x1=Math.max(Math.min(s.x1,n),r),p}var a=s.cd[s.index],i=s.trace,c=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var h={};h[i.subplot]={_subplot:c};var f=i._module.formatLabels(a,i,h);s.aLabel=f.aLabel,s.bLabel=f.bLabel,s.cLabel=f.cLabel;var v=[];if(!i.hovertemplate){var g=(a.hi||i.hoverinfo).split("+");-1!==g.indexOf("all")&&(g=["a","b","c"]),-1!==g.indexOf("a")&&y(c.aaxis,s.aLabel),-1!==g.indexOf("b")&&y(c.baxis,s.bLabel),-1!==g.indexOf("c")&&y(c.caxis,s.cLabel)}return s.extraText=v.join("<br>"),s.hovertemplate=i.hovertemplate,p}function y(d,m){v.push(d._hovertitle+": "+m)}}},52979:function($,I,t){"use strict";$.exports={attributes:t(50413),supplyDefaults:t(46008),colorbar:t(4898),formatLabels:t(93645),calc:t(54337),plot:t(7507),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(47250),selectPoints:t(98002),eventData:t(4524),moduleType:"trace",name:"scatterternary",basePlotModule:t(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function($,I,t){"use strict";var M=t(32663);$.exports=function(k,l,T){var x=l.plotContainer;x.select(".scatterlayer").selectAll("*").remove();for(var p=l.xaxis,s=l.yaxis,e={xaxis:p,yaxis:s,plot:x,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},o=l.layers.frontplot.select("g.scatterlayer"),r=0;r<T.length;r++){var n=T[r];n.length&&(n[0].trace._xA=p,n[0].trace._yA=s)}M(k,e,T,o)}},46880:function($,I,t){"use strict";var M=t(82196),k=t(50693),l=t(12663).axisHoverFormat,T=t(5386).f,x=t(42341),p=t(85555).idRegex,s=t(44467).templatedArray,e=t(1426).extendFlat,o=M.marker,r=o.line,n=e(k("marker.line",{editTypeOverride:"calc"}),{width:e({},r.width,{editType:"calc"}),editType:"calc"}),a=e(k("marker"),{symbol:o.symbol,angle:o.angle,size:e({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:n,editType:"calc"});function i(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:p[c],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",$.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:e({},x.text,{}),hovertext:e({},x.hovertext,{}),hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),marker:a,xaxes:i("x"),yaxes:i("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:x.selected.marker,editType:"calc"},unselected:{marker:x.unselected.marker,editType:"calc"},opacity:x.opacity}},65017:function($,I,t){"use strict";var M=t(73972),k=t(83312);$.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t(46880),supplyDefaults:t(25784),colorbar:t(4898),calc:t(87625),plot:t(79410),hoverPoints:t(8567).hoverPoints,selectPoints:t(8689),editStyle:t(28801),meta:{}},M.register(k)},16947:function($,I,t){"use strict";var M=t(46075),k=t(73972),l=t(79749),T=t(27659).a0,x=t(93612),p=t(41675).getFromId,s=t(89298).shouldShowZeroLine,e="splom",o={};function r(a,i,c){for(var f=i._visibleDims,b=c.viewOpts.ranges=new Array(c.matrixOptions.data.length),v=0;v<f.length;v++){var g=f[v],y=b[v]=new Array(4),d=p(a,i._diag[g][0]);d&&(y[0]=d.r2l(d.range[0]),y[2]=d.r2l(d.range[1]));var m=p(a,i._diag[g][1]);m&&(y[1]=m.r2l(m.range[0]),y[3]=m.r2l(m.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:b},{ranges:b}):c.matrix.update({ranges:b})}function n(a){var i=a._fullLayout,c=i._glcanvas.data()[0].regl,h=i._splomGrid;h||(h=i._splomGrid=M(c)),h.update(function(f){var b,v=f._context.plotGlPixelRatio,g=f._fullLayout,y=g._size,d=[0,0,g.width*v,g.height*v],m={};function w(U,J,Y,q,H,X){Y*=v,q*=v,H*=v,X*=v;var Q=J[U+"color"],ne=J[U+"width"],re=String(Q+ne);re in m?m[re].data.push(NaN,NaN,Y,q,H,X):m[re]={data:[Y,q,H,X],join:"rect",thickness:ne*v,color:Q,viewport:d,range:d,overlay:!1}}for(b in g._splomSubplots){var u,S,_=g._plots[b],E=_.xaxis,L=_.yaxis,C=E._gridVals,P=L._gridVals,z=E._offset,j=E._length,R=L._length,V=y.b+L.domain[0]*y.h,D=-L._m,B=-D*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(b=0;b<C.length;b++)u=z+E.l2p(C[b].x),w("grid",E,u,V,u,V+R);if(L.showgrid)for(b=0;b<P.length;b++)w("grid",L,z,S=V+B+D*P[b].x,z+j,S);s(f,E,L)&&(u=z+E.l2p(0),w("zeroline",E,u,V,u,V+R)),s(f,L,E)&&w("zeroline",L,z,S=V+B+0,z+j,S)}var N=[];for(b in m)N.push(m[b]);return N}(a))}$.exports={name:e,attr:x.attr,attrRegex:x.attrRegex,layoutAttributes:x.layoutAttributes,supplyLayoutDefaults:x.supplyLayoutDefaults,drawFramework:x.drawFramework,plot:function(a){var i=a._fullLayout,c=k.getModule(e),h=T(a.calcdata,c)[0];l(a,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(i._hasOnlyLargeSploms&&n(a),c.plot(a,{},h))},drag:function(a){var i=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&n(a);for(var h=0;h<i.length;h++){var f=i[h][0].trace,b=c._splomScenes[f.uid];"splom"===f.type&&b&&b.matrix&&r(a,f,b)}},updateGrid:n,clean:function(a,i,c,h){var f,b={};if(h._splomScenes){for(f=0;f<a.length;f++){var v=a[f];"splom"===v.type&&(b[v.uid]=1)}for(f=0;f<c.length;f++){var g=c[f];if(!b[g.uid]){var y=h._splomScenes[g.uid];y&&y.destroy&&y.destroy(),h._splomScenes[g.uid]=null,delete h._splomScenes[g.uid]}}}0===Object.keys(h._splomScenes||{}).length&&delete h._splomScenes,h._splomGrid&&!i._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),x.clean(a,i,c,h)},updateFx:x.updateFx,toSVG:x.toSVG,reglPrecompiled:o}},87625:function($,I,t){"use strict";var M=t(71828),k=t(41675),l=t(47761).calcMarkerSize,T=t(47761).calcAxisExpansion,x=t(36922),p=t(19635).markerSelection,s=t(19635).markerStyle,e=t(10164),o=t(50606).BADNUM,r=t(78232).TOO_MANY_POINTS;$.exports=function(n,a){var i,c,h,f,b,v,g=a.dimensions,y=a._length,d={},m=d.cdata=[],w=d.data=[],u=a._visibleDims=[];function S(E,L){for(var C=E.makeCalcdata({v:L.values,vcalendar:a.calendar},"v"),P=0;P<C.length;P++)C[P]=C[P]===o?NaN:C[P];m.push(C),w.push("log"===E.type?M.simpleMap(C,E.c2l):C)}for(i=0;i<g.length;i++)if((h=g[i]).visible){if(f=k.getFromId(n,a._diag[i][0]),b=k.getFromId(n,a._diag[i][1]),f&&b&&f.type!==b.type){M.log("Skipping splom dimension "+i+" with conflicting axis types");continue}f?(S(f,h),b&&"category"===b.type&&(b._categories=f._categories.slice())):S(b,h),u.push(i)}for(x(n,a),M.extendFlat(d,s(n,a)),v=m.length*y>r?d.sizeAvg||Math.max(d.size,3):l(a,y),c=0;c<u.length;c++)h=g[i=u[c]],f=k.getFromId(n,a._diag[i][0])||{},b=k.getFromId(n,a._diag[i][1])||{},T(n,a,f,b,m[c],m[c],v);var _=e(n,a);return _.matrix||(_.matrix=!0),_.matrixOptions=d,_.selectedOptions=p(n,a,a.selected),_.unselectedOptions=p(n,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},25784:function($,I,t){"use strict";var M=t(71828),k=t(85501),l=t(46880),T=t(34098),x=t(49508),p=t(94397),s=t(68645).isOpenSymbol;function e(o,r){function n(i,c){return M.coerce(o,r,l.dimensions,i,c)}n("label");var a=n("values");a&&a.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}$.exports=function(o,r,n,a){function i(y,d){return M.coerce(o,r,l,y,d)}var c=k(o,r,{name:"dimensions",handleItemDefaults:e}),h=i("diagonal.visible"),f=i("showupperhalf"),b=i("showlowerhalf");if(p(r,c,"values")&&(h||f||b)){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),x(o,r,n,a,i,{noAngleRef:!0,noStandOff:!0});var v=s(r.marker.symbol),g=T.isBubble(r);i("marker.line.width",v||g?1:0),function(y,d,m,w){var u,S,_=d.dimensions,E=_.length,L=d.showupperhalf,C=d.showlowerhalf,P=d.diagonal.visible,z=new Array(E),j=new Array(E);for(u=0;u<E;u++){var R=u?u+1:"";z[u]="x"+R,j[u]="y"+R}var V=w("xaxes",z),D=w("yaxes",j),B=d._diag=new Array(E);d._xaxes={},d._yaxes={};var N=[],U=[];function J(se,pe,ke,me){if(se){var le=se.charAt(0),ue=m._splomAxes[le];if(d["_"+le+"axes"][se]=1,me.push(se),!(se in ue)){var Ee=ue[se]={};ke&&(Ee.label=ke.label||"",ke.visible&&ke.axis&&(ke.axis.type&&(Ee.type=ke.axis.type),ke.axis.matches&&(Ee.matches=pe)))}}}var Y=!P&&!C,q=!P&&!L;for(d._axesDim={},u=0;u<E;u++){var H=_[u],X=0===u,Q=u===E-1,ne=X&&Y||Q&&q?void 0:V[u],re=X&&q||Q&&Y?void 0:D[u];J(ne,re,H,N),J(re,ne,H,U),B[u]=[ne,re],d._axesDim[ne]=u,d._axesDim[re]=u}for(u=0;u<N.length;u++)for(S=0;S<U.length;S++){var ae=N[u]+U[S];u>S&&L||u<S&&C?m._splomSubplots[ae]=1:u!==S||!P&&C&&L||(m._splomSubplots[ae]=1)}(!C||!P&&L&&C)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,r,a,i),M.coerceSelectionMarkerOpacity(r,i)}else r.visible=!1}},28801:function($,I,t){"use strict";var M=t(71828),k=t(36922),l=t(19635).markerStyle;$.exports=function(T,x){var p=x.trace,s=T._fullLayout._splomScenes[p.uid];if(s){k(T,p),M.extendFlat(s.matrixOptions,l(T,p));var e=M.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(e,null)}}},35948:function($,I){"use strict";I.getDimIndex=function(t,M){for(var k=M._id,l={x:0,y:1}[k.charAt(0)],T=t._visibleDims,x=0;x<T.length;x++)if(t._diag[T[x]][l]===k)return x;return!1}},8567:function($,I,t){"use strict";var M=t(35948),k=t(20794).calcHover;$.exports={hoverPoints:function(l,T,x){var p=l.cd[0].trace,s=l.scene.matrixOptions.cdata,e=l.xa,o=l.ya,r=e.c2p(T),n=o.c2p(x),a=l.distance,i=M.getDimIndex(p,e),c=M.getDimIndex(p,o);if(!1===i||!1===c)return[l];for(var h,f,b=s[i],v=s[c],g=a,y=0;y<b.length;y++){var m=v[y],w=e.c2p(b[y])-r,u=o.c2p(m)-n,S=Math.sqrt(w*w+u*u);S<g&&(g=f=S,h=y)}return l.index=h,l.distance=g,l.dxy=f,void 0===h?[l]:[k(l,b,v,p)]}}},6419:function($,I,t){"use strict";var M=t(65017);M.basePlotModule=t(16947),$.exports=M},79410:function($,I,t){"use strict";var M=t(60487),k=t(71828),l=t(41675),T=t(64505).selectMode;function x(p,s){var e,o,r,n,a,i=p._fullLayout,c=i._size,h=s.trace,f=s.t,b=i._splomScenes[h.uid],v=b.matrixOptions,g=v.cdata,y=i._glcanvas.data()[0].regl,d=i.dragmode;if(0!==g.length){v.lower=h.showupperhalf,v.upper=h.showlowerhalf,v.diagonal=h.diagonal.visible;var m=h._visibleDims,w=g.length,u=b.viewOpts={};for(u.ranges=new Array(w),u.domains=new Array(w),a=0;a<m.length;a++){r=m[a];var S=u.ranges[a]=new Array(4),_=u.domains[a]=new Array(4);(e=l.getFromId(p,h._diag[r][0]))&&(S[0]=e._rl[0],S[2]=e._rl[1],_[0]=e.domain[0],_[2]=e.domain[1]),(o=l.getFromId(p,h._diag[r][1]))&&(S[1]=o._rl[0],S[3]=o._rl[1],_[1]=o.domain[0],_[3]=o.domain[1])}var E=p._context.plotGlPixelRatio,L=c.l*E,C=c.b*E;u.viewport=[L,C,c.w*E+L,c.h*E+C],!0===b.matrix&&(b.matrix=M(y));var j=i.clickmode.indexOf("select")>-1,R=!0;if(T(d)||h.selectedpoints||j){var V=h._length;if(h.selectedpoints){b.selectBatch=h.selectedpoints;var D=h.selectedpoints,B={};for(r=0;r<D.length;r++)B[D[r]]=!0;var N=[];for(r=0;r<V;r++)B[r]||N.push(r);b.unselectBatch=N}var U=f.xpx=new Array(w),J=f.ypx=new Array(w);for(a=0;a<m.length;a++){if(e=l.getFromId(p,h._diag[r=m[a]][0]))for(U[a]=new Array(V),n=0;n<V;n++)U[a][n]=e.c2p(g[a][n]);if(o=l.getFromId(p,h._diag[r][1]))for(J[a]=new Array(V),n=0;n<V;n++)J[a][n]=o.c2p(g[a][n])}if(b.selectBatch.length||b.unselectBatch.length){var Y=k.extendFlat({},v,b.unselectedOptions,u),q=k.extendFlat({},v,b.selectedOptions,u);b.matrix.update(Y,q),R=!1}}else f.xpx=f.ypx=null;if(R){var H=k.extendFlat({},v,u);b.matrix.update(H,null)}}}$.exports=function(p,s,e){if(e.length)for(var o=0;o<e.length;o++)x(p,e[o][0])}},10164:function($,I,t){"use strict";var M=t(71828);$.exports=function(k,l){var T=k._fullLayout,x=l.uid,p=T._splomScenes;p||(p=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},e=p[l.uid];return e||((e=p[x]=M.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw()),e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy(),e.matrixOptions=null,e.selectBatch=null,e.unselectBatch=null,e=null}),e.dirty||M.extendFlat(e,s),e}},8689:function($,I,t){"use strict";var M=t(71828),k=M.pushUnique,l=t(34098),T=t(35948);$.exports=function(x,p){var s=x.cd,e=s[0].trace,o=s[0].t,r=x.scene,n=r.matrixOptions.cdata,a=x.xaxis,i=x.yaxis,c=[];if(!r)return c;var h=!l.hasMarkers(e)&&!l.hasText(e);if(!0!==e.visible||h)return c;var f=T.getDimIndex(e,a),b=T.getDimIndex(e,i);if(!1===f||!1===b)return c;var v=o.xpx[f],g=o.ypx[b],y=n[f],d=n[b],m=(x.scene.selectBatch||[]).slice(),w=[];if(!1!==p&&!p.degenerate)for(var u=0;u<y.length;u++)p.contains([v[u],g[u]],null,u,x)?(c.push({pointNumber:u,x:y[u],y:d[u]}),k(m,u)):-1!==m.indexOf(u)?k(m,u):w.push(u);var S=r.matrixOptions;return m.length||w.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,M.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=m,r.unselectBatch=w,c}},21850:function($,I,t){"use strict";var M=t(50693),k=t(12663).axisHoverFormat,l=t(5386).f,T=t(2418),x=t(9012),p=t(1426).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:p({},x.showlegend,{dflt:!1})};p(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){s[e]=T[e]}),s.hoverinfo=p({},x.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,$.exports=s},88489:function($,I,t){"use strict";var M=t(71828),k=t(78803);function l(p){var s,e,o,r,n,a,i,c,h,f,b,v,g=p._x,y=p._y,d=p._z,m=p._len,w=-1/0,u=1/0,S=-1/0,_=1/0,E=-1/0,L=1/0,C="";for(m&&(i=g[0],h=y[0],b=d[0]),m>1&&(c=g[m-1],f=y[m-1],v=d[m-1]),s=0;s<m;s++)w=Math.max(w,g[s]),u=Math.min(u,g[s]),S=Math.max(S,y[s]),_=Math.min(_,y[s]),E=Math.max(E,d[s]),L=Math.min(L,d[s]),r||g[s]===i||(r=!0,C+="x"),n||y[s]===h||(n=!0,C+="y"),a||d[s]===b||(a=!0,C+="z");r||(C+="x"),n||(C+="y"),a||(C+="z");var P=T(p._x),z=T(p._y),j=T(p._z);C=(C=(C=C.replace("x",(i>c?"-":"+")+"x")).replace("y",(h>f?"-":"+")+"y")).replace("z",(b>v?"-":"+")+"z");var R=function(){m=0,P=[],z=[],j=[]};(!m||m<P.length*z.length*j.length)&&R();var V=function(le){return"x"===le?g:"y"===le?y:d},D=function(le){return"x"===le?P:"y"===le?z:j},B=function(le){return le[m-1]<le[0]?-1:1},N=V(C[1]),U=V(C[3]),J=V(C[5]),Y=D(C[1]).length,q=D(C[3]).length,H=D(C[5]).length,X=!1,Q=function(le,ue,Ee){return Y*(q*le+ue)+Ee},ne=B(V(C[1])),re=B(V(C[3])),ae=B(V(C[5]));for(s=0;s<H-1;s++){for(e=0;e<q-1;e++){for(o=0;o<Y-1;o++){var se=Q(s,e,o),pe=Q(s,e,o+1),ke=Q(s,e+1,o),me=Q(s+1,e,o);if(N[se]*ne<N[pe]*ne&&U[se]*re<U[ke]*re&&J[se]*ae<J[me]*ae||(X=!0),X)break}if(X)break}if(X)break}return X&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),R()),{xMin:u,yMin:_,zMin:L,xMax:w,yMax:S,zMax:E,Xs:P,Ys:z,Zs:j,len:m,fill:C}}function T(p){return M.distinctVals(p).vals}function x(p,s){if(void 0===s&&(s=p.length),M.isTypedArray(p))return p.subarray(0,s);for(var e=[],o=0;o<s;o++)e[o]=+p[o];return e}$.exports={calc:function(p,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=x(s.u,s._len),s._v=x(s.v,s._len),s._w=x(s.w,s._len),s._x=x(s.x,s._len),s._y=x(s.y,s._len),s._z=x(s.z,s._len);var e=l(s);s._gridFill=e.fill,s._Xs=e.Xs,s._Ys=e.Ys,s._Zs=e.Zs,s._len=e.len;var o,r,n,a=0;s.starts&&(o=x(s.starts.x||[]),r=x(s.starts.y||[]),n=x(s.starts.z||[]),a=Math.min(o.length,r.length,n.length)),s._startsX=o||[],s._startsY=r||[],s._startsZ=n||[];var i,c=0,h=1/0;for(i=0;i<s._len;i++){var f=s._u[i],b=s._v[i],v=s._w[i],g=Math.sqrt(f*f+b*b+v*v);c=Math.max(c,g),h=Math.min(h,g)}for(k(p,s,{vals:[h,c],containerStr:"",cLetter:"c"}),i=0;i<a;i++){var y=o[i];e.xMax=Math.max(e.xMax,y),e.xMin=Math.min(e.xMin,y);var d=r[i];e.yMax=Math.max(e.yMax,d),e.yMin=Math.min(e.yMin,d);var m=n[i];e.zMax=Math.max(e.zMax,m),e.zMin=Math.min(e.zMin,m)}s._slen=a,s._normMax=c,s._xbnds=[e.xMin,e.xMax],s._ybnds=[e.yMin,e.yMax],s._zbnds=[e.zMin,e.zMax]},filter:x,processGrid:l}},90154:function($,I,t){"use strict";var M=t(9330).gl_streamtube3d,k=M.createTubeMesh,l=t(71828),T=t(81697).parseColorScale,x=t(21081).extractOpts,p=t(90060),s={xaxis:0,yaxis:1,zaxis:2};function e(i,c){this.scene=i,this.uid=c,this.mesh=null,this.data=null}var o=e.prototype;function r(i){var c=i.length;return c>2?i.slice(1,c-1):2===c?[(i[0]+i[1])/2]:i}function n(i){var c=i.length;return 1===c?[.5,.5]:[i[1]-i[0],i[c-1]-i[c-2]]}function a(i,c){var h=i.fullSceneLayout,f=i.dataScale,b=c._len,v={};function g(Y,q){var H=h[q],X=f[s[q]];return l.simpleMap(Y,function(Q){return H.d2l(Q)*X})}if(v.vectors=p(g(c._u,"xaxis"),g(c._v,"yaxis"),g(c._w,"zaxis"),b),!b)return{positions:[],cells:[]};var y=g(c._Xs,"xaxis"),d=g(c._Ys,"yaxis"),m=g(c._Zs,"zaxis");if(v.meshgrid=[y,d,m],v.gridFill=c._gridFill,c._slen)v.startingPositions=p(g(c._startsX,"xaxis"),g(c._startsY,"yaxis"),g(c._startsZ,"zaxis"));else{for(var w=d[0],u=r(y),S=r(m),_=new Array(u.length*S.length),E=0,L=0;L<u.length;L++)for(var C=0;C<S.length;C++)_[E++]=[u[L],w,S[C]];v.startingPositions=_}v.colormap=T(c),v.tubeSize=c.sizeref,v.maxLength=c.maxdisplayed;var P=g(c._xbnds,"xaxis"),z=g(c._ybnds,"yaxis"),j=g(c._zbnds,"zaxis"),R=n(y),V=n(d),D=n(m),N=M(v,[[P[0]-R[0],z[0]-V[0],j[0]-D[0]],[P[1]+R[1],z[1]+V[1],j[1]+D[1]]]),U=x(c);N.vertexIntensityBounds=[U.min/c._normMax,U.max/c._normMax];var J=c.lightposition;return N.lightPosition=[J.x,J.y,J.z],N.ambient=c.lighting.ambient,N.diffuse=c.lighting.diffuse,N.specular=c.lighting.specular,N.roughness=c.lighting.roughness,N.fresnel=c.lighting.fresnel,N.opacity=c.opacity,c._pad=N.tubeScale*c.sizeref*2,N}o.handlePick=function(i){var c=this.scene.fullSceneLayout,h=this.scene.dataScale;function f(g,y){var m=h[s[y]];return c[y].l2c(g)/m}if(i.object===this.mesh){var b=i.data.position,v=i.data.velocity;return i.traceCoordinate=[f(b[0],"xaxis"),f(b[1],"yaxis"),f(b[2],"zaxis"),f(v[0],"xaxis"),f(v[1],"yaxis"),f(v[2],"zaxis"),i.data.intensity*this.data._normMax,i.data.divergence],i.textLabel=this.data.hovertext||this.data.text,!0}},o.update=function(i){this.data=i;var c=a(this.scene,i);this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(i,c){var h=i.glplot.gl,f=a(i,c),b=k(h,f),v=new e(i,c.uid);return v.mesh=b,v.data=c,b._trace=v,i.glplot.add(b),v}},22459:function($,I,t){"use strict";var M=t(71828),k=t(1586),l=t(21850);$.exports=function(T,x,p,s){function e(h,f){return M.coerce(T,x,l,h,f)}var o=e("u"),r=e("v"),n=e("w"),a=e("x"),i=e("y"),c=e("z");o&&o.length&&r&&r.length&&n&&n.length&&a&&a.length&&i&&i.length&&c&&c.length?(e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),k(T,x,s,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),x._length=null):x.visible=!1}},61510:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"streamtube",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(21850),supplyDefaults:t(22459),colorbar:{min:"cmin",max:"cmax"},calc:t(88489).calc,plot:t(90154),eventData:function(M,k){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=k.traceCoordinate[3],M.tubev=k.traceCoordinate[4],M.tubew=k.traceCoordinate[5],M.norm=k.traceCoordinate[6],M.divergence=k.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},57564:function($,I,t){"use strict";var M=t(9012),k=t(5386).f,l=t(5386).s,T=t(50693),x=t(27670).Y,p=t(34e3),s=t(7055),e=t(1426).extendFlat;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:e({colors:{valType:"data_array",editType:"calc"},line:{color:e({},p.marker.line.color,{dflt:null}),width:e({},p.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:p.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:p.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:p.textfont,insidetextorientation:p.insidetextorientation,insidetextfont:p.insidetextfont,outsidetextfont:e({},p.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:p.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:x({name:"sunburst",trace:!0,editType:"calc"})}},66888:function($,I,t){"use strict";var M=t(74875);I.name="sunburst",I.plot=function(k,l,T,x){M.plotBasePlot(I.name,k,l,T,x)},I.clean=function(k,l,T,x){M.cleanBasePlot(I.name,k,l,T,x)}},52147:function($,I,t){"use strict";var M=t(674),k=t(92770),l=t(71828),T=t(21081).makeColorScaleFuncFromTrace,x=t(32354).makePullColorFn,p=t(32354).generateExtendedColors,s=t(21081).calc,e=t(50606).ALMOST_EQUAL,o={},r={},n={};function a(i,c,h){var f=0,b=i.children;if(b){for(var v=b.length,g=0;g<v;g++)f+=a(b[g],c,h);h.branches&&f++}else h.leaves&&f++;return i.value=i.data.data.value=f,c._values||(c._values=[]),c._values[i.data.data.i]=f,f}I.calc=function(i,c){var h,f,b,v,g,y,d=i._fullLayout,m=c.ids,w=l.isArrayOrTypedArray(m),u=c.labels,S=c.parents,_=c.values,E=l.isArrayOrTypedArray(_),L=[],C={},P={},z=function(ae){return ae||"number"==typeof ae},j=function(ae){return!E||k(_[ae])&&_[ae]>=0};w?(h=Math.min(m.length,S.length),f=function(ae){return z(m[ae])&&j(ae)},b=function(ae){return String(m[ae])}):(h=Math.min(u.length,S.length),f=function(ae){return z(u[ae])&&j(ae)},b=function(ae){return String(u[ae])}),E&&(h=Math.min(h,_.length));for(var R=0;R<h;R++)if(f(R)){var V=b(R),D=z(S[R])?String(S[R]):"",B={i:R,id:V,pid:D,label:z(u[R])?String(u[R]):""};E&&(B.v=+_[R]),L.push(B),g=V,C[v=D]?C[v].push(g):C[v]=[g],P[g]=1}if(C[""]){if(C[""].length>1){for(var N=l.randstr(),U=0;U<L.length;U++)""===L[U].pid&&(L[U].pid=N);L.unshift({hasMultipleRoots:!0,id:N,pid:"",label:""})}}else{var J,Y=[];for(J in C)P[J]||Y.push(J);if(1!==Y.length)return l.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",Y.join(", ")].join(" "));L.unshift({hasImpliedRoot:!0,id:J=Y[0],pid:"",label:J})}try{y=M.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(L)}catch(ae){return l.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ae.message].join(" "))}var q=M.hierarchy(y),H=!1;if(E)switch(c.branchvalues){case"remainder":q.sum(function(ae){return ae.data.v});break;case"total":q.each(function(ae){var se=ae.data.data,pe=se.v;if(ae.children){var ke=ae.children.reduce(function(me,le){return me+le.data.data.v},0);if((se.hasImpliedRoot||se.hasMultipleRoots)&&(pe=ke),pe<ke*e)return H=!0,l.warn(["Total value for node",ae.data.data.id,"of",c.name,"is smaller than the sum of its children.","\nparent value =",pe,"\nchildren sum =",ke].join(" "))}ae.value=pe})}else a(q,c,{branches:-1!==c.count.indexOf("branches"),leaves:-1!==c.count.indexOf("leaves")});if(!H){var X,Q;c.sort&&q.sort(function(ae,se){return se.value-ae.value});var ne=c.marker.colors||[];return c._hasColorscale?(!!ne.length||(ne=E?c.values:c._values),s(i,c,{vals:ne,containerStr:"marker",cLetter:"c"}),Q=T(c.marker)):X=x(d["_"+c.type+"colormap"]),q.each(function(ae){var se=ae.data.data;se.color=c._hasColorscale?Q(ne[se.i]):X(ne[se.i],se.id)}),L[0].hierarchy=q,L}},I._runCrossTraceCalc=function(i,c){var h=c._fullLayout,f=c.calcdata,b=h[i+"colorway"],v=h["_"+i+"colormap"];h["extend"+i+"colors"]&&(b=p(b,"icicle"===i?n:"treemap"===i?r:o));var g,y=0;function d(u){var S=u.data.data,_=S.id;!1===S.color&&(v[_]?S.color=v[_]:u.parent?u.parent.parent?S.color=u.parent.data.data.color:(v[_]=S.color=b[y%b.length],y++):S.color=g)}for(var m=0;m<f.length;m++){var w=f[m][0];w.trace.type===i&&w.hierarchy&&(g=w.trace.root.color,w.hierarchy.each(d))}},I.crossTraceCalc=function(i){return I._runCrossTraceCalc("sunburst",i)}},7055:function($){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function($,I,t){"use strict";var M=t(71828),k=t(57564),l=t(27670).c,T=t(90769).handleText,x=t(21081),p=x.hasColorscale,s=x.handleDefaults;$.exports=function(e,o,r,n){function a(v,g){return M.coerce(e,o,k,v,g)}var i=a("labels"),c=a("parents");if(i&&i.length&&c&&c.length){var h=a("values");a(h&&h.length?"branchvalues":"count"),a("level"),a("maxdepth"),a("marker.line.width")&&a("marker.line.color",n.paper_bgcolor),a("marker.colors");var f=o._hasColorscale=p(e,"marker","colors")||(e.marker||{}).coloraxis;f&&s(e,o,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",f?1:.7);var b=a("text");a("texttemplate"),o.texttemplate||a("textinfo",Array.isArray(b)?"text+label":"label"),a("hovertext"),a("hovertemplate"),T(e,o,n,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(o,n,a),o._length=null}else o.visible=!1}},83523:function($,I,t){"use strict";var M=t(39898),k=t(73972),l=t(23469).appendArrayPointValue,T=t(30211),x=t(71828),p=t(11086),s=t(2791),e=t(53581).formatPieValue;function o(r,n,a){for(var i=r.data.data,c={curveNumber:n.index,pointNumber:i.i,data:n._input,fullData:n},h=0;h<a.length;h++){var f=a[h];f in r&&(c[f]=r[f])}return"parentString"in r&&!s.isHierarchyRoot(r)&&(c.parent=r.parentString),l(c,n,i.i),c}$.exports=function(r,n,a,i,c){var h=i[0],f=h.trace,b=h.hierarchy,v="sunburst"===f.type,g="treemap"===f.type||"icicle"===f.type;"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(y){var d=a._fullLayout;if(!a._dragging&&!1!==d.hovermode){var m,w=a._fullData[f.index],u=y.data.data,S=u.i,_=s.isHierarchyRoot(y),E=s.getParent(b,y),L=s.getValue(y),C=function(ne){return x.castOption(w,S,ne)},P=C("hovertemplate"),z=T.castHoverinfo(w,d,S),j=d.separators;if(P||z&&"none"!==z&&"skip"!==z){var R,V;v&&(R=h.cx+y.pxmid[0]*(1-y.rInscribed),V=h.cy+y.pxmid[1]*(1-y.rInscribed)),g&&(R=y._hoverX,V=y._hoverY);var D,B={},N=[],U=[],J=function(ne){return-1!==N.indexOf(ne)};z&&(N="all"===z?w._module.attributes.hoverinfo.flags:z.split("+")),B.label=u.label,J("label")&&B.label&&U.push(B.label),u.hasOwnProperty("v")&&(B.value=u.v,B.valueLabel=e(B.value,j),J("value")&&U.push(B.valueLabel)),B.currentPath=y.currentPath=s.getPath(y.data),J("current path")&&!_&&U.push(B.currentPath);var Y=[],q=function(){-1===Y.indexOf(D)&&(U.push(D),Y.push(D))};B.percentParent=y.percentParent=L/s.getValue(E),B.parent=y.parentString=s.getPtLabel(E),J("percent parent")&&(D=s.formatPercent(B.percentParent,j)+" of "+B.parent,q()),B.percentEntry=y.percentEntry=L/s.getValue(n),B.entry=y.entry=s.getPtLabel(n),!J("percent entry")||_||y.onPathbar||(D=s.formatPercent(B.percentEntry,j)+" of "+B.entry,q()),B.percentRoot=y.percentRoot=L/s.getValue(b),B.root=y.root=s.getPtLabel(b),J("percent root")&&!_&&(D=s.formatPercent(B.percentRoot,j)+" of "+B.root,q()),B.text=C("hovertext")||C("text"),J("text")&&x.isValidTextValue(D=B.text)&&U.push(D),m=[o(y,w,c.eventDataKeys)];var H={trace:w,y:V,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:U.join("<br>"),name:P||J("name")?w.name:void 0,color:C("hoverlabel.bgcolor")||u.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:B,eventData:m};v&&(H.x0=R-y.rInscribed*y.rpx1,H.x1=R+y.rInscribed*y.rpx1,H.idealAlign=y.pxmid[0]<0?"left":"right"),g&&(H.x=R,H.idealAlign=R<0?"left":"right");var X=[];T.loneHover(H,{container:d._hoverlayer.node(),outerContainer:d._paper.node(),gd:a,inOut_bbox:X}),m[0].bbox=X[0],f._hasHoverLabel=!0}if(g){var Q=r.select("path.surface");c.styleOne(Q,y,w,{hovered:!0})}f._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[o(y,w,c.eventDataKeys)],event:M.event})}}),r.on("mouseout",function(y){var d=a._fullLayout,m=a._fullData[f.index],w=M.select(this).datum();if(f._hasHoverEvent&&(y.originalEvent=M.event,a.emit("plotly_unhover",{points:[o(w,m,c.eventDataKeys)],event:M.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(T.loneUnhover(d._hoverlayer.node()),f._hasHoverLabel=!1),g){var u=r.select("path.surface");c.styleOne(u,w,m,{hovered:!1})}}),r.on("click",function(y){var d=a._fullLayout,m=a._fullData[f.index],w=v&&(s.isHierarchyRoot(y)||s.isLeaf(y)),u=s.getPtId(y),S=s.isEntry(y)?s.findEntryWithChild(b,u):s.findEntryWithLevel(b,u),_=s.getPtId(S),E={points:[o(y,m,c.eventDataKeys)],event:M.event};w||(E.nextLevel=_);var L=p.triggerHandler(a,"plotly_"+f.type+"click",E);if(!1!==L&&d.hovermode&&(a._hoverdata=[o(y,m,c.eventDataKeys)],T.click(a,M.event)),!w&&!1!==L&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",m,d._tracePreGUI[m.uid],{level:m.level});var C={data:[{level:_}],traces:[f.index]},P={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(d._hoverlayer.node()),k.call("animate",a,C,P)}})}},2791:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(6964),T=t(53581);function x(p){return p.data.data.pid}I.findEntryWithLevel=function(p,s){var e;return s&&p.eachAfter(function(o){if(I.getPtId(o)===s)return e=o.copy()}),e||p},I.findEntryWithChild=function(p,s){var e;return p.eachAfter(function(o){for(var r=o.children||[],n=0;n<r.length;n++)if(I.getPtId(r[n])===s)return e=o.copy()}),e||p},I.isEntry=function(p){return!p.parent},I.isLeaf=function(p){return!p.children},I.getPtId=function(p){return p.data.data.id},I.getPtLabel=function(p){return p.data.data.label},I.getValue=function(p){return p.value},I.isHierarchyRoot=function(p){return""===x(p)},I.setSliceCursor=function(p,s,e){var o=e.isTransitioning;if(!o){var r=p.datum();o=e.hideOnRoot&&I.isHierarchyRoot(r)||e.hideOnLeaves&&I.isLeaf(r)}l(p,o?null:"pointer")},I.getInsideTextFontKey=function(p,s,e,o,r){var a=e.data.data.i;return M.castOption(s,a,((r||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+p)||M.castOption(s,a,"textfont."+p)||o.size},I.getOutsideTextFontKey=function(p,s,e,o){var r=e.data.data.i;return M.castOption(s,r,"outsidetextfont."+p)||M.castOption(s,r,"textfont."+p)||o.size},I.isOutsideText=function(p,s){return!p._hasColorscale&&I.isHierarchyRoot(s)},I.determineTextFont=function(p,s,e,o){return I.isOutsideText(p,s)?{color:I.getOutsideTextFontKey("color",r=p,n=s,a=e),family:I.getOutsideTextFontKey("family",r,n,a),size:I.getOutsideTextFontKey("size",r,n,a)}:function(r,n,a,i){var h=n.data.data,f=h.i,b=M.castOption(r,f,((i||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!b&&r._input.textfont&&(b=M.castOption(r._input,f,"textfont.color")),{color:b||k.contrast(h.color),family:I.getInsideTextFontKey("family",r,n,a,i),size:I.getInsideTextFontKey("size",r,n,a,i)}}(p,s,e,o);var r,n,a},I.hasTransition=function(p){return!!(p&&p.duration>0)},I.getMaxDepth=function(p){return p.maxdepth>=0?p.maxdepth:1/0},I.isHeader=function(p,s){return!(I.isLeaf(p)||p.depth===s._maxDepth-1)},I.getParent=function(p,s){return I.findEntryWithLevel(p,x(s))},I.listPath=function(p,s){var e=p.parent;if(!e)return[];var o=s?[e.data[s]]:[e];return I.listPath(e,s).concat(o)},I.getPath=function(p){return I.listPath(p,"label").join("/")+"/"},I.formatValue=T.formatPieValue,I.formatPercent=function(p,s){var e=M.formatPercent(p,0);return"0%"===e&&(e=T.formatPiePercent(p,s)),e}},87619:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"sunburst",basePlotModule:t(66888),categories:[],animatable:!0,attributes:t(57564),layoutAttributes:t(2654),supplyDefaults:t(17094),supplyLayoutDefaults:t(57034),calc:t(52147).calc,crossTraceCalc:t(52147).crossTraceCalc,plot:t(24714).plot,style:t(29969).style,colorbar:t(4898),meta:{}}},2654:function($){"use strict";$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function($,I,t){"use strict";var M=t(71828),k=t(2654);$.exports=function(l,T){function x(p,s){return M.coerce(l,T,k,p,s)}x("sunburstcolorway",T.colorway),x("extendsunburstcolors")}},24714:function($,I,t){"use strict";var M=t(39898),k=t(674),l=t(81684).sX,T=t(91424),x=t(71828),p=t(63893),s=t(72597),e=s.recordMinTextSize,o=s.clearMinTextSize,r=t(14575),n=t(53581).getRotationAngle,a=r.computeTransform,i=r.transformInsideText,c=t(29969).styleOne,h=t(16688).resizeText,f=t(83523),b=t(7055),v=t(2791);function g(d,m,w,u){var S=d._context.staticPlot,_=d._fullLayout,E=!_.uniformtext.mode&&v.hasTransition(u),L=M.select(w).selectAll("g.slice"),C=m[0],P=C.trace,j=v.findEntryWithLevel(C.hierarchy,P.level),R=v.getMaxDepth(P),V=_._size,D=P.domain,N=V.h*(D.y[1]-D.y[0]),U=.5*Math.min(V.w*(D.x[1]-D.x[0]),N),J=C.cx=V.l+V.w*(D.x[1]+D.x[0])/2,Y=C.cy=V.t+V.h*(1-D.y[0])-N/2;if(!j)return L.remove();var q=null,H={};E&&L.each(function(we){H[v.getPtId(we)]={rpx0:we.rpx0,rpx1:we.rpx1,x0:we.x0,x1:we.x1,transform:we.transform},!q&&v.isEntry(we)&&(q=we)});var we,X=(we=j,k.partition().size([2*Math.PI,we.height+1])(we)).descendants(),Q=j.height+1,ne=0,re=R;C.hasMultipleRoots&&v.isHierarchyRoot(j)&&(X=X.slice(1),Q-=1,ne=1,re+=1),X=X.filter(function(we){return we.y1<=re});var ae=n(P.rotation);ae&&X.forEach(function(we){we.x0+=ae,we.x1+=ae});var se=Math.min(Q,R),pe=function(we){return(we-ne)/se*U},ke=function(we,K){return[we*Math.cos(K),-we*Math.sin(K)]},me=function(we){return x.pathAnnulus(we.rpx0,we.rpx1,we.x0,we.x1,J,Y)},le=function(we){return J+y(we)[0]*(we.transform.rCenter||0)+(we.transform.x||0)},ue=function(we){return Y+y(we)[1]*(we.transform.rCenter||0)+(we.transform.y||0)};(L=L.data(X,v.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var we=M.select(this);we.select("path.surface").transition().attrTween("d",function(K){var oe=function(he){var ye,Me=v.getPtId(he),Re=H[Me],Pe=H[v.getPtId(j)];if(Pe){var De=(he.x1>Pe.x1?2*Math.PI:0)+ae;ye=he.rpx1<Pe.rpx1?{x0:he.x0,x1:he.x1,rpx0:0,rpx1:0}:{x0:De,x1:De,rpx0:he.rpx0,rpx1:he.rpx1}}else{var fe,ge=v.getPtId(he.parent);L.each(function(tt){if(v.getPtId(tt)===ge)return fe=tt});var be,Ie=fe.children;Ie.forEach(function(tt,nt){if(v.getPtId(tt)===Me)return be=nt});var He=Ie.length,Ve=l(fe.x0,fe.x1);ye={rpx0:U,rpx1:U,x0:Ve(be/He),x1:Ve((be+1)/He)}}return l(Re,ye)}(K);return function(he){return me(oe(he))}}),we.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var Ee=null;if(E&&q){var de=v.getPtId(q);L.each(function(we){null===Ee&&v.getPtId(we)===de&&(Ee=we.x1)})}var xe=L;function Te(we){var K=we.parent,oe=H[v.getPtId(K)],he={};if(oe){var ye=K.children,Me=ye.indexOf(we),Re=ye.length,Pe=l(oe.x0,oe.x1);he.x0=Pe(Me/Re),he.x1=Pe(Me/Re)}else he.x0=he.x1=0;return he}E&&(xe=xe.transition().each("end",function(){var we=M.select(this);v.setSliceCursor(we,d,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),xe.each(function(we){var De,K=M.select(this),oe=x.ensureSingle(K,"path","surface",function(De){De.style("pointer-events",S?"none":"all")});we.rpx0=pe(we.y0),we.rpx1=pe(we.y1),we.xmid=(we.x0+we.x1)/2,we.pxmid=ke(we.rpx1,we.xmid),we.midangle=-(we.xmid-Math.PI/2),we.startangle=-(we.x0-Math.PI/2),we.stopangle=-(we.x1-Math.PI/2),we.halfangle=.5*Math.min(x.angleDelta(we.x0,we.x1)||Math.PI,Math.PI),we.ring=1-we.rpx0/we.rpx1,we.rInscribed=0===(De=we).rpx0&&x.isFullCircle([De.x0,De.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(De.halfangle)),De.ring/2)),E?oe.transition().attrTween("d",function(De){var fe=function(ge){var be,Ie=H[v.getPtId(ge)],He={x0:ge.x0,x1:ge.x1,rpx0:ge.rpx0,rpx1:ge.rpx1};if(Ie)be=Ie;else if(q)if(ge.parent)if(Ee){var Ve=(ge.x1>Ee?2*Math.PI:0)+ae;be={x0:Ve,x1:Ve}}else x.extendFlat(be={rpx0:U,rpx1:U},Te(ge));else be={rpx0:0,rpx1:0};else be={x0:ae,x1:ae};return l(be,He)}(De);return function(ge){return me(fe(ge))}}):oe.attr("d",me),K.call(f,j,d,m,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(v.setSliceCursor,d,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:d._transitioning}),oe.call(c,we,P);var he=x.ensureSingle(K,"g","slicetext"),ye=x.ensureSingle(he,"text","",function(De){De.attr("data-notex",1)}),Me=x.ensureUniformFontSize(d,v.determineTextFont(P,we,_.font));ye.text(I.formatSliceLabel(we,j,P,m,_)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Me).call(p.convertToTspans,d);var Re=T.bBox(ye.node());we.transform=i(Re,we,C),we.transform.targetX=le(we),we.transform.targetY=ue(we);var Pe=function(De,fe){var ge=De.transform;return a(ge,fe),ge.fontSize=Me.size,e(P.type,ge,_),x.getTextTransform(ge)};E?ye.transition().attrTween("transform",function(De){var fe=function(ge){var be,Ie=H[v.getPtId(ge)],He=ge.transform;if(Ie)be=Ie;else if(be={rpx1:ge.rpx1,transform:{textPosAngle:He.textPosAngle,scale:0,rotate:He.rotate,rCenter:He.rCenter,x:He.x,y:He.y}},q)if(ge.parent)if(Ee){var Ve=ge.x1>Ee?2*Math.PI:0;be.x0=be.x1=Ve}else x.extendFlat(be,Te(ge));else be.x0=be.x1=ae;else be.x0=be.x1=ae;var tt=l(be.transform.textPosAngle,ge.transform.textPosAngle),nt=l(be.rpx1,ge.rpx1),st=l(be.x0,ge.x0),dt=l(be.x1,ge.x1),wt=l(be.transform.scale,He.scale),_t=l(be.transform.rotate,He.rotate),pt=0===He.rCenter?3:0===be.transform.rCenter?1/3:1,Pt=l(be.transform.rCenter,He.rCenter);return function(St){var Ot=nt(St),jt=st(St),Dt=dt(St),Ye=Pt(Math.pow(St,pt)),Ze={pxmid:ke(Ot,(jt+Dt)/2),rpx1:Ot,transform:{textPosAngle:tt(St),rCenter:Ye,x:He.x,y:He.y}};return e(P.type,He,_),{transform:{targetX:le(Ze),targetY:ue(Ze),scale:wt(St),rotate:_t(St),rCenter:Ye}}}}(De);return function(ge){return Pe(fe(ge),Re)}}):ye.attr("transform",Pe(we,Re))})}function y(d){return w=d.transform.textPosAngle,[(m=d.rpx1)*Math.sin(w),-m*Math.cos(w)];var m,w}I.plot=function(d,m,w,u){var S,_,E=d._fullLayout,L=E._sunburstlayer,C=!w,P=!E.uniformtext.mode&&v.hasTransition(w);o("sunburst",E),(S=L.selectAll("g.trace.sunburst").data(m,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(u&&(_=u()),M.transition().duration(w.duration).ease(w.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){L.selectAll("g.trace").each(function(z){g(d,z,this,w)})})):(S.each(function(z){g(d,z,this,w)}),E.uniformtext.mode&&h(d,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},I.formatSliceLabel=function(d,m,w,u,S){var _=w.texttemplate,E=w.textinfo;if(!(_||E&&"none"!==E))return"";var L=S.separators,P=d.data.data,z=u[0].hierarchy,j=v.isHierarchyRoot(d),R=v.getParent(z,d),V=v.getValue(d);if(!_){var D,B=E.split("+"),N=function(re){return-1!==B.indexOf(re)},U=[];if(N("label")&&P.label&&U.push(P.label),P.hasOwnProperty("v")&&N("value")&&U.push(v.formatValue(P.v,L)),!j){N("current path")&&U.push(v.getPath(d.data));var J=0;N("percent parent")&&J++,N("percent entry")&&J++,N("percent root")&&J++;var Y=J>1;if(J){var q,H=function(re){D=v.formatPercent(q,L),Y&&(D+=" of "+re),U.push(D)};N("percent parent")&&!j&&(q=V/v.getValue(R),H("parent")),N("percent entry")&&(q=V/v.getValue(m),H("entry")),N("percent root")&&(q=V/v.getValue(z),H("root"))}}return N("text")&&(D=x.castOption(w,P.i,"text"),x.isValidTextValue(D)&&U.push(D)),U.join("<br>")}var X=x.castOption(w,P.i,"texttemplate");if(!X)return"";var Q={};P.label&&(Q.label=P.label),P.hasOwnProperty("v")&&(Q.value=P.v,Q.valueLabel=v.formatValue(P.v,L)),Q.currentPath=v.getPath(d.data),j||(Q.percentParent=V/v.getValue(R),Q.percentParentLabel=v.formatPercent(Q.percentParent,L),Q.parent=v.getPtLabel(R)),Q.percentEntry=V/v.getValue(m),Q.percentEntryLabel=v.formatPercent(Q.percentEntry,L),Q.entry=v.getPtLabel(m),Q.percentRoot=V/v.getValue(z),Q.percentRootLabel=v.formatPercent(Q.percentRoot,L),Q.root=v.getPtLabel(z),P.hasOwnProperty("color")&&(Q.color=P.color);var ne=x.castOption(w,P.i,"text");return(x.isValidTextValue(ne)||""===ne)&&(Q.text=ne),Q.customdata=x.castOption(w,P.i,"customdata"),x.texttemplateString(X,Q,S._d3locale,Q,w._meta||{})}},29969:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(71828),T=t(72597).resizeText;function x(p,s,e){var o=s.data.data,r=!s.children,n=o.i,a=l.castOption(e,n,"marker.line.color")||k.defaultLine,i=l.castOption(e,n,"marker.line.width")||0;p.style("stroke-width",i).call(k.fill,o.color).call(k.stroke,a).style("opacity",r?e.leaf.opacity:null)}$.exports={style:function(p){var s=p._fullLayout._sunburstlayer.selectAll(".trace");T(p,s,"sunburst"),s.each(function(e){var o=M.select(this),r=e[0].trace;o.style("opacity",r.opacity),o.selectAll("path.surface").each(function(n){M.select(this).call(x,n,r)})})},styleOne:x}},54532:function($,I,t){"use strict";var M=t(7901),k=t(50693),l=t(12663).axisHoverFormat,T=t(5386).f,x=t(9012),p=t(1426).extendFlat,s=t(30962).overrideAll;function e(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var o=$.exports=s(p({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:e(),y:e(),z:e()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:p({},k.zauto,{}),zmin:p({},k.zmin,{}),zmax:p({},k.zmax,{})},hoverinfo:p({},x.hoverinfo),showlegend:p({},x.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes",o.transforms=void 0},18396:function($,I,t){"use strict";var M=t(78803);$.exports=function(k,l){M(k,l,l.surfacecolor?{vals:l.surfacecolor,containerStr:"",cLetter:"c"}:{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function($,I,t){"use strict";var M=t(9330).gl_surface3d,k=t(9330).ndarray,l=t(9330).ndarray_linear_interpolate.d2,T=t(824),x=t(43907),p=t(71828).isArrayOrTypedArray,s=t(81697).parseColorScale,e=t(78614),o=t(21081).extractOpts;function r(w,u,S){this.scene=w,this.uid=S,this.surface=u,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(w,u,S,_){var E=p(this.data.x)?p(this.data.x[0])?this.data.x[u][w]:this.data.x[w]:w;return void 0===S?E:_.d2l(E,0,S)},n.getYat=function(w,u,S,_){var E=p(this.data.y)?p(this.data.y[0])?this.data.y[u][w]:this.data.y[u]:u;return void 0===S?E:_.d2l(E,0,S)},n.getZat=function(w,u,S,_){var E=this.data.z[u][w];return null===E&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[u][w]),void 0===S?E:_.d2l(E,0,S)},n.handlePick=function(w){if(w.object===this.surface){var S=(w.data.index[1]-1)/this.dataScaleY-1,_=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);w.index=[_,E],w.traceCoordinate=[this.getXat(_,E),this.getYat(_,E),this.getZat(_,E)],w.dataCoordinate=[this.getXat(_,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(_,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(_,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)null!=w.dataCoordinate[L]&&(w.dataCoordinate[L]*=this.scene.dataScale[L]);var C=this.data.hovertext||this.data.text;return w.textLabel=Array.isArray(C)&&C[E]&&void 0!==C[E][_]?C[E][_]:C||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function i(w,u){if(w<u)return 0;for(var S=0;0===Math.floor(w%u);)w/=u,S++;return S}function c(w){for(var u=[],S=0;S<a.length;S++)u.push(i(w,a[S]));return u}function h(w){for(var u=c(w),S=w,_=0;_<a.length;_++)if(u[_]>0){S=a[_];break}return S}function f(w,u){if(!(w<1||u<1)){for(var S=c(w),_=c(u),E=1,L=0;L<a.length;L++)E*=Math.pow(a[L],Math.max(S[L],_[L]));return E}}n.calcXnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getXat(u-1,0),E=this.getXat(u,0);S[u-1]=E!==_&&null!=_&&null!=E?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]=0===S[u-1]?1:Math.round(L/S[u-1]);return S},n.calcYnums=function(w){var u,S=[];for(u=1;u<w;u++){var _=this.getYat(0,u-1),E=this.getYat(0,u);S[u-1]=E!==_&&null!=_&&null!=E?Math.abs(E-_):0}var L=0;for(u=1;u<w;u++)L+=S[u-1];for(u=1;u<w;u++)S[u-1]=0===S[u-1]?1:Math.round(L/S[u-1]);return S};var b=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],v=b[9],g=b[13];function y(w,u,S){var _=S[8]+S[2]*u[0]+S[5]*u[1];return w[0]=(S[6]+S[0]*u[0]+S[3]*u[1])/_,w[1]=(S[7]+S[1]*u[0]+S[4]*u[1])/_,w}function d(w,u,S){return function(_,E,L,C){for(var P=[0,0],z=_.shape[0],j=_.shape[1],R=0;R<z;R++)for(var V=0;V<j;V++)L(P,[R,V],C),_.set(R,V,l(E,P[0],P[1]))}(w,u,y,S),w}function m(w,u){for(var S=!1,_=0;_<w.length;_++)if(u===w[_]){S=!0;break}!1===S&&w.push(u)}n.estimateScale=function(w,u){for(var S=1+function(E){if(0!==E.length){for(var L=1,C=0;C<E.length;C++)L=f(L,E[C]);return L}}(0===u?this.calcXnums(w):this.calcYnums(w));S<v;)S*=2;for(;S>g;)S--,S/=h(S),++S<v&&(S=g);var _=Math.round(S/w);return _>1?_:1},n.refineCoords=function(w){for(var u=this.dataScaleX,S=this.dataScaleY,_=w[0].shape[0],E=w[0].shape[1],L=0|Math.floor(w[0].shape[0]*u+1),C=0|Math.floor(w[0].shape[1]*S+1),P=1+_+1,z=1+E+1,j=k(new Float32Array(P*z),[P,z]),R=[1/u,0,0,0,1/S,0,0,0,1],V=0;V<w.length;++V){this.surface.padField(j,w[V]);var D=k(new Float32Array(L*C),[L,C]);d(D,j,R),w[V]=D}},n.setContourLevels=function(){var w,u,_=[[],[],[]],E=[!1,!1,!1],L=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(L=!0,this.contourSize[w]>0&&null!==this.contourStart[w]&&null!==this.contourEnd[w]&&this.contourEnd[w]>this.contourStart[w]))for(E[w]=!0,u=this.contourStart[w];u<this.contourEnd[w];u+=this.contourSize[w])m(_[w],u*this.scene.dataScale[w]);if(L){var C=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(C[w]=E[w]?_[w]:this.scene.contourLevels[w]);this.surface.update({levels:C})}},n.update=function(w){var u,S,_,E,L=this.scene,C=L.fullSceneLayout,P=this.surface,z=s(w),j=L.dataScale,R=w.z[0].length,V=w._ylength,D=L.contourLevels;this.data=w;var B=[];for(u=0;u<3;u++)for(B[u]=[],S=0;S<R;S++)B[u][S]=[];for(S=0;S<R;S++)for(_=0;_<V;_++)B[0][S][_]=this.getXat(S,_,w.xcalendar,C.xaxis),B[1][S][_]=this.getYat(S,_,w.ycalendar,C.yaxis),B[2][S][_]=this.getZat(S,_,w.zcalendar,C.zaxis);if(w.connectgaps)for(w._emptypoints=x(B[2]),T(B[2],w._emptypoints),w._interpolatedZ=[],S=0;S<R;S++)for(w._interpolatedZ[S]=[],_=0;_<V;_++)w._interpolatedZ[S][_]=B[2][S][_];for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<V;_++)null==(E=B[u][S][_])?B[u][S][_]=NaN:E=B[u][S][_]*=j[u];for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<V;_++)null!=(E=B[u][S][_])&&(this.minValues[u]>E&&(this.minValues[u]=E),this.maxValues[u]<E&&(this.maxValues[u]=E));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<V;_++)null!=(E=B[u][S][_])&&(B[u][S][_]-=this.objectOffset[u]);var N=[k(new Float32Array(R*V),[R,V]),k(new Float32Array(R*V),[R,V]),k(new Float32Array(R*V),[R,V])];for(u=0;u<3;u++)for(S=0;S<R;S++)for(_=0;_<V;_++)N[u].set(S,_,B[u][S][_]);B=[];var U={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},J=o(w);if(U.intensityBounds=[J.min,J.max],w.surfacecolor){var Y=k(new Float32Array(R*V),[R,V]);for(S=0;S<R;S++)for(_=0;_<V;_++)Y.set(S,_,w.surfacecolor[_][S]);N.push(Y)}else U.intensityBounds[0]*=j[2],U.intensityBounds[1]*=j[2];(g<N[0].shape[0]||g<N[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(N[0].shape[0],0),this.dataScaleY=this.estimateScale(N[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(N)),w.surfacecolor&&(U.intensity=N.pop());var Q,ne,re,q=[!0,!0,!0],H=["x","y","z"];for(u=0;u<3;++u){var X=w.contours[H[u]];q[u]=X.highlight,U.showContour[u]=X.show||X.highlight,U.showContour[u]&&(U.contourProject[u]=[X.project.x,X.project.y,X.project.z],X.show?(this.showContour[u]=!0,U.levels[u]=D[u],P.highlightColor[u]=U.contourColor[u]=e(X.color),P.highlightTint[u]=U.contourTint[u]=X.usecolormap?0:1,U.contourWidth[u]=X.width,this.contourStart[u]=X.start,this.contourEnd[u]=X.end,this.contourSize[u]=X.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),X.highlight&&(U.dynamicColor[u]=e(X.highlightcolor),U.dynamicWidth[u]=X.highlightwidth))}(ne=(Q=z)[0].rgb)[0]===(re=Q[Q.length-1].rgb)[0]&&ne[1]===re[1]&&ne[2]===re[2]&&ne[3]===re[3]&&(U.vertexColor=!0),U.objectOffset=this.objectOffset,U.coords=N,P.update(U),P.visible=w.visible,P.enableDynamic=q,P.enableHighlight=q,P.snapToData=!0,"lighting"in w&&(P.ambientLight=w.lighting.ambient,P.diffuseLight=w.lighting.diffuse,P.specularLight=w.lighting.specular,P.roughness=w.lighting.roughness,P.fresnel=w.lighting.fresnel),"lightposition"in w&&(P.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function(w,u){var _=M({gl:w.glplot.gl}),E=new r(w,_,u.uid);return _._trace=E,E.update(u),w.glplot.add(_),E}},91831:function($,I,t){"use strict";var M=t(73972),k=t(71828),l=t(1586),T=t(54532);function x(s,e,o,r){var n=r("opacityscale");"max"===n?e.opacityscale=[[0,.1],[1,1]]:"min"===n?e.opacityscale=[[0,1],[1,.1]]:"extremes"===n?e.opacityscale=function(a,i){for(var c=[],h=0;h<32;h++){var f=h/31,b=.1+.9*(1-Math.pow(Math.sin(1*f*Math.PI),2));c.push([f,Math.max(0,Math.min(1,b))])}return c}():function(a){var i=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var c=0;c<a.length;c++){var h=a[c];if(2!==h.length||+h[0]<i)return!1;i=+h[0]}return!0}(n)||(e.opacityscale=void 0)}function p(s,e,o){e in s&&!(o in s)&&(s[o]=s[e])}$.exports={supplyDefaults:function(s,e,o,r){var n,a;function i(m,w){return k.coerce(s,e,T,m,w)}var c=i("x"),h=i("y"),f=i("z");if(!f||!f.length||c&&c.length<1||h&&h.length<1)e.visible=!1;else{e._xlength=Array.isArray(c)&&k.isArrayOrTypedArray(c[0])?f.length:f[0].length,e._ylength=f.length,M.getComponentMethod("calendars","handleTraceDefaults")(s,e,["x","y","z"],r),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){i(m)});var b=i("surfacecolor"),v=["x","y","z"];for(n=0;n<3;++n){var g="contours."+v[n],y=i(g+".show"),d=i(g+".highlight");if(y||d)for(a=0;a<3;++a)i(g+".project."+v[a]);y&&(i(g+".color"),i(g+".width"),i(g+".usecolormap")),d&&(i(g+".highlightcolor"),i(g+".highlightwidth")),i(g+".start"),i(g+".end"),i(g+".size")}b||(p(s,"zmin","cmin"),p(s,"zmax","cmax"),p(s,"zauto","cauto")),l(s,e,r,i,{prefix:"",cLetter:"c"}),x(0,e,0,i),e._length=null}},opacityscaleDefaults:x}},93601:function($,I,t){"use strict";$.exports={attributes:t(54532),supplyDefaults:t(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t(18396),plot:t(43768),moduleType:"trace",name:"surface",basePlotModule:t(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function($,I,t){"use strict";var M=t(50215),k=t(1426).extendFlat,l=t(30962).overrideAll,T=t(41940),x=t(27670).Y,p=t(12663).descriptionOnlyNumbers;($.exports=l({domain:x({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:p("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function($,I,t){"use strict";var M=t(27659).a0,k=t(36736),l="table";I.name=l,I.plot=function(T){var x=M(T.calcdata,l)[0];x.length&&k(T,x)},I.clean=function(T,x,p,s){var e=s._has&&s._has(l),o=x._has&&x._has(l);e&&!o&&s._paperdiv.selectAll(".table").remove()}},76333:function($,I,t){"use strict";var M=t(28984).wrap;$.exports=function(){return M({})}},49850:function($){"use strict";$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function($,I,t){"use strict";var M=t(49850),k=t(1426).extendFlat,l=t(92770);function T(n){if(Array.isArray(n)){for(var a=0,i=0;i<n.length;i++)a=Math.max(a,T(n[i]));return a}return n}function x(n,a){return n+a}function p(n){var a,i=n.slice(),c=1/0,h=0;for(a=0;a<i.length;a++)Array.isArray(i[a])||(i[a]=[i[a]]),c=Math.min(c,i[a].length),h=Math.max(h,i[a].length);if(c!==h)for(a=0;a<i.length;a++){var f=h-i[a].length;f&&(i[a]=i[a].concat(s(f)))}return i}function s(n){for(var a=new Array(n),i=0;i<n;i++)a[i]="";return a}function e(n){return n.calcdata.columns.reduce(function(a,i){return i.xIndex<n.xIndex?a+i.columnWidth:a},0)}function o(n,a){return Object.keys(n).map(function(i){return k({},n[i],{auxiliaryBlocks:a})})}function r(n,a){for(var i,c={},h=0,f=0,b={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,g=0,y=0;y<n.length;y++)b.rows.push({rowIndex:y,rowHeight:i=n[y]}),((f+=i)>=a||y===n.length-1)&&(c[h]=b,b.key=g++,b.firstRowIndex=v,b.lastRowIndex=y,b={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=f,v=y+1,f=0);return c}$.exports=function(n,a){var i=p(a.cells.values),c=function(j){return j.slice(a.header.values.length,j.length)},h=p(a.header.values);h.length&&!h[0].length&&(h[0]=[""],h=p(h));var f=h.concat(c(i).map(function(){return s((h[0]||[""]).length)})),b=a.domain,v=Math.floor(n._fullLayout._size.w*(b.x[1]-b.x[0])),g=Math.floor(n._fullLayout._size.h*(b.y[1]-b.y[0])),y=a.header.values.length?f[0].map(function(){return a.header.height}):[M.emptyHeaderHeight],d=i.length?i[0].map(function(){return a.cells.height}):[],m=y.reduce(x,0),w=r(d,g-m+M.uplift),u=o(r(y,m),[]),S=o(w,u),_={},E=a._fullInput.columnorder.concat(c(i.map(function(j,R){return R}))),L=f.map(function(j,R){var V=Array.isArray(a.columnwidth)?a.columnwidth[Math.min(R,a.columnwidth.length-1)]:a.columnwidth;return l(V)?Number(V):1}),C=L.reduce(x,0);L=L.map(function(j){return j/C*v});var P=Math.max(T(a.header.line.width),T(a.cells.line.width)),z={key:a.uid+n._context.staticPlot,translateX:b.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-b.y[1]),size:n._fullLayout._size,width:v,maxLineWidth:P,height:g,columnOrder:E,groupHeight:g,rowBlocks:S,headerRowBlocks:u,scrollY:0,cells:k({},a.cells,{values:i}),headerCells:k({},a.header,{values:f}),gdColumns:f.map(function(j){return j[0]}),gdColumnsOriginalOrder:f.map(function(j){return j[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:f.map(function(j,R){return _[j]=(_[j]||0)+1,{key:j+"__"+_[j],label:j,specIndex:R,xIndex:E[R],xScale:e,x:void 0,calcdata:void 0,columnWidth:L[R]}})};return z.columns.forEach(function(j){j.calcdata=z,j.x=e(j)}),z}},56269:function($,I,t){"use strict";var M=t(1426).extendFlat;I.splitToPanels=function(k){var l=[0,0],T=M({},k,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:M({},k.calcdata,{cells:k.calcdata.headerCells})});return[M({},k,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),M({},k,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},I.splitToCells=function(k){var T,x,p,l=[p=(x=(T=k).rowBlocks[T.page])?x.rows[0].rowIndex:0,x?p+x.rows.length:0];return(k.values||[]).slice(l[0],l[1]).map(function(T,x){return{keyWithinBlock:x+("string"==typeof T&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+x,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},39754:function($,I,t){"use strict";var M=t(71828),k=t(44464),l=t(27670).c;$.exports=function(T,x,p,s){function e(o,r){return M.coerce(T,x,k,o,r)}l(x,s,e),e("columnwidth"),e("header.values"),e("header.format"),e("header.align"),e("header.prefix"),e("header.suffix"),e("header.height"),e("header.line.width"),e("header.line.color"),e("header.fill.color"),M.coerceFont(e,"header.font",M.extendFlat({},s.font)),function(o,r){for(var a=o.header.values.length,i=(o.columnorder||[]).slice(0,a),c=i.slice().sort(function(b,v){return b-v}),h=i.map(function(b){return c.indexOf(b)}),f=h.length;f<a;f++)h.push(f);r("columnorder",h)}(x,e),e("cells.values"),e("cells.format"),e("cells.align"),e("cells.prefix"),e("cells.suffix"),e("cells.height"),e("cells.line.width"),e("cells.line.color"),e("cells.fill.color"),M.coerceFont(e,"cells.font",M.extendFlat({},s.font)),x._length=null}},96595:function($,I,t){"use strict";$.exports={attributes:t(44464),supplyDefaults:t(39754),calc:t(76333),plot:t(36736),moduleType:"trace",name:"table",basePlotModule:t(99469),categories:["noOpacity"],meta:{}}},36736:function($,I,t){"use strict";var M=t(49850),k=t(39898),l=t(71828).numberFormat,T=t(28984),x=t(91424),p=t(63893),s=t(71828).raiseToTop,e=t(71828).strTranslate,o=t(71828).cancelTransition,r=t(51018),n=t(56269),a=t(7901);function i(N){return Math.ceil(N.calcdata.maxLineWidth/2)}function c(N,U){return"clip"+N._fullLayout._uid+"_scrollAreaBottomClip_"+U.key}function h(N,U){return"clip"+N._fullLayout._uid+"_columnBoundaryClippath_"+U.calcdata.key+"_"+U.specIndex}function f(N){return[].concat.apply([],N.map(function(U){return U})).map(function(U){return U.__data__})}function b(N,U,J){var Y=N.selectAll("."+M.cn.scrollbarKit).data(T.repeat,T.keyFun);Y.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),Y.each(function(ne){var se,re=ne.scrollbarState;re.totalHeight=R(se=ne.rowBlocks,se.length-1)+(se.length?V(se[se.length-1],1/0):1),re.scrollableAreaHeight=ne.groupHeight-S(ne),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=0===re.barWiggleRoom?0:ne.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ne){return e(ne.width+M.scrollbarWidth/2+M.scrollbarOffset,S(ne))});var q=Y.selectAll("."+M.cn.scrollbar).data(T.repeat,T.keyFun);q.enter().append("g").classed(M.cn.scrollbar,!0);var H=q.selectAll("."+M.cn.scrollbarSlider).data(T.repeat,T.keyFun);H.enter().append("g").classed(M.cn.scrollbarSlider,!0),H.attr("transform",function(ne){return e(0,ne.scrollbarState.topY||0)});var X=H.selectAll("."+M.cn.scrollbarGlyph).data(T.repeat,T.keyFun);X.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),X.attr("y2",function(ne){return ne.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(ne){return ne.columnDragInProgress||!ne.scrollbarState.barWiggleRoom||J?0:.4}),X.transition().delay(0).duration(0),X.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var Q=q.selectAll("."+M.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);Q.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ne){var re=k.event.y,ae=this.getBoundingClientRect(),se=ne.scrollbarState,pe=re-ae.top,ke=k.scale.linear().domain([0,se.scrollableAreaHeight]).range([0,se.totalHeight]).clamp(!0);se.topY<=pe&&pe<=se.bottomY||E(U,N,null,ke(pe-se.barLength/2))(ne)}).call(k.behavior.drag().origin(function(ne){return k.event.stopPropagation(),ne.scrollbarState.scrollbarScrollInProgress=!0,ne}).on("drag",E(U,N)).on("dragend",function(){})),Q.attr("y2",function(ne){return ne.scrollbarState.scrollableAreaHeight}),U._context.staticPlot&&(X.remove(),Q.remove())}function v(N,U,J,Y){var ae,H=function(re){var ae=re.selectAll("."+M.cn.columnCell).data(n.splitToCells,function(se){return se.keyWithinBlock});return ae.enter().append("g").classed(M.cn.columnCell,!0),ae.exit().remove(),ae}(((ae=J.selectAll("."+M.cn.columnCells).data(T.repeat,T.keyFun)).enter().append("g").classed(M.cn.columnCells,!0),ae.exit().remove(),ae));H.each(function(ae,se){var pe=ae.calcdata.cells.font,ke=ae.column.specIndex,me={size:d(pe.size,ke,se),color:d(pe.color,ke,se),family:d(pe.family,ke,se)};ae.rowNumber=ae.key,ae.align=d(ae.calcdata.cells.align,ke,se),ae.cellBorderWidth=d(ae.calcdata.cells.line.width,ke,se),ae.font=me});var X=function(re){var ae=re.selectAll("."+M.cn.cellRect).data(T.repeat,function(se){return se.keyWithinBlock});return ae.enter().append("rect").classed(M.cn.cellRect,!0),ae}(H);!function(re){re.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var se=k.select(this);a.stroke(se,d(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),a.fill(se,d(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})}(X);var Q=function(re){var ae=re.selectAll("."+M.cn.cellTextHolder).data(T.repeat,function(se){return se.keyWithinBlock});return ae.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}(H),ne=function(re){var ae=re.selectAll("."+M.cn.cellText).data(T.repeat,function(se){return se.keyWithinBlock});return ae.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ae}(Q);(function(re){re.each(function(ae){x.font(k.select(this),ae.font)})})(ne),g(ne,U,Y,N),j(H)}function g(N,U,J,Y){N.text(function(q){var H=q.column.specIndex,X=q.rowNumber,Q=q.value,ne="string"==typeof Q,re=ne&&Q.match(/<br>/i),ae=!ne||re;q.mayHaveMarkup=ne&&Q.match(/[<&>]/);var se,pe="string"==typeof(se=Q)&&se.match(M.latexCheck);q.latex=pe;var ke,me,le=pe?"":d(q.calcdata.cells.prefix,H,X)||"",ue=pe?"":d(q.calcdata.cells.suffix,H,X)||"",Ee=pe?null:d(q.calcdata.cells.format,H,X)||null,de=le+(Ee?l(Ee)(q.value):q.value)+ue;if(q.wrappingNeeded=!q.wrapped&&!ae&&!pe&&(ke=y(de)),q.cellHeightMayIncrease=re||pe||q.mayHaveMarkup||(void 0===ke?y(de):ke),q.needsConvertToTspans=q.mayHaveMarkup||q.wrappingNeeded||q.latex,q.wrappingNeeded){var xe=(" "===M.wrapSplitCharacter?de.replace(/<a href=/gi,"<a_href="):de).split(M.wrapSplitCharacter),Te=" "===M.wrapSplitCharacter?xe.map(function(we){return we.replace(/<a_href=/gi,"<a href=")}):xe;q.fragments=Te.map(function(we){return{text:we,width:null}}),q.fragments.push({fragment:M.wrapSpacer,width:null}),me=Te.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete q.fragments,me=de;return me}).attr("dy",function(q){return q.needsConvertToTspans?0:"0.75em"}).each(function(q){var H=this,X=k.select(H);q.needsConvertToTspans?p.convertToTspans(X,Y,(q.wrappingNeeded?C:P)(J,H,U,Y,q)):k.select(H.parentNode).attr("transform",function(ne){return e(z(ne),M.cellPad)}).attr("text-anchor",function(ne){return{left:"start",center:"middle",right:"end"}[ne.align]})})}function y(N){return-1!==N.indexOf(M.wrapSplitCharacter)}function d(N,U,J){if(Array.isArray(N)){var Y=N[Math.min(U,N.length-1)];return Array.isArray(Y)?Y[Math.min(J,Y.length-1)]:Y}return N}function m(N,U,J){N.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",e(U.x,J))}function w(N){return"cells"===N.type}function u(N){return"header"===N.type}function S(N){return(N.rowBlocks.length?N.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(U,J){return U+V(J,1/0)},0)}function _(N,U,J){var Y=f(U)[0];if(void 0!==Y){var q=Y.rowBlocks,H=Y.calcdata,X=R(q,q.length),Q=Y.calcdata.groupHeight-S(Y),ne=H.scrollY=Math.max(0,Math.min(X-Q,H.scrollY)),re=function(ae,se,pe){for(var ke=[],me=0,le=0;le<ae.length;le++){for(var ue=ae[le],Ee=ue.rows,de=0,xe=0;xe<Ee.length;xe++)de+=Ee[xe].rowHeight;ue.allRowsHeight=de,se<me+de&&se+pe>me&&ke.push(le),me+=de}return ke}(q,ne,Q);1===re.length&&(re[0]===q.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),U.each(function(ae,se){ae.page=re[se],ae.scrollY=ne}),U.attr("transform",function(ae){var se=R(ae.rowBlocks,ae.page)-ae.scrollY;return e(0,se)}),N&&(L(N,J,U,re,Y.prevPages,Y,0),L(N,J,U,re,Y.prevPages,Y,1),b(J,N))}}function E(N,U,J,Y){return function(q){var H=q.calcdata?q.calcdata:q,X=U.filter(function(ae){return H.key===ae.key}),ne=H.scrollY;H.scrollY=void 0===Y?H.scrollY+(J||H.scrollbarState.dragMultiplier)*k.event.dy:Y;var re=X.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(w);return _(N,re,X),H.scrollY===ne}}function L(N,U,J,Y,q,H,X){Y[X]!==q[X]&&(clearTimeout(H.currentRepaint[X]),H.currentRepaint[X]=setTimeout(function(){var Q=J.filter(function(ne,re){return re===X&&Y[re]!==q[re]});v(N,U,Q,J),q[X]=Y[X]}))}function C(N,U,J,Y){return function(){var q=k.select(U.parentNode);q.each(function(H){var X=H.fragments;q.selectAll("tspan.line").each(function(me,le){X[le].width=this.getComputedTextLength()});var Q,ne,re=X[X.length-1].width,ae=X.slice(0,-1),se=[],pe=0,ke=H.column.columnWidth-2*M.cellPad;for(H.value="";ae.length;)pe+(ne=(Q=ae.shift()).width+re)>ke&&(H.value+=se.join(M.wrapSpacer)+M.lineBreaker,se=[],pe=0),se.push(Q.text),pe+=ne;pe&&(H.value+=se.join(M.wrapSpacer)),H.wrapped=!0}),q.selectAll("tspan.line").remove(),g(q.select("."+M.cn.cellText),J,N,Y),k.select(U.parentNode.parentNode).call(j)}}function P(N,U,J,Y,q){return function(){if(!q.settledY){var H=k.select(U.parentNode),X=B(q),Q=q.key-X.firstRowIndex,ne=X.rows[Q].rowHeight,re=q.cellHeightMayIncrease?U.parentNode.getBoundingClientRect().height+2*M.cellPad:ne,ae=Math.max(re,ne);ae-X.rows[Q].rowHeight&&(X.rows[Q].rowHeight=ae,N.selectAll("."+M.cn.columnCell).call(j),_(null,N.filter(w),0),b(J,Y,!0)),H.attr("transform",function(){var pe=this.parentNode.getBoundingClientRect(),ke=k.select(this.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),me=this.transform.baseVal.consolidate(),le=ke.top-pe.top+(me?me.matrix.f:M.cellPad);return e(z(q,k.select(this.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),le)}),q.settledY=!0}}}function z(N,U){switch(N.align){case"left":default:return M.cellPad;case"right":return N.column.columnWidth-(U||0)-M.cellPad;case"center":return(N.column.columnWidth-(U||0))/2}}function j(N){N.attr("transform",function(U){var J=U.rowBlocks[0].auxiliaryBlocks.reduce(function(q,H){return q+V(H,1/0)},0),Y=V(B(U),U.key);return e(0,Y+J)}).selectAll("."+M.cn.cellRect).attr("height",function(U){return(J=B(U),Y=U.key,J.rows[Y-J.firstRowIndex]).rowHeight;var J,Y})}function R(N,U){for(var J=0,Y=U-1;Y>=0;Y--)J+=D(N[Y]);return J}function V(N,U){for(var J=0,Y=0;Y<N.rows.length&&N.rows[Y].rowIndex<U;Y++)J+=N.rows[Y].rowHeight;return J}function D(N){var U=N.allRowsHeight;if(void 0!==U)return U;for(var J=0,Y=0;Y<N.rows.length;Y++)J+=N.rows[Y].rowHeight;return N.allRowsHeight=J,J}function B(N){return N.rowBlocks[N.page]}$.exports=function(N,U){var J=!N._context.staticPlot,Y=N._fullLayout._paper.selectAll("."+M.cn.table).data(U.map(function(ue){var Ee=T.unwrap(ue).trace;return r(N,Ee)}),T.keyFun);Y.exit().remove(),Y.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),Y.attr("width",function(ue){return ue.width+ue.size.l+ue.size.r}).attr("height",function(ue){return ue.height+ue.size.t+ue.size.b}).attr("transform",function(ue){return e(ue.translateX,ue.translateY)});var q=Y.selectAll("."+M.cn.tableControlView).data(T.repeat,T.keyFun),H=q.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(J){var X="onwheel"in document?"wheel":"mousewheel";H.on("mousemove",function(ue){q.filter(function(Ee){return ue===Ee}).call(b,N)}).on(X,function(ue){ue.scrollbarState.wheeling||(ue.scrollbarState.wheeling=!0,E(N,q,null,ue.scrollY+k.event.deltaY)(ue)||(k.event.stopPropagation(),k.event.preventDefault()),ue.scrollbarState.wheeling=!1)}).call(b,N,!0)}q.attr("transform",function(ue){return e(ue.size.l,ue.size.t)});var Q=q.selectAll("."+M.cn.scrollBackground).data(T.repeat,T.keyFun);Q.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),Q.attr("width",function(ue){return ue.width}).attr("height",function(ue){return ue.height}),q.each(function(ue){x.setClipUrl(k.select(this),c(N,ue),N)});var ne=q.selectAll("."+M.cn.yColumn).data(function(ue){return ue.columns},T.keyFun);ne.enter().append("g").classed(M.cn.yColumn,!0),ne.exit().remove(),ne.attr("transform",function(ue){return e(ue.x,0)}),J&&ne.call(k.behavior.drag().origin(function(ue){return m(k.select(this),ue,-M.uplift),s(this),ue.calcdata.columnDragInProgress=!0,b(q.filter(function(Ee){return ue.calcdata.key===Ee.key}),N),ue}).on("drag",function(ue){var Ee=k.select(this),de=function(xe){return(ue===xe?k.event.x:xe.x)+xe.columnWidth/2};ue.x=Math.max(-M.overdrag,Math.min(ue.calcdata.width+M.overdrag-ue.columnWidth,k.event.x)),f(ne).filter(function(xe){return xe.calcdata.key===ue.calcdata.key}).sort(function(xe,Te){return de(xe)-de(Te)}).forEach(function(xe,Te){xe.xIndex=Te,xe.x=ue===xe?xe.x:xe.xScale(xe)}),ne.filter(function(xe){return ue!==xe}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(xe){return e(xe.x,0)}),Ee.call(o).attr("transform",e(ue.x,-M.uplift))}).on("dragend",function(ue){var xe,Te,we,K,Ee=k.select(this),de=ue.calcdata;ue.x=ue.xScale(ue),ue.calcdata.columnDragInProgress=!1,m(Ee,ue,0),xe=N,Te=de,we=de.columns.map(function(xe){return xe.xIndex}),K=Te.gdColumnsOriginalOrder,Te.gdColumns.sort(function(oe,he){return we[K.indexOf(oe)]-we[K.indexOf(he)]}),Te.columnorder=we,xe.emit("plotly_restyle")})),ne.each(function(ue){x.setClipUrl(k.select(this),h(N,ue),N)});var re=ne.selectAll("."+M.cn.columnBlock).data(n.splitToPanels,T.keyFun);re.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(ue){return ue.key}),re.style("cursor",function(ue){return ue.dragHandle?"ew-resize":ue.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ae=re.filter(u),se=re.filter(w);J&&se.call(k.behavior.drag().origin(function(ue){return k.event.stopPropagation(),ue}).on("drag",E(N,q,-1)).on("dragend",function(){})),v(N,q,ae,re),v(N,q,se,re);var pe=q.selectAll("."+M.cn.scrollAreaClip).data(T.repeat,T.keyFun);pe.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(ue){return c(N,ue)});var ke=pe.selectAll("."+M.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);ke.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),ke.attr("width",function(ue){return ue.width+2*M.overdrag}).attr("height",function(ue){return ue.height+M.uplift}),ne.selectAll("."+M.cn.columnBoundary).data(T.repeat,T.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var me=ne.selectAll("."+M.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);me.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),me.attr("id",function(ue){return h(N,ue)});var le=me.selectAll("."+M.cn.columnBoundaryRect).data(T.repeat,T.keyFun);le.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),le.attr("width",function(ue){return ue.columnWidth+2*i(ue)}).attr("height",function(ue){return ue.calcdata.height+2*i(ue)+M.uplift}).attr("x",function(ue){return-i(ue)}).attr("y",function(ue){return-i(ue)}),_(null,se,q)}},45802:function($,I,t){"use strict";var M=t(5386).f,k=t(5386).s,l=t(50693),T=t(27670).Y,x=t(34e3),p=t(57564),s=t(43473),e=t(1426).extendFlat;$.exports={labels:p.labels,parents:p.parents,values:p.values,branchvalues:p.branchvalues,count:p.count,level:p.level,maxdepth:p.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:e({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:p.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:p.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:e({},x.textfont,{}),editType:"calc"},text:x.text,textinfo:p.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:x.hovertext,hoverinfo:p.hoverinfo,hovertemplate:M({},{keys:s.eventDataKeys}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:e({},x.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:x.sort,root:p.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},78018:function($,I,t){"use strict";var M=t(74875);I.name="treemap",I.plot=function(k,l,T,x){M.plotBasePlot(I.name,k,l,T,x)},I.clean=function(k,l,T,x){M.cleanBasePlot(I.name,k,l,T,x)}},65039:function($,I,t){"use strict";var M=t(52147);I.y=function(k,l){return M.calc(k,l)},I.T=function(k){return M._runCrossTraceCalc("treemap",k)}},43473:function($){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function($,I,t){"use strict";var M=t(71828),k=t(45802),l=t(7901),T=t(27670).c,x=t(90769).handleText,p=t(97313).TEXTPAD,s=t(21081),e=s.hasColorscale,o=s.handleDefaults;$.exports=function(r,n,a,i){function c(w,u){return M.coerce(r,n,k,w,u)}var h=c("labels"),f=c("parents");if(h&&h.length&&f&&f.length){var b=c("values");c(b&&b.length?"branchvalues":"count"),c("level"),c("maxdepth"),"squarify"===c("tiling.packing")&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var v=c("text");c("texttemplate"),n.texttemplate||c("textinfo",Array.isArray(v)?"text+label":"label"),c("hovertext"),c("hovertemplate");var g=c("pathbar.visible");x(r,n,i,c,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var y=-1!==n.textposition.indexOf("bottom");c("marker.line.width")&&c("marker.line.color",i.paper_bgcolor);var d=c("marker.colors");(n._hasColorscale=e(r,"marker","colors")||(r.marker||{}).coloraxis)?o(r,n,i,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(d||[]).length);var m=2*n.textfont.size;c("marker.pad.t",y?m/4:m),c("marker.pad.l",m/4),c("marker.pad.r",m/4),c("marker.pad.b",y?m:m/4),c("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:l.contrast(i.paper_bgcolor)}}},g&&(c("pathbar.thickness",n.pathbar.textfont.size+2*p),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),T(n,i,c),n._length=null}else n.visible=!1}},80694:function($,I,t){"use strict";var M=t(39898),k=t(2791),l=t(72597).clearMinTextSize,T=t(16688).resizeText,x=t(46650);$.exports=function(p,s,e,o,r){var n,a,i=r.type,c=r.drawDescendants,h=p._fullLayout,f=h["_"+i+"layer"],b=!e;l(i,h),(n=f.selectAll("g.trace."+i).data(s,function(v){return v[0].trace.uid})).enter().append("g").classed("trace",!0).classed(i,!0),n.order(),!h.uniformtext.mode&&k.hasTransition(e)?(o&&(a=o()),M.transition().duration(e.duration).ease(e.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){f.selectAll("g.trace").each(function(v){x(p,v,this,e,c)})})):(n.each(function(v){x(p,v,this,e,c)}),h.uniformtext.mode&&T(p,f.selectAll(".trace"),i)),b&&n.exit().remove()}},66209:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(63893),x=t(37210),p=t(96362).styleOne,s=t(43473),e=t(2791),o=t(83523),r=!0;$.exports=function(n,a,i,c,h){var f=h.barDifY,b=h.width,v=h.height,g=h.viewX,y=h.viewY,d=h.pathSlice,m=h.toMoveInsideSlice,w=h.strTransform,u=h.hasTransition,S=h.handleSlicesExit,_=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,L={},C=n._context.staticPlot,P=n._fullLayout,z=a[0],j=z.trace,R=z.hierarchy,V=b/j._entryDepth,D=e.listPath(i.data,"id"),B=x(R.copy(),[b,v],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(B=B.filter(function(U){var J=D.indexOf(U.data.id);return-1!==J&&(U.x0=V*J,U.x1=V*(J+1),U.y0=f,U.y1=f+v,U.onPathbar=!0,!0)})).reverse(),(c=c.data(B,e.getPtId)).enter().append("g").classed("pathbar",!0),S(c,r,L,[b,v],d),c.order();var N=c;u&&(N=N.transition().each("end",function(){var U=M.select(this);e.setSliceCursor(U,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),N.each(function(U){U._x0=g(U.x0),U._x1=g(U.x1),U._y0=y(U.y0),U._y1=y(U.y1),U._hoverX=g(U.x1-Math.min(b,v)/2),U._hoverY=y(U.y1-v/2);var J=M.select(this),Y=k.ensureSingle(J,"path","surface",function(Q){Q.style("pointer-events",C?"none":"all")});u?Y.transition().attrTween("d",function(Q){var ne=_(Q,r,L,[b,v]);return function(re){return d(ne(re))}}):Y.attr("d",d),J.call(o,i,n,a,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),Y.call(p,U,j,{hovered:!1}),U._text=(e.getPtLabel(U)||"").split("<br>").join(" ")||"";var q=k.ensureSingle(J,"g","slicetext"),H=k.ensureSingle(q,"text","",function(Q){Q.attr("data-notex",1)}),X=k.ensureUniformFontSize(n,e.determineTextFont(j,U,P.font,{onPathbar:!0}));H.text(U._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,X).call(T.convertToTspans,n),U.textBB=l.bBox(H.node()),U.transform=m(U,{fontSize:X.size,onPathbar:!0}),U.transform.fontSize=X.size,u?H.transition().attrTween("transform",function(Q){var ne=E(Q,r,L,[b,v]);return function(re){return w(ne(re))}}):H.attr("transform",w(U))})}},52583:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(63893),x=t(37210),p=t(96362).styleOne,s=t(43473),e=t(2791),o=t(83523),r=t(24714).formatSliceLabel,n=!1;$.exports=function(a,i,c,h,f){var b=f.width,v=f.height,g=f.viewX,y=f.viewY,d=f.pathSlice,m=f.toMoveInsideSlice,w=f.strTransform,u=f.hasTransition,S=f.handleSlicesExit,_=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,C=a._context.staticPlot,P=a._fullLayout,z=i[0].trace,j=-1!==z.textposition.indexOf("left"),R=-1!==z.textposition.indexOf("right"),V=-1!==z.textposition.indexOf("bottom"),D=!V&&!z.marker.pad.t||V&&!z.marker.pad.b,B=x(c,[b,v],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),N=1/0,U=-1/0;B.forEach(function(X){var Q=X.depth;Q>=z._maxDepth?(X.x0=X.x1=(X.x0+X.x1)/2,X.y0=X.y1=(X.y0+X.y1)/2):(N=Math.min(N,Q),U=Math.max(U,Q))}),h=h.data(B,e.getPtId),z._maxVisibleLayers=isFinite(U)?U-N+1:0,h.enter().append("g").classed("slice",!0),S(h,n,{},[b,v],d),h.order();var J=null;if(u&&L){var Y=e.getPtId(L);h.each(function(X){null===J&&e.getPtId(X)===Y&&(J={x0:X.x0,x1:X.x1,y0:X.y0,y1:X.y1})})}var q=function(){return J||{x0:0,x1:b,y0:0,y1:v}},H=h;return u&&(H=H.transition().each("end",function(){var X=M.select(this);e.setSliceCursor(X,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(X){var Q=e.isHeader(X,z);X._x0=g(X.x0),X._x1=g(X.x1),X._y0=y(X.y0),X._y1=y(X.y1),X._hoverX=g(X.x1-z.marker.pad.r),X._hoverY=y(V?X.y1-z.marker.pad.b/2:X.y0+z.marker.pad.t/2);var ne=M.select(this),re=k.ensureSingle(ne,"path","surface",function(ke){ke.style("pointer-events",C?"none":"all")});u?re.transition().attrTween("d",function(ke){var me=_(ke,n,q(),[b,v]);return function(le){return d(me(le))}}):re.attr("d",d),ne.call(o,c,a,i,{styleOne:p,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,a,{isTransitioning:a._transitioning}),re.call(p,X,z,{hovered:!1}),X._text=X.x0===X.x1||X.y0===X.y1?"":Q?D?"":e.getPtLabel(X)||"":r(X,c,z,i,P)||"";var ae=k.ensureSingle(ne,"g","slicetext"),se=k.ensureSingle(ae,"text","",function(ke){ke.attr("data-notex",1)}),pe=k.ensureUniformFontSize(a,e.determineTextFont(z,X,P.font));se.text(X._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":j||Q?"start":"middle").call(l.font,pe).call(T.convertToTspans,a),X.textBB=l.bBox(se.node()),X.transform=m(X,{fontSize:pe.size,isHeader:Q}),X.transform.fontSize=pe.size,u?se.transition().attrTween("transform",function(ke){var me=E(ke,n,q(),[b,v]);return function(le){return w(me(le))}}):se.attr("transform",w(X))}),J}},14102:function($){"use strict";$.exports=function I(t,M,k){var l;k.swapXY&&(l=t.x0,t.x0=t.y0,t.y0=l,l=t.x1,t.x1=t.y1,t.y1=l),k.flipX&&(l=t.x0,t.x0=M[0]-t.x1,t.x1=M[0]-l),k.flipY&&(l=t.y0,t.y0=M[1]-t.y1,t.y1=M[1]-l);var T=t.children;if(T)for(var x=0;x<T.length;x++)I(T[x],M,k)}},70954:function($,I,t){"use strict";$.exports={moduleType:"trace",name:"treemap",basePlotModule:t(78018),categories:[],animatable:!0,attributes:t(45802),layoutAttributes:t(55479),supplyDefaults:t(91174),supplyLayoutDefaults:t(77182),calc:t(65039).y,crossTraceCalc:t(65039).T,plot:t(5893),style:t(96362).style,colorbar:t(4898),meta:{}}},55479:function($){"use strict";$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function($,I,t){"use strict";var M=t(71828),k=t(55479);$.exports=function(l,T){function x(p,s){return M.coerce(l,T,k,p,s)}x("treemapcolorway",T.colorway),x("extendtreemapcolors")}},37210:function($,I,t){"use strict";var M=t(674),k=t(14102);$.exports=function(l,T,x){var p,s=x.flipX,e=x.flipY,o="dice-slice"===x.packing,r=x.pad[e?"bottom":"top"],n=x.pad[s?"right":"left"],a=x.pad[s?"left":"right"],i=x.pad[e?"top":"bottom"];o&&(p=n,n=r,r=p,p=a,a=i,i=p);var c=M.treemap().tile(function(h,f){switch(h){case"squarify":return M.treemapSquarify.ratio(f);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(x.packing,x.squarifyratio)).paddingInner(x.pad.inner).paddingLeft(n).paddingRight(a).paddingTop(r).paddingBottom(i).size(o?[T[1],T[0]]:T)(l);return(o||s||e)&&k(c,T,{swapXY:o,flipX:s,flipY:e}),c}},5893:function($,I,t){"use strict";var M=t(80694),k=t(52583);$.exports=function(l,T,x,p){return M(l,T,x,p,{type:"treemap",drawDescendants:k})}},46650:function($,I,t){"use strict";var M=t(39898),k=t(81684).sX,l=t(2791),T=t(71828),x=t(97313).TEXTPAD,p=t(17295).toMoveInsideBar,s=t(72597).recordMinTextSize,e=t(43473),o=t(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}$.exports=function(n,a,i,c,h){var f=n._fullLayout,b=a[0],v=b.trace,g="icicle"===v.type,y=b.hierarchy,d=l.findEntryWithLevel(y,v.level),m=M.select(i),w=m.selectAll("g.pathbar"),u=m.selectAll("g.slice");if(!d)return w.remove(),void u.remove();var S=l.isHierarchyRoot(d),_=!f.uniformtext.mode&&l.hasTransition(c),E=l.getMaxDepth(v),L=f._size,C=v.domain,P=L.w*(C.x[1]-C.x[0]),z=L.h*(C.y[1]-C.y[0]),j=P,R=v.pathbar.thickness,V=v.marker.line.width+e.gapWithPathbar,D=v.pathbar.visible?v.pathbar.side.indexOf("bottom")>-1?z+V:-(R+V):0,B={x0:j,x1:j,y0:D,y1:D+R},N=function(fe,ge,be){var Ie=v.tiling.pad,He=function(st){return st-Ie<=ge.x0},Ve=function(st){return st+Ie>=ge.x1},tt=function(st){return st-Ie<=ge.y0},nt=function(st){return st+Ie>=ge.y1};return fe.x0===ge.x0&&fe.x1===ge.x1&&fe.y0===ge.y0&&fe.y1===ge.y1?{x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1}:{x0:He(fe.x0-Ie)?0:Ve(fe.x0-Ie)?be[0]:fe.x0,x1:He(fe.x1+Ie)?0:Ve(fe.x1+Ie)?be[0]:fe.x1,y0:tt(fe.y0-Ie)?0:nt(fe.y0-Ie)?be[1]:fe.y0,y1:tt(fe.y1+Ie)?0:nt(fe.y1+Ie)?be[1]:fe.y1}},U=null,J={},Y={},q=null,H=function(fe,ge){return ge?J[r(fe)]:Y[r(fe)]};b.hasMultipleRoots&&S&&E++,v._maxDepth=E,v._backgroundColor=f.paper_bgcolor,v._entryDepth=d.data.depth,v._atRootLevel=S;var X=-P/2+L.l+L.w*(C.x[1]+C.x[0])/2,Q=-z/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),ne=function(fe){return X+fe},re=function(fe){return Q+fe},ae=re(0),se=ne(0),pe=function(fe){return se+fe},ke=function(fe){return ae+fe};function me(fe,ge){return fe+","+ge}var le=pe(0),ue=function(fe){fe.x=Math.max(le,fe.x)},Ee=v.pathbar.edgeshape,de=v[g?"tiling":"marker"].pad,xe=function(fe){return-1!==v.textposition.indexOf(fe)},Te=xe("top"),we=xe("left"),K=xe("right"),oe=xe("bottom"),he=function(fe,ge){var be=fe.x0,Ie=fe.x1,He=fe.y0,Ve=fe.y1,tt=fe.textBB,nt=Te||ge.isHeader&&!oe?"start":oe?"end":"middle",st=xe("right"),dt=xe("left")||ge.onPathbar?-1:st?1:0;if(ge.isHeader){if((be+=(g?de:de.l)-x)>=(Ie-=(g?de:de.r)-x)){var wt=(be+Ie)/2;be=wt,Ie=wt}var _t;oe?He<(_t=Ve-(g?de:de.b))&&_t<Ve&&(He=_t):He<(_t=He+(g?de:de.t))&&_t<Ve&&(Ve=_t)}var pt=p(be,Ie,He,Ve,tt,{isHorizontal:!1,constrained:!0,angle:0,anchor:nt,leftToRight:dt});return pt.fontSize=ge.fontSize,pt.targetX=ne(pt.targetX),pt.targetY=re(pt.targetY),isNaN(pt.targetX)||isNaN(pt.targetY)?{}:(be!==Ie&&He!==Ve&&s(v.type,pt,f),{scale:pt.scale,rotate:pt.rotate,textX:pt.textX,textY:pt.textY,anchorX:pt.anchorX,anchorY:pt.anchorY,targetX:pt.targetX,targetY:pt.targetY})},ye=function(fe,ge){for(var be,Ie=0,He=fe;!be&&Ie<E;)Ie++,(He=He.parent)?be=H(He,ge):Ie=E;return be||{}},Me=function(fe,ge,be,Ie,He){var Ve,tt=H(fe,ge);if(tt)Ve=tt;else if(ge)Ve=B;else if(U)if(fe.parent){var nt=q||be;nt&&!ge?Ve=N(fe,nt,Ie):T.extendFlat(Ve={},ye(fe,ge))}else Ve=T.extendFlat({},fe),g&&("h"===He.orientation?He.flipX?Ve.x0=fe.x1:Ve.x1=0:He.flipY?Ve.y0=fe.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1})},Re=function(fe,ge,be,Ie){var st,wt,_t,He=H(fe,ge),Ve={},tt=(st=fe,wt=be,_t=Ie,ge?J[r(y)]||B:st.data.depth-d.data.depth<E?N(st,Y[v.level]||wt,_t):{});T.extendFlat(Ve,{transform:he({x0:tt.x0,x1:tt.x1,y0:tt.y0,y1:tt.y1,textBB:fe.textBB,_text:fe._text},{isHeader:l.isHeader(fe,v)})}),He?Ve=He:fe.parent&&T.extendFlat(Ve,ye(fe,ge));var nt=fe.transform;return fe.x0!==fe.x1&&fe.y0!==fe.y1&&s(v.type,nt,f),k(Ve,{transform:{scale:nt.scale,rotate:nt.rotate,textX:nt.textX,textY:nt.textY,anchorX:nt.anchorX,anchorY:nt.anchorY,targetX:nt.targetX,targetY:nt.targetY}})},Pe=function(fe,ge,be,Ie,He){var Ve=Ie[0],tt=Ie[1];_?fe.exit().transition().each(function(){var nt=M.select(this);nt.select("path.surface").transition().attrTween("d",function(st){var dt=function(wt,_t,pt,Pt){var St,Ot=H(wt,_t);if(_t)St=B;else{var jt=H(d,_t);St=jt?N(wt,jt,Pt):{}}return k(Ot,St)}(st,ge,0,[Ve,tt]);return function(wt){return He(dt(wt))}}),nt.select("g.slicetext").attr("opacity",0)}).remove():fe.exit().remove()},De=function(fe){var ge=fe.transform;return fe.x0!==fe.x1&&fe.y0!==fe.y1&&s(v.type,ge,f),T.getTextTransform({textX:ge.textX,textY:ge.textY,anchorX:ge.anchorX,anchorY:ge.anchorY,targetX:ge.targetX,targetY:ge.targetY,scale:ge.scale,rotate:ge.rotate})};_&&(w.each(function(fe){J[r(fe)]={x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1},fe.transform&&(J[r(fe)].transform={textX:fe.transform.textX,textY:fe.transform.textY,anchorX:fe.transform.anchorX,anchorY:fe.transform.anchorY,targetX:fe.transform.targetX,targetY:fe.transform.targetY,scale:fe.transform.scale,rotate:fe.transform.rotate})}),u.each(function(fe){Y[r(fe)]={x0:fe.x0,x1:fe.x1,y0:fe.y0,y1:fe.y1},fe.transform&&(Y[r(fe)].transform={textX:fe.transform.textX,textY:fe.transform.textY,anchorX:fe.transform.anchorX,anchorY:fe.transform.anchorY,targetX:fe.transform.targetX,targetY:fe.transform.targetY,scale:fe.transform.scale,rotate:fe.transform.rotate}),!U&&l.isEntry(fe)&&(U=fe)})),q=h(n,a,d,u,{width:P,height:z,viewX:ne,viewY:re,pathSlice:function(fe){var ge=ne(fe.x0),be=ne(fe.x1),Ie=re(fe.y0),He=re(fe.y1),Ve=be-ge,tt=He-Ie;if(!Ve||!tt)return"";var st=Math.min(v.marker.cornerradius||0,Ve/2,tt/2);st&&fe.data&&fe.data.data&&fe.data.data.label&&(Te&&(st=Math.min(st,de.t)),we&&(st=Math.min(st,de.l)),K&&(st=Math.min(st,de.r)),oe&&(st=Math.min(st,de.b)));var dt=function(wt,_t){return st?"a"+me(st,st)+" 0 0 1 "+me(wt,_t):""};return"M"+me(ge,Ie+st)+dt(st,-st)+"L"+me(be-st,Ie)+dt(st,st)+"L"+me(be,He-st)+dt(-st,st)+"L"+me(ge+st,He)+dt(-st,-st)+"Z"},toMoveInsideSlice:he,prevEntry:U,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Re,handleSlicesExit:Pe,hasTransition:_,strTransform:De}),v.pathbar.visible?o(n,a,d,w,{barDifY:D,width:j,height:R,viewX:pe,viewY:ke,pathSlice:function(fe){var ge=pe(Math.max(Math.min(fe.x0,fe.x0),0)),be=pe(Math.min(Math.max(fe.x1,fe.x1),j)),Ie=ke(fe.y0),He=ke(fe.y1),Ve=R/2,tt={},nt={};tt.x=ge,nt.x=be,tt.y=nt.y=(Ie+He)/2;var st={x:ge,y:Ie},dt={x:be,y:Ie},wt={x:be,y:He},_t={x:ge,y:He};return">"===Ee?(st.x-=Ve,dt.x-=Ve,wt.x-=Ve,_t.x-=Ve):"/"===Ee?(wt.x-=Ve,_t.x-=Ve,tt.x-=Ve/2,nt.x-=Ve/2):"\\"===Ee?(st.x-=Ve,dt.x-=Ve,tt.x-=Ve/2,nt.x-=Ve/2):"<"===Ee&&(tt.x-=Ve,nt.x-=Ve),ue(st),ue(_t),ue(tt),ue(dt),ue(wt),ue(nt),"M"+me(st.x,st.y)+"L"+me(dt.x,dt.y)+"L"+me(nt.x,nt.y)+"L"+me(wt.x,wt.y)+"L"+me(_t.x,_t.y)+"L"+me(tt.x,tt.y)+"Z"},toMoveInsideSlice:he,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Re,handleSlicesExit:Pe,hasTransition:_,strTransform:De}):w.remove()}},96362:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(71828),T=t(2791),x=t(72597).resizeText;function p(s,e,o,r){var n,a,i=(r||{}).hovered,c=e.data.data,h=c.i,f=c.color,b=T.isHierarchyRoot(e),v=1;if(i)n=o._hovered.marker.line.color,a=o._hovered.marker.line.width;else if(b&&f===o.root.color)v=100,n="rgba(0,0,0,0)",a=0;else if(n=l.castOption(o,h,"marker.line.color")||k.defaultLine,a=l.castOption(o,h,"marker.line.width")||0,!o._hasColorscale&&!e.onPathbar){var g=o.marker.depthfade;if(g){var y,d=k.combine(k.addOpacity(o._backgroundColor,.75),f);if(!0===g){var m=T.getMaxDepth(o);y=isFinite(m)?T.isLeaf(e)?0:o._maxVisibleLayers-(e.data.depth-o._entryDepth):e.data.height+1}else y=e.data.depth-o._entryDepth,o._atRootLevel||y++;if(y>0)for(var w=0;w<y;w++)f=k.combine(k.addOpacity(d,.5*w/y),f)}}s.style("stroke-width",a).call(k.fill,f).call(k.stroke,n).style("opacity",v)}$.exports={style:function(s){var e=s._fullLayout._treemaplayer.selectAll(".trace");x(s,e,"treemap"),e.each(function(o){var r=M.select(this),n=o[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(a){M.select(this).call(p,a,n,{hovered:!1})})})},styleOne:p}},68875:function($,I,t){"use strict";var M=t(53522),k=t(1426).extendFlat,l=t(12663).axisHoverFormat;$.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:k({},M.name,{}),orientation:k({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:k({},M.boxpoints,{}),jitter:k({},M.jitter,{}),pointpos:k({},M.pointpos,{}),width:k({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(48518),T=t(60168),x=t(50606).BADNUM;function p(e,o,r){var n=o.max-o.min;if(!n)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,n/1e4);var c,a=r.length,i=M.stdev(r,a-1,o.mean);return Math.max((c=a,1.059*Math.min(i,(o.q3-o.q1)/1.349)*Math.pow(c,-.2)),n/100)}function s(e,o,r,n){var a,i=e.spanmode,c=e.span||[],f=[o.min-2*n,o.max+2*n];function b(g){var y=c[g],d="multicategory"===r.type?r.r2c(y):r.d2c(y,0,e[o.valLetter+"calendar"]);return d===x?f[g]:d}var v={type:"linear",range:a="soft"===i?f:"hard"===i?[o.min,o.max]:[b(0),b(1)]};return k.setConvert(v),v.cleanRange(),a}$.exports=function(e,o){var r=l(e,o);if(r[0].t.empty)return r;for(var n=e._fullLayout,a=k.getFromId(e,o["h"===o.orientation?"xaxis":"yaxis"]),i=1/0,c=-1/0,h=0,f=0,b=0;b<r.length;b++){var v=r[b],g=v.pts.map(T.extractVal),y=v.bandwidth=p(o,v,g),d=v.span=s(o,v,a,y);if(v.min===v.max&&0===y)d=v.span=[v.min,v.max],v.density=[{v:1,t:d[0]}],v.bandwidth=y,h=Math.max(h,1);else{var m=d[1]-d[0],w=Math.ceil(m/(y/3)),u=m/w;if(!isFinite(u)||!isFinite(w))return M.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=T.makeKDE(v,o,g);v.density=new Array(w);for(var _=0,E=d[0];E<d[1]+u/2;_++,E+=u){var L=S(E);v.density[_]={v:L,t:E},h=Math.max(h,L)}}f=Math.max(f,g.length),i=Math.min(i,d[0]),c=Math.max(c,d[1])}var C=k.findExtremes(a,[i,c],{padded:!0});if(o._extremes[a._id]=C,o.width)r[0].t.maxKDE=h;else{var P=n._violinScaleGroupStats,z=o.scalegroup,j=P[z];j?(j.maxKDE=Math.max(j.maxKDE,h),j.maxCount=Math.max(j.maxCount,f)):P[z]={maxKDE:h,maxCount:f}}return r[0].t.labels.kde=M._(e,"kde:"),r}},86403:function($,I,t){"use strict";var M=t(37188).setPositionOffset,k=["v","h"];$.exports=function(l,T){for(var x=l.calcdata,p=T.xaxis,s=T.yaxis,e=0;e<k.length;e++){for(var o=k[e],r="h"===o?s:p,n=[],a=0;a<x.length;a++){var i=x[a],h=i[0].trace;!0!==h.visible||"violin"!==h.type||i[0].t.empty||h.orientation!==o||h.xaxis!==p._id||h.yaxis!==s._id||n.push(a)}M("violin",l,n,r)}}},15899:function($,I,t){"use strict";var M=t(71828),k=t(7901),l=t(36411),T=t(68875);$.exports=function(x,p,s,e){function o(m,w){return M.coerce(x,p,T,m,w)}function r(m,w){return M.coerce2(x,p,T,m,w)}if(l.handleSampleDefaults(x,p,o,e),!1!==p.visible){o("bandwidth"),o("side"),o("width")||(o("scalegroup",p.name),o("scalemode"));var n,a=o("span");Array.isArray(a)&&(n="manual"),o("spanmode",n);var i=o("line.color",(x.marker||{}).color||s),c=o("line.width"),h=o("fillcolor",k.addOpacity(p.line.color,.5));l.handlePointsDefaults(x,p,o,{prefix:""});var f=r("box.width"),b=r("box.fillcolor",h),v=r("box.line.color",i),g=r("box.line.width",c);o("box.visible",Boolean(f||b||v||g))||(p.box={visible:!1});var y=r("meanline.color",i),d=r("meanline.width",c);o("meanline.visible",Boolean(y||d))||(p.meanline={visible:!1}),o("quartilemethod")}}},60168:function($,I,t){"use strict";var M=t(71828),k=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};I.makeKDE=function(l,T,x){var p=x.length,s=k,e=l.bandwidth,o=1/(p*e);return function(r){for(var n=0,a=0;a<p;a++)n+=s((r-x[a])/e);return o*n}},I.getPositionOnKdePath=function(l,T,x){var p,s;"h"===T.orientation?(p="y",s="x"):(p="x",s="y");var e=M.findPointOnPath(l.path,x,s,{pathLength:l.pathLength}),o=l.posCenterPx,r=e[p];return[r,"both"===T.side?2*o-r:o]},I.getKdeValue=function(l,T,x){var p=l.pts.map(I.extractVal);return I.makeKDE(l,T,p)(x)/l.posDensityScale},I.extractVal=function(l){return l.v}},57634:function($,I,t){"use strict";var M=t(7901),k=t(71828),l=t(89298),T=t(41868),x=t(60168);$.exports=function(p,s,e,o,r){r||(r={});var n,a,i=r.hoverLayer,c=p.cd,h=c[0].trace,f=h.hoveron,b=-1!==f.indexOf("violins"),v=-1!==f.indexOf("kde"),g=[];if(b||v){var y=T.hoverOnBoxes(p,s,e,o);if(v&&y.length>0){var d,m,w,u,S,_=p.xa,E=p.ya;"h"===h.orientation?(S=s,d="y",w=E,m="x",u=_):(S=e,d="x",w=_,m="y",u=E);var L=c[p.index];if(S>=L.span[0]&&S<=L.span[1]){var C=k.extendFlat({},p),P=u.c2p(S,!0),z=x.getKdeValue(L,h,S),j=x.getPositionOnKdePath(L,h,P),R=w._offset,V=w._length;C[d+"0"]=j[0],C[d+"1"]=j[1],C[m+"0"]=C[m+"1"]=P,C[m+"Label"]=m+": "+l.hoverLabelText(u,S,h[m+"hoverformat"])+", "+c[0].t.labels.kde+" "+z.toFixed(3);for(var D=0,B=0;B<y.length;B++)if("med"===y[B].attr){D=B;break}C.spikeDistance=y[D].spikeDistance;var N=d+"Spike";C[N]=y[D][N],y[D].spikeDistance=void 0,y[D][N]=void 0,C.hovertemplate=!1,g.push(C),(a={})[d+"1"]=k.constrain(R+j[0],R,R+V),a[d+"2"]=k.constrain(R+j[1],R,R+V),a[m+"1"]=a[m+"2"]=u._offset+P}}b&&(g=g.concat(y))}-1!==f.indexOf("points")&&(n=T.hoverOnPoints(p,s,e));var U=i.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return U.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),U.exit().remove(),U.attr(a).call(M.stroke,p.color),"closest"===o?n?[n]:g:(n&&g.push(n),g)}},47462:function($,I,t){"use strict";$.exports={attributes:t(68875),layoutAttributes:t(9228),supplyDefaults:t(15899),crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(33598),calc:t(38603),crossTraceCalc:t(86403),plot:t(28443),style:t(31847),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(57634),selectPoints:t(24626),moduleType:"trace",name:"violin",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function($,I,t){"use strict";var M=t(40094),k=t(71828).extendFlat;$.exports={violinmode:k({},M.boxmode,{}),violingap:k({},M.boxgap,{}),violingroupgap:k({},M.boxgroupgap,{})}},33598:function($,I,t){"use strict";var M=t(71828),k=t(9228),l=t(4199);$.exports=function(T,x,p){l._supply(T,x,p,function(s,e){return M.coerce(T,x,k,s,e)},"violin")}},28443:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(86047),x=t(34621),p=t(60168);$.exports=function(s,e,o,r){var n=s._context.staticPlot,a=s._fullLayout,i=e.xaxis,c=e.yaxis;function h(f,b){var v=x(f,{xaxis:i,yaxis:c,trace:b,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(v[0],1)}k.makeTraceGroups(r,o,"trace violins").each(function(f){var b=M.select(this),v=f[0],g=v.t,y=v.trace;if(!0!==y.visible||g.empty)b.remove();else{var d=g.bPos,m=g.bdPos,w=e[g.valLetter+"axis"],u=e[g.posLetter+"axis"],S="both"===y.side,_=S||"positive"===y.side,E=S||"negative"===y.side,L=b.selectAll("path.violin").data(k.identity);L.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(B){var N,U,J,Y,q,H,X,Q,ne=M.select(this),re=B.density,ae=re.length,se=u.c2l(B.pos+d,!0),pe=u.l2p(se);if(y.width)N=g.maxKDE/m;else{var ke=a._violinScaleGroupStats[y.scalegroup];N="count"===y.scalemode?ke.maxKDE/m*(ke.maxCount/B.pts.length):ke.maxKDE/m}if(_){for(X=new Array(ae),q=0;q<ae;q++)(Q=X[q]={})[g.posLetter]=se+re[q].v/N,Q[g.valLetter]=w.c2l(re[q].t,!0);U=h(X,y)}if(E){for(X=new Array(ae),H=0,q=ae-1;H<ae;H++,q--)(Q=X[H]={})[g.posLetter]=se-re[q].v/N,Q[g.valLetter]=w.c2l(re[q].t,!0);J=h(X,y)}if(S)Y=U+"L"+J.substr(1)+"Z";else{var me=[pe,w.c2p(re[0].t)],le=[pe,w.c2p(re[ae-1].t)];"h"===y.orientation&&(me.reverse(),le.reverse()),Y=_?"M"+me+"L"+U.substr(1)+"L"+le:"M"+le+"L"+J.substr(1)+"L"+me}ne.attr("d",Y),B.posCenterPx=pe,B.posDensityScale=N*m,B.path=ne.node(),B.pathLength=B.path.getTotalLength()/(S?2:1)});var C,P,z,j=y.box,R=j.width,V=(j.line||{}).width;S?(C=m*R,P=0):_?(C=[0,m*R/2],P=V*{x:1,y:-1}[g.posLetter]):(C=[m*R/2,0],P=V*{x:-1,y:1}[g.posLetter]),T.plotBoxAndWhiskers(b,{pos:u,val:w},y,{bPos:d,bdPos:C,bPosPxOffset:P}),T.plotBoxMean(b,{pos:u,val:w},y,{bPos:d,bdPos:C,bPosPxOffset:P}),!y.box.visible&&y.meanline.visible&&(z=k.identity);var D=b.selectAll("path.meanline").data(z||[]);D.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),D.exit().remove(),D.each(function(B){var N=w.c2p(B.mean,!0),U=p.getPositionOnKdePath(B,y,N);M.select(this).attr("d","h"===y.orientation?"M"+N+","+U[0]+"V"+U[1]:"M"+U[0]+","+N+"H"+U[1])}),T.plotPoints(b,{x:i,y:c},y,g)}})}},31847:function($,I,t){"use strict";var M=t(39898),k=t(7901),l=t(16296).stylePoints;$.exports=function(T){var x=M.select(T).selectAll("g.trace.violins");x.style("opacity",function(p){return p[0].trace.opacity}),x.each(function(p){var s=p[0].trace,e=M.select(this),o=s.box||{},r=o.line||{},n=s.meanline||{},a=n.width;e.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),e.selectAll("path.box").style("stroke-width",r.width+"px").call(k.stroke,r.color).call(k.fill,o.fillcolor);var i={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};e.selectAll("path.mean").style(i).call(k.stroke,n.color),e.selectAll("path.meanline").style(i).call(k.stroke,n.color),l(e,s,T)})}},16336:function($,I,t){"use strict";var M=t(50693),k=t(16249),l=t(54532),T=t(9012),x=t(1426).extendFlat,p=t(30962).overrideAll,s=$.exports=p(x({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:l.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:x({},T.hoverinfo),showlegend:x({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},64809:function($,I,t){"use strict";var M=t(9330).gl_mesh3d,k=t(81697).parseColorScale,l=t(78614),T=t(21081).extractOpts,x=t(90060),p=t(22674).findNearestOnAxis,s=t(22674).generateIsoMeshes;function e(r,n,a){this.scene=r,this.uid=a,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var o=e.prototype;o.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,i=this.data._meshY[n],c=this.data._meshZ[n],h=this.data._Ys.length,f=this.data._Zs.length,b=p(this.data._meshX[n],this.data._Xs).id,v=p(i,this.data._Ys).id,g=p(c,this.data._Zs).id,y=r.index=g+f*v+f*h*b;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[y]?r.textLabel=d[y]:d&&(r.textLabel=d),!0}},o.update=function(r){var n=this.scene,a=n.fullSceneLayout;function i(f,b,v,g){return b.map(function(y){return f.d2l(y,0,g)*v})}this.data=s(r);var c={positions:x(i(a.xaxis,r._meshX,n.dataScale[0],r.xcalendar),i(a.yaxis,r._meshY,n.dataScale[1],r.ycalendar),i(a.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:x(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},h=T(r);c.vertexIntensity=r._meshIntensity,c.vertexIntensityBounds=[h.min,h.max],c.colormap=k(r),this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(r,n){var i=M({gl:r.glplot.gl}),c=new e(r,i,n.uid);return i._trace=c,c.update(n),r.glplot.add(i),c}},47651:function($,I,t){"use strict";var M=t(71828),k=t(16336),l=t(82738).supplyIsoDefaults,T=t(91831).opacityscaleDefaults;$.exports=function(x,p,s,e){function o(r,n){return M.coerce(x,p,k,r,n)}l(x,p,s,e,o),T(x,p,e,o)}},17659:function($,I,t){"use strict";$.exports={attributes:t(16336),supplyDefaults:t(47651),calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(64809),moduleType:"trace",name:"volume",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function($,I,t){"use strict";var M=t(1486),k=t(82196).line,l=t(9012),T=t(12663).axisHoverFormat,x=t(5386).f,p=t(5386).s,s=t(48334),e=t(1426).extendFlat,o=t(7901);function r(n){return{marker:{color:e({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:x({},{keys:s.eventDataKeys}),hoverinfo:e({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:p({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:e({},k.color,{dflt:o.defaultLine}),width:e({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},52752:function($,I,t){"use strict";var M=t(89298),k=t(42973),l=t(71828).mergeArray,T=t(66279),x=t(50606).BADNUM;function p(e){return"a"===e||"absolute"===e}function s(e){return"t"===e||"total"===e}$.exports=function(e,o){var r,n,a,i,c,h,f=M.getFromId(e,o.xaxis||"x"),b=M.getFromId(e,o.yaxis||"y");"h"===o.orientation?(r=f.makeCalcdata(o,"x"),a=b.makeCalcdata(o,"y"),i=k(o,b,"y",a),c=!!o.yperiodalignment,h="y"):(r=b.makeCalcdata(o,"y"),a=f.makeCalcdata(o,"x"),i=k(o,f,"x",a),c=!!o.xperiodalignment,h="x"),n=i.vals;for(var v,g=Math.min(n.length,r.length),y=new Array(g),d=0,m=!1,w=0;w<g;w++){var u=r[w]||0,S=!1;(r[w]!==x||s(o.measure[w])||p(o.measure[w]))&&w+1<g&&(r[w+1]!==x||s(o.measure[w+1])||p(o.measure[w+1]))&&(S=!0);var _=y[w]={i:w,p:n[w],s:u,rawS:u,cNext:S};p(o.measure[w])?(d=_.s,_.isSum=!0,_.dir="totals",_.s=d):s(o.measure[w])?(_.isSum=!0,_.dir="totals",_.s=d):(_.isSum=!1,_.dir=_.rawS<0?"decreasing":"increasing",_.s=d+(v=_.s),d+=v),"totals"===_.dir&&(m=!0),c&&(y[w].orig_p=a[w],y[w][h+"End"]=i.ends[w],y[w][h+"Start"]=i.starts[w]),o.ids&&(_.id=String(o.ids[w])),_.v=(o.base||0)+d}return y.length&&(y[0].hasTotals=m),l(o.text,y,"tx"),l(o.hovertext,y,"htx"),T(y,o),y}},48334:function($){"use strict";$.exports={eventDataKeys:["initial","delta","final"]}},70766:function($,I,t){"use strict";var M=t(11661).setGroupPositions;$.exports=function(k,l){var T,x,p=k._fullLayout,s=k._fullData,e=k.calcdata,o=l.xaxis,r=l.yaxis,n=[],a=[],i=[];for(x=0;x<s.length;x++){var c=s[x];!0===c.visible&&c.xaxis===o._id&&c.yaxis===r._id&&"waterfall"===c.type&&(T=e[x],"h"===c.orientation?i.push(T):a.push(T),n.push(T))}var h={mode:p.waterfallmode,norm:p.waterfallnorm,gap:p.waterfallgap,groupgap:p.waterfallgroupgap};for(M(k,o,r,a,h),M(k,r,o,i,h),x=0;x<n.length;x++){T=n[x];for(var f=0;f<T.length;f++){var b=T[f];!1===b.isSum&&(b.s0+=0===f?0:T[f-1].s),f+1<T.length&&(T[f].nextP0=T[f+1].p0,T[f].nextS0=T[f+1].s0)}}}},83266:function($,I,t){"use strict";var M=t(71828),k=t(26125),l=t(90769).handleText,T=t(67513),x=t(73927),p=t(43037),s=t(7901),e=t(22372),o=e.INCREASING.COLOR,r=e.DECREASING.COLOR;function n(a,i,c){a(i+".marker.color",c),a(i+".marker.line.color",s.defaultLine),a(i+".marker.line.width")}$.exports={supplyDefaults:function(a,i,c,h){function f(v,g){return M.coerce(a,i,p,v,g)}if(T(a,i,h,f)){x(a,i,h,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",i.x&&!i.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var b=f("textposition");l(a,i,h,f,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==i.textposition&&(f("texttemplate"),i.texttemplate||f("textinfo")),n(f,"increasing",o),n(f,"decreasing",r),n(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(a,i){var c,h;function f(v){return M.coerce(h._input,h,p,v)}if("group"===i.waterfallmode)for(var b=0;b<a.length;b++)c=(h=a[b])._input,k(c,h,i,f)}}},58593:function($){"use strict";$.exports=function(I,t){return I.x="xVal"in t?t.xVal:t.x,I.y="yVal"in t?t.yVal:t.y,"initial"in t&&(I.initial=t.initial),"delta"in t&&(I.delta=t.delta),"final"in t&&(I.final=t.final),t.xa&&(I.xaxis=t.xa),t.ya&&(I.yaxis=t.ya),I}},61326:function($,I,t){"use strict";var M=t(89298).hoverLabelText,k=t(7901).opacity,l=t(95423).hoverOnBars,T=t(22372),x=T.INCREASING.SYMBOL,p=T.DECREASING.SYMBOL;$.exports=function(s,e,o,r,n){var C,P,z,j,a=l(s,e,o,r,n);if(a){var i=a.cd,c=i[0].trace,h="h"===c.orientation,f=h?"x":"y",b=h?s.xa:s.ya,v=i[a.index],g=v.isSum?v.b+v.s:v.rawS;if(!v.isSum){a.initial=v.b+v.s-g,a.delta=g,a.final=a.initial+a.delta;var y=_(Math.abs(a.delta));a.deltaLabel=g<0?"("+y+")":y,a.finalLabel=_(a.final),a.initialLabel=_(a.initial)}var d=v.hi||c.hoverinfo,m=[];if(d&&"none"!==d&&"skip"!==d){var w="all"===d,u=d.split("+"),S=function(E){return w||-1!==u.indexOf(E)};v.isSum||(!S("final")||S(h?"x":"y")||m.push(a.finalLabel),S("delta")&&m.push(g<0?a.deltaLabel+" "+p:a.deltaLabel+" "+x),S("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=(z=(C=c[v.dir].marker).line.color,j=C.line.width,k(P=C.color)?P:k(z)&&j?z:void 0),[a]}function _(E){return M(b,E,c[f+"hoverformat"])}}},19990:function($,I,t){"use strict";$.exports={attributes:t(43037),layoutAttributes:t(13494),supplyDefaults:t(83266).supplyDefaults,crossTraceDefaults:t(83266).crossTraceDefaults,supplyLayoutDefaults:t(5176),calc:t(52752),crossTraceCalc:t(70766),plot:t(30436),style:t(55750).style,hoverPoints:t(61326),eventData:t(58593),selectPoints:t(81974),moduleType:"trace",name:"waterfall",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function($){"use strict";$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function($,I,t){"use strict";var M=t(71828),k=t(13494);$.exports=function(l,T,x){var p=!1;function s(r,n){return M.coerce(l,T,k,r,n)}for(var e=0;e<x.length;e++){var o=x[e];if(o.visible&&"waterfall"===o.type){p=!0;break}}p&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},30436:function($,I,t){"use strict";var M=t(39898),k=t(71828),l=t(91424),T=t(50606).BADNUM,x=t(17295),p=t(72597).clearMinTextSize;$.exports=function(s,e,o,r){var a,i,f,b,n=s._fullLayout;p("waterfall",n),x.plot(s,e,o,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),a=s,f=(i=e).xaxis,b=i.yaxis,k.makeTraceGroups(r,o,"trace bars").each(function(v){var g=M.select(this),y=v[0].trace,d=k.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible){var m="h"===y.orientation,w=y.connector.mode,u=d.selectAll("g.line").data(k.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var S=u.size();u.each(function(_,E){if(E===S-1||_.cNext){var L=(R=f,V=b,N=[],J=(D=m)?V:R,(B=[])[0]=(U=D?R:V).c2p((j=_).s0,!0),N[0]=J.c2p(j.p0,!0),B[1]=U.c2p(j.s1,!0),N[1]=J.c2p(j.p1,!0),B[2]=U.c2p(j.nextS0,!0),N[2]=J.c2p(j.nextP0,!0),D?[B,N]:[N,B]),C=L[0],P=L[1],z="";C[0]!==T&&P[0]!==T&&C[1]!==T&&P[1]!==T&&("spanning"===w&&!_.isSum&&E>0&&(z+=m?"M"+C[0]+","+P[1]+"V"+P[0]:"M"+C[1]+","+P[0]+"H"+C[0]),"between"!==w&&(_.isSum||E<S-1)&&(z+=m?"M"+C[1]+","+P[0]+"V"+P[1]:"M"+C[0]+","+P[1]+"H"+C[1]),C[2]!==T&&P[2]!==T&&(z+=m?"M"+C[1]+","+P[1]+"V"+P[2]:"M"+C[1]+","+P[1]+"H"+C[2])),""===z&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(l.setClipUrl,i.layerClipId,a)}var j,R,V,D,B,N,U,J})}else d.remove()})}},55750:function($,I,t){"use strict";var M=t(39898),k=t(91424),l=t(7901),T=t(37822).DESELECTDIM,x=t(16688),p=t(72597).resizeText,s=x.styleTextPoints;$.exports={style:function(e,o,r){var n=r||M.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");p(e,n,"waterfall"),n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=M.select(this),c=a[0].trace;i.selectAll(".point > path").each(function(h){if(!h.isBlank){var f=c[h.dir].marker;M.select(this).call(l.fill,f.color).call(l.stroke,f.line.color).call(k.dashLine,f.line.dash,f.line.width).style("opacity",c.selectedpoints&&!h.selected?T:1)}}),s(i,c,e),i.selectAll(".lines").each(function(){var h=c.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},82887:function($,I,t){"use strict";var M=t(89298),k=t(71828),l=t(86281),T=t(79344).p,x=t(50606).BADNUM;I.moduleType="transform",I.name="aggregate";var p=I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=p.aggregations;function e(a,i,c,h){if(h.enabled){for(var f=h.target,b=k.nestedProperty(i,f),v=b.get(),g=function(m,w){var S=w.d2c,_=w.c2d;switch(m.func){case"count":return o;case"first":return r;case"last":return n;case"sum":return function(E,L){for(var C=0,P=0;P<L.length;P++){var z=S(E[L[P]]);z!==x&&(C+=z)}return _(C)};case"avg":return function(E,L){for(var C=0,P=0,z=0;z<L.length;z++){var j=S(E[L[z]]);j!==x&&(C+=j,P++)}return P?_(C/P):x};case"min":return function(E,L){for(var C=1/0,P=0;P<L.length;P++){var z=S(E[L[P]]);z!==x&&(C=Math.min(C,z))}return C===1/0?x:_(C)};case"max":return function(E,L){for(var C=-1/0,P=0;P<L.length;P++){var z=S(E[L[P]]);z!==x&&(C=Math.max(C,z))}return C===-1/0?x:_(C)};case"range":return function(E,L){for(var C=1/0,P=-1/0,z=0;z<L.length;z++){var j=S(E[L[z]]);j!==x&&(C=Math.min(C,j),P=Math.max(P,j))}return P===-1/0||C===1/0?x:_(P-C)};case"change":return function(E,L){var C=S(E[L[0]]),P=S(E[L[L.length-1]]);return C===x||P===x?x:_(P-C)};case"median":return function(E,L){for(var C=[],P=0;P<L.length;P++){var z=S(E[L[P]]);z!==x&&C.push(z)}if(!C.length)return x;C.sort(k.sorterAsc);var j=(C.length-1)/2;return _((C[Math.floor(j)]+C[Math.ceil(j)])/2)};case"mode":return function(E,L){for(var C={},P=0,z=x,j=0;j<L.length;j++){var R=S(E[L[j]]);if(R!==x){var V=C[R]=(C[R]||0)+1;V>P&&(P=V,z=R)}}return P?_(z):x};case"rms":return function(E,L){for(var C=0,P=0,z=0;z<L.length;z++){var j=S(E[L[z]]);j!==x&&(C+=j*j,P++)}return P?_(Math.sqrt(C/P)):x};case"stddev":return function(E,L){var C,P=0,z=0,j=1,R=x;for(C=0;C<L.length&&R===x;C++)R=S(E[L[C]]);if(R===x)return x;for(;C<L.length;C++){var V=S(E[L[C]]);if(V!==x){var D=V-R;P+=D,z+=D*D,j++}}var B="sample"===m.funcmode?j-1:j;return B?Math.sqrt((z-P*P/j)/B):0}}}(h,M.getDataConversions(a,i,f,v)),y=new Array(c.length),d=0;d<c.length;d++)y[d]=g(v,c[d]);b.set(y),"count"===h.func&&k.pushUnique(i._arrayAttrs,f)}}function o(a,i){return i.length}function r(a,i){return a[i[0]]}function n(a,i){return a[i[i.length-1]]}I.supplyDefaults=function(a,i){var c,h={};function f(_,E){return k.coerce(a,h,p,_,E)}if(!f("enabled"))return h;var b=l.findArrayAttributes(i),v={};for(c=0;c<b.length;c++)v[b[c]]=1;var g=f("groups");if(!Array.isArray(g)){if(!v[g])return h.enabled=!1,h;v[g]=0}var y,d=a.aggregations||[],m=h.aggregations=new Array(d.length);function w(_,E){return k.coerce(d[c],y,s,_,E)}for(c=0;c<d.length;c++){y={_index:c};var u=w("target"),S=w("func");w("enabled")&&u&&(v[u]||"count"===S&&void 0===v[u])?("stddev"===S&&w("funcmode"),v[u]=0,m[c]=y):m[c]={enabled:!1,_index:c}}for(c=0;c<b.length;c++)v[b[c]]&&m.push({target:b[c],func:s.func.dflt,enabled:!0,_index:-1});return h},I.calcTransform=function(a,i,c){if(c.enabled){var h=c.groups,f=k.getTargetArray(i,{target:h});if(f){var b,v,g,d={},m={},w=[],u=T(i.transforms,c),S=f.length;for(i._length&&(S=Math.min(S,i._length)),b=0;b<S;b++)void 0===(g=d[v=f[b]])?(d[v]=w.length,w.push([b]),m[d[v]]=u(b)):(w[g].push(b),m[d[v]]=(m[d[v]]||[]).concat(u(b)));c._indexToPoints=m;var _=c.aggregations;for(b=0;b<_.length;b++)e(a,i,w,_[b]);"string"==typeof h&&e(a,i,w,{target:h,func:"first",enabled:!0}),i._length=w.length}}}},14382:function($,I,t){"use strict";var M=t(71828),k=t(73972),l=t(89298),T=t(79344).p,x=t(74808),p=x.COMPARISON_OPS,s=x.INTERVAL_OPS,e=x.SET_OPS;I.moduleType="transform",I.name="filter",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(p).concat(s).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},I.supplyDefaults=function(o){var r={};function n(c,h){return M.coerce(o,r,I.attributes,c,h)}if(n("enabled")){var a=n("target");if(M.isArrayOrTypedArray(a)&&0===a.length)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var i=k.getComponentMethod("calendars","handleDefaults");i(o,r,"valuecalendar",null),i(o,r,"targetcalendar",null)}return r},I.calcTransform=function(o,r,n){if(n.enabled){var a=M.getTargetArray(r,n);if(a){var i=n.target,c=a.length;r._length&&(c=Math.min(c,r._length));var h=n.targetcalendar,f=r._arrayAttrs,b=n.preservegaps;if("string"==typeof i){var v=M.nestedProperty(r,i+"calendar").get();v&&(h=v)}var g,y,d=function(L,C,P){var z=L.operation,j=L.value,R=Array.isArray(j);function V(U){return-1!==U.indexOf(z)}var D,B=function(U){return C(U,0,L.valuecalendar)},N=function(U){return C(U,0,P)};switch(V(p)?D=B(R?j[0]:j):V(s)?D=R?[B(j[0]),B(j[1])]:[B(j),B(j)]:V(e)&&(D=R?j.map(B):[B(j)]),z){case"=":return function(U){return N(U)===D};case"!=":return function(U){return N(U)!==D};case"<":return function(U){return N(U)<D};case"<=":return function(U){return N(U)<=D};case">":return function(U){return N(U)>D};case">=":return function(U){return N(U)>=D};case"[]":return function(U){var J=N(U);return J>=D[0]&&J<=D[1]};case"()":return function(U){var J=N(U);return J>D[0]&&J<D[1]};case"[)":return function(U){var J=N(U);return J>=D[0]&&J<D[1]};case"(]":return function(U){var J=N(U);return J>D[0]&&J<=D[1]};case"][":return function(U){var J=N(U);return J<=D[0]||J>=D[1]};case")(":return function(U){var J=N(U);return J<D[0]||J>D[1]};case"](":return function(U){var J=N(U);return J<=D[0]||J>D[1]};case")[":return function(U){var J=N(U);return J<D[0]||J>=D[1]};case"{}":return function(U){return-1!==D.indexOf(N(U))};case"}{":return function(U){return-1===D.indexOf(N(U))}}}(n,l.getDataToCoordFunc(o,r,i,a),h),m={},w={},u=0;b?(g=function(L){m[L.astr]=M.extendDeep([],L.get()),L.set(new Array(c))},y=function(L,C){var P=m[L.astr][C];L.get()[C]=P}):(g=function(L){m[L.astr]=M.extendDeep([],L.get()),L.set([])},y=function(L,C){var P=m[L.astr][C];L.get().push(P)}),E(g);for(var S=T(r.transforms,n),_=0;_<c;_++)d(a[_])?(E(y,_),w[u++]=S(_)):b&&u++;n._indexToPoints=w,r._length=u}}function E(L,C){for(var P=0;P<f.length;P++)L(M.nestedProperty(r,f[P]),C)}}},43102:function($,I,t){"use strict";var M=t(71828),k=t(86281),l=t(74875),T=t(79344).p;function x(p,s){var e,o,r,n,a,i,c,h,f,b,v=s.transform,g=s.transformIndex,y=p.transforms[g].groups,d=T(p.transforms,v);if(!M.isArrayOrTypedArray(y)||0===y.length)return[p];var m=M.filterUnique(y),w=new Array(m.length),u=y.length,S=k.findArrayAttributes(p),_=v.styles||[],E={};for(e=0;e<_.length;e++)E[_[e].target]=_[e].value;v.styles&&(b=M.keyedContainer(v,"styles","target","value.name"));var L={},C={};for(e=0;e<m.length;e++){L[i=m[e]]=e,C[i]=0,(c=w[e]=M.extendDeepNoArrays({},p))._group=i,c.transforms[g]._indexToPoints={};var P=null;for(b&&(P=b.get(i)),c.name=P||""===P?P:M.templateString(v.nameformat,{trace:p.name,group:i}),h=c.transforms,c.transforms=[],o=0;o<h.length;o++)c.transforms[o]=M.extendDeepNoArrays({},h[o]);for(o=0;o<S.length;o++)M.nestedProperty(c,S[o]).set([])}for(r=0;r<S.length;r++){for(n=S[r],o=0,f=[];o<m.length;o++)f[o]=M.nestedProperty(w[o],n).get();for(a=M.nestedProperty(p,n).get(),o=0;o<u;o++)f[L[y[o]]].push(a[o])}for(o=0;o<u;o++)(c=w[L[y[o]]]).transforms[g]._indexToPoints[C[y[o]]]=d(o),C[y[o]]++;for(e=0;e<m.length;e++)i=m[e],l.clearExpandedTraceDefaultColors(c=w[e]),c=M.extendDeepNoArrays(c,E[i]||{});return w}I.moduleType="transform",I.name="groupby",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},I.supplyDefaults=function(p,s,e){var o,r={};function n(f,b){return M.coerce(p,r,I.attributes,f,b)}if(!n("enabled"))return r;n("groups"),n("nameformat",e._dataLength>1?"%{group} (%{trace})":"%{group}");var a=p.styles,i=r.styles=[];if(a)for(o=0;o<a.length;o++){var c=i[o]={};M.coerce(a[o],i[o],I.attributes.styles,"target");var h=M.coerce(a[o],i[o],I.attributes.styles,"value");M.isPlainObject(h)?c.value=M.extendDeep({},h):h&&delete c.value}return r},I.transform=function(p,s){var e,o,r,n=[];for(o=0;o<p.length;o++)for(e=x(p[o],s),r=0;r<e.length;r++)n.push(e[r]);return n}},79344:function($,I){"use strict";I.p=function(t,M){for(var k,l,T=0;T<t.length&&(k=t[T])!==M;T++)k._indexToPoints&&!1!==k.enabled&&(l=k._indexToPoints);return l?function(p){return l[p]}:function(p){return[p]}}},32275:function($,I,t){"use strict";var M=t(71828),k=t(89298),l=t(79344).p,T=t(50606).BADNUM;I.moduleType="transform",I.name="sort",I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},I.supplyDefaults=function(x){var p={};function s(e,o){return M.coerce(x,p,I.attributes,e,o)}return s("enabled")&&(s("target"),s("order")),p},I.calcTransform=function(x,p,s){if(s.enabled){var e=M.getTargetArray(p,s);if(e){var o=s.target,r=e.length;p._length&&(r=Math.min(r,p._length));var n,a,i=p._arrayAttrs,c=function(y,d,m,w){var u,S=new Array(w),_=new Array(w);for(u=0;u<w;u++)S[u]={v:d[u],i:u};for(S.sort(function(E,L){switch(E.order){case"ascending":return function(C,P){var z=L(C.v),j=L(P.v);return z===T?1:j===T?-1:z-j};case"descending":return function(C,P){var z=L(C.v),j=L(P.v);return z===T?1:j===T?-1:j-z}}}(y,m)),u=0;u<w;u++)_[u]=S[u].i;return _}(s,e,k.getDataToCoordFunc(x,p,o,e),r),h=l(p.transforms,s),f={};for(n=0;n<i.length;n++){var b=M.nestedProperty(p,i[n]),v=b.get(),g=new Array(r);for(a=0;a<r;a++)g[a]=v[c[a]];b.set(g)}for(a=0;a<r;a++)f[a]=h(c[a]);s._indexToPoints=f,p._length=r}}}},11506:function($,I){"use strict";I.version="2.20.0"},9330:function($,I,t){var M,k=t(90386);M=function(){return function(){var l={7386:function(p,s,e){p.exports={alpha_shape:e(2350),convex_hull:e(5537),delaunay_triangulate:e(4419),gl_cone3d:e(1140),gl_error3d:e(3110),gl_heatmap2d:e(6386),gl_line3d:e(6086),gl_mesh3d:e(8116),gl_plot2d:e(2117),gl_plot3d:e(1059),gl_pointcloud2d:e(8271),gl_scatter3d:e(2182),gl_select_box:e(6623),gl_spikes2d:e(3050),gl_streamtube3d:e(7307),gl_surface3d:e(3754),ndarray:e(5050),ndarray_linear_interpolate:e(3581)}},2146:function(p,s,e){"use strict";function o(fe,ge){if(!(fe instanceof ge))throw new TypeError("Cannot call a class as a function")}function n(fe,ge){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(be,Ie){return be.__proto__=Ie,be})(fe,ge)}function a(fe,ge){if(ge&&("object"===h(ge)||"function"==typeof ge))return ge;if(void 0!==ge)throw new TypeError("Derived constructors may only return object or undefined");return i(fe)}function i(fe){if(void 0===fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function c(fe){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)})(fe)}function h(fe){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge})(fe)}var f=e(3910),b=e(3187),v="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=d,s.h2=50;var g=2147483647;function y(fe){if(fe>g)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var ge=new Uint8Array(fe);return Object.setPrototypeOf(ge,d.prototype),ge}function d(fe,ge,be){if("number"==typeof fe){if("string"==typeof ge)throw new TypeError('The "string" argument must be of type string. Received type number');return u(fe)}return m(fe,ge,be)}function m(fe,ge,be){if("string"==typeof fe)return function(Ve,tt){if("string"==typeof tt&&""!==tt||(tt="utf8"),!d.isEncoding(tt))throw new TypeError("Unknown encoding: "+tt);var nt=0|L(Ve,tt),st=y(nt),dt=st.write(Ve,tt);return dt!==nt&&(st=st.slice(0,dt)),st}(fe,ge);if(ArrayBuffer.isView(fe))return function(Ve){if(ye(Ve,Uint8Array)){var tt=new Uint8Array(Ve);return _(tt.buffer,tt.byteOffset,tt.byteLength)}return S(Ve)}(fe);if(null==fe)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(fe));if(ye(fe,ArrayBuffer)||fe&&ye(fe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(fe,SharedArrayBuffer)||fe&&ye(fe.buffer,SharedArrayBuffer)))return _(fe,ge,be);if("number"==typeof fe)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ie=fe.valueOf&&fe.valueOf();if(null!=Ie&&Ie!==fe)return d.from(Ie,ge,be);var He=function(Ve){if(d.isBuffer(Ve)){var tt=0|E(Ve.length),nt=y(tt);return 0===nt.length||Ve.copy(nt,0,0,tt),nt}return void 0!==Ve.length?"number"!=typeof Ve.length||Me(Ve.length)?y(0):S(Ve):"Buffer"===Ve.type&&Array.isArray(Ve.data)?S(Ve.data):void 0}(fe);if(He)return He;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof fe[Symbol.toPrimitive])return d.from(fe[Symbol.toPrimitive]("string"),ge,be);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+h(fe))}function w(fe){if("number"!=typeof fe)throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function u(fe){return w(fe),y(fe<0?0:0|E(fe))}function S(fe){for(var ge=fe.length<0?0:0|E(fe.length),be=y(ge),Ie=0;Ie<ge;Ie+=1)be[Ie]=255&fe[Ie];return be}function _(fe,ge,be){if(ge<0||fe.byteLength<ge)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<ge+(be||0))throw new RangeError('"length" is outside of buffer bounds');var Ie;return Ie=void 0===ge&&void 0===be?new Uint8Array(fe):void 0===be?new Uint8Array(fe,ge):new Uint8Array(fe,ge,be),Object.setPrototypeOf(Ie,d.prototype),Ie}function E(fe){if(fe>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|fe}function L(fe,ge){if(d.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||ye(fe,ArrayBuffer))return fe.byteLength;if("string"!=typeof fe)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+h(fe));var be=fe.length,Ie=arguments.length>2&&!0===arguments[2];if(!Ie&&0===be)return 0;for(var He=!1;;)switch(ge){case"ascii":case"latin1":case"binary":return be;case"utf8":case"utf-8":return K(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*be;case"hex":return be>>>1;case"base64":return oe(fe).length;default:if(He)return Ie?-1:K(fe).length;ge=(""+ge).toLowerCase(),He=!0}}function C(fe,ge,be){var Ie=!1;if((void 0===ge||ge<0)&&(ge=0),ge>this.length||((void 0===be||be>this.length)&&(be=this.length),be<=0)||(be>>>=0)<=(ge>>>=0))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return X(this,ge,be);case"utf8":case"utf-8":return J(this,ge,be);case"ascii":return q(this,ge,be);case"latin1":case"binary":return H(this,ge,be);case"base64":return U(this,ge,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,ge,be);default:if(Ie)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),Ie=!0}}function P(fe,ge,be){var Ie=fe[ge];fe[ge]=fe[be],fe[be]=Ie}function z(fe,ge,be,Ie,He){if(0===fe.length)return-1;if("string"==typeof be?(Ie=be,be=0):be>2147483647?be=2147483647:be<-2147483648&&(be=-2147483648),Me(be=+be)&&(be=He?0:fe.length-1),be<0&&(be=fe.length+be),be>=fe.length){if(He)return-1;be=fe.length-1}else if(be<0){if(!He)return-1;be=0}if("string"==typeof ge&&(ge=d.from(ge,Ie)),d.isBuffer(ge))return 0===ge.length?-1:j(fe,ge,be,Ie,He);if("number"==typeof ge)return ge&=255,"function"==typeof Uint8Array.prototype.indexOf?He?Uint8Array.prototype.indexOf.call(fe,ge,be):Uint8Array.prototype.lastIndexOf.call(fe,ge,be):j(fe,[ge],be,Ie,He);throw new TypeError("val must be string, number or Buffer")}function j(fe,ge,be,Ie,He){var Ve,tt=1,nt=fe.length,st=ge.length;if(void 0!==Ie&&("ucs2"===(Ie=String(Ie).toLowerCase())||"ucs-2"===Ie||"utf16le"===Ie||"utf-16le"===Ie)){if(fe.length<2||ge.length<2)return-1;tt=2,nt/=2,st/=2,be/=2}function dt(Pt,St){return 1===tt?Pt[St]:Pt.readUInt16BE(St*tt)}if(He){var wt=-1;for(Ve=be;Ve<nt;Ve++)if(dt(fe,Ve)===dt(ge,-1===wt?0:Ve-wt)){if(-1===wt&&(wt=Ve),Ve-wt+1===st)return wt*tt}else-1!==wt&&(Ve-=Ve-wt),wt=-1}else for(be+st>nt&&(be=nt-st),Ve=be;Ve>=0;Ve--){for(var _t=!0,pt=0;pt<st;pt++)if(dt(fe,Ve+pt)!==dt(ge,pt)){_t=!1;break}if(_t)return Ve}return-1}function R(fe,ge,be,Ie){be=Number(be)||0;var He=fe.length-be;Ie?(Ie=Number(Ie))>He&&(Ie=He):Ie=He;var Ve,tt=ge.length;for(Ie>tt/2&&(Ie=tt/2),Ve=0;Ve<Ie;++Ve){var nt=parseInt(ge.substr(2*Ve,2),16);if(Me(nt))return Ve;fe[be+Ve]=nt}return Ve}function V(fe,ge,be,Ie){return he(K(ge,fe.length-be),fe,be,Ie)}function D(fe,ge,be,Ie){return he(function(He){for(var Ve=[],tt=0;tt<He.length;++tt)Ve.push(255&He.charCodeAt(tt));return Ve}(ge),fe,be,Ie)}function B(fe,ge,be,Ie){return he(oe(ge),fe,be,Ie)}function N(fe,ge,be,Ie){return he(function(He,Ve){for(var tt,nt,dt=[],wt=0;wt<He.length&&!((Ve-=2)<0);++wt)nt=(tt=He.charCodeAt(wt))>>8,dt.push(tt%256),dt.push(nt);return dt}(ge,fe.length-be),fe,be,Ie)}function U(fe,ge,be){return f.fromByteArray(0===ge&&be===fe.length?fe:fe.slice(ge,be))}function J(fe,ge,be){be=Math.min(fe.length,be);for(var Ie=[],He=ge;He<be;){var Ve=fe[He],tt=null,nt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(He+nt<=be){var st=void 0,dt=void 0,wt=void 0,_t=void 0;switch(nt){case 1:Ve<128&&(tt=Ve);break;case 2:128==(192&(st=fe[He+1]))&&(_t=(31&Ve)<<6|63&st)>127&&(tt=_t);break;case 3:dt=fe[He+2],128==(192&(st=fe[He+1]))&&128==(192&dt)&&(_t=(15&Ve)<<12|(63&st)<<6|63&dt)>2047&&(_t<55296||_t>57343)&&(tt=_t);break;case 4:dt=fe[He+2],wt=fe[He+3],128==(192&(st=fe[He+1]))&&128==(192&dt)&&128==(192&wt)&&(_t=(15&Ve)<<18|(63&st)<<12|(63&dt)<<6|63&wt)>65535&&_t<1114112&&(tt=_t)}}null===tt?(tt=65533,nt=1):tt>65535&&(Ie.push((tt-=65536)>>>10&1023|55296),tt=56320|1023&tt),Ie.push(tt),He+=nt}return function(pt){var Pt=pt.length;if(Pt<=Y)return String.fromCharCode.apply(String,pt);for(var St="",Ot=0;Ot<Pt;)St+=String.fromCharCode.apply(String,pt.slice(Ot,Ot+=Y));return St}(Ie)}(d.TYPED_ARRAY_SUPPORT=function(){try{var fe=new Uint8Array(1),ge={foo:function(){return 42}};return Object.setPrototypeOf(ge,Uint8Array.prototype),Object.setPrototypeOf(fe,ge),42===fe.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(fe,ge,be){return m(fe,ge,be)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(fe,ge,be){return He=ge,Ve=be,w(Ie=fe),Ie<=0?y(Ie):void 0!==He?"string"==typeof Ve?y(Ie).fill(He,Ve):y(Ie).fill(He):y(Ie);var Ie,He,Ve},d.allocUnsafe=function(fe){return u(fe)},d.allocUnsafeSlow=function(fe){return u(fe)},d.isBuffer=function(fe){return null!=fe&&!0===fe._isBuffer&&fe!==d.prototype},d.compare=function(fe,ge){if(ye(fe,Uint8Array)&&(fe=d.from(fe,fe.offset,fe.byteLength)),ye(ge,Uint8Array)&&(ge=d.from(ge,ge.offset,ge.byteLength)),!d.isBuffer(fe)||!d.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(fe===ge)return 0;for(var be=fe.length,Ie=ge.length,He=0,Ve=Math.min(be,Ie);He<Ve;++He)if(fe[He]!==ge[He]){be=fe[He],Ie=ge[He];break}return be<Ie?-1:Ie<be?1:0},d.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(fe,ge){if(!Array.isArray(fe))throw new TypeError('"list" argument must be an Array of Buffers');if(0===fe.length)return d.alloc(0);var be;if(void 0===ge)for(ge=0,be=0;be<fe.length;++be)ge+=fe[be].length;var Ie=d.allocUnsafe(ge),He=0;for(be=0;be<fe.length;++be){var Ve=fe[be];if(ye(Ve,Uint8Array))He+Ve.length>Ie.length?(d.isBuffer(Ve)||(Ve=d.from(Ve)),Ve.copy(Ie,He)):Uint8Array.prototype.set.call(Ie,Ve,He);else{if(!d.isBuffer(Ve))throw new TypeError('"list" argument must be an Array of Buffers');Ve.copy(Ie,He)}He+=Ve.length}return Ie},d.byteLength=L,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var fe=this.length;if(fe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ge=0;ge<fe;ge+=2)P(this,ge,ge+1);return this},d.prototype.swap32=function(){var fe=this.length;if(fe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ge=0;ge<fe;ge+=4)P(this,ge,ge+3),P(this,ge+1,ge+2);return this},d.prototype.swap64=function(){var fe=this.length;if(fe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ge=0;ge<fe;ge+=8)P(this,ge,ge+7),P(this,ge+1,ge+6),P(this,ge+2,ge+5),P(this,ge+3,ge+4);return this},d.prototype.toString=function(){var fe=this.length;return 0===fe?"":0===arguments.length?J(this,0,fe):C.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(fe){if(!d.isBuffer(fe))throw new TypeError("Argument must be a Buffer");return this===fe||0===d.compare(this,fe)},d.prototype.inspect=function(){var fe="",ge=s.h2;return fe=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(fe+=" ... "),"<Buffer "+fe+">"},v&&(d.prototype[v]=d.prototype.inspect),d.prototype.compare=function(fe,ge,be,Ie,He){if(ye(fe,Uint8Array)&&(fe=d.from(fe,fe.offset,fe.byteLength)),!d.isBuffer(fe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+h(fe));if(void 0===ge&&(ge=0),void 0===be&&(be=fe?fe.length:0),void 0===Ie&&(Ie=0),void 0===He&&(He=this.length),ge<0||be>fe.length||Ie<0||He>this.length)throw new RangeError("out of range index");if(Ie>=He&&ge>=be)return 0;if(Ie>=He)return-1;if(ge>=be)return 1;if(this===fe)return 0;for(var Ve=(He>>>=0)-(Ie>>>=0),tt=(be>>>=0)-(ge>>>=0),nt=Math.min(Ve,tt),st=this.slice(Ie,He),dt=fe.slice(ge,be),wt=0;wt<nt;++wt)if(st[wt]!==dt[wt]){Ve=st[wt],tt=dt[wt];break}return Ve<tt?-1:tt<Ve?1:0},d.prototype.includes=function(fe,ge,be){return-1!==this.indexOf(fe,ge,be)},d.prototype.indexOf=function(fe,ge,be){return z(this,fe,ge,be,!0)},d.prototype.lastIndexOf=function(fe,ge,be){return z(this,fe,ge,be,!1)},d.prototype.write=function(fe,ge,be,Ie){if(void 0===ge)Ie="utf8",be=this.length,ge=0;else if(void 0===be&&"string"==typeof ge)Ie=ge,be=this.length,ge=0;else{if(!isFinite(ge))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ge>>>=0,isFinite(be)?(be>>>=0,void 0===Ie&&(Ie="utf8")):(Ie=be,be=void 0)}var He=this.length-ge;if((void 0===be||be>He)&&(be=He),fe.length>0&&(be<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");for(var Ve=!1;;)switch(Ie){case"hex":return R(this,fe,ge,be);case"utf8":case"utf-8":return V(this,fe,ge,be);case"ascii":case"latin1":case"binary":return D(this,fe,ge,be);case"base64":return B(this,fe,ge,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,fe,ge,be);default:if(Ve)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),Ve=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Y=4096;function q(fe,ge,be){var Ie="";be=Math.min(fe.length,be);for(var He=ge;He<be;++He)Ie+=String.fromCharCode(127&fe[He]);return Ie}function H(fe,ge,be){var Ie="";be=Math.min(fe.length,be);for(var He=ge;He<be;++He)Ie+=String.fromCharCode(fe[He]);return Ie}function X(fe,ge,be){var Ie=fe.length;(!ge||ge<0)&&(ge=0),(!be||be<0||be>Ie)&&(be=Ie);for(var He="",Ve=ge;Ve<be;++Ve)He+=Re[fe[Ve]];return He}function Q(fe,ge,be){for(var Ie=fe.slice(ge,be),He="",Ve=0;Ve<Ie.length-1;Ve+=2)He+=String.fromCharCode(Ie[Ve]+256*Ie[Ve+1]);return He}function ne(fe,ge,be){if(fe%1!=0||fe<0)throw new RangeError("offset is not uint");if(fe+ge>be)throw new RangeError("Trying to access beyond buffer length")}function re(fe,ge,be,Ie,He,Ve){if(!d.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ge>He||ge<Ve)throw new RangeError('"value" argument is out of bounds');if(be+Ie>fe.length)throw new RangeError("Index out of range")}function ae(fe,ge,be,Ie,He){de(ge,Ie,He,fe,be,7);var Ve=Number(ge&BigInt(4294967295));fe[be++]=Ve,fe[be++]=Ve>>=8,fe[be++]=Ve>>=8,fe[be++]=Ve>>=8;var tt=Number(ge>>BigInt(32)&BigInt(4294967295));return fe[be++]=tt,fe[be++]=tt>>=8,fe[be++]=tt>>=8,fe[be++]=tt>>=8,be}function se(fe,ge,be,Ie,He){de(ge,Ie,He,fe,be,7);var Ve=Number(ge&BigInt(4294967295));fe[be+7]=Ve,fe[be+6]=Ve>>=8,fe[be+5]=Ve>>=8,fe[be+4]=Ve>>=8;var tt=Number(ge>>BigInt(32)&BigInt(4294967295));return fe[be+3]=tt,fe[be+2]=tt>>=8,fe[be+1]=tt>>=8,fe[be]=tt>>=8,be+8}function pe(fe,ge,be,Ie,He,Ve){if(be+Ie>fe.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("Index out of range")}function ke(fe,ge,be,Ie,He){return ge=+ge,be>>>=0,He||pe(fe,0,be,4),b.write(fe,ge,be,Ie,23,4),be+4}function me(fe,ge,be,Ie,He){return ge=+ge,be>>>=0,He||pe(fe,0,be,8),b.write(fe,ge,be,Ie,52,8),be+8}d.prototype.slice=function(fe,ge){var be=this.length;(fe=~~fe)<0?(fe+=be)<0&&(fe=0):fe>be&&(fe=be),(ge=void 0===ge?be:~~ge)<0?(ge+=be)<0&&(ge=0):ge>be&&(ge=be),ge<fe&&(ge=fe);var Ie=this.subarray(fe,ge);return Object.setPrototypeOf(Ie,d.prototype),Ie},d.prototype.readUintLE=d.prototype.readUIntLE=function(fe,ge,be){fe>>>=0,ge>>>=0,be||ne(fe,ge,this.length);for(var Ie=this[fe],He=1,Ve=0;++Ve<ge&&(He*=256);)Ie+=this[fe+Ve]*He;return Ie},d.prototype.readUintBE=d.prototype.readUIntBE=function(fe,ge,be){fe>>>=0,ge>>>=0,be||ne(fe,ge,this.length);for(var Ie=this[fe+--ge],He=1;ge>0&&(He*=256);)Ie+=this[fe+--ge]*He;return Ie},d.prototype.readUint8=d.prototype.readUInt8=function(fe,ge){return fe>>>=0,ge||ne(fe,1,this.length),this[fe]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(fe,ge){return fe>>>=0,ge||ne(fe,2,this.length),this[fe]|this[fe+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(fe,ge){return fe>>>=0,ge||ne(fe,2,this.length),this[fe]<<8|this[fe+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(fe,ge){return fe>>>=0,ge||ne(fe,4,this.length),(this[fe]|this[fe+1]<<8|this[fe+2]<<16)+16777216*this[fe+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(fe,ge){return fe>>>=0,ge||ne(fe,4,this.length),16777216*this[fe]+(this[fe+1]<<16|this[fe+2]<<8|this[fe+3])},d.prototype.readBigUInt64LE=Pe(function(fe){xe(fe>>>=0,"offset");var ge=this[fe],be=this[fe+7];void 0!==ge&&void 0!==be||Te(fe,this.length-8);var Ie=ge+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,24),He=this[++fe]+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+be*Math.pow(2,24);return BigInt(Ie)+(BigInt(He)<<BigInt(32))}),d.prototype.readBigUInt64BE=Pe(function(fe){xe(fe>>>=0,"offset");var ge=this[fe],be=this[fe+7];void 0!==ge&&void 0!==be||Te(fe,this.length-8);var Ie=ge*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+this[++fe],He=this[++fe]*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+be;return(BigInt(Ie)<<BigInt(32))+BigInt(He)}),d.prototype.readIntLE=function(fe,ge,be){fe>>>=0,ge>>>=0,be||ne(fe,ge,this.length);for(var Ie=this[fe],He=1,Ve=0;++Ve<ge&&(He*=256);)Ie+=this[fe+Ve]*He;return Ie>=(He*=128)&&(Ie-=Math.pow(2,8*ge)),Ie},d.prototype.readIntBE=function(fe,ge,be){fe>>>=0,ge>>>=0,be||ne(fe,ge,this.length);for(var Ie=ge,He=1,Ve=this[fe+--Ie];Ie>0&&(He*=256);)Ve+=this[fe+--Ie]*He;return Ve>=(He*=128)&&(Ve-=Math.pow(2,8*ge)),Ve},d.prototype.readInt8=function(fe,ge){return fe>>>=0,ge||ne(fe,1,this.length),128&this[fe]?-1*(255-this[fe]+1):this[fe]},d.prototype.readInt16LE=function(fe,ge){fe>>>=0,ge||ne(fe,2,this.length);var be=this[fe]|this[fe+1]<<8;return 32768&be?4294901760|be:be},d.prototype.readInt16BE=function(fe,ge){fe>>>=0,ge||ne(fe,2,this.length);var be=this[fe+1]|this[fe]<<8;return 32768&be?4294901760|be:be},d.prototype.readInt32LE=function(fe,ge){return fe>>>=0,ge||ne(fe,4,this.length),this[fe]|this[fe+1]<<8|this[fe+2]<<16|this[fe+3]<<24},d.prototype.readInt32BE=function(fe,ge){return fe>>>=0,ge||ne(fe,4,this.length),this[fe]<<24|this[fe+1]<<16|this[fe+2]<<8|this[fe+3]},d.prototype.readBigInt64LE=Pe(function(fe){xe(fe>>>=0,"offset");var ge=this[fe],be=this[fe+7];void 0!==ge&&void 0!==be||Te(fe,this.length-8);var Ie=this[fe+4]+this[fe+5]*Math.pow(2,8)+this[fe+6]*Math.pow(2,16)+(be<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(ge+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,24))}),d.prototype.readBigInt64BE=Pe(function(fe){xe(fe>>>=0,"offset");var ge=this[fe],be=this[fe+7];void 0!==ge&&void 0!==be||Te(fe,this.length-8);var Ie=(ge<<24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+this[++fe];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++fe]*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+be)}),d.prototype.readFloatLE=function(fe,ge){return fe>>>=0,ge||ne(fe,4,this.length),b.read(this,fe,!0,23,4)},d.prototype.readFloatBE=function(fe,ge){return fe>>>=0,ge||ne(fe,4,this.length),b.read(this,fe,!1,23,4)},d.prototype.readDoubleLE=function(fe,ge){return fe>>>=0,ge||ne(fe,8,this.length),b.read(this,fe,!0,52,8)},d.prototype.readDoubleBE=function(fe,ge){return fe>>>=0,ge||ne(fe,8,this.length),b.read(this,fe,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(fe,ge,be,Ie){fe=+fe,ge>>>=0,be>>>=0,Ie||re(this,fe,ge,be,Math.pow(2,8*be)-1,0);var He=1,Ve=0;for(this[ge]=255&fe;++Ve<be&&(He*=256);)this[ge+Ve]=fe/He&255;return ge+be},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(fe,ge,be,Ie){fe=+fe,ge>>>=0,be>>>=0,Ie||re(this,fe,ge,be,Math.pow(2,8*be)-1,0);var He=be-1,Ve=1;for(this[ge+He]=255&fe;--He>=0&&(Ve*=256);)this[ge+He]=fe/Ve&255;return ge+be},d.prototype.writeUint8=d.prototype.writeUInt8=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,1,255,0),this[ge]=255&fe,ge+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,2,65535,0),this[ge]=255&fe,this[ge+1]=fe>>>8,ge+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,2,65535,0),this[ge]=fe>>>8,this[ge+1]=255&fe,ge+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,4,4294967295,0),this[ge+3]=fe>>>24,this[ge+2]=fe>>>16,this[ge+1]=fe>>>8,this[ge]=255&fe,ge+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,4,4294967295,0),this[ge]=fe>>>24,this[ge+1]=fe>>>16,this[ge+2]=fe>>>8,this[ge+3]=255&fe,ge+4},d.prototype.writeBigUInt64LE=Pe(function(fe){return ae(this,fe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Pe(function(fe){return se(this,fe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(fe,ge,be,Ie){if(fe=+fe,ge>>>=0,!Ie){var He=Math.pow(2,8*be-1);re(this,fe,ge,be,He-1,-He)}var Ve=0,tt=1,nt=0;for(this[ge]=255&fe;++Ve<be&&(tt*=256);)fe<0&&0===nt&&0!==this[ge+Ve-1]&&(nt=1),this[ge+Ve]=(fe/tt>>0)-nt&255;return ge+be},d.prototype.writeIntBE=function(fe,ge,be,Ie){if(fe=+fe,ge>>>=0,!Ie){var He=Math.pow(2,8*be-1);re(this,fe,ge,be,He-1,-He)}var Ve=be-1,tt=1,nt=0;for(this[ge+Ve]=255&fe;--Ve>=0&&(tt*=256);)fe<0&&0===nt&&0!==this[ge+Ve+1]&&(nt=1),this[ge+Ve]=(fe/tt>>0)-nt&255;return ge+be},d.prototype.writeInt8=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,1,127,-128),fe<0&&(fe=255+fe+1),this[ge]=255&fe,ge+1},d.prototype.writeInt16LE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,2,32767,-32768),this[ge]=255&fe,this[ge+1]=fe>>>8,ge+2},d.prototype.writeInt16BE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,2,32767,-32768),this[ge]=fe>>>8,this[ge+1]=255&fe,ge+2},d.prototype.writeInt32LE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,4,2147483647,-2147483648),this[ge]=255&fe,this[ge+1]=fe>>>8,this[ge+2]=fe>>>16,this[ge+3]=fe>>>24,ge+4},d.prototype.writeInt32BE=function(fe,ge,be){return fe=+fe,ge>>>=0,be||re(this,fe,ge,4,2147483647,-2147483648),fe<0&&(fe=4294967295+fe+1),this[ge]=fe>>>24,this[ge+1]=fe>>>16,this[ge+2]=fe>>>8,this[ge+3]=255&fe,ge+4},d.prototype.writeBigInt64LE=Pe(function(fe){return ae(this,fe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Pe(function(fe){return se(this,fe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(fe,ge,be){return ke(this,fe,ge,!0,be)},d.prototype.writeFloatBE=function(fe,ge,be){return ke(this,fe,ge,!1,be)},d.prototype.writeDoubleLE=function(fe,ge,be){return me(this,fe,ge,!0,be)},d.prototype.writeDoubleBE=function(fe,ge,be){return me(this,fe,ge,!1,be)},d.prototype.copy=function(fe,ge,be,Ie){if(!d.isBuffer(fe))throw new TypeError("argument should be a Buffer");if(be||(be=0),Ie||0===Ie||(Ie=this.length),ge>=fe.length&&(ge=fe.length),ge||(ge=0),Ie>0&&Ie<be&&(Ie=be),Ie===be||0===fe.length||0===this.length)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),fe.length-ge<Ie-be&&(Ie=fe.length-ge+be);var He=Ie-be;return this===fe&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ge,be,Ie):Uint8Array.prototype.set.call(fe,this.subarray(be,Ie),ge),He},d.prototype.fill=function(fe,ge,be,Ie){if("string"==typeof fe){if("string"==typeof ge?(Ie=ge,ge=0,be=this.length):"string"==typeof be&&(Ie=be,be=this.length),void 0!==Ie&&"string"!=typeof Ie)throw new TypeError("encoding must be a string");if("string"==typeof Ie&&!d.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(1===fe.length){var He=fe.charCodeAt(0);("utf8"===Ie&&He<128||"latin1"===Ie)&&(fe=He)}}else"number"==typeof fe?fe&=255:"boolean"==typeof fe&&(fe=Number(fe));if(ge<0||this.length<ge||this.length<be)throw new RangeError("Out of range index");if(be<=ge)return this;var Ve;if(ge>>>=0,be=void 0===be?this.length:be>>>0,fe||(fe=0),"number"==typeof fe)for(Ve=ge;Ve<be;++Ve)this[Ve]=fe;else{var tt=d.isBuffer(fe)?fe:d.from(fe,Ie),nt=tt.length;if(0===nt)throw new TypeError('The value "'+fe+'" is invalid for argument "value"');for(Ve=0;Ve<be-ge;++Ve)this[Ve+ge]=tt[Ve%nt]}return this};var le={};function ue(fe,ge,be){le[fe]=function(Ie){!function(wt,_t){if("function"!=typeof _t&&null!==_t)throw new TypeError("Super expression must either be null or a function");wt.prototype=Object.create(_t&&_t.prototype,{constructor:{value:wt,writable:!0,configurable:!0}}),Object.defineProperty(wt,"prototype",{writable:!1}),_t&&n(wt,_t)}(dt,Ie);var He,Ve,tt,nt,st=(tt=dt,nt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var wt,_t=c(tt);if(nt){var pt=c(this).constructor;wt=Reflect.construct(_t,arguments,pt)}else wt=_t.apply(this,arguments);return a(this,wt)});function dt(){var wt;return o(this,dt),wt=st.call(this),Object.defineProperty(i(wt),"message",{value:ge.apply(i(wt),arguments),writable:!0,configurable:!0}),wt.name="".concat(wt.name," [").concat(fe,"]"),delete wt.name,wt}return He=dt,(Ve=[{key:"code",get:function(){return fe},set:function(wt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:wt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(fe,"]: ").concat(this.message)}}])&&function r(fe,ge){for(var be=0;be<ge.length;be++){var Ie=ge[be];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(fe,Ie.key,Ie)}}(He.prototype,Ve),Object.defineProperty(He,"prototype",{writable:!1}),dt}(be)}function Ee(fe){for(var ge="",be=fe.length,Ie="-"===fe[0]?1:0;be>=Ie+4;be-=3)ge="_".concat(fe.slice(be-3,be)).concat(ge);return"".concat(fe.slice(0,be)).concat(ge)}function de(fe,ge,be,Ie,He,Ve){if(fe>be||fe<ge){var tt,nt="bigint"==typeof ge?"n":"";throw tt=Ve>3?0===ge||ge===BigInt(0)?">= 0".concat(nt," and < 2").concat(nt," ** ").concat(8*(Ve+1)).concat(nt):">= -(2".concat(nt," ** ").concat(8*(Ve+1)-1).concat(nt,") and < 2 ** ")+"".concat(8*(Ve+1)-1).concat(nt):">= ".concat(ge).concat(nt," and <= ").concat(be).concat(nt),new le.ERR_OUT_OF_RANGE("value",tt,fe)}var st,dt,wt;st=Ie,wt=Ve,xe(dt=He,"offset"),void 0!==st[dt]&&void 0!==st[dt+wt]||Te(dt,st.length-(wt+1))}function xe(fe,ge){if("number"!=typeof fe)throw new le.ERR_INVALID_ARG_TYPE(ge,"number",fe)}function Te(fe,ge,be){throw Math.floor(fe)!==fe?(xe(fe,be),new le.ERR_OUT_OF_RANGE(be||"offset","an integer",fe)):ge<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(be||"offset",">= ".concat(be?1:0," and <= ").concat(ge),fe)}ue("ERR_BUFFER_OUT_OF_BOUNDS",function(fe){return fe?"".concat(fe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ue("ERR_INVALID_ARG_TYPE",function(fe,ge){return'The "'.concat(fe,'" argument must be of type number. Received type ').concat(h(ge))},TypeError),ue("ERR_OUT_OF_RANGE",function(fe,ge,be){var Ie='The value of "'.concat(fe,'" is out of range.'),He=be;return Number.isInteger(be)&&Math.abs(be)>Math.pow(2,32)?He=Ee(String(be)):"bigint"==typeof be&&(He=String(be),(be>Math.pow(BigInt(2),BigInt(32))||be<-Math.pow(BigInt(2),BigInt(32)))&&(He=Ee(He)),He+="n"),Ie+" It must be ".concat(ge,". Received ").concat(He)},RangeError);var we=/[^+/0-9A-Za-z-_]/g;function K(fe,ge){var be;ge=ge||1/0;for(var Ie=fe.length,He=null,Ve=[],tt=0;tt<Ie;++tt){if((be=fe.charCodeAt(tt))>55295&&be<57344){if(!He){if(be>56319){(ge-=3)>-1&&Ve.push(239,191,189);continue}if(tt+1===Ie){(ge-=3)>-1&&Ve.push(239,191,189);continue}He=be;continue}if(be<56320){(ge-=3)>-1&&Ve.push(239,191,189),He=be;continue}be=65536+(He-55296<<10|be-56320)}else He&&(ge-=3)>-1&&Ve.push(239,191,189);if(He=null,be<128){if((ge-=1)<0)break;Ve.push(be)}else if(be<2048){if((ge-=2)<0)break;Ve.push(be>>6|192,63&be|128)}else if(be<65536){if((ge-=3)<0)break;Ve.push(be>>12|224,be>>6&63|128,63&be|128)}else{if(!(be<1114112))throw new Error("Invalid code point");if((ge-=4)<0)break;Ve.push(be>>18|240,be>>12&63|128,be>>6&63|128,63&be|128)}}return Ve}function oe(fe){return f.toByteArray(function(ge){if((ge=(ge=ge.split("=")[0]).trim().replace(we,"")).length<2)return"";for(;ge.length%4!=0;)ge+="=";return ge}(fe))}function he(fe,ge,be,Ie){var He;for(He=0;He<Ie&&!(He+be>=ge.length||He>=fe.length);++He)ge[He+be]=fe[He];return He}function ye(fe,ge){return fe instanceof ge||null!=fe&&null!=fe.constructor&&null!=fe.constructor.name&&fe.constructor.name===ge.name}function Me(fe){return fe!=fe}var Re=function(){for(var fe="0123456789abcdef",ge=new Array(256),be=0;be<16;++be)for(var Ie=16*be,He=0;He<16;++He)ge[Ie+He]=fe[be]+fe[He];return ge}();function Pe(fe){return typeof BigInt>"u"?De:fe}function De(){throw new Error("BigInt not supported")}},2321:function(p){"use strict";p.exports=r,p.exports.isMobile=r,p.exports.default=r;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,o=/android|ipad|playbook|silk/i;function r(n){n||(n={});var a=n.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&"string"==typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]),"string"!=typeof a)return!1;var i=s.test(a)&&!e.test(a)||!!n.tablet&&o.test(a);return!i&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(i=!0),i}},3910:function(p,s){"use strict";s.byteLength=function(f){var b=c(f),g=b[1];return 3*(b[0]+g)/4-g},s.toByteArray=function(f){var b,v,E,g=c(f),y=g[0],d=g[1],m=new r(3*(y+(E=d))/4-E),w=0,u=d>0?y-4:y;for(v=0;v<u;v+=4)b=o[f.charCodeAt(v)]<<18|o[f.charCodeAt(v+1)]<<12|o[f.charCodeAt(v+2)]<<6|o[f.charCodeAt(v+3)],m[w++]=b>>16&255,m[w++]=b>>8&255,m[w++]=255&b;return 2===d&&(b=o[f.charCodeAt(v)]<<2|o[f.charCodeAt(v+1)]>>4,m[w++]=255&b),1===d&&(b=o[f.charCodeAt(v)]<<10|o[f.charCodeAt(v+1)]<<4|o[f.charCodeAt(v+2)]>>2,m[w++]=b>>8&255,m[w++]=255&b),m},s.fromByteArray=function(f){for(var b,v=f.length,g=v%3,y=[],d=16383,m=0,w=v-g;m<w;m+=d)y.push(h(f,m,m+d>w?w:m+d));return 1===g?y.push(e[(b=f[v-1])>>2]+e[b<<4&63]+"=="):2===g&&y.push(e[(b=(f[v-2]<<8)+f[v-1])>>10]+e[b>>4&63]+e[b<<2&63]+"="),y.join("")};for(var e=[],o=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=n.length;a<i;++a)e[a]=n[a],o[n.charCodeAt(a)]=a;function c(f){var b=f.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=f.indexOf("=");return-1===v&&(v=b),[v,v===b?0:4-v%4]}function h(f,b,v){for(var y,d=[],m=b;m<v;m+=3)d.push(e[(y=(f[m]<<16&16711680)+(f[m+1]<<8&65280)+(255&f[m+2]))>>18&63]+e[y>>12&63]+e[y>>6&63]+e[63&y]);return d.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},3187:function(p,s){s.read=function(e,o,r,n,a){var i,c,h=8*a-n-1,f=(1<<h)-1,b=f>>1,v=-7,g=r?a-1:0,y=r?-1:1,d=e[o+g];for(g+=y,i=d&(1<<-v)-1,d>>=-v,v+=h;v>0;i=256*i+e[o+g],g+=y,v-=8);for(c=i&(1<<-v)-1,i>>=-v,v+=n;v>0;c=256*c+e[o+g],g+=y,v-=8);if(0===i)i=1-b;else{if(i===f)return c?NaN:1/0*(d?-1:1);c+=Math.pow(2,n),i-=b}return(d?-1:1)*c*Math.pow(2,i-n)},s.write=function(e,o,r,n,a,i){var c,h,f,b=8*i-a-1,v=(1<<b)-1,g=v>>1,y=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,m=n?1:-1,w=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(h=isNaN(o)?1:0,c=v):(c=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-c))<1&&(c--,f*=2),(o+=c+g>=1?y/f:y*Math.pow(2,1-g))*f>=2&&(c++,f/=2),c+g>=v?(h=0,c=v):c+g>=1?(h=(o*f-1)*Math.pow(2,a),c+=g):(h=o*Math.pow(2,g-1)*Math.pow(2,a),c=0));a>=8;e[r+d]=255&h,d+=m,h/=256,a-=8);for(c=c<<a|h,b+=a;b>0;e[r+d]=255&c,d+=m,c/=256,b-=8);e[r+d-m]|=128*w}},1152:function(p,s,e){"use strict";p.exports=function(c){var h=(c=c||{}).eye||[0,0,1],f=c.center||[0,0,0],b=c.up||[0,1,0],v=c.distanceLimits||[0,1/0],g=c.mode||"turntable",y=o(),d=r(),m=n();return y.setDistanceLimits(v[0],v[1]),y.lookAt(0,h,f,b),d.setDistanceLimits(v[0],v[1]),d.lookAt(0,h,f,b),m.setDistanceLimits(v[0],v[1]),m.lookAt(0,h,f,b),new a({turntable:y,orbit:d,matrix:m},g)};var o=e(3440),r=e(7774),n=e(9298);function a(c,h){this._controllerNames=Object.keys(c),this._controllerList=this._controllerNames.map(function(f){return c[f]}),this._mode=h,this._active=c[h],this._active||(this._mode="turntable",this._active=c.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=a.prototype;i.flush=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].flush(c)},i.idle=function(c){for(var h=this._controllerList,f=0;f<h.length;++f)h[f].idle(c)},i.lookAt=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].lookAt(c,h,f,b)},i.rotate=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].rotate(c,h,f,b)},i.pan=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].pan(c,h,f,b)},i.translate=function(c,h,f,b){for(var v=this._controllerList,g=0;g<v.length;++g)v[g].translate(c,h,f,b)},i.setMatrix=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setMatrix(c,h)},i.setDistanceLimits=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistanceLimits(c,h)},i.setDistance=function(c,h){for(var f=this._controllerList,b=0;b<f.length;++b)f[b].setDistance(c,h)},i.recalcMatrix=function(c){this._active.recalcMatrix(c)},i.getDistance=function(c){return this._active.getDistance(c)},i.getDistanceLimits=function(c){return this._active.getDistanceLimits(c)},i.lastT=function(){return this._active.lastT()},i.setMode=function(c){if(c!==this._mode){var h=this._controllerNames.indexOf(c);if(!(h<0)){var f=this._active,b=this._controllerList[h],v=Math.max(f.lastT(),b.lastT());f.recalcMatrix(v),b.setMatrix(v,f.computedMatrix),this._active=b,this._mode=c,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},8126:function(p,s,e){"use strict";var o=typeof WeakMap>"u"?e(5346):WeakMap,r=e(5827),n=e(2944),a=new o;p.exports=function(i){var c=a.get(i),h=c&&(c._triangleBuffer.handle||c._triangleBuffer.buffer);if(!h||!i.isBuffer(h)){var f=r(i,new Float32Array([-1,-1,-1,4,4,-1]));(c=n(i,[{buffer:f,type:i.FLOAT,size:2}]))._triangleBuffer=f,a.set(i,c)}c.bind(),i.drawArrays(i.TRIANGLES,0,3),c.unbind()}},8008:function(p,s,e){var o=e(4930);p.exports=function(r,n,a){n="number"==typeof n?n:1,a=a||": ";var i=r.split(/\r?\n/),c=String(i.length+n-1).length;return i.map(function(h,f){var b=f+n,v=String(b).length;return o(b,c-v)+a+h}).join("\n")}},2153:function(p,s,e){"use strict";p.exports=function(n){var a=n.length;if(0===a)return[];if(1===a)return[0];for(var i=n[0].length,c=[n[0]],h=[0],f=1;f<a;++f)if(c.push(n[f]),r(c,i)){if(h.push(f),h.length===i+1)return h}else c.pop();return h};var o=e(417);function r(n,a){for(var i=new Array(a+1),c=0;c<n.length;++c)i[c]=n[c];for(c=0;c<=n.length;++c){for(var h=n.length;h<=a;++h){for(var f=new Array(a),b=0;b<a;++b)f[b]=Math.pow(h+1-c,b);i[h]=f}if(o.apply(void 0,i))return!0}return!1}},4653:function(p,s,e){"use strict";p.exports=function(n,a){return o(a).filter(function(i){for(var c=new Array(i.length),h=0;h<i.length;++h)c[h]=a[i[h]];return r(c)*n<1})};var o=e(4419),r=e(1778)},2350:function(p,s,e){p.exports=function(n,a){return r(o(n,a))};var o=e(4653),r=e(8691)},7896:function(p){p.exports=function(s){return atob(s)}},957:function(p,s,e){"use strict";p.exports=function(n,a){for(var i=a.length,c=new Array(i+1),h=0;h<i;++h){for(var f=new Array(i+1),b=0;b<=i;++b)f[b]=n[b][h];c[h]=f}for(c[i]=new Array(i+1),h=0;h<=i;++h)c[i][h]=1;var v=new Array(i+1);for(h=0;h<i;++h)v[h]=a[h];v[i]=1;var g=o(c,v),y=r(g[i+1]);0===y&&(y=1);var d=new Array(i+1);for(h=0;h<=i;++h)d[h]=r(g[h])/y;return d};var o=e(6606);function r(n){for(var a=0,i=0;i<n.length;++i)a+=n[i];return a}},1539:function(p,s,e){"use strict";var o=e(8524);p.exports=function(r,n){return o(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(p){"use strict";p.exports=function(s,e){return s[0].mul(e[1]).cmp(e[0].mul(s[1]))}},9189:function(p,s,e){"use strict";var o=e(8524);p.exports=function(r,n){return o(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(p,s,e){"use strict";var o=e(234),r=e(3218),n=e(5514),a=e(2813),i=e(8524),c=e(9189);p.exports=function h(f,b){if(o(f))return b?c(f,h(b)):[f[0].clone(),f[1].clone()];var v,g,y=0;if(r(f))v=f.clone();else if("string"==typeof f)v=a(f);else{if(0===f)return[n(0),n(1)];if(f===Math.floor(f))v=n(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),y-=256;v=n(f)}}if(o(b))v.mul(b[1]),g=b[0].clone();else if(r(b))g=b.clone();else if("string"==typeof b)g=a(b);else if(b)if(b===Math.floor(b))g=n(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),y+=256;g=n(b)}else g=n(1);return y>0?v=v.ushln(y):y<0&&(g=g.ushln(-y)),i(v,g)}},234:function(p,s,e){"use strict";var o=e(3218);p.exports=function(r){return Array.isArray(r)&&2===r.length&&o(r[0])&&o(r[1])}},4275:function(p,s,e){"use strict";var o=e(1928);p.exports=function(r){return r.cmp(new o(0))}},9958:function(p,s,e){"use strict";var o=e(4275);p.exports=function(r){var n=r.length,a=r.words,i=0;if(1===n)i=a[0];else if(2===n)i=a[0]+67108864*a[1];else for(var c=0;c<n;c++)i+=a[c]*Math.pow(67108864,c);return o(r)*i}},1112:function(p,s,e){"use strict";var o=e(8362),r=e(2288).countTrailingZeros;p.exports=function(n){var a=r(o.lo(n));if(a<32)return a;var i=r(o.hi(n));return i>20?52:i+32}},3218:function(p,s,e){"use strict";e(1928),p.exports=function(o){return o&&"object"==typeof o&&Boolean(o.words)}},5514:function(p,s,e){"use strict";var o=e(1928),r=e(8362);p.exports=function(n){var a=r.exponent(n);return a<52?new o(n):new o(n*Math.pow(2,52-a)).ushln(a-52)}},8524:function(p,s,e){"use strict";var o=e(5514),r=e(4275);p.exports=function(n,a){var i=r(n),c=r(a);if(0===i)return[o(0),o(1)];if(0===c)return[o(0),o(0)];c<0&&(n=n.neg(),a=a.neg());var h=n.gcd(a);return h.cmpn(1)?[n.div(h),a.div(h)]:[n,a]}},2813:function(p,s,e){"use strict";var o=e(1928);p.exports=function(r){return new o(r)}},3962:function(p,s,e){"use strict";var o=e(8524);p.exports=function(r,n){return o(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(p,s,e){"use strict";var o=e(4275);p.exports=function(r){return o(r[0])*o(r[1])}},4354:function(p,s,e){"use strict";var o=e(8524);p.exports=function(r,n){return o(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(p,s,e){"use strict";var o=e(9958),r=e(1112);p.exports=function(n){var a=n[0],i=n[1];if(0===a.cmpn(0))return 0;var c=a.abs().divmod(i.abs()),f=o(c.div),b=c.mod,v=a.negative!==i.negative?-1:1;if(0===b.cmpn(0))return v*f;if(f){var g=r(f)+4,y=o(b.ushln(g).divRound(i));return v*(f+y*Math.pow(2,-g))}var d=i.bitLength()-b.bitLength()+53;return y=o(b.ushln(d).divRound(i)),d<1023?v*y*Math.pow(2,-d):v*(y*=Math.pow(2,-1023))*Math.pow(2,1023-d)}},5070:function(p){"use strict";function s(i,c,h,f,b){for(var v=b+1;f<=b;){var g=f+b>>>1,y=i[g];(void 0!==h?h(y,c):y-c)>=0?(v=g,b=g-1):f=g+1}return v}function e(i,c,h,f,b){for(var v=b+1;f<=b;){var g=f+b>>>1,y=i[g];(void 0!==h?h(y,c):y-c)>0?(v=g,b=g-1):f=g+1}return v}function o(i,c,h,f,b){for(var v=f-1;f<=b;){var g=f+b>>>1,y=i[g];(void 0!==h?h(y,c):y-c)<0?(v=g,f=g+1):b=g-1}return v}function r(i,c,h,f,b){for(var v=f-1;f<=b;){var g=f+b>>>1,y=i[g];(void 0!==h?h(y,c):y-c)<=0?(v=g,f=g+1):b=g-1}return v}function n(i,c,h,f,b){for(;f<=b;){var v=f+b>>>1,g=i[v],y=void 0!==h?h(g,c):g-c;if(0===y)return v;y<=0?f=v+1:b=v-1}return-1}function a(i,c,h,f,b,v){return"function"==typeof h?v(i,c,h,void 0===f?0:0|f,void 0===b?i.length-1:0|b):v(i,c,void 0,void 0===h?0:0|h,void 0===f?i.length-1:0|f)}p.exports={ge:function(i,c,h,f,b){return a(i,c,h,f,b,s)},gt:function(i,c,h,f,b){return a(i,c,h,f,b,e)},lt:function(i,c,h,f,b){return a(i,c,h,f,b,o)},le:function(i,c,h,f,b){return a(i,c,h,f,b,r)},eq:function(i,c,h,f,b){return a(i,c,h,f,b,n)}}},2288:function(p,s){"use strict";function e(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=e,s.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>e(r)+1}},1928:function(p,s,e){!function(o,r){"use strict";function n(R,V){if(!R)throw new Error(V||"Assertion failed")}function a(R,V){R.super_=V;var D=function(){};D.prototype=V.prototype,R.prototype=new D,R.prototype.constructor=R}function i(R,V,D){if(i.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&("le"!==V&&"be"!==V||(D=V,V=10),this._init(R||0,V||10,D||"be"))}var c;"object"==typeof o?o.exports=i:r.BN=i,i.BN=i,i.wordSize=26;try{c=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:e(6601).Buffer}catch{}function h(R,V){var D=R.charCodeAt(V);return D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:D-48&15}function f(R,V,D){var B=h(R,D);return D-1>=V&&(B|=h(R,D-1)<<4),B}function b(R,V,D,B){for(var N=0,U=Math.min(R.length,D),J=V;J<U;J++){var Y=R.charCodeAt(J)-48;N*=B,N+=Y>=49?Y-49+10:Y>=17?Y-17+10:Y}return N}i.isBN=function(R){return R instanceof i||null!==R&&"object"==typeof R&&R.constructor.wordSize===i.wordSize&&Array.isArray(R.words)},i.max=function(R,V){return R.cmp(V)>0?R:V},i.min=function(R,V){return R.cmp(V)<0?R:V},i.prototype._init=function(R,V,D){if("number"==typeof R)return this._initNumber(R,V,D);if("object"==typeof R)return this._initArray(R,V,D);"hex"===V&&(V=16),n(V===(0|V)&&V>=2&&V<=36);var B=0;"-"===(R=R.toString().replace(/\s+/g,""))[0]&&(B++,this.negative=1),B<R.length&&(16===V?this._parseHex(R,B,D):(this._parseBase(R,V,B),"le"===D&&this._initArray(this.toArray(),V,D)))},i.prototype._initNumber=function(R,V,D){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(n(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),"le"===D&&this._initArray(this.toArray(),V,D)},i.prototype._initArray=function(R,V,D){if(n("number"==typeof R.length),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var N,U,J=0;if("be"===D)for(B=R.length-1,N=0;B>=0;B-=3)this.words[N]|=(U=R[B]|R[B-1]<<8|R[B-2]<<16)<<J&67108863,this.words[N+1]=U>>>26-J&67108863,(J+=24)>=26&&(J-=26,N++);else if("le"===D)for(B=0,N=0;B<R.length;B+=3)this.words[N]|=(U=R[B]|R[B+1]<<8|R[B+2]<<16)<<J&67108863,this.words[N+1]=U>>>26-J&67108863,(J+=24)>=26&&(J-=26,N++);return this.strip()},i.prototype._parseHex=function(R,V,D){this.length=Math.ceil((R.length-V)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var N,U=0,J=0;if("be"===D)for(B=R.length-1;B>=V;B-=2)N=f(R,V,B)<<U,this.words[J]|=67108863&N,U>=18?(U-=18,this.words[J+=1]|=N>>>26):U+=8;else for(B=(R.length-V)%2==0?V+1:V;B<R.length;B+=2)N=f(R,V,B)<<U,this.words[J]|=67108863&N,U>=18?(U-=18,this.words[J+=1]|=N>>>26):U+=8;this.strip()},i.prototype._parseBase=function(R,V,D){this.words=[0],this.length=1;for(var B=0,N=1;N<=67108863;N*=V)B++;B--,N=N/V|0;for(var U=R.length-D,J=U%B,Y=Math.min(U,U-J)+D,q=0,H=D;H<Y;H+=B)q=b(R,H,H+B,V),this.imuln(N),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(0!==J){var X=1;for(q=b(R,H,R.length,V),H=0;H<J;H++)X*=V;this.imuln(X),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this.strip()},i.prototype.copy=function(R){R.words=new Array(this.length);for(var V=0;V<this.length;V++)R.words[V]=this.words[V];R.length=this.length,R.negative=this.negative,R.red=this.red},i.prototype.clone=function(){var R=new i(null);return this.copy(R),R},i.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(R,V,D){D.negative=V.negative^R.negative;var B=R.length+V.length|0;D.length=B,B=B-1|0;var N=0|R.words[0],U=0|V.words[0],J=N*U,q=J/67108864|0;D.words[0]=67108863&J;for(var H=1;H<B;H++){for(var X=q>>>26,Q=67108863&q,ne=Math.min(H,V.length-1),re=Math.max(0,H-R.length+1);re<=ne;re++)X+=(J=(N=0|R.words[H-re|0])*(U=0|V.words[re])+Q)/67108864|0,Q=67108863&J;D.words[H]=0|Q,q=0|X}return 0!==q?D.words[H]=0|q:D.length--,D.strip()}i.prototype.toString=function(R,V){var D;if(V=0|V||1,16===(R=R||10)||"hex"===R){D="";for(var B=0,N=0,U=0;U<this.length;U++){var J=this.words[U],Y=(16777215&(J<<B|N)).toString(16);D=0!=(N=J>>>24-B&16777215)||U!==this.length-1?v[6-Y.length]+Y+D:Y+D,(B+=2)>=26&&(B-=26,U--)}for(0!==N&&(D=N.toString(16)+D);D.length%V!=0;)D="0"+D;return 0!==this.negative&&(D="-"+D),D}if(R===(0|R)&&R>=2&&R<=36){var q=g[R],H=y[R];D="";var X=this.clone();for(X.negative=0;!X.isZero();){var Q=X.modn(H).toString(R);D=(X=X.idivn(H)).isZero()?Q+D:v[q-Q.length]+Q+D}for(this.isZero()&&(D="0"+D);D.length%V!=0;)D="0"+D;return 0!==this.negative&&(D="-"+D),D}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var R=this.words[0];return 2===this.length?R+=67108864*this.words[1]:3===this.length&&1===this.words[2]?R+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-R:R},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(R,V){return n(void 0!==c),this.toArrayLike(c,R,V)},i.prototype.toArray=function(R,V){return this.toArrayLike(Array,R,V)},i.prototype.toArrayLike=function(R,V,D){var B=this.byteLength(),N=D||Math.max(1,B);n(B<=N,"byte array longer than desired length"),n(N>0,"Requested array length <= 0"),this.strip();var U,J,Y="le"===V,q=new R(N),H=this.clone();if(Y){for(J=0;!H.isZero();J++)U=H.andln(255),H.iushrn(8),q[J]=U;for(;J<N;J++)q[J]=0}else{for(J=0;J<N-B;J++)q[J]=0;for(J=0;!H.isZero();J++)U=H.andln(255),H.iushrn(8),q[N-J-1]=U}return q},i.prototype._countBits=Math.clz32?function(R){return 32-Math.clz32(R)}:function(R){var V=R,D=0;return V>=4096&&(D+=13,V>>>=13),V>=64&&(D+=7,V>>>=7),V>=8&&(D+=4,V>>>=4),V>=2&&(D+=2,V>>>=2),D+V},i.prototype._zeroBits=function(R){if(0===R)return 26;var V=R,D=0;return!(8191&V)&&(D+=13,V>>>=13),!(127&V)&&(D+=7,V>>>=7),!(15&V)&&(D+=4,V>>>=4),!(3&V)&&(D+=2,V>>>=2),!(1&V)&&D++,D},i.prototype.bitLength=function(){var V=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+V},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,V=0;V<this.length;V++){var D=this._zeroBits(this.words[V]);if(R+=D,26!==D)break}return R},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(R){return 0!==this.negative?this.abs().inotn(R).iaddn(1):this.clone()},i.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var V=0;V<R.length;V++)this.words[V]=this.words[V]|R.words[V];return this.strip()},i.prototype.ior=function(R){return n(0==(this.negative|R.negative)),this.iuor(R)},i.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},i.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},i.prototype.iuand=function(R){var V;V=this.length>R.length?R:this;for(var D=0;D<V.length;D++)this.words[D]=this.words[D]&R.words[D];return this.length=V.length,this.strip()},i.prototype.iand=function(R){return n(0==(this.negative|R.negative)),this.iuand(R)},i.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},i.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},i.prototype.iuxor=function(R){var V,D;this.length>R.length?(V=this,D=R):(V=R,D=this);for(var B=0;B<D.length;B++)this.words[B]=V.words[B]^D.words[B];if(this!==V)for(;B<V.length;B++)this.words[B]=V.words[B];return this.length=V.length,this.strip()},i.prototype.ixor=function(R){return n(0==(this.negative|R.negative)),this.iuxor(R)},i.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},i.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},i.prototype.inotn=function(R){n("number"==typeof R&&R>=0);var V=0|Math.ceil(R/26),D=R%26;this._expand(V),D>0&&V--;for(var B=0;B<V;B++)this.words[B]=67108863&~this.words[B];return D>0&&(this.words[B]=~this.words[B]&67108863>>26-D),this.strip()},i.prototype.notn=function(R){return this.clone().inotn(R)},i.prototype.setn=function(R,V){n("number"==typeof R&&R>=0);var D=R/26|0,B=R%26;return this._expand(D+1),this.words[D]=V?this.words[D]|1<<B:this.words[D]&~(1<<B),this.strip()},i.prototype.iadd=function(R){var V,D,B;if(0!==this.negative&&0===R.negative)return this.negative=0,V=this.isub(R),this.negative^=1,this._normSign();if(0===this.negative&&0!==R.negative)return R.negative=0,V=this.isub(R),R.negative=1,V._normSign();this.length>R.length?(D=this,B=R):(D=R,B=this);for(var N=0,U=0;U<B.length;U++)this.words[U]=67108863&(V=(0|D.words[U])+(0|B.words[U])+N),N=V>>>26;for(;0!==N&&U<D.length;U++)this.words[U]=67108863&(V=(0|D.words[U])+N),N=V>>>26;if(this.length=D.length,0!==N)this.words[this.length]=N,this.length++;else if(D!==this)for(;U<D.length;U++)this.words[U]=D.words[U];return this},i.prototype.add=function(R){var V;return 0!==R.negative&&0===this.negative?(R.negative=0,V=this.sub(R),R.negative^=1,V):0===R.negative&&0!==this.negative?(this.negative=0,V=R.sub(this),this.negative=1,V):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},i.prototype.isub=function(R){if(0!==R.negative){R.negative=0;var V=this.iadd(R);return R.negative=1,V._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var D,B,N=this.cmp(R);if(0===N)return this.negative=0,this.length=1,this.words[0]=0,this;N>0?(D=this,B=R):(D=R,B=this);for(var U=0,J=0;J<B.length;J++)U=(V=(0|D.words[J])-(0|B.words[J])+U)>>26,this.words[J]=67108863&V;for(;0!==U&&J<D.length;J++)U=(V=(0|D.words[J])+U)>>26,this.words[J]=67108863&V;if(0===U&&J<D.length&&D!==this)for(;J<D.length;J++)this.words[J]=D.words[J];return this.length=Math.max(this.length,J),D!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(R){return this.clone().isub(R)};var m=function(R,V,D){var B,N,U,J=R.words,Y=V.words,q=D.words,H=0,X=0|J[0],Q=8191&X,ne=X>>>13,re=0|J[1],ae=8191&re,se=re>>>13,pe=0|J[2],ke=8191&pe,me=pe>>>13,le=0|J[3],ue=8191&le,Ee=le>>>13,de=0|J[4],xe=8191&de,Te=de>>>13,we=0|J[5],K=8191&we,oe=we>>>13,he=0|J[6],ye=8191&he,Me=he>>>13,Re=0|J[7],Pe=8191&Re,De=Re>>>13,fe=0|J[8],ge=8191&fe,be=fe>>>13,Ie=0|J[9],He=8191&Ie,Ve=Ie>>>13,tt=0|Y[0],nt=8191&tt,st=tt>>>13,dt=0|Y[1],wt=8191&dt,_t=dt>>>13,pt=0|Y[2],Pt=8191&pt,St=pt>>>13,Ot=0|Y[3],jt=8191&Ot,Dt=Ot>>>13,Ye=0|Y[4],Ze=8191&Ye,Ne=Ye>>>13,Je=0|Y[5],at=8191&Je,Se=Je>>>13,ze=0|Y[6],Ke=8191&ze,it=ze>>>13,ct=0|Y[7],mt=8191&ct,Lt=ct>>>13,At=0|Y[8],ht=8191&At,Et=At>>>13,gt=0|Y[9],kt=8191&gt,It=gt>>>13;D.negative=R.negative^V.negative,D.length=19;var Ut=(H+(B=Math.imul(Q,nt))|0)+((8191&(N=(N=Math.imul(Q,st))+Math.imul(ne,nt)|0))<<13)|0;H=((U=Math.imul(ne,st))+(N>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,B=Math.imul(ae,nt),N=(N=Math.imul(ae,st))+Math.imul(se,nt)|0,U=Math.imul(se,st);var Nt=(H+(B=B+Math.imul(Q,wt)|0)|0)+((8191&(N=(N=N+Math.imul(Q,_t)|0)+Math.imul(ne,wt)|0))<<13)|0;H=((U=U+Math.imul(ne,_t)|0)+(N>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,B=Math.imul(ke,nt),N=(N=Math.imul(ke,st))+Math.imul(me,nt)|0,U=Math.imul(me,st),B=B+Math.imul(ae,wt)|0,N=(N=N+Math.imul(ae,_t)|0)+Math.imul(se,wt)|0,U=U+Math.imul(se,_t)|0;var qt=(H+(B=B+Math.imul(Q,Pt)|0)|0)+((8191&(N=(N=N+Math.imul(Q,St)|0)+Math.imul(ne,Pt)|0))<<13)|0;H=((U=U+Math.imul(ne,St)|0)+(N>>>13)|0)+(qt>>>26)|0,qt&=67108863,B=Math.imul(ue,nt),N=(N=Math.imul(ue,st))+Math.imul(Ee,nt)|0,U=Math.imul(Ee,st),B=B+Math.imul(ke,wt)|0,N=(N=N+Math.imul(ke,_t)|0)+Math.imul(me,wt)|0,U=U+Math.imul(me,_t)|0,B=B+Math.imul(ae,Pt)|0,N=(N=N+Math.imul(ae,St)|0)+Math.imul(se,Pt)|0,U=U+Math.imul(se,St)|0;var Xt=(H+(B=B+Math.imul(Q,jt)|0)|0)+((8191&(N=(N=N+Math.imul(Q,Dt)|0)+Math.imul(ne,jt)|0))<<13)|0;H=((U=U+Math.imul(ne,Dt)|0)+(N>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,B=Math.imul(xe,nt),N=(N=Math.imul(xe,st))+Math.imul(Te,nt)|0,U=Math.imul(Te,st),B=B+Math.imul(ue,wt)|0,N=(N=N+Math.imul(ue,_t)|0)+Math.imul(Ee,wt)|0,U=U+Math.imul(Ee,_t)|0,B=B+Math.imul(ke,Pt)|0,N=(N=N+Math.imul(ke,St)|0)+Math.imul(me,Pt)|0,U=U+Math.imul(me,St)|0,B=B+Math.imul(ae,jt)|0,N=(N=N+Math.imul(ae,Dt)|0)+Math.imul(se,jt)|0,U=U+Math.imul(se,Dt)|0;var Kt=(H+(B=B+Math.imul(Q,Ze)|0)|0)+((8191&(N=(N=N+Math.imul(Q,Ne)|0)+Math.imul(ne,Ze)|0))<<13)|0;H=((U=U+Math.imul(ne,Ne)|0)+(N>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,B=Math.imul(K,nt),N=(N=Math.imul(K,st))+Math.imul(oe,nt)|0,U=Math.imul(oe,st),B=B+Math.imul(xe,wt)|0,N=(N=N+Math.imul(xe,_t)|0)+Math.imul(Te,wt)|0,U=U+Math.imul(Te,_t)|0,B=B+Math.imul(ue,Pt)|0,N=(N=N+Math.imul(ue,St)|0)+Math.imul(Ee,Pt)|0,U=U+Math.imul(Ee,St)|0,B=B+Math.imul(ke,jt)|0,N=(N=N+Math.imul(ke,Dt)|0)+Math.imul(me,jt)|0,U=U+Math.imul(me,Dt)|0,B=B+Math.imul(ae,Ze)|0,N=(N=N+Math.imul(ae,Ne)|0)+Math.imul(se,Ze)|0,U=U+Math.imul(se,Ne)|0;var fn=(H+(B=B+Math.imul(Q,at)|0)|0)+((8191&(N=(N=N+Math.imul(Q,Se)|0)+Math.imul(ne,at)|0))<<13)|0;H=((U=U+Math.imul(ne,Se)|0)+(N>>>13)|0)+(fn>>>26)|0,fn&=67108863,B=Math.imul(ye,nt),N=(N=Math.imul(ye,st))+Math.imul(Me,nt)|0,U=Math.imul(Me,st),B=B+Math.imul(K,wt)|0,N=(N=N+Math.imul(K,_t)|0)+Math.imul(oe,wt)|0,U=U+Math.imul(oe,_t)|0,B=B+Math.imul(xe,Pt)|0,N=(N=N+Math.imul(xe,St)|0)+Math.imul(Te,Pt)|0,U=U+Math.imul(Te,St)|0,B=B+Math.imul(ue,jt)|0,N=(N=N+Math.imul(ue,Dt)|0)+Math.imul(Ee,jt)|0,U=U+Math.imul(Ee,Dt)|0,B=B+Math.imul(ke,Ze)|0,N=(N=N+Math.imul(ke,Ne)|0)+Math.imul(me,Ze)|0,U=U+Math.imul(me,Ne)|0,B=B+Math.imul(ae,at)|0,N=(N=N+Math.imul(ae,Se)|0)+Math.imul(se,at)|0,U=U+Math.imul(se,Se)|0;var nn=(H+(B=B+Math.imul(Q,Ke)|0)|0)+((8191&(N=(N=N+Math.imul(Q,it)|0)+Math.imul(ne,Ke)|0))<<13)|0;H=((U=U+Math.imul(ne,it)|0)+(N>>>13)|0)+(nn>>>26)|0,nn&=67108863,B=Math.imul(Pe,nt),N=(N=Math.imul(Pe,st))+Math.imul(De,nt)|0,U=Math.imul(De,st),B=B+Math.imul(ye,wt)|0,N=(N=N+Math.imul(ye,_t)|0)+Math.imul(Me,wt)|0,U=U+Math.imul(Me,_t)|0,B=B+Math.imul(K,Pt)|0,N=(N=N+Math.imul(K,St)|0)+Math.imul(oe,Pt)|0,U=U+Math.imul(oe,St)|0,B=B+Math.imul(xe,jt)|0,N=(N=N+Math.imul(xe,Dt)|0)+Math.imul(Te,jt)|0,U=U+Math.imul(Te,Dt)|0,B=B+Math.imul(ue,Ze)|0,N=(N=N+Math.imul(ue,Ne)|0)+Math.imul(Ee,Ze)|0,U=U+Math.imul(Ee,Ne)|0,B=B+Math.imul(ke,at)|0,N=(N=N+Math.imul(ke,Se)|0)+Math.imul(me,at)|0,U=U+Math.imul(me,Se)|0,B=B+Math.imul(ae,Ke)|0,N=(N=N+Math.imul(ae,it)|0)+Math.imul(se,Ke)|0,U=U+Math.imul(se,it)|0;var xn=(H+(B=B+Math.imul(Q,mt)|0)|0)+((8191&(N=(N=N+Math.imul(Q,Lt)|0)+Math.imul(ne,mt)|0))<<13)|0;H=((U=U+Math.imul(ne,Lt)|0)+(N>>>13)|0)+(xn>>>26)|0,xn&=67108863,B=Math.imul(ge,nt),N=(N=Math.imul(ge,st))+Math.imul(be,nt)|0,U=Math.imul(be,st),B=B+Math.imul(Pe,wt)|0,N=(N=N+Math.imul(Pe,_t)|0)+Math.imul(De,wt)|0,U=U+Math.imul(De,_t)|0,B=B+Math.imul(ye,Pt)|0,N=(N=N+Math.imul(ye,St)|0)+Math.imul(Me,Pt)|0,U=U+Math.imul(Me,St)|0,B=B+Math.imul(K,jt)|0,N=(N=N+Math.imul(K,Dt)|0)+Math.imul(oe,jt)|0,U=U+Math.imul(oe,Dt)|0,B=B+Math.imul(xe,Ze)|0,N=(N=N+Math.imul(xe,Ne)|0)+Math.imul(Te,Ze)|0,U=U+Math.imul(Te,Ne)|0,B=B+Math.imul(ue,at)|0,N=(N=N+Math.imul(ue,Se)|0)+Math.imul(Ee,at)|0,U=U+Math.imul(Ee,Se)|0,B=B+Math.imul(ke,Ke)|0,N=(N=N+Math.imul(ke,it)|0)+Math.imul(me,Ke)|0,U=U+Math.imul(me,it)|0,B=B+Math.imul(ae,mt)|0,N=(N=N+Math.imul(ae,Lt)|0)+Math.imul(se,mt)|0,U=U+Math.imul(se,Lt)|0;var jn=(H+(B=B+Math.imul(Q,ht)|0)|0)+((8191&(N=(N=N+Math.imul(Q,Et)|0)+Math.imul(ne,ht)|0))<<13)|0;H=((U=U+Math.imul(ne,Et)|0)+(N>>>13)|0)+(jn>>>26)|0,jn&=67108863,B=Math.imul(He,nt),N=(N=Math.imul(He,st))+Math.imul(Ve,nt)|0,U=Math.imul(Ve,st),B=B+Math.imul(ge,wt)|0,N=(N=N+Math.imul(ge,_t)|0)+Math.imul(be,wt)|0,U=U+Math.imul(be,_t)|0,B=B+Math.imul(Pe,Pt)|0,N=(N=N+Math.imul(Pe,St)|0)+Math.imul(De,Pt)|0,U=U+Math.imul(De,St)|0,B=B+Math.imul(ye,jt)|0,N=(N=N+Math.imul(ye,Dt)|0)+Math.imul(Me,jt)|0,U=U+Math.imul(Me,Dt)|0,B=B+Math.imul(K,Ze)|0,N=(N=N+Math.imul(K,Ne)|0)+Math.imul(oe,Ze)|0,U=U+Math.imul(oe,Ne)|0,B=B+Math.imul(xe,at)|0,N=(N=N+Math.imul(xe,Se)|0)+Math.imul(Te,at)|0,U=U+Math.imul(Te,Se)|0,B=B+Math.imul(ue,Ke)|0,N=(N=N+Math.imul(ue,it)|0)+Math.imul(Ee,Ke)|0,U=U+Math.imul(Ee,it)|0,B=B+Math.imul(ke,mt)|0,N=(N=N+Math.imul(ke,Lt)|0)+Math.imul(me,mt)|0,U=U+Math.imul(me,Lt)|0,B=B+Math.imul(ae,ht)|0,N=(N=N+Math.imul(ae,Et)|0)+Math.imul(se,ht)|0,U=U+Math.imul(se,Et)|0;var mn=(H+(B=B+Math.imul(Q,kt)|0)|0)+((8191&(N=(N=N+Math.imul(Q,It)|0)+Math.imul(ne,kt)|0))<<13)|0;H=((U=U+Math.imul(ne,It)|0)+(N>>>13)|0)+(mn>>>26)|0,mn&=67108863,B=Math.imul(He,wt),N=(N=Math.imul(He,_t))+Math.imul(Ve,wt)|0,U=Math.imul(Ve,_t),B=B+Math.imul(ge,Pt)|0,N=(N=N+Math.imul(ge,St)|0)+Math.imul(be,Pt)|0,U=U+Math.imul(be,St)|0,B=B+Math.imul(Pe,jt)|0,N=(N=N+Math.imul(Pe,Dt)|0)+Math.imul(De,jt)|0,U=U+Math.imul(De,Dt)|0,B=B+Math.imul(ye,Ze)|0,N=(N=N+Math.imul(ye,Ne)|0)+Math.imul(Me,Ze)|0,U=U+Math.imul(Me,Ne)|0,B=B+Math.imul(K,at)|0,N=(N=N+Math.imul(K,Se)|0)+Math.imul(oe,at)|0,U=U+Math.imul(oe,Se)|0,B=B+Math.imul(xe,Ke)|0,N=(N=N+Math.imul(xe,it)|0)+Math.imul(Te,Ke)|0,U=U+Math.imul(Te,it)|0,B=B+Math.imul(ue,mt)|0,N=(N=N+Math.imul(ue,Lt)|0)+Math.imul(Ee,mt)|0,U=U+Math.imul(Ee,Lt)|0,B=B+Math.imul(ke,ht)|0,N=(N=N+Math.imul(ke,Et)|0)+Math.imul(me,ht)|0,U=U+Math.imul(me,Et)|0;var en=(H+(B=B+Math.imul(ae,kt)|0)|0)+((8191&(N=(N=N+Math.imul(ae,It)|0)+Math.imul(se,kt)|0))<<13)|0;H=((U=U+Math.imul(se,It)|0)+(N>>>13)|0)+(en>>>26)|0,en&=67108863,B=Math.imul(He,Pt),N=(N=Math.imul(He,St))+Math.imul(Ve,Pt)|0,U=Math.imul(Ve,St),B=B+Math.imul(ge,jt)|0,N=(N=N+Math.imul(ge,Dt)|0)+Math.imul(be,jt)|0,U=U+Math.imul(be,Dt)|0,B=B+Math.imul(Pe,Ze)|0,N=(N=N+Math.imul(Pe,Ne)|0)+Math.imul(De,Ze)|0,U=U+Math.imul(De,Ne)|0,B=B+Math.imul(ye,at)|0,N=(N=N+Math.imul(ye,Se)|0)+Math.imul(Me,at)|0,U=U+Math.imul(Me,Se)|0,B=B+Math.imul(K,Ke)|0,N=(N=N+Math.imul(K,it)|0)+Math.imul(oe,Ke)|0,U=U+Math.imul(oe,it)|0,B=B+Math.imul(xe,mt)|0,N=(N=N+Math.imul(xe,Lt)|0)+Math.imul(Te,mt)|0,U=U+Math.imul(Te,Lt)|0,B=B+Math.imul(ue,ht)|0,N=(N=N+Math.imul(ue,Et)|0)+Math.imul(Ee,ht)|0,U=U+Math.imul(Ee,Et)|0;var vn=(H+(B=B+Math.imul(ke,kt)|0)|0)+((8191&(N=(N=N+Math.imul(ke,It)|0)+Math.imul(me,kt)|0))<<13)|0;H=((U=U+Math.imul(me,It)|0)+(N>>>13)|0)+(vn>>>26)|0,vn&=67108863,B=Math.imul(He,jt),N=(N=Math.imul(He,Dt))+Math.imul(Ve,jt)|0,U=Math.imul(Ve,Dt),B=B+Math.imul(ge,Ze)|0,N=(N=N+Math.imul(ge,Ne)|0)+Math.imul(be,Ze)|0,U=U+Math.imul(be,Ne)|0,B=B+Math.imul(Pe,at)|0,N=(N=N+Math.imul(Pe,Se)|0)+Math.imul(De,at)|0,U=U+Math.imul(De,Se)|0,B=B+Math.imul(ye,Ke)|0,N=(N=N+Math.imul(ye,it)|0)+Math.imul(Me,Ke)|0,U=U+Math.imul(Me,it)|0,B=B+Math.imul(K,mt)|0,N=(N=N+Math.imul(K,Lt)|0)+Math.imul(oe,mt)|0,U=U+Math.imul(oe,Lt)|0,B=B+Math.imul(xe,ht)|0,N=(N=N+Math.imul(xe,Et)|0)+Math.imul(Te,ht)|0,U=U+Math.imul(Te,Et)|0;var on=(H+(B=B+Math.imul(ue,kt)|0)|0)+((8191&(N=(N=N+Math.imul(ue,It)|0)+Math.imul(Ee,kt)|0))<<13)|0;H=((U=U+Math.imul(Ee,It)|0)+(N>>>13)|0)+(on>>>26)|0,on&=67108863,B=Math.imul(He,Ze),N=(N=Math.imul(He,Ne))+Math.imul(Ve,Ze)|0,U=Math.imul(Ve,Ne),B=B+Math.imul(ge,at)|0,N=(N=N+Math.imul(ge,Se)|0)+Math.imul(be,at)|0,U=U+Math.imul(be,Se)|0,B=B+Math.imul(Pe,Ke)|0,N=(N=N+Math.imul(Pe,it)|0)+Math.imul(De,Ke)|0,U=U+Math.imul(De,it)|0,B=B+Math.imul(ye,mt)|0,N=(N=N+Math.imul(ye,Lt)|0)+Math.imul(Me,mt)|0,U=U+Math.imul(Me,Lt)|0,B=B+Math.imul(K,ht)|0,N=(N=N+Math.imul(K,Et)|0)+Math.imul(oe,ht)|0,U=U+Math.imul(oe,Et)|0;var sn=(H+(B=B+Math.imul(xe,kt)|0)|0)+((8191&(N=(N=N+Math.imul(xe,It)|0)+Math.imul(Te,kt)|0))<<13)|0;H=((U=U+Math.imul(Te,It)|0)+(N>>>13)|0)+(sn>>>26)|0,sn&=67108863,B=Math.imul(He,at),N=(N=Math.imul(He,Se))+Math.imul(Ve,at)|0,U=Math.imul(Ve,Se),B=B+Math.imul(ge,Ke)|0,N=(N=N+Math.imul(ge,it)|0)+Math.imul(be,Ke)|0,U=U+Math.imul(be,it)|0,B=B+Math.imul(Pe,mt)|0,N=(N=N+Math.imul(Pe,Lt)|0)+Math.imul(De,mt)|0,U=U+Math.imul(De,Lt)|0,B=B+Math.imul(ye,ht)|0,N=(N=N+Math.imul(ye,Et)|0)+Math.imul(Me,ht)|0,U=U+Math.imul(Me,Et)|0;var En=(H+(B=B+Math.imul(K,kt)|0)|0)+((8191&(N=(N=N+Math.imul(K,It)|0)+Math.imul(oe,kt)|0))<<13)|0;H=((U=U+Math.imul(oe,It)|0)+(N>>>13)|0)+(En>>>26)|0,En&=67108863,B=Math.imul(He,Ke),N=(N=Math.imul(He,it))+Math.imul(Ve,Ke)|0,U=Math.imul(Ve,it),B=B+Math.imul(ge,mt)|0,N=(N=N+Math.imul(ge,Lt)|0)+Math.imul(be,mt)|0,U=U+Math.imul(be,Lt)|0,B=B+Math.imul(Pe,ht)|0,N=(N=N+Math.imul(Pe,Et)|0)+Math.imul(De,ht)|0,U=U+Math.imul(De,Et)|0;var kn=(H+(B=B+Math.imul(ye,kt)|0)|0)+((8191&(N=(N=N+Math.imul(ye,It)|0)+Math.imul(Me,kt)|0))<<13)|0;H=((U=U+Math.imul(Me,It)|0)+(N>>>13)|0)+(kn>>>26)|0,kn&=67108863,B=Math.imul(He,mt),N=(N=Math.imul(He,Lt))+Math.imul(Ve,mt)|0,U=Math.imul(Ve,Lt),B=B+Math.imul(ge,ht)|0,N=(N=N+Math.imul(ge,Et)|0)+Math.imul(be,ht)|0,U=U+Math.imul(be,Et)|0;var zn=(H+(B=B+Math.imul(Pe,kt)|0)|0)+((8191&(N=(N=N+Math.imul(Pe,It)|0)+Math.imul(De,kt)|0))<<13)|0;H=((U=U+Math.imul(De,It)|0)+(N>>>13)|0)+(zn>>>26)|0,zn&=67108863,B=Math.imul(He,ht),N=(N=Math.imul(He,Et))+Math.imul(Ve,ht)|0,U=Math.imul(Ve,Et);var Fn=(H+(B=B+Math.imul(ge,kt)|0)|0)+((8191&(N=(N=N+Math.imul(ge,It)|0)+Math.imul(be,kt)|0))<<13)|0;H=((U=U+Math.imul(be,It)|0)+(N>>>13)|0)+(Fn>>>26)|0,Fn&=67108863;var Bn=(H+(B=Math.imul(He,kt))|0)+((8191&(N=(N=Math.imul(He,It))+Math.imul(Ve,kt)|0))<<13)|0;return H=((U=Math.imul(Ve,It))+(N>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,q[0]=Ut,q[1]=Nt,q[2]=qt,q[3]=Xt,q[4]=Kt,q[5]=fn,q[6]=nn,q[7]=xn,q[8]=jn,q[9]=mn,q[10]=en,q[11]=vn,q[12]=on,q[13]=sn,q[14]=En,q[15]=kn,q[16]=zn,q[17]=Fn,q[18]=Bn,0!==H&&(q[19]=H,D.length++),D};function w(R,V,D){return(new u).mulp(R,V,D)}function u(R,V){this.x=R,this.y=V}Math.imul||(m=d),i.prototype.mulTo=function(R,V){var B=this.length+R.length;return 10===this.length&&10===R.length?m(this,R,V):B<63?d(this,R,V):B<1024?function(N,U,J){J.negative=U.negative^N.negative,J.length=N.length+U.length;for(var Y=0,q=0,H=0;H<J.length-1;H++){var X=q;q=0;for(var Q=67108863&Y,ne=Math.min(H,U.length-1),re=Math.max(0,H-N.length+1);re<=ne;re++){var se=(0|N.words[H-re])*(0|U.words[re]),pe=67108863&se;Q=67108863&(pe=pe+Q|0),q+=(X=(X=X+(se/67108864|0)|0)+(pe>>>26)|0)>>>26,X&=67108863}J.words[H]=Q,Y=X,X=q}return 0!==Y?J.words[H]=Y:J.length--,J.strip()}(this,R,V):w(this,R,V)},u.prototype.makeRBT=function(R){for(var V=new Array(R),D=i.prototype._countBits(R)-1,B=0;B<R;B++)V[B]=this.revBin(B,D,R);return V},u.prototype.revBin=function(R,V,D){if(0===R||R===D-1)return R;for(var B=0,N=0;N<V;N++)B|=(1&R)<<V-N-1,R>>=1;return B},u.prototype.permute=function(R,V,D,B,N,U){for(var J=0;J<U;J++)B[J]=V[R[J]],N[J]=D[R[J]]},u.prototype.transform=function(R,V,D,B,N,U){this.permute(U,R,V,D,B,N);for(var J=1;J<N;J<<=1)for(var Y=J<<1,q=Math.cos(2*Math.PI/Y),H=Math.sin(2*Math.PI/Y),X=0;X<N;X+=Y)for(var Q=q,ne=H,re=0;re<J;re++){var ae=D[X+re],se=B[X+re],pe=D[X+re+J],ke=B[X+re+J],me=Q*pe-ne*ke;ke=Q*ke+ne*pe,D[X+re]=ae+(pe=me),B[X+re]=se+ke,D[X+re+J]=ae-pe,B[X+re+J]=se-ke,re!==Y&&(me=q*Q-H*ne,ne=q*ne+H*Q,Q=me)}},u.prototype.guessLen13b=function(R,V){var D=1|Math.max(V,R),B=1&D,N=0;for(D=D/2|0;D;D>>>=1)N++;return 1<<N+1+B},u.prototype.conjugate=function(R,V,D){if(!(D<=1))for(var B=0;B<D/2;B++){var N=R[B];R[B]=R[D-B-1],R[D-B-1]=N,N=V[B],V[B]=-V[D-B-1],V[D-B-1]=-N}},u.prototype.normalize13b=function(R,V){for(var D=0,B=0;B<V/2;B++){var N=8192*Math.round(R[2*B+1]/V)+Math.round(R[2*B]/V)+D;R[B]=67108863&N,D=N<67108864?0:N/67108864|0}return R},u.prototype.convert13b=function(R,V,D,B){for(var N=0,U=0;U<V;U++)D[2*U]=8191&(N+=0|R[U]),D[2*U+1]=8191&(N>>>=13),N>>>=13;for(U=2*V;U<B;++U)D[U]=0;n(0===N),n(0==(-8192&N))},u.prototype.stub=function(R){for(var V=new Array(R),D=0;D<R;D++)V[D]=0;return V},u.prototype.mulp=function(R,V,D){var B=2*this.guessLen13b(R.length,V.length),N=this.makeRBT(B),U=this.stub(B),J=new Array(B),Y=new Array(B),q=new Array(B),H=new Array(B),X=new Array(B),Q=new Array(B),ne=D.words;ne.length=B,this.convert13b(R.words,R.length,J,B),this.convert13b(V.words,V.length,H,B),this.transform(J,U,Y,q,B,N),this.transform(H,U,X,Q,B,N);for(var re=0;re<B;re++){var ae=Y[re]*X[re]-q[re]*Q[re];q[re]=Y[re]*Q[re]+q[re]*X[re],Y[re]=ae}return this.conjugate(Y,q,B),this.transform(Y,q,ne,U,B,N),this.conjugate(ne,U,B),this.normalize13b(ne,B),D.negative=R.negative^V.negative,D.length=R.length+V.length,D.strip()},i.prototype.mul=function(R){var V=new i(null);return V.words=new Array(this.length+R.length),this.mulTo(R,V)},i.prototype.mulf=function(R){var V=new i(null);return V.words=new Array(this.length+R.length),w(this,R,V)},i.prototype.imul=function(R){return this.clone().mulTo(R,this)},i.prototype.imuln=function(R){n("number"==typeof R),n(R<67108864);for(var V=0,D=0;D<this.length;D++){var B=(0|this.words[D])*R,N=(67108863&B)+(67108863&V);V>>=26,V+=B/67108864|0,V+=N>>>26,this.words[D]=67108863&N}return 0!==V&&(this.words[D]=V,this.length++),this},i.prototype.muln=function(R){return this.clone().imuln(R)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(R){var V=function(U){for(var J=new Array(U.bitLength()),Y=0;Y<J.length;Y++){var H=Y%26;J[Y]=(U.words[Y/26|0]&1<<H)>>>H}return J}(R);if(0===V.length)return new i(1);for(var D=this,B=0;B<V.length&&0===V[B];B++,D=D.sqr());if(++B<V.length)for(var N=D.sqr();B<V.length;B++,N=N.sqr())0!==V[B]&&(D=D.mul(N));return D},i.prototype.iushln=function(R){n("number"==typeof R&&R>=0);var V,D=R%26,B=(R-D)/26,N=67108863>>>26-D<<26-D;if(0!==D){var U=0;for(V=0;V<this.length;V++){var J=this.words[V]&N;this.words[V]=(0|this.words[V])-J<<D|U,U=J>>>26-D}U&&(this.words[V]=U,this.length++)}if(0!==B){for(V=this.length-1;V>=0;V--)this.words[V+B]=this.words[V];for(V=0;V<B;V++)this.words[V]=0;this.length+=B}return this.strip()},i.prototype.ishln=function(R){return n(0===this.negative),this.iushln(R)},i.prototype.iushrn=function(R,V,D){var B;n("number"==typeof R&&R>=0),B=V?(V-V%26)/26:0;var N=R%26,U=Math.min((R-N)/26,this.length),J=67108863^67108863>>>N<<N,Y=D;if(B-=U,B=Math.max(0,B),Y){for(var q=0;q<U;q++)Y.words[q]=this.words[q];Y.length=U}if(0!==U)if(this.length>U)for(this.length-=U,q=0;q<this.length;q++)this.words[q]=this.words[q+U];else this.words[0]=0,this.length=1;var H=0;for(q=this.length-1;q>=0&&(0!==H||q>=B);q--){var X=0|this.words[q];this.words[q]=H<<26-N|X>>>N,H=X&J}return Y&&0!==H&&(Y.words[Y.length++]=H),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(R,V,D){return n(0===this.negative),this.iushrn(R,V,D)},i.prototype.shln=function(R){return this.clone().ishln(R)},i.prototype.ushln=function(R){return this.clone().iushln(R)},i.prototype.shrn=function(R){return this.clone().ishrn(R)},i.prototype.ushrn=function(R){return this.clone().iushrn(R)},i.prototype.testn=function(R){n("number"==typeof R&&R>=0);var V=R%26,D=(R-V)/26;return!(this.length<=D||!(this.words[D]&1<<V))},i.prototype.imaskn=function(R){n("number"==typeof R&&R>=0);var V=R%26,D=(R-V)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=D?this:(0!==V&&D++,this.length=Math.min(D,this.length),0!==V&&(this.words[this.length-1]&=67108863^67108863>>>V<<V),this.strip())},i.prototype.maskn=function(R){return this.clone().imaskn(R)},i.prototype.iaddn=function(R){return n("number"==typeof R),n(R<67108864),R<0?this.isubn(-R):0!==this.negative?1===this.length&&(0|this.words[0])<R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},i.prototype._iaddn=function(R){this.words[0]+=R;for(var V=0;V<this.length&&this.words[V]>=67108864;V++)this.words[V]-=67108864,V===this.length-1?this.words[V+1]=1:this.words[V+1]++;return this.length=Math.max(this.length,V+1),this},i.prototype.isubn=function(R){if(n("number"==typeof R),n(R<67108864),R<0)return this.iaddn(-R);if(0!==this.negative)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var V=0;V<this.length&&this.words[V]<0;V++)this.words[V]+=67108864,this.words[V+1]-=1;return this.strip()},i.prototype.addn=function(R){return this.clone().iaddn(R)},i.prototype.subn=function(R){return this.clone().isubn(R)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(R,V,D){var B,N;this._expand(R.length+D);var J=0;for(B=0;B<R.length;B++){N=(0|this.words[B+D])+J;var Y=(0|R.words[B])*V;J=((N-=67108863&Y)>>26)-(Y/67108864|0),this.words[B+D]=67108863&N}for(;B<this.length-D;B++)J=(N=(0|this.words[B+D])+J)>>26,this.words[B+D]=67108863&N;if(0===J)return this.strip();for(n(-1===J),J=0,B=0;B<this.length;B++)J=(N=-(0|this.words[B])+J)>>26,this.words[B]=67108863&N;return this.negative=1,this.strip()},i.prototype._wordDiv=function(R,V){var D,B=this.clone(),N=R,U=0|N.words[N.length-1];0!=(D=26-this._countBits(U))&&(N=N.ushln(D),B.iushln(D),U=0|N.words[N.length-1]);var J,Y=B.length-N.length;if("mod"!==V){(J=new i(null)).length=Y+1,J.words=new Array(J.length);for(var q=0;q<J.length;q++)J.words[q]=0}var H=B.clone()._ishlnsubmul(N,1,Y);0===H.negative&&(B=H,J&&(J.words[Y]=1));for(var X=Y-1;X>=0;X--){var Q=67108864*(0|B.words[N.length+X])+(0|B.words[N.length+X-1]);for(Q=Math.min(Q/U|0,67108863),B._ishlnsubmul(N,Q,X);0!==B.negative;)Q--,B.negative=0,B._ishlnsubmul(N,1,X),B.isZero()||(B.negative^=1);J&&(J.words[X]=Q)}return J&&J.strip(),B.strip(),"div"!==V&&0!==D&&B.iushrn(D),{div:J||null,mod:B}},i.prototype.divmod=function(R,V,D){return n(!R.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===R.negative?(U=this.neg().divmod(R,V),"mod"!==V&&(B=U.div.neg()),"div"!==V&&(N=U.mod.neg(),D&&0!==N.negative&&N.iadd(R)),{div:B,mod:N}):0===this.negative&&0!==R.negative?(U=this.divmod(R.neg(),V),"mod"!==V&&(B=U.div.neg()),{div:B,mod:U.mod}):this.negative&R.negative?(U=this.neg().divmod(R.neg(),V),"div"!==V&&(N=U.mod.neg(),D&&0!==N.negative&&N.isub(R)),{div:U.div,mod:N}):R.length>this.length||this.cmp(R)<0?{div:new i(0),mod:this}:1===R.length?"div"===V?{div:this.divn(R.words[0]),mod:null}:"mod"===V?{div:null,mod:new i(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new i(this.modn(R.words[0]))}:this._wordDiv(R,V);var B,N,U},i.prototype.div=function(R){return this.divmod(R,"div",!1).div},i.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},i.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},i.prototype.divRound=function(R){var V=this.divmod(R);if(V.mod.isZero())return V.div;var D=0!==V.div.negative?V.mod.isub(R):V.mod,B=R.ushrn(1),N=R.andln(1),U=D.cmp(B);return U<0||1===N&&0===U?V.div:0!==V.div.negative?V.div.isubn(1):V.div.iaddn(1)},i.prototype.modn=function(R){n(R<=67108863);for(var V=67108864%R,D=0,B=this.length-1;B>=0;B--)D=(V*D+(0|this.words[B]))%R;return D},i.prototype.idivn=function(R){n(R<=67108863);for(var V=0,D=this.length-1;D>=0;D--){var B=(0|this.words[D])+67108864*V;this.words[D]=B/R|0,V=B%R}return this.strip()},i.prototype.divn=function(R){return this.clone().idivn(R)},i.prototype.egcd=function(R){n(0===R.negative),n(!R.isZero());var V=this,D=R.clone();V=0!==V.negative?V.umod(R):V.clone();for(var B=new i(1),N=new i(0),U=new i(0),J=new i(1),Y=0;V.isEven()&&D.isEven();)V.iushrn(1),D.iushrn(1),++Y;for(var q=D.clone(),H=V.clone();!V.isZero();){for(var X=0,Q=1;!(V.words[0]&Q)&&X<26;++X,Q<<=1);if(X>0)for(V.iushrn(X);X-- >0;)(B.isOdd()||N.isOdd())&&(B.iadd(q),N.isub(H)),B.iushrn(1),N.iushrn(1);for(var ne=0,re=1;!(D.words[0]&re)&&ne<26;++ne,re<<=1);if(ne>0)for(D.iushrn(ne);ne-- >0;)(U.isOdd()||J.isOdd())&&(U.iadd(q),J.isub(H)),U.iushrn(1),J.iushrn(1);V.cmp(D)>=0?(V.isub(D),B.isub(U),N.isub(J)):(D.isub(V),U.isub(B),J.isub(N))}return{a:U,b:J,gcd:D.iushln(Y)}},i.prototype._invmp=function(R){n(0===R.negative),n(!R.isZero());var V=this,D=R.clone();V=0!==V.negative?V.umod(R):V.clone();for(var B,N=new i(1),U=new i(0),J=D.clone();V.cmpn(1)>0&&D.cmpn(1)>0;){for(var Y=0,q=1;!(V.words[0]&q)&&Y<26;++Y,q<<=1);if(Y>0)for(V.iushrn(Y);Y-- >0;)N.isOdd()&&N.iadd(J),N.iushrn(1);for(var H=0,X=1;!(D.words[0]&X)&&H<26;++H,X<<=1);if(H>0)for(D.iushrn(H);H-- >0;)U.isOdd()&&U.iadd(J),U.iushrn(1);V.cmp(D)>=0?(V.isub(D),N.isub(U)):(D.isub(V),U.isub(N))}return(B=0===V.cmpn(1)?N:U).cmpn(0)<0&&B.iadd(R),B},i.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var V=this.clone(),D=R.clone();V.negative=0,D.negative=0;for(var B=0;V.isEven()&&D.isEven();B++)V.iushrn(1),D.iushrn(1);for(;;){for(;V.isEven();)V.iushrn(1);for(;D.isEven();)D.iushrn(1);var N=V.cmp(D);if(N<0){var U=V;V=D,D=U}else if(0===N||0===D.cmpn(1))break;V.isub(D)}return D.iushln(B)},i.prototype.invm=function(R){return this.egcd(R).a.umod(R)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(R){return this.words[0]&R},i.prototype.bincn=function(R){n("number"==typeof R);var V=R%26,D=(R-V)/26,B=1<<V;if(this.length<=D)return this._expand(D+1),this.words[D]|=B,this;for(var N=B,U=D;0!==N&&U<this.length;U++){var J=0|this.words[U];N=(J+=N)>>>26,this.words[U]=J&=67108863}return 0!==N&&(this.words[U]=N,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(R){var V,D=R<0;if(0!==this.negative&&!D)return-1;if(0===this.negative&&D)return 1;if(this.strip(),this.length>1)V=1;else{D&&(R=-R),n(R<=67108863,"Number is too big");var B=0|this.words[0];V=B===R?0:B<R?-1:1}return 0!==this.negative?0|-V:V},i.prototype.cmp=function(R){if(0!==this.negative&&0===R.negative)return-1;if(0===this.negative&&0!==R.negative)return 1;var V=this.ucmp(R);return 0!==this.negative?0|-V:V},i.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var V=0,D=this.length-1;D>=0;D--){var B=0|this.words[D],N=0|R.words[D];if(B!==N){B<N?V=-1:B>N&&(V=1);break}}return V},i.prototype.gtn=function(R){return 1===this.cmpn(R)},i.prototype.gt=function(R){return 1===this.cmp(R)},i.prototype.gten=function(R){return this.cmpn(R)>=0},i.prototype.gte=function(R){return this.cmp(R)>=0},i.prototype.ltn=function(R){return-1===this.cmpn(R)},i.prototype.lt=function(R){return-1===this.cmp(R)},i.prototype.lten=function(R){return this.cmpn(R)<=0},i.prototype.lte=function(R){return this.cmp(R)<=0},i.prototype.eqn=function(R){return 0===this.cmpn(R)},i.prototype.eq=function(R){return 0===this.cmp(R)},i.red=function(R){return new z(R)},i.prototype.toRed=function(R){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),R.convertTo(this)._forceRed(R)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(R){return this.red=R,this},i.prototype.forceRed=function(R){return n(!this.red,"Already a number in reduction context"),this._forceRed(R)},i.prototype.redAdd=function(R){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},i.prototype.redIAdd=function(R){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},i.prototype.redSub=function(R){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},i.prototype.redISub=function(R){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},i.prototype.redShl=function(R){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},i.prototype.redMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},i.prototype.redIMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(R){return n(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var S={k256:null,p224:null,p192:null,p25519:null};function _(R,V){this.name=R,this.p=new i(V,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(R){if("string"==typeof R){var V=i._prime(R);this.m=V.p,this.prime=V}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function j(R){z.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var R=new i(null);return R.words=new Array(Math.ceil(this.n/13)),R},_.prototype.ireduce=function(R){var V,D=R;do{this.split(D,this.tmp),V=(D=(D=this.imulK(D)).iadd(this.tmp)).bitLength()}while(V>this.n);var B=V<this.n?-1:D.ucmp(this.p);return 0===B?(D.words[0]=0,D.length=1):B>0?D.isub(this.p):void 0!==D.strip?D.strip():D._strip(),D},_.prototype.split=function(R,V){R.iushrn(this.n,0,V)},_.prototype.imulK=function(R){return R.imul(this.k)},a(E,_),E.prototype.split=function(R,V){for(var D=4194303,B=Math.min(R.length,9),N=0;N<B;N++)V.words[N]=R.words[N];if(V.length=B,R.length<=9)return R.words[0]=0,void(R.length=1);var U=R.words[9];for(V.words[V.length++]=U&D,N=10;N<R.length;N++){var J=0|R.words[N];R.words[N-10]=(J&D)<<4|U>>>22,U=J}R.words[N-10]=U>>>=22,R.length-=0===U&&R.length>10?10:9},E.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var V=0,D=0;D<R.length;D++){var B=0|R.words[D];R.words[D]=67108863&(V+=977*B),V=64*B+(V/67108864|0)}return 0===R.words[R.length-1]&&(R.length--,0===R.words[R.length-1]&&R.length--),R},a(L,_),a(C,_),a(P,_),P.prototype.imulK=function(R){for(var V=0,D=0;D<R.length;D++){var B=19*(0|R.words[D])+V,N=67108863&B;B>>>=26,R.words[D]=N,V=B}return 0!==V&&(R.words[R.length++]=V),R},i._prime=function(R){if(S[R])return S[R];var V;if("k256"===R)V=new E;else if("p224"===R)V=new L;else if("p192"===R)V=new C;else{if("p25519"!==R)throw new Error("Unknown prime "+R);V=new P}return S[R]=V,V},z.prototype._verify1=function(R){n(0===R.negative,"red works only with positives"),n(R.red,"red works only with red numbers")},z.prototype._verify2=function(R,V){n(0==(R.negative|V.negative),"red works only with positives"),n(R.red&&R.red===V.red,"red works only with red numbers")},z.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},z.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},z.prototype.add=function(R,V){this._verify2(R,V);var D=R.add(V);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},z.prototype.iadd=function(R,V){this._verify2(R,V);var D=R.iadd(V);return D.cmp(this.m)>=0&&D.isub(this.m),D},z.prototype.sub=function(R,V){this._verify2(R,V);var D=R.sub(V);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},z.prototype.isub=function(R,V){this._verify2(R,V);var D=R.isub(V);return D.cmpn(0)<0&&D.iadd(this.m),D},z.prototype.shl=function(R,V){return this._verify1(R),this.imod(R.ushln(V))},z.prototype.imul=function(R,V){return this._verify2(R,V),this.imod(R.imul(V))},z.prototype.mul=function(R,V){return this._verify2(R,V),this.imod(R.mul(V))},z.prototype.isqr=function(R){return this.imul(R,R.clone())},z.prototype.sqr=function(R){return this.mul(R,R)},z.prototype.sqrt=function(R){if(R.isZero())return R.clone();var V=this.m.andln(3);if(n(V%2==1),3===V){var D=this.m.add(new i(1)).iushrn(2);return this.pow(R,D)}for(var B=this.m.subn(1),N=0;!B.isZero()&&0===B.andln(1);)N++,B.iushrn(1);n(!B.isZero());var U=new i(1).toRed(this),J=U.redNeg(),Y=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new i(2*q*q).toRed(this);0!==this.pow(q,Y).cmp(J);)q.redIAdd(J);for(var H=this.pow(q,B),X=this.pow(R,B.addn(1).iushrn(1)),Q=this.pow(R,B),ne=N;0!==Q.cmp(U);){for(var re=Q,ae=0;0!==re.cmp(U);ae++)re=re.redSqr();n(ae<ne);var se=this.pow(H,new i(1).iushln(ne-ae-1));X=X.redMul(se),H=se.redSqr(),Q=Q.redMul(H),ne=ae}return X},z.prototype.invm=function(R){var V=R._invmp(this.m);return 0!==V.negative?(V.negative=0,this.imod(V).redNeg()):this.imod(V)},z.prototype.pow=function(R,V){if(V.isZero())return new i(1).toRed(this);if(0===V.cmpn(1))return R.clone();var D=new Array(16);D[0]=new i(1).toRed(this),D[1]=R;for(var B=2;B<D.length;B++)D[B]=this.mul(D[B-1],R);var N=D[0],U=0,J=0,Y=V.bitLength()%26;for(0===Y&&(Y=26),B=V.length-1;B>=0;B--){for(var q=V.words[B],H=Y-1;H>=0;H--){var X=q>>H&1;N!==D[0]&&(N=this.sqr(N)),0!==X||0!==U?(U<<=1,U|=X,(4==++J||0===B&&0===H)&&(N=this.mul(N,D[U]),J=0,U=0)):J=0}Y=26}return N},z.prototype.convertTo=function(R){var V=R.umod(this.m);return V===R?V.clone():V},z.prototype.convertFrom=function(R){var V=R.clone();return V.red=null,V},i.mont=function(R){return new j(R)},a(j,z),j.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},j.prototype.convertFrom=function(R){var V=this.imod(R.mul(this.rinv));return V.red=null,V},j.prototype.imul=function(R,V){if(R.isZero()||V.isZero())return R.words[0]=0,R.length=1,R;var D=R.imul(V),B=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(B).iushrn(this.shift),U=N;return N.cmp(this.m)>=0?U=N.isub(this.m):N.cmpn(0)<0&&(U=N.iadd(this.m)),U._forceRed(this)},j.prototype.mul=function(R,V){if(R.isZero()||V.isZero())return new i(0)._forceRed(this);var D=R.mul(V),B=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(B).iushrn(this.shift),U=N;return N.cmp(this.m)>=0?U=N.isub(this.m):N.cmpn(0)<0&&(U=N.iadd(this.m)),U._forceRed(this)},j.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}}(p=e.nmd(p),this)},2692:function(p){"use strict";p.exports=function(s){var e,o,r,n=s.length,a=0;for(e=0;e<n;++e)a+=s[e].length;var i=new Array(a),c=0;for(e=0;e<n;++e){var h=s[e],f=h.length;for(o=0;o<f;++o){var b=i[c++]=new Array(f-1),v=0;for(r=0;r<f;++r)r!==o&&(b[v++]=h[r]);if(1&o){var g=b[1];b[1]=b[0],b[0]=g}}}return i}},2569:function(p,s,e){"use strict";p.exports=function(g,y,d){switch(arguments.length){case 1:return b(g);case 2:return"function"==typeof y?h(g,g,y,!0):v(g,y);case 3:return h(g,y,d,!1);default:throw new Error("box-intersect: Invalid arguments")}};var o,r=e(5306),n=e(1390),a=e(2337);function i(g,y){for(var d=0;d<g;++d)if(!(y[d]<=y[d+g]))return!0;return!1}function c(g,y,d,m){for(var w=0,u=0,S=0,_=g.length;S<_;++S){var E=g[S];if(!i(y,E)){for(var L=0;L<2*y;++L)d[w++]=E[L];m[u++]=S}}return u}function h(g,y,d,m){var w=g.length,u=y.length;if(!(w<=0||u<=0)){var S=g[0].length>>>1;if(!(S<=0)){var _,E=r.mallocDouble(2*S*w),L=r.mallocInt32(w);if((w=c(g,S,E,L))>0){if(1===S&&m)n.init(w),_=n.sweepComplete(S,d,0,w,E,L,0,w,E,L);else{var C=r.mallocDouble(2*S*u),P=r.mallocInt32(u);(u=c(y,S,C,P))>0&&(n.init(w+u),_=1===S?n.sweepBipartite(S,d,0,w,E,L,0,u,C,P):a(S,d,m,w,E,L,u,C,P),r.free(C),r.free(P))}r.free(E),r.free(L)}return _}}}function f(g,y){o.push([g,y])}function b(g){return o=[],h(g,g,f,!0),o}function v(g,y){return o=[],h(g,y,f,!1),o}},7333:function(p,s){"use strict";function e(o){return o?function(r,n,a,i,c,h,f,b,v,g,y){return c-i>v-b?function(d,m,w,u,S,_,E,L,C,P,z){for(var j=2*d,R=u,V=j*u;R<S;++R,V+=j){var D=_[m+V],B=_[m+V+d],N=E[R];e:for(var U=L,J=j*L;U<C;++U,J+=j){var H=z[U];if(!(P[m+J+d]<D||B<P[m+J])){for(var X=m+1;X<d;++X)if(_[X+d+V]<P[X+J]||P[X+d+J]<_[X+V])continue e;var se=w(N,H);if(void 0!==se)return se}}}}(r,n,a,i,c,h,f,b,v,g,y):function(d,m,w,u,S,_,E,L,C,P,z){for(var j=2*d,R=L,V=j*L;R<C;++R,V+=j){var D=P[m+V],B=P[m+V+d],N=z[R];e:for(var U=u,J=j*u;U<S;++U,J+=j){var H=E[U];if(!(B<_[m+J]||_[m+J+d]<D)){for(var X=m+1;X<d;++X)if(_[X+d+J]<P[X+V]||P[X+d+V]<_[X+J])continue e;var se=w(H,N);if(void 0!==se)return se}}}}(r,n,a,i,c,h,f,b,v,g,y)}:function(r,n,a,i,c,h,f,b,v,g,y,d){return h-c>g-v?i?function(m,w,u,S,_,E,L,C,P,z,j){for(var R=2*m,V=S,D=R*S;V<_;++V,D+=R){var B=E[w+D],N=E[w+D+m],U=L[V];e:for(var J=C,Y=R*C;J<P;++J,Y+=R){var q=z[w+Y],H=j[J];if(!(q<=B||N<q)){for(var X=w+1;X<m;++X)if(E[X+m+D]<z[X+Y]||z[X+m+Y]<E[X+D])continue e;var se=u(H,U);if(void 0!==se)return se}}}}(r,n,a,c,h,f,b,v,g,y,d):function(m,w,u,S,_,E,L,C,P,z,j){for(var R=2*m,V=S,D=R*S;V<_;++V,D+=R){var B=E[w+D],N=E[w+D+m],U=L[V];e:for(var J=C,Y=R*C;J<P;++J,Y+=R){var q=z[w+Y],H=j[J];if(!(q<B||N<q)){for(var X=w+1;X<m;++X)if(E[X+m+D]<z[X+Y]||z[X+m+Y]<E[X+D])continue e;var se=u(U,H);if(void 0!==se)return se}}}}(r,n,a,c,h,f,b,v,g,y,d):i?function(m,w,u,S,_,E,L,C,P,z,j){for(var R=2*m,V=C,D=R*C;V<P;++V,D+=R){var B=z[w+D],N=j[V];e:for(var U=S,J=R*S;U<_;++U,J+=R){var H=L[U];if(!(B<=E[w+J]||E[w+J+m]<B)){for(var X=w+1;X<m;++X)if(E[X+m+J]<z[X+D]||z[X+m+D]<E[X+J])continue e;var se=u(N,H);if(void 0!==se)return se}}}}(r,n,a,c,h,f,b,v,g,y,d):function(m,w,u,S,_,E,L,C,P,z,j){for(var R=2*m,V=C,D=R*C;V<P;++V,D+=R){var B=z[w+D],N=j[V];e:for(var U=S,J=R*S;U<_;++U,J+=R){var H=L[U];if(!(B<E[w+J]||E[w+J+m]<B)){for(var X=w+1;X<m;++X)if(E[X+m+J]<z[X+D]||z[X+m+D]<E[X+J])continue e;var se=u(H,N);if(void 0!==se)return se}}}}(r,n,a,c,h,f,b,v,g,y,d)}}s.partial=e(!1),s.full=e(!0)},2337:function(p,s,e){"use strict";p.exports=function(L,C,P,z,j,R,V,D,B){!function(Re,Pe){var De=8*r.log2(Pe+1)*(Re+1)|0,fe=r.nextPow2(6*De);w.length<fe&&(o.free(w),w=o.mallocInt32(fe));var ge=r.nextPow2(2*De);u.length<ge&&(o.free(u),u=o.mallocDouble(ge))}(L,z+V);var N,U=0,J=2*L;for(S(U++,0,0,z,0,V,P?16:0,-1/0,1/0),P||S(U++,0,0,V,0,z,1,-1/0,1/0);U>0;){var Y=6*(U-=1),q=w[Y],H=w[Y+1],X=w[Y+2],Q=w[Y+3],ne=w[Y+4],re=w[Y+5],ae=2*U,se=u[ae],pe=u[ae+1],ke=1&re,me=!!(16&re),le=j,ue=R,Ee=D,de=B;if(ke&&(le=D,ue=B,Ee=j,de=R),!(2&re&&(X=g(L,q,H,X,le,ue,pe),H>=X)||4&re&&(H=y(L,q,H,X,le,ue,se))>=X)){var xe=X-H,Te=ne-Q;if(me){if(L*xe*(xe+Te)<4194304){if(void 0!==(N=c.scanComplete(L,q,C,H,X,le,ue,Q,ne,Ee,de)))return N;continue}}else{if(L*Math.min(xe,Te)<128){if(void 0!==(N=a(L,q,C,ke,H,X,le,ue,Q,ne,Ee,de)))return N;continue}if(L*xe*Te<4194304){if(void 0!==(N=c.scanBipartite(L,q,C,ke,H,X,le,ue,Q,ne,Ee,de)))return N;continue}}var we=b(L,q,H,X,le,ue,se,pe);if(H<we)if(L*(we-H)<128){if(void 0!==(N=i(L,q+1,C,H,we,le,ue,Q,ne,Ee,de)))return N}else if(q===L-2){if(void 0!==(N=ke?c.sweepBipartite(L,C,Q,ne,Ee,de,H,we,le,ue):c.sweepBipartite(L,C,H,we,le,ue,Q,ne,Ee,de)))return N}else S(U++,q+1,H,we,Q,ne,ke,-1/0,1/0),S(U++,q+1,Q,ne,H,we,1^ke,-1/0,1/0);if(we<X){var K=h(L,q,Q,ne,Ee,de),oe=Ee[J*K+q],he=v(L,q,K,ne,Ee,de,oe);if(he<ne&&S(U++,q,we,X,he,ne,(4|ke)+(me?16:0),oe,pe),Q<K&&S(U++,q,we,X,Q,K,(2|ke)+(me?16:0),se,oe),K+1===he){if(void 0!==(N=me?E(L,q,C,we,X,le,ue,K,Ee,de[K]):_(L,q,C,ke,we,X,le,ue,K,Ee,de[K])))return N}else if(K<he){var ye;if(me){if(we<(ye=d(L,q,we,X,le,ue,oe))){var Me=v(L,q,we,ye,le,ue,oe);if(q===L-2){if(we<Me&&void 0!==(N=c.sweepComplete(L,C,we,Me,le,ue,K,he,Ee,de))||Me<ye&&void 0!==(N=c.sweepBipartite(L,C,Me,ye,le,ue,K,he,Ee,de)))return N}else we<Me&&S(U++,q+1,we,Me,K,he,16,-1/0,1/0),Me<ye&&(S(U++,q+1,Me,ye,K,he,0,-1/0,1/0),S(U++,q+1,K,he,Me,ye,1,-1/0,1/0))}}else we<(ye=ke?m(L,q,we,X,le,ue,oe):d(L,q,we,X,le,ue,oe))&&(q===L-2?N=ke?c.sweepBipartite(L,C,K,he,Ee,de,we,ye,le,ue):c.sweepBipartite(L,C,we,ye,le,ue,K,he,Ee,de):(S(U++,q+1,we,ye,K,he,ke,-1/0,1/0),S(U++,q+1,K,he,we,ye,1^ke,-1/0,1/0)))}}}}};var o=e(5306),r=e(2288),n=e(7333),a=n.partial,i=n.full,c=e(1390),h=e(2464),f=e(122),b=f("!(lo>=p0)&&!(p1>=hi)"),v=f("lo===p0"),g=f("lo<p0"),y=f("hi<=p0"),d=f("lo<=p0&&p0<=hi"),m=f("lo<p0&&p0<=hi"),w=o.mallocInt32(1024),u=o.mallocDouble(1024);function S(L,C,P,z,j,R,V,D,B){var N=6*L;w[N]=C,w[N+1]=P,w[N+2]=z,w[N+3]=j,w[N+4]=R,w[N+5]=V;var U=2*L;u[U]=D,u[U+1]=B}function _(L,C,P,z,j,R,V,D,B,N,U){var J=2*L,Y=B*J,q=N[Y+C];e:for(var H=j,X=j*J;H<R;++H,X+=J){var Q=V[X+C],ne=V[X+C+L];if(!(q<Q||ne<q||z&&q===Q)){for(var re,ae=D[H],se=C+1;se<L;++se)if(Q=V[X+se],(ne=V[X+se+L])<N[Y+se]||N[Y+se+L]<Q)continue e;if(void 0!==(re=z?P(U,ae):P(ae,U)))return re}}}function E(L,C,P,z,j,R,V,D,B,N){var U=2*L,J=D*U,Y=B[J+C];e:for(var q=z,H=z*U;q<j;++q,H+=U){var X=V[q];if(X!==N){var Q=R[H+C],ne=R[H+C+L];if(!(Y<Q||ne<Y)){for(var re=C+1;re<L;++re)if(Q=R[H+re],(ne=R[H+re+L])<B[J+re]||B[J+re+L]<Q)continue e;var pe=P(X,N);if(void 0!==pe)return pe}}}}},2464:function(p,s,e){"use strict";p.exports=function(n,a,i,c,h,f){if(c<=i+1)return i;for(var b=i,v=c,g=c+i>>>1,y=2*n,d=g,m=h[y*g+a];b<v;){if(v-b<8){r(n,a,b,v,h,f),m=h[y*g+a];break}var w=v-b,u=Math.random()*w+b|0,S=h[y*u+a],_=Math.random()*w+b|0,E=h[y*_+a],L=Math.random()*w+b|0,C=h[y*L+a];S<=E?C>=E?(d=_,m=E):S>=C?(d=u,m=S):(d=L,m=C):E>=C?(d=_,m=E):C>=S?(d=u,m=S):(d=L,m=C);for(var P=y*(v-1),z=y*d,j=0;j<y;++j,++P,++z){var R=h[P];h[P]=h[z],h[z]=R}var V=f[v-1];for(f[v-1]=f[d],f[d]=V,P=y*(v-1),z=y*(d=o(n,a,b,v-1,h,f,m)),j=0;j<y;++j,++P,++z)R=h[P],h[P]=h[z],h[z]=R;if(V=f[v-1],f[v-1]=f[d],f[d]=V,g<d){for(v=d-1;b<v&&h[y*(v-1)+a]===m;)v-=1;v+=1}else{if(!(d<g))break;for(b=d+1;b<v&&h[y*b+a]===m;)b+=1}}return o(n,a,i,g,h,f,h[y*g+a])};var o=e(122)("lo<p0");function r(n,a,i,c,h,f){for(var b=2*n,v=b*(i+1)+a,g=i+1;g<c;++g,v+=b)for(var y=h[v],d=g,m=b*(g-1);d>i&&h[m+a]>y;--d,m-=b){for(var w=m,u=m+b,S=0;S<b;++S,++w,++u){var _=h[w];h[w]=h[u],h[u]=_}var E=f[d];f[d]=f[d-1],f[d-1]=E}}},122:function(p){"use strict";p.exports=function(e){return s[e]};var s={"lo===p0":function(e,o,r,n,a,i,c){for(var h=2*e,f=h*r,b=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]===c)if(v===y)v+=1,b+=h;else{for(var d=0;h>d;++d){var m=a[f+d];a[f+d]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0":function(e,o,r,n,a,i,c){for(var h=2*e,f=h*r,b=f,v=r,g=o,y=r;n>y;++y,f+=h)if(a[f+g]<c)if(v===y)v+=1,b+=h;else{for(var d=0;h>d;++d){var m=a[f+d];a[f+d]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<=p0":function(e,o,r,n,a,i,c){for(var h=2*e,f=h*r,b=f,v=r,g=e+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,b+=h;else{for(var d=0;h>d;++d){var m=a[f+d];a[f+d]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"hi<=p0":function(e,o,r,n,a,i,c){for(var h=2*e,f=h*r,b=f,v=r,g=e+o,y=r;n>y;++y,f+=h)if(a[f+g]<=c)if(v===y)v+=1,b+=h;else{for(var d=0;h>d;++d){var m=a[f+d];a[f+d]=a[b],a[b++]=m}var w=i[y];i[y]=i[v],i[v++]=w}return v},"lo<p0&&p0<=hi":function(e,o,r,n,a,i,c){for(var h=2*e,f=h*r,b=f,v=r,g=o,y=e+o,d=r;n>d;++d,f+=h)if(a[f+g]<c&&c<=a[f+y])if(v===d)v+=1,b+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[b],a[b++]=S}var _=i[d];i[d]=i[v],i[v++]=_}return v},"lo<=p0&&p0<=hi":function(e,o,r,n,a,i,c){for(var h=2*e,f=h*r,b=f,v=r,g=o,y=e+o,d=r;n>d;++d,f+=h)if(a[f+g]<=c&&c<=a[f+y])if(v===d)v+=1,b+=h;else{for(var u=0;h>u;++u){var S=a[f+u];a[f+u]=a[b],a[b++]=S}var _=i[d];i[d]=i[v],i[v++]=_}return v},"!(lo>=p0)&&!(p1>=hi)":function(e,o,r,n,a,i,c,h){for(var f=2*e,b=f*r,v=b,g=r,y=o,d=e+o,m=r;n>m;++m,b+=f)if(!(a[b+y]>=c||h>=a[b+d]))if(g===m)g+=1,v+=f;else{for(var S=0;f>S;++S){var _=a[b+S];a[b+S]=a[v],a[v++]=_}var E=i[m];i[m]=i[g],i[g++]=E}return g}}},309:function(p){"use strict";function s(h,f,b){for(var v=2*(h+1),g=h+1;g<=f;++g){for(var y=b[v++],d=b[v++],m=g,w=v-2;m-- >h;){var u=b[w-2],S=b[w-1];if(u<y||u===y&&S<d)break;b[w]=u,b[w+1]=S,w-=2}b[w]=y,b[w+1]=d}}function e(h,f,b){var v=b[h*=2],g=b[h+1];b[h]=b[f*=2],b[h+1]=b[f+1],b[f]=v,b[f+1]=g}function o(h,f,b){b[h*=2]=b[f*=2],b[h+1]=b[f+1]}function r(h,f,b,v){b*=2;var g=v[h*=2],y=v[h+1];v[h]=v[f*=2],v[h+1]=v[f+1],v[f]=v[b],v[f+1]=v[b+1],v[b]=g,v[b+1]=y}function n(h,f,b,v,g){g[h*=2]=g[f*=2],g[f]=b,g[h+1]=g[f+1],g[f+1]=v}function a(h,f,b){var v=b[h*=2],g=b[f*=2];return!(v<g)&&(v!==g||b[h+1]>b[f+1])}function i(h,f,b,v){var g=v[h*=2];return g<f||g===f&&v[h+1]<b}function c(h,f,b){var v=(f-h+1)/6|0,g=h+v,y=f-v,d=h+f>>1,m=d-v,w=d+v,u=g,S=m,_=d,E=w,L=y,C=h+1,P=f-1,z=0;a(u,S,b)&&(z=u,u=S,S=z),a(E,L,b)&&(z=E,E=L,L=z),a(u,_,b)&&(z=u,u=_,_=z),a(S,_,b)&&(z=S,S=_,_=z),a(u,E,b)&&(z=u,u=E,E=z),a(_,E,b)&&(z=_,_=E,E=z),a(S,L,b)&&(z=S,S=L,L=z),a(S,_,b)&&(z=S,S=_,_=z),a(E,L,b)&&(z=E,E=L,L=z);for(var j=b[2*S],R=b[2*S+1],V=b[2*E],D=b[2*E+1],B=2*u,N=2*_,U=2*L,J=2*g,Y=2*d,q=2*y,H=0;H<2;++H){var Q=b[N+H],ne=b[U+H];b[J+H]=b[B+H],b[Y+H]=Q,b[q+H]=ne}o(m,h,b),o(w,f,b);for(var re=C;re<=P;++re)if(i(re,j,R,b))re!==C&&e(re,C,b),++C;else if(!i(re,V,D,b))for(;;){if(i(P,V,D,b)){i(P,j,R,b)?(r(re,C,P,b),++C,--P):(e(re,P,b),--P);break}if(--P<re)break}n(h,C-1,j,R,b),n(f,P+1,V,D,b),C-2-h<=32?s(h,C-2,b):c(h,C-2,b),f-(P+2)<=32?s(P+2,f,b):c(P+2,f,b),P-C<=32?s(C,P,b):c(C,P,b)}p.exports=function(h,f){f<=128?s(0,f-1,h):c(0,f-1,h)}},1390:function(p,s,e){"use strict";p.exports={init:function(w){var u=r.nextPow2(w);c.length<u&&(o.free(c),c=o.mallocInt32(u)),h.length<u&&(o.free(h),h=o.mallocInt32(u)),f.length<u&&(o.free(f),f=o.mallocInt32(u)),b.length<u&&(o.free(b),b=o.mallocInt32(u)),v.length<u&&(o.free(v),v=o.mallocInt32(u)),g.length<u&&(o.free(g),g=o.mallocInt32(u));var S=8*u;y.length<S&&(o.free(y),y=o.mallocDouble(S))},sweepBipartite:function(w,u,S,_,E,L,C,P,z,j){for(var R=0,V=2*w,D=w-1,B=V-1,N=S;N<_;++N){var U=L[N],J=V*N;y[R++]=E[J+D],y[R++]=-(U+1),y[R++]=E[J+B],y[R++]=U}for(N=C;N<P;++N){U=j[N]+a;var Y=V*N;y[R++]=z[Y+D],y[R++]=-U,y[R++]=z[Y+B],y[R++]=U}var q=R>>>1;n(y,q);var H=0,X=0;for(N=0;N<q;++N){var Q=0|y[2*N+1];if(Q>=a)d(f,b,X--,Q=Q-a|0);else if(Q>=0)d(c,h,H--,Q);else if(Q<=-268435456){Q=-Q-a|0;for(var ne=0;ne<H;++ne)if(void 0!==(re=u(c[ne],Q)))return re;m(f,b,X++,Q)}else{for(Q=-Q-1|0,ne=0;ne<X;++ne){var re;if(void 0!==(re=u(Q,f[ne])))return re}m(c,h,H++,Q)}}},sweepComplete:function(w,u,S,_,E,L,C,P,z,j){for(var R=0,V=2*w,D=w-1,B=V-1,N=S;N<_;++N){var U=L[N]+1<<1,J=V*N;y[R++]=E[J+D],y[R++]=-U,y[R++]=E[J+B],y[R++]=U}for(N=C;N<P;++N){U=j[N]+1<<1;var Y=V*N;y[R++]=z[Y+D],y[R++]=1|-U,y[R++]=z[Y+B],y[R++]=1|U}var q=R>>>1;n(y,q);var H=0,X=0,Q=0;for(N=0;N<q;++N){var ne=0|y[2*N+1],re=1&ne;if(N<q-1&&ne>>1==y[2*N+3]>>1&&(re=2,N+=1),ne<0){for(var ae=-(ne>>1)-1,se=0;se<Q;++se)if(void 0!==(pe=u(v[se],ae)))return pe;if(0!==re)for(se=0;se<H;++se)if(void 0!==(pe=u(c[se],ae)))return pe;if(1!==re)for(se=0;se<X;++se){var pe;if(void 0!==(pe=u(f[se],ae)))return pe}0===re?m(c,h,H++,ae):1===re?m(f,b,X++,ae):2===re&&m(v,g,Q++,ae)}else ae=(ne>>1)-1,0===re?d(c,h,H--,ae):1===re?d(f,b,X--,ae):2===re&&d(v,g,Q--,ae)}},scanBipartite:function(w,u,S,_,E,L,C,P,z,j,R,V){var D=0,B=2*w,N=u,U=u+w,J=1,Y=1;_?Y=a:J=a;for(var q=E;q<L;++q){var H=q+J,X=B*q;y[D++]=C[X+N],y[D++]=-H,y[D++]=C[X+U],y[D++]=H}for(q=z;q<j;++q)H=q+Y,y[D++]=R[B*q+N],y[D++]=-H;var ne=D>>>1;n(y,ne);var re=0;for(q=0;q<ne;++q){var ae=0|y[2*q+1];if(ae<0){var se=!1;if((H=-ae)>=a?(se=!_,H-=a):(se=!!_,H-=1),se)m(c,h,re++,H);else{var pe=V[H],ke=B*H,me=R[ke+u+1],le=R[ke+u+1+w];e:for(var ue=0;ue<re;++ue){var Ee=c[ue],de=B*Ee;if(!(le<C[de+u+1]||C[de+u+1+w]<me)){for(var xe=u+2;xe<w;++xe)if(R[ke+xe+w]<C[de+xe]||C[de+xe+w]<R[ke+xe])continue e;var Te,we=P[Ee];if(void 0!==(Te=_?S(pe,we):S(we,pe)))return Te}}}}else d(c,h,re--,ae-J)}},scanComplete:function(w,u,S,_,E,L,C,P,z,j,R){for(var V=0,D=2*w,B=u,N=u+w,U=_;U<E;++U){var J=U+a,Y=D*U;y[V++]=L[Y+B],y[V++]=-J,y[V++]=L[Y+N],y[V++]=J}for(U=P;U<z;++U)J=U+1,y[V++]=j[D*U+B],y[V++]=-J;var H=V>>>1;n(y,H);var X=0;for(U=0;U<H;++U){var Q=0|y[2*U+1];if(Q<0)if((J=-Q)>=a)c[X++]=J-a;else{var ne=R[J-=1],re=D*J,ae=j[re+u+1],se=j[re+u+1+w];e:for(var pe=0;pe<X;++pe){var ke=c[pe],me=C[ke];if(me===ne)break;var le=D*ke;if(!(se<L[le+u+1]||L[le+u+1+w]<ae)){for(var ue=u+2;ue<w;++ue)if(j[re+ue+w]<L[le+ue]||L[le+ue+w]<j[re+ue])continue e;var Ee=S(me,ne);if(void 0!==Ee)return Ee}}}else{for(J=Q-a,pe=X-1;pe>=0;--pe)if(c[pe]===J){for(ue=pe+1;ue<X;++ue)c[ue-1]=c[ue];break}--X}}}};var o=e(5306),r=e(2288),n=e(309),a=1<<28,i=1024,c=o.mallocInt32(i),h=o.mallocInt32(i),f=o.mallocInt32(i),b=o.mallocInt32(i),v=o.mallocInt32(i),g=o.mallocInt32(i),y=o.mallocDouble(8192);function d(w,u,S,_){var E=u[_],L=w[S-1];w[E]=L,u[L]=E}function m(w,u,S,_){w[S]=_,u[_]=S}},7761:function(p,s,e){"use strict";var o=e(9971),r=e(743),n=e(2161),a=e(7098);function i(f){return[Math.min(f[0],f[1]),Math.max(f[0],f[1])]}function c(f,b){return f[0]-b[0]||f[1]-b[1]}function h(f,b,v){return b in f?f[b]:v}p.exports=function(f,b,v){Array.isArray(b)?(v=v||{},b=b||[]):(v=b||{},b=[]);var g=!!h(v,"delaunay",!0),y=!!h(v,"interior",!0),d=!!h(v,"exterior",!0),m=!!h(v,"infinity",!1);if(!y&&!d||0===f.length)return[];var w=o(f,b);if(g||y!==d||m){for(var u=r(f.length,b.map(i).sort(c)),S=0;S<w.length;++S){var _=w[S];u.addTriangle(_[0],_[1],_[2])}return g&&n(f,u),d?y?m?a(u,0,m):u.cells():a(u,1,m):a(u,-1)}return w}},2161:function(p,s,e){"use strict";var o=e(2227)[4];function r(n,a,i,c,h,f){var b=a.opposite(c,h);if(!(b<0)){if(h<c){var v=c;c=h,h=v,v=f,f=b,b=v}a.isConstraint(c,h)||o(n[c],n[h],n[f],n[b])<0&&i.push(c,h)}}e(5070),p.exports=function(n,a){for(var i=[],c=n.length,h=a.stars,f=0;f<c;++f)for(var b=h[f],v=1;v<b.length;v+=2)if(!((m=b[v])<f||a.isConstraint(f,m))){for(var g=b[v-1],y=-1,d=1;d<b.length;d+=2)if(b[d-1]===m){y=b[d];break}y<0||o(n[f],n[m],n[g],n[y])<0&&i.push(f,m)}for(;i.length>0;){for(var m=i.pop(),w=(g=-1,y=-1,b=h[f=i.pop()],1);w<b.length;w+=2){var u=b[w-1],S=b[w];u===m?y=S:S===m&&(g=u)}g<0||y<0||o(n[f],n[m],n[g],n[y])>=0||(a.flip(f,m),r(n,a,i,g,f,y),r(n,a,i,f,y,g),r(n,a,i,y,m,g),r(n,a,i,m,g,y))}}},7098:function(p,s,e){"use strict";var o,r=e(5070);function n(i,c,h,f,b,v,g){this.cells=i,this.neighbor=c,this.flags=f,this.constraint=h,this.active=b,this.next=v,this.boundary=g}function a(i,c){return i[0]-c[0]||i[1]-c[1]||i[2]-c[2]}p.exports=function(i,c,h){var f=function(C,P){for(var z=C.cells(),j=z.length,R=0;R<j;++R){var V=(Q=z[R])[0],D=Q[1],B=Q[2];D<B?D<V&&(Q[0]=D,Q[1]=B,Q[2]=V):B<V&&(Q[0]=B,Q[1]=V,Q[2]=D)}z.sort(a);var N=new Array(j);for(R=0;R<N.length;++R)N[R]=0;var U=[],J=[],Y=new Array(3*j),q=new Array(3*j),H=null;P&&(H=[]);var X=new n(z,Y,q,N,U,J,H);for(R=0;R<j;++R)for(var Q=z[R],ne=0;ne<3;++ne){var re=Y[3*R+ne]=X.locate(D=Q[(ne+1)%3],V=Q[ne],C.opposite(D,V)),ae=q[3*R+ne]=C.isConstraint(V,D);re<0&&(ae?J.push(R):(U.push(R),N[R]=1),P&&H.push([D,V,-1]))}return X}(i,h);if(0===c)return h?f.cells.concat(f.boundary):f.cells;for(var b=1,v=f.active,g=f.next,y=f.flags,d=f.cells,m=f.constraint,w=f.neighbor;v.length>0||g.length>0;){for(;v.length>0;){var u=v.pop();if(y[u]!==-b){y[u]=b;for(var S=0;S<3;++S){var _=w[3*u+S];_>=0&&0===y[_]&&(m[3*u+S]?g.push(_):(v.push(_),y[_]=b))}}}var E=g;g=v,v=E,g.length=0,b=-b}var L=function(C,P,z){for(var j=0,R=0;R<C.length;++R)P[R]===z&&(C[j++]=C[R]);return C.length=j,C}(d,y,c);return h?L.concat(f.boundary):L},n.prototype.locate=(o=[0,0,0],function(i,c,h){var f=i,b=c,v=h;return c<h?c<i&&(f=c,b=h,v=i):h<i&&(f=h,b=i,v=c),f<0?-1:(o[0]=f,o[1]=b,o[2]=v,r.eq(this.cells,o,a))})},9971:function(p,s,e){"use strict";var o=e(5070),r=e(417)[3];function n(g,y,d,m,w){this.a=g,this.b=y,this.idx=d,this.lowerIds=m,this.upperIds=w}function a(g,y,d,m){this.a=g,this.b=y,this.type=d,this.idx=m}function i(g,y){var d=g.a[0]-y.a[0]||g.a[1]-y.a[1]||g.type-y.type;return d||(0!==g.type&&(d=r(g.a,g.b,y.b))?d:g.idx-y.idx)}function c(g,y){return r(g.a,g.b,y)}function h(g,y,d,m,w){for(var u=o.lt(y,m,c),S=o.gt(y,m,c),_=u;_<S;++_){for(var E=y[_],L=E.lowerIds,C=L.length;C>1&&r(d[L[C-2]],d[L[C-1]],m)>0;)g.push([L[C-1],L[C-2],w]),C-=1;L.length=C,L.push(w);var P=E.upperIds;for(C=P.length;C>1&&r(d[P[C-2]],d[P[C-1]],m)<0;)g.push([P[C-2],P[C-1],w]),C-=1;P.length=C,P.push(w)}}function f(g,y){var d;return(d=g.a[0]<y.a[0]?r(g.a,g.b,y.a):r(y.b,y.a,g.a))?d:(d=y.b[0]<g.b[0]?r(g.a,g.b,y.b):r(y.b,y.a,g.b))||g.idx-y.idx}function b(g,y,d){var m=o.le(g,d,f),w=g[m],u=w.upperIds,S=u[u.length-1];w.upperIds=[S],g.splice(m+1,0,new n(d.a,d.b,d.idx,[S],u))}function v(g,y,d){var m=d.a;d.a=d.b,d.b=m;var w=o.eq(g,d,f);g[w-1].upperIds=g[w].upperIds,g.splice(w,1)}p.exports=function(g,y){for(var d=g.length,m=y.length,w=[],u=0;u<d;++u)w.push(new a(g[u],null,0,u));for(u=0;u<m;++u){var S=y[u],_=g[S[0]],E=g[S[1]];_[0]<E[0]?w.push(new a(_,E,2,u),new a(E,_,1,u)):_[0]>E[0]&&w.push(new a(E,_,2,u),new a(_,E,1,u))}w.sort(i);for(var L=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),C=[new n([L,1],[L,0],-1,[],[],[],[])],P=[],z=(u=0,w.length);u<z;++u){var j=w[u],R=j.type;0===R?h(P,C,g,j.a,j.idx):2===R?b(C,0,j):v(C,0,j)}return P}},743:function(p,s,e){"use strict";var o=e(5070);function r(i,c){this.stars=i,this.edges=c}p.exports=function(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=[];return new r(h,c)};var n=r.prototype;function a(i,c,h){for(var f=1,b=i.length;f<b;f+=2)if(i[f-1]===c&&i[f]===h)return i[f-1]=i[b-2],i[f]=i[b-1],void(i.length=b-2)}n.isConstraint=function(){var i=[0,0];function c(h,f){return h[0]-f[0]||h[1]-f[1]}return function(h,f){return i[0]=Math.min(h,f),i[1]=Math.max(h,f),o.eq(this.edges,i,c)>=0}}(),n.removeTriangle=function(i,c,h){var f=this.stars;a(f[i],c,h),a(f[c],h,i),a(f[h],i,c)},n.addTriangle=function(i,c,h){var f=this.stars;f[i].push(c,h),f[c].push(h,i),f[h].push(i,c)},n.opposite=function(i,c){for(var h=this.stars[c],f=1,b=h.length;f<b;f+=2)if(h[f]===i)return h[f-1];return-1},n.flip=function(i,c){var h=this.opposite(i,c),f=this.opposite(c,i);this.removeTriangle(i,c,h),this.removeTriangle(c,i,f),this.addTriangle(i,f,h),this.addTriangle(c,h,f)},n.edges=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var b=i[h],v=0,g=b.length;v<g;v+=2)c.push([b[v],b[v+1]]);return c},n.cells=function(){for(var i=this.stars,c=[],h=0,f=i.length;h<f;++h)for(var b=i[h],v=0,g=b.length;v<g;v+=2){var y=b[v],d=b[v+1];h<Math.min(y,d)&&c.push([h,y,d])}return c}},9887:function(p){"use strict";p.exports=function(s){for(var e=1,o=1;o<s.length;++o)for(var r=0;r<o;++r)if(s[o]<s[r])e=-e;else if(s[r]===s[o])return 0;return e}},9243:function(p,s,e){"use strict";var o=e(3094),r=e(6606);function n(c,h){for(var f=0,b=c.length,v=0;v<b;++v)f+=c[v]*h[v];return f}function a(c){var h=c.length;if(0===h)return[];var f=o([c.length+1,c.length+1],1),b=o([c.length+1],1);f[h][h]=0;for(var v=0;v<h;++v){for(var g=0;g<=v;++g)f[g][v]=f[v][g]=2*n(c[v],c[g]);b[v]=n(c[v],c[v])}var y=r(f,b),d=0,m=y[h+1];for(v=0;v<m.length;++v)d+=m[v];var w=new Array(h);for(v=0;v<h;++v){m=y[v];var u=0;for(g=0;g<m.length;++g)u+=m[g];w[v]=u/d}return w}function i(c){if(0===c.length)return[];for(var h=c[0].length,f=o([h]),b=a(c),v=0;v<c.length;++v)for(var g=0;g<h;++g)f[g]+=c[v][g]*b[v];return f}i.barycenetric=a,p.exports=i},1778:function(p,s,e){p.exports=function(r){for(var n=o(r),a=0,i=0;i<r.length;++i)for(var c=r[i],h=0;h<n.length;++h)a+=Math.pow(c[h]-n[h],2);return Math.sqrt(a/r.length)};var o=e(9243)},197:function(p,s,e){"use strict";p.exports=function(S,_,E){var L,R,D,B;if(E){L=_;for(var C=new Array(_.length),P=0;P<_.length;++P){var z=_[P];C[P]=[z[0],z[1],E[P]]}_=C}for(var j=(D=!!E,void 0,w(_,B=y(R=S,[],g(R)),D),!!B);u(S,_,!!E);)j=!0;if(E&&j)for(L.length=0,E.length=0,P=0;P<_.length;++P)L.push([(z=_[P])[0],z[1]]),E.push(z[2]);return j};var o=e(1731),r=e(2569),n=e(4434),a=e(5125),i=e(8846),c=e(7999),h=e(2826),f=e(8551),b=e(5528);function v(S){var _=c(S);return[f(_,-1/0),f(_,1/0)]}function g(S){for(var _=new Array(S.length),E=0;E<S.length;++E){var L=S[E];_[E]=[f(L[0],-1/0),f(L[1],-1/0),f(L[0],1/0),f(L[1],1/0)]}return _}function y(S,_,E){for(var L=_.length,C=new o(L),P=[],z=0;z<_.length;++z){var j=_[z],R=v(j[0]),V=v(j[1]);P.push([f(R[0],-1/0),f(V[0],-1/0),f(R[1],1/0),f(V[1],1/0)])}r(P,function(J,Y){C.link(J,Y)});var D=!0,B=new Array(L);for(z=0;z<L;++z)(U=C.find(z))!==z&&(D=!1,S[U]=[Math.min(S[z][0],S[U][0]),Math.min(S[z][1],S[U][1])]);if(D)return null;var N=0;for(z=0;z<L;++z){var U;(U=C.find(z))===z?(B[z]=N,S[N++]=S[z]):B[z]=-1}for(S.length=N,z=0;z<L;++z)B[z]<0&&(B[z]=B[C.find(z)]);return B}function d(S,_){return S[0]-_[0]||S[1]-_[1]}function m(S,_){return S[0]-_[0]||S[1]-_[1]||(S[2]<_[2]?-1:S[2]>_[2]?1:0)}function w(S,_,E){if(0!==S.length){if(_)for(var L=0;L<S.length;++L){var C=_[(z=S[L])[0]],P=_[z[1]];z[0]=Math.min(C,P),z[1]=Math.max(C,P)}else for(L=0;L<S.length;++L){var z;C=(z=S[L])[0],P=z[1],z[0]=Math.min(C,P),z[1]=Math.max(C,P)}S.sort(E?m:d);var j=1;for(L=1;L<S.length;++L){var R=S[L-1],V=S[L];(V[0]!==R[0]||V[1]!==R[1]||E&&V[2]!==R[2])&&(S[j++]=V)}S.length=j}}function u(S,_,E){var R,V,B,L=function(R,V){for(var D=new Array(V.length),B=0;B<V.length;++B){var N=V[B],U=R[N[0]],J=R[N[1]];D[B]=[f(Math.min(U[0],J[0]),-1/0),f(Math.min(U[1],J[1]),-1/0),f(Math.max(U[0],J[0]),1/0),f(Math.max(U[1],J[1]),1/0)]}return D}(S,_),C=(R=S,V=_,B=[],r(L,function(N,U){var J=V[N],Y=V[U];J[0]!==Y[0]&&J[0]!==Y[1]&&J[1]!==Y[0]&&J[1]!==Y[1]&&n(R[J[0]],R[J[1]],R[Y[0]],R[Y[1]])&&B.push([N,U])}),B),P=function(R,V,D,B){var N=[];return r(D,B,function(U,J){var Y=V[U];if(Y[0]!==J&&Y[1]!==J){var q=R[J];n(R[Y[0]],R[Y[1]],q,q)&&N.push([U,J])}}),N}(S,_,L,g(S)),z=function(R,V,D,B,N){var U,J,Y=R.map(function(Te){return[a(Te[0]),a(Te[1])]});for(U=0;U<D.length;++U){var q=D[U],H=q[1],X=V[J=q[0]],Q=V[H],ne=b(h(R[X[0]]),h(R[X[1]]),h(R[Q[0]]),h(R[Q[1]]));if(ne){var re=R.length;R.push([c(ne[0]),c(ne[1])]),Y.push(ne),B.push([J,re],[H,re])}}for(B.sort(function(Te,we){if(Te[0]!==we[0])return Te[0]-we[0];var K=Y[Te[1]],oe=Y[we[1]];return i(K[0],oe[0])||i(K[1],oe[1])}),U=B.length-1;U>=0;--U){var ae=V[J=(de=B[U])[0]],se=ae[0],pe=ae[1],ke=R[se],me=R[pe];if((ke[0]-me[0]||ke[1]-me[1])<0){var le=se;se=pe,pe=le}ae[0]=se;var ue,Ee=ae[1]=de[1];for(N&&(ue=ae[2]);U>0&&B[U-1][0]===J;){var de,xe=(de=B[--U])[1];V.push(N?[Ee,xe,ue]:[Ee,xe]),Ee=xe}V.push(N?[Ee,pe,ue]:[Ee,pe])}return Y}(S,_,C,P,E),j=y(S,z);return w(_,j,E),!!j||C.length>0||P.length>0}},5528:function(p,s,e){"use strict";p.exports=function(b,v,g,y){var d=i(v,b),m=i(y,g),w=f(d,m);if(0===a(w))return null;var u=f(m,i(b,g)),S=r(u,w),_=h(d,S);return c(b,_)};var o=e(3962),r=e(9189),n=e(4354),a=e(4951),i=e(6695),c=e(7584),h=e(4469);function f(b,v){return n(o(b[0],v[1]),o(b[1],v[0]))}},5692:function(p){p.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(p,s,e){"use strict";var o=e(5692),r=e(3578);function n(c){return[c[0]/255,c[1]/255,c[2]/255,c[3]]}function a(c){for(var h,f="#",b=0;b<3;++b)f+=("00"+(h=(h=c[b]).toString(16))).substr(h.length);return f}function i(c){return"rgba("+c.join(",")+")"}p.exports=function(c){var h,f,b,v,g,y,d,m,w,u;if(c||(c={}),m=(c.nshades||72)-1,d=c.format||"hex",(y=c.colormap)||(y="jet"),"string"==typeof y){if(y=y.toLowerCase(),!o[y])throw Error(y+" not a supported colorscale");g=o[y]}else{if(!Array.isArray(y))throw Error("unsupported colormap option",y);g=y.slice()}if(g.length>m+1)throw new Error(y+" map requires nshades to be at least size "+g.length);w=Array.isArray(c.alpha)?2!==c.alpha.length?[1,1]:c.alpha.slice():"number"==typeof c.alpha?[c.alpha,c.alpha]:[1,1],h=g.map(function(C){return Math.round(C.index*m)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var S=g.map(function(C,P){var z=g[P].index,j=g[P].rgb.slice();return 4===j.length&&j[3]>=0&&j[3]<=1||(j[3]=w[0]+(w[1]-w[0])*z),j}),_=[];for(u=0;u<h.length-1;++u){v=h[u+1]-h[u],f=S[u],b=S[u+1];for(var E=0;E<v;E++){var L=E/v;_.push([Math.round(r(f[0],b[0],L)),Math.round(r(f[1],b[1],L)),Math.round(r(f[2],b[2],L)),r(f[3],b[3],L)])}}return _.push(g[g.length-1].rgb.concat(w[1])),"hex"===d?_=_.map(a):"rgbaString"===d?_=_.map(i):"float"===d&&(_=_.map(n)),_}},9398:function(p,s,e){"use strict";p.exports=function(h,f,b,v){var g=o(f,b,v);if(0===g){var y=r(o(h,f,b)),d=r(o(h,f,v));if(y===d){if(0===y){var m=c(h,f,b);return m===c(h,f,v)?0:m?1:-1}return 0}return 0===d?y>0||c(h,f,v)?-1:1:0===y?d>0||c(h,f,b)?1:-1:r(d-y)}var w=o(h,f,b);return w>0?g>0&&o(h,f,v)>0?1:-1:w<0?g>0||o(h,f,v)>0?1:-1:o(h,f,v)>0||c(h,f,b)?1:-1};var o=e(417),r=e(7538),n=e(87),a=e(2019),i=e(9662);function c(h,f,b){var v=n(h[0],-f[0]),g=n(h[1],-f[1]),y=n(b[0],-f[0]),d=n(b[1],-f[1]),m=i(a(v,y),a(g,d));return m[m.length-1]>=0}},7538:function(p){"use strict";p.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(p){p.exports=function(o,r){var n=o.length,a=o.length-r.length;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return o[0]+o[1]-r[0]-r[1]||s(o[0],o[1])-s(r[0],r[1]);case 3:var i=o[0]+o[1],c=r[0]+r[1];if(a=i+o[2]-(c+r[2]))return a;var h=s(o[0],o[1]),f=s(r[0],r[1]);return s(h,o[2])-s(f,r[2])||s(h+o[2],i)-s(f+r[2],c);case 4:var b=o[0],v=o[1],g=o[2],y=o[3],d=r[0],m=r[1],w=r[2],u=r[3];return b+v+g+y-(d+m+w+u)||s(b,v,g,y)-s(d,m,w,u,d)||s(b+v,b+g,b+y,v+g,v+y,g+y)-s(d+m,d+w,d+u,m+w,m+u,w+u)||s(b+v+g,b+v+y,b+g+y,v+g+y)-s(d+m+w,d+m+u,d+w+u,m+w+u);default:for(var S=o.slice().sort(e),_=r.slice().sort(e),E=0;E<n;++E)if(a=S[E]-_[E])return a;return 0}};var s=Math.min;function e(o,r){return o-r}},1284:function(p,s,e){"use strict";var o=e(9209),r=e(9887);p.exports=function(n,a){return o(n,a)||r(n)-r(a)}},5537:function(p,s,e){"use strict";var o=e(8950),r=e(8722),n=e(3332);p.exports=function(a){var i=a.length;if(0===i)return[];if(1===i)return[[0]];var c=a[0].length;return 0===c?[]:1===c?o(a):2===c?r(a):n(a,c)}},8950:function(p){"use strict";p.exports=function(s){for(var e=0,o=0,r=1;r<s.length;++r)s[r][0]<s[e][0]&&(e=r),s[r][0]>s[o][0]&&(o=r);return e<o?[[e],[o]]:e>o?[[o],[e]]:[[e]]}},8722:function(p,s,e){"use strict";p.exports=function(r){var n=o(r),a=n.length;if(a<=2)return[];for(var i=new Array(a),c=n[a-1],h=0;h<a;++h){var f=n[h];i[h]=[c,f],c=f}return i};var o=e(3266)},3332:function(p,s,e){"use strict";p.exports=function(n,a){try{return o(n,!0)}catch{var i=r(n);if(i.length<=a)return[];var c=function(f,b){for(var v=f.length,g=new Array(v),y=0;y<b.length;++y)g[y]=f[b[y]];var d=b.length;for(y=0;y<v;++y)b.indexOf(y)<0&&(g[d++]=f[y]);return g}(n,i);return function(f,b){for(var v=f.length,g=b.length,y=0;y<v;++y)for(var d=f[y],m=0;m<d.length;++m){var w=d[m];if(w<g)d[m]=b[w];else{w-=g;for(var u=0;u<g;++u)w>=b[u]&&(w+=1);d[m]=w}}return f}(o(c,!0),i)}};var o=e(2183),r=e(2153)},9680:function(p){"use strict";p.exports=function(s,e,o,r,n,a){var i=n-1,c=n*n,h=i*i,f=(1+2*n)*h,b=n*h,v=c*(3-2*n),g=c*i;if(s.length){a||(a=new Array(s.length));for(var y=s.length-1;y>=0;--y)a[y]=f*s[y]+b*e[y]+v*o[y]+g*r[y];return a}return f*s+b*e+v*o+g*r},p.exports.derivative=function(s,e,o,r,n,a){var i=6*n*n-6*n,c=3*n*n-4*n+1,h=-6*n*n+6*n,f=3*n*n-2*n;if(s.length){a||(a=new Array(s.length));for(var b=s.length-1;b>=0;--b)a[b]=i*s[b]+c*e[b]+h*o[b]+f*r[b];return a}return i*s+c*e+h*o[b]+f*r}},4419:function(p,s,e){"use strict";var o=e(2183),r=e(1215);function n(i,c){this.point=i,this.index=c}function a(i,c){for(var h=i.point,f=c.point,b=h.length,v=0;v<b;++v){var g=f[v]-h[v];if(g)return g}return 0}p.exports=function(i,c){var h=i.length;if(0===h)return[];var f=i[0].length;if(f<1)return[];if(1===f)return function(z,j,R){if(1===z)return R?[[-1,0]]:[];var V=j.map(function(J,Y){return[J[0],Y]});V.sort(function(J,Y){return J[0]-Y[0]});for(var D=new Array(z-1),B=1;B<z;++B)D[B-1]=[V[B-1][1],V[B][1]];return R&&D.push([-1,D[0][1]],[D[z-1][1],-1]),D}(h,i,c);for(var b=new Array(h),v=1,g=0;g<h;++g){for(var y=i[g],d=new Array(f+1),m=0,w=0;w<f;++w){var u=y[w];d[w]=u,m+=u*u}d[f]=m,b[g]=new n(d,g),v=Math.max(m,v)}r(b,a),h=b.length;var S=new Array(h+f+1),_=new Array(h+f+1),E=(f+1)*(f+1)*v,L=new Array(f+1);for(g=0;g<=f;++g)L[g]=0;for(L[f]=E,S[0]=L.slice(),_[0]=-1,g=0;g<=f;++g)(d=L.slice())[g]=1,S[g+1]=d,_[g+1]=-1;for(g=0;g<h;++g){var C=b[g];S[g+f+1]=C.point,_[g+f+1]=C.index}var P=o(S,!1);if(P=P.filter(c?function(z){for(var j=0,R=0;R<=f;++R){var V=_[z[R]];if(V<0&&++j>=2)return!1;z[R]=V}return!0}:function(z){for(var j=0;j<=f;++j){var R=_[z[j]];if(R<0)return!1;z[j]=R}return!0}),1&f)for(g=0;g<P.length;++g)d=(C=P[g])[0],C[0]=C[1],C[1]=d;return P}},8362:function(p){var s=!1;if(typeof Float64Array<"u"){var e=new Float64Array(1),o=new Uint32Array(e.buffer);e[0]=1,s=!0,1072693248===o[1]?(p.exports=function(n){return e[0]=n,[o[0],o[1]]},p.exports.pack=function(n,a){return o[0]=n,o[1]=a,e[0]},p.exports.lo=function(n){return e[0]=n,o[0]},p.exports.hi=function(n){return e[0]=n,o[1]}):1072693248===o[0]?(p.exports=function(n){return e[0]=n,[o[1],o[0]]},p.exports.pack=function(n,a){return o[1]=n,o[0]=a,e[0]},p.exports.lo=function(n){return e[0]=n,o[1]},p.exports.hi=function(n){return e[0]=n,o[0]}):s=!1}if(!s){var r=new Buffer(8);p.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},p.exports.pack=function(n,a){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(a,4,!0),r.readDoubleLE(0,!0)},p.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},p.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}p.exports.sign=function(n){return p.exports.hi(n)>>>31},p.exports.exponent=function(n){return(p.exports.hi(n)<<1>>>21)-1023},p.exports.fraction=function(n){var a=p.exports.lo(n),i=p.exports.hi(n),c=1048575&i;return 2146435072&i&&(c+=1048576),[a,c]},p.exports.denormalized=function(n){return!(2146435072&p.exports.hi(n))}},3094:function(p){"use strict";function s(e,o,r){var n=0|e[r];if(n<=0)return[];var a,i=new Array(n);if(r===e.length-1)for(a=0;a<n;++a)i[a]=o;else for(a=0;a<n;++a)i[a]=s(e,o,r+1);return i}p.exports=function(e,o){switch(void 0===o&&(o=0),typeof e){case"number":if(e>0)return function(r,n){var a,i;for(a=new Array(r),i=0;i<r;++i)a[i]=n;return a}(0|e,o);break;case"object":if("number"==typeof e.length)return s(e,o,0)}return[]}},8348:function(p,s,e){"use strict";p.exports=function(r,n){var a=r.length;if("number"!=typeof n){n=0;for(var i=0;i<a;++i){var c=r[i];n=Math.max(n,c[0],c[1])}n=1+(0|n)}n|=0;var h=new Array(n);for(i=0;i<n;++i)h[i]=[];for(i=0;i<a;++i)h[(c=r[i])[0]].push(c[1]),h[c[1]].push(c[0]);for(var f=0;f<n;++f)o(h[f],function(b,v){return b-v});return h};var o=e(1215)},5795:function(p){"use strict";p.exports=function(s,e,o){var r=e||0,n=o||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[r*s[12]+s[8],r*s[13]+s[9],r*s[14]+s[10],r*s[15]+s[11]],[n*s[12]-s[8],n*s[13]-s[9],n*s[14]-s[10],n*s[15]-s[11]]]}},8444:function(p,s,e){"use strict";p.exports=function(h,f,b){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof h?new a(v=c(h),v,0):new a(h,c(h.length),0);case 2:if("number"==typeof f){var v=c(h.length);return new a(h,v,+f)}b=0;case 3:if(h.length!==f.length)throw new Error("state and velocity lengths must match");return new a(h,f,b)}};var o=e(9680),r=e(5070);function n(h,f,b){return Math.min(f,Math.max(h,b))}function a(h,f,b){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var v=0;v<this.dimension;++v)this.bounds[0][v]=-1/0,this.bounds[1][v]=1/0;this._state=h.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[b],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var i=a.prototype;function c(h){for(var f=new Array(h),b=0;b<h;++b)f[b]=0;return f}i.flush=function(h){var f=r.gt(this._time,h)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},i.curve=function(h){var f=this._time,b=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,d=this._velocity,m=this.dimension,w=this.bounds;if(v<0)for(var u=m-1,S=0;S<m;++S,--u)g[S]=y[u];else if(v>=b-1){u=y.length-1;var _=h-f[b-1];for(S=0;S<m;++S,--u)g[S]=y[u]+_*d[u]}else{u=m*(v+1)-1;var E=f[v],L=f[v+1]-E||1,C=this._scratch[1],P=this._scratch[2],z=this._scratch[3],j=this._scratch[4],R=!0;for(S=0;S<m;++S,--u)C[S]=y[u],z[S]=d[u]*L,P[S]=y[u+m],j[S]=d[u+m]*L,R=R&&C[S]===P[S]&&z[S]===j[S]&&0===z[S];if(R)for(S=0;S<m;++S)g[S]=C[S];else o(C,z,P,j,(h-E)/L,g)}var V=w[0],D=w[1];for(S=0;S<m;++S)g[S]=n(V[S],D[S],g[S]);return g},i.dcurve=function(h){var f=this._time,b=f.length,v=r.le(f,h),g=this._scratch[0],y=this._state,d=this._velocity,m=this.dimension;if(v>=b-1)for(var w=y.length-1,u=0;u<m;++u,--w)g[u]=d[w];else{w=m*(v+1)-1;var S=f[v],_=f[v+1]-S||1,E=this._scratch[1],L=this._scratch[2],C=this._scratch[3],P=this._scratch[4],z=!0;for(u=0;u<m;++u,--w)E[u]=y[w],C[u]=d[w]*_,L[u]=y[w+m],P[u]=d[w+m]*_,z=z&&E[u]===L[u]&&C[u]===P[u]&&0===C[u];if(z)for(u=0;u<m;++u)g[u]=0;else for(o.derivative(E,C,L,P,(h-S)/_,g),u=0;u<m;++u)g[u]/=_}return g},i.lastT=function(){var h=this._time;return h[h.length-1]},i.stable=function(){for(var h=this._velocity,f=h.length,b=this.dimension-1;b>=0;--b)if(h[--f])return!1;return!0},i.jump=function(h){var f=this.lastT(),b=this.dimension;if(!(h<f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,d=this.bounds,m=d[0],w=d[1];this._time.push(f,h);for(var u=0;u<2;++u)for(var S=0;S<b;++S)v.push(v[y++]),g.push(0);for(this._time.push(h),S=b;S>0;--S)v.push(n(m[S-1],w[S-1],arguments[S])),g.push(0)}},i.push=function(h){var f=this.lastT(),b=this.dimension;if(!(h<f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,d=h-f,m=this.bounds,w=m[0],u=m[1],S=d>1e-6?1/d:0;this._time.push(h);for(var _=b;_>0;--_){var E=n(w[_-1],u[_-1],arguments[_]);v.push(E),g.push((E-v[y++])*S)}}},i.set=function(h){var f=this.dimension;if(!(h<this.lastT()||arguments.length!==f+1)){var b=this._state,v=this._velocity,g=this.bounds,y=g[0],d=g[1];this._time.push(h);for(var m=f;m>0;--m)b.push(n(y[m-1],d[m-1],arguments[m])),v.push(0)}},i.move=function(h){var f=this.lastT(),b=this.dimension;if(!(h<=f||arguments.length!==b+1)){var v=this._state,g=this._velocity,y=v.length-this.dimension,d=this.bounds,m=d[0],w=d[1],u=h-f,S=u>1e-6?1/u:0;this._time.push(h);for(var _=b;_>0;--_){var E=arguments[_];v.push(n(m[_-1],w[_-1],v[y++]+E)),g.push(E*S)}}},i.idle=function(h){var f=this.lastT();if(!(h<f)){var b=this.dimension,v=this._state,g=this._velocity,y=v.length-b,d=this.bounds,m=d[0],w=d[1],u=h-f;this._time.push(h);for(var S=b-1;S>=0;--S)v.push(n(m[S],w[S],v[y]+u*g[y])),g.push(0),y+=1}}},7080:function(p){"use strict";function s(y,d,m,w,u,S){this._color=y,this.key=d,this.value=m,this.left=w,this.right=u,this._count=S}function e(y){return new s(y._color,y.key,y.value,y.left,y.right,y._count)}function o(y,d){return new s(y,d.key,d.value,d.left,d.right,d._count)}function r(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function n(y,d){this._compare=y,this.root=d}p.exports=function(y){return new n(y||g,null)};var a=n.prototype;function i(y,d){var m;return d.left&&(m=i(y,d.left))?m:(m=y(d.key,d.value))||(d.right?i(y,d.right):void 0)}function c(y,d,m,w){var u;return d(y,w.key)<=0&&(w.left&&(u=c(y,d,m,w.left))||(u=m(w.key,w.value)))?u:w.right?c(y,d,m,w.right):void 0}function h(y,d,m,w,u){var S,_=m(y,u.key),E=m(d,u.key);return _<=0&&(u.left&&(S=h(y,d,m,w,u.left))||E>0&&(S=w(u.key,u.value)))?S:E>0&&u.right?h(y,d,m,w,u.right):void 0}function f(y,d){this.tree=y,this._stack=d}Object.defineProperty(a,"keys",{get:function(){var y=[];return this.forEach(function(d,m){y.push(d)}),y}}),Object.defineProperty(a,"values",{get:function(){var y=[];return this.forEach(function(d,m){y.push(m)}),y}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(y,d){for(var m=this._compare,w=this.root,u=[],S=[];w;){var _=m(y,w.key);u.push(w),S.push(_),w=_<=0?w.left:w.right}u.push(new s(0,y,d,null,null,1));for(var E=u.length-2;E>=0;--E)w=u[E],u[E]=S[E]<=0?new s(w._color,w.key,w.value,u[E+1],w.right,w._count+1):new s(w._color,w.key,w.value,w.left,u[E+1],w._count+1);for(E=u.length-1;E>1;--E){var L=u[E-1];if(w=u[E],1===L._color||1===w._color)break;var C=u[E-2];if(C.left===L)if(L.left===w){if(!(P=C.right)||0!==P._color){C._color=0,C.left=L.right,L._color=1,L.right=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((z=u[E-3]).left===C?z.left=L:z.right=L);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else{if(!(P=C.right)||0!==P._color){L.right=w.left,C._color=0,C.left=w.right,w._color=1,w.left=L,w.right=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((z=u[E-3]).left===C?z.left=w:z.right=w);break}L._color=1,C.right=o(1,P),C._color=0,E-=1}else if(L.right===w){if(!(P=C.left)||0!==P._color){C._color=0,C.right=L.left,L._color=1,L.left=C,u[E-2]=L,u[E-1]=w,r(C),r(L),E>=3&&((z=u[E-3]).right===C?z.right=L:z.left=L);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}else{var P;if(!(P=C.left)||0!==P._color){var z;L.left=w.right,C._color=0,C.right=w.left,w._color=1,w.right=L,w.left=C,u[E-2]=w,u[E-1]=L,r(C),r(L),r(w),E>=3&&((z=u[E-3]).right===C?z.right=w:z.left=w);break}L._color=1,C.left=o(1,P),C._color=0,E-=1}}return u[0]._color=1,new n(m,u[0])},a.forEach=function(y,d,m){if(this.root)switch(arguments.length){case 1:return i(y,this.root);case 2:return c(d,this._compare,y,this.root);case 3:return this._compare(d,m)>=0?void 0:h(d,m,this._compare,y,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var y=[],d=this.root;d;)y.push(d),d=d.left;return new f(this,y)}}),Object.defineProperty(a,"end",{get:function(){for(var y=[],d=this.root;d;)y.push(d),d=d.right;return new f(this,y)}}),a.at=function(y){if(y<0)return new f(this,[]);for(var d=this.root,m=[];;){if(m.push(d),d.left){if(y<d.left._count){d=d.left;continue}y-=d.left._count}if(!y)return new f(this,m);if(y-=1,!d.right||y>=d.right._count)break;d=d.right}return new f(this,[])},a.ge=function(y){for(var d=this._compare,m=this.root,w=[],u=0;m;){var S=d(y,m.key);w.push(m),S<=0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.gt=function(y){for(var d=this._compare,m=this.root,w=[],u=0;m;){var S=d(y,m.key);w.push(m),S<0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.lt=function(y){for(var d=this._compare,m=this.root,w=[],u=0;m;){var S=d(y,m.key);w.push(m),S>0&&(u=w.length),m=S<=0?m.left:m.right}return w.length=u,new f(this,w)},a.le=function(y){for(var d=this._compare,m=this.root,w=[],u=0;m;){var S=d(y,m.key);w.push(m),S>=0&&(u=w.length),m=S<0?m.left:m.right}return w.length=u,new f(this,w)},a.find=function(y){for(var d=this._compare,m=this.root,w=[];m;){var u=d(y,m.key);if(w.push(m),0===u)return new f(this,w);m=u<=0?m.left:m.right}return new f(this,[])},a.remove=function(y){var d=this.find(y);return d?d.remove():this},a.get=function(y){for(var d=this._compare,m=this.root;m;){var w=d(y,m.key);if(0===w)return m.value;m=w<=0?m.left:m.right}};var b=f.prototype;function v(y,d){y.key=d.key,y.value=d.value,y.left=d.left,y.right=d.right,y._color=d._color,y._count=d._count}function g(y,d){return y<d?-1:y>d?1:0}Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new f(this.tree,this._stack.slice())},b.remove=function(){var y=this._stack;if(0===y.length)return this.tree;var d=new Array(y.length),m=y[y.length-1];d[d.length-1]=new s(m._color,m.key,m.value,m.left,m.right,m._count);for(var w=y.length-2;w>=0;--w)d[w]=(m=y[w]).left===y[w+1]?new s(m._color,m.key,m.value,d[w+1],m.right,m._count):new s(m._color,m.key,m.value,m.left,d[w+1],m._count);if((m=d[d.length-1]).left&&m.right){var u=d.length;for(m=m.left;m.right;)d.push(m),m=m.right;var S=d[u-1];for(d.push(new s(m._color,S.key,S.value,m.left,m.right,m._count)),d[u-1].key=m.key,d[u-1].value=m.value,w=d.length-2;w>=u;--w)d[w]=new s((m=d[w])._color,m.key,m.value,m.left,d[w+1],m._count);d[u-1].left=d[u]}if(0===(m=d[d.length-1])._color){var _=d[d.length-2];for(_.left===m?_.left=null:_.right===m&&(_.right=null),d.pop(),w=0;w<d.length;++w)d[w]._count--;return new n(this.tree._compare,d[0])}if(m.left||m.right){for(m.left?v(m,m.left):m.right&&v(m,m.right),m._color=1,w=0;w<d.length-1;++w)d[w]._count--;return new n(this.tree._compare,d[0])}if(1===d.length)return new n(this.tree._compare,null);for(w=0;w<d.length;++w)d[w]._count--;var E=d[d.length-2];return function(L){for(var C,P,z,j,R=L.length-1;R>=0;--R){if(C=L[R],0===R)return void(C._color=1);if((P=L[R-1]).left===C){if((z=P.right).right&&0===z.right._color)return j=(z=P.right=e(z)).right=e(z.right),P.right=z.left,z.left=P,z.right=j,z._color=P._color,C._color=1,P._color=1,j._color=1,r(P),r(z),R>1&&((V=L[R-2]).left===P?V.left=z:V.right=z),void(L[R-1]=z);if(z.left&&0===z.left._color)return j=(z=P.right=e(z)).left=e(z.left),P.right=j.left,z.left=j.right,j.left=P,j.right=z,j._color=P._color,P._color=1,z._color=1,C._color=1,r(P),r(z),r(j),R>1&&((V=L[R-2]).left===P?V.left=j:V.right=j),void(L[R-1]=j);if(1===z._color){if(0===P._color)return P._color=1,void(P.right=o(0,z));P.right=o(0,z);continue}z=e(z),P.right=z.left,z.left=P,z._color=P._color,P._color=0,r(P),r(z),R>1&&((V=L[R-2]).left===P?V.left=z:V.right=z),L[R-1]=z,L[R]=P,R+1<L.length?L[R+1]=C:L.push(C),R+=2}else{if((z=P.left).left&&0===z.left._color)return j=(z=P.left=e(z)).left=e(z.left),P.left=z.right,z.right=P,z.left=j,z._color=P._color,C._color=1,P._color=1,j._color=1,r(P),r(z),R>1&&((V=L[R-2]).right===P?V.right=z:V.left=z),void(L[R-1]=z);if(z.right&&0===z.right._color)return j=(z=P.left=e(z)).right=e(z.right),P.left=j.right,z.right=j.left,j.right=P,j.left=z,j._color=P._color,P._color=1,z._color=1,C._color=1,r(P),r(z),r(j),R>1&&((V=L[R-2]).right===P?V.right=j:V.left=j),void(L[R-1]=j);if(1===z._color){if(0===P._color)return P._color=1,void(P.left=o(0,z));P.left=o(0,z);continue}var V;z=e(z),P.left=z.right,z.right=P,z._color=P._color,P._color=0,r(P),r(z),R>1&&((V=L[R-2]).right===P?V.right=z:V.left=z),L[R-1]=z,L[R]=P,R+1<L.length?L[R+1]=C:L.push(C),R+=2}}}(d),E.left===m?E.left=null:E.right=null,new n(this.tree._compare,d[0])},Object.defineProperty(b,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var y=0,d=this._stack;if(0===d.length){var m=this.tree.root;return m?m._count:0}d[d.length-1].left&&(y=d[d.length-1].left._count);for(var w=d.length-2;w>=0;--w)d[w+1]===d[w].right&&(++y,d[w].left&&(y+=d[w].left._count));return y},enumerable:!0}),b.next=function(){var y=this._stack;if(0!==y.length){var d=y[y.length-1];if(d.right)for(d=d.right;d;)y.push(d),d=d.left;else for(y.pop();y.length>0&&y[y.length-1].right===d;)d=y[y.length-1],y.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var y=this._stack;if(0===y.length)return!1;if(y[y.length-1].right)return!0;for(var d=y.length-1;d>0;--d)if(y[d-1].left===y[d])return!0;return!1}}),b.update=function(y){var d=this._stack;if(0===d.length)throw new Error("Can't update empty node!");var m=new Array(d.length),w=d[d.length-1];m[m.length-1]=new s(w._color,w.key,y,w.left,w.right,w._count);for(var u=d.length-2;u>=0;--u)m[u]=(w=d[u]).left===d[u+1]?new s(w._color,w.key,w.value,m[u+1],w.right,w._count):new s(w._color,w.key,w.value,w.left,m[u+1],w._count);return new n(this.tree._compare,m[0])},b.prev=function(){var y=this._stack;if(0!==y.length){var d=y[y.length-1];if(d.left)for(d=d.left;d;)y.push(d),d=d.right;else for(y.pop();y.length>0&&y[y.length-1].left===d;)d=y[y.length-1],y.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var y=this._stack;if(0===y.length)return!1;if(y[y.length-1].left)return!0;for(var d=y.length-1;d>0;--d)if(y[d-1].right===y[d])return!0;return!1}})},7453:function(p,s,e){"use strict";p.exports=function(_,E){var L=new f(_);return L.update(E),L};var o=e(9557),r=e(1681),n=e(1011),a=e(2864),i=e(8468),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(_,E){return _[0]=E[0],_[1]=E[1],_[2]=E[2],_}function f(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(_)}var b=f.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}b.update=function(_){function E(J,Y,q){if(q in _){var H,X=_[q],Q=this[q];this[q]=H=(J?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?[Y(X[0]),Y(X[1]),Y(X[2])]:[Y(X),Y(X),Y(X)];for(var ne=0;ne<3;++ne)if(H[ne]!==Q[ne])return!0}return!1}_=_||{};var L,C=E.bind(this,!1,Number),P=E.bind(this,!1,Boolean),z=E.bind(this,!1,String),j=E.bind(this,!0,function(J){if(Array.isArray(J)){if(3===J.length)return[+J[0],+J[1],+J[2],1];if(4===J.length)return[+J[0],+J[1],+J[2],+J[3]]}return[0,0,0,1]}),R=!1,V=!1;if("bounds"in _)for(var D=_.bounds,B=0;B<2;++B)for(var N=0;N<3;++N)D[B][N]!==this.bounds[B][N]&&(V=!0),this.bounds[B][N]=D[B][N];if("ticks"in _)for(L=_.ticks,R=!0,this.autoTicks=!1,B=0;B<3;++B)this.tickSpacing[B]=0;else C("tickSpacing")&&(this.autoTicks=!0,V=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),V=!0,R=!0,this._firstInit=!1),V&&this.autoTicks&&(L=i.create(this.bounds,this.tickSpacing),R=!0),R){for(B=0;B<3;++B)L[B].sort(function(J,Y){return J.x-Y.x});i.equal(L,this.ticks)?R=!1:this.ticks=L}P("tickEnable"),z("tickFont")&&(R=!0),C("tickSize"),C("tickAngle"),C("tickPad"),j("tickColor");var U=z("labels");z("labelFont")&&(U=!0),P("labelEnable"),C("labelSize"),C("labelPad"),j("labelColor"),P("lineEnable"),P("lineMirror"),C("lineWidth"),j("lineColor"),P("lineTickEnable"),P("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),j("lineTickColor"),P("gridEnable"),C("gridWidth"),j("gridColor"),P("zeroEnable"),j("zeroLineColor"),C("zeroLineWidth"),P("backgroundEnable"),j("backgroundColor"),this._text?this._text&&(U||R)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=o(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&R&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var g=[new v,new v,new v];function y(_,E,L,C,P){for(var z=_.primalOffset,j=_.primalMinor,R=_.mirrorOffset,V=_.mirrorMinor,D=C[E],B=0;B<3;++B)if(E!==B){var N=z,U=R,J=j,Y=V;D&1<<B&&(N=R,U=z,J=V,Y=j),N[B]=L[0][B],U[B]=L[1][B],P[B]>0?(J[B]=-1,Y[B]=0):(J[B]=0,Y[B]=1)}}var d=[0,0,0],m={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(_){};var w=[0,0,0],u=[0,0,0],S=[0,0,0];b.draw=function(_){for(var E=this.gl,L=(_=_||m).model||c,C=_.view||c,P=_.projection||c,z=this.bounds,j=_._ortho||!1,R=a(L,C,P,z,j),V=R.cubeEdges,D=R.axis,Y=(j?2:1)*this.pixelRatio*(P[3]*C[12]+P[7]*C[13]+P[11]*C[14]+P[15]*C[15])/E.drawingBufferHeight,q=0;q<3;++q)this.lastCubeProps.cubeEdges[q]=V[q],this.lastCubeProps.axis[q]=D[q];var H=g;for(q=0;q<3;++q)y(g[q],q,this.bounds,V,D);E=this.gl;var X,Q,ne,he,ye,Me,Re,Pe,De,fe,ge,be,re=d;for(q=0;q<3;++q)re[q]=this.backgroundEnable[q]?D[q]:0;for(this._background.draw(L,C,P,z,re,this.backgroundColor),this._lines.bind(L,C,P,this),q=0;q<3;++q){var ae=[0,0,0];ae[q]=D[q]>0?z[1][q]:z[0][q];for(var se=0;se<2;++se){var pe=(q+1+se)%3,ke=(q+1+(1^se))%3;this.gridEnable[pe]&&this._lines.drawGrid(pe,ke,this.bounds,ae,this.gridColor[pe],this.gridWidth[pe]*this.pixelRatio)}for(se=0;se<2;++se)pe=(q+1+se)%3,this.zeroEnable[ke=(q+1+(1^se))%3]&&Math.min(z[0][ke],z[1][ke])<=0&&Math.max(z[0][ke],z[1][ke])>=0&&this._lines.drawZero(pe,ke,this.bounds,ae,this.zeroLineColor[ke],this.zeroLineWidth[ke]*this.pixelRatio)}for(q=0;q<3;++q){this.lineEnable[q]&&this._lines.drawAxisLine(q,this.bounds,H[q].primalOffset,this.lineColor[q],this.lineWidth[q]*this.pixelRatio),this.lineMirror[q]&&this._lines.drawAxisLine(q,this.bounds,H[q].mirrorOffset,this.lineColor[q],this.lineWidth[q]*this.pixelRatio);var me=h(w,H[q].primalMinor),le=h(u,H[q].mirrorMinor),ue=this.lineTickLength;for(se=0;se<3;++se){var Ee=Y/L[5*se];me[se]*=ue[se]*Ee,le[se]*=ue[se]*Ee}this.lineTickEnable[q]&&this._lines.drawAxisTicks(q,H[q].primalOffset,me,this.lineTickColor[q],this.lineTickWidth[q]*this.pixelRatio),this.lineTickMirror[q]&&this._lines.drawAxisTicks(q,H[q].mirrorOffset,le,this.lineTickColor[q],this.lineTickWidth[q]*this.pixelRatio)}function de(he){(ne=[0,0,0])[he]=1}for(this._lines.unbind(),this._text.bind(L,C,P,this.pixelRatio),q=0;q<3;++q){var Te=H[q].primalMinor,we=H[q].mirrorMinor,K=h(S,H[q].primalOffset);for(se=0;se<3;++se)this.lineTickEnable[q]&&(K[se]+=Y*Te[se]*Math.max(this.lineTickLength[se],0)/L[5*se]);var oe=[0,0,0];if(oe[q]=1,this.tickEnable[q]){for(-3600===this.tickAngle[q]?(this.tickAngle[q]=0,this.tickAlign[q]="auto"):this.tickAlign[q]=-1,X[0]="auto"===(X=[this.tickAlign[q],.5,Q=1])[0]?0:parseInt(""+X[0]),ne=[0,0,0],Re=void 0,Pe=void 0,De=void 0,fe=void 0,ge=void 0,be=void 0,fe=(ye=Te)[Pe=((he=q)+2)%3],ge=(Me=we)[Re=(he+1)%3],be=Me[Pe],(De=ye[Re])>0&&be>0||De>0&&be<0||De<0&&be>0||De<0&&be<0?de(Re):(fe>0&&ge>0||fe>0&&ge<0||fe<0&&ge>0||fe<0&&ge<0)&&de(Pe),se=0;se<3;++se)K[se]+=Y*Te[se]*this.tickPad[se]/L[5*se];this._text.drawTicks(q,this.tickSize[q],this.tickAngle[q],K,this.tickColor[q],oe,ne,X)}if(this.labelEnable[q]){for(Q=0,ne=[0,0,0],this.labels[q].length>4&&(de(q),Q=1),X[0]="auto"===(X=[this.labelAlign[q],.5,Q])[0]?0:parseInt(""+X[0]),se=0;se<3;++se)K[se]+=Y*Te[se]*this.labelPad[se]/L[5*se];K[q]+=.5*(z[0][q]+z[1][q]),this._text.drawLabel(q,this.labelSize[q],this.labelAngle[q],K,this.labelColor[q],[0,0,0],ne,X)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(p,s,e){"use strict";p.exports=function(c){for(var h=[],f=[],b=0,v=0;v<3;++v)for(var g=(v+1)%3,y=(v+2)%3,d=[0,0,0],m=[0,0,0],w=-1;w<=1;w+=2){f.push(b,b+2,b+1,b+1,b+2,b+3),d[v]=w,m[v]=w;for(var u=-1;u<=1;u+=2){d[g]=u;for(var S=-1;S<=1;S+=2)d[y]=S,h.push(d[0],d[1],d[2],m[0],m[1],m[2]),b+=1}var _=g;g=y,y=_}var E=o(c,new Float32Array(h)),L=o(c,new Uint16Array(f),c.ELEMENT_ARRAY_BUFFER),C=r(c,[{buffer:E,type:c.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:c.FLOAT,size:3,offset:12,stride:24}],L),P=n(c);return P.attributes.position.location=0,P.attributes.normal.location=1,new a(c,E,C,P)};var o=e(5827),r=e(2944),n=e(1943).bg;function a(c,h,f,b){this.gl=c,this.buffer=h,this.vao=f,this.shader=b}var i=a.prototype;i.draw=function(c,h,f,b,v,g){for(var y=!1,d=0;d<3;++d)y=y||v[d];if(y){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:c,view:h,projection:f,bounds:b,enable:v,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(p,s,e){"use strict";p.exports=function(u,S,_,E,L){r(i,S,u),r(i,_,i);for(var C=0,P=0;P<2;++P){f[2]=E[P][2];for(var z=0;z<2;++z){f[1]=E[z][1];for(var j=0;j<2;++j)f[0]=E[j][0],v(c[C],f,i),C+=1}}var R=-1;for(P=0;P<8;++P){for(var V=c[P][3],D=0;D<3;++D)h[P][D]=c[P][D]/V;L&&(h[P][2]*=-1),V<0&&(R<0||h[P][2]<h[R][2])&&(R=P)}if(R<0){R=0;for(var B=0;B<3;++B){for(var N=(B+2)%3,U=(B+1)%3,J=-1,Y=-1,q=0;q<2;++q){var H=(Q=q<<B)+(q<<N)+(1-q<<U),X=Q+(1-q<<N)+(q<<U);a(h[Q],h[H],h[X],b)<0||(q?J=1:Y=1)}if(J<0||Y<0)Y>J&&(R|=1<<B);else{for(q=0;q<2;++q){H=(Q=q<<B)+(q<<N)+(1-q<<U);var Q,ne=y([c[Q],c[H],c[X=Q+(1-q<<N)+(q<<U)],c[Q+(1<<N)+(1<<U)]]);q?J=ne:Y=ne}Y>J&&(R|=1<<B)}}}var re=7^R,ae=-1;for(P=0;P<8;++P)P!==R&&P!==re&&(ae<0||h[ae][1]>h[P][1])&&(ae=P);var se=-1;for(P=0;P<3;++P)(ke=ae^1<<P)!==R&&ke!==re&&(se<0&&(se=ke),(U=h[ke])[0]<h[se][0]&&(se=ke));var pe=-1;for(P=0;P<3;++P){var ke;(ke=ae^1<<P)!==R&&ke!==re&&ke!==se&&(pe<0&&(pe=ke),(U=h[ke])[0]>h[pe][0]&&(pe=ke))}var me=d;me[0]=me[1]=me[2]=0,me[o.log2(se^ae)]=ae&se,me[o.log2(ae^pe)]=ae&pe;var le=7^pe;le===R||le===re?me[o.log2(pe^(le=7^se))]=le&pe:me[o.log2(se^le)]=le&se;var ue=m,Ee=R;for(B=0;B<3;++B)ue[B]=Ee&1<<B?-1:1;return w};var o=e(2288),r=e(104),n=e(4670),a=e(417),i=new Array(16),c=new Array(8),h=new Array(8),f=new Array(3),b=[0,0,0];function v(u,S,_){for(var E=0;E<4;++E){u[E]=_[12+E];for(var L=0;L<3;++L)u[E]+=S[L]*_[4*L+E]}}!function(){for(var u=0;u<8;++u)c[u]=[1,1,1,1],h[u]=[1,1,1]}();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function y(u){for(var S=0;S<g.length;++S)if((u=n.positive(u,g[S])).length<3)return 0;var _=u[0],E=_[0]/_[3],L=_[1]/_[3],C=0;for(S=1;S+1<u.length;++S){var P=u[S],z=u[S+1];C+=Math.abs((P[0]/P[3]-E)*(z[1]/z[3]-L)-(P[1]/P[3]-L)*(z[0]/z[3]-E))}return C}var d=[1,1,1],m=[0,0,0],w={cubeEdges:d,axis:m}},1681:function(p,s,e){"use strict";p.exports=function(d,m,w){var u=[],S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var P=u.length/3|0,z=0;z<w[C].length;++z){var j=+w[C][z].x;u.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1)}var R=u.length/3|0;S[C]=P,_[C]=R-P,P=u.length/3|0;for(var V=0;V<w[C].length;++V)u.push(j=+w[C][V].x,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1);R=u.length/3|0,E[C]=P,L[C]=R-P}var D=o(d,new Float32Array(u)),B=r(d,[{buffer:D,type:d.FLOAT,size:3,stride:0,offset:0}]),N=n(d);return N.attributes.position.location=0,new g(d,D,B,N,_,S,L,E)};var o=e(5827),r=e(2944),n=e(1943).j,a=[0,0,0],i=[0,0,0],c=[0,0,0],h=[0,0,0],f=[1,1];function b(d){return d[0]=d[1]=d[2]=0,d}function v(d,m){return d[0]=m[0],d[1]=m[1],d[2]=m[2],d}function g(d,m,w,u,S,_,E,L){this.gl=d,this.vertBuffer=m,this.vao=w,this.shader=u,this.tickCount=S,this.tickOffset=_,this.gridCount=E,this.gridOffset=L}var y=g.prototype;y.bind=function(d,m,w){this.shader.bind(),this.shader.uniforms.model=d,this.shader.uniforms.view=m,this.shader.uniforms.projection=w,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},y.unbind=function(){this.vao.unbind()},y.drawAxisLine=function(d,m,w,u,S){var _=b(i);this.shader.uniforms.majorAxis=i,_[d]=m[1][d]-m[0][d],this.shader.uniforms.minorAxis=_;var E,L=v(h,w);L[d]+=m[0][d],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=u,(E=b(c))[(d+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=b(c))[(d+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},y.drawAxisTicks=function(d,m,w,u,S){if(this.tickCount[d]){var _=b(a);_[d]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=u,this.shader.uniforms.lineWidth=S;var E=b(c);E[d]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}},y.drawGrid=function(d,m,w,u,S,_){if(this.gridCount[d]){var E=b(i);E[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[m]+=w[0][m],this.shader.uniforms.offset=L;var C=b(a);C[d]=1,this.shader.uniforms.majorAxis=C;var P=b(c);P[d]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}},y.drawZero=function(d,m,w,u,S,_){var E=b(i);this.shader.uniforms.majorAxis=E,E[d]=w[1][d]-w[0][d],this.shader.uniforms.minorAxis=E;var L=v(h,u);L[d]+=w[0][d],this.shader.uniforms.offset=L;var C=b(c);C[m]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},y.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(p,s,e){"use strict";var o=e(6832),r=e(5158),n=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);s.j=function(b){return r(b,n,a,null,[{name:"position",type:"vec3"}])};var i=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);s.f=function(b){return r(b,i,c,null,[{name:"position",type:"vec3"}])};var h=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),f=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);s.bg=function(b){return r(b,h,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(p,s,e){"use strict";p.exports=function(v,g,y,d,m,w){var u=o(v),S=r(v,[{buffer:u,size:3}]),_=a(v);_.attributes.position.location=0;var E=new h(v,_,u,S);return E.update(g,y,d,m,w),E};var o=e(5827),r=e(2944),n=e(875),a=e(1943).f,i=window||k.global||{},c=i.__TEXT_CACHE||{};function h(v,g,y,d){this.gl=v,this.shader=g,this.buffer=y,this.vao=d,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}i.__TEXT_CACHE={};var f=h.prototype,b=[0,0];f.bind=function(v,g,y,d){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=v,m.view=g,m.projection=y,m.pixelScale=d,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},f.unbind=function(){this.vao.unbind()},f.update=function(v,g,y,d,m){var w=[];function u(j,R,V,D,B,N){var U=c[V];U||(U=c[V]={});var J=U[R];J||(J=U[R]=function(se,pe){try{return n(se,pe)}catch(ke){return console.warn('error vectorizing text:"'+se+'" error:',ke),{cells:[],positions:[]}}}(R,{triangles:!0,font:V,textAlign:"center",textBaseline:"middle",lineSpacing:B,styletags:N}));for(var Y=(D||12)/12,q=J.positions,H=J.cells,X=0,Q=H.length;X<Q;++X)for(var ne=H[X],re=2;re>=0;--re){var ae=q[ne[re]];w.push(Y*ae[0],-Y*ae[1],j)}}for(var S=[0,0,0],_=[0,0,0],E=[0,0,0],L=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=w.length/3|0,u(.5*(v[0][P]+v[1][P]),g[P],y[P],12,1.25,C),L[P]=(w.length/3|0)-E[P],S[P]=w.length/3|0;for(var z=0;z<d[P].length;++z)d[P][z].text&&u(d[P][z].x,d[P][z].text,d[P][z].font||m,d[P][z].fontSize||12,1.25,C);_[P]=(w.length/3|0)-S[P]}this.buffer.update(w),this.tickOffset=S,this.tickCount=_,this.labelOffset=E,this.labelCount=L},f.drawTicks=function(v,g,y,d,m,w,u,S){this.tickCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},f.drawLabel=function(v,g,y,d,m,w,u,S){this.labelCount[v]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=m,this.shader.uniforms.angle=y,this.shader.uniforms.scale=g,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(p,s){"use strict";function e(o,r){var n=o+"",a=n.indexOf("."),i=0;a>=0&&(i=n.length-a-1);var c=Math.pow(10,i),h=Math.round(o*r*c),f=h+"";if(f.indexOf("e")>=0)return f;var b=h/c,v=h%c;h<0?(b=0|-Math.ceil(b),v=0|-v):(b=0|Math.floor(b),v|=0);var g=""+b;if(h<0&&(g="-"+g),i){for(var y=""+v;y.length<i;)y="0"+y;return g+"."+y}return g}s.create=function(o,r){for(var n=[],a=0;a<3;++a){for(var i=[],c=0;c*r[a]<=o[1][a];++c)i.push({x:c*r[a],text:e(r[a],c)});for(c=-1;c*r[a]>=o[0][a];--c)i.push({x:c*r[a],text:e(r[a],c)});n.push(i)}return n},s.equal=function(o,r){for(var n=0;n<3;++n){if(o[n].length!==r[n].length)return!1;for(var a=0;a<o[n].length;++a){var i=o[n][a],c=r[n][a];if(i.x!==c.x||i.text!==c.text||i.font!==c.font||i.fontColor!==c.fontColor||i.fontSize!==c.fontSize||i.dx!==c.dx||i.dy!==c.dy)return!1}}return!0}},2771:function(p,s,e){"use strict";p.exports=function(w,u,S,_,E){var L=u.model||h,C=u.view||h,P=u.projection||h,z=u._ortho||!1,j=w.bounds,R=(E=E||n(L,C,P,j,z)).axis;a(f,C,L),a(f,P,f);for(var V=d,D=0;D<3;++D)V[D].lo=1/0,V[D].hi=-1/0,V[D].pixelsPerDataUnit=1/0;var B=o(i(f,f));i(f,f);for(var N=0;N<3;++N){var U=(N+1)%3,J=(N+2)%3,Y=m;e:for(D=0;D<2;++D){var q=[];if(R[N]<0!=!!D){Y[N]=j[D][N];for(var H=0;H<2;++H){Y[U]=j[H^D][U];for(var X=0;X<2;++X)Y[J]=j[X^H^D][J],q.push(Y.slice())}var Q=z?5:4;for(H=Q;H===Q;++H){if(0===q.length)continue e;q=r.positive(q,B[H])}for(H=0;H<q.length;++H){var ne=y(m,f,J=q[H],S,_);for(X=0;X<3;++X)V[X].lo=Math.min(V[X].lo,J[X]),V[X].hi=Math.max(V[X].hi,J[X]),X!==N&&(V[X].pixelsPerDataUnit=Math.min(V[X].pixelsPerDataUnit,Math.abs(ne[X])))}}}}return V};var o=e(5795),r=e(4670),n=e(2864),a=e(104),i=e(2142),c=e(6342),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function b(w,u,S){this.lo=w,this.hi=u,this.pixelsPerDataUnit=S}var v=[0,0,0,1],g=[0,0,0,1];function y(w,u,S,_,E){for(var L=0;L<3;++L){for(var C=v,P=g,z=0;z<3;++z)P[z]=C[z]=S[z];P[3]=C[3]=1,P[L]+=1,c(P,P,u),P[3]<0&&(w[L]=1/0),C[L]-=1,c(C,C,u),C[3]<0&&(w[L]=1/0);var j=(C[0]/C[3]-P[0]/P[3])*_,R=(C[1]/C[3]-P[1]/P[3])*E;w[L]=.25*Math.sqrt(j*j+R*R)}return w}var d=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],m=[0,0,0]},5827:function(p,s,e){"use strict";var o=e(5306),r=e(7498),n=e(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(b,v,g,y,d){this.gl=b,this.type=v,this.handle=g,this.length=y,this.usage=d}var c=i.prototype;function h(b,v,g,y,d,m){var w=d.length*d.BYTES_PER_ELEMENT;if(m<0)return b.bufferData(v,d,y),w;if(w+m>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(v,m,d),g}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(b,v){if("number"!=typeof v&&(v=-1),this.bind(),"object"==typeof b&&void 0!==b.shape){var g=b.dtype;if(a.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&"uint16"!==g?"uint32":"uint16"),g===b.dtype&&function(w,u){for(var S=1,_=u.length-1;_>=0;--_){if(u[_]!==S)return!1;S*=w[_]}return!0}(b.shape,b.stride))this.length=h(this.gl,this.type,this.length,this.usage,0===b.offset&&b.data.length===b.shape[0]?b.data:b.data.subarray(b.offset,b.shape[0]),v);else{var y=o.malloc(b.size,g),d=n(y,b.shape);r.assign(d,b),this.length=h(this.gl,this.type,this.length,this.usage,v<0?y:y.subarray(0,b.size),v),o.free(y)}}else if(Array.isArray(b)){var m;m=function f(b,v){for(var g=o.malloc(b.length,v),y=b.length,d=0;d<y;++d)g[d]=b[d];return g}(b,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=h(this.gl,this.type,this.length,this.usage,v<0?m:m.subarray(0,b.length),v),o.free(m)}else if("object"==typeof b&&"number"==typeof b.length)this.length=h(this.gl,this.type,this.length,this.usage,b,v);else{if("number"!=typeof b&&void 0!==b)throw new Error("gl-buffer: Invalid data type");if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(b|=0)<=0&&(b=1),this.gl.bufferData(this.type,0|b,this.usage),this.length=b}},p.exports=function(b,v,g,y){if(y=y||b.DYNAMIC_DRAW,(g=g||b.ARRAY_BUFFER)!==b.ARRAY_BUFFER&&g!==b.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==b.DYNAMIC_DRAW&&y!==b.STATIC_DRAW&&y!==b.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var d=b.createBuffer(),m=new i(b,g,d,0,y);return m.update(v),m}},1140:function(p,s,e){"use strict";var o=e(2858);p.exports=function(n,a){var i=n.positions,c=n.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(0===n.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var f=0,b=1/0,v=-1/0,g=1/0,y=-1/0,d=1/0,m=-1/0,w=null,u=null,S=[],_=1/0,E=!1,L=0;L<i.length;L++){var C=i[L];b=Math.min(C[0],b),v=Math.max(C[0],v),g=Math.min(C[1],g),y=Math.max(C[1],y),d=Math.min(C[2],d),m=Math.max(C[2],m);var P=c[L];if(o.length(P)>f&&(f=o.length(P)),L){var z=2*o.distance(w,C)/(o.length(u)+o.length(P));z?(_=Math.min(_,z),E=!1):E=!0}E||(w=C,u=P),S.push(P)}var R=[v,y,m];a&&(a[0]=[b,g,d],a[1]=R),0===f&&(f=1);var V=1/f;isFinite(_)||(_=1),h.vectorScale=_;var D=n.coneSize||.5;n.absoluteConeSize&&(D=n.absoluteConeSize*V),h.coneScale=D,L=0;for(var B=0;L<i.length;L++)for(var N=(C=i[L])[0],U=C[1],J=C[2],Y=S[L],q=o.length(Y)*V,H=0;H<8;H++){h.positions.push([N,U,J,B++]),h.positions.push([N,U,J,B++]),h.positions.push([N,U,J,B++]),h.positions.push([N,U,J,B++]),h.positions.push([N,U,J,B++]),h.positions.push([N,U,J,B++]),h.vectors.push(Y),h.vectors.push(Y),h.vectors.push(Y),h.vectors.push(Y),h.vectors.push(Y),h.vectors.push(Y),h.vertexIntensity.push(q,q,q),h.vertexIntensity.push(q,q,q);var X=h.positions.length;h.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return h};var r=e(7234);p.exports.createMesh=e(5028),p.exports.createConeMesh=function(n,a){return p.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},5028:function(p,s,e){"use strict";var o=e(5158),r=e(5827),n=e(2944),a=e(8931),i=e(104),c=e(7437),h=e(5050),f=e(9156),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(m,w,u,S,_,E,L,C,P,z,j){this.gl=m,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=u,this.pickShader=S,this.trianglePositions=_,this.triangleVectors=E,this.triangleColors=C,this.triangleUVs=P,this.triangleIds=L,this.triangleVAO=z,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=j,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var g=v.prototype;function y(m,w){var u=o(m,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return u.attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u}function d(m,w){var u=o(m,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u}g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(m){this.pickId=m},g.update=function(m){m=m||{};var w=this.gl;this.dirty=!0,"lightPosition"in m&&(this.lightPosition=m.lightPosition),"opacity"in m&&(this.opacity=m.opacity),"ambient"in m&&(this.ambientLight=m.ambient),"diffuse"in m&&(this.diffuseLight=m.diffuse),"specular"in m&&(this.specularLight=m.specular),"roughness"in m&&(this.roughness=m.roughness),"fresnel"in m&&(this.fresnel=m.fresnel),void 0!==m.tubeScale&&(this.tubeScale=m.tubeScale),void 0!==m.vectorScale&&(this.vectorScale=m.vectorScale),void 0!==m.coneScale&&(this.coneScale=m.coneScale),void 0!==m.coneOffset&&(this.coneOffset=m.coneOffset),m.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ae){for(var se=f({colormap:ae,nshades:256,format:"rgba"}),pe=new Uint8Array(1024),ke=0;ke<256;++ke){for(var me=se[ke],le=0;le<3;++le)pe[4*ke+le]=me[le];pe[4*ke+3]=255*me[3]}return h(pe,[256,256,4],[4,0,1])}(m.colormap)),this.texture.generateMipmap());var u=m.cells,S=m.positions,_=m.vectors;if(S&&u&&_){var E=[],L=[],C=[],P=[],z=[];this.cells=u,this.positions=S,this.vectors=_;var j=m.meshColor||[1,1,1,1],R=m.vertexIntensity,V=1/0,D=-1/0;if(R)if(m.vertexIntensityBounds)V=+m.vertexIntensityBounds[0],D=+m.vertexIntensityBounds[1];else for(var B=0;B<R.length;++B){var N=R[B];V=Math.min(V,N),D=Math.max(D,N)}else for(B=0;B<S.length;++B)N=S[B][2],V=Math.min(V,N),D=Math.max(D,N);for(this.intensity=R||function(ae){for(var se=ae.length,pe=new Array(se),ke=0;ke<se;++ke)pe[ke]=ae[ke][2];return pe}(S),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=0;B<S.length;++B)for(var U=S[B],J=0;J<3;++J)!isNaN(U[J])&&isFinite(U[J])&&(this.bounds[0][J]=Math.min(this.bounds[0][J],U[J]),this.bounds[1][J]=Math.max(this.bounds[1][J],U[J]));var Y=0;e:for(B=0;B<u.length;++B){var q=u[B];if(3===q.length){for(J=0;J<3;++J){U=S[X=q[J]];for(var H=0;H<3;++H)if(isNaN(U[H])||!isFinite(U[H]))continue e}for(J=0;J<3;++J){var X;U=S[X=q[2-J]],E.push(U[0],U[1],U[2],U[3]);var Q=_[X];L.push(Q[0],Q[1],Q[2],Q[3]||0);var ne;C.push(j[0],j[1],j[2],3===j.length?1:j[3]),P.push((ne=R?[(R[X]-V)/(D-V),0]:[(U[2]-V)/(D-V),0])[0],ne[1]),z.push(B)}Y+=1}}this.triangleCount=Y,this.trianglePositions.update(E),this.triangleVectors.update(L),this.triangleColors.update(C),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(z))}},g.drawTransparent=g.draw=function(m){for(var w=this.gl,u=(m=m||{}).model||b,S=m.view||b,_=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);var C={model:u,view:S,projection:_,inverseModel:b.slice(),clipBounds:E,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=c(C.inverseModel,C.model),w.disable(w.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(i(P,C.view,C.model),i(P,C.projection,P),c(P,P),L=0;L<3;++L)C.eyePosition[L]=P[12+L]/P[15];var z=P[15];for(L=0;L<3;++L)z+=this.lightPosition[L]*P[4*L+3];for(L=0;L<3;++L){for(var j=P[12+L],R=0;R<3;++R)j+=P[4*R+L]*this.lightPosition[R];C.lightPosition[L]=j/z}if(this.triangleCount>0){var V=this.triShader;V.bind(),V.uniforms=C,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(m){for(var w=this.gl,u=(m=m||{}).model||b,S=m.view||b,_=m.projection||b,E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)E[0][L]=Math.max(E[0][L],this.clipBounds[0][L]),E[1][L]=Math.min(E[1][L],this.clipBounds[1][L]);this._model=[].slice.call(u),this._view=[].slice.call(S),this._projection=[].slice.call(_),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var C={model:u,view:S,projection:_,clipBounds:E,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(m){if(!m||m.id!==this.pickId)return null;var w=m.value[0]+256*m.value[1]+65536*m.value[2],u=this.cells[w],S=this.positions[u[1]].slice(0,3),_={position:S,dataCoordinate:S,index:Math.floor(u[1]/48)};return"cone"===this.traceType?_.index=Math.floor(u[1]/48):"streamtube"===this.traceType&&(_.intensity=this.intensity[u[1]],_.velocity=this.vectors[u[1]].slice(0,3),_.divergence=this.vectors[u[1]][3],_.index=w),_},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},p.exports=function(m,w,u){var S=u.shaders;1===arguments.length&&(m=(w=m).gl);var _=y(m,S),E=d(m,S),L=a(m,h(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap(),L.minFilter=m.LINEAR_MIPMAP_LINEAR,L.magFilter=m.LINEAR;var C=r(m),P=r(m),z=r(m),j=r(m),R=r(m),D=new v(m,L,_,E,C,P,R,z,j,n(m,[{buffer:C,type:m.FLOAT,size:4},{buffer:R,type:m.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:m.FLOAT,size:4},{buffer:j,type:m.FLOAT,size:2},{buffer:P,type:m.FLOAT,size:4}]),u.traceType||"cone");return D.update(w),D}},7234:function(p,s,e){var o=e(6832),r=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=o(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(p){p.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(p,s,e){var o=e(1950);p.exports=function(r){return o[r]}},3110:function(p,s,e){"use strict";p.exports=function(v){var g=v.gl,y=o(g),d=r(g,[{buffer:y,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:g.FLOAT,size:3,offset:28,stride:40}]),m=n(g);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var w=new i(g,y,d,m);return w.update(v),w};var o=e(5827),r=e(2944),n=e(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,d){this.gl=v,this.shader=d,this.buffer=g,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=i.prototype;function h(v,g){for(var y=0;y<3;++y)v[0][y]=Math.min(v[0][y],g[y]),v[1][y]=Math.max(v[1][y],g[y])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(v){var g=this.gl,y=this.shader.uniforms;this.shader.bind();var d=y.view=v.view||a,m=y.projection=v.projection||a;y.model=v.model||a,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var E=(v._ortho?2:1)*this.pixelRatio*(m[3]*d[12]+m[7]*d[13]+m[11]*d[14]+m[15]*d[15])/g.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)g.lineWidth(this.lineWidth[L]*this.pixelRatio),y.capSize=this.capSize[L]*E,this.lineCount[L]&&g.drawArrays(g.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var f=function(){for(var v=new Array(3),g=0;g<3;++g){for(var y=[],d=1;d<=2;++d)for(var m=-1;m<=1;m+=2){var w=[0,0,0];w[(d+g)%3]=m,y.push(w)}v[g]=y}return v}();function b(v,g,y,d){for(var m=f[d],w=0;w<m.length;++w){var u=m[w];v.push(g[0],g[1],g[2],y[0],y[1],y[2],y[3],u[0],u[1],u[2])}return m.length}c.update=function(v){"lineWidth"in(v=v||{})&&(this.lineWidth=v.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in v&&(this.capSize=v.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in v&&(this.opacity=+v.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=v.color||[[0,0,0],[0,0,0],[0,0,0]],y=v.position,d=v.error;if(Array.isArray(g[0])||(g=[g,g,g]),y&&d){var m=[],w=y.length,u=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=u;e:for(var _=0;_<w;++_){for(var E=y[_],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var C,P=d[_],z=g[S];Array.isArray(z[0])&&(z=g[_]),3===z.length?z=[z[0],z[1],z[2],1]:4===z.length&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][S])||isNaN(P[1][S])||(P[0][S]<0&&((C=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,C[0],C[1],C[2],z[0],z[1],z[2],z[3],0,0,0),h(this.bounds,C),u+=2+b(m,C,z,S)),P[1][S]>0&&((C=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,C[0],C[1],C[2],z[0],z[1],z[2],z[3],0,0,0),h(this.bounds,C),u+=2+b(m,C,z,S)))}this.lineCount[S]=u-this.lineOffset[S]}this.buffer.update(m)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(p,s,e){"use strict";var o=e(6832),r=e(5158),n=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);p.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(p,s,e){"use strict";var o=e(8931);p.exports=function(w,u,S,_){r||(r=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=w.getExtension("WEBGL_draw_buffers");if(!c&&E&&function(V,D){var B=V.getParameter(D.MAX_COLOR_ATTACHMENTS_WEBGL);c=new Array(B+1);for(var N=0;N<=B;++N){for(var U=new Array(B),J=0;J<N;++J)U[J]=V.COLOR_ATTACHMENT0+J;for(J=N;J<B;++J)U[J]=V.NONE;c[N]=U}}(w,E),Array.isArray(u)&&(_=S,S=0|u[1],u=0|u[0]),"number"!=typeof u)throw new Error("gl-fbo: Missing shape parameter");var L=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(u<0||u>L||S<0||S>L)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(_=_||{})){if((C=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>w.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var P=w.UNSIGNED_BYTE,z=w.getExtension("OES_texture_float");if(_.float&&C>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");P=w.FLOAT}else _.preferFloat&&C>0&&z&&(P=w.FLOAT);var j=!0;"depth"in _&&(j=!!_.depth);var R=!1;return"stencil"in _&&(R=!!_.stencil),new y(w,u,S,P,C,j,R,E)};var r,n,a,i,c=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function f(w,u){w.bindFramebuffer(w.FRAMEBUFFER,u[0]),w.bindRenderbuffer(w.RENDERBUFFER,u[1]),w.bindTexture(w.TEXTURE_2D,u[2])}function b(w){switch(w){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function v(w,u,S,_,E,L){if(!_)return null;var C=o(w,u,S,E,_);return C.magFilter=w.NEAREST,C.minFilter=w.NEAREST,C.mipSamples=1,C.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,L,w.TEXTURE_2D,C.handle,0),C}function g(w,u,S,_,E){var L=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,L),w.renderbufferStorage(w.RENDERBUFFER,_,u,S),w.framebufferRenderbuffer(w.FRAMEBUFFER,E,w.RENDERBUFFER,L),L}function y(w,u,S,_,E,L,C,P){this.gl=w,this._shape=[0|u,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=L,this._useStencil=C;var j=this,R=[0|u,0|S];Object.defineProperties(R,{0:{get:function(){return j._shape[0]},set:function(V){return j.width=V}},1:{get:function(){return j._shape[1]},set:function(V){return j.height=V}}}),this._shapeVector=R,function(V){var D=h(V.gl),B=V.gl,N=V.handle=B.createFramebuffer(),U=V._shape[0],J=V._shape[1],Y=V.color.length,q=V._ext,H=V._useStencil,X=V._useDepth,Q=V._colorType;B.bindFramebuffer(B.FRAMEBUFFER,N);for(var ne=0;ne<Y;++ne)V.color[ne]=v(B,U,J,Q,B.RGBA,B.COLOR_ATTACHMENT0+ne);0===Y?(V._color_rb=g(B,U,J,B.RGBA4,B.COLOR_ATTACHMENT0),q&&q.drawBuffersWEBGL(c[0])):Y>1&&q.drawBuffersWEBGL(c[Y]);var re=B.getExtension("WEBGL_depth_texture");re?H?V.depth=v(B,U,J,re.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):X&&(V.depth=v(B,U,J,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):X&&H?V._depth_rb=g(B,U,J,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):X?V._depth_rb=g(B,U,J,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):H&&(V._depth_rb=g(B,U,J,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var ae=B.checkFramebufferStatus(B.FRAMEBUFFER);if(ae!==B.FRAMEBUFFER_COMPLETE){for(V._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(V.handle),V.handle=null,V.depth&&(V.depth.dispose(),V.depth=null),V._depth_rb&&(B.deleteRenderbuffer(V._depth_rb),V._depth_rb=null),ne=0;ne<V.color.length;++ne)V.color[ne].dispose(),V.color[ne]=null;V._color_rb&&(B.deleteRenderbuffer(V._color_rb),V._color_rb=null),f(B,D),b(ae)}f(B,D)}(this)}var d=y.prototype;function m(w,u,S){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==u||w._shape[1]!==S){var _=w.gl,E=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(u<0||u>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=u,w._shape[1]=S;for(var L=h(_),C=0;C<w.color.length;++C)w.color[C].shape=w._shape;w._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,w._shape[0],w._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,w.handle);var P=_.checkFramebufferStatus(_.FRAMEBUFFER);P!==_.FRAMEBUFFER_COMPLETE&&(w.dispose(),f(_,L),b(P)),f(_,L)}}Object.defineProperties(d,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),2!==w.length)throw new Error("gl-fbo: Shape vector must be length 2");var u=0|w[0],S=0|w[1];return m(this,u,S),[u,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return m(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return m(this,this._shape[0],w|=0),w},enumerable:!1}}),d.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},d.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var u=0;u<this.color.length;++u)this.color[u].dispose(),this.color[u]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(p,s,e){var o=e(8974).sprintf,r=e(6603),n=e(9365),a=e(8008);p.exports=function(i,c,h){"use strict";var f=n(c)||"of unknown name (see npm glsl-shader-name)",b="unknown type";void 0!==h&&(b=h===r.FRAGMENT_SHADER?"fragment":"vertex");for(var v=o("Error compiling %s shader %s:\n",b,f),g=o("%s%s",v,i),y=i.split("\n"),d={},m=0;m<y.length;m++){var w=y[m];if(""!==w&&"\0"!==w){var u=parseInt(w.split(":")[2]);if(isNaN(u))throw new Error(o("Could not parse error: %s",w));d[u]=w}}var S=a(c).split("\n");for(m=0;m<S.length;m++)if((d[m+3]||d[m+2]||d[m+1])&&(v+=S[m]+"\n",d[m+1])){var _=d[m+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),v+=o("^^^ %s\n\n",_)}return{long:v.trim(),short:g.trim()}}},6386:function(p,s,e){"use strict";p.exports=function(g,y){var d=g.gl,m=new h(g,a(d,c.vertex,c.fragment),a(d,c.pickVertex,c.pickFragment),i(d),i(d),i(d),i(d));return m.update(y),g.addObject(m),m};var o=e(5070),r=e(9560),n=e(5306),a=e(5158),i=e(5827),c=e(1292);function h(g,y,d,m,w,u,S){this.plot=g,this.shader=y,this.pickShader=d,this.positionBuffer=m,this.weightBuffer=w,this.colorBuffer=u,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var f,g,y,b=h.prototype,v=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=(f=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,y=this.shader,d=this.bounds,m=this.numVertices;if(!(m<=0)){var w=g.gl,u=g.dataBox,_=d[3]-d[1],E=u[2]-u[0],L=u[3]-u[1];f[0]=2*(d[2]-d[0])/E,f[4]=2*_/L,f[6]=2*(d[0]-u[0])/E-1,f[7]=2*(d[1]-u[1])/L-1,y.bind();var C=y.uniforms;C.viewTransform=f,C.shape=this.shape;var P=y.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,m)}}),b.drawPick=(g=[1,0,0,0,1,0,0,0,1],y=[0,0,0,0],function(d){var m=this.plot,w=this.pickShader,u=this.bounds,S=this.numVertices;if(!(S<=0)){var _=m.gl,E=m.dataBox,C=u[3]-u[1],P=E[2]-E[0],z=E[3]-E[1];g[0]=2*(u[2]-u[0])/P,g[4]=2*C/z,g[6]=2*(u[0]-E[0])/P-1,g[7]=2*(u[1]-E[1])/z-1;for(var j=0;j<4;++j)y[j]=d>>8*j&255;this.pickOffset=d,w.bind();var R=w.uniforms;R.viewTransform=g,R.pickOffset=y,R.shape=this.shape;var V=w.attributes;return this.positionBuffer.bind(),V.position.pointer(),this.weightBuffer.bind(),V.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),V.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,S),d+this.shape[0]*this.shape[1]}}),b.pick=function(g,y,d){var m=this.pickOffset;if(d<m||d>=m+this.shape[0]*this.shape[1])return null;var u=d-m;return{object:this,pointId:u,dataCoord:[this.xData[u%this.shape[0]],this.yData[u/this.shape[0]|0]]}},b.update=function(g){var y=(g=g||{}).shape||[0,0],d=g.x||r(y[0]),m=g.y||r(y[1]),w=g.z||new Float32Array(y[0]*y[1]),u=!1!==g.zsmooth;this.xData=d,this.yData=m;var S,_,E,L,C=g.colorLevels||[0],P=g.colorValues||[0,0,0,1],z=C.length,j=this.bounds;u?(S=j[0]=d[0],_=j[1]=m[0],E=j[2]=d[d.length-1],L=j[3]=m[m.length-1]):(S=j[0]=d[0]+(d[1]-d[0])/2,_=j[1]=m[0]+(m[1]-m[0])/2,E=j[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,L=j[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var R=1/(E-S),V=1/(L-_),D=y[0],B=y[1];this.shape=[D,B];var N=(u?(D-1)*(B-1):D*B)*(v.length>>>1);this.numVertices=N;for(var U=n.mallocUint8(4*N),J=n.mallocFloat32(2*N),Y=n.mallocUint8(2*N),q=n.mallocUint32(N),H=0,X=u?D-1:D,Q=u?B-1:B,ne=0;ne<Q;++ne){var re,ae;u?(re=V*(m[ne]-_),ae=V*(m[ne+1]-_)):(re=ne<B-1?V*(m[ne]-(m[ne+1]-m[ne])/2-_):V*(m[ne]-(m[ne]-m[ne-1])/2-_),ae=ne<B-1?V*(m[ne]+(m[ne+1]-m[ne])/2-_):V*(m[ne]+(m[ne]-m[ne-1])/2-_));for(var se=0;se<X;++se){var pe,ke;u?(pe=R*(d[se]-S),ke=R*(d[se+1]-S)):(pe=se<D-1?R*(d[se]-(d[se+1]-d[se])/2-S):R*(d[se]-(d[se]-d[se-1])/2-S),ke=se<D-1?R*(d[se]+(d[se+1]-d[se])/2-S):R*(d[se]+(d[se]-d[se-1])/2-S));for(var me=0;me<v.length;me+=2){var le,ue,Ee,de,xe=v[me],Te=v[me+1],we=w[u?(ne+Te)*D+(se+xe):ne*D+se],K=o.le(C,we);if(K<0)le=P[0],ue=P[1],Ee=P[2],de=P[3];else if(K===z-1)le=P[4*z-4],ue=P[4*z-3],Ee=P[4*z-2],de=P[4*z-1];else{var oe=(we-C[K])/(C[K+1]-C[K]),he=1-oe,ye=4*K,Me=4*(K+1);le=he*P[ye]+oe*P[Me],ue=he*P[ye+1]+oe*P[Me+1],Ee=he*P[ye+2]+oe*P[Me+2],de=he*P[ye+3]+oe*P[Me+3]}U[4*H]=255*le,U[4*H+1]=255*ue,U[4*H+2]=255*Ee,U[4*H+3]=255*de,J[2*H]=.5*pe+.5*ke,J[2*H+1]=.5*re+.5*ae,Y[2*H]=xe,Y[2*H+1]=Te,q[H]=ne*D+se,H+=1}}}this.positionBuffer.update(J),this.weightBuffer.update(Y),this.colorBuffer.update(U),this.idBuffer.update(q),n.free(J),n.free(U),n.free(Y),n.free(q)},b.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(p,s,e){"use strict";var o=e(6832);p.exports={fragment:o(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:o(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(p,s,e){var o=e(6832),r=e(5158),n=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(h){return r(h,n,a,null,c)},s.createPickShader=function(h){return r(h,n,i,null,c)}},6086:function(p,s,e){"use strict";p.exports=function(S){var _=S.gl||S.scene&&S.scene.gl,E=b(_);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=v(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var C=o(_),P=r(_,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),z=h(new Array(1024),[256,1,4]),j=0;j<1024;++j)z.data[j]=255;var R=n(_,z);R.wrap=_.REPEAT;var V=new w(_,E,L,C,P,R);return V.update(S),V};var o=e(5827),r=e(2944),n=e(8931),a=new Uint8Array(4),i=new Float32Array(a.buffer),c=e(5070),h=e(5050),f=e(248),b=f.createShader,v=f.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(S,_){for(var E=0,L=0;L<3;++L){var C=S[L]-_[L];E+=C*C}return Math.sqrt(E)}function d(S){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)_[0][E]=Math.max(S[0][E],_[0][E]),_[1][E]=Math.min(S[1][E],_[1][E]);return _}function m(S,_,E,L){this.arcLength=S,this.position=_,this.index=E,this.dataCoordinate=L}function w(S,_,E,L,C,P){this.gl=S,this.shader=_,this.pickShader=E,this.buffer=L,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var u=w.prototype;u.isTransparent=function(){return this.hasAlpha},u.isOpaque=function(){return!this.hasAlpha},u.pickSlots=1,u.setPickBase=function(S){this.pickId=S},u.drawTransparent=u.draw=function(S){if(this.vertexCount){var _=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.drawPick=function(S){if(this.vertexCount){var _=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},u.update=function(S){var _,E;this.dirty=!0;var L=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],P=[],z=[],j=0,R=0,V=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=S.position||S.positions;if(D){var B=S.color||S.colors||[0,0,0,1],N=S.lineWidth||1,U=!1;e:for(_=1;_<D.length;++_){var J,Y,q,H=D[_-1],X=D[_];for(P.push(j),z.push(H.slice()),E=0;E<3;++E){if(isNaN(H[E])||isNaN(X[E])||!isFinite(H[E])||!isFinite(X[E])){if(!L&&C.length>0){for(var Q=0;Q<24;++Q)C.push(C[C.length-12]);R+=2,U=!0}continue e}V[0][E]=Math.min(V[0][E],H[E],X[E]),V[1][E]=Math.max(V[1][E],H[E],X[E])}Array.isArray(B[0])?(J=B.length>_-1?B[_-1]:B.length>0?B[B.length-1]:[0,0,0,1],Y=B.length>_?B[_]:B.length>0?B[B.length-1]:[0,0,0,1]):J=Y=B,3===J.length&&(J=[J[0],J[1],J[2],1]),3===Y.length&&(Y=[Y[0],Y[1],Y[2],1]),!this.hasAlpha&&J[3]<1&&(this.hasAlpha=!0),q=Array.isArray(N)?N.length>_-1?N[_-1]:N.length>0?N[N.length-1]:[0,0,0,1]:N;var ne=j;if(j+=y(H,X),U){for(E=0;E<2;++E)C.push(H[0],H[1],H[2],X[0],X[1],X[2],ne,q,J[0],J[1],J[2],J[3]);R+=2,U=!1}C.push(H[0],H[1],H[2],X[0],X[1],X[2],ne,q,J[0],J[1],J[2],J[3],H[0],H[1],H[2],X[0],X[1],X[2],ne,-q,J[0],J[1],J[2],J[3],X[0],X[1],X[2],H[0],H[1],H[2],j,-q,Y[0],Y[1],Y[2],Y[3],X[0],X[1],X[2],H[0],H[1],H[2],j,q,Y[0],Y[1],Y[2],Y[3]),R+=4}}if(this.buffer.update(C),P.push(j),z.push(D[D.length-1].slice()),this.bounds=V,this.vertexCount=R,this.points=z,this.arcLength=P,"dashes"in S){var re=S.dashes.slice();for(re.unshift(0),_=1;_<re.length;++_)re[_]=re[_-1]+re[_];var ae=h(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(E=0;E<4;++E)ae.set(_,0,E,0);1&c.le(re,re[re.length-1]*_/255)?ae.set(_,0,0,0):ae.set(_,0,0,255)}this.texture.setPixels(ae)}},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},u.pick=function(S){if(!S||S.id!==this.pickId)return null;var D,B,N,_=(D=S.value[0],B=S.value[1],N=S.value[2],a[0]=0,a[1]=N,a[2]=B,a[3]=D,i[0]),E=c.le(this.arcLength,_);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],P=(_-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-P,j=[0,0,0],R=0;R<3;++R)j[R]=z*L[R]+P*C[R];var V=Math.min(P<.5?E:E+1,this.points.length-1);return new m(_,j,V,this.points[V])}},7332:function(p){p.exports=function(s){var e=new Float32Array(16);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],e}},9823:function(p){p.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(p){p.exports=function(s){var e=s[0],o=s[1],r=s[2],n=s[3],a=s[4],i=s[5],c=s[6],h=s[7],f=s[8],b=s[9],v=s[10],g=s[11],y=s[12],d=s[13],m=s[14],w=s[15];return(e*i-o*a)*(v*w-g*m)-(e*c-r*a)*(b*w-g*d)+(e*h-n*a)*(b*m-v*d)+(o*c-r*i)*(f*w-g*y)-(o*h-n*i)*(f*m-v*y)+(r*h-n*c)*(f*d-b*y)}},5950:function(p){p.exports=function(s,e){var o=e[0],r=e[1],n=e[2],a=e[3],i=o+o,c=r+r,h=n+n,f=o*i,b=r*i,v=r*c,g=n*i,y=n*c,d=n*h,m=a*i,w=a*c,u=a*h;return s[0]=1-v-d,s[1]=b+u,s[2]=g-w,s[3]=0,s[4]=b-u,s[5]=1-f-d,s[6]=y+m,s[7]=0,s[8]=g+w,s[9]=y-m,s[10]=1-f-v,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2],i=e[3],c=r+r,h=n+n,f=a+a,b=r*c,v=r*h,g=r*f,y=n*h,d=n*f,m=a*f,w=i*c,u=i*h,S=i*f;return s[0]=1-(y+m),s[1]=v+S,s[2]=g-u,s[3]=0,s[4]=v-S,s[5]=1-(b+m),s[6]=d+w,s[7]=0,s[8]=g+u,s[9]=d-w,s[10]=1-(b+y),s[11]=0,s[12]=o[0],s[13]=o[1],s[14]=o[2],s[15]=1,s}},9947:function(p){p.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(p){p.exports=function(s,e){var o=e[0],r=e[1],n=e[2],a=e[3],i=e[4],c=e[5],h=e[6],f=e[7],b=e[8],v=e[9],g=e[10],y=e[11],d=e[12],m=e[13],w=e[14],u=e[15],S=o*c-r*i,_=o*h-n*i,E=o*f-a*i,L=r*h-n*c,C=r*f-a*c,P=n*f-a*h,z=b*m-v*d,j=b*w-g*d,R=b*u-y*d,V=v*w-g*m,D=v*u-y*m,B=g*u-y*w,N=S*B-_*D+E*V+L*R-C*j+P*z;return N?(s[0]=(c*B-h*D+f*V)*(N=1/N),s[1]=(n*D-r*B-a*V)*N,s[2]=(m*P-w*C+u*L)*N,s[3]=(g*C-v*P-y*L)*N,s[4]=(h*R-i*B-f*j)*N,s[5]=(o*B-n*R+a*j)*N,s[6]=(w*E-d*P-u*_)*N,s[7]=(b*P-g*E+y*_)*N,s[8]=(i*D-c*R+f*z)*N,s[9]=(r*R-o*D-a*z)*N,s[10]=(d*C-m*E+u*S)*N,s[11]=(v*E-b*C-y*S)*N,s[12]=(c*j-i*V-h*z)*N,s[13]=(o*V-r*j+n*z)*N,s[14]=(m*_-d*L-w*S)*N,s[15]=(b*L-v*_+g*S)*N,s):null}},3012:function(p,s,e){var o=e(9947);p.exports=function(r,n,a,i){var c,h,f,b,v,g,y,d,m,w,u=n[0],S=n[1],_=n[2],E=i[0],L=i[1],C=i[2],P=a[0],z=a[1],j=a[2];return Math.abs(u-P)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(_-j)<1e-6?o(r):(y=u-P,d=S-z,m=_-j,c=L*(m*=w=1/Math.sqrt(y*y+d*d+m*m))-C*(d*=w),h=C*(y*=w)-E*m,f=E*d-L*y,(w=Math.sqrt(c*c+h*h+f*f))?(c*=w=1/w,h*=w,f*=w):(c=0,h=0,f=0),b=d*f-m*h,v=m*c-y*f,g=y*h-d*c,(w=Math.sqrt(b*b+v*v+g*g))?(b*=w=1/w,v*=w,g*=w):(b=0,v=0,g=0),r[0]=c,r[1]=b,r[2]=y,r[3]=0,r[4]=h,r[5]=v,r[6]=d,r[7]=0,r[8]=f,r[9]=g,r[10]=m,r[11]=0,r[12]=-(c*u+h*S+f*_),r[13]=-(b*u+v*S+g*_),r[14]=-(y*u+d*S+m*_),r[15]=1,r)}},104:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2],i=e[3],c=e[4],h=e[5],f=e[6],b=e[7],v=e[8],g=e[9],y=e[10],d=e[11],m=e[12],w=e[13],u=e[14],S=e[15],_=o[0],E=o[1],L=o[2],C=o[3];return s[0]=_*r+E*c+L*v+C*m,s[1]=_*n+E*h+L*g+C*w,s[2]=_*a+E*f+L*y+C*u,s[3]=_*i+E*b+L*d+C*S,s[4]=(_=o[4])*r+(E=o[5])*c+(L=o[6])*v+(C=o[7])*m,s[5]=_*n+E*h+L*g+C*w,s[6]=_*a+E*f+L*y+C*u,s[7]=_*i+E*b+L*d+C*S,s[8]=(_=o[8])*r+(E=o[9])*c+(L=o[10])*v+(C=o[11])*m,s[9]=_*n+E*h+L*g+C*w,s[10]=_*a+E*f+L*y+C*u,s[11]=_*i+E*b+L*d+C*S,s[12]=(_=o[12])*r+(E=o[13])*c+(L=o[14])*v+(C=o[15])*m,s[13]=_*n+E*h+L*g+C*w,s[14]=_*a+E*f+L*y+C*u,s[15]=_*i+E*b+L*d+C*S,s}},5268:function(p){p.exports=function(s,e,o,r,n,a,i){var c=1/(e-o),h=1/(r-n),f=1/(a-i);return s[0]=-2*c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*h,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*f,s[11]=0,s[12]=(e+o)*c,s[13]=(n+r)*h,s[14]=(i+a)*f,s[15]=1,s}},1120:function(p){p.exports=function(s,e,o,r,n){var a=1/Math.tan(e/2),i=1/(r-n);return s[0]=a/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(n+r)*i,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*n*r*i,s[15]=0,s}},4422:function(p){p.exports=function(s,e,o,r){var n,a,i,c,h,f,b,v,g,y,d,m,w,u,S,_,E,L,C,P,z,j,R,V,D=r[0],B=r[1],N=r[2],U=Math.sqrt(D*D+B*B+N*N);return Math.abs(U)<1e-6?null:(D*=U=1/U,B*=U,N*=U,n=Math.sin(o),i=1-(a=Math.cos(o)),h=e[1],f=e[2],b=e[3],g=e[5],y=e[6],d=e[7],w=e[9],u=e[10],S=e[11],C=D*B*i-N*n,P=B*B*i+a,z=N*B*i+D*n,j=D*N*i+B*n,R=B*N*i-D*n,V=N*N*i+a,s[0]=(c=e[0])*(_=D*D*i+a)+(v=e[4])*(E=B*D*i+N*n)+(m=e[8])*(L=N*D*i-B*n),s[1]=h*_+g*E+w*L,s[2]=f*_+y*E+u*L,s[3]=b*_+d*E+S*L,s[4]=c*C+v*P+m*z,s[5]=h*C+g*P+w*z,s[6]=f*C+y*P+u*z,s[7]=b*C+d*P+S*z,s[8]=c*j+v*R+m*V,s[9]=h*j+g*R+w*V,s[10]=f*j+y*R+u*V,s[11]=b*j+d*R+S*V,e!==s&&(s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s)}},6109:function(p){p.exports=function(s,e,o){var r=Math.sin(o),n=Math.cos(o),a=e[4],i=e[5],c=e[6],h=e[7],f=e[8],b=e[9],v=e[10],g=e[11];return e!==s&&(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[4]=a*n+f*r,s[5]=i*n+b*r,s[6]=c*n+v*r,s[7]=h*n+g*r,s[8]=f*n-a*r,s[9]=b*n-i*r,s[10]=v*n-c*r,s[11]=g*n-h*r,s}},7115:function(p){p.exports=function(s,e,o){var r=Math.sin(o),n=Math.cos(o),a=e[0],i=e[1],c=e[2],h=e[3],f=e[8],b=e[9],v=e[10],g=e[11];return e!==s&&(s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=a*n-f*r,s[1]=i*n-b*r,s[2]=c*n-v*r,s[3]=h*n-g*r,s[8]=a*r+f*n,s[9]=i*r+b*n,s[10]=c*r+v*n,s[11]=h*r+g*n,s}},5240:function(p){p.exports=function(s,e,o){var r=Math.sin(o),n=Math.cos(o),a=e[0],i=e[1],c=e[2],h=e[3],f=e[4],b=e[5],v=e[6],g=e[7];return e!==s&&(s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15]),s[0]=a*n+f*r,s[1]=i*n+b*r,s[2]=c*n+v*r,s[3]=h*n+g*r,s[4]=f*n-a*r,s[5]=b*n-i*r,s[6]=v*n-c*r,s[7]=g*n-h*r,s}},3668:function(p){p.exports=function(s,e,o){var r=o[0],n=o[1],a=o[2];return s[0]=e[0]*r,s[1]=e[1]*r,s[2]=e[2]*r,s[3]=e[3]*r,s[4]=e[4]*n,s[5]=e[5]*n,s[6]=e[6]*n,s[7]=e[7]*n,s[8]=e[8]*a,s[9]=e[9]*a,s[10]=e[10]*a,s[11]=e[11]*a,s[12]=e[12],s[13]=e[13],s[14]=e[14],s[15]=e[15],s}},998:function(p){p.exports=function(s,e,o){var r,n,a,i,c,h,f,b,v,g,y,d,m=o[0],w=o[1],u=o[2];return e===s?(s[12]=e[0]*m+e[4]*w+e[8]*u+e[12],s[13]=e[1]*m+e[5]*w+e[9]*u+e[13],s[14]=e[2]*m+e[6]*w+e[10]*u+e[14],s[15]=e[3]*m+e[7]*w+e[11]*u+e[15]):(n=e[1],a=e[2],i=e[3],c=e[4],h=e[5],f=e[6],b=e[7],v=e[8],g=e[9],y=e[10],d=e[11],s[0]=r=e[0],s[1]=n,s[2]=a,s[3]=i,s[4]=c,s[5]=h,s[6]=f,s[7]=b,s[8]=v,s[9]=g,s[10]=y,s[11]=d,s[12]=r*m+c*w+v*u+e[12],s[13]=n*m+h*w+g*u+e[13],s[14]=a*m+f*w+y*u+e[14],s[15]=i*m+b*w+d*u+e[15]),s}},2142:function(p){p.exports=function(s,e){if(s===e){var o=e[1],r=e[2],n=e[3],a=e[6],i=e[7],c=e[11];s[1]=e[4],s[2]=e[8],s[3]=e[12],s[4]=o,s[6]=e[9],s[7]=e[13],s[8]=r,s[9]=a,s[11]=e[14],s[12]=n,s[13]=i,s[14]=c}else s[0]=e[0],s[1]=e[4],s[2]=e[8],s[3]=e[12],s[4]=e[1],s[5]=e[5],s[6]=e[9],s[7]=e[13],s[8]=e[2],s[9]=e[6],s[10]=e[10],s[11]=e[14],s[12]=e[3],s[13]=e[7],s[14]=e[11],s[15]=e[15];return s}},4340:function(p,s,e){"use strict";var o=e(957),r=e(7309);function n(c,h){for(var f=[0,0,0,0],b=0;b<4;++b)for(var v=0;v<4;++v)f[v]+=c[4*b+v]*h[b];return f}function a(c,h,f,b,v){for(var g=n(b,n(f,n(h,[c[0],c[1],c[2],1]))),y=0;y<3;++y)g[y]/=g[3];return[.5*v[0]*(1+g[0]),.5*v[1]*(1-g[1])]}function i(c,h){for(var f=[0,0,0],b=0;b<c.length;++b)for(var v=c[b],g=h[b],y=0;y<3;++y)f[y]+=g*v[y];return f}p.exports=function(c,h,f,b,v,g){if(1===c.length)return[0,c[0].slice()];for(var y=new Array(c.length),d=0;d<c.length;++d)y[d]=a(c[d],f,b,v,g);var m=0,w=1/0;for(d=0;d<y.length;++d){for(var u=0,S=0;S<2;++S)u+=Math.pow(y[d][S]-h[S],2);u<w&&(w=u,m=d)}var _=function(L,C){if(2===L.length){for(var P=0,z=0,j=0;j<2;++j)P+=Math.pow(C[j]-L[0][j],2),z+=Math.pow(C[j]-L[1][j],2);return(P=Math.sqrt(P))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(P+z),P/(z+P)]}if(3===L.length){var R=[0,0];return r(L[0],L[1],L[2],C,R),o(L,R)}return[]}(y,h),E=0;for(d=0;d<3;++d){if(_[d]<-.001||_[d]>1.0001)return null;E+=_[d]}return Math.abs(E-1)>.001?null:[m,i(c,_),_]}},2056:function(p,s,e){var o=e(6832),r=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),n=o(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),h=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),f=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),b=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),v=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),g=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),y=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:c,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:f,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:v,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:g,fragment:y,attributes:[{name:"position",type:"vec3"}]}},8116:function(p,s,e){"use strict";var o=e(5158),r=e(5827),n=e(2944),a=e(8931),i=e(115),c=e(104),h=e(7437),f=e(5050),b=e(9156),v=e(7212),g=e(5306),y=e(2056),d=e(4340),m=y.meshShader,w=y.wireShader,u=y.pointShader,S=y.pickShader,_=y.pointPickShader,E=y.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(U,J,Y,q,H,X,Q,ne,re,ae,se,pe,ke,me,le,ue,Ee,de,xe,Te,we,K,oe,he,ye,Me,Re){this.gl=U,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=J,this.dirty=!0,this.triShader=Y,this.lineShader=q,this.pointShader=H,this.pickShader=X,this.pointPickShader=Q,this.contourShader=ne,this.trianglePositions=re,this.triangleColors=se,this.triangleNormals=ke,this.triangleUVs=pe,this.triangleIds=ae,this.triangleVAO=me,this.triangleCount=0,this.lineWidth=1,this.edgePositions=le,this.edgeColors=Ee,this.edgeUVs=de,this.edgeIds=ue,this.edgeVAO=xe,this.edgeCount=0,this.pointPositions=Te,this.pointColors=K,this.pointUVs=oe,this.pointSizes=he,this.pointIds=we,this.pointVAO=ye,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Me,this.contourVAO=Re,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var P=C.prototype;function z(U,J){if(!J||!J.length)return 1;for(var Y=0;Y<J.length;++Y){if(J.length<2)return 1;if(J[Y][0]===U)return J[Y][1];if(J[Y][0]>U&&Y>0){var q=(J[Y][0]-U)/(J[Y][0]-J[Y-1][0]);return J[Y][1]*(1-q)+q*J[Y-1][1]}}return 1}function j(U){var J=o(U,m.vertex,m.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.normal.location=4,J}function R(U){var J=o(U,w.vertex,w.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J}function V(U){var J=o(U,u.vertex,u.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.pointSize.location=4,J}function D(U){var J=o(U,S.vertex,S.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J}function B(U){var J=o(U,_.vertex,_.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J.attributes.pointSize.location=4,J}function N(U){var J=o(U,E.vertex,E.fragment);return J.attributes.position.location=0,J}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(U){this.pickId=U},P.highlight=function(U){if(U&&this.contourEnable){for(var J=v(this.cells,this.intensity,U.intensity),Y=J.cells,q=J.vertexIds,H=J.vertexWeights,X=Y.length,Q=g.mallocFloat32(6*X),ne=0,re=0;re<X;++re)for(var ae=Y[re],se=0;se<2;++se){var pe=ae[0];2===ae.length&&(pe=ae[se]);for(var le=H[pe],ue=1-le,Ee=this.positions[q[pe][0]],de=this.positions[q[pe][1]],xe=0;xe<3;++xe)Q[ne++]=le*Ee[xe]+ue*de[xe]}this.contourCount=ne/3|0,this.contourPositions.update(Q.subarray(0,ne)),g.free(Q)}else this.contourCount=0},P.update=function(U){U=U||{};var J=this.gl;this.dirty=!0,"contourEnable"in U&&(this.contourEnable=U.contourEnable),"contourColor"in U&&(this.contourColor=U.contourColor),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"lightPosition"in U&&(this.lightPosition=U.lightPosition),this.hasAlpha=!1,"opacity"in U&&(this.opacity=U.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in U&&(this.opacityscale=U.opacityscale,this.hasAlpha=!0),"ambient"in U&&(this.ambientLight=U.ambient),"diffuse"in U&&(this.diffuseLight=U.diffuse),"specular"in U&&(this.specularLight=U.specular),"roughness"in U&&(this.roughness=U.roughness),"fresnel"in U&&(this.fresnel=U.fresnel),U.texture?(this.texture.dispose(),this.texture=a(J,U.texture)):U.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=J.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=J.LINEAR,this.texture.setPixels(function(Dt,Ye){for(var Ze=b({colormap:Dt,nshades:256,format:"rgba"}),Ne=new Uint8Array(1024),Je=0;Je<256;++Je){for(var at=Ze[Je],Se=0;Se<3;++Se)Ne[4*Je+Se]=at[Se];Ne[4*Je+3]=Ye?255*z(Je/255,Ye):255*at[3]}return f(Ne,[256,256,4],[4,0,1])}(U.colormap,this.opacityscale)),this.texture.generateMipmap());var Y=U.cells,q=U.positions;if(q&&Y){var H=[],X=[],Q=[],ne=[],re=[],ae=[],se=[],pe=[],ke=[],me=[],le=[],ue=[],Ee=[],de=[];this.cells=Y,this.positions=q;var xe=U.vertexNormals,Te=U.cellNormals,we=void 0===U.vertexNormalsEpsilon?1e-6:U.vertexNormalsEpsilon;U.useFacetNormals&&!Te&&(Te=i.faceNormals(Y,q,void 0===U.faceNormalsEpsilon?1e-6:U.faceNormalsEpsilon)),Te||xe||(xe=i.vertexNormals(Y,q,we));var oe=U.vertexColors,he=U.cellColors,ye=U.meshColor||[1,1,1,1],Me=U.vertexUVs,Re=U.vertexIntensity,Pe=U.cellUVs,De=U.cellIntensity,fe=1/0,ge=-1/0;if(!Me&&!Pe)if(Re)if(U.vertexIntensityBounds)fe=+U.vertexIntensityBounds[0],ge=+U.vertexIntensityBounds[1];else for(var be=0;be<Re.length;++be){var Ie=Re[be];fe=Math.min(fe,Ie),ge=Math.max(ge,Ie)}else if(De)if(U.cellIntensityBounds)fe=+U.cellIntensityBounds[0],ge=+U.cellIntensityBounds[1];else for(be=0;be<De.length;++be)Ie=De[be],fe=Math.min(fe,Ie),ge=Math.max(ge,Ie);else for(be=0;be<q.length;++be)Ie=q[be][2],fe=Math.min(fe,Ie),ge=Math.max(ge,Ie);this.intensity=Re||De||function(Dt){for(var Ye=Dt.length,Ze=new Array(Ye),Ne=0;Ne<Ye;++Ne)Ze[Ne]=Dt[Ne][2];return Ze}(q),this.pickVertex=!(De||he);var He=U.pointSizes,Ve=U.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=0;be<q.length;++be)for(var tt=q[be],nt=0;nt<3;++nt)!isNaN(tt[nt])&&isFinite(tt[nt])&&(this.bounds[0][nt]=Math.min(this.bounds[0][nt],tt[nt]),this.bounds[1][nt]=Math.max(this.bounds[1][nt],tt[nt]));var st=0,dt=0,wt=0;e:for(be=0;be<Y.length;++be){var _t=Y[be];switch(_t.length){case 1:for(tt=q[Pt=_t[0]],nt=0;nt<3;++nt)if(isNaN(tt[nt])||!isFinite(tt[nt]))continue e;me.push(tt[0],tt[1],tt[2]),St=oe?oe[Pt]:he?he[be]:ye,this.opacityscale&&Re?X.push(St[0],St[1],St[2],this.opacity*z((Re[Pt]-fe)/(ge-fe),this.opacityscale)):3===St.length?le.push(St[0],St[1],St[2],this.opacity):(le.push(St[0],St[1],St[2],St[3]*this.opacity),St[3]<1&&(this.hasAlpha=!0)),ue.push((Ot=Me?Me[Pt]:Re?[(Re[Pt]-fe)/(ge-fe),0]:Pe?Pe[be]:De?[(De[be]-fe)/(ge-fe),0]:[(tt[2]-fe)/(ge-fe),0])[0],Ot[1]),Ee.push(He?He[Pt]:Ve),de.push(be),wt+=1;break;case 2:for(nt=0;nt<2;++nt){tt=q[Pt=_t[nt]];for(var pt=0;pt<3;++pt)if(isNaN(tt[pt])||!isFinite(tt[pt]))continue e}for(nt=0;nt<2;++nt)tt=q[Pt=_t[nt]],ae.push(tt[0],tt[1],tt[2]),St=oe?oe[Pt]:he?he[be]:ye,this.opacityscale&&Re?X.push(St[0],St[1],St[2],this.opacity*z((Re[Pt]-fe)/(ge-fe),this.opacityscale)):3===St.length?se.push(St[0],St[1],St[2],this.opacity):(se.push(St[0],St[1],St[2],St[3]*this.opacity),St[3]<1&&(this.hasAlpha=!0)),pe.push((Ot=Me?Me[Pt]:Re?[(Re[Pt]-fe)/(ge-fe),0]:Pe?Pe[be]:De?[(De[be]-fe)/(ge-fe),0]:[(tt[2]-fe)/(ge-fe),0])[0],Ot[1]),ke.push(be);dt+=1;break;case 3:for(nt=0;nt<3;++nt)for(tt=q[Pt=_t[nt]],pt=0;pt<3;++pt)if(isNaN(tt[pt])||!isFinite(tt[pt]))continue e;for(nt=0;nt<3;++nt){var Pt,St,Ot,jt;tt=q[Pt=_t[2-nt]],H.push(tt[0],tt[1],tt[2]),(St=oe?oe[Pt]:he?he[be]:ye)?this.opacityscale&&Re?X.push(St[0],St[1],St[2],this.opacity*z((Re[Pt]-fe)/(ge-fe),this.opacityscale)):3===St.length?X.push(St[0],St[1],St[2],this.opacity):(X.push(St[0],St[1],St[2],St[3]*this.opacity),St[3]<1&&(this.hasAlpha=!0)):X.push(.5,.5,.5,1),ne.push((Ot=Me?Me[Pt]:Re?[(Re[Pt]-fe)/(ge-fe),0]:Pe?Pe[be]:De?[(De[be]-fe)/(ge-fe),0]:[(tt[2]-fe)/(ge-fe),0])[0],Ot[1]),Q.push((jt=xe?xe[Pt]:Te[be])[0],jt[1],jt[2]),re.push(be)}st+=1}}this.pointCount=wt,this.edgeCount=dt,this.triangleCount=st,this.pointPositions.update(me),this.pointColors.update(le),this.pointUVs.update(ue),this.pointSizes.update(Ee),this.pointIds.update(new Uint32Array(de)),this.edgePositions.update(ae),this.edgeColors.update(se),this.edgeUVs.update(pe),this.edgeIds.update(new Uint32Array(ke)),this.trianglePositions.update(H),this.triangleColors.update(X),this.triangleUVs.update(ne),this.triangleNormals.update(Q),this.triangleIds.update(new Uint32Array(re))}},P.drawTransparent=P.draw=function(U){for(var J=this.gl,Y=(U=U||{}).model||L,q=U.view||L,H=U.projection||L,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)X[0][Q]=Math.max(X[0][Q],this.clipBounds[0][Q]),X[1][Q]=Math.min(X[1][Q],this.clipBounds[1][Q]);var ne={model:Y,view:q,projection:H,inverseModel:L.slice(),clipBounds:X,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ne.inverseModel=h(ne.inverseModel,ne.model),J.disable(J.CULL_FACE),this.texture.bind(0);var re=new Array(16);for(c(re,ne.view,ne.model),c(re,ne.projection,re),h(re,re),Q=0;Q<3;++Q)ne.eyePosition[Q]=re[12+Q]/re[15];var ae,se=re[15];for(Q=0;Q<3;++Q)se+=this.lightPosition[Q]*re[4*Q+3];for(Q=0;Q<3;++Q){for(var pe=re[12+Q],ke=0;ke<3;++ke)pe+=re[4*ke+Q]*this.lightPosition[ke];ne.lightPosition[Q]=pe/se}this.triangleCount>0&&((ae=this.triShader).bind(),ae.uniforms=ne,this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ae=this.lineShader).bind(),ae.uniforms=ne,this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ae=this.pointShader).bind(),ae.uniforms=ne,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ae=this.contourShader).bind(),ae.uniforms=ne,this.contourVAO.bind(),J.drawArrays(J.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(U){for(var J=this.gl,Y=(U=U||{}).model||L,q=U.view||L,H=U.projection||L,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)X[0][Q]=Math.max(X[0][Q],this.clipBounds[0][Q]),X[1][Q]=Math.min(X[1][Q],this.clipBounds[1][Q]);this._model=[].slice.call(Y),this._view=[].slice.call(q),this._projection=[].slice.call(H),this._resolution=[J.drawingBufferWidth,J.drawingBufferHeight];var ne,re={model:Y,view:q,projection:H,clipBounds:X,pickId:this.pickId/255};(ne=this.pickShader).bind(),ne.uniforms=re,this.triangleCount>0&&(this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ne=this.pointPickShader).bind(),ne.uniforms=re,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(U){if(!U||U.id!==this.pickId)return null;for(var J=U.value[0]+256*U.value[1]+65536*U.value[2],Y=this.cells[J],q=this.positions,H=new Array(Y.length),X=0;X<Y.length;++X)H[X]=q[Y[X]];var Q=U.coord[0],ne=U.coord[1];if(!this.pickVertex){var re=this.positions[Y[0]],ae=this.positions[Y[1]],se=this.positions[Y[2]];return{_cellCenter:!0,position:[Q,ne],index:J,cell:Y,cellId:J,intensity:this.intensity[J],dataCoordinate:[(re[0]+ae[0]+se[0])/3,(re[1]+ae[1]+se[1])/3,(re[2]+ae[2]+se[2])/3]}}var ke=d(H,[Q*this.pixelRatio,this._resolution[1]-ne*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ke)return null;var me=ke[2],le=0;for(X=0;X<Y.length;++X)le+=me[X]*this.intensity[Y[X]];return{position:ke[1],index:Y[ke[0]],cell:Y,cellId:J,intensity:le,dataCoordinate:this.positions[Y[ke[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},p.exports=function(U,J){if(1===arguments.length&&(U=(J=U).gl),!(U.getExtension("OES_standard_derivatives")||U.getExtension("MOZ_OES_standard_derivatives")||U.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=j(U),H=R(U),X=V(U),Q=D(U),ne=B(U),re=N(U),ae=a(U,f(new Uint8Array([255,255,255,255]),[1,1,4]));ae.generateMipmap(),ae.minFilter=U.LINEAR_MIPMAP_LINEAR,ae.magFilter=U.LINEAR;var se=r(U),pe=r(U),ke=r(U),me=r(U),le=r(U),ue=n(U,[{buffer:se,type:U.FLOAT,size:3},{buffer:le,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:U.FLOAT,size:4},{buffer:ke,type:U.FLOAT,size:2},{buffer:me,type:U.FLOAT,size:3}]),Ee=r(U),de=r(U),xe=r(U),Te=r(U),we=n(U,[{buffer:Ee,type:U.FLOAT,size:3},{buffer:Te,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:de,type:U.FLOAT,size:4},{buffer:xe,type:U.FLOAT,size:2}]),K=r(U),oe=r(U),he=r(U),ye=r(U),Me=r(U),Re=n(U,[{buffer:K,type:U.FLOAT,size:3},{buffer:Me,type:U.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:U.FLOAT,size:4},{buffer:he,type:U.FLOAT,size:2},{buffer:ye,type:U.FLOAT,size:1}]),Pe=r(U),fe=new C(U,ae,q,H,X,Q,ne,re,se,le,pe,ke,me,ue,Ee,Te,de,xe,we,K,Me,oe,he,ye,Re,Pe,n(U,[{buffer:Pe,type:U.FLOAT,size:3}]));return fe.update(J),fe}},4554:function(p,s,e){"use strict";p.exports=function(f){var b=f.gl;return new a(f,o(b,[0,0,0,1,1,0,1,1]),r(b,n.boxVert,n.lineFrag))};var o=e(5827),r=e(5158),n=e(2709);function a(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawBox=(i=[0,0],c=[0,0],function(f,b,v,g,y){var m=this.shader,w=this.plot.gl;i[0]=f,i[1]=b,c[0]=v,c[1]=g,m.uniforms.lo=i,m.uniforms.hi=c,m.uniforms.color=y,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(p,s,e){"use strict";p.exports=function(d){var m=d.gl;return new i(d,o(m),r(m,a.gridVert,a.gridFrag),r(m,a.tickVert,a.gridFrag))};var o=e(5827),r=e(5158),n=e(5070),a=e(2709);function i(d,m,w,u){this.plot=d,this.vbo=m,this.shader=w,this.tickShader=u,this.ticks=[[],[]]}function c(d,m){return d-m}var h,f,b,v,g,d,m,w,u,S,_,y=i.prototype;y.draw=(h=[0,0],f=[0,0],b=[0,0],function(){for(var d=this.plot,m=this.vbo,w=this.shader,u=this.ticks,S=d.gl,_=d._tickBounds,E=d.dataBox,L=d.viewBox,C=d.gridLineWidth,P=d.gridLineColor,z=d.gridLineEnable,j=d.pixelRatio,R=0;R<2;++R){var V=_[R],B=.5*(E[R+2]+E[R]),N=E[R+2]-E[R];f[R]=2*(_[R+2]-V)/N,h[R]=2*(V-B)/N}w.bind(),m.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=f;var U=0;for(R=0;R<2;++R){b[0]=b[1]=0,b[R]=1,w.uniforms.dataAxis=b,w.uniforms.lineWidth=C[R]/(L[R+2]-L[R])*j,w.uniforms.color=P[R];var J=6*u[R].length;z[R]&&J&&S.drawArrays(S.TRIANGLES,U,J),U+=J}}),y.drawTickMarks=(d=[0,0],m=[0,0],w=[1,0],u=[0,1],S=[0,0],_=[0,0],function(){for(var E=this.plot,L=this.vbo,C=this.tickShader,P=this.ticks,z=E.gl,j=E._tickBounds,R=E.dataBox,V=E.viewBox,D=E.pixelRatio,B=E.screenBox,N=B[2]-B[0],U=B[3]-B[1],J=V[2]-V[0],Y=V[3]-V[1],q=0;q<2;++q){var H=j[q],Q=.5*(R[q+2]+R[q]),ne=R[q+2]-R[q];m[q]=2*(j[q+2]-H)/ne,d[q]=2*(H-Q)/ne}m[0]*=J/N,d[0]*=J/N,m[1]*=Y/U,d[1]*=Y/U,C.bind(),L.bind(),C.attributes.dataCoord.pointer();var re=C.uniforms;re.dataShift=d,re.dataScale=m;var ae=E.tickMarkLength,se=E.tickMarkWidth,pe=E.tickMarkColor,ke=6*P[0].length,me=Math.min(n.ge(P[0],(R[0]-j[0])/(j[2]-j[0]),c),P[0].length),le=Math.min(n.gt(P[0],(R[2]-j[0])/(j[2]-j[0]),c),P[0].length),ue=0+6*me,Ee=6*Math.max(0,le-me),de=Math.min(n.ge(P[1],(R[1]-j[1])/(j[3]-j[1]),c),P[1].length),xe=Math.min(n.gt(P[1],(R[3]-j[1])/(j[3]-j[1]),c),P[1].length),Te=ke+6*de,we=6*Math.max(0,xe-de);S[0]=2*(V[0]-ae[1])/N-1,S[1]=(V[3]+V[1])/U-1,_[0]=ae[1]*D/N,_[1]=se[1]*D/U,we&&(re.color=pe[1],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,z.drawArrays(z.TRIANGLES,Te,we)),S[0]=(V[2]+V[0])/N-1,S[1]=2*(V[1]-ae[0])/U-1,_[0]=se[0]*D/N,_[1]=ae[0]*D/U,Ee&&(re.color=pe[0],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,z.drawArrays(z.TRIANGLES,ue,Ee)),S[0]=2*(V[2]+ae[3])/N-1,S[1]=(V[3]+V[1])/U-1,_[0]=ae[3]*D/N,_[1]=se[3]*D/U,we&&(re.color=pe[3],re.tickScale=_,re.dataAxis=u,re.screenOffset=S,z.drawArrays(z.TRIANGLES,Te,we)),S[0]=(V[2]+V[0])/N-1,S[1]=2*(V[3]+ae[2])/U-1,_[0]=se[2]*D/N,_[1]=ae[2]*D/U,Ee&&(re.color=pe[2],re.tickScale=_,re.dataAxis=w,re.screenOffset=S,z.drawArrays(z.TRIANGLES,ue,Ee))}),y.update=(v=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(d){for(var m=d.ticks,w=d.bounds,u=new Float32Array(18*(m[0].length+m[1].length)),S=0,_=[[],[]],E=0;E<2;++E)for(var L=_[E],C=m[E],P=w[E],z=w[E+2],j=0;j<C.length;++j){var R=(C[j].x-P)/(z-P);L.push(R);for(var V=0;V<6;++V)u[S++]=R,u[S++]=v[V],u[S++]=g[V]}this.ticks=_,this.vbo.update(u)}),y.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(p,s,e){"use strict";p.exports=function(f){var b=f.gl;return new a(f,o(b,[-1,-1,-1,1,1,-1,1,1]),r(b,n.lineVert,n.lineFrag))};var o=e(5827),r=e(5158),n=e(2709);function a(f,b,v){this.plot=f,this.vbo=b,this.shader=v}var i,c,h=a.prototype;h.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},h.drawLine=(i=[0,0],c=[0,0],function(f,b,v,g,y,d){var m=this.plot,w=this.shader,u=m.gl;i[0]=f,i[1]=b,c[0]=v,c[1]=g,w.uniforms.start=i,w.uniforms.end=c,w.uniforms.width=y*m.pixelRatio,w.uniforms.color=d,u.drawArrays(u.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(p,s,e){"use strict";var o=e(6832),r=o(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);p.exports={lineVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:o(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(p,s,e){"use strict";p.exports=function(m){var w=m.gl;return new c(m,o(w),r(w,i.textVert,i.textFrag))};var o=e(5827),r=e(5158),n=e(6946),a=e(5070),i=e(2709);function c(m,w,u){this.plot=m,this.vbo=w,this.shader=u,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,f,b,v,g,y,m,w,d=c.prototype;d.drawTicks=(h=[0,0],f=[0,0],b=[0,0],function(m){var w=this.plot,u=this.shader,S=this.tickX[m],_=this.tickOffset[m],E=w.gl,L=w.viewBox,C=w.dataBox,P=w.screenBox,z=w.pixelRatio,j=w.tickEnable,R=w.tickPad,V=w.tickColor,D=w.tickAngle,B=w.labelEnable,N=w.labelPad,U=w.labelColor,J=w.labelAngle,Y=this.labelOffset[m],q=this.labelCount[m],H=a.lt(S,C[m]),X=a.le(S,C[m+2]);h[0]=h[1]=0,h[m]=1,f[m]=(L[2+m]+L[m])/(P[2+m]-P[m])-1;var Q=2/P[2+(1^m)]-P[1^m];f[1^m]=Q*L[1^m]-1,j[m]&&(f[1^m]-=Q*z*R[m],H<X&&_[X]>_[H]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=V[m],u.uniforms.angle=D[m],E.drawArrays(E.TRIANGLES,_[H],_[X]-_[H]))),B[m]&&q&&(f[1^m]-=Q*z*N[m],u.uniforms.dataAxis=b,u.uniforms.screenOffset=f,u.uniforms.color=U[m],u.uniforms.angle=J[m],E.drawArrays(E.TRIANGLES,Y,q)),f[1^m]=Q*L[2+(1^m)]-1,j[m+2]&&(f[1^m]+=Q*z*R[m+2],H<X&&_[X]>_[H]&&(u.uniforms.dataAxis=h,u.uniforms.screenOffset=f,u.uniforms.color=V[m+2],u.uniforms.angle=D[m+2],E.drawArrays(E.TRIANGLES,_[H],_[X]-_[H]))),B[m+2]&&q&&(f[1^m]+=Q*z*N[m+2],u.uniforms.dataAxis=b,u.uniforms.screenOffset=f,u.uniforms.color=U[m+2],u.uniforms.angle=J[m+2],E.drawArrays(E.TRIANGLES,Y,q))}),d.drawTitle=(m=[0,0],w=[0,0],function(){var u=this.plot,S=this.shader,_=u.gl,E=u.screenBox,L=u.titleCenter,C=u.titleAngle,P=u.titleColor,z=u.pixelRatio;if(this.titleCount){for(var j=0;j<2;++j)w[j]=2*(L[j]*z-E[j])/(E[2+j]-E[j])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=w,S.uniforms.angle=C,S.uniforms.color=P,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}),d.bind=(v=[0,0],g=[0,0],y=[0,0],function(){var m=this.plot,w=this.shader,u=m._tickBounds,S=m.dataBox,_=m.screenBox,E=m.viewBox;w.bind();for(var L=0;L<2;++L){var C=u[L],z=.5*(S[L+2]+S[L]),j=S[L+2]-S[L],V=E[L+2]-E[L],B=_[L+2]-_[L];g[L]=2*(u[L+2]-C)/j*V/B,v[L]=2*(C-z)/j*V/B}y[1]=2*m.pixelRatio/(_[3]-_[1]),y[0]=y[1]*(_[3]-_[1])/(_[2]-_[0]),w.uniforms.dataScale=g,w.uniforms.dataShift=v,w.uniforms.textScale=y,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),d.update=function(m){var w,u,S,_,E,L=[],C=m.ticks,P=m.bounds;for(E=0;E<2;++E){var z=[Math.floor(L.length/3)],j=[-1/0],R=C[E];for(w=0;w<R.length;++w){var V=R[w],D=V.x,N=V.font||"sans-serif";_=V.fontSize||12;for(var U=1/(P[E+2]-P[E]),J=P[E],Y=V.text.split("\n"),q=0;q<Y.length;q++)for(S=n(N,Y[q]).data,u=0;u<S.length;u+=2)L.push(S[u]*_,-S[u+1]*_-q*_*1.2,(D-J)*U);z.push(Math.floor(L.length/3)),j.push(D)}this.tickOffset[E]=z,this.tickX[E]=j}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),S=n(m.labelFont[E],m.labels[E],{textAlign:"center"}).data,_=m.labelSize[E],w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),S=n(m.titleFont,m.title).data,_=m.titleSize,w=0;w<S.length;w+=2)L.push(S[w]*_,-S[w+1]*_,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(p,s,e){"use strict";p.exports=function(v){var g=v.gl,y=new c(g,o(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return y.grid=r(y),y.text=n(y),y.line=a(y),y.box=i(y),y.update(v),y};var o=e(2611),r=e(3016),n=e(5613),a=e(1154),i=e(4554);function c(v,g){this.gl=v,this.pickBuffer=g,this.screenBox=[0,0,v.drawingBufferWidth,v.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=c.prototype;function f(v){for(var g=v.slice(),y=0;y<g.length;++y)g[y]=g[y].slice();return g}function b(v,g){return v.x-g.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var v=this.gl,g=this.screenBox,y=this.viewBox,d=this.dataBox,m=this.pixelRatio,w=this.grid,u=this.line,S=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,v.bindFramebuffer(v.FRAMEBUFFER,null),v.enable(v.SCISSOR_TEST),v.disable(v.DEPTH_TEST),v.depthFunc(v.LESS),v.depthMask(!1),v.enable(v.BLEND),v.blendEquation(v.FUNC_ADD,v.FUNC_ADD),v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA),this.borderColor){v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;v.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT)}v.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),v.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var L=this.backgroundColor;v.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),v.clear(v.COLOR_BUFFER_BIT),w.draw();var C=this.zeroLineEnable,P=this.zeroLineColor,z=this.zeroLineWidth;if(C[0]||C[1]){u.bind();for(var j=0;j<2;++j)if(C[j]&&d[j]<=0&&d[j+2]>=0){var R=g[j]-d[j]*(g[j+2]-g[j])/(d[j+2]-d[j]);0===j?u.drawLine(R,g[1],R,g[3],z[j],P[j]):u.drawLine(g[0],R,g[2],R,z[j],P[j])}}for(j=0;j<_.length;++j)_[j].draw();v.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),v.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),u.bind();var V=this.borderLineEnable,D=this.borderLineWidth,B=this.borderLineColor;for(V[1]&&u.drawLine(y[0],y[1]-.5*D[1]*m,y[0],y[3]+.5*D[3]*m,D[1],B[1]),V[0]&&u.drawLine(y[0]-.5*D[0]*m,y[1],y[2]+.5*D[2]*m,y[1],D[0],B[0]),V[3]&&u.drawLine(y[2],y[1]-.5*D[1]*m,y[2],y[3]+.5*D[3]*m,D[3],B[3]),V[2]&&u.drawLine(y[0]-.5*D[0]*m,y[3],y[2]+.5*D[2]*m,y[3],D[2],B[2]),S.bind(),j=0;j<2;++j)S.drawTicks(j);this.titleEnable&&S.drawTitle();var N=this.overlays;for(j=0;j<N.length;++j)N[j].draw();v.disable(v.SCISSOR_TEST),v.disable(v.BLEND),v.depthMask(!0)}},h.drawPick=function(){if(!this.static){var v=this.pickBuffer;this._pickTimeout=null,v.begin();for(var g=1,y=this.objects,d=0;d<y.length;++d)g=y[d].drawPick(g);v.end()}},h.pick=function(v,g){if(!this.static){var y=this.pixelRatio,d=this.pickPixelRatio,m=this.viewBox,w=0|Math.round((v-m[0]/y)*d),u=0|Math.round((g-m[1]/y)*d),S=this.pickBuffer.query(w,u,this.pickRadius);if(!S)return null;for(var _=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var C=E[L].pick(w,u,_);if(C)return C}return null}},h.setScreenBox=function(v){var g=this.screenBox,y=this.pixelRatio;g[0]=0|Math.round(v[0]*y),g[1]=0|Math.round(v[1]*y),g[2]=0|Math.round(v[2]*y),g[3]=0|Math.round(v[3]*y),this.setDirty()},h.setDataBox=function(v){var g=this.dataBox;(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3])&&(g[0]=v[0],g[1]=v[1],g[2]=v[2],g[3]=v[3],this.setDirty())},h.setViewBox=function(v){var g=this.pixelRatio,y=this.viewBox;y[0]=0|Math.round(v[0]*g),y[1]=0|Math.round(v[1]*g),y[2]=0|Math.round(v[2]*g),y[3]=0|Math.round(v[3]*g);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((v[2]-v[0])*d),0|Math.round((v[3]-v[1])*d)],this.setDirty()},h.update=function(v){var g=this.gl;this.pixelRatio=(v=v||{}).pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(v.screenBox||[0,0,g.drawingBufferWidth/y,g.drawingBufferHeight/y]),this.setViewBox(v.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var d=this.viewBox,m=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(v.dataBox||[-10,-10/m,10,10/m]),this.borderColor=!1!==v.borderColor&&(v.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(v.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(v.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(v.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(v.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(v.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(v.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(v.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(v.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(v.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(v.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(v.titleCenter||[.5*(d[0]+d[2])/y,(d[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in v)||!!v.titleEnable,this.titleAngle=v.titleAngle||0,this.titleColor=(v.titleColor||[0,0,0,1]).slice(),this.labelPad=(v.labelPad||[15,15,15,15]).slice(),this.labelAngle=(v.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(v.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(v.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(v.tickPad||[15,15,15,15]).slice(),this.tickAngle=(v.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(v.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(v.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(v.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(v.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(v.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=v.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=1/0,u[2]=u[3]=-1/0;for(var S=0;S<2;++S){var _=w[S].slice(0);0!==_.length&&(_.sort(b),u[S]=Math.min(u[S],_[0].x),u[S+2]=Math.max(u[S+2],_[_.length-1].x))}this.grid.update({bounds:u,ticks:w}),this.text.update({bounds:u,ticks:w,labels:v.labels||["x","y"],labelSize:v.labelSize||[12,12],labelFont:v.labelFont||["sans-serif","sans-serif"],title:v.title||"",titleSize:v.titleSize||18,titleFont:v.titleFont||"sans-serif"}),this.static=!!v.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var v=this.objects.length-1;v>=0;--v)this.objects[v].dispose();for(this.objects.length=0,v=this.overlays.length-1;v>=0;--v)this.overlays[v].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(v){this.objects.indexOf(v)<0&&(this.objects.push(v),this.setDirty())},h.removeObject=function(v){for(var g=this.objects,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setDirty();break}},h.addOverlay=function(v){this.overlays.indexOf(v)<0&&(this.overlays.push(v),this.setOverlayDirty())},h.removeOverlay=function(v){for(var g=this.overlays,y=0;y<g.length;++y)if(g[y]===v){g.splice(y,1),this.setOverlayDirty();break}}},4296:function(p,s,e){"use strict";p.exports=function(h,f){h=h||document.body;var b=[.01,1/0];"distanceLimits"in(f=f||{})&&(b[0]=f.distanceLimits[0],b[1]=f.distanceLimits[1]),"zoomMin"in f&&(b[0]=f.zoomMin),"zoomMax"in f&&(b[1]=f.zoomMax);var v=r({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:b}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,d=h.clientWidth,m=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:v,element:h,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:v.modes,_ortho:f._ortho||f.projection&&"orthographic"===f.projection.type||!1,tick:function(){var u=o(),S=this.delay,_=u-2*S;v.idle(u-S),v.recalcMatrix(_),v.flush(u-(100+2*S));for(var E=!0,L=v.computedMatrix,C=0;C<16;++C)E=E&&g[C]===L[C],g[C]=L[C];var P=h.clientWidth===d&&h.clientHeight===m;return d=h.clientWidth,m=h.clientHeight,E?!P:(y=Math.exp(v.computedRadius[0]),!0)},lookAt:function(u,S,_){v.lookAt(v.lastT(),u,S,_)},rotate:function(u,S,_){v.rotate(v.lastT(),u,S,_)},pan:function(u,S,_){v.pan(v.lastT(),u,S,_)},translate:function(u,S,_){v.translate(v.lastT(),u,S,_)}};return Object.defineProperties(w,{matrix:{get:function(){return v.computedMatrix},set:function(u){return v.setMatrix(v.lastT(),u),v.computedMatrix},enumerable:!0},mode:{get:function(){return v.getMode()},set:function(u){var S=v.computedUp.slice(),_=v.computedEye.slice(),E=v.computedCenter.slice();if(v.setMode(u),"turntable"===u){var L=o();v._active.lookAt(L,_,E,S),v._active.lookAt(L+500,_,E,[0,0,1]),v._active.flush(L)}return v.getMode()},enumerable:!0},center:{get:function(){return v.computedCenter},set:function(u){return v.lookAt(v.lastT(),null,u),v.computedCenter},enumerable:!0},eye:{get:function(){return v.computedEye},set:function(u){return v.lookAt(v.lastT(),u),v.computedEye},enumerable:!0},up:{get:function(){return v.computedUp},set:function(u){return v.lookAt(v.lastT(),null,null,u),v.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(u){return v.setDistance(v.lastT(),u),u},enumerable:!0},distanceLimits:{get:function(){return v.getDistanceLimits(b)},set:function(u){return v.setDistanceLimits(u),u},enumerable:!0}}),h.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function u(S,_,E,L){var C=w.keyBindingMode;if(!1!==C){var P="rotate"===C,z="pan"===C,j="zoom"===C,R=!!L.control,V=!!L.alt,D=!!L.shift,B=!!(1&S),N=!!(2&S),U=!!(4&S),J=1/h.clientHeight,Y=J*(_-w._lastX),q=J*(E-w._lastY),H=w.flipX?1:-1,X=w.flipY?1:-1,Q=Math.PI*w.rotateSpeed,ne=o();if(-1!==w._lastX&&-1!==w._lastY&&((P&&B&&!R&&!V&&!D||B&&!R&&!V&&D)&&v.rotate(ne,H*Q*Y,-X*Q*q,0),(z&&B&&!R&&!V&&!D||N||B&&R&&!V&&!D)&&v.pan(ne,-w.translateSpeed*Y*y,w.translateSpeed*q*y,0),j&&B&&!R&&!V&&!D||U||B&&!R&&V&&!D)){var re=-w.zoomSpeed*q/window.innerHeight*(ne-v.lastT())*100;v.pan(ne,0,0,y*(Math.exp(re)-1))}return w._lastX=_,w._lastY=E,w._lastMods=L,!0}}w.mouseListener=n(h,u),h.addEventListener("touchstart",function(S){var _=i(S.changedTouches[0],h);u(0,_[0],_[1],w._lastMods),u(1,_[0],_[1],w._lastMods)},!!c&&{passive:!0}),h.addEventListener("touchmove",function(S){var _=i(S.changedTouches[0],h);u(1,_[0],_[1],w._lastMods),S.preventDefault()},!!c&&{passive:!1}),h.addEventListener("touchend",function(S){u(0,w._lastX,w._lastY,w._lastMods)},!!c&&{passive:!0}),w.wheelListener=a(h,function(S,_){if(!1!==w.keyBindingMode&&w.enableWheel){var E=w.flipX?1:-1,L=w.flipY?1:-1,C=o();if(Math.abs(S)>Math.abs(_))v.rotate(C,0,0,-S*E*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var P=-w.zoomSpeed*L*_/window.innerHeight*(C-v.lastT())/20;v.pan(C,0,0,y*(Math.exp(P)-1))}}},!0)},w.enableMouseListeners(),w};var o=e(8161),r=e(1152),n=e(6145),a=e(6475),i=e(2565),c=e(5233)},8245:function(p,s,e){var o=e(6832),r=e(5158),n=o(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=o(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);p.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec2"}])}},1059:function(p,s,e){"use strict";var o=e(4296),r=e(7453),n=e(2771),a=e(6496),i=e(2611),c=e(4234),h=e(8126),f=e(6145),b=e(1120),v=e(5268),g=e(8245),y=e(2321)({tablet:!0,featureDetect:!0});function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(u){var S=Math.round(Math.log(Math.abs(u))/Math.log(10));if(S<0){var _=Math.round(Math.pow(10,-S));return Math.ceil(u*_)/_}return S>0?(_=Math.round(Math.pow(10,S)),Math.ceil(u/_)*_):Math.ceil(u)}function w(u){return"boolean"!=typeof u||u}p.exports={createScene:function(u){(u=u||{}).camera=u.camera||{};var S=u.canvas;S||(S=document.createElement("canvas"),u.container?u.container.appendChild(S):document.body.appendChild(S));var _=u.gl;if(_||(u.glOptions&&(y=!!u.glOptions.preserveDrawingBuffer),_=function(Ee,de){var xe=null;try{(xe=Ee.getContext("webgl",de))||(xe=Ee.getContext("experimental-webgl",de))}catch{return null}return xe}(S,u.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:y})),!_)throw new Error("webgl not supported");var E=u.bounds||[[-10,-10,-10],[10,10,10]],L=new d,C=c(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!y}),P=g(_),z=u.cameraObject&&!0===u.cameraObject._ortho||u.camera.projection&&"orthographic"===u.camera.projection.type||!1,j={eye:u.camera.eye||[2,0,0],center:u.camera.center||[0,0,0],up:u.camera.up||[0,1,0],zoomMin:u.camera.zoomMax||.1,zoomMax:u.camera.zoomMin||100,mode:u.camera.mode||"turntable",_ortho:z},R=u.axes||{},V=r(_,R);V.enable=!R.disable;var B=a(_,u.spikes||{}),N=[],U=[],J=[],Y=[],q=!0,H=!0,X={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Q=(H=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ne=u.cameraObject||o(S,j),re={gl:_,contextLost:!1,pixelRatio:u.pixelRatio||1,canvas:S,selection:L,camera:ne,axes:V,axesPixels:null,spikes:B,bounds:E,objects:N,shape:Q,aspect:u.aspectRatio||[1,1,1],pickRadius:u.pickRadius||10,zNear:u.zNear||.01,zFar:u.zFar||1e3,fovy:u.fovy||Math.PI/4,clearColor:u.clearColor||[0,0,0,0],autoResize:w(u.autoResize),autoBounds:w(u.autoBounds),autoScale:!!u.autoScale,autoCenter:w(u.autoCenter),clipToBounds:w(u.clipToBounds),snapToData:!!u.snapToData,onselect:u.onselect||null,onrender:u.onrender||null,onclick:u.onclick||null,cameraParams:X,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ee){this.aspect[0]=Ee.x,this.aspect[1]=Ee.y,this.aspect[2]=Ee.z,H=!0},setBounds:function(Ee,de){this.bounds[0][Ee]=de.min,this.bounds[1][Ee]=de.max},setClearColor:function(Ee){this.clearColor=Ee},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[_.drawingBufferWidth/re.pixelRatio|0,_.drawingBufferHeight/re.pixelRatio|0];function se(){if(!re._stopped&&re.autoResize){var Ee=S.parentNode,de=1,xe=1;Ee&&Ee!==document.body?(de=Ee.clientWidth,xe=Ee.clientHeight):(de=window.innerWidth,xe=window.innerHeight);var Te=0|Math.ceil(de*re.pixelRatio),we=0|Math.ceil(xe*re.pixelRatio);if(Te!==S.width||we!==S.height){S.width=Te,S.height=we;var K=S.style;K.position=K.position||"absolute",K.left="0px",K.top="0px",K.width=de+"px",K.height=xe+"px",q=!0}}}function pe(){for(var Ee=N.length,de=Y.length,xe=0;xe<de;++xe)J[xe]=0;e:for(xe=0;xe<Ee;++xe){var Te=N[xe],we=Te.pickSlots;if(we){for(var K=0;K<de;++K)if(J[K]+we<255){U[xe]=K,Te.setPickBase(J[K]+1),J[K]+=we;continue e}var oe=i(_,Q);U[xe]=de,Y.push(oe),J.push(we),Te.setPickBase(1),de+=1}else U[xe]=-1}for(;de>0&&0===J[de-1];)J.pop(),Y.pop().dispose()}function ke(){if(re.contextLost)return!0;_.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}re.autoResize&&se(),window.addEventListener("resize",se),re.update=function(Ee){re._stopped||(Ee=Ee||{},q=!0,H=!0)},re.add=function(Ee){re._stopped||(Ee.axes=V,N.push(Ee),U.push(-1),q=!0,H=!0,pe())},re.remove=function(Ee){if(!re._stopped){var de=N.indexOf(Ee);de<0||(N.splice(de,1),U.pop(),q=!0,H=!0,pe())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",se),S.removeEventListener("webglcontextlost",ke),re.mouseListener.enabled=!1,!re.contextLost)){V.dispose(),B.dispose();for(var Ee=0;Ee<N.length;++Ee)N[Ee].dispose();for(C.dispose(),Ee=0;Ee<Y.length;++Ee)Y[Ee].dispose();P.dispose(),_=null,V=null,B=null,N=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=f(S,function(Ee,de,xe){if(!re._stopped){var Te=Y.length,we=N.length,K=L.object;L.distance=1/0,L.mouse[0]=de,L.mouse[1]=xe,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var oe=!1;if(Ee&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(H=!0),re._mouseRotating=!1;for(var he=0;he<Te;++he){var ye=Y[he].query(de,ae[1]-xe-1,re.pickRadius);if(ye){if(ye.distance>L.distance)continue;for(var Me=0;Me<we;++Me){var Re=N[Me];if(U[Me]===he){var Pe=Re.pick(ye);Pe&&(L.buttons=Ee,L.screen=ye.coord,L.distance=ye.distance,L.object=Re,L.index=Pe.distance,L.dataPosition=Pe.position,L.dataCoordinate=Pe.dataCoordinate,L.data=Pe,oe=!0)}}}}}K&&K!==L.object&&(K.highlight&&K.highlight(null),q=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),q=!0),(oe=oe||L.object!==K)&&re.onselect&&re.onselect(L),1&Ee&&!(1&re._prevButtons)&&re.onclick&&re.onclick(L),re._prevButtons=Ee}})},S.addEventListener("webglcontextlost",ke);var me=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],le=[me[0].slice(),me[1].slice()];function ue(){if(!ke()){se();var Ee=re.camera.tick();X.view=re.camera.matrix,q=q||Ee,H=H||Ee,V.pixelRatio=re.pixelRatio,B.pixelRatio=re.pixelRatio;var de=N.length,xe=me[0],Te=me[1];xe[0]=xe[1]=xe[2]=1/0,Te[0]=Te[1]=Te[2]=-1/0;for(var we=0;we<de;++we){(Ie=N[we]).pixelRatio=re.pixelRatio,Ie.axes=re.axes,q=q||!!Ie.dirty,H=H||!!Ie.dirty;var K=Ie.bounds;if(K)for(var oe=K[0],he=K[1],ye=0;ye<3;++ye)xe[ye]=Math.min(xe[ye],oe[ye]),Te[ye]=Math.max(Te[ye],he[ye])}var Me=re.bounds;if(re.autoBounds)for(ye=0;ye<3;++ye){if(Te[ye]<xe[ye])xe[ye]=-1,Te[ye]=1;else{xe[ye]===Te[ye]&&(xe[ye]-=1,Te[ye]+=1);var Re=.05*(Te[ye]-xe[ye]);xe[ye]=xe[ye]-Re,Te[ye]=Te[ye]+Re}Me[0][ye]=xe[ye],Me[1][ye]=Te[ye]}var Pe=!1;for(ye=0;ye<3;++ye)Pe=Pe||le[0][ye]!==Me[0][ye]||le[1][ye]!==Me[1][ye],le[0][ye]=Me[0][ye],le[1][ye]=Me[1][ye];if(H=H||Pe,q=q||Pe){if(Pe){var De=[0,0,0];for(we=0;we<3;++we)De[we]=m((Me[1][we]-Me[0][we])/10);V.update(V.autoTicks?{bounds:Me,tickSpacing:De}:{bounds:Me})}var fe=_.drawingBufferWidth,ge=_.drawingBufferHeight;for(Q[0]=fe,Q[1]=ge,ae[0]=0|Math.max(fe/re.pixelRatio,1),ae[1]=0|Math.max(ge/re.pixelRatio,1),function(He,Ve){var tt=He.bounds,nt=He.cameraParams,st=nt.projection,dt=nt.model,pt=He.zNear,Pt=He.zFar,St=He.fovy,Ot=He.gl.drawingBufferWidth/He.gl.drawingBufferHeight;Ve?(v(st,-Ot,Ot,-1,1,pt,Pt),nt._ortho=!0):(b(st,St,Ot,pt,Pt),nt._ortho=!1);for(var jt=0;jt<16;++jt)dt[jt]=0;dt[15]=1;var Dt=0;for(jt=0;jt<3;++jt)Dt=Math.max(Dt,tt[1][jt]-tt[0][jt]);for(jt=0;jt<3;++jt)dt[5*jt]=He.autoScale?He.aspect[jt]/(tt[1][jt]-tt[0][jt]):1/Dt,He.autoCenter&&(dt[12+jt]=.5*-dt[5*jt]*(tt[0][jt]+tt[1][jt]))}(re,z),we=0;we<de;++we)(Ie=N[we]).axesBounds=Me,re.clipToBounds&&(Ie.clipBounds=Me);L.object&&(B.position=re.snapToData?L.dataCoordinate:L.dataPosition,B.bounds=Me),H&&(H=!1,function(){if(!ke()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var He=N.length,Ve=Y.length,tt=0;tt<Ve;++tt){var nt=Y[tt];nt.shape=ae,nt.begin();for(var st=0;st<He;++st)if(U[st]===tt){var dt=N[st];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(X))}nt.end()}}}()),re.axesPixels=n(re.axes,X,fe,ge),re.onrender&&re.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,fe,ge),re.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var be=!1;for(V.enable&&(be=be||V.isTransparent(),V.draw(X)),B.axes=V,L.object&&B.draw(X),_.disable(_.CULL_FACE),we=0;we<de;++we)(Ie=N[we]).axes=V,Ie.pixelRatio=re.pixelRatio,Ie.isOpaque&&Ie.isOpaque()&&Ie.draw(X),Ie.isTransparent&&Ie.isTransparent()&&(be=!0);if(be){for(C.shape=Q,C.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),V.enable&&V.isTransparent()&&V.drawTransparent(X),we=0;we<de;++we)(Ie=N[we]).isOpaque&&Ie.isOpaque()&&Ie.draw(X);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),V.isTransparent()&&V.drawTransparent(X),we=0;we<de;++we){var Ie;(Ie=N[we]).isTransparent&&Ie.isTransparent()&&Ie.drawTransparent(X)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),P.bind(),C.color[0].bind(0),P.uniforms.accumBuffer=0,h(_),_.disable(_.BLEND)}for(q=!1,we=0;we<de;++we)N[we].dirty=!1}}}return re.enableMouseListeners(),function Ee(){re._stopped||re.contextLost||(ue(),requestAnimationFrame(Ee))}(),re.redraw=function(){re._stopped||(q=!0,ue())},re},createCamera:o}},8023:function(p,s,e){var o=e(6832);s.pointVertex=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),s.pointFragment=o(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),s.pickVertex=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),s.pickFragment=o(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(p,s,e){"use strict";var o=e(5158),r=e(5827),n=e(5306),a=e(8023);function i(b,v,g,y,d){this.plot=b,this.offsetBuffer=v,this.pickBuffer=g,this.shader=y,this.pickShader=d,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}p.exports=function(b,v){var g=b.gl,y=new i(b,r(g),r(g),o(g,a.pointVertex,a.pointFragment),o(g,a.pickVertex,a.pickFragment));return y.update(v),b.addObject(y),y};var c,h,f=i.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(b){var v;function g(_,E){return _ in b?b[_]:E}b=b||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var y=b.positions.length>>>1,d=b.positions instanceof Float32Array,m=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=y,w=b.positions,u=d?w:n.mallocFloat32(w.length),S=m?b.idToIndex:n.mallocInt32(y);if(d||u.set(w),!m)for(u.set(w),v=0;v<y;v++)S[v]=v;this.points=w,this.offsetBuffer.update(u),this.pickBuffer.update(S),d||n.free(u),m||n.free(S),this.pointCount=y,this.pickOffset=0},f.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(b){var v=void 0!==b,g=v?this.pickShader:this.shader,y=this.plot.gl,d=this.plot.dataBox;if(0===this.pointCount)return b;var m=d[2]-d[0],w=d[3]-d[1],u=function(L,C){var P,z=0,j=L.length>>>1;for(P=0;P<j;P++){var R=L[2*P],V=L[2*P+1];R>=C[0]&&R<=C[2]&&V>=C[1]&&V<=C[3]&&z++}return z}(this.points,d),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));c[0]=2/m,c[4]=2/w,c[6]=-2*d[0]/m-1,c[7]=-2*d[1]/w-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=c,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=S<5,g.uniforms.pointSize=S,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(h[0]=255&b,h[1]=b>>8&255,h[2]=b>>16&255,h[3]=b>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(y.UNSIGNED_BYTE),g.uniforms.pickOffset=h,this.pickOffset=b);var _=y.getParameter(y.BLEND),E=y.getParameter(y.DITHER);return _&&!this.blend&&y.disable(y.BLEND),E&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),_&&!this.blend&&y.enable(y.BLEND),E&&y.enable(y.DITHER),b+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(b,v,g){var y=this.pickOffset;if(g<y||g>=y+this.pointCount)return null;var m=g-y,w=this.points;return{object:this,pointId:m,dataCoord:[w[2*m],w[2*m+1]]}}},6093:function(p){p.exports=function(s,e,o,r){var n,a,i,c,h,f=e[0],b=e[1],v=e[2],g=e[3],y=o[0],d=o[1],m=o[2],w=o[3];return(a=f*y+b*d+v*m+g*w)<0&&(a=-a,y=-y,d=-d,m=-m,w=-w),1-a>1e-6?(n=Math.acos(a),i=Math.sin(n),c=Math.sin((1-r)*n)/i,h=Math.sin(r*n)/i):(c=1-r,h=r),s[0]=c*f+h*y,s[1]=c*b+h*d,s[2]=c*v+h*m,s[3]=c*g+h*w,s}},8240:function(p){"use strict";p.exports=function(s){return s||0===s?s.toString():""}},4123:function(p,s,e){"use strict";var o=e(875);p.exports=function(n,a,i){var c=r[a];if(c||(c=r[a]={}),n in c)return c[n];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},f=o(n,h);h.triangles=!1;var b,v,g=o(n,h);if(i&&1!==i){for(b=0;b<f.positions.length;++b)for(v=0;v<f.positions[b].length;++v)f.positions[b][v]/=i;for(b=0;b<g.positions.length;++b)for(v=0;v<g.positions[b].length;++v)g.positions[b][v]/=i}var y=[[1/0,1/0],[-1/0,-1/0]],d=g.positions.length;for(b=0;b<d;++b){var m=g.positions[b];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],m[v]),y[1][v]=Math.max(y[1][v],m[v])}return c[n]=[f,g,y]};var r={}},9282:function(p,s,e){var o=e(5158),r=e(6832),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),i=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:n,fragment:c,attributes:f},v={vertex:a,fragment:c,attributes:f},g={vertex:i,fragment:c,attributes:f},y={vertex:n,fragment:h,attributes:f},d={vertex:a,fragment:h,attributes:f},m={vertex:i,fragment:h,attributes:f};function w(u,S){var _=o(u,S),E=_.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,_}s.createPerspective=function(u){return w(u,b)},s.createOrtho=function(u){return w(u,v)},s.createProject=function(u){return w(u,g)},s.createPickPerspective=function(u){return w(u,y)},s.createPickOrtho=function(u){return w(u,d)},s.createPickProject=function(u){return w(u,m)}},2182:function(p,s,e){"use strict";var o=e(3596),r=e(5827),n=e(2944),a=e(5306),i=e(104),c=e(9282),h=e(4123),f=e(8240),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(U,J){var Y=U[0],q=U[1],H=U[2],X=U[3];return U[0]=J[0]*Y+J[4]*q+J[8]*H+J[12]*X,U[1]=J[1]*Y+J[5]*q+J[9]*H+J[13]*X,U[2]=J[2]*Y+J[6]*q+J[10]*H+J[14]*X,U[3]=J[3]*Y+J[7]*q+J[11]*H+J[15]*X,U}function g(U,J,Y,q){return v(q,q),v(q,q),v(q,q)}function y(U,J){this.index=U,this.dataCoordinate=this.position=J}function d(U){return!0===U||U>1?1:U}function m(U,J,Y,q,H,X,Q,ne,re,ae,se,pe){this.gl=U,this.pixelRatio=1,this.shader=J,this.orthoShader=Y,this.projectShader=q,this.pointBuffer=H,this.colorBuffer=X,this.glyphBuffer=Q,this.idBuffer=ne,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ae,this.pickOrthoShader=se,this.pickProjectShader=pe,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}p.exports=function(U){var J=U.gl,Y=c.createPerspective(J),q=c.createOrtho(J),H=c.createProject(J),X=c.createPickPerspective(J),Q=c.createPickOrtho(J),ne=c.createPickProject(J),re=r(J),ae=r(J),se=r(J),pe=r(J),ke=new m(J,Y,q,H,re,ae,se,pe,n(J,[{buffer:re,size:3,type:J.FLOAT},{buffer:ae,size:4,type:J.FLOAT},{buffer:se,size:2,type:J.FLOAT},{buffer:pe,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),X,Q,ne);return ke.update(U),ke};var w=m.prototype;w.pickSlots=1,w.setPickBase=function(U){this.pickId=U},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var U=0;U<3;++U)if(this.axesProject[U]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],S=[0,0,0],_=[0,0,0],E=[0,0,0,1],L=[0,0,0,1],C=b.slice(),P=[0,0,0],z=[[0,0,0],[0,0,0]];function j(U){return U[0]=U[1]=U[2]=0,U}function R(U,J){return U[0]=J[0],U[1]=J[1],U[2]=J[2],U[3]=1,U}function V(U,J,Y,q){return U[0]=J[0],U[1]=J[1],U[2]=J[2],U[Y]=q,U}var D=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function B(U,J,Y,q,H,X,Q){var ne=Y.gl;if((X===Y.projectHasAlpha||Q)&&function(ae,se,pe,ke){var me,le=se.axesProject,ue=se.gl,Ee=ae.uniforms,de=pe.model||b,xe=pe.view||b,Te=pe.projection||b,we=se.axesBounds,K=function(tt){for(var nt=z,st=0;st<2;++st)for(var dt=0;dt<3;++dt)nt[st][dt]=Math.max(Math.min(tt[st][dt],1e8),-1e8);return nt}(se.clipBounds);me=se.axes&&se.axes.lastCubeProps?se.axes.lastCubeProps.axis:[1,1,1],u[0]=2/ue.drawingBufferWidth,u[1]=2/ue.drawingBufferHeight,ae.bind(),Ee.view=xe,Ee.projection=Te,Ee.screenSize=u,Ee.highlightId=se.highlightId,Ee.highlightScale=se.highlightScale,Ee.clipBounds=K,Ee.pickGroup=se.pickId/255,Ee.pixelRatio=ke;for(var oe=0;oe<3;++oe)if(le[oe]){Ee.scale=se.projectScale[oe],Ee.opacity=se.projectOpacity[oe];for(var he=C,ye=0;ye<16;++ye)he[ye]=0;for(ye=0;ye<4;++ye)he[5*ye]=1;he[5*oe]=0,he[12+oe]=me[oe]<0?we[0][oe]:we[1][oe],i(he,de,he),Ee.model=he;var Me=(oe+1)%3,Re=(oe+2)%3,Pe=j(S),De=j(_);Pe[Me]=1,De[Re]=1;var fe=g(0,0,0,R(E,Pe)),ge=g(0,0,0,R(L,De));if(Math.abs(fe[1])>Math.abs(ge[1])){var be=fe;fe=ge,ge=be,be=Pe,Pe=De,De=be;var Ie=Me;Me=Re,Re=Ie}fe[0]<0&&(Pe[Me]=-1),ge[1]>0&&(De[Re]=-1);var He=0,Ve=0;for(ye=0;ye<4;++ye)He+=Math.pow(de[4*Me+ye],2),Ve+=Math.pow(de[4*Re+ye],2);Pe[Me]/=Math.sqrt(He),De[Re]/=Math.sqrt(Ve),Ee.axes[0]=Pe,Ee.axes[1]=De,Ee.fragClipBounds[0]=V(P,K[0],oe,-1e8),Ee.fragClipBounds[1]=V(P,K[1],oe,1e8),se.vao.bind(),se.vao.draw(ue.TRIANGLES,se.vertexCount),se.lineWidth>0&&(ue.lineWidth(se.lineWidth*ke),se.vao.draw(ue.LINES,se.lineVertexCount,se.vertexCount)),se.vao.unbind()}}(J,Y,q,H),X===Y.hasAlpha||Q){U.bind();var re=U.uniforms;re.model=q.model||b,re.view=q.view||b,re.projection=q.projection||b,u[0]=2/ne.drawingBufferWidth,u[1]=2/ne.drawingBufferHeight,re.screenSize=u,re.highlightId=Y.highlightId,re.highlightScale=Y.highlightScale,re.fragClipBounds=D,re.clipBounds=Y.axes.bounds,re.opacity=Y.opacity,re.pickGroup=Y.pickId/255,re.pixelRatio=H,Y.vao.bind(),Y.vao.draw(ne.TRIANGLES,Y.vertexCount),Y.lineWidth>0&&(ne.lineWidth(Y.lineWidth*H),Y.vao.draw(ne.LINES,Y.lineVertexCount,Y.vertexCount)),Y.vao.unbind()}}function N(U,J,Y,q){var H;H=Array.isArray(U)?J<U.length?U[J]:void 0:U,H=f(H);var X=!0;o(H)&&(H="\u25bc",X=!1);var Q=h(H,Y,q);return{mesh:Q[0],lines:Q[1],bounds:Q[2],visible:X}}w.draw=function(U){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,U,this.pixelRatio,!1,!1)},w.drawTransparent=function(U){B(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,U,this.pixelRatio,!0,!1)},w.drawPick=function(U){B(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,U,1,!0,!0)},w.pick=function(U){if(!U||U.id!==this.pickId)return null;var J=U.value[2]+(U.value[1]<<8)+(U.value[0]<<16);if(J>=this.pointCount||J<0)return null;var Y=this.points[J],q=this._selectResult;q.index=J;for(var H=0;H<3;++H)q.position[H]=q.dataCoordinate[H]=Y[H];return q},w.highlight=function(U){if(U){var J=U.index;this.highlightId=[(255&J)/255,(J>>8&255)/255,(J>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(U){if("perspective"in(U=U||{})&&(this.useOrtho=!U.perspective),"orthographic"in U&&(this.useOrtho=!!U.orthographic),"lineWidth"in U&&(this.lineWidth=U.lineWidth),"project"in U)if(Array.isArray(U.project))this.axesProject=U.project;else{var J=!!U.project;this.axesProject=[J,J,J]}if("projectScale"in U)if(Array.isArray(U.projectScale))this.projectScale=U.projectScale.slice();else{var Y=+U.projectScale;this.projectScale=[Y,Y,Y]}if(this.projectHasAlpha=!1,"projectOpacity"in U){this.projectOpacity=Array.isArray(U.projectOpacity)?U.projectOpacity.slice():[Y=+U.projectOpacity,Y,Y];for(var q=0;q<3;++q)this.projectOpacity[q]=d(this.projectOpacity[q]),this.projectOpacity[q]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in U&&(this.opacity=d(U.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var H,X,Q=U.position,ne=U.font||"normal",re=U.alignment||[0,0];if(2===re.length)H=re[0],X=re[1];else for(H=[],X=[],q=0;q<re.length;++q)H[q]=re[q][0],X[q]=re[q][1];var ae=[1/0,1/0,1/0],se=[-1/0,-1/0,-1/0],pe=U.glyph,ke=U.color,me=U.size,le=U.angle,ue=U.lineColor,Ee=-1,de=0,xe=0,Te=0;if(Q.length){Te=Q.length;e:for(q=0;q<Te;++q){for(var we=Q[q],K=0;K<3;++K)if(isNaN(we[K])||!isFinite(we[K]))continue e;var oe=(nt=N(pe,q,ne,this.pixelRatio)).mesh,he=nt.lines,ye=nt.bounds;de+=3*oe.cells.length,xe+=2*he.edges.length}}var Me=de+xe,Re=a.mallocFloat(3*Me),Pe=a.mallocFloat(4*Me),De=a.mallocFloat(2*Me),fe=a.mallocUint32(Me);if(Me>0){var ge=0,be=de,Ie=[0,0,0,1],He=[0,0,0,1],Ve=Array.isArray(ke)&&Array.isArray(ke[0]),tt=Array.isArray(ue)&&Array.isArray(ue[0]);e:for(q=0;q<Te;++q){for(Ee+=1,we=Q[q],K=0;K<3;++K){if(isNaN(we[K])||!isFinite(we[K]))continue e;se[K]=Math.max(se[K],we[K]),ae[K]=Math.min(ae[K],we[K])}oe=(nt=N(pe,q,ne,this.pixelRatio)).mesh,he=nt.lines,ye=nt.bounds;var nt,st=nt.visible;if(st)if(Array.isArray(ke)){if(3===(dt=Ve?q<ke.length?ke[q]:[0,0,0,0]:ke).length){for(K=0;K<3;++K)Ie[K]=dt[K];Ie[3]=1}else if(4===dt.length){for(K=0;K<4;++K)Ie[K]=dt[K];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Ie[0]=Ie[1]=Ie[2]=0,Ie[3]=1;else Ie=[1,1,1,0];if(st)if(Array.isArray(ue)){var dt;if(3===(dt=tt?q<ue.length?ue[q]:[0,0,0,0]:ue).length){for(K=0;K<3;++K)He[K]=dt[K];He[K]=1}else if(4===dt.length){for(K=0;K<4;++K)He[K]=dt[K];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];var wt=.5;st?Array.isArray(me)?wt=q<me.length?+me[q]:12:me?wt=+me:this.useOrtho&&(wt=12):wt=0;var _t=0;Array.isArray(le)?_t=q<le.length?+le[q]:0:le&&(_t=+le);var pt=Math.cos(_t),Pt=Math.sin(_t);for(we=Q[q],K=0;K<3;++K)se[K]=Math.max(se[K],we[K]),ae[K]=Math.min(ae[K],we[K]);var St=H,Ot=X;St=0,Array.isArray(H)?St=q<H.length?H[q]:0:H&&(St=H),Ot=0,Array.isArray(X)?Ot=q<X.length?X[q]:0:X&&(Ot=X);var jt=[St*=St>0?1-ye[0][0]:St<0?1+ye[1][0]:1,Ot*=Ot>0?1-ye[0][1]:Ot<0?1+ye[1][1]:1],Dt=oe.cells||[],Ye=oe.positions||[];for(K=0;K<Dt.length;++K)for(var Ze=Dt[K],Ne=0;Ne<3;++Ne){for(var Je=0;Je<3;++Je)Re[3*ge+Je]=we[Je];for(Je=0;Je<4;++Je)Pe[4*ge+Je]=Ie[Je];fe[ge]=Ee;var at=Ye[Ze[Ne]];De[2*ge]=wt*(pt*at[0]-Pt*at[1]+jt[0]),De[2*ge+1]=wt*(Pt*at[0]+pt*at[1]+jt[1]),ge+=1}for(Dt=he.edges,Ye=he.positions,K=0;K<Dt.length;++K)for(Ze=Dt[K],Ne=0;Ne<2;++Ne){for(Je=0;Je<3;++Je)Re[3*be+Je]=we[Je];for(Je=0;Je<4;++Je)Pe[4*be+Je]=He[Je];fe[be]=Ee,De[2*be]=wt*(pt*(at=Ye[Ze[Ne]])[0]-Pt*at[1]+jt[0]),De[2*be+1]=wt*(Pt*at[0]+pt*at[1]+jt[1]),be+=1}}}this.bounds=[ae,se],this.points=Q,this.pointCount=Q.length,this.vertexCount=de,this.lineVertexCount=xe,this.pointBuffer.update(Re),this.colorBuffer.update(Pe),this.glyphBuffer.update(De),this.idBuffer.update(fe),a.free(Re),a.free(Pe),a.free(De),a.free(fe)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(p,s,e){"use strict";var o=e(6832);s.boxVertex=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),s.boxFragment=o(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(p,s,e){"use strict";var o=e(5158),r=e(5827),n=e(1884);function a(c,h,f){this.plot=c,this.boxBuffer=h,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}p.exports=function(c,h){var f=c.gl,b=new a(c,r(f,[0,0,0,1,1,0,1,1]),o(f,n.boxVertex,n.boxFragment));return b.update(h),c.addOverlay(b),b};var i=a.prototype;i.draw=function(){if(this.enabled){var c=this.plot,h=this.selectBox,f=this.borderWidth,b=this.innerColor,v=this.outerColor,g=this.borderColor,y=c.box,d=c.screenBox,m=c.dataBox,w=c.viewBox,u=c.pixelRatio,S=(h[0]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],_=(h[1]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1],E=(h[2]-m[0])*(w[2]-w[0])/(m[2]-m[0])+w[0],L=(h[3]-m[1])*(w[3]-w[1])/(m[3]-m[1])+w[1];if(S=Math.max(S,w[0]),_=Math.max(_,w[1]),E=Math.min(E,w[2]),L=Math.min(L,w[3]),!(E<S||L<_)){y.bind();var C=d[2]-d[0],P=d[3]-d[1];if(this.outerFill&&(y.drawBox(0,0,C,_,v),y.drawBox(0,_,S,L,v),y.drawBox(0,L,C,P,v),y.drawBox(E,_,C,L,v)),this.innerFill&&y.drawBox(S,_,E,L,b),f>0){var z=f*u;y.drawBox(S-z,_-z,E+z,_+z,g),y.drawBox(S-z,L-z,E+z,L+z,g),y.drawBox(S-z,_-z,S+z,L+z,g),y.drawBox(E-z,_-z,E+z,L+z,g)}}}},i.update=function(c){this.innerFill=!!(c=c||{}).innerFill,this.outerFill=!!c.outerFill,this.innerColor=(c.innerColor||[0,0,0,.5]).slice(),this.outerColor=(c.outerColor||[0,0,0,.5]).slice(),this.borderColor=(c.borderColor||[0,0,0,1]).slice(),this.borderWidth=c.borderWidth||0,this.selectBox=(c.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(p,s,e){"use strict";p.exports=function(f,b){var v=b[0],g=b[1];return new c(f,o(f,v,g,{}),r.mallocUint8(v*g*4))};var o=e(4234),r=e(5306),n=e(5050),a=e(2288).nextPow2;function i(f,b,v,g,y){this.coord=[f,b],this.id=v,this.value=g,this.distance=y}function c(f,b,v){this.gl=f,this.fbo=b,this.buffer=v,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(b.bind(),f.readPixels(0,0,b.shape[0],b.shape[1],f.RGBA,f.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var h=c.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var b=this.fbo.shape[0],v=this.fbo.shape[1];if(v*b*4>this.buffer.length){r.free(this.buffer);for(var g=this.buffer=r.mallocUint8(a(v*b*4)),y=0;y<v*b*4;++y)g[y]=255}return f}}}),h.begin=function(){var f=this.gl;f&&(this.fbo.bind(),f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))},h.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(f,b,v){if(!this.gl)return null;var g=this.fbo.shape.slice();f|=0,b|=0,"number"!=typeof v&&(v=1);var y=0|Math.min(Math.max(f-v,0),g[0]),d=0|Math.min(Math.max(f+v,0),g[0]),m=0|Math.min(Math.max(b-v,0),g[1]),w=0|Math.min(Math.max(b+v,0),g[1]);if(d<=y||w<=m)return null;var u=[d-y,w-m],S=n(this.buffer,[u[0],u[1],4],[4,4*g[0],1],4*(y+g[0]*m)),_=function(C,P,z){for(var j=1e8,R=-1,V=-1,D=C.shape[0],B=C.shape[1],N=0;N<D;N++)for(var U=0;U<B;U++){var J=C.get(N,U,0),Y=C.get(N,U,1),q=C.get(N,U,2),H=C.get(N,U,3);if(J<255||Y<255||q<255||H<255){var X=P-N,Q=z-U,ne=X*X+Q*Q;ne<j&&(j=ne,R=N,V=U)}}return[R,V,j]}(S.hi(u[0],u[1],1),v,v),E=_[0],L=_[1];return E<0||Math.pow(this.radius,2)<_[2]?null:new i(E+y|0,L+m|0,S.get(E,L,0),[S.get(E,L,1),S.get(E,L,2),S.get(E,L,3)],Math.sqrt(_[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(p,s,e){"use strict";var o=e(9016),r=e(4280),n=e(3984),a=e(1628),i=e(2631),c=e(9068);function h(v){this.gl=v,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=h.prototype;function b(v,g){return v.name<g.name?-1:1}f.bind=function(){var v;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(g>y)for(v=y;v<g;v++)this.gl.enableVertexAttribArray(v);else if(y>g)for(v=g;v<y;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},f.dispose=function(){for(var v=this.gl.lastAttribCount,g=0;g<v;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(v,g,y,d){if(!g||1===arguments.length){var m=v;v=m.vertex,g=m.fragment,y=m.uniforms,d=m.attributes}var w=this,u=w.gl,S=w._vref;w._vref=a.shader(u,u.VERTEX_SHADER,v),S&&S.dispose(),w.vertShader=w._vref.shader;var _=this._fref;if(w._fref=a.shader(u,u.FRAGMENT_SHADER,g),_&&_.dispose(),w.fragShader=w._fref.shader,!y||!d){var E=u.createProgram();if(u.attachShader(E,w.fragShader),u.attachShader(E,w.vertShader),u.linkProgram(E),!u.getProgramParameter(E,u.LINK_STATUS)){var L=u.getProgramInfoLog(E);throw new c(L,"Error linking program:"+L)}y=y||i.uniforms(u,E),d=d||i.attributes(u,E),u.deleteProgram(E)}(d=d.slice()).sort(b);var C,P=[],z=[],j=[];for(C=0;C<d.length;++C){var R=d[C];if(R.type.indexOf("mat")>=0){for(var V=0|R.type.charAt(R.type.length-1),D=new Array(V),B=0;B<V;++B)D[B]=j.length,z.push(R.name+"["+B+"]"),"number"==typeof R.location?j.push(R.location+B):Array.isArray(R.location)&&R.location.length===V&&"number"==typeof R.location[B]?j.push(0|R.location[B]):j.push(-1);P.push({name:R.name,type:R.type,locations:D})}else P.push({name:R.name,type:R.type,locations:[j.length]}),z.push(R.name),j.push("number"==typeof R.location?0|R.location:-1)}var N=0;for(C=0;C<j.length;++C)if(j[C]<0){for(;j.indexOf(N)>=0;)N+=1;j[C]=N}var U=new Array(y.length);function J(){w.program=a.program(u,w._vref,w._fref,z,j);for(var Y=0;Y<y.length;++Y)U[Y]=u.getUniformLocation(w.program,y[Y].name)}J(),w._relink=J,w.types={uniforms:n(y),attributes:n(d)},w.attributes=r(u,w,P,j),Object.defineProperty(w,"uniforms",o(u,w,y,U))},p.exports=function(v,g,y,d,m){var w=new h(v);return w.update(g,y,d,m),w}},9068:function(p){function s(e,o,r){this.shortMessage=o||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(o||e||"")+(r?"\n"+r:""),this.stack=(new Error).stack}(s.prototype=new Error).name="GLError",s.prototype.constructor=s,p.exports=s},4280:function(p,s,e){"use strict";p.exports=function(h,f,b,v){for(var g={},y=0,d=b.length;y<d;++y){var m=b[y],w=m.name,u=m.type,S=m.locations;switch(u){case"bool":case"int":case"float":i(h,f,S[0],v,1,g,w);break;default:if(u.indexOf("vec")>=0){if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);i(h,f,S[0],v,_,g,w)}else{if(!(u.indexOf("mat")>=0))throw new o("","Unknown data type for attribute "+w+": "+u);var _;if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new o("","Invalid data type for attribute "+w+": "+u);c(h,f,S,v,_,g,w)}}}return g};var o=e(9068);function r(h,f,b,v,g,y){this._gl=h,this._wrapper=f,this._index=b,this._locations=v,this._dimension=g,this._constFunc=y}var n=r.prototype;n.pointer=function(h,f,b,v){var g=this,y=g._gl,d=g._locations[g._index];y.vertexAttribPointer(d,g._dimension,h||y.FLOAT,!!f,b||0,v||0),y.enableVertexAttribArray(d)},n.set=function(h,f,b,v){return this._constFunc(this._locations[this._index],h,f,b,v)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,f,b){return void 0===b.length?h.vertexAttrib1f(f,b):h.vertexAttrib1fv(f,b)},function(h,f,b,v){return void 0===b.length?h.vertexAttrib2f(f,b,v):h.vertexAttrib2fv(f,b)},function(h,f,b,v,g){return void 0===b.length?h.vertexAttrib3f(f,b,v,g):h.vertexAttrib3fv(f,b)},function(h,f,b,v,g,y){return void 0===b.length?h.vertexAttrib4f(f,b,v,g,y):h.vertexAttrib4fv(f,b)}];function i(h,f,b,v,g,y,d){var m=a[g],w=new r(h,f,b,v,g,m);Object.defineProperty(y,d,{set:function(u){return h.disableVertexAttribArray(v[b]),m(h,v[b],u),u},get:function(){return w},enumerable:!0})}function c(h,f,b,v,g,y,d){for(var m=new Array(g),w=new Array(g),u=0;u<g;++u)i(h,f,b[u],v,g,m,u),w[u]=m[u];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<g;++L)w[L].location=E[L];else for(L=0;L<g;++L)w[L].location=E+L;return E},get:function(){for(var E=new Array(g),L=0;L<g;++L)E[L]=v[b[L]];return E},enumerable:!0}),m.pointer=function(E,L,C,P){E=E||h.FLOAT,L=!!L,C=C||g*g,P=P||0;for(var z=0;z<g;++z){var j=v[b[z]];h.vertexAttribPointer(j,g,E,L,C,P+z*g),h.enableVertexAttribArray(j)}};var S=new Array(g),_=h["vertexAttrib"+g+"fv"];Object.defineProperty(y,d,{set:function(E){for(var L=0;L<g;++L){var C=v[b[L]];if(h.disableVertexAttribArray(C),Array.isArray(E[0]))_.call(h,C,E[L]);else{for(var P=0;P<g;++P)S[P]=E[g*L+P];_.call(h,C,S)}}return E},get:function(){return m},enumerable:!0})}},9016:function(p,s,e){"use strict";var o=e(3984),r=e(9068);function n(i){return function(){return i}}function a(i,c){for(var h=new Array(i),f=0;f<i;++f)h[f]=c;return h}p.exports=function(i,c,h,f){function b(m){return function(w){for(var u=v("",m),S=0;S<u.length;++S){var _=u[S],E=_[0],L=_[1];if(f[L]){var C=w;if("string"==typeof E&&(0===E.indexOf(".")||0===E.indexOf("["))){var P=E;if(0===E.indexOf(".")&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var z=P.indexOf("["),j=P.slice(0,z),R=P.slice(z+1,P.length-1);C=j?w[j][R]:w[R]}else C=w[P]}var V,D=h[L].type;switch(D){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(f[L],C);break;case"float":i.uniform1f(f[L],C);break;default:var B=D.indexOf("vec");if(!(0<=B&&B<=1&&D.length===4+B)){if(0===D.indexOf("mat")&&4===D.length){if((V=D.charCodeAt(D.length-1)-48)<2||V>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+D);i["uniformMatrix"+V+"fv"](f[L],!1,C);break}throw new r("","Unknown uniform data type for "+name+": "+D)}if((V=D.charCodeAt(D.length-1)-48)<2||V>4)throw new r("","Invalid data type");switch(D.charAt(0)){case"b":case"i":i["uniform"+V+"iv"](f[L],C);break;case"v":i["uniform"+V+"fv"](f[L],C);break;default:throw new r("","Unrecognized data type for vector "+name+": "+D)}}}}}}function v(m,w){if("object"!=typeof w)return[[m,w]];var u=[];for(var S in w){var _=w[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,"object"==typeof _?u.push.apply(u,v(E,_)):u.push([E,_])}return u}function g(m,w,u){if("object"==typeof u){var S=y(u);Object.defineProperty(m,w,{get:n(S),set:b(u),enumerable:!0,configurable:!1})}else f[u]?Object.defineProperty(m,w,{get:(_=u,function(E,L,C){return E.getUniform(L.program,C[_])}),set:b(u),enumerable:!0,configurable:!1}):m[w]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid data type");return"b"===E.charAt(0)?a(C,!1):a(C,0)}if(0===E.indexOf("mat")&&4===E.length){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(h[u].type);var _}function y(m){var w;if(Array.isArray(m)){w=new Array(m.length);for(var u=0;u<m.length;++u)g(w,u,m[u])}else for(var S in w={},m)g(w,S,m[S]);return w}var d=o(h,!0);return{get:n(y(d)),set:b(d),enumerable:!0,configurable:!0}}},3984:function(p){"use strict";p.exports=function(s,e){for(var o={},r=0;r<s.length;++r)for(var n=s[r].name.split("."),a=o,i=0;i<n.length;++i){var c=n[i].split("[");if(c.length>1){c[0]in a||(a[c[0]]=[]),a=a[c[0]];for(var h=1;h<c.length;++h){var f=parseInt(c[h]);h<c.length-1||i<n.length-1?(f in a||(a[f]=h<c.length-1?[]:{}),a=a[f]):a[f]=e?r:s[r].type}}else i<n.length-1?(c[0]in a||(a[c[0]]={}),a=a[c[0]]):a[c[0]]=e?r:s[r].type}return o}},2631:function(p,s){"use strict";s.uniforms=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),c=[],h=0;h<i;++h){var f=n.getActiveUniform(a,h);if(f){var b=r(n,f.type);if(f.size>1)for(var v=0;v<f.size;++v)c.push({name:f.name.replace("[0]","["+v+"]"),type:b});else c.push({name:f.name,type:b})}}return c},s.attributes=function(n,a){for(var i=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),c=[],h=0;h<i;++h){var f=n.getActiveAttrib(a,h);f&&c.push({name:f.name,type:r(n,f.type)})}return c};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function r(n,a){if(!o){var i=Object.keys(e);o={};for(var c=0;c<i.length;++c){var h=i[c];o[n[h]]=e[h]}}return o[a]}},1628:function(p,s,e){"use strict";s.shader=function(b,v,g){return f(b).getShaderReference(v,g)},s.program=function(b,v,g,y,d){return f(b).getProgram(v,g,y,d)};var o=e(9068),r=e(3530),n=new(typeof WeakMap>"u"?e(4037):WeakMap),a=0;function i(b,v,g,y,d,m,w){this.id=b,this.src=v,this.type=g,this.shader=y,this.count=m,this.programs=[],this.cache=w}function c(b){this.gl=b,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(0==--this.count){for(var b=this.cache,v=b.gl,g=this.programs,y=0,d=g.length;y<d;++y){var m=b.programs[g[y]];m&&(delete b.programs[y],v.deleteProgram(m))}v.deleteShader(this.shader),delete b.shaders[this.type===v.FRAGMENT_SHADER|0][this.src]}};var h=c.prototype;function f(b){var v=n.get(b);return v||(v=new c(b),n.set(b,v)),v}h.getShaderReference=function(b,v){var g=this.gl,y=this.shaders[b===g.FRAGMENT_SHADER|0],d=y[v];if(d&&g.isShader(d.shader))d.count+=1;else{var m=function(w,u,S){var _=w.createShader(u);if(w.shaderSource(_,S),w.compileShader(_),!w.getShaderParameter(_,w.COMPILE_STATUS)){var E=w.getShaderInfoLog(_);try{var L=r(E,S,u)}catch(C){throw console.warn("Failed to format compiler error: "+C),new o(E,"Error compiling shader:\n"+E)}throw new o(E,L.short,L.long)}return _}(g,b,v);d=y[v]=new i(a++,v,b,m,[],1,this)}return d},h.getProgram=function(b,v,g,y){var d=[b.id,v.id,g.join(":"),y.join(":")].join("@"),m=this.programs[d];return m&&this.gl.isProgram(m)||(this.programs[d]=m=function(w,u,S,_,E){var L=w.createProgram();w.attachShader(L,u),w.attachShader(L,S);for(var C=0;C<_.length;++C)w.bindAttribLocation(L,E[C],_[C]);if(w.linkProgram(L),!w.getProgramParameter(L,w.LINK_STATUS)){var P=w.getProgramInfoLog(L);throw new o(P,"Error linking program: "+P)}return L}(this.gl,b.shader,v.shader,g,y),b.programs.push(d),v.programs.push(d)),m}},3050:function(p){"use strict";function s(o){this.plot=o,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}p.exports=function(o,r){var n=new s(o);return n.update(r),o.addOverlay(n),n};var e=s.prototype;e.update=function(o){this.enable=((o=o||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(o.width||[1,1,1,1]).slice(),this.color=(o.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(o.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},e.draw=function(){var o=this.enable,r=this.width,n=this.color,a=this.center,i=this.plot,c=i.line,h=i.dataBox,f=i.viewBox;if(c.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var b=f[0]+(a[0]-h[0])/(h[2]-h[0])*(f[2]-f[0]),v=f[1]+(a[1]-h[1])/(h[3]-h[1])*(f[3]-f[1]);o[0]&&c.drawLine(b,v,f[0],v,r[0],n[0]),o[1]&&c.drawLine(b,v,b,f[1],r[1],n[1]),o[2]&&c.drawLine(b,v,f[2],v,r[2],n[2]),o[3]&&c.drawLine(b,v,b,f[3],r[3],n[3])}},e.dispose=function(){this.plot.removeOverlay(this)}},3540:function(p,s,e){"use strict";var o=e(6832),r=e(5158),n=o(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=o(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);p.exports=function(i){return r(i,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(p,s,e){"use strict";var o=e(5827),r=e(2944),n=e(3540);p.exports=function(v,g){var y=[];function d(_,E,L,C,P,z){var j=[_,E,L,0,0,0,1];j[C+3]=1,j[C]=P,y.push.apply(y,j),j[6]=-1,y.push.apply(y,j),j[C]=z,y.push.apply(y,j),y.push.apply(y,j),j[6]=1,y.push.apply(y,j),j[C]=P,y.push.apply(y,j)}d(0,0,0,0,0,1),d(0,0,0,1,0,1),d(0,0,0,2,0,1),d(1,0,0,1,-1,1),d(1,0,0,2,-1,1),d(0,1,0,0,-1,1),d(0,1,0,2,-1,1),d(0,0,1,0,-1,1),d(0,0,1,1,-1,1);var m=o(v,y),w=r(v,[{type:v.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:v.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:v.FLOAT,buffer:m,size:1,offset:24,stride:28}]),u=n(v);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var S=new i(v,m,w,u);return S.update(g),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(v,g,y,d){this.gl=v,this.buffer=g,this.vao=y,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=i.prototype,h=[0,0,0],f=[0,0,0],b=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(v){},c.draw=function(v){var g=this.gl,y=this.vao,d=this.shader;y.bind(),d.bind();var m,w=v.model||a,u=v.view||a,S=v.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var _=h,E=f,L=0;L<3;++L)m&&m[L]<0?(_[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(_[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(b[0]=g.drawingBufferWidth,b[1]=g.drawingBufferHeight,d.uniforms.model=w,d.uniforms.view=u,d.uniforms.projection=S,d.uniforms.coordinates=[this.position,_,E],d.uniforms.colors=this.colors,d.uniforms.screenShape=b,L=0;L<3;++L)d.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(y.draw(g.TRIANGLES,6,6*L),this.drawSides[L]&&y.draw(g.TRIANGLES,12,18+12*L));y.unbind()},c.update=function(v){v&&("bounds"in v&&(this.bounds=v.bounds),"position"in v&&(this.position=v.position),"lineWidth"in v&&(this.lineWidth=v.lineWidth),"colors"in v&&(this.colors=v.colors),"enabled"in v&&(this.enabled=v.enabled),"drawSides"in v&&(this.drawSides=v.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(p,s,e){var o=e(6832),r=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=o(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=o(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);s.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(p,s,e){"use strict";var o=e(2858),r=e(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(b,v){var g,y=b.length;for(g=0;g<y;g++){var d=b[g];if(d===v)return g;if(d>v)return g-1}return g},i=function(b,v,g){return b<v?v:b>g?g:b},c=function(b){var v=1/0;b.sort(function(m,w){return m-w});for(var g=b.length,y=1;y<g;y++){var d=Math.abs(b[y]-b[y-1]);d<v&&(v=d)}return v};p.exports=function(b,v){var g=b.startingPositions,y=b.maxLength||1e3,d=b.tubeSize||1,m=b.absoluteTubeSize,w=b.gridFill||"+x+y+z",u={};-1!==w.indexOf("-x")&&(u.reversedX=!0),-1!==w.indexOf("-y")&&(u.reversedY=!0),-1!==w.indexOf("-z")&&(u.reversedZ=!0),u.filled=n.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var ue,Ee,de,xe,S=b.getVelocity||function(ue){return function(Ee,de,xe){var Te=de.vectors,we=de.meshgrid,K=Ee[0],oe=Ee[1],he=Ee[2],ye=we[0].length,Me=we[1].length,Re=we[2].length,Pe=a(we[0],K),De=a(we[1],oe),fe=a(we[2],he),ge=Pe+1,be=De+1,Ie=fe+1;if(Pe=i(Pe,0,ye-1),ge=i(ge,0,ye-1),De=i(De,0,Me-1),be=i(be,0,Me-1),fe=i(fe,0,Re-1),Ie=i(Ie,0,Re-1),Pe<0||De<0||fe<0||ge>ye-1||be>Me-1||Ie>Re-1)return o.create();var He,Ve,tt,nt,st,dt,wt=we[0][Pe],pt=we[1][De],St=we[2][fe],Ot=(K-wt)/(we[0][ge]-wt),jt=(oe-pt)/(we[1][be]-pt),Dt=(he-St)/(we[2][Ie]-St);switch(isFinite(Ot)||(Ot=.5),isFinite(jt)||(jt=.5),isFinite(Dt)||(Dt=.5),xe.reversedX&&(Pe=ye-1-Pe,ge=ye-1-ge),xe.reversedY&&(De=Me-1-De,be=Me-1-be),xe.reversedZ&&(fe=Re-1-fe,Ie=Re-1-Ie),xe.filled){case 5:st=fe,dt=Ie,tt=De*Re,nt=be*Re,He=Pe*Re*Me,Ve=ge*Re*Me;break;case 4:st=fe,dt=Ie,He=Pe*Re,Ve=ge*Re,tt=De*Re*ye,nt=be*Re*ye;break;case 3:tt=De,nt=be,st=fe*Me,dt=Ie*Me,He=Pe*Me*Re,Ve=ge*Me*Re;break;case 2:tt=De,nt=be,He=Pe*Me,Ve=ge*Me,st=fe*Me*ye,dt=Ie*Me*ye;break;case 1:He=Pe,Ve=ge,st=fe*ye,dt=Ie*ye,tt=De*ye*Re,nt=be*ye*Re;break;default:He=Pe,Ve=ge,tt=De*ye,nt=be*ye,st=fe*ye*Me,dt=Ie*ye*Me}var Ye=Te[He+tt+st],Ze=Te[He+tt+dt],Ne=Te[He+nt+st],Je=Te[He+nt+dt],at=Te[Ve+tt+st],Se=Te[Ve+tt+dt],ze=Te[Ve+nt+st],Ke=Te[Ve+nt+dt],it=o.create(),ct=o.create(),mt=o.create(),Lt=o.create();o.lerp(it,Ye,at,Ot),o.lerp(ct,Ze,Se,Ot),o.lerp(mt,Ne,ze,Ot),o.lerp(Lt,Je,Ke,Ot);var At=o.create(),ht=o.create();o.lerp(At,it,mt,jt),o.lerp(ht,ct,Lt,jt);var Et=o.create();return o.lerp(Et,At,ht,Dt),Et}(ue,b,u)},_=b.getDivergence||function(ue,Ee){var de=o.create(),xe=1e-4;o.add(de,ue,[xe,0,0]);var Te=S(de);o.subtract(Te,Te,Ee),o.scale(Te,Te,1/xe),o.add(de,ue,[0,xe,0]);var we=S(de);o.subtract(we,we,Ee),o.scale(we,we,1/xe),o.add(de,ue,[0,0,xe]);var K=S(de);return o.subtract(K,K,Ee),o.scale(K,K,1/xe),o.add(de,Te,we),o.add(de,de,K),de},E=[],L=v[0][0],C=v[0][1],P=v[0][2],z=v[1][0],j=v[1][1],R=v[1][2],D=10*o.distance(v[0],v[1])/y,B=D*D,N=1,U=0,J=g.length;J>1&&(N=function(ue){for(var Ee=[],de=[],xe=[],Te={},we={},K={},oe=ue.length,he=0;he<oe;he++){var ye=ue[he],Me=ye[0],Re=ye[1],Pe=ye[2];Te[Me]||(Ee.push(Me),Te[Me]=!0),we[Re]||(de.push(Re),we[Re]=!0),K[Pe]||(xe.push(Pe),K[Pe]=!0)}var De=c(Ee),fe=c(de),ge=c(xe),be=Math.min(De,fe,ge);return isFinite(be)?be:1}(g));for(var Y=0;Y<J;Y++){var q=o.create();o.copy(q,g[Y]);var H=[q],X=[],Q=S(q),ne=q;X.push(Q);var re=[],ae=_(q,Q),se=o.length(ae);isFinite(se)&&se>U&&(U=se),re.push(se),E.push({points:H,velocities:X,divergences:re});for(var pe=0;pe<100*y&&H.length<y&&(Ee=void 0,de=void 0,xe=void 0,de=(ue=q)[1],xe=ue[2],!((Ee=ue[0])<L||Ee>z||de<C||de>j||xe<P||xe>R));){pe++;var ke=o.clone(Q),me=o.squaredLength(ke);if(0===me)break;me>B&&o.scale(ke,ke,D/Math.sqrt(me)),o.add(ke,ke,q),Q=S(ke),o.squaredDistance(ne,ke)-B>-1e-4*B&&(H.push(ke),ne=ke,X.push(Q),ae=_(ke,Q),se=o.length(ae),isFinite(se)&&se>U&&(U=se),re.push(se)),q=ke}}var le=function(ue,Ee,de,xe){for(var Te=0,we=0;we<ue.length;we++)for(var K=ue[we].velocities,oe=0;oe<K.length;oe++)Te=Math.max(Te,o.length(K[oe]));var he=ue.map(function(He){return function(Ve,tt,nt,st){for(var dt=Ve.points,wt=Ve.velocities,_t=Ve.divergences,pt=[],Pt=[],St=[],Ot=[],jt=[],Dt=[],Ye=0,Ze=0,Ne=r.create(),Je=r.create(),at=0;at<dt.length;at++){var Se=dt[at],ze=wt[at],Ke=_t[at];0===tt&&(Ke=.05*nt),Ze=o.length(ze)/st,Ne=r.create(),o.copy(Ne,ze),Ne[3]=Ke;for(var it=0;it<8;it++)jt[it]=[Se[0],Se[1],Se[2],it];if(Ot.length>0)for(it=0;it<8;it++){var ct=(it+1)%8;pt.push(Ot[it],jt[it],jt[ct],jt[ct],Ot[ct],Ot[it]),St.push(Je,Ne,Ne,Ne,Je,Je),Dt.push(Ye,Ze,Ze,Ze,Ye,Ye);var mt=pt.length;Pt.push([mt-6,mt-5,mt-4],[mt-3,mt-2,mt-1])}var Lt=Ot;Ot=jt,jt=Lt;var At=Je;Je=Ne,Ne=At;var ht=Ye;Ye=Ze,Ze=ht}return{positions:pt,cells:Pt,vectors:St,vertexIntensity:Dt}}(He,de,xe,Te)}),ye=[],Me=[],Re=[],Pe=[];for(we=0;we<he.length;we++){var De=he[we],fe=ye.length;for(ye=ye.concat(De.positions),Re=Re.concat(De.vectors),Pe=Pe.concat(De.vertexIntensity),oe=0;oe<De.cells.length;oe++){var ge=De.cells[oe],be=[];Me.push(be);for(var Ie=0;Ie<ge.length;Ie++)be.push(ge[Ie]+fe)}}return{positions:ye,cells:Me,vectors:Re,vertexIntensity:Pe,colormap:Ee}}(E,b.colormap,U,N);return m?le.tubeScale=m:(0===U&&(U=1),le.tubeScale=.5*d*N/U),le};var h=e(9578),f=e(1140).createMesh;p.exports.createTubeMesh=function(b,v){return f(b,v,{shaders:h,traceType:"streamtube"})}},9054:function(p,s,e){var o=e(5158),r=e(6832),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),i=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),c=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);s.createShader=function(h){var f=o(h,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createPickShader=function(h){var f=o(h,n,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},s.createContourShader=function(h){var f=o(h,i,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},s.createPickContourShader=function(h){var f=o(h,i,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},3754:function(p,s,e){"use strict";p.exports=function(ne){var re=ne.gl,ae=u(re),se=_(re),pe=S(re),ke=E(re),me=r(re),le=n(re,[{buffer:me,size:4,stride:40,offset:0},{buffer:me,size:3,stride:40,offset:16},{buffer:me,size:3,stride:40,offset:28}]),ue=r(re),Ee=n(re,[{buffer:ue,size:4,stride:20,offset:0},{buffer:ue,size:1,stride:20,offset:16}]),de=r(re),xe=n(re,[{buffer:de,size:2,type:re.FLOAT}]),Te=a(re,1,256,re.RGBA,re.UNSIGNED_BYTE);Te.minFilter=re.LINEAR,Te.magFilter=re.LINEAR;var we=new j(re,[0,0],[[0,0,0],[0,0,0]],ae,se,me,le,Te,pe,ke,ue,Ee,de,xe,[0,0,0]),K={levels:[[],[],[]]};for(var oe in ne)K[oe]=ne[oe];return K.colormap=K.colormap||"jet",we.update(K),we};var o=e(2288),r=e(5827),n=e(2944),a=e(8931),i=e(5306),c=e(9156),h=e(7498),f=e(7382),b=e(5050),v=e(4162),g=e(104),y=e(7437),d=e(5070),m=e(9144),w=e(9054),u=w.createShader,S=w.createContourShader,_=w.createPickShader,E=w.createPickContourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function z(ne,re,ae,se,pe){this.position=ne,this.index=re,this.uv=ae,this.level=se,this.dataCoordinate=pe}function j(ne,re,ae,se,pe,ke,me,le,ue,Ee,de,xe,Te,we,K){this.gl=ne,this.shape=re,this.bounds=ae,this.objectOffset=K,this.intensityBounds=[],this._shader=se,this._pickShader=pe,this._coordinateBuffer=ke,this._vao=me,this._colorMap=le,this._contourShader=ue,this._contourPickShader=Ee,this._contourBuffer=de,this._contourVAO=xe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new z([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=Te,this._dynamicVAO=we,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(i.mallocFloat(1024),[0,0]),b(i.mallocFloat(1024),[0,0]),b(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var ne=0;ne<3;++ne){var re=P[ne],ae=(ne+2)%3;re[(ne+1)%3+0]=1,re[ae+3]=1,re[ne+6]=1}}();var R=j.prototype;R.genColormap=function(ne,re){var ae=!1,se=f([c({colormap:ne,nshades:256,format:"rgba"}).map(function(pe,ke){var me=re?function(le,ue){if(!ue||!ue.length)return 1;for(var Ee=0;Ee<ue.length;++Ee){if(ue.length<2)return 1;if(ue[Ee][0]===le)return ue[Ee][1];if(ue[Ee][0]>le&&Ee>0){var de=(ue[Ee][0]-le)/(ue[Ee][0]-ue[Ee-1][0]);return ue[Ee][1]*(1-de)+de*ue[Ee-1][1]}}return 1}(ke/255,re):pe[3];return me<1&&(ae=!0),[pe[0],pe[1],pe[2],255*me]})]);return h.divseq(se,255),this.hasAlphaScale=ae,se},R.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},R.isOpaque=function(){return!this.isTransparent()},R.pickSlots=1,R.setPickBase=function(ne){this.pickId=ne};var V=[0,0,0],D={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function B(ne,re){var ae,se,pe,ke=re.axes&&re.axes.lastCubeProps.axis||V,me=re.showSurface,le=re.showContour;for(ae=0;ae<3;++ae)for(me=me||re.surfaceProject[ae],se=0;se<3;++se)le=le||re.contourProject[ae][se];for(ae=0;ae<3;++ae){var ue=D.projections[ae];for(se=0;se<16;++se)ue[se]=0;for(se=0;se<4;++se)ue[5*se]=1;ue[5*ae]=0,ue[12+ae]=re.axesBounds[+(ke[ae]>0)][ae],g(ue,ne.model,ue);var Ee=D.clipBounds[ae];for(pe=0;pe<2;++pe)for(se=0;se<3;++se)Ee[pe][se]=ne.clipBounds[pe][se];Ee[0][ae]=-1e8,Ee[1][ae]=1e8}return D.showSurface=me,D.showContour=le,D}var N={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},U=L.slice(),J=[1,0,0,0,1,0,0,0,1];function Y(ne,re){ne=ne||{};var ae=this.gl;ae.disable(ae.CULL_FACE),this._colorMap.bind(0);var se=N;se.model=ne.model||L,se.view=ne.view||L,se.projection=ne.projection||L,se.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],se.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],se.objectOffset=this.objectOffset,se.contourColor=this.contourColor[0],se.inverseModel=y(se.inverseModel,se.model);for(var pe=0;pe<2;++pe)for(var ke=se.clipBounds[pe],me=0;me<3;++me)ke[me]=Math.min(Math.max(this.clipBounds[pe][me],-1e8),1e8);se.kambient=this.ambientLight,se.kdiffuse=this.diffuseLight,se.kspecular=this.specularLight,se.roughness=this.roughness,se.fresnel=this.fresnel,se.opacity=this.opacity,se.height=0,se.permutation=J,se.vertexColor=this.vertexColor;var le=U;for(g(le,se.view,se.model),g(le,se.projection,le),y(le,le),pe=0;pe<3;++pe)se.eyePosition[pe]=le[12+pe]/le[15];var ue=le[15];for(pe=0;pe<3;++pe)ue+=this.lightPosition[pe]*le[4*pe+3];for(pe=0;pe<3;++pe){var Ee=le[12+pe];for(me=0;me<3;++me)Ee+=le[4*me+pe]*this.lightPosition[me];se.lightPosition[pe]=Ee/ue}var de=B(se,this);if(de.showSurface){for(this._shader.bind(),this._shader.uniforms=se,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ae.TRIANGLES,this._vertexCount),pe=0;pe<3;++pe)this.surfaceProject[pe]&&this.vertexCount&&(this._shader.uniforms.model=de.projections[pe],this._shader.uniforms.clipBounds=de.clipBounds[pe],this._vao.draw(ae.TRIANGLES,this._vertexCount));this._vao.unbind()}if(de.showContour){var xe=this._contourShader;se.kambient=1,se.kdiffuse=0,se.kspecular=0,se.opacity=1,xe.bind(),xe.uniforms=se;var Te=this._contourVAO;for(Te.bind(),pe=0;pe<3;++pe)for(xe.uniforms.permutation=P[pe],ae.lineWidth(this.contourWidth[pe]*this.pixelRatio),me=0;me<this.contourLevels[pe].length;++me)me===this.highlightLevel[pe]?(xe.uniforms.contourColor=this.highlightColor[pe],xe.uniforms.contourTint=this.highlightTint[pe]):0!==me&&me-1!==this.highlightLevel[pe]||(xe.uniforms.contourColor=this.contourColor[pe],xe.uniforms.contourTint=this.contourTint[pe]),this._contourCounts[pe][me]&&(xe.uniforms.height=this.contourLevels[pe][me],Te.draw(ae.LINES,this._contourCounts[pe][me],this._contourOffsets[pe][me]));for(pe=0;pe<3;++pe)for(xe.uniforms.model=de.projections[pe],xe.uniforms.clipBounds=de.clipBounds[pe],me=0;me<3;++me)if(this.contourProject[pe][me]){xe.uniforms.permutation=P[me],ae.lineWidth(this.contourWidth[me]*this.pixelRatio);for(var we=0;we<this.contourLevels[me].length;++we)we===this.highlightLevel[me]?(xe.uniforms.contourColor=this.highlightColor[me],xe.uniforms.contourTint=this.highlightTint[me]):0!==we&&we-1!==this.highlightLevel[me]||(xe.uniforms.contourColor=this.contourColor[me],xe.uniforms.contourTint=this.contourTint[me]),this._contourCounts[me][we]&&(xe.uniforms.height=this.contourLevels[me][we],Te.draw(ae.LINES,this._contourCounts[me][we],this._contourOffsets[me][we]))}for(Te.unbind(),(Te=this._dynamicVAO).bind(),pe=0;pe<3;++pe)if(0!==this._dynamicCounts[pe])for(xe.uniforms.model=se.model,xe.uniforms.clipBounds=se.clipBounds,xe.uniforms.permutation=P[pe],ae.lineWidth(this.dynamicWidth[pe]*this.pixelRatio),xe.uniforms.contourColor=this.dynamicColor[pe],xe.uniforms.contourTint=this.dynamicTint[pe],xe.uniforms.height=this.dynamicLevel[pe],Te.draw(ae.LINES,this._dynamicCounts[pe],this._dynamicOffsets[pe]),me=0;me<3;++me)this.contourProject[me][pe]&&(xe.uniforms.model=de.projections[me],xe.uniforms.clipBounds=de.clipBounds[me],Te.draw(ae.LINES,this._dynamicCounts[pe],this._dynamicOffsets[pe]));Te.unbind()}}R.draw=function(ne){return Y.call(this,ne,!1)},R.drawTransparent=function(ne){return Y.call(this,ne,!0)};var q={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function H(ne,re){return Array.isArray(ne)?[re(ne[0]),re(ne[1]),re(ne[2])]:[re(ne),re(ne),re(ne)]}function X(ne){return Array.isArray(ne)?3===ne.length?[ne[0],ne[1],ne[2],1]:[ne[0],ne[1],ne[2],ne[3]]:[0,0,0,1]}function Q(ne){if(Array.isArray(ne)){if(Array.isArray(ne))return[X(ne[0]),X(ne[1]),X(ne[2])];var re=X(ne);return[re.slice(),re.slice(),re.slice()]}}R.drawPick=function(ne){ne=ne||{};var re=this.gl;re.disable(re.CULL_FACE);var ae=q;ae.model=ne.model||L,ae.view=ne.view||L,ae.projection=ne.projection||L,ae.shape=this._field[2].shape,ae.pickId=this.pickId/255,ae.lowerBound=this.bounds[0],ae.upperBound=this.bounds[1],ae.objectOffset=this.objectOffset,ae.permutation=J;for(var se=0;se<2;++se)for(var pe=ae.clipBounds[se],ke=0;ke<3;++ke)pe[ke]=Math.min(Math.max(this.clipBounds[se][ke],-1e8),1e8);var me=B(ae,this);if(me.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ae,this._vao.bind(),this._vao.draw(re.TRIANGLES,this._vertexCount),se=0;se<3;++se)this.surfaceProject[se]&&(this._pickShader.uniforms.model=me.projections[se],this._pickShader.uniforms.clipBounds=me.clipBounds[se],this._vao.draw(re.TRIANGLES,this._vertexCount));this._vao.unbind()}if(me.showContour){var le=this._contourPickShader;le.bind(),le.uniforms=ae;var ue=this._contourVAO;for(ue.bind(),ke=0;ke<3;++ke)for(re.lineWidth(this.contourWidth[ke]*this.pixelRatio),le.uniforms.permutation=P[ke],se=0;se<this.contourLevels[ke].length;++se)this._contourCounts[ke][se]&&(le.uniforms.height=this.contourLevels[ke][se],ue.draw(re.LINES,this._contourCounts[ke][se],this._contourOffsets[ke][se]));for(se=0;se<3;++se)for(le.uniforms.model=me.projections[se],le.uniforms.clipBounds=me.clipBounds[se],ke=0;ke<3;++ke)if(this.contourProject[se][ke]){le.uniforms.permutation=P[ke],re.lineWidth(this.contourWidth[ke]*this.pixelRatio);for(var Ee=0;Ee<this.contourLevels[ke].length;++Ee)this._contourCounts[ke][Ee]&&(le.uniforms.height=this.contourLevels[ke][Ee],ue.draw(re.LINES,this._contourCounts[ke][Ee],this._contourOffsets[ke][Ee]))}ue.unbind()}},R.pick=function(ne){if(!ne||ne.id!==this.pickId)return null;var re=this._field[2].shape,ae=this._pickResult,se=re[0]*(ne.value[0]+(ne.value[2]>>4)/16)/255,pe=Math.floor(se),ke=se-pe,me=re[1]*(ne.value[1]+(15&ne.value[2])/16)/255,le=Math.floor(me),ue=me-le;pe+=1,le+=1;var Ee=ae.position;Ee[0]=Ee[1]=Ee[2]=0;for(var de=0;de<2;++de)for(var xe=de?ke:1-ke,Te=0;Te<2;++Te)for(var we=pe+de,K=le+Te,oe=xe*(Te?ue:1-ue),he=0;he<3;++he)Ee[he]+=this._field[he].get(we,K)*oe;for(var ye=this._pickResult.level,Me=0;Me<3;++Me)if(ye[Me]=d.le(this.contourLevels[Me],Ee[Me]),ye[Me]<0)this.contourLevels[Me].length>0&&(ye[Me]=0);else if(ye[Me]<this.contourLevels[Me].length-1){var Pe=this.contourLevels[Me][ye[Me]+1];Math.abs(this.contourLevels[Me][ye[Me]]-Ee[Me])>Math.abs(Pe-Ee[Me])&&(ye[Me]+=1)}for(ae.index[0]=ke<.5?pe:pe+1,ae.index[1]=ue<.5?le:le+1,ae.uv[0]=se/re[0],ae.uv[1]=me/re[1],he=0;he<3;++he)ae.dataCoordinate[he]=this._field[he].get(ae.index[0],ae.index[1]);return ae},R.padField=function(ne,re){var ae=re.shape.slice(),se=ne.shape.slice();h.assign(ne.lo(1,1).hi(ae[0],ae[1]),re),h.assign(ne.lo(1).hi(ae[0],1),re.hi(ae[0],1)),h.assign(ne.lo(1,se[1]-1).hi(ae[0],1),re.lo(0,ae[1]-1).hi(ae[0],1)),h.assign(ne.lo(0,1).hi(1,ae[1]),re.hi(1)),h.assign(ne.lo(se[0]-1,1).hi(1,ae[1]),re.lo(ae[0]-1)),ne.set(0,0,re.get(0,0)),ne.set(0,se[1]-1,re.get(0,ae[1]-1)),ne.set(se[0]-1,0,re.get(ae[0]-1,0)),ne.set(se[0]-1,se[1]-1,re.get(ae[0]-1,ae[1]-1))},R.update=function(ne){this.objectOffset=(ne=ne||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ne&&(this.contourWidth=H(ne.contourWidth,Number)),"showContour"in ne&&(this.showContour=H(ne.showContour,Boolean)),"showSurface"in ne&&(this.showSurface=!!ne.showSurface),"contourTint"in ne&&(this.contourTint=H(ne.contourTint,Boolean)),"contourColor"in ne&&(this.contourColor=Q(ne.contourColor)),"contourProject"in ne&&(this.contourProject=H(ne.contourProject,function(mn){return H(mn,Boolean)})),"surfaceProject"in ne&&(this.surfaceProject=ne.surfaceProject),"dynamicColor"in ne&&(this.dynamicColor=Q(ne.dynamicColor)),"dynamicTint"in ne&&(this.dynamicTint=H(ne.dynamicTint,Number)),"dynamicWidth"in ne&&(this.dynamicWidth=H(ne.dynamicWidth,Number)),"opacity"in ne&&(this.opacity=ne.opacity),"opacityscale"in ne&&(this.opacityscale=ne.opacityscale),"colorBounds"in ne&&(this.colorBounds=ne.colorBounds),"vertexColor"in ne&&(this.vertexColor=ne.vertexColor?1:0),"colormap"in ne&&this._colorMap.setPixels(this.genColormap(ne.colormap,this.opacityscale));var re=ne.field||ne.coords&&ne.coords[2]||null,ae=!1;if(re||(re=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ne||"coords"in ne){var se=(re.shape[0]+2)*(re.shape[1]+2);se>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(o.nextPow2(se))),this._field[2]=b(this._field[2].data,[re.shape[0]+2,re.shape[1]+2]),this.padField(this._field[2],re),this.shape=re.shape.slice();for(var pe=this.shape,ke=0;ke<2;++ke)this._field[2].size>this._field[ke].data.length&&(i.freeFloat(this._field[ke].data),this._field[ke].data=i.mallocFloat(this._field[2].size)),this._field[ke]=b(this._field[ke].data,[pe[0]+2,pe[1]+2]);if(ne.coords){var me=ne.coords;if(!Array.isArray(me)||3!==me.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ke=0;ke<2;++ke){var le=me[ke];for(Te=0;Te<2;++Te)if(le.shape[Te]!==pe[Te])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ke],le)}}else if(ne.ticks){var ue=ne.ticks;if(!Array.isArray(ue)||2!==ue.length)throw new Error("gl-surface: invalid ticks");for(ke=0;ke<2;++ke){var Ee=ue[ke];if((Array.isArray(Ee)||Ee.length)&&(Ee=b(Ee)),Ee.shape[0]!==pe[ke])throw new Error("gl-surface: invalid tick length");var de=b(Ee.data,pe);de.stride[ke]=Ee.stride[0],de.stride[1^ke]=0,this.padField(this._field[ke],de)}}else{for(ke=0;ke<2;++ke){var xe=[0,0];xe[ke]=1,this._field[ke]=b(this._field[ke].data,[pe[0]+2,pe[1]+2],xe,0)}this._field[0].set(0,0,0);for(var Te=0;Te<pe[0];++Te)this._field[0].set(Te+1,0,Te);for(this._field[0].set(pe[0]+1,0,pe[0]-1),this._field[1].set(0,0,0),Te=0;Te<pe[1];++Te)this._field[1].set(0,Te+1,Te);this._field[1].set(0,pe[1]+1,pe[1]-1)}var we=this._field,K=b(i.mallocFloat(3*we[2].size*2),[3,pe[0]+2,pe[1]+2,2]);for(ke=0;ke<3;++ke)m(K.pick(ke),we[ke],"mirror");var oe=b(i.mallocFloat(3*we[2].size),[pe[0]+2,pe[1]+2,3]);for(ke=0;ke<pe[0]+2;++ke)for(Te=0;Te<pe[1]+2;++Te){var he=K.get(0,ke,Te,0),ye=K.get(0,ke,Te,1),Me=K.get(1,ke,Te,0),Re=K.get(1,ke,Te,1),Pe=K.get(2,ke,Te,0),De=K.get(2,ke,Te,1),fe=Me*De-Re*Pe,ge=Pe*ye-De*he,be=he*Re-ye*Me,Ie=Math.sqrt(fe*fe+ge*ge+be*be);Ie<1e-8?(Ie=Math.max(Math.abs(fe),Math.abs(ge),Math.abs(be)))<1e-8?(be=1,ge=fe=0,Ie=1):Ie=1/Ie:Ie=1/Math.sqrt(Ie),oe.set(ke,Te,0,fe*Ie),oe.set(ke,Te,1,ge*Ie),oe.set(ke,Te,2,be*Ie)}i.free(K.data);var He=[1/0,1/0,1/0],Ve=[-1/0,-1/0,-1/0],tt=1/0,nt=-1/0,dt=i.mallocFloat(o.nextPow2((pe[0]-1)*(pe[1]-1)*6*10)),wt=0,_t=0;for(ke=0;ke<pe[0]-1;++ke)e:for(Te=0;Te<pe[1]-1;++Te){for(var pt=0;pt<2;++pt)for(var Pt=0;Pt<2;++Pt)for(var St=0;St<3;++St){var Ot=this._field[St].get(1+ke+pt,1+Te+Pt);if(isNaN(Ot)||!isFinite(Ot))continue e}for(St=0;St<6;++St){var jt=ke+C[St][0],Dt=Te+C[St][1],Ye=this._field[0].get(jt+1,Dt+1),Ze=this._field[1].get(jt+1,Dt+1);Ot=this._field[2].get(jt+1,Dt+1),fe=oe.get(jt+1,Dt+1,0),ge=oe.get(jt+1,Dt+1,1),be=oe.get(jt+1,Dt+1,2),ne.intensity&&(Ne=ne.intensity.get(jt,Dt));var Ne=ne.intensity?ne.intensity.get(jt,Dt):Ot+this.objectOffset[2];dt[wt++]=jt,dt[wt++]=Dt,dt[wt++]=Ye,dt[wt++]=Ze,dt[wt++]=Ot,dt[wt++]=0,dt[wt++]=Ne,dt[wt++]=fe,dt[wt++]=ge,dt[wt++]=be,He[0]=Math.min(He[0],Ye+this.objectOffset[0]),He[1]=Math.min(He[1],Ze+this.objectOffset[1]),He[2]=Math.min(He[2],Ot+this.objectOffset[2]),tt=Math.min(tt,Ne),Ve[0]=Math.max(Ve[0],Ye+this.objectOffset[0]),Ve[1]=Math.max(Ve[1],Ze+this.objectOffset[1]),Ve[2]=Math.max(Ve[2],Ot+this.objectOffset[2]),nt=Math.max(nt,Ne),_t+=1}}for(ne.intensityBounds&&(tt=+ne.intensityBounds[0],nt=+ne.intensityBounds[1]),ke=6;ke<wt;ke+=10)dt[ke]=(dt[ke]-tt)/(nt-tt);this._vertexCount=_t,this._coordinateBuffer.update(dt.subarray(0,wt)),i.freeFloat(dt),i.free(oe.data),this.bounds=[He,Ve],this.intensity=ne.intensity||this._field[2],this.intensityBounds[0]===tt&&this.intensityBounds[1]===nt||(ae=!0),this.intensityBounds=[tt,nt]}if("levels"in ne){var Je=ne.levels;for(Je=Array.isArray(Je[0])?Je.slice():[[],[],Je],ke=0;ke<3;++ke)Je[ke]=Je[ke].slice(),Je[ke].sort(function(mn,en){return mn-en});for(ke=0;ke<3;++ke)for(Te=0;Te<Je[ke].length;++Te)Je[ke][Te]-=this.objectOffset[ke];e:for(ke=0;ke<3;++ke){if(Je[ke].length!==this.contourLevels[ke].length){ae=!0;break}for(Te=0;Te<Je[ke].length;++Te)if(Je[ke][Te]!==this.contourLevels[ke][Te]){ae=!0;break e}}this.contourLevels=Je}if(ae){we=this._field,pe=this.shape;for(var at=[],Se=0;Se<3;++Se){var ze=this.contourLevels[Se],Ke=[],it=[],ct=[0,0,0];for(ke=0;ke<ze.length;++ke){var mt=v(this._field[Se],ze[ke]);Ke.push(at.length/5|0),_t=0;e:for(Te=0;Te<mt.cells.length;++Te){var Lt=mt.cells[Te];for(St=0;St<2;++St){var At=mt.positions[Lt[St]],ht=At[0],Et=0|Math.floor(ht),gt=ht-Et,kt=At[1],It=0|Math.floor(kt),Ut=kt-It,Nt=!1;t:for(var qt=0;qt<3;++qt){ct[qt]=0;var Xt=(Se+qt+1)%3;for(pt=0;pt<2;++pt){var Kt=pt?gt:1-gt;for(jt=0|Math.min(Math.max(Et+pt,0),pe[0]),Pt=0;Pt<2;++Pt){var fn=Pt?Ut:1-Ut;if(Dt=0|Math.min(Math.max(It+Pt,0),pe[1]),Ot=qt<2?this._field[Xt].get(jt,Dt):(this.intensity.get(jt,Dt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ot)||isNaN(Ot)){Nt=!0;break t}ct[qt]+=Kt*fn*Ot}}}if(Nt){if(St>0){for(var xn=0;xn<5;++xn)at.pop();_t-=1}continue e}at.push(ct[0],ct[1],At[0],At[1],ct[2]),_t+=1}}it.push(_t)}this._contourOffsets[Se]=Ke,this._contourCounts[Se]=it}var jn=i.mallocFloat(at.length);for(ke=0;ke<at.length;++ke)jn[ke]=at[ke];this._contourBuffer.update(jn),i.freeFloat(jn)}},R.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ne=0;ne<3;++ne)i.freeFloat(this._field[ne].data)},R.highlight=function(ne){var re,ae;if(!ne)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(re=0;re<3;++re)this.highlightLevel[re]=this.enableHighlight[re]?ne.level[re]:-1;for(ae=this.snapToData?ne.dataCoordinate:ne.position,re=0;re<3;++re)ae[re]-=this.objectOffset[re];if(this.enableDynamic[0]&&ae[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ae[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ae[2]!==this.dynamicLevel[2]){for(var se=0,pe=this.shape,ke=i.mallocFloat(12*pe[0]*pe[1]),me=0;me<3;++me)if(this.enableDynamic[me]){this.dynamicLevel[me]=ae[me];var de=this._field[(me+1)%3],xe=this._field[(me+2)%3],Te=v(this._field[me],ae[me]),we=Te.cells,K=Te.positions;for(this._dynamicOffsets[me]=se,re=0;re<we.length;++re)for(var oe=we[re],he=0;he<2;++he){var ye=K[oe[he]],Me=+ye[0],Re=0|Me,Pe=0|Math.min(Re+1,pe[0]),De=Me-Re,fe=1-De,ge=+ye[1],be=0|ge,Ie=0|Math.min(be+1,pe[1]),He=ge-be,Ve=1-He,tt=fe*Ve,nt=fe*He,st=De*Ve,dt=De*He,wt=tt*de.get(Re,be)+nt*de.get(Re,Ie)+st*de.get(Pe,be)+dt*de.get(Pe,Ie),_t=tt*xe.get(Re,be)+nt*xe.get(Re,Ie)+st*xe.get(Pe,be)+dt*xe.get(Pe,Ie);if(isNaN(wt)||isNaN(_t)){he&&(se-=1);break}ke[2*se+0]=wt,ke[2*se+1]=_t,se+=1}this._dynamicCounts[me]=se-this._dynamicOffsets[me]}else this.dynamicLevel[me]=NaN,this._dynamicCounts[me]=0;this._dynamicBuffer.update(ke.subarray(0,2*se)),i.freeFloat(ke)}}},8931:function(p,s,e){"use strict";var o=e(5050),r=e(7498),n=e(5306);p.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||h(_),"number"==typeof arguments[1])return w(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var E=arguments[1],L=f(E)?E:E.raw;if(L)return u(_,L,0|E.width,0|E.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(E.shape&&E.data&&E.stride)return S(_,E)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,i=null,c=null;function h(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],i=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],c=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function f(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var b=function(_,E){r.muls(_,E,255)};function v(_,E,L){var C=_.gl,P=C.getParameter(C.MAX_TEXTURE_SIZE);if(E<0||E>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[E,L],_.bind(),C.texImage2D(C.TEXTURE_2D,0,_.format,E,L,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,E,L,C,P,z){this.gl=_,this.handle=E,this.format=P,this.type=z,this._shape=[L,C],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var j=this,R=[this._wrapS,this._wrapT];Object.defineProperties(R,[{get:function(){return j._wrapS},set:function(D){return j.wrapS=D}},{get:function(){return j._wrapT},set:function(D){return j.wrapT=D}}]),this._wrapVector=R;var V=[this._shape[0],this._shape[1]];Object.defineProperties(V,[{get:function(){return j._shape[0]},set:function(D){return j.width=D}},{get:function(){return j._shape[1]},set:function(D){return j.height=D}}]),this._shapeVector=V}var y=g.prototype;function d(_,E){return 3===_.length?1===E[2]&&E[1]===_[0]*_[2]&&E[0]===_[2]:1===E[0]&&E[1]===_[0]}function m(_){var E=_.createTexture();return _.bindTexture(_.TEXTURE_2D,E),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),E}function w(_,E,L,C,P){var z=_.getParameter(_.MAX_TEXTURE_SIZE);if(E<0||E>z||L<0||L>z)throw new Error("gl-texture2d: Invalid texture shape");if(P===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var j=m(_);return _.texImage2D(_.TEXTURE_2D,0,C,E,L,0,C,P,null),new g(_,j,E,L,C,P)}function u(_,E,L,C,P,z){var j=m(_);return _.texImage2D(_.TEXTURE_2D,0,P,P,z,E),new g(_,j,L,C,P,z)}function S(_,E){var L=E.dtype,C=E.shape.slice(),P=_.getParameter(_.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>P||C[1]<0||C[1]>P)throw new Error("gl-texture2d: Invalid texture size");var z=d(C,E.stride.slice()),j=0;"float32"===L?j=_.FLOAT:"float64"===L?(j=_.FLOAT,z=!1,L="float32"):"uint8"===L?j=_.UNSIGNED_BYTE:(j=_.UNSIGNED_BYTE,z=!1,L="uint8");var R,V,D=0;if(2===C.length)D=_.LUMINANCE,E=o(E.data,C=[C[0],C[1],1],[E.stride[0],E.stride[1],1],E.offset);else{if(3!==C.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===C[2])D=_.ALPHA;else if(2===C[2])D=_.LUMINANCE_ALPHA;else if(3===C[2])D=_.RGB;else{if(4!==C[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");D=_.RGBA}}j!==_.FLOAT||_.getExtension("OES_texture_float")||(j=_.UNSIGNED_BYTE,z=!1);var B=E.size;if(z)R=0===E.offset&&E.data.length===B?E.data:E.data.subarray(E.offset,E.offset+B);else{var N=[C[2],C[2]*C[0],1];V=n.malloc(B,L);var U=o(V,C,N,0);"float32"!==L&&"float64"!==L||j!==_.UNSIGNED_BYTE?r.assign(U,E):b(U,E),R=V.subarray(0,B)}var J=m(_);return _.texImage2D(_.TEXTURE_2D,0,D,C[0],C[1],0,D,j,R),z||n.free(V),new g(_,J,C[0],C[1],D,j)}Object.defineProperties(y,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var E=this.gl;if(this.type===E.FLOAT&&a.indexOf(_)>=0&&(E.getExtension("OES_texture_float_linear")||(_=E.NEAREST)),i.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var E=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),E!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),c.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),2!==_.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var E=0;E<2;++E)if(c.indexOf(_[E])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(2!==_.length)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return v(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return v(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return v(this,this._shape[0],_|=0),_}}}),y.bind=function(_){var E=this.gl;return void 0!==_&&E.activeTexture(E.TEXTURE0+(0|_)),E.bindTexture(E.TEXTURE_2D,this.handle),void 0!==_?0|_:E.getParameter(E.ACTIVE_TEXTURE)-E.TEXTURE0},y.dispose=function(){this.gl.deleteTexture(this.handle)},y.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),E=0;_>0;++E,_>>>=1)this._mipLevels.indexOf(E)<0&&this._mipLevels.push(E)},y.setPixels=function(_,E,L,C){var P=this.gl;this.bind(),Array.isArray(E)?(C=L,L=0|E[1],E=0|E[0]):(E=E||0,L=L||0),C=C||0;var z=f(_)?_:_.raw;if(z)this._mipLevels.indexOf(C)<0?(P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,this.type,z),this._mipLevels.push(C)):P.texSubImage2D(P.TEXTURE_2D,C,E,L,this.format,this.type,z);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||E+_.shape[1]>this._shape[1]>>>C||L+_.shape[0]>this._shape[0]>>>C||E<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(j,R,V,D,B,N,U,J){var Y=J.dtype,q=J.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var H=0,X=0,Q=d(q,J.stride.slice());if("float32"===Y?H=j.FLOAT:"float64"===Y?(H=j.FLOAT,Q=!1,Y="float32"):"uint8"===Y?H=j.UNSIGNED_BYTE:(H=j.UNSIGNED_BYTE,Q=!1,Y="uint8"),2===q.length)X=j.LUMINANCE,J=o(J.data,q=[q[0],q[1],1],[J.stride[0],J.stride[1],1],J.offset);else{if(3!==q.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===q[2])X=j.ALPHA;else if(2===q[2])X=j.LUMINANCE_ALPHA;else if(3===q[2])X=j.RGB;else{if(4!==q[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");X=j.RGBA}}if(X!==j.LUMINANCE&&X!==j.ALPHA||B!==j.LUMINANCE&&B!==j.ALPHA||(X=B),X!==B)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ne=J.size,re=U.indexOf(D)<0;if(re&&U.push(D),H===N&&Q)0===J.offset&&J.data.length===ne?re?j.texImage2D(j.TEXTURE_2D,D,B,q[0],q[1],0,B,N,J.data):j.texSubImage2D(j.TEXTURE_2D,D,R,V,q[0],q[1],B,N,J.data):re?j.texImage2D(j.TEXTURE_2D,D,B,q[0],q[1],0,B,N,J.data.subarray(J.offset,J.offset+ne)):j.texSubImage2D(j.TEXTURE_2D,D,R,V,q[0],q[1],B,N,J.data.subarray(J.offset,J.offset+ne));else{var ae;ae=N===j.FLOAT?n.mallocFloat32(ne):n.mallocUint8(ne);var se=o(ae,q,[q[2],q[2]*q[0],1]);H===j.FLOAT&&N===j.UNSIGNED_BYTE?b(se,J):r.assign(se,J),re?j.texImage2D(j.TEXTURE_2D,D,B,q[0],q[1],0,B,N,ae.subarray(0,ne)):j.texSubImage2D(j.TEXTURE_2D,D,R,V,q[0],q[1],B,N,ae.subarray(0,ne)),N===j.FLOAT?n.freeFloat32(ae):n.freeUint8(ae)}}(P,E,L,C,this.format,this.type,this._mipLevels,_)}}},3056:function(p){"use strict";p.exports=function(s,e,o){e?e.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var r=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(o){if(o.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<o.length;++n){var a=o[n];if(a.buffer){var c=a.size||4,h=a.type||s.FLOAT,f=!!a.normalized,b=a.stride||0,v=a.offset||0;a.buffer.bind(),s.enableVertexAttribArray(n),s.vertexAttribPointer(n,c,h,f,b,v)}else{if("number"==typeof a)s.vertexAttrib1f(n,a);else if(1===a.length)s.vertexAttrib1f(n,a[0]);else if(2===a.length)s.vertexAttrib2f(n,a[0],a[1]);else if(3===a.length)s.vertexAttrib3f(n,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(n,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(n)}}for(;n<r;++n)s.disableVertexAttribArray(n)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),n=0;n<r;++n)s.disableVertexAttribArray(n)}},7220:function(p,s,e){"use strict";var o=e(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,i){this._elements=a,this._attributes=n,this._elementsType=i||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,i){i=i||0;var c=this.gl;this._elements?c.drawElements(n,a,this._elementsType,i):c.drawArrays(n,i,a)},p.exports=function(n){return new r(n)}},3778:function(p,s,e){"use strict";var o=e(3056);function r(a,i,c,h,f,b){this.location=a,this.dimension=i,this.a=c,this.b=h,this.c=f,this.d=b}function n(a,i,c){this.gl=a,this._ext=i,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,i,c){if(this.bind(),o(this.gl,i,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var f=a[h];"number"==typeof f?this._attribs.push(new r(h,1,f)):Array.isArray(f)&&this._attribs.push(new r(h,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!i,this._elementsType=c||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,i,c){c=c||0;var h=this.gl;this._useElements?h.drawElements(a,i,this._elementsType,c):h.drawArrays(a,c,i)},p.exports=function(a,i){return new n(a,i,i.createVertexArrayOES())}},2944:function(p,s,e){"use strict";var o=e(3778),r=e(7220);function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}p.exports=function(a,i,c,h){var f,b=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(f=b?o(a,b):r(a)).update(i,c,h),f}},2598:function(p){p.exports=function(s,e,o){return s[0]=e[0]+o[0],s[1]=e[1]+o[1],s[2]=e[2]+o[2],s}},5879:function(p,s,e){p.exports=function(a,i){var c=o(a[0],a[1],a[2]),h=o(i[0],i[1],i[2]);r(c,c),r(h,h);var f=n(c,h);return f>1?0:Math.acos(f)};var o=e(5415),r=e(899),n=e(9305)},8827:function(p){p.exports=function(s,e){return s[0]=Math.ceil(e[0]),s[1]=Math.ceil(e[1]),s[2]=Math.ceil(e[2]),s}},7622:function(p){p.exports=function(s){var e=new Float32Array(3);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e}},8782:function(p){p.exports=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s}},8501:function(p){p.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2],i=o[0],c=o[1],h=o[2];return s[0]=n*h-a*c,s[1]=a*i-r*h,s[2]=r*c-n*i,s}},5981:function(p,s,e){p.exports=e(8288)},8288:function(p){p.exports=function(s,e){var o=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2];return Math.sqrt(o*o+r*r+n*n)}},8629:function(p,s,e){p.exports=e(7979)},7979:function(p){p.exports=function(s,e,o){return s[0]=e[0]/o[0],s[1]=e[1]/o[1],s[2]=e[2]/o[2],s}},9305:function(p){p.exports=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]}},154:function(p){p.exports=1e-6},4932:function(p,s,e){p.exports=function(r,n){var a=r[0],i=r[1],c=r[2],h=n[0],f=n[1],b=n[2];return Math.abs(a-h)<=o*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=o*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(c-b)<=o*Math.max(1,Math.abs(c),Math.abs(b))};var o=e(154)},5777:function(p){p.exports=function(s,e){return s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2]}},3306:function(p){p.exports=function(s,e){return s[0]=Math.floor(e[0]),s[1]=Math.floor(e[1]),s[2]=Math.floor(e[2]),s}},7447:function(p,s,e){p.exports=function(r,n,a,i,c,h){var f,b;for(n||(n=3),a||(a=0),b=i?Math.min(i*n+a,r.length):r.length,f=a;f<b;f+=n)o[0]=r[f],o[1]=r[f+1],o[2]=r[f+2],c(o,o,h),r[f]=o[0],r[f+1]=o[1],r[f+2]=o[2];return r};var o=e(8501)()},5415:function(p){p.exports=function(s,e,o){var r=new Float32Array(3);return r[0]=s,r[1]=e,r[2]=o,r}},2858:function(p,s,e){p.exports={EPSILON:e(154),create:e(8501),clone:e(7622),angle:e(5879),fromValues:e(5415),copy:e(8782),set:e(831),equals:e(4932),exactEquals:e(5777),add:e(2598),subtract:e(911),sub:e(8921),multiply:e(105),mul:e(5733),divide:e(7979),div:e(8629),min:e(3605),max:e(1716),floor:e(3306),ceil:e(8827),round:e(1624),scale:e(5685),scaleAndAdd:e(6722),distance:e(8288),dist:e(5981),squaredDistance:e(6403),sqrDist:e(5294),length:e(4693),len:e(1468),squaredLength:e(4337),sqrLen:e(3303),negate:e(435),inverse:e(2073),normalize:e(899),dot:e(9305),cross:e(903),lerp:e(1868),random:e(6660),transformMat4:e(3255),transformMat3:e(9908),transformQuat:e(6568),rotateX:e(392),rotateY:e(3222),rotateZ:e(3388),forEach:e(7447)}},2073:function(p){p.exports=function(s,e){return s[0]=1/e[0],s[1]=1/e[1],s[2]=1/e[2],s}},1468:function(p,s,e){p.exports=e(4693)},4693:function(p){p.exports=function(s){var e=s[0],o=s[1],r=s[2];return Math.sqrt(e*e+o*o+r*r)}},1868:function(p){p.exports=function(s,e,o,r){var n=e[0],a=e[1],i=e[2];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s}},1716:function(p){p.exports=function(s,e,o){return s[0]=Math.max(e[0],o[0]),s[1]=Math.max(e[1],o[1]),s[2]=Math.max(e[2],o[2]),s}},3605:function(p){p.exports=function(s,e,o){return s[0]=Math.min(e[0],o[0]),s[1]=Math.min(e[1],o[1]),s[2]=Math.min(e[2],o[2]),s}},5733:function(p,s,e){p.exports=e(105)},105:function(p){p.exports=function(s,e,o){return s[0]=e[0]*o[0],s[1]=e[1]*o[1],s[2]=e[2]*o[2],s}},435:function(p){p.exports=function(s,e){return s[0]=-e[0],s[1]=-e[1],s[2]=-e[2],s}},899:function(p){p.exports=function(s,e){var o=e[0],r=e[1],n=e[2],a=o*o+r*r+n*n;return a>0&&(a=1/Math.sqrt(a),s[0]=e[0]*a,s[1]=e[1]*a,s[2]=e[2]*a),s}},6660:function(p){p.exports=function(s,e){e=e||1;var o=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*e;return s[0]=Math.cos(o)*n,s[1]=Math.sin(o)*n,s[2]=r*e,s}},392:function(p){p.exports=function(s,e,o,r){var n=o[1],a=o[2],i=e[1]-n,c=e[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=e[0],s[1]=n+i*f-c*h,s[2]=a+i*h+c*f,s}},3222:function(p){p.exports=function(s,e,o,r){var n=o[0],a=o[2],i=e[0]-n,c=e[2]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+c*h+i*f,s[1]=e[1],s[2]=a+c*f-i*h,s}},3388:function(p){p.exports=function(s,e,o,r){var n=o[0],a=o[1],i=e[0]-n,c=e[1]-a,h=Math.sin(r),f=Math.cos(r);return s[0]=n+i*f-c*h,s[1]=a+i*h+c*f,s[2]=e[2],s}},1624:function(p){p.exports=function(s,e){return s[0]=Math.round(e[0]),s[1]=Math.round(e[1]),s[2]=Math.round(e[2]),s}},5685:function(p){p.exports=function(s,e,o){return s[0]=e[0]*o,s[1]=e[1]*o,s[2]=e[2]*o,s}},6722:function(p){p.exports=function(s,e,o,r){return s[0]=e[0]+o[0]*r,s[1]=e[1]+o[1]*r,s[2]=e[2]+o[2]*r,s}},831:function(p){p.exports=function(s,e,o,r){return s[0]=e,s[1]=o,s[2]=r,s}},5294:function(p,s,e){p.exports=e(6403)},3303:function(p,s,e){p.exports=e(4337)},6403:function(p){p.exports=function(s,e){var o=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2];return o*o+r*r+n*n}},4337:function(p){p.exports=function(s){var e=s[0],o=s[1],r=s[2];return e*e+o*o+r*r}},8921:function(p,s,e){p.exports=e(911)},911:function(p){p.exports=function(s,e,o){return s[0]=e[0]-o[0],s[1]=e[1]-o[1],s[2]=e[2]-o[2],s}},9908:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2];return s[0]=r*o[0]+n*o[3]+a*o[6],s[1]=r*o[1]+n*o[4]+a*o[7],s[2]=r*o[2]+n*o[5]+a*o[8],s}},3255:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2],i=o[3]*r+o[7]*n+o[11]*a+o[15];return s[0]=(o[0]*r+o[4]*n+o[8]*a+o[12])/(i=i||1),s[1]=(o[1]*r+o[5]*n+o[9]*a+o[13])/i,s[2]=(o[2]*r+o[6]*n+o[10]*a+o[14])/i,s}},6568:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2],i=o[0],c=o[1],h=o[2],f=o[3],b=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=b*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-b*-h,s[2]=g*f+y*-h+b*-c-v*-i,s}},3433:function(p){p.exports=function(s,e,o){return s[0]=e[0]+o[0],s[1]=e[1]+o[1],s[2]=e[2]+o[2],s[3]=e[3]+o[3],s}},1413:function(p){p.exports=function(s){var e=new Float32Array(4);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e}},3470:function(p){p.exports=function(s,e){return s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s}},5313:function(p){p.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(p){p.exports=function(s,e){var o=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2],a=e[3]-s[3];return Math.sqrt(o*o+r*r+n*n+a*a)}},205:function(p){p.exports=function(s,e,o){return s[0]=e[0]/o[0],s[1]=e[1]/o[1],s[2]=e[2]/o[2],s[3]=e[3]/o[3],s}},4242:function(p){p.exports=function(s,e){return s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]*e[3]}},5680:function(p){p.exports=function(s,e,o,r){var n=new Float32Array(4);return n[0]=s,n[1]=e,n[2]=o,n[3]=r,n}},4020:function(p,s,e){p.exports={create:e(5313),clone:e(1413),fromValues:e(5680),copy:e(3470),set:e(6453),add:e(3433),subtract:e(2705),multiply:e(746),divide:e(205),min:e(2170),max:e(3030),scale:e(5510),scaleAndAdd:e(4224),distance:e(5446),squaredDistance:e(1542),length:e(8177),squaredLength:e(9037),negate:e(6459),inverse:e(8057),normalize:e(381),dot:e(4242),lerp:e(8746),random:e(3770),transformMat4:e(6342),transformQuat:e(5022)}},8057:function(p){p.exports=function(s,e){return s[0]=1/e[0],s[1]=1/e[1],s[2]=1/e[2],s[3]=1/e[3],s}},8177:function(p){p.exports=function(s){var e=s[0],o=s[1],r=s[2],n=s[3];return Math.sqrt(e*e+o*o+r*r+n*n)}},8746:function(p){p.exports=function(s,e,o,r){var n=e[0],a=e[1],i=e[2],c=e[3];return s[0]=n+r*(o[0]-n),s[1]=a+r*(o[1]-a),s[2]=i+r*(o[2]-i),s[3]=c+r*(o[3]-c),s}},3030:function(p){p.exports=function(s,e,o){return s[0]=Math.max(e[0],o[0]),s[1]=Math.max(e[1],o[1]),s[2]=Math.max(e[2],o[2]),s[3]=Math.max(e[3],o[3]),s}},2170:function(p){p.exports=function(s,e,o){return s[0]=Math.min(e[0],o[0]),s[1]=Math.min(e[1],o[1]),s[2]=Math.min(e[2],o[2]),s[3]=Math.min(e[3],o[3]),s}},746:function(p){p.exports=function(s,e,o){return s[0]=e[0]*o[0],s[1]=e[1]*o[1],s[2]=e[2]*o[2],s[3]=e[3]*o[3],s}},6459:function(p){p.exports=function(s,e){return s[0]=-e[0],s[1]=-e[1],s[2]=-e[2],s[3]=-e[3],s}},381:function(p){p.exports=function(s,e){var o=e[0],r=e[1],n=e[2],a=e[3],i=o*o+r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),s[0]=o*i,s[1]=r*i,s[2]=n*i,s[3]=a*i),s}},3770:function(p,s,e){var o=e(381),r=e(5510);p.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),o(n,n),r(n,n,a),n}},5510:function(p){p.exports=function(s,e,o){return s[0]=e[0]*o,s[1]=e[1]*o,s[2]=e[2]*o,s[3]=e[3]*o,s}},4224:function(p){p.exports=function(s,e,o,r){return s[0]=e[0]+o[0]*r,s[1]=e[1]+o[1]*r,s[2]=e[2]+o[2]*r,s[3]=e[3]+o[3]*r,s}},6453:function(p){p.exports=function(s,e,o,r,n){return s[0]=e,s[1]=o,s[2]=r,s[3]=n,s}},1542:function(p){p.exports=function(s,e){var o=e[0]-s[0],r=e[1]-s[1],n=e[2]-s[2],a=e[3]-s[3];return o*o+r*r+n*n+a*a}},9037:function(p){p.exports=function(s){var e=s[0],o=s[1],r=s[2],n=s[3];return e*e+o*o+r*r+n*n}},2705:function(p){p.exports=function(s,e,o){return s[0]=e[0]-o[0],s[1]=e[1]-o[1],s[2]=e[2]-o[2],s[3]=e[3]-o[3],s}},6342:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2],i=e[3];return s[0]=o[0]*r+o[4]*n+o[8]*a+o[12]*i,s[1]=o[1]*r+o[5]*n+o[9]*a+o[13]*i,s[2]=o[2]*r+o[6]*n+o[10]*a+o[14]*i,s[3]=o[3]*r+o[7]*n+o[11]*a+o[15]*i,s}},5022:function(p){p.exports=function(s,e,o){var r=e[0],n=e[1],a=e[2],i=o[0],c=o[1],h=o[2],f=o[3],b=f*r+c*a-h*n,v=f*n+h*r-i*a,g=f*a+i*n-c*r,y=-i*r-c*n-h*a;return s[0]=b*f+y*-i+v*-h-g*-c,s[1]=v*f+y*-c+g*-i-b*-h,s[2]=g*f+y*-h+b*-c-v*-i,s[3]=e[3],s}},9365:function(p,s,e){var o=e(8096),r=e(7896);p.exports=function(n){for(var a=Array.isArray(n)?n:o(n),i=0;i<a.length;i++){var c=a[i];if("preprocessor"===c.type){var h=c.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var b=h[2];return(h[1]?r(b):b).trim()}}}}},3193:function(p,s,e){p.exports=function(b){var v,g,y,d=0,m=0,w=c,u=[],S=[],_=1,E=0,L=0,C=!1,P=!1,z="",j=n,R=o;"300 es"===(b=b||{}).version&&(j=i,R=a);var V={},D={};for(d=0;d<j.length;d++)V[j[d]]=!0;for(d=0;d<R.length;d++)D[R[d]]=!0;return function(ae){return S=[],null!==ae?function(se){var pe;for(d=0,se.toString&&(se=se.toString()),z+=se.replace(/\r\n/g,"\n"),y=z.length;v=z[d],d<y;){switch(pe=d,w){case 0:d="/"===v&&"*"===g?(u.push(v),B(u.join("")),w=c,d+1):(u.push(v),g=v,d+1);break;case 1:case 2:d="\r"!==v&&"\n"!==v||"\\"===g?(u.push(v),g=v,d+1):(B(u.join("")),w=c,d);break;case 3:d=q();break;case 4:d="."===v||/[eE]/.test(v)?(u.push(v),w=5,g=v,d+1):"x"===v&&1===u.length&&"0"===u[0]?(w=11,u.push(v),g=v,d+1):/[^\d]/.test(v)?(B(u.join("")),w=c,d):(u.push(v),g=v,d+1);break;case 11:d=/[^a-fA-F0-9]/.test(v)?(B(u.join("")),w=c,d):(u.push(v),g=v,d+1);break;case 5:"f"===v&&(u.push(v),g=v,d+=1),d=/[eE]/.test(v)?(u.push(v),g=v,d+1):("-"!==v&&"+"!==v||!/[eE]/.test(g))&&/[^\d]/.test(v)?(B(u.join("")),w=c,d):(u.push(v),g=v,d+1);break;case h:d=re();break;case 9:d=/[^\s]/g.test(v)?(B(u.join("")),w=c,d):(u.push(v),g=v,d+1);break;case c:u=u.length?[]:u,d="/"===g&&"*"===v?(L=m+d-1,w=0,g=v,d+1):"/"===g&&"/"===v?(L=m+d-1,w=1,g=v,d+1):"#"===v?(w=2,L=m+d,d):/\s/.test(v)?(w=9,L=m+d,d):(C=/\d/.test(v),P=/[^\w_]/.test(v),L=m+d,w=C?4:P?3:h,d)}pe!==d&&("\n"===z[pe]?(E=0,++_):++E)}return m+=d,z=z.slice(d),S}(ae):(u.length&&B(u.join("")),w=10,B("(eof)"),S)};function B(ae){ae.length&&S.push({type:f[w],data:ae,position:L,line:_,column:E})}function q(){if("."===g&&/\d/.test(v))return w=5,d;if("/"===g&&"*"===v)return w=0,d;if("/"===g&&"/"===v)return w=1,d;if("."===v&&u.length){for(;H(u););return w=5,d}if(";"===v||")"===v||"("===v){if(u.length)for(;H(u););return B(v),w=c,d+1}var ae=2===u.length&&"="!==v;if(/[\w_\d\s]/.test(v)||ae){for(;H(u););return w=c,d}return u.push(v),g=v,d+1}function H(ae){for(var se,pe,ke=0;;){if(se=r.indexOf(ae.slice(0,ae.length+ke).join("")),pe=r[se],-1===se){if(ke--+ae.length>0)continue;pe=ae.slice(0,1).join("")}return B(pe),L+=pe.length,(u=u.slice(pe.length)).length}}function re(){if(/[^\d\w_]/.test(v)){var ae=u.join("");return w=D[ae]?8:V[ae]?7:6,B(u.join("")),w=c,d}return u.push(v),g=v,d+1}};var o=e(399),r=e(9746),n=e(9525),a=e(9458),i=e(3585),c=999,h=9999,f=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(p,s,e){var o=e(9525);o=o.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),p.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(p){p.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(p,s,e){var o=e(399);p.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(p){p.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(p){p.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(p,s,e){var o=e(3193);p.exports=function(r,n){var a=o(n),i=[];return(i=i.concat(a(r))).concat(a(null))}},6832:function(p){p.exports=function(s){"string"==typeof s&&(s=[s]);for(var e=[].slice.call(arguments,1),o=[],r=0;r<s.length-1;r++)o.push(s[r],e[r]||"");return o.push(s[r]),o.join("")}},5233:function(p,s,e){"use strict";var o=e(4846);p.exports=o&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(p,s,e){"use strict";p.exports=function(b,v){var g=b.length;if(0===g)throw new Error("Must have at least d+1 points");var y=b[0].length;if(g<=y)throw new Error("Must input at least d+1 points");var d=b.slice(0,y+1),m=o.apply(void 0,d);if(0===m)throw new Error("Input not in general position");for(var w=new Array(y+1),u=0;u<=y;++u)w[u]=u;m<0&&(w[0]=1,w[1]=0);var S=new n(w,new Array(y+1),!1),_=S.adjacent,E=new Array(y+2);for(u=0;u<=y;++u){for(var L=w.slice(),C=0;C<=y;++C)C===u&&(L[C]=-1);var P=L[0];L[0]=L[1],L[1]=P;var z=new n(L,new Array(y+1),!0);_[u]=z,E[u]=z}for(E[y+1]=S,u=0;u<=y;++u){L=_[u].vertices;var j=_[u].adjacent;for(C=0;C<=y;++C){var R=L[C];if(R<0)j[C]=S;else for(var V=0;V<=y;++V)_[V].vertices.indexOf(R)<0&&(j[C]=_[V])}}var D=new h(y,d,E),B=!!v;for(u=y+1;u<g;++u)D.insert(b[u],B);return D.boundary()};var o=e(417),r=e(8211).H;function n(b,v,g){this.vertices=b,this.adjacent=v,this.boundary=g,this.lastVisited=-1}function a(b,v,g){this.vertices=b,this.cell=v,this.index=g}function i(b,v){return r(b.vertices,v.vertices)}n.prototype.flip=function(){var b=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=b;var v=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=v};var c=[];function h(b,v,g){this.dimension=b,this.vertices=v,this.simplices=g,this.interior=g.filter(function(w){return!w.boundary}),this.tuple=new Array(b+1);for(var y=0;y<=b;++y)this.tuple[y]=this.vertices[y];var d,w,m=c[b];m||(m=c[b]=((d=o[b+1])||(d=o),w=d,function(){return w.apply(this,this.tuple)})),this.orient=m}var f=h.prototype;f.handleBoundaryDegeneracy=function(b,v){var g=this.dimension,y=this.vertices.length-1,d=this.tuple,m=this.vertices,w=[b];for(b.lastVisited=-y;w.length>0;)for(var u=(b=w.pop()).adjacent,S=0;S<=g;++S){var _=u[S];if(_.boundary&&!(_.lastVisited<=-y)){for(var E=_.vertices,L=0;L<=g;++L){var C=E[L];d[L]=C<0?v:m[C]}var P=this.orient();if(P>0)return _;_.lastVisited=-y,0===P&&w.push(_)}}return null},f.walk=function(b,v){var g=this.vertices.length-1,y=this.dimension,d=this.vertices,m=this.tuple,w=v?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[w];e:for(;!u.boundary;){for(var S=u.vertices,_=u.adjacent,E=0;E<=y;++E)m[E]=d[S[E]];for(u.lastVisited=g,E=0;E<=y;++E){var L=_[E];if(!(L.lastVisited>=g)){var C=m[E];m[E]=b;var P=this.orient();if(m[E]=C,P<0){u=L;continue e}L.lastVisited=L.boundary?-g:g}}return}return u},f.addPeaks=function(b,v){var g=this.vertices.length-1,y=this.dimension,d=this.vertices,m=this.tuple,w=this.interior,u=this.simplices,S=[v];v.lastVisited=g,v.vertices[v.vertices.indexOf(-1)]=g,v.boundary=!1,w.push(v);for(var _=[];S.length>0;){var E=(v=S.pop()).vertices,L=v.adjacent,C=E.indexOf(g);if(!(C<0))for(var P=0;P<=y;++P)if(P!==C){var z=L[P];if(z.boundary&&!(z.lastVisited>=g)){var j=z.vertices;if(z.lastVisited!==-g){for(var R=0,V=0;V<=y;++V)j[V]<0?(R=V,m[V]=b):m[V]=d[j[V]];if(this.orient()>0){j[R]=g,z.boundary=!1,w.push(z),S.push(z),z.lastVisited=g;continue}z.lastVisited=-g}var D=z.adjacent,B=E.slice(),N=L.slice(),U=new n(B,N,!0);u.push(U);var J=D.indexOf(v);if(!(J<0))for(D[J]=U,N[C]=z,B[P]=-1,N[P]=v,L[P]=U,U.flip(),V=0;V<=y;++V){var Y=B[V];if(!(Y<0||Y===g)){for(var q=new Array(y-1),H=0,X=0;X<=y;++X){var Q=B[X];Q<0||X===V||(q[H++]=Q)}_.push(new a(q,U,V))}}}}}for(_.sort(i),P=0;P+1<_.length;P+=2){var ne=_[P],re=_[P+1];ne.index<0||re.index<0||(ne.cell.adjacent[ne.index]=re.cell,re.cell.adjacent[re.index]=ne.cell)}},f.insert=function(b,v){var g=this.vertices;g.push(b);var y=this.walk(b,v);if(y){for(var d=this.dimension,m=this.tuple,w=0;w<=d;++w){var u=y.vertices[w];m[w]=u<0?b:g[u]}var S=this.orient(m);S<0||(0!==S||(y=this.handleBoundaryDegeneracy(y,b)))&&this.addPeaks(b,y)}},f.boundary=function(){for(var b=this.dimension,v=[],g=this.simplices,y=g.length,d=0;d<y;++d){var m=g[d];if(m.boundary){for(var w=new Array(b),u=m.vertices,S=0,_=0,E=0;E<=b;++E)u[E]>=0?w[S++]=u[E]:_=1&E;if(_===(1&b)){var L=w[0];w[0]=w[1],w[1]=L}v.push(w)}}return v}},9014:function(p,s,e){"use strict";var o=e(5070);function r(S,_,E,L,C){this.mid=S,this.left=_,this.right=E,this.leftPoints=L,this.rightPoints=C,this.count=(_?_.count:0)+(E?E.count:0)+L.length}p.exports=function(S){return new w(S&&0!==S.length?m(S):null)};var n=r.prototype;function a(S,_){S.mid=_.mid,S.left=_.left,S.right=_.right,S.leftPoints=_.leftPoints,S.rightPoints=_.rightPoints,S.count=_.count}function i(S,_){var E=m(_);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function c(S,_){var E=S.intervals([]);E.push(_),i(S,E)}function h(S,_){var E=S.intervals([]),L=E.indexOf(_);return L<0?0:(E.splice(L,1),i(S,E),1)}function f(S,_,E){for(var L=0;L<S.length&&S[L][0]<=_;++L){var C=E(S[L]);if(C)return C}}function b(S,_,E){for(var L=S.length-1;L>=0&&S[L][1]>=_;--L){var C=E(S[L]);if(C)return C}}function v(S,_){for(var E=0;E<S.length;++E){var L=_(S[E]);if(L)return L}}function g(S,_){return S-_}function y(S,_){return S[0]-_[0]||S[1]-_[1]}function d(S,_){return S[1]-_[1]||S[0]-_[0]}function m(S){if(0===S.length)return null;for(var _=[],E=0;E<S.length;++E)_.push(S[E][0],S[E][1]);_.sort(g);var L=_[_.length>>1],C=[],P=[],z=[];for(E=0;E<S.length;++E){var j=S[E];j[1]<L?C.push(j):L<j[0]?P.push(j):z.push(j)}var R=z,V=z.slice();return R.sort(y),V.sort(d),new r(L,m(C),m(P),R,V)}function w(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var _=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?c(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?c(this,S):this.right.insert(S):this.right=m([S]);else{var E=o.ge(this.leftPoints,S,y),L=o.ge(this.rightPoints,S,d);this.leftPoints.splice(E,0,S),this.rightPoints.splice(L,0,S)}},n.remove=function(S){var _=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?h(this,S):2===(P=this.left.remove(S))?(this.left=null,this.count-=1,1):(1===P&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?h(this,S):2===(P=this.right.remove(S))?(this.right=null,this.count-=1,1):(1===P&&(this.count-=1),P):0;if(1===this.count)return this.leftPoints[0]===S?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var C=this.left,P=this.right;E.count-=L.count,E.right=L.left,L.left=C,L.right=P}a(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(C=o.ge(this.leftPoints,S,y);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S)for(this.count-=1,this.leftPoints.splice(C,1),P=o.ge(this.rightPoints,S,d);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1;return 0},n.queryPoint=function(S,_){return S<this.mid?this.left&&(E=this.left.queryPoint(S,_))?E:f(this.leftPoints,S,_):S>this.mid?this.right&&(E=this.right.queryPoint(S,_))?E:b(this.rightPoints,S,_):v(this.leftPoints,_);var E},n.queryInterval=function(S,_,E){var L;return S<this.mid&&this.left&&(L=this.left.queryInterval(S,_,E))||_>this.mid&&this.right&&(L=this.right.queryInterval(S,_,E))?L:_<this.mid?f(this.leftPoints,_,E):S>this.mid?b(this.rightPoints,S,E):v(this.leftPoints,E)};var u=w.prototype;u.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},u.remove=function(S){if(this.root){var _=this.root.remove(S);return 2===_&&(this.root=null),0!==_}return!1},u.queryPoint=function(S,_){if(this.root)return this.root.queryPoint(S,_)},u.queryInterval=function(S,_,E){if(S<=_&&this.root)return this.root.queryInterval(S,_,E)},Object.defineProperty(u,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(u,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(p){"use strict";p.exports=function(s){for(var e=new Array(s),o=0;o<s;++o)e[o]=o;return e}},4846:function(p){p.exports=!0},4780:function(p){function s(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}p.exports=function(e){return null!=e&&(s(e)||"function"==typeof(o=e).readFloatLE&&"function"==typeof o.slice&&s(o.slice(0,0))||!!e._isBuffer);var o}},3596:function(p){"use strict";p.exports=function(s){for(var e,o=s.length,r=0;r<o;r++)if(((e=s.charCodeAt(r))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},3578:function(p){p.exports=function(s,e,o){return s*(1-o)+e*o}},7191:function(p,s,e){var o=e(4690),r=e(9823),n=e(7332),a=e(7787),i=e(7437),c=e(2142),h={length:e(4693),normalize:e(899),dot:e(9305),cross:e(903)},f=r(),b=r(),v=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],y=[0,0,0];function d(m,w,u,S,_){m[0]=w[0]*S+u[0]*_,m[1]=w[1]*S+u[1]*_,m[2]=w[2]*S+u[2]*_}p.exports=function(m,w,u,S,_,E){if(w||(w=[0,0,0]),u||(u=[0,0,0]),S||(S=[0,0,0]),_||(_=[0,0,0,1]),E||(E=[0,0,0,1]),!o(f,m)||(n(b,f),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(a(b)<1e-8)))return!1;var L,C,P,z,j,R,V,X,Q,D=f[3],B=f[7],N=f[11],U=f[12],J=f[13],Y=f[14],q=f[15];if(0!==D||0!==B||0!==N){if(v[0]=D,v[1]=B,v[2]=N,v[3]=q,!i(b,b))return!1;c(b,b),z=(C=v)[0],(L=_)[0]=(P=b)[0]*z+P[4]*(j=C[1])+P[8]*(R=C[2])+P[12]*(V=C[3]),L[1]=P[1]*z+P[5]*j+P[9]*R+P[13]*V,L[2]=P[2]*z+P[6]*j+P[10]*R+P[14]*V,L[3]=P[3]*z+P[7]*j+P[11]*R+P[15]*V}else _[0]=_[1]=_[2]=0,_[3]=1;if(w[0]=U,w[1]=J,w[2]=Y,(X=g)[0][0]=(Q=f)[0],X[0][1]=Q[1],X[0][2]=Q[2],X[1][0]=Q[4],X[1][1]=Q[5],X[1][2]=Q[6],X[2][0]=Q[8],X[2][1]=Q[9],X[2][2]=Q[10],u[0]=h.length(g[0]),h.normalize(g[0],g[0]),S[0]=h.dot(g[0],g[1]),d(g[1],g[1],g[0],1,-S[0]),u[1]=h.length(g[1]),h.normalize(g[1],g[1]),S[0]/=u[1],S[1]=h.dot(g[0],g[2]),d(g[2],g[2],g[0],1,-S[1]),S[2]=h.dot(g[1],g[2]),d(g[2],g[2],g[1],1,-S[2]),u[2]=h.length(g[2]),h.normalize(g[2],g[2]),S[1]/=u[2],S[2]/=u[2],h.cross(y,g[1],g[2]),h.dot(g[0],y)<0)for(var H=0;H<3;H++)u[H]*=-1,g[H][0]*=-1,g[H][1]*=-1,g[H][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4690:function(p){p.exports=function(s,e){var o=e[15];if(0===o)return!1;for(var r=1/o,n=0;n<16;n++)s[n]=e[n]*r;return!0}},7649:function(p,s,e){var o=e(1868),r=e(1102),n=e(7191),a=e(7787),i=e(1116),c=b(),h=b(),f=b();function b(){return{translate:v(),scale:v(1),skew:v(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function v(g){return[g||0,g||0,g||0]}p.exports=function(g,y,d,m){if(0===a(y)||0===a(d))return!1;var w=n(y,c.translate,c.scale,c.skew,c.perspective,c.quaternion),u=n(d,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!u||(o(f.translate,c.translate,h.translate,m),o(f.skew,c.skew,h.skew,m),o(f.scale,c.scale,h.scale,m),o(f.perspective,c.perspective,h.perspective,m),i(f.quaternion,c.quaternion,h.quaternion,m),r(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},1102:function(p,s,e){var o={identity:e(9947),translate:e(998),multiply:e(104),create:e(9823),scale:e(3668),fromRotationTranslation:e(7280)},r=(o.create(),o.create());p.exports=function(n,a,i,c,h,f){return o.identity(n),o.fromRotationTranslation(n,f,a),n[3]=h[0],n[7]=h[1],n[11]=h[2],n[15]=h[3],o.identity(r),0!==c[2]&&(r[9]=c[2],o.multiply(n,n,r)),0!==c[1]&&(r[9]=0,r[8]=c[1],o.multiply(n,n,r)),0!==c[0]&&(r[8]=0,r[4]=c[0],o.multiply(n,n,r)),o.scale(n,n,i),n}},9298:function(p,s,e){"use strict";var o=e(5070),r=e(7649),n=e(7437),a=e(6109),i=e(7115),c=e(5240),h=e(3012),f=e(998),b=(e(3668),e(899)),v=[0,0,0];function g(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}p.exports=function(m){return new g((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var y=g.prototype;y.recalcMatrix=function(m){var w=this._time,u=o.le(w,m),S=this.computedMatrix;if(!(u<0)){var _=this._components;if(u===w.length-1)for(var E=16*u,L=0;L<16;++L)S[L]=_[E++];else{var C=w[u+1]-w[u],P=(E=16*u,this.prevMatrix),z=!0;for(L=0;L<16;++L)P[L]=_[E++];var j=this.nextMatrix;for(L=0;L<16;++L)j[L]=_[E++],z=z&&P[L]===j[L];if(C<1e-6||z)for(L=0;L<16;++L)S[L]=P[L];else r(S,P,j,(m-w[u])/C)}var R=this.computedUp;R[0]=S[1],R[1]=S[5],R[2]=S[9],b(R,R);var V=this.computedInverse;n(V,S);var D=this.computedEye,B=V[15];D[0]=V[12]/B,D[1]=V[13]/B,D[2]=V[14]/B;var N=this.computedCenter,U=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)N[L]=D[L]-S[2+4*L]*U}},y.idle=function(m){if(!(m<this.lastT())){for(var w=this._components,u=w.length-16,S=0;S<16;++S)w.push(w[u++]);this._time.push(m)}},y.flush=function(m){var w=o.gt(this._time,m)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},y.lastT=function(){return this._time[this._time.length-1]},y.lookAt=function(m,w,u,S){this.recalcMatrix(m),this.setMatrix(m,h(this.computedMatrix,w=w||this.computedEye,u=u||v,S=S||this.computedUp));for(var _=0,E=0;E<3;++E)_+=Math.pow(u[E]-w[E],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},y.rotate=function(m,w,u,S){this.recalcMatrix(m);var _=this.computedInverse;w&&i(_,_,w),u&&a(_,_,u),S&&c(_,_,S),this.setMatrix(m,n(this.computedMatrix,_))};var d=[0,0,0];y.pan=function(m,w,u,S){d[0]=-(w||0),d[1]=-(u||0),d[2]=-(S||0),this.recalcMatrix(m);var _=this.computedInverse;f(_,_,d),this.setMatrix(m,n(_,_))},y.translate=function(m,w,u,S){d[0]=w||0,d[1]=u||0,d[2]=S||0,this.recalcMatrix(m);var _=this.computedMatrix;f(_,_,d),this.setMatrix(m,_)},y.setMatrix=function(m,w){if(!(m<this.lastT())){this._time.push(m);for(var u=0;u<16;++u)this._components.push(w[u])}},y.setDistance=function(m,w){this.computedRadius[0]=w},y.setDistanceLimits=function(m,w){var u=this._limits;u[0]=m,u[1]=w},y.getDistanceLimits=function(m){var w=this._limits;return m?(m[0]=w[0],m[1]=w[1],m):w}},3266:function(p,s,e){"use strict";p.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),i=0;i<n;++i)a[i]=i;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var c=new Array(n);for(i=0;i<n;++i)c[i]=i;c.sort(function(w,u){return r[w][0]-r[u][0]||r[w][1]-r[u][1]});var h=[c[0],c[1]],f=[c[0],c[1]];for(i=2;i<n;++i){for(var b=c[i],v=r[b],g=h.length;g>1&&o(r[h[g-2]],r[h[g-1]],v)<=0;)g-=1,h.pop();for(h.push(b),g=f.length;g>1&&o(r[f[g-2]],r[f[g-1]],v)>=0;)g-=1,f.pop();f.push(b)}a=new Array(f.length+h.length-2);for(var y=0,d=(i=0,h.length);i<d;++i)a[y++]=h[i];for(var m=f.length-2;m>0;--m)a[y++]=f[m];return a};var o=e(417)[3]},6145:function(p,s,e){"use strict";p.exports=function(r,n){n||(n=r,r=window);var a=0,i=0,c=0,h={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function b(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==h.meta,h.meta=!!E.metaKey),L}function v(E,L){var C=o.x(L),P=o.y(L);"buttons"in L&&(E=0|L.buttons),(E!==a||C!==i||P!==c||b(L))&&(a=0|E,i=C||0,c=P||0,n&&n(a,i,c,h))}function g(E){v(0,E)}function y(){(a||i||c||h.shift||h.alt||h.meta||h.control)&&(i=c=0,a=0,h.shift=h.alt=h.control=h.meta=!1,n&&n(0,0,0,h))}function d(E){b(E)&&n&&n(a,i,c,h)}function m(E){0===o.buttons(E)?v(0,E):v(a,E)}function w(E){v(a|o.buttons(E),E)}function u(E){v(a&~o.buttons(E),E)}function S(){f||(f=!0,r.addEventListener("mousemove",m),r.addEventListener("mousedown",w),r.addEventListener("mouseup",u),r.addEventListener("mouseleave",g),r.addEventListener("mouseenter",g),r.addEventListener("mouseout",g),r.addEventListener("mouseover",g),r.addEventListener("blur",y),r.addEventListener("keyup",d),r.addEventListener("keydown",d),r.addEventListener("keypress",d),r!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}S();var _={element:r};return Object.defineProperties(_,{enabled:{get:function(){return f},set:function(E){E?S():f&&(f=!1,r.removeEventListener("mousemove",m),r.removeEventListener("mousedown",w),r.removeEventListener("mouseup",u),r.removeEventListener("mouseleave",g),r.removeEventListener("mouseenter",g),r.removeEventListener("mouseout",g),r.removeEventListener("mouseover",g),r.removeEventListener("blur",y),r.removeEventListener("keyup",d),r.removeEventListener("keydown",d),r.removeEventListener("keypress",d),r!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),_};var o=e(4110)},2565:function(p){var s={left:0,top:0};p.exports=function(e,o,r){o=o||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var n,a=e.clientX||0,i=e.clientY||0,c=(n=o)===window||n===document||n===document.body?s:n.getBoundingClientRect();return r[0]=a-c.left,r[1]=i-c.top,r}},4110:function(p,s){"use strict";function e(o){return o.target||o.srcElement||window}s.buttons=function(o){if("object"==typeof o){if("buttons"in o)return o.buttons;if("which"in o){if(2===(r=o.which))return 4;if(3===r)return 2;if(r>0)return 1<<r-1}else if("button"in o){var r;if(1===(r=o.button))return 4;if(2===r)return 2;if(r>=0)return 1<<r}}return 0},s.element=e,s.x=function(o){if("object"==typeof o){if("offsetX"in o)return o.offsetX;var r=e(o).getBoundingClientRect();return o.clientX-r.left}return 0},s.y=function(o){if("object"==typeof o){if("offsetY"in o)return o.offsetY;var r=e(o).getBoundingClientRect();return o.clientY-r.top}return 0}},6475:function(p,s,e){"use strict";var o=e(14);p.exports=function(r,n,a){"function"==typeof r&&(a=!!n,n=r,r=window);var i=o("ex",r),c=function(h){a&&h.preventDefault();var f=h.deltaX||0,b=h.deltaY||0,v=h.deltaZ||0,g=1;switch(h.deltaMode){case 1:g=i;break;case 2:g=window.innerHeight}if(b*=g,v*=g,(f*=g)||b||v)return n(f,b,v,h)};return r.addEventListener("wheel",c),c}},9284:function(p,s,e){"use strict";var o=e(5306);p.exports=function(n){function a(v){throw new Error("ndarray-extract-contour: "+v)}"object"!=typeof n&&a("Must specify arguments");var i=n.order;Array.isArray(i)||a("Must specify order");var v,g,y,u,c=n.arrayArguments||1;c<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof n.vertex&&a("Must specify vertex creation function"),"function"!=typeof n.cell&&a("Must specify cell creation function"),"function"!=typeof n.phase&&a("Must specify phase function");for(var h=n.getters||[],f=new Array(c),b=0;b<c;++b)f[b]=h.indexOf(b)>=0;return v=n.vertex,g=n.cell,y=n.phase,u=[f,i].join(","),(0,r[u])(v,g,y,o.mallocUint32,o.freeUint32)};var r={"false,0,1":function(n,a,i,c,h){return function(f,b,v,g){var y,d=0|f.shape[0],m=0|f.shape[1],w=f.data,S=0|f.stride[0],_=0|f.stride[1],E=0|f.offset,L=0|-S,C=0,P=0|-_,z=0,j=-S-_|0,R=0,V=0|S,D=_-S*d|0,B=0,N=0,U=0,J=2*d|0,Y=c(J),q=c(J),H=0,X=0,Q=-1,ne=-1,re=0,ae=0|-d,se=0|d,pe=0,ke=-d-1|0,me=d-1|0,le=0,ue=0,Ee=0;for(B=0;B<d;++B)Y[H++]=i(w[E],b,v,g),E+=V;if(E+=D,m>0){if(N=1,Y[H++]=i(w[E],b,v,g),E+=V,d>0)for(B=1,X=Y[H]=i(y=w[E],b,v,g),pe=Y[H+ae],le=Y[H+ke],X===(re=Y[H+Q])&&X===pe&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,re,pe,le,b,v,g),ue=q[H]=U++),H+=1,E+=V,B=2;B<d;++B)X=Y[H]=i(y=w[E],b,v,g),pe=Y[H+ae],le=Y[H+ke],X===(re=Y[H+Q])&&X===pe&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,re,pe,le,b,v,g),ue=q[H]=U++,le!==re&&a(q[H+Q],ue,R,C,le,re,b,v,g)),H+=1,E+=V;for(E+=D,H=0,Ee=Q,Q=ne,ne=Ee,Ee=ae,ae=se,se=Ee,Ee=ke,ke=me,me=Ee,N=2;N<m;++N){if(Y[H++]=i(w[E],b,v,g),E+=V,d>0)for(B=1,X=Y[H]=i(y=w[E],b,v,g),pe=Y[H+ae],le=Y[H+ke],X===(re=Y[H+Q])&&X===pe&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,re,pe,le,b,v,g),ue=q[H]=U++,le!==pe&&a(q[H+ae],ue,z,R,pe,le,b,v,g)),H+=1,E+=V,B=2;B<d;++B)X=Y[H]=i(y=w[E],b,v,g),pe=Y[H+ae],le=Y[H+ke],X===(re=Y[H+Q])&&X===pe&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,re,pe,le,b,v,g),ue=q[H]=U++,le!==pe&&a(q[H+ae],ue,z,R,pe,le,b,v,g),le!==re&&a(q[H+Q],ue,R,C,le,re,b,v,g)),H+=1,E+=V;1&N&&(H=0),Ee=Q,Q=ne,ne=Ee,Ee=ae,ae=se,se=Ee,Ee=ke,ke=me,me=Ee,E+=D}}h(q),h(Y)}},"false,1,0":function(n,a,i,c,h){return function(f,b,v,g){var y,d=0|f.shape[0],m=0|f.shape[1],w=f.data,S=0|f.stride[0],_=0|f.stride[1],E=0|f.offset,L=0|-S,C=0,P=0|-_,z=0,j=-S-_|0,R=0,V=0|_,D=S-_*m|0,B=0,N=0,U=0,J=2*m|0,Y=c(J),q=c(J),H=0,X=0,Q=-1,ne=-1,re=0,ae=0|-m,se=0|m,pe=0,ke=-m-1|0,me=m-1|0,le=0,ue=0,Ee=0;for(N=0;N<m;++N)Y[H++]=i(w[E],b,v,g),E+=V;if(E+=D,d>0){if(B=1,Y[H++]=i(w[E],b,v,g),E+=V,m>0)for(N=1,X=Y[H]=i(y=w[E],b,v,g),re=Y[H+Q],le=Y[H+ke],X===(pe=Y[H+ae])&&X===re&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,pe,re,le,b,v,g),ue=q[H]=U++),H+=1,E+=V,N=2;N<m;++N)X=Y[H]=i(y=w[E],b,v,g),re=Y[H+Q],le=Y[H+ke],X===(pe=Y[H+ae])&&X===re&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,pe,re,le,b,v,g),ue=q[H]=U++,le!==re&&a(q[H+Q],ue,z,R,re,le,b,v,g)),H+=1,E+=V;for(E+=D,H=0,Ee=ae,ae=se,se=Ee,Ee=Q,Q=ne,ne=Ee,Ee=ke,ke=me,me=Ee,B=2;B<d;++B){if(Y[H++]=i(w[E],b,v,g),E+=V,m>0)for(N=1,X=Y[H]=i(y=w[E],b,v,g),re=Y[H+Q],le=Y[H+ke],X===(pe=Y[H+ae])&&X===re&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,pe,re,le,b,v,g),ue=q[H]=U++,le!==pe&&a(q[H+ae],ue,R,C,le,pe,b,v,g)),H+=1,E+=V,N=2;N<m;++N)X=Y[H]=i(y=w[E],b,v,g),re=Y[H+Q],le=Y[H+ke],X===(pe=Y[H+ae])&&X===re&&X===le||(n(B,N,y,C=w[E+L],z=w[E+P],R=w[E+j],X,pe,re,le,b,v,g),ue=q[H]=U++,le!==re&&a(q[H+Q],ue,z,R,re,le,b,v,g),le!==pe&&a(q[H+ae],ue,R,C,le,pe,b,v,g)),H+=1,E+=V;1&B&&(H=0),Ee=ae,ae=se,se=Ee,Ee=Q,Q=ne,ne=Ee,Ee=ke,ke=me,me=Ee,E+=D}}h(q),h(Y)}}}},9144:function(p,s,e){"use strict";var o=e(3094),r={zero:function(d,m,w,u){var S=d[0];u|=0;var _=0,E=w[0];for(_=0;_<S;++_)m[u]=0,u+=E},fdTemplate1:function(d,m,w,u,S,_,E){var L=d[0],C=w[0],P=-1*C,z=C;u|=0,E|=0;var j=0,R=C,V=_[0];for(j=0;j<L;++j)S[E]=.5*(m[u+P]-m[u+z]),u+=R,E+=V},fdTemplate2:function(d,m,w,u,S,_,E,L,C,P){var z=d[0],j=d[1],R=w[0],V=w[1],B=_[1],U=C[1],J=-1*R,Y=R,q=-1*V,H=V;u|=0,E|=0,P|=0;var X=0,Q=0,ne=V,re=R-j*V,ae=B,se=_[0]-j*B,pe=U,ke=C[0]-j*U;for(Q=0;Q<z;++Q){for(X=0;X<j;++X)S[E]=.5*(m[u+J]-m[u+Y]),L[P]=.5*(m[u+q]-m[u+H]),u+=ne,E+=ae,P+=pe;u+=re,E+=se,P+=ke}}},n={cdiff:function(d){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,z=S.order,j=[_,E.join(),L,C.join(),P,z.join()].join(),R=m[j];return R||(m[j]=R=d([_,E,L,C,P,z])),R(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}},zero:function(d){var m={};return function(w){var u=w.dtype,S=w.order,_=[u,S.join()].join(),E=m[_];return E||(m[_]=E=d([u,S])),E(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(d){var m={};return function(w,u){var S=w.dtype,_=w.order,E=u.dtype,L=u.order,C=[S,_.join(),E,L.join()].join(),P=m[C];return P||(m[C]=P=d([S,_,E,L])),P(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset)}},fdTemplate2:function(d){var m={};return function(w,u,S){var _=w.dtype,E=w.order,L=u.dtype,C=u.order,P=S.dtype,z=S.order,j=[_,E.join(),L,C.join(),P,z.join()].join(),R=m[j];return R||(m[j]=R=d([_,E,L,C,P,z])),R(w.shape.slice(0),w.data,w.stride,0|w.offset,u.data,u.stride,0|u.offset,S.data,S.stride,0|S.offset)}}};function a(d){return(0,n[d.funcName])(i.bind(void 0,d))}function i(d){return r[d.funcName]}function c(d){return a({funcName:d.funcName})}var h={},f={},b=c({funcName:"cdiff"}),v=c({funcName:"zero"});function g(d){return d in h?h[d]:h[d]=c({funcName:"fdTemplate"+d})}function y(d,m,w,u){return function(S,_){var E=_.shape.slice();return E[0]>2&&E[1]>2&&u(_.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(w(_.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(w(_.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(w(_.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(w(_.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}p.exports=function(d,m,w){return Array.isArray(w)||(w=o(m.dimension,"string"==typeof w?w:"clamp")),0===m.size?d:0===m.dimension?(d.set(0),d):function(u){var S=u.join();if(C=f[S])return C;for(var _=u.length,E=[b,v],L=1;L<=_;++L)E.push(g(L));var C=y.apply(void 0,E);return f[S]=C,C}(w)(d,m)}},3581:function(p){"use strict";function s(n,a){var i=Math.floor(a),c=a-i,f=0<=i+1&&i+1<n.shape[0];return(1-c)*(0<=i&&i<n.shape[0]?+n.get(i):0)+c*(f?+n.get(i+1):0)}function e(n,a,i){var c=Math.floor(a),h=a-c,f=0<=c&&c<n.shape[0],b=0<=c+1&&c+1<n.shape[0],v=Math.floor(i),g=i-v,y=0<=v&&v<n.shape[1],d=0<=v+1&&v+1<n.shape[1],m=f&&y?n.get(c,v):0,w=f&&d?n.get(c,v+1):0;return(1-g)*((1-h)*m+h*(b&&y?n.get(c+1,v):0))+g*((1-h)*w+h*(b&&d?n.get(c+1,v+1):0))}function o(n,a,i,c){var h=Math.floor(a),f=a-h,b=0<=h&&h<n.shape[0],v=0<=h+1&&h+1<n.shape[0],g=Math.floor(i),y=i-g,d=0<=g&&g<n.shape[1],m=0<=g+1&&g+1<n.shape[1],w=Math.floor(c),u=c-w,S=0<=w&&w<n.shape[2],_=0<=w+1&&w+1<n.shape[2],E=b&&d&&S?n.get(h,g,w):0,L=b&&m&&S?n.get(h,g+1,w):0,C=v&&d&&S?n.get(h+1,g,w):0,P=v&&m&&S?n.get(h+1,g+1,w):0,z=b&&d&&_?n.get(h,g,w+1):0,j=b&&m&&_?n.get(h,g+1,w+1):0;return(1-u)*((1-y)*((1-f)*E+f*C)+y*((1-f)*L+f*P))+u*((1-y)*((1-f)*z+f*(v&&d&&_?n.get(h+1,g,w+1):0))+y*((1-f)*j+f*(v&&m&&_?n.get(h+1,g+1,w+1):0)))}function r(n){var a,i,c=0|n.shape.length,h=new Array(c),f=new Array(c),b=new Array(c),v=new Array(c);for(a=0;a<c;++a)i=+arguments[a+1],h[a]=Math.floor(i),f[a]=i-h[a],b[a]=0<=h[a]&&h[a]<n.shape[a],v[a]=0<=h[a]+1&&h[a]+1<n.shape[a];var g,y,d,m=0;e:for(a=0;a<1<<c;++a){for(y=1,d=n.offset,g=0;g<c;++g)if(a&1<<g){if(!v[g])continue e;y*=f[g],d+=n.stride[g]*(h[g]+1)}else{if(!b[g])continue e;y*=1-f[g],d+=n.stride[g]*h[g]}m+=y*n.data[d]}return m}p.exports=function(n,a,i,c){switch(n.shape.length){case 0:return 0;case 1:return s(n,a);case 2:return e(n,a,i);case 3:return o(n,a,i,c);default:return r.apply(void 0,arguments)}},p.exports.d1=s,p.exports.d2=e,p.exports.d3=o},7498:function(p,s){"use strict";var e={"float64,2,1,0":function(){return function(i,c,h,f,b){var v=i[0],g=i[1],y=i[2],m=h[1],w=h[2];f|=0;var u=0,S=0,_=0,E=w,L=m-y*w,C=h[0]-g*m;for(_=0;_<v;++_){for(S=0;S<g;++S){for(u=0;u<y;++u)c[f]/=b,f+=E;f+=L}f+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(i,c,h,f,b,v,g,y){for(var d=i[0],m=i[1],w=i[2],u=h[0],S=h[1],_=h[2],E=v[0],L=v[1],C=v[2],P=f|=0,z=g|=0,j=0|i[0];j>0;){j<64?(d=j,j=0):(d=64,j-=64);for(var R=0|i[1];R>0;){R<64?(m=R,R=0):(m=64,R-=64),f=P+j*u+R*S,g=z+j*E+R*L;var V=0,D=0,B=0,N=_,U=u-w*_,J=S-d*u,Y=C,q=E-w*C,H=L-d*E;for(B=0;B<m;++B){for(D=0;D<d;++D){for(V=0;V<w;++V)c[f]=b[g]*y,f+=N,g+=Y;f+=U,g+=q}f+=J,g+=H}}}}},"float32,1,0,float32,1,0":function(){return function(i,c,h,f,b,v,g){var y=i[0],d=i[1],w=h[1],S=v[1];f|=0,g|=0;var _=0,E=0,L=w,C=h[0]-d*w,P=S,z=v[0]-d*S;for(E=0;E<y;++E){for(_=0;_<d;++_)c[f]=b[g],f+=L,g+=P;f+=C,g+=z}}},"float32,1,0,float32,0,1":function(){return function(i,c,h,f,b,v,g){for(var y=i[0],d=i[1],m=h[0],w=h[1],u=v[0],S=v[1],_=f|=0,E=g|=0,L=0|i[1];L>0;){L<64?(d=L,L=0):(d=64,L-=64);for(var C=0|i[0];C>0;){C<64?(y=C,C=0):(y=64,C-=64),f=_+L*w+C*m,g=E+L*S+C*u;var P=0,z=0,j=w,R=m-d*w,V=S,D=u-d*S;for(z=0;z<y;++z){for(P=0;P<d;++P)c[f]=b[g],f+=j,g+=V;f+=R,g+=D}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(i,c,h,f,b,v,g){for(var y=i[0],d=i[1],m=i[2],w=h[0],u=h[1],S=h[2],_=v[0],E=v[1],L=v[2],C=f|=0,P=g|=0,z=0|i[2];z>0;){z<64?(m=z,z=0):(m=64,z-=64);for(var j=0|i[0];j>0;){j<64?(y=j,j=0):(y=64,j-=64);for(var R=0|i[1];R>0;){R<64?(d=R,R=0):(d=64,R-=64),f=C+z*S+j*w+R*u,g=P+z*L+j*_+R*E;var V=0,D=0,B=0,N=S,U=w-m*S,J=u-y*w,Y=L,q=_-m*L,H=E-y*_;for(B=0;B<d;++B){for(D=0;D<y;++D){for(V=0;V<m;++V)c[f]=b[g],f+=N,g+=Y;f+=U,g+=q}f+=J,g+=H}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(i,c,h,f,b,v,g){var y=i[0],d=i[1],m=i[2],w=h[0],S=h[2],_=v[0],L=v[2];f|=0,g|=0;var C=0,P=0,z=0,j=S,R=w-m*S,V=h[1]-y*w,D=L,B=_-m*L,N=v[1]-y*_;for(z=0;z<d;++z){for(P=0;P<y;++P){for(C=0;C<m;++C)c[f]=b[g],f+=j,g+=D;f+=R,g+=B}f+=V,g+=N}}}},o=function(i,c){var h=c.join(",");return(0,e[h])()},r={mul:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,d=f.order,m=b.dtype,w=b.order,u=[v,g.join(),y,d.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,d,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},muls:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,d=f.order,m=[v,g.join(),y,d.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,d])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b)}},mulseq:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=[b,v.join()].join(),y=c[g];return y||(c[g]=y=i([b,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},div:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,d=f.order,m=b.dtype,w=b.order,u=[v,g.join(),y,d.join(),m,w.join()].join(),S=c[u];return S||(c[u]=S=i([v,g,y,d,m,w])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b.data,b.stride,0|b.offset)}},divs:function(i){var c={};return function(h,f,b){var v=h.dtype,g=h.order,y=f.dtype,d=f.order,m=[v,g.join(),y,d.join()].join(),w=c[m];return w||(c[m]=w=i([v,g,y,d])),w(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset,b)}},divseq:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=[b,v.join()].join(),y=c[g];return y||(c[g]=y=i([b,v])),y(h.shape.slice(0),h.data,h.stride,0|h.offset,f)}},assign:function(i){var c={};return function(h,f){var b=h.dtype,v=h.order,g=f.dtype,y=f.order,d=[b,v.join(),g,y.join()].join(),m=c[d];return m||(c[d]=m=i([b,v,g,y])),m(h.shape.slice(0),h.data,h.stride,0|h.offset,f.data,f.stride,0|f.offset)}}};function n(i){return(0,r[(c={funcName:i.funcName}).funcName])(o.bind(void 0,c));var c}var a={mul:"*",div:"/"};(function(){for(var i in a)s[i]=n({funcName:i}),s[i+"s"]=n({funcName:i+"s"}),s[i+"seq"]=n({funcName:i+"seq"})})(),s.assign=n({funcName:"assign"})},7382:function(p,s,e){"use strict";var o=e(5050),r=e(9262);p.exports=function(n,a){for(var i=[],c=n,h=1;Array.isArray(c);)i.push(c.length),h*=c.length,c=c[0];return 0===i.length?o():(a||(a=o(new Float64Array(h),i)),r(a,n),a)}},9262:function(p){"use strict";var s,e;p.exports=(s=function(){return function(s,e,o,r,n){var a=s[0],i=s[1],c=s[2],f=o[1],b=o[2],v=[0,0,0];r|=0;var g=0,y=0,d=0,m=b,w=f-c*b,u=o[0]-i*f;for(d=0;d<a;++d){for(y=0;y<i;++y){for(g=0;g<c;++g){var S,_=n;for(S=0;S<v.length-1;++S)_=_[v[S]];e[r]=_[v[v.length-1]],r+=m,++v[2]}r+=w,v[2]-=c,++v[1]}r+=u,v[1]-=i,++v[0]}}}.bind(void 0,{funcName:"convert"}),e={},function(o,r){var n=o.dtype,a=o.order,i=[n,a.join()].join(),c=e[i];return c||(e[i]=c=s([n,a])),c(o.shape.slice(0),o.data,o.stride,0|o.offset,r)})},8139:function(p,s,e){"use strict";var o=e(5306);function r(c){return"uint32"===c?[o.mallocUint32,o.freeUint32]:null}var n={"uint32,1,0":function(c,h){return function(f,b,v,g,y,d,m,w,u,S,_){var E,L,C,P,z,j,R,V,D=f*y+g,B=c(w);for(E=f+1;E<=b;++E){for(L=E,C=D+=y,z=0,j=D,P=0;P<w;++P)B[z++]=v[j],j+=u;e:for(;L-- >f;){z=0,j=C-y;t:for(P=0;P<w;++P){if((R=v[j])<(V=B[z]))break e;if(R>V)break t;j+=S,z+=_}for(z=C,j=C-y,P=0;P<w;++P)v[z]=v[j],z+=u,j+=u;C-=y}for(z=C,j=0,P=0;P<w;++P)v[z]=B[j++],z+=u}h(B)}}},a={"uint32,1,0":function(c,h,f){return function b(v,g,y,d,m,w,u,S,_,E,L){var C,P,j,R,V,D,B,N,U,J,Y,q,H,X,Q,ne,re,ae,se,pe,ke,me,le,ue,Ee=(g-v+1)/6|0,de=v+Ee,xe=g-Ee,Te=v+g>>1,we=Te-Ee,K=Te+Ee,oe=de,he=we,ye=Te,Me=K,Re=xe,Pe=v+1,De=g-1,fe=!0,ge=0,be=0,Ie=0,He=S,Ve=h(He),tt=h(He);J=m*oe,Y=m*he,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=oe,oe=he,he=P;break e}if(Ie<0)break e;ue+=E}J=m*Me,Y=m*Re,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=Me,Me=Re,Re=P;break e}if(Ie<0)break e;ue+=E}J=m*oe,Y=m*ye,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=oe,oe=ye,ye=P;break e}if(Ie<0)break e;ue+=E}J=m*he,Y=m*ye,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=he,he=ye,ye=P;break e}if(Ie<0)break e;ue+=E}J=m*oe,Y=m*Me,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=oe,oe=Me,Me=P;break e}if(Ie<0)break e;ue+=E}J=m*ye,Y=m*Me,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=ye,ye=Me,Me=P;break e}if(Ie<0)break e;ue+=E}J=m*he,Y=m*Re,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=he,he=Re,Re=P;break e}if(Ie<0)break e;ue+=E}J=m*he,Y=m*ye,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=he,he=ye,ye=P;break e}if(Ie<0)break e;ue+=E}J=m*Me,Y=m*Re,ue=d;e:for(U=0;U<S;++U){if((Ie=y[D=J+ue]-y[B=Y+ue])>0){P=Me,Me=Re,Re=P;break e}if(Ie<0)break e;ue+=E}for(J=m*oe,Y=m*he,q=m*ye,H=m*Me,X=m*Re,Q=m*de,ne=m*Te,re=m*xe,le=0,ue=d,U=0;U<S;++U)D=J+ue,N=q+ue,ae=H+ue,se=X+ue,pe=Q+ue,ke=ne+ue,me=re+ue,Ve[le]=y[B=Y+ue],tt[le]=y[ae],fe=fe&&Ve[le]===tt[le],j=y[N],R=y[se],y[pe]=y[D],y[ke]=j,y[me]=R,++le,ue+=_;for(J=m*we,Y=m*v,ue=d,U=0;U<S;++U)y[D=J+ue]=y[B=Y+ue],ue+=_;for(J=m*K,Y=m*g,ue=d,U=0;U<S;++U)y[D=J+ue]=y[B=Y+ue],ue+=_;if(fe)for(V=Pe;V<=De;++V){for(D=d+V*m,le=0,U=0;U<S&&0==(Ie=y[D]-Ve[le]);++U)le+=L,D+=E;if(0!==Ie)if(Ie<0){if(V!==Pe)for(J=m*V,Y=m*Pe,ue=d,U=0;U<S;++U)C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=C,ue+=_;++Pe}else for(;;){for(D=d+De*m,le=0,U=0;U<S&&0==(Ie=y[D]-Ve[le]);++U)le+=L,D+=E;if(!(Ie>0)){if(Ie<0){for(J=m*V,Y=m*Pe,q=m*De,ue=d,U=0;U<S;++U)N=q+ue,C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=y[N],y[N]=C,ue+=_;++Pe,--De;break}for(J=m*V,Y=m*De,ue=d,U=0;U<S;++U)C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=C,ue+=_;--De;break}De--}}else for(V=Pe;V<=De;++V){for(D=d+V*m,le=0,U=0;U<S&&0==(ge=y[D]-Ve[le]);++U)le+=L,D+=E;if(ge<0){if(V!==Pe)for(J=m*V,Y=m*Pe,ue=d,U=0;U<S;++U)C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=C,ue+=_;++Pe}else{for(D=d+V*m,le=0,U=0;U<S&&0==(be=y[D]-tt[le]);++U)le+=L,D+=E;if(be>0)for(;;){for(D=d+De*m,le=0,U=0;U<S&&0==(Ie=y[D]-tt[le]);++U)le+=L,D+=E;if(!(Ie>0)){for(D=d+De*m,le=0,U=0;U<S&&0==(Ie=y[D]-Ve[le]);++U)le+=L,D+=E;if(Ie<0){for(J=m*V,Y=m*Pe,q=m*De,ue=d,U=0;U<S;++U)N=q+ue,C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=y[N],y[N]=C,ue+=_;++Pe,--De}else{for(J=m*V,Y=m*De,ue=d,U=0;U<S;++U)C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=C,ue+=_;--De}break}if(--De<V)break}}}for(J=m*v,Y=m*(Pe-1),le=0,ue=d,U=0;U<S;++U)y[D=J+ue]=y[B=Y+ue],y[B]=Ve[le],++le,ue+=_;for(J=m*g,Y=m*(De+1),le=0,ue=d,U=0;U<S;++U)y[D=J+ue]=y[B=Y+ue],y[B]=tt[le],++le,ue+=_;if(Pe-2-v<=32?c(v,Pe-2,y,d,m,w,u,S,_,E,L):b(v,Pe-2,y,d,m,w,u,S,_,E,L),g-(De+2)<=32?c(De+2,g,y,d,m,w,u,S,_,E,L):b(De+2,g,y,d,m,w,u,S,_,E,L),fe)return f(Ve),void f(tt);if(Pe<de&&De>xe){e:for(;;){for(D=d+Pe*m,le=0,ue=d,U=0;U<S;++U){if(y[D]!==Ve[le])break e;++le,D+=_}++Pe}e:for(;;){for(D=d+De*m,le=0,ue=d,U=0;U<S;++U){if(y[D]!==tt[le])break e;++le,D+=_}--De}for(V=Pe;V<=De;++V){for(D=d+V*m,le=0,U=0;U<S&&0==(ge=y[D]-Ve[le]);++U)le+=L,D+=E;if(0===ge){if(V!==Pe)for(J=m*V,Y=m*Pe,ue=d,U=0;U<S;++U)C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=C,ue+=_;++Pe}else{for(D=d+V*m,le=0,U=0;U<S&&0==(be=y[D]-tt[le]);++U)le+=L,D+=E;if(0===be)for(;;){for(D=d+De*m,le=0,U=0;U<S&&0==(Ie=y[D]-tt[le]);++U)le+=L,D+=E;if(0!==Ie){for(D=d+De*m,le=0,U=0;U<S&&0==(Ie=y[D]-Ve[le]);++U)le+=L,D+=E;if(Ie<0){for(J=m*V,Y=m*Pe,q=m*De,ue=d,U=0;U<S;++U)N=q+ue,C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=y[N],y[N]=C,ue+=_;++Pe,--De}else{for(J=m*V,Y=m*De,ue=d,U=0;U<S;++U)C=y[D=J+ue],y[D]=y[B=Y+ue],y[B]=C,ue+=_;--De}break}if(--De<V)break}}}}f(Ve),f(tt),De-Pe<=32?c(Pe,De,y,d,m,w,u,S,_,E,L):b(Pe,De,y,d,m,w,u,S,_,E,L)}}},i={"uint32,1,0":function(c,h){return function(f){var b=f.data,v=0|f.offset,g=f.shape,y=f.stride,d=0|y[0],m=0|g[0],w=0|y[1],u=0|g[1],S=w,_=w;m<=32?c(0,m-1,b,v,d,w,m,u,S,_,1):h(0,m-1,b,v,d,w,m,u,S,_,1)}}};p.exports=function(c,h){var y,d,m,w,u,f=[h,c].join(","),b=i[f],v=(y=c,m=r(d=h),w=[d,y].join(","),u=n[w],m?u(m[0],m[1]):u()),g=function(y,d,m){var w=r(d),u=[d,y].join(","),S=a[u];return y.length>1&&w?S(m,w[0],w[1]):S(m)}(c,h,v);return b(v,g)}},8729:function(p,s,e){"use strict";var o=e(8139),r={};p.exports=function(n){var a=n.order,i=n.dtype,c=[a,i].join(":"),h=r[c];return h||(r[c]=h=o(a,i)),h(n),n}},5050:function(p,s,e){var o=e(4780),r=typeof Float64Array<"u";function n(f,b){return f[0]-b[0]}function a(){var f,b=this.stride,v=new Array(b.length);for(f=0;f<v.length;++f)v[f]=[Math.abs(b[f]),f];v.sort(n);var g=new Array(v.length);for(f=0;f<g.length;++f)g[f]=v[f][1];return g}var i={T:function(f){function b(g){this.data=g}var v=b.prototype;return v.dtype=f,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new b(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(g){return new b(g)}},0:function(f,b){function v(y,d){this.data=y,this.offset=d}var g=v.prototype;return g.dtype=f,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new v(this.data,this.offset)},g.pick=function(){return b(this.data)},g.valueOf=g.get=function(){return"generic"===f?this.data.get(this.offset):this.data[this.offset]},g.set=function(y){return"generic"===f?this.data.set(this.offset,y):this.data[this.offset]=y},function(y,d,m,w){return new v(y,w)}},1:function(f,b,v){function g(d,m,w,u){this.data=d,this.shape=[m],this.stride=[w],this.offset=0|u}var y=g.prototype;return y.dtype=f,y.dimension=1,Object.defineProperty(y,"size",{get:function(){return this.shape[0]}}),y.order=[0],y.set=function(d,m){return"generic"===f?this.data.set(this.offset+this.stride[0]*d,m):this.data[this.offset+this.stride[0]*d]=m},y.get=function(d){return"generic"===f?this.data.get(this.offset+this.stride[0]*d):this.data[this.offset+this.stride[0]*d]},y.index=function(d){return this.offset+this.stride[0]*d},y.hi=function(d){return new g(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,this.stride[0],this.offset)},y.lo=function(d){var m=this.offset,w=0,u=this.shape[0],S=this.stride[0];return"number"==typeof d&&d>=0&&(m+=S*(w=0|d),u-=w),new g(this.data,u,S,m)},y.step=function(d){var m=this.shape[0],w=this.stride[0],u=this.offset,S=0,_=Math.ceil;return"number"==typeof d&&((S=0|d)<0?(u+=w*(m-1),m=_(-m/S)):m=_(m/S),w*=S),new g(this.data,m,w,u)},y.transpose=function(d){return new g(this.data,this.shape[d=void 0===d?0:0|d],this.stride[d],this.offset)},y.pick=function(d){var m=[],w=[],u=this.offset;return"number"==typeof d&&d>=0?u=u+this.stride[0]*d|0:(m.push(this.shape[0]),w.push(this.stride[0])),(0,b[m.length+1])(this.data,m,w,u)},function(d,m,w,u){return new g(d,m[0],w[0],u)}},2:function(f,b,v){function g(d,m,w,u,S,_){this.data=d,this.shape=[m,w],this.stride=[u,S],this.offset=0|_}var y=g.prototype;return y.dtype=f,y.dimension=2,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(y,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),y.set=function(d,m,w){return"generic"===f?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*m,w):this.data[this.offset+this.stride[0]*d+this.stride[1]*m]=w},y.get=function(d,m){return"generic"===f?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*m):this.data[this.offset+this.stride[0]*d+this.stride[1]*m]},y.index=function(d,m){return this.offset+this.stride[0]*d+this.stride[1]*m},y.hi=function(d,m){return new g(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof m||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},y.lo=function(d,m){var w=this.offset,u=0,S=this.shape[0],_=this.shape[1],E=this.stride[0],L=this.stride[1];return"number"==typeof d&&d>=0&&(w+=E*(u=0|d),S-=u),"number"==typeof m&&m>=0&&(w+=L*(u=0|m),_-=u),new g(this.data,S,_,E,L,w)},y.step=function(d,m){var w=this.shape[0],u=this.shape[1],S=this.stride[0],_=this.stride[1],E=this.offset,L=0,C=Math.ceil;return"number"==typeof d&&((L=0|d)<0?(E+=S*(w-1),w=C(-w/L)):w=C(w/L),S*=L),"number"==typeof m&&((L=0|m)<0?(E+=_*(u-1),u=C(-u/L)):u=C(u/L),_*=L),new g(this.data,w,u,S,_,E)},y.transpose=function(d,m){var w=this.shape,u=this.stride;return new g(this.data,w[d=void 0===d?0:0|d],w[m=void 0===m?1:0|m],u[d],u[m],this.offset)},y.pick=function(d,m){var w=[],u=[],S=this.offset;return"number"==typeof d&&d>=0?S=S+this.stride[0]*d|0:(w.push(this.shape[0]),u.push(this.stride[0])),"number"==typeof m&&m>=0?S=S+this.stride[1]*m|0:(w.push(this.shape[1]),u.push(this.stride[1])),(0,b[w.length+1])(this.data,w,u,S)},function(d,m,w,u){return new g(d,m[0],m[1],w[0],w[1],u)}},3:function(f,b,v){function g(d,m,w,u,S,_,E,L){this.data=d,this.shape=[m,w,u],this.stride=[S,_,E],this.offset=0|L}var y=g.prototype;return y.dtype=f,y.dimension=3,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(y,"order",{get:function(){var d=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return d>m?m>w?[2,1,0]:d>w?[1,2,0]:[1,0,2]:d>w?[2,0,1]:w>m?[0,1,2]:[0,2,1]}}),y.set=function(d,m,w,u){return"generic"===f?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w,u):this.data[this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w]=u},y.get=function(d,m,w){return"generic"===f?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w):this.data[this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w]},y.index=function(d,m,w){return this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w},y.hi=function(d,m,w){return new g(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof m||m<0?this.shape[1]:0|m,"number"!=typeof w||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},y.lo=function(d,m,w){var u=this.offset,S=0,_=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.stride[0],P=this.stride[1],z=this.stride[2];return"number"==typeof d&&d>=0&&(u+=C*(S=0|d),_-=S),"number"==typeof m&&m>=0&&(u+=P*(S=0|m),E-=S),"number"==typeof w&&w>=0&&(u+=z*(S=0|w),L-=S),new g(this.data,_,E,L,C,P,z,u)},y.step=function(d,m,w){var u=this.shape[0],S=this.shape[1],_=this.shape[2],E=this.stride[0],L=this.stride[1],C=this.stride[2],P=this.offset,z=0,j=Math.ceil;return"number"==typeof d&&((z=0|d)<0?(P+=E*(u-1),u=j(-u/z)):u=j(u/z),E*=z),"number"==typeof m&&((z=0|m)<0?(P+=L*(S-1),S=j(-S/z)):S=j(S/z),L*=z),"number"==typeof w&&((z=0|w)<0?(P+=C*(_-1),_=j(-_/z)):_=j(_/z),C*=z),new g(this.data,u,S,_,E,L,C,P)},y.transpose=function(d,m,w){var u=this.shape,S=this.stride;return new g(this.data,u[d=void 0===d?0:0|d],u[m=void 0===m?1:0|m],u[w=void 0===w?2:0|w],S[d],S[m],S[w],this.offset)},y.pick=function(d,m,w){var u=[],S=[],_=this.offset;return"number"==typeof d&&d>=0?_=_+this.stride[0]*d|0:(u.push(this.shape[0]),S.push(this.stride[0])),"number"==typeof m&&m>=0?_=_+this.stride[1]*m|0:(u.push(this.shape[1]),S.push(this.stride[1])),"number"==typeof w&&w>=0?_=_+this.stride[2]*w|0:(u.push(this.shape[2]),S.push(this.stride[2])),(0,b[u.length+1])(this.data,u,S,_)},function(d,m,w,u){return new g(d,m[0],m[1],m[2],w[0],w[1],w[2],u)}},4:function(f,b,v){function g(d,m,w,u,S,_,E,L,C,P){this.data=d,this.shape=[m,w,u,S],this.stride=[_,E,L,C],this.offset=0|P}var y=g.prototype;return y.dtype=f,y.dimension=4,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(d,m,w,u,S){return"generic"===f?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u,S):this.data[this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]=S},y.get=function(d,m,w,u){return"generic"===f?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u):this.data[this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u]},y.index=function(d,m,w,u){return this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u},y.hi=function(d,m,w,u){return new g(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof m||m<0?this.shape[1]:0|m,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof u||u<0?this.shape[3]:0|u,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},y.lo=function(d,m,w,u){var S=this.offset,_=0,E=this.shape[0],L=this.shape[1],C=this.shape[2],P=this.shape[3],z=this.stride[0],j=this.stride[1],R=this.stride[2],V=this.stride[3];return"number"==typeof d&&d>=0&&(S+=z*(_=0|d),E-=_),"number"==typeof m&&m>=0&&(S+=j*(_=0|m),L-=_),"number"==typeof w&&w>=0&&(S+=R*(_=0|w),C-=_),"number"==typeof u&&u>=0&&(S+=V*(_=0|u),P-=_),new g(this.data,E,L,C,P,z,j,R,V,S)},y.step=function(d,m,w,u){var S=this.shape[0],_=this.shape[1],E=this.shape[2],L=this.shape[3],C=this.stride[0],P=this.stride[1],z=this.stride[2],j=this.stride[3],R=this.offset,V=0,D=Math.ceil;return"number"==typeof d&&((V=0|d)<0?(R+=C*(S-1),S=D(-S/V)):S=D(S/V),C*=V),"number"==typeof m&&((V=0|m)<0?(R+=P*(_-1),_=D(-_/V)):_=D(_/V),P*=V),"number"==typeof w&&((V=0|w)<0?(R+=z*(E-1),E=D(-E/V)):E=D(E/V),z*=V),"number"==typeof u&&((V=0|u)<0?(R+=j*(L-1),L=D(-L/V)):L=D(L/V),j*=V),new g(this.data,S,_,E,L,C,P,z,j,R)},y.transpose=function(d,m,w,u){var S=this.shape,_=this.stride;return new g(this.data,S[d=void 0===d?0:0|d],S[m=void 0===m?1:0|m],S[w=void 0===w?2:0|w],S[u=void 0===u?3:0|u],_[d],_[m],_[w],_[u],this.offset)},y.pick=function(d,m,w,u){var S=[],_=[],E=this.offset;return"number"==typeof d&&d>=0?E=E+this.stride[0]*d|0:(S.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof m&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),_.push(this.stride[1])),"number"==typeof w&&w>=0?E=E+this.stride[2]*w|0:(S.push(this.shape[2]),_.push(this.stride[2])),"number"==typeof u&&u>=0?E=E+this.stride[3]*u|0:(S.push(this.shape[3]),_.push(this.stride[3])),(0,b[S.length+1])(this.data,S,_,E)},function(d,m,w,u){return new g(d,m[0],m[1],m[2],m[3],w[0],w[1],w[2],w[3],u)}},5:function(f,b,v){function g(d,m,w,u,S,_,E,L,C,P,z,j){this.data=d,this.shape=[m,w,u,S,_],this.stride=[E,L,C,P,z],this.offset=0|j}var y=g.prototype;return y.dtype=f,y.dimension=5,Object.defineProperty(y,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(y,"order",{get:v}),y.set=function(d,m,w,u,S,_){return"generic"===f?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S,_):this.data[this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]=_},y.get=function(d,m,w,u,S){return"generic"===f?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S):this.data[this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S]},y.index=function(d,m,w,u,S){return this.offset+this.stride[0]*d+this.stride[1]*m+this.stride[2]*w+this.stride[3]*u+this.stride[4]*S},y.hi=function(d,m,w,u,S){return new g(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof m||m<0?this.shape[1]:0|m,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof u||u<0?this.shape[3]:0|u,"number"!=typeof S||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},y.lo=function(d,m,w,u,S){var _=this.offset,E=0,L=this.shape[0],C=this.shape[1],P=this.shape[2],z=this.shape[3],j=this.shape[4],R=this.stride[0],V=this.stride[1],D=this.stride[2],B=this.stride[3],N=this.stride[4];return"number"==typeof d&&d>=0&&(_+=R*(E=0|d),L-=E),"number"==typeof m&&m>=0&&(_+=V*(E=0|m),C-=E),"number"==typeof w&&w>=0&&(_+=D*(E=0|w),P-=E),"number"==typeof u&&u>=0&&(_+=B*(E=0|u),z-=E),"number"==typeof S&&S>=0&&(_+=N*(E=0|S),j-=E),new g(this.data,L,C,P,z,j,R,V,D,B,N,_)},y.step=function(d,m,w,u,S){var _=this.shape[0],E=this.shape[1],L=this.shape[2],C=this.shape[3],P=this.shape[4],z=this.stride[0],j=this.stride[1],R=this.stride[2],V=this.stride[3],D=this.stride[4],B=this.offset,N=0,U=Math.ceil;return"number"==typeof d&&((N=0|d)<0?(B+=z*(_-1),_=U(-_/N)):_=U(_/N),z*=N),"number"==typeof m&&((N=0|m)<0?(B+=j*(E-1),E=U(-E/N)):E=U(E/N),j*=N),"number"==typeof w&&((N=0|w)<0?(B+=R*(L-1),L=U(-L/N)):L=U(L/N),R*=N),"number"==typeof u&&((N=0|u)<0?(B+=V*(C-1),C=U(-C/N)):C=U(C/N),V*=N),"number"==typeof S&&((N=0|S)<0?(B+=D*(P-1),P=U(-P/N)):P=U(P/N),D*=N),new g(this.data,_,E,L,C,P,z,j,R,V,D,B)},y.transpose=function(d,m,w,u,S){var _=this.shape,E=this.stride;return new g(this.data,_[d=void 0===d?0:0|d],_[m=void 0===m?1:0|m],_[w=void 0===w?2:0|w],_[u=void 0===u?3:0|u],_[S=void 0===S?4:0|S],E[d],E[m],E[w],E[u],E[S],this.offset)},y.pick=function(d,m,w,u,S){var _=[],E=[],L=this.offset;return"number"==typeof d&&d>=0?L=L+this.stride[0]*d|0:(_.push(this.shape[0]),E.push(this.stride[0])),"number"==typeof m&&m>=0?L=L+this.stride[1]*m|0:(_.push(this.shape[1]),E.push(this.stride[1])),"number"==typeof w&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),E.push(this.stride[2])),"number"==typeof u&&u>=0?L=L+this.stride[3]*u|0:(_.push(this.shape[3]),E.push(this.stride[3])),"number"==typeof S&&S>=0?L=L+this.stride[4]*S|0:(_.push(this.shape[4]),E.push(this.stride[4])),(0,b[_.length+1])(this.data,_,E,L)},function(d,m,w,u){return new g(d,m[0],m[1],m[2],m[3],m[4],w[0],w[1],w[2],w[3],w[4],u)}}};function c(f,b){var v=-1===b?"T":String(b),g=i[v];return-1===b?g(f):0===b?g(f,h[f][0]):g(f,h[f],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};p.exports=function(f,b,v,g){if(void 0===f)return(0,h.array[0])([]);"number"==typeof f&&(f=[f]),void 0===b&&(b=[f.length]);var y=b.length;if(void 0===v){v=new Array(y);for(var d=y-1,m=1;d>=0;--d)v[d]=m,m*=b[d]}if(void 0===g)for(g=0,d=0;d<y;++d)v[d]<0&&(g-=(b[d]-1)*v[d]);for(var w=function(S){if(o(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(f),u=h[w];u.length<=y+1;)u.push(c(w,u.length-1));return(0,u[y+1])(f,b,v,g)}},8551:function(p,s,e){"use strict";var o=e(8362),r=Math.pow(2,-1074),n=-1>>>0;p.exports=function(a,i){if(isNaN(a)||isNaN(i))return NaN;if(a===i)return a;if(0===a)return i<0?-r:r;var c=o.hi(a),h=o.lo(a);return i>a==a>0?h===n?(c+=1,h=0):h+=1:0===h?(h=n,c-=1):h-=1,o.pack(h,c)}},115:function(p,s){s.vertexNormals=function(e,o,r){for(var n=o.length,a=new Array(n),i=void 0===r?1e-6:r,c=0;c<n;++c)a[c]=[0,0,0];for(c=0;c<e.length;++c)for(var h=e[c],b=h[h.length-1],v=h[0],g=0;g<h.length;++g){for(var y=o[b],d=o[b=v],m=o[v=h[(g+1)%h.length]],w=new Array(3),u=0,S=new Array(3),_=0,E=0;E<3;++E)w[E]=y[E]-d[E],u+=w[E]*w[E],S[E]=m[E]-d[E],_+=S[E]*S[E];if(u*_>i){var L=a[b],C=1/Math.sqrt(u*_);for(E=0;E<3;++E){var P=(E+1)%3,z=(E+2)%3;L[E]+=C*(S[P]*w[z]-S[z]*w[P])}}}for(c=0;c<n;++c){L=a[c];var j=0;for(E=0;E<3;++E)j+=L[E]*L[E];if(j>i)for(C=1/Math.sqrt(j),E=0;E<3;++E)L[E]*=C;else for(E=0;E<3;++E)L[E]=0}return a},s.faceNormals=function(e,o,r){for(var n=e.length,a=new Array(n),i=void 0===r?1e-6:r,c=0;c<n;++c){for(var h=e[c],f=new Array(3),b=0;b<3;++b)f[b]=o[h[b]];var v=new Array(3),g=new Array(3);for(b=0;b<3;++b)v[b]=f[1][b]-f[0][b],g[b]=f[2][b]-f[0][b];var y=new Array(3),d=0;for(b=0;b<3;++b){var m=(b+1)%3,w=(b+2)%3;y[b]=v[m]*g[w]-v[w]*g[m],d+=y[b]*y[b]}for(d=d>i?1/Math.sqrt(d):0,b=0;b<3;++b)y[b]*=d;a[c]=y}return a}},567:function(p){"use strict";p.exports=function(s,e,o,r,n,a,i,c,h,f){var b=e+a+f;if(v>0){var v=Math.sqrt(b+1);s[0]=.5*(i-h)/v,s[1]=.5*(c-r)/v,s[2]=.5*(o-a)/v,s[3]=.5*v}else{var g=Math.max(e,a,f);v=Math.sqrt(2*g-b+1),e>=g?(s[0]=.5*v,s[1]=.5*(n+o)/v,s[2]=.5*(c+r)/v,s[3]=.5*(i-h)/v):a>=g?(s[0]=.5*(o+n)/v,s[1]=.5*v,s[2]=.5*(h+i)/v,s[3]=.5*(c-r)/v):(s[0]=.5*(r+c)/v,s[1]=.5*(i+h)/v,s[2]=.5*v,s[3]=.5*(o-n)/v)}return s}},7774:function(p,s,e){"use strict";p.exports=function(g){var y=(g=g||{}).center||[0,0,0],d=g.rotation||[0,0,0,1],m=g.radius||1;y=[].slice.call(y,0,3),f(d=[].slice.call(d,0,4),d);var w=new b(d,y,Math.log(m));return w.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&w.lookAt(0,g.eye,g.center,g.up),w};var o=e(8444),r=e(3012),n=e(5950),a=e(7437),i=e(567);function c(g,y,d){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(d,2))}function h(g,y,d,m){return Math.sqrt(Math.pow(g,2)+Math.pow(y,2)+Math.pow(d,2)+Math.pow(m,2))}function f(g,y){var d=y[0],m=y[1],w=y[2],u=y[3],S=h(d,m,w,u);S>1e-6?(g[0]=d/S,g[1]=m/S,g[2]=w/S,g[3]=u/S):(g[0]=g[1]=g[2]=0,g[3]=1)}function b(g,y,d){this.radius=o([d]),this.center=o(y),this.rotation=o(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var v=b.prototype;v.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},v.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var y=this.computedRotation;f(y,y);var d=this.computedMatrix;n(d,y);var m=this.computedCenter,w=this.computedEye,u=this.computedUp,S=Math.exp(this.computedRadius[0]);w[0]=m[0]+S*d[2],w[1]=m[1]+S*d[6],w[2]=m[2]+S*d[10],u[0]=d[1],u[1]=d[5],u[2]=d[9];for(var _=0;_<3;++_){for(var E=0,L=0;L<3;++L)E+=d[_+4*L]*w[L];d[12+_]=-E}},v.getMatrix=function(g,y){this.recalcMatrix(g);var d=this.computedMatrix;if(y){for(var m=0;m<16;++m)y[m]=d[m];return y}return d},v.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},v.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},v.pan=function(g,y,d,m){y=y||0,d=d||0,m=m||0,this.recalcMatrix(g);var w=this.computedMatrix,u=w[1],S=w[5],_=w[9],E=c(u,S,_),L=w[0],C=w[4],P=w[8],z=L*(u/=E)+C*(S/=E)+P*(_/=E),j=c(L-=u*z,C-=S*z,P-=_*z),R=w[2],V=w[6],D=w[10],B=R*u+V*S+D*_,N=R*(L/=j)+V*(C/=j)+D*(P/=j),U=c(R-=B*u+N*L,V-=B*S+N*C,D-=B*_+N*P);R/=U,V/=U,D/=U,this.center.move(g,L*y+u*d,C*y+S*d,P*y+_*d);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+m),this.radius.set(g,Math.log(H))},v.rotate=function(g,y,d,m){this.recalcMatrix(g);var w=this.computedMatrix,P=w[2],z=w[6],j=w[10],R=(y=y||0)*w[0]+(d=d||0)*w[1],V=y*w[4]+d*w[5],D=y*w[8]+d*w[9],B=-(z*D-j*V),N=-(j*R-P*D),U=-(P*V-z*R),J=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(N,2)-Math.pow(U,2))),Y=h(B,N,U,J);Y>1e-6?(B/=Y,N/=Y,U/=Y,J/=Y):(B=N=U=0,J=1);var q=this.computedRotation,H=q[0],X=q[1],Q=q[2],ne=q[3],re=H*J+ne*B+X*U-Q*N,ae=X*J+ne*N+Q*B-H*U,se=Q*J+ne*U+H*N-X*B,pe=ne*J-H*B-X*N-Q*U;if(m){B=P,N=z,U=j;var ke=Math.sin(m)/c(B,N,U);B*=ke,N*=ke,U*=ke,pe=pe*(J=Math.cos(y))-(re=re*J+pe*B+ae*U-se*N)*B-(ae=ae*J+pe*N+se*B-re*U)*N-(se=se*J+pe*U+re*N-ae*B)*U}var me=h(re,ae,se,pe);me>1e-6?(re/=me,ae/=me,se/=me,pe/=me):(re=ae=se=0,pe=1),this.rotation.set(g,re,ae,se,pe)},v.lookAt=function(g,y,d,m){this.recalcMatrix(g);var w=this.computedMatrix;r(w,y=y||this.computedEye,d=d||this.computedCenter,m=m||this.computedUp);var u=this.computedRotation;i(u,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),f(u,u),this.rotation.set(g,u[0],u[1],u[2],u[3]);for(var S=0,_=0;_<3;++_)S+=Math.pow(d[_]-y[_],2);this.radius.set(g,.5*Math.log(Math.max(S,1e-6))),this.center.set(g,d[0],d[1],d[2])},v.translate=function(g,y,d,m){this.center.move(g,y||0,d||0,m||0)},v.setMatrix=function(g,y){var d=this.computedRotation;i(d,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),f(d,d),this.rotation.set(g,d[0],d[1],d[2],d[3]);var m=this.computedMatrix;a(m,y);var w=m[15];if(Math.abs(w)>1e-6){var u=m[12]/w,S=m[13]/w,_=m[14]/w;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,u-m[2]*E,S-m[6]*E,_-m[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},v.setDistance=function(g,y){y>0&&this.radius.set(g,Math.log(y))},v.setDistanceLimits=function(g,y){g=g>0?Math.log(g):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=y},v.getDistanceLimits=function(g){var y=this.radius.bounds;return g?(g[0]=Math.exp(y[0][0]),g[1]=Math.exp(y[1][0]),g):[Math.exp(y[0][0]),Math.exp(y[1][0])]},v.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},v.fromJSON=function(g){var y=this.lastT(),d=g.center;d&&this.center.set(y,d[0],d[1],d[2]);var m=g.rotation;m&&this.rotation.set(y,m[0],m[1],m[2],m[3]);var w=g.distance;w&&w>0&&this.radius.set(y,Math.log(w)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},4930:function(p,s,e){"use strict";var o=e(6184);p.exports=function(r,n,a){return o(a=void 0!==a?a+"":" ",n)+r}},4405:function(p){p.exports=function(s,e){e||(e=[0,""]),s=String(s);var o=parseFloat(s,10);return e[0]=o,e[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},4166:function(p,s,e){"use strict";p.exports=function(r,n){for(var a=0|n.length,i=r.length,c=[new Array(a),new Array(a)],h=0;h<a;++h)c[0][h]=[],c[1][h]=[];for(h=0;h<i;++h){var f=r[h];c[0][f[0]].push(f),c[1][f[1]].push(f)}var _,b=[];for(h=0;h<a;++h)c[0][h].length+c[1][h].length===0&&b.push([h]);function v(S,_){var E=c[_][S[_]];E.splice(E.indexOf(S),1)}function g(S,_,E){for(var L,C,P,z=0;z<2;++z)if(c[z][_].length>0){L=c[z][_][0],P=z;break}C=L[1^P];for(var j=0;j<2;++j)for(var R=c[j][_],V=0;V<R.length;++V){var D=R[V],B=D[1^j];o(n[S],n[_],n[C],n[B])>0&&(L=D,C=B,P=j)}return E||L&&v(L,P),C}function y(S,_){var E=c[_][S][0],L=[S];v(E,_);for(var C=E[1^_];;){for(;C!==S;)L.push(C),C=g(L[L.length-2],C,!1);if(c[0][S].length+c[1][S].length===0)break;var P=L[L.length-1],z=S,j=L[1],R=g(P,z,!0);if(o(n[P],n[z],n[j],n[R])<0)break;L.push(S),C=g(P,z)}return L}for(h=0;h<a;++h)for(var m=0;m<2;++m){for(var w=[];c[m][h].length>0;){var u=y(h,m);(_=u)[1]===_[_.length-1]?w.push.apply(w,u):(w.length>0&&b.push(w),w=u)}w.length>0&&b.push(w)}return b};var o=e(9398)},3959:function(p,s,e){"use strict";p.exports=function(r,n){for(var a=o(r,n.length),i=new Array(n.length),c=new Array(n.length),h=[],f=0;f<n.length;++f){var b=a[f].length;c[f]=b,i[f]=!0,b<=1&&h.push(f)}for(;h.length>0;){var v=h.pop();i[v]=!1;var g=a[v];for(f=0;f<g.length;++f){var y=g[f];0==--c[y]&&h.push(y)}}var d=new Array(n.length),m=[];for(f=0;f<n.length;++f)i[f]?(d[f]=v=m.length,m.push(n[f])):d[f]=-1;var w=[];for(f=0;f<r.length;++f){var u=r[f];i[u[0]]&&i[u[1]]&&w.push([d[u[0]],d[u[1]]])}return[w,m]};var o=e(8348)},8040:function(p,s,e){"use strict";p.exports=function(b,v){for(var g=h(b,v),y=(v=g[1]).length,d=o(b=g[0],v.length),m=0;m<y;++m)if(d[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=r(b,v),u=(w=w.filter(function(Ee){for(var de=Ee.length,xe=[0],Te=0;Te<de;++Te){var we=v[Ee[Te]],K=v[Ee[(Te+1)%de]],oe=a(-we[0],we[1]),he=a(-we[0],K[1]),ye=a(K[0],we[1]),Me=a(K[0],K[1]);xe=i(xe,i(i(oe,he),i(ye,Me)))}return xe[xe.length-1]>0})).length,S=new Array(u),_=new Array(u);for(m=0;m<u;++m){S[m]=m;var E=new Array(u),L=w[m].map(function(Ee){return v[Ee]}),C=n([L]),P=0;e:for(var z=0;z<u;++z)if(E[z]=0,m!==z){for(var j=(le=w[z]).length,R=0;R<j;++R){var V=C(v[le[R]]);if(0!==V){V<0&&(E[z]=1,P+=1);continue e}}E[z]=1,P+=1}_[m]=[P,m,E]}for(_.sort(function(Ee,de){return de[0]-Ee[0]}),m=0;m<u;++m){var D=(E=_[m])[1],B=E[2];for(z=0;z<u;++z)B[z]&&(S[z]=D)}var N=function(Ee){for(var de=new Array(Ee),xe=0;xe<Ee;++xe)de[xe]=[];return de}(u);for(m=0;m<u;++m)N[m].push(S[m]),N[S[m]].push(m);var U={},J=f(y,!1);for(m=0;m<u;++m)for(j=(le=w[m]).length,z=0;z<j;++z){var Y=le[z],q=le[(z+1)%j],H=Math.min(Y,q)+":"+Math.max(Y,q);if(H in U){var X=U[H];N[X].push(m),N[m].push(X),J[Y]=J[q]=!0}else U[H]=m}function Q(Ee){for(var de=Ee.length,xe=0;xe<de;++xe)if(!J[Ee[xe]])return!1;return!0}var ne=[],re=f(u,-1);for(m=0;m<u;++m)S[m]!==m||Q(w[m])?re[m]=-1:(ne.push(m),re[m]=0);for(g=[];ne.length>0;){var ae=ne.pop(),se=N[ae];c(se,function(Ee,de){return Ee-de});var pe,ke=se.length,me=re[ae];if(0===me){var le=w[ae];pe=[le]}for(m=0;m<ke;++m){var ue=se[m];re[ue]>=0||(re[ue]=1^me,ne.push(ue),0===me&&(Q(le=w[ue])||(le.reverse(),pe.push(le))))}0===me&&g.push(pe)}return g};var o=e(8348),r=e(4166),n=e(211),a=e(9660),i=e(9662),c=e(1215),h=e(3959);function f(b,v){for(var g=new Array(b),y=0;y<b;++y)g[y]=v;return g}},211:function(p,s,e){p.exports=function(f){for(var b=f.length,v=[],g=[],y=0;y<b;++y)for(var d=f[y],m=d.length,w=m-1,u=0;u<m;w=u++){var S=d[w],_=d[u];S[0]===_[0]?g.push([S,_]):v.push([S,_])}if(0===v.length)return 0===g.length?h:(E=c(g),function(P){return E(P[0],P[1])?0:1});var E,P,z,L=r(v),C=(P=L.slabs,z=L.coordinates,function(j){var R=a.le(z,j[0]);if(R<0)return 1;var V=P[R];if(!V){if(!(R>0&&z[R]===j[0]))return 1;V=P[R-1]}for(var D=1;V;){var B=V.key,N=o(j,B[0],B[1]);if(B[0][0]<B[1][0])if(N<0)V=V.left;else{if(!(N>0))return 0;D=-1,V=V.right}else if(N>0)V=V.left;else{if(!(N<0))return 0;D=1,V=V.right}}return D});return 0===g.length?C:function(P,z){return function(j){return P(j[0],j[1])?0:z(j)}}(c(g),C)};var o=e(417)[3],r=e(4385),n=e(9014),a=e(5070);function i(){return!0}function c(f){for(var b={},v=0;v<f.length;++v){var g=f[v],y=g[0][0],d=g[0][1],m=g[1][1],w=[Math.min(d,m),Math.max(d,m)];y in b?b[y].push(w):b[y]=[w]}var E,u={},S=Object.keys(b);for(v=0;v<S.length;++v)u[S[v]]=n(b[S[v]]);return E=u,function(L,C){var P=E[L];return!!P&&!!P.queryPoint(C,i)}}function h(f){return 1}},7309:function(p){"use strict";var s=new Float64Array(4),e=new Float64Array(4),o=new Float64Array(4);p.exports=function(r,n,a,i,c){s.length<i.length&&(s=new Float64Array(i.length),e=new Float64Array(i.length),o=new Float64Array(i.length));for(var h=0;h<i.length;++h)s[h]=r[h]-i[h],e[h]=n[h]-r[h],o[h]=a[h]-r[h];var f=0,b=0,v=0,g=0,y=0,d=0;for(h=0;h<i.length;++h){var m=e[h],w=o[h],u=s[h];f+=m*m,b+=m*w,v+=w*w,g+=u*m,y+=u*w,d+=u*u}var S,_,E,L,C,P=Math.abs(f*v-b*b),z=b*y-v*g,j=b*g-f*y;if(z+j<=P)if(z<0)j<0&&g<0?(j=0,-g>=f?(z=1,S=f+2*g+d):S=g*(z=-g/f)+d):(z=0,y>=0?(j=0,S=d):-y>=v?(j=1,S=v+2*y+d):S=y*(j=-y/v)+d);else if(j<0)j=0,g>=0?(z=0,S=d):-g>=f?(z=1,S=f+2*g+d):S=g*(z=-g/f)+d;else{var R=1/P;S=(z*=R)*(f*z+b*(j*=R)+2*g)+j*(b*z+v*j+2*y)+d}else z<0?(E=v+y)>(_=b+g)?(L=E-_)>=(C=f-2*b+v)?(z=1,j=0,S=f+2*g+d):S=(z=L/C)*(f*z+b*(j=1-z)+2*g)+j*(b*z+v*j+2*y)+d:(z=0,E<=0?(j=1,S=v+2*y+d):y>=0?(j=0,S=d):S=y*(j=-y/v)+d):j<0?(E=f+g)>(_=b+y)?(L=E-_)>=(C=f-2*b+v)?(j=1,z=0,S=v+2*y+d):S=(z=1-(j=L/C))*(f*z+b*j+2*g)+j*(b*z+v*j+2*y)+d:(j=0,E<=0?(z=1,S=f+2*g+d):g>=0?(z=0,S=d):S=g*(z=-g/f)+d):(L=v+y-b-g)<=0?(z=0,j=1,S=v+2*y+d):L>=(C=f-2*b+v)?(z=1,j=0,S=f+2*g+d):S=(z=L/C)*(f*z+b*(j=1-z)+2*g)+j*(b*z+v*j+2*y)+d;var V=1-z-j;for(h=0;h<i.length;++h)c[h]=V*r[h]+z*n[h]+j*a[h];return S<0?0:S}},1116:function(p,s,e){p.exports=e(6093)},7584:function(p,s,e){"use strict";var o=e(1539);p.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},2826:function(p,s,e){"use strict";p.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=o(r[a]);return n};var o=e(5125)},4469:function(p,s,e){"use strict";var o=e(5125),r=e(3962);p.exports=function(n,a){for(var i=o(a),c=n.length,h=new Array(c),f=0;f<c;++f)h[f]=r(n[f],i);return h}},6695:function(p,s,e){"use strict";var o=e(4354);p.exports=function(r,n){for(var a=r.length,i=new Array(a),c=0;c<a;++c)i[c]=o(r[c],n[c]);return i}},7037:function(p,s,e){"use strict";var o=e(9209),r=e(1284),n=e(9887);p.exports=function(a){a.sort(r);for(var i=a.length,c=0,h=0;h<i;++h){var f=a[h],b=n(f);if(0!==b){if(c>0){var v=a[c-1];if(0===o(f,v)&&n(v)!==b){c-=1;continue}}a[c++]=f}}return a.length=c,a}},6184:function(p){"use strict";var s,e="";p.exports=function(o,r){if("string"!=typeof o)throw new TypeError("expected a string");if(1===r)return o;if(2===r)return o+o;var n=o.length*r;if(s!==o||void 0===s)s=o,e="";else if(e.length>=n)return e.substr(0,n);for(;n>e.length&&r>1;)1&r&&(e+=o),r>>=1,o+=o;return e=(e+=o).substr(0,n)}},8161:function(p,s,e){p.exports=e.g.performance&&e.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(p){"use strict";p.exports=function(s){for(var e=s.length,o=s[s.length-1],r=e,n=e-2;n>=0;--n){var a=o,i=s[n];(h=i-((o=a+i)-a))&&(s[--r]=o,o=h)}var c=0;for(n=r;n<e;++n){var h;(h=(i=o)-((o=(a=s[n])+i)-a))&&(s[c++]=h)}return s[c++]=o,s.length=c,s}},8167:function(p,s,e){"use strict";var o=e(9660),r=e(9662),n=e(8289),a=e(402);function i(y,d,m,w){return function(u){return w(y(m(u[0][0],u[1][1]),m(-u[0][1],u[1][0])))}}function c(y,d,m,w){return function(u){return w(y(d(y(m(u[1][1],u[2][2]),m(-u[1][2],u[2][1])),u[0][0]),y(d(y(m(u[1][0],u[2][2]),m(-u[1][2],u[2][0])),-u[0][1]),d(y(m(u[1][0],u[2][1]),m(-u[1][1],u[2][0])),u[0][2]))))}}function h(y,d,m,w){return function(u){return w(y(y(d(y(d(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][1]),y(d(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),-u[1][2]),d(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),d(y(d(y(m(u[2][2],u[3][3]),m(-u[2][3],u[3][2])),u[1][0]),y(d(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][2]),d(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),y(d(y(d(y(m(u[2][1],u[3][3]),m(-u[2][3],u[3][1])),u[1][0]),y(d(y(m(u[2][0],u[3][3]),m(-u[2][3],u[3][0])),-u[1][1]),d(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),d(y(d(y(m(u[2][1],u[3][2]),m(-u[2][2],u[3][1])),u[1][0]),y(d(y(m(u[2][0],u[3][2]),m(-u[2][2],u[3][0])),-u[1][1]),d(y(m(u[2][0],u[3][1]),m(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function f(y,d,m,w){return function(u){return w(y(y(d(y(y(d(y(d(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(d(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),d(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),d(y(d(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(d(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),d(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),y(d(y(d(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(d(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),d(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),d(y(d(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(d(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),d(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),d(y(y(d(y(d(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][2]),y(d(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),-u[2][3]),d(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),d(y(d(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(d(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),d(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),y(d(y(d(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(d(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),d(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),d(y(d(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(d(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),d(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),y(d(y(y(d(y(d(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][1]),y(d(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][3]),d(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),d(y(d(y(m(u[3][3],u[4][4]),m(-u[3][4],u[4][3])),u[2][0]),y(d(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][3]),d(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),y(d(y(d(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(d(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),d(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),d(y(d(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(d(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),d(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),y(d(y(y(d(y(d(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][1]),y(d(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),-u[2][2]),d(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),d(y(d(y(m(u[3][2],u[4][4]),m(-u[3][4],u[4][2])),u[2][0]),y(d(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][2]),d(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),y(d(y(d(y(m(u[3][1],u[4][4]),m(-u[3][4],u[4][1])),u[2][0]),y(d(y(m(u[3][0],u[4][4]),m(-u[3][4],u[4][0])),-u[2][1]),d(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),d(y(d(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(d(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),d(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),d(y(y(d(y(d(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][1]),y(d(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),-u[2][2]),d(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),d(y(d(y(m(u[3][2],u[4][3]),m(-u[3][3],u[4][2])),u[2][0]),y(d(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][2]),d(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),y(d(y(d(y(m(u[3][1],u[4][3]),m(-u[3][3],u[4][1])),u[2][0]),y(d(y(m(u[3][0],u[4][3]),m(-u[3][3],u[4][0])),-u[2][1]),d(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),d(y(d(y(m(u[3][1],u[4][2]),m(-u[3][2],u[4][1])),u[2][0]),y(d(y(m(u[3][0],u[4][2]),m(-u[3][2],u[4][0])),-u[2][1]),d(y(m(u[3][0],u[4][1]),m(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function b(y){return(2===y?i:3===y?c:4===y?h:5===y?f:void 0)(r,n,o,a)}var v=[function(){return[0]},function(y){return[y[0][0]]}];function g(y,d,m,w,u,S,_,E){return function(L){switch(L.length){case 0:return y(L);case 1:return d(L);case 2:return m(L);case 3:return w(L);case 4:return u(L);case 5:return S(L)}var C=_[L.length];return C||(C=_[L.length]=E(L.length)),C(L)}}!function(){for(;v.length<6;)v.push(b(v.length));p.exports=g.apply(void 0,v.concat([v,b]));for(var y=0;y<v.length;++y)p.exports[y]=v[y]}()},9130:function(p,s,e){"use strict";var o=e(9660),r=e(9662);p.exports=function(n,a){for(var i=o(n[0],a[0]),c=1;c<n.length;++c)i=r(i,o(n[c],a[c]));return i}},2227:function(p,s,e){"use strict";var o=e(9660),r=e(9662),n=e(4078),a=e(8289);function i(d){return(3===d?c:4===d?h:5===d?f:b)(r,n,o,a)}function c(d,m,w,u){return function(S,_,E){var L=w(S[0],S[0]),C=u(L,_[0]),P=u(L,E[0]),z=w(_[0],_[0]),j=u(z,S[0]),R=u(z,E[0]),V=w(E[0],E[0]),D=u(V,S[0]),B=u(V,_[0]),N=d(m(B,R),m(j,C)),U=m(D,P),J=m(N,U);return J[J.length-1]}}function h(d,m,w,u){return function(S,_,E,L){var C=d(w(S[0],S[0]),w(S[1],S[1])),P=u(C,_[0]),z=u(C,E[0]),j=u(C,L[0]),R=d(w(_[0],_[0]),w(_[1],_[1])),V=u(R,S[0]),D=u(R,E[0]),B=u(R,L[0]),N=d(w(E[0],E[0]),w(E[1],E[1])),U=u(N,S[0]),J=u(N,_[0]),Y=u(N,L[0]),q=d(w(L[0],L[0]),w(L[1],L[1])),H=u(q,S[0]),X=u(q,_[0]),Q=u(q,E[0]),ne=d(d(u(m(Q,Y),_[1]),d(u(m(X,B),-E[1]),u(m(J,D),L[1]))),d(u(m(X,B),S[1]),d(u(m(H,j),-_[1]),u(m(V,P),L[1])))),re=d(d(u(m(Q,Y),S[1]),d(u(m(H,j),-E[1]),u(m(U,z),L[1]))),d(u(m(J,D),S[1]),d(u(m(U,z),-_[1]),u(m(V,P),E[1])))),ae=m(ne,re);return ae[ae.length-1]}}function f(d,m,w,u){return function(S,_,E,L,C){var P=d(w(S[0],S[0]),d(w(S[1],S[1]),w(S[2],S[2]))),z=u(P,_[0]),j=u(P,E[0]),R=u(P,L[0]),V=u(P,C[0]),D=d(w(_[0],_[0]),d(w(_[1],_[1]),w(_[2],_[2]))),B=u(D,S[0]),N=u(D,E[0]),U=u(D,L[0]),J=u(D,C[0]),Y=d(w(E[0],E[0]),d(w(E[1],E[1]),w(E[2],E[2]))),q=u(Y,S[0]),H=u(Y,_[0]),X=u(Y,L[0]),Q=u(Y,C[0]),ne=d(w(L[0],L[0]),d(w(L[1],L[1]),w(L[2],L[2]))),re=u(ne,S[0]),ae=u(ne,_[0]),se=u(ne,E[0]),pe=u(ne,C[0]),ke=d(w(C[0],C[0]),d(w(C[1],C[1]),w(C[2],C[2]))),me=u(ke,S[0]),le=u(ke,_[0]),ue=u(ke,E[0]),Ee=u(ke,L[0]),de=d(d(d(u(d(u(m(Ee,pe),E[1]),d(u(m(ue,Q),-L[1]),u(m(se,X),C[1]))),_[2]),d(u(d(u(m(Ee,pe),_[1]),d(u(m(le,J),-L[1]),u(m(ae,U),C[1]))),-E[2]),u(d(u(m(ue,Q),_[1]),d(u(m(le,J),-E[1]),u(m(H,N),C[1]))),L[2]))),d(u(d(u(m(se,X),_[1]),d(u(m(ae,U),-E[1]),u(m(H,N),L[1]))),-C[2]),d(u(d(u(m(Ee,pe),_[1]),d(u(m(le,J),-L[1]),u(m(ae,U),C[1]))),S[2]),u(d(u(m(Ee,pe),S[1]),d(u(m(me,V),-L[1]),u(m(re,R),C[1]))),-_[2])))),d(d(u(d(u(m(le,J),S[1]),d(u(m(me,V),-_[1]),u(m(B,z),C[1]))),L[2]),d(u(d(u(m(ae,U),S[1]),d(u(m(re,R),-_[1]),u(m(B,z),L[1]))),-C[2]),u(d(u(m(se,X),_[1]),d(u(m(ae,U),-E[1]),u(m(H,N),L[1]))),S[2]))),d(u(d(u(m(se,X),S[1]),d(u(m(re,R),-E[1]),u(m(q,j),L[1]))),-_[2]),d(u(d(u(m(ae,U),S[1]),d(u(m(re,R),-_[1]),u(m(B,z),L[1]))),E[2]),u(d(u(m(H,N),S[1]),d(u(m(q,j),-_[1]),u(m(B,z),E[1]))),-L[2]))))),xe=d(d(d(u(d(u(m(Ee,pe),E[1]),d(u(m(ue,Q),-L[1]),u(m(se,X),C[1]))),S[2]),u(d(u(m(Ee,pe),S[1]),d(u(m(me,V),-L[1]),u(m(re,R),C[1]))),-E[2])),d(u(d(u(m(ue,Q),S[1]),d(u(m(me,V),-E[1]),u(m(q,j),C[1]))),L[2]),u(d(u(m(se,X),S[1]),d(u(m(re,R),-E[1]),u(m(q,j),L[1]))),-C[2]))),d(d(u(d(u(m(ue,Q),_[1]),d(u(m(le,J),-E[1]),u(m(H,N),C[1]))),S[2]),u(d(u(m(ue,Q),S[1]),d(u(m(me,V),-E[1]),u(m(q,j),C[1]))),-_[2])),d(u(d(u(m(le,J),S[1]),d(u(m(me,V),-_[1]),u(m(B,z),C[1]))),E[2]),u(d(u(m(H,N),S[1]),d(u(m(q,j),-_[1]),u(m(B,z),E[1]))),-C[2])))),Te=m(de,xe);return Te[Te.length-1]}}function b(d,m,w,u){return function(S,_,E,L,C,P){var z=d(d(w(S[0],S[0]),w(S[1],S[1])),d(w(S[2],S[2]),w(S[3],S[3]))),j=u(z,_[0]),R=u(z,E[0]),V=u(z,L[0]),D=u(z,C[0]),B=u(z,P[0]),N=d(d(w(_[0],_[0]),w(_[1],_[1])),d(w(_[2],_[2]),w(_[3],_[3]))),U=u(N,S[0]),J=u(N,E[0]),Y=u(N,L[0]),q=u(N,C[0]),H=u(N,P[0]),X=d(d(w(E[0],E[0]),w(E[1],E[1])),d(w(E[2],E[2]),w(E[3],E[3]))),Q=u(X,S[0]),ne=u(X,_[0]),re=u(X,L[0]),ae=u(X,C[0]),se=u(X,P[0]),pe=d(d(w(L[0],L[0]),w(L[1],L[1])),d(w(L[2],L[2]),w(L[3],L[3]))),ke=u(pe,S[0]),me=u(pe,_[0]),le=u(pe,E[0]),ue=u(pe,C[0]),Ee=u(pe,P[0]),de=d(d(w(C[0],C[0]),w(C[1],C[1])),d(w(C[2],C[2]),w(C[3],C[3]))),xe=u(de,S[0]),Te=u(de,_[0]),we=u(de,E[0]),K=u(de,L[0]),oe=u(de,P[0]),he=d(d(w(P[0],P[0]),w(P[1],P[1])),d(w(P[2],P[2]),w(P[3],P[3]))),ye=u(he,S[0]),Me=u(he,_[0]),Re=u(he,E[0]),Pe=u(he,L[0]),De=u(he,C[0]),fe=d(d(d(u(d(d(u(d(u(m(De,oe),L[1]),d(u(m(Pe,Ee),-C[1]),u(m(K,ue),P[1]))),E[2]),u(d(u(m(De,oe),E[1]),d(u(m(Re,se),-C[1]),u(m(we,ae),P[1]))),-L[2])),d(u(d(u(m(Pe,Ee),E[1]),d(u(m(Re,se),-L[1]),u(m(le,re),P[1]))),C[2]),u(d(u(m(K,ue),E[1]),d(u(m(we,ae),-L[1]),u(m(le,re),C[1]))),-P[2]))),_[3]),d(u(d(d(u(d(u(m(De,oe),L[1]),d(u(m(Pe,Ee),-C[1]),u(m(K,ue),P[1]))),_[2]),u(d(u(m(De,oe),_[1]),d(u(m(Me,H),-C[1]),u(m(Te,q),P[1]))),-L[2])),d(u(d(u(m(Pe,Ee),_[1]),d(u(m(Me,H),-L[1]),u(m(me,Y),P[1]))),C[2]),u(d(u(m(K,ue),_[1]),d(u(m(Te,q),-L[1]),u(m(me,Y),C[1]))),-P[2]))),-E[3]),u(d(d(u(d(u(m(De,oe),E[1]),d(u(m(Re,se),-C[1]),u(m(we,ae),P[1]))),_[2]),u(d(u(m(De,oe),_[1]),d(u(m(Me,H),-C[1]),u(m(Te,q),P[1]))),-E[2])),d(u(d(u(m(Re,se),_[1]),d(u(m(Me,H),-E[1]),u(m(ne,J),P[1]))),C[2]),u(d(u(m(we,ae),_[1]),d(u(m(Te,q),-E[1]),u(m(ne,J),C[1]))),-P[2]))),L[3]))),d(d(u(d(d(u(d(u(m(Pe,Ee),E[1]),d(u(m(Re,se),-L[1]),u(m(le,re),P[1]))),_[2]),u(d(u(m(Pe,Ee),_[1]),d(u(m(Me,H),-L[1]),u(m(me,Y),P[1]))),-E[2])),d(u(d(u(m(Re,se),_[1]),d(u(m(Me,H),-E[1]),u(m(ne,J),P[1]))),L[2]),u(d(u(m(le,re),_[1]),d(u(m(me,Y),-E[1]),u(m(ne,J),L[1]))),-P[2]))),-C[3]),u(d(d(u(d(u(m(K,ue),E[1]),d(u(m(we,ae),-L[1]),u(m(le,re),C[1]))),_[2]),u(d(u(m(K,ue),_[1]),d(u(m(Te,q),-L[1]),u(m(me,Y),C[1]))),-E[2])),d(u(d(u(m(we,ae),_[1]),d(u(m(Te,q),-E[1]),u(m(ne,J),C[1]))),L[2]),u(d(u(m(le,re),_[1]),d(u(m(me,Y),-E[1]),u(m(ne,J),L[1]))),-C[2]))),P[3])),d(u(d(d(u(d(u(m(De,oe),L[1]),d(u(m(Pe,Ee),-C[1]),u(m(K,ue),P[1]))),_[2]),u(d(u(m(De,oe),_[1]),d(u(m(Me,H),-C[1]),u(m(Te,q),P[1]))),-L[2])),d(u(d(u(m(Pe,Ee),_[1]),d(u(m(Me,H),-L[1]),u(m(me,Y),P[1]))),C[2]),u(d(u(m(K,ue),_[1]),d(u(m(Te,q),-L[1]),u(m(me,Y),C[1]))),-P[2]))),S[3]),u(d(d(u(d(u(m(De,oe),L[1]),d(u(m(Pe,Ee),-C[1]),u(m(K,ue),P[1]))),S[2]),u(d(u(m(De,oe),S[1]),d(u(m(ye,B),-C[1]),u(m(xe,D),P[1]))),-L[2])),d(u(d(u(m(Pe,Ee),S[1]),d(u(m(ye,B),-L[1]),u(m(ke,V),P[1]))),C[2]),u(d(u(m(K,ue),S[1]),d(u(m(xe,D),-L[1]),u(m(ke,V),C[1]))),-P[2]))),-_[3])))),d(d(d(u(d(d(u(d(u(m(De,oe),_[1]),d(u(m(Me,H),-C[1]),u(m(Te,q),P[1]))),S[2]),u(d(u(m(De,oe),S[1]),d(u(m(ye,B),-C[1]),u(m(xe,D),P[1]))),-_[2])),d(u(d(u(m(Me,H),S[1]),d(u(m(ye,B),-_[1]),u(m(U,j),P[1]))),C[2]),u(d(u(m(Te,q),S[1]),d(u(m(xe,D),-_[1]),u(m(U,j),C[1]))),-P[2]))),L[3]),u(d(d(u(d(u(m(Pe,Ee),_[1]),d(u(m(Me,H),-L[1]),u(m(me,Y),P[1]))),S[2]),u(d(u(m(Pe,Ee),S[1]),d(u(m(ye,B),-L[1]),u(m(ke,V),P[1]))),-_[2])),d(u(d(u(m(Me,H),S[1]),d(u(m(ye,B),-_[1]),u(m(U,j),P[1]))),L[2]),u(d(u(m(me,Y),S[1]),d(u(m(ke,V),-_[1]),u(m(U,j),L[1]))),-P[2]))),-C[3])),d(u(d(d(u(d(u(m(K,ue),_[1]),d(u(m(Te,q),-L[1]),u(m(me,Y),C[1]))),S[2]),u(d(u(m(K,ue),S[1]),d(u(m(xe,D),-L[1]),u(m(ke,V),C[1]))),-_[2])),d(u(d(u(m(Te,q),S[1]),d(u(m(xe,D),-_[1]),u(m(U,j),C[1]))),L[2]),u(d(u(m(me,Y),S[1]),d(u(m(ke,V),-_[1]),u(m(U,j),L[1]))),-C[2]))),P[3]),u(d(d(u(d(u(m(Pe,Ee),E[1]),d(u(m(Re,se),-L[1]),u(m(le,re),P[1]))),_[2]),u(d(u(m(Pe,Ee),_[1]),d(u(m(Me,H),-L[1]),u(m(me,Y),P[1]))),-E[2])),d(u(d(u(m(Re,se),_[1]),d(u(m(Me,H),-E[1]),u(m(ne,J),P[1]))),L[2]),u(d(u(m(le,re),_[1]),d(u(m(me,Y),-E[1]),u(m(ne,J),L[1]))),-P[2]))),S[3]))),d(d(u(d(d(u(d(u(m(Pe,Ee),E[1]),d(u(m(Re,se),-L[1]),u(m(le,re),P[1]))),S[2]),u(d(u(m(Pe,Ee),S[1]),d(u(m(ye,B),-L[1]),u(m(ke,V),P[1]))),-E[2])),d(u(d(u(m(Re,se),S[1]),d(u(m(ye,B),-E[1]),u(m(Q,R),P[1]))),L[2]),u(d(u(m(le,re),S[1]),d(u(m(ke,V),-E[1]),u(m(Q,R),L[1]))),-P[2]))),-_[3]),u(d(d(u(d(u(m(Pe,Ee),_[1]),d(u(m(Me,H),-L[1]),u(m(me,Y),P[1]))),S[2]),u(d(u(m(Pe,Ee),S[1]),d(u(m(ye,B),-L[1]),u(m(ke,V),P[1]))),-_[2])),d(u(d(u(m(Me,H),S[1]),d(u(m(ye,B),-_[1]),u(m(U,j),P[1]))),L[2]),u(d(u(m(me,Y),S[1]),d(u(m(ke,V),-_[1]),u(m(U,j),L[1]))),-P[2]))),E[3])),d(u(d(d(u(d(u(m(Re,se),_[1]),d(u(m(Me,H),-E[1]),u(m(ne,J),P[1]))),S[2]),u(d(u(m(Re,se),S[1]),d(u(m(ye,B),-E[1]),u(m(Q,R),P[1]))),-_[2])),d(u(d(u(m(Me,H),S[1]),d(u(m(ye,B),-_[1]),u(m(U,j),P[1]))),E[2]),u(d(u(m(ne,J),S[1]),d(u(m(Q,R),-_[1]),u(m(U,j),E[1]))),-P[2]))),-L[3]),u(d(d(u(d(u(m(le,re),_[1]),d(u(m(me,Y),-E[1]),u(m(ne,J),L[1]))),S[2]),u(d(u(m(le,re),S[1]),d(u(m(ke,V),-E[1]),u(m(Q,R),L[1]))),-_[2])),d(u(d(u(m(me,Y),S[1]),d(u(m(ke,V),-_[1]),u(m(U,j),L[1]))),E[2]),u(d(u(m(ne,J),S[1]),d(u(m(Q,R),-_[1]),u(m(U,j),E[1]))),-L[2]))),P[3]))))),ge=d(d(d(u(d(d(u(d(u(m(De,oe),L[1]),d(u(m(Pe,Ee),-C[1]),u(m(K,ue),P[1]))),E[2]),u(d(u(m(De,oe),E[1]),d(u(m(Re,se),-C[1]),u(m(we,ae),P[1]))),-L[2])),d(u(d(u(m(Pe,Ee),E[1]),d(u(m(Re,se),-L[1]),u(m(le,re),P[1]))),C[2]),u(d(u(m(K,ue),E[1]),d(u(m(we,ae),-L[1]),u(m(le,re),C[1]))),-P[2]))),S[3]),d(u(d(d(u(d(u(m(De,oe),L[1]),d(u(m(Pe,Ee),-C[1]),u(m(K,ue),P[1]))),S[2]),u(d(u(m(De,oe),S[1]),d(u(m(ye,B),-C[1]),u(m(xe,D),P[1]))),-L[2])),d(u(d(u(m(Pe,Ee),S[1]),d(u(m(ye,B),-L[1]),u(m(ke,V),P[1]))),C[2]),u(d(u(m(K,ue),S[1]),d(u(m(xe,D),-L[1]),u(m(ke,V),C[1]))),-P[2]))),-E[3]),u(d(d(u(d(u(m(De,oe),E[1]),d(u(m(Re,se),-C[1]),u(m(we,ae),P[1]))),S[2]),u(d(u(m(De,oe),S[1]),d(u(m(ye,B),-C[1]),u(m(xe,D),P[1]))),-E[2])),d(u(d(u(m(Re,se),S[1]),d(u(m(ye,B),-E[1]),u(m(Q,R),P[1]))),C[2]),u(d(u(m(we,ae),S[1]),d(u(m(xe,D),-E[1]),u(m(Q,R),C[1]))),-P[2]))),L[3]))),d(d(u(d(d(u(d(u(m(Pe,Ee),E[1]),d(u(m(Re,se),-L[1]),u(m(le,re),P[1]))),S[2]),u(d(u(m(Pe,Ee),S[1]),d(u(m(ye,B),-L[1]),u(m(ke,V),P[1]))),-E[2])),d(u(d(u(m(Re,se),S[1]),d(u(m(ye,B),-E[1]),u(m(Q,R),P[1]))),L[2]),u(d(u(m(le,re),S[1]),d(u(m(ke,V),-E[1]),u(m(Q,R),L[1]))),-P[2]))),-C[3]),u(d(d(u(d(u(m(K,ue),E[1]),d(u(m(we,ae),-L[1]),u(m(le,re),C[1]))),S[2]),u(d(u(m(K,ue),S[1]),d(u(m(xe,D),-L[1]),u(m(ke,V),C[1]))),-E[2])),d(u(d(u(m(we,ae),S[1]),d(u(m(xe,D),-E[1]),u(m(Q,R),C[1]))),L[2]),u(d(u(m(le,re),S[1]),d(u(m(ke,V),-E[1]),u(m(Q,R),L[1]))),-C[2]))),P[3])),d(u(d(d(u(d(u(m(De,oe),E[1]),d(u(m(Re,se),-C[1]),u(m(we,ae),P[1]))),_[2]),u(d(u(m(De,oe),_[1]),d(u(m(Me,H),-C[1]),u(m(Te,q),P[1]))),-E[2])),d(u(d(u(m(Re,se),_[1]),d(u(m(Me,H),-E[1]),u(m(ne,J),P[1]))),C[2]),u(d(u(m(we,ae),_[1]),d(u(m(Te,q),-E[1]),u(m(ne,J),C[1]))),-P[2]))),S[3]),u(d(d(u(d(u(m(De,oe),E[1]),d(u(m(Re,se),-C[1]),u(m(we,ae),P[1]))),S[2]),u(d(u(m(De,oe),S[1]),d(u(m(ye,B),-C[1]),u(m(xe,D),P[1]))),-E[2])),d(u(d(u(m(Re,se),S[1]),d(u(m(ye,B),-E[1]),u(m(Q,R),P[1]))),C[2]),u(d(u(m(we,ae),S[1]),d(u(m(xe,D),-E[1]),u(m(Q,R),C[1]))),-P[2]))),-_[3])))),d(d(d(u(d(d(u(d(u(m(De,oe),_[1]),d(u(m(Me,H),-C[1]),u(m(Te,q),P[1]))),S[2]),u(d(u(m(De,oe),S[1]),d(u(m(ye,B),-C[1]),u(m(xe,D),P[1]))),-_[2])),d(u(d(u(m(Me,H),S[1]),d(u(m(ye,B),-_[1]),u(m(U,j),P[1]))),C[2]),u(d(u(m(Te,q),S[1]),d(u(m(xe,D),-_[1]),u(m(U,j),C[1]))),-P[2]))),E[3]),u(d(d(u(d(u(m(Re,se),_[1]),d(u(m(Me,H),-E[1]),u(m(ne,J),P[1]))),S[2]),u(d(u(m(Re,se),S[1]),d(u(m(ye,B),-E[1]),u(m(Q,R),P[1]))),-_[2])),d(u(d(u(m(Me,H),S[1]),d(u(m(ye,B),-_[1]),u(m(U,j),P[1]))),E[2]),u(d(u(m(ne,J),S[1]),d(u(m(Q,R),-_[1]),u(m(U,j),E[1]))),-P[2]))),-C[3])),d(u(d(d(u(d(u(m(we,ae),_[1]),d(u(m(Te,q),-E[1]),u(m(ne,J),C[1]))),S[2]),u(d(u(m(we,ae),S[1]),d(u(m(xe,D),-E[1]),u(m(Q,R),C[1]))),-_[2])),d(u(d(u(m(Te,q),S[1]),d(u(m(xe,D),-_[1]),u(m(U,j),C[1]))),E[2]),u(d(u(m(ne,J),S[1]),d(u(m(Q,R),-_[1]),u(m(U,j),E[1]))),-C[2]))),P[3]),u(d(d(u(d(u(m(K,ue),E[1]),d(u(m(we,ae),-L[1]),u(m(le,re),C[1]))),_[2]),u(d(u(m(K,ue),_[1]),d(u(m(Te,q),-L[1]),u(m(me,Y),C[1]))),-E[2])),d(u(d(u(m(we,ae),_[1]),d(u(m(Te,q),-E[1]),u(m(ne,J),C[1]))),L[2]),u(d(u(m(le,re),_[1]),d(u(m(me,Y),-E[1]),u(m(ne,J),L[1]))),-C[2]))),S[3]))),d(d(u(d(d(u(d(u(m(K,ue),E[1]),d(u(m(we,ae),-L[1]),u(m(le,re),C[1]))),S[2]),u(d(u(m(K,ue),S[1]),d(u(m(xe,D),-L[1]),u(m(ke,V),C[1]))),-E[2])),d(u(d(u(m(we,ae),S[1]),d(u(m(xe,D),-E[1]),u(m(Q,R),C[1]))),L[2]),u(d(u(m(le,re),S[1]),d(u(m(ke,V),-E[1]),u(m(Q,R),L[1]))),-C[2]))),-_[3]),u(d(d(u(d(u(m(K,ue),_[1]),d(u(m(Te,q),-L[1]),u(m(me,Y),C[1]))),S[2]),u(d(u(m(K,ue),S[1]),d(u(m(xe,D),-L[1]),u(m(ke,V),C[1]))),-_[2])),d(u(d(u(m(Te,q),S[1]),d(u(m(xe,D),-_[1]),u(m(U,j),C[1]))),L[2]),u(d(u(m(me,Y),S[1]),d(u(m(ke,V),-_[1]),u(m(U,j),L[1]))),-C[2]))),E[3])),d(u(d(d(u(d(u(m(we,ae),_[1]),d(u(m(Te,q),-E[1]),u(m(ne,J),C[1]))),S[2]),u(d(u(m(we,ae),S[1]),d(u(m(xe,D),-E[1]),u(m(Q,R),C[1]))),-_[2])),d(u(d(u(m(Te,q),S[1]),d(u(m(xe,D),-_[1]),u(m(U,j),C[1]))),E[2]),u(d(u(m(ne,J),S[1]),d(u(m(Q,R),-_[1]),u(m(U,j),E[1]))),-C[2]))),-L[3]),u(d(d(u(d(u(m(le,re),_[1]),d(u(m(me,Y),-E[1]),u(m(ne,J),L[1]))),S[2]),u(d(u(m(le,re),S[1]),d(u(m(ke,V),-E[1]),u(m(Q,R),L[1]))),-_[2])),d(u(d(u(m(me,Y),S[1]),d(u(m(ke,V),-_[1]),u(m(U,j),L[1]))),E[2]),u(d(u(m(ne,J),S[1]),d(u(m(Q,R),-_[1]),u(m(U,j),E[1]))),-L[2]))),C[3]))))),be=m(fe,ge);return be[be.length-1]}}var v=[function(){return 0},function(){return 0},function(){return 0}];function g(d){var m=v[d.length];return m||(m=v[d.length]=i(d.length)),m.apply(void 0,d)}function y(d,m,w,u,S,_,E,L){return function(C,P,z,j,R,V){switch(arguments.length){case 0:case 1:return 0;case 2:return u(C,P);case 3:return S(C,P,z);case 4:return _(C,P,z,j);case 5:return E(C,P,z,j,R);case 6:return L(C,P,z,j,R,V)}for(var D=new Array(arguments.length),B=0;B<arguments.length;++B)D[B]=arguments[B];return d(D)}}!function(){for(;v.length<=6;)v.push(i(v.length));p.exports=y.apply(void 0,[g].concat(v));for(var d=0;d<=6;++d)p.exports[d]=v[d]}()},6606:function(p,s,e){"use strict";var o=e(8167);function r(v){return(2===v?n:3===v?a:4===v?i:5===v?c:h)(v<6?o[v]:o)}function n(v){return function(g,y){return[v([[+y[0],+g[0][1]],[+y[1],+g[1][1]]]),v([[+g[0][0],+y[0]],[+g[1][0],+y[1]]]),v(g)]}}function a(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2]],[+y[1],+g[1][1],+g[1][2]],[+y[2],+g[2][1],+g[2][2]]]),v([[+g[0][0],+y[0],+g[0][2]],[+g[1][0],+y[1],+g[1][2]],[+g[2][0],+y[2],+g[2][2]]]),v([[+g[0][0],+g[0][1],+y[0]],[+g[1][0],+g[1][1],+y[1]],[+g[2][0],+g[2][1],+y[2]]]),v(g)]}}function i(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3]],[+y[1],+g[1][1],+g[1][2],+g[1][3]],[+y[2],+g[2][1],+g[2][2],+g[2][3]],[+y[3],+g[3][1],+g[3][2],+g[3][3]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3]],[+g[1][0],+y[1],+g[1][2],+g[1][3]],[+g[2][0],+y[2],+g[2][2],+g[2][3]],[+g[3][0],+y[3],+g[3][2],+g[3][3]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3]],[+g[1][0],+g[1][1],+y[1],+g[1][3]],[+g[2][0],+g[2][1],+y[2],+g[2][3]],[+g[3][0],+g[3][1],+y[3],+g[3][3]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+y[3]]]),v(g)]}}function c(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4]]]),v(g)]}}function h(v){return function(g,y){return[v([[+y[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+y[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+y[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+y[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+y[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+y[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+y[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+y[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+y[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+y[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+y[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+y[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+y[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+y[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+y[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+y[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+y[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+y[5],+g[5][3],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+y[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+y[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+y[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+y[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+y[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+y[5],+g[5][4],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+y[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+y[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+y[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+y[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+y[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+y[5],+g[5][5]]]),v([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+y[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+y[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+y[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+y[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+y[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+y[5]]]),v(g)]}}var f=[function(){return[[0]]},function(v,g){return[[g[0]],[v[0][0]]]}];function b(v,g,y,d,m,w,u,S){return function(_,E){switch(_.length){case 0:return v(_,E);case 1:return g(_,E);case 2:return y(_,E);case 3:return d(_,E);case 4:return m(_,E);case 5:return w(_,E)}var L=u[_.length];return L||(L=u[_.length]=S(_.length)),L(_,E)}}!function(){for(;f.length<6;)f.push(r(f.length));p.exports=b.apply(void 0,f.concat([f,r]));for(var v=0;v<6;++v)p.exports[v]=f[v]}()},417:function(p,s,e){"use strict";var o=e(9660),r=e(9662),n=e(8289),a=e(4078);function i(m,w,u,S){return function(_,E,L){var C=m(m(w(E[1],L[0]),w(-L[1],E[0])),m(w(_[1],E[0]),w(-E[1],_[0]))),P=m(w(_[1],L[0]),w(-L[1],_[0])),z=S(C,P);return z[z.length-1]}}function c(m,w,u,S){return function(_,E,L,C){var P=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2])))),z=m(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2])))),j=S(P,z);return j[j.length-1]}}function h(m,w,u,S){return function(_,E,L,C,P){var z=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),E[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),-L[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),C[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),-P[3]),m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-C[2]),u(m(w(E[1],C[0]),w(-C[1],E[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-E[3])))),m(m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),C[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),-P[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),E[2]),m(u(m(w(E[1],C[0]),w(-C[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),C[2]))),_[3]))),m(u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-E[3]),m(u(m(u(m(w(E[1],C[0]),w(-C[1],E[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),C[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-C[3]))))),j=m(m(m(u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),L[2]),m(u(m(w(L[1],P[0]),w(-P[1],L[0])),-C[2]),u(m(w(L[1],C[0]),w(-C[1],L[0])),P[2]))),_[3]),u(m(u(m(w(C[1],P[0]),w(-P[1],C[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-C[2]),u(m(w(_[1],C[0]),w(-C[1],_[0])),P[2]))),-L[3])),m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),C[3]),u(m(u(m(w(L[1],C[0]),w(-C[1],L[0])),_[2]),m(u(m(w(_[1],C[0]),w(-C[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),C[2]))),-P[3]))),m(m(u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),E[2]),m(u(m(w(E[1],P[0]),w(-P[1],E[0])),-L[2]),u(m(w(E[1],L[0]),w(-L[1],E[0])),P[2]))),_[3]),u(m(u(m(w(L[1],P[0]),w(-P[1],L[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-L[2]),u(m(w(_[1],L[0]),w(-L[1],_[0])),P[2]))),-E[3])),m(u(m(u(m(w(E[1],P[0]),w(-P[1],E[0])),_[2]),m(u(m(w(_[1],P[0]),w(-P[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),P[2]))),L[3]),u(m(u(m(w(E[1],L[0]),w(-L[1],E[0])),_[2]),m(u(m(w(_[1],L[0]),w(-L[1],_[0])),-E[2]),u(m(w(_[1],E[0]),w(-E[1],_[0])),L[2]))),-P[3])))),R=S(z,j);return R[R.length-1]}}function f(m){return(3===m?i:4===m?c:h)(r,o,n,a)}var b=f(3),v=f(4),g=[function(){return 0},function(){return 0},function(m,w){return w[0]-m[0]},function(m,w,u){var S,_=(m[1]-u[1])*(w[0]-u[0]),E=(m[0]-u[0])*(w[1]-u[1]),L=_-E;if(_>0){if(E<=0)return L;S=_+E}else{if(!(_<0)||E>=0)return L;S=-(_+E)}var C=33306690738754716e-32*S;return L>=C||L<=-C?L:b(m,w,u)},function(m,w,u,S){var _=m[0]-S[0],E=w[0]-S[0],L=u[0]-S[0],C=m[1]-S[1],P=w[1]-S[1],z=u[1]-S[1],j=m[2]-S[2],R=w[2]-S[2],V=u[2]-S[2],D=E*z,B=L*P,N=L*C,U=_*z,J=_*P,Y=E*C,q=j*(D-B)+R*(N-U)+V*(J-Y),H=7771561172376103e-31*((Math.abs(D)+Math.abs(B))*Math.abs(j)+(Math.abs(N)+Math.abs(U))*Math.abs(R)+(Math.abs(J)+Math.abs(Y))*Math.abs(V));return q>H||-q>H?q:v(m,w,u,S)}];function y(m){var w=g[m.length];return w||(w=g[m.length]=f(m.length)),w.apply(void 0,m)}function d(m,w,u,S,_,E,L){return function(C,P,z,j,R){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,P);case 3:return _(C,P,z);case 4:return E(C,P,z,j);case 5:return L(C,P,z,j,R)}for(var V=new Array(arguments.length),D=0;D<arguments.length;++D)V[D]=arguments[D];return m(V)}}!function(){for(;g.length<=5;)g.push(f(g.length));p.exports=d.apply(void 0,[y].concat(g));for(var m=0;m<=5;++m)p.exports[m]=g[m]}()},2019:function(p,s,e){"use strict";var o=e(9662),r=e(8289);p.exports=function(n,a){if(1===n.length)return r(a,n[0]);if(1===a.length)return r(n,a[0]);if(0===n.length||0===a.length)return[0];var i=[0];if(n.length<a.length)for(var c=0;c<n.length;++c)i=o(i,r(a,n[c]));else for(c=0;c<a.length;++c)i=o(i,r(n,a[c]));return i}},8289:function(p,s,e){"use strict";var o=e(9660),r=e(87);p.exports=function(n,a){var i=n.length;if(1===i){var c=o(n[0],a);return c[0]?c:[c[1]]}var h=new Array(2*i),f=[.1,.1],b=[.1,.1],v=0;o(n[0],a,f),f[0]&&(h[v++]=f[0]);for(var g=1;g<i;++g){o(n[g],a,b),r(f[1],b[0],f),f[0]&&(h[v++]=f[0]);var d=b[1],m=f[1],w=d+m,u=m-(w-d);f[1]=w,u&&(h[v++]=u)}return f[1]&&(h[v++]=f[1]),0===v&&(h[v++]=0),h.length=v,h}},4434:function(p,s,e){"use strict";p.exports=function(r,n,a,i){var c=o(r,a,i),h=o(n,a,i);if(c>0&&h>0||c<0&&h<0)return!1;var f=o(a,r,n),b=o(i,r,n);return!(f>0&&b>0||f<0&&b<0)&&(0!==c||0!==h||0!==f||0!==b||function(v,g,y,d){for(var m=0;m<2;++m){var w=v[m],u=g[m],S=Math.min(w,u),_=Math.max(w,u),E=y[m],L=d[m],C=Math.min(E,L);if(Math.max(E,L)<S||_<C)return!1}return!0}(r,n,a,i))};var o=e(417)[3]},4078:function(p){"use strict";p.exports=function(s,e){var C,P,z,j,R,o=0|s.length,r=0|e.length;if(1===o&&1===r)return(R=(C=s[0])-((z=C+(P=-e[0]))-(j=z-C))+(P-j))?[R,z]:[z];var n,a,i=new Array(o+r),c=0,h=0,f=0,b=Math.abs,v=s[h],g=b(v),y=-e[f],d=b(y);g<d?(a=v,(h+=1)<o&&(g=b(v=s[h]))):(a=y,(f+=1)<r&&(d=b(y=-e[f]))),h<o&&g<d||f>=r?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(d=b(y=-e[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<d?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(d=b(y=-e[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=-e[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},9662:function(p){"use strict";p.exports=function(s,e){var C,P,z,j,R,o=0|s.length,r=0|e.length;if(1===o&&1===r)return(R=(C=s[0])-((z=C+(P=e[0]))-(j=z-C))+(P-j))?[R,z]:[z];var n,a,i=new Array(o+r),c=0,h=0,f=0,b=Math.abs,v=s[h],g=b(v),y=e[f],d=b(y);g<d?(a=v,(h+=1)<o&&(g=b(v=s[h]))):(a=y,(f+=1)<r&&(d=b(y=e[f]))),h<o&&g<d||f>=r?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(d=b(y=e[f])));for(var m,w,u=n+a,S=u-n,_=a-S,E=_,L=u;h<o&&f<r;)g<d?(n=v,(h+=1)<o&&(g=b(v=s[h]))):(n=y,(f+=1)<r&&(d=b(y=e[f]))),(_=(a=E)-(S=(u=n+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m;for(;h<o;)(_=(a=E)-(S=(u=(n=v)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(h+=1)<o&&(v=s[h]);for(;f<r;)(_=(a=E)-(S=(u=(n=y)+a)-n))&&(i[c++]=_),E=L-((m=L+u)-(w=m-L))+(u-w),L=m,(f+=1)<r&&(y=e[f]);return E&&(i[c++]=E),L&&(i[c++]=L),c||(i[c++]=0),i.length=c,i}},8691:function(p,s,e){"use strict";p.exports=function(n){return r(o(n))};var o=e(2692),r=e(7037)},7212:function(p,s,e){"use strict";p.exports=function(i,c,h,f){if(h=h||0,void 0===f&&(f=function(u){for(var S=u.length,_=0,E=0;E<S;++E)_=0|Math.max(_,u[E].length);return _-1}(i)),0===i.length||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var b=function(u,S){for(var _=u.length,E=r.mallocUint8(_),L=0;L<_;++L)E[L]=u[L]<S|0;return E}(c,+h),v=function(u,S){for(var _=u.length,L=r.mallocUint32(2*(S*(S+1)/2*_|0)),C=0,P=0;P<_;++P)for(var z=u[P],j=(S=z.length,0);j<S;++j)for(var R=0;R<j;++R){var V=z[R],D=z[j];L[C++]=0|Math.min(V,D),L[C++]=0|Math.max(V,D)}n(o(L,[C/2|0,2]));var B=2;for(P=2;P<C;P+=2)L[P-2]===L[P]&&L[P-1]===L[P+1]||(L[B++]=L[P],L[B++]=L[P+1]);return o(L,[B/2|0,2])}(i,f),g=function(u,S,_,E){for(var L=u.data,C=u.shape[0],P=r.mallocDouble(C),z=0,j=0;j<C;++j){var R=L[2*j],V=L[2*j+1];if(_[R]!==_[V]){var D=S[R],B=S[V];L[2*z]=R,L[2*z+1]=V,P[z++]=(B-E)/(B-D)}}return u.shape[0]=z,o(P,[z])}(v,c,b,+h),y=function(u,S){var _=r.mallocInt32(2*S),E=u.shape[0],L=u.data;_[0]=0;for(var C=0,P=0;P<E;++P){var z=L[2*P];if(z!==C){for(_[2*C+1]=P;++C<z;)_[2*C]=P,_[2*C+1]=P;_[2*C]=P}}for(_[2*C+1]=E;++C<S;)_[2*C]=_[2*C+1]=E;return _}(v,0|c.length),d=a(f)(i,v.data,y,b),m=function(u){for(var S=0|u.shape[0],_=u.data,E=new Array(S),L=0;L<S;++L)E[L]=[_[2*L],_[2*L+1]];return E}(v),w=[].slice.call(g.data,0,g.shape[0]);return r.free(b),r.free(v.data),r.free(g.data),r.free(y),{cells:d,vertexIds:m,vertexWeights:w}};var o=e(5050),r=e(5306),n=e(8729),a=e(1168)},1168:function(p){"use strict";p.exports=function(e){return s[e]()};var s=[function(){return function(e,o,r,n){for(var a=e.length,i=0;i<a;++i);return[]}},function(){function e(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h];if(2===f.length){var b=(a[f[0]]<<0)+(a[f[1]]<<1);if(0===b||3===b)continue;switch(b){case 0:case 3:break;case 1:c.push([e(n,r,f[0],f[1])]);break;case 2:c.push([e(n,r,f[1],f[0])])}}}return c}},function(){function e(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],b=f.length;if(3===b){if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))||7===v)continue;switch(v){case 0:case 7:break;case 1:c.push([e(n,r,f[0],f[2]),e(n,r,f[0],f[1])]);break;case 2:c.push([e(n,r,f[1],f[0]),e(n,r,f[1],f[2])]);break;case 3:c.push([e(n,r,f[0],f[2]),e(n,r,f[1],f[2])]);break;case 4:c.push([e(n,r,f[2],f[1]),e(n,r,f[2],f[0])]);break;case 5:c.push([e(n,r,f[2],f[1]),e(n,r,f[0],f[1])]);break;case 6:c.push([e(n,r,f[1],f[0]),e(n,r,f[2],f[0])])}}else if(2===b){var v;if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1))||3===v)continue;switch(v){case 0:case 3:break;case 1:c.push([e(n,r,f[0],f[1])]);break;case 2:c.push([e(n,r,f[1],f[0])])}}}return c}},function(){function e(o,r,n,a){for(var i=0|Math.min(n,a),c=0|Math.max(n,a),h=o[2*i],f=o[2*i+1];h<f;){var b=h+f>>1,v=r[2*b+1];if(v===c)return b;c<v?f=b:h=b+1}return h}return function(o,r,n,a){for(var i=o.length,c=[],h=0;h<i;++h){var f=o[h],b=f.length;if(4===b){if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2)+(a[f[3]]<<3))||15===v)continue;switch(v){case 0:case 15:break;case 1:c.push([e(n,r,f[0],f[1]),e(n,r,f[0],f[2]),e(n,r,f[0],f[3])]);break;case 2:c.push([e(n,r,f[1],f[2]),e(n,r,f[1],f[0]),e(n,r,f[1],f[3])]);break;case 3:c.push([e(n,r,f[1],f[2]),e(n,r,f[0],f[2]),e(n,r,f[0],f[3])],[e(n,r,f[1],f[3]),e(n,r,f[1],f[2]),e(n,r,f[0],f[3])]);break;case 4:c.push([e(n,r,f[2],f[0]),e(n,r,f[2],f[1]),e(n,r,f[2],f[3])]);break;case 5:c.push([e(n,r,f[0],f[1]),e(n,r,f[2],f[1]),e(n,r,f[0],f[3])],[e(n,r,f[2],f[1]),e(n,r,f[2],f[3]),e(n,r,f[0],f[3])]);break;case 6:c.push([e(n,r,f[2],f[0]),e(n,r,f[1],f[0]),e(n,r,f[1],f[3])],[e(n,r,f[2],f[3]),e(n,r,f[2],f[0]),e(n,r,f[1],f[3])]);break;case 7:c.push([e(n,r,f[0],f[3]),e(n,r,f[1],f[3]),e(n,r,f[2],f[3])]);break;case 8:c.push([e(n,r,f[3],f[1]),e(n,r,f[3],f[0]),e(n,r,f[3],f[2])]);break;case 9:c.push([e(n,r,f[3],f[1]),e(n,r,f[0],f[1]),e(n,r,f[0],f[2])],[e(n,r,f[3],f[2]),e(n,r,f[3],f[1]),e(n,r,f[0],f[2])]);break;case 10:c.push([e(n,r,f[1],f[0]),e(n,r,f[3],f[0]),e(n,r,f[1],f[2])],[e(n,r,f[3],f[0]),e(n,r,f[3],f[2]),e(n,r,f[1],f[2])]);break;case 11:c.push([e(n,r,f[1],f[2]),e(n,r,f[0],f[2]),e(n,r,f[3],f[2])]);break;case 12:c.push([e(n,r,f[3],f[0]),e(n,r,f[2],f[0]),e(n,r,f[2],f[1])],[e(n,r,f[3],f[1]),e(n,r,f[3],f[0]),e(n,r,f[2],f[1])]);break;case 13:c.push([e(n,r,f[0],f[1]),e(n,r,f[2],f[1]),e(n,r,f[3],f[1])]);break;case 14:c.push([e(n,r,f[2],f[0]),e(n,r,f[1],f[0]),e(n,r,f[3],f[0])])}}else if(3===b){if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1)+(a[f[2]]<<2))||7===v)continue;switch(v){case 0:case 7:break;case 1:c.push([e(n,r,f[0],f[2]),e(n,r,f[0],f[1])]);break;case 2:c.push([e(n,r,f[1],f[0]),e(n,r,f[1],f[2])]);break;case 3:c.push([e(n,r,f[0],f[2]),e(n,r,f[1],f[2])]);break;case 4:c.push([e(n,r,f[2],f[1]),e(n,r,f[2],f[0])]);break;case 5:c.push([e(n,r,f[2],f[1]),e(n,r,f[0],f[1])]);break;case 6:c.push([e(n,r,f[1],f[0]),e(n,r,f[2],f[0])])}}else if(2===b){var v;if(0==(v=(a[f[0]]<<0)+(a[f[1]]<<1))||3===v)continue;switch(v){case 0:case 3:break;case 1:c.push([e(n,r,f[0],f[1])]);break;case 2:c.push([e(n,r,f[1],f[0])])}}}return c}}]},8211:function(p,s,e){"use strict";e(2288),e(1731),s.H=function(o,r){var n=o.length,a=o.length-r.length,i=Math.min;if(a)return a;switch(n){case 0:return 0;case 1:return o[0]-r[0];case 2:return(f=o[0]+o[1]-r[0]-r[1])||i(o[0],o[1])-i(r[0],r[1]);case 3:var c=o[0]+o[1],h=r[0]+r[1];if(f=c+o[2]-(h+r[2]))return f;var f,b=i(o[0],o[1]),v=i(r[0],r[1]);return(f=i(b,o[2])-i(v,r[2]))||i(b+o[2],c)-i(v+r[2],h);default:var g=o.slice(0);g.sort();var y=r.slice(0);y.sort();for(var d=0;d<n;++d)if(a=g[d]-y[d])return a;return 0}}},9392:function(p,s){"use strict";function e(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(r){return(r>0)-(r<0)},s.abs=function(r){var n=r>>31;return(r^n)-n},s.min=function(r,n){return n^(r^n)&-(r<n)},s.max=function(r,n){return r^(r^n)&-(r<n)},s.isPow2=function(r){return!(r&r-1||!r)},s.log2=function(r){var n,a;return n=(r>65535)<<4,n|=a=((r>>>=n)>255)<<3,n|=a=((r>>>=a)>15)<<2,(n|=a=((r>>>=a)>3)<<1)|(r>>>=a)>>1},s.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},s.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},s.countTrailingZeros=e,s.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},s.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},s.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var o=new Array(256);(function(r){for(var n=0;n<256;++n){var a=n,i=n,c=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=1&a,--c;r[n]=i<<c&255}})(o),s.reverse=function(r){return o[255&r]<<24|o[r>>>8&255]<<16|o[r>>>16&255]<<8|o[r>>>24&255]},s.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},s.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},s.interleave3=function(r,n,a){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},s.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>e(r)+1}},6656:function(p,s,e){"use strict";var o=e(9392),r=e(9521);function n(v,g){var y=v.length,d=v.length-g.length,m=Math.min;if(d)return d;switch(y){case 0:return 0;case 1:return v[0]-g[0];case 2:return(S=v[0]+v[1]-g[0]-g[1])||m(v[0],v[1])-m(g[0],g[1]);case 3:var w=v[0]+v[1],u=g[0]+g[1];if(S=w+v[2]-(u+g[2]))return S;var S,_=m(v[0],v[1]),E=m(g[0],g[1]);return(S=m(_,v[2])-m(E,g[2]))||m(_+v[2],w)-m(E+g[2],u);default:var L=v.slice(0);L.sort();var C=g.slice(0);C.sort();for(var P=0;P<y;++P)if(d=L[P]-C[P])return d;return 0}}function a(v,g){return n(v[0],g[0])}function i(v,g){if(g){for(var y=v.length,d=new Array(y),m=0;m<y;++m)d[m]=[v[m],g[m]];for(d.sort(a),m=0;m<y;++m)v[m]=d[m][0],g[m]=d[m][1];return v}return v.sort(n),v}function c(v){if(0===v.length)return[];for(var g=1,y=v.length,d=1;d<y;++d){var m=v[d];if(n(m,v[d-1])){if(d===g){g++;continue}v[g++]=m}}return v.length=g,v}function h(v,g){for(var y=0,d=v.length-1,m=-1;y<=d;){var w=y+d>>1,u=n(v[w],g);u<=0?(0===u&&(m=w),y=w+1):u>0&&(d=w-1)}return m}function f(v,g){for(var y=new Array(v.length),d=0,m=y.length;d<m;++d)y[d]=[];for(var w=[],u=(d=0,g.length);d<u;++d)for(var S=g[d],_=S.length,E=1,L=1<<_;E<L;++E){w.length=o.popCount(E);for(var C=0,P=0;P<_;++P)E&1<<P&&(w[C++]=S[P]);var z=h(v,w);if(!(z<0))for(;y[z++].push(d),!(z>=v.length||0!==n(v[z],w)););}return y}function b(v,g){if(g<0)return[];for(var y=[],d=(1<<g+1)-1,m=0;m<v.length;++m)for(var w=v[m],u=d;u<1<<w.length;u=o.nextCombination(u)){for(var S=new Array(g+1),_=0,E=0;E<w.length;++E)u&1<<E&&(S[_++]=w[E]);y.push(S)}return i(y)}s.dimension=function(v){for(var g=0,y=Math.max,d=0,m=v.length;d<m;++d)g=y(g,v[d].length);return g-1},s.countVertices=function(v){for(var g=-1,y=Math.max,d=0,m=v.length;d<m;++d)for(var w=v[d],u=0,S=w.length;u<S;++u)g=y(g,w[u]);return g+1},s.cloneCells=function(v){for(var g=new Array(v.length),y=0,d=v.length;y<d;++y)g[y]=v[y].slice(0);return g},s.compareCells=n,s.normalize=i,s.unique=c,s.findCell=h,s.incidence=f,s.dual=function(v,g){if(!g)return f(c(b(v,0)),v);for(var y=new Array(g),d=0;d<g;++d)y[d]=[];d=0;for(var m=v.length;d<m;++d)for(var w=v[d],u=0,S=w.length;u<S;++u)y[w[u]].push(d);return y},s.explode=function(v){for(var g=[],y=0,d=v.length;y<d;++y)for(var m=v[y],w=0|m.length,u=1,S=1<<w;u<S;++u){for(var _=[],E=0;E<w;++E)u>>>E&1&&_.push(m[E]);g.push(_)}return i(g)},s.skeleton=b,s.boundary=function(v){for(var g=[],y=0,d=v.length;y<d;++y)for(var m=v[y],w=0,u=m.length;w<u;++w){for(var S=new Array(m.length-1),_=0,E=0;_<u;++_)_!==w&&(S[E++]=m[_]);g.push(S)}return i(g)},s.connectedComponents=function(v,g){return g?function(y,d){for(var m=new r(d),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=S+1;_<u.length;++_)m.link(u[S],u[_]);var E=[],L=m.ranks;for(w=0;w<L.length;++w)L[w]=-1;for(w=0;w<y.length;++w){var C=m.find(y[w][0]);L[C]<0?(L[C]=E.length,E.push([y[w].slice(0)])):E[L[C]].push(y[w].slice(0))}return E}(v,g):function(y){for(var d=c(i(b(y,0))),m=new r(d.length),w=0;w<y.length;++w)for(var u=y[w],S=0;S<u.length;++S)for(var _=h(d,[u[S]]),E=S+1;E<u.length;++E)m.link(_,h(d,[u[E]]));var L=[],C=m.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<y.length;++w){var P=m.find(h(d,[y[w][0]]));C[P]<0?(C[P]=L.length,L.push([y[w].slice(0)])):L[C[P]].push(y[w].slice(0))}return L}(v)}},9521:function(p){"use strict";function s(e){this.roots=new Array(e),this.ranks=new Array(e);for(var o=0;o<e;++o)this.roots[o]=o,this.ranks[o]=0}p.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},s.prototype.find=function(e){for(var o=this.roots;o[e]!==e;){var r=o[e];o[e]=o[r],e=r}return e},s.prototype.link=function(e,o){var r=this.find(e),n=this.find(o);if(r!==n){var a=this.ranks,i=this.roots,c=a[r],h=a[n];c<h?i[r]=n:h<c?i[n]=r:(i[n]=r,++a[r])}}},8243:function(p,s,e){"use strict";p.exports=function(n,a,i){for(var c=a.length,h=n.length,f=new Array(c),b=new Array(c),v=new Array(c),g=new Array(c),y=0;y<c;++y)f[y]=b[y]=-1,v[y]=1/0,g[y]=!1;for(y=0;y<h;++y){var d=n[y];if(2!==d.length)throw new Error("Input must be a graph");var m=d[1],w=d[0];b[w]=-1!==b[w]?-2:m,f[m]=-1!==f[m]?-2:w}function u(Y){if(g[Y])return 1/0;var H,X,Q=f[Y],ne=b[Y];return Q<0||ne<0?1/0:(H=a[Q],X=a[ne],Math.abs(o(a[Y],H,X))/Math.sqrt(Math.pow(H[0]-X[0],2)+Math.pow(H[1]-X[1],2)))}function S(Y,q){var H=R[Y],X=R[q];R[Y]=X,R[q]=H,V[H]=q,V[X]=Y}function _(Y){return v[R[Y]]}function E(Y){return 1&Y?Y-1>>1:(Y>>1)-1}function L(Y){for(var q=_(Y);;){var H=q,X=2*Y+1,Q=2*(Y+1),ne=Y;if(X<D){var re=_(X);re<H&&(ne=X,H=re)}if(Q<D&&_(Q)<H&&(ne=Q),ne===Y)return Y;S(Y,ne),Y=ne}}function C(Y){for(var q=_(Y);Y>0;){var H=E(Y);if(!(H>=0&&q<_(H)))return Y;S(Y,H),Y=H}}function P(){if(D>0){var Y=R[0];return S(0,D-1),D-=1,L(0),Y}return-1}function z(Y,q){var H=R[Y];return v[H]===q?Y:(v[H]=-1/0,C(Y),P(),v[H]=q,C((D+=1)-1))}function j(Y){if(!g[Y]){g[Y]=!0;var q=f[Y],H=b[Y];f[H]>=0&&(f[H]=q),b[q]>=0&&(b[q]=H),V[q]>=0&&z(V[q],u(q)),V[H]>=0&&z(V[H],u(H))}}var R=[],V=new Array(c);for(y=0;y<c;++y)(v[y]=u(y))<1/0?(V[y]=R.length,R.push(y)):V[y]=-1;var D=R.length;for(y=D>>1;y>=0;--y)L(y);for(;;){var B=P();if(B<0||v[B]>i)break;j(B)}var N=[];for(y=0;y<c;++y)g[y]||(V[y]=N.length,N.push(a[y].slice()));function U(Y,q){if(Y[q]<0)return q;var H=q,X=q;do{var Q=Y[X];if(!g[X]||Q<0||Q===X||(Q=Y[X=Q],!g[X]||Q<0||Q===X))break;X=Q,H=Y[H]}while(H!==X);for(var ne=q;ne!==X;ne=Y[ne])Y[ne]=X;return X}var J=[];return n.forEach(function(Y){var q=U(f,Y[0]),H=U(b,Y[1]);if(q>=0&&H>=0&&q!==H){var X=V[q],Q=V[H];X!==Q&&J.push([X,Q])}}),r.unique(r.normalize(J)),{positions:N,edges:J}};var o=e(417),r=e(6656)},6638:function(p,s,e){"use strict";p.exports=function(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);i=a[1],c=a[0]}if(n[0][0]<n[1][0])h=n[0],f=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);h=n[1],f=n[0]}var b=o(i,c,f),v=o(i,c,h);if(b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;if(b=o(f,h,c),v=o(f,h,i),b<0){if(v<=0)return b}else if(b>0){if(v>=0)return b}else if(v)return v;return c[0]-f[0]};var o=e(417);function r(n,a){var i,c,h,f;if(a[0][0]<a[1][0])i=a[0],c=a[1];else{if(!(a[0][0]>a[1][0])){var b=Math.min(n[0][1],n[1][1]),v=Math.max(n[0][1],n[1][1]),g=Math.min(a[0][1],a[1][1]),y=Math.max(a[0][1],a[1][1]);return v<g?v-g:b>y?b-y:v-y}i=a[1],c=a[0]}n[0][1]<n[1][1]?(h=n[0],f=n[1]):(h=n[1],f=n[0]);var d=o(c,i,h);return d||(d=o(c,i,f))||f-c}},4385:function(p,s,e){"use strict";p.exports=function(v){for(var g=v.length,y=2*g,d=new Array(y),m=0;m<g;++m){var w=v[m],u=w[0][0]<w[1][0];d[2*m]=new b(w[0][0],w,u,m),d[2*m+1]=new b(w[1][0],w,!u,m)}d.sort(function(j,R){var V=j.x-R.x;return V||(V=j.create-R.create)||Math.min(j.segment[0][1],j.segment[1][1])-Math.min(R.segment[0][1],R.segment[1][1])});var S=r(a),_=[],E=[],L=[];for(m=0;m<y;){for(var C=d[m].x,P=[];m<y;){var z=d[m];if(z.x!==C)break;m+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(P.push(new f(z.segment[0][1],z.index,!0,!0)),P.push(new f(z.segment[1][1],z.index,!1,!1))):(P.push(new f(z.segment[1][1],z.index,!0,!1)),P.push(new f(z.segment[0][1],z.index,!1,!0)))):S=z.create?S.insert(z.segment,z.index):S.remove(z.segment)}_.push(S.root),E.push(C),L.push(P)}return new i(_,E,L)};var o=e(5070),r=e(7080),n=e(417),a=e(6638);function i(v,g,y){this.slabs=v,this.coordinates=g,this.horizontal=y}function c(v,g){return v.y-g}function h(v,g){for(var y=null;v;){var d,m,w=v.key;w[0][0]<w[1][0]?(d=w[0],m=w[1]):(d=w[1],m=w[0]);var u=n(d,m,g);if(u<0)v=v.left;else if(u>0)if(g[0]!==w[1][0])y=v,v=v.right;else{if(S=h(v.right,g))return S;v=v.left}else{if(g[0]!==w[1][0])return v;var S;if(S=h(v.right,g))return S;v=v.left}}return y}function f(v,g,y,d){this.y=v,this.index=g,this.start=y,this.closed=d}function b(v,g,y,d){this.x=v,this.segment=g,this.create=y,this.index=d}i.prototype.castUp=function(v){var g=o.le(this.coordinates,v[0]);if(g<0)return-1;var y=h(this.slabs[g],v),d=-1;if(y&&(d=y.value),this.coordinates[g]===v[0]){var m=null;if(y&&(m=y.key),g>0){var w=h(this.slabs[g-1],v);w&&(m?a(w.key,m)>0&&(m=w.key,d=w.value):(d=w.value,m=w.key))}var u=this.horizontal[g];if(u.length>0){var S=o.ge(u,v[1],c);if(S<u.length){var _=u[S];if(v[1]===_.y){if(_.closed)return _.index;for(;S<u.length-1&&u[S+1].y===v[1];)if((_=u[S+=1]).closed)return _.index;if(_.y===v[1]&&!_.start){if((S+=1)>=u.length)return d;_=u[S]}}if(_.start)if(m){var E=n(m[0],m[1],[v[0],_.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(d=_.index)}else d=_.index;else _.y!==v[1]&&(d=_.index)}}}return d}},4670:function(p,s,e){"use strict";var o=e(9130),r=e(9662);function n(i,c){var h=r(o(i,c),[c[c.length-1]]);return h[h.length-1]}function a(i,c,h,f){var b=-c/(f-c);b<0?b=0:b>1&&(b=1);for(var v=1-b,g=i.length,y=new Array(g),d=0;d<g;++d)y[d]=b*i[d]+v*h[d];return y}p.exports=function(i,c){for(var h=[],f=[],b=n(i[i.length-1],c),v=i[i.length-1],g=i[0],y=0;y<i.length;++y,v=g){var d=n(g=i[y],c);if(b<0&&d>0||b>0&&d<0){var m=a(v,d,g,b);h.push(m),f.push(m.slice())}d<0?f.push(g.slice()):d>0?h.push(g.slice()):(h.push(g.slice()),f.push(g.slice())),b=d}return{positive:h,negative:f}},p.exports.positive=function(i,c){for(var h=[],f=n(i[i.length-1],c),b=i[i.length-1],v=i[0],g=0;g<i.length;++g,b=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(b,y,v,f)),y>=0&&h.push(v.slice()),f=y}return h},p.exports.negative=function(i,c){for(var h=[],f=n(i[i.length-1],c),b=i[i.length-1],v=i[0],g=0;g<i.length;++g,b=v){var y=n(v=i[g],c);(f<0&&y>0||f>0&&y<0)&&h.push(a(b,y,v,f)),y<=0&&h.push(v.slice()),f=y}return h}},8974:function(p,s,e){var o;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(f){return i(h(f),arguments)}function a(f,b){return n.apply(null,[f].concat(b||[]))}function i(f,b){var v,g,y,d,m,w,u,S,_,E=1,L=f.length,C="";for(g=0;g<L;g++)if("string"==typeof f[g])C+=f[g];else if("object"==typeof f[g]){if((d=f[g]).keys)for(v=b[E],y=0;y<d.keys.length;y++){if(null==v)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',d.keys[y],d.keys[y-1]));v=v[d.keys[y]]}else v=d.param_no?b[d.param_no]:b[E++];if(r.not_type.test(d.type)&&r.not_primitive.test(d.type)&&v instanceof Function&&(v=v()),r.numeric_arg.test(d.type)&&"number"!=typeof v&&isNaN(v))throw new TypeError(n("[sprintf] expecting number but found %T",v));switch(r.number.test(d.type)&&(S=v>=0),d.type){case"b":v=parseInt(v,10).toString(2);break;case"c":v=String.fromCharCode(parseInt(v,10));break;case"d":case"i":v=parseInt(v,10);break;case"j":v=JSON.stringify(v,null,d.width?parseInt(d.width):0);break;case"e":v=d.precision?parseFloat(v).toExponential(d.precision):parseFloat(v).toExponential();break;case"f":v=d.precision?parseFloat(v).toFixed(d.precision):parseFloat(v);break;case"g":v=d.precision?String(Number(v.toPrecision(d.precision))):parseFloat(v);break;case"o":v=(parseInt(v,10)>>>0).toString(8);break;case"s":v=String(v),v=d.precision?v.substring(0,d.precision):v;break;case"t":v=String(!!v),v=d.precision?v.substring(0,d.precision):v;break;case"T":v=Object.prototype.toString.call(v).slice(8,-1).toLowerCase(),v=d.precision?v.substring(0,d.precision):v;break;case"u":v=parseInt(v,10)>>>0;break;case"v":v=v.valueOf(),v=d.precision?v.substring(0,d.precision):v;break;case"x":v=(parseInt(v,10)>>>0).toString(16);break;case"X":v=(parseInt(v,10)>>>0).toString(16).toUpperCase()}r.json.test(d.type)?C+=v:(!r.number.test(d.type)||S&&!d.sign?_="":(_=S?"+":"-",v=v.toString().replace(r.sign,"")),w=d.pad_char?"0"===d.pad_char?"0":d.pad_char.charAt(1):" ",u=d.width-(_+v).length,m=d.width&&u>0?w.repeat(u):"",C+=d.align?_+v+m:"0"===w?_+m+v:m+_+v)}return C}var c=Object.create(null);function h(f){if(c[f])return c[f];for(var b,v=f,g=[],y=0;v;){if(null!==(b=r.text.exec(v)))g.push(b[0]);else if(null!==(b=r.modulo.exec(v)))g.push("%");else{if(null===(b=r.placeholder.exec(v)))throw new SyntaxError("[sprintf] unexpected placeholder");if(b[2]){y|=1;var d=[],m=b[2],w=[];if(null===(w=r.key.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(d.push(w[1]);""!==(m=m.substring(w[0].length));)if(null!==(w=r.key_access.exec(m)))d.push(w[1]);else{if(null===(w=r.index_access.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");d.push(w[1])}b[2]=d}else y|=2;if(3===y)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}v=v.substring(b[0].length)}return c[f]=g}s.sprintf=n,s.vsprintf=a,typeof window<"u"&&(window.sprintf=n,window.vsprintf=a,void 0===(o=function(){return{sprintf:n,vsprintf:a}}.call(s,e,s,p))||(p.exports=o))}()},4162:function(p,s,e){"use strict";p.exports=function(i,c){if(i.dimension<=0)return{positions:[],cells:[]};if(1===i.dimension)return function(b,v){for(var g=r(b,v),y=g.length,d=new Array(y),m=new Array(y),w=0;w<y;++w)d[w]=[g[w]],m[w]=[w];return{positions:d,cells:m}}(i,c);var h=i.order.join()+"-"+i.dtype,f=a[h];return c=+c||0,f||(f=a[h]=function(b,v){var y=n[b.length+"d"];if(y)return y(o,b,v)}(i.order,i.dtype)),f(i,c)};var o=e(9284),r=e(9584),n={"2d":function(i,c,h){var f=i({order:c,scalarArguments:3,getters:"generic"===h?[0]:void 0,phase:function(b,v,g,y){return b>y|0},vertex:function(b,v,g,y,d,m,w,u,S,_,E,L,C){var P=(w<<0)+(u<<1)+(S<<2)+(_<<3)|0;if(0!==P&&15!==P)switch(P){case 0:case 15:E.push([b-.5,v-.5]);break;case 1:E.push([b-.25-.25*(y+g-2*C)/(g-y),v-.25-.25*(d+g-2*C)/(g-d)]);break;case 2:E.push([b-.75-.25*(-y-g+2*C)/(y-g),v-.25-.25*(m+y-2*C)/(y-m)]);break;case 3:E.push([b-.5,v-.5-.5*(d+g+m+y-4*C)/(g-d+y-m)]);break;case 4:E.push([b-.25-.25*(m+d-2*C)/(d-m),v-.75-.25*(-d-g+2*C)/(d-g)]);break;case 5:E.push([b-.5-.5*(y+g+m+d-4*C)/(g-y+d-m),v-.5]);break;case 6:E.push([b-.5-.25*(-y-g+m+d)/(y-g+d-m),v-.5-.25*(-d-g+m+y)/(d-g+y-m)]);break;case 7:E.push([b-.75-.25*(m+d-2*C)/(d-m),v-.75-.25*(m+y-2*C)/(y-m)]);break;case 8:E.push([b-.75-.25*(-m-d+2*C)/(m-d),v-.75-.25*(-m-y+2*C)/(m-y)]);break;case 9:E.push([b-.5-.25*(y+g+-m-d)/(g-y+m-d),v-.5-.25*(d+g+-m-y)/(g-d+m-y)]);break;case 10:E.push([b-.5-.5*(-y-g-m-d+4*C)/(y-g+m-d),v-.5]);break;case 11:E.push([b-.25-.25*(-m-d+2*C)/(m-d),v-.75-.25*(d+g-2*C)/(g-d)]);break;case 12:E.push([b-.5,v-.5-.5*(-d-g-m-y+4*C)/(d-g+m-y)]);break;case 13:E.push([b-.75-.25*(y+g-2*C)/(g-y),v-.25-.25*(-m-y+2*C)/(m-y)]);break;case 14:E.push([b-.25-.25*(-y-g+2*C)/(y-g),v-.25-.25*(-d-g+2*C)/(d-g)])}},cell:function(b,v,g,y,d,m,w,u,S){u.push(d?[b,v]:[v,b])}});return function(b,v){var g=[],y=[];return f(b,g,y,v),{positions:g,cells:y}}}},a={}},6946:function(p,s,e){"use strict";p.exports=function a(i,c,h){h=h||{};var f=n[i];f||(f=n[i]={" ":{data:new Float32Array(0),shape:.2}});var b=f[c];if(!b)if(c.length<=1||!/\d/.test(c))b=f[c]=function(L){for(var C=L.cells,P=L.positions,z=new Float32Array(6*C.length),j=0,R=0,V=0;V<C.length;++V)for(var D=C[V],B=0;B<3;++B){var N=P[D[B]];z[j++]=N[0],z[j++]=N[1]+1.4,R=Math.max(N[0],R)}return{data:z,shape:R}}(o(c,{triangles:!0,font:i,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var v=c.split(/(\d|\s)/),g=new Array(v.length),y=0,d=0,m=0;m<v.length;++m)g[m]=a(i,v[m]),y+=g[m].data.length,d+=g[m].shape,m>0&&(d+=.02);var w=new Float32Array(y),u=0,S=-.5*d;for(m=0;m<g.length;++m){for(var _=g[m].data,E=0;E<_.length;E+=2)w[u++]=_[E]+S,w[u++]=_[E+1];S+=g[m].shape+.02}b=f[c]={data:w,shape:d}}return b};var o=e(875),r=window||k.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(p,s,e){"use strict";var o=e(4405);function r(a,i){var c=o(getComputedStyle(a).getPropertyValue(i));return c[0]*n(c[1],a)}function n(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return function(c,h){var f=document.createElement("div");f.style["font-size"]="128"+c,h.appendChild(f);var b=r(f,"font-size")/128;return h.removeChild(f),b}(a,i);case"em":return r(i,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}p.exports=n},3440:function(p,s,e){"use strict";p.exports=function(d){var m=(d=d||{}).center||[0,0,0],w=d.up||[0,1,0],u=d.right||b(w),S=d.radius||1,_=d.theta||0,E=d.phi||0;if(m=[].slice.call(m,0,3),w=[].slice.call(w,0,3),i(w,w),u=[].slice.call(u,0,3),i(u,u),"eye"in d){var L=d.eye,C=[L[0]-m[0],L[1]-m[1],L[2]-m[2]];a(u,C,w),h(u[0],u[1],u[2])<1e-6?u=b(w):i(u,u),S=h(C[0],C[1],C[2]);var P=c(w,C)/S,z=c(u,C)/S;E=Math.acos(P),_=Math.acos(z)}return S=Math.log(S),new v(d.zoomMin,d.zoomMax,m,w,u,S,_,E)};var o=e(8444),r=e(7437),n=e(4422),a=e(903),i=e(899),c=e(9305);function h(d,m,w){return Math.sqrt(Math.pow(d,2)+Math.pow(m,2)+Math.pow(w,2))}function f(d){return Math.min(1,Math.max(-1,d))}function b(d){var m=Math.abs(d[0]),w=Math.abs(d[1]),u=Math.abs(d[2]),S=[0,0,0];m>Math.max(w,u)?S[2]=1:w>Math.max(m,u)?S[0]=1:S[1]=1;for(var _=0,E=0,L=0;L<3;++L)_+=d[L]*d[L],E+=S[L]*d[L];for(L=0;L<3;++L)S[L]-=E/_*d[L];return i(S,S),S}function v(d,m,w,u,S,_,E,L){this.center=o(w),this.up=o(u),this.right=o(S),this.radius=o([_]),this.angle=o([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(d,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var g=v.prototype;g.setDistanceLimits=function(d,m){d=d>0?Math.log(d):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(d){var m=this.radius.bounds[0];return d?(d[0]=Math.exp(m[0][0]),d[1]=Math.exp(m[1][0]),d):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.recalcMatrix=function(d){this.center.curve(d),this.up.curve(d),this.right.curve(d),this.radius.curve(d),this.angle.curve(d);for(var m=this.computedUp,w=this.computedRight,u=0,S=0,_=0;_<3;++_)S+=m[_]*w[_],u+=m[_]*m[_];var E=Math.sqrt(u),L=0;for(_=0;_<3;++_)w[_]-=m[_]*S/u,L+=w[_]*w[_],m[_]/=E;var C=Math.sqrt(L);for(_=0;_<3;++_)w[_]/=C;var P=this.computedToward;a(P,m,w),i(P,P);var z=Math.exp(this.computedRadius[0]),j=this.computedAngle[0],R=this.computedAngle[1],V=Math.cos(j),D=Math.sin(j),B=Math.cos(R),N=Math.sin(R),U=this.computedCenter,J=V*B,Y=D*B,q=N,H=-V*N,X=-D*N,Q=B,ne=this.computedEye,re=this.computedMatrix;for(_=0;_<3;++_){var ae=J*w[_]+Y*P[_]+q*m[_];re[4*_+1]=H*w[_]+X*P[_]+Q*m[_],re[4*_+2]=ae,re[4*_+3]=0}var se=re[1],pe=re[5],ke=re[9],me=re[2],le=re[6],ue=re[10],Ee=pe*ue-ke*le,de=ke*me-se*ue,xe=se*le-pe*me,Te=h(Ee,de,xe);for(de/=Te,xe/=Te,re[0]=Ee/=Te,re[4]=de,re[8]=xe,_=0;_<3;++_)ne[_]=U[_]+re[2+4*_]*z;for(_=0;_<3;++_){L=0;for(var we=0;we<3;++we)L+=re[_+4*we]*ne[we];re[12+_]=-L}re[15]=1},g.getMatrix=function(d,m){this.recalcMatrix(d);var w=this.computedMatrix;if(m){for(var u=0;u<16;++u)m[u]=w[u];return m}return w};var y=[0,0,0];g.rotate=function(d,m,w,u){if(this.angle.move(d,m,w),u){this.recalcMatrix(d);var S=this.computedMatrix;y[0]=S[2],y[1]=S[6],y[2]=S[10];for(var _=this.computedUp,E=this.computedRight,L=this.computedToward,C=0;C<3;++C)S[4*C]=_[C],S[4*C+1]=E[C],S[4*C+2]=L[C];for(n(S,S,u,y),C=0;C<3;++C)_[C]=S[4*C],E[C]=S[4*C+1];this.up.set(d,_[0],_[1],_[2]),this.right.set(d,E[0],E[1],E[2])}},g.pan=function(d,m,w,u){m=m||0,w=w||0,u=u||0,this.recalcMatrix(d);var S=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],L=S[9],C=h(_,E,L),P=S[0],z=S[4],j=S[8],R=P*(_/=C)+z*(E/=C)+j*(L/=C),V=h(P-=_*R,z-=E*R,j-=L*R),D=(P/=V)*m+_*w,B=(z/=V)*m+E*w,N=(j/=V)*m+L*w;this.center.move(d,D,B,N);var U=Math.exp(this.computedRadius[0]);U=Math.max(1e-4,U+u),this.radius.set(d,Math.log(U))},g.translate=function(d,m,w,u){this.center.move(d,m||0,w||0,u||0)},g.setMatrix=function(d,m,w,u){var S=1;"number"==typeof w&&(S=0|w),(S<0||S>3)&&(S=1);var _=(S+2)%3;m||(this.recalcMatrix(d),m=this.computedMatrix);var E=m[S],L=m[S+4],C=m[S+8];if(u){var P=Math.abs(E),z=Math.abs(L),j=Math.abs(C),R=Math.max(P,z,j);P===R?(E=E<0?-1:1,L=C=0):j===R?(C=C<0?-1:1,E=L=0):(L=L<0?-1:1,E=C=0)}else{var V=h(E,L,C);E/=V,L/=V,C/=V}var D,B,N=m[_],U=m[_+4],J=m[_+8],Y=N*E+U*L+J*C,q=h(N-=E*Y,U-=L*Y,J-=C*Y),H=L*(J/=q)-C*(U/=q),X=C*(N/=q)-E*J,Q=E*U-L*N,ne=h(H,X,Q);if(H/=ne,X/=ne,Q/=ne,this.center.jump(d,ye,Me,Re),this.radius.idle(d),this.up.jump(d,E,L,C),this.right.jump(d,N,U,J),2===S){var re=m[1],ae=m[5],se=m[9];D=Ee<0?-Math.PI/2:Math.PI/2,B=Math.atan2(re*H+ae*X+se*Q,re*N+ae*U+se*J)}else{var me=m[2],le=m[6],ue=m[10],Ee=me*E+le*L+ue*C,de=me*N+le*U+ue*J,xe=me*H+le*X+ue*Q;D=Math.asin(f(Ee)),B=Math.atan2(xe,de)}this.angle.jump(d,B,D),this.recalcMatrix(d);var Te=m[2],we=m[6],K=m[10],oe=this.computedMatrix;r(oe,m);var he=oe[15],ye=oe[12]/he,Me=oe[13]/he,Re=oe[14]/he,Pe=Math.exp(this.computedRadius[0]);this.center.jump(d,ye-Te*Pe,Me-we*Pe,Re-K*Pe)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(d){this.center.idle(d),this.up.idle(d),this.right.idle(d),this.radius.idle(d),this.angle.idle(d)},g.flush=function(d){this.center.flush(d),this.up.flush(d),this.right.flush(d),this.radius.flush(d),this.angle.flush(d)},g.setDistance=function(d,m){m>0&&this.radius.set(d,Math.log(m))},g.lookAt=function(d,m,w,u){this.recalcMatrix(d),m=m||this.computedEye,w=w||this.computedCenter;var S=(u=u||this.computedUp)[0],_=u[1],E=u[2],L=h(S,_,E);if(!(L<1e-6)){S/=L,_/=L,E/=L;var C=m[0]-w[0],P=m[1]-w[1],z=m[2]-w[2],j=h(C,P,z);if(!(j<1e-6)){C/=j,P/=j,z/=j;var R=this.computedRight,V=R[0],D=R[1],B=R[2],N=S*V+_*D+E*B,U=h(V-=N*S,D-=N*_,B-=N*E);if(!(U<.01&&(U=h(V=_*z-E*P,D=E*C-S*z,B=S*P-_*C))<1e-6)){V/=U,D/=U,B/=U,this.up.set(d,S,_,E),this.right.set(d,V,D,B),this.center.set(d,w[0],w[1],w[2]),this.radius.set(d,Math.log(j));var J=_*B-E*D,Y=E*V-S*B,q=S*D-_*V,H=h(J,Y,q),Q=V*C+D*P+B*z,ne=(J/=H)*C+(Y/=H)*P+(q/=H)*z,re=Math.asin(f(S*C+_*P+E*z)),ae=Math.atan2(ne,Q),se=this.angle._state,pe=se[se.length-1],ke=se[se.length-2];pe%=2*Math.PI;var me=Math.abs(pe+2*Math.PI-ae),le=Math.abs(pe-ae),ue=Math.abs(pe-2*Math.PI-ae);me<le&&(pe+=2*Math.PI),ue<le&&(pe-=2*Math.PI),this.angle.jump(this.angle.lastT(),pe,ke),this.angle.set(d,ae,re)}}}}},9660:function(p){"use strict";p.exports=function(e,o,r){var n=e*o,a=s*e,i=a-(a-e),c=e-i,h=s*o,f=h-(h-o),b=o-f,v=c*b-(n-i*f-c*f-i*b);return r?(r[0]=v,r[1]=n,r):[v,n]};var s=+(Math.pow(2,27)+1)},87:function(p){"use strict";p.exports=function(s,e,o){var r=s+e,n=r-s,a=e-n,i=s-(r-n);return o?(o[0]=i+a,o[1]=r,o):[i+a,r]}},5306:function(p,s,e){"use strict";var o=e(2288),r=e(3094),n=e(2146).lW;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var a=typeof Uint8ClampedArray<"u",i=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",h=e.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=r([32,0])),h.BIGUINT64||(h.BIGUINT64=r([32,0])),h.BIGINT64||(h.BIGINT64=r([32,0])),h.BUFFER||(h.BUFFER=r([32,0]));var f=h.DATA,b=h.BUFFER;function v(R){if(R){var D=o.log2(R.length||R.byteLength);f[D].push(R)}}function g(R){R=o.nextPow2(R);var V=o.log2(R),D=f[V];return D.length>0?D.pop():new ArrayBuffer(R)}function y(R){return new Uint8Array(g(R),0,R)}function d(R){return new Uint16Array(g(2*R),0,R)}function m(R){return new Uint32Array(g(4*R),0,R)}function w(R){return new Int8Array(g(R),0,R)}function u(R){return new Int16Array(g(2*R),0,R)}function S(R){return new Int32Array(g(4*R),0,R)}function _(R){return new Float32Array(g(4*R),0,R)}function E(R){return new Float64Array(g(8*R),0,R)}function L(R){return a?new Uint8ClampedArray(g(R),0,R):y(R)}function C(R){return i?new BigUint64Array(g(8*R),0,R):null}function P(R){return c?new BigInt64Array(g(8*R),0,R):null}function z(R){return new DataView(g(R),0,R)}function j(R){R=o.nextPow2(R);var V=o.log2(R),D=b[V];return D.length>0?D.pop():new n(R)}s.free=function(R){if(n.isBuffer(R))b[o.log2(R.length)].push(R);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(R)&&(R=R.buffer),!R)return;var D=0|o.log2(R.length||R.byteLength);f[D].push(R)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(R){v(R.buffer)},s.freeArrayBuffer=v,s.freeBuffer=function(R){b[o.log2(R.length)].push(R)},s.malloc=function(R,V){if(void 0===V||"arraybuffer"===V)return g(R);switch(V){case"uint8":return y(R);case"uint16":return d(R);case"uint32":return m(R);case"int8":return w(R);case"int16":return u(R);case"int32":return S(R);case"float":case"float32":return _(R);case"double":case"float64":return E(R);case"uint8_clamped":return L(R);case"bigint64":return P(R);case"biguint64":return C(R);case"buffer":return j(R);case"data":case"dataview":return z(R);default:return null}return null},s.mallocArrayBuffer=g,s.mallocUint8=y,s.mallocUint16=d,s.mallocUint32=m,s.mallocInt8=w,s.mallocInt16=u,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=_,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=L,s.mallocBigUint64=C,s.mallocBigInt64=P,s.mallocDataView=z,s.mallocBuffer=j,s.clearCache=function(){for(var R=0;R<32;++R)h.UINT8[R].length=0,h.UINT16[R].length=0,h.UINT32[R].length=0,h.INT8[R].length=0,h.INT16[R].length=0,h.INT32[R].length=0,h.FLOAT[R].length=0,h.DOUBLE[R].length=0,h.BIGUINT64[R].length=0,h.BIGINT64[R].length=0,h.UINT8C[R].length=0,f[R].length=0,b[R].length=0}},1731:function(p){"use strict";function s(o){this.roots=new Array(o),this.ranks=new Array(o);for(var r=0;r<o;++r)this.roots[r]=r,this.ranks[r]=0}p.exports=s;var e=s.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},e.find=function(o){for(var r=o,n=this.roots;n[o]!==o;)o=n[o];for(;n[r]!==o;){var a=n[r];n[r]=o,r=a}return o},e.link=function(o,r){var n=this.find(o),a=this.find(r);if(n!==a){var i=this.ranks,c=this.roots,h=i[n],f=i[a];h<f?c[n]=a:f<h?c[a]=n:(c[a]=n,++i[n])}}},1215:function(p){"use strict";p.exports=function(s,e,o){return 0===s.length?s:e?(o||s.sort(e),function(r,n){for(var a=1,i=r.length,c=r[0],h=r[0],f=1;f<i;++f)if(h=c,n(c=r[f],h)){if(f===a){a++;continue}r[a++]=c}return r.length=a,r}(s,e)):(o||s.sort(),function(r){for(var n=1,a=r.length,i=r[0],c=r[0],h=1;h<a;++h,c=i)if(c=i,(i=r[h])!==c){if(h===n){n++;continue}r[n++]=i}return r.length=n,r}(s))}},875:function(p,s,e){"use strict";p.exports=function(a,i){return"object"==typeof i&&null!==i||(i={}),o(a,i.canvas||r,i.context||n,i)};var o=e(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(p,s,e){p.exports=function(d,m,w,u){var S=64,_=1.25,E={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(S=u.size),u.lineSpacing&&u.lineSpacing>0&&(_=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(E.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(E.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(E.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(E.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(E.superscripts=!!u.styletags.superscripts)),w.font=[u.fontStyle,u.fontVariant,u.fontWeight,S+"px",u.font].filter(function(L){return L}).join(" "),w.textAlign="start",w.textBaseline="alphabetic",w.direction="ltr",y(function(L,C,P,z,j,R){P=(P=P.replace(/\n/g,"")).replace(/\<br\>/g,!0===R.breaklines?"\n":" ");var V="",D=[];for(J=0;J<P.length;++J)D[J]=V;!0===R.bolds&&(D=b("b",h,P,D)),!0===R.italics&&(D=b("i",f,P,D)),!0===R.superscripts&&(D=b("sup","+1",P,D)),!0===R.subscripts&&(D=b("sub","-1",P,D));var B=[],N="";for(J=0;J<P.length;++J)null!==D[J]&&(N+=P[J],B.push(D[J]));var U,J,Y,q,H,X=N.split("\n"),Q=X.length,ne=Math.round(j*z),re=z,ae=2*z,se=0,pe=Q*ne+ae;L.height<pe&&(L.height=pe),C.fillStyle="#000",C.fillRect(0,0,L.width,L.height),C.fillStyle="#fff";var ke=0,me="";function le(){if(""!==me){var oe=C.measureText(me).width;C.fillText(me,re+Y,ae+q),Y+=oe}}function ue(){return Math.round(H)+"px "}function Ee(oe,he){var ye=""+C.font;if(!0===R.subscripts){var Me=oe.indexOf("-"),Re=he.indexOf("-"),Pe=Me>-1?parseInt(oe[1+Me]):0,De=Re>-1?parseInt(he[1+Re]):0;Pe!==De&&(ye=ye.replace(ue(),"?px "),H*=Math.pow(.75,De-Pe),ye=ye.replace("?px ",ue())),q+=.25*ne*(De-Pe)}if(!0===R.superscripts){var fe=oe.indexOf("+"),ge=he.indexOf("+"),be=fe>-1?parseInt(oe[1+fe]):0,Ie=ge>-1?parseInt(he[1+ge]):0;be!==Ie&&(ye=ye.replace(ue(),"?px "),H*=Math.pow(.75,Ie-be),ye=ye.replace("?px ",ue())),q-=.25*ne*(Ie-be)}if(!0===R.bolds){var He=oe.indexOf(h)>-1,Ve=he.indexOf(h)>-1;!He&&Ve&&(ye=tt?ye.replace("italic ","italic bold "):"bold "+ye),He&&!Ve&&(ye=ye.replace("bold ",""))}if(!0===R.italics){var tt=oe.indexOf(f)>-1,nt=he.indexOf(f)>-1;!tt&&nt&&(ye="italic "+ye),tt&&!nt&&(ye=ye.replace("italic ",""))}C.font=ye}for(U=0;U<Q;++U){var de=X[U]+"\n";for(Y=0,q=U*ne,H=z,me="",J=0;J<de.length;++J){var xe=J+ke<B.length?B[J+ke]:B[B.length-1];V===xe?me+=de[J]:(le(),me=de[J],void 0!==xe&&(Ee(V,xe),V=xe))}le(),ke+=de.length;var Te=0|Math.round(Y+2*re);se<Te&&(se=Te)}var we=se,K=ae+ne*Q;return r(C.getImageData(0,0,we,K).data,[K,we,4]).pick(-1,-1,0).transpose(1,0)}(m,w,d,S,_,E),u,S)},p.exports.processPixels=y;var o=e(4162),r=e(5050),n=e(8243),a=e(197),i=e(7761),c=e(8040),h="b|",f="i|";function b(d,m,w,u){for(var S="<"+d+">",_="</"+d+">",E=S.length,L=_.length,C="+"===m[0]||"-"===m[0],P=0,z=-L;P>-1&&-1!==(P=w.indexOf(S,P))&&-1!==(z=w.indexOf(_,P+E))&&!(z<=P);){for(var j=P;j<z+L;++j)if(j<P+E||j>=z)u[j]=null,w=w.substr(0,j)+" "+w.substr(j+1);else if(null!==u[j]){var R=u[j].indexOf(m[0]);-1===R?u[j]+=m:C&&(u[j]=u[j].substr(0,R+1)+(1+parseInt(u[j][R+1]))+u[j].substr(R+2))}var V=P+E,D=w.substr(V,z-V).indexOf(S);P=-1!==D?D:z+L}return u}function g(d,m,w,u){var S=function v(d,m){var w=o(d,128);return m?n(w.cells,w.positions,.25):{edges:w.cells,positions:w.positions}}(d,u),_=function(U,J,Y){for(var q=J.textAlign||"start",H=J.textBaseline||"alphabetic",X=[1<<30,1<<30],Q=[0,0],ne=U.length,re=0;re<ne;++re)for(var ae=U[re],se=0;se<2;++se)X[se]=0|Math.min(X[se],ae[se]),Q[se]=0|Math.max(Q[se],ae[se]);var pe=0;switch(q){case"center":pe=-.5*(X[0]+Q[0]);break;case"right":case"end":pe=-Q[0];break;case"left":case"start":pe=-X[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+q+"'")}var ke=0;switch(H){case"hanging":case"top":ke=-X[1];break;case"middle":ke=-.5*(X[1]+Q[1]);break;case"alphabetic":case"ideographic":ke=-3*Y;break;case"bottom":ke=-Q[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+H+"'")}var me=1/Y;return"lineHeight"in J?me*=+J.lineHeight:"width"in J?me=J.width/(Q[0]-X[0]):"height"in J&&(me=J.height/(Q[1]-X[1])),U.map(function(le){return[me*(le[0]+pe),me*(le[1]+ke)]})}(S.positions,m,w),E=S.edges,L="ccw"===m.orientation;if(a(_,E),m.polygons||m.polygon||m.polyline){for(var C=c(E,_),P=new Array(C.length),z=0;z<C.length;++z){for(var j=C[z],R=new Array(j.length),V=0;V<j.length;++V){for(var D=j[V],B=new Array(D.length),N=0;N<D.length;++N)B[N]=_[D[N]].slice();L&&B.reverse(),R[V]=B}P[z]=R}return P}return m.triangles||m.triangulate||m.triangle?{cells:i(_,E,{delaunay:!1,exterior:!1,interior:!0}),positions:_}:{edges:E,positions:_}}function y(d,m,w){try{return g(d,m,w,!0)}catch{}try{return g(d,m,w,!1)}catch{}return m.polygons||m.polyline||m.polygon?[]:m.triangles||m.triangulate||m.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(p){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var s=!1;if("function"==typeof WeakMap){var e=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var o=new e,r=Object.freeze({});if(o.set(r,1),1===o.get(r))return void(p.exports=WeakMap);s=!0}}var n=Object.getOwnPropertyNames,a=Object.defineProperty,i=Object.isExtensible,c="weakmap:",h="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var f=new ArrayBuffer(25),b=new Uint8Array(f);crypto.getRandomValues(b),h="weakmap:rand:"+Array.prototype.map.call(b,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(w)}}),"getPropertyNames"in Object){var v=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return v(E).filter(w)}})}!function(){var E=Object.freeze;a(Object,"freeze",{value:function(P){return u(P),E(P)}});var L=Object.seal;a(Object,"seal",{value:function(P){return u(P),L(P)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(P){return u(P),C(P)}})}();var g=!1,y=0,d=function(){this instanceof d||_();var E=[],L=[],C=y++;return Object.create(d.prototype,{get___:{value:S(function(P,z){var j,R=u(P);return R?C in R?R[C]:z:(j=E.indexOf(P))>=0?L[j]:z})},has___:{value:S(function(P){var z=u(P);return z?C in z:E.indexOf(P)>=0})},set___:{value:S(function(P,z){var j,R=u(P);return R?R[C]=z:(j=E.indexOf(P))>=0?L[j]=z:(L[j=E.length]=z,E[j]=P),this})},delete___:{value:S(function(P){var z,j,R=u(P);return R?C in R&&delete R[C]:!((z=E.indexOf(P))<0||(j=E.length-1,E[z]=void 0,L[z]=L[j],E[z]=E[j],E.length=j,L.length=j,0))})}})};d.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof e?function(){function E(){this instanceof d||_();var L,C=new e,P=void 0,z=!1;return L=s?function(j,R){return C.set(j,R),C.has(j)||(P||(P=new d),P.set(j,R)),this}:function(j,R){if(z)try{C.set(j,R)}catch{P||(P=new d),P.set___(j,R)}else C.set(j,R);return this},Object.create(d.prototype,{get___:{value:S(function(j,R){return P?C.has(j)?C.get(j):P.get___(j,R):C.get(j,R)})},has___:{value:S(function(j){return C.has(j)||!!P&&P.has___(j)})},set___:{value:S(L)},delete___:{value:S(function(j){var R=!!C.delete(j);return P&&P.delete___(j)||R})},permitHostObjects___:{value:S(function(j){if(j!==m)throw new Error("bogus call to permitHostObjects___");z=!0})}})}s&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=d.prototype,p.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),p.exports=d)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function w(E){return!(E.substr(0,c.length)==c&&"___"===E.substr(E.length-3))}function u(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[h];if(L&&L.key===E)return L;if(i(E)){L={key:E};try{return a(E,h,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function _(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(p,s,e){var o=e(7178);p.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:o(n,r)}}},7178:function(p){p.exports=function(s,e){var o={identity:e},r=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(n){return n!==e?r.apply(this,arguments):o},writable:!0}),o}},4037:function(p,s,e){var o=e(9222);p.exports=function(){var r=o();return{get:function(n,a){var i=r(n);return i.hasOwnProperty("value")?i.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(p){"use strict";var s,e;p.exports=(s=function(){return function(s,e,o,r,n,a){var i=s[0],c=o[0],h=[0],f=c;r|=0;var b=0,v=c;for(b=0;b<i;++b){var g=e[r]-a,y=e[r+f]-a;g>=0!=y>=0&&n.push(h[0]+.5+.5*(g+y)/(g-y)),r+=v,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),e={},function(o,r,n){var a=o.dtype,i=o.order,c=[a,i.join()].join(),h=e[c];return h||(e[c]=h=s([a,i])),h(o.shape.slice(0),o.data,o.stride,0|o.offset,r,n)})},9584:function(p,s,e){"use strict";p.exports=function(r,n){var a=[];return n=+n||0,o(r.hi(r.shape[0]-1),a,n),a};var o=e(6183)},6601:function(){}},T={};function x(p){var s=T[p];if(void 0!==s)return s.exports;var e=T[p]={id:p,loaded:!1,exports:{}};return l[p].call(e.exports,e,e.exports,x),e.loaded=!0,e.exports}return x.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),x.nmd=function(p){return p.paths=[],p.children||(p.children=[]),p},x(7386)}()},$.exports=M()},12856:function($,I,t){"use strict";function M(K,oe){if(!(K instanceof oe))throw new TypeError("Cannot call a class as a function")}function l(K,oe){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,ye){return he.__proto__=ye,he})(K,oe)}function T(K,oe){if(oe&&("object"===s(oe)||"function"==typeof oe))return oe;if(void 0!==oe)throw new TypeError("Derived constructors may only return object or undefined");return x(K)}function x(K){if(void 0===K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K}function p(K){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)})(K)}function s(K){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(oe){return typeof oe}:function(oe){return oe&&"function"==typeof Symbol&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe})(K)}var e=t(95341),o=t(95280),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;I.Buffer=i,I.SlowBuffer=function(K){return+K!=K&&(K=0),i.alloc(+K)},I.INSPECT_MAX_BYTES=50;var n=2147483647;function a(K){if(K>n)throw new RangeError('The value "'+K+'" is invalid for option "size"');var oe=new Uint8Array(K);return Object.setPrototypeOf(oe,i.prototype),oe}function i(K,oe,he){if("number"==typeof K){if("string"==typeof oe)throw new TypeError('The "string" argument must be of type string. Received type number');return f(K)}return c(K,oe,he)}function c(K,oe,he){if("string"==typeof K)return function(Re,Pe){if("string"==typeof Pe&&""!==Pe||(Pe="utf8"),!i.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var De=0|y(Re,Pe),fe=a(De),ge=fe.write(Re,Pe);return ge!==De&&(fe=fe.slice(0,ge)),fe}(K,oe);if(ArrayBuffer.isView(K))return function(Re){if(Ee(Re,Uint8Array)){var Pe=new Uint8Array(Re);return v(Pe.buffer,Pe.byteOffset,Pe.byteLength)}return b(Re)}(K);if(null==K)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(K));if(Ee(K,ArrayBuffer)||K&&Ee(K.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(K,SharedArrayBuffer)||K&&Ee(K.buffer,SharedArrayBuffer)))return v(K,oe,he);if("number"==typeof K)throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=K.valueOf&&K.valueOf();if(null!=ye&&ye!==K)return i.from(ye,oe,he);var Me=function(Re){if(i.isBuffer(Re)){var Pe=0|g(Re.length),De=a(Pe);return 0===De.length||Re.copy(De,0,0,Pe),De}return void 0!==Re.length?"number"!=typeof Re.length||de(Re.length)?a(0):b(Re):"Buffer"===Re.type&&Array.isArray(Re.data)?b(Re.data):void 0}(K);if(Me)return Me;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof K[Symbol.toPrimitive])return i.from(K[Symbol.toPrimitive]("string"),oe,he);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(K))}function h(K){if("number"!=typeof K)throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function f(K){return h(K),a(K<0?0:0|g(K))}function b(K){for(var oe=K.length<0?0:0|g(K.length),he=a(oe),ye=0;ye<oe;ye+=1)he[ye]=255&K[ye];return he}function v(K,oe,he){if(oe<0||K.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<oe+(he||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return ye=void 0===oe&&void 0===he?new Uint8Array(K):void 0===he?new Uint8Array(K,oe):new Uint8Array(K,oe,he),Object.setPrototypeOf(ye,i.prototype),ye}function g(K){if(K>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|K}function y(K,oe){if(i.isBuffer(K))return K.length;if(ArrayBuffer.isView(K)||Ee(K,ArrayBuffer))return K.byteLength;if("string"!=typeof K)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+s(K));var he=K.length,ye=arguments.length>2&&!0===arguments[2];if(!ye&&0===he)return 0;for(var Me=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return he;case"utf8":case"utf-8":return me(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*he;case"hex":return he>>>1;case"base64":return le(K).length;default:if(Me)return ye?-1:me(K).length;oe=(""+oe).toLowerCase(),Me=!0}}function d(K,oe,he){var ye=!1;if((void 0===oe||oe<0)&&(oe=0),oe>this.length||((void 0===he||he>this.length)&&(he=this.length),he<=0)||(he>>>=0)<=(oe>>>=0))return"";for(K||(K="utf8");;)switch(K){case"hex":return D(this,oe,he);case"utf8":case"utf-8":return z(this,oe,he);case"ascii":return R(this,oe,he);case"latin1":case"binary":return V(this,oe,he);case"base64":return P(this,oe,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,oe,he);default:if(ye)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),ye=!0}}function m(K,oe,he){var ye=K[oe];K[oe]=K[he],K[he]=ye}function w(K,oe,he,ye,Me){if(0===K.length)return-1;if("string"==typeof he?(ye=he,he=0):he>2147483647?he=2147483647:he<-2147483648&&(he=-2147483648),de(he=+he)&&(he=Me?0:K.length-1),he<0&&(he=K.length+he),he>=K.length){if(Me)return-1;he=K.length-1}else if(he<0){if(!Me)return-1;he=0}if("string"==typeof oe&&(oe=i.from(oe,ye)),i.isBuffer(oe))return 0===oe.length?-1:u(K,oe,he,ye,Me);if("number"==typeof oe)return oe&=255,"function"==typeof Uint8Array.prototype.indexOf?Me?Uint8Array.prototype.indexOf.call(K,oe,he):Uint8Array.prototype.lastIndexOf.call(K,oe,he):u(K,[oe],he,ye,Me);throw new TypeError("val must be string, number or Buffer")}function u(K,oe,he,ye,Me){var Re,Pe=1,De=K.length,fe=oe.length;if(void 0!==ye&&("ucs2"===(ye=String(ye).toLowerCase())||"ucs-2"===ye||"utf16le"===ye||"utf-16le"===ye)){if(K.length<2||oe.length<2)return-1;Pe=2,De/=2,fe/=2,he/=2}function ge(Ve,tt){return 1===Pe?Ve[tt]:Ve.readUInt16BE(tt*Pe)}if(Me){var be=-1;for(Re=he;Re<De;Re++)if(ge(K,Re)===ge(oe,-1===be?0:Re-be)){if(-1===be&&(be=Re),Re-be+1===fe)return be*Pe}else-1!==be&&(Re-=Re-be),be=-1}else for(he+fe>De&&(he=De-fe),Re=he;Re>=0;Re--){for(var Ie=!0,He=0;He<fe;He++)if(ge(K,Re+He)!==ge(oe,He)){Ie=!1;break}if(Ie)return Re}return-1}function S(K,oe,he,ye){he=Number(he)||0;var Me=K.length-he;ye?(ye=Number(ye))>Me&&(ye=Me):ye=Me;var Re,Pe=oe.length;for(ye>Pe/2&&(ye=Pe/2),Re=0;Re<ye;++Re){var De=parseInt(oe.substr(2*Re,2),16);if(de(De))return Re;K[he+Re]=De}return Re}function _(K,oe,he,ye){return ue(me(oe,K.length-he),K,he,ye)}function E(K,oe,he,ye){return ue(function(Me){for(var Re=[],Pe=0;Pe<Me.length;++Pe)Re.push(255&Me.charCodeAt(Pe));return Re}(oe),K,he,ye)}function L(K,oe,he,ye){return ue(le(oe),K,he,ye)}function C(K,oe,he,ye){return ue(function(Me,Re){for(var Pe,De,ge=[],be=0;be<Me.length&&!((Re-=2)<0);++be)De=(Pe=Me.charCodeAt(be))>>8,ge.push(Pe%256),ge.push(De);return ge}(oe,K.length-he),K,he,ye)}function P(K,oe,he){return e.fromByteArray(0===oe&&he===K.length?K:K.slice(oe,he))}function z(K,oe,he){he=Math.min(K.length,he);for(var ye=[],Me=oe;Me<he;){var Re=K[Me],Pe=null,De=Re>239?4:Re>223?3:Re>191?2:1;if(Me+De<=he){var fe=void 0,ge=void 0,be=void 0,Ie=void 0;switch(De){case 1:Re<128&&(Pe=Re);break;case 2:128==(192&(fe=K[Me+1]))&&(Ie=(31&Re)<<6|63&fe)>127&&(Pe=Ie);break;case 3:ge=K[Me+2],128==(192&(fe=K[Me+1]))&&128==(192&ge)&&(Ie=(15&Re)<<12|(63&fe)<<6|63&ge)>2047&&(Ie<55296||Ie>57343)&&(Pe=Ie);break;case 4:ge=K[Me+2],be=K[Me+3],128==(192&(fe=K[Me+1]))&&128==(192&ge)&&128==(192&be)&&(Ie=(15&Re)<<18|(63&fe)<<12|(63&ge)<<6|63&be)>65535&&Ie<1114112&&(Pe=Ie)}}null===Pe?(Pe=65533,De=1):Pe>65535&&(ye.push((Pe-=65536)>>>10&1023|55296),Pe=56320|1023&Pe),ye.push(Pe),Me+=De}return function(He){var Ve=He.length;if(Ve<=j)return String.fromCharCode.apply(String,He);for(var tt="",nt=0;nt<Ve;)tt+=String.fromCharCode.apply(String,He.slice(nt,nt+=j));return tt}(ye)}I.kMaxLength=n,(i.TYPED_ARRAY_SUPPORT=function(){try{var K=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(K,oe),42===K.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(K,oe,he){return c(K,oe,he)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(K,oe,he){return Me=oe,Re=he,h(ye=K),ye<=0?a(ye):void 0!==Me?"string"==typeof Re?a(ye).fill(Me,Re):a(ye).fill(Me):a(ye);var ye,Me,Re},i.allocUnsafe=function(K){return f(K)},i.allocUnsafeSlow=function(K){return f(K)},i.isBuffer=function(K){return null!=K&&!0===K._isBuffer&&K!==i.prototype},i.compare=function(K,oe){if(Ee(K,Uint8Array)&&(K=i.from(K,K.offset,K.byteLength)),Ee(oe,Uint8Array)&&(oe=i.from(oe,oe.offset,oe.byteLength)),!i.isBuffer(K)||!i.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(K===oe)return 0;for(var he=K.length,ye=oe.length,Me=0,Re=Math.min(he,ye);Me<Re;++Me)if(K[Me]!==oe[Me]){he=K[Me],ye=oe[Me];break}return he<ye?-1:ye<he?1:0},i.isEncoding=function(K){switch(String(K).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(K,oe){if(!Array.isArray(K))throw new TypeError('"list" argument must be an Array of Buffers');if(0===K.length)return i.alloc(0);var he;if(void 0===oe)for(oe=0,he=0;he<K.length;++he)oe+=K[he].length;var ye=i.allocUnsafe(oe),Me=0;for(he=0;he<K.length;++he){var Re=K[he];if(Ee(Re,Uint8Array))Me+Re.length>ye.length?(i.isBuffer(Re)||(Re=i.from(Re)),Re.copy(ye,Me)):Uint8Array.prototype.set.call(ye,Re,Me);else{if(!i.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(ye,Me)}Me+=Re.length}return ye},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var K=this.length;if(K%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<K;oe+=2)m(this,oe,oe+1);return this},i.prototype.swap32=function(){var K=this.length;if(K%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<K;oe+=4)m(this,oe,oe+3),m(this,oe+1,oe+2);return this},i.prototype.swap64=function(){var K=this.length;if(K%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<K;oe+=8)m(this,oe,oe+7),m(this,oe+1,oe+6),m(this,oe+2,oe+5),m(this,oe+3,oe+4);return this},i.prototype.toString=function(){var K=this.length;return 0===K?"":0===arguments.length?z(this,0,K):d.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(K){if(!i.isBuffer(K))throw new TypeError("Argument must be a Buffer");return this===K||0===i.compare(this,K)},i.prototype.inspect=function(){var K="",oe=I.INSPECT_MAX_BYTES;return K=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(K+=" ... "),"<Buffer "+K+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(K,oe,he,ye,Me){if(Ee(K,Uint8Array)&&(K=i.from(K,K.offset,K.byteLength)),!i.isBuffer(K))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+s(K));if(void 0===oe&&(oe=0),void 0===he&&(he=K?K.length:0),void 0===ye&&(ye=0),void 0===Me&&(Me=this.length),oe<0||he>K.length||ye<0||Me>this.length)throw new RangeError("out of range index");if(ye>=Me&&oe>=he)return 0;if(ye>=Me)return-1;if(oe>=he)return 1;if(this===K)return 0;for(var Re=(Me>>>=0)-(ye>>>=0),Pe=(he>>>=0)-(oe>>>=0),De=Math.min(Re,Pe),fe=this.slice(ye,Me),ge=K.slice(oe,he),be=0;be<De;++be)if(fe[be]!==ge[be]){Re=fe[be],Pe=ge[be];break}return Re<Pe?-1:Pe<Re?1:0},i.prototype.includes=function(K,oe,he){return-1!==this.indexOf(K,oe,he)},i.prototype.indexOf=function(K,oe,he){return w(this,K,oe,he,!0)},i.prototype.lastIndexOf=function(K,oe,he){return w(this,K,oe,he,!1)},i.prototype.write=function(K,oe,he,ye){if(void 0===oe)ye="utf8",he=this.length,oe=0;else if(void 0===he&&"string"==typeof oe)ye=oe,he=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(he)?(he>>>=0,void 0===ye&&(ye="utf8")):(ye=he,he=void 0)}var Me=this.length-oe;if((void 0===he||he>Me)&&(he=Me),K.length>0&&(he<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");for(var Re=!1;;)switch(ye){case"hex":return S(this,K,oe,he);case"utf8":case"utf-8":return _(this,K,oe,he);case"ascii":case"latin1":case"binary":return E(this,K,oe,he);case"base64":return L(this,K,oe,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,K,oe,he);default:if(Re)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Re=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function R(K,oe,he){var ye="";he=Math.min(K.length,he);for(var Me=oe;Me<he;++Me)ye+=String.fromCharCode(127&K[Me]);return ye}function V(K,oe,he){var ye="";he=Math.min(K.length,he);for(var Me=oe;Me<he;++Me)ye+=String.fromCharCode(K[Me]);return ye}function D(K,oe,he){var ye=K.length;(!oe||oe<0)&&(oe=0),(!he||he<0||he>ye)&&(he=ye);for(var Me="",Re=oe;Re<he;++Re)Me+=xe[K[Re]];return Me}function B(K,oe,he){for(var ye=K.slice(oe,he),Me="",Re=0;Re<ye.length-1;Re+=2)Me+=String.fromCharCode(ye[Re]+256*ye[Re+1]);return Me}function N(K,oe,he){if(K%1!=0||K<0)throw new RangeError("offset is not uint");if(K+oe>he)throw new RangeError("Trying to access beyond buffer length")}function U(K,oe,he,ye,Me,Re){if(!i.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>Me||oe<Re)throw new RangeError('"value" argument is out of bounds');if(he+ye>K.length)throw new RangeError("Index out of range")}function J(K,oe,he,ye,Me){ae(oe,ye,Me,K,he,7);var Re=Number(oe&BigInt(4294967295));K[he++]=Re,K[he++]=Re>>=8,K[he++]=Re>>=8,K[he++]=Re>>=8;var Pe=Number(oe>>BigInt(32)&BigInt(4294967295));return K[he++]=Pe,K[he++]=Pe>>=8,K[he++]=Pe>>=8,K[he++]=Pe>>=8,he}function Y(K,oe,he,ye,Me){ae(oe,ye,Me,K,he,7);var Re=Number(oe&BigInt(4294967295));K[he+7]=Re,K[he+6]=Re>>=8,K[he+5]=Re>>=8,K[he+4]=Re>>=8;var Pe=Number(oe>>BigInt(32)&BigInt(4294967295));return K[he+3]=Pe,K[he+2]=Pe>>=8,K[he+1]=Pe>>=8,K[he]=Pe>>=8,he+8}function q(K,oe,he,ye,Me,Re){if(he+ye>K.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("Index out of range")}function H(K,oe,he,ye,Me){return oe=+oe,he>>>=0,Me||q(K,0,he,4),o.write(K,oe,he,ye,23,4),he+4}function X(K,oe,he,ye,Me){return oe=+oe,he>>>=0,Me||q(K,0,he,8),o.write(K,oe,he,ye,52,8),he+8}i.prototype.slice=function(K,oe){var he=this.length;(K=~~K)<0?(K+=he)<0&&(K=0):K>he&&(K=he),(oe=void 0===oe?he:~~oe)<0?(oe+=he)<0&&(oe=0):oe>he&&(oe=he),oe<K&&(oe=K);var ye=this.subarray(K,oe);return Object.setPrototypeOf(ye,i.prototype),ye},i.prototype.readUintLE=i.prototype.readUIntLE=function(K,oe,he){K>>>=0,oe>>>=0,he||N(K,oe,this.length);for(var ye=this[K],Me=1,Re=0;++Re<oe&&(Me*=256);)ye+=this[K+Re]*Me;return ye},i.prototype.readUintBE=i.prototype.readUIntBE=function(K,oe,he){K>>>=0,oe>>>=0,he||N(K,oe,this.length);for(var ye=this[K+--oe],Me=1;oe>0&&(Me*=256);)ye+=this[K+--oe]*Me;return ye},i.prototype.readUint8=i.prototype.readUInt8=function(K,oe){return K>>>=0,oe||N(K,1,this.length),this[K]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(K,oe){return K>>>=0,oe||N(K,2,this.length),this[K]|this[K+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(K,oe){return K>>>=0,oe||N(K,2,this.length),this[K]<<8|this[K+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(K,oe){return K>>>=0,oe||N(K,4,this.length),(this[K]|this[K+1]<<8|this[K+2]<<16)+16777216*this[K+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(K,oe){return K>>>=0,oe||N(K,4,this.length),16777216*this[K]+(this[K+1]<<16|this[K+2]<<8|this[K+3])},i.prototype.readBigUInt64LE=Te(function(K){se(K>>>=0,"offset");var oe=this[K],he=this[K+7];void 0!==oe&&void 0!==he||pe(K,this.length-8);var ye=oe+this[++K]*Math.pow(2,8)+this[++K]*Math.pow(2,16)+this[++K]*Math.pow(2,24),Me=this[++K]+this[++K]*Math.pow(2,8)+this[++K]*Math.pow(2,16)+he*Math.pow(2,24);return BigInt(ye)+(BigInt(Me)<<BigInt(32))}),i.prototype.readBigUInt64BE=Te(function(K){se(K>>>=0,"offset");var oe=this[K],he=this[K+7];void 0!==oe&&void 0!==he||pe(K,this.length-8);var ye=oe*Math.pow(2,24)+this[++K]*Math.pow(2,16)+this[++K]*Math.pow(2,8)+this[++K],Me=this[++K]*Math.pow(2,24)+this[++K]*Math.pow(2,16)+this[++K]*Math.pow(2,8)+he;return(BigInt(ye)<<BigInt(32))+BigInt(Me)}),i.prototype.readIntLE=function(K,oe,he){K>>>=0,oe>>>=0,he||N(K,oe,this.length);for(var ye=this[K],Me=1,Re=0;++Re<oe&&(Me*=256);)ye+=this[K+Re]*Me;return ye>=(Me*=128)&&(ye-=Math.pow(2,8*oe)),ye},i.prototype.readIntBE=function(K,oe,he){K>>>=0,oe>>>=0,he||N(K,oe,this.length);for(var ye=oe,Me=1,Re=this[K+--ye];ye>0&&(Me*=256);)Re+=this[K+--ye]*Me;return Re>=(Me*=128)&&(Re-=Math.pow(2,8*oe)),Re},i.prototype.readInt8=function(K,oe){return K>>>=0,oe||N(K,1,this.length),128&this[K]?-1*(255-this[K]+1):this[K]},i.prototype.readInt16LE=function(K,oe){K>>>=0,oe||N(K,2,this.length);var he=this[K]|this[K+1]<<8;return 32768&he?4294901760|he:he},i.prototype.readInt16BE=function(K,oe){K>>>=0,oe||N(K,2,this.length);var he=this[K+1]|this[K]<<8;return 32768&he?4294901760|he:he},i.prototype.readInt32LE=function(K,oe){return K>>>=0,oe||N(K,4,this.length),this[K]|this[K+1]<<8|this[K+2]<<16|this[K+3]<<24},i.prototype.readInt32BE=function(K,oe){return K>>>=0,oe||N(K,4,this.length),this[K]<<24|this[K+1]<<16|this[K+2]<<8|this[K+3]},i.prototype.readBigInt64LE=Te(function(K){se(K>>>=0,"offset");var oe=this[K],he=this[K+7];void 0!==oe&&void 0!==he||pe(K,this.length-8);var ye=this[K+4]+this[K+5]*Math.pow(2,8)+this[K+6]*Math.pow(2,16)+(he<<24);return(BigInt(ye)<<BigInt(32))+BigInt(oe+this[++K]*Math.pow(2,8)+this[++K]*Math.pow(2,16)+this[++K]*Math.pow(2,24))}),i.prototype.readBigInt64BE=Te(function(K){se(K>>>=0,"offset");var oe=this[K],he=this[K+7];void 0!==oe&&void 0!==he||pe(K,this.length-8);var ye=(oe<<24)+this[++K]*Math.pow(2,16)+this[++K]*Math.pow(2,8)+this[++K];return(BigInt(ye)<<BigInt(32))+BigInt(this[++K]*Math.pow(2,24)+this[++K]*Math.pow(2,16)+this[++K]*Math.pow(2,8)+he)}),i.prototype.readFloatLE=function(K,oe){return K>>>=0,oe||N(K,4,this.length),o.read(this,K,!0,23,4)},i.prototype.readFloatBE=function(K,oe){return K>>>=0,oe||N(K,4,this.length),o.read(this,K,!1,23,4)},i.prototype.readDoubleLE=function(K,oe){return K>>>=0,oe||N(K,8,this.length),o.read(this,K,!0,52,8)},i.prototype.readDoubleBE=function(K,oe){return K>>>=0,oe||N(K,8,this.length),o.read(this,K,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(K,oe,he,ye){K=+K,oe>>>=0,he>>>=0,ye||U(this,K,oe,he,Math.pow(2,8*he)-1,0);var Me=1,Re=0;for(this[oe]=255&K;++Re<he&&(Me*=256);)this[oe+Re]=K/Me&255;return oe+he},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(K,oe,he,ye){K=+K,oe>>>=0,he>>>=0,ye||U(this,K,oe,he,Math.pow(2,8*he)-1,0);var Me=he-1,Re=1;for(this[oe+Me]=255&K;--Me>=0&&(Re*=256);)this[oe+Me]=K/Re&255;return oe+he},i.prototype.writeUint8=i.prototype.writeUInt8=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,1,255,0),this[oe]=255&K,oe+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,2,65535,0),this[oe]=255&K,this[oe+1]=K>>>8,oe+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,2,65535,0),this[oe]=K>>>8,this[oe+1]=255&K,oe+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,4,4294967295,0),this[oe+3]=K>>>24,this[oe+2]=K>>>16,this[oe+1]=K>>>8,this[oe]=255&K,oe+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,4,4294967295,0),this[oe]=K>>>24,this[oe+1]=K>>>16,this[oe+2]=K>>>8,this[oe+3]=255&K,oe+4},i.prototype.writeBigUInt64LE=Te(function(K){return J(this,K,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Te(function(K){return Y(this,K,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(K,oe,he,ye){if(K=+K,oe>>>=0,!ye){var Me=Math.pow(2,8*he-1);U(this,K,oe,he,Me-1,-Me)}var Re=0,Pe=1,De=0;for(this[oe]=255&K;++Re<he&&(Pe*=256);)K<0&&0===De&&0!==this[oe+Re-1]&&(De=1),this[oe+Re]=(K/Pe>>0)-De&255;return oe+he},i.prototype.writeIntBE=function(K,oe,he,ye){if(K=+K,oe>>>=0,!ye){var Me=Math.pow(2,8*he-1);U(this,K,oe,he,Me-1,-Me)}var Re=he-1,Pe=1,De=0;for(this[oe+Re]=255&K;--Re>=0&&(Pe*=256);)K<0&&0===De&&0!==this[oe+Re+1]&&(De=1),this[oe+Re]=(K/Pe>>0)-De&255;return oe+he},i.prototype.writeInt8=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,1,127,-128),K<0&&(K=255+K+1),this[oe]=255&K,oe+1},i.prototype.writeInt16LE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,2,32767,-32768),this[oe]=255&K,this[oe+1]=K>>>8,oe+2},i.prototype.writeInt16BE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,2,32767,-32768),this[oe]=K>>>8,this[oe+1]=255&K,oe+2},i.prototype.writeInt32LE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,4,2147483647,-2147483648),this[oe]=255&K,this[oe+1]=K>>>8,this[oe+2]=K>>>16,this[oe+3]=K>>>24,oe+4},i.prototype.writeInt32BE=function(K,oe,he){return K=+K,oe>>>=0,he||U(this,K,oe,4,2147483647,-2147483648),K<0&&(K=4294967295+K+1),this[oe]=K>>>24,this[oe+1]=K>>>16,this[oe+2]=K>>>8,this[oe+3]=255&K,oe+4},i.prototype.writeBigInt64LE=Te(function(K){return J(this,K,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Te(function(K){return Y(this,K,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(K,oe,he){return H(this,K,oe,!0,he)},i.prototype.writeFloatBE=function(K,oe,he){return H(this,K,oe,!1,he)},i.prototype.writeDoubleLE=function(K,oe,he){return X(this,K,oe,!0,he)},i.prototype.writeDoubleBE=function(K,oe,he){return X(this,K,oe,!1,he)},i.prototype.copy=function(K,oe,he,ye){if(!i.isBuffer(K))throw new TypeError("argument should be a Buffer");if(he||(he=0),ye||0===ye||(ye=this.length),oe>=K.length&&(oe=K.length),oe||(oe=0),ye>0&&ye<he&&(ye=he),ye===he||0===K.length||0===this.length)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),K.length-oe<ye-he&&(ye=K.length-oe+he);var Me=ye-he;return this===K&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(oe,he,ye):Uint8Array.prototype.set.call(K,this.subarray(he,ye),oe),Me},i.prototype.fill=function(K,oe,he,ye){if("string"==typeof K){if("string"==typeof oe?(ye=oe,oe=0,he=this.length):"string"==typeof he&&(ye=he,he=this.length),void 0!==ye&&"string"!=typeof ye)throw new TypeError("encoding must be a string");if("string"==typeof ye&&!i.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(1===K.length){var Me=K.charCodeAt(0);("utf8"===ye&&Me<128||"latin1"===ye)&&(K=Me)}}else"number"==typeof K?K&=255:"boolean"==typeof K&&(K=Number(K));if(oe<0||this.length<oe||this.length<he)throw new RangeError("Out of range index");if(he<=oe)return this;var Re;if(oe>>>=0,he=void 0===he?this.length:he>>>0,K||(K=0),"number"==typeof K)for(Re=oe;Re<he;++Re)this[Re]=K;else{var Pe=i.isBuffer(K)?K:i.from(K,ye),De=Pe.length;if(0===De)throw new TypeError('The value "'+K+'" is invalid for argument "value"');for(Re=0;Re<he-oe;++Re)this[Re+oe]=Pe[Re%De]}return this};var Q={};function ne(K,oe,he){Q[K]=function(ye){!function(be,Ie){if("function"!=typeof Ie&&null!==Ie)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),Object.defineProperty(be,"prototype",{writable:!1}),Ie&&l(be,Ie)}(ge,ye);var Me,Re,Pe,De,fe=(Pe=ge,De=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var be,Ie=p(Pe);if(De){var He=p(this).constructor;be=Reflect.construct(Ie,arguments,He)}else be=Ie.apply(this,arguments);return T(this,be)});function ge(){var be;return M(this,ge),be=fe.call(this),Object.defineProperty(x(be),"message",{value:oe.apply(x(be),arguments),writable:!0,configurable:!0}),be.name="".concat(be.name," [").concat(K,"]"),delete be.name,be}return Me=ge,(Re=[{key:"code",get:function(){return K},set:function(be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:be,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(K,"]: ").concat(this.message)}}])&&function k(K,oe){for(var he=0;he<oe.length;he++){var ye=oe[he];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(K,ye.key,ye)}}(Me.prototype,Re),Object.defineProperty(Me,"prototype",{writable:!1}),ge}(he)}function re(K){for(var oe="",he=K.length,ye="-"===K[0]?1:0;he>=ye+4;he-=3)oe="_".concat(K.slice(he-3,he)).concat(oe);return"".concat(K.slice(0,he)).concat(oe)}function ae(K,oe,he,ye,Me,Re){if(K>he||K<oe){var Pe,De="bigint"==typeof oe?"n":"";throw Pe=Re>3?0===oe||oe===BigInt(0)?">= 0".concat(De," and < 2").concat(De," ** ").concat(8*(Re+1)).concat(De):">= -(2".concat(De," ** ").concat(8*(Re+1)-1).concat(De,") and < 2 ** ")+"".concat(8*(Re+1)-1).concat(De):">= ".concat(oe).concat(De," and <= ").concat(he).concat(De),new Q.ERR_OUT_OF_RANGE("value",Pe,K)}var fe,ge,be;fe=ye,be=Re,se(ge=Me,"offset"),void 0!==fe[ge]&&void 0!==fe[ge+be]||pe(ge,fe.length-(be+1))}function se(K,oe){if("number"!=typeof K)throw new Q.ERR_INVALID_ARG_TYPE(oe,"number",K)}function pe(K,oe,he){throw Math.floor(K)!==K?(se(K,he),new Q.ERR_OUT_OF_RANGE(he||"offset","an integer",K)):oe<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(he||"offset",">= ".concat(he?1:0," and <= ").concat(oe),K)}ne("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?"".concat(K," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function(K,oe){return'The "'.concat(K,'" argument must be of type number. Received type ').concat(s(oe))},TypeError),ne("ERR_OUT_OF_RANGE",function(K,oe,he){var ye='The value of "'.concat(K,'" is out of range.'),Me=he;return Number.isInteger(he)&&Math.abs(he)>Math.pow(2,32)?Me=re(String(he)):"bigint"==typeof he&&(Me=String(he),(he>Math.pow(BigInt(2),BigInt(32))||he<-Math.pow(BigInt(2),BigInt(32)))&&(Me=re(Me)),Me+="n"),ye+" It must be ".concat(oe,". Received ").concat(Me)},RangeError);var ke=/[^+/0-9A-Za-z-_]/g;function me(K,oe){var he;oe=oe||1/0;for(var ye=K.length,Me=null,Re=[],Pe=0;Pe<ye;++Pe){if((he=K.charCodeAt(Pe))>55295&&he<57344){if(!Me){if(he>56319){(oe-=3)>-1&&Re.push(239,191,189);continue}if(Pe+1===ye){(oe-=3)>-1&&Re.push(239,191,189);continue}Me=he;continue}if(he<56320){(oe-=3)>-1&&Re.push(239,191,189),Me=he;continue}he=65536+(Me-55296<<10|he-56320)}else Me&&(oe-=3)>-1&&Re.push(239,191,189);if(Me=null,he<128){if((oe-=1)<0)break;Re.push(he)}else if(he<2048){if((oe-=2)<0)break;Re.push(he>>6|192,63&he|128)}else if(he<65536){if((oe-=3)<0)break;Re.push(he>>12|224,he>>6&63|128,63&he|128)}else{if(!(he<1114112))throw new Error("Invalid code point");if((oe-=4)<0)break;Re.push(he>>18|240,he>>12&63|128,he>>6&63|128,63&he|128)}}return Re}function le(K){return e.toByteArray(function(oe){if((oe=(oe=oe.split("=")[0]).trim().replace(ke,"")).length<2)return"";for(;oe.length%4!=0;)oe+="=";return oe}(K))}function ue(K,oe,he,ye){var Me;for(Me=0;Me<ye&&!(Me+he>=oe.length||Me>=K.length);++Me)oe[Me+he]=K[Me];return Me}function Ee(K,oe){return K instanceof oe||null!=K&&null!=K.constructor&&null!=K.constructor.name&&K.constructor.name===oe.name}function de(K){return K!=K}var xe=function(){for(var K="0123456789abcdef",oe=new Array(256),he=0;he<16;++he)for(var ye=16*he,Me=0;Me<16;++Me)oe[ye+Me]=K[he]+K[Me];return oe}();function Te(K){return typeof BigInt>"u"?we:K}function we(){throw new Error("BigInt not supported")}},35791:function($){"use strict";$.exports=k,$.exports.isMobile=k,$.exports.default=k;var I=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,M=/android|ipad|playbook|silk/i;function k(l){l||(l={});var T=l.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&"string"==typeof T.headers["user-agent"]&&(T=T.headers["user-agent"]),"string"!=typeof T)return!1;var x=I.test(T)&&!t.test(T)||!!l.tablet&&M.test(T);return!x&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==T.indexOf("Macintosh")&&-1!==T.indexOf("Safari")&&(x=!0),x}},86781:function($,I,t){"use strict";t.r(I),t.d(I,{sankeyCenter:function(){return r},sankeyCircular:function(){return E},sankeyJustify:function(){return o},sankeyLeft:function(){return s},sankeyRight:function(){return e}});var M=t(33064),k=t(15140),l=t(45879),T=t(2502),x=t.n(T);function p(le){return le.target.depth}function s(le){return le.depth}function e(le,ue){return ue-1-le.height}function o(le,ue){return le.sourceLinks.length?le.depth:ue-1}function r(le){return le.targetLinks.length?le.depth:le.sourceLinks.length?(0,M.VV)(le.sourceLinks,p)-1:0}function n(le){return function(){return le}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(le){return typeof le}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le};function i(le,ue){return h(le.source,ue.source)||le.index-ue.index}function c(le,ue){return h(le.target,ue.target)||le.index-ue.index}function h(le,ue){return le.partOfCycle===ue.partOfCycle?le.y0-ue.y0:"top"===le.circularLinkType||"bottom"===ue.circularLinkType?-1:1}function f(le){return le.value}function b(le){return(le.y0+le.y1)/2}function v(le){return b(le.source)}function g(le){return b(le.target)}function y(le){return le.index}function d(le){return le.nodes}function m(le){return le.links}function w(le,ue){var Ee=le.get(ue);if(!Ee)throw new Error("missing: "+ue);return Ee}function u(le,ue){return ue(le)}var S=25,_=10;function E(){var le,ue,Ee=0,de=0,xe=1,Te=1,we=24,K=y,oe=o,he=d,ye=m,Me=32,Re=2,Pe=null;function De(){var Ve={nodes:he.apply(null,arguments),links:ye.apply(null,arguments)};fe(Ve),L(Ve,0,Pe),ge(Ve),be(Ve),C(Ve,K),Ie(Ve,Me,K),He(Ve);for(var tt=4,nt=0;nt<tt;nt++)re(Ve,Te,K),ae(Ve,0,K),Q(Ve,de,Te,K),re(Ve,Te,K),ae(Ve,0,K);return me(Ve,de,Te),V(Ve,Re,Te,K),Ve}function fe(Ve){Ve.nodes.forEach(function(nt,st){nt.index=st,nt.sourceLinks=[],nt.targetLinks=[]});var tt=(0,k.UI)(Ve.nodes,K);return Ve.links.forEach(function(nt,st){nt.index=st;var dt=nt.source,wt=nt.target;"object"!==(void 0===dt?"undefined":a(dt))&&(dt=nt.source=w(tt,dt)),"object"!==(void 0===wt?"undefined":a(wt))&&(wt=nt.target=w(tt,wt)),dt.sourceLinks.push(nt),wt.targetLinks.push(nt)}),Ve}function ge(Ve){Ve.nodes.forEach(function(tt){tt.partOfCycle=!1,tt.value=Math.max((0,M.Sm)(tt.sourceLinks,f),(0,M.Sm)(tt.targetLinks,f)),tt.sourceLinks.forEach(function(nt){nt.circular&&(tt.partOfCycle=!0,tt.circularLinkType=nt.circularLinkType)}),tt.targetLinks.forEach(function(nt){nt.circular&&(tt.partOfCycle=!0,tt.circularLinkType=nt.circularLinkType)})})}function be(Ve){var tt,nt,st;for(tt=Ve.nodes,nt=[],st=0;tt.length;++st,tt=nt,nt=[])tt.forEach(function(dt){dt.depth=st,dt.sourceLinks.forEach(function(wt){nt.indexOf(wt.target)<0&&!wt.circular&&nt.push(wt.target)})});for(tt=Ve.nodes,nt=[],st=0;tt.length;++st,tt=nt,nt=[])tt.forEach(function(dt){dt.height=st,dt.targetLinks.forEach(function(wt){nt.indexOf(wt.source)<0&&!wt.circular&&nt.push(wt.source)})});Ve.nodes.forEach(function(dt){dt.column=Math.floor(oe.call(null,dt,st))})}function Ie(Ve,tt,nt){var st=(0,k.b1)().key(function(Pt){return Pt.column}).sortKeys(M.j2).entries(Ve.nodes).map(function(Pt){return Pt.values});(function(Pt){if(ue){var St=1/0;st.forEach(function(Ye){var Ze=Te*ue/(Ye.length+1);St=Ze<St?Ze:St}),le=St}var Ot=(0,M.VV)(st,function(Ye){return(Te-de-(Ye.length-1)*le)/(0,M.Sm)(Ye,f)});Ot*=.3,Ve.links.forEach(function(Ye){Ye.width=Ye.value*Ot});var Ye,Ze,Ne,Je,at,Se,jt=(Ze=0,Ne=0,Je=0,at=0,Se=(0,M.Fp)((Ye=Ve).nodes,function(ze){return ze.column}),Ye.links.forEach(function(ze){ze.circular&&("top"==ze.circularLinkType?Ze+=ze.width:Ne+=ze.width,0==ze.target.column&&(at+=ze.width),ze.source.column==Se&&(Je+=ze.width))}),{top:Ze=Ze>0?Ze+S+_:Ze,bottom:Ne=Ne>0?Ne+S+_:Ne,left:at=at>0?at+S+_:at,right:Je=Je>0?Je+S+_:Je}),Dt=function(Ye,Ze){var Ne=(0,M.Fp)(Ye.nodes,function(Ke){return Ke.column}),Je=xe-Ee,at=Te-de,Se=Je/(Je+Ze.right+Ze.left),ze=at/(at+Ze.top+Ze.bottom);return Ee=Ee*Se+Ze.left,xe=0==Ze.right?xe:xe*Se,de=de*ze+Ze.top,Te*=ze,Ye.nodes.forEach(function(Ke){Ke.x0=Ee+Ke.column*((xe-Ee-we)/Ne),Ke.x1=Ke.x0+we}),ze}(Ve,jt);Ot*=Dt,Ve.links.forEach(function(Ye){Ye.width=Ye.value*Ot}),st.forEach(function(Ye){var Ze=Ye.length;Ye.forEach(function(Ne,Je){Ne.depth==st.length-1&&1==Ze||0==Ne.depth&&1==Ze?(Ne.y0=Te/2-Ne.value*Ot,Ne.y1=Ne.y0+Ne.value*Ot):Ne.partOfCycle?0==z(Ne,Pt)?(Ne.y0=Te/2+Je,Ne.y1=Ne.y0+Ne.value*Ot):"top"==Ne.circularLinkType?(Ne.y0=de+Je,Ne.y1=Ne.y0+Ne.value*Ot):(Ne.y0=Te-Ne.value*Ot-Je,Ne.y1=Ne.y0+Ne.value*Ot):0==jt.top||0==jt.bottom?(Ne.y0=(Te-de)/Ze*Je,Ne.y1=Ne.y0+Ne.value*Ot):(Ne.y0=(Te-de)/2-Ze/2+Je,Ne.y1=Ne.y0+Ne.value*Ot)})})})(nt),pt();for(var dt=1,wt=tt;wt>0;--wt)_t(dt*=.99,nt),pt();function _t(Pt,St){var Ot=st.length;st.forEach(function(jt){var Dt=jt.length,Ye=jt[0].depth;jt.forEach(function(Ze){var Ne;if((Ze.sourceLinks.length||Ze.targetLinks.length)&&!(Ze.partOfCycle&&z(Ze,St)>0))if(0==Ye&&1==Dt)Ze.y0=Te/2-(Ne=Ze.y1-Ze.y0)/2,Ze.y1=Te/2+Ne/2;else if(Ye==Ot-1&&1==Dt)Ze.y0=Te/2-(Ne=Ze.y1-Ze.y0)/2,Ze.y1=Te/2+Ne/2;else{var Je=(0,M.J6)(Ze.sourceLinks,g),at=(0,M.J6)(Ze.targetLinks,v),Se=((Je&&at?(Je+at)/2:Je||at)-b(Ze))*Pt;Ze.y0+=Se,Ze.y1+=Se}})})}function pt(){st.forEach(function(Pt){var St,Ot,jt,Dt=de,Ye=Pt.length;for(Pt.sort(h),jt=0;jt<Ye;++jt)(Ot=Dt-(St=Pt[jt]).y0)>0&&(St.y0+=Ot,St.y1+=Ot),Dt=St.y1+le;if((Ot=Dt-le-Te)>0)for(Dt=St.y0-=Ot,St.y1-=Ot,jt=Ye-2;jt>=0;--jt)(Ot=(St=Pt[jt]).y1+le-Dt)>0&&(St.y0-=Ot,St.y1-=Ot),Dt=St.y0})}}function He(Ve){Ve.nodes.forEach(function(tt){tt.sourceLinks.sort(c),tt.targetLinks.sort(i)}),Ve.nodes.forEach(function(tt){var nt=tt.y0,st=nt,dt=tt.y1,wt=dt;tt.sourceLinks.forEach(function(_t){_t.circular?(_t.y0=dt-_t.width/2,dt-=_t.width):(_t.y0=nt+_t.width/2,nt+=_t.width)}),tt.targetLinks.forEach(function(_t){_t.circular?(_t.y1=wt-_t.width/2,wt-=_t.width):(_t.y1=st+_t.width/2,st+=_t.width)})})}return De.nodeId=function(Ve){return arguments.length?(K="function"==typeof Ve?Ve:n(Ve),De):K},De.nodeAlign=function(Ve){return arguments.length?(oe="function"==typeof Ve?Ve:n(Ve),De):oe},De.nodeWidth=function(Ve){return arguments.length?(we=+Ve,De):we},De.nodePadding=function(Ve){return arguments.length?(le=+Ve,De):le},De.nodes=function(Ve){return arguments.length?(he="function"==typeof Ve?Ve:n(Ve),De):he},De.links=function(Ve){return arguments.length?(ye="function"==typeof Ve?Ve:n(Ve),De):ye},De.size=function(Ve){return arguments.length?(Ee=de=0,xe=+Ve[0],Te=+Ve[1],De):[xe-Ee,Te-de]},De.extent=function(Ve){return arguments.length?(Ee=+Ve[0][0],xe=+Ve[1][0],de=+Ve[0][1],Te=+Ve[1][1],De):[[Ee,de],[xe,Te]]},De.iterations=function(Ve){return arguments.length?(Me=+Ve,De):Me},De.circularLinkGap=function(Ve){return arguments.length?(Re=+Ve,De):Re},De.nodePaddingRatio=function(Ve){return arguments.length?(ue=+Ve,De):ue},De.sortNodes=function(Ve){return arguments.length?(Pe=Ve,De):Pe},De.update=function(Ve){return C(Ve,K),He(Ve),Ve.links.forEach(function(tt){tt.circular&&(tt.circularLinkType=tt.y0+tt.y1<Te?"top":"bottom",tt.source.circularLinkType=tt.circularLinkType,tt.target.circularLinkType=tt.circularLinkType)}),re(Ve,Te,K,!1),ae(Ve,0,K),V(Ve,Re,Te,K),Ve},De}function L(le,ue,Ee){var de=0;if(null===Ee){for(var xe=[],Te=0;Te<le.links.length;Te++){var we=le.links[Te],K=we.source.index,oe=we.target.index;xe[K]||(xe[K]=[]),xe[oe]||(xe[oe]=[]),-1===xe[K].indexOf(oe)&&xe[K].push(oe)}var he=x()(xe);he.sort(function(Re,Pe){return Re.length-Pe.length});var ye={};for(Te=0;Te<he.length;Te++){var Me=he[Te].slice(-2);ye[Me[0]]||(ye[Me[0]]={}),ye[Me[0]][Me[1]]=!0}le.links.forEach(function(Re){var Pe=Re.target.index,De=Re.source.index;Pe===De||ye[De]&&ye[De][Pe]?(Re.circular=!0,Re.circularLinkID=de,de+=1):Re.circular=!1})}else le.links.forEach(function(Re){Re.source[Ee]<Re.target[Ee]?Re.circular=!1:(Re.circular=!0,Re.circularLinkID=de,de+=1)})}function C(le,ue){var Ee=0,de=0;le.links.forEach(function(xe){xe.circular&&(xe.circularLinkType=xe.source.circularLinkType||xe.target.circularLinkType?xe.source.circularLinkType?xe.source.circularLinkType:xe.target.circularLinkType:Ee<de?"top":"bottom","top"==xe.circularLinkType?Ee+=1:de+=1,le.nodes.forEach(function(Te){u(Te,ue)!=u(xe.source,ue)&&u(Te,ue)!=u(xe.target,ue)||(Te.circularLinkType=xe.circularLinkType)}))}),le.links.forEach(function(xe){xe.circular&&(xe.source.circularLinkType==xe.target.circularLinkType&&(xe.circularLinkType=xe.source.circularLinkType),ke(xe,ue)&&(xe.circularLinkType=xe.source.circularLinkType))})}function P(le){var ue=Math.abs(le.y1-le.y0),Ee=Math.abs(le.target.x0-le.source.x1);return Math.atan(Ee/ue)}function z(le,ue){var Ee=0;le.sourceLinks.forEach(function(xe){Ee=xe.circular&&!ke(xe,ue)?Ee+1:Ee});var de=0;return le.targetLinks.forEach(function(xe){de=xe.circular&&!ke(xe,ue)?de+1:de}),Ee+de}function j(le){var Ee=0;le.source.sourceLinks.forEach(function(Te){Ee=Te.circular?Ee+1:Ee});var xe=0;return le.target.targetLinks.forEach(function(Te){xe=Te.circular?xe+1:xe}),!(Ee>1||xe>1)}function R(le,ue,Ee){return le.sort(D),le.forEach(function(de,xe){var Te,we,K=0;if(ke(de,Ee)&&j(de))de.circularPathData.verticalBuffer=K+de.width/2;else{for(var oe=0;oe<xe;oe++)if(!((Te=le[xe]).source.column<(we=le[oe]).target.column||Te.target.column>we.source.column)){var he=le[oe].circularPathData.verticalBuffer+le[oe].width/2+ue;K=he>K?he:K}de.circularPathData.verticalBuffer=K+de.width/2}}),le}function V(le,ue,Ee,de){var xe=(0,M.VV)(le.links,function(Te){return Te.source.y0});le.links.forEach(function(Te){Te.circular&&(Te.circularPathData={})}),R(le.links.filter(function(Te){return"top"==Te.circularLinkType}),ue,de),R(le.links.filter(function(Te){return"bottom"==Te.circularLinkType}),ue,de),le.links.forEach(function(Te){if(Te.circular){if(Te.circularPathData.arcRadius=Te.width+_,Te.circularPathData.leftNodeBuffer=5,Te.circularPathData.rightNodeBuffer=5,Te.circularPathData.sourceWidth=Te.source.x1-Te.source.x0,Te.circularPathData.sourceX=Te.source.x0+Te.circularPathData.sourceWidth,Te.circularPathData.targetX=Te.target.x0,Te.circularPathData.sourceY=Te.y0,Te.circularPathData.targetY=Te.y1,ke(Te,de)&&j(Te))Te.circularPathData.leftSmallArcRadius=_+Te.width/2,Te.circularPathData.leftLargeArcRadius=_+Te.width/2,Te.circularPathData.rightSmallArcRadius=_+Te.width/2,Te.circularPathData.rightLargeArcRadius=_+Te.width/2,"bottom"==Te.circularLinkType?(Te.circularPathData.verticalFullExtent=Te.source.y1+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Te.source.y0-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius);else{var we=Te.source.column,K=Te.circularLinkType,oe=le.links.filter(function(Me){return Me.source.column==we&&Me.circularLinkType==K});oe.sort("bottom"==Te.circularLinkType?N:B);var he=0;oe.forEach(function(Me,Re){Me.circularLinkID==Te.circularLinkID&&(Te.circularPathData.leftSmallArcRadius=_+Te.width/2+he,Te.circularPathData.leftLargeArcRadius=_+Te.width/2+Re*ue+he),he+=Me.width}),we=Te.target.column,(oe=le.links.filter(function(Me){return Me.target.column==we&&Me.circularLinkType==K})).sort("bottom"==Te.circularLinkType?J:U),he=0,oe.forEach(function(Me,Re){Me.circularLinkID==Te.circularLinkID&&(Te.circularPathData.rightSmallArcRadius=_+Te.width/2+he,Te.circularPathData.rightLargeArcRadius=_+Te.width/2+Re*ue+he),he+=Me.width}),"bottom"==Te.circularLinkType?(Te.circularPathData.verticalFullExtent=Math.max(Ee,Te.source.y1,Te.target.y1)+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=xe-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius)}Te.circularPathData.leftInnerExtent=Te.circularPathData.sourceX+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightInnerExtent=Te.circularPathData.targetX-Te.circularPathData.rightNodeBuffer,Te.circularPathData.leftFullExtent=Te.circularPathData.sourceX+Te.circularPathData.leftLargeArcRadius+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightFullExtent=Te.circularPathData.targetX-Te.circularPathData.rightLargeArcRadius-Te.circularPathData.rightNodeBuffer}if(Te.circular)Te.path="top"==(Me=Te).circularLinkType?"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 0 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY-Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 0 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 0 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY-Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 0 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY:"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 1 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY+Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 1 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 1 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY+Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 1 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY;else{var ye=(0,l.h5)().source(function(Me){return[Me.source.x0+(Me.source.x1-Me.source.x0),Me.y0]}).target(function(Me){return[Me.target.x0,Me.y1]});Te.path=ye(Te)}var Me})}function D(le,ue){return Y(le)==Y(ue)?"bottom"==le.circularLinkType?N(le,ue):B(le,ue):Y(ue)-Y(le)}function B(le,ue){return le.y0-ue.y0}function N(le,ue){return ue.y0-le.y0}function U(le,ue){return le.y1-ue.y1}function J(le,ue){return ue.y1-le.y1}function Y(le){return le.target.column-le.source.column}function q(le){return le.target.x0-le.source.x1}function H(le,ue){var Ee=P(le),de=q(ue)/Math.tan(Ee);return"up"==pe(le)?le.y1+de:le.y1-de}function X(le,ue){var Ee=P(le),de=q(ue)/Math.tan(Ee);return"up"==pe(le)?le.y1-de:le.y1+de}function Q(le,ue,Ee,de){le.links.forEach(function(xe){if(!xe.circular&&xe.target.column-xe.source.column>1){var Te=xe.source.column+1,we=xe.target.column-1,K=1,oe=we-Te+1;for(K=1;Te<=we;Te++,K++)le.nodes.forEach(function(he){if(he.column==Te){var ye,Me=K/(oe+1),Re=Math.pow(1-Me,3),Pe=3*Me*Math.pow(1-Me,2),De=3*Math.pow(Me,2)*(1-Me),fe=Math.pow(Me,3),ge=Re*xe.y0+Pe*xe.y0+De*xe.y1+fe*xe.y1,be=ge-xe.width/2,Ie=ge+xe.width/2;be>he.y0&&be<he.y1?(ye=he.y1-be+10,he=ne(he,ye="bottom"==he.circularLinkType?ye:-ye,ue,Ee),le.nodes.forEach(function(He){var Ve,tt;u(He,de)!=u(he,de)&&He.column==he.column&&((Ve=he).y0>(tt=He).y0&&Ve.y0<tt.y1||Ve.y1>tt.y0&&Ve.y1<tt.y1||Ve.y0<tt.y0&&Ve.y1>tt.y1)&&ne(He,ye,ue,Ee)})):(Ie>he.y0&&Ie<he.y1||be<he.y0&&Ie>he.y1)&&(he=ne(he,ye=Ie-he.y0+10,ue,Ee),le.nodes.forEach(function(He){u(He,de)!=u(he,de)&&He.column==he.column&&He.y0<he.y1&&He.y1>he.y1&&ne(He,ye,ue,Ee)}))}})}})}function ne(le,ue,Ee,de){return le.y0+ue>=Ee&&le.y1+ue<=de&&(le.y0=le.y0+ue,le.y1=le.y1+ue,le.targetLinks.forEach(function(xe){xe.y1=xe.y1+ue}),le.sourceLinks.forEach(function(xe){xe.y0=xe.y0+ue})),le}function re(le,ue,Ee,de){le.nodes.forEach(function(xe){de&&xe.y+(xe.y1-xe.y0)>ue&&(xe.y=xe.y-(xe.y+(xe.y1-xe.y0)-ue));var Te=le.links.filter(function(oe){return u(oe.source,Ee)==u(xe,Ee)}),we=Te.length;we>1&&Te.sort(function(oe,he){if(!oe.circular&&!he.circular){if(oe.target.column==he.target.column||!se(oe,he))return oe.y1-he.y1;if(oe.target.column>he.target.column){var ye=X(he,oe);return oe.y1-ye}if(he.target.column>oe.target.column)return X(oe,he)-he.y1}return oe.circular&&!he.circular?"top"==oe.circularLinkType?-1:1:he.circular&&!oe.circular?"top"==he.circularLinkType?1:-1:oe.circular&&he.circular?oe.circularLinkType===he.circularLinkType&&"top"==oe.circularLinkType?oe.target.column===he.target.column?oe.target.y1-he.target.y1:he.target.column-oe.target.column:oe.circularLinkType===he.circularLinkType&&"bottom"==oe.circularLinkType?oe.target.column===he.target.column?he.target.y1-oe.target.y1:oe.target.column-he.target.column:"top"==oe.circularLinkType?-1:1:void 0});var K=xe.y0;Te.forEach(function(oe){oe.y0=K+oe.width/2,K+=oe.width}),Te.forEach(function(oe,he){if("bottom"==oe.circularLinkType){for(var ye=he+1,Me=0;ye<we;ye++)Me+=Te[ye].width;oe.y0=xe.y1-Me-oe.width/2}})})}function ae(le,ue,Ee){le.nodes.forEach(function(de){var xe=le.links.filter(function(K){return u(K.target,Ee)==u(de,Ee)}),Te=xe.length;Te>1&&xe.sort(function(K,oe){if(!K.circular&&!oe.circular){if(K.source.column==oe.source.column||!se(K,oe))return K.y0-oe.y0;if(oe.source.column<K.source.column){var he=H(oe,K);return K.y0-he}if(K.source.column<oe.source.column)return H(K,oe)-oe.y0}return K.circular&&!oe.circular?"top"==K.circularLinkType?-1:1:oe.circular&&!K.circular?"top"==oe.circularLinkType?1:-1:K.circular&&oe.circular?K.circularLinkType===oe.circularLinkType&&"top"==K.circularLinkType?K.source.column===oe.source.column?K.source.y1-oe.source.y1:K.source.column-oe.source.column:K.circularLinkType===oe.circularLinkType&&"bottom"==K.circularLinkType?K.source.column===oe.source.column?K.source.y1-oe.source.y1:oe.source.column-K.source.column:"top"==K.circularLinkType?-1:1:void 0});var we=de.y0;xe.forEach(function(K){K.y1=we+K.width/2,we+=K.width}),xe.forEach(function(K,oe){if("bottom"==K.circularLinkType){for(var he=oe+1,ye=0;he<Te;he++)ye+=xe[he].width;K.y1=de.y1-ye-K.width/2}})})}function se(le,ue){return pe(le)==pe(ue)}function pe(le){return le.y0-le.y1>0?"up":"down"}function ke(le,ue){return u(le.source,ue)==u(le.target,ue)}function me(le,ue,Ee){var de=le.nodes,xe=le.links,Te=!1,we=!1;if(xe.forEach(function(he){"top"==he.circularLinkType?Te=!0:"bottom"==he.circularLinkType&&(we=!0)}),0==Te||0==we){var K=(0,M.VV)(de,function(he){return he.y0}),oe=(Ee-ue)/((0,M.Fp)(de,function(he){return he.y1})-K);de.forEach(function(he){var ye=(he.y1-he.y0)*oe;he.y0=(he.y0-K)*oe,he.y1=he.y0+ye}),xe.forEach(function(he){he.y0=(he.y0-K)*oe,he.y1=(he.y1-K)*oe,he.width=he.width*oe})}}},30838:function($,I,t){"use strict";t.r(I),t.d(I,{sankey:function(){return y},sankeyCenter:function(){return s},sankeyJustify:function(){return p},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return u},sankeyRight:function(){return x}});var M=t(33064),k=t(15140);function l(S){return S.target.depth}function T(S){return S.depth}function x(S,_){return _-1-S.height}function p(S,_){return S.sourceLinks.length?S.depth:_-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,M.VV)(S.sourceLinks,l)-1:0}function e(S){return function(){return S}}function o(S,_){return n(S.source,_.source)||S.index-_.index}function r(S,_){return n(S.target,_.target)||S.index-_.index}function n(S,_){return S.y0-_.y0}function a(S){return S.value}function i(S){return(S.y0+S.y1)/2}function c(S){return i(S.source)*S.value}function h(S){return i(S.target)*S.value}function f(S){return S.index}function b(S){return S.nodes}function v(S){return S.links}function g(S,_){var E=S.get(_);if(!E)throw new Error("missing: "+_);return E}function y(){var S=0,_=0,E=1,L=1,C=24,P=8,z=f,j=p,R=b,V=v,D=32;function B(){var H={nodes:R.apply(null,arguments),links:V.apply(null,arguments)};return N(H),U(H),J(H),Y(H),q(H),H}function N(H){H.nodes.forEach(function(Q,ne){Q.index=ne,Q.sourceLinks=[],Q.targetLinks=[]});var X=(0,k.UI)(H.nodes,z);H.links.forEach(function(Q,ne){Q.index=ne;var re=Q.source,ae=Q.target;"object"!=typeof re&&(re=Q.source=g(X,re)),"object"!=typeof ae&&(ae=Q.target=g(X,ae)),re.sourceLinks.push(Q),ae.targetLinks.push(Q)})}function U(H){H.nodes.forEach(function(X){X.value=Math.max((0,M.Sm)(X.sourceLinks,a),(0,M.Sm)(X.targetLinks,a))})}function J(H){var X,Q,ne;for(X=H.nodes,Q=[],ne=0;X.length;++ne,X=Q,Q=[])X.forEach(function(ae){ae.depth=ne,ae.sourceLinks.forEach(function(se){Q.indexOf(se.target)<0&&Q.push(se.target)})});for(X=H.nodes,Q=[],ne=0;X.length;++ne,X=Q,Q=[])X.forEach(function(ae){ae.height=ne,ae.targetLinks.forEach(function(se){Q.indexOf(se.source)<0&&Q.push(se.source)})});var re=(E-S-C)/(ne-1);H.nodes.forEach(function(ae){ae.x1=(ae.x0=S+Math.max(0,Math.min(ne-1,Math.floor(j.call(null,ae,ne))))*re)+C})}function Y(H){var X=(0,k.b1)().key(function(pe){return pe.x0}).sortKeys(M.j2).entries(H.nodes).map(function(pe){return pe.values});(function(){var pe=(0,M.Fp)(X,function(le){return le.length}),ke=.6666666666666666*(L-_)/(pe-1);P>ke&&(P=ke);var me=(0,M.VV)(X,function(le){return(L-_-(le.length-1)*P)/(0,M.Sm)(le,a)});X.forEach(function(le){le.forEach(function(ue,Ee){ue.y1=(ue.y0=Ee)+ue.value*me})}),H.links.forEach(function(le){le.width=le.value*me})})(),se();for(var Q=1,ne=D;ne>0;--ne)ae(Q*=.99),se(),re(Q),se();function re(pe){X.forEach(function(ke){ke.forEach(function(me){if(me.targetLinks.length){var le=((0,M.Sm)(me.targetLinks,c)/(0,M.Sm)(me.targetLinks,a)-i(me))*pe;me.y0+=le,me.y1+=le}})})}function ae(pe){X.slice().reverse().forEach(function(ke){ke.forEach(function(me){if(me.sourceLinks.length){var le=((0,M.Sm)(me.sourceLinks,h)/(0,M.Sm)(me.sourceLinks,a)-i(me))*pe;me.y0+=le,me.y1+=le}})})}function se(){X.forEach(function(pe){var ke,me,le,ue=_,Ee=pe.length;for(pe.sort(n),le=0;le<Ee;++le)(me=ue-(ke=pe[le]).y0)>0&&(ke.y0+=me,ke.y1+=me),ue=ke.y1+P;if((me=ue-P-L)>0)for(ue=ke.y0-=me,ke.y1-=me,le=Ee-2;le>=0;--le)(me=(ke=pe[le]).y1+P-ue)>0&&(ke.y0-=me,ke.y1-=me),ue=ke.y0})}}function q(H){H.nodes.forEach(function(X){X.sourceLinks.sort(r),X.targetLinks.sort(o)}),H.nodes.forEach(function(X){var Q=X.y0,ne=Q;X.sourceLinks.forEach(function(re){re.y0=Q+re.width/2,Q+=re.width}),X.targetLinks.forEach(function(re){re.y1=ne+re.width/2,ne+=re.width})})}return B.update=function(H){return q(H),H},B.nodeId=function(H){return arguments.length?(z="function"==typeof H?H:e(H),B):z},B.nodeAlign=function(H){return arguments.length?(j="function"==typeof H?H:e(H),B):j},B.nodeWidth=function(H){return arguments.length?(C=+H,B):C},B.nodePadding=function(H){return arguments.length?(P=+H,B):P},B.nodes=function(H){return arguments.length?(R="function"==typeof H?H:e(H),B):R},B.links=function(H){return arguments.length?(V="function"==typeof H?H:e(H),B):V},B.size=function(H){return arguments.length?(S=_=0,E=+H[0],L=+H[1],B):[E-S,L-_]},B.extent=function(H){return arguments.length?(S=+H[0][0],E=+H[1][0],_=+H[0][1],L=+H[1][1],B):[[S,_],[E,L]]},B.iterations=function(H){return arguments.length?(D=+H,B):D},B}var d=t(45879);function m(S){return[S.source.x1,S.y0]}function w(S){return[S.target.x0,S.y1]}function u(){return(0,d.h5)().source(m).target(w)}},39898:function($,I,t){var M,k;(function(){var l={version:"3.8.0"},T=[].slice,x=function(ee){return T.call(ee)},p=self.document;function s(ee){return ee&&(ee.ownerDocument||ee.document||ee).documentElement}function e(ee){return ee&&(ee.ownerDocument&&ee.ownerDocument.defaultView||ee.document&&ee||ee.defaultView)}if(p)try{x(p.documentElement.childNodes)}catch{x=function(ce){for(var Ae=ce.length,Oe=new Array(Ae);Ae--;)Oe[Ae]=ce[Ae];return Oe}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var o=this.Element.prototype,r=o.setAttribute,n=o.setAttributeNS,a=this.CSSStyleDeclaration.prototype,i=a.setProperty;o.setAttribute=function(ce,Ae){r.call(this,ce,Ae+"")},o.setAttributeNS=function(ce,Ae,Oe){n.call(this,ce,Ae,Oe+"")},a.setProperty=function(ce,Ae,Oe){i.call(this,ce,Ae+"",Oe)}}function c(ee,ce){return ee<ce?-1:ee>ce?1:ee>=ce?0:NaN}function h(ee){return null===ee?NaN:+ee}function f(ee){return!isNaN(ee)}function b(ee){return{left:function(ce,Ae,Oe,Fe){for(arguments.length<3&&(Oe=0),arguments.length<4&&(Fe=ce.length);Oe<Fe;){var Ue=Oe+Fe>>>1;ee(ce[Ue],Ae)<0?Oe=Ue+1:Fe=Ue}return Oe},right:function(ce,Ae,Oe,Fe){for(arguments.length<3&&(Oe=0),arguments.length<4&&(Fe=ce.length);Oe<Fe;){var Ue=Oe+Fe>>>1;ee(ce[Ue],Ae)>0?Fe=Ue:Oe=Ue+1}return Oe}}}l.ascending=c,l.descending=function(ee,ce){return ce<ee?-1:ce>ee?1:ce>=ee?0:NaN},l.min=function(ee,ce){var Ae,Oe,Fe=-1,Ue=ee.length;if(1===arguments.length){for(;++Fe<Ue;)if(null!=(Oe=ee[Fe])&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ee[Fe])&&Ae>Oe&&(Ae=Oe)}else{for(;++Fe<Ue;)if(null!=(Oe=ce.call(ee,ee[Fe],Fe))&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ce.call(ee,ee[Fe],Fe))&&Ae>Oe&&(Ae=Oe)}return Ae},l.max=function(ee,ce){var Ae,Oe,Fe=-1,Ue=ee.length;if(1===arguments.length){for(;++Fe<Ue;)if(null!=(Oe=ee[Fe])&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ee[Fe])&&Oe>Ae&&(Ae=Oe)}else{for(;++Fe<Ue;)if(null!=(Oe=ce.call(ee,ee[Fe],Fe))&&Oe>=Oe){Ae=Oe;break}for(;++Fe<Ue;)null!=(Oe=ce.call(ee,ee[Fe],Fe))&&Oe>Ae&&(Ae=Oe)}return Ae},l.extent=function(ee,ce){var Ae,Oe,Fe,Ue=-1,Ge=ee.length;if(1===arguments.length){for(;++Ue<Ge;)if(null!=(Oe=ee[Ue])&&Oe>=Oe){Ae=Fe=Oe;break}for(;++Ue<Ge;)null!=(Oe=ee[Ue])&&(Ae>Oe&&(Ae=Oe),Fe<Oe&&(Fe=Oe))}else{for(;++Ue<Ge;)if(null!=(Oe=ce.call(ee,ee[Ue],Ue))&&Oe>=Oe){Ae=Fe=Oe;break}for(;++Ue<Ge;)null!=(Oe=ce.call(ee,ee[Ue],Ue))&&(Ae>Oe&&(Ae=Oe),Fe<Oe&&(Fe=Oe))}return[Ae,Fe]},l.sum=function(ee,ce){var Ae,Oe=0,Fe=ee.length,Ue=-1;if(1===arguments.length)for(;++Ue<Fe;)f(Ae=+ee[Ue])&&(Oe+=Ae);else for(;++Ue<Fe;)f(Ae=+ce.call(ee,ee[Ue],Ue))&&(Oe+=Ae);return Oe},l.mean=function(ee,ce){var Ae,Oe=0,Fe=ee.length,Ue=-1,Ge=Fe;if(1===arguments.length)for(;++Ue<Fe;)f(Ae=h(ee[Ue]))?Oe+=Ae:--Ge;else for(;++Ue<Fe;)f(Ae=h(ce.call(ee,ee[Ue],Ue)))?Oe+=Ae:--Ge;if(Ge)return Oe/Ge},l.quantile=function(ee,ce){var Ae=(ee.length-1)*ce+1,Oe=Math.floor(Ae),Fe=+ee[Oe-1],Ue=Ae-Oe;return Ue?Fe+Ue*(ee[Oe]-Fe):Fe},l.median=function(ee,ce){var Ae,Oe=[],Fe=ee.length,Ue=-1;if(1===arguments.length)for(;++Ue<Fe;)f(Ae=h(ee[Ue]))&&Oe.push(Ae);else for(;++Ue<Fe;)f(Ae=h(ce.call(ee,ee[Ue],Ue)))&&Oe.push(Ae);if(Oe.length)return l.quantile(Oe.sort(c),.5)},l.variance=function(ee,ce){var Ae,Oe,Fe=ee.length,Ue=0,Ge=0,Xe=-1,rt=0;if(1===arguments.length)for(;++Xe<Fe;)f(Ae=h(ee[Xe]))&&(Ge+=(Oe=Ae-Ue)*(Ae-(Ue+=Oe/++rt)));else for(;++Xe<Fe;)f(Ae=h(ce.call(ee,ee[Xe],Xe)))&&(Ge+=(Oe=Ae-Ue)*(Ae-(Ue+=Oe/++rt)));if(rt>1)return Ge/(rt-1)},l.deviation=function(){var ee=l.variance.apply(this,arguments);return ee&&Math.sqrt(ee)};var v=b(c);function g(ee){return ee.length}l.bisectLeft=v.left,l.bisect=l.bisectRight=v.right,l.bisector=function(ee){return b(1===ee.length?function(ce,Ae){return c(ee(ce),Ae)}:ee)},l.shuffle=function(ee,ce,Ae){(Ue=arguments.length)<3&&(Ae=ee.length,Ue<2&&(ce=0));for(var Oe,Fe,Ue=Ae-ce;Ue;)Fe=Math.random()*Ue--|0,Oe=ee[Ue+ce],ee[Ue+ce]=ee[Fe+ce],ee[Fe+ce]=Oe;return ee},l.permute=function(ee,ce){for(var Ae=ce.length,Oe=new Array(Ae);Ae--;)Oe[Ae]=ee[ce[Ae]];return Oe},l.pairs=function(ee){for(var ce=0,Ae=ee.length-1,Oe=ee[0],Fe=new Array(Ae<0?0:Ae);ce<Ae;)Fe[ce]=[Oe,Oe=ee[++ce]];return Fe},l.transpose=function(ee){if(!(Fe=ee.length))return[];for(var ce=-1,Ae=l.min(ee,g),Oe=new Array(Ae);++ce<Ae;)for(var Fe,Ue=-1,Ge=Oe[ce]=new Array(Fe);++Ue<Fe;)Ge[Ue]=ee[Ue][ce];return Oe},l.zip=function(){return l.transpose(arguments)},l.keys=function(ee){var ce=[];for(var Ae in ee)ce.push(Ae);return ce},l.values=function(ee){var ce=[];for(var Ae in ee)ce.push(ee[Ae]);return ce},l.entries=function(ee){var ce=[];for(var Ae in ee)ce.push({key:Ae,value:ee[Ae]});return ce},l.merge=function(ee){for(var ce,Ae,Oe,Fe=ee.length,Ue=-1,Ge=0;++Ue<Fe;)Ge+=ee[Ue].length;for(Ae=new Array(Ge);--Fe>=0;)for(ce=(Oe=ee[Fe]).length;--ce>=0;)Ae[--Ge]=Oe[ce];return Ae};var y=Math.abs;function d(ee){for(var ce=1;ee*ce%1;)ce*=10;return ce}function m(ee,ce){for(var Ae in ce)Object.defineProperty(ee.prototype,Ae,{value:ce[Ae],enumerable:!1})}function w(){this._=Object.create(null)}function u(ee){return"__proto__"==(ee+="")||"\0"===ee[0]?"\0"+ee:ee}function S(ee){return"\0"===(ee+="")[0]?ee.slice(1):ee}function _(ee){return u(ee)in this._}function E(ee){return(ee=u(ee))in this._&&delete this._[ee]}function L(){var ee=[];for(var ce in this._)ee.push(S(ce));return ee}function C(){var ee=0;for(var ce in this._)++ee;return ee}function P(){for(var ee in this._)return!1;return!0}function z(){this._=Object.create(null)}function j(ee){return ee}function R(ee,ce,Ae){return function(){var Oe=Ae.apply(ce,arguments);return Oe===ce?ee:Oe}}function V(ee,ce){if(ce in ee)return ce;ce=ce.charAt(0).toUpperCase()+ce.slice(1);for(var Ae=0,Oe=D.length;Ae<Oe;++Ae){var Fe=D[Ae]+ce;if(Fe in ee)return Fe}}l.range=function(ee,ce,Ae){if(arguments.length<3&&(Ae=1,arguments.length<2&&(ce=ee,ee=0)),(ce-ee)/Ae==1/0)throw new Error("infinite range");var Oe,Fe=[],Ue=d(y(Ae)),Ge=-1;if(ee*=Ue,ce*=Ue,(Ae*=Ue)<0)for(;(Oe=ee+Ae*++Ge)>ce;)Fe.push(Oe/Ue);else for(;(Oe=ee+Ae*++Ge)<ce;)Fe.push(Oe/Ue);return Fe},l.map=function(ee,ce){var Ae=new w;if(ee instanceof w)ee.forEach(function(Xe,rt){Ae.set(Xe,rt)});else if(Array.isArray(ee)){var Oe,Fe=-1,Ue=ee.length;if(1===arguments.length)for(;++Fe<Ue;)Ae.set(Fe,ee[Fe]);else for(;++Fe<Ue;)Ae.set(ce.call(ee,Oe=ee[Fe],Fe),Oe)}else for(var Ge in ee)Ae.set(Ge,ee[Ge]);return Ae},m(w,{has:_,get:function(ee){return this._[u(ee)]},set:function(ee,ce){return this._[u(ee)]=ce},remove:E,keys:L,values:function(){var ee=[];for(var ce in this._)ee.push(this._[ce]);return ee},entries:function(){var ee=[];for(var ce in this._)ee.push({key:S(ce),value:this._[ce]});return ee},size:C,empty:P,forEach:function(ee){for(var ce in this._)ee.call(this,S(ce),this._[ce])}}),l.nest=function(){var ee,ce,Ae={},Oe=[],Fe=[];function Ue(Xe,rt,ut){if(ut>=Oe.length)return ce?ce.call(Ae,rt):ee?rt.sort(ee):rt;for(var Ct,Rt,Ft,Yt,cn=-1,Wt=rt.length,tn=Oe[ut++],$t=new w;++cn<Wt;)(Yt=$t.get(Ct=tn(Rt=rt[cn])))?Yt.push(Rt):$t.set(Ct,[Rt]);return Xe?(Rt=Xe(),Ft=function(_n,dn){Rt.set(_n,Ue(Xe,dn,ut))}):(Rt={},Ft=function(_n,dn){Rt[_n]=Ue(Xe,dn,ut)}),$t.forEach(Ft),Rt}function Ge(Xe,rt){if(rt>=Oe.length)return Xe;var ut=[],Ct=Fe[rt++];return Xe.forEach(function(Rt,Ft){ut.push({key:Rt,values:Ge(Ft,rt)})}),Ct?ut.sort(function(Rt,Ft){return Ct(Rt.key,Ft.key)}):ut}return Ae.map=function(Xe,rt){return Ue(rt,Xe,0)},Ae.entries=function(Xe){return Ge(Ue(l.map,Xe,0),0)},Ae.key=function(Xe){return Oe.push(Xe),Ae},Ae.sortKeys=function(Xe){return Fe[Oe.length-1]=Xe,Ae},Ae.sortValues=function(Xe){return ee=Xe,Ae},Ae.rollup=function(Xe){return ce=Xe,Ae},Ae},l.set=function(ee){var ce=new z;if(ee)for(var Ae=0,Oe=ee.length;Ae<Oe;++Ae)ce.add(ee[Ae]);return ce},m(z,{has:_,add:function(ee){return this._[u(ee+="")]=!0,ee},remove:E,values:L,size:C,empty:P,forEach:function(ee){for(var ce in this._)ee.call(this,S(ce))}}),l.behavior={},l.rebind=function(ee,ce){for(var Ae,Oe=1,Fe=arguments.length;++Oe<Fe;)ee[Ae=arguments[Oe]]=R(ee,ce,ce[Ae]);return ee};var D=["webkit","ms","moz","Moz","o","O"];function B(){}function N(){}function U(ee){var ce=[],Ae=new w;function Oe(){for(var Fe,Ue=ce,Ge=-1,Xe=Ue.length;++Ge<Xe;)(Fe=Ue[Ge].on)&&Fe.apply(this,arguments);return ee}return Oe.on=function(Fe,Ue){var Ge,Xe=Ae.get(Fe);return arguments.length<2?Xe&&Xe.on:(Xe&&(Xe.on=null,ce=ce.slice(0,Ge=ce.indexOf(Xe)).concat(ce.slice(Ge+1)),Ae.remove(Fe)),Ue&&ce.push(Ae.set(Fe,{on:Ue})),ee)},Oe}function J(){l.event.preventDefault()}function Y(){for(var ee,ce=l.event;ee=ce.sourceEvent;)ce=ee;return ce}function q(ee){for(var ce=new N,Ae=0,Oe=arguments.length;++Ae<Oe;)ce[arguments[Ae]]=U(ce);return ce.of=function(Fe,Ue){return function(Ge){try{var Xe=Ge.sourceEvent=l.event;Ge.target=ee,l.event=Ge,ce[Ge.type].apply(Fe,Ue)}finally{l.event=Xe}}},ce}l.dispatch=function(){for(var ee=new N,ce=-1,Ae=arguments.length;++ce<Ae;)ee[arguments[ce]]=U(ee);return ee},N.prototype.on=function(ee,ce){var Ae=ee.indexOf("."),Oe="";if(Ae>=0&&(Oe=ee.slice(Ae+1),ee=ee.slice(0,Ae)),ee)return arguments.length<2?this[ee].on(Oe):this[ee].on(Oe,ce);if(2===arguments.length){if(null==ce)for(ee in this)this.hasOwnProperty(ee)&&this[ee].on(Oe,null);return this}},l.event=null,l.requote=function(ee){return ee.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(ee,ce){ee.__proto__=ce}:function(ee,ce){for(var Ae in ce)ee[Ae]=ce[Ae]};function Q(ee){return X(ee,se),ee}var ne=function(ee,ce){return ce.querySelector(ee)},re=function(ee,ce){return ce.querySelectorAll(ee)},ae=function(ee,ce){var Ae=ee.matches||ee[V(ee,"matchesSelector")];return(ae=function(Oe,Fe){return Ae.call(Oe,Fe)})(ee,ce)};"function"==typeof Sizzle&&(ne=function(ee,ce){return Sizzle(ee,ce)[0]||null},re=Sizzle,ae=Sizzle.matchesSelector),l.selection=function(){return l.select(p.documentElement)};var se=l.selection.prototype=[];function pe(ee){return"function"==typeof ee?ee:function(){return ne(ee,this)}}function ke(ee){return"function"==typeof ee?ee:function(){return re(ee,this)}}se.select=function(ee){var ce,Ae,Oe,Fe,Ue=[];ee=pe(ee);for(var Ge=-1,Xe=this.length;++Ge<Xe;){Ue.push(ce=[]),ce.parentNode=(Oe=this[Ge]).parentNode;for(var rt=-1,ut=Oe.length;++rt<ut;)(Fe=Oe[rt])?(ce.push(Ae=ee.call(Fe,Fe.__data__,rt,Ge)),Ae&&"__data__"in Fe&&(Ae.__data__=Fe.__data__)):ce.push(null)}return Q(Ue)},se.selectAll=function(ee){var ce,Ae,Oe=[];ee=ke(ee);for(var Fe=-1,Ue=this.length;++Fe<Ue;)for(var Ge=this[Fe],Xe=-1,rt=Ge.length;++Xe<rt;)(Ae=Ge[Xe])&&(Oe.push(ce=x(ee.call(Ae,Ae.__data__,Xe,Fe))),ce.parentNode=Ae);return Q(Oe)};var me="http://www.w3.org/1999/xhtml",le={svg:"http://www.w3.org/2000/svg",xhtml:me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ue(ee,ce){return ee=l.ns.qualify(ee),null==ce?ee.local?function(){this.removeAttributeNS(ee.space,ee.local)}:function(){this.removeAttribute(ee)}:"function"==typeof ce?ee.local?function(){var Ae=ce.apply(this,arguments);null==Ae?this.removeAttributeNS(ee.space,ee.local):this.setAttributeNS(ee.space,ee.local,Ae)}:function(){var Ae=ce.apply(this,arguments);null==Ae?this.removeAttribute(ee):this.setAttribute(ee,Ae)}:ee.local?function(){this.setAttributeNS(ee.space,ee.local,ce)}:function(){this.setAttribute(ee,ce)}}function Ee(ee){return ee.trim().replace(/\s+/g," ")}function de(ee){return new RegExp("(?:^|\\s+)"+l.requote(ee)+"(?:\\s+|$)","g")}function xe(ee){return(ee+"").trim().split(/^|\s+/)}function Te(ee,ce){var Ae=(ee=xe(ee).map(we)).length;return"function"==typeof ce?function(){for(var Oe=-1,Fe=ce.apply(this,arguments);++Oe<Ae;)ee[Oe](this,Fe)}:function(){for(var Oe=-1;++Oe<Ae;)ee[Oe](this,ce)}}function we(ee){var ce=de(ee);return function(Ae,Oe){if(Fe=Ae.classList)return Oe?Fe.add(ee):Fe.remove(ee);var Fe=Ae.getAttribute("class")||"";Oe?(ce.lastIndex=0,ce.test(Fe)||Ae.setAttribute("class",Ee(Fe+" "+ee))):Ae.setAttribute("class",Ee(Fe.replace(ce," ")))}}function K(ee,ce,Ae){return null==ce?function(){this.style.removeProperty(ee)}:"function"==typeof ce?function(){var Oe=ce.apply(this,arguments);null==Oe?this.style.removeProperty(ee):this.style.setProperty(ee,Oe,Ae)}:function(){this.style.setProperty(ee,ce,Ae)}}function oe(ee,ce){return null==ce?function(){delete this[ee]}:"function"==typeof ce?function(){var Ae=ce.apply(this,arguments);null==Ae?delete this[ee]:this[ee]=Ae}:function(){this[ee]=ce}}function he(ee){return"function"==typeof ee?ee:(ee=l.ns.qualify(ee)).local?function(){return this.ownerDocument.createElementNS(ee.space,ee.local)}:function(){var ce=this.ownerDocument,Ae=this.namespaceURI;return Ae===me&&ce.documentElement.namespaceURI===me?ce.createElement(ee):ce.createElementNS(Ae,ee)}}function ye(){var ee=this.parentNode;ee&&ee.removeChild(this)}function Me(ee){return{__data__:ee}}function Re(ee){return function(){return ae(this,ee)}}function Pe(ee){return arguments.length||(ee=c),function(ce,Ae){return ce&&Ae?ee(ce.__data__,Ae.__data__):!ce-!Ae}}function De(ee,ce){for(var Ae=0,Oe=ee.length;Ae<Oe;Ae++)for(var Fe,Ue=ee[Ae],Ge=0,Xe=Ue.length;Ge<Xe;Ge++)(Fe=Ue[Ge])&&ce(Fe,Ge,Ae);return ee}function fe(ee){return X(ee,ge),ee}l.ns={prefix:le,qualify:function(ee){var ce=ee.indexOf(":"),Ae=ee;return ce>=0&&"xmlns"!==(Ae=ee.slice(0,ce))&&(ee=ee.slice(ce+1)),le.hasOwnProperty(Ae)?{space:le[Ae],local:ee}:ee}},se.attr=function(ee,ce){if(arguments.length<2){if("string"==typeof ee){var Ae=this.node();return(ee=l.ns.qualify(ee)).local?Ae.getAttributeNS(ee.space,ee.local):Ae.getAttribute(ee)}for(ce in ee)this.each(ue(ce,ee[ce]));return this}return this.each(ue(ee,ce))},se.classed=function(ee,ce){if(arguments.length<2){if("string"==typeof ee){var Ae=this.node(),Oe=(ee=xe(ee)).length,Fe=-1;if(ce=Ae.classList){for(;++Fe<Oe;)if(!ce.contains(ee[Fe]))return!1}else for(ce=Ae.getAttribute("class");++Fe<Oe;)if(!de(ee[Fe]).test(ce))return!1;return!0}for(ce in ee)this.each(Te(ce,ee[ce]));return this}return this.each(Te(ee,ce))},se.style=function(ee,ce,Ae){var Oe=arguments.length;if(Oe<3){if("string"!=typeof ee){for(Ae in Oe<2&&(ce=""),ee)this.each(K(Ae,ee[Ae],ce));return this}if(Oe<2){var Fe=this.node();return e(Fe).getComputedStyle(Fe,null).getPropertyValue(ee)}Ae=""}return this.each(K(ee,ce,Ae))},se.property=function(ee,ce){if(arguments.length<2){if("string"==typeof ee)return this.node()[ee];for(ce in ee)this.each(oe(ce,ee[ce]));return this}return this.each(oe(ee,ce))},se.text=function(ee){return arguments.length?this.each("function"==typeof ee?function(){var ce=ee.apply(this,arguments);this.textContent=ce??""}:null==ee?function(){this.textContent=""}:function(){this.textContent=ee}):this.node().textContent},se.html=function(ee){return arguments.length?this.each("function"==typeof ee?function(){var ce=ee.apply(this,arguments);this.innerHTML=ce??""}:null==ee?function(){this.innerHTML=""}:function(){this.innerHTML=ee}):this.node().innerHTML},se.append=function(ee){return ee=he(ee),this.select(function(){return this.appendChild(ee.apply(this,arguments))})},se.insert=function(ee,ce){return ee=he(ee),ce=pe(ce),this.select(function(){return this.insertBefore(ee.apply(this,arguments),ce.apply(this,arguments)||null)})},se.remove=function(){return this.each(ye)},se.data=function(ee,ce){var Ae,Oe,Fe=-1,Ue=this.length;if(!arguments.length){for(ee=new Array(Ue=(Ae=this[0]).length);++Fe<Ue;)(Oe=Ae[Fe])&&(ee[Fe]=Oe.__data__);return ee}function Ge(Ct,Rt){var Ft,Yt,cn,Wt=Ct.length,tn=Rt.length,$t=Math.min(Wt,tn),_n=new Array(tn),dn=new Array(tn),Qt=new Array(Wt);if(ce){var Cn,Dn=new w,Jn=new Array(Wt);for(Ft=-1;++Ft<Wt;)(Yt=Ct[Ft])&&(Dn.has(Cn=ce.call(Yt,Yt.__data__,Ft))?Qt[Ft]=Yt:Dn.set(Cn,Yt),Jn[Ft]=Cn);for(Ft=-1;++Ft<tn;)(Yt=Dn.get(Cn=ce.call(Rt,cn=Rt[Ft],Ft)))?!0!==Yt&&(_n[Ft]=Yt,Yt.__data__=cn):dn[Ft]=Me(cn),Dn.set(Cn,!0);for(Ft=-1;++Ft<Wt;)Ft in Jn&&!0!==Dn.get(Jn[Ft])&&(Qt[Ft]=Ct[Ft])}else{for(Ft=-1;++Ft<$t;)cn=Rt[Ft],(Yt=Ct[Ft])?(Yt.__data__=cn,_n[Ft]=Yt):dn[Ft]=Me(cn);for(;Ft<tn;++Ft)dn[Ft]=Me(Rt[Ft]);for(;Ft<Wt;++Ft)Qt[Ft]=Ct[Ft]}dn.update=_n,dn.parentNode=_n.parentNode=Qt.parentNode=Ct.parentNode,Xe.push(dn),rt.push(_n),ut.push(Qt)}var Xe=fe([]),rt=Q([]),ut=Q([]);if("function"==typeof ee)for(;++Fe<Ue;)Ge(Ae=this[Fe],ee.call(Ae,Ae.parentNode.__data__,Fe));else for(;++Fe<Ue;)Ge(Ae=this[Fe],ee);return rt.enter=function(){return Xe},rt.exit=function(){return ut},rt},se.datum=function(ee){return arguments.length?this.property("__data__",ee):this.property("__data__")},se.filter=function(ee){var ce,Ae,Oe,Fe=[];"function"!=typeof ee&&(ee=Re(ee));for(var Ue=0,Ge=this.length;Ue<Ge;Ue++){Fe.push(ce=[]),ce.parentNode=(Ae=this[Ue]).parentNode;for(var Xe=0,rt=Ae.length;Xe<rt;Xe++)(Oe=Ae[Xe])&&ee.call(Oe,Oe.__data__,Xe,Ue)&&ce.push(Oe)}return Q(Fe)},se.order=function(){for(var ee=-1,ce=this.length;++ee<ce;)for(var Ae,Oe=this[ee],Fe=Oe.length-1,Ue=Oe[Fe];--Fe>=0;)(Ae=Oe[Fe])&&(Ue&&Ue!==Ae.nextSibling&&Ue.parentNode.insertBefore(Ae,Ue),Ue=Ae);return this},se.sort=function(ee){ee=Pe.apply(this,arguments);for(var ce=-1,Ae=this.length;++ce<Ae;)this[ce].sort(ee);return this.order()},se.each=function(ee){return De(this,function(ce,Ae,Oe){ee.call(ce,ce.__data__,Ae,Oe)})},se.call=function(ee){var ce=x(arguments);return ee.apply(ce[0]=this,ce),this},se.empty=function(){return!this.node()},se.node=function(){for(var ee=0,ce=this.length;ee<ce;ee++)for(var Ae=this[ee],Oe=0,Fe=Ae.length;Oe<Fe;Oe++){var Ue=Ae[Oe];if(Ue)return Ue}return null},se.size=function(){var ee=0;return De(this,function(){++ee}),ee};var ge=[];function be(ee){var ce,Ae;return function(Oe,Fe,Ue){var Ge,Xe=ee[Ue].update,rt=Xe.length;for(Ue!=Ae&&(Ae=Ue,ce=0),Fe>=ce&&(ce=Fe+1);!(Ge=Xe[ce])&&++ce<rt;);return Ge}}function Ie(ee,ce,Ae){var Oe="__on"+ee,Fe=ee.indexOf("."),Ue=Ve;Fe>0&&(ee=ee.slice(0,Fe));var Ge=He.get(ee);function Xe(){var rt=this[Oe];rt&&(this.removeEventListener(ee,rt,rt.$),delete this[Oe])}return Ge&&(ee=Ge,Ue=tt),Fe?ce?function(){var rt=Ue(ce,x(arguments));Xe.call(this),this.addEventListener(ee,this[Oe]=rt,rt.$=Ae),rt._=ce}:Xe:ce?B:function(){var rt,ut=new RegExp("^__on([^.]+)"+l.requote(ee)+"$");for(var Ct in this)if(rt=Ct.match(ut)){var Rt=this[Ct];this.removeEventListener(rt[1],Rt,Rt.$),delete this[Ct]}}}l.selection.enter=fe,l.selection.enter.prototype=ge,ge.append=se.append,ge.empty=se.empty,ge.node=se.node,ge.call=se.call,ge.size=se.size,ge.select=function(ee){for(var ce,Ae,Oe,Fe,Ue,Ge=[],Xe=-1,rt=this.length;++Xe<rt;){Oe=(Fe=this[Xe]).update,Ge.push(ce=[]),ce.parentNode=Fe.parentNode;for(var ut=-1,Ct=Fe.length;++ut<Ct;)(Ue=Fe[ut])?(ce.push(Oe[ut]=Ae=ee.call(Fe.parentNode,Ue.__data__,ut,Xe)),Ae.__data__=Ue.__data__):ce.push(null)}return Q(Ge)},ge.insert=function(ee,ce){return arguments.length<2&&(ce=be(this)),se.insert.call(this,ee,ce)},l.select=function(ee){var ce;return"string"==typeof ee?(ce=[ne(ee,p)]).parentNode=p.documentElement:(ce=[ee]).parentNode=s(ee),Q([ce])},l.selectAll=function(ee){var ce;return"string"==typeof ee?(ce=x(re(ee,p))).parentNode=p.documentElement:(ce=x(ee)).parentNode=null,Q([ce])},se.on=function(ee,ce,Ae){var Oe=arguments.length;if(Oe<3){if("string"!=typeof ee){for(Ae in Oe<2&&(ce=!1),ee)this.each(Ie(Ae,ee[Ae],ce));return this}if(Oe<2)return(Oe=this.node()["__on"+ee])&&Oe._;Ae=!1}return this.each(Ie(ee,ce,Ae))};var He=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(ee,ce){return function(Ae){var Oe=l.event;l.event=Ae,ce[0]=this.__data__;try{ee.apply(this,ce)}finally{l.event=Oe}}}function tt(ee,ce){var Ae=Ve(ee,ce);return function(Oe){var Ue=Oe.relatedTarget;Ue&&(Ue===this||8&Ue.compareDocumentPosition(this))||Ae.call(this,Oe)}}p&&He.forEach(function(ee){"on"+ee in p&&He.remove(ee)});var nt,st=0;function dt(ee){var ce=".dragsuppress-"+ ++st,Ae="click"+ce,Oe=l.select(e(ee)).on("touchmove"+ce,J).on("dragstart"+ce,J).on("selectstart"+ce,J);if(null==nt&&(nt=!("onselectstart"in ee)&&V(ee.style,"userSelect")),nt){var Fe=s(ee).style,Ue=Fe[nt];Fe[nt]="none"}return function(Ge){if(Oe.on(ce,null),nt&&(Fe[nt]=Ue),Ge){var Xe=function(){Oe.on(Ae,null)};Oe.on(Ae,function(){J(),Xe()},!0),setTimeout(Xe,0)}}}l.mouse=function(ee){return _t(ee,Y())};var wt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _t(ee,ce){ce.changedTouches&&(ce=ce.changedTouches[0]);var Ae=ee.ownerSVGElement||ee;if(Ae.createSVGPoint){var Oe=Ae.createSVGPoint();if(wt<0){var Fe=e(ee);if(Fe.scrollX||Fe.scrollY){var Ue=(Ae=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();wt=!(Ue.f||Ue.e),Ae.remove()}}return wt?(Oe.x=ce.pageX,Oe.y=ce.pageY):(Oe.x=ce.clientX,Oe.y=ce.clientY),[(Oe=Oe.matrixTransform(ee.getScreenCTM().inverse())).x,Oe.y]}var Ge=ee.getBoundingClientRect();return[ce.clientX-Ge.left-ee.clientLeft,ce.clientY-Ge.top-ee.clientTop]}function pt(){return l.event.changedTouches[0].identifier}l.touch=function(ee,ce,Ae){if(arguments.length<3&&(Ae=ce,ce=Y().changedTouches),ce)for(var Oe,Fe=0,Ue=ce.length;Fe<Ue;++Fe)if((Oe=ce[Fe]).identifier===Ae)return _t(ee,Oe)},l.behavior.drag=function(){var ee=q(Fe,"drag","dragstart","dragend"),ce=null,Ae=Ue(B,l.mouse,e,"mousemove","mouseup"),Oe=Ue(pt,l.touch,j,"touchmove","touchend");function Fe(){this.on("mousedown.drag",Ae).on("touchstart.drag",Oe)}function Ue(Ge,Xe,rt,ut,Ct){return function(){var Rt,Ft=this,Yt=l.event.target.correspondingElement||l.event.target,cn=Ft.parentNode,Wt=ee.of(Ft,arguments),tn=0,$t=Ge(),_n=".drag"+(null==$t?"":"-"+$t),dn=l.select(rt(Yt)).on(ut+_n,Dn).on(Ct+_n,Jn),Qt=dt(Yt),Cn=Xe(cn,$t);function Dn(){var Kn,vr,yr=Xe(cn,$t);yr&&(tn|=(Kn=yr[0]-Cn[0])|(vr=yr[1]-Cn[1]),Cn=yr,Wt({type:"drag",x:yr[0]+Rt[0],y:yr[1]+Rt[1],dx:Kn,dy:vr}))}function Jn(){Xe(cn,$t)&&(dn.on(ut+_n,null).on(Ct+_n,null),Qt(tn),Wt({type:"dragend"}))}Rt=ce?[(Rt=ce.apply(Ft,arguments)).x-Cn[0],Rt.y-Cn[1]]:[0,0],Wt({type:"dragstart"})}}return Fe.origin=function(Ge){return arguments.length?(ce=Ge,Fe):ce},l.rebind(Fe,ee,"on")},l.touches=function(ee,ce){return arguments.length<2&&(ce=Y().touches),ce?x(ce).map(function(Ae){var Oe=_t(ee,Ae);return Oe.identifier=Ae.identifier,Oe}):[]};var Pt=1e-6,St=Math.PI,Ot=2*St,jt=Ot-Pt,Dt=St/2,Ye=St/180,Ze=180/St;function Ne(ee){return ee>1?Dt:ee<-1?-Dt:Math.asin(ee)}function Je(ee){return((ee=Math.exp(ee))+1/ee)/2}var at=Math.SQRT2;l.interpolateZoom=function(ee,ce){var Ae,Oe,Fe=ee[0],Ue=ee[1],Ge=ee[2],ut=ce[2],Ct=ce[0]-Fe,Rt=ce[1]-Ue,Ft=Ct*Ct+Rt*Rt;if(Ft<1e-12)Oe=Math.log(ut/Ge)/at,Ae=function(_n){return[Fe+_n*Ct,Ue+_n*Rt,Ge*Math.exp(at*_n*Oe)]};else{var Yt=Math.sqrt(Ft),cn=(ut*ut-Ge*Ge+4*Ft)/(2*Ge*2*Yt),Wt=(ut*ut-Ge*Ge-4*Ft)/(2*ut*2*Yt),tn=Math.log(Math.sqrt(cn*cn+1)-cn),$t=Math.log(Math.sqrt(Wt*Wt+1)-Wt);Oe=($t-tn)/at,Ae=function(_n){var dn,Jn,Qt=_n*Oe,Cn=Je(tn),Dn=Ge/(2*Yt)*(Cn*(dn=at*Qt+tn,((dn=Math.exp(2*dn))-1)/(dn+1))-(Jn=tn,((Jn=Math.exp(Jn))-1/Jn)/2));return[Fe+Dn*Ct,Ue+Dn*Rt,Ge*Cn/Je(at*Qt+tn)]}}return Ae.duration=1e3*Oe,Ae},l.behavior.zoom=function(){var ee,ce,Ae,Oe,Fe,Ue,Ge,Xe,rt,ut={x:0,y:0,k:1},Ct=[960,500],Rt=Ke,Ft=250,Yt=0,cn="mousedown.zoom",Wt="mousemove.zoom",tn="mouseup.zoom",$t="touchstart.zoom",_n=q(dn,"zoomstart","zoom","zoomend");function dn(pr){pr.on(cn,gr).on(ze+".zoom",Vr).on("dblclick.zoom",Hr).on($t,Sr)}function Qt(pr){return[(pr[0]-ut.x)/ut.k,(pr[1]-ut.y)/ut.k]}function Cn(pr){ut.k=Math.max(Rt[0],Math.min(Rt[1],pr))}function Dn(pr,Er){var Fr;ut.x+=pr[0]-(Er=[(Fr=Er)[0]*ut.k+ut.x,Fr[1]*ut.k+ut.y])[0],ut.y+=pr[1]-Er[1]}function Jn(pr,Er,Fr,Dr){pr.__chart__={x:ut.x,y:ut.y,k:ut.k},Cn(Math.pow(2,Dr)),Dn(ce=Er,Fr),pr=l.select(pr),Ft>0&&(pr=pr.transition().duration(Ft)),pr.call(dn.event)}function Kn(){Ge&&Ge.domain(Ue.range().map(function(pr){return(pr-ut.x)/ut.k}).map(Ue.invert)),rt&&rt.domain(Xe.range().map(function(pr){return(pr-ut.y)/ut.k}).map(Xe.invert))}function vr(pr){Yt++||pr({type:"zoomstart"})}function yr(pr){Kn(),pr({type:"zoom",scale:ut.k,translate:[ut.x,ut.y]})}function fr(pr){--Yt||(pr({type:"zoomend"}),ce=null)}function gr(){var pr=this,Er=_n.of(pr,arguments),Fr=0,Dr=l.select(e(pr)).on(Wt,Qr).on(tn,hi),Yr=Qt(l.mouse(pr)),Zr=dt(pr);function Qr(){Fr=1,Dn(l.mouse(pr),Yr),yr(Er)}function hi(){Dr.on(Wt,null).on(tn,null),Zr(Fr),fr(Er)}gi.call(pr),vr(Er)}function Sr(){var pr,Er=this,Fr=_n.of(Er,arguments),Dr={},Yr=0,Zr=".zoom-"+l.event.changedTouches[0].identifier,Qr="touchmove"+Zr,hi="touchend"+Zr,_i=[],vi=l.select(Er),ci=dt(Er);function pi(){var Ni=l.touches(Er);return pr=ut.k,Ni.forEach(function(Nr){Nr.identifier in Dr&&(Dr[Nr.identifier]=Qt(Nr))}),Ni}function mi(){var Ni=l.event.target;l.select(Ni).on(Qr,Ci).on(hi,Eo),_i.push(Ni);for(var Nr=l.event.changedTouches,Yi=0,ta=Nr.length;Yi<ta;++Yi)Dr[Nr[Yi].identifier]=null;var Si=pi(),Ya=Date.now();if(1===Si.length){if(Ya-Fe<500){var Wr=Si[0];Jn(Er,Wr,Dr[Wr.identifier],Math.floor(Math.log(ut.k)/Math.LN2)+1),J()}Fe=Ya}else if(Si.length>1){var ji=Si[1],ga=(Wr=Si[0])[0]-ji[0],Ds=Wr[1]-ji[1];Yr=ga*ga+Ds*Ds}}function Ci(){var Ni,Nr,Yi,ta,Si=l.touches(Er);gi.call(Er);for(var Ya=0,Wr=Si.length;Ya<Wr;++Ya,ta=null)if(ta=Dr[(Yi=Si[Ya]).identifier]){if(Nr)break;Ni=Yi,Nr=ta}if(ta){var ji=(ji=Yi[0]-Ni[0])*ji+(ji=Yi[1]-Ni[1])*ji,ga=Yr&&Math.sqrt(ji/Yr);Ni=[(Ni[0]+Yi[0])/2,(Ni[1]+Yi[1])/2],Nr=[(Nr[0]+ta[0])/2,(Nr[1]+ta[1])/2],Cn(ga*pr)}Fe=null,Dn(Ni,Nr),yr(Fr)}function Eo(){if(l.event.touches.length){for(var Ni=l.event.changedTouches,Nr=0,Yi=Ni.length;Nr<Yi;++Nr)delete Dr[Ni[Nr].identifier];for(var ta in Dr)return void pi()}l.selectAll(_i).on(Zr,null),vi.on(cn,gr).on($t,Sr),ci(),fr(Fr)}mi(),vr(Fr),vi.on(cn,null).on($t,mi)}function Vr(){var pr=_n.of(this,arguments);Oe?clearTimeout(Oe):(gi.call(this),ee=Qt(ce=Ae||l.mouse(this)),vr(pr)),Oe=setTimeout(function(){Oe=null,fr(pr)},50),J(),Cn(Math.pow(2,.002*Se())*ut.k),Dn(ce,ee),yr(pr)}function Hr(){var pr=l.mouse(this),Er=Math.log(ut.k)/Math.LN2;Jn(this,pr,Qt(pr),l.event.shiftKey?Math.ceil(Er)-1:Math.floor(Er)+1)}return ze||(ze="onwheel"in p?(Se=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(Se=function(){return l.event.wheelDelta},"mousewheel"):(Se=function(){return-l.event.detail},"MozMousePixelScroll")),dn.event=function(pr){pr.each(function(){var Er=_n.of(this,arguments),Fr=ut;$e?l.select(this).transition().each("start.zoom",function(){ut=this.__chart__||{x:0,y:0,k:1},vr(Er)}).tween("zoom:zoom",function(){var Dr=Ct[0],Zr=ce?ce[0]:Dr/2,Qr=ce?ce[1]:Ct[1]/2,hi=l.interpolateZoom([(Zr-ut.x)/ut.k,(Qr-ut.y)/ut.k,Dr/ut.k],[(Zr-Fr.x)/Fr.k,(Qr-Fr.y)/Fr.k,Dr/Fr.k]);return function(_i){var vi=hi(_i),ci=Dr/vi[2];this.__chart__=ut={x:Zr-vi[0]*ci,y:Qr-vi[1]*ci,k:ci},yr(Er)}}).each("interrupt.zoom",function(){fr(Er)}).each("end.zoom",function(){fr(Er)}):(this.__chart__=ut,vr(Er),yr(Er),fr(Er))})},dn.translate=function(pr){return arguments.length?(ut={x:+pr[0],y:+pr[1],k:ut.k},Kn(),dn):[ut.x,ut.y]},dn.scale=function(pr){return arguments.length?(ut={x:ut.x,y:ut.y,k:null},Cn(+pr),Kn(),dn):ut.k},dn.scaleExtent=function(pr){return arguments.length?(Rt=null==pr?Ke:[+pr[0],+pr[1]],dn):Rt},dn.center=function(pr){return arguments.length?(Ae=pr&&[+pr[0],+pr[1]],dn):Ae},dn.size=function(pr){return arguments.length?(Ct=pr&&[+pr[0],+pr[1]],dn):Ct},dn.duration=function(pr){return arguments.length?(Ft=+pr,dn):Ft},dn.x=function(pr){return arguments.length?(Ge=pr,Ue=pr.copy(),ut={x:0,y:0,k:1},dn):Ge},dn.y=function(pr){return arguments.length?(rt=pr,Xe=pr.copy(),ut={x:0,y:0,k:1},dn):rt},l.rebind(dn,_n,"on")};var Se,ze,Ke=[0,1/0];function it(){}function ct(ee,ce,Ae){return this instanceof ct?(this.h=+ee,this.s=+ce,void(this.l=+Ae)):arguments.length<2?ee instanceof ct?new ct(ee.h,ee.s,ee.l):on(""+ee,sn,ct):new ct(ee,ce,Ae)}l.color=it,it.prototype.toString=function(){return this.rgb()+""},l.hsl=ct;var mt=ct.prototype=new it;function Lt(ee,ce,Ae){var Oe,Fe;function Ue(Ge){return Math.round(255*((Xe=Ge)>360?Xe-=360:Xe<0&&(Xe+=360),Xe<60?Oe+(Fe-Oe)*Xe/60:Xe<180?Fe:Xe<240?Oe+(Fe-Oe)*(240-Xe)/60:Oe));var Xe}return ee=isNaN(ee)?0:(ee%=360)<0?ee+360:ee,ce=isNaN(ce)||ce<0?0:ce>1?1:ce,Oe=2*(Ae=Ae<0?0:Ae>1?1:Ae)-(Fe=Ae<=.5?Ae*(1+ce):Ae+ce-Ae*ce),new xn(Ue(ee+120),Ue(ee),Ue(ee-120))}function At(ee,ce,Ae){return this instanceof At?(this.h=+ee,this.c=+ce,void(this.l=+Ae)):arguments.length<2?ee instanceof At?new At(ee.h,ee.c,ee.l):Xt(ee instanceof gt?ee.l:(ee=En((ee=l.rgb(ee)).r,ee.g,ee.b)).l,ee.a,ee.b):new At(ee,ce,Ae)}mt.brighter=function(ee){return ee=Math.pow(.7,arguments.length?ee:1),new ct(this.h,this.s,this.l/ee)},mt.darker=function(ee){return ee=Math.pow(.7,arguments.length?ee:1),new ct(this.h,this.s,ee*this.l)},mt.rgb=function(){return Lt(this.h,this.s,this.l)},l.hcl=At;var ht=At.prototype=new it;function Et(ee,ce,Ae){return isNaN(ee)&&(ee=0),isNaN(ce)&&(ce=0),new gt(Ae,Math.cos(ee*=Ye)*ce,Math.sin(ee)*ce)}function gt(ee,ce,Ae){return this instanceof gt?(this.l=+ee,this.a=+ce,void(this.b=+Ae)):arguments.length<2?ee instanceof gt?new gt(ee.l,ee.a,ee.b):ee instanceof At?Et(ee.h,ee.c,ee.l):En((ee=xn(ee)).r,ee.g,ee.b):new gt(ee,ce,Ae)}ht.brighter=function(ee){return new At(this.h,this.c,Math.min(100,this.l+kt*(arguments.length?ee:1)))},ht.darker=function(ee){return new At(this.h,this.c,Math.max(0,this.l-kt*(arguments.length?ee:1)))},ht.rgb=function(){return Et(this.h,this.c,this.l).rgb()},l.lab=gt;var kt=18,Nt=gt.prototype=new it;function qt(ee,ce,Ae){var Oe=(ee+16)/116,Fe=Oe+ce/500,Ue=Oe-Ae/200;return new xn(nn(3.2404542*(Fe=.95047*Kt(Fe))-1.5371385*(Oe=1*Kt(Oe))-.4985314*(Ue=1.08883*Kt(Ue))),nn(-.969266*Fe+1.8760108*Oe+.041556*Ue),nn(.0556434*Fe-.2040259*Oe+1.0572252*Ue))}function Xt(ee,ce,Ae){return ee>0?new At(Math.atan2(Ae,ce)*Ze,Math.sqrt(ce*ce+Ae*Ae),ee):new At(NaN,NaN,ee)}function Kt(ee){return ee>.206893034?ee*ee*ee:(ee-.13793103448275862)/7.787037}function fn(ee){return ee>.008856?Math.pow(ee,.3333333333333333):7.787037*ee+.13793103448275862}function nn(ee){return Math.round(255*(ee<=.00304?12.92*ee:1.055*Math.pow(ee,.4166666666666667)-.055))}function xn(ee,ce,Ae){return this instanceof xn?(this.r=~~ee,this.g=~~ce,void(this.b=~~Ae)):arguments.length<2?ee instanceof xn?new xn(ee.r,ee.g,ee.b):on(""+ee,xn,Lt):new xn(ee,ce,Ae)}function jn(ee){return new xn(ee>>16,ee>>8&255,255&ee)}function mn(ee){return jn(ee)+""}Nt.brighter=function(ee){return new gt(Math.min(100,this.l+kt*(arguments.length?ee:1)),this.a,this.b)},Nt.darker=function(ee){return new gt(Math.max(0,this.l-kt*(arguments.length?ee:1)),this.a,this.b)},Nt.rgb=function(){return qt(this.l,this.a,this.b)},l.rgb=xn;var en=xn.prototype=new it;function vn(ee){return ee<16?"0"+Math.max(0,ee).toString(16):Math.min(255,ee).toString(16)}function on(ee,ce,Ae){var Oe,Fe,Ue,Ge=0,Xe=0,rt=0;if(Oe=/([a-z]+)\((.*)\)/.exec(ee=ee.toLowerCase()))switch(Fe=Oe[2].split(","),Oe[1]){case"hsl":return Ae(parseFloat(Fe[0]),parseFloat(Fe[1])/100,parseFloat(Fe[2])/100);case"rgb":return ce(zn(Fe[0]),zn(Fe[1]),zn(Fe[2]))}return(Ue=Fn.get(ee))?ce(Ue.r,Ue.g,Ue.b):(null==ee||"#"!==ee.charAt(0)||isNaN(Ue=parseInt(ee.slice(1),16))||(4===ee.length?(Ge=(3840&Ue)>>4,Ge|=Ge>>4,Xe=240&Ue,Xe|=Xe>>4,rt=15&Ue,rt|=rt<<4):7===ee.length&&(Ge=(16711680&Ue)>>16,Xe=(65280&Ue)>>8,rt=255&Ue)),ce(Ge,Xe,rt))}function sn(ee,ce,Ae){var Oe,Fe,Ue=Math.min(ee/=255,ce/=255,Ae/=255),Ge=Math.max(ee,ce,Ae),Xe=Ge-Ue,rt=(Ge+Ue)/2;return Xe?(Fe=rt<.5?Xe/(Ge+Ue):Xe/(2-Ge-Ue),Oe=ee==Ge?(ce-Ae)/Xe+(ce<Ae?6:0):ce==Ge?(Ae-ee)/Xe+2:(ee-ce)/Xe+4,Oe*=60):(Oe=NaN,Fe=rt>0&&rt<1?0:Oe),new ct(Oe,Fe,rt)}function En(ee,ce,Ae){var Oe=fn((.4124564*(ee=kn(ee))+.3575761*(ce=kn(ce))+.1804375*(Ae=kn(Ae)))/.95047),Fe=fn((.2126729*ee+.7151522*ce+.072175*Ae)/1);return gt(116*Fe-16,500*(Oe-Fe),200*(Fe-fn((.0193339*ee+.119192*ce+.9503041*Ae)/1.08883)))}function kn(ee){return(ee/=255)<=.04045?ee/12.92:Math.pow((ee+.055)/1.055,2.4)}function zn(ee){var ce=parseFloat(ee);return"%"===ee.charAt(ee.length-1)?Math.round(2.55*ce):ce}en.brighter=function(ee){ee=Math.pow(.7,arguments.length?ee:1);var ce=this.r,Ae=this.g,Oe=this.b,Fe=30;return ce||Ae||Oe?(ce&&ce<Fe&&(ce=Fe),Ae&&Ae<Fe&&(Ae=Fe),Oe&&Oe<Fe&&(Oe=Fe),new xn(Math.min(255,ce/ee),Math.min(255,Ae/ee),Math.min(255,Oe/ee))):new xn(Fe,Fe,Fe)},en.darker=function(ee){return new xn((ee=Math.pow(.7,arguments.length?ee:1))*this.r,ee*this.g,ee*this.b)},en.hsl=function(){return sn(this.r,this.g,this.b)},en.toString=function(){return"#"+vn(this.r)+vn(this.g)+vn(this.b)};var Fn=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Bn(ee){return"function"==typeof ee?ee:function(){return ee}}function er(ee){return function(ce,Ae,Oe){return 2===arguments.length&&"function"==typeof Ae&&(Oe=Ae,Ae=null),Xn(ce,Ae,ee,Oe)}}function Xn(ee,ce,Ae,Oe){var Ct,Fe={},Ue=l.dispatch("beforesend","progress","load","error"),Ge={},Xe=new XMLHttpRequest,rt=null;function ut(){var Ct,Ft,Yt,Rt=Xe.status;if(!Rt&&((Yt=(Ft=Xe).responseType)&&"text"!==Yt?Ft.response:Ft.responseText)||Rt>=200&&Rt<300||304===Rt){try{Ct=Ae.call(Fe,Xe)}catch(Ft){return void Ue.error.call(Fe,Ft)}Ue.load.call(Fe,Ct)}else Ue.error.call(Fe,Xe)}return self.XDomainRequest&&!("withCredentials"in Xe)&&/^(http(s)?:)?\/\//.test(ee)&&(Xe=new XDomainRequest),"onload"in Xe?Xe.onload=Xe.onerror=ut:Xe.onreadystatechange=function(){Xe.readyState>3&&ut()},Xe.onprogress=function(Ct){var Rt=l.event;l.event=Ct;try{Ue.progress.call(Fe,Xe)}finally{l.event=Rt}},Fe.header=function(Ct,Rt){return Ct=(Ct+"").toLowerCase(),arguments.length<2?Ge[Ct]:(null==Rt?delete Ge[Ct]:Ge[Ct]=Rt+"",Fe)},Fe.mimeType=function(Ct){return arguments.length?(ce=null==Ct?null:Ct+"",Fe):ce},Fe.responseType=function(Ct){return arguments.length?(rt=Ct,Fe):rt},Fe.response=function(Ct){return Ae=Ct,Fe},["get","post"].forEach(function(Ct){Fe[Ct]=function(){return Fe.send.apply(Fe,[Ct].concat(x(arguments)))}}),Fe.send=function(Ct,Rt,Ft){if(2===arguments.length&&"function"==typeof Rt&&(Ft=Rt,Rt=null),Xe.open(Ct,ee,!0),null==ce||"accept"in Ge||(Ge.accept=ce+",*/*"),Xe.setRequestHeader)for(var Yt in Ge)Xe.setRequestHeader(Yt,Ge[Yt]);return null!=ce&&Xe.overrideMimeType&&Xe.overrideMimeType(ce),null!=rt&&(Xe.responseType=rt),null!=Ft&&Fe.on("error",Ft).on("load",function(cn){Ft(null,cn)}),Ue.beforesend.call(Fe,Xe),Xe.send(Rt??null),Fe},Fe.abort=function(){return Xe.abort(),Fe},l.rebind(Fe,Ue,"on"),null==Oe?Fe:Fe.get(1===(Ct=Oe).length?function(Rt,Ft){Ct(null==Rt?Ft:null)}:Ct)}Fn.forEach(function(ee,ce){Fn.set(ee,jn(ce))}),l.functor=Bn,l.xhr=er(j),l.dsv=function(ee,ce){var Ae=new RegExp('["'+ee+"\n]"),Oe=ee.charCodeAt(0);function Fe(ut,Ct,Rt){arguments.length<3&&(Rt=Ct,Ct=null);var Ft=Xn(ut,ce,null==Ct?Ue:Ge(Ct),Rt);return Ft.row=function(Yt){return arguments.length?Ft.response(null==(Ct=Yt)?Ue:Ge(Yt)):Ct},Ft}function Ue(ut){return Fe.parse(ut.responseText)}function Ge(ut){return function(Ct){return Fe.parse(Ct.responseText,ut)}}function Xe(ut){return ut.map(rt).join(ee)}function rt(ut){return Ae.test(ut)?'"'+ut.replace(/\"/g,'""')+'"':ut}return Fe.parse=function(ut,Ct){var Rt;return Fe.parseRows(ut,function(Ft,Yt){if(Rt)return Rt(Ft,Yt-1);var cn=function(Wt){for(var tn={},$t=Ft.length,_n=0;_n<$t;++_n)tn[Ft[_n]]=Wt[_n];return tn};Rt=Ct?function(Wt,tn){return Ct(cn(Wt),tn)}:cn})},Fe.parseRows=function(ut,Ct){var Rt,Ft,Yt={},cn={},Wt=[],tn=ut.length,$t=0,_n=0;function dn(){if($t>=tn)return cn;if(Ft)return Ft=!1,Yt;var Cn=$t;if(34===ut.charCodeAt(Cn)){for(var Dn=Cn;Dn++<tn;)if(34===ut.charCodeAt(Dn)){if(34!==ut.charCodeAt(Dn+1))break;++Dn}return $t=Dn+2,13===(Jn=ut.charCodeAt(Dn+1))?(Ft=!0,10===ut.charCodeAt(Dn+2)&&++$t):10===Jn&&(Ft=!0),ut.slice(Cn+1,Dn).replace(/""/g,'"')}for(;$t<tn;){var Jn,Kn=1;if(10===(Jn=ut.charCodeAt($t++)))Ft=!0;else if(13===Jn)Ft=!0,10===ut.charCodeAt($t)&&(++$t,++Kn);else if(Jn!==Oe)continue;return ut.slice(Cn,$t-Kn)}return ut.slice(Cn)}for(;(Rt=dn())!==cn;){for(var Qt=[];Rt!==Yt&&Rt!==cn;)Qt.push(Rt),Rt=dn();Ct&&null==(Qt=Ct(Qt,_n++))||Wt.push(Qt)}return Wt},Fe.format=function(ut){if(Array.isArray(ut[0]))return Fe.formatRows(ut);var Ct=new z,Rt=[];return ut.forEach(function(Ft){for(var Yt in Ft)Ct.has(Yt)||Rt.push(Ct.add(Yt))}),[Rt.map(rt).join(ee)].concat(ut.map(function(Ft){return Rt.map(function(Yt){return rt(Ft[Yt])}).join(ee)})).join("\n")},Fe.formatRows=function(ut){return ut.map(Xe).join("\n")},Fe},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("\t","text/tab-separated-values");var mr,ur,$n,lr,hr=this[V(this,"requestAnimationFrame")]||function(ee){setTimeout(ee,17)};function Gt(ee,ce,Ae){var Oe=arguments.length;Oe<2&&(ce=0),Oe<3&&(Ae=Date.now());var Ue={c:ee,t:Ae+ce,n:null};return ur?ur.n=Ue:mr=Ue,ur=Ue,$n||(lr=clearTimeout(lr),$n=1,hr(pn)),Ue}function pn(){var ee=An(),ce=Tn()-ee;ce>24?(isFinite(ce)&&(clearTimeout(lr),lr=setTimeout(pn,ce)),$n=0):($n=1,hr(pn))}function An(){for(var ee=Date.now(),ce=mr;ce;)ee>=ce.t&&ce.c(ee-ce.t)&&(ce.c=null),ce=ce.n;return ee}function Tn(){for(var ee,ce=mr,Ae=1/0;ce;)ce.c?(ce.t<Ae&&(Ae=ce.t),ce=(ee=ce).n):ce=ee?ee.n=ce.n:mr=ce.n;return ur=ee,Ae}function Rn(ee){return ee[0]}function qn(ee){return ee[1]}function Un(ee){for(var ce,Ae,Oe,Fe=ee.length,Ue=[0,1],Ge=2,Xe=2;Xe<Fe;Xe++){for(;Ge>1&&((Ae=ee[Ue[Ge-1]])[0]-(ce=ee[Ue[Ge-2]])[0])*((Oe=ee[Xe])[1]-ce[1])-(Ae[1]-ce[1])*(Oe[0]-ce[0])<=0;)--Ge;Ue[Ge++]=Xe}return Ue.slice(0,Ge)}function Yn(ee,ce){return ee[0]-ce[0]||ee[1]-ce[1]}l.timer=function(){Gt.apply(this,arguments)},l.timer.flush=function(){An(),Tn()},l.round=function(ee,ce){return ce?Math.round(ee*(ce=Math.pow(10,ce)))/ce:Math.round(ee)},l.geom={},l.geom.hull=function(ee){var ce=Rn,Ae=qn;if(arguments.length)return Oe(ee);function Oe(Fe){if(Fe.length<3)return[];var Ue,Ge=Bn(ce),Xe=Bn(Ae),rt=Fe.length,ut=[],Ct=[];for(Ue=0;Ue<rt;Ue++)ut.push([+Ge.call(this,Fe[Ue],Ue),+Xe.call(this,Fe[Ue],Ue),Ue]);for(ut.sort(Yn),Ue=0;Ue<rt;Ue++)Ct.push([ut[Ue][0],-ut[Ue][1]]);var Rt=Un(ut),Ft=Un(Ct),Yt=Ft[0]===Rt[0],cn=Ft[Ft.length-1]===Rt[Rt.length-1],Wt=[];for(Ue=Rt.length-1;Ue>=0;--Ue)Wt.push(Fe[ut[Rt[Ue]][2]]);for(Ue=+Yt;Ue<Ft.length-cn;++Ue)Wt.push(Fe[ut[Ft[Ue]][2]]);return Wt}return Oe.x=function(Fe){return arguments.length?(ce=Fe,Oe):ce},Oe.y=function(Fe){return arguments.length?(Ae=Fe,Oe):Ae},Oe},l.geom.polygon=function(ee){return X(ee,or),ee};var or=l.geom.polygon.prototype=[];function Jt(ee,ce,Ae){return(Ae[0]-ce[0])*(ee[1]-ce[1])<(Ae[1]-ce[1])*(ee[0]-ce[0])}function Mn(ee,ce,Ae,Oe){var Fe=ee[0],Ue=Ae[0],Ge=ce[0]-Fe,Xe=Oe[0]-Ue,rt=ee[1],ut=Ae[1],Ct=ce[1]-rt,Rt=Oe[1]-ut,Ft=(Xe*(rt-ut)-Rt*(Fe-Ue))/(Rt*Ge-Xe*Ct);return[Fe+Ft*Ge,rt+Ft*Ct]}function zt(ee){var ce=ee[0],Ae=ee[ee.length-1];return!(ce[0]-Ae[0]||ce[1]-Ae[1])}or.area=function(){for(var ee,ce=-1,Ae=this.length,Oe=this[Ae-1],Fe=0;++ce<Ae;)Fe+=(ee=Oe)[1]*(Oe=this[ce])[0]-ee[0]*Oe[1];return.5*Fe},or.centroid=function(ee){var ce,Ae,Oe=-1,Fe=this.length,Ue=0,Ge=0,Xe=this[Fe-1];for(arguments.length||(ee=-1/(6*this.area()));++Oe<Fe;)Ue+=((ce=Xe)[0]+(Xe=this[Oe])[0])*(Ae=ce[0]*Xe[1]-Xe[0]*ce[1]),Ge+=(ce[1]+Xe[1])*Ae;return[Ue*ee,Ge*ee]},or.clip=function(ee){for(var ce,Ae,Oe,Fe,Ue,Ge,Xe=zt(ee),rt=-1,ut=this.length-zt(this),Ct=this[ut-1];++rt<ut;){for(ce=ee.slice(),ee.length=0,Fe=this[rt],Ue=ce[(Oe=ce.length-Xe)-1],Ae=-1;++Ae<Oe;)Jt(Ge=ce[Ae],Ct,Fe)?(Jt(Ue,Ct,Fe)||ee.push(Mn(Ue,Ge,Ct,Fe)),ee.push(Ge)):Jt(Ue,Ct,Fe)&&ee.push(Mn(Ue,Ge,Ct,Fe)),Ue=Ge;Xe&&ee.push(ee[0]),Ct=Fe}return ee};var Zt,rn,Ln,Sn,wn,ln=[],gn=[];function un(){ei(this),this.edge=this.site=this.circle=null}function hn(ee){var ce=ln.pop()||new un;return ce.site=ee,ce}function bn(ee){cr(ee),Ln.remove(ee),ln.push(ee),ei(ee)}function In(ee){var ce=ee.circle,Ae=ce.x,Oe=ce.cy,Fe={x:Ae,y:Oe},Ue=ee.P,Ge=ee.N,Xe=[ee];bn(ee);for(var rt=Ue;rt.circle&&y(Ae-rt.circle.x)<Pt&&y(Oe-rt.circle.cy)<Pt;)Ue=rt.P,Xe.unshift(rt),bn(rt),rt=Ue;Xe.unshift(rt),cr(rt);for(var ut=Ge;ut.circle&&y(Ae-ut.circle.x)<Pt&&y(Oe-ut.circle.cy)<Pt;)Ge=ut.N,Xe.push(ut),bn(ut),ut=Ge;Xe.push(ut),cr(ut);var Ct,Rt=Xe.length;for(Ct=1;Ct<Rt;++Ct)sr((ut=Xe[Ct]).edge,(rt=Xe[Ct-1]).site,ut.site,Fe);(ut=Xe[Rt-1]).edge=Tr((rt=Xe[0]).site,ut.site,null,Fe),ir(rt),ir(ut)}function Hn(ee){for(var ce,Ae,Oe,Fe,Ue=ee.x,Ge=ee.y,Xe=Ln._;Xe;)if((Oe=Wn(Xe,Ge)-Ue)>Pt)Xe=Xe.L;else{if(!((Fe=Ue-Gn(Xe,Ge))>Pt)){Oe>-Pt?(ce=Xe.P,Ae=Xe):Fe>-Pt?(ce=Xe,Ae=Xe.N):ce=Ae=Xe;break}if(!Xe.R){ce=Xe;break}Xe=Xe.R}var rt=hn(ee);if(Ln.insert(ce,rt),ce||Ae){if(ce===Ae)return cr(ce),Ae=hn(ce.site),Ln.insert(rt,Ae),rt.edge=Ae.edge=Tr(ce.site,rt.site),ir(ce),void ir(Ae);if(Ae){cr(ce),cr(Ae);var ut=ce.site,Ct=ut.x,Rt=ut.y,Ft=ee.x-Ct,Yt=ee.y-Rt,cn=Ae.site,Wt=cn.x-Ct,tn=cn.y-Rt,$t=2*(Ft*tn-Yt*Wt),_n=Ft*Ft+Yt*Yt,dn=Wt*Wt+tn*tn,Qt={x:(tn*_n-Yt*dn)/$t+Ct,y:(Ft*dn-Wt*_n)/$t+Rt};sr(Ae.edge,ut,cn,Qt),rt.edge=Tr(ut,ee,null,Qt),Ae.edge=Tr(ee,cn,null,Qt),ir(ce),ir(Ae)}else rt.edge=Tr(ce.site,rt.site)}}function Wn(ee,ce){var Ae=ee.site,Oe=Ae.x,Fe=Ae.y,Ue=Fe-ce;if(!Ue)return Oe;var Ge=ee.P;if(!Ge)return-1/0;var Xe=(Ae=Ge.site).x,rt=Ae.y,ut=rt-ce;if(!ut)return Xe;var Ct=Xe-Oe,Rt=1/Ue-1/ut,Ft=Ct/ut;return Rt?(-Ft+Math.sqrt(Ft*Ft-2*Rt*(Ct*Ct/(-2*ut)-rt+ut/2+Fe-Ue/2)))/Rt+Oe:(Oe+Xe)/2}function Gn(ee,ce){var Ae=ee.N;if(Ae)return Wn(Ae,ce);var Oe=ee.site;return Oe.y===ce?Oe.x:1/0}function nr(ee){this.site=ee,this.edges=[]}function tr(ee,ce){return ce.angle-ee.angle}function ar(){ei(this),this.x=this.y=this.arc=this.site=this.cy=null}function ir(ee){var ce=ee.P,Ae=ee.N;if(ce&&Ae){var Oe=ce.site,Fe=ee.site,Ue=Ae.site;if(Oe!==Ue){var Ge=Fe.x,Xe=Fe.y,rt=Oe.x-Ge,ut=Oe.y-Xe,Ct=Ue.x-Ge,Rt=2*(rt*(tn=Ue.y-Xe)-ut*Ct);if(!(Rt>=-1e-12)){var Ft=rt*rt+ut*ut,Yt=Ct*Ct+tn*tn,cn=(tn*Ft-ut*Yt)/Rt,Wt=(rt*Yt-Ct*Ft)/Rt,tn=Wt+Xe,$t=gn.pop()||new ar;$t.arc=ee,$t.site=Fe,$t.x=cn+Ge,$t.y=tn+Math.sqrt(cn*cn+Wt*Wt),$t.cy=tn,ee.circle=$t;for(var _n=null,dn=wn._;dn;)if($t.y<dn.y||$t.y===dn.y&&$t.x<=dn.x){if(!dn.L){_n=dn.P;break}dn=dn.L}else{if(!dn.R){_n=dn;break}dn=dn.R}wn.insert(_n,$t),_n||(Sn=$t)}}}}function cr(ee){var ce=ee.circle;ce&&(ce.P||(Sn=ce.N),wn.remove(ce),gn.push(ce),ei(ce),ee.circle=null)}function br(ee,ce){var Ae=ee.b;if(Ae)return!0;var Oe,Fe,Ue=ee.a,Ge=ce[0][0],Xe=ce[1][0],rt=ce[0][1],ut=ce[1][1],Ct=ee.l,Rt=ee.r,Ft=Ct.x,Yt=Ct.y,cn=Rt.x,Wt=Rt.y,tn=(Ft+cn)/2;if(Wt===Yt){if(tn<Ge||tn>=Xe)return;if(Ft>cn){if(Ue){if(Ue.y>=ut)return}else Ue={x:tn,y:rt};Ae={x:tn,y:ut}}else{if(Ue){if(Ue.y<rt)return}else Ue={x:tn,y:ut};Ae={x:tn,y:rt}}}else if(Fe=(Yt+Wt)/2-(Oe=(Ft-cn)/(Wt-Yt))*tn,Oe<-1||Oe>1)if(Ft>cn){if(Ue){if(Ue.y>=ut)return}else Ue={x:(rt-Fe)/Oe,y:rt};Ae={x:(ut-Fe)/Oe,y:ut}}else{if(Ue){if(Ue.y<rt)return}else Ue={x:(ut-Fe)/Oe,y:ut};Ae={x:(rt-Fe)/Oe,y:rt}}else if(Yt<Wt){if(Ue){if(Ue.x>=Xe)return}else Ue={x:Ge,y:Oe*Ge+Fe};Ae={x:Xe,y:Oe*Xe+Fe}}else{if(Ue){if(Ue.x<Ge)return}else Ue={x:Xe,y:Oe*Xe+Fe};Ae={x:Ge,y:Oe*Ge+Fe}}return ee.a=Ue,ee.b=Ae,!0}function xr(ee,ce){this.l=ee,this.r=ce,this.a=this.b=null}function Tr(ee,ce,Ae,Oe){var Fe=new xr(ee,ce);return Zt.push(Fe),Ae&&sr(Fe,ee,ce,Ae),Oe&&sr(Fe,ce,ee,Oe),rn[ee.i].edges.push(new kr(Fe,ee,ce)),rn[ce.i].edges.push(new kr(Fe,ce,ee)),Fe}function sr(ee,ce,Ae,Oe){ee.a||ee.b?ee.l===Ae?ee.b=Oe:ee.a=Oe:(ee.a=Oe,ee.l=ce,ee.r=Ae)}function kr(ee,ce,Ae){var Oe=ee.a,Fe=ee.b;this.edge=ee,this.site=ce,this.angle=Ae?Math.atan2(Ae.y-ce.y,Ae.x-ce.x):ee.l===ce?Math.atan2(Fe.x-Oe.x,Oe.y-Fe.y):Math.atan2(Oe.x-Fe.x,Fe.y-Oe.y)}function Rr(){this._=null}function ei(ee){ee.U=ee.C=ee.L=ee.R=ee.P=ee.N=null}function fi(ee,ce){var Ae=ce,Oe=ce.R,Fe=Ae.U;Fe?Fe.L===Ae?Fe.L=Oe:Fe.R=Oe:ee._=Oe,Oe.U=Fe,Ae.U=Oe,Ae.R=Oe.L,Ae.R&&(Ae.R.U=Ae),Oe.L=Ae}function di(ee,ce){var Ae=ce,Oe=ce.L,Fe=Ae.U;Fe?Fe.L===Ae?Fe.L=Oe:Fe.R=Oe:ee._=Oe,Oe.U=Fe,Ae.U=Oe,Ae.L=Oe.R,Ae.L&&(Ae.L.U=Ae),Oe.R=Ae}function Gi(ee){for(;ee.L;)ee=ee.L;return ee}function Li(ee,ce){var Ae,Oe,Fe,Ue=ee.sort(si).pop();for(Zt=[],rn=new Array(ee.length),Ln=new Rr,wn=new Rr;;)if(Fe=Sn,Ue&&(!Fe||Ue.y<Fe.y||Ue.y===Fe.y&&Ue.x<Fe.x))Ue.x===Ae&&Ue.y===Oe||(rn[Ue.i]=new nr(Ue),Hn(Ue),Ae=Ue.x,Oe=Ue.y),Ue=ee.pop();else{if(!Fe)break;In(Fe.arc)}ce&&(function(Xe){for(var rt,ut,Ct,Rt,Ft,Yt=Zt,cn=(ut=Xe[0][0],Ct=Xe[0][1],Rt=Xe[1][0],Ft=Xe[1][1],function(tn){var $t,_n=tn.a,dn=tn.b,Qt=_n.x,Cn=_n.y,Dn=0,Jn=1,Kn=dn.x-Qt,vr=dn.y-Cn;if($t=ut-Qt,Kn||!($t>0)){if($t/=Kn,Kn<0){if($t<Dn)return;$t<Jn&&(Jn=$t)}else if(Kn>0){if($t>Jn)return;$t>Dn&&(Dn=$t)}if($t=Rt-Qt,Kn||!($t<0)){if($t/=Kn,Kn<0){if($t>Jn)return;$t>Dn&&(Dn=$t)}else if(Kn>0){if($t<Dn)return;$t<Jn&&(Jn=$t)}if($t=Ct-Cn,vr||!($t>0)){if($t/=vr,vr<0){if($t<Dn)return;$t<Jn&&(Jn=$t)}else if(vr>0){if($t>Jn)return;$t>Dn&&(Dn=$t)}if($t=Ft-Cn,vr||!($t<0)){if($t/=vr,vr<0){if($t>Jn)return;$t>Dn&&(Dn=$t)}else if(vr>0){if($t<Dn)return;$t<Jn&&(Jn=$t)}return Dn>0&&(tn.a={x:Qt+Dn*Kn,y:Cn+Dn*vr}),Jn<1&&(tn.b={x:Qt+Jn*Kn,y:Cn+Jn*vr}),tn}}}}}),Wt=Yt.length;Wt--;)(!br(rt=Yt[Wt],Xe)||!cn(rt)||y(rt.a.x-rt.b.x)<Pt&&y(rt.a.y-rt.b.y)<Pt)&&(rt.a=rt.b=null,Yt.splice(Wt,1))}(ce),function(Xe){for(var rt,ut,Ct,Rt,Ft,Yt,cn,Wt,tn,$t,_n=Xe[0][0],dn=Xe[1][0],Qt=Xe[0][1],Cn=Xe[1][1],Dn=rn,Jn=Dn.length;Jn--;)if((Ft=Dn[Jn])&&Ft.prepare())for(Wt=(cn=Ft.edges).length,Yt=0;Yt<Wt;)Ct=($t=cn[Yt].end()).x,Rt=$t.y,rt=(tn=cn[++Yt%Wt].start()).x,ut=tn.y,(y(Ct-rt)>Pt||y(Rt-ut)>Pt)&&(cn.splice(Yt,0,new kr((Kn=Ft.site,vr=$t,yr=y(Ct-_n)<Pt&&Cn-Rt>Pt?{x:_n,y:y(rt-_n)<Pt?ut:Cn}:y(Rt-Cn)<Pt&&dn-Ct>Pt?{x:y(ut-Cn)<Pt?rt:dn,y:Cn}:y(Ct-dn)<Pt&&Rt-Qt>Pt?{x:dn,y:y(rt-dn)<Pt?ut:Qt}:y(Rt-Qt)<Pt&&Ct-_n>Pt?{x:y(ut-Qt)<Pt?rt:_n,y:Qt}:null,fr=void 0,(fr=new xr(Kn,null)).a=vr,fr.b=yr,Zt.push(fr),fr),Ft.site,null)),++Wt);var Kn,vr,yr,fr}(ce));var Ge={cells:rn,edges:Zt};return Ln=wn=Zt=rn=null,Ge}function si(ee,ce){return ce.y-ee.y||ce.x-ee.x}nr.prototype.prepare=function(){for(var ee,ce=this.edges,Ae=ce.length;Ae--;)(ee=ce[Ae].edge).b&&ee.a||ce.splice(Ae,1);return ce.sort(tr),ce.length},kr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Rr.prototype={insert:function(ee,ce){var Ae,Oe,Fe;if(ee){if(ce.P=ee,ce.N=ee.N,ee.N&&(ee.N.P=ce),ee.N=ce,ee.R){for(ee=ee.R;ee.L;)ee=ee.L;ee.L=ce}else ee.R=ce;Ae=ee}else this._?(ee=Gi(this._),ce.P=null,ce.N=ee,ee.P=ee.L=ce,Ae=ee):(ce.P=ce.N=null,this._=ce,Ae=null);for(ce.L=ce.R=null,ce.U=Ae,ce.C=!0,ee=ce;Ae&&Ae.C;)Ae===(Oe=Ae.U).L?(Fe=Oe.R)&&Fe.C?(Ae.C=Fe.C=!1,Oe.C=!0,ee=Oe):(ee===Ae.R&&(fi(this,Ae),Ae=(ee=Ae).U),Ae.C=!1,Oe.C=!0,di(this,Oe)):(Fe=Oe.L)&&Fe.C?(Ae.C=Fe.C=!1,Oe.C=!0,ee=Oe):(ee===Ae.L&&(di(this,Ae),Ae=(ee=Ae).U),Ae.C=!1,Oe.C=!0,fi(this,Oe)),Ae=ee.U;this._.C=!1},remove:function(ee){ee.N&&(ee.N.P=ee.P),ee.P&&(ee.P.N=ee.N),ee.N=ee.P=null;var ce,Ae,Oe,Fe=ee.U,Ue=ee.L,Ge=ee.R;if(Ae=Ue?Ge?Gi(Ge):Ue:Ge,Fe?Fe.L===ee?Fe.L=Ae:Fe.R=Ae:this._=Ae,Ue&&Ge?(Oe=Ae.C,Ae.C=ee.C,Ae.L=Ue,Ue.U=Ae,Ae!==Ge?(Fe=Ae.U,Ae.U=ee.U,Fe.L=ee=Ae.R,Ae.R=Ge,Ge.U=Ae):(Ae.U=Fe,Fe=Ae,ee=Ae.R)):(Oe=ee.C,ee=Ae),ee&&(ee.U=Fe),!Oe)if(ee&&ee.C)ee.C=!1;else{do{if(ee===this._)break;if(ee===Fe.L){if((ce=Fe.R).C&&(ce.C=!1,Fe.C=!0,fi(this,Fe),ce=Fe.R),ce.L&&ce.L.C||ce.R&&ce.R.C){ce.R&&ce.R.C||(ce.L.C=!1,ce.C=!0,di(this,ce),ce=Fe.R),ce.C=Fe.C,Fe.C=ce.R.C=!1,fi(this,Fe),ee=this._;break}}else if((ce=Fe.L).C&&(ce.C=!1,Fe.C=!0,di(this,Fe),ce=Fe.L),ce.L&&ce.L.C||ce.R&&ce.R.C){ce.L&&ce.L.C||(ce.R.C=!1,ce.C=!0,fi(this,ce),ce=Fe.L),ce.C=Fe.C,Fe.C=ce.L.C=!1,di(this,Fe),ee=this._;break}ce.C=!0,ee=Fe,Fe=Fe.U}while(!ee.C);ee&&(ee.C=!1)}}},l.geom.voronoi=function(ee){var ce=Rn,Ae=qn,Oe=ce,Fe=Ae,Ue=ua;if(ee)return Ge(ee);function Ge(rt){var ut=new Array(rt.length),Ct=Ue[0][0],Rt=Ue[0][1],Ft=Ue[1][0],Yt=Ue[1][1];return Li(Xe(rt),Ue).cells.forEach(function(cn,Wt){var tn=cn.edges,$t=cn.site;(ut[Wt]=tn.length?tn.map(function(_n){var dn=_n.start();return[dn.x,dn.y]}):$t.x>=Ct&&$t.x<=Ft&&$t.y>=Rt&&$t.y<=Yt?[[Ct,Yt],[Ft,Yt],[Ft,Rt],[Ct,Rt]]:[]).point=rt[Wt]}),ut}function Xe(rt){return rt.map(function(ut,Ct){return{x:Math.round(Oe(ut,Ct)/Pt)*Pt,y:Math.round(Fe(ut,Ct)/Pt)*Pt,i:Ct}})}return Ge.links=function(rt){return Li(Xe(rt)).edges.filter(function(ut){return ut.l&&ut.r}).map(function(ut){return{source:rt[ut.l.i],target:rt[ut.r.i]}})},Ge.triangles=function(rt){var ut=[];return Li(Xe(rt)).cells.forEach(function(Ct,Rt){for(var Ft,Yt,cn,Wt,tn=Ct.site,$t=Ct.edges.sort(tr),_n=-1,dn=$t.length,Qt=$t[dn-1].edge,Cn=Qt.l===tn?Qt.r:Qt.l;++_n<dn;)Ft=Cn,Cn=(Qt=$t[_n].edge).l===tn?Qt.r:Qt.l,Rt<Ft.i&&Rt<Cn.i&&((Yt=tn).x-(Wt=Cn).x)*((cn=Ft).y-Yt.y)-(Yt.x-cn.x)*(Wt.y-Yt.y)<0&&ut.push([rt[Rt],rt[Ft.i],rt[Cn.i]])}),ut},Ge.x=function(rt){return arguments.length?(Oe=Bn(ce=rt),Ge):ce},Ge.y=function(rt){return arguments.length?(Fe=Bn(Ae=rt),Ge):Ae},Ge.clipExtent=function(rt){return arguments.length?(Ue=rt??ua,Ge):Ue===ua?null:Ue},Ge.size=function(rt){return arguments.length?Ge.clipExtent(rt&&[[0,0],rt]):Ue===ua?null:Ue&&Ue[1]},Ge};var ua=[[-1e6,-1e6],[1e6,1e6]];function Ma(ee){return ee.x}function ro(ee){return ee.y}function Zo(ee,ce,Ae,Oe,Fe,Ue){if(!ee(ce,Ae,Oe,Fe,Ue)){var Ge=.5*(Ae+Fe),Xe=.5*(Oe+Ue),rt=ce.nodes;rt[0]&&Zo(ee,rt[0],Ae,Oe,Ge,Xe),rt[1]&&Zo(ee,rt[1],Ge,Oe,Fe,Xe),rt[2]&&Zo(ee,rt[2],Ae,Xe,Ge,Ue),rt[3]&&Zo(ee,rt[3],Ge,Xe,Fe,Ue)}}function al(ee,ce,Ae,Oe,Fe,Ue,Ge){var Xe,rt=1/0;return function ut(Ct,Rt,Ft,Yt,cn){if(!(Rt>Ue||Ft>Ge||Yt<Oe||cn<Fe)){if(Wt=Ct.point){var Wt,tn=ce-Ct.x,$t=Ae-Ct.y,_n=tn*tn+$t*$t;if(_n<rt){var dn=Math.sqrt(rt=_n);Oe=ce-dn,Fe=Ae-dn,Ue=ce+dn,Ge=Ae+dn,Xe=Wt}}for(var Qt=Ct.nodes,Cn=.5*(Rt+Yt),Dn=.5*(Ft+cn),Jn=(Ae>=Dn)<<1|ce>=Cn,Kn=Jn+4;Jn<Kn;++Jn)if(Ct=Qt[3&Jn])switch(3&Jn){case 0:ut(Ct,Rt,Ft,Cn,Dn);break;case 1:ut(Ct,Cn,Ft,Yt,Dn);break;case 2:ut(Ct,Rt,Dn,Cn,cn);break;case 3:ut(Ct,Cn,Dn,Yt,cn)}}}(ee,Oe,Fe,Ue,Ge),Xe}function Vs(ee,ce){ee=l.rgb(ee),ce=l.rgb(ce);var Ae=ee.r,Oe=ee.g,Fe=ee.b,Ue=ce.r-Ae,Ge=ce.g-Oe,Xe=ce.b-Fe;return function(rt){return"#"+vn(Math.round(Ae+Ue*rt))+vn(Math.round(Oe+Ge*rt))+vn(Math.round(Fe+Xe*rt))}}function Yo(ee,ce){var Ae,Oe={},Fe={};for(Ae in ee)Ae in ce?Oe[Ae]=ba(ee[Ae],ce[Ae]):Fe[Ae]=ee[Ae];for(Ae in ce)Ae in ee||(Fe[Ae]=ce[Ae]);return function(Ue){for(Ae in Oe)Fe[Ae]=Oe[Ae](Ue);return Fe}}function Sa(ee,ce){return ee=+ee,ce=+ce,function(Ae){return ee*(1-Ae)+ce*Ae}}function Hs(ee,ce){var Ae,Oe,Fe,Ue=Fi.lastIndex=ls.lastIndex=0,Ge=-1,Xe=[],rt=[];for(ee+="",ce+="";(Ae=Fi.exec(ee))&&(Oe=ls.exec(ce));)(Fe=Oe.index)>Ue&&(Fe=ce.slice(Ue,Fe),Xe[Ge]?Xe[Ge]+=Fe:Xe[++Ge]=Fe),(Ae=Ae[0])===(Oe=Oe[0])?Xe[Ge]?Xe[Ge]+=Oe:Xe[++Ge]=Oe:(Xe[++Ge]=null,rt.push({i:Ge,x:Sa(Ae,Oe)})),Ue=ls.lastIndex;return Ue<ce.length&&(Fe=ce.slice(Ue),Xe[Ge]?Xe[Ge]+=Fe:Xe[++Ge]=Fe),Xe.length<2?rt[0]?(ce=rt[0].x,function(ut){return ce(ut)+""}):function(){return ce}:(ce=rt.length,function(ut){for(var Ct,Rt=0;Rt<ce;++Rt)Xe[(Ct=rt[Rt]).i]=Ct.x(ut);return Xe.join("")})}l.geom.delaunay=function(ee){return l.geom.voronoi().triangles(ee)},l.geom.quadtree=function(ee,ce,Ae,Oe,Fe){var Ue,Ge=Rn,Xe=qn;if(Ue=arguments.length)return Ge=Ma,Xe=ro,3===Ue&&(Fe=Ae,Oe=ce,Ae=ce=0),rt(ee);function rt(ut){var Ct,Rt,Ft,Yt,cn,Wt,tn,$t,_n,dn=Bn(Ge),Qt=Bn(Xe);if(null!=ce)Wt=ce,tn=Ae,$t=Oe,_n=Fe;else if($t=_n=-(Wt=tn=1/0),Rt=[],Ft=[],cn=ut.length,Ue)for(Yt=0;Yt<cn;++Yt)(Ct=ut[Yt]).x<Wt&&(Wt=Ct.x),Ct.y<tn&&(tn=Ct.y),Ct.x>$t&&($t=Ct.x),Ct.y>_n&&(_n=Ct.y),Rt.push(Ct.x),Ft.push(Ct.y);else for(Yt=0;Yt<cn;++Yt){var Cn=+dn(Ct=ut[Yt],Yt),Dn=+Qt(Ct,Yt);Cn<Wt&&(Wt=Cn),Dn<tn&&(tn=Dn),Cn>$t&&($t=Cn),Dn>_n&&(_n=Dn),Rt.push(Cn),Ft.push(Dn)}var Jn=$t-Wt,Kn=_n-tn;function vr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr){if(!isNaN(Vr)&&!isNaN(Hr))if(gr.leaf){var Yr=gr.x,Zr=gr.y;if(null!=Yr)if(y(Yr-Vr)+y(Zr-Hr)<.01)yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr);else{var Qr=gr.point;gr.x=gr.y=gr.point=null,yr(gr,Qr,Yr,Zr,pr,Er,Fr,Dr),yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr)}else gr.x=Vr,gr.y=Hr,gr.point=Sr}else yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr)}function yr(gr,Sr,Vr,Hr,pr,Er,Fr,Dr){var Yr=.5*(pr+Fr),Zr=.5*(Er+Dr),Qr=Vr>=Yr,hi=Hr>=Zr,_i=hi<<1|Qr;gr.leaf=!1,Qr?pr=Yr:Fr=Yr,hi?Er=Zr:Dr=Zr,vr(gr=gr.nodes[_i]||(gr.nodes[_i]={leaf:!0,nodes:[],point:null,x:null,y:null}),Sr,Vr,Hr,pr,Er,Fr,Dr)}Jn>Kn?_n=tn+Jn:$t=Wt+Kn;var fr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(gr){vr(fr,gr,+dn(gr,++Yt),+Qt(gr,Yt),Wt,tn,$t,_n)},visit:function(gr){Zo(gr,fr,Wt,tn,$t,_n)},find:function(gr){return al(fr,gr[0],gr[1],Wt,tn,$t,_n)}};if(Yt=-1,null==ce){for(;++Yt<cn;)vr(fr,ut[Yt],Rt[Yt],Ft[Yt],Wt,tn,$t,_n);--Yt}else ut.forEach(fr.add);return Rt=Ft=ut=Ct=null,fr}return rt.x=function(ut){return arguments.length?(Ge=ut,rt):Ge},rt.y=function(ut){return arguments.length?(Xe=ut,rt):Xe},rt.extent=function(ut){return arguments.length?(null==ut?ce=Ae=Oe=Fe=null:(ce=+ut[0][0],Ae=+ut[0][1],Oe=+ut[1][0],Fe=+ut[1][1]),rt):null==ce?null:[[ce,Ae],[Oe,Fe]]},rt.size=function(ut){return arguments.length?(null==ut?ce=Ae=Oe=Fe=null:(ce=Ae=0,Oe=+ut[0],Fe=+ut[1]),rt):null==ce?null:[Oe-ce,Fe-Ae]},rt},l.interpolateRgb=Vs,l.interpolateObject=Yo,l.interpolateNumber=Sa,l.interpolateString=Hs;var Fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ls=new RegExp(Fi.source,"g");function ba(ee,ce){for(var Ae,Oe=l.interpolators.length;--Oe>=0&&!(Ae=l.interpolators[Oe](ee,ce)););return Ae}function Ea(ee,ce){var Ae,Oe=[],Fe=[],Ue=ee.length,Ge=ce.length,Xe=Math.min(ee.length,ce.length);for(Ae=0;Ae<Xe;++Ae)Oe.push(ba(ee[Ae],ce[Ae]));for(;Ae<Ue;++Ae)Fe[Ae]=ee[Ae];for(;Ae<Ge;++Ae)Fe[Ae]=ce[Ae];return function(rt){for(Ae=0;Ae<Xe;++Ae)Fe[Ae]=Oe[Ae](rt);return Fe}}l.interpolate=ba,l.interpolators=[function(ee,ce){var Ae=typeof ce;return("string"===Ae?Fn.has(ce.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ce)?Vs:Hs:ce instanceof it?Vs:Array.isArray(ce)?Ea:"object"===Ae&&isNaN(ce)?Yo:Sa)(ee,ce)}],l.interpolateArray=Ea;var yo=function(){return j},ti=l.map({linear:yo,poly:function(ee){return function(ce){return Math.pow(ce,ee)}},quad:function(){return us},cubic:function(){return ol},sin:function(){return sl},exp:function(){return ll},circle:function(){return ml},elastic:function(ee,ce){var Ae;return arguments.length<2&&(ce=.45),arguments.length?Ae=ce/Ot*Math.asin(1/ee):(ee=1,Ae=ce/4),function(Oe){return 1+ee*Math.pow(2,-10*Oe)*Math.sin((Oe-Ae)*Ot/ce)}},back:function(ee){return ee||(ee=1.70158),function(ce){return ce*ce*((ee+1)*ce-ee)}},bounce:function(){return qs}}),xo=l.map({in:j,out:Ha,"in-out":Ja,"out-in":function(ee){return Ja(Ha(ee))}});function Oa(ee){return function(ce){return ce<=0?0:ce>=1?1:ee(ce)}}function Ha(ee){return function(ce){return 1-ee(1-ce)}}function Ja(ee){return function(ce){return.5*(ce<.5?ee(2*ce):2-ee(2-2*ce))}}function us(ee){return ee*ee}function ol(ee){return ee*ee*ee}function io(ee){if(ee<=0)return 0;if(ee>=1)return 1;var ce=ee*ee,Ae=ce*ee;return 4*(ee<.5?Ae:3*(ee-ce)+Ae-.75)}function sl(ee){return 1-Math.cos(ee*Dt)}function ll(ee){return Math.pow(2,10*(ee-1))}function ml(ee){return 1-Math.sqrt(1-ee*ee)}function qs(ee){return ee<.36363636363636365?7.5625*ee*ee:ee<.7272727272727273?7.5625*(ee-=.5454545454545454)*ee+.75:ee<.9090909090909091?7.5625*(ee-=.8181818181818182)*ee+.9375:7.5625*(ee-=.9545454545454546)*ee+.984375}function ul(ee,ce){return ce-=ee,function(Ae){return Math.round(ee+ce*Ae)}}function Gs(ee){var ce,Ae,Oe,Fe=[ee.a,ee.b],Ue=[ee.c,ee.d],Ge=oo(Fe),Xe=ao(Fe,Ue),rt=oo(((ce=Ue)[0]+=(Oe=-Xe)*(Ae=Fe)[0],ce[1]+=Oe*Ae[1],ce))||0;Fe[0]*Ue[1]<Ue[0]*Fe[1]&&(Fe[0]*=-1,Fe[1]*=-1,Ge*=-1,Xe*=-1),this.rotate=(Ge?Math.atan2(Fe[1],Fe[0]):Math.atan2(-Ue[0],Ue[1]))*Ze,this.translate=[ee.e,ee.f],this.scale=[Ge,rt],this.skew=rt?Math.atan2(Xe,rt)*Ze:0}function ao(ee,ce){return ee[0]*ce[0]+ee[1]*ce[1]}function oo(ee){var ce=Math.sqrt(ao(ee,ee));return ce&&(ee[0]/=ce,ee[1]/=ce),ce}l.ease=function(ee){var ce=ee.indexOf("-"),Ae=ce>=0?ee.slice(0,ce):ee,Oe=ce>=0?ee.slice(ce+1):"in";return Ae=ti.get(Ae)||yo,Oa((Oe=xo.get(Oe)||j)(Ae.apply(null,T.call(arguments,1))))},l.interpolateHcl=function(ee,ce){ee=l.hcl(ee),ce=l.hcl(ce);var Ae=ee.h,Oe=ee.c,Fe=ee.l,Ue=ce.h-Ae,Ge=ce.c-Oe,Xe=ce.l-Fe;return isNaN(Ge)&&(Ge=0,Oe=isNaN(Oe)?ce.c:Oe),isNaN(Ue)?(Ue=0,Ae=isNaN(Ae)?ce.h:Ae):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(rt){return Et(Ae+Ue*rt,Oe+Ge*rt,Fe+Xe*rt)+""}},l.interpolateHsl=function(ee,ce){ee=l.hsl(ee),ce=l.hsl(ce);var Ae=ee.h,Oe=ee.s,Fe=ee.l,Ue=ce.h-Ae,Ge=ce.s-Oe,Xe=ce.l-Fe;return isNaN(Ge)&&(Ge=0,Oe=isNaN(Oe)?ce.s:Oe),isNaN(Ue)?(Ue=0,Ae=isNaN(Ae)?ce.h:Ae):Ue>180?Ue-=360:Ue<-180&&(Ue+=360),function(rt){return Lt(Ae+Ue*rt,Oe+Ge*rt,Fe+Xe*rt)+""}},l.interpolateLab=function(ee,ce){ee=l.lab(ee),ce=l.lab(ce);var Ae=ee.l,Oe=ee.a,Fe=ee.b,Ue=ce.l-Ae,Ge=ce.a-Oe,Xe=ce.b-Fe;return function(rt){return qt(Ae+Ue*rt,Oe+Ge*rt,Fe+Xe*rt)+""}},l.interpolateRound=ul,l.transform=function(ee){var ce=p.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(Ae){if(null!=Ae){ce.setAttribute("transform",Ae);var Oe=ce.transform.baseVal.consolidate()}return new Gs(Oe?Oe.matrix:Wo)})(ee)},Gs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Wo={a:1,b:0,c:0,d:1,e:0,f:0};function so(ee){return ee.length?ee.pop()+",":""}function Zs(ee,ce){var Fe,Ue,Ge,Ae=[],Oe=[];return ee=l.transform(ee),ce=l.transform(ce),function(Fe,Ue,Ge,Xe){if(Fe[0]!==Ue[0]||Fe[1]!==Ue[1]){var rt=Ge.push("translate(",null,",",null,")");Xe.push({i:rt-4,x:Sa(Fe[0],Ue[0])},{i:rt-2,x:Sa(Fe[1],Ue[1])})}else(Ue[0]||Ue[1])&&Ge.push("translate("+Ue+")")}(ee.translate,ce.translate,Ae,Oe),Ge=Ae,(Fe=ee.rotate)!==(Ue=ce.rotate)?(Fe-Ue>180?Ue+=360:Ue-Fe>180&&(Fe+=360),Oe.push({i:Ge.push(so(Ge)+"rotate(",null,")")-2,x:Sa(Fe,Ue)})):Ue&&Ge.push(so(Ge)+"rotate("+Ue+")"),function(Fe,Ue,Ge,Xe){Fe!==Ue?Xe.push({i:Ge.push(so(Ge)+"skewX(",null,")")-2,x:Sa(Fe,Ue)}):Ue&&Ge.push(so(Ge)+"skewX("+Ue+")")}(ee.skew,ce.skew,Ae,Oe),function(Fe,Ue,Ge,Xe){if(Fe[0]!==Ue[0]||Fe[1]!==Ue[1]){var rt=Ge.push(so(Ge)+"scale(",null,",",null,")");Xe.push({i:rt-4,x:Sa(Fe[0],Ue[0])},{i:rt-2,x:Sa(Fe[1],Ue[1])})}else 1===Ue[0]&&1===Ue[1]||Ge.push(so(Ge)+"scale("+Ue+")")}(ee.scale,ce.scale,Ae,Oe),ee=ce=null,function(Fe){for(var Ue,Ge=-1,Xe=Oe.length;++Ge<Xe;)Ae[(Ue=Oe[Ge]).i]=Ue.x(Fe);return Ae.join("")}}function Ys(ee,ce){return ce=(ce-=ee=+ee)||1/ce,function(Ae){return(Ae-ee)/ce}}function Oo(ee,ce){return ce=(ce-=ee=+ee)||1/ce,function(Ae){return Math.max(0,Math.min(1,(Ae-ee)/ce))}}function Ms(ee){for(var ce=ee.source,Ae=ee.target,Oe=function(Ge,Xe){if(Ge===Xe)return Ge;for(var rt=bo(Ge),ut=bo(Xe),Ct=rt.pop(),Rt=ut.pop(),Ft=null;Ct===Rt;)Ft=Ct,Ct=rt.pop(),Rt=ut.pop();return Ft}(ce,Ae),Fe=[ce];ce!==Oe;)Fe.push(ce=ce.parent);for(var Ue=Fe.length;Ae!==Oe;)Fe.splice(Ue,0,Ae),Ae=Ae.parent;return Fe}function bo(ee){for(var ce=[],Ae=ee.parent;null!=Ae;)ce.push(ee),ee=Ae,Ae=Ae.parent;return ce.push(ee),ce}function Xo(ee){ee.fixed|=2}function Io(ee){ee.fixed&=-7}function lo(ee){ee.fixed|=4,ee.px=ee.x,ee.py=ee.y}function ni(ee){ee.fixed&=-5}function _o(ee,ce,Ae){var Oe=0,Fe=0;if(ee.charge=0,!ee.leaf)for(var Ue,Ge=ee.nodes,Xe=Ge.length,rt=-1;++rt<Xe;)null!=(Ue=Ge[rt])&&(_o(Ue,ce,Ae),ee.charge+=Ue.charge,Oe+=Ue.charge*Ue.cx,Fe+=Ue.charge*Ue.cy);if(ee.point){ee.leaf||(ee.point.x+=Math.random()-.5,ee.point.y+=Math.random()-.5);var ut=ce*Ae[ee.point.index];ee.charge+=ee.pointCharge=ut,Oe+=ut*ee.point.x,Fe+=ut*ee.point.y}ee.cx=Oe/ee.charge,ee.cy=Fe/ee.charge}l.interpolateTransform=Zs,l.layout={},l.layout.bundle=function(){return function(ee){for(var ce=[],Ae=-1,Oe=ee.length;++Ae<Oe;)ce.push(Ms(ee[Ae]));return ce}},l.layout.chord=function(){var ee,ce,Ae,Oe,Fe,Ue,Ge,Xe={},rt=0;function ut(){var Rt,Ft,Yt,cn,Wt,tn={},$t=[],_n=l.range(Oe),dn=[];for(ee=[],ce=[],Rt=0,cn=-1;++cn<Oe;){for(Ft=0,Wt=-1;++Wt<Oe;)Ft+=Ae[cn][Wt];$t.push(Ft),dn.push(l.range(Oe)),Rt+=Ft}for(Fe&&_n.sort(function(fr,gr){return Fe($t[fr],$t[gr])}),Ue&&dn.forEach(function(fr,gr){fr.sort(function(Sr,Vr){return Ue(Ae[gr][Sr],Ae[gr][Vr])})}),Rt=(Ot-rt*Oe)/Rt,Ft=0,cn=-1;++cn<Oe;){for(Yt=Ft,Wt=-1;++Wt<Oe;){var Qt=_n[cn],Cn=dn[Qt][Wt],Dn=Ae[Qt][Cn],Jn=Ft,Kn=Ft+=Dn*Rt;tn[Qt+"-"+Cn]={index:Qt,subindex:Cn,startAngle:Jn,endAngle:Kn,value:Dn}}ce[Qt]={index:Qt,startAngle:Yt,endAngle:Ft,value:$t[Qt]},Ft+=rt}for(cn=-1;++cn<Oe;)for(Wt=cn-1;++Wt<Oe;){var vr=tn[cn+"-"+Wt],yr=tn[Wt+"-"+cn];(vr.value||yr.value)&&ee.push(vr.value<yr.value?{source:yr,target:vr}:{source:vr,target:yr})}Ge&&Ct()}function Ct(){ee.sort(function(Rt,Ft){return Ge((Rt.source.value+Rt.target.value)/2,(Ft.source.value+Ft.target.value)/2)})}return Xe.matrix=function(Rt){return arguments.length?(Oe=(Ae=Rt)&&Ae.length,ee=ce=null,Xe):Ae},Xe.padding=function(Rt){return arguments.length?(rt=Rt,ee=ce=null,Xe):rt},Xe.sortGroups=function(Rt){return arguments.length?(Fe=Rt,ee=ce=null,Xe):Fe},Xe.sortSubgroups=function(Rt){return arguments.length?(Ue=Rt,ee=null,Xe):Ue},Xe.sortChords=function(Rt){return arguments.length?(Ge=Rt,ee&&Ct(),Xe):Ge},Xe.chords=function(){return ee||ut(),ee},Xe.groups=function(){return ce||ut(),ce},Xe},l.layout.force=function(){var ee,ce,Ae,Oe,Fe,Ue,Ge={},Xe=l.dispatch("start","tick","end"),rt=[1,1],ut=.9,Ct=yl,Rt=Ss,Ft=-30,Yt=cs,cn=.1,Wt=.64,tn=[],$t=[];function _n(Qt){return function(Cn,Dn,Jn,Kn){if(Cn.point!==Qt){var vr=Cn.cx-Qt.x,yr=Cn.cy-Qt.y,fr=Kn-Dn,gr=vr*vr+yr*yr;if(fr*fr/Wt<gr){if(gr<Yt){var Sr=Cn.charge/gr;Qt.px-=vr*Sr,Qt.py-=yr*Sr}return!0}Cn.point&&gr&&gr<Yt&&(Qt.px-=vr*(Sr=Cn.pointCharge/gr),Qt.py-=yr*Sr)}return!Cn.charge}}function dn(Qt){Qt.px=l.event.x,Qt.py=l.event.y,Ge.resume()}return Ge.tick=function(){if((Ae*=.99)<.005)return ee=null,Xe.end({type:"end",alpha:Ae=0}),!0;var Qt,Cn,Dn,Jn,Kn,vr,yr,fr,gr,Sr=tn.length,Vr=$t.length;for(Cn=0;Cn<Vr;++Cn)Jn=(Dn=$t[Cn]).source,(vr=(fr=(Kn=Dn.target).x-Jn.x)*fr+(gr=Kn.y-Jn.y)*gr)&&(fr*=vr=Ae*Fe[Cn]*((vr=Math.sqrt(vr))-Oe[Cn])/vr,gr*=vr,Kn.x-=fr*(yr=Jn.weight+Kn.weight?Jn.weight/(Jn.weight+Kn.weight):.5),Kn.y-=gr*yr,Jn.x+=fr*(yr=1-yr),Jn.y+=gr*yr);if((yr=Ae*cn)&&(fr=rt[0]/2,gr=rt[1]/2,Cn=-1,yr))for(;++Cn<Sr;)(Dn=tn[Cn]).x+=(fr-Dn.x)*yr,Dn.y+=(gr-Dn.y)*yr;if(Ft)for(_o(Qt=l.geom.quadtree(tn),Ae,Ue),Cn=-1;++Cn<Sr;)(Dn=tn[Cn]).fixed||Qt.visit(_n(Dn));for(Cn=-1;++Cn<Sr;)(Dn=tn[Cn]).fixed?(Dn.x=Dn.px,Dn.y=Dn.py):(Dn.x-=(Dn.px-(Dn.px=Dn.x))*ut,Dn.y-=(Dn.py-(Dn.py=Dn.y))*ut);Xe.tick({type:"tick",alpha:Ae})},Ge.nodes=function(Qt){return arguments.length?(tn=Qt,Ge):tn},Ge.links=function(Qt){return arguments.length?($t=Qt,Ge):$t},Ge.size=function(Qt){return arguments.length?(rt=Qt,Ge):rt},Ge.linkDistance=function(Qt){return arguments.length?(Ct="function"==typeof Qt?Qt:+Qt,Ge):Ct},Ge.distance=Ge.linkDistance,Ge.linkStrength=function(Qt){return arguments.length?(Rt="function"==typeof Qt?Qt:+Qt,Ge):Rt},Ge.friction=function(Qt){return arguments.length?(ut=+Qt,Ge):ut},Ge.charge=function(Qt){return arguments.length?(Ft="function"==typeof Qt?Qt:+Qt,Ge):Ft},Ge.chargeDistance=function(Qt){return arguments.length?(Yt=Qt*Qt,Ge):Math.sqrt(Yt)},Ge.gravity=function(Qt){return arguments.length?(cn=+Qt,Ge):cn},Ge.theta=function(Qt){return arguments.length?(Wt=Qt*Qt,Ge):Math.sqrt(Wt)},Ge.alpha=function(Qt){return arguments.length?(Qt=+Qt,Ae?Qt>0?Ae=Qt:(ee.c=null,ee.t=NaN,ee=null,Xe.end({type:"end",alpha:Ae=0})):Qt>0&&(Xe.start({type:"start",alpha:Ae=Qt}),ee=Gt(Ge.tick)),Ge):Ae},Ge.start=function(){var Qt,Cn,Dn,Jn=tn.length,Kn=$t.length,vr=rt[0],yr=rt[1];for(Qt=0;Qt<Jn;++Qt)(Dn=tn[Qt]).index=Qt,Dn.weight=0;for(Qt=0;Qt<Kn;++Qt)"number"==typeof(Dn=$t[Qt]).source&&(Dn.source=tn[Dn.source]),"number"==typeof Dn.target&&(Dn.target=tn[Dn.target]),++Dn.source.weight,++Dn.target.weight;for(Qt=0;Qt<Jn;++Qt)Dn=tn[Qt],isNaN(Dn.x)&&(Dn.x=fr("x",vr)),isNaN(Dn.y)&&(Dn.y=fr("y",yr)),isNaN(Dn.px)&&(Dn.px=Dn.x),isNaN(Dn.py)&&(Dn.py=Dn.y);if(Oe=[],"function"==typeof Ct)for(Qt=0;Qt<Kn;++Qt)Oe[Qt]=+Ct.call(this,$t[Qt],Qt);else for(Qt=0;Qt<Kn;++Qt)Oe[Qt]=Ct;if(Fe=[],"function"==typeof Rt)for(Qt=0;Qt<Kn;++Qt)Fe[Qt]=+Rt.call(this,$t[Qt],Qt);else for(Qt=0;Qt<Kn;++Qt)Fe[Qt]=Rt;if(Ue=[],"function"==typeof Ft)for(Qt=0;Qt<Jn;++Qt)Ue[Qt]=+Ft.call(this,tn[Qt],Qt);else for(Qt=0;Qt<Jn;++Qt)Ue[Qt]=Ft;function fr(gr,Sr){if(!Cn){for(Cn=new Array(Jn),Er=0;Er<Jn;++Er)Cn[Er]=[];for(Er=0;Er<Kn;++Er){var Vr=$t[Er];Cn[Vr.source.index].push(Vr.target),Cn[Vr.target.index].push(Vr.source)}}for(var Hr,pr=Cn[Qt],Er=-1,Fr=pr.length;++Er<Fr;)if(!isNaN(Hr=pr[Er][gr]))return Hr;return Math.random()*Sr}return Ge.resume()},Ge.resume=function(){return Ge.alpha(.1)},Ge.stop=function(){return Ge.alpha(0)},Ge.drag=function(){if(ce||(ce=l.behavior.drag().origin(j).on("dragstart.force",Xo).on("drag.force",dn).on("dragend.force",Io)),!arguments.length)return ce;this.on("mouseover.force",lo).on("mouseout.force",ni).call(ce)},l.rebind(Ge,Xe,"on")};var yl=20,Ss=1,cs=1/0;function zo(ee,ce){return l.rebind(ee,ce,"sort","children","value"),ee.nodes=ee,ee.links=hs,ee}function Jo(ee,ce){for(var Ae=[ee];null!=(ee=Ae.pop());)if(ce(ee),(Fe=ee.children)&&(Oe=Fe.length))for(var Oe,Fe;--Oe>=0;)Ae.push(Fe[Oe])}function Ia(ee,ce){for(var Ae=[ee],Oe=[];null!=(ee=Ae.pop());)if(Oe.push(ee),(Ue=ee.children)&&(Fe=Ue.length))for(var Fe,Ue,Ge=-1;++Ge<Fe;)Ae.push(Ue[Ge]);for(;null!=(ee=Oe.pop());)ce(ee)}function Ws(ee){return ee.children}function fs(ee){return ee.value}function Ko(ee,ce){return ce.value-ee.value}function hs(ee){return l.merge(ee.map(function(ce){return(ce.children||[]).map(function(Ae){return{source:ce,target:Ae}})}))}l.layout.hierarchy=function(){var ee=Ko,ce=Ws,Ae=fs;function Oe(Fe){var Ue,Ge=[Fe],Xe=[];for(Fe.depth=0;null!=(Ue=Ge.pop());)if(Xe.push(Ue),(ut=ce.call(Oe,Ue,Ue.depth))&&(rt=ut.length)){for(var rt,ut,Ct;--rt>=0;)Ge.push(Ct=ut[rt]),Ct.parent=Ue,Ct.depth=Ue.depth+1;Ae&&(Ue.value=0),Ue.children=ut}else Ae&&(Ue.value=+Ae.call(Oe,Ue,Ue.depth)||0),delete Ue.children;return Ia(Fe,function(Rt){var Ft,Yt;ee&&(Ft=Rt.children)&&Ft.sort(ee),Ae&&(Yt=Rt.parent)&&(Yt.value+=Rt.value)}),Xe}return Oe.sort=function(Fe){return arguments.length?(ee=Fe,Oe):ee},Oe.children=function(Fe){return arguments.length?(ce=Fe,Oe):ce},Oe.value=function(Fe){return arguments.length?(Ae=Fe,Oe):Ae},Oe.revalue=function(Fe){return Ae&&(Jo(Fe,function(Ue){Ue.children&&(Ue.value=0)}),Ia(Fe,function(Ue){var Ge;Ue.children||(Ue.value=+Ae.call(Oe,Ue,Ue.depth)||0),(Ge=Ue.parent)&&(Ge.value+=Ue.value)})),Fe},Oe},l.layout.partition=function(){var ee=l.layout.hierarchy(),ce=[1,1];function Ae(Ue,Ge,Xe,rt){var ut=Ue.children;if(Ue.x=Ge,Ue.y=Ue.depth*rt,Ue.dx=Xe,Ue.dy=rt,ut&&(Ct=ut.length)){var Ct,Rt,Ft,Yt=-1;for(Xe=Ue.value?Xe/Ue.value:0;++Yt<Ct;)Ae(Rt=ut[Yt],Ge,Ft=Rt.value*Xe,rt),Ge+=Ft}}function Oe(Ue){var Ge=Ue.children,Xe=0;if(Ge&&(rt=Ge.length))for(var rt,ut=-1;++ut<rt;)Xe=Math.max(Xe,Oe(Ge[ut]));return 1+Xe}function Fe(Ue,Ge){var Xe=ee.call(this,Ue,Ge);return Ae(Xe[0],0,ce[0],ce[1]/Oe(Xe[0])),Xe}return Fe.size=function(Ue){return arguments.length?(ce=Ue,Fe):ce},zo(Fe,ee)},l.layout.pie=function(){var ee=Number,ce=Ro,Ae=0,Oe=Ot,Fe=0;function Ue(Ge){var Xe,rt=Ge.length,ut=Ge.map(function(_n,dn){return+ee.call(Ue,_n,dn)}),Ct=+("function"==typeof Ae?Ae.apply(this,arguments):Ae),Rt=("function"==typeof Oe?Oe.apply(this,arguments):Oe)-Ct,Ft=Math.min(Math.abs(Rt)/rt,+("function"==typeof Fe?Fe.apply(this,arguments):Fe)),Yt=Ft*(Rt<0?-1:1),cn=l.sum(ut),Wt=cn?(Rt-rt*Yt)/cn:0,tn=l.range(rt),$t=[];return null!=ce&&tn.sort(ce===Ro?function(_n,dn){return ut[dn]-ut[_n]}:function(_n,dn){return ce(Ge[_n],Ge[dn])}),tn.forEach(function(_n){$t[_n]={data:Ge[_n],value:Xe=ut[_n],startAngle:Ct,endAngle:Ct+=Xe*Wt+Yt,padAngle:Ft}}),$t}return Ue.value=function(Ge){return arguments.length?(ee=Ge,Ue):ee},Ue.sort=function(Ge){return arguments.length?(ce=Ge,Ue):ce},Ue.startAngle=function(Ge){return arguments.length?(Ae=Ge,Ue):Ae},Ue.endAngle=function(Ge){return arguments.length?(Oe=Ge,Ue):Oe},Ue.padAngle=function(Ge){return arguments.length?(Fe=Ge,Ue):Fe},Ue};var Ro={};function Do(ee){return ee.x}function $o(ee){return ee.y}function ps(ee,ce,Ae){ee.y0=ce,ee.y=Ae}l.layout.stack=function(){var ee=j,ce=gs,Ae=vs,Oe=ps,Fe=Do,Ue=$o;function Ge(Xe,rt){if(!(Ft=Xe.length))return Xe;var ut=Xe.map(function(_n,dn){return ee.call(Ge,_n,dn)}),Ct=ut.map(function(_n){return _n.map(function(dn,Qt){return[Fe.call(Ge,dn,Qt),Ue.call(Ge,dn,Qt)]})}),Rt=ce.call(Ge,Ct,rt);ut=l.permute(ut,Rt),Ct=l.permute(Ct,Rt);var Ft,Yt,cn,Wt,tn=Ae.call(Ge,Ct,rt),$t=ut[0].length;for(cn=0;cn<$t;++cn)for(Oe.call(Ge,ut[0][cn],Wt=tn[cn],Ct[0][cn][1]),Yt=1;Yt<Ft;++Yt)Oe.call(Ge,ut[Yt][cn],Wt+=Ct[Yt-1][cn][1],Ct[Yt][cn][1]);return Xe}return Ge.values=function(Xe){return arguments.length?(ee=Xe,Ge):ee},Ge.order=function(Xe){return arguments.length?(ce="function"==typeof Xe?Xe:ds.get(Xe)||gs,Ge):ce},Ge.offset=function(Xe){return arguments.length?(Ae="function"==typeof Xe?Xe:za.get(Xe)||vs,Ge):Ae},Ge.x=function(Xe){return arguments.length?(Fe=Xe,Ge):Fe},Ge.y=function(Xe){return arguments.length?(Ue=Xe,Ge):Ue},Ge.out=function(Xe){return arguments.length?(Oe=Xe,Ge):Oe},Ge};var ds=l.map({"inside-out":function(ee){var ce,Ae,Oe=ee.length,Fe=ee.map(Xs),Ue=ee.map(wo),Ge=l.range(Oe).sort(function(Rt,Ft){return Fe[Rt]-Fe[Ft]}),Xe=0,rt=0,ut=[],Ct=[];for(ce=0;ce<Oe;++ce)Ae=Ge[ce],Xe<rt?(Xe+=Ue[Ae],ut.push(Ae)):(rt+=Ue[Ae],Ct.push(Ae));return Ct.reverse().concat(ut)},reverse:function(ee){return l.range(ee.length).reverse()},default:gs}),za=l.map({silhouette:function(ee){var ce,Ae,Oe,Fe=ee.length,Ue=ee[0].length,Ge=[],Xe=0,rt=[];for(Ae=0;Ae<Ue;++Ae){for(ce=0,Oe=0;ce<Fe;ce++)Oe+=ee[ce][Ae][1];Oe>Xe&&(Xe=Oe),Ge.push(Oe)}for(Ae=0;Ae<Ue;++Ae)rt[Ae]=(Xe-Ge[Ae])/2;return rt},wiggle:function(ee){var ce,Ae,Oe,Fe,Ue,Ge,Xe,rt,ut,Ct=ee.length,Rt=ee[0],Ft=Rt.length,Yt=[];for(Yt[0]=rt=ut=0,Ae=1;Ae<Ft;++Ae){for(ce=0,Fe=0;ce<Ct;++ce)Fe+=ee[ce][Ae][1];for(ce=0,Ue=0,Xe=Rt[Ae][0]-Rt[Ae-1][0];ce<Ct;++ce){for(Oe=0,Ge=(ee[ce][Ae][1]-ee[ce][Ae-1][1])/(2*Xe);Oe<ce;++Oe)Ge+=(ee[Oe][Ae][1]-ee[Oe][Ae-1][1])/Xe;Ue+=Ge*ee[ce][Ae][1]}Yt[Ae]=rt-=Fe?Ue/Fe*Xe:0,rt<ut&&(ut=rt)}for(Ae=0;Ae<Ft;++Ae)Yt[Ae]-=ut;return Yt},expand:function(ee){var ce,Ae,Oe,Fe=ee.length,Ue=ee[0].length,Ge=1/Fe,Xe=[];for(Ae=0;Ae<Ue;++Ae){for(ce=0,Oe=0;ce<Fe;ce++)Oe+=ee[ce][Ae][1];if(Oe)for(ce=0;ce<Fe;ce++)ee[ce][Ae][1]/=Oe;else for(ce=0;ce<Fe;ce++)ee[ce][Ae][1]=Ge}for(Ae=0;Ae<Ue;++Ae)Xe[Ae]=0;return Xe},zero:vs});function gs(ee){return l.range(ee.length)}function vs(ee){for(var ce=-1,Ae=ee[0].length,Oe=[];++ce<Ae;)Oe[ce]=0;return Oe}function Xs(ee){for(var ce,Ae=1,Oe=0,Fe=ee[0][1],Ue=ee.length;Ae<Ue;++Ae)(ce=ee[Ae][1])>Fe&&(Oe=Ae,Fe=ce);return Oe}function wo(ee){return ee.reduce(Es,0)}function Es(ee,ce){return ee+ce[1]}function ms(ee,ce){return Js(ee,Math.ceil(Math.log(ce.length)/Math.LN2+1))}function Js(ee,ce){for(var Ae=-1,Oe=+ee[0],Fe=(ee[1]-Oe)/ce,Ue=[];++Ae<=ce;)Ue[Ae]=Fe*Ae+Oe;return Ue}function ys(ee){return[l.min(ee),l.max(ee)]}function Qo(ee,ce){return ee.value-ce.value}function Fo(ee,ce){var Ae=ee._pack_next;ee._pack_next=ce,ce._pack_prev=ee,ce._pack_next=Ae,Ae._pack_prev=ce}function Bo(ee,ce){ee._pack_next=ce,ce._pack_prev=ee}function li(ee,ce){var Ae=ce.x-ee.x,Oe=ce.y-ee.y,Fe=ee.r+ce.r;return.999*Fe*Fe>Ae*Ae+Oe*Oe}function To(ee){if((ce=ee.children)&&(rt=ce.length)){var ce,Ae,Oe,Fe,Ue,Ge,Xe,rt,ut=1/0,Ct=-1/0,Rt=1/0,Ft=-1/0;if(ce.forEach(ko),(Ae=ce[0]).x=-Ae.r,Ae.y=0,dn(Ae),rt>1&&((Oe=ce[1]).x=Oe.r,Oe.y=0,dn(Oe),rt>2))for($r(Ae,Oe,Fe=ce[2]),dn(Fe),Fo(Ae,Fe),Ae._pack_prev=Fe,Fo(Fe,Oe),Oe=Ae._pack_next,Ue=3;Ue<rt;Ue++){$r(Ae,Oe,Fe=ce[Ue]);var Yt=0,cn=1,Wt=1;for(Ge=Oe._pack_next;Ge!==Oe;Ge=Ge._pack_next,cn++)if(li(Ge,Fe)){Yt=1;break}if(1==Yt)for(Xe=Ae._pack_prev;Xe!==Ge._pack_prev&&!li(Xe,Fe);Xe=Xe._pack_prev,Wt++);Yt?(cn<Wt||cn==Wt&&Oe.r<Ae.r?Bo(Ae,Oe=Ge):Bo(Ae=Xe,Oe),Ue--):(Fo(Ae,Fe),Oe=Fe,dn(Fe))}var tn=(ut+Ct)/2,$t=(Rt+Ft)/2,_n=0;for(Ue=0;Ue<rt;Ue++)(Fe=ce[Ue]).x-=tn,Fe.y-=$t,_n=Math.max(_n,Fe.r+Math.sqrt(Fe.x*Fe.x+Fe.y*Fe.y));ee.r=_n,ce.forEach(Wi)}function dn(Qt){ut=Math.min(Qt.x-Qt.r,ut),Ct=Math.max(Qt.x+Qt.r,Ct),Rt=Math.min(Qt.y-Qt.r,Rt),Ft=Math.max(Qt.y+Qt.r,Ft)}}function ko(ee){ee._pack_next=ee._pack_prev=ee}function Wi(ee){delete ee._pack_next,delete ee._pack_prev}function Jr(ee,ce,Ae,Oe){var Fe=ee.children;if(ee.x=ce+=Oe*ee.x,ee.y=Ae+=Oe*ee.y,ee.r*=Oe,Fe)for(var Ue=-1,Ge=Fe.length;++Ue<Ge;)Jr(Fe[Ue],ce,Ae,Oe)}function $r(ee,ce,Ae){var Oe=ee.r+Ae.r,Fe=ce.x-ee.x,Ue=ce.y-ee.y;if(Oe&&(Fe||Ue)){var Ge=ce.r+Ae.r,Xe=Fe*Fe+Ue*Ue,rt=.5+((Oe*=Oe)-(Ge*=Ge))/(2*Xe),ut=Math.sqrt(Math.max(0,2*Ge*(Oe+Xe)-(Oe-=Xe)*Oe-Ge*Ge))/(2*Xe);Ae.x=ee.x+rt*Fe+ut*Ue,Ae.y=ee.y+rt*Ue-ut*Fe}else Ae.x=ee.x+Oe,Ae.y=ee.y}function uo(ee,ce){return ee.parent==ce.parent?1:2}function Ka(ee){var ce=ee.children;return ce.length?ce[0]:ee.t}function Ls(ee){var ce,Ae=ee.children;return(ce=Ae.length)?Ae[ce-1]:ee.t}function Ks(ee,ce,Ae){var Oe=Ae/(ce.i-ee.i);ce.c-=Oe,ce.s+=Ae,ee.c+=Oe,ce.z+=Ae,ce.m+=Ae}function No(ee,ce,Ae){return ee.a.parent===ce.parent?ee.a:Ae}function $s(ee){var ce=ee.children;return ce&&ce.length?$s(ce[0]):ee}function jo(ee){var ce,Ae=ee.children;return Ae&&(ce=Ae.length)?jo(Ae[ce-1]):ee}function co(ee){return{x:ee.x,y:ee.y,dx:ee.dx,dy:ee.dy}}function Uo(ee,ce){var Ae=ee.x+ce[3],Oe=ee.y+ce[0],Fe=ee.dx-ce[1]-ce[3],Ue=ee.dy-ce[0]-ce[2];return Fe<0&&(Ae+=Fe/2,Fe=0),Ue<0&&(Oe+=Ue/2,Ue=0),{x:Ae,y:Oe,dx:Fe,dy:Ue}}function bi(ee){var ce=ee[0],Ae=ee[ee.length-1];return ce<Ae?[ce,Ae]:[Ae,ce]}function $a(ee){return ee.rangeExtent?ee.rangeExtent():bi(ee.range())}function Vo(ee,ce,Ae,Oe){var Fe=Ae(ee[0],ee[1]),Ue=Oe(ce[0],ce[1]);return function(Ge){return Ue(Fe(Ge))}}function Ri(ee,ce){var Ae,Oe=0,Fe=ee.length-1,Ue=ee[Oe],Ge=ee[Fe];return Ge<Ue&&(Ae=Oe,Oe=Fe,Fe=Ae,Ae=Ue,Ue=Ge,Ge=Ae),ee[Oe]=ce.floor(Ue),ee[Fe]=ce.ceil(Ge),ee}function Xi(ee){return ee?{floor:function(ce){return Math.floor(ce/ee)*ee},ceil:function(ce){return Math.ceil(ce/ee)*ee}}:Ji}l.layout.histogram=function(){var ee=!0,ce=Number,Ae=ys,Oe=ms;function Fe(Ue,Ge){for(var Xe,rt,ut=[],Ct=Ue.map(ce,this),Rt=Ae.call(this,Ct,Ge),Ft=Oe.call(this,Rt,Ct,Ge),Yt=(Ge=-1,Ct.length),cn=Ft.length-1,Wt=ee?1:1/Yt;++Ge<cn;)(Xe=ut[Ge]=[]).dx=Ft[Ge+1]-(Xe.x=Ft[Ge]),Xe.y=0;if(cn>0)for(Ge=-1;++Ge<Yt;)(rt=Ct[Ge])>=Rt[0]&&rt<=Rt[1]&&((Xe=ut[l.bisect(Ft,rt,1,cn)-1]).y+=Wt,Xe.push(Ue[Ge]));return ut}return Fe.value=function(Ue){return arguments.length?(ce=Ue,Fe):ce},Fe.range=function(Ue){return arguments.length?(Ae=Bn(Ue),Fe):Ae},Fe.bins=function(Ue){return arguments.length?(Oe="number"==typeof Ue?function(Ge){return Js(Ge,Ue)}:Bn(Ue),Fe):Oe},Fe.frequency=function(Ue){return arguments.length?(ee=!!Ue,Fe):ee},Fe},l.layout.pack=function(){var ee,ce=l.layout.hierarchy().sort(Qo),Ae=0,Oe=[1,1];function Fe(Ue,Ge){var Xe=ce.call(this,Ue,Ge),rt=Xe[0],ut=Oe[0],Ct=Oe[1],Rt=null==ee?Math.sqrt:"function"==typeof ee?ee:function(){return ee};if(rt.x=rt.y=0,Ia(rt,function(Yt){Yt.r=+Rt(Yt.value)}),Ia(rt,To),Ae){var Ft=Ae*(ee?1:Math.max(2*rt.r/ut,2*rt.r/Ct))/2;Ia(rt,function(Yt){Yt.r+=Ft}),Ia(rt,To),Ia(rt,function(Yt){Yt.r-=Ft})}return Jr(rt,ut/2,Ct/2,ee?1:1/Math.max(2*rt.r/ut,2*rt.r/Ct)),Xe}return Fe.size=function(Ue){return arguments.length?(Oe=Ue,Fe):Oe},Fe.radius=function(Ue){return arguments.length?(ee=null==Ue||"function"==typeof Ue?Ue:+Ue,Fe):ee},Fe.padding=function(Ue){return arguments.length?(Ae=+Ue,Fe):Ae},zo(Fe,ce)},l.layout.tree=function(){var ee=l.layout.hierarchy().sort(null).value(null),ce=uo,Ae=[1,1],Oe=null;function Fe(rt,ut){var Ct=ee.call(this,rt,ut),Rt=Ct[0],Ft=function(dn){for(var Qt,Cn={A:null,children:[dn]},Dn=[Cn];null!=(Qt=Dn.pop());)for(var Jn,Kn=Qt.children,vr=0,yr=Kn.length;vr<yr;++vr)Dn.push((Kn[vr]=Jn={_:Kn[vr],parent:Qt,children:(Jn=Kn[vr].children)&&Jn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:vr}).a=Jn);return Cn.children[0]}(Rt);if(Ia(Ft,Ue),Ft.parent.m=-Ft.z,Jo(Ft,Ge),Oe)Jo(Rt,Xe);else{var Yt=Rt,cn=Rt,Wt=Rt;Jo(Rt,function(dn){dn.x<Yt.x&&(Yt=dn),dn.x>cn.x&&(cn=dn),dn.depth>Wt.depth&&(Wt=dn)});var tn=ce(Yt,cn)/2-Yt.x,$t=Ae[0]/(cn.x+ce(cn,Yt)/2+tn),_n=Ae[1]/(Wt.depth||1);Jo(Rt,function(dn){dn.x=(dn.x+tn)*$t,dn.y=dn.depth*_n})}return Ct}function Ue(rt){var ut=rt.children,Ct=rt.parent.children,Rt=rt.i?Ct[rt.i-1]:null;if(ut.length){!function(Yt){for(var cn,Wt=0,tn=0,$t=Yt.children,_n=$t.length;--_n>=0;)(cn=$t[_n]).z+=Wt,cn.m+=Wt,Wt+=cn.s+(tn+=cn.c)}(rt);var Ft=(ut[0].z+ut[ut.length-1].z)/2;Rt?(rt.z=Rt.z+ce(rt._,Rt._),rt.m=rt.z-Ft):rt.z=Ft}else Rt&&(rt.z=Rt.z+ce(rt._,Rt._));rt.parent.A=function(Yt,cn,Wt){if(cn){for(var tn,$t=Yt,_n=Yt,dn=cn,Qt=$t.parent.children[0],Cn=$t.m,Dn=_n.m,Jn=dn.m,Kn=Qt.m;dn=Ls(dn),$t=Ka($t),dn&&$t;)Qt=Ka(Qt),(_n=Ls(_n)).a=Yt,(tn=dn.z+Jn-$t.z-Cn+ce(dn._,$t._))>0&&(Ks(No(dn,Yt,Wt),Yt,tn),Cn+=tn,Dn+=tn),Jn+=dn.m,Cn+=$t.m,Kn+=Qt.m,Dn+=_n.m;dn&&!Ls(_n)&&(_n.t=dn,_n.m+=Jn-Dn),$t&&!Ka(Qt)&&(Qt.t=$t,Qt.m+=Cn-Kn,Wt=Yt)}return Wt}(rt,Rt,rt.parent.A||Ct[0])}function Ge(rt){rt._.x=rt.z+rt.parent.m,rt.m+=rt.parent.m}function Xe(rt){rt.x*=Ae[0],rt.y=rt.depth*Ae[1]}return Fe.separation=function(rt){return arguments.length?(ce=rt,Fe):ce},Fe.size=function(rt){return arguments.length?(Oe=null==(Ae=rt)?Xe:null,Fe):Oe?null:Ae},Fe.nodeSize=function(rt){return arguments.length?(Oe=null==(Ae=rt)?null:Xe,Fe):Oe?Ae:null},zo(Fe,ee)},l.layout.cluster=function(){var ee=l.layout.hierarchy().sort(null).value(null),ce=uo,Ae=[1,1],Oe=!1;function Fe(Ue,Ge){var Xe,rt=ee.call(this,Ue,Ge),ut=rt[0],Ct=0;Ia(ut,function(Wt){var $t,tn=Wt.children;tn&&tn.length?(Wt.x=($t=tn).reduce(function(_n,dn){return _n+dn.x},0)/$t.length,Wt.y=function($t){return 1+l.max($t,function(_n){return _n.y})}(tn)):(Wt.x=Xe?Ct+=ce(Wt,Xe):0,Wt.y=0,Xe=Wt)});var Rt=$s(ut),Ft=jo(ut),Yt=Rt.x-ce(Rt,Ft)/2,cn=Ft.x+ce(Ft,Rt)/2;return Ia(ut,Oe?function(Wt){Wt.x=(Wt.x-ut.x)*Ae[0],Wt.y=(ut.y-Wt.y)*Ae[1]}:function(Wt){Wt.x=(Wt.x-Yt)/(cn-Yt)*Ae[0],Wt.y=(1-(ut.y?Wt.y/ut.y:1))*Ae[1]}),rt}return Fe.separation=function(Ue){return arguments.length?(ce=Ue,Fe):ce},Fe.size=function(Ue){return arguments.length?(Oe=null==(Ae=Ue),Fe):Oe?null:Ae},Fe.nodeSize=function(Ue){return arguments.length?(Oe=null!=(Ae=Ue),Fe):Oe?Ae:null},zo(Fe,ee)},l.layout.treemap=function(){var ee,ce=l.layout.hierarchy(),Ae=Math.round,Oe=[1,1],Fe=null,Ue=co,Ge=!1,Xe="squarify",rt=.5*(1+Math.sqrt(5));function ut(Wt,tn){for(var $t,_n,dn=-1,Qt=Wt.length;++dn<Qt;)_n=($t=Wt[dn]).value*(tn<0?0:tn),$t.area=isNaN(_n)||_n<=0?0:_n}function Ct(Wt){var tn=Wt.children;if(tn&&tn.length){var $t,_n,dn,Qt=Ue(Wt),Cn=[],Dn=tn.slice(),Jn=1/0,Kn="slice"===Xe?Qt.dx:"dice"===Xe?Qt.dy:"slice-dice"===Xe?1&Wt.depth?Qt.dy:Qt.dx:Math.min(Qt.dx,Qt.dy);for(ut(Dn,Qt.dx*Qt.dy/Wt.value),Cn.area=0;(dn=Dn.length)>0;)Cn.push($t=Dn[dn-1]),Cn.area+=$t.area,"squarify"!==Xe||(_n=Ft(Cn,Kn))<=Jn?(Dn.pop(),Jn=_n):(Cn.area-=Cn.pop().area,Yt(Cn,Kn,Qt,!1),Kn=Math.min(Qt.dx,Qt.dy),Cn.length=Cn.area=0,Jn=1/0);Cn.length&&(Yt(Cn,Kn,Qt,!0),Cn.length=Cn.area=0),tn.forEach(Ct)}}function Rt(Wt){var tn=Wt.children;if(tn&&tn.length){var $t,_n=Ue(Wt),dn=tn.slice(),Qt=[];for(ut(dn,_n.dx*_n.dy/Wt.value),Qt.area=0;$t=dn.pop();)Qt.push($t),Qt.area+=$t.area,null!=$t.z&&(Yt(Qt,$t.z?_n.dx:_n.dy,_n,!dn.length),Qt.length=Qt.area=0);tn.forEach(Rt)}}function Ft(Wt,tn){for(var $t,_n=Wt.area,dn=0,Qt=1/0,Cn=-1,Dn=Wt.length;++Cn<Dn;)($t=Wt[Cn].area)&&($t<Qt&&(Qt=$t),$t>dn&&(dn=$t));return tn*=tn,(_n*=_n)?Math.max(tn*dn*rt/_n,_n/(tn*Qt*rt)):1/0}function Yt(Wt,tn,$t,_n){var dn,Qt=-1,Cn=Wt.length,Dn=$t.x,Jn=$t.y,Kn=tn?Ae(Wt.area/tn):0;if(tn==$t.dx){for((_n||Kn>$t.dy)&&(Kn=$t.dy);++Qt<Cn;)(dn=Wt[Qt]).x=Dn,dn.y=Jn,dn.dy=Kn,Dn+=dn.dx=Math.min($t.x+$t.dx-Dn,Kn?Ae(dn.area/Kn):0);dn.z=!0,dn.dx+=$t.x+$t.dx-Dn,$t.y+=Kn,$t.dy-=Kn}else{for((_n||Kn>$t.dx)&&(Kn=$t.dx);++Qt<Cn;)(dn=Wt[Qt]).x=Dn,dn.y=Jn,dn.dx=Kn,Jn+=dn.dy=Math.min($t.y+$t.dy-Jn,Kn?Ae(dn.area/Kn):0);dn.z=!1,dn.dy+=$t.y+$t.dy-Jn,$t.x+=Kn,$t.dx-=Kn}}function cn(Wt){var tn=ee||ce(Wt),$t=tn[0];return $t.x=$t.y=0,$t.value?($t.dx=Oe[0],$t.dy=Oe[1]):$t.dx=$t.dy=0,ee&&ce.revalue($t),ut([$t],$t.dx*$t.dy/$t.value),(ee?Rt:Ct)($t),Ge&&(ee=tn),tn}return cn.size=function(Wt){return arguments.length?(Oe=Wt,cn):Oe},cn.padding=function(Wt){if(!arguments.length)return Fe;function tn(dn){var Qt=Wt.call(cn,dn,dn.depth);return null==Qt?co(dn):Uo(dn,"number"==typeof Qt?[Qt,Qt,Qt,Qt]:Qt)}function $t(dn){return Uo(dn,Wt)}var _n;return Ue=null==(Fe=Wt)?co:"function"==(_n=typeof Wt)?tn:("number"===_n&&(Wt=[Wt,Wt,Wt,Wt]),$t),cn},cn.round=function(Wt){return arguments.length?(Ae=Wt?Math.round:Number,cn):Ae!=Number},cn.sticky=function(Wt){return arguments.length?(Ge=Wt,ee=null,cn):Ge},cn.ratio=function(Wt){return arguments.length?(rt=Wt,cn):rt},cn.mode=function(Wt){return arguments.length?(Xe=Wt+"",cn):Xe},zo(cn,ce)},l.random={normal:function(ee,ce){var Ae=arguments.length;return Ae<2&&(ce=1),Ae<1&&(ee=0),function(){var Oe,Fe,Ue;do{Ue=(Oe=2*Math.random()-1)*Oe+(Fe=2*Math.random()-1)*Fe}while(!Ue||Ue>1);return ee+ce*Oe*Math.sqrt(-2*Math.log(Ue)/Ue)}},logNormal:function(){var ee=l.random.normal.apply(l,arguments);return function(){return Math.exp(ee())}},bates:function(ee){var ce=l.random.irwinHall(ee);return function(){return ce()/ee}},irwinHall:function(ee){return function(){for(var ce=0,Ae=0;Ae<ee;Ae++)ce+=Math.random();return ce}}},l.scale={};var Ji={floor:j,ceil:j};function Zi(ee,ce,Ae,Oe){var Fe=[],Ue=[],Ge=0,Xe=Math.min(ee.length,ce.length)-1;for(ee[Xe]<ee[0]&&(ee=ee.slice().reverse(),ce=ce.slice().reverse());++Ge<=Xe;)Fe.push(Ae(ee[Ge-1],ee[Ge])),Ue.push(Oe(ce[Ge-1],ce[Ge]));return function(rt){var ut=l.bisect(ee,rt,1,Xe)-1;return Ue[ut](Fe[ut](rt))}}function ca(ee,ce,Ae,Oe){var Fe,Ue;function Ge(){var rt=Math.min(ee.length,ce.length)>2?Zi:Vo,ut=Oe?Oo:Ys;return Fe=rt(ee,ce,ut,Ae),Ue=rt(ce,ee,ut,ba),Xe}function Xe(rt){return Fe(rt)}return Xe.invert=function(rt){return Ue(rt)},Xe.domain=function(rt){return arguments.length?(ee=rt.map(Number),Ge()):ee},Xe.range=function(rt){return arguments.length?(ce=rt,Ge()):ce},Xe.rangeRound=function(rt){return Xe.range(rt).interpolate(ul)},Xe.clamp=function(rt){return arguments.length?(Oe=rt,Ge()):Oe},Xe.interpolate=function(rt){return arguments.length?(Ae=rt,Ge()):Ae},Xe.ticks=function(rt){return _a(ee,rt)},Xe.tickFormat=function(rt,ut){return d3_scale_linearTickFormat(ee,rt,ut)},Xe.nice=function(rt){return Ra(ee,rt),Ge()},Xe.copy=function(){return ca(ee,ce,Ae,Oe)},Ge()}function Ao(ee,ce){return l.rebind(ee,ce,"range","rangeRound","interpolate","clamp")}function Ra(ee,ce){return Ri(ee,Xi(Bi(ee,ce)[2])),Ri(ee,Xi(Bi(ee,ce)[2])),ee}function Bi(ee,ce){null==ce&&(ce=10);var Ae=bi(ee),Oe=Ae[1]-Ae[0],Fe=Math.pow(10,Math.floor(Math.log(Oe/ce)/Math.LN10)),Ue=ce/Oe*Fe;return Ue<=.15?Fe*=10:Ue<=.35?Fe*=5:Ue<=.75&&(Fe*=2),Ae[0]=Math.ceil(Ae[0]/Fe)*Fe,Ae[1]=Math.floor(Ae[1]/Fe)*Fe+.5*Fe,Ae[2]=Fe,Ae}function _a(ee,ce){return l.range.apply(l,Bi(ee,ce))}function Cs(ee,ce,Ae,Oe){function Fe(Xe){return(Ae?Math.log(Xe<0?0:Xe):-Math.log(Xe>0?0:-Xe))/Math.log(ce)}function Ue(Xe){return Ae?Math.pow(ce,Xe):-Math.pow(ce,-Xe)}function Ge(Xe){return ee(Fe(Xe))}return Ge.invert=function(Xe){return Ue(ee.invert(Xe))},Ge.domain=function(Xe){return arguments.length?(Ae=Xe[0]>=0,ee.domain((Oe=Xe.map(Number)).map(Fe)),Ge):Oe},Ge.base=function(Xe){return arguments.length?(ce=+Xe,ee.domain(Oe.map(Fe)),Ge):ce},Ge.nice=function(){var Xe=Ri(Oe.map(Fe),Ae?Math:Ps);return ee.domain(Xe),Oe=Xe.map(Ue),Ge},Ge.ticks=function(){var Xe=bi(Oe),rt=[],ut=Xe[0],Ct=Xe[1],Rt=Math.floor(Fe(ut)),Ft=Math.ceil(Fe(Ct)),Yt=ce%1?2:ce;if(isFinite(Ft-Rt)){if(Ae){for(;Rt<Ft;Rt++)for(var cn=1;cn<Yt;cn++)rt.push(Ue(Rt)*cn);rt.push(Ue(Rt))}else for(rt.push(Ue(Rt));Rt++<Ft;)for(cn=Yt-1;cn>0;cn--)rt.push(Ue(Rt)*cn);for(Rt=0;rt[Rt]<ut;Rt++);for(Ft=rt.length;rt[Ft-1]>Ct;Ft--);rt=rt.slice(Rt,Ft)}return rt},Ge.copy=function(){return Cs(ee.copy(),ce,Ae,Oe)},Ao(Ge,ee)}l.scale.linear=function(){return ca([0,1],[0,1],ba,!1)},l.scale.log=function(){return Cs(l.scale.linear().domain([0,1]),10,!0,[1,10])};var Ps={floor:function(ee){return-Math.ceil(-ee)},ceil:function(ee){return-Math.floor(-ee)}};function oa(ee,ce,Ae){var Oe=wr(ce),Fe=wr(1/ce);function Ue(Ge){return ee(Oe(Ge))}return Ue.invert=function(Ge){return Fe(ee.invert(Ge))},Ue.domain=function(Ge){return arguments.length?(ee.domain((Ae=Ge.map(Number)).map(Oe)),Ue):Ae},Ue.ticks=function(Ge){return _a(Ae,Ge)},Ue.tickFormat=function(Ge,Xe){return d3_scale_linearTickFormat(Ae,Ge,Xe)},Ue.nice=function(Ge){return Ue.domain(Ra(Ae,Ge))},Ue.exponent=function(Ge){return arguments.length?(Oe=wr(ce=Ge),Fe=wr(1/ce),ee.domain(Ae.map(Oe)),Ue):ce},Ue.copy=function(){return oa(ee.copy(),ce,Ae)},Ao(Ue,ee)}function wr(ee){return function(ce){return ce<0?-Math.pow(-ce,ee):Math.pow(ce,ee)}}function Ho(ee,ce){var Ae,Oe,Fe;function Ue(Xe){return Oe[((Ae.get(Xe)||("range"===ce.t?Ae.set(Xe,ee.push(Xe)):NaN))-1)%Oe.length]}function Ge(Xe,rt){return l.range(ee.length).map(function(ut){return Xe+rt*ut})}return Ue.domain=function(Xe){if(!arguments.length)return ee;ee=[],Ae=new w;for(var rt,ut=-1,Ct=Xe.length;++ut<Ct;)Ae.has(rt=Xe[ut])||Ae.set(rt,ee.push(rt));return Ue[ce.t].apply(Ue,ce.a)},Ue.range=function(Xe){return arguments.length?(Oe=Xe,Fe=0,ce={t:"range",a:arguments},Ue):Oe},Ue.rangePoints=function(Xe,rt){arguments.length<2&&(rt=0);var ut=Xe[0],Ct=Xe[1],Rt=ee.length<2?(ut=(ut+Ct)/2,0):(Ct-ut)/(ee.length-1+rt);return Oe=Ge(ut+Rt*rt/2,Rt),Fe=0,ce={t:"rangePoints",a:arguments},Ue},Ue.rangeRoundPoints=function(Xe,rt){arguments.length<2&&(rt=0);var ut=Xe[0],Ct=Xe[1],Rt=ee.length<2?(ut=Ct=Math.round((ut+Ct)/2),0):(Ct-ut)/(ee.length-1+rt)|0;return Oe=Ge(ut+Math.round(Rt*rt/2+(Ct-ut-(ee.length-1+rt)*Rt)/2),Rt),Fe=0,ce={t:"rangeRoundPoints",a:arguments},Ue},Ue.rangeBands=function(Xe,rt,ut){arguments.length<2&&(rt=0),arguments.length<3&&(ut=rt);var Ct=Xe[1]<Xe[0],Rt=Xe[Ct-0],Yt=(Xe[1-Ct]-Rt)/(ee.length-rt+2*ut);return Oe=Ge(Rt+Yt*ut,Yt),Ct&&Oe.reverse(),Fe=Yt*(1-rt),ce={t:"rangeBands",a:arguments},Ue},Ue.rangeRoundBands=function(Xe,rt,ut){arguments.length<2&&(rt=0),arguments.length<3&&(ut=rt);var Ct=Xe[1]<Xe[0],Rt=Xe[Ct-0],Ft=Xe[1-Ct],Yt=Math.floor((Ft-Rt)/(ee.length-rt+2*ut));return Oe=Ge(Rt+Math.round((Ft-Rt-(ee.length-rt)*Yt)/2),Yt),Ct&&Oe.reverse(),Fe=Math.round(Yt*(1-rt)),ce={t:"rangeRoundBands",a:arguments},Ue},Ue.rangeBand=function(){return Fe},Ue.rangeExtent=function(){return bi(ce.a[0])},Ue.copy=function(){return Ho(ee,ce)},Ue.domain(ee)}l.scale.pow=function(){return oa(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Ho([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(fa)},l.scale.category20=function(){return l.scale.ordinal().range(Os)},l.scale.category20b=function(){return l.scale.ordinal().range(es)},l.scale.category20c=function(){return l.scale.ordinal().range(ts)};var fa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mn),Os=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mn),es=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mn),ts=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mn);function ns(ee,ce){var Ae;function Oe(){var Ue=0,Ge=ce.length;for(Ae=[];++Ue<Ge;)Ae[Ue-1]=l.quantile(ee,Ue/Ge);return Fe}function Fe(Ue){if(!isNaN(Ue=+Ue))return ce[l.bisect(Ae,Ue)]}return Fe.domain=function(Ue){return arguments.length?(ee=Ue.map(h).filter(f).sort(c),Oe()):ee},Fe.range=function(Ue){return arguments.length?(ce=Ue,Oe()):ce},Fe.quantiles=function(){return Ae},Fe.invertExtent=function(Ue){return(Ue=ce.indexOf(Ue))<0?[NaN,NaN]:[Ue>0?Ae[Ue-1]:ee[0],Ue<Ae.length?Ae[Ue]:ee[ee.length-1]]},Fe.copy=function(){return ns(ee,ce)},Oe()}function Ar(ee,ce,Ae){var Oe,Fe;function Ue(Xe){return Ae[Math.max(0,Math.min(Fe,Math.floor(Oe*(Xe-ee))))]}function Ge(){return Oe=Ae.length/(ce-ee),Fe=Ae.length-1,Ue}return Ue.domain=function(Xe){return arguments.length?(ee=+Xe[0],ce=+Xe[Xe.length-1],Ge()):[ee,ce]},Ue.range=function(Xe){return arguments.length?(Ae=Xe,Ge()):Ae},Ue.invertExtent=function(Xe){return[Xe=(Xe=Ae.indexOf(Xe))<0?NaN:Xe/Oe+ee,Xe+1/Oe]},Ue.copy=function(){return Ar(ee,ce,Ae)},Ge()}function rs(ee,ce){function Ae(Oe){if(Oe<=Oe)return ce[l.bisect(ee,Oe)]}return Ae.domain=function(Oe){return arguments.length?(ee=Oe,Ae):ee},Ae.range=function(Oe){return arguments.length?(ce=Oe,Ae):ce},Ae.invertExtent=function(Oe){return Oe=ce.indexOf(Oe),[ee[Oe-1],ee[Oe]]},Ae.copy=function(){return rs(ee,ce)},Ae}function Da(ee){function ce(Ae){return+Ae}return ce.invert=ce,ce.domain=ce.range=function(Ae){return arguments.length?(ee=Ae.map(ce),ce):ee},ce.ticks=function(Ae){return _a(ee,Ae)},ce.tickFormat=function(Ae,Oe){return d3_scale_linearTickFormat(ee,Ae,Oe)},ce.copy=function(){return Da(ee)},ce}function Is(){return 0}l.scale.quantile=function(){return ns([],[])},l.scale.quantize=function(){return Ar(0,1,[0,1])},l.scale.threshold=function(){return rs([.5],[0,1])},l.scale.identity=function(){return Da([0,1])},l.svg={},l.svg.arc=function(){var ee=Ki,ce=qo,Ae=Is,Oe=xs,Fe=fo,Ue=wa,Ge=Mo;function Xe(){var ut=Math.max(0,+ee.apply(this,arguments)),Ct=Math.max(0,+ce.apply(this,arguments)),Rt=Fe.apply(this,arguments)-Dt,Ft=Ue.apply(this,arguments)-Dt,Yt=Math.abs(Ft-Rt),cn=Rt>Ft?0:1;if(Ct<ut&&(Wt=Ct,Ct=ut,ut=Wt),Yt>=jt)return rt(Ct,cn)+(ut?rt(ut,1-cn):"")+"Z";var Wt,tn,$t,_n,dn,Qt,Cn,Dn,Jn,Kn,vr,yr,fr=0,gr=0,Sr=[];if((_n=(+Ge.apply(this,arguments)||0)/2)&&($t=Oe===xs?Math.sqrt(ut*ut+Ct*Ct):+Oe.apply(this,arguments),cn||(gr*=-1),Ct&&(gr=Ne($t/Ct*Math.sin(_n))),ut&&(fr=Ne($t/ut*Math.sin(_n)))),Ct){dn=Ct*Math.cos(Rt+gr),Qt=Ct*Math.sin(Rt+gr),Cn=Ct*Math.cos(Ft-gr),Dn=Ct*Math.sin(Ft-gr);var Vr=Math.abs(Ft-Rt-2*gr)<=St?0:1;if(gr&&qa(dn,Qt,Cn,Dn)===cn^Vr){var Hr=(Rt+Ft)/2;dn=Ct*Math.cos(Hr),Qt=Ct*Math.sin(Hr),Cn=Dn=null}}else dn=Qt=0;if(ut){Jn=ut*Math.cos(Ft-fr),Kn=ut*Math.sin(Ft-fr),vr=ut*Math.cos(Rt+fr),yr=ut*Math.sin(Rt+fr);var pr=Math.abs(Rt-Ft+2*fr)<=St?0:1;if(fr&&qa(Jn,Kn,vr,yr)===1-cn^pr){var Er=(Rt+Ft)/2;Jn=ut*Math.cos(Er),Kn=ut*Math.sin(Er),vr=yr=null}}else Jn=Kn=0;if(Yt>Pt&&(Wt=Math.min(Math.abs(Ct-ut)/2,+Ae.apply(this,arguments)))>.001){tn=ut<Ct^cn?0:1;var Fr=Wt,Dr=Wt;if(Yt<St){var Yr=null==vr?[Jn,Kn]:null==Cn?[dn,Qt]:Mn([dn,Qt],[vr,yr],[Cn,Dn],[Jn,Kn]),Zr=dn-Yr[0],Qr=Qt-Yr[1],hi=Cn-Yr[0],_i=Dn-Yr[1],vi=1/Math.sin(Math.acos((Zr*hi+Qr*_i)/(Math.sqrt(Zr*Zr+Qr*Qr)*Math.sqrt(hi*hi+_i*_i)))/2),ci=Math.sqrt(Yr[0]*Yr[0]+Yr[1]*Yr[1]);Dr=Math.min(Wt,(ut-ci)/(vi-1)),Fr=Math.min(Wt,(Ct-ci)/(vi+1))}if(null!=Cn){var pi=Fa(null==vr?[Jn,Kn]:[vr,yr],[dn,Qt],Ct,Fr,cn),mi=Fa([Cn,Dn],[Jn,Kn],Ct,Fr,cn);Wt===Fr?Sr.push("M",pi[0],"A",Fr,",",Fr," 0 0,",tn," ",pi[1],"A",Ct,",",Ct," 0 ",1-cn^qa(pi[1][0],pi[1][1],mi[1][0],mi[1][1]),",",cn," ",mi[1],"A",Fr,",",Fr," 0 0,",tn," ",mi[0]):Sr.push("M",pi[0],"A",Fr,",",Fr," 0 1,",tn," ",mi[0])}else Sr.push("M",dn,",",Qt);if(null!=vr){var Ci=Fa([dn,Qt],[vr,yr],ut,-Dr,cn),Eo=Fa([Jn,Kn],null==Cn?[dn,Qt]:[Cn,Dn],ut,-Dr,cn);Wt===Dr?Sr.push("L",Eo[0],"A",Dr,",",Dr," 0 0,",tn," ",Eo[1],"A",ut,",",ut," 0 ",cn^qa(Eo[1][0],Eo[1][1],Ci[1][0],Ci[1][1]),",",1-cn," ",Ci[1],"A",Dr,",",Dr," 0 0,",tn," ",Ci[0]):Sr.push("L",Eo[0],"A",Dr,",",Dr," 0 0,",tn," ",Ci[0])}else Sr.push("L",Jn,",",Kn)}else Sr.push("M",dn,",",Qt),null!=Cn&&Sr.push("A",Ct,",",Ct," 0 ",Vr,",",cn," ",Cn,",",Dn),Sr.push("L",Jn,",",Kn),null!=vr&&Sr.push("A",ut,",",ut," 0 ",pr,",",1-cn," ",vr,",",yr);return Sr.push("Z"),Sr.join("")}function rt(ut,Ct){return"M0,"+ut+"A"+ut+","+ut+" 0 1,"+Ct+" 0,"+-ut+"A"+ut+","+ut+" 0 1,"+Ct+" 0,"+ut}return Xe.innerRadius=function(ut){return arguments.length?(ee=Bn(ut),Xe):ee},Xe.outerRadius=function(ut){return arguments.length?(ce=Bn(ut),Xe):ce},Xe.cornerRadius=function(ut){return arguments.length?(Ae=Bn(ut),Xe):Ae},Xe.padRadius=function(ut){return arguments.length?(Oe=ut==xs?xs:Bn(ut),Xe):Oe},Xe.startAngle=function(ut){return arguments.length?(Fe=Bn(ut),Xe):Fe},Xe.endAngle=function(ut){return arguments.length?(Ue=Bn(ut),Xe):Ue},Xe.padAngle=function(ut){return arguments.length?(Ge=Bn(ut),Xe):Ge},Xe.centroid=function(){var ut=(+ee.apply(this,arguments)+ +ce.apply(this,arguments))/2,Ct=(+Fe.apply(this,arguments)+ +Ue.apply(this,arguments))/2-Dt;return[Math.cos(Ct)*ut,Math.sin(Ct)*ut]},Xe};var xs="auto";function Ki(ee){return ee.innerRadius}function qo(ee){return ee.outerRadius}function fo(ee){return ee.startAngle}function wa(ee){return ee.endAngle}function Mo(ee){return ee&&ee.padAngle}function qa(ee,ce,Ae,Oe){return(ee-Ae)*ce-(ce-Oe)*ee>0?0:1}function Fa(ee,ce,Ae,Oe,Fe){var Ue=ee[0]-ce[0],Ge=ee[1]-ce[1],Xe=(Fe?Oe:-Oe)/Math.sqrt(Ue*Ue+Ge*Ge),rt=Xe*Ge,ut=-Xe*Ue,Ct=ee[0]+rt,Rt=ee[1]+ut,Ft=ce[0]+rt,Yt=ce[1]+ut,cn=(Ct+Ft)/2,Wt=(Rt+Yt)/2,tn=Ft-Ct,$t=Yt-Rt,_n=tn*tn+$t*$t,dn=Ae-Oe,Qt=Ct*Yt-Ft*Rt,Cn=($t<0?-1:1)*Math.sqrt(Math.max(0,dn*dn*_n-Qt*Qt)),Dn=(Qt*$t-tn*Cn)/_n,Jn=(-Qt*tn-$t*Cn)/_n,Kn=(Qt*$t+tn*Cn)/_n,vr=(-Qt*tn+$t*Cn)/_n,yr=Dn-cn,fr=Jn-Wt,gr=Kn-cn,Sr=vr-Wt;return yr*yr+fr*fr>gr*gr+Sr*Sr&&(Dn=Kn,Jn=vr),[[Dn-rt,Jn-ut],[Dn*Ae/dn,Jn*Ae/dn]]}function Go(){return!0}function $i(ee){var ce=Rn,Ae=qn,Oe=Go,Fe=ai,Ue=Fe.key,Ge=.7;function Xe(rt){var ut,Ct=[],Rt=[],Ft=-1,Yt=rt.length,cn=Bn(ce),Wt=Bn(Ae);function tn(){Ct.push("M",Fe(ee(Rt),Ge))}for(;++Ft<Yt;)Oe.call(this,ut=rt[Ft],Ft)?Rt.push([+cn.call(this,ut,Ft),+Wt.call(this,ut,Ft)]):Rt.length&&(tn(),Rt=[]);return Rt.length&&tn(),Ct.length?Ct.join(""):null}return Xe.x=function(rt){return arguments.length?(ce=rt,Xe):ce},Xe.y=function(rt){return arguments.length?(Ae=rt,Xe):Ae},Xe.defined=function(rt){return arguments.length?(Oe=rt,Xe):Oe},Xe.interpolate=function(rt){return arguments.length?(Ue="function"==typeof rt?Fe=rt:(Fe=Ba.get(rt)||ai).key,Xe):Ue},Xe.tension=function(rt){return arguments.length?(Ge=rt,Xe):Ge},Xe}l.svg.line=function(){return $i(j)};var Ba=l.map({linear:ai,"linear-closed":bs,step:function(ee){for(var ce=0,Ae=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++ce<Ae;)Fe.push("H",(Oe[0]+(Oe=ee[ce])[0])/2,"V",Oe[1]);return Ae>1&&Fe.push("H",Oe[0]),Fe.join("")},"step-before":La,"step-after":Na,basis:ii,"basis-open":function(ee){if(ee.length<4)return ai(ee);for(var ce,Ae=[],Oe=-1,Fe=ee.length,Ue=[0],Ge=[0];++Oe<3;)Ue.push((ce=ee[Oe])[0]),Ge.push(ce[1]);for(Ae.push(Hi(eo,Ue)+","+Hi(eo,Ge)),--Oe;++Oe<Fe;)ce=ee[Oe],Ue.shift(),Ue.push(ce[0]),Ge.shift(),Ge.push(ce[1]),So(Ae,Ue,Ge);return Ae.join("")},"basis-closed":function(ee){for(var ce,Ae,Oe=-1,Fe=ee.length,Ue=Fe+4,Ge=[],Xe=[];++Oe<4;)Ge.push((Ae=ee[Oe%Fe])[0]),Xe.push(Ae[1]);for(ce=[Hi(eo,Ge),",",Hi(eo,Xe)],--Oe;++Oe<Ue;)Ae=ee[Oe%Fe],Ge.shift(),Ge.push(Ae[0]),Xe.shift(),Xe.push(Ae[1]),So(ce,Ge,Xe);return ce.join("")},bundle:function(ee,ce){var Ae=ee.length-1;if(Ae)for(var Oe,Fe,Ue=ee[0][0],Ge=ee[0][1],Xe=ee[Ae][0]-Ue,rt=ee[Ae][1]-Ge,ut=-1;++ut<=Ae;)(Oe=ee[ut])[0]=ce*Oe[0]+(1-ce)*(Ue+(Fe=ut/Ae)*Xe),Oe[1]=ce*Oe[1]+(1-ce)*(Ge+Fe*rt);return ii(ee)},cardinal:function(ee,ce){return ee.length<3?ai(ee):ee[0]+Qa(ee,ha(ee,ce))},"cardinal-open":function(ee,ce){return ee.length<4?ai(ee):ee[1]+Qa(ee.slice(1,-1),ha(ee,ce))},"cardinal-closed":function(ee,ce){return ee.length<3?bs(ee):ee[0]+Qa((ee.push(ee[0]),ee),ha([ee[ee.length-2]].concat(ee,[ee[1]]),ce))},monotone:function(ee){return ee.length<3?ai(ee):ee[0]+Qa(ee,function(ce){for(var Ae,Oe,Fe,Ue,Ge=[],Xe=function(Ct){for(var Rt=0,Ft=Ct.length-1,Yt=[],cn=Ct[0],Wt=Ct[1],tn=Yt[0]=ho(cn,Wt);++Rt<Ft;)Yt[Rt]=(tn+(tn=ho(cn=Wt,Wt=Ct[Rt+1])))/2;return Yt[Rt]=tn,Yt}(ce),rt=-1,ut=ce.length-1;++rt<ut;)Ae=ho(ce[rt],ce[rt+1]),y(Ae)<Pt?Xe[rt]=Xe[rt+1]=0:(Ue=(Oe=Xe[rt]/Ae)*Oe+(Fe=Xe[rt+1]/Ae)*Fe)>9&&(Ue=3*Ae/Math.sqrt(Ue),Xe[rt]=Ue*Oe,Xe[rt+1]=Ue*Fe);for(rt=-1;++rt<=ut;)Ue=(ce[Math.min(ut,rt+1)][0]-ce[Math.max(0,rt-1)][0])/(6*(1+Xe[rt]*Xe[rt])),Ge.push([Ue||0,Xe[rt]*Ue||0]);return Ge}(ee))}});function ai(ee){return ee.length>1?ee.join("L"):ee+"Z"}function bs(ee){return ee.join("L")+"Z"}function La(ee){for(var ce=0,Ae=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++ce<Ae;)Fe.push("V",(Oe=ee[ce])[1],"H",Oe[0]);return Fe.join("")}function Na(ee){for(var ce=0,Ae=ee.length,Oe=ee[0],Fe=[Oe[0],",",Oe[1]];++ce<Ae;)Fe.push("H",(Oe=ee[ce])[0],"V",Oe[1]);return Fe.join("")}function Qa(ee,ce){if(ce.length<1||ee.length!=ce.length&&ee.length!=ce.length+2)return ai(ee);var Ae=ee.length!=ce.length,Oe="",Fe=ee[0],Ue=ee[1],Ge=ce[0],Xe=Ge,rt=1;if(Ae&&(Oe+="Q"+(Ue[0]-2*Ge[0]/3)+","+(Ue[1]-2*Ge[1]/3)+","+Ue[0]+","+Ue[1],Fe=ee[1],rt=2),ce.length>1){Ue=ee[rt],rt++,Oe+="C"+(Fe[0]+Ge[0])+","+(Fe[1]+Ge[1])+","+(Ue[0]-(Xe=ce[1])[0])+","+(Ue[1]-Xe[1])+","+Ue[0]+","+Ue[1];for(var ut=2;ut<ce.length;ut++,rt++)Oe+="S"+((Ue=ee[rt])[0]-(Xe=ce[ut])[0])+","+(Ue[1]-Xe[1])+","+Ue[0]+","+Ue[1]}if(Ae){var Ct=ee[rt];Oe+="Q"+(Ue[0]+2*Xe[0]/3)+","+(Ue[1]+2*Xe[1]/3)+","+Ct[0]+","+Ct[1]}return Oe}function ha(ee,ce){for(var Ae,Oe=[],Fe=(1-ce)/2,Ue=ee[0],Ge=ee[1],Xe=1,rt=ee.length;++Xe<rt;)Ae=Ue,Ue=Ge,Oe.push([Fe*((Ge=ee[Xe])[0]-Ae[0]),Fe*(Ge[1]-Ae[1])]);return Oe}function ii(ee){if(ee.length<3)return ai(ee);var ce=1,Ae=ee.length,Oe=ee[0],Fe=Oe[0],Ue=Oe[1],Ge=[Fe,Fe,Fe,(Oe=ee[1])[0]],Xe=[Ue,Ue,Ue,Oe[1]],rt=[Fe,",",Ue,"L",Hi(eo,Ge),",",Hi(eo,Xe)];for(ee.push(ee[Ae-1]);++ce<=Ae;)Oe=ee[ce],Ge.shift(),Ge.push(Oe[0]),Xe.shift(),Xe.push(Oe[1]),So(rt,Ge,Xe);return ee.pop(),rt.push("L",Oe),rt.join("")}function Hi(ee,ce){return ee[0]*ce[0]+ee[1]*ce[1]+ee[2]*ce[2]+ee[3]*ce[3]}Ba.forEach(function(ee,ce){ce.key=ee,ce.closed=/-closed$/.test(ee)});var Ga=[0,2/3,1/3,0],pa=[0,1/3,2/3,0],eo=[0,1/6,2/3,1/6];function So(ee,ce,Ae){ee.push("C",Hi(Ga,ce),",",Hi(Ga,Ae),",",Hi(pa,ce),",",Hi(pa,Ae),",",Hi(eo,ce),",",Hi(eo,Ae))}function ho(ee,ce){return(ce[1]-ee[1])/(ce[0]-ee[0])}function Qi(ee){for(var ce,Ae,Oe,Fe=-1,Ue=ee.length;++Fe<Ue;)Ae=(ce=ee[Fe])[0],Oe=ce[1]-Dt,ce[0]=Ae*Math.cos(Oe),ce[1]=Ae*Math.sin(Oe);return ee}function ja(ee){var ce=Rn,Ae=Rn,Oe=0,Fe=qn,Ue=Go,Ge=ai,Xe=Ge.key,rt=Ge,ut="L",Ct=.7;function Rt(Ft){var Yt,cn,Wt,tn=[],$t=[],_n=[],dn=-1,Qt=Ft.length,Cn=Bn(ce),Dn=Bn(Oe),Jn=ce===Ae?function(){return cn}:Bn(Ae),Kn=Oe===Fe?function(){return Wt}:Bn(Fe);function vr(){tn.push("M",Ge(ee(_n),Ct),ut,rt(ee($t.reverse()),Ct),"Z")}for(;++dn<Qt;)Ue.call(this,Yt=Ft[dn],dn)?($t.push([cn=+Cn.call(this,Yt,dn),Wt=+Dn.call(this,Yt,dn)]),_n.push([+Jn.call(this,Yt,dn),+Kn.call(this,Yt,dn)])):$t.length&&(vr(),$t=[],_n=[]);return $t.length&&vr(),tn.length?tn.join(""):null}return Rt.x=function(Ft){return arguments.length?(ce=Ae=Ft,Rt):Ae},Rt.x0=function(Ft){return arguments.length?(ce=Ft,Rt):ce},Rt.x1=function(Ft){return arguments.length?(Ae=Ft,Rt):Ae},Rt.y=function(Ft){return arguments.length?(Oe=Fe=Ft,Rt):Fe},Rt.y0=function(Ft){return arguments.length?(Oe=Ft,Rt):Oe},Rt.y1=function(Ft){return arguments.length?(Fe=Ft,Rt):Fe},Rt.defined=function(Ft){return arguments.length?(Ue=Ft,Rt):Ue},Rt.interpolate=function(Ft){return arguments.length?(Xe="function"==typeof Ft?Ge=Ft:(Ge=Ba.get(Ft)||ai).key,rt=Ge.reverse||Ge,ut=Ge.closed?"M":"L",Rt):Xe},Rt.tension=function(Ft){return arguments.length?(Ct=Ft,Rt):Ct},Rt}function Lr(ee){return ee.source}function Ir(ee){return ee.target}function is(ee){return ee.radius}function po(ee){return[ee.x,ee.y]}function Za(ee){return function(){var ce=ee.apply(this,arguments),Ae=ce[0],Oe=ce[1]-Dt;return[Ae*Math.cos(Oe),Ae*Math.sin(Oe)]}}function ea(){return 64}function zs(){return"circle"}function da(ee){var ce=Math.sqrt(ee/St);return"M0,"+ce+"A"+ce+","+ce+" 0 1,1 0,"+-ce+"A"+ce+","+ce+" 0 1,1 0,"+ce+"Z"}l.svg.line.radial=function(){var ee=$i(Qi);return ee.radius=ee.x,delete ee.x,ee.angle=ee.y,delete ee.y,ee},La.reverse=Na,Na.reverse=La,l.svg.area=function(){return ja(j)},l.svg.area.radial=function(){var ee=ja(Qi);return ee.radius=ee.x,delete ee.x,ee.innerRadius=ee.x0,delete ee.x0,ee.outerRadius=ee.x1,delete ee.x1,ee.angle=ee.y,delete ee.y,ee.startAngle=ee.y0,delete ee.y0,ee.endAngle=ee.y1,delete ee.y1,ee},l.svg.chord=function(){var ee=Lr,ce=Ir,Ae=is,Oe=fo,Fe=wa;function Ue(ut,Ct){var Rt,Ft,Yt=Ge(this,ee,ut,Ct),cn=Ge(this,ce,ut,Ct);return"M"+Yt.p0+Xe(Yt.r,Yt.p1,Yt.a1-Yt.a0)+((Rt=Yt).a0==(Ft=cn).a0&&Rt.a1==Ft.a1?rt(0,0,0,Yt.p0):rt(0,0,0,cn.p0)+Xe(cn.r,cn.p1,cn.a1-cn.a0)+rt(0,0,0,Yt.p0))+"Z"}function Ge(ut,Ct,Rt,Ft){var Yt=Ct.call(ut,Rt,Ft),cn=Ae.call(ut,Yt,Ft),Wt=Oe.call(ut,Yt,Ft)-Dt,tn=Fe.call(ut,Yt,Ft)-Dt;return{r:cn,a0:Wt,a1:tn,p0:[cn*Math.cos(Wt),cn*Math.sin(Wt)],p1:[cn*Math.cos(tn),cn*Math.sin(tn)]}}function Xe(ut,Ct,Rt){return"A"+ut+","+ut+" 0 "+ +(Rt>St)+",1 "+Ct}function rt(ut,Ct,Rt,Ft){return"Q 0,0 "+Ft}return Ue.radius=function(ut){return arguments.length?(Ae=Bn(ut),Ue):Ae},Ue.source=function(ut){return arguments.length?(ee=Bn(ut),Ue):ee},Ue.target=function(ut){return arguments.length?(ce=Bn(ut),Ue):ce},Ue.startAngle=function(ut){return arguments.length?(Oe=Bn(ut),Ue):Oe},Ue.endAngle=function(ut){return arguments.length?(Fe=Bn(ut),Ue):Fe},Ue},l.svg.diagonal=function(){var ee=Lr,ce=Ir,Ae=po;function Oe(Fe,Ue){var Ge=ee.call(this,Fe,Ue),Xe=ce.call(this,Fe,Ue),rt=(Ge.y+Xe.y)/2,ut=[Ge,{x:Ge.x,y:rt},{x:Xe.x,y:rt},Xe];return"M"+(ut=ut.map(Ae))[0]+"C"+ut[1]+" "+ut[2]+" "+ut[3]}return Oe.source=function(Fe){return arguments.length?(ee=Bn(Fe),Oe):ee},Oe.target=function(Fe){return arguments.length?(ce=Bn(Fe),Oe):ce},Oe.projection=function(Fe){return arguments.length?(Ae=Fe,Oe):Ae},Oe},l.svg.diagonal.radial=function(){var ee=l.svg.diagonal(),ce=po,Ae=ee.projection;return ee.projection=function(Oe){return arguments.length?Ae(Za(ce=Oe)):ce},ee},l.svg.symbol=function(){var ee=zs,ce=ea;function Ae(Oe,Fe){return(as.get(ee.call(this,Oe,Fe))||da)(ce.call(this,Oe,Fe))}return Ae.type=function(Oe){return arguments.length?(ee=Bn(Oe),Ae):ee},Ae.size=function(Oe){return arguments.length?(ce=Bn(Oe),Ae):ce},Ae};var as=l.map({circle:da,cross:function(ee){var ce=Math.sqrt(ee/5)/2;return"M"+-3*ce+","+-ce+"H"+-ce+"V"+-3*ce+"H"+ce+"V"+-ce+"H"+3*ce+"V"+ce+"H"+ce+"V"+3*ce+"H"+-ce+"V"+ce+"H"+-3*ce+"Z"},diamond:function(ee){var ce=Math.sqrt(ee/(2*ui)),Ae=ce*ui;return"M0,"+-ce+"L"+Ae+",0 0,"+ce+" "+-Ae+",0Z"},square:function(ee){var ce=Math.sqrt(ee)/2;return"M"+-ce+","+-ce+"L"+ce+","+-ce+" "+ce+","+ce+" "+-ce+","+ce+"Z"},"triangle-down":function(ee){var ce=Math.sqrt(ee/go),Ae=ce*go/2;return"M0,"+Ae+"L"+ce+","+-Ae+" "+-ce+","+-Ae+"Z"},"triangle-up":function(ee){var ce=Math.sqrt(ee/go),Ae=ce*go/2;return"M0,"+-Ae+"L"+ce+","+Ae+" "+-ce+","+Ae+"Z"}});l.svg.symbolTypes=as.keys();var go=Math.sqrt(3),ui=Math.tan(30*Ye);se.transition=function(ee){for(var ce,Ae,Oe=$e||++bt,Fe=W(ee),Ue=[],Ge=ot||{time:Date.now(),ease:io,delay:0,duration:250},Xe=-1,rt=this.length;++Xe<rt;){Ue.push(ce=[]);for(var ut=this[Xe],Ct=-1,Rt=ut.length;++Ct<Rt;)(Ae=ut[Ct])&&G(Ae,Ct,Fe,Oe,Ge),ce.push(Ae)}return We(Ue,Fe,Oe)},se.interrupt=function(ee){return this.each(null==ee?gi:Rs(W(ee)))};var gi=Rs(W());function Rs(ee){return function(){var ce,Ae,Oe;(ce=this[ee])&&(Oe=ce[Ae=ce.active])&&(Oe.timer.c=null,Oe.timer.t=NaN,--ce.count?delete ce[Ae]:delete this[ee],ce.active+=.5,Oe.event&&Oe.event.interrupt.call(this,this.__data__,Oe.index))}}function We(ee,ce,Ae){return X(ee,ft),ee.namespace=ce,ee.id=Ae,ee}var $e,ot,ft=[],bt=0;function yt(ee,ce,Ae,Oe){var Fe=ee.id,Ue=ee.namespace;return De(ee,"function"==typeof Ae?function(Ge,Xe,rt){Ge[Ue][Fe].tween.set(ce,Oe(Ae.call(Ge,Ge.__data__,Xe,rt)))}:(Ae=Oe(Ae),function(Ge){Ge[Ue][Fe].tween.set(ce,Ae)}))}function F(ee){return null==ee&&(ee=""),function(){this.textContent=ee}}function W(ee){return null==ee?"__transition__":"__transition_"+ee+"__"}function G(ee,ce,Ae,Oe,Fe){var Ue,Ge,Xe,rt,ut,Ct=ee[Ae]||(ee[Ae]={active:0,count:0}),Rt=Ct[Oe];function Ft(cn){var Wt=Ct.active,tn=Ct[Wt];for(var $t in tn&&(tn.timer.c=null,tn.timer.t=NaN,--Ct.count,delete Ct[Wt],tn.event&&tn.event.interrupt.call(ee,ee.__data__,tn.index)),Ct)if(+$t<Oe){var _n=Ct[$t];_n.timer.c=null,_n.timer.t=NaN,--Ct.count,delete Ct[$t]}Ge.c=Yt,Gt(function(){return Ge.c&&Yt(cn||1)&&(Ge.c=null,Ge.t=NaN),1},0,Ue),Ct.active=Oe,Rt.event&&Rt.event.start.call(ee,ee.__data__,ce),ut=[],Rt.tween.forEach(function(dn,Qt){(Qt=Qt.call(ee,ee.__data__,ce))&&ut.push(Qt)}),rt=Rt.ease,Xe=Rt.duration}function Yt(cn){for(var Wt=cn/Xe,tn=rt(Wt),$t=ut.length;$t>0;)ut[--$t].call(ee,tn);if(Wt>=1)return Rt.event&&Rt.event.end.call(ee,ee.__data__,ce),--Ct.count?delete Ct[Oe]:delete ee[Ae],1}Rt||(Ge=Gt(function(cn){var Wt=Rt.delay;if(Ge.t=Wt+Ue,Wt<=cn)return Ft(cn-Wt);Ge.c=Ft},0,Ue=Fe.time),Rt=Ct[Oe]={tween:new w,time:Ue,timer:Ge,delay:Fe.delay,duration:Fe.duration,ease:Fe.ease,index:ce},Fe=null,++Ct.count)}ft.call=se.call,ft.empty=se.empty,ft.node=se.node,ft.size=se.size,l.transition=function(ee,ce){return ee&&ee.transition?$e?ee.transition(ce):ee:l.selection().transition(ee)},l.transition.prototype=ft,ft.select=function(ee){var ce,Ae,Oe,Fe=this.id,Ue=this.namespace,Ge=[];ee=pe(ee);for(var Xe=-1,rt=this.length;++Xe<rt;){Ge.push(ce=[]);for(var ut=this[Xe],Ct=-1,Rt=ut.length;++Ct<Rt;)(Oe=ut[Ct])&&(Ae=ee.call(Oe,Oe.__data__,Ct,Xe))?("__data__"in Oe&&(Ae.__data__=Oe.__data__),G(Ae,Ct,Ue,Fe,Oe[Ue][Fe]),ce.push(Ae)):ce.push(null)}return We(Ge,Ue,Fe)},ft.selectAll=function(ee){var ce,Ae,Oe,Fe,Ue,Ge=this.id,Xe=this.namespace,rt=[];ee=ke(ee);for(var ut=-1,Ct=this.length;++ut<Ct;)for(var Rt=this[ut],Ft=-1,Yt=Rt.length;++Ft<Yt;)if(Oe=Rt[Ft]){Ue=Oe[Xe][Ge],Ae=ee.call(Oe,Oe.__data__,Ft,ut),rt.push(ce=[]);for(var cn=-1,Wt=Ae.length;++cn<Wt;)(Fe=Ae[cn])&&G(Fe,cn,Xe,Ge,Ue),ce.push(Fe)}return We(rt,Xe,Ge)},ft.filter=function(ee){var ce,Ae,Oe=[];"function"!=typeof ee&&(ee=Re(ee));for(var Fe=0,Ue=this.length;Fe<Ue;Fe++){Oe.push(ce=[]);for(var Ge,Xe=0,rt=(Ge=this[Fe]).length;Xe<rt;Xe++)(Ae=Ge[Xe])&&ee.call(Ae,Ae.__data__,Xe,Fe)&&ce.push(Ae)}return We(Oe,this.namespace,this.id)},ft.tween=function(ee,ce){var Ae=this.id,Oe=this.namespace;return arguments.length<2?this.node()[Oe][Ae].tween.get(ee):De(this,null==ce?function(Fe){Fe[Oe][Ae].tween.remove(ee)}:function(Fe){Fe[Oe][Ae].tween.set(ee,ce)})},ft.attr=function(ee,ce){if(arguments.length<2){for(ce in ee)this.attr(ce,ee[ce]);return this}var Ae="transform"==ee?Zs:ba,Oe=l.ns.qualify(ee);function Fe(){this.removeAttribute(Oe)}function Ue(){this.removeAttributeNS(Oe.space,Oe.local)}function Ge(rt){return null==rt?Fe:(rt+="",function(){var ut,Ct=this.getAttribute(Oe);return Ct!==rt&&(ut=Ae(Ct,rt),function(Rt){this.setAttribute(Oe,ut(Rt))})})}function Xe(rt){return null==rt?Ue:(rt+="",function(){var ut,Ct=this.getAttributeNS(Oe.space,Oe.local);return Ct!==rt&&(ut=Ae(Ct,rt),function(Rt){this.setAttributeNS(Oe.space,Oe.local,ut(Rt))})})}return yt(this,"attr."+ee,ce,Oe.local?Xe:Ge)},ft.attrTween=function(ee,ce){var Ae=l.ns.qualify(ee);return this.tween("attr."+ee,Ae.local?function(Oe,Fe){var Ue=ce.call(this,Oe,Fe,this.getAttributeNS(Ae.space,Ae.local));return Ue&&function(Ge){this.setAttributeNS(Ae.space,Ae.local,Ue(Ge))}}:function(Oe,Fe){var Ue=ce.call(this,Oe,Fe,this.getAttribute(Ae));return Ue&&function(Ge){this.setAttribute(Ae,Ue(Ge))}})},ft.style=function(ee,ce,Ae){var Oe=arguments.length;if(Oe<3){if("string"!=typeof ee){for(Ae in Oe<2&&(ce=""),ee)this.style(Ae,ee[Ae],ce);return this}Ae=""}function Fe(){this.style.removeProperty(ee)}function Ue(Ge){return null==Ge?Fe:(Ge+="",function(){var Xe,rt=e(this).getComputedStyle(this,null).getPropertyValue(ee);return rt!==Ge&&(Xe=ba(rt,Ge),function(ut){this.style.setProperty(ee,Xe(ut),Ae)})})}return yt(this,"style."+ee,ce,Ue)},ft.styleTween=function(ee,ce,Ae){function Oe(Fe,Ue){var Ge=ce.call(this,Fe,Ue,e(this).getComputedStyle(this,null).getPropertyValue(ee));return Ge&&function(Xe){this.style.setProperty(ee,Ge(Xe),Ae)}}return arguments.length<3&&(Ae=""),this.tween("style."+ee,Oe)},ft.text=function(ee){return yt(this,"text",ee,F)},ft.remove=function(){var ee=this.namespace;return this.each("end.transition",function(){var ce;this[ee].count<2&&(ce=this.parentNode)&&ce.removeChild(this)})},ft.ease=function(ee){var ce=this.id,Ae=this.namespace;return arguments.length<1?this.node()[Ae][ce].ease:("function"!=typeof ee&&(ee=l.ease.apply(l,arguments)),De(this,function(Oe){Oe[Ae][ce].ease=ee}))},ft.delay=function(ee){var ce=this.id,Ae=this.namespace;return arguments.length<1?this.node()[Ae][ce].delay:De(this,"function"==typeof ee?function(Oe,Fe,Ue){Oe[Ae][ce].delay=+ee.call(Oe,Oe.__data__,Fe,Ue)}:(ee=+ee,function(Oe){Oe[Ae][ce].delay=ee}))},ft.duration=function(ee){var ce=this.id,Ae=this.namespace;return arguments.length<1?this.node()[Ae][ce].duration:De(this,"function"==typeof ee?function(Oe,Fe,Ue){Oe[Ae][ce].duration=Math.max(1,ee.call(Oe,Oe.__data__,Fe,Ue))}:(ee=Math.max(1,ee),function(Oe){Oe[Ae][ce].duration=ee}))},ft.each=function(ee,ce){var Ae=this.id,Oe=this.namespace;if(arguments.length<2){var Fe=ot,Ue=$e;try{$e=Ae,De(this,function(Ge,Xe,rt){ot=Ge[Oe][Ae],ee.call(Ge,Ge.__data__,Xe,rt)})}finally{ot=Fe,$e=Ue}}else De(this,function(Ge){var Xe=Ge[Oe][Ae];(Xe.event||(Xe.event=l.dispatch("start","end","interrupt"))).on(ee,ce)});return this},ft.transition=function(){for(var ee,ce,Ae,Oe=this.id,Fe=++bt,Ue=this.namespace,Ge=[],Xe=0,rt=this.length;Xe<rt;Xe++){Ge.push(ee=[]);for(var ut,Ct=0,Rt=(ut=this[Xe]).length;Ct<Rt;Ct++)(ce=ut[Ct])&&G(ce,Ct,Ue,Fe,{time:(Ae=ce[Ue][Oe]).time,ease:Ae.ease,delay:Ae.delay+Ae.duration,duration:Ae.duration}),ee.push(ce)}return We(Ge,Ue,Fe)},l.svg.axis=function(){var ee,ce=l.scale.linear(),Ae=te,Oe=6,Fe=6,Ue=3,Ge=[10],Xe=null;function rt(ut){ut.each(function(){var Ct,Rt=l.select(this),Ft=this.__chart__||ce,Yt=this.__chart__=ce.copy(),cn=Xe??(Yt.ticks?Yt.ticks.apply(Yt,Ge):Yt.domain()),Wt=ee??(Yt.tickFormat?Yt.tickFormat.apply(Yt,Ge):j),tn=Rt.selectAll(".tick").data(cn,Yt),$t=tn.enter().insert("g",".domain").attr("class","tick").style("opacity",Pt),_n=l.transition(tn.exit()).style("opacity",Pt).remove(),dn=l.transition(tn.order()).style("opacity",1),Qt=Math.max(Oe,0)+Ue,Cn=$a(Yt),Dn=Rt.selectAll(".domain").data([0]),Jn=(Dn.enter().append("path").attr("class","domain"),l.transition(Dn));$t.append("line"),$t.append("text");var Kn,vr,yr,fr,gr=$t.select("line"),Sr=dn.select("line"),Vr=tn.select("text").text(Wt),Hr=$t.select("text"),pr=dn.select("text"),Er="top"===Ae||"left"===Ae?-1:1;if("bottom"===Ae||"top"===Ae?(Ct=Ce,Kn="x",yr="y",vr="x2",fr="y2",Vr.attr("dy",Er<0?"0em":".71em").style("text-anchor","middle"),Jn.attr("d","M"+Cn[0]+","+Er*Fe+"V0H"+Cn[1]+"V"+Er*Fe)):(Ct=Be,Kn="y",yr="x",vr="y2",fr="x2",Vr.attr("dy",".32em").style("text-anchor",Er<0?"end":"start"),Jn.attr("d","M"+Er*Fe+","+Cn[0]+"H0V"+Cn[1]+"H"+Er*Fe)),gr.attr(fr,Er*Oe),Hr.attr(yr,Er*Qt),Sr.attr(vr,0).attr(fr,Er*Oe),pr.attr(Kn,0).attr(yr,Er*Qt),Yt.rangeBand){var Fr=Yt,Dr=Fr.rangeBand()/2;Ft=Yt=function(Yr){return Fr(Yr)+Dr}}else Ft.rangeBand?Ft=Yt:_n.call(Ct,Yt,Ft);$t.call(Ct,Ft,Yt),dn.call(Ct,Yt,Yt)})}return rt.scale=function(ut){return arguments.length?(ce=ut,rt):ce},rt.orient=function(ut){return arguments.length?(Ae=ut in ve?ut+"":te,rt):Ae},rt.ticks=function(){return arguments.length?(Ge=x(arguments),rt):Ge},rt.tickValues=function(ut){return arguments.length?(Xe=ut,rt):Xe},rt.tickFormat=function(ut){return arguments.length?(ee=ut,rt):ee},rt.tickSize=function(ut){var Ct=arguments.length;return Ct?(Oe=+ut,Fe=+arguments[Ct-1],rt):Oe},rt.innerTickSize=function(ut){return arguments.length?(Oe=+ut,rt):Oe},rt.outerTickSize=function(ut){return arguments.length?(Fe=+ut,rt):Fe},rt.tickPadding=function(ut){return arguments.length?(Ue=+ut,rt):Ue},rt.tickSubdivide=function(){return arguments.length&&rt},rt};var te="bottom",ve={top:1,right:1,bottom:1,left:1};function Ce(ee,ce,Ae){ee.attr("transform",function(Oe){var Fe=ce(Oe);return"translate("+(isFinite(Fe)?Fe:Ae(Oe))+",0)"})}function Be(ee,ce,Ae){ee.attr("transform",function(Oe){var Fe=ce(Oe);return"translate(0,"+(isFinite(Fe)?Fe:Ae(Oe))+")"})}l.svg.brush=function(){var ee,ce,Ae=q(Ct,"brushstart","brush","brushend"),Oe=null,Fe=null,Ue=[0,0],Ge=[0,0],Xe=!0,rt=!0,ut=et[0];function Ct(Wt){Wt.each(function(){var tn=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),$t=tn.selectAll(".background").data([0]);$t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),tn.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var _n=tn.selectAll(".resize").data(ut,j);_n.exit().remove(),_n.enter().append("g").attr("class",function(Dn){return"resize "+Dn}).style("cursor",function(Dn){return qe[Dn]}).append("rect").attr("x",function(Dn){return/[ew]$/.test(Dn)?-3:null}).attr("y",function(Dn){return/^[ns]/.test(Dn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),_n.style("display",Ct.empty()?"none":null);var dn,Qt=l.transition(tn),Cn=l.transition($t);Oe&&(dn=$a(Oe),Cn.attr("x",dn[0]).attr("width",dn[1]-dn[0]),Ft(Qt)),Fe&&(dn=$a(Fe),Cn.attr("y",dn[0]).attr("height",dn[1]-dn[0]),Yt(Qt)),Rt(Qt)})}function Rt(Wt){Wt.selectAll(".resize").attr("transform",function(tn){return"translate("+Ue[+/e$/.test(tn)]+","+Ge[+/^s/.test(tn)]+")"})}function Ft(Wt){Wt.select(".extent").attr("x",Ue[0]),Wt.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function Yt(Wt){Wt.select(".extent").attr("y",Ge[0]),Wt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ge[1]-Ge[0])}function cn(){var Wt,tn,$t=this,_n=l.select(l.event.target),dn=Ae.of($t,arguments),Qt=l.select($t),Cn=_n.datum(),Dn=!/^(n|s)$/.test(Cn)&&Oe,Jn=!/^(e|w)$/.test(Cn)&&Fe,Kn=_n.classed("extent"),vr=dt($t),yr=l.mouse($t),fr=l.select(e($t)).on("keydown.brush",Vr).on("keyup.brush",Hr);if(l.event.changedTouches?fr.on("touchmove.brush",pr).on("touchend.brush",Fr):fr.on("mousemove.brush",pr).on("mouseup.brush",Fr),Qt.interrupt().selectAll("*").interrupt(),Kn)yr[0]=Ue[0]-yr[0],yr[1]=Ge[0]-yr[1];else if(Cn){var gr=+/w$/.test(Cn),Sr=+/^n/.test(Cn);tn=[Ue[1-gr]-yr[0],Ge[1-Sr]-yr[1]],yr[0]=Ue[gr],yr[1]=Ge[Sr]}else l.event.altKey&&(Wt=yr.slice());function Vr(){32==l.event.keyCode&&(Kn||(Wt=null,yr[0]-=Ue[1],yr[1]-=Ge[1],Kn=2),J())}function Hr(){32==l.event.keyCode&&2==Kn&&(yr[0]+=Ue[1],yr[1]+=Ge[1],Kn=0,J())}function pr(){var Dr=l.mouse($t),Yr=!1;tn&&(Dr[0]+=tn[0],Dr[1]+=tn[1]),Kn||(l.event.altKey?(Wt||(Wt=[(Ue[0]+Ue[1])/2,(Ge[0]+Ge[1])/2]),yr[0]=Ue[+(Dr[0]<Wt[0])],yr[1]=Ge[+(Dr[1]<Wt[1])]):Wt=null),Dn&&Er(Dr,Oe,0)&&(Ft(Qt),Yr=!0),Jn&&Er(Dr,Fe,1)&&(Yt(Qt),Yr=!0),Yr&&(Rt(Qt),dn({type:"brush",mode:Kn?"move":"resize"}))}function Er(Dr,Yr,Zr){var Qr,hi,_i=$a(Yr),vi=_i[0],ci=_i[1],pi=yr[Zr],mi=Zr?Ge:Ue,Ci=mi[1]-mi[0];if(Kn&&(vi-=pi,ci-=Ci+pi),Qr=(Zr?rt:Xe)?Math.max(vi,Math.min(ci,Dr[Zr])):Dr[Zr],Kn?hi=(Qr+=pi)+Ci:(Wt&&(pi=Math.max(vi,Math.min(ci,2*Wt[Zr]-Qr))),pi<Qr?(hi=Qr,Qr=pi):hi=pi),mi[0]!=Qr||mi[1]!=hi)return Zr?ce=null:ee=null,mi[0]=Qr,mi[1]=hi,!0}function Fr(){pr(),Qt.style("pointer-events","all").selectAll(".resize").style("display",Ct.empty()?"none":null),l.select("body").style("cursor",null),fr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),vr(),dn({type:"brushend"})}Qt.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",_n.style("cursor")),dn({type:"brushstart"}),pr()}return Ct.event=function(Wt){Wt.each(function(){var tn=Ae.of(this,arguments),$t={x:Ue,y:Ge,i:ee,j:ce},_n=this.__chart__||$t;this.__chart__=$t,$e?l.select(this).transition().each("start.brush",function(){ee=_n.i,ce=_n.j,Ue=_n.x,Ge=_n.y,tn({type:"brushstart"})}).tween("brush:brush",function(){var dn=Ea(Ue,$t.x),Qt=Ea(Ge,$t.y);return ee=ce=null,function(Cn){Ue=$t.x=dn(Cn),Ge=$t.y=Qt(Cn),tn({type:"brush",mode:"resize"})}}).each("end.brush",function(){ee=$t.i,ce=$t.j,tn({type:"brush",mode:"resize"}),tn({type:"brushend"})}):(tn({type:"brushstart"}),tn({type:"brush",mode:"resize"}),tn({type:"brushend"}))})},Ct.x=function(Wt){return arguments.length?(ut=et[!(Oe=Wt)<<1|!Fe],Ct):Oe},Ct.y=function(Wt){return arguments.length?(ut=et[!Oe<<1|!(Fe=Wt)],Ct):Fe},Ct.clamp=function(Wt){return arguments.length?(Oe&&Fe?(Xe=!!Wt[0],rt=!!Wt[1]):Oe?Xe=!!Wt:Fe&&(rt=!!Wt),Ct):Oe&&Fe?[Xe,rt]:Oe?Xe:Fe?rt:null},Ct.extent=function(Wt){var tn,$t,_n,dn,Qt;return arguments.length?(Oe&&(tn=Wt[0],$t=Wt[1],Fe&&(tn=tn[0],$t=$t[0]),ee=[tn,$t],Oe.invert&&(tn=Oe(tn),$t=Oe($t)),$t<tn&&(Qt=tn,tn=$t,$t=Qt),tn==Ue[0]&&$t==Ue[1]||(Ue=[tn,$t])),Fe&&(_n=Wt[0],dn=Wt[1],Oe&&(_n=_n[1],dn=dn[1]),ce=[_n,dn],Fe.invert&&(_n=Fe(_n),dn=Fe(dn)),dn<_n&&(Qt=_n,_n=dn,dn=Qt),_n==Ge[0]&&dn==Ge[1]||(Ge=[_n,dn])),Ct):(Oe&&(ee?(tn=ee[0],$t=ee[1]):(tn=Ue[0],$t=Ue[1],Oe.invert&&(tn=Oe.invert(tn),$t=Oe.invert($t)),$t<tn&&(Qt=tn,tn=$t,$t=Qt))),Fe&&(ce?(_n=ce[0],dn=ce[1]):(_n=Ge[0],dn=Ge[1],Fe.invert&&(_n=Fe.invert(_n),dn=Fe.invert(dn)),dn<_n&&(Qt=_n,_n=dn,dn=Qt))),Oe&&Fe?[[tn,_n],[$t,dn]]:Oe?[tn,$t]:Fe&&[_n,dn])},Ct.clear=function(){return Ct.empty()||(Ue=[0,0],Ge=[0,0],ee=ce=null),Ct},Ct.empty=function(){return!!Oe&&Ue[0]==Ue[1]||!!Fe&&Ge[0]==Ge[1]},l.rebind(Ct,Ae,"on")};var qe={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},et=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function vt(ee){return JSON.parse(ee.responseText)}function xt(ee){var ce=p.createRange();return ce.selectNode(p.body),ce.createContextualFragment(ee.responseText)}l.text=er(function(ee){return ee.responseText}),l.json=function(ee,ce){return Xn(ee,"application/json",vt,ce)},l.html=function(ee,ce){return Xn(ee,"text/html",xt,ce)},l.xml=er(function(ee){return ee.responseXML}),void 0===(k="function"==typeof(M=l)?M.call(I,t,I,$):M)||($.exports=k)}).apply(self)},88294:function($,I,t){"use strict";$.exports=t(62849)},62849:function($,I,t){"use strict";var M=t(91358),k=t(53435),l=t(18863),T=t(21527),x=t(71299),p=t(46775),s=t(30120),e=t(64941),o=t(90660),r=t(27084);function n(a,i){for(var c=i[0],h=i[1],f=1/(i[2]-c),b=1/(i[3]-h),v=new Array(a.length),g=0,y=a.length/2;g<y;g++)v[2*g]=k((a[2*g]-c)*f,0,1),v[2*g+1]=k((a[2*g+1]-h)*b,0,1);return v}$.exports=function(a,i){i||(i={}),a=s(a,"float64"),i=x(i,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=p(i.maxDepth,255),h=p(i.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var f,b=n(a,h),v=a.length>>>1;i.dtype||(i.dtype="array"),"string"==typeof i.dtype?f=new(o(i.dtype))(v):i.dtype&&(f=i.dtype,Array.isArray(f)&&(f.length=v));for(var g=0;g<v;++g)f[g]=g;var y=[],d=[],m=[],w=[];!function j(R,V,D,B,N,U){if(!B.length)return null;var J=y[N]||(y[N]=[]),Y=m[N]||(m[N]=[]),q=d[N]||(d[N]=[]),H=J.length;if(++N>c||U>1073741824){for(var X=0;X<B.length;X++)J.push(B[X]),Y.push(U),q.push(null,null,null,null);return H}if(J.push(B[0]),Y.push(U),B.length<=1)return q.push(null,null,null,null),H;for(var Q=.5*D,ne=R+Q,re=V+Q,ae=[],se=[],pe=[],ke=[],me=1,le=B.length;me<le;me++){var ue=B[me],de=b[2*ue+1];b[2*ue]<ne?de<re?ae.push(ue):se.push(ue):de<re?pe.push(ue):ke.push(ue)}return q.push(j(R,V,Q,ae,N,U<<=2),j(R,re,Q,se,N,U+1),j(ne,V,Q,pe,N,U+2),j(ne,re,Q,ke,N,U+3)),H}(0,0,1,f,0,1);for(var u=0,S=0;S<y.length;S++){var _=y[S];if(f.set)f.set(_,u);else for(var E=0,L=_.length;E<L;E++)f[E+u]=_[E];var C=u+y[S].length;w[S]=[u,C],u=C}return f.range=function(){for(var j,R=[],V=arguments.length;V--;)R[V]=arguments[V];if(e(R[R.length-1])){var D=R.pop();R.length||null==D.x&&null==D.l&&null==D.left||(R=[D],j={}),j=x(D,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else j={};R.length||(R=h);var B,N=l.apply(void 0,R),U=[Math.min(N.x,N.x+N.width),Math.min(N.y,N.y+N.height),Math.max(N.x,N.x+N.width),Math.max(N.y,N.y+N.height)],J=U[0],Y=U[1],q=U[2],H=U[3],X=n([J,Y,q,H],h),Q=X[0],ne=X[1],re=X[2],ae=X[3],se=p(j.level,y.length);if(null!=j.d&&("number"==typeof j.d?B=[j.d,j.d]:j.d.length&&(B=j.d),se=Math.min(Math.max(Math.ceil(-r(Math.abs(B[0])/(h[2]-h[0]))),Math.ceil(-r(Math.abs(B[1])/(h[3]-h[1])))),se)),se=Math.min(se,y.length),j.lod)return P(Q,ne,re,ae,se);var pe=[];function ke(le,ue,Ee,de,xe,Te){if(null!==xe&&null!==Te&&!(Q>le+Ee||ne>ue+Ee||re<le||ae<ue||de>=se||xe===Te)){var we=y[de];void 0===Te&&(Te=we.length);for(var K=xe;K<Te;K++){var oe=we[K],he=a[2*oe],ye=a[2*oe+1];he>=J&&he<=q&&ye>=Y&&ye<=H&&pe.push(oe)}var Me=d[de],Re=Me[4*xe+0],Pe=Me[4*xe+1],De=Me[4*xe+2],fe=Me[4*xe+3],ge=me(Me,xe+1),be=.5*Ee,Ie=de+1;ke(le,ue,be,Ie,Re,Pe||De||fe||ge),ke(le,ue+be,be,Ie,Pe,De||fe||ge),ke(le+be,ue,be,Ie,De,fe||ge),ke(le+be,ue+be,be,Ie,fe,ge)}}function me(le,ue){for(var Ee=null,de=0;null===Ee;)if(Ee=le[4*ue+de],++de>le.length)return null;return Ee}return ke(0,0,1,0,0,1),pe},f;function P(j,R,V,D,B){for(var N=[],U=0;U<B;U++){var J=m[U],Y=w[U][0],q=z(j,R,U),H=z(V,D,U),X=M.ge(J,q),Q=M.gt(J,H,X,J.length-1);N[U]=[X+Y,Q+Y]}return N}function z(j,R,V){for(var D=1,B=.5,N=.5,U=.5,J=0;J<V;J++)D<<=2,D+=j<B?R<N?0:1:R<N?2:3,U*=.5,B+=j<B?-U:U,N+=R<N?-U:U;return D}}},30774:function($,I,t){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var M=t(60302),k=6378137;function l(p){var s=0;if(p&&p.length>0){s+=Math.abs(T(p[0]));for(var e=1;e<p.length;e++)s-=Math.abs(T(p[e]))}return s}function T(p){var s,e,o,r,n,a,i=0,c=p.length;if(c>2){for(a=0;a<c;a++)a===c-2?(o=c-2,r=c-1,n=0):a===c-1?(o=c-1,r=0,n=1):(o=a,r=a+1,n=a+2),s=p[o],e=p[r],i+=(x(p[n][0])-x(s[0]))*Math.sin(x(e[1]));i=i*k*k/2}return i}function x(p){return p*Math.PI/180}I.default=function(p){return M.geomReduce(p,function(s,e){return s+function(o){var r,n=0;switch(o.type){case"Polygon":return l(o.coordinates);case"MultiPolygon":for(r=0;r<o.coordinates.length;r++)n+=l(o.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}},23132:function($,I){"use strict";function t(a,i,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function M(a,i,c){if(void 0===c&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:a},i,c)}function k(a,i,c){void 0===c&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:a},i,c)}function T(a,i){void 0===i&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return void 0===c&&(c={}),t({type:"MultiLineString",coordinates:a},i,c)}function p(a,i,c){return void 0===c&&(c={}),t({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return void 0===c&&(c={}),t({type:"MultiPolygon",coordinates:a},i,c)}function e(a,i){void 0===i&&(i="kilometers");var c=I.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){void 0===i&&(i="kilometers");var c=I.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=6371008.8,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:1.0936*I.earthRadius},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:1.0936133},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=t,I.geometry=function(a,i,c){switch(void 0===c&&(c={}),a){case"Point":return M(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return p(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},I.point=M,I.points=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return M(h,i)}),c)},I.polygon=k,I.polygons=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,i)}),c)},I.lineString=l,I.lineStrings=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return l(h,i)}),c)},I.featureCollection=T,I.multiLineString=x,I.multiPoint=p,I.multiPolygon=s,I.geometryCollection=function(a,i,c){return void 0===c&&(c={}),t({type:"GeometryCollection",geometries:a},i,c)},I.round=function(a,i){if(void 0===i&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},I.radiansToLength=e,I.lengthToRadians=o,I.lengthToDegrees=function(a,i){return r(o(a,i))},I.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},I.radiansToDegrees=r,I.degreesToRadians=function(a){return a%360*Math.PI/180},I.convertLength=function(a,i,c){if(void 0===i&&(i="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return e(o(a,i),c)},I.convertArea=function(a,i,c){if(void 0===i&&(i="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=I.areaFactors[i];if(!h)throw new Error("invalid original units");var f=I.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},I.isNumber=n,I.isObject=function(a){return!!a&&a.constructor===Object},I.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},I.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},60302:function($,I,t){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var M=t(23132);function k(o,r,n){if(null!==o)for(var a,i,c,h,f,b,v,g,y=0,d=0,m=o.type,w="FeatureCollection"===m,u="Feature"===m,S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&"GeometryCollection"===v.type)?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if(null!==(h=g?v.geometries[E]:v)){b=h.coordinates;var P=h.type;switch(y=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===r(b,d,_,L,C))return!1;d++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(!1===r(b[a],d,_,L,C))return!1;d++,"MultiPoint"===P&&L++}"LineString"===P&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(!1===r(b[a][i],d,_,L,C))return!1;d++}"MultiLineString"===P&&L++,"Polygon"===P&&C++}"Polygon"===P&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(!1===r(b[a][i][c],d,_,L,C))return!1;d++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===k(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&!1!==r(o.features[n].properties,n);n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if("Feature"===o.type)r(o,0);else if("FeatureCollection"===o.type)for(var n=0;n<o.features.length&&!1!==r(o.features[n],n);n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,d=0,m="FeatureCollection"===o.type,w="Feature"===o.type,u=m?o.features.length:1;for(n=0;n<u;n++){for(v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!(f=m?o.features[n].geometry:w?o.geometry:o)&&"GeometryCollection"===f.type)?f.geometries.length:1,i=0;i<h;i++)if(null!==(c=b?f.geometries[i]:f))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,d,v,g,y))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],d,v,g,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,d,v,g,y))return!1;d++}}function p(o,r){x(o,function(n,a,i,c,h){var f,b=null===n?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return!1!==r(M.feature(n,i,{bbox:c,id:h}),a,0)&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++)if(!1===r(M.feature({type:f,coordinates:n.coordinates[v]},i),a,v))return!1})}function s(o,r){p(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var f,b=0,v=0,g=0;return!1!==k(n,function(y,d,m,w,u){if(void 0===f||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=M.lineString([f,y],n.properties);if(!1===r(S,a,i,u,c))return!1;c++,f=y})&&void 0}}})}function e(o,r){if(!o)throw new Error("geojson is required");p(o,function(n,a,i){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,i,0,0))return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(!1===r(M.lineString(h[f],n.properties),a,i,f))return!1}}})}I.coordEach=k,I.coordReduce=function(o,r,n,a){var i=n;return k(o,function(c,h,f,b,v){i=0===h&&void 0===n?c:r(i,c,h,f,b,v)},a),i},I.propEach=l,I.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},I.featureEach=T,I.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},I.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},I.geomEach=x,I.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=0===c&&void 0===n?i:r(a,i,c,h,f,b)}),a},I.flattenEach=p,I.flattenReduce=function(o,r,n){var a=n;return p(o,function(i,c,h){a=0===c&&0===h&&void 0===n?i:r(a,i,c,h)}),a},I.segmentEach=s,I.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=!1===i&&void 0===n?c:r(a,c,h,f,b,v),i=!0}),a},I.lineEach=e,I.lineReduce=function(o,r,n){var a=n;return e(o,function(i,c,h,f){a=0===c&&void 0===n?i:r(a,i,c,h,f)}),a},I.findSegment=function(o,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),M.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),M.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),M.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),M.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},I.findPoint=function(o,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var b=n.coordinates;switch(n.type){case"Point":return M.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),M.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),M.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),M.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),M.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),M.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},85268:function($,I,t){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var M=t(27138);function k(l){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(l,function(x){T[0]>x[0]&&(T[0]=x[0]),T[1]>x[1]&&(T[1]=x[1]),T[2]<x[0]&&(T[2]=x[0]),T[3]<x[1]&&(T[3]=x[1])}),T}k.default=k,I.default=k},94228:function($,I){"use strict";function t(a,i,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function M(a,i,c){if(void 0===c&&(c={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(a[0])||!n(a[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:a},i,c)}function k(a,i,c){void 0===c&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:a},i,c)}function T(a,i){void 0===i&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return void 0===c&&(c={}),t({type:"MultiLineString",coordinates:a},i,c)}function p(a,i,c){return void 0===c&&(c={}),t({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return void 0===c&&(c={}),t({type:"MultiPolygon",coordinates:a},i,c)}function e(a,i){void 0===i&&(i="kilometers");var c=I.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){void 0===i&&(i="kilometers");var c=I.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=6371008.8,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:1.0936*I.earthRadius},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:1.0936133},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=t,I.geometry=function(a,i,c){switch(void 0===c&&(c={}),a){case"Point":return M(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return p(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},I.point=M,I.points=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return M(h,i)}),c)},I.polygon=k,I.polygons=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,i)}),c)},I.lineString=l,I.lineStrings=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return l(h,i)}),c)},I.featureCollection=T,I.multiLineString=x,I.multiPoint=p,I.multiPolygon=s,I.geometryCollection=function(a,i,c){return void 0===c&&(c={}),t({type:"GeometryCollection",geometries:a},i,c)},I.round=function(a,i){if(void 0===i&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},I.radiansToLength=e,I.lengthToRadians=o,I.lengthToDegrees=function(a,i){return r(o(a,i))},I.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},I.radiansToDegrees=r,I.degreesToRadians=function(a){return a%360*Math.PI/180},I.convertLength=function(a,i,c){if(void 0===i&&(i="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return e(o(a,i),c)},I.convertArea=function(a,i,c){if(void 0===i&&(i="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=I.areaFactors[i];if(!h)throw new Error("invalid original units");var f=I.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},I.isNumber=n,I.isObject=function(a){return!!a&&a.constructor===Object},I.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},I.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")}},27138:function($,I,t){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var M=t(94228);function k(o,r,n){if(null!==o)for(var a,i,c,h,f,b,v,g,y=0,d=0,m=o.type,w="FeatureCollection"===m,u="Feature"===m,S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&"GeometryCollection"===v.type)?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if(null!==(h=g?v.geometries[E]:v)){b=h.coordinates;var P=h.type;switch(y=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===r(b,d,_,L,C))return!1;d++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(!1===r(b[a],d,_,L,C))return!1;d++,"MultiPoint"===P&&L++}"LineString"===P&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(!1===r(b[a][i],d,_,L,C))return!1;d++}"MultiLineString"===P&&L++,"Polygon"===P&&C++}"Polygon"===P&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(!1===r(b[a][i][c],d,_,L,C))return!1;d++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===k(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&!1!==r(o.features[n].properties,n);n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if("Feature"===o.type)r(o,0);else if("FeatureCollection"===o.type)for(var n=0;n<o.features.length&&!1!==r(o.features[n],n);n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,d=0,m="FeatureCollection"===o.type,w="Feature"===o.type,u=m?o.features.length:1;for(n=0;n<u;n++){for(v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!(f=m?o.features[n].geometry:w?o.geometry:o)&&"GeometryCollection"===f.type)?f.geometries.length:1,i=0;i<h;i++)if(null!==(c=b?f.geometries[i]:f))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,d,v,g,y))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],d,v,g,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,d,v,g,y))return!1;d++}}function p(o,r){x(o,function(n,a,i,c,h){var f,b=null===n?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return!1!==r(M.feature(n,i,{bbox:c,id:h}),a,0)&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++)if(!1===r(M.feature({type:f,coordinates:n.coordinates[v]},i),a,v))return!1})}function s(o,r){p(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var f,b=0,v=0,g=0;return!1!==k(n,function(y,d,m,w,u){if(void 0===f||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=M.lineString([f,y],n.properties);if(!1===r(S,a,i,u,c))return!1;c++,f=y})&&void 0}}})}function e(o,r){if(!o)throw new Error("geojson is required");p(o,function(n,a,i){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,i,0,0))return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(!1===r(M.lineString(h[f],n.properties),a,i,f))return!1}}})}I.coordEach=k,I.coordReduce=function(o,r,n,a){var i=n;return k(o,function(c,h,f,b,v){i=0===h&&void 0===n?c:r(i,c,h,f,b,v)},a),i},I.propEach=l,I.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},I.featureEach=T,I.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},I.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},I.geomEach=x,I.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=0===c&&void 0===n?i:r(a,i,c,h,f,b)}),a},I.flattenEach=p,I.flattenReduce=function(o,r,n){var a=n;return p(o,function(i,c,h){a=0===c&&0===h&&void 0===n?i:r(a,i,c,h)}),a},I.segmentEach=s,I.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=!1===i&&void 0===n?c:r(a,c,h,f,b,v),i=!0}),a},I.lineEach=e,I.lineReduce=function(o,r,n){var a=n;return e(o,function(i,c,h,f){a=0===c&&void 0===n?i:r(a,i,c,h,f)}),a},I.findSegment=function(o,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),M.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),M.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),M.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),M.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},I.findPoint=function(o,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var b=n.coordinates;switch(n.type){case"Point":return M.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),M.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),M.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),M.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),M.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),M.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},29261:function($,I,t){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var M=t(88553),k=t(64182);I.default=function(l,T){void 0===T&&(T={});var x=0,p=0,s=0;return M.coordEach(l,function(e){x+=e[0],p+=e[1],s++}),k.point([x/s,p/s],T.properties)}},64182:function($,I){"use strict";function t(a,i,c){void 0===c&&(c={});var h={type:"Feature"};return(0===c.id||c.id)&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.properties=i||{},h.geometry=a,h}function M(a,i,c){return void 0===c&&(c={}),t({type:"Point",coordinates:a},i,c)}function k(a,i,c){void 0===c&&(c={});for(var h=0,f=a;h<f.length;h++){var b=f[h];if(b.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<b[b.length-1].length;v++)if(b[b.length-1][v]!==b[0][v])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:a},i,c)}function l(a,i,c){if(void 0===c&&(c={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:a},i,c)}function T(a,i){void 0===i&&(i={});var c={type:"FeatureCollection"};return i.id&&(c.id=i.id),i.bbox&&(c.bbox=i.bbox),c.features=a,c}function x(a,i,c){return void 0===c&&(c={}),t({type:"MultiLineString",coordinates:a},i,c)}function p(a,i,c){return void 0===c&&(c={}),t({type:"MultiPoint",coordinates:a},i,c)}function s(a,i,c){return void 0===c&&(c={}),t({type:"MultiPolygon",coordinates:a},i,c)}function e(a,i){void 0===i&&(i="kilometers");var c=I.factors[i];if(!c)throw new Error(i+" units is invalid");return a*c}function o(a,i){void 0===i&&(i="kilometers");var c=I.factors[i];if(!c)throw new Error(i+" units is invalid");return a/c}function r(a){return a%(2*Math.PI)*180/Math.PI}function n(a){return!isNaN(a)&&null!==a&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(I,"__esModule",{value:!0}),I.earthRadius=6371008.8,I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1e3,kilometres:I.earthRadius/1e3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1e3*I.earthRadius,millimetres:1e3*I.earthRadius,nauticalmiles:I.earthRadius/1852,radians:1,yards:I.earthRadius/1.0936},I.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/I.earthRadius,yards:.91441111923921},I.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},I.feature=t,I.geometry=function(a,i,c){switch(void 0===c&&(c={}),a){case"Point":return M(i).geometry;case"LineString":return l(i).geometry;case"Polygon":return k(i).geometry;case"MultiPoint":return p(i).geometry;case"MultiLineString":return x(i).geometry;case"MultiPolygon":return s(i).geometry;default:throw new Error(a+" is invalid")}},I.point=M,I.points=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return M(h,i)}),c)},I.polygon=k,I.polygons=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return k(h,i)}),c)},I.lineString=l,I.lineStrings=function(a,i,c){return void 0===c&&(c={}),T(a.map(function(h){return l(h,i)}),c)},I.featureCollection=T,I.multiLineString=x,I.multiPoint=p,I.multiPolygon=s,I.geometryCollection=function(a,i,c){return void 0===c&&(c={}),t({type:"GeometryCollection",geometries:a},i,c)},I.round=function(a,i){if(void 0===i&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var c=Math.pow(10,i||0);return Math.round(a*c)/c},I.radiansToLength=e,I.lengthToRadians=o,I.lengthToDegrees=function(a,i){return r(o(a,i))},I.bearingToAzimuth=function(a){var i=a%360;return i<0&&(i+=360),i},I.radiansToDegrees=r,I.degreesToRadians=function(a){return a%360*Math.PI/180},I.convertLength=function(a,i,c){if(void 0===i&&(i="kilometers"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("length must be a positive number");return e(o(a,i),c)},I.convertArea=function(a,i,c){if(void 0===i&&(i="meters"),void 0===c&&(c="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=I.areaFactors[i];if(!h)throw new Error("invalid original units");var f=I.areaFactors[c];if(!f)throw new Error("invalid final units");return a/h*f},I.isNumber=n,I.isObject=function(a){return!!a&&a.constructor===Object},I.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(4!==a.length&&6!==a.length)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(i){if(!n(i))throw new Error("bbox must only contain numbers")})},I.validateId=function(a){if(!a)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof a))throw new Error("id must be a number or a string")},I.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},I.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},I.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},I.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},I.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},I.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},I.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function($,I,t){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var M=t(64182);function k(o,r,n){if(null!==o)for(var a,i,c,h,f,b,v,g,y=0,d=0,m=o.type,w="FeatureCollection"===m,u="Feature"===m,S=w?o.features.length:1,_=0;_<S;_++){f=(g=!!(v=w?o.features[_].geometry:u?o.geometry:o)&&"GeometryCollection"===v.type)?v.geometries.length:1;for(var E=0;E<f;E++){var L=0,C=0;if(null!==(h=g?v.geometries[E]:v)){b=h.coordinates;var P=h.type;switch(y=!n||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===r(b,d,_,L,C))return!1;d++,L++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(!1===r(b[a],d,_,L,C))return!1;d++,"MultiPoint"===P&&L++}"LineString"===P&&L++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(i=0;i<b[a].length-y;i++){if(!1===r(b[a][i],d,_,L,C))return!1;d++}"MultiLineString"===P&&L++,"Polygon"===P&&C++}"Polygon"===P&&L++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(C=0,i=0;i<b[a].length;i++){for(c=0;c<b[a][i].length-y;c++){if(!1===r(b[a][i][c],d,_,L,C))return!1;d++}C++}L++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(!1===k(h.geometries[a],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&!1!==r(o.features[n].properties,n);n++);break;case"Feature":r(o.properties,0)}}function T(o,r){if("Feature"===o.type)r(o,0);else if("FeatureCollection"===o.type)for(var n=0;n<o.features.length&&!1!==r(o.features[n],n);n++);}function x(o,r){var n,a,i,c,h,f,b,v,g,y,d=0,m="FeatureCollection"===o.type,w="Feature"===o.type,u=m?o.features.length:1;for(n=0;n<u;n++){for(v=m?o.features[n].properties:w?o.properties:{},g=m?o.features[n].bbox:w?o.bbox:void 0,y=m?o.features[n].id:w?o.id:void 0,h=(b=!!(f=m?o.features[n].geometry:w?o.geometry:o)&&"GeometryCollection"===f.type)?f.geometries.length:1,i=0;i<h;i++)if(null!==(c=b?f.geometries[i]:f))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(c,d,v,g,y))return!1;break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===r(c.geometries[a],d,v,g,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,d,v,g,y))return!1;d++}}function p(o,r){x(o,function(n,a,i,c,h){var f,b=null===n?null:n.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return!1!==r(M.feature(n,i,{bbox:c,id:h}),a,0)&&void 0}switch(b){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var v=0;v<n.coordinates.length;v++)if(!1===r(M.feature({type:f,coordinates:n.coordinates[v]},i),a,v))return!1})}function s(o,r){p(o,function(n,a,i){var c=0;if(n.geometry){var h=n.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var f,b=0,v=0,g=0;return!1!==k(n,function(y,d,m,w,u){if(void 0===f||a>b||w>v||u>g)return f=y,b=a,v=w,g=u,void(c=0);var S=M.lineString([f,y],n.properties);if(!1===r(S,a,i,u,c))return!1;c++,f=y})&&void 0}}})}function e(o,r){if(!o)throw new Error("geojson is required");p(o,function(n,a,i){if(null!==n.geometry){var h=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===r(n,a,i,0,0))return!1;break;case"Polygon":for(var f=0;f<h.length;f++)if(!1===r(M.lineString(h[f],n.properties),a,i,f))return!1}}})}I.coordEach=k,I.coordReduce=function(o,r,n,a){var i=n;return k(o,function(c,h,f,b,v){i=0===h&&void 0===n?c:r(i,c,h,f,b,v)},a),i},I.propEach=l,I.propReduce=function(o,r,n){var a=n;return l(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},I.featureEach=T,I.featureReduce=function(o,r,n){var a=n;return T(o,function(i,c){a=0===c&&void 0===n?i:r(a,i,c)}),a},I.coordAll=function(o){var r=[];return k(o,function(n){r.push(n)}),r},I.geomEach=x,I.geomReduce=function(o,r,n){var a=n;return x(o,function(i,c,h,f,b){a=0===c&&void 0===n?i:r(a,i,c,h,f,b)}),a},I.flattenEach=p,I.flattenReduce=function(o,r,n){var a=n;return p(o,function(i,c,h){a=0===c&&0===h&&void 0===n?i:r(a,i,c,h)}),a},I.segmentEach=s,I.segmentReduce=function(o,r,n){var a=n,i=!1;return s(o,function(c,h,f,b,v){a=!1===i&&void 0===n?c:r(a,c,h,f,b,v),i=!0}),a},I.lineEach=e,I.lineReduce=function(o,r,n){var a=n;return e(o,function(i,c,h,f){a=0===c&&void 0===n?i:r(a,i,c,h,f)}),a},I.findSegment=function(o,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.segmentIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var b=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=b.length+h-1),M.lineString([b[h],b[h+1]],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h-1),M.lineString([b[c][h],b[c][h+1]],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h-1),M.lineString([b[i][h],b[i][h+1]],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h-1),M.lineString([b[i][c][h],b[i][c][h+1]],f,r)}throw new Error("geojson is invalid")},I.findPoint=function(o,r){if(!M.isObject(r=r||{}))throw new Error("options is invalid");var n,a=r.featureIndex||0,i=r.multiFeatureIndex||0,c=r.geometryIndex||0,h=r.coordIndex||0,f=r.properties;switch(o.type){case"FeatureCollection":a<0&&(a=o.features.length+a),f=f||o.features[a].properties,n=o.features[a].geometry;break;case"Feature":f=f||o.properties,n=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=o;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var b=n.coordinates;switch(n.type){case"Point":return M.point(b,f,r);case"MultiPoint":return i<0&&(i=b.length+i),M.point(b[i],f,r);case"LineString":return h<0&&(h=b.length+h),M.point(b[h],f,r);case"Polygon":return c<0&&(c=b.length+c),h<0&&(h=b[c].length+h),M.point(b[c][h],f,r);case"MultiLineString":return i<0&&(i=b.length+i),h<0&&(h=b[i].length+h),M.point(b[i][h],f,r);case"MultiPolygon":return i<0&&(i=b.length+i),c<0&&(c=b[i].length+c),h<0&&(h=b[i][c].length-h),M.point(b[i][c][h],f,r)}throw new Error("geojson is invalid")}},65185:function($){$.exports=function(I){var t=0,M=0,k=0,l=0;return I.map(function(T){var x=(T=T.slice())[0],p=x.toUpperCase();if(x!=p)switch(T[0]=p,x){case"a":T[6]+=k,T[7]+=l;break;case"v":T[1]+=l;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=l}switch(p){case"Z":k=t,l=M;break;case"H":k=T[1];break;case"V":l=T[1];break;case"M":k=t=T[1],l=M=T[2];break;default:k=T[T.length-2],l=T[T.length-1]}return T})}},21527:function($){"use strict";$.exports=function(I,t){if(!I||null==I.length)throw Error("Argument should be an array");t=null==t?1:Math.floor(t);for(var M=Array(2*t),k=0;k<t;k++){for(var l=-1/0,T=1/0,x=k,p=I.length;x<p;x+=t)I[x]>l&&(l=I[x]),I[x]<T&&(T=I[x]);M[k]=T,M[t+k]=l}return M}},6851:function($){"use strict";$.exports=function(I,t,M){if("function"==typeof Array.prototype.findIndex)return I.findIndex(t,M);if("function"!=typeof t)throw new TypeError("predicate must be a function");var k=Object(I),l=k.length;if(0===l)return-1;for(var T=0;T<l;T++)if(t.call(M,k[T],T,k))return T;return-1}},54:function($,I,t){"use strict";var M=t(21527);$.exports=function(k,l,T){if(!k||null==k.length)throw Error("Argument should be an array");null==l&&(l=1),null==T&&(T=M(k,l));for(var x=0;x<l;x++){var p=T[l+x],s=T[x],e=x,o=k.length;if(p===1/0&&s===-1/0)for(e=x;e<o;e+=l)k[e]=k[e]===p?1:k[e]===s?0:.5;else if(p===1/0)for(e=x;e<o;e+=l)k[e]=k[e]===p?1:0;else if(s===-1/0)for(e=x;e<o;e+=l)k[e]=k[e]===s?0:1;else{var r=p-s;for(e=x;e<o;e+=l)isNaN(k[e])||(k[e]=0===r?.5:(k[e]-s)/r)}}return k}},57471:function($){$.exports=function(I,t){var M="number"==typeof I,k="number"==typeof t;M&&!k?(t=I,I=0):M||k||(I=0,t=0);var l=(t|=0)-(I|=0);if(l<0)throw new Error("array length must be positive");for(var T=new Array(l),x=0,p=I;x<l;x++,p++)T[x]=p;return T}},32791:function($,I,t){"use strict";var M=t(90386);function k(V){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(V)}var l,T,x=t(79616).codes,p=x.ERR_AMBIGUOUS_ARGUMENT,s=x.ERR_INVALID_ARG_TYPE,e=x.ERR_INVALID_ARG_VALUE,o=x.ERR_INVALID_RETURN_VALUE,r=x.ERR_MISSING_ARGS,n=t(73894),a=t(43827).inspect,i=t(43827).types,c=i.isPromise,h=i.isRegExp,f=Object.assign?Object.assign:t(73523).assign,b=Object.is?Object.is:t(64003);function v(){var V=t(74061);l=V.isDeepEqual,T=V.isDeepStrictEqual}var g=!1,y=$.exports=u,d={};function m(V){throw V.message instanceof Error?V.message:new n(V)}function w(V,D,B,N){if(!B){var U=!1;if(0===D)U=!0,N="No value argument passed to `assert.ok()`";else if(N instanceof Error)throw N;var J=new n({actual:B,expected:!0,message:N,operator:"==",stackStartFn:V});throw J.generatedMessage=U,J}}function u(){for(var V=arguments.length,D=new Array(V),B=0;B<V;B++)D[B]=arguments[B];w.apply(void 0,[u,D.length].concat(D))}y.fail=function V(D,B,N,U,J){var Y,q=arguments.length;if(0===q?Y="Failed":1===q?(N=D,D=void 0):(!1===g&&(g=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===q&&(U="!=")),N instanceof Error)throw N;var X={actual:D,expected:B,operator:void 0===U?"fail":U,stackStartFn:J||V};void 0!==N&&(X.message=N);var Q=new n(X);throw Y&&(Q.message=Y,Q.generatedMessage=!0),Q},y.AssertionError=n,y.ok=u,y.equal=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");D!=B&&m({actual:D,expected:B,message:N,operator:"==",stackStartFn:V})},y.notEqual=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");D==B&&m({actual:D,expected:B,message:N,operator:"!=",stackStartFn:V})},y.deepEqual=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),l(D,B)||m({actual:D,expected:B,message:N,operator:"deepEqual",stackStartFn:V})},y.notDeepEqual=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),l(D,B)&&m({actual:D,expected:B,message:N,operator:"notDeepEqual",stackStartFn:V})},y.deepStrictEqual=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),T(D,B)||m({actual:D,expected:B,message:N,operator:"deepStrictEqual",stackStartFn:V})},y.notDeepStrictEqual=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");void 0===l&&v(),T(D,B)&&m({actual:D,expected:B,message:N,operator:"notDeepStrictEqual",stackStartFn:V})},y.strictEqual=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");b(D,B)||m({actual:D,expected:B,message:N,operator:"strictEqual",stackStartFn:V})},y.notStrictEqual=function V(D,B,N){if(arguments.length<2)throw new r("actual","expected");b(D,B)&&m({actual:D,expected:B,message:N,operator:"notStrictEqual",stackStartFn:V})};var S=function V(D,B,N){var U=this;(function(J,Y){if(!(J instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,V),B.forEach(function(J){J in D&&(U[J]=void 0!==N&&"string"==typeof N[J]&&h(D[J])&&D[J].test(N[J])?N[J]:D[J])})};function _(V,D,B,N,U,J){if(!(B in V)||!T(V[B],D[B])){if(!N){var Y=new S(V,U),q=new S(D,U,V),H=new n({actual:Y,expected:q,operator:"deepStrictEqual",stackStartFn:J});throw H.actual=V,H.expected=D,H.operator=J.name,H}m({actual:V,expected:D,message:N,operator:J.name,stackStartFn:J})}}function E(V,D,B,N){if("function"!=typeof D){if(h(D))return D.test(V);if(2===arguments.length)throw new s("expected",["Function","RegExp"],D);if("object"!==k(V)||null===V){var U=new n({actual:V,expected:D,message:B,operator:"deepStrictEqual",stackStartFn:N});throw U.operator=N.name,U}var J=Object.keys(D);if(D instanceof Error)J.push("name","message");else if(0===J.length)throw new e("error",D,"may not be an empty object");return void 0===l&&v(),J.forEach(function(Y){"string"==typeof V[Y]&&h(D[Y])&&D[Y].test(V[Y])||_(V,D,Y,B,J,N)}),!0}return void 0!==D.prototype&&V instanceof D||!Error.isPrototypeOf(D)&&!0===D.call({},V)}function L(V){if("function"!=typeof V)throw new s("fn","Function",V);try{V()}catch(D){return D}return d}function C(V){return c(V)||null!==V&&"object"===k(V)&&"function"==typeof V.then&&"function"==typeof V.catch}function P(V){return Promise.resolve().then(function(){var D;if("function"==typeof V){if(!C(D=V()))throw new o("instance of Promise","promiseFn",D)}else{if(!C(V))throw new s("promiseFn",["Function","Promise"],V);D=V}return Promise.resolve().then(function(){return D}).then(function(){return d}).catch(function(B){return B})})}function z(V,D,B,N){if("string"==typeof B){if(4===arguments.length)throw new s("error",["Object","Error","Function","RegExp"],B);if("object"===k(D)&&null!==D){if(D.message===B)throw new p("error/message",'The error message "'.concat(D.message,'" is identical to the message.'))}else if(D===B)throw new p("error/message",'The error "'.concat(D,'" is identical to the message.'));N=B,B=void 0}else if(null!=B&&"object"!==k(B)&&"function"!=typeof B)throw new s("error",["Object","Error","Function","RegExp"],B);if(D===d){var U="";B&&B.name&&(U+=" (".concat(B.name,")")),U+=N?": ".concat(N):".",m({actual:void 0,expected:B,operator:V.name,message:"Missing expected ".concat("rejects"===V.name?"rejection":"exception").concat(U),stackStartFn:V})}if(B&&!E(D,B,N,V))throw D}function j(V,D,B,N){if(D!==d){if("string"==typeof B&&(N=B,B=void 0),!B||E(D,B)){var U=N?": ".concat(N):".";m({actual:D,expected:B,operator:V.name,message:"Got unwanted ".concat("doesNotReject"===V.name?"rejection":"exception").concat(U,"\n")+'Actual message: "'.concat(D&&D.message,'"'),stackStartFn:V})}throw D}}function R(){for(var V=arguments.length,D=new Array(V),B=0;B<V;B++)D[B]=arguments[B];w.apply(void 0,[R,D.length].concat(D))}y.throws=function V(D){for(var B=arguments.length,N=new Array(B>1?B-1:0),U=1;U<B;U++)N[U-1]=arguments[U];z.apply(void 0,[V,L(D)].concat(N))},y.rejects=function V(D){for(var B=arguments.length,N=new Array(B>1?B-1:0),U=1;U<B;U++)N[U-1]=arguments[U];return P(D).then(function(J){return z.apply(void 0,[V,J].concat(N))})},y.doesNotThrow=function V(D){for(var B=arguments.length,N=new Array(B>1?B-1:0),U=1;U<B;U++)N[U-1]=arguments[U];j.apply(void 0,[V,L(D)].concat(N))},y.doesNotReject=function V(D){for(var B=arguments.length,N=new Array(B>1?B-1:0),U=1;U<B;U++)N[U-1]=arguments[U];return P(D).then(function(J){return j.apply(void 0,[V,J].concat(N))})},y.ifError=function V(D){if(null!=D){var B="ifError got unwanted exception: ";"object"===k(D)&&"string"==typeof D.message?B+=0===D.message.length&&D.constructor?D.constructor.name:D.message:B+=a(D);var N=new n({actual:D,expected:null,operator:"ifError",message:B,stackStartFn:V}),U=D.stack;if("string"==typeof U){var J=U.split("\n");J.shift();for(var Y=N.stack.split("\n"),q=0;q<J.length;q++){var H=Y.indexOf(J[q]);if(-1!==H){Y=Y.slice(0,H);break}}N.stack="".concat(Y.join("\n"),"\n").concat(J.join("\n"))}throw N}},y.strict=f(R,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},73894:function($,I,t){"use strict";var M=t(90386);function k(w,u,S){return u in w?Object.defineProperty(w,u,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[u]=S,w}function T(w,u){return!u||"object"!==n(u)&&"function"!=typeof u?x(w):u}function x(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function p(w){var u="function"==typeof Map?new Map:void 0;return p=function(S){if(null===S||-1===Function.toString.call(S).indexOf("[native code]"))return S;if("function"!=typeof S)throw new TypeError("Super expression must either be null or a function");if(void 0!==u){if(u.has(S))return u.get(S);u.set(S,E)}function E(){return e(S,arguments,r(this).constructor)}return E.prototype=Object.create(S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),o(E,S)},p(w)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function e(w,u,S){return(e=s()?Reflect.construct:function(_,E,L){var C=[null];C.push.apply(C,E);var P=new(Function.bind.apply(_,C));return L&&o(P,L.prototype),P}).apply(null,arguments)}function o(w,u){return(o=Object.setPrototypeOf||function(S,_){return S.__proto__=_,S})(w,u)}function r(w){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(w)}function n(w){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(w)}var a=t(43827).inspect,i=t(79616).codes.ERR_INVALID_ARG_TYPE;function c(w,u,S){return(void 0===S||S>w.length)&&(S=w.length),w.substring(S-u.length,S)===u}var h="",f="",b="",v="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function y(w){var u=Object.keys(w),S=Object.create(Object.getPrototypeOf(w));return u.forEach(function(_){S[_]=w[_]}),Object.defineProperty(S,"message",{value:w.message}),S}function d(w){return a(w,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var m=function(w){function u(E){var L;if(function(Y,q){if(!(Y instanceof q))throw new TypeError("Cannot call a class as a function")}(this,u),"object"!==n(E)||null===E)throw new i("options","Object",E);var C=E.message,P=E.operator,z=E.stackStartFn,j=E.actual,R=E.expected,V=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=C)L=T(this,r(u).call(this,String(C)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&1!==M.stderr.getColorDepth()?(h="\x1b[34m",f="\x1b[32m",v="\x1b[39m",b="\x1b[31m"):(h="",f="",v="",b="")),"object"===n(j)&&null!==j&&"object"===n(R)&&null!==R&&"stack"in j&&j instanceof Error&&"stack"in R&&R instanceof Error&&(j=y(j),R=y(R)),"deepStrictEqual"===P||"strictEqual"===P)L=T(this,r(u).call(this,function(Y,q,H){var X="",Q="",ne=0,re="",ae=!1,se=d(Y),pe=se.split("\n"),ke=d(q).split("\n"),me=0,le="";if("strictEqual"===H&&"object"===n(Y)&&"object"===n(q)&&null!==Y&&null!==q&&(H="strictEqualObject"),1===pe.length&&1===ke.length&&pe[0]!==ke[0]){var ue=pe[0].length+ke[0].length;if(ue<=10){if(!("object"===n(Y)&&null!==Y||"object"===n(q)&&null!==q||0===Y&&0===q))return"".concat(g[H],"\n\n")+"".concat(pe[0]," !== ").concat(ke[0],"\n")}else if("strictEqualObject"!==H&&ue<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;pe[0][me]===ke[0][me];)me++;me>2&&(le="\n  ".concat(function(Pe,De){if(De=Math.floor(De),0==Pe.length||0==De)return"";var fe=Pe.length*De;for(De=Math.floor(Math.log(De)/Math.log(2));De;)Pe+=Pe,De--;return Pe+Pe.substring(0,fe-Pe.length)}(" ",me),"^"),me=0)}}for(var Ee=pe[pe.length-1],de=ke[ke.length-1];Ee===de&&(me++<2?re="\n  ".concat(Ee).concat(re):X=Ee,pe.pop(),ke.pop(),0!==pe.length&&0!==ke.length);)Ee=pe[pe.length-1],de=ke[ke.length-1];var xe=Math.max(pe.length,ke.length);if(0===xe){var Te=se.split("\n");if(Te.length>30)for(Te[26]="".concat(h,"...").concat(v);Te.length>27;)Te.pop();return"".concat(g.notIdentical,"\n\n").concat(Te.join("\n"),"\n")}me>3&&(re="\n".concat(h,"...").concat(v).concat(re),ae=!0),""!==X&&(re="\n  ".concat(X).concat(re),X="");var we=0,K=g[H]+"\n".concat(f,"+ actual").concat(v," ").concat(b,"- expected").concat(v),oe=" ".concat(h,"...").concat(v," Lines skipped");for(me=0;me<xe;me++){var he=me-ne;if(pe.length<me+1)he>1&&me>2&&(he>4?(Q+="\n".concat(h,"...").concat(v),ae=!0):he>3&&(Q+="\n  ".concat(ke[me-2]),we++),Q+="\n  ".concat(ke[me-1]),we++),ne=me,X+="\n".concat(b,"-").concat(v," ").concat(ke[me]),we++;else if(ke.length<me+1)he>1&&me>2&&(he>4?(Q+="\n".concat(h,"...").concat(v),ae=!0):he>3&&(Q+="\n  ".concat(pe[me-2]),we++),Q+="\n  ".concat(pe[me-1]),we++),ne=me,Q+="\n".concat(f,"+").concat(v," ").concat(pe[me]),we++;else{var ye=ke[me],Me=pe[me],Re=Me!==ye&&(!c(Me,",")||Me.slice(0,-1)!==ye);Re&&c(ye,",")&&ye.slice(0,-1)===Me&&(Re=!1,Me+=","),Re?(he>1&&me>2&&(he>4?(Q+="\n".concat(h,"...").concat(v),ae=!0):he>3&&(Q+="\n  ".concat(pe[me-2]),we++),Q+="\n  ".concat(pe[me-1]),we++),ne=me,Q+="\n".concat(f,"+").concat(v," ").concat(Me),X+="\n".concat(b,"-").concat(v," ").concat(ye),we+=2):(Q+=X,X="",1!==he&&0!==me||(Q+="\n  ".concat(Me),we++))}if(we>20&&me<xe-2)return"".concat(K).concat(oe,"\n").concat(Q,"\n").concat(h,"...").concat(v).concat(X,"\n")+"".concat(h,"...").concat(v)}return"".concat(K).concat(ae?oe:"","\n").concat(Q).concat(X).concat(re).concat(le)}(j,R,P)));else if("notDeepStrictEqual"===P||"notStrictEqual"===P){var D=g[P],B=d(j).split("\n");if("notStrictEqual"===P&&"object"===n(j)&&null!==j&&(D=g.notStrictEqualObject),B.length>30)for(B[26]="".concat(h,"...").concat(v);B.length>27;)B.pop();L=T(this,1===B.length?r(u).call(this,"".concat(D," ").concat(B[0])):r(u).call(this,"".concat(D,"\n\n").concat(B.join("\n"),"\n")))}else{var N=d(j),U="",J=g[P];"notDeepEqual"===P||"notEqual"===P?(N="".concat(g[P],"\n\n").concat(N)).length>1024&&(N="".concat(N.slice(0,1021),"...")):(U="".concat(d(R)),N.length>512&&(N="".concat(N.slice(0,509),"...")),U.length>512&&(U="".concat(U.slice(0,509),"...")),"deepEqual"===P||"equal"===P?N="".concat(J,"\n\n").concat(N,"\n\nshould equal\n\n"):U=" ".concat(P," ").concat(U)),L=T(this,r(u).call(this,"".concat(N).concat(U)))}return Error.stackTraceLimit=V,L.generatedMessage=!C,Object.defineProperty(x(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=j,L.expected=R,L.operator=P,Error.captureStackTrace&&Error.captureStackTrace(x(L),z),L.name="AssertionError",T(L)}var _;return function(E,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(L&&L.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),L&&o(E,L)}(u,w),_=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:a.custom,value:function(E,L){return a(this,function(C){for(var P=1;P<arguments.length;P++){var z=null!=arguments[P]?arguments[P]:{},j=Object.keys(z);"function"==typeof Object.getOwnPropertySymbols&&(j=j.concat(Object.getOwnPropertySymbols(z).filter(function(R){return Object.getOwnPropertyDescriptor(z,R).enumerable}))),j.forEach(function(R){k(C,R,z[R])})}return C}({},L,{customInspect:!1,depth:0}))}}],_&&function l(w,u){for(var S=0;S<u.length;S++){var _=u[S];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}(u.prototype,_),u}(p(Error));$.exports=m},79616:function($,I,t){"use strict";function M(o){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(o)}function k(o){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(o)}function l(o,r){return(l=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n})(o,r)}var T,x,p={};function s(o,r,n){n||(n=Error);var a=function(i){function c(h,f,b){var v,g,y,d;return function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}(this,c),(v=function(g,y){return!y||"object"!==M(y)&&"function"!=typeof y?function(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(g):y}(this,k(c).call(this,(g=h,y=f,d=b,"string"==typeof r?r:r(g,y,d))))).code=o,v}return function(h,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),f&&l(h,f)}(c,i),c}(n);p[o]=a}function e(o,r){if(Array.isArray(o)){var n=o.length;return o=o.map(function(a){return String(a)}),n>2?"one of ".concat(r," ").concat(o.slice(0,n-1).join(", "),", or ")+o[n-1]:2===n?"one of ".concat(r," ").concat(o[0]," or ").concat(o[1]):"of ".concat(r," ").concat(o[0])}return"of ".concat(r," ").concat(String(o))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(o,r,n){var a,c,h,f,v,y;if(void 0===T&&(T=t(32791)),T("string"==typeof o,"'name' must be a string"),"string"==typeof r&&"not "===r.substr(0,"not ".length)?(a="must not be",r=r.replace(/^not /,"")):a="must be",v=o,(void 0===y||y>v.length)&&(y=v.length)," argument"===v.substring(y-" argument".length,y))c="The ".concat(o," ").concat(a," ").concat(e(r,"type"));else{var b=("number"!=typeof f&&(f=0),f+1>(h=o).length||-1===h.indexOf(".",f)?"argument":"property");c='The "'.concat(o,'" ').concat(b," ").concat(a," ").concat(e(r,"type"))}return c+". Received type ".concat(M(n))},TypeError),s("ERR_INVALID_ARG_VALUE",function(o,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===x&&(x=t(43827));var a=x.inspect(r);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(o,"' ").concat(n,". Received ").concat(a)},TypeError,RangeError),s("ERR_INVALID_RETURN_VALUE",function(o,r,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(M(n)),"Expected ".concat(o,' to be returned from the "').concat(r,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];void 0===T&&(T=t(32791)),T(r.length>0,"At least one arg needs to be specified");var a="The ",i=r.length;switch(r=r.map(function(c){return'"'.concat(c,'"')}),i){case 1:a+="".concat(r[0]," argument");break;case 2:a+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:a+=r.slice(0,i-1).join(", "),a+=", and ".concat(r[i-1]," arguments")}return"".concat(a," must be specified")},TypeError),$.exports.codes=p},74061:function($,I,t){"use strict";function M(q,H){return function(X){if(Array.isArray(X))return X}(q)||function(X,Q){var ne=[],re=!0,ae=!1,se=void 0;try{for(var pe,ke=X[Symbol.iterator]();!(re=(pe=ke.next()).done)&&(ne.push(pe.value),!Q||ne.length!==Q);re=!0);}catch(me){ae=!0,se=me}finally{try{re||null==ke.return||ke.return()}finally{if(ae)throw se}}return ne}(q,H)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(q){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(q)}var l=void 0!==/a/g.flags,T=function(q){var H=[];return q.forEach(function(X){return H.push(X)}),H},x=function(q){var H=[];return q.forEach(function(X,Q){return H.push([Q,X])}),H},p=Object.is?Object.is:t(64003),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},e=Number.isNaN?Number.isNaN:t(15567);function o(q){return q.call.bind(q)}var r=o(Object.prototype.hasOwnProperty),n=o(Object.prototype.propertyIsEnumerable),a=o(Object.prototype.toString),i=t(43827).types,c=i.isAnyArrayBuffer,h=i.isArrayBufferView,f=i.isDate,b=i.isMap,v=i.isRegExp,g=i.isSet,y=i.isNativeError,d=i.isBoxedPrimitive,m=i.isNumberObject,w=i.isStringObject,u=i.isBooleanObject,S=i.isBigIntObject,_=i.isSymbolObject,E=i.isFloat32Array,L=i.isFloat64Array;function C(q){if(0===q.length||q.length>10)return!0;for(var H=0;H<q.length;H++){var X=q.charCodeAt(H);if(X<48||X>57)return!0}return 10===q.length&&q>=Math.pow(2,32)}function P(q){return Object.keys(q).filter(C).concat(s(q).filter(Object.prototype.propertyIsEnumerable.bind(q)))}function z(q,H){if(q===H)return 0;for(var X=q.length,Q=H.length,ne=0,re=Math.min(X,Q);ne<re;++ne)if(q[ne]!==H[ne]){X=q[ne],Q=H[ne];break}return X<Q?-1:Q<X?1:0}function j(q,H,X,Q){if(q===H)return 0!==q||!X||p(q,H);if(X){if("object"!==k(q))return"number"==typeof q&&e(q)&&e(H);if("object"!==k(H)||null===q||null===H||Object.getPrototypeOf(q)!==Object.getPrototypeOf(H))return!1}else{if(null===q||"object"!==k(q))return(null===H||"object"!==k(H))&&q==H;if(null===H||"object"!==k(H))return!1}var ne,re,ae,se,Ee,de,pe=a(q);if(pe!==a(H))return!1;if(Array.isArray(q)){if(q.length!==H.length)return!1;var ke=P(q),me=P(H);return ke.length===me.length&&V(q,H,X,Q,1,ke)}if("[object Object]"===pe&&(!b(q)&&b(H)||!g(q)&&g(H)))return!1;if(f(q)){if(!f(H)||Date.prototype.getTime.call(q)!==Date.prototype.getTime.call(H))return!1}else if(v(q)){if(!v(H)||(ae=q,se=H,!(l?ae.source===se.source&&ae.flags===se.flags:RegExp.prototype.toString.call(ae)===RegExp.prototype.toString.call(se))))return!1}else if(y(q)||q instanceof Error){if(q.message!==H.message||q.name!==H.name)return!1}else{if(h(q)){if(X||!E(q)&&!L(q)){if((Ee=q).byteLength!==(de=H).byteLength||0!==z(new Uint8Array(Ee.buffer,Ee.byteOffset,Ee.byteLength),new Uint8Array(de.buffer,de.byteOffset,de.byteLength)))return!1}else if(!function(Ee,de){if(Ee.byteLength!==de.byteLength)return!1;for(var xe=0;xe<Ee.byteLength;xe++)if(Ee[xe]!==de[xe])return!1;return!0}(q,H))return!1;var le=P(q),ue=P(H);return le.length===ue.length&&V(q,H,X,Q,0,le)}if(g(q))return!(!g(H)||q.size!==H.size)&&V(q,H,X,Q,2);if(b(q))return!(!b(H)||q.size!==H.size)&&V(q,H,X,Q,3);if(c(q)){if((ne=q).byteLength!==(re=H).byteLength||0!==z(new Uint8Array(ne),new Uint8Array(re)))return!1}else if(d(q)&&!function(Ee,de){return m(Ee)?m(de)&&p(Number.prototype.valueOf.call(Ee),Number.prototype.valueOf.call(de)):w(Ee)?w(de)&&String.prototype.valueOf.call(Ee)===String.prototype.valueOf.call(de):u(Ee)?u(de)&&Boolean.prototype.valueOf.call(Ee)===Boolean.prototype.valueOf.call(de):S(Ee)?S(de)&&BigInt.prototype.valueOf.call(Ee)===BigInt.prototype.valueOf.call(de):_(de)&&Symbol.prototype.valueOf.call(Ee)===Symbol.prototype.valueOf.call(de)}(q,H))return!1}return V(q,H,X,Q,0)}function R(q,H){return H.filter(function(X){return n(q,X)})}function V(q,H,X,Q,ne,re){if(5===arguments.length){re=Object.keys(q);var ae=Object.keys(H);if(re.length!==ae.length)return!1}for(var se=0;se<re.length;se++)if(!r(H,re[se]))return!1;if(X&&5===arguments.length){var pe=s(q);if(0!==pe.length){var ke=0;for(se=0;se<pe.length;se++){var me=pe[se];if(n(q,me)){if(!n(H,me))return!1;re.push(me),ke++}else if(n(H,me))return!1}var le=s(H);if(pe.length!==le.length&&R(H,le).length!==ke)return!1}else{var ue=s(H);if(0!==ue.length&&0!==R(H,ue).length)return!1}}if(0===re.length&&(0===ne||1===ne&&0===q.length||0===q.size))return!0;if(void 0===Q)Q={val1:new Map,val2:new Map,position:0};else{var Ee=Q.val1.get(q);if(void 0!==Ee){var de=Q.val2.get(H);if(void 0!==de)return Ee===de}Q.position++}Q.val1.set(q,Q.position),Q.val2.set(H,Q.position);var xe=Y(q,H,X,re,Q,ne);return Q.val1.delete(q),Q.val2.delete(H),xe}function D(q,H,X,Q){for(var ne=T(q),re=0;re<ne.length;re++){var ae=ne[re];if(j(H,ae,X,Q))return q.delete(ae),!0}return!1}function B(q){switch(k(q)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":q=+q;case"number":if(e(q))return!1}return!0}function N(q,H,X){var Q=B(X);return Q??(H.has(Q)&&!q.has(Q))}function U(q,H,X,Q,ne){var re=B(X);if(null!=re)return re;var ae=H.get(re);return!(void 0===ae&&!H.has(re)||!j(Q,ae,!1,ne))&&!q.has(re)&&j(Q,ae,!1,ne)}function J(q,H,X,Q,ne,re){for(var ae=T(q),se=0;se<ae.length;se++){var pe=ae[se];if(j(X,pe,ne,re)&&j(Q,H.get(pe),ne,re))return q.delete(pe),!0}return!1}function Y(q,H,X,Q,ne,re){var ae=0;if(2===re){if(!function(me,le,ue,Ee){for(var de=null,xe=T(me),Te=0;Te<xe.length;Te++){var we=xe[Te];if("object"===k(we)&&null!==we)null===de&&(de=new Set),de.add(we);else if(!le.has(we)){if(ue||!N(me,le,we))return!1;null===de&&(de=new Set),de.add(we)}}if(null!==de){for(var K=T(le),oe=0;oe<K.length;oe++){var he=K[oe];if("object"===k(he)&&null!==he){if(!D(de,he,ue,Ee))return!1}else if(!ue&&!me.has(he)&&!D(de,he,ue,Ee))return!1}return 0===de.size}return!0}(q,H,X,ne))return!1}else if(3===re){if(!function(me,le,ue,Ee){for(var de=null,xe=x(me),Te=0;Te<xe.length;Te++){var we=M(xe[Te],2),K=we[0],oe=we[1];if("object"===k(K)&&null!==K)null===de&&(de=new Set),de.add(K);else{var he=le.get(K);if(void 0===he&&!le.has(K)||!j(oe,he,ue,Ee)){if(ue||!U(me,le,K,oe,Ee))return!1;null===de&&(de=new Set),de.add(K)}}}if(null!==de){for(var ye=x(le),Me=0;Me<ye.length;Me++){var Re=M(ye[Me],2),Pe=(K=Re[0],Re[1]);if("object"===k(K)&&null!==K){if(!J(de,me,K,Pe,ue,Ee))return!1}else if(!(ue||me.has(K)&&j(me.get(K),Pe,!1,Ee)||J(de,me,K,Pe,!1,Ee)))return!1}return 0===de.size}return!0}(q,H,X,ne))return!1}else if(1===re)for(;ae<q.length;ae++){if(!r(q,ae)){if(r(H,ae))return!1;for(var se=Object.keys(q);ae<se.length;ae++){var pe=se[ae];if(!r(H,pe)||!j(q[pe],H[pe],X,ne))return!1}return se.length===Object.keys(H).length}if(!r(H,ae)||!j(q[ae],H[ae],X,ne))return!1}for(ae=0;ae<Q.length;ae++){var ke=Q[ae];if(!j(q[ke],H[ke],X,ne))return!1}return!0}$.exports={isDeepEqual:function(q,H){return j(q,H,!1)},isDeepStrictEqual:function(q,H){return j(q,H,!0)}}},95341:function($,I){"use strict";I.byteLength=function(e){var o=p(e),n=o[1];return 3*(o[0]+n)/4-n},I.toByteArray=function(e){var o,r,g,n=p(e),a=n[0],i=n[1],c=new k(3*(a+(g=i))/4-g),h=0,f=i>0?a-4:a;for(r=0;r<f;r+=4)o=M[e.charCodeAt(r)]<<18|M[e.charCodeAt(r+1)]<<12|M[e.charCodeAt(r+2)]<<6|M[e.charCodeAt(r+3)],c[h++]=o>>16&255,c[h++]=o>>8&255,c[h++]=255&o;return 2===i&&(o=M[e.charCodeAt(r)]<<2|M[e.charCodeAt(r+1)]>>4,c[h++]=255&o),1===i&&(o=M[e.charCodeAt(r)]<<10|M[e.charCodeAt(r+1)]<<4|M[e.charCodeAt(r+2)]>>2,c[h++]=o>>8&255,c[h++]=255&o),c},I.fromByteArray=function(e){for(var o,r=e.length,n=r%3,a=[],i=16383,c=0,h=r-n;c<h;c+=i)a.push(s(e,c,c+i>h?h:c+i));return 1===n?a.push(t[(o=e[r-1])>>2]+t[o<<4&63]+"=="):2===n&&a.push(t[(o=(e[r-2]<<8)+e[r-1])>>10]+t[o>>4&63]+t[o<<2&63]+"="),a.join("")};for(var t=[],M=[],k=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,x=l.length;T<x;++T)t[T]=l[T],M[l.charCodeAt(T)]=T;function p(e){var o=e.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=o),[r,r===o?0:4-r%4]}function s(e,o,r){for(var a,i=[],c=o;c<r;c+=3)i.push(t[(a=(e[c]<<16&16711680)+(e[c+1]<<8&65280)+(255&e[c+2]))>>18&63]+t[a>>12&63]+t[a>>6&63]+t[63&a]);return i.join("")}M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63},91358:function($){"use strict";function I(x,p,s,e,o){for(var r=o+1;e<=o;){var n=e+o>>>1,a=x[n];(void 0!==s?s(a,p):a-p)>=0?(r=n,o=n-1):e=n+1}return r}function t(x,p,s,e,o){for(var r=o+1;e<=o;){var n=e+o>>>1,a=x[n];(void 0!==s?s(a,p):a-p)>0?(r=n,o=n-1):e=n+1}return r}function M(x,p,s,e,o){for(var r=e-1;e<=o;){var n=e+o>>>1,a=x[n];(void 0!==s?s(a,p):a-p)<0?(r=n,e=n+1):o=n-1}return r}function k(x,p,s,e,o){for(var r=e-1;e<=o;){var n=e+o>>>1,a=x[n];(void 0!==s?s(a,p):a-p)<=0?(r=n,e=n+1):o=n-1}return r}function l(x,p,s,e,o){for(;e<=o;){var r=e+o>>>1,n=x[r],a=void 0!==s?s(n,p):n-p;if(0===a)return r;a<=0?e=r+1:o=r-1}return-1}function T(x,p,s,e,o,r){return"function"==typeof s?r(x,p,s,void 0===e?0:0|e,void 0===o?x.length-1:0|o):r(x,p,void 0,void 0===s?0:0|s,void 0===e?x.length-1:0|e)}$.exports={ge:function(x,p,s,e,o){return T(x,p,s,e,o,I)},gt:function(x,p,s,e,o){return T(x,p,s,e,o,t)},lt:function(x,p,s,e,o){return T(x,p,s,e,o,M)},le:function(x,p,s,e,o){return T(x,p,s,e,o,k)},eq:function(x,p,s,e,o){return T(x,p,s,e,o,l)}}},13547:function($,I){"use strict";function t(k){var l=32;return(k&=-k)&&l--,65535&k&&(l-=16),16711935&k&&(l-=8),252645135&k&&(l-=4),858993459&k&&(l-=2),1431655765&k&&(l-=1),l}I.INT_BITS=32,I.INT_MAX=2147483647,I.INT_MIN=-2147483648,I.sign=function(k){return(k>0)-(k<0)},I.abs=function(k){var l=k>>31;return(k^l)-l},I.min=function(k,l){return l^(k^l)&-(k<l)},I.max=function(k,l){return k^(k^l)&-(k<l)},I.isPow2=function(k){return!(k&k-1||!k)},I.log2=function(k){var l,T;return l=(k>65535)<<4,l|=T=((k>>>=l)>255)<<3,l|=T=((k>>>=T)>15)<<2,(l|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},I.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},I.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},I.countTrailingZeros=t,I.nextPow2=function(k){return k+=0===k,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,1+((k|=k>>>8)|k>>>16)},I.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},I.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var M=new Array(256);(function(k){for(var l=0;l<256;++l){var T=l,x=l,p=7;for(T>>>=1;T;T>>>=1)x<<=1,x|=1&T,--p;k[l]=x<<p&255}})(M),I.reverse=function(k){return M[255&k]<<24|M[k>>>8&255]<<16|M[k>>>16&255]<<8|M[k>>>24&255]},I.interleave2=function(k,l){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},I.deinterleave2=function(k,l){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>l&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},I.interleave3=function(k,l,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},I.deinterleave3=function(k,l){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>l&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},I.nextCombination=function(k){var l=k|k-1;return l+1|(~l&-~l)-1>>>t(k)+1}},44781:function($,I,t){"use strict";var M=t(53435);$.exports=function(x,p){p||(p={});var s,e,o,r,n,a,c,f,b,v=null==p.cutoff?.25:p.cutoff,g=null==p.radius?8:p.radius,y=p.channel||0;if(ArrayBuffer.isView(x)||Array.isArray(x)){if(!p.width||!p.height)throw Error("For raw data width and height should be provided by options");s=p.width,e=p.height,r=x,a=p.stride?p.stride:Math.floor(x.length/s/e)}else window.HTMLCanvasElement&&x instanceof window.HTMLCanvasElement?(r=(c=x).getContext("2d").getImageData(0,0,s=c.width,e=c.height).data,a=4):window.CanvasRenderingContext2D&&x instanceof window.CanvasRenderingContext2D?(s=(c=x.canvas).width,r=x.getImageData(0,0,s,e=c.height).data,a=4):window.ImageData&&x instanceof window.ImageData&&(s=x.width,e=x.height,r=x.data,a=4);if(o=Math.max(s,e),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(s*e),f=0,b=n.length;f<b;f++)r[f]=n[f*a+y]/255;else if(1!==a)throw Error("Raw data can have only 1 value per pixel");var d=Array(s*e),m=Array(s*e),w=Array(o),u=Array(o),S=Array(o+1),_=Array(o);for(f=0,b=s*e;f<b;f++){var E=r[f];d[f]=1===E?0:0===E?k:Math.pow(Math.max(0,.5-E),2),m[f]=1===E?k:0===E?0:Math.pow(Math.max(0,E-.5),2)}l(d,s,e,w,u,_,S),l(m,s,e,w,u,_,S);var L=window.Float32Array?new Float32Array(s*e):new Array(s*e);for(f=0,b=s*e;f<b;f++)L[f]=M(1-((d[f]-m[f])/g+v),0,1);return L};var k=1e20;function l(x,p,s,e,o,r,n){for(var a=0;a<p;a++){for(var i=0;i<s;i++)e[i]=x[i*p+a];for(T(e,o,r,n,s),i=0;i<s;i++)x[i*p+a]=o[i]}for(i=0;i<s;i++){for(a=0;a<p;a++)e[a]=x[i*p+a];for(T(e,o,r,n,p),a=0;a<p;a++)x[i*p+a]=Math.sqrt(o[a])}}function T(x,p,s,e,o){s[0]=0,e[0]=-k,e[1]=+k;for(var r=1,n=0;r<o;r++){for(var a=(x[r]+r*r-(x[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);a<=e[n];)n--,a=(x[r]+r*r-(x[s[n]]+s[n]*s[n]))/(2*r-2*s[n]);s[++n]=r,e[n]=a,e[n+1]=+k}for(r=0,n=0;r<o;r++){for(;e[n+1]<r;)n++;p[r]=(r-s[n])*(r-s[n])+x[s[n]]}}},6614:function($,I,t){"use strict";var M=t(68318),k=t(68222),l=k(M("String.prototype.indexOf"));$.exports=function(T,x){var p=M(T,!!x);return"function"==typeof p&&l(T,".prototype.")>-1?k(p):p}},68222:function($,I,t){"use strict";var M=t(77575),k=t(68318),l=k("%Function.prototype.apply%"),T=k("%Function.prototype.call%"),x=k("%Reflect.apply%",!0)||M.call(T,l),p=k("%Object.getOwnPropertyDescriptor%",!0),s=k("%Object.defineProperty%",!0),e=k("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}$.exports=function(r){var n=x(M,T,arguments);return p&&s&&p(n,"length").configurable&&s(n,"length",{value:1+e(0,r.length-(arguments.length-1))}),n};var o=function(){return x(M,l,arguments)};s?s($.exports,"apply",{value:o}):$.exports.apply=o},53435:function($){$.exports=function(I,t,M){return t<M?I<t?t:I>M?M:I:I<M?M:I>t?t:I}},6475:function($,I,t){"use strict";var M=t(53435);function k(l,T){null==T&&(T=!0);var x=l[0],p=l[1],s=l[2],e=l[3];return null==e&&(e=T?1:255),T&&(x*=255,p*=255,s*=255,e*=255),16777216*(x=255&M(x,0,255))+((p=255&M(p,0,255))<<16)+((s=255&M(s,0,255))<<8)+(255&M(e,0,255))}$.exports=k,$.exports.to=k,$.exports.from=function(l,T){var x=(l=+l)>>>24,p=(16711680&l)>>>16,s=(65280&l)>>>8,e=255&l;return!1===T?[x,p,s,e]:[x/255,p/255,s/255,e/255]}},76857:function($){"use strict";$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function($,I,t){"use strict";var M=t(36652),k=t(53435),l=t(90660);$.exports=function(T,x){"float"!==x&&x||(x="array"),"uint"===x&&(x="uint8"),"uint_clamped"===x&&(x="uint8_clamped");var e,p=new(l(x))(4),s="uint8"!==x&&"uint8_clamped"!==x;return T.length&&"string"!=typeof T||((T=M(T))[0]/=255,T[1]/=255,T[2]/=255),(e=T)instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||0===e[0])&&(e[1]>1||0===e[1])&&(e[2]>1||0===e[2])&&(!e[3]||e[3]>1)?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=null!=T[3]?T[3]:255,s&&(p[0]/=255,p[1]/=255,p[2]/=255,p[3]/=255),p):(s?(p[0]=T[0],p[1]=T[1],p[2]=T[2],p[3]=null!=T[3]?T[3]:1):(p[0]=k(Math.floor(255*T[0]),0,255),p[1]=k(Math.floor(255*T[1]),0,255),p[2]=k(Math.floor(255*T[2]),0,255),p[3]=null==T[3]?255:k(Math.floor(255*T[3]),0,255)),p)}},90736:function($,I,t){"use strict";var M=t(76857),k=t(10973),l=t(46775);$.exports=function(x){var p,s,e=[],o=1;if("string"==typeof x)if(M[x])e=M[x].slice(),s="rgb";else if("transparent"===x)o=0,s="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(x)){var r=(i=x.slice(1)).length;o=1,r<=4?(e=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],4===r&&(o=parseInt(i[3]+i[3],16)/255)):(e=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],8===r&&(o=parseInt(i[6]+i[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),s="rgb"}else if(p=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(x)){var n=p[1],a="rgb"===n,i=n.replace(/a$/,"");s=i,r="cmyk"===i?4:"gray"===i?1:3,e=p[2].trim().split(/\s*,\s*/).map(function(h,f){if(/%$/.test(h))return f===r?parseFloat(h)/100:"rgb"===i?255*parseFloat(h)/100:parseFloat(h);if("h"===i[f]){if(/deg$/.test(h))return parseFloat(h);if(void 0!==T[h])return T[h]}return parseFloat(h)}),n===i&&e.push(1),o=a||void 0===e[r]?1:e[r],e=e.slice(0,r)}else x.length>10&&/[0-9](?:\s|\/)/.test(x)&&(e=x.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=x.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(x))if(k(x)){var c=l(x.r,x.red,x.R,null);null!==c?(s="rgb",e=[c,l(x.g,x.green,x.G),l(x.b,x.blue,x.B)]):(s="hsl",e=[l(x.h,x.hue,x.H),l(x.s,x.saturation,x.S),l(x.l,x.lightness,x.L,x.b,x.brightness)]),o=l(x.a,x.alpha,x.opacity,1),null!=x.opacity&&(o/=100)}else(Array.isArray(x)||t.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(x))&&(e=[x[0],x[1],x[2]],s="rgb",o=4===x.length?x[3]:1);else s="rgb",e=[x>>>16,(65280&x)>>>8,255&x];return{space:s,values:e,alpha:o}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function($,I,t){"use strict";var M=t(90736),k=t(80009),l=t(53435);$.exports=function(T){var x,p=M(T);return p.space?((x=Array(3))[0]=l(p.values[0],0,255),x[1]=l(p.values[1],0,255),x[2]=l(p.values[2],0,255),"h"===p.space[0]&&(x=k.rgb(x)),x.push(l(p.alpha,0,1)),x):[]}},80009:function($,I,t){"use strict";var M=t(6866);$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var l,T,x,p,s,e=k[0]/360,o=k[1]/100,r=k[2]/100;if(0===o)return[s=255*r,s,s];l=2*r-(T=r<.5?r*(1+o):r+o-r*o),p=[0,0,0];for(var n=0;n<3;n++)(x=e+.3333333333333333*-(n-1))<0?x++:x>1&&x--,p[n]=255*(s=6*x<1?l+6*(T-l)*x:2*x<1?T:3*x<2?l+(T-l)*(.6666666666666666-x)*6:l);return p}},M.hsl=function(k){var l,T,x=k[0]/255,p=k[1]/255,s=k[2]/255,e=Math.min(x,p,s),o=Math.max(x,p,s),r=o-e;return o===e?l=0:x===o?l=(p-s)/r:p===o?l=2+(s-x)/r:s===o&&(l=4+(x-p)/r),(l=Math.min(60*l,360))<0&&(l+=360),T=(e+o)/2,[l,100*(o===e?0:T<=.5?r/(o+e):r/(2-o-e)),100*T]}},6866:function($){"use strict";$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function($){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function($,I,t){"use strict";$.exports={parse:t(41004),stringify:t(53313)}},63625:function($,I,t){"use strict";var M=t(40402);$.exports={isSize:function(k){return/^[\d\.]/.test(k)||-1!==k.indexOf("/")||-1!==M.indexOf(k)}}},41004:function($,I,t){"use strict";var M=t(90448),k=t(38732),l=t(41901),T=t(15659),x=t(96209),p=t(83794),s=t(99011),e=t(63625).isSize;$.exports=r;var o=r.cache={};function r(a){if("string"!=typeof a)throw new Error("Font argument must be a string.");if(o[a])return o[a];if(""===a)throw new Error("Cannot parse an empty string.");if(-1!==l.indexOf(a))return o[a]={system:a};for(var i,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=s(a,/\s+/);i=h.shift();){if(-1!==k.indexOf(i))return["style","variant","weight","stretch"].forEach(function(b){c[b]=i}),o[a]=c;if(-1===x.indexOf(i))if("normal"!==i&&"small-caps"!==i)if(-1===p.indexOf(i)){if(-1===T.indexOf(i)){if(e(i)){var f=s(i,"/");if(c.size=f[0],null!=f[1]?c.lineHeight=n(f[1]):"/"===h[0]&&(h.shift(),c.lineHeight=n(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=s(h.join(" "),/\s*,\s*/).map(M),o[a]=c}throw new Error("Unknown or unsupported font token: "+i)}c.weight=i}else c.stretch=i;else c.variant=i;else c.style=i}throw new Error("Missing required font-size.")}function n(a){var i=parseFloat(a);return i.toString()===a?i:a}},53313:function($,I,t){"use strict";var M=t(71299),k=t(63625).isSize,l=a(t(38732)),T=a(t(41901)),x=a(t(15659)),p=a(t(96209)),s=a(t(83794)),e={normal:1,"small-caps":1},o={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(i,c){if(i&&!c[i]&&!l[i])throw Error("Unknown keyword `"+i+"`");return i}function a(i){for(var c={},h=0;h<i.length;h++)c[i[h]]=1;return c}$.exports=function(i){if((i=M(i,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return i.system&&n(i.system,T),i.system;if(n(i.style,p),n(i.variant,e),n(i.weight,x),n(i.stretch,s),null==i.size&&(i.size="1rem"),"number"==typeof i.size&&(i.size+="px"),!k)throw Error("Bad size value `"+i.size+"`");i.family||(i.family=r),Array.isArray(i.family)&&(i.family.length||(i.family=[r]),i.family=i.family.map(function(h){return o[h]?h:'"'+h+'"'}).join(", "));var c=[];return c.push(i.style),i.variant!==i.style&&c.push(i.variant),i.weight!==i.variant&&i.weight!==i.style&&c.push(i.weight),i.stretch!==i.weight&&i.stretch!==i.variant&&i.stretch!==i.style&&c.push(i.stretch),c.push(i.size+(null==i.lineHeight||"normal"===i.lineHeight||i.lineHeight+""=="1"?"":"/"+i.lineHeight)),c.push(i.family),c.filter(Boolean).join(" ")}},55174:function($,I,t){"use strict";var M,k=t(24582),l=t(10424),T=t(82527),x=t(19012),p=t(21780),s=t(16906),e=Function.prototype.bind,o=Object.defineProperty,r=Object.prototype.hasOwnProperty;M=function(n,a,i){var c,h=l(a)&&T(a.value);return delete(c=x(a)).writable,delete c.value,c.get=function(){return!i.overwriteDefinition&&r.call(this,n)?h:(a.value=e.call(h,i.resolveContext?i.resolveContext(this):this),o(this,n,a),this[n])},c},$.exports=function(n){var a=p(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),s(n,function(i,c){return M(c,i,a)})}},62072:function($,I,t){"use strict";var M=t(24582),k=t(84985),l=t(95879),T=t(21780),x=t(66741),p=$.exports=function(s,e){var o,r,n,a,i;return arguments.length<2||"string"!=typeof s?(a=e,e=s,s=null):a=arguments[2],M(s)?(o=x.call(s,"c"),r=x.call(s,"e"),n=x.call(s,"w")):(o=n=!0,r=!1),i={value:e,configurable:o,enumerable:r,writable:n},a?l(T(a),i):i};p.gs=function(s,e,o){var r,n,a,i;return"string"!=typeof s?(a=o,o=e,e=s,s=null):a=arguments[3],M(e)?k(e)?M(o)?k(o)||(a=o,o=void 0):o=void 0:(a=e,e=o=void 0):e=void 0,M(s)?(r=x.call(s,"c"),n=x.call(s,"e")):(r=!0,n=!1),i={get:e,set:o,configurable:r,enumerable:n},a?l(T(a),i):i}},33064:function($,I,t){"use strict";function M(a,i){return a<i?-1:a>i?1:a>=i?0:NaN}var k,l;function x(a,i){var c,h,f=a.length,b=-1;if(null==i){for(;++b<f;)if(null!=(c=a[b])&&c>=c)for(h=c;++b<f;)null!=(c=a[b])&&c>h&&(h=c)}else for(;++b<f;)if(null!=(c=i(a[b],b,a))&&c>=c)for(h=c;++b<f;)null!=(c=i(a[b],b,a))&&c>h&&(h=c);return h}function p(a){return null===a?NaN:+a}function s(a,i){var c,h=a.length,f=h,b=-1,v=0;if(null==i)for(;++b<h;)isNaN(c=p(a[b]))?--f:v+=c;else for(;++b<h;)isNaN(c=p(i(a[b],b,a)))?--f:v+=c;if(f)return v/f}function e(a){for(var i,c,h,f=a.length,b=-1,v=0;++b<f;)v+=a[b].length;for(c=new Array(v);--f>=0;)for(i=(h=a[f]).length;--i>=0;)c[--v]=h[i];return c}function o(a,i){var c,h,f=a.length,b=-1;if(null==i){for(;++b<f;)if(null!=(c=a[b])&&c>=c)for(h=c;++b<f;)null!=(c=a[b])&&h>c&&(h=c)}else for(;++b<f;)if(null!=(c=i(a[b],b,a))&&c>=c)for(h=c;++b<f;)null!=(c=i(a[b],b,a))&&h>c&&(h=c);return h}function r(a,i,c){a=+a,i=+i,c=(f=arguments.length)<2?(i=a,a=0,1):f<3?1:+c;for(var h=-1,f=0|Math.max(0,Math.ceil((i-a)/c)),b=new Array(f);++h<f;)b[h]=a+h*c;return b}function n(a,i){var c,h=a.length,f=-1,b=0;if(null==i)for(;++f<h;)(c=+a[f])&&(b+=c);else for(;++f<h;)(c=+i(a[f],f,a))&&(b+=c);return b}t.d(I,{j2:function(){return M},Fp:function(){return x},J6:function(){return s},TS:function(){return e},VV:function(){return o},w6:function(){return r},Sm:function(){return n}}),1===(k=M).length&&(l=k,k=function(a,i){return M(l(a),i)}),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},15140:function($,I,t){"use strict";t.d(I,{UI:function(){return T},b1:function(){return x}});var M="$";function k(){}function l(a,i){var c=new k;if(a instanceof k)a.each(function(g,y){c.set(y,g)});else if(Array.isArray(a)){var h,f=-1,b=a.length;if(null==i)for(;++f<b;)c.set(f,a[f]);else for(;++f<b;)c.set(i(h=a[f],f,a),h)}else if(a)for(var v in a)c.set(v,a[v]);return c}k.prototype=l.prototype={constructor:k,has:function(a){return M+a in this},get:function(a){return this[M+a]},set:function(a,i){return this[M+a]=i,this},remove:function(a){var i=M+a;return i in this&&delete this[i]},clear:function(){for(var a in this)a[0]===M&&delete this[a]},keys:function(){var a=[];for(var i in this)i[0]===M&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)i[0]===M&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)i[0]===M&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)i[0]===M&&++a;return a},empty:function(){for(var a in this)if(a[0]===M)return!1;return!0},each:function(a){for(var i in this)i[0]===M&&a(this[i],i.slice(1),this)}};var T=l;function x(){var a,i,c,h=[],f=[];function b(g,y,d,m){if(y>=h.length)return null!=a&&g.sort(a),null!=i?i(g):g;for(var w,u,S,_=-1,E=g.length,L=h[y++],C=T(),P=d();++_<E;)(S=C.get(w=L(u=g[_])+""))?S.push(u):C.set(w,[u]);return C.each(function(z,j){m(P,j,b(z,y,d,m))}),P}function v(g,y){if(++y>h.length)return g;var d,m=f[y-1];return null!=i&&y>=h.length?d=g.entries():(d=[],g.each(function(w,u){d.push({key:u,values:v(w,y)})})),null!=m?d.sort(function(w,u){return m(w.key,u.key)}):d}return c={object:function(g){return b(g,0,p,s)},map:function(g){return b(g,0,e,o)},entries:function(g){return v(b(g,0,e,o),0)},key:function(g){return h.push(g),c},sortKeys:function(g){return f[h.length-1]=g,c},sortValues:function(g){return a=g,c},rollup:function(g){return i=g,c}}}function p(){return{}}function s(a,i,c){a[i]=c}function e(){return T()}function o(a,i,c){a.set(i,c)}function r(){}var n=T.prototype;r.prototype=function(a,i){var c=new r;if(a instanceof r)a.each(function(b){c.add(b)});else if(a){var h=-1,f=a.length;if(null==i)for(;++h<f;)c.add(a[h]);else for(;++h<f;)c.add(i(a[h],h,a))}return c}.prototype={constructor:r,has:n.has,add:function(a){return this[M+(a+="")]=a,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function($,I,t){"use strict";function M(me,le){var ue;function Ee(){var de,xe,Te=ue.length,we=0,K=0;for(de=0;de<Te;++de)we+=(xe=ue[de]).x,K+=xe.y;for(we=we/Te-me,K=K/Te-le,de=0;de<Te;++de)(xe=ue[de]).x-=we,xe.y-=K}return null==me&&(me=0),null==le&&(le=0),Ee.initialize=function(de){ue=de},Ee.x=function(de){return arguments.length?(me=+de,Ee):me},Ee.y=function(de){return arguments.length?(le=+de,Ee):le},Ee}function k(me){return function(){return me}}function l(){return 1e-6*(Math.random()-.5)}function T(me,le,ue,Ee){if(isNaN(le)||isNaN(ue))return me;var de,xe,Te,we,K,oe,he,ye,Me,Re=me._root,Pe={data:Ee},De=me._x0,fe=me._y0,ge=me._x1,be=me._y1;if(!Re)return me._root=Pe,me;for(;Re.length;)if((oe=le>=(xe=(De+ge)/2))?De=xe:ge=xe,(he=ue>=(Te=(fe+be)/2))?fe=Te:be=Te,de=Re,!(Re=Re[ye=he<<1|oe]))return de[ye]=Pe,me;if(we=+me._x.call(null,Re.data),K=+me._y.call(null,Re.data),le===we&&ue===K)return Pe.next=Re,de?de[ye]=Pe:me._root=Pe,me;do{de=de?de[ye]=new Array(4):me._root=new Array(4),(oe=le>=(xe=(De+ge)/2))?De=xe:ge=xe,(he=ue>=(Te=(fe+be)/2))?fe=Te:be=Te}while((ye=he<<1|oe)==(Me=(K>=Te)<<1|we>=xe));return de[Me]=Re,de[ye]=Pe,me}function x(me,le,ue,Ee,de){this.node=me,this.x0=le,this.y0=ue,this.x1=Ee,this.y1=de}function p(me){return me[0]}function s(me){return me[1]}function e(me,le,ue){var Ee=new o(le??p,ue??s,NaN,NaN,NaN,NaN);return null==me?Ee:Ee.addAll(me)}function o(me,le,ue,Ee,de,xe){this._x=me,this._y=le,this._x0=ue,this._y0=Ee,this._x1=de,this._y1=xe,this._root=void 0}function r(me){for(var le={data:me.data},ue=le;me=me.next;)ue=ue.next={data:me.data};return le}t.r(I),t.d(I,{forceCenter:function(){return M},forceCollide:function(){return c},forceLink:function(){return v},forceManyBody:function(){return ae},forceRadial:function(){return se},forceSimulation:function(){return re},forceX:function(){return pe},forceY:function(){return ke}});var n=e.prototype=o.prototype;function a(me){return me.x+me.vx}function i(me){return me.y+me.vy}function c(me){var le,ue,Ee=1,de=1;function xe(){for(var K,oe,he,ye,Me,Re,Pe,De=le.length,fe=0;fe<de;++fe)for(oe=e(le,a,i).visitAfter(Te),K=0;K<De;++K)Pe=(Re=ue[(he=le[K]).index])*Re,ye=he.x+he.vx,Me=he.y+he.vy,oe.visit(ge);function ge(be,Ie,He,Ve,tt){var nt=be.data,st=be.r,dt=Re+st;if(!nt)return Ie>ye+dt||Ve<ye-dt||He>Me+dt||tt<Me-dt;if(nt.index>he.index){var wt=ye-nt.x-nt.vx,_t=Me-nt.y-nt.vy,pt=wt*wt+_t*_t;pt<dt*dt&&(0===wt&&(pt+=(wt=l())*wt),0===_t&&(pt+=(_t=l())*_t),pt=(dt-(pt=Math.sqrt(pt)))/pt*Ee,he.vx+=(wt*=pt)*(dt=(st*=st)/(Pe+st)),he.vy+=(_t*=pt)*dt,nt.vx-=wt*(dt=1-dt),nt.vy-=_t*dt)}}}function Te(K){if(K.data)return K.r=ue[K.data.index];for(var oe=K.r=0;oe<4;++oe)K[oe]&&K[oe].r>K.r&&(K.r=K[oe].r)}function we(){if(le){var K,oe,he=le.length;for(ue=new Array(he),K=0;K<he;++K)ue[(oe=le[K]).index]=+me(oe,K,le)}}return"function"!=typeof me&&(me=k(null==me?1:+me)),xe.initialize=function(K){le=K,we()},xe.iterations=function(K){return arguments.length?(de=+K,xe):de},xe.strength=function(K){return arguments.length?(Ee=+K,xe):Ee},xe.radius=function(K){return arguments.length?(me="function"==typeof K?K:k(+K),we(),xe):me},xe}n.copy=function(){var me,le,ue=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ee=this._root;if(!Ee)return ue;if(!Ee.length)return ue._root=r(Ee),ue;for(me=[{source:Ee,target:ue._root=new Array(4)}];Ee=me.pop();)for(var de=0;de<4;++de)(le=Ee.source[de])&&(le.length?me.push({source:le,target:Ee.target[de]=new Array(4)}):Ee.target[de]=r(le));return ue},n.add=function(me){var le=+this._x.call(null,me),ue=+this._y.call(null,me);return T(this.cover(le,ue),le,ue,me)},n.addAll=function(me){var le,ue,Ee,de,xe=me.length,Te=new Array(xe),we=new Array(xe),K=1/0,oe=1/0,he=-1/0,ye=-1/0;for(ue=0;ue<xe;++ue)isNaN(Ee=+this._x.call(null,le=me[ue]))||isNaN(de=+this._y.call(null,le))||(Te[ue]=Ee,we[ue]=de,Ee<K&&(K=Ee),Ee>he&&(he=Ee),de<oe&&(oe=de),de>ye&&(ye=de));if(K>he||oe>ye)return this;for(this.cover(K,oe).cover(he,ye),ue=0;ue<xe;++ue)T(this,Te[ue],we[ue],me[ue]);return this},n.cover=function(me,le){if(isNaN(me=+me)||isNaN(le=+le))return this;var ue=this._x0,Ee=this._y0,de=this._x1,xe=this._y1;if(isNaN(ue))de=(ue=Math.floor(me))+1,xe=(Ee=Math.floor(le))+1;else{for(var Te,we,K=de-ue,oe=this._root;ue>me||me>=de||Ee>le||le>=xe;)switch(we=(le<Ee)<<1|me<ue,(Te=new Array(4))[we]=oe,oe=Te,K*=2,we){case 0:de=ue+K,xe=Ee+K;break;case 1:ue=de-K,xe=Ee+K;break;case 2:de=ue+K,Ee=xe-K;break;case 3:ue=de-K,Ee=xe-K}this._root&&this._root.length&&(this._root=oe)}return this._x0=ue,this._y0=Ee,this._x1=de,this._y1=xe,this},n.data=function(){var me=[];return this.visit(function(le){if(!le.length)do{me.push(le.data)}while(le=le.next)}),me},n.extent=function(me){return arguments.length?this.cover(+me[0][0],+me[0][1]).cover(+me[1][0],+me[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(me,le,ue){var Ee,de,xe,Te,we,K,oe,he=this._x0,ye=this._y0,Me=this._x1,Re=this._y1,Pe=[],De=this._root;for(De&&Pe.push(new x(De,he,ye,Me,Re)),null==ue?ue=1/0:(he=me-ue,ye=le-ue,Me=me+ue,Re=le+ue,ue*=ue);K=Pe.pop();)if(!(!(De=K.node)||(de=K.x0)>Me||(xe=K.y0)>Re||(Te=K.x1)<he||(we=K.y1)<ye))if(De.length){var fe=(de+Te)/2,ge=(xe+we)/2;Pe.push(new x(De[3],fe,ge,Te,we),new x(De[2],de,ge,fe,we),new x(De[1],fe,xe,Te,ge),new x(De[0],de,xe,fe,ge)),(oe=(le>=ge)<<1|me>=fe)&&(K=Pe[Pe.length-1],Pe[Pe.length-1]=Pe[Pe.length-1-oe],Pe[Pe.length-1-oe]=K)}else{var be=me-+this._x.call(null,De.data),Ie=le-+this._y.call(null,De.data),He=be*be+Ie*Ie;if(He<ue){var Ve=Math.sqrt(ue=He);he=me-Ve,ye=le-Ve,Me=me+Ve,Re=le+Ve,Ee=De.data}}return Ee},n.remove=function(me){if(isNaN(xe=+this._x.call(null,me))||isNaN(Te=+this._y.call(null,me)))return this;var le,ue,Ee,de,xe,Te,we,K,oe,he,ye,Me,Re=this._root,Pe=this._x0,De=this._y0,fe=this._x1,ge=this._y1;if(!Re)return this;if(Re.length)for(;;){if((oe=xe>=(we=(Pe+fe)/2))?Pe=we:fe=we,(he=Te>=(K=(De+ge)/2))?De=K:ge=K,le=Re,!(Re=Re[ye=he<<1|oe]))return this;if(!Re.length)break;(le[ye+1&3]||le[ye+2&3]||le[ye+3&3])&&(ue=le,Me=ye)}for(;Re.data!==me;)if(Ee=Re,!(Re=Re.next))return this;return(de=Re.next)&&delete Re.next,Ee?(de?Ee.next=de:delete Ee.next,this):le?(de?le[ye]=de:delete le[ye],(Re=le[0]||le[1]||le[2]||le[3])&&Re===(le[3]||le[2]||le[1]||le[0])&&!Re.length&&(ue?ue[Me]=Re:this._root=Re),this):(this._root=de,this)},n.removeAll=function(me){for(var le=0,ue=me.length;le<ue;++le)this.remove(me[le]);return this},n.root=function(){return this._root},n.size=function(){var me=0;return this.visit(function(le){if(!le.length)do{++me}while(le=le.next)}),me},n.visit=function(me){var le,ue,Ee,de,xe,Te,we=[],K=this._root;for(K&&we.push(new x(K,this._x0,this._y0,this._x1,this._y1));le=we.pop();)if(!me(K=le.node,Ee=le.x0,de=le.y0,xe=le.x1,Te=le.y1)&&K.length){var oe=(Ee+xe)/2,he=(de+Te)/2;(ue=K[3])&&we.push(new x(ue,oe,he,xe,Te)),(ue=K[2])&&we.push(new x(ue,Ee,he,oe,Te)),(ue=K[1])&&we.push(new x(ue,oe,de,xe,he)),(ue=K[0])&&we.push(new x(ue,Ee,de,oe,he))}return this},n.visitAfter=function(me){var le,ue=[],Ee=[];for(this._root&&ue.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));le=ue.pop();){var de=le.node;if(de.length){var xe,Te=le.x0,we=le.y0,K=le.x1,oe=le.y1,he=(Te+K)/2,ye=(we+oe)/2;(xe=de[0])&&ue.push(new x(xe,Te,we,he,ye)),(xe=de[1])&&ue.push(new x(xe,he,we,K,ye)),(xe=de[2])&&ue.push(new x(xe,Te,ye,he,oe)),(xe=de[3])&&ue.push(new x(xe,he,ye,K,oe))}Ee.push(le)}for(;le=Ee.pop();)me(le.node,le.x0,le.y0,le.x1,le.y1);return this},n.x=function(me){return arguments.length?(this._x=me,this):this._x},n.y=function(me){return arguments.length?(this._y=me,this):this._y};var h=t(15140);function f(me){return me.index}function b(me,le){var ue=me.get(le);if(!ue)throw new Error("missing: "+le);return ue}function v(me){var le,ue,Ee,de,xe,Te=f,we=function(Pe){return 1/Math.min(de[Pe.source.index],de[Pe.target.index])},K=k(30),oe=1;function he(Pe){for(var De=0,fe=me.length;De<oe;++De)for(var ge,be,Ie,He,Ve,tt,nt,st=0;st<fe;++st)be=(ge=me[st]).source,He=(Ie=ge.target).x+Ie.vx-be.x-be.vx||l(),Ve=Ie.y+Ie.vy-be.y-be.vy||l(),He*=tt=((tt=Math.sqrt(He*He+Ve*Ve))-ue[st])/tt*Pe*le[st],Ve*=tt,Ie.vx-=He*(nt=xe[st]),Ie.vy-=Ve*nt,be.vx+=He*(nt=1-nt),be.vy+=Ve*nt}function ye(){if(Ee){var Pe,De,fe=Ee.length,ge=me.length,be=(0,h.UI)(Ee,Te);for(Pe=0,de=new Array(fe);Pe<ge;++Pe)(De=me[Pe]).index=Pe,"object"!=typeof De.source&&(De.source=b(be,De.source)),"object"!=typeof De.target&&(De.target=b(be,De.target)),de[De.source.index]=(de[De.source.index]||0)+1,de[De.target.index]=(de[De.target.index]||0)+1;for(Pe=0,xe=new Array(ge);Pe<ge;++Pe)xe[Pe]=de[(De=me[Pe]).source.index]/(de[De.source.index]+de[De.target.index]);le=new Array(ge),Me(),ue=new Array(ge),Re()}}function Me(){if(Ee)for(var Pe=0,De=me.length;Pe<De;++Pe)le[Pe]=+we(me[Pe],Pe,me)}function Re(){if(Ee)for(var Pe=0,De=me.length;Pe<De;++Pe)ue[Pe]=+K(me[Pe],Pe,me)}return null==me&&(me=[]),he.initialize=function(Pe){Ee=Pe,ye()},he.links=function(Pe){return arguments.length?(me=Pe,ye(),he):me},he.id=function(Pe){return arguments.length?(Te=Pe,he):Te},he.iterations=function(Pe){return arguments.length?(oe=+Pe,he):oe},he.strength=function(Pe){return arguments.length?(we="function"==typeof Pe?Pe:k(+Pe),Me(),he):we},he.distance=function(Pe){return arguments.length?(K="function"==typeof Pe?Pe:k(+Pe),Re(),he):K},he}var g={value:function(){}};function y(){for(var me,le=0,ue=arguments.length,Ee={};le<ue;++le){if(!(me=arguments[le]+"")||me in Ee||/[\s.]/.test(me))throw new Error("illegal type: "+me);Ee[me]=[]}return new d(Ee)}function d(me){this._=me}function m(me,le){return me.trim().split(/^|\s+/).map(function(ue){var Ee="",de=ue.indexOf(".");if(de>=0&&(Ee=ue.slice(de+1),ue=ue.slice(0,de)),ue&&!le.hasOwnProperty(ue))throw new Error("unknown type: "+ue);return{type:ue,name:Ee}})}function w(me,le){for(var ue,Ee=0,de=me.length;Ee<de;++Ee)if((ue=me[Ee]).name===le)return ue.value}function u(me,le,ue){for(var Ee=0,de=me.length;Ee<de;++Ee)if(me[Ee].name===le){me[Ee]=g,me=me.slice(0,Ee).concat(me.slice(Ee+1));break}return null!=ue&&me.push({name:le,value:ue}),me}d.prototype=y.prototype={constructor:d,on:function(me,le){var ue,Ee=this._,de=m(me+"",Ee),xe=-1,Te=de.length;if(!(arguments.length<2)){if(null!=le&&"function"!=typeof le)throw new Error("invalid callback: "+le);for(;++xe<Te;)if(ue=(me=de[xe]).type)Ee[ue]=u(Ee[ue],me.name,le);else if(null==le)for(ue in Ee)Ee[ue]=u(Ee[ue],me.name,null);return this}for(;++xe<Te;)if((ue=(me=de[xe]).type)&&(ue=w(Ee[ue],me.name)))return ue},copy:function(){var me={},le=this._;for(var ue in le)me[ue]=le[ue].slice();return new d(me)},call:function(me,le){if((ue=arguments.length-2)>0)for(var ue,Ee,de=new Array(ue),xe=0;xe<ue;++xe)de[xe]=arguments[xe+2];if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(xe=0,ue=(Ee=this._[me]).length;xe<ue;++xe)Ee[xe].value.apply(le,de)},apply:function(me,le,ue){if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(var Ee=this._[me],de=0,xe=Ee.length;de<xe;++de)Ee[de].value.apply(le,ue)}};var S,_,E=y,L=0,C=0,P=0,z=0,j=0,R=0,V="object"==typeof performance&&performance.now?performance:Date,D="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(me){setTimeout(me,17)};function B(){return j||(D(N),j=V.now()+R)}function N(){j=0}function U(){this._call=this._time=this._next=null}function J(me,le,ue){var Ee=new U;return Ee.restart(me,le,ue),Ee}function Y(){j=(z=V.now())+R,L=C=0;try{!function(){B(),++L;for(var me,le=S;le;)(me=j-le._time)>=0&&le._call.call(null,me),le=le._next;--L}()}finally{L=0,function(){for(var me,le,ue=S,Ee=1/0;ue;)ue._call?(Ee>ue._time&&(Ee=ue._time),me=ue,ue=ue._next):(le=ue._next,ue._next=null,ue=me?me._next=le:S=le);_=me,H(Ee)}(),j=0}}function q(){var me=V.now(),le=me-z;le>1e3&&(R-=le,z=me)}function H(me){L||(C&&(C=clearTimeout(C)),me-j>24?(me<1/0&&(C=setTimeout(Y,me-V.now()-R)),P&&(P=clearInterval(P))):(P||(z=V.now(),P=setInterval(q,1e3)),L=1,D(Y)))}function X(me){return me.x}function Q(me){return me.y}U.prototype=J.prototype={constructor:U,restart:function(me,le,ue){if("function"!=typeof me)throw new TypeError("callback is not a function");ue=(null==ue?B():+ue)+(null==le?0:+le),this._next||_===this||(_?_._next=this:S=this,_=this),this._call=me,this._time=ue,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}};var ne=Math.PI*(3-Math.sqrt(5));function re(me){var le,ue=1,Ee=.001,de=1-Math.pow(Ee,1/300),xe=0,Te=.6,we=(0,h.UI)(),K=J(he),oe=E("tick","end");function he(){ye(),oe.call("tick",le),ue<Ee&&(K.stop(),oe.call("end",le))}function ye(Pe){var De,fe,ge=me.length;void 0===Pe&&(Pe=1);for(var be=0;be<Pe;++be)for(ue+=(xe-ue)*de,we.each(function(Ie){Ie(ue)}),De=0;De<ge;++De)null==(fe=me[De]).fx?fe.x+=fe.vx*=Te:(fe.x=fe.fx,fe.vx=0),null==fe.fy?fe.y+=fe.vy*=Te:(fe.y=fe.fy,fe.vy=0);return le}function Me(){for(var Pe,De=0,fe=me.length;De<fe;++De){if((Pe=me[De]).index=De,null!=Pe.fx&&(Pe.x=Pe.fx),null!=Pe.fy&&(Pe.y=Pe.fy),isNaN(Pe.x)||isNaN(Pe.y)){var ge=10*Math.sqrt(De),be=De*ne;Pe.x=ge*Math.cos(be),Pe.y=ge*Math.sin(be)}(isNaN(Pe.vx)||isNaN(Pe.vy))&&(Pe.vx=Pe.vy=0)}}function Re(Pe){return Pe.initialize&&Pe.initialize(me),Pe}return null==me&&(me=[]),Me(),le={tick:ye,restart:function(){return K.restart(he),le},stop:function(){return K.stop(),le},nodes:function(Pe){return arguments.length?(me=Pe,Me(),we.each(Re),le):me},alpha:function(Pe){return arguments.length?(ue=+Pe,le):ue},alphaMin:function(Pe){return arguments.length?(Ee=+Pe,le):Ee},alphaDecay:function(Pe){return arguments.length?(de=+Pe,le):+de},alphaTarget:function(Pe){return arguments.length?(xe=+Pe,le):xe},velocityDecay:function(Pe){return arguments.length?(Te=1-Pe,le):1-Te},force:function(Pe,De){return arguments.length>1?(null==De?we.remove(Pe):we.set(Pe,Re(De)),le):we.get(Pe)},find:function(Pe,De,fe){var ge,be,Ie,He,Ve,tt=0,nt=me.length;for(null==fe?fe=1/0:fe*=fe,tt=0;tt<nt;++tt)(Ie=(ge=Pe-(He=me[tt]).x)*ge+(be=De-He.y)*be)<fe&&(Ve=He,fe=Ie);return Ve},on:function(Pe,De){return arguments.length>1?(oe.on(Pe,De),le):oe.on(Pe)}}}function ae(){var me,le,ue,Ee,de=k(-30),xe=1,Te=1/0,we=.81;function K(Me){var Re,Pe=me.length,De=e(me,X,Q).visitAfter(he);for(ue=Me,Re=0;Re<Pe;++Re)le=me[Re],De.visit(ye)}function oe(){if(me){var Me,Re,Pe=me.length;for(Ee=new Array(Pe),Me=0;Me<Pe;++Me)Ee[(Re=me[Me]).index]=+de(Re,Me,me)}}function he(Me){var Re,Pe,De,fe,ge,be=0,Ie=0;if(Me.length){for(De=fe=ge=0;ge<4;++ge)(Re=Me[ge])&&(Pe=Math.abs(Re.value))&&(be+=Re.value,Ie+=Pe,De+=Pe*Re.x,fe+=Pe*Re.y);Me.x=De/Ie,Me.y=fe/Ie}else{(Re=Me).x=Re.data.x,Re.y=Re.data.y;do{be+=Ee[Re.data.index]}while(Re=Re.next)}Me.value=be}function ye(Me,Re,Pe,De){if(!Me.value)return!0;var fe=Me.x-le.x,ge=Me.y-le.y,be=De-Re,Ie=fe*fe+ge*ge;if(be*be/we<Ie)return Ie<Te&&(0===fe&&(Ie+=(fe=l())*fe),0===ge&&(Ie+=(ge=l())*ge),Ie<xe&&(Ie=Math.sqrt(xe*Ie)),le.vx+=fe*Me.value*ue/Ie,le.vy+=ge*Me.value*ue/Ie),!0;if(!(Me.length||Ie>=Te)){(Me.data!==le||Me.next)&&(0===fe&&(Ie+=(fe=l())*fe),0===ge&&(Ie+=(ge=l())*ge),Ie<xe&&(Ie=Math.sqrt(xe*Ie)));do{Me.data!==le&&(le.vx+=fe*(be=Ee[Me.data.index]*ue/Ie),le.vy+=ge*be)}while(Me=Me.next)}}return K.initialize=function(Me){me=Me,oe()},K.strength=function(Me){return arguments.length?(de="function"==typeof Me?Me:k(+Me),oe(),K):de},K.distanceMin=function(Me){return arguments.length?(xe=Me*Me,K):Math.sqrt(xe)},K.distanceMax=function(Me){return arguments.length?(Te=Me*Me,K):Math.sqrt(Te)},K.theta=function(Me){return arguments.length?(we=Me*Me,K):Math.sqrt(we)},K}function se(me,le,ue){var Ee,de,xe,Te=k(.1);function we(oe){for(var he=0,ye=Ee.length;he<ye;++he){var Me=Ee[he],Re=Me.x-le||1e-6,Pe=Me.y-ue||1e-6,De=Math.sqrt(Re*Re+Pe*Pe),fe=(xe[he]-De)*de[he]*oe/De;Me.vx+=Re*fe,Me.vy+=Pe*fe}}function K(){if(Ee){var oe,he=Ee.length;for(de=new Array(he),xe=new Array(he),oe=0;oe<he;++oe)xe[oe]=+me(Ee[oe],oe,Ee),de[oe]=isNaN(xe[oe])?0:+Te(Ee[oe],oe,Ee)}}return"function"!=typeof me&&(me=k(+me)),null==le&&(le=0),null==ue&&(ue=0),we.initialize=function(oe){Ee=oe,K()},we.strength=function(oe){return arguments.length?(Te="function"==typeof oe?oe:k(+oe),K(),we):Te},we.radius=function(oe){return arguments.length?(me="function"==typeof oe?oe:k(+oe),K(),we):me},we.x=function(oe){return arguments.length?(le=+oe,we):le},we.y=function(oe){return arguments.length?(ue=+oe,we):ue},we}function pe(me){var le,ue,Ee,de=k(.1);function xe(we){for(var K,oe=0,he=le.length;oe<he;++oe)(K=le[oe]).vx+=(Ee[oe]-K.x)*ue[oe]*we}function Te(){if(le){var we,K=le.length;for(ue=new Array(K),Ee=new Array(K),we=0;we<K;++we)ue[we]=isNaN(Ee[we]=+me(le[we],we,le))?0:+de(le[we],we,le)}}return"function"!=typeof me&&(me=k(null==me?0:+me)),xe.initialize=function(we){le=we,Te()},xe.strength=function(we){return arguments.length?(de="function"==typeof we?we:k(+we),Te(),xe):de},xe.x=function(we){return arguments.length?(me="function"==typeof we?we:k(+we),Te(),xe):me},xe}function ke(me){var le,ue,Ee,de=k(.1);function xe(we){for(var K,oe=0,he=le.length;oe<he;++oe)(K=le[oe]).vy+=(Ee[oe]-K.y)*ue[oe]*we}function Te(){if(le){var we,K=le.length;for(ue=new Array(K),Ee=new Array(K),we=0;we<K;++we)ue[we]=isNaN(Ee[we]=+me(le[we],we,le))?0:+de(le[we],we,le)}}return"function"!=typeof me&&(me=k(null==me?0:+me)),xe.initialize=function(we){le=we,Te()},xe.strength=function(we){return arguments.length?(de="function"==typeof we?we:k(+we),Te(),xe):de},xe.y=function(we){return arguments.length?(me="function"==typeof we?we:k(+we),Te(),xe):me},xe}},60721:function($,I,t){"use strict";function M(c,h){if((f=(c=h?c.toExponential(h-1):c.toExponential()).indexOf("e"))<0)return null;var f,b=c.slice(0,f);return[b.length>1?b[0]+b.slice(2):b,+c.slice(f+1)]}t.d(I,{WU:function(){return r},FF:function(){return i}});var k,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(c){if(!(h=l.exec(c)))throw new Error("invalid format: "+c);var h;return new x({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function x(c){this.fill=void 0===c.fill?" ":c.fill+"",this.align=void 0===c.align?">":c.align+"",this.sign=void 0===c.sign?"-":c.sign+"",this.symbol=void 0===c.symbol?"":c.symbol+"",this.zero=!!c.zero,this.width=void 0===c.width?void 0:+c.width,this.comma=!!c.comma,this.precision=void 0===c.precision?void 0:+c.precision,this.trim=!!c.trim,this.type=void 0===c.type?"":c.type+""}function p(c,h){var f=M(c,h);if(!f)return c+"";var b=f[0],v=f[1];return v<0?"0."+new Array(-v).join("0")+b:b.length>v+1?b.slice(0,v+1)+"."+b.slice(v+1):b+new Array(v-b.length+2).join("0")}T.prototype=x.prototype,x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(c,h){return(100*c).toFixed(h)},b:function(c){return Math.round(c).toString(2)},c:function(c){return c+""},d:function(c){return Math.abs(c=Math.round(c))>=1e21?c.toLocaleString("en").replace(/,/g,""):c.toString(10)},e:function(c,h){return c.toExponential(h)},f:function(c,h){return c.toFixed(h)},g:function(c,h){return c.toPrecision(h)},o:function(c){return Math.round(c).toString(8)},p:function(c,h){return p(100*c,h)},r:p,s:function(c,h){var f=M(c,h);if(!f)return c+"";var b=f[0],v=f[1],g=v-(k=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1,y=b.length;return g===y?b:g>y?b+new Array(g-y+1).join("0"):g>0?b.slice(0,g)+"."+b.slice(g):"0."+new Array(1-g).join("0")+M(c,Math.max(0,h+g-1))[0]},X:function(c){return Math.round(c).toString(16).toUpperCase()},x:function(c){return Math.round(c).toString(16)}};function e(c){return c}var o,r,n=Array.prototype.map,a=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function i(c){var h,f,_,b=void 0===c.grouping||void 0===c.thousands?e:(h=n.call(c.grouping,Number),f=c.thousands+"",function(_,E){for(var L=_.length,C=[],P=0,z=h[0],j=0;L>0&&z>0&&(j+z+1>E&&(z=Math.max(1,E-j)),C.push(_.substring(L-=z,L+z)),!((j+=z+1)>E));)z=h[P=(P+1)%h.length];return C.reverse().join(f)}),v=void 0===c.currency?"":c.currency[0]+"",g=void 0===c.currency?"":c.currency[1]+"",y=void 0===c.decimal?".":c.decimal+"",d=void 0===c.numerals?e:(_=n.call(c.numerals,String),function(E){return E.replace(/[0-9]/g,function(L){return _[+L]})}),m=void 0===c.percent?"%":c.percent+"",w=void 0===c.minus?"-":c.minus+"",u=void 0===c.nan?"NaN":c.nan+"";function S(_){var E=(_=T(_)).fill,L=_.align,C=_.sign,P=_.symbol,z=_.zero,j=_.width,R=_.comma,V=_.precision,D=_.trim,B=_.type;"n"===B?(R=!0,B="g"):s[B]||(void 0===V&&(V=12),D=!0,B="g"),(z||"0"===E&&"="===L)&&(z=!0,E="0",L="=");var N="$"===P?v:"#"===P&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",U="$"===P?g:/[%p]/.test(B)?m:"",J=s[B],Y=/[defgprs%]/.test(B);function q(H){var X,Q,ne,re=N,ae=U;if("c"===B)ae=J(H)+ae,H="";else{var se=(H=+H)<0||1/H<0;if(H=isNaN(H)?u:J(Math.abs(H),V),D&&(H=function(me){e:for(var le,ue=me.length,Ee=1,de=-1;Ee<ue;++Ee)switch(me[Ee]){case".":de=le=Ee;break;case"0":0===de&&(de=Ee),le=Ee;break;default:if(!+me[Ee])break e;de>0&&(de=0)}return de>0?me.slice(0,de)+me.slice(le+1):me}(H)),se&&0==+H&&"+"!==C&&(se=!1),re=(se?"("===C?C:w:"-"===C||"("===C?"":C)+re,ae=("s"===B?a[8+k/3]:"")+ae+(se&&"("===C?")":""),Y)for(X=-1,Q=H.length;++X<Q;)if(48>(ne=H.charCodeAt(X))||ne>57){ae=(46===ne?y+H.slice(X+1):H.slice(X))+ae,H=H.slice(0,X);break}}R&&!z&&(H=b(H,1/0));var pe=re.length+H.length+ae.length,ke=pe<j?new Array(j-pe+1).join(E):"";switch(R&&z&&(H=b(ke+H,ke.length?j-ae.length:1/0),ke=""),L){case"<":H=re+H+ae+ke;break;case"=":H=re+ke+H+ae;break;case"^":H=ke.slice(0,pe=ke.length>>1)+re+H+ae+ke.slice(pe);break;default:H=ke+re+H+ae}return d(H)}return V=void 0===V?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,V)):Math.max(0,Math.min(20,V)),q.toString=function(){return _+""},q}return{format:S,formatPrefix:function(_,E){var L,C=S(((_=T(_)).type="f",_)),P=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=M(Math.abs(L)))?L[1]:NaN)/3)))),z=Math.pow(10,-P),j=a[8+P/3];return function(R){return C(z*R)+j}}}}o=i({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=o.format},65704:function($,I,t){"use strict";t.r(I),t.d(I,{geoAiry:function(){return R},geoAiryRaw:function(){return j},geoAitoff:function(){return D},geoAitoffRaw:function(){return V},geoArmadillo:function(){return N},geoArmadilloRaw:function(){return B},geoAugust:function(){return J},geoAugustRaw:function(){return U},geoBaker:function(){return X},geoBakerRaw:function(){return H},geoBerghaus:function(){return re},geoBerghausRaw:function(){return ne},geoBertin1953:function(){return Ee},geoBertin1953Raw:function(){return ue},geoBoggs:function(){return ye},geoBoggsRaw:function(){return he},geoBonne:function(){return fe},geoBonneRaw:function(){return De},geoBottomley:function(){return be},geoBottomleyRaw:function(){return ge},geoBromley:function(){return He},geoBromleyRaw:function(){return Ie},geoChamberlin:function(){return Pt},geoChamberlinAfrica:function(){return pt},geoChamberlinRaw:function(){return wt},geoCollignon:function(){return Ot},geoCollignonRaw:function(){return St},geoCraig:function(){return Dt},geoCraigRaw:function(){return jt},geoCraster:function(){return Ne},geoCrasterRaw:function(){return Ze},geoCylindricalEqualArea:function(){return at},geoCylindricalEqualAreaRaw:function(){return Je},geoCylindricalStereographic:function(){return ze},geoCylindricalStereographicRaw:function(){return Se},geoEckert1:function(){return it},geoEckert1Raw:function(){return Ke},geoEckert2:function(){return mt},geoEckert2Raw:function(){return ct},geoEckert3:function(){return At},geoEckert3Raw:function(){return Lt},geoEckert4:function(){return Et},geoEckert4Raw:function(){return ht},geoEckert5:function(){return kt},geoEckert5Raw:function(){return gt},geoEckert6:function(){return Ut},geoEckert6Raw:function(){return It},geoEisenlohr:function(){return Xt},geoEisenlohrRaw:function(){return qt},geoFahey:function(){return nn},geoFaheyRaw:function(){return fn},geoFoucaut:function(){return jn},geoFoucautRaw:function(){return xn},geoFoucautSinusoidal:function(){return en},geoFoucautSinusoidalRaw:function(){return mn},geoGilbert:function(){return kn},geoGingery:function(){return er},geoGingeryRaw:function(){return zn},geoGinzburg4:function(){return ur},geoGinzburg4Raw:function(){return mr},geoGinzburg5:function(){return lr},geoGinzburg5Raw:function(){return $n},geoGinzburg6:function(){return Gt},geoGinzburg6Raw:function(){return hr},geoGinzburg8:function(){return An},geoGinzburg8Raw:function(){return pn},geoGinzburg9:function(){return Rn},geoGinzburg9Raw:function(){return Tn},geoGringorten:function(){return Yn},geoGringortenQuincuncial:function(){return Cs},geoGringortenRaw:function(){return Un},geoGuyou:function(){return zt},geoGuyouRaw:function(){return Mn},geoHammer:function(){return ke},geoHammerRaw:function(){return se},geoHammerRetroazimuthal:function(){return Sn},geoHammerRetroazimuthalRaw:function(){return rn},geoHealpix:function(){return Wn},geoHealpixRaw:function(){return hn},geoHill:function(){return nr},geoHillRaw:function(){return Gn},geoHomolosine:function(){return xr},geoHomolosineRaw:function(){return br},geoHufnagel:function(){return sr},geoHufnagelRaw:function(){return Tr},geoHyperelliptical:function(){return fi},geoHyperellipticalRaw:function(){return ei},geoInterrupt:function(){return si},geoInterruptedBoggs:function(){return Ma},geoInterruptedHomolosine:function(){return Zo},geoInterruptedMollweide:function(){return Vs},geoInterruptedMollweideHemispheres:function(){return Sa},geoInterruptedQuarticAuthalic:function(){return Do},geoInterruptedSinuMollweide:function(){return Fi},geoInterruptedSinusoidal:function(){return ba},geoKavrayskiy7:function(){return yo},geoKavrayskiy7Raw:function(){return Ea},geoLagrange:function(){return xo},geoLagrangeRaw:function(){return ti},geoLarrivee:function(){return Ja},geoLarriveeRaw:function(){return Ha},geoLaskowski:function(){return ol},geoLaskowskiRaw:function(){return us},geoLittrow:function(){return sl},geoLittrowRaw:function(){return io},geoLoximuthal:function(){return ml},geoLoximuthalRaw:function(){return ll},geoMiller:function(){return ul},geoMillerRaw:function(){return qs},geoModifiedStereographic:function(){return Io},geoModifiedStereographicAlaska:function(){return Ys},geoModifiedStereographicGs48:function(){return Oo},geoModifiedStereographicGs50:function(){return Ms},geoModifiedStereographicLee:function(){return Xo},geoModifiedStereographicMiller:function(){return bo},geoModifiedStereographicRaw:function(){return Gs},geoMollweide:function(){return we},geoMollweideRaw:function(){return Te},geoMtFlatPolarParabolic:function(){return yl},geoMtFlatPolarParabolicRaw:function(){return _o},geoMtFlatPolarQuartic:function(){return cs},geoMtFlatPolarQuarticRaw:function(){return Ss},geoMtFlatPolarSinusoidal:function(){return Jo},geoMtFlatPolarSinusoidalRaw:function(){return zo},geoNaturalEarth:function(){return Ia.Z},geoNaturalEarth2:function(){return fs},geoNaturalEarth2Raw:function(){return Ws},geoNaturalEarthRaw:function(){return Ia.K},geoNellHammer:function(){return hs},geoNellHammerRaw:function(){return Ko},geoNicolosi:function(){return ps},geoNicolosiRaw:function(){return $o},geoPatterson:function(){return Es},geoPattersonRaw:function(){return wo},geoPeirceQuincuncial:function(){return Ps},geoPierceQuincuncial:function(){return Ps},geoPolyconic:function(){return Js},geoPolyconicRaw:function(){return ms},geoPolyhedral:function(){return To},geoPolyhedralButterfly:function(){return Ls},geoPolyhedralCollignon:function(){return $s},geoPolyhedralWaterman:function(){return jo},geoProject:function(){return Vo},geoQuantize:function(){return oa},geoQuincuncial:function(){return _a},geoRectangularPolyconic:function(){return Ho},geoRectangularPolyconicRaw:function(){return wr},geoRobinson:function(){return es},geoRobinsonRaw:function(){return Os},geoSatellite:function(){return ns},geoSatelliteRaw:function(){return ts},geoSinuMollweide:function(){return cr},geoSinuMollweideRaw:function(){return ir},geoSinusoidal:function(){return Pe},geoSinusoidalRaw:function(){return Re},geoStitch:function(){return Go},geoTimes:function(){return Ba},geoTimesRaw:function(){return $i},geoTwoPointAzimuthal:function(){return Na},geoTwoPointAzimuthalRaw:function(){return bs},geoTwoPointAzimuthalUsa:function(){return La},geoTwoPointEquidistant:function(){return ii},geoTwoPointEquidistantRaw:function(){return Qa},geoTwoPointEquidistantUsa:function(){return ha},geoVanDerGrinten:function(){return Ga},geoVanDerGrinten2:function(){return eo},geoVanDerGrinten2Raw:function(){return pa},geoVanDerGrinten3:function(){return ho},geoVanDerGrinten3Raw:function(){return So},geoVanDerGrinten4:function(){return ja},geoVanDerGrinten4Raw:function(){return Qi},geoVanDerGrintenRaw:function(){return Hi},geoWagner:function(){return Ir},geoWagner4:function(){return zs},geoWagner4Raw:function(){return ea},geoWagner6:function(){return as},geoWagner6Raw:function(){return da},geoWagner7:function(){return is},geoWagnerRaw:function(){return Lr},geoWiechel:function(){return ui},geoWiechelRaw:function(){return go},geoWinkel3:function(){return Rs},geoWinkel3Raw:function(){return gi}});var M=t(15002),k=Math.abs,l=Math.atan,T=Math.atan2,x=Math.cos,p=Math.exp,s=Math.floor,e=Math.log,o=Math.max,r=Math.min,n=Math.pow,a=Math.round,i=Math.sign||function(We){return We>0?1:We<0?-1:0},c=Math.sin,h=Math.tan,f=1e-6,b=1e-12,v=Math.PI,g=v/2,y=v/4,d=Math.SQRT1_2,m=C(2),w=C(v),u=2*v,S=180/v,_=v/180;function E(We){return We>1?g:We<-1?-g:Math.asin(We)}function L(We){return We>1?0:We<-1?v:Math.acos(We)}function C(We){return We>0?Math.sqrt(We):0}function P(We){return(p(We)-p(-We))/2}function z(We){return(p(We)+p(-We))/2}function j(We){var $e=h(We/2),ot=2*e(x(We/2))/($e*$e);function ft(bt,yt){var F=x(bt),W=x(yt),G=c(yt),te=W*F,ve=-((1-te?e((1+te)/2)/(1-te):-.5)+ot/(1+te));return[ve*W*c(bt),ve*G]}return ft.invert=function(bt,yt){var F,W=C(bt*bt+yt*yt),G=-We/2,te=50;if(!W)return[0,0];do{var ve=G/2,Ce=x(ve),Be=c(ve),qe=Be/Ce,et=-e(k(Ce));G-=F=(2/qe*et-ot*qe-W)/(-et/(Be*Be)+1-ot/(2*Ce*Ce))*(Ce<0?.7:1)}while(k(F)>f&&--te>0);var vt=c(G);return[T(bt*vt,W*x(G)),E(yt*vt/W)]},ft}function R(){var We=g,$e=(0,M.r)(j),ot=$e(We);return ot.radius=function(ft){return arguments.length?$e(We=ft*_):We*S},ot.scale(179.976).clipAngle(147)}function V(We,$e){var bt,ot=x($e),ft=(bt=L(ot*x(We/=2)))?bt/Math.sin(bt):1;return[2*ot*c(We)*ft,c($e)*ft]}function D(){return(0,M.Z)(V).scale(152.63)}function B(We){var $e=c(We),ot=x(We),ft=We>=0?1:-1,bt=h(ft*We),yt=(1+$e-ot)/2;function F(W,G){var te=x(G),ve=x(W/=2);return[(1+te)*c(W),(ft*G>-T(ve,bt)-.001?0:10*-ft)+yt+c(G)*ot-(1+te)*$e*ve]}return F.invert=function(W,G){var te=0,ve=0,Ce=50;do{var Be=x(te),qe=c(te),et=x(ve),vt=c(ve),xt=1+et,ee=xt*qe-W,ce=yt+vt*ot-xt*$e*Be-G,Ae=xt*Be/2,Oe=-qe*vt,Fe=$e*xt*qe/2,Ue=ot*et+$e*Be*vt,Ge=Oe*Fe-Ue*Ae,Xe=(ce*Oe-ee*Ue)/Ge/2,rt=(ee*Fe-ce*Ae)/Ge;k(rt)>2&&(rt/=2),te-=Xe,ve-=rt}while((k(Xe)>f||k(rt)>f)&&--Ce>0);return ft*ve>-T(x(te),bt)-.001?[2*te,ve]:null},F}function N(){var We=20*_,$e=We>=0?1:-1,ot=h($e*We),ft=(0,M.r)(B),bt=ft(We),yt=bt.stream;return bt.parallel=function(F){return arguments.length?(ot=h(($e=(We=F*_)>=0?1:-1)*We),ft(We)):We*S},bt.stream=function(F){var W=bt.rotate(),G=yt(F),te=(bt.rotate([0,0]),yt(F)),ve=bt.precision();return bt.rotate(W),G.sphere=function(){te.polygonStart(),te.lineStart();for(var Ce=-180*$e;$e*Ce<180;Ce+=90*$e)te.point(Ce,90*$e);if(We)for(;$e*(Ce-=3*$e*ve)>=-180;)te.point(Ce,$e*-T(x(Ce*_/2),ot)*S);te.lineEnd(),te.polygonEnd()},G},bt.scale(218.695).center([0,28.0974])}function U(We,$e){var ot=h($e/2),ft=C(1-ot*ot),bt=1+ft*x(We/=2),yt=c(We)*ft/bt,F=ot/bt,W=yt*yt,G=F*F;return[1.3333333333333333*yt*(3+W-3*G),1.3333333333333333*F*(3+3*W-G)]}function J(){return(0,M.Z)(U).scale(66.1603)}V.invert=function(We,$e){if(!(We*We+4*$e*$e>v*v+f)){var ot=We,ft=$e,bt=25;do{var yt,F=c(ot),W=c(ot/2),G=x(ot/2),te=c(ft),ve=x(ft),Ce=c(2*ft),Be=te*te,qe=ve*ve,et=W*W,vt=1-qe*G*G,xt=vt?L(ve*G)*C(yt=1/vt):yt=0,ee=2*xt*ve*W-We,ce=xt*te-$e,Ae=yt*(qe*et+xt*ve*G*Be),Oe=yt*(.5*F*Ce-2*xt*te*W),Fe=.25*yt*(Ce*W-xt*te*qe*F),Ue=yt*(Be*G+xt*et*ve),Ge=Oe*Fe-Ue*Ae;if(!Ge)break;var Xe=(ce*Oe-ee*Ue)/Ge,rt=(ee*Fe-ce*Ae)/Ge;ot-=Xe,ft-=rt}while((k(Xe)>f||k(rt)>f)&&--bt>0);return[ot,ft]}},U.invert=function(We,$e){if($e*=.375,!(We*=.375)&&k($e)>1)return null;var te,ot=1+We*We+$e*$e,ft=C((ot-C(ot*ot-4*$e*$e))/2),bt=E(ft)/3,yt=ft?(te=k($e/ft),e(te+C(te*te-1))/3):function(te){return e(te+C(te*te+1))}(k(We))/3,F=x(bt),W=z(yt),G=W*W-F*F;return[2*i(We)*T(P(yt)*F,.25-G),2*i($e)*T(W*c(bt),.25+G)]};var Y=C(8),q=e(1+m);function H(We,$e){var ot=k($e);return ot<y?[We,e(h(y+$e/2))]:[We*x(ot)*(2*m-1/c(ot)),i($e)*(2*m*(ot-y)-e(h(ot/2)))]}function X(){return(0,M.Z)(H).scale(112.314)}H.invert=function(We,$e){if((ft=k($e))<q)return[We,2*l(p($e))-g];var ot,ft,bt=y,yt=25;do{var F=x(bt/2),W=h(bt/2);bt-=ot=(Y*(bt-y)-e(W)-ft)/(Y-F*F/(2*W))}while(k(ot)>b&&--yt>0);return[We/(x(bt)*(Y-1/c(bt))),i($e)*bt]};var Q=t(17889);function ne(We){var $e=2*v/We;function ot(ft,bt){var yt=(0,Q.N)(ft,bt);if(k(ft)>g){var F=T(yt[1],yt[0]),W=C(yt[0]*yt[0]+yt[1]*yt[1]),G=$e*a((F-g)/$e)+g,te=T(c(F-=G),2-x(F));F=G+E(v/W*c(te))-te,yt[0]=W*x(F),yt[1]=W*c(F)}return yt}return ot.invert=function(ft,bt){var yt=C(ft*ft+bt*bt);if(yt>g){var F=T(bt,ft),W=$e*a((F-g)/$e)+g,G=F>W?-1:1,te=yt*x(W-F),ve=1/h(G*L((te-v)/C(v*(v-2*te)+yt*yt)));F=W+2*l((ve+G*C(ve*ve-3))/3),ft=yt*x(F),bt=yt*c(F)}return Q.N.invert(ft,bt)},ot}function re(){var We=5,$e=(0,M.r)(ne),ot=$e(We),ft=ot.stream,bt=.01,yt=-x(bt*_),F=c(bt*_);return ot.lobes=function(W){return arguments.length?$e(We=+W):We},ot.stream=function(W){var G=ot.rotate(),te=ft(W),ve=(ot.rotate([0,0]),ft(W));return ot.rotate(G),te.sphere=function(){ve.polygonStart(),ve.lineStart();for(var Ce=0,Be=360/We,qe=2*v/We,et=90-180/We,vt=g;Ce<We;++Ce,et-=Be,vt-=qe)ve.point(T(F*x(vt),yt)*S,E(F*c(vt))*S),et<-90?(ve.point(-90,-180-et-bt),ve.point(-90,-180-et+bt)):(ve.point(90,et+bt),ve.point(90,et-bt));ve.lineEnd(),ve.polygonEnd()},te},ot.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=t(12956);function se(We,$e){if(arguments.length<2&&($e=We),1===$e)return ae.l;if($e===1/0)return pe;function ot(ft,bt){var yt=(0,ae.l)(ft/$e,bt);return yt[0]*=We,yt}return ot.invert=function(ft,bt){var yt=ae.l.invert(ft/We,bt);return yt[0]*=$e,yt},ot}function pe(We,$e){return[We*x($e)/x($e/=2),2*c($e)]}function ke(){var We=2,$e=(0,M.r)(se),ot=$e(We);return ot.coefficient=function(ft){return arguments.length?$e(We=+ft):We},ot.scale(169.529)}function me(We,$e,ot){var ft,bt,yt,F=100;ot=void 0===ot?0:+ot,$e=+$e;do{(bt=We(ot))===(yt=We(ot+f))&&(yt=bt+f),ot-=ft=-1e-6*(bt-$e)/(bt-yt)}while(F-- >0&&k(ft)>f);return F<0?NaN:ot}function le(We,$e,ot){return void 0===$e&&($e=40),void 0===ot&&(ot=b),function(ft,bt,yt,F){var W,G,te;yt=void 0===yt?0:+yt,F=void 0===F?0:+F;for(var ve=0;ve<$e;ve++){var Ce=We(yt,F),Be=Ce[0]-ft,qe=Ce[1]-bt;if(k(Be)<ot&&k(qe)<ot)break;var et=Be*Be+qe*qe;if(et>W)yt-=G/=2,F-=te/=2;else{W=et;var vt=(yt>0?-1:1)*ot,xt=(F>0?-1:1)*ot,ee=We(yt+vt,F),ce=We(yt,F+xt),Ae=(ee[0]-Ce[0])/vt,Oe=(ee[1]-Ce[1])/vt,Fe=(ce[0]-Ce[0])/xt,Ue=(ce[1]-Ce[1])/xt,Ge=Ue*Ae-Oe*Fe,Xe=(k(Ge)<.5?.5:1)/Ge;if(yt+=G=(qe*Fe-Be*Ue)*Xe,F+=te=(Be*Oe-qe*Ae)*Xe,k(G)<ot&&k(te)<ot)break}}return[yt,F]}}function ue(){var We=se(1.68,2);function $e(ot,ft){if(ot+ft<-1.4){var bt=(ot-ft+1.6)*(ot+ft+1.4)/8;ot+=bt,ft-=.8*bt*c(ft+v/2)}var yt=We(ot,ft),F=(1-x(ot*ft))/12;return yt[1]<0&&(yt[0]*=1+F),yt[1]>0&&(yt[1]*=1+F/1.5*yt[0]*yt[0]),yt}return $e.invert=le($e),$e}function Ee(){return(0,M.Z)(ue()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function de(We,$e){var ot,ft=We*c($e),bt=30;do{$e-=ot=($e+c($e)-ft)/(1+x($e))}while(k(ot)>f&&--bt>0);return $e/2}function xe(We,$e,ot){function ft(bt,yt){return[We*bt*x(yt=de(ot,yt)),$e*c(yt)]}return ft.invert=function(bt,yt){return yt=E(yt/$e),[bt/(We*x(yt)),E((2*yt+c(2*yt))/ot)]},ft}pe.invert=function(We,$e){var ot=2*E($e/2);return[We*x(ot/2)/x(ot),ot]};var Te=xe(m/g,m,v);function we(){return(0,M.Z)(Te).scale(169.529)}var K=2.00276;function he(We,$e){var ot=de(v,$e);return[K*We/(1/x($e)+1.11072/x(ot)),($e+m*c(ot))/K]}function ye(){return(0,M.Z)(he).scale(160.857)}function Me(We){var $e=0,ot=(0,M.r)(We),ft=ot($e);return ft.parallel=function(bt){return arguments.length?ot($e=bt*_):$e*S},ft}function Re(We,$e){return[We*x($e),$e]}function Pe(){return(0,M.Z)(Re).scale(152.63)}function De(We){if(!We)return Re;var $e=1/h(We);function ot(ft,bt){var yt=$e+We-bt,F=yt&&ft*x(bt)/yt;return[yt*c(F),$e-yt*x(F)]}return ot.invert=function(ft,bt){var yt=C(ft*ft+(bt=$e-bt)*bt),F=$e+We-yt;return[yt/x(F)*T(ft,bt),F]},ot}function fe(){return Me(De).scale(123.082).center([0,26.1441]).parallel(45)}function ge(We){function $e(ot,ft){var bt=g-ft,yt=bt&&ot*We*c(bt)/bt;return[bt*c(yt)/We,g-bt*x(yt)]}return $e.invert=function(ot,ft){var bt=ot*We,yt=g-ft,F=C(bt*bt+yt*yt),W=T(bt,yt);return[(F?F/c(F):1)*W/We,g-F]},$e}function be(){var We=.5,$e=(0,M.r)(ge),ot=$e(We);return ot.fraction=function(ft){return arguments.length?$e(We=+ft):We},ot.scale(158.837)}he.invert=function(We,$e){var ot,ft,bt=K*$e,yt=$e<0?-y:y,F=25;do{ft=bt-m*c(yt),yt-=ot=(c(2*yt)+2*yt-v*c(ft))/(2*x(2*yt)+2+v*x(ft)*m*x(yt))}while(k(ot)>f&&--F>0);return ft=bt-m*c(yt),[We*(1/x(ft)+1.11072/x(yt))/K,ft]},Re.invert=function(We,$e){return[We/x($e),$e]};var Ie=xe(1,4/v,v);function He(){return(0,M.Z)(Ie).scale(152.63)}var Ve=t(66624),tt=t(49386);function nt(We,$e,ot,ft,bt,yt){var F,W=x(yt);if(k(We)>1||k(yt)>1)F=L(ot*bt+$e*ft*W);else{var G=c(We/2),te=c(yt/2);F=2*E(C(G*G+$e*ft*te*te))}return k(F)>f?[F,T(ft*c(yt),$e*bt-ot*ft*W)]:[0,0]}function st(We,$e,ot){return L((We*We+$e*$e-ot*ot)/(2*We*$e))}function dt(We){return We-2*v*s((We+v)/(2*v))}function wt(We,$e,ot){for(var ft,bt=[[We[0],We[1],c(We[1]),x(We[1])],[$e[0],$e[1],c($e[1]),x($e[1])],[ot[0],ot[1],c(ot[1]),x(ot[1])]],yt=bt[2],F=0;F<3;++F,yt=ft)yt.v=nt((ft=bt[F])[1]-yt[1],yt[3],yt[2],ft[3],ft[2],ft[0]-yt[0]),yt.point=[0,0];var W=st(bt[0].v[0],bt[2].v[0],bt[1].v[0]),G=st(bt[0].v[0],bt[1].v[0],bt[2].v[0]),te=v-W;bt[2].point[1]=0,bt[0].point[0]=-(bt[1].point[0]=bt[0].v[0]/2);var ve=[bt[2].point[0]=bt[0].point[0]+bt[2].v[0]*x(W),2*(bt[0].point[1]=bt[1].point[1]=bt[2].v[0]*c(W))];return function(Ce,Be){var qe,et=c(Be),vt=x(Be),xt=new Array(3);for(qe=0;qe<3;++qe){var ee=bt[qe];if(xt[qe]=nt(Be-ee[1],ee[3],ee[2],vt,et,Ce-ee[0]),!xt[qe][0])return ee.point;xt[qe][1]=dt(xt[qe][1]-ee.v[1])}var ce=ve.slice();for(qe=0;qe<3;++qe){var Oe=st(bt[qe].v[0],xt[qe][0],xt[2==qe?0:qe+1][0]);xt[qe][1]<0&&(Oe=-Oe),qe?1==qe?(ce[0]-=xt[qe][0]*x(Oe=G-Oe),ce[1]-=xt[qe][0]*c(Oe)):(ce[0]+=xt[qe][0]*x(Oe=te-Oe),ce[1]+=xt[qe][0]*c(Oe)):(ce[0]+=xt[qe][0]*x(Oe),ce[1]-=xt[qe][0]*c(Oe))}return ce[0]/=3,ce[1]/=3,ce}}function _t(We){return We[0]*=_,We[1]*=_,We}function pt(){return Pt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Pt(We,$e,ot){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:[We,$e,ot]}),bt=[-ft[0],-ft[1]],yt=(0,tt.Z)(bt),F=wt(_t(yt(We)),_t(yt($e)),_t(yt(ot)));F.invert=le(F);var W=(0,M.Z)(F).rotate(bt),G=W.center;return delete W.rotate,W.center=function(te){return arguments.length?G(yt(te)):yt.invert(G())},W.clipAngle(90)}function St(We,$e){var ot=C(1-c($e));return[2/w*We*ot,w*(1-ot)]}function Ot(){return(0,M.Z)(St).scale(95.6464).center([0,30])}function jt(We){var $e=h(We);function ot(ft,bt){return[ft,(ft?ft/c(ft):1)*(c(bt)*x(ft)-$e*x(bt))]}return ot.invert=$e?function(ft,bt){ft&&(bt*=c(ft)/ft);var yt=x(ft);return[ft,2*T(C(yt*yt+$e*$e-bt*bt)-yt,$e-bt)]}:function(ft,bt){return[ft,E(ft?bt*h(ft)/ft:bt)]},ot}function Dt(){return Me(jt).scale(249.828).clipAngle(90)}St.invert=function(We,$e){var ot=(ot=$e/w-1)*ot;return[ot>0?We*C(v/ot)/2:0,E(1-ot)]};var Ye=C(3);function Ze(We,$e){return[Ye*We*(2*x(2*$e/3)-1)/w,Ye*w*c($e/3)]}function Ne(){return(0,M.Z)(Ze).scale(156.19)}function Je(We){var $e=x(We);function ot(ft,bt){return[ft*$e,c(bt)/$e]}return ot.invert=function(ft,bt){return[ft/$e,E(bt*$e)]},ot}function at(){return Me(Je).parallel(38.58).scale(195.044)}function Se(We){var $e=x(We);function ot(ft,bt){return[ft*$e,(1+$e)*h(bt/2)]}return ot.invert=function(ft,bt){return[ft/$e,2*l(bt/(1+$e))]},ot}function ze(){return Me(Se).scale(124.75)}function Ke(We,$e){var ot=C(8/(3*v));return[ot*We*(1-k($e)/v),ot*$e]}function it(){return(0,M.Z)(Ke).scale(165.664)}function ct(We,$e){var ot=C(4-3*c(k($e)));return[2/C(6*v)*We*ot,i($e)*C(2*v/3)*(2-ot)]}function mt(){return(0,M.Z)(ct).scale(165.664)}function Lt(We,$e){var ot=C(v*(4+v));return[2/ot*We*(1+C(1-4*$e*$e/(v*v))),4/ot*$e]}function At(){return(0,M.Z)(Lt).scale(180.739)}function ht(We,$e){var ot=(2+g)*c($e);$e/=2;for(var ft=0,bt=1/0;ft<10&&k(bt)>f;ft++){var yt=x($e);$e-=bt=($e+c($e)*(yt+2)-ot)/(2*yt*(1+yt))}return[2/C(v*(4+v))*We*(1+x($e)),2*C(v/(4+v))*c($e)]}function Et(){return(0,M.Z)(ht).scale(180.739)}function gt(We,$e){return[We*(1+x($e))/C(2+v),2*$e/C(2+v)]}function kt(){return(0,M.Z)(gt).scale(173.044)}function It(We,$e){for(var ot=(1+g)*c($e),ft=0,bt=1/0;ft<10&&k(bt)>f;ft++)$e-=bt=($e+c($e)-ot)/(1+x($e));return ot=C(2+v),[We*(1+x($e))/ot,2*$e/ot]}function Ut(){return(0,M.Z)(It).scale(173.044)}Ze.invert=function(We,$e){var ot=3*E($e/(Ye*w));return[w*We/(Ye*(2*x(2*ot/3)-1)),ot]},Ke.invert=function(We,$e){var ot=C(8/(3*v)),ft=$e/ot;return[We/(ot*(1-k(ft)/v)),ft]},ct.invert=function(We,$e){var ot=2-k($e)/C(2*v/3);return[We*C(6*v)/(2*ot),i($e)*E((4-ot*ot)/3)]},Lt.invert=function(We,$e){var ot=C(v*(4+v))/2;return[We*ot/(1+C(1-$e*$e*(4+v)/(4*v))),$e*ot/2]},ht.invert=function(We,$e){var ot=$e*C((4+v)/v)/2,ft=E(ot),bt=x(ft);return[We/(2/C(v*(4+v))*(1+bt)),E((ft+ot*(bt+2))/(2+g))]},gt.invert=function(We,$e){var ot=C(2+v),ft=$e*ot/2;return[ot*We/(1+x(ft)),ft]},It.invert=function(We,$e){var ot=1+g,ft=C(ot/2);return[2*We*ft/(1+x($e*=ft)),E(($e+c($e))/ot)]};var Nt=3+2*m;function qt(We,$e){var ot=c(We/=2),ft=x(We),bt=C(x($e)),yt=x($e/=2),F=c($e)/(yt+m*ft*bt),W=C(2/(1+F*F)),G=C((m*yt+(ft+ot)*bt)/(m*yt+(ft-ot)*bt));return[Nt*(W*(G-1/G)-2*e(G)),Nt*(W*F*(G+1/G)-2*l(F))]}function Xt(){return(0,M.Z)(qt).scale(62.5271)}qt.invert=function(We,$e){if(!(ot=U.invert(We/1.2,1.065*$e)))return null;var ot,ft=ot[0],bt=ot[1],yt=20;We/=Nt,$e/=Nt;do{var F=ft/2,W=bt/2,G=c(F),te=x(F),ve=c(W),Ce=x(W),Be=x(bt),qe=C(Be),et=ve/(Ce+m*te*qe),vt=et*et,xt=C(2/(1+vt)),ee=(m*Ce+(te+G)*qe)/(m*Ce+(te-G)*qe),ce=C(ee),Ae=ce-1/ce,Oe=ce+1/ce,Fe=xt*Ae-2*e(ce)-We,Ue=xt*et*Oe-2*l(et)-$e,Ge=ve&&d*qe*G*vt/ve,Xe=(m*te*Ce+qe)/(2*(Ce+m*te*qe)*(Ce+m*te*qe)*qe),rt=-.5*et*xt*xt*xt,ut=rt*Ge,Ct=rt*Xe,Rt=(Rt=2*Ce+m*qe*(te-G))*Rt*ce,Ft=(m*te*Ce*qe+Be)/Rt,Yt=-m*G*ve/(qe*Rt),cn=Ae*ut-2*Ft/ce+xt*(Ft+Ft/ee),Wt=Ae*Ct-2*Yt/ce+xt*(Yt+Yt/ee),tn=et*Oe*ut-2*Ge/(1+vt)+xt*Oe*Ge+xt*et*(Ft-Ft/ee),$t=et*Oe*Ct-2*Xe/(1+vt)+xt*Oe*Xe+xt*et*(Yt-Yt/ee),_n=Wt*tn-$t*cn;if(!_n)break;var dn=(Ue*Wt-Fe*$t)/_n,Qt=(Fe*tn-Ue*cn)/_n;ft-=dn,bt=o(-g,r(g,bt-Qt))}while((k(dn)>f||k(Qt)>f)&&--yt>0);return k(k(bt)-g)<f?[0,bt]:yt&&[ft,bt]};var Kt=x(35*_);function fn(We,$e){var ot=h($e/2);return[We*Kt*C(1-ot*ot),(1+Kt)*ot]}function nn(){return(0,M.Z)(fn).scale(137.152)}function xn(We,$e){var ot=$e/2,ft=x(ot);return[2*We/w*x($e)*ft*ft,w*h(ot)]}function jn(){return(0,M.Z)(xn).scale(135.264)}function mn(We){var $e=1-We,ot=bt(v,0)[0]-bt(-v,0)[0],ft=C(2*(bt(0,g)[1]-bt(0,-g)[1])/ot);function bt(W,G){var te=x(G),ve=c(G);return[te/($e+We*te)*W,$e*G+We*ve]}function yt(W,G){var te=bt(W,G);return[te[0]*ft,te[1]/ft]}function F(W){return yt(0,W)[1]}return yt.invert=function(W,G){var te=me(F,G);return[W/ft*(We+$e/x(te)),te]},yt}function en(){var We=.5,$e=(0,M.r)(mn),ot=$e(We);return ot.alpha=function(ft){return arguments.length?$e(We=+ft):We},ot.scale(168.725)}fn.invert=function(We,$e){var ot=$e/(1+Kt);return[We&&We/(Kt*C(1-ot*ot)),2*l(ot)]},xn.invert=function(We,$e){var ot=l($e/w),ft=x(ot),bt=2*ot;return[We*w/2/(x(bt)*ft*ft),bt]};var vn=t(57962),on=t(97492);function sn(We){return[We[0]/2,E(h(We[1]/2*_))*S]}function En(We){return[2*We[0],2*l(c(We[1]*_))*S]}function kn(We){null==We&&(We=vn.Z);var $e=We(),ot=(0,on.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function ft(yt){return $e(sn(yt))}function bt(yt){ft[yt]=function(){return arguments.length?($e[yt].apply($e,arguments),ft):$e[yt]()}}return $e.invert&&(ft.invert=function(yt){return En($e.invert(yt))}),ft.stream=function(yt){var F=$e.stream(yt),W=ot.stream({point:function(G,te){F.point(G/2,E(h(-te/2*_))*S)},lineStart:function(){F.lineStart()},lineEnd:function(){F.lineEnd()},polygonStart:function(){F.polygonStart()},polygonEnd:function(){F.polygonEnd()}});return W.sphere=F.sphere,W},ft.rotate=function(yt){return arguments.length?(ot.rotate(yt),ft):ot.rotate()},ft.center=function(yt){return arguments.length?($e.center(sn(yt)),ft):En($e.center())},bt("angle"),bt("clipAngle"),bt("clipExtent"),bt("fitExtent"),bt("fitHeight"),bt("fitSize"),bt("fitWidth"),bt("scale"),bt("translate"),bt("precision"),ft.scale(249.5)}function zn(We,$e){var ot=2*v/$e,ft=We*We;function bt(yt,F){var W=(0,Q.N)(yt,F),G=W[0],te=W[1],ve=G*G+te*te;if(ve>ft){var Ce=C(ve),Be=T(te,G),qe=ot*a(Be/ot),et=Be-qe,vt=We*x(et),xt=(We*c(et)-et*c(vt))/(g-vt),ee=Fn(et,xt),ce=(v-We)/Bn(ee,vt,v);G=Ce;var Ae,Oe=50;do{G-=Ae=(We+Bn(ee,vt,G)*ce-Ce)/(ee(G)*ce)}while(k(Ae)>f&&--Oe>0);te=et*c(G),G<g&&(te-=xt*(G-g));var Fe=c(qe),Ue=x(qe);W[0]=G*Ue-te*Fe,W[1]=G*Fe+te*Ue}return W}return bt.invert=function(yt,F){var W=yt*yt+F*F;if(W>ft){var G=C(W),te=T(F,yt),ve=ot*a(te/ot),Ce=te-ve;yt=G*x(Ce),F=G*c(Ce);for(var Be=yt-g,qe=c(yt),et=F/qe,vt=yt<g?1/0:0,xt=10;;){var ee=We*c(et),ce=We*x(et),Ae=c(ce),Oe=g-ce,Fe=(ee-et*Ae)/Oe,Ue=Fn(et,Fe);if(k(vt)<b||!--xt)break;et-=vt=(et*qe-Fe*Be-F)/(qe-2*Be*(Oe*(ce+et*ee*x(ce)-Ae)-ee*(ee-et*Ae))/(Oe*Oe))}yt=(G=We+Bn(Ue,ce,yt)*(v-We)/Bn(Ue,ce,v))*x(te=ve+et),F=G*c(te)}return Q.N.invert(yt,F)},bt}function Fn(We,$e){return function(ot){var ft=We*x(ot);return ot<g&&(ft-=$e),C(1+ft*ft)}}function Bn(We,$e,ot){for(var ft=(ot-$e)/50,bt=We($e)+We(ot),yt=1,F=$e;yt<50;++yt)bt+=2*We(F+=ft);return.5*bt*ft}function er(){var We=6,$e=30*_,ot=x($e),ft=c($e),bt=(0,M.r)(zn),yt=bt($e,We),F=yt.stream,W=-x(.01*_),G=c(.01*_);return yt.radius=function(te){return arguments.length?(ot=x($e=te*_),ft=c($e),bt($e,We)):$e*S},yt.lobes=function(te){return arguments.length?bt($e,We=+te):We},yt.stream=function(te){var ve=yt.rotate(),Ce=F(te),Be=(yt.rotate([0,0]),F(te));return yt.rotate(ve),Ce.sphere=function(){Be.polygonStart(),Be.lineStart();for(var qe=0,et=2*v/We,vt=0;qe<We;++qe,vt-=et)Be.point(T(G*x(vt),W)*S,E(G*c(vt))*S),Be.point(T(ft*x(vt-et/2),ot)*S,E(ft*c(vt-et/2))*S);Be.lineEnd(),Be.polygonEnd()},Ce},yt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Xn(We,$e,ot,ft,bt,yt,F,W){function G(te,ve){if(!ve)return[We*te/v,0];var Ce=ve*ve,Be=We+Ce*($e+Ce*(ot+Ce*ft)),qe=ve*(bt-1+Ce*(yt-W+Ce*F)),et=(Be*Be+qe*qe)/(2*qe),vt=te*E(Be/et)/v;return[et*c(vt),ve*(1+Ce*W)+et*(1-x(vt))]}return arguments.length<8&&(W=0),G.invert=function(te,ve){var Ce,Be,qe=v*te/We,et=ve,vt=50;do{var xt=et*et,ee=We+xt*($e+xt*(ot+xt*ft)),ce=et*(bt-1+xt*(yt-W+xt*F)),Ae=ee*ee+ce*ce,Oe=2*ce,Fe=Ae/Oe,Ue=Fe*Fe,Ge=E(ee/Fe)/v,Xe=qe*Ge,rt=ee*ee,ut=(2*$e+xt*(4*ot+6*xt*ft))*et,Ct=bt+xt*(3*yt+5*xt*F),Rt=(2*(ee*ut+ce*(Ct-1))*Oe-Ae*(2*(Ct-1)))/(Oe*Oe),Ft=x(Xe),Yt=c(Xe),cn=Fe*Ft,Wt=Fe*Yt,tn=qe/v*(1/C(1-rt/Ue))*(ut*Fe-ee*Rt)/Ue,$t=Wt-te,_n=et*(1+xt*W)+Fe-cn-ve,dn=Rt*Yt+cn*tn,Qt=cn*Ge,Cn=1+Rt-(Rt*Ft-Wt*tn),Dn=Wt*Ge,Jn=dn*Dn-Cn*Qt;if(!Jn)break;qe-=Ce=(_n*dn-$t*Cn)/Jn,et-=Be=($t*Dn-_n*Qt)/Jn}while((k(Ce)>f||k(Be)>f)&&--vt>0);return[qe,et]},G}var mr=Xn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ur(){return(0,M.Z)(mr).scale(149.995)}var $n=Xn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function lr(){return(0,M.Z)($n).scale(153.93)}var hr=Xn(5/6*v,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Gt(){return(0,M.Z)(hr).scale(130.945)}function pn(We,$e){var ot=We*We,ft=$e*$e;return[We*(1-.162388*ft)*(.87-952426e-9*ot*ot),$e*(1+ft/12)]}function An(){return(0,M.Z)(pn).scale(131.747)}pn.invert=function(We,$e){var ot,ft=We,bt=$e,yt=50;do{var F=bt*bt;bt-=ot=(bt*(1+F/12)-$e)/(1+F/4)}while(k(ot)>f&&--yt>0);yt=50,We/=1-.162388*F;do{var W=(W=ft*ft)*W;ft-=ot=(ft*(.87-952426e-9*W)-We)/(.87-.00476213*W)}while(k(ot)>f&&--yt>0);return[ft,bt]};var Tn=Xn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Rn(){return(0,M.Z)(Tn).scale(131.087)}function qn(We){var $e=We(g,0)[0]-We(-g,0)[0];function ot(ft,bt){var yt=ft>0?-.5:.5,F=We(ft+yt*v,bt);return F[0]-=yt*$e,F}return We.invert&&(ot.invert=function(ft,bt){var yt=ft>0?-.5:.5,F=We.invert(ft+yt*$e,bt),W=F[0]-yt*v;return W<-v?W+=2*v:W>v&&(W-=2*v),F[0]=W,F}),ot}function Un(We,$e){var ot=i(We),ft=i($e),bt=x($e),yt=x(We)*bt,F=c(We)*bt,W=c(ft*$e);We=k(T(F,W)),$e=E(yt),k(We-g)>f&&(We%=g);var G=function(te,ve){if(ve===g)return[0,0];var Ce,Be,qe=c(ve),et=qe*qe,vt=et*et,xt=1+vt,ee=1+3*vt,ce=1-vt,Ae=E(1/C(xt)),Oe=ce+et*xt*Ae,Fe=(1-qe)/Oe,Ue=C(Fe),Ge=Fe*xt,Xe=C(Ge),rt=Ue*ce;if(0===te)return[0,-(rt+et*Xe)];var ut,Ct=x(ve),Rt=1/Ct,Ft=2*qe*Ct,Yt=(-Oe*Ct-(-3*et+Ae*ee)*Ft*(1-qe))/(Oe*Oe),cn=-Rt*Ft,Wt=-Rt*(et*xt*Yt+Fe*ee*Ft),tn=-2*Rt*(ce*(.5*Yt/Ue)-2*et*Ue*Ft),$t=4*te/v;if(te>.222*v||ve<v/4&&te>.175*v){if(Ce=(rt+et*C(Ge*(1+vt)-rt*rt))/(1+vt),te>v/4)return[Ce,Ce];var _n=Ce,dn=.5*Ce;Ce=.5*(dn+_n),Be=50;do{var Qt=Ce*(tn+cn*C(Ge-Ce*Ce))+Wt*E(Ce/Xe)-$t;if(!Qt)break;Qt<0?dn=Ce:_n=Ce,Ce=.5*(dn+_n)}while(k(_n-dn)>f&&--Be>0)}else{Ce=f,Be=25;do{var Cn=Ce*Ce,Dn=C(Ge-Cn),Jn=tn+cn*Dn,Kn=Ce*Jn+Wt*E(Ce/Xe)-$t;Ce-=ut=Dn?Kn/(Jn+(Wt-cn*Cn)/Dn):0}while(k(ut)>f&&--Be>0)}return[Ce,-rt-et*C(Ge-Ce*Ce)]}(We>v/4?g-We:We,$e);return We>v/4&&(W=G[0],G[0]=-G[1],G[1]=-W),G[0]*=ot,G[1]*=-ft,G}function Yn(){return(0,M.Z)(qn(Un)).scale(239.75)}function or(We,$e){var ot,ft,bt,yt,F,W;if($e<f)return[(yt=c(We))-(ot=$e*(We-yt*(ft=x(We)))/4)*ft,ft+ot*yt,1-$e*yt*yt/2,We-ot];if($e>=.999999)return ot=(1-$e)/4,bt=1/(ft=z(We)),[(yt=((W=p(2*(W=We)))-1)/(W+1))+ot*((F=ft*P(We))-We)/(ft*ft),bt-ot*yt*bt*(F-We),bt+ot*yt*bt*(F+We),2*l(p(We))-g+ot*(F-We)/ft];var G=[1,0,0,0,0,0,0,0,0],te=[C($e),0,0,0,0,0,0,0,0],ve=0;for(ft=C(1-$e),F=1;k(te[ve]/G[ve])>f&&ve<8;)ot=G[ve++],te[ve]=(ot-ft)/2,G[ve]=(ot+ft)/2,ft=C(ot*ft),F*=2;bt=F*G[ve]*We;do{bt=(E(yt=te[ve]*c(ft=bt)/G[ve])+bt)/2}while(--ve);return[c(bt),yt=x(bt),yt/x(bt-ft),bt]}function Jt(We,$e){if(!$e)return We;if(1===$e)return e(h(We/2+y));for(var ot=1,ft=C(1-$e),bt=C($e),yt=0;k(bt)>f;yt++){if(We%v){var F=l(ft*h(We)/ot);F<0&&(F+=v),We+=F+~~(We/v)*v}else We+=We;bt=(ot+ft)/2,ft=C(ot*ft),bt=((ot=bt)-ft)/2}return We/(n(2,yt)*ot)}function Mn(We,$e){var te,ve,Ce,Be,qe,ot=(m-1)/(m+1),ft=C(1-ot*ot),bt=Jt(g,ft*ft),yt=e(h(v/4+k($e)/2)),F=p(-1*yt)/C(ot),W=(te=F*x(-1*We),Be=(ve=F*c(-1*We))+1,[.5*((te>=0?g:-g)-T(qe=1-(Ce=te*te)-ve*ve,2*te)),-.25*e(qe*qe+4*Ce)+.5*e(Be*Be+Ce)]),G=function(te,ve,Ce){var Be=k(te),qe=P(k(ve));if(Be){var et=1/c(Be),vt=1/(h(Be)*h(Be)),xt=-(vt+Ce*(qe*qe*et*et)-1+Ce),ee=(-xt+C(xt*xt-(Ce-1)*vt*4))/2;return[Jt(l(1/C(ee)),Ce)*i(te),Jt(l(C((ee/vt-1)/Ce)),1-Ce)*i(ve)]}return[0,Jt(l(qe),1-Ce)*i(ve)]}(W[0],W[1],ft*ft);return[-G[1],($e>=0?1:-1)*(.5*bt-G[0])]}function zt(){return(0,M.Z)(qn(Mn)).scale(151.496)}Un.invert=function(We,$e){k(We)>1&&(We=2*i(We)-We),k($e)>1&&($e=2*i($e)-$e);var ot=i(We),ft=i($e),bt=-ot*We,yt=-ft*$e,F=yt/bt<1,W=function(Ce,Be){for(var qe=0,et=1,vt=.5,xt=50;;){var ee=vt*vt,ce=C(vt),Ae=E(1/C(1+ee)),Oe=1-ee+vt*(1+ee)*Ae,Fe=(1-ce)/Oe,Ue=C(Fe),Ge=Fe*(1+ee),Xe=Ue*(1-ee),rt=C(Ge-Ce*Ce),ut=Be+Xe+vt*rt;if(k(et-qe)<b||0==--xt||0===ut)break;ut>0?qe=vt:et=vt,vt=.5*(qe+et)}if(!xt)return null;var Ct=E(ce),Rt=x(Ct),Ft=1/Rt,Yt=2*ce*Rt,cn=(-Oe*Rt-(-3*vt+Ae*(1+3*ee))*Yt*(1-ce))/(Oe*Oe);return[v/4*(Ce*(-2*Ft*(.5*cn/Ue*(1-ee)-2*vt*Ue*Yt)+-Ft*Yt*rt)+-Ft*(vt*(1+ee)*cn+Fe*(1+3*ee)*Yt)*E(Ce/C(Ge))),Ct]}(F?yt:bt,F?bt:yt),G=W[0],te=W[1],ve=x(te);return F&&(G=-g-G),[ot*(T(c(G)*ve,-c(te))+v),ft*E(x(G)*ve)]},Mn.invert=function(We,$e){var ot,ft,bt,yt,F,W,Be,qe,et,G=(m-1)/(m+1),te=C(1-G*G),ve=(ft=-We,bt=te*te,(ot=.5*Jt(g,te*te)-$e)?(yt=or(ot,bt),ft?(W=(F=or(ft,1-bt))[1]*F[1]+bt*yt[0]*yt[0]*F[0]*F[0],[[yt[0]*F[2]/W,yt[1]*yt[2]*F[0]*F[1]/W],[yt[1]*F[1]/W,-yt[0]*yt[2]*F[0]*F[2]/W],[yt[2]*F[1]*F[2]/W,-bt*yt[0]*yt[1]*F[0]/W]]):[[yt[0],0],[yt[1],0],[yt[2],0]]):[[0,(F=or(ft,1-bt))[0]/F[1]],[1/F[1],0],[F[2]/F[1],0]]),Ce=[((Be=ve[0])[0]*(qe=ve[1])[0]+Be[1]*qe[1])/(et=qe[0]*qe[0]+qe[1]*qe[1]),(Be[1]*qe[0]-Be[0]*qe[1])/et];return[T(Ce[1],Ce[0])/-1,2*l(p(-.5*e(G*Ce[0]*Ce[0]+G*Ce[1]*Ce[1])))-g]};var Zt=t(7613);function rn(We){var $e=c(We),ot=x(We),ft=Ln(We);function bt(yt,F){var W=ft(yt,F);yt=W[0];var G=c(F=W[1]),te=x(F),ve=x(yt),Ce=L($e*G+ot*te*ve),Be=c(Ce),qe=k(Be)>f?Ce/Be:1;return[qe*ot*c(yt),(k(yt)>g?qe:-qe)*($e*te-ot*G*ve)]}return ft.invert=Ln(-We),bt.invert=function(yt,F){var W=C(yt*yt+F*F),G=-c(W),te=x(W),ve=W*te,Ce=-F*G,Be=W*$e,qe=C(ve*ve+Ce*Ce-Be*Be),et=T(ve*Be+Ce*qe,Ce*Be-ve*qe),vt=(W>g?-1:1)*T(yt*G,W*x(et)*te+F*c(et)*G);return ft.invert(vt,et)},bt}function Ln(We){var $e=c(We),ot=x(We);return function(ft,bt){var yt=x(bt),F=x(ft)*yt,W=c(ft)*yt,G=c(bt);return[T(W,F*ot-G*$e),E(G*ot+F*$e)]}}function Sn(){var We=0,$e=(0,M.r)(rn),ot=$e(We),ft=ot.rotate,bt=ot.stream,yt=(0,Zt.Z)();return ot.parallel=function(F){if(!arguments.length)return We*S;var W=ot.rotate();return $e(We=F*_).rotate(W)},ot.rotate=function(F){return arguments.length?(ft.call(ot,[F[0],F[1]-We*S]),yt.center([-F[0],-F[1]]),ot):((F=ft.call(ot))[1]+=We*S,F)},ot.stream=function(F){return(F=bt(F)).sphere=function(){F.polygonStart();var W,G=yt.radius(89.99)().coordinates[0],te=G.length-1,ve=-1;for(F.lineStart();++ve<te;)F.point((W=G[ve])[0],W[1]);for(F.lineEnd(),te=(G=yt.radius(90.01)().coordinates[0]).length-1,F.lineStart();--ve>=0;)F.point((W=G[ve])[0],W[1]);F.lineEnd(),F.polygonEnd()},F},ot.scale(79.4187).parallel(45).clipAngle(179.999)}var wn=t(33064),ln=t(72736),gn=E(1-1/3)*S,un=Je(0);function hn(We){var $e=gn*_,ot=St(v,$e)[0]-St(-v,$e)[0],ft=un(0,$e)[1],bt=St(0,$e)[1],yt=w-bt,F=u/We,W=4/u,G=ft+yt*yt*4/u;function te(ve,Ce){var Be,qe=k(Ce);if(qe>$e){var et=r(We-1,o(0,s((ve+v)/F)));(Be=St(ve+=v*(We-1)/We-et*F,qe))[0]=Be[0]*u/ot-u*(We-1)/(2*We)+et*u/We,Be[1]=ft+4*(Be[1]-bt)*yt/u,Ce<0&&(Be[1]=-Be[1])}else Be=un(ve,Ce);return Be[0]*=W,Be[1]/=G,Be}return te.invert=function(ve,Ce){ve/=W;var Be=k(Ce*=G);if(Be>ft){var qe=r(We-1,o(0,s((ve+v)/F))),et=St.invert(ve=(ve+v*(We-1)/We-qe*F)*ot/u,.25*(Be-ft)*u/yt+bt);return et[0]-=v*(We-1)/We-qe*F,Ce<0&&(et[1]=-et[1]),et}return un.invert(ve,Ce)},te}function bn(We,$e){return[We,1&$e?89.999999:gn]}function In(We,$e){return[We,1&$e?-89.999999:-gn]}function Hn(We){return[.999999*We[0],We[1]]}function Wn(){var We=4,$e=(0,M.r)(hn),ot=$e(We),ft=ot.stream;return ot.lobes=function(bt){return arguments.length?$e(We=+bt):We},ot.stream=function(bt){var yt=ot.rotate(),F=ft(bt),W=(ot.rotate([0,0]),ft(bt));return ot.rotate(yt),F.sphere=function(){var G,te;(0,ln.Z)((te=[].concat((0,wn.w6)(-180,180+(G=180/We)/2,G).map(bn),(0,wn.w6)(180,-180-G/2,-G).map(In)),{type:"Polygon",coordinates:[180===G?te.map(Hn):te]}),W)},F},ot.scale(239.75)}function Gn(We){var $e,ot=1+We,ft=E(c(1/ot)),bt=2*C(v/($e=v+4*ft*ot)),yt=.5*bt*(ot+C(We*(2+We))),F=We*We,W=ot*ot;function G(te,ve){var Ce,Be,qe=1-c(ve);if(qe&&qe<2){var et,vt=g-ve,xt=25;do{var ee=c(vt),ce=x(vt),Ae=ft+T(ee,ot-ce),Oe=1+W-2*ot*ce;vt-=et=(vt-F*ft-ot*ee+Oe*Ae-.5*qe*$e)/(2*ot*ee*Ae)}while(k(et)>b&&--xt>0);Ce=bt*C(Oe),Be=te*Ae/v}else Ce=bt*(We+qe),Be=te*ft/v;return[Ce*c(Be),yt-Ce*x(Be)]}return G.invert=function(te,ve){var Ce=te*te+(ve-=yt)*ve,Be=(1+W-Ce/(bt*bt))/(2*ot),qe=L(Be),et=c(qe),vt=ft+T(et,ot-Be);return[E(te/C(Ce))*v/vt,E(1-2*(qe-F*ft-ot*et+(1+W-2*ot*Be)*vt)/$e)]},G}function nr(){var We=1,$e=(0,M.r)(Gn),ot=$e(We);return ot.ratio=function(ft){return arguments.length?$e(We=+ft):We},ot.scale(167.774).center([0,18.67])}var tr=.7109889596207567,ar=.0528035274542;function ir(We,$e){return $e>-tr?((We=Te(We,$e))[1]+=ar,We):Re(We,$e)}function cr(){return(0,M.Z)(ir).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function br(We,$e){return k($e)>tr?((We=Te(We,$e))[1]-=$e>0?ar:-ar,We):Re(We,$e)}function xr(){return(0,M.Z)(br).scale(152.63)}function Tr(We,$e,ot,ft){var bt=C(4*v/(2*ot+(1+We-$e/2)*c(2*ot)+(We+$e)/2*c(4*ot)+$e/2*c(6*ot))),yt=C(ft*c(ot)*C((1+We*x(2*ot)+$e*x(4*ot))/(1+We+$e))),F=ot*G(1);function W(Ce){return C(1+We*x(2*Ce)+$e*x(4*Ce))}function G(Ce){var Be=Ce*ot;return(2*Be+(1+We-$e/2)*c(2*Be)+(We+$e)/2*c(4*Be)+$e/2*c(6*Be))/ot}function te(Ce){return W(Ce)*c(Ce)}var ve=function(Ce,Be){var qe=ot*me(G,F*c(Be)/ot,Be/v);isNaN(qe)&&(qe=ot*i(Be));var et=bt*W(qe);return[et*yt*Ce/v*x(qe),et/yt*c(qe)]};return ve.invert=function(Ce,Be){var qe=me(te,Be*yt/bt);return[Ce*v/(x(qe)*bt*yt*W(qe)),E(ot*G(qe/ot)/F)]},0===ot&&(bt=C(ft/v),(ve=function(Ce,Be){return[Ce*bt,c(Be)/bt]}).invert=function(Ce,Be){return[Ce/bt,E(Be*bt)]}),ve}function sr(){var We=1,$e=0,ot=45*_,ft=2,bt=(0,M.r)(Tr),yt=bt(We,$e,ot,ft);return yt.a=function(F){return arguments.length?bt(We=+F,$e,ot,ft):We},yt.b=function(F){return arguments.length?bt(We,$e=+F,ot,ft):$e},yt.psiMax=function(F){return arguments.length?bt(We,$e,ot=+F*_,ft):ot*S},yt.ratio=function(F){return arguments.length?bt(We,$e,ot,ft=+F):ft},yt.scale(180.739)}function kr(We,$e,ot,ft,bt,yt,F,W,G,te,ve){if(ve.nanEncountered)return NaN;var Ce,Be,qe,et,vt,xt,ee,ce,Ae,Oe;if(Be=We($e+.25*(Ce=ot-$e)),qe=We(ot-.25*Ce),isNaN(Be))ve.nanEncountered=!0;else{if(!isNaN(qe))return Oe=((xt=(et=Ce*(ft+4*Be+bt)/12)+(vt=Ce*(bt+4*qe+yt)/12))-F)/15,te>G?(ve.maxDepthCount++,xt+Oe):Math.abs(Oe)<W?xt+Oe:(ce=kr(We,$e,ee=$e+.5*Ce,ft,Be,bt,et,.5*W,G,te+1,ve),isNaN(ce)?(ve.nanEncountered=!0,NaN):(Ae=kr(We,ee,ot,bt,qe,yt,vt,.5*W,G,te+1,ve),isNaN(Ae)?(ve.nanEncountered=!0,NaN):ce+Ae));ve.nanEncountered=!0}}function Rr(We,$e,ot,ft,bt){void 0===ft&&(ft=1e-8),void 0===bt&&(bt=20);var yt=We($e),F=We(.5*($e+ot)),W=We(ot);return kr(We,$e,ot,yt,F,W,(yt+4*F+W)*(ot-$e)/6,ft,bt,1,{maxDepthCount:0,nanEncountered:!1})}function ei(We,$e,ot){function ft(qe){return We+(1-We)*n(1-n(qe,$e),1/$e)}function bt(qe){return Rr(ft,0,qe,1e-4)}for(var yt=1/bt(1),F=1e3,W=1.00000001*yt,G=[],te=0;te<=F;te++)G.push(bt(te/F)*W);function ve(qe){var et=0,vt=F,xt=500;do{G[xt]>qe?vt=xt:et=xt,xt=et+vt>>1}while(xt>et);var ee=G[xt+1]-G[xt];return ee&&(ee=(qe-G[xt+1])/ee),(xt+1+ee)/F}var Ce=2*ve(1)/v*yt/ot,Be=function(qe,et){var vt=ve(k(c(et))),xt=ft(vt)*qe;return vt/=Ce,[xt,et>=0?vt:-vt]};return Be.invert=function(qe,et){var vt;return k(et*=Ce)<1&&(vt=i(et)*E(bt(k(et))*yt)),[qe/ft(k(et)),vt]},Be}function fi(){var We=0,$e=2.5,ot=1.183136,ft=(0,M.r)(ei),bt=ft(We,$e,ot);return bt.alpha=function(yt){return arguments.length?ft(We=+yt,$e,ot):We},bt.k=function(yt){return arguments.length?ft(We,$e=+yt,ot):$e},bt.gamma=function(yt){return arguments.length?ft(We,$e,ot=+yt):ot},bt.scale(152.63)}function di(We,$e){return k(We[0]-$e[0])<f&&k(We[1]-$e[1])<f}function Gi(We,$e){for(var ot,ft,bt,yt=-1,F=We.length,W=We[0],G=[];++yt<F;){ft=((ot=We[yt])[0]-W[0])/$e,bt=(ot[1]-W[1])/$e;for(var te=0;te<$e;++te)G.push([W[0]+te*ft,W[1]+te*bt]);W=ot}return G.push(ot),G}function Li(We){var $e,ot,bt,yt,W,G=[],te=We[0].length;for(W=0;W<te;++W)ot=($e=We[0][W])[0][0],G.push(Gi([[ot+f,$e[0][1]+f],[ot+f,(bt=$e[1][1])-f],[(yt=$e[2][0])-f,bt-f],[yt-f,$e[2][1]+f]],30));for(W=We[1].length-1;W>=0;--W)ot=($e=We[1][W])[0][0],G.push(Gi([[(yt=$e[2][0])-f,$e[2][1]-f],[yt-f,(bt=$e[1][1])+f],[ot+f,bt+f],[ot+f,$e[0][1]-f]],30));return{type:"Polygon",coordinates:[(0,wn.TS)(G)]}}function si(We,$e,ot){var ft,bt;function yt(G,te){for(var ve=te<0?-1:1,Ce=$e[+(te<0)],Be=0,qe=Ce.length-1;Be<qe&&G>Ce[Be][2][0];++Be);var et=We(G-Ce[Be][1][0],te);return et[0]+=We(Ce[Be][1][0],ve*te>ve*Ce[Be][0][1]?Ce[Be][0][1]:te)[0],et}ot?yt.invert=ot(yt):We.invert&&(yt.invert=function(G,te){for(var ve=bt[+(te<0)],Ce=$e[+(te<0)],Be=0,qe=ve.length;Be<qe;++Be){var et=ve[Be];if(et[0][0]<=G&&G<et[1][0]&&et[0][1]<=te&&te<et[1][1]){var vt=We.invert(G-We(Ce[Be][1][0],0)[0],te);return vt[0]+=Ce[Be][1][0],di(yt(vt[0],vt[1]),[G,te])?vt:null}}});var F=(0,M.Z)(yt),W=F.stream;return F.stream=function(G){var te=F.rotate(),ve=W(G),Ce=(F.rotate([0,0]),W(G));return F.rotate(te),ve.sphere=function(){(0,ln.Z)(ft,Ce)},ve},F.lobes=function(G){return arguments.length?(ft=Li(G),$e=G.map(function(te){return te.map(function(ve){return[[ve[0][0]*_,ve[0][1]*_],[ve[1][0]*_,ve[1][1]*_],[ve[2][0]*_,ve[2][1]*_]]})}),bt=$e.map(function(te){return te.map(function(ve){var Ce,Be=We(ve[0][0],ve[0][1])[0],qe=We(ve[2][0],ve[2][1])[0],et=We(ve[1][0],ve[0][1])[1],vt=We(ve[1][0],ve[1][1])[1];return et>vt&&(Ce=et,et=vt,vt=Ce),[[Be,et],[qe,vt]]})}),F):$e.map(function(te){return te.map(function(ve){return[[ve[0][0]*S,ve[0][1]*S],[ve[1][0]*S,ve[1][1]*S],[ve[2][0]*S,ve[2][1]*S]]})})},null!=$e&&F.lobes($e),F}ir.invert=function(We,$e){return $e>-tr?Te.invert(We,$e-ar):Re.invert(We,$e)},br.invert=function(We,$e){return k($e)>tr?Te.invert(We,$e+($e>0?ar:-ar)):Re.invert(We,$e)};var ua=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ma(){return si(he,ua).scale(160.857)}var ro=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Zo(){return si(br,ro).scale(152.63)}var al=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Vs(){return si(Te,al).scale(169.529)}var Yo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Sa(){return si(Te,Yo).scale(169.529).rotate([20,0])}var Hs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Fi(){return si(ir,Hs,le).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ls=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function ba(){return si(Re,ls).scale(152.63).rotate([-20,0])}function Ea(We,$e){return[3/u*We*C(v*v/3-$e*$e),$e]}function yo(){return(0,M.Z)(Ea).scale(158.837)}function ti(We){function $e(ot,ft){if(k(k(ft)-g)<f)return[0,ft<0?-2:2];var bt=c(ft),yt=n((1+bt)/(1-bt),We/2),F=.5*(yt+1/yt)+x(ot*=We);return[2*c(ot)/F,(yt-1/yt)/F]}return $e.invert=function(ot,ft){var bt=k(ft);if(k(bt-2)<f)return ot?null:[0,i(ft)*g];if(bt>2)return null;var yt=(ot/=2)*ot,F=(ft/=2)*ft,W=2*ft/(1+yt+F);return W=n((1+W)/(1-W),1/We),[T(2*ot,1-yt-F)/We,E((W-1)/(W+1))]},$e}function xo(){var We=.5,$e=(0,M.r)(ti),ot=$e(We);return ot.spacing=function(ft){return arguments.length?$e(We=+ft):We},ot.scale(124.75)}Ea.invert=function(We,$e){return[u/3*We/C(v*v/3-$e*$e),$e]};var Oa=v/m;function Ha(We,$e){return[We*(1+C(x($e)))/2,$e/(x($e/2)*x(We/6))]}function Ja(){return(0,M.Z)(Ha).scale(97.2672)}function us(We,$e){var ot=We*We,ft=$e*$e;return[We*(.975534+ft*(-.0143059*ot-.119161+-.0547009*ft)),$e*(1.00384+ot*(.0802894+-.02855*ft+199025e-9*ot)+ft*(.0998909+-.0491032*ft))]}function ol(){return(0,M.Z)(us).scale(139.98)}function io(We,$e){return[c(We)/x($e),h($e)*x(We)]}function sl(){return(0,M.Z)(io).scale(144.049).clipAngle(89.999)}function ll(We){var $e=x(We),ot=h(y+We/2);function ft(bt,yt){var F=yt-We,W=k(F)<f?bt*$e:k(W=y+yt/2)<f||k(k(W)-g)<f?0:bt*F/e(h(W)/ot);return[W,F]}return ft.invert=function(bt,yt){var F,W=yt+We;return[k(yt)<f?bt/$e:k(F=y+W/2)<f||k(k(F)-g)<f?0:bt*e(h(F)/ot)/yt,W]},ft}function ml(){return Me(ll).parallel(40).scale(158.837)}function qs(We,$e){return[We,1.25*e(h(y+.4*$e))]}function ul(){return(0,M.Z)(qs).scale(108.318)}function Gs(We){var $e=We.length-1;function ot(ft,bt){for(var yt,F=x(bt),W=2/(1+F*x(ft)),G=W*F*c(ft),te=W*c(bt),ve=$e,Ce=We[ve],Be=Ce[0],qe=Ce[1];--ve>=0;)Be=(Ce=We[ve])[0]+G*(yt=Be)-te*qe,qe=Ce[1]+G*qe+te*yt;return[Be=G*(yt=Be)-te*qe,qe=G*qe+te*yt]}return ot.invert=function(ft,bt){var yt=20,F=ft,W=bt;do{for(var G,te=$e,ve=We[te],Ce=ve[0],Be=ve[1],qe=0,et=0;--te>=0;)qe=Ce+F*(G=qe)-W*et,et=Be+F*et+W*G,Ce=(ve=We[te])[0]+F*(G=Ce)-W*Be,Be=ve[1]+F*Be+W*G;var vt,xt,ee=(qe=Ce+F*(G=qe)-W*et)*qe+(et=Be+F*et+W*G)*et;F-=vt=((Ce=F*(G=Ce)-W*Be-ft)*qe+(Be=F*Be+W*G-bt)*et)/ee,W-=xt=(Be*qe-Ce*et)/ee}while(k(vt)+k(xt)>1e-12&&--yt>0);if(yt){var ce=C(F*F+W*W),Ae=2*l(.5*ce),Oe=c(Ae);return[T(F*Oe,ce*x(Ae)),ce?E(W*Oe/ce):0]}},ot}Ha.invert=function(We,$e){var ot=k(We),ft=k($e),bt=f,yt=g;ft<Oa?yt*=ft/Oa:bt+=6*L(Oa/ft);for(var F=0;F<25;F++){var W=c(yt),G=C(x(yt)),te=c(yt/2),ve=x(yt/2),Ce=c(bt/6),Be=x(bt/6),qe=.5*bt*(1+G)-ot,et=yt/(ve*Be)-ft,vt=G?-.25*bt*W/G:0,xt=.5*(1+G),ee=(1+.5*yt*te/ve)/(ve*Be),ce=yt/ve*(Ce/6)/(Be*Be),Ae=vt*ce-ee*xt,Oe=(qe*ce-et*xt)/Ae,Fe=(et*vt-qe*ee)/Ae;if(yt-=Oe,bt-=Fe,k(Oe)<f&&k(Fe)<f)break}return[We<0?-bt:bt,$e<0?-yt:yt]},us.invert=function(We,$e){var ot=i(We)*v,ft=$e/2,bt=50;do{var yt=ot*ot,F=ft*ft,W=ot*ft,G=ot*(.975534+F*(-.0143059*yt-.119161+-.0547009*F))-We,te=ft*(1.00384+yt*(.0802894+-.02855*F+199025e-9*yt)+F*(.0998909+-.0491032*F))-$e,ve=.975534-F*(.119161+3*yt*.0143059+.0547009*F),Ce=-W*(.238322+.2188036*F+.0286118*yt),Be=W*(.1605788+7961e-7*yt+-.0571*F),qe=1.00384+yt*(.0802894+199025e-9*yt)+F*(3*(.0998909-.02855*yt)-.245516*F),et=Ce*Be-qe*ve,vt=(te*Ce-G*qe)/et,xt=(G*Be-te*ve)/et;ot-=vt,ft-=xt}while((k(vt)>f||k(xt)>f)&&--bt>0);return bt&&[ot,ft]},io.invert=function(We,$e){var ot=We*We,ft=$e*$e+1,bt=ot+ft,yt=We?d*C((bt-C(bt*bt-4*ot))/ot):1/C(ft);return[E(We*yt),i($e)*L(yt)]},qs.invert=function(We,$e){return[We,2.5*l(p(.8*$e))-.625*v]};var ao=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],oo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Wo=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],so=[[.9245,0],[0,0],[.01943,0]],Zs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ys(){return Io(ao,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Oo(){return Io(oo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ms(){return Io(Wo,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function bo(){return Io(so,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Xo(){return Io(Zs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Io(We,$e){var ot=(0,M.Z)(Gs(We)).rotate($e).clipAngle(90),ft=(0,tt.Z)($e),bt=ot.center;return delete ot.rotate,ot.center=function(yt){return arguments.length?bt(ft(yt)):ft.invert(bt())},ot}var lo=C(6),ni=C(7);function _o(We,$e){var ot=E(7*c($e)/(3*lo));return[lo*We*(2*x(2*ot/3)-1)/ni,9*c(ot/3)/ni]}function yl(){return(0,M.Z)(_o).scale(164.859)}function Ss(We,$e){for(var ot,ft=(1+d)*c($e),bt=$e,yt=0;yt<25&&(bt-=ot=(c(bt/2)+c(bt)-ft)/(.5*x(bt/2)+x(bt)),!(k(ot)<f));yt++);return[We*(1+2*x(bt)/x(bt/2))/(3*m),2*C(3)*c(bt/2)/C(2+m)]}function cs(){return(0,M.Z)(Ss).scale(188.209)}function zo(We,$e){for(var ot,ft=C(6/(4+v)),bt=(1+v/4)*c($e),yt=$e/2,F=0;F<25&&(yt-=ot=(yt/2+c(yt)-bt)/(.5+x(yt)),!(k(ot)<f));F++);return[ft*(.5+x(yt))*We/1.5,ft*yt]}function Jo(){return(0,M.Z)(zo).scale(166.518)}_o.invert=function(We,$e){var ot=3*E($e*ni/9);return[We*ni/(lo*(2*x(2*ot/3)-1)),E(3*c(ot)*lo/7)]},Ss.invert=function(We,$e){var ot=$e*C(2+m)/(2*C(3)),ft=2*E(ot);return[3*m*We/(1+2*x(ft)/x(ft/2)),E((ot+c(ft))/(1+d))]},zo.invert=function(We,$e){var ot=C(6/(4+v)),ft=$e/ot;return k(k(ft)-g)<f&&(ft=ft<0?-g:g),[1.5*We/(ot*(.5+x(ft))),E((ft/2+c(ft))/(1+v/4))]};var Ia=t(26867);function Ws(We,$e){var ot=$e*$e,ft=ot*ot,bt=ot*ft;return[We*(.84719-.13063*ot+bt*bt*(.05494*ot-.04515-.02326*ft+.00331*bt)),$e*(1.01183+ft*ft*(.01926*ot-.02625-.00396*ft))]}function fs(){return(0,M.Z)(Ws).scale(175.295)}function Ko(We,$e){return[We*(1+x($e))/2,2*($e-h($e/2))]}function hs(){return(0,M.Z)(Ko).scale(152.63)}Ws.invert=function(We,$e){var ot,ft,bt,yt,F=$e,W=25;do{F-=ot=(F*(1.01183+(bt=(ft=F*F)*ft)*bt*(.01926*ft-.02625-.00396*bt))-$e)/(1.01183+bt*bt*(.21186*ft-.23625+-.05148*bt))}while(k(ot)>b&&--W>0);return[We/(.84719-.13063*(ft=F*F)+(yt=ft*(bt=ft*ft))*yt*(.05494*ft-.04515-.02326*bt+.00331*yt)),F]},Ko.invert=function(We,$e){for(var ot=$e/2,ft=0,bt=1/0;ft<10&&k(bt)>f;++ft){var yt=x($e/2);$e-=bt=($e-h($e/2)-ot)/(1-.5/(yt*yt))}return[2*We/(1+x($e)),$e]};var Ro=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Do(){return si(se(1/0),Ro).rotate([20,0]).scale(152.63)}function $o(We,$e){var ot=c($e),ft=x($e),bt=i(We);if(0===We||k($e)===g)return[0,$e];if(0===$e)return[We,0];if(k(We)===g)return[We*ft,g*ot];var yt=v/(2*We)-2*We/v,F=2*$e/v,W=(1-F*F)/(ot-F),G=yt*yt,te=W*W,ve=1+G/te,Ce=1+te/G,Be=(yt*ot/W-yt/2)/ve,qe=(te*ot/G+W/2)/Ce,et=qe*qe-(te*ot*ot/G+W*ot-1)/Ce;return[g*(Be+C(Be*Be+ft*ft/ve)*bt),g*(qe+C(et<0?0:et)*i(-$e*yt)*bt)]}function ps(){return(0,M.Z)($o).scale(127.267)}$o.invert=function(We,$e){var ot=(We/=g)*We,ft=ot+($e/=g)*$e,bt=v*v;return[We?(ft-1+C((1-ft)*(1-ft)+4*ot))/(2*We)*g:0,me(function(yt){return ft*(v*c(yt)-2*yt)*v+4*yt*yt*($e-c(yt))+2*v*yt-bt*$e},0)]};var Xs=1.790857183;function wo(We,$e){var ot=$e*$e;return[We,$e*(1.0148+ot*ot*(.23185+ot*(.02406*ot-.14499)))]}function Es(){return(0,M.Z)(wo).scale(139.319)}function ms(We,$e){if(k($e)<f)return[We,0];var ot=h($e),ft=We*c($e);return[c(ft)/ot,$e+(1-x(ft))/ot]}function Js(){return(0,M.Z)(ms).scale(103.74)}wo.invert=function(We,$e){$e>Xs?$e=Xs:$e<-1.790857183&&($e=-1.790857183);var ot,ft=$e;do{var bt=ft*ft;ft-=ot=(ft*(1.0148+bt*bt*(.23185+bt*(.02406*bt-.14499)))-$e)/(1.0148+bt*bt*(1.1592500000000001+bt*(.21654*bt-1.01493)))}while(k(ot)>f);return[We,ft]},ms.invert=function(We,$e){if(k($e)<f)return[We,0];var ot,ft=We*We+$e*$e,bt=.5*$e,yt=10;do{var F=h(bt),W=1/x(bt),G=ft-2*$e*bt+bt*bt;bt-=ot=(F*G+2*(bt-$e))/(2+G*W*W+2*(bt-$e)*F)}while(k(ot)>f&&--yt>0);return F=h(bt),[(k($e)<k(bt+1/F)?E(We*F):i($e)*i(We)*(L(k(We*F))+g))/c(bt),bt]};var ys=t(77338),Qo=t(83074);function Fo(We,$e){return[We[0]*$e[0]+We[1]*$e[3],We[0]*$e[1]+We[1]*$e[4],We[0]*$e[2]+We[1]*$e[5]+We[2],We[3]*$e[0]+We[4]*$e[3],We[3]*$e[1]+We[4]*$e[4],We[3]*$e[2]+We[4]*$e[5]+We[5]]}function Bo(We,$e){return[We[0]-$e[0],We[1]-$e[1]]}function li(We){return C(We[0]*We[0]+We[1]*We[1])}function To(We,$e,ot){function ft(W,G){var te,ve=$e(W,G),Ce=ve.project([W*S,G*S]);return(te=ve.transform)?[te[0]*Ce[0]+te[1]*Ce[1]+te[2],-(te[3]*Ce[0]+te[4]*Ce[1]+te[5])]:(Ce[1]=-Ce[1],Ce)}function bt(W,G){var xt,ee,te=W.project.invert,ve=W.transform,Ce=G;if(ve&&(Ce=[(ve=[(ee=1/((xt=ve)[0]*xt[4]-xt[1]*xt[3]))*xt[4],-ee*xt[1],ee*(xt[1]*xt[5]-xt[2]*xt[4]),-ee*xt[3],ee*xt[0],ee*(xt[2]*xt[3]-xt[0]*xt[5])])[0]*Ce[0]+ve[1]*Ce[1]+ve[2],ve[3]*Ce[0]+ve[4]*Ce[1]+ve[5]]),te&&W===function(xt){return $e(xt[0]*_,xt[1]*_)}(Be=te(Ce)))return Be;for(var Be,qe=W.children,et=0,vt=qe&&qe.length;et<vt;++et)if(Be=bt(qe[et],G))return Be}(function W(G,te){if(G.edges=function(Fe){for(var Ue=Fe.length,Ge=[],Xe=Fe[Ue-1],rt=0;rt<Ue;++rt)Ge.push([Xe,Xe=Fe[rt]]);return Ge}(G.face),te.face){var ve=G.shared=function(Fe,Ue){for(var Ge,Xe,rt=Fe.length,ut=null,Ct=0;Ct<rt;++Ct){Ge=Fe[Ct];for(var Rt=Ue.length;--Rt>=0;)if(Ge[0]===(Xe=Ue[Rt])[0]&&Ge[1]===Xe[1]){if(ut)return[ut,Ge];ut=Ge}}}(G.face,te.face),Ce=(vt=ve.map(te.project),xt=ve.map(G.project),ee=Bo(vt[1],vt[0]),ce=Bo(xt[1],xt[0]),Ae=T((Fe=ee)[0]*(Ue=ce)[1]-Fe[1]*Ue[0],Fe[0]*Ue[0]+Fe[1]*Ue[1]),Oe=li(ee)/li(ce),Fo([1,0,vt[0][0],0,1,vt[0][1]],Fo([Oe,0,0,0,Oe,0],Fo([x(Ae),c(Ae),0,-c(Ae),x(Ae),0],[1,0,-xt[0][0],0,1,-xt[0][1]]))));G.transform=te.transform?Fo(te.transform,Ce):Ce;for(var Be=te.edges,qe=0,et=Be.length;qe<et;++qe)Wi(ve[0],Be[qe][1])&&Wi(ve[1],Be[qe][0])&&(Be[qe]=G),Wi(ve[0],Be[qe][0])&&Wi(ve[1],Be[qe][1])&&(Be[qe]=G);for(qe=0,et=(Be=G.edges).length;qe<et;++qe)Wi(ve[0],Be[qe][0])&&Wi(ve[1],Be[qe][1])&&(Be[qe]=te),Wi(ve[0],Be[qe][1])&&Wi(ve[1],Be[qe][0])&&(Be[qe]=te)}else G.transform=te.transform;var Fe,Ue,vt,xt,ee,ce,Ae,Oe;return G.children&&G.children.forEach(function(Fe){W(Fe,G)}),G})(We,{transform:null}),Jr(We)&&(ft.invert=function(W,G){var te=bt(We,[W,-G]);return te&&(te[0]*=_,te[1]*=_,te)});var yt=(0,M.Z)(ft),F=yt.stream;return yt.stream=function(W){var G=yt.rotate(),te=F(W),ve=(yt.rotate([0,0]),F(W));return yt.rotate(G),te.sphere=function(){ve.polygonStart(),ve.lineStart(),ko(ve,We),ve.lineEnd(),ve.polygonEnd()},te},yt.angle(null==ot?-30:ot*S)}function ko(We,$e,ot){var ft,bt,yt=$e.edges,F=yt.length,W={type:"MultiPoint",coordinates:$e.face},G=$e.face.filter(function(vt){return 90!==k(vt[1])}),te=(0,ys.Z)({type:"MultiPoint",coordinates:G}),ve=!1,Ce=-1,Be=te[1][0]-te[0][0],qe=180===Be||360===Be?[(te[0][0]+te[1][0])/2,(te[0][1]+te[1][1])/2]:(0,Ve.Z)(W);if(ot)for(;++Ce<F&&yt[Ce]!==ot;);++Ce;for(var et=0;et<F;++et)bt=yt[(et+Ce)%F],Array.isArray(bt)?(ve||(We.point((ft=(0,Qo.Z)(bt[0],qe)(f))[0],ft[1]),ve=!0),We.point((ft=(0,Qo.Z)(bt[1],qe)(f))[0],ft[1])):(ve=!1,bt!==ot&&ko(We,bt,$e))}function Wi(We,$e){return We&&$e&&We[0]===$e[0]&&We[1]===$e[1]}function Jr(We){return We.project.invert||We.children&&We.children.some(Jr)}var $r=t(98936),uo=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ka=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(We){return We.map(function($e){return uo[$e]})});function Ls(We){We=We||function(ot){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:ot});return(0,$r.Z)().scale(1).translate([0,0]).rotate([-ft[0],-ft[1]])};var $e=Ka.map(function(ot){return{face:ot,project:We(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,ft){var bt=$e[ot];bt&&(bt.children||(bt.children=[])).push($e[ft])}),To($e[0],function(ot,ft){return $e[ot<-v/2?ft<0?6:4:ot<0?ft<0?2:0:ot<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ks=2/C(3);function No(We,$e){var ot=St(We,$e);return[ot[0]*Ks,ot[1]]}function $s(We){We=We||function(ot){var ft=(0,Ve.Z)({type:"MultiPoint",coordinates:ot});return(0,M.Z)(No).translate([0,0]).scale(1).rotate(ft[1]>0?[-ft[0],0]:[180-ft[0],180])};var $e=Ka.map(function(ot){return{face:ot,project:We(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,ft){var bt=$e[ot];bt&&(bt.children||(bt.children=[])).push($e[ft])}),To($e[0],function(ot,ft){return $e[ot<-v/2?ft<0?6:4:ot<0?ft<0?2:0:ot<v/2?ft<0?3:1:ft<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function jo(We){We=We||function(yt){var F=6===yt.length?(0,Ve.Z)({type:"MultiPoint",coordinates:yt}):yt[0];return(0,$r.Z)().scale(1).translate([0,0]).rotate([-F[0],-F[1]])};var $e=Ka.map(function(yt){for(var F,W=yt.map(bi),G=W.length,te=W[G-1],ve=[],Ce=0;Ce<G;++Ce)ve.push(Uo([.9486832980505138*te[0]+.31622776601683794*(F=W[Ce])[0],.9486832980505138*te[1]+.31622776601683794*F[1],.9486832980505138*te[2]+.31622776601683794*F[2]]),Uo([.9486832980505138*F[0]+.31622776601683794*te[0],.9486832980505138*F[1]+.31622776601683794*te[1],.9486832980505138*F[2]+.31622776601683794*te[2]])),te=F;return ve}),ot=[],ft=[-1,0,0,1,0,1,4,5];$e.forEach(function(yt,F){for(var W,G,te=Ka[F],ve=te.length,Ce=ot[F]=[],Be=0;Be<ve;++Be)$e.push([te[Be],yt[(2*Be+2)%(2*ve)],yt[(2*Be+1)%(2*ve)]]),ft.push(F),Ce.push((W=bi(yt[(2*Be+2)%(2*ve)]),G=bi(yt[(2*Be+1)%(2*ve)]),[W[1]*G[2]-W[2]*G[1],W[2]*G[0]-W[0]*G[2],W[0]*G[1]-W[1]*G[0]]))});var bt=$e.map(function(yt){return{project:We(yt),face:yt}});return ft.forEach(function(yt,F){var W=bt[yt];W&&(W.children||(W.children=[])).push(bt[F])}),To(bt[0],function(yt,F){var W=x(F),G=[W*x(yt),W*c(yt),c(F)],te=yt<-v/2?F<0?6:4:yt<0?F<0?2:0:yt<v/2?F<0?3:1:F<0?7:5,ve=ot[te];return bt[co(ve[0],G)<0?8+3*te:co(ve[1],G)<0?8+3*te+1:co(ve[2],G)<0?8+3*te+2:te]}).angle(-30).scale(110.625).center([0,45])}function co(We,$e){for(var ot=0,ft=We.length,bt=0;ot<ft;++ot)bt+=We[ot]*$e[ot];return bt}function Uo(We){return[T(We[1],We[0])*S,E(o(-1,r(1,We[2])))*S]}function bi(We){var $e=We[0]*_,ot=We[1]*_,ft=x(ot);return[ft*x($e),ft*c($e),c(ot)]}function $a(){}function Vo(We,$e){var ot,ft=$e.stream;if(!ft)throw new Error("invalid projection");switch(We&&We.type){case"Feature":ot=Xi;break;case"FeatureCollection":ot=Ri;break;default:ot=Ji}return ot(We,ft)}function Ri(We,$e){return{type:"FeatureCollection",features:We.features.map(function(ot){return Xi(ot,$e)})}}function Xi(We,$e){return{type:"Feature",id:We.id,properties:We.properties,geometry:Ji(We.geometry,$e)}}function Ji(We,$e){if(!We)return null;if("GeometryCollection"===We.type)return bt=$e,{type:"GeometryCollection",geometries:We.geometries.map(function(yt){return Ji(yt,bt)})};var bt,ot;switch(We.type){case"Point":case"MultiPoint":ot=Ao;break;case"LineString":case"MultiLineString":ot=Ra;break;case"Polygon":case"MultiPolygon":case"Sphere":ot=Bi;break;default:return null}return(0,ln.Z)(We,$e(ot)),ot.result()}No.invert=function(We,$e){return St.invert(We/Ks,$e)};var Zi=[],ca=[],Ao={point:function(We,$e){Zi.push([We,$e])},result:function(){var We=Zi.length?Zi.length<2?{type:"Point",coordinates:Zi[0]}:{type:"MultiPoint",coordinates:Zi}:null;return Zi=[],We}},Ra={lineStart:$a,point:function(We,$e){Zi.push([We,$e])},lineEnd:function(){Zi.length&&(ca.push(Zi),Zi=[])},result:function(){var We=ca.length?ca.length<2?{type:"LineString",coordinates:ca[0]}:{type:"MultiLineString",coordinates:ca}:null;return ca=[],We}},Bi={polygonStart:$a,lineStart:$a,point:function(We,$e){Zi.push([We,$e])},lineEnd:function(){var We=Zi.length;if(We){do{Zi.push(Zi[0].slice())}while(++We<4);ca.push(Zi),Zi=[]}},polygonEnd:$a,result:function(){if(!ca.length)return null;var We=[],$e=[];return ca.forEach(function(ot){!function(ft){if((bt=ft.length)<4)return!1;for(var bt,yt=0,F=ft[bt-1][1]*ft[0][0]-ft[bt-1][0]*ft[0][1];++yt<bt;)F+=ft[yt-1][1]*ft[yt][0]-ft[yt-1][0]*ft[yt][1];return F<=0}(ot)?$e.push(ot):We.push([ot])}),$e.forEach(function(ot){var ft=ot[0];We.some(function(bt){if(function(yt,F){for(var W=F[0],G=F[1],te=!1,ve=0,Ce=yt.length,Be=Ce-1;ve<Ce;Be=ve++){var qe=yt[ve],et=qe[0],vt=qe[1],xt=yt[Be],ce=xt[1];vt>G^ce>G&&W<(xt[0]-et)*(G-vt)/(ce-vt)+et&&(te=!te)}return te}(bt[0],ft))return bt.push(ot),!0})||We.push([ot])}),ca=[],We.length?We.length>1?{type:"MultiPolygon",coordinates:We}:{type:"Polygon",coordinates:We[0]}:null}};function _a(We){var $e=We(g,0)[0]-We(-g,0)[0];function ot(ft,bt){var yt=k(ft)<g,F=We(yt?ft:ft>0?ft-v:ft+v,bt),W=(F[0]-F[1])*d,G=(F[0]+F[1])*d;if(yt)return[W,G];var te=$e*d,ve=W>0^G>0?-1:1;return[ve*W-i(G)*te,ve*G-i(W)*te]}return We.invert&&(ot.invert=function(ft,bt){var yt=(ft+bt)*d,F=(bt-ft)*d,W=k(yt)<.5*$e&&k(F)<.5*$e;if(!W){var G=$e*d,te=yt>0^F>0?-1:1,ve=-te*ft+(F>0?1:-1)*G,Ce=-te*bt+(yt>0?1:-1)*G;yt=(-ve-Ce)*d,F=(ve-Ce)*d}var Be=We.invert(yt,F);return W||(Be[0]+=yt>0?v:-v),Be}),(0,M.Z)(ot).rotate([-90,-90,45]).clipAngle(179.999)}function Cs(){return _a(Un).scale(176.423)}function Ps(){return _a(Mn).scale(111.48)}function oa(We,$e){if(!(0<=($e=+$e)&&$e<=20))throw new Error("invalid digits");function ot(te){var ve=te.length,Ce=2,Be=new Array(ve);for(Be[0]=+te[0].toFixed($e),Be[1]=+te[1].toFixed($e);Ce<ve;)Be[Ce]=te[Ce],++Ce;return Be}function ft(te){return te.map(ot)}function bt(te){for(var ve=ot(te[0]),Ce=[ve],Be=1;Be<te.length;Be++){var qe=ot(te[Be]);(qe.length>2||qe[0]!=ve[0]||qe[1]!=ve[1])&&(Ce.push(qe),ve=qe)}return 1===Ce.length&&te.length>1&&Ce.push(ot(te[te.length-1])),Ce}function yt(te){return te.map(bt)}function F(te){if(null==te)return te;var ve;switch(te.type){case"GeometryCollection":ve={type:"GeometryCollection",geometries:te.geometries.map(F)};break;case"Point":ve={type:"Point",coordinates:ot(te.coordinates)};break;case"MultiPoint":ve={type:te.type,coordinates:ft(te.coordinates)};break;case"LineString":ve={type:te.type,coordinates:bt(te.coordinates)};break;case"MultiLineString":case"Polygon":ve={type:te.type,coordinates:yt(te.coordinates)};break;case"MultiPolygon":ve={type:"MultiPolygon",coordinates:te.coordinates.map(yt)};break;default:return te}return null!=te.bbox&&(ve.bbox=te.bbox),ve}function W(te){var ve={type:"Feature",properties:te.properties,geometry:F(te.geometry)};return null!=te.id&&(ve.id=te.id),null!=te.bbox&&(ve.bbox=te.bbox),ve}if(null!=We)switch(We.type){case"Feature":return W(We);case"FeatureCollection":var G={type:"FeatureCollection",features:We.features.map(W)};return null!=We.bbox&&(G.bbox=We.bbox),G;default:return F(We)}return We}function wr(We){var $e=c(We);function ot(ft,bt){var yt=$e?h(ft*$e/2)/$e:ft/2;if(!bt)return[2*yt,-We];var F=2*l(yt*c(bt)),W=1/h(bt);return[c(F)*W,bt+(1-x(F))*W-We]}return ot.invert=function(ft,bt){if(k(bt+=We)<f)return[$e?2*l($e*ft/2)/$e:ft,0];var yt,F=ft*ft+bt*bt,W=0,G=10;do{var te=h(W),ve=1/x(W),Ce=F-2*bt*W+W*W;W-=yt=(te*Ce+2*(W-bt))/(2+Ce*ve*ve+2*(W-bt)*te)}while(k(yt)>f&&--G>0);var Be=ft*(te=h(W)),qe=h(k(bt)<k(W+1/te)?.5*E(Be):.5*L(Be)+v/4)/c(W);return[$e?2*l($e*qe)/$e:2*qe,W]},ot}function Ho(){return Me(wr).scale(131.215)}var fa=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Os(We,$e){var ot,ft=r(18,36*k($e)/v),bt=s(ft),yt=ft-bt,F=(ot=fa[bt])[0],W=ot[1],G=(ot=fa[++bt])[0],te=ot[1],ve=(ot=fa[r(19,++bt)])[0],Ce=ot[1];return[We*(G+yt*(ve-F)/2+yt*yt*(ve-2*G+F)/2),($e>0?g:-g)*(te+yt*(Ce-W)/2+yt*yt*(Ce-2*te+W)/2)]}function es(){return(0,M.Z)(Os).scale(152.63)}function ts(We,$e){var ot=function(F){function W(G,te){var ve=x(te),Ce=(F-1)/(F-ve*x(G));return[Ce*ve*c(G),Ce*c(te)]}return W.invert=function(G,te){var ve=G*G+te*te,Ce=C(ve),Be=(F-C(1-ve*(F+1)/(F-1)))/((F-1)/Ce+Ce/(F-1));return[T(G*Be,Ce*C(1-Be*Be)),Ce?E(te*Be/Ce):0]},W}(We);if(!$e)return ot;var ft=x($e),bt=c($e);function yt(F,W){var G=ot(F,W),te=G[1],ve=te*bt/(We-1)+ft;return[G[0]*ft/ve,te/ve]}return yt.invert=function(F,W){var G=(We-1)/(We-1-W*bt);return ot.invert(G*F,G*W*ft)},yt}function ns(){var We=2,$e=0,ot=(0,M.r)(ts),ft=ot(We,$e);return ft.distance=function(bt){return arguments.length?ot(We=+bt,$e):We},ft.tilt=function(bt){return arguments.length?ot(We,$e=bt*_):$e*S},ft.scale(432.147).clipAngle(L(1/We)*S-1e-6)}fa.forEach(function(We){We[1]*=1.0144}),Os.invert=function(We,$e){var ot=$e/g,ft=90*ot,bt=r(18,k(ft/5)),yt=o(0,s(bt));do{var F=fa[yt][1],W=fa[yt+1][1],G=fa[r(19,yt+2)][1],te=G-F,ve=G-2*W+F,Ce=2*(k(ot)-W)/te,Be=ve/te,qe=Ce*(1-Be*Ce*(1-2*Be*Ce));if(qe>=0||1===yt){ft=($e>=0?5:-5)*(qe+bt);var et,vt=50;do{qe=(bt=r(18,k(ft)/5))-(yt=s(bt)),F=fa[yt][1],W=fa[yt+1][1],G=fa[r(19,yt+2)][1],ft-=(et=($e>=0?g:-g)*(W+qe*(G-F)/2+qe*qe*(G-2*W+F)/2)-$e)*S}while(k(et)>b&&--vt>0);break}}while(--yt>=0);var xt=fa[yt][0],ee=fa[yt+1][0],ce=fa[r(19,yt+2)][0];return[We/(ee+qe*(ce-xt)/2+qe*qe*(ce-2*ee+xt)/2),ft*_]};var Ar=-179.9999,rs=179.9999,Da=-89.9999,Is=89.9999;function xs(We){return We.length>0}function Ki(We){return-90===We||90===We?[0,We]:[-180,($e=We,Math.floor(1e4*$e)/1e4)];var $e}function qo(We){var $e=We[0],ot=We[1],ft=!1;return $e<=Ar?($e=-180,ft=!0):$e>=rs&&($e=180,ft=!0),ot<=Da?(ot=-90,ft=!0):ot>=Is&&(ot=90,ft=!0),ft?[$e,ot]:We}function fo(We){return We.map(qo)}function wa(We,$e,ot){for(var ft=0,bt=We.length;ft<bt;++ft){var yt=We[ft].slice();ot.push({index:-1,polygon:$e,ring:yt});for(var F=0,W=yt.length;F<W;++F){var G=yt[F],te=G[0],ve=G[1];if(te<=Ar||te>=rs||ve<=Da||ve>=Is){yt[F]=qo(G);for(var Ce=F+1;Ce<W;++Ce){var Be=yt[Ce],qe=Be[0],et=Be[1];if(qe>Ar&&qe<rs&&et>Da&&et<Is)break}if(Ce===F+1)continue;if(F){var vt={index:-1,polygon:$e,ring:yt.slice(0,F+1)};vt.ring[vt.ring.length-1]=Ki(ve),ot[ot.length-1]=vt}else ot.pop();if(Ce>=W)break;ot.push({index:-1,polygon:$e,ring:yt=yt.slice(Ce-1)}),yt[0]=Ki(yt[0][1]),F=-1,W=yt.length}}}}function Mo(We){var $e,ot,ft,bt,yt,F,W=We.length,G={},te={};for($e=0;$e<W;++$e)(ft=(ot=We[$e]).ring[0])[0]!==(yt=ot.ring[ot.ring.length-1])[0]||ft[1]!==yt[1]?(ot.index=$e,G[ft]=te[yt]=ot):(ot.polygon.push(ot.ring),We[$e]=null);for($e=0;$e<W;++$e)if(ot=We[$e]){if(bt=te[ft=ot.ring[0]],F=G[yt=ot.ring[ot.ring.length-1]],delete G[ft],delete te[yt],ft[0]===yt[0]&&ft[1]===yt[1]){ot.polygon.push(ot.ring);continue}bt?(delete te[ft],delete G[bt.ring[0]],bt.ring.pop(),We[bt.index]=null,ot={index:-1,polygon:bt.polygon,ring:bt.ring.concat(ot.ring)},bt===F?ot.polygon.push(ot.ring):(ot.index=W++,We.push(G[ot.ring[0]]=te[ot.ring[ot.ring.length-1]]=ot))):F?(delete G[yt],delete te[F.ring[F.ring.length-1]],ot.ring.pop(),ot={index:W++,polygon:F.polygon,ring:ot.ring.concat(F.ring)},We[F.index]=null,We.push(G[ot.ring[0]]=te[ot.ring[ot.ring.length-1]]=ot)):(ot.ring.push(ot.ring[0]),ot.polygon.push(ot.ring))}}function qa(We){var $e={type:"Feature",geometry:Fa(We.geometry)};return null!=We.id&&($e.id=We.id),null!=We.bbox&&($e.bbox=We.bbox),null!=We.properties&&($e.properties=We.properties),$e}function Fa(We){if(null==We)return We;var $e,ot,ft,bt;switch(We.type){case"GeometryCollection":$e={type:"GeometryCollection",geometries:We.geometries.map(Fa)};break;case"Point":$e={type:"Point",coordinates:qo(We.coordinates)};break;case"MultiPoint":case"LineString":$e={type:We.type,coordinates:fo(We.coordinates)};break;case"MultiLineString":$e={type:"MultiLineString",coordinates:We.coordinates.map(fo)};break;case"Polygon":var yt=[];wa(We.coordinates,yt,ot=[]),Mo(ot),$e={type:"Polygon",coordinates:yt};break;case"MultiPolygon":ot=[],ft=-1,bt=We.coordinates.length;for(var F=new Array(bt);++ft<bt;)wa(We.coordinates[ft],F[ft]=[],ot);Mo(ot),$e={type:"MultiPolygon",coordinates:F.filter(xs)};break;default:return We}return null!=We.bbox&&($e.bbox=We.bbox),$e}function Go(We){if(null==We)return We;switch(We.type){case"Feature":return qa(We);case"FeatureCollection":var $e={type:"FeatureCollection",features:We.features.map(qa)};return null!=We.bbox&&($e.bbox=We.bbox),$e;default:return Fa(We)}}function $i(We,$e){var ot=h($e/2),ft=c(y*ot);return[We*(.74482-.34588*ft*ft),1.70711*ot]}function Ba(){return(0,M.Z)($i).scale(146.153)}function ai(We,$e,ot){var ft=(0,Qo.Z)($e,ot),bt=ft(.5),yt=(0,tt.Z)([-bt[0],-bt[1]])($e),F=ft.distance/2,W=-E(c(yt[1]*_)/c(F)),G=[-bt[0],-bt[1],-(yt[0]>0?v-W:W)*S],te=(0,M.Z)(We(F)).rotate(G),ve=(0,tt.Z)(G),Ce=te.center;return delete te.rotate,te.center=function(Be){return arguments.length?Ce(ve(Be)):ve.invert(Ce())},te.clipAngle(90)}function bs(We){var $e=x(We);function ot(ft,bt){var yt=(0,$r.M)(ft,bt);return yt[0]*=$e,yt}return ot.invert=function(ft,bt){return $r.M.invert(ft/$e,bt)},ot}function La(){return Na([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Na(We,$e){return ai(bs,We,$e)}function Qa(We){if(!(We*=2))return Q.N;var $e=-We/2,ot=-$e,ft=We*We,bt=h(ot),yt=.5/c(ot);function F(W,G){var te=L(x(G)*x(W-$e)),ve=L(x(G)*x(W-ot));return[((te*=te)-(ve*=ve))/(2*We),(G<0?-1:1)*C(4*ft*ve-(ft-te+ve)*(ft-te+ve))/(2*We)]}return F.invert=function(W,G){var te,ve,Ce=G*G,Be=x(C(Ce+(te=W+$e)*te)),qe=x(C(Ce+(te=W+ot)*te));return[T(ve=Be-qe,te=(Be+qe)*bt),(G<0?-1:1)*L(C(te*te+ve*ve)*yt)]},F}function ha(){return ii([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ii(We,$e){return ai(Qa,We,$e)}function Hi(We,$e){if(k($e)<f)return[We,0];var ot=k($e/g),ft=E(ot);if(k(We)<f||k(k($e)-g)<f)return[0,i($e)*v*h(ft/2)];var bt=x(ft),yt=k(v/We-We/v)/2,F=yt*yt,W=bt/(ot+bt-1),G=W*(2/ot-1),te=G*G,ve=te+F,Ce=W-te,Be=F+W;return[i(We)*v*(yt*Ce+C(F*Ce*Ce-ve*(W*W-te)))/ve,i($e)*v*(G*Be-yt*C((F+1)*ve-Be*Be))/ve]}function Ga(){return(0,M.Z)(Hi).scale(79.4183)}function pa(We,$e){if(k($e)<f)return[We,0];var ot=k($e/g),ft=E(ot);if(k(We)<f||k(k($e)-g)<f)return[0,i($e)*v*h(ft/2)];var bt=x(ft),yt=k(v/We-We/v)/2,F=yt*yt,W=bt*(C(1+F)-yt*bt)/(1+F*ot*ot);return[i(We)*v*W,i($e)*v*C(1-W*(2*yt+W))]}function eo(){return(0,M.Z)(pa).scale(79.4183)}function So(We,$e){if(k($e)<f)return[We,0];var ot=$e/g,ft=E(ot);if(k(We)<f||k(k($e)-g)<f)return[0,v*h(ft/2)];var bt=(v/We-We/v)/2,yt=ot/(1+x(ft));return[v*(i(We)*C(bt*bt+1-yt*yt)-bt),v*yt]}function ho(){return(0,M.Z)(So).scale(79.4183)}function Qi(We,$e){if(!$e)return[We,0];var ot=k($e);if(!We||ot===g)return[0,$e];var ft=ot/g,bt=ft*ft,yt=(8*ft-bt*(bt+2)-5)/(2*bt*(ft-1)),F=yt*yt,W=ft*yt,G=bt+F+2*W,te=ft+3*yt,ve=We/g,Ce=ve+1/ve,Be=i(k(We)-g)*C(Ce*Ce-4),qe=Be*Be,et=(Be*(G+F-1)+2*C(G*(bt+F*qe-1)+(1-bt)*(bt*(te*te+4*F)+12*W*F+4*F*F)))/(4*G+qe);return[i(We)*g*et,i($e)*g*C(1+Be*k(et)-et*et)]}function ja(){return(0,M.Z)(Qi).scale(127.16)}function Lr(We,$e,ot,ft){var bt=v/3;We=o(We,f),$e=o($e,f),We=r(We,g),$e=r($e,v-f),ot=o(ot,0),ot=r(ot,99.999999);var yt=(ft=o(ft,f))/100,F=L((ot/100+1)*x(bt))/bt,W=c(We)/c(F*g),G=$e/v,te=C(yt*c(We/2)/c($e/2));return function(ve,Ce,Be,qe,et){function vt(xt,ee){var ce=Be*c(qe*ee),Ae=C(1-ce*ce),Oe=C(2/(1+Ae*x(xt*=et)));return[ve*Ae*Oe*c(xt),Ce*ce*Oe]}return vt.invert=function(xt,ee){var ce=xt/ve,Ae=ee/Ce,Oe=C(ce*ce+Ae*Ae),Fe=2*E(Oe/2);return[T(xt*h(Fe),ve*Oe)/et,Oe&&E(ee*c(Fe)/(Ce*Be*Oe))/qe]},vt}(te/C(G*W*F),1/(te*C(G*W*F)),W,F,G)}function Ir(){var We=65*_,$e=60*_,ot=20,ft=200,bt=(0,M.r)(Lr),yt=bt(We,$e,ot,ft);return yt.poleline=function(F){return arguments.length?bt(We=+F*_,$e,ot,ft):We*S},yt.parallels=function(F){return arguments.length?bt(We,$e=+F*_,ot,ft):$e*S},yt.inflation=function(F){return arguments.length?bt(We,$e,ot=+F,ft):ot},yt.ratio=function(F){return arguments.length?bt(We,$e,ot,ft=+F):ft},yt.scale(163.775)}function is(){return Ir().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}$i.invert=function(We,$e){var ot=$e/1.70711,ft=c(y*ot);return[We/(.74482-.34588*ft*ft),2*l(ot)]},Hi.invert=function(We,$e){if(k($e)<f)return[We,0];if(k(We)<f)return[0,g*c(2*l($e/v))];var ot=(We/=v)*We,ft=($e/=v)*$e,bt=ot+ft,yt=bt*bt,F=-k($e)*(1+bt),W=F-2*ft+ot,G=-2*F+1+2*ft+yt,te=ft/G+(2*W*W*W/(G*G*G)-9*F*W/(G*G))/27,ve=(F-W*W/(3*G))/G,Ce=2*C(-ve/3),Be=L(3*te/(ve*Ce))/3;return[v*(bt-1+C(1+2*(ot-ft)+yt))/(2*We),i($e)*v*(-Ce*x(Be+v/3)-W/(3*G))]},pa.invert=function(We,$e){if(!We)return[0,g*c(2*l($e/v))];var ot=k(We/v),ft=(1-ot*ot-($e/=v)*$e)/(2*ot),bt=C(ft*ft+1);return[i(We)*v*(bt-ft),i($e)*g*c(2*T(C((1-2*ft*ot)*(ft+bt)-ot),C(bt+ft+ot)))]},So.invert=function(We,$e){if(!$e)return[We,0];var ot=$e/v,ft=(v*v*(1-ot*ot)-We*We)/(2*v*We);return[We?v*(i(We)*C(ft*ft+1)-ft):0,g*c(2*l(ot))]},Qi.invert=function(We,$e){var ot;if(!We||!$e)return[We,$e];$e/=v;var ft=i(We)*We/g,bt=(ft*ft-1+4*$e*$e)/k(ft),yt=bt*bt,F=2*$e,W=50;do{var G=F*F,te=(8*F-G*(G+2)-5)/(2*G*(F-1)),ve=(3*F-G*F-10)/(2*G*F),Ce=te*te,Be=F*te,qe=F+te,et=qe*qe,vt=F+3*te,xt=-2*qe*(4*Be*Ce+(1-4*G+3*G*G)*(1+ve)+Ce*(14*G-6-yt+(8*G-8-2*yt)*ve)+Be*(12*G-8+(10*G-10-yt)*ve)),ee=C(et*(G+Ce*yt-1)+(1-G)*(G*(vt*vt+4*Ce)+Ce*(12*Be+4*Ce)));F-=ot=(bt*(et+Ce-1)+2*ee-ft*(4*et+yt))/(bt*(2*te*ve+2*qe*(1+ve))+xt/ee-8*qe*(bt*(-1+Ce+et)+2*ee)*(1+ve)/(yt+4*et))}while(ot>f&&--W>0);return[i(We)*(C(bt*bt+4)+bt)*v/4,g*F]};var po=4*v+3*C(3),Za=2*C(2*v*C(3)/po),ea=xe(Za*C(3)/v,Za,po/6);function zs(){return(0,M.Z)(ea).scale(176.84)}function da(We,$e){return[We*C(1-3*$e*$e/(v*v)),$e]}function as(){return(0,M.Z)(da).scale(152.63)}function go(We,$e){var ot=x($e),ft=x(We)*ot,bt=1-ft,yt=x(We=T(c(We)*ot,-c($e))),F=c(We);return[F*(ot=C(1-ft*ft))-yt*bt,-yt*ot-F*bt]}function ui(){return(0,M.Z)(go).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function gi(We,$e){var ot=V(We,$e);return[(ot[0]+We/g)/2,(ot[1]+$e)/2]}function Rs(){return(0,M.Z)(gi).scale(158.837)}da.invert=function(We,$e){return[We/C(1-3*$e*$e/(v*v)),$e]},go.invert=function(We,$e){var ot=(We*We+$e*$e)/-2,ft=C(-ot*(2+ot)),bt=$e*ot+We*ft,yt=We*ot-$e*ft,F=C(yt*yt+bt*bt);return[T(ft*bt,F*(1+ot)),F?-E(ft*yt/F):0]},gi.invert=function(We,$e){var ot=We,ft=$e,bt=25;do{var yt,F=x(ft),W=c(ft),G=c(2*ft),te=W*W,ve=F*F,Ce=c(ot),Be=x(ot/2),qe=c(ot/2),et=qe*qe,vt=1-ve*Be*Be,xt=vt?L(F*Be)*C(yt=1/vt):yt=0,ee=.5*(2*xt*F*qe+ot/g)-We,ce=.5*(xt*W+ft)-$e,Ae=.5*yt*(ve*et+xt*F*Be*te)+.5/g,Oe=yt*(Ce*G/4-xt*W*qe),Fe=.125*yt*(G*qe-xt*W*ve*Ce),Ue=.5*yt*(te*Be+xt*et*F)+.5,Ge=Oe*Fe-Ue*Ae,Xe=(ce*Oe-ee*Ue)/Ge,rt=(ee*Fe-ce*Ae)/Ge;ot-=Xe,ft-=rt}while((k(Xe)>f||k(rt)>f)&&--bt>0);return[ot,ft]}},33940:function($,I,t){"use strict";function M(){return new k}function k(){this.reset()}t.d(I,{Z:function(){return M}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(x){T(l,x,this.t),T(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new k;function T(x,p,s){var e=x.s=p+s,o=e-p;x.t=p-(e-o)+(s-o)}},97860:function($,I,t){"use strict";t.d(I,{L9:function(){return r},ZP:function(){return b},gL:function(){return a}});var M,k,l,T,x,p=t(33940),s=t(39695),e=t(73182),o=t(72736),r=(0,p.Z)(),n=(0,p.Z)(),a={point:e.Z,lineStart:e.Z,lineEnd:e.Z,polygonStart:function(){r.reset(),a.lineStart=i,a.lineEnd=c},polygonEnd:function(){var v=+r;n.add(v<0?s.BZ+v:v),this.lineStart=this.lineEnd=this.point=e.Z},sphere:function(){n.add(s.BZ)}};function i(){a.point=h}function c(){f(M,k)}function h(v,g){a.point=f,M=v,k=g,l=v*=s.uR,T=(0,s.mC)(g=(g*=s.uR)/2+s.pu),x=(0,s.O$)(g)}function f(v,g){g=(g*=s.uR)/2+s.pu;var y=(v*=s.uR)-l,d=y>=0?1:-1,m=d*y,w=(0,s.mC)(g),u=(0,s.O$)(g),S=x*u,_=T*w+S*(0,s.mC)(m),E=S*d*(0,s.O$)(m);r.add((0,s.fv)(E,_)),l=v,T=w,x=u}function b(v){return n.reset(),(0,o.Z)(v,a),2*n}},77338:function($,I,t){"use strict";t.d(I,{Z:function(){return L}});var M,k,l,T,x,p,s,e,o,r,n=t(33940),a=t(97860),i=t(7620),c=t(39695),h=t(72736),f=(0,n.Z)(),b={point:v,lineStart:y,lineEnd:d,polygonStart:function(){b.point=m,b.lineStart=w,b.lineEnd=u,f.reset(),a.gL.polygonStart()},polygonEnd:function(){a.gL.polygonEnd(),b.point=v,b.lineStart=y,b.lineEnd=d,a.L9<0?(M=-(l=180),k=-(T=90)):f>c.Ho?T=90:f<-c.Ho&&(k=-90),r[0]=M,r[1]=l},sphere:function(){M=-(l=180),k=-(T=90)}};function v(C,P){o.push(r=[M=C,l=C]),P<k&&(k=P),P>T&&(T=P)}function g(C,P){var z=(0,i.Og)([C*c.uR,P*c.uR]);if(e){var j=(0,i.T5)(e,z),V=(0,i.T5)([j[1],-j[0],0],j);(0,i.iJ)(V),V=(0,i.Y1)(V);var D,B=C-x,N=B>0?1:-1,U=V[0]*c.RW*N,J=(0,c.Wn)(B)>180;J^(N*x<U&&U<N*C)?(D=V[1]*c.RW)>T&&(T=D):J^(N*x<(U=(U+360)%360-180)&&U<N*C)?(D=-V[1]*c.RW)<k&&(k=D):(P<k&&(k=P),P>T&&(T=P)),J?C<x?S(M,C)>S(M,l)&&(l=C):S(C,l)>S(M,l)&&(M=C):l>=M?(C<M&&(M=C),C>l&&(l=C)):C>x?S(M,C)>S(M,l)&&(l=C):S(C,l)>S(M,l)&&(M=C)}else o.push(r=[M=C,l=C]);P<k&&(k=P),P>T&&(T=P),e=z,x=C}function y(){b.point=g}function d(){r[0]=M,r[1]=l,b.point=v,e=null}function m(C,P){if(e){var z=C-x;f.add((0,c.Wn)(z)>180?z+(z>0?360:-360):z)}else p=C,s=P;a.gL.point(C,P),g(C,P)}function w(){a.gL.lineStart()}function u(){m(p,s),a.gL.lineEnd(),(0,c.Wn)(f)>c.Ho&&(M=-(l=180)),r[0]=M,r[1]=l,e=null}function S(C,P){return(P-=C)<0?P+360:P}function _(C,P){return C[0]-P[0]}function E(C,P){return C[0]<=C[1]?C[0]<=P&&P<=C[1]:P<C[0]||C[1]<P}function L(C){var P,z,j,R,V,D,B;if(T=l=-(M=k=1/0),o=[],(0,h.Z)(C,b),z=o.length){for(o.sort(_),P=1,V=[j=o[0]];P<z;++P)E(j,(R=o[P])[0])||E(j,R[1])?(S(j[0],R[1])>S(j[0],j[1])&&(j[1]=R[1]),S(R[0],j[1])>S(j[0],j[1])&&(j[0]=R[0])):V.push(j=R);for(D=-1/0,P=0,j=V[z=V.length-1];P<=z;j=R,++P)(B=S(j[1],(R=V[P])[0]))>D&&(D=B,M=R[0],l=j[1])}return o=r=null,M===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,k],[l,T]]}},7620:function($,I,t){"use strict";t.d(I,{Og:function(){return l},T:function(){return s},T5:function(){return x},Y1:function(){return k},iJ:function(){return e},j9:function(){return T},s0:function(){return p}});var M=t(39695);function k(o){return[(0,M.fv)(o[1],o[0]),(0,M.ZR)(o[2])]}function l(o){var r=o[0],n=o[1],a=(0,M.mC)(n);return[a*(0,M.mC)(r),a*(0,M.O$)(r),(0,M.O$)(n)]}function T(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function x(o,r){return[o[1]*r[2]-o[2]*r[1],o[2]*r[0]-o[0]*r[2],o[0]*r[1]-o[1]*r[0]]}function p(o,r){o[0]+=r[0],o[1]+=r[1],o[2]+=r[2]}function s(o,r){return[o[0]*r,o[1]*r,o[2]*r]}function e(o){var r=(0,M._b)(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);o[0]/=r,o[1]/=r,o[2]/=r}},66624:function($,I,t){"use strict";t.d(I,{Z:function(){return z}});var M,k,l,T,x,p,s,e,o,r,n,a,i,c,h,f,b=t(39695),v=t(73182),g=t(72736),y={sphere:v.Z,point:d,lineStart:w,lineEnd:_,polygonStart:function(){y.lineStart=E,y.lineEnd=L},polygonEnd:function(){y.lineStart=w,y.lineEnd=_}};function d(j,R){j*=b.uR;var V=(0,b.mC)(R*=b.uR);m(V*(0,b.mC)(j),V*(0,b.O$)(j),(0,b.O$)(R))}function m(j,R,V){++M,l+=(j-l)/M,T+=(R-T)/M,x+=(V-x)/M}function w(){y.point=u}function u(j,R){j*=b.uR;var V=(0,b.mC)(R*=b.uR);c=V*(0,b.mC)(j),h=V*(0,b.O$)(j),f=(0,b.O$)(R),y.point=S,m(c,h,f)}function S(j,R){j*=b.uR;var V=(0,b.mC)(R*=b.uR),D=V*(0,b.mC)(j),B=V*(0,b.O$)(j),N=(0,b.O$)(R),U=(0,b.fv)((0,b._b)((U=h*N-f*B)*U+(U=f*D-c*N)*U+(U=c*B-h*D)*U),c*D+h*B+f*N);k+=U,p+=U*(c+(c=D)),s+=U*(h+(h=B)),e+=U*(f+(f=N)),m(c,h,f)}function _(){y.point=d}function E(){y.point=C}function L(){P(a,i),y.point=d}function C(j,R){a=j,i=R,j*=b.uR,R*=b.uR,y.point=P;var V=(0,b.mC)(R);c=V*(0,b.mC)(j),h=V*(0,b.O$)(j),f=(0,b.O$)(R),m(c,h,f)}function P(j,R){j*=b.uR;var V=(0,b.mC)(R*=b.uR),D=V*(0,b.mC)(j),B=V*(0,b.O$)(j),N=(0,b.O$)(R),U=h*N-f*B,J=f*D-c*N,Y=c*B-h*D,q=(0,b._b)(U*U+J*J+Y*Y),H=(0,b.ZR)(q),X=q&&-H/q;o+=X*U,r+=X*J,n+=X*Y,k+=H,p+=H*(c+(c=D)),s+=H*(h+(h=B)),e+=H*(f+(f=N)),m(c,h,f)}function z(j){M=k=l=T=x=p=s=e=o=r=n=0,(0,g.Z)(j,y);var R=o,V=r,D=n,B=R*R+V*V+D*D;return B<b.aW&&(R=p,V=s,D=e,k<b.Ho&&(R=l,V=T,D=x),(B=R*R+V*V+D*D)<b.aW)?[NaN,NaN]:[(0,b.fv)(V,R)*b.RW,(0,b.ZR)(D/(0,b._b)(B))*b.RW]}},7613:function($,I,t){"use strict";t.d(I,{m:function(){return x},Z:function(){return s}});var M=t(7620);function k(e){return function(){return e}}var l=t(39695),T=t(49386);function x(e,o,r,n,a,i){if(r){var c=(0,l.mC)(o),h=(0,l.O$)(o),f=n*r;null==a?(a=o+n*l.BZ,i=o-f/2):(a=p(c,a),i=p(c,i),(n>0?a<i:a>i)&&(a+=n*l.BZ));for(var b,v=a;n>0?v>i:v<i;v-=f)b=(0,M.Y1)([c,-h*(0,l.mC)(v),-h*(0,l.O$)(v)]),e.point(b[0],b[1])}}function p(e,o){(o=(0,M.Og)(o))[0]-=e,(0,M.iJ)(o);var r=(0,l.Kh)(-o[1]);return((-o[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function s(){var e,o,r=k([0,0]),n=k(90),a=k(6),i={point:function(h,f){e.push(h=o(h,f)),h[0]*=l.RW,h[1]*=l.RW}};function c(){var h=r.apply(this,arguments),f=n.apply(this,arguments)*l.uR,b=a.apply(this,arguments)*l.uR;return e=[],o=(0,T.I)(-h[0]*l.uR,-h[1]*l.uR,0).invert,x(i,f,b,1),h={type:"Polygon",coordinates:[e]},e=o=null,h}return c.center=function(h){return arguments.length?(r="function"==typeof h?h:k([+h[0],+h[1]]),c):r},c.radius=function(h){return arguments.length?(n="function"==typeof h?h:k(+h),c):n},c.precision=function(h){return arguments.length?(a="function"==typeof h?h:k(+h),c):a},c}},87070:function($,I,t){"use strict";var M=t(97023),k=t(39695);I.Z=(0,M.Z)(function(){return!0},function(l){var T,x=NaN,p=NaN,s=NaN;return{lineStart:function(){l.lineStart(),T=1},point:function(e,o){var a,i,c,h,f,b,v,r=e>0?k.pi:-k.pi,n=(0,k.Wn)(e-x);(0,k.Wn)(n-k.pi)<k.Ho?(l.point(x,p=(p+o)/2>0?k.ou:-k.ou),l.point(s,p),l.lineEnd(),l.lineStart(),l.point(r,p),l.point(e,p),T=0):s!==r&&n>=k.pi&&((0,k.Wn)(x-s)<k.Ho&&(x-=s*k.Ho),(0,k.Wn)(e-r)<k.Ho&&(e-=r*k.Ho),i=p,h=o,v=(0,k.O$)((a=x)-(c=e)),p=(0,k.Wn)(v)>k.Ho?(0,k.z4)(((0,k.O$)(i)*(b=(0,k.mC)(h))*(0,k.O$)(c)-(0,k.O$)(h)*(f=(0,k.mC)(i))*(0,k.O$)(a))/(f*b*v)):(i+h)/2,l.point(s,p),l.lineEnd(),l.lineStart(),l.point(r,p),T=0),l.point(x=e,p=o),s=r},lineEnd:function(){l.lineEnd(),x=p=NaN},clean:function(){return 2-T}}},function(l,T,x,p){var s;if(null==l)p.point(-k.pi,s=x*k.ou),p.point(0,s),p.point(k.pi,s),p.point(k.pi,0),p.point(k.pi,-s),p.point(0,-s),p.point(-k.pi,-s),p.point(-k.pi,0),p.point(-k.pi,s);else if((0,k.Wn)(l[0]-T[0])>k.Ho){var e=l[0]<T[0]?k.pi:-k.pi;p.point(-e,s=x*e/2),p.point(0,s),p.point(e,s)}else p.point(T[0],T[1])},[-k.pi,-k.ou])},85272:function($,I,t){"use strict";t.d(I,{Z:function(){return k}});var M=t(73182);function k(){var l,T=[];return{point:function(x,p,s){l.push([x,p,s])},lineStart:function(){T.push(l=[])},lineEnd:M.Z,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var x=T;return T=[],l=null,x}}}},1457:function($,I,t){"use strict";t.d(I,{Z:function(){return p}});var M=t(7620),k=t(7613),l=t(39695),T=t(67108),x=t(97023);function p(s){var e=(0,l.mC)(s),o=6*l.uR,r=e>0,n=(0,l.Wn)(e)>l.Ho;function a(h,f){return(0,l.mC)(h)*(0,l.mC)(f)>e}function i(h,f,b){var v=(0,M.Og)(h),g=(0,M.Og)(f),y=[1,0,0],d=(0,M.T5)(v,g),m=(0,M.j9)(d,d),w=d[0],u=m-w*w;if(!u)return!b&&h;var S=e*m/u,_=-e*w/u,E=(0,M.T5)(y,d),L=(0,M.T)(y,S),C=(0,M.T)(d,_);(0,M.s0)(L,C);var P=E,z=(0,M.j9)(L,P),j=(0,M.j9)(P,P),R=z*z-j*((0,M.j9)(L,L)-1);if(!(R<0)){var V=(0,l._b)(R),D=(0,M.T)(P,(-z-V)/j);if((0,M.s0)(D,L),D=(0,M.Y1)(D),!b)return D;var B,N=h[0],U=f[0],J=h[1],Y=f[1];U<N&&(B=N,N=U,U=B);var q=U-N,H=(0,l.Wn)(q-l.pi)<l.Ho;if(!H&&Y<J&&(B=J,J=Y,Y=B),H||q<l.Ho?H?J+Y>0^D[1]<((0,l.Wn)(D[0]-N)<l.Ho?J:Y):J<=D[1]&&D[1]<=Y:q>l.pi^(N<=D[0]&&D[0]<=U)){var X=(0,M.T)(P,(-z+V)/j);return(0,M.s0)(X,L),[D,(0,M.Y1)(X)]}}}function c(h,f){var b=r?s:l.pi-s,v=0;return h<-b?v|=1:h>b&&(v|=2),f<-b?v|=4:f>b&&(v|=8),v}return(0,x.Z)(a,function(h){var f,b,v,g,y;return{lineStart:function(){g=v=!1,y=1},point:function(d,m){var w,u=[d,m],S=a(d,m),_=r?S?0:c(d,m):S?c(d+(d<0?l.pi:-l.pi),m):0;if(!f&&(g=v=S)&&h.lineStart(),S!==v&&(!(w=i(f,u))||(0,T.Z)(f,w)||(0,T.Z)(u,w))&&(u[2]=1),S!==v)y=0,S?(h.lineStart(),w=i(u,f),h.point(w[0],w[1])):(w=i(f,u),h.point(w[0],w[1],2),h.lineEnd()),f=w;else if(n&&f&&r^S){var E;_&b||!(E=i(u,f,!0))||(y=0,r?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!S||f&&(0,T.Z)(f,u)||h.point(u[0],u[1]),f=u,v=S,b=_},lineEnd:function(){v&&h.lineEnd(),f=null},clean:function(){return y|(g&&v)<<1}}},function(h,f,b,v){(0,k.m)(v,s,o,b,h,f)},r?[0,-s]:[-l.pi,s-l.pi])}},97023:function($,I,t){"use strict";t.d(I,{Z:function(){return p}});var M=t(85272),k=t(46225),l=t(39695),T=t(23071),x=t(33064);function p(o,r,n,a){return function(i){var c,h,f,b=r(i),v=(0,M.Z)(),g=r(v),y=!1,d={point:m,lineStart:u,lineEnd:S,polygonStart:function(){d.point=_,d.lineStart=E,d.lineEnd=L,h=[],c=[]},polygonEnd:function(){d.point=m,d.lineStart=u,d.lineEnd=S,h=(0,x.TS)(h);var C=(0,T.Z)(c,a);h.length?(y||(i.polygonStart(),y=!0),(0,k.Z)(h,e,C,n,i)):C&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(C,P){o(C,P)&&i.point(C,P)}function w(C,P){b.point(C,P)}function u(){d.point=w,b.lineStart()}function S(){d.point=m,b.lineEnd()}function _(C,P){f.push([C,P]),g.point(C,P)}function E(){g.lineStart(),f=[]}function L(){_(f[0][0],f[0][1]),g.lineEnd();var C,P,z,j,R=g.clean(),V=v.result(),D=V.length;if(f.pop(),c.push(f),f=null,D)if(1&R){if((P=(z=V[0]).length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),C=0;C<P;++C)i.point((j=z[C])[0],j[1]);i.lineEnd()}}else D>1&&2&R&&V.push(V.pop().concat(V.shift())),h.push(V.filter(s))}return d}}function s(o){return o.length>1}function e(o,r){return((o=o.x)[0]<0?o[1]-l.ou-l.Ho:l.ou-o[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function($,I,t){"use strict";t.d(I,{Z:function(){return s}});var M=t(39695),k=t(85272),l=t(46225),T=t(33064),x=1e9,p=-x;function s(e,o,r,n){function a(b,v){return e<=b&&b<=r&&o<=v&&v<=n}function i(b,v,g,y){var d=0,m=0;if(null==b||(d=c(b,g))!==(m=c(v,g))||f(b,v)<0^g>0)do{y.point(0===d||3===d?e:r,d>1?n:o)}while((d=(d+g+4)%4)!==m);else y.point(v[0],v[1])}function c(b,v){return(0,M.Wn)(b[0]-e)<M.Ho?v>0?0:3:(0,M.Wn)(b[0]-r)<M.Ho?v>0?2:1:(0,M.Wn)(b[1]-o)<M.Ho?v>0?1:0:v>0?3:2}function h(b,v){return f(b.x,v.x)}function f(b,v){var g=c(b,1),y=c(v,1);return g!==y?g-y:0===g?v[1]-b[1]:1===g?b[0]-v[0]:2===g?b[1]-v[1]:v[0]-b[0]}return function(b){var v,g,y,d,m,w,u,S,_,E,L,C=b,P=(0,k.Z)(),z={point:j,lineStart:function(){z.point=R,g&&g.push(y=[]),E=!0,_=!1,u=S=NaN},lineEnd:function(){v&&(R(d,m),w&&_&&P.rejoin(),v.push(P.result())),z.point=j,_&&C.lineEnd()},polygonStart:function(){C=P,v=[],g=[],L=!0},polygonEnd:function(){var V=function(){for(var N=0,U=0,J=g.length;U<J;++U)for(var Y,q,H=g[U],X=1,Q=H.length,ne=H[0],re=ne[0],ae=ne[1];X<Q;++X)Y=re,q=ae,re=(ne=H[X])[0],ae=ne[1],q<=n?ae>n&&(re-Y)*(n-q)>(ae-q)*(e-Y)&&++N:ae<=n&&(re-Y)*(n-q)<(ae-q)*(e-Y)&&--N;return N}(),D=L&&V,B=(v=(0,T.TS)(v)).length;(D||B)&&(b.polygonStart(),D&&(b.lineStart(),i(null,null,1,b),b.lineEnd()),B&&(0,l.Z)(v,h,V,i,b),b.polygonEnd()),C=b,v=g=y=null}};function j(V,D){a(V,D)&&C.point(V,D)}function R(V,D){var B=a(V,D);if(g&&y.push([V,D]),E)d=V,m=D,w=B,E=!1,B&&(C.lineStart(),C.point(V,D));else if(B&&_)C.point(V,D);else{var N=[u=Math.max(p,Math.min(x,u)),S=Math.max(p,Math.min(x,S))],U=[V=Math.max(p,Math.min(x,V)),D=Math.max(p,Math.min(x,D))];!function(J,Y,q,H,X,Q){var ne,re=J[0],ae=J[1],se=0,pe=1,ke=Y[0]-re,me=Y[1]-ae;if(ne=q-re,ke||!(ne>0)){if(ne/=ke,ke<0){if(ne<se)return;ne<pe&&(pe=ne)}else if(ke>0){if(ne>pe)return;ne>se&&(se=ne)}if(ne=X-re,ke||!(ne<0)){if(ne/=ke,ke<0){if(ne>pe)return;ne>se&&(se=ne)}else if(ke>0){if(ne<se)return;ne<pe&&(pe=ne)}if(ne=H-ae,me||!(ne>0)){if(ne/=me,me<0){if(ne<se)return;ne<pe&&(pe=ne)}else if(me>0){if(ne>pe)return;ne>se&&(se=ne)}if(ne=Q-ae,me||!(ne<0)){if(ne/=me,me<0){if(ne>pe)return;ne>se&&(se=ne)}else if(me>0){if(ne<se)return;ne<pe&&(pe=ne)}return se>0&&(J[0]=re+se*ke,J[1]=ae+se*me),pe<1&&(Y[0]=re+pe*ke,Y[1]=ae+pe*me),!0}}}}}(N,U,e,o,r,n)?B&&(C.lineStart(),C.point(V,D),L=!1):(_||(C.lineStart(),C.point(N[0],N[1])),C.point(U[0],U[1]),B||C.lineEnd(),L=!1)}u=V,S=D,_=B}return z}}},46225:function($,I,t){"use strict";t.d(I,{Z:function(){return T}});var M=t(67108),k=t(39695);function l(p,s,e,o){this.x=p,this.z=s,this.o=e,this.e=o,this.v=!1,this.n=this.p=null}function T(p,s,e,o,r){var n,a,i=[],c=[];if(p.forEach(function(y){if(!((d=y.length-1)<=0)){var d,m,w=y[0],u=y[d];if((0,M.Z)(w,u)){if(!w[2]&&!u[2]){for(r.lineStart(),n=0;n<d;++n)r.point((w=y[n])[0],w[1]);return void r.lineEnd()}u[0]+=2*k.Ho}i.push(m=new l(w,y,null,!0)),c.push(m.o=new l(w,null,m,!1)),i.push(m=new l(u,y,null,!1)),c.push(m.o=new l(u,null,m,!0))}}),i.length){for(c.sort(s),x(i),x(c),n=0,a=c.length;n<a;++n)c[n].e=e=!e;for(var h,f,b=i[0];;){for(var v=b,g=!0;v.v;)if((v=v.n)===b)return;h=v.z,r.lineStart();do{if(v.v=v.o.v=!0,v.e){if(g)for(n=0,a=h.length;n<a;++n)r.point((f=h[n])[0],f[1]);else o(v.x,v.n.x,1,r);v=v.n}else{if(g)for(n=(h=v.p.z).length-1;n>=0;--n)r.point((f=h[n])[0],f[1]);else o(v.x,v.p.x,-1,r);v=v.p}h=(v=v.o).z,g=!g}while(!v.v);r.lineEnd()}}}function x(p){if(s=p.length){for(var s,e,o=0,r=p[0];++o<s;)r.n=e=p[o],e.p=r,r=e;r.n=e=p[0],e.p=r}}},96059:function($,I,t){"use strict";function M(k,l){function T(x,p){return x=k(x,p),l(x[0],x[1])}return k.invert&&l.invert&&(T.invert=function(x,p){return(x=l.invert(x,p))&&k.invert(x[0],x[1])}),T}t.d(I,{Z:function(){return M}})},8593:function($,I,t){"use strict";function M(k){return k}t.d(I,{Z:function(){return M}})},27362:function($,I,t){"use strict";t.r(I),t.d(I,{geoAlbers:function(){return At},geoAlbersUsa:function(){return Et},geoArea:function(){return M.ZP},geoAzimuthalEqualArea:function(){return gt.Z},geoAzimuthalEqualAreaRaw:function(){return gt.l},geoAzimuthalEquidistant:function(){return kt.Z},geoAzimuthalEquidistantRaw:function(){return kt.N},geoBounds:function(){return k.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return T.Z},geoClipAntimeridian:function(){return x.Z},geoClipCircle:function(){return p.Z},geoClipExtent:function(){return e},geoClipRectangle:function(){return s.Z},geoConicConformal:function(){return fn},geoConicConformalRaw:function(){return Kt},geoConicEqualArea:function(){return Lt},geoConicEqualAreaRaw:function(){return mt},geoConicEquidistant:function(){return jn},geoConicEquidistantRaw:function(){return xn},geoContains:function(){return V},geoDistance:function(){return S},geoEqualEarth:function(){return kn},geoEqualEarthRaw:function(){return En},geoEquirectangular:function(){return nn.Z},geoEquirectangularRaw:function(){return nn.k},geoGnomonic:function(){return zn.Z},geoGnomonicRaw:function(){return zn.M},geoGraticule:function(){return U},geoGraticule10:function(){return J},geoIdentity:function(){return Bn},geoInterpolate:function(){return Q.Z},geoLength:function(){return m},geoMercator:function(){return Nt},geoMercatorRaw:function(){return Ut},geoNaturalEarth1:function(){return er.Z},geoNaturalEarth1Raw:function(){return er.K},geoOrthographic:function(){return Xn.Z},geoOrthographicRaw:function(){return Xn.I},geoPath:function(){return Ke},geoProjection:function(){return it.Z},geoProjectionMutator:function(){return it.r},geoRotation:function(){return It.Z},geoStereographic:function(){return $n},geoStereographicRaw:function(){return ur},geoStream:function(){return f.Z},geoTransform:function(){return Fn.Z},geoTransverseMercator:function(){return hr},geoTransverseMercatorRaw:function(){return lr}});var M=t(97860),k=t(77338),l=t(66624),T=t(7613),x=t(87070),p=t(1457),s=t(87605);function e(){var Gt,pn,An,Tn=0,Rn=0,qn=960,Un=500;return An={stream:function(Yn){return Gt&&pn===Yn?Gt:Gt=(0,s.Z)(Tn,Rn,qn,Un)(pn=Yn)},extent:function(Yn){return arguments.length?(Tn=+Yn[0][0],Rn=+Yn[0][1],qn=+Yn[1][0],Un=+Yn[1][1],Gt=pn=null,An):[[Tn,Rn],[qn,Un]]}}}var o,r,n,a=t(23071),i=t(33940),c=t(39695),h=t(73182),f=t(72736),b=(0,i.Z)(),v={sphere:h.Z,point:h.Z,lineStart:function(){v.point=y,v.lineEnd=g},lineEnd:h.Z,polygonStart:h.Z,polygonEnd:h.Z};function g(){v.point=v.lineEnd=h.Z}function y(Gt,pn){o=Gt*=c.uR,r=(0,c.O$)(pn*=c.uR),n=(0,c.mC)(pn),v.point=d}function d(Gt,pn){Gt*=c.uR;var An=(0,c.O$)(pn*=c.uR),Tn=(0,c.mC)(pn),Rn=(0,c.Wn)(Gt-o),qn=(0,c.mC)(Rn),Un=Tn*(0,c.O$)(Rn),Yn=n*An-r*Tn*qn,or=r*An+n*Tn*qn;b.add((0,c.fv)((0,c._b)(Un*Un+Yn*Yn),or)),o=Gt,r=An,n=Tn}function m(Gt){return b.reset(),(0,f.Z)(Gt,v),+b}var w=[null,null],u={type:"LineString",coordinates:w};function S(Gt,pn){return w[0]=Gt,w[1]=pn,m(u)}var _={Feature:function(Gt,pn){return L(Gt.geometry,pn)},FeatureCollection:function(Gt,pn){for(var An=Gt.features,Tn=-1,Rn=An.length;++Tn<Rn;)if(L(An[Tn].geometry,pn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Gt,pn){return C(Gt.coordinates,pn)},MultiPoint:function(Gt,pn){for(var An=Gt.coordinates,Tn=-1,Rn=An.length;++Tn<Rn;)if(C(An[Tn],pn))return!0;return!1},LineString:function(Gt,pn){return P(Gt.coordinates,pn)},MultiLineString:function(Gt,pn){for(var An=Gt.coordinates,Tn=-1,Rn=An.length;++Tn<Rn;)if(P(An[Tn],pn))return!0;return!1},Polygon:function(Gt,pn){return z(Gt.coordinates,pn)},MultiPolygon:function(Gt,pn){for(var An=Gt.coordinates,Tn=-1,Rn=An.length;++Tn<Rn;)if(z(An[Tn],pn))return!0;return!1},GeometryCollection:function(Gt,pn){for(var An=Gt.geometries,Tn=-1,Rn=An.length;++Tn<Rn;)if(L(An[Tn],pn))return!0;return!1}};function L(Gt,pn){return!(!Gt||!E.hasOwnProperty(Gt.type))&&E[Gt.type](Gt,pn)}function C(Gt,pn){return 0===S(Gt,pn)}function P(Gt,pn){for(var An,Tn,Rn,qn=0,Un=Gt.length;qn<Un;qn++){if(0===(Tn=S(Gt[qn],pn))||qn>0&&(Rn=S(Gt[qn],Gt[qn-1]))>0&&An<=Rn&&Tn<=Rn&&(An+Tn-Rn)*(1-Math.pow((An-Tn)/Rn,2))<c.aW*Rn)return!0;An=Tn}return!1}function z(Gt,pn){return!!(0,a.Z)(Gt.map(j),R(pn))}function j(Gt){return(Gt=Gt.map(R)).pop(),Gt}function R(Gt){return[Gt[0]*c.uR,Gt[1]*c.uR]}function V(Gt,pn){return(Gt&&_.hasOwnProperty(Gt.type)?_[Gt.type]:L)(Gt,pn)}var D=t(33064);function B(Gt,pn,An){var Tn=(0,D.w6)(Gt,pn-c.Ho,An).concat(pn);return function(Rn){return Tn.map(function(qn){return[Rn,qn]})}}function N(Gt,pn,An){var Tn=(0,D.w6)(Gt,pn-c.Ho,An).concat(pn);return function(Rn){return Tn.map(function(qn){return[qn,Rn]})}}function U(){var Gt,pn,An,Tn,Rn,qn,Un,Yn,or,Jt,Mn,zt,Zt=10,rn=Zt,Ln=90,Sn=360,wn=2.5;function ln(){return{type:"MultiLineString",coordinates:gn()}}function gn(){return(0,D.w6)((0,c.mD)(Tn/Ln)*Ln,An,Ln).map(Mn).concat((0,D.w6)((0,c.mD)(Yn/Sn)*Sn,Un,Sn).map(zt)).concat((0,D.w6)((0,c.mD)(pn/Zt)*Zt,Gt,Zt).filter(function(un){return(0,c.Wn)(un%Ln)>c.Ho}).map(or)).concat((0,D.w6)((0,c.mD)(qn/rn)*rn,Rn,rn).filter(function(un){return(0,c.Wn)(un%Sn)>c.Ho}).map(Jt))}return ln.lines=function(){return gn().map(function(un){return{type:"LineString",coordinates:un}})},ln.outline=function(){return{type:"Polygon",coordinates:[Mn(Tn).concat(zt(Un).slice(1),Mn(An).reverse().slice(1),zt(Yn).reverse().slice(1))]}},ln.extent=function(un){return arguments.length?ln.extentMajor(un).extentMinor(un):ln.extentMinor()},ln.extentMajor=function(un){return arguments.length?(Yn=+un[0][1],Un=+un[1][1],(Tn=+un[0][0])>(An=+un[1][0])&&(un=Tn,Tn=An,An=un),Yn>Un&&(un=Yn,Yn=Un,Un=un),ln.precision(wn)):[[Tn,Yn],[An,Un]]},ln.extentMinor=function(un){return arguments.length?(qn=+un[0][1],Rn=+un[1][1],(pn=+un[0][0])>(Gt=+un[1][0])&&(un=pn,pn=Gt,Gt=un),qn>Rn&&(un=qn,qn=Rn,Rn=un),ln.precision(wn)):[[pn,qn],[Gt,Rn]]},ln.step=function(un){return arguments.length?ln.stepMajor(un).stepMinor(un):ln.stepMinor()},ln.stepMajor=function(un){return arguments.length?(Ln=+un[0],Sn=+un[1],ln):[Ln,Sn]},ln.stepMinor=function(un){return arguments.length?(Zt=+un[0],rn=+un[1],ln):[Zt,rn]},ln.precision=function(un){return arguments.length?(wn=+un,or=B(qn,Rn,90),Jt=N(pn,Gt,wn),Mn=B(Yn,Un,90),zt=N(Tn,An,wn),ln):wn},ln.extentMajor([[-180,-90+c.Ho],[180,90-c.Ho]]).extentMinor([[-180,-80-c.Ho],[180,80+c.Ho]])}function J(){return U()()}var Y,q,H,X,Q=t(83074),ne=t(8593),re=(0,i.Z)(),ae=(0,i.Z)(),se={point:h.Z,lineStart:h.Z,lineEnd:h.Z,polygonStart:function(){se.lineStart=pe,se.lineEnd=le},polygonEnd:function(){se.lineStart=se.lineEnd=se.point=h.Z,re.add((0,c.Wn)(ae)),ae.reset()},result:function(){var Gt=re/2;return re.reset(),Gt}};function pe(){se.point=ke}function ke(Gt,pn){se.point=me,Y=H=Gt,q=X=pn}function me(Gt,pn){ae.add(X*Gt-H*pn),H=Gt,X=pn}function le(){me(Y,q)}var ue,Ee,de,xe,Te=se,we=t(3559),K=0,oe=0,he=0,ye=0,Me=0,Re=0,Pe=0,De=0,fe=0,ge={point:be,lineStart:Ie,lineEnd:tt,polygonStart:function(){ge.lineStart=nt,ge.lineEnd=st},polygonEnd:function(){ge.point=be,ge.lineStart=Ie,ge.lineEnd=tt},result:function(){var Gt=fe?[Pe/fe,De/fe]:Re?[ye/Re,Me/Re]:he?[K/he,oe/he]:[NaN,NaN];return K=oe=he=ye=Me=Re=Pe=De=fe=0,Gt}};function be(Gt,pn){K+=Gt,oe+=pn,++he}function Ie(){ge.point=He}function He(Gt,pn){ge.point=Ve,be(de=Gt,xe=pn)}function Ve(Gt,pn){var An=Gt-de,Tn=pn-xe,Rn=(0,c._b)(An*An+Tn*Tn);ye+=Rn*(de+Gt)/2,Me+=Rn*(xe+pn)/2,Re+=Rn,be(de=Gt,xe=pn)}function tt(){ge.point=be}function nt(){ge.point=dt}function st(){wt(ue,Ee)}function dt(Gt,pn){ge.point=wt,be(ue=de=Gt,Ee=xe=pn)}function wt(Gt,pn){var An=Gt-de,Tn=pn-xe,Rn=(0,c._b)(An*An+Tn*Tn);ye+=Rn*(de+Gt)/2,Me+=Rn*(xe+pn)/2,Re+=Rn,Pe+=(Rn=xe*Gt-de*pn)*(de+Gt),De+=Rn*(xe+pn),fe+=3*Rn,be(de=Gt,xe=pn)}var _t=ge;function pt(Gt){this._context=Gt}pt.prototype={_radius:4.5,pointRadius:function(Gt){return this._radius=Gt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(Gt,pn){switch(this._point){case 0:this._context.moveTo(Gt,pn),this._point=1;break;case 1:this._context.lineTo(Gt,pn);break;default:this._context.moveTo(Gt+this._radius,pn),this._context.arc(Gt,pn,this._radius,0,c.BZ)}},result:h.Z};var Pt,St,Ot,jt,Dt,Ye=(0,i.Z)(),Ze={point:h.Z,lineStart:function(){Ze.point=Ne},lineEnd:function(){Pt&&Je(St,Ot),Ze.point=h.Z},polygonStart:function(){Pt=!0},polygonEnd:function(){Pt=null},result:function(){var Gt=+Ye;return Ye.reset(),Gt}};function Ne(Gt,pn){Ze.point=Je,St=jt=Gt,Ot=Dt=pn}function Je(Gt,pn){Ye.add((0,c._b)((jt-=Gt)*jt+(Dt-=pn)*Dt)),jt=Gt,Dt=pn}var at=Ze;function Se(){this._string=[]}function ze(Gt){return"m0,"+Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+-2*Gt+"a"+Gt+","+Gt+" 0 1,1 0,"+2*Gt+"z"}function Ke(Gt,pn){var An,Tn,Rn=4.5;function qn(Un){return Un&&("function"==typeof Rn&&Tn.pointRadius(+Rn.apply(this,arguments)),(0,f.Z)(Un,An(Tn))),Tn.result()}return qn.area=function(Un){return(0,f.Z)(Un,An(Te)),Te.result()},qn.measure=function(Un){return(0,f.Z)(Un,An(at)),at.result()},qn.bounds=function(Un){return(0,f.Z)(Un,An(we.Z)),we.Z.result()},qn.centroid=function(Un){return(0,f.Z)(Un,An(_t)),_t.result()},qn.projection=function(Un){return arguments.length?(An=null==Un?(Gt=null,ne.Z):(Gt=Un).stream,qn):Gt},qn.context=function(Un){return arguments.length?(Tn=null==Un?(pn=null,new Se):new pt(pn=Un),"function"!=typeof Rn&&Tn.pointRadius(Rn),qn):pn},qn.pointRadius=function(Un){return arguments.length?(Rn="function"==typeof Un?Un:(Tn.pointRadius(+Un),+Un),qn):Rn},qn.projection(Gt).context(pn)}Se.prototype={_radius:4.5,_circle:ze(4.5),pointRadius:function(Gt){return(Gt=+Gt)!==this._radius&&(this._radius=Gt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(Gt,pn){switch(this._point){case 0:this._string.push("M",Gt,",",pn),this._point=1;break;case 1:this._string.push("L",Gt,",",pn);break;default:null==this._circle&&(this._circle=ze(this._radius)),this._string.push("M",Gt,",",pn,this._circle)}},result:function(){if(this._string.length){var Gt=this._string.join("");return this._string=[],Gt}return null}};var it=t(15002);function ct(Gt){var pn=0,An=c.pi/3,Tn=(0,it.r)(Gt),Rn=Tn(pn,An);return Rn.parallels=function(qn){return arguments.length?Tn(pn=qn[0]*c.uR,An=qn[1]*c.uR):[pn*c.RW,An*c.RW]},Rn}function mt(Gt,pn){var An=(0,c.O$)(Gt),Tn=(An+(0,c.O$)(pn))/2;if((0,c.Wn)(Tn)<c.Ho)return function(Yn){var or=(0,c.mC)(Yn);function Jt(Mn,zt){return[Mn*or,(0,c.O$)(zt)/or]}return Jt.invert=function(Mn,zt){return[Mn/or,(0,c.ZR)(zt*or)]},Jt}(Gt);var Rn=1+An*(2*Tn-An),qn=(0,c._b)(Rn)/Tn;function Un(Yn,or){var Jt=(0,c._b)(Rn-2*Tn*(0,c.O$)(or))/Tn;return[Jt*(0,c.O$)(Yn*=Tn),qn-Jt*(0,c.mC)(Yn)]}return Un.invert=function(Yn,or){var Jt=qn-or,Mn=(0,c.fv)(Yn,(0,c.Wn)(Jt))*(0,c.Xx)(Jt);return Jt*Tn<0&&(Mn-=c.pi*(0,c.Xx)(Yn)*(0,c.Xx)(Jt)),[Mn/Tn,(0,c.ZR)((Rn-(Yn*Yn+Jt*Jt)*Tn*Tn)/(2*Tn))]},Un}function Lt(){return ct(mt).scale(155.424).center([0,33.6442])}function At(){return Lt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ht=t(47589);function Et(){var Gt,pn,An,Tn,Rn,qn,Un=At(),Yn=Lt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),or=Lt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Jt={point:function(Zt,rn){qn=[Zt,rn]}};function Mn(Zt){var rn=Zt[0],Ln=Zt[1];return qn=null,An.point(rn,Ln),qn||(Tn.point(rn,Ln),qn)||(Rn.point(rn,Ln),qn)}function zt(){return Gt=pn=null,Mn}return Mn.invert=function(Zt){var rn=Un.scale(),Ln=Un.translate(),Sn=(Zt[0]-Ln[0])/rn,wn=(Zt[1]-Ln[1])/rn;return(wn>=.12&&wn<.234&&Sn>=-.425&&Sn<-.214?Yn:wn>=.166&&wn<.234&&Sn>=-.214&&Sn<-.115?or:Un).invert(Zt)},Mn.stream=function(Zt){return Gt&&pn===Zt?Gt:(rn=[Un.stream(pn=Zt),Yn.stream(Zt),or.stream(Zt)],Ln=rn.length,Gt={point:function(Sn,wn){for(var ln=-1;++ln<Ln;)rn[ln].point(Sn,wn)},sphere:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].sphere()},lineStart:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].lineStart()},lineEnd:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].lineEnd()},polygonStart:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].polygonStart()},polygonEnd:function(){for(var Sn=-1;++Sn<Ln;)rn[Sn].polygonEnd()}});var rn,Ln},Mn.precision=function(Zt){return arguments.length?(Un.precision(Zt),Yn.precision(Zt),or.precision(Zt),zt()):Un.precision()},Mn.scale=function(Zt){return arguments.length?(Un.scale(Zt),Yn.scale(.35*Zt),or.scale(Zt),Mn.translate(Un.translate())):Un.scale()},Mn.translate=function(Zt){if(!arguments.length)return Un.translate();var rn=Un.scale(),Ln=+Zt[0],Sn=+Zt[1];return An=Un.translate(Zt).clipExtent([[Ln-.455*rn,Sn-.238*rn],[Ln+.455*rn,Sn+.238*rn]]).stream(Jt),Tn=Yn.translate([Ln-.307*rn,Sn+.201*rn]).clipExtent([[Ln-.425*rn+c.Ho,Sn+.12*rn+c.Ho],[Ln-.214*rn-c.Ho,Sn+.234*rn-c.Ho]]).stream(Jt),Rn=or.translate([Ln-.205*rn,Sn+.212*rn]).clipExtent([[Ln-.214*rn+c.Ho,Sn+.166*rn+c.Ho],[Ln-.115*rn-c.Ho,Sn+.234*rn-c.Ho]]).stream(Jt),zt()},Mn.fitExtent=function(Zt,rn){return(0,ht.qg)(Mn,Zt,rn)},Mn.fitSize=function(Zt,rn){return(0,ht.mF)(Mn,Zt,rn)},Mn.fitWidth=function(Zt,rn){return(0,ht.V6)(Mn,Zt,rn)},Mn.fitHeight=function(Zt,rn){return(0,ht.rf)(Mn,Zt,rn)},Mn.scale(1070)}var gt=t(12956),kt=t(17889),It=t(49386);function Ut(Gt,pn){return[Gt,(0,c.cM)((0,c.OR)((c.ou+pn)/2))]}function Nt(){return qt(Ut).scale(961/c.BZ)}function qt(Gt){var pn,An,Tn,Rn=(0,it.Z)(Gt),qn=Rn.center,Un=Rn.scale,Yn=Rn.translate,or=Rn.clipExtent,Jt=null;function Mn(){var zt=c.pi*Un(),Zt=Rn((0,It.Z)(Rn.rotate()).invert([0,0]));return or(null==Jt?[[Zt[0]-zt,Zt[1]-zt],[Zt[0]+zt,Zt[1]+zt]]:Gt===Ut?[[Math.max(Zt[0]-zt,Jt),pn],[Math.min(Zt[0]+zt,An),Tn]]:[[Jt,Math.max(Zt[1]-zt,pn)],[An,Math.min(Zt[1]+zt,Tn)]])}return Rn.scale=function(zt){return arguments.length?(Un(zt),Mn()):Un()},Rn.translate=function(zt){return arguments.length?(Yn(zt),Mn()):Yn()},Rn.center=function(zt){return arguments.length?(qn(zt),Mn()):qn()},Rn.clipExtent=function(zt){return arguments.length?(null==zt?Jt=pn=An=Tn=null:(Jt=+zt[0][0],pn=+zt[0][1],An=+zt[1][0],Tn=+zt[1][1]),Mn()):null==Jt?null:[[Jt,pn],[An,Tn]]},Mn()}function Xt(Gt){return(0,c.OR)((c.ou+Gt)/2)}function Kt(Gt,pn){var An=(0,c.mC)(Gt),Tn=Gt===pn?(0,c.O$)(Gt):(0,c.cM)(An/(0,c.mC)(pn))/(0,c.cM)(Xt(pn)/Xt(Gt)),Rn=An*(0,c.sQ)(Xt(Gt),Tn)/Tn;if(!Tn)return Ut;function qn(Un,Yn){Rn>0?Yn<-c.ou+c.Ho&&(Yn=-c.ou+c.Ho):Yn>c.ou-c.Ho&&(Yn=c.ou-c.Ho);var or=Rn/(0,c.sQ)(Xt(Yn),Tn);return[or*(0,c.O$)(Tn*Un),Rn-or*(0,c.mC)(Tn*Un)]}return qn.invert=function(Un,Yn){var or=Rn-Yn,Jt=(0,c.Xx)(Tn)*(0,c._b)(Un*Un+or*or),Mn=(0,c.fv)(Un,(0,c.Wn)(or))*(0,c.Xx)(or);return or*Tn<0&&(Mn-=c.pi*(0,c.Xx)(Un)*(0,c.Xx)(or)),[Mn/Tn,2*(0,c.z4)((0,c.sQ)(Rn/Jt,1/Tn))-c.ou]},qn}function fn(){return ct(Kt).scale(109.5).parallels([30,30])}Ut.invert=function(Gt,pn){return[Gt,2*(0,c.z4)((0,c.Qq)(pn))-c.ou]};var nn=t(97492);function xn(Gt,pn){var An=(0,c.mC)(Gt),Tn=Gt===pn?(0,c.O$)(Gt):(An-(0,c.mC)(pn))/(pn-Gt),Rn=An/Tn+Gt;if((0,c.Wn)(Tn)<c.Ho)return nn.k;function qn(Un,Yn){var or=Rn-Yn,Jt=Tn*Un;return[or*(0,c.O$)(Jt),Rn-or*(0,c.mC)(Jt)]}return qn.invert=function(Un,Yn){var or=Rn-Yn,Jt=(0,c.fv)(Un,(0,c.Wn)(or))*(0,c.Xx)(or);return or*Tn<0&&(Jt-=c.pi*(0,c.Xx)(Un)*(0,c.Xx)(or)),[Jt/Tn,Rn-(0,c.Xx)(Tn)*(0,c._b)(Un*Un+or*or)]},qn}function jn(){return ct(xn).scale(131.154).center([0,13.9389])}var mn=1.340264,en=-.081106,vn=893e-6,on=.003796,sn=(0,c._b)(3)/2;function En(Gt,pn){var An=(0,c.ZR)(sn*(0,c.O$)(pn)),Tn=An*An,Rn=Tn*Tn*Tn;return[Gt*(0,c.mC)(An)/(sn*(mn+3*en*Tn+Rn*(7*vn+9*on*Tn))),An*(mn+en*Tn+Rn*(vn+on*Tn))]}function kn(){return(0,it.Z)(En).scale(177.158)}En.invert=function(Gt,pn){for(var An,Tn=pn,Rn=Tn*Tn,qn=Rn*Rn*Rn,Un=0;Un<12&&(qn=(Rn=(Tn-=An=(Tn*(mn+en*Rn+qn*(vn+on*Rn))-pn)/(mn+3*en*Rn+qn*(7*vn+9*on*Rn)))*Tn)*Rn*Rn,!((0,c.Wn)(An)<c.aW));++Un);return[sn*Gt*(mn+3*en*Rn+qn*(7*vn+9*on*Rn))/(0,c.mC)(Tn),(0,c.ZR)((0,c.O$)(Tn)/sn)]};var zn=t(98936),Fn=t(64684);function Bn(){var Gt,pn,An,Tn,Rn,qn,Un,Yn=1,or=0,Jt=0,Mn=1,zt=1,Zt=0,rn=null,Ln=1,Sn=1,wn=(0,Fn.l)({point:function(hn,bn){var In=un([hn,bn]);this.stream.point(In[0],In[1])}}),ln=ne.Z;function gn(){return Ln=Yn*Mn,Sn=Yn*zt,qn=Un=null,un}function un(hn){var bn=hn[0]*Ln,In=hn[1]*Sn;if(Zt){var Hn=In*Gt-bn*pn;bn=bn*Gt+In*pn,In=Hn}return[bn+or,In+Jt]}return un.invert=function(hn){var bn=hn[0]-or,In=hn[1]-Jt;if(Zt){var Hn=In*Gt+bn*pn;bn=bn*Gt-In*pn,In=Hn}return[bn/Ln,In/Sn]},un.stream=function(hn){return qn&&Un===hn?qn:qn=wn(ln(Un=hn))},un.postclip=function(hn){return arguments.length?(ln=hn,rn=An=Tn=Rn=null,gn()):ln},un.clipExtent=function(hn){return arguments.length?(ln=null==hn?(rn=An=Tn=Rn=null,ne.Z):(0,s.Z)(rn=+hn[0][0],An=+hn[0][1],Tn=+hn[1][0],Rn=+hn[1][1]),gn()):null==rn?null:[[rn,An],[Tn,Rn]]},un.scale=function(hn){return arguments.length?(Yn=+hn,gn()):Yn},un.translate=function(hn){return arguments.length?(or=+hn[0],Jt=+hn[1],gn()):[or,Jt]},un.angle=function(hn){return arguments.length?(pn=(0,c.O$)(Zt=hn%360*c.uR),Gt=(0,c.mC)(Zt),gn()):Zt*c.RW},un.reflectX=function(hn){return arguments.length?(Mn=hn?-1:1,gn()):Mn<0},un.reflectY=function(hn){return arguments.length?(zt=hn?-1:1,gn()):zt<0},un.fitExtent=function(hn,bn){return(0,ht.qg)(un,hn,bn)},un.fitSize=function(hn,bn){return(0,ht.mF)(un,hn,bn)},un.fitWidth=function(hn,bn){return(0,ht.V6)(un,hn,bn)},un.fitHeight=function(hn,bn){return(0,ht.rf)(un,hn,bn)},un}var er=t(26867),Xn=t(57962),mr=t(25382);function ur(Gt,pn){var An=(0,c.mC)(pn),Tn=1+(0,c.mC)(Gt)*An;return[An*(0,c.O$)(Gt)/Tn,(0,c.O$)(pn)/Tn]}function $n(){return(0,it.Z)(ur).scale(250).clipAngle(142)}function lr(Gt,pn){return[(0,c.cM)((0,c.OR)((c.ou+pn)/2)),-Gt]}function hr(){var Gt=qt(lr),pn=Gt.center,An=Gt.rotate;return Gt.center=function(Tn){return arguments.length?pn([-Tn[1],Tn[0]]):[(Tn=pn())[1],-Tn[0]]},Gt.rotate=function(Tn){return arguments.length?An([Tn[0],Tn[1],Tn.length>2?Tn[2]+90:90]):[(Tn=An())[0],Tn[1],Tn[2]-90]},An([0,0,90]).scale(159.155)}ur.invert=(0,mr.O)(function(Gt){return 2*(0,c.z4)(Gt)}),lr.invert=function(Gt,pn){return[-pn,2*(0,c.z4)((0,c.Qq)(Gt))-c.ou]}},83074:function($,I,t){"use strict";t.d(I,{Z:function(){return k}});var M=t(39695);function k(l,T){var x=l[0]*M.uR,p=l[1]*M.uR,s=T[0]*M.uR,e=T[1]*M.uR,o=(0,M.mC)(p),r=(0,M.O$)(p),n=(0,M.mC)(e),a=(0,M.O$)(e),i=o*(0,M.mC)(x),c=o*(0,M.O$)(x),h=n*(0,M.mC)(s),f=n*(0,M.O$)(s),b=2*(0,M.ZR)((0,M._b)((0,M.Jy)(e-p)+o*n*(0,M.Jy)(s-x))),v=(0,M.O$)(b),g=b?function(y){var d=(0,M.O$)(y*=b)/v,m=(0,M.O$)(b-y)/v,w=m*i+d*h,u=m*c+d*f,S=m*r+d*a;return[(0,M.fv)(u,w)*M.RW,(0,M.fv)(S,(0,M._b)(w*w+u*u))*M.RW]}:function(){return[x*M.RW,p*M.RW]};return g.distance=b,g}},39695:function($,I,t){"use strict";t.d(I,{BZ:function(){return p},Ho:function(){return M},Jy:function(){return w},Kh:function(){return d},O$:function(){return b},OR:function(){return y},Qq:function(){return c},RW:function(){return s},Wn:function(){return o},Xx:function(){return v},ZR:function(){return m},_b:function(){return g},aW:function(){return k},cM:function(){return h},fv:function(){return n},mC:function(){return a},mD:function(){return i},ou:function(){return T},pi:function(){return l},pu:function(){return x},sQ:function(){return f},uR:function(){return e},z4:function(){return r}});var M=1e-6,k=1e-12,l=Math.PI,T=l/2,x=l/4,p=2*l,s=180/l,e=l/180,o=Math.abs,r=Math.atan,n=Math.atan2,a=Math.cos,i=Math.ceil,c=Math.exp,h=Math.log,f=Math.pow,b=Math.sin,v=Math.sign||function(u){return u>0?1:u<0?-1:0},g=Math.sqrt,y=Math.tan;function d(u){return u>1?0:u<-1?l:Math.acos(u)}function m(u){return u>1?T:u<-1?-T:Math.asin(u)}function w(u){return(u=b(u/2))*u}},73182:function($,I,t){"use strict";function M(){}t.d(I,{Z:function(){return M}})},3559:function($,I,t){"use strict";var M=t(73182),k=1/0,l=k,T=-k,x=T;I.Z={point:function(s,e){s<k&&(k=s),s>T&&(T=s),e<l&&(l=e),e>x&&(x=e)},lineStart:M.Z,lineEnd:M.Z,polygonStart:M.Z,polygonEnd:M.Z,result:function(){var s=[[k,l],[T,x]];return T=x=-(l=k=1/0),s}}},67108:function($,I,t){"use strict";t.d(I,{Z:function(){return k}});var M=t(39695);function k(l,T){return(0,M.Wn)(l[0]-T[0])<M.Ho&&(0,M.Wn)(l[1]-T[1])<M.Ho}},23071:function($,I,t){"use strict";t.d(I,{Z:function(){return p}});var M=t(33940),k=t(7620),l=t(39695),T=(0,M.Z)();function x(s){return(0,l.Wn)(s[0])<=l.pi?s[0]:(0,l.Xx)(s[0])*(((0,l.Wn)(s[0])+l.pi)%l.BZ-l.pi)}function p(s,e){var o=x(e),r=e[1],n=(0,l.O$)(r),a=[(0,l.O$)(o),-(0,l.mC)(o),0],i=0,c=0;T.reset(),1===n?r=l.ou+l.Ho:-1===n&&(r=-l.ou-l.Ho);for(var h=0,f=s.length;h<f;++h)if(v=(b=s[h]).length)for(var b,v,g=b[v-1],y=x(g),d=g[1]/2+l.pu,m=(0,l.O$)(d),w=(0,l.mC)(d),u=0;u<v;++u,y=_,m=L,w=C,g=S){var S=b[u],_=x(S),E=S[1]/2+l.pu,L=(0,l.O$)(E),C=(0,l.mC)(E),P=_-y,z=P>=0?1:-1,j=z*P,R=j>l.pi,V=m*L;if(T.add((0,l.fv)(V*z*(0,l.O$)(j),w*C+V*(0,l.mC)(j))),i+=R?P+z*l.BZ:P,R^y>=o^_>=o){var D=(0,k.T5)((0,k.Og)(g),(0,k.Og)(S));(0,k.iJ)(D);var B=(0,k.T5)(a,D);(0,k.iJ)(B);var N=(R^P>=0?-1:1)*(0,l.ZR)(B[2]);(r>N||r===N&&(D[0]||D[1]))&&(c+=R^P>=0?1:-1)}}return(i<-l.Ho||i<l.Ho&&T<-l.Ho)^1&c}},25382:function($,I,t){"use strict";t.d(I,{O:function(){return l},W:function(){return k}});var M=t(39695);function k(T){return function(x,p){var s=(0,M.mC)(x),e=(0,M.mC)(p),o=T(s*e);return[o*e*(0,M.O$)(x),o*(0,M.O$)(p)]}}function l(T){return function(x,p){var s=(0,M._b)(x*x+p*p),e=T(s),o=(0,M.O$)(e),r=(0,M.mC)(e);return[(0,M.fv)(x*o,s*r),(0,M.ZR)(s&&p*o/s)]}}},12956:function($,I,t){"use strict";t.d(I,{Z:function(){return x},l:function(){return T}});var M=t(39695),k=t(25382),l=t(15002),T=(0,k.W)(function(p){return(0,M._b)(2/(1+p))});function x(){return(0,l.Z)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.O)(function(p){return 2*(0,M.ZR)(p/2)})},17889:function($,I,t){"use strict";t.d(I,{N:function(){return T},Z:function(){return x}});var M=t(39695),k=t(25382),l=t(15002),T=(0,k.W)(function(p){return(p=(0,M.Kh)(p))&&p/(0,M.O$)(p)});function x(){return(0,l.Z)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.O)(function(p){return p})},97492:function($,I,t){"use strict";t.d(I,{Z:function(){return l},k:function(){return k}});var M=t(15002);function k(T,x){return[T,x]}function l(){return(0,M.Z)(k).scale(152.63)}k.invert=k},47589:function($,I,t){"use strict";t.d(I,{V6:function(){return p},mF:function(){return x},qg:function(){return T},rf:function(){return s}});var M=t(72736),k=t(3559);function l(e,o,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=n&&e.clipExtent(null),(0,M.Z)(r,e.stream(k.Z)),o(k.Z.result()),null!=n&&e.clipExtent(n),e}function T(e,o,r){return l(e,function(n){var a=o[1][0]-o[0][0],i=o[1][1]-o[0][1],c=Math.min(a/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),h=+o[0][0]+(a-c*(n[1][0]+n[0][0]))/2,f=+o[0][1]+(i-c*(n[1][1]+n[0][1]))/2;e.scale(150*c).translate([h,f])},r)}function x(e,o,r){return T(e,[[0,0],o],r)}function p(e,o,r){return l(e,function(n){var a=+o,i=a/(n[1][0]-n[0][0]),c=(a-i*(n[1][0]+n[0][0]))/2,h=-i*n[0][1];e.scale(150*i).translate([c,h])},r)}function s(e,o,r){return l(e,function(n){var a=+o,i=a/(n[1][1]-n[0][1]),c=-i*n[0][0],h=(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([c,h])},r)}},98936:function($,I,t){"use strict";t.d(I,{M:function(){return T},Z:function(){return x}});var M=t(39695),k=t(25382),l=t(15002);function T(p,s){var e=(0,M.mC)(s),o=(0,M.mC)(p)*e;return[e*(0,M.O$)(p)/o,(0,M.O$)(s)/o]}function x(){return(0,l.Z)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.O)(M.z4)},15002:function($,I,t){"use strict";t.d(I,{Z:function(){return f},r:function(){return b}});var M=t(87070),k=t(1457),l=t(87605),T=t(96059),x=t(8593),p=t(39695),s=t(49386),e=t(64684),o=t(47589),r=t(7620),n=(0,p.mC)(30*p.uR);function a(v,g){return+g?function(y,d){function m(w,u,S,_,E,L,C,P,z,j,R,V,D,B){var N=C-w,U=P-u,J=N*N+U*U;if(J>4*d&&D--){var Y=_+j,q=E+R,H=L+V,X=(0,p._b)(Y*Y+q*q+H*H),Q=(0,p.ZR)(H/=X),ne=(0,p.Wn)((0,p.Wn)(H)-1)<p.Ho||(0,p.Wn)(S-z)<p.Ho?(S+z)/2:(0,p.fv)(q,Y),re=y(ne,Q),ae=re[0],se=re[1],pe=ae-w,ke=se-u,me=U*pe-N*ke;(me*me/J>d||(0,p.Wn)((N*pe+U*ke)/J-.5)>.3||_*j+E*R+L*V<n)&&(m(w,u,S,_,E,L,ae,se,ne,Y/=X,q/=X,H,D,B),B.point(ae,se),m(ae,se,ne,Y,q,H,C,P,z,j,R,V,D,B))}}return function(w){var u,S,_,E,L,C,P,z,j,R,V,D,B={point:N,lineStart:U,lineEnd:Y,polygonStart:function(){w.polygonStart(),B.lineStart=q},polygonEnd:function(){w.polygonEnd(),B.lineStart=U}};function N(Q,ne){Q=y(Q,ne),w.point(Q[0],Q[1])}function U(){z=NaN,B.point=J,w.lineStart()}function J(Q,ne){var re=(0,r.Og)([Q,ne]),ae=y(Q,ne);m(z,j,P,R,V,D,z=ae[0],j=ae[1],P=Q,R=re[0],V=re[1],D=re[2],16,w),w.point(z,j)}function Y(){B.point=N,w.lineEnd()}function q(){U(),B.point=H,B.lineEnd=X}function H(Q,ne){J(u=Q,ne),S=z,_=j,E=R,L=V,C=D,B.point=J}function X(){m(z,j,P,R,V,D,S,_,u,E,L,C,16,w),B.lineEnd=Y,Y()}return B}}(v,g):(y=v,(0,e.l)({point:function(d,m){d=y(d,m),this.stream.point(d[0],d[1])}}));var y}var i=(0,e.l)({point:function(v,g){this.stream.point(v*p.uR,g*p.uR)}});function c(v,g,y,d,m){function w(u,S){return[g+v*(u*=d),y-v*(S*=m)]}return w.invert=function(u,S){return[(u-g)/v*d,(y-S)/v*m]},w}function h(v,g,y,d,m,w){var u=(0,p.mC)(w),S=(0,p.O$)(w),_=u*v,E=S*v,L=u/v,C=S/v,P=(S*y-u*g)/v,z=(S*g+u*y)/v;function j(R,V){return[_*(R*=d)-E*(V*=m)+g,y-E*R-_*V]}return j.invert=function(R,V){return[d*(L*R-C*V+P),m*(z-C*R-L*V)]},j}function f(v){return b(function(){return v})()}function b(v){var g,y,d,m,w,u,S,_,E,L,C=150,P=480,z=250,j=0,R=0,V=0,D=0,B=0,N=0,U=1,J=1,Y=null,q=M.Z,H=null,X=x.Z,Q=.5;function ne(pe){return _(pe[0]*p.uR,pe[1]*p.uR)}function re(pe){return(pe=_.invert(pe[0],pe[1]))&&[pe[0]*p.RW,pe[1]*p.RW]}function ae(){var pe=h(C,0,0,U,J,N).apply(null,g(j,R)),ke=(N?h:c)(C,P-pe[0],z-pe[1],U,J,N);return y=(0,s.I)(V,D,B),S=(0,T.Z)(g,ke),_=(0,T.Z)(y,S),u=a(S,Q),se()}function se(){return E=L=null,ne}return ne.stream=function(pe){return E&&L===pe?E:E=i((ke=y,(0,e.l)({point:function(me,le){var ue=ke(me,le);return this.stream.point(ue[0],ue[1])}}))(q(u(X(L=pe)))));var ke},ne.preclip=function(pe){return arguments.length?(q=pe,Y=void 0,se()):q},ne.postclip=function(pe){return arguments.length?(X=pe,H=d=m=w=null,se()):X},ne.clipAngle=function(pe){return arguments.length?(q=+pe?(0,k.Z)(Y=pe*p.uR):(Y=null,M.Z),se()):Y*p.RW},ne.clipExtent=function(pe){return arguments.length?(X=null==pe?(H=d=m=w=null,x.Z):(0,l.Z)(H=+pe[0][0],d=+pe[0][1],m=+pe[1][0],w=+pe[1][1]),se()):null==H?null:[[H,d],[m,w]]},ne.scale=function(pe){return arguments.length?(C=+pe,ae()):C},ne.translate=function(pe){return arguments.length?(P=+pe[0],z=+pe[1],ae()):[P,z]},ne.center=function(pe){return arguments.length?(j=pe[0]%360*p.uR,R=pe[1]%360*p.uR,ae()):[j*p.RW,R*p.RW]},ne.rotate=function(pe){return arguments.length?(V=pe[0]%360*p.uR,D=pe[1]%360*p.uR,B=pe.length>2?pe[2]%360*p.uR:0,ae()):[V*p.RW,D*p.RW,B*p.RW]},ne.angle=function(pe){return arguments.length?(N=pe%360*p.uR,ae()):N*p.RW},ne.reflectX=function(pe){return arguments.length?(U=pe?-1:1,ae()):U<0},ne.reflectY=function(pe){return arguments.length?(J=pe?-1:1,ae()):J<0},ne.precision=function(pe){return arguments.length?(u=a(S,Q=pe*pe),se()):(0,p._b)(Q)},ne.fitExtent=function(pe,ke){return(0,o.qg)(ne,pe,ke)},ne.fitSize=function(pe,ke){return(0,o.mF)(ne,pe,ke)},ne.fitWidth=function(pe,ke){return(0,o.V6)(ne,pe,ke)},ne.fitHeight=function(pe,ke){return(0,o.rf)(ne,pe,ke)},function(){return g=v.apply(this,arguments),ne.invert=g.invert&&re,ae()}}},26867:function($,I,t){"use strict";t.d(I,{K:function(){return l},Z:function(){return T}});var M=t(15002),k=t(39695);function l(x,p){var s=p*p,e=s*s;return[x*(.8707-.131979*s+e*(e*(.003971*s-.001529*e)-.013791)),p*(1.007226+s*(.015085+e*(.028874*s-.044475-.005916*e)))]}function T(){return(0,M.Z)(l).scale(175.295)}l.invert=function(x,p){var s,e=p,o=25;do{var r=e*e,n=r*r;e-=s=(e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-p)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,k.Wn)(s)>k.Ho&&--o>0);return[x/(.8707+(r=e*e)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),e]}},57962:function($,I,t){"use strict";t.d(I,{I:function(){return T},Z:function(){return x}});var M=t(39695),k=t(25382),l=t(15002);function T(p,s){return[(0,M.mC)(s)*(0,M.O$)(p),(0,M.O$)(s)]}function x(){return(0,l.Z)(T).scale(249.5).clipAngle(90+M.Ho)}T.invert=(0,k.O)(M.ZR)},49386:function($,I,t){"use strict";t.d(I,{I:function(){return T},Z:function(){return e}});var M=t(96059),k=t(39695);function l(o,r){return[(0,k.Wn)(o)>k.pi?o+Math.round(-o/k.BZ)*k.BZ:o,r]}function T(o,r,n){return(o%=k.BZ)?r||n?(0,M.Z)(p(o),s(r,n)):p(o):r||n?s(r,n):l}function x(o){return function(r,n){return[(r+=o)>k.pi?r-k.BZ:r<-k.pi?r+k.BZ:r,n]}}function p(o){var r=x(o);return r.invert=x(-o),r}function s(o,r){var n=(0,k.mC)(o),a=(0,k.O$)(o),i=(0,k.mC)(r),c=(0,k.O$)(r);function h(f,b){var v=(0,k.mC)(b),g=(0,k.mC)(f)*v,y=(0,k.O$)(f)*v,d=(0,k.O$)(b),m=d*n+g*a;return[(0,k.fv)(y*i-m*c,g*n-d*a),(0,k.ZR)(m*i+y*c)]}return h.invert=function(f,b){var v=(0,k.mC)(b),g=(0,k.mC)(f)*v,y=(0,k.O$)(f)*v,d=(0,k.O$)(b),m=d*i-y*c;return[(0,k.fv)(y*i+d*c,g*n+m*a),(0,k.ZR)(m*n-g*a)]},h}function e(o){function r(n){return(n=o(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n}return o=T(o[0]*k.uR,o[1]*k.uR,o.length>2?o[2]*k.uR:0),r.invert=function(n){return(n=o.invert(n[0]*k.uR,n[1]*k.uR))[0]*=k.RW,n[1]*=k.RW,n},r}l.invert=l},72736:function($,I,t){"use strict";function M(s,e){s&&l.hasOwnProperty(s.type)&&l[s.type](s,e)}t.d(I,{Z:function(){return p}});var k={Feature:function(s,e){M(s.geometry,e)},FeatureCollection:function(s,e){for(var o=s.features,r=-1,n=o.length;++r<n;)M(o[r].geometry,e)}},l={Sphere:function(s,e){e.sphere()},Point:function(s,e){e.point((s=s.coordinates)[0],s[1],s[2])},MultiPoint:function(s,e){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)e.point((s=o[r])[0],s[1],s[2])},LineString:function(s,e){T(s.coordinates,e,0)},MultiLineString:function(s,e){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)T(o[r],e,0)},Polygon:function(s,e){x(s.coordinates,e)},MultiPolygon:function(s,e){for(var o=s.coordinates,r=-1,n=o.length;++r<n;)x(o[r],e)},GeometryCollection:function(s,e){for(var o=s.geometries,r=-1,n=o.length;++r<n;)M(o[r],e)}};function T(s,e,o){var r,n=-1,a=s.length-o;for(e.lineStart();++n<a;)e.point((r=s[n])[0],r[1],r[2]);e.lineEnd()}function x(s,e){var o=-1,r=s.length;for(e.polygonStart();++o<r;)T(s[o],e,1);e.polygonEnd()}function p(s,e){s&&k.hasOwnProperty(s.type)?k[s.type](s,e):M(s,e)}},64684:function($,I,t){"use strict";function M(T){return{stream:k(T)}}function k(T){return function(x){var p=new l;for(var s in T)p[s]=T[s];return p.stream=x,p}}function l(){}t.d(I,{Z:function(){return M},l:function(){return k}}),l.prototype={constructor:l,point:function(T,x){this.stream.point(T,x)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function($,I,t){"use strict";function M(we,K){return we.parent===K.parent?1:2}function k(we,K){return we+K.x}function l(we,K){return Math.max(we,K.y)}function T(){var we=M,K=1,oe=1,he=!1;function ye(Me){var Re,Pe=0;Me.eachAfter(function(Ie){var Ve,He=Ie.children;He?(Ie.x=(Ve=He).reduce(k,0)/Ve.length,Ie.y=function(Ve){return 1+Ve.reduce(l,0)}(He)):(Ie.x=Re?Pe+=we(Ie,Re):0,Ie.y=0,Re=Ie)});var De=function(Ie){for(var He;He=Ie.children;)Ie=He[0];return Ie}(Me),fe=function(Ie){for(var He;He=Ie.children;)Ie=He[He.length-1];return Ie}(Me),ge=De.x-we(De,fe)/2,be=fe.x+we(fe,De)/2;return Me.eachAfter(he?function(Ie){Ie.x=(Ie.x-Me.x)*K,Ie.y=(Me.y-Ie.y)*oe}:function(Ie){Ie.x=(Ie.x-ge)/(be-ge)*K,Ie.y=(1-(Me.y?Ie.y/Me.y:1))*oe})}return ye.separation=function(Me){return arguments.length?(we=Me,ye):we},ye.size=function(Me){return arguments.length?(he=!1,K=+Me[0],oe=+Me[1],ye):he?null:[K,oe]},ye.nodeSize=function(Me){return arguments.length?(he=!0,K=+Me[0],oe=+Me[1],ye):he?[K,oe]:null},ye}function x(we){var K=0,oe=we.children,he=oe&&oe.length;if(he)for(;--he>=0;)K+=oe[he].value;else K=1;we.value=K}function p(we,K){var oe,he,ye,Me,Re,Pe=new r(we),De=+we.value&&(Pe.value=we.value),fe=[Pe];for(null==K&&(K=s);oe=fe.pop();)if(De&&(oe.value=+oe.data.value),(ye=K(oe.data))&&(Re=ye.length))for(oe.children=new Array(Re),Me=Re-1;Me>=0;--Me)fe.push(he=oe.children[Me]=new r(ye[Me])),he.parent=oe,he.depth=oe.depth+1;return Pe.eachBefore(o)}function s(we){return we.children}function e(we){we.data=we.data.data}function o(we){var K=0;do{we.height=K}while((we=we.parent)&&we.height<++K)}function r(we){this.data=we,this.depth=this.height=0,this.parent=null}t.r(I),t.d(I,{cluster:function(){return T},hierarchy:function(){return p},pack:function(){return z},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return N},stratify:function(){return H},tree:function(){return pe},treemap:function(){return Ee},treemapBinary:function(){return de},treemapDice:function(){return B},treemapResquarify:function(){return Te},treemapSlice:function(){return ke},treemapSliceDice:function(){return xe},treemapSquarify:function(){return ue}}),r.prototype=p.prototype={constructor:r,count:function(){return this.eachAfter(x)},each:function(we){var K,oe,he,ye,Me=this,Re=[Me];do{for(K=Re.reverse(),Re=[];Me=K.pop();)if(we(Me),oe=Me.children)for(he=0,ye=oe.length;he<ye;++he)Re.push(oe[he])}while(Re.length);return this},eachAfter:function(we){for(var K,oe,he,ye=this,Me=[ye],Re=[];ye=Me.pop();)if(Re.push(ye),K=ye.children)for(oe=0,he=K.length;oe<he;++oe)Me.push(K[oe]);for(;ye=Re.pop();)we(ye);return this},eachBefore:function(we){for(var K,oe,he=this,ye=[he];he=ye.pop();)if(we(he),K=he.children)for(oe=K.length-1;oe>=0;--oe)ye.push(K[oe]);return this},sum:function(we){return this.eachAfter(function(K){for(var oe=+we(K.data)||0,he=K.children,ye=he&&he.length;--ye>=0;)oe+=he[ye].value;K.value=oe})},sort:function(we){return this.eachBefore(function(K){K.children&&K.children.sort(we)})},path:function(we){for(var K=this,oe=function(Me,Re){if(Me===Re)return Me;var Pe=Me.ancestors(),De=Re.ancestors(),fe=null;for(Me=Pe.pop(),Re=De.pop();Me===Re;)fe=Me,Me=Pe.pop(),Re=De.pop();return fe}(K,we),he=[K];K!==oe;)he.push(K=K.parent);for(var ye=he.length;we!==oe;)he.splice(ye,0,we),we=we.parent;return he},ancestors:function(){for(var we=this,K=[we];we=we.parent;)K.push(we);return K},descendants:function(){var we=[];return this.each(function(K){we.push(K)}),we},leaves:function(){var we=[];return this.eachBefore(function(K){K.children||we.push(K)}),we},links:function(){var we=this,K=[];return we.each(function(oe){oe!==we&&K.push({source:oe.parent,target:oe})}),K},copy:function(){return p(this).eachBefore(e)}};var n=Array.prototype.slice;function a(we){for(var K,oe,he=0,ye=(we=function(Re){for(var Pe,De,fe=Re.length;fe;)De=Math.random()*fe--|0,Pe=Re[fe],Re[fe]=Re[De],Re[De]=Pe;return Re}(n.call(we))).length,Me=[];he<ye;)K=we[he],oe&&h(oe,K)?++he:(oe=b(Me=i(Me,K)),he=0);return oe}function i(we,K){var oe,he;if(f(K,we))return[K];for(oe=0;oe<we.length;++oe)if(c(K,we[oe])&&f(v(we[oe],K),we))return[we[oe],K];for(oe=0;oe<we.length-1;++oe)for(he=oe+1;he<we.length;++he)if(c(v(we[oe],we[he]),K)&&c(v(we[oe],K),we[he])&&c(v(we[he],K),we[oe])&&f(g(we[oe],we[he],K),we))return[we[oe],we[he],K];throw new Error}function c(we,K){var oe=we.r-K.r,he=K.x-we.x,ye=K.y-we.y;return oe<0||oe*oe<he*he+ye*ye}function h(we,K){var oe=we.r-K.r+1e-6,he=K.x-we.x,ye=K.y-we.y;return oe>0&&oe*oe>he*he+ye*ye}function f(we,K){for(var oe=0;oe<K.length;++oe)if(!h(we,K[oe]))return!1;return!0}function b(we){switch(we.length){case 1:return{x:(K=we[0]).x,y:K.y,r:K.r};case 2:return v(we[0],we[1]);case 3:return g(we[0],we[1],we[2])}var K}function v(we,K){var oe=we.x,he=we.y,ye=we.r,Me=K.x,Re=K.y,Pe=K.r,De=Me-oe,fe=Re-he,ge=Pe-ye,be=Math.sqrt(De*De+fe*fe);return{x:(oe+Me+De/be*ge)/2,y:(he+Re+fe/be*ge)/2,r:(be+ye+Pe)/2}}function g(we,K,oe){var he=we.x,ye=we.y,Me=we.r,Re=K.x,Pe=K.y,De=K.r,fe=oe.x,ge=oe.y,be=oe.r,Ie=he-Re,He=he-fe,Ve=ye-Pe,tt=ye-ge,nt=De-Me,st=be-Me,dt=he*he+ye*ye-Me*Me,wt=dt-Re*Re-Pe*Pe+De*De,_t=dt-fe*fe-ge*ge+be*be,pt=He*Ve-Ie*tt,Pt=(Ve*_t-tt*wt)/(2*pt)-he,St=(tt*nt-Ve*st)/pt,Ot=(He*wt-Ie*_t)/(2*pt)-ye,jt=(Ie*st-He*nt)/pt,Dt=St*St+jt*jt-1,Ye=2*(Me+Pt*St+Ot*jt),Ze=Pt*Pt+Ot*Ot-Me*Me,Ne=-(Dt?(Ye+Math.sqrt(Ye*Ye-4*Dt*Ze))/(2*Dt):Ze/Ye);return{x:he+Pt+St*Ne,y:ye+Ot+jt*Ne,r:Ne}}function y(we,K,oe){var he,ye,Me,Re,Pe=we.x-K.x,De=we.y-K.y,fe=Pe*Pe+De*De;fe?(ye=K.r+oe.r,Re=we.r+oe.r,(ye*=ye)>(Re*=Re)?(he=(fe+Re-ye)/(2*fe),Me=Math.sqrt(Math.max(0,Re/fe-he*he)),oe.x=we.x-he*Pe-Me*De,oe.y=we.y-he*De+Me*Pe):(he=(fe+ye-Re)/(2*fe),Me=Math.sqrt(Math.max(0,ye/fe-he*he)),oe.x=K.x+he*Pe-Me*De,oe.y=K.y+he*De+Me*Pe)):(oe.x=K.x+oe.r,oe.y=K.y)}function d(we,K){var oe=we.r+K.r-1e-6,he=K.x-we.x,ye=K.y-we.y;return oe>0&&oe*oe>he*he+ye*ye}function m(we){var K=we._,oe=we.next._,he=K.r+oe.r,ye=(K.x*oe.r+oe.x*K.r)/he,Me=(K.y*oe.r+oe.y*K.r)/he;return ye*ye+Me*Me}function w(we){this._=we,this.next=null,this.previous=null}function u(we){if(!(ye=we.length))return 0;var K,oe,he,ye,Me,Re,Pe,De,fe,ge,be;if((K=we[0]).x=0,K.y=0,!(ye>1))return K.r;if(K.x=-(oe=we[1]).r,oe.x=K.r,oe.y=0,!(ye>2))return K.r+oe.r;y(oe,K,he=we[2]),K=new w(K),oe=new w(oe),he=new w(he),K.next=he.previous=oe,oe.next=K.previous=he,he.next=oe.previous=K;e:for(Pe=3;Pe<ye;++Pe){y(K._,oe._,he=we[Pe]),he=new w(he),De=oe.next,fe=K.previous,ge=oe._.r,be=K._.r;do{if(ge<=be){if(d(De._,he._)){K.next=oe=De,oe.previous=K,--Pe;continue e}ge+=De._.r,De=De.next}else{if(d(fe._,he._)){(K=fe).next=oe,oe.previous=K,--Pe;continue e}be+=fe._.r,fe=fe.previous}}while(De!==fe.next);for(he.previous=K,he.next=oe,K.next=oe.previous=oe=he,Me=m(K);(he=he.next)!==oe;)(Re=m(he))<Me&&(K=he,Me=Re);oe=K.next}for(K=[oe._],he=oe;(he=he.next)!==oe;)K.push(he._);for(he=a(K),Pe=0;Pe<ye;++Pe)(K=we[Pe]).x-=he.x,K.y-=he.y;return he.r}function S(we){return u(we),we}function _(we){return null==we?null:E(we)}function E(we){if("function"!=typeof we)throw new Error;return we}function L(){return 0}function C(we){return function(){return we}}function P(we){return Math.sqrt(we.value)}function z(){var we=null,K=1,oe=1,he=L;function ye(Me){return Me.x=K/2,Me.y=oe/2,we?Me.eachBefore(j(we)).eachAfter(R(he,.5)).eachBefore(V(1)):Me.eachBefore(j(P)).eachAfter(R(L,1)).eachAfter(R(he,Me.r/Math.min(K,oe))).eachBefore(V(Math.min(K,oe)/(2*Me.r))),Me}return ye.radius=function(Me){return arguments.length?(we=_(Me),ye):we},ye.size=function(Me){return arguments.length?(K=+Me[0],oe=+Me[1],ye):[K,oe]},ye.padding=function(Me){return arguments.length?(he="function"==typeof Me?Me:C(+Me),ye):he},ye}function j(we){return function(K){K.children||(K.r=Math.max(0,+we(K)||0))}}function R(we,K){return function(oe){if(he=oe.children){var he,ye,Me,Re=he.length,Pe=we(oe)*K||0;if(Pe)for(ye=0;ye<Re;++ye)he[ye].r+=Pe;if(Me=u(he),Pe)for(ye=0;ye<Re;++ye)he[ye].r-=Pe;oe.r=Me+Pe}}}function V(we){return function(K){var oe=K.parent;K.r*=we,oe&&(K.x=oe.x+we*K.x,K.y=oe.y+we*K.y)}}function D(we){we.x0=Math.round(we.x0),we.y0=Math.round(we.y0),we.x1=Math.round(we.x1),we.y1=Math.round(we.y1)}function B(we,K,oe,he,ye){for(var Me,Re=we.children,Pe=-1,De=Re.length,fe=we.value&&(he-K)/we.value;++Pe<De;)(Me=Re[Pe]).y0=oe,Me.y1=ye,Me.x0=K,Me.x1=K+=Me.value*fe}function N(){var we=1,K=1,oe=0,he=!1;function ye(Me){var Pe,De,Re=Me.height+1;return Me.x0=Me.y0=oe,Me.x1=we,Me.y1=K/Re,Me.eachBefore((Pe=K,De=Re,function(fe){fe.children&&B(fe,fe.x0,Pe*(fe.depth+1)/De,fe.x1,Pe*(fe.depth+2)/De);var ge=fe.x0,be=fe.y0,Ie=fe.x1-oe,He=fe.y1-oe;Ie<ge&&(ge=Ie=(ge+Ie)/2),He<be&&(be=He=(be+He)/2),fe.x0=ge,fe.y0=be,fe.x1=Ie,fe.y1=He})),he&&Me.eachBefore(D),Me}return ye.round=function(Me){return arguments.length?(he=!!Me,ye):he},ye.size=function(Me){return arguments.length?(we=+Me[0],K=+Me[1],ye):[we,K]},ye.padding=function(Me){return arguments.length?(oe=+Me,ye):oe},ye}var U={depth:-1},J={};function Y(we){return we.id}function q(we){return we.parentId}function H(){var we=Y,K=q;function oe(he){var ye,Me,Re,Pe,De,fe,ge,be=he.length,Ie=new Array(be),He={};for(Me=0;Me<be;++Me)De=Ie[Me]=new r(ye=he[Me]),null!=(fe=we(ye,Me,he))&&(fe+="")&&(He[ge="$"+(De.id=fe)]=ge in He?J:De);for(Me=0;Me<be;++Me)if(De=Ie[Me],null!=(fe=K(he[Me],Me,he))&&(fe+="")){if(!(Pe=He["$"+fe]))throw new Error("missing: "+fe);if(Pe===J)throw new Error("ambiguous: "+fe);Pe.children?Pe.children.push(De):Pe.children=[De],De.parent=Pe}else{if(Re)throw new Error("multiple roots");Re=De}if(!Re)throw new Error("no root");if(Re.parent=U,Re.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--be}).eachBefore(o),Re.parent=null,be>0)throw new Error("cycle");return Re}return oe.id=function(he){return arguments.length?(we=E(he),oe):we},oe.parentId=function(he){return arguments.length?(K=E(he),oe):K},oe}function X(we,K){return we.parent===K.parent?1:2}function Q(we){var K=we.children;return K?K[0]:we.t}function ne(we){var K=we.children;return K?K[K.length-1]:we.t}function re(we,K,oe){var he=oe/(K.i-we.i);K.c-=he,K.s+=oe,we.c+=he,K.z+=oe,K.m+=oe}function ae(we,K,oe){return we.a.parent===K.parent?we.a:oe}function se(we,K){this._=we,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=K}function pe(){var we=X,K=1,oe=1,he=null;function ye(De){var fe=function(st){for(var dt,wt,_t,pt,Pt,St=new se(st,0),Ot=[St];dt=Ot.pop();)if(_t=dt._.children)for(dt.children=new Array(Pt=_t.length),pt=Pt-1;pt>=0;--pt)Ot.push(wt=dt.children[pt]=new se(_t[pt],pt)),wt.parent=dt;return(St.parent=new se(null,0)).children=[St],St}(De);if(fe.eachAfter(Me),fe.parent.m=-fe.z,fe.eachBefore(Re),he)De.eachBefore(Pe);else{var ge=De,be=De,Ie=De;De.eachBefore(function(st){st.x<ge.x&&(ge=st),st.x>be.x&&(be=st),st.depth>Ie.depth&&(Ie=st)});var He=ge===be?1:we(ge,be)/2,Ve=He-ge.x,tt=K/(be.x+He+Ve),nt=oe/(Ie.depth||1);De.eachBefore(function(st){st.x=(st.x+Ve)*tt,st.y=st.depth*nt})}return De}function Me(De){var fe=De.children,ge=De.parent.children,be=De.i?ge[De.i-1]:null;if(fe){!function(He){for(var Ve,tt=0,nt=0,st=He.children,dt=st.length;--dt>=0;)(Ve=st[dt]).z+=tt,Ve.m+=tt,tt+=Ve.s+(nt+=Ve.c)}(De);var Ie=(fe[0].z+fe[fe.length-1].z)/2;be?(De.z=be.z+we(De._,be._),De.m=De.z-Ie):De.z=Ie}else be&&(De.z=be.z+we(De._,be._));De.parent.A=function(He,Ve,tt){if(Ve){for(var nt,st=He,dt=He,wt=Ve,_t=st.parent.children[0],pt=st.m,Pt=dt.m,St=wt.m,Ot=_t.m;wt=ne(wt),st=Q(st),wt&&st;)_t=Q(_t),(dt=ne(dt)).a=He,(nt=wt.z+St-st.z-pt+we(wt._,st._))>0&&(re(ae(wt,He,tt),He,nt),pt+=nt,Pt+=nt),St+=wt.m,pt+=st.m,Ot+=_t.m,Pt+=dt.m;wt&&!ne(dt)&&(dt.t=wt,dt.m+=St-Pt),st&&!Q(_t)&&(_t.t=st,_t.m+=pt-Ot,tt=He)}return tt}(De,be,De.parent.A||ge[0])}function Re(De){De._.x=De.z+De.parent.m,De.m+=De.parent.m}function Pe(De){De.x*=K,De.y=De.depth*oe}return ye.separation=function(De){return arguments.length?(we=De,ye):we},ye.size=function(De){return arguments.length?(he=!1,K=+De[0],oe=+De[1],ye):he?null:[K,oe]},ye.nodeSize=function(De){return arguments.length?(he=!0,K=+De[0],oe=+De[1],ye):he?[K,oe]:null},ye}function ke(we,K,oe,he,ye){for(var Me,Re=we.children,Pe=-1,De=Re.length,fe=we.value&&(ye-oe)/we.value;++Pe<De;)(Me=Re[Pe]).x0=K,Me.x1=he,Me.y0=oe,Me.y1=oe+=Me.value*fe}se.prototype=Object.create(r.prototype);var me=(1+Math.sqrt(5))/2;function le(we,K,oe,he,ye,Me){for(var Re,Pe,De,fe,ge,be,Ie,He,Ve,tt,nt,st=[],dt=K.children,wt=0,_t=0,pt=dt.length,Pt=K.value;wt<pt;){De=ye-oe,fe=Me-he;do{ge=dt[_t++].value}while(!ge&&_t<pt);for(be=Ie=ge,nt=ge*ge*(tt=Math.max(fe/De,De/fe)/(Pt*we)),Ve=Math.max(Ie/nt,nt/be);_t<pt;++_t){if(ge+=Pe=dt[_t].value,Pe<be&&(be=Pe),Pe>Ie&&(Ie=Pe),nt=ge*ge*tt,(He=Math.max(Ie/nt,nt/be))>Ve){ge-=Pe;break}Ve=He}st.push(Re={value:ge,dice:De<fe,children:dt.slice(wt,_t)}),Re.dice?B(Re,oe,he,ye,Pt?he+=fe*ge/Pt:Me):ke(Re,oe,he,Pt?oe+=De*ge/Pt:ye,Me),Pt-=ge,wt=_t}return st}var ue=function we(K){function oe(he,ye,Me,Re,Pe){le(K,he,ye,Me,Re,Pe)}return oe.ratio=function(he){return we((he=+he)>1?he:1)},oe}(me);function Ee(){var we=ue,K=!1,oe=1,he=1,ye=[0],Me=L,Re=L,Pe=L,De=L,fe=L;function ge(Ie){return Ie.x0=Ie.y0=0,Ie.x1=oe,Ie.y1=he,Ie.eachBefore(be),ye=[0],K&&Ie.eachBefore(D),Ie}function be(Ie){var He=ye[Ie.depth],Ve=Ie.x0+He,tt=Ie.y0+He,nt=Ie.x1-He,st=Ie.y1-He;nt<Ve&&(Ve=nt=(Ve+nt)/2),st<tt&&(tt=st=(tt+st)/2),Ie.x0=Ve,Ie.y0=tt,Ie.x1=nt,Ie.y1=st,Ie.children&&(He=ye[Ie.depth+1]=Me(Ie)/2,Ve+=fe(Ie)-He,tt+=Re(Ie)-He,(nt-=Pe(Ie)-He)<Ve&&(Ve=nt=(Ve+nt)/2),(st-=De(Ie)-He)<tt&&(tt=st=(tt+st)/2),we(Ie,Ve,tt,nt,st))}return ge.round=function(Ie){return arguments.length?(K=!!Ie,ge):K},ge.size=function(Ie){return arguments.length?(oe=+Ie[0],he=+Ie[1],ge):[oe,he]},ge.tile=function(Ie){return arguments.length?(we=E(Ie),ge):we},ge.padding=function(Ie){return arguments.length?ge.paddingInner(Ie).paddingOuter(Ie):ge.paddingInner()},ge.paddingInner=function(Ie){return arguments.length?(Me="function"==typeof Ie?Ie:C(+Ie),ge):Me},ge.paddingOuter=function(Ie){return arguments.length?ge.paddingTop(Ie).paddingRight(Ie).paddingBottom(Ie).paddingLeft(Ie):ge.paddingTop()},ge.paddingTop=function(Ie){return arguments.length?(Re="function"==typeof Ie?Ie:C(+Ie),ge):Re},ge.paddingRight=function(Ie){return arguments.length?(Pe="function"==typeof Ie?Ie:C(+Ie),ge):Pe},ge.paddingBottom=function(Ie){return arguments.length?(De="function"==typeof Ie?Ie:C(+Ie),ge):De},ge.paddingLeft=function(Ie){return arguments.length?(fe="function"==typeof Ie?Ie:C(+Ie),ge):fe},ge}function de(we,K,oe,he,ye){var Me,Re,Pe=we.children,De=Pe.length,fe=new Array(De+1);for(fe[0]=Re=Me=0;Me<De;++Me)fe[Me+1]=Re+=Pe[Me].value;!function ge(be,Ie,He,Ve,tt,nt,st){if(be>=Ie-1){var dt=Pe[be];return dt.x0=Ve,dt.y0=tt,dt.x1=nt,void(dt.y1=st)}for(var wt=fe[be],_t=He/2+wt,pt=be+1,Pt=Ie-1;pt<Pt;){var St=pt+Pt>>>1;fe[St]<_t?pt=St+1:Pt=St}_t-fe[pt-1]<fe[pt]-_t&&be+1<pt&&--pt;var Ot=fe[pt]-wt,jt=He-Ot;if(nt-Ve>st-tt){var Dt=(Ve*jt+nt*Ot)/He;ge(be,pt,Ot,Ve,tt,Dt,st),ge(pt,Ie,jt,Dt,tt,nt,st)}else{var Ye=(tt*jt+st*Ot)/He;ge(be,pt,Ot,Ve,tt,nt,Ye),ge(pt,Ie,jt,Ve,Ye,nt,st)}}(0,De,we.value,K,oe,he,ye)}function xe(we,K,oe,he,ye){(1&we.depth?ke:B)(we,K,oe,he,ye)}var Te=function we(K){function oe(he,ye,Me,Re,Pe){if((De=he._squarify)&&De.ratio===K)for(var De,fe,ge,be,Ie,He=-1,Ve=De.length,tt=he.value;++He<Ve;){for(ge=(fe=De[He]).children,be=fe.value=0,Ie=ge.length;be<Ie;++be)fe.value+=ge[be].value;fe.dice?B(fe,ye,Me,Re,Me+=(Pe-Me)*fe.value/tt):ke(fe,ye,Me,ye+=(Re-ye)*fe.value/tt,Pe),tt-=fe.value}else he._squarify=De=le(K,he,ye,Me,Re,Pe),De.ratio=K}return oe.ratio=function(he){return we((he=+he)>1?he:1)},oe}(me)},45879:function($,I,t){"use strict";t.d(I,{h5:function(){return h}});var M=Math.PI,k=2*M,l=1e-6,T=k-l;function x(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new x}x.prototype=p.prototype={constructor:x,moveTo:function(f,b){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,b){this._+="L"+(this._x1=+f)+","+(this._y1=+b)},quadraticCurveTo:function(f,b,v,g){this._+="Q"+ +f+","+ +b+","+(this._x1=+v)+","+(this._y1=+g)},bezierCurveTo:function(f,b,v,g,y,d){this._+="C"+ +f+","+ +b+","+ +v+","+ +g+","+(this._x1=+y)+","+(this._y1=+d)},arcTo:function(f,b,v,g,y){var d=this._x1,m=this._y1,w=(v=+v)-(f=+f),u=(g=+g)-(b=+b),S=d-f,_=m-b,E=S*S+_*_;if((y=+y)<0)throw new Error("negative radius: "+y);if(null===this._x1)this._+="M"+(this._x1=f)+","+(this._y1=b);else if(E>l)if(Math.abs(_*w-u*S)>l&&y){var L=v-d,C=g-m,P=w*w+u*u,z=L*L+C*C,j=Math.sqrt(P),R=Math.sqrt(E),V=y*Math.tan((M-Math.acos((P+E-z)/(2*j*R)))/2),D=V/R,B=V/j;Math.abs(D-1)>l&&(this._+="L"+(f+D*S)+","+(b+D*_)),this._+="A"+y+","+y+",0,0,"+ +(_*L>S*C)+","+(this._x1=f+B*w)+","+(this._y1=b+B*u)}else this._+="L"+(this._x1=f)+","+(this._y1=b)},arc:function(f,b,v,g,y,d){f=+f,b=+b,d=!!d;var m=(v=+v)*Math.cos(g),w=v*Math.sin(g),u=f+m,S=b+w,_=1^d,E=d?g-y:y-g;if(v<0)throw new Error("negative radius: "+v);null===this._x1?this._+="M"+u+","+S:(Math.abs(this._x1-u)>l||Math.abs(this._y1-S)>l)&&(this._+="L"+u+","+S),v&&(E<0&&(E=E%k+k),E>T?this._+="A"+v+","+v+",0,1,"+_+","+(f-m)+","+(b-w)+"A"+v+","+v+",0,1,"+_+","+(this._x1=u)+","+(this._y1=S):E>l&&(this._+="A"+v+","+v+",0,"+ +(E>=M)+","+_+","+(this._x1=f+v*Math.cos(y))+","+(this._y1=b+v*Math.sin(y))))},rect:function(f,b,v,g){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+b)+"h"+ +v+"v"+ +g+"h"+-v+"Z"},toString:function(){return this._}};var s=p,e=Array.prototype.slice;function o(f){return function(){return f}}function r(f){return f[0]}function n(f){return f[1]}function a(f){return f.source}function i(f){return f.target}function c(f,b,v,g,y){f.moveTo(b,v),f.bezierCurveTo(b=(b+g)/2,v,b,y,g,y)}function h(){return function(f){var b=a,v=i,g=r,y=n,d=null;function m(){var w,u=e.call(arguments),S=b.apply(this,u),_=v.apply(this,u);if(d||(d=w=s()),f(d,+g.apply(this,(u[0]=S,u)),+y.apply(this,u),+g.apply(this,(u[0]=_,u)),+y.apply(this,u)),w)return d=null,w+""||null}return m.source=function(w){return arguments.length?(b=w,m):b},m.target=function(w){return arguments.length?(v=w,m):v},m.x=function(w){return arguments.length?(g="function"==typeof w?w:o(+w),m):g},m.y=function(w){return arguments.length?(y="function"==typeof w?w:o(+w),m):y},m.context=function(w){return arguments.length?(d=w??null,m):d},m}(c)}},84096:function($,I,t){"use strict";t.d(I,{i$:function(){return a},Dq:function(){return r},g0:function(){return i}});var M=t(58176),k=t(48480),l=t(59879),T=t(82301),x=t(34823),p=t(79791);function s(pt){if(0<=pt.y&&pt.y<100){var Pt=new Date(-1,pt.m,pt.d,pt.H,pt.M,pt.S,pt.L);return Pt.setFullYear(pt.y),Pt}return new Date(pt.y,pt.m,pt.d,pt.H,pt.M,pt.S,pt.L)}function e(pt){if(0<=pt.y&&pt.y<100){var Pt=new Date(Date.UTC(-1,pt.m,pt.d,pt.H,pt.M,pt.S,pt.L));return Pt.setUTCFullYear(pt.y),Pt}return new Date(Date.UTC(pt.y,pt.m,pt.d,pt.H,pt.M,pt.S,pt.L))}function o(pt,Pt,St){return{y:pt,m:Pt,d:St,H:0,M:0,S:0,L:0}}function r(pt){var Pt=pt.dateTime,St=pt.date,Ot=pt.time,jt=pt.periods,Dt=pt.days,Ye=pt.shortDays,Ze=pt.months,Ne=pt.shortMonths,Je=y(jt),at=d(jt),Se=y(Dt),ze=d(Dt),Ke=y(Ye),it=d(Ye),ct=y(Ze),mt=d(Ze),Lt=y(Ne),At=d(Ne),ht={a:function(Nt){return Ye[Nt.getDay()]},A:function(Nt){return Dt[Nt.getDay()]},b:function(Nt){return Ne[Nt.getMonth()]},B:function(Nt){return Ze[Nt.getMonth()]},c:null,d:H,e:H,f:ae,H:X,I:Q,j:ne,L:re,m:se,M:pe,p:function(Nt){return jt[+(Nt.getHours()>=12)]},q:function(Nt){return 1+~~(Nt.getMonth()/3)},Q:wt,s:_t,S:ke,u:me,U:le,V:ue,w:Ee,W:de,x:null,X:null,y:xe,Y:Te,Z:we,"%":dt},Et={a:function(Nt){return Ye[Nt.getUTCDay()]},A:function(Nt){return Dt[Nt.getUTCDay()]},b:function(Nt){return Ne[Nt.getUTCMonth()]},B:function(Nt){return Ze[Nt.getUTCMonth()]},c:null,d:K,e:K,f:Re,H:oe,I:he,j:ye,L:Me,m:Pe,M:De,p:function(Nt){return jt[+(Nt.getUTCHours()>=12)]},q:function(Nt){return 1+~~(Nt.getUTCMonth()/3)},Q:wt,s:_t,S:fe,u:ge,U:be,V:Ie,w:He,W:Ve,x:null,X:null,y:tt,Y:nt,Z:st,"%":dt},gt={a:function(Nt,qt,Xt){var Kt=Ke.exec(qt.slice(Xt));return Kt?(Nt.w=it[Kt[0].toLowerCase()],Xt+Kt[0].length):-1},A:function(Nt,qt,Xt){var Kt=Se.exec(qt.slice(Xt));return Kt?(Nt.w=ze[Kt[0].toLowerCase()],Xt+Kt[0].length):-1},b:function(Nt,qt,Xt){var Kt=Lt.exec(qt.slice(Xt));return Kt?(Nt.m=At[Kt[0].toLowerCase()],Xt+Kt[0].length):-1},B:function(Nt,qt,Xt){var Kt=ct.exec(qt.slice(Xt));return Kt?(Nt.m=mt[Kt[0].toLowerCase()],Xt+Kt[0].length):-1},c:function(Nt,qt,Xt){return Ut(Nt,Pt,qt,Xt)},d:j,e:j,f:U,H:V,I:V,j:R,L:N,m:z,M:D,p:function(Nt,qt,Xt){var Kt=Je.exec(qt.slice(Xt));return Kt?(Nt.p=at[Kt[0].toLowerCase()],Xt+Kt[0].length):-1},q:P,Q:Y,s:q,S:B,u:w,U:u,V:S,w:m,W:_,x:function(Nt,qt,Xt){return Ut(Nt,St,qt,Xt)},X:function(Nt,qt,Xt){return Ut(Nt,Ot,qt,Xt)},y:L,Y:E,Z:C,"%":J};function kt(Nt,qt){return function(Xt){var Kt,fn,nn,xn=[],jn=-1,mn=0,en=Nt.length;for(Xt instanceof Date||(Xt=new Date(+Xt));++jn<en;)37===Nt.charCodeAt(jn)&&(xn.push(Nt.slice(mn,jn)),null!=(fn=c[Kt=Nt.charAt(++jn)])?Kt=Nt.charAt(++jn):fn="e"===Kt?" ":"0",(nn=qt[Kt])&&(Kt=nn(Xt,fn)),xn.push(Kt),mn=jn+1);return xn.push(Nt.slice(mn,jn)),xn.join("")}}function It(Nt,qt){return function(Xt){var Kt,fn,nn=o(1900,void 0,1);if(Ut(nn,Nt,Xt+="",0)!=Xt.length)return null;if("Q"in nn)return new Date(nn.Q);if("s"in nn)return new Date(1e3*nn.s+("L"in nn?nn.L:0));if(qt&&!("Z"in nn)&&(nn.Z=0),"p"in nn&&(nn.H=nn.H%12+12*nn.p),void 0===nn.m&&(nn.m="q"in nn?nn.q:0),"V"in nn){if(nn.V<1||nn.V>53)return null;"w"in nn||(nn.w=1),"Z"in nn?(fn=(Kt=e(o(nn.y,0,1))).getUTCDay(),Kt=fn>4||0===fn?M.l6.ceil(Kt):(0,M.l6)(Kt),Kt=k.Z.offset(Kt,7*(nn.V-1)),nn.y=Kt.getUTCFullYear(),nn.m=Kt.getUTCMonth(),nn.d=Kt.getUTCDate()+(nn.w+6)%7):(fn=(Kt=s(o(nn.y,0,1))).getDay(),Kt=fn>4||0===fn?l.wA.ceil(Kt):(0,l.wA)(Kt),Kt=T.Z.offset(Kt,7*(nn.V-1)),nn.y=Kt.getFullYear(),nn.m=Kt.getMonth(),nn.d=Kt.getDate()+(nn.w+6)%7)}else("W"in nn||"U"in nn)&&("w"in nn||(nn.w="u"in nn?nn.u%7:"W"in nn?1:0),fn="Z"in nn?e(o(nn.y,0,1)).getUTCDay():s(o(nn.y,0,1)).getDay(),nn.m=0,nn.d="W"in nn?(nn.w+6)%7+7*nn.W-(fn+5)%7:nn.w+7*nn.U-(fn+6)%7);return"Z"in nn?(nn.H+=nn.Z/100|0,nn.M+=nn.Z%100,e(nn)):s(nn)}}function Ut(Nt,qt,Xt,Kt){for(var fn,nn,xn=0,jn=qt.length,mn=Xt.length;xn<jn;){if(Kt>=mn)return-1;if(37===(fn=qt.charCodeAt(xn++))){if(fn=qt.charAt(xn++),!(nn=gt[fn in c?qt.charAt(xn++):fn])||(Kt=nn(Nt,Xt,Kt))<0)return-1}else if(fn!=Xt.charCodeAt(Kt++))return-1}return Kt}return ht.x=kt(St,ht),ht.X=kt(Ot,ht),ht.c=kt(Pt,ht),Et.x=kt(St,Et),Et.X=kt(Ot,Et),Et.c=kt(Pt,Et),{format:function(Nt){var qt=kt(Nt+="",ht);return qt.toString=function(){return Nt},qt},parse:function(Nt){var qt=It(Nt+="",!1);return qt.toString=function(){return Nt},qt},utcFormat:function(Nt){var qt=kt(Nt+="",Et);return qt.toString=function(){return Nt},qt},utcParse:function(Nt){var qt=It(Nt+="",!0);return qt.toString=function(){return Nt},qt}}}var n,a,i,c={"-":"",_:" ",0:"0"},h=/^\s*\d+/,f=/^%/,b=/[\\^$*+?|[\]().{}]/g;function v(pt,Pt,St){var Ot=pt<0?"-":"",jt=(Ot?-pt:pt)+"",Dt=jt.length;return Ot+(Dt<St?new Array(St-Dt+1).join(Pt)+jt:jt)}function g(pt){return pt.replace(b,"\\$&")}function y(pt){return new RegExp("^(?:"+pt.map(g).join("|")+")","i")}function d(pt){for(var Pt={},St=-1,Ot=pt.length;++St<Ot;)Pt[pt[St].toLowerCase()]=St;return Pt}function m(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+1));return Ot?(pt.w=+Ot[0],St+Ot[0].length):-1}function w(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+1));return Ot?(pt.u=+Ot[0],St+Ot[0].length):-1}function u(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.U=+Ot[0],St+Ot[0].length):-1}function S(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.V=+Ot[0],St+Ot[0].length):-1}function _(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.W=+Ot[0],St+Ot[0].length):-1}function E(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+4));return Ot?(pt.y=+Ot[0],St+Ot[0].length):-1}function L(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.y=+Ot[0]+(+Ot[0]>68?1900:2e3),St+Ot[0].length):-1}function C(pt,Pt,St){var Ot=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Pt.slice(St,St+6));return Ot?(pt.Z=Ot[1]?0:-(Ot[2]+(Ot[3]||"00")),St+Ot[0].length):-1}function P(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+1));return Ot?(pt.q=3*Ot[0]-3,St+Ot[0].length):-1}function z(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.m=Ot[0]-1,St+Ot[0].length):-1}function j(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.d=+Ot[0],St+Ot[0].length):-1}function R(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+3));return Ot?(pt.m=0,pt.d=+Ot[0],St+Ot[0].length):-1}function V(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.H=+Ot[0],St+Ot[0].length):-1}function D(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.M=+Ot[0],St+Ot[0].length):-1}function B(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+2));return Ot?(pt.S=+Ot[0],St+Ot[0].length):-1}function N(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+3));return Ot?(pt.L=+Ot[0],St+Ot[0].length):-1}function U(pt,Pt,St){var Ot=h.exec(Pt.slice(St,St+6));return Ot?(pt.L=Math.floor(Ot[0]/1e3),St+Ot[0].length):-1}function J(pt,Pt,St){var Ot=f.exec(Pt.slice(St,St+1));return Ot?St+Ot[0].length:-1}function Y(pt,Pt,St){var Ot=h.exec(Pt.slice(St));return Ot?(pt.Q=+Ot[0],St+Ot[0].length):-1}function q(pt,Pt,St){var Ot=h.exec(Pt.slice(St));return Ot?(pt.s=+Ot[0],St+Ot[0].length):-1}function H(pt,Pt){return v(pt.getDate(),Pt,2)}function X(pt,Pt){return v(pt.getHours(),Pt,2)}function Q(pt,Pt){return v(pt.getHours()%12||12,Pt,2)}function ne(pt,Pt){return v(1+T.Z.count((0,x.Z)(pt),pt),Pt,3)}function re(pt,Pt){return v(pt.getMilliseconds(),Pt,3)}function ae(pt,Pt){return re(pt,Pt)+"000"}function se(pt,Pt){return v(pt.getMonth()+1,Pt,2)}function pe(pt,Pt){return v(pt.getMinutes(),Pt,2)}function ke(pt,Pt){return v(pt.getSeconds(),Pt,2)}function me(pt){var Pt=pt.getDay();return 0===Pt?7:Pt}function le(pt,Pt){return v(l.OM.count((0,x.Z)(pt)-1,pt),Pt,2)}function ue(pt,Pt){var St=pt.getDay();return pt=St>=4||0===St?(0,l.bL)(pt):l.bL.ceil(pt),v(l.bL.count((0,x.Z)(pt),pt)+(4===(0,x.Z)(pt).getDay()),Pt,2)}function Ee(pt){return pt.getDay()}function de(pt,Pt){return v(l.wA.count((0,x.Z)(pt)-1,pt),Pt,2)}function xe(pt,Pt){return v(pt.getFullYear()%100,Pt,2)}function Te(pt,Pt){return v(pt.getFullYear()%1e4,Pt,4)}function we(pt){var Pt=pt.getTimezoneOffset();return(Pt>0?"-":(Pt*=-1,"+"))+v(Pt/60|0,"0",2)+v(Pt%60,"0",2)}function K(pt,Pt){return v(pt.getUTCDate(),Pt,2)}function oe(pt,Pt){return v(pt.getUTCHours(),Pt,2)}function he(pt,Pt){return v(pt.getUTCHours()%12||12,Pt,2)}function ye(pt,Pt){return v(1+k.Z.count((0,p.Z)(pt),pt),Pt,3)}function Me(pt,Pt){return v(pt.getUTCMilliseconds(),Pt,3)}function Re(pt,Pt){return Me(pt,Pt)+"000"}function Pe(pt,Pt){return v(pt.getUTCMonth()+1,Pt,2)}function De(pt,Pt){return v(pt.getUTCMinutes(),Pt,2)}function fe(pt,Pt){return v(pt.getUTCSeconds(),Pt,2)}function ge(pt){var Pt=pt.getUTCDay();return 0===Pt?7:Pt}function be(pt,Pt){return v(M.Ox.count((0,p.Z)(pt)-1,pt),Pt,2)}function Ie(pt,Pt){var St=pt.getUTCDay();return pt=St>=4||0===St?(0,M.hB)(pt):M.hB.ceil(pt),v(M.hB.count((0,p.Z)(pt),pt)+(4===(0,p.Z)(pt).getUTCDay()),Pt,2)}function He(pt){return pt.getUTCDay()}function Ve(pt,Pt){return v(M.l6.count((0,p.Z)(pt)-1,pt),Pt,2)}function tt(pt,Pt){return v(pt.getUTCFullYear()%100,Pt,2)}function nt(pt,Pt){return v(pt.getUTCFullYear()%1e4,Pt,4)}function st(){return"+0000"}function dt(){return"%"}function wt(pt){return+pt}function _t(pt){return Math.floor(+pt/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=n.format,i=n.utcFormat},82301:function($,I,t){"use strict";t.d(I,{a:function(){return T}});var M=t(30052),k=t(54263),l=(0,M.Z)(function(x){x.setHours(0,0,0,0)},function(x,p){x.setDate(x.getDate()+p)},function(x,p){return(p-x-(p.getTimezoneOffset()-x.getTimezoneOffset())*k.yB)/k.UD},function(x){return x.getDate()-1});I.Z=l;var T=l.range},54263:function($,I,t){"use strict";t.d(I,{UD:function(){return T},Y2:function(){return l},Ym:function(){return M},iM:function(){return x},yB:function(){return k}});var M=1e3,k=6e4,l=36e5,T=864e5,x=6048e5},81041:function($,I,t){"use strict";t.r(I),t.d(I,{timeDay:function(){return h.Z},timeDays:function(){return h.a},timeFriday:function(){return f.mC},timeFridays:function(){return f.b$},timeHour:function(){return i},timeHours:function(){return c},timeInterval:function(){return M.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return T},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return f.wA},timeMondays:function(){return f.bJ},timeMonth:function(){return v},timeMonths:function(){return g},timeSaturday:function(){return f.EY},timeSaturdays:function(){return f.Ff},timeSecond:function(){return s},timeSeconds:function(){return e},timeSunday:function(){return f.OM},timeSundays:function(){return f.vm},timeThursday:function(){return f.bL},timeThursdays:function(){return f.$t},timeTuesday:function(){return f.sy},timeTuesdays:function(){return f.aU},timeWednesday:function(){return f.zg},timeWednesdays:function(){return f.Ld},timeWeek:function(){return f.OM},timeWeeks:function(){return f.vm},timeYear:function(){return y.Z},timeYears:function(){return y.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return L.QQ},utcFridays:function(){return L.fz},utcHour:function(){return S},utcHours:function(){return _},utcMillisecond:function(){return l},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return w},utcMonday:function(){return L.l6},utcMondays:function(){return L.$3},utcMonth:function(){return P},utcMonths:function(){return z},utcSaturday:function(){return L.g4},utcSaturdays:function(){return L.Q_},utcSecond:function(){return s},utcSeconds:function(){return e},utcSunday:function(){return L.Ox},utcSundays:function(){return L.SU},utcThursday:function(){return L.hB},utcThursdays:function(){return L.xj},utcTuesday:function(){return L.J1},utcTuesdays:function(){return L.DK},utcWednesday:function(){return L.b3},utcWednesdays:function(){return L.uy},utcWeek:function(){return L.Ox},utcWeeks:function(){return L.SU},utcYear:function(){return j.Z},utcYears:function(){return j.D}});var M=t(30052),k=(0,M.Z)(function(){},function(R,V){R.setTime(+R+V)},function(R,V){return V-R});k.every=function(R){return R=Math.floor(R),isFinite(R)&&R>0?R>1?(0,M.Z)(function(V){V.setTime(Math.floor(V/R)*R)},function(V,D){V.setTime(+V+D*R)},function(V,D){return(D-V)/R}):k:null};var l=k,T=k.range,x=t(54263),p=(0,M.Z)(function(R){R.setTime(R-R.getMilliseconds())},function(R,V){R.setTime(+R+V*x.Ym)},function(R,V){return(V-R)/x.Ym},function(R){return R.getUTCSeconds()}),s=p,e=p.range,o=(0,M.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*x.Ym)},function(R,V){R.setTime(+R+V*x.yB)},function(R,V){return(V-R)/x.yB},function(R){return R.getMinutes()}),r=o,n=o.range,a=(0,M.Z)(function(R){R.setTime(R-R.getMilliseconds()-R.getSeconds()*x.Ym-R.getMinutes()*x.yB)},function(R,V){R.setTime(+R+V*x.Y2)},function(R,V){return(V-R)/x.Y2},function(R){return R.getHours()}),i=a,c=a.range,h=t(82301),f=t(59879),b=(0,M.Z)(function(R){R.setDate(1),R.setHours(0,0,0,0)},function(R,V){R.setMonth(R.getMonth()+V)},function(R,V){return V.getMonth()-R.getMonth()+12*(V.getFullYear()-R.getFullYear())},function(R){return R.getMonth()}),v=b,g=b.range,y=t(34823),d=(0,M.Z)(function(R){R.setUTCSeconds(0,0)},function(R,V){R.setTime(+R+V*x.yB)},function(R,V){return(V-R)/x.yB},function(R){return R.getUTCMinutes()}),m=d,w=d.range,u=(0,M.Z)(function(R){R.setUTCMinutes(0,0,0)},function(R,V){R.setTime(+R+V*x.Y2)},function(R,V){return(V-R)/x.Y2},function(R){return R.getUTCHours()}),S=u,_=u.range,E=t(48480),L=t(58176),C=(0,M.Z)(function(R){R.setUTCDate(1),R.setUTCHours(0,0,0,0)},function(R,V){R.setUTCMonth(R.getUTCMonth()+V)},function(R,V){return V.getUTCMonth()-R.getUTCMonth()+12*(V.getUTCFullYear()-R.getUTCFullYear())},function(R){return R.getUTCMonth()}),P=C,z=C.range,j=t(79791)},30052:function($,I,t){"use strict";t.d(I,{Z:function(){return l}});var M=new Date,k=new Date;function l(T,x,p,s){function e(o){return T(o=0===arguments.length?new Date:new Date(+o)),o}return e.floor=function(o){return T(o=new Date(+o)),o},e.ceil=function(o){return T(o=new Date(o-1)),x(o,1),T(o),o},e.round=function(o){var r=e(o),n=e.ceil(o);return o-r<n-o?r:n},e.offset=function(o,r){return x(o=new Date(+o),null==r?1:Math.floor(r)),o},e.range=function(o,r,n){var a,i=[];if(o=e.ceil(o),n=null==n?1:Math.floor(n),!(o<r&&n>0))return i;do{i.push(a=new Date(+o)),x(o,n),T(o)}while(a<o&&o<r);return i},e.filter=function(o){return l(function(r){if(r>=r)for(;T(r),!o(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;x(r,-1),!o(r););else for(;--n>=0;)for(;x(r,1),!o(r););})},p&&(e.count=function(o,r){return M.setTime(+o),k.setTime(+r),T(M),T(k),Math.floor(p(M,k))},e.every=function(o){return o=Math.floor(o),isFinite(o)&&o>0?o>1?e.filter(s?function(r){return s(r)%o==0}:function(r){return e.count(0,r)%o==0}):e:null}),e}},48480:function($,I,t){"use strict";t.d(I,{y:function(){return T}});var M=t(30052),k=t(54263),l=(0,M.Z)(function(x){x.setUTCHours(0,0,0,0)},function(x,p){x.setUTCDate(x.getUTCDate()+p)},function(x,p){return(p-x)/k.UD},function(x){return x.getUTCDate()-1});I.Z=l;var T=l.range},58176:function($,I,t){"use strict";t.d(I,{$3:function(){return a},DK:function(){return i},J1:function(){return p},Ox:function(){return T},QQ:function(){return o},Q_:function(){return b},SU:function(){return n},b3:function(){return s},fz:function(){return f},g4:function(){return r},hB:function(){return e},l6:function(){return x},uy:function(){return c},xj:function(){return h}});var M=t(30052),k=t(54263);function l(v){return(0,M.Z)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-v)%7),g.setUTCHours(0,0,0,0)},function(g,y){g.setUTCDate(g.getUTCDate()+7*y)},function(g,y){return(y-g)/k.iM})}var T=l(0),x=l(1),p=l(2),s=l(3),e=l(4),o=l(5),r=l(6),n=T.range,a=x.range,i=p.range,c=s.range,h=e.range,f=o.range,b=r.range},79791:function($,I,t){"use strict";t.d(I,{D:function(){return l}});var M=t(30052),k=(0,M.Z)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,x){T.setUTCFullYear(T.getUTCFullYear()+x)},function(T,x){return x.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.Z)(function(x){x.setUTCFullYear(Math.floor(x.getUTCFullYear()/T)*T),x.setUTCMonth(0,1),x.setUTCHours(0,0,0,0)},function(x,p){x.setUTCFullYear(x.getUTCFullYear()+p*T)}):null},I.Z=k;var l=k.range},59879:function($,I,t){"use strict";t.d(I,{$t:function(){return h},EY:function(){return r},Ff:function(){return b},Ld:function(){return c},OM:function(){return T},aU:function(){return i},b$:function(){return f},bJ:function(){return a},bL:function(){return e},mC:function(){return o},sy:function(){return p},vm:function(){return n},wA:function(){return x},zg:function(){return s}});var M=t(30052),k=t(54263);function l(v){return(0,M.Z)(function(g){g.setDate(g.getDate()-(g.getDay()+7-v)%7),g.setHours(0,0,0,0)},function(g,y){g.setDate(g.getDate()+7*y)},function(g,y){return(y-g-(y.getTimezoneOffset()-g.getTimezoneOffset())*k.yB)/k.iM})}var T=l(0),x=l(1),p=l(2),s=l(3),e=l(4),o=l(5),r=l(6),n=T.range,a=x.range,i=p.range,c=s.range,h=e.range,f=o.range,b=r.range},34823:function($,I,t){"use strict";t.d(I,{g:function(){return l}});var M=t(30052),k=(0,M.Z)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,x){T.setFullYear(T.getFullYear()+x)},function(T,x){return x.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.Z)(function(x){x.setFullYear(Math.floor(x.getFullYear()/T)*T),x.setMonth(0,1),x.setHours(0,0,0,0)},function(x,p){x.setFullYear(x.getFullYear()+p*T)}):null},I.Z=k;var l=k.range},17045:function($,I,t){"use strict";var M=t(8709),k="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),l=Object.prototype.toString,T=Array.prototype.concat,x=Object.defineProperty,p=t(55622)(),s=x&&p,e=function(r,n,a,i){if(n in r)if(!0===i){if(r[n]===a)return}else if("function"!=typeof(c=i)||"[object Function]"!==l.call(c)||!i())return;var c;s?x(r,n,{configurable:!0,enumerable:!1,value:a,writable:!0}):r[n]=a},o=function(r,n){var a=arguments.length>2?arguments[2]:{},i=M(n);k&&(i=T.call(i,Object.getOwnPropertySymbols(n)));for(var c=0;c<i.length;c+=1)e(r,i[c],n[i[c]],a[i[c]])};o.supportsDescriptors=!!s,$.exports=o},46775:function($){$.exports=function(){for(var I=0;I<arguments.length;I++)if(void 0!==arguments[I])return arguments[I]}},53545:function($){"use strict";$.exports=M;var I=(M.canvas=document.createElement("canvas")).getContext("2d"),t=k([32,126]);function M(l,T){Array.isArray(l)&&(l=l.join(", "));var x,p={},s=16,e=.05;T&&(2===T.length&&"number"==typeof T[0]?x=k(T):Array.isArray(T)?x=T:(T.o?x=k(T.o):T.pairs&&(x=T.pairs),T.fontSize&&(s=T.fontSize),null!=T.threshold&&(e=T.threshold))),x||(x=t),I.font=s+"px "+l;for(var o=0;o<x.length;o++){var r=x[o],n=I.measureText(r[0]).width+I.measureText(r[1]).width,a=I.measureText(r).width;Math.abs(n-a)>s*e&&(p[r]=(a-n)/s*1e3)}return p}function k(l){for(var T=[],x=l[0];x<=l[1];x++)for(var p=String.fromCharCode(x),s=l[0];s<l[1];s++){var e=p+String.fromCharCode(s);T.push(e)}return T}M.createPairs=k,M.ascii=t},31457:function($,I,t){var M=t(65185),k=t(18625),l={M:"moveTo",C:"bezierCurveTo"};$.exports=function(T,x){T.beginPath(),k(M(x)).forEach(function(p){var s=p[0],e=p.slice(1);T[l[s]].apply(T,e)}),T.closePath()}},90660:function($){$.exports=function(I){switch(I){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function($){"use strict";function I(t,M,k){var l=0|t[k];if(l<=0)return[];var T,x=new Array(l);if(k===t.length-1)for(T=0;T<l;++T)x[T]=M;else for(T=0;T<l;++T)x[T]=I(t,M,k+1);return x}$.exports=function(t,M){switch(void 0===M&&(M=0),typeof t){case"number":if(t>0)return function(k,l){var T,x;for(T=new Array(k),x=0;x<k;++x)T[x]=l;return T}(0|t,M);break;case"object":if("number"==typeof t.length)return I(t,M,0)}return[]}},11474:function($){"use strict";function I(S,_,E){E=E||2;var L,C,P,z,j,R,V,D=_&&_.length,B=D?_[0]*E:S.length,N=t(S,0,B,E,!0),U=[];if(!N||N.next===N.prev)return U;if(D&&(N=function(Y,q,H,X){var Q,ne,re,ae=[];for(Q=0,ne=q.length;Q<ne;Q++)(re=t(Y,q[Q]*X,Q<ne-1?q[Q+1]*X:Y.length,X,!1))===re.next&&(re.steiner=!0),ae.push(n(re));for(ae.sort(s),Q=0;Q<ae.length;Q++)e(ae[Q],H),H=M(H,H.next);return H}(S,_,N,E)),S.length>80*E){L=P=S[0],C=z=S[1];for(var J=E;J<B;J+=E)(j=S[J])<L&&(L=j),(R=S[J+1])<C&&(C=R),j>P&&(P=j),R>z&&(z=R);V=0!==(V=Math.max(P-L,z-C))?1/V:0}return k(N,U,E,L,C,V),U}function t(S,_,E,L,C){var P,z;if(C===u(S,_,E,L)>0)for(P=_;P<E;P+=L)z=d(P,S[P],S[P+1],z);else for(P=E-L;P>=_;P-=L)z=d(P,S[P],S[P+1],z);return z&&h(z,z.next)&&(m(z),z=z.next),z}function M(S,_){if(!S)return S;_||(_=S);var E,L=S;do{if(E=!1,L.steiner||!h(L,L.next)&&0!==c(L.prev,L,L.next))L=L.next;else{if(m(L),(L=_=L.prev)===L.next)break;E=!0}}while(E||L!==_);return _}function k(S,_,E,L,C,P,z){if(S){!z&&P&&function(D,B,N,U){var J=D;do{null===J.z&&(J.z=r(J.x,J.y,B,N,U)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next}while(J!==D);J.prevZ.nextZ=null,J.prevZ=null,function(Y){var q,H,X,Q,ne,re,ae,se,pe=1;do{for(H=Y,Y=null,ne=null,re=0;H;){for(re++,X=H,ae=0,q=0;q<pe&&(ae++,X=X.nextZ);q++);for(se=pe;ae>0||se>0&&X;)0!==ae&&(0===se||!X||H.z<=X.z)?(Q=H,H=H.nextZ,ae--):(Q=X,X=X.nextZ,se--),ne?ne.nextZ=Q:Y=Q,Q.prevZ=ne,ne=Q;H=X}ne.nextZ=null,pe*=2}while(re>1)}(J)}(S,L,C,P);for(var j,R,V=S;S.prev!==S.next;)if(j=S.prev,R=S.next,P?T(S,L,C,P):l(S))_.push(j.i/E),_.push(S.i/E),_.push(R.i/E),m(S),S=R.next,V=R.next;else if((S=R)===V){z?1===z?k(S=x(M(S),_,E),_,E,L,C,P,2):2===z&&p(S,_,E,L,C,P):k(M(S),_,E,L,C,P,1);break}}}function l(S){var _=S.prev,E=S,L=S.next;if(c(_,E,L)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(a(_.x,_.y,E.x,E.y,L.x,L.y,C.x,C.y)&&c(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,_,E,L){var C=S.prev,P=S,z=S.next;if(c(C,P,z)>=0)return!1;for(var V=C.x>P.x?C.x>z.x?C.x:z.x:P.x>z.x?P.x:z.x,D=C.y>P.y?C.y>z.y?C.y:z.y:P.y>z.y?P.y:z.y,B=r(C.x<P.x?C.x<z.x?C.x:z.x:P.x<z.x?P.x:z.x,C.y<P.y?C.y<z.y?C.y:z.y:P.y<z.y?P.y:z.y,_,E,L),N=r(V,D,_,E,L),U=S.prevZ,J=S.nextZ;U&&U.z>=B&&J&&J.z<=N;){if(U!==S.prev&&U!==S.next&&a(C.x,C.y,P.x,P.y,z.x,z.y,U.x,U.y)&&c(U.prev,U,U.next)>=0||(U=U.prevZ,J!==S.prev&&J!==S.next&&a(C.x,C.y,P.x,P.y,z.x,z.y,J.x,J.y)&&c(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;U&&U.z>=B;){if(U!==S.prev&&U!==S.next&&a(C.x,C.y,P.x,P.y,z.x,z.y,U.x,U.y)&&c(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;J&&J.z<=N;){if(J!==S.prev&&J!==S.next&&a(C.x,C.y,P.x,P.y,z.x,z.y,J.x,J.y)&&c(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function x(S,_,E){var L=S;do{var C=L.prev,P=L.next.next;!h(C,P)&&f(C,L,L.next,P)&&g(C,P)&&g(P,C)&&(_.push(C.i/E),_.push(L.i/E),_.push(P.i/E),m(L),m(L.next),L=S=P),L=L.next}while(L!==S);return M(L)}function p(S,_,E,L,C,P){var z=S;do{for(var j=z.next.next;j!==z.prev;){if(z.i!==j.i&&i(z,j)){var R=y(z,j);return z=M(z,z.next),R=M(R,R.next),k(z,_,E,L,C,P),void k(R,_,E,L,C,P)}j=j.next}z=z.next}while(z!==S)}function s(S,_){return S.x-_.x}function e(S,_){if(_=function(L,C){var P,z=C,j=L.x,R=L.y,V=-1/0;do{if(R<=z.y&&R>=z.next.y&&z.next.y!==z.y){var D=z.x+(R-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(D<=j&&D>V){if(V=D,D===j){if(R===z.y)return z;if(R===z.next.y)return z.next}P=z.x<z.next.x?z:z.next}}z=z.next}while(z!==C);if(!P)return null;if(j===V)return P;var B,N=P,U=P.x,J=P.y,Y=1/0;z=P;do{j>=z.x&&z.x>=U&&j!==z.x&&a(R<J?j:V,R,U,J,R<J?V:j,R,z.x,z.y)&&(B=Math.abs(R-z.y)/(j-z.x),g(z,L)&&(B<Y||B===Y&&(z.x>P.x||z.x===P.x&&o(P,z)))&&(P=z,Y=B)),z=z.next}while(z!==N);return P}(S,_)){var E=y(_,S);M(_,_.next),M(E,E.next)}}function o(S,_){return c(S.prev,S,_.prev)<0&&c(_.next,S,S.next)<0}function r(S,_,E,L,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-L)*C)|_<<8))|_<<4))|_<<2))|_<<1))<<1}function n(S){var _=S,E=S;do{(_.x<E.x||_.x===E.x&&_.y<E.y)&&(E=_),_=_.next}while(_!==S);return E}function a(S,_,E,L,C,P,z,j){return(C-z)*(_-j)-(S-z)*(P-j)>=0&&(S-z)*(L-j)-(E-z)*(_-j)>=0&&(E-z)*(P-j)-(C-z)*(L-j)>=0}function i(S,_){return S.next.i!==_.i&&S.prev.i!==_.i&&!function(E,L){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==L.i&&C.next.i!==L.i&&f(C,C.next,E,L))return!0;C=C.next}while(C!==E);return!1}(S,_)&&(g(S,_)&&g(_,S)&&function(E,L){var C=E,P=!1,z=(E.x+L.x)/2,j=(E.y+L.y)/2;do{C.y>j!=C.next.y>j&&C.next.y!==C.y&&z<(C.next.x-C.x)*(j-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next}while(C!==E);return P}(S,_)&&(c(S.prev,S,_.prev)||c(S,_.prev,_))||h(S,_)&&c(S.prev,S,S.next)>0&&c(_.prev,_,_.next)>0)}function c(S,_,E){return(_.y-S.y)*(E.x-_.x)-(_.x-S.x)*(E.y-_.y)}function h(S,_){return S.x===_.x&&S.y===_.y}function f(S,_,E,L){var C=v(c(S,_,E)),P=v(c(S,_,L)),z=v(c(E,L,S)),j=v(c(E,L,_));return C!==P&&z!==j||!(0!==C||!b(S,E,_))||!(0!==P||!b(S,L,_))||!(0!==z||!b(E,S,L))||!(0!==j||!b(E,_,L))}function b(S,_,E){return _.x<=Math.max(S.x,E.x)&&_.x>=Math.min(S.x,E.x)&&_.y<=Math.max(S.y,E.y)&&_.y>=Math.min(S.y,E.y)}function v(S){return S>0?1:S<0?-1:0}function g(S,_){return c(S.prev,S,S.next)<0?c(S,_,S.next)>=0&&c(S,S.prev,_)>=0:c(S,_,S.prev)<0||c(S,S.next,_)<0}function y(S,_){var E=new w(S.i,S.x,S.y),L=new w(_.i,_.x,_.y),C=S.next,P=_.prev;return S.next=_,_.prev=S,E.next=C,C.prev=E,L.next=E,E.prev=L,P.next=L,L.prev=P,L}function d(S,_,E,L){var C=new w(S,_,E);return L?(C.next=L.next,C.prev=L,L.next.prev=C,L.next=C):(C.prev=C,C.next=C),C}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function w(S,_,E){this.i=S,this.x=_,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u(S,_,E,L){for(var C=0,P=_,z=E-L;P<E;P+=L)C+=(S[z]-S[P])*(S[P+1]+S[z+1]),z=P;return C}$.exports=I,$.exports.default=I,I.deviation=function(S,_,E,L){var C=_&&_.length,z=Math.abs(u(S,0,C?_[0]*E:S.length,E));if(C)for(var j=0,R=_.length;j<R;j++)z-=Math.abs(u(S,_[j]*E,j<R-1?_[j+1]*E:S.length,E));var B=0;for(j=0;j<L.length;j+=3){var N=L[j]*E,U=L[j+1]*E,J=L[j+2]*E;B+=Math.abs((S[N]-S[J])*(S[U+1]-S[N+1])-(S[N]-S[U])*(S[J+1]-S[N+1]))}return 0===z&&0===B?0:Math.abs((B-z)/z)},I.flatten=function(S){for(var _=S[0][0].length,E={vertices:[],holes:[],dimensions:_},L=0,C=0;C<S.length;C++){for(var P=0;P<S[C].length;P++)for(var z=0;z<_;z++)E.vertices.push(S[C][P][z]);C>0&&E.holes.push(L+=S[C-1].length)}return E}},2502:function($,I,t){var M=t(68664);$.exports=function(k,l){var T,x=[],p=[],s=[],e={},o=[];function r(g){s[g]=!1,e.hasOwnProperty(g)&&Object.keys(e[g]).forEach(function(y){delete e[g][y],s[y]&&r(y)})}function n(g){var y,d,m=!1;for(p.push(g),s[g]=!0,y=0;y<o[g].length;y++)(d=o[g][y])===T?(a(T,p),m=!0):s[d]||(m=n(d));if(m)r(g);else for(y=0;y<o[g].length;y++){var w=e[d=o[g][y]];w||(e[d]=w={}),w[d]=!0}return p.pop(),m}function a(g,y){var d=[].concat(y).concat(g);l?l(n):x.push(d)}function i(g){!function(E){for(var L=0;L<k.length;L++)L<E&&(k[L]=[]),k[L]=k[L].filter(function(C){return C>=E})}(g);for(var y,d=M(k).components.filter(function(E){return E.length>1}),m=1/0,w=0;w<d.length;w++)for(var u=0;u<d[w].length;u++)d[w][u]<m&&(m=d[w][u],y=w);var S=d[y];return!!S&&{leastVertex:m,adjList:k.map(function(E,L){return-1===S.indexOf(L)?[]:E.filter(function(C){return-1!==S.indexOf(C)})})}}T=0;for(var c=k.length;T<c;){var h=i(T);if(T=h.leastVertex,o=h.adjList){for(var f=0;f<o.length;f++)for(var b=0;b<o[f].length;b++){var v=o[f][b];s[+v]=!1,e[v]={}}n(T),T+=1}else T=c}return l?void 0:x}},16134:function($,I,t){"use strict";var M=t(36672);$.exports=function(){return M(this).length=0,this}},4892:function($,I,t){"use strict";$.exports=t(64404)()?Array.from:t(49441)},64404:function($){"use strict";$.exports=function(){var I,t,M=Array.from;return"function"==typeof M&&(t=M(I=["raz","dwa"]),Boolean(t&&t!==I&&"dwa"===t[1]))}},49441:function($,I,t){"use strict";var M=t(8260).iterator,k=t(73051),l=t(33717),T=t(35976),x=t(78513),p=t(36672),s=t(95296),e=t(87963),o=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;$.exports=function(i){var c,h,f,b,v,g,y,d,m,w,u=arguments[1],S=arguments[2];if(i=Object(p(i)),s(u)&&x(u),this&&this!==Array&&l(this))c=this;else{if(!u){if(k(i))return 1!==(v=i.length)?Array.apply(null,i):((b=new Array(1))[0]=i[0],b);if(o(i)){for(b=new Array(v=i.length),h=0;h<v;++h)b[h]=i[h];return b}}b=[]}if(!o(i))if(void 0!==(m=i[M])){for(y=x(m).call(i),c&&(b=new c),d=y.next(),h=0;!d.done;)w=u?r.call(u,S,d.value,h):d.value,c?(n.value=w,a(b,h,n)):b[h]=w,d=y.next(),++h;v=h}else if(e(i)){for(v=i.length,c&&(b=new c),h=0,f=0;h<v;++h)w=i[h],h+1<v&&(g=w.charCodeAt(0))>=55296&&g<=56319&&(w+=i[++h]),w=u?r.call(u,S,w,f):w,c?(n.value=w,a(b,f,n)):b[f]=w,++f;v=f}if(void 0===v)for(v=T(i.length),c&&(b=new c(v)),h=0;h<v;++h)w=u?r.call(u,S,i[h],h):i[h],c?(n.value=w,a(b,h,n)):b[h]=w;return c&&(n.value=null,b.length=v),b}},73051:function($){"use strict";var I=Object.prototype.toString,t=I.call(function(){return arguments}());$.exports=function(M){return I.call(M)===t}},33717:function($){"use strict";var I=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(M){return"function"==typeof M&&t(I.call(M))}},52345:function($){"use strict";$.exports=function(){}},9953:function($,I,t){"use strict";$.exports=t(90436)()?Math.sign:t(6069)},90436:function($){"use strict";$.exports=function(){var I=Math.sign;return"function"==typeof I&&1===I(10)&&-1===I(-20)}},6069:function($){"use strict";$.exports=function(I){return I=Number(I),isNaN(I)||0===I?I:I>0?1:-1}},56247:function($,I,t){"use strict";var M=t(9953),k=Math.abs,l=Math.floor;$.exports=function(T){return isNaN(T)?0:0!==(T=Number(T))&&isFinite(T)?M(T)*l(k(T)):T}},35976:function($,I,t){"use strict";var M=t(56247),k=Math.max;$.exports=function(l){return k(0,M(l))}},67260:function($,I,t){"use strict";var M=t(78513),k=t(36672),l=Function.prototype.bind,T=Function.prototype.call,x=Object.keys,p=Object.prototype.propertyIsEnumerable;$.exports=function(s,e){return function(o,r){var n,a=arguments[2],i=arguments[3];return o=Object(k(o)),M(r),n=x(o),i&&n.sort("function"==typeof i?l.call(i,o):void 0),"function"!=typeof s&&(s=n[s]),T.call(s,n,function(c,h){return p.call(o,c)?T.call(r,a,o[c],c,o,h):e})}}},95879:function($,I,t){"use strict";$.exports=t(73583)()?Object.assign:t(34205)},73583:function($){"use strict";$.exports=function(){var I,t=Object.assign;return"function"==typeof t&&(t(I={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),I.foo+I.bar+I.trzy==="razdwatrzy")}},34205:function($,I,t){"use strict";var M=t(68700),k=t(36672),l=Math.max;$.exports=function(T,x){var p,s,e,o=l(arguments.length,2);for(T=Object(k(T)),e=function(r){try{T[r]=x[r]}catch(n){p||(p=n)}},s=1;s<o;++s)M(x=arguments[s]).forEach(e);if(void 0!==p)throw p;return T}},19012:function($,I,t){"use strict";var M=t(4892),k=t(95879),l=t(36672);$.exports=function(T){var x=Object(l(T)),p=arguments[1],s=Object(arguments[2]);if(x!==T&&!p)return x;var e={};return p?M(p,function(o){(s.ensure||o in T)&&(e[o]=T[o])}):k(e,T),e}},52818:function($,I,t){"use strict";var M,k,l,T,x=Object.create;t(33247)()||(M=t(51882)),$.exports=M?1!==M.level?x:(k={},l={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(p){l[p]="__proto__"!==p?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,l),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(p,s){return x(null===p?k:p,s)}):x},96437:function($,I,t){"use strict";$.exports=t(67260)("forEach")},99611:function($,I,t){"use strict";var M=t(95296),k={function:!0,object:!0};$.exports=function(l){return M(l)&&k[typeof l]||!1}},95296:function($,I,t){"use strict";var M=t(52345)();$.exports=function(k){return k!==M&&null!==k}},68700:function($,I,t){"use strict";$.exports=t(13895)()?Object.keys:t(25217)},13895:function($){"use strict";$.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function($,I,t){"use strict";var M=t(95296),k=Object.keys;$.exports=function(l){return k(M(l)?Object(l):l)}},16906:function($,I,t){"use strict";var M=t(78513),k=t(96437),l=Function.prototype.call;$.exports=function(T,x){var p={},s=arguments[2];return M(x),k(T,function(e,o,r,n){p[o]=l.call(x,s,e,o,r,n)}),p}},21780:function($,I,t){"use strict";var M=t(95296),k=Array.prototype.forEach,l=Object.create,T=function(x,p){var s;for(s in x)p[s]=x[s]};$.exports=function(x){var p=l(null);return k.call(arguments,function(s){M(s)&&T(Object(s),p)}),p}},1496:function($,I,t){"use strict";$.exports=t(33247)()?Object.setPrototypeOf:t(51882)},33247:function($){"use strict";var I=Object.create,t=Object.getPrototypeOf,M={};$.exports=function(){var k=Object.setPrototypeOf;return"function"==typeof k&&t(k((arguments[0]||I)(null),M))===M}},51882:function($,I,t){"use strict";var M,k,l,T,x=t(99611),p=t(36672),s=Object.prototype.isPrototypeOf,e=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(r,n){if(p(r),null===n||x(n))return r;throw new TypeError("Prototype must be null or an object")},$.exports=(k=function(){var r,n=Object.create(null),a={},i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{(r=i.set).call(n,a)}catch{}if(Object.getPrototypeOf(n)===a)return{set:r,level:2}}return n.__proto__=a,Object.getPrototypeOf(n)===a?{level:2}:((n={}).__proto__=a,Object.getPrototypeOf(n)===a&&{level:1})}())?(2===k.level?k.set?(T=k.set,l=function(r,n){return T.call(M(r,n),n),r}):l=function(r,n){return M(r,n).__proto__=n,r}:l=function r(n,a){var i;return M(n,a),(i=s.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,null===a&&(a=r.nullPolyfill),n.__proto__=a,i&&e(r.nullPolyfill,"__proto__",o),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null,t(52818)},78513:function($){"use strict";$.exports=function(I){if("function"!=typeof I)throw new TypeError(I+" is not a function");return I}},98976:function($,I,t){"use strict";var M=t(99611);$.exports=function(k){if(!M(k))throw new TypeError(k+" is not an Object");return k}},36672:function($,I,t){"use strict";var M=t(95296);$.exports=function(k){if(!M(k))throw new TypeError("Cannot use null or undefined");return k}},66741:function($,I,t){"use strict";$.exports=t(17557)()?String.prototype.contains:t(60381)},17557:function($){"use strict";var I="razdwatrzy";$.exports=function(){return"function"==typeof I.contains&&!0===I.contains("dwa")&&!1===I.contains("foo")}},60381:function($){"use strict";var I=String.prototype.indexOf;$.exports=function(t){return I.call(this,t,arguments[1])>-1}},87963:function($){"use strict";var I=Object.prototype.toString,t=I.call("");$.exports=function(M){return"string"==typeof M||M&&"object"==typeof M&&(M instanceof String||I.call(M)===t)||!1}},43043:function($){"use strict";var I=Object.create(null),t=Math.random;$.exports=function(){var M;do{M=t().toString(36).slice(2)}while(I[M]);return M}},32411:function($,I,t){"use strict";var M,k=t(1496),l=t(66741),T=t(62072),x=t(8260),p=t(95426),s=Object.defineProperty;M=$.exports=function(e,o){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");p.call(this,e),o=o?l.call(o,"key+value")?"key+value":l.call(o,"key")?"key":"value":"value",s(this,"__kind__",T("",o))},k&&k(M,p),delete M.prototype.constructor,M.prototype=Object.create(p.prototype,{_resolve:T(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),s(M.prototype,x.toStringTag,T("c","Array Iterator"))},27515:function($,I,t){"use strict";var M=t(73051),k=t(78513),l=t(87963),T=t(66661),x=Array.isArray,p=Function.prototype.call,s=Array.prototype.some;$.exports=function(e,o){var r,n,a,i,c,h,f,b,v=arguments[2];if(x(e)||M(e)?r="array":l(e)?r="string":e=T(e),k(o),a=function(){i=!0},"array"!==r)if("string"!==r)for(n=e.next();!n.done;){if(p.call(o,v,n.value,a),i)return;n=e.next()}else for(h=e.length,c=0;c<h&&(f=e[c],c+1<h&&(b=f.charCodeAt(0))>=55296&&b<=56319&&(f+=e[++c]),p.call(o,v,f,a),!i);++c);else s.call(e,function(g){return p.call(o,v,g,a),i})}},66661:function($,I,t){"use strict";var M=t(73051),k=t(87963),l=t(32411),T=t(259),x=t(58095),p=t(8260).iterator;$.exports=function(s){return"function"==typeof x(s)[p]?s[p]():M(s)?new l(s):k(s)?new T(s):new l(s)}},95426:function($,I,t){"use strict";var M,k=t(16134),l=t(95879),T=t(78513),x=t(36672),p=t(62072),s=t(55174),e=t(8260),o=Object.defineProperty,r=Object.defineProperties;$.exports=M=function(n,a){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");r(this,{__list__:p("w",x(n)),__context__:p("w",a),__nextIndex__:p("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete M.prototype.constructor,r(M.prototype,l({_next:p(function(){var n;if(this.__list__)return this.__redo__&&void 0!==(n=this.__redo__.shift())?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:p(function(){return this._createResult(this._next())}),_createResult:p(function(n){return void 0===n?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:p(function(n){return this.__list__[n]}),_unBind:p(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:p(function(){return"[object "+(this[e.toStringTag]||"Object")+"]"})},s({_onAdd:p(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,i){a>=n&&(this.__redo__[i]=++a)},this),this.__redo__.push(n)):o(this,"__redo__",p("c",[n])))}),_onDelete:p(function(n){var a;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(a=this.__redo__.indexOf(n))&&this.__redo__.splice(a,1),this.__redo__.forEach(function(i,c){i>n&&(this.__redo__[c]=--i)},this)))}),_onClear:p(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),o(M.prototype,e.iterator,p(function(){return this}))},35940:function($,I,t){"use strict";var M=t(73051),k=t(95296),l=t(87963),T=t(8260).iterator,x=Array.isArray;$.exports=function(p){return!(!k(p)||!x(p)&&!l(p)&&!M(p)&&"function"!=typeof p[T])}},259:function($,I,t){"use strict";var M,k=t(1496),l=t(62072),T=t(8260),x=t(95426),p=Object.defineProperty;M=$.exports=function(s){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");s=String(s),x.call(this,s),p(this,"__length__",l("",s.length))},k&&k(M,x),delete M.prototype.constructor,M.prototype=Object.create(x.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(s){var e,o=this.__list__[s];return this.__nextIndex__===this.__length__?o:(e=o.charCodeAt(0))>=55296&&e<=56319?o+this.__list__[this.__nextIndex__++]:o})}),p(M.prototype,T.toStringTag,l("c","String Iterator"))},58095:function($,I,t){"use strict";var M=t(35940);$.exports=function(k){if(!M(k))throw new TypeError(k+" is not iterable");return k}},73523:function($){"use strict";function I(t,M){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var k=Object(t),l=1;l<arguments.length;l++){var T=arguments[l];if(null!=T)for(var x=Object.keys(Object(T)),p=0,s=x.length;p<s;p++){var e=x[p],o=Object.getOwnPropertyDescriptor(T,e);void 0!==o&&o.enumerable&&(k[e]=T[e])}}return k}$.exports={assign:I,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:I})}}},8260:function($,I,t){"use strict";$.exports=t(69711)()?t(94908).Symbol:t(18415)},69711:function($,I,t){"use strict";var M=t(94908),k={object:!0,symbol:!0};$.exports=function(){var l,T=M.Symbol;if("function"!=typeof T)return!1;l=T("test symbol");try{String(l)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},82276:function($){"use strict";$.exports=function(I){return!!I&&("symbol"==typeof I||!!I.constructor&&"Symbol"===I.constructor.name&&"Symbol"===I[I.constructor.toStringTag])}},29366:function($,I,t){"use strict";var M=t(62072),l=Object.defineProperty,T=Object.prototype,x=(0,Object.create)(null);$.exports=function(p){for(var s,e,o=0;x[p+(o||"")];)++o;return x[p+=o||""]=!0,l(T,s="@@"+p,M.gs(null,function(r){e||(e=!0,l(this,s,M(r)),e=!1)})),s}},92842:function($,I,t){"use strict";var M=t(62072),k=t(94908).Symbol;$.exports=function(l){return Object.defineProperties(l,{hasInstance:M("",k&&k.hasInstance||l("hasInstance")),isConcatSpreadable:M("",k&&k.isConcatSpreadable||l("isConcatSpreadable")),iterator:M("",k&&k.iterator||l("iterator")),match:M("",k&&k.match||l("match")),replace:M("",k&&k.replace||l("replace")),search:M("",k&&k.search||l("search")),species:M("",k&&k.species||l("species")),split:M("",k&&k.split||l("split")),toPrimitive:M("",k&&k.toPrimitive||l("toPrimitive")),toStringTag:M("",k&&k.toStringTag||l("toStringTag")),unscopables:M("",k&&k.unscopables||l("unscopables"))})}},13304:function($,I,t){"use strict";var M=t(62072),k=t(53308),l=Object.create(null);$.exports=function(T){return Object.defineProperties(T,{for:M(function(x){return l[x]?l[x]:l[x]=T(String(x))}),keyFor:M(function(x){var p;for(p in k(x),l)if(l[p]===x)return p})})}},18415:function($,I,t){"use strict";var M,k,l,T=t(62072),x=t(53308),p=t(94908).Symbol,s=t(29366),e=t(92842),o=t(13304),r=Object.create,n=Object.defineProperties,a=Object.defineProperty;if("function"==typeof p)try{String(p()),l=!0}catch{}else p=null;k=function(i){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return M(i)},$.exports=M=function i(c){var h;if(this instanceof i)throw new TypeError("Symbol is not a constructor");return l?p(c):(h=r(k.prototype),c=void 0===c?"":String(c),n(h,{__description__:T("",c),__name__:T("",s(c))}))},e(M),o(M),n(k.prototype,{constructor:T(M),toString:T("",function(){return this.__name__})}),n(M.prototype,{toString:T(function(){return"Symbol ("+x(this).__description__+")"}),valueOf:T(function(){return x(this)})}),a(M.prototype,M.toPrimitive,T("",function(){var i=x(this);return"symbol"==typeof i?i:i.toString()})),a(M.prototype,M.toStringTag,T("c","Symbol")),a(k.prototype,M.toStringTag,T("c",M.prototype[M.toStringTag])),a(k.prototype,M.toPrimitive,T("c",M.prototype[M.toPrimitive]))},53308:function($,I,t){"use strict";var M=t(82276);$.exports=function(k){if(!M(k))throw new TypeError(k+" is not a symbol");return k}},83522:function($,I,t){"use strict";$.exports=t(96402)()?WeakMap:t(329)},96402:function($){"use strict";$.exports=function(){var I,t;if("function"!=typeof WeakMap)return!1;try{I=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(I)&&"function"==typeof I.set&&I.set({},1)===I&&"function"==typeof I.delete&&"function"==typeof I.has&&"one"===I.get(t)}},96416:function($){"use strict";$.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},329:function($,I,t){"use strict";var M,k=t(95296),l=t(1496),T=t(98976),x=t(36672),p=t(43043),s=t(62072),e=t(66661),o=t(27515),r=t(8260).toStringTag,n=t(96416),a=Array.isArray,i=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;$.exports=M=function(){var f,b=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return f=n&&l&&WeakMap!==M?l(new WeakMap,h(this)):this,k(b)&&(a(b)||(b=e(b))),i(f,"__weakMapData__",s("c","$weakMap$"+p())),b&&o(b,function(v){x(v),f.set(v[0],v[1])}),f},n&&(l&&l(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:s(M)})),Object.defineProperties(M.prototype,{delete:s(function(f){return!!c.call(T(f),this.__weakMapData__)&&(delete f[this.__weakMapData__],!0)}),get:s(function(f){if(c.call(T(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:s(function(f){return c.call(T(f),this.__weakMapData__)}),set:s(function(f,b){return i(T(f),this.__weakMapData__,s("c",b)),this}),toString:s(function(){return"[object WeakMap]"})}),i(M.prototype,r,s("c","WeakMap"))},15398:function($){"use strict";var I,t="object"==typeof Reflect?Reflect:null,M=t&&"function"==typeof t.apply?t.apply:function(c,h,f){return Function.prototype.apply.call(c,h,f)};I=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:function(c){return Object.getOwnPropertyNames(c)};var k=Number.isNaN||function(c){return c!=c};function l(){l.init.call(this)}$.exports=l,$.exports.once=function(c,h){return new Promise(function(f,b){function v(y){c.removeListener(h,g),b(y)}function g(){"function"==typeof c.removeListener&&c.removeListener("error",v),f([].slice.call(arguments))}var y;i(c,h,g,{once:!0}),"error"!==h&&("function"==typeof(y=c).on&&i(y,"error",v,{once:!0}))})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var T=10;function x(c){if("function"!=typeof c)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}function p(c){return void 0===c._maxListeners?l.defaultMaxListeners:c._maxListeners}function s(c,h,f,b){var v,g,y;if(x(f),void 0===(g=c._events)?(g=c._events=Object.create(null),c._eventsCount=0):(void 0!==g.newListener&&(c.emit("newListener",h,f.listener?f.listener:f),g=c._events),y=g[h]),void 0===y)y=g[h]=f,++c._eventsCount;else if("function"==typeof y?y=g[h]=b?[f,y]:[y,f]:b?y.unshift(f):y.push(f),(v=p(c))>0&&y.length>v&&!y.warned){y.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=c,m.type=h,m.count=y.length,console&&console.warn&&console.warn(m)}return c}function e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(c,h,f){var b={fired:!1,wrapFn:void 0,target:c,type:h,listener:f},v=e.bind(b);return v.listener=f,b.wrapFn=v,v}function r(c,h,f){var b=c._events;if(void 0===b)return[];var v=b[h];return void 0===v?[]:"function"==typeof v?f?[v.listener||v]:[v]:f?function(g){for(var y=new Array(g.length),d=0;d<y.length;++d)y[d]=g[d].listener||g[d];return y}(v):a(v,v.length)}function n(c){var h=this._events;if(void 0!==h){var f=h[c];if("function"==typeof f)return 1;if(void 0!==f)return f.length}return 0}function a(c,h){for(var f=new Array(h),b=0;b<h;++b)f[b]=c[b];return f}function i(c,h,f,b){if("function"==typeof c.on)b.once?c.once(h,f):c.on(h,f);else{if("function"!=typeof c.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c);c.addEventListener(h,function v(g){b.once&&c.removeEventListener(h,v),f(g)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(c){if("number"!=typeof c||c<0||k(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");T=c}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(c){if("number"!=typeof c||c<0||k(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(c){for(var h=[],f=1;f<arguments.length;f++)h.push(arguments[f]);var b="error"===c,v=this._events;if(void 0!==v)b=b&&void 0===v.error;else if(!b)return!1;if(b){var g;if(h.length>0&&(g=h[0]),g instanceof Error)throw g;var y=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw y.context=g,y}var d=v[c];if(void 0===d)return!1;if("function"==typeof d)M(d,this,h);else{var m=d.length,w=a(d,m);for(f=0;f<m;++f)M(w[f],this,h)}return!0},l.prototype.on=l.prototype.addListener=function(c,h){return s(this,c,h,!1)},l.prototype.prependListener=function(c,h){return s(this,c,h,!0)},l.prototype.once=function(c,h){return x(h),this.on(c,o(this,c,h)),this},l.prototype.prependOnceListener=function(c,h){return x(h),this.prependListener(c,o(this,c,h)),this},l.prototype.off=l.prototype.removeListener=function(c,h){var f,b,v,g,y;if(x(h),void 0===(b=this._events))return this;if(void 0===(f=b[c]))return this;if(f===h||f.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete b[c],b.removeListener&&this.emit("removeListener",c,f.listener||h));else if("function"!=typeof f){for(v=-1,g=f.length-1;g>=0;g--)if(f[g]===h||f[g].listener===h){y=f[g].listener,v=g;break}if(v<0)return this;0===v?f.shift():function(d,m){for(;m+1<d.length;m++)d[m]=d[m+1];d.pop()}(f,v),1===f.length&&(b[c]=f[0]),void 0!==b.removeListener&&this.emit("removeListener",c,y||h)}return this},l.prototype.removeAllListeners=function(c){var h,f,b;if(void 0===(f=this._events))return this;if(void 0===f.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==f[c]&&(0==--this._eventsCount?this._events=Object.create(null):delete f[c]),this;if(0===arguments.length){var v,g=Object.keys(f);for(b=0;b<g.length;++b)"removeListener"!==(v=g[b])&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=f[c]))this.removeListener(c,h);else if(void 0!==h)for(b=h.length-1;b>=0;b--)this.removeListener(c,h[b]);return this},l.prototype.listeners=function(c){return r(this,c,!0)},l.prototype.rawListeners=function(c){return r(this,c,!1)},l.listenerCount=function(c,h){return"function"==typeof c.listenerCount?c.listenerCount(h):n.call(c,h)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?I(this._events):[]}},60774:function($){var I=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return I()}try{return __global__||I()}finally{delete Object.prototype.__global__}}()},94908:function($,I,t){"use strict";$.exports=t(51152)()?globalThis:t(60774)},51152:function($){"use strict";$.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},92770:function($,I,t){"use strict";var M=t(18546);$.exports=function(k){var l=typeof k;if("string"===l){var T=k;if(0==(k=+k)&&M(T))return!1}else if("number"!==l)return!1;return k-k<1}},30120:function($,I,t){var M=t(90660);$.exports=function(k,l,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&"number"==typeof k[0][0]){var x,p,s,e,o=k[0].length,r=k.length*o;l&&"string"!=typeof l||(l=new(M(l||"float32"))(r+T));var n=l.length-T;if(r!==n)throw new Error("source length "+r+" ("+o+"x"+k.length+") does not match destination length "+n);for(x=0,s=T;x<k.length;x++)for(p=0;p<o;p++)l[s++]=null===k[x][p]?NaN:k[x][p]}else if(l&&"string"!=typeof l)l.set(k,T);else{var a=M(l||"float32");if(Array.isArray(k)||"array"===l)for(x=0,s=T,e=(l=new a(k.length+T)).length;s<e;s++,x++)l[s]=null===k[x]?NaN:k[x];else 0===T?l=new a(k):(l=new a(k.length+T)).set(k,T)}return l}},68016:function($,I,t){"use strict";var M=t(53313),k=[32,126];$.exports=function(l){var T=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],x=l.canvas||document.createElement("canvas"),p=l.font,s="number"==typeof l.step?[l.step,l.step]:l.step||[32,32],e=l.chars||k;if(p&&"string"!=typeof p&&(p=M(p)),Array.isArray(e)){if(2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]){for(var o=[],r=e[0],n=0;r<=e[1];r++)o[n++]=String.fromCharCode(r);e=o}}else e=String(e).split("");T=T.slice(),x.width=T[0],x.height=T[1];var a=x.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,x.width,x.height),a.font=p,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var i=s[0]/2,c=s[1]/2;for(r=0;r<e.length;r++)a.fillText(e[r],i,c),(i+=s[0])>T[0]-s[0]/2&&(i=s[0]/2,c+=s[1]);return x}},32879:function($){"use strict";function I(l,T){T||(T={}),("string"==typeof l||Array.isArray(l))&&(T.family=l);var x=Array.isArray(T.family)?T.family.join(", "):T.family;if(!x)throw Error("`family` must be defined");var p=T.size||T.fontSize||T.em||48,e=(l=[T.style||T.fontStyle||"",T.weight||T.fontWeight||"",p].join(" ")+"px "+x,T.origin||"top");if(I.cache[x]&&p<=I.cache[x].em)return t(I.cache[x],e);var o=T.canvas||I.canvas,r=o.getContext("2d"),n={upper:void 0!==T.upper?T.upper:"H",lower:void 0!==T.lower?T.lower:"x",descent:void 0!==T.descent?T.descent:"p",ascent:void 0!==T.ascent?T.ascent:"h",tittle:void 0!==T.tittle?T.tittle:"i",overshoot:void 0!==T.overshoot?T.overshoot:"O"},a=Math.ceil(1.5*p);o.height=a,o.width=.5*a,r.font=l;var i="H",c={top:0};r.clearRect(0,0,a,a),r.textBaseline="top",r.fillStyle="black",r.fillText(i,0,0);var h=M(r.getImageData(0,0,a,a));r.clearRect(0,0,a,a),r.textBaseline="bottom",r.fillText(i,0,a);var f=M(r.getImageData(0,0,a,a));c.lineHeight=c.bottom=a-f+h,r.clearRect(0,0,a,a),r.textBaseline="alphabetic",r.fillText(i,0,a);var b=a-M(r.getImageData(0,0,a,a))-1+h;c.baseline=c.alphabetic=b,r.clearRect(0,0,a,a),r.textBaseline="middle",r.fillText(i,0,.5*a);var v=M(r.getImageData(0,0,a,a));c.median=c.middle=a-v-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="hanging",r.fillText(i,0,.5*a);var g=M(r.getImageData(0,0,a,a));c.hanging=a-g-1+h-.5*a,r.clearRect(0,0,a,a),r.textBaseline="ideographic",r.fillText(i,0,a);var y=M(r.getImageData(0,0,a,a));if(c.ideographic=a-y-1+h,n.upper&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.upper,0,0),c.upper=M(r.getImageData(0,0,a,a)),c.capHeight=c.baseline-c.upper),n.lower&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.lower,0,0),c.lower=M(r.getImageData(0,0,a,a)),c.xHeight=c.baseline-c.lower),n.tittle&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.tittle,0,0),c.tittle=M(r.getImageData(0,0,a,a))),n.ascent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.ascent,0,0),c.ascent=M(r.getImageData(0,0,a,a))),n.descent&&(r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.descent,0,0),c.descent=k(r.getImageData(0,0,a,a))),n.overshoot){r.clearRect(0,0,a,a),r.textBaseline="top",r.fillText(n.overshoot,0,0);var d=k(r.getImageData(0,0,a,a));c.overshoot=d-b}for(var m in c)c[m]/=p;return c.em=p,I.cache[x]=c,t(c,e)}function t(l,T){var x={};for(var p in"string"==typeof T&&(T=l[T]),l)"em"!==p&&(x[p]=l[p]-T);return x}function M(l){for(var T=l.height,x=l.data,p=3;p<x.length;p+=4)if(0!==x[p])return Math.floor(.25*(p-3)/T)}function k(l){for(var T=l.height,x=l.data,p=x.length-1;p>0;p-=4)if(0!==x[p])return Math.floor(.25*(p-3)/T)}$.exports=I,I.canvas=document.createElement("canvas"),I.cache={}},31353:function($,I,t){"use strict";var M=t(85395),k=Object.prototype.toString,l=Object.prototype.hasOwnProperty,T=function(s,e,o){for(var r=0,n=s.length;r<n;r++)l.call(s,r)&&(null==o?e(s[r],r,s):e.call(o,s[r],r,s))},x=function(s,e,o){for(var r=0,n=s.length;r<n;r++)null==o?e(s.charAt(r),r,s):e.call(o,s.charAt(r),r,s)},p=function(s,e,o){for(var r in s)l.call(s,r)&&(null==o?e(s[r],r,s):e.call(o,s[r],r,s))};$.exports=function(s,e,o){if(!M(e))throw new TypeError("iterator must be a function");var r;arguments.length>=3&&(r=o),"[object Array]"===k.call(s)?T(s,e,r):"string"==typeof s?x(s,e,r):p(s,e,r)}},73047:function($){"use strict";var I="Function.prototype.bind called on incompatible ",t=Array.prototype.slice,M=Object.prototype.toString,k="[object Function]";$.exports=function(l){var T=this;if("function"!=typeof T||M.call(T)!==k)throw new TypeError(I+T);for(var x,p=t.call(arguments,1),s=function(){if(this instanceof x){var a=T.apply(this,p.concat(t.call(arguments)));return Object(a)===a?a:this}return T.apply(l,p.concat(t.call(arguments)))},e=Math.max(0,T.length-p.length),o=[],r=0;r<e;r++)o.push("$"+r);if(x=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s),T.prototype){var n=function(){};n.prototype=T.prototype,x.prototype=new n,n.prototype=null}return x}},77575:function($,I,t){"use strict";var M=t(73047);$.exports=Function.prototype.bind||M},86249:function($){$.exports=function(I,t){if("string"!=typeof I)throw new TypeError("must specify type string");if(t=t||{},typeof document>"u"&&!t.canvas)return null;var M=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(M.width=t.width),"number"==typeof t.height&&(M.height=t.height);var k,l=t;try{var T=[I];0===I.indexOf("webgl")&&T.push("experimental-"+I);for(var x=0;x<T.length;x++)if(k=M.getContext(T[x],l))return k}catch{k=null}return k||null}},68318:function($,I,t){"use strict";var M,k=SyntaxError,l=Function,T=TypeError,x=function(L){try{return l('"use strict"; return ('+L+").constructor;")()}catch{}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch{p=null}var s=function(){throw new T},e=p?function(){try{return s}catch{try{return p(arguments,"callee").get}catch{return s}}}():s,o=t(57877)(),r=Object.getPrototypeOf||function(L){return L.__proto__},n={},a=typeof Uint8Array>"u"?M:r(Uint8Array),i={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":o?r([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":n,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":n,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o?r(r([][Symbol.iterator]())):M,"%JSON%":"object"==typeof JSON?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&o?r((new Map)[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&o?r((new Set)[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":o?r(""[Symbol.iterator]()):M,"%Symbol%":o?Symbol:M,"%SyntaxError%":k,"%ThrowTypeError%":e,"%TypedArray%":a,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};try{null.error}catch(L){var c=r(r(L));i["%Error.prototype%"]=c}var h=function L(C){var P;if("%AsyncFunction%"===C)P=x("async function () {}");else if("%GeneratorFunction%"===C)P=x("function* () {}");else if("%AsyncGeneratorFunction%"===C)P=x("async function* () {}");else if("%AsyncGenerator%"===C){var z=L("%AsyncGeneratorFunction%");z&&(P=z.prototype)}else if("%AsyncIteratorPrototype%"===C){var j=L("%AsyncGenerator%");j&&(P=r(j.prototype))}return i[C]=P,P},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=t(77575),v=t(35065),g=b.call(Function.call,Array.prototype.concat),y=b.call(Function.apply,Array.prototype.splice),d=b.call(Function.call,String.prototype.replace),m=b.call(Function.call,String.prototype.slice),w=b.call(Function.call,RegExp.prototype.exec),u=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,_=function(L){var C=m(L,0,1),P=m(L,-1);if("%"===C&&"%"!==P)throw new k("invalid intrinsic syntax, expected closing `%`");if("%"===P&&"%"!==C)throw new k("invalid intrinsic syntax, expected opening `%`");var z=[];return d(L,u,function(j,R,V,D){z[z.length]=V?d(D,S,"$1"):R||j}),z},E=function(L,C){var P,z=L;if(v(f,z)&&(z="%"+(P=f[z])[0]+"%"),v(i,z)){var j=i[z];if(j===n&&(j=h(z)),void 0===j&&!C)throw new T("intrinsic "+L+" exists, but is not available. Please file an issue!");return{alias:P,name:z,value:j}}throw new k("intrinsic "+L+" does not exist!")};$.exports=function(L,C){if("string"!=typeof L||0===L.length)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof C)throw new T('"allowMissing" argument must be a boolean');if(null===w(/^%?[^%]*%?$/,L))throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var P=_(L),z=P.length>0?P[0]:"",j=E("%"+z+"%",C),R=j.name,V=j.value,D=!1,B=j.alias;B&&(z=B[0],y(P,g([0,1],B)));for(var N=1,U=!0;N<P.length;N+=1){var J=P[N],Y=m(J,0,1),q=m(J,-1);if(('"'===Y||"'"===Y||"`"===Y||'"'===q||"'"===q||"`"===q)&&Y!==q)throw new k("property names with quotes must have matching quotes");if("constructor"!==J&&U||(D=!0),v(i,R="%"+(z+="."+J)+"%"))V=i[R];else if(null!=V){if(!(J in V)){if(!C)throw new T("base intrinsic for "+L+" exists, but the property is not available.");return}if(p&&N+1>=P.length){var H=p(V,J);V=(U=!!H)&&"get"in H&&!("originalValue"in H.get)?H.get:V[J]}else U=v(V,J),V=V[J];U&&!D&&(i[R]=V)}}return V}},85400:function($){$.exports=function(I,t){var M=t[0],k=t[1],l=t[2],T=t[3],x=t[4],p=t[5],s=t[6],e=t[7],o=t[8],r=t[9],n=t[10],a=t[11],i=t[12],c=t[13],h=t[14],f=t[15];return I[0]=p*(n*f-a*h)-r*(s*f-e*h)+c*(s*a-e*n),I[1]=-(k*(n*f-a*h)-r*(l*f-T*h)+c*(l*a-T*n)),I[2]=k*(s*f-e*h)-p*(l*f-T*h)+c*(l*e-T*s),I[3]=-(k*(s*a-e*n)-p*(l*a-T*n)+r*(l*e-T*s)),I[4]=-(x*(n*f-a*h)-o*(s*f-e*h)+i*(s*a-e*n)),I[5]=M*(n*f-a*h)-o*(l*f-T*h)+i*(l*a-T*n),I[6]=-(M*(s*f-e*h)-x*(l*f-T*h)+i*(l*e-T*s)),I[7]=M*(s*a-e*n)-x*(l*a-T*n)+o*(l*e-T*s),I[8]=x*(r*f-a*c)-o*(p*f-e*c)+i*(p*a-e*r),I[9]=-(M*(r*f-a*c)-o*(k*f-T*c)+i*(k*a-T*r)),I[10]=M*(p*f-e*c)-x*(k*f-T*c)+i*(k*e-T*p),I[11]=-(M*(p*a-e*r)-x*(k*a-T*r)+o*(k*e-T*p)),I[12]=-(x*(r*h-n*c)-o*(p*h-s*c)+i*(p*n-s*r)),I[13]=M*(r*h-n*c)-o*(k*h-l*c)+i*(k*n-l*r),I[14]=-(M*(p*h-s*c)-x*(k*h-l*c)+i*(k*s-l*p)),I[15]=M*(p*n-s*r)-x*(k*n-l*r)+o*(k*s-l*p),I}},42331:function($){$.exports=function(I){var t=new Float32Array(16);return t[0]=I[0],t[1]=I[1],t[2]=I[2],t[3]=I[3],t[4]=I[4],t[5]=I[5],t[6]=I[6],t[7]=I[7],t[8]=I[8],t[9]=I[9],t[10]=I[10],t[11]=I[11],t[12]=I[12],t[13]=I[13],t[14]=I[14],t[15]=I[15],t}},31042:function($){$.exports=function(I,t){return I[0]=t[0],I[1]=t[1],I[2]=t[2],I[3]=t[3],I[4]=t[4],I[5]=t[5],I[6]=t[6],I[7]=t[7],I[8]=t[8],I[9]=t[9],I[10]=t[10],I[11]=t[11],I[12]=t[12],I[13]=t[13],I[14]=t[14],I[15]=t[15],I}},11902:function($){$.exports=function(){var I=new Float32Array(16);return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},89887:function($){$.exports=function(I){var t=I[0],M=I[1],k=I[2],l=I[3],T=I[4],x=I[5],p=I[6],s=I[7],e=I[8],o=I[9],r=I[10],n=I[11],a=I[12],i=I[13],c=I[14],h=I[15];return(t*x-M*T)*(r*h-n*c)-(t*p-k*T)*(o*h-n*i)+(t*s-l*T)*(o*c-r*i)+(M*p-k*x)*(e*h-n*a)-(M*s-l*x)*(e*c-r*a)+(k*s-l*p)*(e*i-o*a)}},27812:function($){$.exports=function(I,t){var M=t[0],k=t[1],l=t[2],T=t[3],x=M+M,p=k+k,s=l+l,e=M*x,o=k*x,r=k*p,n=l*x,a=l*p,i=l*s,c=T*x,h=T*p,f=T*s;return I[0]=1-r-i,I[1]=o+f,I[2]=n-h,I[3]=0,I[4]=o-f,I[5]=1-e-i,I[6]=a+c,I[7]=0,I[8]=n+h,I[9]=a-c,I[10]=1-e-r,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},34045:function($){$.exports=function(I,t,M){var k,l,T,x=M[0],p=M[1],s=M[2],e=Math.sqrt(x*x+p*p+s*s);return Math.abs(e)<1e-6?null:(x*=e=1/e,p*=e,s*=e,k=Math.sin(t),T=1-(l=Math.cos(t)),I[0]=x*x*T+l,I[1]=p*x*T+s*k,I[2]=s*x*T-p*k,I[3]=0,I[4]=x*p*T-s*k,I[5]=p*p*T+l,I[6]=s*p*T+x*k,I[7]=0,I[8]=x*s*T+p*k,I[9]=p*s*T-x*k,I[10]=s*s*T+l,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I)}},45973:function($){$.exports=function(I,t,M){var k=t[0],l=t[1],T=t[2],x=t[3],p=k+k,s=l+l,e=T+T,o=k*p,r=k*s,n=k*e,a=l*s,i=l*e,c=T*e,h=x*p,f=x*s,b=x*e;return I[0]=1-(a+c),I[1]=r+b,I[2]=n-f,I[3]=0,I[4]=r-b,I[5]=1-(o+c),I[6]=i+h,I[7]=0,I[8]=n+f,I[9]=i-h,I[10]=1-(o+a),I[11]=0,I[12]=M[0],I[13]=M[1],I[14]=M[2],I[15]=1,I}},81472:function($){$.exports=function(I,t){return I[0]=t[0],I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=t[1],I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=t[2],I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},14669:function($){$.exports=function(I,t){return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=t[0],I[13]=t[1],I[14]=t[2],I[15]=1,I}},75262:function($){$.exports=function(I,t){var M=Math.sin(t),k=Math.cos(t);return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=k,I[6]=M,I[7]=0,I[8]=0,I[9]=-M,I[10]=k,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},331:function($){$.exports=function(I,t){var M=Math.sin(t),k=Math.cos(t);return I[0]=k,I[1]=0,I[2]=-M,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=M,I[9]=0,I[10]=k,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},11049:function($){$.exports=function(I,t){var M=Math.sin(t),k=Math.cos(t);return I[0]=k,I[1]=M,I[2]=0,I[3]=0,I[4]=-M,I[5]=k,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},75195:function($){$.exports=function(I,t,M,k,l,T,x){var p=1/(M-t),s=1/(l-k),e=1/(T-x);return I[0]=2*T*p,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=2*T*s,I[6]=0,I[7]=0,I[8]=(M+t)*p,I[9]=(l+k)*s,I[10]=(x+T)*e,I[11]=-1,I[12]=0,I[13]=0,I[14]=x*T*2*e,I[15]=0,I}},71551:function($){$.exports=function(I){return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I}},79576:function($,I,t){$.exports={create:t(11902),clone:t(42331),copy:t(31042),identity:t(71551),transpose:t(88654),invert:t(95874),adjoint:t(85400),determinant:t(89887),multiply:t(91362),translate:t(31283),scale:t(10789),rotate:t(65074),rotateX:t(35545),rotateY:t(94918),rotateZ:t(15692),fromRotation:t(34045),fromRotationTranslation:t(45973),fromScaling:t(81472),fromTranslation:t(14669),fromXRotation:t(75262),fromYRotation:t(331),fromZRotation:t(11049),fromQuat:t(27812),frustum:t(75195),perspective:t(7864),perspectiveFromFieldOfView:t(35279),ortho:t(60378),lookAt:t(65551),str:t(6726)}},95874:function($){$.exports=function(I,t){var M=t[0],k=t[1],l=t[2],T=t[3],x=t[4],p=t[5],s=t[6],e=t[7],o=t[8],r=t[9],n=t[10],a=t[11],i=t[12],c=t[13],h=t[14],f=t[15],b=M*p-k*x,v=M*s-l*x,g=M*e-T*x,y=k*s-l*p,d=k*e-T*p,m=l*e-T*s,w=o*c-r*i,u=o*h-n*i,S=o*f-a*i,_=r*h-n*c,E=r*f-a*c,L=n*f-a*h,C=b*L-v*E+g*_+y*S-d*u+m*w;return C?(I[0]=(p*L-s*E+e*_)*(C=1/C),I[1]=(l*E-k*L-T*_)*C,I[2]=(c*m-h*d+f*y)*C,I[3]=(n*d-r*m-a*y)*C,I[4]=(s*S-x*L-e*u)*C,I[5]=(M*L-l*S+T*u)*C,I[6]=(h*g-i*m-f*v)*C,I[7]=(o*m-n*g+a*v)*C,I[8]=(x*E-p*S+e*w)*C,I[9]=(k*S-M*E-T*w)*C,I[10]=(i*d-c*g+f*b)*C,I[11]=(r*g-o*d-a*b)*C,I[12]=(p*u-x*_-s*w)*C,I[13]=(M*_-k*u+l*w)*C,I[14]=(c*v-i*y-h*b)*C,I[15]=(o*y-r*v+n*b)*C,I):null}},65551:function($,I,t){var M=t(71551);$.exports=function(k,l,T,x){var p,s,e,o,r,n,a,i,c,h,f=l[0],b=l[1],v=l[2],g=x[0],y=x[1],d=x[2],m=T[0],w=T[1],u=T[2];return Math.abs(f-m)<1e-6&&Math.abs(b-w)<1e-6&&Math.abs(v-u)<1e-6?M(k):(a=f-m,i=b-w,c=v-u,p=y*(c*=h=1/Math.sqrt(a*a+i*i+c*c))-d*(i*=h),s=d*(a*=h)-g*c,e=g*i-y*a,(h=Math.sqrt(p*p+s*s+e*e))?(p*=h=1/h,s*=h,e*=h):(p=0,s=0,e=0),o=i*e-c*s,r=c*p-a*e,n=a*s-i*p,(h=Math.sqrt(o*o+r*r+n*n))?(o*=h=1/h,r*=h,n*=h):(o=0,r=0,n=0),k[0]=p,k[1]=o,k[2]=a,k[3]=0,k[4]=s,k[5]=r,k[6]=i,k[7]=0,k[8]=e,k[9]=n,k[10]=c,k[11]=0,k[12]=-(p*f+s*b+e*v),k[13]=-(o*f+r*b+n*v),k[14]=-(a*f+i*b+c*v),k[15]=1,k)}},91362:function($){$.exports=function(I,t,M){var k=t[0],l=t[1],T=t[2],x=t[3],p=t[4],s=t[5],e=t[6],o=t[7],r=t[8],n=t[9],a=t[10],i=t[11],c=t[12],h=t[13],f=t[14],b=t[15],v=M[0],g=M[1],y=M[2],d=M[3];return I[0]=v*k+g*p+y*r+d*c,I[1]=v*l+g*s+y*n+d*h,I[2]=v*T+g*e+y*a+d*f,I[3]=v*x+g*o+y*i+d*b,I[4]=(v=M[4])*k+(g=M[5])*p+(y=M[6])*r+(d=M[7])*c,I[5]=v*l+g*s+y*n+d*h,I[6]=v*T+g*e+y*a+d*f,I[7]=v*x+g*o+y*i+d*b,I[8]=(v=M[8])*k+(g=M[9])*p+(y=M[10])*r+(d=M[11])*c,I[9]=v*l+g*s+y*n+d*h,I[10]=v*T+g*e+y*a+d*f,I[11]=v*x+g*o+y*i+d*b,I[12]=(v=M[12])*k+(g=M[13])*p+(y=M[14])*r+(d=M[15])*c,I[13]=v*l+g*s+y*n+d*h,I[14]=v*T+g*e+y*a+d*f,I[15]=v*x+g*o+y*i+d*b,I}},60378:function($){$.exports=function(I,t,M,k,l,T,x){var p=1/(t-M),s=1/(k-l),e=1/(T-x);return I[0]=-2*p,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=-2*s,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=2*e,I[11]=0,I[12]=(t+M)*p,I[13]=(l+k)*s,I[14]=(x+T)*e,I[15]=1,I}},7864:function($){$.exports=function(I,t,M,k,l){var T=1/Math.tan(t/2),x=1/(k-l);return I[0]=T/M,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=T,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=(l+k)*x,I[11]=-1,I[12]=0,I[13]=0,I[14]=2*l*k*x,I[15]=0,I}},35279:function($){$.exports=function(I,t,M,k){var l=Math.tan(t.upDegrees*Math.PI/180),T=Math.tan(t.downDegrees*Math.PI/180),x=Math.tan(t.leftDegrees*Math.PI/180),p=Math.tan(t.rightDegrees*Math.PI/180),s=2/(x+p),e=2/(l+T);return I[0]=s,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=e,I[6]=0,I[7]=0,I[8]=-(x-p)*s*.5,I[9]=(l-T)*e*.5,I[10]=k/(M-k),I[11]=-1,I[12]=0,I[13]=0,I[14]=k*M/(M-k),I[15]=0,I}},65074:function($){$.exports=function(I,t,M,k){var l,T,x,p,s,e,o,r,n,a,i,c,h,f,b,v,g,y,d,m,w,u,S,_,E=k[0],L=k[1],C=k[2],P=Math.sqrt(E*E+L*L+C*C);return Math.abs(P)<1e-6?null:(E*=P=1/P,L*=P,C*=P,l=Math.sin(M),x=1-(T=Math.cos(M)),s=t[1],e=t[2],o=t[3],n=t[5],a=t[6],i=t[7],h=t[9],f=t[10],b=t[11],d=E*L*x-C*l,m=L*L*x+T,w=C*L*x+E*l,u=E*C*x+L*l,S=L*C*x-E*l,_=C*C*x+T,I[0]=(p=t[0])*(v=E*E*x+T)+(r=t[4])*(g=L*E*x+C*l)+(c=t[8])*(y=C*E*x-L*l),I[1]=s*v+n*g+h*y,I[2]=e*v+a*g+f*y,I[3]=o*v+i*g+b*y,I[4]=p*d+r*m+c*w,I[5]=s*d+n*m+h*w,I[6]=e*d+a*m+f*w,I[7]=o*d+i*m+b*w,I[8]=p*u+r*S+c*_,I[9]=s*u+n*S+h*_,I[10]=e*u+a*S+f*_,I[11]=o*u+i*S+b*_,t!==I&&(I[12]=t[12],I[13]=t[13],I[14]=t[14],I[15]=t[15]),I)}},35545:function($){$.exports=function(I,t,M){var k=Math.sin(M),l=Math.cos(M),T=t[4],x=t[5],p=t[6],s=t[7],e=t[8],o=t[9],r=t[10],n=t[11];return t!==I&&(I[0]=t[0],I[1]=t[1],I[2]=t[2],I[3]=t[3],I[12]=t[12],I[13]=t[13],I[14]=t[14],I[15]=t[15]),I[4]=T*l+e*k,I[5]=x*l+o*k,I[6]=p*l+r*k,I[7]=s*l+n*k,I[8]=e*l-T*k,I[9]=o*l-x*k,I[10]=r*l-p*k,I[11]=n*l-s*k,I}},94918:function($){$.exports=function(I,t,M){var k=Math.sin(M),l=Math.cos(M),T=t[0],x=t[1],p=t[2],s=t[3],e=t[8],o=t[9],r=t[10],n=t[11];return t!==I&&(I[4]=t[4],I[5]=t[5],I[6]=t[6],I[7]=t[7],I[12]=t[12],I[13]=t[13],I[14]=t[14],I[15]=t[15]),I[0]=T*l-e*k,I[1]=x*l-o*k,I[2]=p*l-r*k,I[3]=s*l-n*k,I[8]=T*k+e*l,I[9]=x*k+o*l,I[10]=p*k+r*l,I[11]=s*k+n*l,I}},15692:function($){$.exports=function(I,t,M){var k=Math.sin(M),l=Math.cos(M),T=t[0],x=t[1],p=t[2],s=t[3],e=t[4],o=t[5],r=t[6],n=t[7];return t!==I&&(I[8]=t[8],I[9]=t[9],I[10]=t[10],I[11]=t[11],I[12]=t[12],I[13]=t[13],I[14]=t[14],I[15]=t[15]),I[0]=T*l+e*k,I[1]=x*l+o*k,I[2]=p*l+r*k,I[3]=s*l+n*k,I[4]=e*l-T*k,I[5]=o*l-x*k,I[6]=r*l-p*k,I[7]=n*l-s*k,I}},10789:function($){$.exports=function(I,t,M){var k=M[0],l=M[1],T=M[2];return I[0]=t[0]*k,I[1]=t[1]*k,I[2]=t[2]*k,I[3]=t[3]*k,I[4]=t[4]*l,I[5]=t[5]*l,I[6]=t[6]*l,I[7]=t[7]*l,I[8]=t[8]*T,I[9]=t[9]*T,I[10]=t[10]*T,I[11]=t[11]*T,I[12]=t[12],I[13]=t[13],I[14]=t[14],I[15]=t[15],I}},6726:function($){$.exports=function(I){return"mat4("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+", "+I[8]+", "+I[9]+", "+I[10]+", "+I[11]+", "+I[12]+", "+I[13]+", "+I[14]+", "+I[15]+")"}},31283:function($){$.exports=function(I,t,M){var k,l,T,x,p,s,e,o,r,n,a,i,c=M[0],h=M[1],f=M[2];return t===I?(I[12]=t[0]*c+t[4]*h+t[8]*f+t[12],I[13]=t[1]*c+t[5]*h+t[9]*f+t[13],I[14]=t[2]*c+t[6]*h+t[10]*f+t[14],I[15]=t[3]*c+t[7]*h+t[11]*f+t[15]):(l=t[1],T=t[2],x=t[3],p=t[4],s=t[5],e=t[6],o=t[7],r=t[8],n=t[9],a=t[10],i=t[11],I[0]=k=t[0],I[1]=l,I[2]=T,I[3]=x,I[4]=p,I[5]=s,I[6]=e,I[7]=o,I[8]=r,I[9]=n,I[10]=a,I[11]=i,I[12]=k*c+p*h+r*f+t[12],I[13]=l*c+s*h+n*f+t[13],I[14]=T*c+e*h+a*f+t[14],I[15]=x*c+o*h+i*f+t[15]),I}},88654:function($){$.exports=function(I,t){if(I===t){var M=t[1],k=t[2],l=t[3],T=t[6],x=t[7],p=t[11];I[1]=t[4],I[2]=t[8],I[3]=t[12],I[4]=M,I[6]=t[9],I[7]=t[13],I[8]=k,I[9]=T,I[11]=t[14],I[12]=l,I[13]=x,I[14]=p}else I[0]=t[0],I[1]=t[4],I[2]=t[8],I[3]=t[12],I[4]=t[1],I[5]=t[5],I[6]=t[9],I[7]=t[13],I[8]=t[2],I[9]=t[6],I[10]=t[10],I[11]=t[14],I[12]=t[3],I[13]=t[7],I[14]=t[11],I[15]=t[15];return I}},42505:function($,I,t){"use strict";var M=t(72791),k=t(71299),l=t(98580),T=t(12018),x=t(83522),p=t(25075),s=t(68016),e=t(58404),o=t(18863),r=t(10973),n=t(25677),a=t(75686),i=t(53545),c=t(56131),h=t(32879),f=t(30120),b=t(13547).nextPow2,v=new x,g=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(g=!0),document.body.removeChild(y)}var d=function(m){var w;this.gl="function"==typeof(w=m)&&w._gl&&w.prop&&w.texture&&w.buffer?(m={regl:m}).regl._gl:T(m),this.shader=v.get(this.gl),this.regl=this.shader?this.shader.regl:m.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),v.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(m)?m:{})};d.prototype.createShader=function(){var m=this.regl,w=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(u,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(u,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(u,S){return S.atlas.texture},charStep:function(u,S){return S.atlas.step},em:function(u,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:m,draw:w,atlas:{}}},d.prototype.update=function(m){var w=this;if("string"==typeof m)m={text:m};else if(!m)return;null!=(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(m.opacity)?m.opacity.map(function(K){return parseFloat(K)}):parseFloat(m.opacity)),null!=m.viewport&&(this.viewport=o(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=m.kerning&&(this.kerning=m.kerning),null!=m.offset&&("number"==typeof m.offset&&(m.offset=[m.offset,0]),this.positionOffset=f(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=d.baseFontSize+"px sans-serif");var u,S=!1,_=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(K,oe){if("string"==typeof K)try{K=M.parse(K)}catch{K=M.parse(d.baseFontSize+"px "+K)}else K=M.parse(M.stringify(K));var he=M.stringify({size:d.baseFontSize,family:K.family,stretch:g?K.stretch:void 0,variant:K.variant,weight:K.weight,style:K.style}),ye=n(K.size),Me=Math.round(ye[0]*a(ye[1]));if(Me!==w.fontSize[oe]&&(_=!0,w.fontSize[oe]=Me),!(w.font[oe]&&he==w.font[oe].baseString||(S=!0,w.font[oe]=d.fonts[he],w.font[oe]))){var Re=K.family.join(", "),Pe=[K.style];K.style!=K.variant&&Pe.push(K.variant),K.variant!=K.weight&&Pe.push(K.weight),g&&K.weight!=K.stretch&&Pe.push(K.stretch),w.font[oe]={baseString:he,family:Re,weight:K.weight,stretch:K.stretch,style:K.style,variant:K.variant,width:{},kerning:{},metrics:h(Re,{origin:"top",fontSize:d.baseFontSize,fontStyle:Pe.join(" ")})},d.fonts[he]=w.font[oe]}}),(S||_)&&this.font.forEach(function(K,oe){var he=M.stringify({size:w.fontSize[oe],family:K.family,stretch:g?K.stretch:void 0,variant:K.variant,weight:K.weight,style:K.style});w.fontAtlas[oe]=w.shader.atlas[he],w.fontAtlas[oe]||(w.shader.atlas[he]=w.fontAtlas[oe]={fontString:he,step:2*Math.ceil(w.fontSize[oe]*K.metrics.bottom*.5),em:w.fontSize[oe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}),null==m.text&&(m.text=w.text)}),"string"==typeof m.text&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),L=0;L<E.length;L++)E[L]=m.text;m.text=E}if(null!=m.text||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var C=1;C<m.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+m.text[C-1].length,this.count+=m.text[C].length,this.counts.push(m.text[C].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];u=[],this.font.forEach(function(K,oe){d.atlasContext.font=K.baseString;for(var he=w.fontAtlas[oe],ye=0;ye<w.text.length;ye++){var Me=w.text.charAt(ye);if(null==he.ids[Me]&&(he.ids[Me]=he.chars.length,he.chars.push(Me),u.push(Me)),null==K.width[Me]&&(K.width[Me]=d.atlasContext.measureText(Me).width/d.baseFontSize,w.kerning)){var Re=[];for(var Pe in K.width)Re.push(Pe+Me,Me+Pe);c(K.kerning,i(K.family,{pairs:Re}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,z=e.mallocFloat(2*this.count),j=0,R=0;j<this.counts.length;j++){var V=this.counts[j];if(P)for(var D=0;D<V;D++)z[R++]=m.position[2*j],z[R++]=m.position[2*j+1];else for(var B=0;B<V;B++)z[R++]=m.position[j][0],z[R++]=m.position[j][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),e.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var N=e.mallocUint8(this.count),U=e.mallocFloat(2*this.count);this.textWidth=[];for(var J=0,Y=0;J<this.counts.length;J++){for(var q=this.counts[J],H=this.font[J]||this.font[0],X=this.fontAtlas[J]||this.fontAtlas[0],Q=0;Q<q;Q++){var ne=this.text.charAt(Y),re=this.text.charAt(Y-1);if(N[Y]=X.ids[ne],U[2*Y]=H.width[ne],Q){var pe=U[2*Y-1]+.5*U[2*Y-2]+.5*U[2*Y];if(this.kerning){var ke=H.kerning[re+ne];ke&&(pe+=.001*ke)}U[2*Y+1]=pe}else U[2*Y+1]=.5*U[2*Y];Y++}this.textWidth.push(U.length?.5*U[2*Y-2]+U[2*Y-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:N,type:"uint8",usage:"stream"}),this.sizeBuffer({data:U,type:"float",usage:"stream"}),e.freeUint8(N),e.freeFloat(U),u.length&&this.font.forEach(function(K,oe){var he=w.fontAtlas[oe],ye=he.step,Me=Math.floor(d.maxAtlasSize/ye),Re=Math.min(Me,he.chars.length),Pe=Math.ceil(he.chars.length/Re),De=b(Re*ye),fe=b(Pe*ye);he.width=De,he.height=fe,he.rows=Pe,he.cols=Re,he.em&&he.texture({data:s({canvas:d.atlasCanvas,font:he.fontString,chars:he.chars,shape:[De,fe],step:[ye,ye]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(K,oe){var he=Array.isArray(w.align)?w.align.length>1?w.align[oe]:w.align[0]:w.align;if("number"==typeof he)return he;switch(he){case"right":case"end":return-K;case"center":case"centre":case"middle":return.5*-K}return 0})),null==this.baseline&&null==m.baseline&&(m.baseline=0),null!=m.baseline&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(K,oe){var he=(w.font[oe]||w.font[0]).metrics,ye=0;return-1*((ye+=.5*he.bottom)+("number"==typeof K?K-he.baseline:-he[K]))})),null!=m.color)if(m.color||(m.color="transparent"),"string"!=typeof m.color&&isNaN(m.color)){var me;if("number"==typeof m.color[0]&&m.color.length>this.counts.length){var le=m.color.length;me=e.mallocUint8(le);for(var ue=(m.color.subarray||m.color.slice).bind(m.color),Ee=0;Ee<le;Ee+=4)me.set(p(ue(Ee,Ee+4),"uint8"),Ee)}else{var de=m.color.length;me=e.mallocUint8(4*de);for(var xe=0;xe<de;xe++)me.set(p(m.color[xe]||0,"uint8"),4*xe)}this.color=me}else this.color=p(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Te=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Te);for(var we=0;we<this.batch.length;we++)this.batch[we]={count:this.counts.length>1?this.counts[we]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[we]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*we,4*we+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[we]:this.opacity,baseline:null!=this.baselineOffset[we]?this.baselineOffset[we]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[we]?this.alignOffset[we]:this.alignOffset[0]:0,atlas:this.fontAtlas[we]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*we,2*we+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},d.prototype.destroy=function(){},d.prototype.kerning=!0,d.prototype.position={constant:new Float32Array(2)},d.prototype.translate=null,d.prototype.scale=null,d.prototype.font=null,d.prototype.text="",d.prototype.positionOffset=[0,0],d.prototype.opacity=1,d.prototype.color=new Uint8Array([0,0,0,255]),d.prototype.alignOffset=[0,0],d.maxAtlasSize=1024,d.atlasCanvas=document.createElement("canvas"),d.atlasContext=d.atlasCanvas.getContext("2d",{alpha:!1}),d.baseFontSize=64,d.fonts={},$.exports=d},12018:function($,I,t){"use strict";var M=t(71299);function k(x){if(x.container)if(x.container==document.body)document.body.style.width||(x.canvas.width=x.width||x.pixelRatio*t.g.innerWidth),document.body.style.height||(x.canvas.height=x.height||x.pixelRatio*t.g.innerHeight);else{var p=x.container.getBoundingClientRect();x.canvas.width=x.width||p.right-p.left,x.canvas.height=x.height||p.bottom-p.top}}function l(x){return"function"==typeof x.getContext&&"width"in x&&"height"in x}function T(){var x=document.createElement("canvas");return x.style.position="absolute",x.style.top=0,x.style.left=0,x}$.exports=function(x){var p,e;if(x?"string"==typeof x&&(x={container:x}):x={},(x=l(x)||"string"==typeof(p=x).nodeName&&"function"==typeof p.appendChild&&"function"==typeof p.getBoundingClientRect?{container:x}:(e=x,"function"==typeof e.drawArrays||"function"==typeof e.drawElements?{gl:x}:M(x,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0))).pixelRatio||(x.pixelRatio=t.g.pixelRatio||1),x.gl)return x.gl;if(x.canvas&&(x.container=x.canvas.parentNode),x.container){if("string"==typeof x.container){var s=document.querySelector(x.container);if(!s)throw Error("Element "+x.container+" is not found");x.container=s}l(x.container)?(x.canvas=x.container,x.container=x.canvas.parentNode):x.canvas||(x.canvas=T(),x.container.appendChild(x.canvas),k(x))}else if(!x.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");x.container=document.body||document.documentElement,x.canvas=T(),x.container.appendChild(x.canvas),k(x)}return x.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(e){try{x.gl=x.canvas.getContext(e,x.attrs)}catch{}return x.gl}),x.gl}},56068:function($){$.exports=function(I){"string"==typeof I&&(I=[I]);for(var t=[].slice.call(arguments,1),M=[],k=0;k<I.length-1;k++)M.push(I[k],t[k]||"");return M.push(I[k]),M.join("")}},40383:function($,I,t){"use strict";var M=t(68318)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}$.exports=M},57035:function($,I,t){"use strict";var M,k=t(54404);M="function"==typeof t.g.matchMedia?!t.g.matchMedia("(hover: none)").matches:k,$.exports=M},38520:function($,I,t){"use strict";var M=t(54404);$.exports=M&&function(){var k=!1;try{var l=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{k=!1}return k}()},55622:function($,I,t){"use strict";var M=t(68318)("%Object.defineProperty%",!0),k=function(){if(M)try{return M({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return 1!==M([],"length",{value:1}).length}catch{return!0}},$.exports=k},57877:function($,I,t){"use strict";var M=typeof Symbol<"u"&&Symbol,k=t(35638);$.exports=function(){return"function"==typeof M&&"function"==typeof Symbol&&"symbol"==typeof M("foo")&&"symbol"==typeof Symbol("bar")&&k()}},35638:function($){"use strict";$.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var I={},t=Symbol("test"),M=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(M))return!1;for(t in I[t]=42,I)return!1;if("function"==typeof Object.keys&&0!==Object.keys(I).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(I).length)return!1;var k=Object.getOwnPropertySymbols(I);if(1!==k.length||k[0]!==t||!Object.prototype.propertyIsEnumerable.call(I,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(I,t);if(42!==l.value||!0!==l.enumerable)return!1}return!0}},84543:function($,I,t){"use strict";var M=t(35638);$.exports=function(){return M()&&!!Symbol.toStringTag}},35065:function($,I,t){"use strict";var M=t(77575);$.exports=M.call(Function.call,Object.prototype.hasOwnProperty)},95280:function($,I){I.read=function(t,M,k,l,T){var x,p,s=8*T-l-1,e=(1<<s)-1,o=e>>1,r=-7,n=k?T-1:0,a=k?-1:1,i=t[M+n];for(n+=a,x=i&(1<<-r)-1,i>>=-r,r+=s;r>0;x=256*x+t[M+n],n+=a,r-=8);for(p=x&(1<<-r)-1,x>>=-r,r+=l;r>0;p=256*p+t[M+n],n+=a,r-=8);if(0===x)x=1-o;else{if(x===e)return p?NaN:1/0*(i?-1:1);p+=Math.pow(2,l),x-=o}return(i?-1:1)*p*Math.pow(2,x-l)},I.write=function(t,M,k,l,T,x){var p,s,e,o=8*x-T-1,r=(1<<o)-1,n=r>>1,a=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,i=l?0:x-1,c=l?1:-1,h=M<0||0===M&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(s=isNaN(M)?1:0,p=r):(p=Math.floor(Math.log(M)/Math.LN2),M*(e=Math.pow(2,-p))<1&&(p--,e*=2),(M+=p+n>=1?a/e:a*Math.pow(2,1-n))*e>=2&&(p++,e/=2),p+n>=r?(s=0,p=r):p+n>=1?(s=(M*e-1)*Math.pow(2,T),p+=n):(s=M*Math.pow(2,n-1)*Math.pow(2,T),p=0));T>=8;t[k+i]=255&s,i+=c,s/=256,T-=8);for(p=p<<T|s,o+=T;o>0;t[k+i]=255&p,i+=c,p/=256,o-=8);t[k+i-c]|=128*h}},42018:function($){$.exports="function"==typeof Object.create?function(I,t){t&&(I.super_=t,I.prototype=Object.create(t.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}))}:function(I,t){if(t){I.super_=t;var M=function(){};M.prototype=t.prototype,I.prototype=new M,I.prototype.constructor=I}}},47216:function($,I,t){"use strict";var M=t(84543)(),k=t(6614)("Object.prototype.toString"),l=function(p){return!(M&&p&&"object"==typeof p&&Symbol.toStringTag in p)&&"[object Arguments]"===k(p)},T=function(p){return!!l(p)||null!==p&&"object"==typeof p&&"number"==typeof p.length&&p.length>=0&&"[object Array]"!==k(p)&&"[object Function]"===k(p.callee)},x=function(){return l(arguments)}();l.isLegacyArguments=T,$.exports=x?l:T},54404:function($){$.exports=!0},85395:function($){"use strict";var I,t,M=Function.prototype.toString,k="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof k&&"function"==typeof Object.defineProperty)try{I=Object.defineProperty({},"length",{get:function(){throw t}}),t={},k(function(){throw 42},null,I)}catch(n){n!==t&&(k=null)}else k=null;var l=/^\s*class\b/,T=function(n){try{var a=M.call(n);return l.test(a)}catch{return!1}},x=function(n){try{return!T(n)&&(M.call(n),!0)}catch{return!1}},p=Object.prototype.toString,s="function"==typeof Symbol&&!!Symbol.toStringTag,e=!(0 in[,]),o=function(){return!1};if("object"==typeof document){var r=document.all;p.call(r)===p.call(document.all)&&(o=function(n){if((e||!n)&&(void 0===n||"object"==typeof n))try{var a=p.call(n);return("[object HTMLAllCollection]"===a||"[object HTML document.all class]"===a||"[object HTMLCollection]"===a||"[object Object]"===a)&&null==n("")}catch{}return!1})}$.exports=k?function(n){if(o(n))return!0;if(!n||"function"!=typeof n&&"object"!=typeof n)return!1;try{k(n,null,I)}catch(a){if(a!==t)return!1}return!T(n)&&x(n)}:function(n){if(o(n))return!0;if(!n||"function"!=typeof n&&"object"!=typeof n)return!1;if(s)return x(n);if(T(n))return!1;var a=p.call(n);return!("[object Function]"!==a&&"[object GeneratorFunction]"!==a&&!/^\[object HTML/.test(a))&&x(n)}},65481:function($,I,t){"use strict";var M,k=Object.prototype.toString,l=Function.prototype.toString,T=/^\s*(?:function)?\*/,x=t(84543)(),p=Object.getPrototypeOf;$.exports=function(s){if("function"!=typeof s)return!1;if(T.test(l.call(s)))return!0;if(!x)return"[object GeneratorFunction]"===k.call(s);if(!p)return!1;if(void 0===M){var e=function(){if(!x)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!e&&p(e)}return p(s)===M}},62683:function($){"use strict";$.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function($){"use strict";$.exports=function(I){return I!=I}},15567:function($,I,t){"use strict";var M=t(68222),k=t(17045),l=t(64274),T=t(14922),x=t(22442),p=M(T(),Number);k(p,{getPolyfill:T,implementation:l,shim:x}),$.exports=p},14922:function($,I,t){"use strict";var M=t(64274);$.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},22442:function($,I,t){"use strict";var M=t(17045),k=t(14922);$.exports=function(){var l=k();return M(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function($){"use strict";$.exports=function(I){var t=typeof I;return null!==I&&("object"===t||"function"===t)}},10973:function($){"use strict";var I=Object.prototype.toString;$.exports=function(t){var M;return"[object Object]"===I.call(t)&&(null===(M=Object.getPrototypeOf(t))||M===Object.getPrototypeOf({}))}},18546:function($){"use strict";$.exports=function(I){for(var t,M=I.length,k=0;k<M;k++)if(((t=I.charCodeAt(k))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},89546:function($){"use strict";$.exports=function(I){return"string"==typeof I&&(I=I.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(I)&&/[\dz]$/i.test(I)&&I.length>4))}},9187:function($,I,t){"use strict";var M=t(31353),k=t(72077),l=t(6614),T=l("Object.prototype.toString"),x=t(84543)(),p=t(40383),s=typeof globalThis>"u"?t.g:globalThis,e=k(),o=l("Array.prototype.indexOf",!0)||function(i,c){for(var h=0;h<i.length;h+=1)if(i[h]===c)return h;return-1},r=l("String.prototype.slice"),n={},a=Object.getPrototypeOf;x&&p&&a&&M(e,function(i){var c=new s[i];if(Symbol.toStringTag in c){var h=a(c),f=p(h,Symbol.toStringTag);if(!f){var b=a(h);f=p(b,Symbol.toStringTag)}n[i]=f.get}}),$.exports=function(i){if(!i||"object"!=typeof i)return!1;if(!x||!(Symbol.toStringTag in i)){var c=r(T(i),8,-1);return o(e,c)>-1}return!!p&&(h=i,f=!1,M(n,function(b,v){if(!f)try{f=b.call(h)===v}catch{}}),f);var h,f}},44517:function($){$.exports=function(){"use strict";var I,t,M;function k(l,T){if(I)if(t){var x="var sharedChunk = {}; ("+I+")(sharedChunk); ("+t+")(sharedChunk);",p={};I(p),(M=T(p)).workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))}else t=T;else I=T}return k(0,function(l){function T(A,O){return A(O={exports:{}},O.exports),O.exports}var x="1.10.1",p=s;function s(A,O,Z,ie){this.cx=3*A,this.bx=3*(Z-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ie-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=ie,this.p2x=Z,this.p2y=ie}s.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},s.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},s.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},s.prototype.solveCurveX=function(A,O){var Z,ie,_e,Le,je;for(void 0===O&&(O=1e-6),_e=A,je=0;je<8;je++){if(Le=this.sampleCurveX(_e)-A,Math.abs(Le)<O)return _e;var Qe=this.sampleCurveDerivativeX(_e);if(Math.abs(Qe)<1e-6)break;_e-=Le/Qe}if((_e=A)<(Z=0))return Z;if(_e>(ie=1))return ie;for(;Z<ie;){if(Le=this.sampleCurveX(_e),Math.abs(Le-A)<O)return _e;A>Le?Z=_e:ie=_e,_e=.5*(ie-Z)+Z}return _e},s.prototype.solve=function(A,O){return this.sampleCurveY(this.solveCurveX(A,O))};var e=o;function o(A,O){this.x=A,this.y=O}function r(A,O,Z,ie){var _e=new p(A,O,Z,ie);return function(Le){return _e.solve(Le)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,O){return this.clone()._rotateAround(A,O)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var O=A.x-this.x,Z=A.y-this.y;return O*O+Z*Z},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,O){return Math.atan2(this.x*O-this.y*A,this.x*A+this.y*O)},_matMult:function(A){var Z=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=Z,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var O=Math.cos(A),Z=Math.sin(A),_e=Z*this.x+O*this.y;return this.x=O*this.x-Z*this.y,this.y=_e,this},_rotateAround:function(A,O){var Z=Math.cos(A),ie=Math.sin(A),Le=O.y+ie*(this.x-O.x)+Z*(this.y-O.y);return this.x=O.x+Z*(this.x-O.x)-ie*(this.y-O.y),this.y=Le,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(A){return A instanceof o?A:Array.isArray(A)?new o(A[0],A[1]):A};var n=r(.25,.1,.25,1);function a(A,O,Z){return Math.min(Z,Math.max(O,A))}function i(A,O,Z){var ie=Z-O,_e=((A-O)%ie+ie)%ie+O;return _e===O?Z:_e}function c(A){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ie=0,_e=O;ie<_e.length;ie+=1){var Le=_e[ie];for(var je in Le)A[je]=Le[je]}return A}var h=1;function f(){return h++}function b(){return function A(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function v(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function g(A,O){A.forEach(function(Z){O[Z]&&(O[Z]=O[Z].bind(O))})}function y(A,O){return-1!==A.indexOf(O,A.length-O.length)}function d(A,O,Z){var ie={};for(var _e in A)ie[_e]=O.call(Z||this,A[_e],_e,A);return ie}function m(A,O,Z){var ie={};for(var _e in A)O.call(Z||this,A[_e],_e,A)&&(ie[_e]=A[_e]);return ie}function w(A){return Array.isArray(A)?A.map(w):"object"==typeof A&&A?d(A,w):A}var u={};function S(A){u[A]||(typeof console<"u"&&console.warn(A),u[A]=!0)}function _(A,O,Z){return(Z.y-A.y)*(O.x-A.x)>(O.y-A.y)*(Z.x-A.x)}function E(A){for(var O=0,Z=0,ie=A.length,_e=ie-1,Le=void 0,je=void 0;Z<ie;_e=Z++)O+=((je=A[_e]).x-(Le=A[Z]).x)*(Le.y+je.y);return O}function L(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function C(A){var O={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ie,_e,Le,je){var Qe=Le||je;return O[_e]=!Qe||Qe.toLowerCase(),""}),O["max-age"]){var Z=parseInt(O["max-age"],10);isNaN(Z)?delete O["max-age"]:O["max-age"]=Z}return O}var P=null;function z(A){if(null==P){var O=A.navigator?A.navigator.userAgent:null;P=!!A.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return P}function j(A){try{var O=self[A];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var R,V,D,B,N=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),U=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,J=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Y={now:N,frame:function(A){var O=U(A);return{cancel:function(){return J(O)}}},getImageData:function(A,O){void 0===O&&(O=0);var Z=self.document.createElement("canvas"),ie=Z.getContext("2d");if(!ie)throw new Error("failed to create canvas 2d context");return Z.width=A.width,Z.height=A.height,ie.drawImage(A,0,0,A.width,A.height),ie.getImageData(-O,-O,A.width+2*O,A.height+2*O)},resolveURL:function(A){return R||(R=self.document.createElement("a")),R.href=A,R.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==V&&(V=self.matchMedia("(prefers-reduced-motion: reduce)")),V.matches)}},q={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},H={supported:!1,testSupport:function(A){!X&&B&&(Q?ne(A):D=A)}},X=!1,Q=!1;function ne(A){var O=A.createTexture();A.bindTexture(A.TEXTURE_2D,O);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,B),A.isContextLost())return;H.supported=!0}catch{}A.deleteTexture(O),X=!0}self.document&&((B=self.document.createElement("img")).onload=function(){D&&ne(D),D=null,Q=!0},B.onerror=function(){X=!0,D=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ae=function(A,O){this._transformRequestFn=A,this._customAccessToken=O,this._createSkuToken()};function se(A){return 0===A.indexOf("mapbox:")}ae.prototype._createSkuToken=function(){var A=function(){for(var O="",Z=0;Z<10;Z++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},ae.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ae.prototype.transformRequest=function(A,O){return this._transformRequestFn&&this._transformRequestFn(A,O)||{url:A}},ae.prototype.normalizeStyleURL=function(A,O){if(!se(A))return A;var Z=le(A);return Z.path="/styles/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ae.prototype.normalizeGlyphsURL=function(A,O){if(!se(A))return A;var Z=le(A);return Z.path="/fonts/v1"+Z.path,this._makeAPIURL(Z,this._customAccessToken||O)},ae.prototype.normalizeSourceURL=function(A,O){if(!se(A))return A;var Z=le(A);return Z.path="/v4/"+Z.authority+".json",Z.params.push("secure"),this._makeAPIURL(Z,this._customAccessToken||O)},ae.prototype.normalizeSpriteURL=function(A,O,Z,ie){var _e=le(A);return se(A)?(_e.path="/styles/v1"+_e.path+"/sprite"+O+Z,this._makeAPIURL(_e,this._customAccessToken||ie)):(_e.path+=""+O+Z,ue(_e))},ae.prototype.normalizeTileURL=function(A,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!se(A))return A;var Z=le(A);Z.path=Z.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Y.devicePixelRatio>=2||512===O?"@2x":"")+(H.supported?".webp":"$1")),Z.path=Z.path.replace(/^.+\/v4\//,"/"),Z.path="/v4"+Z.path;var Le=this._customAccessToken||function(je){for(var Qe=0,lt=je;Qe<lt.length;Qe+=1){var Tt=lt[Qe].match(/^access_token=(.*)$/);if(Tt)return Tt[1]}return null}(Z.params)||q.ACCESS_TOKEN;return q.REQUIRE_ACCESS_TOKEN&&Le&&this._skuToken&&Z.params.push("sku="+this._skuToken),this._makeAPIURL(Z,Le)},ae.prototype.canonicalizeTileURL=function(A,O){var Z=le(A);if(!Z.path.match(/(^\/v4\/)/)||!Z.path.match(/\.[\w]+$/))return A;var ie="mapbox://tiles/";ie+=Z.path.replace("/v4/","");var _e=Z.params;return O&&(_e=_e.filter(function(Le){return!Le.match(/^access_token=/)})),_e.length&&(ie+="?"+_e.join("&")),ie},ae.prototype.canonicalizeTileset=function(A,O){for(var Z=!!O&&se(O),ie=[],_e=0,Le=A.tiles||[];_e<Le.length;_e+=1){var je=Le[_e];ke(je)?ie.push(this.canonicalizeTileURL(je,Z)):ie.push(je)}return ie},ae.prototype._makeAPIURL=function(A,O){var Z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ie=le(q.API_URL);if(A.protocol=ie.protocol,A.authority=ie.authority,"/"!==ie.path&&(A.path=""+ie.path+A.path),!q.REQUIRE_ACCESS_TOKEN)return ue(A);if(!(O=O||q.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Z);if("s"===O[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Z);return A.params=A.params.filter(function(_e){return-1===_e.indexOf("access_token")}),A.params.push("access_token="+O),ue(A)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ke(A){return pe.test(A)}var me=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function le(A){var O=A.match(me);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function ue(A){var O=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+O}var Ee="mapbox.eventData";function de(A){if(!A)return null;var Z=A.split(".");if(!Z||3!==Z.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(Z[1]).split("").map(function(ie){return"%"+("00"+ie.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var xe=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};xe.prototype.getStorageKey=function(A){var O,ie=de(q.ACCESS_TOKEN);return O=ie&&ie.u?self.btoa(encodeURIComponent(ie.u).replace(/%([0-9A-F]{2})/g,function(_e,Le){return String.fromCharCode(Number("0x"+Le))})):q.ACCESS_TOKEN||"",A?Ee+"."+A+":"+O:Ee+":"+O},xe.prototype.fetchEventData=function(){var A=j("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(A)try{var ie=self.localStorage.getItem(O);ie&&(this.eventData=JSON.parse(ie));var _e=self.localStorage.getItem(Z);_e&&(this.anonId=_e)}catch{S("Unable to read from LocalStorage")}},xe.prototype.saveEventData=function(){var A=j("localStorage"),O=this.getStorageKey(),Z=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem(Z,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},xe.prototype.processRequests=function(A){},xe.prototype.postEvent=function(A,O,Z,ie){var _e=this;if(q.EVENTS_URL){var Le=le(q.EVENTS_URL);Le.params.push("access_token="+(ie||q.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:re,userId:this.anonId},Qe=O?c(je,O):je,lt={url:ue(Le),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Qe])};this.pendingRequest=St(lt,function(Tt){_e.pendingRequest=null,Z(Tt),_e.saveEventData(),_e.processRequests(ie)})}},xe.prototype.queueRequest=function(A,O){this.queue.push(A),this.processRequests(O)};var Te,we,K=function(A){function O(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.postMapLoadEvent=function(Z,ie,_e,Le){this.skuToken=_e,(q.EVENTS_URL&&Le||q.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(je){return se(je)||ke(je)}))&&this.queueRequest({id:ie,timestamp:Date.now()},Le)},O.prototype.processRequests=function(Z){var ie=this;if(!this.pendingRequest&&0!==this.queue.length){var _e=this.queue.shift(),Le=_e.id,je=_e.timestamp;Le&&this.success[Le]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=b()),this.postEvent(je,{skuToken:this.skuToken},function(Qe){Qe||Le&&(ie.success[Le]=!0)},Z))}},O}(xe),oe=function(A){function O(Z){A.call(this,"appUserTurnstile"),this._customAccessToken=Z}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.postTurnstileEvent=function(Z,ie){q.EVENTS_URL&&q.ACCESS_TOKEN&&Array.isArray(Z)&&Z.some(function(_e){return se(_e)||ke(_e)})&&this.queueRequest(Date.now(),ie)},O.prototype.processRequests=function(Z){var ie=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var _e=de(q.ACCESS_TOKEN),Le=_e?_e.u:q.ACCESS_TOKEN,je=Le!==this.eventData.tokenU;v(this.anonId)||(this.anonId=b(),je=!0);var Qe=this.queue.shift();if(this.eventData.lastSuccess){var lt=new Date(this.eventData.lastSuccess),Tt=new Date(Qe),Mt=(Qe-this.eventData.lastSuccess)/864e5;je=je||Mt>=1||Mt<-1||lt.getDate()!==Tt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent(Qe,{"enabled.telemetry":!1},function(Bt){Bt||(ie.eventData.lastSuccess=Qe,ie.eventData.tokenU=Le)},Z)}},O}(xe),he=new oe,ye=he.postTurnstileEvent.bind(he),Me=new K,Re=Me.postMapLoadEvent.bind(Me),Pe="mapbox-tiles",De=500,fe=50;function ge(){self.caches&&!Te&&(Te=self.caches.open(Pe))}function Ie(A){var O=A.indexOf("?");return O<0?A:A.slice(0,O)}var Ve,tt=1/0;function nt(){return null==Ve&&(Ve=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ve}var st={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(st);var dt=function(A){function O(Z,ie,_e){401===ie&&ke(_e)&&(Z+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,Z),this.status=ie,this.url=_e,this.name=this.constructor.name,this.message=Z}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),wt=L()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function _t(A,O){var Z,ie=new self.AbortController,_e=new self.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:wt(),signal:ie.signal}),Le=!1,je=!1,Qe=(Z=_e.url).indexOf("sku=")>0&&ke(Z);"json"===A.type&&_e.headers.set("Accept","application/json");var lt=function(Mt,Bt,Ht){if(!je){if(Mt&&"SecurityError"!==Mt.message&&S(Mt),Bt&&Ht)return Tt(Bt);var Vt=Date.now();self.fetch(_e).then(function(an){if(an.ok){var yn=Qe?an.clone():null;return Tt(an,yn,Vt)}return O(new dt(an.statusText,an.status,A.url))}).catch(function(an){20!==an.code&&O(new Error(an.message))})}},Tt=function(Mt,Bt,Ht){("arrayBuffer"===A.type?Mt.arrayBuffer():"json"===A.type?Mt.json():Mt.text()).then(function(Vt){je||(Bt&&Ht&&function be(A,O,Z){if(ge(),Te){var ie={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(Le,je){return ie.headers.set(je,Le)});var _e=C(O.headers.get("Cache-Control")||"");_e["no-store"]||(_e["max-age"]&&ie.headers.set("Expires",new Date(Z+1e3*_e["max-age"]).toUTCString()),new Date(ie.headers.get("Expires")).getTime()-Z<42e4||function(Le,je){if(void 0===we)try{new Response(new ReadableStream),we=!0}catch{we=!1}we?je(Le.body):Le.blob().then(je)}(O,function(Le){var je=new self.Response(Le,ie);ge(),Te&&Te.then(function(Qe){return Qe.put(Ie(A.url),je)}).catch(function(Qe){return S(Qe.message)})}))}}(_e,Bt,Ht),Le=!0,O(null,Vt,Mt.headers.get("Cache-Control"),Mt.headers.get("Expires")))}).catch(function(Vt){je||O(new Error(Vt.message))})};return Qe?function He(A,O){if(ge(),!Te)return O(null);var Z=Ie(A.url);Te.then(function(ie){ie.match(Z).then(function(_e){var Le=function(je){if(!je)return!1;var Qe=new Date(je.headers.get("Expires")||0),lt=C(je.headers.get("Cache-Control")||"");return Qe>Date.now()&&!lt["no-cache"]}(_e);ie.delete(Z),Le&&ie.put(Z,_e.clone()),O(null,_e,Le)}).catch(O)}).catch(O)}(_e,lt):lt(null,null),{cancel:function(){je=!0,Le||ie.abort()}}}var Ot,jt,pt=function(A,O){if(!(/^file:/.test(Z=A.url)||/^file:/.test(wt())&&!/^\w+:/.test(Z))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return _t(A,O);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,O,void 0,!0)}var Z;return function(ie,_e){var Le=new self.XMLHttpRequest;for(var je in Le.open(ie.method||"GET",ie.url,!0),"arrayBuffer"===ie.type&&(Le.responseType="arraybuffer"),ie.headers)Le.setRequestHeader(je,ie.headers[je]);return"json"===ie.type&&(Le.responseType="text",Le.setRequestHeader("Accept","application/json")),Le.withCredentials="include"===ie.credentials,Le.onerror=function(){_e(new Error(Le.statusText))},Le.onload=function(){if((Le.status>=200&&Le.status<300||0===Le.status)&&null!==Le.response){var Qe=Le.response;if("json"===ie.type)try{Qe=JSON.parse(Le.response)}catch(lt){return _e(lt)}_e(null,Qe,Le.getResponseHeader("Cache-Control"),Le.getResponseHeader("Expires"))}else _e(new dt(Le.statusText,Le.status,ie.url))},Le.send(ie.body),{cancel:function(){return Le.abort()}}}(A,O)},Pt=function(A,O){return pt(c(A,{type:"arrayBuffer"}),O)},St=function(A,O){return pt(c(A,{method:"POST"}),O)};Ot=[],jt=0;var Dt=function(A,O){if(H.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),jt>=q.MAX_PARALLEL_IMAGE_REQUESTS){var Z={requestParameters:A,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ot.push(Z),Z}jt++;var ie=!1,_e=function(){if(!ie)for(ie=!0,jt--;Ot.length&&jt<q.MAX_PARALLEL_IMAGE_REQUESTS;){var je=Ot.shift();je.cancelled||(je.cancel=Dt(je.requestParameters,je.callback).cancel)}},Le=Pt(A,function(je,Qe,lt,Tt){var Bt,Ht;_e(),je?O(je):Qe&&(nt()?(Bt=O,Ht=new self.Blob([new Uint8Array(Qe)],{type:"image/png"}),self.createImageBitmap(Ht).then(function(Vt){Bt(null,Vt)}).catch(function(Vt){Bt(new Error("Could not load image because of "+Vt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Mt,Bt,Ht,Vt){var an=new self.Image,yn=self.URL;an.onload=function(){Bt(null,an),yn.revokeObjectURL(an.src)},an.onerror=function(){return Bt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var On=new self.Blob([new Uint8Array(Mt)],{type:"image/png"});an.cacheControl=Ht,an.expires=Vt,an.src=Mt.byteLength?yn.createObjectURL(On):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Qe,O,lt,Tt))});return{cancel:function(){Le.cancel(),_e()}}};function Ye(A,O,Z){Z[A]&&-1!==Z[A].indexOf(O)||(Z[A]=Z[A]||[],Z[A].push(O))}function Ze(A,O,Z){if(Z&&Z[A]){var ie=Z[A].indexOf(O);-1!==ie&&Z[A].splice(ie,1)}}var Ne=function(A,O){void 0===O&&(O={}),c(this,O),this.type=A},Je=function(A){function O(Z,ie){void 0===ie&&(ie={}),A.call(this,"error",c({error:Z},ie))}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(Ne),at=function(){};at.prototype.on=function(A,O){return this._listeners=this._listeners||{},Ye(A,O,this._listeners),this},at.prototype.off=function(A,O){return Ze(A,O,this._listeners),Ze(A,O,this._oneTimeListeners),this},at.prototype.once=function(A,O){return this._oneTimeListeners=this._oneTimeListeners||{},Ye(A,O,this._oneTimeListeners),this},at.prototype.fire=function(A,O){"string"==typeof A&&(A=new Ne(A,O||{}));var Z=A.type;if(this.listens(Z)){A.target=this;for(var ie=0,_e=this._listeners&&this._listeners[Z]?this._listeners[Z].slice():[];ie<_e.length;ie+=1)_e[ie].call(this,A);for(var Le=0,je=this._oneTimeListeners&&this._oneTimeListeners[Z]?this._oneTimeListeners[Z].slice():[];Le<je.length;Le+=1){var Qe=je[Le];Ze(Z,Qe,this._oneTimeListeners),Qe.call(this,A)}var lt=this._eventedParent;lt&&(c(A,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),lt.fire(A))}else A instanceof Je&&console.error(A.error);return this},at.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},at.prototype.setEventedParent=function(A,O){return this._eventedParent=A,this._eventedParentData=O,this};var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ze=function(A,O,Z,ie){this.message=(A?A+": ":"")+Z,ie&&(this.identifier=ie),null!=O&&O.__line__&&(this.line=O.__line__)};function Ke(A){var Z=A.value;return Z?[new ze(A.key,Z,"constants have been deprecated as of v8")]:[]}function it(A){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];for(var ie=0,_e=O;ie<_e.length;ie+=1){var Le=_e[ie];for(var je in Le)A[je]=Le[je]}return A}function ct(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function mt(A){if(Array.isArray(A))return A.map(mt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var O={};for(var Z in A)O[Z]=mt(A[Z]);return O}return ct(A)}var Lt=function(A){function O(Z,ie){A.call(this,ie),this.message=ie,this.key=Z}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(Error),At=function(A,O){void 0===O&&(O=[]),this.parent=A,this.bindings={};for(var Z=0,ie=O;Z<ie.length;Z+=1){var _e=ie[Z];this.bindings[_e[0]]=_e[1]}};At.prototype.concat=function(A){return new At(this,A)},At.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},At.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var ht={kind:"null"},Et={kind:"number"},gt={kind:"string"},kt={kind:"boolean"},It={kind:"color"},Ut={kind:"object"},Nt={kind:"value"},qt={kind:"collator"},Xt={kind:"formatted"},Kt={kind:"resolvedImage"};function fn(A,O){return{kind:"array",itemType:A,N:O}}function nn(A){if("array"===A.kind){var O=nn(A.itemType);return"number"==typeof A.N?"array<"+O+", "+A.N+">":"value"===A.itemType.kind?"array":"array<"+O+">"}return A.kind}var xn=[ht,Et,gt,kt,It,Xt,Ut,fn(Nt),Kt];function jn(A,O){if("error"===O.kind)return null;if("array"===A.kind){if("array"===O.kind&&(0===O.N&&"value"===O.itemType.kind||!jn(A.itemType,O.itemType))&&("number"!=typeof A.N||A.N===O.N))return null}else{if(A.kind===O.kind)return null;if("value"===A.kind)for(var Z=0,ie=xn;Z<ie.length;Z+=1)if(!jn(ie[Z],O))return null}return"Expected "+nn(A)+" but found "+nn(O)+" instead."}function mn(A,O){return O.some(function(Z){return Z.kind===A.kind})}function en(A,O){return O.some(function(Z){return"null"===Z?null===A:"array"===Z?Array.isArray(A):"object"===Z?A&&!Array.isArray(A)&&"object"==typeof A:Z===typeof A})}var on=T(function(A,O){var Z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ie(lt){return(lt=Math.round(lt))<0?0:lt>255?255:lt}function Le(lt){return ie("%"===lt[lt.length-1]?parseFloat(lt)/100*255:parseInt(lt))}function je(lt){return function _e(lt){return lt<0?0:lt>1?1:lt}("%"===lt[lt.length-1]?parseFloat(lt)/100:parseFloat(lt))}function Qe(lt,Tt,Mt){return Mt<0?Mt+=1:Mt>1&&(Mt-=1),6*Mt<1?lt+(Tt-lt)*Mt*6:2*Mt<1?Tt:3*Mt<2?lt+(Tt-lt)*(2/3-Mt)*6:lt}try{O.parseCSSColor=function(lt){var Tt,Mt=lt.replace(/ /g,"").toLowerCase();if(Mt in Z)return Z[Mt].slice();if("#"===Mt[0])return 4===Mt.length?(Tt=parseInt(Mt.substr(1),16))>=0&&Tt<=4095?[(3840&Tt)>>4|(3840&Tt)>>8,240&Tt|(240&Tt)>>4,15&Tt|(15&Tt)<<4,1]:null:7===Mt.length&&(Tt=parseInt(Mt.substr(1),16))>=0&&Tt<=16777215?[(16711680&Tt)>>16,(65280&Tt)>>8,255&Tt,1]:null;var Bt=Mt.indexOf("("),Ht=Mt.indexOf(")");if(-1!==Bt&&Ht+1===Mt.length){var Vt=Mt.substr(0,Bt),an=Mt.substr(Bt+1,Ht-(Bt+1)).split(","),yn=1;switch(Vt){case"rgba":if(4!==an.length)return null;yn=je(an.pop());case"rgb":return 3!==an.length?null:[Le(an[0]),Le(an[1]),Le(an[2]),yn];case"hsla":if(4!==an.length)return null;yn=je(an.pop());case"hsl":if(3!==an.length)return null;var On=(parseFloat(an[0])%360+360)%360/360,Pn=je(an[1]),Nn=je(an[2]),Vn=Nn<=.5?Nn*(Pn+1):Nn+Pn-Nn*Pn,Zn=2*Nn-Vn;return[ie(255*Qe(Zn,Vn,On+1/3)),ie(255*Qe(Zn,Vn,On)),ie(255*Qe(Zn,Vn,On-1/3)),yn];default:return null}}return null}}catch{}}).parseCSSColor,sn=function(A,O,Z,ie){void 0===ie&&(ie=1),this.r=A,this.g=O,this.b=Z,this.a=ie};sn.parse=function(A){if(A){if(A instanceof sn)return A;if("string"==typeof A){var O=on(A);if(O)return new sn(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},sn.prototype.toString=function(){var A=this.toArray(),Z=A[1],ie=A[2],_e=A[3];return"rgba("+Math.round(A[0])+","+Math.round(Z)+","+Math.round(ie)+","+_e+")"},sn.prototype.toArray=function(){var A=this,_e=A.a;return 0===_e?[0,0,0,0]:[255*A.r/_e,255*A.g/_e,255*A.b/_e,_e]},sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);var En=function(A,O,Z){this.sensitivity=A?O?"variant":"case":O?"accent":"base",this.locale=Z,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};En.prototype.compare=function(A,O){return this.collator.compare(A,O)},En.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var kn=function(A,O,Z,ie,_e){this.text=A,this.image=O,this.scale=Z,this.fontStack=ie,this.textColor=_e},zn=function(A){this.sections=A};zn.fromString=function(A){return new zn([new kn(A,null,null,null,null)])},zn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(A){return 0!==A.text.length||A.image&&0!==A.image.name.length})},zn.factory=function(A){return A instanceof zn?A:zn.fromString(A)},zn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(A){return A.text}).join("")},zn.prototype.serialize=function(){for(var A=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ie=Z[O];if(ie.image)A.push(["image",ie.image.name]);else{A.push(ie.text);var _e={};ie.fontStack&&(_e["text-font"]=["literal",ie.fontStack.split(",")]),ie.scale&&(_e["font-scale"]=ie.scale),ie.textColor&&(_e["text-color"]=["rgba"].concat(ie.textColor.toArray())),A.push(_e)}}return A};var Fn=function(A){this.name=A.name,this.available=A.available};function Bn(A,O,Z,ie){return"number"==typeof A&&A>=0&&A<=255&&"number"==typeof O&&O>=0&&O<=255&&"number"==typeof Z&&Z>=0&&Z<=255?void 0===ie||"number"==typeof ie&&ie>=0&&ie<=1?null:"Invalid rgba value ["+[A,O,Z,ie].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ie?[A,O,Z,ie]:[A,O,Z]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function er(A){if(null===A||"string"==typeof A||"boolean"==typeof A||"number"==typeof A||A instanceof sn||A instanceof En||A instanceof zn||A instanceof Fn)return!0;if(Array.isArray(A)){for(var O=0,Z=A;O<Z.length;O+=1)if(!er(Z[O]))return!1;return!0}if("object"==typeof A){for(var ie in A)if(!er(A[ie]))return!1;return!0}return!1}function Xn(A){if(null===A)return ht;if("string"==typeof A)return gt;if("boolean"==typeof A)return kt;if("number"==typeof A)return Et;if(A instanceof sn)return It;if(A instanceof En)return qt;if(A instanceof zn)return Xt;if(A instanceof Fn)return Kt;if(Array.isArray(A)){for(var O,Z=A.length,ie=0,_e=A;ie<_e.length;ie+=1){var Le=Xn(_e[ie]);if(O){if(O===Le)continue;O=Nt;break}O=Le}return fn(O||Nt,Z)}return Ut}function mr(A){var O=typeof A;return null===A?"":"string"===O||"number"===O||"boolean"===O?String(A):A instanceof sn||A instanceof zn||A instanceof Fn?A.toString():JSON.stringify(A)}Fn.prototype.toString=function(){return this.name},Fn.fromString=function(A){return A?new Fn({name:A,available:!1}):null},Fn.prototype.serialize=function(){return["image",this.name]};var ur=function(A,O){this.type=A,this.value=O};ur.parse=function(A,O){if(2!==A.length)return O.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!er(A[1]))return O.error("invalid value");var Z=A[1],ie=Xn(Z),_e=O.expectedType;return"array"!==ie.kind||0!==ie.N||!_e||"array"!==_e.kind||"number"==typeof _e.N&&0!==_e.N||(ie=_e),new ur(ie,Z)},ur.prototype.evaluate=function(){return this.value},ur.prototype.eachChild=function(){},ur.prototype.outputDefined=function(){return!0},ur.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof sn?["rgba"].concat(this.value.toArray()):this.value instanceof zn?this.value.serialize():this.value};var $n=function(A){this.name="ExpressionEvaluationError",this.message=A};$n.prototype.toJSON=function(){return this.message};var lr={string:gt,number:Et,boolean:kt,object:Ut},hr=function(A,O){this.type=A,this.args=O};hr.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var Z,ie=1,_e=A[0];if("array"===_e){var Le,je;if(A.length>2){var Qe=A[1];if("string"!=typeof Qe||!(Qe in lr)||"object"===Qe)return O.error('The item type argument of "array" must be one of string, number, boolean',1);Le=lr[Qe],ie++}else Le=Nt;if(A.length>3){if(null!==A[2]&&("number"!=typeof A[2]||A[2]<0||A[2]!==Math.floor(A[2])))return O.error('The length argument to "array" must be a positive integer literal',2);je=A[2],ie++}Z=fn(Le,je)}else Z=lr[_e];for(var lt=[];ie<A.length;ie++){var Tt=O.parse(A[ie],ie,Nt);if(!Tt)return null;lt.push(Tt)}return new hr(Z,lt)},hr.prototype.evaluate=function(A){for(var O=0;O<this.args.length;O++){var Z=this.args[O].evaluate(A);if(!jn(this.type,Xn(Z)))return Z;if(O===this.args.length-1)throw new $n("Expected value to be of type "+nn(this.type)+", but found "+nn(Xn(Z))+" instead.")}return null},hr.prototype.eachChild=function(A){this.args.forEach(A)},hr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},hr.prototype.serialize=function(){var A=this.type,O=[A.kind];if("array"===A.kind){var Z=A.itemType;if("string"===Z.kind||"number"===Z.kind||"boolean"===Z.kind){O.push(Z.kind);var ie=A.N;("number"==typeof ie||this.args.length>1)&&O.push(ie)}}return O.concat(this.args.map(function(_e){return _e.serialize()}))};var Gt=function(A){this.type=Xt,this.sections=A};Gt.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var Z=A[1];if(!Array.isArray(Z)&&"object"==typeof Z)return O.error("First argument must be an image or text section.");for(var ie=[],_e=!1,Le=1;Le<=A.length-1;++Le){var je=A[Le];if(_e&&"object"==typeof je&&!Array.isArray(je)){_e=!1;var Qe=null;if(je["font-scale"]&&!(Qe=O.parse(je["font-scale"],1,Et)))return null;var lt=null;if(je["text-font"]&&!(lt=O.parse(je["text-font"],1,fn(gt))))return null;var Tt=null;if(je["text-color"]&&!(Tt=O.parse(je["text-color"],1,It)))return null;var Mt=ie[ie.length-1];Mt.scale=Qe,Mt.font=lt,Mt.textColor=Tt}else{var Bt=O.parse(A[Le],1,Nt);if(!Bt)return null;var Ht=Bt.type.kind;if("string"!==Ht&&"value"!==Ht&&"null"!==Ht&&"resolvedImage"!==Ht)return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_e=!0,ie.push({content:Bt,scale:null,font:null,textColor:null})}}return new Gt(ie)},Gt.prototype.evaluate=function(A){return new zn(this.sections.map(function(O){var Z=O.content.evaluate(A);return Xn(Z)===Kt?new kn("",Z,null,null,null):new kn(mr(Z),null,O.scale?O.scale.evaluate(A):null,O.font?O.font.evaluate(A).join(","):null,O.textColor?O.textColor.evaluate(A):null)}))},Gt.prototype.eachChild=function(A){for(var O=0,Z=this.sections;O<Z.length;O+=1){var ie=Z[O];A(ie.content),ie.scale&&A(ie.scale),ie.font&&A(ie.font),ie.textColor&&A(ie.textColor)}},Gt.prototype.outputDefined=function(){return!1},Gt.prototype.serialize=function(){for(var A=["format"],O=0,Z=this.sections;O<Z.length;O+=1){var ie=Z[O];A.push(ie.content.serialize());var _e={};ie.scale&&(_e["font-scale"]=ie.scale.serialize()),ie.font&&(_e["text-font"]=ie.font.serialize()),ie.textColor&&(_e["text-color"]=ie.textColor.serialize()),A.push(_e)}return A};var pn=function(A){this.type=Kt,this.input=A};pn.parse=function(A,O){if(2!==A.length)return O.error("Expected two arguments.");var Z=O.parse(A[1],1,gt);return Z?new pn(Z):O.error("No image name provided.")},pn.prototype.evaluate=function(A){var O=this.input.evaluate(A),Z=Fn.fromString(O);return Z&&A.availableImages&&(Z.available=A.availableImages.indexOf(O)>-1),Z},pn.prototype.eachChild=function(A){A(this.input)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){return["image",this.input.serialize()]};var An={"to-boolean":kt,"to-color":It,"to-number":Et,"to-string":gt},Tn=function(A,O){this.type=A,this.args=O};Tn.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var Z=A[0];if(("to-boolean"===Z||"to-string"===Z)&&2!==A.length)return O.error("Expected one argument.");for(var ie=An[Z],_e=[],Le=1;Le<A.length;Le++){var je=O.parse(A[Le],Le,Nt);if(!je)return null;_e.push(je)}return new Tn(ie,_e)},Tn.prototype.evaluate=function(A){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(A));if("color"===this.type.kind){for(var O,Z,ie=0,_e=this.args;ie<_e.length;ie+=1){if(Z=null,(O=_e[ie].evaluate(A))instanceof sn)return O;if("string"==typeof O){var Le=A.parseColor(O);if(Le)return Le}else if(Array.isArray(O)&&!(Z=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Bn(O[0],O[1],O[2],O[3])))return new sn(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new $n(Z||"Could not parse color from value '"+("string"==typeof O?O:String(JSON.stringify(O)))+"'")}if("number"===this.type.kind){for(var je=null,Qe=0,lt=this.args;Qe<lt.length;Qe+=1){if(null===(je=lt[Qe].evaluate(A)))return 0;var Tt=Number(je);if(!isNaN(Tt))return Tt}throw new $n("Could not convert "+JSON.stringify(je)+" to number.")}return"formatted"===this.type.kind?zn.fromString(mr(this.args[0].evaluate(A))):"resolvedImage"===this.type.kind?Fn.fromString(mr(this.args[0].evaluate(A))):mr(this.args[0].evaluate(A))},Tn.prototype.eachChild=function(A){this.args.forEach(A)},Tn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Tn.prototype.serialize=function(){if("formatted"===this.type.kind)return new Gt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new pn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(O){A.push(O.serialize())}),A};var Rn=["Unknown","Point","LineString","Polygon"],qn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};qn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},qn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Rn[this.feature.type]:this.feature.type:null},qn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},qn.prototype.canonicalID=function(){return this.canonical},qn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},qn.prototype.parseColor=function(A){var O=this._parseColorCache[A];return O||(O=this._parseColorCache[A]=sn.parse(A)),O};var Un=function(A,O,Z,ie){this.name=A,this.type=O,this._evaluate=Z,this.args=ie};Un.prototype.evaluate=function(A){return this._evaluate(A,this.args)},Un.prototype.eachChild=function(A){this.args.forEach(A)},Un.prototype.outputDefined=function(){return!1},Un.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},Un.parse=function(A,O){var Z,ie=A[0],_e=Un.definitions[ie];if(!_e)return O.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Le=Array.isArray(_e)?_e[0]:_e.type,je=Array.isArray(_e)?[[_e[1],_e[2]]]:_e.overloads,Qe=je.filter(function(Ur){var Or=Ur[0];return!Array.isArray(Or)||Or.length===A.length-1}),lt=null,Tt=0,Mt=Qe;Tt<Mt.length;Tt+=1){var Bt=Mt[Tt],Ht=Bt[0],Vt=Bt[1];lt=new ir(O.registry,O.path,null,O.scope);for(var an=[],yn=!1,On=1;On<A.length;On++){var Pn=A[On],Nn=Array.isArray(Ht)?Ht[On-1]:Ht.type,Vn=lt.parse(Pn,1+an.length,Nn);if(!Vn){yn=!0;break}an.push(Vn)}if(!yn)if(Array.isArray(Ht)&&Ht.length!==an.length)lt.error("Expected "+Ht.length+" arguments, but found "+an.length+" instead.");else{for(var Zn=0;Zn<an.length;Zn++){var Qn=Array.isArray(Ht)?Ht[Zn]:Ht.type,rr=an[Zn];lt.concat(Zn+1).checkSubtype(Qn,rr.type)}if(0===lt.errors.length)return new Un(ie,Le,Vt,an)}}if(1===Qe.length)(Z=O.errors).push.apply(Z,lt.errors);else{for(var _r=(Qe.length?Qe:je).map(function(Ur){return Or=Ur[0],Array.isArray(Or)?"("+Or.map(nn).join(", ")+")":"("+nn(Or.type)+"...)";var Or}).join(" | "),dr=[],Mr=1;Mr<A.length;Mr++){var Cr=O.parse(A[Mr],1+dr.length);if(!Cr)return null;dr.push(nn(Cr.type))}O.error("Expected arguments of type "+_r+", but found ("+dr.join(", ")+") instead.")}return null},Un.register=function(A,O){for(var Z in Un.definitions=O,O)A[Z]=Un};var Yn=function(A,O,Z){this.type=qt,this.locale=Z,this.caseSensitive=A,this.diacriticSensitive=O};Yn.parse=function(A,O){if(2!==A.length)return O.error("Expected one argument.");var Z=A[1];if("object"!=typeof Z||Array.isArray(Z))return O.error("Collator options argument must be an object.");var ie=O.parse(void 0!==Z["case-sensitive"]&&Z["case-sensitive"],1,kt);if(!ie)return null;var _e=O.parse(void 0!==Z["diacritic-sensitive"]&&Z["diacritic-sensitive"],1,kt);if(!_e)return null;var Le=null;return Z.locale&&!(Le=O.parse(Z.locale,1,gt))?null:new Yn(ie,_e,Le)},Yn.prototype.evaluate=function(A){return new En(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Yn.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Yn.prototype.outputDefined=function(){return!1},Yn.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var or=8192;function Jt(A,O){A[0]=Math.min(A[0],O[0]),A[1]=Math.min(A[1],O[1]),A[2]=Math.max(A[2],O[0]),A[3]=Math.max(A[3],O[1])}function Mn(A,O){return!(A[0]<=O[0]||A[2]>=O[2]||A[1]<=O[1]||A[3]>=O[3])}function zt(A,O){var ie=(180+A[0])/360,_e=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,Le=Math.pow(2,O.z);return[Math.round(ie*Le*or),Math.round(_e*Le*or)]}function Zt(A,O,Z){return O[1]>A[1]!=Z[1]>A[1]&&A[0]<(Z[0]-O[0])*(A[1]-O[1])/(Z[1]-O[1])+O[0]}function rn(A,O){for(var Z=!1,ie=0,_e=O.length;ie<_e;ie++)for(var Le=O[ie],je=0,Qe=Le.length;je<Qe-1;je++){if(void 0,void 0,void 0,void 0,(Bt=(lt=A)[0]-(Tt=Le[je])[0])*(an=lt[1]-(Mt=Le[je+1])[1])-(Vt=lt[0]-Mt[0])*(Ht=lt[1]-Tt[1])==0&&Bt*Vt<=0&&Ht*an<=0)return!1;Zt(A,Le[je],Le[je+1])&&(Z=!Z)}var lt,Tt,Mt,Bt,Ht,Vt,an;return Z}function Ln(A,O){for(var Z=0;Z<O.length;Z++)if(rn(A,O[Z]))return!0;return!1}function Sn(A,O,Z,ie){var lt=ie[0]-Z[0],Tt=ie[1]-Z[1],Mt=(A[0]-Z[0])*Tt-lt*(A[1]-Z[1]),Bt=(O[0]-Z[0])*Tt-lt*(O[1]-Z[1]);return Mt>0&&Bt<0||Mt<0&&Bt>0}function wn(A,O,Z){for(var ie=0,_e=Z;ie<_e.length;ie+=1)for(var Le=_e[ie],je=0;je<Le.length-1;++je)if(void 0,void 0,(Bt=[(Mt=Le[je+1])[0]-(Tt=Le[je])[0],Mt[1]-Tt[1]])[0]*(Ht=[(lt=O)[0]-(Qe=A)[0],lt[1]-Qe[1]])[1]-Bt[1]*Ht[0]!=0&&Sn(Qe,lt,Tt,Mt)&&Sn(Tt,Mt,Qe,lt))return!0;var Qe,lt,Tt,Mt,Bt,Ht;return!1}function ln(A,O){for(var Z=0;Z<A.length;++Z)if(!rn(A[Z],O))return!1;for(var ie=0;ie<A.length-1;++ie)if(wn(A[ie],A[ie+1],O))return!1;return!0}function gn(A,O){for(var Z=0;Z<O.length;Z++)if(ln(A,O[Z]))return!0;return!1}function un(A,O,Z){for(var ie=[],_e=0;_e<A.length;_e++){for(var Le=[],je=0;je<A[_e].length;je++){var Qe=zt(A[_e][je],Z);Jt(O,Qe),Le.push(Qe)}ie.push(Le)}return ie}function hn(A,O,Z){for(var ie=[],_e=0;_e<A.length;_e++){var Le=un(A[_e],O,Z);ie.push(Le)}return ie}function bn(A,O,Z,ie){if(A[0]<Z[0]||A[0]>Z[2]){var _e=.5*ie,Le=A[0]-Z[0]>_e?-ie:Z[0]-A[0]>_e?ie:0;0===Le&&(Le=A[0]-Z[2]>_e?-ie:Z[2]-A[0]>_e?ie:0),A[0]+=Le}Jt(O,A)}function In(A,O,Z,ie){for(var _e=Math.pow(2,ie.z)*or,Le=[ie.x*or,ie.y*or],je=[],Qe=0,lt=A;Qe<lt.length;Qe+=1)for(var Tt=0,Mt=lt[Qe];Tt<Mt.length;Tt+=1){var Bt=Mt[Tt],Ht=[Bt.x+Le[0],Bt.y+Le[1]];bn(Ht,O,Z,_e),je.push(Ht)}return je}function Hn(A,O,Z,ie){for(var _e=Math.pow(2,ie.z)*or,Le=[ie.x*or,ie.y*or],je=[],Qe=0,lt=A;Qe<lt.length;Qe+=1){for(var Tt=[],Mt=0,Bt=lt[Qe];Mt<Bt.length;Mt+=1){var Ht=Bt[Mt],Vt=[Ht.x+Le[0],Ht.y+Le[1]];Jt(O,Vt),Tt.push(Vt)}je.push(Tt)}if(O[2]-O[0]<=_e/2){(Nn=O)[0]=Nn[1]=1/0,Nn[2]=Nn[3]=-1/0;for(var an=0,yn=je;an<yn.length;an+=1)for(var On=0,Pn=yn[an];On<Pn.length;On+=1)bn(Pn[On],O,Z,_e)}var Nn;return je}var Wn=function(A,O){this.type=kt,this.geojson=A,this.geometries=O};function Gn(A){if(A instanceof Un&&("get"===A.name&&1===A.args.length||"feature-state"===A.name||"has"===A.name&&1===A.args.length||"properties"===A.name||"geometry-type"===A.name||"id"===A.name||/^filter-/.test(A.name))||A instanceof Wn)return!1;var O=!0;return A.eachChild(function(Z){O&&!Gn(Z)&&(O=!1)}),O}function nr(A){if(A instanceof Un&&"feature-state"===A.name)return!1;var O=!0;return A.eachChild(function(Z){O&&!nr(Z)&&(O=!1)}),O}function tr(A,O){if(A instanceof Un&&O.indexOf(A.name)>=0)return!1;var Z=!0;return A.eachChild(function(ie){Z&&!tr(ie,O)&&(Z=!1)}),Z}Wn.parse=function(A,O){if(2!==A.length)return O.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(er(A[1])){var Z=A[1];if("FeatureCollection"===Z.type)for(var ie=0;ie<Z.features.length;++ie){var _e=Z.features[ie].geometry.type;if("Polygon"===_e||"MultiPolygon"===_e)return new Wn(Z,Z.features[ie].geometry)}else if("Feature"===Z.type){var Le=Z.geometry.type;if("Polygon"===Le||"MultiPolygon"===Le)return new Wn(Z,Z.geometry)}else if("Polygon"===Z.type||"MultiPolygon"===Z.type)return new Wn(Z,Z)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Wn.prototype.evaluate=function(A){if(null!=A.geometry()&&null!=A.canonicalID()){if("Point"===A.geometryType())return function(O,Z){var ie=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Le=O.canonicalID();if("Polygon"===Z.type){var je=un(Z.coordinates,_e,Le),Qe=In(O.geometry(),ie,_e,Le);if(!Mn(ie,_e))return!1;for(var lt=0,Tt=Qe;lt<Tt.length;lt+=1)if(!rn(Tt[lt],je))return!1}if("MultiPolygon"===Z.type){var Mt=hn(Z.coordinates,_e,Le),Bt=In(O.geometry(),ie,_e,Le);if(!Mn(ie,_e))return!1;for(var Ht=0,Vt=Bt;Ht<Vt.length;Ht+=1)if(!Ln(Vt[Ht],Mt))return!1}return!0}(A,this.geometries);if("LineString"===A.geometryType())return function(O,Z){var ie=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Le=O.canonicalID();if("Polygon"===Z.type){var je=un(Z.coordinates,_e,Le),Qe=Hn(O.geometry(),ie,_e,Le);if(!Mn(ie,_e))return!1;for(var lt=0,Tt=Qe;lt<Tt.length;lt+=1)if(!ln(Tt[lt],je))return!1}if("MultiPolygon"===Z.type){var Mt=hn(Z.coordinates,_e,Le),Bt=Hn(O.geometry(),ie,_e,Le);if(!Mn(ie,_e))return!1;for(var Ht=0,Vt=Bt;Ht<Vt.length;Ht+=1)if(!gn(Vt[Ht],Mt))return!1}return!0}(A,this.geometries)}return!1},Wn.prototype.eachChild=function(){},Wn.prototype.outputDefined=function(){return!0},Wn.prototype.serialize=function(){return["within",this.geojson]};var ar=function(A,O){this.type=O.type,this.name=A,this.boundExpression=O};ar.parse=function(A,O){if(2!==A.length||"string"!=typeof A[1])return O.error("'var' expression requires exactly one string literal argument.");var Z=A[1];return O.scope.has(Z)?new ar(Z,O.scope.get(Z)):O.error('Unknown variable "'+Z+'". Make sure "'+Z+'" has been bound in an enclosing "let" expression before using it.',1)},ar.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},ar.prototype.eachChild=function(){},ar.prototype.outputDefined=function(){return!1},ar.prototype.serialize=function(){return["var",this.name]};var ir=function(A,O,Z,ie,_e){void 0===O&&(O=[]),void 0===ie&&(ie=new At),void 0===_e&&(_e=[]),this.registry=A,this.path=O,this.key=O.map(function(Le){return"["+Le+"]"}).join(""),this.scope=ie,this.errors=_e,this.expectedType=Z};function cr(A){if(A instanceof ar)return cr(A.boundExpression);if(A instanceof Un&&"error"===A.name||A instanceof Yn||A instanceof Wn)return!1;var O=A instanceof Tn||A instanceof hr,Z=!0;return A.eachChild(function(ie){Z=O?Z&&cr(ie):Z&&ie instanceof ur}),!!Z&&Gn(A)&&tr(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function br(A,O){for(var Z,_e=A.length-1,Le=0,je=_e,Qe=0;Le<=je;)if((Z=A[Qe=Math.floor((Le+je)/2)])<=O){if(Qe===_e||O<A[Qe+1])return Qe;Le=Qe+1}else{if(!(Z>O))throw new $n("Input is not a number.");je=Qe-1}return 0}ir.prototype.parse=function(A,O,Z,ie,_e){return void 0===_e&&(_e={}),O?this.concat(O,Z,ie)._parse(A,_e):this._parse(A,_e)},ir.prototype._parse=function(A,O){function Z(Tt,Mt,Bt){return"assert"===Bt?new hr(Mt,[Tt]):"coerce"===Bt?new Tn(Mt,[Tt]):Tt}if(null!==A&&"string"!=typeof A&&"boolean"!=typeof A&&"number"!=typeof A||(A=["literal",A]),Array.isArray(A)){if(0===A.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ie=A[0];if("string"!=typeof ie)return this.error("Expression name must be a string, but found "+typeof ie+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var _e=this.registry[ie];if(_e){var Le=_e.parse(A,this);if(!Le)return null;if(this.expectedType){var je=this.expectedType,Qe=Le.type;if("string"!==je.kind&&"number"!==je.kind&&"boolean"!==je.kind&&"object"!==je.kind&&"array"!==je.kind||"value"!==Qe.kind)if("color"!==je.kind&&"formatted"!==je.kind&&"resolvedImage"!==je.kind||"value"!==Qe.kind&&"string"!==Qe.kind){if(this.checkSubtype(je,Qe))return null}else Le=Z(Le,je,O.typeAnnotation||"coerce");else Le=Z(Le,je,O.typeAnnotation||"assert")}if(!(Le instanceof ur)&&"resolvedImage"!==Le.type.kind&&cr(Le)){var lt=new qn;try{Le=new ur(Le.type,Le.evaluate(lt))}catch(Tt){return this.error(Tt.message),null}}return Le}return this.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===A?"'undefined' value invalid. Use null instead.":"object"==typeof A?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof A+" instead.")},ir.prototype.concat=function(A,O,Z){var ie="number"==typeof A?this.path.concat(A):this.path,_e=Z?this.scope.concat(Z):this.scope;return new ir(this.registry,ie,O||null,_e,this.errors)},ir.prototype.error=function(A){for(var O=[],Z=arguments.length-1;Z-- >0;)O[Z]=arguments[Z+1];var ie=""+this.key+O.map(function(_e){return"["+_e+"]"}).join("");this.errors.push(new Lt(ie,A))},ir.prototype.checkSubtype=function(A,O){var Z=jn(A,O);return Z&&this.error(Z),Z};var xr=function(A,O,Z){this.type=A,this.input=O,this.labels=[],this.outputs=[];for(var ie=0,_e=Z;ie<_e.length;ie+=1){var Le=_e[ie],Qe=Le[1];this.labels.push(Le[0]),this.outputs.push(Qe)}};function Tr(A,O,Z){return A*(1-Z)+O*Z}xr.parse=function(A,O){if(A.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return O.error("Expected an even number of arguments.");var Z=O.parse(A[1],1,Et);if(!Z)return null;var ie=[],_e=null;O.expectedType&&"value"!==O.expectedType.kind&&(_e=O.expectedType);for(var Le=1;Le<A.length;Le+=2){var je=1===Le?-1/0:A[Le],Qe=A[Le+1],lt=Le,Tt=Le+1;if("number"!=typeof je)return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(ie.length&&ie[ie.length-1][0]>=je)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',lt);var Mt=O.parse(Qe,Tt,_e);if(!Mt)return null;_e=_e||Mt.type,ie.push([je,Mt])}return new xr(_e,Z,ie)},xr.prototype.evaluate=function(A){var O=this.labels,Z=this.outputs;if(1===O.length)return Z[0].evaluate(A);var ie=this.input.evaluate(A);if(ie<=O[0])return Z[0].evaluate(A);var _e=O.length;return ie>=O[_e-1]?Z[_e-1].evaluate(A):Z[br(O,ie)].evaluate(A)},xr.prototype.eachChild=function(A){A(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)A(Z[O])},xr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},xr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&A.push(this.labels[O]),A.push(this.outputs[O].serialize());return A};var sr=Object.freeze({__proto__:null,number:Tr,color:function(A,O,Z){return new sn(Tr(A.r,O.r,Z),Tr(A.g,O.g,Z),Tr(A.b,O.b,Z),Tr(A.a,O.a,Z))},array:function(A,O,Z){return A.map(function(ie,_e){return Tr(ie,O[_e],Z)})}}),ei=4/29,fi=6/29,di=3*fi*fi,Gi=Math.PI/180,Li=180/Math.PI;function si(A){return A>.008856451679035631?Math.pow(A,.3333333333333333):A/di+ei}function ua(A){return A>fi?A*A*A:di*(A-ei)}function Ma(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function ro(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Zo(A){var O=ro(A.r),Z=ro(A.g),ie=ro(A.b),_e=si((.4124564*O+.3575761*Z+.1804375*ie)/.95047),Le=si((.2126729*O+.7151522*Z+.072175*ie)/1);return{l:116*Le-16,a:500*(_e-Le),b:200*(Le-si((.0193339*O+.119192*Z+.9503041*ie)/1.08883)),alpha:A.a}}function al(A){var O=(A.l+16)/116,Z=isNaN(A.a)?O:O+A.a/500,ie=isNaN(A.b)?O:O-A.b/200;return O=1*ua(O),Z=.95047*ua(Z),ie=1.08883*ua(ie),new sn(Ma(3.2404542*Z-1.5371385*O-.4985314*ie),Ma(-.969266*Z+1.8760108*O+.041556*ie),Ma(.0556434*Z-.2040259*O+1.0572252*ie),A.alpha)}function Vs(A,O,Z){var ie=O-A;return A+Z*(ie>180||ie<-180?ie-360*Math.round(ie/360):ie)}var Yo={forward:Zo,reverse:al,interpolate:function(A,O,Z){return{l:Tr(A.l,O.l,Z),a:Tr(A.a,O.a,Z),b:Tr(A.b,O.b,Z),alpha:Tr(A.alpha,O.alpha,Z)}}},Sa={forward:function(A){var O=Zo(A),Z=O.l,ie=O.a,_e=O.b,Le=Math.atan2(_e,ie)*Li;return{h:Le<0?Le+360:Le,c:Math.sqrt(ie*ie+_e*_e),l:Z,alpha:A.a}},reverse:function(A){var O=A.h*Gi,Z=A.c;return al({l:A.l,a:Math.cos(O)*Z,b:Math.sin(O)*Z,alpha:A.alpha})},interpolate:function(A,O,Z){return{h:Vs(A.h,O.h,Z),c:Tr(A.c,O.c,Z),l:Tr(A.l,O.l,Z),alpha:Tr(A.alpha,O.alpha,Z)}}},Hs=Object.freeze({__proto__:null,lab:Yo,hcl:Sa}),Fi=function(A,O,Z,ie,_e){this.type=A,this.operator=O,this.interpolation=Z,this.input=ie,this.labels=[],this.outputs=[];for(var Le=0,je=_e;Le<je.length;Le+=1){var Qe=je[Le],Tt=Qe[1];this.labels.push(Qe[0]),this.outputs.push(Tt)}};function ls(A,O,Z,ie){var _e=ie-Z,Le=A-Z;return 0===_e?0:1===O?Le/_e:(Math.pow(O,Le)-1)/(Math.pow(O,_e)-1)}Fi.interpolationFactor=function(A,O,Z,ie){var _e=0;if("exponential"===A.name)_e=ls(O,A.base,Z,ie);else if("linear"===A.name)_e=ls(O,1,Z,ie);else if("cubic-bezier"===A.name){var Le=A.controlPoints;_e=new p(Le[0],Le[1],Le[2],Le[3]).solve(ls(O,1,Z,ie))}return _e},Fi.parse=function(A,O){var Z=A[0],ie=A[1],_e=A[2],Le=A.slice(3);if(!Array.isArray(ie)||0===ie.length)return O.error("Expected an interpolation type expression.",1);if("linear"===ie[0])ie={name:"linear"};else if("exponential"===ie[0]){var je=ie[1];if("number"!=typeof je)return O.error("Exponential interpolation requires a numeric base.",1,1);ie={name:"exponential",base:je}}else{if("cubic-bezier"!==ie[0])return O.error("Unknown interpolation type "+String(ie[0]),1,0);var Qe=ie.slice(1);if(4!==Qe.length||Qe.some(function(On){return"number"!=typeof On||On<0||On>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ie={name:"cubic-bezier",controlPoints:Qe}}if(A.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(_e=O.parse(_e,2,Et)))return null;var lt=[],Tt=null;"interpolate-hcl"===Z||"interpolate-lab"===Z?Tt=It:O.expectedType&&"value"!==O.expectedType.kind&&(Tt=O.expectedType);for(var Mt=0;Mt<Le.length;Mt+=2){var Bt=Le[Mt],Ht=Le[Mt+1],Vt=Mt+3,an=Mt+4;if("number"!=typeof Bt)return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Vt);if(lt.length&&lt[lt.length-1][0]>=Bt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Vt);var yn=O.parse(Ht,an,Tt);if(!yn)return null;Tt=Tt||yn.type,lt.push([Bt,yn])}return"number"===Tt.kind||"color"===Tt.kind||"array"===Tt.kind&&"number"===Tt.itemType.kind&&"number"==typeof Tt.N?new Fi(Tt,Z,ie,_e,lt):O.error("Type "+nn(Tt)+" is not interpolatable.")},Fi.prototype.evaluate=function(A){var O=this.labels,Z=this.outputs;if(1===O.length)return Z[0].evaluate(A);var ie=this.input.evaluate(A);if(ie<=O[0])return Z[0].evaluate(A);var _e=O.length;if(ie>=O[_e-1])return Z[_e-1].evaluate(A);var Le=br(O,ie),lt=Fi.interpolationFactor(this.interpolation,ie,O[Le],O[Le+1]),Tt=Z[Le].evaluate(A),Mt=Z[Le+1].evaluate(A);return"interpolate"===this.operator?sr[this.type.kind.toLowerCase()](Tt,Mt,lt):"interpolate-hcl"===this.operator?Sa.reverse(Sa.interpolate(Sa.forward(Tt),Sa.forward(Mt),lt)):Yo.reverse(Yo.interpolate(Yo.forward(Tt),Yo.forward(Mt),lt))},Fi.prototype.eachChild=function(A){A(this.input);for(var O=0,Z=this.outputs;O<Z.length;O+=1)A(Z[O])},Fi.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Fi.prototype.serialize=function(){var A;A="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,A,this.input.serialize()],Z=0;Z<this.labels.length;Z++)O.push(this.labels[Z],this.outputs[Z].serialize());return O};var ba=function(A,O){this.type=A,this.args=O};ba.parse=function(A,O){if(A.length<2)return O.error("Expectected at least one argument.");var Z=null,ie=O.expectedType;ie&&"value"!==ie.kind&&(Z=ie);for(var _e=[],Le=0,je=A.slice(1);Le<je.length;Le+=1){var lt=O.parse(je[Le],1+_e.length,Z,void 0,{typeAnnotation:"omit"});if(!lt)return null;Z=Z||lt.type,_e.push(lt)}var Tt=ie&&_e.some(function(Mt){return jn(ie,Mt.type)});return new ba(Tt?Nt:Z,_e)},ba.prototype.evaluate=function(A){for(var O,Z=null,ie=0,_e=0,Le=this.args;_e<Le.length&&(ie++,(Z=Le[_e].evaluate(A))&&Z instanceof Fn&&!Z.available&&(O||(O=Z.name),Z=null,ie===this.args.length&&(Z=O)),null===Z);_e+=1);return Z},ba.prototype.eachChild=function(A){this.args.forEach(A)},ba.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},ba.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Ea=function(A,O){this.type=O.type,this.bindings=[].concat(A),this.result=O};Ea.prototype.evaluate=function(A){return this.result.evaluate(A)},Ea.prototype.eachChild=function(A){for(var O=0,Z=this.bindings;O<Z.length;O+=1)A(Z[O][1]);A(this.result)},Ea.parse=function(A,O){if(A.length<4)return O.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var Z=[],ie=1;ie<A.length-1;ie+=2){var _e=A[ie];if("string"!=typeof _e)return O.error("Expected string, but found "+typeof _e+" instead.",ie);if(/[^a-zA-Z0-9_]/.test(_e))return O.error("Variable names must contain only alphanumeric characters or '_'.",ie);var Le=O.parse(A[ie+1],ie+1);if(!Le)return null;Z.push([_e,Le])}var je=O.parse(A[A.length-1],A.length-1,O.expectedType,Z);return je?new Ea(Z,je):null},Ea.prototype.outputDefined=function(){return this.result.outputDefined()},Ea.prototype.serialize=function(){for(var A=["let"],O=0,Z=this.bindings;O<Z.length;O+=1){var ie=Z[O];A.push(ie[0],ie[1].serialize())}return A.push(this.result.serialize()),A};var yo=function(A,O,Z){this.type=A,this.index=O,this.input=Z};yo.parse=function(A,O){if(3!==A.length)return O.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Z=O.parse(A[1],1,Et),ie=O.parse(A[2],2,fn(O.expectedType||Nt));return Z&&ie?new yo(ie.type.itemType,Z,ie):null},yo.prototype.evaluate=function(A){var O=this.index.evaluate(A),Z=this.input.evaluate(A);if(O<0)throw new $n("Array index out of bounds: "+O+" < 0.");if(O>=Z.length)throw new $n("Array index out of bounds: "+O+" > "+(Z.length-1)+".");if(O!==Math.floor(O))throw new $n("Array index must be an integer, but found "+O+" instead.");return Z[O]},yo.prototype.eachChild=function(A){A(this.index),A(this.input)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ti=function(A,O){this.type=kt,this.needle=A,this.haystack=O};ti.parse=function(A,O){if(3!==A.length)return O.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Z=O.parse(A[1],1,Nt),ie=O.parse(A[2],2,Nt);return Z&&ie?mn(Z.type,[kt,gt,Et,ht,Nt])?new ti(Z,ie):O.error("Expected first argument to be of type boolean, string, number or null, but found "+nn(Z.type)+" instead"):null},ti.prototype.evaluate=function(A){var O=this.needle.evaluate(A),Z=this.haystack.evaluate(A);if(!Z)return!1;if(!en(O,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+nn(Xn(O))+" instead.");if(!en(Z,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+nn(Xn(Z))+" instead.");return Z.indexOf(O)>=0},ti.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},ti.prototype.outputDefined=function(){return!0},ti.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var xo=function(A,O,Z){this.type=Et,this.needle=A,this.haystack=O,this.fromIndex=Z};xo.parse=function(A,O){if(A.length<=2||A.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Z=O.parse(A[1],1,Nt),ie=O.parse(A[2],2,Nt);if(!Z||!ie)return null;if(!mn(Z.type,[kt,gt,Et,ht,Nt]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+nn(Z.type)+" instead");if(4===A.length){var _e=O.parse(A[3],3,Et);return _e?new xo(Z,ie,_e):null}return new xo(Z,ie)},xo.prototype.evaluate=function(A){var O=this.needle.evaluate(A),Z=this.haystack.evaluate(A);if(!en(O,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+nn(Xn(O))+" instead.");if(!en(Z,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+nn(Xn(Z))+" instead.");if(this.fromIndex){var ie=this.fromIndex.evaluate(A);return Z.indexOf(O,ie)}return Z.indexOf(O)},xo.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},xo.prototype.outputDefined=function(){return!1},xo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Oa=function(A,O,Z,ie,_e,Le){this.inputType=A,this.type=O,this.input=Z,this.cases=ie,this.outputs=_e,this.otherwise=Le};Oa.parse=function(A,O){if(A.length<5)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return O.error("Expected an even number of arguments.");var Z,ie;O.expectedType&&"value"!==O.expectedType.kind&&(ie=O.expectedType);for(var _e={},Le=[],je=2;je<A.length-1;je+=2){var Qe=A[je],lt=A[je+1];Array.isArray(Qe)||(Qe=[Qe]);var Tt=O.concat(je);if(0===Qe.length)return Tt.error("Expected at least one branch label.");for(var Mt=0,Bt=Qe;Mt<Bt.length;Mt+=1){var Ht=Bt[Mt];if("number"!=typeof Ht&&"string"!=typeof Ht)return Tt.error("Branch labels must be numbers or strings.");if("number"==typeof Ht&&Math.abs(Ht)>Number.MAX_SAFE_INTEGER)return Tt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Ht&&Math.floor(Ht)!==Ht)return Tt.error("Numeric branch labels must be integer values.");if(Z){if(Tt.checkSubtype(Z,Xn(Ht)))return null}else Z=Xn(Ht);if(void 0!==_e[String(Ht)])return Tt.error("Branch labels must be unique.");_e[String(Ht)]=Le.length}var Vt=O.parse(lt,je,ie);if(!Vt)return null;ie=ie||Vt.type,Le.push(Vt)}var an=O.parse(A[1],1,Nt);if(!an)return null;var yn=O.parse(A[A.length-1],A.length-1,ie);return yn?"value"!==an.type.kind&&O.concat(1).checkSubtype(Z,an.type)?null:new Oa(Z,ie,an,_e,Le,yn):null},Oa.prototype.evaluate=function(A){var O=this.input.evaluate(A);return(Xn(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(A)},Oa.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},Oa.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},Oa.prototype.serialize=function(){for(var A=this,O=["match",this.input.serialize()],Z=[],ie={},_e=0,Le=Object.keys(this.cases).sort();_e<Le.length;_e+=1){var je=Le[_e];void 0===(Bt=ie[this.cases[je]])?(ie[this.cases[je]]=Z.length,Z.push([this.cases[je],[je]])):Z[Bt][1].push(je)}for(var Qe=function(Vt){return"number"===A.inputType.kind?Number(Vt):Vt},lt=0,Tt=Z;lt<Tt.length;lt+=1){var Mt=Tt[lt],Bt=Mt[0],Ht=Mt[1];O.push(1===Ht.length?Qe(Ht[0]):Ht.map(Qe)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var Ha=function(A,O,Z){this.type=A,this.branches=O,this.otherwise=Z};Ha.parse=function(A,O){if(A.length<4)return O.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return O.error("Expected an odd number of arguments.");var Z;O.expectedType&&"value"!==O.expectedType.kind&&(Z=O.expectedType);for(var ie=[],_e=1;_e<A.length-1;_e+=2){var Le=O.parse(A[_e],_e,kt);if(!Le)return null;var je=O.parse(A[_e+1],_e+1,Z);if(!je)return null;ie.push([Le,je]),Z=Z||je.type}var Qe=O.parse(A[A.length-1],A.length-1,Z);return Qe?new Ha(Z,ie,Qe):null},Ha.prototype.evaluate=function(A){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ie=Z[O],Le=ie[1];if(ie[0].evaluate(A))return Le.evaluate(A)}return this.otherwise.evaluate(A)},Ha.prototype.eachChild=function(A){for(var O=0,Z=this.branches;O<Z.length;O+=1){var ie=Z[O],Le=ie[1];A(ie[0]),A(Le)}A(this.otherwise)},Ha.prototype.outputDefined=function(){return this.branches.every(function(A){return A[1].outputDefined()})&&this.otherwise.outputDefined()},Ha.prototype.serialize=function(){var A=["case"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Ja=function(A,O,Z,ie){this.type=A,this.input=O,this.beginIndex=Z,this.endIndex=ie};function us(A,O){return"=="===A||"!="===A?"boolean"===O.kind||"string"===O.kind||"number"===O.kind||"null"===O.kind||"value"===O.kind:"string"===O.kind||"number"===O.kind||"value"===O.kind}function ol(A,O,Z,ie){return 0===ie.compare(O,Z)}function io(A,O,Z){var ie="=="!==A&&"!="!==A;return function(){function _e(Le,je,Qe){this.type=kt,this.lhs=Le,this.rhs=je,this.collator=Qe,this.hasUntypedArgument="value"===Le.type.kind||"value"===je.type.kind}return _e.parse=function(Le,je){if(3!==Le.length&&4!==Le.length)return je.error("Expected two or three arguments.");var Qe=Le[0],lt=je.parse(Le[1],1,Nt);if(!lt)return null;if(!us(Qe,lt.type))return je.concat(1).error('"'+Qe+"\" comparisons are not supported for type '"+nn(lt.type)+"'.");var Tt=je.parse(Le[2],2,Nt);if(!Tt)return null;if(!us(Qe,Tt.type))return je.concat(2).error('"'+Qe+"\" comparisons are not supported for type '"+nn(Tt.type)+"'.");if(lt.type.kind!==Tt.type.kind&&"value"!==lt.type.kind&&"value"!==Tt.type.kind)return je.error("Cannot compare types '"+nn(lt.type)+"' and '"+nn(Tt.type)+"'.");ie&&("value"===lt.type.kind&&"value"!==Tt.type.kind?lt=new hr(Tt.type,[lt]):"value"!==lt.type.kind&&"value"===Tt.type.kind&&(Tt=new hr(lt.type,[Tt])));var Mt=null;if(4===Le.length){if("string"!==lt.type.kind&&"string"!==Tt.type.kind&&"value"!==lt.type.kind&&"value"!==Tt.type.kind)return je.error("Cannot use collator to compare non-string types.");if(!(Mt=je.parse(Le[3],3,qt)))return null}return new _e(lt,Tt,Mt)},_e.prototype.evaluate=function(Le){var je=this.lhs.evaluate(Le),Qe=this.rhs.evaluate(Le);if(ie&&this.hasUntypedArgument){var lt=Xn(je),Tt=Xn(Qe);if(lt.kind!==Tt.kind||"string"!==lt.kind&&"number"!==lt.kind)throw new $n('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+lt.kind+", "+Tt.kind+") instead.")}if(this.collator&&!ie&&this.hasUntypedArgument){var Mt=Xn(je),Bt=Xn(Qe);if("string"!==Mt.kind||"string"!==Bt.kind)return O(Le,je,Qe)}return this.collator?Z(Le,je,Qe,this.collator.evaluate(Le)):O(Le,je,Qe)},_e.prototype.eachChild=function(Le){Le(this.lhs),Le(this.rhs),this.collator&&Le(this.collator)},_e.prototype.outputDefined=function(){return!0},_e.prototype.serialize=function(){var Le=[A];return this.eachChild(function(je){Le.push(je.serialize())}),Le},_e}()}Ja.parse=function(A,O){if(A.length<=2||A.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Z=O.parse(A[1],1,Nt),ie=O.parse(A[2],2,Et);if(!Z||!ie)return null;if(!mn(Z.type,[fn(Nt),gt,Nt]))return O.error("Expected first argument to be of type array or string, but found "+nn(Z.type)+" instead");if(4===A.length){var _e=O.parse(A[3],3,Et);return _e?new Ja(Z.type,Z,ie,_e):null}return new Ja(Z.type,Z,ie)},Ja.prototype.evaluate=function(A){var O=this.input.evaluate(A),Z=this.beginIndex.evaluate(A);if(!en(O,["string","array"]))throw new $n("Expected first argument to be of type array or string, but found "+nn(Xn(O))+" instead.");if(this.endIndex){var ie=this.endIndex.evaluate(A);return O.slice(Z,ie)}return O.slice(Z)},Ja.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Ja.prototype.outputDefined=function(){return!1},Ja.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var sl=io("==",function(A,O,Z){return O===Z},ol),ll=io("!=",function(A,O,Z){return O!==Z},function(A,O,Z,ie){return!ol(0,O,Z,ie)}),ml=io("<",function(A,O,Z){return O<Z},function(A,O,Z,ie){return ie.compare(O,Z)<0}),qs=io(">",function(A,O,Z){return O>Z},function(A,O,Z,ie){return ie.compare(O,Z)>0}),ul=io("<=",function(A,O,Z){return O<=Z},function(A,O,Z,ie){return ie.compare(O,Z)<=0}),Gs=io(">=",function(A,O,Z){return O>=Z},function(A,O,Z,ie){return ie.compare(O,Z)>=0}),ao=function(A,O,Z,ie,_e){this.type=gt,this.number=A,this.locale=O,this.currency=Z,this.minFractionDigits=ie,this.maxFractionDigits=_e};ao.parse=function(A,O){if(3!==A.length)return O.error("Expected two arguments.");var Z=O.parse(A[1],1,Et);if(!Z)return null;var ie=A[2];if("object"!=typeof ie||Array.isArray(ie))return O.error("NumberFormat options argument must be an object.");var _e=null;if(ie.locale&&!(_e=O.parse(ie.locale,1,gt)))return null;var Le=null;if(ie.currency&&!(Le=O.parse(ie.currency,1,gt)))return null;var je=null;if(ie["min-fraction-digits"]&&!(je=O.parse(ie["min-fraction-digits"],1,Et)))return null;var Qe=null;return ie["max-fraction-digits"]&&!(Qe=O.parse(ie["max-fraction-digits"],1,Et))?null:new ao(Z,_e,Le,je,Qe)},ao.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},ao.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var oo=function(A){this.type=Et,this.input=A};oo.parse=function(A,O){if(2!==A.length)return O.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var Z=O.parse(A[1],1);return Z?"array"!==Z.type.kind&&"string"!==Z.type.kind&&"value"!==Z.type.kind?O.error("Expected argument of type string or array, but found "+nn(Z.type)+" instead."):new oo(Z):null},oo.prototype.evaluate=function(A){var O=this.input.evaluate(A);if("string"==typeof O||Array.isArray(O))return O.length;throw new $n("Expected value to be of type string or array, but found "+nn(Xn(O))+" instead.")},oo.prototype.eachChild=function(A){A(this.input)},oo.prototype.outputDefined=function(){return!1},oo.prototype.serialize=function(){var A=["length"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Wo={"==":sl,"!=":ll,">":qs,"<":ml,">=":Gs,"<=":ul,array:hr,at:yo,boolean:hr,case:Ha,coalesce:ba,collator:Yn,format:Gt,image:pn,in:ti,"index-of":xo,interpolate:Fi,"interpolate-hcl":Fi,"interpolate-lab":Fi,length:oo,let:Ea,literal:ur,match:Oa,number:hr,"number-format":ao,object:hr,slice:Ja,step:xr,string:hr,"to-boolean":Tn,"to-color":Tn,"to-number":Tn,"to-string":Tn,var:ar,within:Wn};function so(A,O){var Z=O[0],ie=O[1],_e=O[2],Le=O[3];Z=Z.evaluate(A),ie=ie.evaluate(A),_e=_e.evaluate(A);var je=Le?Le.evaluate(A):1,Qe=Bn(Z,ie,_e,je);if(Qe)throw new $n(Qe);return new sn(Z/255*je,ie/255*je,_e/255*je,je)}function Zs(A,O){return A in O}function Ys(A,O){var Z=O[A];return void 0===Z?null:Z}function Oo(A){return{type:A}}function Ms(A){return{result:"success",value:A}}function bo(A){return{result:"error",value:A}}function Xo(A){return"data-driven"===A["property-type"]||"cross-faded-data-driven"===A["property-type"]}function Io(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function lo(A){return!!A.expression&&A.expression.interpolated}function ni(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":null===A?"null":typeof A}function _o(A){return"object"==typeof A&&null!==A&&!Array.isArray(A)}function yl(A){return A}function Ss(A,O){var Z,ie,_e,Le="color"===O.type,je=A.stops&&"object"==typeof A.stops[0][0],lt=je||!(je||void 0!==A.property),Tt=A.type||(lo(O)?"exponential":"interval");if(Le&&((A=it({},A)).stops&&(A.stops=A.stops.map(function(dr){return[dr[0],sn.parse(dr[1])]})),A.default=sn.parse(A.default?A.default:O.default)),A.colorSpace&&"rgb"!==A.colorSpace&&!Hs[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if("exponential"===Tt)Z=Ia;else if("interval"===Tt)Z=Jo;else if("categorical"===Tt){Z=zo,ie=Object.create(null);for(var Mt=0,Bt=A.stops;Mt<Bt.length;Mt+=1){var Ht=Bt[Mt];ie[Ht[0]]=Ht[1]}_e=typeof A.stops[0][0]}else{if("identity"!==Tt)throw new Error('Unknown function type "'+Tt+'"');Z=Ws}if(je){for(var Vt={},an=[],yn=0;yn<A.stops.length;yn++){var On=A.stops[yn],Pn=On[0].zoom;void 0===Vt[Pn]&&(Vt[Pn]={zoom:Pn,type:A.type,property:A.property,default:A.default,stops:[]},an.push(Pn)),Vt[Pn].stops.push([On[0].value,On[1]])}for(var Nn=[],Vn=0,Zn=an;Vn<Zn.length;Vn+=1){var Qn=Zn[Vn];Nn.push([Vt[Qn].zoom,Ss(Vt[Qn],O)])}var rr={name:"linear"};return{kind:"composite",interpolationType:rr,interpolationFactor:Fi.interpolationFactor.bind(void 0,rr),zoomStops:Nn.map(function(dr){return dr[0]}),evaluate:function(dr,Mr){var Cr=dr.zoom;return Ia({stops:Nn,base:A.base},O,Cr).evaluate(Cr,Mr)}}}if(lt){var _r="exponential"===Tt?{name:"exponential",base:void 0!==A.base?A.base:1}:null;return{kind:"camera",interpolationType:_r,interpolationFactor:Fi.interpolationFactor.bind(void 0,_r),zoomStops:A.stops.map(function(dr){return dr[0]}),evaluate:function(dr){return Z(A,O,dr.zoom,ie,_e)}}}return{kind:"source",evaluate:function(dr,Mr){var Cr=Mr&&Mr.properties?Mr.properties[A.property]:void 0;return void 0===Cr?cs(A.default,O.default):Z(A,O,Cr,ie,_e)}}}function cs(A,O,Z){return void 0!==A?A:void 0!==O?O:void 0!==Z?Z:void 0}function zo(A,O,Z,ie,_e){return cs(typeof Z===_e?ie[Z]:void 0,A.default,O.default)}function Jo(A,O,Z){if("number"!==ni(Z))return cs(A.default,O.default);var ie=A.stops.length;if(1===ie||Z<=A.stops[0][0])return A.stops[0][1];if(Z>=A.stops[ie-1][0])return A.stops[ie-1][1];var _e=br(A.stops.map(function(Le){return Le[0]}),Z);return A.stops[_e][1]}function Ia(A,O,Z){var ie=void 0!==A.base?A.base:1;if("number"!==ni(Z))return cs(A.default,O.default);var _e=A.stops.length;if(1===_e||Z<=A.stops[0][0])return A.stops[0][1];if(Z>=A.stops[_e-1][0])return A.stops[_e-1][1];var Ht,Vt,yn,On,Le=br(A.stops.map(function(Bt){return Bt[0]}),Z),je=(Ht=ie,On=Z-(Vt=A.stops[Le][0]),0==(yn=A.stops[Le+1][0]-Vt)?0:1===Ht?On/yn:(Math.pow(Ht,On)-1)/(Math.pow(Ht,yn)-1)),Qe=A.stops[Le][1],lt=A.stops[Le+1][1],Tt=sr[O.type]||yl;if(A.colorSpace&&"rgb"!==A.colorSpace){var Mt=Hs[A.colorSpace];Tt=function(Bt,Ht){return Mt.reverse(Mt.interpolate(Mt.forward(Bt),Mt.forward(Ht),je))}}return"function"==typeof Qe.evaluate?{evaluate:function(){for(var Bt=[],Ht=arguments.length;Ht--;)Bt[Ht]=arguments[Ht];var Vt=Qe.evaluate.apply(void 0,Bt),an=lt.evaluate.apply(void 0,Bt);if(void 0!==Vt&&void 0!==an)return Tt(Vt,an,je)}}:Tt(Qe,lt,je)}function Ws(A,O,Z){return"color"===O.type?Z=sn.parse(Z):"formatted"===O.type?Z=zn.fromString(Z.toString()):"resolvedImage"===O.type?Z=Fn.fromString(Z.toString()):ni(Z)===O.type||"enum"===O.type&&O.values[Z]||(Z=void 0),cs(Z,A.default,O.default)}Un.register(Wo,{error:[{kind:"error"},[gt],function(A,O){throw new $n(O[0].evaluate(A))}],typeof:[gt,[Nt],function(A,O){return nn(Xn(O[0].evaluate(A)))}],"to-rgba":[fn(Et,4),[It],function(A,O){return O[0].evaluate(A).toArray()}],rgb:[It,[Et,Et,Et],so],rgba:[It,[Et,Et,Et,Et],so],has:{type:kt,overloads:[[[gt],function(A,O){return Zs(O[0].evaluate(A),A.properties())}],[[gt,Ut],function(A,O){var ie=O[1];return Zs(O[0].evaluate(A),ie.evaluate(A))}]]},get:{type:Nt,overloads:[[[gt],function(A,O){return Ys(O[0].evaluate(A),A.properties())}],[[gt,Ut],function(A,O){var ie=O[1];return Ys(O[0].evaluate(A),ie.evaluate(A))}]]},"feature-state":[Nt,[gt],function(A,O){return Ys(O[0].evaluate(A),A.featureState||{})}],properties:[Ut,[],function(A){return A.properties()}],"geometry-type":[gt,[],function(A){return A.geometryType()}],id:[Nt,[],function(A){return A.id()}],zoom:[Et,[],function(A){return A.globals.zoom}],"heatmap-density":[Et,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Et,[],function(A){return A.globals.lineProgress||0}],accumulated:[Nt,[],function(A){return void 0===A.globals.accumulated?null:A.globals.accumulated}],"+":[Et,Oo(Et),function(A,O){for(var Z=0,ie=0,_e=O;ie<_e.length;ie+=1)Z+=_e[ie].evaluate(A);return Z}],"*":[Et,Oo(Et),function(A,O){for(var Z=1,ie=0,_e=O;ie<_e.length;ie+=1)Z*=_e[ie].evaluate(A);return Z}],"-":{type:Et,overloads:[[[Et,Et],function(A,O){var ie=O[1];return O[0].evaluate(A)-ie.evaluate(A)}],[[Et],function(A,O){return-O[0].evaluate(A)}]]},"/":[Et,[Et,Et],function(A,O){var ie=O[1];return O[0].evaluate(A)/ie.evaluate(A)}],"%":[Et,[Et,Et],function(A,O){var ie=O[1];return O[0].evaluate(A)%ie.evaluate(A)}],ln2:[Et,[],function(){return Math.LN2}],pi:[Et,[],function(){return Math.PI}],e:[Et,[],function(){return Math.E}],"^":[Et,[Et,Et],function(A,O){var ie=O[1];return Math.pow(O[0].evaluate(A),ie.evaluate(A))}],sqrt:[Et,[Et],function(A,O){return Math.sqrt(O[0].evaluate(A))}],log10:[Et,[Et],function(A,O){return Math.log(O[0].evaluate(A))/Math.LN10}],ln:[Et,[Et],function(A,O){return Math.log(O[0].evaluate(A))}],log2:[Et,[Et],function(A,O){return Math.log(O[0].evaluate(A))/Math.LN2}],sin:[Et,[Et],function(A,O){return Math.sin(O[0].evaluate(A))}],cos:[Et,[Et],function(A,O){return Math.cos(O[0].evaluate(A))}],tan:[Et,[Et],function(A,O){return Math.tan(O[0].evaluate(A))}],asin:[Et,[Et],function(A,O){return Math.asin(O[0].evaluate(A))}],acos:[Et,[Et],function(A,O){return Math.acos(O[0].evaluate(A))}],atan:[Et,[Et],function(A,O){return Math.atan(O[0].evaluate(A))}],min:[Et,Oo(Et),function(A,O){return Math.min.apply(Math,O.map(function(Z){return Z.evaluate(A)}))}],max:[Et,Oo(Et),function(A,O){return Math.max.apply(Math,O.map(function(Z){return Z.evaluate(A)}))}],abs:[Et,[Et],function(A,O){return Math.abs(O[0].evaluate(A))}],round:[Et,[Et],function(A,O){var Z=O[0].evaluate(A);return Z<0?-Math.round(-Z):Math.round(Z)}],floor:[Et,[Et],function(A,O){return Math.floor(O[0].evaluate(A))}],ceil:[Et,[Et],function(A,O){return Math.ceil(O[0].evaluate(A))}],"filter-==":[kt,[gt,Nt],function(A,O){var Z=O[0],ie=O[1];return A.properties()[Z.value]===ie.value}],"filter-id-==":[kt,[Nt],function(A,O){var Z=O[0];return A.id()===Z.value}],"filter-type-==":[kt,[gt],function(A,O){var Z=O[0];return A.geometryType()===Z.value}],"filter-<":[kt,[gt,Nt],function(A,O){var Z=O[0],ie=O[1],_e=A.properties()[Z.value],Le=ie.value;return typeof _e==typeof Le&&_e<Le}],"filter-id-<":[kt,[Nt],function(A,O){var Z=O[0],ie=A.id(),_e=Z.value;return typeof ie==typeof _e&&ie<_e}],"filter->":[kt,[gt,Nt],function(A,O){var Z=O[0],ie=O[1],_e=A.properties()[Z.value],Le=ie.value;return typeof _e==typeof Le&&_e>Le}],"filter-id->":[kt,[Nt],function(A,O){var Z=O[0],ie=A.id(),_e=Z.value;return typeof ie==typeof _e&&ie>_e}],"filter-<=":[kt,[gt,Nt],function(A,O){var Z=O[0],ie=O[1],_e=A.properties()[Z.value],Le=ie.value;return typeof _e==typeof Le&&_e<=Le}],"filter-id-<=":[kt,[Nt],function(A,O){var Z=O[0],ie=A.id(),_e=Z.value;return typeof ie==typeof _e&&ie<=_e}],"filter->=":[kt,[gt,Nt],function(A,O){var Z=O[0],ie=O[1],_e=A.properties()[Z.value],Le=ie.value;return typeof _e==typeof Le&&_e>=Le}],"filter-id->=":[kt,[Nt],function(A,O){var Z=O[0],ie=A.id(),_e=Z.value;return typeof ie==typeof _e&&ie>=_e}],"filter-has":[kt,[Nt],function(A,O){return O[0].value in A.properties()}],"filter-has-id":[kt,[],function(A){return null!==A.id()&&void 0!==A.id()}],"filter-type-in":[kt,[fn(gt)],function(A,O){return O[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[kt,[fn(Nt)],function(A,O){return O[0].value.indexOf(A.id())>=0}],"filter-in-small":[kt,[gt,fn(Nt)],function(A,O){var Z=O[0];return O[1].value.indexOf(A.properties()[Z.value])>=0}],"filter-in-large":[kt,[gt,fn(Nt)],function(A,O){var Z=O[0],ie=O[1];return function(_e,Le,je,Qe){for(;je<=Qe;){var lt=je+Qe>>1;if(Le[lt]===_e)return!0;Le[lt]>_e?Qe=lt-1:je=lt+1}return!1}(A.properties()[Z.value],ie.value,0,ie.value.length-1)}],all:{type:kt,overloads:[[[kt,kt],function(A,O){var ie=O[1];return O[0].evaluate(A)&&ie.evaluate(A)}],[Oo(kt),function(A,O){for(var Z=0,ie=O;Z<ie.length;Z+=1)if(!ie[Z].evaluate(A))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],function(A,O){var ie=O[1];return O[0].evaluate(A)||ie.evaluate(A)}],[Oo(kt),function(A,O){for(var Z=0,ie=O;Z<ie.length;Z+=1)if(ie[Z].evaluate(A))return!0;return!1}]]},"!":[kt,[kt],function(A,O){return!O[0].evaluate(A)}],"is-supported-script":[kt,[gt],function(A,O){var ie=A.globals&&A.globals.isSupportedScript;return!ie||ie(O[0].evaluate(A))}],upcase:[gt,[gt],function(A,O){return O[0].evaluate(A).toUpperCase()}],downcase:[gt,[gt],function(A,O){return O[0].evaluate(A).toLowerCase()}],concat:[gt,Oo(Nt),function(A,O){return O.map(function(Z){return mr(Z.evaluate(A))}).join("")}],"resolved-locale":[gt,[qt],function(A,O){return O[0].evaluate(A).resolvedLocale()}]});var fs=function(A,O){var Z;this.expression=A,this._warningHistory={},this._evaluator=new qn,this._defaultValue=O?"color"===(Z=O).type&&_o(Z.default)?new sn(0,0,0,0):"color"===Z.type?sn.parse(Z.default)||null:void 0===Z.default?null:Z.default:null,this._enumValues=O&&"enum"===O.type?O.values:null};function Ko(A){return Array.isArray(A)&&A.length>0&&"string"==typeof A[0]&&A[0]in Wo}function hs(A,O){var _e,Le,Z=new ir(Wo,[],O?(Le={color:It,string:gt,number:Et,enum:gt,boolean:kt,formatted:Xt,resolvedImage:Kt},"array"===(_e=O).type?fn(Le[_e.value]||Nt,_e.length):Le[_e.type]):void 0),ie=Z.parse(A,void 0,void 0,void 0,O&&"string"===O.type?{typeAnnotation:"coerce"}:void 0);return ie?Ms(new fs(ie,O)):bo(Z.errors)}fs.prototype.evaluateWithoutErrorHandling=function(A,O,Z,ie,_e,Le){return this._evaluator.globals=A,this._evaluator.feature=O,this._evaluator.featureState=Z,this._evaluator.canonical=ie,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Le,this.expression.evaluate(this._evaluator)},fs.prototype.evaluate=function(A,O,Z,ie,_e,Le){this._evaluator.globals=A,this._evaluator.feature=O||null,this._evaluator.featureState=Z||null,this._evaluator.canonical=ie,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Le||null;try{var je=this.expression.evaluate(this._evaluator);if(null==je||"number"==typeof je&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new $n("Expected value to be one of "+Object.keys(this._enumValues).map(function(Qe){return JSON.stringify(Qe)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}};var Ro=function(A,O){this.kind=A,this._styleExpression=O,this.isStateDependent="constant"!==A&&!nr(O.expression)};Ro.prototype.evaluateWithoutErrorHandling=function(A,O,Z,ie,_e,Le){return this._styleExpression.evaluateWithoutErrorHandling(A,O,Z,ie,_e,Le)},Ro.prototype.evaluate=function(A,O,Z,ie,_e,Le){return this._styleExpression.evaluate(A,O,Z,ie,_e,Le)};var Do=function(A,O,Z,ie){this.kind=A,this.zoomStops=Z,this._styleExpression=O,this.isStateDependent="camera"!==A&&!nr(O.expression),this.interpolationType=ie};function $o(A,O){if("error"===(A=hs(A,O)).result)return A;var Z=A.value.expression,ie=Gn(Z);if(!ie&&!Xo(O))return bo([new Lt("","data expressions not supported")]);var _e=tr(Z,["zoom"]);if(!_e&&!Io(O))return bo([new Lt("","zoom expressions not supported")]);var Le=ds(Z);return Le||_e?Le instanceof Lt?bo([Le]):Le instanceof Fi&&!lo(O)?bo([new Lt("",'"interpolate" expressions cannot be used with this property')]):Ms(Le?new Do(ie?"camera":"composite",A.value,Le.labels,Le instanceof Fi?Le.interpolation:void 0):new Ro(ie?"constant":"source",A.value)):bo([new Lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Do.prototype.evaluateWithoutErrorHandling=function(A,O,Z,ie,_e,Le){return this._styleExpression.evaluateWithoutErrorHandling(A,O,Z,ie,_e,Le)},Do.prototype.evaluate=function(A,O,Z,ie,_e,Le){return this._styleExpression.evaluate(A,O,Z,ie,_e,Le)},Do.prototype.interpolationFactor=function(A,O,Z){return this.interpolationType?Fi.interpolationFactor(this.interpolationType,A,O,Z):0};var ps=function(A,O){this._parameters=A,this._specification=O,it(this,Ss(this._parameters,this._specification))};function ds(A){var O=null;if(A instanceof Ea)O=ds(A.result);else if(A instanceof ba)for(var Z=0,ie=A.args;Z<ie.length&&!(O=ds(ie[Z]));Z+=1);else(A instanceof xr||A instanceof Fi)&&A.input instanceof Un&&"zoom"===A.input.name&&(O=A);return O instanceof Lt||A.eachChild(function(Le){var je=ds(Le);je instanceof Lt?O=je:!O&&je?O=new Lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):O&&je&&O!==je&&(O=new Lt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),O}function za(A){var O=A.key,Z=A.value,ie=A.valueSpec||{},_e=A.objectElementValidators||{},Le=A.style,je=A.styleSpec,Qe=[],lt=ni(Z);if("object"!==lt)return[new ze(O,Z,"object expected, "+lt+" found")];for(var Tt in Z){var Mt=Tt.split(".")[0],Bt=ie[Mt]||ie["*"],Ht=void 0;if(_e[Mt])Ht=_e[Mt];else if(ie[Mt])Ht=bi;else if(_e["*"])Ht=_e["*"];else{if(!ie["*"]){Qe.push(new ze(O,Z[Tt],'unknown property "'+Tt+'"'));continue}Ht=bi}Qe=Qe.concat(Ht({key:(O&&O+".")+Tt,value:Z[Tt],valueSpec:Bt,style:Le,styleSpec:je,object:Z,objectKey:Tt},Z))}for(var Vt in ie)_e[Vt]||ie[Vt].required&&void 0===ie[Vt].default&&void 0===Z[Vt]&&Qe.push(new ze(O,Z,'missing required property "'+Vt+'"'));return Qe}function gs(A){var O=A.value,Z=A.valueSpec,ie=A.style,_e=A.styleSpec,Le=A.key,je=A.arrayElementValidator||bi;if("array"!==ni(O))return[new ze(Le,O,"array expected, "+ni(O)+" found")];if(Z.length&&O.length!==Z.length)return[new ze(Le,O,"array length "+Z.length+" expected, length "+O.length+" found")];if(Z["min-length"]&&O.length<Z["min-length"])return[new ze(Le,O,"array length at least "+Z["min-length"]+" expected, length "+O.length+" found")];var Qe={type:Z.value,values:Z.values};_e.$version<7&&(Qe.function=Z.function),"object"===ni(Z.value)&&(Qe=Z.value);for(var lt=[],Tt=0;Tt<O.length;Tt++)lt=lt.concat(je({array:O,arrayIndex:Tt,value:O[Tt],valueSpec:Qe,style:ie,styleSpec:_e,key:Le+"["+Tt+"]"}));return lt}function vs(A){var O=A.key,Z=A.value,ie=A.valueSpec,_e=ni(Z);return"number"===_e&&Z!=Z&&(_e="NaN"),"number"!==_e?[new ze(O,Z,"number expected, "+_e+" found")]:"minimum"in ie&&Z<ie.minimum?[new ze(O,Z,Z+" is less than the minimum value "+ie.minimum)]:"maximum"in ie&&Z>ie.maximum?[new ze(O,Z,Z+" is greater than the maximum value "+ie.maximum)]:[]}function Xs(A){var O,Z,ie,_e=A.valueSpec,Le=ct(A.value.type),je={},Qe="categorical"!==Le&&void 0===A.value.property,lt=!Qe,Tt="array"===ni(A.value.stops)&&"array"===ni(A.value.stops[0])&&"object"===ni(A.value.stops[0][0]),Mt=za({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Vt){if("identity"===Le)return[new ze(Vt.key,Vt.value,'identity function may not have a "stops" property')];var an=[],yn=Vt.value;return an=an.concat(gs({key:Vt.key,value:yn,valueSpec:Vt.valueSpec,style:Vt.style,styleSpec:Vt.styleSpec,arrayElementValidator:Bt})),"array"===ni(yn)&&0===yn.length&&an.push(new ze(Vt.key,yn,"array must have at least one stop")),an},default:function(Vt){return bi({key:Vt.key,value:Vt.value,valueSpec:_e,style:Vt.style,styleSpec:Vt.styleSpec})}}});return"identity"===Le&&Qe&&Mt.push(new ze(A.key,A.value,'missing required property "property"')),"identity"===Le||A.value.stops||Mt.push(new ze(A.key,A.value,'missing required property "stops"')),"exponential"===Le&&A.valueSpec.expression&&!lo(A.valueSpec)&&Mt.push(new ze(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(lt&&!Xo(A.valueSpec)?Mt.push(new ze(A.key,A.value,"property functions not supported")):Qe&&!Io(A.valueSpec)&&Mt.push(new ze(A.key,A.value,"zoom functions not supported"))),"categorical"!==Le&&!Tt||void 0!==A.value.property||Mt.push(new ze(A.key,A.value,'"property" property is required')),Mt;function Bt(Vt){var an=[],yn=Vt.value,On=Vt.key;if("array"!==ni(yn))return[new ze(On,yn,"array expected, "+ni(yn)+" found")];if(2!==yn.length)return[new ze(On,yn,"array length 2 expected, length "+yn.length+" found")];if(Tt){if("object"!==ni(yn[0]))return[new ze(On,yn,"object expected, "+ni(yn[0])+" found")];if(void 0===yn[0].zoom)return[new ze(On,yn,"object stop key must have zoom")];if(void 0===yn[0].value)return[new ze(On,yn,"object stop key must have value")];if(ie&&ie>ct(yn[0].zoom))return[new ze(On,yn[0].zoom,"stop zoom values must appear in ascending order")];ct(yn[0].zoom)!==ie&&(ie=ct(yn[0].zoom),Z=void 0,je={}),an=an.concat(za({key:On+"[0]",value:yn[0],valueSpec:{zoom:{}},style:Vt.style,styleSpec:Vt.styleSpec,objectElementValidators:{zoom:vs,value:Ht}}))}else an=an.concat(Ht({key:On+"[0]",value:yn[0],valueSpec:{},style:Vt.style,styleSpec:Vt.styleSpec},yn));return Ko(mt(yn[1]))?an.concat([new ze(On+"[1]",yn[1],"expressions are not allowed in function stops.")]):an.concat(bi({key:On+"[1]",value:yn[1],valueSpec:_e,style:Vt.style,styleSpec:Vt.styleSpec}))}function Ht(Vt,an){var yn=ni(Vt.value),On=ct(Vt.value),Pn=null!==Vt.value?Vt.value:an;if(O){if(yn!==O)return[new ze(Vt.key,Pn,yn+" stop domain type must match previous stop domain type "+O)]}else O=yn;if("number"!==yn&&"string"!==yn&&"boolean"!==yn)return[new ze(Vt.key,Pn,"stop domain value must be a number, string, or boolean")];if("number"!==yn&&"categorical"!==Le){var Nn="number expected, "+yn+" found";return Xo(_e)&&void 0===Le&&(Nn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ze(Vt.key,Pn,Nn)]}return"categorical"!==Le||"number"!==yn||isFinite(On)&&Math.floor(On)===On?"categorical"!==Le&&"number"===yn&&void 0!==Z&&On<Z?[new ze(Vt.key,Pn,"stop domain values must appear in ascending order")]:(Z=On,"categorical"===Le&&On in je?[new ze(Vt.key,Pn,"stop domain values must be unique")]:(je[On]=!0,[])):[new ze(Vt.key,Pn,"integer expected, found "+On)]}}function wo(A){var O=("property"===A.expressionContext?$o:hs)(mt(A.value),A.valueSpec);if("error"===O.result)return O.value.map(function(ie){return new ze(""+A.key+ie.key,A.value,ie.message)});var Z=O.value.expression||O.value._styleExpression.expression;if("property"===A.expressionContext&&"text-font"===A.propertyKey&&!Z.outputDefined())return[new ze(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===A.expressionContext&&"layout"===A.propertyType&&!nr(Z))return[new ze(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===A.expressionContext&&!nr(Z))return[new ze(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&0===A.expressionContext.indexOf("cluster")){if(!tr(Z,["zoom","feature-state"]))return[new ze(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===A.expressionContext&&!Gn(Z))return[new ze(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Es(A){var O=A.key,Z=A.value,ie=A.valueSpec,_e=[];return Array.isArray(ie.values)?-1===ie.values.indexOf(ct(Z))&&_e.push(new ze(O,Z,"expected one of ["+ie.values.join(", ")+"], "+JSON.stringify(Z)+" found")):-1===Object.keys(ie.values).indexOf(ct(Z))&&_e.push(new ze(O,Z,"expected one of ["+Object.keys(ie.values).join(", ")+"], "+JSON.stringify(Z)+" found")),_e}function ms(A){if(!0===A||!1===A)return!0;if(!Array.isArray(A)||0===A.length)return!1;switch(A[0]){case"has":return A.length>=2&&"$id"!==A[1]&&"$type"!==A[1];case"in":return A.length>=3&&("string"!=typeof A[1]||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==A.length||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var O=0,Z=A.slice(1);O<Z.length;O+=1){var ie=Z[O];if(!ms(ie)&&"boolean"!=typeof ie)return!1}return!0;default:return!0}}ps.deserialize=function(A){return new ps(A._parameters,A._specification)},ps.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var Js={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ys(A){if(null==A)return{filter:function(){return!0},needGeometry:!1};ms(A)||(A=Bo(A));var O=hs(A,Js);if("error"===O.result)throw new Error(O.value.map(function(Z){return Z.key+": "+Z.message}).join(", "));return{filter:function(Z,ie,_e){return O.value.evaluate(Z,ie,{},_e)},needGeometry:Fo(A)}}function Qo(A,O){return A<O?-1:A>O?1:0}function Fo(A){if(!Array.isArray(A))return!1;if("within"===A[0])return!0;for(var O=1;O<A.length;O++)if(Fo(A[O]))return!0;return!1}function Bo(A){if(!A)return!0;var O,Z=A[0];return A.length<=1?"any"!==Z:"=="===Z?li(A[1],A[2],"=="):"!="===Z?Wi(li(A[1],A[2],"==")):"<"===Z||">"===Z||"<="===Z||">="===Z?li(A[1],A[2],Z):"any"===Z?(O=A.slice(1),["any"].concat(O.map(Bo))):"all"===Z?["all"].concat(A.slice(1).map(Bo)):"none"===Z?["all"].concat(A.slice(1).map(Bo).map(Wi)):"in"===Z?To(A[1],A.slice(2)):"!in"===Z?Wi(To(A[1],A.slice(2))):"has"===Z?ko(A[1]):"!has"===Z?Wi(ko(A[1])):"within"!==Z||A}function li(A,O,Z){switch(A){case"$type":return["filter-type-"+Z,O];case"$id":return["filter-id-"+Z,O];default:return["filter-"+Z,A,O]}}function To(A,O){if(0===O.length)return!1;switch(A){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(Z){return typeof Z!=typeof O[0]})?["filter-in-large",A,["literal",O.sort(Qo)]]:["filter-in-small",A,["literal",O]]}}function ko(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Wi(A){return["!",A]}function Jr(A){return ms(mt(A.value))?wo(it({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$r(A)}function $r(A){var O=A.value,Z=A.key;if("array"!==ni(O))return[new ze(Z,O,"array expected, "+ni(O)+" found")];var ie,_e=A.styleSpec,Le=[];if(O.length<1)return[new ze(Z,O,"filter array must have at least 1 element")];switch(Le=Le.concat(Es({key:Z+"[0]",value:O[0],valueSpec:_e.filter_operator,style:A.style,styleSpec:A.styleSpec})),ct(O[0])){case"<":case"<=":case">":case">=":O.length>=2&&"$type"===ct(O[1])&&Le.push(new ze(Z,O,'"$type" cannot be use with operator "'+O[0]+'"'));case"==":case"!=":3!==O.length&&Le.push(new ze(Z,O,'filter array for operator "'+O[0]+'" must have 3 elements'));case"in":case"!in":O.length>=2&&"string"!==(ie=ni(O[1]))&&Le.push(new ze(Z+"[1]",O[1],"string expected, "+ie+" found"));for(var je=2;je<O.length;je++)ie=ni(O[je]),"$type"===ct(O[1])?Le=Le.concat(Es({key:Z+"["+je+"]",value:O[je],valueSpec:_e.geometry_type,style:A.style,styleSpec:A.styleSpec})):"string"!==ie&&"number"!==ie&&"boolean"!==ie&&Le.push(new ze(Z+"["+je+"]",O[je],"string, number, or boolean expected, "+ie+" found"));break;case"any":case"all":case"none":for(var Qe=1;Qe<O.length;Qe++)Le=Le.concat($r({key:Z+"["+Qe+"]",value:O[Qe],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":ie=ni(O[1]),2!==O.length?Le.push(new ze(Z,O,'filter array for "'+O[0]+'" operator must have 2 elements')):"string"!==ie&&Le.push(new ze(Z+"[1]",O[1],"string expected, "+ie+" found"));break;case"within":ie=ni(O[1]),2!==O.length?Le.push(new ze(Z,O,'filter array for "'+O[0]+'" operator must have 2 elements')):"object"!==ie&&Le.push(new ze(Z+"[1]",O[1],"object expected, "+ie+" found"))}return Le}function uo(A,O){var Z=A.key,ie=A.style,_e=A.styleSpec,Le=A.value,je=A.objectKey,Qe=_e[O+"_"+A.layerType];if(!Qe)return[];var lt=je.match(/^(.*)-transition$/);if("paint"===O&&lt&&Qe[lt[1]]&&Qe[lt[1]].transition)return bi({key:Z,value:Le,valueSpec:_e.transition,style:ie,styleSpec:_e});var Tt,Mt=A.valueSpec||Qe[je];if(!Mt)return[new ze(Z,Le,'unknown property "'+je+'"')];if("string"===ni(Le)&&Xo(Mt)&&!Mt.tokens&&(Tt=/^{([^}]+)}$/.exec(Le)))return[new ze(Z,Le,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Tt[1])+" }`.")];var Bt=[];return"symbol"===A.layerType&&("text-field"===je&&ie&&!ie.glyphs&&Bt.push(new ze(Z,Le,'use of "text-field" requires a style "glyphs" property')),"text-font"===je&&_o(mt(Le))&&"identity"===ct(Le.type)&&Bt.push(new ze(Z,Le,'"text-font" does not support identity functions'))),Bt.concat(bi({key:A.key,value:Le,valueSpec:Mt,style:ie,styleSpec:_e,expressionContext:"property",propertyType:O,propertyKey:je}))}function Ka(A){return uo(A,"paint")}function Ls(A){return uo(A,"layout")}function Ks(A){var O=[],Z=A.value,ie=A.key,_e=A.style,Le=A.styleSpec;Z.type||Z.ref||O.push(new ze(ie,Z,'either "type" or "ref" is required'));var je,Qe=ct(Z.type),lt=ct(Z.ref);if(Z.id)for(var Tt=ct(Z.id),Mt=0;Mt<A.arrayIndex;Mt++){var Bt=_e.layers[Mt];ct(Bt.id)===Tt&&O.push(new ze(ie,Z.id,'duplicate layer id "'+Z.id+'", previously used at line '+Bt.id.__line__))}if("ref"in Z)["type","source","source-layer","filter","layout"].forEach(function(an){an in Z&&O.push(new ze(ie,Z[an],'"'+an+'" is prohibited for ref layers'))}),_e.layers.forEach(function(an){ct(an.id)===lt&&(je=an)}),je?je.ref?O.push(new ze(ie,Z.ref,"ref cannot reference another ref layer")):Qe=ct(je.type):O.push(new ze(ie,Z.ref,'ref layer "'+lt+'" not found'));else if("background"!==Qe)if(Z.source){var Ht=_e.sources&&_e.sources[Z.source],Vt=Ht&&ct(Ht.type);Ht?"vector"===Vt&&"raster"===Qe?O.push(new ze(ie,Z.source,'layer "'+Z.id+'" requires a raster source')):"raster"===Vt&&"raster"!==Qe?O.push(new ze(ie,Z.source,'layer "'+Z.id+'" requires a vector source')):"vector"!==Vt||Z["source-layer"]?"raster-dem"===Vt&&"hillshade"!==Qe?O.push(new ze(ie,Z.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Qe||!Z.paint||!Z.paint["line-gradient"]||"geojson"===Vt&&Ht.lineMetrics||O.push(new ze(ie,Z,'layer "'+Z.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new ze(ie,Z,'layer "'+Z.id+'" must specify a "source-layer"')):O.push(new ze(ie,Z.source,'source "'+Z.source+'" not found'))}else O.push(new ze(ie,Z,'missing required property "source"'));return O=O.concat(za({key:ie,value:Z,valueSpec:Le.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return bi({key:ie+".type",value:Z.type,valueSpec:Le.layer.type,style:A.style,styleSpec:A.styleSpec,object:Z,objectKey:"type"})},filter:Jr,layout:function(an){return za({layer:Z,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(yn){return Ls(it({layerType:Qe},yn))}}})},paint:function(an){return za({layer:Z,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(yn){return Ka(it({layerType:Qe},yn))}}})}}}))}function No(A){var O=A.value,Z=A.key,ie=ni(O);return"string"!==ie?[new ze(Z,O,"string expected, "+ie+" found")]:[]}var $s={promoteId:function(A){var O=A.key,Z=A.value;if("string"===ni(Z))return No({key:O,value:Z});var ie=[];for(var _e in Z)ie.push.apply(ie,No({key:O+"."+_e,value:Z[_e]}));return ie}};function jo(A){var O=A.value,Z=A.key,ie=A.styleSpec,_e=A.style;if(!O.type)return[new ze(Z,O,'"type" is required')];var Le,je=ct(O.type);switch(je){case"vector":case"raster":case"raster-dem":return za({key:Z,value:O,valueSpec:ie["source_"+je.replace("-","_")],style:A.style,styleSpec:ie,objectElementValidators:$s});case"geojson":if(Le=za({key:Z,value:O,valueSpec:ie.source_geojson,style:_e,styleSpec:ie,objectElementValidators:$s}),O.cluster)for(var Qe in O.clusterProperties){var lt=O.clusterProperties[Qe],Tt=lt[0],Bt="string"==typeof Tt?[Tt,["accumulated"],["get",Qe]]:Tt;Le.push.apply(Le,wo({key:Z+"."+Qe+".map",value:lt[1],expressionContext:"cluster-map"})),Le.push.apply(Le,wo({key:Z+"."+Qe+".reduce",value:Bt,expressionContext:"cluster-reduce"}))}return Le;case"video":return za({key:Z,value:O,valueSpec:ie.source_video,style:_e,styleSpec:ie});case"image":return za({key:Z,value:O,valueSpec:ie.source_image,style:_e,styleSpec:ie});case"canvas":return[new ze(Z,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Es({key:Z+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_e,styleSpec:ie})}}function co(A){var O=A.value,Z=A.styleSpec,ie=Z.light,_e=A.style,Le=[],je=ni(O);if(void 0===O)return Le;if("object"!==je)return Le.concat([new ze("light",O,"object expected, "+je+" found")]);for(var Qe in O){var lt=Qe.match(/^(.*)-transition$/);Le=Le.concat(lt&&ie[lt[1]]&&ie[lt[1]].transition?bi({key:Qe,value:O[Qe],valueSpec:Z.transition,style:_e,styleSpec:Z}):ie[Qe]?bi({key:Qe,value:O[Qe],valueSpec:ie[Qe],style:_e,styleSpec:Z}):[new ze(Qe,O[Qe],'unknown property "'+Qe+'"')])}return Le}var Uo={"*":function(){return[]},array:gs,boolean:function(A){var O=A.value,Z=A.key,ie=ni(O);return"boolean"!==ie?[new ze(Z,O,"boolean expected, "+ie+" found")]:[]},number:vs,color:function(A){var O=A.key,Z=A.value,ie=ni(Z);return"string"!==ie?[new ze(O,Z,"color expected, "+ie+" found")]:null===on(Z)?[new ze(O,Z,'color expected, "'+Z+'" found')]:[]},constants:Ke,enum:Es,filter:Jr,function:Xs,layer:Ks,object:za,source:jo,light:co,string:No,formatted:function(A){return 0===No(A).length?[]:wo(A)},resolvedImage:function(A){return 0===No(A).length?[]:wo(A)}};function bi(A){var O=A.value,Z=A.valueSpec,ie=A.styleSpec;return Z.expression&&_o(ct(O))?Xs(A):Z.expression&&Ko(mt(O))?wo(A):Z.type&&Uo[Z.type]?Uo[Z.type](A):za(it({},A,{valueSpec:Z.type?ie[Z.type]:Z}))}function $a(A){var O=A.value,Z=A.key,ie=No(A);return ie.length||(-1===O.indexOf("{fontstack}")&&ie.push(new ze(Z,O,'"glyphs" url must include a "{fontstack}" token')),-1===O.indexOf("{range}")&&ie.push(new ze(Z,O,'"glyphs" url must include a "{range}" token'))),ie}function Vo(A,O){void 0===O&&(O=Se);var Z=[];return Z=Z.concat(bi({key:"",value:A,valueSpec:O.$root,styleSpec:O,style:A,objectElementValidators:{glyphs:$a,"*":function(){return[]}}})),A.constants&&(Z=Z.concat(Ke({key:"constants",value:A.constants,style:A,styleSpec:O}))),Ri(Z)}function Ri(A){return[].concat(A).sort(function(O,Z){return O.line-Z.line})}function Xi(A){return function(){for(var O=[],Z=arguments.length;Z--;)O[Z]=arguments[Z];return Ri(A.apply(this,O))}}Vo.source=Xi(jo),Vo.light=Xi(co),Vo.layer=Xi(Ks),Vo.filter=Xi(Jr),Vo.paintProperty=Xi(Ka),Vo.layoutProperty=Xi(Ls);var Ji=Vo,Zi=Ji.light,ca=Ji.paintProperty,Ao=Ji.layoutProperty;function Ra(A,O){var Z=!1;if(O&&O.length)for(var ie=0,_e=O;ie<_e.length;ie+=1)A.fire(new Je(new Error(_e[ie].message))),Z=!0;return Z}var Bi=_a;function _a(A,O,Z){var ie=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var _e=new Int32Array(this.arrayBuffer);A=_e[0],this.d=(O=_e[1])+2*(Z=_e[2]);for(var Le=0;Le<this.d*this.d;Le++){var je=_e[3+Le],Qe=_e[3+Le+1];ie.push(je===Qe?null:_e.subarray(je,Qe))}var Tt=_e[3+ie.length+1];this.keys=_e.subarray(_e[3+ie.length],Tt),this.bboxes=_e.subarray(Tt),this.insert=this._insertReadonly}else{this.d=O+2*Z;for(var Mt=0;Mt<this.d*this.d;Mt++)ie.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=A,this.padding=Z,this.scale=O/A,this.uid=0;var Bt=Z/O*A;this.min=-Bt,this.max=A+Bt}_a.prototype.insert=function(A,O,Z,ie,_e){this._forEachCell(O,Z,ie,_e,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(O),this.bboxes.push(Z),this.bboxes.push(ie),this.bboxes.push(_e)},_a.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},_a.prototype._insertCell=function(A,O,Z,ie,_e,Le){this.cells[_e].push(Le)},_a.prototype.query=function(A,O,Z,ie,_e){var Le=this.min,je=this.max;if(A<=Le&&O<=Le&&je<=Z&&je<=ie&&!_e)return Array.prototype.slice.call(this.keys);var Qe=[];return this._forEachCell(A,O,Z,ie,this._queryCell,Qe,{},_e),Qe},_a.prototype._queryCell=function(A,O,Z,ie,_e,Le,je,Qe){var lt=this.cells[_e];if(null!==lt)for(var Tt=this.keys,Mt=this.bboxes,Bt=0;Bt<lt.length;Bt++){var Ht=lt[Bt];if(void 0===je[Ht]){var Vt=4*Ht;(Qe?Qe(Mt[Vt+0],Mt[Vt+1],Mt[Vt+2],Mt[Vt+3]):A<=Mt[Vt+2]&&O<=Mt[Vt+3]&&Z>=Mt[Vt+0]&&ie>=Mt[Vt+1])?(je[Ht]=!0,Le.push(Tt[Ht])):je[Ht]=!1}}},_a.prototype._forEachCell=function(A,O,Z,ie,_e,Le,je,Qe){for(var lt=this._convertToCellCoord(A),Tt=this._convertToCellCoord(O),Mt=this._convertToCellCoord(Z),Bt=this._convertToCellCoord(ie),Ht=lt;Ht<=Mt;Ht++)for(var Vt=Tt;Vt<=Bt;Vt++){var an=this.d*Vt+Ht;if((!Qe||Qe(this._convertFromCellCoord(Ht),this._convertFromCellCoord(Vt),this._convertFromCellCoord(Ht+1),this._convertFromCellCoord(Vt+1)))&&_e.call(this,A,O,Z,ie,an,Le,je,Qe))return}},_a.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},_a.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},_a.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,O=3+this.cells.length+1+1,Z=0,ie=0;ie<this.cells.length;ie++)Z+=this.cells[ie].length;var _e=new Int32Array(O+Z+this.keys.length+this.bboxes.length);_e[0]=this.extent,_e[1]=this.n,_e[2]=this.padding;for(var Le=O,je=0;je<A.length;je++){var Qe=A[je];_e[3+je]=Le,_e.set(Qe,Le),Le+=Qe.length}return _e[3+A.length]=Le,_e.set(this.keys,Le),_e[3+A.length+1]=Le+=this.keys.length,_e.set(this.bboxes,Le),Le+=this.bboxes.length,_e.buffer};var Cs=self.ImageData,Ps=self.ImageBitmap,oa={};function wr(A,O,Z){void 0===Z&&(Z={}),Object.defineProperty(O,"_classRegistryKey",{value:A,writeable:!1}),oa[A]={klass:O,omit:Z.omit||[],shallow:Z.shallow||[]}}for(var Ho in wr("Object",Object),Bi.serialize=function(A,O){var Z=A.toArrayBuffer();return O&&O.push(Z),{buffer:Z}},Bi.deserialize=function(A){return new Bi(A.buffer)},wr("Grid",Bi),wr("Color",sn),wr("Error",Error),wr("ResolvedImage",Fn),wr("StylePropertyFunction",ps),wr("StyleExpression",fs,{omit:["_evaluator"]}),wr("ZoomDependentExpression",Do),wr("ZoomConstantExpression",Ro),wr("CompoundExpression",Un,{omit:["_evaluate"]}),Wo)Wo[Ho]._classRegistryKey||wr("Expression_"+Ho,Wo[Ho]);function fa(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&"ArrayBuffer"===A.constructor.name)}function Os(A){return Ps&&A instanceof Ps}function es(A,O){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(fa(A)||Os(A))return O&&O.push(A),A;if(ArrayBuffer.isView(A)){var Z=A;return O&&O.push(Z.buffer),Z}if(A instanceof Cs)return O&&O.push(A.data.buffer),A;if(Array.isArray(A)){for(var ie=[],_e=0,Le=A;_e<Le.length;_e+=1)ie.push(es(Le[_e],O));return ie}if("object"==typeof A){var Qe=A.constructor,lt=Qe._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var Tt=Qe.serialize?Qe.serialize(A,O):{};if(!Qe.serialize){for(var Mt in A)if(A.hasOwnProperty(Mt)&&!(oa[lt].omit.indexOf(Mt)>=0)){var Bt=A[Mt];Tt[Mt]=oa[lt].shallow.indexOf(Mt)>=0?Bt:es(Bt,O)}A instanceof Error&&(Tt.message=A.message)}if(Tt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==lt&&(Tt.$name=lt),Tt}throw new Error("can't serialize object of type "+typeof A)}function ts(A){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||fa(A)||Os(A)||ArrayBuffer.isView(A)||A instanceof Cs)return A;if(Array.isArray(A))return A.map(ts);if("object"==typeof A){var O=A.$name||"Object",Z=oa[O].klass;if(!Z)throw new Error("can't deserialize unregistered class "+O);if(Z.deserialize)return Z.deserialize(A);for(var ie=Object.create(Z.prototype),_e=0,Le=Object.keys(A);_e<Le.length;_e+=1){var je=Le[_e];if("$name"!==je){var Qe=A[je];ie[je]=oa[O].shallow.indexOf(je)>=0?Qe:ts(Qe)}}return ie}throw new Error("can't deserialize object of type "+typeof A)}var ns=function(){this.first=!0};ns.prototype.update=function(A,O){var Z=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=Z,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=Z,!0):(this.lastFloorZoom>Z?(this.lastIntegerZoom=Z+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<Z&&(this.lastIntegerZoom=Z,this.lastIntegerZoomTime=O),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=Z,!0))};var Ar={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function rs(A){for(var O=0,Z=A;O<Z.length;O+=1)if(Da(Z[O].charCodeAt(0)))return!0;return!1}function Da(A){return!(746!==A&&747!==A&&(A<4352||!(Ar["Bopomofo Extended"](A)||Ar.Bopomofo(A)||Ar["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Ar["CJK Compatibility Ideographs"](A)||Ar["CJK Compatibility"](A)||Ar["CJK Radicals Supplement"](A)||Ar["CJK Strokes"](A)||!(!Ar["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||12336===A)||Ar["CJK Unified Ideographs Extension A"](A)||Ar["CJK Unified Ideographs"](A)||Ar["Enclosed CJK Letters and Months"](A)||Ar["Hangul Compatibility Jamo"](A)||Ar["Hangul Jamo Extended-A"](A)||Ar["Hangul Jamo Extended-B"](A)||Ar["Hangul Jamo"](A)||Ar["Hangul Syllables"](A)||Ar.Hiragana(A)||Ar["Ideographic Description Characters"](A)||Ar.Kanbun(A)||Ar["Kangxi Radicals"](A)||Ar["Katakana Phonetic Extensions"](A)||Ar.Katakana(A)&&12540!==A||!(!Ar["Halfwidth and Fullwidth Forms"](A)||65288===A||65289===A||65293===A||A>=65306&&A<=65310||65339===A||65341===A||65343===A||A>=65371&&A<=65503||65507===A||A>=65512&&A<=65519)||!(!Ar["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Ar["Unified Canadian Aboriginal Syllabics"](A)||Ar["Unified Canadian Aboriginal Syllabics Extended"](A)||Ar["Vertical Forms"](A)||Ar["Yijing Hexagram Symbols"](A)||Ar["Yi Syllables"](A)||Ar["Yi Radicals"](A))))}function Is(A){return!(Da(A)||(O=A,Ar["Latin-1 Supplement"](O)&&(167===O||169===O||174===O||177===O||188===O||189===O||190===O||215===O||247===O)||Ar["General Punctuation"](O)&&(8214===O||8224===O||8225===O||8240===O||8241===O||8251===O||8252===O||8258===O||8263===O||8264===O||8265===O||8273===O)||Ar["Letterlike Symbols"](O)||Ar["Number Forms"](O)||Ar["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||9003===O||O>=9085&&O<=9114||O>=9150&&O<=9165||9167===O||O>=9169&&O<=9179||O>=9186&&O<=9215)||Ar["Control Pictures"](O)&&9251!==O||Ar["Optical Character Recognition"](O)||Ar["Enclosed Alphanumerics"](O)||Ar["Geometric Shapes"](O)||Ar["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||Ar["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||Ar["CJK Symbols and Punctuation"](O)||Ar.Katakana(O)||Ar["Private Use Area"](O)||Ar["CJK Compatibility Forms"](O)||Ar["Small Form Variants"](O)||Ar["Halfwidth and Fullwidth Forms"](O)||8734===O||8756===O||8757===O||O>=9984&&O<=10087||O>=10102&&O<=10131||65532===O||65533===O));var O}function xs(A){return Ar.Arabic(A)||Ar["Arabic Supplement"](A)||Ar["Arabic Extended-A"](A)||Ar["Arabic Presentation Forms-A"](A)||Ar["Arabic Presentation Forms-B"](A)}function Ki(A){return A>=1424&&A<=2303||Ar["Arabic Presentation Forms-A"](A)||Ar["Arabic Presentation Forms-B"](A)}function qo(A,O){return!(!O&&Ki(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Ar.Khmer(A))}function fo(A){for(var O=0,Z=A;O<Z.length;O+=1)if(Ki(Z[O].charCodeAt(0)))return!0;return!1}var wa="deferred",Mo="loading",qa="loaded",Go=null,$i="unavailable",Ba=null,ai=function(A){A&&"string"==typeof A&&A.indexOf("NetworkError")>-1&&($i="error"),Go&&Go(A)};function bs(){La.fire(new Ne("pluginStateChange",{pluginStatus:$i,pluginURL:Ba}))}var La=new at,Na=function(){return $i},Qa=function(){if($i!==wa||!Ba)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$i=Mo,bs(),Ba&&Pt({url:Ba},function(A){A?ai(A):($i=qa,bs())})},ha={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return $i===qa||null!=ha.applyArabicShaping},isLoading:function(){return $i===Mo},setState:function(A){$i=A.pluginStatus,Ba=A.pluginURL},isParsed:function(){return null!=ha.applyArabicShaping&&null!=ha.processBidirectionalText&&null!=ha.processStyledBidirectionalText},getPluginURL:function(){return Ba}},ii=function(A,O){this.zoom=A,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ns,this.transition={})};ii.prototype.isSupportedScript=function(A){return function(O,Z){for(var ie=0,_e=O;ie<_e.length;ie+=1)if(!qo(_e[ie].charCodeAt(0),Z))return!1;return!0}(A,ha.isLoaded())},ii.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ii.prototype.getCrossfadeParameters=function(){var A=this.zoom,O=A-Math.floor(A),Z=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*Z}:{fromScale:.5,toScale:1,t:1-(1-Z)*O}};var Hi=function(A,O){this.property=A,this.value=O,this.expression=function(Z,ie){if(_o(Z))return new ps(Z,ie);if(Ko(Z)){var _e=$o(Z,ie);if("error"===_e.result)throw new Error(_e.value.map(function(je){return je.key+": "+je.message}).join(", "));return _e.value}var Le=Z;return"string"==typeof Z&&"color"===ie.type&&(Le=sn.parse(Z)),{kind:"constant",evaluate:function(){return Le}}}(void 0===O?A.specification.default:O,A.specification)};Hi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Hi.prototype.possiblyEvaluate=function(A,O,Z){return this.property.possiblyEvaluate(this,A,O,Z)};var Ga=function(A){this.property=A,this.value=new Hi(A,void 0)};Ga.prototype.transitioned=function(A,O){return new eo(this.property,this.value,O,c({},A.transition,this.transition),A.now)},Ga.prototype.untransitioned=function(){return new eo(this.property,this.value,null,{},0)};var pa=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};pa.prototype.getValue=function(A){return w(this._values[A].value.value)},pa.prototype.setValue=function(A,O){this._values.hasOwnProperty(A)||(this._values[A]=new Ga(this._values[A].property)),this._values[A].value=new Hi(this._values[A].property,null===O?void 0:w(O))},pa.prototype.getTransition=function(A){return w(this._values[A].transition)},pa.prototype.setTransition=function(A,O){this._values.hasOwnProperty(A)||(this._values[A]=new Ga(this._values[A].property)),this._values[A].transition=w(O)||void 0},pa.prototype.serialize=function(){for(var A={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ie=Z[O],_e=this.getValue(ie);void 0!==_e&&(A[ie]=_e);var Le=this.getTransition(ie);void 0!==Le&&(A[ie+"-transition"]=Le)}return A},pa.prototype.transitioned=function(A,O){for(var Z=new So(this._properties),ie=0,_e=Object.keys(this._values);ie<_e.length;ie+=1){var Le=_e[ie];Z._values[Le]=this._values[Le].transitioned(A,O._values[Le])}return Z},pa.prototype.untransitioned=function(){for(var A=new So(this._properties),O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ie=Z[O];A._values[ie]=this._values[ie].untransitioned()}return A};var eo=function(A,O,Z,ie,_e){this.property=A,this.value=O,this.begin=_e+ie.delay||0,this.end=this.begin+ie.duration||0,A.specification.transition&&(ie.delay||ie.duration)&&(this.prior=Z)};eo.prototype.possiblyEvaluate=function(A,O,Z){var ie=A.now||0,_e=this.value.possiblyEvaluate(A,O,Z),Le=this.prior;if(Le){if(ie>this.end)return this.prior=null,_e;if(this.value.isDataDriven())return this.prior=null,_e;if(ie<this.begin)return Le.possiblyEvaluate(A,O,Z);var je=(ie-this.begin)/(this.end-this.begin);return this.property.interpolate(Le.possiblyEvaluate(A,O,Z),_e,function(Qe){if(Qe<=0)return 0;if(Qe>=1)return 1;var lt=Qe*Qe,Tt=lt*Qe;return 4*(Qe<.5?Tt:3*(Qe-lt)+Tt-.75)}(je))}return _e};var So=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};So.prototype.possiblyEvaluate=function(A,O,Z){for(var ie=new ja(this._properties),_e=0,Le=Object.keys(this._values);_e<Le.length;_e+=1){var je=Le[_e];ie._values[je]=this._values[je].possiblyEvaluate(A,O,Z)}return ie},So.prototype.hasTransition=function(){for(var A=0,O=Object.keys(this._values);A<O.length;A+=1)if(this._values[O[A]].prior)return!0;return!1};var ho=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};ho.prototype.getValue=function(A){return w(this._values[A].value)},ho.prototype.setValue=function(A,O){this._values[A]=new Hi(this._values[A].property,null===O?void 0:w(O))},ho.prototype.serialize=function(){for(var A={},O=0,Z=Object.keys(this._values);O<Z.length;O+=1){var ie=Z[O],_e=this.getValue(ie);void 0!==_e&&(A[ie]=_e)}return A},ho.prototype.possiblyEvaluate=function(A,O,Z){for(var ie=new ja(this._properties),_e=0,Le=Object.keys(this._values);_e<Le.length;_e+=1){var je=Le[_e];ie._values[je]=this._values[je].possiblyEvaluate(A,O,Z)}return ie};var Qi=function(A,O,Z){this.property=A,this.value=O,this.parameters=Z};Qi.prototype.isConstant=function(){return"constant"===this.value.kind},Qi.prototype.constantOr=function(A){return"constant"===this.value.kind?this.value.value:A},Qi.prototype.evaluate=function(A,O,Z,ie){return this.property.evaluate(this.value,this.parameters,A,O,Z,ie)};var ja=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};ja.prototype.get=function(A){return this._values[A]};var Lr=function(A){this.specification=A};Lr.prototype.possiblyEvaluate=function(A,O){return A.expression.evaluate(O)},Lr.prototype.interpolate=function(A,O,Z){var ie=sr[this.specification.type];return ie?ie(A,O,Z):A};var Ir=function(A,O){this.specification=A,this.overrides=O};Ir.prototype.possiblyEvaluate=function(A,O,Z,ie){return new Qi(this,"constant"===A.expression.kind||"camera"===A.expression.kind?{kind:"constant",value:A.expression.evaluate(O,null,{},Z,ie)}:A.expression,O)},Ir.prototype.interpolate=function(A,O,Z){if("constant"!==A.value.kind||"constant"!==O.value.kind)return A;if(void 0===A.value.value||void 0===O.value.value)return new Qi(this,{kind:"constant",value:void 0},A.parameters);var ie=sr[this.specification.type];return ie?new Qi(this,{kind:"constant",value:ie(A.value.value,O.value.value,Z)},A.parameters):A},Ir.prototype.evaluate=function(A,O,Z,ie,_e,Le){return"constant"===A.kind?A.value:A.evaluate(O,Z,ie,_e,Le)};var is=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(Z,ie,_e,Le){if(void 0===Z.value)return new Qi(this,{kind:"constant",value:void 0},ie);if("constant"===Z.expression.kind){var je=Z.expression.evaluate(ie,null,{},_e,Le),Qe="resolvedImage"===Z.property.specification.type&&"string"!=typeof je?je.name:je,lt=this._calculate(Qe,Qe,Qe,ie);return new Qi(this,{kind:"constant",value:lt},ie)}if("camera"===Z.expression.kind){var Tt=this._calculate(Z.expression.evaluate({zoom:ie.zoom-1}),Z.expression.evaluate({zoom:ie.zoom}),Z.expression.evaluate({zoom:ie.zoom+1}),ie);return new Qi(this,{kind:"constant",value:Tt},ie)}return new Qi(this,Z.expression,ie)},O.prototype.evaluate=function(Z,ie,_e,Le,je,Qe){if("source"===Z.kind){var lt=Z.evaluate(ie,_e,Le,je,Qe);return this._calculate(lt,lt,lt,ie)}return"composite"===Z.kind?this._calculate(Z.evaluate({zoom:Math.floor(ie.zoom)-1},_e,Le),Z.evaluate({zoom:Math.floor(ie.zoom)},_e,Le),Z.evaluate({zoom:Math.floor(ie.zoom)+1},_e,Le),ie):Z.value},O.prototype._calculate=function(Z,ie,_e,Le){return Le.zoom>Le.zoomHistory.lastIntegerZoom?{from:Z,to:ie}:{from:_e,to:ie}},O.prototype.interpolate=function(Z){return Z},O}(Ir),po=function(A){this.specification=A};po.prototype.possiblyEvaluate=function(A,O,Z,ie){if(void 0!==A.value){if("constant"===A.expression.kind){var _e=A.expression.evaluate(O,null,{},Z,ie);return this._calculate(_e,_e,_e,O)}return this._calculate(A.expression.evaluate(new ii(Math.floor(O.zoom-1),O)),A.expression.evaluate(new ii(Math.floor(O.zoom),O)),A.expression.evaluate(new ii(Math.floor(O.zoom+1),O)),O)}},po.prototype._calculate=function(A,O,Z,ie){return ie.zoom>ie.zoomHistory.lastIntegerZoom?{from:A,to:O}:{from:Z,to:O}},po.prototype.interpolate=function(A){return A};var Za=function(A){this.specification=A};Za.prototype.possiblyEvaluate=function(A,O,Z,ie){return!!A.expression.evaluate(O,null,{},Z,ie)},Za.prototype.interpolate=function(){return!1};var ea=function(A){for(var O in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Z=A[O];Z.specification.overridable&&this.overridableProperties.push(O);var ie=this.defaultPropertyValues[O]=new Hi(Z,void 0),_e=this.defaultTransitionablePropertyValues[O]=new Ga(Z);this.defaultTransitioningPropertyValues[O]=_e.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ie.possiblyEvaluate({})}};wr("DataDrivenProperty",Ir),wr("DataConstantProperty",Lr),wr("CrossFadedDataDrivenProperty",is),wr("CrossFadedProperty",po),wr("ColorRampProperty",Za);var zs="-transition",da=function(A){function O(Z,ie){if(A.call(this),this.id=Z.id,this.type=Z.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==Z.type&&(this.metadata=Z.metadata,this.minzoom=Z.minzoom,this.maxzoom=Z.maxzoom,"background"!==Z.type&&(this.source=Z.source,this.sourceLayer=Z["source-layer"],this.filter=Z.filter),ie.layout&&(this._unevaluatedLayout=new ho(ie.layout)),ie.paint)){for(var _e in this._transitionablePaint=new pa(ie.paint),Z.paint)this.setPaintProperty(_e,Z.paint[_e],{validate:!1});for(var Le in Z.layout)this.setLayoutProperty(Le,Z.layout[Le],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ja(ie.paint)}}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(Z){return"visibility"===Z?this.visibility:this._unevaluatedLayout.getValue(Z)},O.prototype.setLayoutProperty=function(Z,ie,_e){void 0===_e&&(_e={}),null!=ie&&this._validate(Ao,"layers."+this.id+".layout."+Z,Z,ie,_e)||("visibility"!==Z?this._unevaluatedLayout.setValue(Z,ie):this.visibility=ie)},O.prototype.getPaintProperty=function(Z){return y(Z,zs)?this._transitionablePaint.getTransition(Z.slice(0,-zs.length)):this._transitionablePaint.getValue(Z)},O.prototype.setPaintProperty=function(Z,ie,_e){if(void 0===_e&&(_e={}),null!=ie&&this._validate(ca,"layers."+this.id+".paint."+Z,Z,ie,_e))return!1;if(y(Z,zs))return this._transitionablePaint.setTransition(Z.slice(0,-zs.length),ie||void 0),!1;var je=this._transitionablePaint._values[Z],Qe="cross-faded-data-driven"===je.property.specification["property-type"],lt=je.value.isDataDriven(),Tt=je.value;this._transitionablePaint.setValue(Z,ie),this._handleSpecialPaintPropertyUpdate(Z);var Mt=this._transitionablePaint._values[Z].value;return Mt.isDataDriven()||lt||Qe||this._handleOverridablePaintPropertyUpdate(Z,Tt,Mt)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ie,_e){return!1},O.prototype.isHidden=function(Z){return!!(this.minzoom&&Z<this.minzoom)||!!(this.maxzoom&&Z>=this.maxzoom)||"none"===this.visibility},O.prototype.updateTransitions=function(Z){this._transitioningPaint=this._transitionablePaint.transitioned(Z,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(Z,ie){Z.getCrossfadeParameters&&(this._crossfadeParameters=Z.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Z,void 0,ie)),this.paint=this._transitioningPaint.possiblyEvaluate(Z,void 0,ie)},O.prototype.serialize=function(){var Z={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Z.layout=Z.layout||{},Z.layout.visibility=this.visibility),m(Z,function(ie,_e){return!(void 0===ie||"layout"===_e&&!Object.keys(ie).length||"paint"===_e&&!Object.keys(ie).length)})},O.prototype._validate=function(Z,ie,_e,Le,je){return void 0===je&&(je={}),(!je||!1!==je.validate)&&Ra(this,Z.call(Ji,{key:ie,layerType:this.type,objectKey:_e,value:Le,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var Z in this.paint._values){var ie=this.paint.get(Z);if(ie instanceof Qi&&Xo(ie.property.specification)&&("source"===ie.value.kind||"composite"===ie.value.kind)&&ie.value.isStateDependent)return!0}return!1},O}(at),as={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},go=function(A,O){this._structArray=A,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ui=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function gi(A,O){void 0===O&&(O=1);var Z=0,ie=0;return{members:A.map(function(_e){var je=as[_e.type].BYTES_PER_ELEMENT,Qe=Z=Rs(Z,Math.max(O,je)),lt=_e.components||1;return ie=Math.max(ie,je),Z+=je*lt,{name:_e.name,type:_e.type,components:lt,offset:Qe}}),size:Rs(Z,Math.max(ie,O)),alignment:O}}function Rs(A,O){return Math.ceil(A/O)*O}ui.serialize=function(A,O){return A._trim(),O&&(A.isTransferred=!0,O.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},ui.deserialize=function(A){var O=Object.create(this.prototype);return O.arrayBuffer=A.arrayBuffer,O.length=A.length,O.capacity=A.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},ui.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ui.prototype.clear=function(){this.length=0},ui.prototype.resize=function(A){this.reserve(A),this.length=A},ui.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},ui.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var We=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie){var _e=this.length;return this.resize(_e+1),this.emplace(_e,Z,ie)},O.prototype.emplace=function(Z,ie,_e){var Le=2*Z;return this.int16[Le+0]=ie,this.int16[Le+1]=_e,Z},O}(ui);We.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",We);var $e=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ie,_e,Le)},O.prototype.emplace=function(Z,ie,_e,Le,je){var Qe=4*Z;return this.int16[Qe+0]=ie,this.int16[Qe+1]=_e,this.int16[Qe+2]=Le,this.int16[Qe+3]=je,Z},O}(ui);$e.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",$e);var ot=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,ie,_e,Le,je,Qe)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt){var Tt=6*Z;return this.int16[Tt+0]=ie,this.int16[Tt+1]=_e,this.int16[Tt+2]=Le,this.int16[Tt+3]=je,this.int16[Tt+4]=Qe,this.int16[Tt+5]=lt,Z},O}(ui);ot.prototype.bytesPerElement=12,wr("StructArrayLayout2i4i12",ot);var ft=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,ie,_e,Le,je,Qe)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt){var Tt=4*Z,Mt=8*Z;return this.int16[Tt+0]=ie,this.int16[Tt+1]=_e,this.uint8[Mt+4]=Le,this.uint8[Mt+5]=je,this.uint8[Mt+6]=Qe,this.uint8[Mt+7]=lt,Z},O}(ui);ft.prototype.bytesPerElement=8,wr("StructArrayLayout2i4ub8",ft);var bt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht){var Vt=9*Z,an=18*Z;return this.uint16[Vt+0]=ie,this.uint16[Vt+1]=_e,this.uint16[Vt+2]=Le,this.uint16[Vt+3]=je,this.uint16[Vt+4]=Qe,this.uint16[Vt+5]=lt,this.uint16[Vt+6]=Tt,this.uint16[Vt+7]=Mt,this.uint8[an+16]=Bt,this.uint8[an+17]=Ht,Z},O}(ui);bt.prototype.bytesPerElement=18,wr("StructArrayLayout8ui2ub18",bt);var yt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt){var an=this.length;return this.resize(an+1),this.emplace(an,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an){var yn=12*Z;return this.int16[yn+0]=ie,this.int16[yn+1]=_e,this.int16[yn+2]=Le,this.int16[yn+3]=je,this.uint16[yn+4]=Qe,this.uint16[yn+5]=lt,this.uint16[yn+6]=Tt,this.uint16[yn+7]=Mt,this.int16[yn+8]=Bt,this.int16[yn+9]=Ht,this.int16[yn+10]=Vt,this.int16[yn+11]=an,Z},O}(ui);yt.prototype.bytesPerElement=24,wr("StructArrayLayout4i4ui4i24",yt);var F=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e){var Le=this.length;return this.resize(Le+1),this.emplace(Le,Z,ie,_e)},O.prototype.emplace=function(Z,ie,_e,Le){var je=3*Z;return this.float32[je+0]=ie,this.float32[je+1]=_e,this.float32[je+2]=Le,Z},O}(ui);F.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",F);var W=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ie=this.length;return this.resize(ie+1),this.emplace(ie,Z)},O.prototype.emplace=function(Z,ie){return this.uint32[1*Z+0]=ie,Z},O}(ui);W.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",W);var G=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,Z,ie,_e,Le,je,Qe,lt,Tt,Mt)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt){var Ht=10*Z,Vt=5*Z;return this.int16[Ht+0]=ie,this.int16[Ht+1]=_e,this.int16[Ht+2]=Le,this.int16[Ht+3]=je,this.int16[Ht+4]=Qe,this.int16[Ht+5]=lt,this.uint32[Vt+3]=Tt,this.uint16[Ht+8]=Mt,this.uint16[Ht+9]=Bt,Z},O}(ui);G.prototype.bytesPerElement=20,wr("StructArrayLayout6i1ul2ui20",G);var te=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe){var lt=this.length;return this.resize(lt+1),this.emplace(lt,Z,ie,_e,Le,je,Qe)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt){var Tt=6*Z;return this.int16[Tt+0]=ie,this.int16[Tt+1]=_e,this.int16[Tt+2]=Le,this.int16[Tt+3]=je,this.int16[Tt+4]=Qe,this.int16[Tt+5]=lt,Z},O}(ui);te.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",te);var ve=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je){var Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,Z,ie,_e,Le,je)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe){var lt=4*Z,Tt=8*Z;return this.float32[lt+0]=ie,this.float32[lt+1]=_e,this.float32[lt+2]=Le,this.int16[Tt+6]=je,this.int16[Tt+7]=Qe,Z},O}(ui);ve.prototype.bytesPerElement=16,wr("StructArrayLayout2f1f2i16",ve);var Ce=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ie,_e,Le)},O.prototype.emplace=function(Z,ie,_e,Le,je){var Qe=12*Z,lt=3*Z;return this.uint8[Qe+0]=ie,this.uint8[Qe+1]=_e,this.float32[lt+1]=Le,this.float32[lt+2]=je,Z},O}(ui);Ce.prototype.bytesPerElement=12,wr("StructArrayLayout2ub2f12",Ce);var Be=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e){var Le=this.length;return this.resize(Le+1),this.emplace(Le,Z,ie,_e)},O.prototype.emplace=function(Z,ie,_e,Le){var je=3*Z;return this.uint16[je+0]=ie,this.uint16[je+1]=_e,this.uint16[je+2]=Le,Z},O}(ui);Be.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",Be);var qe=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn,On,Pn,Nn){var Vn=this.length;return this.resize(Vn+1),this.emplace(Vn,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn,On,Pn,Nn)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn){var Zn=24*Z,Qn=12*Z,rr=48*Z;return this.int16[Zn+0]=ie,this.int16[Zn+1]=_e,this.uint16[Zn+2]=Le,this.uint16[Zn+3]=je,this.uint32[Qn+2]=Qe,this.uint32[Qn+3]=lt,this.uint32[Qn+4]=Tt,this.uint16[Zn+10]=Mt,this.uint16[Zn+11]=Bt,this.uint16[Zn+12]=Ht,this.float32[Qn+7]=Vt,this.float32[Qn+8]=an,this.uint8[rr+36]=yn,this.uint8[rr+37]=On,this.uint8[rr+38]=Pn,this.uint32[Qn+10]=Nn,this.int16[Zn+22]=Vn,Z},O}(ui);qe.prototype.bytesPerElement=48,wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qe);var et=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr,Mr,Cr,Ur,Or,jr){var zr=this.length;return this.resize(zr+1),this.emplace(zr,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr,Mr,Cr,Ur,Or,jr)},O.prototype.emplace=function(Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn,On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr,Mr,Cr,Ur,Or,jr,zr){var Pr=34*Z,Kr=17*Z;return this.int16[Pr+0]=ie,this.int16[Pr+1]=_e,this.int16[Pr+2]=Le,this.int16[Pr+3]=je,this.int16[Pr+4]=Qe,this.int16[Pr+5]=lt,this.int16[Pr+6]=Tt,this.int16[Pr+7]=Mt,this.uint16[Pr+8]=Bt,this.uint16[Pr+9]=Ht,this.uint16[Pr+10]=Vt,this.uint16[Pr+11]=an,this.uint16[Pr+12]=yn,this.uint16[Pr+13]=On,this.uint16[Pr+14]=Pn,this.uint16[Pr+15]=Nn,this.uint16[Pr+16]=Vn,this.uint16[Pr+17]=Zn,this.uint16[Pr+18]=Qn,this.uint16[Pr+19]=rr,this.uint16[Pr+20]=_r,this.uint16[Pr+21]=dr,this.uint16[Pr+22]=Mr,this.uint32[Kr+12]=Cr,this.float32[Kr+13]=Ur,this.float32[Kr+14]=Or,this.float32[Kr+15]=jr,this.float32[Kr+16]=zr,Z},O}(ui);et.prototype.bytesPerElement=68,wr("StructArrayLayout8i15ui1ul4f68",et);var vt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ie=this.length;return this.resize(ie+1),this.emplace(ie,Z)},O.prototype.emplace=function(Z,ie){return this.float32[1*Z+0]=ie,Z},O}(ui);vt.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",vt);var xt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e){var Le=this.length;return this.resize(Le+1),this.emplace(Le,Z,ie,_e)},O.prototype.emplace=function(Z,ie,_e,Le){var je=3*Z;return this.int16[je+0]=ie,this.int16[je+1]=_e,this.int16[je+2]=Le,Z},O}(ui);xt.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",xt);var ee=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e){var Le=this.length;return this.resize(Le+1),this.emplace(Le,Z,ie,_e)},O.prototype.emplace=function(Z,ie,_e,Le){var Qe=4*Z;return this.uint32[2*Z+0]=ie,this.uint16[Qe+2]=_e,this.uint16[Qe+3]=Le,Z},O}(ui);ee.prototype.bytesPerElement=8,wr("StructArrayLayout1ul2ui8",ee);var ce=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie){var _e=this.length;return this.resize(_e+1),this.emplace(_e,Z,ie)},O.prototype.emplace=function(Z,ie,_e){var Le=2*Z;return this.uint16[Le+0]=ie,this.uint16[Le+1]=_e,Z},O}(ui);ce.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",ce);var Ae=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z){var ie=this.length;return this.resize(ie+1),this.emplace(ie,Z)},O.prototype.emplace=function(Z,ie){return this.uint16[1*Z+0]=ie,Z},O}(ui);Ae.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",Ae);var Oe=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie){var _e=this.length;return this.resize(_e+1),this.emplace(_e,Z,ie)},O.prototype.emplace=function(Z,ie,_e){var Le=2*Z;return this.float32[Le+0]=ie,this.float32[Le+1]=_e,Z},O}(ui);Oe.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",Oe);var Fe=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(Z,ie,_e,Le){var je=this.length;return this.resize(je+1),this.emplace(je,Z,ie,_e,Le)},O.prototype.emplace=function(Z,ie,_e,Le,je){var Qe=4*Z;return this.float32[Qe+0]=ie,this.float32[Qe+1]=_e,this.float32[Qe+2]=Le,this.float32[Qe+3]=je,Z},O}(ui);Fe.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",Fe);var Ue=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var Z={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Z.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Z.x1.get=function(){return this._structArray.int16[this._pos2+2]},Z.y1.get=function(){return this._structArray.int16[this._pos2+3]},Z.x2.get=function(){return this._structArray.int16[this._pos2+4]},Z.y2.get=function(){return this._structArray.int16[this._pos2+5]},Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.anchorPoint.get=function(){return new e(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,Z),O}(go);Ue.prototype.size=20;var Ge=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(Z){return new Ue(this,Z)},O}(G);wr("CollisionBoxArray",Ge);var Xe=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Z.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Z.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Z.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Z.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Z.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Z.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Z.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Z.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Z.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Z.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Z.placedOrientation.set=function(ie){this._structArray.uint8[this._pos1+37]=ie},Z.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Z.hidden.set=function(ie){this._structArray.uint8[this._pos1+38]=ie},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Z.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+10]=ie},Z.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,Z),O}(go);Xe.prototype.size=48;var rt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(Z){return new Xe(this,Z)},O}(qe);wr("PlacedSymbolArray",rt);var ut=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var Z={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Z.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Z.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Z.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Z.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Z.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Z.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Z.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Z.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Z.key.get=function(){return this._structArray.uint16[this._pos2+8]},Z.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Z.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Z.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Z.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Z.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Z.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Z.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Z.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Z.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Z.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Z.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Z.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Z.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Z.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Z.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Z.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+12]=ie},Z.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Z.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Z.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Z.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,Z),O}(go);ut.prototype.size=68;var Ct=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(Z){return new ut(this,Z)},O}(et);wr("SymbolInstanceArray",Ct);var Rt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.getoffsetX=function(Z){return this.float32[1*Z+0]},O}(vt);wr("GlyphOffsetArray",Rt);var Ft=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.getx=function(Z){return this.int16[3*Z+0]},O.prototype.gety=function(Z){return this.int16[3*Z+1]},O.prototype.gettileUnitDistanceFromAnchor=function(Z){return this.int16[3*Z+2]},O}(xt);wr("SymbolLineVertexArray",Ft);var Yt=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var Z={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Z.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Z.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Z.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,Z),O}(go);Yt.prototype.size=8;var cn=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(Z){return new Yt(this,Z)},O}(ee);wr("FeatureIndexArray",cn);var Wt=gi([{name:"a_pos",components:2,type:"Int16"}],4).members,tn=function(A){void 0===A&&(A=[]),this.segments=A};function $t(A,O){return 256*(A=a(Math.floor(A),0,255))+a(Math.floor(O),0,255)}tn.prototype.prepareSegment=function(A,O,Z,ie){var _e=this.segments[this.segments.length-1];return A>tn.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+tn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!_e||_e.vertexLength+A>tn.MAX_VERTEX_ARRAY_LENGTH||_e.sortKey!==ie)&&(_e={vertexOffset:O.length,primitiveOffset:Z.length,vertexLength:0,primitiveLength:0},void 0!==ie&&(_e.sortKey=ie),this.segments.push(_e)),_e},tn.prototype.get=function(){return this.segments},tn.prototype.destroy=function(){for(var A=0,O=this.segments;A<O.length;A+=1){var Z=O[A];for(var ie in Z.vaos)Z.vaos[ie].destroy()}},tn.simpleSegment=function(A,O,Z,ie){return new tn([{vertexOffset:A,primitiveOffset:O,vertexLength:Z,primitiveLength:ie,vaos:{},sortKey:0}])},tn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",tn);var _n=gi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),dn=T(function(A){A.exports=function(O,Z){var ie,_e,Le,je,Qe,lt,Tt,Mt;for(_e=O.length-(ie=3&O.length),Le=Z,Qe=3432918353,lt=461845907,Mt=0;Mt<_e;)Tt=255&O.charCodeAt(Mt)|(255&O.charCodeAt(++Mt))<<8|(255&O.charCodeAt(++Mt))<<16|(255&O.charCodeAt(++Mt))<<24,++Mt,Le=27492+(65535&(je=5*(65535&(Le=(Le^=Tt=(65535&(Tt=(Tt=(65535&Tt)*Qe+(((Tt>>>16)*Qe&65535)<<16)&4294967295)<<15|Tt>>>17))*lt+(((Tt>>>16)*lt&65535)<<16)&4294967295)<<13|Le>>>19))+((5*(Le>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(Tt=0,ie){case 3:Tt^=(255&O.charCodeAt(Mt+2))<<16;case 2:Tt^=(255&O.charCodeAt(Mt+1))<<8;case 1:Le^=Tt=(65535&(Tt=(Tt=(65535&(Tt^=255&O.charCodeAt(Mt)))*Qe+(((Tt>>>16)*Qe&65535)<<16)&4294967295)<<15|Tt>>>17))*lt+(((Tt>>>16)*lt&65535)<<16)&4294967295}return Le^=O.length,Le=2246822507*(65535&(Le^=Le>>>16))+((2246822507*(Le>>>16)&65535)<<16)&4294967295,Le=3266489909*(65535&(Le^=Le>>>13))+((3266489909*(Le>>>16)&65535)<<16)&4294967295,(Le^=Le>>>16)>>>0}}),Qt=T(function(A){A.exports=function(O,Z){for(var ie,_e=O.length,Le=Z^_e,je=0;_e>=4;)ie=1540483477*(65535&(ie=255&O.charCodeAt(je)|(255&O.charCodeAt(++je))<<8|(255&O.charCodeAt(++je))<<16|(255&O.charCodeAt(++je))<<24))+((1540483477*(ie>>>16)&65535)<<16),Le=1540483477*(65535&Le)+((1540483477*(Le>>>16)&65535)<<16)^(ie=1540483477*(65535&(ie^=ie>>>24))+((1540483477*(ie>>>16)&65535)<<16)),_e-=4,++je;switch(_e){case 3:Le^=(255&O.charCodeAt(je+2))<<16;case 2:Le^=(255&O.charCodeAt(je+1))<<8;case 1:Le=1540483477*(65535&(Le^=255&O.charCodeAt(je)))+((1540483477*(Le>>>16)&65535)<<16)}return Le=1540483477*(65535&(Le^=Le>>>13))+((1540483477*(Le>>>16)&65535)<<16),(Le^=Le>>>15)>>>0}}),Cn=dn,Jn=Qt;Cn.murmur3=dn,Cn.murmur2=Jn;var Kn=function(){this.ids=[],this.positions=[],this.indexed=!1};Kn.prototype.add=function(A,O,Z,ie){this.ids.push(yr(A)),this.positions.push(O,Z,ie)},Kn.prototype.getPositions=function(A){for(var O=yr(A),Z=0,ie=this.ids.length-1;Z<ie;){var _e=Z+ie>>1;this.ids[_e]>=O?ie=_e:Z=_e+1}for(var Le=[];this.ids[Z]===O;)Le.push({index:this.positions[3*Z],start:this.positions[3*Z+1],end:this.positions[3*Z+2]}),Z++;return Le},Kn.serialize=function(A,O){var Z=new Float64Array(A.ids),ie=new Uint32Array(A.positions);return fr(Z,ie,0,Z.length-1),O&&O.push(Z.buffer,ie.buffer),{ids:Z,positions:ie}},Kn.deserialize=function(A){var O=new Kn;return O.ids=A.ids,O.positions=A.positions,O.indexed=!0,O};var vr=Math.pow(2,53)-1;function yr(A){var O=+A;return!isNaN(O)&&O<=vr?O:Cn(String(A))}function fr(A,O,Z,ie){for(;Z<ie;){for(var _e=A[Z+ie>>1],Le=Z-1,je=ie+1;;){do{Le++}while(A[Le]<_e);do{je--}while(A[je]>_e);if(Le>=je)break;gr(A,Le,je),gr(O,3*Le,3*je),gr(O,3*Le+1,3*je+1),gr(O,3*Le+2,3*je+2)}je-Z<ie-je?(fr(A,O,Z,je),Z=je+1):(fr(A,O,je+1,ie),ie=je)}}function gr(A,O,Z){var ie=A[O];A[O]=A[Z],A[Z]=ie}wr("FeaturePositionMap",Kn);var Sr=function(A,O){this.gl=A.gl,this.location=O},Vr=function(A){function O(Z,ie){A.call(this,Z,ie),this.current=0}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1i(this.location,Z))},O}(Sr),Hr=function(A){function O(Z,ie){A.call(this,Z,ie),this.current=0}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(Z){this.current!==Z&&(this.current=Z,this.gl.uniform1f(this.location,Z))},O}(Sr),pr=function(A){function O(Z,ie){A.call(this,Z,ie),this.current=[0,0]}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]||(this.current=Z,this.gl.uniform2f(this.location,Z[0],Z[1]))},O}(Sr),Er=function(A){function O(Z,ie){A.call(this,Z,ie),this.current=[0,0,0]}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]||(this.current=Z,this.gl.uniform3f(this.location,Z[0],Z[1],Z[2]))},O}(Sr),Fr=function(A){function O(Z,ie){A.call(this,Z,ie),this.current=[0,0,0,0]}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(Z){Z[0]===this.current[0]&&Z[1]===this.current[1]&&Z[2]===this.current[2]&&Z[3]===this.current[3]||(this.current=Z,this.gl.uniform4f(this.location,Z[0],Z[1],Z[2],Z[3]))},O}(Sr),Dr=function(A){function O(Z,ie){A.call(this,Z,ie),this.current=sn.transparent}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(Z){Z.r===this.current.r&&Z.g===this.current.g&&Z.b===this.current.b&&Z.a===this.current.a||(this.current=Z,this.gl.uniform4f(this.location,Z.r,Z.g,Z.b,Z.a))},O}(Sr),Yr=new Float32Array(16),Zr=function(A){function O(Z,ie){A.call(this,Z,ie),this.current=Yr}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(Z){if(Z[12]!==this.current[12]||Z[0]!==this.current[0])return this.current=Z,void this.gl.uniformMatrix4fv(this.location,!1,Z);for(var ie=1;ie<16;ie++)if(Z[ie]!==this.current[ie]){this.current=Z,this.gl.uniformMatrix4fv(this.location,!1,Z);break}},O}(Sr);function Qr(A){return[$t(255*A.r,255*A.g),$t(255*A.b,255*A.a)]}var hi=function(A,O,Z){this.value=A,this.uniformNames=O.map(function(ie){return"u_"+ie}),this.type=Z};hi.prototype.setUniform=function(A,O,Z){A.set(Z.constantOr(this.value))},hi.prototype.getBinding=function(A,O,Z){return"color"===this.type?new Dr(A,O):new Hr(A,O)};var _i=function(A,O){this.uniformNames=O.map(function(Z){return"u_"+Z}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};_i.prototype.setConstantPatternPositions=function(A,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=A.tlbr},_i.prototype.setUniform=function(A,O,Z,ie){var _e="u_pattern_to"===ie?this.patternTo:"u_pattern_from"===ie?this.patternFrom:"u_pixel_ratio_to"===ie?this.pixelRatioTo:"u_pixel_ratio_from"===ie?this.pixelRatioFrom:null;_e&&A.set(_e)},_i.prototype.getBinding=function(A,O,Z){return"u_pattern"===Z.substr(0,9)?new Fr(A,O):new Hr(A,O)};var vi=function(A,O,Z,ie){this.expression=A,this.type=Z,this.maxValue=0,this.paintVertexAttributes=O.map(function(_e){return{name:"a_"+_e,type:"Float32",components:"color"===Z?2:1,offset:0}}),this.paintVertexArray=new ie};vi.prototype.populatePaintArray=function(A,O,Z,ie,_e){var Le=this.paintVertexArray.length,je=this.expression.evaluate(new ii(0),O,{},ie,[],_e);this.paintVertexArray.resize(A),this._setPaintValue(Le,A,je)},vi.prototype.updatePaintArray=function(A,O,Z,ie){var _e=this.expression.evaluate({zoom:0},Z,ie);this._setPaintValue(A,O,_e)},vi.prototype._setPaintValue=function(A,O,Z){if("color"===this.type)for(var ie=Qr(Z),_e=A;_e<O;_e++)this.paintVertexArray.emplace(_e,ie[0],ie[1]);else{for(var Le=A;Le<O;Le++)this.paintVertexArray.emplace(Le,Z);this.maxValue=Math.max(this.maxValue,Math.abs(Z))}},vi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},vi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ci=function(A,O,Z,ie,_e,Le){this.expression=A,this.uniformNames=O.map(function(je){return"u_"+je+"_t"}),this.type=Z,this.useIntegerZoom=ie,this.zoom=_e,this.maxValue=0,this.paintVertexAttributes=O.map(function(je){return{name:"a_"+je,type:"Float32",components:"color"===Z?4:2,offset:0}}),this.paintVertexArray=new Le};ci.prototype.populatePaintArray=function(A,O,Z,ie,_e){var Le=this.expression.evaluate(new ii(this.zoom),O,{},ie,[],_e),je=this.expression.evaluate(new ii(this.zoom+1),O,{},ie,[],_e),Qe=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Qe,A,Le,je)},ci.prototype.updatePaintArray=function(A,O,Z,ie){var _e=this.expression.evaluate({zoom:this.zoom},Z,ie),Le=this.expression.evaluate({zoom:this.zoom+1},Z,ie);this._setPaintValue(A,O,_e,Le)},ci.prototype._setPaintValue=function(A,O,Z,ie){if("color"===this.type)for(var _e=Qr(Z),Le=Qr(ie),je=A;je<O;je++)this.paintVertexArray.emplace(je,_e[0],_e[1],Le[0],Le[1]);else{for(var Qe=A;Qe<O;Qe++)this.paintVertexArray.emplace(Qe,Z,ie);this.maxValue=Math.max(this.maxValue,Math.abs(Z),Math.abs(ie))}},ci.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ci.prototype.setUniform=function(A,O){var Z=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ie=a(this.expression.interpolationFactor(Z,this.zoom,this.zoom+1),0,1);A.set(ie)},ci.prototype.getBinding=function(A,O,Z){return new Hr(A,O)};var pi=function(A,O,Z,ie,_e,Le){this.expression=A,this.type=O,this.useIntegerZoom=Z,this.zoom=ie,this.layerId=Le,this.zoomInPaintVertexArray=new _e,this.zoomOutPaintVertexArray=new _e};pi.prototype.populatePaintArray=function(A,O,Z){var ie=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(ie,A,O.patterns&&O.patterns[this.layerId],Z)},pi.prototype.updatePaintArray=function(A,O,Z,ie,_e){this._setPaintValues(A,O,Z.patterns&&Z.patterns[this.layerId],_e)},pi.prototype._setPaintValues=function(A,O,Z,ie){if(ie&&Z){var Qe=ie[Z.min],lt=ie[Z.mid],Tt=ie[Z.max];if(Qe&&lt&&Tt)for(var Mt=A;Mt<O;Mt++)this.zoomInPaintVertexArray.emplace(Mt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Qe.tl[0],Qe.tl[1],Qe.br[0],Qe.br[1],lt.pixelRatio,Qe.pixelRatio),this.zoomOutPaintVertexArray.emplace(Mt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Tt.tl[0],Tt.tl[1],Tt.br[0],Tt.br[1],lt.pixelRatio,Tt.pixelRatio)}},pi.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,_n.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,_n.members,this.expression.isStateDependent))},pi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var mi=function(A,O,Z,ie){this.binders={},this.layoutAttributes=ie,this._buffers=[];var _e=[];for(var Le in A.paint._values)if(Z(Le)){var je=A.paint.get(Le);if(je instanceof Qi&&Xo(je.property.specification)){var Qe=Eo(Le,A.type),lt=je.value,Tt=je.property.specification.type,Mt=je.property.useIntegerZoom,Bt=je.property.specification["property-type"],Ht="cross-faded"===Bt||"cross-faded-data-driven"===Bt;if("constant"===lt.kind)this.binders[Le]=Ht?new _i(lt.value,Qe):new hi(lt.value,Qe,Tt),_e.push("/u_"+Le);else if("source"===lt.kind||Ht){var Vt=Ni(Le,Tt,"source");this.binders[Le]=Ht?new pi(lt,Tt,Mt,O,Vt,A.id):new vi(lt,Qe,Tt,Vt),_e.push("/a_"+Le)}else{var an=Ni(Le,Tt,"composite");this.binders[Le]=new ci(lt,Qe,Tt,Mt,O,an),_e.push("/z_"+Le)}}}this.cacheKey=_e.sort().join("")};mi.prototype.getMaxValue=function(A){var O=this.binders[A];return O instanceof vi||O instanceof ci?O.maxValue:0},mi.prototype.populatePaintArrays=function(A,O,Z,ie,_e){for(var Le in this.binders){var je=this.binders[Le];(je instanceof vi||je instanceof ci||je instanceof pi)&&je.populatePaintArray(A,O,Z,ie,_e)}},mi.prototype.setConstantPatternPositions=function(A,O){for(var Z in this.binders){var ie=this.binders[Z];ie instanceof _i&&ie.setConstantPatternPositions(A,O)}},mi.prototype.updatePaintArrays=function(A,O,Z,ie,_e){var Le=!1;for(var je in A)for(var Qe=0,lt=O.getPositions(je);Qe<lt.length;Qe+=1){var Tt=lt[Qe],Mt=Z.feature(Tt.index);for(var Bt in this.binders){var Ht=this.binders[Bt];if((Ht instanceof vi||Ht instanceof ci||Ht instanceof pi)&&!0===Ht.expression.isStateDependent){var Vt=ie.paint.get(Bt);Ht.expression=Vt.value,Ht.updatePaintArray(Tt.start,Tt.end,Mt,A[je],_e),Le=!0}}}return Le},mi.prototype.defines=function(){var A=[];for(var O in this.binders){var Z=this.binders[O];(Z instanceof hi||Z instanceof _i)&&A.push.apply(A,Z.uniformNames.map(function(ie){return"#define HAS_UNIFORM_"+ie}))}return A},mi.prototype.getPaintVertexBuffers=function(){return this._buffers},mi.prototype.getUniforms=function(A,O){var Z=[];for(var ie in this.binders){var _e=this.binders[ie];if(_e instanceof hi||_e instanceof _i||_e instanceof ci)for(var Le=0,je=_e.uniformNames;Le<je.length;Le+=1){var Qe=je[Le];if(O[Qe]){var lt=_e.getBinding(A,O[Qe],Qe);Z.push({name:Qe,property:ie,binding:lt})}}}return Z},mi.prototype.setUniforms=function(A,O,Z,ie){for(var _e=0,Le=O;_e<Le.length;_e+=1){var je=Le[_e],Qe=je.name,lt=je.property;this.binders[lt].setUniform(je.binding,ie,Z.get(lt),Qe)}},mi.prototype.updatePaintBuffers=function(A){for(var O in this._buffers=[],this.binders){var Z=this.binders[O];if(A&&Z instanceof pi){var ie=2===A.fromScale?Z.zoomInPaintVertexBuffer:Z.zoomOutPaintVertexBuffer;ie&&this._buffers.push(ie)}else(Z instanceof vi||Z instanceof ci)&&Z.paintVertexBuffer&&this._buffers.push(Z.paintVertexBuffer)}},mi.prototype.upload=function(A){for(var O in this.binders){var Z=this.binders[O];(Z instanceof vi||Z instanceof ci||Z instanceof pi)&&Z.upload(A)}this.updatePaintBuffers()},mi.prototype.destroy=function(){for(var A in this.binders){var O=this.binders[A];(O instanceof vi||O instanceof ci||O instanceof pi)&&O.destroy()}};var Ci=function(A,O,Z,ie){void 0===ie&&(ie=function(){return!0}),this.programConfigurations={};for(var _e=0,Le=O;_e<Le.length;_e+=1){var je=Le[_e];this.programConfigurations[je.id]=new mi(je,Z,ie,A)}this.needsUpload=!1,this._featureMap=new Kn,this._bufferOffset=0};function Eo(A,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(O+"-","").replace(/-/g,"_")]}function Ni(A,O,Z){var _e={"line-pattern":{source:bt,composite:bt},"fill-pattern":{source:bt,composite:bt},"fill-extrusion-pattern":{source:bt,composite:bt}}[A];return _e&&_e[Z]||{color:{source:Oe,composite:Fe},number:{source:vt,composite:Oe}}[O][Z]}Ci.prototype.populatePaintArrays=function(A,O,Z,ie,_e,Le){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(A,O,ie,_e,Le);void 0!==O.id&&this._featureMap.add(O.id,Z,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},Ci.prototype.updatePaintArrays=function(A,O,Z,ie){for(var _e=0,Le=Z;_e<Le.length;_e+=1){var je=Le[_e];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(A,this._featureMap,O,je,ie)||this.needsUpload}},Ci.prototype.get=function(A){return this.programConfigurations[A]},Ci.prototype.upload=function(A){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(A);this.needsUpload=!1}},Ci.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},wr("ConstantBinder",hi),wr("CrossFadedConstantBinder",_i),wr("SourceExpressionBinder",vi),wr("CrossFadedCompositeBinder",pi),wr("CompositeExpressionBinder",ci),wr("ProgramConfiguration",mi,{omit:["_buffers"]}),wr("ProgramConfigurationSet",Ci);var Nr=8192,ta=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Si(A){for(var O=Nr/A.extent,Z=A.loadGeometry(),ie=0;ie<Z.length;ie++)for(var _e=Z[ie],Le=0;Le<_e.length;Le++){var je=_e[Le];je.x=Math.round(je.x*O),je.y=Math.round(je.y*O),(je.x<ta.min||je.x>ta.max||je.y<ta.min||je.y>ta.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),je.x=a(je.x,ta.min,ta.max),je.y=a(je.y,ta.min,ta.max))}return Z}function Ya(A,O,Z,ie,_e){A.emplaceBack(2*O+(ie+1)/2,2*Z+(_e+1)/2)}var Wr=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new We,this.indexArray=new Be,this.segments=new tn,this.programConfigurations=new Ci(Wt,A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function ji(A,O){for(var Z=0;Z<A.length;Z++)if(fl(O,A[Z]))return!0;for(var ie=0;ie<O.length;ie++)if(fl(A,O[ie]))return!0;return!!Jl(A,O)}function ga(A,O,Z){return!!fl(A,O)||!!cl(O,A,Z)}function Ds(A,O){if(1===A.length)return xl(O,A[0]);for(var Z=0;Z<O.length;Z++)for(var ie=O[Z],_e=0;_e<ie.length;_e++)if(fl(A,ie[_e]))return!0;for(var Le=0;Le<A.length;Le++)if(xl(O,A[Le]))return!0;for(var je=0;je<O.length;je++)if(Jl(A,O[je]))return!0;return!1}function sc(A,O,Z){if(A.length>1){if(Jl(A,O))return!0;for(var ie=0;ie<O.length;ie++)if(cl(O[ie],A,Z))return!0}for(var _e=0;_e<A.length;_e++)if(cl(A[_e],O,Z))return!0;return!1}function Jl(A,O){if(0===A.length||0===O.length)return!1;for(var Z=0;Z<A.length-1;Z++)for(var ie=A[Z],_e=A[Z+1],Le=0;Le<O.length-1;Le++)if(lc(ie,_e,O[Le],O[Le+1]))return!0;return!1}function lc(A,O,Z,ie){return _(A,Z,ie)!==_(O,Z,ie)&&_(A,O,Z)!==_(A,O,ie)}function cl(A,O,Z){var ie=Z*Z;if(1===O.length)return A.distSqr(O[0])<ie;for(var _e=1;_e<O.length;_e++)if(wu(A,O[_e-1],O[_e])<ie)return!0;return!1}function wu(A,O,Z){var ie=O.distSqr(Z);if(0===ie)return A.distSqr(O);var _e=((A.x-O.x)*(Z.x-O.x)+(A.y-O.y)*(Z.y-O.y))/ie;return A.distSqr(_e<0?O:_e>1?Z:Z.sub(O)._mult(_e)._add(O))}function xl(A,O){for(var Z,ie,_e,Le=!1,je=0;je<A.length;je++)for(var Qe=0,lt=(Z=A[je]).length-1;Qe<Z.length;lt=Qe++)(ie=Z[Qe]).y>O.y!=(_e=Z[lt]).y>O.y&&O.x<(_e.x-ie.x)*(O.y-ie.y)/(_e.y-ie.y)+ie.x&&(Le=!Le);return Le}function fl(A,O){for(var Z=!1,ie=0,_e=A.length-1;ie<A.length;_e=ie++){var Le=A[ie],je=A[_e];Le.y>O.y!=je.y>O.y&&O.x<(je.x-Le.x)*(O.y-Le.y)/(je.y-Le.y)+Le.x&&(Z=!Z)}return Z}function uc(A,O,Z){var ie=Z[0],_e=Z[2];if(A.x<ie.x&&O.x<ie.x||A.x>_e.x&&O.x>_e.x||A.y<ie.y&&O.y<ie.y||A.y>_e.y&&O.y>_e.y)return!1;var Le=_(A,O,Z[0]);return Le!==_(A,O,Z[1])||Le!==_(A,O,Z[2])||Le!==_(A,O,Z[3])}function Qs(A,O,Z){var ie=O.paint.get(A).value;return"constant"===ie.kind?ie.value:Z.programConfigurations.get(O.id).getMaxValue(A)}function Tu(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function ku(A,O,Z,ie,_e){if(!O[0]&&!O[1])return A;var Le=e.convert(O)._mult(_e);"viewport"===Z&&Le._rotate(-ie);for(var je=[],Qe=0;Qe<A.length;Qe++)je.push(A[Qe].sub(Le));return je}Wr.prototype.populate=function(A,O,Z){var ie=this.layers[0],_e=[],Le=null;"circle"===ie.type&&(Le=ie.layout.get("circle-sort-key"));for(var je=0,Qe=A;je<Qe.length;je+=1){var lt=Qe[je],Tt=lt.feature,Mt=lt.id,Bt=lt.index,Ht=lt.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,an={type:Tt.type,id:Mt,properties:Tt.properties,geometry:Vt?Si(Tt):[]};if(this.layers[0]._featureFilter.filter(new ii(this.zoom),an,Z)){Vt||(an.geometry=Si(Tt));var yn=Le?Le.evaluate(an,{},Z):void 0;_e.push({id:Mt,properties:Tt.properties,type:Tt.type,sourceLayerIndex:Ht,index:Bt,geometry:an.geometry,patterns:{},sortKey:yn})}}Le&&_e.sort(function(Mr,Cr){return Mr.sortKey-Cr.sortKey});for(var Pn=0,Nn=_e;Pn<Nn.length;Pn+=1){var Vn=Nn[Pn],Qn=Vn.geometry,rr=Vn.index,_r=Vn.sourceLayerIndex,dr=A[rr].feature;this.addFeature(Vn,Qn,rr,Z),O.featureIndex.insert(dr,Qn,rr,_r,this.index)}},Wr.prototype.update=function(A,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,Z)},Wr.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Wr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wr.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Wt),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Wr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wr.prototype.addFeature=function(A,O,Z,ie){for(var _e=0,Le=O;_e<Le.length;_e+=1)for(var je=0,Qe=Le[_e];je<Qe.length;je+=1){var lt=Qe[je],Tt=lt.x,Mt=lt.y;if(!(Tt<0||Tt>=Nr||Mt<0||Mt>=Nr)){var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Ht=Bt.vertexLength;Ya(this.layoutVertexArray,Tt,Mt,-1,-1),Ya(this.layoutVertexArray,Tt,Mt,1,-1),Ya(this.layoutVertexArray,Tt,Mt,1,1),Ya(this.layoutVertexArray,Tt,Mt,-1,1),this.indexArray.emplaceBack(Ht,Ht+1,Ht+2),this.indexArray.emplaceBack(Ht,Ht+3,Ht+2),Bt.vertexLength+=4,Bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,{},ie)},wr("CircleBucket",Wr,{omit:["layers"]});var Ch=new ea({"circle-sort-key":new Ir(Se.layout_circle["circle-sort-key"])}),Ph={paint:new ea({"circle-radius":new Ir(Se.paint_circle["circle-radius"]),"circle-color":new Ir(Se.paint_circle["circle-color"]),"circle-blur":new Ir(Se.paint_circle["circle-blur"]),"circle-opacity":new Ir(Se.paint_circle["circle-opacity"]),"circle-translate":new Lr(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new Lr(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Lr(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Lr(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ir(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ir(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ir(Se.paint_circle["circle-stroke-opacity"])}),layout:Ch},Lo=typeof Float32Array<"u"?Float32Array:Array;function cc(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function Xc(A,O,Z){var ie=O[0],_e=O[1],Le=O[2],je=O[3],Qe=O[4],lt=O[5],Tt=O[6],Mt=O[7],Bt=O[8],Ht=O[9],Vt=O[10],an=O[11],yn=O[12],On=O[13],Pn=O[14],Nn=O[15],Vn=Z[0],Zn=Z[1],Qn=Z[2],rr=Z[3];return A[0]=Vn*ie+Zn*Qe+Qn*Bt+rr*yn,A[1]=Vn*_e+Zn*lt+Qn*Ht+rr*On,A[2]=Vn*Le+Zn*Tt+Qn*Vt+rr*Pn,A[3]=Vn*je+Zn*Mt+Qn*an+rr*Nn,A[4]=(Vn=Z[4])*ie+(Zn=Z[5])*Qe+(Qn=Z[6])*Bt+(rr=Z[7])*yn,A[5]=Vn*_e+Zn*lt+Qn*Ht+rr*On,A[6]=Vn*Le+Zn*Tt+Qn*Vt+rr*Pn,A[7]=Vn*je+Zn*Mt+Qn*an+rr*Nn,A[8]=(Vn=Z[8])*ie+(Zn=Z[9])*Qe+(Qn=Z[10])*Bt+(rr=Z[11])*yn,A[9]=Vn*_e+Zn*lt+Qn*Ht+rr*On,A[10]=Vn*Le+Zn*Tt+Qn*Vt+rr*Pn,A[11]=Vn*je+Zn*Mt+Qn*an+rr*Nn,A[12]=(Vn=Z[12])*ie+(Zn=Z[13])*Qe+(Qn=Z[14])*Bt+(rr=Z[15])*yn,A[13]=Vn*_e+Zn*lt+Qn*Ht+rr*On,A[14]=Vn*Le+Zn*Tt+Qn*Vt+rr*Pn,A[15]=Vn*je+Zn*Mt+Qn*an+rr*Nn,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,O=0,Z=arguments.length;Z--;)O+=A[Z]*A[Z];return Math.sqrt(O)});var Au,A,Oh=Xc;function Mu(A,O,Z){var ie=O[0],_e=O[1],Le=O[2],je=O[3];return A[0]=Z[0]*ie+Z[4]*_e+Z[8]*Le+Z[12]*je,A[1]=Z[1]*ie+Z[5]*_e+Z[9]*Le+Z[13]*je,A[2]=Z[2]*ie+Z[6]*_e+Z[10]*Le+Z[14]*je,A[3]=Z[3]*ie+Z[7]*_e+Z[11]*Le+Z[15]*je,A}Au=new Lo(3),Lo!=Float32Array&&(Au[0]=0,Au[1]=0,Au[2]=0),A=new Lo(4),Lo!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0);var Rh=(function(){var A=new Lo(2);Lo!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function O(Z){A.call(this,Z,Ph)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new Wr(Z)},O.prototype.queryRadius=function(Z){var ie=Z;return Qs("circle-radius",this,ie)+Qs("circle-stroke-width",this,ie)+Tu(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(Z,ie,_e,Le,je,Qe,lt,Tt){for(var Mt=ku(Z,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Qe.angle,lt),Bt=this.paint.get("circle-radius").evaluate(ie,_e)+this.paint.get("circle-stroke-width").evaluate(ie,_e),Ht="map"===this.paint.get("circle-pitch-alignment"),Vt=Ht?Mt:function(_r,dr){return _r.map(function(Mr){return Jc(Mr,dr)})}(Mt,Tt),an=Ht?Bt*lt:Bt,yn=0,On=Le;yn<On.length;yn+=1)for(var Pn=0,Nn=On[yn];Pn<Nn.length;Pn+=1){var Vn=Nn[Pn],Zn=Ht?Vn:Jc(Vn,Tt),Qn=an,rr=Mu([],[Vn.x,Vn.y,0,1],Tt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Qn*=rr[3]/Qe.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Qn*=Qe.cameraToCenterDistance/rr[3]),ga(Vt,Zn,Qn))return!0}return!1},O}(da));function Jc(A,O){var Z=Mu([],[A.x,A.y,0,1],O);return new e(Z[0]/Z[3],Z[1]/Z[3])}var Kc=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(Wr);function fc(A,O,Z,ie){var _e=O.width,Le=O.height;if(ie){if(ie instanceof Uint8ClampedArray)ie=new Uint8Array(ie.buffer);else if(ie.length!==_e*Le*Z)throw new RangeError("mismatched image size")}else ie=new Uint8Array(_e*Le*Z);return A.width=_e,A.height=Le,A.data=ie,A}function $c(A,O,Z){var ie=O.width,_e=O.height;if(ie!==A.width||_e!==A.height){var Le=fc({},{width:ie,height:_e},Z);hc(A,Le,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ie),height:Math.min(A.height,_e)},Z),A.width=ie,A.height=_e,A.data=Le.data}}function hc(A,O,Z,ie,_e,Le){if(0===_e.width||0===_e.height)return O;if(_e.width>A.width||_e.height>A.height||Z.x>A.width-_e.width||Z.y>A.height-_e.height)throw new RangeError("out of range source coordinates for image copy");if(_e.width>O.width||_e.height>O.height||ie.x>O.width-_e.width||ie.y>O.height-_e.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=A.data,Qe=O.data,lt=0;lt<_e.height;lt++)for(var Tt=((Z.y+lt)*A.width+Z.x)*Le,Mt=((ie.y+lt)*O.width+ie.x)*Le,Bt=0;Bt<_e.width*Le;Bt++)Qe[Mt+Bt]=je[Tt+Bt];return O}wr("HeatmapBucket",Kc,{omit:["layers"]});var bl=function(A,O){fc(this,A,1,O)};bl.prototype.resize=function(A){$c(this,A,1)},bl.prototype.clone=function(){return new bl({width:this.width,height:this.height},new Uint8Array(this.data))},bl.copy=function(A,O,Z,ie,_e){hc(A,O,Z,ie,_e,1)};var to=function(A,O){fc(this,A,4,O)};to.prototype.resize=function(A){$c(this,A,4)},to.prototype.replace=function(A,O){O?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A},to.prototype.clone=function(){return new to({width:this.width,height:this.height},new Uint8Array(this.data))},to.copy=function(A,O,Z,ie,_e){hc(A,O,Z,ie,_e,4)},wr("AlphaImage",bl),wr("RGBAImage",to);var Dh={paint:new ea({"heatmap-radius":new Ir(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ir(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Lr(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Za(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Lr(Se.paint_heatmap["heatmap-opacity"])})};function Qc(A,O){for(var Z=new Uint8Array(1024),ie={},_e=0,Le=0;_e<256;_e++,Le+=4){ie[O]=_e/255;var je=A.evaluate(ie);Z[Le+0]=Math.floor(255*je.r/je.a),Z[Le+1]=Math.floor(255*je.g/je.a),Z[Le+2]=Math.floor(255*je.b/je.a),Z[Le+3]=Math.floor(255*je.a)}return new to({width:256,height:1},Z)}var Fh=function(A){function O(Z){A.call(this,Z,Dh),this._updateColorRamp()}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new Kc(Z)},O.prototype._handleSpecialPaintPropertyUpdate=function(Z){"heatmap-color"===Z&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){this.colorRamp=Qc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},O}(da),Bh={paint:new ea({"hillshade-illumination-direction":new Lr(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Lr(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Lr(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Lr(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Lr(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Lr(Se.paint_hillshade["hillshade-accent-color"])})},Nh=function(A){function O(Z){A.call(this,Z,Bh)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},O}(da),ef=gi([{name:"a_pos",components:2,type:"Int16"}],4).members,pc=Su,jh=Su;function Su(A,O,Z){Z=Z||2;var ie,_e,Le,je,Qe,lt,Tt,Mt=O&&O.length,Bt=Mt?O[0]*Z:A.length,Ht=tf(A,0,Bt,Z,!0),Vt=[];if(!Ht||Ht.next===Ht.prev)return Vt;if(Mt&&(Ht=function(yn,On,Pn,Nn){var Vn,Zn,Qn,rr=[];for(Vn=0,Zn=On.length;Vn<Zn;Vn++)(Qn=tf(yn,On[Vn]*Nn,Vn<Zn-1?On[Vn+1]*Nn:yn.length,Nn,!1))===Qn.next&&(Qn.steiner=!0),rr.push(Wh(Qn));for(rr.sort(Gh),Vn=0;Vn<rr.length;Vn++)Zh(rr[Vn],Pn),Pn=hl(Pn,Pn.next);return Pn}(A,O,Ht,Z)),A.length>80*Z){ie=Le=A[0],_e=je=A[1];for(var an=Z;an<Bt;an+=Z)(Qe=A[an])<ie&&(ie=Qe),(lt=A[an+1])<_e&&(_e=lt),Qe>Le&&(Le=Qe),lt>je&&(je=lt);Tt=0!==(Tt=Math.max(Le-ie,je-_e))?1/Tt:0}return Kl(Ht,Vt,Z,ie,_e,Tt),Vt}function tf(A,O,Z,ie,_e){var Le,je;if(_e===vc(A,O,Z,ie)>0)for(Le=O;Le<Z;Le+=ie)je=af(Le,A[Le],A[Le+1],je);else for(Le=Z-ie;Le>=O;Le-=ie)je=af(Le,A[Le],A[Le+1],je);return je&&Eu(je,je.next)&&(Ql(je),je=je.next),je}function hl(A,O){if(!A)return A;O||(O=A);var Z,ie=A;do{if(Z=!1,ie.steiner||!Eu(ie,ie.next)&&0!==na(ie.prev,ie,ie.next))ie=ie.next;else{if(Ql(ie),(ie=O=ie.prev)===ie.next)break;Z=!0}}while(Z||ie!==O);return O}function Kl(A,O,Z,ie,_e,Le,je){if(A){!je&&Le&&function(Mt,Bt,Ht,Vt){var an=Mt;do{null===an.z&&(an.z=dc(an.x,an.y,Bt,Ht,Vt)),an.prevZ=an.prev,an.nextZ=an.next,an=an.next}while(an!==Mt);an.prevZ.nextZ=null,an.prevZ=null,function(yn){var On,Pn,Nn,Vn,Zn,Qn,rr,_r,dr=1;do{for(Pn=yn,yn=null,Zn=null,Qn=0;Pn;){for(Qn++,Nn=Pn,rr=0,On=0;On<dr&&(rr++,Nn=Nn.nextZ);On++);for(_r=dr;rr>0||_r>0&&Nn;)0!==rr&&(0===_r||!Nn||Pn.z<=Nn.z)?(Vn=Pn,Pn=Pn.nextZ,rr--):(Vn=Nn,Nn=Nn.nextZ,_r--),Zn?Zn.nextZ=Vn:yn=Vn,Vn.prevZ=Zn,Zn=Vn;Pn=Nn}Zn.nextZ=null,dr*=2}while(Qn>1)}(an)}(A,ie,_e,Le);for(var Qe,lt,Tt=A;A.prev!==A.next;)if(Qe=A.prev,lt=A.next,Le?Vh(A,ie,_e,Le):Uh(A))O.push(Qe.i/Z),O.push(A.i/Z),O.push(lt.i/Z),Ql(A),A=lt.next,Tt=lt.next;else if((A=lt)===Tt){je?1===je?Kl(A=Hh(hl(A),O,Z),O,Z,ie,_e,Le,2):2===je&&qh(A,O,Z,ie,_e,Le):Kl(hl(A),O,Z,ie,_e,Le,1);break}}}function Uh(A){var O=A.prev,Z=A,ie=A.next;if(na(O,Z,ie)>=0)return!1;for(var _e=A.next.next;_e!==A.prev;){if(Cl(O.x,O.y,Z.x,Z.y,ie.x,ie.y,_e.x,_e.y)&&na(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function Vh(A,O,Z,ie){var _e=A.prev,Le=A,je=A.next;if(na(_e,Le,je)>=0)return!1;for(var Tt=_e.x>Le.x?_e.x>je.x?_e.x:je.x:Le.x>je.x?Le.x:je.x,Mt=_e.y>Le.y?_e.y>je.y?_e.y:je.y:Le.y>je.y?Le.y:je.y,Bt=dc(_e.x<Le.x?_e.x<je.x?_e.x:je.x:Le.x<je.x?Le.x:je.x,_e.y<Le.y?_e.y<je.y?_e.y:je.y:Le.y<je.y?Le.y:je.y,O,Z,ie),Ht=dc(Tt,Mt,O,Z,ie),Vt=A.prevZ,an=A.nextZ;Vt&&Vt.z>=Bt&&an&&an.z<=Ht;){if(Vt!==A.prev&&Vt!==A.next&&Cl(_e.x,_e.y,Le.x,Le.y,je.x,je.y,Vt.x,Vt.y)&&na(Vt.prev,Vt,Vt.next)>=0||(Vt=Vt.prevZ,an!==A.prev&&an!==A.next&&Cl(_e.x,_e.y,Le.x,Le.y,je.x,je.y,an.x,an.y)&&na(an.prev,an,an.next)>=0))return!1;an=an.nextZ}for(;Vt&&Vt.z>=Bt;){if(Vt!==A.prev&&Vt!==A.next&&Cl(_e.x,_e.y,Le.x,Le.y,je.x,je.y,Vt.x,Vt.y)&&na(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.prevZ}for(;an&&an.z<=Ht;){if(an!==A.prev&&an!==A.next&&Cl(_e.x,_e.y,Le.x,Le.y,je.x,je.y,an.x,an.y)&&na(an.prev,an,an.next)>=0)return!1;an=an.nextZ}return!0}function Hh(A,O,Z){var ie=A;do{var _e=ie.prev,Le=ie.next.next;!Eu(_e,Le)&&nf(_e,ie,ie.next,Le)&&$l(_e,Le)&&$l(Le,_e)&&(O.push(_e.i/Z),O.push(ie.i/Z),O.push(Le.i/Z),Ql(ie),Ql(ie.next),ie=A=Le),ie=ie.next}while(ie!==A);return hl(ie)}function qh(A,O,Z,ie,_e,Le){var je=A;do{for(var Qe=je.next.next;Qe!==je.prev;){if(je.i!==Qe.i&&Xh(je,Qe)){var lt=rf(je,Qe);return je=hl(je,je.next),lt=hl(lt,lt.next),Kl(je,O,Z,ie,_e,Le),void Kl(lt,O,Z,ie,_e,Le)}Qe=Qe.next}je=je.next}while(je!==A)}function Gh(A,O){return A.x-O.x}function Zh(A,O){if(O=function(ie,_e){var Le,je=_e,Qe=ie.x,lt=ie.y,Tt=-1/0;do{if(lt<=je.y&&lt>=je.next.y&&je.next.y!==je.y){var Mt=je.x+(lt-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(Mt<=Qe&&Mt>Tt){if(Tt=Mt,Mt===Qe){if(lt===je.y)return je;if(lt===je.next.y)return je.next}Le=je.x<je.next.x?je:je.next}}je=je.next}while(je!==_e);if(!Le)return null;if(Qe===Tt)return Le;var Bt,Ht=Le,Vt=Le.x,an=Le.y,yn=1/0;je=Le;do{Qe>=je.x&&je.x>=Vt&&Qe!==je.x&&Cl(lt<an?Qe:Tt,lt,Vt,an,lt<an?Tt:Qe,lt,je.x,je.y)&&(Bt=Math.abs(lt-je.y)/(Qe-je.x),$l(je,ie)&&(Bt<yn||Bt===yn&&(je.x>Le.x||je.x===Le.x&&Yh(Le,je)))&&(Le=je,yn=Bt)),je=je.next}while(je!==Ht);return Le}(A,O)){var Z=rf(O,A);hl(O,O.next),hl(Z,Z.next)}}function Yh(A,O){return na(A.prev,A,O.prev)<0&&na(O.next,A,A.next)<0}function dc(A,O,Z,ie,_e){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Z)*_e)|A<<8))|A<<4))|A<<2))|A<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ie)*_e)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function Wh(A){var O=A,Z=A;do{(O.x<Z.x||O.x===Z.x&&O.y<Z.y)&&(Z=O),O=O.next}while(O!==A);return Z}function Cl(A,O,Z,ie,_e,Le,je,Qe){return(_e-je)*(O-Qe)-(A-je)*(Le-Qe)>=0&&(A-je)*(ie-Qe)-(Z-je)*(O-Qe)>=0&&(Z-je)*(Le-Qe)-(_e-je)*(ie-Qe)>=0}function Xh(A,O){return A.next.i!==O.i&&A.prev.i!==O.i&&!function(Z,ie){var _e=Z;do{if(_e.i!==Z.i&&_e.next.i!==Z.i&&_e.i!==ie.i&&_e.next.i!==ie.i&&nf(_e,_e.next,Z,ie))return!0;_e=_e.next}while(_e!==Z);return!1}(A,O)&&($l(A,O)&&$l(O,A)&&function(Z,ie){var _e=Z,Le=!1,je=(Z.x+ie.x)/2,Qe=(Z.y+ie.y)/2;do{_e.y>Qe!=_e.next.y>Qe&&_e.next.y!==_e.y&&je<(_e.next.x-_e.x)*(Qe-_e.y)/(_e.next.y-_e.y)+_e.x&&(Le=!Le),_e=_e.next}while(_e!==Z);return Le}(A,O)&&(na(A.prev,A,O.prev)||na(A,O.prev,O))||Eu(A,O)&&na(A.prev,A,A.next)>0&&na(O.prev,O,O.next)>0)}function na(A,O,Z){return(O.y-A.y)*(Z.x-O.x)-(O.x-A.x)*(Z.y-O.y)}function Eu(A,O){return A.x===O.x&&A.y===O.y}function nf(A,O,Z,ie){var _e=Cu(na(A,O,Z)),Le=Cu(na(A,O,ie)),je=Cu(na(Z,ie,A)),Qe=Cu(na(Z,ie,O));return _e!==Le&&je!==Qe||!(0!==_e||!Lu(A,Z,O))||!(0!==Le||!Lu(A,ie,O))||!(0!==je||!Lu(Z,A,ie))||!(0!==Qe||!Lu(Z,O,ie))}function Lu(A,O,Z){return O.x<=Math.max(A.x,Z.x)&&O.x>=Math.min(A.x,Z.x)&&O.y<=Math.max(A.y,Z.y)&&O.y>=Math.min(A.y,Z.y)}function Cu(A){return A>0?1:A<0?-1:0}function $l(A,O){return na(A.prev,A,A.next)<0?na(A,O,A.next)>=0&&na(A,A.prev,O)>=0:na(A,O,A.prev)<0||na(A,A.next,O)<0}function rf(A,O){var Z=new gc(A.i,A.x,A.y),ie=new gc(O.i,O.x,O.y),_e=A.next,Le=O.prev;return A.next=O,O.prev=A,Z.next=_e,_e.prev=Z,ie.next=Z,Z.prev=ie,Le.next=ie,ie.prev=Le,ie}function af(A,O,Z,ie){var _e=new gc(A,O,Z);return ie?(_e.next=ie.next,_e.prev=ie,ie.next.prev=_e,ie.next=_e):(_e.prev=_e,_e.next=_e),_e}function Ql(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function gc(A,O,Z){this.i=A,this.x=O,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vc(A,O,Z,ie){for(var _e=0,Le=O,je=Z-ie;Le<Z;Le+=ie)_e+=(A[je]-A[Le])*(A[Le+1]+A[je+1]),je=Le;return _e}function Jh(A,O,Z,ie,_e){of(A,O,Z||0,ie||A.length-1,_e||Kh)}function of(A,O,Z,ie,_e){for(;ie>Z;){if(ie-Z>600){var Le=ie-Z+1,je=O-Z+1,Qe=Math.log(Le),lt=.5*Math.exp(2*Qe/3),Tt=.5*Math.sqrt(Qe*lt*(Le-lt)/Le)*(je-Le/2<0?-1:1);of(A,O,Math.max(Z,Math.floor(O-je*lt/Le+Tt)),Math.min(ie,Math.floor(O+(Le-je)*lt/Le+Tt)),_e)}var Mt=A[O],Bt=Z,Ht=ie;for(eu(A,Z,O),_e(A[ie],Mt)>0&&eu(A,Z,ie);Bt<Ht;){for(eu(A,Bt,Ht),Bt++,Ht--;_e(A[Bt],Mt)<0;)Bt++;for(;_e(A[Ht],Mt)>0;)Ht--}0===_e(A[Z],Mt)?eu(A,Z,Ht):eu(A,++Ht,ie),Ht<=O&&(Z=Ht+1),O<=Ht&&(ie=Ht-1)}}function eu(A,O,Z){var ie=A[O];A[O]=A[Z],A[Z]=ie}function Kh(A,O){return A<O?-1:A>O?1:0}function mc(A,O){var Z=A.length;if(Z<=1)return[A];for(var ie,_e,Le=[],je=0;je<Z;je++){var Qe=E(A[je]);0!==Qe&&(A[je].area=Math.abs(Qe),void 0===_e&&(_e=Qe<0),_e===Qe<0?(ie&&Le.push(ie),ie=[A[je]]):ie.push(A[je]))}if(ie&&Le.push(ie),O>1)for(var lt=0;lt<Le.length;lt++)Le[lt].length<=O||(Jh(Le[lt],O,1,Le[lt].length-1,$h),Le[lt]=Le[lt].slice(0,O));return Le}function $h(A,O){return O.area-A.area}function yc(A,O,Z){for(var ie=Z.patternDependencies,_e=!1,Le=0,je=O;Le<je.length;Le+=1){var Qe=je[Le].paint.get(A+"-pattern");Qe.isConstant()||(_e=!0);var lt=Qe.constantOr(null);lt&&(_e=!0,ie[lt.to]=!0,ie[lt.from]=!0)}return _e}function xc(A,O,Z,ie,_e){for(var Le=_e.patternDependencies,je=0,Qe=O;je<Qe.length;je+=1){var lt=Qe[je],Tt=lt.paint.get(A+"-pattern").value;if("constant"!==Tt.kind){var Mt=Tt.evaluate({zoom:ie-1},Z,{},_e.availableImages),Bt=Tt.evaluate({zoom:ie},Z,{},_e.availableImages),Ht=Tt.evaluate({zoom:ie+1},Z,{},_e.availableImages);Bt=Bt&&Bt.name?Bt.name:Bt,Ht=Ht&&Ht.name?Ht.name:Ht,Le[Mt=Mt&&Mt.name?Mt.name:Mt]=!0,Le[Bt]=!0,Le[Ht]=!0,Z.patterns[lt.id]={min:Mt,mid:Bt,max:Ht}}}return Z}Su.deviation=function(A,O,Z,ie){var _e=O&&O.length,je=Math.abs(vc(A,0,_e?O[0]*Z:A.length,Z));if(_e)for(var Qe=0,lt=O.length;Qe<lt;Qe++)je-=Math.abs(vc(A,O[Qe]*Z,Qe<lt-1?O[Qe+1]*Z:A.length,Z));var Bt=0;for(Qe=0;Qe<ie.length;Qe+=3){var Ht=ie[Qe]*Z,Vt=ie[Qe+1]*Z,an=ie[Qe+2]*Z;Bt+=Math.abs((A[Ht]-A[an])*(A[Vt+1]-A[Ht+1])-(A[Ht]-A[Vt])*(A[an+1]-A[Ht+1]))}return 0===je&&0===Bt?0:Math.abs((Bt-je)/je)},Su.flatten=function(A){for(var O=A[0][0].length,Z={vertices:[],holes:[],dimensions:O},ie=0,_e=0;_e<A.length;_e++){for(var Le=0;Le<A[_e].length;Le++)for(var je=0;je<O;je++)Z.vertices.push(A[_e][Le][je]);_e>0&&Z.holes.push(ie+=A[_e-1].length)}return Z},pc.default=jh;var _s=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new We,this.indexArray=new Be,this.indexArray2=new ce,this.programConfigurations=new Ci(ef,A.layers,A.zoom),this.segments=new tn,this.segments2=new tn,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};_s.prototype.populate=function(A,O,Z){this.hasPattern=yc("fill",this.layers,O);for(var ie=this.layers[0].layout.get("fill-sort-key"),_e=[],Le=0,je=A;Le<je.length;Le+=1){var Qe=je[Le],lt=Qe.feature,Tt=Qe.id,Mt=Qe.index,Bt=Qe.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Vt={type:lt.type,id:Tt,properties:lt.properties,geometry:Ht?Si(lt):[]};if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Vt,Z)){Ht||(Vt.geometry=Si(lt));var an=ie?ie.evaluate(Vt,{},Z,O.availableImages):void 0;_e.push({id:Tt,properties:lt.properties,type:lt.type,sourceLayerIndex:Bt,index:Mt,geometry:Vt.geometry,patterns:{},sortKey:an})}}ie&&_e.sort(function(Mr,Cr){return Mr.sortKey-Cr.sortKey});for(var On=0,Pn=_e;On<Pn.length;On+=1){var Nn=Pn[On],Zn=Nn.geometry,Qn=Nn.index,rr=Nn.sourceLayerIndex;if(this.hasPattern){var _r=xc("fill",this.layers,Nn,this.zoom,O);this.patternFeatures.push(_r)}else this.addFeature(Nn,Zn,Qn,Z,{});O.featureIndex.insert(A[Qn].feature,Zn,Qn,rr,this.index)}},_s.prototype.update=function(A,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,Z)},_s.prototype.addFeatures=function(A,O,Z){for(var ie=0,_e=this.patternFeatures;ie<_e.length;ie+=1){var Le=_e[ie];this.addFeature(Le,Le.geometry,Le.index,O,Z)}},_s.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},_s.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_s.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,ef),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},_s.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},_s.prototype.addFeature=function(A,O,Z,ie,_e){for(var Le=0,je=mc(O,500);Le<je.length;Le+=1){for(var Qe=je[Le],lt=0,Tt=0,Mt=Qe;Tt<Mt.length;Tt+=1)lt+=Mt[Tt].length;for(var Bt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray),Ht=Bt.vertexLength,Vt=[],an=[],yn=0,On=Qe;yn<On.length;yn+=1){var Pn=On[yn];if(0!==Pn.length){Pn!==Qe[0]&&an.push(Vt.length/2);var Nn=this.segments2.prepareSegment(Pn.length,this.layoutVertexArray,this.indexArray2),Vn=Nn.vertexLength;this.layoutVertexArray.emplaceBack(Pn[0].x,Pn[0].y),this.indexArray2.emplaceBack(Vn+Pn.length-1,Vn),Vt.push(Pn[0].x),Vt.push(Pn[0].y);for(var Zn=1;Zn<Pn.length;Zn++)this.layoutVertexArray.emplaceBack(Pn[Zn].x,Pn[Zn].y),this.indexArray2.emplaceBack(Vn+Zn-1,Vn+Zn),Vt.push(Pn[Zn].x),Vt.push(Pn[Zn].y);Nn.vertexLength+=Pn.length,Nn.primitiveLength+=Pn.length}}for(var Qn=pc(Vt,an),rr=0;rr<Qn.length;rr+=3)this.indexArray.emplaceBack(Ht+Qn[rr],Ht+Qn[rr+1],Ht+Qn[rr+2]);Bt.vertexLength+=lt,Bt.primitiveLength+=Qn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,_e,ie)},wr("FillBucket",_s,{omit:["layers","patternFeatures"]});var Qh=new ea({"fill-sort-key":new Ir(Se.layout_fill["fill-sort-key"])}),ep={paint:new ea({"fill-antialias":new Lr(Se.paint_fill["fill-antialias"]),"fill-opacity":new Ir(Se.paint_fill["fill-opacity"]),"fill-color":new Ir(Se.paint_fill["fill-color"]),"fill-outline-color":new Ir(Se.paint_fill["fill-outline-color"]),"fill-translate":new Lr(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new Lr(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new is(Se.paint_fill["fill-pattern"])}),layout:Qh},tp=function(A){function O(Z){A.call(this,Z,ep)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.recalculate=function(Z,ie){A.prototype.recalculate.call(this,Z,ie);var _e=this.paint._values["fill-outline-color"];"constant"===_e.value.kind&&void 0===_e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(Z){return new _s(Z)},O.prototype.queryRadius=function(){return Tu(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(Z,ie,_e,Le,je,Qe,lt){return Ds(ku(Z,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Qe.angle,lt),Le)},O.prototype.isTileClipped=function(){return!0},O}(da),sf=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,lf=Pl;function Pl(A,O,Z,ie,_e){this.properties={},this.extent=Z,this.type=0,this._pbf=A,this._geometry=-1,this._keys=ie,this._values=_e,A.readFields(np,this,O)}function np(A,O,Z){1==A?O.id=Z.readVarint():2==A?function(ie,_e){for(var Le=ie.readVarint()+ie.pos;ie.pos<Le;){var je=_e._keys[ie.readVarint()],Qe=_e._values[ie.readVarint()];_e.properties[je]=Qe}}(Z,O):3==A?O.type=Z.readVarint():4==A&&(O._geometry=Z.pos)}function rp(A){for(var O,Z,ie=0,_e=0,Le=A.length,je=Le-1;_e<Le;je=_e++)ie+=((Z=A[je]).x-(O=A[_e]).x)*(O.y+Z.y);return ie}Pl.types=["Unknown","Point","LineString","Polygon"],Pl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var O,Z=A.readVarint()+A.pos,ie=1,_e=0,Le=0,je=0,Qe=[];A.pos<Z;){if(_e<=0){var lt=A.readVarint();ie=7&lt,_e=lt>>3}if(_e--,1===ie||2===ie)Le+=A.readSVarint(),je+=A.readSVarint(),1===ie&&(O&&Qe.push(O),O=[]),O.push(new e(Le,je));else{if(7!==ie)throw new Error("unknown command "+ie);O&&O.push(O[0].clone())}}return O&&Qe.push(O),Qe},Pl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var O=A.readVarint()+A.pos,Z=1,ie=0,_e=0,Le=0,je=1/0,Qe=-1/0,lt=1/0,Tt=-1/0;A.pos<O;){if(ie<=0){var Mt=A.readVarint();Z=7&Mt,ie=Mt>>3}if(ie--,1===Z||2===Z)(_e+=A.readSVarint())<je&&(je=_e),_e>Qe&&(Qe=_e),(Le+=A.readSVarint())<lt&&(lt=Le),Le>Tt&&(Tt=Le);else if(7!==Z)throw new Error("unknown command "+Z)}return[je,lt,Qe,Tt]},Pl.prototype.toGeoJSON=function(A,O,Z){var ie,_e,Le=this.extent*Math.pow(2,Z),je=this.extent*A,Qe=this.extent*O,lt=this.loadGeometry(),Tt=Pl.types[this.type];function Mt(Vt){for(var an=0;an<Vt.length;an++){var yn=Vt[an];Vt[an]=[360*(yn.x+je)/Le-180,360/Math.PI*Math.atan(Math.exp((180-360*(yn.y+Qe)/Le)*Math.PI/180))-90]}}switch(this.type){case 1:var Bt=[];for(ie=0;ie<lt.length;ie++)Bt[ie]=lt[ie][0];Mt(lt=Bt);break;case 2:for(ie=0;ie<lt.length;ie++)Mt(lt[ie]);break;case 3:for(lt=function(Vt){var an=Vt.length;if(an<=1)return[Vt];for(var yn,On,Pn=[],Nn=0;Nn<an;Nn++){var Vn=rp(Vt[Nn]);0!==Vn&&(void 0===On&&(On=Vn<0),On===Vn<0?(yn&&Pn.push(yn),yn=[Vt[Nn]]):yn.push(Vt[Nn]))}return yn&&Pn.push(yn),Pn}(lt),ie=0;ie<lt.length;ie++)for(_e=0;_e<lt[ie].length;_e++)Mt(lt[ie][_e])}1===lt.length?lt=lt[0]:Tt="Multi"+Tt;var Ht={type:"Feature",geometry:{type:Tt,coordinates:lt},properties:this.properties};return"id"in this&&(Ht.id=this.id),Ht};var uf=cf;function cf(A,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(ip,this,O),this.length=this._features.length}function ip(A,O,Z){15===A?O.version=Z.readVarint():1===A?O.name=Z.readString():5===A?O.extent=Z.readVarint():2===A?O._features.push(Z.pos):3===A?O._keys.push(Z.readString()):4===A&&O._values.push(function(ie){for(var _e=null,Le=ie.readVarint()+ie.pos;ie.pos<Le;){var je=ie.readVarint()>>3;_e=1===je?ie.readString():2===je?ie.readFloat():3===je?ie.readDouble():4===je?ie.readVarint64():5===je?ie.readVarint():6===je?ie.readSVarint():7===je?ie.readBoolean():null}return _e}(Z))}function ap(A,O,Z){if(3===A){var ie=new uf(Z,Z.readVarint()+Z.pos);ie.length&&(O[ie.name]=ie)}}cf.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var O=this._pbf.readVarint()+this._pbf.pos;return new lf(this._pbf,O,this.extent,this._keys,this._values)};var Ol={VectorTile:function(A,O){this.layers=A.readFields(ap,{},O)},VectorTileFeature:lf,VectorTileLayer:uf},op=Ol.VectorTileFeature.types,bc=Math.pow(2,13);function tu(A,O,Z,ie,_e,Le,je,Qe){A.emplaceBack(O,Z,2*Math.floor(ie*bc)+je,_e*bc*2,Le*bc*2,Math.round(Qe))}var ws=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new ot,this.indexArray=new Be,this.programConfigurations=new Ci(sf,A.layers,A.zoom),this.segments=new tn,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function sp(A,O){return A.x===O.x&&(A.x<0||A.x>Nr)||A.y===O.y&&(A.y<0||A.y>Nr)}ws.prototype.populate=function(A,O,Z){this.features=[],this.hasPattern=yc("fill-extrusion",this.layers,O);for(var ie=0,_e=A;ie<_e.length;ie+=1){var Le=_e[ie],je=Le.feature,Qe=Le.id,lt=Le.index,Tt=Le.sourceLayerIndex,Mt=this.layers[0]._featureFilter.needGeometry,Bt={type:je.type,id:Qe,properties:je.properties,geometry:Mt?Si(je):[]};if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Bt,Z)){var Ht={id:Qe,sourceLayerIndex:Tt,index:lt,geometry:Mt?Bt.geometry:Si(je),properties:je.properties,type:je.type,patterns:{}};void 0!==je.id&&(Ht.id=je.id),this.hasPattern?this.features.push(xc("fill-extrusion",this.layers,Ht,this.zoom,O)):this.addFeature(Ht,Ht.geometry,lt,Z,{}),O.featureIndex.insert(je,Ht.geometry,lt,Tt,this.index,!0)}}},ws.prototype.addFeatures=function(A,O,Z){for(var ie=0,_e=this.features;ie<_e.length;ie+=1){var Le=_e[ie];this.addFeature(Le,Le.geometry,Le.index,O,Z)}},ws.prototype.update=function(A,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,Z)},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,sf),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(A,O,Z,ie,_e){for(var Le=0,je=mc(O,500);Le<je.length;Le+=1){for(var Qe=je[Le],lt=0,Tt=0,Mt=Qe;Tt<Mt.length;Tt+=1)lt+=Mt[Tt].length;for(var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ht=0,Vt=Qe;Ht<Vt.length;Ht+=1){var an=Vt[Ht];if(0!==an.length&&!((Kr=an).every(function(qr){return qr.x<0})||Kr.every(function(qr){return qr.x>Nr})||Kr.every(function(qr){return qr.y<0})||Kr.every(function(qr){return qr.y>Nr})))for(var yn=0,On=0;On<an.length;On++){var Pn=an[On];if(On>=1){var Nn=an[On-1];if(!sp(Pn,Nn)){Bt.vertexLength+4>tn.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=Pn.sub(Nn)._perp()._unit(),Zn=Nn.dist(Pn);yn+Zn>32768&&(yn=0),tu(this.layoutVertexArray,Pn.x,Pn.y,Vn.x,Vn.y,0,0,yn),tu(this.layoutVertexArray,Pn.x,Pn.y,Vn.x,Vn.y,0,1,yn),tu(this.layoutVertexArray,Nn.x,Nn.y,Vn.x,Vn.y,0,0,yn+=Zn),tu(this.layoutVertexArray,Nn.x,Nn.y,Vn.x,Vn.y,0,1,yn);var Qn=Bt.vertexLength;this.indexArray.emplaceBack(Qn,Qn+2,Qn+1),this.indexArray.emplaceBack(Qn+1,Qn+2,Qn+3),Bt.vertexLength+=4,Bt.primitiveLength+=2}}}}if(Bt.vertexLength+lt>tn.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray)),"Polygon"===op[A.type]){for(var rr=[],_r=[],dr=Bt.vertexLength,Mr=0,Cr=Qe;Mr<Cr.length;Mr+=1){var Ur=Cr[Mr];if(0!==Ur.length){Ur!==Qe[0]&&_r.push(rr.length/2);for(var Or=0;Or<Ur.length;Or++){var jr=Ur[Or];tu(this.layoutVertexArray,jr.x,jr.y,0,0,1,1,0),rr.push(jr.x),rr.push(jr.y)}}}for(var zr=pc(rr,_r),Pr=0;Pr<zr.length;Pr+=3)this.indexArray.emplaceBack(dr+zr[Pr],dr+zr[Pr+2],dr+zr[Pr+1]);Bt.primitiveLength+=zr.length/3,Bt.vertexLength+=lt}}var Kr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,_e,ie)},wr("FillExtrusionBucket",ws,{omit:["layers","features"]});var lp={paint:new ea({"fill-extrusion-opacity":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ir(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new is(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ir(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ir(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Lr(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},up=function(A){function O(Z){A.call(this,Z,lp)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.createBucket=function(Z){return new ws(Z)},O.prototype.queryRadius=function(){return Tu(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(Z,ie,_e,Le,je,Qe,lt,Tt){var Mt=ku(Z,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Qe.angle,lt),Bt=this.paint.get("fill-extrusion-height").evaluate(ie,_e),Ht=this.paint.get("fill-extrusion-base").evaluate(ie,_e),Vt=function(yn,On,Pn,Nn){for(var Vn=[],Zn=0,Qn=yn;Zn<Qn.length;Zn+=1){var rr=Qn[Zn],_r=[rr.x,rr.y,0,1];Mu(_r,_r,On),Vn.push(new e(_r[0]/_r[3],_r[1]/_r[3]))}return Vn}(Mt,Tt),an=function(yn,On,Pn,Nn){for(var Vn=[],Zn=[],Qn=Nn[8]*On,rr=Nn[9]*On,_r=Nn[10]*On,dr=Nn[11]*On,Mr=Nn[8]*Pn,Cr=Nn[9]*Pn,Ur=Nn[10]*Pn,Or=Nn[11]*Pn,jr=0,zr=yn;jr<zr.length;jr+=1){for(var Pr=[],Kr=[],qr=0,Ti=zr[jr];qr<Ti.length;qr+=1){var Br=Ti[qr],xi=Br.x,Mi=Br.y,Ei=Nn[0]*xi+Nn[4]*Mi+Nn[12],Oi=Nn[1]*xi+Nn[5]*Mi+Nn[13],ki=Nn[2]*xi+Nn[6]*Mi+Nn[14],aa=Nn[3]*xi+Nn[7]*Mi+Nn[15],zi=ki+_r,ma=aa+dr,Pa=Ei+Mr,Ta=Oi+Cr,Wa=ki+Ur,ka=aa+Or,sa=new e((Ei+Qn)/ma,(Oi+rr)/ma);sa.z=zi/ma,Pr.push(sa);var Aa=new e(Pa/ka,Ta/ka);Aa.z=Wa/ka,Kr.push(Aa)}Vn.push(Pr),Zn.push(Kr)}return[Vn,Zn]}(Le,Ht,Bt,Tt);return function(yn,On,Pn){var Nn=1/0;Ds(Pn,On)&&(Nn=ff(Pn,On[0]));for(var Vn=0;Vn<On.length;Vn++)for(var Zn=On[Vn],Qn=yn[Vn],rr=0;rr<Zn.length-1;rr++){var _r=Zn[rr],Cr=[_r,Zn[rr+1],Qn[rr+1],Qn[rr],_r];ji(Pn,Cr)&&(Nn=Math.min(Nn,ff(Pn,Cr)))}return Nn!==1/0&&Nn}(an[0],an[1],Vt)},O}(da);function nu(A,O){return A.x*O.x+A.y*O.y}function ff(A,O){if(1===A.length){for(var Z,ie=0,_e=O[ie++];!Z||_e.equals(Z);)if(!(Z=O[ie++]))return 1/0;for(;ie<O.length;ie++){var Le=O[ie],je=A[0],Qe=Z.sub(_e),lt=Le.sub(_e),Tt=je.sub(_e),Mt=nu(Qe,Qe),Bt=nu(Qe,lt),Ht=nu(lt,lt),Vt=nu(Tt,Qe),an=nu(Tt,lt),yn=Mt*Ht-Bt*Bt,On=(Ht*Vt-Bt*an)/yn,Pn=(Mt*an-Bt*Vt)/yn,Vn=_e.z*(1-On-Pn)+Z.z*On+Le.z*Pn;if(isFinite(Vn))return Vn}return 1/0}for(var Zn=1/0,Qn=0,rr=O;Qn<rr.length;Qn+=1)Zn=Math.min(Zn,rr[Qn].z);return Zn}var hf=gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,cp=Ol.VectorTileFeature.types,fp=Math.cos(Math.PI/180*37.5),pf=Math.pow(2,14)/.5,no=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ft,this.indexArray=new Be,this.programConfigurations=new Ci(hf,A.layers,A.zoom),this.segments=new tn,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};no.prototype.populate=function(A,O,Z){this.hasPattern=yc("line",this.layers,O);for(var ie=this.layers[0].layout.get("line-sort-key"),_e=[],Le=0,je=A;Le<je.length;Le+=1){var Qe=je[Le],lt=Qe.feature,Tt=Qe.id,Mt=Qe.index,Bt=Qe.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Vt={type:lt.type,id:Tt,properties:lt.properties,geometry:Ht?Si(lt):[]};if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Vt,Z)){Ht||(Vt.geometry=Si(lt));var an=ie?ie.evaluate(Vt,{},Z):void 0;_e.push({id:Tt,properties:lt.properties,type:lt.type,sourceLayerIndex:Bt,index:Mt,geometry:Vt.geometry,patterns:{},sortKey:an})}}ie&&_e.sort(function(Mr,Cr){return Mr.sortKey-Cr.sortKey});for(var On=0,Pn=_e;On<Pn.length;On+=1){var Nn=Pn[On],Zn=Nn.geometry,Qn=Nn.index,rr=Nn.sourceLayerIndex;if(this.hasPattern){var _r=xc("line",this.layers,Nn,this.zoom,O);this.patternFeatures.push(_r)}else this.addFeature(Nn,Zn,Qn,Z,{});O.featureIndex.insert(A[Qn].feature,Zn,Qn,rr,this.index)}},no.prototype.update=function(A,O,Z){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,Z)},no.prototype.addFeatures=function(A,O,Z){for(var ie=0,_e=this.patternFeatures;ie<_e.length;ie+=1){var Le=_e[ie];this.addFeature(Le,Le.geometry,Le.index,O,Z)}},no.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},no.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},no.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,hf),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},no.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},no.prototype.addFeature=function(A,O,Z,ie,_e){for(var Le=this.layers[0].layout,je=Le.get("line-join").evaluate(A,{}),Qe=Le.get("line-cap"),lt=Le.get("line-miter-limit"),Tt=Le.get("line-round-limit"),Mt=0,Bt=O;Mt<Bt.length;Mt+=1)this.addLine(Bt[Mt],A,je,Qe,lt,Tt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Z,_e,ie)},no.prototype.addLine=function(A,O,Z,ie,_e,Le){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var je=0;je<A.length-1;je++)this.totalDistance+=A[je].dist(A[je+1]);this.updateScaledDistance()}for(var Qe="Polygon"===cp[O.type],lt=A.length;lt>=2&&A[lt-1].equals(A[lt-2]);)lt--;for(var Tt=0;Tt<lt-1&&A[Tt].equals(A[Tt+1]);)Tt++;if(!(lt<(Qe?3:2))){"bevel"===Z&&(_e=1.05);var Mt,Bt=this.overscaling<=16?122880/(512*this.overscaling):0,Ht=this.segments.prepareSegment(10*lt,this.layoutVertexArray,this.indexArray),Vt=void 0,an=void 0,yn=void 0,On=void 0;this.e1=this.e2=-1,Qe&&(On=A[Tt].sub(Mt=A[lt-2])._unit()._perp());for(var Pn=Tt;Pn<lt;Pn++)if(!(an=Pn===lt-1?Qe?A[Tt+1]:void 0:A[Pn+1])||!A[Pn].equals(an)){On&&(yn=On),Mt&&(Vt=Mt),Mt=A[Pn],On=an?an.sub(Mt)._unit()._perp():yn;var Nn=(yn=yn||On).add(On);0===Nn.x&&0===Nn.y||Nn._unit();var Vn=yn.x*On.x+yn.y*On.y,Zn=Nn.x*On.x+Nn.y*On.y,Qn=0!==Zn?1/Zn:1/0,rr=2*Math.sqrt(2-2*Zn),_r=Zn<fp&&Vt&&an,dr=yn.x*On.y-yn.y*On.x>0;if(_r&&Pn>Tt){var Mr=Mt.dist(Vt);if(Mr>2*Bt){var Cr=Mt.sub(Mt.sub(Vt)._mult(Bt/Mr)._round());this.updateDistance(Vt,Cr),this.addCurrentVertex(Cr,yn,0,0,Ht),Vt=Cr}}var Ur=Vt&&an,Or=Ur?Z:Qe?"butt":ie;if(Ur&&"round"===Or&&(Qn<Le?Or="miter":Qn<=2&&(Or="fakeround")),"miter"===Or&&Qn>_e&&(Or="bevel"),"bevel"===Or&&(Qn>2&&(Or="flipbevel"),Qn<_e&&(Or="miter")),Vt&&this.updateDistance(Vt,Mt),"miter"===Or)Nn._mult(Qn),this.addCurrentVertex(Mt,Nn,0,0,Ht);else if("flipbevel"===Or){if(Qn>100)Nn=On.mult(-1);else{var jr=Qn*yn.add(On).mag()/yn.sub(On).mag();Nn._perp()._mult(jr*(dr?-1:1))}this.addCurrentVertex(Mt,Nn,0,0,Ht),this.addCurrentVertex(Mt,Nn.mult(-1),0,0,Ht)}else if("bevel"===Or||"fakeround"===Or){var zr=-Math.sqrt(Qn*Qn-1),Pr=dr?zr:0,Kr=dr?0:zr;if(Vt&&this.addCurrentVertex(Mt,yn,Pr,Kr,Ht),"fakeround"===Or)for(var qr=Math.round(180*rr/Math.PI/20),Ti=1;Ti<qr;Ti++){var Br=Ti/qr;if(.5!==Br){var xi=Br-.5;Br+=Br*xi*(Br-1)*((1.0904+Vn*(Vn*(3.55645-1.43519*Vn)-3.2452))*xi*xi+(.848013+Vn*(.215638*Vn-1.06021)))}var Mi=On.sub(yn)._mult(Br)._add(yn)._unit()._mult(dr?-1:1);this.addHalfVertex(Mt,Mi.x,Mi.y,!1,dr,0,Ht)}an&&this.addCurrentVertex(Mt,On,-Pr,-Kr,Ht)}else if("butt"===Or)this.addCurrentVertex(Mt,Nn,0,0,Ht);else if("square"===Or){var Ei=Vt?1:-1;this.addCurrentVertex(Mt,Nn,Ei,Ei,Ht)}else"round"===Or&&(Vt&&(this.addCurrentVertex(Mt,yn,0,0,Ht),this.addCurrentVertex(Mt,yn,1,1,Ht,!0)),an&&(this.addCurrentVertex(Mt,On,-1,-1,Ht,!0),this.addCurrentVertex(Mt,On,0,0,Ht)));if(_r&&Pn<lt-1){var Oi=Mt.dist(an);if(Oi>2*Bt){var ki=Mt.add(an.sub(Mt)._mult(Bt/Oi)._round());this.updateDistance(Mt,ki),this.addCurrentVertex(ki,On,0,0,Ht),Mt=ki}}}}},no.prototype.addCurrentVertex=function(A,O,Z,ie,_e,Le){void 0===Le&&(Le=!1);var lt=O.y*ie-O.x,Tt=-O.y-O.x*ie;this.addHalfVertex(A,O.x+O.y*Z,O.y-O.x*Z,Le,!1,Z,_e),this.addHalfVertex(A,lt,Tt,Le,!0,-ie,_e),this.distance>pf/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(A,O,Z,ie,_e,Le))},no.prototype.addHalfVertex=function(A,O,Z,ie,_e,Le,je){var Tt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((A.x<<1)+(ie?1:0),(A.y<<1)+(_e?1:0),Math.round(63*O)+128,Math.round(63*Z)+128,1+(0===Le?0:Le<0?-1:1)|(63&Tt)<<2,Tt>>6);var Mt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Mt),je.primitiveLength++),_e?this.e2=Mt:this.e1=Mt},no.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(pf-1):this.distance},no.prototype.updateDistance=function(A,O){this.distance+=A.dist(O),this.updateScaledDistance()},wr("LineBucket",no,{omit:["layers","patternFeatures"]});var hp=new ea({"line-cap":new Lr(Se.layout_line["line-cap"]),"line-join":new Ir(Se.layout_line["line-join"]),"line-miter-limit":new Lr(Se.layout_line["line-miter-limit"]),"line-round-limit":new Lr(Se.layout_line["line-round-limit"]),"line-sort-key":new Ir(Se.layout_line["line-sort-key"])}),df={paint:new ea({"line-opacity":new Ir(Se.paint_line["line-opacity"]),"line-color":new Ir(Se.paint_line["line-color"]),"line-translate":new Lr(Se.paint_line["line-translate"]),"line-translate-anchor":new Lr(Se.paint_line["line-translate-anchor"]),"line-width":new Ir(Se.paint_line["line-width"]),"line-gap-width":new Ir(Se.paint_line["line-gap-width"]),"line-offset":new Ir(Se.paint_line["line-offset"]),"line-blur":new Ir(Se.paint_line["line-blur"]),"line-dasharray":new po(Se.paint_line["line-dasharray"]),"line-pattern":new is(Se.paint_line["line-pattern"]),"line-gradient":new Za(Se.paint_line["line-gradient"])}),layout:hp},pp=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(Z,ie){return ie=new ii(Math.floor(ie.zoom),{now:ie.now,fadeDuration:ie.fadeDuration,zoomHistory:ie.zoomHistory,transition:ie.transition}),A.prototype.possiblyEvaluate.call(this,Z,ie)},O.prototype.evaluate=function(Z,ie,_e,Le){return ie=c({},ie,{zoom:Math.floor(ie.zoom)}),A.prototype.evaluate.call(this,Z,ie,_e,Le)},O}(Ir),gf=new pp(df.paint.properties["line-width"].specification);gf.useIntegerZoom=!0;var dp=function(A){function O(Z){A.call(this,Z,df)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(Z){"line-gradient"===Z&&this._updateGradient()},O.prototype._updateGradient=function(){this.gradient=Qc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(Z,ie){A.prototype.recalculate.call(this,Z,ie),this.paint._values["line-floorwidth"]=gf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Z)},O.prototype.createBucket=function(Z){return new no(Z)},O.prototype.queryRadius=function(Z){var ie=Z,_e=vf(Qs("line-width",this,ie),Qs("line-gap-width",this,ie)),Le=Qs("line-offset",this,ie);return _e/2+Math.abs(Le)+Tu(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(Z,ie,_e,Le,je,Qe,lt){var Tt=ku(Z,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Qe.angle,lt),Mt=lt/2*vf(this.paint.get("line-width").evaluate(ie,_e),this.paint.get("line-gap-width").evaluate(ie,_e)),Bt=this.paint.get("line-offset").evaluate(ie,_e);return Bt&&(Le=function(Ht,Vt){for(var an=[],yn=new e(0,0),On=0;On<Ht.length;On++){for(var Pn=Ht[On],Nn=[],Vn=0;Vn<Pn.length;Vn++){var Qn=Pn[Vn],rr=Pn[Vn+1],_r=0===Vn?yn:Qn.sub(Pn[Vn-1])._unit()._perp(),dr=Vn===Pn.length-1?yn:rr.sub(Qn)._unit()._perp(),Mr=_r._add(dr)._unit();Mr._mult(1/(Mr.x*dr.x+Mr.y*dr.y)),Nn.push(Mr._mult(Vt)._add(Qn))}an.push(Nn)}return an}(Le,Bt*lt)),function(Ht,Vt,an){for(var yn=0;yn<Vt.length;yn++){var On=Vt[yn];if(Ht.length>=3)for(var Pn=0;Pn<On.length;Pn++)if(fl(Ht,On[Pn]))return!0;if(sc(Ht,On,an))return!0}return!1}(Tt,Le,Mt)},O.prototype.isTileClipped=function(){return!0},O}(da);function vf(A,O){return O>0?O+2*A:A}var _c=gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gp=gi([{name:"a_projected_pos",components:3,type:"Float32"}],4),vp=(gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),mf=(gi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),mp=gi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function yp(A,O,Z){return A.sections.forEach(function(ie){var _e,je,Qe;ie.text=(_e=ie.text,je=Z,"uppercase"===(Qe=O.layout.get("text-transform").evaluate(je,{}))?_e=_e.toLocaleUpperCase():"lowercase"===Qe&&(_e=_e.toLocaleLowerCase()),ha.applyArabicShaping&&(_e=ha.applyArabicShaping(_e)),_e)}),A}gi([{name:"triangle",components:3,type:"Uint16"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gi([{type:"Float32",name:"offsetX"}]),gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ru={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},yf=function(A,O,Z,ie,_e){var Le,je,Qe=8*_e-ie-1,lt=(1<<Qe)-1,Tt=lt>>1,Mt=-7,Bt=Z?_e-1:0,Ht=Z?-1:1,Vt=A[O+Bt];for(Bt+=Ht,Le=Vt&(1<<-Mt)-1,Vt>>=-Mt,Mt+=Qe;Mt>0;Le=256*Le+A[O+Bt],Bt+=Ht,Mt-=8);for(je=Le&(1<<-Mt)-1,Le>>=-Mt,Mt+=ie;Mt>0;je=256*je+A[O+Bt],Bt+=Ht,Mt-=8);if(0===Le)Le=1-Tt;else{if(Le===lt)return je?NaN:1/0*(Vt?-1:1);je+=Math.pow(2,ie),Le-=Tt}return(Vt?-1:1)*je*Math.pow(2,Le-ie)},xf=function(A,O,Z,ie,_e,Le){var je,Qe,lt,Tt=8*Le-_e-1,Mt=(1<<Tt)-1,Bt=Mt>>1,Ht=23===_e?Math.pow(2,-24)-Math.pow(2,-77):0,Vt=ie?0:Le-1,an=ie?1:-1,yn=O<0||0===O&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Qe=isNaN(O)?1:0,je=Mt):(je=Math.floor(Math.log(O)/Math.LN2),O*(lt=Math.pow(2,-je))<1&&(je--,lt*=2),(O+=je+Bt>=1?Ht/lt:Ht*Math.pow(2,1-Bt))*lt>=2&&(je++,lt/=2),je+Bt>=Mt?(Qe=0,je=Mt):je+Bt>=1?(Qe=(O*lt-1)*Math.pow(2,_e),je+=Bt):(Qe=O*Math.pow(2,Bt-1)*Math.pow(2,_e),je=0));_e>=8;A[Z+Vt]=255&Qe,Vt+=an,Qe/=256,_e-=8);for(je=je<<_e|Qe,Tt+=_e;Tt>0;A[Z+Vt]=255&je,Vt+=an,je/=256,Tt-=8);A[Z+Vt-an]|=128*yn},Pu=Ai;function Ai(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var wc=4294967296,bf=1/wc,_f=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function el(A){return A.type===Ai.Bytes?A.readVarint()+A.pos:A.pos+1}function wf(A,O,Z){var ie=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));Z.realloc(ie);for(var _e=Z.pos-1;_e>=A;_e--)Z.buf[_e+ie]=Z.buf[_e]}function xp(A,O){for(var Z=0;Z<A.length;Z++)O.writeVarint(A[Z])}function bp(A,O){for(var Z=0;Z<A.length;Z++)O.writeSVarint(A[Z])}function _p(A,O){for(var Z=0;Z<A.length;Z++)O.writeFloat(A[Z])}function wp(A,O){for(var Z=0;Z<A.length;Z++)O.writeDouble(A[Z])}function Tp(A,O){for(var Z=0;Z<A.length;Z++)O.writeBoolean(A[Z])}function kp(A,O){for(var Z=0;Z<A.length;Z++)O.writeFixed32(A[Z])}function Ap(A,O){for(var Z=0;Z<A.length;Z++)O.writeSFixed32(A[Z])}function Mp(A,O){for(var Z=0;Z<A.length;Z++)O.writeFixed64(A[Z])}function Sp(A,O){for(var Z=0;Z<A.length;Z++)O.writeSFixed64(A[Z])}function Ou(A,O){return(A[O]|A[O+1]<<8|A[O+2]<<16)+16777216*A[O+3]}function zl(A,O,Z){A[Z]=O,A[Z+1]=O>>>8,A[Z+2]=O>>>16,A[Z+3]=O>>>24}function Tf(A,O){return(A[O]|A[O+1]<<8|A[O+2]<<16)+(A[O+3]<<24)}function Ep(A,O,Z){1===A&&Z.readMessage(Lp,O)}function Lp(A,O,Z){if(3===A){var ie=Z.readMessage(Cp,{}),je=ie.width,Qe=ie.height,lt=ie.left,Tt=ie.top,Mt=ie.advance;O.push({id:ie.id,bitmap:new bl({width:je+6,height:Qe+6},ie.bitmap),metrics:{width:je,height:Qe,left:lt,top:Tt,advance:Mt}})}}function Cp(A,O,Z){1===A?O.id=Z.readVarint():2===A?O.bitmap=Z.readBytes():3===A?O.width=Z.readVarint():4===A?O.height=Z.readVarint():5===A?O.left=Z.readSVarint():6===A?O.top=Z.readSVarint():7===A&&(O.advance=Z.readVarint())}function kf(A){for(var O=0,Z=0,ie=0,_e=A;ie<_e.length;ie+=1){var Le=_e[ie];O+=Le.w*Le.h,Z=Math.max(Z,Le.w)}A.sort(function(yn,On){return On.h-yn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),Z),h:1/0}],Qe=0,lt=0,Tt=0,Mt=A;Tt<Mt.length;Tt+=1)for(var Bt=Mt[Tt],Ht=je.length-1;Ht>=0;Ht--){var Vt=je[Ht];if(!(Bt.w>Vt.w||Bt.h>Vt.h)){if(Bt.x=Vt.x,Bt.y=Vt.y,lt=Math.max(lt,Bt.y+Bt.h),Qe=Math.max(Qe,Bt.x+Bt.w),Bt.w===Vt.w&&Bt.h===Vt.h){var an=je.pop();Ht<je.length&&(je[Ht]=an)}else Bt.h===Vt.h?(Vt.x+=Bt.w,Vt.w-=Bt.w):Bt.w===Vt.w?(Vt.y+=Bt.h,Vt.h-=Bt.h):(je.push({x:Vt.x+Bt.w,y:Vt.y,w:Vt.w-Bt.w,h:Bt.h}),Vt.y+=Bt.h,Vt.h-=Bt.h);break}}return{w:Qe,h:lt,fill:O/(Qe*lt)||0}}Ai.prototype={destroy:function(){this.buf=null},readFields:function(A,O,Z){for(Z=Z||this.length;this.pos<Z;){var ie=this.readVarint(),_e=ie>>3,Le=this.pos;this.type=7&ie,A(_e,O,this),this.pos===Le&&this.skip(ie)}return O},readMessage:function(A,O){return this.readFields(A,O,this.readVarint()+this.pos)},readFixed32:function(){var A=Ou(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Tf(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Ou(this.buf,this.pos)+Ou(this.buf,this.pos+4)*wc;return this.pos+=8,A},readSFixed64:function(){var A=Ou(this.buf,this.pos)+Tf(this.buf,this.pos+4)*wc;return this.pos+=8,A},readFloat:function(){var A=yf(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=yf(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var O,Z,ie=this.buf;return O=127&(Z=ie[this.pos++]),Z<128?O:(O|=(127&(Z=ie[this.pos++]))<<7,Z<128?O:(O|=(127&(Z=ie[this.pos++]))<<14,Z<128?O:(O|=(127&(Z=ie[this.pos++]))<<21,Z<128?O:function(_e,Le,je){var Qe,lt,Tt=je.buf;if(Qe=(112&(lt=Tt[je.pos++]))>>4,lt<128||(Qe|=(127&(lt=Tt[je.pos++]))<<3,lt<128)||(Qe|=(127&(lt=Tt[je.pos++]))<<10,lt<128)||(Qe|=(127&(lt=Tt[je.pos++]))<<17,lt<128)||(Qe|=(127&(lt=Tt[je.pos++]))<<24,lt<128)||(Qe|=(1&(lt=Tt[je.pos++]))<<31,lt<128))return function Il(A,O,Z){return Z?4294967296*O+(A>>>0):4294967296*(O>>>0)+(A>>>0)}(_e,Qe,Le);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(Z=ie[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,O=this.pos;return this.pos=A,A-O>=12&&_f?_f.decode(this.buf.subarray(O,A)):function(Z,ie,_e){for(var Le="",je=ie;je<_e;){var Qe,lt,Tt,Mt=Z[je],Bt=null,Ht=Mt>239?4:Mt>223?3:Mt>191?2:1;if(je+Ht>_e)break;1===Ht?Mt<128&&(Bt=Mt):2===Ht?128==(192&(Qe=Z[je+1]))&&(Bt=(31&Mt)<<6|63&Qe)<=127&&(Bt=null):3===Ht?(lt=Z[je+2],128==(192&(Qe=Z[je+1]))&&128==(192&lt)&&((Bt=(15&Mt)<<12|(63&Qe)<<6|63&lt)<=2047||Bt>=55296&&Bt<=57343)&&(Bt=null)):4===Ht&&(lt=Z[je+2],Tt=Z[je+3],128==(192&(Qe=Z[je+1]))&&128==(192&lt)&&128==(192&Tt)&&((Bt=(15&Mt)<<18|(63&Qe)<<12|(63&lt)<<6|63&Tt)<=65535||Bt>=1114112)&&(Bt=null)),null===Bt?(Bt=65533,Ht=1):Bt>65535&&(Bt-=65536,Le+=String.fromCharCode(Bt>>>10&1023|55296),Bt=56320|1023&Bt),Le+=String.fromCharCode(Bt),je+=Ht}return Le}(this.buf,O,A)},readBytes:function(){var A=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,A);return this.pos=A,O},readPackedVarint:function(A,O){if(this.type!==Ai.Bytes)return A.push(this.readVarint(O));var Z=el(this);for(A=A||[];this.pos<Z;)A.push(this.readVarint(O));return A},readPackedSVarint:function(A){if(this.type!==Ai.Bytes)return A.push(this.readSVarint());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==Ai.Bytes)return A.push(this.readBoolean());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==Ai.Bytes)return A.push(this.readFloat());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==Ai.Bytes)return A.push(this.readDouble());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==Ai.Bytes)return A.push(this.readFixed32());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==Ai.Bytes)return A.push(this.readSFixed32());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==Ai.Bytes)return A.push(this.readFixed64());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==Ai.Bytes)return A.push(this.readSFixed64());var O=el(this);for(A=A||[];this.pos<O;)A.push(this.readSFixed64());return A},skip:function(A){var O=7&A;if(O===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(O===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(O===Ai.Fixed32)this.pos+=4;else{if(O!==Ai.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(A,O){this.writeVarint(A<<3|O)},realloc:function(A){for(var O=this.length||16;O<this.pos+A;)O*=2;if(O!==this.length){var Z=new Uint8Array(O);Z.set(this.buf),this.buf=Z,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),zl(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),zl(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),zl(this.buf,-1&A,this.pos),zl(this.buf,Math.floor(A*bf),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),zl(this.buf,-1&A,this.pos),zl(this.buf,Math.floor(A*bf),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(O,Z){var ie,_e,Le,Qe;if(O>=0?(ie=O%4294967296|0,_e=O/4294967296|0):(_e=~(-O/4294967296),4294967295^(ie=~(-O%4294967296))?ie=ie+1|0:(ie=0,_e=_e+1|0)),O>=0x10000000000000000||O<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Z.realloc(10),Le=ie,(Qe=Z).buf[Qe.pos++]=127&Le|128,Le>>>=7,Qe.buf[Qe.pos++]=127&Le|128,Le>>>=7,Qe.buf[Qe.pos++]=127&Le|128,Le>>>=7,Qe.buf[Qe.pos++]=127&Le|128,Qe.buf[Qe.pos]=127&(Le>>>=7),function(Le,je){var Qe=(7&Le)<<4;je.buf[je.pos++]|=Qe|((Le>>>=3)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le|((Le>>>=7)?128:0),Le&&(je.buf[je.pos++]=127&Le)))))}(_e,Z)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var O=this.pos;this.pos=function(ie,_e,Le){for(var je,Qe,lt=0;lt<_e.length;lt++){if((je=_e.charCodeAt(lt))>55295&&je<57344){if(!Qe){je>56319||lt+1===_e.length?(ie[Le++]=239,ie[Le++]=191,ie[Le++]=189):Qe=je;continue}if(je<56320){ie[Le++]=239,ie[Le++]=191,ie[Le++]=189,Qe=je;continue}je=Qe-55296<<10|je-56320|65536,Qe=null}else Qe&&(ie[Le++]=239,ie[Le++]=191,ie[Le++]=189,Qe=null);je<128?ie[Le++]=je:(je<2048?ie[Le++]=je>>6|192:(je<65536?ie[Le++]=je>>12|224:(ie[Le++]=je>>18|240,ie[Le++]=je>>12&63|128),ie[Le++]=je>>6&63|128),ie[Le++]=63&je|128)}return Le}(this.buf,A,this.pos);var Z=this.pos-O;Z>=128&&wf(O,Z,this),this.pos=O-1,this.writeVarint(Z),this.pos+=Z},writeFloat:function(A){this.realloc(4),xf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),xf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var O=A.length;this.writeVarint(O),this.realloc(O);for(var Z=0;Z<O;Z++)this.buf[this.pos++]=A[Z]},writeRawMessage:function(A,O){this.pos++;var Z=this.pos;A(O,this);var ie=this.pos-Z;ie>=128&&wf(Z,ie,this),this.pos=Z-1,this.writeVarint(ie),this.pos+=ie},writeMessage:function(A,O,Z){this.writeTag(A,Ai.Bytes),this.writeRawMessage(O,Z)},writePackedVarint:function(A,O){O.length&&this.writeMessage(A,xp,O)},writePackedSVarint:function(A,O){O.length&&this.writeMessage(A,bp,O)},writePackedBoolean:function(A,O){O.length&&this.writeMessage(A,Tp,O)},writePackedFloat:function(A,O){O.length&&this.writeMessage(A,_p,O)},writePackedDouble:function(A,O){O.length&&this.writeMessage(A,wp,O)},writePackedFixed32:function(A,O){O.length&&this.writeMessage(A,kp,O)},writePackedSFixed32:function(A,O){O.length&&this.writeMessage(A,Ap,O)},writePackedFixed64:function(A,O){O.length&&this.writeMessage(A,Mp,O)},writePackedSFixed64:function(A,O){O.length&&this.writeMessage(A,Sp,O)},writeBytesField:function(A,O){this.writeTag(A,Ai.Bytes),this.writeBytes(O)},writeFixed32Field:function(A,O){this.writeTag(A,Ai.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(A,O){this.writeTag(A,Ai.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(A,O){this.writeTag(A,Ai.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(A,O){this.writeTag(A,Ai.Fixed64),this.writeSFixed64(O)},writeVarintField:function(A,O){this.writeTag(A,Ai.Varint),this.writeVarint(O)},writeSVarintField:function(A,O){this.writeTag(A,Ai.Varint),this.writeSVarint(O)},writeStringField:function(A,O){this.writeTag(A,Ai.Bytes),this.writeString(O)},writeFloatField:function(A,O){this.writeTag(A,Ai.Fixed32),this.writeFloat(O)},writeDoubleField:function(A,O){this.writeTag(A,Ai.Fixed64),this.writeDouble(O)},writeBooleanField:function(A,O){this.writeVarintField(A,Boolean(O))}};var Iu=function(A,O){var Z=O.pixelRatio,ie=O.version,_e=O.stretchX,Le=O.stretchY,je=O.content;this.paddedRect=A,this.pixelRatio=Z,this.stretchX=_e,this.stretchY=Le,this.content=je,this.version=ie},iu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};iu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},iu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},iu.tlbr.get=function(){return this.tl.concat(this.br)},iu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Iu.prototype,iu);var au=function(A,O){var Z={},ie={};this.haveRenderCallbacks=[];var _e=[];this.addImages(A,Z,_e),this.addImages(O,ie,_e);var Le=kf(_e),lt=new to({width:Le.w||1,height:Le.h||1});for(var Tt in A){var Mt=A[Tt],Bt=Z[Tt].paddedRect;to.copy(Mt.data,lt,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},Mt.data)}for(var Ht in O){var Vt=O[Ht],an=ie[Ht].paddedRect,yn=an.x+1,On=an.y+1,Pn=Vt.data.width,Nn=Vt.data.height;to.copy(Vt.data,lt,{x:0,y:0},{x:yn,y:On},Vt.data),to.copy(Vt.data,lt,{x:0,y:Nn-1},{x:yn,y:On-1},{width:Pn,height:1}),to.copy(Vt.data,lt,{x:0,y:0},{x:yn,y:On+Nn},{width:Pn,height:1}),to.copy(Vt.data,lt,{x:Pn-1,y:0},{x:yn-1,y:On},{width:1,height:Nn}),to.copy(Vt.data,lt,{x:0,y:0},{x:yn+Pn,y:On},{width:1,height:Nn})}this.image=lt,this.iconPositions=Z,this.patternPositions=ie};au.prototype.addImages=function(A,O,Z){for(var ie in A){var _e=A[ie],Le={x:0,y:0,w:_e.data.width+2,h:_e.data.height+2};Z.push(Le),O[ie]=new Iu(Le,_e),_e.hasRenderCallback&&this.haveRenderCallbacks.push(ie)}},au.prototype.patchUpdatedImages=function(A,O){for(var Z in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[Z],A.getImage(Z),O),this.patchUpdatedImage(this.patternPositions[Z],A.getImage(Z),O)},au.prototype.patchUpdatedImage=function(A,O,Z){if(A&&O&&A.version!==O.version){A.version=O.version;var ie=A.tl;Z.update(O.data,void 0,{x:ie[0],y:ie[1]})}},wr("ImagePosition",Iu),wr("ImageAtlas",au);var Co={horizontal:1,vertical:2,horizontalOnly:3},Rl=function(){this.scale=1,this.fontStack="",this.imageName=null};Rl.forText=function(A,O){var Z=new Rl;return Z.scale=A||1,Z.fontStack=O,Z},Rl.forImage=function(A){var O=new Rl;return O.imageName=A,O};var Ua=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ru(A,O,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn){var On,Pn=Ua.fromFeature(A,_e);Bt===Co.vertical&&Pn.verticalizePunctuation();var Nn=ha.processBidirectionalText,Vn=ha.processStyledBidirectionalText;if(Nn&&1===Pn.sections.length){On=[];for(var Zn=0,Qn=Nn(Pn.toString(),Tc(Pn,Tt,Le,O,ie,Vt,an));Zn<Qn.length;Zn+=1){var rr=Qn[Zn],_r=new Ua;_r.text=rr,_r.sections=Pn.sections;for(var dr=0;dr<rr.length;dr++)_r.sectionIndex.push(0);On.push(_r)}}else if(Vn){On=[];for(var Mr=0,Cr=Vn(Pn.text,Pn.sectionIndex,Tc(Pn,Tt,Le,O,ie,Vt,an));Mr<Cr.length;Mr+=1){var Ur=Cr[Mr],Or=new Ua;Or.text=Ur[0],Or.sectionIndex=Ur[1],Or.sections=Pn.sections,On.push(Or)}}else On=function(Pr,Kr){for(var qr=[],Ti=Pr.text,Br=0,xi=0,Mi=Kr;xi<Mi.length;xi+=1){var Ei=Mi[xi];qr.push(Pr.substring(Br,Ei)),Br=Ei}return Br<Ti.length&&qr.push(Pr.substring(Br,Ti.length)),qr}(Pn,Tc(Pn,Tt,Le,O,ie,Vt,an));var jr=[],zr={positionedLines:jr,text:Pn.toString(),top:Mt[1],bottom:Mt[1],left:Mt[0],right:Mt[0],writingMode:Bt,iconsInText:!1,verticalizable:!1};return function(Pr,Kr,qr,Ti,Br,xi,Mi,Ei,Oi,ki,aa,zi){for(var ma=0,Pa=-17,Ta=0,Wa=0,ka="right"===Ei?1:"left"===Ei?0:.5,sa=0,Aa=0,ya=Br;Aa<ya.length;Aa+=1){var la=ya[Aa];la.trim();var Gr=la.getMaxScale(),ri=24*(Gr-1),Ui={positionedGlyphs:[],lineOffset:0};Pr.positionedLines[sa]=Ui;var wi=Ui.positionedGlyphs,Di=0;if(la.length()){for(var Ii=0;Ii<la.length();Ii++){var oi=la.getSection(Ii),Vi=la.getSectionIndex(Ii),Xa=la.getCharCode(Ii),mo=0,Va=null,Ts=null,rl=null,xa=24,ks=!(Oi===Co.horizontal||!aa&&!Da(Xa)||aa&&(Du[Xa]||xs(Xa)));if(oi.imageName){var os=Ti[oi.imageName];if(!os)continue;rl=oi.imageName,Pr.iconsInText=Pr.iconsInText||!0,Ts=os.paddedRect;var ss=os.displaySize;oi.scale=24*oi.scale/zi,mo=ri+(24-ss[1]*oi.scale),xa=(Va={width:ss[0],height:ss[1],left:1,top:-3,advance:ks?ss[1]:ss[0]}).advance;var kl=ks?ss[0]*oi.scale-24*Gr:ss[1]*oi.scale-24*Gr;kl>0&&kl>Di&&(Di=kl)}else{var Gu=qr[oi.fontStack],Al=Gu&&Gu[Xa];if(Al&&Al.rect)Ts=Al.rect,Va=Al.metrics;else{var Zu=Kr[oi.fontStack],lu=Zu&&Zu[Xa];if(!lu)continue;Va=lu.metrics}mo=24*(Gr-oi.scale)}ks?(Pr.verticalizable=!0,wi.push({glyph:Xa,imageName:rl,x:ma,y:Pa+mo,vertical:ks,scale:oi.scale,fontStack:oi.fontStack,sectionIndex:Vi,metrics:Va,rect:Ts}),ma+=xa*oi.scale+ki):(wi.push({glyph:Xa,imageName:rl,x:ma,y:Pa+mo,vertical:ks,scale:oi.scale,fontStack:oi.fontStack,sectionIndex:Vi,metrics:Va,rect:Ts}),ma+=Va.advance*oi.scale+ki)}0!==wi.length&&(Ta=Math.max(ma-ki,Ta),Op(wi,0,wi.length-1,ka,Di)),ma=0;var Yu=xi*Gr+Di;Ui.lineOffset=Math.max(Di,ri),Pa+=Yu,Wa=Math.max(Yu,Wa),++sa}else Pa+=xi,++sa}var Hl=Pa- -17,Wu=kc(Mi),Xu=Wu.horizontalAlign,uu=Wu.verticalAlign;(function(zc,cu,Ml,ql,Ju,Ku,Gl,$u,Qu){var hu,fu=(cu-Ml)*Ju;hu=Ku!==Gl?-$u*ql- -17:(-ql*Qu+.5)*Gl;for(var Sl=0,pu=zc;Sl<pu.length;Sl+=1)for(var El=0,du=pu[Sl].positionedGlyphs;El<du.length;El+=1){var gu=du[El];gu.x+=fu,gu.y+=hu}})(Pr.positionedLines,ka,Xu,uu,Ta,Wa,xi,Hl,Br.length),Pr.top+=-uu*Hl,Pr.bottom=Pr.top+Hl,Pr.left+=-Xu*Ta,Pr.right=Pr.left+Ta}(zr,O,Z,ie,On,je,Qe,lt,Bt,Tt,Ht,yn),!function(Pr){for(var Kr=0,qr=Pr;Kr<qr.length;Kr+=1)if(0!==qr[Kr].positionedGlyphs.length)return!1;return!0}(jr)&&zr}Ua.fromFeature=function(A,O){for(var Z=new Ua,ie=0;ie<A.sections.length;ie++){var _e=A.sections[ie];_e.image?Z.addImageSection(_e):Z.addTextSection(_e,O)}return Z},Ua.prototype.length=function(){return this.text.length},Ua.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},Ua.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},Ua.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},Ua.prototype.verticalizePunctuation=function(){this.text=function(A){for(var O="",Z=0;Z<A.length;Z++){var ie=A.charCodeAt(Z+1)||null,_e=A.charCodeAt(Z-1)||null;ie&&Is(ie)&&!ru[A[Z+1]]||_e&&Is(_e)&&!ru[A[Z-1]]||!ru[A[Z]]?O+=A[Z]:O+=ru[A[Z]]}return O}(this.text)},Ua.prototype.trim=function(){for(var A=0,O=0;O<this.text.length&&Du[this.text.charCodeAt(O)];O++)A++;for(var Z=this.text.length,ie=this.text.length-1;ie>=0&&ie>=A&&Du[this.text.charCodeAt(ie)];ie--)Z--;this.text=this.text.substring(A,Z),this.sectionIndex=this.sectionIndex.slice(A,Z)},Ua.prototype.substring=function(A,O){var Z=new Ua;return Z.text=this.text.substring(A,O),Z.sectionIndex=this.sectionIndex.slice(A,O),Z.sections=this.sections,Z},Ua.prototype.toString=function(){return this.text},Ua.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(O,Z){return Math.max(O,A.sections[Z].scale)},0)},Ua.prototype.addTextSection=function(A,O){this.text+=A.text,this.sections.push(Rl.forText(A.scale,A.fontStack||O));for(var Z=this.sections.length-1,ie=0;ie<A.text.length;++ie)this.sectionIndex.push(Z)},Ua.prototype.addImageSection=function(A){var O=A.image?A.image.name:"";if(0!==O.length){var Z=this.getNextImageSectionCharCode();Z?(this.text+=String.fromCharCode(Z),this.sections.push(Rl.forImage(O)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},Ua.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Du={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vo={};function Af(A,O,Z,ie,_e,Le){if(O.imageName){var je=ie[O.imageName];return je?je.displaySize[0]*O.scale*24/Le+_e:0}var Qe=Z[O.fontStack],lt=Qe&&Qe[A];return lt?lt.metrics.advance*O.scale+_e:0}function Mf(A,O,Z,ie){var _e=Math.pow(A-O,2);return ie?A<O?_e/2:2*_e:_e+Math.abs(Z)*Z}function Pp(A,O,Z){var ie=0;return 10===A&&(ie-=1e4),Z&&(ie+=150),40!==A&&65288!==A||(ie+=50),41!==O&&65289!==O||(ie+=50),ie}function Sf(A,O,Z,ie,_e,Le){for(var je=null,Qe=Mf(O,Z,_e,Le),lt=0,Tt=ie;lt<Tt.length;lt+=1){var Mt=Tt[lt],Bt=Mf(O-Mt.x,Z,_e,Le)+Mt.badness;Bt<=Qe&&(je=Mt,Qe=Bt)}return{index:A,x:O,priorBreak:je,badness:Qe}}function Ef(A){return A?Ef(A.priorBreak).concat(A.index):[]}function Tc(A,O,Z,ie,_e,Le,je){if("point"!==Le)return[];if(!A)return[];for(var Qe=[],lt=function(On,Pn,Nn,Vn,Zn,Qn){for(var rr=0,_r=0;_r<On.length();_r++){var dr=On.getSection(_r);rr+=Af(On.getCharCode(_r),dr,Vn,Zn,Pn,Qn)}return rr/Math.max(1,Math.ceil(rr/Nn))}(A,O,Z,ie,_e,je),Tt=A.text.indexOf("\u200b")>=0,Mt=0,Bt=0;Bt<A.length();Bt++){var Ht=A.getSection(Bt),Vt=A.getCharCode(Bt);if(Du[Vt]||(Mt+=Af(Vt,Ht,ie,_e,O,je)),Bt<A.length()-1){var an=!((yn=Vt)<11904||!(Ar["Bopomofo Extended"](yn)||Ar.Bopomofo(yn)||Ar["CJK Compatibility Forms"](yn)||Ar["CJK Compatibility Ideographs"](yn)||Ar["CJK Compatibility"](yn)||Ar["CJK Radicals Supplement"](yn)||Ar["CJK Strokes"](yn)||Ar["CJK Symbols and Punctuation"](yn)||Ar["CJK Unified Ideographs Extension A"](yn)||Ar["CJK Unified Ideographs"](yn)||Ar["Enclosed CJK Letters and Months"](yn)||Ar["Halfwidth and Fullwidth Forms"](yn)||Ar.Hiragana(yn)||Ar["Ideographic Description Characters"](yn)||Ar["Kangxi Radicals"](yn)||Ar["Katakana Phonetic Extensions"](yn)||Ar.Katakana(yn)||Ar["Vertical Forms"](yn)||Ar["Yi Radicals"](yn)||Ar["Yi Syllables"](yn)));(vo[Vt]||an||Ht.imageName)&&Qe.push(Sf(Bt+1,Mt,lt,Qe,Pp(Vt,A.getCharCode(Bt+1),an&&Tt),!1))}}var yn;return Ef(Sf(A.length(),Mt,lt,Qe,0,!0))}function kc(A){var O=.5,Z=.5;switch(A){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":Z=1;break;case"top":case"top-right":case"top-left":Z=0}return{horizontalAlign:O,verticalAlign:Z}}function Op(A,O,Z,ie,_e){if(ie||_e)for(var Le=A[Z],Qe=(A[Z].x+Le.metrics.advance*Le.scale)*ie,lt=O;lt<=Z;lt++)A[lt].x-=Qe,A[lt].y+=_e}function Lf(A,O,Z,ie,_e,Le){var je,Qe=A.image;if(Qe.content){var lt=Qe.content,Tt=Qe.pixelRatio||1;je=[lt[0]/Tt,lt[1]/Tt,Qe.displaySize[0]-lt[2]/Tt,Qe.displaySize[1]-lt[3]/Tt]}var Mt,Bt,Ht,Vt,an=O.left*Le,yn=O.right*Le;"width"===Z||"both"===Z?(Vt=_e[0]+an-ie[3],Bt=_e[0]+yn+ie[1]):Bt=(Vt=_e[0]+(an+yn-Qe.displaySize[0])/2)+Qe.displaySize[0];var On=O.top*Le,Pn=O.bottom*Le;return"height"===Z||"both"===Z?(Mt=_e[1]+On-ie[0],Ht=_e[1]+Pn+ie[2]):Ht=(Mt=_e[1]+(On+Pn-Qe.displaySize[1])/2)+Qe.displaySize[1],{image:Qe,top:Mt,right:Bt,bottom:Ht,left:Vt,collisionPadding:je}}vo[10]=!0,vo[32]=!0,vo[38]=!0,vo[40]=!0,vo[41]=!0,vo[43]=!0,vo[45]=!0,vo[47]=!0,vo[173]=!0,vo[183]=!0,vo[8203]=!0,vo[8208]=!0,vo[8211]=!0,vo[8231]=!0;var Dl=function(A){function O(Z,ie,_e,Le){A.call(this,Z,ie),this.angle=_e,void 0!==Le&&(this.segment=Le)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(e);wr("Anchor",Dl);var Fs=128;function Ac(A,O){var Z=O.expression;if("constant"===Z.kind)return{kind:"constant",layoutSize:Z.evaluate(new ii(A+1))};if("source"===Z.kind)return{kind:"source"};for(var ie=Z.zoomStops,_e=Z.interpolationType,Le=0;Le<ie.length&&ie[Le]<=A;)Le++;for(var je=Le=Math.max(0,Le-1);je<ie.length&&ie[je]<A+1;)je++;je=Math.min(ie.length-1,je);var Qe=ie[Le],lt=ie[je];return"composite"===Z.kind?{kind:"composite",minZoom:Qe,maxZoom:lt,interpolationType:_e}:{kind:"camera",minZoom:Qe,maxZoom:lt,minSize:Z.evaluate(new ii(Qe)),maxSize:Z.evaluate(new ii(lt)),interpolationType:_e}}function Cf(A,O,Z){var ie=O.uSize,Le=Z.lowerSize;return"source"===A.kind?Le/Fs:"composite"===A.kind?Tr(Le/Fs,Z.upperSize/Fs,O.uSizeT):ie}function Pf(A,O){var Z=0,ie=0;if("constant"===A.kind)ie=A.layoutSize;else if("source"!==A.kind){var _e=A.interpolationType,Qe=_e?a(Fi.interpolationFactor(_e,O,A.minZoom,A.maxZoom),0,1):0;"camera"===A.kind?ie=Tr(A.minSize,A.maxSize,Qe):Z=Qe}return{uSizeT:Z,uSize:ie}}var Ip=Object.freeze({__proto__:null,getSizeData:Ac,evaluateSizeForFeature:Cf,evaluateSizeForZoom:Pf,SIZE_PACK_FACTOR:Fs});function Of(A,O,Z,ie,_e){if(void 0===O.segment)return!0;for(var Le=O,je=O.segment+1,Qe=0;Qe>-Z/2;){if(--je<0)return!1;Qe-=A[je].dist(Le),Le=A[je]}Qe+=A[je].dist(A[je+1]),je++;for(var lt=[],Tt=0;Qe<Z/2;){var Bt=A[je],Ht=A[je+1];if(!Ht)return!1;var Vt=A[je-1].angleTo(Bt)-Bt.angleTo(Ht);for(Vt=Math.abs((Vt+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Qe,angleDelta:Vt}),Tt+=Vt;Qe-lt[0].distance>ie;)Tt-=lt.shift().angleDelta;if(Tt>_e)return!1;je++,Qe+=Bt.dist(Ht)}return!0}function If(A){for(var O=0,Z=0;Z<A.length-1;Z++)O+=A[Z].dist(A[Z+1]);return O}function zf(A,O,Z){return A?.6*O*Z:0}function Rf(A,O){return Math.max(A?A.right-A.left:0,O?O.right-O.left:0)}function zp(A,O,Z,ie,_e,Le){for(var je=zf(Z,_e,Le),Qe=Rf(Z,ie)*Le,lt=0,Tt=If(A)/2,Mt=0;Mt<A.length-1;Mt++){var Bt=A[Mt],Ht=A[Mt+1],Vt=Bt.dist(Ht);if(lt+Vt>Tt){var an=(Tt-lt)/Vt,yn=Tr(Bt.x,Ht.x,an),On=Tr(Bt.y,Ht.y,an),Pn=new Dl(yn,On,Ht.angleTo(Bt),Mt);return Pn._round(),!je||Of(A,Pn,Qe,je,O)?Pn:void 0}lt+=Vt}}function Rp(A,O,Z,ie,_e,Le,je,Qe,lt){var Tt=zf(ie,Le,je),Mt=Rf(ie,_e),Bt=Mt*je,Ht=0===A[0].x||A[0].x===lt||0===A[0].y||A[0].y===lt;return O-Bt<O/4&&(O=Bt+O/4),Df(A,Ht?O/2*Qe%O:(Mt/2+2*Le)*je*Qe%O,O,Tt,Z,Bt,Ht,!1,lt)}function Df(A,O,Z,ie,_e,Le,je,Qe,lt){for(var Tt=Le/2,Mt=If(A),Bt=0,Ht=O-Z,Vt=[],an=0;an<A.length-1;an++){for(var yn=A[an],On=A[an+1],Pn=yn.dist(On),Nn=On.angleTo(yn);Ht+Z<Bt+Pn;){var Vn=((Ht+=Z)-Bt)/Pn,Zn=Tr(yn.x,On.x,Vn),Qn=Tr(yn.y,On.y,Vn);if(Zn>=0&&Zn<lt&&Qn>=0&&Qn<lt&&Ht-Tt>=0&&Ht+Tt<=Mt){var rr=new Dl(Zn,Qn,Nn,an);rr._round(),ie&&!Of(A,rr,Le,ie,_e)||Vt.push(rr)}}Bt+=Pn}return Qe||Vt.length||je||(Vt=Df(A,Bt/2,Z,ie,_e,Le,je,!0,lt)),Vt}function Ff(A,O,Z,ie,_e){for(var Le=[],je=0;je<A.length;je++)for(var Qe=A[je],lt=void 0,Tt=0;Tt<Qe.length-1;Tt++){var Mt=Qe[Tt],Bt=Qe[Tt+1];Mt.x<O&&Bt.x<O||(Mt.x<O?Mt=new e(O,Mt.y+(O-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round():Bt.x<O&&(Bt=new e(O,Mt.y+(O-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round()),Mt.y<Z&&Bt.y<Z||(Mt.y<Z?Mt=new e(Mt.x+(Z-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),Z)._round():Bt.y<Z&&(Bt=new e(Mt.x+(Z-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),Z)._round()),Mt.x>=ie&&Bt.x>=ie||(Mt.x>=ie?Mt=new e(ie,Mt.y+(ie-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round():Bt.x>=ie&&(Bt=new e(ie,Mt.y+(ie-Mt.x)/(Bt.x-Mt.x)*(Bt.y-Mt.y))._round()),Mt.y>=_e&&Bt.y>=_e||(Mt.y>=_e?Mt=new e(Mt.x+(_e-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),_e)._round():Bt.y>=_e&&(Bt=new e(Mt.x+(_e-Mt.y)/(Bt.y-Mt.y)*(Bt.x-Mt.x),_e)._round()),lt&&Mt.equals(lt[lt.length-1])||Le.push(lt=[Mt]),lt.push(Bt)))))}return Le}function Bf(A,O,Z,ie){var _e=[],Le=A.image,je=Le.pixelRatio,Qe=Le.paddedRect.w-2,lt=Le.paddedRect.h-2,Tt=A.right-A.left,Mt=A.bottom-A.top,Bt=Le.stretchX||[[0,Qe]],Ht=Le.stretchY||[[0,lt]],Vt=function(xi,Mi){return xi+Mi[1]-Mi[0]},an=Bt.reduce(Vt,0),yn=Ht.reduce(Vt,0),On=Qe-an,Pn=lt-yn,Nn=0,Vn=an,Zn=0,Qn=yn,rr=0,_r=On,dr=0,Mr=Pn;if(Le.content&&ie){var Cr=Le.content;Nn=Fu(Bt,0,Cr[0]),Zn=Fu(Ht,0,Cr[1]),Vn=Fu(Bt,Cr[0],Cr[2]),Qn=Fu(Ht,Cr[1],Cr[3]),rr=Cr[0]-Nn,dr=Cr[1]-Zn,_r=Cr[2]-Cr[0]-Vn,Mr=Cr[3]-Cr[1]-Qn}var Ur=function(xi,Mi,Ei,Oi){var ki=Bu(xi.stretch-Nn,Vn,Tt,A.left),aa=Nu(xi.fixed-rr,_r,xi.stretch,an),zi=Bu(Mi.stretch-Zn,Qn,Mt,A.top),ma=Nu(Mi.fixed-dr,Mr,Mi.stretch,yn),Pa=Bu(Ei.stretch-Nn,Vn,Tt,A.left),Ta=Nu(Ei.fixed-rr,_r,Ei.stretch,an),Wa=Bu(Oi.stretch-Zn,Qn,Mt,A.top),ka=Nu(Oi.fixed-dr,Mr,Oi.stretch,yn),sa=new e(ki,zi),Aa=new e(Pa,zi),ya=new e(Pa,Wa),la=new e(ki,Wa),Gr=new e(aa/je,ma/je),ri=new e(Ta/je,ka/je),Ui=O*Math.PI/180;if(Ui){var wi=Math.sin(Ui),Di=Math.cos(Ui),Ii=[Di,-wi,wi,Di];sa._matMult(Ii),Aa._matMult(Ii),la._matMult(Ii),ya._matMult(Ii)}var oi=xi.stretch+xi.fixed,Xa=Mi.stretch+Mi.fixed;return{tl:sa,tr:Aa,bl:la,br:ya,tex:{x:Le.paddedRect.x+1+oi,y:Le.paddedRect.y+1+Xa,w:Ei.stretch+Ei.fixed-oi,h:Oi.stretch+Oi.fixed-Xa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gr,pixelOffsetBR:ri,minFontScaleX:_r/je/Tt,minFontScaleY:Mr/je/Mt,isSDF:Z}};if(ie&&(Le.stretchX||Le.stretchY))for(var Or=Nf(Bt,On,an),jr=Nf(Ht,Pn,yn),zr=0;zr<Or.length-1;zr++)for(var Pr=Or[zr],Kr=Or[zr+1],qr=0;qr<jr.length-1;qr++)_e.push(Ur(Pr,jr[qr],Kr,jr[qr+1]));else _e.push(Ur({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Qe+1},{fixed:0,stretch:lt+1}));return _e}function Fu(A,O,Z){for(var ie=0,_e=0,Le=A;_e<Le.length;_e+=1){var je=Le[_e];ie+=Math.max(O,Math.min(Z,je[1]))-Math.max(O,Math.min(Z,je[0]))}return ie}function Nf(A,O,Z){for(var ie=[{fixed:-1,stretch:0}],_e=0,Le=A;_e<Le.length;_e+=1){var je=Le[_e],Qe=je[0],lt=je[1],Tt=ie[ie.length-1];ie.push({fixed:Qe-Tt.stretch,stretch:Tt.stretch}),ie.push({fixed:Qe-Tt.stretch,stretch:Tt.stretch+(lt-Qe)})}return ie.push({fixed:O+1,stretch:Z}),ie}function Bu(A,O,Z,ie){return A/O*Z+ie}function Nu(A,O,Z,ie){return A-O*Z/ie}var ju=function(A,O,Z,ie,_e,Le,je,Qe,lt,Tt){if(this.boxStartIndex=A.length,lt){var Mt=Le.top,Bt=Le.bottom,Ht=Le.collisionPadding;Ht&&(Mt-=Ht[1],Bt+=Ht[3]);var Vt=Bt-Mt;Vt>0&&(Vt=Math.max(10,Vt),this.circleDiameter=Vt)}else{var an=Le.top*je-Qe,yn=Le.bottom*je+Qe,On=Le.left*je-Qe,Pn=Le.right*je+Qe,Nn=Le.collisionPadding;if(Nn&&(On-=Nn[0]*je,an-=Nn[1]*je,Pn+=Nn[2]*je,yn+=Nn[3]*je),Tt){var Vn=new e(On,an),Zn=new e(Pn,an),Qn=new e(On,yn),rr=new e(Pn,yn),_r=Tt*Math.PI/180;Vn._rotate(_r),Zn._rotate(_r),Qn._rotate(_r),rr._rotate(_r),On=Math.min(Vn.x,Zn.x,Qn.x,rr.x),Pn=Math.max(Vn.x,Zn.x,Qn.x,rr.x),an=Math.min(Vn.y,Zn.y,Qn.y,rr.y),yn=Math.max(Vn.y,Zn.y,Qn.y,rr.y)}A.emplaceBack(O.x,O.y,On,an,Pn,yn,Z,ie,_e)}this.boxEndIndex=A.length},Fl=function(A,O){if(void 0===A&&(A=[]),void 0===O&&(O=Dp),this.data=A,this.length=this.data.length,this.compare=O,this.length>0)for(var Z=(this.length>>1)-1;Z>=0;Z--)this._down(Z)};function Dp(A,O){return A<O?-1:A>O?1:0}function Fp(A,O,Z){void 0===O&&(O=1),void 0===Z&&(Z=!1);for(var ie=1/0,_e=1/0,Le=-1/0,je=-1/0,Qe=A[0],lt=0;lt<Qe.length;lt++){var Tt=Qe[lt];(!lt||Tt.x<ie)&&(ie=Tt.x),(!lt||Tt.y<_e)&&(_e=Tt.y),(!lt||Tt.x>Le)&&(Le=Tt.x),(!lt||Tt.y>je)&&(je=Tt.y)}var Ht=Math.min(Le-ie,je-_e),Vt=Ht/2,an=new Fl([],Bp);if(0===Ht)return new e(ie,_e);for(var yn=ie;yn<Le;yn+=Ht)for(var On=_e;On<je;On+=Ht)an.push(new Bl(yn+Vt,On+Vt,Vt,A));for(var Pn=function(Zn){for(var Qn=0,rr=0,_r=0,dr=Zn[0],Mr=0,Cr=dr.length,Ur=Cr-1;Mr<Cr;Ur=Mr++){var Or=dr[Mr],jr=dr[Ur],zr=Or.x*jr.y-jr.x*Or.y;rr+=(Or.x+jr.x)*zr,_r+=(Or.y+jr.y)*zr,Qn+=3*zr}return new Bl(rr/Qn,_r/Qn,0,Zn)}(A),Nn=an.length;an.length;){var Vn=an.pop();(Vn.d>Pn.d||!Pn.d)&&(Pn=Vn,Z&&console.log("found best %d after %d probes",Math.round(1e4*Vn.d)/1e4,Nn)),Vn.max-Pn.d<=O||(an.push(new Bl(Vn.p.x-(Vt=Vn.h/2),Vn.p.y-Vt,Vt,A)),an.push(new Bl(Vn.p.x+Vt,Vn.p.y-Vt,Vt,A)),an.push(new Bl(Vn.p.x-Vt,Vn.p.y+Vt,Vt,A)),an.push(new Bl(Vn.p.x+Vt,Vn.p.y+Vt,Vt,A)),Nn+=4)}return Z&&(console.log("num probes: "+Nn),console.log("best distance: "+Pn.d)),Pn.p}function Bp(A,O){return O.max-A.max}function Bl(A,O,Z,ie){this.p=new e(A,O),this.h=Z,this.d=function(_e,Le){for(var je=!1,Qe=1/0,lt=0;lt<Le.length;lt++)for(var Tt=Le[lt],Mt=0,Bt=Tt.length,Ht=Bt-1;Mt<Bt;Ht=Mt++){var Vt=Tt[Mt],an=Tt[Ht];Vt.y>_e.y!=an.y>_e.y&&_e.x<(an.x-Vt.x)*(_e.y-Vt.y)/(an.y-Vt.y)+Vt.x&&(je=!je),Qe=Math.min(Qe,wu(_e,Vt,an))}return(je?1:-1)*Math.sqrt(Qe)}(this.p,ie),this.max=this.d+this.h*Math.SQRT2}Fl.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Fl.prototype.pop=function(){if(0!==this.length){var A=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),A}},Fl.prototype.peek=function(){return this.data[0]},Fl.prototype._up=function(A){for(var O=this.data,Z=this.compare,ie=O[A];A>0;){var _e=A-1>>1,Le=O[_e];if(Z(ie,Le)>=0)break;O[A]=Le,A=_e}O[A]=ie},Fl.prototype._down=function(A){for(var O=this.data,Z=this.compare,ie=this.length>>1,_e=O[A];A<ie;){var Le=1+(A<<1),je=O[Le],Qe=Le+1;if(Qe<this.length&&Z(O[Qe],je)<0&&(Le=Qe,je=O[Qe]),Z(je,_e)>=0)break;O[A]=je,A=Le}O[A]=_e};var Mc=Number.POSITIVE_INFINITY;function jf(A,O){return O[1]!==Mc?function(Z,ie,_e){var Le=0,je=0;switch(ie=Math.abs(ie),_e=Math.abs(_e),Z){case"top-right":case"top-left":case"top":je=_e-7;break;case"bottom-right":case"bottom-left":case"bottom":je=7-_e}switch(Z){case"top-right":case"bottom-right":case"right":Le=-ie;break;case"top-left":case"bottom-left":case"left":Le=ie}return[Le,je]}(A,O[0],O[1]):function(Z,ie){var _e=0,Le=0;ie<0&&(ie=0);var je=ie/Math.sqrt(2);switch(Z){case"top-right":case"top-left":Le=je-7;break;case"bottom-right":case"bottom-left":Le=7-je;break;case"bottom":Le=7-ie;break;case"top":Le=ie-7}switch(Z){case"top-right":case"bottom-right":_e=-je;break;case"top-left":case"bottom-left":_e=je;break;case"left":_e=ie;break;case"right":_e=-ie}return[_e,Le]}(A,O[0])}function Sc(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var pl=32640;function Uf(A,O,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an){var yn=function(Zn,Qn,rr,_r,dr,Mr,Cr,Ur){for(var Or=_r.layout.get("text-rotate").evaluate(Mr,{})*Math.PI/180,jr=[],zr=0,Pr=Qn.positionedLines;zr<Pr.length;zr+=1)for(var Kr=Pr[zr],qr=0,Ti=Kr.positionedGlyphs;qr<Ti.length;qr+=1){var Br=Ti[qr];if(Br.rect){var xi=Br.rect||{},Mi=4,Ei=!0,Oi=1,ki=0,aa=(dr||Ur)&&Br.vertical,zi=Br.metrics.advance*Br.scale/2;if(Ur&&Qn.verticalizable&&(ki=Kr.lineOffset/2-(Br.imageName?-(24-Br.metrics.width*Br.scale)/2:24*(Br.scale-1))),Br.imageName){var Ta=Cr[Br.imageName];Ei=Ta.sdf,Mi=1/(Oi=Ta.pixelRatio)}var Wa=dr?[Br.x+zi,Br.y]:[0,0],ka=dr?[0,0]:[Br.x+zi+rr[0],Br.y+rr[1]-ki],sa=[0,0];aa&&(sa=ka,ka=[0,0]);var Aa=(Br.metrics.left-Mi)*Br.scale-zi+ka[0],ya=(-Br.metrics.top-Mi)*Br.scale+ka[1],la=Aa+xi.w*Br.scale/Oi,Gr=ya+xi.h*Br.scale/Oi,ri=new e(Aa,ya),Ui=new e(la,ya),wi=new e(Aa,Gr),Di=new e(la,Gr);if(aa){var Ii=new e(-zi,zi- -17),oi=-Math.PI/2,Vi=12-zi,mo=new e(22-Vi,-(Br.imageName?Vi:0)),Va=new(Function.prototype.bind.apply(e,[null].concat(sa)));ri._rotateAround(oi,Ii)._add(mo)._add(Va),Ui._rotateAround(oi,Ii)._add(mo)._add(Va),wi._rotateAround(oi,Ii)._add(mo)._add(Va),Di._rotateAround(oi,Ii)._add(mo)._add(Va)}if(Or){var Ts=Math.sin(Or),rl=Math.cos(Or),xa=[rl,-Ts,Ts,rl];ri._matMult(xa),Ui._matMult(xa),wi._matMult(xa),Di._matMult(xa)}var ks=new e(0,0),os=new e(0,0);jr.push({tl:ri,tr:Ui,bl:wi,br:Di,tex:xi,writingMode:Qn.writingMode,glyphOffset:Wa,sectionIndex:Br.sectionIndex,isSDF:Ei,pixelOffsetTL:ks,pixelOffsetBR:os,minFontScaleX:0,minFontScaleY:0})}}return jr}(0,Z,Qe,_e,Le,je,ie,A.allowVerticalPlacement),On=A.textSizeData,Pn=null;"source"===On.kind?(Pn=[Fs*_e.layout.get("text-size").evaluate(je,{})])[0]>pl&&S(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===On.kind&&((Pn=[Fs*Vt.compositeTextSizes[0].evaluate(je,{},an),Fs*Vt.compositeTextSizes[1].evaluate(je,{},an)])[0]>pl||Pn[1]>pl)&&S(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),A.addSymbols(A.text,yn,Pn,Qe,Le,je,Tt,O,lt.lineStartIndex,lt.lineLength,Ht,an);for(var Nn=0,Vn=Mt;Nn<Vn.length;Nn+=1)Bt[Vn[Nn]]=A.text.placedSymbolArray.length-1;return 4*yn.length}function Vf(A){for(var O in A)return A[O];return null}function Np(A,O,Z,ie){var _e=A.compareText;if(O in _e){for(var Le=_e[O],je=Le.length-1;je>=0;je--)if(ie.dist(Le[je])<Z)return!0}else _e[O]=[];return _e[O].push(ie),!1}var jp=Ol.VectorTileFeature.types,Up=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uu(A,O,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht){var Vt=Qe?Math.min(pl,Math.round(Qe[0])):0,an=Qe?Math.min(pl,Math.round(Qe[1])):0;A.emplaceBack(O,Z,Math.round(32*ie),Math.round(32*_e),Le,je,(Vt<<1)+(lt?1:0),an,16*Tt,16*Mt,256*Bt,256*Ht)}function Ec(A,O,Z){A.emplaceBack(O.x,O.y,Z),A.emplaceBack(O.x,O.y,Z),A.emplaceBack(O.x,O.y,Z),A.emplaceBack(O.x,O.y,Z)}function Vp(A){for(var O=0,Z=A.sections;O<Z.length;O+=1)if(fo(Z[O].text))return!0;return!1}var Nl=function(A){this.layoutVertexArray=new yt,this.indexArray=new Be,this.programConfigurations=A,this.segments=new tn,this.dynamicLayoutVertexArray=new F,this.opacityVertexArray=new W,this.placedSymbolArray=new rt};Nl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Nl.prototype.upload=function(A,O,Z,ie){this.isEmpty()||(Z&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,_c.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,gp.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,Up,!0),this.opacityVertexBuffer.itemSize=1),(Z||ie)&&this.programConfigurations.upload(A))},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},wr("SymbolBuffers",Nl);var ou=function(A,O,Z){this.layoutVertexArray=new A,this.layoutAttributes=O,this.indexArray=new Z,this.segments=new tn,this.collisionVertexArray=new Ce};ou.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,vp.members,!0)},ou.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},wr("CollisionBuffers",ou);var yi=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cc([]),this.placementViewportMatrix=cc([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ac(this.zoom,O["text-size"]),this.iconSizeData=Ac(this.zoom,O["icon-size"]);var Z=this.layers[0].layout,ie=Z.get("symbol-sort-key"),_e=Z.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==_e&&void 0!==ie.constantOr(1),this.sortFeaturesByY=("viewport-y"===_e||"auto"===_e&&!this.sortFeaturesByKey)&&(Z.get("text-allow-overlap")||Z.get("icon-allow-overlap")||Z.get("text-ignore-placement")||Z.get("icon-ignore-placement")),"point"===Z.get("symbol-placement")&&(this.writingModes=Z.get("text-writing-mode").map(function(je){return Co[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=A.sourceID};yi.prototype.createArrays=function(){this.text=new Nl(new Ci(_c.members,this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Nl(new Ci(_c.members,this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Rt,this.lineVertexArray=new Ft,this.symbolInstances=new Ct},yi.prototype.calculateGlyphDependencies=function(A,O,Z,ie,_e){for(var Le=0;Le<A.length;Le++)if(O[A.charCodeAt(Le)]=!0,(Z||ie)&&_e){var je=ru[A.charAt(Le)];je&&(O[je.charCodeAt(0)]=!0)}},yi.prototype.populate=function(A,O,Z){var ie=this.layers[0],_e=ie.layout,Le=_e.get("text-font"),je=_e.get("text-field"),Qe=_e.get("icon-image"),lt=("constant"!==je.value.kind||je.value.value instanceof zn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&("constant"!==Le.value.kind||Le.value.value.length>0),Tt="constant"!==Qe.value.kind||!!Qe.value.value||Object.keys(Qe.parameters).length>0,Mt=_e.get("symbol-sort-key");if(this.features=[],lt||Tt){for(var Bt=O.iconDependencies,Ht=O.glyphDependencies,Vt=O.availableImages,an=new ii(this.zoom),yn=0,On=A;yn<On.length;yn+=1){var Pn=On[yn],Nn=Pn.feature,Vn=Pn.id,Zn=Pn.index,Qn=Pn.sourceLayerIndex,rr=ie._featureFilter.needGeometry,_r={type:Nn.type,id:Vn,properties:Nn.properties,geometry:rr?Si(Nn):[]};if(ie._featureFilter.filter(an,_r,Z)){rr||(_r.geometry=Si(Nn));var dr=void 0;if(lt){var Mr=ie.getValueAndResolveTokens("text-field",_r,Z,Vt),Cr=zn.factory(Mr);Vp(Cr)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Na()||this.hasRTLText&&ha.isParsed())&&(dr=yp(Cr,ie,_r))}var Ur=void 0;if(Tt){var Or=ie.getValueAndResolveTokens("icon-image",_r,Z,Vt);Ur=Or instanceof Fn?Or:Fn.fromString(Or)}if(dr||Ur){var jr=this.sortFeaturesByKey?Mt.evaluate(_r,{},Z):void 0,zr={id:Vn,text:dr,icon:Ur,index:Zn,sourceLayerIndex:Qn,geometry:Si(Nn),properties:Nn.properties,type:jp[Nn.type],sortKey:jr};if(this.features.push(zr),Ur&&(Bt[Ur.name]=!0),dr){var Pr=Le.evaluate(_r,{},Z).join(","),Kr="map"===_e.get("text-rotation-alignment")&&"point"!==_e.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Co.vertical)>=0;for(var qr=0,Ti=dr.sections;qr<Ti.length;qr+=1){var Br=Ti[qr];if(Br.image)Bt[Br.image.name]=!0;else{var xi=rs(dr.toString()),Mi=Br.fontStack||Pr,Ei=Ht[Mi]=Ht[Mi]||{};this.calculateGlyphDependencies(Br.text,Ei,Kr,this.allowVerticalPlacement,xi)}}}}}}"line"===_e.get("symbol-placement")&&(this.features=function(Oi){var ki={},aa={},zi=[],ma=0;function Pa(Di){zi.push(Oi[Di]),ma++}function Ta(Di,Ii,oi){var Vi=aa[Di];return delete aa[Di],aa[Ii]=Vi,zi[Vi].geometry[0].pop(),zi[Vi].geometry[0]=zi[Vi].geometry[0].concat(oi[0]),Vi}function Wa(Di,Ii,oi){var Vi=ki[Ii];return delete ki[Ii],ki[Di]=Vi,zi[Vi].geometry[0].shift(),zi[Vi].geometry[0]=oi[0].concat(zi[Vi].geometry[0]),Vi}function ka(Di,Ii,oi){var Vi=oi?Ii[0][Ii[0].length-1]:Ii[0][0];return Di+":"+Vi.x+":"+Vi.y}for(var sa=0;sa<Oi.length;sa++){var Aa=Oi[sa],ya=Aa.geometry,la=Aa.text?Aa.text.toString():null;if(la){var Gr=ka(la,ya),ri=ka(la,ya,!0);if(Gr in aa&&ri in ki&&aa[Gr]!==ki[ri]){var Ui=Wa(Gr,ri,ya),wi=Ta(Gr,ri,zi[Ui].geometry);delete ki[Gr],delete aa[ri],aa[ka(la,zi[wi].geometry,!0)]=wi,zi[Ui].geometry=null}else Gr in aa?Ta(Gr,ri,ya):ri in ki?Wa(Gr,ri,ya):(Pa(sa),ki[Gr]=ma-1,aa[ri]=ma-1)}else Pa(sa)}return zi.filter(function(Di){return Di.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Oi,ki){return Oi.sortKey-ki.sortKey})}},yi.prototype.update=function(A,O,Z){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,O,this.layers,Z),this.icon.programConfigurations.updatePaintArrays(A,O,this.layers,Z))},yi.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yi.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yi.prototype.addToLineVertexArray=function(A,O){var Z=this.lineVertexArray.length;if(void 0!==A.segment){for(var ie=A.dist(O[A.segment+1]),_e=A.dist(O[A.segment]),Le={},je=A.segment+1;je<O.length;je++)Le[je]={x:O[je].x,y:O[je].y,tileUnitDistanceFromAnchor:ie},je<O.length-1&&(ie+=O[je+1].dist(O[je]));for(var Qe=A.segment||0;Qe>=0;Qe--)Le[Qe]={x:O[Qe].x,y:O[Qe].y,tileUnitDistanceFromAnchor:_e},Qe>0&&(_e+=O[Qe-1].dist(O[Qe]));for(var lt=0;lt<O.length;lt++){var Tt=Le[lt];this.lineVertexArray.emplaceBack(Tt.x,Tt.y,Tt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Z,lineLength:this.lineVertexArray.length-Z}},yi.prototype.addSymbols=function(A,O,Z,ie,_e,Le,je,Qe,lt,Tt,Mt,Bt){for(var Ht=A.indexArray,Vt=A.layoutVertexArray,an=A.segments.prepareSegment(4*O.length,Vt,Ht,Le.sortKey),yn=this.glyphOffsetArray.length,On=an.vertexLength,Pn=this.allowVerticalPlacement&&je===Co.vertical?Math.PI/2:0,Nn=Le.text&&Le.text.sections,Vn=0;Vn<O.length;Vn++){var Zn=O[Vn],Qn=Zn.tl,rr=Zn.tr,_r=Zn.bl,dr=Zn.br,Mr=Zn.tex,Cr=Zn.pixelOffsetTL,Ur=Zn.pixelOffsetBR,Or=Zn.minFontScaleX,jr=Zn.minFontScaleY,zr=Zn.glyphOffset,Pr=Zn.isSDF,Kr=Zn.sectionIndex,qr=an.vertexLength,Ti=zr[1];Uu(Vt,Qe.x,Qe.y,Qn.x,Ti+Qn.y,Mr.x,Mr.y,Z,Pr,Cr.x,Cr.y,Or,jr),Uu(Vt,Qe.x,Qe.y,rr.x,Ti+rr.y,Mr.x+Mr.w,Mr.y,Z,Pr,Ur.x,Cr.y,Or,jr),Uu(Vt,Qe.x,Qe.y,_r.x,Ti+_r.y,Mr.x,Mr.y+Mr.h,Z,Pr,Cr.x,Ur.y,Or,jr),Uu(Vt,Qe.x,Qe.y,dr.x,Ti+dr.y,Mr.x+Mr.w,Mr.y+Mr.h,Z,Pr,Ur.x,Ur.y,Or,jr),Ec(A.dynamicLayoutVertexArray,Qe,Pn),Ht.emplaceBack(qr,qr+1,qr+2),Ht.emplaceBack(qr+1,qr+2,qr+3),an.vertexLength+=4,an.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zr[0]),Vn!==O.length-1&&Kr===O[Vn+1].sectionIndex||A.programConfigurations.populatePaintArrays(Vt.length,Le,Le.index,{},Bt,Nn&&Nn[Kr])}A.placedSymbolArray.emplaceBack(Qe.x,Qe.y,yn,this.glyphOffsetArray.length-yn,On,lt,Tt,Qe.segment,Z?Z[0]:0,Z?Z[1]:0,ie[0],ie[1],je,0,!1,0,Mt)},yi.prototype._addCollisionDebugVertex=function(A,O,Z,ie,_e,Le){return O.emplaceBack(0,0),A.emplaceBack(Z.x,Z.y,ie,_e,Math.round(Le.x),Math.round(Le.y))},yi.prototype.addCollisionDebugVertices=function(A,O,Z,ie,_e,Le,je){var Qe=_e.segments.prepareSegment(4,_e.layoutVertexArray,_e.indexArray),lt=Qe.vertexLength,Tt=_e.layoutVertexArray,Mt=_e.collisionVertexArray,Bt=je.anchorX,Ht=je.anchorY;this._addCollisionDebugVertex(Tt,Mt,Le,Bt,Ht,new e(A,O)),this._addCollisionDebugVertex(Tt,Mt,Le,Bt,Ht,new e(Z,O)),this._addCollisionDebugVertex(Tt,Mt,Le,Bt,Ht,new e(Z,ie)),this._addCollisionDebugVertex(Tt,Mt,Le,Bt,Ht,new e(A,ie)),Qe.vertexLength+=4;var Vt=_e.indexArray;Vt.emplaceBack(lt,lt+1),Vt.emplaceBack(lt+1,lt+2),Vt.emplaceBack(lt+2,lt+3),Vt.emplaceBack(lt+3,lt),Qe.primitiveLength+=4},yi.prototype.addDebugCollisionBoxes=function(A,O,Z,ie){for(var _e=A;_e<O;_e++){var Le=this.collisionBoxArray.get(_e);this.addCollisionDebugVertices(Le.x1,Le.y1,Le.x2,Le.y2,ie?this.textCollisionBox:this.iconCollisionBox,Le.anchorPoint,Z)}},yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ou(te,mf.members,ce),this.iconCollisionBox=new ou(te,mf.members,ce);for(var A=0;A<this.symbolInstances.length;A++){var O=this.symbolInstances.get(A);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},yi.prototype._deserializeCollisionBoxesForSymbol=function(A,O,Z,ie,_e,Le,je,Qe,lt){for(var Tt={},Mt=O;Mt<Z;Mt++){var Bt=A.get(Mt);Tt.textBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},Tt.textFeatureIndex=Bt.featureIndex;break}for(var Ht=ie;Ht<_e;Ht++){var Vt=A.get(Ht);Tt.verticalTextBox={x1:Vt.x1,y1:Vt.y1,x2:Vt.x2,y2:Vt.y2,anchorPointX:Vt.anchorPointX,anchorPointY:Vt.anchorPointY},Tt.verticalTextFeatureIndex=Vt.featureIndex;break}for(var an=Le;an<je;an++){var yn=A.get(an);Tt.iconBox={x1:yn.x1,y1:yn.y1,x2:yn.x2,y2:yn.y2,anchorPointX:yn.anchorPointX,anchorPointY:yn.anchorPointY},Tt.iconFeatureIndex=yn.featureIndex;break}for(var On=Qe;On<lt;On++){var Pn=A.get(On);Tt.verticalIconBox={x1:Pn.x1,y1:Pn.y1,x2:Pn.x2,y2:Pn.y2,anchorPointX:Pn.anchorPointX,anchorPointY:Pn.anchorPointY},Tt.verticalIconFeatureIndex=Pn.featureIndex;break}return Tt},yi.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var Z=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,Z.textBoxStartIndex,Z.textBoxEndIndex,Z.verticalTextBoxStartIndex,Z.verticalTextBoxEndIndex,Z.iconBoxStartIndex,Z.iconBoxEndIndex,Z.verticalIconBoxStartIndex,Z.verticalIconBoxEndIndex))}},yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},yi.prototype.addIndicesForPlacedSymbol=function(A,O){for(var Z=A.placedSymbolArray.get(O),ie=Z.vertexStartIndex+4*Z.numGlyphs,_e=Z.vertexStartIndex;_e<ie;_e+=4)A.indexArray.emplaceBack(_e,_e+1,_e+2),A.indexArray.emplaceBack(_e+1,_e+2,_e+3)},yi.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var O=Math.sin(A),Z=Math.cos(A),ie=[],_e=[],Le=[],je=0;je<this.symbolInstances.length;++je){Le.push(je);var Qe=this.symbolInstances.get(je);ie.push(0|Math.round(O*Qe.anchorX+Z*Qe.anchorY)),_e.push(Qe.featureIndex)}return Le.sort(function(lt,Tt){return ie[lt]-ie[Tt]||_e[Tt]-_e[lt]}),Le},yi.prototype.addToSortKeyRanges=function(A,O){var Z=this.sortKeyRanges[this.sortKeyRanges.length-1];Z&&Z.sortKey===O?Z.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:A,symbolInstanceEnd:A+1})},yi.prototype.sortFeatures=function(A){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Z=0,ie=this.symbolInstanceIndexes;Z<ie.length;Z+=1){var Le=this.symbolInstances.get(ie[Z]);this.featureSortOrder.push(Le.featureIndex),[Le.rightJustifiedTextSymbolIndex,Le.centerJustifiedTextSymbolIndex,Le.leftJustifiedTextSymbolIndex].forEach(function(je,Qe,lt){je>=0&&lt.indexOf(je)===Qe&&O.addIndicesForPlacedSymbol(O.text,je)}),Le.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Le.verticalPlacedTextSymbolIndex),Le.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Le.placedIconSymbolIndex),Le.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Le.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},wr("SymbolBucket",yi,{omit:["layers","collisionBoxArray","features","compareText"]}),yi.MAX_GLYPHS=65535,yi.addDynamicAttributes=Ec;var Hp=new ea({"symbol-placement":new Lr(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new Lr(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Lr(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ir(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Lr(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Lr(Se.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Lr(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Lr(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Lr(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ir(Se.layout_symbol["icon-size"]),"icon-text-fit":new Lr(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Lr(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ir(Se.layout_symbol["icon-image"]),"icon-rotate":new Ir(Se.layout_symbol["icon-rotate"]),"icon-padding":new Lr(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new Lr(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new Ir(Se.layout_symbol["icon-offset"]),"icon-anchor":new Ir(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Lr(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Lr(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Lr(Se.layout_symbol["text-rotation-alignment"]),"text-field":new Ir(Se.layout_symbol["text-field"]),"text-font":new Ir(Se.layout_symbol["text-font"]),"text-size":new Ir(Se.layout_symbol["text-size"]),"text-max-width":new Ir(Se.layout_symbol["text-max-width"]),"text-line-height":new Lr(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new Ir(Se.layout_symbol["text-letter-spacing"]),"text-justify":new Ir(Se.layout_symbol["text-justify"]),"text-radial-offset":new Ir(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Lr(Se.layout_symbol["text-variable-anchor"]),"text-anchor":new Ir(Se.layout_symbol["text-anchor"]),"text-max-angle":new Lr(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new Lr(Se.layout_symbol["text-writing-mode"]),"text-rotate":new Ir(Se.layout_symbol["text-rotate"]),"text-padding":new Lr(Se.layout_symbol["text-padding"]),"text-keep-upright":new Lr(Se.layout_symbol["text-keep-upright"]),"text-transform":new Ir(Se.layout_symbol["text-transform"]),"text-offset":new Ir(Se.layout_symbol["text-offset"]),"text-allow-overlap":new Lr(Se.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Lr(Se.layout_symbol["text-ignore-placement"]),"text-optional":new Lr(Se.layout_symbol["text-optional"])}),Lc={paint:new ea({"icon-opacity":new Ir(Se.paint_symbol["icon-opacity"]),"icon-color":new Ir(Se.paint_symbol["icon-color"]),"icon-halo-color":new Ir(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ir(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ir(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new Lr(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Lr(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ir(Se.paint_symbol["text-opacity"]),"text-color":new Ir(Se.paint_symbol["text-color"],{runtimeType:It,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Ir(Se.paint_symbol["text-halo-color"]),"text-halo-width":new Ir(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new Ir(Se.paint_symbol["text-halo-blur"]),"text-translate":new Lr(Se.paint_symbol["text-translate"]),"text-translate-anchor":new Lr(Se.paint_symbol["text-translate-anchor"])}),layout:Hp},jl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:ht,this.defaultValue=A};jl.prototype.evaluate=function(A){if(A.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(A.formattedSection))return O.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},jl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},jl.prototype.outputDefined=function(){return!1},jl.prototype.serialize=function(){return null},wr("FormatSectionOverride",jl,{omit:["defaultValue"]});var qp=function(A){function O(Z){A.call(this,Z,Lc)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.recalculate=function(Z,ie){if(A.prototype.recalculate.call(this,Z,ie),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var _e=this.layout.get("text-writing-mode");if(_e){for(var Le=[],je=0,Qe=_e;je<Qe.length;je+=1){var lt=Qe[je];Le.indexOf(lt)<0&&Le.push(lt)}this.layout._values["text-writing-mode"]=Le}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(Z,ie,_e,Le){var lt,je=this.layout.get(Z).evaluate(ie,{},_e,Le),Qe=this._unevaluatedLayout._values[Z];return Qe.isDataDriven()||Ko(Qe.value)||!je?je:(lt=ie.properties,je.replace(/{([^{}]+)}/g,function(Mt,Bt){return Bt in lt?String(lt[Bt]):""}))},O.prototype.createBucket=function(Z){return new yi(Z)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var Z=0,ie=Lc.paint.overridableProperties;Z<ie.length;Z+=1){var _e=ie[Z];if(O.hasPaintOverride(this.layout,_e)){var Le,je=this.paint.get(_e),Qe=new jl(je),lt=new fs(Qe,je.property.specification);Le="constant"===je.value.kind||"source"===je.value.kind?new Ro("source",lt):new Do("composite",lt,je.value.zoomStops,je.value._interpolationType),this.paint._values[_e]=new Qi(je.property,Le,je.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(Z,ie,_e){return!(!this.layout||ie.isDataDriven()||_e.isDataDriven())&&O.hasPaintOverride(this.layout,Z)},O.hasPaintOverride=function(Z,ie){var _e=Z.get("text-field"),Le=Lc.paint.properties[ie],je=!1,Qe=function(Mt){for(var Bt=0,Ht=Mt;Bt<Ht.length;Bt+=1)if(Le.overrides&&Le.overrides.hasOverride(Ht[Bt]))return void(je=!0)};if("constant"===_e.value.kind&&_e.value.value instanceof zn)Qe(_e.value.value.sections);else if("source"===_e.value.kind){var lt=function(Mt){je||(Mt instanceof ur&&Xn(Mt.value)===Xt?Qe(Mt.value.sections):Mt instanceof Gt?Qe(Mt.sections):Mt.eachChild(lt))},Tt=_e.value;Tt._styleExpression&&lt(Tt._styleExpression.expression)}return je},O}(da),Gp={paint:new ea({"background-color":new Lr(Se.paint_background["background-color"]),"background-pattern":new po(Se.paint_background["background-pattern"]),"background-opacity":new Lr(Se.paint_background["background-opacity"])})},Zp=function(A){function O(Z){A.call(this,Z,Gp)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(da),Yp={paint:new ea({"raster-opacity":new Lr(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Lr(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Lr(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Lr(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new Lr(Se.paint_raster["raster-saturation"]),"raster-contrast":new Lr(Se.paint_raster["raster-contrast"]),"raster-resampling":new Lr(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new Lr(Se.paint_raster["raster-fade-duration"])})},Wp=function(A){function O(Z){A.call(this,Z,Yp)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(da),Xp=function(A){function O(Z){A.call(this,Z,{}),this.implementation=Z}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},O.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(Z){this.implementation.onAdd&&this.implementation.onAdd(Z,Z.painter.context.gl)},O.prototype.onRemove=function(Z){this.implementation.onRemove&&this.implementation.onRemove(Z,Z.painter.context.gl)},O}(da),Jp={circle:Rh,heatmap:Fh,hillshade:Nh,fill:tp,"fill-extrusion":up,line:dp,symbol:qp,background:Zp,raster:Wp},Hf=self.HTMLImageElement,qf=self.HTMLCanvasElement,Gf=self.HTMLVideoElement,Zf=self.ImageData,Vu=self.ImageBitmap,_l=function(A,O,Z,ie){this.context=A,this.format=Z,this.texture=A.gl.createTexture(),this.update(O,ie)};_l.prototype.update=function(A,O,Z){var ie=A.width,_e=A.height,Le=!(this.size&&this.size[0]===ie&&this.size[1]===_e||Z),je=this.context,Qe=je.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Qe.bindTexture(Qe.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===Qe.RGBA&&(!O||!1!==O.premultiply)),Le)this.size=[ie,_e],A instanceof Hf||A instanceof qf||A instanceof Gf||A instanceof Zf||Vu&&A instanceof Vu?Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,this.format,Qe.UNSIGNED_BYTE,A):Qe.texImage2D(Qe.TEXTURE_2D,0,this.format,ie,_e,0,this.format,Qe.UNSIGNED_BYTE,A.data);else{var lt=Z||{x:0,y:0},Tt=lt.x,Mt=lt.y;A instanceof Hf||A instanceof qf||A instanceof Gf||A instanceof Zf||Vu&&A instanceof Vu?Qe.texSubImage2D(Qe.TEXTURE_2D,0,Tt,Mt,Qe.RGBA,Qe.UNSIGNED_BYTE,A):Qe.texSubImage2D(Qe.TEXTURE_2D,0,Tt,Mt,ie,_e,Qe.RGBA,Qe.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Qe.generateMipmap(Qe.TEXTURE_2D)},_l.prototype.bind=function(A,O,Z){var ie=this.context.gl;ie.bindTexture(ie.TEXTURE_2D,this.texture),Z!==ie.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Z=ie.LINEAR),A!==this.filter&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,A),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,Z||A),this.filter=A),O!==this.wrap&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,O),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,O),this.wrap=O)},_l.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},_l.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Cc=function(A){var O=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};Cc.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},Cc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ul=function(A,O,Z){this.target=A,this.parent=O,this.mapId=Z,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Cc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?A:self};function Yf(A,O,Z){var ie=2*Math.PI*6378137/256/Math.pow(2,Z);return[A*ie-2*Math.PI*6378137/2,O*ie-2*Math.PI*6378137/2]}Ul.prototype.send=function(A,O,Z,ie,_e){var Le=this;void 0===_e&&(_e=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Z&&(this.callbacks[je]=Z);var Qe=z(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:A,hasCallback:!!Z,targetMapId:ie,mustQueue:_e,sourceMapId:this.mapId,data:es(O,Qe)},Qe),{cancel:function(){Z&&delete Le.callbacks[je],Le.target.postMessage({id:je,type:"<cancel>",targetMapId:ie,sourceMapId:Le.mapId})}}},Ul.prototype.receive=function(A){var O=A.data,Z=O.id;if(Z&&(!O.targetMapId||this.mapId===O.targetMapId))if("<cancel>"===O.type){delete this.tasks[Z];var ie=this.cancelCallbacks[Z];delete this.cancelCallbacks[Z],ie&&ie()}else L()||O.mustQueue?(this.tasks[Z]=O,this.taskQueue.push(Z),this.invoker.trigger()):this.processTask(Z,O)},Ul.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),O=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(A,O)}},Ul.prototype.processTask=function(A,O){var Z=this;if("<response>"===O.type){var ie=this.callbacks[A];delete this.callbacks[A],ie&&(O.error?ie(ts(O.error)):ie(null,ts(O.data)))}else{var _e=!1,Le=z(this.globalScope)?void 0:[],je=O.hasCallback?function(Mt,Bt){_e=!0,delete Z.cancelCallbacks[A],Z.target.postMessage({id:A,type:"<response>",sourceMapId:Z.mapId,error:Mt?es(Mt):null,data:es(Bt,Le)},Le)}:function(Mt){_e=!0},Qe=null,lt=ts(O.data);if(this.parent[O.type])Qe=this.parent[O.type](O.sourceMapId,lt,je);else if(this.parent.getWorkerSource){var Tt=O.type.split(".");Qe=this.parent.getWorkerSource(O.sourceMapId,Tt[0],lt.source)[Tt[1]](lt,je)}else je(new Error("Could not find function "+O.type));!_e&&Qe&&Qe.cancel&&(this.cancelCallbacks[A]=Qe.cancel)}},Ul.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ra=function(A,O){A&&(O?this.setSouthWest(A).setNorthEast(O):4===A.length?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};ra.prototype.setNorthEast=function(A){return this._ne=A instanceof Pi?new Pi(A.lng,A.lat):Pi.convert(A),this},ra.prototype.setSouthWest=function(A){return this._sw=A instanceof Pi?new Pi(A.lng,A.lat):Pi.convert(A),this},ra.prototype.extend=function(A){var O,Z,ie=this._sw,_e=this._ne;if(A instanceof Pi)O=A,Z=A;else{if(!(A instanceof ra))return Array.isArray(A)?4===A.length||A.every(Array.isArray)?this.extend(ra.convert(A)):this.extend(Pi.convert(A)):this;if(Z=A._ne,!(O=A._sw)||!Z)return this}return ie||_e?(ie.lng=Math.min(O.lng,ie.lng),ie.lat=Math.min(O.lat,ie.lat),_e.lng=Math.max(Z.lng,_e.lng),_e.lat=Math.max(Z.lat,_e.lat)):(this._sw=new Pi(O.lng,O.lat),this._ne=new Pi(Z.lng,Z.lat)),this},ra.prototype.getCenter=function(){return new Pi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ra.prototype.getSouthWest=function(){return this._sw},ra.prototype.getNorthEast=function(){return this._ne},ra.prototype.getNorthWest=function(){return new Pi(this.getWest(),this.getNorth())},ra.prototype.getSouthEast=function(){return new Pi(this.getEast(),this.getSouth())},ra.prototype.getWest=function(){return this._sw.lng},ra.prototype.getSouth=function(){return this._sw.lat},ra.prototype.getEast=function(){return this._ne.lng},ra.prototype.getNorth=function(){return this._ne.lat},ra.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ra.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ra.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ra.prototype.contains=function(A){var O=Pi.convert(A),Z=O.lng,ie=O.lat,Le=this._sw.lng<=Z&&Z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Le=this._sw.lng>=Z&&Z>=this._ne.lng),this._sw.lat<=ie&&ie<=this._ne.lat&&Le},ra.convert=function(A){return!A||A instanceof ra?A:new ra(A)};var Wf=6371008.8,Pi=function(A,O){if(isNaN(A)||isNaN(O))throw new Error("Invalid LngLat object: ("+A+", "+O+")");if(this.lng=+A,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Pi.prototype.wrap=function(){return new Pi(i(this.lng,-180,180),this.lat)},Pi.prototype.toArray=function(){return[this.lng,this.lat]},Pi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Pi.prototype.distanceTo=function(A){var O=Math.PI/180,Z=this.lat*O,ie=A.lat*O,_e=Math.sin(Z)*Math.sin(ie)+Math.cos(Z)*Math.cos(ie)*Math.cos((A.lng-this.lng)*O);return Wf*Math.acos(Math.min(_e,1))},Pi.prototype.toBounds=function(A){void 0===A&&(A=0);var O=360*A/40075017,Z=O/Math.cos(Math.PI/180*this.lat);return new ra(new Pi(this.lng-Z,this.lat-O),new Pi(this.lng+Z,this.lat+O))},Pi.convert=function(A){if(A instanceof Pi)return A;if(Array.isArray(A)&&(2===A.length||3===A.length))return new Pi(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&"object"==typeof A&&null!==A)return new Pi(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Xf=2*Math.PI*Wf;function Jf(A){return Xf*Math.cos(A*Math.PI/180)}function Kf(A){return(180+A)/360}function $f(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function Qf(A,O){return A/Jf(O)}function Pc(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}var wl=function(A,O,Z){void 0===Z&&(Z=0),this.x=+A,this.y=+O,this.z=+Z};wl.fromLngLat=function(A,O){void 0===O&&(O=0);var Z=Pi.convert(A);return new wl(Kf(Z.lng),$f(Z.lat),Qf(O,Z.lat))},wl.prototype.toLngLat=function(){return new Pi(360*this.x-180,Pc(this.y))},wl.prototype.toAltitude=function(){return this.z*Jf(Pc(this.y))},wl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Xf*(A=Pc(this.y),1/Math.cos(A*Math.PI/180));var A};var Tl=function(A,O,Z){this.z=A,this.x=O,this.y=Z,this.key=su(0,A,A,O,Z)};Tl.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},Tl.prototype.url=function(A,O){var Z,ie,_e,Le,je,Qe=(ie=this.y,_e=this.z,Le=Yf(256*(Z=this.x),256*(ie=Math.pow(2,_e)-ie-1),_e),je=Yf(256*(Z+1),256*(ie+1),_e),Le[0]+","+Le[1]+","+je[0]+","+je[1]),lt=function(Tt,Mt,Bt){for(var Ht,Vt="",an=Tt;an>0;an--)Vt+=(Mt&(Ht=1<<an-1)?1:0)+(Bt&Ht?2:0);return Vt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===O?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",Qe)},Tl.prototype.getTilePoint=function(A){var O=Math.pow(2,this.z);return new e((A.x*O-this.x)*Nr,(A.y*O-this.y)*Nr)},Tl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var eh=function(A,O){this.wrap=A,this.canonical=O,this.key=su(A,O.z,O.z,O.x,O.y)},ia=function(A,O,Z,ie,_e){this.overscaledZ=A,this.wrap=O,this.canonical=new Tl(Z,+ie,+_e),this.key=su(O,A,Z,ie,_e)};function su(A,O,Z,ie,_e){(A*=2)<0&&(A=-1*A-1);var Le=1<<Z;return(Le*Le*A+Le*_e+ie).toString(36)+Z.toString(36)+O.toString(36)}ia.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},ia.prototype.scaledTo=function(A){var O=this.canonical.z-A;return A>this.canonical.z?new ia(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ia(A,this.wrap,A,this.canonical.x>>O,this.canonical.y>>O)},ia.prototype.calculateScaledKey=function(A,O){var Z=this.canonical.z-A;return A>this.canonical.z?su(this.wrap*+O,A,this.canonical.z,this.canonical.x,this.canonical.y):su(this.wrap*+O,A,A,this.canonical.x>>Z,this.canonical.y>>Z)},ia.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var O=this.canonical.z-A.canonical.z;return 0===A.overscaledZ||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>O&&A.canonical.y===this.canonical.y>>O},ia.prototype.children=function(A){if(this.overscaledZ>=A)return[new ia(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,Z=2*this.canonical.x,ie=2*this.canonical.y;return[new ia(O,this.wrap,O,Z,ie),new ia(O,this.wrap,O,Z+1,ie),new ia(O,this.wrap,O,Z,ie+1),new ia(O,this.wrap,O,Z+1,ie+1)]},ia.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},ia.prototype.wrapped=function(){return new ia(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ia.prototype.unwrapTo=function(A){return new ia(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},ia.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ia.prototype.toUnwrapped=function(){return new eh(this.wrap,this.canonical)},ia.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ia.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new wl(A.x-this.wrap,A.y))},wr("CanonicalTileID",Tl),wr("OverscaledTileID",ia,{omit:["posMatrix"]});var tl=function(A,O,Z){if(this.uid=A,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(Z&&"mapbox"!==Z&&"terrarium"!==Z)return S('"'+Z+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ie=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=Z||"mapbox";for(var _e=0;_e<ie;_e++)this.data[this._idx(-1,_e)]=this.data[this._idx(0,_e)],this.data[this._idx(ie,_e)]=this.data[this._idx(ie-1,_e)],this.data[this._idx(_e,-1)]=this.data[this._idx(_e,0)],this.data[this._idx(_e,ie)]=this.data[this._idx(_e,ie-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie-1,0)],this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie-1)],this.data[this._idx(ie,ie)]=this.data[this._idx(ie-1,ie-1)]};tl.prototype.get=function(A,O){var Z=new Uint8Array(this.data.buffer),ie=4*this._idx(A,O);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(Z[ie],Z[ie+1],Z[ie+2])},tl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},tl.prototype._idx=function(A,O){if(A<-1||A>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(A+1)},tl.prototype._unpackMapbox=function(A,O,Z){return(256*A*256+256*O+Z)/10-1e4},tl.prototype._unpackTerrarium=function(A,O,Z){return 256*A+O+Z/256-32768},tl.prototype.getPixels=function(){return new to({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},tl.prototype.backfillBorder=function(A,O,Z){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var ie=O*this.dim,_e=O*this.dim+this.dim,Le=Z*this.dim,je=Z*this.dim+this.dim;switch(O){case-1:ie=_e-1;break;case 1:_e=ie+1}switch(Z){case-1:Le=je-1;break;case 1:je=Le+1}for(var Qe=-O*this.dim,lt=-Z*this.dim,Tt=Le;Tt<je;Tt++)for(var Mt=ie;Mt<_e;Mt++)this.data[this._idx(Mt,Tt)]=A.data[this._idx(Mt+Qe,Tt+lt)]},wr("DEMData",tl);var Hu=function(A){this._stringToNumber={},this._numberToString=[];for(var O=0;O<A.length;O++){var Z=A[O];this._stringToNumber[Z]=O,this._numberToString[O]=Z}};Hu.prototype.encode=function(A){return this._stringToNumber[A]},Hu.prototype.decode=function(A){return this._numberToString[A]};var qu=function(A,O,Z,ie,_e){this.type="Feature",this._vectorTileFeature=A,A._z=O,A._x=Z,A._y=ie,this.properties=A.properties,this.id=_e},Oc={geometry:{configurable:!0}};Oc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Oc.geometry.set=function(A){this._geometry=A},qu.prototype.toJSON=function(){var A={geometry:this.geometry};for(var O in this)"_geometry"!==O&&"_vectorTileFeature"!==O&&(A[O]=this[O]);return A},Object.defineProperties(qu.prototype,Oc);var Vl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Vl.prototype.updateState=function(A,O,Z){var ie=String(O);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][ie]=this.stateChanges[A][ie]||{},c(this.stateChanges[A][ie],Z),null===this.deletedStates[A])for(var _e in this.deletedStates[A]={},this.state[A])_e!==ie&&(this.deletedStates[A][_e]=null);else if(this.deletedStates[A]&&null===this.deletedStates[A][ie])for(var Le in this.deletedStates[A][ie]={},this.state[A][ie])Z[Le]||(this.deletedStates[A][ie][Le]=null);else for(var je in Z)this.deletedStates[A]&&this.deletedStates[A][ie]&&null===this.deletedStates[A][ie][je]&&delete this.deletedStates[A][ie][je]},Vl.prototype.removeFeatureState=function(A,O,Z){if(null!==this.deletedStates[A]){var ie=String(O);if(this.deletedStates[A]=this.deletedStates[A]||{},Z&&void 0!==O)null!==this.deletedStates[A][ie]&&(this.deletedStates[A][ie]=this.deletedStates[A][ie]||{},this.deletedStates[A][ie][Z]=null);else if(void 0!==O)if(this.stateChanges[A]&&this.stateChanges[A][ie])for(Z in this.deletedStates[A][ie]={},this.stateChanges[A][ie])this.deletedStates[A][ie][Z]=null;else this.deletedStates[A][ie]=null;else this.deletedStates[A]=null}},Vl.prototype.getState=function(A,O){var Z=String(O),Le=c({},(this.state[A]||{})[Z],(this.stateChanges[A]||{})[Z]);if(null===this.deletedStates[A])return{};if(this.deletedStates[A]){var je=this.deletedStates[A][O];if(null===je)return{};for(var Qe in je)delete Le[Qe]}return Le},Vl.prototype.initializeTileState=function(A,O){A.setFeatureState(this.state,O)},Vl.prototype.coalesceChanges=function(A,O){var Z={};for(var ie in this.stateChanges){this.state[ie]=this.state[ie]||{};var _e={};for(var Le in this.stateChanges[ie])this.state[ie][Le]||(this.state[ie][Le]={}),c(this.state[ie][Le],this.stateChanges[ie][Le]),_e[Le]=this.state[ie][Le];Z[ie]=_e}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var Qe={};if(null===this.deletedStates[je])for(var lt in this.state[je])Qe[lt]={},this.state[je][lt]={};else for(var Tt in this.deletedStates[je]){if(null===this.deletedStates[je][Tt])this.state[je][Tt]={};else for(var Mt=0,Bt=Object.keys(this.deletedStates[je][Tt]);Mt<Bt.length;Mt+=1)delete this.state[je][Tt][Bt[Mt]];Qe[Tt]=this.state[je][Tt]}Z[je]=Z[je]||{},c(Z[je],Qe)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(Z).length)for(var Vt in A)A[Vt].setFeatureState(Z,O)};var nl=function(A,O){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new Bi(Nr,16,0),this.grid3D=new Bi(Nr,16,0),this.featureIndexArray=new cn,this.promoteId=O};function th(A,O,Z,ie,_e){return d(A,function(Le,je){var Qe=O instanceof ja?O.get(je):null;return Qe&&Qe.evaluate?Qe.evaluate(Z,ie,_e):Qe})}function nh(A){for(var O=1/0,Z=1/0,ie=-1/0,_e=-1/0,Le=0,je=A;Le<je.length;Le+=1){var Qe=je[Le];O=Math.min(O,Qe.x),Z=Math.min(Z,Qe.y),ie=Math.max(ie,Qe.x),_e=Math.max(_e,Qe.y)}return{minX:O,minY:Z,maxX:ie,maxY:_e}}function Kp(A,O){return O-A}nl.prototype.insert=function(A,O,Z,ie,_e,Le){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Z,ie,_e);for(var Qe=Le?this.grid3D:this.grid,lt=0;lt<O.length;lt++){for(var Tt=O[lt],Mt=[1/0,1/0,-1/0,-1/0],Bt=0;Bt<Tt.length;Bt++){var Ht=Tt[Bt];Mt[0]=Math.min(Mt[0],Ht.x),Mt[1]=Math.min(Mt[1],Ht.y),Mt[2]=Math.max(Mt[2],Ht.x),Mt[3]=Math.max(Mt[3],Ht.y)}Mt[0]<Nr&&Mt[1]<Nr&&Mt[2]>=0&&Mt[3]>=0&&Qe.insert(je,Mt[0],Mt[1],Mt[2],Mt[3])}},nl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ol.VectorTile(new Pu(this.rawTileData)).layers,this.sourceLayerCoder=new Hu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},nl.prototype.query=function(A,O,Z,ie){var _e=this;this.loadVTLayers();for(var Le=A.params||{},je=Nr/A.tileSize/A.scale,Qe=ys(Le.filter),lt=A.queryGeometry,Tt=A.queryPadding*je,Mt=nh(lt),Bt=this.grid.query(Mt.minX-Tt,Mt.minY-Tt,Mt.maxX+Tt,Mt.maxY+Tt),Ht=nh(A.cameraQueryGeometry),Vt=0,an=this.grid3D.query(Ht.minX-Tt,Ht.minY-Tt,Ht.maxX+Tt,Ht.maxY+Tt,function(Zn,Qn,rr,_r){return function(dr,Mr,Cr,Ur,Or){for(var jr=0,zr=dr;jr<zr.length;jr+=1){var Pr=zr[jr];if(Mr<=Pr.x&&Cr<=Pr.y&&Ur>=Pr.x&&Or>=Pr.y)return!0}var Kr=[new e(Mr,Cr),new e(Mr,Or),new e(Ur,Or),new e(Ur,Cr)];if(dr.length>2)for(var qr=0,Ti=Kr;qr<Ti.length;qr+=1)if(fl(dr,Ti[qr]))return!0;for(var Br=0;Br<dr.length-1;Br++)if(uc(dr[Br],dr[Br+1],Kr))return!0;return!1}(A.cameraQueryGeometry,Zn-Tt,Qn-Tt,rr+Tt,_r+Tt)});Vt<an.length;Vt+=1)Bt.push(an[Vt]);Bt.sort(Kp);for(var On,Pn={},Nn=function(Zn){var Qn=Bt[Zn];if(Qn!==On){On=Qn;var rr=_e.featureIndexArray.get(Qn),_r=null;_e.loadMatchingFeature(Pn,rr.bucketIndex,rr.sourceLayerIndex,rr.featureIndex,Qe,Le.layers,Le.availableImages,O,Z,ie,function(dr,Mr,Cr){return _r||(_r=Si(dr)),Mr.queryIntersectsFeature(lt,dr,Cr,_r,_e.z,A.transform,je,A.pixelPosMatrix)})}},Vn=0;Vn<Bt.length;Vn++)Nn(Vn);return Pn},nl.prototype.loadMatchingFeature=function(A,O,Z,ie,_e,Le,je,Qe,lt,Tt,Mt){var Bt=this.bucketLayerIDs[O];if(!Le||function(_r,dr){for(var Mr=0;Mr<_r.length;Mr++)if(dr.indexOf(_r[Mr])>=0)return!0;return!1}(Le,Bt)){var Ht=this.sourceLayerCoder.decode(Z),Vt=this.vtLayers[Ht].feature(ie);if(_e.filter(new ii(this.tileID.overscaledZ),Vt))for(var an=this.getId(Vt,Ht),yn=0;yn<Bt.length;yn++){var On=Bt[yn];if(!(Le&&Le.indexOf(On)<0)){var Pn=Qe[On];if(Pn){var Nn={};void 0!==an&&Tt&&(Nn=Tt.getState(Pn.sourceLayer||"_geojsonTileLayer",an));var Vn=lt[On];Vn.paint=th(Vn.paint,Pn.paint,Vt,Nn,je),Vn.layout=th(Vn.layout,Pn.layout,Vt,Nn,je);var Zn=!Mt||Mt(Vt,Pn,Nn);if(Zn){var Qn=new qu(Vt,this.z,this.x,this.y,an);Qn.layer=Vn;var rr=A[On];void 0===rr&&(rr=A[On]=[]),rr.push({featureIndex:ie,feature:Qn,intersectionZ:Zn})}}}}}},nl.prototype.lookupSymbolFeatures=function(A,O,Z,ie,_e,Le,je,Qe){var lt={};this.loadVTLayers();for(var Tt=ys(_e),Mt=0,Bt=A;Mt<Bt.length;Mt+=1)this.loadMatchingFeature(lt,Z,ie,Bt[Mt],Tt,Le,je,Qe,O);return lt},nl.prototype.hasLayer=function(A){for(var O=0,Z=this.bucketLayerIDs;O<Z.length;O+=1)for(var ie=0,_e=Z[O];ie<_e.length;ie+=1)if(A===_e[ie])return!0;return!1},nl.prototype.getId=function(A,O){var Z=A.id;return this.promoteId&&"boolean"==typeof(Z=A.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[O]])&&(Z=Number(Z)),Z},wr("FeatureIndex",nl,{omit:["rawTileData","sourceLayerCoder"]});var va=function(A,O){this.tileID=A,this.uid=f(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};va.prototype.registerFadeDuration=function(A){var O=A+this.timeAdded;O<Y.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},va.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},va.prototype.loadVectorData=function(A,O,Z){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ie in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(Tt,Mt){var Bt={};if(!Mt)return Bt;for(var Ht=function(){var yn=an[Vt],On=yn.layerIds.map(function(Zn){return Mt.getLayer(Zn)}).filter(Boolean);if(0!==On.length){yn.layers=On,yn.stateDependentLayerIds&&(yn.stateDependentLayers=yn.stateDependentLayerIds.map(function(Zn){return On.filter(function(Qn){return Qn.id===Zn})[0]}));for(var Pn=0,Nn=On;Pn<Nn.length;Pn+=1)Bt[Nn[Pn].id]=yn}},Vt=0,an=Tt;Vt<an.length;Vt+=1)Ht();return Bt}(A.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var _e=this.buckets[ie];if(_e instanceof yi){if(this.hasSymbolBuckets=!0,!Z)break;_e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Le in this.buckets){var je=this.buckets[Le];if(je instanceof yi&&je.hasRTLText){this.hasRTLText=!0,ha.isLoading()||ha.isLoaded()||"deferred"!==Na()||Qa();break}}for(var Qe in this.queryPadding=0,this.buckets){var lt=this.buckets[Qe];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Qe).queryRadius(lt))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new Ge},va.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},va.prototype.getBucket=function(A){return this.buckets[A.id]},va.prototype.upload=function(A){for(var O in this.buckets){var Z=this.buckets[O];Z.uploadPending()&&Z.upload(A)}var ie=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _l(A,this.imageAtlas.image,ie.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _l(A,this.glyphAtlasImage,ie.ALPHA),this.glyphAtlasImage=null)},va.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},va.prototype.queryRenderedFeatures=function(A,O,Z,ie,_e,Le,je,Qe,lt,Tt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ie,cameraQueryGeometry:_e,scale:Le,tileSize:this.tileSize,pixelPosMatrix:Tt,transform:Qe,params:je,queryPadding:this.queryPadding*lt},A,O,Z):{}},va.prototype.querySourceFeatures=function(A,O){var Z=this.latestFeatureIndex;if(Z&&Z.rawTileData){var ie=Z.loadVTLayers(),_e=O?O.sourceLayer:"",Le=ie._geojsonTileLayer||ie[_e];if(Le)for(var je=ys(O&&O.filter),Qe=this.tileID.canonical,lt=Qe.z,Tt=Qe.x,Mt=Qe.y,Bt={z:lt,x:Tt,y:Mt},Ht=0;Ht<Le.length;Ht++){var Vt=Le.feature(Ht);if(je.filter(new ii(this.tileID.overscaledZ),Vt)){var an=Z.getId(Vt,_e),yn=new qu(Vt,lt,Tt,Mt,an);yn.tile=Bt,A.push(yn)}}}},va.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},va.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},va.prototype.setExpiryData=function(A){var O=this.expirationTime;if(A.cacheControl){var Z=C(A.cacheControl);Z["max-age"]&&(this.expirationTime=Date.now()+1e3*Z["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var ie=Date.now(),_e=!1;if(this.expirationTime>ie)_e=!1;else if(O)if(this.expirationTime<O)_e=!0;else{var Le=this.expirationTime-O;Le?this.expirationTime=ie+Math.max(Le,3e4):_e=!0}else _e=!0;_e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},va.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},va.prototype.setFeatureState=function(A,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(A).length){var Z=this.latestFeatureIndex.loadVTLayers();for(var ie in this.buckets)if(O.style.hasLayer(ie)){var _e=this.buckets[ie],Le=_e.layers[0].sourceLayer||"_geojsonTileLayer",je=Z[Le],Qe=A[Le];if(je&&Qe&&0!==Object.keys(Qe).length){_e.update(Qe,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var lt=O&&O.style&&O.style.getLayer(ie);lt&&(this.queryPadding=Math.max(this.queryPadding,lt.queryRadius(_e)))}}}},va.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},va.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Y.now()},va.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},va.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=Y.now()+A},va.prototype.setDependencies=function(A,O){for(var Z={},ie=0,_e=O;ie<_e.length;ie+=1)Z[_e[ie]]=!0;this.dependencies[A]=Z},va.prototype.hasDependency=function(A,O){for(var Z=0,ie=A;Z<ie.length;Z+=1){var Le=this.dependencies[ie[Z]];if(Le)for(var je=0,Qe=O;je<Qe.length;je+=1)if(Le[Qe[je]])return!0}return!1};var dl=self.performance,rh=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},dl.mark(this._marks.start)};rh.prototype.finish=function(){dl.mark(this._marks.end);var A=dl.getEntriesByName(this._marks.measure);return 0===A.length&&(dl.measure(this._marks.measure,this._marks.start,this._marks.end),A=dl.getEntriesByName(this._marks.measure),dl.clearMarks(this._marks.start),dl.clearMarks(this._marks.end),dl.clearMeasures(this._marks.measure)),A},l.Actor=Ul,l.AlphaImage=bl,l.CanonicalTileID=Tl,l.CollisionBoxArray=Ge,l.Color=sn,l.DEMData=tl,l.DataConstantProperty=Lr,l.DictionaryCoder=Hu,l.EXTENT=Nr,l.ErrorEvent=Je,l.EvaluationParameters=ii,l.Event=Ne,l.Evented=at,l.FeatureIndex=nl,l.FillBucket=_s,l.FillExtrusionBucket=ws,l.ImageAtlas=au,l.ImagePosition=Iu,l.LineBucket=no,l.LngLat=Pi,l.LngLatBounds=ra,l.MercatorCoordinate=wl,l.ONE_EM=24,l.OverscaledTileID=ia,l.Point=e,l.Point$1=e,l.Properties=ea,l.Protobuf=Pu,l.RGBAImage=to,l.RequestManager=ae,l.RequestPerformance=rh,l.ResourceType=st,l.SegmentVector=tn,l.SourceFeatureState=Vl,l.StructArrayLayout1ui2=Ae,l.StructArrayLayout2f1f2i16=ve,l.StructArrayLayout2i4=We,l.StructArrayLayout3ui6=Be,l.StructArrayLayout4i8=$e,l.SymbolBucket=yi,l.Texture=_l,l.Tile=va,l.Transitionable=pa,l.Uniform1f=Hr,l.Uniform1i=Vr,l.Uniform2f=pr,l.Uniform3f=Er,l.Uniform4f=Fr,l.UniformColor=Dr,l.UniformMatrix4f=Zr,l.UnwrappedTileID=eh,l.ValidationError=ze,l.WritingMode=Co,l.ZoomHistory=ns,l.add=function(A,O,Z){return A[0]=O[0]+Z[0],A[1]=O[1]+Z[1],A[2]=O[2]+Z[2],A},l.addDynamicAttributes=Ec,l.asyncAll=function(A,O,Z){if(!A.length)return Z(null,[]);var ie=A.length,_e=new Array(A.length),Le=null;A.forEach(function(je,Qe){O(je,function(lt,Tt){lt&&(Le=lt),_e[Qe]=Tt,0==--ie&&Z(Le,_e)})})},l.bezier=r,l.bindAll=g,l.browser=Y,l.cacheEntryPossiblyAdded=function(A){++tt>fe&&(A.getActor().send("enforceCacheSizeLimit",De),tt=0)},l.clamp=a,l.clearTileCache=function(A){var O=self.caches.delete(Pe);A&&O.catch(A).then(function(){return A()})},l.clipLine=Ff,l.clone=function(A){var O=new Lo(16);return O[0]=A[0],O[1]=A[1],O[2]=A[2],O[3]=A[3],O[4]=A[4],O[5]=A[5],O[6]=A[6],O[7]=A[7],O[8]=A[8],O[9]=A[9],O[10]=A[10],O[11]=A[11],O[12]=A[12],O[13]=A[13],O[14]=A[14],O[15]=A[15],O},l.clone$1=w,l.clone$2=function(A){var O=new Lo(3);return O[0]=A[0],O[1]=A[1],O[2]=A[2],O},l.collisionCircleLayout=mp,l.config=q,l.create=function(){var A=new Lo(16);return Lo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},l.create$1=function(){var A=new Lo(9);return Lo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},l.create$2=function(){var A=new Lo(4);return Lo!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},l.createCommonjsModule=T,l.createExpression=hs,l.createLayout=gi,l.createStyleLayer=function(A){return"custom"===A.type?new Xp(A):new Jp[A.type](A)},l.cross=function(A,O,Z){var ie=O[0],_e=O[1],Le=O[2],je=Z[0],Qe=Z[1],lt=Z[2];return A[0]=_e*lt-Le*Qe,A[1]=Le*je-ie*lt,A[2]=ie*Qe-_e*je,A},l.deepEqual=function A(O,Z){if(Array.isArray(O)){if(!Array.isArray(Z)||O.length!==Z.length)return!1;for(var ie=0;ie<O.length;ie++)if(!A(O[ie],Z[ie]))return!1;return!0}if("object"==typeof O&&null!==O&&null!==Z){if("object"!=typeof Z||Object.keys(O).length!==Object.keys(Z).length)return!1;for(var _e in O)if(!A(O[_e],Z[_e]))return!1;return!0}return O===Z},l.dot=function(A,O){return A[0]*O[0]+A[1]*O[1]+A[2]*O[2]},l.dot$1=function(A,O){return A[0]*O[0]+A[1]*O[1]+A[2]*O[2]+A[3]*O[3]},l.ease=n,l.emitValidationErrors=Ra,l.endsWith=y,l.enforceCacheSizeLimit=function(A){ge(),Te&&Te.then(function(O){O.keys().then(function(Z){for(var ie=0;ie<Z.length-A;ie++)O.delete(Z[ie])})})},l.evaluateSizeForFeature=Cf,l.evaluateSizeForZoom=Pf,l.evaluateVariableOffset=jf,l.evented=La,l.extend=c,l.featureFilter=ys,l.filterObject=m,l.fromRotation=function(A,O){var Z=Math.sin(O),ie=Math.cos(O);return A[0]=ie,A[1]=Z,A[2]=0,A[3]=-Z,A[4]=ie,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},l.getAnchorAlignment=kc,l.getAnchorJustification=Sc,l.getArrayBuffer=Pt,l.getImage=Dt,l.getJSON=function(A,O){return pt(c(A,{type:"json"}),O)},l.getRTLTextPluginStatus=Na,l.getReferrer=wt,l.getVideo=function(A,O){var Z,ie,_e=self.document.createElement("video");_e.muted=!0,_e.onloadstart=function(){O(null,_e)};for(var Le=0;Le<A.length;Le++){var je=self.document.createElement("source");Z=A[Le],ie=void 0,(ie=self.document.createElement("a")).href=Z,ie.protocol===self.document.location.protocol&&ie.host===self.document.location.host||(_e.crossOrigin="Anonymous"),je.src=A[Le],_e.appendChild(je)}return{cancel:function(){}}},l.identity=cc,l.invert=function(A,O){var Z=O[0],ie=O[1],_e=O[2],Le=O[3],je=O[4],Qe=O[5],lt=O[6],Tt=O[7],Mt=O[8],Bt=O[9],Ht=O[10],Vt=O[11],an=O[12],yn=O[13],On=O[14],Pn=O[15],Nn=Z*Qe-ie*je,Vn=Z*lt-_e*je,Zn=Z*Tt-Le*je,Qn=ie*lt-_e*Qe,rr=ie*Tt-Le*Qe,_r=_e*Tt-Le*lt,dr=Mt*yn-Bt*an,Mr=Mt*On-Ht*an,Cr=Mt*Pn-Vt*an,Ur=Bt*On-Ht*yn,Or=Bt*Pn-Vt*yn,jr=Ht*Pn-Vt*On,zr=Nn*jr-Vn*Or+Zn*Ur+Qn*Cr-rr*Mr+_r*dr;return zr?(A[0]=(Qe*jr-lt*Or+Tt*Ur)*(zr=1/zr),A[1]=(_e*Or-ie*jr-Le*Ur)*zr,A[2]=(yn*_r-On*rr+Pn*Qn)*zr,A[3]=(Ht*rr-Bt*_r-Vt*Qn)*zr,A[4]=(lt*Cr-je*jr-Tt*Mr)*zr,A[5]=(Z*jr-_e*Cr+Le*Mr)*zr,A[6]=(On*Zn-an*_r-Pn*Vn)*zr,A[7]=(Mt*_r-Ht*Zn+Vt*Vn)*zr,A[8]=(je*Or-Qe*Cr+Tt*dr)*zr,A[9]=(ie*Cr-Z*Or-Le*dr)*zr,A[10]=(an*rr-yn*Zn+Pn*Nn)*zr,A[11]=(Bt*Zn-Mt*rr-Vt*Nn)*zr,A[12]=(Qe*Mr-je*Ur-lt*dr)*zr,A[13]=(Z*Ur-ie*Mr+_e*dr)*zr,A[14]=(yn*Vn-an*Qn-On*Nn)*zr,A[15]=(Mt*Qn-Bt*Vn+Ht*Nn)*zr,A):null},l.isChar=Ar,l.isMapboxURL=se,l.keysDifference=function(A,O){var Z=[];for(var ie in A)ie in O||Z.push(ie);return Z},l.makeRequest=pt,l.mapObject=d,l.mercatorXfromLng=Kf,l.mercatorYfromLat=$f,l.mercatorZfromAltitude=Qf,l.mul=Oh,l.multiply=Xc,l.mvt=Ol,l.normalize=function(A,O){var Z=O[0],ie=O[1],_e=O[2],Le=Z*Z+ie*ie+_e*_e;return Le>0&&(Le=1/Math.sqrt(Le)),A[0]=O[0]*Le,A[1]=O[1]*Le,A[2]=O[2]*Le,A},l.number=Tr,l.offscreenCanvasSupported=nt,l.ortho=function(A,O,Z,ie,_e,Le,je){var Qe=1/(O-Z),lt=1/(ie-_e),Tt=1/(Le-je);return A[0]=-2*Qe,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*lt,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*Tt,A[11]=0,A[12]=(O+Z)*Qe,A[13]=(_e+ie)*lt,A[14]=(je+Le)*Tt,A[15]=1,A},l.parseGlyphPBF=function(A){return new Pu(A).readFields(Ep,[])},l.pbf=Pu,l.performSymbolLayout=function(A,O,Z,ie,_e,Le,je){A.createArrays(),A.tilePixelRatio=Nr/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;var lt=A.layers[0].layout,Tt=A.layers[0]._unevaluatedLayout._values,Mt={};if("composite"===A.textSizeData.kind){var Bt=A.textSizeData,Vt=Bt.maxZoom;Mt.compositeTextSizes=[Tt["text-size"].possiblyEvaluate(new ii(Bt.minZoom),je),Tt["text-size"].possiblyEvaluate(new ii(Vt),je)]}if("composite"===A.iconSizeData.kind){var an=A.iconSizeData,On=an.maxZoom;Mt.compositeIconSizes=[Tt["icon-size"].possiblyEvaluate(new ii(an.minZoom),je),Tt["icon-size"].possiblyEvaluate(new ii(On),je)]}Mt.layoutTextSize=Tt["text-size"].possiblyEvaluate(new ii(A.zoom+1),je),Mt.layoutIconSize=Tt["icon-size"].possiblyEvaluate(new ii(A.zoom+1),je),Mt.textMaxSize=Tt["text-size"].possiblyEvaluate(new ii(18));for(var Pn=24*lt.get("text-line-height"),Nn="map"===lt.get("text-rotation-alignment")&&"point"!==lt.get("symbol-placement"),Vn=lt.get("text-keep-upright"),Zn=lt.get("text-size"),Qn=function(){var dr=_r[rr],Mr=lt.get("text-font").evaluate(dr,{},je).join(","),Cr=Zn.evaluate(dr,{},je),Ur=Mt.layoutTextSize.evaluate(dr,{},je),Or=Mt.layoutIconSize.evaluate(dr,{},je),jr={horizontal:{},vertical:void 0},zr=dr.text,Pr=[0,0];if(zr){var Kr=zr.toString(),qr=24*lt.get("text-letter-spacing").evaluate(dr,{},je),Ti=function(Gr){for(var ri=0,Ui=Gr;ri<Ui.length;ri+=1)if(wi=Ui[ri].charCodeAt(0),Ar.Arabic(wi)||Ar["Arabic Supplement"](wi)||Ar["Arabic Extended-A"](wi)||Ar["Arabic Presentation Forms-A"](wi)||Ar["Arabic Presentation Forms-B"](wi))return!1;var wi;return!0}(Kr)?qr:0,Br=lt.get("text-anchor").evaluate(dr,{},je),xi=lt.get("text-variable-anchor");if(!xi){var Mi=lt.get("text-radial-offset").evaluate(dr,{},je);Pr=Mi?jf(Br,[24*Mi,Mc]):lt.get("text-offset").evaluate(dr,{},je).map(function(Gr){return 24*Gr})}var Ei=Nn?"center":lt.get("text-justify").evaluate(dr,{},je),Oi=lt.get("symbol-placement"),ki="point"===Oi?24*lt.get("text-max-width").evaluate(dr,{},je):0,aa=function(){A.allowVerticalPlacement&&rs(Kr)&&(jr.vertical=Ru(zr,O,Z,_e,Mr,ki,Pn,Br,"left",Ti,Pr,Co.vertical,!0,Oi,Ur,Cr))};if(!Nn&&xi){for(var zi="auto"===Ei?xi.map(function(Gr){return Sc(Gr)}):[Ei],ma=!1,Pa=0;Pa<zi.length;Pa++){var Ta=zi[Pa];if(!jr.horizontal[Ta])if(ma)jr.horizontal[Ta]=jr.horizontal[0];else{var Wa=Ru(zr,O,Z,_e,Mr,ki,Pn,"center",Ta,Ti,Pr,Co.horizontal,!1,Oi,Ur,Cr);Wa&&(jr.horizontal[Ta]=Wa,ma=1===Wa.positionedLines.length)}}aa()}else{"auto"===Ei&&(Ei=Sc(Br));var ka=Ru(zr,O,Z,_e,Mr,ki,Pn,Br,Ei,Ti,Pr,Co.horizontal,!1,Oi,Ur,Cr);ka&&(jr.horizontal[Ei]=ka),aa(),rs(Kr)&&Nn&&Vn&&(jr.vertical=Ru(zr,O,Z,_e,Mr,ki,Pn,Br,Ei,Ti,Pr,Co.vertical,!1,Oi,Ur,Cr))}}var Gr,ri,wi,Xa,Va,sa=void 0,Aa=!1;if(dr.icon&&dr.icon.name){var ya=ie[dr.icon.name];ya&&(Gr=_e[dr.icon.name],ri=lt.get("icon-offset").evaluate(dr,{},je),wi=kc(lt.get("icon-anchor").evaluate(dr,{},je)),sa={image:Gr,top:Va=ri[1]-Gr.displaySize[1]*wi.verticalAlign,bottom:Va+Gr.displaySize[1],left:Xa=ri[0]-Gr.displaySize[0]*wi.horizontalAlign,right:Xa+Gr.displaySize[0]},Aa=ya.sdf,void 0===A.sdfIcons?A.sdfIcons=ya.sdf:A.sdfIcons!==ya.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ya.pixelRatio!==A.pixelRatio||0!==lt.get("icon-rotate").constantOr(1))&&(A.iconsNeedLinear=!0))}var la=Vf(jr.horizontal)||jr.vertical;A.iconsInText=!!la&&la.iconsInText,(la||sa)&&function(Gr,ri,Ui,wi,Di,Ii,oi,Vi,Xa,mo,Va){var Ts=Ii.textMaxSize.evaluate(ri,{});void 0===Ts&&(Ts=oi);var rl,xa=Gr.layers[0].layout,ks=xa.get("icon-offset").evaluate(ri,{},Va),os=Vf(Ui.horizontal),kl=oi/24,Gu=Gr.tilePixelRatio*kl,Al=Gr.tilePixelRatio*Ts/24,Zu=Gr.tilePixelRatio*Vi,lu=Gr.tilePixelRatio*xa.get("symbol-spacing"),Ic=xa.get("text-padding")*Gr.tilePixelRatio,Yu=xa.get("icon-padding")*Gr.tilePixelRatio,Hl=xa.get("text-max-angle")/180*Math.PI,Wu="map"===xa.get("text-rotation-alignment")&&"point"!==xa.get("symbol-placement"),Xu="map"===xa.get("icon-rotation-alignment")&&"point"!==xa.get("symbol-placement"),uu=xa.get("symbol-placement"),zc=lu/2,cu=xa.get("icon-text-fit");wi&&"none"!==cu&&(Gr.allowVerticalPlacement&&Ui.vertical&&(rl=Lf(wi,Ui.vertical,cu,xa.get("icon-text-fit-padding"),ks,kl)),os&&(wi=Lf(wi,os,cu,xa.get("icon-text-fit-padding"),ks,kl)));var Ml=function($p,vu){vu.x<0||vu.x>=Nr||vu.y<0||vu.y>=Nr||function(qi,As,Qp,vl,jc,lh,ec,Bs,tc,mu,nc,rc,Uc,uh,yu,ch,fh,hh,ph,dh,Po,ic,gh,Ns,ed){var vh,Ll,Zl,Yl,Wl,Xl=qi.addToLineVertexArray(As,Qp),mh=0,yh=0,xh=0,bh=0,Vc=-1,Hc=-1,il={},_h=Cn(""),qc=0,Gc=0;if(void 0===Bs._unevaluatedLayout.getValue("text-radial-offset")?(qc=(vh=Bs.layout.get("text-offset").evaluate(Po,{},Ns).map(function(bu){return 24*bu}))[0],Gc=vh[1]):(qc=24*Bs.layout.get("text-radial-offset").evaluate(Po,{},Ns),Gc=Mc),qi.allowVerticalPlacement&&vl.vertical){var wh=Bs.layout.get("text-rotate").evaluate(Po,{},Ns)+90;Yl=new ju(tc,As,mu,nc,rc,vl.vertical,Uc,uh,yu,wh),ec&&(Wl=new ju(tc,As,mu,nc,rc,ec,fh,hh,yu,wh))}if(jc){var Zc=Bs.layout.get("icon-rotate").evaluate(Po,{}),Th="none"!==Bs.layout.get("icon-text-fit"),kh=Bf(jc,Zc,gh,Th),Yc=ec?Bf(ec,Zc,gh,Th):void 0;Zl=new ju(tc,As,mu,nc,rc,jc,fh,hh,!1,Zc),mh=4*kh.length;var Ah=qi.iconSizeData,xu=null;"source"===Ah.kind?(xu=[Fs*Bs.layout.get("icon-size").evaluate(Po,{})])[0]>pl&&S(qi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Ah.kind&&((xu=[Fs*ic.compositeIconSizes[0].evaluate(Po,{},Ns),Fs*ic.compositeIconSizes[1].evaluate(Po,{},Ns)])[0]>pl||xu[1]>pl)&&S(qi.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),qi.addSymbols(qi.icon,kh,xu,dh,ph,Po,!1,As,Xl.lineStartIndex,Xl.lineLength,-1,Ns),Vc=qi.icon.placedSymbolArray.length-1,Yc&&(yh=4*Yc.length,qi.addSymbols(qi.icon,Yc,xu,dh,ph,Po,Co.vertical,As,Xl.lineStartIndex,Xl.lineLength,-1,Ns),Hc=qi.icon.placedSymbolArray.length-1)}for(var Mh in vl.horizontal){var ac=vl.horizontal[Mh];if(!Ll){_h=Cn(ac.text);var nd=Bs.layout.get("text-rotate").evaluate(Po,{},Ns);Ll=new ju(tc,As,mu,nc,rc,ac,Uc,uh,yu,nd)}var Sh=1===ac.positionedLines.length;if(xh+=Uf(qi,As,ac,lh,Bs,yu,Po,ch,Xl,vl.vertical?Co.horizontal:Co.horizontalOnly,Sh?Object.keys(vl.horizontal):[Mh],il,Vc,ic,Ns),Sh)break}vl.vertical&&(bh+=Uf(qi,As,vl.vertical,lh,Bs,yu,Po,ch,Xl,Co.vertical,["vertical"],il,Hc,ic,Ns));var rd=Ll?Ll.boxStartIndex:qi.collisionBoxArray.length,id=Ll?Ll.boxEndIndex:qi.collisionBoxArray.length,ad=Yl?Yl.boxStartIndex:qi.collisionBoxArray.length,od=Yl?Yl.boxEndIndex:qi.collisionBoxArray.length,sd=Zl?Zl.boxStartIndex:qi.collisionBoxArray.length,ld=Zl?Zl.boxEndIndex:qi.collisionBoxArray.length,ud=Wl?Wl.boxStartIndex:qi.collisionBoxArray.length,cd=Wl?Wl.boxEndIndex:qi.collisionBoxArray.length,js=-1,oc=function(bu,Lh){return bu&&bu.circleDiameter?Math.max(bu.circleDiameter,Lh):Lh};js=oc(Ll,js),js=oc(Yl,js),js=oc(Zl,js);var Eh=(js=oc(Wl,js))>-1?1:0;Eh&&(js*=ed/24),qi.glyphOffsetArray.length>=yi.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Po.sortKey&&qi.addToSortKeyRanges(qi.symbolInstances.length,Po.sortKey),qi.symbolInstances.emplaceBack(As.x,As.y,il.right>=0?il.right:-1,il.center>=0?il.center:-1,il.left>=0?il.left:-1,il.vertical||-1,Vc,Hc,_h,rd,id,ad,od,sd,ld,ud,cd,mu,xh,bh,mh,yh,Eh,0,Uc,qc,Gc,js)}(Gr,vu,$p,Ui,wi,Di,rl,Gr.layers[0],Gr.collisionBoxArray,ri.index,ri.sourceLayerIndex,Gr.index,Gu,Ic,Wu,Xa,Zu,Yu,Xu,ks,ri,Ii,mo,Va,oi)};if("line"===uu)for(var ql=0,Ju=Ff(ri.geometry,0,0,Nr,Nr);ql<Ju.length;ql+=1)for(var Ku=Ju[ql],Gl=0,$u=Rp(Ku,lu,Hl,Ui.vertical||os,wi,24,Al,Gr.overscaling,Nr);Gl<$u.length;Gl+=1){var Qu=$u[Gl];os&&Np(Gr,os.text,zc,Qu)||Ml(Ku,Qu)}else if("line-center"===uu)for(var fu=0,hu=ri.geometry;fu<hu.length;fu+=1){var Sl=hu[fu];if(Sl.length>1){var pu=zp(Sl,Hl,Ui.vertical||os,wi,24,Al);pu&&Ml(Sl,pu)}}else if("Polygon"===ri.type)for(var El=0,du=mc(ri.geometry,0);El<du.length;El+=1){var gu=du[El],ih=Fp(gu,16);Ml(gu[0],new Dl(ih.x,ih.y,0))}else if("LineString"===ri.type)for(var Rc=0,ah=ri.geometry;Rc<ah.length;Rc+=1){var Dc=ah[Rc];Ml(Dc,new Dl(Dc[0].x,Dc[0].y,0))}else if("Point"===ri.type)for(var Fc=0,oh=ri.geometry;Fc<oh.length;Fc+=1)for(var Bc=0,sh=oh[Fc];Bc<sh.length;Bc+=1){var Nc=sh[Bc];Ml([Nc],new Dl(Nc.x,Nc.y,0))}}(A,dr,jr,sa,ie,Mt,Ur,Or,Pr,Aa,je)},rr=0,_r=A.features;rr<_r.length;rr+=1)Qn();Le&&A.generateCollisionDebugBuffers()},l.perspective=function(A,O,Z,ie,_e){var Le,je=1/Math.tan(O/2);return A[0]=je/Z,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=je,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,null!=_e&&_e!==1/0?(A[10]=(_e+ie)*(Le=1/(ie-_e)),A[14]=2*_e*ie*Le):(A[10]=-1,A[14]=-2*ie),A},l.pick=function(A,O){for(var Z={},ie=0;ie<O.length;ie++){var _e=O[ie];_e in A&&(Z[_e]=A[_e])}return Z},l.plugin=ha,l.polygonIntersectsPolygon=ji,l.postMapLoadEvent=Re,l.postTurnstileEvent=ye,l.potpack=kf,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=wr,l.registerForPluginStateChange=function(A){return A({pluginStatus:$i,pluginURL:Ba}),La.on("pluginStateChange",A),A},l.rotate=function(A,O,Z){var ie=O[0],_e=O[1],Le=O[2],je=O[3],Qe=Math.sin(Z),lt=Math.cos(Z);return A[0]=ie*lt+Le*Qe,A[1]=_e*lt+je*Qe,A[2]=ie*-Qe+Le*lt,A[3]=_e*-Qe+je*lt,A},l.rotateX=function(A,O,Z){var ie=Math.sin(Z),_e=Math.cos(Z),Le=O[4],je=O[5],Qe=O[6],lt=O[7],Tt=O[8],Mt=O[9],Bt=O[10],Ht=O[11];return O!==A&&(A[0]=O[0],A[1]=O[1],A[2]=O[2],A[3]=O[3],A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15]),A[4]=Le*_e+Tt*ie,A[5]=je*_e+Mt*ie,A[6]=Qe*_e+Bt*ie,A[7]=lt*_e+Ht*ie,A[8]=Tt*_e-Le*ie,A[9]=Mt*_e-je*ie,A[10]=Bt*_e-Qe*ie,A[11]=Ht*_e-lt*ie,A},l.rotateZ=function(A,O,Z){var ie=Math.sin(Z),_e=Math.cos(Z),Le=O[0],je=O[1],Qe=O[2],lt=O[3],Tt=O[4],Mt=O[5],Bt=O[6],Ht=O[7];return O!==A&&(A[8]=O[8],A[9]=O[9],A[10]=O[10],A[11]=O[11],A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15]),A[0]=Le*_e+Tt*ie,A[1]=je*_e+Mt*ie,A[2]=Qe*_e+Bt*ie,A[3]=lt*_e+Ht*ie,A[4]=Tt*_e-Le*ie,A[5]=Mt*_e-je*ie,A[6]=Bt*_e-Qe*ie,A[7]=Ht*_e-lt*ie,A},l.scale=function(A,O,Z){var ie=Z[0],_e=Z[1],Le=Z[2];return A[0]=O[0]*ie,A[1]=O[1]*ie,A[2]=O[2]*ie,A[3]=O[3]*ie,A[4]=O[4]*_e,A[5]=O[5]*_e,A[6]=O[6]*_e,A[7]=O[7]*_e,A[8]=O[8]*Le,A[9]=O[9]*Le,A[10]=O[10]*Le,A[11]=O[11]*Le,A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15],A},l.scale$1=function(A,O,Z){return A[0]=O[0]*Z,A[1]=O[1]*Z,A[2]=O[2]*Z,A[3]=O[3]*Z,A},l.scale$2=function(A,O,Z){return A[0]=O[0]*Z,A[1]=O[1]*Z,A[2]=O[2]*Z,A},l.setCacheLimits=function(A,O){De=A,fe=O},l.setRTLTextPlugin=function(A,O,Z){if(void 0===Z&&(Z=!1),$i===wa||$i===Mo||$i===qa)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ba=Y.resolveURL(A),$i=wa,Go=O,bs(),Z||Qa()},l.sphericalToCartesian=function(A){var O=A[0],Z=A[1],ie=A[2];return Z+=90,Z*=Math.PI/180,ie*=Math.PI/180,{x:O*Math.cos(Z)*Math.sin(ie),y:O*Math.sin(Z)*Math.sin(ie),z:O*Math.cos(ie)}},l.sqrLen=function(A){var O=A[0],Z=A[1];return O*O+Z*Z},l.styleSpec=Se,l.sub=function(A,O,Z){return A[0]=O[0]-Z[0],A[1]=O[1]-Z[1],A[2]=O[2]-Z[2],A},l.symbolSize=Ip,l.transformMat3=function(A,O,Z){var ie=O[0],_e=O[1],Le=O[2];return A[0]=ie*Z[0]+_e*Z[3]+Le*Z[6],A[1]=ie*Z[1]+_e*Z[4]+Le*Z[7],A[2]=ie*Z[2]+_e*Z[5]+Le*Z[8],A},l.transformMat4=Mu,l.translate=function(A,O,Z){var ie,_e,Le,je,Qe,lt,Tt,Mt,Bt,Ht,Vt,an,yn=Z[0],On=Z[1],Pn=Z[2];return O===A?(A[12]=O[0]*yn+O[4]*On+O[8]*Pn+O[12],A[13]=O[1]*yn+O[5]*On+O[9]*Pn+O[13],A[14]=O[2]*yn+O[6]*On+O[10]*Pn+O[14],A[15]=O[3]*yn+O[7]*On+O[11]*Pn+O[15]):(_e=O[1],Le=O[2],je=O[3],Qe=O[4],lt=O[5],Tt=O[6],Mt=O[7],Bt=O[8],Ht=O[9],Vt=O[10],an=O[11],A[0]=ie=O[0],A[1]=_e,A[2]=Le,A[3]=je,A[4]=Qe,A[5]=lt,A[6]=Tt,A[7]=Mt,A[8]=Bt,A[9]=Ht,A[10]=Vt,A[11]=an,A[12]=ie*yn+Qe*On+Bt*Pn+O[12],A[13]=_e*yn+lt*On+Ht*Pn+O[13],A[14]=Le*yn+Tt*On+Vt*Pn+O[14],A[15]=je*yn+Mt*On+an*Pn+O[15]),A},l.triggerPluginCompletionEvent=ai,l.uniqueId=f,l.validateCustomStyleLayer=function(A){var O=[],Z=A.id;return void 0===Z&&O.push({message:"layers."+Z+': missing required property "id"'}),void 0===A.render&&O.push({message:"layers."+Z+': missing required method "render"'}),A.renderingMode&&"2d"!==A.renderingMode&&"3d"!==A.renderingMode&&O.push({message:"layers."+Z+': property "renderingMode" must be either "2d" or "3d"'}),O},l.validateLight=Zi,l.validateStyle=Ji,l.values=function(A){var O=[];for(var Z in A)O.push(A[Z]);return O},l.vectorTile=Ol,l.version=x,l.warnOnce=S,l.webpSupported=H,l.window=self,l.wrap=i}),k(0,function(l){function T(Ye){var Ze=typeof Ye;if("number"===Ze||"boolean"===Ze||"string"===Ze||null==Ye)return JSON.stringify(Ye);if(Array.isArray(Ye)){for(var Ne="[",Je=0,at=Ye;Je<at.length;Je+=1)Ne+=T(at[Je])+",";return Ne+"]"}for(var Se=Object.keys(Ye).sort(),ze="{",Ke=0;Ke<Se.length;Ke++)ze+=JSON.stringify(Se[Ke])+":"+T(Ye[Se[Ke]])+",";return ze+"}"}function x(Ye){for(var Ze="",Ne=0,Je=l.refProperties;Ne<Je.length;Ne+=1)Ze+="/"+T(Ye[Je[Ne]]);return Ze}var p=function(Ye){this.keyCache={},Ye&&this.replace(Ye)};p.prototype.replace=function(Ye){this._layerConfigs={},this._layers={},this.update(Ye,[])},p.prototype.update=function(Ye,Ze){for(var Ne=this,Je=0,at=Ye;Je<at.length;Je+=1){var Se=at[Je];this._layerConfigs[Se.id]=Se;var ze=this._layers[Se.id]=l.createStyleLayer(Se);ze._featureFilter=l.featureFilter(ze.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(var Ke=0,it=Ze;Ke<it.length;Ke+=1){var ct=it[Ke];delete this.keyCache[ct],delete this._layerConfigs[ct],delete this._layers[ct]}this.familiesBySource={};for(var mt=0,Lt=function(Ut,Nt){for(var qt={},Xt=0;Xt<Ut.length;Xt++){var Kt=Nt&&Nt[Ut[Xt].id]||x(Ut[Xt]);Nt&&(Nt[Ut[Xt].id]=Kt);var fn=qt[Kt];fn||(fn=qt[Kt]=[]),fn.push(Ut[Xt])}var nn=[];for(var xn in qt)nn.push(qt[xn]);return nn}(l.values(this._layerConfigs),this.keyCache);mt<Lt.length;mt+=1){var At=Lt[mt].map(function(Ut){return Ne._layers[Ut.id]}),ht=At[0];if("none"!==ht.visibility){var Et=ht.source||"",gt=this.familiesBySource[Et];gt||(gt=this.familiesBySource[Et]={});var kt=ht.sourceLayer||"_geojsonTileLayer",It=gt[kt];It||(It=gt[kt]=[]),It.push(At)}}};var s=function(Ye){var Ze={},Ne=[];for(var Je in Ye){var at=Ye[Je],Se=Ze[Je]={};for(var ze in at){var Ke=at[+ze];if(Ke&&0!==Ke.bitmap.width&&0!==Ke.bitmap.height){var it={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};Ne.push(it),Se[ze]={rect:it,metrics:Ke.metrics}}}}var ct=l.potpack(Ne),At=new l.AlphaImage({width:ct.w||1,height:ct.h||1});for(var ht in Ye){var Et=Ye[ht];for(var gt in Et){var kt=Et[+gt];if(kt&&0!==kt.bitmap.width&&0!==kt.bitmap.height){var It=Ze[ht][gt].rect;l.AlphaImage.copy(kt.bitmap,At,{x:0,y:0},{x:It.x+1,y:It.y+1},kt.bitmap)}}}this.image=At,this.positions=Ze};l.register("GlyphAtlas",s);var e=function(Ye){this.tileID=new l.OverscaledTileID(Ye.tileID.overscaledZ,Ye.tileID.wrap,Ye.tileID.canonical.z,Ye.tileID.canonical.x,Ye.tileID.canonical.y),this.uid=Ye.uid,this.zoom=Ye.zoom,this.pixelRatio=Ye.pixelRatio,this.tileSize=Ye.tileSize,this.source=Ye.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ye.showCollisionBoxes,this.collectResourceTiming=!!Ye.collectResourceTiming,this.returnDependencies=!!Ye.returnDependencies,this.promoteId=Ye.promoteId};function o(Ye,Ze,Ne){for(var Je=new l.EvaluationParameters(Ze),at=0,Se=Ye;at<Se.length;at+=1)Se[at].recalculate(Je,Ne)}function r(Ye,Ze){var Ne=l.getArrayBuffer(Ye.request,function(Je,at,Se,ze){Je?Ze(Je):at&&Ze(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(at)),rawData:at,cacheControl:Se,expires:ze})});return function(){Ne.cancel(),Ze()}}e.prototype.parse=function(Ye,Ze,Ne,Je,at){var Se=this;this.status="parsing",this.data=Ye,this.collisionBoxArray=new l.CollisionBoxArray;var ze=new l.DictionaryCoder(Object.keys(Ye.layers).sort()),Ke=new l.FeatureIndex(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];var it,ct,mt,Lt,At={},ht={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ne},Et=Ze.familiesBySource[this.source];for(var gt in Et){var kt=Ye.layers[gt];if(kt){1===kt.version&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+gt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var It=ze.encode(gt),Ut=[],Nt=0;Nt<kt.length;Nt++){var qt=kt.feature(Nt),Xt=Ke.getId(qt,gt);Ut.push({feature:qt,id:Xt,index:Nt,sourceLayerIndex:It})}for(var Kt=0,fn=Et[gt];Kt<fn.length;Kt+=1){var nn=fn[Kt],xn=nn[0];xn.minzoom&&this.zoom<Math.floor(xn.minzoom)||xn.maxzoom&&this.zoom>=xn.maxzoom||"none"!==xn.visibility&&(o(nn,this.zoom,Ne),(At[xn.id]=xn.createBucket({index:Ke.bucketLayerIDs.length,layers:nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:It,sourceID:this.source})).populate(Ut,ht,this.tileID.canonical),Ke.bucketLayerIDs.push(nn.map(function(on){return on.id})))}}}var jn=l.mapObject(ht.glyphDependencies,function(on){return Object.keys(on).map(Number)});Object.keys(jn).length?Je.send("getGlyphs",{uid:this.uid,stacks:jn},function(on,sn){it||(it=on,ct=sn,vn.call(Se))}):ct={};var mn=Object.keys(ht.iconDependencies);mn.length?Je.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"icons"},function(on,sn){it||(it=on,mt=sn,vn.call(Se))}):mt={};var en=Object.keys(ht.patternDependencies);function vn(){if(it)return at(it);if(ct&&mt&&Lt){var on=new s(ct),sn=new l.ImageAtlas(mt,Lt);for(var En in At){var kn=At[En];kn instanceof l.SymbolBucket?(o(kn.layers,this.zoom,Ne),l.performSymbolLayout(kn,ct,on.positions,mt,sn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):kn.hasPattern&&(kn instanceof l.LineBucket||kn instanceof l.FillBucket||kn instanceof l.FillExtrusionBucket)&&(o(kn.layers,this.zoom,Ne),kn.addFeatures(ht,this.tileID.canonical,sn.patternPositions))}this.status="done",at(null,{buckets:l.values(At).filter(function(zn){return!zn.isEmpty()}),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:on.image,imageAtlas:sn,glyphMap:this.returnDependencies?ct:null,iconMap:this.returnDependencies?mt:null,glyphPositions:this.returnDependencies?on.positions:null})}}en.length?Je.send("getImages",{icons:en,source:this.source,tileID:this.tileID,type:"patterns"},function(on,sn){it||(it=on,Lt=sn,vn.call(Se))}):Lt={},vn.call(this)};var n=function(Ye,Ze,Ne,Je){this.actor=Ye,this.layerIndex=Ze,this.availableImages=Ne,this.loadVectorData=Je||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(Ye,Ze){var Ne=this,Je=Ye.uid;this.loading||(this.loading={});var at=!!(Ye&&Ye.request&&Ye.request.collectResourceTiming)&&new l.RequestPerformance(Ye.request),Se=this.loading[Je]=new e(Ye);Se.abort=this.loadVectorData(Ye,function(ze,Ke){if(delete Ne.loading[Je],ze||!Ke)return Se.status="done",Ne.loaded[Je]=Se,Ze(ze);var it=Ke.rawData,ct={};Ke.expires&&(ct.expires=Ke.expires),Ke.cacheControl&&(ct.cacheControl=Ke.cacheControl);var mt={};if(at){var Lt=at.finish();Lt&&(mt.resourceTiming=JSON.parse(JSON.stringify(Lt)))}Se.vectorTile=Ke.vectorTile,Se.parse(Ke.vectorTile,Ne.layerIndex,Ne.availableImages,Ne.actor,function(At,ht){if(At||!ht)return Ze(At);Ze(null,l.extend({rawTileData:it.slice(0)},ht,ct,mt))}),Ne.loaded=Ne.loaded||{},Ne.loaded[Je]=Se})},n.prototype.reloadTile=function(Ye,Ze){var Ne=this,Je=this.loaded,at=Ye.uid,Se=this;if(Je&&Je[at]){var ze=Je[at];ze.showCollisionBoxes=Ye.showCollisionBoxes;var Ke=function(it,ct){var mt=ze.reloadCallback;mt&&(delete ze.reloadCallback,ze.parse(ze.vectorTile,Se.layerIndex,Ne.availableImages,Se.actor,mt)),Ze(it,ct)};"parsing"===ze.status?ze.reloadCallback=Ke:"done"===ze.status&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}},n.prototype.abortTile=function(Ye,Ze){var Ne=this.loading,Je=Ye.uid;Ne&&Ne[Je]&&Ne[Je].abort&&(Ne[Je].abort(),delete Ne[Je]),Ze()},n.prototype.removeTile=function(Ye,Ze){var Ne=this.loaded,Je=Ye.uid;Ne&&Ne[Je]&&delete Ne[Je],Ze()};var a=l.window.ImageBitmap,i=function(){this.loaded={}};i.prototype.loadTile=function(Ye,Ze){var Ne=Ye.uid,Je=Ye.encoding,at=Ye.rawImageData,Se=a&&at instanceof a?this.getImageData(at):at,ze=new l.DEMData(Ne,Se,Je);this.loaded=this.loaded||{},this.loaded[Ne]=ze,Ze(null,ze)},i.prototype.getImageData=function(Ye){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ye.width,Ye.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ye.width,this.offscreenCanvas.height=Ye.height,this.offscreenCanvasContext.drawImage(Ye,0,0,Ye.width,Ye.height);var Ze=this.offscreenCanvasContext.getImageData(-1,-1,Ye.width+2,Ye.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Ze.width,height:Ze.height},Ze.data)},i.prototype.removeTile=function(Ye){var Ze=this.loaded,Ne=Ye.uid;Ze&&Ze[Ne]&&delete Ze[Ne]};var c=function Ye(Ze,Ne){var Je,at=Ze&&Ze.type;if("FeatureCollection"===at)for(Je=0;Je<Ze.features.length;Je++)Ye(Ze.features[Je],Ne);else if("GeometryCollection"===at)for(Je=0;Je<Ze.geometries.length;Je++)Ye(Ze.geometries[Je],Ne);else if("Feature"===at)Ye(Ze.geometry,Ne);else if("Polygon"===at)h(Ze.coordinates,Ne);else if("MultiPolygon"===at)for(Je=0;Je<Ze.coordinates.length;Je++)h(Ze.coordinates[Je],Ne);return Ze};function h(Ye,Ze){if(0!==Ye.length){f(Ye[0],Ze);for(var Ne=1;Ne<Ye.length;Ne++)f(Ye[Ne],!Ze)}}function f(Ye,Ze){for(var Ne=0,Je=0,at=Ye.length,Se=at-1;Je<at;Se=Je++)Ne+=(Ye[Je][0]-Ye[Se][0])*(Ye[Se][1]+Ye[Je][1]);Ne>=0!=!!Ze&&Ye.reverse()}var b=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(Ye){this._feature=Ye,this.extent=l.EXTENT,this.type=Ye.type,this.properties=Ye.tags,"id"in Ye&&!isNaN(Ye.id)&&(this.id=parseInt(Ye.id,10))};v.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Ye=[],Ze=0,Ne=this._feature.geometry;Ze<Ne.length;Ze+=1){var Je=Ne[Ze];Ye.push([new l.Point$1(Je[0],Je[1])])}return Ye}for(var at=[],Se=0,ze=this._feature.geometry;Se<ze.length;Se+=1){for(var Ke=[],it=0,ct=ze[Se];it<ct.length;it+=1){var mt=ct[it];Ke.push(new l.Point$1(mt[0],mt[1]))}at.push(Ke)}return at},v.prototype.toGeoJSON=function(Ye,Ze,Ne){return b.call(this,Ye,Ze,Ne)};var g=function(Ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ye.length,this._features=Ye};g.prototype.feature=function(Ye){return new v(this._features[Ye])};var y=l.vectorTile.VectorTileFeature,d=m;function m(Ye,Ze){this.options=Ze||{},this.features=Ye,this.length=Ye.length}function w(Ye,Ze){this.id="number"==typeof Ye.id?Ye.id:void 0,this.type=Ye.type,this.rawGeometry=1===Ye.type?[Ye.geometry]:Ye.geometry,this.properties=Ye.tags,this.extent=Ze||4096}m.prototype.feature=function(Ye){return new w(this.features[Ye],this.options.extent)},w.prototype.loadGeometry=function(){var Ye=this.rawGeometry;this.geometry=[];for(var Ze=0;Ze<Ye.length;Ze++){for(var Ne=Ye[Ze],Je=[],at=0;at<Ne.length;at++)Je.push(new l.Point$1(Ne[at][0],Ne[at][1]));this.geometry.push(Je)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ye=this.geometry,Ze=1/0,Ne=-1/0,Je=1/0,at=-1/0,Se=0;Se<Ye.length;Se++)for(var ze=Ye[Se],Ke=0;Ke<ze.length;Ke++){var it=ze[Ke];Ze=Math.min(Ze,it.x),Ne=Math.max(Ne,it.x),Je=Math.min(Je,it.y),at=Math.max(at,it.y)}return[Ze,Je,Ne,at]},w.prototype.toGeoJSON=y.prototype.toGeoJSON;var u=L,E=d;function L(Ye){var Ze=new l.pbf;return function(Ne,Je){for(var at in Ne.layers)Je.writeMessage(3,C,Ne.layers[at])}(Ye,Ze),Ze.finish()}function C(Ye,Ze){var Ne;Ze.writeVarintField(15,Ye.version||1),Ze.writeStringField(1,Ye.name||""),Ze.writeVarintField(5,Ye.extent||4096);var Je={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<Ye.length;Ne++)Je.feature=Ye.feature(Ne),Ze.writeMessage(2,P,Je);var at=Je.keys;for(Ne=0;Ne<at.length;Ne++)Ze.writeStringField(3,at[Ne]);var Se=Je.values;for(Ne=0;Ne<Se.length;Ne++)Ze.writeMessage(4,D,Se[Ne])}function P(Ye,Ze){var Ne=Ye.feature;void 0!==Ne.id&&Ze.writeVarintField(1,Ne.id),Ze.writeMessage(2,z,Ye),Ze.writeVarintField(3,Ne.type),Ze.writeMessage(4,V,Ne)}function z(Ye,Ze){var Ne=Ye.feature,Je=Ye.keys,at=Ye.values,Se=Ye.keycache,ze=Ye.valuecache;for(var Ke in Ne.properties){var it=Se[Ke];void 0===it&&(Je.push(Ke),Se[Ke]=it=Je.length-1),Ze.writeVarint(it);var ct=Ne.properties[Ke],mt=typeof ct;"string"!==mt&&"boolean"!==mt&&"number"!==mt&&(ct=JSON.stringify(ct));var Lt=mt+":"+ct,At=ze[Lt];void 0===At&&(at.push(ct),ze[Lt]=At=at.length-1),Ze.writeVarint(At)}}function j(Ye,Ze){return(Ze<<3)+(7&Ye)}function R(Ye){return Ye<<1^Ye>>31}function V(Ye,Ze){for(var Ne=Ye.loadGeometry(),Je=Ye.type,at=0,Se=0,ze=Ne.length,Ke=0;Ke<ze;Ke++){var it=Ne[Ke],ct=1;1===Je&&(ct=it.length),Ze.writeVarint(j(1,ct));for(var mt=3===Je?it.length-1:it.length,Lt=0;Lt<mt;Lt++){1===Lt&&1!==Je&&Ze.writeVarint(j(2,mt-1));var At=it[Lt].x-at,ht=it[Lt].y-Se;Ze.writeVarint(R(At)),Ze.writeVarint(R(ht)),at+=At,Se+=ht}3===Je&&Ze.writeVarint(j(7,1))}}function D(Ye,Ze){var Ne=typeof Ye;"string"===Ne?Ze.writeStringField(1,Ye):"boolean"===Ne?Ze.writeBooleanField(7,Ye):"number"===Ne&&(Ye%1!=0?Ze.writeDoubleField(3,Ye):Ye<0?Ze.writeSVarintField(6,Ye):Ze.writeVarintField(5,Ye))}function B(Ye,Ze,Ne,Je,at,Se){if(!(at-Je<=Ne)){var ze=Je+at>>1;N(Ye,Ze,ze,Je,at,Se%2),B(Ye,Ze,Ne,Je,ze-1,Se+1),B(Ye,Ze,Ne,ze+1,at,Se+1)}}function N(Ye,Ze,Ne,Je,at,Se){for(;at>Je;){if(at-Je>600){var ze=at-Je+1,Ke=Ne-Je+1,it=Math.log(ze),ct=.5*Math.exp(2*it/3),mt=.5*Math.sqrt(it*ct*(ze-ct)/ze)*(Ke-ze/2<0?-1:1);N(Ye,Ze,Ne,Math.max(Je,Math.floor(Ne-Ke*ct/ze+mt)),Math.min(at,Math.floor(Ne+(ze-Ke)*ct/ze+mt)),Se)}var Lt=Ze[2*Ne+Se],At=Je,ht=at;for(U(Ye,Ze,Je,Ne),Ze[2*at+Se]>Lt&&U(Ye,Ze,Je,at);At<ht;){for(U(Ye,Ze,At,ht),At++,ht--;Ze[2*At+Se]<Lt;)At++;for(;Ze[2*ht+Se]>Lt;)ht--}Ze[2*Je+Se]===Lt?U(Ye,Ze,Je,ht):U(Ye,Ze,++ht,at),ht<=Ne&&(Je=ht+1),Ne<=ht&&(at=ht-1)}}function U(Ye,Ze,Ne,Je){J(Ye,Ne,Je),J(Ze,2*Ne,2*Je),J(Ze,2*Ne+1,2*Je+1)}function J(Ye,Ze,Ne){var Je=Ye[Ze];Ye[Ze]=Ye[Ne],Ye[Ne]=Je}function Y(Ye,Ze,Ne,Je){var at=Ye-Ne,Se=Ze-Je;return at*at+Se*Se}u.fromVectorTileJs=L,u.fromGeojsonVt=function(Ye,Ze){Ze=Ze||{};var Ne={};for(var Je in Ye)Ne[Je]=new d(Ye[Je].features,Ze),Ne[Je].name=Je,Ne[Je].version=Ze.version,Ne[Je].extent=Ze.extent;return L({layers:Ne})},u.GeoJSONWrapper=E;var q=function(Ye){return Ye[0]},H=function(Ye){return Ye[1]},X=function(Ye,Ze,Ne,Je,at){void 0===Ze&&(Ze=q),void 0===Ne&&(Ne=H),void 0===Je&&(Je=64),void 0===at&&(at=Float64Array),this.nodeSize=Je,this.points=Ye;for(var Se=Ye.length<65536?Uint16Array:Uint32Array,ze=this.ids=new Se(Ye.length),Ke=this.coords=new at(2*Ye.length),it=0;it<Ye.length;it++)ze[it]=it,Ke[2*it]=Ze(Ye[it]),Ke[2*it+1]=Ne(Ye[it]);B(ze,Ke,Je,0,ze.length-1,0)};X.prototype.range=function(Ye,Ze,Ne,Je){return function(at,Se,ze,Ke,it,ct,mt){for(var Lt,At,ht=[0,at.length-1,0],Et=[];ht.length;){var gt=ht.pop(),kt=ht.pop(),It=ht.pop();if(kt-It<=mt)for(var Ut=It;Ut<=kt;Ut++)At=Se[2*Ut+1],(Lt=Se[2*Ut])>=ze&&Lt<=it&&At>=Ke&&At<=ct&&Et.push(at[Ut]);else{var Nt=Math.floor((It+kt)/2);At=Se[2*Nt+1],(Lt=Se[2*Nt])>=ze&&Lt<=it&&At>=Ke&&At<=ct&&Et.push(at[Nt]);var qt=(gt+1)%2;(0===gt?ze<=Lt:Ke<=At)&&(ht.push(It),ht.push(Nt-1),ht.push(qt)),(0===gt?it>=Lt:ct>=At)&&(ht.push(Nt+1),ht.push(kt),ht.push(qt))}}return Et}(this.ids,this.coords,Ye,Ze,Ne,Je,this.nodeSize)},X.prototype.within=function(Ye,Ze,Ne){return function(Je,at,Se,ze,Ke,it){for(var ct=[0,Je.length-1,0],mt=[],Lt=Ke*Ke;ct.length;){var At=ct.pop(),ht=ct.pop(),Et=ct.pop();if(ht-Et<=it)for(var gt=Et;gt<=ht;gt++)Y(at[2*gt],at[2*gt+1],Se,ze)<=Lt&&mt.push(Je[gt]);else{var kt=Math.floor((Et+ht)/2),It=at[2*kt],Ut=at[2*kt+1];Y(It,Ut,Se,ze)<=Lt&&mt.push(Je[kt]);var Nt=(At+1)%2;(0===At?Se-Ke<=It:ze-Ke<=Ut)&&(ct.push(Et),ct.push(kt-1),ct.push(Nt)),(0===At?Se+Ke>=It:ze+Ke>=Ut)&&(ct.push(kt+1),ct.push(ht),ct.push(Nt))}}return mt}(this.ids,this.coords,Ye,Ze,Ne,this.nodeSize)};var Q={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ye){return Ye}},ne=function(Ye){this.options=le(Object.create(Q),Ye),this.trees=new Array(this.options.maxZoom+1)};function re(Ye,Ze,Ne,Je,at){return{x:Ye,y:Ze,zoom:1/0,id:Ne,parentId:-1,numPoints:Je,properties:at}}function ae(Ye,Ze){var Ne=Ye.geometry.coordinates,at=Ne[1];return{x:ke(Ne[0]),y:me(at),zoom:1/0,index:Ze,parentId:-1}}function se(Ye){return{type:"Feature",id:Ye.id,properties:pe(Ye),geometry:{type:"Point",coordinates:[(Je=Ye.x,360*(Je-.5)),(Ze=Ye.y,Ne=(180-360*Ze)*Math.PI/180,360*Math.atan(Math.exp(Ne))/Math.PI-90)]}};var Ze,Ne,Je}function pe(Ye){var Ze=Ye.numPoints,Ne=Ze>=1e4?Math.round(Ze/1e3)+"k":Ze>=1e3?Math.round(Ze/100)/10+"k":Ze;return le(le({},Ye.properties),{cluster:!0,cluster_id:Ye.id,point_count:Ze,point_count_abbreviated:Ne})}function ke(Ye){return Ye/360+.5}function me(Ye){var Ze=Math.sin(Ye*Math.PI/180),Ne=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function le(Ye,Ze){for(var Ne in Ze)Ye[Ne]=Ze[Ne];return Ye}function ue(Ye){return Ye.x}function Ee(Ye){return Ye.y}function de(Ye,Ze,Ne,Je){for(var at,Se=Je,ze=Ne-Ze>>1,Ke=Ne-Ze,it=Ye[Ze],ct=Ye[Ze+1],mt=Ye[Ne],Lt=Ye[Ne+1],At=Ze+3;At<Ne;At+=3){var ht=xe(Ye[At],Ye[At+1],it,ct,mt,Lt);if(ht>Se)at=At,Se=ht;else if(ht===Se){var Et=Math.abs(At-ze);Et<Ke&&(at=At,Ke=Et)}}Se>Je&&(at-Ze>3&&de(Ye,Ze,at,Je),Ye[at+2]=Se,Ne-at>3&&de(Ye,at,Ne,Je))}function xe(Ye,Ze,Ne,Je,at,Se){var ze=at-Ne,Ke=Se-Je;if(0!==ze||0!==Ke){var it=((Ye-Ne)*ze+(Ze-Je)*Ke)/(ze*ze+Ke*Ke);it>1?(Ne=at,Je=Se):it>0&&(Ne+=ze*it,Je+=Ke*it)}return(ze=Ye-Ne)*ze+(Ke=Ze-Je)*Ke}function Te(Ye,Ze,Ne,Je){var at={id:void 0===Ye?null:Ye,type:Ze,geometry:Ne,tags:Je,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Se){var ze=Se.geometry,Ke=Se.type;if("Point"===Ke||"MultiPoint"===Ke||"LineString"===Ke)we(Se,ze);else if("Polygon"===Ke||"MultiLineString"===Ke)for(var it=0;it<ze.length;it++)we(Se,ze[it]);else if("MultiPolygon"===Ke)for(it=0;it<ze.length;it++)for(var ct=0;ct<ze[it].length;ct++)we(Se,ze[it][ct])}(at),at}function we(Ye,Ze){for(var Ne=0;Ne<Ze.length;Ne+=3)Ye.minX=Math.min(Ye.minX,Ze[Ne]),Ye.minY=Math.min(Ye.minY,Ze[Ne+1]),Ye.maxX=Math.max(Ye.maxX,Ze[Ne]),Ye.maxY=Math.max(Ye.maxY,Ze[Ne+1])}function K(Ye,Ze,Ne,Je){if(Ze.geometry){var at=Ze.geometry.coordinates,Se=Ze.geometry.type,ze=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),Ke=[],it=Ze.id;if(Ne.promoteId?it=Ze.properties[Ne.promoteId]:Ne.generateId&&(it=Je||0),"Point"===Se)oe(at,Ke);else if("MultiPoint"===Se)for(var ct=0;ct<at.length;ct++)oe(at[ct],Ke);else if("LineString"===Se)he(at,Ke,ze,!1);else if("MultiLineString"===Se){if(Ne.lineMetrics){for(ct=0;ct<at.length;ct++)he(at[ct],Ke=[],ze,!1),Ye.push(Te(it,"LineString",Ke,Ze.properties));return}ye(at,Ke,ze,!1)}else if("Polygon"===Se)ye(at,Ke,ze,!0);else{if("MultiPolygon"!==Se){if("GeometryCollection"===Se){for(ct=0;ct<Ze.geometry.geometries.length;ct++)K(Ye,{id:it,geometry:Ze.geometry.geometries[ct],properties:Ze.properties},Ne,Je);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ct=0;ct<at.length;ct++){var mt=[];ye(at[ct],mt,ze,!0),Ke.push(mt)}}Ye.push(Te(it,Se,Ke,Ze.properties))}}function oe(Ye,Ze){Ze.push(Me(Ye[0])),Ze.push(Re(Ye[1])),Ze.push(0)}function he(Ye,Ze,Ne,Je){for(var at,Se,ze=0,Ke=0;Ke<Ye.length;Ke++){var it=Me(Ye[Ke][0]),ct=Re(Ye[Ke][1]);Ze.push(it),Ze.push(ct),Ze.push(0),Ke>0&&(ze+=Je?(at*ct-it*Se)/2:Math.sqrt(Math.pow(it-at,2)+Math.pow(ct-Se,2))),at=it,Se=ct}var mt=Ze.length-3;Ze[2]=1,de(Ze,0,mt,Ne),Ze[mt+2]=1,Ze.size=Math.abs(ze),Ze.start=0,Ze.end=Ze.size}function ye(Ye,Ze,Ne,Je){for(var at=0;at<Ye.length;at++){var Se=[];he(Ye[at],Se,Ne,Je),Ze.push(Se)}}function Me(Ye){return Ye/360+.5}function Re(Ye){var Ze=Math.sin(Ye*Math.PI/180),Ne=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function Pe(Ye,Ze,Ne,Je,at,Se,ze,Ke){if(Je/=Ze,Se>=(Ne/=Ze)&&ze<Je)return Ye;if(ze<Ne||Se>=Je)return null;for(var it=[],ct=0;ct<Ye.length;ct++){var mt=Ye[ct],Lt=mt.geometry,At=mt.type,ht=0===at?mt.minX:mt.minY,Et=0===at?mt.maxX:mt.maxY;if(ht>=Ne&&Et<Je)it.push(mt);else if(!(Et<Ne||ht>=Je)){var gt=[];if("Point"===At||"MultiPoint"===At)De(Lt,gt,Ne,Je,at);else if("LineString"===At)fe(Lt,gt,Ne,Je,at,!1,Ke.lineMetrics);else if("MultiLineString"===At)be(Lt,gt,Ne,Je,at,!1);else if("Polygon"===At)be(Lt,gt,Ne,Je,at,!0);else if("MultiPolygon"===At)for(var kt=0;kt<Lt.length;kt++){var It=[];be(Lt[kt],It,Ne,Je,at,!0),It.length&&gt.push(It)}if(gt.length){if(Ke.lineMetrics&&"LineString"===At){for(kt=0;kt<gt.length;kt++)it.push(Te(mt.id,At,gt[kt],mt.tags));continue}"LineString"!==At&&"MultiLineString"!==At||(1===gt.length?(At="LineString",gt=gt[0]):At="MultiLineString"),"Point"!==At&&"MultiPoint"!==At||(At=3===gt.length?"Point":"MultiPoint"),it.push(Te(mt.id,At,gt,mt.tags))}}}return it.length?it:null}function De(Ye,Ze,Ne,Je,at){for(var Se=0;Se<Ye.length;Se+=3){var ze=Ye[Se+at];ze>=Ne&&ze<=Je&&(Ze.push(Ye[Se]),Ze.push(Ye[Se+1]),Ze.push(Ye[Se+2]))}}function fe(Ye,Ze,Ne,Je,at,Se,ze){for(var Ke,it,ct=ge(Ye),mt=0===at?He:Ve,Lt=Ye.start,At=0;At<Ye.length-3;At+=3){var ht=Ye[At],Et=Ye[At+1],gt=Ye[At+2],kt=Ye[At+3],It=Ye[At+4],Ut=0===at?ht:Et,Nt=0===at?kt:It,qt=!1;ze&&(Ke=Math.sqrt(Math.pow(ht-kt,2)+Math.pow(Et-It,2))),Ut<Ne?Nt>Ne&&(it=mt(ct,ht,Et,kt,It,Ne),ze&&(ct.start=Lt+Ke*it)):Ut>Je?Nt<Je&&(it=mt(ct,ht,Et,kt,It,Je),ze&&(ct.start=Lt+Ke*it)):Ie(ct,ht,Et,gt),Nt<Ne&&Ut>=Ne&&(it=mt(ct,ht,Et,kt,It,Ne),qt=!0),Nt>Je&&Ut<=Je&&(it=mt(ct,ht,Et,kt,It,Je),qt=!0),!Se&&qt&&(ze&&(ct.end=Lt+Ke*it),Ze.push(ct),ct=ge(Ye)),ze&&(Lt+=Ke)}var Xt=Ye.length-3;ht=Ye[Xt],Et=Ye[Xt+1],gt=Ye[Xt+2],(Ut=0===at?ht:Et)>=Ne&&Ut<=Je&&Ie(ct,ht,Et,gt),Xt=ct.length-3,Se&&Xt>=3&&(ct[Xt]!==ct[0]||ct[Xt+1]!==ct[1])&&Ie(ct,ct[0],ct[1],ct[2]),ct.length&&Ze.push(ct)}function ge(Ye){var Ze=[];return Ze.size=Ye.size,Ze.start=Ye.start,Ze.end=Ye.end,Ze}function be(Ye,Ze,Ne,Je,at,Se){for(var ze=0;ze<Ye.length;ze++)fe(Ye[ze],Ze,Ne,Je,at,Se,!1)}function Ie(Ye,Ze,Ne,Je){Ye.push(Ze),Ye.push(Ne),Ye.push(Je)}function He(Ye,Ze,Ne,Je,at,Se){var ze=(Se-Ze)/(Je-Ze);return Ye.push(Se),Ye.push(Ne+(at-Ne)*ze),Ye.push(1),ze}function Ve(Ye,Ze,Ne,Je,at,Se){var ze=(Se-Ne)/(at-Ne);return Ye.push(Ze+(Je-Ze)*ze),Ye.push(Se),Ye.push(1),ze}function tt(Ye,Ze){for(var Ne=[],Je=0;Je<Ye.length;Je++){var at,Se=Ye[Je],ze=Se.type;if("Point"===ze||"MultiPoint"===ze||"LineString"===ze)at=nt(Se.geometry,Ze);else if("MultiLineString"===ze||"Polygon"===ze){at=[];for(var Ke=0;Ke<Se.geometry.length;Ke++)at.push(nt(Se.geometry[Ke],Ze))}else if("MultiPolygon"===ze)for(at=[],Ke=0;Ke<Se.geometry.length;Ke++){for(var it=[],ct=0;ct<Se.geometry[Ke].length;ct++)it.push(nt(Se.geometry[Ke][ct],Ze));at.push(it)}Ne.push(Te(Se.id,ze,at,Se.tags))}return Ne}function nt(Ye,Ze){var Ne=[];Ne.size=Ye.size,void 0!==Ye.start&&(Ne.start=Ye.start,Ne.end=Ye.end);for(var Je=0;Je<Ye.length;Je+=3)Ne.push(Ye[Je]+Ze,Ye[Je+1],Ye[Je+2]);return Ne}function st(Ye,Ze){if(Ye.transformed)return Ye;var Ne,Je,at,Se=1<<Ye.z,ze=Ye.x,Ke=Ye.y;for(Ne=0;Ne<Ye.features.length;Ne++){var it=Ye.features[Ne],ct=it.geometry,mt=it.type;if(it.geometry=[],1===mt)for(Je=0;Je<ct.length;Je+=2)it.geometry.push(dt(ct[Je],ct[Je+1],Ze,Se,ze,Ke));else for(Je=0;Je<ct.length;Je++){var Lt=[];for(at=0;at<ct[Je].length;at+=2)Lt.push(dt(ct[Je][at],ct[Je][at+1],Ze,Se,ze,Ke));it.geometry.push(Lt)}}return Ye.transformed=!0,Ye}function dt(Ye,Ze,Ne,Je,at,Se){return[Math.round(Ne*(Ye*Je-at)),Math.round(Ne*(Ze*Je-Se))]}function wt(Ye,Ze,Ne,Je,at){for(var Se=Ze===at.maxZoom?0:at.tolerance/((1<<Ze)*at.extent),ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:Je,z:Ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<Ye.length;Ke++){ze.numFeatures++,_t(ze,Ye[Ke],Se,at);var it=Ye[Ke].minX,ct=Ye[Ke].minY,mt=Ye[Ke].maxX,Lt=Ye[Ke].maxY;it<ze.minX&&(ze.minX=it),ct<ze.minY&&(ze.minY=ct),mt>ze.maxX&&(ze.maxX=mt),Lt>ze.maxY&&(ze.maxY=Lt)}return ze}function _t(Ye,Ze,Ne,Je){var at=Ze.geometry,Se=Ze.type,ze=[];if("Point"===Se||"MultiPoint"===Se)for(var Ke=0;Ke<at.length;Ke+=3)ze.push(at[Ke]),ze.push(at[Ke+1]),Ye.numPoints++,Ye.numSimplified++;else if("LineString"===Se)pt(ze,at,Ye,Ne,!1,!1);else if("MultiLineString"===Se||"Polygon"===Se)for(Ke=0;Ke<at.length;Ke++)pt(ze,at[Ke],Ye,Ne,"Polygon"===Se,0===Ke);else if("MultiPolygon"===Se)for(var it=0;it<at.length;it++){var ct=at[it];for(Ke=0;Ke<ct.length;Ke++)pt(ze,ct[Ke],Ye,Ne,!0,0===Ke)}if(ze.length){var mt=Ze.tags||null;if("LineString"===Se&&Je.lineMetrics){for(var Lt in mt={},Ze.tags)mt[Lt]=Ze.tags[Lt];mt.mapbox_clip_start=at.start/at.size,mt.mapbox_clip_end=at.end/at.size}var At={geometry:ze,type:"Polygon"===Se||"MultiPolygon"===Se?3:"LineString"===Se||"MultiLineString"===Se?2:1,tags:mt};null!==Ze.id&&(At.id=Ze.id),Ye.features.push(At)}}function pt(Ye,Ze,Ne,Je,at,Se){var ze=Je*Je;if(Je>0&&Ze.size<(at?ze:Je))Ne.numPoints+=Ze.length/3;else{for(var Ke=[],it=0;it<Ze.length;it+=3)(0===Je||Ze[it+2]>ze)&&(Ne.numSimplified++,Ke.push(Ze[it]),Ke.push(Ze[it+1])),Ne.numPoints++;at&&function(ct,mt){for(var Lt=0,At=0,ht=ct.length,Et=ht-2;At<ht;Et=At,At+=2)Lt+=(ct[At]-ct[Et])*(ct[At+1]+ct[Et+1]);if(Lt>0===mt)for(At=0,ht=ct.length;At<ht/2;At+=2){var gt=ct[At],kt=ct[At+1];ct[At]=ct[ht-2-At],ct[At+1]=ct[ht-1-At],ct[ht-2-At]=gt,ct[ht-1-At]=kt}}(Ke,Se),Ye.push(Ke)}}function Pt(Ye,Ze){var Ne=(Ze=this.options=function(at,Se){for(var ze in Se)at[ze]=Se[ze];return at}(Object.create(this.options),Ze)).debug;if(Ne&&console.time("preprocess data"),Ze.maxZoom<0||Ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ze.promoteId&&Ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var at,Se,ze,Ke,it,ct,Je=function(at,Se){var ze=[];if("FeatureCollection"===at.type)for(var Ke=0;Ke<at.features.length;Ke++)K(ze,at.features[Ke],Se,Ke);else K(ze,"Feature"===at.type?at:{geometry:at},Se);return ze}(Ye,Ze);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ze.indexMaxZoom,Ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(at=Je,Se=Ze,ze=Se.buffer/Se.extent,Ke=at,it=Pe(at,1,-1-ze,ze,0,-1,2,Se),ct=Pe(at,1,1-ze,2+ze,0,-1,2,Se),(it||ct)&&(Ke=Pe(at,1,-ze,1+ze,0,-1,2,Se)||[],it&&(Ke=tt(it,1).concat(Ke)),ct&&(Ke=Ke.concat(tt(ct,-1)))),Je=Ke).length&&this.splitTile(Je,0,0,0),Ne&&(Je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function St(Ye,Ze,Ne){return 32*((1<<Ye)*Ne+Ze)+Ye}function Ot(Ye,Ze){var Ne=Ye.tileID.canonical;if(!this._geoJSONIndex)return Ze(null,null);var Je=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!Je)return Ze(null,null);var at=new g(Je.features),Se=u(at);0===Se.byteOffset&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),Ze(null,{vectorTile:at,rawData:Se.buffer})}ne.prototype.load=function(Ye){var Ze=this.options,Ne=Ze.log,Je=Ze.minZoom,at=Ze.maxZoom,Se=Ze.nodeSize;Ne&&console.time("total time");var ze="prepare "+Ye.length+" points";Ne&&console.time(ze),this.points=Ye;for(var Ke=[],it=0;it<Ye.length;it++)Ye[it].geometry&&Ke.push(ae(Ye[it],it));this.trees[at+1]=new X(Ke,ue,Ee,Se,Float32Array),Ne&&console.timeEnd(ze);for(var ct=at;ct>=Je;ct--){var mt=+Date.now();Ke=this._cluster(Ke,ct),this.trees[ct]=new X(Ke,ue,Ee,Se,Float32Array),Ne&&console.log("z%d: %d clusters in %dms",ct,Ke.length,+Date.now()-mt)}return Ne&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(Ye,Ze){var Ne=((Ye[0]+180)%360+360)%360-180,Je=Math.max(-90,Math.min(90,Ye[1])),at=180===Ye[2]?180:((Ye[2]+180)%360+360)%360-180,Se=Math.max(-90,Math.min(90,Ye[3]));if(Ye[2]-Ye[0]>=360)Ne=-180,at=180;else if(Ne>at){var ze=this.getClusters([Ne,Je,180,Se],Ze),Ke=this.getClusters([-180,Je,at,Se],Ze);return ze.concat(Ke)}for(var it=this.trees[this._limitZoom(Ze)],ct=[],mt=0,Lt=it.range(ke(Ne),me(Se),ke(at),me(Je));mt<Lt.length;mt+=1){var ht=it.points[Lt[mt]];ct.push(ht.numPoints?se(ht):this.points[ht.index])}return ct},ne.prototype.getChildren=function(Ye){var Ze=this._getOriginId(Ye),Ne=this._getOriginZoom(Ye),Je="No cluster with the specified id.",at=this.trees[Ne];if(!at)throw new Error(Je);var Se=at.points[Ze];if(!Se)throw new Error(Je);for(var ze=this.options.radius/(this.options.extent*Math.pow(2,Ne-1)),Ke=[],it=0,ct=at.within(Se.x,Se.y,ze);it<ct.length;it+=1){var Lt=at.points[ct[it]];Lt.parentId===Ye&&Ke.push(Lt.numPoints?se(Lt):this.points[Lt.index])}if(0===Ke.length)throw new Error(Je);return Ke},ne.prototype.getLeaves=function(Ye,Ze,Ne){var Je=[];return this._appendLeaves(Je,Ye,Ze=Ze||10,Ne=Ne||0,0),Je},ne.prototype.getTile=function(Ye,Ze,Ne){var Je=this.trees[this._limitZoom(Ye)],at=Math.pow(2,Ye),Se=this.options,Ke=Se.radius/Se.extent,it=(Ne-Ke)/at,ct=(Ne+1+Ke)/at,mt={features:[]};return this._addTileFeatures(Je.range((Ze-Ke)/at,it,(Ze+1+Ke)/at,ct),Je.points,Ze,Ne,at,mt),0===Ze&&this._addTileFeatures(Je.range(1-Ke/at,it,1,ct),Je.points,at,Ne,at,mt),Ze===at-1&&this._addTileFeatures(Je.range(0,it,Ke/at,ct),Je.points,-1,Ne,at,mt),mt.features.length?mt:null},ne.prototype.getClusterExpansionZoom=function(Ye){for(var Ze=this._getOriginZoom(Ye)-1;Ze<=this.options.maxZoom;){var Ne=this.getChildren(Ye);if(Ze++,1!==Ne.length)break;Ye=Ne[0].properties.cluster_id}return Ze},ne.prototype._appendLeaves=function(Ye,Ze,Ne,Je,at){for(var Se=0,ze=this.getChildren(Ze);Se<ze.length;Se+=1){var Ke=ze[Se],it=Ke.properties;if(it&&it.cluster?at+it.point_count<=Je?at+=it.point_count:at=this._appendLeaves(Ye,it.cluster_id,Ne,Je,at):at<Je?at++:Ye.push(Ke),Ye.length===Ne)break}return at},ne.prototype._addTileFeatures=function(Ye,Ze,Ne,Je,at,Se){for(var ze=0,Ke=Ye;ze<Ke.length;ze+=1){var it=Ze[Ke[ze]],ct=it.numPoints,mt={type:1,geometry:[[Math.round(this.options.extent*(it.x*at-Ne)),Math.round(this.options.extent*(it.y*at-Je))]],tags:ct?pe(it):this.points[it.index].properties},Lt=void 0;ct?Lt=it.id:this.options.generateId?Lt=it.index:this.points[it.index].id&&(Lt=this.points[it.index].id),void 0!==Lt&&(mt.id=Lt),Se.features.push(mt)}},ne.prototype._limitZoom=function(Ye){return Math.max(this.options.minZoom,Math.min(Ye,this.options.maxZoom+1))},ne.prototype._cluster=function(Ye,Ze){for(var Ne=[],Je=this.options,ze=Je.reduce,Ke=Je.radius/(Je.extent*Math.pow(2,Ze)),it=0;it<Ye.length;it++){var ct=Ye[it];if(!(ct.zoom<=Ze)){ct.zoom=Ze;for(var mt=this.trees[Ze+1],Lt=mt.within(ct.x,ct.y,Ke),At=ct.numPoints||1,ht=ct.x*At,Et=ct.y*At,gt=ze&&At>1?this._map(ct,!0):null,kt=(it<<5)+(Ze+1)+this.points.length,It=0,Ut=Lt;It<Ut.length;It+=1){var qt=mt.points[Ut[It]];if(!(qt.zoom<=Ze)){qt.zoom=Ze;var Xt=qt.numPoints||1;ht+=qt.x*Xt,Et+=qt.y*Xt,At+=Xt,qt.parentId=kt,ze&&(gt||(gt=this._map(ct,!0)),ze(gt,this._map(qt)))}}1===At?Ne.push(ct):(ct.parentId=kt,Ne.push(re(ht/At,Et/At,kt,At,gt)))}}return Ne},ne.prototype._getOriginId=function(Ye){return Ye-this.points.length>>5},ne.prototype._getOriginZoom=function(Ye){return(Ye-this.points.length)%32},ne.prototype._map=function(Ye,Ze){if(Ye.numPoints)return Ze?le({},Ye.properties):Ye.properties;var Ne=this.points[Ye.index].properties,Je=this.options.map(Ne);return Ze&&Je===Ne?le({},Je):Je},Pt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Pt.prototype.splitTile=function(Ye,Ze,Ne,Je,at,Se,ze){for(var Ke=[Ye,Ze,Ne,Je],it=this.options,ct=it.debug;Ke.length;){Je=Ke.pop(),Ne=Ke.pop(),Ze=Ke.pop(),Ye=Ke.pop();var mt=1<<Ze,Lt=St(Ze,Ne,Je),At=this.tiles[Lt];if(!At&&(ct>1&&console.time("creation"),At=this.tiles[Lt]=wt(Ye,Ze,Ne,Je,it),this.tileCoords.push({z:Ze,x:Ne,y:Je}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ze,Ne,Je,At.numFeatures,At.numPoints,At.numSimplified),console.timeEnd("creation"));var ht="z"+Ze;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(At.source=Ye,at){if(Ze===it.maxZoom||Ze===at)continue;var Et=1<<at-Ze;if(Ne!==Math.floor(Se/Et)||Je!==Math.floor(ze/Et))continue}else if(Ze===it.indexMaxZoom||At.numPoints<=it.indexMaxPoints)continue;if(At.source=null,0!==Ye.length){ct>1&&console.time("clipping");var gt,kt,It,Ut,Nt,qt,Xt=.5*it.buffer/it.extent,Kt=.5-Xt,fn=.5+Xt,nn=1+Xt;gt=kt=It=Ut=null,Nt=Pe(Ye,mt,Ne-Xt,Ne+fn,0,At.minX,At.maxX,it),qt=Pe(Ye,mt,Ne+Kt,Ne+nn,0,At.minX,At.maxX,it),Ye=null,Nt&&(gt=Pe(Nt,mt,Je-Xt,Je+fn,1,At.minY,At.maxY,it),kt=Pe(Nt,mt,Je+Kt,Je+nn,1,At.minY,At.maxY,it),Nt=null),qt&&(It=Pe(qt,mt,Je-Xt,Je+fn,1,At.minY,At.maxY,it),Ut=Pe(qt,mt,Je+Kt,Je+nn,1,At.minY,At.maxY,it),qt=null),ct>1&&console.timeEnd("clipping"),Ke.push(gt||[],Ze+1,2*Ne,2*Je),Ke.push(kt||[],Ze+1,2*Ne,2*Je+1),Ke.push(It||[],Ze+1,2*Ne+1,2*Je),Ke.push(Ut||[],Ze+1,2*Ne+1,2*Je+1)}}},Pt.prototype.getTile=function(Ye,Ze,Ne){var Je=this.options,at=Je.extent,Se=Je.debug;if(Ye<0||Ye>24)return null;var ze=1<<Ye,Ke=St(Ye,Ze=(Ze%ze+ze)%ze,Ne);if(this.tiles[Ke])return st(this.tiles[Ke],at);Se>1&&console.log("drilling down to z%d-%d-%d",Ye,Ze,Ne);for(var it,ct=Ye,mt=Ze,Lt=Ne;!it&&ct>0;)ct--,mt=Math.floor(mt/2),Lt=Math.floor(Lt/2),it=this.tiles[St(ct,mt,Lt)];return it&&it.source?(Se>1&&console.log("found parent tile z%d-%d-%d",ct,mt,Lt),Se>1&&console.time("drilling down"),this.splitTile(it.source,ct,mt,Lt,Ye,Ze,Ne),Se>1&&console.timeEnd("drilling down"),this.tiles[Ke]?st(this.tiles[Ke],at):null):null};var jt=function(Ye){function Ze(Ne,Je,at,Se){Ye.call(this,Ne,Je,at,Ot),Se&&(this.loadGeoJSON=Se)}return Ye&&(Ze.__proto__=Ye),(Ze.prototype=Object.create(Ye&&Ye.prototype)).constructor=Ze,Ze.prototype.loadData=function(Ne,Je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Je,this._pendingLoadDataParams=Ne,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ze.prototype._loadData=function(){var Ne=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Je=this._pendingCallback,at=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Se=!!(at&&at.request&&at.request.collectResourceTiming)&&new l.RequestPerformance(at.request);this.loadGeoJSON(at,function(ze,Ke){if(ze||!Ke)return Je(ze);if("object"!=typeof Ke)return Je(new Error("Input data given to '"+at.source+"' is not a valid GeoJSON object."));c(Ke,!0);try{Ne._geoJSONIndex=at.cluster?new ne(function(mt){var Lt=mt.superclusterOptions,At=mt.clusterProperties;if(!At||!Lt)return Lt;for(var ht={},Et={},gt={accumulated:null,zoom:0},kt={properties:null},It=Object.keys(At),Ut=0,Nt=It;Ut<Nt.length;Ut+=1){var qt=Nt[Ut],Xt=At[qt],Kt=Xt[0],nn=l.createExpression(Xt[1]),xn=l.createExpression("string"==typeof Kt?[Kt,["accumulated"],["get",qt]]:Kt);ht[qt]=nn.value,Et[qt]=xn.value}return Lt.map=function(jn){kt.properties=jn;for(var mn={},en=0,vn=It;en<vn.length;en+=1){var on=vn[en];mn[on]=ht[on].evaluate(gt,kt)}return mn},Lt.reduce=function(jn,mn){kt.properties=mn;for(var en=0,vn=It;en<vn.length;en+=1){var on=vn[en];gt.accumulated=jn[on],jn[on]=Et[on].evaluate(gt,kt)}},Lt}(at)).load(Ke.features):new Pt(mt=Ke,at.geojsonVtOptions)}catch(mt){return Je(mt)}var mt;Ne.loaded={};var it={};if(Se){var ct=Se.finish();ct&&(it.resourceTiming={},it.resourceTiming[at.source]=JSON.parse(JSON.stringify(ct)))}Je(null,it)})}},Ze.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ze.prototype.reloadTile=function(Ne,Je){var at=this.loaded;return at&&at[Ne.uid]?Ye.prototype.reloadTile.call(this,Ne,Je):this.loadTile(Ne,Je)},Ze.prototype.loadGeoJSON=function(Ne,Je){if(Ne.request)l.getJSON(Ne.request,Je);else{if("string"!=typeof Ne.data)return Je(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));try{return Je(null,JSON.parse(Ne.data))}catch{return Je(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."))}}},Ze.prototype.removeSource=function(Ne,Je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Je()},Ze.prototype.getClusterExpansionZoom=function(Ne,Je){try{Je(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(at){Je(at)}},Ze.prototype.getClusterChildren=function(Ne,Je){try{Je(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(at){Je(at)}},Ze.prototype.getClusterLeaves=function(Ne,Je){try{Je(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(at){Je(at)}},Ze}(n),Dt=function(Ye){var Ze=this;this.self=Ye,this.actor=new l.Actor(Ye,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:jt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ne,Je){if(Ze.workerSourceTypes[Ne])throw new Error('Worker source with name "'+Ne+'" already registered.');Ze.workerSourceTypes[Ne]=Je},this.self.registerRTLTextPlugin=function(Ne){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Ne.applyArabicShaping,l.plugin.processBidirectionalText=Ne.processBidirectionalText,l.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}};return Dt.prototype.setReferrer=function(Ye,Ze){this.referrer=Ze},Dt.prototype.setImages=function(Ye,Ze,Ne){for(var Je in this.availableImages[Ye]=Ze,this.workerSources[Ye]){var at=this.workerSources[Ye][Je];for(var Se in at)at[Se].availableImages=Ze}Ne()},Dt.prototype.setLayers=function(Ye,Ze,Ne){this.getLayerIndex(Ye).replace(Ze),Ne()},Dt.prototype.updateLayers=function(Ye,Ze,Ne){this.getLayerIndex(Ye).update(Ze.layers,Ze.removedIds),Ne()},Dt.prototype.loadTile=function(Ye,Ze,Ne){this.getWorkerSource(Ye,Ze.type,Ze.source).loadTile(Ze,Ne)},Dt.prototype.loadDEMTile=function(Ye,Ze,Ne){this.getDEMWorkerSource(Ye,Ze.source).loadTile(Ze,Ne)},Dt.prototype.reloadTile=function(Ye,Ze,Ne){this.getWorkerSource(Ye,Ze.type,Ze.source).reloadTile(Ze,Ne)},Dt.prototype.abortTile=function(Ye,Ze,Ne){this.getWorkerSource(Ye,Ze.type,Ze.source).abortTile(Ze,Ne)},Dt.prototype.removeTile=function(Ye,Ze,Ne){this.getWorkerSource(Ye,Ze.type,Ze.source).removeTile(Ze,Ne)},Dt.prototype.removeDEMTile=function(Ye,Ze){this.getDEMWorkerSource(Ye,Ze.source).removeTile(Ze)},Dt.prototype.removeSource=function(Ye,Ze,Ne){if(this.workerSources[Ye]&&this.workerSources[Ye][Ze.type]&&this.workerSources[Ye][Ze.type][Ze.source]){var Je=this.workerSources[Ye][Ze.type][Ze.source];delete this.workerSources[Ye][Ze.type][Ze.source],void 0!==Je.removeSource?Je.removeSource(Ze,Ne):Ne()}},Dt.prototype.loadWorkerSource=function(Ye,Ze,Ne){try{this.self.importScripts(Ze.url),Ne()}catch(Je){Ne(Je.toString())}},Dt.prototype.syncRTLPluginState=function(Ye,Ze,Ne){try{l.plugin.setState(Ze);var Je=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&null!=Je){this.self.importScripts(Je);var at=l.plugin.isParsed();Ne(at?void 0:new Error("RTL Text Plugin failed to import scripts from "+Je),at)}}catch(Se){Ne(Se.toString())}},Dt.prototype.getAvailableImages=function(Ye){var Ze=this.availableImages[Ye];return Ze||(Ze=[]),Ze},Dt.prototype.getLayerIndex=function(Ye){var Ze=this.layerIndexes[Ye];return Ze||(Ze=this.layerIndexes[Ye]=new p),Ze},Dt.prototype.getWorkerSource=function(Ye,Ze,Ne){var Je=this;return this.workerSources[Ye]||(this.workerSources[Ye]={}),this.workerSources[Ye][Ze]||(this.workerSources[Ye][Ze]={}),this.workerSources[Ye][Ze][Ne]||(this.workerSources[Ye][Ze][Ne]=new this.workerSourceTypes[Ze]({send:function(Se,ze,Ke){Je.actor.send(Se,ze,Ke,Ye)}},this.getLayerIndex(Ye),this.getAvailableImages(Ye))),this.workerSources[Ye][Ze][Ne]},Dt.prototype.getDEMWorkerSource=function(Ye,Ze){return this.demWorkerSources[Ye]||(this.demWorkerSources[Ye]={}),this.demWorkerSources[Ye][Ze]||(this.demWorkerSources[Ye][Ze]=new i),this.demWorkerSources[Ye][Ze]},Dt.prototype.enforceCacheSizeLimit=function(Ye,Ze){l.enforceCacheSizeLimit(Ze)},typeof WorkerGlobalScope<"u"&&void 0!==l.window&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new Dt(l.window)),Dt}),k(0,function(l){var T=l.createCommonjsModule(function(F){function W(ve){return!G(ve)}function G(ve){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Be,qe,et=new Blob([""],{type:"text/javascript"}),vt=URL.createObjectURL(et);try{qe=new Worker(vt),Be=!0}catch{Be=!1}return qe&&qe.terminate(),URL.revokeObjectURL(vt),Be}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Be=document.createElement("canvas");Be.width=Be.height=1;var qe=Be.getContext("2d");if(!qe)return!1;var et=qe.getImageData(0,0,1,1);return et&&et.width===Be.width}()?(void 0===te[Ce=ve&&ve.failIfMajorPerformanceCaveat]&&(te[Ce]=function(Be){var vt,xt,ee,qe=(vt=Be,xt=document.createElement("canvas"),(ee=Object.create(W.webGLContextAttributes)).failIfMajorPerformanceCaveat=vt,xt.probablySupportsContext?xt.probablySupportsContext("webgl",ee)||xt.probablySupportsContext("experimental-webgl",ee):xt.supportsContext?xt.supportsContext("webgl",ee)||xt.supportsContext("experimental-webgl",ee):xt.getContext("webgl",ee)||xt.getContext("experimental-webgl",ee));if(!qe)return!1;var et=qe.createShader(qe.VERTEX_SHADER);return!(!et||qe.isContextLost())&&(qe.shaderSource(et,"void main() {}"),qe.compileShader(et),!0===qe.getShaderParameter(et,qe.COMPILE_STATUS))}(Ce)),te[Ce]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Ce}F.exports?F.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=G);var te={};W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(F,W,G){var te=l.window.document.createElement(F);return void 0!==W&&(te.className=W),G&&G.appendChild(te),te},createNS:function(F,W){return l.window.document.createElementNS(F,W)}},p=l.window.document.documentElement.style;function s(F){if(!p)return F[0];for(var W=0;W<F.length;W++)if(F[W]in p)return F[W];return F[0]}var e,o=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){p&&o&&(e=p[o],p[o]="none")},x.enableDrag=function(){p&&o&&(p[o]=e)};var r=s(["transform","WebkitTransform"]);x.setTransform=function(F,W){F.style[r]=W};var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",a,a),l.window.removeEventListener("test",a,a)}catch{n=!1}x.addEventListener=function(F,W,G,te){void 0===te&&(te={}),F.addEventListener(W,G,"passive"in te&&n?te:te.capture)},x.removeEventListener=function(F,W,G,te){void 0===te&&(te={}),F.removeEventListener(W,G,"passive"in te&&n?te:te.capture)};var i=function(F){F.preventDefault(),F.stopPropagation(),l.window.removeEventListener("click",i,!0)};function c(F){var W=F.userImage;return!!(W&&W.render&&W.render())&&(F.data.replace(new Uint8Array(W.data.buffer)),!0)}x.suppressClick=function(){l.window.addEventListener("click",i,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",i,!0)},0)},x.mousePos=function(F,W){var G=F.getBoundingClientRect();return new l.Point(W.clientX-G.left-F.clientLeft,W.clientY-G.top-F.clientTop)},x.touchPos=function(F,W){for(var G=F.getBoundingClientRect(),te=[],ve=0;ve<W.length;ve++)te.push(new l.Point(W[ve].clientX-G.left-F.clientLeft,W[ve].clientY-G.top-F.clientTop));return te},x.mouseButton=function(F){return void 0!==l.window.InstallTrigger&&2===F.button&&F.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:F.button},x.remove=function(F){F.parentNode&&F.parentNode.removeChild(F)};var h=function(F){function W(){F.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(G){if(this.loaded!==G&&(this.loaded=G,G)){for(var te=0,ve=this.requestors;te<ve.length;te+=1){var Ce=ve[te];this._notify(Ce.ids,Ce.callback)}this.requestors=[]}},W.prototype.getImage=function(G){return this.images[G]},W.prototype.addImage=function(G,te){this._validate(G,te)&&(this.images[G]=te)},W.prototype._validate=function(G,te){var ve=!0;return this._validateStretch(te.stretchX,te.data&&te.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchX" value'))),ve=!1),this._validateStretch(te.stretchY,te.data&&te.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchY" value'))),ve=!1),this._validateContent(te.content,te)||(this.fire(new l.ErrorEvent(new Error('Image "'+G+'" has invalid "content" value'))),ve=!1),ve},W.prototype._validateStretch=function(G,te){if(!G)return!0;for(var ve=0,Ce=0,Be=G;Ce<Be.length;Ce+=1){var qe=Be[Ce];if(qe[0]<ve||qe[1]<qe[0]||te<qe[1])return!1;ve=qe[1]}return!0},W.prototype._validateContent=function(G,te){return!(G&&(4!==G.length||G[0]<0||te.data.width<G[0]||G[1]<0||te.data.height<G[1]||G[2]<0||te.data.width<G[2]||G[3]<0||te.data.height<G[3]||G[2]<G[0]||G[3]<G[1]))},W.prototype.updateImage=function(G,te){te.version=this.images[G].version+1,this.images[G]=te,this.updatedImages[G]=!0},W.prototype.removeImage=function(G){var te=this.images[G];delete this.images[G],delete this.patterns[G],te.userImage&&te.userImage.onRemove&&te.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(G,te){var ve=!0;if(!this.isLoaded())for(var Ce=0,Be=G;Ce<Be.length;Ce+=1)this.images[Be[Ce]]||(ve=!1);this.isLoaded()||ve?this._notify(G,te):this.requestors.push({ids:G,callback:te})},W.prototype._notify=function(G,te){for(var ve={},Ce=0,Be=G;Ce<Be.length;Ce+=1){var qe=Be[Ce];this.images[qe]||this.fire(new l.Event("styleimagemissing",{id:qe}));var et=this.images[qe];et?ve[qe]={data:et.data.clone(),pixelRatio:et.pixelRatio,sdf:et.sdf,version:et.version,stretchX:et.stretchX,stretchY:et.stretchY,content:et.content,hasRenderCallback:Boolean(et.userImage&&et.userImage.render)}:l.warnOnce('Image "'+qe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}te(null,ve)},W.prototype.getPixelSize=function(){var G=this.atlasImage;return{width:G.width,height:G.height}},W.prototype.getPattern=function(G){var te=this.patterns[G],ve=this.getImage(G);if(!ve)return null;if(te&&te.position.version===ve.version)return te.position;if(te)te.position.version=ve.version;else{var Ce={w:ve.data.width+2,h:ve.data.height+2,x:0,y:0},Be=new l.ImagePosition(Ce,ve);this.patterns[G]={bin:Ce,position:Be}}return this._updatePatternAtlas(),this.patterns[G].position},W.prototype.bind=function(G){var te=G.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(G,this.atlasImage,te.RGBA),this.atlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var G=[];for(var te in this.patterns)G.push(this.patterns[te].bin);var ve=l.potpack(G),Ce=ve.w,Be=ve.h,qe=this.atlasImage;for(var et in qe.resize({width:Ce||1,height:Be||1}),this.patterns){var vt=this.patterns[et].bin,xt=vt.x+1,ee=vt.y+1,ce=this.images[et].data,Ae=ce.width,Oe=ce.height;l.RGBAImage.copy(ce,qe,{x:0,y:0},{x:xt,y:ee},{width:Ae,height:Oe}),l.RGBAImage.copy(ce,qe,{x:0,y:Oe-1},{x:xt,y:ee-1},{width:Ae,height:1}),l.RGBAImage.copy(ce,qe,{x:0,y:0},{x:xt,y:ee+Oe},{width:Ae,height:1}),l.RGBAImage.copy(ce,qe,{x:Ae-1,y:0},{x:xt-1,y:ee},{width:1,height:Oe}),l.RGBAImage.copy(ce,qe,{x:0,y:0},{x:xt+Ae,y:ee},{width:1,height:Oe})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(G){for(var te=0,ve=G;te<ve.length;te+=1){var Ce=ve[te];if(!this.callbackDispatchedThisFrame[Ce]){this.callbackDispatchedThisFrame[Ce]=!0;var Be=this.images[Ce];c(Be)&&this.updateImage(Ce,Be)}}},W}(l.Evented),f=g,b=g,v=1e20;function g(F,W,G,te,ve,Ce){this.fontSize=F||24,this.buffer=void 0===W?3:W,this.cutoff=te||.25,this.fontFamily=ve||"sans-serif",this.fontWeight=Ce||"normal",this.radius=G||8;var Be=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Be,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Be*Be),this.gridInner=new Float64Array(Be*Be),this.f=new Float64Array(Be),this.d=new Float64Array(Be),this.z=new Float64Array(Be+1),this.v=new Int16Array(Be),this.middle=Math.round(Be/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(F,W,G,te,ve,Ce,Be){for(var qe=0;qe<W;qe++){for(var et=0;et<G;et++)te[et]=F[et*W+qe];for(d(te,ve,Ce,Be,G),et=0;et<G;et++)F[et*W+qe]=ve[et]}for(et=0;et<G;et++){for(qe=0;qe<W;qe++)te[qe]=F[et*W+qe];for(d(te,ve,Ce,Be,W),qe=0;qe<W;qe++)F[et*W+qe]=Math.sqrt(ve[qe])}}function d(F,W,G,te,ve){G[0]=0,te[0]=-v,te[1]=+v;for(var Ce=1,Be=0;Ce<ve;Ce++){for(var qe=(F[Ce]+Ce*Ce-(F[G[Be]]+G[Be]*G[Be]))/(2*Ce-2*G[Be]);qe<=te[Be];)Be--,qe=(F[Ce]+Ce*Ce-(F[G[Be]]+G[Be]*G[Be]))/(2*Ce-2*G[Be]);G[++Be]=Ce,te[Be]=qe,te[Be+1]=+v}for(Ce=0,Be=0;Ce<ve;Ce++){for(;te[Be+1]<Ce;)Be++;W[Ce]=(Ce-G[Be])*(Ce-G[Be])+F[G[Be]]}}g.prototype.draw=function(F){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(F,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),G=new Uint8ClampedArray(this.size*this.size),te=0;te<this.size*this.size;te++){var ve=W.data[4*te+3]/255;this.gridOuter[te]=1===ve?0:0===ve?v:Math.pow(Math.max(0,.5-ve),2),this.gridInner[te]=1===ve?v:0===ve?0:Math.pow(Math.max(0,ve-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),te=0;te<this.size*this.size;te++)G[te]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[te]-this.gridInner[te])/this.radius+this.cutoff))));return G},f.default=b;var m=function(F,W){this.requestManager=F,this.localIdeographFontFamily=W,this.entries={}};m.prototype.setURL=function(F){this.url=F},m.prototype.getGlyphs=function(F,W){var G=this,te=[];for(var ve in F)for(var Ce=0,Be=F[ve];Ce<Be.length;Ce+=1)te.push({stack:ve,id:Be[Ce]});l.asyncAll(te,function(et,vt){var xt=et.stack,ee=et.id,ce=G.entries[xt];ce||(ce=G.entries[xt]={glyphs:{},requests:{},ranges:{}});var Ae=ce.glyphs[ee];if(void 0===Ae){if(Ae=G._tinySDF(ce,xt,ee))return ce.glyphs[ee]=Ae,void vt(null,{stack:xt,id:ee,glyph:Ae});var Oe=Math.floor(ee/256);if(256*Oe>65535)vt(new Error("glyphs > 65535 not supported"));else if(ce.ranges[Oe])vt(null,{stack:xt,id:ee,glyph:Ae});else{var Fe=ce.requests[Oe];Fe||(Fe=ce.requests[Oe]=[],m.loadGlyphRange(xt,Oe,G.url,G.requestManager,function(Ue,Ge){if(Ge){for(var Xe in Ge)G._doesCharSupportLocalGlyph(+Xe)||(ce.glyphs[+Xe]=Ge[+Xe]);ce.ranges[Oe]=!0}for(var rt=0,ut=Fe;rt<ut.length;rt+=1)(0,ut[rt])(Ue,Ge);delete ce.requests[Oe]})),Fe.push(function(Ue,Ge){Ue?vt(Ue):Ge&&vt(null,{stack:xt,id:ee,glyph:Ge[ee]||null})})}}else vt(null,{stack:xt,id:ee,glyph:Ae})},function(et,vt){if(et)W(et);else if(vt){for(var xt={},ee=0,ce=vt;ee<ce.length;ee+=1){var Ae=ce[ee],Oe=Ae.stack,Fe=Ae.id,Ue=Ae.glyph;(xt[Oe]||(xt[Oe]={}))[Fe]=Ue&&{id:Ue.id,bitmap:Ue.bitmap.clone(),metrics:Ue.metrics}}W(null,xt)}})},m.prototype._doesCharSupportLocalGlyph=function(F){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](F)||l.isChar["Hangul Syllables"](F)||l.isChar.Hiragana(F)||l.isChar.Katakana(F))},m.prototype._tinySDF=function(F,W,G){var te=this.localIdeographFontFamily;if(te&&this._doesCharSupportLocalGlyph(G)){var ve=F.tinySDF;if(!ve){var Ce="400";/bold/i.test(W)?Ce="900":/medium/i.test(W)?Ce="500":/light/i.test(W)&&(Ce="200"),ve=F.tinySDF=new m.TinySDF(24,3,8,.25,te,Ce)}return{id:G,bitmap:new l.AlphaImage({width:30,height:30},ve.draw(String.fromCharCode(G))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(F,W,G,te,ve){var Ce=256*W,Be=Ce+255,qe=te.transformRequest(te.normalizeGlyphsURL(G).replace("{fontstack}",F).replace("{range}",Ce+"-"+Be),l.ResourceType.Glyphs);l.getArrayBuffer(qe,function(et,vt){if(et)ve(et);else if(vt){for(var xt={},ee=0,ce=l.parseGlyphPBF(vt);ee<ce.length;ee+=1){var Ae=ce[ee];xt[Ae.id]=Ae}ve(null,xt)}})},m.TinySDF=f;var w=function(){this.specification=l.styleSpec.light.position};w.prototype.possiblyEvaluate=function(F,W){return l.sphericalToCartesian(F.expression.evaluate(W))},w.prototype.interpolate=function(F,W,G){return{x:l.number(F.x,W.x,G),y:l.number(F.y,W.y,G),z:l.number(F.z,W.z,G)}};var u=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new w,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),S="-transition",_=function(F){function W(G){F.call(this),this._transitionable=new l.Transitionable(u),this.setLight(G),this._transitioning=this._transitionable.untransitioned()}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(G,te){if(void 0===te&&(te={}),!this._validate(l.validateLight,G,te))for(var ve in G){var Ce=G[ve];l.endsWith(ve,S)?this._transitionable.setTransition(ve.slice(0,-S.length),Ce):this._transitionable.setValue(ve,Ce)}},W.prototype.updateTransitions=function(G){this._transitioning=this._transitionable.transitioned(G,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(G){this.properties=this._transitioning.possiblyEvaluate(G)},W.prototype._validate=function(G,te,ve){return(!ve||!1!==ve.validate)&&l.emitValidationErrors(this,G.call(l.validateStyle,l.extend({value:te,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},W}(l.Evented),E=function(F,W){this.width=F,this.height=W,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(F,W){var G=F.join(",")+String(W);return this.dashEntry[G]||(this.dashEntry[G]=this.addDash(F,W)),this.dashEntry[G]},E.prototype.getDashRanges=function(F,W,G){var te=[],ve=F.length%2==1?-F[F.length-1]*G:0,Ce=F[0]*G,Be=!0;te.push({left:ve,right:Ce,isDash:Be,zeroLength:0===F[0]});for(var qe=F[0],et=1;et<F.length;et++){var vt=F[et];ve=qe*G,Ce=(qe+=vt)*G,te.push({left:ve,right:Ce,isDash:Be=!Be,zeroLength:0===vt})}return te},E.prototype.addRoundDash=function(F,W,G){for(var te=W/2,ve=-G;ve<=G;ve++)for(var Be=this.width*(this.nextRow+G+ve),qe=0,et=F[qe],vt=0;vt<this.width;vt++){vt/et.right>1&&(et=F[++qe]);var xt=Math.abs(vt-et.left),ee=Math.abs(vt-et.right),ce=Math.min(xt,ee),Ae=void 0,Oe=ve/G*(te+1);if(et.isDash){var Fe=te-Math.abs(Oe);Ae=Math.sqrt(ce*ce+Fe*Fe)}else Ae=te-Math.sqrt(ce*ce+Oe*Oe);this.data[Be+vt]=Math.max(0,Math.min(255,Ae+128))}},E.prototype.addRegularDash=function(F){for(var W=F.length-1;W>=0;--W){var G=F[W],te=F[W+1];G.zeroLength?F.splice(W,1):te&&te.isDash===G.isDash&&(te.left=G.left,F.splice(W,1))}var ve=F[0],Ce=F[F.length-1];ve.isDash===Ce.isDash&&(ve.left=Ce.left-this.width,Ce.right=ve.right+this.width);for(var Be=this.width*this.nextRow,qe=0,et=F[qe],vt=0;vt<this.width;vt++){vt/et.right>1&&(et=F[++qe]);var xt=Math.abs(vt-et.left),ee=Math.abs(vt-et.right),ce=Math.min(xt,ee);this.data[Be+vt]=Math.max(0,Math.min(255,(et.isDash?ce:-ce)+128))}},E.prototype.addDash=function(F,W){var G=W?7:0,te=2*G+1;if(this.nextRow+te>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var ve=0,Ce=0;Ce<F.length;Ce++)ve+=F[Ce];if(0!==ve){var Be=this.width/ve,qe=this.getDashRanges(F,this.width,Be);W?this.addRoundDash(qe,Be,G):this.addRegularDash(qe)}var et={y:(this.nextRow+G+.5)/this.height,height:2*G/this.height,width:ve};return this.nextRow+=te,this.dirty=!0,et},E.prototype.bind=function(F){var W=F.gl;this.texture?(W.bindTexture(W.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,W.texSubImage2D(W.TEXTURE_2D,0,0,0,this.width,this.height,W.ALPHA,W.UNSIGNED_BYTE,this.data))):(this.texture=W.createTexture(),W.bindTexture(W.TEXTURE_2D,this.texture),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.REPEAT),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),W.texImage2D(W.TEXTURE_2D,0,W.ALPHA,this.width,this.height,0,W.ALPHA,W.UNSIGNED_BYTE,this.data))};var L=function F(W,G){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var te=this.workerPool.acquire(this.id),ve=0;ve<te.length;ve++){var Be=new F.Actor(te[ve],G,this.id);Be.name="Worker "+ve,this.actors.push(Be)}};function C(F,W,G){var te=function(ve,Ce){if(ve)return G(ve);if(Ce){var Be=l.pick(l.extend(Ce,F),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ce.vector_layers&&(Be.vectorLayers=Ce.vector_layers,Be.vectorLayerIds=Be.vectorLayers.map(function(qe){return qe.id})),Be.tiles=W.canonicalizeTileset(Be,F.url),G(null,Be)}};return F.url?l.getJSON(W.transformRequest(W.normalizeSourceURL(F.url),l.ResourceType.Source),te):l.browser.frame(function(){return te(null,F)})}L.prototype.broadcast=function(F,W,G){l.asyncAll(this.actors,function(te,ve){te.send(F,W,ve)},G=G||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(F){F.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=l.Actor;var P=function(F,W,G){this.bounds=l.LngLatBounds.convert(this.validateBounds(F)),this.minzoom=W||0,this.maxzoom=G||24};P.prototype.validateBounds=function(F){return Array.isArray(F)&&4===F.length?[Math.max(-180,F[0]),Math.max(-90,F[1]),Math.min(180,F[2]),Math.min(90,F[3])]:[-180,-90,180,90]},P.prototype.contains=function(F){var W=Math.pow(2,F.z),G=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*W),te=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*W),ve=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*W),Ce=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*W);return F.x>=G&&F.x<ve&&F.y>=te&&F.y<Ce};var z=function(F){function W(G,te,ve,Ce){if(F.call(this),this.id=G,this.dispatcher=ve,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(te,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},te),this._collectResourceTiming=te.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ce)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(te,ve){G._tileJSONRequest=null,G._loaded=!0,te?G.fire(new l.ErrorEvent(te)):ve&&(l.extend(G,ve),ve.bounds&&(G.tileBounds=new P(ve.bounds,G.minzoom,G.maxzoom)),l.postTurnstileEvent(ve.tiles,G.map._requestManager._customAccessToken),l.postMapLoadEvent(ve.tiles,G.map._getMapId(),G.map._requestManager._skuToken,G.map._requestManager._customAccessToken),G.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return l.extend({},this._options)},W.prototype.loadTile=function(G,te){var ve=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme)),Ce={request:this.map._requestManager.transformRequest(ve,l.ResourceType.Tile),uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,tileSize:this.tileSize*G.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Be(qe,et){return delete G.request,G.aborted?te(null):qe&&404!==qe.status?te(qe):(et&&et.resourceTiming&&(G.resourceTiming=et.resourceTiming),this.map._refreshExpiredTiles&&et&&G.setExpiryData(et),G.loadVectorData(et,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),te(null),void(G.reloadCallback&&(this.loadTile(G,G.reloadCallback),G.reloadCallback=null)))}Ce.request.collectResourceTiming=this._collectResourceTiming,G.actor&&"expired"!==G.state?"loading"===G.state?G.reloadCallback=te:G.request=G.actor.send("reloadTile",Ce,Be.bind(this)):(G.actor=this.dispatcher.getActor(),G.request=G.actor.send("loadTile",Ce,Be.bind(this)))},W.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.actor&&G.actor.send("abortTile",{uid:G.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(G){G.unloadVectorData(),G.actor&&G.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(l.Evented),j=function(F){function W(G,te,ve,Ce){F.call(this),this.id=G,this.dispatcher=ve,this.setEventedParent(Ce),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},te),l.extend(this,l.pick(te,["url","scheme","tileSize"]))}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(te,ve){G._tileJSONRequest=null,G._loaded=!0,te?G.fire(new l.ErrorEvent(te)):ve&&(l.extend(G,ve),ve.bounds&&(G.tileBounds=new P(ve.bounds,G.minzoom,G.maxzoom)),l.postTurnstileEvent(ve.tiles),l.postMapLoadEvent(ve.tiles,G.map._getMapId(),G.map._requestManager._skuToken),G.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return l.extend({},this._options)},W.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},W.prototype.loadTile=function(G,te){var ve=this,Ce=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);G.request=l.getImage(this.map._requestManager.transformRequest(Ce,l.ResourceType.Tile),function(Be,qe){if(delete G.request,G.aborted)G.state="unloaded",te(null);else if(Be)G.state="errored",te(Be);else if(qe){ve.map._refreshExpiredTiles&&G.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=ve.map.painter.context,vt=et.gl;G.texture=ve.map.painter.getTileTexture(qe.width),G.texture?G.texture.update(qe,{useMipmap:!0}):(G.texture=new l.Texture(et,qe,vt.RGBA,{useMipmap:!0}),G.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE,vt.LINEAR_MIPMAP_NEAREST),et.extTextureFilterAnisotropic&&vt.texParameterf(vt.TEXTURE_2D,et.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,et.extTextureFilterAnisotropicMax)),G.state="loaded",l.cacheEntryPossiblyAdded(ve.dispatcher),te(null)}})},W.prototype.abortTile=function(G,te){G.request&&(G.request.cancel(),delete G.request),te()},W.prototype.unloadTile=function(G,te){G.texture&&this.map.painter.saveTileTexture(G.texture),te()},W.prototype.hasTransition=function(){return!1},W}(l.Evented),R=function(F){function W(G,te,ve,Ce){F.call(this,G,te,ve,Ce),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},te),this.encoding=te.encoding||"mapbox"}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(G,te){var ve=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Ce(Be,qe){Be&&(G.state="errored",te(Be)),qe&&(G.dem=qe,G.needsHillshadePrepare=!0,G.state="loaded",te(null))}G.request=l.getImage(this.map._requestManager.transformRequest(ve,l.ResourceType.Tile),function(Be,qe){if(delete G.request,G.aborted)G.state="unloaded",te(null);else if(Be)G.state="errored",te(Be);else if(qe){this.map._refreshExpiredTiles&&G.setExpiryData(qe),delete qe.cacheControl,delete qe.expires;var et=l.window.ImageBitmap&&qe instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?qe:l.browser.getImageData(qe,1),vt={uid:G.uid,coord:G.tileID,source:this.id,rawImageData:et,encoding:this.encoding};G.actor&&"expired"!==G.state||(G.actor=this.dispatcher.getActor(),G.actor.send("loadDEMTile",vt,Ce.bind(this)))}}.bind(this)),G.neighboringTiles=this._getNeighboringTiles(G.tileID)},W.prototype._getNeighboringTiles=function(G){var te=G.canonical,ve=Math.pow(2,te.z),Ce=(te.x-1+ve)%ve,Be=0===te.x?G.wrap-1:G.wrap,qe=(te.x+1+ve)%ve,et=te.x+1===ve?G.wrap+1:G.wrap,vt={};return vt[new l.OverscaledTileID(G.overscaledZ,Be,te.z,Ce,te.y).key]={backfilled:!1},vt[new l.OverscaledTileID(G.overscaledZ,et,te.z,qe,te.y).key]={backfilled:!1},te.y>0&&(vt[new l.OverscaledTileID(G.overscaledZ,Be,te.z,Ce,te.y-1).key]={backfilled:!1},vt[new l.OverscaledTileID(G.overscaledZ,G.wrap,te.z,te.x,te.y-1).key]={backfilled:!1},vt[new l.OverscaledTileID(G.overscaledZ,et,te.z,qe,te.y-1).key]={backfilled:!1}),te.y+1<ve&&(vt[new l.OverscaledTileID(G.overscaledZ,Be,te.z,Ce,te.y+1).key]={backfilled:!1},vt[new l.OverscaledTileID(G.overscaledZ,G.wrap,te.z,te.x,te.y+1).key]={backfilled:!1},vt[new l.OverscaledTileID(G.overscaledZ,et,te.z,qe,te.y+1).key]={backfilled:!1}),vt},W.prototype.unloadTile=function(G){G.demTexture&&this.map.painter.saveTileTexture(G.demTexture),G.fbo&&(G.fbo.destroy(),delete G.fbo),G.dem&&delete G.dem,delete G.neighboringTiles,G.state="unloaded",G.actor&&G.actor.send("removeDEMTile",{uid:G.uid,source:this.id})},W}(j),V=function(F){function W(G,te,ve,Ce){F.call(this),this.id=G,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ve.getActor(),this.setEventedParent(Ce),this._data=te.data,this._options=l.extend({},te),this._collectResourceTiming=te.collectResourceTiming,this._resourceTiming=[],void 0!==te.maxzoom&&(this.maxzoom=te.maxzoom),te.type&&(this.type=te.type),te.attribution&&(this.attribution=te.attribution),this.promoteId=te.promoteId;var Be=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:te.cluster||!1,geojsonVtOptions:{buffer:(void 0!==te.buffer?te.buffer:128)*Be,tolerance:(void 0!==te.tolerance?te.tolerance:.375)*Be,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:te.lineMetrics||!1,generateId:te.generateId||!1},superclusterOptions:{maxZoom:void 0!==te.clusterMaxZoom?Math.min(te.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(te.clusterRadius||50)*Be,log:!1,generateId:te.generateId||!1},clusterProperties:te.clusterProperties},te.workerOptions)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.load=function(){var G=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(te){if(te)G.fire(new l.ErrorEvent(te));else{var ve={dataType:"source",sourceDataType:"metadata"};G._collectResourceTiming&&G._resourceTiming&&G._resourceTiming.length>0&&(ve.resourceTiming=G._resourceTiming,G._resourceTiming=[]),G.fire(new l.Event("data",ve))}})},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setData=function(G){var te=this;return this._data=G,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ve){if(ve)te.fire(new l.ErrorEvent(ve));else{var Ce={dataType:"source",sourceDataType:"content"};te._collectResourceTiming&&te._resourceTiming&&te._resourceTiming.length>0&&(Ce.resourceTiming=te._resourceTiming,te._resourceTiming=[]),te.fire(new l.Event("data",Ce))}}),this},W.prototype.getClusterExpansionZoom=function(G,te){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:G,source:this.id},te),this},W.prototype.getClusterChildren=function(G,te){return this.actor.send("geojson.getClusterChildren",{clusterId:G,source:this.id},te),this},W.prototype.getClusterLeaves=function(G,te,ve,Ce){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:G,limit:te,offset:ve},Ce),this},W.prototype._updateWorkerData=function(G){var te=this;this._loaded=!1;var ve=l.extend({},this.workerOptions),Ce=this._data;"string"==typeof Ce?(ve.request=this.map._requestManager.transformRequest(l.browser.resolveURL(Ce),l.ResourceType.Source),ve.request.collectResourceTiming=this._collectResourceTiming):ve.data=JSON.stringify(Ce),this.actor.send(this.type+".loadData",ve,function(Be,qe){te._removed||qe&&qe.abandoned||(te._loaded=!0,qe&&qe.resourceTiming&&qe.resourceTiming[te.id]&&(te._resourceTiming=qe.resourceTiming[te.id].slice(0)),te.actor.send(te.type+".coalesce",{source:ve.source},null),G(Be))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(G,te){var ve=this,Ce=G.actor?"reloadTile":"loadTile";G.actor=this.actor,G.request=this.actor.send(Ce,{type:this.type,uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(qe,et){return delete G.request,G.unloadVectorData(),G.aborted?te(null):qe?te(qe):(G.loadVectorData(et,ve.map.painter,"reloadTile"===Ce),te(null))})},W.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.aborted=!0},W.prototype.unloadTile=function(G){G.unloadVectorData(),this.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(l.Evented),D=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(F){function W(G,te,ve,Ce){F.call(this),this.id=G,this.dispatcher=ve,this.coordinates=te.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ce),this.options=te}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.load=function(G,te){var ve=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(Ce,Be){ve._loaded=!0,Ce?ve.fire(new l.ErrorEvent(Ce)):Be&&(ve.image=Be,G&&(ve.coordinates=G),te&&te(),ve._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(G){var te=this;return this.image&&G.url?(this.options.url=G.url,this.load(G.coordinates,function(){te.texture=null}),this):this},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(G){this.map=G,this.load()},W.prototype.setCoordinates=function(G){var te=this;this.coordinates=G;var ve=G.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(Be){for(var qe=1/0,et=1/0,vt=-1/0,xt=-1/0,ee=0,ce=Be;ee<ce.length;ee+=1){var Ae=ce[ee];qe=Math.min(qe,Ae.x),et=Math.min(et,Ae.y),vt=Math.max(vt,Ae.x),xt=Math.max(xt,Ae.y)}var Ue=Math.max(vt-qe,xt-et),Ge=Math.max(0,Math.floor(-Math.log(Ue)/Math.LN2)),Xe=Math.pow(2,Ge);return new l.CanonicalTileID(Ge,Math.floor((qe+vt)/2*Xe),Math.floor((et+xt)/2*Xe))}(ve),this.minzoom=this.maxzoom=this.tileID.z;var Ce=ve.map(function(Be){return te.tileID.getTilePoint(Be)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ce[0].x,Ce[0].y,0,0),this._boundsArray.emplaceBack(Ce[1].x,Ce[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(Ce[3].x,Ce[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(Ce[2].x,Ce[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var G=this.map.painter.context,te=G.gl;for(var ve in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(G,this.image,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this.tiles){var Ce=this.tiles[ve];"loaded"!==Ce.state&&(Ce.state="loaded",Ce.texture=this.texture)}}},W.prototype.loadTile=function(G,te){this.tileID&&this.tileID.equals(G.tileID.canonical)?(this.tiles[String(G.tileID.wrap)]=G,G.buckets={},te(null)):(G.state="errored",te(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(l.Evented),N=function(F){function W(G,te,ve,Ce){F.call(this,G,te,ve,Ce),this.roundZoom=!0,this.type="video",this.options=te}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.load=function(){var G=this;this._loaded=!1;var te=this.options;this.urls=[];for(var ve=0,Ce=te.urls;ve<Ce.length;ve+=1)this.urls.push(this.map._requestManager.transformRequest(Ce[ve],l.ResourceType.Source).url);l.getVideo(this.urls,function(qe,et){G._loaded=!0,qe?G.fire(new l.ErrorEvent(qe)):et&&(G.video=et,G.video.loop=!0,G.video.addEventListener("playing",function(){G.map.triggerRepaint()}),G.map&&G.video.play(),G._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(G){if(this.video){var te=this.video.seekable;G<te.start(0)||G>te.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+te.start(0)+" and "+te.end(0)+"-second mark."))):this.video.currentTime=G}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(G){this.map||(this.map=G,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var G=this.map.painter.context,te=G.gl;for(var ve in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE),te.texSubImage2D(te.TEXTURE_2D,0,0,0,te.RGBA,te.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(G,this.video,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this.tiles){var Ce=this.tiles[ve];"loaded"!==Ce.state&&(Ce.state="loaded",Ce.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(B),U=function(F){function W(G,te,ve,Ce){F.call(this,G,te,ve,Ce),te.coordinates?Array.isArray(te.coordinates)&&4===te.coordinates.length&&!te.coordinates.some(function(Be){return!Array.isArray(Be)||2!==Be.length||Be.some(function(qe){return"number"!=typeof qe})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+G,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+G,null,'missing required property "coordinates"'))),te.animate&&"boolean"!=typeof te.animate&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+G,null,'optional "animate" property must be a boolean value'))),te.canvas?"string"==typeof te.canvas||te.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+G,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+G,null,'missing required property "canvas"'))),this.options=te,this.animate=void 0===te.animate||te.animate}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(G){this.map=G,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var G=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,G=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,G=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var te=this.map.painter.context,ve=te.gl;for(var Ce in this.boundsBuffer||(this.boundsBuffer=te.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(G||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(te,this.canvas,ve.RGBA,{premultiply:!0}),this.tiles){var Be=this.tiles[Ce];"loaded"!==Be.state&&(Be.state="loaded",Be.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var G=0,te=[this.canvas.width,this.canvas.height];G<te.length;G+=1){var ve=te[G];if(isNaN(ve)||ve<=0)return!0}return!1},W}(B),J={vector:z,raster:j,"raster-dem":R,geojson:V,video:N,image:B,canvas:U};function Y(F,W){var G=l.identity([]);return l.translate(G,G,[1,1,0]),l.scale(G,G,[.5*F.width,.5*F.height,1]),l.multiply(G,G,F.calculatePosMatrix(W.toUnwrapped()))}function q(F,W,G,te,ve,Ce){var Be=function(Fe,Ue,Ge){if(Fe)for(var Xe=0,rt=Fe;Xe<rt.length;Xe+=1){var ut=Ue[rt[Xe]];if(ut&&ut.source===Ge&&"fill-extrusion"===ut.type)return!0}else for(var Ct in Ue){var Rt=Ue[Ct];if(Rt.source===Ge&&"fill-extrusion"===Rt.type)return!0}return!1}(ve&&ve.layers,W,F.id),qe=Ce.maxPitchScaleFactor(),et=F.tilesIn(te,qe,Be);et.sort(H);for(var vt=[],xt=0,ee=et;xt<ee.length;xt+=1){var ce=ee[xt];vt.push({wrappedTileID:ce.tileID.wrapped().key,queryResults:ce.tile.queryRenderedFeatures(W,G,F._state,ce.queryGeometry,ce.cameraQueryGeometry,ce.scale,ve,Ce,qe,Y(F.transform,ce.tileID))})}var Ae=function(Fe){for(var Ue={},Ge={},Xe=0,rt=Fe;Xe<rt.length;Xe+=1){var ut=rt[Xe],Ct=ut.queryResults,Rt=ut.wrappedTileID,Ft=Ge[Rt]=Ge[Rt]||{};for(var Yt in Ct)for(var cn=Ct[Yt],Wt=Ft[Yt]=Ft[Yt]||{},tn=Ue[Yt]=Ue[Yt]||[],$t=0,_n=cn;$t<_n.length;$t+=1){var dn=_n[$t];Wt[dn.featureIndex]||(Wt[dn.featureIndex]=!0,tn.push(dn))}}return Ue}(vt);for(var Oe in Ae)Ae[Oe].forEach(function(Fe){var Ue=Fe.feature,Ge=F.getFeatureState(Ue.layer["source-layer"],Ue.id);Ue.source=Ue.layer.source,Ue.layer["source-layer"]&&(Ue.sourceLayer=Ue.layer["source-layer"]),Ue.state=Ge});return Ae}function H(F,W){var G=F.tileID,te=W.tileID;return G.overscaledZ-te.overscaledZ||G.canonical.y-te.canonical.y||G.wrap-te.wrap||G.canonical.x-te.canonical.x}var X=function(F,W){this.max=F,this.onRemove=W,this.reset()};X.prototype.reset=function(){for(var F in this.data)for(var W=0,G=this.data[F];W<G.length;W+=1){var te=G[W];te.timeout&&clearTimeout(te.timeout),this.onRemove(te.value)}return this.data={},this.order=[],this},X.prototype.add=function(F,W,G){var te=this,ve=F.wrapped().key;void 0===this.data[ve]&&(this.data[ve]=[]);var Ce={value:W,timeout:void 0};if(void 0!==G&&(Ce.timeout=setTimeout(function(){te.remove(F,Ce)},G)),this.data[ve].push(Ce),this.order.push(ve),this.order.length>this.max){var Be=this._getAndRemoveByKey(this.order[0]);Be&&this.onRemove(Be)}return this},X.prototype.has=function(F){return F.wrapped().key in this.data},X.prototype.getAndRemove=function(F){return this.has(F)?this._getAndRemoveByKey(F.wrapped().key):null},X.prototype._getAndRemoveByKey=function(F){var W=this.data[F].shift();return W.timeout&&clearTimeout(W.timeout),0===this.data[F].length&&delete this.data[F],this.order.splice(this.order.indexOf(F),1),W.value},X.prototype.getByKey=function(F){var W=this.data[F];return W?W[0].value:null},X.prototype.get=function(F){return this.has(F)?this.data[F.wrapped().key][0].value:null},X.prototype.remove=function(F,W){if(!this.has(F))return this;var G=F.wrapped().key,te=void 0===W?0:this.data[G].indexOf(W),ve=this.data[G][te];return this.data[G].splice(te,1),ve.timeout&&clearTimeout(ve.timeout),0===this.data[G].length&&delete this.data[G],this.onRemove(ve.value),this.order.splice(this.order.indexOf(G),1),this},X.prototype.setMaxSize=function(F){for(this.max=F;this.order.length>this.max;){var W=this._getAndRemoveByKey(this.order[0]);W&&this.onRemove(W)}return this},X.prototype.filter=function(F){var W=[];for(var G in this.data)for(var te=0,ve=this.data[G];te<ve.length;te+=1){var Ce=ve[te];F(Ce.value)||W.push(Ce)}for(var Be=0,qe=W;Be<qe.length;Be+=1){var et=qe[Be];this.remove(et.value.tileID,et)}};var Q=function(F,W,G){this.context=F;var te=F.gl;this.buffer=te.createBuffer(),this.dynamicDraw=Boolean(G),this.context.unbindVAO(),F.bindElementBuffer.set(this.buffer),te.bufferData(te.ELEMENT_ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};Q.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Q.prototype.updateData=function(F){var W=this.context.gl;this.context.unbindVAO(),this.bind(),W.bufferSubData(W.ELEMENT_ARRAY_BUFFER,0,F.arrayBuffer)},Q.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(F,W,G,te){this.length=W.length,this.attributes=G,this.itemSize=W.bytesPerElement,this.dynamicDraw=te,this.context=F;var ve=F.gl;this.buffer=ve.createBuffer(),F.bindVertexBuffer.set(this.buffer),ve.bufferData(ve.ARRAY_BUFFER,W.arrayBuffer,this.dynamicDraw?ve.DYNAMIC_DRAW:ve.STATIC_DRAW),this.dynamicDraw||delete W.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(F){var W=this.context.gl;this.bind(),W.bufferSubData(W.ARRAY_BUFFER,0,F.arrayBuffer)},re.prototype.enableAttributes=function(F,W){for(var G=0;G<this.attributes.length;G++){var ve=W.attributes[this.attributes[G].name];void 0!==ve&&F.enableVertexAttribArray(ve)}},re.prototype.setVertexAttribPointers=function(F,W,G){for(var te=0;te<this.attributes.length;te++){var ve=this.attributes[te],Ce=W.attributes[ve.name];void 0!==Ce&&F.vertexAttribPointer(Ce,ve.components,F[ne[ve.type]],!1,this.itemSize,ve.offset+this.itemSize*(G||0))}},re.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(F){this.gl=F.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(F){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var se=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return l.Color.transparent},W.prototype.set=function(G){var te=this.current;(G.r!==te.r||G.g!==te.g||G.b!==te.b||G.a!==te.a||this.dirty)&&(this.gl.clearColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},W}(ae),pe=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearDepth(G),this.current=G,this.dirty=!1)},W}(ae),ke=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearStencil(G),this.current=G,this.dirty=!1)},W}(ae),me=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(G){var te=this.current;(G[0]!==te[0]||G[1]!==te[1]||G[2]!==te[2]||G[3]!==te[3]||this.dirty)&&(this.gl.colorMask(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},W}(ae),le=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthMask(G),this.current=G,this.dirty=!1)},W}(ae),ue=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.stencilMask(G),this.current=G,this.dirty=!1)},W}(ae),Ee=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(G){var te=this.current;(G.func!==te.func||G.ref!==te.ref||G.mask!==te.mask||this.dirty)&&(this.gl.stencilFunc(G.func,G.ref,G.mask),this.current=G,this.dirty=!1)},W}(ae),de=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[G.KEEP,G.KEEP,G.KEEP]},W.prototype.set=function(G){var te=this.current;(G[0]!==te[0]||G[1]!==te[1]||G[2]!==te[2]||this.dirty)&&(this.gl.stencilOp(G[0],G[1],G[2]),this.current=G,this.dirty=!1)},W}(ae),xe=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;G?te.enable(te.STENCIL_TEST):te.disable(te.STENCIL_TEST),this.current=G,this.dirty=!1}},W}(ae),Te=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(G){var te=this.current;(G[0]!==te[0]||G[1]!==te[1]||this.dirty)&&(this.gl.depthRange(G[0],G[1]),this.current=G,this.dirty=!1)},W}(ae),we=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;G?te.enable(te.DEPTH_TEST):te.disable(te.DEPTH_TEST),this.current=G,this.dirty=!1}},W}(ae),K=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthFunc(G),this.current=G,this.dirty=!1)},W}(ae),oe=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;G?te.enable(te.BLEND):te.disable(te.BLEND),this.current=G,this.dirty=!1}},W}(ae),he=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[G.ONE,G.ZERO]},W.prototype.set=function(G){var te=this.current;(G[0]!==te[0]||G[1]!==te[1]||this.dirty)&&(this.gl.blendFunc(G[0],G[1]),this.current=G,this.dirty=!1)},W}(ae),ye=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return l.Color.transparent},W.prototype.set=function(G){var te=this.current;(G.r!==te.r||G.g!==te.g||G.b!==te.b||G.a!==te.a||this.dirty)&&(this.gl.blendColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},W}(ae),Me=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.blendEquation(G),this.current=G,this.dirty=!1)},W}(ae),Re=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;G?te.enable(te.CULL_FACE):te.disable(te.CULL_FACE),this.current=G,this.dirty=!1}},W}(ae),Pe=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.cullFace(G),this.current=G,this.dirty=!1)},W}(ae),De=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.frontFace(G),this.current=G,this.dirty=!1)},W}(ae),fe=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.useProgram(G),this.current=G,this.dirty=!1)},W}(ae),ge=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.activeTexture(G),this.current=G,this.dirty=!1)},W}(ae),be=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){var G=this.gl;return[0,0,G.drawingBufferWidth,G.drawingBufferHeight]},W.prototype.set=function(G){var te=this.current;(G[0]!==te[0]||G[1]!==te[1]||G[2]!==te[2]||G[3]!==te[3]||this.dirty)&&(this.gl.viewport(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},W}(ae),Ie=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;te.bindFramebuffer(te.FRAMEBUFFER,G),this.current=G,this.dirty=!1}},W}(ae),He=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;te.bindRenderbuffer(te.RENDERBUFFER,G),this.current=G,this.dirty=!1}},W}(ae),Ve=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;te.bindTexture(te.TEXTURE_2D,G),this.current=G,this.dirty=!1}},W}(ae),tt=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;te.bindBuffer(te.ARRAY_BUFFER,G),this.current=G,this.dirty=!1}},W}(ae),nt=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){var te=this.gl;te.bindBuffer(te.ELEMENT_ARRAY_BUFFER,G),this.current=G,this.dirty=!1},W}(ae),st=function(F){function W(G){F.call(this,G),this.vao=G.extVertexArrayObject}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(G){this.vao&&(G!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(G),this.current=G,this.dirty=!1)},W}(ae),dt=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_ALIGNMENT,G),this.current=G,this.dirty=!1}},W}(ae),wt=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G),this.current=G,this.dirty=!1}},W}(ae),_t=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(G){if(G!==this.current||this.dirty){var te=this.gl;te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,G),this.current=G,this.dirty=!1}},W}(ae),pt=function(F){function W(G,te){F.call(this,G),this.context=G,this.parent=te}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getDefault=function(){return null},W}(ae),Pt=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var te=this.gl;te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,G,0),this.current=G,this.dirty=!1}},W}(pt),St=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var te=this.gl;te.framebufferRenderbuffer(te.FRAMEBUFFER,te.DEPTH_ATTACHMENT,te.RENDERBUFFER,G),this.current=G,this.dirty=!1}},W}(pt),Ot=function(F,W,G,te){this.context=F,this.width=W,this.height=G;var Ce=this.framebuffer=F.gl.createFramebuffer();this.colorAttachment=new Pt(F,Ce),te&&(this.depthAttachment=new St(F,Ce))};Ot.prototype.destroy=function(){var F=this.context.gl,W=this.colorAttachment.get();if(W&&F.deleteTexture(W),this.depthAttachment){var G=this.depthAttachment.get();G&&F.deleteRenderbuffer(G)}F.deleteFramebuffer(this.framebuffer)};var jt=function(F,W,G){this.func=F,this.mask=W,this.range=G};jt.ReadOnly=!1,jt.ReadWrite=!0,jt.disabled=new jt(519,jt.ReadOnly,[0,1]);var Ye=function(F,W,G,te,ve,Ce){this.test=F,this.ref=W,this.mask=G,this.fail=te,this.depthFail=ve,this.pass=Ce};Ye.disabled=new Ye({func:519,mask:0},0,0,7680,7680,7680);var Ze=function(F,W,G){this.blendFunction=F,this.blendColor=W,this.mask=G};Ze.disabled=new Ze(Ze.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),Ze.unblended=new Ze(Ze.Replace,l.Color.transparent,[!0,!0,!0,!0]),Ze.alphaBlended=new Ze([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Ne=function(F,W,G){this.enable=F,this.mode=W,this.frontFace=G};Ne.disabled=new Ne(!1,1029,2305),Ne.backCCW=new Ne(!0,1029,2305);var Je=function(F){this.gl=F,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new pe(this),this.clearStencil=new ke(this),this.colorMask=new me(this),this.depthMask=new le(this),this.stencilMask=new ue(this),this.stencilFunc=new Ee(this),this.stencilOp=new de(this),this.stencilTest=new xe(this),this.depthRange=new Te(this),this.depthTest=new we(this),this.depthFunc=new K(this),this.blend=new oe(this),this.blendFunc=new he(this),this.blendColor=new ye(this),this.blendEquation=new Me(this),this.cullFace=new Re(this),this.cullFaceSide=new Pe(this),this.frontFace=new De(this),this.program=new fe(this),this.activeTexture=new ge(this),this.viewport=new be(this),this.bindFramebuffer=new Ie(this),this.bindRenderbuffer=new He(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new tt(this),this.bindElementBuffer=new nt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new st(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new wt(this),this.pixelStoreUnpackFlipY=new _t(this),this.extTextureFilterAnisotropic=F.getExtension("EXT_texture_filter_anisotropic")||F.getExtension("MOZ_EXT_texture_filter_anisotropic")||F.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=F.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=F.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(F.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=F.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=F.getExtension("EXT_disjoint_timer_query")};Je.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Je.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Je.prototype.createIndexBuffer=function(F,W){return new Q(this,F,W)},Je.prototype.createVertexBuffer=function(F,W,G){return new re(this,F,W,G)},Je.prototype.createRenderbuffer=function(F,W,G){var te=this.gl,ve=te.createRenderbuffer();return this.bindRenderbuffer.set(ve),te.renderbufferStorage(te.RENDERBUFFER,F,W,G),this.bindRenderbuffer.set(null),ve},Je.prototype.createFramebuffer=function(F,W,G){return new Ot(this,F,W,G)},Je.prototype.clear=function(F){var W=F.color,G=F.depth,te=this.gl,ve=0;W&&(ve|=te.COLOR_BUFFER_BIT,this.clearColor.set(W),this.colorMask.set([!0,!0,!0,!0])),void 0!==G&&(ve|=te.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(G),this.depthMask.set(!0)),te.clear(ve)},Je.prototype.setCullFace=function(F){!1===F.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(F.mode),this.frontFace.set(F.frontFace))},Je.prototype.setDepthMode=function(F){F.func!==this.gl.ALWAYS||F.mask?(this.depthTest.set(!0),this.depthFunc.set(F.func),this.depthMask.set(F.mask),this.depthRange.set(F.range)):this.depthTest.set(!1)},Je.prototype.setStencilMode=function(F){F.test.func!==this.gl.ALWAYS||F.mask?(this.stencilTest.set(!0),this.stencilMask.set(F.mask),this.stencilOp.set([F.fail,F.depthFail,F.pass]),this.stencilFunc.set({func:F.test.func,ref:F.ref,mask:F.test.mask})):this.stencilTest.set(!1)},Je.prototype.setColorMode=function(F){l.deepEqual(F.blendFunction,Ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(F.blendFunction),this.blendColor.set(F.blendColor)),this.colorMask.set(F.mask)},Je.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var at=function(F){function W(G,te,ve){var Ce=this;F.call(this),this.id=G,this.dispatcher=ve,this.on("data",function(Be){"source"===Be.dataType&&"metadata"===Be.sourceDataType&&(Ce._sourceLoaded=!0),Ce._sourceLoaded&&!Ce._paused&&"source"===Be.dataType&&"content"===Be.sourceDataType&&(Ce.reload(),Ce.transform&&Ce.update(Ce.transform))}),this.on("error",function(){Ce._sourceErrored=!0}),this._source=function(Be,qe,et,vt){var xt=new J[qe.type](Be,qe,et,vt);if(xt.id!==Be)throw new Error("Expected Source id to be "+Be+" instead of "+xt.id);return l.bindAll(["load","abort","unload","serialize","prepare"],xt),xt}(G,te,ve,this),this._tiles={},this._cache=new X(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.onAdd=function(G){this.map=G,this._maxTileCacheSize=G?G._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(G)},W.prototype.onRemove=function(G){this._source&&this._source.onRemove&&this._source.onRemove(G)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var G in this._tiles){var te=this._tiles[G];if("loaded"!==te.state&&"errored"!==te.state)return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(this._paused){var G=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,G&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(G,te){return this._source.loadTile(G,te)},W.prototype._unloadTile=function(G){if(this._source.unloadTile)return this._source.unloadTile(G,function(){})},W.prototype._abortTile=function(G){if(this._source.abortTile)return this._source.abortTile(G,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(G){for(var te in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ve=this._tiles[te];ve.upload(G),ve.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return l.values(this._tiles).map(function(G){return G.tileID}).sort(Se).map(function(G){return G.key})},W.prototype.getRenderableIds=function(G){var te=this,ve=[];for(var Ce in this._tiles)this._isIdRenderable(Ce,G)&&ve.push(this._tiles[Ce]);return G?ve.sort(function(Be,qe){var et=Be.tileID,vt=qe.tileID,xt=new l.Point(et.canonical.x,et.canonical.y)._rotate(te.transform.angle),ee=new l.Point(vt.canonical.x,vt.canonical.y)._rotate(te.transform.angle);return et.overscaledZ-vt.overscaledZ||ee.y-xt.y||ee.x-xt.x}).map(function(Be){return Be.tileID.key}):ve.map(function(Be){return Be.tileID}).sort(Se).map(function(Be){return Be.key})},W.prototype.hasRenderableParent=function(G){var te=this.findLoadedParent(G,0);return!!te&&this._isIdRenderable(te.tileID.key)},W.prototype._isIdRenderable=function(G,te){return this._tiles[G]&&this._tiles[G].hasData()&&!this._coveredTiles[G]&&(te||!this._tiles[G].holdingForFade())},W.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var G in this._cache.reset(),this._tiles)"errored"!==this._tiles[G].state&&this._reloadTile(G,"reloading")},W.prototype._reloadTile=function(G,te){var ve=this._tiles[G];ve&&("loading"!==ve.state&&(ve.state=te),this._loadTile(ve,this._tileLoaded.bind(this,ve,G,te)))},W.prototype._tileLoaded=function(G,te,ve,Ce){if(Ce)return G.state="errored",void(404!==Ce.status?this._source.fire(new l.ErrorEvent(Ce,{tile:G})):this.update(this.transform));G.timeAdded=l.browser.now(),"expired"===ve&&(G.refreshedUponExpiration=!0),this._setTileReloadTimer(te,G),"raster-dem"===this.getSource().type&&G.dem&&this._backfillDEM(G),this._state.initializeTileState(G,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:G,coord:G.tileID}))},W.prototype._backfillDEM=function(G){for(var te=this.getRenderableIds(),ve=0;ve<te.length;ve++){var Ce=te[ve];if(G.neighboringTiles&&G.neighboringTiles[Ce]){var Be=this.getTileByID(Ce);qe(G,Be),qe(Be,G)}}function qe(et,vt){et.needsHillshadePrepare=!0;var xt=vt.tileID.canonical.x-et.tileID.canonical.x,ee=vt.tileID.canonical.y-et.tileID.canonical.y,ce=Math.pow(2,et.tileID.canonical.z),Ae=vt.tileID.key;0===xt&&0===ee||Math.abs(ee)>1||(Math.abs(xt)>1&&(1===Math.abs(xt+ce)?xt+=ce:1===Math.abs(xt-ce)&&(xt-=ce)),vt.dem&&et.dem&&(et.dem.backfillBorder(vt.dem,xt,ee),et.neighboringTiles&&et.neighboringTiles[Ae]&&(et.neighboringTiles[Ae].backfilled=!0)))}},W.prototype.getTile=function(G){return this.getTileByID(G.key)},W.prototype.getTileByID=function(G){return this._tiles[G]},W.prototype._retainLoadedChildren=function(G,te,ve,Ce){for(var Be in this._tiles){var qe=this._tiles[Be];if(!(Ce[Be]||!qe.hasData()||qe.tileID.overscaledZ<=te||qe.tileID.overscaledZ>ve)){for(var et=qe.tileID;qe&&qe.tileID.overscaledZ>te+1;){var vt=qe.tileID.scaledTo(qe.tileID.overscaledZ-1);(qe=this._tiles[vt.key])&&qe.hasData()&&(et=vt)}for(var xt=et;xt.overscaledZ>te;)if(G[(xt=xt.scaledTo(xt.overscaledZ-1)).key]){Ce[et.key]=et;break}}}},W.prototype.findLoadedParent=function(G,te){if(G.key in this._loadedParentTiles){var ve=this._loadedParentTiles[G.key];return ve&&ve.tileID.overscaledZ>=te?ve:null}for(var Ce=G.overscaledZ-1;Ce>=te;Ce--){var Be=G.scaledTo(Ce),qe=this._getLoadedTile(Be);if(qe)return qe}},W.prototype._getLoadedTile=function(G){var te=this._tiles[G.key];return te&&te.hasData()?te:this._cache.getByKey(G.wrapped().key)},W.prototype.updateCacheSize=function(G){var te=(Math.ceil(G.width/this._source.tileSize)+1)*(Math.ceil(G.height/this._source.tileSize)+1),ve=Math.floor(5*te),Ce="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ve):ve;this._cache.setMaxSize(Ce)},W.prototype.handleWrapJump=function(G){var ve=Math.round((G-(void 0===this._prevLng?G:this._prevLng))/360);if(this._prevLng=G,ve){var Ce={};for(var Be in this._tiles){var qe=this._tiles[Be];qe.tileID=qe.tileID.unwrapTo(qe.tileID.wrap+ve),Ce[qe.tileID.key]=qe}for(var et in this._tiles=Ce,this._timers)clearTimeout(this._timers[et]),delete this._timers[et];for(var vt in this._tiles)this._setTileReloadTimer(vt,this._tiles[vt])}},W.prototype.update=function(G){var te=this;if(this.transform=G,this._sourceLoaded&&!this._paused){var ve;this.updateCacheSize(G),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ve=G.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ft){return new l.OverscaledTileID(Ft.canonical.z,Ft.wrap,Ft.canonical.z,Ft.canonical.x,Ft.canonical.y)}):(ve=G.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ve=ve.filter(function(Ft){return te._source.hasTile(Ft)}))):ve=[];var Ce=G.coveringZoomLevel(this._source),Be=Math.max(Ce-W.maxOverzooming,this._source.minzoom),qe=Math.max(Ce+W.maxUnderzooming,this._source.minzoom),et=this._updateRetainedTiles(ve,Ce);if(ze(this._source.type)){for(var vt={},xt={},ee=0,ce=Object.keys(et);ee<ce.length;ee+=1){var Ae=ce[ee],Oe=et[Ae],Fe=this._tiles[Ae];if(Fe&&!(Fe.fadeEndTime&&Fe.fadeEndTime<=l.browser.now())){var Ue=this.findLoadedParent(Oe,Be);Ue&&(this._addTile(Ue.tileID),vt[Ue.tileID.key]=Ue.tileID),xt[Ae]=Oe}}for(var Ge in this._retainLoadedChildren(xt,Ce,qe,et),vt)et[Ge]||(this._coveredTiles[Ge]=!0,et[Ge]=vt[Ge])}for(var Xe in et)this._tiles[Xe].clearFadeHold();for(var rt=0,ut=l.keysDifference(this._tiles,et);rt<ut.length;rt+=1){var Ct=ut[rt],Rt=this._tiles[Ct];Rt.hasSymbolBuckets&&!Rt.holdingForFade()?Rt.setHoldDuration(this.map._fadeDuration):Rt.hasSymbolBuckets&&!Rt.symbolFadeFinished()||this._removeTile(Ct)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var G in this._tiles)this._tiles[G].holdingForFade()&&this._removeTile(G)},W.prototype._updateRetainedTiles=function(G,te){for(var ve={},Ce={},Be=Math.max(te-W.maxOverzooming,this._source.minzoom),qe=Math.max(te+W.maxUnderzooming,this._source.minzoom),et={},vt=0,xt=G;vt<xt.length;vt+=1){var ee=xt[vt],ce=this._addTile(ee);ve[ee.key]=ee,ce.hasData()||te<this._source.maxzoom&&(et[ee.key]=ee)}this._retainLoadedChildren(et,te,qe,ve);for(var Ae=0,Oe=G;Ae<Oe.length;Ae+=1){var Fe=Oe[Ae],Ue=this._tiles[Fe.key];if(!Ue.hasData()){if(te+1>this._source.maxzoom){var Ge=Fe.children(this._source.maxzoom)[0],Xe=this.getTile(Ge);if(Xe&&Xe.hasData()){ve[Ge.key]=Ge;continue}}else{var rt=Fe.children(this._source.maxzoom);if(ve[rt[0].key]&&ve[rt[1].key]&&ve[rt[2].key]&&ve[rt[3].key])continue}for(var ut=Ue.wasRequested(),Ct=Fe.overscaledZ-1;Ct>=Be;--Ct){var Rt=Fe.scaledTo(Ct);if(Ce[Rt.key]||(Ce[Rt.key]=!0,!(Ue=this.getTile(Rt))&&ut&&(Ue=this._addTile(Rt)),Ue&&(ve[Rt.key]=Rt,ut=Ue.wasRequested(),Ue.hasData())))break}}}return ve},W.prototype._updateLoadedParentTileCache=function(){for(var G in this._loadedParentTiles={},this._tiles){for(var te=[],ve=void 0,Ce=this._tiles[G].tileID;Ce.overscaledZ>0;){if(Ce.key in this._loadedParentTiles){ve=this._loadedParentTiles[Ce.key];break}te.push(Ce.key);var Be=Ce.scaledTo(Ce.overscaledZ-1);if(ve=this._getLoadedTile(Be))break;Ce=Be}for(var qe=0,et=te;qe<et.length;qe+=1)this._loadedParentTiles[et[qe]]=ve}},W.prototype._addTile=function(G){var te=this._tiles[G.key];if(te)return te;(te=this._cache.getAndRemove(G))&&(this._setTileReloadTimer(G.key,te),te.tileID=G,this._state.initializeTileState(te,this.map?this.map.painter:null),this._cacheTimers[G.key]&&(clearTimeout(this._cacheTimers[G.key]),delete this._cacheTimers[G.key],this._setTileReloadTimer(G.key,te)));var ve=Boolean(te);return ve||(te=new l.Tile(G,this._source.tileSize*G.overscaleFactor()),this._loadTile(te,this._tileLoaded.bind(this,te,G.key,te.state))),te?(te.uses++,this._tiles[G.key]=te,ve||this._source.fire(new l.Event("dataloading",{tile:te,coord:te.tileID,dataType:"source"})),te):null},W.prototype._setTileReloadTimer=function(G,te){var ve=this;G in this._timers&&(clearTimeout(this._timers[G]),delete this._timers[G]);var Ce=te.getExpiryTimeout();Ce&&(this._timers[G]=setTimeout(function(){ve._reloadTile(G,"expired"),delete ve._timers[G]},Ce))},W.prototype._removeTile=function(G){var te=this._tiles[G];te&&(te.uses--,delete this._tiles[G],this._timers[G]&&(clearTimeout(this._timers[G]),delete this._timers[G]),te.uses>0||(te.hasData()&&"reloading"!==te.state?this._cache.add(te.tileID,te,te.getExpiryTimeout()):(te.aborted=!0,this._abortTile(te),this._unloadTile(te))))},W.prototype.clearTiles=function(){for(var G in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(G);this._cache.reset()},W.prototype.tilesIn=function(G,te,ve){var Ce=this,Be=[],qe=this.transform;if(!qe)return Be;for(var et=ve?qe.getCameraQueryGeometry(G):G,vt=G.map(function(Ct){return qe.pointCoordinate(Ct)}),xt=et.map(function(Ct){return qe.pointCoordinate(Ct)}),ee=this.getIds(),ce=1/0,Ae=1/0,Oe=-1/0,Fe=-1/0,Ue=0,Ge=xt;Ue<Ge.length;Ue+=1){var Xe=Ge[Ue];ce=Math.min(ce,Xe.x),Ae=Math.min(Ae,Xe.y),Oe=Math.max(Oe,Xe.x),Fe=Math.max(Fe,Xe.y)}for(var rt=function(Ct){var Rt=Ce._tiles[ee[Ct]];if(!Rt.holdingForFade()){var Ft=Rt.tileID,Yt=Math.pow(2,qe.zoom-Rt.tileID.overscaledZ),cn=te*Rt.queryPadding*l.EXTENT/Rt.tileSize/Yt,Wt=[Ft.getTilePoint(new l.MercatorCoordinate(ce,Ae)),Ft.getTilePoint(new l.MercatorCoordinate(Oe,Fe))];if(Wt[0].x-cn<l.EXTENT&&Wt[0].y-cn<l.EXTENT&&Wt[1].x+cn>=0&&Wt[1].y+cn>=0){var tn=vt.map(function(_n){return Ft.getTilePoint(_n)}),$t=xt.map(function(_n){return Ft.getTilePoint(_n)});Be.push({tile:Rt,tileID:Ft,queryGeometry:tn,cameraQueryGeometry:$t,scale:Yt})}}},ut=0;ut<ee.length;ut++)rt(ut);return Be},W.prototype.getVisibleCoordinates=function(G){for(var te=this,ve=this.getRenderableIds(G).map(function(et){return te._tiles[et].tileID}),Ce=0,Be=ve;Ce<Be.length;Ce+=1){var qe=Be[Ce];qe.posMatrix=this.transform.calculatePosMatrix(qe.toUnwrapped())}return ve},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ze(this._source.type))for(var G in this._tiles){var te=this._tiles[G];if(void 0!==te.fadeEndTime&&te.fadeEndTime>=l.browser.now())return!0}return!1},W.prototype.setFeatureState=function(G,te,ve){this._state.updateState(G=G||"_geojsonTileLayer",te,ve)},W.prototype.removeFeatureState=function(G,te,ve){this._state.removeFeatureState(G=G||"_geojsonTileLayer",te,ve)},W.prototype.getFeatureState=function(G,te){return this._state.getState(G=G||"_geojsonTileLayer",te)},W.prototype.setDependencies=function(G,te,ve){var Ce=this._tiles[G];Ce&&Ce.setDependencies(te,ve)},W.prototype.reloadTilesForDependencies=function(G,te){for(var ve in this._tiles)this._tiles[ve].hasDependency(G,te)&&this._reloadTile(ve,"reloading");this._cache.filter(function(Ce){return!Ce.hasDependency(G,te)})},W}(l.Evented);function Se(F,W){var G=Math.abs(2*F.wrap)-+(F.wrap<0),te=Math.abs(2*W.wrap)-+(W.wrap<0);return F.overscaledZ-W.overscaledZ||te-G||W.canonical.y-F.canonical.y||W.canonical.x-F.canonical.x}function ze(F){return"raster"===F||"image"===F||"video"===F}function Ke(){return new l.window.Worker(yt.workerUrl)}at.maxOverzooming=10,at.maxUnderzooming=3;var it="mapboxgl_preloaded_worker_pool",ct=function(){this.active={}};ct.prototype.acquire=function(F){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new Ke);return this.active[F]=!0,this.workers.slice()},ct.prototype.release=function(F){delete this.active[F],0===this.numActive()&&(this.workers.forEach(function(W){W.terminate()}),this.workers=null)},ct.prototype.isPreloaded=function(){return!!this.active[it]},ct.prototype.numActive=function(){return Object.keys(this.active).length};var mt,Lt=Math.floor(l.browser.hardwareConcurrency/2);function At(){return mt||(mt=new ct),mt}function ht(F,W){var G={};for(var te in F)"ref"!==te&&(G[te]=F[te]);return l.refProperties.forEach(function(ve){ve in W&&(G[ve]=W[ve])}),G}function Et(F){F=F.slice();for(var W=Object.create(null),G=0;G<F.length;G++)W[F[G].id]=F[G];for(var te=0;te<F.length;te++)"ref"in F[te]&&(F[te]=ht(F[te],W[F[te].ref]));return F}ct.workerCount=Math.max(Math.min(Lt,6),1);var gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kt(F,W,G){G.push({command:gt.addSource,args:[F,W[F]]})}function It(F,W,G){W.push({command:gt.removeSource,args:[F]}),G[F]=!0}function Ut(F,W,G,te){It(F,G,te),kt(F,W,G)}function Nt(F,W,G){var te;for(te in F[G])if(F[G].hasOwnProperty(te)&&"data"!==te&&!l.deepEqual(F[G][te],W[G][te]))return!1;for(te in W[G])if(W[G].hasOwnProperty(te)&&"data"!==te&&!l.deepEqual(F[G][te],W[G][te]))return!1;return!0}function qt(F,W,G,te,ve,Ce){var Be;for(Be in W=W||{},F=F||{})F.hasOwnProperty(Be)&&(l.deepEqual(F[Be],W[Be])||G.push({command:Ce,args:[te,Be,W[Be],ve]}));for(Be in W)W.hasOwnProperty(Be)&&!F.hasOwnProperty(Be)&&(l.deepEqual(F[Be],W[Be])||G.push({command:Ce,args:[te,Be,W[Be],ve]}))}function Xt(F){return F.id}function Kt(F,W){return F[W.id]=W,F}var nn=function(F,W){this.reset(F,W)};nn.prototype.reset=function(F,W){this.points=F||[],this._distances=[0];for(var G=1;G<this.points.length;G++)this._distances[G]=this._distances[G-1]+this.points[G].dist(this.points[G-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(W||0,.5*this.length),this.paddedLength=this.length-2*this.padding},nn.prototype.lerp=function(F){if(1===this.points.length)return this.points[0];F=l.clamp(F,0,1);for(var W=1,G=this._distances[W],te=F*this.paddedLength+this.padding;G<te&&W<this._distances.length;)G=this._distances[++W];var ve=W-1,Ce=this._distances[ve],Be=G-Ce,qe=Be>0?(te-Ce)/Be:0;return this.points[ve].mult(1-qe).add(this.points[W].mult(qe))};var xn=function(F,W,G){var te=this.boxCells=[],ve=this.circleCells=[];this.xCellCount=Math.ceil(F/G),this.yCellCount=Math.ceil(W/G);for(var Ce=0;Ce<this.xCellCount*this.yCellCount;Ce++)te.push([]),ve.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=F,this.height=W,this.xScale=this.xCellCount/F,this.yScale=this.yCellCount/W,this.boxUid=0,this.circleUid=0};function jn(F,W,G,te,ve){var Ce=l.create();return W?(l.scale(Ce,Ce,[1/ve,1/ve,1]),G||l.rotateZ(Ce,Ce,te.angle)):l.multiply(Ce,te.labelPlaneMatrix,F),Ce}function mn(F,W,G,te,ve){if(W){var Ce=l.clone(F);return l.scale(Ce,Ce,[ve,ve,1]),G||l.rotateZ(Ce,Ce,-te.angle),Ce}return te.glCoordMatrix}function en(F,W){var G=[F.x,F.y,0,1];mr(G,G,W);var te=G[3];return{point:new l.Point(G[0]/te,G[1]/te),signedDistanceFromCamera:te}}function vn(F,W){return.5+F/W*.5}function on(F,W){var G=F[0]/F[3],te=F[1]/F[3];return G>=-W[0]&&G<=W[0]&&te>=-W[1]&&te<=W[1]}function sn(F,W,G,te,ve,Ce,Be,qe){var et=te?F.textSizeData:F.iconSizeData,vt=l.evaluateSizeForZoom(et,G.transform.zoom),xt=[256/G.width*2+1,256/G.height*2+1],ee=te?F.text.dynamicLayoutVertexArray:F.icon.dynamicLayoutVertexArray;ee.clear();for(var ce=F.lineVertexArray,Ae=te?F.text.placedSymbolArray:F.icon.placedSymbolArray,Oe=G.transform.width/G.transform.height,Fe=!1,Ue=0;Ue<Ae.length;Ue++){var Ge=Ae.get(Ue);if(Ge.hidden||Ge.writingMode===l.WritingMode.vertical&&!Fe)Xn(Ge.numGlyphs,ee);else{Fe=!1;var Xe=[Ge.anchorX,Ge.anchorY,0,1];if(l.transformMat4(Xe,Xe,W),on(Xe,xt)){var ut=vn(G.transform.cameraToCenterDistance,Xe[3]),Ct=l.evaluateSizeForFeature(et,vt,Ge),Rt=Be?Ct/ut:Ct*ut,Ft=new l.Point(Ge.anchorX,Ge.anchorY),Yt=en(Ft,ve).point,cn={},Wt=zn(Ge,Rt,!1,qe,W,ve,Ce,F.glyphOffsetArray,ce,ee,Yt,Ft,cn,Oe);Fe=Wt.useVertical,(Wt.notEnoughRoom||Fe||Wt.needsFlipping&&zn(Ge,Rt,!0,qe,W,ve,Ce,F.glyphOffsetArray,ce,ee,Yt,Ft,cn,Oe).notEnoughRoom)&&Xn(Ge.numGlyphs,ee)}else Xn(Ge.numGlyphs,ee)}}te?F.text.dynamicLayoutVertexBuffer.updateData(ee):F.icon.dynamicLayoutVertexBuffer.updateData(ee)}function En(F,W,G,te,ve,Ce,Be,qe,et,vt,xt){var ee=qe.glyphStartIndex+qe.numGlyphs,ce=qe.lineStartIndex,Ae=qe.lineStartIndex+qe.lineLength,Oe=W.getoffsetX(qe.glyphStartIndex),Fe=W.getoffsetX(ee-1),Ue=Bn(F*Oe,G,te,ve,Ce,Be,qe.segment,ce,Ae,et,vt,xt);if(!Ue)return null;var Ge=Bn(F*Fe,G,te,ve,Ce,Be,qe.segment,ce,Ae,et,vt,xt);return Ge?{first:Ue,last:Ge}:null}function kn(F,W,G,te){return F===l.WritingMode.horizontal&&Math.abs(G.y-W.y)>Math.abs(G.x-W.x)*te?{useVertical:!0}:(F===l.WritingMode.vertical?W.y<G.y:W.x>G.x)?{needsFlipping:!0}:null}function zn(F,W,G,te,ve,Ce,Be,qe,et,vt,xt,ee,ce,Ae){var Oe,Fe=W/24,Ue=F.lineOffsetX*Fe,Ge=F.lineOffsetY*Fe;if(F.numGlyphs>1){var Xe=F.glyphStartIndex+F.numGlyphs,rt=F.lineStartIndex,ut=F.lineStartIndex+F.lineLength,Ct=En(Fe,qe,Ue,Ge,G,xt,ee,F,et,Ce,ce);if(!Ct)return{notEnoughRoom:!0};var Rt=en(Ct.first.point,Be).point,Ft=en(Ct.last.point,Be).point;if(te&&!G){var Yt=kn(F.writingMode,Rt,Ft,Ae);if(Yt)return Yt}Oe=[Ct.first];for(var cn=F.glyphStartIndex+1;cn<Xe-1;cn++)Oe.push(Bn(Fe*qe.getoffsetX(cn),Ue,Ge,G,xt,ee,F.segment,rt,ut,et,Ce,ce));Oe.push(Ct.last)}else{if(te&&!G){var Wt=en(ee,ve).point,tn=F.lineStartIndex+F.segment+1,$t=new l.Point(et.getx(tn),et.gety(tn)),_n=en($t,ve),dn=_n.signedDistanceFromCamera>0?_n.point:Fn(ee,$t,Wt,1,ve),Qt=kn(F.writingMode,Wt,dn,Ae);if(Qt)return Qt}var Cn=Bn(Fe*qe.getoffsetX(F.glyphStartIndex),Ue,Ge,G,xt,ee,F.segment,F.lineStartIndex,F.lineStartIndex+F.lineLength,et,Ce,ce);if(!Cn)return{notEnoughRoom:!0};Oe=[Cn]}for(var Dn=0,Jn=Oe;Dn<Jn.length;Dn+=1){var Kn=Jn[Dn];l.addDynamicAttributes(vt,Kn.point,Kn.angle)}return{}}function Fn(F,W,G,te,ve){var Ce=en(F.add(F.sub(W)._unit()),ve).point,Be=G.sub(Ce);return G.add(Be._mult(te/Be.mag()))}function Bn(F,W,G,te,ve,Ce,Be,qe,et,vt,xt,ee){var ce=te?F-W:F+W,Ae=ce>0?1:-1,Oe=0;te&&(Ae*=-1,Oe=Math.PI),Ae<0&&(Oe+=Math.PI);for(var Fe=Ae>0?qe+Be:qe+Be+1,Ue=ve,Ge=ve,Xe=0,rt=0,ut=Math.abs(ce),Ct=[];Xe+rt<=ut;){if((Fe+=Ae)<qe||Fe>=et)return null;if(Ge=Ue,Ct.push(Ue),void 0===(Ue=ee[Fe])){var Rt=new l.Point(vt.getx(Fe),vt.gety(Fe)),Ft=en(Rt,xt);if(Ft.signedDistanceFromCamera>0)Ue=ee[Fe]=Ft.point;else{var Yt=Fe-Ae;Ue=Fn(0===Xe?Ce:new l.Point(vt.getx(Yt),vt.gety(Yt)),Rt,Ge,ut-Xe+1,xt)}}Xe+=rt,rt=Ge.dist(Ue)}var cn=(ut-Xe)/rt,Wt=Ue.sub(Ge),tn=Wt.mult(cn)._add(Ge);tn._add(Wt._unit()._perp()._mult(G*Ae));var $t=Oe+Math.atan2(Ue.y-Ge.y,Ue.x-Ge.x);return Ct.push(tn),{point:tn,angle:$t,path:Ct}}xn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},xn.prototype.insert=function(F,W,G,te,ve){this._forEachCell(W,G,te,ve,this._insertBoxCell,this.boxUid++),this.boxKeys.push(F),this.bboxes.push(W),this.bboxes.push(G),this.bboxes.push(te),this.bboxes.push(ve)},xn.prototype.insertCircle=function(F,W,G,te){this._forEachCell(W-te,G-te,W+te,G+te,this._insertCircleCell,this.circleUid++),this.circleKeys.push(F),this.circles.push(W),this.circles.push(G),this.circles.push(te)},xn.prototype._insertBoxCell=function(F,W,G,te,ve,Ce){this.boxCells[ve].push(Ce)},xn.prototype._insertCircleCell=function(F,W,G,te,ve,Ce){this.circleCells[ve].push(Ce)},xn.prototype._query=function(F,W,G,te,ve,Ce){if(G<0||F>this.width||te<0||W>this.height)return!ve&&[];var Be=[];if(F<=0&&W<=0&&this.width<=G&&this.height<=te){if(ve)return!0;for(var qe=0;qe<this.boxKeys.length;qe++)Be.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(var et=0;et<this.circleKeys.length;et++){var vt=this.circles[3*et],xt=this.circles[3*et+1],ee=this.circles[3*et+2];Be.push({key:this.circleKeys[et],x1:vt-ee,y1:xt-ee,x2:vt+ee,y2:xt+ee})}return Ce?Be.filter(Ce):Be}return this._forEachCell(F,W,G,te,this._queryCell,Be,{hitTest:ve,seenUids:{box:{},circle:{}}},Ce),ve?Be.length>0:Be},xn.prototype._queryCircle=function(F,W,G,te,ve){var Ce=F-G,Be=F+G,qe=W-G,et=W+G;if(Be<0||Ce>this.width||et<0||qe>this.height)return!te&&[];var vt=[];return this._forEachCell(Ce,qe,Be,et,this._queryCellCircle,vt,{hitTest:te,circle:{x:F,y:W,radius:G},seenUids:{box:{},circle:{}}},ve),te?vt.length>0:vt},xn.prototype.query=function(F,W,G,te,ve){return this._query(F,W,G,te,!1,ve)},xn.prototype.hitTest=function(F,W,G,te,ve){return this._query(F,W,G,te,!0,ve)},xn.prototype.hitTestCircle=function(F,W,G,te){return this._queryCircle(F,W,G,!0,te)},xn.prototype._queryCell=function(F,W,G,te,ve,Ce,Be,qe){var et=Be.seenUids,vt=this.boxCells[ve];if(null!==vt)for(var xt=this.bboxes,ee=0,ce=vt;ee<ce.length;ee+=1){var Ae=ce[ee];if(!et.box[Ae]){et.box[Ae]=!0;var Oe=4*Ae;if(F<=xt[Oe+2]&&W<=xt[Oe+3]&&G>=xt[Oe+0]&&te>=xt[Oe+1]&&(!qe||qe(this.boxKeys[Ae]))){if(Be.hitTest)return Ce.push(!0),!0;Ce.push({key:this.boxKeys[Ae],x1:xt[Oe],y1:xt[Oe+1],x2:xt[Oe+2],y2:xt[Oe+3]})}}}var Fe=this.circleCells[ve];if(null!==Fe)for(var Ue=this.circles,Ge=0,Xe=Fe;Ge<Xe.length;Ge+=1){var rt=Xe[Ge];if(!et.circle[rt]){et.circle[rt]=!0;var ut=3*rt;if(this._circleAndRectCollide(Ue[ut],Ue[ut+1],Ue[ut+2],F,W,G,te)&&(!qe||qe(this.circleKeys[rt]))){if(Be.hitTest)return Ce.push(!0),!0;var Ct=Ue[ut],Rt=Ue[ut+1],Ft=Ue[ut+2];Ce.push({key:this.circleKeys[rt],x1:Ct-Ft,y1:Rt-Ft,x2:Ct+Ft,y2:Rt+Ft})}}}},xn.prototype._queryCellCircle=function(F,W,G,te,ve,Ce,Be,qe){var et=Be.circle,vt=Be.seenUids,xt=this.boxCells[ve];if(null!==xt)for(var ee=this.bboxes,ce=0,Ae=xt;ce<Ae.length;ce+=1){var Oe=Ae[ce];if(!vt.box[Oe]){vt.box[Oe]=!0;var Fe=4*Oe;if(this._circleAndRectCollide(et.x,et.y,et.radius,ee[Fe+0],ee[Fe+1],ee[Fe+2],ee[Fe+3])&&(!qe||qe(this.boxKeys[Oe])))return Ce.push(!0),!0}}var Ue=this.circleCells[ve];if(null!==Ue)for(var Ge=this.circles,Xe=0,rt=Ue;Xe<rt.length;Xe+=1){var ut=rt[Xe];if(!vt.circle[ut]){vt.circle[ut]=!0;var Ct=3*ut;if(this._circlesCollide(Ge[Ct],Ge[Ct+1],Ge[Ct+2],et.x,et.y,et.radius)&&(!qe||qe(this.circleKeys[ut])))return Ce.push(!0),!0}}},xn.prototype._forEachCell=function(F,W,G,te,ve,Ce,Be,qe){for(var et=this._convertToXCellCoord(F),vt=this._convertToYCellCoord(W),xt=this._convertToXCellCoord(G),ee=this._convertToYCellCoord(te),ce=et;ce<=xt;ce++)for(var Ae=vt;Ae<=ee;Ae++)if(ve.call(this,F,W,G,te,this.xCellCount*Ae+ce,Ce,Be,qe))return},xn.prototype._convertToXCellCoord=function(F){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(F*this.xScale)))},xn.prototype._convertToYCellCoord=function(F){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(F*this.yScale)))},xn.prototype._circlesCollide=function(F,W,G,te,ve,Ce){var Be=te-F,qe=ve-W,et=G+Ce;return et*et>Be*Be+qe*qe},xn.prototype._circleAndRectCollide=function(F,W,G,te,ve,Ce,Be){var qe=(Ce-te)/2,et=Math.abs(F-(te+qe));if(et>qe+G)return!1;var vt=(Be-ve)/2,xt=Math.abs(W-(ve+vt));if(xt>vt+G)return!1;if(et<=qe||xt<=vt)return!0;var ee=et-qe,ce=xt-vt;return ee*ee+ce*ce<=G*G};var er=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xn(F,W){for(var G=0;G<F;G++){var te=W.length;W.resize(te+4),W.float32.set(er,3*te)}}function mr(F,W,G){var te=W[0],ve=W[1];return F[0]=G[0]*te+G[4]*ve+G[12],F[1]=G[1]*te+G[5]*ve+G[13],F[3]=G[3]*te+G[7]*ve+G[15],F}var ur=100,$n=function(F,W,G){void 0===W&&(W=new xn(F.width+200,F.height+200,25)),void 0===G&&(G=new xn(F.width+200,F.height+200,25)),this.transform=F,this.grid=W,this.ignoredGrid=G,this.pitchfactor=Math.cos(F._pitch)*F.cameraToCenterDistance,this.screenRightBoundary=F.width+ur,this.screenBottomBoundary=F.height+ur,this.gridRightBoundary=F.width+200,this.gridBottomBoundary=F.height+200};function lr(F,W,G){return W*(l.EXTENT/(F.tileSize*Math.pow(2,G-F.tileID.overscaledZ)))}$n.prototype.placeCollisionBox=function(F,W,G,te,ve){var Ce=this.projectAndGetPerspectiveRatio(te,F.anchorPointX,F.anchorPointY),Be=G*Ce.perspectiveRatio,qe=F.x1*Be+Ce.point.x,et=F.y1*Be+Ce.point.y,vt=F.x2*Be+Ce.point.x,xt=F.y2*Be+Ce.point.y;return!this.isInsideGrid(qe,et,vt,xt)||!W&&this.grid.hitTest(qe,et,vt,xt,ve)?{box:[],offscreen:!1}:{box:[qe,et,vt,xt],offscreen:this.isOffscreen(qe,et,vt,xt)}},$n.prototype.placeCollisionCircles=function(F,W,G,te,ve,Ce,Be,qe,et,vt,xt,ee,ce){var Ae=[],Oe=new l.Point(W.anchorX,W.anchorY),Fe=en(Oe,Ce),Ue=vn(this.transform.cameraToCenterDistance,Fe.signedDistanceFromCamera),Ge=(vt?ve/Ue:ve*Ue)/l.ONE_EM,Xe=en(Oe,Be).point,rt=En(Ge,te,W.lineOffsetX*Ge,W.lineOffsetY*Ge,!1,Xe,Oe,W,G,Be,{}),ut=!1,Ct=!1,Rt=!0;if(rt){for(var Ft=.5*ee*Ue+ce,Yt=new l.Point(-100,-100),cn=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Wt=new nn,tn=rt.first,$t=rt.last,_n=[],dn=tn.path.length-1;dn>=1;dn--)_n.push(tn.path[dn]);for(var Qt=1;Qt<$t.path.length;Qt++)_n.push($t.path[Qt]);var Cn=2.5*Ft;if(qe){var Dn=_n.map(function(_i){return en(_i,qe)});_n=Dn.some(function(_i){return _i.signedDistanceFromCamera<=0})?[]:Dn.map(function(_i){return _i.point})}var Jn=[];if(_n.length>0){for(var Kn=_n[0].clone(),vr=_n[0].clone(),yr=1;yr<_n.length;yr++)Kn.x=Math.min(Kn.x,_n[yr].x),Kn.y=Math.min(Kn.y,_n[yr].y),vr.x=Math.max(vr.x,_n[yr].x),vr.y=Math.max(vr.y,_n[yr].y);Jn=Kn.x>=Yt.x&&vr.x<=cn.x&&Kn.y>=Yt.y&&vr.y<=cn.y?[_n]:vr.x<Yt.x||Kn.x>cn.x||vr.y<Yt.y||Kn.y>cn.y?[]:l.clipLine([_n],Yt.x,Yt.y,cn.x,cn.y)}for(var fr=0,gr=Jn;fr<gr.length;fr+=1){var Vr;Wt.reset(gr[fr],.25*Ft),Vr=Wt.length<=.5*Ft?1:Math.ceil(Wt.paddedLength/Cn)+1;for(var Hr=0;Hr<Vr;Hr++){var pr=Hr/Math.max(Vr-1,1),Er=Wt.lerp(pr),Fr=Er.x+ur,Dr=Er.y+ur;Ae.push(Fr,Dr,Ft,0);var Yr=Fr-Ft,Zr=Dr-Ft,Qr=Fr+Ft,hi=Dr+Ft;if(Rt=Rt&&this.isOffscreen(Yr,Zr,Qr,hi),Ct=Ct||this.isInsideGrid(Yr,Zr,Qr,hi),!F&&this.grid.hitTestCircle(Fr,Dr,Ft,xt)&&(ut=!0,!et))return{circles:[],offscreen:!1,collisionDetected:ut}}}}return{circles:!et&&ut||!Ct?[]:Ae,offscreen:Rt,collisionDetected:ut}},$n.prototype.queryRenderedSymbols=function(F){if(0===F.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var W=[],G=1/0,te=1/0,ve=-1/0,Ce=-1/0,Be=0,qe=F;Be<qe.length;Be+=1){var et=qe[Be],vt=new l.Point(et.x+ur,et.y+ur);G=Math.min(G,vt.x),te=Math.min(te,vt.y),ve=Math.max(ve,vt.x),Ce=Math.max(Ce,vt.y),W.push(vt)}for(var xt={},ee={},ce=0,Ae=this.grid.query(G,te,ve,Ce).concat(this.ignoredGrid.query(G,te,ve,Ce));ce<Ae.length;ce+=1){var Oe=Ae[ce],Fe=Oe.key;if(void 0===xt[Fe.bucketInstanceId]&&(xt[Fe.bucketInstanceId]={}),!xt[Fe.bucketInstanceId][Fe.featureIndex]){var Ue=[new l.Point(Oe.x1,Oe.y1),new l.Point(Oe.x2,Oe.y1),new l.Point(Oe.x2,Oe.y2),new l.Point(Oe.x1,Oe.y2)];l.polygonIntersectsPolygon(W,Ue)&&(xt[Fe.bucketInstanceId][Fe.featureIndex]=!0,void 0===ee[Fe.bucketInstanceId]&&(ee[Fe.bucketInstanceId]=[]),ee[Fe.bucketInstanceId].push(Fe.featureIndex))}}return ee},$n.prototype.insertCollisionBox=function(F,W,G,te,ve){(W?this.ignoredGrid:this.grid).insert({bucketInstanceId:G,featureIndex:te,collisionGroupID:ve},F[0],F[1],F[2],F[3])},$n.prototype.insertCollisionCircles=function(F,W,G,te,ve){for(var Ce=W?this.ignoredGrid:this.grid,Be={bucketInstanceId:G,featureIndex:te,collisionGroupID:ve},qe=0;qe<F.length;qe+=4)Ce.insertCircle(Be,F[qe],F[qe+1],F[qe+2])},$n.prototype.projectAndGetPerspectiveRatio=function(F,W,G){var te=[W,G,0,1];return mr(te,te,F),{point:new l.Point((te[0]/te[3]+1)/2*this.transform.width+ur,(-te[1]/te[3]+1)/2*this.transform.height+ur),perspectiveRatio:.5+this.transform.cameraToCenterDistance/te[3]*.5}},$n.prototype.isOffscreen=function(F,W,G,te){return G<ur||F>=this.screenRightBoundary||te<ur||W>this.screenBottomBoundary},$n.prototype.isInsideGrid=function(F,W,G,te){return G>=0&&F<this.gridRightBoundary&&te>=0&&W<this.gridBottomBoundary},$n.prototype.getViewportMatrix=function(){var F=l.identity([]);return l.translate(F,F,[-100,-100,0]),F};var hr=function(F,W,G,te){this.opacity=F?Math.max(0,Math.min(1,F.opacity+(F.placed?W:-W))):te&&G?1:0,this.placed=G};hr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Gt=function(F,W,G,te,ve){this.text=new hr(F?F.text:null,W,G,ve),this.icon=new hr(F?F.icon:null,W,te,ve)};Gt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var pn=function(F,W,G){this.text=F,this.icon=W,this.skipFade=G},An=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},Tn=function(F,W,G,te,ve){this.bucketInstanceId=F,this.featureIndex=W,this.sourceLayerIndex=G,this.bucketIndex=te,this.tileID=ve},Rn=function(F){this.crossSourceCollisions=F,this.maxGroupID=0,this.collisionGroups={}};function qn(F,W,G,te,ve){var Ce=l.getAnchorAlignment(F),Be=-(Ce.horizontalAlign-.5)*W,qe=-(Ce.verticalAlign-.5)*G,et=l.evaluateVariableOffset(F,te);return new l.Point(Be+et[0]*ve,qe+et[1]*ve)}function Un(F,W,G,te,ve,Ce){var Be=F.x1,qe=F.x2,et=F.y1,vt=F.y2,xt=F.anchorPointX,ee=F.anchorPointY,ce=new l.Point(W,G);return te&&ce._rotate(ve?Ce:-Ce),{x1:Be+ce.x,y1:et+ce.y,x2:qe+ce.x,y2:vt+ce.y,anchorPointX:xt,anchorPointY:ee}}Rn.prototype.get=function(F){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[F]){var W=++this.maxGroupID;this.collisionGroups[F]={ID:W,predicate:function(G){return G.collisionGroupID===W}}}return this.collisionGroups[F]};var Yn=function(F,W,G,te){this.transform=F.clone(),this.collisionIndex=new $n(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=W,this.retainedQueryData={},this.collisionGroups=new Rn(G),this.collisionCircleArrays={},this.prevPlacement=te,te&&(te.prevPlacement=void 0),this.placedOrientations={}};function or(F,W,G,te,ve){F.emplaceBack(W?1:0,G?1:0,te||0,ve||0),F.emplaceBack(W?1:0,G?1:0,te||0,ve||0),F.emplaceBack(W?1:0,G?1:0,te||0,ve||0),F.emplaceBack(W?1:0,G?1:0,te||0,ve||0)}Yn.prototype.getBucketParts=function(F,W,G,te){var ve=G.getBucket(W),Ce=G.latestFeatureIndex;if(ve&&Ce&&W.id===ve.layerIds[0]){var Be=G.collisionBoxArray,qe=ve.layers[0].layout,et=Math.pow(2,this.transform.zoom-G.tileID.overscaledZ),vt=G.tileSize/l.EXTENT,xt=this.transform.calculatePosMatrix(G.tileID.toUnwrapped()),ee="map"===qe.get("text-pitch-alignment"),ce="map"===qe.get("text-rotation-alignment"),Ae=lr(G,1,this.transform.zoom),Oe=jn(xt,ee,ce,this.transform,Ae),Fe=null;if(ee){var Ue=mn(xt,ee,ce,this.transform,Ae);Fe=l.multiply([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[ve.bucketInstanceId]=new Tn(ve.bucketInstanceId,Ce,ve.sourceLayerIndex,ve.index,G.tileID);var Ge={bucket:ve,layout:qe,posMatrix:xt,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Fe,scale:et,textPixelRatio:vt,holdingForFade:G.holdingForFade(),collisionBoxArray:Be,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(ve.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ve.sourceID)};if(te)for(var Xe=0,rt=ve.sortKeyRanges;Xe<rt.length;Xe+=1){var ut=rt[Xe];F.push({sortKey:ut.sortKey,symbolInstanceStart:ut.symbolInstanceStart,symbolInstanceEnd:ut.symbolInstanceEnd,parameters:Ge})}else F.push({symbolInstanceStart:0,symbolInstanceEnd:ve.symbolInstances.length,parameters:Ge})}},Yn.prototype.attemptAnchorPlacement=function(F,W,G,te,ve,Ce,Be,qe,et,vt,xt,ee,ce,Ae,Oe){var Fe,Ue=[ee.textOffset0,ee.textOffset1],Ge=qn(F,G,te,Ue,ve),Xe=this.collisionIndex.placeCollisionBox(Un(W,Ge.x,Ge.y,Ce,Be,this.transform.angle),xt,qe,et,vt.predicate);if(!Oe||0!==this.collisionIndex.placeCollisionBox(Un(Oe,Ge.x,Ge.y,Ce,Be,this.transform.angle),xt,qe,et,vt.predicate).box.length)return Xe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Fe=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),this.variableOffsets[ee.crossTileID]={textOffset:Ue,width:G,height:te,anchor:F,textBoxScale:ve,prevAnchor:Fe},this.markUsedJustification(ce,F,ee,Ae),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,Ae,ee),this.placedOrientations[ee.crossTileID]=Ae),{shift:Ge,placedGlyphBoxes:Xe}):void 0},Yn.prototype.placeLayerBucketPart=function(F,W,G){var te=this,ve=F.parameters,Ce=ve.bucket,Be=ve.layout,qe=ve.posMatrix,et=ve.textLabelPlaneMatrix,vt=ve.labelToScreenMatrix,xt=ve.textPixelRatio,ee=ve.holdingForFade,ce=ve.collisionBoxArray,Ae=ve.partiallyEvaluatedTextSize,Oe=ve.collisionGroup,Fe=Be.get("text-optional"),Ue=Be.get("icon-optional"),Ge=Be.get("text-allow-overlap"),Xe=Be.get("icon-allow-overlap"),rt="map"===Be.get("text-rotation-alignment"),ut="map"===Be.get("text-pitch-alignment"),Ct="none"!==Be.get("icon-text-fit"),Rt="viewport-y"===Be.get("symbol-z-order"),Ft=Ge&&(Xe||!Ce.hasIconData()||Ue),Yt=Xe&&(Ge||!Ce.hasTextData()||Fe);!Ce.collisionArrays&&ce&&Ce.deserializeCollisionBoxes(ce);var cn=function(Qt,Cn){if(!W[Qt.crossTileID])if(ee)te.placements[Qt.crossTileID]=new pn(!1,!1,!1);else{var Dn,Jn=!1,Kn=!1,vr=!0,yr=null,fr={box:null,offscreen:null},gr={box:null,offscreen:null},Sr=null,Vr=null,Hr=0,pr=0,Er=0;Cn.textFeatureIndex?Hr=Cn.textFeatureIndex:Qt.useRuntimeCollisionCircles&&(Hr=Qt.featureIndex),Cn.verticalTextFeatureIndex&&(pr=Cn.verticalTextFeatureIndex);var Fr=Cn.textBox;if(Fr){var Dr=function(Wr){var ji=l.WritingMode.horizontal;if(Ce.allowVerticalPlacement&&!Wr&&te.prevPlacement){var ga=te.prevPlacement.placedOrientations[Qt.crossTileID];ga&&(te.placedOrientations[Qt.crossTileID]=ga,te.markUsedOrientation(Ce,ji=ga,Qt))}return ji},Yr=function(Wr,ji){if(Ce.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Cn.verticalTextBox)for(var ga=0,Ds=Ce.writingModes;ga<Ds.length&&(Ds[ga]===l.WritingMode.vertical?(fr=ji(),gr=fr):fr=Wr(),!(fr&&fr.box&&fr.box.length));ga+=1);else fr=Wr()};if(Be.get("text-variable-anchor")){var Zr=Be.get("text-variable-anchor");if(te.prevPlacement&&te.prevPlacement.variableOffsets[Qt.crossTileID]){var Qr=te.prevPlacement.variableOffsets[Qt.crossTileID];Zr.indexOf(Qr.anchor)>0&&(Zr=Zr.filter(function(Wr){return Wr!==Qr.anchor})).unshift(Qr.anchor)}var hi=function(Wr,ji,ga){for(var Ds=Wr.x2-Wr.x1,sc=Wr.y2-Wr.y1,Jl=Qt.textBoxScale,lc=Ct&&!Xe?ji:null,cl={box:[],offscreen:!1},wu=Ge?2*Zr.length:Zr.length,xl=0;xl<wu;++xl){var Qs=te.attemptAnchorPlacement(Zr[xl%Zr.length],Wr,Ds,sc,Jl,rt,ut,xt,qe,Oe,xl>=Zr.length,Qt,Ce,ga,lc);if(Qs&&(cl=Qs.placedGlyphBoxes)&&cl.box&&cl.box.length){Jn=!0,yr=Qs.shift;break}}return cl};Yr(function(){return hi(Fr,Cn.iconBox,l.WritingMode.horizontal)},function(){var Wr=Cn.verticalTextBox;return Ce.allowVerticalPlacement&&!(fr&&fr.box&&fr.box.length)&&Qt.numVerticalGlyphVertices>0&&Wr?hi(Wr,Cn.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),fr&&(Jn=fr.box,vr=fr.offscreen);var _i=Dr(fr&&fr.box);if(!Jn&&te.prevPlacement){var vi=te.prevPlacement.variableOffsets[Qt.crossTileID];vi&&(te.variableOffsets[Qt.crossTileID]=vi,te.markUsedJustification(Ce,vi.anchor,Qt,_i))}}else{var ci=function(Wr,ji){var ga=te.collisionIndex.placeCollisionBox(Wr,Ge,xt,qe,Oe.predicate);return ga&&ga.box&&ga.box.length&&(te.markUsedOrientation(Ce,ji,Qt),te.placedOrientations[Qt.crossTileID]=ji),ga};Yr(function(){return ci(Fr,l.WritingMode.horizontal)},function(){var Wr=Cn.verticalTextBox;return Ce.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&Wr?ci(Wr,l.WritingMode.vertical):{box:null,offscreen:null}}),Dr(fr&&fr.box&&fr.box.length)}}if(Jn=(Dn=fr)&&Dn.box&&Dn.box.length>0,vr=Dn&&Dn.offscreen,Qt.useRuntimeCollisionCircles){var pi=Ce.text.placedSymbolArray.get(Qt.centerJustifiedTextSymbolIndex),mi=l.evaluateSizeForFeature(Ce.textSizeData,Ae,pi),Ci=Be.get("text-padding");Sr=te.collisionIndex.placeCollisionCircles(Ge,pi,Ce.lineVertexArray,Ce.glyphOffsetArray,mi,qe,et,vt,G,ut,Oe.predicate,Qt.collisionCircleDiameter,Ci),Jn=Ge||Sr.circles.length>0&&!Sr.collisionDetected,vr=vr&&Sr.offscreen}if(Cn.iconFeatureIndex&&(Er=Cn.iconFeatureIndex),Cn.iconBox){var Ni=function(Wr){var ji=Ct&&yr?Un(Wr,yr.x,yr.y,rt,ut,te.transform.angle):Wr;return te.collisionIndex.placeCollisionBox(ji,Xe,xt,qe,Oe.predicate)};Kn=gr&&gr.box&&gr.box.length&&Cn.verticalIconBox?(Vr=Ni(Cn.verticalIconBox)).box.length>0:(Vr=Ni(Cn.iconBox)).box.length>0,vr=vr&&Vr.offscreen}var Nr=Fe||0===Qt.numHorizontalGlyphVertices&&0===Qt.numVerticalGlyphVertices,Yi=Ue||0===Qt.numIconVertices;if(Nr||Yi?Yi?Nr||(Kn=Kn&&Jn):Jn=Kn&&Jn:Kn=Jn=Kn&&Jn,Jn&&Dn&&Dn.box&&te.collisionIndex.insertCollisionBox(Dn.box,Be.get("text-ignore-placement"),Ce.bucketInstanceId,gr&&gr.box&&pr?pr:Hr,Oe.ID),Kn&&Vr&&te.collisionIndex.insertCollisionBox(Vr.box,Be.get("icon-ignore-placement"),Ce.bucketInstanceId,Er,Oe.ID),Sr&&(Jn&&te.collisionIndex.insertCollisionCircles(Sr.circles,Be.get("text-ignore-placement"),Ce.bucketInstanceId,Hr,Oe.ID),G)){var ta=Ce.bucketInstanceId,Si=te.collisionCircleArrays[ta];void 0===Si&&(Si=te.collisionCircleArrays[ta]=new An);for(var Ya=0;Ya<Sr.circles.length;Ya+=4)Si.circles.push(Sr.circles[Ya+0]),Si.circles.push(Sr.circles[Ya+1]),Si.circles.push(Sr.circles[Ya+2]),Si.circles.push(Sr.collisionDetected?1:0)}te.placements[Qt.crossTileID]=new pn(Jn||Ft,Kn||Yt,vr||Ce.justReloaded),W[Qt.crossTileID]=!0}};if(Rt)for(var Wt=Ce.getSortedSymbolIndexes(this.transform.angle),tn=Wt.length-1;tn>=0;--tn){var $t=Wt[tn];cn(Ce.symbolInstances.get($t),Ce.collisionArrays[$t])}else for(var _n=F.symbolInstanceStart;_n<F.symbolInstanceEnd;_n++)cn(Ce.symbolInstances.get(_n),Ce.collisionArrays[_n]);if(G&&Ce.bucketInstanceId in this.collisionCircleArrays){var dn=this.collisionCircleArrays[Ce.bucketInstanceId];l.invert(dn.invProjMatrix,qe),dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ce.justReloaded=!1},Yn.prototype.markUsedJustification=function(F,W,G,te){var ve;ve=te===l.WritingMode.vertical?G.verticalPlacedTextSymbolIndex:{left:G.leftJustifiedTextSymbolIndex,center:G.centerJustifiedTextSymbolIndex,right:G.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(W)];for(var Be=0,qe=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex,G.verticalPlacedTextSymbolIndex];Be<qe.length;Be+=1){var et=qe[Be];et>=0&&(F.text.placedSymbolArray.get(et).crossTileID=ve>=0&&et!==ve?0:G.crossTileID)}},Yn.prototype.markUsedOrientation=function(F,W,G){for(var te=W===l.WritingMode.horizontal||W===l.WritingMode.horizontalOnly?W:0,ve=W===l.WritingMode.vertical?W:0,Ce=0,Be=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex];Ce<Be.length;Ce+=1)F.text.placedSymbolArray.get(Be[Ce]).placedOrientation=te;G.verticalPlacedTextSymbolIndex&&(F.text.placedSymbolArray.get(G.verticalPlacedTextSymbolIndex).placedOrientation=ve)},Yn.prototype.commit=function(F){this.commitTime=F,this.zoomAtLastRecencyCheck=this.transform.zoom;var W=this.prevPlacement,G=!1;this.prevZoomAdjustment=W?W.zoomAdjustment(this.transform.zoom):0;var te=W?W.symbolFadeChange(F):1,ve=W?W.opacities:{},Ce=W?W.variableOffsets:{},Be=W?W.placedOrientations:{};for(var qe in this.placements){var et=this.placements[qe],vt=ve[qe];vt?(this.opacities[qe]=new Gt(vt,te,et.text,et.icon),G=G||et.text!==vt.text.placed||et.icon!==vt.icon.placed):(this.opacities[qe]=new Gt(null,te,et.text,et.icon,et.skipFade),G=G||et.text||et.icon)}for(var xt in ve){var ee=ve[xt];if(!this.opacities[xt]){var ce=new Gt(ee,te,!1,!1);ce.isHidden()||(this.opacities[xt]=ce,G=G||ee.text.placed||ee.icon.placed)}}for(var Ae in Ce)this.variableOffsets[Ae]||!this.opacities[Ae]||this.opacities[Ae].isHidden()||(this.variableOffsets[Ae]=Ce[Ae]);for(var Oe in Be)this.placedOrientations[Oe]||!this.opacities[Oe]||this.opacities[Oe].isHidden()||(this.placedOrientations[Oe]=Be[Oe]);G?this.lastPlacementChangeTime=F:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=W?W.lastPlacementChangeTime:F)},Yn.prototype.updateLayerOpacities=function(F,W){for(var G={},te=0,ve=W;te<ve.length;te+=1){var Ce=ve[te],Be=Ce.getBucket(F);Be&&Ce.latestFeatureIndex&&F.id===Be.layerIds[0]&&this.updateBucketOpacities(Be,G,Ce.collisionBoxArray)}},Yn.prototype.updateBucketOpacities=function(F,W,G){var te=this;F.hasTextData()&&F.text.opacityVertexArray.clear(),F.hasIconData()&&F.icon.opacityVertexArray.clear(),F.hasIconCollisionBoxData()&&F.iconCollisionBox.collisionVertexArray.clear(),F.hasTextCollisionBoxData()&&F.textCollisionBox.collisionVertexArray.clear();var ve=F.layers[0].layout,Ce=new Gt(null,0,!1,!1,!0),Be=ve.get("text-allow-overlap"),qe=ve.get("icon-allow-overlap"),et=ve.get("text-variable-anchor"),vt="map"===ve.get("text-rotation-alignment"),xt="map"===ve.get("text-pitch-alignment"),ee="none"!==ve.get("icon-text-fit"),ce=new Gt(null,0,Be&&(qe||!F.hasIconData()||ve.get("icon-optional")),qe&&(Be||!F.hasTextData()||ve.get("text-optional")),!0);!F.collisionArrays&&G&&(F.hasIconCollisionBoxData()||F.hasTextCollisionBoxData())&&F.deserializeCollisionBoxes(G);for(var Ae=function(Ge,Xe,rt){for(var ut=0;ut<Xe/4;ut++)Ge.opacityVertexArray.emplaceBack(rt)},Oe=function(Ge){var Xe=F.symbolInstances.get(Ge),rt=Xe.numHorizontalGlyphVertices,ut=Xe.numVerticalGlyphVertices,Ct=Xe.crossTileID,Ft=te.opacities[Ct];W[Ct]?Ft=Ce:Ft||(te.opacities[Ct]=Ft=ce),W[Ct]=!0;var cn=Xe.numIconVertices>0,Wt=te.placedOrientations[Xe.crossTileID],tn=Wt===l.WritingMode.vertical,$t=Wt===l.WritingMode.horizontal||Wt===l.WritingMode.horizontalOnly;if(rt>0||ut>0){var _n=wn(Ft.text);Ae(F.text,rt,tn?ln:_n),Ae(F.text,ut,$t?ln:_n);var Cn=Ft.text.isHidden();[Xe.rightJustifiedTextSymbolIndex,Xe.centerJustifiedTextSymbolIndex,Xe.leftJustifiedTextSymbolIndex].forEach(function(Er){Er>=0&&(F.text.placedSymbolArray.get(Er).hidden=Cn||tn?1:0)}),Xe.verticalPlacedTextSymbolIndex>=0&&(F.text.placedSymbolArray.get(Xe.verticalPlacedTextSymbolIndex).hidden=Cn||$t?1:0);var Dn=te.variableOffsets[Xe.crossTileID];Dn&&te.markUsedJustification(F,Dn.anchor,Xe,Wt);var Jn=te.placedOrientations[Xe.crossTileID];Jn&&(te.markUsedJustification(F,"left",Xe,Jn),te.markUsedOrientation(F,Jn,Xe))}if(cn){var Kn=wn(Ft.icon),vr=!(ee&&Xe.verticalPlacedIconSymbolIndex&&tn);Xe.placedIconSymbolIndex>=0&&(Ae(F.icon,Xe.numIconVertices,vr?Kn:ln),F.icon.placedSymbolArray.get(Xe.placedIconSymbolIndex).hidden=Ft.icon.isHidden()),Xe.verticalPlacedIconSymbolIndex>=0&&(Ae(F.icon,Xe.numVerticalIconVertices,vr?ln:Kn),F.icon.placedSymbolArray.get(Xe.verticalPlacedIconSymbolIndex).hidden=Ft.icon.isHidden())}if(F.hasIconCollisionBoxData()||F.hasTextCollisionBoxData()){var gr=F.collisionArrays[Ge];if(gr){var Sr=new l.Point(0,0);if(gr.textBox||gr.verticalTextBox){var Vr=!0;if(et){var Hr=te.variableOffsets[Ct];Hr?(Sr=qn(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textBoxScale),vt&&Sr._rotate(xt?te.transform.angle:-te.transform.angle)):Vr=!1}gr.textBox&&or(F.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||tn,Sr.x,Sr.y),gr.verticalTextBox&&or(F.textCollisionBox.collisionVertexArray,Ft.text.placed,!Vr||$t,Sr.x,Sr.y)}var pr=Boolean(!$t&&gr.verticalIconBox);gr.iconBox&&or(F.iconCollisionBox.collisionVertexArray,Ft.icon.placed,pr,ee?Sr.x:0,ee?Sr.y:0),gr.verticalIconBox&&or(F.iconCollisionBox.collisionVertexArray,Ft.icon.placed,!pr,ee?Sr.x:0,ee?Sr.y:0)}}},Fe=0;Fe<F.symbolInstances.length;Fe++)Oe(Fe);if(F.sortFeatures(this.transform.angle),this.retainedQueryData[F.bucketInstanceId]&&(this.retainedQueryData[F.bucketInstanceId].featureSortOrder=F.featureSortOrder),F.hasTextData()&&F.text.opacityVertexBuffer&&F.text.opacityVertexBuffer.updateData(F.text.opacityVertexArray),F.hasIconData()&&F.icon.opacityVertexBuffer&&F.icon.opacityVertexBuffer.updateData(F.icon.opacityVertexArray),F.hasIconCollisionBoxData()&&F.iconCollisionBox.collisionVertexBuffer&&F.iconCollisionBox.collisionVertexBuffer.updateData(F.iconCollisionBox.collisionVertexArray),F.hasTextCollisionBoxData()&&F.textCollisionBox.collisionVertexBuffer&&F.textCollisionBox.collisionVertexBuffer.updateData(F.textCollisionBox.collisionVertexArray),F.bucketInstanceId in this.collisionCircleArrays){var Ue=this.collisionCircleArrays[F.bucketInstanceId];F.placementInvProjMatrix=Ue.invProjMatrix,F.placementViewportMatrix=Ue.viewportMatrix,F.collisionCircleArray=Ue.circles,delete this.collisionCircleArrays[F.bucketInstanceId]}},Yn.prototype.symbolFadeChange=function(F){return 0===this.fadeDuration?1:(F-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yn.prototype.zoomAdjustment=function(F){return Math.max(0,(this.transform.zoom-F)/1.5)},Yn.prototype.hasTransitions=function(F){return this.stale||F-this.lastPlacementChangeTime<this.fadeDuration},Yn.prototype.stillRecent=function(F,W){var G=this.zoomAtLastRecencyCheck===W?1-this.zoomAdjustment(W):1;return this.zoomAtLastRecencyCheck=W,this.commitTime+this.fadeDuration*G>F},Yn.prototype.setStale=function(){this.stale=!0};var Jt=Math.pow(2,25),Mn=Math.pow(2,24),zt=Math.pow(2,17),Zt=Math.pow(2,16),rn=Math.pow(2,9),Ln=Math.pow(2,8),Sn=Math.pow(2,1);function wn(F){if(0===F.opacity&&!F.placed)return 0;if(1===F.opacity&&F.placed)return 4294967295;var W=F.placed?1:0,G=Math.floor(127*F.opacity);return G*Jt+W*Mn+G*zt+W*Zt+G*rn+W*Ln+G*Sn+W}var ln=0,gn=function(F){this._sortAcrossTiles="viewport-y"!==F.layout.get("symbol-z-order")&&void 0!==F.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};gn.prototype.continuePlacement=function(F,W,G,te,ve){for(var Ce=this._bucketParts;this._currentTileIndex<F.length;)if(W.getBucketParts(Ce,te,F[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ve())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ce.sort(function(et,vt){return et.sortKey-vt.sortKey}));this._currentPartIndex<Ce.length;)if(W.placeLayerBucketPart(Ce[this._currentPartIndex],this._seenCrossTileIDs,G),this._currentPartIndex++,ve())return!0;return!1};var un=function(F,W,G,te,ve,Ce,Be){this.placement=new Yn(F,ve,Ce,Be),this._currentPlacementIndex=W.length-1,this._forceFullPlacement=G,this._showCollisionBoxes=te,this._done=!1};un.prototype.isDone=function(){return this._done},un.prototype.continuePlacement=function(F,W,G){for(var te=this,ve=l.browser.now(),Ce=function(){var et=l.browser.now()-ve;return!te._forceFullPlacement&&et>2};this._currentPlacementIndex>=0;){var Be=W[F[this._currentPlacementIndex]],qe=this.placement.collisionIndex.transform.zoom;if("symbol"===Be.type&&(!Be.minzoom||Be.minzoom<=qe)&&(!Be.maxzoom||Be.maxzoom>qe)){if(this._inProgressLayer||(this._inProgressLayer=new gn(Be)),this._inProgressLayer.continuePlacement(G[Be.source],this.placement,this._showCollisionBoxes,Be,Ce))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},un.prototype.commit=function(F){return this.placement.commit(F),this.placement};var hn=512/l.EXTENT/2,bn=function(F,W,G){this.tileID=F,this.indexedSymbolInstances={},this.bucketInstanceId=G;for(var te=0;te<W.length;te++){var ve=W.get(te),Ce=ve.key;this.indexedSymbolInstances[Ce]||(this.indexedSymbolInstances[Ce]=[]),this.indexedSymbolInstances[Ce].push({crossTileID:ve.crossTileID,coord:this.getScaledCoordinates(ve,F)})}};bn.prototype.getScaledCoordinates=function(F,W){var te=hn/Math.pow(2,W.canonical.z-this.tileID.canonical.z);return{x:Math.floor((W.canonical.x*l.EXTENT+F.anchorX)*te),y:Math.floor((W.canonical.y*l.EXTENT+F.anchorY)*te)}},bn.prototype.findMatches=function(F,W,G){for(var te=this.tileID.canonical.z<W.canonical.z?1:Math.pow(2,this.tileID.canonical.z-W.canonical.z),ve=0;ve<F.length;ve++){var Ce=F.get(ve);if(!Ce.crossTileID){var Be=this.indexedSymbolInstances[Ce.key];if(Be)for(var qe=this.getScaledCoordinates(Ce,W),et=0,vt=Be;et<vt.length;et+=1){var xt=vt[et];if(Math.abs(xt.coord.x-qe.x)<=te&&Math.abs(xt.coord.y-qe.y)<=te&&!G[xt.crossTileID]){G[xt.crossTileID]=!0,Ce.crossTileID=xt.crossTileID;break}}}}};var In=function(){this.maxCrossTileID=0};In.prototype.generate=function(){return++this.maxCrossTileID};var Hn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Hn.prototype.handleWrapJump=function(F){var W=Math.round((F-this.lng)/360);if(0!==W)for(var G in this.indexes){var te=this.indexes[G],ve={};for(var Ce in te){var Be=te[Ce];Be.tileID=Be.tileID.unwrapTo(Be.tileID.wrap+W),ve[Be.tileID.key]=Be}this.indexes[G]=ve}this.lng=F},Hn.prototype.addBucket=function(F,W,G){if(this.indexes[F.overscaledZ]&&this.indexes[F.overscaledZ][F.key]){if(this.indexes[F.overscaledZ][F.key].bucketInstanceId===W.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(F.overscaledZ,this.indexes[F.overscaledZ][F.key])}for(var te=0;te<W.symbolInstances.length;te++)W.symbolInstances.get(te).crossTileID=0;this.usedCrossTileIDs[F.overscaledZ]||(this.usedCrossTileIDs[F.overscaledZ]={});var ve=this.usedCrossTileIDs[F.overscaledZ];for(var Ce in this.indexes){var Be=this.indexes[Ce];if(Number(Ce)>F.overscaledZ)for(var qe in Be){var et=Be[qe];et.tileID.isChildOf(F)&&et.findMatches(W.symbolInstances,F,ve)}else{var vt=Be[F.scaledTo(Number(Ce)).key];vt&&vt.findMatches(W.symbolInstances,F,ve)}}for(var xt=0;xt<W.symbolInstances.length;xt++){var ee=W.symbolInstances.get(xt);ee.crossTileID||(ee.crossTileID=G.generate(),ve[ee.crossTileID]=!0)}return void 0===this.indexes[F.overscaledZ]&&(this.indexes[F.overscaledZ]={}),this.indexes[F.overscaledZ][F.key]=new bn(F,W.symbolInstances,W.bucketInstanceId),!0},Hn.prototype.removeBucketCrossTileIDs=function(F,W){for(var G in W.indexedSymbolInstances)for(var te=0,ve=W.indexedSymbolInstances[G];te<ve.length;te+=1)delete this.usedCrossTileIDs[F][ve[te].crossTileID]},Hn.prototype.removeStaleBuckets=function(F){var W=!1;for(var G in this.indexes){var te=this.indexes[G];for(var ve in te)F[te[ve].bucketInstanceId]||(this.removeBucketCrossTileIDs(G,te[ve]),delete te[ve],W=!0)}return W};var Wn=function(){this.layerIndexes={},this.crossTileIDs=new In,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wn.prototype.addLayer=function(F,W,G){var te=this.layerIndexes[F.id];void 0===te&&(te=this.layerIndexes[F.id]=new Hn);var ve=!1,Ce={};te.handleWrapJump(G);for(var Be=0,qe=W;Be<qe.length;Be+=1){var et=qe[Be],vt=et.getBucket(F);vt&&F.id===vt.layerIds[0]&&(vt.bucketInstanceId||(vt.bucketInstanceId=++this.maxBucketInstanceId),te.addBucket(et.tileID,vt,this.crossTileIDs)&&(ve=!0),Ce[vt.bucketInstanceId]=!0)}return te.removeStaleBuckets(Ce)&&(ve=!0),ve},Wn.prototype.pruneUnusedLayers=function(F){var W={};for(var G in F.forEach(function(te){W[te]=!0}),this.layerIndexes)W[G]||delete this.layerIndexes[G]};var Gn=function(F,W){return l.emitValidationErrors(F,W&&W.filter(function(G){return"source.canvas"!==G.identifier}))},nr=l.pick(gt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),tr=l.pick(gt,["setCenter","setZoom","setBearing","setPitch"]),ar=function(){var F={},W=l.styleSpec.$version;for(var G in l.styleSpec.$root){var ve,te=l.styleSpec.$root[G];te.required&&null!=(ve="version"===G?W:"array"===te.type?[]:{})&&(F[G]=ve)}return F}(),ir=function(F){function W(G,te){var ve=this;void 0===te&&(te={}),F.call(this),this.map=G,this.dispatcher=new L(At(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new m(G._requestManager,te.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Wn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var Ce=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Be){Ce.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Be.pluginStatus,pluginURL:Be.pluginURL},function(et,vt){if(l.triggerPluginCompletionEvent(et),vt&&vt.every(function(ee){return ee}))for(var xt in Ce.sourceCaches)Ce.sourceCaches[xt].reload()})}),this.on("data",function(Be){if("source"===Be.dataType&&"metadata"===Be.sourceDataType){var qe=ve.sourceCaches[Be.sourceId];if(qe){var et=qe.getSource();if(et&&et.vectorLayerIds)for(var vt in ve._layers){var xt=ve._layers[vt];xt.source===et.id&&ve._validateLayer(xt)}}}})}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.loadURL=function(G,te){var ve=this;void 0===te&&(te={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var Ce="boolean"==typeof te.validate?te.validate:!l.isMapboxURL(G);G=this.map._requestManager.normalizeStyleURL(G,te.accessToken);var Be=this.map._requestManager.transformRequest(G,l.ResourceType.Style);this._request=l.getJSON(Be,function(qe,et){ve._request=null,qe?ve.fire(new l.ErrorEvent(qe)):et&&ve._load(et,Ce)})},W.prototype.loadJSON=function(G,te){var ve=this;void 0===te&&(te={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){ve._request=null,ve._load(G,!1!==te.validate)})},W.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ar,!1)},W.prototype._load=function(G,te){if(!te||!Gn(this,l.validateStyle(G))){for(var ve in this._loaded=!0,this.stylesheet=G,G.sources)this.addSource(ve,G.sources[ve],{validate:!1});G.sprite?this._loadSprite(G.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(G.glyphs);var Ce=Et(this.stylesheet.layers);this._order=Ce.map(function(vt){return vt.id}),this._layers={},this._serializedLayers={};for(var Be=0,qe=Ce;Be<qe.length;Be+=1){var et=qe[Be];(et=l.createStyleLayer(et)).setEventedParent(this,{layer:{id:et.id}}),this._layers[et.id]=et,this._serializedLayers[et.id]=et.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},W.prototype._loadSprite=function(G){var te=this;this._spriteRequest=function(ve,Ce,Be){var qe,et,vt,xt=l.browser.devicePixelRatio>1?"@2x":"",ee=l.getJSON(Ce.transformRequest(Ce.normalizeSpriteURL(ve,xt,".json"),l.ResourceType.SpriteJSON),function(Oe,Fe){ee=null,vt||(vt=Oe,qe=Fe,Ae())}),ce=l.getImage(Ce.transformRequest(Ce.normalizeSpriteURL(ve,xt,".png"),l.ResourceType.SpriteImage),function(Oe,Fe){ce=null,vt||(vt=Oe,et=Fe,Ae())});function Ae(){if(vt)Be(vt);else if(qe&&et){var Oe=l.browser.getImageData(et),Fe={};for(var Ue in qe){var Ge=qe[Ue],Xe=Ge.width,rt=Ge.height,ut=Ge.x,Ct=Ge.y,Rt=Ge.sdf,Ft=Ge.pixelRatio,Yt=Ge.stretchX,cn=Ge.stretchY,Wt=Ge.content,tn=new l.RGBAImage({width:Xe,height:rt});l.RGBAImage.copy(Oe,tn,{x:ut,y:Ct},{x:0,y:0},{width:Xe,height:rt}),Fe[Ue]={data:tn,pixelRatio:Ft,sdf:Rt,stretchX:Yt,stretchY:cn,content:Wt}}Be(null,Fe)}}return{cancel:function(){ee&&(ee.cancel(),ee=null),ce&&(ce.cancel(),ce=null)}}}(G,this.map._requestManager,function(ve,Ce){if(te._spriteRequest=null,ve)te.fire(new l.ErrorEvent(ve));else if(Ce)for(var Be in Ce)te.imageManager.addImage(Be,Ce[Be]);te.imageManager.setLoaded(!0),te._availableImages=te.imageManager.listImages(),te.dispatcher.broadcast("setImages",te._availableImages),te.fire(new l.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(G){var te=this.sourceCaches[G.source];if(te){var ve=G.sourceLayer;if(ve){var Ce=te.getSource();("geojson"===Ce.type||Ce.vectorLayerIds&&-1===Ce.vectorLayerIds.indexOf(ve))&&this.fire(new l.ErrorEvent(new Error('Source layer "'+ve+'" does not exist on source "'+Ce.id+'" as specified by style layer "'+G.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var G in this.sourceCaches)if(!this.sourceCaches[G].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(G){for(var te=[],ve=0,Ce=G;ve<Ce.length;ve+=1){var qe=this._layers[Ce[ve]];"custom"!==qe.type&&te.push(qe.serialize())}return te},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var G in this.sourceCaches)if(this.sourceCaches[G].hasTransition())return!0;for(var te in this._layers)if(this._layers[te].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(G){if(this._loaded){var te=this._changed;if(this._changed){var ve=Object.keys(this._updatedLayers),Ce=Object.keys(this._removedLayers);for(var Be in(ve.length||Ce.length)&&this._updateWorkerLayers(ve,Ce),this._updatedSources){var qe=this._updatedSources[Be];"reload"===qe?this._reloadSource(Be):"clear"===qe&&this._clearSource(Be)}for(var et in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[et].updateTransitions(G);this.light.updateTransitions(G),this._resetUpdates()}for(var vt in this.sourceCaches)this.sourceCaches[vt].used=!1;for(var xt=0,ee=this._order;xt<ee.length;xt+=1){var Ae=this._layers[ee[xt]];Ae.recalculate(G,this._availableImages),!Ae.isHidden(G.zoom)&&Ae.source&&(this.sourceCaches[Ae.source].used=!0)}this.light.recalculate(G),this.z=G.zoom,te&&this.fire(new l.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var G=Object.keys(this._changedImages);if(G.length){for(var te in this.sourceCaches)this.sourceCaches[te].reloadTilesForDependencies(["icons","patterns"],G);this._changedImages={}}},W.prototype._updateWorkerLayers=function(G,te){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(G),removedIds:te})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(G){var te=this;if(this._checkLoaded(),Gn(this,l.validateStyle(G)))return!1;(G=l.clone$1(G)).layers=Et(G.layers);var ve=function fn(F,W){if(!F)return[{command:gt.setStyle,args:[W]}];var G=[];try{if(!l.deepEqual(F.version,W.version))return[{command:gt.setStyle,args:[W]}];l.deepEqual(F.center,W.center)||G.push({command:gt.setCenter,args:[W.center]}),l.deepEqual(F.zoom,W.zoom)||G.push({command:gt.setZoom,args:[W.zoom]}),l.deepEqual(F.bearing,W.bearing)||G.push({command:gt.setBearing,args:[W.bearing]}),l.deepEqual(F.pitch,W.pitch)||G.push({command:gt.setPitch,args:[W.pitch]}),l.deepEqual(F.sprite,W.sprite)||G.push({command:gt.setSprite,args:[W.sprite]}),l.deepEqual(F.glyphs,W.glyphs)||G.push({command:gt.setGlyphs,args:[W.glyphs]}),l.deepEqual(F.transition,W.transition)||G.push({command:gt.setTransition,args:[W.transition]}),l.deepEqual(F.light,W.light)||G.push({command:gt.setLight,args:[W.light]});var te={},ve=[];!function(Be,qe,et,vt){var xt;for(xt in qe=qe||{},Be=Be||{})Be.hasOwnProperty(xt)&&(qe.hasOwnProperty(xt)||It(xt,et,vt));for(xt in qe)qe.hasOwnProperty(xt)&&(Be.hasOwnProperty(xt)?l.deepEqual(Be[xt],qe[xt])||("geojson"===Be[xt].type&&"geojson"===qe[xt].type&&Nt(Be,qe,xt)?et.push({command:gt.setGeoJSONSourceData,args:[xt,qe[xt].data]}):Ut(xt,qe,et,vt)):kt(xt,qe,et))}(F.sources,W.sources,ve,te);var Ce=[];F.layers&&F.layers.forEach(function(Be){te[Be.source]?G.push({command:gt.removeLayer,args:[Be.id]}):Ce.push(Be)}),G=G.concat(ve),function(Be,qe,et){qe=qe||[];var vt,xt,ee,ce,Ae,Oe,Fe,Ue=(Be=Be||[]).map(Xt),Ge=qe.map(Xt),Xe=Be.reduce(Kt,{}),rt=qe.reduce(Kt,{}),ut=Ue.slice(),Ct=Object.create(null);for(vt=0,xt=0;vt<Ue.length;vt++)rt.hasOwnProperty(ee=Ue[vt])?xt++:(et.push({command:gt.removeLayer,args:[ee]}),ut.splice(ut.indexOf(ee,xt),1));for(vt=0,xt=0;vt<Ge.length;vt++)ut[ut.length-1-vt]!==(ee=Ge[Ge.length-1-vt])&&(Xe.hasOwnProperty(ee)?(et.push({command:gt.removeLayer,args:[ee]}),ut.splice(ut.lastIndexOf(ee,ut.length-xt),1)):xt++,et.push({command:gt.addLayer,args:[rt[ee],Oe=ut[ut.length-vt]]}),ut.splice(ut.length-vt,0,ee),Ct[ee]=!0);for(vt=0;vt<Ge.length;vt++)if(ce=Xe[ee=Ge[vt]],Ae=rt[ee],!Ct[ee]&&!l.deepEqual(ce,Ae))if(l.deepEqual(ce.source,Ae.source)&&l.deepEqual(ce["source-layer"],Ae["source-layer"])&&l.deepEqual(ce.type,Ae.type)){for(Fe in qt(ce.layout,Ae.layout,et,ee,null,gt.setLayoutProperty),qt(ce.paint,Ae.paint,et,ee,null,gt.setPaintProperty),l.deepEqual(ce.filter,Ae.filter)||et.push({command:gt.setFilter,args:[ee,Ae.filter]}),l.deepEqual(ce.minzoom,Ae.minzoom)&&l.deepEqual(ce.maxzoom,Ae.maxzoom)||et.push({command:gt.setLayerZoomRange,args:[ee,Ae.minzoom,Ae.maxzoom]}),ce)ce.hasOwnProperty(Fe)&&"layout"!==Fe&&"paint"!==Fe&&"filter"!==Fe&&"metadata"!==Fe&&"minzoom"!==Fe&&"maxzoom"!==Fe&&(0===Fe.indexOf("paint.")?qt(ce[Fe],Ae[Fe],et,ee,Fe.slice(6),gt.setPaintProperty):l.deepEqual(ce[Fe],Ae[Fe])||et.push({command:gt.setLayerProperty,args:[ee,Fe,Ae[Fe]]}));for(Fe in Ae)Ae.hasOwnProperty(Fe)&&!ce.hasOwnProperty(Fe)&&"layout"!==Fe&&"paint"!==Fe&&"filter"!==Fe&&"metadata"!==Fe&&"minzoom"!==Fe&&"maxzoom"!==Fe&&(0===Fe.indexOf("paint.")?qt(ce[Fe],Ae[Fe],et,ee,Fe.slice(6),gt.setPaintProperty):l.deepEqual(ce[Fe],Ae[Fe])||et.push({command:gt.setLayerProperty,args:[ee,Fe,Ae[Fe]]}))}else et.push({command:gt.removeLayer,args:[ee]}),Oe=ut[ut.lastIndexOf(ee)+1],et.push({command:gt.addLayer,args:[Ae,Oe]})}(Ce,W.layers,G)}catch(Be){console.warn("Unable to compute style diff:",Be),G=[{command:gt.setStyle,args:[W]}]}return G}(this.serialize(),G).filter(function(Be){return!(Be.command in tr)});if(0===ve.length)return!1;var Ce=ve.filter(function(Be){return!(Be.command in nr)});if(Ce.length>0)throw new Error("Unimplemented: "+Ce.map(function(Be){return Be.command}).join(", ")+".");return ve.forEach(function(Be){"setTransition"!==Be.command&&te[Be.command].apply(te,Be.args)}),this.stylesheet=G,!0},W.prototype.addImage=function(G,te){if(this.getImage(G))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(G,te),this._availableImages=this.imageManager.listImages(),this._changedImages[G]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},W.prototype.updateImage=function(G,te){this.imageManager.updateImage(G,te)},W.prototype.getImage=function(G){return this.imageManager.getImage(G)},W.prototype.removeImage=function(G){if(!this.getImage(G))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(G),this._availableImages=this.imageManager.listImages(),this._changedImages[G]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(G,te,ve){var Ce=this;if(void 0===ve&&(ve={}),this._checkLoaded(),void 0!==this.sourceCaches[G])throw new Error("There is already a source with this ID");if(!te.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(te).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(te.type)>=0&&this._validate(l.validateStyle.source,"sources."+G,te,null,ve))){this.map&&this.map._collectResourceTiming&&(te.collectResourceTiming=!0);var Be=this.sourceCaches[G]=new at(G,te,this.dispatcher);Be.style=this,Be.setEventedParent(this,function(){return{isSourceLoaded:Ce.loaded(),source:Be.serialize(),sourceId:G}}),Be.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(G){if(this._checkLoaded(),void 0===this.sourceCaches[G])throw new Error("There is no source with this ID");for(var te in this._layers)if(this._layers[te].source===G)return this.fire(new l.ErrorEvent(new Error('Source "'+G+'" cannot be removed while layer "'+te+'" is using it.')));var ve=this.sourceCaches[G];delete this.sourceCaches[G],delete this._updatedSources[G],ve.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:G})),ve.setEventedParent(null),ve.clearTiles(),ve.onRemove&&ve.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(G,te){this._checkLoaded(),this.sourceCaches[G].getSource().setData(te),this._changed=!0},W.prototype.getSource=function(G){return this.sourceCaches[G]&&this.sourceCaches[G].getSource()},W.prototype.addLayer=function(G,te,ve){void 0===ve&&(ve={}),this._checkLoaded();var Ce=G.id;if(this.getLayer(Ce))this.fire(new l.ErrorEvent(new Error('Layer with id "'+Ce+'" already exists on this map')));else{var Be;if("custom"===G.type){if(Gn(this,l.validateCustomStyleLayer(G)))return;Be=l.createStyleLayer(G)}else{if("object"==typeof G.source&&(this.addSource(Ce,G.source),G=l.clone$1(G),G=l.extend(G,{source:Ce})),this._validate(l.validateStyle.layer,"layers."+Ce,G,{arrayIndex:-1},ve))return;Be=l.createStyleLayer(G),this._validateLayer(Be),Be.setEventedParent(this,{layer:{id:Ce}}),this._serializedLayers[Be.id]=Be.serialize()}var qe=te?this._order.indexOf(te):this._order.length;if(te&&-1===qe)this.fire(new l.ErrorEvent(new Error('Layer with id "'+te+'" does not exist on this map.')));else{if(this._order.splice(qe,0,Ce),this._layerOrderChanged=!0,this._layers[Ce]=Be,this._removedLayers[Ce]&&Be.source&&"custom"!==Be.type){var et=this._removedLayers[Ce];delete this._removedLayers[Ce],et.type!==Be.type?this._updatedSources[Be.source]="clear":(this._updatedSources[Be.source]="reload",this.sourceCaches[Be.source].pause())}this._updateLayer(Be),Be.onAdd&&Be.onAdd(this.map)}}},W.prototype.moveLayer=function(G,te){if(this._checkLoaded(),this._changed=!0,this._layers[G]){if(G!==te){var ve=this._order.indexOf(G);this._order.splice(ve,1);var Ce=te?this._order.indexOf(te):this._order.length;te&&-1===Ce?this.fire(new l.ErrorEvent(new Error('Layer with id "'+te+'" does not exist on this map.'))):(this._order.splice(Ce,0,G),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be moved.")))},W.prototype.removeLayer=function(G){this._checkLoaded();var te=this._layers[G];if(te){te.setEventedParent(null);var ve=this._order.indexOf(G);this._order.splice(ve,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[G]=te,delete this._layers[G],delete this._serializedLayers[G],delete this._updatedLayers[G],delete this._updatedPaintProps[G],te.onRemove&&te.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be removed.")))},W.prototype.getLayer=function(G){return this._layers[G]},W.prototype.hasLayer=function(G){return G in this._layers},W.prototype.setLayerZoomRange=function(G,te,ve){this._checkLoaded();var Ce=this.getLayer(G);Ce?Ce.minzoom===te&&Ce.maxzoom===ve||(null!=te&&(Ce.minzoom=te),null!=ve&&(Ce.maxzoom=ve),this._updateLayer(Ce)):this.fire(new l.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot have zoom extent.")))},W.prototype.setFilter=function(G,te,ve){void 0===ve&&(ve={}),this._checkLoaded();var Ce=this.getLayer(G);if(Ce){if(!l.deepEqual(Ce.filter,te))return null==te?(Ce.filter=void 0,void this._updateLayer(Ce)):void(this._validate(l.validateStyle.filter,"layers."+Ce.id+".filter",te,null,ve)||(Ce.filter=l.clone$1(te),this._updateLayer(Ce)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be filtered.")))},W.prototype.getFilter=function(G){return l.clone$1(this.getLayer(G).filter)},W.prototype.setLayoutProperty=function(G,te,ve,Ce){void 0===Ce&&(Ce={}),this._checkLoaded();var Be=this.getLayer(G);Be?l.deepEqual(Be.getLayoutProperty(te),ve)||(Be.setLayoutProperty(te,ve,Ce),this._updateLayer(Be)):this.fire(new l.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getLayoutProperty=function(G,te){var ve=this.getLayer(G);if(ve)return ve.getLayoutProperty(te);this.fire(new l.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style.")))},W.prototype.setPaintProperty=function(G,te,ve,Ce){void 0===Ce&&(Ce={}),this._checkLoaded();var Be=this.getLayer(G);Be?l.deepEqual(Be.getPaintProperty(te),ve)||(Be.setPaintProperty(te,ve,Ce)&&this._updateLayer(Be),this._changed=!0,this._updatedPaintProps[G]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},W.prototype.getPaintProperty=function(G,te){return this.getLayer(G).getPaintProperty(te)},W.prototype.setFeatureState=function(G,te){this._checkLoaded();var ve=G.source,Ce=G.sourceLayer,Be=this.sourceCaches[ve];if(void 0!==Be){var qe=Be.getSource().type;"geojson"===qe&&Ce?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==qe||Ce?(void 0===G.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Be.setFeatureState(Ce,G.id,te)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},W.prototype.removeFeatureState=function(G,te){this._checkLoaded();var ve=G.source,Ce=this.sourceCaches[ve];if(void 0!==Ce){var Be=Ce.getSource().type,qe="vector"===Be?G.sourceLayer:void 0;"vector"!==Be||qe?te&&"string"!=typeof G.id&&"number"!=typeof G.id?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Ce.removeFeatureState(qe,G.id,te):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+ve+"' does not exist in the map's style.")))},W.prototype.getFeatureState=function(G){this._checkLoaded();var te=G.source,ve=G.sourceLayer,Ce=this.sourceCaches[te];if(void 0!==Ce){if("vector"!==Ce.getSource().type||ve)return void 0===G.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),Ce.getFeatureState(ve,G.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")))},W.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(G){return G.serialize()}),layers:this._serializeLayers(this._order)},function(G){return void 0!==G})},W.prototype._updateLayer=function(G){this._updatedLayers[G.id]=!0,G.source&&!this._updatedSources[G.source]&&"raster"!==this.sourceCaches[G.source].getSource().type&&(this._updatedSources[G.source]="reload",this.sourceCaches[G.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(G){for(var te=this,ve=function(Wt){return"fill-extrusion"===te._layers[Wt].type},Ce={},Be=[],qe=this._order.length-1;qe>=0;qe--){var et=this._order[qe];if(ve(et)){Ce[et]=qe;for(var vt=0,xt=G;vt<xt.length;vt+=1){var ee=xt[vt][et];if(ee)for(var ce=0,Ae=ee;ce<Ae.length;ce+=1)Be.push(Ae[ce])}}}Be.sort(function(Wt,tn){return tn.intersectionZ-Wt.intersectionZ});for(var Fe=[],Ue=this._order.length-1;Ue>=0;Ue--){var Ge=this._order[Ue];if(ve(Ge))for(var Xe=Be.length-1;Xe>=0;Xe--){var rt=Be[Xe].feature;if(Ce[rt.layer.id]<Ue)break;Fe.push(rt),Be.pop()}else for(var ut=0,Ct=G;ut<Ct.length;ut+=1){var Rt=Ct[ut][Ge];if(Rt)for(var Ft=0,Yt=Rt;Ft<Yt.length;Ft+=1)Fe.push(Yt[Ft].feature)}}return Fe},W.prototype.queryRenderedFeatures=function(G,te,ve){te&&te.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",te.filter,null,te);var Ce={};if(te&&te.layers){if(!Array.isArray(te.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Be=0,qe=te.layers;Be<qe.length;Be+=1){var et=qe[Be],vt=this._layers[et];if(!vt)return this.fire(new l.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be queried for features."))),[];Ce[vt.source]=!0}}var xt=[];for(var ee in te.availableImages=this._availableImages,this.sourceCaches)te.layers&&!Ce[ee]||xt.push(q(this.sourceCaches[ee],this._layers,this._serializedLayers,G,te,ve));return this.placement&&xt.push(function(ce,Ae,Oe,Fe,Ue,Ge,Xe){for(var rt={},ut=Ge.queryRenderedSymbols(Fe),Ct=[],Rt=0,Ft=Object.keys(ut).map(Number);Rt<Ft.length;Rt+=1)Ct.push(Xe[Ft[Rt]]);Ct.sort(H);for(var cn=function(){var dn=tn[Wt],Qt=dn.featureIndex.lookupSymbolFeatures(ut[dn.bucketInstanceId],Ae,dn.bucketIndex,dn.sourceLayerIndex,Ue.filter,Ue.layers,Ue.availableImages,ce);for(var Cn in Qt){var Dn=rt[Cn]=rt[Cn]||[],Jn=Qt[Cn];Jn.sort(function(fr,gr){var Sr=dn.featureSortOrder;if(Sr){var Vr=Sr.indexOf(fr.featureIndex);return Sr.indexOf(gr.featureIndex)-Vr}return gr.featureIndex-fr.featureIndex});for(var Kn=0,vr=Jn;Kn<vr.length;Kn+=1)Dn.push(vr[Kn])}},Wt=0,tn=Ct;Wt<tn.length;Wt+=1)cn();var $t=function(dn){rt[dn].forEach(function(Qt){var Cn=Qt.feature,Jn=Oe[ce[dn].source].getFeatureState(Cn.layer["source-layer"],Cn.id);Cn.source=Cn.layer.source,Cn.layer["source-layer"]&&(Cn.sourceLayer=Cn.layer["source-layer"]),Cn.state=Jn})};for(var _n in rt)$t(_n);return rt}(this._layers,this._serializedLayers,this.sourceCaches,G,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(xt)},W.prototype.querySourceFeatures=function(G,te){te&&te.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",te.filter,null,te);var ve=this.sourceCaches[G];return ve?function(Ce,Be){for(var qe=Ce.getRenderableIds().map(function(Ae){return Ce.getTileByID(Ae)}),et=[],vt={},xt=0;xt<qe.length;xt++){var ee=qe[xt],ce=ee.tileID.canonical.key;vt[ce]||(vt[ce]=!0,ee.querySourceFeatures(et,Be))}return et}(ve,te):[]},W.prototype.addSourceType=function(G,te,ve){return W.getSourceType(G)?ve(new Error('A source type called "'+G+'" already exists.')):(W.setSourceType(G,te),te.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:G,url:te.workerSourceURL},ve):ve(null,null))},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(G,te){void 0===te&&(te={}),this._checkLoaded();var ve=this.light.getLight(),Ce=!1;for(var Be in G)if(!l.deepEqual(G[Be],ve[Be])){Ce=!0;break}if(Ce){var qe={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(G,te),this.light.updateTransitions(qe)}},W.prototype._validate=function(G,te,ve,Ce,Be){return void 0===Be&&(Be={}),(!Be||!1!==Be.validate)&&Gn(this,G.call(l.validateStyle,l.extend({key:te,style:this.serialize(),value:ve,styleSpec:l.styleSpec},Ce)))},W.prototype._remove=function(){for(var G in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[G].setEventedParent(null);for(var te in this.sourceCaches)this.sourceCaches[te].clearTiles(),this.sourceCaches[te].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(G){this.sourceCaches[G].clearTiles()},W.prototype._reloadSource=function(G){this.sourceCaches[G].resume(),this.sourceCaches[G].reload()},W.prototype._updateSources=function(G){for(var te in this.sourceCaches)this.sourceCaches[te].update(G)},W.prototype._generateCollisionBoxes=function(){for(var G in this.sourceCaches)this._reloadSource(G)},W.prototype._updatePlacement=function(G,te,ve,Ce,Be){void 0===Be&&(Be=!1);for(var qe=!1,et=!1,vt={},xt=0,ee=this._order;xt<ee.length;xt+=1){var Ae=this._layers[ee[xt]];if("symbol"===Ae.type){if(!vt[Ae.source]){var Oe=this.sourceCaches[Ae.source];vt[Ae.source]=Oe.getRenderableIds(!0).map(function(ut){return Oe.getTileByID(ut)}).sort(function(ut,Ct){return Ct.tileID.overscaledZ-ut.tileID.overscaledZ||(ut.tileID.isLessThan(Ct.tileID)?-1:1)})}var Fe=this.crossTileSymbolIndex.addLayer(Ae,vt[Ae.source],G.center.lng);qe=qe||Fe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Be=Be||this._layerOrderChanged||0===ve)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),G.zoom))&&(this.pauseablePlacement=new un(G,this._order,Be,te,ve,Ce,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,vt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),et=!0),qe&&this.pauseablePlacement.placement.setStale()),et||qe)for(var Ue=0,Ge=this._order;Ue<Ge.length;Ue+=1){var rt=this._layers[Ge[Ue]];"symbol"===rt.type&&this.placement.updateLayerOpacities(rt,vt[rt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},W.prototype._releaseSymbolFadeTiles=function(){for(var G in this.sourceCaches)this.sourceCaches[G].releaseSymbolFadeTiles()},W.prototype.getImages=function(G,te,ve){this.imageManager.getImages(te.icons,ve),this._updateTilesForChangedImages();var Ce=this.sourceCaches[te.source];Ce&&Ce.setDependencies(te.tileID.key,te.type,te.icons)},W.prototype.getGlyphs=function(G,te,ve){this.glyphManager.getGlyphs(te.stacks,ve)},W.prototype.getResource=function(G,te,ve){return l.makeRequest(te,ve)},W}(l.Evented);ir.getSourceType=function(F){return J[F]},ir.setSourceType=function(F,W){J[F]=W},ir.registerForPluginStateChange=l.registerForPluginStateChange;var cr=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),br=ti("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),xr=ti("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Tr=ti("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),sr=ti("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),kr=ti("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rr=ti("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),ei=ti("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),fi=ti("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),di=ti("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Gi=ti("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Li=ti("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),si=ti("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ua=ti("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ma=ti("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ro=ti("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Zo=ti("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),al=ti("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Vs=ti("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Yo=ti("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Sa=ti("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Hs=ti("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Fi=ti("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ls=ti("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ba=ti("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Ea=ti("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),yo=ti("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function ti(F,W){var G=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,te={};return{fragmentSource:F=F.replace(G,function(ve,Ce,Be,qe,et){return te[et]=!0,"define"===Ce?"\n#ifndef HAS_UNIFORM_u_"+et+"\nvarying "+Be+" "+qe+" "+et+";\n#else\nuniform "+Be+" "+qe+" u_"+et+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+et+"\n    "+Be+" "+qe+" "+et+" = u_"+et+";\n#endif\n"}),vertexSource:W=W.replace(G,function(ve,Ce,Be,qe,et){var vt="float"===qe?"vec2":"vec4",xt=et.match(/color/)?"color":vt;return te[et]?"define"===Ce?"\n#ifndef HAS_UNIFORM_u_"+et+"\nuniform lowp float u_"+et+"_t;\nattribute "+Be+" "+vt+" a_"+et+";\nvarying "+Be+" "+qe+" "+et+";\n#else\nuniform "+Be+" "+qe+" u_"+et+";\n#endif\n":"vec4"===xt?"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+et+" = a_"+et+";\n#else\n    "+Be+" "+qe+" "+et+" = u_"+et+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+et+" = unpack_mix_"+xt+"(a_"+et+", u_"+et+"_t);\n#else\n    "+Be+" "+qe+" "+et+" = u_"+et+";\n#endif\n":"define"===Ce?"\n#ifndef HAS_UNIFORM_u_"+et+"\nuniform lowp float u_"+et+"_t;\nattribute "+Be+" "+vt+" a_"+et+";\n#else\nuniform "+Be+" "+qe+" u_"+et+";\n#endif\n":"vec4"===xt?"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+Be+" "+qe+" "+et+" = a_"+et+";\n#else\n    "+Be+" "+qe+" "+et+" = u_"+et+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+et+"\n    "+Be+" "+qe+" "+et+" = unpack_mix_"+xt+"(a_"+et+", u_"+et+"_t);\n#else\n    "+Be+" "+qe+" "+et+" = u_"+et+";\n#endif\n"})}}var xo=Object.freeze({__proto__:null,prelude:br,background:xr,backgroundPattern:Tr,circle:sr,clippingMask:kr,heatmap:Rr,heatmapTexture:ei,collisionBox:fi,collisionCircle:di,debug:Gi,fill:Li,fillOutline:si,fillOutlinePattern:ua,fillPattern:Ma,fillExtrusion:ro,fillExtrusionPattern:Zo,hillshadePrepare:al,hillshade:Vs,line:Yo,lineGradient:Sa,linePattern:Hs,lineSDF:Fi,raster:ls,symbolIcon:ba,symbolSDF:Ea,symbolTextAndIcon:yo}),Oa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Oa.prototype.bind=function(F,W,G,te,ve,Ce,Be,qe){this.context=F;for(var et=this.boundPaintVertexBuffers.length!==te.length,vt=0;!et&&vt<te.length;vt++)this.boundPaintVertexBuffers[vt]!==te[vt]&&(et=!0);F.extVertexArrayObject&&this.vao&&this.boundProgram===W&&this.boundLayoutVertexBuffer===G&&!et&&this.boundIndexBuffer===ve&&this.boundVertexOffset===Ce&&this.boundDynamicVertexBuffer===Be&&this.boundDynamicVertexBuffer2===qe?(F.bindVertexArrayOES.set(this.vao),Be&&Be.bind(),ve&&ve.dynamicDraw&&ve.bind(),qe&&qe.bind()):this.freshBind(W,G,te,ve,Ce,Be,qe)},Oa.prototype.freshBind=function(F,W,G,te,ve,Ce,Be){var qe,et=F.numAttributes,vt=this.context,xt=vt.gl;if(vt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=vt.extVertexArrayObject.createVertexArrayOES(),vt.bindVertexArrayOES.set(this.vao),qe=0,this.boundProgram=F,this.boundLayoutVertexBuffer=W,this.boundPaintVertexBuffers=G,this.boundIndexBuffer=te,this.boundVertexOffset=ve,this.boundDynamicVertexBuffer=Ce,this.boundDynamicVertexBuffer2=Be;else{qe=vt.currentNumAttributes||0;for(var ee=et;ee<qe;ee++)xt.disableVertexAttribArray(ee)}W.enableAttributes(xt,F);for(var ce=0,Ae=G;ce<Ae.length;ce+=1)Ae[ce].enableAttributes(xt,F);Ce&&Ce.enableAttributes(xt,F),Be&&Be.enableAttributes(xt,F),W.bind(),W.setVertexAttribPointers(xt,F,ve);for(var Oe=0,Fe=G;Oe<Fe.length;Oe+=1){var Ue=Fe[Oe];Ue.bind(),Ue.setVertexAttribPointers(xt,F,ve)}Ce&&(Ce.bind(),Ce.setVertexAttribPointers(xt,F,ve)),te&&te.bind(),Be&&(Be.bind(),Be.setVertexAttribPointers(xt,F,ve)),vt.currentNumAttributes=et},Oa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ha=function(F,W,G,te,ve){var Ce=F.gl;this.program=Ce.createProgram();var Be=G?G.defines():[];ve&&Be.push("#define OVERDRAW_INSPECTOR;");var qe=Be.concat(br.fragmentSource,W.fragmentSource).join("\n"),et=Be.concat(br.vertexSource,W.vertexSource).join("\n"),vt=Ce.createShader(Ce.FRAGMENT_SHADER);if(Ce.isContextLost())this.failedToCreate=!0;else{Ce.shaderSource(vt,qe),Ce.compileShader(vt),Ce.attachShader(this.program,vt);var xt=Ce.createShader(Ce.VERTEX_SHADER);if(Ce.isContextLost())this.failedToCreate=!0;else{Ce.shaderSource(xt,et),Ce.compileShader(xt),Ce.attachShader(this.program,xt);for(var ee=G?G.layoutAttributes:[],ce=0;ce<ee.length;ce++)Ce.bindAttribLocation(this.program,ce,ee[ce].name);Ce.linkProgram(this.program),Ce.deleteShader(xt),Ce.deleteShader(vt),this.numAttributes=Ce.getProgramParameter(this.program,Ce.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ae={},Oe=0;Oe<this.numAttributes;Oe++){var Fe=Ce.getActiveAttrib(this.program,Oe);Fe&&(this.attributes[Fe.name]=Ce.getAttribLocation(this.program,Fe.name))}for(var Ue=Ce.getProgramParameter(this.program,Ce.ACTIVE_UNIFORMS),Ge=0;Ge<Ue;Ge++){var Xe=Ce.getActiveUniform(this.program,Ge);Xe&&(Ae[Xe.name]=Ce.getUniformLocation(this.program,Xe.name))}this.fixedUniforms=te(F,Ae),this.binderUniforms=G?G.getUniforms(F,Ae):[]}}};function Ja(F,W,G){var te=1/lr(G,1,W.transform.tileZoom),ve=Math.pow(2,G.tileID.overscaledZ),Ce=G.tileSize*Math.pow(2,W.transform.tileZoom)/ve,Be=Ce*(G.tileID.canonical.x+G.tileID.wrap*ve),qe=Ce*G.tileID.canonical.y;return{u_image:0,u_texsize:G.imageAtlasTexture.size,u_scale:[te,F.fromScale,F.toScale],u_fade:F.t,u_pixel_coord_upper:[Be>>16,qe>>16],u_pixel_coord_lower:[65535&Be,65535&qe]}}Ha.prototype.draw=function(F,W,G,te,ve,Ce,Be,qe,et,vt,xt,ee,ce,Ae,Oe,Fe){var Ue,Ge=F.gl;if(!this.failedToCreate){for(var Xe in F.program.set(this.program),F.setDepthMode(G),F.setStencilMode(te),F.setColorMode(ve),F.setCullFace(Ce),this.fixedUniforms)this.fixedUniforms[Xe].set(Be[Xe]);Ae&&Ae.setUniforms(F,this.binderUniforms,ee,{zoom:ce});for(var rt=(Ue={},Ue[Ge.LINES]=2,Ue[Ge.TRIANGLES]=3,Ue[Ge.LINE_STRIP]=1,Ue)[W],ut=0,Ct=xt.get();ut<Ct.length;ut+=1){var Rt=Ct[ut],Ft=Rt.vaos||(Rt.vaos={});(Ft[qe]||(Ft[qe]=new Oa)).bind(F,this,et,Ae?Ae.getPaintVertexBuffers():[],vt,Rt.vertexOffset,Oe,Fe),Ge.drawElements(W,Rt.primitiveLength*rt,Ge.UNSIGNED_SHORT,Rt.primitiveOffset*rt*2)}}};var us=function(F,W,G,te){var ve=W.style.light,Ce=ve.properties.get("position"),Be=[Ce.x,Ce.y,Ce.z],qe=l.create$1();"viewport"===ve.properties.get("anchor")&&l.fromRotation(qe,-W.transform.angle),l.transformMat3(Be,Be,qe);var et=ve.properties.get("color");return{u_matrix:F,u_lightpos:Be,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[et.r,et.g,et.b],u_vertical_gradient:+G,u_opacity:te}},ol=function(F,W,G,te,ve,Ce,Be){return l.extend(us(F,W,G,te),Ja(Ce,W,Be),{u_height_factor:-Math.pow(2,ve.overscaledZ)/Be.tileSize/8})},io=function(F){return{u_matrix:F}},sl=function(F,W,G,te){return l.extend(io(F),Ja(G,W,te))},ll=function(F,W){return{u_matrix:F,u_world:W}},ml=function(F,W,G,te,ve){return l.extend(sl(F,W,G,te),{u_world:ve})},qs=function(F,W,G,te){var ve,Ce,Be=F.transform;if("map"===te.paint.get("circle-pitch-alignment")){var qe=lr(G,1,Be.zoom);ve=!0,Ce=[qe,qe]}else ve=!1,Ce=Be.pixelsToGLUnits;return{u_camera_to_center_distance:Be.cameraToCenterDistance,u_scale_with_map:+("map"===te.paint.get("circle-pitch-scale")),u_matrix:F.translatePosMatrix(W.posMatrix,G,te.paint.get("circle-translate"),te.paint.get("circle-translate-anchor")),u_pitch_with_map:+ve,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:Ce}},ul=function(F,W,G){var te=lr(G,1,W.zoom),ve=Math.pow(2,W.zoom-G.tileID.overscaledZ),Ce=G.tileID.overscaleFactor();return{u_matrix:F,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:te,u_extrude_scale:[W.pixelsToGLUnits[0]/(te*ve),W.pixelsToGLUnits[1]/(te*ve)],u_overscale_factor:Ce}},Gs=function(F,W,G){return{u_matrix:F,u_inv_matrix:W,u_camera_to_center_distance:G.cameraToCenterDistance,u_viewport_size:[G.width,G.height]}},ao=function(F,W,G){return void 0===G&&(G=1),{u_matrix:F,u_color:W,u_overlay:0,u_overlay_scale:G}},oo=function(F){return{u_matrix:F}},Wo=function(F,W,G,te){return{u_matrix:F,u_extrude_scale:lr(W,1,G),u_intensity:te}},so=function(F,W,G){var te=F.transform;return{u_matrix:bo(F,W,G),u_ratio:1/lr(W,1,te.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/te.pixelsToGLUnits[0],1/te.pixelsToGLUnits[1]]}},Zs=function(F,W,G){return l.extend(so(F,W,G),{u_image:0})},Ys=function(F,W,G,te){var ve=F.transform,Ce=Ms(W,ve);return{u_matrix:bo(F,W,G),u_texsize:W.imageAtlasTexture.size,u_ratio:1/lr(W,1,ve.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[Ce,te.fromScale,te.toScale],u_fade:te.t,u_units_to_pixels:[1/ve.pixelsToGLUnits[0],1/ve.pixelsToGLUnits[1]]}},Oo=function(F,W,G,te,ve){var Be=F.lineAtlas,qe=Ms(W,F.transform),et="round"===G.layout.get("line-cap"),vt=Be.getDash(te.from,et),xt=Be.getDash(te.to,et),ee=vt.width*ve.fromScale,ce=xt.width*ve.toScale;return l.extend(so(F,W,G),{u_patternscale_a:[qe/ee,-vt.height/2],u_patternscale_b:[qe/ce,-xt.height/2],u_sdfgamma:Be.width/(256*Math.min(ee,ce)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:vt.y,u_tex_y_b:xt.y,u_mix:ve.t})};function Ms(F,W){return 1/lr(F,1,W.tileZoom)}function bo(F,W,G){return F.translatePosMatrix(W.tileID.posMatrix,W,G.paint.get("line-translate"),G.paint.get("line-translate-anchor"))}var Xo=function(F,W,G,te,ve){return{u_matrix:F,u_tl_parent:W,u_scale_parent:G,u_buffer_scale:1,u_fade_t:te.mix,u_opacity:te.opacity*ve.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ve.paint.get("raster-brightness-min"),u_brightness_high:ve.paint.get("raster-brightness-max"),u_saturation_factor:(Be=ve.paint.get("raster-saturation"),Be>0?1-1/(1.001-Be):-Be),u_contrast_factor:(Ce=ve.paint.get("raster-contrast"),Ce>0?1/(1-Ce):1+Ce),u_spin_weights:Io(ve.paint.get("raster-hue-rotate"))};var Ce,Be};function Io(F){F*=Math.PI/180;var W=Math.sin(F),G=Math.cos(F);return[(2*G+1)/3,(-Math.sqrt(3)*W-G+1)/3,(Math.sqrt(3)*W-G+1)/3]}var lo,ni=function(F,W,G,te,ve,Ce,Be,qe,et,vt){var xt=ve.transform;return{u_is_size_zoom_constant:+("constant"===F||"source"===F),u_is_size_feature_constant:+("constant"===F||"camera"===F),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:xt.cameraToCenterDistance,u_pitch:xt.pitch/360*2*Math.PI,u_rotate_symbol:+G,u_aspect_ratio:xt.width/xt.height,u_fade_change:ve.options.fadeDuration?ve.symbolFadeChange:1,u_matrix:Ce,u_label_plane_matrix:Be,u_coord_matrix:qe,u_is_text:+et,u_pitch_with_map:+te,u_texsize:vt,u_texture:0}},_o=function(F,W,G,te,ve,Ce,Be,qe,et,vt,xt){var ee=ve.transform;return l.extend(ni(F,W,G,te,ve,Ce,Be,qe,et,vt),{u_gamma_scale:te?Math.cos(ee._pitch)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+xt})},yl=function(F,W,G,te,ve,Ce,Be,qe,et,vt){return l.extend(_o(F,W,G,te,ve,Ce,Be,qe,!0,et,!0),{u_texsize_icon:vt,u_texture_icon:1})},Ss=function(F,W,G){return{u_matrix:F,u_opacity:W,u_color:G}},cs=function(F,W,G,te,ve,Ce){return l.extend((qe=Ce,vt=ve,xt=(et=G).imageManager.getPattern((Be=te).from.toString()),ee=et.imageManager.getPattern(Be.to.toString()),Ae=(ce=et.imageManager.getPixelSize()).width,Oe=ce.height,Fe=Math.pow(2,vt.tileID.overscaledZ),Ge=(Ue=vt.tileSize*Math.pow(2,et.transform.tileZoom)/Fe)*(vt.tileID.canonical.x+vt.tileID.wrap*Fe),Xe=Ue*vt.tileID.canonical.y,{u_image:0,u_pattern_tl_a:xt.tl,u_pattern_br_a:xt.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[Ae,Oe],u_mix:qe.t,u_pattern_size_a:xt.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:qe.fromScale,u_scale_b:qe.toScale,u_tile_units_to_pixels:1/lr(vt,1,et.transform.tileZoom),u_pixel_coord_upper:[Ge>>16,Xe>>16],u_pixel_coord_lower:[65535&Ge,65535&Xe]}),{u_matrix:F,u_opacity:W});var Be,qe,et,vt,xt,ee,ce,Ae,Oe,Fe,Ue,Ge,Xe},zo={fillExtrusion:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_lightpos:new l.Uniform3f(F,W.u_lightpos),u_lightintensity:new l.Uniform1f(F,W.u_lightintensity),u_lightcolor:new l.Uniform3f(F,W.u_lightcolor),u_vertical_gradient:new l.Uniform1f(F,W.u_vertical_gradient),u_opacity:new l.Uniform1f(F,W.u_opacity)}},fillExtrusionPattern:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_lightpos:new l.Uniform3f(F,W.u_lightpos),u_lightintensity:new l.Uniform1f(F,W.u_lightintensity),u_lightcolor:new l.Uniform3f(F,W.u_lightcolor),u_vertical_gradient:new l.Uniform1f(F,W.u_vertical_gradient),u_height_factor:new l.Uniform1f(F,W.u_height_factor),u_image:new l.Uniform1i(F,W.u_image),u_texsize:new l.Uniform2f(F,W.u_texsize),u_pixel_coord_upper:new l.Uniform2f(F,W.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(F,W.u_pixel_coord_lower),u_scale:new l.Uniform3f(F,W.u_scale),u_fade:new l.Uniform1f(F,W.u_fade),u_opacity:new l.Uniform1f(F,W.u_opacity)}},fill:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix)}},fillPattern:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_image:new l.Uniform1i(F,W.u_image),u_texsize:new l.Uniform2f(F,W.u_texsize),u_pixel_coord_upper:new l.Uniform2f(F,W.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(F,W.u_pixel_coord_lower),u_scale:new l.Uniform3f(F,W.u_scale),u_fade:new l.Uniform1f(F,W.u_fade)}},fillOutline:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_world:new l.Uniform2f(F,W.u_world)}},fillOutlinePattern:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_world:new l.Uniform2f(F,W.u_world),u_image:new l.Uniform1i(F,W.u_image),u_texsize:new l.Uniform2f(F,W.u_texsize),u_pixel_coord_upper:new l.Uniform2f(F,W.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(F,W.u_pixel_coord_lower),u_scale:new l.Uniform3f(F,W.u_scale),u_fade:new l.Uniform1f(F,W.u_fade)}},circle:function(F,W){return{u_camera_to_center_distance:new l.Uniform1f(F,W.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(F,W.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(F,W.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(F,W.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(F,W.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(F,W.u_matrix)}},collisionBox:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_camera_to_center_distance:new l.Uniform1f(F,W.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(F,W.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(F,W.u_extrude_scale),u_overscale_factor:new l.Uniform1f(F,W.u_overscale_factor)}},collisionCircle:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_inv_matrix:new l.UniformMatrix4f(F,W.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(F,W.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(F,W.u_viewport_size)}},debug:function(F,W){return{u_color:new l.UniformColor(F,W.u_color),u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_overlay:new l.Uniform1i(F,W.u_overlay),u_overlay_scale:new l.Uniform1f(F,W.u_overlay_scale)}},clippingMask:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix)}},heatmap:function(F,W){return{u_extrude_scale:new l.Uniform1f(F,W.u_extrude_scale),u_intensity:new l.Uniform1f(F,W.u_intensity),u_matrix:new l.UniformMatrix4f(F,W.u_matrix)}},heatmapTexture:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_world:new l.Uniform2f(F,W.u_world),u_image:new l.Uniform1i(F,W.u_image),u_color_ramp:new l.Uniform1i(F,W.u_color_ramp),u_opacity:new l.Uniform1f(F,W.u_opacity)}},hillshade:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_image:new l.Uniform1i(F,W.u_image),u_latrange:new l.Uniform2f(F,W.u_latrange),u_light:new l.Uniform2f(F,W.u_light),u_shadow:new l.UniformColor(F,W.u_shadow),u_highlight:new l.UniformColor(F,W.u_highlight),u_accent:new l.UniformColor(F,W.u_accent)}},hillshadePrepare:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_image:new l.Uniform1i(F,W.u_image),u_dimension:new l.Uniform2f(F,W.u_dimension),u_zoom:new l.Uniform1f(F,W.u_zoom),u_maxzoom:new l.Uniform1f(F,W.u_maxzoom),u_unpack:new l.Uniform4f(F,W.u_unpack)}},line:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_ratio:new l.Uniform1f(F,W.u_ratio),u_device_pixel_ratio:new l.Uniform1f(F,W.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(F,W.u_units_to_pixels)}},lineGradient:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_ratio:new l.Uniform1f(F,W.u_ratio),u_device_pixel_ratio:new l.Uniform1f(F,W.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(F,W.u_units_to_pixels),u_image:new l.Uniform1i(F,W.u_image)}},linePattern:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_texsize:new l.Uniform2f(F,W.u_texsize),u_ratio:new l.Uniform1f(F,W.u_ratio),u_device_pixel_ratio:new l.Uniform1f(F,W.u_device_pixel_ratio),u_image:new l.Uniform1i(F,W.u_image),u_units_to_pixels:new l.Uniform2f(F,W.u_units_to_pixels),u_scale:new l.Uniform3f(F,W.u_scale),u_fade:new l.Uniform1f(F,W.u_fade)}},lineSDF:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_ratio:new l.Uniform1f(F,W.u_ratio),u_device_pixel_ratio:new l.Uniform1f(F,W.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(F,W.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(F,W.u_patternscale_a),u_patternscale_b:new l.Uniform2f(F,W.u_patternscale_b),u_sdfgamma:new l.Uniform1f(F,W.u_sdfgamma),u_image:new l.Uniform1i(F,W.u_image),u_tex_y_a:new l.Uniform1f(F,W.u_tex_y_a),u_tex_y_b:new l.Uniform1f(F,W.u_tex_y_b),u_mix:new l.Uniform1f(F,W.u_mix)}},raster:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_tl_parent:new l.Uniform2f(F,W.u_tl_parent),u_scale_parent:new l.Uniform1f(F,W.u_scale_parent),u_buffer_scale:new l.Uniform1f(F,W.u_buffer_scale),u_fade_t:new l.Uniform1f(F,W.u_fade_t),u_opacity:new l.Uniform1f(F,W.u_opacity),u_image0:new l.Uniform1i(F,W.u_image0),u_image1:new l.Uniform1i(F,W.u_image1),u_brightness_low:new l.Uniform1f(F,W.u_brightness_low),u_brightness_high:new l.Uniform1f(F,W.u_brightness_high),u_saturation_factor:new l.Uniform1f(F,W.u_saturation_factor),u_contrast_factor:new l.Uniform1f(F,W.u_contrast_factor),u_spin_weights:new l.Uniform3f(F,W.u_spin_weights)}},symbolIcon:function(F,W){return{u_is_size_zoom_constant:new l.Uniform1i(F,W.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(F,W.u_is_size_feature_constant),u_size_t:new l.Uniform1f(F,W.u_size_t),u_size:new l.Uniform1f(F,W.u_size),u_camera_to_center_distance:new l.Uniform1f(F,W.u_camera_to_center_distance),u_pitch:new l.Uniform1f(F,W.u_pitch),u_rotate_symbol:new l.Uniform1i(F,W.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(F,W.u_aspect_ratio),u_fade_change:new l.Uniform1f(F,W.u_fade_change),u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(F,W.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(F,W.u_coord_matrix),u_is_text:new l.Uniform1i(F,W.u_is_text),u_pitch_with_map:new l.Uniform1i(F,W.u_pitch_with_map),u_texsize:new l.Uniform2f(F,W.u_texsize),u_texture:new l.Uniform1i(F,W.u_texture)}},symbolSDF:function(F,W){return{u_is_size_zoom_constant:new l.Uniform1i(F,W.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(F,W.u_is_size_feature_constant),u_size_t:new l.Uniform1f(F,W.u_size_t),u_size:new l.Uniform1f(F,W.u_size),u_camera_to_center_distance:new l.Uniform1f(F,W.u_camera_to_center_distance),u_pitch:new l.Uniform1f(F,W.u_pitch),u_rotate_symbol:new l.Uniform1i(F,W.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(F,W.u_aspect_ratio),u_fade_change:new l.Uniform1f(F,W.u_fade_change),u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(F,W.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(F,W.u_coord_matrix),u_is_text:new l.Uniform1i(F,W.u_is_text),u_pitch_with_map:new l.Uniform1i(F,W.u_pitch_with_map),u_texsize:new l.Uniform2f(F,W.u_texsize),u_texture:new l.Uniform1i(F,W.u_texture),u_gamma_scale:new l.Uniform1f(F,W.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(F,W.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(F,W.u_is_halo)}},symbolTextAndIcon:function(F,W){return{u_is_size_zoom_constant:new l.Uniform1i(F,W.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(F,W.u_is_size_feature_constant),u_size_t:new l.Uniform1f(F,W.u_size_t),u_size:new l.Uniform1f(F,W.u_size),u_camera_to_center_distance:new l.Uniform1f(F,W.u_camera_to_center_distance),u_pitch:new l.Uniform1f(F,W.u_pitch),u_rotate_symbol:new l.Uniform1i(F,W.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(F,W.u_aspect_ratio),u_fade_change:new l.Uniform1f(F,W.u_fade_change),u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(F,W.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(F,W.u_coord_matrix),u_is_text:new l.Uniform1i(F,W.u_is_text),u_pitch_with_map:new l.Uniform1i(F,W.u_pitch_with_map),u_texsize:new l.Uniform2f(F,W.u_texsize),u_texsize_icon:new l.Uniform2f(F,W.u_texsize_icon),u_texture:new l.Uniform1i(F,W.u_texture),u_texture_icon:new l.Uniform1i(F,W.u_texture_icon),u_gamma_scale:new l.Uniform1f(F,W.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(F,W.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(F,W.u_is_halo)}},background:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_opacity:new l.Uniform1f(F,W.u_opacity),u_color:new l.UniformColor(F,W.u_color)}},backgroundPattern:function(F,W){return{u_matrix:new l.UniformMatrix4f(F,W.u_matrix),u_opacity:new l.Uniform1f(F,W.u_opacity),u_image:new l.Uniform1i(F,W.u_image),u_pattern_tl_a:new l.Uniform2f(F,W.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(F,W.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(F,W.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(F,W.u_pattern_br_b),u_texsize:new l.Uniform2f(F,W.u_texsize),u_mix:new l.Uniform1f(F,W.u_mix),u_pattern_size_a:new l.Uniform2f(F,W.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(F,W.u_pattern_size_b),u_scale_a:new l.Uniform1f(F,W.u_scale_a),u_scale_b:new l.Uniform1f(F,W.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(F,W.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(F,W.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(F,W.u_tile_units_to_pixels)}}};function Jo(F,W,G,te,ve,Ce,Be){for(var qe=F.context,et=qe.gl,vt=F.useProgram("collisionBox"),xt=[],ee=0,ce=0,Ae=0;Ae<te.length;Ae++){var Oe=te[Ae],Fe=W.getTile(Oe),Ue=Fe.getBucket(G);if(Ue){var Ge=Oe.posMatrix;0===ve[0]&&0===ve[1]||(Ge=F.translatePosMatrix(Oe.posMatrix,Fe,ve,Ce));var Xe=Be?Ue.textCollisionBox:Ue.iconCollisionBox,rt=Ue.collisionCircleArray;if(rt.length>0){var ut=l.create(),Ct=Ge;l.mul(ut,Ue.placementInvProjMatrix,F.transform.glCoordMatrix),l.mul(ut,ut,Ue.placementViewportMatrix),xt.push({circleArray:rt,circleOffset:ce,transform:Ct,invTransform:ut}),ce=ee+=rt.length/4}Xe&&vt.draw(qe,et.LINES,jt.disabled,Ye.disabled,F.colorModeForRenderPass(),Ne.disabled,ul(Ge,F.transform,Fe),G.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,null,F.transform.zoom,null,null,Xe.collisionVertexBuffer)}}if(Be&&xt.length){var Rt=F.useProgram("collisionCircle"),Ft=new l.StructArrayLayout2f1f2i16;Ft.resize(4*ee),Ft._trim();for(var Yt=0,cn=0,Wt=xt;cn<Wt.length;cn+=1)for(var tn=Wt[cn],$t=0;$t<tn.circleArray.length/4;$t++){var _n=4*$t,dn=tn.circleArray[_n+0],Qt=tn.circleArray[_n+1],Cn=tn.circleArray[_n+2],Dn=tn.circleArray[_n+3];Ft.emplace(Yt++,dn,Qt,Cn,Dn,0),Ft.emplace(Yt++,dn,Qt,Cn,Dn,1),Ft.emplace(Yt++,dn,Qt,Cn,Dn,2),Ft.emplace(Yt++,dn,Qt,Cn,Dn,3)}(!lo||lo.length<2*ee)&&(lo=function(Sr){var Vr=2*Sr,Hr=new l.StructArrayLayout3ui6;Hr.resize(Vr),Hr._trim();for(var pr=0;pr<Vr;pr++){var Er=6*pr;Hr.uint16[Er+0]=4*pr+0,Hr.uint16[Er+1]=4*pr+1,Hr.uint16[Er+2]=4*pr+2,Hr.uint16[Er+3]=4*pr+2,Hr.uint16[Er+4]=4*pr+3,Hr.uint16[Er+5]=4*pr+0}return Hr}(ee));for(var Jn=qe.createIndexBuffer(lo,!0),Kn=qe.createVertexBuffer(Ft,l.collisionCircleLayout.members,!0),vr=0,yr=xt;vr<yr.length;vr+=1){var fr=yr[vr],gr=Gs(fr.transform,fr.invTransform,F.transform);Rt.draw(qe,et.TRIANGLES,jt.disabled,Ye.disabled,F.colorModeForRenderPass(),Ne.disabled,gr,G.id,Kn,Jn,l.SegmentVector.simpleSegment(0,2*fr.circleOffset,fr.circleArray.length,fr.circleArray.length/2),null,F.transform.zoom,null,null,null)}Kn.destroy(),Jn.destroy()}}var Ia=l.identity(new Float32Array(16));function Ws(F,W,G,te,ve,Ce){var Be=l.getAnchorAlignment(F),qe=-(Be.horizontalAlign-.5)*W,et=-(Be.verticalAlign-.5)*G,vt=l.evaluateVariableOffset(F,te);return new l.Point((qe/ve+vt[0])*Ce,(et/ve+vt[1])*Ce)}function fs(F,W,G,te,ve,Ce,Be,qe,et,vt,xt){var ee=F.text.placedSymbolArray,ce=F.text.dynamicLayoutVertexArray,Ae=F.icon.dynamicLayoutVertexArray,Oe={};ce.clear();for(var Fe=0;Fe<ee.length;Fe++){var Ue=ee.get(Fe),Xe=Ue.hidden||!Ue.crossTileID||F.allowVerticalPlacement&&!Ue.placedOrientation?null:te[Ue.crossTileID];if(Xe){var rt=new l.Point(Ue.anchorX,Ue.anchorY),ut=en(rt,G?qe:Be),Ct=vn(Ce.cameraToCenterDistance,ut.signedDistanceFromCamera),Rt=ve.evaluateSizeForFeature(F.textSizeData,vt,Ue)*Ct/l.ONE_EM;G&&(Rt*=F.tilePixelRatio/et);for(var cn=Ws(Xe.anchor,Xe.width,Xe.height,Xe.textOffset,Xe.textBoxScale,Rt),Wt=G?en(rt.add(cn),Be).point:ut.point.add(W?cn.rotate(-Ce.angle):cn),tn=F.allowVerticalPlacement&&Ue.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,$t=0;$t<Ue.numGlyphs;$t++)l.addDynamicAttributes(ce,Wt,tn);xt&&Ue.associatedIconIndex>=0&&(Oe[Ue.associatedIconIndex]={shiftedAnchor:Wt,angle:tn})}else Xn(Ue.numGlyphs,ce)}if(xt){Ae.clear();for(var _n=F.icon.placedSymbolArray,dn=0;dn<_n.length;dn++){var Qt=_n.get(dn);if(Qt.hidden)Xn(Qt.numGlyphs,Ae);else{var Cn=Oe[dn];if(Cn)for(var Dn=0;Dn<Qt.numGlyphs;Dn++)l.addDynamicAttributes(Ae,Cn.shiftedAnchor,Cn.angle);else Xn(Qt.numGlyphs,Ae)}}F.icon.dynamicLayoutVertexBuffer.updateData(Ae)}F.text.dynamicLayoutVertexBuffer.updateData(ce)}function Ko(F,W,G){return G.iconsInText&&W?"symbolTextAndIcon":F?"symbolSDF":"symbolIcon"}function hs(F,W,G,te,ve,Ce,Be,qe,et,vt,xt,ee){for(var ce=F.context,Ae=ce.gl,Oe=F.transform,Fe="map"===qe,Ue="map"===et,Ge=Fe&&"point"!==G.layout.get("symbol-placement"),Xe=Fe&&!Ue&&!Ge,rt=void 0!==G.layout.get("symbol-sort-key").constantOr(1),ut=F.depthModeForSublayer(0,jt.ReadOnly),Ct=G.layout.get("text-variable-anchor"),Rt=[],Ft=0,Yt=te;Ft<Yt.length;Ft+=1){var cn=Yt[Ft],Wt=W.getTile(cn),tn=Wt.getBucket(G);if(tn){var $t=ve?tn.text:tn.icon;if($t&&$t.segments.get().length){var _n=$t.programConfigurations.get(G.id),dn=ve||tn.sdfIcons,Qt=ve?tn.textSizeData:tn.iconSizeData,Cn=Ue||0!==Oe.pitch,Dn=F.useProgram(Ko(dn,ve,tn),_n),Jn=l.evaluateSizeForZoom(Qt,Oe.zoom),Kn=void 0,vr=[0,0],yr=void 0,fr=void 0,gr=null,Sr=void 0;if(ve)yr=Wt.glyphAtlasTexture,fr=Ae.LINEAR,Kn=Wt.glyphAtlasTexture.size,tn.iconsInText&&(vr=Wt.imageAtlasTexture.size,gr=Wt.imageAtlasTexture,Sr=Cn||F.options.rotating||F.options.zooming||"composite"===Qt.kind||"camera"===Qt.kind?Ae.LINEAR:Ae.NEAREST);else{var Hr=1!==G.layout.get("icon-size").constantOr(0)||tn.iconsNeedLinear;yr=Wt.imageAtlasTexture,fr=dn||F.options.rotating||F.options.zooming||Hr||Cn?Ae.LINEAR:Ae.NEAREST,Kn=Wt.imageAtlasTexture.size}var pr=lr(Wt,1,F.transform.zoom),Er=jn(cn.posMatrix,Ue,Fe,F.transform,pr),Fr=mn(cn.posMatrix,Ue,Fe,F.transform,pr),Dr=Ct&&tn.hasTextData(),Yr="none"!==G.layout.get("icon-text-fit")&&Dr&&tn.hasIconData();Ge&&sn(tn,cn.posMatrix,F,ve,Er,Fr,Ue,vt);var Zr=F.translatePosMatrix(cn.posMatrix,Wt,Ce,Be),Qr=Ge||ve&&Ct||Yr?Ia:Er,hi=F.translatePosMatrix(Fr,Wt,Ce,Be,!0),_i=dn&&0!==G.paint.get(ve?"text-halo-width":"icon-halo-width").constantOr(1),vi={program:Dn,buffers:$t,uniformValues:dn?tn.iconsInText?yl(Qt.kind,Jn,Xe,Ue,F,Zr,Qr,hi,Kn,vr):_o(Qt.kind,Jn,Xe,Ue,F,Zr,Qr,hi,ve,Kn,!0):ni(Qt.kind,Jn,Xe,Ue,F,Zr,Qr,hi,ve,Kn),atlasTexture:yr,atlasTextureIcon:gr,atlasInterpolation:fr,atlasInterpolationIcon:Sr,isSDF:dn,hasHalo:_i};if(rt)for(var ci=0,pi=$t.segments.get();ci<pi.length;ci+=1){var mi=pi[ci];Rt.push({segments:new l.SegmentVector([mi]),sortKey:mi.sortKey,state:vi})}else Rt.push({segments:$t.segments,sortKey:0,state:vi})}}}rt&&Rt.sort(function(ta,Si){return ta.sortKey-Si.sortKey});for(var Ci=0,Eo=Rt;Ci<Eo.length;Ci+=1){var Ni=Eo[Ci],Nr=Ni.state;if(ce.activeTexture.set(Ae.TEXTURE0),Nr.atlasTexture.bind(Nr.atlasInterpolation,Ae.CLAMP_TO_EDGE),Nr.atlasTextureIcon&&(ce.activeTexture.set(Ae.TEXTURE1),Nr.atlasTextureIcon&&Nr.atlasTextureIcon.bind(Nr.atlasInterpolationIcon,Ae.CLAMP_TO_EDGE)),Nr.isSDF){var Yi=Nr.uniformValues;Nr.hasHalo&&(Yi.u_is_halo=1,Ro(Nr.buffers,Ni.segments,G,F,Nr.program,ut,xt,ee,Yi)),Yi.u_is_halo=0}Ro(Nr.buffers,Ni.segments,G,F,Nr.program,ut,xt,ee,Nr.uniformValues)}}function Ro(F,W,G,te,ve,Ce,Be,qe,et){var vt=te.context;ve.draw(vt,vt.gl.TRIANGLES,Ce,Be,qe,Ne.disabled,et,G.id,F.layoutVertexBuffer,F.indexBuffer,W,G.paint,te.transform.zoom,F.programConfigurations.get(G.id),F.dynamicLayoutVertexBuffer,F.opacityVertexBuffer)}function Do(F,W,G,te,ve,Ce,Be){var qe,et,vt,xt,ee,ce=F.context.gl,Ae=G.paint.get("fill-pattern"),Oe=Ae&&Ae.constantOr(1),Fe=G.getCrossfadeParameters();Be?(et=Oe&&!G.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=ce.LINES):(et=Oe?"fillPattern":"fill",qe=ce.TRIANGLES);for(var Ue=0,Ge=te;Ue<Ge.length;Ue+=1){var Xe=Ge[Ue],rt=W.getTile(Xe);if(!Oe||rt.patternsLoaded()){var ut=rt.getBucket(G);if(ut){var Ct=ut.programConfigurations.get(G.id),Rt=F.useProgram(et,Ct);Oe&&(F.context.activeTexture.set(ce.TEXTURE0),rt.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Ct.updatePaintBuffers(Fe));var Ft=Ae.constantOr(null);if(Ft&&rt.imageAtlas){var Yt=rt.imageAtlas,cn=Yt.patternPositions[Ft.to.toString()],Wt=Yt.patternPositions[Ft.from.toString()];cn&&Wt&&Ct.setConstantPatternPositions(cn,Wt)}var tn=F.translatePosMatrix(Xe.posMatrix,rt,G.paint.get("fill-translate"),G.paint.get("fill-translate-anchor"));if(Be){xt=ut.indexBuffer2,ee=ut.segments2;var $t=[ce.drawingBufferWidth,ce.drawingBufferHeight];vt="fillOutlinePattern"===et&&Oe?ml(tn,F,Fe,rt,$t):ll(tn,$t)}else xt=ut.indexBuffer,ee=ut.segments,vt=Oe?sl(tn,F,Fe,rt):io(tn);Rt.draw(F.context,qe,ve,F.stencilModeForClipping(Xe),Ce,Ne.disabled,vt,G.id,ut.layoutVertexBuffer,xt,ee,G.paint,F.transform.zoom,Ct)}}}}function $o(F,W,G,te,ve,Ce,Be){for(var qe=F.context,et=qe.gl,vt=G.paint.get("fill-extrusion-pattern"),xt=vt.constantOr(1),ee=G.getCrossfadeParameters(),ce=G.paint.get("fill-extrusion-opacity"),Ae=0,Oe=te;Ae<Oe.length;Ae+=1){var Fe=Oe[Ae],Ue=W.getTile(Fe),Ge=Ue.getBucket(G);if(Ge){var Xe=Ge.programConfigurations.get(G.id),rt=F.useProgram(xt?"fillExtrusionPattern":"fillExtrusion",Xe);xt&&(F.context.activeTexture.set(et.TEXTURE0),Ue.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Xe.updatePaintBuffers(ee));var ut=vt.constantOr(null);if(ut&&Ue.imageAtlas){var Ct=Ue.imageAtlas,Rt=Ct.patternPositions[ut.to.toString()],Ft=Ct.patternPositions[ut.from.toString()];Rt&&Ft&&Xe.setConstantPatternPositions(Rt,Ft)}var Yt=F.translatePosMatrix(Fe.posMatrix,Ue,G.paint.get("fill-extrusion-translate"),G.paint.get("fill-extrusion-translate-anchor")),cn=G.paint.get("fill-extrusion-vertical-gradient"),Wt=xt?ol(Yt,F,cn,ce,Fe,ee,Ue):us(Yt,F,cn,ce);rt.draw(qe,qe.gl.TRIANGLES,ve,Ce,Be,Ne.backCCW,Wt,G.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,G.paint,F.transform.zoom,Xe)}}}function ps(F,W,G,te,ve,Ce){var Be=F.context,qe=Be.gl,et=W.fbo;if(et){var vt=F.useProgram("hillshade");Be.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,et.colorAttachment.get());var xt=function(ee,ce,Ae){var Oe=Ae.paint.get("hillshade-shadow-color"),Fe=Ae.paint.get("hillshade-highlight-color"),Ue=Ae.paint.get("hillshade-accent-color"),Ge=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ae.paint.get("hillshade-illumination-anchor")&&(Ge-=ee.transform.angle);var Xe,rt,ut,Ct=!ee.options.moving;return{u_matrix:ee.transform.calculatePosMatrix(ce.tileID.toUnwrapped(),Ct),u_image:0,u_latrange:(Xe=ce.tileID,rt=Math.pow(2,Xe.canonical.z),ut=Xe.canonical.y,[new l.MercatorCoordinate(0,ut/rt).toLngLat().lat,new l.MercatorCoordinate(0,(ut+1)/rt).toLngLat().lat]),u_light:[Ae.paint.get("hillshade-exaggeration"),Ge],u_shadow:Oe,u_highlight:Fe,u_accent:Ue}}(F,W,G);vt.draw(Be,qe.TRIANGLES,te,ve,Ce,Ne.disabled,xt,G.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments)}}function ds(F,W,G,te,ve,Ce,Be){var Ue,Ge,Xe,rt,ut,qe=F.context,et=qe.gl,vt=W.dem;if(vt&&vt.data){var xt=vt.dim,ee=vt.stride,ce=vt.getPixels();if(qe.activeTexture.set(et.TEXTURE1),qe.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||F.getTileTexture(ee),W.demTexture){var Ae=W.demTexture;Ae.update(ce,{premultiply:!1}),Ae.bind(et.NEAREST,et.CLAMP_TO_EDGE)}else W.demTexture=new l.Texture(qe,ce,et.RGBA,{premultiply:!1}),W.demTexture.bind(et.NEAREST,et.CLAMP_TO_EDGE);qe.activeTexture.set(et.TEXTURE0);var Oe=W.fbo;if(!Oe){var Fe=new l.Texture(qe,{width:xt,height:xt,data:null},et.RGBA);Fe.bind(et.LINEAR,et.CLAMP_TO_EDGE),(Oe=W.fbo=qe.createFramebuffer(xt,xt,!0)).colorAttachment.set(Fe.texture)}qe.bindFramebuffer.set(Oe.framebuffer),qe.viewport.set([0,0,xt,xt]),F.useProgram("hillshadePrepare").draw(qe,et.TRIANGLES,ve,Ce,Be,Ne.disabled,(Ue=W.tileID,Xe=te,rt=(Ge=vt).stride,ut=l.create(),l.ortho(ut,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ut,ut,[0,-l.EXTENT,0]),{u_matrix:ut,u_image:1,u_dimension:[rt,rt],u_zoom:Ue.overscaledZ,u_maxzoom:Xe,u_unpack:Ge.getUnpackVector()}),G.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function za(F,W,G,te,ve){var Ce=te.paint.get("raster-fade-duration");if(Ce>0){var Be=l.browser.now(),qe=(Be-F.timeAdded)/Ce,et=W?(Be-W.timeAdded)/Ce:-1,vt=G.getSource(),xt=ve.coveringZoomLevel({tileSize:vt.tileSize,roundZoom:vt.roundZoom}),ee=!W||Math.abs(W.tileID.overscaledZ-xt)>Math.abs(F.tileID.overscaledZ-xt),ce=ee&&F.refreshedUponExpiration?1:l.clamp(ee?qe:1-et,0,1);return F.refreshedUponExpiration&&qe>=1&&(F.refreshedUponExpiration=!1),W?{opacity:1,mix:1-ce}:{opacity:ce,mix:0}}return{opacity:1,mix:0}}var gs=new l.Color(1,0,0,1),vs=new l.Color(0,1,0,1),Xs=new l.Color(0,0,1,1),wo=new l.Color(1,0,1,1),Es=new l.Color(0,1,1,1);function Js(F,W,G,te){Qo(F,0,W+G/2,F.transform.width,G,te)}function ys(F,W,G,te){Qo(F,W-G/2,0,G,F.transform.height,te)}function Qo(F,W,G,te,ve,Ce){var Be=F.context,qe=Be.gl;qe.enable(qe.SCISSOR_TEST),qe.scissor(W*l.browser.devicePixelRatio,G*l.browser.devicePixelRatio,te*l.browser.devicePixelRatio,ve*l.browser.devicePixelRatio),Be.clear({color:Ce}),qe.disable(qe.SCISSOR_TEST)}function Fo(F,W,G){var te=F.context,ve=te.gl,Ce=G.posMatrix,Be=F.useProgram("debug"),qe=jt.disabled,et=Ye.disabled,vt=F.colorModeForRenderPass();te.activeTexture.set(ve.TEXTURE0),F.emptyTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Be.draw(te,ve.LINE_STRIP,qe,et,vt,Ne.disabled,ao(Ce,l.Color.red),"$debug",F.debugBuffer,F.tileBorderIndexBuffer,F.debugSegments);var ee=W.getTileByID(G.key).latestRawTileData,Ae=Math.floor((ee&&ee.byteLength||0)/1024),Oe=W.getTile(G).tileSize,Fe=512/Math.min(Oe,512)*(G.overscaledZ/F.transform.zoom)*.5,Ue=G.canonical.toString();G.overscaledZ!==G.canonical.z&&(Ue+=" => "+G.overscaledZ),function(Ge,Xe){Ge.initDebugOverlayCanvas();var rt=Ge.debugOverlayCanvas,ut=Ge.context.gl,Ct=Ge.debugOverlayCanvas.getContext("2d");Ct.clearRect(0,0,rt.width,rt.height),Ct.shadowColor="white",Ct.shadowBlur=2,Ct.lineWidth=1.5,Ct.strokeStyle="white",Ct.textBaseline="top",Ct.font="bold 36px Open Sans, sans-serif",Ct.fillText(Xe,5,5),Ct.strokeText(Xe,5,5),Ge.debugOverlayTexture.update(rt),Ge.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}(F,Ue+" "+Ae+"kb"),Be.draw(te,ve.TRIANGLES,qe,et,Ze.alphaBlended,Ne.disabled,ao(Ce,l.Color.transparent,Fe),"$debug",F.debugBuffer,F.quadTriangleIndexBuffer,F.debugSegments)}var Bo={symbol:function(F,W,G,te,ve){if("translucent"===F.renderPass){var Ce=Ye.disabled,Be=F.colorModeForRenderPass();G.layout.get("text-variable-anchor")&&function(qe,et,vt,xt,ee,ce,Ae){for(var Oe=et.transform,Fe="map"===ee,Ue="map"===ce,Ge=0,Xe=qe;Ge<Xe.length;Ge+=1){var rt=Xe[Ge],ut=xt.getTile(rt),Ct=ut.getBucket(vt);if(Ct&&Ct.text&&Ct.text.segments.get().length){var Ft=l.evaluateSizeForZoom(Ct.textSizeData,Oe.zoom),Yt=lr(ut,1,et.transform.zoom),cn=jn(rt.posMatrix,Ue,Fe,et.transform,Yt),Wt="none"!==vt.layout.get("icon-text-fit")&&Ct.hasIconData();if(Ft){var tn=Math.pow(2,Oe.zoom-ut.tileID.overscaledZ);fs(Ct,Fe,Ue,Ae,l.symbolSize,Oe,cn,rt.posMatrix,tn,Ft,Wt)}}}}(te,F,G,W,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),ve),0!==G.paint.get("icon-opacity").constantOr(1)&&hs(F,W,G,te,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),Ce,Be),0!==G.paint.get("text-opacity").constantOr(1)&&hs(F,W,G,te,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),Ce,Be),W.map.showCollisionBoxes&&(Jo(F,W,G,te,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),Jo(F,W,G,te,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))}},circle:function(F,W,G,te){if("translucent"===F.renderPass){var ve=G.paint.get("circle-opacity"),Ce=G.paint.get("circle-stroke-width"),Be=G.paint.get("circle-stroke-opacity"),qe=void 0!==G.layout.get("circle-sort-key").constantOr(1);if(0!==ve.constantOr(1)||0!==Ce.constantOr(1)&&0!==Be.constantOr(1)){for(var et=F.context,vt=et.gl,xt=F.depthModeForSublayer(0,jt.ReadOnly),ee=Ye.disabled,ce=F.colorModeForRenderPass(),Ae=[],Oe=0;Oe<te.length;Oe++){var Fe=te[Oe],Ue=W.getTile(Fe),Ge=Ue.getBucket(G);if(Ge){var Xe=Ge.programConfigurations.get(G.id),rt={programConfiguration:Xe,program:F.useProgram("circle",Xe),layoutVertexBuffer:Ge.layoutVertexBuffer,indexBuffer:Ge.indexBuffer,uniformValues:qs(F,Fe,Ue,G)};if(qe)for(var ut=0,Ct=Ge.segments.get();ut<Ct.length;ut+=1){var Rt=Ct[ut];Ae.push({segments:new l.SegmentVector([Rt]),sortKey:Rt.sortKey,state:rt})}else Ae.push({segments:Ge.segments,sortKey:0,state:rt})}}qe&&Ae.sort(function(Dn,Jn){return Dn.sortKey-Jn.sortKey});for(var Ft=0,Yt=Ae;Ft<Yt.length;Ft+=1){var cn=Yt[Ft],Wt=cn.state;Wt.program.draw(et,vt.TRIANGLES,xt,ee,ce,Ne.disabled,Wt.uniformValues,G.id,Wt.layoutVertexBuffer,Wt.indexBuffer,cn.segments,G.paint,F.transform.zoom,Wt.programConfiguration)}}}},heatmap:function(F,W,G,te){if(0!==G.paint.get("heatmap-opacity"))if("offscreen"===F.renderPass){var ve=F.context,Ce=ve.gl,Be=Ye.disabled,qe=new Ze([Ce.ONE,Ce.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Fe,Ue,Ge){var Xe=Fe.gl;Fe.activeTexture.set(Xe.TEXTURE1),Fe.viewport.set([0,0,Ue.width/4,Ue.height/4]);var Ct,Rt,Ft,Yt,cn,rt=Ge.heatmapFbo;if(rt)Xe.bindTexture(Xe.TEXTURE_2D,rt.colorAttachment.get()),Fe.bindFramebuffer.set(rt.framebuffer);else{var ut=Xe.createTexture();Xe.bindTexture(Xe.TEXTURE_2D,ut),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_S,Xe.CLAMP_TO_EDGE),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_T,Xe.CLAMP_TO_EDGE),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_MIN_FILTER,Xe.LINEAR),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_MAG_FILTER,Xe.LINEAR),Ft=ut,Yt=rt=Ge.heatmapFbo=Fe.createFramebuffer(Ue.width/4,Ue.height/4,!1),(cn=(Ct=Fe).gl).texImage2D(cn.TEXTURE_2D,0,cn.RGBA,(Rt=Ue).width/4,Rt.height/4,0,cn.RGBA,Ct.extRenderToTextureHalfFloat?Ct.extTextureHalfFloat.HALF_FLOAT_OES:cn.UNSIGNED_BYTE,null),Yt.colorAttachment.set(Ft)}})(ve,F,G),ve.clear({color:l.Color.transparent});for(var et=0;et<te.length;et++){var vt=te[et];if(!W.hasRenderableParent(vt)){var xt=W.getTile(vt),ee=xt.getBucket(G);if(ee){var ce=ee.programConfigurations.get(G.id);F.useProgram("heatmap",ce).draw(ve,Ce.TRIANGLES,jt.disabled,Be,qe,Ne.disabled,Wo(vt.posMatrix,xt,F.transform.zoom,G.paint.get("heatmap-intensity")),G.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,G.paint,F.transform.zoom,ce)}}}ve.viewport.set([0,0,F.width,F.height])}else"translucent"===F.renderPass&&(F.context.setColorMode(F.colorModeForRenderPass()),function(Fe,Ue){var Ge=Fe.context,Xe=Ge.gl,rt=Ue.heatmapFbo;if(rt){Ge.activeTexture.set(Xe.TEXTURE0),Xe.bindTexture(Xe.TEXTURE_2D,rt.colorAttachment.get()),Ge.activeTexture.set(Xe.TEXTURE1);var ut=Ue.colorRampTexture;ut||(ut=Ue.colorRampTexture=new l.Texture(Ge,Ue.colorRamp,Xe.RGBA)),ut.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),Fe.useProgram("heatmapTexture").draw(Ge,Xe.TRIANGLES,jt.disabled,Ye.disabled,Fe.colorModeForRenderPass(),Ne.disabled,function(Ct,Rt,Ft,Yt){var cn=l.create();l.ortho(cn,0,Ct.width,Ct.height,0,0,1);var Wt=Ct.context.gl;return{u_matrix:cn,u_world:[Wt.drawingBufferWidth,Wt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Rt.paint.get("heatmap-opacity")}}(Fe,Ue),Ue.id,Fe.viewportBuffer,Fe.quadTriangleIndexBuffer,Fe.viewportSegments,Ue.paint,Fe.transform.zoom)}}(F,G))},line:function(F,W,G,te){if("translucent"===F.renderPass){var ve=G.paint.get("line-opacity"),Ce=G.paint.get("line-width");if(0!==ve.constantOr(1)&&0!==Ce.constantOr(1)){var Be=F.depthModeForSublayer(0,jt.ReadOnly),qe=F.colorModeForRenderPass(),et=G.paint.get("line-dasharray"),vt=G.paint.get("line-pattern"),xt=vt.constantOr(1),ee=G.paint.get("line-gradient"),ce=G.getCrossfadeParameters(),Ae=xt?"linePattern":et?"lineSDF":ee?"lineGradient":"line",Oe=F.context,Fe=Oe.gl,Ue=!0;if(ee){Oe.activeTexture.set(Fe.TEXTURE0);var Ge=G.gradientTexture;if(!G.gradient)return;Ge||(Ge=G.gradientTexture=new l.Texture(Oe,G.gradient,Fe.RGBA)),Ge.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)}for(var Xe=0,rt=te;Xe<rt.length;Xe+=1){var ut=rt[Xe],Ct=W.getTile(ut);if(!xt||Ct.patternsLoaded()){var Rt=Ct.getBucket(G);if(Rt){var Ft=Rt.programConfigurations.get(G.id),Yt=F.context.program.get(),cn=F.useProgram(Ae,Ft),Wt=Ue||cn.program!==Yt,tn=vt.constantOr(null);if(tn&&Ct.imageAtlas){var $t=Ct.imageAtlas,_n=$t.patternPositions[tn.to.toString()],dn=$t.patternPositions[tn.from.toString()];_n&&dn&&Ft.setConstantPatternPositions(_n,dn)}var Qt=xt?Ys(F,Ct,G,ce):et?Oo(F,Ct,G,et,ce):ee?Zs(F,Ct,G):so(F,Ct,G);xt?(Oe.activeTexture.set(Fe.TEXTURE0),Ct.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ft.updatePaintBuffers(ce)):et&&(Wt||F.lineAtlas.dirty)&&(Oe.activeTexture.set(Fe.TEXTURE0),F.lineAtlas.bind(Oe)),cn.draw(Oe,Fe.TRIANGLES,Be,F.stencilModeForClipping(ut),qe,Ne.disabled,Qt,G.id,Rt.layoutVertexBuffer,Rt.indexBuffer,Rt.segments,G.paint,F.transform.zoom,Ft),Ue=!1}}}}}},fill:function(F,W,G,te){var ve=G.paint.get("fill-color"),Ce=G.paint.get("fill-opacity");if(0!==Ce.constantOr(1)){var Be=F.colorModeForRenderPass(),qe=G.paint.get("fill-pattern"),et=F.opaquePassEnabledForLayer()&&!qe.constantOr(1)&&1===ve.constantOr(l.Color.transparent).a&&1===Ce.constantOr(0)?"opaque":"translucent";if(F.renderPass===et){var vt=F.depthModeForSublayer(1,"opaque"===F.renderPass?jt.ReadWrite:jt.ReadOnly);Do(F,W,G,te,vt,Be,!1)}if("translucent"===F.renderPass&&G.paint.get("fill-antialias")){var xt=F.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,jt.ReadOnly);Do(F,W,G,te,xt,Be,!0)}}},"fill-extrusion":function(F,W,G,te){var ve=G.paint.get("fill-extrusion-opacity");if(0!==ve&&"translucent"===F.renderPass){var Ce=new jt(F.context.gl.LEQUAL,jt.ReadWrite,F.depthRangeFor3D);if(1!==ve||G.paint.get("fill-extrusion-pattern").constantOr(1))$o(F,W,G,te,Ce,Ye.disabled,Ze.disabled),$o(F,W,G,te,Ce,F.stencilModeFor3D(),F.colorModeForRenderPass());else{var Be=F.colorModeForRenderPass();$o(F,W,G,te,Ce,Ye.disabled,Be)}}},hillshade:function(F,W,G,te){if("offscreen"===F.renderPass||"translucent"===F.renderPass){for(var ve=F.context,Ce=W.getSource().maxzoom,Be=F.depthModeForSublayer(0,jt.ReadOnly),qe=F.colorModeForRenderPass(),et="translucent"===F.renderPass?F.stencilConfigForOverlap(te):[{},te],vt=et[0],xt=0,ee=et[1];xt<ee.length;xt+=1){var ce=ee[xt],Ae=W.getTile(ce);Ae.needsHillshadePrepare&&"offscreen"===F.renderPass?ds(F,Ae,G,Ce,Be,Ye.disabled,qe):"translucent"===F.renderPass&&ps(F,Ae,G,Be,vt[ce.overscaledZ],qe)}ve.viewport.set([0,0,F.width,F.height])}},raster:function(F,W,G,te){if("translucent"===F.renderPass&&0!==G.paint.get("raster-opacity")&&te.length)for(var ve=F.context,Ce=ve.gl,Be=W.getSource(),qe=F.useProgram("raster"),et=F.colorModeForRenderPass(),vt=Be instanceof B?[{},te]:F.stencilConfigForOverlap(te),xt=vt[0],ee=vt[1],ce=ee[ee.length-1].overscaledZ,Ae=!F.options.moving,Oe=0,Fe=ee;Oe<Fe.length;Oe+=1){var Ue=Fe[Oe],Ge=F.depthModeForSublayer(Ue.overscaledZ-ce,1===G.paint.get("raster-opacity")?jt.ReadWrite:jt.ReadOnly,Ce.LESS),Xe=W.getTile(Ue),rt=F.transform.calculatePosMatrix(Ue.toUnwrapped(),Ae);Xe.registerFadeDuration(G.paint.get("raster-fade-duration"));var ut=W.findLoadedParent(Ue,0),Ct=za(Xe,ut,W,G,F.transform),Rt=void 0,Ft=void 0,Yt="nearest"===G.paint.get("raster-resampling")?Ce.NEAREST:Ce.LINEAR;ve.activeTexture.set(Ce.TEXTURE0),Xe.texture.bind(Yt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ve.activeTexture.set(Ce.TEXTURE1),ut?(ut.texture.bind(Yt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),Rt=Math.pow(2,ut.tileID.overscaledZ-Xe.tileID.overscaledZ),Ft=[Xe.tileID.canonical.x*Rt%1,Xe.tileID.canonical.y*Rt%1]):Xe.texture.bind(Yt,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);var cn=Xo(rt,Ft||[0,0],Rt||1,Ct,G);Be instanceof B?qe.draw(ve,Ce.TRIANGLES,Ge,Ye.disabled,et,Ne.disabled,cn,G.id,Be.boundsBuffer,F.quadTriangleIndexBuffer,Be.boundsSegments):qe.draw(ve,Ce.TRIANGLES,Ge,xt[Ue.overscaledZ],et,Ne.disabled,cn,G.id,F.rasterBoundsBuffer,F.quadTriangleIndexBuffer,F.rasterBoundsSegments)}},background:function(F,W,G){var te=G.paint.get("background-color"),ve=G.paint.get("background-opacity");if(0!==ve){var Ce=F.context,Be=Ce.gl,qe=F.transform,et=qe.tileSize,vt=G.paint.get("background-pattern");if(!F.isPatternMissing(vt)){var xt=!vt&&1===te.a&&1===ve&&F.opaquePassEnabledForLayer()?"opaque":"translucent";if(F.renderPass===xt){var ee=Ye.disabled,ce=F.depthModeForSublayer(0,"opaque"===xt?jt.ReadWrite:jt.ReadOnly),Ae=F.colorModeForRenderPass(),Oe=F.useProgram(vt?"backgroundPattern":"background"),Fe=qe.coveringTiles({tileSize:et});vt&&(Ce.activeTexture.set(Be.TEXTURE0),F.imageManager.bind(F.context));for(var Ue=G.getCrossfadeParameters(),Ge=0,Xe=Fe;Ge<Xe.length;Ge+=1){var rt=Xe[Ge],ut=F.transform.calculatePosMatrix(rt.toUnwrapped()),Ct=vt?cs(ut,ve,F,vt,{tileID:rt,tileSize:et},Ue):Ss(ut,ve,te);Oe.draw(Ce,Be.TRIANGLES,ce,ee,Ae,Ne.disabled,Ct,G.id,F.tileExtentBuffer,F.quadTriangleIndexBuffer,F.tileExtentSegments)}}}}},debug:function(F,W,G){for(var te=0;te<G.length;te++)Fo(F,W,G[te])},custom:function(F,W,G){var te=F.context,ve=G.implementation;if("offscreen"===F.renderPass){var Ce=ve.prerender;Ce&&(F.setCustomLayerDefaults(),te.setColorMode(F.colorModeForRenderPass()),Ce.call(ve,te.gl,F.transform.customLayerMatrix()),te.setDirty(),F.setBaseState())}else if("translucent"===F.renderPass){F.setCustomLayerDefaults(),te.setColorMode(F.colorModeForRenderPass()),te.setStencilMode(Ye.disabled);var Be="3d"===ve.renderingMode?new jt(F.context.gl.LEQUAL,jt.ReadWrite,F.depthRangeFor3D):F.depthModeForSublayer(0,jt.ReadOnly);te.setDepthMode(Be),ve.render(te.gl,F.transform.customLayerMatrix()),te.setDirty(),F.setBaseState(),te.bindFramebuffer.set(null)}}},li=function(F,W){this.context=new Je(F),this.transform=W,this._tileTextures={},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wn,this.gpuTimers={}};li.prototype.resize=function(F,W){if(this.width=F*l.browser.devicePixelRatio,this.height=W*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var G=0,te=this.style._order;G<te.length;G+=1)this.style._layers[te[G]].resize()},li.prototype.setup=function(){var F=this.context,W=new l.StructArrayLayout2i4;W.emplaceBack(0,0),W.emplaceBack(l.EXTENT,0),W.emplaceBack(0,l.EXTENT),W.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=F.createVertexBuffer(W,cr.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var G=new l.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(l.EXTENT,0),G.emplaceBack(0,l.EXTENT),G.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=F.createVertexBuffer(G,cr.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var te=new l.StructArrayLayout4i8;te.emplaceBack(0,0,0,0),te.emplaceBack(l.EXTENT,0,l.EXTENT,0),te.emplaceBack(0,l.EXTENT,0,l.EXTENT),te.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=F.createVertexBuffer(te,D.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var ve=new l.StructArrayLayout2i4;ve.emplaceBack(0,0),ve.emplaceBack(1,0),ve.emplaceBack(0,1),ve.emplaceBack(1,1),this.viewportBuffer=F.createVertexBuffer(ve,cr.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var Ce=new l.StructArrayLayout1ui2;Ce.emplaceBack(0),Ce.emplaceBack(1),Ce.emplaceBack(3),Ce.emplaceBack(2),Ce.emplaceBack(0),this.tileBorderIndexBuffer=F.createIndexBuffer(Ce);var Be=new l.StructArrayLayout3ui6;Be.emplaceBack(0,1,2),Be.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=F.createIndexBuffer(Be),this.emptyTexture=new l.Texture(F,{width:1,height:1,data:new Uint8Array([0,0,0,0])},F.gl.RGBA);var qe=this.context.gl;this.stencilClearMode=new Ye({func:qe.ALWAYS,mask:0},0,255,qe.ZERO,qe.ZERO,qe.ZERO)},li.prototype.clearStencil=function(){var F=this.context,W=F.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var G=l.create();l.ortho(G,0,this.width,this.height,0,0,1),l.scale(G,G,[W.drawingBufferWidth,W.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(F,W.TRIANGLES,jt.disabled,this.stencilClearMode,Ze.disabled,Ne.disabled,oo(G),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},li.prototype._renderTileClippingMasks=function(F,W){if(this.currentStencilSource!==F.source&&F.isTileClipped()&&W&&W.length){this.currentStencilSource=F.source;var G=this.context,te=G.gl;this.nextStencilID+W.length>256&&this.clearStencil(),G.setColorMode(Ze.disabled),G.setDepthMode(jt.disabled);var ve=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ce=0,Be=W;Ce<Be.length;Ce+=1){var qe=Be[Ce],et=this._tileClippingMaskIDs[qe.key]=this.nextStencilID++;ve.draw(G,te.TRIANGLES,jt.disabled,new Ye({func:te.ALWAYS,mask:0},et,255,te.KEEP,te.KEEP,te.REPLACE),Ze.disabled,Ne.disabled,oo(qe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},li.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var F=this.nextStencilID++,W=this.context.gl;return new Ye({func:W.NOTEQUAL,mask:255},F,255,W.KEEP,W.KEEP,W.REPLACE)},li.prototype.stencilModeForClipping=function(F){var W=this.context.gl;return new Ye({func:W.EQUAL,mask:255},this._tileClippingMaskIDs[F.key],0,W.KEEP,W.KEEP,W.REPLACE)},li.prototype.stencilConfigForOverlap=function(F){var W,G=this.context.gl,te=F.sort(function(et,vt){return vt.overscaledZ-et.overscaledZ}),ve=te[te.length-1].overscaledZ,Ce=te[0].overscaledZ-ve+1;if(Ce>1){this.currentStencilSource=void 0,this.nextStencilID+Ce>256&&this.clearStencil();for(var Be={},qe=0;qe<Ce;qe++)Be[qe+ve]=new Ye({func:G.GEQUAL,mask:255},qe+this.nextStencilID,255,G.KEEP,G.KEEP,G.REPLACE);return this.nextStencilID+=Ce,[Be,te]}return[(W={},W[ve]=Ye.disabled,W),te]},li.prototype.colorModeForRenderPass=function(){var F=this.context.gl;if(this._showOverdrawInspector){var W=.125;return new Ze([F.CONSTANT_COLOR,F.ONE],new l.Color(W,W,W,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Ze.unblended:Ze.alphaBlended},li.prototype.depthModeForSublayer=function(F,W,G){if(!this.opaquePassEnabledForLayer())return jt.disabled;var te=1-((1+this.currentLayer)*this.numSublayers+F)*this.depthEpsilon;return new jt(G||this.context.gl.LEQUAL,W,[te,te])},li.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},li.prototype.render=function(F,W){var G=this;this.style=F,this.options=W,this.lineAtlas=F.lineAtlas,this.imageManager=F.imageManager,this.glyphManager=F.glyphManager,this.symbolFadeChange=F.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var te=this.style._order,ve=this.style.sourceCaches;for(var Ce in ve){var Be=ve[Ce];Be.used&&Be.prepare(this.context)}var qe,et,vt={},xt={},ee={};for(var ce in ve){var Ae=ve[ce];vt[ce]=Ae.getVisibleCoordinates(),xt[ce]=vt[ce].slice().reverse(),ee[ce]=Ae.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Oe=0;Oe<te.length;Oe++)if(this.style._layers[te[Oe]].is3D()){this.opaquePassCutoff=Oe;break}this.renderPass="offscreen";for(var Ue=0,Ge=te;Ue<Ge.length;Ue+=1){var rt=this.style._layers[Ge[Ue]];if(rt.hasOffscreenPass()&&!rt.isHidden(this.transform.zoom)){var ut=xt[rt.source];("custom"===rt.type||ut.length)&&this.renderLayer(this,ve[rt.source],rt,ut)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:W.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=W.showOverdrawInspector,this.depthRangeFor3D=[0,1-(F._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=te.length-1;this.currentLayer>=0;this.currentLayer--){var Ct=this.style._layers[te[this.currentLayer]],Rt=ve[Ct.source],Ft=vt[Ct.source];this._renderTileClippingMasks(Ct,Ft),this.renderLayer(this,Rt,Ct,Ft)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<te.length;this.currentLayer++){var Yt=this.style._layers[te[this.currentLayer]],cn=ve[Yt.source],Wt=("symbol"===Yt.type?ee:xt)[Yt.source];this._renderTileClippingMasks(Yt,vt[Yt.source]),this.renderLayer(this,cn,Yt,Wt)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(tn){tn.source&&!tn.isHidden(G.transform.zoom)&&(tn.source!==(et&&et.id)&&(et=G.style.sourceCaches[tn.source]),(!qe||qe.getSource().maxzoom<et.getSource().maxzoom)&&(qe=et))}),qe&&Bo.debug(this,qe,qe.getVisibleCoordinates())),this.options.showPadding&&function ms(F){var W=F.transform.padding;Js(F,F.transform.height-(W.top||0),3,gs),Js(F,W.bottom||0,3,vs),ys(F,W.left||0,3,Xs),ys(F,F.transform.width-(W.right||0),3,wo);var te,ve,Ce,Be,G=F.transform.centerPoint;Qo(te=F,(ve=G.x)-1,(Ce=F.transform.height-G.y)-10,2,20,Be=Es),Qo(te,ve-10,Ce-1,20,2,Be)}(this),this.context.setDefault()},li.prototype.renderLayer=function(F,W,G,te){G.isHidden(this.transform.zoom)||("background"===G.type||"custom"===G.type||te.length)&&(this.id=G.id,this.gpuTimingStart(G),Bo[G.type](F,W,G,te,this.style.placement.variableOffsets),this.gpuTimingEnd())},li.prototype.gpuTimingStart=function(F){if(this.options.gpuTiming){var W=this.context.extTimerQuery,G=this.gpuTimers[F.id];G||(G=this.gpuTimers[F.id]={calls:0,cpuTime:0,query:W.createQueryEXT()}),G.calls++,W.beginQueryEXT(W.TIME_ELAPSED_EXT,G.query)}},li.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var F=this.context.extTimerQuery;F.endQueryEXT(F.TIME_ELAPSED_EXT)}},li.prototype.collectGpuTimers=function(){var F=this.gpuTimers;return this.gpuTimers={},F},li.prototype.queryGpuTimers=function(F){var W={};for(var G in F){var te=F[G],ve=this.context.extTimerQuery,Ce=ve.getQueryObjectEXT(te.query,ve.QUERY_RESULT_EXT)/1e6;ve.deleteQueryEXT(te.query),W[G]=Ce}return W},li.prototype.translatePosMatrix=function(F,W,G,te,ve){if(!G[0]&&!G[1])return F;var Ce=ve?"map"===te?this.transform.angle:0:"viewport"===te?-this.transform.angle:0;if(Ce){var Be=Math.sin(Ce),qe=Math.cos(Ce);G=[G[0]*qe-G[1]*Be,G[0]*Be+G[1]*qe]}var et=[ve?G[0]:lr(W,G[0],this.transform.zoom),ve?G[1]:lr(W,G[1],this.transform.zoom),0],vt=new Float32Array(16);return l.translate(vt,F,et),vt},li.prototype.saveTileTexture=function(F){var W=this._tileTextures[F.size[0]];W?W.push(F):this._tileTextures[F.size[0]]=[F]},li.prototype.getTileTexture=function(F){var W=this._tileTextures[F];return W&&W.length>0?W.pop():null},li.prototype.isPatternMissing=function(F){if(!F)return!1;if(!F.from||!F.to)return!0;var W=this.imageManager.getPattern(F.from.toString()),G=this.imageManager.getPattern(F.to.toString());return!W||!G},li.prototype.useProgram=function(F,W){this.cache=this.cache||{};var G=""+F+(W?W.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[G]||(this.cache[G]=new Ha(this.context,xo[F],W,zo[F],this._showOverdrawInspector)),this.cache[G]},li.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},li.prototype.setBaseState=function(){var F=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(F.FUNC_ADD)},li.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},li.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var To=function(F,W){this.points=F,this.planes=W};To.fromInvProjectionMatrix=function(F,W,G){var te=Math.pow(2,G),ve=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Be){return l.transformMat4([],Be,F)}).map(function(Be){return l.scale$1([],Be,1/Be[3]/W*te)}),Ce=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Be){var qe=l.sub([],ve[Be[0]],ve[Be[1]]),et=l.sub([],ve[Be[2]],ve[Be[1]]),vt=l.normalize([],l.cross([],qe,et)),xt=-l.dot(vt,ve[Be[1]]);return vt.concat(xt)});return new To(ve,Ce)};var ko=function(F,W){this.min=F,this.max=W,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};ko.prototype.quadrant=function(F){for(var W=[F%2==0,F<2],G=l.clone$2(this.min),te=l.clone$2(this.max),ve=0;ve<W.length;ve++)G[ve]=W[ve]?this.min[ve]:this.center[ve],te[ve]=W[ve]?this.center[ve]:this.max[ve];return te[2]=this.max[2],new ko(G,te)},ko.prototype.distanceX=function(F){return Math.max(Math.min(this.max[0],F[0]),this.min[0])-F[0]},ko.prototype.distanceY=function(F){return Math.max(Math.min(this.max[1],F[1]),this.min[1])-F[1]},ko.prototype.intersects=function(F){for(var W=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],G=!0,te=0;te<F.planes.length;te++){for(var ve=F.planes[te],Ce=0,Be=0;Be<W.length;Be++)Ce+=l.dot$1(ve,W[Be])>=0;if(0===Ce)return 0;Ce!==W.length&&(G=!1)}if(G)return 2;for(var qe=0;qe<3;qe++){for(var et=Number.MAX_VALUE,vt=-Number.MAX_VALUE,xt=0;xt<F.points.length;xt++){var ee=F.points[xt][qe]-this.min[qe];et=Math.min(et,ee),vt=Math.max(vt,ee)}if(vt<0||et>this.max[qe]-this.min[qe])return 0}return 1};var Wi=function(F,W,G,te){if(void 0===F&&(F=0),void 0===W&&(W=0),void 0===G&&(G=0),void 0===te&&(te=0),isNaN(F)||F<0||isNaN(W)||W<0||isNaN(G)||G<0||isNaN(te)||te<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=F,this.bottom=W,this.left=G,this.right=te};Wi.prototype.interpolate=function(F,W,G){return null!=W.top&&null!=F.top&&(this.top=l.number(F.top,W.top,G)),null!=W.bottom&&null!=F.bottom&&(this.bottom=l.number(F.bottom,W.bottom,G)),null!=W.left&&null!=F.left&&(this.left=l.number(F.left,W.left,G)),null!=W.right&&null!=F.right&&(this.right=l.number(F.right,W.right,G)),this},Wi.prototype.getCenter=function(F,W){var G=l.clamp((this.left+F-this.right)/2,0,F),te=l.clamp((this.top+W-this.bottom)/2,0,W);return new l.Point(G,te)},Wi.prototype.equals=function(F){return this.top===F.top&&this.bottom===F.bottom&&this.left===F.left&&this.right===F.right},Wi.prototype.clone=function(){return new Wi(this.top,this.bottom,this.left,this.right)},Wi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jr=function(F,W,G,te,ve){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ve||ve,this._minZoom=F||0,this._maxZoom=W||22,this._minPitch=G??0,this._maxPitch=te??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Wi,this._posMatrixCache={},this._alignedPosMatrixCache={}},$r={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jr.prototype.clone=function(){var F=new Jr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return F.tileSize=this.tileSize,F.latRange=this.latRange,F.width=this.width,F.height=this.height,F._center=this._center,F.zoom=this.zoom,F.angle=this.angle,F._fov=this._fov,F._pitch=this._pitch,F._unmodified=this._unmodified,F._edgeInsets=this._edgeInsets.clone(),F._calcMatrices(),F},$r.minZoom.get=function(){return this._minZoom},$r.minZoom.set=function(F){this._minZoom!==F&&(this._minZoom=F,this.zoom=Math.max(this.zoom,F))},$r.maxZoom.get=function(){return this._maxZoom},$r.maxZoom.set=function(F){this._maxZoom!==F&&(this._maxZoom=F,this.zoom=Math.min(this.zoom,F))},$r.minPitch.get=function(){return this._minPitch},$r.minPitch.set=function(F){this._minPitch!==F&&(this._minPitch=F,this.pitch=Math.max(this.pitch,F))},$r.maxPitch.get=function(){return this._maxPitch},$r.maxPitch.set=function(F){this._maxPitch!==F&&(this._maxPitch=F,this.pitch=Math.min(this.pitch,F))},$r.renderWorldCopies.get=function(){return this._renderWorldCopies},$r.renderWorldCopies.set=function(F){void 0===F?F=!0:null===F&&(F=!1),this._renderWorldCopies=F},$r.worldSize.get=function(){return this.tileSize*this.scale},$r.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},$r.size.get=function(){return new l.Point(this.width,this.height)},$r.bearing.get=function(){return-this.angle/Math.PI*180},$r.bearing.set=function(F){var W=-l.wrap(F,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},$r.pitch.get=function(){return this._pitch/Math.PI*180},$r.pitch.set=function(F){var W=l.clamp(F,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},$r.fov.get=function(){return this._fov/Math.PI*180},$r.fov.set=function(F){F=Math.max(.01,Math.min(60,F)),this._fov!==F&&(this._unmodified=!1,this._fov=F/180*Math.PI,this._calcMatrices())},$r.zoom.get=function(){return this._zoom},$r.zoom.set=function(F){var W=Math.min(Math.max(F,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},$r.center.get=function(){return this._center},$r.center.set=function(F){F.lat===this._center.lat&&F.lng===this._center.lng||(this._unmodified=!1,this._center=F,this._constrain(),this._calcMatrices())},$r.padding.get=function(){return this._edgeInsets.toJSON()},$r.padding.set=function(F){this._edgeInsets.equals(F)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,F,1),this._calcMatrices())},$r.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Jr.prototype.isPaddingEqual=function(F){return this._edgeInsets.equals(F)},Jr.prototype.interpolatePadding=function(F,W,G){this._unmodified=!1,this._edgeInsets.interpolate(F,W,G),this._constrain(),this._calcMatrices()},Jr.prototype.coveringZoomLevel=function(F){var W=(F.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/F.tileSize));return Math.max(0,W)},Jr.prototype.getVisibleUnwrappedCoordinates=function(F){var W=[new l.UnwrappedTileID(0,F)];if(this._renderWorldCopies)for(var G=this.pointCoordinate(new l.Point(0,0)),te=this.pointCoordinate(new l.Point(this.width,0)),ve=this.pointCoordinate(new l.Point(this.width,this.height)),Ce=this.pointCoordinate(new l.Point(0,this.height)),Be=Math.floor(Math.min(G.x,te.x,ve.x,Ce.x)),qe=Math.floor(Math.max(G.x,te.x,ve.x,Ce.x)),et=Be-1;et<=qe+1;et++)0!==et&&W.push(new l.UnwrappedTileID(et,F));return W},Jr.prototype.coveringTiles=function(F){var W=this.coveringZoomLevel(F),G=W;if(void 0!==F.minzoom&&W<F.minzoom)return[];void 0!==F.maxzoom&&W>F.maxzoom&&(W=F.maxzoom);var te=l.MercatorCoordinate.fromLngLat(this.center),ve=Math.pow(2,W),Ce=[ve*te.x,ve*te.y,0],Be=To.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,W),qe=F.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(qe=W);var et=function(Wt){return{aabb:new ko([Wt*ve,0,0],[(Wt+1)*ve,ve,0]),zoom:0,x:0,y:0,wrap:Wt,fullyVisible:!1}},vt=[],xt=[],ee=W,ce=F.reparseOverscaled?G:W;if(this._renderWorldCopies)for(var Ae=1;Ae<=3;Ae++)vt.push(et(-Ae)),vt.push(et(Ae));for(vt.push(et(0));vt.length>0;){var Oe=vt.pop(),Fe=Oe.x,Ue=Oe.y,Ge=Oe.fullyVisible;if(!Ge){var Xe=Oe.aabb.intersects(Be);if(0===Xe)continue;Ge=2===Xe}var rt=Oe.aabb.distanceX(Ce),ut=Oe.aabb.distanceY(Ce),Ct=Math.max(Math.abs(rt),Math.abs(ut));if(Oe.zoom===ee||Ct>3+(1<<ee-Oe.zoom)-2&&Oe.zoom>=qe)xt.push({tileID:new l.OverscaledTileID(Oe.zoom===ee?ce:Oe.zoom,Oe.wrap,Oe.zoom,Fe,Ue),distanceSq:l.sqrLen([Ce[0]-.5-Fe,Ce[1]-.5-Ue])});else for(var Ft=0;Ft<4;Ft++){var Yt=(Fe<<1)+Ft%2,cn=(Ue<<1)+(Ft>>1);vt.push({aabb:Oe.aabb.quadrant(Ft),zoom:Oe.zoom+1,x:Yt,y:cn,wrap:Oe.wrap,fullyVisible:Ge})}}return xt.sort(function(Wt,tn){return Wt.distanceSq-tn.distanceSq}).map(function(Wt){return Wt.tileID})},Jr.prototype.resize=function(F,W){this.width=F,this.height=W,this.pixelsToGLUnits=[2/F,-2/W],this._constrain(),this._calcMatrices()},$r.unmodified.get=function(){return this._unmodified},Jr.prototype.zoomScale=function(F){return Math.pow(2,F)},Jr.prototype.scaleZoom=function(F){return Math.log(F)/Math.LN2},Jr.prototype.project=function(F){var W=l.clamp(F.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(F.lng)*this.worldSize,l.mercatorYfromLat(W)*this.worldSize)},Jr.prototype.unproject=function(F){return new l.MercatorCoordinate(F.x/this.worldSize,F.y/this.worldSize).toLngLat()},$r.point.get=function(){return this.project(this.center)},Jr.prototype.setLocationAtPoint=function(F,W){var G=this.pointCoordinate(W),te=this.pointCoordinate(this.centerPoint),ve=this.locationCoordinate(F),Ce=new l.MercatorCoordinate(ve.x-(G.x-te.x),ve.y-(G.y-te.y));this.center=this.coordinateLocation(Ce),this._renderWorldCopies&&(this.center=this.center.wrap())},Jr.prototype.locationPoint=function(F){return this.coordinatePoint(this.locationCoordinate(F))},Jr.prototype.pointLocation=function(F){return this.coordinateLocation(this.pointCoordinate(F))},Jr.prototype.locationCoordinate=function(F){return l.MercatorCoordinate.fromLngLat(F)},Jr.prototype.coordinateLocation=function(F){return F.toLngLat()},Jr.prototype.pointCoordinate=function(F){var W=[F.x,F.y,0,1],G=[F.x,F.y,1,1];l.transformMat4(W,W,this.pixelMatrixInverse),l.transformMat4(G,G,this.pixelMatrixInverse);var te=W[3],ve=G[3],qe=W[1]/te,et=G[1]/ve,vt=W[2]/te,xt=G[2]/ve,ee=vt===xt?0:(0-vt)/(xt-vt);return new l.MercatorCoordinate(l.number(W[0]/te,G[0]/ve,ee)/this.worldSize,l.number(qe,et,ee)/this.worldSize)},Jr.prototype.coordinatePoint=function(F){var W=[F.x*this.worldSize,F.y*this.worldSize,0,1];return l.transformMat4(W,W,this.pixelMatrix),new l.Point(W[0]/W[3],W[1]/W[3])},Jr.prototype.getBounds=function(){return(new l.LngLatBounds).extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Jr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jr.prototype.setMaxBounds=function(F){F?(this.lngRange=[F.getWest(),F.getEast()],this.latRange=[F.getSouth(),F.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jr.prototype.calculatePosMatrix=function(F,W){void 0===W&&(W=!1);var G=F.key,te=W?this._alignedPosMatrixCache:this._posMatrixCache;if(te[G])return te[G];var ve=F.canonical,Ce=this.worldSize/this.zoomScale(ve.z),Be=ve.x+Math.pow(2,ve.z)*F.wrap,qe=l.identity(new Float64Array(16));return l.translate(qe,qe,[Be*Ce,ve.y*Ce,0]),l.scale(qe,qe,[Ce/l.EXTENT,Ce/l.EXTENT,1]),l.multiply(qe,W?this.alignedProjMatrix:this.projMatrix,qe),te[G]=new Float32Array(qe),te[G]},Jr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var F,W,G,te,ve=-90,Ce=90,Be=-180,qe=180,et=this.size,vt=this._unmodified;if(this.latRange){var xt=this.latRange;ve=l.mercatorYfromLat(xt[1])*this.worldSize,F=(Ce=l.mercatorYfromLat(xt[0])*this.worldSize)-ve<et.y?et.y/(Ce-ve):0}if(this.lngRange){var ee=this.lngRange;Be=l.mercatorXfromLng(ee[0])*this.worldSize,W=(qe=l.mercatorXfromLng(ee[1])*this.worldSize)-Be<et.x?et.x/(qe-Be):0}var ce=this.point,Ae=Math.max(W||0,F||0);if(Ae)return this.center=this.unproject(new l.Point(W?(qe+Be)/2:ce.x,F?(Ce+ve)/2:ce.y)),this.zoom+=this.scaleZoom(Ae),this._unmodified=vt,void(this._constraining=!1);if(this.latRange){var Oe=ce.y,Fe=et.y/2;Oe-Fe<ve&&(te=ve+Fe),Oe+Fe>Ce&&(te=Ce-Fe)}if(this.lngRange){var Ue=ce.x,Ge=et.x/2;Ue-Ge<Be&&(G=Be+Ge),Ue+Ge>qe&&(G=qe-Ge)}void 0===G&&void 0===te||(this.center=this.unproject(new l.Point(void 0!==G?G:ce.x,void 0!==te?te:ce.y))),this._unmodified=vt,this._constraining=!1}},Jr.prototype._calcMatrices=function(){if(this.height){var W=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var G=Math.PI/2+this._pitch,te=this._fov*(.5+W.y/this.height),ve=Math.sin(te)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-G-te,.01,Math.PI-.01)),Ce=this.point,Be=Ce.x,qe=Ce.y,et=1.01*(Math.cos(Math.PI/2-this._pitch)*ve+this.cameraToCenterDistance),vt=this.height/50,xt=new Float64Array(16);l.perspective(xt,this._fov,this.width/this.height,vt,et),xt[8]=2*-W.x/this.width,xt[9]=2*W.y/this.height,l.scale(xt,xt,[1,-1,1]),l.translate(xt,xt,[0,0,-this.cameraToCenterDistance]),l.rotateX(xt,xt,this._pitch),l.rotateZ(xt,xt,this.angle),l.translate(xt,xt,[-Be,-qe,0]),this.mercatorMatrix=l.scale([],xt,[this.worldSize,this.worldSize,this.worldSize]),l.scale(xt,xt,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=xt,this.invProjMatrix=l.invert([],this.projMatrix);var ee=this.width%2/2,ce=this.height%2/2,Ae=Math.cos(this.angle),Oe=Math.sin(this.angle),Fe=Be-Math.round(Be)+Ae*ee+Oe*ce,Ue=qe-Math.round(qe)+Ae*ce+Oe*ee,Ge=new Float64Array(xt);if(l.translate(Ge,Ge,[Fe>.5?Fe-1:Fe,Ue>.5?Ue-1:Ue,0]),this.alignedProjMatrix=Ge,xt=l.create(),l.scale(xt,xt,[this.width/2,-this.height/2,1]),l.translate(xt,xt,[1,-1,0]),this.labelPlaneMatrix=xt,xt=l.create(),l.scale(xt,xt,[1,-1,1]),l.translate(xt,xt,[-1,-1,0]),l.scale(xt,xt,[2/this.width,2/this.height,1]),this.glCoordMatrix=xt,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(xt=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=xt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var F=this.pointCoordinate(new l.Point(0,0)),W=[F.x*this.worldSize,F.y*this.worldSize,0,1];return l.transformMat4(W,W,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jr.prototype.getCameraPoint=function(){var W=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,W))},Jr.prototype.getCameraQueryGeometry=function(F){var W=this.getCameraPoint();if(1===F.length)return[F[0],W];for(var G=W.x,te=W.y,ve=W.x,Ce=W.y,Be=0,qe=F;Be<qe.length;Be+=1){var et=qe[Be];G=Math.min(G,et.x),te=Math.min(te,et.y),ve=Math.max(ve,et.x),Ce=Math.max(Ce,et.y)}return[new l.Point(G,te),new l.Point(ve,te),new l.Point(ve,Ce),new l.Point(G,Ce),new l.Point(G,te)]},Object.defineProperties(Jr.prototype,$r);var uo=function(F){var W,te,ve,Ce;this._hashName=F&&encodeURIComponent(F),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(W=this._updateHashUnthrottled.bind(this),300,te=!1,ve=null,Ce=function(){ve=null,te&&(W(),ve=setTimeout(Ce,300),te=!1)},function(){return te=!0,ve||Ce(),ve})};uo.prototype.addTo=function(F){return this._map=F,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},uo.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},uo.prototype.getHashString=function(F){var W=this._map.getCenter(),G=Math.round(100*this._map.getZoom())/100,te=Math.ceil((G*Math.LN2+Math.log(512/360/.5))/Math.LN10),ve=Math.pow(10,te),Ce=Math.round(W.lng*ve)/ve,Be=Math.round(W.lat*ve)/ve,qe=this._map.getBearing(),et=this._map.getPitch(),vt="";if(vt+=F?"/"+Ce+"/"+Be+"/"+G:G+"/"+Be+"/"+Ce,(qe||et)&&(vt+="/"+Math.round(10*qe)/10),et&&(vt+="/"+Math.round(et)),this._hashName){var xt=this._hashName,ee=!1,ce=l.window.location.hash.slice(1).split("&").map(function(Ae){var Oe=Ae.split("=")[0];return Oe===xt?(ee=!0,Oe+"="+vt):Ae}).filter(function(Ae){return Ae});return ee||ce.push(xt+"="+vt),"#"+ce.join("&")}return"#"+vt},uo.prototype._getCurrentHash=function(){var F,W=this,G=l.window.location.hash.replace("#","");return this._hashName?(G.split("&").map(function(te){return te.split("=")}).forEach(function(te){te[0]===W._hashName&&(F=te)}),(F&&F[1]||"").split("/")):G.split("/")},uo.prototype._onHashChange=function(){var F=this._getCurrentHash();if(F.length>=3&&!F.some(function(G){return isNaN(G)})){var W=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(F[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+F[2],+F[1]],zoom:+F[0],bearing:W,pitch:+(F[4]||0)}),!0}return!1},uo.prototype._updateHashUnthrottled=function(){var F=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",F)}catch{}};var Ka={linearity:.3,easing:l.bezier(0,0,.3,1)},Ls=l.extend({deceleration:2500,maxSpeed:1400},Ka),Ks=l.extend({deceleration:20,maxSpeed:1400},Ka),No=l.extend({deceleration:1e3,maxSpeed:360},Ka),$s=l.extend({deceleration:1e3,maxSpeed:90},Ka),jo=function(F){this._map=F,this.clear()};function co(F,W){(!F.duration||F.duration<W.duration)&&(F.duration=W.duration,F.easing=W.easing)}function Uo(F,W,G){var te=G.maxSpeed,ve=G.linearity,Ce=G.deceleration,Be=l.clamp(F*ve/(W/1e3),-te,te),qe=Math.abs(Be)/(Ce*ve);return{easing:G.easing,duration:1e3*qe,amount:Be*(qe/2)}}jo.prototype.clear=function(){this._inertiaBuffer=[]},jo.prototype.record=function(F){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:F})},jo.prototype._drainInertiaBuffer=function(){for(var F=this._inertiaBuffer,W=l.browser.now();F.length>0&&W-F[0].time>160;)F.shift()},jo.prototype._onMoveEnd=function(F){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var W={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},G=0,te=this._inertiaBuffer;G<te.length;G+=1){var ve=te[G].settings;W.zoom+=ve.zoomDelta||0,W.bearing+=ve.bearingDelta||0,W.pitch+=ve.pitchDelta||0,ve.panDelta&&W.pan._add(ve.panDelta),ve.around&&(W.around=ve.around),ve.pinchAround&&(W.pinchAround=ve.pinchAround)}var Ce=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Be={};if(W.pan.mag()){var qe=Uo(W.pan.mag(),Ce,l.extend({},Ls,F||{}));Be.offset=W.pan.mult(qe.amount/W.pan.mag()),Be.center=this._map.transform.center,co(Be,qe)}if(W.zoom){var et=Uo(W.zoom,Ce,Ks);Be.zoom=this._map.transform.zoom+et.amount,co(Be,et)}if(W.bearing){var vt=Uo(W.bearing,Ce,No);Be.bearing=this._map.transform.bearing+l.clamp(vt.amount,-179,179),co(Be,vt)}if(W.pitch){var xt=Uo(W.pitch,Ce,$s);Be.pitch=this._map.transform.pitch+xt.amount,co(Be,xt)}if(Be.zoom||Be.bearing){var ee=void 0===W.pinchAround?W.around:W.pinchAround;Be.around=ee?this._map.unproject(ee):this._map.getCenter()}return this.clear(),l.extend(Be,{noMoveStart:!0})}};var bi=function(F){function W(te,ve,Ce,Be){void 0===Be&&(Be={});var qe=x.mousePos(ve.getCanvasContainer(),Ce),et=ve.unproject(qe);F.call(this,te,l.extend({point:qe,lngLat:et,originalEvent:Ce},Be)),this._defaultPrevented=!1,this.target=ve}F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(l.Event),$a=function(F){function W(te,ve,Ce){var Be="touchend"===te?Ce.changedTouches:Ce.touches,qe=x.touchPos(ve.getCanvasContainer(),Be),et=qe.map(function(ee){return ve.unproject(ee)}),vt=qe.reduce(function(ee,ce,Ae,Oe){return ee.add(ce.div(Oe.length))},new l.Point(0,0)),xt=ve.unproject(vt);F.call(this,te,{points:qe,point:vt,lngLats:et,lngLat:xt,originalEvent:Ce}),this._defaultPrevented=!1}F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(l.Event),Vo=function(F){function W(te,ve,Ce){F.call(this,te,{originalEvent:Ce}),this._defaultPrevented=!1}F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W;var G={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,G),W}(l.Event),Ri=function(F,W){this._map=F,this._clickTolerance=W.clickTolerance};Ri.prototype.reset=function(){delete this._mousedownPos},Ri.prototype.wheel=function(F){return this._firePreventable(new Vo(F.type,this._map,F))},Ri.prototype.mousedown=function(F,W){return this._mousedownPos=W,this._firePreventable(new bi(F.type,this._map,F))},Ri.prototype.mouseup=function(F){this._map.fire(new bi(F.type,this._map,F))},Ri.prototype.click=function(F,W){this._mousedownPos&&this._mousedownPos.dist(W)>=this._clickTolerance||this._map.fire(new bi(F.type,this._map,F))},Ri.prototype.dblclick=function(F){return this._firePreventable(new bi(F.type,this._map,F))},Ri.prototype.mouseover=function(F){this._map.fire(new bi(F.type,this._map,F))},Ri.prototype.mouseout=function(F){this._map.fire(new bi(F.type,this._map,F))},Ri.prototype.touchstart=function(F){return this._firePreventable(new $a(F.type,this._map,F))},Ri.prototype.touchmove=function(F){this._map.fire(new $a(F.type,this._map,F))},Ri.prototype.touchend=function(F){this._map.fire(new $a(F.type,this._map,F))},Ri.prototype.touchcancel=function(F){this._map.fire(new $a(F.type,this._map,F))},Ri.prototype._firePreventable=function(F){if(this._map.fire(F),F.defaultPrevented)return{}},Ri.prototype.isEnabled=function(){return!0},Ri.prototype.isActive=function(){return!1},Ri.prototype.enable=function(){},Ri.prototype.disable=function(){};var Xi=function(F){this._map=F};Xi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Xi.prototype.mousemove=function(F){this._map.fire(new bi(F.type,this._map,F))},Xi.prototype.mousedown=function(){this._delayContextMenu=!0},Xi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new bi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Xi.prototype.contextmenu=function(F){this._delayContextMenu?this._contextMenuEvent=F:this._map.fire(new bi(F.type,this._map,F)),this._map.listens("contextmenu")&&F.preventDefault()},Xi.prototype.isEnabled=function(){return!0},Xi.prototype.isActive=function(){return!1},Xi.prototype.enable=function(){},Xi.prototype.disable=function(){};var Ji=function(F,W){this._map=F,this._el=F.getCanvasContainer(),this._container=F.getContainer(),this._clickTolerance=W.clickTolerance||1};function Zi(F,W){for(var G={},te=0;te<F.length;te++)G[F[te].identifier]=W[te];return G}Ji.prototype.isEnabled=function(){return!!this._enabled},Ji.prototype.isActive=function(){return!!this._active},Ji.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ji.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ji.prototype.mousedown=function(F,W){this.isEnabled()&&F.shiftKey&&0===F.button&&(x.disableDrag(),this._startPos=this._lastPos=W,this._active=!0)},Ji.prototype.mousemoveWindow=function(F,W){if(this._active){var G=W;if(!(this._lastPos.equals(G)||!this._box&&G.dist(this._startPos)<this._clickTolerance)){var te=this._startPos;this._lastPos=G,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",F));var ve=Math.min(te.x,G.x),Ce=Math.max(te.x,G.x),Be=Math.min(te.y,G.y),qe=Math.max(te.y,G.y);x.setTransform(this._box,"translate("+ve+"px,"+Be+"px)"),this._box.style.width=Ce-ve+"px",this._box.style.height=qe-Be+"px"}}},Ji.prototype.mouseupWindow=function(F,W){var G=this;if(this._active&&0===F.button){var te=this._startPos,ve=W;if(this.reset(),x.suppressClick(),te.x!==ve.x||te.y!==ve.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:F})),{cameraAnimation:function(Ce){return Ce.fitScreenCoordinates(te,ve,G._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",F)}},Ji.prototype.keydown=function(F){this._active&&27===F.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",F))},Ji.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},Ji.prototype._fireEvent=function(F,W){return this._map.fire(new l.Event(F,{originalEvent:W}))};var ca=function(F){this.reset(),this.numTouches=F.numTouches};ca.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ca.prototype.touchstart=function(F,W,G){(this.centroid||G.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=F.timeStamp),G.length===this.numTouches&&(this.centroid=function(te){for(var ve=new l.Point(0,0),Ce=0,Be=te;Ce<Be.length;Ce+=1)ve._add(Be[Ce]);return ve.div(te.length)}(W),this.touches=Zi(G,W)))},ca.prototype.touchmove=function(F,W,G){if(!this.aborted&&this.centroid){var te=Zi(G,W);for(var ve in this.touches){var Be=te[ve];(!Be||Be.dist(this.touches[ve])>30)&&(this.aborted=!0)}}},ca.prototype.touchend=function(F,W,G){if((!this.centroid||F.timeStamp-this.startTime>500)&&(this.aborted=!0),0===G.length){var te=!this.aborted&&this.centroid;if(this.reset(),te)return te}};var Ao=function(F){this.singleTap=new ca(F),this.numTaps=F.numTaps,this.reset()};Ao.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ao.prototype.touchstart=function(F,W,G){this.singleTap.touchstart(F,W,G)},Ao.prototype.touchmove=function(F,W,G){this.singleTap.touchmove(F,W,G)},Ao.prototype.touchend=function(F,W,G){var te=this.singleTap.touchend(F,W,G);if(te){var ve=F.timeStamp-this.lastTime<500,Ce=!this.lastTap||this.lastTap.dist(te)<30;if(ve&&Ce||this.reset(),this.count++,this.lastTime=F.timeStamp,this.lastTap=te,this.count===this.numTaps)return this.reset(),te}};var Ra=function(){this._zoomIn=new Ao({numTouches:1,numTaps:2}),this._zoomOut=new Ao({numTouches:2,numTaps:1}),this.reset()};Ra.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ra.prototype.touchstart=function(F,W,G){this._zoomIn.touchstart(F,W,G),this._zoomOut.touchstart(F,W,G)},Ra.prototype.touchmove=function(F,W,G){this._zoomIn.touchmove(F,W,G),this._zoomOut.touchmove(F,W,G)},Ra.prototype.touchend=function(F,W,G){var te=this,ve=this._zoomIn.touchend(F,W,G),Ce=this._zoomOut.touchend(F,W,G);return ve?(this._active=!0,F.preventDefault(),setTimeout(function(){return te.reset()},0),{cameraAnimation:function(Be){return Be.easeTo({duration:300,zoom:Be.getZoom()+1,around:Be.unproject(ve)},{originalEvent:F})}}):Ce?(this._active=!0,F.preventDefault(),setTimeout(function(){return te.reset()},0),{cameraAnimation:function(Be){return Be.easeTo({duration:300,zoom:Be.getZoom()-1,around:Be.unproject(Ce)},{originalEvent:F})}}):void 0},Ra.prototype.touchcancel=function(){this.reset()},Ra.prototype.enable=function(){this._enabled=!0},Ra.prototype.disable=function(){this._enabled=!1,this.reset()},Ra.prototype.isEnabled=function(){return this._enabled},Ra.prototype.isActive=function(){return this._active};var Bi=function(F){this.reset(),this._clickTolerance=F.clickTolerance||1};Bi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Bi.prototype._correctButton=function(F,W){return!1},Bi.prototype._move=function(F,W){return{}},Bi.prototype.mousedown=function(F,W){if(!this._lastPoint){var G=x.mouseButton(F);this._correctButton(F,G)&&(this._lastPoint=W,this._eventButton=G)}},Bi.prototype.mousemoveWindow=function(F,W){var G=this._lastPoint;if(G&&(F.preventDefault(),this._moved||!(W.dist(G)<this._clickTolerance)))return this._moved=!0,this._lastPoint=W,this._move(G,W)},Bi.prototype.mouseupWindow=function(F){x.mouseButton(F)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},Bi.prototype.enable=function(){this._enabled=!0},Bi.prototype.disable=function(){this._enabled=!1,this.reset()},Bi.prototype.isEnabled=function(){return this._enabled},Bi.prototype.isActive=function(){return this._active};var _a=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.mousedown=function(G,te){F.prototype.mousedown.call(this,G,te),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(G,te){return 0===te&&!G.ctrlKey},W.prototype._move=function(G,te){return{around:te,panDelta:te.sub(G)}},W}(Bi),Cs=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype._correctButton=function(G,te){return 0===te&&G.ctrlKey||2===te},W.prototype._move=function(G,te){var ve=.8*(te.x-G.x);if(ve)return this._active=!0,{bearingDelta:ve}},W.prototype.contextmenu=function(G){G.preventDefault()},W}(Bi),Ps=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype._correctButton=function(G,te){return 0===te&&G.ctrlKey||2===te},W.prototype._move=function(G,te){var ve=-.5*(te.y-G.y);if(ve)return this._active=!0,{pitchDelta:ve}},W.prototype.contextmenu=function(G){G.preventDefault()},W}(Bi),oa=function(F){this._minTouches=1,this._clickTolerance=F.clickTolerance||1,this.reset()};oa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},oa.prototype.touchstart=function(F,W,G){return this._calculateTransform(F,W,G)},oa.prototype.touchmove=function(F,W,G){if(this._active)return F.preventDefault(),this._calculateTransform(F,W,G)},oa.prototype.touchend=function(F,W,G){this._calculateTransform(F,W,G),this._active&&G.length<this._minTouches&&this.reset()},oa.prototype.touchcancel=function(){this.reset()},oa.prototype._calculateTransform=function(F,W,G){G.length>0&&(this._active=!0);var te=Zi(G,W),ve=new l.Point(0,0),Ce=new l.Point(0,0),Be=0;for(var qe in te){var et=te[qe],vt=this._touches[qe];vt&&(ve._add(et),Ce._add(et.sub(vt)),Be++,te[qe]=et)}if(this._touches=te,!(Be<this._minTouches)&&Ce.mag()){var xt=Ce.div(Be);if(this._sum._add(xt),!(this._sum.mag()<this._clickTolerance))return{around:ve.div(Be),panDelta:xt}}},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active};var wr=function(){this.reset()};function Ho(F,W,G){for(var te=0;te<F.length;te++)if(F[te].identifier===G)return W[te]}function fa(F,W){return Math.log(F/W)/Math.LN2}wr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},wr.prototype._start=function(F){},wr.prototype._move=function(F,W,G){return{}},wr.prototype.touchstart=function(F,W,G){this._firstTwoTouches||G.length<2||(this._firstTwoTouches=[G[0].identifier,G[1].identifier],this._start([W[0],W[1]]))},wr.prototype.touchmove=function(F,W,G){if(this._firstTwoTouches){F.preventDefault();var te=this._firstTwoTouches,Ce=te[1],Be=Ho(G,W,te[0]),qe=Ho(G,W,Ce);if(Be&&qe){var et=this._aroundCenter?null:Be.add(qe).div(2);return this._move([Be,qe],et,F)}}},wr.prototype.touchend=function(F,W,G){if(this._firstTwoTouches){var te=this._firstTwoTouches,Ce=te[1],Be=Ho(G,W,te[0]),qe=Ho(G,W,Ce);Be&&qe||(this._active&&x.suppressClick(),this.reset())}},wr.prototype.touchcancel=function(){this.reset()},wr.prototype.enable=function(F){this._enabled=!0,this._aroundCenter=!!F&&"center"===F.around},wr.prototype.disable=function(){this._enabled=!1,this.reset()},wr.prototype.isEnabled=function(){return this._enabled},wr.prototype.isActive=function(){return this._active};var Os=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.reset=function(){F.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(G){this._startDistance=this._distance=G[0].dist(G[1])},W.prototype._move=function(G,te){var ve=this._distance;if(this._distance=G[0].dist(G[1]),this._active||!(Math.abs(fa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fa(this._distance,ve),pinchAround:te}},W}(wr);function es(F,W){return 180*F.angleWith(W)/Math.PI}var ts=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.reset=function(){F.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(G){this._startVector=this._vector=G[0].sub(G[1]),this._minDiameter=G[0].dist(G[1])},W.prototype._move=function(G,te){var ve=this._vector;if(this._vector=G[0].sub(G[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:es(this._vector,ve),pinchAround:te}},W.prototype._isBelowThreshold=function(G){this._minDiameter=Math.min(this._minDiameter,G.mag());var te=25/(Math.PI*this._minDiameter)*360,ve=es(G,this._startVector);return Math.abs(ve)<te},W}(wr);function ns(F){return Math.abs(F.y)>Math.abs(F.x)}var Ar=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.reset=function(){F.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(G){this._lastPoints=G,ns(G[0].sub(G[1]))&&(this._valid=!1)},W.prototype._move=function(G,te,ve){var Ce=G[0].sub(this._lastPoints[0]),Be=G[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ce,Be,ve.timeStamp),this._valid)return this._lastPoints=G,this._active=!0,{pitchDelta:(Ce.y+Be.y)/2*-.5}},W.prototype.gestureBeginsVertically=function(G,te,ve){if(void 0!==this._valid)return this._valid;var Ce=G.mag()>=2,Be=te.mag()>=2;if(Ce||Be){if(!Ce||!Be)return void 0===this._firstMove&&(this._firstMove=ve),ve-this._firstMove<100&&void 0;var qe=G.y>0==te.y>0;return ns(G)&&ns(te)&&qe}},W}(wr),rs={panStep:100,bearingStep:15,pitchStep:10},Da=function(){var F=rs;this._panStep=F.panStep,this._bearingStep=F.bearingStep,this._pitchStep=F.pitchStep};function Is(F){return F*(2-F)}Da.prototype.reset=function(){this._active=!1},Da.prototype.keydown=function(F){var W=this;if(!(F.altKey||F.ctrlKey||F.metaKey)){var G=0,te=0,ve=0,Ce=0,Be=0;switch(F.keyCode){case 61:case 107:case 171:case 187:G=1;break;case 189:case 109:case 173:G=-1;break;case 37:F.shiftKey?te=-1:(F.preventDefault(),Ce=-1);break;case 39:F.shiftKey?te=1:(F.preventDefault(),Ce=1);break;case 38:F.shiftKey?ve=1:(F.preventDefault(),Be=-1);break;case 40:F.shiftKey?ve=-1:(F.preventDefault(),Be=1);break;default:return}return{cameraAnimation:function(qe){var et=qe.getZoom();qe.easeTo({duration:300,easeId:"keyboardHandler",easing:Is,zoom:G?Math.round(et)+G*(F.shiftKey?2:1):et,bearing:qe.getBearing()+te*W._bearingStep,pitch:qe.getPitch()+ve*W._pitchStep,offset:[-Ce*W._panStep,-Be*W._panStep],center:qe.getCenter()},{originalEvent:F})}}}},Da.prototype.enable=function(){this._enabled=!0},Da.prototype.disable=function(){this._enabled=!1,this.reset()},Da.prototype.isEnabled=function(){return this._enabled},Da.prototype.isActive=function(){return this._active};var xs=4.000244140625,Ki=function(F,W){this._map=F,this._el=F.getCanvasContainer(),this._handler=W,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ki.prototype.setZoomRate=function(F){this._defaultZoomRate=F},Ki.prototype.setWheelZoomRate=function(F){this._wheelZoomRate=F},Ki.prototype.isEnabled=function(){return!!this._enabled},Ki.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Ki.prototype.isZooming=function(){return!!this._zooming},Ki.prototype.enable=function(F){this.isEnabled()||(this._enabled=!0,this._aroundCenter=F&&"center"===F.around)},Ki.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ki.prototype.wheel=function(F){if(this.isEnabled()){var W=F.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*F.deltaY:F.deltaY,G=l.browser.now(),te=G-(this._lastWheelEventTime||0);this._lastWheelEventTime=G,0!==W&&W%xs==0?this._type="wheel":0!==W&&Math.abs(W)<4?this._type="trackpad":te>400?(this._type=null,this._lastValue=W,this._timeout=setTimeout(this._onTimeout,40,F)):this._type||(this._type=Math.abs(te*W)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,W+=this._lastValue)),F.shiftKey&&W&&(W/=4),this._type&&(this._lastWheelEvent=F,this._delta-=W,this._active||this._start(F)),F.preventDefault()}},Ki.prototype._onTimeout=function(F){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(F)},Ki.prototype._start=function(F){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var W=x.mousePos(this._el,F);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(W)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ki.prototype.renderFrame=function(){return this._onScrollFrame()},Ki.prototype._onScrollFrame=function(){var F=this;if(this._frameId&&(this._frameId=null,this.isActive())){var W=this._map.transform;if(0!==this._delta){var G="wheel"===this._type&&Math.abs(this._delta)>xs?this._wheelZoomRate:this._defaultZoomRate,te=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&0!==te&&(te=1/te);var ve="number"==typeof this._targetZoom?W.zoomScale(this._targetZoom):W.scale;this._targetZoom=Math.min(W.maxZoom,Math.max(W.minZoom,W.scaleZoom(ve*te))),"wheel"===this._type&&(this._startZoom=W.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ce,Be="number"==typeof this._targetZoom?this._targetZoom:W.zoom,qe=this._startZoom,et=this._easing,vt=!1;if("wheel"===this._type&&qe&&et){var xt=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),ee=et(xt);Ce=l.number(qe,Be,ee),xt<1?this._frameId||(this._frameId=!0):vt=!0}else Ce=Be,vt=!0;return this._active=!0,vt&&(this._active=!1,this._finishTimeout=setTimeout(function(){F._zooming=!1,F._handler._triggerRenderFrame(),delete F._targetZoom,delete F._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!vt,zoomDelta:Ce-W.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ki.prototype._smoothOutEasing=function(F){var W=l.ease;if(this._prevEase){var G=this._prevEase,te=(l.browser.now()-G.start)/G.duration,ve=G.easing(te+.01)-G.easing(te),Ce=.27/Math.sqrt(ve*ve+1e-4)*.01,Be=Math.sqrt(.0729-Ce*Ce);W=l.bezier(Ce,Be,.25,1)}return this._prevEase={start:l.browser.now(),duration:F,easing:W},W},Ki.prototype.reset=function(){this._active=!1};var qo=function(F,W){this._clickZoom=F,this._tapZoom=W};qo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},qo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},qo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},qo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var fo=function(){this.reset()};fo.prototype.reset=function(){this._active=!1},fo.prototype.dblclick=function(F,W){return F.preventDefault(),{cameraAnimation:function(G){G.easeTo({duration:300,zoom:G.getZoom()+(F.shiftKey?-1:1),around:G.unproject(W)},{originalEvent:F})}}},fo.prototype.enable=function(){this._enabled=!0},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active};var wa=function(){this._tap=new Ao({numTouches:1,numTaps:1}),this.reset()};wa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},wa.prototype.touchstart=function(F,W,G){this._swipePoint||(this._tapTime&&F.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?G.length>0&&(this._swipePoint=W[0],this._swipeTouch=G[0].identifier):this._tap.touchstart(F,W,G))},wa.prototype.touchmove=function(F,W,G){if(this._tapTime){if(this._swipePoint){if(G[0].identifier!==this._swipeTouch)return;var te=W[0],ve=te.y-this._swipePoint.y;return this._swipePoint=te,F.preventDefault(),this._active=!0,{zoomDelta:ve/128}}}else this._tap.touchmove(F,W,G)},wa.prototype.touchend=function(F,W,G){this._tapTime?this._swipePoint&&0===G.length&&this.reset():this._tap.touchend(F,W,G)&&(this._tapTime=F.timeStamp)},wa.prototype.touchcancel=function(){this.reset()},wa.prototype.enable=function(){this._enabled=!0},wa.prototype.disable=function(){this._enabled=!1,this.reset()},wa.prototype.isEnabled=function(){return this._enabled},wa.prototype.isActive=function(){return this._active};var Mo=function(F,W,G){this._el=F,this._mousePan=W,this._touchPan=G};Mo.prototype.enable=function(F){this._inertiaOptions=F||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Mo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Mo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Mo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var qa=function(F,W,G){this._pitchWithRotate=F.pitchWithRotate,this._mouseRotate=W,this._mousePitch=G};qa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},qa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},qa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},qa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Fa=function(F,W,G,te){this._el=F,this._touchZoom=W,this._touchRotate=G,this._tapDragZoom=te,this._rotationDisabled=!1,this._enabled=!0};Fa.prototype.enable=function(F){this._touchZoom.enable(F),this._rotationDisabled||this._touchRotate.enable(F),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Fa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Fa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Fa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Fa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Fa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Go=function(F){return F.zoom||F.drag||F.pitch||F.rotate},$i=function(F){function W(){F.apply(this,arguments)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W}(l.Event);function Ba(F){return F.panDelta&&F.panDelta.mag()||F.zoomDelta||F.bearingDelta||F.pitchDelta}var ai=function(F,W){this._map=F,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jo(F),this._bearingSnap=W.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(W),l.bindAll(["handleEvent","handleWindowEvent"],this);var G=this._el;this._listeners=[[G,"touchstart",{passive:!1}],[G,"touchmove",{passive:!1}],[G,"touchend",void 0],[G,"touchcancel",void 0],[G,"mousedown",void 0],[G,"mousemove",void 0],[G,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[G,"mouseover",void 0],[G,"mouseout",void 0],[G,"dblclick",void 0],[G,"click",void 0],[G,"keydown",{capture:!1}],[G,"keyup",void 0],[G,"wheel",{passive:!1}],[G,"contextmenu",void 0],[l.window,"blur",void 0]];for(var te=0,ve=this._listeners;te<ve.length;te+=1){var Ce=ve[te],Be=Ce[0];x.addEventListener(Be,Ce[1],Be===l.window.document?this.handleWindowEvent:this.handleEvent,Ce[2])}};ai.prototype.destroy=function(){for(var F=0,W=this._listeners;F<W.length;F+=1){var G=W[F],te=G[0];x.removeEventListener(te,G[1],te===l.window.document?this.handleWindowEvent:this.handleEvent,G[2])}},ai.prototype._addDefaultHandlers=function(F){var W=this._map,G=W.getCanvasContainer();this._add("mapEvent",new Ri(W,F));var te=W.boxZoom=new Ji(W,F);this._add("boxZoom",te);var ve=new Ra,Ce=new fo;W.doubleClickZoom=new qo(Ce,ve),this._add("tapZoom",ve),this._add("clickZoom",Ce);var Be=new wa;this._add("tapDragZoom",Be);var qe=W.touchPitch=new Ar;this._add("touchPitch",qe);var et=new Cs(F),vt=new Ps(F);W.dragRotate=new qa(F,et,vt),this._add("mouseRotate",et,["mousePitch"]),this._add("mousePitch",vt,["mouseRotate"]);var xt=new _a(F),ee=new oa(F);W.dragPan=new Mo(G,xt,ee),this._add("mousePan",xt),this._add("touchPan",ee,["touchZoom","touchRotate"]);var ce=new ts,Ae=new Os;W.touchZoomRotate=new Fa(G,Ae,ce,Be),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]);var Oe=W.scrollZoom=new Ki(W,this);this._add("scrollZoom",Oe,["mousePan"]);var Fe=W.keyboard=new Da;this._add("keyboard",Fe),this._add("blockableMapEvent",new Xi(W));for(var Ue=0,Ge=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ue<Ge.length;Ue+=1){var Xe=Ge[Ue];F.interactive&&F[Xe]&&W[Xe].enable(F[Xe])}},ai.prototype._add=function(F,W,G){this._handlers.push({handlerName:F,handler:W,allowed:G}),this._handlersById[F]=W},ai.prototype.stop=function(){if(!this._updatingCamera){for(var F=0,W=this._handlers;F<W.length;F+=1)W[F].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ai.prototype.isActive=function(){for(var F=0,W=this._handlers;F<W.length;F+=1)if(W[F].handler.isActive())return!0;return!1},ai.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ai.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ai.prototype.isMoving=function(){return Boolean(Go(this._eventsInProgress))||this.isZooming()},ai.prototype._blockedByActive=function(F,W,G){for(var te in F)if(te!==G&&(!W||W.indexOf(te)<0))return!0;return!1},ai.prototype.handleWindowEvent=function(F){this.handleEvent(F,F.type+"Window")},ai.prototype._getMapTouches=function(F){for(var W=[],G=0,te=F;G<te.length;G+=1){var ve=te[G];this._el.contains(ve.target)&&W.push(ve)}return W},ai.prototype.handleEvent=function(F,W){if("blur"!==F.type){this._updatingCamera=!0;for(var G="renderFrame"===F.type?void 0:F,te={needsRenderFrame:!1},ve={},Ce={},Be=F.touches?this._getMapTouches(F.touches):void 0,qe=Be?x.touchPos(this._el,Be):x.mousePos(this._el,F),et=0,vt=this._handlers;et<vt.length;et+=1){var xt=vt[et],ee=xt.handlerName,ce=xt.handler,Ae=xt.allowed;if(ce.isEnabled()){var Oe=void 0;this._blockedByActive(Ce,Ae,ee)?ce.reset():ce[W||F.type]&&(Oe=ce[W||F.type](F,qe,Be),this.mergeHandlerResult(te,ve,Oe,ee,G),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||ce.isActive())&&(Ce[ee]=ce)}}var Fe={};for(var Ue in this._previousActiveHandlers)Ce[Ue]||(Fe[Ue]=G);this._previousActiveHandlers=Ce,(Object.keys(Fe).length||Ba(te))&&(this._changes.push([te,ve,Fe]),this._triggerRenderFrame()),(Object.keys(Ce).length||Ba(te))&&this._map._stop(!0),this._updatingCamera=!1;var Ge=te.cameraAnimation;Ge&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ge(this._map))}else this.stop()},ai.prototype.mergeHandlerResult=function(F,W,G,te,ve){if(G){l.extend(F,G);var Ce={handlerName:te,originalEvent:G.originalEvent||ve};void 0!==G.zoomDelta&&(W.zoom=Ce),void 0!==G.panDelta&&(W.drag=Ce),void 0!==G.pitchDelta&&(W.pitch=Ce),void 0!==G.bearingDelta&&(W.rotate=Ce)}},ai.prototype._applyChanges=function(){for(var F={},W={},G={},te=0,ve=this._changes;te<ve.length;te+=1){var Ce=ve[te],Be=Ce[0],qe=Ce[1],et=Ce[2];Be.panDelta&&(F.panDelta=(F.panDelta||new l.Point(0,0))._add(Be.panDelta)),Be.zoomDelta&&(F.zoomDelta=(F.zoomDelta||0)+Be.zoomDelta),Be.bearingDelta&&(F.bearingDelta=(F.bearingDelta||0)+Be.bearingDelta),Be.pitchDelta&&(F.pitchDelta=(F.pitchDelta||0)+Be.pitchDelta),void 0!==Be.around&&(F.around=Be.around),void 0!==Be.pinchAround&&(F.pinchAround=Be.pinchAround),Be.noInertia&&(F.noInertia=Be.noInertia),l.extend(W,qe),l.extend(G,et)}this._updateMapTransform(F,W,G),this._changes=[]},ai.prototype._updateMapTransform=function(F,W,G){var te=this._map,ve=te.transform;if(!Ba(F))return this._fireEvents(W,G);var Ce=F.panDelta,Be=F.zoomDelta,qe=F.bearingDelta,et=F.pitchDelta,vt=F.around,xt=F.pinchAround;void 0!==xt&&(vt=xt),te._stop(!0),vt=vt||te.transform.centerPoint;var ee=ve.pointLocation(Ce?vt.sub(Ce):vt);qe&&(ve.bearing+=qe),et&&(ve.pitch+=et),Be&&(ve.zoom+=Be),ve.setLocationAtPoint(ee,vt),this._map._update(),F.noInertia||this._inertia.record(F),this._fireEvents(W,G)},ai.prototype._fireEvents=function(F,W){var G=this,te=Go(this._eventsInProgress),ve=Go(F),Ce={};for(var Be in F)this._eventsInProgress[Be]||(Ce[Be+"start"]=F[Be].originalEvent),this._eventsInProgress[Be]=F[Be];for(var et in!te&&ve&&this._fireEvent("movestart",ve.originalEvent),Ce)this._fireEvent(et,Ce[et]);for(var vt in F.rotate&&(this._bearingChanged=!0),ve&&this._fireEvent("move",ve.originalEvent),F)this._fireEvent(vt,F[vt].originalEvent);var ee,ce={};for(var Ae in this._eventsInProgress){var Oe=this._eventsInProgress[Ae],Fe=Oe.handlerName,Ue=Oe.originalEvent;this._handlersById[Fe].isActive()||(delete this._eventsInProgress[Ae],ce[Ae+"end"]=ee=W[Fe]||Ue)}for(var Ge in ce)this._fireEvent(Ge,ce[Ge]);var Xe=Go(this._eventsInProgress);if((te||ve)&&!Xe){this._updatingCamera=!0;var rt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ut=function(Ct){return 0!==Ct&&-G._bearingSnap<Ct&&Ct<G._bearingSnap};rt?(ut(rt.bearing||this._map.getBearing())&&(rt.bearing=0),this._map.easeTo(rt,{originalEvent:ee})):(this._map.fire(new l.Event("moveend",{originalEvent:ee})),ut(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ai.prototype._fireEvent=function(F,W){this._map.fire(new l.Event(F,W?{originalEvent:W}:{}))},ai.prototype._triggerRenderFrame=function(){var F=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(W){delete F._frameId,F.handleEvent(new $i("renderFrame",{timeStamp:W})),F._applyChanges()}))};var bs=function(F){function W(G,te){F.call(this),this._moving=!1,this._zooming=!1,this.transform=G,this._bearingSnap=te.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(G,te){return this.jumpTo({center:G},te)},W.prototype.panBy=function(G,te,ve){return G=l.Point.convert(G).mult(-1),this.panTo(this.transform.center,l.extend({offset:G},te),ve)},W.prototype.panTo=function(G,te,ve){return this.easeTo(l.extend({center:G},te),ve)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(G,te){return this.jumpTo({zoom:G},te),this},W.prototype.zoomTo=function(G,te,ve){return this.easeTo(l.extend({zoom:G},te),ve)},W.prototype.zoomIn=function(G,te){return this.zoomTo(this.getZoom()+1,G,te),this},W.prototype.zoomOut=function(G,te){return this.zoomTo(this.getZoom()-1,G,te),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(G,te){return this.jumpTo({bearing:G},te),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(G,te){return this.jumpTo({padding:G},te),this},W.prototype.rotateTo=function(G,te,ve){return this.easeTo(l.extend({bearing:G},te),ve)},W.prototype.resetNorth=function(G,te){return this.rotateTo(0,l.extend({duration:1e3},G),te),this},W.prototype.resetNorthPitch=function(G,te){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},G),te),this},W.prototype.snapToNorth=function(G,te){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(G,te):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(G,te){return this.jumpTo({pitch:G},te),this},W.prototype.cameraForBounds=function(G,te){return G=l.LngLatBounds.convert(G),this._cameraForBoxAndBearing(G.getNorthWest(),G.getSouthEast(),0,te)},W.prototype._cameraForBoxAndBearing=function(G,te,ve,Ce){var Be={top:0,bottom:0,right:0,left:0};if("number"==typeof(Ce=l.extend({padding:Be,offset:[0,0],maxZoom:this.transform.maxZoom},Ce)).padding){var qe=Ce.padding;Ce.padding={top:qe,bottom:qe,right:qe,left:qe}}Ce.padding=l.extend(Be,Ce.padding);var et=this.transform,vt=et.padding,xt=et.project(l.LngLat.convert(G)),ee=et.project(l.LngLat.convert(te)),ce=xt.rotate(-ve*Math.PI/180),Ae=ee.rotate(-ve*Math.PI/180),Oe=new l.Point(Math.max(ce.x,Ae.x),Math.max(ce.y,Ae.y)),Fe=new l.Point(Math.min(ce.x,Ae.x),Math.min(ce.y,Ae.y)),Ue=Oe.sub(Fe),Ge=(et.width-(vt.left+vt.right+Ce.padding.left+Ce.padding.right))/Ue.x,Xe=(et.height-(vt.top+vt.bottom+Ce.padding.top+Ce.padding.bottom))/Ue.y;if(!(Xe<0||Ge<0)){var rt=Math.min(et.scaleZoom(et.scale*Math.min(Ge,Xe)),Ce.maxZoom),ut=l.Point.convert(Ce.offset),Ft=new l.Point(ut.x+(Ce.padding.left-Ce.padding.right)/2,ut.y+(Ce.padding.top-Ce.padding.bottom)/2).mult(et.scale/et.zoomScale(rt));return{center:et.unproject(xt.add(ee).div(2).sub(Ft)),zoom:rt,bearing:ve}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},W.prototype.fitBounds=function(G,te,ve){return this._fitInternal(this.cameraForBounds(G,te),te,ve)},W.prototype.fitScreenCoordinates=function(G,te,ve,Ce,Be){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(G)),this.transform.pointLocation(l.Point.convert(te)),ve,Ce),Ce,Be)},W.prototype._fitInternal=function(G,te,ve){return G?(delete(te=l.extend(G,te)).padding,te.linear?this.easeTo(te,ve):this.flyTo(te,ve)):this},W.prototype.jumpTo=function(G,te){this.stop();var ve=this.transform,Ce=!1,Be=!1,qe=!1;return"zoom"in G&&ve.zoom!==+G.zoom&&(Ce=!0,ve.zoom=+G.zoom),void 0!==G.center&&(ve.center=l.LngLat.convert(G.center)),"bearing"in G&&ve.bearing!==+G.bearing&&(Be=!0,ve.bearing=+G.bearing),"pitch"in G&&ve.pitch!==+G.pitch&&(qe=!0,ve.pitch=+G.pitch),null==G.padding||ve.isPaddingEqual(G.padding)||(ve.padding=G.padding),this.fire(new l.Event("movestart",te)).fire(new l.Event("move",te)),Ce&&this.fire(new l.Event("zoomstart",te)).fire(new l.Event("zoom",te)).fire(new l.Event("zoomend",te)),Be&&this.fire(new l.Event("rotatestart",te)).fire(new l.Event("rotate",te)).fire(new l.Event("rotateend",te)),qe&&this.fire(new l.Event("pitchstart",te)).fire(new l.Event("pitch",te)).fire(new l.Event("pitchend",te)),this.fire(new l.Event("moveend",te))},W.prototype.easeTo=function(G,te){var ve=this;this._stop(!1,G.easeId),(!1===(G=l.extend({offset:[0,0],duration:500,easing:l.ease},G)).animate||!G.essential&&l.browser.prefersReducedMotion)&&(G.duration=0);var Ce=this.transform,Be=this.getZoom(),qe=this.getBearing(),et=this.getPitch(),vt=this.getPadding(),xt="zoom"in G?+G.zoom:Be,ee="bearing"in G?this._normalizeBearing(G.bearing,qe):qe,ce="pitch"in G?+G.pitch:et,Ae="padding"in G?G.padding:Ce.padding,Oe=l.Point.convert(G.offset),Fe=Ce.centerPoint.add(Oe),Ue=Ce.pointLocation(Fe),Ge=l.LngLat.convert(G.center||Ue);this._normalizeCenter(Ge);var Xe,rt,ut=Ce.project(Ue),Ct=Ce.project(Ge).sub(ut),Rt=Ce.zoomScale(xt-Be);G.around&&(Xe=l.LngLat.convert(G.around),rt=Ce.locationPoint(Xe));var Ft={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||xt!==Be,this._rotating=this._rotating||qe!==ee,this._pitching=this._pitching||ce!==et,this._padding=!Ce.isPaddingEqual(Ae),this._easeId=G.easeId,this._prepareEase(te,G.noMoveStart,Ft),clearTimeout(this._easeEndTimeoutID),this._ease(function(Yt){if(ve._zooming&&(Ce.zoom=l.number(Be,xt,Yt)),ve._rotating&&(Ce.bearing=l.number(qe,ee,Yt)),ve._pitching&&(Ce.pitch=l.number(et,ce,Yt)),ve._padding&&(Ce.interpolatePadding(vt,Ae,Yt),Fe=Ce.centerPoint.add(Oe)),Xe)Ce.setLocationAtPoint(Xe,rt);else{var cn=Ce.zoomScale(Ce.zoom-Be),Wt=xt>Be?Math.min(2,Rt):Math.max(.5,Rt),tn=Math.pow(Wt,1-Yt),$t=Ce.unproject(ut.add(Ct.mult(Yt*tn)).mult(cn));Ce.setLocationAtPoint(Ce.renderWorldCopies?$t.wrap():$t,Fe)}ve._fireMoveEvents(te)},function(Yt){ve._afterEase(te,Yt)},G),this},W.prototype._prepareEase=function(G,te,ve){void 0===ve&&(ve={}),this._moving=!0,te||ve.moving||this.fire(new l.Event("movestart",G)),this._zooming&&!ve.zooming&&this.fire(new l.Event("zoomstart",G)),this._rotating&&!ve.rotating&&this.fire(new l.Event("rotatestart",G)),this._pitching&&!ve.pitching&&this.fire(new l.Event("pitchstart",G))},W.prototype._fireMoveEvents=function(G){this.fire(new l.Event("move",G)),this._zooming&&this.fire(new l.Event("zoom",G)),this._rotating&&this.fire(new l.Event("rotate",G)),this._pitching&&this.fire(new l.Event("pitch",G))},W.prototype._afterEase=function(G,te){if(!this._easeId||!te||this._easeId!==te){delete this._easeId;var ve=this._zooming,Ce=this._rotating,Be=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ve&&this.fire(new l.Event("zoomend",G)),Ce&&this.fire(new l.Event("rotateend",G)),Be&&this.fire(new l.Event("pitchend",G)),this.fire(new l.Event("moveend",G))}},W.prototype.flyTo=function(G,te){var ve=this;if(!G.essential&&l.browser.prefersReducedMotion){var Ce=l.pick(G,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ce,te)}this.stop(),G=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},G);var Be=this.transform,qe=this.getZoom(),et=this.getBearing(),vt=this.getPitch(),xt=this.getPadding(),ee="zoom"in G?l.clamp(+G.zoom,Be.minZoom,Be.maxZoom):qe,ce="bearing"in G?this._normalizeBearing(G.bearing,et):et,Ae="pitch"in G?+G.pitch:vt,Oe="padding"in G?G.padding:Be.padding,Fe=Be.zoomScale(ee-qe),Ue=l.Point.convert(G.offset),Ge=Be.centerPoint.add(Ue),Xe=Be.pointLocation(Ge),rt=l.LngLat.convert(G.center||Xe);this._normalizeCenter(rt);var ut=Be.project(Xe),Ct=Be.project(rt).sub(ut),Rt=G.curve,Ft=Math.max(Be.width,Be.height),Yt=Ft/Fe,cn=Ct.mag();if("minZoom"in G){var Wt=l.clamp(Math.min(G.minZoom,qe,ee),Be.minZoom,Be.maxZoom),tn=Ft/Be.zoomScale(Wt-qe);Rt=Math.sqrt(tn/cn*2)}var $t=Rt*Rt;function _n(fr){var gr=(Yt*Yt-Ft*Ft+(fr?-1:1)*$t*$t*cn*cn)/(2*(fr?Yt:Ft)*$t*cn);return Math.log(Math.sqrt(gr*gr+1)-gr)}function dn(fr){return(Math.exp(fr)-Math.exp(-fr))/2}function Qt(fr){return(Math.exp(fr)+Math.exp(-fr))/2}var Cn=_n(0),Dn=function(fr){return Qt(Cn)/Qt(Cn+Rt*fr)},Jn=function(fr){return Ft*((Qt(Cn)*(dn(gr=Cn+Rt*fr)/Qt(gr))-dn(Cn))/$t)/cn;var gr},Kn=(_n(1)-Cn)/Rt;if(Math.abs(cn)<1e-6||!isFinite(Kn)){if(Math.abs(Ft-Yt)<1e-6)return this.easeTo(G,te);var vr=Yt<Ft?-1:1;Kn=Math.abs(Math.log(Yt/Ft))/Rt,Jn=function(){return 0},Dn=function(fr){return Math.exp(vr*Rt*fr)}}return G.duration="duration"in G?+G.duration:1e3*Kn/("screenSpeed"in G?+G.screenSpeed/Rt:+G.speed),G.maxDuration&&G.duration>G.maxDuration&&(G.duration=0),this._zooming=!0,this._rotating=et!==ce,this._pitching=Ae!==vt,this._padding=!Be.isPaddingEqual(Oe),this._prepareEase(te,!1),this._ease(function(fr){var gr=fr*Kn,Sr=1/Dn(gr);Be.zoom=1===fr?ee:qe+Be.scaleZoom(Sr),ve._rotating&&(Be.bearing=l.number(et,ce,fr)),ve._pitching&&(Be.pitch=l.number(vt,Ae,fr)),ve._padding&&(Be.interpolatePadding(xt,Oe,fr),Ge=Be.centerPoint.add(Ue));var Vr=1===fr?rt:Be.unproject(ut.add(Ct.mult(Jn(gr))).mult(Sr));Be.setLocationAtPoint(Be.renderWorldCopies?Vr.wrap():Vr,Ge),ve._fireMoveEvents(te)},function(){return ve._afterEase(te)},G),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(G,te){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ve=this._onEaseEnd;delete this._onEaseEnd,ve.call(this,te)}if(!G){var Ce=this.handlers;Ce&&Ce.stop()}return this},W.prototype._ease=function(G,te,ve){!1===ve.animate||0===ve.duration?(G(1),te()):(this._easeStart=l.browser.now(),this._easeOptions=ve,this._onEaseFrame=G,this._onEaseEnd=te,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var G=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(G)),G<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(G,te){G=l.wrap(G,-180,180);var ve=Math.abs(G-te);return Math.abs(G-360-te)<ve&&(G-=360),Math.abs(G+360-te)<ve&&(G+=360),G},W.prototype._normalizeCenter=function(G){var te=this.transform;if(te.renderWorldCopies&&!te.lngRange){var ve=G.lng-te.center.lng;G.lng+=ve>180?-360:ve<-180?360:0}},W}(l.Evented),La=function(F){void 0===F&&(F={}),this.options=F,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};La.prototype.getDefaultPosition=function(){return"bottom-right"},La.prototype.onAdd=function(F){var W=this.options&&this.options.compact;return this._map=F,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),W&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===W&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},La.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},La.prototype._updateEditLink=function(){var F=this._editLink;F||(F=this._editLink=this._container.querySelector(".mapbox-improve-map"));var W=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(F){var G=W.reduce(function(te,ve,Ce){return ve.value&&(te+=ve.key+"="+ve.value+(Ce<W.length-1?"&":"")),te},"?");F.href=l.config.FEEDBACK_URL+"/"+G+(this._map._hash?this._map._hash.getHashString(!0):""),F.rel="noopener nofollow"}},La.prototype._updateData=function(F){!F||"metadata"!==F.sourceDataType&&"style"!==F.dataType||(this._updateAttributions(),this._updateEditLink())},La.prototype._updateAttributions=function(){if(this._map.style){var F=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?F=F.concat(this.options.customAttribution.map(function(qe){return"string"!=typeof qe?"":qe})):"string"==typeof this.options.customAttribution&&F.push(this.options.customAttribution)),this._map.style.stylesheet){var W=this._map.style.stylesheet;this.styleOwner=W.owner,this.styleId=W.id}var G=this._map.style.sourceCaches;for(var te in G){var ve=G[te];if(ve.used){var Ce=ve.getSource();Ce.attribution&&F.indexOf(Ce.attribution)<0&&F.push(Ce.attribution)}}F.sort(function(qe,et){return qe.length-et.length});var Be=(F=F.filter(function(qe,et){for(var vt=et+1;vt<F.length;vt++)if(F[vt].indexOf(qe)>=0)return!1;return!0})).join(" | ");Be!==this._attribHTML&&(this._attribHTML=Be,F.length?(this._innerContainer.innerHTML=Be,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},La.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Na=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Na.prototype.onAdd=function(F){this._map=F,this._container=x.create("div","mapboxgl-ctrl");var W=x.create("a","mapboxgl-ctrl-logo");return W.target="_blank",W.rel="noopener nofollow",W.href="https://www.mapbox.com/",W.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),W.setAttribute("rel","noopener nofollow"),this._container.appendChild(W),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Na.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Na.prototype.getDefaultPosition=function(){return"bottom-left"},Na.prototype._updateLogo=function(F){F&&"metadata"!==F.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Na.prototype._logoRequired=function(){if(this._map.style){var F=this._map.style.sourceCaches;for(var W in F)if(F[W].getSource().mapbox_logo)return!0;return!1}},Na.prototype._updateCompact=function(){var F=this._container.children;if(F.length){var W=F[0];this._map.getCanvasContainer().offsetWidth<250?W.classList.add("mapboxgl-compact"):W.classList.remove("mapboxgl-compact")}};var Qa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Qa.prototype.add=function(F){var W=++this._id;return this._queue.push({callback:F,id:W,cancelled:!1}),W},Qa.prototype.remove=function(F){for(var W=this._currentlyRunning,G=0,te=W?this._queue.concat(W):this._queue;G<te.length;G+=1){var ve=te[G];if(ve.id===F)return void(ve.cancelled=!0)}},Qa.prototype.run=function(F){void 0===F&&(F=0);var W=this._currentlyRunning=this._queue;this._queue=[];for(var G=0,te=W;G<te.length;G+=1){var ve=te[G];if(!ve.cancelled&&(ve.callback(F),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Qa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ha={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ii=l.window.HTMLImageElement,Hi=l.window.HTMLElement,Ga=l.window.ImageBitmap,eo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},So=function(F){function W(te){var ve=this;if(null!=(te=l.extend({},eo,te)).minZoom&&null!=te.maxZoom&&te.minZoom>te.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=te.minPitch&&null!=te.maxPitch&&te.minPitch>te.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=te.minPitch&&te.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=te.maxPitch&&te.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Ce=new Jr(te.minZoom,te.maxZoom,te.minPitch,te.maxPitch,te.renderWorldCopies);if(F.call(this,Ce,te),this._interactive=te.interactive,this._maxTileCacheSize=te.maxTileCacheSize,this._failIfMajorPerformanceCaveat=te.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=te.preserveDrawingBuffer,this._antialias=te.antialias,this._trackResize=te.trackResize,this._bearingSnap=te.bearingSnap,this._refreshExpiredTiles=te.refreshExpiredTiles,this._fadeDuration=te.fadeDuration,this._crossSourceCollisions=te.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=te.collectResourceTiming,this._renderTaskQueue=new Qa,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},ha,te.locale),this._requestManager=new l.RequestManager(te.transformRequest,te.accessToken),"string"==typeof te.container){if(this._container=l.window.document.getElementById(te.container),!this._container)throw new Error("Container '"+te.container+"' not found.")}else{if(!(te.container instanceof Hi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=te.container}if(te.maxBounds&&this.setMaxBounds(te.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ve._update(!1)}),this.on("moveend",function(){return ve._update(!1)}),this.on("zoom",function(){return ve._update(!0)}),void 0!==l.window&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ai(this,te),this._hash=te.hash&&new uo("string"==typeof te.hash&&te.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:te.center,zoom:te.zoom,bearing:te.bearing,pitch:te.pitch}),te.bounds&&(this.resize(),this.fitBounds(te.bounds,l.extend({},te.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=te.localIdeographFontFamily,te.style&&this.setStyle(te.style,{localIdeographFontFamily:te.localIdeographFontFamily}),te.attributionControl&&this.addControl(new La({customAttribution:te.customAttribution})),this.addControl(new Na,te.logoPosition),this.on("style.load",function(){ve.transform.unmodified&&ve.jumpTo(ve.style.stylesheet)}),this.on("data",function(qe){ve._update("style"===qe.dataType),ve.fire(new l.Event(qe.dataType+"data",qe))}),this.on("dataloading",function(qe){ve.fire(new l.Event(qe.dataType+"dataloading",qe))})}F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W;var G={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(te,ve){if(void 0===ve&&te.getDefaultPosition&&(ve=te.getDefaultPosition()),void 0===ve&&(ve="top-right"),!te||!te.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=te.onAdd(this);this._controls.push(te);var Be=this._controlPositions[ve];return-1!==ve.indexOf("bottom")?Be.insertBefore(Ce,Be.firstChild):Be.appendChild(Ce),this},W.prototype.removeControl=function(te){if(!te||!te.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ve=this._controls.indexOf(te);return ve>-1&&this._controls.splice(ve,1),te.onRemove(this),this},W.prototype.resize=function(te){var ve=this._containerDimensions(),Ce=ve[0],Be=ve[1];this._resizeCanvas(Ce,Be),this.transform.resize(Ce,Be),this.painter.resize(Ce,Be);var qe=!this._moving;return qe&&(this.stop(),this.fire(new l.Event("movestart",te)).fire(new l.Event("move",te))),this.fire(new l.Event("resize",te)),qe&&this.fire(new l.Event("moveend",te)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(te){return this.transform.setMaxBounds(l.LngLatBounds.convert(te)),this._update()},W.prototype.setMinZoom=function(te){if((te=te??-2)>=-2&&te<=this.transform.maxZoom)return this.transform.minZoom=te,this._update(),this.getZoom()<te&&this.setZoom(te),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(te){if((te=te??22)>=this.transform.minZoom)return this.transform.maxZoom=te,this._update(),this.getZoom()>te&&this.setZoom(te),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(te){if((te=te??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(te>=0&&te<=this.transform.maxPitch)return this.transform.minPitch=te,this._update(),this.getPitch()<te&&this.setPitch(te),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(te){if((te=te??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(te>=this.transform.minPitch)return this.transform.maxPitch=te,this._update(),this.getPitch()>te&&this.setPitch(te),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(te){return this.transform.renderWorldCopies=te,this._update()},W.prototype.project=function(te){return this.transform.locationPoint(l.LngLat.convert(te))},W.prototype.unproject=function(te){return this.transform.pointLocation(l.Point.convert(te))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(te,ve,Ce){var Be,qe=this;if("mouseenter"===te||"mouseover"===te){var et=!1;return{layer:ve,listener:Ce,delegates:{mousemove:function(xt){var ee=qe.getLayer(ve)?qe.queryRenderedFeatures(xt.point,{layers:[ve]}):[];ee.length?et||(et=!0,Ce.call(qe,new bi(te,qe,xt.originalEvent,{features:ee}))):et=!1},mouseout:function(){et=!1}}}}if("mouseleave"===te||"mouseout"===te){var vt=!1;return{layer:ve,listener:Ce,delegates:{mousemove:function(xt){(qe.getLayer(ve)?qe.queryRenderedFeatures(xt.point,{layers:[ve]}):[]).length?vt=!0:vt&&(vt=!1,Ce.call(qe,new bi(te,qe,xt.originalEvent)))},mouseout:function(xt){vt&&(vt=!1,Ce.call(qe,new bi(te,qe,xt.originalEvent)))}}}}return{layer:ve,listener:Ce,delegates:(Be={},Be[te]=function(xt){var ee=qe.getLayer(ve)?qe.queryRenderedFeatures(xt.point,{layers:[ve]}):[];ee.length&&(xt.features=ee,Ce.call(qe,xt),delete xt.features)},Be)}},W.prototype.on=function(te,ve,Ce){if(void 0===Ce)return F.prototype.on.call(this,te,ve);var Be=this._createDelegatedListener(te,ve,Ce);for(var qe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[te]=this._delegatedListeners[te]||[],this._delegatedListeners[te].push(Be),Be.delegates)this.on(qe,Be.delegates[qe]);return this},W.prototype.once=function(te,ve,Ce){if(void 0===Ce)return F.prototype.once.call(this,te,ve);var Be=this._createDelegatedListener(te,ve,Ce);for(var qe in Be.delegates)this.once(qe,Be.delegates[qe]);return this},W.prototype.off=function(te,ve,Ce){var Be=this;return void 0===Ce?F.prototype.off.call(this,te,ve):(this._delegatedListeners&&this._delegatedListeners[te]&&function(qe){for(var et=qe[te],vt=0;vt<et.length;vt++){var xt=et[vt];if(xt.layer===ve&&xt.listener===Ce){for(var ee in xt.delegates)Be.off(ee,xt.delegates[ee]);return et.splice(vt,1),Be}}}(this._delegatedListeners),this)},W.prototype.queryRenderedFeatures=function(te,ve){if(!this.style)return[];var Ce;if(void 0!==ve||void 0===te||te instanceof l.Point||Array.isArray(te)||(ve=te,te=void 0),ve=ve||{},(te=te||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||"number"==typeof te[0])Ce=[l.Point.convert(te)];else{var Be=l.Point.convert(te[0]),qe=l.Point.convert(te[1]);Ce=[Be,new l.Point(qe.x,Be.y),qe,new l.Point(Be.x,qe.y),Be]}return this.style.queryRenderedFeatures(Ce,ve,this.transform)},W.prototype.querySourceFeatures=function(te,ve){return this.style.querySourceFeatures(te,ve)},W.prototype.setStyle=function(te,ve){return!1!==(ve=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ve)).diff&&ve.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&te?(this._diffStyle(te,ve),this):(this._localIdeographFontFamily=ve.localIdeographFontFamily,this._updateStyle(te,ve))},W.prototype._getUIString=function(te){var ve=this._locale[te];if(null==ve)throw new Error("Missing UI string '"+te+"'");return ve},W.prototype._updateStyle=function(te,ve){return this.style&&(this.style.setEventedParent(null),this.style._remove()),te?(this.style=new ir(this,ve||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof te?this.style.loadURL(te):this.style.loadJSON(te),this):(delete this.style,this)},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ir(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(te,ve){var Ce=this;if("string"==typeof te){var Be=this._requestManager.normalizeStyleURL(te),qe=this._requestManager.transformRequest(Be,l.ResourceType.Style);l.getJSON(qe,function(et,vt){et?Ce.fire(new l.ErrorEvent(et)):vt&&Ce._updateDiff(vt,ve)})}else"object"==typeof te&&this._updateDiff(te,ve)},W.prototype._updateDiff=function(te,ve){try{this.style.setState(te)&&this._update(!0)}catch(Ce){l.warnOnce("Unable to perform style diff: "+(Ce.message||Ce.error||Ce)+".  Rebuilding the style from scratch."),this._updateStyle(te,ve)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(te,ve){return this._lazyInitEmptyStyle(),this.style.addSource(te,ve),this._update(!0)},W.prototype.isSourceLoaded=function(te){var ve=this.style&&this.style.sourceCaches[te];if(void 0!==ve)return ve.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+te+"'")))},W.prototype.areTilesLoaded=function(){var te=this.style&&this.style.sourceCaches;for(var ve in te){var Ce=te[ve]._tiles;for(var Be in Ce){var qe=Ce[Be];if("loaded"!==qe.state&&"errored"!==qe.state)return!1}}return!0},W.prototype.addSourceType=function(te,ve,Ce){return this._lazyInitEmptyStyle(),this.style.addSourceType(te,ve,Ce)},W.prototype.removeSource=function(te){return this.style.removeSource(te),this._update(!0)},W.prototype.getSource=function(te){return this.style.getSource(te)},W.prototype.addImage=function(te,ve,Ce){void 0===Ce&&(Ce={});var Be=Ce.pixelRatio;void 0===Be&&(Be=1);var qe=Ce.sdf;void 0===qe&&(qe=!1);var et=Ce.stretchX,vt=Ce.stretchY,xt=Ce.content;if(this._lazyInitEmptyStyle(),ve instanceof ii||Ga&&ve instanceof Ga){var ee=l.browser.getImageData(ve);this.style.addImage(te,{data:new l.RGBAImage({width:ee.width,height:ee.height},ee.data),pixelRatio:Be,stretchX:et,stretchY:vt,content:xt,sdf:qe,version:0})}else{if(void 0===ve.width||void 0===ve.height)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Xe=ve;this.style.addImage(te,{data:new l.RGBAImage({width:ve.width,height:ve.height},new Uint8Array(ve.data)),pixelRatio:Be,stretchX:et,stretchY:vt,content:xt,sdf:qe,version:0,userImage:Xe}),Xe.onAdd&&Xe.onAdd(this,te)}},W.prototype.updateImage=function(te,ve){var Ce=this.style.getImage(te);if(!Ce)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Be=ve instanceof ii||Ga&&ve instanceof Ga?l.browser.getImageData(ve):ve,qe=Be.width,et=Be.height,vt=Be.data;return void 0===qe||void 0===et?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):qe!==Ce.data.width||et!==Ce.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Ce.data.replace(vt,!(ve instanceof ii||Ga&&ve instanceof Ga)),void this.style.updateImage(te,Ce))},W.prototype.hasImage=function(te){return te?!!this.style.getImage(te):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(te){this.style.removeImage(te)},W.prototype.loadImage=function(te,ve){l.getImage(this._requestManager.transformRequest(te,l.ResourceType.Image),ve)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(te,ve){return this._lazyInitEmptyStyle(),this.style.addLayer(te,ve),this._update(!0)},W.prototype.moveLayer=function(te,ve){return this.style.moveLayer(te,ve),this._update(!0)},W.prototype.removeLayer=function(te){return this.style.removeLayer(te),this._update(!0)},W.prototype.getLayer=function(te){return this.style.getLayer(te)},W.prototype.setLayerZoomRange=function(te,ve,Ce){return this.style.setLayerZoomRange(te,ve,Ce),this._update(!0)},W.prototype.setFilter=function(te,ve,Ce){return void 0===Ce&&(Ce={}),this.style.setFilter(te,ve,Ce),this._update(!0)},W.prototype.getFilter=function(te){return this.style.getFilter(te)},W.prototype.setPaintProperty=function(te,ve,Ce,Be){return void 0===Be&&(Be={}),this.style.setPaintProperty(te,ve,Ce,Be),this._update(!0)},W.prototype.getPaintProperty=function(te,ve){return this.style.getPaintProperty(te,ve)},W.prototype.setLayoutProperty=function(te,ve,Ce,Be){return void 0===Be&&(Be={}),this.style.setLayoutProperty(te,ve,Ce,Be),this._update(!0)},W.prototype.getLayoutProperty=function(te,ve){return this.style.getLayoutProperty(te,ve)},W.prototype.setLight=function(te,ve){return void 0===ve&&(ve={}),this._lazyInitEmptyStyle(),this.style.setLight(te,ve),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(te,ve){return this.style.setFeatureState(te,ve),this._update()},W.prototype.removeFeatureState=function(te,ve){return this.style.removeFeatureState(te,ve),this._update()},W.prototype.getFeatureState=function(te){return this.style.getFeatureState(te)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var te=0,ve=0;return this._container&&(te=this._container.clientWidth||400,ve=this._container.clientHeight||300),[te,ve]},W.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var te=this._container;te.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",te)).style.visibility="hidden",this._detectMissingCSS();var ve=this._canvasContainer=x.create("div","mapboxgl-canvas-container",te);this._interactive&&ve.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",ve),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ce=this._containerDimensions();this._resizeCanvas(Ce[0],Ce[1]);var Be=this._controlContainer=x.create("div","mapboxgl-control-container",te),qe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(et){qe[et]=x.create("div","mapboxgl-ctrl-"+et,Be)})},W.prototype._resizeCanvas=function(te,ve){var Ce=l.browser.devicePixelRatio||1;this._canvas.width=Ce*te,this._canvas.height=Ce*ve,this._canvas.style.width=te+"px",this._canvas.style.height=ve+"px"},W.prototype._setupPainter=function(){var te=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ve=this._canvas.getContext("webgl",te)||this._canvas.getContext("experimental-webgl",te);ve?(this.painter=new li(ve,this.transform),l.webpSupported.testSupport(ve)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},W.prototype._contextLost=function(te){te.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:te}))},W.prototype._contextRestored=function(te){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:te}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(te){return this.style?(this._styleDirty=this._styleDirty||te,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(te){return this._update(),this._renderTaskQueue.add(te)},W.prototype._cancelRenderFrame=function(te){this._renderTaskQueue.remove(te)},W.prototype._render=function(te){var ve,Ce=this,Be=0,qe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ve=qe.createQueryEXT(),qe.beginQueryEXT(qe.TIME_ELAPSED_EXT,ve),Be=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(te),!this._removed){var et=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var vt=this.transform.zoom,xt=l.browser.now();this.style.zoomHistory.update(vt,xt);var ee=new l.EvaluationParameters(vt,{now:xt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ce=ee.crossFadingFactor();1===ce&&ce===this._crossFadingFactor||(et=!0,this._crossFadingFactor=ce),this.style.update(ee)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||et)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ae=l.browser.now()-Be;qe.endQueryEXT(qe.TIME_ELAPSED_EXT,ve),setTimeout(function(){var Fe=qe.getQueryObjectEXT(ve,qe.QUERY_RESULT_EXT)/1e6;qe.deleteQueryEXT(ve),Ce.fire(new l.Event("gpu-timing-frame",{cpuTime:Ae,gpuTime:Fe}))},50)}if(this.listens("gpu-timing-layer")){var Oe=this.painter.collectGpuTimers();setTimeout(function(){var Fe=Ce.painter.queryGpuTimers(Oe);Ce.fire(new l.Event("gpu-timing-layer",{layerTimes:Fe}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var te=0,ve=this._controls;te<ve.length;te+=1)ve[te].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==l.window&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var Ce=this.painter.context.gl.getExtension("WEBGL_lose_context");Ce&&Ce.loseContext(),ho(this._canvasContainer),ho(this._controlContainer),ho(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},W.prototype.triggerRepaint=function(){var te=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(ve){te._frame=null,te._render(ve)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(te){this._trackResize&&this.resize({originalEvent:te})._update()},G.showTileBoundaries.get=function(){return!!this._showTileBoundaries},G.showTileBoundaries.set=function(te){this._showTileBoundaries!==te&&(this._showTileBoundaries=te,this._update())},G.showPadding.get=function(){return!!this._showPadding},G.showPadding.set=function(te){this._showPadding!==te&&(this._showPadding=te,this._update())},G.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},G.showCollisionBoxes.set=function(te){this._showCollisionBoxes!==te&&(this._showCollisionBoxes=te,te?this.style._generateCollisionBoxes():this._update())},G.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},G.showOverdrawInspector.set=function(te){this._showOverdrawInspector!==te&&(this._showOverdrawInspector=te,this._update())},G.repaint.get=function(){return!!this._repaint},G.repaint.set=function(te){this._repaint!==te&&(this._repaint=te,this.triggerRepaint())},G.vertices.get=function(){return!!this._vertices},G.vertices.set=function(te){this._vertices=te,this._update()},W.prototype._setCacheLimits=function(te,ve){l.setCacheLimits(te,ve)},G.version.get=function(){return l.version},Object.defineProperties(W.prototype,G),W}(bs);function ho(F){F.parentNode&&F.parentNode.removeChild(F)}var Qi={showCompass:!0,showZoom:!0,visualizePitch:!1},ja=function(F){var W=this;this.options=l.extend({},Qi,F),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(G){return G.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(G){return W._map.zoomIn({},{originalEvent:G})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(G){return W._map.zoomOut({},{originalEvent:G})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(G){W.options.visualizePitch?W._map.resetNorthPitch({},{originalEvent:G}):W._map.resetNorth({},{originalEvent:G})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ja.prototype._updateZoomButtons=function(){var F=this._map.getZoom();this._zoomInButton.disabled=F===this._map.getMaxZoom(),this._zoomOutButton.disabled=F===this._map.getMinZoom()},ja.prototype._rotateCompassArrow=function(){var F=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=F},ja.prototype.onAdd=function(F){return this._map=F,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Lr(this._map,this._compass,this.options.visualizePitch)),this._container},ja.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ja.prototype._createButton=function(F,W){var G=x.create("button",F,this._container);return G.type="button",G.addEventListener("click",W),G},ja.prototype._setButtonTitle=function(F,W){var G=this._map._getUIString("NavigationControl."+W);F.title=G,F.setAttribute("aria-label",G)};var Lr=function(F,W,G){void 0===G&&(G=!1),this._clickTolerance=10,this.element=W,this.mouseRotate=new Cs({clickTolerance:F.dragRotate._mouseRotate._clickTolerance}),this.map=F,G&&(this.mousePitch=new Ps({clickTolerance:F.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(W,"mousedown",this.mousedown),x.addEventListener(W,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(W,"touchmove",this.touchmove),x.addEventListener(W,"touchend",this.touchend),x.addEventListener(W,"touchcancel",this.reset)};function Ir(F,W,G){if(F=new l.LngLat(F.lng,F.lat),W){var te=new l.LngLat(F.lng-360,F.lat),ve=new l.LngLat(F.lng+360,F.lat),Ce=G.locationPoint(F).distSqr(W);G.locationPoint(te).distSqr(W)<Ce?F=te:G.locationPoint(ve).distSqr(W)<Ce&&(F=ve)}for(;Math.abs(F.lng-G.center.lng)>180;){var Be=G.locationPoint(F);if(Be.x>=0&&Be.y>=0&&Be.x<=G.width&&Be.y<=G.height)break;F.lng>G.center.lng?F.lng-=360:F.lng+=360}return F}Lr.prototype.down=function(F,W){this.mouseRotate.mousedown(F,W),this.mousePitch&&this.mousePitch.mousedown(F,W),x.disableDrag()},Lr.prototype.move=function(F,W){var G=this.map,te=this.mouseRotate.mousemoveWindow(F,W);if(te&&te.bearingDelta&&G.setBearing(G.getBearing()+te.bearingDelta),this.mousePitch){var ve=this.mousePitch.mousemoveWindow(F,W);ve&&ve.pitchDelta&&G.setPitch(G.getPitch()+ve.pitchDelta)}},Lr.prototype.off=function(){var F=this.element;x.removeEventListener(F,"mousedown",this.mousedown),x.removeEventListener(F,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(F,"touchmove",this.touchmove),x.removeEventListener(F,"touchend",this.touchend),x.removeEventListener(F,"touchcancel",this.reset),this.offTemp()},Lr.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(l.window,"mousemove",this.mousemove),x.removeEventListener(l.window,"mouseup",this.mouseup)},Lr.prototype.mousedown=function(F){this.down(l.extend({},F,{ctrlKey:!0,preventDefault:function(){return F.preventDefault()}}),x.mousePos(this.element,F)),x.addEventListener(l.window,"mousemove",this.mousemove),x.addEventListener(l.window,"mouseup",this.mouseup)},Lr.prototype.mousemove=function(F){this.move(F,x.mousePos(this.element,F))},Lr.prototype.mouseup=function(F){this.mouseRotate.mouseupWindow(F),this.mousePitch&&this.mousePitch.mouseupWindow(F),this.offTemp()},Lr.prototype.touchstart=function(F){1!==F.targetTouches.length?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,F.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return F.preventDefault()}},this._startPos))},Lr.prototype.touchmove=function(F){1!==F.targetTouches.length?this.reset():(this._lastPos=x.touchPos(this.element,F.targetTouches)[0],this.move({preventDefault:function(){return F.preventDefault()}},this._lastPos))},Lr.prototype.touchend=function(F){0===F.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Lr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var is={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function po(F,W,G){var te=F.classList;for(var ve in is)te.remove("mapboxgl-"+G+"-anchor-"+ve);te.add("mapboxgl-"+G+"-anchor-"+W)}var Za,ea=function(F){function W(G,te){var ve=this;if(F.call(this),(G instanceof l.window.HTMLElement||te)&&(G=l.extend({element:G},te)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=G&&G.anchor||"center",this._color=G&&G.color||"#3FB1CE",this._draggable=G&&G.draggable||!1,this._state="inactive",this._rotation=G&&G.rotation||0,this._rotationAlignment=G&&G.rotationAlignment||"auto",this._pitchAlignment=G&&G.pitchAlignment&&"auto"!==G.pitchAlignment?G.pitchAlignment:this._rotationAlignment,G&&G.element)this._element=G.element,this._offset=l.Point.convert(G&&G.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var Ce=x.createNS("http://www.w3.org/2000/svg","svg");Ce.setAttributeNS(null,"display","block"),Ce.setAttributeNS(null,"height","41px"),Ce.setAttributeNS(null,"width","27px"),Ce.setAttributeNS(null,"viewBox","0 0 27 41");var Be=x.createNS("http://www.w3.org/2000/svg","g");Be.setAttributeNS(null,"stroke","none"),Be.setAttributeNS(null,"stroke-width","1"),Be.setAttributeNS(null,"fill","none"),Be.setAttributeNS(null,"fill-rule","evenodd");var qe=x.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill-rule","nonzero");var et=x.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(3.0, 29.0)"),et.setAttributeNS(null,"fill","#000000");for(var vt=0,xt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];vt<xt.length;vt+=1){var ee=xt[vt],ce=x.createNS("http://www.w3.org/2000/svg","ellipse");ce.setAttributeNS(null,"opacity","0.04"),ce.setAttributeNS(null,"cx","10.5"),ce.setAttributeNS(null,"cy","5.80029008"),ce.setAttributeNS(null,"rx",ee.rx),ce.setAttributeNS(null,"ry",ee.ry),et.appendChild(ce)}var Ae=x.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"fill",this._color);var Oe=x.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ae.appendChild(Oe);var Fe=x.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"opacity","0.25"),Fe.setAttributeNS(null,"fill","#000000");var Ue=x.createNS("http://www.w3.org/2000/svg","path");Ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Fe.appendChild(Ue);var Ge=x.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ge.setAttributeNS(null,"fill","#FFFFFF");var Xe=x.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var rt=x.createNS("http://www.w3.org/2000/svg","circle");rt.setAttributeNS(null,"fill","#000000"),rt.setAttributeNS(null,"opacity","0.25"),rt.setAttributeNS(null,"cx","5.5"),rt.setAttributeNS(null,"cy","5.5"),rt.setAttributeNS(null,"r","5.4999962");var ut=x.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(rt),Xe.appendChild(ut),qe.appendChild(et),qe.appendChild(Ae),qe.appendChild(Fe),qe.appendChild(Ge),qe.appendChild(Xe),Ce.appendChild(qe),this._element.appendChild(Ce),this._offset=l.Point.convert(G&&G.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ct){Ct.preventDefault()}),this._element.addEventListener("mousedown",function(Ct){Ct.preventDefault()}),this._element.addEventListener("focus",function(){var Ct=ve._map.getContainer();Ct.scrollTop=0,Ct.scrollLeft=0}),po(this._element,this._anchor,"marker"),this._popup=null}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.addTo=function(G){return this.remove(),this._map=G,G.getCanvasContainer().appendChild(this._element),G.on("move",this._update),G.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(G){return this._lngLat=l.LngLat.convert(G),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(G){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),G){if(!("offset"in G.options)){var ve=Math.sqrt(Math.pow(13.5,2)/2);G.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ve,-1*(24.6+ve)],"bottom-right":[-ve,-1*(24.6+ve)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=G,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(G){var te=G.code,ve=G.charCode||G.keyCode;"Space"!==te&&"Enter"!==te&&32!==ve&&13!==ve||this.togglePopup()},W.prototype._onMapClick=function(G){var te=G.originalEvent.target,ve=this._element;this._popup&&(te===ve||ve.contains(te))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var G=this._popup;return G?(G.isOpen()?G.remove():G.addTo(this._map),this):this},W.prototype._update=function(G){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ir(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var te="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?te="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(te="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ve="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ve="rotateX(0deg)":"map"===this._pitchAlignment&&(ve="rotateX("+this._map.getPitch()+"deg)"),G&&"moveend"!==G.type||(this._pos=this._pos.round()),x.setTransform(this._element,is[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ve+" "+te)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(G){return this._offset=l.Point.convert(G),this._update(),this},W.prototype._onMove=function(G){this._pos=G.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new l.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(G){this._element.contains(G.originalEvent.target)&&(G.preventDefault(),this._positionDelta=G.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(G){return this._draggable=!!G,this._map&&(G?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(G){return this._rotation=G||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(G){return this._rotationAlignment=G||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(G){return this._pitchAlignment=G&&"auto"!==G?G:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(l.Evented),zs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},da=0,as=!1,go=function(F){function W(G){F.call(this),this.options=l.extend({},zs,G),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.onAdd=function(G){return this._map=G,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),te=this._setupUI,void 0!==Za?te(Za):void 0!==l.window.navigator.permissions?l.window.navigator.permissions.query({name:"geolocation"}).then(function(ve){te(Za="denied"!==ve.state)}):te(Za=!!l.window.navigator.geolocation),this._container;var te},W.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,da=0,as=!1},W.prototype._isOutOfMapMaxBounds=function(G){var te=this._map.getMaxBounds(),ve=G.coords;return te&&(ve.longitude<te.getWest()||ve.longitude>te.getEast()||ve.latitude<te.getSouth()||ve.latitude>te.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},W.prototype._onSuccess=function(G){if(this._map){if(this._isOutOfMapMaxBounds(G))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",G)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=G,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(G),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(G),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",G)),this._finish()}},W.prototype._updateCamera=function(G){var te=new l.LngLat(G.coords.longitude,G.coords.latitude),ve=G.coords.accuracy,Ce=this._map.getBearing(),Be=l.extend({bearing:Ce},this.options.fitBoundsOptions);this._map.fitBounds(te.toBounds(ve),Be,{geolocateSource:!0})},W.prototype._updateMarker=function(G){if(G){var te=new l.LngLat(G.coords.longitude,G.coords.latitude);this._accuracyCircleMarker.setLngLat(te).addTo(this._map),this._userLocationDotMarker.setLngLat(te).addTo(this._map),this._accuracy=G.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var G=this._map._container.clientHeight/2,te=this._map.unproject([0,G]),ve=this._map.unproject([1,G]),Ce=te.distanceTo(ve),Be=Math.ceil(2*this._accuracy/Ce);this._circleElement.style.width=Be+"px",this._circleElement.style.height=Be+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(G){if(this._map){if(this.options.trackUserLocation)if(1===G.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var te=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===G.code&&as)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",G)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(G){var te=this;if(this._container.addEventListener("contextmenu",function(Be){return Be.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===G){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ve=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ve,this._geolocateButton.setAttribute("aria-label",ve)}else{var Ce=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ea(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ea({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Be){Be.geolocateSource||"ACTIVE_LOCK"!==te._watchState||Be.originalEvent&&"resize"===Be.originalEvent.type||(te._watchState="BACKGROUND",te._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),te._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),te.fire(new l.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":da--,as=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var G;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++da>1?(G={maximumAge:6e5,timeout:0},as=!0):(G=this.options.positionOptions,as=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,G)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(l.Evented),ui={maxWidth:100,unit:"metric"},gi=function(F){this.options=l.extend({},ui,F),l.bindAll(["_onMove","setUnit"],this)};function Rs(F,W,G){var te=G&&G.maxWidth||100,ve=F._container.clientHeight/2,Ce=F.unproject([0,ve]),Be=F.unproject([te,ve]),qe=Ce.distanceTo(Be);if(G&&"imperial"===G.unit){var et=3.2808*qe;et>5280?We(W,te,et/5280,F._getUIString("ScaleControl.Miles")):We(W,te,et,F._getUIString("ScaleControl.Feet"))}else G&&"nautical"===G.unit?We(W,te,qe/1852,F._getUIString("ScaleControl.NauticalMiles")):qe>=1e3?We(W,te,qe/1e3,F._getUIString("ScaleControl.Kilometers")):We(W,te,qe,F._getUIString("ScaleControl.Meters"))}function We(F,W,G,te){var ve,Ce,Be,vt,xt,qe=(ve=G,(Ce=Math.pow(10,(""+Math.floor(ve)).length-1))*((Be=ve/Ce)>=10?10:Be>=5?5:Be>=3?3:Be>=2?2:Be>=1?1:(vt=Be,xt=Math.pow(10,Math.ceil(-Math.log(vt)/Math.LN10)),Math.round(vt*xt)/xt)));F.style.width=W*(qe/G)+"px",F.innerHTML=qe+"&nbsp;"+te}gi.prototype.getDefaultPosition=function(){return"bottom-left"},gi.prototype._onMove=function(){Rs(this._map,this._container,this.options)},gi.prototype.onAdd=function(F){return this._map=F,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",F.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},gi.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},gi.prototype.setUnit=function(F){this.options.unit=F,Rs(this._map,this._container,this.options)};var $e=function(F){this._fullscreen=!1,F&&F.container&&(F.container instanceof l.window.HTMLElement?this._container=F.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};$e.prototype.onAdd=function(F){return this._map=F,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$e.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},$e.prototype._setupUI=function(){var F=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",F).setAttribute("aria-hidden",!0),F.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$e.prototype._updateTitle=function(){var F=this._getTitle();this._fullscreenButton.setAttribute("aria-label",F),this._fullscreenButton.title=F},$e.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$e.prototype._isFullscreen=function(){return this._fullscreen},$e.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$e.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ot={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ft=function(F){function W(G){F.call(this),this.options=l.extend(Object.create(ot),G),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return F&&(W.__proto__=F),(W.prototype=Object.create(F&&F.prototype)).constructor=W,W.prototype.addTo=function(G){return this._map&&this.remove(),this._map=G,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(G){return this._lngLat=l.LngLat.convert(G),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(G){return this.setDOMContent(l.window.document.createTextNode(G))},W.prototype.setHTML=function(G){var te,ve=l.window.document.createDocumentFragment(),Ce=l.window.document.createElement("body");for(Ce.innerHTML=G;te=Ce.firstChild;)ve.appendChild(te);return this.setDOMContent(ve)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(G){return this.options.maxWidth=G,this._update(),this},W.prototype.setDOMContent=function(G){return this._createContent(),this._content.appendChild(G),this._update(),this},W.prototype.addClassName=function(G){this._container&&this._container.classList.add(G)},W.prototype.removeClassName=function(G){this._container&&this._container.classList.remove(G)},W.prototype.toggleClassName=function(G){if(this._container)return this._container.classList.toggle(G)},W.prototype._createContent=function(){this._content&&x.remove(this._content),this._content=x.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(G){this._update(G.point)},W.prototype._onMouseMove=function(G){this._update(G.point)},W.prototype._onDrag=function(G){this._update(G.point)},W.prototype._update=function(G){var te=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(ce){return te._container.classList.add(ce)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ir(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||G)){var Ce=this._pos=this._trackPointer&&G?G:this._map.project(this._lngLat),Be=this.options.anchor,qe=bt(this.options.offset);if(!Be){var et,vt=this._container.offsetWidth,xt=this._container.offsetHeight;et=Ce.y+qe.bottom.y<xt?["top"]:Ce.y>this._map.transform.height-xt?["bottom"]:[],Ce.x<vt/2?et.push("left"):Ce.x>this._map.transform.width-vt/2&&et.push("right"),Be=0===et.length?"bottom":et.join("-")}var ee=Ce.add(qe[Be]).round();x.setTransform(this._container,is[Be]+" translate("+ee.x+"px,"+ee.y+"px)"),po(this._container,Be,"popup")}},W.prototype._onClose=function(){this.remove()},W}(l.Evented);function bt(F){if(F){if("number"==typeof F){var W=Math.round(Math.sqrt(.5*Math.pow(F,2)));return{center:new l.Point(0,0),top:new l.Point(0,F),"top-left":new l.Point(W,W),"top-right":new l.Point(-W,W),bottom:new l.Point(0,-F),"bottom-left":new l.Point(W,-W),"bottom-right":new l.Point(-W,-W),left:new l.Point(F,0),right:new l.Point(-F,0)}}if(F instanceof l.Point||Array.isArray(F)){var G=l.Point.convert(F);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}return{center:l.Point.convert(F.center||[0,0]),top:l.Point.convert(F.top||[0,0]),"top-left":l.Point.convert(F["top-left"]||[0,0]),"top-right":l.Point.convert(F["top-right"]||[0,0]),bottom:l.Point.convert(F.bottom||[0,0]),"bottom-left":l.Point.convert(F["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(F["bottom-right"]||[0,0]),left:l.Point.convert(F.left||[0,0]),right:l.Point.convert(F.right||[0,0])}}return bt(new l.Point(0,0))}var yt={version:l.version,supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:So,NavigationControl:ja,GeolocateControl:go,AttributionControl:La,ScaleControl:gi,FullscreenControl:$e,Popup:ft,Marker:ea,Style:ir,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){At().acquire(it)},clearPrewarmedResources:function(){var F=mt;F&&(F.isPreloaded()&&1===F.numActive()?(F.release(it),mt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(F){l.config.ACCESS_TOKEN=F},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(F){l.config.API_URL=F},get workerCount(){return ct.workerCount},set workerCount(F){ct.workerCount=F},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(F){l.config.MAX_PARALLEL_IMAGE_REQUESTS=F},clearStorage:function(F){l.clearTileCache(F)},workerUrl:""};return yt}),M}()},27084:function($){"use strict";$.exports=Math.log2||function(I){return Math.log(I)*Math.LOG2E}},16825:function($,I,t){"use strict";$.exports=function(k,l){l||(l=k,k=window);var T=0,x=0,p=0,s={shift:!1,alt:!1,control:!1,meta:!1},e=!1;function o(g){var y=!1;return"altKey"in g&&(y=y||g.altKey!==s.alt,s.alt=!!g.altKey),"shiftKey"in g&&(y=y||g.shiftKey!==s.shift,s.shift=!!g.shiftKey),"ctrlKey"in g&&(y=y||g.ctrlKey!==s.control,s.control=!!g.ctrlKey),"metaKey"in g&&(y=y||g.metaKey!==s.meta,s.meta=!!g.metaKey),y}function r(g,y){var d=M.x(y),m=M.y(y);"buttons"in y&&(g=0|y.buttons),(g!==T||d!==x||m!==p||o(y))&&(T=0|g,x=d||0,p=m||0,l&&l(T,x,p,s))}function n(g){r(0,g)}function a(){(T||x||p||s.shift||s.alt||s.meta||s.control)&&(x=p=0,T=0,s.shift=s.alt=s.control=s.meta=!1,l&&l(0,0,0,s))}function i(g){o(g)&&l&&l(T,x,p,s)}function c(g){0===M.buttons(g)?r(0,g):r(T,g)}function h(g){r(T|M.buttons(g),g)}function f(g){r(T&~M.buttons(g),g)}function b(){e||(e=!0,k.addEventListener("mousemove",c),k.addEventListener("mousedown",h),k.addEventListener("mouseup",f),k.addEventListener("mouseleave",n),k.addEventListener("mouseenter",n),k.addEventListener("mouseout",n),k.addEventListener("mouseover",n),k.addEventListener("blur",a),k.addEventListener("keyup",i),k.addEventListener("keydown",i),k.addEventListener("keypress",i),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",i),window.addEventListener("keydown",i),window.addEventListener("keypress",i)))}b();var v={element:k};return Object.defineProperties(v,{enabled:{get:function(){return e},set:function(g){g?b():e&&(e=!1,k.removeEventListener("mousemove",c),k.removeEventListener("mousedown",h),k.removeEventListener("mouseup",f),k.removeEventListener("mouseleave",n),k.removeEventListener("mouseenter",n),k.removeEventListener("mouseout",n),k.removeEventListener("mouseover",n),k.removeEventListener("blur",a),k.removeEventListener("keyup",i),k.removeEventListener("keydown",i),k.removeEventListener("keypress",i),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",i),window.removeEventListener("keydown",i),window.removeEventListener("keypress",i)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return x},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),v};var M=t(74311)},48956:function($){var I={left:0,top:0};$.exports=function(t,M,k){M=M||t.currentTarget||t.srcElement,Array.isArray(k)||(k=[0,0]);var l,T=t.clientX||0,x=t.clientY||0,p=(l=M)===window||l===document||l===document.body?I:l.getBoundingClientRect();return k[0]=T-p.left,k[1]=x-p.top,k}},74311:function($,I){"use strict";function t(M){return M.target||M.srcElement||window}I.buttons=function(M){if("object"==typeof M){if("buttons"in M)return M.buttons;if("which"in M){if(2===(k=M.which))return 4;if(3===k)return 2;if(k>0)return 1<<k-1}else if("button"in M){var k;if(1===(k=M.button))return 4;if(2===k)return 2;if(k>=0)return 1<<k}}return 0},I.element=t,I.x=function(M){if("object"==typeof M){if("offsetX"in M)return M.offsetX;var k=t(M).getBoundingClientRect();return M.clientX-k.left}return 0},I.y=function(M){if("object"==typeof M){if("offsetY"in M)return M.offsetY;var k=t(M).getBoundingClientRect();return M.clientY-k.top}return 0}},1195:function($,I,t){"use strict";var M=t(75686);$.exports=function(k,l,T){"function"==typeof k&&(T=!!l,l=k,k=window);var x=M("ex",k),p=function(s){T&&s.preventDefault();var e=s.deltaX||0,o=s.deltaY||0,r=s.deltaZ||0,n=1;switch(s.deltaMode){case 1:n=x;break;case 2:n=window.innerHeight}if(o*=n,r*=n,(e*=n)||o||r)return l(e,o,r,s)};return k.addEventListener("wheel",p),p}},7417:function($,I,t){var M,k,l;(l=void 0!==t.g?t.g:this)[k="Promise"]=l[k]||function(){"use strict";var x,p,s,e=Object.prototype.toString,o=typeof setImmediate<"u"?function(d){return setImmediate(d)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(d,m,w,u){return Object.defineProperty(d,m,{value:w,writable:!0,configurable:!1!==u})}}catch{x=function(m,w,u){return m[w]=u,m}}function r(d,m){s.add(d,m),p||(p=o(s.drain))}function n(d){var m,w=typeof d;return null==d||"object"!=w&&"function"!=w||(m=d.then),"function"==typeof m&&m}function a(){for(var d=0;d<this.chain.length;d++)i(this,1===this.state?this.chain[d].success:this.chain[d].failure,this.chain[d]);this.chain.length=0}function i(d,m,w){var u,S;try{!1===m?w.reject(d.msg):(u=!0===m?d.msg:m.call(void 0,d.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(S=n(u))?S.call(u,w.resolve,w.reject):w.resolve(u)}catch(_){w.reject(_)}}function c(d){var m,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(m=n(d))?r(function(){var u=new b(w);try{m.call(d,function(){c.apply(u,arguments)},function(){h.apply(u,arguments)})}catch(S){h.call(u,S)}}):(w.msg=d,w.state=1,w.chain.length>0&&r(a,w))}catch(u){h.call(new b(w),u)}}}function h(d){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=d,m.state=2,m.chain.length>0&&r(a,m))}function f(d,m,w,u){for(var S=0;S<m.length;S++)!function(_){d.resolve(m[_]).then(function(E){w(_,E)},u)}(S)}function b(d){this.def=d,this.triggered=!1}function v(d){this.promise=d,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(d){if("function"!=typeof d)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var m=new v(this);this.then=function(w,u){var S={success:"function"!=typeof w||w,failure:"function"==typeof u&&u};return S.promise=new this.constructor(function(_,E){if("function"!=typeof _||"function"!=typeof E)throw TypeError("Not a function");S.resolve=_,S.reject=E}),m.chain.push(S),0!==m.state&&r(a,m),S.promise},this.catch=function(w){return this.then(void 0,w)};try{d.call(void 0,function(w){c.call(m,w)},function(w){h.call(m,w)})}catch(w){h.call(m,w)}}s=function(){var d,m,w;function u(S,_){this.fn=S,this.self=_,this.next=void 0}return{add:function(S,_){w=new u(S,_),m?m.next=w:d=w,m=w,w=void 0},drain:function(){var S=d;for(d=m=p=void 0;S;)S.fn.call(S.self),S=S.next}}}();var y=x({},"constructor",g,!1);return g.prototype=y,x(y,"__NPO__",0,!1),x(g,"resolve",function(d){return d&&"object"==typeof d&&1===d.__NPO__?d:new this(function(m,w){if("function"!=typeof m||"function"!=typeof w)throw TypeError("Not a function");m(d)})}),x(g,"reject",function(d){return new this(function(m,w){if("function"!=typeof m||"function"!=typeof w)throw TypeError("Not a function");w(d)})}),x(g,"all",function(d){var m=this;return"[object Array]"!=e.call(d)?m.reject(TypeError("Not an array")):0===d.length?m.resolve([]):new m(function(w,u){if("function"!=typeof w||"function"!=typeof u)throw TypeError("Not a function");var S=d.length,_=Array(S),E=0;f(m,d,function(L,C){_[L]=C,++E===S&&w(_)},u)})}),x(g,"race",function(d){var m=this;return"[object Array]"!=e.call(d)?m.reject(TypeError("Not an array")):new m(function(w,u){if("function"!=typeof w||"function"!=typeof u)throw TypeError("Not a function");f(m,d,function(S,_){w(_)},u)})}),g}(),$.exports?$.exports=l[k]:void 0===(M=function(){return l[k]}.call(I,t,I,$))||($.exports=M)},18625:function($){var I=Math.PI,t=x(120);function M(p,s,e,o){return["C",p,s,e,o,e,o]}function k(p,s,e,o,r,n){return["C",p/3+.6666666666666666*e,s/3+.6666666666666666*o,r/3+.6666666666666666*e,n/3+.6666666666666666*o,r,n]}function l(p,s,e,o,r,n,a,i,c,h){if(h)S=h[0],_=h[1],w=h[2],u=h[3];else{var f=T(p,s,-r);s=f.y;var b=((p=f.x)-(i=(f=T(i,c,-r)).x))/2,v=(s-(c=f.y))/2,g=b*b/(e*e)+v*v/(o*o);g>1&&(e*=g=Math.sqrt(g),o*=g);var y=e*e,d=o*o,m=(n==a?-1:1)*Math.sqrt(Math.abs((y*d-y*v*v-d*b*b)/(y*v*v+d*b*b)));m==1/0&&(m=1);var w=m*e*v/o+(p+i)/2,u=m*-o*b/e+(s+c)/2,S=Math.asin(((s-u)/o).toFixed(9)),_=Math.asin(((c-u)/o).toFixed(9));(S=p<w?I-S:S)<0&&(S=2*I+S),(_=i<w?I-_:_)<0&&(_=2*I+_),a&&S>_&&(S-=2*I),!a&&_>S&&(_-=2*I)}if(Math.abs(_-S)>t){var E=_,L=i,C=c;_=S+t*(a&&_>S?1:-1);var P=l(i=w+e*Math.cos(_),c=u+o*Math.sin(_),e,o,r,0,a,L,C,[_,E,w,u])}var z=Math.tan((_-S)/4),j=4/3*e*z,R=4/3*o*z,V=[2*p-(p+j*Math.sin(S)),2*s-(s-R*Math.cos(S)),i+j*Math.sin(_),c-R*Math.cos(_),i,c];if(h)return V;P&&(V=V.concat(P));for(var D=0;D<V.length;){var B=T(V[D],V[D+1],r);V[D++]=B.x,V[D++]=B.y}return V}function T(p,s,e){return{x:p*Math.cos(e)-s*Math.sin(e),y:p*Math.sin(e)+s*Math.cos(e)}}function x(p){return p*(I/180)}$.exports=function(p){for(var s,e=[],o=0,r=0,n=0,a=0,i=null,c=null,h=0,f=0,b=0,v=p.length;b<v;b++){var g=p[b],y=g[0];switch(y){case"M":n=g[1],a=g[2];break;case"A":(g=l(h,f,g[1],g[2],x(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(e.push(g.splice(0,7)),g.unshift("C"));break;case"S":var d=h,m=f;"C"!=s&&"S"!=s||(d+=d-o,m+=m-r),g=["C",d,m,g[1],g[2],g[3],g[4]];break;case"T":"Q"==s||"T"==s?(i=2*h-i,c=2*f-c):(i=h,c=f),g=k(h,f,i,c,g[1],g[2]);break;case"Q":i=g[1],c=g[2],g=k(h,f,g[1],g[2],g[3],g[4]);break;case"L":g=M(h,f,g[1],g[2]);break;case"H":g=M(h,f,g[1],f);break;case"V":g=M(h,f,h,g[1]);break;case"Z":g=M(h,f,n,a)}s=y,h=g[g.length-2],f=g[g.length-1],g.length>4?(o=g[g.length-4],r=g[g.length-3]):(o=h,r=f),e.push(g)}return e}},56131:function($){"use strict";var I=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function k(l){if(null==l)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}$.exports=function(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de","5"===Object.getOwnPropertyNames(l)[0])return!1;for(var T={},x=0;x<10;x++)T["_"+String.fromCharCode(x)]=x;if("0123456789"!==Object.getOwnPropertyNames(T).map(function(s){return T[s]}).join(""))return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(s){p[s]=s}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},p)).join("")}catch{return!1}}()?Object.assign:function(l,T){for(var x,p,s=k(l),e=1;e<arguments.length;e++){for(var o in x=Object(arguments[e]))t.call(x,o)&&(s[o]=x[o]);if(I){p=I(x);for(var r=0;r<p.length;r++)M.call(x,p[r])&&(s[p[r]]=x[p[r]])}}return s}},65848:function($){"use strict";var I=function(t){return t!=t};$.exports=function(t,M){return 0===t&&0===M?1/t==1/M:t===M||!(!I(t)||!I(M))}},64003:function($,I,t){"use strict";var M=t(17045),k=t(68222),l=t(65848),T=t(27015),x=t(55572),p=k(T(),Object);M(p,{getPolyfill:T,implementation:l,shim:x}),$.exports=p},27015:function($,I,t){"use strict";var M=t(65848);$.exports=function(){return"function"==typeof Object.is?Object.is:M}},55572:function($,I,t){"use strict";var M=t(27015),k=t(17045);$.exports=function(){var l=M();return k(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function($,I,t){"use strict";var M;if(!Object.keys){var k=Object.prototype.hasOwnProperty,l=Object.prototype.toString,T=t(64178),x=Object.prototype.propertyIsEnumerable,p=!x.call({toString:null},"toString"),s=x.call(function(){},"prototype"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(a){var i=a.constructor;return i&&i.prototype===a},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!r["$"+a]&&k.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{o(window[a])}catch{return!0}}catch{return!0}return!1}();M=function(a){var i=null!==a&&"object"==typeof a,c="[object Function]"===l.call(a),h=T(a),f=i&&"[object String]"===l.call(a),b=[];if(!i&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var v=s&&c;if(f&&a.length>0&&!k.call(a,0))for(var g=0;g<a.length;++g)b.push(String(g));if(h&&a.length>0)for(var y=0;y<a.length;++y)b.push(String(y));else for(var d in a)v&&"prototype"===d||!k.call(a,d)||b.push(String(d));if(p)for(var m=function(u){if(typeof window>"u"||!n)return o(u);try{return o(u)}catch{return!1}}(a),w=0;w<e.length;++w)m&&"constructor"===e[w]||!k.call(a,e[w])||b.push(e[w]);return b}}$.exports=M},8709:function($,I,t){"use strict";var M=Array.prototype.slice,k=t(64178),l=Object.keys,T=l?function(p){return l(p)}:t(99019),x=Object.keys;T.shim=function(){if(Object.keys){var p=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);p||(Object.keys=function(s){return k(s)?x(M.call(s)):x(s)})}else Object.keys=T;return Object.keys||T},$.exports=T},64178:function($){"use strict";var I=Object.prototype.toString;$.exports=function(t){var M=I.call(t),k="[object Arguments]"===M;return k||(k="[object Array]"!==M&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===I.call(t.callee)),k}},88641:function($){"use strict";function I(k,l){if("string"!=typeof k)return[k];var T=[k];"string"==typeof l||Array.isArray(l)?l={brackets:l}:l||(l={});var x=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],p=l.escape||"___",s=!!l.flat;x.forEach(function(o){var r=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),n=[];function a(i,c,h){var f=T.push(i.slice(o[0].length,-o[1].length))-1;return n.push(f),p+f+p}T.forEach(function(i,c){for(var h,f=0;i!=h;)if(h=i,i=i.replace(r,a),f++>1e4)throw Error("References have circular dependency. Please, check them.");T[c]=i}),n=n.reverse(),T=T.map(function(i){return n.forEach(function(c){i=i.replace(new RegExp("(\\"+p+c+"\\"+p+")","g"),o[0]+"$1"+o[1])}),i})});var e=new RegExp("\\"+p+"([0-9]+)\\"+p);return s?T:function o(r,n,a){for(var i,c=[],h=0;i=e.exec(r);){if(h++>1e4)throw Error("Circular references in parenthesis");c.push(r.slice(0,i.index)),c.push(o(n[i[1]],n)),r=r.slice(i.index+i[0].length)}return c.push(r),c}(T[0],T)}function t(k,l){if(l&&l.flat){var T,x=l&&l.escape||"___",p=k[0];if(!p)return"";for(var s=new RegExp("\\"+x+"([0-9]+)\\"+x),e=0;p!=T;){if(e++>1e4)throw Error("Circular references in "+k);T=p,p=p.replace(s,o)}return p}return k.reduce(function r(n,a){return Array.isArray(a)&&(a=a.reduce(r,"")),n+a},"");function o(r,n){if(null==k[n])throw Error("Reference "+n+"is undefined");return k[n]}}function M(k,l){return Array.isArray(k)?t(k,l):I(k,l)}M.parse=I,M.stringify=t,$.exports=M},18863:function($,I,t){"use strict";var M=t(71299);$.exports=function(k){var l;return arguments.length>1&&(k=arguments),"string"==typeof k?k=k.split(/\s/).map(parseFloat):"number"==typeof k&&(k=[k]),k.length&&"number"==typeof k[0]?l=1===k.length?{width:k[0],height:k[0],x:0,y:0}:2===k.length?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&((l={x:(k=M(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0}).width=null==k.width?k.right?k.right-l.x:0:k.width,l.height=null==k.height?k.bottom?k.bottom-l.y:0:k.height),l}},95616:function($){$.exports=function(k){var l=[];return k.replace(t,function(T,x,p){var o,s=x.toLowerCase();for(o=void 0,p=(o=p.match(M))?o.map(Number):[],"m"==s&&p.length>2&&(l.push([x].concat(p.splice(0,2))),s="l",x="m"==x?"l":"L");;){if(p.length==I[s])return p.unshift(x),l.push(p);if(p.length<I[s])throw new Error("malformed path data");l.push([x].concat(p.splice(0,I[s])))}}),l};var I={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function($){$.exports=function(I,t){t||(t=[0,""]),I=String(I);var M=parseFloat(I,10);return t[0]=M,t[1]=I.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},9748:function($,I,t){var M=t(90386);(function(){var k,l,T,x,p,s;typeof performance<"u"&&null!==performance&&performance.now?$.exports=function(){return performance.now()}:null!=M&&M.hrtime?($.exports=function(){return(k()-p)/1e6},l=M.hrtime,x=(k=function(){var e;return 1e9*(e=l())[0]+e[1]})(),s=1e9*M.uptime(),p=x-s):Date.now?($.exports=function(){return Date.now()-T},T=Date.now()):($.exports=function(){return(new Date).getTime()-T},T=(new Date).getTime())}).call(this)},71299:function($){"use strict";$.exports=function(M,k,l){var T,x,p={};if("string"==typeof k&&(k=t(k)),Array.isArray(k)){var s={};for(x=0;x<k.length;x++)s[k[x]]=!0;k=s}for(T in k)k[T]=t(k[T]);var e={};for(T in k){var o=k[T];if(Array.isArray(o))for(x=0;x<o.length;x++){var r=o[x];if(l&&(e[r]=!0),r in M){if(p[T]=M[r],l)for(var n=x;n<o.length;n++)e[o[n]]=!0;break}}else T in M&&(k[T]&&(p[T]=M[T]),l&&(e[T]=!0))}if(l)for(T in M)e[T]||(p[T]=M[T]);return p};var I={};function t(M){return I[M]?I[M]:("string"==typeof M&&(M=I[M]=M.split(/\s*,\s*|\s+/)),M)}},38258:function($){$.exports=function(I,t,M,k){var l=I[0],T=I[1],x=!1;void 0===M&&(M=0),void 0===k&&(k=t.length);for(var p=k-M,s=0,e=p-1;s<p;e=s++){var o=t[s+M][0],r=t[s+M][1],a=t[e+M][1];r>T!=a>T&&l<(t[e+M][0]-o)*(T-r)/(a-r)+o&&(x=!x)}return x}},52142:function($,I,t){var M,k=t(69444),l=t(29023),T=t(87263),x=t(11328),p=t(55968),s=t(10670),e=!1,o=l();function r(n,a,i){var c=M.segments(n),h=M.segments(a),f=i(M.combine(c,h));return M.polygon(f)}M={buildLog:function(n){return!0===n?e=k():!1===n&&(e=!1),!1!==e&&e.list},epsilon:function(n){return o.epsilon(n)},segments:function(n){var a=T(!0,o,e);return n.regions.forEach(a.addRegion),{segments:a.calculate(n.inverted),inverted:n.inverted}},combine:function(n,a){return{combined:T(!1,o,e).calculate(n.segments,n.inverted,a.segments,a.inverted),inverted1:n.inverted,inverted2:a.inverted}},selectUnion:function(n){return{segments:p.union(n.combined,e),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:p.intersect(n.combined,e),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:p.difference(n.combined,e),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:p.differenceRev(n.combined,e),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:p.xor(n.combined,e),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:x(n.segments,o,e),inverted:n.inverted}},polygonFromGeoJSON:function(n){return s.toPolygon(M,n)},polygonToGeoJSON:function(n){return s.fromPolygon(M,o,n)},union:function(n,a){return r(n,a,M.selectUnion)},intersect:function(n,a){return r(n,a,M.selectIntersect)},difference:function(n,a){return r(n,a,M.selectDifference)},differenceRev:function(n,a){return r(n,a,M.selectDifferenceRev)},xor:function(n,a){return r(n,a,M.selectXor)}},"object"==typeof window&&(window.PolyBool=M),$.exports=M},69444:function($){$.exports=function(){var I,t=0,M=!1;function k(l,T){return I.list.push({type:l,data:T?JSON.parse(JSON.stringify(T)):void 0}),I}return I={list:[],segmentId:function(){return t++},checkIntersection:function(l,T){return k("check",{seg1:l,seg2:T})},segmentChop:function(l,T){return k("div_seg",{seg:l,pt:T}),k("chop",{seg:l,pt:T})},statusRemove:function(l){return k("pop_seg",{seg:l})},segmentUpdate:function(l){return k("seg_update",{seg:l})},segmentNew:function(l,T){return k("new_seg",{seg:l,primary:T})},segmentRemove:function(l){return k("rem_seg",{seg:l})},tempStatus:function(l,T,x){return k("temp_status",{seg:l,above:T,below:x})},rewind:function(l){return k("rewind",{seg:l})},status:function(l,T,x){return k("status",{seg:l,above:T,below:x})},vert:function(l){return l===M?I:(M=l,k("vert",{x:l}))},log:function(l){return"string"!=typeof l&&(l=JSON.stringify(l,!1,"  ")),k("log",{txt:l})},reset:function(){return k("reset")},selected:function(l){return k("selected",{segs:l})},chainStart:function(l){return k("chain_start",{seg:l})},chainRemoveHead:function(l,T){return k("chain_rem_head",{index:l,pt:T})},chainRemoveTail:function(l,T){return k("chain_rem_tail",{index:l,pt:T})},chainNew:function(l,T){return k("chain_new",{pt1:l,pt2:T})},chainMatch:function(l){return k("chain_match",{index:l})},chainClose:function(l){return k("chain_close",{index:l})},chainAddHead:function(l,T){return k("chain_add_head",{index:l,pt:T})},chainAddTail:function(l,T){return k("chain_add_tail",{index:l,pt:T})},chainConnect:function(l,T){return k("chain_con",{index1:l,index2:T})},chainReverse:function(l){return k("chain_rev",{index:l})},chainJoin:function(l,T){return k("chain_join",{index1:l,index2:T})},done:function(){return k("done")}}}},29023:function($){$.exports=function(I){"number"!=typeof I&&(I=1e-10);var t={epsilon:function(M){return"number"==typeof M&&(I=M),I},pointAboveOrOnLine:function(M,k,l){var T=k[0],x=k[1];return(l[0]-T)*(M[1]-x)-(l[1]-x)*(M[0]-T)>=-I},pointBetween:function(M,k,l){var x=l[0]-k[0],s=l[1]-k[1],e=(M[0]-k[0])*x+(M[1]-k[1])*s;return!(e<I||e-(x*x+s*s)>-I)},pointsSameX:function(M,k){return Math.abs(M[0]-k[0])<I},pointsSameY:function(M,k){return Math.abs(M[1]-k[1])<I},pointsSame:function(M,k){return t.pointsSameX(M,k)&&t.pointsSameY(M,k)},pointsCompare:function(M,k){return t.pointsSameX(M,k)?t.pointsSameY(M,k)?0:M[1]<k[1]?-1:1:M[0]<k[0]?-1:1},pointsCollinear:function(M,k,l){return Math.abs((M[0]-k[0])*(k[1]-l[1])-(k[0]-l[0])*(M[1]-k[1]))<I},linesIntersect:function(M,k,l,T){var x=k[0]-M[0],p=k[1]-M[1],s=T[0]-l[0],e=T[1]-l[1],o=x*e-p*s;if(Math.abs(o)<I)return!1;var r=M[0]-l[0],n=M[1]-l[1],a=(s*n-e*r)/o,i=(x*n-p*r)/o,c={alongA:0,alongB:0,pt:[M[0]+a*x,M[1]+a*p]};return c.alongA=a<=-I?-2:a<I?-1:a-1<=-I?0:a-1<I?1:2,c.alongB=i<=-I?-2:i<I?-1:i-1<=-I?0:i-1<I?1:2,c},pointInsideRegion:function(M,k){for(var l=M[0],T=M[1],x=k[k.length-1][0],p=k[k.length-1][1],s=!1,e=0;e<k.length;e++){var o=k[e][0],r=k[e][1];r-T>I!=p-T>I&&(x-o)*(T-r)/(p-r)+o-l>I&&(s=!s),x=o,p=r}return s}};return t}},10670:function($){$.exports={toPolygon:function(t,M){function k(x){if(x.length<=0)return t.segments({inverted:!1,regions:[]});function p(o){var r=o.slice(0,o.length-1);return t.segments({inverted:!1,regions:[r]})}for(var s=p(x[0]),e=1;e<x.length;e++)s=t.selectDifference(t.combine(s,p(x[e])));return s}if("Polygon"===M.type)return t.polygon(k(M.coordinates));if("MultiPolygon"===M.type){for(var l=t.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)l=t.selectUnion(t.combine(l,k(M.coordinates[T])));return t.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,M,k){function l(i,c){return M.pointInsideRegion([.5*(i[0][0]+i[1][0]),.5*(i[0][1]+i[1][1])],c)}function T(i){return{region:i,children:[]}}k=t.polygon(t.segments(k));var x=T(null);function p(i,c){for(var h=0;h<i.children.length;h++)if(l(c,(b=i.children[h]).region))return void p(b,c);var f=T(c);for(h=0;h<i.children.length;h++){var b;l((b=i.children[h]).region,c)&&(f.children.push(b),i.children.splice(h,1),h--)}i.children.push(f)}for(var s=0;s<k.regions.length;s++){var e=k.regions[s];e.length<3||p(x,e)}function o(i,c){for(var h=0,f=i[i.length-1][0],b=i[i.length-1][1],v=[],g=0;g<i.length;g++){var y=i[g][0],d=i[g][1];v.push([y,d]),h+=d*f-y*b,f=y,b=d}return h<0!==c&&v.reverse(),v.push([v[0][0],v[0][1]]),v}var r=[];function n(i){var c=[o(i.region,!1)];r.push(c);for(var h=0;h<i.children.length;h++)c.push(a(i.children[h]))}function a(i){for(var c=0;c<i.children.length;c++)n(i.children[c]);return o(i.region,!0)}for(s=0;s<x.children.length;s++)n(x.children[s]);return r.length<=0?{type:"Polygon",coordinates:[]}:1==r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}}},87263:function($,I,t){var M=t(26859);$.exports=function(k,l,T){function x(n,a,i){return{id:T?T.segmentId():-1,start:n,end:a,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var p=M.create();function s(n,a){p.insertBefore(n,function(i){return c=n.isStart,f=a,b=i.isStart,g=i.other.pt,(0!==(y=l.pointsCompare(n.pt,v=i.pt))?y:l.pointsSame(f,g)?0:c!==b?c?1:-1:l.pointAboveOrOnLine(f,b?v:g,b?g:v)?1:-1)<0;var c,f,b,v,g,y})}function e(n,a){var c,f,i=(s(f=M.node({isStart:!0,pt:(c=n).start,seg:c,primary:a,other:null,status:null}),c.end),f);return function(c,h,f){var b=M.node({isStart:!1,pt:h.end,seg:h,primary:f,other:c,status:null});c.other=b,s(b,c.pt)}(i,n,a),i}function o(n,a){var c,h,i=x(a,n.seg.end,n.seg);return c=n,h=a,T&&T.segmentChop(c.seg,h),c.other.remove(),c.seg.end=h,c.other.pt=h,s(c.other,c.pt),e(i,n.primary)}function r(n,a){var i=M.create();function c(E){return i.findTransition(function(L){var C,P,z,j,R,V;return j=(C=E).seg.end,(l.pointsCollinear(z=C.seg.start,R=(P=L.ev).seg.start,V=P.seg.end)?l.pointsCollinear(j,R,V)||l.pointAboveOrOnLine(j,R,V)?1:-1:l.pointAboveOrOnLine(z,R,V)?1:-1)>0})}function h(E,L){var C=E.seg,P=L.seg,z=C.start,j=C.end,R=P.start,V=P.end;T&&T.checkIntersection(C,P);var D=l.linesIntersect(z,j,R,V);if(!1===D){if(!l.pointsCollinear(z,j,R)||l.pointsSame(z,V)||l.pointsSame(j,R))return!1;var B=l.pointsSame(z,R),N=l.pointsSame(j,V);if(B&&N)return L;var U=!B&&l.pointBetween(z,R,V),J=!N&&l.pointBetween(j,R,V);if(B)return J?o(L,j):o(E,V),L;U&&(N||(J?o(L,j):o(E,V)),o(L,z))}else 0===D.alongA&&(-1===D.alongB?o(E,R):0===D.alongB?o(E,D.pt):1===D.alongB&&o(E,V)),0===D.alongB&&(-1===D.alongA?o(L,z):0===D.alongA?o(L,D.pt):1===D.alongA&&o(L,j));return!1}for(var f=[];!p.isEmpty();){var b=p.getHead();if(T&&T.vert(b.pt[0]),b.isStart){let E=function(){if(g){var L=h(b,g);if(L)return L}return!!y&&h(b,y)};T&&T.segmentNew(b.seg,b.primary);var v=c(b),g=v.before?v.before.ev:null,y=v.after?v.after.ev:null;T&&T.tempStatus(b.seg,!!g&&g.seg,!!y&&y.seg);var d,m,w=E();if(w&&(k?(m=null===b.seg.myFill.below||b.seg.myFill.above!==b.seg.myFill.below)&&(w.seg.myFill.above=!w.seg.myFill.above):w.seg.otherFill=b.seg.myFill,T&&T.segmentUpdate(w.seg),b.other.remove(),b.remove()),p.getHead()!==b){T&&T.rewind(b.seg);continue}k?(m=null===b.seg.myFill.below||b.seg.myFill.above!==b.seg.myFill.below,b.seg.myFill.below=y?y.seg.myFill.above:n,b.seg.myFill.above=m?!b.seg.myFill.below:b.seg.myFill.below):null===b.seg.otherFill&&(b.seg.otherFill={above:d=y?b.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:b.primary?a:n,below:d}),T&&T.status(b.seg,!!g&&g.seg,!!y&&y.seg),b.other.status=v.insert(M.node({ev:b}))}else{var u=b.status;if(null===u)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(i.exists(u.prev)&&i.exists(u.next)&&h(u.prev.ev,u.next.ev),T&&T.statusRemove(u.ev.seg),u.remove(),!b.primary){var S=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=S}f.push(b.seg)}p.getHead().remove()}return T&&T.done(),f}return k?{addRegion:function(n){for(var a,i,c,h=n[n.length-1],f=0;f<n.length;f++){var b=l.pointsCompare(a=h,h=n[f]);0!==b&&e((i=b<0?a:h,c=b<0?h:a,{id:T?T.segmentId():-1,start:i,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,a,i,c){return n.forEach(function(h){e(x(h.start,h.end,h),!0)}),i.forEach(function(h){e(x(h.start,h.end,h),!1)}),r(a,c)}}}},26859:function($){$.exports={create:function(){var I={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==I.root},isEmpty:function(){return null===I.root.next},getHead:function(){return I.root.next},insertBefore:function(t,M){for(var k=I.root,l=I.root.next;null!==l;){if(M(l))return t.prev=l.prev,t.next=l,l.prev.next=t,void(l.prev=t);k=l,l=l.next}k.next=t,t.prev=k,t.next=null},findTransition:function(t){for(var M=I.root,k=I.root.next;null!==k&&!t(k);)M=k,k=k.next;return{before:M===I.root?null:M,after:k,insert:function(l){return l.prev=M,l.next=k,M.next=l,null!==k&&(k.prev=l),l}}}};return I},node:function(I){return I.prev=null,I.next=null,I.remove=function(){I.prev.next=I.next,I.next&&(I.next.prev=I.prev),I.prev=null,I.next=null},I}}},11328:function($){$.exports=function(I,t,M){var k=[],l=[];return I.forEach(function(T){var x=T.start,p=T.end;if(t.pointsSame(x,p))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},e={index:0,matches_head:!1,matches_pt1:!1},o=s,r=0;r<k.length;r++){var n=(f=k[r])[0],a=f[f.length-1];if(t.pointsSame(n,x)){if(u(r,!0,!0))break}else if(t.pointsSame(n,p)){if(u(r,!0,!1))break}else if(t.pointsSame(a,x)){if(u(r,!1,!0))break}else if(t.pointsSame(a,p)&&u(r,!1,!1))break}if(o===s)return k.push([x,p]),void(M&&M.chainNew(x,p));if(o===e){M&&M.chainMatch(s.index);var i=s.index,c=s.matches_pt1?p:x,h=s.matches_head,f=k[i],b=h?f[0]:f[f.length-1],v=h?f[1]:f[f.length-2],g=h?f[f.length-1]:f[0],y=h?f[f.length-2]:f[1];return t.pointsCollinear(v,b,c)&&(h?(M&&M.chainRemoveHead(s.index,c),f.shift()):(M&&M.chainRemoveTail(s.index,c),f.pop()),b=v),t.pointsSame(g,c)?(k.splice(i,1),t.pointsCollinear(y,g,b)&&(h?(M&&M.chainRemoveTail(s.index,b),f.pop()):(M&&M.chainRemoveHead(s.index,b),f.shift())),M&&M.chainClose(s.index),void l.push(f)):void(h?(M&&M.chainAddHead(s.index,c),f.unshift(c)):(M&&M.chainAddTail(s.index,c),f.push(c)))}var d=s.index,m=e.index;M&&M.chainConnect(d,m);var w=k[d].length<k[m].length;s.matches_head?e.matches_head?w?(S(d),_(d,m)):(S(m),_(m,d)):_(m,d):e.matches_head?_(d,m):w?(S(d),_(m,d)):(S(m),_(d,m))}function u(E,L,C){return o.index=E,o.matches_head=L,o.matches_pt1=C,o===s?(o=e,!1):(o=null,!0)}function S(E){M&&M.chainReverse(E),k[E].reverse()}function _(E,L){var C=k[E],P=k[L],z=C[C.length-1],j=C[C.length-2],R=P[0],V=P[1];t.pointsCollinear(j,z,R)&&(M&&M.chainRemoveTail(E,z),C.pop(),z=j),t.pointsCollinear(z,R,V)&&(M&&M.chainRemoveHead(L,R),P.shift()),M&&M.chainJoin(E,L),k[E]=C.concat(P),k.splice(L,1)}}),l}},55968:function($){function I(M,k,l){var T=[];return M.forEach(function(x){var p=(x.myFill.above?8:0)+(x.myFill.below?4:0)+(x.otherFill&&x.otherFill.above?2:0)+(x.otherFill&&x.otherFill.below?1:0);0!==k[p]&&T.push({id:l?l.segmentId():-1,start:x.start,end:x.end,myFill:{above:1===k[p],below:2===k[p]},otherFill:null})}),l&&l.selected(T),T}$.exports={union:function(M,k){return I(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(M,k){return I(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(M,k){return I(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(M,k){return I(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(M,k){return I(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}}},14847:function($,I,t){"use strict";var M=t(21630).Transform,k=t(90715);function l(){M.call(this,{readableObjectMode:!0})}function T(x,p,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=x,p&&(this.code=p),s&&(this.statusCode=s)}(l.prototype=Object.create(M.prototype)).constructor=l,k(l.prototype),I.OF=function(x,p,s){for(var e=p,o=0;o<s.length;)if(x[e++]!==s[o++])return!1;return!0},I.eG=function(x,p){var s=[],e=0;if(p&&"hex"===p)for(;e<x.length;)s.push(parseInt(x.slice(e,e+2),16)),e+=2;else for(;e<x.length;e++)s.push(255&x.charCodeAt(e));return s},I.mP=function(x,p){return x[p]|x[p+1]<<8},I.n8=function(x,p){return x[p+1]|x[p]<<8},I.nm=function(x,p){return x[p]|x[p+1]<<8|x[p+2]<<16|16777216*x[p+3]},I.Ag=function(x,p){return x[p+3]|x[p+2]<<8|x[p+1]<<16|16777216*x[p]},(T.prototype=Object.create(Error.prototype)).constructor=T},71371:function($){"use strict";function I(k,l){var T=new Error(k);return T.code=l,T}function t(k){try{return decodeURIComponent(escape(k))}catch{return k}}function M(k,l,T){this.input=k.subarray(l,T),this.start=l;var x=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==x&&"MM\0*"!==x)throw I("invalid TIFF signature","EBADDATA");this.big_endian="M"===x[0]}M.prototype.each=function(k){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},M.prototype.read_uint16=function(k){var l=this.input;if(k+2>l.length)throw I("unexpected EOF","EBADDATA");return this.big_endian?256*l[k]+l[k+1]:l[k]+256*l[k+1]},M.prototype.read_uint32=function(k){var l=this.input;if(k+4>l.length)throw I("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[k]+65536*l[k+1]+256*l[k+2]+l[k+3]:l[k]+256*l[k+1]+65536*l[k+2]+16777216*l[k+3]},M.prototype.is_subifd_link=function(k,l){return 0===k&&34665===l||0===k&&34853===l||34665===k&&40965===l},M.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(k,l){var T;switch(k){case 1:case 2:return this.input[l];case 6:return(T=this.input[l])|33554430*(128&T);case 3:return this.read_uint16(l);case 8:return(T=this.read_uint16(l))|131070*(32768&T);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},M.prototype.scan_ifd=function(k,l,T){var x=this.read_uint16(l);l+=2;for(var p=0;p<x;p++){var s=this.read_uint16(l),e=this.read_uint16(l+2),o=this.read_uint32(l+4),r=this.exif_format_length(e),n=o*r,a=n<=4?l+8:this.read_uint32(l+8),i=!1;if(a+n>this.input.length)throw I("unexpected EOF","EBADDATA");for(var c=[],h=a,f=0;f<o;f++,h+=r){var b=this.exif_format_read(e,h);if(null===b){c=null;break}c.push(b)}if(Array.isArray(c)&&2===e&&(c=t(String.fromCharCode.apply(null,c)))&&"\0"===c[c.length-1]&&(c=c.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:s,offset:c[0]}),i=!0),!1===T({is_big_endian:this.big_endian,ifd:k,tag:s,format:e,count:o,entry_offset:l+this.start,data_length:n,data_offset:a+this.start,value:c,is_subifd_link:i}))return void(this.aborted=!0);l+=12}0===k&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},$.exports.ExifParser=M,$.exports.get_orientation=function(k){var l=0;try{return new M(k,0,k.length).each(function(T){if(0===T.ifd&&274===T.tag&&Array.isArray(T.value))return l=T.value[0],!1}),l}catch{return-1}}},76767:function($,I,t){"use strict";var M=t(14847).n8,k=t(14847).Ag;function l(o,r){if(o.length<4+r)return null;var n=k(o,r);return o.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(r+4,r+8)),data:o.slice(r+8,r+n),end:r+n}}function T(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;switch(a.boxtype){case"ispe":r.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&a.data[0]})}n=a.end}}function x(o,r,n){for(var a=0,i=0;i<n;i++)a=256*a+(o[r+i]||0);return a}function p(o,r){for(var n=o[4]>>4&15,a=15&o[4],i=o[5]>>4&15,c=M(o,6),h=8,f=0;f<c;f++){var b=M(o,h),v=M(o,h+=2),g=x(o,h+=2,i),y=M(o,h+=i);if(h+=2,0===v&&1===y){var d=x(o,h,n),m=x(o,h+n,a);r.item_loc[b]={length:m,offset:d+g}}h+=y*(n+a)}}function s(o,r){for(var n=M(o,4),a=6,i=0;i<n;i++){var c=l(o,a);if(!c)break;if("infe"===c.boxtype){for(var h=M(c.data,4),f="",b=8;b<c.data.length&&c.data[b];b++)f+=String.fromCharCode(c.data[b]);r.item_inf[f]=h}a=c.end}}function e(o,r){for(var n=0;;){var a=l(o,n);if(!a)break;"ipco"===a.boxtype&&T(a.data,r),n=a.end}}$.exports.unbox=l,$.exports.readSizeFromMeta=function(o){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(b,v){for(var g=4;;){var y=l(b,g);if(!y)break;"iprp"===y.boxtype&&e(y.data,v),"iloc"===y.boxtype&&p(y.data,v),"iinf"===y.boxtype&&s(y.data,v),g=y.end}}(o,r),r.sizes.length){var n,a,i,c=(a=(n=r.sizes).reduce(function(b,v){return b.width>v.width||b.width===v.width&&b.height>v.height?b:v}),i=n.reduce(function(b,v){return b.height>v.height||b.height===v.height&&b.width>v.width?b:v}),a.width>i.height||a.width===i.height&&a.height>i.width?a:i),h=1;r.transforms.forEach(function(b){var v={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===b.type&&(h=0===b.value?g[h]:v[h=v[h=g[h]]]),"irot"===b.type)for(var y=0;y<b.value;y++)h=v[h]});var f=null;return r.item_inf.Exif&&(f=r.item_loc[r.item_inf.Exif]),{width:c.width,height:c.height,orientation:r.transforms.length?h:null,variants:r.sizes,exif_location:f}}},$.exports.getMimeType=function(o){var r=String.fromCharCode.apply(null,o.slice(0,4)),n={};n[r]=!0;for(var a=8;a<o.length;a+=4)n[String.fromCharCode.apply(null,o.slice(a,a+4))]=!0;if(n.mif1||n.msf1||n.miaf)return"avif"===r||"avis"===r||"avio"===r?{type:"avif",mime:"image/avif"}:"heic"===r||"heix"===r?{type:"heic",mime:"image/heic"}:"hevc"===r||"hevx"===r?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function($,I,t){"use strict";var M=t(14847).eG,k=t(14847).OF,l=t(14847).Ag,T=t(76767),x=t(71371),p=M("ftyp");$.exports=function(s){if(k(s,4,p)){var e=T.unbox(s,0);if(e){var o=T.getMimeType(e.data);if(o){for(var r,n=e.end;;){var a=T.unbox(s,n);if(!a)break;if(n=a.end,"mdat"===a.boxtype)return;if("meta"===a.boxtype){r=a.data;break}}if(r){var i=T.readSizeFromMeta(r);if(i){var c={width:i.width,height:i.height,type:o.type,mime:o.mime,wUnits:"px",hUnits:"px"};if(i.variants.length>1&&(c.variants=i.variants),i.orientation&&(c.orientation=i.orientation),i.exif_location&&i.exif_location.offset+i.exif_location.length<=s.length){var h=l(s,i.exif_location.offset),f=s.slice(i.exif_location.offset+h+4,i.exif_location.offset+i.exif_location.length),b=x.get_orientation(f);b>0&&(c.orientation=b)}return c}}}}}}},2504:function($,I,t){"use strict";var M=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=M("BM");$.exports=function(x){if(!(x.length<26)&&k(x,0,T))return{width:l(x,18),height:l(x,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function($,I,t){"use strict";var M=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=M("GIF87a"),x=M("GIF89a");$.exports=function(p){if(!(p.length<10)&&(k(p,0,T)||k(p,0,x)))return{width:l(p,6),height:l(p,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function($,I,t){"use strict";var M=t(14847).mP;$.exports=function(k){var l=M(k,0),T=M(k,2),x=M(k,4);if(0===l&&1===T&&x){for(var p=[],s={width:0,height:0},e=0;e<x;e++){var o=k[6+16*e]||256,r=k[6+16*e+1]||256,n={width:o,height:r};p.push(n),(o>s.width||r>s.height)&&(s=n)}return{width:s.width,height:s.height,variants:p,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function($,I,t){"use strict";var M=t(14847).n8,k=t(14847).eG,l=t(14847).OF,T=t(71371),x=k("Exif\0\0");$.exports=function(p){if(!(p.length<2)&&255===p[0]&&216===p[1]&&255===p[2])for(var s=2;;){for(;;){if(p.length-s<2)return;if(255===p[s++])break}for(var e,o,r=p[s++];255===r;)r=p[s++];if(208<=r&&r<=217||1===r)e=0;else{if(!(192<=r&&r<=254)||p.length-s<2)return;e=M(p,s)-2,s+=2}if(217===r||218===r)return;if(225===r&&e>=10&&l(p,s,x)&&(o=T.get_orientation(p.slice(s+6,s+e))),e>=5&&192<=r&&r<=207&&196!==r&&200!==r&&204!==r){if(p.length-s<e)return;var n={width:M(p,s+3),height:M(p,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(n.orientation=o),n}s+=e}}},6303:function($,I,t){"use strict";var M=t(14847).eG,k=t(14847).OF,l=t(14847).Ag,T=M("\x89PNG\r\n\x1a\n"),x=M("IHDR");$.exports=function(p){if(!(p.length<24)&&k(p,0,T)&&k(p,12,x))return{width:l(p,16),height:l(p,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function($,I,t){"use strict";var M=t(14847).eG,k=t(14847).OF,l=t(14847).Ag,T=M("8BPS\0\x01");$.exports=function(x){if(!(x.length<22)&&k(x,0,T))return{width:l(x,18),height:l(x,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function($){"use strict";function I(s){return"number"==typeof s&&isFinite(s)&&s>0}var t=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,x=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function p(s){return x.test(s)?s.match(x)[0]:"px"}$.exports=function(s){if(function(g){var y,d=0,m=g.length;for(239===g[0]&&187===g[1]&&191===g[2]&&(d=3);d<m&&(32===(y=g[d])||9===y||13===y||10===y);)d++;return d!==m&&60===g[d]}(s)){for(var e="",o=0;o<s.length;o++)e+=String.fromCharCode(s[o]);var r=(e.match(t)||[""])[0];if(M.test(r)){var n=(y=(g=r).match(k),d=g.match(l),m=g.match(T),{width:y&&(y[1]||y[2]),height:d&&(d[1]||d[2]),viewbox:m&&(m[1]||m[2])}),a=parseFloat(n.width),i=parseFloat(n.height);if(n.width&&n.height)return I(a)&&I(i)?{width:a,height:i,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.height)}:void 0;var c=(n.viewbox||"").split(" "),h={width:c[2],height:c[3]},f=parseFloat(h.width),b=parseFloat(h.height);if(I(f)&&I(b)&&p(h.width)===p(h.height)){var v=f/b;return n.width?I(a)?{width:a,height:a/v,type:"svg",mime:"image/svg+xml",wUnits:p(n.width),hUnits:p(n.width)}:void 0:n.height?I(i)?{width:i*v,height:i,type:"svg",mime:"image/svg+xml",wUnits:p(n.height),hUnits:p(n.height)}:void 0:{width:f,height:b,type:"svg",mime:"image/svg+xml",wUnits:p(h.width),hUnits:p(h.height)}}}}var g,y,d,m}},66278:function($,I,t){"use strict";var M=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=t(14847).n8,x=t(14847).nm,p=t(14847).Ag,s=M("II*\0"),e=M("MM\0*");function o(a,i,c){return c?T(a,i):l(a,i)}function r(a,i,c){return c?p(a,i):x(a,i)}function n(a,i,c){var h=o(a,i+2,c);return 1!==r(a,i+4,c)||3!==h&&4!==h?null:3===h?o(a,i+8,c):r(a,i+8,c)}$.exports=function(a){if(!(a.length<8)&&(k(a,0,s)||k(a,0,e))){var i=77===a[0],c=r(a,4,i)-8;if(!(c<0)){var h=c+8;if(!(a.length-h<2)){var f=12*o(a,h+0,i);if(!(f<=0||(h+=2,a.length-h<f))){var b,v,g,y;for(b=0;b<f;b+=12)256===(y=o(a,h+b,i))?v=n(a,h+b,i):257===y&&(g=n(a,h+b,i));return v&&g?{width:v,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function($,I,t){"use strict";var M=t(14847).eG,k=t(14847).OF,l=t(14847).mP,T=t(14847).nm,x=t(71371),p=M("RIFF"),s=M("WEBP");function e(n,a){if(157===n[a+3]&&1===n[a+4]&&42===n[a+5])return{width:16383&l(n,a+6),height:16383&l(n,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function o(n,a){if(47===n[a]){var i=T(n,a+1);return{width:1+(16383&i),height:1+(i>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,a){return{width:1+(n[a+6]<<16|n[a+5]<<8|n[a+4]),height:1+(n[a+9]<<a|n[a+8]<<8|n[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(n){if(!(n.length<16)&&(k(n,0,p)||k(n,8,s))){var a=12,i=null,c=0,h=T(n,4)+8;if(!(h>n.length)){for(;a+8<h;)if(0!==n[a]){var f=String.fromCharCode.apply(null,n.slice(a,a+4)),b=T(n,a+4);"VP8 "===f&&b>=10?i=i||e(n,a+8):"VP8L"===f&&b>=9?i=i||o(n,a+8):"VP8X"===f&&b>=10?i=i||r(n,a+8):"EXIF"===f&&(c=x.get_orientation(n.slice(a+8,a+8+b)),a=1/0),a+=8+b}else a++;if(i)return c>0&&(i.orientation=c),i}}}},91497:function($,I,t){"use strict";$.exports={avif:t(24461),bmp:t(2504),gif:t(47342),ico:t(31355),jpeg:t(54261),png:t(6303),psd:t(38689),svg:t(6881),tiff:t(66278),webp:t(90784)}},33575:function($,I,t){"use strict";var M=t(91497);$.exports=function(k){return function(l){for(var T=Object.keys(M),x=0;x<T.length;x++){var p=M[T[x]](l);if(p)return p}return null}(k)},$.exports.parsers=M},90386:function($){var I,t,M=$.exports={};function k(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function T(i){if(I===setTimeout)return setTimeout(i,0);if((I===k||!I)&&setTimeout)return I=setTimeout,setTimeout(i,0);try{return I(i,0)}catch{try{return I.call(null,i,0)}catch{return I.call(this,i,0)}}}!function(){try{I="function"==typeof setTimeout?setTimeout:k}catch{I=k}try{t="function"==typeof clearTimeout?clearTimeout:l}catch{t=l}}();var x,p=[],s=!1,e=-1;function o(){s&&x&&(s=!1,x.length?p=x.concat(p):e=-1,p.length&&r())}function r(){if(!s){var i=T(o);s=!0;for(var c=p.length;c;){for(x=p,p=[];++e<c;)x&&x[e].run();e=-1,c=p.length}x=null,s=!1,function(h){if(t===clearTimeout)return clearTimeout(h);if((t===l||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(h);try{t(h)}catch{try{return t.call(null,h)}catch{return t.call(this,h)}}}(i)}}function n(i,c){this.fun=i,this.array=c}function a(){}M.nextTick=function(i){var c=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)c[h-1]=arguments[h];p.push(new n(i,c)),1!==p.length||s||T(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=a,M.addListener=a,M.once=a,M.off=a,M.removeListener=a,M.removeAllListeners=a,M.emit=a,M.prependListener=a,M.prependOnceListener=a,M.listeners=function(i){return[]},M.binding=function(i){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(i){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},5877:function($,I,t){for(var M=t(9748),k=typeof window>"u"?t.g:window,l=["moz","webkit"],T="AnimationFrame",x=k["request"+T],p=k["cancel"+T]||k["cancelRequest"+T],s=0;!x&&s<l.length;s++)x=k[l[s]+"Request"+T],p=k[l[s]+"Cancel"+T]||k[l[s]+"CancelRequest"+T];if(!x||!p){var e=0,o=0,r=[];x=function(n){if(0===r.length){var a=M(),i=Math.max(0,16.666666666666668-(a-e));e=i+a,setTimeout(function(){var c=r.slice(0);r.length=0;for(var h=0;h<c.length;h++)if(!c[h].cancelled)try{c[h].callback(e)}catch(f){setTimeout(function(){throw f},0)}},Math.round(i))}return r.push({handle:++o,callback:n,cancelled:!1}),o},p=function(n){for(var a=0;a<r.length;a++)r[a].handle===n&&(r[a].cancelled=!0)}}$.exports=function(n){return x.call(k,n)},$.exports.cancel=function(){p.apply(k,arguments)},$.exports.polyfill=function(n){n||(n=k),n.requestAnimationFrame=x,n.cancelAnimationFrame=p}},3593:function($,I,t){"use strict";var M=t(21527),k=t(25075),l=t(93447),T=t(71299),x=t(56131),p=t(30120),s=t(57060),e=s.float32,o=s.fract32;$.exports=function(n,a){if("function"==typeof n?(a||(a={}),a.regl=n):a=n,a.length&&(a.positions=a),!(n=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,c,h,f,b,v,g=n._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},d=[];return f=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=n.buffer({usage:"static",type:"float",data:r}),S(a),i=n({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:f,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:c,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:h,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:b,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),x(m,{update:S,draw:w,destroy:_,regl:n,gl:g,canvas:g.canvas,groups:d}),m;function m(E){E?S(E):null===E&&_(),w()}function w(E){if("number"==typeof E)return u(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),d.forEach(function(L,C){L&&(E&&(L.draw=!!E[C]),L.draw?u(C):L.draw=!0)})}function u(E){"number"==typeof E&&(E=d[E]),null!=E&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],i(E),E.after&&E.after(E))}function S(E){if(E){null!=E.length?"number"==typeof E[0]&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,C=0;if(m.groups=d=E.map(function(B,N){var U=d[N];return B&&("function"==typeof B?B={after:B}:"number"==typeof B[0]&&(B={positions:B}),B=T(B,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),U||(d[N]=U={id:N,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},B=x({},y,B)),l(U,B,[{lineWidth:function(J){return.5*+J},capSize:function(J){return.5*+J},opacity:parseFloat,errors:function(J){return J=p(J),C+=J.length,J},positions:function(J,Y){return J=p(J,"float64"),Y.count=Math.floor(J.length/2),Y.bounds=M(J,2),Y.offset=L,L+=Y.count,J}},{color:function(J,Y){var q=Y.count;if(J||(J="transparent"),!Array.isArray(J)||"number"==typeof J[0]){var H=J;J=Array(q);for(var X=0;X<q;X++)J[X]=H}if(J.length<q)throw Error("Not enough colors");for(var Q=new Uint8Array(4*q),ne=0;ne<q;ne++){var re=k(J[ne],"uint8");Q.set(re,4*ne)}return Q},range:function(J,Y,q){return J||(J=Y.bounds),Y.scale=[1/(J[2]-J[0]),1/(J[3]-J[1])],Y.translate=[-J[0],-J[1]],Y.scaleFract=o(Y.scale),Y.translateFract=o(Y.translate),J},viewport:function(J){var Y;return Array.isArray(J)?Y={x:J[0],y:J[1],width:J[2]-J[0],height:J[3]-J[1]}:J?((Y={x:J.x||J.left||0,y:J.y||J.top||0}).width=J.right?J.right-Y.x:J.w||J.width||0,Y.height=J.bottom?J.bottom-Y.y:J.h||J.height||0):Y={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},Y}}])),U}),L||C){var P=d.reduce(function(B,N,U){return B+(N?N.count:0)},0),z=new Float64Array(2*P),j=new Uint8Array(4*P),R=new Float32Array(4*P);d.forEach(function(B,N){if(B){var U=B.positions,Y=B.offset,H=B.errors;B.count&&(j.set(B.color,4*Y),R.set(H,4*Y),z.set(U,2*Y))}});var V=e(z);c(V);var D=o(z,V);h(D),f(j),b(R)}}}function _(){c.destroy(),h.destroy(),f.destroy(),b.destroy(),v.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function($,I,t){"use strict";var M=t(25075),k=t(21527),l=t(56131),T=t(56068),x=t(71299),p=t(30120),s=t(11474),e=t(54),o=t(57060),r=o.float32,n=o.fract32,a=t(83522),i=t(18863),c=t(6851);function h(f,b){if(!(this instanceof h))return new h(f,b);if("function"==typeof f?(b||(b={}),b.regl=f):b=f,b.length&&(b.positions=b),!(f=b.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=h.shaders.has(f)?h.shaders.get(f):h.shaders.set(f,h.createShaders(f)).get(f),this.update(b)}$.exports=h,h.dashMult=2,h.maxPatternLength=256,h.precisionThreshold=3e6,h.maxPoints=1e4,h.maxLines=2048,h.shaders=new a,h.createShaders=function(f){var b,v=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(d,m){return"round"===m.join?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(d,m){return[m.viewport.x,m.viewport.y,d.viewportWidth,d.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(d,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},y=f(l({vert:T(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:T(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g));try{b=f(l({cull:{enable:!0,face:"back"},vert:T(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:T(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:v,divisor:0,stride:8,offset:0},lineTop:{buffer:v,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{b=y}return{fill:f({primitive:"triangle",elements:function(d,m){return m.triangles},offset:0,vert:T(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:T(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(d,m){return[m.viewport.x,m.viewport.y,d.viewportWidth,d.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport}),rect:y,miter:b}},h.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},h.prototype.render=function(){for(var f,b=[],v=arguments.length;v--;)b[v]=arguments[v];b.length&&(f=this).update.apply(f,b),this.draw()},h.prototype.draw=function(){for(var f=this,b=[],v=arguments.length;v--;)b[v]=arguments[v];return(b.length?b:this.passes).forEach(function(g,y){var d;if(g&&Array.isArray(g))return(d=f).draw.apply(d,g);"number"==typeof g&&(g=f.passes[g]),g&&g.count>1&&g.opacity&&(f.regl._refresh(),g.fill&&g.triangles&&g.triangles.length>2&&f.shaders.fill(g),g.thickness&&(g.scale[0]*g.viewport.width>h.precisionThreshold||g.scale[1]*g.viewport.height>h.precisionThreshold||"rect"===g.join||!g.join&&(g.thickness<=2||g.count>=h.maxPoints)?f.shaders.rect(g):f.shaders.miter(g)))}),this},h.prototype.update=function(f){var b=this;if(f){null!=f.length?"number"==typeof f[0]&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var v=this.regl,g=this.gl;if(f.forEach(function(u,S){var _=b.passes[S];if(void 0!==u)if(null!==u){if("number"==typeof u[0]&&(u={positions:u}),u=x(u,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),_||(b.passes[S]=_={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},u=l({},h.defaults,u)),null!=u.thickness&&(_.thickness=parseFloat(u.thickness)),null!=u.opacity&&(_.opacity=parseFloat(u.opacity)),null!=u.miterLimit&&(_.miterLimit=parseFloat(u.miterLimit)),null!=u.overlay&&(_.overlay=!!u.overlay,S<h.maxLines&&(_.depth=2*(h.maxLines-1-S%h.maxLines)/h.maxLines-1)),null!=u.join&&(_.join=u.join),null!=u.hole&&(_.hole=u.hole),null!=u.fill&&(_.fill=u.fill?M(u.fill,"uint8"):null),null!=u.viewport&&(_.viewport=i(u.viewport)),_.viewport||(_.viewport=i([g.drawingBufferWidth,g.drawingBufferHeight])),null!=u.close&&(_.close=u.close),null===u.positions&&(u.positions=[]),u.positions){var E,L;if(u.positions.x&&u.positions.y){var C=u.positions.x,P=u.positions.y;L=_.count=Math.max(C.length,P.length),E=new Float64Array(2*L);for(var z=0;z<L;z++)E[2*z]=C[z],E[2*z+1]=P[z]}else E=p(u.positions,"float64"),L=_.count=Math.floor(E.length/2);var j=_.bounds=k(E,2);if(_.fill){for(var R=[],V={},D=0,B=0,N=0,U=_.count;B<U;B++){var J=E[2*B],Y=E[2*B+1];isNaN(J)||isNaN(Y)||null==J||null==Y?(J=E[2*D],Y=E[2*D+1],V[B]=D):D=B,R[N++]=J,R[N++]=Y}if(u.splitNull){_.count-1 in V||(V[_.count]=_.count-1);var q=Object.keys(V).map(Number).sort(function(_t,pt){return _t-pt}),H=[],X=0,Q=null!=_.hole?_.hole[0]:null;if(null!=Q){var ne=c(q,function(_t){return _t>=Q});(q=q.slice(0,ne)).push(Q)}for(var re=function(_t){var pt=R.slice(2*X,2*q[_t]).concat(Q?R.slice(2*Q):[]),Pt=(_.hole||[]).map(function(Ot){return Ot-Q+(q[_t]-X)}),St=s(pt,Pt);St=St.map(function(Ot){return Ot+X+(Ot+X<q[_t]?0:Q-q[_t])}),H.push.apply(H,St),X=q[_t]+1},ae=0;ae<q.length;ae++)re(ae);for(var se=0,pe=H.length;se<pe;se++)null!=V[H[se]]&&(H[se]=V[H[se]]);_.triangles=H}else{for(var ke=s(R,_.hole||[]),me=0,le=ke.length;me<le;me++)null!=V[ke[me]]&&(ke[me]=V[ke[me]]);_.triangles=ke}}var ue=new Float64Array(E);e(ue,2,j);var Ee=new Float64Array(2*L+6);_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ee[0]=ue[2*L-4],Ee[1]=ue[2*L-3]):(Ee[0]=ue[2*L-2],Ee[1]=ue[2*L-1]):(Ee[0]=ue[0],Ee[1]=ue[1]),Ee.set(ue,2),_.close?E[0]===E[2*L-2]&&E[1]===E[2*L-1]?(Ee[2*L+2]=ue[2],Ee[2*L+3]=ue[3],_.count-=1):(Ee[2*L+2]=ue[0],Ee[2*L+3]=ue[1],Ee[2*L+4]=ue[2],Ee[2*L+5]=ue[3]):(Ee[2*L+2]=ue[2*L-2],Ee[2*L+3]=ue[2*L-1],Ee[2*L+4]=ue[2*L-2],Ee[2*L+5]=ue[2*L-1]);var de=r(Ee);_.positionBuffer(de);var xe=n(Ee,de);_.positionFractBuffer(xe)}if(u.range?_.range=u.range:_.range||(_.range=_.bounds),(u.range||u.positions)&&_.count){var Te=_.bounds,oe=_.range[2]-_.range[0],he=_.range[3]-_.range[1];_.scale=[(Te[2]-Te[0])/oe,(Te[3]-Te[1])/he],_.translate=[-_.range[0]/oe+Te[0]/oe||0,-_.range[1]/he+Te[1]/he||0],_.scaleFract=n(_.scale),_.translateFract=n(_.translate)}if(u.dashes){var ye,Me=0;if(!u.dashes||u.dashes.length<2)Me=1,ye=new Uint8Array([255,255,255,255,255,255,255,255]);else{Me=0;for(var Re=0;Re<u.dashes.length;++Re)Me+=u.dashes[Re];ye=new Uint8Array(Me*h.dashMult);for(var Pe=0,De=255,fe=0;fe<2;fe++)for(var ge=0;ge<u.dashes.length;++ge){for(var be=0,Ie=u.dashes[ge]*h.dashMult*.5;be<Ie;++be)ye[Pe++]=De;De^=255}}_.dashLength=Me,_.dashTexture({channels:1,data:ye,width:ye.length,height:1,mag:"linear",min:"linear"},0,0)}if(u.color){var He=_.count,Ve=u.color;Ve||(Ve="transparent");var tt=new Uint8Array(4*He+4);if(Array.isArray(Ve)&&"number"!=typeof Ve[0]){for(var nt=0;nt<He;nt++){var st=M(Ve[nt],"uint8");tt.set(st,4*nt)}tt.set(M(Ve[0],"uint8"),4*He)}else for(var dt=M(Ve,"uint8"),wt=0;wt<He+1;wt++)tt.set(dt,4*wt);_.colorBuffer({usage:"dynamic",type:"uint8",data:tt})}}else b.passes[S]=null}),f.length<this.passes.length){for(var y=f.length;y<this.passes.length;y++){var d=this.passes[y];d&&(d.colorBuffer.destroy(),d.positionBuffer.destroy(),d.dashTexture.destroy())}this.passes.length=f.length}for(var m=[],w=0;w<this.passes.length;w++)null!==this.passes[w]&&m.push(this.passes[w]);return this.passes=m,this}},h.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},11870:function($,I,t){"use strict";function M(g,y){return function(d){if(Array.isArray(d))return d}(g)||function(d,m){var w=null==d?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(null!=w){var u,S,_=[],E=!0,L=!1;try{for(w=w.call(d);!(E=(u=w.next()).done)&&(_.push(u.value),!m||_.length!==m);E=!0);}catch(C){L=!0,S=C}finally{try{E||null==w.return||w.return()}finally{if(L)throw S}}return _}}(g,y)||k(g,y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(g,y){if(g){if("string"==typeof g)return l(g,y);var d=Object.prototype.toString.call(g).slice(8,-1);return"Object"===d&&g.constructor&&(d=g.constructor.name),"Map"===d||"Set"===d?Array.from(g):"Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?l(g,y):void 0}}function l(g,y){(null==y||y>g.length)&&(y=g.length);for(var d=0,m=new Array(y);d<y;d++)m[d]=g[d];return m}var T=t(25075),x=t(21527),p=t(6475),s=t(88294),e=t(56131),o=t(56068),r=t(71299),n=t(93447),a=t(30120),i=t(62683),c=t(57060),h=t(18863),f=b;function b(g,y){var d=this;if(!(this instanceof b))return new b(g,y);"function"==typeof g?(y||(y={}),y.regl=g):(y=g,g=null),y&&y.length&&(y.positions=y);var m,w=(g=y.regl)._gl,u=[];this.tooManyColors=i,m=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),e(this,{regl:g,gl:w,groups:[],markerCache:[null],markerTextures:[null],palette:u,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:w.canvas}),this.update(y);var S={uniforms:{constPointSize:!!y.constPointSize,opacity:g.prop("opacity"),paletteSize:function(L,C){return[d.tooManyColors?0:255,m.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:m},attributes:{x:function(L,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(L,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(L,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(L,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(L,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/d.maxSize)]}},borderSize:function(L,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/d.maxSize)]}},colorId:function(L,C){return C.color.length?{buffer:C.colorBuffer,stride:d.tooManyColors?8:4,offset:0}:{constant:d.tooManyColors?u.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(L,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:d.tooManyColors?8:4,offset:d.tooManyColors?4:2}:{constant:d.tooManyColors?u.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(L,C){return!0===C.activation?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},_=e({},S);_.frag=o(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),_.vert=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=g(_);var E=e({},S);E.frag=o(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),E.vert=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),i&&(E.frag=E.frag.replace("smoothstep","smoothStep"),_.frag=_.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var g=this,y=arguments.length,d=new Array(y),m=0;m<y;m++)d[m]=arguments[m];var w=this.groups;if(1===d.length&&Array.isArray(d[0])&&(null===d[0][0]||Array.isArray(d[0][0]))&&(d=d[0]),this.regl._refresh(),d.length)for(var u=0;u<d.length;u++)this.drawItem(u,d[u]);else w.forEach(function(S,_){g.drawItem(_)});return this},b.prototype.drawItem=function(g,y){var d,m=this.groups,w=m[g];if("number"==typeof y&&(g=y,w=m[y],y=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,y));for(var u=[],S=1;S<w.activation.length;S++)w.activation[S]&&(!0===w.activation[S]||w.activation[S].data.length)&&u.push.apply(u,function(_){if(Array.isArray(_))return l(_)}(d=this.getMarkerDrawOptions(S,w,y))||function(_){if(typeof Symbol<"u"&&null!=_[Symbol.iterator]||null!=_["@@iterator"])return Array.from(_)}(d)||k(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());u.length&&this.drawMarker(u)}},b.prototype.getMarkerDrawOptions=function(g,y,d){var m=y.range,w=y.tree,u=y.viewport,S=y.activation,_=y.selectionBuffer,E=y.count;if(!w)return d?[e({},y,{markerTexture:this.markerTextures[g],activation:S[g],count:d.length,elements:d,offset:0})]:[e({},y,{markerTexture:this.markerTextures[g],activation:S[g],offset:0})];var L=[],C=w.range(m,{lod:!0,px:[(m[2]-m[0])/u.width,(m[3]-m[1])/u.height]});if(d){for(var P=S[g].data,z=new Uint8Array(E),j=0;j<d.length;j++){var R=d[j];z[R]=P?P[R]:1}_.subdata(z)}for(var V=C.length;V--;){var D=M(C[V],2),B=D[0];L.push(e({},y,{markerTexture:this.markerTextures[g],activation:d?_:S[g],offset:B,count:D[1]-B}))}return L},b.prototype.update=function(){for(var g=this,y=arguments.length,d=new Array(y),m=0;m<y;m++)d[m]=arguments[m];if(d.length){1===d.length&&Array.isArray(d[0])&&(d=d[0]);var w=this.groups,u=this.gl,S=this.regl,_=this.maxSize,E=this.maxColors,L=this.palette;this.groups=w=d.map(function(C,P){var z=w[P];if(void 0===C)return z;null===C?C={positions:null}:"function"==typeof C?C={ondraw:C}:"number"==typeof C[0]&&(C={positions:C}),null===(C=r(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(C.positions=[]),null!=C.tooManyColors&&(g.tooManyColors=C.tooManyColors),z||(w[P]=z={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=e({},b.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=z.marker,delete z.marker),C.marker&&!("positions"in C)&&(C.positions=z.positions,delete z.positions);var j=0,R=0;if(n(z,C,[{snap:!0,size:function(me,le){return null==me&&(me=b.defaults.size),j+=me&&me.length?1:0,me},borderSize:function(me,le){return null==me&&(me=b.defaults.borderSize),j+=me&&me.length?1:0,me},opacity:parseFloat,color:function(me,le){return null==me&&(me=b.defaults.color),me=g.updateColor(me),R++,me},borderColor:function(me,le){return null==me&&(me=b.defaults.borderColor),me=g.updateColor(me),R++,me},bounds:function(me,le,ue){return"range"in ue||(ue.range=null),me},positions:function(me,le,ue){var Ee=le.snap,de=le.positionBuffer,xe=le.positionFractBuffer,Te=le.selectionBuffer;if(me.x||me.y)return le.xAttr=me.x.length?{buffer:S.buffer(me.x),offset:0,stride:4,count:me.x.length}:{buffer:me.x.buffer,offset:4*me.x.offset||0,stride:4*(me.x.stride||1),count:me.x.count},le.yAttr=me.y.length?{buffer:S.buffer(me.y),offset:0,stride:4,count:me.y.length}:{buffer:me.y.buffer,offset:4*me.y.offset||0,stride:4*(me.y.stride||1),count:me.y.count},le.count=Math.max(le.xAttr.count,le.yAttr.count),me;me=a(me,"float64");var we=le.count=Math.floor(me.length/2),K=le.bounds=we?x(me,2):null;if(ue.range||le.range||(delete le.range,ue.range=K),ue.marker||le.marker||(delete le.marker,ue.marker=null),Ee&&(!0===Ee||we>Ee)?le.tree=s(me,{bounds:K}):Ee&&Ee.length&&(le.tree=Ee),le.tree){var oe={primitive:"points",usage:"static",data:le.tree,type:"uint32"};le.elements?le.elements(oe):le.elements=S.elements(oe)}var he=c.float32(me);return de({data:he,usage:"dynamic"}),xe({data:c.fract32(me,he),usage:"dynamic"}),Te({data:new Uint8Array(we),type:"uint8",usage:"stream"}),me}},{marker:function(me,le,ue){var Ee=le.activation;if(Ee.forEach(function(he){return he&&he.destroy&&he.destroy()}),Ee.length=0,me&&"number"!=typeof me[0]){for(var de=[],xe=0,Te=Math.min(me.length,le.count);xe<Te;xe++){var we=g.addMarker(me[xe]);de[we]||(de[we]=new Uint8Array(le.count)),de[we][xe]=1}for(var K=0;K<de.length;K++)if(de[K]){var oe={data:de[K],type:"uint8",usage:"static"};Ee[K]?Ee[K](oe):Ee[K]=S.buffer(oe),Ee[K].data=de[K]}}else Ee[g.addMarker(me)]=!0;return me},range:function(me,le,ue){var Ee=le.bounds;if(Ee)return me||(me=Ee),le.scale=[1/(me[2]-me[0]),1/(me[3]-me[1])],le.translate=[-me[0],-me[1]],le.scaleFract=c.fract(le.scale),le.translateFract=c.fract(le.translate),me},viewport:function(me){return h(me||[u.drawingBufferWidth,u.drawingBufferHeight])}}]),j){var D=z.count,B=z.size,N=z.borderSize,U=z.sizeBuffer,J=new Uint8Array(2*D);if(B.length||N.length)for(var Y=0;Y<D;Y++)J[2*Y]=Math.round(255*(null==B[Y]?B:B[Y])/_),J[2*Y+1]=Math.round(255*(null==N[Y]?N:N[Y])/_);U({data:J,usage:"dynamic"})}if(R){var q,X=z.count,Q=z.color,ne=z.borderColor,re=z.colorBuffer;if(g.tooManyColors){if(Q.length||ne.length){q=new Uint8Array(8*X);for(var ae=0;ae<X;ae++){var se=Q[ae];q[8*ae]=L[4*se],q[8*ae+1]=L[4*se+1],q[8*ae+2]=L[4*se+2],q[8*ae+3]=L[4*se+3];var pe=ne[ae];q[8*ae+4]=L[4*pe],q[8*ae+5]=L[4*pe+1],q[8*ae+6]=L[4*pe+2],q[8*ae+7]=L[4*pe+3]}}}else if(Q.length||ne.length){q=new Uint8Array(4*X+2);for(var ke=0;ke<X;ke++)null!=Q[ke]&&(q[4*ke]=Q[ke]%E,q[4*ke+1]=Math.floor(Q[ke]/E)),null!=ne[ke]&&(q[4*ke+2]=ne[ke]%E,q[4*ke+3]=Math.floor(ne[ke]/E))}re({data:q||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},b.prototype.addMarker=function(g){var y,d=this.markerTextures,m=this.regl,w=this.markerCache,u=null==g?0:w.indexOf(g);if(u>=0)return u;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)y=g;else{y=new Uint8Array(g.length);for(var S=0,_=g.length;S<_;S++)y[S]=255*g[S]}var E=Math.floor(Math.sqrt(y.length));return u=d.length,w.push(g),d.push(m.texture({channels:1,data:y,radius:E,mag:"linear",min:"linear"})),u},b.prototype.updateColor=function(g){var y=this.paletteIds,d=this.palette,m=this.maxColors;Array.isArray(g)||(g=[g]);var w=[];if("number"==typeof g[0]){var u=[];if(Array.isArray(g))for(var S=0;S<g.length;S+=4)u.push(g.slice(S,S+4));else for(var _=0;_<g.length;_+=4)u.push(g.subarray(_,_+4));g=u}for(var E=0;E<g.length;E++){var L=g[E];L=T(L,"uint8");var C=p(L,!1);if(null==y[C]){var P=d.length;y[C]=Math.floor(P/4),d[P]=L[0],d[P+1]=L[1],d[P+2]=L[2],d[P+3]=L[3]}w[E]=y[C]}return!this.tooManyColors&&d.length>4*m&&(this.tooManyColors=!0),this.updatePalette(d),1===w.length?w[0]:w},b.prototype.updatePalette=function(g){if(!this.tooManyColors){var y=this.maxColors,d=this.paletteTexture,m=Math.ceil(.25*g.length/y);if(m>1)for(var w=.25*(g=g.slice()).length%y;w<m*y;w++)g.push(0,0,0,0);d.height<m&&d.resize(y,m),d.subimage({width:Math.min(.25*g.length,y),height:m,data:g},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(y){return y&&y.destroy&&y.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var v=t(56131);$.exports=function(g,y){var d=new f(g,y),m=d.render.bind(d);return v(m,{render:m,update:d.update.bind(d),draw:d.draw.bind(d),destroy:d.destroy.bind(d),regl:d.regl,gl:d.gl,canvas:d.gl.canvas,groups:d.groups,markers:d.markerCache,palette:d.palette}),m}},60487:function($,I,t){"use strict";var M=t(11870),k=t(71299),l=t(21527),T=t(5877),x=t(57471),p=t(18863),s=t(30120);function e(a,i){if(!(this instanceof e))return new e(a,i);this.traces=[],this.passes={},this.regl=a,this.scatter=M(a),this.canvas=this.scatter.canvas}function o(a,i,c){return(null!=a.id?a.id:a)<<16|(255&i)<<8|255&c}function r(a,i,c){var h,f,b,v,g=a[i],y=a[c];return g.length>2?(h=g[1],f=g[3]):g.length?(h=g[0],f=g[1]):(h=g.y,f=g.y+g.height),y.length>2?(b=y[0],v=y[2]):y.length?(b=y[0],v=y[1]):(b=y.x,v=y.x+y.width),[b,h,v,f]}function n(a){if("number"==typeof a)return[a,a,a,a];if(2===a.length)return[a[0],a[1],a[0],a[1]];var i=p(a);return[i.x,i.y,i.x+i.width,i.y+i.height]}$.exports=e,e.prototype.render=function(){for(var a,i=this,c=[],h=arguments.length;h--;)c[h]=arguments[h];return c.length&&(a=this).update.apply(a,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=T(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,T(function(){i.dirty=!1})),this)},e.prototype.update=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=0;h<i.length;h++)this.updateItem(h,i[h]);this.traces=this.traces.filter(Boolean);for(var f=[],b=0,v=0;v<this.traces.length;v++){for(var g=this.traces[v],y=this.traces[v].passes,d=0;d<y.length;d++)f.push(this.passes[y[d]]);g.passOffset=b,b+=g.passes.length}return(a=this.scatter).update.apply(a,f),this}},e.prototype.updateItem=function(a,i){var c=this.regl;if(null===i)return this.traces[a]=null,this;if(!i)return this;var h,f=k(i,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),b=this.traces[a]||(this.traces[a]={id:a,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=f.color&&(b.color=f.color),null!=f.size&&(b.size=f.size),null!=f.marker&&(b.marker=f.marker),null!=f.borderColor&&(b.borderColor=f.borderColor),null!=f.borderSize&&(b.borderSize=f.borderSize),null!=f.opacity&&(b.opacity=f.opacity),f.viewport&&(b.viewport=p(f.viewport)),null!=f.diagonal&&(b.diagonal=f.diagonal),null!=f.upper&&(b.upper=f.upper),null!=f.lower&&(b.lower=f.lower),f.data){b.buffer(s(f.data)),b.columns=f.data.length,b.count=f.data[0].length,b.bounds=[];for(var v=0;v<b.columns;v++)b.bounds[v]=l(f.data[v],1)}f.range&&(b.range=f.range,h=b.range&&"number"!=typeof b.range[0]),f.domain&&(b.domain=f.domain);var g=!1;null!=f.padding&&(Array.isArray(f.padding)&&f.padding.length===b.columns&&"number"==typeof f.padding[f.padding.length-1]?(b.padding=f.padding.map(n),g=!0):b.padding=n(f.padding));var y=b.columns,d=b.count,m=b.viewport.width,w=b.viewport.height,u=b.viewport.x,S=b.viewport.y,_=m/y,E=w/y;b.passes=[];for(var L=0;L<y;L++)for(var C=0;C<y;C++)if((b.diagonal||C!==L)&&(b.upper||!(L>C))&&(b.lower||!(L<C))){var P=o(b.id,L,C),z=this.passes[P]||(this.passes[P]={});if(f.data&&(z.positions=f.transpose?{x:{buffer:b.buffer,offset:C,count:d,stride:y},y:{buffer:b.buffer,offset:L,count:d,stride:y}}:{x:{buffer:b.buffer,offset:C*d,count:d},y:{buffer:b.buffer,offset:L*d,count:d}},z.bounds=r(b.bounds,L,C)),f.domain||f.viewport||f.data){var j=g?r(b.padding,L,C):b.padding;if(b.domain){var R=r(b.domain,L,C);z.viewport=[u+R[0]*m+j[0],S+R[1]*w+j[1],u+R[2]*m-j[2],S+R[3]*w-j[3]]}else z.viewport=[u+C*_+_*j[0],S+L*E+E*j[1],u+(C+1)*_-_*j[2],S+(L+1)*E-E*j[3]]}f.color&&(z.color=b.color),f.size&&(z.size=b.size),f.marker&&(z.marker=b.marker),f.borderSize&&(z.borderSize=b.borderSize),f.borderColor&&(z.borderColor=b.borderColor),f.opacity&&(z.opacity=b.opacity),f.range&&(z.range=h?r(b.range,L,C):b.range||z.bounds),b.passes.push(P)}return this},e.prototype.draw=function(){for(var a,i=[],c=arguments.length;c--;)i[c]=arguments[c];if(i.length){for(var h=[],f=0;f<i.length;f++)if("number"==typeof i[f]){var b=this.traces[i[f]],g=b.passOffset;h.push.apply(h,x(g,g+b.passes.length))}else if(i[f].length){var y=i[f],d=this.traces[f],m=d.passes,w=d.passOffset;m=m.map(function(u,S){h[w+S]=y})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},e.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function($){$.exports=function(){function I(Ne,Je){this.id=ne++,this.type=Ne,this.data=Je}function t(Ne){if(0===Ne.length)return[];var Je=Ne.charAt(0),at=Ne.charAt(Ne.length-1);if(1<Ne.length&&Je===at&&('"'===Je||"'"===Je))return['"'+Ne.substr(1,Ne.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Je=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ne))return t(Ne.substr(0,Je.index)).concat(t(Je[1])).concat(t(Ne.substr(Je.index+Je[0].length)));if(1===(Je=Ne.split(".")).length)return['"'+Ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ne=[],at=0;at<Je.length;++at)Ne=Ne.concat(t(Je[at]));return Ne}function M(Ne){return"["+t(Ne).join("][")+"]"}function k(Ne){return"string"==typeof Ne?Ne.split():Ne}function l(Ne){return"string"==typeof Ne?document.querySelector(Ne):Ne}function x(Ne,Je){for(var at=Array(Ne),Se=0;Se<Ne;++Se)at[Se]=Je(Se);return at}function p(Ne){var Je,at;return Je=(65535<Ne)<<4,Je|=at=(255<(Ne>>>=Je))<<3,(Je|=at=(15<(Ne>>>=at))<<2)|(at=(3<(Ne>>>=at))<<1)|Ne>>>at>>1}function s(){function Ne(Se){e:{for(var ze=16;268435456>=ze;ze*=16)if(Se<=ze){Se=ze;break e}Se=0}return 0<(ze=at[p(Se)>>2]).length?ze.pop():new ArrayBuffer(Se)}function Je(Se){at[p(Se.byteLength)>>2].push(Se)}var at=x(8,function(){return[]});return{alloc:Ne,free:Je,allocType:function(Se,ze){var Ke=null;switch(Se){case 5120:Ke=new Int8Array(Ne(ze),0,ze);break;case 5121:Ke=new Uint8Array(Ne(ze),0,ze);break;case 5122:Ke=new Int16Array(Ne(2*ze),0,ze);break;case 5123:Ke=new Uint16Array(Ne(2*ze),0,ze);break;case 5124:Ke=new Int32Array(Ne(4*ze),0,ze);break;case 5125:Ke=new Uint32Array(Ne(4*ze),0,ze);break;case 5126:Ke=new Float32Array(Ne(4*ze),0,ze);break;default:return null}return Ke.length!==ze?Ke.subarray(0,ze):Ke},freeType:function(Se){Je(Se.buffer)}}}function e(Ne){return!!Ne&&"object"==typeof Ne&&Array.isArray(Ne.shape)&&Array.isArray(Ne.stride)&&"number"==typeof Ne.offset&&Ne.shape.length===Ne.stride.length&&(Array.isArray(Ne.data)||me(Ne.data))}function o(Ne,Je,at,Se,ze,Ke){for(var it=0;it<Je;++it)for(var ct=Ne[it],mt=0;mt<at;++mt)for(var Lt=ct[mt],At=0;At<Se;++At)ze[Ke++]=Lt[At]}function r(Ne,Je,at,Se,ze){for(var Ke=1,it=at+1;it<Je.length;++it)Ke*=Je[it];var ct=Je[at];if(Je.length-at==4){var mt=Je[at+1],Lt=Je[at+2];for(Je=Je[at+3],it=0;it<ct;++it)o(Ne[it],mt,Lt,Je,Se,ze),ze+=Ke}else for(it=0;it<ct;++it)r(Ne[it],Je,at+1,Se,ze),ze+=Ke}function n(Ne){return 0|Ee[Object.prototype.toString.call(Ne)]}function a(Ne,Je){for(var at=0;at<Je.length;++at)Ne[at]=Je[at]}function i(Ne,Je,at,Se,ze,Ke,it){for(var ct=0,mt=0;mt<at;++mt)for(var Lt=0;Lt<Se;++Lt)Ne[ct++]=Je[ze*mt+Ke*Lt+it]}function f(Ne){for(var Je=pe.allocType(5123,Ne.length),at=0;at<Ne.length;++at)if(isNaN(Ne[at]))Je[at]=65535;else if(Ne[at]===1/0)Je[at]=31744;else if(Ne[at]===-1/0)Je[at]=64512;else{he[0]=Ne[at];var Se=(Ke=ye[0])>>>31<<15,ze=(Ke<<1>>>24)-127,Ke=Ke>>13&1023;Je[at]=-24>ze?Se:-14>ze?Se+(Ke+1024>>-14-ze):15<ze?Se+31744:Se+(ze+15<<10)+Ke}return Je}function b(Ne){return Array.isArray(Ne)||me(Ne)}function v(Ne){return"[object "+Ne+"]"}function g(Ne){return Array.isArray(Ne)&&(0===Ne.length||"number"==typeof Ne[0])}function y(Ne){return!(!Array.isArray(Ne)||0===Ne.length||!b(Ne[0]))}function d(Ne){return Object.prototype.toString.call(Ne)}function m(Ne){if(!Ne)return!1;var Je=d(Ne);return 0<=Ve.indexOf(Je)||g(Ne)||y(Ne)||e(Ne)}function w(Ne,Je){36193===Ne.type?(Ne.data=f(Je),pe.freeType(Je)):Ne.data=Je}function u(Ne,Je,at,Se,ze,Ke){if(Ne=void 0!==nt[Ne]?nt[Ne]:Pe[Ne]*tt[Je],Ke&&(Ne*=6),ze){for(Se=0;1<=at;)Se+=Ne*at*at,at/=2;return Se}return Ne*at*Se}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(Ne,Je){return Ne>>>Je|Ne<<32-Je}function j(Ne,Je){var at=(65535&Ne)+(65535&Je);return(Ne>>16)+(Je>>16)+(at>>16)<<16|65535&at}function R(Ne){return Array.prototype.slice.call(Ne)}function V(Ne){return R(Ne).join("")}function B(Ne){return Array.isArray(Ne)||me(Ne)||e(Ne)}function N(Ne){return Ne.sort(function(Je,at){return"viewport"===Je?-1:"viewport"===at?1:Je<at?-1:1})}function U(Ne,Je,at,Se){this.thisDep=Ne,this.contextDep=Je,this.propDep=at,this.append=Se}function J(Ne){return Ne&&!(Ne.thisDep||Ne.contextDep||Ne.propDep)}function Y(Ne){return new U(!1,!1,!1,Ne)}function q(Ne,Je){var at=Ne.type;if(0===at)return new U(!0,1<=(at=Ne.data.length),2<=at,Je);if(4===at)return new U((at=Ne.data).thisDep,at.contextDep,at.propDep,Je);if(5===at)return new U(!1,!1,!1,Je);if(6===at){for(var Se=at=!1,ze=!1,Ke=0;Ke<Ne.data.length;++Ke){var it=Ne.data[Ke];1===it.type?ze=!0:2===it.type?Se=!0:3===it.type?at=!0:0===it.type?(at=!0,1<=(it=it.data)&&(Se=!0),2<=it&&(ze=!0)):4===it.type&&(at=at||it.data.thisDep,Se=Se||it.data.contextDep,ze=ze||it.data.propDep)}return new U(at,Se,ze,Je)}return new U(3===at,2===at,1===at,Je)}function H(Ne,Je,at,Se,ze,Ke,it,ct,mt,Lt,At,ht,Et,gt,kt,It){function Ut(zt){return zt.replace(".","_")}function Nt(zt,Zt,rn){var Ln=Ut(zt);qn.push(zt),Rn[Ln]=Tn[Ln]=!!rn,Un[Ln]=Zt}function qt(zt,Zt,rn){var Ln=Ut(zt);qn.push(zt),Array.isArray(rn)?(Tn[Ln]=rn.slice(),Rn[Ln]=rn.slice()):Tn[Ln]=Rn[Ln]=rn,Yn[Ln]=Zt}function Xt(){var zt=function D(Ne){function Je(){var At=[],ht=[];return Q(function(){At.push.apply(At,R(arguments))},{def:function(){var Et="v"+ze++;return ht.push(Et),0<arguments.length&&(At.push(Et,"="),At.push.apply(At,R(arguments)),At.push(";")),Et},toString:function(){return V([0<ht.length?"var "+ht.join(",")+";":"",V(At)])}})}function at(){function At(It,Ut){Et(It,Ut,"=",ht.def(It,Ut),";")}var ht=Je(),Et=Je(),gt=ht.toString,kt=Et.toString;return Q(function(){ht.apply(ht,R(arguments))},{def:ht.def,entry:ht,exit:Et,save:At,set:function(It,Ut,Nt){At(It,Ut),ht(It,Ut,"=",Nt,";")},toString:function(){return gt()+kt()}})}var Se=Ne&&Ne.cache,ze=0,Ke=[],it=[],ct=[],mt=Je(),Lt={};return{global:mt,link:function(At,ht){var Et=ht&&ht.stable;if(!Et)for(var gt=0;gt<it.length;++gt)if(it[gt]===At&&!ct[gt])return Ke[gt];return gt="g"+ze++,Ke.push(gt),it.push(At),ct.push(Et),gt},block:Je,proc:function(At,ht){function Et(){var Ut="a"+gt.length;return gt.push(Ut),Ut}var gt=[];ht=ht||0;for(var kt=0;kt<ht;++kt)Et();var It=(kt=at()).toString;return Lt[At]=Q(kt,{arg:Et,toString:function(){return V(["function(",gt.join(),"){",It(),"}"])}})},scope:at,cond:function(){var At=V(arguments),ht=at(),Et=at(),gt=ht.toString,kt=Et.toString;return Q(ht,{then:function(){return ht.apply(ht,R(arguments)),this},else:function(){return Et.apply(Et,R(arguments)),this},toString:function(){var It=kt();return It&&(It="else{"+It+"}"),V(["if(",At,"){",gt(),"}",It])}})},compile:function(){var At=['"use strict";',mt,"return {"];Object.keys(Lt).forEach(function(gt){At.push('"',gt,'":',Lt[gt].toString(),",")}),At.push("}");var ht,Et=V(At).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Se&&(ht=function(gt){for(var kt,It="",Ut=0;Ut<gt.length;Ut++)kt=gt.charCodeAt(Ut),It+="0123456789abcdef".charAt(kt>>>4&15)+"0123456789abcdef".charAt(15&kt);return It}(function(gt){for(var kt=Array(gt.length>>2),It=0;It<kt.length;It++)kt[It]=0;for(It=0;It<8*gt.length;It+=8)kt[It>>5]|=(255&gt.charCodeAt(It/8))<<24-It%32;var Ut,Nt,qt,Xt,Kt,fn,nn,xn,jn,mn,en,vn=8*gt.length;for(gt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],It=Array(64),kt[vn>>5]|=128<<24-vn%32,kt[15+(vn+64>>9<<4)]=vn,xn=0;xn<kt.length;xn+=16){for(vn=gt[0],Ut=gt[1],Nt=gt[2],qt=gt[3],Xt=gt[4],Kt=gt[5],fn=gt[6],nn=gt[7],jn=0;64>jn;jn++){var on;16>jn?It[jn]=kt[jn+xn]:(mn=jn,en=j(en=z(en=It[jn-2],17)^z(en,19)^en>>>10,It[jn-7]),on=z(on=It[jn-15],7)^z(on,18)^on>>>3,It[mn]=j(j(en,on),It[jn-16])),mn=j(j(j(j(nn,mn=z(mn=Xt,6)^z(mn,11)^z(mn,25)),Xt&Kt^~Xt&fn),pt[jn]),It[jn]),en=j(nn=z(nn=vn,2)^z(nn,13)^z(nn,22),vn&Ut^vn&Nt^Ut&Nt),nn=fn,fn=Kt,Kt=Xt,Xt=j(qt,mn),qt=Nt,Nt=Ut,Ut=vn,vn=j(mn,en)}gt[0]=j(vn,gt[0]),gt[1]=j(Ut,gt[1]),gt[2]=j(Nt,gt[2]),gt[3]=j(qt,gt[3]),gt[4]=j(Xt,gt[4]),gt[5]=j(Kt,gt[5]),gt[6]=j(fn,gt[6]),gt[7]=j(nn,gt[7])}for(kt="",It=0;It<32*gt.length;It+=8)kt+=String.fromCharCode(gt[It>>5]>>>24-It%32&255);return kt}(function(gt){for(var kt,It,Ut="",Nt=-1;++Nt<gt.length;)kt=gt.charCodeAt(Nt),It=Nt+1<gt.length?gt.charCodeAt(Nt+1):0,55296<=kt&&56319>=kt&&56320<=It&&57343>=It&&(kt=65536+((1023&kt)<<10)+(1023&It),Nt++),127>=kt?Ut+=String.fromCharCode(kt):2047>=kt?Ut+=String.fromCharCode(192|kt>>>6&31,128|63&kt):65535>=kt?Ut+=String.fromCharCode(224|kt>>>12&15,128|kt>>>6&63,128|63&kt):2097151>=kt&&(Ut+=String.fromCharCode(240|kt>>>18&7,128|kt>>>12&63,128|kt>>>6&63,128|63&kt));return Ut}(Et))),Se[ht])?Se[ht].apply(null,it):(Et=Function.apply(null,Ke.concat(Et)),Se&&(Se[ht]=Et),Et.apply(null,it))}}}({cache:kt}),Zt=zt.link,rn=zt.global;zt.id=Mn++,zt.batchId="0";var Ln=Zt(or),Sn=zt.shared={props:"a0"};Object.keys(or).forEach(function(hn){Sn[hn]=rn.def(Ln,".",hn)});var wn=zt.next={},ln=zt.current={};Object.keys(Yn).forEach(function(hn){Array.isArray(Tn[hn])&&(wn[hn]=rn.def(Sn.next,".",hn),ln[hn]=rn.def(Sn.current,".",hn))});var gn=zt.constants={};Object.keys(Jt).forEach(function(hn){gn[hn]=rn.def(JSON.stringify(Jt[hn]))}),zt.invoke=function(hn,bn){switch(bn.type){case 0:var In=["this",Sn.context,Sn.props,zt.batchId];return hn.def(Zt(bn.data),".call(",In.slice(0,Math.max(bn.data.length+1,4)),")");case 1:return hn.def(Sn.props,bn.data);case 2:return hn.def(Sn.context,bn.data);case 3:return hn.def("this",bn.data);case 4:return bn.data.append(zt,hn),bn.data.ref;case 5:return bn.data.toString();case 6:return bn.data.map(function(Hn){return zt.invoke(hn,Hn)})}},zt.attribCache={};var un={};return zt.scopeAttrib=function(hn){if((hn=Je.id(hn))in un)return un[hn];var bn=Lt.scope[hn];return bn||(bn=Lt.scope[hn]=new lr),un[hn]=Zt(bn)},zt}function jn(zt,Zt,rn,Ln,Sn){function wn(nr){var tr=gn[nr];tr&&(hn[nr]=tr)}var nr,ar,ir,cr,ln=function(nr,tr){if("string"==typeof(ar=nr.static).frag&&"string"==typeof ar.vert){if(0<Object.keys(tr.dynamic).length)return null;var ar=tr.static,ir=Object.keys(ar);if(0<ir.length&&"number"==typeof ar[ir[0]]){for(var cr=[],br=0;br<ir.length;++br)cr.push([0|ar[ir[br]],ir[br]]);return cr}}return null}(zt,Zt),gn=function(nr,tr,ar){function ir(Tr){if(Tr in cr){var sr=cr[Tr];Tr=!0;var kr,Rr,ei=0|sr.x,fi=0|sr.y;return"width"in sr?kr=0|sr.width:Tr=!1,"height"in sr?Rr=0|sr.height:Tr=!1,new U(!Tr&&tr&&tr.thisDep,!Tr&&tr&&tr.contextDep,!Tr&&tr&&tr.propDep,function(Gi,Li){var si=Gi.shared.context,ua=kr;"width"in sr||(ua=Li.def(si,".","framebufferWidth","-",ei));var Ma=Rr;return"height"in sr||(Ma=Li.def(si,".","framebufferHeight","-",fi)),[ei,fi,ua,Ma]})}if(Tr in br){var di=br[Tr];return Tr=q(di,function(Gi,Li){var si=Gi.invoke(Li,di),ua=Gi.shared.context,Ma=Li.def(si,".x|0"),ro=Li.def(si,".y|0");return[Ma,ro,Li.def('"width" in ',si,"?",si,".width|0:","(",ua,".","framebufferWidth","-",Ma,")"),si=Li.def('"height" in ',si,"?",si,".height|0:","(",ua,".","framebufferHeight","-",ro,")")]}),tr&&(Tr.thisDep=Tr.thisDep||tr.thisDep,Tr.contextDep=Tr.contextDep||tr.contextDep,Tr.propDep=Tr.propDep||tr.propDep),Tr}return tr?new U(tr.thisDep,tr.contextDep,tr.propDep,function(Gi,Li){var si=Gi.shared.context;return[0,0,Li.def(si,".","framebufferWidth"),Li.def(si,".","framebufferHeight")]}):null}var cr=nr.static,br=nr.dynamic;if(nr=ir("viewport")){var xr=nr;nr=new U(nr.thisDep,nr.contextDep,nr.propDep,function(Tr,sr){var kr=xr.append(Tr,sr),Rr=Tr.shared.context;return sr.set(Rr,".viewportWidth",kr[2]),sr.set(Rr,".viewportHeight",kr[3]),kr})}return{viewport:nr,scissor_box:ir("scissor.box")}}(zt,In=function Kt(zt,Zt){var rn=zt.static,Ln=zt.dynamic;if("framebuffer"in rn){var Sn=rn.framebuffer;return Sn?(Sn=ct.getFramebuffer(Sn),Y(function(ln,gn){var un=ln.link(Sn),hn=ln.shared;return gn.set(hn.framebuffer,".next",un),gn.set(hn=hn.context,".framebufferWidth",un+".width"),gn.set(hn,".framebufferHeight",un+".height"),un})):Y(function(ln,gn){var un=ln.shared;return gn.set(un.framebuffer,".next","null"),gn.set(un=un.context,".framebufferWidth",un+".drawingBufferWidth"),gn.set(un,".framebufferHeight",un+".drawingBufferHeight"),"null"})}if("framebuffer"in Ln){var wn=Ln.framebuffer;return q(wn,function(ln,gn){var un=ln.invoke(gn,wn),hn=ln.shared,bn=hn.framebuffer;return un=gn.def(bn,".getFramebuffer(",un,")"),gn.set(bn,".next",un),gn.set(hn=hn.context,".framebufferWidth",un+"?"+un+".width:"+hn+".drawingBufferWidth"),gn.set(hn,".framebufferHeight",un+"?"+un+".height:"+hn+".drawingBufferHeight"),un})}return null}(zt)),un=function nn(zt,Zt){function rn(Gn,nr){if(Gn in Ln){var tr=0|Ln[Gn];return nr?wn.offset=tr:wn.instances=tr,Y(function(ir,cr){return nr&&(ir.OFFSET=tr),tr})}if(Gn in Sn){var ar=Sn[Gn];return q(ar,function(ir,cr){var br=ir.invoke(cr,ar);return nr&&(ir.OFFSET=br),br})}if(nr){if(un)return Y(function(ir,cr){return ir.OFFSET=0});if(ln)return new U(gn.thisDep,gn.contextDep,gn.propDep,function(ir,cr){return cr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.offset:0")})}else if(ln)return new U(gn.thisDep,gn.contextDep,gn.propDep,function(ir,cr){return cr.def(ir.shared.vao+".currentVAO?"+ir.shared.vao+".currentVAO.instances:-1")});return null}var Ln=zt.static,Sn=zt.dynamic,wn={},ln=!1,gn=function(){if("vao"in Ln){var Gn=Ln.vao;return null!==Gn&&null===Lt.getVAO(Gn)&&(Gn=Lt.createVAO(Gn)),ln=!0,wn.vao=Gn,Y(function(tr){var ar=Lt.getVAO(Gn);return ar?tr.link(ar):"null"})}if("vao"in Sn){ln=!0;var nr=Sn.vao;return q(nr,function(tr,ar){var ir=tr.invoke(ar,nr);return ar.def(tr.shared.vao+".getVAO("+ir+")")})}return null}(),un=!1,hn=function(){if("elements"in Ln){var Gn=Ln.elements;if(wn.elements=Gn,B(Gn)){var nr=wn.elements=Ke.create(Gn,!0);Gn=Ke.getElements(nr),un=!0}else Gn&&(Gn=Ke.getElements(Gn),un=!0);return(nr=Y(function(ar,ir){if(Gn){var cr=ar.link(Gn);return ar.ELEMENTS=cr}return ar.ELEMENTS=null})).value=Gn,nr}if("elements"in Sn){un=!0;var tr=Sn.elements;return q(tr,function(ar,ir){var cr=(br=ar.shared).isBufferArgs,br=br.elements,xr=ar.invoke(ir,tr),Tr=ir.def("null");return cr=ir.def(cr,"(",xr,")"),xr=ar.cond(cr).then(Tr,"=",br,".createStream(",xr,");").else(Tr,"=",br,".getElements(",xr,");"),ir.entry(xr),ir.exit(ar.cond(cr).then(br,".destroyStream(",Tr,");")),ar.ELEMENTS=Tr})}return ln?new U(gn.thisDep,gn.contextDep,gn.propDep,function(ar,ir){return ir.def(ar.shared.vao+".currentVAO?"+ar.shared.elements+".getElements("+ar.shared.vao+".currentVAO.elements):null")}):null}(),bn=rn("offset",!0),In=function(){if("primitive"in Ln){var Gn=Ln.primitive;return wn.primitive=Gn,Y(function(tr,ar){return oe[Gn]})}if("primitive"in Sn){var nr=Sn.primitive;return q(nr,function(tr,ar){var ir=tr.constants.primTypes,cr=tr.invoke(ar,nr);return ar.def(ir,"[",cr,"]")})}return un?J(hn)?Y(hn.value?function(tr,ar){return ar.def(tr.ELEMENTS,".primType")}:function(){return 4}):new U(hn.thisDep,hn.contextDep,hn.propDep,function(tr,ar){var ir=tr.ELEMENTS;return ar.def(ir,"?",ir,".primType:",4)}):ln?new U(gn.thisDep,gn.contextDep,gn.propDep,function(tr,ar){return ar.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.primitive:4")}):null}(),Hn=function(){if("count"in Ln){var Gn=0|Ln.count;return wn.count=Gn,Y(function(){return Gn})}if("count"in Sn){var nr=Sn.count;return q(nr,function(tr,ar){return tr.invoke(ar,nr)})}return un?J(hn)?hn?bn?new U(bn.thisDep,bn.contextDep,bn.propDep,function(tr,ar){return ar.def(tr.ELEMENTS,".vertCount-",tr.OFFSET)}):Y(function(tr,ar){return ar.def(tr.ELEMENTS,".vertCount")}):Y(function(){return-1}):new U(hn.thisDep||bn.thisDep,hn.contextDep||bn.contextDep,hn.propDep||bn.propDep,function(tr,ar){var ir=tr.ELEMENTS;return tr.OFFSET?ar.def(ir,"?",ir,".vertCount-",tr.OFFSET,":-1"):ar.def(ir,"?",ir,".vertCount:-1")}):ln?new U(gn.thisDep,gn.contextDep,gn.propDep,function(tr,ar){return ar.def(tr.shared.vao,".currentVAO?",tr.shared.vao,".currentVAO.count:-1")}):null}(),Wn=rn("instances",!1);return{elements:hn,primitive:In,count:Hn,instances:Wn,offset:bn,vao:gn,vaoActive:ln,elementsActive:un,static:wn}}(zt),hn=(ar=(nr=zt).static,ir=nr.dynamic,cr={},qn.forEach(function(br){function xr(sr,kr){if(br in ar){var Rr=sr(ar[br]);cr[Tr]=Y(function(){return Rr})}else if(br in ir){var ei=ir[br];cr[Tr]=q(ei,function(fi,di){return kr(fi,di,fi.invoke(di,ei))})}}var Tr=Ut(br);switch(br){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return xr(function(sr){return sr},function(sr,kr,Rr){return Rr});case"depth.func":return xr(function(sr){return jt[sr]},function(sr,kr,Rr){return kr.def(sr.constants.compareFuncs,"[",Rr,"]")});case"depth.range":return xr(function(sr){return sr},function(sr,kr,Rr){return[kr.def("+",Rr,"[0]"),kr=kr.def("+",Rr,"[1]")]});case"blend.func":return xr(function(sr){return[Ot["srcRGB"in sr?sr.srcRGB:sr.src],Ot["dstRGB"in sr?sr.dstRGB:sr.dst],Ot["srcAlpha"in sr?sr.srcAlpha:sr.src],Ot["dstAlpha"in sr?sr.dstAlpha:sr.dst]]},function(sr,kr,Rr){function ei(Li,si){return kr.def('"',Li,si,'" in ',Rr,"?",Rr,".",Li,si,":",Rr,".",Li)}sr=sr.constants.blendFuncs;var fi=ei("src","RGB"),di=ei("dst","RGB"),Gi=(fi=kr.def(sr,"[",fi,"]"),kr.def(sr,"[",ei("src","Alpha"),"]"));return[fi,di=kr.def(sr,"[",di,"]"),Gi,sr=kr.def(sr,"[",ei("dst","Alpha"),"]")]});case"blend.equation":return xr(function(sr){return"string"==typeof sr?[hr[sr],hr[sr]]:"object"==typeof sr?[hr[sr.rgb],hr[sr.alpha]]:void 0},function(sr,kr,Rr){var ei=sr.constants.blendEquations,fi=kr.def(),di=kr.def();return(sr=sr.cond("typeof ",Rr,'==="string"')).then(fi,"=",di,"=",ei,"[",Rr,"];"),sr.else(fi,"=",ei,"[",Rr,".rgb];",di,"=",ei,"[",Rr,".alpha];"),kr(sr),[fi,di]});case"blend.color":return xr(function(sr){return x(4,function(kr){return+sr[kr]})},function(sr,kr,Rr){return x(4,function(ei){return kr.def("+",Rr,"[",ei,"]")})});case"stencil.mask":return xr(function(sr){return 0|sr},function(sr,kr,Rr){return kr.def(Rr,"|0")});case"stencil.func":return xr(function(sr){return[jt[sr.cmp||"keep"],sr.ref||0,"mask"in sr?sr.mask:-1]},function(sr,kr,Rr){return[sr=kr.def('"cmp" in ',Rr,"?",sr.constants.compareFuncs,"[",Rr,".cmp]",":",7680),kr.def(Rr,".ref|0"),kr=kr.def('"mask" in ',Rr,"?",Rr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return xr(function(sr){return["stencil.opBack"===br?1029:1028,Dt[sr.fail||"keep"],Dt[sr.zfail||"keep"],Dt[sr.zpass||"keep"]]},function(sr,kr,Rr){function ei(di){return kr.def('"',di,'" in ',Rr,"?",fi,"[",Rr,".",di,"]:",7680)}var fi=sr.constants.stencilOps;return["stencil.opBack"===br?1029:1028,ei("fail"),ei("zfail"),ei("zpass")]});case"polygonOffset.offset":return xr(function(sr){return[0|sr.factor,0|sr.units]},function(sr,kr,Rr){return[kr.def(Rr,".factor|0"),kr=kr.def(Rr,".units|0")]});case"cull.face":return xr(function(sr){var kr=0;return"front"===sr?kr=1028:"back"===sr&&(kr=1029),kr},function(sr,kr,Rr){return kr.def(Rr,'==="front"?',1028,":",1029)});case"frontFace":return xr(function(sr){return Ye[sr]},function(sr,kr,Rr){return kr.def(Rr+'==="cw"?2304:2305')});case"colorMask":return xr(function(sr){return sr.map(function(kr){return!!kr})},function(sr,kr,Rr){return x(4,function(ei){return"!!"+Rr+"["+ei+"]"})});case"sample.coverage":return xr(function(sr){return["value"in sr?sr.value:1,!!sr.invert]},function(sr,kr,Rr){return[kr.def('"value" in ',Rr,"?+",Rr,".value:1"),kr=kr.def("!!",Rr,".invert")]})}}),cr),bn=function fn(zt,Zt,rn){function Ln(hn){if(hn in Sn){var bn=Je.id(Sn[hn]);return(hn=Y(function(){return bn})).id=bn,hn}if(hn in wn){var In=wn[hn];return q(In,function(Hn,Wn){var Gn=Hn.invoke(Wn,In);return Wn.def(Hn.shared.strings,".id(",Gn,")")})}return null}var Sn=zt.static,wn=zt.dynamic,ln=Ln("frag"),gn=Ln("vert"),un=null;return J(ln)&&J(gn)?(un=At.program(gn.id,ln.id,null,rn),zt=Y(function(hn,bn){return hn.link(un)})):zt=new U(ln&&ln.thisDep||gn&&gn.thisDep,ln&&ln.contextDep||gn&&gn.contextDep,ln&&ln.propDep||gn&&gn.propDep,function(hn,bn){var In,Hn,Wn=hn.shared.shader;return In=ln?ln.append(hn,bn):bn.def(Wn,".","frag"),Hn=gn?gn.append(hn,bn):bn.def(Wn,".","vert"),bn.def(Wn+".program("+Hn+","+In+")")}),{frag:ln,vert:gn,progVar:zt,program:un}}(zt,0,ln);wn("viewport"),wn(Ut("scissor.box"));var In,Hn=0<Object.keys(hn).length;if((In={framebuffer:In,draw:un,shader:bn,state:hn,dirty:Hn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(nr){var tr,ar=nr.static;if(nr=nr.dynamic,"profile"in ar){var ir=!!ar.profile;(tr=Y(function(br,xr){return ir})).enable=ir}else if("profile"in nr){var cr=nr.profile;tr=q(cr,function(br,xr){return br.invoke(xr,cr)})}return tr}(zt),In.uniforms=function(nr,tr){var ar=nr.static,ir=nr.dynamic,cr={};return Object.keys(ar).forEach(function(br){var xr,Tr=ar[br];if("number"==typeof Tr||"boolean"==typeof Tr)xr=Y(function(){return Tr});else if("function"==typeof Tr){var sr=Tr._reglType;"texture2d"===sr||"textureCube"===sr?xr=Y(function(kr){return kr.link(Tr)}):"framebuffer"!==sr&&"framebufferCube"!==sr||(xr=Y(function(kr){return kr.link(Tr.color[0])}))}else b(Tr)&&(xr=Y(function(kr){return kr.global.def("[",x(Tr.length,function(Rr){return Tr[Rr]}),"]")}));xr.value=Tr,cr[br]=xr}),Object.keys(ir).forEach(function(br){var xr=ir[br];cr[br]=q(xr,function(Tr,sr){return Tr.invoke(sr,xr)})}),cr}(rn),In.drawVAO=In.scopeVAO=un.vao,!In.drawVAO&&bn.program&&!ln&&at.angle_instanced_arrays&&un.static.elements){var Wn=!0;if(zt=bn.program.attributes.map(function(nr){return nr=Zt.static[nr],Wn=Wn&&!!nr,nr}),Wn&&0<zt.length){var Gn=Lt.getVAO(Lt.createVAO({attributes:zt,elements:un.static.elements}));In.drawVAO=new U(null,null,null,function(nr,tr){return nr.link(Gn)}),In.useVAO=!0}}return ln?In.useVAO=!0:In.attributes=function xn(zt,Zt){var rn=zt.static,Ln=zt.dynamic,Sn={};return Object.keys(rn).forEach(function(wn){var ln=rn[wn],gn=Je.id(wn),un=new lr;if(B(ln))un.state=1,un.buffer=ze.getBuffer(ze.create(ln,34962,!1,!0)),un.type=0;else if(bn=ze.getBuffer(ln))un.state=1,un.buffer=bn,un.type=0;else if("constant"in ln){var hn=ln.constant;un.buffer="null",un.state=2,"number"==typeof hn?un.x=hn:Pt.forEach(function(tr,ar){ar<hn.length&&(un[tr]=hn[ar])})}else{var bn=B(ln.buffer)?ze.getBuffer(ze.create(ln.buffer,34962,!1,!0)):ze.getBuffer(ln.buffer),In=0|ln.offset,Hn=0|ln.stride,Wn=0|ln.size,Gn=!!ln.normalized,nr=0;"type"in ln&&(nr=de[ln.type]),ln=0|ln.divisor,un.buffer=bn,un.state=1,un.size=Wn,un.normalized=Gn,un.type=nr||bn.dtype,un.offset=In,un.stride=Hn,un.divisor=ln}Sn[wn]=Y(function(tr,ar){var ir=tr.attribCache;if(gn in ir)return ir[gn];var cr={isStream:!1};return Object.keys(un).forEach(function(br){cr[br]=un[br]}),un.buffer&&(cr.buffer=tr.link(un.buffer),cr.type=cr.type||cr.buffer+".dtype"),ir[gn]=cr})}),Object.keys(Ln).forEach(function(wn){var ln=Ln[wn];Sn[wn]=q(ln,function(gn,un){function hn(ir){un(Gn[ir],"=",bn,".",ir,"|0;")}var bn=gn.invoke(un,ln),In=gn.shared,Hn=gn.constants,Wn=In.isBufferArgs,Gn=(In=In.buffer,{isStream:un.def(!1)}),nr=new lr;nr.state=1,Object.keys(nr).forEach(function(ir){Gn[ir]=un.def(""+nr[ir])});var tr=Gn.buffer,ar=Gn.type;return un("if(",Wn,"(",bn,")){",Gn.isStream,"=true;",tr,"=",In,".createStream(",34962,",",bn,");",ar,"=",tr,".dtype;","}else{",tr,"=",In,".getBuffer(",bn,");","if(",tr,"){",ar,"=",tr,".dtype;",'}else if("constant" in ',bn,"){",Gn.state,"=",2,";","if(typeof "+bn+'.constant === "number"){',Gn[Pt[0]],"=",bn,".constant;",Pt.slice(1).map(function(ir){return Gn[ir]}).join("="),"=0;","}else{",Pt.map(function(ir,cr){return Gn[ir]+"="+bn+".constant.length>"+cr+"?"+bn+".constant["+cr+"]:0;"}).join(""),"}}else{","if(",Wn,"(",bn,".buffer)){",tr,"=",In,".createStream(",34962,",",bn,".buffer);","}else{",tr,"=",In,".getBuffer(",bn,".buffer);","}",ar,'="type" in ',bn,"?",Hn.glTypes,"[",bn,".type]:",tr,".dtype;",Gn.normalized,"=!!",bn,".normalized;"),hn("size"),hn("offset"),hn("stride"),hn("divisor"),un("}}"),un.exit("if(",Gn.isStream,"){",In,".destroyStream(",tr,");","}"),Gn})}),Sn}(Zt),In.context=function(nr){var tr=nr.static,ar=nr.dynamic,ir={};return Object.keys(tr).forEach(function(cr){var br=tr[cr];ir[cr]=Y(function(xr,Tr){return"number"==typeof br||"boolean"==typeof br?""+br:xr.link(br)})}),Object.keys(ar).forEach(function(cr){var br=ar[cr];ir[cr]=q(br,function(xr,Tr){return xr.invoke(Tr,br)})}),ir}(Ln),In}function mn(zt,Zt,rn){var Ln=zt.shared.context,Sn=zt.scope();Object.keys(rn).forEach(function(wn){Zt.save(Ln,"."+wn);var ln=rn[wn].append(zt,Zt);Array.isArray(ln)?Sn(Ln,".",wn,"=[",ln.join(),"];"):Sn(Ln,".",wn,"=",ln,";")}),Zt(Sn)}function en(zt,Zt,rn,Ln){var Sn,wn=(gn=zt.shared).gl,ln=gn.framebuffer;pn&&(Sn=Zt.def(gn.extensions,".webgl_draw_buffers"));var gn=(un=zt.constants).drawBuffer,un=un.backBuffer;zt=rn?rn.append(zt,Zt):Zt.def(ln,".next"),Ln||Zt("if(",zt,"!==",ln,".cur){"),Zt("if(",zt,"){",wn,".bindFramebuffer(",36160,",",zt,".framebuffer);"),pn&&Zt(Sn,".drawBuffersWEBGL(",gn,"[",zt,".colorAttachments.length]);"),Zt("}else{",wn,".bindFramebuffer(",36160,",null);"),pn&&Zt(Sn,".drawBuffersWEBGL(",un,");"),Zt("}",ln,".cur=",zt,";"),Ln||Zt("}")}function vn(zt,Zt,rn){var Ln=zt.shared,Sn=Ln.gl,wn=zt.current,ln=zt.next,gn=Ln.current,un=Ln.next,hn=zt.cond(gn,".dirty");qn.forEach(function(bn){var In,Hn;if(!((bn=Ut(bn))in rn.state))if(bn in ln){In=ln[bn],Hn=wn[bn];var Wn=x(Tn[bn].length,function(Gn){return hn.def(In,"[",Gn,"]")});hn(zt.cond(Wn.map(function(Gn,nr){return Gn+"!=="+Hn+"["+nr+"]"}).join("||")).then(Sn,".",Yn[bn],"(",Wn,");",Wn.map(function(Gn,nr){return Hn+"["+nr+"]="+Gn}).join(";"),";"))}else In=hn.def(un,".",bn),Wn=zt.cond(In,"!==",gn,".",bn),hn(Wn),bn in Un?Wn(zt.cond(In).then(Sn,".enable(",Un[bn],");").else(Sn,".disable(",Un[bn],");"),gn,".",bn,"=",In,";"):Wn(Sn,".",Yn[bn],"(",In,");",gn,".",bn,"=",In,";")}),0===Object.keys(rn.state).length&&hn(gn,".dirty=false;"),Zt(hn)}function on(zt,Zt,rn,Ln){var Sn,wn=zt.shared,ln=zt.current,gn=wn.current,un=wn.gl;N(Object.keys(rn)).forEach(function(hn){var bn=rn[hn];if(!Ln||Ln(bn)){var In=bn.append(zt,Zt);if(Un[hn]){var Hn=Un[hn];J(bn)?(Sn=zt.link(In,{stable:!0}),Zt(zt.cond(Sn).then(un,".enable(",Hn,");").else(un,".disable(",Hn,");")),Zt(gn,".",hn,"=",Sn,";")):(Zt(zt.cond(In).then(un,".enable(",Hn,");").else(un,".disable(",Hn,");")),Zt(gn,".",hn,"=",In,";"))}else if(b(In)){var Wn=ln[hn];Zt(un,".",Yn[hn],"(",In,");",In.map(function(Gn,nr){return Wn+"["+nr+"]="+Gn}).join(";"),";")}else J(bn)?(Sn=zt.link(In,{stable:!0}),Zt(un,".",Yn[hn],"(",Sn,");",gn,".",hn,"=",Sn,";")):Zt(un,".",Yn[hn],"(",In,");",gn,".",hn,"=",In,";")}})}function sn(zt,Zt){Gt&&(zt.instancing=Zt.def(zt.shared.extensions,".angle_instanced_arrays"))}function En(zt,Zt,rn,Ln,Sn){function wn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function ln(nr){nr(hn=Zt.def(),"=",wn(),";"),"string"==typeof Sn?nr(Hn,".count+=",Sn,";"):nr(Hn,".count++;"),gt&&(Ln?nr(bn=Zt.def(),"=",Gn,".getNumPendingQueries();"):nr(Gn,".beginQuery(",Hn,");"))}function gn(nr){nr(Hn,".cpuTime+=",wn(),"-",hn,";"),gt&&(Ln?nr(Gn,".pushScopeStats(",bn,",",Gn,".getNumPendingQueries(),",Hn,");"):nr(Gn,".endQuery();"))}function un(nr){var tr=Zt.def(Wn,".profile");Zt(Wn,".profile=",nr,";"),Zt.exit(Wn,".profile=",tr,";")}var hn,bn,In=zt.shared,Hn=zt.stats,Wn=In.current,Gn=In.timer;if(rn=rn.profile){if(J(rn))return void(rn.enable?(ln(Zt),gn(Zt.exit),un("true")):un("false"));un(rn=rn.append(zt,Zt))}else rn=Zt.def(Wn,".profile");ln(In=zt.block()),Zt("if(",rn,"){",In,"}"),gn(zt=zt.block()),Zt.exit("if(",rn,"){",zt,"}")}function kn(zt,Zt,rn,Ln,Sn){var ln=zt.shared;Ln.forEach(function(gn){var un,hn=gn.name,bn=rn.attributes[hn];if(bn){if(!Sn(bn))return;un=bn.append(zt,Zt)}else{if(!Sn(Ze))return;var In=zt.scopeAttrib(hn);un={},Object.keys(new lr).forEach(function(Hn){un[Hn]=Zt.def(In,".",Hn)})}!function wn(gn,un,hn){function bn(){Zt("if(!",Gn,".buffer){",Hn,".enableVertexAttribArray(",Wn,");}");var ir,cr=hn.type;ir=hn.size?Zt.def(hn.size,"||",un):un,Zt("if(",Gn,".type!==",cr,"||",Gn,".size!==",ir,"||",ar.map(function(br){return Gn+"."+br+"!=="+hn[br]}).join("||"),"){",Hn,".bindBuffer(",34962,",",nr,".buffer);",Hn,".vertexAttribPointer(",[Wn,ir,cr,hn.normalized,hn.stride,hn.offset],");",Gn,".type=",cr,";",Gn,".size=",ir,";",ar.map(function(br){return Gn+"."+br+"="+hn[br]+";"}).join(""),"}"),Gt&&Zt("if(",Gn,".divisor!==",cr=hn.divisor,"){",zt.instancing,".vertexAttribDivisorANGLE(",[Wn,cr],");",Gn,".divisor=",cr,";}")}function In(){Zt("if(",Gn,".buffer){",Hn,".disableVertexAttribArray(",Wn,");",Gn,".buffer=null;","}if(",Pt.map(function(ir,cr){return Gn+"."+ir+"!=="+tr[cr]}).join("||"),"){",Hn,".vertexAttrib4f(",Wn,",",tr,");",Pt.map(function(ir,cr){return Gn+"."+ir+"="+tr[cr]+";"}).join(""),"}")}var Hn=ln.gl,Wn=Zt.def(gn,".location"),Gn=Zt.def(ln.attributes,"[",Wn,"]"),nr=hn.buffer,tr=[hn.x,hn.y,hn.z,hn.w],ar=["buffer","normalized","offset","stride"];1===(gn=hn.state)?bn():2===gn?In():(Zt("if(",gn,"===",1,"){"),bn(),Zt("}else{"),In(),Zt("}"))}(zt.link(gn),function(Hn){switch(Hn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(gn.info.type),un)})}function zn(zt,Zt,rn,Ln,Sn,wn){for(var ln,gn=zt.shared,un=gn.gl,hn=0;hn<Ln.length;++hn){var bn,In=(Gn=Ln[hn]).name,Hn=Gn.info.type,Wn=rn.uniforms[In],Gn=zt.link(Gn)+".location";if(Wn){if(!Sn(Wn))continue;if(J(Wn)){if(In=Wn.value,35678===Hn||35680===Hn)Zt(un,".uniform1i(",Gn,",",(Hn=zt.link(In._texture||In.color[0]._texture))+".bind());"),Zt.exit(Hn,".unbind();");else if(35674===Hn||35675===Hn||35676===Hn)Wn=2,35675===Hn?Wn=3:35676===Hn&&(Wn=4),Zt(un,".uniformMatrix",Wn,"fv(",Gn,",false,",In=zt.global.def("new Float32Array(["+Array.prototype.slice.call(In)+"])"),");");else{switch(Hn){case 5126:ln="1f";break;case 35664:ln="2f";break;case 35665:ln="3f";break;case 35666:ln="4f";break;case 35670:case 5124:ln="1i";break;case 35671:case 35667:ln="2i";break;case 35672:case 35668:ln="3i";break;case 35673:case 35669:ln="4i"}Zt(un,".uniform",ln,"(",Gn,",",b(In)?Array.prototype.slice.call(In):In,");")}continue}bn=Wn.append(zt,Zt)}else{if(!Sn(Ze))continue;bn=Zt.def(gn.uniforms,"[",Je.id(In),"]")}switch(35678===Hn?Zt("if(",bn,"&&",bn,'._reglType==="framebuffer"){',bn,"=",bn,".color[0];","}"):35680===Hn&&Zt("if(",bn,"&&",bn,'._reglType==="framebufferCube"){',bn,"=",bn,".color[0];","}"),In=1,Hn){case 35678:case 35680:Hn=Zt.def(bn,"._texture"),Zt(un,".uniform1i(",Gn,",",Hn,".bind());"),Zt.exit(Hn,".unbind();");continue;case 5124:case 35670:ln="1i";break;case 35667:case 35671:ln="2i",In=2;break;case 35668:case 35672:ln="3i",In=3;break;case 35669:case 35673:ln="4i",In=4;break;case 5126:ln="1f";break;case 35664:ln="2f",In=2;break;case 35665:ln="3f",In=3;break;case 35666:ln="4f",In=4;break;case 35674:ln="Matrix2fv";break;case 35675:ln="Matrix3fv";break;case 35676:ln="Matrix4fv"}if("M"===ln.charAt(0)){Zt(un,".uniform",ln,"(",Gn,","),Gn=Math.pow(Hn-35674+2,2);var nr=zt.global.def("new Float32Array(",Gn,")");Array.isArray(bn)?Zt("false,(",x(Gn,function(ar){return nr+"["+ar+"]="+bn[ar]}),",",nr,")"):Zt("false,(Array.isArray(",bn,")||",bn," instanceof Float32Array)?",bn,":(",x(Gn,function(ar){return nr+"["+ar+"]="+bn+"["+ar+"]"}),",",nr,")"),Zt(");")}else{if(1<In){Hn=[];var tr=[];for(Wn=0;Wn<In;++Wn)Array.isArray(bn)?tr.push(bn[Wn]):tr.push(Zt.def(bn+"["+Wn+"]")),wn&&Hn.push(Zt.def());wn&&Zt("if(!",zt.batchId,"||",Hn.map(function(ar,ir){return ar+"!=="+tr[ir]}).join("||"),"){",Hn.map(function(ar,ir){return ar+"="+tr[ir]+";"}).join("")),Zt(un,".uniform",ln,"(",Gn,",",tr.join(","),");")}else wn&&(Hn=Zt.def(),Zt("if(!",zt.batchId,"||",Hn,"!==",bn,"){",Hn,"=",bn,";")),Zt(un,".uniform",ln,"(",Gn,",",bn,");");wn&&Zt("}")}}}function Fn(zt,Zt,rn,Ln){function Sn(cr){var br=Hn[cr];return br?br.append(zt,br.contextDep&&Ln.contextDynamic||br.propDep?rn:Zt):Zt.def(In,".",cr)}function wn(){function cr(){rn(un,".drawElementsInstancedANGLE(",[Gn,tr,ar,nr+"<<(("+ar+"-5121)>>1)",gn],");")}function br(){rn(un,".drawArraysInstancedANGLE(",[Gn,nr,tr,gn],");")}Wn&&"null"!==Wn?ir?cr():(rn("if(",Wn,"){"),cr(),rn("}else{"),br(),rn("}")):br()}function ln(){function cr(){rn(bn+".drawElements("+[Gn,tr,ar,nr+"<<(("+ar+"-5121)>>1)"]+");")}function br(){rn(bn+".drawArrays("+[Gn,nr,tr]+");")}Wn&&"null"!==Wn?ir?cr():(rn("if(",Wn,"){"),cr(),rn("}else{"),br(),rn("}")):br()}var gn,un,cr,br,hn=zt.shared,bn=hn.gl,In=hn.draw,Hn=Ln.draw,Wn=(br=Zt,(cr=Hn.elements)?((cr.contextDep&&Ln.contextDynamic||cr.propDep)&&(br=rn),cr=cr.append(zt,br),Hn.elementsActive&&br("if("+cr+")"+bn+".bindBuffer(34963,"+cr+".buffer.buffer);")):(cr=br.def(),br(cr,"=",In,".","elements",";","if(",cr,"){",bn,".bindBuffer(",34963,",",cr,".buffer.buffer);}","else if(",hn.vao,".currentVAO){",cr,"=",zt.shared.elements+".getElements("+hn.vao,".currentVAO.elements);",An?"":"if("+cr+")"+bn+".bindBuffer(34963,"+cr+".buffer.buffer);","}")),cr),Gn=Sn("primitive"),nr=Sn("offset"),tr=function(){var cr=Hn.count,br=Zt;return cr?((cr.contextDep&&Ln.contextDynamic||cr.propDep)&&(br=rn),cr=cr.append(zt,br)):cr=br.def(In,".","count"),cr}();if("number"==typeof tr){if(0===tr)return}else rn("if(",tr,"){"),rn.exit("}");Gt&&(gn=Sn("instances"),un=zt.instancing);var ar=Wn+".type",ir=Hn.elements&&J(Hn.elements)&&!Hn.vaoActive;Gt&&("number"!=typeof gn||0<=gn)?"string"==typeof gn?(rn("if(",gn,">0){"),wn(),rn("}else if(",gn,"<0){"),ln(),rn("}")):wn():ln()}function Bn(zt,Zt,rn,Ln,Sn){return Sn=(Zt=Xt()).proc("body",Sn),Gt&&(Zt.instancing=Sn.def(Zt.shared.extensions,".angle_instanced_arrays")),zt(Zt,Sn,rn,Ln),Zt.compile().body}function er(zt,Zt,rn,Ln){sn(zt,Zt),rn.useVAO?rn.drawVAO?Zt(zt.shared.vao,".setVAO(",rn.drawVAO.append(zt,Zt),");"):Zt(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(Zt(zt.shared.vao,".setVAO(null);"),kn(zt,Zt,rn,Ln.attributes,function(){return!0})),zn(zt,Zt,rn,Ln.uniforms,function(){return!0},!1),Fn(zt,Zt,Zt,rn)}function Xn(zt,Zt,rn,Ln){function Sn(){return!0}zt.batchId="a1",sn(zt,Zt),kn(zt,Zt,rn,Ln.attributes,Sn),zn(zt,Zt,rn,Ln.uniforms,Sn,!1),Fn(zt,Zt,Zt,rn)}function mr(zt,Zt,rn,Ln){function Sn(In){return In.contextDep&&ln||In.propDep}function wn(In){return!Sn(In)}sn(zt,Zt);var ln=rn.contextDep,gn=Zt.def(),un=Zt.def();zt.shared.props=un,zt.batchId=gn;var hn=zt.scope(),bn=zt.scope();Zt(hn.entry,"for(",gn,"=0;",gn,"<","a1",";++",gn,"){",un,"=","a0","[",gn,"];",bn,"}",hn.exit),rn.needsContext&&mn(zt,bn,rn.context),rn.needsFramebuffer&&en(zt,bn,rn.framebuffer),on(zt,bn,rn.state,Sn),rn.profile&&Sn(rn.profile)&&En(zt,bn,rn,!1,!0),Ln?(rn.useVAO?rn.drawVAO?Sn(rn.drawVAO)?bn(zt.shared.vao,".setVAO(",rn.drawVAO.append(zt,bn),");"):hn(zt.shared.vao,".setVAO(",rn.drawVAO.append(zt,hn),");"):hn(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(hn(zt.shared.vao,".setVAO(null);"),kn(zt,hn,rn,Ln.attributes,wn),kn(zt,bn,rn,Ln.attributes,Sn)),zn(zt,hn,rn,Ln.uniforms,wn,!1),zn(zt,bn,rn,Ln.uniforms,Sn,!0),Fn(zt,hn,bn,rn)):(Zt=zt.global.def("{}"),Ln=rn.shader.progVar.append(zt,bn),un=bn.def(Ln,".id"),hn=bn.def(Zt,"[",un,"]"),bn(zt.shared.gl,".useProgram(",Ln,".program);","if(!",hn,"){",hn,"=",Zt,"[",un,"]=",zt.link(function(In){return Bn(Xn,zt,rn,In,2)}),"(",Ln,");}",hn,".call(this,a0[",gn,"],",gn,");"))}function $n(zt,Zt,rn){var Ln=Zt.static[rn];if(Ln&&function(bn){if("object"==typeof bn&&!b(bn)){for(var In=Object.keys(bn),Hn=0;Hn<In.length;++Hn)if(re.isDynamic(bn[In[Hn]]))return!0;return!1}}(Ln)){var Sn=zt.global,wn=Object.keys(Ln),ln=!1,gn=!1,un=!1,hn=zt.global.def("{}");wn.forEach(function(bn){var In=Ln[bn];if(re.isDynamic(In))"function"==typeof In&&(In=Ln[bn]=re.unbox(In)),bn=q(In,null),ln=ln||bn.thisDep,un=un||bn.propDep,gn=gn||bn.contextDep;else{switch(Sn(hn,".",bn,"="),typeof In){case"number":Sn(In);break;case"string":Sn('"',In,'"');break;case"object":Array.isArray(In)&&Sn("[",In.join(),"]");break;default:Sn(zt.link(In))}Sn(";")}}),Zt.dynamic[rn]=new re.DynamicVariable(4,{thisDep:ln,contextDep:gn,propDep:un,ref:hn,append:function(bn,In){wn.forEach(function(Hn){var Wn=Ln[Hn];re.isDynamic(Wn)&&(Wn=bn.invoke(In,Wn),In(hn,".",Hn,"=",Wn,";"))})}}),delete Zt.static[rn]}}var lr=Lt.Record,hr={add:32774,subtract:32778,"reverse subtract":32779};at.ext_blend_minmax&&(hr.min=32775,hr.max=32776);var Gt=at.angle_instanced_arrays,pn=at.webgl_draw_buffers,An=at.oes_vertex_array_object,Tn={dirty:!0,profile:It.profile},Rn={},qn=[],Un={},Yn={};Nt("dither",3024),Nt("blend.enable",3042),qt("blend.color","blendColor",[0,0,0,0]),qt("blend.equation","blendEquationSeparate",[32774,32774]),qt("blend.func","blendFuncSeparate",[1,0,1,0]),Nt("depth.enable",2929,!0),qt("depth.func","depthFunc",513),qt("depth.range","depthRange",[0,1]),qt("depth.mask","depthMask",!0),qt("colorMask","colorMask",[!0,!0,!0,!0]),Nt("cull.enable",2884),qt("cull.face","cullFace",1029),qt("frontFace","frontFace",2305),qt("lineWidth","lineWidth",1),Nt("polygonOffset.enable",32823),qt("polygonOffset.offset","polygonOffset",[0,0]),Nt("sample.alpha",32926),Nt("sample.enable",32928),qt("sample.coverage","sampleCoverage",[1,!1]),Nt("stencil.enable",2960),qt("stencil.mask","stencilMask",-1),qt("stencil.func","stencilFunc",[519,0,-1]),qt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),qt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Nt("scissor.enable",3089),qt("scissor.box","scissor",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]),qt("viewport","viewport",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]);var or={gl:Ne,context:Et,strings:Je,next:Rn,current:Tn,draw:ht,elements:Ke,buffer:ze,shader:At,attributes:Lt.state,vao:Lt,uniforms:mt,framebuffer:ct,extensions:at,timer:gt,isBufferArgs:B},Jt={primTypes:oe,compareFuncs:jt,blendFuncs:Ot,blendEquations:hr,stencilOps:Dt,glTypes:de,orientationType:Ye};pn&&(Jt.backBuffer=[1029],Jt.drawBuffer=x(Se.maxDrawbuffers,function(zt){return 0===zt?[0]:x(zt,function(Zt){return 36064+Zt})}));var Mn=0;return{next:Rn,current:Tn,procs:function(){var zt=Xt(),Zt=zt.proc("poll"),rn=zt.proc("refresh"),Ln=zt.block();Zt(Ln),rn(Ln);var Sn,wn=(un=zt.shared).gl,ln=un.next,gn=un.current;Ln(gn,".dirty=false;"),en(zt,Zt),en(zt,rn,null,!0),Gt&&(Sn=zt.link(Gt)),at.oes_vertex_array_object&&rn(zt.link(at.oes_vertex_array_object),".bindVertexArrayOES(null);");var un=rn.def(un.attributes),hn=rn.def(0),bn=zt.cond(hn,".buffer");bn.then(wn,".enableVertexAttribArray(i);",wn,".bindBuffer(",34962,",",hn,".buffer.buffer);",wn,".vertexAttribPointer(i,",hn,".size,",hn,".type,",hn,".normalized,",hn,".stride,",hn,".offset);").else(wn,".disableVertexAttribArray(i);",wn,".vertexAttrib4f(i,",hn,".x,",hn,".y,",hn,".z,",hn,".w);",hn,".buffer=null;");var In=zt.link(Se.maxAttributes,{stable:!0});return rn("for(var i=0;i<",In,";++i){",hn,"=",un,"[i];",bn,"}"),Gt&&rn("for(var i=0;i<",In,";++i){",Sn,".vertexAttribDivisorANGLE(i,",un,"[i].divisor);","}"),rn(zt.shared.vao,".currentVAO=null;",zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"),Object.keys(Un).forEach(function(Hn){var Wn=Un[Hn],Gn=Ln.def(ln,".",Hn),nr=zt.block();nr("if(",Gn,"){",wn,".enable(",Wn,")}else{",wn,".disable(",Wn,")}",gn,".",Hn,"=",Gn,";"),rn(nr),Zt("if(",Gn,"!==",gn,".",Hn,"){",nr,"}")}),Object.keys(Yn).forEach(function(Hn){var Wn,Gn,nr=Yn[Hn],tr=Tn[Hn],ar=zt.block();ar(wn,".",nr,"("),b(tr)?(nr=tr.length,Wn=zt.global.def(ln,".",Hn),Gn=zt.global.def(gn,".",Hn),ar(x(nr,function(ir){return Wn+"["+ir+"]"}),");",x(nr,function(ir){return Gn+"["+ir+"]="+Wn+"["+ir+"];"}).join("")),Zt("if(",x(nr,function(ir){return Wn+"["+ir+"]!=="+Gn+"["+ir+"]"}).join("||"),"){",ar,"}")):(Wn=Ln.def(ln,".",Hn),Gn=Ln.def(gn,".",Hn),ar(Wn,");",gn,".",Hn,"=",Wn,";"),Zt("if(",Wn,"!==",Gn,"){",ar,"}")),rn(ar)}),zt.compile()}(),compile:function(zt,Zt,rn,Ln,Sn){var wn=Xt();wn.stats=wn.link(Sn),Object.keys(Zt.static).forEach(function(gn){$n(wn,Zt,gn)}),St.forEach(function(gn){$n(wn,zt,gn)});var ln=jn(zt,Zt,rn,Ln);return ln.shader.program&&(ln.shader.program.attributes.sort(function(gn,un){return gn.name<un.name?-1:1}),ln.shader.program.uniforms.sort(function(gn,un){return gn.name<un.name?-1:1})),function(gn,un){var hn=gn.proc("draw",1);sn(gn,hn),mn(gn,hn,un.context),en(gn,hn,un.framebuffer),vn(gn,hn,un),on(gn,hn,un.state),En(gn,hn,un,!1,!0);var bn=un.shader.progVar.append(gn,hn);if(hn(gn.shared.gl,".useProgram(",bn,".program);"),un.shader.program)er(gn,hn,un,un.shader.program);else{hn(gn.shared.vao,".setVAO(null);");var In=gn.global.def("{}"),Hn=hn.def(bn,".id"),Wn=hn.def(In,"[",Hn,"]");hn(gn.cond(Wn).then(Wn,".call(this,a0);").else(Wn,"=",In,"[",Hn,"]=",gn.link(function(Gn){return Bn(er,gn,un,Gn,1)}),"(",bn,");",Wn,".call(this,a0);"))}0<Object.keys(un.state).length&&hn(gn.shared.current,".dirty=true;"),gn.shared.vao&&hn(gn.shared.vao,".setVAO(null);")}(wn,ln),function ur(zt,Zt){function rn(gn){var un=Zt.shader[gn];un&&(un=un.append(zt,Ln),isNaN(un)?Ln.set(Sn.shader,"."+gn,un):Ln.set(Sn.shader,"."+gn,zt.link(un,{stable:!0})))}var Ln=zt.proc("scope",3);zt.batchId="a2";var Sn=zt.shared,wn=Sn.current;if(mn(zt,Ln,Zt.context),Zt.framebuffer&&Zt.framebuffer.append(zt,Ln),N(Object.keys(Zt.state)).forEach(function(gn){var un=Zt.state[gn],hn=un.append(zt,Ln);b(hn)?hn.forEach(function(bn,In){isNaN(bn)?Ln.set(zt.next[gn],"["+In+"]",bn):Ln.set(zt.next[gn],"["+In+"]",zt.link(bn,{stable:!0}))}):J(un)?Ln.set(Sn.next,"."+gn,zt.link(hn,{stable:!0})):Ln.set(Sn.next,"."+gn,hn)}),En(zt,Ln,Zt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(gn){var un=Zt.draw[gn];un&&(un=un.append(zt,Ln),isNaN(un)?Ln.set(Sn.draw,"."+gn,un):Ln.set(Sn.draw,"."+gn,zt.link(un),{stable:!0}))}),Object.keys(Zt.uniforms).forEach(function(gn){var un=Zt.uniforms[gn].append(zt,Ln);Array.isArray(un)&&(un="["+un.map(function(hn){return isNaN(hn)?hn:zt.link(hn,{stable:!0})})+"]"),Ln.set(Sn.uniforms,"["+zt.link(Je.id(gn),{stable:!0})+"]",un)}),Object.keys(Zt.attributes).forEach(function(gn){var un=Zt.attributes[gn].append(zt,Ln),hn=zt.scopeAttrib(gn);Object.keys(new lr).forEach(function(bn){Ln.set(hn,"."+bn,un[bn])})}),Zt.scopeVAO){var ln=Zt.scopeVAO.append(zt,Ln);isNaN(ln)?Ln.set(Sn.vao,".targetVAO",ln):Ln.set(Sn.vao,".targetVAO",zt.link(ln,{stable:!0}))}rn("vert"),rn("frag"),0<Object.keys(Zt.state).length&&(Ln(wn,".dirty=true;"),Ln.exit(wn,".dirty=true;")),Ln("a1(",zt.shared.context,",a0,",zt.batchId,");")}(wn,ln),function(gn,un){function hn(tr){return tr.contextDep&&In||tr.propDep}var bn=gn.proc("batch",2);gn.batchId="0",sn(gn,bn);var In=!1,Hn=!0;Object.keys(un.context).forEach(function(tr){In=In||un.context[tr].propDep}),In||(mn(gn,bn,un.context),Hn=!1);var Wn=!1;if((Gn=un.framebuffer)?(Gn.propDep?In=Wn=!0:Gn.contextDep&&In&&(Wn=!0),Wn||en(gn,bn,Gn)):en(gn,bn,null),un.state.viewport&&un.state.viewport.propDep&&(In=!0),vn(gn,bn,un),on(gn,bn,un.state,function(tr){return!hn(tr)}),un.profile&&hn(un.profile)||En(gn,bn,un,!1,"a1"),un.contextDep=In,un.needsContext=Hn,un.needsFramebuffer=Wn,(Hn=un.shader.progVar).contextDep&&In||Hn.propDep)mr(gn,bn,un,null);else if(Hn=Hn.append(gn,bn),bn(gn.shared.gl,".useProgram(",Hn,".program);"),un.shader.program)mr(gn,bn,un,un.shader.program);else{bn(gn.shared.vao,".setVAO(null);");var Gn=gn.global.def("{}"),nr=(Wn=bn.def(Hn,".id"),bn.def(Gn,"[",Wn,"]"));bn(gn.cond(nr).then(nr,".call(this,a0,a1);").else(nr,"=",Gn,"[",Wn,"]=",gn.link(function(tr){return Bn(mr,gn,un,tr,2)}),"(",Hn,");",nr,".call(this,a0,a1);"))}0<Object.keys(un.state).length&&bn(gn.shared.current,".dirty=true;"),gn.shared.vao&&bn(gn.shared.vao,".setVAO(null);")}(wn,ln),Q(wn.compile(),{destroy:function(){ln.shader.program.destroy()}})}}}function X(Ne,Je){for(var at=0;at<Ne.length;++at)if(Ne[at]===Je)return at;return-1}var Q=function(Ne,Je){for(var at=Object.keys(Je),Se=0;Se<at.length;++Se)Ne[at[Se]]=Je[at[Se]];return Ne},ne=0,re={DynamicVariable:I,define:function(Ne,Je){return new I(Ne,M(Je+""))},isDynamic:function(Ne){return"function"==typeof Ne&&!Ne._reglType||Ne instanceof I},unbox:function Ne(Je,at){return"function"==typeof Je?new I(0,Je):"number"==typeof Je||"boolean"==typeof Je?new I(5,Je):Array.isArray(Je)?new I(6,Je.map(function(Se,ze){return Ne(Se,at+"["+ze+"]")})):Je instanceof I?Je:void 0},accessor:M},ae={next:"function"==typeof requestAnimationFrame?function(Ne){return requestAnimationFrame(Ne)}:function(Ne){return setTimeout(Ne,16)},cancel:"function"==typeof cancelAnimationFrame?function(Ne){return cancelAnimationFrame(Ne)}:clearTimeout},se=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},pe=s();pe.zero=s();var me=function(Ne){return Ne instanceof Uint8Array||Ne instanceof Uint16Array||Ne instanceof Uint32Array||Ne instanceof Int8Array||Ne instanceof Int16Array||Ne instanceof Int32Array||Ne instanceof Float32Array||Ne instanceof Float64Array||Ne instanceof Uint8ClampedArray},le=function(Ne){return Object.keys(Ne).map(function(Je){return Ne[Je]})},ue={shape:function(Ne){for(var Je=[];Ne.length;Ne=Ne[0])Je.push(Ne.length);return Je},flatten:function(Ne,Je,at,Se){var ze=1;if(Je.length)for(var Ke=0;Ke<Je.length;++Ke)ze*=Je[Ke];else ze=0;switch(at=Se||pe.allocType(at,ze),Je.length){case 0:break;case 1:for(Se=Je[0],Je=0;Je<Se;++Je)at[Je]=Ne[Je];break;case 2:for(Se=Je[0],Je=Je[1],Ke=ze=0;Ke<Se;++Ke)for(var it=Ne[Ke],ct=0;ct<Je;++ct)at[ze++]=it[ct];break;case 3:o(Ne,Je[0],Je[1],Je[2],at,0);break;default:r(Ne,Je,0,at,0)}return at}},Ee={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},de={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},xe={dynamic:35048,stream:35040,static:35044},Te=ue.flatten,we=ue.shape,K=[];K[5120]=1,K[5122]=2,K[5124]=4,K[5121]=1,K[5123]=2,K[5125]=4,K[5126]=4;var oe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},he=new Float32Array(1),ye=new Uint32Array(he.buffer),Me=[9984,9986,9985,9987],Re=[0,6409,6410,6407,6408],Pe={};Pe[6409]=Pe[6406]=Pe[6402]=1,Pe[34041]=Pe[6410]=2,Pe[6407]=Pe[35904]=3,Pe[6408]=Pe[35906]=4;var De=v("HTMLCanvasElement"),fe=v("OffscreenCanvas"),ge=v("CanvasRenderingContext2D"),be=v("ImageBitmap"),Ie=v("HTMLImageElement"),He=v("HTMLVideoElement"),Ve=Object.keys(Ee).concat([De,fe,ge,be,Ie,He]),tt=[];tt[5121]=1,tt[5126]=4,tt[36193]=2,tt[5123]=2,tt[5125]=4;var nt=[];nt[32854]=2,nt[32855]=2,nt[36194]=2,nt[34041]=4,nt[33776]=.5,nt[33777]=.5,nt[33778]=1,nt[33779]=1,nt[35986]=.5,nt[35987]=1,nt[34798]=1,nt[35840]=.5,nt[35841]=.25,nt[35842]=.5,nt[35843]=.25,nt[36196]=.5;var st=[];st[32854]=2,st[32855]=2,st[36194]=2,st[33189]=2,st[36168]=1,st[34041]=4,st[35907]=4,st[34836]=16,st[34842]=8,st[34843]=6;var wt=[];wt[6408]=4,wt[6407]=3;var _t=[];_t[5121]=1,_t[5126]=4,_t[36193]=2;var pt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Pt=["x","y","z","w"],St="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ot={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},jt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Dt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ye={cw:2304,ccw:2305},Ze=new U(!1,!1,!1,function(){});return function(Ne){function Je(){if(0===Xn.length)Kt&&Kt.update(),lr=null;else{lr=ae.next(Je),At();for(var Gt=Xn.length-1;0<=Gt;--Gt){var pn=Xn[Gt];pn&&pn(jn,null,0)}gt.flush(),Kt&&Kt.update()}}function at(){!lr&&0<Xn.length&&(lr=ae.next(Je))}function Se(){lr&&(ae.cancel(Je),lr=null)}function ze(Gt){Gt.preventDefault(),Se(),mr.forEach(function(pn){pn()})}function Ke(Gt){gt.getError(),It.restore(),sn.restore(),en.restore(),En.restore(),kn.restore(),zn.restore(),on.restore(),Kt&&Kt.restore(),Fn.procs.refresh(),at(),ur.forEach(function(pn){pn()})}function it(Gt){function pn(zt,Zt){var rn={},Ln={};return Object.keys(zt).forEach(function(Sn){var wn=zt[Sn];if(re.isDynamic(wn))Ln[Sn]=re.unbox(wn,Sn);else{if(Zt&&Array.isArray(wn))for(var ln=0;ln<wn.length;++ln)if(re.isDynamic(wn[ln]))return void(Ln[Sn]=re.unbox(wn,Sn));rn[Sn]=wn}}),{dynamic:Ln,static:rn}}var An=pn(Gt.context||{},!0),Tn=pn(Gt.uniforms||{},!0),Rn=pn(Gt.attributes||{},!1);Gt=pn(function(zt){function Zt(Ln){if(Ln in rn){var Sn=rn[Ln];delete rn[Ln],Object.keys(Sn).forEach(function(wn){rn[Ln+"."+wn]=Sn[wn]})}}var rn=Q({},zt);return delete rn.uniforms,delete rn.attributes,delete rn.context,delete rn.vao,"stencil"in rn&&rn.stencil.op&&(rn.stencil.opBack=rn.stencil.opFront=rn.stencil.op,delete rn.stencil.op),Zt("blend"),Zt("depth"),Zt("cull"),Zt("stencil"),Zt("polygonOffset"),Zt("scissor"),Zt("sample"),"vao"in zt&&(rn.vao=zt.vao),rn}(Gt),!1);var qn={gpuTime:0,cpuTime:0,count:0},Un=Fn.compile(Gt,Rn,Tn,An,qn),Yn=Un.draw,or=Un.batch,Jt=Un.scope,Mn=[];return Q(function(zt,Zt){var rn;if("function"==typeof zt)return Jt.call(this,null,zt,0);if("function"==typeof Zt)if("number"==typeof zt)for(rn=0;rn<zt;++rn)Jt.call(this,null,Zt,rn);else{if(!Array.isArray(zt))return Jt.call(this,zt,Zt,0);for(rn=0;rn<zt.length;++rn)Jt.call(this,zt[rn],Zt,rn)}else if("number"==typeof zt){if(0<zt)return or.call(this,function(Ln){for(;Mn.length<Ln;)Mn.push(null);return Mn}(0|zt),0|zt)}else{if(!Array.isArray(zt))return Yn.call(this,zt);if(zt.length)return or.call(this,zt,zt.length)}},{stats:qn,destroy:function(){Un.destroy()}})}function ct(Gt,pn){var An=0;Fn.procs.poll();var Tn=pn.color;Tn&&(gt.clearColor(+Tn[0]||0,+Tn[1]||0,+Tn[2]||0,+Tn[3]||0),An|=16384),"depth"in pn&&(gt.clearDepth(+pn.depth),An|=256),"stencil"in pn&&(gt.clearStencil(0|pn.stencil),An|=1024),gt.clear(An)}function mt(Gt){return Xn.push(Gt),at(),{cancel:function(){var pn=X(Xn,Gt);Xn[pn]=function An(){var Tn=X(Xn,An);Xn[Tn]=Xn[Xn.length-1],--Xn.length,0>=Xn.length&&Se()}}}}function Lt(){var Gt=Bn.viewport,pn=Bn.scissor_box;Gt[0]=Gt[1]=pn[0]=pn[1]=0,jn.viewportWidth=jn.framebufferWidth=jn.drawingBufferWidth=Gt[2]=pn[2]=gt.drawingBufferWidth,jn.viewportHeight=jn.framebufferHeight=jn.drawingBufferHeight=Gt[3]=pn[3]=gt.drawingBufferHeight}function At(){jn.tick+=1,jn.time=Et(),Lt(),Fn.procs.poll()}function ht(){En.refresh(),Lt(),Fn.procs.refresh(),Kt&&Kt.update()}function Et(){return(se()-fn)/1e3}if(!(Ne=function T(Ne){var Je,at,Se,ze,Ke=Ne||{};Ne={};var it=[],ct=[],mt=typeof window>"u"?1:window.devicePixelRatio,Lt=!1,At={},ht=function(gt){},Et=function(){};if("string"==typeof Ke?Je=document.querySelector(Ke):"object"==typeof Ke&&("string"==typeof Ke.nodeName&&"function"==typeof Ke.appendChild&&"function"==typeof Ke.getBoundingClientRect?Je=Ke:"function"==typeof Ke.drawArrays||"function"==typeof Ke.drawElements?Se=(ze=Ke).canvas:("gl"in Ke?ze=Ke.gl:"canvas"in Ke?Se=l(Ke.canvas):"container"in Ke&&(at=l(Ke.container)),"attributes"in Ke&&(Ne=Ke.attributes),"extensions"in Ke&&(it=k(Ke.extensions)),"optionalExtensions"in Ke&&(ct=k(Ke.optionalExtensions)),"onDone"in Ke&&(ht=Ke.onDone),"profile"in Ke&&(Lt=!!Ke.profile),"pixelRatio"in Ke&&(mt=+Ke.pixelRatio),"cachedCode"in Ke&&(At=Ke.cachedCode))),Je&&("canvas"===Je.nodeName.toLowerCase()?Se=Je:at=Je),!ze){if(!Se){if(!(Je=function(gt,kt,It){function Ut(){var Xt=window.innerWidth,Kt=window.innerHeight;gt!==document.body&&(Xt=(Kt=qt.getBoundingClientRect()).right-Kt.left,Kt=Kt.bottom-Kt.top),qt.width=It*Xt,qt.height=It*Kt}var Nt,qt=document.createElement("canvas");return Q(qt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),gt.appendChild(qt),gt===document.body&&(qt.style.position="absolute",Q(gt.style,{margin:0,padding:0})),gt!==document.body&&"function"==typeof ResizeObserver?(Nt=new ResizeObserver(function(){setTimeout(Ut)})).observe(gt):window.addEventListener("resize",Ut,!1),Ut(),{canvas:qt,onDestroy:function(){Nt?Nt.disconnect():window.removeEventListener("resize",Ut),gt.removeChild(qt)}}}(at||document.body,0,mt)))return null;Se=Je.canvas,Et=Je.onDestroy}void 0===Ne.premultipliedAlpha&&(Ne.premultipliedAlpha=!0),ze=function(gt,kt){function It(Ut){try{return gt.getContext(Ut,kt)}catch{return null}}return It("webgl")||It("experimental-webgl")||It("webgl-experimental")}(Se,Ne)}return ze?{gl:ze,canvas:Se,container:at,extensions:it,optionalExtensions:ct,pixelRatio:mt,profile:Lt,cachedCode:At,onDone:ht,onDestroy:Et}:(Et(),ht("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Ne)))return null;var gt=Ne.gl,kt=gt.getContextAttributes();gt.isContextLost();var It=function(Gt,pn){function An(Un){var Yn;Un=Un.toLowerCase();try{Yn=Tn[Un]=Gt.getExtension(Un)}catch{}return!!Yn}for(var Tn={},Rn=0;Rn<pn.extensions.length;++Rn){var qn=pn.extensions[Rn];if(!An(qn))return pn.onDestroy(),pn.onDone('"'+qn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return pn.optionalExtensions.forEach(An),{extensions:Tn,restore:function(){Object.keys(Tn).forEach(function(Un){if(Tn[Un]&&!An(Un))throw Error("(regl): error restoring extension "+Un)})}}}(gt,Ne);if(!It)return null;var Gt,pn,Ut=(Gt={"":0},pn=[""],{id:function(An){var Tn=Gt[An];return Tn||(Tn=Gt[An]=pn.length,pn.push(An),Tn)},str:function(An){return pn[An]}}),Nt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},qt=Ne.cachedCode||{},Xt=It.extensions,Kt=function(Gt,pn){function An(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Tn(Mn,zt,Zt){var rn=Un.pop()||new An;rn.startQueryIndex=Mn,rn.endQueryIndex=zt,rn.sum=0,rn.stats=Zt,Yn.push(rn)}if(!pn.ext_disjoint_timer_query)return null;var Rn=[],qn=[],Un=[],Yn=[],or=[],Jt=[];return{beginQuery:function(Mn){var zt=Rn.pop()||pn.ext_disjoint_timer_query.createQueryEXT();pn.ext_disjoint_timer_query.beginQueryEXT(35007,zt),qn.push(zt),Tn(qn.length-1,qn.length,Mn)},endQuery:function(){pn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Tn,update:function(){var Mn,zt;if(0!==(Mn=qn.length)){Jt.length=Math.max(Jt.length,Mn+1),or.length=Math.max(or.length,Mn+1),or[0]=0;var Zt=Jt[0]=0;for(zt=Mn=0;zt<qn.length;++zt){var rn=qn[zt];pn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34919)?(Zt+=pn.ext_disjoint_timer_query.getQueryObjectEXT(rn,34918),Rn.push(rn)):qn[Mn++]=rn,or[zt+1]=Zt,Jt[zt+1]=Mn}for(qn.length=Mn,zt=Mn=0;zt<Yn.length;++zt){var Ln=(Zt=Yn[zt]).startQueryIndex;Zt.sum+=or[rn=Zt.endQueryIndex]-or[Ln],(rn=Jt[rn])===(Ln=Jt[Ln])?(Zt.stats.gpuTime+=Zt.sum/1e6,Un.push(Zt)):(Zt.startQueryIndex=Ln,Zt.endQueryIndex=rn,Yn[Mn++]=Zt)}Yn.length=Mn}},getNumPendingQueries:function(){return qn.length},clear:function(){Rn.push.apply(Rn,qn);for(var Mn=0;Mn<Rn.length;Mn++)pn.ext_disjoint_timer_query.deleteQueryEXT(Rn[Mn]);qn.length=0,Rn.length=0},restore:function(){qn.length=0,Rn.length=0}}}(0,Xt),fn=se(),nn=gt.drawingBufferWidth,xn=gt.drawingBufferHeight,jn={tick:0,time:0,viewportWidth:nn,viewportHeight:xn,framebufferWidth:nn,framebufferHeight:xn,drawingBufferWidth:nn,drawingBufferHeight:xn,pixelRatio:Ne.pixelRatio},mn=(nn={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Ne,Je){var at=1;Je.ext_texture_filter_anisotropic&&(at=Ne.getParameter(34047));var Se=1,ze=1;Je.webgl_draw_buffers&&(Se=Ne.getParameter(34852),ze=Ne.getParameter(36063));var Ke=!!Je.oes_texture_float;if(Ke){Ke=Ne.createTexture(),Ne.bindTexture(3553,Ke),Ne.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var it=Ne.createFramebuffer();if(Ne.bindFramebuffer(36160,it),Ne.framebufferTexture2D(36160,36064,3553,Ke,0),Ne.bindTexture(3553,null),36053!==Ne.checkFramebufferStatus(36160))Ke=!1;else{Ne.viewport(0,0,1,1),Ne.clearColor(1,0,0,1),Ne.clear(16384);var ct=pe.allocType(5126,4);Ne.readPixels(0,0,1,1,6408,5126,ct),Ne.getError()?Ke=!1:(Ne.deleteFramebuffer(it),Ne.deleteTexture(Ke),Ke=1===ct[0]),pe.freeType(ct)}}return ct=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ct=Ne.createTexture(),it=pe.allocType(5121,36),Ne.activeTexture(33984),Ne.bindTexture(34067,ct),Ne.texImage2D(34069,0,6408,3,3,0,6408,5121,it),pe.freeType(it),Ne.bindTexture(34067,null),Ne.deleteTexture(ct),ct=!Ne.getError()),{colorBits:[Ne.getParameter(3410),Ne.getParameter(3411),Ne.getParameter(3412),Ne.getParameter(3413)],depthBits:Ne.getParameter(3414),stencilBits:Ne.getParameter(3415),subpixelBits:Ne.getParameter(3408),extensions:Object.keys(Je).filter(function(mt){return!!Je[mt]}),maxAnisotropic:at,maxDrawbuffers:Se,maxColorAttachments:ze,pointSizeDims:Ne.getParameter(33901),lineWidthDims:Ne.getParameter(33902),maxViewportDims:Ne.getParameter(3386),maxCombinedTextureUnits:Ne.getParameter(35661),maxCubeMapSize:Ne.getParameter(34076),maxRenderbufferSize:Ne.getParameter(34024),maxTextureUnits:Ne.getParameter(34930),maxTextureSize:Ne.getParameter(3379),maxAttributes:Ne.getParameter(34921),maxVertexUniforms:Ne.getParameter(36347),maxVertexTextureUnits:Ne.getParameter(35660),maxVaryingVectors:Ne.getParameter(36348),maxFragmentUniforms:Ne.getParameter(36349),glsl:Ne.getParameter(35724),renderer:Ne.getParameter(7937),vendor:Ne.getParameter(7936),version:Ne.getParameter(7938),readFloat:Ke,npotTextureCube:ct}}(gt,Xt)),en=function c(Ne,Je,at,Se){function ze(ht){this.id=mt++,this.buffer=Ne.createBuffer(),this.type=ht,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,at.profile&&(this.stats={size:0})}function Ke(ht,Et,gt){ht.byteLength=Et.byteLength,Ne.bufferData(ht.type,Et,gt)}function it(ht,Et,gt,kt,It,Ut){if(ht.usage=gt,Array.isArray(Et)){if(ht.dtype=kt||5126,0<Et.length)if(Array.isArray(Et[0])){It=we(Et);for(var Nt=kt=1;Nt<It.length;++Nt)kt*=It[Nt];ht.dimension=kt,Ke(ht,Et=Te(Et,It,ht.dtype),gt),Ut?ht.persistentData=Et:pe.freeType(Et)}else"number"==typeof Et[0]?(ht.dimension=It,a(It=pe.allocType(ht.dtype,Et.length),Et),Ke(ht,It,gt),Ut?ht.persistentData=It:pe.freeType(It)):me(Et[0])&&(ht.dimension=Et[0].length,ht.dtype=kt||n(Et[0])||5126,Ke(ht,Et=Te(Et,[Et.length,Et[0].length],ht.dtype),gt),Ut?ht.persistentData=Et:pe.freeType(Et))}else if(me(Et))ht.dtype=kt||n(Et),ht.dimension=It,Ke(ht,Et,gt),Ut&&(ht.persistentData=new Uint8Array(new Uint8Array(Et.buffer)));else if(e(Et)){var qt=Et.stride,Xt=(Nt=Et.offset,0),Kt=0,fn=0,nn=0;1===(It=Et.shape).length?(Xt=It[0],Kt=1,fn=qt[0],nn=0):2===It.length&&(Xt=It[0],Kt=It[1],fn=qt[0],nn=qt[1]),ht.dtype=kt||n(Et.data)||5126,ht.dimension=Kt,i(It=pe.allocType(ht.dtype,Xt*Kt),Et.data,Xt,Kt,fn,nn,Nt),Ke(ht,It,gt),Ut?ht.persistentData=It:pe.freeType(It)}else Et instanceof ArrayBuffer&&(ht.dtype=5121,ht.dimension=It,Ke(ht,Et,gt),Ut&&(ht.persistentData=new Uint8Array(new Uint8Array(Et))))}function ct(ht){Je.bufferCount--,Se(ht),Ne.deleteBuffer(ht.buffer),ht.buffer=null,delete Lt[ht.id]}var mt=0,Lt={};ze.prototype.bind=function(){Ne.bindBuffer(this.type,this.buffer)},ze.prototype.destroy=function(){ct(this)};var At=[];return at.profile&&(Je.getTotalBufferSize=function(){var ht=0;return Object.keys(Lt).forEach(function(Et){ht+=Lt[Et].stats.size}),ht}),{create:function(ht,Et,gt,kt){function It(Nt){var qt=35044,Xt=null,Kt=0,fn=0,nn=1;return Array.isArray(Nt)||me(Nt)||e(Nt)||Nt instanceof ArrayBuffer?Xt=Nt:"number"==typeof Nt?Kt=0|Nt:Nt&&("data"in Nt&&(Xt=Nt.data),"usage"in Nt&&(qt=xe[Nt.usage]),"type"in Nt&&(fn=de[Nt.type]),"dimension"in Nt&&(nn=0|Nt.dimension),"length"in Nt&&(Kt=0|Nt.length)),Ut.bind(),Xt?it(Ut,Xt,qt,fn,nn,kt):(Kt&&Ne.bufferData(Ut.type,Kt,qt),Ut.dtype=fn||5121,Ut.usage=qt,Ut.dimension=nn,Ut.byteLength=Kt),at.profile&&(Ut.stats.size=Ut.byteLength*K[Ut.dtype]),It}Je.bufferCount++;var Ut=new ze(Et);return Lt[Ut.id]=Ut,gt||It(ht),It._reglType="buffer",It._buffer=Ut,It.subdata=function(Nt,qt){var Xt,Kt=0|(qt||0);if(Ut.bind(),me(Nt)||Nt instanceof ArrayBuffer)Ne.bufferSubData(Ut.type,Kt,Nt);else if(Array.isArray(Nt)){if(0<Nt.length)if("number"==typeof Nt[0]){var fn=pe.allocType(Ut.dtype,Nt.length);a(fn,Nt),Ne.bufferSubData(Ut.type,Kt,fn),pe.freeType(fn)}else(Array.isArray(Nt[0])||me(Nt[0]))&&(Xt=we(Nt),fn=Te(Nt,Xt,Ut.dtype),Ne.bufferSubData(Ut.type,Kt,fn),pe.freeType(fn))}else if(e(Nt)){var nn=Nt.stride,xn=fn=0,jn=0,mn=0;1===(Xt=Nt.shape).length?(fn=Xt[0],xn=1,jn=nn[0],mn=0):2===Xt.length&&(fn=Xt[0],xn=Xt[1],jn=nn[0],mn=nn[1]),Xt=Array.isArray(Nt.data)?Ut.dtype:n(Nt.data),i(Xt=pe.allocType(Xt,fn*xn),Nt.data,fn,xn,jn,mn,Nt.offset),Ne.bufferSubData(Ut.type,Kt,Xt),pe.freeType(Xt)}return It},at.profile&&(It.stats=Ut.stats),It.destroy=function(){ct(Ut)},It},createStream:function(ht,Et){var gt=At.pop();return gt||(gt=new ze(ht)),gt.bind(),it(gt,Et,35040,0,1,!1),gt},destroyStream:function(ht){At.push(ht)},clear:function(){le(Lt).forEach(ct),At.forEach(ct)},getBuffer:function(ht){return ht&&ht._buffer instanceof ze?ht._buffer:null},restore:function(){le(Lt).forEach(function(ht){ht.buffer=Ne.createBuffer(),Ne.bindBuffer(ht.type,ht.buffer),Ne.bufferData(ht.type,ht.persistentData||ht.byteLength,ht.usage)})},_initBuffer:it}}(gt,Nt,Ne,function(Gt){return on.destroyBuffer(Gt)}),vn=function h(Ne,Je,at,Se){function ze(ht){this.id=mt++,ct[this.id]=this,this.buffer=ht,this.primType=4,this.type=this.vertCount=0}function Ke(ht,Et,gt,kt,It,Ut,Nt){var qt;if(ht.buffer.bind(),Et?((qt=Nt)||me(Et)&&(!e(Et)||me(Et.data))||(qt=Je.oes_element_index_uint?5125:5123),at._initBuffer(ht.buffer,Et,gt,qt,3)):(Ne.bufferData(34963,Ut,gt),ht.buffer.dtype=qt||5121,ht.buffer.usage=gt,ht.buffer.dimension=3,ht.buffer.byteLength=Ut),qt=Nt,!Nt){switch(ht.buffer.dtype){case 5121:case 5120:qt=5121;break;case 5123:case 5122:qt=5123;break;case 5125:case 5124:qt=5125}ht.buffer.dtype=qt}ht.type=qt,0>(Et=It)&&(Et=ht.buffer.byteLength,5123===qt?Et>>=1:5125===qt&&(Et>>=2)),ht.vertCount=Et,Et=kt,0>kt&&(Et=4,1===(kt=ht.buffer.dimension)&&(Et=0),2===kt&&(Et=1),3===kt&&(Et=4)),ht.primType=Et}function it(ht){Se.elementsCount--,delete ct[ht.id],ht.buffer.destroy(),ht.buffer=null}var ct={},mt=0,Lt={uint8:5121,uint16:5123};Je.oes_element_index_uint&&(Lt.uint32=5125),ze.prototype.bind=function(){this.buffer.bind()};var At=[];return{create:function(ht,Et){function gt(Ut){if(Ut)if("number"==typeof Ut)kt(Ut),It.primType=4,It.vertCount=0|Ut,It.type=5121;else{var Nt=null,qt=35044,Xt=-1,Kt=-1,fn=0,nn=0;Array.isArray(Ut)||me(Ut)||e(Ut)?Nt=Ut:("data"in Ut&&(Nt=Ut.data),"usage"in Ut&&(qt=xe[Ut.usage]),"primitive"in Ut&&(Xt=oe[Ut.primitive]),"count"in Ut&&(Kt=0|Ut.count),"type"in Ut&&(nn=Lt[Ut.type]),"length"in Ut?fn=0|Ut.length:(fn=Kt,5123===nn||5122===nn?fn*=2:5125!==nn&&5124!==nn||(fn*=4))),Ke(It,Nt,qt,Xt,Kt,fn,nn)}else kt(),It.primType=4,It.vertCount=0,It.type=5121;return gt}var kt=at.create(null,34963,!0),It=new ze(kt._buffer);return Se.elementsCount++,gt(ht),gt._reglType="elements",gt._elements=It,gt.subdata=function(Ut,Nt){return kt.subdata(Ut,Nt),gt},gt.destroy=function(){it(It)},gt},createStream:function(ht){var Et=At.pop();return Et||(Et=new ze(at.create(null,34963,!0,!1)._buffer)),Ke(Et,ht,35040,-1,-1,0,0),Et},destroyStream:function(ht){At.push(ht)},getElements:function(ht){return"function"==typeof ht&&ht._elements instanceof ze?ht._elements:null},clear:function(){le(ct).forEach(it)}}}(gt,Xt,en,Nt),on=function L(Ne,Je,at,Se,ze,Ke,it){function ct(){this.id=++At,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var gt=Je.oes_vertex_array_object;this.vao=gt?gt.createVertexArrayOES():null,ht[this.id]=this,this.buffers=[]}var mt=at.maxAttributes,Lt=Array(mt);for(at=0;at<mt;++at)Lt[at]=new E;var At=0,ht={},Et={Record:E,scope:{},state:Lt,currentVAO:null,targetVAO:null,restore:Je.oes_vertex_array_object?function(){Je.oes_vertex_array_object&&le(ht).forEach(function(gt){gt.refresh()})}:function(){},createVAO:function(gt){function kt(Ut){var Nt;Array.isArray(Ut)?(Nt=Ut,It.elements&&It.ownsElements&&It.elements.destroy(),It.elements=null,It.ownsElements=!1,It.offset=0,It.count=0,It.instances=-1,It.primitive=4):(Ut.elements?(Nt=Ut.elements,It.ownsElements?("function"==typeof Nt&&"elements"===Nt._reglType?It.elements.destroy():It.elements(Nt),It.ownsElements=!1):Ke.getElements(Ut.elements)?(It.elements=Ut.elements,It.ownsElements=!1):(It.elements=Ke.create(Ut.elements),It.ownsElements=!0)):(It.elements=null,It.ownsElements=!1),Nt=Ut.attributes,It.offset=0,It.count=-1,It.instances=-1,It.primitive=4,It.elements&&(It.count=It.elements._elements.vertCount,It.primitive=It.elements._elements.primType),"offset"in Ut&&(It.offset=0|Ut.offset),"count"in Ut&&(It.count=0|Ut.count),"instances"in Ut&&(It.instances=0|Ut.instances),"primitive"in Ut&&(It.primitive=oe[Ut.primitive])),Ut={};var qt=It.attributes;qt.length=Nt.length;for(var Xt=0;Xt<Nt.length;++Xt){var Kt,fn=Nt[Xt],nn=qt[Xt]=new E,xn=fn.data||fn;Array.isArray(xn)||me(xn)||e(xn)?(It.buffers[Xt]&&(Kt=It.buffers[Xt],me(xn)&&Kt._buffer.byteLength>=xn.byteLength?Kt.subdata(xn):(Kt.destroy(),It.buffers[Xt]=null)),It.buffers[Xt]||(Kt=It.buffers[Xt]=ze.create(fn,34962,!1,!0)),nn.buffer=ze.getBuffer(Kt),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1,Ut[Xt]=1):ze.getBuffer(fn)?(nn.buffer=ze.getBuffer(fn),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1):ze.getBuffer(fn.buffer)?(nn.buffer=ze.getBuffer(fn.buffer),nn.size=0|(+fn.size||nn.buffer.dimension),nn.normalized=!!fn.normalized||!1,nn.type="type"in fn?de[fn.type]:nn.buffer.dtype,nn.offset=0|(fn.offset||0),nn.stride=0|(fn.stride||0),nn.divisor=0|(fn.divisor||0),nn.state=1):"x"in fn&&(nn.x=+fn.x||0,nn.y=+fn.y||0,nn.z=+fn.z||0,nn.w=+fn.w||0,nn.state=2)}for(Kt=0;Kt<It.buffers.length;++Kt)!Ut[Kt]&&It.buffers[Kt]&&(It.buffers[Kt].destroy(),It.buffers[Kt]=null);return It.refresh(),kt}var It=new ct;return Se.vaoCount+=1,kt.destroy=function(){for(var Ut=0;Ut<It.buffers.length;++Ut)It.buffers[Ut]&&It.buffers[Ut].destroy();It.buffers.length=0,It.ownsElements&&(It.elements.destroy(),It.elements=null,It.ownsElements=!1),It.destroy()},kt._vao=It,kt._reglType="vao",kt(gt)},getVAO:function(gt){return"function"==typeof gt&&gt._vao?gt._vao:null},destroyBuffer:function(gt){for(var kt=0;kt<Lt.length;++kt){var It=Lt[kt];It.buffer===gt&&(Ne.disableVertexAttribArray(kt),It.buffer=null)}},setVAO:Je.oes_vertex_array_object?function(gt){gt!==Et.currentVAO&&(Je.oes_vertex_array_object.bindVertexArrayOES(gt?gt.vao:null),Et.currentVAO=gt)}:function(gt){if(gt!==Et.currentVAO){if(gt)gt.bindAttrs();else{for(var kt=Je.angle_instanced_arrays,It=0;It<Lt.length;++It){var Ut=Lt[It];Ut.buffer?(Ne.enableVertexAttribArray(It),Ut.buffer.bind(),Ne.vertexAttribPointer(It,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offfset),kt&&Ut.divisor&&kt.vertexAttribDivisorANGLE(It,Ut.divisor)):(Ne.disableVertexAttribArray(It),Ne.vertexAttrib4f(It,Ut.x,Ut.y,Ut.z,Ut.w))}Ne.bindBuffer(34963,it.elements?it.elements.buffer.buffer:null)}Et.currentVAO=gt}},clear:Je.oes_vertex_array_object?function(){le(ht).forEach(function(gt){gt.destroy()})}:function(){}};return ct.prototype.bindAttrs=function(){for(var gt=Je.angle_instanced_arrays,kt=this.attributes,It=0;It<kt.length;++It){var Ut=kt[It];Ut.buffer?(Ne.enableVertexAttribArray(It),Ne.bindBuffer(34962,Ut.buffer.buffer),Ne.vertexAttribPointer(It,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offset),gt&&Ut.divisor&&gt.vertexAttribDivisorANGLE(It,Ut.divisor)):(Ne.disableVertexAttribArray(It),Ne.vertexAttrib4f(It,Ut.x,Ut.y,Ut.z,Ut.w))}for(gt=kt.length;gt<mt;++gt)Ne.disableVertexAttribArray(gt);(gt=Ke.getElements(this.elements))?Ne.bindBuffer(34963,gt.buffer.buffer):Ne.bindBuffer(34963,null)},ct.prototype.refresh=function(){var gt=Je.oes_vertex_array_object;gt&&(gt.bindVertexArrayOES(this.vao),this.bindAttrs(),Et.currentVAO=null,gt.bindVertexArrayOES(null))},ct.prototype.destroy=function(){if(this.vao){var gt=Je.oes_vertex_array_object;this===Et.currentVAO&&(Et.currentVAO=null,gt.bindVertexArrayOES(null)),gt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ht[this.id]&&(delete ht[this.id],--Se.vaoCount)},Et}(gt,Xt,mn,Nt,en,vn,nn),sn=function C(Ne,Je,at,Se){function ze(kt,It,Ut,Nt){this.name=kt,this.id=It,this.location=Ut,this.info=Nt}function Ke(kt,It){for(var Ut=0;Ut<kt.length;++Ut)if(kt[Ut].id===It.id)return void(kt[Ut].location=It.location);kt.push(It)}function it(kt,It,Ut){if(!(qt=(Ut=35632===kt?Lt:At)[It])){var Nt=Je.str(It),qt=Ne.createShader(kt);Ne.shaderSource(qt,Nt),Ne.compileShader(qt),Ut[It]=qt}return qt}function ct(kt,It){this.id=gt++,this.fragId=kt,this.vertId=It,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Se.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function mt(kt,It,Ut){var Nt;Nt=it(35632,kt.fragId);var qt=it(35633,kt.vertId);if(It=kt.program=Ne.createProgram(),Ne.attachShader(It,Nt),Ne.attachShader(It,qt),Ut)for(Nt=0;Nt<Ut.length;++Nt)Ne.bindAttribLocation(It,(qt=Ut[Nt])[0],qt[1]);Ne.linkProgram(It),qt=Ne.getProgramParameter(It,35718),Se.profile&&(kt.stats.uniformsCount=qt);var Xt=kt.uniforms;for(Nt=0;Nt<qt;++Nt)if(Ut=Ne.getActiveUniform(It,Nt))if(1<Ut.size)for(var Kt=0;Kt<Ut.size;++Kt){var fn=Ut.name.replace("[0]","["+Kt+"]");Ke(Xt,new ze(fn,Je.id(fn),Ne.getUniformLocation(It,fn),Ut))}else Ke(Xt,new ze(Ut.name,Je.id(Ut.name),Ne.getUniformLocation(It,Ut.name),Ut));for(qt=Ne.getProgramParameter(It,35721),Se.profile&&(kt.stats.attributesCount=qt),kt=kt.attributes,Nt=0;Nt<qt;++Nt)(Ut=Ne.getActiveAttrib(It,Nt))&&Ke(kt,new ze(Ut.name,Je.id(Ut.name),Ne.getAttribLocation(It,Ut.name),Ut))}var Lt={},At={},ht={},Et=[],gt=0;return Se.profile&&(at.getMaxUniformsCount=function(){var kt=0;return Et.forEach(function(It){It.stats.uniformsCount>kt&&(kt=It.stats.uniformsCount)}),kt},at.getMaxAttributesCount=function(){var kt=0;return Et.forEach(function(It){It.stats.attributesCount>kt&&(kt=It.stats.attributesCount)}),kt}),{clear:function(){var kt=Ne.deleteShader.bind(Ne);le(Lt).forEach(kt),Lt={},le(At).forEach(kt),At={},Et.forEach(function(It){Ne.deleteProgram(It.program)}),Et.length=0,ht={},at.shaderCount=0},program:function(kt,It,Ut,Nt){var qt=ht[It];qt||(qt=ht[It]={});var Xt=qt[kt];if(Xt&&(Xt.refCount++,!Nt))return Xt;var Kt=new ct(It,kt);return at.shaderCount++,mt(Kt,Ut,Nt),Xt||(qt[kt]=Kt),Et.push(Kt),Q(Kt,{destroy:function(){if(Kt.refCount--,0>=Kt.refCount){Ne.deleteProgram(Kt.program);var fn=Et.indexOf(Kt);Et.splice(fn,1),at.shaderCount--}0>=qt[Kt.vertId].refCount&&(Ne.deleteShader(At[Kt.vertId]),delete At[Kt.vertId],delete ht[Kt.fragId][Kt.vertId]),Object.keys(ht[Kt.fragId]).length||(Ne.deleteShader(Lt[Kt.fragId]),delete Lt[Kt.fragId],delete ht[Kt.fragId])}})},restore:function(){Lt={},At={};for(var kt=0;kt<Et.length;++kt)mt(Et[kt],null,Et[kt].attributes.map(function(It){return[It.location,It.name]}))},shader:it,frag:-1,vert:-1}}(gt,Ut,Nt,Ne),En=function S(Ne,Je,at,Se,ze,Ke,it){function ct(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function mt(Jt,Mn){Jt.internalformat=Mn.internalformat,Jt.format=Mn.format,Jt.type=Mn.type,Jt.compressed=Mn.compressed,Jt.premultiplyAlpha=Mn.premultiplyAlpha,Jt.flipY=Mn.flipY,Jt.unpackAlignment=Mn.unpackAlignment,Jt.colorSpace=Mn.colorSpace,Jt.width=Mn.width,Jt.height=Mn.height,Jt.channels=Mn.channels}function Lt(Jt,Mn){if("object"==typeof Mn&&Mn){"premultiplyAlpha"in Mn&&(Jt.premultiplyAlpha=Mn.premultiplyAlpha),"flipY"in Mn&&(Jt.flipY=Mn.flipY),"alignment"in Mn&&(Jt.unpackAlignment=Mn.alignment),"colorSpace"in Mn&&(Jt.colorSpace=Fn[Mn.colorSpace]),"type"in Mn&&(Jt.type=Bn[Mn.type]);var zt=Jt.width,Zt=Jt.height,rn=Jt.channels,Ln=!1;"shape"in Mn?(zt=Mn.shape[0],Zt=Mn.shape[1],3===Mn.shape.length&&(rn=Mn.shape[2],Ln=!0)):("radius"in Mn&&(zt=Zt=Mn.radius),"width"in Mn&&(zt=Mn.width),"height"in Mn&&(Zt=Mn.height),"channels"in Mn&&(rn=Mn.channels,Ln=!0)),Jt.width=0|zt,Jt.height=0|Zt,Jt.channels=0|rn,zt=!1,"format"in Mn&&(Zt=Jt.internalformat=er[zt=Mn.format],Jt.format=An[Zt],zt in Bn&&!("type"in Mn)&&(Jt.type=Bn[zt]),zt in Xn&&(Jt.compressed=!0),zt=!0),!Ln&&zt?Jt.channels=Pe[Jt.format]:Ln&&!zt&&Jt.channels!==Re[Jt.format]&&(Jt.format=Jt.internalformat=Re[Jt.channels])}}function At(Jt){Ne.pixelStorei(37440,Jt.flipY),Ne.pixelStorei(37441,Jt.premultiplyAlpha),Ne.pixelStorei(37443,Jt.colorSpace),Ne.pixelStorei(3317,Jt.unpackAlignment)}function ht(){ct.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Et(Jt,Mn){var zt=null;if(m(Mn)?zt=Mn:Mn&&(Lt(Jt,Mn),"x"in Mn&&(Jt.xOffset=0|Mn.x),"y"in Mn&&(Jt.yOffset=0|Mn.y),m(Mn.data)&&(zt=Mn.data)),Mn.copy){var Zt=ze.viewportWidth,rn=ze.viewportHeight;Jt.width=Jt.width||Zt-Jt.xOffset,Jt.height=Jt.height||rn-Jt.yOffset,Jt.needsCopy=!0}else if(zt){if(me(zt))Jt.channels=Jt.channels||4,Jt.data=zt,"type"in Mn||5121!==Jt.type||(Jt.type=0|Ee[Object.prototype.toString.call(zt)]);else if(g(zt)){switch(Jt.channels=Jt.channels||4,rn=(Zt=zt).length,Jt.type){case 5121:case 5123:case 5125:case 5126:(rn=pe.allocType(Jt.type,rn)).set(Zt),Jt.data=rn;break;case 36193:Jt.data=f(Zt)}Jt.alignment=1,Jt.needsFree=!0}else if(e(zt)){Zt=zt.data,Array.isArray(Zt)||5121!==Jt.type||(Jt.type=0|Ee[Object.prototype.toString.call(Zt)]);var Ln,Sn,wn,ln,gn=zt.stride;3===(rn=zt.shape).length?(wn=rn[2],ln=gn[2]):ln=wn=1,Ln=rn[0],Sn=rn[1],rn=gn[0],gn=gn[1],Jt.alignment=1,Jt.width=Ln,Jt.height=Sn,Jt.channels=wn,Jt.format=Jt.internalformat=Re[wn],Jt.needsFree=!0,Ln=ln,zt=zt.offset;for(var un=pe.allocType(36193===Jt.type?5126:Jt.type,(wn=Jt.width)*(ln=Jt.height)*(Sn=Jt.channels)),hn=0,bn=0;bn<ln;++bn)for(var In=0;In<wn;++In)for(var Hn=0;Hn<Sn;++Hn)un[hn++]=Zt[rn*In+gn*bn+Ln*Hn+zt];w(Jt,un)}else if(d(zt)===De||d(zt)===fe||d(zt)===ge)Jt.element=d(zt)===De||d(zt)===fe?zt:zt.canvas,Jt.width=Jt.element.width,Jt.height=Jt.element.height,Jt.channels=4;else if(d(zt)===be)Jt.element=zt,Jt.width=zt.width,Jt.height=zt.height,Jt.channels=4;else if(d(zt)===Ie)Jt.element=zt,Jt.width=zt.naturalWidth,Jt.height=zt.naturalHeight,Jt.channels=4;else if(d(zt)===He)Jt.element=zt,Jt.width=zt.videoWidth,Jt.height=zt.videoHeight,Jt.channels=4;else if(y(zt)){for(Zt=Jt.width||zt[0].length,rn=Jt.height||zt.length,gn=Jt.channels,gn=b(zt[0][0])?gn||zt[0][0].length:gn||1,Ln=ue.shape(zt),wn=1,ln=0;ln<Ln.length;++ln)wn*=Ln[ln];wn=pe.allocType(36193===Jt.type?5126:Jt.type,wn),ue.flatten(zt,Ln,"",wn),w(Jt,wn),Jt.alignment=1,Jt.width=Zt,Jt.height=rn,Jt.channels=gn,Jt.format=Jt.internalformat=Re[gn],Jt.needsFree=!0}}else Jt.width=Jt.width||1,Jt.height=Jt.height||1,Jt.channels=Jt.channels||4}function gt(Jt,Mn,zt,Zt,rn){var Ln=Jt.element,Sn=Jt.data,wn=Jt.internalformat,ln=Jt.format,gn=Jt.type,un=Jt.width,hn=Jt.height;At(Jt),Ln?Ne.texSubImage2D(Mn,rn,zt,Zt,ln,gn,Ln):Jt.compressed?Ne.compressedTexSubImage2D(Mn,rn,zt,Zt,wn,un,hn,Sn):Jt.needsCopy?(Se(),Ne.copyTexSubImage2D(Mn,rn,zt,Zt,Jt.xOffset,Jt.yOffset,un,hn)):Ne.texSubImage2D(Mn,rn,zt,Zt,un,hn,ln,gn,Sn)}function kt(){return Tn.pop()||new ht}function It(Jt){Jt.needsFree&&pe.freeType(Jt.data),ht.call(Jt),Tn.push(Jt)}function Ut(){ct.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Nt(Jt,Mn,zt){var Zt=Jt.images[0]=kt();Jt.mipmask=1,Zt.width=Jt.width=Mn,Zt.height=Jt.height=zt,Zt.channels=Jt.channels=4}function qt(Jt,Mn){var zt=null;if(m(Mn))mt(zt=Jt.images[0]=kt(),Jt),Et(zt,Mn),Jt.mipmask=1;else if(Lt(Jt,Mn),Array.isArray(Mn.mipmap))for(var Zt=Mn.mipmap,rn=0;rn<Zt.length;++rn)mt(zt=Jt.images[rn]=kt(),Jt),zt.width>>=rn,zt.height>>=rn,Et(zt,Zt[rn]),Jt.mipmask|=1<<rn;else mt(zt=Jt.images[0]=kt(),Jt),Et(zt,Mn),Jt.mipmask=1;mt(Jt,Jt.images[0])}function Xt(Jt,Mn){for(var zt=Jt.images,Zt=0;Zt<zt.length&&zt[Zt];++Zt){var rn=zt[Zt],Ln=Mn,Sn=Zt,wn=rn.element,ln=rn.data,gn=rn.internalformat,un=rn.format,hn=rn.type,bn=rn.width,In=rn.height;At(rn),wn?Ne.texImage2D(Ln,Sn,un,un,hn,wn):rn.compressed?Ne.compressedTexImage2D(Ln,Sn,gn,bn,In,0,ln):rn.needsCopy?(Se(),Ne.copyTexImage2D(Ln,Sn,un,rn.xOffset,rn.yOffset,bn,In,0)):Ne.texImage2D(Ln,Sn,un,bn,In,0,un,hn,ln||null)}}function Kt(){var Jt=Rn.pop()||new Ut;ct.call(Jt);for(var Mn=Jt.mipmask=0;16>Mn;++Mn)Jt.images[Mn]=null;return Jt}function fn(Jt){for(var Mn=Jt.images,zt=0;zt<Mn.length;++zt)Mn[zt]&&It(Mn[zt]),Mn[zt]=null;Rn.push(Jt)}function nn(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function xn(Jt,Mn){"min"in Mn&&(Jt.minFilter=zn[Mn.min],0<=Me.indexOf(Jt.minFilter)&&!("faces"in Mn)&&(Jt.genMipmaps=!0)),"mag"in Mn&&(Jt.magFilter=kn[Mn.mag]);var zt=Jt.wrapS,Zt=Jt.wrapT;if("wrap"in Mn){var rn=Mn.wrap;"string"==typeof rn?zt=Zt=En[rn]:Array.isArray(rn)&&(zt=En[rn[0]],Zt=En[rn[1]])}else"wrapS"in Mn&&(zt=En[Mn.wrapS]),"wrapT"in Mn&&(Zt=En[Mn.wrapT]);if(Jt.wrapS=zt,Jt.wrapT=Zt,"anisotropic"in Mn&&(Jt.anisotropic=Mn.anisotropic),"mipmap"in Mn){switch(zt=!1,typeof Mn.mipmap){case"string":Jt.mipmapHint=sn[Mn.mipmap],zt=Jt.genMipmaps=!0;break;case"boolean":zt=Jt.genMipmaps=Mn.mipmap;break;case"object":Jt.genMipmaps=!1,zt=!0}!zt||"min"in Mn||(Jt.minFilter=9984)}}function jn(Jt,Mn){Ne.texParameteri(Mn,10241,Jt.minFilter),Ne.texParameteri(Mn,10240,Jt.magFilter),Ne.texParameteri(Mn,10242,Jt.wrapS),Ne.texParameteri(Mn,10243,Jt.wrapT),Je.ext_texture_filter_anisotropic&&Ne.texParameteri(Mn,34046,Jt.anisotropic),Jt.genMipmaps&&(Ne.hint(33170,Jt.mipmapHint),Ne.generateMipmap(Mn))}function mn(Jt){ct.call(this),this.mipmask=0,this.internalformat=6408,this.id=qn++,this.refCount=1,this.target=Jt,this.texture=Ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new nn,it.profile&&(this.stats={size:0})}function en(Jt){Ne.activeTexture(33984),Ne.bindTexture(Jt.target,Jt.texture)}function vn(){var Jt=or[0];Jt?Ne.bindTexture(Jt.target,Jt.texture):Ne.bindTexture(3553,null)}function on(Jt){var Mn=Jt.texture,zt=Jt.unit,Zt=Jt.target;0<=zt&&(Ne.activeTexture(33984+zt),Ne.bindTexture(Zt,null),or[zt]=null),Ne.deleteTexture(Mn),Jt.texture=null,Jt.params=null,Jt.pixels=null,Jt.refCount=0,delete Un[Jt.id],Ke.textureCount--}var sn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},En={repeat:10497,clamp:33071,mirror:33648},kn={nearest:9728,linear:9729},zn=Q({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},kn),Fn={none:0,browser:37444},Bn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},er={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Xn={};Je.ext_srgb&&(er.srgb=35904,er.srgba=35906),Je.oes_texture_float&&(Bn.float32=Bn.float=5126),Je.oes_texture_half_float&&(Bn.float16=Bn["half float"]=36193),Je.webgl_depth_texture&&(Q(er,{depth:6402,"depth stencil":34041}),Q(Bn,{uint16:5123,uint32:5125,"depth stencil":34042})),Je.webgl_compressed_texture_s3tc&&Q(Xn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Je.webgl_compressed_texture_atc&&Q(Xn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Je.webgl_compressed_texture_pvrtc&&Q(Xn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Je.webgl_compressed_texture_etc1&&(Xn["rgb etc1"]=36196);var mr=Array.prototype.slice.call(Ne.getParameter(34467));Object.keys(Xn).forEach(function(Jt){var Mn=Xn[Jt];0<=mr.indexOf(Mn)&&(er[Jt]=Mn)});var ur=Object.keys(er);at.textureFormats=ur;var $n=[];Object.keys(er).forEach(function(Jt){$n[er[Jt]]=Jt});var lr=[];Object.keys(Bn).forEach(function(Jt){lr[Bn[Jt]]=Jt});var hr=[];Object.keys(kn).forEach(function(Jt){hr[kn[Jt]]=Jt});var Gt=[];Object.keys(zn).forEach(function(Jt){Gt[zn[Jt]]=Jt});var pn=[];Object.keys(En).forEach(function(Jt){pn[En[Jt]]=Jt});var An=ur.reduce(function(Jt,Mn){var zt=er[Mn];return Jt[zt]=6409===zt||6406===zt||6409===zt||6410===zt||6402===zt||34041===zt||Je.ext_srgb&&(35904===zt||35906===zt)?zt:32855===zt||0<=Mn.indexOf("rgba")?6408:6407,Jt},{}),Tn=[],Rn=[],qn=0,Un={},Yn=at.maxTextureUnits,or=Array(Yn).map(function(){return null});return Q(mn.prototype,{bind:function(){this.bindCount+=1;var Jt=this.unit;if(0>Jt){for(var Mn=0;Mn<Yn;++Mn){var zt=or[Mn];if(zt){if(0<zt.bindCount)continue;zt.unit=-1}or[Mn]=this,Jt=Mn;break}it.profile&&Ke.maxTextureUnits<Jt+1&&(Ke.maxTextureUnits=Jt+1),this.unit=Jt,Ne.activeTexture(33984+Jt),Ne.bindTexture(this.target,this.texture)}return Jt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&on(this)}}),it.profile&&(Ke.getTotalTextureSize=function(){var Jt=0;return Object.keys(Un).forEach(function(Mn){Jt+=Un[Mn].stats.size}),Jt}),{create2D:function(Jt,Mn){function zt(rn,Ln){var Sn=Zt.texInfo;nn.call(Sn);var wn=Kt();return"number"==typeof rn?Nt(wn,0|rn,"number"==typeof Ln?0|Ln:0|rn):rn?(xn(Sn,rn),qt(wn,rn)):Nt(wn,1,1),Sn.genMipmaps&&(wn.mipmask=(wn.width<<1)-1),Zt.mipmask=wn.mipmask,mt(Zt,wn),Zt.internalformat=wn.internalformat,zt.width=wn.width,zt.height=wn.height,en(Zt),Xt(wn,3553),jn(Sn,3553),vn(),fn(wn),it.profile&&(Zt.stats.size=u(Zt.internalformat,Zt.type,wn.width,wn.height,Sn.genMipmaps,!1)),zt.format=$n[Zt.internalformat],zt.type=lr[Zt.type],zt.mag=hr[Sn.magFilter],zt.min=Gt[Sn.minFilter],zt.wrapS=pn[Sn.wrapS],zt.wrapT=pn[Sn.wrapT],zt}var Zt=new mn(3553);return Un[Zt.id]=Zt,Ke.textureCount++,zt(Jt,Mn),zt.subimage=function(rn,Ln,Sn,wn){Ln|=0,Sn|=0,wn|=0;var ln=kt();return mt(ln,Zt),ln.width=0,ln.height=0,Et(ln,rn),ln.width=ln.width||(Zt.width>>wn)-Ln,ln.height=ln.height||(Zt.height>>wn)-Sn,en(Zt),gt(ln,3553,Ln,Sn,wn),vn(),It(ln),zt},zt.resize=function(rn,Ln){var Sn=0|rn,wn=0|Ln||Sn;if(Sn===Zt.width&&wn===Zt.height)return zt;zt.width=Zt.width=Sn,zt.height=Zt.height=wn,en(Zt);for(var ln=0;Zt.mipmask>>ln;++ln){var gn=Sn>>ln,un=wn>>ln;if(!gn||!un)break;Ne.texImage2D(3553,ln,Zt.format,gn,un,0,Zt.format,Zt.type,null)}return vn(),it.profile&&(Zt.stats.size=u(Zt.internalformat,Zt.type,Sn,wn,!1,!1)),zt},zt._reglType="texture2d",zt._texture=Zt,it.profile&&(zt.stats=Zt.stats),zt.destroy=function(){Zt.decRef()},zt},createCube:function(Jt,Mn,zt,Zt,rn,Ln){function Sn(gn,un,hn,bn,In,Hn){var Wn,Gn=wn.texInfo;for(nn.call(Gn),Wn=0;6>Wn;++Wn)ln[Wn]=Kt();if("number"!=typeof gn&&gn){if("object"==typeof gn)if(un)qt(ln[0],gn),qt(ln[1],un),qt(ln[2],hn),qt(ln[3],bn),qt(ln[4],In),qt(ln[5],Hn);else if(xn(Gn,gn),Lt(wn,gn),"faces"in gn)for(gn=gn.faces,Wn=0;6>Wn;++Wn)mt(ln[Wn],wn),qt(ln[Wn],gn[Wn]);else for(Wn=0;6>Wn;++Wn)qt(ln[Wn],gn)}else for(gn=0|gn||1,Wn=0;6>Wn;++Wn)Nt(ln[Wn],gn,gn);for(mt(wn,ln[0]),wn.mipmask=Gn.genMipmaps?(ln[0].width<<1)-1:ln[0].mipmask,wn.internalformat=ln[0].internalformat,Sn.width=ln[0].width,Sn.height=ln[0].height,en(wn),Wn=0;6>Wn;++Wn)Xt(ln[Wn],34069+Wn);for(jn(Gn,34067),vn(),it.profile&&(wn.stats.size=u(wn.internalformat,wn.type,Sn.width,Sn.height,Gn.genMipmaps,!0)),Sn.format=$n[wn.internalformat],Sn.type=lr[wn.type],Sn.mag=hr[Gn.magFilter],Sn.min=Gt[Gn.minFilter],Sn.wrapS=pn[Gn.wrapS],Sn.wrapT=pn[Gn.wrapT],Wn=0;6>Wn;++Wn)fn(ln[Wn]);return Sn}var wn=new mn(34067);Un[wn.id]=wn,Ke.cubeCount++;var ln=Array(6);return Sn(Jt,Mn,zt,Zt,rn,Ln),Sn.subimage=function(gn,un,hn,bn,In){hn|=0,bn|=0,In|=0;var Hn=kt();return mt(Hn,wn),Hn.width=0,Hn.height=0,Et(Hn,un),Hn.width=Hn.width||(wn.width>>In)-hn,Hn.height=Hn.height||(wn.height>>In)-bn,en(wn),gt(Hn,34069+gn,hn,bn,In),vn(),It(Hn),Sn},Sn.resize=function(gn){if((gn|=0)!==wn.width){Sn.width=wn.width=gn,Sn.height=wn.height=gn,en(wn);for(var un=0;6>un;++un)for(var hn=0;wn.mipmask>>hn;++hn)Ne.texImage2D(34069+un,hn,wn.format,gn>>hn,gn>>hn,0,wn.format,wn.type,null);return vn(),it.profile&&(wn.stats.size=u(wn.internalformat,wn.type,Sn.width,Sn.height,!1,!0)),Sn}},Sn._reglType="textureCube",Sn._texture=wn,it.profile&&(Sn.stats=wn.stats),Sn.destroy=function(){wn.decRef()},Sn},clear:function(){for(var Jt=0;Jt<Yn;++Jt)Ne.activeTexture(33984+Jt),Ne.bindTexture(3553,null),or[Jt]=null;le(Un).forEach(on),Ke.cubeCount=0,Ke.textureCount=0},getTexture:function(Jt){return null},restore:function(){for(var Jt=0;Jt<Yn;++Jt){var Mn=or[Jt];Mn&&(Mn.bindCount=0,Mn.unit=-1,or[Jt]=null)}le(Un).forEach(function(zt){zt.texture=Ne.createTexture(),Ne.bindTexture(zt.target,zt.texture);for(var Zt=0;32>Zt;++Zt)if(zt.mipmask&1<<Zt)if(3553===zt.target)Ne.texImage2D(3553,Zt,zt.internalformat,zt.width>>Zt,zt.height>>Zt,0,zt.internalformat,zt.type,null);else for(var rn=0;6>rn;++rn)Ne.texImage2D(34069+rn,Zt,zt.internalformat,zt.width>>Zt,zt.height>>Zt,0,zt.internalformat,zt.type,null);jn(zt.texInfo,zt.target)})},refresh:function(){for(var Jt=0;Jt<Yn;++Jt){var Mn=or[Jt];Mn&&(Mn.bindCount=0,Mn.unit=-1,or[Jt]=null),Ne.activeTexture(33984+Jt),Ne.bindTexture(3553,null),Ne.bindTexture(34067,null)}}}}(gt,Xt,mn,function(){Fn.procs.poll()},jn,Nt,Ne),kn=function(Ne,Je,at,Se,ze){function Ke(ht){this.id=Lt++,this.refCount=1,this.renderbuffer=ht,this.format=32854,this.height=this.width=0,ze.profile&&(this.stats={size:0})}function it(ht){var Et=ht.renderbuffer;Ne.bindRenderbuffer(36161,null),Ne.deleteRenderbuffer(Et),ht.renderbuffer=null,ht.refCount=0,delete At[ht.id],Se.renderbufferCount--}var ct={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Je.ext_srgb&&(ct.srgba=35907),Je.ext_color_buffer_half_float&&(ct.rgba16f=34842,ct.rgb16f=34843),Je.webgl_color_buffer_float&&(ct.rgba32f=34836);var mt=[];Object.keys(ct).forEach(function(ht){mt[ct[ht]]=ht});var Lt=0,At={};return Ke.prototype.decRef=function(){0>=--this.refCount&&it(this)},ze.profile&&(Se.getTotalRenderbufferSize=function(){var ht=0;return Object.keys(At).forEach(function(Et){ht+=At[Et].stats.size}),ht}),{create:function(ht,Et){function gt(It,Ut){var Nt=0,qt=0,Xt=32854;if("object"==typeof It&&It?("shape"in It?(Nt=0|(qt=It.shape)[0],qt=0|qt[1]):("radius"in It&&(Nt=qt=0|It.radius),"width"in It&&(Nt=0|It.width),"height"in It&&(qt=0|It.height)),"format"in It&&(Xt=ct[It.format])):"number"==typeof It?(Nt=0|It,qt="number"==typeof Ut?0|Ut:Nt):It||(Nt=qt=1),Nt!==kt.width||qt!==kt.height||Xt!==kt.format)return gt.width=kt.width=Nt,gt.height=kt.height=qt,kt.format=Xt,Ne.bindRenderbuffer(36161,kt.renderbuffer),Ne.renderbufferStorage(36161,Xt,Nt,qt),ze.profile&&(kt.stats.size=st[kt.format]*kt.width*kt.height),gt.format=mt[kt.format],gt}var kt=new Ke(Ne.createRenderbuffer());return At[kt.id]=kt,Se.renderbufferCount++,gt(ht,Et),gt.resize=function(It,Ut){var Nt=0|It,qt=0|Ut||Nt;return Nt===kt.width&&qt===kt.height||(gt.width=kt.width=Nt,gt.height=kt.height=qt,Ne.bindRenderbuffer(36161,kt.renderbuffer),Ne.renderbufferStorage(36161,kt.format,Nt,qt),ze.profile&&(kt.stats.size=st[kt.format]*kt.width*kt.height)),gt},gt._reglType="renderbuffer",gt._renderbuffer=kt,ze.profile&&(gt.stats=kt.stats),gt.destroy=function(){kt.decRef()},gt},clear:function(){le(At).forEach(it)},restore:function(){le(At).forEach(function(ht){ht.renderbuffer=Ne.createRenderbuffer(),Ne.bindRenderbuffer(36161,ht.renderbuffer),Ne.renderbufferStorage(36161,ht.format,ht.width,ht.height)}),Ne.bindRenderbuffer(36161,null)}}}(gt,Xt,0,Nt,Ne),zn=function _(Ne,Je,at,Se,ze,Ke){function it(mn,en,vn){this.target=mn,this.texture=en,this.renderbuffer=vn;var on=mn=0;en?(mn=en.width,on=en.height):vn&&(mn=vn.width,on=vn.height),this.width=mn,this.height=on}function ct(mn){mn&&(mn.texture&&mn.texture._texture.decRef(),mn.renderbuffer&&mn.renderbuffer._renderbuffer.decRef())}function mt(mn,en,vn){mn&&(mn.texture?mn.texture._texture.refCount+=1:mn.renderbuffer._renderbuffer.refCount+=1)}function Lt(mn,en){en&&(en.texture?Ne.framebufferTexture2D(36160,mn,en.target,en.texture._texture.texture,0):Ne.framebufferRenderbuffer(36160,mn,36161,en.renderbuffer._renderbuffer.renderbuffer))}function At(mn){var en=3553,vn=null,on=null,sn=mn;return"object"==typeof mn&&(sn=mn.data,"target"in mn&&(en=0|mn.target)),"texture2d"===(mn=sn._reglType)||"textureCube"===mn?vn=sn:"renderbuffer"===mn&&(on=sn,en=36161),new it(en,vn,on)}function ht(mn,en,vn,on,sn){return vn?((mn=Se.create2D({width:mn,height:en,format:on,type:sn}))._texture.refCount=0,new it(3553,mn,null)):((mn=ze.create({width:mn,height:en,format:on}))._renderbuffer.refCount=0,new it(36161,null,mn))}function Et(mn){return mn&&(mn.texture||mn.renderbuffer)}function gt(mn,en,vn){mn&&(mn.texture?mn.texture.resize(en,vn):mn.renderbuffer&&mn.renderbuffer.resize(en,vn),mn.width=en,mn.height=vn)}function kt(){this.id=xn++,jn[this.id]=this,this.framebuffer=Ne.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function It(mn){mn.colorAttachments.forEach(ct),ct(mn.depthAttachment),ct(mn.stencilAttachment),ct(mn.depthStencilAttachment)}function Ut(mn){Ne.deleteFramebuffer(mn.framebuffer),mn.framebuffer=null,Ke.framebufferCount--,delete jn[mn.id]}function Nt(mn){var en;Ne.bindFramebuffer(36160,mn.framebuffer);var vn=mn.colorAttachments;for(en=0;en<vn.length;++en)Lt(36064+en,vn[en]);for(en=vn.length;en<at.maxColorAttachments;++en)Ne.framebufferTexture2D(36160,36064+en,3553,null,0);Ne.framebufferTexture2D(36160,33306,3553,null,0),Ne.framebufferTexture2D(36160,36096,3553,null,0),Ne.framebufferTexture2D(36160,36128,3553,null,0),Lt(36096,mn.depthAttachment),Lt(36128,mn.stencilAttachment),Lt(33306,mn.depthStencilAttachment),Ne.checkFramebufferStatus(36160),Ne.isContextLost(),Ne.bindFramebuffer(36160,Xt.next?Xt.next.framebuffer:null),Xt.cur=Xt.next,Ne.getError()}function qt(mn,en){function vn(sn,En){var kn,zn=0,Fn=0,Bn=!0,er=!0;kn=null;var Xn=!0,mr="rgba",ur="uint8",$n=1,lr=null,hr=null,Gt=null,pn=!1;"number"==typeof sn?(zn=0|sn,Fn=0|En||zn):sn?("shape"in sn?(zn=(Fn=sn.shape)[0],Fn=Fn[1]):("radius"in sn&&(zn=Fn=sn.radius),"width"in sn&&(zn=sn.width),"height"in sn&&(Fn=sn.height)),("color"in sn||"colors"in sn)&&(kn=sn.color||sn.colors,Array.isArray(kn)),kn||("colorCount"in sn&&($n=0|sn.colorCount),"colorTexture"in sn&&(Xn=!!sn.colorTexture,mr="rgba4"),"colorType"in sn&&(ur=sn.colorType,!Xn)&&("half float"===ur||"float16"===ur?mr="rgba16f":"float"!==ur&&"float32"!==ur||(mr="rgba32f")),"colorFormat"in sn&&(0<=Kt.indexOf(mr=sn.colorFormat)?Xn=!0:0<=fn.indexOf(mr)&&(Xn=!1))),("depthTexture"in sn||"depthStencilTexture"in sn)&&(pn=!(!sn.depthTexture&&!sn.depthStencilTexture)),"depth"in sn&&("boolean"==typeof sn.depth?Bn=sn.depth:(lr=sn.depth,er=!1)),"stencil"in sn&&("boolean"==typeof sn.stencil?er=sn.stencil:(hr=sn.stencil,Bn=!1)),"depthStencil"in sn&&("boolean"==typeof sn.depthStencil?Bn=er=sn.depthStencil:(Gt=sn.depthStencil,er=Bn=!1))):zn=Fn=1;var An=null,Tn=null,Rn=null,qn=null;if(Array.isArray(kn))An=kn.map(At);else if(kn)An=[At(kn)];else for(An=Array($n),kn=0;kn<$n;++kn)An[kn]=ht(zn,Fn,Xn,mr,ur);for(zn=zn||An[0].width,Fn=Fn||An[0].height,lr?Tn=At(lr):Bn&&!er&&(Tn=ht(zn,Fn,pn,"depth","uint32")),hr?Rn=At(hr):er&&!Bn&&(Rn=ht(zn,Fn,!1,"stencil","uint8")),Gt?qn=At(Gt):!lr&&!hr&&er&&Bn&&(qn=ht(zn,Fn,pn,"depth stencil","depth stencil")),Bn=null,kn=0;kn<An.length;++kn)mt(An[kn]),An[kn]&&An[kn].texture&&(er=wt[An[kn].texture._texture.format]*_t[An[kn].texture._texture.type],null===Bn&&(Bn=er));return mt(Tn),mt(Rn),mt(qn),It(on),on.width=zn,on.height=Fn,on.colorAttachments=An,on.depthAttachment=Tn,on.stencilAttachment=Rn,on.depthStencilAttachment=qn,vn.color=An.map(Et),vn.depth=Et(Tn),vn.stencil=Et(Rn),vn.depthStencil=Et(qn),vn.width=on.width,vn.height=on.height,Nt(on),vn}var on=new kt;return Ke.framebufferCount++,vn(mn,en),Q(vn,{resize:function(sn,En){var kn=Math.max(0|sn,1),zn=Math.max(0|En||kn,1);if(kn===on.width&&zn===on.height)return vn;for(var Fn=on.colorAttachments,Bn=0;Bn<Fn.length;++Bn)gt(Fn[Bn],kn,zn);return gt(on.depthAttachment,kn,zn),gt(on.stencilAttachment,kn,zn),gt(on.depthStencilAttachment,kn,zn),on.width=vn.width=kn,on.height=vn.height=zn,Nt(on),vn},_reglType:"framebuffer",_framebuffer:on,destroy:function(){Ut(on),It(on)},use:function(sn){Xt.setFBO({framebuffer:vn},sn)}})}var Xt={cur:null,next:null,dirty:!1,setFBO:null},Kt=["rgba"],fn=["rgba4","rgb565","rgb5 a1"];Je.ext_srgb&&fn.push("srgba"),Je.ext_color_buffer_half_float&&fn.push("rgba16f","rgb16f"),Je.webgl_color_buffer_float&&fn.push("rgba32f");var nn=["uint8"];Je.oes_texture_half_float&&nn.push("half float","float16"),Je.oes_texture_float&&nn.push("float","float32");var xn=0,jn={};return Q(Xt,{getFramebuffer:function(mn){return"function"==typeof mn&&"framebuffer"===mn._reglType&&(mn=mn._framebuffer)instanceof kt?mn:null},create:qt,createCube:function(mn){function en(on){var sn,En={color:null},kn=0,zn=null;sn="rgba";var Fn="uint8",Bn=1;if("number"==typeof on?kn=0|on:on?("shape"in on?kn=on.shape[0]:("radius"in on&&(kn=0|on.radius),"width"in on?kn=0|on.width:"height"in on&&(kn=0|on.height)),("color"in on||"colors"in on)&&(zn=on.color||on.colors,Array.isArray(zn)),zn||("colorCount"in on&&(Bn=0|on.colorCount),"colorType"in on&&(Fn=on.colorType),"colorFormat"in on&&(sn=on.colorFormat)),"depth"in on&&(En.depth=on.depth),"stencil"in on&&(En.stencil=on.stencil),"depthStencil"in on&&(En.depthStencil=on.depthStencil)):kn=1,zn)if(Array.isArray(zn))for(on=[],sn=0;sn<zn.length;++sn)on[sn]=zn[sn];else on=[zn];else for(on=Array(Bn),zn={radius:kn,format:sn,type:Fn},sn=0;sn<Bn;++sn)on[sn]=Se.createCube(zn);for(En.color=Array(on.length),sn=0;sn<on.length;++sn)Bn=on[sn],kn=kn||Bn.width,En.color[sn]={target:34069,data:on[sn]};for(sn=0;6>sn;++sn){for(Bn=0;Bn<on.length;++Bn)En.color[Bn].target=34069+sn;0<sn&&(En.depth=vn[0].depth,En.stencil=vn[0].stencil,En.depthStencil=vn[0].depthStencil),vn[sn]?vn[sn](En):vn[sn]=qt(En)}return Q(en,{width:kn,height:kn,color:on})}var vn=Array(6);return en(mn),Q(en,{faces:vn,resize:function(on){var sn=0|on;if(sn===en.width)return en;var En=en.color;for(on=0;on<En.length;++on)En[on].resize(sn);for(on=0;6>on;++on)vn[on].resize(sn);return en.width=en.height=sn,en},_reglType:"framebufferCube",destroy:function(){vn.forEach(function(on){on.destroy()})}})},clear:function(){le(jn).forEach(Ut)},restore:function(){Xt.cur=null,Xt.next=null,Xt.dirty=!0,le(jn).forEach(function(mn){mn.framebuffer=Ne.createFramebuffer(),Nt(mn)})}})}(gt,Xt,mn,En,kn,Nt),Fn=H(gt,Ut,Xt,mn,en,vn,0,zn,{},on,sn,nn,jn,Kt,qt,Ne),Bn=(Ut=function P(Ne,Je,at,Se,ze,Ke,it){function ct(mt){var Lt;Lt=null===Je.next?5121:Je.next.colorAttachments[0].texture._texture.type;var At=0,ht=0,Et=Se.framebufferWidth,gt=Se.framebufferHeight,kt=null;return me(mt)?kt=mt:mt&&(At=0|mt.x,ht=0|mt.y,Et=0|(mt.width||Se.framebufferWidth-At),gt=0|(mt.height||Se.framebufferHeight-ht),kt=mt.data||null),at(),mt=Et*gt*4,kt||(5121===Lt?kt=new Uint8Array(mt):5126===Lt&&(kt=kt||new Float32Array(mt))),Ne.pixelStorei(3333,4),Ne.readPixels(At,ht,Et,gt,6408,Lt,kt),kt}return function(mt){return mt&&"framebuffer"in mt?(Je.setFBO({framebuffer:(Lt=mt).framebuffer},function(){At=ct(Lt)}),At):ct(mt);var Lt,At}}(gt,zn,Fn.procs.poll,jn),Fn.next),er=gt.canvas,Xn=[],mr=[],ur=[],$n=[Ne.onDestroy],lr=null;er&&(er.addEventListener("webglcontextlost",ze,!1),er.addEventListener("webglcontextrestored",Ke,!1));var hr=zn.setFBO=it({framebuffer:re.define.call(null,1,"framebuffer")});return ht(),kt=Q(it,{clear:function(Gt){if("framebuffer"in Gt)if(Gt.framebuffer&&"framebufferCube"===Gt.framebuffer_reglType)for(var pn=0;6>pn;++pn)hr(Q({framebuffer:Gt.framebuffer.faces[pn]},Gt),ct);else hr(Gt,ct);else ct(0,Gt)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:it({}),buffer:function(Gt){return en.create(Gt,34962,!1,!1)},elements:function(Gt){return vn.create(Gt,!1)},texture:En.create2D,cube:En.createCube,renderbuffer:kn.create,framebuffer:zn.create,framebufferCube:zn.createCube,vao:on.createVAO,attributes:kt,frame:mt,on:function(Gt,pn){var An;switch(Gt){case"frame":return mt(pn);case"lost":An=mr;break;case"restore":An=ur;break;case"destroy":An=$n}return An.push(pn),{cancel:function(){for(var Tn=0;Tn<An.length;++Tn)if(An[Tn]===pn){An[Tn]=An[An.length-1],An.pop();break}}}},limits:mn,hasExtension:function(Gt){return 0<=mn.extensions.indexOf(Gt.toLowerCase())},read:Ut,destroy:function(){Xn.length=0,Se(),er&&(er.removeEventListener("webglcontextlost",ze),er.removeEventListener("webglcontextrestored",Ke)),sn.clear(),zn.clear(),kn.clear(),on.clear(),En.clear(),vn.clear(),en.clear(),Kt&&Kt.clear(),$n.forEach(function(Gt){Gt()})},_gl:gt,_refresh:ht,poll:function(){At(),Kt&&Kt.update()},now:Et,stats:Nt,getCachedCode:function(){return qt},preloadCachedCode:function(Gt){Object.entries(Gt).forEach(function(pn){qt[pn[0]]=pn[1]})}}),Ne.onDone(null,kt),kt}}()},71665:function($,I,t){var M=t(12856),k=M.Buffer;function l(x,p){for(var s in x)p[s]=x[s]}function T(x,p,s){return k(x,p,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?$.exports=M:(l(M,I),I.Buffer=T),T.prototype=Object.create(k.prototype),l(k,T),T.from=function(x,p,s){if("number"==typeof x)throw new TypeError("Argument must not be a number");return k(x,p,s)},T.alloc=function(x,p,s){if("number"!=typeof x)throw new TypeError("Argument must be a number");var e=k(x);return void 0!==p?"string"==typeof s?e.fill(p,s):e.fill(p):e.fill(0),e},T.allocUnsafe=function(x){if("number"!=typeof x)throw new TypeError("Argument must be a number");return k(x)},T.allocUnsafeSlow=function(x){if("number"!=typeof x)throw new TypeError("Argument must be a number");return M.SlowBuffer(x)}},21630:function($,I,t){$.exports=k;var M=t(15398).EventEmitter;function k(){M.call(this)}t(42018)(k,M),k.Readable=t(40410),k.Writable=t(37493),k.Duplex=t(37865),k.Transform=t(74308),k.PassThrough=t(66897),k.finished=t(12726),k.pipeline=t(10168),k.Stream=k,k.prototype.pipe=function(l,T){var x=this;function p(i){l.writable&&!1===l.write(i)&&x.pause&&x.pause()}function s(){x.readable&&x.resume&&x.resume()}x.on("data",p),l.on("drain",s),l._isStdio||T&&!1===T.end||(x.on("end",o),x.on("close",r));var e=!1;function o(){e||(e=!0,l.end())}function r(){e||(e=!0,"function"==typeof l.destroy&&l.destroy())}function n(i){if(a(),0===M.listenerCount(this,"error"))throw i}function a(){x.removeListener("data",p),l.removeListener("drain",s),x.removeListener("end",o),x.removeListener("close",r),x.removeListener("error",n),l.removeListener("error",n),x.removeListener("end",a),x.removeListener("close",a),l.removeListener("close",a)}return x.on("error",n),l.on("error",n),x.on("end",a),x.on("close",a),l.on("close",a),l.emit("pipe",x),l}},74322:function($){"use strict";var I={};function t(k,l,T){T||(T=Error);var x=function(p){var s,e;function o(r,n,a){return p.call(this,"string"==typeof l?l:l(r,n,a))||this}return e=p,(s=o).prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e,o}(T);x.prototype.name=T.name,x.prototype.code=k,I[k]=x}function M(k,l){if(Array.isArray(k)){var T=k.length;return k=k.map(function(x){return String(x)}),T>2?"one of ".concat(l," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:2===T?"one of ".concat(l," ").concat(k[0]," or ").concat(k[1]):"of ".concat(l," ").concat(k[0])}return"of ".concat(l," ").concat(String(k))}t("ERR_INVALID_OPT_VALUE",function(k,l){return'The value "'+l+'" is invalid for option "'+k+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(k,l,T){var x,s,e,o,n,i;if("string"==typeof l&&"not "===l.substr(0,"not ".length)?(x="must not be",l=l.replace(/^not /,"")):x="must be",n=k,(void 0===i||i>n.length)&&(i=n.length)," argument"===n.substring(i-" argument".length,i))s="The ".concat(k," ").concat(x," ").concat(M(l,"type"));else{var r=("number"!=typeof o&&(o=0),o+1>(e=k).length||-1===e.indexOf(".",o)?"argument":"property");s='The "'.concat(k,'" ').concat(r," ").concat(x," ").concat(M(l,"type"))}return s+". Received type ".concat(typeof T)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.q=I},37865:function($,I,t){"use strict";var M=t(90386),k=Object.keys||function(n){var a=[];for(var i in n)a.push(i);return a};$.exports=e;var l=t(40410),T=t(37493);t(42018)(e,l);for(var x=k(T.prototype),p=0;p<x.length;p++){var s=x[p];e.prototype[s]||(e.prototype[s]=T.prototype[s])}function e(n){if(!(this instanceof e))return new e(n);l.call(this,n),T.call(this,n),this.allowHalfOpen=!0,n&&(!1===n.readable&&(this.readable=!1),!1===n.writable&&(this.writable=!1),!1===n.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||M.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function($,I,t){"use strict";$.exports=k;var M=t(74308);function k(l){if(!(this instanceof k))return new k(l);M.call(this,l)}t(42018)(k,M),k.prototype._transform=function(l,T,x){x(null,l)}},40410:function($,I,t){"use strict";var M,k=t(90386);$.exports=w,w.ReadableState=m,t(15398);var l,T=function(Y,q){return Y.listeners(q).length},x=t(71405),p=t(12856).Buffer,s=t.g.Uint8Array||function(){},e=t(40964);l=e&&e.debuglog?e.debuglog("stream"):function(){};var o,r,n,a=t(31125),i=t(65756),c=t(56306).getHighWaterMark,h=t(74322).q,f=h.ERR_INVALID_ARG_TYPE,b=h.ERR_STREAM_PUSH_AFTER_EOF,v=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(42018)(w,x);var y=i.errorOrDestroy,d=["error","close","destroy","pause","resume"];function m(Y,q,H){M=M||t(37865),"boolean"!=typeof H&&(H=q instanceof M),this.objectMode=!!(Y=Y||{}).objectMode,H&&(this.objectMode=this.objectMode||!!Y.readableObjectMode),this.highWaterMark=c(this,Y,"readableHighWaterMark",H),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Y.emitClose,this.autoDestroy=!!Y.autoDestroy,this.destroyed=!1,this.defaultEncoding=Y.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Y.encoding&&(o||(o=t(68019).s),this.decoder=new o(Y.encoding),this.encoding=Y.encoding)}function w(Y){if(M=M||t(37865),!(this instanceof w))return new w(Y);this._readableState=new m(Y,this,this instanceof M),this.readable=!0,Y&&("function"==typeof Y.read&&(this._read=Y.read),"function"==typeof Y.destroy&&(this._destroy=Y.destroy)),x.call(this)}function u(Y,q,H,X,Q){l("readableAddChunk",q);var ne,ae,se,pe,ke,re=Y._readableState;if(null===q)re.reading=!1,function(ae,se){if(l("onEofChunk"),!se.ended){if(se.decoder){var pe=se.decoder.end();pe&&pe.length&&(se.buffer.push(pe),se.length+=se.objectMode?1:pe.length)}se.ended=!0,se.sync?L(ae):(se.needReadable=!1,se.emittedReadable||(se.emittedReadable=!0,C(ae)))}}(Y,re);else if(Q||(ae=re,p.isBuffer(ke=se=q)||ke instanceof s||"string"==typeof se||void 0===se||ae.objectMode||(pe=new f("chunk",["string","Buffer","Uint8Array"],se)),ne=pe),ne)y(Y,ne);else if(re.objectMode||q&&q.length>0)if("string"==typeof q||re.objectMode||Object.getPrototypeOf(q)===p.prototype||(q=function(ae){return p.from(ae)}(q)),X)re.endEmitted?y(Y,new g):S(Y,re,q,!0);else if(re.ended)y(Y,new b);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!H?(q=re.decoder.write(q),re.objectMode||0!==q.length?S(Y,re,q,!1):P(Y,re)):S(Y,re,q,!1)}else X||(re.reading=!1,P(Y,re));return!re.ended&&(re.length<re.highWaterMark||0===re.length)}function S(Y,q,H,X){q.flowing&&0===q.length&&!q.sync?(q.awaitDrain=0,Y.emit("data",H)):(q.length+=q.objectMode?1:H.length,X?q.buffer.unshift(H):q.buffer.push(H),q.needReadable&&L(Y)),P(Y,q)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Y){this._readableState&&(this._readableState.destroyed=Y)}}),w.prototype.destroy=i.destroy,w.prototype._undestroy=i.undestroy,w.prototype._destroy=function(Y,q){q(Y)},w.prototype.push=function(Y,q){var H,X=this._readableState;return X.objectMode?H=!0:"string"==typeof Y&&((q=q||X.defaultEncoding)!==X.encoding&&(Y=p.from(Y,q),q=""),H=!0),u(this,Y,q,!1,H)},w.prototype.unshift=function(Y){return u(this,Y,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(Y){o||(o=t(68019).s);var q=new o(Y);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;for(var H=this._readableState.buffer.head,X="";null!==H;)X+=q.write(H.data),H=H.next;return this._readableState.buffer.clear(),""!==X&&this._readableState.buffer.push(X),this._readableState.length=X.length,this};var _=1073741824;function E(Y,q){return Y<=0||0===q.length&&q.ended?0:q.objectMode?1:Y!=Y?q.flowing&&q.length?q.buffer.head.data.length:q.length:(Y>q.highWaterMark&&(q.highWaterMark=((H=Y)>=_?H=_:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H)),Y<=q.length?Y:q.ended?q.length:(q.needReadable=!0,0));var H}function L(Y){var q=Y._readableState;l("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(l("emitReadable",q.flowing),q.emittedReadable=!0,k.nextTick(C,Y))}function C(Y){var q=Y._readableState;l("emitReadable_",q.destroyed,q.length,q.ended),q.destroyed||!q.length&&!q.ended||(Y.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,D(Y)}function P(Y,q){q.readingMore||(q.readingMore=!0,k.nextTick(z,Y,q))}function z(Y,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&0===q.length);){var H=q.length;if(l("maybeReadMore read 0"),Y.read(0),H===q.length)break}q.readingMore=!1}function j(Y){var q=Y._readableState;q.readableListening=Y.listenerCount("readable")>0,q.resumeScheduled&&!q.paused?q.flowing=!0:Y.listenerCount("data")>0&&Y.resume()}function R(Y){l("readable nexttick read 0"),Y.read(0)}function V(Y,q){l("resume",q.reading),q.reading||Y.read(0),q.resumeScheduled=!1,Y.emit("resume"),D(Y),q.flowing&&!q.reading&&Y.read(0)}function D(Y){var q=Y._readableState;for(l("flow",q.flowing);q.flowing&&null!==Y.read(););}function B(Y,q){return 0===q.length?null:(q.objectMode?H=q.buffer.shift():!Y||Y>=q.length?(H=q.decoder?q.buffer.join(""):1===q.buffer.length?q.buffer.first():q.buffer.concat(q.length),q.buffer.clear()):H=q.buffer.consume(Y,q.decoder),H);var H}function N(Y){var q=Y._readableState;l("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,k.nextTick(U,q,Y))}function U(Y,q){if(l("endReadableNT",Y.endEmitted,Y.length),!Y.endEmitted&&0===Y.length&&(Y.endEmitted=!0,q.readable=!1,q.emit("end"),Y.autoDestroy)){var H=q._writableState;(!H||H.autoDestroy&&H.finished)&&q.destroy()}}function J(Y,q){for(var H=0,X=Y.length;H<X;H++)if(Y[H]===q)return H;return-1}w.prototype.read=function(Y){l("read",Y),Y=parseInt(Y,10);var q=this._readableState,H=Y;if(0!==Y&&(q.emittedReadable=!1),0===Y&&q.needReadable&&((0!==q.highWaterMark?q.length>=q.highWaterMark:q.length>0)||q.ended))return l("read: emitReadable",q.length,q.ended),0===q.length&&q.ended?N(this):L(this),null;if(0===(Y=E(Y,q))&&q.ended)return 0===q.length&&N(this),null;var X,Q=q.needReadable;return l("need readable",Q),(0===q.length||q.length-Y<q.highWaterMark)&&l("length less than watermark",Q=!0),q.ended||q.reading?l("reading or ended",Q=!1):Q&&(l("do read"),q.reading=!0,q.sync=!0,0===q.length&&(q.needReadable=!0),this._read(q.highWaterMark),q.sync=!1,q.reading||(Y=E(H,q))),null===(X=Y>0?B(Y,q):null)?(q.needReadable=q.length<=q.highWaterMark,Y=0):(q.length-=Y,q.awaitDrain=0),0===q.length&&(q.ended||(q.needReadable=!0),H!==Y&&q.ended&&N(this)),null!==X&&this.emit("data",X),X},w.prototype._read=function(Y){y(this,new v("_read()"))},w.prototype.pipe=function(Y,q){var H=this,X=this._readableState;switch(X.pipesCount){case 0:X.pipes=Y;break;case 1:X.pipes=[X.pipes,Y];break;default:X.pipes.push(Y)}X.pipesCount+=1,l("pipe count=%d opts=%j",X.pipesCount,q);var Q=q&&!1===q.end||Y===k.stdout||Y===k.stderr?le:ne;function ne(){l("onend"),Y.end()}X.endEmitted?k.nextTick(Q):H.once("end",Q),Y.on("unpipe",function ue(Ee,de){l("onunpipe"),Ee===H&&de&&!1===de.hasUnpiped&&(de.hasUnpiped=!0,l("cleanup"),Y.removeListener("close",ke),Y.removeListener("finish",me),Y.removeListener("drain",re),Y.removeListener("error",pe),Y.removeListener("unpipe",ue),H.removeListener("end",ne),H.removeListener("end",le),H.removeListener("data",se),ae=!0,!X.awaitDrain||Y._writableState&&!Y._writableState.needDrain||re())});var ue,re=(ue=H,function(){var Ee=ue._readableState;l("pipeOnDrain",Ee.awaitDrain),Ee.awaitDrain&&Ee.awaitDrain--,0===Ee.awaitDrain&&T(ue,"data")&&(Ee.flowing=!0,D(ue))});Y.on("drain",re);var ae=!1;function se(ue){l("ondata");var Ee=Y.write(ue);l("dest.write",Ee),!1===Ee&&((1===X.pipesCount&&X.pipes===Y||X.pipesCount>1&&-1!==J(X.pipes,Y))&&!ae&&(l("false write response, pause",X.awaitDrain),X.awaitDrain++),H.pause())}function pe(ue){l("onerror",ue),le(),Y.removeListener("error",pe),0===T(Y,"error")&&y(Y,ue)}function ke(){Y.removeListener("finish",me),le()}function me(){l("onfinish"),Y.removeListener("close",ke),le()}function le(){l("unpipe"),H.unpipe(Y)}return H.on("data",se),function(ue,Ee,de){if("function"==typeof ue.prependListener)return ue.prependListener("error",de);ue._events&&ue._events.error?Array.isArray(ue._events.error)?ue._events.error.unshift(de):ue._events.error=[de,ue._events.error]:ue.on("error",de)}(Y,0,pe),Y.once("close",ke),Y.once("finish",me),Y.emit("pipe",H),X.flowing||(l("pipe resume"),H.resume()),Y},w.prototype.unpipe=function(Y){var q=this._readableState,H={hasUnpiped:!1};if(0===q.pipesCount)return this;if(1===q.pipesCount)return Y&&Y!==q.pipes||(Y||(Y=q.pipes),q.pipes=null,q.pipesCount=0,q.flowing=!1,Y&&Y.emit("unpipe",this,H)),this;if(!Y){var X=q.pipes,Q=q.pipesCount;q.pipes=null,q.pipesCount=0,q.flowing=!1;for(var ne=0;ne<Q;ne++)X[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var re=J(q.pipes,Y);return-1===re||(q.pipes.splice(re,1),q.pipesCount-=1,1===q.pipesCount&&(q.pipes=q.pipes[0]),Y.emit("unpipe",this,H)),this},w.prototype.addListener=w.prototype.on=function(Y,q){var H=x.prototype.on.call(this,Y,q),X=this._readableState;return"data"===Y?(X.readableListening=this.listenerCount("readable")>0,!1!==X.flowing&&this.resume()):"readable"===Y&&(X.endEmitted||X.readableListening||(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,l("on readable",X.length,X.reading),X.length?L(this):X.reading||k.nextTick(R,this))),H},w.prototype.removeListener=function(Y,q){var H=x.prototype.removeListener.call(this,Y,q);return"readable"===Y&&k.nextTick(j,this),H},w.prototype.removeAllListeners=function(Y){var q=x.prototype.removeAllListeners.apply(this,arguments);return"readable"!==Y&&void 0!==Y||k.nextTick(j,this),q},w.prototype.resume=function(){var H,Y=this._readableState;return Y.flowing||(l("resume"),Y.flowing=!Y.readableListening,this,(H=Y).resumeScheduled||(H.resumeScheduled=!0,k.nextTick(V,this,H))),Y.paused=!1,this},w.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(Y){var q=this,H=this._readableState,X=!1;for(var Q in Y.on("end",function(){if(l("wrapped end"),H.decoder&&!H.ended){var re=H.decoder.end();re&&re.length&&q.push(re)}q.push(null)}),Y.on("data",function(re){l("wrapped data"),H.decoder&&(re=H.decoder.write(re)),H.objectMode&&null==re||(H.objectMode||re&&re.length)&&(q.push(re)||(X=!0,Y.pause()))}),Y)void 0===this[Q]&&"function"==typeof Y[Q]&&(this[Q]=function(re){return function(){return Y[re].apply(Y,arguments)}}(Q));for(var ne=0;ne<d.length;ne++)Y.on(d[ne],this.emit.bind(this,d[ne]));return this._read=function(re){l("wrapped _read",re),X&&(X=!1,Y.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===r&&(r=t(68221)),r(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Y){this._readableState&&(this._readableState.flowing=Y)}}),w._fromList=B,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(Y,q){return void 0===n&&(n=t(31748)),n(w,Y,q)})},74308:function($,I,t){"use strict";$.exports=e;var M=t(74322).q,k=M.ERR_METHOD_NOT_IMPLEMENTED,l=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,x=M.ERR_TRANSFORM_WITH_LENGTH_0,p=t(37865);function s(n,a){var i=this._transformState;i.transforming=!1;var c=i.writecb;if(null===c)return this.emit("error",new l);i.writechunk=null,i.writecb=null,null!=a&&this.push(a),c(n);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function e(n){if(!(this instanceof e))return new e(n);p.call(this,n),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&("function"==typeof n.transform&&(this._transform=n.transform),"function"==typeof n.flush&&(this._flush=n.flush)),this.on("prefinish",o)}function o(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?r(this,null,null):this._flush(function(a,i){r(n,a,i)})}function r(n,a,i){if(a)return n.emit("error",a);if(null!=i&&n.push(i),n._writableState.length)throw new x;if(n._transformState.transforming)throw new T;return n.push(null)}t(42018)(e,p),e.prototype.push=function(n,a){return this._transformState.needTransform=!1,p.prototype.push.call(this,n,a)},e.prototype._transform=function(n,a,i){i(new k("_transform()"))},e.prototype._write=function(n,a,i){var c=this._transformState;if(c.writecb=i,c.writechunk=n,c.writeencoding=a,!c.transforming){var h=this._readableState;(c.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},e.prototype._read=function(n){var a=this._transformState;null===a.writechunk||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},e.prototype._destroy=function(n,a){p.prototype._destroy.call(this,n,function(i){a(i)})}},37493:function($,I,t){"use strict";var M,k=t(90386);function l(P){var z=this;this.next=null,this.entry=null,this.finish=function(){!function(j,R,V){var D=j.entry;for(j.entry=null;D;){var B=D.callback;R.pendingcb--,B(void 0),D=D.next}R.corkedRequestsFree.next=j}(z,P)}}$.exports=w,w.WritableState=m;var T,x={deprecate:t(20588)},p=t(71405),s=t(12856).Buffer,e=t.g.Uint8Array||function(){},o=t(65756),r=t(56306).getHighWaterMark,n=t(74322).q,a=n.ERR_INVALID_ARG_TYPE,i=n.ERR_METHOD_NOT_IMPLEMENTED,c=n.ERR_MULTIPLE_CALLBACK,h=n.ERR_STREAM_CANNOT_PIPE,f=n.ERR_STREAM_DESTROYED,b=n.ERR_STREAM_NULL_VALUES,v=n.ERR_STREAM_WRITE_AFTER_END,g=n.ERR_UNKNOWN_ENCODING,y=o.errorOrDestroy;function d(){}function m(P,z,j){M=M||t(37865),"boolean"!=typeof j&&(j=z instanceof M),this.objectMode=!!(P=P||{}).objectMode,j&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=r(this,P,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===P.decodeStrings),this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){!function(D,B){var q,N=D._writableState,U=N.sync,J=N.writecb;if("function"!=typeof J)throw new c;if((q=N).writing=!1,q.writecb=null,q.length-=q.writelen,q.writelen=0,B)!function(q,H,X,Q,ne){--H.pendingcb,X?(k.nextTick(ne,Q),k.nextTick(C,q,H),q._writableState.errorEmitted=!0,y(q,Q)):(ne(Q),q._writableState.errorEmitted=!0,y(q,Q),C(q,H))}(D,N,U,B,J);else{var Y=E(N)||D.destroyed;Y||N.corked||N.bufferProcessing||!N.bufferedRequest||_(D,N),U?k.nextTick(S,D,N,Y,J):S(D,N,Y,J)}}(z,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==P.emitClose,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function w(P){var z=this instanceof(M=M||t(37865));if(!z&&!T.call(w,this))return new w(P);this._writableState=new m(P,this,z),this.writable=!0,P&&("function"==typeof P.write&&(this._write=P.write),"function"==typeof P.writev&&(this._writev=P.writev),"function"==typeof P.destroy&&(this._destroy=P.destroy),"function"==typeof P.final&&(this._final=P.final)),p.call(this)}function u(P,z,j,R,V,D,B){z.writelen=R,z.writecb=B,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new f("write")):j?P._writev(V,z.onwrite):P._write(V,D,z.onwrite),z.sync=!1}function S(P,z,j,R){var V,D;j||(V=P,0===(D=z).length&&D.needDrain&&(D.needDrain=!1,V.emit("drain"))),z.pendingcb--,R(),C(P,z)}function _(P,z){z.bufferProcessing=!0;var j=z.bufferedRequest;if(P._writev&&j&&j.next){var V=new Array(z.bufferedRequestCount),D=z.corkedRequestsFree;D.entry=j;for(var B=0,N=!0;j;)V[B]=j,j.isBuf||(N=!1),j=j.next,B+=1;V.allBuffers=N,u(P,z,!0,z.length,V,"",D.finish),z.pendingcb++,z.lastBufferedRequest=null,D.next?(z.corkedRequestsFree=D.next,D.next=null):z.corkedRequestsFree=new l(z),z.bufferedRequestCount=0}else{for(;j;){var U=j.chunk;if(u(P,z,!1,z.objectMode?1:U.length,U,j.encoding,j.callback),j=j.next,z.bufferedRequestCount--,z.writing)break}null===j&&(z.lastBufferedRequest=null)}z.bufferedRequest=j,z.bufferProcessing=!1}function E(P){return P.ending&&0===P.length&&null===P.bufferedRequest&&!P.finished&&!P.writing}function L(P,z){P._final(function(j){z.pendingcb--,j&&y(P,j),z.prefinished=!0,P.emit("prefinish"),C(P,z)})}function C(P,z){var V,D,j=E(z);if(j&&(V=P,(D=z).prefinished||D.finalCalled||("function"!=typeof V._final||D.destroyed?(D.prefinished=!0,V.emit("prefinish")):(D.pendingcb++,D.finalCalled=!0,k.nextTick(L,V,D))),0===z.pendingcb&&(z.finished=!0,P.emit("finish"),z.autoDestroy))){var R=P._readableState;(!R||R.autoDestroy&&R.endEmitted)&&P.destroy()}return j}t(42018)(w,p),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,z=[];P;)z.push(P),P=P.next;return z},function(){try{Object.defineProperty(m.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===w&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},w.prototype.pipe=function(){y(this,new h)},w.prototype.write=function(P,z,j){var R,N,U,J,V=this._writableState,D=!1,B=!V.objectMode&&(s.isBuffer(R=P)||R instanceof e);return B&&!s.isBuffer(P)&&(P=s.from(P)),"function"==typeof z&&(j=z,z=null),B?z="buffer":z||(z=V.defaultEncoding),"function"!=typeof j&&(j=d),V.ending?(N=this,U=j,J=new v,y(N,J),k.nextTick(U,J)):(B||function(N,U,J,Y){var q;return null===J?q=new b:"string"==typeof J||U.objectMode||(q=new a("chunk",["string","Buffer"],J)),!q||(y(N,q),k.nextTick(Y,q),!1)}(this,V,P,j))&&(V.pendingcb++,D=function(N,U,J,Y,q,H){if(!J){var X=(se=Y,(ae=U).objectMode||!1===ae.decodeStrings||"string"!=typeof se||(se=s.from(se,q)),se);Y!==X&&(J=!0,q="buffer",Y=X)}var ae,se,Q=U.objectMode?1:Y.length;U.length+=Q;var ne=U.length<U.highWaterMark;if(ne||(U.needDrain=!0),U.writing||U.corked){var re=U.lastBufferedRequest;U.lastBufferedRequest={chunk:Y,encoding:q,isBuf:J,callback:H,next:null},re?re.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else u(N,U,!1,Q,Y,q,H);return ne}(this,V,B,P,z,j)),D},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||_(this,P))},w.prototype.setDefaultEncoding=function(P){if("string"==typeof P&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new g(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(P,z,j){j(new i("_write()"))},w.prototype._writev=null,w.prototype.end=function(P,z,j){var V,D,B,R=this._writableState;return"function"==typeof P?(j=P,P=null,z=null):"function"==typeof z&&(j=z,z=null),null!=P&&this.write(P,z),R.corked&&(R.corked=1,this.uncork()),R.ending||(V=this,B=j,(D=R).ending=!0,C(V,D),B&&(D.finished?k.nextTick(B):V.once("finish",B)),D.ended=!0,V.writable=!1),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),w.prototype.destroy=o.destroy,w.prototype._undestroy=o.undestroy,w.prototype._destroy=function(P,z){z(P)}},68221:function($,I,t){"use strict";var M,k=t(90386);function l(b,v,g){return v in b?Object.defineProperty(b,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[v]=g,b}var T=t(12726),x=Symbol("lastResolve"),p=Symbol("lastReject"),s=Symbol("error"),e=Symbol("ended"),o=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function a(b,v){return{value:b,done:v}}function i(b){var v=b[x];if(null!==v){var g=b[n].read();null!==g&&(b[o]=null,b[x]=null,b[p]=null,v(a(g,!1)))}}function c(b){k.nextTick(i,b)}var h=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((l(M={get stream(){return this[n]},next:function(){var b=this,v=this[s];if(null!==v)return Promise.reject(v);if(this[e])return Promise.resolve(a(void 0,!0));if(this[n].destroyed)return new Promise(function(m,w){k.nextTick(function(){b[s]?w(b[s]):m(a(void 0,!0))})});var g,m,w,y=this[o];if(y)g=new Promise((m=y,w=this,function(u,S){m.then(function(){w[e]?u(a(void 0,!0)):w[r](u,S)},S)}));else{var d=this[n].read();if(null!==d)return Promise.resolve(a(d,!1));g=new Promise(this[r])}return this[o]=g,g}},Symbol.asyncIterator,function(){return this}),l(M,"return",function(){var b=this;return new Promise(function(v,g){b[n].destroy(null,function(y){y?g(y):v(a(void 0,!0))})})}),M),h);$.exports=function(b){var v,g=Object.create(f,(l(v={},n,{value:b,writable:!0}),l(v,x,{value:null,writable:!0}),l(v,p,{value:null,writable:!0}),l(v,s,{value:null,writable:!0}),l(v,e,{value:b._readableState.endEmitted,writable:!0}),l(v,r,{value:function(y,d){var m=g[n].read();m?(g[o]=null,g[x]=null,g[p]=null,y(a(m,!1))):(g[x]=y,g[p]=d)},writable:!0}),v));return g[o]=null,T(b,function(y){if(y&&"ERR_STREAM_PREMATURE_CLOSE"!==y.code){var d=g[p];return null!==d&&(g[o]=null,g[x]=null,g[p]=null,d(y)),void(g[s]=y)}var m=g[x];null!==m&&(g[o]=null,g[x]=null,g[p]=null,m(a(void 0,!0))),g[e]=!0}),b.on("readable",c.bind(null,g)),g}},31125:function($,I,t){"use strict";function M(s,e){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),o.push.apply(o,r)}return o}function k(s,e,o){return e in s?Object.defineProperty(s,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[e]=o,s}var T=t(12856).Buffer,x=t(69862).inspect,p=x&&x.custom||"inspect";$.exports=function(){function s(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var o;return o=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var r=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(0===this.length)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(0===this.length)return T.alloc(0);for(var c=T.allocUnsafe(r>>>0),h=this.head,f=0;h;)T.prototype.copy.call(h.data,c,f),f+=h.data.length,h=h.next;return c}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):a=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,i=n.data;for(r-=i.length;n=n.next;){var c=n.data,h=r>c.length?c.length:r;if(i+=h===c.length?c:c.slice(0,r),0==(r-=h)){h===c.length?(++a,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=c.slice(h));break}++a}return this.length-=a,i}},{key:"_getBuffer",value:function(r){var n=T.allocUnsafe(r),a=this.head,i=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var c=a.data,h=r>c.length?c.length:r;if(c.copy(n,n.length-r,0,h),0==(r-=h)){h===c.length?(++i,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=c.slice(h));break}++i}return this.length-=i,n}},{key:p,value:function(r,n){return x(this,function(a){for(var i=1;i<arguments.length;i++){var c=null!=arguments[i]?arguments[i]:{};i%2?M(Object(c),!0).forEach(function(h){k(a,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):M(Object(c)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(c,h))})}return a}({},n,{depth:0,customInspect:!1}))}}],o&&function l(s,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}(s.prototype,o),s}()},65756:function($,I,t){"use strict";var M=t(90386);function k(x,p){T(x,p),l(x)}function l(x){x._writableState&&!x._writableState.emitClose||x._readableState&&!x._readableState.emitClose||x.emit("close")}function T(x,p){x.emit("error",p)}$.exports={destroy:function(x,p){var s=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(p?p(x):x&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(T,this,x)):M.nextTick(T,this,x)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(x||null,function(r){!p&&r?s._writableState?s._writableState.errorEmitted?M.nextTick(l,s):(s._writableState.errorEmitted=!0,M.nextTick(k,s,r)):M.nextTick(k,s,r):p?(M.nextTick(l,s),p(r)):M.nextTick(l,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(x,p){var s=x._readableState,e=x._writableState;s&&s.autoDestroy||e&&e.autoDestroy?x.destroy(p):x.emit("error",p)}}},12726:function($,I,t){"use strict";var M=t(74322).q.ERR_STREAM_PREMATURE_CLOSE;function k(){}$.exports=function l(T,x,p){if("function"==typeof x)return l(T,null,x);var b,v;x||(x={}),b=p||k,v=!1,p=function(){if(!v){v=!0;for(var g=arguments.length,y=new Array(g),d=0;d<g;d++)y[d]=arguments[d];b.apply(this,y)}};var s=x.readable||!1!==x.readable&&T.readable,e=x.writable||!1!==x.writable&&T.writable,o=function(){T.writable||n()},r=T._writableState&&T._writableState.finished,n=function(){e=!1,r=!0,s||p.call(T)},a=T._readableState&&T._readableState.endEmitted,i=function(){s=!1,a=!0,e||p.call(T)},c=function(b){p.call(T,b)},h=function(){var b;return s&&!a?(T._readableState&&T._readableState.ended||(b=new M),p.call(T,b)):e&&!r?(T._writableState&&T._writableState.ended||(b=new M),p.call(T,b)):void 0},f=function(){T.req.on("finish",n)};return function(b){return b.setHeader&&"function"==typeof b.abort}(T)?(T.on("complete",n),T.on("abort",h),T.req?f():T.on("request",f)):e&&!T._writableState&&(T.on("end",o),T.on("close",o)),T.on("end",i),T.on("finish",n),!1!==x.error&&T.on("error",c),T.on("close",h),function(){T.removeListener("complete",n),T.removeListener("abort",h),T.removeListener("request",f),T.req&&T.req.removeListener("finish",n),T.removeListener("end",o),T.removeListener("close",o),T.removeListener("finish",n),T.removeListener("end",i),T.removeListener("error",c),T.removeListener("close",h)}}},31748:function($){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function($,I,t){"use strict";var M,k=t(74322).q,l=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function x(r){if(r)throw r}function p(r,n,a,i){var f,b;f=i,b=!1,i=function(){b||(b=!0,f.apply(void 0,arguments))};var c=!1;r.on("close",function(){c=!0}),void 0===M&&(M=t(12726)),M(r,{readable:n,writable:a},function(f){if(f)return i(f);c=!0,i()});var h=!1;return function(f){if(!c&&!h)return h=!0,function(b){return b.setHeader&&"function"==typeof b.abort}(r)?r.abort():"function"==typeof r.destroy?r.destroy():void i(f||new T("pipe"))}}function s(r){r()}function e(r,n){return r.pipe(n)}function o(r){return r.length?"function"!=typeof r[r.length-1]?x:r.pop():x}$.exports=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i,c=o(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new l("streams");var h=n.map(function(f,b){var v=b<n.length-1;return p(f,v,b>0,function(g){i||(i=g),g&&h.forEach(s),v||(h.forEach(s),c(i))})});return n.reduce(e)}},56306:function($,I,t){"use strict";var M=t(74322).q.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function(k,l,T,x){var s,p=null!=(s=l).highWaterMark?s.highWaterMark:x?s[T]:null;if(null!=p){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new M(x?T:"highWaterMark",p);return Math.floor(p)}return k.objectMode?16:16384}}},71405:function($,I,t){$.exports=t(15398).EventEmitter},68019:function($,I,t){"use strict";var M=t(71665).Buffer,k=M.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(a){var i;switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var b;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(b)return;f=(""+f).toLowerCase(),b=!0}}(c);if("string"!=typeof h&&(M.isEncoding===k||!k(c)))throw new Error("Unknown encoding: "+c);return h||c}(a),this.encoding){case"utf16le":this.text=p,this.end=s,i=4;break;case"utf8":this.fillLast=x,i=4;break;case"base64":this.text=e,this.end=o,i=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(i)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function x(a){var i=this.lastTotal-this.lastNeed,c=function(h,f,b){if(128!=(192&f[0]))return h.lastNeed=0,"\ufffd";if(h.lastNeed>1&&f.length>1){if(128!=(192&f[1]))return h.lastNeed=1,"\ufffd";if(h.lastNeed>2&&f.length>2&&128!=(192&f[2]))return h.lastNeed=2,"\ufffd"}}(this,a);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,i,0,a.length),void(this.lastNeed-=a.length))}function p(a,i){if((a.length-i)%2==0){var c=a.toString("utf16le",i);if(c){var h=c.charCodeAt(c.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",i,a.length-1)}function s(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):i}function e(a,i){var c=(a.length-i)%3;return 0===c?a.toString("base64",i):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",i,a.length-c))}function o(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+this.lastChar.toString("base64",0,3-this.lastNeed):i}function r(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}I.s=l,l.prototype.write=function(a){if(0===a.length)return"";var i,c;if(this.lastNeed){if(void 0===(i=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?i?i+this.text(a,c):this.text(a,c):i||""},l.prototype.end=function(a){var i=a&&a.length?this.write(a):"";return this.lastNeed?i+"\ufffd":i},l.prototype.text=function(a,i){var c=function(f,b,v){var g=b.length-1;if(g<v)return 0;var y=T(b[g]);return y>=0?(y>0&&(f.lastNeed=y-1),y):--g<v||-2===y?0:(y=T(b[g]))>=0?(y>0&&(f.lastNeed=y-2),y):--g<v||-2===y?0:(y=T(b[g]))>=0?(y>0&&(2===y?y=0:f.lastNeed=y-3),y):0}(this,a,i);if(!this.lastNeed)return a.toString("utf8",i);this.lastTotal=c;var h=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",i,h)},l.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},90715:function($,I,t){var M=t(32791),k=t(41633)("stream-parser");function l(a){k("initializing parser stream"),a._parserBytesLeft=0,a._parserBuffers=[],a._parserBuffered=0,a._parserState=-1,a._parserCallback=null,"function"==typeof a.push&&(a._parserOutput=a.push.bind(a)),a._parserInit=!0}function T(a,i){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(a)&&a>0,'can only buffer a finite number of bytes > 0, got "'+a+'"'),this._parserInit||l(this),k("buffering %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=0}function x(a,i){M(!this._parserCallback,'there is already a "callback" set!'),M(a>0,'can only skip > 0 bytes, got "'+a+'"'),this._parserInit||l(this),k("skipping %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=1}function p(a,i){M(!this._parserCallback,'There is already a "callback" set!'),M(a>0,'can only pass through > 0 bytes, got "'+a+'"'),this._parserInit||l(this),k("passing through %o bytes",a),this._parserBytesLeft=a,this._parserCallback=i,this._parserState=2}function s(a,i,c){this._parserInit||l(this),k("write(%o bytes)",a.length),"function"==typeof i&&(c=i),r(this,a,null,c)}function e(a,i,c){this._parserInit||l(this),k("transform(%o bytes)",a.length),"function"!=typeof i&&(i=this._parserOutput),r(this,a,i,c)}function o(a,i,c,h){if(a._parserBytesLeft-=i.length,k("%o bytes left for stream piece",a._parserBytesLeft),0===a._parserState?(a._parserBuffers.push(i),a._parserBuffered+=i.length):2===a._parserState&&c(i),0!==a._parserBytesLeft)return h;var f=a._parserCallback;if(f&&0===a._parserState&&a._parserBuffers.length>1&&(i=Buffer.concat(a._parserBuffers,a._parserBuffered)),0!==a._parserState&&(i=null),a._parserCallback=null,a._parserBuffered=0,a._parserState=-1,a._parserBuffers.splice(0),f){var b=[];i&&b.push(i),c&&b.push(c);var v=f.length>b.length;v&&b.push(n(h));var g=f.apply(a,b);if(!v||h===g)return h}}$.exports=function(a){var i=a&&"function"==typeof a._transform;if(!(i||a&&"function"==typeof a._write))throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),a._bytes=T,a._skipBytes=x,i&&(a._passthrough=p),i?a._transform=e:a._write=s};var r=n(function a(i,c,h,f){return i._parserBytesLeft<=0?f(new Error("got data but not currently parsing anything")):c.length<=i._parserBytesLeft?function(){return o(i,c,h,f)}:function(){var b=c.slice(0,i._parserBytesLeft);return o(i,b,h,function(v){return v?f(v):c.length>b.length?function(){return a(i,c.slice(b.length),h,f)}:void 0})}});function n(a){return function(){for(var i=a.apply(this,arguments);"function"==typeof i;)i=i();return i}}},41633:function($,I,t){var M=t(90386);function k(){var l;try{l=I.storage.debug}catch{}return!l&&void 0!==M&&"env"in M&&(l=M.env.DEBUG),l}(I=$.exports=t(74469)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},I.formatArgs=function(l){var T=this.useColors;if(l[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+l[0]+(T?"%c ":" ")+"+"+I.humanize(this.diff),T){var x="color: "+this.color;l.splice(1,0,x,"color: inherit");var p=0,s=0;l[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(p++,"%c"===e&&(s=p))}),l.splice(s,0,x)}},I.save=function(l){try{null==l?I.storage.removeItem("debug"):I.storage.debug=l}catch{}},I.load=k,I.useColors=function(){return!(typeof window>"u"||!window.process||"renderer"!==window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},I.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),I.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],I.formatters.j=function(l){try{return JSON.stringify(l)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},I.enable(k())},74469:function($,I,t){var M;function k(l){function T(){if(T.enabled){var x=T,p=+new Date;x.diff=p-(M||p),x.prev=M,x.curr=p,M=p;for(var e=new Array(arguments.length),o=0;o<e.length;o++)e[o]=arguments[o];e[0]=I.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var r=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(a,i){if("%%"===a)return a;r++;var c=I.formatters[i];return"function"==typeof c&&(a=c.call(x,e[r]),e.splice(r,1),r--),a}),I.formatArgs.call(x,e),(T.log||I.log||console.log.bind(console)).apply(x,e)}}return T.namespace=l,T.enabled=I.enabled(l),T.useColors=I.useColors(),T.color=function(x){var p,s=0;for(p in x)s=(s<<5)-s+x.charCodeAt(p),s|=0;return I.colors[Math.abs(s)%I.colors.length]}(l),"function"==typeof I.init&&I.init(T),T}(I=$.exports=k.debug=k.default=k).coerce=function(l){return l instanceof Error?l.stack||l.message:l},I.disable=function(){I.enable("")},I.enable=function(l){I.save(l),I.names=[],I.skips=[];for(var T=("string"==typeof l?l:"").split(/[\s,]+/),x=T.length,p=0;p<x;p++)T[p]&&("-"===(l=T[p].replace(/\*/g,".*?"))[0]?I.skips.push(new RegExp("^"+l.substr(1)+"$")):I.names.push(new RegExp("^"+l+"$")))},I.enabled=function(l){var T,x;for(T=0,x=I.skips.length;T<x;T++)if(I.skips[T].test(l))return!1;for(T=0,x=I.names.length;T<x;T++)if(I.names[T].test(l))return!0;return!1},I.humanize=t(11375),I.names=[],I.skips=[],I.formatters={}},11375:function($){var I=1e3,t=60*I,M=60*t,k=24*M;function l(T,x,p){if(!(T<x))return T<1.5*x?Math.floor(T/x)+" "+p:Math.ceil(T/x)+" "+p+"s"}$.exports=function(T,x){x=x||{};var p,e,s=typeof T;if("string"===s&&T.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(o){var r=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*k;case"hours":case"hour":case"hrs":case"hr":case"h":return r*M;case"minutes":case"minute":case"mins":case"min":case"m":return r*t;case"seconds":case"second":case"secs":case"sec":case"s":return r*I;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(T);if("number"===s&&!1===isNaN(T))return x.long?l(p=T,k,"day")||l(p,M,"hour")||l(p,t,"minute")||l(p,I,"second")||p+" ms":(e=T)>=k?Math.round(e/k)+"d":e>=M?Math.round(e/M)+"h":e>=t?Math.round(e/t)+"m":e>=I?Math.round(e/I)+"s":e+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},99011:function($,I,t){"use strict";var M=t(88641);$.exports=function(k,l,T){if(null==k)throw Error("First argument should be a string");if(null==l)throw Error("Separator should be a string or a RegExp");T?("string"==typeof T||Array.isArray(T))&&(T={ignore:T}):T={},null==T.escape&&(T.escape=!0),null==T.ignore?T.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof T.ignore&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(n){return 1===n.length&&(n+=n),n}));var x=M.parse(k,{flat:!0,brackets:T.ignore}),p=x[0].split(l);if(T.escape){for(var s=[],e=0;e<p.length;e++){var o=p[e];"\\"===o[o.length-1]&&"\\"!==o[o.length-2]?(s.push(o+l+p[e+1]),e++):s.push(o)}p=s}for(e=0;e<p.length;e++)x[0]=p[e],p[e]=M.stringify(x,{flat:!0});return p}},68664:function($){"use strict";$.exports=function(I){for(var t=I.length,M=new Array(t),k=new Array(t),l=new Array(t),T=new Array(t),x=new Array(t),p=new Array(t),s=0;s<t;++s)M[s]=-1,k[s]=0,l[s]=!1,T[s]=0,x[s]=-1,p[s]=[];var e,o=0,r=[],n=[];function a(h){var f=[h],b=[h];for(M[h]=k[h]=o,l[h]=!0,o+=1;b.length>0;){var v=I[h=b[b.length-1]];if(T[h]<v.length){for(var g=T[h];g<v.length;++g){var y=v[g];if(M[y]<0){M[y]=k[y]=o,l[y]=!0,o+=1,f.push(y),b.push(y);break}l[y]&&(k[h]=0|Math.min(k[h],k[y])),x[y]>=0&&p[h].push(x[y])}T[h]=g}else{if(k[h]===M[h]){var d=[],m=[],w=0;for(g=f.length-1;g>=0;--g){var u=f[g];if(l[u]=!1,d.push(u),m.push(p[u]),w+=p[u].length,x[u]=r.length,u===h){f.length=g;break}}r.push(d);var S=new Array(w);for(g=0;g<m.length;g++)for(var _=0;_<m[g].length;_++)S[--w]=m[g][_];n.push(S)}b.pop()}}}for(s=0;s<t;++s)M[s]<0&&a(s);for(s=0;s<n.length;s++){var i=n[s];if(0!==i.length){i.sort(function(h,f){return h-f}),e=[i[0]];for(var c=1;c<i.length;c++)i[c]!==i[c-1]&&e.push(i[c]);n[s]=e}}return{components:r,adjacencyList:n}}},7095:function($,I,t){"use strict";t.r(I);var M=2*Math.PI,k=function(x,p,s,e,o,r,n){var a=x.x,i=x.y;return{x:e*(a*=p)-o*(i*=s)+r,y:o*a+e*i+n}},l=function(x,p){var s=1.5707963267948966===p?.551915024494:-1.5707963267948966===p?-.551915024494:1.3333333333333333*Math.tan(p/4),e=Math.cos(x),o=Math.sin(x),r=Math.cos(x+p),n=Math.sin(x+p);return[{x:e-o*s,y:o+e*s},{x:r+n*s,y:n-r*s},{x:r,y:n}]},T=function(x,p,s,e){var o=x*s+p*e;return o>1&&(o=1),o<-1&&(o=-1),(x*e-p*s<0?-1:1)*Math.acos(o)};I.default=function(x){var p=x.px,s=x.py,e=x.cx,o=x.cy,r=x.rx,n=x.ry,a=x.xAxisRotation,i=void 0===a?0:a,c=x.largeArcFlag,h=void 0===c?0:c,f=x.sweepFlag,b=void 0===f?0:f,v=[];if(0===r||0===n)return[];var g=Math.sin(i*M/360),y=Math.cos(i*M/360),d=y*(p-e)/2+g*(s-o)/2,m=-g*(p-e)/2+y*(s-o)/2;if(0===d&&0===m)return[];r=Math.abs(r),n=Math.abs(n);var w=Math.pow(d,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);w>1&&(r*=Math.sqrt(w),n*=Math.sqrt(w));var S=function(R,V){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return function(D,B){var N=[],U=!0,J=!1,Y=void 0;try{for(var q,H=D[Symbol.iterator]();!(U=(q=H.next()).done)&&(N.push(q.value),4!==N.length);U=!0);}catch(X){J=!0,Y=X}finally{try{!U&&H.return&&H.return()}finally{if(J)throw Y}}return N}(R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(R,V,D,B,N,U,J,Y,q,H,X,Q){var ne=Math.pow(N,2),re=Math.pow(U,2),ae=Math.pow(X,2),se=Math.pow(Q,2),pe=ne*re-ne*se-re*ae;pe<0&&(pe=0),pe/=ne*se+re*ae;var ke=(pe=Math.sqrt(pe)*(J===Y?-1:1))*N/U*Q,me=pe*-U/N*X,le=H*ke-q*me+(R+D)/2,ue=q*ke+H*me+(V+B)/2,Ee=(X-ke)/N,de=(Q-me)/U,xe=(-X-ke)/N,Te=(-Q-me)/U,we=T(1,0,Ee,de),K=T(Ee,de,xe,Te);return 0===Y&&K>0&&(K-=M),1===Y&&K<0&&(K+=M),[le,ue,we,K]}(p,s,e,o,r,n,h,b,g,y,d,m)),_=S[0],E=S[1],L=S[2],C=S[3],P=Math.abs(C)/(M/4);Math.abs(1-P)<1e-7&&(P=1);var z=Math.max(Math.ceil(P),1);C/=z;for(var j=0;j<z;j++)v.push(l(L,C)),L+=C;return v.map(function(R){var V=k(R[0],r,n,y,g,_,E),D=V.x,B=V.y,N=k(R[1],r,n,y,g,_,E),U=N.x,J=N.y,Y=k(R[2],r,n,y,g,_,E);return{x1:D,y1:B,x2:U,y2:J,x:Y.x,y:Y.y}})}},1750:function($,I,t){"use strict";var M=t(95616),k=t(65185),l=t(29988),T=t(89546),x=t(32791);$.exports=function(p){if(Array.isArray(p)&&1===p.length&&"string"==typeof p[0]&&(p=p[0]),"string"==typeof p&&(x(T(p),"String is not an SVG path."),p=M(p)),x(Array.isArray(p),"Argument should be a string or an array of path segments."),p=k(p),!(p=l(p)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],e=0,o=p.length;e<o;e++)for(var r=p[e].slice(1),n=0;n<r.length;n+=2)r[n+0]<s[0]&&(s[0]=r[n+0]),r[n+1]<s[1]&&(s[1]=r[n+1]),r[n+0]>s[2]&&(s[2]=r[n+0]),r[n+1]>s[3]&&(s[3]=r[n+1]);return s}},29988:function($,I,t){"use strict";$.exports=function(T){for(var x,p=[],s=0,e=0,o=0,r=0,n=null,a=null,i=0,c=0,h=0,f=T.length;h<f;h++){var b=T[h],v=b[0];switch(v){case"M":o=b[1],r=b[2];break;case"A":var g=M({px:i,py:c,cx:b[6],cy:b[7],rx:b[1],ry:b[2],xAxisRotation:b[3],largeArcFlag:b[4],sweepFlag:b[5]});if(!g.length)continue;for(var y,d=0;d<g.length;d++)b=["C",(y=g[d]).x1,y.y1,y.x2,y.y2,y.x,y.y],d<g.length-1&&p.push(b);break;case"S":var m=i,w=c;"C"!=x&&"S"!=x||(m+=m-s,w+=w-e),b=["C",m,w,b[1],b[2],b[3],b[4]];break;case"T":"Q"==x||"T"==x?(n=2*i-n,a=2*c-a):(n=i,a=c),b=l(i,c,n,a,b[1],b[2]);break;case"Q":n=b[1],a=b[2],b=l(i,c,b[1],b[2],b[3],b[4]);break;case"L":b=k(i,c,b[1],b[2]);break;case"H":b=k(i,c,b[1],c);break;case"V":b=k(i,c,i,b[1]);break;case"Z":b=k(i,c,o,r)}x=v,i=b[b.length-2],c=b[b.length-1],b.length>4?(s=b[b.length-4],e=b[b.length-3]):(s=i,e=c),p.push(b)}return p};var M=t(7095);function k(T,x,p,s){return["C",T,x,p,s,p,s]}function l(T,x,p,s,e,o){return["C",T/3+.6666666666666666*p,x/3+.6666666666666666*s,e/3+.6666666666666666*p,o/3+.6666666666666666*s,e,o]}},82019:function($,I,t){"use strict";var M,k=t(1750),l=t(95616),T=t(31457),x=t(89546),p=t(44781),s=document.createElement("canvas"),e=s.getContext("2d");$.exports=function(o,r){if(!x(o))throw Error("Argument should be valid svg path string");var n,a;r||(r={}),r.shape?(n=r.shape[0],a=r.shape[1]):(n=s.width=r.w||r.width||200,a=s.height=r.h||r.height||200);var i=Math.min(n,a),c=r.stroke||0,h=r.viewbox||r.viewBox||k(o),f=[n/(h[2]-h[0]),a/(h[3]-h[1])],b=Math.min(f[0]||0,f[1]||0)/2;if(e.fillStyle="black",e.fillRect(0,0,n,a),e.fillStyle="white",c&&("number"!=typeof c&&(c=1),e.strokeStyle=c>0?"white":"black",e.lineWidth=Math.abs(c)),e.translate(.5*n,.5*a),e.scale(b,b),function(){if(null!=M)return M;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return M=!1;var d=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(d);var m=y.getImageData(0,0,1,1);return M=m&&m.data&&255===m.data[3]}()){var v=new Path2D(o);e.fill(v),c&&e.stroke(v)}else{var g=l(o);T(e,g),e.fill(),c&&e.stroke()}return e.setTransform(1,0,0,1,0,0),p(e,{cutoff:null!=r.cutoff?r.cutoff:.5,radius:null!=r.radius?r.radius:.5*i})}},84267:function($,I,t){var M;!function(k){var l=/^\s+/,T=/\s+$/,x=0,p=k.round,s=k.min,e=k.max,o=k.random;function r(X,Q){if(Q=Q||{},(X=X||"")instanceof r)return X;if(!(this instanceof r))return new r(X,Q);var re,se,pe,ke,me,le,ue,Ee,de,xe,ne=(ke={r:0,g:0,b:0},me=1,le=null,ue=null,Ee=null,de=!1,xe=!1,"string"==typeof(re=X)&&(re=function(Te){Te=Te.replace(l,"").replace(T,"").toLowerCase();var we,K=!1;if(L[Te])Te=L[Te],K=!0;else if("transparent"==Te)return{r:0,g:0,b:0,a:0,format:"name"};return(we=q.rgb.exec(Te))?{r:we[1],g:we[2],b:we[3]}:(we=q.rgba.exec(Te))?{r:we[1],g:we[2],b:we[3],a:we[4]}:(we=q.hsl.exec(Te))?{h:we[1],s:we[2],l:we[3]}:(we=q.hsla.exec(Te))?{h:we[1],s:we[2],l:we[3],a:we[4]}:(we=q.hsv.exec(Te))?{h:we[1],s:we[2],v:we[3]}:(we=q.hsva.exec(Te))?{h:we[1],s:we[2],v:we[3],a:we[4]}:(we=q.hex8.exec(Te))?{r:R(we[1]),g:R(we[2]),b:R(we[3]),a:N(we[4]),format:K?"name":"hex8"}:(we=q.hex6.exec(Te))?{r:R(we[1]),g:R(we[2]),b:R(we[3]),format:K?"name":"hex"}:(we=q.hex4.exec(Te))?{r:R(we[1]+""+we[1]),g:R(we[2]+""+we[2]),b:R(we[3]+""+we[3]),a:N(we[4]+""+we[4]),format:K?"name":"hex8"}:!!(we=q.hex3.exec(Te))&&{r:R(we[1]+""+we[1]),g:R(we[2]+""+we[2]),b:R(we[3]+""+we[3]),format:K?"name":"hex"}}(re)),"object"==typeof re&&(H(re.r)&&H(re.g)&&H(re.b)?(se=re.g,pe=re.b,ke={r:255*z(re.r,255),g:255*z(se,255),b:255*z(pe,255)},de=!0,xe="%"===String(re.r).substr(-1)?"prgb":"rgb"):H(re.h)&&H(re.s)&&H(re.v)?(le=D(re.s),ue=D(re.v),ke=function(Te,we,K){Te=6*z(Te,360),we=z(we,100),K=z(K,100);var oe=k.floor(Te),he=Te-oe,ye=K*(1-we),Me=K*(1-he*we),Re=K*(1-(1-he)*we),Pe=oe%6;return{r:255*[K,Me,ye,ye,Re,K][Pe],g:255*[Re,K,K,Me,ye,ye][Pe],b:255*[ye,ye,Re,K,K,Me][Pe]}}(re.h,le,ue),de=!0,xe="hsv"):H(re.h)&&H(re.s)&&H(re.l)&&(le=D(re.s),Ee=D(re.l),ke=function(Te,we,K){var oe,he,ye;function Me(De,fe,ge){return ge<0&&(ge+=1),ge>1&&(ge-=1),ge<1/6?De+6*(fe-De)*ge:ge<.5?fe:ge<2/3?De+(fe-De)*(2/3-ge)*6:De}if(Te=z(Te,360),we=z(we,100),K=z(K,100),0===we)oe=he=ye=K;else{var Re=K<.5?K*(1+we):K+we-K*we,Pe=2*K-Re;oe=Me(Pe,Re,Te+1/3),he=Me(Pe,Re,Te),ye=Me(Pe,Re,Te-1/3)}return{r:255*oe,g:255*he,b:255*ye}}(re.h,le,Ee),de=!0,xe="hsl"),re.hasOwnProperty("a")&&(me=re.a)),me=P(me),{ok:de,format:re.format||xe,r:s(255,e(ke.r,0)),g:s(255,e(ke.g,0)),b:s(255,e(ke.b,0)),a:me});this._originalInput=X,this._r=ne.r,this._g=ne.g,this._b=ne.b,this._a=ne.a,this._roundA=p(100*this._a)/100,this._format=Q.format||ne.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=ne.ok,this._tc_id=x++}function n(X,Q,ne){X=z(X,255),Q=z(Q,255),ne=z(ne,255);var re,ae,se=e(X,Q,ne),pe=s(X,Q,ne),ke=(se+pe)/2;if(se==pe)re=ae=0;else{var me=se-pe;switch(ae=ke>.5?me/(2-se-pe):me/(se+pe),se){case X:re=(Q-ne)/me+(Q<ne?6:0);break;case Q:re=(ne-X)/me+2;break;case ne:re=(X-Q)/me+4}re/=6}return{h:re,s:ae,l:ke}}function a(X,Q,ne){X=z(X,255),Q=z(Q,255),ne=z(ne,255);var re,ae,se=e(X,Q,ne),pe=s(X,Q,ne),ke=se,me=se-pe;if(ae=0===se?0:me/se,se==pe)re=0;else{switch(se){case X:re=(Q-ne)/me+(Q<ne?6:0);break;case Q:re=(ne-X)/me+2;break;case ne:re=(X-Q)/me+4}re/=6}return{h:re,s:ae,v:ke}}function i(X,Q,ne,re){var ae=[V(p(X).toString(16)),V(p(Q).toString(16)),V(p(ne).toString(16))];return re&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function c(X,Q,ne,re){return[V(B(re)),V(p(X).toString(16)),V(p(Q).toString(16)),V(p(ne).toString(16))].join("")}function h(X,Q){Q=0===Q?0:Q||10;var ne=r(X).toHsl();return ne.s-=Q/100,ne.s=j(ne.s),r(ne)}function f(X,Q){Q=0===Q?0:Q||10;var ne=r(X).toHsl();return ne.s+=Q/100,ne.s=j(ne.s),r(ne)}function b(X){return r(X).desaturate(100)}function v(X,Q){Q=0===Q?0:Q||10;var ne=r(X).toHsl();return ne.l+=Q/100,ne.l=j(ne.l),r(ne)}function g(X,Q){Q=0===Q?0:Q||10;var ne=r(X).toRgb();return ne.r=e(0,s(255,ne.r-p(-Q/100*255))),ne.g=e(0,s(255,ne.g-p(-Q/100*255))),ne.b=e(0,s(255,ne.b-p(-Q/100*255))),r(ne)}function y(X,Q){Q=0===Q?0:Q||10;var ne=r(X).toHsl();return ne.l-=Q/100,ne.l=j(ne.l),r(ne)}function d(X,Q){var ne=r(X).toHsl(),re=(ne.h+Q)%360;return ne.h=re<0?360+re:re,r(ne)}function m(X){var Q=r(X).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function w(X){var Q=r(X).toHsl(),ne=Q.h;return[r(X),r({h:(ne+120)%360,s:Q.s,l:Q.l}),r({h:(ne+240)%360,s:Q.s,l:Q.l})]}function u(X){var Q=r(X).toHsl(),ne=Q.h;return[r(X),r({h:(ne+90)%360,s:Q.s,l:Q.l}),r({h:(ne+180)%360,s:Q.s,l:Q.l}),r({h:(ne+270)%360,s:Q.s,l:Q.l})]}function S(X){var Q=r(X).toHsl(),ne=Q.h;return[r(X),r({h:(ne+72)%360,s:Q.s,l:Q.l}),r({h:(ne+216)%360,s:Q.s,l:Q.l})]}function _(X,Q,ne){Q=Q||6,ne=ne||30;var re=r(X).toHsl(),ae=360/ne,se=[r(X)];for(re.h=(re.h-(ae*Q>>1)+720)%360;--Q;)re.h=(re.h+ae)%360,se.push(r(re));return se}function E(X,Q){Q=Q||6;for(var ne=r(X).toHsv(),re=ne.h,ae=ne.s,se=ne.v,pe=[],ke=1/Q;Q--;)pe.push(r({h:re,s:ae,v:se})),se=(se+ke)%1;return pe}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var X=this.toRgb();return(299*X.r+587*X.g+114*X.b)/1e3},getLuminance:function(){var X,Q,ne,re=this.toRgb();return Q=re.g/255,ne=re.b/255,.2126*((X=re.r/255)<=.03928?X/12.92:k.pow((X+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:k.pow((Q+.055)/1.055,2.4))+.0722*(ne<=.03928?ne/12.92:k.pow((ne+.055)/1.055,2.4))},setAlpha:function(X){return this._a=P(X),this._roundA=p(100*this._a)/100,this},toHsv:function(){var X=a(this._r,this._g,this._b);return{h:360*X.h,s:X.s,v:X.v,a:this._a}},toHsvString:function(){var X=a(this._r,this._g,this._b),Q=p(360*X.h),ne=p(100*X.s),re=p(100*X.v);return 1==this._a?"hsv("+Q+", "+ne+"%, "+re+"%)":"hsva("+Q+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHsl:function(){var X=n(this._r,this._g,this._b);return{h:360*X.h,s:X.s,l:X.l,a:this._a}},toHslString:function(){var X=n(this._r,this._g,this._b),Q=p(360*X.h),ne=p(100*X.s),re=p(100*X.l);return 1==this._a?"hsl("+Q+", "+ne+"%, "+re+"%)":"hsla("+Q+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHex:function(X){return i(this._r,this._g,this._b,X)},toHexString:function(X){return"#"+this.toHex(X)},toHex8:function(X){return ne=this._g,re=this._b,ae=this._a,se=X,pe=[V(p(this._r).toString(16)),V(p(ne).toString(16)),V(p(re).toString(16)),V(B(ae))],se&&pe[0].charAt(0)==pe[0].charAt(1)&&pe[1].charAt(0)==pe[1].charAt(1)&&pe[2].charAt(0)==pe[2].charAt(1)&&pe[3].charAt(0)==pe[3].charAt(1)?pe[0].charAt(0)+pe[1].charAt(0)+pe[2].charAt(0)+pe[3].charAt(0):pe.join("");var ne,re,ae,se,pe},toHex8String:function(X){return"#"+this.toHex8(X)},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*z(this._r,255))+"%",g:p(100*z(this._g,255))+"%",b:p(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+p(100*z(this._r,255))+"%, "+p(100*z(this._g,255))+"%, "+p(100*z(this._b,255))+"%)":"rgba("+p(100*z(this._r,255))+"%, "+p(100*z(this._g,255))+"%, "+p(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(X){var Q="#"+c(this._r,this._g,this._b,this._a),ne=Q,re=this._gradientType?"GradientType = 1, ":"";if(X){var ae=r(X);ne="#"+c(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+re+"startColorstr="+Q+",endColorstr="+ne+")"},toString:function(X){var Q=!!X;X=X||this._format;var ne=!1;return Q||!(this._a<1&&this._a>=0)||"hex"!==X&&"hex6"!==X&&"hex3"!==X&&"hex4"!==X&&"hex8"!==X&&"name"!==X?("rgb"===X&&(ne=this.toRgbString()),"prgb"===X&&(ne=this.toPercentageRgbString()),"hex"!==X&&"hex6"!==X||(ne=this.toHexString()),"hex3"===X&&(ne=this.toHexString(!0)),"hex4"===X&&(ne=this.toHex8String(!0)),"hex8"===X&&(ne=this.toHex8String()),"name"===X&&(ne=this.toName()),"hsl"===X&&(ne=this.toHslString()),"hsv"===X&&(ne=this.toHsvString()),ne||this.toHexString()):"name"===X&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(X,Q){var ne=X.apply(null,[this].concat([].slice.call(Q)));return this._r=ne._r,this._g=ne._g,this._b=ne._b,this.setAlpha(ne._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(d,arguments)},_applyCombination:function(X,Q){return X.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(_,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(u,arguments)}},r.fromRatio=function(X,Q){if("object"==typeof X){var ne={};for(var re in X)X.hasOwnProperty(re)&&(ne[re]="a"===re?X[re]:D(X[re]));X=ne}return r(X,Q)},r.equals=function(X,Q){return!(!X||!Q)&&r(X).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:o(),g:o(),b:o()})},r.mix=function(X,Q,ne){ne=0===ne?0:ne||50;var re=r(X).toRgb(),ae=r(Q).toRgb(),se=ne/100;return r({r:(ae.r-re.r)*se+re.r,g:(ae.g-re.g)*se+re.g,b:(ae.b-re.b)*se+re.b,a:(ae.a-re.a)*se+re.a})},r.readability=function(X,Q){var ne=r(X),re=r(Q);return(k.max(ne.getLuminance(),re.getLuminance())+.05)/(k.min(ne.getLuminance(),re.getLuminance())+.05)},r.isReadable=function(X,Q,ne){var re,ae,se,pe,ke,me=r.readability(X,Q);switch(ae=!1,(se=ne,"AA"!==(pe=((se=se||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==pe&&(pe="AA"),"small"!==(ke=(se.size||"small").toLowerCase())&&"large"!==ke&&(ke="small"),re={level:pe,size:ke}).level+re.size){case"AAsmall":case"AAAlarge":ae=me>=4.5;break;case"AAlarge":ae=me>=3;break;case"AAAsmall":ae=me>=7}return ae},r.mostReadable=function(X,Q,ne){var re,ae,se,pe,ke=null,me=0;ae=(ne=ne||{}).includeFallbackColors,se=ne.level,pe=ne.size;for(var le=0;le<Q.length;le++)(re=r.readability(X,Q[le]))>me&&(me=re,ke=r(Q[le]));return r.isReadable(X,ke,{level:se,size:pe})||!ae?ke:(ne.includeFallbackColors=!1,r.mostReadable(X,["#fff","#000"],ne))};var L=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=r.hexNames=function(X){var Q={};for(var ne in X)X.hasOwnProperty(ne)&&(Q[X[ne]]=ne);return Q}(L);function P(X){return X=parseFloat(X),(isNaN(X)||X<0||X>1)&&(X=1),X}function z(X,Q){var re;"string"==typeof(re=X)&&-1!=re.indexOf(".")&&1===parseFloat(re)&&(X="100%");var ne=function(re){return"string"==typeof re&&-1!=re.indexOf("%")}(X);return X=s(Q,e(0,parseFloat(X))),ne&&(X=parseInt(X*Q,10)/100),k.abs(X-Q)<1e-6?1:X%Q/parseFloat(Q)}function j(X){return s(1,e(0,X))}function R(X){return parseInt(X,16)}function V(X){return 1==X.length?"0"+X:""+X}function D(X){return X<=1&&(X=100*X+"%"),X}function B(X){return k.round(255*parseFloat(X)).toString(16)}function N(X){return R(X)/255}var U,J,Y,q=(J="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",Y="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+Y),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+Y),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+Y),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(X){return!!q.CSS_UNIT.exec(X)}$.exports?$.exports=r:void 0===(M=function(){return r}.call(I,t,I,$))||($.exports=M)}(Math)},57060:function($){"use strict";$.exports=t,$.exports.float32=$.exports.float=t,$.exports.fract32=$.exports.fract=function(M,k){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);k instanceof Float32Array||(k=t(M));for(var l=0,T=k.length;l<T;l++)k[l]=M[l]-k[l];return k}return t(M-t(M))};var I=new Float32Array(1);function t(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(I[0]=M,I[0])}},75686:function($,I,t){"use strict";var M=t(25677);function k(T,x){var p=M(getComputedStyle(T).getPropertyValue(x));return p[0]*l(p[1],T)}function l(T,x){switch(x=x||document.body,T=(T||"px").trim().toLowerCase(),x!==window&&x!==document||(x=document.body),T){case"%":return x.clientHeight/100;case"ch":case"ex":return function(p,s){var e=document.createElement("div");e.style["font-size"]="128"+p,s.appendChild(e);var o=k(e,"font-size")/128;return s.removeChild(e),o}(T,x);case"em":return k(x,"font-size");case"rem":return k(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 37.79527559055118;case"mm":return 3.7795275590551185;case"pt":return 1.3333333333333333;case"pc":return 16}return 1}$.exports=l},96892:function($,I,t){"use strict";function M(T){return T}function k(T,x){return"string"==typeof x&&(x=T.objects[x]),"GeometryCollection"===x.type?{type:"FeatureCollection",features:x.geometries.map(function(p){return l(T,p)})}:l(T,x)}function l(T,x){var p=x.id,s=x.bbox,e=null==x.properties?{}:x.properties,o=function(r,n){var a=function(g){if(null==g)return M;var y,d,m=g.scale[0],w=g.scale[1],u=g.translate[0],S=g.translate[1];return function(_,E){E||(y=d=0);var L=2,C=_.length,P=new Array(C);for(P[0]=(y+=_[0])*m+u,P[1]=(d+=_[1])*w+S;L<C;)P[L]=_[L],++L;return P}}(r.transform),i=r.arcs;function c(g,y){y.length&&y.pop();for(var d=i[g<0?~g:g],m=0,w=d.length;m<w;++m)y.push(a(d[m],m));g<0&&function(u,S){for(var _,E=u.length,L=E-S;L<--E;)_=u[L],u[L++]=u[E],u[E]=_}(y,w)}function h(g){return a(g)}function f(g){for(var y=[],d=0,m=g.length;d<m;++d)c(g[d],y);return y.length<2&&y.push(y[0]),y}function b(g){for(var y=f(g);y.length<4;)y.push(y[0]);return y}function v(g){return g.map(b)}return function g(y){var d,m=y.type;switch(m){case"GeometryCollection":return{type:m,geometries:y.geometries.map(g)};case"Point":d=h(y.coordinates);break;case"MultiPoint":d=y.coordinates.map(h);break;case"LineString":d=f(y.arcs);break;case"MultiLineString":d=y.arcs.map(f);break;case"Polygon":d=v(y.arcs);break;case"MultiPolygon":d=y.arcs.map(v);break;default:return null}return{type:m,coordinates:d}}(n)}(T,x);return null==p&&null==s?{type:"Feature",properties:e,geometry:o}:null==s?{type:"Feature",id:p,properties:e,geometry:o}:{type:"Feature",id:p,bbox:s,properties:e,geometry:o}}t.d(I,{zL:function(){return k}})},73116:function($,I,t){"use strict";var M=t(24511);$.exports=function(k){if("function"!=typeof k||!hasOwnProperty.call(k,"length"))return!1;try{if("number"!=typeof k.length||"function"!=typeof k.call||"function"!=typeof k.apply)return!1}catch{return!1}return!M(k)}},69190:function($,I,t){"use strict";var M=t(24582),k=t(47403),l=t(9234),T=t(6048),x=function(p,s){return p.replace("%v",T(s))};$.exports=function(p,s,e){if(!k(e))throw new TypeError(x(s,p));if(!M(p)){if("default"in e)return e.default;if(e.isOptional)return null}var o=l(e.errorMessage);throw M(o)||(o=s),new TypeError(x(o,p))}},18497:function($){"use strict";$.exports=function(I){try{return I.toString()}catch{try{return String(I)}catch{return null}}}},6048:function($,I,t){"use strict";var M=t(18497),k=/[\n\r\u2028\u2029]/g;$.exports=function(l){var T=M(l);return null===T?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(k,function(x){switch(x){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function($,I,t){"use strict";var M=t(24582),k={object:!0,function:!0,undefined:!0};$.exports=function(l){return!!M(l)&&hasOwnProperty.call(k,typeof l)}},82527:function($,I,t){"use strict";var M=t(69190),k=t(84985);$.exports=function(l){return k(l)?l:M(l,"%v is not a plain function",arguments[1])}},84985:function($,I,t){"use strict";var M=t(73116),k=/^\s*class[\s{/}]/,l=Function.prototype.toString;$.exports=function(T){return!!M(T)&&!k.test(l.call(T))}},24511:function($,I,t){"use strict";var M=t(47403);$.exports=function(k){if(!M(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},9234:function($,I,t){"use strict";var M=t(24582),k=t(47403),l=Object.prototype.toString;$.exports=function(T){if(!M(T))return null;if(k(T)){var x=T.toString;if("function"!=typeof x||x===l)return null}try{return""+T}catch{return null}}},10424:function($,I,t){"use strict";var M=t(69190),k=t(24582);$.exports=function(l){return k(l)?l:M(l,"Cannot use %v",arguments[1])}},24582:function($){"use strict";$.exports=function(I){return null!=I}},58404:function($,I,t){"use strict";var M=t(13547),k=t(12129),l=t(12856).Buffer;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",x=typeof BigUint64Array<"u",p=typeof BigInt64Array<"u",s=t.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var e=s.DATA,o=s.BUFFER;function r(S){if(S){var E=M.log2(S.length||S.byteLength);e[E].push(S)}}function n(S){S=M.nextPow2(S);var _=M.log2(S),E=e[_];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(n(S),0,S)}function i(S){return new Uint16Array(n(2*S),0,S)}function c(S){return new Uint32Array(n(4*S),0,S)}function h(S){return new Int8Array(n(S),0,S)}function f(S){return new Int16Array(n(2*S),0,S)}function b(S){return new Int32Array(n(4*S),0,S)}function v(S){return new Float32Array(n(4*S),0,S)}function g(S){return new Float64Array(n(8*S),0,S)}function y(S){return T?new Uint8ClampedArray(n(S),0,S):a(S)}function d(S){return x?new BigUint64Array(n(8*S),0,S):null}function m(S){return p?new BigInt64Array(n(8*S),0,S):null}function w(S){return new DataView(n(S),0,S)}function u(S){S=M.nextPow2(S);var _=M.log2(S),E=o[_];return E.length>0?E.pop():new l(S)}I.free=function(S){if(l.isBuffer(S))o[M.log2(S.length)].push(S);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(S)&&(S=S.buffer),!S)return;var E=0|M.log2(S.length||S.byteLength);e[E].push(S)}},I.freeUint8=I.freeUint16=I.freeUint32=I.freeBigUint64=I.freeInt8=I.freeInt16=I.freeInt32=I.freeBigInt64=I.freeFloat32=I.freeFloat=I.freeFloat64=I.freeDouble=I.freeUint8Clamped=I.freeDataView=function(S){r(S.buffer)},I.freeArrayBuffer=r,I.freeBuffer=function(S){o[M.log2(S.length)].push(S)},I.malloc=function(S,_){if(void 0===_||"arraybuffer"===_)return n(S);switch(_){case"uint8":return a(S);case"uint16":return i(S);case"uint32":return c(S);case"int8":return h(S);case"int16":return f(S);case"int32":return b(S);case"float":case"float32":return v(S);case"double":case"float64":return g(S);case"uint8_clamped":return y(S);case"bigint64":return m(S);case"biguint64":return d(S);case"buffer":return u(S);case"data":case"dataview":return w(S);default:return null}return null},I.mallocArrayBuffer=n,I.mallocUint8=a,I.mallocUint16=i,I.mallocUint32=c,I.mallocInt8=h,I.mallocInt16=f,I.mallocInt32=b,I.mallocFloat32=I.mallocFloat=v,I.mallocFloat64=I.mallocDouble=g,I.mallocUint8Clamped=y,I.mallocBigUint64=d,I.mallocBigInt64=m,I.mallocDataView=w,I.mallocBuffer=u,I.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,e[S].length=0,o[S].length=0}},90448:function($){var I=/[\'\"]/;$.exports=function(t){return t?(I.test(t.charAt(0))&&(t=t.substr(1)),I.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}},93447:function($){"use strict";$.exports=function(I,t,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var k=0,l=M.length;k<l;k++){var T=M[k];for(var x in T)if((void 0===t[x]||Array.isArray(t[x])||I[x]!==t[x])&&x in t){var p;if(!0===T[x])p=t[x];else if(!1===T[x]||"function"==typeof T[x]&&void 0===(p=T[x](t[x],I,t)))continue;I[x]=p}}return I}},20588:function($,I,t){function M(k){try{if(!t.g.localStorage)return!1}catch{return!1}var l=t.g.localStorage[k];return null!=l&&"true"===String(l).toLowerCase()}$.exports=function(k,l){if(M("noDeprecation"))return k;var T=!1;return function(){if(!T){if(M("throwDeprecation"))throw new Error(l);M("traceDeprecation")?console.trace(l):console.warn(l),T=!0}return k.apply(this,arguments)}}},45920:function($){$.exports=function(I){return I&&"object"==typeof I&&"function"==typeof I.copy&&"function"==typeof I.fill&&"function"==typeof I.readUInt8}},4936:function($,I,t){"use strict";var M=t(47216),k=t(65481),l=t(21099),T=t(9187);function x(z){return z.call.bind(z)}var p=typeof BigInt<"u",s=typeof Symbol<"u",e=x(Object.prototype.toString),o=x(Number.prototype.valueOf),r=x(String.prototype.valueOf),n=x(Boolean.prototype.valueOf);if(p)var a=x(BigInt.prototype.valueOf);if(s)var i=x(Symbol.prototype.valueOf);function c(z,j){if("object"!=typeof z)return!1;try{return j(z),!0}catch{return!1}}function h(z){return"[object Map]"===e(z)}function f(z){return"[object Set]"===e(z)}function b(z){return"[object WeakMap]"===e(z)}function v(z){return"[object WeakSet]"===e(z)}function g(z){return"[object ArrayBuffer]"===e(z)}function y(z){return typeof ArrayBuffer<"u"&&(g.working?g(z):z instanceof ArrayBuffer)}function d(z){return"[object DataView]"===e(z)}function m(z){return typeof DataView<"u"&&(d.working?d(z):z instanceof DataView)}I.isArgumentsObject=M,I.isGeneratorFunction=k,I.isTypedArray=T,I.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||null!==z&&"object"==typeof z&&"function"==typeof z.then&&"function"==typeof z.catch},I.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):T(z)||m(z)},I.isUint8Array=function(z){return"Uint8Array"===l(z)},I.isUint8ClampedArray=function(z){return"Uint8ClampedArray"===l(z)},I.isUint16Array=function(z){return"Uint16Array"===l(z)},I.isUint32Array=function(z){return"Uint32Array"===l(z)},I.isInt8Array=function(z){return"Int8Array"===l(z)},I.isInt16Array=function(z){return"Int16Array"===l(z)},I.isInt32Array=function(z){return"Int32Array"===l(z)},I.isFloat32Array=function(z){return"Float32Array"===l(z)},I.isFloat64Array=function(z){return"Float64Array"===l(z)},I.isBigInt64Array=function(z){return"BigInt64Array"===l(z)},I.isBigUint64Array=function(z){return"BigUint64Array"===l(z)},h.working=typeof Map<"u"&&h(new Map),I.isMap=function(z){return typeof Map<"u"&&(h.working?h(z):z instanceof Map)},f.working=typeof Set<"u"&&f(new Set),I.isSet=function(z){return typeof Set<"u"&&(f.working?f(z):z instanceof Set)},b.working=typeof WeakMap<"u"&&b(new WeakMap),I.isWeakMap=function(z){return typeof WeakMap<"u"&&(b.working?b(z):z instanceof WeakMap)},v.working=typeof WeakSet<"u"&&v(new WeakSet),I.isWeakSet=function(z){return v(z)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),I.isArrayBuffer=y,d.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&d(new DataView(new ArrayBuffer(1),0,1)),I.isDataView=m;var w=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function u(z){return"[object SharedArrayBuffer]"===e(z)}function S(z){return void 0!==w&&(void 0===u.working&&(u.working=u(new w)),u.working?u(z):z instanceof w)}function _(z){return c(z,o)}function E(z){return c(z,r)}function L(z){return c(z,n)}function C(z){return p&&c(z,a)}function P(z){return s&&c(z,i)}I.isSharedArrayBuffer=S,I.isAsyncFunction=function(z){return"[object AsyncFunction]"===e(z)},I.isMapIterator=function(z){return"[object Map Iterator]"===e(z)},I.isSetIterator=function(z){return"[object Set Iterator]"===e(z)},I.isGeneratorObject=function(z){return"[object Generator]"===e(z)},I.isWebAssemblyCompiledModule=function(z){return"[object WebAssembly.Module]"===e(z)},I.isNumberObject=_,I.isStringObject=E,I.isBooleanObject=L,I.isBigIntObject=C,I.isSymbolObject=P,I.isBoxedPrimitive=function(z){return _(z)||E(z)||L(z)||C(z)||P(z)},I.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(y(z)||S(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(I,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},43827:function($,I,t){var M=t(90386),k=Object.getOwnPropertyDescriptors||function(z){for(var j=Object.keys(z),R={},V=0;V<j.length;V++)R[j[V]]=Object.getOwnPropertyDescriptor(z,j[V]);return R},l=/%[sdj%]/g;I.format=function(z){if(!b(z)){for(var j=[],R=0;R<arguments.length;R++)j.push(s(arguments[R]));return j.join(" ")}R=1;for(var V=arguments,D=V.length,B=String(z).replace(l,function(U){if("%%"===U)return"%";if(R>=D)return U;switch(U){case"%s":return String(V[R++]);case"%d":return Number(V[R++]);case"%j":try{return JSON.stringify(V[R++])}catch{return"[Circular]"}default:return U}}),N=V[R];R<D;N=V[++R])h(N)||!y(N)?B+=" "+N:B+=" "+s(N);return B},I.deprecate=function(z,j){if(void 0!==M&&!0===M.noDeprecation)return z;if(void 0===M)return function(){return I.deprecate(z,j).apply(this,arguments)};var R=!1;return function(){if(!R){if(M.throwDeprecation)throw new Error(j);M.traceDeprecation?console.trace(j):console.error(j),R=!0}return z.apply(this,arguments)}};var T={},x=/^$/;if(M.env.NODE_DEBUG){var p=M.env.NODE_DEBUG;p=p.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),x=new RegExp("^"+p+"$","i")}function s(z,j){var R={seen:[],stylize:o};return arguments.length>=3&&(R.depth=arguments[2]),arguments.length>=4&&(R.colors=arguments[3]),c(j)?R.showHidden=j:j&&I._extend(R,j),v(R.showHidden)&&(R.showHidden=!1),v(R.depth)&&(R.depth=2),v(R.colors)&&(R.colors=!1),v(R.customInspect)&&(R.customInspect=!0),R.colors&&(R.stylize=e),r(R,z,R.depth)}function e(z,j){var R=s.styles[j];return R?"\x1b["+s.colors[R][0]+"m"+z+"\x1b["+s.colors[R][1]+"m":z}function o(z,j){return z}function r(z,j,R){if(z.customInspect&&j&&w(j.inspect)&&j.inspect!==I.inspect&&(!j.constructor||j.constructor.prototype!==j)){var V=j.inspect(R,z);return b(V)||(V=r(z,V,R)),V}var D=function(X,Q){if(v(Q))return X.stylize("undefined","undefined");if(b(Q)){var ne="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(ne,"string")}return f(Q)?X.stylize(""+Q,"number"):c(Q)?X.stylize(""+Q,"boolean"):h(Q)?X.stylize("null","null"):void 0}(z,j);if(D)return D;var Q,B=Object.keys(j),N=(Q={},B.forEach(function(ne,re){Q[ne]=!0}),Q);if(z.showHidden&&(B=Object.getOwnPropertyNames(j)),m(j)&&(B.indexOf("message")>=0||B.indexOf("description")>=0))return n(j);if(0===B.length){if(w(j))return z.stylize("[Function"+(j.name?": "+j.name:"")+"]","special");if(g(j))return z.stylize(RegExp.prototype.toString.call(j),"regexp");if(d(j))return z.stylize(Date.prototype.toString.call(j),"date");if(m(j))return n(j)}var J,Y="",q=!1,H=["{","}"];return i(j)&&(q=!0,H=["[","]"]),w(j)&&(Y=" [Function"+(j.name?": "+j.name:"")+"]"),g(j)&&(Y=" "+RegExp.prototype.toString.call(j)),d(j)&&(Y=" "+Date.prototype.toUTCString.call(j)),m(j)&&(Y=" "+n(j)),0!==B.length||q&&0!=j.length?R<0?g(j)?z.stylize(RegExp.prototype.toString.call(j),"regexp"):z.stylize("[Object]","special"):(z.seen.push(j),J=q?function(X,Q,ne,re,ae){for(var se=[],pe=0,ke=Q.length;pe<ke;++pe)L(Q,String(pe))?se.push(a(X,Q,ne,re,String(pe),!0)):se.push("");return ae.forEach(function(me){me.match(/^\d+$/)||se.push(a(X,Q,ne,re,me,!0))}),se}(z,j,R,N,B):B.map(function(X){return a(z,j,R,N,X,q)}),z.seen.pop(),function(X,Q,ne){return X.reduce(function(re,ae){return ae.indexOf("\n"),re+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ne[0]+(""===Q?"":Q+"\n ")+" "+X.join(",\n  ")+" "+ne[1]:ne[0]+Q+" "+X.join(", ")+" "+ne[1]}(J,Y,H)):H[0]+Y+H[1]}function n(z){return"["+Error.prototype.toString.call(z)+"]"}function a(z,j,R,V,D,B){var N,U,J;if((J=Object.getOwnPropertyDescriptor(j,D)||{value:j[D]}).get?U=z.stylize(J.set?"[Getter/Setter]":"[Getter]","special"):J.set&&(U=z.stylize("[Setter]","special")),L(V,D)||(N="["+D+"]"),U||(z.seen.indexOf(J.value)<0?(U=h(R)?r(z,J.value,null):r(z,J.value,R-1)).indexOf("\n")>-1&&(U=B?U.split("\n").map(function(Y){return"  "+Y}).join("\n").slice(2):"\n"+U.split("\n").map(function(Y){return"   "+Y}).join("\n")):U=z.stylize("[Circular]","special")),v(N)){if(B&&D.match(/^\d+$/))return U;(N=JSON.stringify(""+D)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(N=N.slice(1,-1),N=z.stylize(N,"name")):(N=N.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),N=z.stylize(N,"string"))}return N+": "+U}function i(z){return Array.isArray(z)}function c(z){return"boolean"==typeof z}function h(z){return null===z}function f(z){return"number"==typeof z}function b(z){return"string"==typeof z}function v(z){return void 0===z}function g(z){return y(z)&&"[object RegExp]"===u(z)}function y(z){return"object"==typeof z&&null!==z}function d(z){return y(z)&&"[object Date]"===u(z)}function m(z){return y(z)&&("[object Error]"===u(z)||z instanceof Error)}function w(z){return"function"==typeof z}function u(z){return Object.prototype.toString.call(z)}function S(z){return z<10?"0"+z.toString(10):z.toString(10)}I.debuglog=function(z){if(z=z.toUpperCase(),!T[z])if(x.test(z)){var j=M.pid;T[z]=function(){var R=I.format.apply(I,arguments);console.error("%s %d: %s",z,j,R)}}else T[z]=function(){};return T[z]},I.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},I.types=t(4936),I.isArray=i,I.isBoolean=c,I.isNull=h,I.isNullOrUndefined=function(z){return null==z},I.isNumber=f,I.isString=b,I.isSymbol=function(z){return"symbol"==typeof z},I.isUndefined=v,I.isRegExp=g,I.types.isRegExp=g,I.isObject=y,I.isDate=d,I.types.isDate=d,I.isError=m,I.types.isNativeError=m,I.isFunction=w,I.isPrimitive=function(z){return null===z||"boolean"==typeof z||"number"==typeof z||"string"==typeof z||"symbol"==typeof z||void 0===z},I.isBuffer=t(45920);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var z=new Date,j=[S(z.getHours()),S(z.getMinutes()),S(z.getSeconds())].join(":");return[z.getDate(),_[z.getMonth()],j].join(" ")}function L(z,j){return Object.prototype.hasOwnProperty.call(z,j)}I.log=function(){console.log("%s - %s",E(),I.format.apply(I,arguments))},I.inherits=t(42018),I._extend=function(z,j){if(!j||!y(j))return z;for(var R=Object.keys(j),V=R.length;V--;)z[R[V]]=j[R[V]];return z};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function P(z,j){if(!z){var R=new Error("Promise was rejected with a falsy value");R.reason=z,z=R}return j(z)}I.promisify=function(z){if("function"!=typeof z)throw new TypeError('The "original" argument must be of type Function');if(C&&z[C]){var j;if("function"!=typeof(j=z[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(j,C,{value:j,enumerable:!1,writable:!1,configurable:!0}),j}function j(){for(var R,V,D=new Promise(function(U,J){R=U,V=J}),B=[],N=0;N<arguments.length;N++)B.push(arguments[N]);B.push(function(U,J){U?V(U):R(J)});try{z.apply(this,B)}catch(U){V(U)}return D}return Object.setPrototypeOf(j,Object.getPrototypeOf(z)),C&&Object.defineProperty(j,C,{value:j,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(j,k(z))},I.promisify.custom=C,I.callbackify=function(z){if("function"!=typeof z)throw new TypeError('The "original" argument must be of type Function');function j(){for(var R=[],V=0;V<arguments.length;V++)R.push(arguments[V]);var D=R.pop();if("function"!=typeof D)throw new TypeError("The last argument must be of type Function");var B=this,N=function(){return D.apply(B,arguments)};z.apply(this,R).then(function(U){M.nextTick(N.bind(null,null,U))},function(U){M.nextTick(P.bind(null,U,N))})}return Object.setPrototypeOf(j,Object.getPrototypeOf(z)),Object.defineProperties(j,k(z)),j}},40372:function($,I,t){var M=t(86249);$.exports=function(k){return M("webgl",k)}},21099:function($,I,t){"use strict";var M=t(31353),k=t(72077),l=t(6614),T=t(40383),x=l("Object.prototype.toString"),p=t(84543)(),s=typeof globalThis>"u"?t.g:globalThis,e=k(),o=l("String.prototype.slice"),r={},n=Object.getPrototypeOf;p&&T&&n&&M(e,function(i){if("function"==typeof s[i]){var c=new s[i];if(Symbol.toStringTag in c){var h=n(c),f=T(h,Symbol.toStringTag);if(!f){var b=n(h);f=T(b,Symbol.toStringTag)}r[i]=f.get}}});var a=t(9187);$.exports=function(i){return!!a(i)&&(p&&Symbol.toStringTag in i?(c=i,h=!1,M(r,function(f,b){if(!h)try{var v=f.call(c);v===b&&(h=v)}catch{}}),h):o(x(i),8,-1));var c,h}},3961:function($,I,t){var M=t(63489),k=t(56131),l=M.instance();function T(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}k(T.prototype=new M.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,a){if("string"==typeof n){var i=n.match(p);return i?i[0]:""}var c=this._validateYear(n),h=n.month(),f=""+this.toChineseMonth(c,h);return a&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(c,h)&&(f+="i"),f},monthNames:function(n){if("string"==typeof n){var a=n.match(s);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h="\u95f0"+h),h},monthNamesShort:function(n){if("string"==typeof n){var a=n.match(e);return a?a[0]:""}var i=this._validateYear(n),c=n.month(),h=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(i,c)-1];return this.isIntercalaryMonth(i,c)&&(h="\u95f0"+h),h},parseMonth:function(n,a){n=this._validateYear(n);var i,c=parseInt(a);if(isNaN(c))"\u95f0"===a[0]&&(i=!0,a=a.substring(1)),"\u6708"===a[a.length-1]&&(a=a.substring(0,a.length-1)),c=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(a);else{var h=a[a.length-1];i="i"===h||"I"===h}return this.toMonthIndex(n,c,i)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,a){if(n.year&&(n=n.year()),"number"!=typeof n||n<1888||n>2111)throw a.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,a,i){var c=this.intercalaryMonth(n);if(i&&a!==c||a<1||a>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!i&&a<=c?a-1:a:a-1},toChineseMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);if(a<0||a>(i?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?a<i?a+1:a:a+1},intercalaryMonth:function(n){return n=this._validateYear(n),o[n-o[0]]>>13},isIntercalaryMonth:function(n,a){n.year&&(a=(n=n.year()).month());var i=this.intercalaryMonth(n);return!!i&&i===a},leapYear:function(n){return 0!==this.intercalaryMonth(n)},weekOfYear:function(n,a,i){var c,h=this._validateYear(n,M.local.invalidyear),f=r[h-r[0]];(c=l.newDate(f>>9&4095,f>>5&15,31&f)).add(4-(c.dayOfWeek()||7),"d");var y=this.toJD(n,a,i)-c.toJD();return 1+Math.floor(y/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,a){n.year&&(a=n.month(),n=n.year()),n=this._validateYear(n);var i=o[n-o[0]];if(a>(i>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return i&1<<12-a?30:29},weekDay:function(n,a,i){return(this.dayOfWeek(n,a,i)||7)<6},toJD:function(n,a,i){var c=this._validate(n,f,i,M.local.invalidDate);n=this._validateYear(c.year()),a=c.month(),i=c.day();var h=this.isIntercalaryMonth(n,a),f=this.toChineseMonth(n,a),b=function(v,g,y,d,m){var w,u,S;if("object"==typeof v)u=v,w=g||{};else{var _;if(!("number"==typeof v&&v>=1888&&v<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof g&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof y&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof d?(_=!1,w=d):(_=!!d,w={}),u={year:v,month:g,day:y,isIntercalary:_}}S=u.day-1;var E,L=o[u.year-o[0]],C=L>>13;E=C&&(u.month>C||u.isIntercalary)?u.month:u.month-1;for(var P=0;P<E;P++)S+=L&1<<12-P?30:29;var z=r[u.year-r[0]],j=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+S);return w.year=j.getFullYear(),w.month=1+j.getMonth(),w.day=j.getDate(),w}(n,f,i,h);return l.toJD(b.year,b.month,b.day)},fromJD:function(n){var a=l.fromJD(n),i=function(h,f,b,v){var g,y;if("object"==typeof h)g=h,y=f||{};else{if(!("number"==typeof h&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof f&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof b&&b>=1&&b<=31))throw new Error("Solar day outside range 1 - 31");g={year:h,month:f,day:b},y={}}var d=r[g.year-r[0]];y.year=(g.year<<9|g.month<<5|g.day)>=d?g.year:g.year-1,d=r[y.year-r[0]];var w,u=new Date(d>>9&4095,(d>>5&15)-1,31&d),S=new Date(g.year,g.month-1,g.day);w=Math.round((S-u)/864e5);var _,E=o[y.year-o[0]];for(_=0;_<13;_++){var L=E&1<<12-_?30:29;if(w<L)break;w-=L}var C=E>>13;return!C||_<C?(y.isIntercalary=!1,y.month=1+_):_===C?(y.isIntercalary=!0,y.month=_):(y.isIntercalary=!1,y.month=_),y.day=1+w,y}(a.year(),a.month(),a.day()),c=this.toMonthIndex(i.year,i.month,i.isIntercalary);return this.newDate(i.year,c,i.day)},fromString:function(n){var a=n.match(x),i=this._validateYear(+a[1]),f=this.toMonthIndex(i,+a[2],!!a[3]);return this.newDate(i,f,+a[4])},add:function(n,a,i){var c=n.year(),h=n.month(),f=this.isIntercalaryMonth(c,h),b=this.toChineseMonth(c,h),v=Object.getPrototypeOf(T.prototype).add.call(this,n,a,i);if("y"===i){var g=v.year(),y=v.month(),d=this.isIntercalaryMonth(g,b),m=this.toMonthIndex(g,b,!(!f||!d));m!==y&&v.month(m)}return v}});var x=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,p=/^\d?\d[iI]?/m,s=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,e=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;M.calendars.chinese=T;var o=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function($,I,t){var M=t(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t(56131)(l.prototype=new M.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,p){var s=this.newDate(T,x,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var p=this._validate(T,x,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,x,p){return(this.dayOfWeek(T,x,p)||7)<6},toJD:function(T,x,p){var s=this._validate(T,x,p,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((x-Math.floor((x+366)/1461))/365)+1;p<=0&&p--,x=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(x/30)+1;return this.newDate(p,s,x-30*(s-1)+1)}}),M.calendars.coptic=l},86825:function($,I,t){var M=t(63489);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}t(56131)(l.prototype=new M.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(x){return this._validate(x,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(x){return this._validate(x,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(x,p,s){var e=this.newDate(x,p,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/8)+1},daysInMonth:function(x,p){var s=this._validate(x,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(x,p,s){return(this._validate(x,p,s,M.local.invalidDate).day()+1)%8},weekDay:function(x,p,s){var e=this.dayOfWeek(x,p,s);return e>=2&&e<=6},extraInfo:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate);return{century:T[Math.floor((e.year()-1)/100)+1]||""}},toJD:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate);return x=e.year()+(e.year()<0?1:0),p=e.month(),(s=e.day())+(p>1?16:0)+(p>2?32*(p-2):0)+400*(x-1)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x+.5)-Math.floor(this.jdEpoch)-1;var p=Math.floor(x/400)+1;x-=400*(p-1),x+=x>15?16:0;var s=Math.floor(x/32)+1;return this.newDate(p<=0?p-1:p,s,x-32*(s-1)+1)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=l},37715:function($,I,t){var M=t(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t(56131)(l.prototype=new M.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=x.year()+(x.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,x,p){var s=this.newDate(T,x,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var p=this._validate(T,x,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,x,p){return(this.dayOfWeek(T,x,p)||7)<6},toJD:function(T,x,p){var s=this._validate(T,x,p,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var x=Math.floor(T)+.5-this.jdEpoch,p=Math.floor((x-Math.floor((x+366)/1461))/365)+1;p<=0&&p--,x=Math.floor(T)+.5-this.newDate(p,1,1).toJD();var s=Math.floor(x/30)+1;return this.newDate(p,s,x-30*(s-1)+1)}}),M.calendars.ethiopian=l},99384:function($,I,t){var M=t(63489);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,p){return x-p*Math.floor(x/p)}t(56131)(l.prototype=new M.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var p=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(p.year())},_leapYear:function(x){return T(7*(x=x<0?x+1:x)+1,19)<7},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(x.year?x.year():x)?13:12},weekOfYear:function(x,p,s){var e=this.newDate(x,p,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(x){return x=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(-1===x?1:x+1,7,1)-this.toJD(x,7,1)},daysInMonth:function(x,p){return x.year&&(p=x.month(),x=x.year()),this._validate(x,p,this.minDay,M.local.invalidMonth),12===p&&this.leapYear(x)||8===p&&5===T(this.daysInYear(x),10)?30:9===p&&3===T(this.daysInYear(x),10)?29:this.daysPerMonth[p-1]},weekDay:function(x,p,s){return 6!==this.dayOfWeek(x,p,s)},extraInfo:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate);return{yearType:(this.leapYear(e)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(e)%10-3]}},toJD:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate);x=e.year(),p=e.month(),s=e.day();var o=x<=0?x+1:x,r=this.jdEpoch+this._delay1(o)+this._delay2(o)+s+1;if(p<7){for(var n=7;n<=this.monthsInYear(x);n++)r+=this.daysInMonth(x,n);for(n=1;n<p;n++)r+=this.daysInMonth(x,n)}else for(n=7;n<p;n++)r+=this.daysInMonth(x,n);return r},_delay1:function(x){var p=Math.floor((235*x-234)/19),e=29*p+Math.floor((12084+13753*p)/25920);return T(3*(e+1),7)<3&&e++,e},_delay2:function(x){var p=this._delay1(x-1),s=this._delay1(x);return this._delay1(x+1)-s==356?2:s-p==382?1:0},fromJD:function(x){x=Math.floor(x)+.5;for(var p=Math.floor(98496*(x-this.jdEpoch)/35975351)-1;x>=this.toJD(-1===p?1:p+1,7,1);)p++;for(var s=x<this.toJD(p,1,1)?7:1;x>this.toJD(p,s,this.daysInMonth(p,s));)s++;var e=x-this.toJD(p,s,1)+1;return this.newDate(p,s,e)}}),M.calendars.hebrew=l},43805:function($,I,t){var M=t(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t(56131)(l.prototype=new M.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,x,p){var s=this.newDate(T,x,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,x){var p=this._validate(T,x,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,x,p){return 5!==this.dayOfWeek(T,x,p)},toJD:function(T,x,p){var s=this._validate(T,x,p,M.local.invalidDate);return T=s.year(),x=s.month(),T=T<=0?T+1:T,(p=s.day())+Math.ceil(29.5*(x-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var x=Math.floor((30*(T-this.jdEpoch)+10646)/10631);x=x<=0?x-1:x;var p=Math.min(12,Math.ceil((T-29-this.toJD(x,1,1))/29.5)+1),s=T-this.toJD(x,p,1)+1;return this.newDate(x,p,s)}}),M.calendars.islamic=l},88874:function($,I,t){var M=t(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t(56131)(l.prototype=new M.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var x=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=x.year()<0?x.year()+1:x.year())%4==0},weekOfYear:function(T,x,p){var s=this.newDate(T,x,p);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,x){var p=this._validate(T,x,this.minDay,M.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(T,x,p){return(this.dayOfWeek(T,x,p)||7)<6},toJD:function(T,x,p){var s=this._validate(T,x,p,M.local.invalidDate);return T=s.year(),x=s.month(),p=s.day(),T<0&&T++,x<=2&&(T--,x+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(x+1))+p-1524.5},fromJD:function(T){var x=Math.floor(T+.5)+1524,p=Math.floor((x-122.1)/365.25),s=Math.floor(365.25*p),e=Math.floor((x-s)/30.6001),o=e-Math.floor(e<14?1:13),r=p-Math.floor(o>2?4716:4715),n=x-s-Math.floor(30.6001*e);return r<=0&&r--,this.newDate(r,o,n)}}),M.calendars.julian=l},83290:function($,I,t){var M=t(63489);function l(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}function T(p,s){return p-s*Math.floor(p/s)}function x(p,s){return T(p-1,s)+1}t(56131)(l.prototype=new M.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(p){p=this._validate(p,this.minMonth,this.minDay,M.local.invalidYear).year();var s=Math.floor(p/400);return p%=400,p+=p<0?400:0,s+"."+Math.floor(p/20)+"."+p%20},forYear:function(p){if((p=p.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,e=0;e<p.length;e++){var o=parseInt(p[e],10);if(Math.abs(o)>19||e>0&&o<0)throw"Invalid Mayan year";s=20*s+o}return s},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(p,s,e){return this._validate(p,s,e,M.local.invalidDate),0},daysInYear:function(p){return this._validate(p,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(p,s){return this._validate(p,s,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(p,s,e){return this._validate(p,s,e,M.local.invalidDate).day()},weekDay:function(p,s,e){return this._validate(p,s,e,M.local.invalidDate),!0},extraInfo:function(p,s,e){var o=this._validate(p,s,e,M.local.invalidDate).toJD(),r=this._toHaab(o),n=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(p){var s=T(8+(p-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(p){return[x(20+(p-=this.jdEpoch),20),x(p+4,13)]},toJD:function(p,s,e){var o=this._validate(p,s,e,M.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(p){p=Math.floor(p)+.5-this.jdEpoch;var s=Math.floor(p/360);p%=360,p+=p<0?360:0;var e=Math.floor(p/20);return this.newDate(s,e,p%20)}}),M.calendars.mayan=l},29108:function($,I,t){var M=t(63489),k=t(56131);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}l.prototype=new M.baseCalendar;var T=M.instance("gregorian");k(l.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var p=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(p.year()+(p.year()<1?1:0)+1469)},weekOfYear:function(x,p,s){var e=this.newDate(x,p,s);return e.add(1-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(x,p){var s=this._validate(x,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(x,p,s){return(this.dayOfWeek(x,p,s)||7)<6},toJD:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidMonth);(x=e.year())<0&&x++;for(var o=e.day(),r=1;r<e.month();r++)o+=this.daysPerMonth[r-1];return o+T.toJD(x+1468,3,13)},fromJD:function(x){x=Math.floor(x+.5);for(var p=Math.floor((x-(this.jdEpoch-1))/366);x>=this.toJD(p+1,1,1);)p++;for(var s=x-Math.floor(this.toJD(p,1,1)+.5)+1,e=1;s>this.daysInMonth(p,e);)s-=this.daysInMonth(p,e),e++;return this.newDate(p,e,s)}}),M.calendars.nanakshahi=l},55422:function($,I,t){var M=t(63489);function l(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}t(56131)(l.prototype=new M.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,x,p){var s=this.newDate(T,x,p);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[T])return this.daysPerYear;for(var x=0,p=this.minMonth;p<=12;p++)x+=this.NEPALI_CALENDAR_DATA[T][p];return x},daysInMonth:function(T,x){return T.year&&(x=T.month(),T=T.year()),this._validate(T,x,this.minDay,M.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[T]?this.daysPerMonth[x-1]:this.NEPALI_CALENDAR_DATA[T][x]},weekDay:function(T,x,p){return 6!==this.dayOfWeek(T,x,p)},toJD:function(T,x,p){var s=this._validate(T,x,p,M.local.invalidDate);T=s.year(),x=s.month(),p=s.day();var e=M.instance(),o=0,r=x,n=T;this._createMissingCalendarData(T);var a=T-(r>9||9===r&&p>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(9!==x&&(o=p,r--);9!==r;)r<=0&&(r=12,n--),o+=this.NEPALI_CALENDAR_DATA[n][r],r--;return 9===x?(o+=p-this.NEPALI_CALENDAR_DATA[n][0])<0&&(o+=e.daysInYear(a)):o+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],e.newDate(a,1,1).add(o,"d").toJD()},fromJD:function(T){var x=M.instance().fromJD(T),p=x.year(),s=x.dayOfYear(),e=p+56;this._createMissingCalendarData(e);for(var o=9,n=this.NEPALI_CALENDAR_DATA[e][o]-this.NEPALI_CALENDAR_DATA[e][0]+1;s>n;)++o>12&&(o=1,e++),n+=this.NEPALI_CALENDAR_DATA[e][o];return this.newDate(e,o,this.NEPALI_CALENDAR_DATA[e][o]-(n-s))},_createMissingCalendarData:function(T){var x=this.daysPerMonth.slice(0);x.unshift(17);for(var p=T-1;p<T+2;p++)void 0===this.NEPALI_CALENDAR_DATA[p]&&(this.NEPALI_CALENDAR_DATA[p]=x)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=l},94320:function($,I,t){var M=t(63489);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}function T(x,p){return x-p*Math.floor(x/p)}t(56131)(l.prototype=new M.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){var p=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear);return 682*((p.year()-(p.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(x,p,s){var e=this.newDate(x,p,s);return e.add(-(e.dayOfWeek()+1)%7,"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(x,p){var s=this._validate(x,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(x,p,s){return 5!==this.dayOfWeek(x,p,s)},toJD:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate);x=e.year(),p=e.month(),s=e.day();var o=x-(x>=0?474:473),r=474+T(o,2820);return s+(p<=7?31*(p-1):30*(p-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(o/2820)+this.jdEpoch-1},fromJD:function(x){var p=(x=Math.floor(x)+.5)-this.toJD(475,1,1),s=Math.floor(p/1029983),e=T(p,1029983),o=2820;if(1029982!==e){var r=Math.floor(e/366),n=T(e,366);o=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var a=o+2820*s+474,i=x-this.toJD(a=a<=0?a-1:a,1,1)+1,c=i<=186?Math.ceil(i/31):Math.ceil((i-6)/30),h=x-this.toJD(a,c,1)+1;return this.newDate(a,c,h)}}),M.calendars.persian=l,M.calendars.jalali=l},31320:function($,I,t){var M=t(63489),k=t(56131),l=M.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}k(T.prototype=new M.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(x){var p=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear);return x=this._t2gYear(p.year()),l.leapYear(x)},weekOfYear:function(x,p,s){var e=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear);return x=this._t2gYear(e.year()),l.weekOfYear(x,e.month(),e.day())},daysInMonth:function(x,p){var s=this._validate(x,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(x,p,s){return(this.dayOfWeek(x,p,s)||7)<6},toJD:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate);return x=this._t2gYear(e.year()),l.toJD(x,e.month(),e.day())},fromJD:function(x){var p=l.fromJD(x),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)},_g2tYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},51367:function($,I,t){var M=t(63489),k=t(56131),l=M.instance();function T(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}k(T.prototype=new M.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var p=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear);return x=this._t2gYear(p.year()),l.leapYear(x)},weekOfYear:function(x,p,s){var e=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear);return x=this._t2gYear(e.year()),l.weekOfYear(x,e.month(),e.day())},daysInMonth:function(x,p){var s=this._validate(x,p,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(x,p,s){return(this.dayOfWeek(x,p,s)||7)<6},toJD:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate);return x=this._t2gYear(e.year()),l.toJD(x,e.month(),e.day())},fromJD:function(x){var p=l.fromJD(x),s=this._g2tYear(p.year());return this.newDate(s,p.month(),p.day())},_t2gYear:function(x){return x-this.yearsOffset-(x>=1&&x<=this.yearsOffset?1:0)},_g2tYear:function(x){return x+this.yearsOffset+(x>=-this.yearsOffset&&x<=-1?1:0)}}),M.calendars.thai=T},21457:function($,I,t){var M=t(63489);function l(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}t(56131)(l.prototype=new M.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(x){var p=this._validate(x,this.minMonth,this.minDay,M.local.invalidYear);return 355===this.daysInYear(p.year())},weekOfYear:function(x,p,s){var e=this.newDate(x,p,s);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(x){for(var p=0,s=1;s<=12;s++)p+=this.daysInMonth(x,s);return p},daysInMonth:function(x,p){for(var s=this._validate(x,p,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,e=0,o=0;o<T.length;o++){if(T[o]>s)return T[e]-T[e-1];e++}return 30},weekDay:function(x,p,s){return 5!==this.dayOfWeek(x,p,s)},toJD:function(x,p,s){var e=this._validate(x,p,s,M.local.invalidDate),o=12*(e.year()-1)+e.month()-15292;return e.day()+T[o-1]-1+24e5-.5},fromJD:function(x){for(var p=x-24e5+.5,s=0,e=0;e<T.length&&!(T[e]>p);e++)s++;var o=s+15292,r=Math.floor((o-1)/12);return this.newDate(r+1,o-12*r,p-T[s-1]+1)},isValid:function(x,p,s){var e=M.baseCalendar.prototype.isValid.apply(this,arguments);return e&&(e=(x=null!=x.year?x.year:x)>=1276&&x<=1500),e},_validate:function(x,p,s,e){var o=M.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw e.replace(/\{0\}/,this.local.name);return o}}),M.calendars.ummalqura=l;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function($,I,t){var M=t(56131);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(e,o,r,n){if(this._calendar=e,this._year=o,this._month=r,this._day=n,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(e,o){return"000000".substring(0,o-(e=""+e).length)+e}function x(){this.shortYearCutoff="+10"}function p(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}M(k.prototype,{instance:function(e,o){e=(e||"gregorian").toLowerCase();var r=this._localCals[e+"-"+(o=o||"")];if(!r&&this.calendars[e]&&(r=new this.calendars[e](o),this._localCals[e+"-"+o]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,o,r,n,a){return(n=(null!=e&&e.year?e.calendar():"string"==typeof n?this.instance(n,a):n)||this.instance()).newDate(e,o,r)},substituteDigits:function(e){return function(o){return(o+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,o){return function(r){for(var n="",a=0;r>0;){var i=r%10;n=(0===i?"":e[i]+o[a])+n,a++,r=Math.floor(r/10)}return 0===n.indexOf(e[1]+o[1])&&(n=n.substr(1)),n||e[0]}}}),M(l.prototype,{newDate:function(e,o,r){return this._calendar.newDate(e??this,o,r)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,o,r){if(!this._calendar.isValid(e,o,r))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=o,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,o){return this._calendar.add(this,e,o)},set:function(e,o){return this._calendar.set(this,e,o)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var o=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===o?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(x.prototype,{_validateLevel:0,newDate:function(e,o,r){return null==e?this.today():(e.year&&(this._validate(e,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),r=e.day(),o=e.month(),e=e.year()),new l(this,e,o,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+T(Math.abs(o.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(e,o){var r=this._validate(e,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,o){var r=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(e,o,r){var n=this._validate(e,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,o,r){var n=this._validate(e,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,o,r){return this._validate(e,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(e,o,r){return this._validate(e,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,o,r),o,r)},_add:function(e,o,r){if(this._validateLevel++,"d"===r||"w"===r){var n=e.toJD()+o*("w"===r?this.daysInWeek():1),a=e.calendar().fromJD(n);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var i=e.year()+("y"===r?o:0),c=e.monthOfYear()+("m"===r?o:0);a=e.day(),"y"===r?(e.month()!==this.fromMonthOfYear(i,c)&&(c=this.newDate(i,e.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(i)),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c)))):"m"===r&&(function(f){for(;c<f.minMonth;)i--,c+=f.monthsInYear(i);for(var b=f.monthsInYear(i);c>b-1+f.minMonth;)i++,c-=b,b=f.monthsInYear(i)}(this),a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,c))));var h=[i,this.fromMonthOfYear(i,c),a];return this._validateLevel--,h}catch(f){throw this._validateLevel--,f}},_correctAdd:function(e,o,r,n){if(!(this.hasYearZero||"y"!==n&&"m"!==n||0!==o[0]&&e.year()>0==o[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n];o=this._add(e,r*a[0]+(r<0?-1:1)*a[1],a[2])}return e.date(o[0],o[1],o[2])},set:function(e,o,r){this._validate(e,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var n="y"===r?o:e.year(),a="m"===r?o:e.month(),i="d"===r?o:e.day();return"y"!==r&&"m"!==r||(i=Math.min(i,this.daysInMonth(n,a))),e.date(n,a,i)},isValid:function(e,o,r){this._validateLevel++;var n=this.hasYearZero||0!==e;if(n){var a=this.newDate(e,o,this.minDay);n=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(a)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(a)}return this._validateLevel--,n},toJSDate:function(e,o,r){var n=this._validate(e,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(s.instance().fromJSDate(e).toJD())},_validate:function(e,o,r,n){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,o,r))throw n.replace(/\{0\}/,this.local.name);var a=this.newDate(e,o,r);return this._validateLevel--,a}catch(i){throw this._validateLevel--,i}}}),M(p.prototype=new x,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(e=o.year()+(o.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,o,r){var n=this.newDate(e,o,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var r=this._validate(e,o,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,o,r){return(this.dayOfWeek(e,o,r)||7)<6},toJD:function(e,o,r){var n=this._validate(e,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate);e=n.year(),o=n.month(),r=n.day(),e<0&&e++,o<3&&(o+=12,e--);var a=Math.floor(e/100),i=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(o+1))+r+i-1524.5},fromJD:function(e){var o=Math.floor(e+.5),r=Math.floor((o-1867216.25)/36524.25),n=1524+(r=o+1+r-Math.floor(r/4)),a=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*a),c=Math.floor((n-i)/30.6001),h=n-i-Math.floor(30.6001*c),f=c-(c>13.5?13:1),b=a-(f>2.5?4716:4715);return b<=0&&b--,this.newDate(b,f,h)},toJSDate:function(e,o,r){var n=this._validate(e,o,r,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(n.year(),n.month()-1,n.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var s=$.exports=new k;s.cdate=l,s.baseCalendar=x,s.calendars.gregorian=p},94338:function($,I,t){var M=t(56131),k=t(63489);M(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],M(k.cdate.prototype,{formatDate:function(l,T){return"string"!=typeof l&&(T=l,l=""),this._calendar.formatDate(l||"",this,T)}}),M(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,T,x){if("string"!=typeof l&&(x=T,T=l,l=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var p,s,e,o=(x=x||{}).dayNamesShort||this.local.dayNamesShort,r=x.dayNames||this.local.dayNames,n=x.monthNumbers||this.local.monthNumbers,a=x.monthNamesShort||this.local.monthNamesShort,i=x.monthNames||this.local.monthNames,c=function(u,S){for(var _=1;w+_<l.length&&l.charAt(w+_)===u;)_++;return w+=_-1,Math.floor(_/(S||1))>1},h=function(u,S,_,E){var L=""+S;if(c(u,E))for(;L.length<_;)L="0"+L;return L},f=this,v=function(u,S){return S?"function"==typeof i?i.call(f,u):i[u.month()-f.minMonth]:"function"==typeof a?a.call(f,u):a[u.month()-f.minMonth]},g=this.local.digits,y=function(u){return x.localNumbers&&g?g(u):u},d="",m=!1,w=0;w<l.length;w++)if(m)"'"!==l.charAt(w)||c("'")?d+=l.charAt(w):m=!1;else switch(l.charAt(w)){case"d":d+=y(h("d",T.day(),2));break;case"D":d+=(p=T.dayOfWeek(),s=o,e=r,c("D")?e[p]:s[p]);break;case"o":d+=h("o",T.dayOfYear(),3);break;case"w":d+=h("w",T.weekOfYear(),2);break;case"m":d+=(u=T,"function"==typeof n?n.call(f,u,c("m")):y(h("m",u.month(),2)));break;case"M":d+=v(T,c("M"));break;case"y":d+=c("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":c("Y",2),d+=T.formatYear();break;case"J":d+=T.toJD();break;case"@":d+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":d+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":c("'")?d+="'":m=!0;break;default:d+=l.charAt(w)}var u;return d},parseDate:function(l,T,x){if(null==T)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if(""===(T="object"==typeof T?T.toString():T+""))return null;l=l||this.local.dateFormat;var p=(x=x||{}).shortYearCutoff||this.shortYearCutoff;p="string"!=typeof p?p:this.today().year()%100+parseInt(p,10);for(var s=x.dayNamesShort||this.local.dayNamesShort,e=x.dayNames||this.local.dayNames,o=x.parseMonth||this.local.parseMonth,r=x.monthNumbers||this.local.monthNumbers,n=x.monthNamesShort||this.local.monthNamesShort,a=x.monthNames||this.local.monthNames,i=-1,c=-1,h=-1,f=-1,b=-1,v=!1,g=!1,y=function(z,j){for(var R=1;L+R<l.length&&l.charAt(L+R)===z;)R++;return L+=R-1,Math.floor(R/(j||1))>1},d=function(z,j){var R=y(z,j),V=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],D=new RegExp("^-?\\d{1,"+V+"}"),B=T.substring(E).match(D);if(!B)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=B[0].length,parseInt(B[0],10)},m=this,w=function(){if("function"==typeof r){y("m");var z=r.call(m,T.substring(E));return E+=z.length,z}return d("m")},u=function(z,j,R,V){for(var D=y(z,V)?R:j,B=0;B<D.length;B++)if(T.substr(E,D[B].length).toLowerCase()===D[B].toLowerCase())return E+=D[B].length,B+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if("function"==typeof a){var z=y("M")?a.call(m,T.substring(E)):n.call(m,T.substring(E));return E+=z.length,z}return u("M",n,a)},_=function(){if(T.charAt(E)!==l.charAt(L))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<l.length;L++)if(g)"'"!==l.charAt(L)||y("'")?_():g=!1;else switch(l.charAt(L)){case"d":f=d("d");break;case"D":u("D",s,e);break;case"o":b=d("o");break;case"w":d("w");break;case"m":h=w();break;case"M":h=S();break;case"y":var C=L;v=!y("y",2),L=C,c=d("y",2);break;case"Y":c=d("Y",2);break;case"J":i=d("J")+.5,"."===T.charAt(E)&&(E++,d("J"));break;case"@":i=d("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":i=d("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":y("'")?_():g=!0;break;default:_()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(-1===c?c=this.today().year():c<100&&v&&(c+=-1===p?1900:this.today().year()-this.today().year()%100-(c<=p?0:100)),"string"==typeof h&&(h=o.call(this,c,h)),b>-1){f=b;for(var P=this.daysInMonth(c,h=1);f>P;P=this.daysInMonth(c,h))h++,f-=P}return i>-1?this.fromJD(i):this.newDate(c,h,f)},determineDate:function(l,T,x,p,s){x&&"object"!=typeof x&&(s=p,p=x,x=null),"string"!=typeof p&&(s=p,p="");var e=this;return T=T?T.newDate():null,null==l?T:"string"==typeof l?function(o){try{return e.parseDate(p,o,s)}catch{}for(var r=((o=o.toLowerCase()).match(/^c/)&&x?x.newDate():null)||e.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=n.exec(o);a;)r.add(parseInt(a[1],10),a[2]||"d"),a=n.exec(o);return r}(l):"number"==typeof l?isNaN(l)||l===1/0||l===-1/0?T:e.today().add(l,"d"):e.newDate(l)}})},69862:function(){},40964:function(){},72077:function($,I,t){"use strict";var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?t.g:globalThis;$.exports=function(){for(var l=[],T=0;T<M.length;T++)"function"==typeof k[M[T]]&&(l[l.length]=M[T]);return l}},81684:function($,I,t){"use strict";function M(le,ue,Ee){le.prototype=ue.prototype=Ee,Ee.constructor=le}function k(le,ue){var Ee=Object.create(le.prototype);for(var de in ue)Ee[de]=ue[de];return Ee}function l(){}t.d(I,{sX:function(){return me},k4:function(){return X}});var T=.7,x=1/T,p="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(p,",").concat(p,",").concat(p,"\\)$")),n=new RegExp("^rgb\\(".concat(e,",").concat(e,",").concat(e,"\\)$")),a=new RegExp("^rgba\\(".concat(p,",").concat(p,",").concat(p,",").concat(s,"\\)$")),i=new RegExp("^rgba\\(".concat(e,",").concat(e,",").concat(e,",").concat(s,"\\)$")),c=new RegExp("^hsl\\(".concat(s,",").concat(e,",").concat(e,"\\)$")),h=new RegExp("^hsla\\(".concat(s,",").concat(e,",").concat(e,",").concat(s,"\\)$")),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function g(le){var ue,Ee;return le=(le+"").trim().toLowerCase(),(ue=o.exec(le))?(Ee=ue[1].length,ue=parseInt(ue[1],16),6===Ee?y(ue):3===Ee?new u(ue>>8&15|ue>>4&240,ue>>4&15|240&ue,(15&ue)<<4|15&ue,1):8===Ee?d(ue>>24&255,ue>>16&255,ue>>8&255,(255&ue)/255):4===Ee?d(ue>>12&15|ue>>8&240,ue>>8&15|ue>>4&240,ue>>4&15|240&ue,((15&ue)<<4|15&ue)/255):null):(ue=r.exec(le))?new u(ue[1],ue[2],ue[3],1):(ue=n.exec(le))?new u(255*ue[1]/100,255*ue[2]/100,255*ue[3]/100,1):(ue=a.exec(le))?d(ue[1],ue[2],ue[3],ue[4]):(ue=i.exec(le))?d(255*ue[1]/100,255*ue[2]/100,255*ue[3]/100,ue[4]):(ue=c.exec(le))?P(ue[1],ue[2]/100,ue[3]/100,1):(ue=h.exec(le))?P(ue[1],ue[2]/100,ue[3]/100,ue[4]):f.hasOwnProperty(le)?y(f[le]):"transparent"===le?new u(NaN,NaN,NaN,0):null}function y(le){return new u(le>>16&255,le>>8&255,255&le,1)}function d(le,ue,Ee,de){return de<=0&&(le=ue=Ee=NaN),new u(le,ue,Ee,de)}function m(le){return le instanceof l||(le=g(le)),le?new u((le=le.rgb()).r,le.g,le.b,le.opacity):new u}function w(le,ue,Ee,de){return 1===arguments.length?m(le):new u(le,ue,Ee,de??1)}function u(le,ue,Ee,de){this.r=+le,this.g=+ue,this.b=+Ee,this.opacity=+de}function S(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function _(){var le=E(this.opacity);return"".concat(1===le?"rgb(":"rgba(").concat(L(this.r),", ").concat(L(this.g),", ").concat(L(this.b)).concat(1===le?")":", ".concat(le,")"))}function E(le){return isNaN(le)?1:Math.max(0,Math.min(1,le))}function L(le){return Math.max(0,Math.min(255,Math.round(le)||0))}function C(le){return((le=L(le))<16?"0":"")+le.toString(16)}function P(le,ue,Ee,de){return de<=0?le=ue=Ee=NaN:Ee<=0||Ee>=1?le=ue=NaN:ue<=0&&(le=NaN),new j(le,ue,Ee,de)}function z(le){if(le instanceof j)return new j(le.h,le.s,le.l,le.opacity);if(le instanceof l||(le=g(le)),!le)return new j;if(le instanceof j)return le;var ue=(le=le.rgb()).r/255,Ee=le.g/255,de=le.b/255,xe=Math.min(ue,Ee,de),Te=Math.max(ue,Ee,de),we=NaN,K=Te-xe,oe=(Te+xe)/2;return K?(we=ue===Te?(Ee-de)/K+6*(Ee<de):Ee===Te?(de-ue)/K+2:(ue-Ee)/K+4,K/=oe<.5?Te+xe:2-Te-xe,we*=60):K=oe>0&&oe<1?0:we,new j(we,K,oe,le.opacity)}function j(le,ue,Ee,de){this.h=+le,this.s=+ue,this.l=+Ee,this.opacity=+de}function R(le){return(le=(le||0)%360)<0?le+360:le}function V(le){return Math.max(0,Math.min(1,le||0))}function D(le,ue,Ee){return 255*(le<60?ue+(Ee-ue)*le/60:le<180?Ee:le<240?ue+(Ee-ue)*(240-le)/60:ue)}function B(le,ue,Ee,de,xe){var Te=le*le,we=Te*le;return((1-3*le+3*Te-we)*ue+(4-6*Te+3*we)*Ee+(1+3*le+3*Te-3*we)*de+we*xe)/6}M(l,g,{copy:function(le){return Object.assign(new this.constructor,this,le)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return z(this).formatHsl()},formatRgb:v,toString:v}),M(u,w,k(l,{brighter:function(le){return le=null==le?x:Math.pow(x,le),new u(this.r*le,this.g*le,this.b*le,this.opacity)},darker:function(le){return le=null==le?T:Math.pow(T,le),new u(this.r*le,this.g*le,this.b*le,this.opacity)},rgb:function(){return this},clamp:function(){return new u(L(this.r),L(this.g),L(this.b),E(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:_,toString:_})),M(j,function(le,ue,Ee,de){return 1===arguments.length?z(le):new j(le,ue,Ee,de??1)},k(l,{brighter:function(le){return le=null==le?x:Math.pow(x,le),new j(this.h,this.s,this.l*le,this.opacity)},darker:function(le){return le=null==le?T:Math.pow(T,le),new j(this.h,this.s,this.l*le,this.opacity)},rgb:function(){var le=this.h%360+360*(this.h<0),ue=isNaN(le)||isNaN(this.s)?0:this.s,Ee=this.l,de=Ee+(Ee<.5?Ee:1-Ee)*ue,xe=2*Ee-de;return new u(D(le>=240?le-240:le+120,xe,de),D(le,xe,de),D(le<120?le+240:le-120,xe,de),this.opacity)},clamp:function(){return new j(R(this.h),V(this.s),V(this.l),E(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var le=E(this.opacity);return"".concat(1===le?"hsl(":"hsla(").concat(R(this.h),", ").concat(100*V(this.s),"%, ").concat(100*V(this.l),"%").concat(1===le?")":", ".concat(le,")"))}}));var N=function(le){return function(){return le}};function U(le,ue){var de,xe,Ee=ue-le;return Ee?(de=le,xe=Ee,function(Te){return de+Te*xe}):N(isNaN(le)?ue:le)}var J=function le(ue){var xe,Ee=1==(xe=+(xe=ue))?U:function(Te,we){return we-Te?(K=Te,oe=we,he=xe,K=Math.pow(K,he),oe=Math.pow(oe,he)-K,he=1/he,function(ye){return Math.pow(K+ye*oe,he)}):N(isNaN(Te)?we:Te);var K,oe,he};function de(xe,Te){var we=Ee((xe=w(xe)).r,(Te=w(Te)).r),K=Ee(xe.g,Te.g),oe=Ee(xe.b,Te.b),he=U(xe.opacity,Te.opacity);return function(ye){return xe.r=we(ye),xe.g=K(ye),xe.b=oe(ye),xe.opacity=he(ye),xe+""}}return de.gamma=le,de}(1);function Y(le){return function(ue){var Ee,de,xe=ue.length,Te=new Array(xe),we=new Array(xe),K=new Array(xe);for(Ee=0;Ee<xe;++Ee)de=w(ue[Ee]),Te[Ee]=de.r||0,we[Ee]=de.g||0,K[Ee]=de.b||0;return Te=le(Te),we=le(we),K=le(K),de.opacity=1,function(oe){return de.r=Te(oe),de.g=we(oe),de.b=K(oe),de+""}}}function q(le,ue){var Ee,de=ue?ue.length:0,xe=le?Math.min(de,le.length):0,Te=new Array(xe),we=new Array(de);for(Ee=0;Ee<xe;++Ee)Te[Ee]=me(le[Ee],ue[Ee]);for(;Ee<de;++Ee)we[Ee]=ue[Ee];return function(K){for(Ee=0;Ee<xe;++Ee)we[Ee]=Te[Ee](K);return we}}function H(le,ue){var Ee=new Date;return le=+le,ue=+ue,function(de){return Ee.setTime(le*(1-de)+ue*de),Ee}}function X(le,ue){return le=+le,ue=+ue,function(Ee){return le*(1-Ee)+ue*Ee}}function Q(le){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ue){return typeof ue}:function(ue){return ue&&"function"==typeof Symbol&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue})(le)}function ne(le,ue){var Ee,de={},xe={};for(Ee in null!==le&&"object"===Q(le)||(le={}),null!==ue&&"object"===Q(ue)||(ue={}),ue)Ee in le?de[Ee]=me(le[Ee],ue[Ee]):xe[Ee]=ue[Ee];return function(Te){for(Ee in de)xe[Ee]=de[Ee](Te);return xe}}Y(function(le){var ue=le.length-1;return function(Ee){var de=Ee<=0?Ee=0:Ee>=1?(Ee=1,ue-1):Math.floor(Ee*ue),xe=le[de],Te=le[de+1];return B((Ee-de/ue)*ue,de>0?le[de-1]:2*xe-Te,xe,Te,de<ue-1?le[de+2]:2*Te-xe)}}),Y(function(le){var ue=le.length;return function(Ee){var de=Math.floor(((Ee%=1)<0?++Ee:Ee)*ue);return B((Ee-de/ue)*ue,le[(de+ue-1)%ue],le[de%ue],le[(de+1)%ue],le[(de+2)%ue])}});var re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ae=new RegExp(re.source,"g");function se(le,ue){var Ee,de,xe,he,Te=re.lastIndex=ae.lastIndex=0,we=-1,K=[],oe=[];for(le+="",ue+="";(Ee=re.exec(le))&&(de=ae.exec(ue));)(xe=de.index)>Te&&(xe=ue.slice(Te,xe),K[we]?K[we]+=xe:K[++we]=xe),(Ee=Ee[0])===(de=de[0])?K[we]?K[we]+=de:K[++we]=de:(K[++we]=null,oe.push({i:we,x:X(Ee,de)})),Te=ae.lastIndex;return Te<ue.length&&(xe=ue.slice(Te),K[we]?K[we]+=xe:K[++we]=xe),K.length<2?oe[0]?(he=oe[0].x,function(ye){return he(ye)+""}):function(he){return function(){return he}}(ue):(ue=oe.length,function(he){for(var ye,Me=0;Me<ue;++Me)K[(ye=oe[Me]).i]=ye.x(he);return K.join("")})}function pe(le,ue){ue||(ue=[]);var Ee,de=le?Math.min(ue.length,le.length):0,xe=ue.slice();return function(Te){for(Ee=0;Ee<de;++Ee)xe[Ee]=le[Ee]*(1-Te)+ue[Ee]*Te;return xe}}function ke(le){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ue){return typeof ue}:function(ue){return ue&&"function"==typeof Symbol&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue})(le)}function me(le,ue){var Ee,de,xe=ke(ue);return null==ue||"boolean"===xe?N(ue):("number"===xe?X:"string"===xe?(Ee=g(ue))?(ue=Ee,J):se:ue instanceof g?J:ue instanceof Date?H:(de=ue,!ArrayBuffer.isView(de)||de instanceof DataView?Array.isArray(ue)?q:"function"!=typeof ue.valueOf&&"function"!=typeof ue.toString||isNaN(ue)?ne:X:pe))(le,ue)}},40402:function($){"use strict";$.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function($){"use strict";$.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function($){"use strict";$.exports=JSON.parse('["normal","italic","oblique"]')},15659:function($){"use strict";$.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function($){"use strict";$.exports=JSON.parse('["inherit","initial","unset"]')},41901:function($){"use strict";$.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Us={};function Xr($){var I=Us[$];if(void 0!==I)return I.exports;var t=Us[$]={exports:{}};return _u[$].call(t.exports,t,t.exports,Xr),t.exports}return Xr.n=function($){var I=$&&$.__esModule?function(){return $.default}:function(){return $};return Xr.d(I,{a:I}),I},Xr.d=function($,I){for(var t in I)Xr.o(I,t)&&!Xr.o($,t)&&Object.defineProperty($,t,{enumerable:!0,get:I[t]})},Xr.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),Xr.o=function($,I){return Object.prototype.hasOwnProperty.call($,I)},Xr.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},Xr(27909)}()}}]);