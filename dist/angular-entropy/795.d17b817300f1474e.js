(self.webpackChunkangular_entropy=self.webpackChunkangular_entropy||[]).push([[795],{91718:(y,_,o)=>{"use strict";o.d(_,{$:()=>m});var s=o(41571);class m{transform(g){const c=new Date(1e3*g);return c.toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"})+" - "+String(c.getHours()).padStart(2,"0")+":"+String(c.getMinutes()).padStart(2,"0")}}m.\u0275fac=function(g){return new(g||m)},m.\u0275pipe=s.Yjl({name:"dateLabel",type:m,pure:!0})},41795:(y,_,o)=>{"use strict";o.r(_),o.d(_,{ClassroomModule:()=>bt});var s=o(36895),m=o(83135),p=o(59181),g=o(57315),c=o(54415),f=o(87618),i=o(41571),a=o(40301);class l{constructor(st,et,gt,Tt){this._route=st,this._classroomService=et,this._alertService=gt,this._router=Tt}ngOnInit(){this.invite_token=this._route.snapshot.paramMap.get("invite_token"),this.invite_token&&this._classroomService.joinStudentClassroom(this.invite_token).subscribe(st=>{st.hasOwnProperty("error")||this._alertService.success("Class successfully joined"),this._router.navigate(["/"])})}}l.\u0275fac=function(st){return new(st||l)(i.Y36(c.gz),i.Y36(g.u),i.Y36(a.c),i.Y36(c.F0))},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-classroom-invite-link"]],decls:0,vars:0,template:function(st,et){},encapsulation:2});var d,ot,t=o(54696),u=o(90433);(ot=d||(d={}))[ot.CREATE=0]="CREATE",ot[ot.UPDATE=1]="UPDATE",ot[ot.DELETE=2]="DELETE";var x=o(84937);function w(ot,st){1&ot&&(i.TgZ(0,"div",23),i._UZ(1,"div",24),i.TgZ(2,"div",25),i._UZ(3,"div",26),i.qZA()())}function C(ot,st){if(1&ot&&(i.TgZ(0,"button",27),i._uU(1,"Create"),i.qZA()),2&ot){const et=i.oxw();i.Q6J("disabled",!et.classroomHomeworkCreateForm.valid)}}const T=ot=>parseInt(ot.get("node_min").value)>parseInt(ot.get("node_max").value)?{inRange:!1}:null;class M{constructor(st,et,gt){this._classroomHomeworkService=st,this._alertService=et,this._route=gt,this.classroomHomeworkCreateForm=new u.cw({title:new u.NI(null,u.kI.required),body:new u.NI(null,u.kI.required),node_min:new u.NI(null,[u.kI.required,u.kI.min(1)]),node_max:new u.NI(null,[u.kI.required,u.kI.max(30)]),start_date:new u.NI(null,u.kI.required),expire_date:new u.NI(null,u.kI.required)},T),this.loading=!1}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id")}onSubmit(){const st=new Date(this.classroomHomeworkCreateForm.value.start_date).getTime()/1e3,et=new Date(this.classroomHomeworkCreateForm.value.expire_date).getTime()/1e3;if(st>et)return this._alertService.error("Enter an expiration date greater than the start date");let gt={classroom_id:this.classroom_id,title:this.classroomHomeworkCreateForm.value.title,body:this.classroomHomeworkCreateForm.value.body,node_min:this.classroomHomeworkCreateForm.value.node_min,node_max:this.classroomHomeworkCreateForm.value.node_max,start_datetime:st,expire_datetime:et};this.loading=!0,this._classroomHomeworkService.createClassroomHomework(gt).subscribe(Tt=>{Tt.hasOwnProperty("error")||(this._alertService.success("Homework successfully created"),this._classroomHomeworkService.updatedClassroomHomeworks$.emit(d.CREATE),this.classroomHomeworkCreateForm.reset()),this.loading=!1})}}M.\u0275fac=function(st){return new(st||M)(i.Y36(x.c),i.Y36(a.c),i.Y36(c.gz))},M.\u0275cmp=i.Xpm({type:M,selectors:[["app-classroom-homework-create"]],decls:35,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-file-pen"],[1,"mb-3",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","name","homework_title","placeholder","Enter the homework title","formControlName","title",1,"form-control"],["for","body",1,"form-label"],["rows","3","id","body","name","homework_body","placeholder","Enter the homework text","formControlName","body",1,"form-control"],[1,"row","mb-3"],[1,"col-6"],["for","node_min",1,"form-label"],["type","text","id","node_min","name","homework_node_min","placeholder","Enter a number above 1","formControlName","node_min",1,"form-control"],["for","node_max",1,"form-label"],["type","text","id","node_max","name","homework_node_max","placeholder","Enter a number equal or below 30","formControlName","node_max",1,"form-control"],["for","start_date",1,"form-label"],["type","datetime-local","id","start_date","name","homework_start_date","formControlName","start_date",1,"form-control"],["for","expire_date",1,"form-label"],["type","datetime-local","id","expire_date","name","homework_expire_date","formControlName","expire_date",1,"form-control"],[1,"text-center"],["class","row mt-3",4,"ngIf"],["class","btn btn-primary d-grid w-100 mb-3","type","submit",3,"disabled",4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["type","submit",1,"btn","btn-primary","d-grid","w-100","mb-3",3,"disabled"]],template:function(st,et){1&st&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),i._UZ(3,"i",3),i._uU(4," Create Homework"),i.qZA(),i.TgZ(5,"form",4),i.NdJ("ngSubmit",function(){return et.onSubmit()}),i.TgZ(6,"div",5)(7,"label",6),i._uU(8,"Title:"),i.qZA(),i._UZ(9,"input",7),i.qZA(),i.TgZ(10,"div",5)(11,"label",8),i._uU(12,"Body:"),i.qZA(),i._UZ(13,"textarea",9),i.qZA(),i.TgZ(14,"div",10)(15,"div",11)(16,"label",12),i._uU(17,"Concept Map Minimum Nodes Count:"),i.qZA(),i._UZ(18,"input",13),i.qZA(),i.TgZ(19,"div",11)(20,"label",14),i._uU(21,"Concept Map Maximum Nodes Count:"),i.qZA(),i._UZ(22,"input",15),i.qZA()(),i.TgZ(23,"div",10)(24,"div",11)(25,"label",16),i._uU(26,"Start date:"),i.qZA(),i._UZ(27,"input",17),i.qZA(),i.TgZ(28,"div",11)(29,"label",18),i._uU(30,"Expire date:"),i.qZA(),i._UZ(31,"input",19),i.qZA()(),i.TgZ(32,"div",20),i.YNc(33,w,4,0,"div",21),i.YNc(34,C,2,1,"button",22),i.qZA()()()()),2&st&&(i.xp6(5),i.Q6J("formGroup",et.classroomHomeworkCreateForm),i.xp6(28),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading))},dependencies:[s.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u],encapsulation:2});var I=o(60427),k=o(91718);function P(ot,st){1&ot&&(i.TgZ(0,"div",6),i._UZ(1,"div",7),i.TgZ(2,"div",8),i._UZ(3,"div",9),i.qZA()())}function H(ot,st){1&ot&&(i.TgZ(0,"div")(1,"p",11),i._uU(2,"There are no homeworks."),i.qZA()())}function V(ot,st){1&ot&&(i.TgZ(0,"th"),i._uU(1,"Students Completion"),i.qZA())}function B(ot,st){if(1&ot&&(i.TgZ(0,"td"),i._uU(1),i.qZA()),2&ot){const et=i.oxw().$implicit,gt=i.oxw(3);i.xp6(1),i.AsE("",null==et.maps?null:et.maps.length," / ",gt.classroom.size,"")}}const Y=function(ot){return[ot]};function S(ot,st){if(1&ot&&(i.TgZ(0,"tr",11)(1,"td"),i._uU(2),i.qZA(),i.YNc(3,B,2,2,"td",5),i.TgZ(4,"td"),i._uU(5),i.ALo(6,"dateLabel"),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.ALo(9,"dateLabel"),i.qZA(),i.TgZ(10,"td"),i._UZ(11,"i",14),i.qZA()()),2&ot){const et=st.$implicit,gt=i.oxw(3);i.xp6(2),i.Oqu(et.title),i.xp6(1),i.Q6J("ngIf",gt.classroom),i.xp6(2),i.Oqu(i.lcZ(6,5,et.start_datetime)),i.xp6(3),i.Oqu(i.lcZ(9,7,et.expire_datetime)),i.xp6(3),i.Q6J("routerLink",i.VKq(9,Y,"homeworks/"+et._id.$oid))}}function O(ot,st){if(1&ot&&(i.TgZ(0,"table",12)(1,"thead")(2,"tr",11)(3,"th"),i._uU(4,"Title"),i.qZA(),i.YNc(5,V,2,0,"th",5),i.TgZ(6,"th"),i._uU(7,"Start Datetime"),i.qZA(),i.TgZ(8,"th"),i._uU(9,"Expire Datetime"),i.qZA(),i._UZ(10,"th"),i.qZA()(),i.TgZ(11,"tbody"),i.YNc(12,S,12,11,"tr",13),i.qZA()()),2&ot){const et=i.oxw(2);i.xp6(5),i.Q6J("ngIf",et.classroom),i.xp6(7),i.Q6J("ngForOf",et.homeworks)}}function L(ot,st){if(1&ot&&(i.TgZ(0,"div"),i.YNc(1,H,3,0,"div",5),i.YNc(2,O,13,2,"table",10),i.qZA()),2&ot){const et=i.oxw();i.xp6(1),i.Q6J("ngIf",et.homeworks&&0==et.homeworks.length),i.xp6(1),i.Q6J("ngIf",et.homeworks&&et.homeworks.length>0)}}class F{constructor(st,et,gt){this._classroomHomeworkService=st,this._router=et,this._userService=gt,this.loading=!1,this.homeworks=[];let Tt=JSON.parse(localStorage.getItem("currentUserData"));Tt||this._router.navigate(["/users/auth"]),this.user=Tt,this._classroomHomeworkService.updatedClassroomHomeworks$.subscribe(wt=>{wt==d.CREATE&&this.getClassroomHomeworks()})}ngOnInit(){this.getClassroomHomeworks()}getClassroomHomeworks(){this.loading=!0,this.classroom?this._classroomHomeworkService.getClassroomHomeworks(this.classroom._id?.$oid).subscribe(st=>{st.hasOwnProperty("error")||(this.homeworks=st,this.homeworks&&this.homeworks.sort((et,gt)=>0==this.user.role?et.expire_datetime-gt.expire_datetime:gt.expire_datetime-et.expire_datetime)),this.loading=!1}):this._userService.getCurrentUserHomeworks().subscribe(st=>{st.hasOwnProperty("error")||(this.homeworks=st,this.homeworks&&this.homeworks.sort((et,gt)=>0==this.user.role?et.expire_datetime-gt.expire_datetime:gt.expire_datetime-et.expire_datetime)),this.loading=!1})}}function D(ot,st){if(1&ot&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&ot){const et=i.oxw(2);i.xp6(1),i.AsE("(",et.students.length," / ",et.classroom.size,")")}}function z(ot,st){1&ot&&(i.TgZ(0,"div",7),i._UZ(1,"div",8),i.TgZ(2,"div",9),i._UZ(3,"div",10),i.qZA()())}function K(ot,st){1&ot&&(i.TgZ(0,"div")(1,"p",12),i._uU(2,"There are no students in this class."),i.qZA()())}function U(ot,st){if(1&ot&&(i.TgZ(0,"tr",12)(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA(),i._UZ(5,"td"),i.qZA()),2&ot){const et=st.$implicit;i.xp6(2),i.AsE("",et.lastname," ",et.firstname," "),i.xp6(2),i.Oqu(et.email)}}function G(ot,st){if(1&ot&&(i.TgZ(0,"table",13)(1,"thead")(2,"tr",12)(3,"th"),i._uU(4,"Name"),i.qZA(),i.TgZ(5,"th"),i._uU(6,"E-Mail"),i.qZA(),i._UZ(7,"th"),i.qZA()(),i.TgZ(8,"tbody"),i.YNc(9,U,6,3,"tr",14),i.qZA()()),2&ot){const et=i.oxw(3);i.xp6(9),i.Q6J("ngForOf",et.students)}}function X(ot,st){if(1&ot&&(i.TgZ(0,"div"),i.YNc(1,K,3,0,"div",5),i.YNc(2,G,10,1,"table",11),i.qZA()),2&ot){const et=i.oxw(2);i.xp6(1),i.Q6J("ngIf",et.students&&0==et.students.length),i.xp6(1),i.Q6J("ngIf",et.students&&et.students.length>0)}}function W(ot,st){if(1&ot&&(i.TgZ(0,"div",1)(1,"div",2)(2,"h4",3),i._UZ(3,"i",4),i._uU(4," Students List "),i.YNc(5,D,2,2,"span",5),i.qZA(),i.YNc(6,z,4,0,"div",6),i.YNc(7,X,3,2,"div",5),i.qZA()()),2&ot){const et=i.oxw();i.xp6(5),i.Q6J("ngIf",et.students),i.xp6(1),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading)}}F.\u0275fac=function(st){return new(st||F)(i.Y36(x.c),i.Y36(c.F0),i.Y36(I.K))},F.\u0275cmp=i.Xpm({type:F,selectors:[["app-classroom-homework-list"]],inputs:{classroom:"classroom"},decls:7,vars:2,consts:[[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-graduation-cap"],["class","row mt-3",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["class","table table-hover",4,"ngIf"],[1,"text-center"],[1,"table","table-hover"],["class","text-center",4,"ngFor","ngForOf"],["title","Enter homework",1,"pe-clickable","fa-solid","fa-right-to-bracket",2,"color","darkgreen",3,"routerLink"]],template:function(st,et){1&st&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),i._UZ(3,"i",3),i._uU(4," Homeworks List"),i.qZA(),i.YNc(5,P,4,0,"div",4),i.YNc(6,L,3,2,"div",5),i.qZA()()),2&st&&(i.xp6(5),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading))},dependencies:[s.sg,s.O5,c.rH,k.$],encapsulation:2});class it{constructor(st,et){this._classroomService=st,this._router=et,this.loading=!1,this.students=[];let gt=JSON.parse(localStorage.getItem("currentUserData"));gt||this._router.navigate(["/users/auth"]),this.user=gt}ngOnInit(){this.getClassroomStudents()}getClassroomStudents(){this.loading=!0,this._classroomService.getClassroomStudents(this.classroom._id?.$oid).subscribe(st=>{st.hasOwnProperty("error")||(this.students=st,this.students&&this.students.sort((et,gt)=>et.lastname.localeCompare(gt.lastname)||et.firstname.localeCompare(gt.firstname))),this.loading=!1})}}function q(ot,st){1&ot&&(i.TgZ(0,"div",2),i._UZ(1,"div",3),i.TgZ(2,"div",4),i._UZ(3,"div",5),i.qZA()())}function ut(ot,st){if(1&ot&&(i.TgZ(0,"div",17),i._UZ(1,"app-classroom-homework-list",18),i.qZA()),2&ot){const et=i.oxw(3);i.xp6(1),i.Q6J("classroom",et.classroom)}}function ct(ot,st){if(1&ot&&(i.TgZ(0,"div",12)(1,"div",13),i._UZ(2,"app-classroom-homework-create"),i.qZA(),i.TgZ(3,"div",13)(4,"div",14),i.YNc(5,ut,2,1,"div",15),i.qZA(),i.TgZ(6,"div",16)(7,"div",17),i._UZ(8,"app-classroom-student-list",18),i.qZA()()()()),2&ot){const et=i.oxw(2);i.xp6(5),i.Q6J("ngIf",et.classroom),i.xp6(3),i.Q6J("classroom",et.classroom)}}function yt(ot,st){if(1&ot&&(i.TgZ(0,"div",13),i._UZ(1,"app-classroom-homework-list",18),i.qZA()),2&ot){const et=i.oxw(3);i.xp6(1),i.Q6J("classroom",et.classroom)}}function $(ot,st){if(1&ot&&(i.TgZ(0,"div",13),i._UZ(1,"app-classroom-student-list",18),i.qZA()),2&ot){const et=i.oxw(3);i.xp6(1),i.Q6J("classroom",et.classroom)}}function Q(ot,st){if(1&ot&&(i.TgZ(0,"div",12),i.YNc(1,yt,2,1,"div",19),i.YNc(2,$,2,1,"div",19),i.qZA()),2&ot){const et=i.oxw(2);i.xp6(1),i.Q6J("ngIf",et.classroom),i.xp6(1),i.Q6J("ngIf",et.classroom)}}function nt(ot,st){if(1&ot&&(i.TgZ(0,"div",6)(1,"div",7),i._UZ(2,"div",8),i.TgZ(3,"div",9)(4,"div",10)(5,"strong"),i._uU(6,"Class:"),i.qZA(),i._uU(7),i._UZ(8,"br"),i.TgZ(9,"strong"),i._uU(10,"Teacher:"),i.qZA(),i._uU(11),i.qZA()()(),i.YNc(12,ct,9,2,"div",11),i.YNc(13,Q,3,2,"div",11),i.qZA()),2&ot){const et=i.oxw();i.xp6(7),i.hij(" ",et.classroom.name," "),i.xp6(4),i.lnq(" ",null==et.classroom.teacher?null:et.classroom.teacher.firstname," ",null==et.classroom.teacher?null:et.classroom.teacher.lastname," (",null==et.classroom.teacher?null:et.classroom.teacher.email,") "),i.xp6(1),i.Q6J("ngIf",1==et.user.role),i.xp6(1),i.Q6J("ngIf",0==et.user.role)}}it.\u0275fac=function(st){return new(st||it)(i.Y36(g.u),i.Y36(c.F0))},it.\u0275cmp=i.Xpm({type:it,selectors:[["app-classroom-student-list"]],inputs:{classroom:"classroom"},decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-graduation-cap"],[4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["class","table table-hover",4,"ngIf"],[1,"text-center"],[1,"table","table-hover"],["class","text-center",4,"ngFor","ngForOf"]],template:function(st,et){1&st&&i.YNc(0,W,8,3,"div",0),2&st&&i.Q6J("ngIf",et.classroom)},dependencies:[s.sg,s.O5],encapsulation:2});class ht{constructor(st,et,gt){this._route=st,this._classroomService=et,this._router=gt,this.loading=!1;let Tt=JSON.parse(localStorage.getItem("currentUserData"));Tt||this._router.navigate(["/users/auth"]),this.user=Tt}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id"),this.getClassroom()}getClassroom(){this.loading=!0,this._classroomService.getClassroom(this.classroom_id).subscribe(st=>{st.hasOwnProperty("error")?this._router.navigate(["/"]):this.classroom=st,this.loading=!1})}}ht.\u0275fac=function(st){return new(st||ht)(i.Y36(c.gz),i.Y36(g.u),i.Y36(c.F0))},ht.\u0275cmp=i.Xpm({type:ht,selectors:[["app-classroom-view"]],decls:3,vars:2,consts:[["class","row mt-5 g-0",4,"ngIf"],["class","mt-4 container-fluid",4,"ngIf"],[1,"row","mt-5","g-0"],[1,"col-5"],[1,"col-2","ms-5","mt-5"],[1,"ms-3","custom-big-loader","mt-5"],[1,"mt-4","container-fluid"],[1,"row","px-2","mb-1"],[1,"col-3"],[1,"col-6","text-center"],["role","alert",1,"alert","alert-primary"],["class","row px-2",4,"ngIf"],[1,"row","px-2"],[1,"col-6"],[1,"row","mb-4"],["class","col-12",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"classroom"],["class","col-6",4,"ngIf"]],template:function(st,et){1&st&&(i._UZ(0,"app-navbar"),i.YNc(1,q,4,0,"div",0),i.YNc(2,nt,14,6,"div",1)),2&st&&(i.xp6(1),i.Q6J("ngIf",et.loading),i.xp6(1),i.Q6J("ngIf",!et.loading&&et.classroom))},dependencies:[s.O5,t.S,M,F,it],encapsulation:2});const mt=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:"invite/:invite_token",component:l,canActivate:[f.a]},{path:":classroom_id",canActivate:[f.a],children:[{path:"",pathMatch:"full",component:ht},{path:"homeworks",loadChildren:()=>Promise.resolve().then(o.bind(o,86430)).then(ot=>ot.ClassroomHomeworkModule)}]}];class dt{}dt.\u0275fac=function(st){return new(st||dt)},dt.\u0275mod=i.oAB({type:dt}),dt.\u0275inj=i.cJS({imports:[c.Bz.forChild(mt),c.Bz]});var _t=o(86430);class bt{}bt.\u0275fac=function(st){return new(st||bt)},bt.\u0275mod=i.oAB({type:bt}),bt.\u0275inj=i.cJS({providers:[g.u],imports:[s.ez,m.m,p.UserModule,dt,_t.ClassroomHomeworkModule]})},86430:(y,_,o)=>{"use strict";o.r(_),o.d(_,{ClassroomHomeworkModule:()=>xe});var s={};o.r(s),o.d(s,{forceCenter:()=>Ns,forceCollide:()=>Pr,forceLink:()=>Zr,forceManyBody:()=>Br,forceRadial:()=>ea,forceSimulation:()=>Ur,forceX:()=>na,forceY:()=>ra});var m={};o.r(m),o.d(m,{dispatch:()=>ln});var p={};o.r(p),o.d(p,{interval:()=>oa,now:()=>le,timeout:()=>fn,timer:()=>We,timerFlush:()=>$n});var g=o(36895),c=o(83135),f=o(59181),i=o(84937),a=o(54415),l=o(87618),t=o(41571),u=o(70655),d=o(37340);function x(){}function w(e){return null==e?x:function(){return this.querySelector(e)}}function T(){return[]}function M(e){return null==e?T:function(){return this.querySelectorAll(e)}}function k(e){return function(){return this.matches(e)}}function H(e){return new Array(e.length)}function B(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}B.prototype={constructor:B,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function O(e,n,r,h,v,b){for(var A,E=0,N=n.length,Z=b.length;E<Z;++E)(A=n[E])?(A.__data__=b[E],h[E]=A):r[E]=new B(e,b[E]);for(;E<N;++E)(A=n[E])&&(v[E]=A)}function L(e,n,r,h,v,b,E){var A,N,rt,Z={},R=n.length,J=b.length,j=new Array(R);for(A=0;A<R;++A)(N=n[A])&&(j[A]=rt="$"+E.call(N,N.__data__,A,n),rt in Z?v[A]=N:Z[rt]=N);for(A=0;A<J;++A)(N=Z[rt="$"+E.call(e,b[A],A,b)])?(h[A]=N,N.__data__=b[A],Z[rt]=null):r[A]=new B(e,b[A]);for(A=0;A<R;++A)(N=n[A])&&Z[j[A]]===N&&(v[A]=N)}function X(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}var $="http://www.w3.org/1999/xhtml";const Q={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nt(e){var n=e+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=e.slice(0,r))&&(e=e.slice(r+1)),Q.hasOwnProperty(n)?{space:Q[n],local:e}:e}function ht(e){return function(){this.removeAttribute(e)}}function mt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dt(e,n){return function(){this.setAttribute(e,n)}}function _t(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function bt(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function ot(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function et(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gt(e){return function(){this.style.removeProperty(e)}}function Tt(e,n,r){return function(){this.style.setProperty(e,n,r)}}function wt(e,n,r){return function(){var h=n.apply(this,arguments);null==h?this.style.removeProperty(e):this.style.setProperty(e,h,r)}}function Ft(e,n){return e.style.getPropertyValue(n)||et(e).getComputedStyle(e,null).getPropertyValue(n)}function on(e){return function(){delete this[e]}}function ue(e,n){return function(){this[e]=n}}function Ut(e,n){return function(){var r=n.apply(this,arguments);null==r?delete this[e]:this[e]=r}}function ee(e){return e.trim().split(/^|\s+/)}function Wt(e){return e.classList||new Be(e)}function Be(e){this._node=e,this._names=ee(e.getAttribute("class")||"")}function _e(e,n){for(var r=Wt(e),h=-1,v=n.length;++h<v;)r.add(n[h])}function Vt(e,n){for(var r=Wt(e),h=-1,v=n.length;++h<v;)r.remove(n[h])}function He(e){return function(){_e(this,e)}}function Re(e){return function(){Vt(this,e)}}function sn(e,n){return function(){(n.apply(this,arguments)?_e:Vt)(this,e)}}function Bt(){this.textContent=""}function zt(e){return function(){this.textContent=e}}function Xr(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function Qr(){this.innerHTML=""}function Kr(e){return function(){this.innerHTML=e}}function qr(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function ei(){this.nextSibling&&this.parentNode.appendChild(this)}function ri(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oi(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===$&&n.documentElement.namespaceURI===$?n.createElement(e):n.createElementNS(r,e)}}function si(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function In(e){var n=nt(e);return(n.local?si:oi)(n)}function ui(){return null}function li(){var e=this.parentNode;e&&e.removeChild(this)}function fi(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function di(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}Be.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Sn={},ne=null;typeof document<"u"&&("onmouseenter"in document.documentElement||(Sn={mouseenter:"mouseover",mouseleave:"mouseout"}));function vi(e,n,r){return e=Nn(e,n,r),function(h){var v=h.relatedTarget;(!v||v!==this&&!(8&v.compareDocumentPosition(this)))&&e.call(this,h)}}function Nn(e,n,r){return function(h){var v=ne;ne=h;try{e.call(this,this.__data__,n,r)}finally{ne=v}}}function yi(e){return e.trim().split(/^|\s+/).map(function(n){var r="",h=n.indexOf(".");return h>=0&&(r=n.slice(h+1),n=n.slice(0,h)),{type:n,name:r}})}function xi(e){return function(){var n=this.__on;if(n){for(var b,r=0,h=-1,v=n.length;r<v;++r)b=n[r],e.type&&b.type!==e.type||b.name!==e.name?n[++h]=b:this.removeEventListener(b.type,b.listener,b.capture);++h?n.length=h:delete this.__on}}}function _i(e,n,r){var h=Sn.hasOwnProperty(e.type)?vi:Nn;return function(v,b,E){var N,A=this.__on,Z=h(n,b,E);if(A)for(var R=0,J=A.length;R<J;++R)if((N=A[R]).type===e.type&&N.name===e.name)return this.removeEventListener(N.type,N.listener,N.capture),this.addEventListener(N.type,N.listener=Z,N.capture=r),void(N.value=n);this.addEventListener(e.type,Z,r),N={type:e.type,name:e.name,value:n,listener:Z,capture:r},A?A.push(N):this.__on=[N]}}function On(e,n,r){var h=et(e),v=h.CustomEvent;"function"==typeof v?v=new v(n,r):(v=h.document.createEvent("Event"),r?(v.initEvent(n,r.bubbles,r.cancelable),v.detail=r.detail):v.initEvent(n,!1,!1)),e.dispatchEvent(v)}function bi(e,n){return function(){return On(this,e,n)}}function Ei(e,n){return function(){return On(this,e,n.apply(this,arguments))}}var Ln=[null];function Pt(e,n){this._groups=e,this._parents=n}function Fn(){return new Pt([[document.documentElement]],Ln)}Pt.prototype=Fn.prototype={constructor:Pt,select:function C(e){"function"!=typeof e&&(e=w(e));for(var n=this._groups,r=n.length,h=new Array(r),v=0;v<r;++v)for(var N,Z,b=n[v],E=b.length,A=h[v]=new Array(E),R=0;R<E;++R)(N=b[R])&&(Z=e.call(N,N.__data__,R,b))&&("__data__"in N&&(Z.__data__=N.__data__),A[R]=Z);return new Pt(h,this._parents)},selectAll:function I(e){"function"!=typeof e&&(e=M(e));for(var n=this._groups,r=n.length,h=[],v=[],b=0;b<r;++b)for(var N,E=n[b],A=E.length,Z=0;Z<A;++Z)(N=E[Z])&&(h.push(e.call(N,N.__data__,Z,E)),v.push(N));return new Pt(h,v)},filter:function P(e){"function"!=typeof e&&(e=k(e));for(var n=this._groups,r=n.length,h=new Array(r),v=0;v<r;++v)for(var N,b=n[v],E=b.length,A=h[v]=[],Z=0;Z<E;++Z)(N=b[Z])&&e.call(N,N.__data__,Z,b)&&A.push(N);return new Pt(h,this._parents)},data:function F(e,n){if(!e)return rt=new Array(this.size()),Z=-1,this.each(function(Lt){rt[++Z]=Lt}),rt;var r=n?L:O,h=this._parents,v=this._groups;"function"!=typeof e&&(e=function Y(e){return function(){return e}}(e));for(var b=v.length,E=new Array(b),A=new Array(b),N=new Array(b),Z=0;Z<b;++Z){var R=h[Z],J=v[Z],j=J.length,rt=e.call(R,R&&R.__data__,Z,h),tt=rt.length,at=A[Z]=new Array(tt),lt=E[Z]=new Array(tt);r(R,J,at,lt,N[Z]=new Array(j),rt,n);for(var Et,Ct,xt=0,pt=0;xt<tt;++xt)if(Et=at[xt]){for(xt>=pt&&(pt=xt+1);!(Ct=lt[pt])&&++pt<tt;);Et._next=Ct||null}}return(E=new Pt(E,h))._enter=A,E._exit=N,E},enter:function V(){return new Pt(this._enter||this._groups.map(H),this._parents)},exit:function D(){return new Pt(this._exit||this._groups.map(H),this._parents)},join:function z(e,n,r){var h=this.enter(),v=this,b=this.exit();return h="function"==typeof e?e(h):h.append(e+""),null!=n&&(v=n(v)),null==r?b.remove():r(b),h&&v?h.merge(v).order():v},merge:function K(e){for(var n=this._groups,r=e._groups,h=n.length,v=r.length,b=Math.min(h,v),E=new Array(h),A=0;A<b;++A)for(var j,N=n[A],Z=r[A],R=N.length,J=E[A]=new Array(R),rt=0;rt<R;++rt)(j=N[rt]||Z[rt])&&(J[rt]=j);for(;A<h;++A)E[A]=n[A];return new Pt(E,this._parents)},order:function U(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var E,h=e[n],v=h.length-1,b=h[v];--v>=0;)(E=h[v])&&(b&&4^E.compareDocumentPosition(b)&&b.parentNode.insertBefore(E,b),b=E);return this},sort:function G(e){function n(J,j){return J&&j?e(J.__data__,j.__data__):!J-!j}e||(e=X);for(var r=this._groups,h=r.length,v=new Array(h),b=0;b<h;++b){for(var Z,E=r[b],A=E.length,N=v[b]=new Array(A),R=0;R<A;++R)(Z=E[R])&&(N[R]=Z);N.sort(n)}return new Pt(v,this._parents).order()},call:function W(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function it(){var e=new Array(this.size()),n=-1;return this.each(function(){e[++n]=this}),e},node:function q(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var h=e[n],v=0,b=h.length;v<b;++v){var E=h[v];if(E)return E}return null},size:function ut(){var e=0;return this.each(function(){++e}),e},empty:function ct(){return!this.node()},each:function yt(e){for(var n=this._groups,r=0,h=n.length;r<h;++r)for(var A,v=n[r],b=0,E=v.length;b<E;++b)(A=v[b])&&e.call(A,A.__data__,b,v);return this},attr:function st(e,n){var r=nt(e);if(arguments.length<2){var h=this.node();return r.local?h.getAttributeNS(r.space,r.local):h.getAttribute(r)}return this.each((null==n?r.local?mt:ht:"function"==typeof n?r.local?ot:bt:r.local?_t:dt)(r,n))},style:function Xt(e,n,r){return arguments.length>1?this.each((null==n?gt:"function"==typeof n?wt:Tt)(e,n,r??"")):Ft(this.node(),e)},property:function St(e,n){return arguments.length>1?this.each((null==n?on:"function"==typeof n?Ut:ue)(e,n)):this.node()[e]},classed:function Ve(e,n){var r=ee(e+"");if(arguments.length<2){for(var h=Wt(this.node()),v=-1,b=r.length;++v<b;)if(!h.contains(r[v]))return!1;return!0}return this.each(("function"==typeof n?sn:n?He:Re)(r,n))},text:function Wr(e){return arguments.length?this.each(null==e?Bt:("function"==typeof e?Xr:zt)(e)):this.node().textContent},html:function ti(e){return arguments.length?this.each(null==e?Qr:("function"==typeof e?qr:Kr)(e)):this.node().innerHTML},raise:function ni(){return this.each(ei)},lower:function ii(){return this.each(ri)},append:function ai(e){var n="function"==typeof e?e:In(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function hi(e,n){var r="function"==typeof e?e:In(e),h=null==n?ui:"function"==typeof n?n:w(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),h.apply(this,arguments)||null)})},remove:function ci(){return this.each(li)},clone:function pi(e){return this.select(e?di:fi)},datum:function gi(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function wi(e,n,r){var v,E,h=yi(e+""),b=h.length;if(!(arguments.length<2)){for(A=n?_i:xi,null==r&&(r=!1),v=0;v<b;++v)this.each(A(h[v],n,r));return this}var A=this.node().__on;if(A)for(var R,N=0,Z=A.length;N<Z;++N)for(v=0,R=A[N];v<b;++v)if((E=h[v]).type===R.type&&E.name===R.name)return R.value},dispatch:function Ci(e,n){return this.each(("function"==typeof n?Ei:bi)(e,n))}};const we=Fn;function Pn(e){return"string"==typeof e?new Pt([[document.querySelector(e)]],[document.documentElement]):new Pt([[e]],Ln)}function Dn(e,n,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+r)/6)}function ze(e){this._context=e}function Gn(e,n){this._basis=new ze(e),this._beta=n}ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dn(this,e,n)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}},Gn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,r=e.length-1;if(r>0)for(var N,h=e[0],v=n[0],b=e[r]-h,E=n[r]-v,A=-1;++A<=r;)N=A/r,this._basis.point(this._beta*e[A]+(1-this._beta)*(h+N*b),this._beta*n[A]+(1-this._beta)*(v+N*E));this._x=this._y=null,this._basis.lineEnd()},point:function(e,n){this._x.push(+e),this._y.push(+n)}};const Ti=function e(n){function r(h){return 1===n?new ze(h):new Gn(h,n)}return r.beta=function(h){return e(+h)},r}(.85);var an=Math.PI,un=2*an,re=1e-6,Mi=un-re;function hn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zn(){return new hn}hn.prototype=Zn.prototype={constructor:hn,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,r,h){this._+="Q"+ +e+","+ +n+","+(this._x1=+r)+","+(this._y1=+h)},bezierCurveTo:function(e,n,r,h,v,b){this._+="C"+ +e+","+ +n+","+ +r+","+ +h+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(e,n,r,h,v){e=+e,n=+n,r=+r,h=+h,v=+v;var b=this._x1,E=this._y1,A=r-e,N=h-n,Z=b-e,R=E-n,J=Z*Z+R*R;if(v<0)throw new Error("negative radius: "+v);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(J>re)if(Math.abs(R*A-N*Z)>re&&v){var j=r-b,rt=h-E,tt=A*A+N*N,at=j*j+rt*rt,lt=Math.sqrt(tt),ft=Math.sqrt(J),xt=v*Math.tan((an-Math.acos((tt+J-at)/(2*lt*ft)))/2),pt=xt/ft,Et=xt/lt;Math.abs(pt-1)>re&&(this._+="L"+(e+pt*Z)+","+(n+pt*R)),this._+="A"+v+","+v+",0,0,"+ +(R*j>Z*rt)+","+(this._x1=e+Et*A)+","+(this._y1=n+Et*N)}else this._+="L"+(this._x1=e)+","+(this._y1=n)},arc:function(e,n,r,h,v,b){e=+e,n=+n,b=!!b;var E=(r=+r)*Math.cos(h),A=r*Math.sin(h),N=e+E,Z=n+A,R=1^b,J=b?h-v:v-h;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+N+","+Z:(Math.abs(this._x1-N)>re||Math.abs(this._y1-Z)>re)&&(this._+="L"+N+","+Z),r&&(J<0&&(J=J%un+un),J>Mi?this._+="A"+r+","+r+",0,1,"+R+","+(e-E)+","+(n-A)+"A"+r+","+r+",0,1,"+R+","+(this._x1=N)+","+(this._y1=Z):J>re&&(this._+="A"+r+","+r+",0,"+ +(J>=an)+","+R+","+(this._x1=e+r*Math.cos(v))+","+(this._y1=n+r*Math.sin(v))))},rect:function(e,n,r,h){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +r+"v"+ +h+"h"+-r+"Z"},toString:function(){return this._}};const Ai=Zn;function Ye(e){return function(){return e}}function Un(e){this._context=e}function ki(e){return new Un(e)}function Ii(e){return e[0]}function Si(e){return e[1]}Un.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n)}}};var Bn=Math.PI;function Rn(e){return(1-Math.cos(Bn*e))/2}var Oi={value:function(){}};function Vn(){for(var h,e=0,n=arguments.length,r={};e<n;++e){if(!(h=arguments[e]+"")||h in r||/[\s.]/.test(h))throw new Error("illegal type: "+h);r[h]=[]}return new je(r)}function je(e){this._=e}function Li(e,n){return e.trim().split(/^|\s+/).map(function(r){var h="",v=r.indexOf(".");if(v>=0&&(h=r.slice(v+1),r=r.slice(0,v)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:h}})}function Fi(e,n){for(var v,r=0,h=e.length;r<h;++r)if((v=e[r]).name===n)return v.value}function zn(e,n,r){for(var h=0,v=e.length;h<v;++h)if(e[h].name===n){e[h]=Oi,e=e.slice(0,h).concat(e.slice(h+1));break}return null!=r&&e.push({name:n,value:r}),e}je.prototype=Vn.prototype={constructor:je,on:function(e,n){var v,r=this._,h=Li(e+"",r),b=-1,E=h.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++b<E;)if(v=(e=h[b]).type)r[v]=zn(r[v],e.name,n);else if(null==n)for(v in r)r[v]=zn(r[v],e.name,null);return this}for(;++b<E;)if((v=(e=h[b]).type)&&(v=Fi(r[v],e.name)))return v},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new je(e)},call:function(e,n){if((v=arguments.length-2)>0)for(var v,b,r=new Array(v),h=0;h<v;++h)r[h]=arguments[h+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(h=0,v=(b=this._[e]).length;h<v;++h)b[h].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var h=this._[e],v=0,b=h.length;v<b;++v)h[v].value.apply(n,r)}};const ln=Vn;var $e,Ce,he=0,be=0,Ee=0,Je=0,ie=0,Xe=0,Te="object"==typeof performance&&performance.now?performance:Date,jn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function le(){return ie||(jn(Pi),ie=Te.now()+Xe)}function Pi(){ie=0}function Me(){this._call=this._time=this._next=null}function We(e,n,r){var h=new Me;return h.restart(e,n,r),h}function $n(){le(),++he;for(var n,e=$e;e;)(n=ie-e._time)>=0&&e._call.call(null,n),e=e._next;--he}function Jn(){ie=(Je=Te.now())+Xe,he=be=0;try{$n()}finally{he=0,function Gi(){for(var e,r,n=$e,h=1/0;n;)n._call?(h>n._time&&(h=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:$e=r);Ce=e,cn(h)}(),ie=0}}function Di(){var e=Te.now(),n=e-Je;n>1e3&&(Xe-=n,Je=e)}function cn(e){he||(be&&(be=clearTimeout(be)),e-ie>24?(e<1/0&&(be=setTimeout(Jn,e-Te.now()-Xe)),Ee&&(Ee=clearInterval(Ee))):(Ee||(Je=Te.now(),Ee=setInterval(Di,1e3)),he=1,jn(Jn)))}function fn(e,n,r){var h=new Me;return n=null==n?0:+n,h.restart(function(v){h.stop(),e(v+n)},n,r),h}Me.prototype=We.prototype={constructor:Me,restart:function(e,n,r){if("function"!=typeof e)throw new TypeError("callback is not a function");r=(null==r?le():+r)+(null==n?0:+n),!this._next&&Ce!==this&&(Ce?Ce._next=this:$e=this,Ce=this),this._call=e,this._time=r,cn()},stop:function(){this._call&&(this._call=null,this._time=1/0,cn())}};var Zi=ln("start","end","cancel","interrupt"),Ui=[];function qe(e,n,r,h,v,b){var E=e.__transition;if(E){if(r in E)return}else e.__transition={};!function Bi(e,n,r){var v,h=e.__transition;function b(Z){r.state=1,r.timer.restart(E,r.delay,r.time),r.delay<=Z&&E(Z-r.delay)}function E(Z){var R,J,j,rt;if(1!==r.state)return N();for(R in h)if((rt=h[R]).name===r.name){if(3===rt.state)return fn(E);4===rt.state?(rt.state=6,rt.timer.stop(),rt.on.call("interrupt",e,e.__data__,rt.index,rt.group),delete h[R]):+R<n&&(rt.state=6,rt.timer.stop(),rt.on.call("cancel",e,e.__data__,rt.index,rt.group),delete h[R])}if(fn(function(){3===r.state&&(r.state=4,r.timer.restart(A,r.delay,r.time),A(Z))}),r.state=2,r.on.call("start",e,e.__data__,r.index,r.group),2===r.state){for(r.state=3,v=new Array(j=r.tween.length),R=0,J=-1;R<j;++R)(rt=r.tween[R].value.call(e,e.__data__,r.index,r.group))&&(v[++J]=rt);v.length=J+1}}function A(Z){for(var R=Z<r.duration?r.ease.call(null,Z/r.duration):(r.timer.restart(N),r.state=5,1),J=-1,j=v.length;++J<j;)v[J].call(e,R);5===r.state&&(r.on.call("end",e,e.__data__,r.index,r.group),N())}function N(){for(var Z in r.state=6,r.timer.stop(),delete h[n],h)return;delete e.__transition}h[n]=r,r.timer=We(b,0,r.time)}(e,r,{name:n,index:h,group:v,on:Zi,tween:Ui,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:0})}function gn(e,n){var r=Gt(e,n);if(r.state>0)throw new Error("too late; already scheduled");return r}function Yt(e,n){var r=Gt(e,n);if(r.state>3)throw new Error("too late; already running");return r}function Gt(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function Qt(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var Ae,vn,tr,tn,Kn=180/Math.PI,mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qn(e,n,r,h,v,b){var E,A,N;return(E=Math.sqrt(e*e+n*n))&&(e/=E,n/=E),(N=e*r+n*h)&&(r-=e*N,h-=n*N),(A=Math.sqrt(r*r+h*h))&&(r/=A,h/=A,N/=A),e*h<n*r&&(e=-e,n=-n,N=-N,E=-E),{translateX:v,translateY:b,rotate:Math.atan2(n,e)*Kn,skewX:Math.atan(N)*Kn,scaleX:E,scaleY:A}}function er(e,n,r,h){function v(Z){return Z.length?Z.pop()+" ":""}return function(Z,R){var J=[],j=[];return Z=e(Z),R=e(R),function b(Z,R,J,j,rt,tt){if(Z!==J||R!==j){var at=rt.push("translate(",null,n,null,r);tt.push({i:at-4,x:Qt(Z,J)},{i:at-2,x:Qt(R,j)})}else(J||j)&&rt.push("translate("+J+n+j+r)}(Z.translateX,Z.translateY,R.translateX,R.translateY,J,j),function E(Z,R,J,j){Z!==R?(Z-R>180?R+=360:R-Z>180&&(Z+=360),j.push({i:J.push(v(J)+"rotate(",null,h)-2,x:Qt(Z,R)})):R&&J.push(v(J)+"rotate("+R+h)}(Z.rotate,R.rotate,J,j),function A(Z,R,J,j){Z!==R?j.push({i:J.push(v(J)+"skewX(",null,h)-2,x:Qt(Z,R)}):R&&J.push(v(J)+"skewX("+R+h)}(Z.skewX,R.skewX,J,j),function N(Z,R,J,j,rt,tt){if(Z!==J||R!==j){var at=rt.push(v(rt)+"scale(",null,",",null,")");tt.push({i:at-4,x:Qt(Z,J)},{i:at-2,x:Qt(R,j)})}else(1!==J||1!==j)&&rt.push(v(rt)+"scale("+J+","+j+")")}(Z.scaleX,Z.scaleY,R.scaleX,R.scaleY,J,j),Z=R=null,function(rt){for(var lt,tt=-1,at=j.length;++tt<at;)J[(lt=j[tt]).i]=lt.x(rt);return J.join("")}}}var Yi=er(function Vi(e){return"none"===e?mn:(Ae||(Ae=document.createElement("DIV"),vn=document.documentElement,tr=document.defaultView),Ae.style.transform=e,e=tr.getComputedStyle(vn.appendChild(Ae),null).getPropertyValue("transform"),vn.removeChild(Ae),qn(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),ji=er(function zi(e){return null!=e&&(tn||(tn=document.createElementNS("http://www.w3.org/2000/svg","g")),tn.setAttribute("transform",e),e=tn.transform.baseVal.consolidate())?qn((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):mn},", ",")",")");function $i(e,n){var r,h;return function(){var v=Yt(this,e),b=v.tween;if(b!==r)for(var E=0,A=(h=r=b).length;E<A;++E)if(h[E].name===n){(h=h.slice()).splice(E,1);break}v.tween=h}}function Ji(e,n,r){var h,v;if("function"!=typeof r)throw new Error;return function(){var b=Yt(this,e),E=b.tween;if(E!==h){v=(h=E).slice();for(var A={name:n,value:r},N=0,Z=v.length;N<Z;++N)if(v[N].name===n){v[N]=A;break}N===Z&&v.push(A)}b.tween=v}}function yn(e,n,r){var h=e._id;return e.each(function(){var v=Yt(this,h);(v.value||(v.value={}))[n]=r.apply(this,arguments)}),function(v){return Gt(v,h).value[n]}}function xn(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function nr(e,n){var r=Object.create(e.prototype);for(var h in n)r[h]=n[h];return r}function ke(){}var en=1/.7,ce="\\s*([+-]?\\d+)\\s*",Se="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wi=/^#([0-9a-f]{3,8})$/,Qi=new RegExp("^rgb\\("+[ce,ce,ce]+"\\)$"),Ki=new RegExp("^rgb\\("+[Ht,Ht,Ht]+"\\)$"),qi=new RegExp("^rgba\\("+[ce,ce,ce,Se]+"\\)$"),to=new RegExp("^rgba\\("+[Ht,Ht,Ht,Se]+"\\)$"),eo=new RegExp("^hsl\\("+[Se,Ht,Ht]+"\\)$"),no=new RegExp("^hsla\\("+[Se,Ht,Ht,Se]+"\\)$"),rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ir(){return this.rgb().formatHex()}function or(){return this.rgb().formatRgb()}function Ne(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=Wi.exec(e))?(r=n[1].length,n=parseInt(n[1],16),6===r?sr(n):3===r?new Dt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===r?nn(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===r?nn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Qi.exec(e))?new Dt(n[1],n[2],n[3],1):(n=Ki.exec(e))?new Dt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=qi.exec(e))?nn(n[1],n[2],n[3],n[4]):(n=to.exec(e))?nn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=eo.exec(e))?hr(n[1],n[2]/100,n[3]/100,1):(n=no.exec(e))?hr(n[1],n[2]/100,n[3]/100,n[4]):rr.hasOwnProperty(e)?sr(rr[e]):"transparent"===e?new Dt(NaN,NaN,NaN,0):null}function sr(e){return new Dt(e>>16&255,e>>8&255,255&e,1)}function nn(e,n,r,h){return h<=0&&(e=n=r=NaN),new Dt(e,n,r,h)}function io(e){return e instanceof ke||(e=Ne(e)),e?new Dt((e=e.rgb()).r,e.g,e.b,e.opacity):new Dt}function rn(e,n,r,h){return 1===arguments.length?io(e):new Dt(e,n,r,h??1)}function Dt(e,n,r,h){this.r=+e,this.g=+n,this.b=+r,this.opacity=+h}function ar(){return"#"+_n(this.r)+_n(this.g)+_n(this.b)}function ur(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function _n(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function hr(e,n,r,h){return h<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new Rt(e,n,r,h)}function lr(e){if(e instanceof Rt)return new Rt(e.h,e.s,e.l,e.opacity);if(e instanceof ke||(e=Ne(e)),!e)return new Rt;if(e instanceof Rt)return e;var n=(e=e.rgb()).r/255,r=e.g/255,h=e.b/255,v=Math.min(n,r,h),b=Math.max(n,r,h),E=NaN,A=b-v,N=(b+v)/2;return A?(E=n===b?(r-h)/A+6*(r<h):r===b?(h-n)/A+2:(n-r)/A+4,A/=N<.5?b+v:2-b-v,E*=60):A=N>0&&N<1?0:E,new Rt(E,A,N,e.opacity)}function Rt(e,n,r,h){this.h=+e,this.s=+n,this.l=+r,this.opacity=+h}function wn(e,n,r){return 255*(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)}function cr(e,n,r,h,v){var b=e*e,E=b*e;return((1-3*e+3*b-E)*n+(4-6*b+3*E)*r+(1+3*e+3*b-3*E)*h+E*v)/6}function fr(e){return function(){return e}}function dr(e,n){return function(r){return e+r*n}}function ho(e){return 1==(e=+e)?pr:function(n,r){return r-n?function uo(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(h){return Math.pow(e+h*n,r)}}(n,r,e):fr(isNaN(n)?r:n)}}function pr(e,n){var r=n-e;return r?dr(e,r):fr(isNaN(e)?n:e)}xn(ke,Ne,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ir,formatHex:ir,formatHsl:function ro(){return lr(this).formatHsl()},formatRgb:or,toString:or}),xn(Dt,rn,nr(ke,{brighter:function(e){return e=null==e?en:Math.pow(en,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ar,formatHex:ar,formatRgb:ur,toString:ur})),xn(Rt,function oo(e,n,r,h){return 1===arguments.length?lr(e):new Rt(e,n,r,h??1)},nr(ke,{brighter:function(e){return e=null==e?en:Math.pow(en,e),new Rt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Rt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,h=r+(r<.5?r:1-r)*n,v=2*r-h;return new Dt(wn(e>=240?e-240:e+120,v,h),wn(e,v,h),wn(e<120?e+240:e-120,v,h),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const gr=function e(n){var r=ho(n);function h(v,b){var E=r((v=rn(v)).r,(b=rn(b)).r),A=r(v.g,b.g),N=r(v.b,b.b),Z=pr(v.opacity,b.opacity);return function(R){return v.r=E(R),v.g=A(R),v.b=N(R),v.opacity=Z(R),v+""}}return h.gamma=e,h}(1);function mr(e){return function(n){var E,A,r=n.length,h=new Array(r),v=new Array(r),b=new Array(r);for(E=0;E<r;++E)A=rn(n[E]),h[E]=A.r||0,v[E]=A.g||0,b[E]=A.b||0;return h=e(h),v=e(v),b=e(b),A.opacity=1,function(N){return A.r=h(N),A.g=v(N),A.b=b(N),A+""}}}mr(function so(e){var n=e.length-1;return function(r){var h=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),v=e[h],b=e[h+1],E=h>0?e[h-1]:2*v-b,A=h<n-1?e[h+2]:2*b-v;return cr((r-h/n)*n,E,v,b,A)}}),mr(function ao(e){var n=e.length;return function(r){var h=Math.floor(((r%=1)<0?++r:r)*n),v=e[(h+n-1)%n],b=e[h%n],E=e[(h+1)%n],A=e[(h+2)%n];return cr((r-h/n)*n,v,b,E,A)}});var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,En=new RegExp(bn.source,"g");function fo(e,n){var h,v,b,r=bn.lastIndex=En.lastIndex=0,E=-1,A=[],N=[];for(e+="",n+="";(h=bn.exec(e))&&(v=En.exec(n));)(b=v.index)>r&&(b=n.slice(r,b),A[E]?A[E]+=b:A[++E]=b),(h=h[0])===(v=v[0])?A[E]?A[E]+=v:A[++E]=v:(A[++E]=null,N.push({i:E,x:Qt(h,v)})),r=En.lastIndex;return r<n.length&&(b=n.slice(r),A[E]?A[E]+=b:A[++E]=b),A.length<2?N[0]?function co(e){return function(n){return e(n)+""}}(N[0].x):function lo(e){return function(){return e}}(n):(n=N.length,function(Z){for(var J,R=0;R<n;++R)A[(J=N[R]).i]=J.x(Z);return A.join("")})}function vr(e,n){var r;return("number"==typeof n?Qt:n instanceof Ne?gr:(r=Ne(n))?(n=r,gr):fo)(e,n)}function po(e){return function(){this.removeAttribute(e)}}function go(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mo(e,n,r){var h,b,v=r+"";return function(){var E=this.getAttribute(e);return E===v?null:E===h?b:b=n(h=E,r)}}function vo(e,n,r){var h,b,v=r+"";return function(){var E=this.getAttributeNS(e.space,e.local);return E===v?null:E===h?b:b=n(h=E,r)}}function yo(e,n,r){var h,v,b;return function(){var E,N,A=r(this);return null==A?void this.removeAttribute(e):(E=this.getAttribute(e))===(N=A+"")?null:E===h&&N===v?b:(v=N,b=n(h=E,A))}}function xo(e,n,r){var h,v,b;return function(){var E,N,A=r(this);return null==A?void this.removeAttributeNS(e.space,e.local):(E=this.getAttributeNS(e.space,e.local))===(N=A+"")?null:E===h&&N===v?b:(v=N,b=n(h=E,A))}}function wo(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function bo(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function Eo(e,n){var r,h;function v(){var b=n.apply(this,arguments);return b!==h&&(r=(h=b)&&bo(e,b)),r}return v._value=n,v}function Co(e,n){var r,h;function v(){var b=n.apply(this,arguments);return b!==h&&(r=(h=b)&&wo(e,b)),r}return v._value=n,v}function Mo(e,n){return function(){gn(this,e).delay=+n.apply(this,arguments)}}function Ao(e,n){return n=+n,function(){gn(this,e).delay=n}}function Io(e,n){return function(){Yt(this,e).duration=+n.apply(this,arguments)}}function So(e,n){return n=+n,function(){Yt(this,e).duration=n}}function Oo(e,n){if("function"!=typeof n)throw new Error;return function(){Yt(this,e).ease=n}}function Go(e,n,r){var h,v,b=function Do(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||"start"===n})}(n)?gn:Yt;return function(){var E=b(this,e),A=E.on;A!==h&&(v=(h=A).copy()).on(n,r),E.on=v}}var Vo=we.prototype.constructor;function yr(e){return function(){this.style.removeProperty(e)}}function Wo(e,n,r){return function(h){this.style.setProperty(e,n.call(this,h),r)}}function Qo(e,n,r){var h,v;function b(){var E=n.apply(this,arguments);return E!==v&&(h=(v=E)&&Wo(e,E,r)),h}return b._value=n,b}function ns(e){return function(n){this.textContent=e.call(this,n)}}function rs(e){var n,r;function h(){var v=e.apply(this,arguments);return v!==r&&(n=(r=v)&&ns(v)),n}return h._value=e,h}var as=0;function jt(e,n,r,h){this._groups=e,this._parents=n,this._name=r,this._id=h}function xr(){return++as}var fe=we.prototype;jt.prototype=function us(e){return we().transition(e)}.prototype={constructor:jt,select:function Ho(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=w(e));for(var h=this._groups,v=h.length,b=new Array(v),E=0;E<v;++E)for(var R,J,A=h[E],N=A.length,Z=b[E]=new Array(N),j=0;j<N;++j)(R=A[j])&&(J=e.call(R,R.__data__,j,A))&&("__data__"in R&&(J.__data__=R.__data__),Z[j]=J,qe(Z[j],n,r,j,Z,Gt(R,r)));return new jt(b,this._parents,n,r)},selectAll:function Ro(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=M(e));for(var h=this._groups,v=h.length,b=[],E=[],A=0;A<v;++A)for(var R,N=h[A],Z=N.length,J=0;J<Z;++J)if(R=N[J]){for(var rt,j=e.call(R,R.__data__,J,N),tt=Gt(R,r),at=0,lt=j.length;at<lt;++at)(rt=j[at])&&qe(rt,n,r,at,j,tt);b.push(j),E.push(R)}return new jt(b,E,n,r)},filter:function Fo(e){"function"!=typeof e&&(e=k(e));for(var n=this._groups,r=n.length,h=new Array(r),v=0;v<r;++v)for(var N,b=n[v],E=b.length,A=h[v]=[],Z=0;Z<E;++Z)(N=b[Z])&&e.call(N,N.__data__,Z,b)&&A.push(N);return new jt(h,this._parents,this._name,this._id)},merge:function Po(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,h=n.length,v=r.length,b=Math.min(h,v),E=new Array(h),A=0;A<b;++A)for(var j,N=n[A],Z=r[A],R=N.length,J=E[A]=new Array(R),rt=0;rt<R;++rt)(j=N[rt]||Z[rt])&&(J[rt]=j);for(;A<h;++A)E[A]=n[A];return new jt(E,this._parents,this._name,this._id)},selection:function zo(){return new Vo(this._groups,this._parents)},transition:function os(){for(var e=this._name,n=this._id,r=xr(),h=this._groups,v=h.length,b=0;b<v;++b)for(var N,E=h[b],A=E.length,Z=0;Z<A;++Z)if(N=E[Z]){var R=Gt(N,n);qe(N,e,r,Z,E,{time:R.time+R.delay+R.duration,delay:0,duration:R.duration,ease:R.ease})}return new jt(h,this._parents,e,r)},call:fe.call,nodes:fe.nodes,node:fe.node,size:fe.size,empty:fe.empty,each:fe.each,on:function Zo(e,n){var r=this._id;return arguments.length<2?Gt(this.node(),r).on.on(e):this.each(Go(r,e,n))},attr:function _o(e,n){var r=nt(e),h="transform"===r?ji:vr;return this.attrTween(e,"function"==typeof n?(r.local?xo:yo)(r,h,yn(this,"attr."+e,n)):null==n?(r.local?go:po)(r):(r.local?vo:mo)(r,h,n))},attrTween:function To(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;var h=nt(e);return this.tween(r,(h.local?Eo:Co)(h,n))},style:function Xo(e,n,r){var h="transform"==(e+="")?Yi:vr;return null==n?this.styleTween(e,function Yo(e,n){var r,h,v;return function(){var b=Ft(this,e),E=(this.style.removeProperty(e),Ft(this,e));return b===E?null:b===r&&E===h?v:v=n(r=b,h=E)}}(e,h)).on("end.style."+e,yr(e)):"function"==typeof n?this.styleTween(e,function $o(e,n,r){var h,v,b;return function(){var E=Ft(this,e),A=r(this),N=A+"";return null==A&&(this.style.removeProperty(e),N=A=Ft(this,e)),E===N?null:E===h&&N===v?b:(v=N,b=n(h=E,A))}}(e,h,yn(this,"style."+e,n))).each(function Jo(e,n){var r,h,v,A,b="style."+n,E="end."+b;return function(){var N=Yt(this,e),Z=N.on,R=null==N.value[b]?A||(A=yr(n)):void 0;(Z!==r||v!==R)&&(h=(r=Z).copy()).on(E,v=R),N.on=h}}(this._id,e)):this.styleTween(e,function jo(e,n,r){var h,b,v=r+"";return function(){var E=Ft(this,e);return E===v?null:E===h?b:b=n(h=E,r)}}(e,h,n),r).on("end.style."+e,null)},styleTween:function Ko(e,n,r){var h="style."+(e+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==n)return this.tween(h,null);if("function"!=typeof n)throw new Error;return this.tween(h,Qo(e,n,r??""))},text:function es(e){return this.tween("text","function"==typeof e?function ts(e){return function(){var n=e(this);this.textContent=n??""}}(yn(this,"text",e)):function qo(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function is(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,rs(e))},remove:function Bo(){return this.on("end.remove",function Uo(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}(this._id))},tween:function Xi(e,n){var r=this._id;if(e+="",arguments.length<2){for(var E,h=Gt(this.node(),r).tween,v=0,b=h.length;v<b;++v)if((E=h[v]).name===e)return E.value;return null}return this.each((null==n?$i:Ji)(r,e,n))},delay:function ko(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?Mo:Ao)(n,e)):Gt(this.node(),n).delay},duration:function No(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?Io:So)(n,e)):Gt(this.node(),n).duration},ease:function Lo(e){var n=this._id;return arguments.length?this.each(Oo(n,e)):Gt(this.node(),n).ease},end:function ss(){var e,n,r=this,h=r._id,v=r.size();return new Promise(function(b,E){var A={value:E},N={value:function(){0==--v&&b()}};r.each(function(){var Z=Yt(this,h),R=Z.on;R!==e&&((n=(e=R).copy())._.cancel.push(A),n._.interrupt.push(A),n._.end.push(N)),Z.on=n})})}};var Cn={time:null,delay:0,duration:250,ease:function hs(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function ls(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))return Cn.time=le(),Cn;return r}we.prototype.interrupt=function Ri(e){return this.each(function(){!function Hi(e,n){var h,v,E,r=e.__transition,b=!0;if(r){for(E in n=null==n?null:n+"",r)(h=r[E]).name===n?(v=h.state>2&&h.state<5,h.state=6,h.timer.stop(),h.on.call(v?"interrupt":"cancel",e,e.__data__,h.index,h.group),delete r[E]):b=!1;b&&delete e.__transition}}(this,e)})},we.prototype.transition=function cs(e){var n,r;e instanceof jt?(n=e._id,e=e._name):(n=xr(),(r=Cn).time=le(),e=null==e?null:e+"");for(var h=this._groups,v=h.length,b=0;b<v;++b)for(var N,E=h[b],A=E.length,Z=0;Z<A;++Z)(N=E[Z])&&qe(N,e,n,Z,E,r||ls(N,n));return new jt(h,this._parents,e,n)};var _r=o(77579),wr=o(50727),br=o(69751),Er=o(39646),ds=o(54968),ps=o(50590),gs=o(78372);"function"==typeof Symbol&&Symbol.iterator;Math.cos,Math.sin,Math.PI;function Es(e){return typeof e>"u"}Math.tan;function Tr(e){return"matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")"}function As(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)}function ks(e){return Array.isArray(e)?e:Array.from(e)}function Oe(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var h=function(J,j){return{a:J.a*j.a+J.c*j.b,c:J.a*j.c+J.c*j.d,e:J.a*j.e+J.c*j.f+J.e,b:J.b*j.a+J.d*j.b,d:J.b*j.c+J.d*j.d,f:J.b*j.e+J.d*j.f+J.f}};switch((n=Array.isArray(n[0])?n[0]:n).length){case 0:throw new Error("no matrices provided");case 1:return n[0];case 2:return h(n[0],n[1]);default:var v=n,b=ks(v),E=b[0],A=b[1],N=b.slice(2),Z=h(E,A);return Oe.apply(void 0,[Z].concat(As(N)))}}function Mr(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e,b:0,d:1,f:n}}class Ar extends Map{constructor(n,r=Sr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),null!=n)for(const[h,v]of n)this.set(h,v)}get(n){return super.get(Tn(this,n))}has(n){return super.has(Tn(this,n))}set(n,r){return super.set(kr(this,n),r)}delete(n){return super.delete(Ir(this,n))}}class Eu extends Set{constructor(n,r=Sr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),null!=n)for(const h of n)this.add(h)}has(n){return super.has(Tn(this,n))}add(n){return super.add(kr(this,n))}delete(n){return super.delete(Ir(this,n))}}function Tn({_intern:e,_key:n},r){const h=n(r);return e.has(h)?e.get(h):r}function kr({_intern:e,_key:n},r){const h=n(r);return e.has(h)?e.get(h):(e.set(h,r),r)}function Ir({_intern:e,_key:n},r){const h=n(r);return e.has(h)&&(r=e.get(h),e.delete(h)),r}function Sr(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Ss(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e)}return this}const Nr=Symbol("implicit");function Or(){var e=new Ar,n=[],r=[],h=Nr;function v(b){let E=e.get(b);if(void 0===E){if(h!==Nr)return h;e.set(b,E=n.push(b)-1)}return r[E%r.length]}return v.domain=function(b){if(!arguments.length)return n.slice();n=[],e=new Ar;for(const E of b)e.has(E)||e.set(E,n.push(E)-1);return v},v.range=function(b){return arguments.length?(r=Array.from(b),v):r.slice()},v.unknown=function(b){return arguments.length?(h=b,v):h},v.copy=function(){return Or(n,r).unknown(h)},Ss.apply(v,arguments),v}var pe=o(59695);function Ns(e,n){var r;function h(){var v,E,b=r.length,A=0,N=0;for(v=0;v<b;++v)A+=(E=r[v]).x,N+=E.y;for(A=A/b-e,N=N/b-n,v=0;v<b;++v)(E=r[v]).x-=A,E.y-=N}return null==e&&(e=0),null==n&&(n=0),h.initialize=function(v){r=v},h.x=function(v){return arguments.length?(e=+v,h):e},h.y=function(v){return arguments.length?(n=+v,h):n},h}function Mt(e){return function(){return e}}function Kt(){return 1e-6*(Math.random()-.5)}function Lr(e,n,r,h){if(isNaN(n)||isNaN(r))return e;var v,J,j,rt,tt,at,lt,ft,xt,b=e._root,E={data:h},A=e._x0,N=e._y0,Z=e._x1,R=e._y1;if(!b)return e._root=E,e;for(;b.length;)if((at=n>=(J=(A+Z)/2))?A=J:Z=J,(lt=r>=(j=(N+R)/2))?N=j:R=j,v=b,!(b=b[ft=lt<<1|at]))return v[ft]=E,e;if(rt=+e._x.call(null,b.data),tt=+e._y.call(null,b.data),n===rt&&r===tt)return E.next=b,v?v[ft]=E:e._root=E,e;do{v=v?v[ft]=new Array(4):e._root=new Array(4),(at=n>=(J=(A+Z)/2))?A=J:Z=J,(lt=r>=(j=(N+R)/2))?N=j:R=j}while((ft=lt<<1|at)==(xt=(tt>=j)<<1|rt>=J));return v[xt]=b,v[ft]=E,e}function Nt(e,n,r,h,v){this.node=e,this.x0=n,this.y0=r,this.x1=h,this.y1=v}function zs(e){return e[0]}function js(e){return e[1]}function Mn(e,n,r){var h=new An(n??zs,r??js,NaN,NaN,NaN,NaN);return null==e?h:h.addAll(e)}function An(e,n,r,h,v,b){this._x=e,this._y=n,this._x0=r,this._y0=h,this._x1=v,this._y1=b,this._root=void 0}function Fr(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Ot=Mn.prototype=An.prototype;function Js(e){return e.x+e.vx}function Xs(e){return e.y+e.vy}function Pr(e){var n,r,h=1,v=1;function b(){for(var N,R,J,j,rt,tt,at,Z=n.length,lt=0;lt<v;++lt)for(R=Mn(n,Js,Xs).visitAfter(E),N=0;N<Z;++N)J=n[N],tt=r[J.index],at=tt*tt,j=J.x+J.vx,rt=J.y+J.vy,R.visit(ft);function ft(xt,pt,Et,Ct,Lt){var At=xt.data,Zt=xt.r,kt=tt+Zt;if(!At)return pt>j+kt||Ct<j-kt||Et>rt+kt||Lt<rt-kt;if(At.index>J.index){var qt=j-At.x-At.vx,te=rt-At.y-At.vy,Jt=qt*qt+te*te;Jt<kt*kt&&(0===qt&&(Jt+=(qt=Kt())*qt),0===te&&(Jt+=(te=Kt())*te),Jt=(kt-(Jt=Math.sqrt(Jt)))/Jt*h,J.vx+=(qt*=Jt)*(kt=(Zt*=Zt)/(at+Zt)),J.vy+=(te*=Jt)*kt,At.vx-=qt*(kt=1-kt),At.vy-=te*kt)}}}function E(N){if(N.data)return N.r=r[N.data.index];for(var Z=N.r=0;Z<4;++Z)N[Z]&&N[Z].r>N.r&&(N.r=N[Z].r)}function A(){if(n){var N,R,Z=n.length;for(r=new Array(Z),N=0;N<Z;++N)R=n[N],r[R.index]=+e(R,N,n)}}return"function"!=typeof e&&(e=Mt(null==e?1:+e)),b.initialize=function(N){n=N,A()},b.iterations=function(N){return arguments.length?(v=+N,b):v},b.strength=function(N){return arguments.length?(h=+N,b):h},b.radius=function(N){return arguments.length?(e="function"==typeof N?N:Mt(+N),A(),b):e},b}Ot.copy=function(){var r,h,e=new An(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return e;if(!n.length)return e._root=Fr(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var v=0;v<4;++v)(h=n.source[v])&&(h.length?r.push({source:h,target:n.target[v]=new Array(4)}):n.target[v]=Fr(h));return e},Ot.add=function Os(e){var n=+this._x.call(null,e),r=+this._y.call(null,e);return Lr(this.cover(n,r),n,r,e)},Ot.addAll=function Ls(e){var n,r,v,b,h=e.length,E=new Array(h),A=new Array(h),N=1/0,Z=1/0,R=-1/0,J=-1/0;for(r=0;r<h;++r)isNaN(v=+this._x.call(null,n=e[r]))||isNaN(b=+this._y.call(null,n))||(E[r]=v,A[r]=b,v<N&&(N=v),v>R&&(R=v),b<Z&&(Z=b),b>J&&(J=b));if(N>R||Z>J)return this;for(this.cover(N,Z).cover(R,J),r=0;r<h;++r)Lr(this,E[r],A[r],e[r]);return this},Ot.cover=function Fs(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,h=this._y0,v=this._x1,b=this._y1;if(isNaN(r))v=(r=Math.floor(e))+1,b=(h=Math.floor(n))+1;else{for(var N,Z,E=v-r,A=this._root;r>e||e>=v||h>n||n>=b;)switch(Z=(n<h)<<1|e<r,N=new Array(4),N[Z]=A,A=N,E*=2,Z){case 0:v=r+E,b=h+E;break;case 1:r=v-E,b=h+E;break;case 2:v=r+E,h=b-E;break;case 3:r=v-E,h=b-E}this._root&&this._root.length&&(this._root=A)}return this._x0=r,this._y0=h,this._x1=v,this._y1=b,this},Ot.data=function Ps(){var e=[];return this.visit(function(n){if(!n.length)do{e.push(n.data)}while(n=n.next)}),e},Ot.extent=function Ds(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ot.find=function Gs(e,n,r){var h,E,A,N,Z,tt,at,v=this._x0,b=this._y0,R=this._x1,J=this._y1,j=[],rt=this._root;for(rt&&j.push(new Nt(rt,v,b,R,J)),null==r?r=1/0:(v=e-r,b=n-r,R=e+r,J=n+r,r*=r);tt=j.pop();)if(!(!(rt=tt.node)||(E=tt.x0)>R||(A=tt.y0)>J||(N=tt.x1)<v||(Z=tt.y1)<b))if(rt.length){var lt=(E+N)/2,ft=(A+Z)/2;j.push(new Nt(rt[3],lt,ft,N,Z),new Nt(rt[2],E,ft,lt,Z),new Nt(rt[1],lt,A,N,ft),new Nt(rt[0],E,A,lt,ft)),(at=(n>=ft)<<1|e>=lt)&&(tt=j[j.length-1],j[j.length-1]=j[j.length-1-at],j[j.length-1-at]=tt)}else{var xt=e-+this._x.call(null,rt.data),pt=n-+this._y.call(null,rt.data),Et=xt*xt+pt*pt;if(Et<r){var Ct=Math.sqrt(r=Et);v=e-Ct,b=n-Ct,R=e+Ct,J=n+Ct,h=rt.data}}return h},Ot.remove=function Zs(e){if(isNaN(R=+this._x.call(null,e))||isNaN(J=+this._y.call(null,e)))return this;var n,h,v,b,R,J,j,rt,tt,at,lt,ft,r=this._root,E=this._x0,A=this._y0,N=this._x1,Z=this._y1;if(!r)return this;if(r.length)for(;;){if((tt=R>=(j=(E+N)/2))?E=j:N=j,(at=J>=(rt=(A+Z)/2))?A=rt:Z=rt,n=r,!(r=r[lt=at<<1|tt]))return this;if(!r.length)break;(n[lt+1&3]||n[lt+2&3]||n[lt+3&3])&&(h=n,ft=lt)}for(;r.data!==e;)if(v=r,!(r=r.next))return this;return(b=r.next)&&delete r.next,v?(b?v.next=b:delete v.next,this):n?(b?n[lt]=b:delete n[lt],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(h?h[ft]=r:this._root=r),this):(this._root=b,this)},Ot.removeAll=function Us(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},Ot.root=function Bs(){return this._root},Ot.size=function Hs(){var e=0;return this.visit(function(n){if(!n.length)do{++e}while(n=n.next)}),e},Ot.visit=function Rs(e){var r,v,b,E,A,N,n=[],h=this._root;for(h&&n.push(new Nt(h,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(h=r.node,b=r.x0,E=r.y0,A=r.x1,N=r.y1)&&h.length){var Z=(b+A)/2,R=(E+N)/2;(v=h[3])&&n.push(new Nt(v,Z,R,A,N)),(v=h[2])&&n.push(new Nt(v,b,R,Z,N)),(v=h[1])&&n.push(new Nt(v,Z,E,A,R)),(v=h[0])&&n.push(new Nt(v,b,E,Z,R))}return this},Ot.visitAfter=function Vs(e){var h,n=[],r=[];for(this._root&&n.push(new Nt(this._root,this._x0,this._y0,this._x1,this._y1));h=n.pop();){var v=h.node;if(v.length){var b,E=h.x0,A=h.y0,N=h.x1,Z=h.y1,R=(E+N)/2,J=(A+Z)/2;(b=v[0])&&n.push(new Nt(b,E,A,R,J)),(b=v[1])&&n.push(new Nt(b,R,A,N,J)),(b=v[2])&&n.push(new Nt(b,E,J,R,Z)),(b=v[3])&&n.push(new Nt(b,R,J,N,Z))}r.push(h)}for(;h=r.pop();)e(h.node,h.x0,h.y0,h.x1,h.y1);return this},Ot.x=function Ys(e){return arguments.length?(this._x=e,this):this._x},Ot.y=function $s(e){return arguments.length?(this._y=e,this):this._y};var Dr=o(88097);function Ws(e){return e.index}function Gr(e,n){var r=e.get(n);if(!r)throw new Error("missing: "+n);return r}function Zr(e){var h,b,E,A,N,n=Ws,r=function R(at){return 1/Math.min(A[at.source.index],A[at.target.index])},v=Mt(30),Z=1;function J(at){for(var lt=0,ft=e.length;lt<Z;++lt)for(var pt,Et,Ct,Lt,At,Zt,kt,xt=0;xt<ft;++xt)Et=(pt=e[xt]).source,Lt=(Ct=pt.target).x+Ct.vx-Et.x-Et.vx||Kt(),At=Ct.y+Ct.vy-Et.y-Et.vy||Kt(),Lt*=Zt=((Zt=Math.sqrt(Lt*Lt+At*At))-b[xt])/Zt*at*h[xt],At*=Zt,Ct.vx-=Lt*(kt=N[xt]),Ct.vy-=At*kt,Et.vx+=Lt*(kt=1-kt),Et.vy+=At*kt}function j(){if(E){var at,pt,lt=E.length,ft=e.length,xt=(0,Dr.UI)(E,n);for(at=0,A=new Array(lt);at<ft;++at)(pt=e[at]).index=at,"object"!=typeof pt.source&&(pt.source=Gr(xt,pt.source)),"object"!=typeof pt.target&&(pt.target=Gr(xt,pt.target)),A[pt.source.index]=(A[pt.source.index]||0)+1,A[pt.target.index]=(A[pt.target.index]||0)+1;for(at=0,N=new Array(ft);at<ft;++at)pt=e[at],N[at]=A[pt.source.index]/(A[pt.source.index]+A[pt.target.index]);h=new Array(ft),rt(),b=new Array(ft),tt()}}function rt(){if(E)for(var at=0,lt=e.length;at<lt;++at)h[at]=+r(e[at],at,e)}function tt(){if(E)for(var at=0,lt=e.length;at<lt;++at)b[at]=+v(e[at],at,e)}return null==e&&(e=[]),J.initialize=function(at){E=at,j()},J.links=function(at){return arguments.length?(e=at,j(),J):e},J.id=function(at){return arguments.length?(n=at,J):n},J.iterations=function(at){return arguments.length?(Z=+at,J):Z},J.strength=function(at){return arguments.length?(r="function"==typeof at?at:Mt(+at),rt(),J):r},J.distance=function(at){return arguments.length?(v="function"==typeof at?at:Mt(+at),tt(),J):v},J}function Qs(e){return e.x}function Ks(e){return e.y}var ta=Math.PI*(3-Math.sqrt(5));function Ur(e){var n,r=1,h=.001,v=1-Math.pow(h,1/300),b=0,E=.6,A=(0,Dr.UI)(),N=We(R),Z=ln("tick","end");function R(){J(),Z.call("tick",n),r<h&&(N.stop(),Z.call("end",n))}function J(tt){var at,ft,lt=e.length;void 0===tt&&(tt=1);for(var xt=0;xt<tt;++xt)for(r+=(b-r)*v,A.each(function(pt){pt(r)}),at=0;at<lt;++at)null==(ft=e[at]).fx?ft.x+=ft.vx*=E:(ft.x=ft.fx,ft.vx=0),null==ft.fy?ft.y+=ft.vy*=E:(ft.y=ft.fy,ft.vy=0);return n}function j(){for(var lt,tt=0,at=e.length;tt<at;++tt){if((lt=e[tt]).index=tt,null!=lt.fx&&(lt.x=lt.fx),null!=lt.fy&&(lt.y=lt.fy),isNaN(lt.x)||isNaN(lt.y)){var ft=10*Math.sqrt(tt),xt=tt*ta;lt.x=ft*Math.cos(xt),lt.y=ft*Math.sin(xt)}(isNaN(lt.vx)||isNaN(lt.vy))&&(lt.vx=lt.vy=0)}}function rt(tt){return tt.initialize&&tt.initialize(e),tt}return null==e&&(e=[]),j(),n={tick:J,restart:function(){return N.restart(R),n},stop:function(){return N.stop(),n},nodes:function(tt){return arguments.length?(e=tt,j(),A.each(rt),n):e},alpha:function(tt){return arguments.length?(r=+tt,n):r},alphaMin:function(tt){return arguments.length?(h=+tt,n):h},alphaDecay:function(tt){return arguments.length?(v=+tt,n):+v},alphaTarget:function(tt){return arguments.length?(b=+tt,n):b},velocityDecay:function(tt){return arguments.length?(E=1-tt,n):1-E},force:function(tt,at){return arguments.length>1?(null==at?A.remove(tt):A.set(tt,rt(at)),n):A.get(tt)},find:function(tt,at,lt){var pt,Et,Ct,Lt,At,ft=0,xt=e.length;for(null==lt?lt=1/0:lt*=lt,ft=0;ft<xt;++ft)(Ct=(pt=tt-(Lt=e[ft]).x)*pt+(Et=at-Lt.y)*Et)<lt&&(At=Lt,lt=Ct);return At},on:function(tt,at){return arguments.length>1?(Z.on(tt,at),n):Z.on(tt)}}}function Br(){var e,n,r,v,h=Mt(-30),b=1,E=1/0,A=.81;function N(j){var rt,tt=e.length,at=Mn(e,Qs,Ks).visitAfter(R);for(r=j,rt=0;rt<tt;++rt)n=e[rt],at.visit(J)}function Z(){if(e){var j,tt,rt=e.length;for(v=new Array(rt),j=0;j<rt;++j)tt=e[j],v[tt.index]=+h(tt,j,e)}}function R(j){var tt,at,ft,xt,pt,rt=0,lt=0;if(j.length){for(ft=xt=pt=0;pt<4;++pt)(tt=j[pt])&&(at=Math.abs(tt.value))&&(rt+=tt.value,lt+=at,ft+=at*tt.x,xt+=at*tt.y);j.x=ft/lt,j.y=xt/lt}else{(tt=j).x=tt.data.x,tt.y=tt.data.y;do{rt+=v[tt.data.index]}while(tt=tt.next)}j.value=rt}function J(j,rt,tt,at){if(!j.value)return!0;var lt=j.x-n.x,ft=j.y-n.y,xt=at-rt,pt=lt*lt+ft*ft;if(xt*xt/A<pt)return pt<E&&(0===lt&&(pt+=(lt=Kt())*lt),0===ft&&(pt+=(ft=Kt())*ft),pt<b&&(pt=Math.sqrt(b*pt)),n.vx+=lt*j.value*r/pt,n.vy+=ft*j.value*r/pt),!0;if(!(j.length||pt>=E)){(j.data!==n||j.next)&&(0===lt&&(pt+=(lt=Kt())*lt),0===ft&&(pt+=(ft=Kt())*ft),pt<b&&(pt=Math.sqrt(b*pt)));do{j.data!==n&&(xt=v[j.data.index]*r/pt,n.vx+=lt*xt,n.vy+=ft*xt)}while(j=j.next)}}return N.initialize=function(j){e=j,Z()},N.strength=function(j){return arguments.length?(h="function"==typeof j?j:Mt(+j),Z(),N):h},N.distanceMin=function(j){return arguments.length?(b=j*j,N):Math.sqrt(b)},N.distanceMax=function(j){return arguments.length?(E=j*j,N):Math.sqrt(E)},N.theta=function(j){return arguments.length?(A=j*j,N):Math.sqrt(A)},N}function ea(e,n,r){var h,b,E,v=Mt(.1);function A(Z){for(var R=0,J=h.length;R<J;++R){var j=h[R],rt=j.x-n||1e-6,tt=j.y-r||1e-6,at=Math.sqrt(rt*rt+tt*tt),lt=(E[R]-at)*b[R]*Z/at;j.vx+=rt*lt,j.vy+=tt*lt}}function N(){if(h){var Z,R=h.length;for(b=new Array(R),E=new Array(R),Z=0;Z<R;++Z)E[Z]=+e(h[Z],Z,h),b[Z]=isNaN(E[Z])?0:+v(h[Z],Z,h)}}return"function"!=typeof e&&(e=Mt(+e)),null==n&&(n=0),null==r&&(r=0),A.initialize=function(Z){h=Z,N()},A.strength=function(Z){return arguments.length?(v="function"==typeof Z?Z:Mt(+Z),N(),A):v},A.radius=function(Z){return arguments.length?(e="function"==typeof Z?Z:Mt(+Z),N(),A):e},A.x=function(Z){return arguments.length?(n=+Z,A):n},A.y=function(Z){return arguments.length?(r=+Z,A):r},A}function na(e){var r,h,v,n=Mt(.1);function b(A){for(var R,N=0,Z=r.length;N<Z;++N)(R=r[N]).vx+=(v[N]-R.x)*h[N]*A}function E(){if(r){var A,N=r.length;for(h=new Array(N),v=new Array(N),A=0;A<N;++A)h[A]=isNaN(v[A]=+e(r[A],A,r))?0:+n(r[A],A,r)}}return"function"!=typeof e&&(e=Mt(null==e?0:+e)),b.initialize=function(A){r=A,E()},b.strength=function(A){return arguments.length?(n="function"==typeof A?A:Mt(+A),E(),b):n},b.x=function(A){return arguments.length?(e="function"==typeof A?A:Mt(+A),E(),b):e},b}function ra(e){var r,h,v,n=Mt(.1);function b(A){for(var R,N=0,Z=r.length;N<Z;++N)(R=r[N]).vy+=(v[N]-R.y)*h[N]*A}function E(){if(r){var A,N=r.length;for(h=new Array(N),v=new Array(N),A=0;A<N;++A)h[A]=isNaN(v[A]=+e(r[A],A,r))?0:+n(r[A],A,r)}}return"function"!=typeof e&&(e=Mt(null==e?0:+e)),b.initialize=function(A){r=A,E()},b.strength=function(A){return arguments.length?(n="function"==typeof A?A:Mt(+A),E(),b):n},b.y=function(A){return arguments.length?(e="function"==typeof A?A:Mt(+A),E(),b):e},b}var ia=o(67824);function oa(e,n,r){var h=new Me,v=n;return null==n?(h.restart(e,n,r),h):(n=+n,r=null==r?le():+r,h.restart(function b(E){E+=v,h.restart(b,v+=n,r),e(E)},n,r),h)}const sa=["linkTemplate"],aa=["nodeTemplate"],ua=["clusterTemplate"],ha=["defsTemplate"],la=["miniMapNodeTemplate"],ca=["nodeElement"],fa=["linkElement"];function da(e,n){if(1&e&&(t.O4$(),t.GkF(0,14)),2&e){const r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.defsTemplate)}}function pa(e,n){if(1&e&&(t.O4$(),t._UZ(0,"path",15)),2&e){const r=n.$implicit;t.uIk("d",r.textPath)("id",r.id)}}const Le=function(e){return{$implicit:e}};function ga(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,h=t.oxw(2);t.Q6J("ngTemplateOutlet",h.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,Le,r))}}function ma(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA()()),2&e){const r=t.oxw().$implicit;t.xp6(1),t.uIk("width",r.dimension.width)("height",r.dimension.height)("fill",null==r.data?null:r.data.color),t.xp6(1),t.uIk("x",10)("y",r.dimension.height/2),t.xp6(1),t.hij(" ",r.label," ")}}function va(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const b=t.CHM(r).$implicit,E=t.oxw(2);return t.KtG(E.onClick(b))}),t.YNc(2,ga,1,4,"ng-container",18),t.YNc(3,ma,4,6,"g",19),t.qZA()}if(2&e){const r=n.$implicit,h=t.oxw(2);t.ekj("old-node",h.animate&&h.oldClusters.has(r.id)),t.Q6J("id",r.id),t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",h.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!h.clusterTemplate)}}function ya(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,h=t.oxw(2);t.Q6J("ngTemplateOutlet",h.linkTemplate)("ngTemplateOutletContext",t.VKq(2,Le,r))}}function xa(e,n){if(1&e&&(t.O4$(),t._UZ(0,"path",26)),2&e){const r=t.oxw().$implicit;t.uIk("d",r.line)}}function _a(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,ya,1,4,"ng-container",18),t.YNc(3,xa,1,1,"path",25),t.qZA()),2&e){const r=n.$implicit,h=t.oxw(2);t.Q6J("id",r.id),t.xp6(2),t.Q6J("ngIf",h.linkTemplate),t.xp6(1),t.Q6J("ngIf",!h.linkTemplate)}}function wa(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,h=t.oxw(2);t.Q6J("ngTemplateOutlet",h.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Le,r))}}function ba(e,n){if(1&e&&(t.O4$(),t._UZ(0,"circle",30)),2&e){const r=t.oxw().$implicit;t.uIk("cx",r.dimension.width/2)("cy",r.dimension.height/2)("fill",null==r.data?null:r.data.color)}}function Ea(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const b=t.CHM(r).$implicit,E=t.oxw(2);return t.KtG(E.onClick(b))})("mousedown",function(v){const E=t.CHM(r).$implicit,A=t.oxw(2);return t.KtG(A.onNodeMouseDown(v,E))}),t.YNc(2,wa,1,4,"ng-container",18),t.YNc(3,ba,1,3,"circle",29),t.qZA()}if(2&e){const r=n.$implicit,h=t.oxw(2);t.ekj("old-node",h.animate&&h.oldNodes.has(r.id)),t.Q6J("id",r.id),t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",h.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!h.nodeTemplate)}}function Ca(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(v){t.CHM(r);const b=t.oxw();return t.KtG(b.onTouchStart(v))})("touchend",function(v){t.CHM(r);const b=t.oxw();return t.KtG(b.onTouchEnd(v))}),t.TgZ(1,"defs"),t.YNc(2,da,1,1,"ng-container",5),t.YNc(3,pa,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.isPanning=!0)}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,va,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,_a,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,Ea,4,6,"g",13),t.qZA()()}if(2&e){const r=t.oxw();t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",r.defsTemplate),t.xp6(1),t.Q6J("ngForOf",r.graph.edges),t.xp6(1),t.uIk("width",100*r.dims.width)("height",100*r.dims.height)("transform","translate("+50*(-r.dims.width||0)+","+50*(-r.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",r.graph.clusters)("ngForTrackBy",r.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",r.graph.edges)("ngForTrackBy",r.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",r.graph.nodes)("ngForTrackBy",r.trackNodeBy)}}function Ta(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,h=t.oxw(2);t.Q6J("ngTemplateOutlet",h.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,Le,r))}}function Ma(e,n){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const r=t.oxw().$implicit,h=t.oxw(2);t.Q6J("ngTemplateOutlet",h.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Le,r))}}function Aa(e,n){if(1&e&&(t.O4$(),t._UZ(0,"circle",30)),2&e){const r=t.oxw().$implicit,h=t.oxw(2);t.uIk("cx",r.dimension.width/2/h.minimapScaleCoefficient)("cy",r.dimension.height/2/h.minimapScaleCoefficient)("fill",null==r.data?null:r.data.color)}}function ka(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,Ta,1,4,"ng-container",18),t.YNc(3,Ma,1,4,"ng-container",18),t.YNc(4,Aa,1,3,"circle",29),t.qZA()),2&e){const r=n.$implicit,h=t.oxw(2);t.ekj("old-node",h.animate&&h.oldNodes.has(r.id)),t.Q6J("id",r.id),t.uIk("transform",r.transform),t.xp6(2),t.Q6J("ngIf",h.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!h.miniMapNodeTemplate&&h.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!h.nodeTemplate&&!h.miniMapNodeTemplate)}}function Ia(e,n){if(1&e){const r=t.EpF();t.O4$(),t.TgZ(0,"g",31)(1,"rect",32),t.NdJ("mousedown",function(v){t.CHM(r);const b=t.oxw();return t.KtG(b.onMinimapPanTo(v))}),t.qZA(),t.TgZ(2,"g")(3,"g",33),t.YNc(4,ka,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.onMinimapDragMouseDown())}),t.qZA()()()}if(2&e){const r=t.oxw();t.uIk("transform",r.minimapTransform)("clip-path","url(#"+r.minimapClipPathId+")"),t.xp6(1),t.uIk("width",r.graphDims.width/r.minimapScaleCoefficient)("height",r.graphDims.height/r.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-r.minimapOffsetX/r.minimapScaleCoefficient+"px,"+-r.minimapOffsetY/r.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/r.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",r.graph.nodes)("ngForTrackBy",r.trackNodeBy),t.xp6(1),t.ekj("panning",r.isMinimapPanning),t.uIk("transform","translate("+r.panOffsetX/r.zoomLevel/-r.minimapScaleCoefficient+","+r.panOffsetY/r.zoomLevel/-r.minimapScaleCoefficient+")")("width",r.width/r.minimapScaleCoefficient/r.zoomLevel)("height",r.height/r.minimapScaleCoefficient/r.zoomLevel)}}const Hr={};function $t(){let e=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return e=`a${e}`,Hr[e]?$t():(Hr[e]=!0,e)}var Fe,e,Pe;function Na(e,n,r){r=r||{};let h,v,b,E=null,A=0;function N(){A=!1===r.leading?0:+new Date,E=null,b=e.apply(h,v)}return function(...Z){const R=+new Date;!A&&!1===r.leading&&(A=R);const J=n-(R-A);return h=this,v=Z,J<=0?(clearTimeout(E),E=null,A=R,b=e.apply(h,v)):!E&&!1!==r.trailing&&(E=setTimeout(N,J)),b}}(e=Fe||(Fe={})).Both="both",e.Horizontal="horizontal",e.Vertical="vertical",function(e){e.UpperLeft="UpperLeft",e.UpperRight="UpperRight"}(Pe||(Pe={}));const Rr=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class La{constructor(n,r,h){"string"==typeof n&&(n=Rr.find(v=>v.name===n)),this.colorDomain=n.domain,this.domain=r,this.customColors=h,this.scale=this.generateColorScheme(n,this.domain)}generateColorScheme(n,r){return"string"==typeof n&&(n=Rr.find(h=>h.name===n)),Or().range(n.domain).domain(r)}getColor(n){if(null==n)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(n);const r=n.toString();let h;return this.customColors&&this.customColors.length>0&&(h=this.customColors.find(v=>v.name.toLowerCase()===r.toLowerCase())),h?h.value:this.scale(n)}}class De{constructor(n,r){this.element=n,this.zone=r,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const n=()=>{if(!this.element)return;const{offsetHeight:r,offsetWidth:h}=this.element.nativeElement;r&&h?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n())})}}var oe,Vr;De.\u0275fac=function(n){return new(n||De)(t.Y36(t.SBq),t.Y36(t.R0b))},De.\u0275dir=t.lG2({type:De,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),function(e){e.LEFT_TO_RIGHT="LR",e.RIGHT_TO_LEFT="RL",e.TOP_TO_BOTTOM="TB",e.BOTTOM_TO_TOM="BT"}(oe||(oe={})),function(e){e.CENTER="C",e.UP_LEFT="UL",e.UP_RIGHT="UR",e.DOWN_LEFT="DL",e.DOWN_RIGHT="DR"}(Vr||(Vr={}));function ge(e){return"string"==typeof e?{id:e,x:0,y:0}:e}function Yr(e,n){return"number"==typeof n?e[n]:n}const jr={dagre:class Pa{constructor(){this.defaultSettings={orientation:oe.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(n){this.createDagreGraph(n),pe.layout(this.dagreGraph),n.edgeLabels=this.dagreGraph._edgeLabels;for(const r in this.dagreGraph._nodes){const h=this.dagreGraph._nodes[r],v=n.nodes.find(b=>b.id===h.id);v.position={x:h.x,y:h.y},v.dimension={width:h.width,height:h.height}}return n}updateEdge(n,r){const h=n.nodes.find(N=>N.id===r.source),v=n.nodes.find(N=>N.id===r.target),b=h.position.y<=v.position.y?-1:1,E={x:h.position.x,y:h.position.y-b*(h.dimension.height/2)},A={x:v.position.x,y:v.position.y+b*(v.dimension.height/2)};return r.points=[E,A],n}createDagreGraph(n){const r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new pe.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=n.nodes.map(h=>{const v=Object.assign({},h);return v.width=h.dimension.width,v.height=h.dimension.height,v.x=h.position.x,v.y=h.position.y,v}),this.dagreEdges=n.edges.map(h=>{const v=Object.assign({},h);return v.id||(v.id=$t()),v});for(const h of this.dagreNodes)h.width||(h.width=20),h.height||(h.height=30),this.dagreGraph.setNode(h.id,h);for(const h of this.dagreEdges)r.multigraph?this.dagreGraph.setEdge(h.source,h.target,h,h.id):this.dagreGraph.setEdge(h.source,h.target);return this.dagreGraph}},dagreCluster:class Da{constructor(){this.defaultSettings={orientation:oe.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(n){this.createDagreGraph(n),pe.layout(this.dagreGraph),n.edgeLabels=this.dagreGraph._edgeLabels;const r=h=>{const v=this.dagreGraph._nodes[h.id];return{...h,position:{x:v.x,y:v.y},dimension:{width:v.width,height:v.height}}};return n.clusters=(n.clusters||[]).map(r),n.nodes=n.nodes.map(r),n}updateEdge(n,r){const h=n.nodes.find(N=>N.id===r.source),v=n.nodes.find(N=>N.id===r.target),b=h.position.y<=v.position.y?-1:1,E={x:h.position.x,y:h.position.y-b*(h.dimension.height/2)},A={x:v.position.x,y:v.position.y+b*(v.dimension.height/2)};return r.points=[E,A],n}createDagreGraph(n){const r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new pe.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=n.nodes.map(h=>{const v=Object.assign({},h);return v.width=h.dimension.width,v.height=h.dimension.height,v.x=h.position.x,v.y=h.position.y,v}),this.dagreClusters=n.clusters||[],this.dagreEdges=n.edges.map(h=>{const v=Object.assign({},h);return v.id||(v.id=$t()),v});for(const h of this.dagreNodes)this.dagreGraph.setNode(h.id,h);for(const h of this.dagreClusters)this.dagreGraph.setNode(h.id,h),h.childNodeIds.forEach(v=>{this.dagreGraph.setParent(v,h.id)});for(const h of this.dagreEdges)r.multigraph?this.dagreGraph.setEdge(h.source,h.target,h,h.id):this.dagreGraph.setEdge(h.source,h.target);return this.dagreGraph}},dagreNodesOnly:class Za{constructor(){this.defaultSettings={orientation:oe.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(n){this.createDagreGraph(n),pe.layout(this.dagreGraph),n.edgeLabels=this.dagreGraph._edgeLabels;for(const r in this.dagreGraph._nodes){const h=this.dagreGraph._nodes[r],v=n.nodes.find(b=>b.id===h.id);v.position={x:h.x,y:h.y},v.dimension={width:h.width,height:h.height}}for(const r of n.edges)this.updateEdge(n,r);return n}updateEdge(n,r){const h=n.nodes.find(tt=>tt.id===r.source),v=n.nodes.find(tt=>tt.id===r.target),b="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",E="y"===b?"x":"y",A="y"===b?"height":"width",N=h.position[b]<=v.position[b]?-1:1,Z={[E]:h.position[E],[b]:h.position[b]-N*(h.dimension[A]/2)},R={[E]:v.position[E],[b]:v.position[b]+N*(v.dimension[A]/2)},J=this.settings.curveDistance||this.defaultSettings.curveDistance;r.points=[Z,{[E]:Z[E],[b]:Z[b]-N*J},{[E]:R[E],[b]:R[b]+N*J},R];const j=`${r.source}\x01${r.target}\x01\0`,rt=n.edgeLabels[j];return rt&&(rt.points=r.points),n}createDagreGraph(n){const r=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new pe.graphlib.Graph({compound:r.compound,multigraph:r.multigraph}),this.dagreGraph.setGraph({rankdir:r.orientation,marginx:r.marginX,marginy:r.marginY,edgesep:r.edgePadding,ranksep:r.rankPadding,nodesep:r.nodePadding,align:r.align,acyclicer:r.acyclicer,ranker:r.ranker,multigraph:r.multigraph,compound:r.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=n.nodes.map(h=>{const v=Object.assign({},h);return v.width=h.dimension.width,v.height=h.dimension.height,v.x=h.position.x,v.y=h.position.y,v}),this.dagreEdges=n.edges.map(h=>{const v=Object.assign({},h);return v.id||(v.id=$t()),v});for(const h of this.dagreNodes)h.width||(h.width=20),h.height||(h.height=30),this.dagreGraph.setNode(h.id,h);for(const h of this.dagreEdges)r.multigraph?this.dagreGraph.setEdge(h.source,h.target,h,h.id):this.dagreGraph.setEdge(h.source,h.target);return this.dagreGraph}},d3ForceDirected:class Ua{constructor(){this.defaultSettings={force:Ur().force("charge",Br().strength(-150)).force("collide",Pr(5)),forceLink:Zr().id(n=>n.id).distance(()=>100)},this.settings={},this.outputGraph$=new _r.x}run(n){return this.inputGraph=n,this.d3Graph={nodes:[...this.inputGraph.nodes.map(r=>({...r}))],edges:[...this.inputGraph.edges.map(r=>({...r}))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(n,r){const h=Object.assign({},this.defaultSettings,this.settings);return h.force&&h.force.nodes(this.d3Graph.nodes).force("link",h.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(n){return this.outputGraph.nodes=this.d3Graph.nodes.map(r=>({...r,id:r.id||$t(),position:{x:r.x,y:r.y},dimension:{width:r.dimension&&r.dimension.width||20,height:r.dimension&&r.dimension.height||20},transform:`translate(${r.x-(r.dimension&&r.dimension.width||20)/2||0}, ${r.y-(r.dimension&&r.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(r=>({...r,source:ge(r.source).id,target:ge(r.target).id,points:[{x:ge(r.source).x,y:ge(r.source).y},{x:ge(r.target).x,y:ge(r.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(n,r){this.settings.force.alphaTarget(.3).restart();const h=this.d3Graph.nodes.find(v=>v.id===n.id);h&&(this.draggingStart={x:r.x-h.x,y:r.y-h.y},h.fx=r.x-this.draggingStart.x,h.fy=r.y-this.draggingStart.y)}onDrag(n,r){if(!n)return;const h=this.d3Graph.nodes.find(v=>v.id===n.id);h&&(h.fx=r.x-this.draggingStart.x,h.fy=r.y-this.draggingStart.y)}onDragEnd(n,r){if(!n)return;const h=this.d3Graph.nodes.find(v=>v.id===n.id);h&&(this.settings.force.alphaTarget(0),h.fx=void 0,h.fy=void 0)}},colaForceDirected:class Ba{constructor(){this.defaultSettings={force:(0,ia.d3adaptor)({...m,...s,...p}).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new _r.x}run(n){return this.inputGraph=n,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(r=>({...r,width:r.dimension?r.dimension.width:20,height:r.dimension?r.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(r=>({padding:5,groups:r.childNodeIds.map(h=>this.inputGraph.clusters.findIndex(v=>v.id===h)).filter(h=>h>=0),leaves:r.childNodeIds.map(h=>this.inputGraph.nodes.findIndex(v=>v.id===h)).filter(h=>h>=0)}))],links:[...this.inputGraph.edges.map(r=>{const h=this.inputGraph.nodes.findIndex(b=>r.source===b.id),v=this.inputGraph.nodes.findIndex(b=>r.target===b.id);if(-1!==h&&-1!==v)return{...r,source:h,target:v}}).filter(r=>!!r)],groupLinks:[...this.inputGraph.edges.map(r=>{const h=this.inputGraph.nodes.findIndex(b=>r.source===b.id),v=this.inputGraph.nodes.findIndex(b=>r.target===b.id);if(!(h>=0&&v>=0))return r}).filter(r=>!!r)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(n,r){const h=Object.assign({},this.defaultSettings,this.settings);return h.force&&h.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(n){return this.outputGraph.nodes=n.nodes.map(r=>({...r,id:r.id||$t(),position:{x:r.x,y:r.y},dimension:{width:r.dimension&&r.dimension.width||20,height:r.dimension&&r.dimension.height||20},transform:`translate(${r.x-(r.dimension&&r.dimension.width||20)/2||0}, ${r.y-(r.dimension&&r.dimension.height||20)/2||0})`})),this.outputGraph.edges=n.links.map(r=>{const h=Yr(n.nodes,r.source),v=Yr(n.nodes,r.target);return{...r,source:h.id,target:v.id,points:[h.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(h.bounds.cx(),h.bounds.cy())]}}).concat(n.groupLinks.map(r=>{const h=n.nodes.find(A=>A.id===r.source),v=n.nodes.find(A=>A.id===r.target),b=h||n.groups.find(A=>A.id===r.source),E=v||n.groups.find(A=>A.id===r.target);return{...r,source:b.id,target:E.id,points:[b.bounds.rayIntersection(E.bounds.cx(),E.bounds.cy()),E.bounds.rayIntersection(b.bounds.cx(),b.bounds.cy())]}})),this.outputGraph.clusters=n.groups.map((r,h)=>({...this.inputGraph.clusters[h],dimension:{width:r.bounds?r.bounds.width():20,height:r.bounds?r.bounds.height():20},position:{x:r.bounds?r.bounds.x+r.bounds.width()/2:0,y:r.bounds?r.bounds.y+r.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(n,r){const h=this.outputGraph.nodes.findIndex(b=>b.id===n.id),v=this.internalGraph.nodes[h];v&&(this.draggingStart={x:v.x-r.x,y:v.y-r.y},v.fixed=1,this.settings.force.start())}onDrag(n,r){if(!n)return;const h=this.outputGraph.nodes.findIndex(b=>b.id===n.id),v=this.internalGraph.nodes[h];v&&(v.x=this.draggingStart.x+r.x,v.y=this.draggingStart.y+r.y)}onDragEnd(n,r){if(!n)return;const h=this.outputGraph.nodes.findIndex(b=>b.id===n.id),v=this.internalGraph.nodes[h];v&&(v.fixed=0)}}};class se{getLayout(n){if(jr[n])return new jr[n];throw new Error(`Unknown layout type '${n}'`)}}se.\u0275fac=function(n){return new(n||se)},se.\u0275prov=t.Yz7({token:se,factory:se.\u0275fac});class Ge{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(n){this.mouseWheelFunc(n)}onMouseWheelFirefox(n){this.mouseWheelFunc(n)}onWheel(n){this.mouseWheelFunc(n)}onMouseWheelIE(n){this.mouseWheelFunc(n)}mouseWheelFunc(n){window.event&&(n=window.event);const r=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail||n.deltaY||n.deltaX)),h=n.wheelDelta?r>0:r<0,v=n.wheelDelta?r<0:r>0;h?this.mouseWheelUp.emit(n):v&&this.mouseWheelDown.emit(n),n.returnValue=!1,n.preventDefault&&n.preventDefault()}}Ge.\u0275fac=function(n){return new(n||Ge)},Ge.\u0275dir=t.lG2({type:Ge,selectors:[["","mouseWheel",""]],hostBindings:function(n,r){1&n&&t.NdJ("mousewheel",function(v){return r.onMouseWheelChrome(v)})("DOMMouseScroll",function(v){return r.onMouseWheelFirefox(v)})("wheel",function(v){return r.onWheel(v)})("onmousewheel",function(v){return r.onMouseWheelIE(v)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}});class ae{constructor(n,r,h,v){this.el=n,this.zone=r,this.cd=h,this.layoutService=v,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=Fe.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=Pe.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new wr.w0,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=b=>b.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(n){this.zoomTo(Number(n))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(n){this.panTo(Number(n),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(n){this.panTo(null,Number(n))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(n=>{this.panToNodeId(n)})),this.minimapClipPathId=`minimapClip${$t()}`}ngOnChanges(n){this.basicUpdate();const{layout:r,layoutSettings:h,nodes:v,clusters:b,links:E}=n;this.setLayout(this.layout),h&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(n){this.initialized=!1,n||(n="dagre"),"string"==typeof n&&(this.layout=this.layoutService.getLayout(n),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(n){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=n)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const n of this.subscriptions)n.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new De(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=Ti.beta(1)),this.zone.run(()=>{this.dims=function Fa({width:e,height:n}){let r=e,h=n;return r=Math.max(0,r),h=Math.max(0,h),{width:Math.floor(r),height:Math.floor(h)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new wr.w0;const n=r=>(r.meta||(r.meta={}),r.id||(r.id=$t()),r.dimension?r.meta.forceDimensions=void 0===r.meta.forceDimensions||r.meta.forceDimensions:(r.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},r.meta.forceDimensions=!1),r.position={x:0,y:0},r.data=r.data?r.data:{},r);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(n):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(n):[],edges:this.links.length>0?[...this.links].map(r=>(r.id||(r.id=$t()),r)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const n=this.layout.run(this.graph),r=n instanceof br.y?n:(0,Er.of)(n);this.graphSubscription.add(r.subscribe(h=>{this.graph=h,this.tick()})),0!==this.graph.nodes.length&&r.pipe((0,ps.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const n=new Set;this.graph.nodes.map(v=>{v.transform=`translate(${v.position.x-v.dimension.width/2||0}, ${v.position.y-v.dimension.height/2||0})`,v.data||(v.data={}),v.data.color=this.colors.getColor(this.groupResultsBy(v)),n.add(v.id)});const r=new Set;(this.graph.clusters||[]).map(v=>{v.transform=`translate(${v.position.x-v.dimension.width/2||0}, ${v.position.y-v.dimension.height/2||0})`,v.data||(v.data={}),v.data.color=this.colors.getColor(this.groupResultsBy(v)),r.add(v.id)}),setTimeout(()=>{this.oldNodes=n,this.oldClusters=r},500);const h=[];for(const v in this.graph.edgeLabels){const b=this.graph.edgeLabels[v],E=v.replace(/[^\w-]*/g,""),A=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let N=A?this._oldLinks.find(tt=>`${tt.source}${tt.target}${tt.id}`===E):this._oldLinks.find(tt=>`${tt.source}${tt.target}`===E);const Z=A?this.graph.edges.find(tt=>`${tt.source}${tt.target}${tt.id}`===E):this.graph.edges.find(tt=>`${tt.source}${tt.target}`===E);N?N.data&&Z&&Z.data&&JSON.stringify(N.data)!==JSON.stringify(Z.data)&&(N.data=Z.data):N=Z||b,N.oldLine=N.line;const R=b.points,J=this.generateLine(R),j=Object.assign({},N);j.line=J,j.points=R,this.updateMidpointOnEdge(j,R);const rt=R[Math.floor(R.length/2)];rt&&(j.textTransform=`translate(${rt.x||0},${rt.y||0})`),j.textAngle=0,j.oldLine||(j.oldLine=j.line),this.calcDominantBaseline(j),h.push(j)}this.graph.edges=h,this.graph.edges&&(this._oldLinks=this.graph.edges.map(v=>{const b=Object.assign({},v);return b.oldLine=v.line,b})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case Pe.UpperLeft:return"";case Pe.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let n=1/0,r=-1/0,h=1/0,v=-1/0;for(let b=0;b<this.graph.nodes.length;b++){const E=this.graph.nodes[b];n=E.position.x<n?E.position.x:n,h=E.position.y<h?E.position.y:h,r=E.position.x+E.dimension.width>r?E.position.x+E.dimension.width:r,v=E.position.y+E.dimension.height>v?E.position.y+E.dimension.height:v}n-=100,h-=100,r+=100,v+=100,this.graphDims.width=r-n,this.graphDims.height=v-h,this.minimapOffsetX=n,this.minimapOffsetY=h}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(n=>{const r=n.nativeElement,h=this.graph.nodes.find(b=>b.id===r.id);if(!h)return;let v;try{if(v=r.getBBox(),!v.width||!v.height)return}catch{return}if(this.nodeHeight?h.dimension.height=h.dimension.height&&h.meta.forceDimensions?h.dimension.height:this.nodeHeight:h.dimension.height=h.dimension.height&&h.meta.forceDimensions?h.dimension.height:v.height,this.nodeMaxHeight&&(h.dimension.height=Math.max(h.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(h.dimension.height=Math.min(h.dimension.height,this.nodeMinHeight)),this.nodeWidth)h.dimension.width=h.dimension.width&&h.meta.forceDimensions?h.dimension.width:this.nodeWidth;else if(r.getElementsByTagName("text").length){let b;try{for(const E of r.getElementsByTagName("text")){const A=E.getBBox();b?(A.width>b.width&&(b.width=A.width),A.height>b.height&&(b.height=A.height)):b=A}}catch{return}h.dimension.width=h.dimension.width&&h.meta.forceDimensions?h.dimension.width:b.width+20}else h.dimension.width=h.dimension.width&&h.meta.forceDimensions?h.dimension.width:v.width;this.nodeMaxWidth&&(h.dimension.width=Math.max(h.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(h.dimension.width=Math.min(h.dimension.width,this.nodeMinWidth))})}redrawLines(n=this.animate){this.linkElements.map(r=>{const h=this.graph.edges.find(v=>v.id===r.nativeElement.id);h&&(Pn(r.nativeElement).select(".line").attr("d",h.oldLine).transition().ease(Rn).duration(n?500:0).attr("d",h.line),Pn(this.el.nativeElement).select(`#${h.id}`).attr("d",h.oldTextPath).transition().ease(Rn).duration(n?500:0).attr("d",h.textPath),this.updateMidpointOnEdge(h,h.points))})}calcDominantBaseline(n){const r=n.points[0],h=n.points[n.points.length-1];n.oldTextPath=n.textPath,h.x<r.x?(n.dominantBaseline="text-before-edge",n.textPath=this.generateLine([...n.points].reverse())):(n.dominantBaseline="text-after-edge",n.textPath=n.line)}generateLine(n){return function Ni(){var e=Ii,n=Si,r=Ye(!0),h=null,v=ki,b=null;function E(A){var N,R,j,Z=A.length,J=!1;for(null==h&&(b=v(j=Ai())),N=0;N<=Z;++N)!(N<Z&&r(R=A[N],N,A))===J&&((J=!J)?b.lineStart():b.lineEnd()),J&&b.point(+e(R,N,A),+n(R,N,A));if(j)return b=null,j+""||null}return E.x=function(A){return arguments.length?(e="function"==typeof A?A:Ye(+A),E):e},E.y=function(A){return arguments.length?(n="function"==typeof A?A:Ye(+A),E):n},E.defined=function(A){return arguments.length?(r="function"==typeof A?A:Ye(!!A),E):r},E.curve=function(A){return arguments.length?(v=A,null!=h&&(b=v(h)),E):v},E.context=function(A){return arguments.length?(null==A?h=b=null:b=v(h=A),E):h},E}().x(h=>h.x).y(h=>h.y).curve(this.curve)(n)}onZoom(n,r){if(this.enableTrackpadSupport&&!n.ctrlKey)return void this.pan(-1*n.deltaX,-1*n.deltaY);const h=1+("in"===r?this.zoomSpeed:-this.zoomSpeed),v=this.zoomLevel*h;if(!(v<=this.minZoomLevel||v>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&n){const b=n.clientX,E=n.clientY,A=this.el.nativeElement.querySelector("svg"),N=A.querySelector("g.chart"),Z=A.createSVGPoint();Z.x=b,Z.y=E;const R=Z.matrixTransform(N.getScreenCTM().inverse());this.pan(R.x,R.y,!0),this.zoom(h),this.pan(-R.x,-R.y,!0)}else this.zoom(h)}pan(n,r,h=!1){const v=h?1:this.zoomLevel;this.transformationMatrix=Oe(this.transformationMatrix,Mr(n/v,r/v)),this.updateTransform()}panTo(n,r){if(null==n||isNaN(n)||null==r||isNaN(r))return;const h=-this.panOffsetX-n*this.zoomLevel+this.dims.width/2,v=-this.panOffsetY-r*this.zoomLevel+this.dims.height/2;this.transformationMatrix=Oe(this.transformationMatrix,Mr(h/this.zoomLevel,v/this.zoomLevel)),this.updateTransform()}zoom(n){this.transformationMatrix=Oe(this.transformationMatrix,function Cs(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Es(n)&&(n=e),{a:e,c:0,e:0,b:0,d:n,f:0}}(n,n)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(n){this.transformationMatrix.a=isNaN(n)?this.transformationMatrix.a:Number(n),this.transformationMatrix.d=isNaN(n)?this.transformationMatrix.d:Number(n),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(n){if(!this.draggingEnabled)return;const r=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(r,n),r.position.x+=n.movementX/this.zoomLevel,r.position.y+=n.movementY/this.zoomLevel;const h=r.position.x-r.dimension.width/2,v=r.position.y-r.dimension.height/2;r.transform=`translate(${h}, ${v})`;for(const b of this.graph.edges)if((b.target===r.id||b.source===r.id||b.target.id===r.id||b.source.id===r.id)&&this.layout&&"string"!=typeof this.layout){const E=this.layout.updateEdge(this.graph,b),A=E instanceof br.y?E:(0,Er.of)(E);this.graphSubscription.add(A.subscribe(N=>{this.graph=N,this.redrawEdge(b)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(n){const r=this.generateLine(n.points);this.calcDominantBaseline(n),n.oldLine=n.line,n.line=r}updateTransform(){this.transform=function Ms(e){return Tr(e)}(function Is(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(e.a*n)/n,b:Math.round(e.b*n)/n,c:Math.round(e.c*n)/n,d:Math.round(e.d*n)/n,e:Math.round(e.e*n)/n,f:Math.round(e.f*n)/n}}(this.transformationMatrix,100))}onClick(n){this.select.emit(n)}onActivate(n){this.activeEntries.indexOf(n)>-1||(this.activeEntries=[n,...this.activeEntries],this.activate.emit({value:n,entries:this.activeEntries}))}onDeactivate(n){const r=this.activeEntries.indexOf(n);this.activeEntries.splice(r,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:n,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(n=>this.groupResultsBy(n)).reduce((n,r)=>-1!==n.indexOf(r)?n:n.concat([r]),[]).sort()}trackLinkBy(n,r){return r.id}trackNodeBy(n,r){return r.id}setColors(){this.colors=new La(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(n){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,n):this.isDragging&&this.draggingEnabled&&this.onDrag(n)}onMouseDown(n){this.isMouseMoveCalled=!1}graphClick(n){this.isMouseMoveCalled||this.clickHandler.emit(n)}onTouchStart(n){this._touchLastX=n.changedTouches[0].clientX,this._touchLastY=n.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(n){if(this.isPanning&&this.panningEnabled){const r=n.changedTouches[0].clientX,h=n.changedTouches[0].clientY,v=r-this._touchLastX,b=h-this._touchLastY;this._touchLastX=r,this._touchLastY=h,this.pan(v,b)}}onTouchEnd(n){this.isPanning=!1}onMouseUp(n){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,n)}onNodeMouseDown(n,r){this.draggingEnabled&&(this.isDragging=!0,this.draggingNode=r,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(r,n))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(n){const r=n.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient),h=n.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient;this.panTo(r*this.minimapScaleCoefficient,h*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){const n=this.dims.height/this.graphDims.height,r=this.dims.width/this.graphDims.width;let h=Math.min(n,r,1);h<this.minZoomLevel&&(h=this.minZoomLevel),h>this.maxZoomLevel&&(h=this.maxZoomLevel),h!==this.zoomLevel&&(this.zoomLevel=h,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(n){const r=this.graph.nodes.find(h=>h.id===n);r&&this.panTo(r.position.x,r.position.y)}panWithConstraints(n,r){let h=r.movementX,v=r.movementY;switch(this.isMinimapPanning&&(h=-this.minimapScaleCoefficient*h*this.zoomLevel,v=-this.minimapScaleCoefficient*v*this.zoomLevel),n){case Fe.Horizontal:this.pan(h,0);break;case Fe.Vertical:this.pan(0,v);break;default:this.pan(h,v)}}updateMidpointOnEdge(n,r){if(n&&r)if(r.length%2==1)n.midPoint=r[Math.floor(r.length/2)];else{const h=r[r.length/2],v=r[r.length/2-1];n.midPoint={x:(h.x+v.x)/2,y:(h.y+v.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const n=this.getContainerDims();n&&(this.width=n.width,this.height=n.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let n,r;const h=this.el.nativeElement;if(null!==h.parentNode){const v=h.parentNode.getBoundingClientRect();n=v.width,r=v.height}return n&&r?{width:n,height:r}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const r=(0,ds.R)(window,"resize").pipe((0,gs.b)(200)).subscribe(h=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=r}}ae.\u0275fac=function(n){return new(n||ae)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(se))},ae.\u0275cmp=t.Xpm({type:ae,selectors:[["ngx-graph"]],contentQueries:function(n,r,h){if(1&n&&(t.Suo(h,sa,5),t.Suo(h,aa,5),t.Suo(h,ua,5),t.Suo(h,ha,5),t.Suo(h,la,5)),2&n){let v;t.iGM(v=t.CRH())&&(r.linkTemplate=v.first),t.iGM(v=t.CRH())&&(r.nodeTemplate=v.first),t.iGM(v=t.CRH())&&(r.clusterTemplate=v.first),t.iGM(v=t.CRH())&&(r.defsTemplate=v.first),t.iGM(v=t.CRH())&&(r.miniMapNodeTemplate=v.first)}},viewQuery:function(n,r){if(1&n&&(t.Gf(ca,5),t.Gf(fa,5)),2&n){let h;t.iGM(h=t.CRH())&&(r.nodeElements=h),t.iGM(h=t.CRH())&&(r.linkElements=h)}},hostBindings:function(n,r){1&n&&t.NdJ("mousemove",function(v){return r.onMouseMove(v)},!1,t.evT)("mousedown",function(v){return r.onMouseDown(v)},!1,t.evT)("click",function(v){return r.graphClick(v)},!1,t.evT)("touchmove",function(v){return r.onTouchMove(v)},!1,t.evT)("mouseup",function(v){return r.onMouseUp(v)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:["*"],decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(n,r){1&n&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(v){return r.onZoom(v,"in")})("mouseWheelDown",function(v){return r.onZoom(v,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,Ca,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,Ia,6,15,"g",3),t.qZA()()),2&n&&(t.Udp("width",r.width,"px"),t.Q6J("@animationState","active")("@.disabled",!r.animations),t.xp6(1),t.uIk("width",r.width)("height",r.height),t.xp6(1),t.Q6J("ngIf",r.initialized&&r.graph),t.xp6(1),t.uIk("id",r.minimapClipPathId),t.xp6(1),t.uIk("width",r.graphDims.width/r.minimapScaleCoefficient)("height",r.graphDims.height/r.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",r.showMiniMap))},dependencies:[Ge,g.O5,g.tP,g.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,d.X$)("animationState",[(0,d.eR)(":enter",[(0,d.oB)({opacity:0}),(0,d.jt)("500ms 100ms",(0,d.oB)({opacity:1}))])])]},changeDetection:0}),(0,u.gn)([function Oa(e,n){return function(h,v,b){return{configurable:!0,enumerable:b.enumerable,get:function(){return Object.defineProperty(this,v,{configurable:!0,enumerable:b.enumerable,value:Na(b.value,e,n)}),this[v]}}}}(500)],ae.prototype,"updateMinimap",null);class me{}me.\u0275fac=function(n){return new(n||me)},me.\u0275mod=t.oAB({type:me}),me.\u0275inj=t.cJS({providers:[se],imports:[[g.ez]]});class ve{}ve.\u0275fac=function(n){return new(n||ve)},ve.\u0275mod=t.oAB({type:ve}),ve.\u0275inj=t.cJS({imports:[[g.ez],me]});var vt=o(90433),$r=o(46677),Jr=o(99886);function Ha(e,n){1&e&&(t.O4$(),t.TgZ(0,"marker",9),t._UZ(1,"path",10),t.qZA())}function Ra(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",11),t._UZ(1,"rect",12),t.TgZ(2,"text",13),t._uU(3),t.qZA()()),2&e){const r=n.$implicit;t.xp6(1),t.uIk("width",r.dimension.width)("height",r.dimension.height)("fill",r.data.color),t.xp6(1),t.uIk("x",10)("y",r.dimension.height/2),t.xp6(1),t.hij(" ",r.label," ")}}function Va(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16)(3,"textPath",17),t._uU(4),t.qZA()()()),2&e){const r=n.$implicit;t.xp6(3),t.Udp("dominant-baseline",r.dominantBaseline),t.uIk("href","#"+r.id),t.xp6(1),t.hij(" ",r.label," ")}}class Ze{constructor(n){this._modalService=n,this.layoutSettings={orientation:oe.TOP_TO_BOTTOM},this.nodesCount=0,this.linksCount=0,this.nodes=[],this.links=[],this.isModal=!1}ngOnInit(){for(let n of this.map.nodes_labels)this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:n}],this.nodesCount++;for(let n=0;n<this.map.adjacency_matrix.length;n++)for(let r=0;r<this.map.adjacency_matrix[n].length;r++)this.map.adjacency_matrix[n][r]&&(this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:"node"+n,target:"node"+r,label:this.map.adjacency_matrix_labels[n][r]}],this.linksCount++)}hideModal(){this._modalService.hide("ClassroomHomeworkMapViewComponent")}}Ze.\u0275fac=function(n){return new(n||Ze)(t.Y36(Jr.tT))},Ze.\u0275cmp=t.Xpm({type:Ze,selectors:[["app-classroom-homework-map-view"]],decls:14,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn-close","close","pull-right",3,"click"],[1,"visually-hidden"],[1,"modal-body"],[1,"chart-container",3,"showMiniMap","layoutSettings","links","nodes"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["rx","15"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Map Graph"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.hideModal()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"ngx-graph",5),t.YNc(8,Ha,2,0,"ng-template",null,6,t.W1O),t.YNc(10,Ra,4,6,"ng-template",null,7,t.W1O),t.YNc(12,Va,5,4,"ng-template",null,8,t.W1O),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("showMiniMap",!1)("layoutSettings",r.layoutSettings)("links",r.links)("nodes",r.nodes))},dependencies:[ae],encapsulation:2});var za=o(40301),Ya=o(53059),ja=o(54696),$a=o(91718);function Ja(e,n){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"div",6),t.TgZ(2,"div",7),t._UZ(3,"div",8),t.qZA()())}function Xa(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){t.CHM(r);const v=t.oxw(2);return t.KtG(v.submitHomework())}),t._uU(2,"Submit"),t.qZA()()}if(2&e){const r=t.oxw(2);t.xp6(1),t.Q6J("disabled",!r.isValidGraph)}}function Wa(e,n){if(1&e&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14)(6,"strong"),t._uU(7,"Start Datetime:"),t.qZA(),t._uU(8),t.ALo(9,"dateLabel"),t._UZ(10,"br"),t.TgZ(11,"strong"),t._uU(12,"Expire Datetime:"),t.qZA(),t._uU(13),t.ALo(14,"dateLabel"),t._UZ(15,"br"),t.TgZ(16,"strong"),t._uU(17,"Node Min:"),t.qZA(),t._uU(18),t._UZ(19,"br"),t.TgZ(20,"strong"),t._uU(21,"Node Max:"),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"div",15)(24,"strong"),t._uU(25,"Title:"),t.qZA(),t._uU(26),t._UZ(27,"br"),t.TgZ(28,"strong"),t._uU(29,"Description:"),t.qZA(),t._uU(30),t.qZA(),t.YNc(31,Xa,3,1,"div",16),t.qZA()()()()()),2&e){const r=t.oxw();t.xp6(8),t.hij(" ",t.lcZ(9,7,r.homework.start_datetime),""),t.xp6(5),t.hij(" ",t.lcZ(14,9,r.homework.expire_datetime),""),t.xp6(5),t.hij(" ",r.homework.node_min,""),t.xp6(4),t.hij(" ",r.homework.node_max," "),t.xp6(4),t.hij(" ",r.homework.title," "),t.xp6(4),t.hij(" ",r.homework.body," "),t.xp6(1),t.Q6J("ngIf",!r.homework.student_map&&0==r.user.role)}}function Qa(e,n){if(1&e&&(t.TgZ(0,"div",51)(1,"p",48),t._UZ(2,"i",52),t._uU(3," Number of Maps: "),t.TgZ(4,"span",53),t._uU(5),t.qZA()(),t.TgZ(6,"p",54),t._UZ(7,"i",52),t._uU(8," Minimum Nodes Count: "),t.TgZ(9,"span",53),t._uU(10),t.qZA()(),t.TgZ(11,"p",48),t._UZ(12,"i",52),t._uU(13," Maximum Nodes Count: "),t.TgZ(14,"span",53),t._uU(15),t.qZA()(),t.TgZ(16,"p",54),t._UZ(17,"i",52),t._uU(18," Minimum Edges Count: "),t.TgZ(19,"span",53),t._uU(20),t.qZA()(),t.TgZ(21,"p",48),t._UZ(22,"i",52),t._uU(23," Maximum Edges Count: "),t.TgZ(24,"span",53),t._uU(25),t.qZA()()()),2&e){const r=t.oxw(2);t.xp6(5),t.Oqu(null==r.simulation.maps?null:r.simulation.maps.length),t.xp6(5),t.Oqu(r.simulation.node_min),t.xp6(5),t.Oqu(r.simulation.node_max),t.xp6(5),t.Oqu(r.simulation.node_min-1),t.xp6(5),t.Oqu(r.maxMapsValues.edges)}}const kn=function(e){return{"btn-primary":e}},Ka=function(e){return{"d-none":e}};function qa(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",12),t.YNc(6,Qa,26,5,"div",24),t.TgZ(7,"label",25),t._uU(8,"Scatter Plot Param:"),t.qZA(),t.TgZ(9,"div")(10,"button",26),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.updateChartType(0))}),t._uU(11,"Entropy"),t.qZA(),t.TgZ(12,"button",26),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.updateChartType(1))}),t._uU(13,"Entropy Percent"),t.qZA(),t.TgZ(14,"button",27),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.updateChartType(2))}),t._uU(15,"Effort"),t.qZA()(),t.TgZ(16,"form",28),t.NdJ("ngSubmit",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.renderScatterPlot(v.current_chart_type))}),t.TgZ(17,"div",13)(18,"div",15)(19,"label",29),t._uU(20,"Nodes Min:"),t.qZA(),t._UZ(21,"input",30),t.qZA(),t.TgZ(22,"div",15)(23,"label",31),t._uU(24,"Nodes Max:"),t.qZA(),t._UZ(25,"input",32),t.qZA()(),t.TgZ(26,"div",33)(27,"div",15)(28,"label",34),t._uU(29,"Edges Min:"),t.qZA(),t._UZ(30,"input",35),t.qZA(),t.TgZ(31,"div",15)(32,"label",36),t._uU(33,"Edges Max:"),t.qZA(),t._UZ(34,"input",37),t.qZA()(),t.TgZ(35,"div",33)(36,"div",15)(37,"label",38),t._uU(38),t.qZA(),t._UZ(39,"input",39),t.qZA(),t.TgZ(40,"div",15)(41,"label",40),t._uU(42),t.qZA(),t._UZ(43,"input",41),t.qZA()(),t.TgZ(44,"div",42)(45,"div",43)(46,"button",44),t._uU(47,"Filter"),t.qZA(),t.TgZ(48,"button",45),t.NdJ("click",function(){t.CHM(r);const v=t.oxw();return t.KtG(v.resetFilterForm(v.current_chart_type))}),t._uU(49,"Reset"),t.qZA()()()()()()()()(),t.TgZ(50,"div",46)(51,"div",11)(52,"div",47)(53,"h5",48),t._uU(54,"Scatter Plot: "),t.TgZ(55,"small"),t._uU(56),t.qZA()()(),t.TgZ(57,"div",49),t._UZ(58,"div",50),t.qZA()()()()}if(2&e){const r=t.oxw();t.xp6(6),t.Q6J("ngIf",r.simulation),t.xp6(4),t.Q6J("ngClass",t.VKq(9,kn,0==r.current_chart_type)),t.xp6(2),t.Q6J("ngClass",t.VKq(11,kn,1==r.current_chart_type)),t.xp6(2),t.Q6J("ngClass",t.VKq(13,kn,2==r.current_chart_type)),t.xp6(2),t.Q6J("formGroup",r.simulationFilterForm),t.xp6(22),t.hij("",r.getChartTypeLabel(r.current_chart_type)," Min:"),t.xp6(4),t.hij("",r.getChartTypeLabel(r.current_chart_type)," Max:"),t.xp6(8),t.Q6J("ngClass",t.VKq(15,Ka,r.loading)),t.xp6(6),t.Oqu(r.getChartTypeLabel(r.current_chart_type))}}function tu(e,n){if(1&e&&(t.TgZ(0,"div",14)(1,"div",62)(2,"div",12)(3,"strong"),t._uU(4,"Submitted at:"),t.qZA(),t._uU(5),t.ALo(6,"dateLabel"),t._UZ(7,"br")(8,"br"),t.TgZ(9,"strong"),t._uU(10,"Entropy (H):"),t.qZA(),t._uU(11),t._UZ(12,"br"),t.TgZ(13,"strong"),t._uU(14,"Entropy Percent (Hr):"),t.qZA(),t._uU(15),t._UZ(16,"br"),t.TgZ(17,"strong"),t._uU(18,"Effort (M):"),t.qZA(),t._uU(19),t._UZ(20,"br"),t.qZA()()()),2&e){const r=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,4,r.homework.student_map.created_at),""),t.xp6(6),t.hij(" ",r.homework.student_map.entropy.toFixed(2),""),t.xp6(4),t.hij(" ",r.homework.student_map.entropy_percent.toFixed(2),""),t.xp6(4),t.hij(" ",r.homework.student_map.effort.toFixed(2),"")}}function eu(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",14)(1,"div",62)(2,"div",12)(3,"form",63),t.NdJ("ngSubmit",function(){t.CHM(r);const v=t.oxw(2);return t.KtG(v.onSubmitNode())}),t.TgZ(4,"div",64)(5,"label",65),t._uU(6,"Node Name:"),t.qZA(),t._UZ(7,"input",66),t.qZA(),t.TgZ(8,"div",67)(9,"button",68),t._uU(10,"Add"),t.qZA()()()()(),t.TgZ(11,"div",11)(12,"div",12)(13,"div",64)(14,"label",69),t._uU(15,"Source Node:"),t.qZA(),t.TgZ(16,"ng-select",70),t.NdJ("ngModelChange",function(v){t.CHM(r);const b=t.oxw(2);return t.KtG(b.sourceLinkNodeId=v)}),t.qZA()(),t.TgZ(17,"div",64)(18,"label",71),t._uU(19,"Target Node:"),t.qZA(),t.TgZ(20,"ng-select",72),t.NdJ("ngModelChange",function(v){t.CHM(r);const b=t.oxw(2);return t.KtG(b.targetLinkNodeId=v)}),t.qZA()(),t.TgZ(21,"div",64)(22,"label",73),t._uU(23,"Label:"),t.qZA(),t.TgZ(24,"input",74),t.NdJ("ngModelChange",function(v){t.CHM(r);const b=t.oxw(2);return t.KtG(b.labelLink=v)}),t.qZA()(),t.TgZ(25,"div",67)(26,"button",75),t.NdJ("click",function(){t.CHM(r);const v=t.oxw(2);return t.KtG(v.linkNodes())}),t._uU(27,"Link"),t.qZA()()()()()}if(2&e){const r=t.oxw(2);t.xp6(3),t.Q6J("formGroup",r.nodeCreateForm),t.xp6(6),t.Q6J("disabled",!r.nodeCreateForm.valid),t.xp6(7),t.Q6J("items",r.nodes)("ngModel",r.sourceLinkNodeId),t.xp6(4),t.Q6J("items",r.nodes)("ngModel",r.targetLinkNodeId),t.xp6(4),t.Q6J("ngModel",r.labelLink),t.xp6(2),t.Q6J("disabled",!r.sourceLinkNodeId||!r.targetLinkNodeId||!r.labelLink)}}function nu(e,n){1&e&&(t.O4$(),t.TgZ(0,"marker",76),t._UZ(1,"path",77),t.qZA())}function ru(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",78),t._UZ(1,"rect",79),t.TgZ(2,"text",80),t._uU(3),t.qZA()()),2&e){const r=n.$implicit;t.xp6(1),t.uIk("width",r.dimension.width)("height",r.dimension.height)("fill",r.data.color),t.xp6(1),t.uIk("x",10)("y",r.dimension.height/2),t.xp6(1),t.hij(" ",r.label," ")}}function iu(e,n){if(1&e&&(t.O4$(),t.TgZ(0,"g",81),t._UZ(1,"path",82),t.TgZ(2,"text",83)(3,"textPath",84),t._uU(4),t.qZA()()()),2&e){const r=n.$implicit;t.xp6(3),t.Udp("dominant-baseline",r.dominantBaseline),t.uIk("href","#"+r.id),t.xp6(1),t.hij(" ",r.label," ")}}function ou(e,n){if(1&e&&(t.TgZ(0,"div",55),t.YNc(1,tu,21,6,"div",56),t.YNc(2,eu,28,8,"div",56),t.TgZ(3,"div",57)(4,"ngx-graph",58),t.YNc(5,nu,2,0,"ng-template",null,59,t.W1O),t.YNc(7,ru,4,6,"ng-template",null,60,t.W1O),t.YNc(9,iu,5,4,"ng-template",null,61,t.W1O),t.qZA()()()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.homework.student_map),t.xp6(1),t.Q6J("ngIf",!r.homework.student_map),t.xp6(2),t.Q6J("showMiniMap",!1)("layoutSettings",r.layoutSettings)("links",r.links)("nodes",r.nodes)}}var It;!function(e){e[e.Entropy=0]="Entropy",e[e.EntropyPercent=1]="EntropyPercent",e[e.Effort=2]="Effort"}(It||(It={}));const su=e=>{const n=parseInt(e.get("node_min").value),r=parseInt(e.get("node_max").value),h=parseInt(e.get("edge_min").value),v=parseInt(e.get("edge_max").value),b=parseInt(e.get("param_min").value),E=parseInt(e.get("param_max").value);return n>r||h>v||b>E?{inRange:!1}:null};class Ue{constructor(n,r,h,v,b){this._route=n,this._classroomHomeworkService=r,this._router=h,this._alertService=v,this._modalService=b,this.layoutSettings={orientation:oe.TOP_TO_BOTTOM},this.nodeCreateForm=new vt.cw({name:new vt.NI(null,vt.kI.required)}),this.simulationFilterForm=new vt.cw({node_min:new vt.NI(0,vt.kI.required),node_max:new vt.NI(0,vt.kI.required),edge_min:new vt.NI(0,vt.kI.required),edge_max:new vt.NI(0,vt.kI.required),param_min:new vt.NI(0,vt.kI.required),param_max:new vt.NI(0,vt.kI.required)},su),this.loading=!1,this.loadingAddNode=!1,this.nodesCount=0,this.linksCount=0,this.nodes=[],this.links=[],this.sourceLinkNodeId=null,this.targetLinkNodeId=null,this.labelLink=null,this.isValidGraph=!1,this.simulation=null,this.currentMap=null,this.current_chart_type=It.Entropy,this.maxMapsValues={nodes:0,edges:0,entropy:0,entropy_percent:0,effort:0};let E=JSON.parse(localStorage.getItem("currentUserData"));E||this._router.navigate(["/users/auth"]),this.user=E}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id"),this.homework_id=this._route.snapshot.paramMap.get("homework_id"),0==this.user.role?this.getClassroomHomework():this._classroomHomeworkService.getClassroomHomework(this.classroom_id,this.homework_id).subscribe(n=>{if(this.loading=!1,n.hasOwnProperty("error"))return void this._router.navigate(["/not-found"]);this.homework=n;let r=[];console.log(this.homework.maps);for(let h of this.homework.maps)r=[...r,{_id:h._id,color_entropy:0,color_entropy_percent:0,color_effort:0,edges_count:h.edges_count,entropy:h.entropy,entropy_percent:h.entropy_percent,effort:h.effort,nodes_count:h.nodes_count,homework_id:h.homework_id,adjacency_matrix:h.adjacency_matrix,created_at:0,nodes_labels:h.nodes_labels,adjacency_matrix_labels:h.adjacency_matrix_labels}];if(this.simulation={classroom_id:this.homework.classroom_id,title:this.homework.title,node_min:this.homework.node_min,node_max:this.homework.node_max,maps:r,body:this.homework.body,start_datetime:this.homework.start_datetime,expire_datetime:this.homework.expire_datetime},this.simulation?.maps){this.simulationFilterForm.get("node_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min-1}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),this.simulationFilterForm.get("node_max").setValidators([vt.kI.max(this.simulation.node_max),vt.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity();for(let h of this.simulation.maps)h.nodes_count>this.maxMapsValues.nodes&&(this.maxMapsValues.nodes=h.nodes_count),h.edges_count>this.maxMapsValues.edges&&(this.maxMapsValues.edges=h.edges_count),h.entropy&&h.entropy>this.maxMapsValues.entropy&&(this.maxMapsValues.entropy=h.entropy),h.entropy_percent&&h.entropy_percent>this.maxMapsValues.entropy_percent&&(this.maxMapsValues.entropy_percent=h.entropy_percent),h.effort&&h.effort>this.maxMapsValues.effort&&(this.maxMapsValues.effort=h.effort);this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}})}getClassroomHomework(){this.loading=!0,this._classroomHomeworkService.getClassroomHomework(this.classroom_id,this.homework_id).subscribe(n=>{if(n.hasOwnProperty("error"))this._router.navigate(["/"]);else if(this.homework=n,this.homework.student_map){for(let r of this.homework.student_map.nodes_labels)this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:r}],this.nodesCount++;for(let r=0;r<this.homework.student_map.adjacency_matrix.length;r++)for(let h=0;h<this.homework.student_map.adjacency_matrix[r].length;h++)this.homework.student_map.adjacency_matrix[r][h]&&(this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:"node"+r,target:"node"+h,label:this.homework.student_map.adjacency_matrix_labels[r][h]}],this.linksCount++)}this.loading=!1})}onSubmitNode(){if(this.nodes.length==this.homework.node_max)return this._alertService.error("You have reached the maximum amount of nodes.");this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:this.nodeCreateForm.value.name}],this.nodesCount++,this.nodeCreateForm.reset(),this.isValidGraph=this.checkDAG()}linkNodes(){this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:this.sourceLinkNodeId,target:this.targetLinkNodeId,label:this.labelLink}],this.linksCount++,this.sourceLinkNodeId=null,this.targetLinkNodeId=null,this.labelLink=null,this.isValidGraph=this.checkDAG()}submitHomework(){let n=[],r=Array.from(Array(this.nodes.length),v=>Array(this.nodes.length).fill(""));for(let v of this.links){let b=parseInt(v.source.replace("node","")),E=parseInt(v.target.replace("node",""));r[b][E]=v.label}for(let v of this.nodes)n.push(v.label);let h={homework_id:this.homework_id,nodes_count:this.nodes.length,edges_count:this.links.length,nodes_labels:n,adjacency_matrix:this.adjacencyMatrix,adjacency_matrix_labels:r};this._classroomHomeworkService.createClassroomHomeworkMap(this.classroom_id,this.homework_id,h).subscribe(v=>{window.location.reload(),this._alertService.success("Homework submitted.")})}checkDAG(){if(this.nodes.length<this.homework.node_min)return!1;this.adjacencyMatrix=Array.from(Array(this.nodes.length),n=>Array(this.nodes.length).fill(0));for(let n of this.links){let r=parseInt(n.source.replace("node","")),h=parseInt(n.target.replace("node",""));this.adjacencyMatrix[r][h]=1}return!!this.isConnected(this.adjacencyMatrix)&&this.isDAG(this.adjacencyMatrix)}isDAG(n){const r=n.length,h=Array(r).fill(!1),v=Array(r).fill(!1);for(let b=0;b<r;b++)if(!h[b]&&this.isCyclic(b,h,v,n))return!1;return!0}isCyclic(n,r,h,v){r[n]=!0,h[n]=!0;for(let b=0;b<v[n].length;b++)if(1===v[n][b]){if(!r[b]&&this.isCyclic(b,r,h,v))return!0;if(h[b])return!0}return h[n]=!1,!1}isConnected(n){const r=n.length,h=Array(r).fill(!1),v=[];for(v.push(0),h[0]=!0;v.length>0;){const b=v.pop();for(let E=0;E<r;E++)1===n[b][E]&&!h[E]&&(v.push(E),h[E]=!0)}return h.every(b=>b)}unpack(n,r){return n.map(function(h){return h[r]})}resetFilterForm(n){this.simulationFilterForm.get("node_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min-1}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),n==It.Entropy?(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.entropy),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):n==It.EntropyPercent?(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.entropy_percent),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy_percent}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):n==It.Effort&&(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.effort),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.effort}),this.simulationFilterForm.get("param_max").updateValueAndValidity()),this.simulationFilterForm.get("node_max").setValidators([vt.kI.max(this.simulation.node_max),vt.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity(),this.simulationFilterForm.get("edge_max").setValidators([vt.kI.max(this.maxMapsValues.edges),vt.kI.required]),this.simulationFilterForm.patchValue({edge_max:this.maxMapsValues.edges}),this.simulationFilterForm.get("edge_max").updateValueAndValidity()}getCoordsDatum(n,r){let h=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"edges_count"),b=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"entropy");return n==It.EntropyPercent?(h=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"edges_count"),b=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"entropy_percent")):n==It.Effort&&(h=this.unpack(this.simulation.maps.filter(E=>E.color_effort==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_effort==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"edges_count"),b=this.unpack(this.simulation.maps.filter(E=>E.color_effort==r&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"effort")),[h,v,b]}renderScatterPlot(n){$r.purge("container");const r=["rgba(168, 50, 50, 0.95)","rgba(161, 158, 157, 0.95)","rgba(86, 199, 30, 0.95)"];let h={x:this.getCoordsDatum(n,0)[0],y:this.getCoordsDatum(n,0)[1],z:this.getCoordsDatum(n,0)[2],mode:"markers",marker:{size:5,line:{color:r[0],width:.5},opacity:.8},type:"scatter3d"};console.log(h);let E=[h,{x:this.getCoordsDatum(n,1)[0],y:this.getCoordsDatum(n,1)[1],z:this.getCoordsDatum(n,1)[2],mode:"markers",marker:{size:5,line:{color:r[1],width:.5},opacity:.8},type:"scatter3d"},{x:this.getCoordsDatum(n,2)[0],y:this.getCoordsDatum(n,2)[1],z:this.getCoordsDatum(n,2)[2],mode:"markers",marker:{size:5,line:{color:r[2],width:.5},opacity:.8},type:"scatter3d"}],A={margin:{l:0,r:0,b:0,t:50},width:window.innerWidth-window.innerWidth/2.5,height:window.innerHeight-200,colorway:r,scene:{xaxis:{title:"Nodes",range:[0,this.maxMapsValues.nodes]},yaxis:{title:"Edges",range:[0,this.maxMapsValues.edges]},zaxis:{title:this.getChartTypeLabel(this.current_chart_type)}}};$r.newPlot("container",E,A,{responsive:!0}),document.getElementById("container").on("plotly_click",Z=>{this.current_chart_type==It.Entropy?this.currentMap=this.simulation?.maps?.filter(R=>Z.points[0].x==R.nodes_count&&Z.points[0].y==R.edges_count&&Z.points[0].z==R.entropy)[0]:this.current_chart_type==It.EntropyPercent?this.currentMap=this.simulation?.maps?.filter(R=>Z.points[0].x==R.nodes_count&&Z.points[0].y==R.edges_count&&Z.points[0].z==R.entropy_percent)[0]:this.current_chart_type==It.Effort&&(this.currentMap=this.simulation?.maps?.filter(R=>Z.points[0].x==R.nodes_count&&Z.points[0].y==R.edges_count&&Z.points[0].z==R.effort)[0]),this.showCurrentMap()})}getChartTypeLabel(n){switch(n){case It.Entropy:return"Entropy (H)";case It.EntropyPercent:return"Entropy Percent (Hr)";case It.Effort:return"Effort (M)"}}getChartId(n){switch(n){case It.Entropy:return"chartHolderEntropy";case It.EntropyPercent:return"chartHolderEntropyPercent";case It.Effort:return"chartHolderEffort"}}updateChartType(n){this.current_chart_type=n,this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}downloadJson(){var n=JSON.stringify(this.simulation),r=document.createElement("a");r.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(n)),r.setAttribute("download",this.simulation?.title?this.simulation?.title+".json":"undefined.json"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}showCurrentMap(){const n={map:this.currentMap,isModal:!0};this._modalService.show(Ze,{id:"ClassroomHomeworkMapViewComponent",class:"modal-lg",initialState:n})}}Ue.\u0275fac=function(n){return new(n||Ue)(t.Y36(a.gz),t.Y36(i.c),t.Y36(a.F0),t.Y36(za.c),t.Y36(Jr.tT))},Ue.\u0275cmp=t.Xpm({type:Ue,selectors:[["app-classroom-homework-view"]],decls:6,vars:4,consts:[["class","row mt-5 g-0",4,"ngIf"],[1,"mt-4","container-fluid","h-75"],["class","row px-2 mb-4",4,"ngIf"],["class","row h-90 my-4 mx-2",4,"ngIf"],["class","row px-2 h-100",4,"ngIf"],[1,"row","mt-5","g-0"],[1,"col-5"],[1,"col-2","ms-5","mt-5"],[1,"ms-3","custom-big-loader","mt-5"],[1,"row","px-2","mb-4"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-3"],[1,"col-6"],["class","col-3 d-flex align-items-center",4,"ngIf"],[1,"col-3","d-flex","align-items-center"],[1,"btn","btn-success","d-grid","w-100",3,"disabled","click"],[1,"row","h-90","my-4","mx-2"],[1,"col-4","h-100"],[1,"row","h-100"],[1,"col-12","h-100","ps-0"],[1,"card","mb-4","h-100"],["class","alert alert-primary mb-2","role","alert",4,"ngIf"],[1,"form-label"],[1,"me-3","btn","btn-secondary",3,"ngClass","click"],[1,"btn","btn-secondary",3,"ngClass","click"],[1,"mt-3",3,"formGroup","ngSubmit"],["for","node_min",1,"form-label"],["type","text","id","node_min","name","simulation_node_min","placeholder","","formControlName","node_min",1,"form-control"],["for","node_max",1,"form-label"],["type","text","id","node_max","name","simulation_node_max","placeholder","","formControlName","node_max",1,"form-control"],[1,"row","mt-2"],["for","edge_min",1,"form-label"],["type","text","id","edge_min","name","simulation_edge_min","placeholder","","formControlName","edge_min",1,"form-control"],["for","edge_max",1,"form-label"],["type","text","id","edge_max","name","simulation_edge_max","placeholder","","formControlName","edge_max",1,"form-control"],["for","param_min",1,"form-label"],["type","text","id","param_min","name","simulation_param_min","placeholder","","formControlName","param_min",1,"form-control"],["for","param_max",1,"form-label"],["type","text","id","param_max","name","simulation_param_max","placeholder","","formControlName","param_max",1,"form-control"],[1,"row","mt-4"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-primary","me-3"],[1,"btn","btn-secondary",3,"click"],[1,"col-8","pe-0",3,"ngClass"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"card-body","text-center","p-0"],["id","container"],["role","alert",1,"alert","alert-primary","mb-2"],[1,"fa-solid","fa-genderless"],[1,"ms-2"],[1,"mb-0","mt-2"],[1,"row","px-2","h-100"],["class","col-3",4,"ngIf"],[1,"col-8"],[1,"chart-container",3,"showMiniMap","layoutSettings","links","nodes"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],[1,"card","mb-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","node_name","name","node_name","formControlName","name",1,"form-control"],[1,"text-center"],["type","submit",1,"btn","btn-primary","d-grid","w-100",3,"disabled"],["for","source_node",1,"form-label"],["id","source_node","name","source_node","bindLabel","label","bindValue","id",3,"items","ngModel","ngModelChange"],["for","target_node",1,"form-label"],["id","target_node","name","target_node","bindLabel","label","bindValue","id",3,"items","ngModel","ngModelChange"],["for","link_label",1,"form-label"],["type","text","id","link_label","name","link_label",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","d-grid","w-100",3,"disabled","click"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["rx","15"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"]],template:function(n,r){1&n&&(t._UZ(0,"app-navbar"),t.YNc(1,Ja,4,0,"div",0),t.TgZ(2,"div",1),t.YNc(3,Wa,32,11,"div",2),t.YNc(4,qa,59,17,"div",3),t.YNc(5,ou,11,6,"div",4),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",r.loading),t.xp6(2),t.Q6J("ngIf",r.homework),t.xp6(1),t.Q6J("ngIf",1==r.user.role),t.xp6(1),t.Q6J("ngIf",0==r.user.role&&r.homework))},dependencies:[g.mk,g.O5,vt._Y,vt.Fj,vt.JJ,vt.JL,vt.On,vt.sg,vt.u,Ya.w9,ja.S,ae,$a.$],encapsulation:2});const au=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:":homework_id",component:Ue,canActivate:[l.a]}];class ye{}ye.\u0275fac=function(n){return new(n||ye)},ye.\u0275mod=t.oAB({type:ye}),ye.\u0275inj=t.cJS({imports:[a.Bz.forChild(au),a.Bz]});class xe{}xe.\u0275fac=function(n){return new(n||xe)},xe.\u0275mod=t.oAB({type:xe}),xe.\u0275inj=t.cJS({providers:[i.c],imports:[g.ez,c.m,f.UserModule,ye,ve]})},84937:(y,_,o)=>{"use strict";o.d(_,{c:()=>f});var s=o(41571),m=o(92340),p=o(85059),g=o(80529),c=o(29985);class f{constructor(a,l){this._http=a,this._httpErrorHandler=l,this._classroomEndpointUrl=m.N.apiEndpointUrl+"classrooms/",this.updatedClassroomHomeworks$=new s.vpe,this._handleError=this._httpErrorHandler.createHandleError("UserService")}createClassroomHomework(a){let l=a.classroom_id;return this._http.post(this._classroomEndpointUrl+l+"/homeworks/",{title:a.title,body:a.body,node_min:a.node_min,node_max:a.node_max,start_datetime:a.start_datetime,expire_datetime:a.expire_datetime}).pipe((0,p.K)(this._handleError("createClassroomHomework",{error:!0})))}getClassroomHomeworks(a){return this._http.get(this._classroomEndpointUrl+a+"/homeworks").pipe((0,p.K)(this._handleError("getClassroomHomeworks",{error:!0})))}getClassroomHomework(a,l){return this._http.get(this._classroomEndpointUrl+a+"/homeworks/"+l).pipe((0,p.K)(this._handleError("getClassroomHomework",{error:!0})))}createClassroomHomeworkMap(a,l,t){return this._http.post(this._classroomEndpointUrl+a+"/homeworks/"+l,t).pipe((0,p.K)(this._handleError("createClassroomHomeworkMap",{error:!0})))}}f.\u0275fac=function(a){return new(a||f)(s.LFG(g.eN),s.LFG(c.G))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},57315:(y,_,o)=>{"use strict";o.d(_,{u:()=>f});var s=o(41571),m=o(92340),p=o(85059),g=o(80529),c=o(29985);class f{constructor(a,l){this._http=a,this._httpErrorHandler=l,this._classroomEndpointUrl=m.N.apiEndpointUrl+"classrooms/",this.updatedClassrooms$=new s.vpe,this._handleError=this._httpErrorHandler.createHandleError("UserService")}getClassrooms(){return this._http.get(this._classroomEndpointUrl).pipe((0,p.K)(this._handleError("getClassrooms",{error:!0})))}getClassroom(a){return this._http.get(this._classroomEndpointUrl+a).pipe((0,p.K)(this._handleError("getClassroom",{error:!0})))}joinStudentClassroom(a){return this._http.get(this._classroomEndpointUrl+"invite/"+a).pipe((0,p.K)(this._handleError("joinStudentClassroom",{error:!0})))}createClassroom(a){return this._http.post(this._classroomEndpointUrl,a).pipe((0,p.K)(this._handleError("createClassroom",{error:!0})))}getClassroomStudents(a){return this._http.get(this._classroomEndpointUrl+a+"/students").pipe((0,p.K)(this._handleError("getClassroomStudents",{error:!0})))}}f.\u0275fac=function(a){return new(a||f)(s.LFG(g.eN),s.LFG(c.G))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},59695:(y,_,o)=>{y.exports={graphlib:o(36456),layout:o(14850),debug:o(71914),util:{time:o(11510).time,notime:o(11510).notime},version:o(28126)}},12234:(y,_,o)=>{"use strict";var s=o(45760),m=o(67365);y.exports={run:function p(f){var i="greedy"===f.graph().acyclicer?m(f,function a(l){return function(t){return l.edge(t).weight}}(f)):function g(f){var i=[],a={},l={};function t(u){s.has(l,u)||(l[u]=!0,a[u]=!0,s.forEach(f.outEdges(u),function(d){s.has(a,d.w)?i.push(d):t(d.w)}),delete a[u])}return s.forEach(f.nodes(),t),i}(f);s.forEach(i,function(l){var t=f.edge(l);f.removeEdge(l),t.forwardName=l.name,t.reversed=!0,f.setEdge(l.w,l.v,t,s.uniqueId("rev"))})},undo:function c(f){s.forEach(f.edges(),function(i){var a=f.edge(i);if(a.reversed){f.removeEdge(i);var l=a.forwardName;delete a.reversed,delete a.forwardName,f.setEdge(i.w,i.v,a,l)}})}}},79999:(y,_,o)=>{var s=o(45760),m=o(11510);function g(c,f,i,a,l,t){var u={width:0,height:0,rank:t,borderType:f},d=l[f][t-1],x=m.addDummyNode(c,"border",u,i);l[f][t]=x,c.setParent(x,a),d&&c.setEdge(d,x,{weight:1})}y.exports=function p(c){s.forEach(c.children(),function f(i){var a=c.children(i),l=c.node(i);if(a.length&&s.forEach(a,f),s.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var t=l.minRank,u=l.maxRank+1;t<u;++t)g(c,"borderLeft","_bl",i,l,t),g(c,"borderRight","_br",i,l,t)}})}},83870:(y,_,o)=>{"use strict";var s=o(45760);function g(t){s.forEach(t.nodes(),function(u){c(t.node(u))}),s.forEach(t.edges(),function(u){c(t.edge(u))})}function c(t){var u=t.width;t.width=t.height,t.height=u}function i(t){t.y=-t.y}function l(t){var u=t.x;t.x=t.y,t.y=u}y.exports={adjust:function m(t){var u=t.graph().rankdir.toLowerCase();("lr"===u||"rl"===u)&&g(t)},undo:function p(t){var u=t.graph().rankdir.toLowerCase();("bt"===u||"rl"===u)&&function f(t){s.forEach(t.nodes(),function(u){i(t.node(u))}),s.forEach(t.edges(),function(u){var d=t.edge(u);s.forEach(d.points,i),s.has(d,"y")&&i(d)})}(t),("lr"===u||"rl"===u)&&(function a(t){s.forEach(t.nodes(),function(u){l(t.node(u))}),s.forEach(t.edges(),function(u){var d=t.edge(u);s.forEach(d.points,l),s.has(d,"x")&&l(d)})}(t),g(t))}}},3226:y=>{function _(){var m={};m._next=m._prev=m,this._sentinel=m}function o(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function s(m,p){if("_next"!==m&&"_prev"!==m)return p}y.exports=_,_.prototype.dequeue=function(){var m=this._sentinel,p=m._prev;if(p!==m)return o(p),p},_.prototype.enqueue=function(m){var p=this._sentinel;m._prev&&m._next&&o(m),m._next=p._next,p._next._prev=m,p._next=m,m._prev=p},_.prototype.toString=function(){for(var m=[],p=this._sentinel,g=p._prev;g!==p;)m.push(JSON.stringify(g,s)),g=g._prev;return"["+m.join(", ")+"]"}},71914:(y,_,o)=>{var s=o(45760),m=o(11510),p=o(36456).Graph;y.exports={debugOrdering:function g(c){var f=m.buildLayerMatrix(c),i=new p({compound:!0,multigraph:!0}).setGraph({});return s.forEach(c.nodes(),function(a){i.setNode(a,{label:a}),i.setParent(a,"layer"+c.node(a).rank)}),s.forEach(c.edges(),function(a){i.setEdge(a.v,a.w,{},a.name)}),s.forEach(f,function(a,l){var t="layer"+l;i.setNode(t,{rank:"same"}),s.reduce(a,function(u,d){return i.setEdge(u,d,{style:"invis"}),d})}),i}}},36456:(y,_,o)=>{var s;try{s=o(85510)}catch{}s||(s=window.graphlib),y.exports=s},67365:(y,_,o)=>{var s=o(45760),m=o(36456).Graph,p=o(3226);y.exports=function c(t,u){if(t.nodeCount()<=1)return[];var d=function a(t,u){var d=new m,x=0,w=0;s.forEach(t.nodes(),function(M){d.setNode(M,{v:M,in:0,out:0})}),s.forEach(t.edges(),function(M){var I=d.edge(M.v,M.w)||0,k=u(M),P=I+k;d.setEdge(M.v,M.w,P),w=Math.max(w,d.node(M.v).out+=k),x=Math.max(x,d.node(M.w).in+=k)});var C=s.range(w+x+3).map(function(){return new p}),T=x+1;return s.forEach(d.nodes(),function(M){l(C,T,d.node(M))}),{graph:d,buckets:C,zeroIdx:T}}(t,u||g),x=function f(t,u,d){for(var T,x=[],w=u[u.length-1],C=u[0];t.nodeCount();){for(;T=C.dequeue();)i(t,u,d,T);for(;T=w.dequeue();)i(t,u,d,T);if(t.nodeCount())for(var M=u.length-2;M>0;--M)if(T=u[M].dequeue()){x=x.concat(i(t,u,d,T,!0));break}}return x}(d.graph,d.buckets,d.zeroIdx);return s.flatten(s.map(x,function(w){return t.outEdges(w.v,w.w)}),!0)};var g=s.constant(1);function i(t,u,d,x,w){var C=w?[]:void 0;return s.forEach(t.inEdges(x.v),function(T){var M=t.edge(T),I=t.node(T.v);w&&C.push({v:T.v,w:T.w}),I.out-=M,l(u,d,I)}),s.forEach(t.outEdges(x.v),function(T){var M=t.edge(T),I=T.w,k=t.node(I);k.in-=M,l(u,d,k)}),t.removeNode(x.v),C}function l(t,u,d){d.out?d.in?t[d.out-d.in+u].enqueue(d):t[t.length-1].enqueue(d):t[0].enqueue(d)}},14850:(y,_,o)=>{"use strict";var s=o(45760),m=o(12234),p=o(46607),g=o(94124),c=o(11510).normalizeRanks,f=o(60162),i=o(11510).removeEmptyRanks,a=o(1230),l=o(79999),t=o(83870),u=o(32974),d=o(78226),x=o(11510),w=o(36456).Graph;y.exports=function C($,Q){var nt=Q&&Q.debugTiming?x.time:x.notime;nt("layout",function(){var ht=nt("  buildLayoutGraph",function(){return function O($){var Q=new w({multigraph:!0,compound:!0}),nt=yt($.graph());return Q.setGraph(s.merge({},k,ct(nt,I),s.pick(nt,P))),s.forEach($.nodes(),function(ht){var mt=yt($.node(ht));Q.setNode(ht,s.defaults(ct(mt,H),V)),Q.setParent(ht,$.parent(ht))}),s.forEach($.edges(),function(ht){var mt=yt($.edge(ht));Q.setEdge(ht,s.merge({},Y,ct(mt,B),s.pick(mt,S)))}),Q}($)});nt("  runLayout",function(){!function T($,Q){Q("    makeSpaceForEdgeLabels",function(){!function L($){var Q=$.graph();Q.ranksep/=2,s.forEach($.edges(),function(nt){var ht=$.edge(nt);ht.minlen*=2,"c"!==ht.labelpos.toLowerCase()&&("TB"===Q.rankdir||"BT"===Q.rankdir?ht.width+=ht.labeloffset:ht.height+=ht.labeloffset)})}($)}),Q("    removeSelfEdges",function(){!function it($){s.forEach($.edges(),function(Q){if(Q.v===Q.w){var nt=$.node(Q.v);nt.selfEdges||(nt.selfEdges=[]),nt.selfEdges.push({e:Q,label:$.edge(Q)}),$.removeEdge(Q)}})}($)}),Q("    acyclic",function(){m.run($)}),Q("    nestingGraph.run",function(){a.run($)}),Q("    rank",function(){g(x.asNonCompoundGraph($))}),Q("    injectEdgeLabelProxies",function(){!function F($){s.forEach($.edges(),function(Q){var nt=$.edge(Q);if(nt.width&&nt.height){var ht=$.node(Q.v),dt={rank:($.node(Q.w).rank-ht.rank)/2+ht.rank,e:Q};x.addDummyNode($,"edge-proxy",dt,"_ep")}})}($)}),Q("    removeEmptyRanks",function(){i($)}),Q("    nestingGraph.cleanup",function(){a.cleanup($)}),Q("    normalizeRanks",function(){c($)}),Q("    assignRankMinMax",function(){!function D($){var Q=0;s.forEach($.nodes(),function(nt){var ht=$.node(nt);ht.borderTop&&(ht.minRank=$.node(ht.borderTop).rank,ht.maxRank=$.node(ht.borderBottom).rank,Q=s.max(Q,ht.maxRank))}),$.graph().maxRank=Q}($)}),Q("    removeEdgeLabelProxies",function(){!function z($){s.forEach($.nodes(),function(Q){var nt=$.node(Q);"edge-proxy"===nt.dummy&&($.edge(nt.e).labelRank=nt.rank,$.removeNode(Q))})}($)}),Q("    normalize.run",function(){p.run($)}),Q("    parentDummyChains",function(){f($)}),Q("    addBorderSegments",function(){l($)}),Q("    order",function(){u($)}),Q("    insertSelfEdges",function(){!function q($){var Q=x.buildLayerMatrix($);s.forEach(Q,function(nt){var ht=0;s.forEach(nt,function(mt,dt){var _t=$.node(mt);_t.order=dt+ht,s.forEach(_t.selfEdges,function(bt){x.addDummyNode($,"selfedge",{width:bt.label.width,height:bt.label.height,rank:_t.rank,order:dt+ ++ht,e:bt.e,label:bt.label},"_se")}),delete _t.selfEdges})})}($)}),Q("    adjustCoordinateSystem",function(){t.adjust($)}),Q("    position",function(){d($)}),Q("    positionSelfEdges",function(){!function ut($){s.forEach($.nodes(),function(Q){var nt=$.node(Q);if("selfedge"===nt.dummy){var ht=$.node(nt.e.v),mt=ht.x+ht.width/2,dt=ht.y,_t=nt.x-mt,bt=ht.height/2;$.setEdge(nt.e,nt.label),$.removeNode(Q),nt.label.points=[{x:mt+2*_t/3,y:dt-bt},{x:mt+5*_t/6,y:dt-bt},{x:mt+_t,y:dt},{x:mt+5*_t/6,y:dt+bt},{x:mt+2*_t/3,y:dt+bt}],nt.label.x=nt.x,nt.label.y=nt.y}})}($)}),Q("    removeBorderNodes",function(){!function W($){s.forEach($.nodes(),function(Q){if($.children(Q).length){var nt=$.node(Q),ht=$.node(nt.borderTop),mt=$.node(nt.borderBottom),dt=$.node(s.last(nt.borderLeft)),_t=$.node(s.last(nt.borderRight));nt.width=Math.abs(_t.x-dt.x),nt.height=Math.abs(mt.y-ht.y),nt.x=dt.x+nt.width/2,nt.y=ht.y+nt.height/2}}),s.forEach($.nodes(),function(Q){"border"===$.node(Q).dummy&&$.removeNode(Q)})}($)}),Q("    normalize.undo",function(){p.undo($)}),Q("    fixupEdgeLabelCoords",function(){!function G($){s.forEach($.edges(),function(Q){var nt=$.edge(Q);if(s.has(nt,"x"))switch(("l"===nt.labelpos||"r"===nt.labelpos)&&(nt.width-=nt.labeloffset),nt.labelpos){case"l":nt.x-=nt.width/2+nt.labeloffset;break;case"r":nt.x+=nt.width/2+nt.labeloffset}})}($)}),Q("    undoCoordinateSystem",function(){t.undo($)}),Q("    translateGraph",function(){!function K($){var Q=Number.POSITIVE_INFINITY,nt=0,ht=Number.POSITIVE_INFINITY,mt=0,dt=$.graph(),_t=dt.marginx||0,bt=dt.marginy||0;function ot(st){var et=st.x,gt=st.y,Tt=st.width,wt=st.height;Q=Math.min(Q,et-Tt/2),nt=Math.max(nt,et+Tt/2),ht=Math.min(ht,gt-wt/2),mt=Math.max(mt,gt+wt/2)}s.forEach($.nodes(),function(st){ot($.node(st))}),s.forEach($.edges(),function(st){var et=$.edge(st);s.has(et,"x")&&ot(et)}),Q-=_t,ht-=bt,s.forEach($.nodes(),function(st){var et=$.node(st);et.x-=Q,et.y-=ht}),s.forEach($.edges(),function(st){var et=$.edge(st);s.forEach(et.points,function(gt){gt.x-=Q,gt.y-=ht}),s.has(et,"x")&&(et.x-=Q),s.has(et,"y")&&(et.y-=ht)}),dt.width=nt-Q+_t,dt.height=mt-ht+bt}($)}),Q("    assignNodeIntersects",function(){!function U($){s.forEach($.edges(),function(Q){var dt,_t,nt=$.edge(Q),ht=$.node(Q.v),mt=$.node(Q.w);nt.points?(dt=nt.points[0],_t=nt.points[nt.points.length-1]):(nt.points=[],dt=mt,_t=ht),nt.points.unshift(x.intersectRect(ht,dt)),nt.points.push(x.intersectRect(mt,_t))})}($)}),Q("    reversePoints",function(){!function X($){s.forEach($.edges(),function(Q){var nt=$.edge(Q);nt.reversed&&nt.points.reverse()})}($)}),Q("    acyclic.undo",function(){m.undo($)})}(ht,nt)}),nt("  updateInputGraph",function(){!function M($,Q){s.forEach($.nodes(),function(nt){var ht=$.node(nt),mt=Q.node(nt);ht&&(ht.x=mt.x,ht.y=mt.y,Q.children(nt).length&&(ht.width=mt.width,ht.height=mt.height))}),s.forEach($.edges(),function(nt){var ht=$.edge(nt),mt=Q.edge(nt);ht.points=mt.points,s.has(mt,"x")&&(ht.x=mt.x,ht.y=mt.y)}),$.graph().width=Q.graph().width,$.graph().height=Q.graph().height}($,ht)})})};var I=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},P=["acyclicer","ranker","rankdir","align"],H=["width","height"],V={width:0,height:0},B=["minlen","weight","width","height","labeloffset"],Y={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function ct($,Q){return s.mapValues(s.pick($,Q),Number)}function yt($){var Q={};return s.forEach($,function(nt,ht){Q[ht.toLowerCase()]=nt}),Q}},45760:(y,_,o)=>{var s;try{s={cloneDeep:o(90733),constant:o(76684),defaults:o(28800),each:o(35474),filter:o(35281),find:o(62516),flatten:o(22274),forEach:o(89851),forIn:o(41176),has:o(64972),isUndefined:o(34235),last:o(25809),map:o(19984),mapValues:o(10203),max:o(18176),merge:o(80567),min:o(29439),minBy:o(29525),now:o(31710),pick:o(16372),range:o(90361),reduce:o(81337),sortBy:o(12906),uniqueId:o(51541),values:o(90377),zipObject:o(21617)}}catch{}s||(s=window._),y.exports=s},1230:(y,_,o)=>{var s=o(45760),m=o(11510);function g(a,l,t,u,d,x,w){var C=a.children(w);if(C.length){var T=m.addBorderNode(a,"_bt"),M=m.addBorderNode(a,"_bb"),I=a.node(w);a.setParent(T,w),I.borderTop=T,a.setParent(M,w),I.borderBottom=M,s.forEach(C,function(k){g(a,l,t,u,d,x,k);var P=a.node(k),H=P.borderTop?P.borderTop:k,V=P.borderBottom?P.borderBottom:k,B=P.borderTop?u:2*u,Y=H!==V?1:d-x[w]+1;a.setEdge(T,H,{weight:B,minlen:Y,nestingEdge:!0}),a.setEdge(V,M,{weight:B,minlen:Y,nestingEdge:!0})}),a.parent(w)||a.setEdge(l,T,{weight:0,minlen:d+x[w]})}else w!==l&&a.setEdge(l,w,{weight:0,minlen:t})}y.exports={run:function p(a){var l=m.addDummyNode(a,"root",{},"_root"),t=function c(a){var l={};function t(u,d){var x=a.children(u);x&&x.length&&s.forEach(x,function(w){t(w,d+1)}),l[u]=d}return s.forEach(a.children(),function(u){t(u,1)}),l}(a),u=s.max(s.values(t))-1,d=2*u+1;a.graph().nestingRoot=l,s.forEach(a.edges(),function(w){a.edge(w).minlen*=d});var x=function f(a){return s.reduce(a.edges(),function(l,t){return l+a.edge(t).weight},0)}(a)+1;s.forEach(a.children(),function(w){g(a,l,d,x,u,t,w)}),a.graph().nodeRankFactor=d},cleanup:function i(a){var l=a.graph();a.removeNode(l.nestingRoot),delete l.nestingRoot,s.forEach(a.edges(),function(t){a.edge(t).nestingEdge&&a.removeEdge(t)})}}},46607:(y,_,o)=>{"use strict";var s=o(45760),m=o(11510);y.exports={run:function p(f){f.graph().dummyChains=[],s.forEach(f.edges(),function(i){!function g(f,i){var a=i.v,l=f.node(a).rank,t=i.w,u=f.node(t).rank,d=i.name,x=f.edge(i),w=x.labelRank;if(u!==l+1){var C,T,M;for(f.removeEdge(i),M=0,++l;l<u;++M,++l)x.points=[],T={width:0,height:0,edgeLabel:x,edgeObj:i,rank:l},C=m.addDummyNode(f,"edge",T,"_d"),l===w&&(T.width=x.width,T.height=x.height,T.dummy="edge-label",T.labelpos=x.labelpos),f.setEdge(a,C,{weight:x.weight},d),0===M&&f.graph().dummyChains.push(C),a=C;f.setEdge(a,t,{weight:x.weight},d)}}(f,i)})},undo:function c(f){s.forEach(f.graph().dummyChains,function(i){var t,a=f.node(i),l=a.edgeLabel;for(f.setEdge(a.edgeObj,l);a.dummy;)t=f.successors(i)[0],f.removeNode(i),l.points.push({x:a.x,y:a.y}),"edge-label"===a.dummy&&(l.x=a.x,l.y=a.y,l.width=a.width,l.height=a.height),i=t,a=f.node(i)})}}},33034:(y,_,o)=>{var s=o(45760);y.exports=function m(p,g,c){var i,f={};s.forEach(c,function(a){for(var t,u,l=p.parent(a);l;){if((t=p.parent(l))?(u=f[t],f[t]=l):(u=i,i=l),u&&u!==l)return void g.setEdge(u,l);l=t}})}},81323:(y,_,o)=>{var s=o(45760);y.exports=function m(p,g){return s.map(g,function(c){var f=p.inEdges(c);if(f.length){var i=s.reduce(f,function(a,l){var t=p.edge(l),u=p.node(l.v);return{sum:a.sum+t.weight*u.order,weight:a.weight+t.weight}},{sum:0,weight:0});return{v:c,barycenter:i.sum/i.weight,weight:i.weight}}return{v:c}})}},1686:(y,_,o)=>{var s=o(45760),m=o(36456).Graph;y.exports=function p(c,f,i){var a=function g(c){for(var f;c.hasNode(f=s.uniqueId("_root")););return f}(c),l=new m({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(t){return c.node(t)});return s.forEach(c.nodes(),function(t){var u=c.node(t),d=c.parent(t);(u.rank===f||u.minRank<=f&&f<=u.maxRank)&&(l.setNode(t),l.setParent(t,d||a),s.forEach(c[i](t),function(x){var w=x.v===t?x.w:x.v,C=l.edge(w,t),T=s.isUndefined(C)?0:C.weight;l.setEdge(w,t,{weight:c.edge(x).weight+T})}),s.has(u,"minRank")&&l.setNode(t,{borderLeft:u.borderLeft[f],borderRight:u.borderRight[f]}))}),l}},18796:(y,_,o)=>{"use strict";var s=o(45760);function p(g,c,f){for(var i=s.zipObject(f,s.map(f,function(x,w){return w})),a=s.flatten(s.map(c,function(x){return s.sortBy(s.map(g.outEdges(x),function(w){return{pos:i[w.w],weight:g.edge(w).weight}}),"pos")}),!0),l=1;l<f.length;)l<<=1;var t=2*l-1;l-=1;var u=s.map(new Array(t),function(){return 0}),d=0;return s.forEach(a.forEach(function(x){var w=x.pos+l;u[w]+=x.weight;for(var C=0;w>0;)w%2&&(C+=u[w+1]),u[w=w-1>>1]+=x.weight;d+=x.weight*C})),d}y.exports=function m(g,c){for(var f=0,i=1;i<c.length;++i)f+=p(g,c[i-1],c[i]);return f}},32974:(y,_,o)=>{"use strict";var s=o(45760),m=o(49402),p=o(18796),g=o(61057),c=o(1686),f=o(33034),i=o(36456).Graph,a=o(11510);function t(x,w,C){return s.map(w,function(T){return c(x,T,C)})}function u(x,w){var C=new i;s.forEach(x,function(T){var M=T.graph().root,I=g(T,M,C,w);s.forEach(I.vs,function(k,P){T.node(k).order=P}),f(T,C,I.vs)})}function d(x,w){s.forEach(w,function(C){s.forEach(C,function(T,M){x.node(T).order=M})})}y.exports=function l(x){var w=a.maxRank(x),C=t(x,s.range(1,w+1),"inEdges"),T=t(x,s.range(w-1,-1,-1),"outEdges"),M=m(x);d(x,M);for(var k,I=Number.POSITIVE_INFINITY,P=0,H=0;H<4;++P,++H){u(P%2?C:T,P%4>=2),M=a.buildLayerMatrix(x);var V=p(x,M);V<I&&(H=0,k=s.cloneDeep(M),I=V)}d(x,k)}},49402:(y,_,o)=>{"use strict";var s=o(45760);y.exports=function m(p){var g={},c=s.filter(p.nodes(),function(t){return!p.children(t).length}),f=s.max(s.map(c,function(t){return p.node(t).rank})),i=s.map(s.range(f+1),function(){return[]});var l=s.sortBy(c,function(t){return p.node(t).rank});return s.forEach(l,function a(t){if(!s.has(g,t)){g[t]=!0;var u=p.node(t);i[u.rank].push(t),s.forEach(p.successors(t),a)}}),i}},83826:(y,_,o)=>{"use strict";var s=o(45760);y.exports=function m(c,f){var i={};return s.forEach(c,function(l,t){var u=i[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:t};s.isUndefined(l.barycenter)||(u.barycenter=l.barycenter,u.weight=l.weight)}),s.forEach(f.edges(),function(l){var t=i[l.v],u=i[l.w];!s.isUndefined(t)&&!s.isUndefined(u)&&(u.indegree++,t.out.push(i[l.w]))}),function p(c){var f=[];function i(t){return function(u){u.merged||(s.isUndefined(u.barycenter)||s.isUndefined(t.barycenter)||u.barycenter>=t.barycenter)&&function g(c,f){var i=0,a=0;c.weight&&(i+=c.barycenter*c.weight,a+=c.weight),f.weight&&(i+=f.barycenter*f.weight,a+=f.weight),c.vs=f.vs.concat(c.vs),c.barycenter=i/a,c.weight=a,c.i=Math.min(f.i,c.i),f.merged=!0}(t,u)}}function a(t){return function(u){u.in.push(t),0==--u.indegree&&c.push(u)}}for(;c.length;){var l=c.pop();f.push(l),s.forEach(l.in.reverse(),i(l)),s.forEach(l.out,a(l))}return s.map(s.filter(f,function(t){return!t.merged}),function(t){return s.pick(t,["vs","i","barycenter","weight"])})}(s.filter(i,function(l){return!l.indegree}))}},61057:(y,_,o)=>{var s=o(45760),m=o(81323),p=o(83826),g=o(93803);y.exports=function c(a,l,t,u){var d=a.children(l),x=a.node(l),w=x?x.borderLeft:void 0,C=x?x.borderRight:void 0,T={};w&&(d=s.filter(d,function(V){return V!==w&&V!==C}));var M=m(a,d);s.forEach(M,function(V){if(a.children(V.v).length){var B=c(a,V.v,t,u);T[V.v]=B,s.has(B,"barycenter")&&function i(a,l){s.isUndefined(a.barycenter)?(a.barycenter=l.barycenter,a.weight=l.weight):(a.barycenter=(a.barycenter*a.weight+l.barycenter*l.weight)/(a.weight+l.weight),a.weight+=l.weight)}(V,B)}});var I=p(M,t);!function f(a,l){s.forEach(a,function(t){t.vs=s.flatten(t.vs.map(function(u){return l[u]?l[u].vs:u}),!0)})}(I,T);var k=g(I,u);if(w&&(k.vs=s.flatten([w,k.vs,C],!0),a.predecessors(w).length)){var P=a.node(a.predecessors(w)[0]),H=a.node(a.predecessors(C)[0]);s.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+P.order+H.order)/(k.weight+2),k.weight+=2}return k}},93803:(y,_,o)=>{var s=o(45760),m=o(11510);function g(f,i,a){for(var l;i.length&&(l=s.last(i)).i<=a;)i.pop(),f.push(l.vs),a++;return a}y.exports=function p(f,i){var a=m.partition(f,function(T){return s.has(T,"barycenter")}),l=a.lhs,t=s.sortBy(a.rhs,function(T){return-T.i}),u=[],d=0,x=0,w=0;l.sort(function c(f){return function(i,a){return i.barycenter<a.barycenter?-1:i.barycenter>a.barycenter?1:f?a.i-i.i:i.i-a.i}}(!!i)),w=g(u,t,w),s.forEach(l,function(T){w+=T.vs.length,u.push(T.vs),d+=T.barycenter*T.weight,x+=T.weight,w=g(u,t,w)});var C={vs:s.flatten(u,!0)};return x&&(C.barycenter=d/x,C.weight=x),C}},60162:(y,_,o)=>{var s=o(45760);y.exports=function m(c){var f=function g(c){var f={},i=0;function a(l){var t=i;s.forEach(c.children(l),a),f[l]={low:t,lim:i++}}return s.forEach(c.children(),a),f}(c);s.forEach(c.graph().dummyChains,function(i){for(var a=c.node(i),l=a.edgeObj,t=function p(c,f,i,a){var x,w,l=[],t=[],u=Math.min(f[i].low,f[a].low),d=Math.max(f[i].lim,f[a].lim);x=i;do{x=c.parent(x),l.push(x)}while(x&&(f[x].low>u||d>f[x].lim));for(w=x,x=a;(x=c.parent(x))!==w;)t.push(x);return{path:l.concat(t.reverse()),lca:w}}(c,f,l.v,l.w),u=t.path,d=t.lca,x=0,w=u[x],C=!0;i!==l.w;){if(a=c.node(i),C){for(;(w=u[x])!==d&&c.node(w).maxRank<a.rank;)x++;w===d&&(C=!1)}if(!C){for(;x<u.length-1&&c.node(w=u[x+1]).minRank<=a.rank;)x++;w=u[x]}c.setParent(i,w),i=c.successors(i)[0]}})}},54058:(y,_,o)=>{"use strict";var s=o(45760),m=o(36456).Graph,p=o(11510);function g(I,k){var P={};return s.reduce(k,function H(V,B){var Y=0,S=0,O=V.length,L=s.last(B);return s.forEach(B,function(F,D){var z=function f(I,k){if(I.node(k).dummy)return s.find(I.predecessors(k),function(P){return I.node(P).dummy})}(I,F),K=z?I.node(z).order:O;(z||F===L)&&(s.forEach(B.slice(S,D+1),function(U){s.forEach(I.predecessors(U),function(G){var X=I.node(G),W=X.order;(W<Y||K<W)&&(!X.dummy||!I.node(U).dummy)&&i(P,G,U)})}),S=D+1,Y=K)}),B}),P}function c(I,k){var P={};function H(B,Y,S,O,L){var F;s.forEach(s.range(Y,S),function(D){F=B[D],I.node(F).dummy&&s.forEach(I.predecessors(F),function(z){var K=I.node(z);K.dummy&&(K.order<O||K.order>L)&&i(P,z,F)})})}return s.reduce(k,function V(B,Y){var O,S=-1,L=0;return s.forEach(Y,function(F,D){if("border"===I.node(F).dummy){var z=I.predecessors(F);z.length&&(O=I.node(z[0]).order,H(Y,L,D,S,O),L=D,S=O)}H(Y,L,Y.length,O,B.length)}),Y}),P}function i(I,k,P){if(k>P){var H=k;k=P,P=H}var V=I[k];V||(I[k]=V={}),V[P]=!0}function a(I,k,P){if(k>P){var H=k;k=P,P=H}return s.has(I[k],P)}function l(I,k,P,H){var V={},B={},Y={};return s.forEach(k,function(S){s.forEach(S,function(O,L){V[O]=O,B[O]=O,Y[O]=L})}),s.forEach(k,function(S){var O=-1;s.forEach(S,function(L){var F=H(L);if(F.length)for(var D=((F=s.sortBy(F,function(G){return Y[G]})).length-1)/2,z=Math.floor(D),K=Math.ceil(D);z<=K;++z){var U=F[z];B[L]===L&&O<Y[U]&&!a(P,L,U)&&(B[U]=L,B[L]=V[L]=V[U],O=Y[U])}})}),{root:V,align:B}}function t(I,k,P,H,V){var B={},Y=function u(I,k,P,H){var V=new m,B=I.graph(),Y=function T(I,k,P){return function(H,V,B){var L,Y=H.node(V),S=H.node(B),O=0;if(O+=Y.width/2,s.has(Y,"labelpos"))switch(Y.labelpos.toLowerCase()){case"l":L=-Y.width/2;break;case"r":L=Y.width/2}if(L&&(O+=P?L:-L),L=0,O+=(Y.dummy?k:I)/2,O+=(S.dummy?k:I)/2,O+=S.width/2,s.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":L=S.width/2;break;case"r":L=-S.width/2}return L&&(O+=P?L:-L),L=0,O}}(B.nodesep,B.edgesep,H);return s.forEach(k,function(S){var O;s.forEach(S,function(L){var F=P[L];if(V.setNode(F),O){var D=P[O],z=V.edge(D,F);V.setEdge(D,F,Math.max(Y(I,L,O),z||0))}O=L})}),V}(I,k,P,V),S=V?"borderLeft":"borderRight";function O(D,z){for(var K=Y.nodes(),U=K.pop(),G={};U;)G[U]?D(U):(G[U]=!0,K.push(U),K=K.concat(z(U))),U=K.pop()}return O(function L(D){B[D]=Y.inEdges(D).reduce(function(z,K){return Math.max(z,B[K.v]+Y.edge(K))},0)},Y.predecessors.bind(Y)),O(function F(D){var z=Y.outEdges(D).reduce(function(U,G){return Math.min(U,B[G.w]-Y.edge(G))},Number.POSITIVE_INFINITY),K=I.node(D);z!==Number.POSITIVE_INFINITY&&K.borderType!==S&&(B[D]=Math.max(B[D],z))},Y.successors.bind(Y)),s.forEach(H,function(D){B[D]=B[P[D]]}),B}function d(I,k){return s.minBy(s.values(k),function(P){var H=Number.NEGATIVE_INFINITY,V=Number.POSITIVE_INFINITY;return s.forIn(P,function(B,Y){var S=function M(I,k){return I.node(k).width}(I,Y)/2;H=Math.max(B+S,H),V=Math.min(B-S,V)}),H-V})}function x(I,k){var P=s.values(k),H=s.min(P),V=s.max(P);s.forEach(["u","d"],function(B){s.forEach(["l","r"],function(Y){var L,S=B+Y,O=I[S];if(O!==k){var F=s.values(O);(L="l"===Y?H-s.min(F):V-s.max(F))&&(I[S]=s.mapValues(O,function(D){return D+L}))}})})}function w(I,k){return s.mapValues(I.ul,function(P,H){if(k)return I[k.toLowerCase()][H];var V=s.sortBy(s.map(I,H));return(V[1]+V[2])/2})}y.exports={positionX:function C(I){var V,k=p.buildLayerMatrix(I),P=s.merge(g(I,k),c(I,k)),H={};s.forEach(["u","d"],function(Y){V="u"===Y?k:s.values(k).reverse(),s.forEach(["l","r"],function(S){"r"===S&&(V=s.map(V,function(D){return s.values(D).reverse()}));var O=("u"===Y?I.predecessors:I.successors).bind(I),L=l(I,V,P,O),F=t(I,V,L.root,L.align,"r"===S);"r"===S&&(F=s.mapValues(F,function(D){return-D})),H[Y+S]=F})});var B=d(I,H);return x(H,B),w(H,I.graph().align)},findType1Conflicts:g,findType2Conflicts:c,addConflict:i,hasConflict:a,verticalAlignment:l,horizontalCompaction:t,alignCoordinates:x,findSmallestWidthAlignment:d,balance:w}},78226:(y,_,o)=>{"use strict";var s=o(45760),m=o(11510),p=o(54058).positionX;y.exports=function g(f){(function c(f){var i=m.buildLayerMatrix(f),a=f.graph().ranksep,l=0;s.forEach(i,function(t){var u=s.max(s.map(t,function(d){return f.node(d).height}));s.forEach(t,function(d){f.node(d).y=l+u/2}),l+=u+a})})(f=m.asNonCompoundGraph(f)),s.forEach(p(f),function(i,a){f.node(a).x=i})}},96632:(y,_,o)=>{"use strict";var s=o(45760),m=o(36456).Graph,p=o(1916).slack;function c(a,l){return s.forEach(a.nodes(),function t(u){s.forEach(l.nodeEdges(u),function(d){var x=d.v,w=u===x?d.w:x;!a.hasNode(w)&&!p(l,d)&&(a.setNode(w,{}),a.setEdge(u,w,{}),t(w))})}),a.nodeCount()}function f(a,l){return s.minBy(l.edges(),function(t){if(a.hasNode(t.v)!==a.hasNode(t.w))return p(l,t)})}function i(a,l,t){s.forEach(a.nodes(),function(u){l.node(u).rank+=t})}y.exports=function g(a){var d,x,l=new m({directed:!1}),t=a.nodes()[0],u=a.nodeCount();for(l.setNode(t,{});c(l,a)<u;)d=f(l,a),x=l.hasNode(d.v)?p(a,d):-p(a,d),i(l,a,x);return l}},94124:(y,_,o)=>{"use strict";var m=o(1916).longestPath,p=o(96632),g=o(63804);y.exports=function c(l){switch(l.graph().ranker){case"network-simplex":default:a(l);break;case"tight-tree":!function i(l){m(l),p(l)}(l);break;case"longest-path":f(l)}};var f=m;function a(l){g(l)}},63804:(y,_,o)=>{"use strict";var s=o(45760),m=o(96632),p=o(1916).slack,g=o(1916).longestPath,c=o(36456).alg.preorder,f=o(36456).alg.postorder,i=o(11510).simplify;function a(P){P=i(P),g(P);var V,H=m(P);for(d(H),l(H,P);V=w(H);)T(H,P,V,C(H,P,V))}function l(P,H){var V=f(P,P.nodes());V=V.slice(0,V.length-1),s.forEach(V,function(B){!function t(P,H,V){var B=P.node(V),Y=B.parent;P.edge(V,Y).cutvalue=u(P,H,V)}(P,H,B)})}function u(P,H,V){var Y=P.node(V).parent,S=!0,O=H.edge(V,Y),L=0;return O||(S=!1,O=H.edge(Y,V)),L=O.weight,s.forEach(H.nodeEdges(V),function(F){var D=F.v===V,z=D?F.w:F.v;if(z!==Y){var K=D===S,U=H.edge(F).weight;if(L+=K?U:-U,function I(P,H,V){return P.hasEdge(H,V)}(P,V,z)){var G=P.edge(V,z).cutvalue;L+=K?-G:G}}}),L}function d(P,H){arguments.length<2&&(H=P.nodes()[0]),x(P,{},1,H)}function x(P,H,V,B,Y){var S=V,O=P.node(B);return H[B]=!0,s.forEach(P.neighbors(B),function(L){s.has(H,L)||(V=x(P,H,V,L,B))}),O.low=S,O.lim=V++,Y?O.parent=Y:delete O.parent,V}function w(P){return s.find(P.edges(),function(H){return P.edge(H).cutvalue<0})}function C(P,H,V){var B=V.v,Y=V.w;H.hasEdge(B,Y)||(B=V.w,Y=V.v);var S=P.node(B),O=P.node(Y),L=S,F=!1;S.lim>O.lim&&(L=O,F=!0);var D=s.filter(H.edges(),function(z){return F===k(P,P.node(z.v),L)&&F!==k(P,P.node(z.w),L)});return s.minBy(D,function(z){return p(H,z)})}function T(P,H,V,B){var Y=V.v,S=V.w;P.removeEdge(Y,S),P.setEdge(B.v,B.w,{}),d(P),l(P,H),function M(P,H){var V=s.find(P.nodes(),function(Y){return!H.node(Y).parent}),B=c(P,V);B=B.slice(1),s.forEach(B,function(Y){var S=P.node(Y).parent,O=H.edge(Y,S),L=!1;O||(O=H.edge(S,Y),L=!0),H.node(Y).rank=H.node(S).rank+(L?O.minlen:-O.minlen)})}(P,H)}function k(P,H,V){return V.low<=H.lim&&H.lim<=V.lim}y.exports=a,a.initLowLimValues=d,a.initCutValues=l,a.calcCutValue=u,a.leaveEdge=w,a.enterEdge=C,a.exchangeEdges=T},1916:(y,_,o)=>{"use strict";var s=o(45760);y.exports={longestPath:function m(g){var c={};s.forEach(g.sources(),function f(i){var a=g.node(i);if(s.has(c,i))return a.rank;c[i]=!0;var l=s.min(s.map(g.outEdges(i),function(t){return f(t.w)-g.edge(t).minlen}));return(l===Number.POSITIVE_INFINITY||null==l)&&(l=0),a.rank=l})},slack:function p(g,c){return g.node(c.w).rank-g.node(c.v).rank-g.edge(c).minlen}}},11510:(y,_,o)=>{"use strict";var s=o(45760),m=o(36456).Graph;function p(M,I,k,P){var H;do{H=s.uniqueId(P)}while(M.hasNode(H));return k.dummy=I,M.setNode(H,k),H}function x(M){return s.max(s.map(M.nodes(),function(I){var k=M.node(I).rank;if(!s.isUndefined(k))return k}))}y.exports={addDummyNode:p,simplify:function g(M){var I=(new m).setGraph(M.graph());return s.forEach(M.nodes(),function(k){I.setNode(k,M.node(k))}),s.forEach(M.edges(),function(k){var P=I.edge(k.v,k.w)||{weight:0,minlen:1},H=M.edge(k);I.setEdge(k.v,k.w,{weight:P.weight+H.weight,minlen:Math.max(P.minlen,H.minlen)})}),I},asNonCompoundGraph:function c(M){var I=new m({multigraph:M.isMultigraph()}).setGraph(M.graph());return s.forEach(M.nodes(),function(k){M.children(k).length||I.setNode(k,M.node(k))}),s.forEach(M.edges(),function(k){I.setEdge(k,M.edge(k))}),I},successorWeights:function f(M){var I=s.map(M.nodes(),function(k){var P={};return s.forEach(M.outEdges(k),function(H){P[H.w]=(P[H.w]||0)+M.edge(H).weight}),P});return s.zipObject(M.nodes(),I)},predecessorWeights:function i(M){var I=s.map(M.nodes(),function(k){var P={};return s.forEach(M.inEdges(k),function(H){P[H.v]=(P[H.v]||0)+M.edge(H).weight}),P});return s.zipObject(M.nodes(),I)},intersectRect:function a(M,I){var S,O,k=M.x,P=M.y,H=I.x-k,V=I.y-P,B=M.width/2,Y=M.height/2;if(!H&&!V)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(V)*B>Math.abs(H)*Y?(V<0&&(Y=-Y),S=Y*H/V,O=Y):(H<0&&(B=-B),S=B,O=B*V/H),{x:k+S,y:P+O}},buildLayerMatrix:function l(M){var I=s.map(s.range(x(M)+1),function(){return[]});return s.forEach(M.nodes(),function(k){var P=M.node(k),H=P.rank;s.isUndefined(H)||(I[H][P.order]=k)}),I},normalizeRanks:function t(M){var I=s.min(s.map(M.nodes(),function(k){return M.node(k).rank}));s.forEach(M.nodes(),function(k){var P=M.node(k);s.has(P,"rank")&&(P.rank-=I)})},removeEmptyRanks:function u(M){var I=s.min(s.map(M.nodes(),function(V){return M.node(V).rank})),k=[];s.forEach(M.nodes(),function(V){var B=M.node(V).rank-I;k[B]||(k[B]=[]),k[B].push(V)});var P=0,H=M.graph().nodeRankFactor;s.forEach(k,function(V,B){s.isUndefined(V)&&B%H!=0?--P:P&&s.forEach(V,function(Y){M.node(Y).rank+=P})})},addBorderNode:function d(M,I,k,P){var H={width:0,height:0};return arguments.length>=4&&(H.rank=k,H.order=P),p(M,"border",H,I)},maxRank:x,partition:function w(M,I){var k={lhs:[],rhs:[]};return s.forEach(M,function(P){I(P)?k.lhs.push(P):k.rhs.push(P)}),k},time:function C(M,I){var k=s.now();try{return I()}finally{console.log(M+" time: "+(s.now()-k)+"ms")}},notime:function T(M,I){return I()}}},28126:y=>{y.exports="0.8.5"},85510:(y,_,o)=>{var s=o(51838);y.exports={Graph:s.Graph,json:o(21088),alg:o(83430),version:s.version}},86730:(y,_,o)=>{var s=o(79138);y.exports=function m(p){var f,g={},c=[];function i(a){s.has(g,a)||(g[a]=!0,f.push(a),s.each(p.successors(a),i),s.each(p.predecessors(a),i))}return s.each(p.nodes(),function(a){f=[],i(a),f.length&&c.push(f)}),c}},22163:(y,_,o)=>{var s=o(79138);function p(g,c,f,i,a,l){s.has(i,c)||(i[c]=!0,f||l.push(c),s.each(a(c),function(t){p(g,t,f,i,a,l)}),f&&l.push(c))}y.exports=function m(g,c,f){s.isArray(c)||(c=[c]);var i=(g.isDirected()?g.successors:g.neighbors).bind(g),a=[],l={};return s.each(c,function(t){if(!g.hasNode(t))throw new Error("Graph does not have node: "+t);p(g,t,"post"===f,l,i,a)}),a}},25668:(y,_,o)=>{var s=o(61718),m=o(79138);y.exports=function p(g,c,f){return m.transform(g.nodes(),function(i,a){i[a]=s(g,a,c,f)},{})}},61718:(y,_,o)=>{var s=o(79138),m=o(31919);y.exports=function g(f,i,a,l){return function c(f,i,a,l){var d,x,t={},u=new m,w=function(C){var T=C.v!==d?C.v:C.w,M=t[T],I=a(C),k=x.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+C+" Weight: "+I);k<M.distance&&(M.distance=k,M.predecessor=d,u.decrease(T,k))};for(f.nodes().forEach(function(C){var T=C===i?0:Number.POSITIVE_INFINITY;t[C]={distance:T},u.add(C,T)});u.size()>0&&(d=u.removeMin(),(x=t[d]).distance!==Number.POSITIVE_INFINITY);)l(d).forEach(w);return t}(f,String(i),a||p,l||function(t){return f.outEdges(t)})};var p=s.constant(1)},9611:(y,_,o)=>{var s=o(79138),m=o(73585);y.exports=function p(g){return s.filter(m(g),function(c){return c.length>1||1===c.length&&g.hasEdge(c[0],c[0])})}},22881:(y,_,o)=>{var s=o(79138);y.exports=function p(c,f,i){return function g(c,f,i){var a={},l=c.nodes();return l.forEach(function(t){a[t]={},a[t][t]={distance:0},l.forEach(function(u){t!==u&&(a[t][u]={distance:Number.POSITIVE_INFINITY})}),i(t).forEach(function(u){var d=u.v===t?u.w:u.v,x=f(u);a[t][d]={distance:x,predecessor:t}})}),l.forEach(function(t){var u=a[t];l.forEach(function(d){var x=a[d];l.forEach(function(w){var C=x[t],T=u[w],M=x[w],I=C.distance+T.distance;I<M.distance&&(M.distance=I,M.predecessor=T.predecessor)})})}),a}(c,f||m,i||function(a){return c.outEdges(a)})};var m=s.constant(1)},83430:(y,_,o)=>{y.exports={components:o(86730),dijkstra:o(61718),dijkstraAll:o(25668),findCycles:o(9611),floydWarshall:o(22881),isAcyclic:o(46693),postorder:o(46694),preorder:o(5330),prim:o(46823),tarjan:o(73585),topsort:o(52180)}},46693:(y,_,o)=>{var s=o(52180);y.exports=function m(p){try{s(p)}catch(g){if(g instanceof s.CycleException)return!1;throw g}return!0}},46694:(y,_,o)=>{var s=o(22163);y.exports=function m(p,g){return s(p,g,"post")}},5330:(y,_,o)=>{var s=o(22163);y.exports=function m(p,g){return s(p,g,"pre")}},46823:(y,_,o)=>{var s=o(79138),m=o(66568),p=o(31919);y.exports=function g(c,f){var t,i=new m,a={},l=new p;function u(x){var w=x.v===t?x.w:x.v,C=l.priority(w);if(void 0!==C){var T=f(x);T<C&&(a[w]=t,l.decrease(w,T))}}if(0===c.nodeCount())return i;s.each(c.nodes(),function(x){l.add(x,Number.POSITIVE_INFINITY),i.setNode(x)}),l.decrease(c.nodes()[0],0);for(var d=!1;l.size()>0;){if(t=l.removeMin(),s.has(a,t))i.setEdge(t,a[t]);else{if(d)throw new Error("Input graph is not connected: "+c);d=!0}c.nodeEdges(t).forEach(u)}return i}},73585:(y,_,o)=>{var s=o(79138);y.exports=function m(p){var g=0,c=[],f={},i=[];function a(l){var t=f[l]={onStack:!0,lowlink:g,index:g++};if(c.push(l),p.successors(l).forEach(function(x){s.has(f,x)?f[x].onStack&&(t.lowlink=Math.min(t.lowlink,f[x].index)):(a(x),t.lowlink=Math.min(t.lowlink,f[x].lowlink))}),t.lowlink===t.index){var d,u=[];do{d=c.pop(),f[d].onStack=!1,u.push(d)}while(l!==d);i.push(u)}}return p.nodes().forEach(function(l){s.has(f,l)||a(l)}),i}},52180:(y,_,o)=>{var s=o(79138);function m(g){var c={},f={},i=[];if(s.each(g.sinks(),function a(l){if(s.has(f,l))throw new p;s.has(c,l)||(f[l]=!0,c[l]=!0,s.each(g.predecessors(l),a),delete f[l],i.push(l))}),s.size(c)!==g.nodeCount())throw new p;return i}function p(){}y.exports=m,m.CycleException=p,p.prototype=new Error},31919:(y,_,o)=>{var s=o(79138);function m(){this._arr=[],this._keyIndices={}}y.exports=m,m.prototype.size=function(){return this._arr.length},m.prototype.keys=function(){return this._arr.map(function(p){return p.key})},m.prototype.has=function(p){return s.has(this._keyIndices,p)},m.prototype.priority=function(p){var g=this._keyIndices[p];if(void 0!==g)return this._arr[g].priority},m.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},m.prototype.add=function(p,g){var c=this._keyIndices;if(p=String(p),!s.has(c,p)){var f=this._arr,i=f.length;return c[p]=i,f.push({key:p,priority:g}),this._decrease(i),!0}return!1},m.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var p=this._arr.pop();return delete this._keyIndices[p.key],this._heapify(0),p.key},m.prototype.decrease=function(p,g){var c=this._keyIndices[p];if(g>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+p+" Old: "+this._arr[c].priority+" New: "+g);this._arr[c].priority=g,this._decrease(c)},m.prototype._heapify=function(p){var g=this._arr,c=2*p,f=c+1,i=p;c<g.length&&(i=g[c].priority<g[i].priority?c:i,f<g.length&&(i=g[f].priority<g[i].priority?f:i),i!==p&&(this._swap(p,i),this._heapify(i)))},m.prototype._decrease=function(p){for(var f,g=this._arr,c=g[p].priority;0!==p&&!(g[f=p>>1].priority<c);)this._swap(p,f),p=f},m.prototype._swap=function(p,g){var c=this._arr,f=this._keyIndices,i=c[p],a=c[g];c[p]=a,c[g]=i,f[a.key]=p,f[i.key]=g}},66568:(y,_,o)=>{"use strict";var s=o(79138);y.exports=c;var p="\0";function c(u){this._isDirected=!s.has(u,"directed")||u.directed,this._isMultigraph=!!s.has(u,"multigraph")&&u.multigraph,this._isCompound=!!s.has(u,"compound")&&u.compound,this._label=void 0,this._defaultNodeLabelFn=s.constant(void 0),this._defaultEdgeLabelFn=s.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[p]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function f(u,d){u[d]?u[d]++:u[d]=1}function i(u,d){--u[d]||delete u[d]}function a(u,d,x,w){var C=""+d,T=""+x;if(!u&&C>T){var M=C;C=T,T=M}return C+"\x01"+T+"\x01"+(s.isUndefined(w)?"\0":w)}function l(u,d,x,w){var C=""+d,T=""+x;if(!u&&C>T){var M=C;C=T,T=M}var I={v:C,w:T};return w&&(I.name=w),I}function t(u,d){return a(u,d.v,d.w,d.name)}c.prototype._nodeCount=0,c.prototype._edgeCount=0,c.prototype.isDirected=function(){return this._isDirected},c.prototype.isMultigraph=function(){return this._isMultigraph},c.prototype.isCompound=function(){return this._isCompound},c.prototype.setGraph=function(u){return this._label=u,this},c.prototype.graph=function(){return this._label},c.prototype.setDefaultNodeLabel=function(u){return s.isFunction(u)||(u=s.constant(u)),this._defaultNodeLabelFn=u,this},c.prototype.nodeCount=function(){return this._nodeCount},c.prototype.nodes=function(){return s.keys(this._nodes)},c.prototype.sources=function(){var u=this;return s.filter(this.nodes(),function(d){return s.isEmpty(u._in[d])})},c.prototype.sinks=function(){var u=this;return s.filter(this.nodes(),function(d){return s.isEmpty(u._out[d])})},c.prototype.setNodes=function(u,d){var x=arguments,w=this;return s.each(u,function(C){x.length>1?w.setNode(C,d):w.setNode(C)}),this},c.prototype.setNode=function(u,d){return s.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=d),this):(this._nodes[u]=arguments.length>1?d:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=p,this._children[u]={},this._children[p][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},c.prototype.node=function(u){return this._nodes[u]},c.prototype.hasNode=function(u){return s.has(this._nodes,u)},c.prototype.removeNode=function(u){var d=this;if(s.has(this._nodes,u)){var x=function(w){d.removeEdge(d._edgeObjs[w])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],s.each(this.children(u),function(w){d.setParent(w)}),delete this._children[u]),s.each(s.keys(this._in[u]),x),delete this._in[u],delete this._preds[u],s.each(s.keys(this._out[u]),x),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},c.prototype.setParent=function(u,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(s.isUndefined(d))d=p;else{for(var x=d+="";!s.isUndefined(x);x=this.parent(x))if(x===u)throw new Error("Setting "+d+" as parent of "+u+" would create a cycle");this.setNode(d)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=d,this._children[d][u]=!0,this},c.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},c.prototype.parent=function(u){if(this._isCompound){var d=this._parent[u];if(d!==p)return d}},c.prototype.children=function(u){if(s.isUndefined(u)&&(u=p),this._isCompound){var d=this._children[u];if(d)return s.keys(d)}else{if(u===p)return this.nodes();if(this.hasNode(u))return[]}},c.prototype.predecessors=function(u){var d=this._preds[u];if(d)return s.keys(d)},c.prototype.successors=function(u){var d=this._sucs[u];if(d)return s.keys(d)},c.prototype.neighbors=function(u){var d=this.predecessors(u);if(d)return s.union(d,this.successors(u))},c.prototype.isLeaf=function(u){return 0===(this.isDirected()?this.successors(u):this.neighbors(u)).length},c.prototype.filterNodes=function(u){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var x=this;s.each(this._nodes,function(T,M){u(M)&&d.setNode(M,T)}),s.each(this._edgeObjs,function(T){d.hasNode(T.v)&&d.hasNode(T.w)&&d.setEdge(T,x.edge(T))});var w={};function C(T){var M=x.parent(T);return void 0===M||d.hasNode(M)?(w[T]=M,M):M in w?w[M]:C(M)}return this._isCompound&&s.each(d.nodes(),function(T){d.setParent(T,C(T))}),d},c.prototype.setDefaultEdgeLabel=function(u){return s.isFunction(u)||(u=s.constant(u)),this._defaultEdgeLabelFn=u,this},c.prototype.edgeCount=function(){return this._edgeCount},c.prototype.edges=function(){return s.values(this._edgeObjs)},c.prototype.setPath=function(u,d){var x=this,w=arguments;return s.reduce(u,function(C,T){return w.length>1?x.setEdge(C,T,d):x.setEdge(C,T),T}),this},c.prototype.setEdge=function(){var u,d,x,w,C=!1,T=arguments[0];"object"==typeof T&&null!==T&&"v"in T?(u=T.v,d=T.w,x=T.name,2===arguments.length&&(w=arguments[1],C=!0)):(u=T,d=arguments[1],x=arguments[3],arguments.length>2&&(w=arguments[2],C=!0)),u=""+u,d=""+d,s.isUndefined(x)||(x=""+x);var M=a(this._isDirected,u,d,x);if(s.has(this._edgeLabels,M))return C&&(this._edgeLabels[M]=w),this;if(!s.isUndefined(x)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(d),this._edgeLabels[M]=C?w:this._defaultEdgeLabelFn(u,d,x);var I=l(this._isDirected,u,d,x);return u=I.v,d=I.w,Object.freeze(I),this._edgeObjs[M]=I,f(this._preds[d],u),f(this._sucs[u],d),this._in[d][M]=I,this._out[u][M]=I,this._edgeCount++,this},c.prototype.edge=function(u,d,x){var w=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,u,d,x);return this._edgeLabels[w]},c.prototype.hasEdge=function(u,d,x){var w=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,u,d,x);return s.has(this._edgeLabels,w)},c.prototype.removeEdge=function(u,d,x){var w=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,u,d,x),C=this._edgeObjs[w];return C&&(u=C.v,d=C.w,delete this._edgeLabels[w],delete this._edgeObjs[w],i(this._preds[d],u),i(this._sucs[u],d),delete this._in[d][w],delete this._out[u][w],this._edgeCount--),this},c.prototype.inEdges=function(u,d){var x=this._in[u];if(x){var w=s.values(x);return d?s.filter(w,function(C){return C.v===d}):w}},c.prototype.outEdges=function(u,d){var x=this._out[u];if(x){var w=s.values(x);return d?s.filter(w,function(C){return C.w===d}):w}},c.prototype.nodeEdges=function(u,d){var x=this.inEdges(u,d);if(x)return x.concat(this.outEdges(u,d))}},51838:(y,_,o)=>{y.exports={Graph:o(66568),version:o(75089)}},21088:(y,_,o)=>{var s=o(79138),m=o(66568);function g(i){return s.map(i.nodes(),function(a){var l=i.node(a),t=i.parent(a),u={v:a};return s.isUndefined(l)||(u.value=l),s.isUndefined(t)||(u.parent=t),u})}function c(i){return s.map(i.edges(),function(a){var l=i.edge(a),t={v:a.v,w:a.w};return s.isUndefined(a.name)||(t.name=a.name),s.isUndefined(l)||(t.value=l),t})}y.exports={write:function p(i){var a={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:g(i),edges:c(i)};return s.isUndefined(i.graph())||(a.value=s.clone(i.graph())),a},read:function f(i){var a=new m(i.options).setGraph(i.value);return s.each(i.nodes,function(l){a.setNode(l.v,l.value),l.parent&&a.setParent(l.v,l.parent)}),s.each(i.edges,function(l){a.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),a}}},79138:(y,_,o)=>{var s;try{s={clone:o(11094),constant:o(76684),each:o(35474),filter:o(35281),has:o(64972),isArray:o(21503),isEmpty:o(71973),isFunction:o(75946),isUndefined:o(34235),keys:o(118),map:o(19984),reduce:o(81337),size:o(55637),transform:o(89416),union:o(68921),values:o(90377)}}catch{}s||(s=window._),y.exports=s},75089:y=>{y.exports="2.1.8"},37244:(y,_,o)=>{var p=o(53436)(o(12119),"DataView");y.exports=p},54994:(y,_,o)=>{var s=o(64312),m=o(46421),p=o(15764),g=o(18685),c=o(26676);function f(i){var a=-1,l=null==i?0:i.length;for(this.clear();++a<l;){var t=i[a];this.set(t[0],t[1])}}f.prototype.clear=s,f.prototype.delete=m,f.prototype.get=p,f.prototype.has=g,f.prototype.set=c,y.exports=f},9215:(y,_,o)=>{var s=o(41840),m=o(34378),p=o(54981),g=o(67343),c=o(98895);function f(i){var a=-1,l=null==i?0:i.length;for(this.clear();++a<l;){var t=i[a];this.set(t[0],t[1])}}f.prototype.clear=s,f.prototype.delete=m,f.prototype.get=p,f.prototype.has=g,f.prototype.set=c,y.exports=f},51501:(y,_,o)=>{var p=o(53436)(o(12119),"Map");y.exports=p},99850:(y,_,o)=>{var s=o(10638),m=o(11184),p=o(70866),g=o(43771),c=o(51772);function f(i){var a=-1,l=null==i?0:i.length;for(this.clear();++a<l;){var t=i[a];this.set(t[0],t[1])}}f.prototype.clear=s,f.prototype.delete=m,f.prototype.get=p,f.prototype.has=g,f.prototype.set=c,y.exports=f},44267:(y,_,o)=>{var p=o(53436)(o(12119),"Promise");y.exports=p},46323:(y,_,o)=>{var p=o(53436)(o(12119),"Set");y.exports=p},58849:(y,_,o)=>{var s=o(99850),m=o(4600),p=o(31387);function g(c){var f=-1,i=null==c?0:c.length;for(this.__data__=new s;++f<i;)this.add(c[f])}g.prototype.add=g.prototype.push=m,g.prototype.has=p,y.exports=g},2858:(y,_,o)=>{var s=o(9215),m=o(13720),p=o(64410),g=o(45576),c=o(22247),f=o(41585);function i(a){var l=this.__data__=new s(a);this.size=l.size}i.prototype.clear=m,i.prototype.delete=p,i.prototype.get=g,i.prototype.has=c,i.prototype.set=f,y.exports=i},60443:(y,_,o)=>{var m=o(12119).Symbol;y.exports=m},73457:(y,_,o)=>{var m=o(12119).Uint8Array;y.exports=m},24243:(y,_,o)=>{var p=o(53436)(o(12119),"WeakMap");y.exports=p},26999:y=>{y.exports=function _(o,s,m){switch(m.length){case 0:return o.call(s);case 1:return o.call(s,m[0]);case 2:return o.call(s,m[0],m[1]);case 3:return o.call(s,m[0],m[1],m[2])}return o.apply(s,m)}},96837:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length;++m<p&&!1!==s(o[m],m,o););return o}},69779:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length,g=0,c=[];++m<p;){var f=o[m];s(f,m,o)&&(c[g++]=f)}return c}},61253:(y,_,o)=>{var s=o(14164);y.exports=function m(p,g){return!!(null==p?0:p.length)&&s(p,g,0)>-1}},37609:y=>{y.exports=function _(o,s,m){for(var p=-1,g=null==o?0:o.length;++p<g;)if(m(s,o[p]))return!0;return!1}},72271:(y,_,o)=>{var s=o(85334),m=o(77151),p=o(21503),g=o(80891),c=o(58442),f=o(48159),a=Object.prototype.hasOwnProperty;y.exports=function l(t,u){var d=p(t),x=!d&&m(t),w=!d&&!x&&g(t),C=!d&&!x&&!w&&f(t),T=d||x||w||C,M=T?s(t.length,String):[],I=M.length;for(var k in t)(u||a.call(t,k))&&(!T||!("length"==k||w&&("offset"==k||"parent"==k)||C&&("buffer"==k||"byteLength"==k||"byteOffset"==k)||c(k,I)))&&M.push(k);return M}},84633:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length,g=Array(p);++m<p;)g[m]=s(o[m],m,o);return g}},34883:y=>{y.exports=function _(o,s){for(var m=-1,p=s.length,g=o.length;++m<p;)o[g+m]=s[m];return o}},8745:y=>{y.exports=function _(o,s,m,p){var g=-1,c=null==o?0:o.length;for(p&&c&&(m=o[++g]);++g<c;)m=s(m,o[g],g,o);return m}},79503:y=>{y.exports=function _(o,s){for(var m=-1,p=null==o?0:o.length;++m<p;)if(s(o[m],m,o))return!0;return!1}},75481:(y,_,o)=>{var m=o(11847)("length");y.exports=m},49276:(y,_,o)=>{var s=o(85683),m=o(20217);y.exports=function p(g,c,f){(void 0!==f&&!m(g[c],f)||void 0===f&&!(c in g))&&s(g,c,f)}},89719:(y,_,o)=>{var s=o(85683),m=o(20217),g=Object.prototype.hasOwnProperty;y.exports=function c(f,i,a){var l=f[i];(!g.call(f,i)||!m(l,a)||void 0===a&&!(i in f))&&s(f,i,a)}},43503:(y,_,o)=>{var s=o(20217);y.exports=function m(p,g){for(var c=p.length;c--;)if(s(p[c][0],g))return c;return-1}},94121:(y,_,o)=>{var s=o(31989),m=o(118);y.exports=function p(g,c){return g&&s(c,m(c),g)}},99287:(y,_,o)=>{var s=o(31989),m=o(16555);y.exports=function p(g,c){return g&&s(c,m(c),g)}},85683:(y,_,o)=>{var s=o(56713);y.exports=function m(p,g,c){"__proto__"==g&&s?s(p,g,{configurable:!0,enumerable:!0,value:c,writable:!0}):p[g]=c}},44462:(y,_,o)=>{var s=o(2858),m=o(96837),p=o(89719),g=o(94121),c=o(99287),f=o(19292),i=o(99454),a=o(64093),l=o(59905),t=o(47597),u=o(6967),d=o(28794),x=o(76782),w=o(37878),C=o(4264),T=o(21503),M=o(80891),I=o(13222),k=o(25940),P=o(90799),H=o(118),V=o(16555),O="[object Arguments]",K="[object Function]",W="[object Object]",gt={};gt[O]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object DataView]"]=gt["[object Boolean]"]=gt["[object Date]"]=gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Map]"]=gt["[object Number]"]=gt[W]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object Symbol]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Error]"]=gt[K]=gt["[object WeakMap]"]=!1,y.exports=function Tt(wt,Xt,Ft,on,ue,Ut){var St,ee=1&Xt,Wt=2&Xt,Be=4&Xt;if(Ft&&(St=ue?Ft(wt,on,ue,Ut):Ft(wt)),void 0!==St)return St;if(!k(wt))return wt;var _e=T(wt);if(_e){if(St=x(wt),!ee)return i(wt,St)}else{var Vt=d(wt),He=Vt==K||"[object GeneratorFunction]"==Vt;if(M(wt))return f(wt,ee);if(Vt==W||Vt==O||He&&!ue){if(St=Wt||He?{}:C(wt),!ee)return Wt?l(wt,c(St,wt)):a(wt,g(St,wt))}else{if(!gt[Vt])return ue?wt:{};St=w(wt,Vt,ee)}}Ut||(Ut=new s);var Re=Ut.get(wt);if(Re)return Re;Ut.set(wt,St),P(wt)?wt.forEach(function(Bt){St.add(Tt(Bt,Xt,Ft,Bt,wt,Ut))}):I(wt)&&wt.forEach(function(Bt,zt){St.set(zt,Tt(Bt,Xt,Ft,zt,wt,Ut))});var Ve=_e?void 0:(Be?Wt?u:t:Wt?V:H)(wt);return m(Ve||wt,function(Bt,zt){Ve&&(Bt=wt[zt=Bt]),p(St,zt,Tt(Bt,Xt,Ft,zt,wt,Ut))}),St}},78858:(y,_,o)=>{var s=o(25940),m=Object.create,p=function(){function g(){}return function(c){if(!s(c))return{};if(m)return m(c);g.prototype=c;var f=new g;return g.prototype=void 0,f}}();y.exports=p},43132:(y,_,o)=>{var s=o(45184),p=o(16539)(s);y.exports=p},67308:(y,_,o)=>{var s=o(44129);y.exports=function m(p,g,c){for(var f=-1,i=p.length;++f<i;){var a=p[f],l=g(a);if(null!=l&&(void 0===t?l==l&&!s(l):c(l,t)))var t=l,u=a}return u}},33609:(y,_,o)=>{var s=o(43132);y.exports=function m(p,g){var c=[];return s(p,function(f,i,a){g(f,i,a)&&c.push(f)}),c}},65317:y=>{y.exports=function _(o,s,m,p){for(var g=o.length,c=m+(p?1:-1);p?c--:++c<g;)if(s(o[c],c,o))return c;return-1}},50686:(y,_,o)=>{var s=o(34883),m=o(75039);y.exports=function p(g,c,f,i,a){var l=-1,t=g.length;for(f||(f=m),a||(a=[]);++l<t;){var u=g[l];c>0&&f(u)?c>1?p(u,c-1,f,i,a):s(a,u):i||(a[a.length]=u)}return a}},30755:(y,_,o)=>{var m=o(40456)();y.exports=m},45184:(y,_,o)=>{var s=o(30755),m=o(118);y.exports=function p(g,c){return g&&s(g,c,m)}},15456:(y,_,o)=>{var s=o(65456),m=o(68533);y.exports=function p(g,c){for(var f=0,i=(c=s(c,g)).length;null!=g&&f<i;)g=g[m(c[f++])];return f&&f==i?g:void 0}},38247:(y,_,o)=>{var s=o(34883),m=o(21503);y.exports=function p(g,c,f){var i=c(g);return m(g)?i:s(i,f(g))}},93337:(y,_,o)=>{var s=o(60443),m=o(21318),p=o(92902),f=s?s.toStringTag:void 0;y.exports=function i(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":f&&f in Object(a)?m(a):p(a)}},31100:y=>{y.exports=function _(o,s){return o>s}},84781:y=>{var o=Object.prototype.hasOwnProperty;y.exports=function s(m,p){return null!=m&&o.call(m,p)}},69989:y=>{y.exports=function _(o,s){return null!=o&&s in Object(o)}},14164:(y,_,o)=>{var s=o(65317),m=o(70968),p=o(24977);y.exports=function g(c,f,i){return f==f?p(c,f,i):s(c,m,i)}},60186:(y,_,o)=>{var s=o(93337),m=o(72671);y.exports=function g(c){return m(c)&&"[object Arguments]"==s(c)}},85740:(y,_,o)=>{var s=o(58325),m=o(72671);y.exports=function p(g,c,f,i,a){return g===c||(null==g||null==c||!m(g)&&!m(c)?g!=g&&c!=c:s(g,c,f,i,p,a))}},58325:(y,_,o)=>{var s=o(2858),m=o(63914),p=o(78583),g=o(32286),c=o(28794),f=o(21503),i=o(80891),a=o(48159),t="[object Arguments]",u="[object Array]",d="[object Object]",w=Object.prototype.hasOwnProperty;y.exports=function C(T,M,I,k,P,H){var V=f(T),B=f(M),Y=V?u:c(T),S=B?u:c(M),O=(Y=Y==t?d:Y)==d,L=(S=S==t?d:S)==d,F=Y==S;if(F&&i(T)){if(!i(M))return!1;V=!0,O=!1}if(F&&!O)return H||(H=new s),V||a(T)?m(T,M,I,k,P,H):p(T,M,Y,I,k,P,H);if(!(1&I)){var D=O&&w.call(T,"__wrapped__"),z=L&&w.call(M,"__wrapped__");if(D||z){var K=D?T.value():T,U=z?M.value():M;return H||(H=new s),P(K,U,I,k,H)}}return!!F&&(H||(H=new s),g(T,M,I,k,P,H))}},97021:(y,_,o)=>{var s=o(28794),m=o(72671);y.exports=function g(c){return m(c)&&"[object Map]"==s(c)}},40431:(y,_,o)=>{var s=o(2858),m=o(85740);y.exports=function c(f,i,a,l){var t=a.length,u=t,d=!l;if(null==f)return!u;for(f=Object(f);t--;){var x=a[t];if(d&&x[2]?x[1]!==f[x[0]]:!(x[0]in f))return!1}for(;++t<u;){var w=(x=a[t])[0],C=f[w],T=x[1];if(d&&x[2]){if(void 0===C&&!(w in f))return!1}else{var M=new s;if(l)var I=l(C,T,w,f,i,M);if(!(void 0===I?m(T,C,3,l,M):I))return!1}}return!0}},70968:y=>{y.exports=function _(o){return o!=o}},37304:(y,_,o)=>{var s=o(75946),m=o(91943),p=o(25940),g=o(52827),f=/^\[object .+?Constructor\]$/,i=Function.prototype,a=Object.prototype,l=i.toString,t=a.hasOwnProperty,u=RegExp("^"+l.call(t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");y.exports=function d(x){return!(!p(x)||m(x))&&(s(x)?u:f).test(g(x))}},771:(y,_,o)=>{var s=o(28794),m=o(72671);y.exports=function g(c){return m(c)&&"[object Set]"==s(c)}},1083:(y,_,o)=>{var s=o(93337),m=o(96231),p=o(72671),F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1,y.exports=function D(z){return p(z)&&m(z.length)&&!!F[s(z)]}},96517:(y,_,o)=>{var s=o(98133),m=o(9458),p=o(32608),g=o(21503),c=o(87495);y.exports=function f(i){return"function"==typeof i?i:null==i?p:"object"==typeof i?g(i)?m(i[0],i[1]):s(i):c(i)}},81172:(y,_,o)=>{var s=o(45488),m=o(84346),g=Object.prototype.hasOwnProperty;y.exports=function c(f){if(!s(f))return m(f);var i=[];for(var a in Object(f))g.call(f,a)&&"constructor"!=a&&i.push(a);return i}},92809:(y,_,o)=>{var s=o(25940),m=o(45488),p=o(32158),c=Object.prototype.hasOwnProperty;y.exports=function f(i){if(!s(i))return p(i);var a=m(i),l=[];for(var t in i)"constructor"==t&&(a||!c.call(i,t))||l.push(t);return l}},99069:y=>{y.exports=function _(o,s){return o<s}},92046:(y,_,o)=>{var s=o(43132),m=o(56507);y.exports=function p(g,c){var f=-1,i=m(g)?Array(g.length):[];return s(g,function(a,l,t){i[++f]=c(a,l,t)}),i}},98133:(y,_,o)=>{var s=o(40431),m=o(22379),p=o(642);y.exports=function g(c){var f=m(c);return 1==f.length&&f[0][2]?p(f[0][0],f[0][1]):function(i){return i===c||s(i,c,f)}}},9458:(y,_,o)=>{var s=o(85740),m=o(8817),p=o(11172),g=o(45352),c=o(22442),f=o(642),i=o(68533);y.exports=function t(u,d){return g(u)&&c(d)?f(i(u),d):function(x){var w=m(x,u);return void 0===w&&w===d?p(x,u):s(d,w,3)}}},73842:(y,_,o)=>{var s=o(2858),m=o(49276),p=o(30755),g=o(33675),c=o(25940),f=o(16555),i=o(99351);y.exports=function a(l,t,u,d,x){l!==t&&p(t,function(w,C){if(x||(x=new s),c(w))g(l,t,C,u,a,d,x);else{var T=d?d(i(l,C),w,C+"",l,t,x):void 0;void 0===T&&(T=w),m(l,C,T)}},f)}},33675:(y,_,o)=>{var s=o(49276),m=o(19292),p=o(65208),g=o(99454),c=o(4264),f=o(77151),i=o(21503),a=o(21330),l=o(80891),t=o(75946),u=o(25940),d=o(32075),x=o(48159),w=o(99351),C=o(8067);y.exports=function T(M,I,k,P,H,V,B){var Y=w(M,k),S=w(I,k),O=B.get(S);if(O)s(M,k,O);else{var L=V?V(Y,S,k+"",M,I,B):void 0,F=void 0===L;if(F){var D=i(S),z=!D&&l(S),K=!D&&!z&&x(S);L=S,D||z||K?i(Y)?L=Y:a(Y)?L=g(Y):z?(F=!1,L=m(S,!0)):K?(F=!1,L=p(S,!0)):L=[]:d(S)||f(S)?(L=Y,f(Y)?L=C(Y):(!u(Y)||t(Y))&&(L=c(S))):F=!1}F&&(B.set(S,L),H(L,S,P,V,B),B.delete(S)),s(M,k,L)}}},6119:(y,_,o)=>{var s=o(84633),m=o(15456),p=o(96517),g=o(92046),c=o(18750),f=o(85647),i=o(41215),a=o(32608),l=o(21503);y.exports=function t(u,d,x){d=d.length?s(d,function(T){return l(T)?function(M){return m(M,1===T.length?T[0]:T)}:T}):[a];var w=-1;d=s(d,f(p));var C=g(u,function(T,M,I){return{criteria:s(d,function(P){return P(T)}),index:++w,value:T}});return c(C,function(T,M){return i(T,M,x)})}},83021:(y,_,o)=>{var s=o(95495),m=o(11172);y.exports=function p(g,c){return s(g,c,function(f,i){return m(g,i)})}},95495:(y,_,o)=>{var s=o(15456),m=o(55963),p=o(65456);y.exports=function g(c,f,i){for(var a=-1,l=f.length,t={};++a<l;){var u=f[a],d=s(c,u);i(d,u)&&m(t,p(u,c),d)}return t}},11847:y=>{y.exports=function _(o){return function(s){return s?.[o]}}},39222:(y,_,o)=>{var s=o(15456);y.exports=function m(p){return function(g){return s(g,p)}}},16307:y=>{var _=Math.ceil,o=Math.max;y.exports=function s(m,p,g,c){for(var f=-1,i=o(_((p-m)/(g||1)),0),a=Array(i);i--;)a[c?i:++f]=m,m+=g;return a}},13570:y=>{y.exports=function _(o,s,m,p,g){return g(o,function(c,f,i){m=p?(p=!1,c):s(m,c,f,i)}),m}},23269:(y,_,o)=>{var s=o(32608),m=o(53983),p=o(72185);y.exports=function g(c,f){return p(m(c,f,s),c+"")}},55963:(y,_,o)=>{var s=o(89719),m=o(65456),p=o(58442),g=o(25940),c=o(68533);y.exports=function f(i,a,l,t){if(!g(i))return i;for(var u=-1,d=(a=m(a,i)).length,x=d-1,w=i;null!=w&&++u<d;){var C=c(a[u]),T=l;if("__proto__"===C||"constructor"===C||"prototype"===C)return i;if(u!=x){var M=w[C];void 0===(T=t?t(M,C,w):void 0)&&(T=g(M)?M:p(a[u+1])?[]:{})}s(w,C,T),w=w[C]}return i}},69510:(y,_,o)=>{var s=o(76684),m=o(56713),p=o(32608),g=m?function(c,f){return m(c,"toString",{configurable:!0,enumerable:!1,value:s(f),writable:!0})}:p;y.exports=g},18750:y=>{y.exports=function _(o,s){var m=o.length;for(o.sort(s);m--;)o[m]=o[m].value;return o}},85334:y=>{y.exports=function _(o,s){for(var m=-1,p=Array(o);++m<o;)p[m]=s(m);return p}},93935:(y,_,o)=>{var s=o(60443),m=o(84633),p=o(21503),g=o(44129),f=s?s.prototype:void 0,i=f?f.toString:void 0;y.exports=function a(l){if("string"==typeof l)return l;if(p(l))return m(l,a)+"";if(g(l))return i?i.call(l):"";var t=l+"";return"0"==t&&1/l==-Infinity?"-0":t}},83348:(y,_,o)=>{var s=o(42760),m=/^\s+/;y.exports=function p(g){return g&&g.slice(0,s(g)+1).replace(m,"")}},85647:y=>{y.exports=function _(o){return function(s){return o(s)}}},80707:(y,_,o)=>{var s=o(58849),m=o(61253),p=o(37609),g=o(25972),c=o(14575),f=o(24174);y.exports=function a(l,t,u){var d=-1,x=m,w=l.length,C=!0,T=[],M=T;if(u)C=!1,x=p;else if(w>=200){var I=t?null:c(l);if(I)return f(I);C=!1,x=g,M=new s}else M=t?[]:T;t:for(;++d<w;){var k=l[d],P=t?t(k):k;if(k=u||0!==k?k:0,C&&P==P){for(var H=M.length;H--;)if(M[H]===P)continue t;t&&M.push(P),T.push(k)}else x(M,P,u)||(M!==T&&M.push(P),T.push(k))}return T}},19179:(y,_,o)=>{var s=o(84633);y.exports=function m(p,g){return s(g,function(c){return p[c]})}},38645:y=>{y.exports=function _(o,s,m){for(var p=-1,g=o.length,c=s.length,f={};++p<g;){var i=p<c?s[p]:void 0;m(f,o[p],i)}return f}},25972:y=>{y.exports=function _(o,s){return o.has(s)}},21481:(y,_,o)=>{var s=o(32608);y.exports=function m(p){return"function"==typeof p?p:s}},65456:(y,_,o)=>{var s=o(21503),m=o(45352),p=o(32855),g=o(73943);y.exports=function c(f,i){return s(f)?f:m(f,i)?[f]:p(g(f))}},43362:(y,_,o)=>{var s=o(73457);y.exports=function m(p){var g=new p.constructor(p.byteLength);return new s(g).set(new s(p)),g}},19292:(y,_,o)=>{y=o.nmd(y);var s=o(12119),m=_&&!_.nodeType&&_,p=m&&y&&!y.nodeType&&y,c=p&&p.exports===m?s.Buffer:void 0,f=c?c.allocUnsafe:void 0;y.exports=function i(a,l){if(l)return a.slice();var t=a.length,u=f?f(t):new a.constructor(t);return a.copy(u),u}},17e3:(y,_,o)=>{var s=o(43362);y.exports=function m(p,g){var c=g?s(p.buffer):p.buffer;return new p.constructor(c,p.byteOffset,p.byteLength)}},74098:y=>{var _=/\w*$/;y.exports=function o(s){var m=new s.constructor(s.source,_.exec(s));return m.lastIndex=s.lastIndex,m}},62533:(y,_,o)=>{var s=o(60443),m=s?s.prototype:void 0,p=m?m.valueOf:void 0;y.exports=function g(c){return p?Object(p.call(c)):{}}},65208:(y,_,o)=>{var s=o(43362);y.exports=function m(p,g){var c=g?s(p.buffer):p.buffer;return new p.constructor(c,p.byteOffset,p.length)}},13443:(y,_,o)=>{var s=o(44129);y.exports=function m(p,g){if(p!==g){var c=void 0!==p,f=null===p,i=p==p,a=s(p),l=void 0!==g,t=null===g,u=g==g,d=s(g);if(!t&&!d&&!a&&p>g||a&&l&&u&&!t&&!d||f&&l&&u||!c&&u||!i)return 1;if(!f&&!a&&!d&&p<g||d&&c&&i&&!f&&!a||t&&c&&i||!l&&i||!u)return-1}return 0}},41215:(y,_,o)=>{var s=o(13443);y.exports=function m(p,g,c){for(var f=-1,i=p.criteria,a=g.criteria,l=i.length,t=c.length;++f<l;){var u=s(i[f],a[f]);if(u)return f>=t?u:u*("desc"==c[f]?-1:1)}return p.index-g.index}},99454:y=>{y.exports=function _(o,s){var m=-1,p=o.length;for(s||(s=Array(p));++m<p;)s[m]=o[m];return s}},31989:(y,_,o)=>{var s=o(89719),m=o(85683);y.exports=function p(g,c,f,i){var a=!f;f||(f={});for(var l=-1,t=c.length;++l<t;){var u=c[l],d=i?i(f[u],g[u],u,f,g):void 0;void 0===d&&(d=g[u]),a?m(f,u,d):s(f,u,d)}return f}},64093:(y,_,o)=>{var s=o(31989),m=o(39383);y.exports=function p(g,c){return s(g,m(g),c)}},59905:(y,_,o)=>{var s=o(31989),m=o(53051);y.exports=function p(g,c){return s(g,m(g),c)}},24610:(y,_,o)=>{var m=o(12119)["__core-js_shared__"];y.exports=m},84944:(y,_,o)=>{var s=o(23269),m=o(93342);y.exports=function p(g){return s(function(c,f){var i=-1,a=f.length,l=a>1?f[a-1]:void 0,t=a>2?f[2]:void 0;for(l=g.length>3&&"function"==typeof l?(a--,l):void 0,t&&m(f[0],f[1],t)&&(l=a<3?void 0:l,a=1),c=Object(c);++i<a;){var u=f[i];u&&g(c,u,i,l)}return c})}},16539:(y,_,o)=>{var s=o(56507);y.exports=function m(p,g){return function(c,f){if(null==c)return c;if(!s(c))return p(c,f);for(var i=c.length,a=g?i:-1,l=Object(c);(g?a--:++a<i)&&!1!==f(l[a],a,l););return c}}},40456:y=>{y.exports=function _(o){return function(s,m,p){for(var g=-1,c=Object(s),f=p(s),i=f.length;i--;){var a=f[o?i:++g];if(!1===m(c[a],a,c))break}return s}}},24653:(y,_,o)=>{var s=o(96517),m=o(56507),p=o(118);y.exports=function g(c){return function(f,i,a){var l=Object(f);if(!m(f)){var t=s(i,3);f=p(f),i=function(d){return t(l[d],d,l)}}var u=c(f,i,a);return u>-1?l[t?f[u]:u]:void 0}}},97509:(y,_,o)=>{var s=o(16307),m=o(93342),p=o(12232);y.exports=function g(c){return function(f,i,a){return a&&"number"!=typeof a&&m(f,i,a)&&(i=a=void 0),f=p(f),void 0===i?(i=f,f=0):i=p(i),a=void 0===a?f<i?1:-1:p(a),s(f,i,a,c)}}},14575:(y,_,o)=>{var s=o(46323),m=o(12552),p=o(24174),c=s&&1/p(new s([,-0]))[1]==1/0?function(f){return new s(f)}:m;y.exports=c},56713:(y,_,o)=>{var s=o(53436),m=function(){try{var p=s(Object,"defineProperty");return p({},"",{}),p}catch{}}();y.exports=m},63914:(y,_,o)=>{var s=o(58849),m=o(79503),p=o(25972);y.exports=function f(i,a,l,t,u,d){var x=1&l,w=i.length,C=a.length;if(w!=C&&!(x&&C>w))return!1;var T=d.get(i),M=d.get(a);if(T&&M)return T==a&&M==i;var I=-1,k=!0,P=2&l?new s:void 0;for(d.set(i,a),d.set(a,i);++I<w;){var H=i[I],V=a[I];if(t)var B=x?t(V,H,I,a,i,d):t(H,V,I,i,a,d);if(void 0!==B){if(B)continue;k=!1;break}if(P){if(!m(a,function(Y,S){if(!p(P,S)&&(H===Y||u(H,Y,l,t,d)))return P.push(S)})){k=!1;break}}else if(H!==V&&!u(H,V,l,t,d)){k=!1;break}}return d.delete(i),d.delete(a),k}},78583:(y,_,o)=>{var s=o(60443),m=o(73457),p=o(20217),g=o(63914),c=o(83205),f=o(24174),P=s?s.prototype:void 0,H=P?P.valueOf:void 0;y.exports=function V(B,Y,S,O,L,F,D){switch(S){case"[object DataView]":if(B.byteLength!=Y.byteLength||B.byteOffset!=Y.byteOffset)return!1;B=B.buffer,Y=Y.buffer;case"[object ArrayBuffer]":return!(B.byteLength!=Y.byteLength||!F(new m(B),new m(Y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+B,+Y);case"[object Error]":return B.name==Y.name&&B.message==Y.message;case"[object RegExp]":case"[object String]":return B==Y+"";case"[object Map]":var z=c;case"[object Set]":var K=1&O;if(z||(z=f),B.size!=Y.size&&!K)return!1;var U=D.get(B);if(U)return U==Y;O|=2,D.set(B,Y);var G=g(z(B),z(Y),O,L,F,D);return D.delete(B),G;case"[object Symbol]":if(H)return H.call(B)==H.call(Y)}return!1}},32286:(y,_,o)=>{var s=o(47597),g=Object.prototype.hasOwnProperty;y.exports=function c(f,i,a,l,t,u){var d=1&a,x=s(f),w=x.length;if(w!=s(i).length&&!d)return!1;for(var M=w;M--;){var I=x[M];if(!(d?I in i:g.call(i,I)))return!1}var k=u.get(f),P=u.get(i);if(k&&P)return k==i&&P==f;var H=!0;u.set(f,i),u.set(i,f);for(var V=d;++M<w;){var B=f[I=x[M]],Y=i[I];if(l)var S=d?l(Y,B,I,i,f,u):l(B,Y,I,f,i,u);if(!(void 0===S?B===Y||t(B,Y,a,l,u):S)){H=!1;break}V||(V="constructor"==I)}if(H&&!V){var O=f.constructor,L=i.constructor;O!=L&&"constructor"in f&&"constructor"in i&&!("function"==typeof O&&O instanceof O&&"function"==typeof L&&L instanceof L)&&(H=!1)}return u.delete(f),u.delete(i),H}},3975:(y,_,o)=>{var s=o(22274),m=o(53983),p=o(72185);y.exports=function g(c){return p(m(c,void 0,s),c+"")}},79122:y=>{var _="object"==typeof global&&global&&global.Object===Object&&global;y.exports=_},47597:(y,_,o)=>{var s=o(38247),m=o(39383),p=o(118);y.exports=function g(c){return s(c,p,m)}},6967:(y,_,o)=>{var s=o(38247),m=o(53051),p=o(16555);y.exports=function g(c){return s(c,p,m)}},54537:(y,_,o)=>{var s=o(23819);y.exports=function m(p,g){var c=p.__data__;return s(g)?c["string"==typeof g?"string":"hash"]:c.map}},22379:(y,_,o)=>{var s=o(22442),m=o(118);y.exports=function p(g){for(var c=m(g),f=c.length;f--;){var i=c[f],a=g[i];c[f]=[i,a,s(a)]}return c}},53436:(y,_,o)=>{var s=o(37304),m=o(51990);y.exports=function p(g,c){var f=m(g,c);return s(f)?f:void 0}},29519:(y,_,o)=>{var m=o(69385)(Object.getPrototypeOf,Object);y.exports=m},21318:(y,_,o)=>{var s=o(60443),m=Object.prototype,p=m.hasOwnProperty,g=m.toString,c=s?s.toStringTag:void 0;y.exports=function f(i){var a=p.call(i,c),l=i[c];try{i[c]=void 0;var t=!0}catch{}var u=g.call(i);return t&&(a?i[c]=l:delete i[c]),u}},39383:(y,_,o)=>{var s=o(69779),m=o(49975),g=Object.prototype.propertyIsEnumerable,c=Object.getOwnPropertySymbols,f=c?function(i){return null==i?[]:(i=Object(i),s(c(i),function(a){return g.call(i,a)}))}:m;y.exports=f},53051:(y,_,o)=>{var s=o(34883),m=o(29519),p=o(39383),g=o(49975),f=Object.getOwnPropertySymbols?function(i){for(var a=[];i;)s(a,p(i)),i=m(i);return a}:g;y.exports=f},28794:(y,_,o)=>{var s=o(37244),m=o(51501),p=o(44267),g=o(46323),c=o(24243),f=o(93337),i=o(52827),a="[object Map]",t="[object Promise]",u="[object Set]",d="[object WeakMap]",x="[object DataView]",w=i(s),C=i(m),T=i(p),M=i(g),I=i(c),k=f;(s&&k(new s(new ArrayBuffer(1)))!=x||m&&k(new m)!=a||p&&k(p.resolve())!=t||g&&k(new g)!=u||c&&k(new c)!=d)&&(k=function(P){var H=f(P),V="[object Object]"==H?P.constructor:void 0,B=V?i(V):"";if(B)switch(B){case w:return x;case C:return a;case T:return t;case M:return u;case I:return d}return H}),y.exports=k},51990:y=>{y.exports=function _(o,s){return o?.[s]}},47283:(y,_,o)=>{var s=o(65456),m=o(77151),p=o(21503),g=o(58442),c=o(96231),f=o(68533);y.exports=function i(a,l,t){for(var u=-1,d=(l=s(l,a)).length,x=!1;++u<d;){var w=f(l[u]);if(!(x=null!=a&&t(a,w)))break;a=a[w]}return x||++u!=d?x:!!(d=null==a?0:a.length)&&c(d)&&g(w,d)&&(p(a)||m(a))}},77609:y=>{var f=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");y.exports=function i(a){return f.test(a)}},64312:(y,_,o)=>{var s=o(60862);y.exports=function m(){this.__data__=s?s(null):{},this.size=0}},46421:y=>{y.exports=function _(o){var s=this.has(o)&&delete this.__data__[o];return this.size-=s?1:0,s}},15764:(y,_,o)=>{var s=o(60862),g=Object.prototype.hasOwnProperty;y.exports=function c(f){var i=this.__data__;if(s){var a=i[f];return"__lodash_hash_undefined__"===a?void 0:a}return g.call(i,f)?i[f]:void 0}},18685:(y,_,o)=>{var s=o(60862),p=Object.prototype.hasOwnProperty;y.exports=function g(c){var f=this.__data__;return s?void 0!==f[c]:p.call(f,c)}},26676:(y,_,o)=>{var s=o(60862);y.exports=function p(g,c){var f=this.__data__;return this.size+=this.has(g)?0:1,f[g]=s&&void 0===c?"__lodash_hash_undefined__":c,this}},76782:y=>{var o=Object.prototype.hasOwnProperty;y.exports=function s(m){var p=m.length,g=new m.constructor(p);return p&&"string"==typeof m[0]&&o.call(m,"index")&&(g.index=m.index,g.input=m.input),g}},37878:(y,_,o)=>{var s=o(43362),m=o(17e3),p=o(74098),g=o(62533),c=o(65208);y.exports=function S(O,L,F){var D=O.constructor;switch(L){case"[object ArrayBuffer]":return s(O);case"[object Boolean]":case"[object Date]":return new D(+O);case"[object DataView]":return m(O,F);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(O,F);case"[object Map]":case"[object Set]":return new D;case"[object Number]":case"[object String]":return new D(O);case"[object RegExp]":return p(O);case"[object Symbol]":return g(O)}}},4264:(y,_,o)=>{var s=o(78858),m=o(29519),p=o(45488);y.exports=function g(c){return"function"!=typeof c.constructor||p(c)?{}:s(m(c))}},75039:(y,_,o)=>{var s=o(60443),m=o(77151),p=o(21503),g=s?s.isConcatSpreadable:void 0;y.exports=function c(f){return p(f)||m(f)||!!(g&&f&&f[g])}},58442:y=>{var o=/^(?:0|[1-9]\d*)$/;y.exports=function s(m,p){var g=typeof m;return!!(p=p??9007199254740991)&&("number"==g||"symbol"!=g&&o.test(m))&&m>-1&&m%1==0&&m<p}},93342:(y,_,o)=>{var s=o(20217),m=o(56507),p=o(58442),g=o(25940);y.exports=function c(f,i,a){if(!g(a))return!1;var l=typeof i;return!!("number"==l?m(a)&&p(i,a.length):"string"==l&&i in a)&&s(a[i],f)}},45352:(y,_,o)=>{var s=o(21503),m=o(44129),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;y.exports=function c(f,i){if(s(f))return!1;var a=typeof f;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=f&&!m(f))||(g.test(f)||!p.test(f)||null!=i&&f in Object(i))}},23819:y=>{y.exports=function _(o){var s=typeof o;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==o:null===o}},91943:(y,_,o)=>{var g,s=o(24610),m=(g=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";y.exports=function p(g){return!!m&&m in g}},45488:y=>{var _=Object.prototype;y.exports=function o(s){var m=s&&s.constructor;return s===("function"==typeof m&&m.prototype||_)}},22442:(y,_,o)=>{var s=o(25940);y.exports=function m(p){return p==p&&!s(p)}},41840:y=>{y.exports=function _(){this.__data__=[],this.size=0}},34378:(y,_,o)=>{var s=o(43503),p=Array.prototype.splice;y.exports=function g(c){var f=this.__data__,i=s(f,c);return!(i<0)&&(i==f.length-1?f.pop():p.call(f,i,1),--this.size,!0)}},54981:(y,_,o)=>{var s=o(43503);y.exports=function m(p){var g=this.__data__,c=s(g,p);return c<0?void 0:g[c][1]}},67343:(y,_,o)=>{var s=o(43503);y.exports=function m(p){return s(this.__data__,p)>-1}},98895:(y,_,o)=>{var s=o(43503);y.exports=function m(p,g){var c=this.__data__,f=s(c,p);return f<0?(++this.size,c.push([p,g])):c[f][1]=g,this}},10638:(y,_,o)=>{var s=o(54994),m=o(9215),p=o(51501);y.exports=function g(){this.size=0,this.__data__={hash:new s,map:new(p||m),string:new s}}},11184:(y,_,o)=>{var s=o(54537);y.exports=function m(p){var g=s(this,p).delete(p);return this.size-=g?1:0,g}},70866:(y,_,o)=>{var s=o(54537);y.exports=function m(p){return s(this,p).get(p)}},43771:(y,_,o)=>{var s=o(54537);y.exports=function m(p){return s(this,p).has(p)}},51772:(y,_,o)=>{var s=o(54537);y.exports=function m(p,g){var c=s(this,p),f=c.size;return c.set(p,g),this.size+=c.size==f?0:1,this}},83205:y=>{y.exports=function _(o){var s=-1,m=Array(o.size);return o.forEach(function(p,g){m[++s]=[g,p]}),m}},642:y=>{y.exports=function _(o,s){return function(m){return null!=m&&(m[o]===s&&(void 0!==s||o in Object(m)))}}},90719:(y,_,o)=>{var s=o(30535);y.exports=function p(g){var c=s(g,function(i){return 500===f.size&&f.clear(),i}),f=c.cache;return c}},60862:(y,_,o)=>{var m=o(53436)(Object,"create");y.exports=m},84346:(y,_,o)=>{var m=o(69385)(Object.keys,Object);y.exports=m},32158:y=>{y.exports=function _(o){var s=[];if(null!=o)for(var m in Object(o))s.push(m);return s}},73597:(y,_,o)=>{y=o.nmd(y);var s=o(79122),m=_&&!_.nodeType&&_,p=m&&y&&!y.nodeType&&y,c=p&&p.exports===m&&s.process,f=function(){try{return p&&p.require&&p.require("util").types||c&&c.binding&&c.binding("util")}catch{}}();y.exports=f},92902:y=>{var o=Object.prototype.toString;y.exports=function s(m){return o.call(m)}},69385:y=>{y.exports=function _(o,s){return function(m){return o(s(m))}}},53983:(y,_,o)=>{var s=o(26999),m=Math.max;y.exports=function p(g,c,f){return c=m(void 0===c?g.length-1:c,0),function(){for(var i=arguments,a=-1,l=m(i.length-c,0),t=Array(l);++a<l;)t[a]=i[c+a];a=-1;for(var u=Array(c+1);++a<c;)u[a]=i[a];return u[c]=f(t),s(g,this,u)}}},12119:(y,_,o)=>{var s=o(79122),m="object"==typeof self&&self&&self.Object===Object&&self,p=s||m||Function("return this")();y.exports=p},99351:y=>{y.exports=function _(o,s){if(("constructor"!==s||"function"!=typeof o[s])&&"__proto__"!=s)return o[s]}},4600:y=>{y.exports=function o(s){return this.__data__.set(s,"__lodash_hash_undefined__"),this}},31387:y=>{y.exports=function _(o){return this.__data__.has(o)}},24174:y=>{y.exports=function _(o){var s=-1,m=Array(o.size);return o.forEach(function(p){m[++s]=p}),m}},72185:(y,_,o)=>{var s=o(69510),p=o(10029)(s);y.exports=p},10029:y=>{var s=Date.now;y.exports=function m(p){var g=0,c=0;return function(){var f=s(),i=16-(f-c);if(c=f,i>0){if(++g>=800)return arguments[0]}else g=0;return p.apply(void 0,arguments)}}},13720:(y,_,o)=>{var s=o(9215);y.exports=function m(){this.__data__=new s,this.size=0}},64410:y=>{y.exports=function _(o){var s=this.__data__,m=s.delete(o);return this.size=s.size,m}},45576:y=>{y.exports=function _(o){return this.__data__.get(o)}},22247:y=>{y.exports=function _(o){return this.__data__.has(o)}},41585:(y,_,o)=>{var s=o(9215),m=o(51501),p=o(99850);y.exports=function c(f,i){var a=this.__data__;if(a instanceof s){var l=a.__data__;if(!m||l.length<199)return l.push([f,i]),this.size=++a.size,this;a=this.__data__=new p(l)}return a.set(f,i),this.size=a.size,this}},24977:y=>{y.exports=function _(o,s,m){for(var p=m-1,g=o.length;++p<g;)if(o[p]===s)return p;return-1}},52315:(y,_,o)=>{var s=o(75481),m=o(77609),p=o(81149);y.exports=function g(c){return m(c)?p(c):s(c)}},32855:(y,_,o)=>{var s=o(90719),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=s(function(c){var f=[];return 46===c.charCodeAt(0)&&f.push(""),c.replace(m,function(i,a,l,t){f.push(l?t.replace(p,"$1"):a||i)}),f});y.exports=g},68533:(y,_,o)=>{var s=o(44129);y.exports=function p(g){if("string"==typeof g||s(g))return g;var c=g+"";return"0"==c&&1/g==-Infinity?"-0":c}},52827:y=>{var o=Function.prototype.toString;y.exports=function s(m){if(null!=m){try{return o.call(m)}catch{}try{return m+""}catch{}}return""}},42760:y=>{var _=/\s/;y.exports=function o(s){for(var m=s.length;m--&&_.test(s.charAt(m)););return m}},81149:y=>{var _="\\ud800-\\udfff",c="["+_+"]",f="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",l="[^"+_+"]",t="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",x="(?:"+f+"|"+i+")"+"?",w="[\\ufe0e\\ufe0f]?",T=w+x+("(?:\\u200d(?:"+[l,t,u].join("|")+")"+w+x+")*"),M="(?:"+[l+f+"?",f,t,u,c].join("|")+")",I=RegExp(i+"(?="+i+")|"+M+T,"g");y.exports=function k(P){for(var H=I.lastIndex=0;I.test(P);)++H;return H}},11094:(y,_,o)=>{var s=o(44462);y.exports=function p(g){return s(g,4)}},90733:(y,_,o)=>{var s=o(44462);y.exports=function g(c){return s(c,5)}},76684:y=>{y.exports=function _(o){return function(){return o}}},28800:(y,_,o)=>{var s=o(23269),m=o(20217),p=o(93342),g=o(16555),c=Object.prototype,f=c.hasOwnProperty,i=s(function(a,l){a=Object(a);var t=-1,u=l.length,d=u>2?l[2]:void 0;for(d&&p(l[0],l[1],d)&&(u=1);++t<u;)for(var x=l[t],w=g(x),C=-1,T=w.length;++C<T;){var M=w[C],I=a[M];(void 0===I||m(I,c[M])&&!f.call(a,M))&&(a[M]=x[M])}return a});y.exports=i},35474:(y,_,o)=>{y.exports=o(89851)},20217:y=>{y.exports=function _(o,s){return o===s||o!=o&&s!=s}},35281:(y,_,o)=>{var s=o(69779),m=o(33609),p=o(96517),g=o(21503);y.exports=function c(f,i){return(g(f)?s:m)(f,p(i,3))}},62516:(y,_,o)=>{var p=o(24653)(o(36397));y.exports=p},36397:(y,_,o)=>{var s=o(65317),m=o(96517),p=o(44401),g=Math.max;y.exports=function c(f,i,a){var l=null==f?0:f.length;if(!l)return-1;var t=null==a?0:p(a);return t<0&&(t=g(l+t,0)),s(f,m(i,3),t)}},22274:(y,_,o)=>{var s=o(50686);y.exports=function m(p){return(null==p?0:p.length)?s(p,1):[]}},89851:(y,_,o)=>{var s=o(96837),m=o(43132),p=o(21481),g=o(21503);y.exports=function c(f,i){return(g(f)?s:m)(f,p(i))}},41176:(y,_,o)=>{var s=o(30755),m=o(21481),p=o(16555);y.exports=function g(c,f){return null==c?c:s(c,m(f),p)}},8817:(y,_,o)=>{var s=o(15456);y.exports=function m(p,g,c){var f=null==p?void 0:s(p,g);return void 0===f?c:f}},64972:(y,_,o)=>{var s=o(84781),m=o(47283);y.exports=function p(g,c){return null!=g&&m(g,c,s)}},11172:(y,_,o)=>{var s=o(69989),m=o(47283);y.exports=function p(g,c){return null!=g&&m(g,c,s)}},32608:y=>{y.exports=function _(o){return o}},77151:(y,_,o)=>{var s=o(60186),m=o(72671),p=Object.prototype,g=p.hasOwnProperty,c=p.propertyIsEnumerable,f=s(function(){return arguments}())?s:function(i){return m(i)&&g.call(i,"callee")&&!c.call(i,"callee")};y.exports=f},21503:y=>{var _=Array.isArray;y.exports=_},56507:(y,_,o)=>{var s=o(75946),m=o(96231);y.exports=function p(g){return null!=g&&m(g.length)&&!s(g)}},21330:(y,_,o)=>{var s=o(56507),m=o(72671);y.exports=function p(g){return m(g)&&s(g)}},80891:(y,_,o)=>{y=o.nmd(y);var s=o(12119),m=o(63580),p=_&&!_.nodeType&&_,g=p&&y&&!y.nodeType&&y,f=g&&g.exports===p?s.Buffer:void 0,a=(f?f.isBuffer:void 0)||m;y.exports=a},71973:(y,_,o)=>{var s=o(81172),m=o(28794),p=o(77151),g=o(21503),c=o(56507),f=o(80891),i=o(45488),a=o(48159),d=Object.prototype.hasOwnProperty;y.exports=function x(w){if(null==w)return!0;if(c(w)&&(g(w)||"string"==typeof w||"function"==typeof w.splice||f(w)||a(w)||p(w)))return!w.length;var C=m(w);if("[object Map]"==C||"[object Set]"==C)return!w.size;if(i(w))return!s(w).length;for(var T in w)if(d.call(w,T))return!1;return!0}},75946:(y,_,o)=>{var s=o(93337),m=o(25940);y.exports=function i(a){if(!m(a))return!1;var l=s(a);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}},96231:y=>{y.exports=function o(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991}},13222:(y,_,o)=>{var s=o(97021),m=o(85647),p=o(73597),g=p&&p.isMap,c=g?m(g):s;y.exports=c},25940:y=>{y.exports=function _(o){var s=typeof o;return null!=o&&("object"==s||"function"==s)}},72671:y=>{y.exports=function _(o){return null!=o&&"object"==typeof o}},32075:(y,_,o)=>{var s=o(93337),m=o(29519),p=o(72671),c=Function.prototype,f=Object.prototype,i=c.toString,a=f.hasOwnProperty,l=i.call(Object);y.exports=function t(u){if(!p(u)||"[object Object]"!=s(u))return!1;var d=m(u);if(null===d)return!0;var x=a.call(d,"constructor")&&d.constructor;return"function"==typeof x&&x instanceof x&&i.call(x)==l}},90799:(y,_,o)=>{var s=o(771),m=o(85647),p=o(73597),g=p&&p.isSet,c=g?m(g):s;y.exports=c},30248:(y,_,o)=>{var s=o(93337),m=o(21503),p=o(72671);y.exports=function c(f){return"string"==typeof f||!m(f)&&p(f)&&"[object String]"==s(f)}},44129:(y,_,o)=>{var s=o(93337),m=o(72671);y.exports=function g(c){return"symbol"==typeof c||m(c)&&"[object Symbol]"==s(c)}},48159:(y,_,o)=>{var s=o(1083),m=o(85647),p=o(73597),g=p&&p.isTypedArray,c=g?m(g):s;y.exports=c},34235:y=>{y.exports=function _(o){return void 0===o}},118:(y,_,o)=>{var s=o(72271),m=o(81172),p=o(56507);y.exports=function g(c){return p(c)?s(c):m(c)}},16555:(y,_,o)=>{var s=o(72271),m=o(92809),p=o(56507);y.exports=function g(c){return p(c)?s(c,!0):m(c)}},25809:y=>{y.exports=function _(o){var s=null==o?0:o.length;return s?o[s-1]:void 0}},19984:(y,_,o)=>{var s=o(84633),m=o(96517),p=o(92046),g=o(21503);y.exports=function c(f,i){return(g(f)?s:p)(f,m(i,3))}},10203:(y,_,o)=>{var s=o(85683),m=o(45184),p=o(96517);y.exports=function g(c,f){var i={};return f=p(f,3),m(c,function(a,l,t){s(i,l,f(a,l,t))}),i}},18176:(y,_,o)=>{var s=o(67308),m=o(31100),p=o(32608);y.exports=function g(c){return c&&c.length?s(c,p,m):void 0}},30535:(y,_,o)=>{var s=o(99850);function p(g,c){if("function"!=typeof g||null!=c&&"function"!=typeof c)throw new TypeError("Expected a function");var f=function(){var i=arguments,a=c?c.apply(this,i):i[0],l=f.cache;if(l.has(a))return l.get(a);var t=g.apply(this,i);return f.cache=l.set(a,t)||l,t};return f.cache=new(p.Cache||s),f}p.Cache=s,y.exports=p},80567:(y,_,o)=>{var s=o(73842),p=o(84944)(function(g,c,f){s(g,c,f)});y.exports=p},29439:(y,_,o)=>{var s=o(67308),m=o(99069),p=o(32608);y.exports=function g(c){return c&&c.length?s(c,p,m):void 0}},29525:(y,_,o)=>{var s=o(67308),m=o(96517),p=o(99069);y.exports=function g(c,f){return c&&c.length?s(c,m(f,2),p):void 0}},12552:y=>{y.exports=function _(){}},31710:(y,_,o)=>{var s=o(12119);y.exports=function(){return s.Date.now()}},16372:(y,_,o)=>{var s=o(83021),p=o(3975)(function(g,c){return null==g?{}:s(g,c)});y.exports=p},87495:(y,_,o)=>{var s=o(11847),m=o(39222),p=o(45352),g=o(68533);y.exports=function c(f){return p(f)?s(g(f)):m(f)}},90361:(y,_,o)=>{var m=o(97509)();y.exports=m},81337:(y,_,o)=>{var s=o(8745),m=o(43132),p=o(96517),g=o(13570),c=o(21503);y.exports=function f(i,a,l){var t=c(i)?s:g,u=arguments.length<3;return t(i,p(a,4),l,u,m)}},55637:(y,_,o)=>{var s=o(81172),m=o(28794),p=o(56507),g=o(30248),c=o(52315);y.exports=function a(l){if(null==l)return 0;if(p(l))return g(l)?c(l):l.length;var t=m(l);return"[object Map]"==t||"[object Set]"==t?l.size:s(l).length}},12906:(y,_,o)=>{var s=o(50686),m=o(6119),p=o(23269),g=o(93342),c=p(function(f,i){if(null==f)return[];var a=i.length;return a>1&&g(f,i[0],i[1])?i=[]:a>2&&g(i[0],i[1],i[2])&&(i=[i[0]]),m(f,s(i,1),[])});y.exports=c},49975:y=>{y.exports=function _(){return[]}},63580:y=>{y.exports=function _(){return!1}},12232:(y,_,o)=>{var s=o(51467),m=1/0;y.exports=function g(c){return c?(c=s(c))===m||c===-m?17976931348623157e292*(c<0?-1:1):c==c?c:0:0===c?c:0}},44401:(y,_,o)=>{var s=o(12232);y.exports=function m(p){var g=s(p),c=g%1;return g==g?c?g-c:g:0}},51467:(y,_,o)=>{var s=o(83348),m=o(25940),p=o(44129),c=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt;y.exports=function l(t){if("number"==typeof t)return t;if(p(t))return NaN;if(m(t)){var u="function"==typeof t.valueOf?t.valueOf():t;t=m(u)?u+"":u}if("string"!=typeof t)return 0===t?t:+t;t=s(t);var d=f.test(t);return d||i.test(t)?a(t.slice(2),d?2:8):c.test(t)?NaN:+t}},8067:(y,_,o)=>{var s=o(31989),m=o(16555);y.exports=function p(g){return s(g,m(g))}},73943:(y,_,o)=>{var s=o(93935);y.exports=function m(p){return null==p?"":s(p)}},89416:(y,_,o)=>{var s=o(96837),m=o(78858),p=o(45184),g=o(96517),c=o(29519),f=o(21503),i=o(80891),a=o(75946),l=o(25940),t=o(48159);y.exports=function u(d,x,w){var C=f(d),T=C||i(d)||t(d);if(x=g(x,4),null==w){var M=d&&d.constructor;w=T?C?new M:[]:l(d)&&a(M)?m(c(d)):{}}return(T?s:p)(d,function(I,k,P){return x(w,I,k,P)}),w}},68921:(y,_,o)=>{var s=o(50686),m=o(23269),p=o(80707),g=o(21330),c=m(function(f){return p(s(f,1,g,!0))});y.exports=c},51541:(y,_,o)=>{var s=o(73943),m=0;y.exports=function p(g){var c=++m;return s(g)+c}},90377:(y,_,o)=>{var s=o(19179),m=o(118);y.exports=function p(g){return null==g?[]:s(g,m(g))}},21617:(y,_,o)=>{var s=o(89719),m=o(38645);y.exports=function p(g,c){return m(g||[],c||[],s)}},67824:(y,_,o)=>{"use strict";function s(m){for(var p in m)_.hasOwnProperty(p)||(_[p]=m[p])}Object.defineProperty(_,"__esModule",{value:!0}),s(o(95085)),s(o(26243)),s(o(91786)),s(o(30225)),s(o(76767)),s(o(30345)),s(o(15675)),s(o(86461)),s(o(58802)),s(o(33900)),s(o(88866)),s(o(94655)),s(o(4068)),s(o(33858)),s(o(98237)),s(o(83292))},95085:function(y,_,o){"use strict";var c,s=this&&this.__extends||(c=function(f,i){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(f,i)},function(f,i){function a(){this.constructor=f}c(f,i),f.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(15675),p=function(c){function f(i){var a=c.call(this)||this,t=i;return t.trigger&&(a.trigger=t.trigger),t.kick&&(a.kick=t.kick),t.drag&&(a.drag=t.drag),t.on&&(a.on=t.on),a.dragstart=a.dragStart=m.Layout.dragStart,a.dragend=a.dragEnd=m.Layout.dragEnd,a}return s(f,c),f.prototype.trigger=function(i){},f.prototype.kick=function(){},f.prototype.drag=function(){},f.prototype.on=function(i,a){return this},f}(m.Layout);_.LayoutAdaptor=p,_.adaptor=function g(c){return new p(c)}},83292:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(15675),m=o(76767);_.gridify=function p(f,i,a,l){return f.cola.start(0,0,0,10,!1),function g(f,i,a,l){f.forEach(function(u){u.routerNode={name:u.name,bounds:u.bounds.inflate(-a)}}),i.forEach(function(u){u.routerNode={bounds:u.bounds.inflate(-l),children:(typeof u.groups<"u"?u.groups.map(function(d){return f.length+d.id}):[]).concat(typeof u.leaves<"u"?u.leaves.map(function(d){return d.index}):[])}});var t=f.concat(i).map(function(u,d){return u.routerNode.id=d,u.routerNode});return new m.GridRouter(t,{getChildren:function(u){return u.children},getBounds:function(u){return u.bounds}},a-l)}(f.cola.nodes(),f.cola.groups(),a,l).routeEdges(f.powerGraph.powerEdges,i,function(u){return u.source.routerNode.id},function(u){return u.target.routerNode.id})},_.powerGraphGridLayout=function c(f,i,a){var l;f.nodes.forEach(function(x,w){return x.index=w}),(new s.Layout).avoidOverlaps(!1).nodes(f.nodes).links(f.links).powerGraphGroups(function(x){(l=x).groups.forEach(function(w){return w.padding=a})});var t=f.nodes.length,u=[],d=f.nodes.slice(0);return d.forEach(function(x,w){return x.index=w}),l.groups.forEach(function(x){var w=x.index=x.id+t;d.push(x),typeof x.leaves<"u"&&x.leaves.forEach(function(C){return u.push({source:w,target:C.index})}),typeof x.groups<"u"&&x.groups.forEach(function(C){return u.push({source:w,target:C.id+t})})}),l.powerEdges.forEach(function(x){u.push({source:x.source.index,target:x.target.index})}),(new s.Layout).size(i).nodes(d).links(u).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new s.Layout).convergenceThreshold(.001).size(i).avoidOverlaps(!0).nodes(f.nodes).links(f.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(x){(l=x).groups.forEach(function(w){w.padding=a})}).start(50,0,100,0,!1),powerGraph:l}}},26243:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(49346),m=o(22487);_.d3adaptor=function p(c){return!c||function g(c){var f=/^3\./;return c.version&&null!==c.version.match(f)}(c)?new s.D3StyleLayoutAdaptor:new m.D3StyleLayoutAdaptor(c)}},49346:function(y,_,o){"use strict";var c,s=this&&this.__extends||(c=function(f,i){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(f,i)},function(f,i){function a(){this.constructor=f}c(f,i),f.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(15675),p=function(c){function f(){var i=c.call(this)||this;i.event=d3.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=i;return i.drag=function(){if(!t)var t=d3.behavior.drag().origin(m.Layout.dragOrigin).on("dragstart.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(u){m.Layout.drag(u,d3.event),a.resume()}).on("dragend.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},i}return s(f,c),f.prototype.trigger=function(i){var a={type:m.EventType[i.type],alpha:i.alpha,stress:i.stress};this.event[a.type](a)},f.prototype.kick=function(){var i=this;d3.timer(function(){return c.prototype.tick.call(i)})},f.prototype.on=function(i,a){return"string"==typeof i?this.event.on(i,a):this.event.on(m.EventType[i],a),this},f}(m.Layout);_.D3StyleLayoutAdaptor=p,_.d3adaptor=function g(){return new p}},22487:function(y,_,o){"use strict";var g,s=this&&this.__extends||(g=function(c,f){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l])})(c,f)},function(c,f){function i(){this.constructor=c}g(c,f),c.prototype=null===f?Object.create(f):(i.prototype=f.prototype,new i)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(15675),p=function(g){function c(f){var i=g.call(this)||this;i.d3Context=f,i.event=f.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=i;return i.drag=function(){if(!t)var t=f.drag().subject(m.Layout.dragOrigin).on("start.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(u){m.Layout.drag(u,f.event),a.resume()}).on("end.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},i}return s(c,g),c.prototype.trigger=function(f){var i={type:m.EventType[f.type],alpha:f.alpha,stress:f.stress};this.event.call(i.type,i)},c.prototype.kick=function(){var f=this,i=this.d3Context.timer(function(){return g.prototype.tick.call(f)&&i.stop()})},c.prototype.on=function(f,i){return"string"==typeof f?this.event.on(f,i):this.event.on(m.EventType[f],i),this},c}(m.Layout);_.D3StyleLayoutAdaptor=p},91786:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function(){function p(){this.locks={}}return p.prototype.add=function(g,c){this.locks[g]=c},p.prototype.clear=function(){this.locks={}},p.prototype.isEmpty=function(){for(var g in this.locks)return!1;return!0},p.prototype.apply=function(g){for(var c in this.locks)g(Number(c),this.locks[c])},p}();_.Locks=o;var s=function(){function p(g,c,f){void 0===f&&(f=null),this.D=c,this.G=f,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new m,this.project=null,this.x=g,this.k=g.length;var i=this.n=g[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new o,this.minD=Number.MAX_VALUE;for(var l,a=i;a--;)for(l=i;--l>a;){var t=c[a][l];t>0&&t<this.minD&&(this.minD=t)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(i),this.H[a]=new Array(i),l=i;l--;)this.H[a][l]=new Array(i);this.Hd[a]=new Array(i),this.a[a]=new Array(i),this.b[a]=new Array(i),this.c[a]=new Array(i),this.d[a]=new Array(i),this.e[a]=new Array(i),this.ia[a]=new Array(i),this.ib[a]=new Array(i),this.xtmp[a]=new Array(i)}}return p.createSquareMatrix=function(g,c){for(var f=new Array(g),i=0;i<g;++i){f[i]=new Array(g);for(var a=0;a<g;++a)f[i][a]=c(i,a)}return f},p.prototype.offsetDir=function(){for(var g=this,c=new Array(this.k),f=0,i=0;i<this.k;++i){var a=c[i]=this.random.getNextBetween(.01,1)-.5;f+=a*a}return f=Math.sqrt(f),c.map(function(l){return l*(g.minD/f)})},p.prototype.computeDerivatives=function(g){var c=this,f=this.n;if(!(f<1)){for(var i,a=new Array(this.k),l=new Array(this.k),t=new Array(this.k),u=0,d=0;d<f;++d){for(i=0;i<this.k;++i)t[i]=this.g[i][d]=0;for(var x=0;x<f;++x)if(d!==x){for(var w=f;w--;){var C=0;for(i=0;i<this.k;++i){var T=a[i]=g[i][d]-g[i][x];C+=l[i]=T*T}if(C>1e-9)break;var M=this.offsetDir();for(i=0;i<this.k;++i)g[i][x]+=M[i]}var I=Math.sqrt(C),k=this.D[d][x],P=null!=this.G?this.G[d][x]:1;if(P>1&&I>k||!isFinite(k)){for(i=0;i<this.k;++i)this.H[i][d][x]=0;continue}P>1&&(P=1);var H=k*k,V=2*P*(I-k)/(H*I),B=I*I*I,Y=2*-P/(H*B);for(isFinite(V)||console.log(V),i=0;i<this.k;++i)this.g[i][d]+=a[i]*V,t[i]-=this.H[i][d][x]=Y*(B+k*(l[i]-C)+I*C)}for(i=0;i<this.k;++i)u=Math.max(u,this.H[i][d][d]=t[i])}var S=this.snapGridSize/2,O=this.snapGridSize,F=this.snapStrength/(S*S),D=this.numGridSnapNodes;for(d=0;d<D;++d)for(i=0;i<this.k;++i){var z=this.x[i][d],K=z/O,U=K%1,G=K-U;-S<(T=Math.abs(U)<=.5?z-G*O:z>0?z-(G+1)*O:z-(G-1)*O)&&T<=S&&(this.scaleSnapByMaxH?(this.g[i][d]+=u*F*T,this.H[i][d][d]+=u*F):(this.g[i][d]+=F*T,this.H[i][d][d]+=F))}this.locks.isEmpty()||this.locks.apply(function(W,it){for(i=0;i<c.k;++i)c.H[i][W][W]+=u,c.g[i][W]-=u*(it[i]-g[i][W])})}},p.dotProd=function(g,c){for(var f=0,i=g.length;i--;)f+=g[i]*c[i];return f},p.rightMultiply=function(g,c,f){for(var i=g.length;i--;)f[i]=p.dotProd(g[i],c)},p.prototype.computeStepSize=function(g){for(var c=0,f=0,i=0;i<this.k;++i)c+=p.dotProd(this.g[i],g[i]),p.rightMultiply(this.H[i],g[i],this.Hd[i]),f+=p.dotProd(g[i],this.Hd[i]);return 0!==f&&isFinite(f)?1*c/f:0},p.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var g=this.computeStepSize(this.g),c=0;c<this.k;++c)this.takeDescentStep(this.x[c],this.g[c],g);return this.computeStress()},p.copy=function(g,c){for(var f=g.length,i=c[0].length,a=0;a<f;++a)for(var l=0;l<i;++l)c[a][l]=g[a][l]},p.prototype.stepAndProject=function(g,c,f,i){p.copy(g,c),this.takeDescentStep(c[0],f[0],i),this.project&&this.project[0](g[0],g[1],c[0]),this.takeDescentStep(c[1],f[1],i),this.project&&this.project[1](c[0],g[1],c[1]);for(var a=2;a<this.k;a++)this.takeDescentStep(c[a],f[a],i)},p.mApply=function(g,c,f){for(var i=g;i-- >0;)for(var a=c;a-- >0;)f(i,a)},p.prototype.matrixApply=function(g){p.mApply(this.k,this.n,g)},p.prototype.computeNextPosition=function(g,c){var f=this;this.computeDerivatives(g);var i=this.computeStepSize(this.g);if(this.stepAndProject(g,c,this.g,i),this.project){this.matrixApply(function(l,t){return f.e[l][t]=g[l][t]-c[l][t]});var a=this.computeStepSize(this.e);a=Math.max(.2,Math.min(a,1)),this.stepAndProject(g,c,this.e,a)}},p.prototype.run=function(g){for(var c=Number.MAX_VALUE,f=!1;!f&&g-- >0;){var i=this.rungeKutta();f=Math.abs(c/i-1)<this.threshold,c=i}return c},p.prototype.rungeKutta=function(){var g=this;this.computeNextPosition(this.x,this.a),p.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),p.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var c=0;return this.matrixApply(function(f,i){var a=(g.a[f][i]+2*g.b[f][i]+2*g.c[f][i]+g.d[f][i])/6,l=g.x[f][i]-a;c+=l*l,g.x[f][i]=a}),c},p.mid=function(g,c,f){p.mApply(g.length,g[0].length,function(i,a){return f[i][a]=g[i][a]+(c[i][a]-g[i][a])/2})},p.prototype.takeDescentStep=function(g,c,f){for(var i=0;i<this.n;++i)g[i]=g[i]-f*c[i]},p.prototype.computeStress=function(){for(var g=0,c=0,f=this.n-1;c<f;++c)for(var i=c+1,a=this.n;i<a;++i){for(var l=0,t=0;t<this.k;++t){var u=this.x[t][c]-this.x[t][i];l+=u*u}l=Math.sqrt(l);var d=this.D[c][i];if(isFinite(d)){var x=d-l;g+=x*x/(d*d)}}return g},p.zeroDistance=1e-10,p}();_.Descent=s;var m=function(){function p(g){void 0===g&&(g=1),this.seed=g,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return p.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},p.prototype.getNextBetween=function(g,c){return g+this.getNext()*(c-g)},p}();_.PseudoRandom=m},30225:function(y,_,o){"use strict";var U,s=this&&this.__extends||(U=function(G,X){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,it){W.__proto__=it}||function(W,it){for(var q in it)it.hasOwnProperty(q)&&(W[q]=it[q])})(G,X)},function(G,X){function W(){this.constructor=G}U(G,X),G.prototype=null===X?Object.create(X):(W.prototype=X.prototype,new W)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(4068),p=function U(){};_.Point=p;var g=function U(G,X,W,it){this.x1=G,this.y1=X,this.x2=W,this.y2=it};_.LineSegment=g;var c=function(U){function G(){return null!==U&&U.apply(this,arguments)||this}return s(G,U),G}(p);function f(U,G,X){return(G.x-U.x)*(X.y-U.y)-(X.x-U.x)*(G.y-U.y)}function i(U,G,X){return f(U,G,X)>0}function a(U,G,X){return f(U,G,X)<0}function x(U,G){var X=G.slice(0);return X.push(G[0]),{rtan:w(U,X),ltan:C(U,X)}}function w(U,G){var W,it,q,ct,X=G.length-1;if(a(U,G[1],G[0])&&!i(U,G[X-1],G[0]))return 0;for(W=0,it=X;;){if(it-W==1)return i(U,G[W],G[it])?W:it;if((ct=a(U,G[(q=Math.floor((W+it)/2))+1],G[q]))&&!i(U,G[q-1],G[q]))return q;i(U,G[W+1],G[W])?ct||i(U,G[W],G[q])?it=q:W=q:ct&&a(U,G[W],G[q])?it=q:W=q}}function C(U,G){var W,it,q,ct,X=G.length-1;if(i(U,G[X-1],G[0])&&!a(U,G[1],G[0]))return 0;for(W=0,it=X;;){if(it-W==1)return a(U,G[W],G[it])?W:it;if(ct=a(U,G[(q=Math.floor((W+it)/2))+1],G[q]),i(U,G[q-1],G[q])&&!ct)return q;a(U,G[W+1],G[W])?ct?a(U,G[W],G[q])?it=q:W=q:it=q:ct?W=q:i(U,G[W],G[q])?it=q:W=q}}function T(U,G,X,W,it,q){var ut,ct;ct=W(U[ut=X(G[0],U)],G);for(var yt=!1;!yt;){for(yt=!0;ut===U.length-1&&(ut=0),!it(G[ct],U[ut],U[ut+1]);)++ut;for(;0===ct&&(ct=G.length-1),!q(U[ut],G[ct],G[ct-1]);)--ct,yt=!1}return{t1:ut,t2:ct}}function I(U,G){return T(U,G,w,C,i,a)}_.PolyPoint=c,_.isLeft=f,_.ConvexHull=function l(U){var W,G=U.slice(0).sort(function(ht,mt){return ht.x!==mt.x?mt.x-ht.x:mt.y-ht.y}),X=U.length,q=G[0].x;for(W=1;W<X&&G[W].x===q;++W);var ut=W-1,ct=[];if(ct.push(G[0]),ut===X-1)G[ut].y!==G[0].y&&ct.push(G[ut]);else{var yt,$=X-1,Q=G[X-1].x;for(W=X-2;W>=0&&G[W].x===Q;W--);for(yt=W+1,W=ut;++W<=yt;)if(!(f(G[0],G[yt],G[W])>=0&&W<yt)){for(;ct.length>1&&!(f(ct[ct.length-2],ct[ct.length-1],G[W])>0);)ct.length-=1;0!=W&&ct.push(G[W])}$!=yt&&ct.push(G[$]);var nt=ct.length;for(W=yt;--W>=ut;)if(!(f(G[$],G[ut],G[W])>=0&&W>ut)){for(;ct.length>nt&&!(f(ct[ct.length-2],ct[ct.length-1],G[W])>0);)ct.length-=1;0!=W&&ct.push(G[W])}}return ct},_.clockwiseRadialSweep=function t(U,G,X){G.slice(0).sort(function(W,it){return Math.atan2(W.y-U.y,W.x-U.x)-Math.atan2(it.y-U.y,it.x-U.x)}).forEach(X)},_.tangent_PolyPolyC=T,_.LRtangent_PolyPolyC=function M(U,G){var X=I(G,U);return{t1:X.t2,t2:X.t1}},_.RLtangent_PolyPolyC=I,_.LLtangent_PolyPolyC=function k(U,G){return T(U,G,C,C,a,a)},_.RRtangent_PolyPolyC=function P(U,G){return T(U,G,w,w,i,i)};var H=function U(G,X){this.t1=G,this.t2=X};_.BiTangent=H;var V=function U(){};_.BiTangents=V;var B=function(U){function G(){return null!==U&&U.apply(this,arguments)||this}return s(G,U),G}(p);_.TVGPoint=B;var Y=function U(G,X,W,it){this.id=G,this.polyid=X,this.polyvertid=W,this.p=it,it.vv=this};_.VisibilityVertex=Y;var S=function(){function U(G,X){this.source=G,this.target=X}return U.prototype.length=function(){var G=this.source.p.x-this.target.p.x,X=this.source.p.y-this.target.p.y;return Math.sqrt(G*G+X*X)},U}();_.VisibilityEdge=S;var O=function(){function U(G,X){if(this.P=G,this.V=[],this.E=[],X)this.V=X.V.slice(0),this.E=X.E.slice(0);else{for(var W=G.length,it=0;it<W;it++){for(var q=G[it],ut=0;ut<q.length;++ut){var ct=q[ut],yt=new Y(this.V.length,it,ut,ct);this.V.push(yt),ut>0&&this.E.push(new S(q[ut-1].vv,yt))}q.length>1&&this.E.push(new S(q[0].vv,q[q.length-1].vv))}for(it=0;it<W-1;it++){var $=G[it];for(ut=it+1;ut<W;ut++){var Q=G[ut],nt=F($,Q);for(var ht in nt){var mt=nt[ht],dt=$[mt.t1],_t=Q[mt.t2];this.addEdgeIfVisible(dt,_t,it,ut)}}}}}return U.prototype.addEdgeIfVisible=function(G,X,W,it){this.intersectsPolys(new g(G.x,G.y,X.x,X.y),W,it)||this.E.push(new S(G.vv,X.vv))},U.prototype.addPoint=function(G,X){var W=this.P.length;this.V.push(new Y(this.V.length,W,0,G));for(var it=0;it<W;++it)if(it!==X){var q=this.P[it],ut=x(G,q);this.addEdgeIfVisible(G,q[ut.ltan],X,it),this.addEdgeIfVisible(G,q[ut.rtan],X,it)}return G.vv},U.prototype.intersectsPolys=function(G,X,W){for(var it=0,q=this.P.length;it<q;++it)if(it!=X&&it!=W&&L(G,this.P[it]).length>0)return!0;return!1},U}();function L(U,G){for(var X=[],W=1,it=G.length;W<it;++W){var q=m.Rectangle.lineIntersection(U.x1,U.y1,U.x2,U.y2,G[W-1].x,G[W-1].y,G[W].x,G[W].y);q&&X.push(q)}return X}function F(U,G){for(var X=U.length-1,W=G.length-1,it=new V,q=0;q<X;++q)for(var ut=0;ut<W;++ut){var ct=U[0==q?X-1:q-1],yt=U[q],$=U[q+1],Q=G[0==ut?W-1:ut-1],nt=G[ut],ht=G[ut+1],mt=f(ct,yt,nt),dt=f(yt,Q,nt),_t=f(yt,nt,ht),bt=f(Q,nt,yt),ot=f(nt,ct,yt),st=f(nt,yt,$);mt>=0&&dt>=0&&_t<0&&bt>=0&&ot>=0&&st<0?it.ll=new H(q,ut):mt<=0&&dt<=0&&_t>0&&bt<=0&&ot<=0&&st>0?it.rr=new H(q,ut):mt<=0&&dt>0&&_t<=0&&bt>=0&&ot<0&&st>=0?it.rl=new H(q,ut):mt>=0&&dt<0&&_t>=0&&bt<=0&&ot>0&&st<=0&&(it.lr=new H(q,ut))}return it}function z(U,G){return!U.every(function(X){return!function D(U,G){for(var X=1,W=G.length;X<W;++X)if(a(G[X-1],G[X],U))return!1;return!0}(X,G)})}_.TangentVisibilityGraph=O,_.tangents=F,_.polysOverlap=function K(U,G){if(z(U,G)||z(G,U))return!0;for(var X=1,W=U.length;X<W;++X){var it=U[X],q=U[X-1];if(L(new g(q.x,q.y,it.x,it.y),G).length>0)return!0}return!1}},76767:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(4068),m=o(98237),p=o(33858),g=function a(l,t,u){this.id=l,this.rect=t,this.children=u,this.leaf=typeof u>"u"||0===u.length};_.NodeWrapper=g;var c=function a(l,t,u,d,x){void 0===d&&(d=null),void 0===x&&(x=null),this.id=l,this.x=t,this.y=u,this.node=d,this.line=x};_.Vert=c;var f=function(){function a(l,t){this.s=l,this.t=t;var u=a.findMatch(l,t),d=t.slice(0).reverse(),x=a.findMatch(l,d);u.length>=x.length?(this.length=u.length,this.si=u.si,this.ti=u.ti,this.reversed=!1):(this.length=x.length,this.si=x.si,this.ti=t.length-x.ti-x.length,this.reversed=!0)}return a.findMatch=function(l,t){for(var u=l.length,d=t.length,x={length:0,si:-1,ti:-1},w=new Array(u),C=0;C<u;C++){w[C]=new Array(d);for(var T=0;T<d;T++)if(l[C]===t[T]){var M=w[C][T]=0===C||0===T?1:w[C-1][T-1]+1;M>x.length&&(x.length=M,x.si=C-M+1,x.ti=T-M+1)}else w[C][T]=0}return x},a.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},a}();_.LongestCommonSubsequence=f;var i=function(){function a(l,t,u){var d=this;void 0===u&&(u=12),this.originalnodes=l,this.groupPadding=u,this.leaves=null,this.nodes=l.map(function(B,Y){return new g(Y,t.getBounds(B),t.getChildren(B))}),this.leaves=this.nodes.filter(function(B){return B.leaf}),this.groups=this.nodes.filter(function(B){return!B.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(B){return B.children.forEach(function(Y){return d.nodes[Y].parent=B})}),this.root={children:[]},this.nodes.forEach(function(B){typeof B.parent>"u"&&(B.parent=d.root,d.root.children.push(B.id)),B.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(B,Y){return d.getDepth(B)-d.getDepth(Y)}),this.backToFront.slice(0).reverse().filter(function(B){return!B.leaf}).forEach(function(B){var Y=s.Rectangle.empty();B.children.forEach(function(S){return Y=Y.union(d.nodes[S].rect)}),B.rect=Y.inflate(d.groupPadding)});var w=this.midPoints(this.cols.map(function(B){return B.pos})),C=this.midPoints(this.rows.map(function(B){return B.pos})),T=w[0],M=w[w.length-1],I=C[0],k=C[C.length-1],P=this.rows.map(function(B){return{x1:T,x2:M,y1:B.pos,y2:B.pos}}).concat(C.map(function(B){return{x1:T,x2:M,y1:B,y2:B}})),H=this.cols.map(function(B){return{x1:B.pos,x2:B.pos,y1:I,y2:k}}).concat(w.map(function(B){return{x1:B,x2:B,y1:I,y2:k}})),V=P.concat(H);V.forEach(function(B){return B.verts=[]}),this.verts=[],this.edges=[],P.forEach(function(B){return H.forEach(function(Y){var S=new c(d.verts.length,Y.x1,B.y1);B.verts.push(S),Y.verts.push(S),d.verts.push(S);for(var O=d.backToFront.length;O-- >0;){var L=d.backToFront[O],F=L.rect,D=Math.abs(S.x-F.cx()),z=Math.abs(S.y-F.cy());if(D<F.width()/2&&z<F.height()/2){S.node=L;break}}})}),V.forEach(function(B,Y){d.nodes.forEach(function(z,K){z.rect.lineIntersections(B.x1,B.y1,B.x2,B.y2).forEach(function(U,G){var X=new c(d.verts.length,U.x,U.y,z,B);d.verts.push(X),B.verts.push(X),z.ports.push(X)})});var S=Math.abs(B.y1-B.y2)<.1,O=function(z,K){return S?K.x-z.x:K.y-z.y};B.verts.sort(O);for(var L=1;L<B.verts.length;L++){var F=B.verts[L-1],D=B.verts[L];F.node&&F.node===D.node&&F.node.leaf||d.edges.push({source:F.id,target:D.id,length:Math.abs(O(F,D))})}})}return a.prototype.avg=function(l){return l.reduce(function(t,u){return t+u})/l.length},a.prototype.getGridLines=function(l){for(var t=[],u=this.leaves.slice(0,this.leaves.length);u.length>0;){var d=u.filter(function(w){return w.rect["overlap"+l.toUpperCase()](u[0].rect)}),x={nodes:d,pos:this.avg(d.map(function(w){return w.rect["c"+l]()}))};t.push(x),x.nodes.forEach(function(w){return u.splice(u.indexOf(w),1)})}return t.sort(function(w,C){return w.pos-C.pos}),t},a.prototype.getDepth=function(l){for(var t=0;l.parent!==this.root;)t++,l=l.parent;return t},a.prototype.midPoints=function(l){for(var t=l[1]-l[0],u=[l[0]-t/2],d=1;d<l.length;d++)u.push((l[d]+l[d-1])/2);return u.push(l[l.length-1]+t/2),u},a.prototype.findLineage=function(l){var t=[l];do{l=l.parent,t.push(l)}while(l!==this.root);return t.reverse()},a.prototype.findAncestorPathBetween=function(l,t){for(var u=this.findLineage(l),d=this.findLineage(t),x=0;u[x]===d[x];)x++;return{commonAncestor:u[x-1],lineages:u.slice(x).concat(d.slice(x))}},a.prototype.siblingObstacles=function(l,t){var u=this,d=this.findAncestorPathBetween(l,t),x={};d.lineages.forEach(function(C){return x[C.id]={}});var w=d.commonAncestor.children.filter(function(C){return!(C in x)});return d.lineages.filter(function(C){return C.parent!==d.commonAncestor}).forEach(function(C){return w=w.concat(C.parent.children.filter(function(T){return T!==C.id}))}),w.map(function(C){return u.nodes[C]})},a.getSegmentSets=function(l,t,u){for(var d=[],x=0;x<l.length;x++)for(var w=l[x],C=0;C<w.length;C++){(T=w[C]).edgeid=x,T.i=C;var M=T[1][t]-T[0][t];Math.abs(M)<.1&&d.push(T)}d.sort(function(H,V){return H[0][t]-V[0][t]});for(var I=[],k=null,P=0;P<d.length;P++){var T=d[P];(!k||Math.abs(T[0][t]-k.pos)>.1)&&(k={pos:T[0][t],segments:[]},I.push(k)),k.segments.push(T)}return I},a.nudgeSegs=function(l,t,u,d,x,w){var C=d.length;if(!(C<=1)){for(var T=d.map(function(L){return new m.Variable(L[0][l])}),M=[],I=0;I<C;I++)for(var k=0;k<C;k++)if(I!==k){var P=d[I],H=d[k],V=P.edgeid,B=H.edgeid,Y=-1,S=-1;"x"==l?x(V,B)&&(P[0][t]<P[1][t]?(Y=k,S=I):(Y=I,S=k)):x(V,B)&&(P[0][t]<P[1][t]?(Y=I,S=k):(Y=k,S=I)),Y>=0&&M.push(new m.Constraint(T[Y],T[S],w))}new m.Solver(T,M).solve(),T.forEach(function(L,F){var D=d[F],z=L.position();D[0][l]=D[1][l]=z;var K=u[D.edgeid];D.i>0&&(K[D.i-1][1][l]=z),D.i<K.length-1&&(K[D.i+1][0][l]=z)})}},a.nudgeSegments=function(l,t,u,d,x){for(var w=a.getSegmentSets(l,t,u),C=0;C<w.length;C++){for(var T=w[C],M=[],I=0;I<T.segments.length;I++){var k=T.segments[I];M.push({type:0,s:k,pos:Math.min(k[0][u],k[1][u])}),M.push({type:1,s:k,pos:Math.max(k[0][u],k[1][u])})}M.sort(function(V,B){return V.pos-B.pos+V.type-B.type});var P=[],H=0;M.forEach(function(V){0===V.type?(P.push(V.s),H++):H--,0==H&&(a.nudgeSegs(t,u,l,P,d,x),P=[])})}},a.prototype.routeEdges=function(l,t,u,d){var x=this,w=l.map(function(M){return x.route(u(M),d(M))}),C=a.orderEdges(w),T=w.map(function(M){return a.makeSegments(M)});return a.nudgeSegments(T,"x","y",C,t),a.nudgeSegments(T,"y","x",C,t),a.unreverseEdges(T,w),T},a.unreverseEdges=function(l,t){l.forEach(function(u,d){t[d].reversed&&(u.reverse(),u.forEach(function(w){w.reverse()}))})},a.angleBetween2Lines=function(l,t){var u=Math.atan2(l[0].y-l[1].y,l[0].x-l[1].x),d=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),x=u-d;return(x>Math.PI||x<-Math.PI)&&(x=d-u),x},a.isLeft=function(l,t,u){return(t.x-l.x)*(u.y-l.y)-(t.y-l.y)*(u.x-l.x)<=0},a.getOrder=function(l){for(var t={},u=0;u<l.length;u++){var d=l[u];typeof t[d.l]>"u"&&(t[d.l]={}),t[d.l][d.r]=!0}return function(x,w){return typeof t[x]<"u"&&t[x][w]}},a.orderEdges=function(l){for(var t=[],u=0;u<l.length-1;u++)for(var d=u+1;d<l.length;d++){var T,M,I,x=l[u],w=l[d],C=new f(x,w);if(0!==C.length){if(C.reversed&&(w.reverse(),w.reversed=!0,C=new f(x,w)),(C.si<=0||C.ti<=0)&&(C.si+C.length>=x.length||C.ti+C.length>=w.length)){t.push({l:u,r:d});continue}C.si+C.length>=x.length||C.ti+C.length>=w.length?(T=x[C.si+1],I=x[C.si-1],M=w[C.ti-1]):(T=x[C.si+C.length-2],M=x[C.si+C.length],I=w[C.ti+C.length]),a.isLeft(T,M,I)?t.push({l:d,r:u}):t.push({l:u,r:d})}}return a.getOrder(t)},a.makeSegments=function(l){function t(M){return{x:M.x,y:M.y}}for(var d=[],x=t(l[0]),w=1;w<l.length;w++){var C=t(l[w]),T=w<l.length-1?l[w+1]:null;(!T||(M=x,I=C,k=T,!(Math.abs((I.x-M.x)*(k.y-M.y)-(I.y-M.y)*(k.x-M.x))<.001)))&&(d.push([x,C]),x=C)}var M,I,k;return d},a.prototype.route=function(l,t){var u=this,d=this.nodes[l],x=this.nodes[t];this.obstacles=this.siblingObstacles(d,x);var w={};this.obstacles.forEach(function(S){return w[S.id]=S}),this.passableEdges=this.edges.filter(function(S){var O=u.verts[S.source],L=u.verts[S.target];return!(O.node&&O.node.id in w||L.node&&L.node.id in w)});for(var C=1;C<d.ports.length;C++){var T=d.ports[0].id,M=d.ports[C].id;this.passableEdges.push({source:T,target:M,length:0})}for(C=1;C<x.ports.length;C++){T=x.ports[0].id,M=x.ports[C].id;this.passableEdges.push({source:T,target:M,length:0})}var Y=new p.Calculator(this.verts.length,this.passableEdges,function(S){return S.source},function(S){return S.target},function(S){return S.length}).PathFromNodeToNodeWithPrevCost(d.ports[0].id,x.ports[0].id,function(S,O,L){var F=u.verts[S],D=u.verts[O],z=u.verts[L],K=Math.abs(z.x-F.x),U=Math.abs(z.y-F.y);return F.node===d&&F.node===D.node||D.node===x&&D.node===z.node?0:K>1&&U>1?1e3:0}).reverse().map(function(S){return u.verts[S]});return Y.push(this.nodes[x.id].ports[0]),Y.filter(function(S,O){return!(O<Y.length-1&&Y[O+1].node===d&&S.node===d||O>0&&S.node===x&&Y[O-1].node===x)})},a.getRoutePath=function(l,t,u,d){var x={routepath:"M "+l[0][0].x+" "+l[0][0].y+" ",arrowpath:""};if(l.length>1)for(var w=0;w<l.length;w++){var T=(C=l[w])[1].x,M=C[1].y,I=T-C[0].x,k=M-C[0].y;if(w<l.length-1){Math.abs(I)>0?T-=I/Math.abs(I)*t:M-=k/Math.abs(k)*t,x.routepath+="L "+T+" "+M+" ";var P=l[w+1],H=P[0].x,V=P[0].y;I=P[1].x-H,k=P[1].y-V;var O,L,S=a.angleBetween2Lines(C,P)<0?1:0;Math.abs(I)>0?(O=H+I/Math.abs(I)*t,L=V):(O=H,L=V+k/Math.abs(k)*t);var F=Math.abs(O-T),D=Math.abs(L-M);x.routepath+="A "+F+" "+D+" 0 0 "+S+" "+O+" "+L+" "}else{var z=[T,M];Math.abs(I)>0?(K=[T-=I/Math.abs(I)*d,M+u],U=[T,M-u]):(K=[T+u,M-=k/Math.abs(k)*d],U=[T-u,M]),x.routepath+="L "+T+" "+M+" ",d>0&&(x.arrowpath="M "+z[0]+" "+z[1]+" L "+K[0]+" "+K[1]+" L "+U[0]+" "+U[1])}}else{var C,K,U;T=(C=l[0])[1].x,M=C[1].y,I=T-C[0].x,k=M-C[0].y,z=[T,M];Math.abs(I)>0?(K=[T-=I/Math.abs(I)*d,M+u],U=[T,M-u]):(K=[T+u,M-=k/Math.abs(k)*d],U=[T-u,M]),x.routepath+="L "+T+" "+M+" ",d>0&&(x.arrowpath="M "+z[0]+" "+z[1]+" L "+K[0]+" "+K[1]+" L "+U[0]+" "+U[1])}return x},a}();_.GridRouter=i},30345:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o_PADDING=10,o_GOLDEN_SECTION=(1+Math.sqrt(5))/2,o_FLOAT_EPSILON=1e-4;_.applyPacking=function s(p,g,c,w,x,a){void 0===x&&(x=1),void 0===a&&(a=!0);var u=g,d=c,C=(x=typeof x<"u"?x:1,w=typeof w<"u"?w:0,0),T=0,M=0,I=0,k=[];function B(L,F){k=[],C=0,T=0,I=0;for(var D=0;D<L.length;D++){Y(L[D],F)}return Math.abs(function O(){return C/T}()-x)}function Y(L,F){for(var D=void 0,z=0;z<k.length;z++)if(k[z].space_left>=L.height&&k[z].x+k[z].width+L.width+o_PADDING-F<=o_FLOAT_EPSILON){D=k[z];break}k.push(L),void 0!==D?(L.x=D.x+D.width+o_PADDING,L.y=D.bottom,L.space_left=L.height,L.bottom=L.y,D.space_left-=L.height+o_PADDING,D.bottom+=L.height+o_PADDING):(L.y=I,I+=L.height+o_PADDING,L.x=0,L.bottom=L.y,L.space_left=L.height),L.y+L.height-T>-o_FLOAT_EPSILON&&(T=L.y+L.height-0),L.x+L.width-C>-o_FLOAT_EPSILON&&(C=L.x+L.width-0)}0!=p.length&&(function P(L){L.forEach(function(D){!function F(D){var z=Number.MAX_VALUE,K=Number.MAX_VALUE,U=0,G=0;D.array.forEach(function(X){var W=typeof X.width<"u"?X.width:w,it=typeof X.height<"u"?X.height:w;W/=2,it/=2,U=Math.max(X.x+W,U),z=Math.min(X.x-W,z),G=Math.max(X.y+it,G),K=Math.min(X.y-it,K)}),D.width=U-z,D.height=G-K}(D)})}(p),function V(L,F){var D=Number.POSITIVE_INFINITY,z=0;L.sort(function($,Q){return Q.height-$.height}),M=L.reduce(function($,Q){return $.width<Q.width?$.width:Q.width});for(var K=ct=M,U=yt=function S(L){var F=0;return L.forEach(function(D){return F+=D.width+o_PADDING}),F}(L),G=0,X=Number.MAX_VALUE,W=Number.MAX_VALUE,it=-1,q=Number.MAX_VALUE,ut=Number.MAX_VALUE;q>M||ut>o_FLOAT_EPSILON;){if(1!=it){var ct=U-(U-K)/o_GOLDEN_SECTION;X=B(L,ct)}if(0!=it){var yt=K+(U-K)/o_GOLDEN_SECTION;W=B(L,yt)}if(q=Math.abs(ct-yt),ut=Math.abs(X-W),X<D&&(D=X,z=ct),W<D&&(D=W,z=yt),X>W?(K=ct,ct=yt,X=W,it=1):(U=yt,yt=ct,W=X,it=0),G++>100)break}B(L,z)}(p),a&&function H(L){L.forEach(function(F){var D={x:0,y:0};F.array.forEach(function(U){D.x+=U.x,D.y+=U.y}),D.x/=F.array.length,D.y/=F.array.length;var z_x=D.x-F.width/2,z_y=D.y-F.height/2,K_x=F.x-z_x+u/2-C/2,K_y=F.y-z_y+d/2-T/2;F.array.forEach(function(U){U.x+=K_x,U.y+=K_y})})}(p))},_.separateGraphs=function m(p,g){for(var c={},f={},i=[],a=0,l=0;l<g.length;l++){var t=g[l],u=t.source,d=t.target;f[u.index]?f[u.index].push(d):f[u.index]=[d],f[d.index]?f[d.index].push(u):f[d.index]=[u]}for(l=0;l<p.length;l++){var x=p[l];c[x.index]||w(x,!0)}function w(C,T){if(void 0===c[C.index]){T&&(a++,i.push({array:[]})),c[C.index]=a,i[a-1].array.push(C);var M=f[C.index];if(M)for(var I=0;I<M.length;I++)w(M[I],!1)}}return i}},15675:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var a,u,s=o(33900),m=o(58802),p=o(91786),g=o(4068),c=o(33858),f=o(30225),i=o(30345);function l(u){return typeof u.leaves<"u"||typeof u.groups<"u"}(u=a=_.EventType||(_.EventType={}))[u.start=0]="start",u[u.tick=1]="tick",u[u.end=2]="end";var t=function(){function u(){var d=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:u.getSourceIndex,getTargetIndex:u.getTargetIndex,setLength:u.setLinkLength,getType:function(x){return"function"==typeof d._linkType?d._linkType(x):0}}}return u.prototype.on=function(d,x){return this.event||(this.event={}),"string"==typeof d?this.event[a[d]]=x:this.event[d]=x,this},u.prototype.trigger=function(d){this.event&&typeof this.event[d.type]<"u"&&this.event[d.type](d)},u.prototype.kick=function(){for(;!this.tick(););},u.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:a.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var w,C,d=this._nodes.length;this._links.length;for(this._descent.locks.clear(),C=0;C<d;++C)if((w=this._nodes[C]).fixed){(typeof w.px>"u"||typeof w.py>"u")&&(w.px=w.x,w.py=w.y);var T=[w.px,w.py];this._descent.locks.add(C,T)}var M=this._descent.rungeKutta();return 0===M?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=M),this._lastStress=M,this.updateNodePositions(),this.trigger({type:a.tick,alpha:this._alpha,stress:this._lastStress}),!1},u.prototype.updateNodePositions=function(){for(var w,d=this._descent.x[0],x=this._descent.x[1],C=this._nodes.length;C--;)(w=this._nodes[C]).x=d[C],w.y=x[C]},u.prototype.nodes=function(d){if(!d){if(0===this._nodes.length&&this._links.length>0){var x=0;this._links.forEach(function(C){x=Math.max(x,C.source,C.target)}),this._nodes=new Array(++x);for(var w=0;w<x;++w)this._nodes[w]={}}return this._nodes}return this._nodes=d,this},u.prototype.groups=function(d){var x=this;return d?(this._groups=d,this._rootGroup={},this._groups.forEach(function(w){typeof w.padding>"u"&&(w.padding=1),typeof w.leaves<"u"&&w.leaves.forEach(function(C,T){"number"==typeof C&&((w.leaves[T]=x._nodes[C]).parent=w)}),typeof w.groups<"u"&&w.groups.forEach(function(C,T){"number"==typeof C&&((w.groups[T]=x._groups[C]).parent=w)})}),this._rootGroup.leaves=this._nodes.filter(function(w){return typeof w.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(w){return typeof w.parent>"u"}),this):this._groups},u.prototype.powerGraphGroups=function(d){var x=s.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(x.groups),d(x),this},u.prototype.avoidOverlaps=function(d){return arguments.length?(this._avoidOverlaps=d,this):this._avoidOverlaps},u.prototype.handleDisconnected=function(d){return arguments.length?(this._handleDisconnected=d,this):this._handleDisconnected},u.prototype.flowLayout=function(d,x){return arguments.length||(d="y"),this._directedLinkConstraints={axis:d,getMinSeparation:"number"==typeof x?function(){return x}:x},this},u.prototype.links=function(d){return arguments.length?(this._links=d,this):this._links},u.prototype.constraints=function(d){return arguments.length?(this._constraints=d,this):this._constraints},u.prototype.distanceMatrix=function(d){return arguments.length?(this._distanceMatrix=d,this):this._distanceMatrix},u.prototype.size=function(d){return d?(this._canvasSize=d,this):this._canvasSize},u.prototype.defaultNodeSize=function(d){return d?(this._defaultNodeSize=d,this):this._defaultNodeSize},u.prototype.groupCompactness=function(d){return d?(this._groupCompactness=d,this):this._groupCompactness},u.prototype.linkDistance=function(d){return d?(this._linkDistance="function"==typeof d?d:+d,this._linkLengthCalculator=null,this):this._linkDistance},u.prototype.linkType=function(d){return this._linkType=d,this},u.prototype.convergenceThreshold=function(d){return d?(this._threshold="function"==typeof d?d:+d,this):this._threshold},u.prototype.alpha=function(d){return arguments.length?(d=+d,this._alpha?this._alpha=d>0?d:0:d>0&&(this._running||(this._running=!0,this.trigger({type:a.start,alpha:this._alpha=d}),this.kick())),this):this._alpha},u.prototype.getLinkLength=function(d){return"function"==typeof this._linkDistance?+this._linkDistance(d):this._linkDistance},u.setLinkLength=function(d,x){d.length=x},u.prototype.getLinkType=function(d){return"function"==typeof this._linkType?this._linkType(d):0},u.prototype.symmetricDiffLinkLengths=function(d,x){var w=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.symmetricDiffLinkLengths(w._links,w.linkAccessor,x)},this},u.prototype.jaccardLinkLengths=function(d,x){var w=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.jaccardLinkLengths(w._links,w.linkAccessor,x)},this},u.prototype.start=function(d,x,w,C,T,M){var I=this;void 0===d&&(d=0),void 0===x&&(x=0),void 0===w&&(w=0),void 0===C&&(C=0),void 0===T&&(T=!0),void 0===M&&(M=!0);var z,H=this.nodes().length,V=H+2*this._groups.length,Y=(this._links.length,this._canvasSize[0]),S=this._canvasSize[1],O=new Array(V),L=new Array(V),F=null,D=this._avoidOverlaps;this._nodes.forEach(function(q,ut){q.index=ut,typeof q.x>"u"&&(q.x=Y/2,q.y=S/2),O[ut]=q.x,L[ut]=q.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?z=this._distanceMatrix:(z=new c.Calculator(V,this._links,u.getSourceIndex,u.getTargetIndex,function(q){return I.getLinkLength(q)}).DistanceMatrix(),F=p.Descent.createSquareMatrix(V,function(){return 2}),this._links.forEach(function(q){"number"==typeof q.source&&(q.source=I._nodes[q.source]),"number"==typeof q.target&&(q.target=I._nodes[q.target])}),this._links.forEach(function(q){var ut=u.getSourceIndex(q),ct=u.getTargetIndex(q);F[ut][ct]=F[ct][ut]=q.weight||1}));var K=p.Descent.createSquareMatrix(V,function(q,ut){return z[q][ut]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var k=H;this._groups.forEach(function(ut){(function(ut,ct,yt,$){F[ut][ct]=F[ct][ut]=yt,K[ut][ct]=K[ct][ut]=$})(k,k+1,I._groupCompactness,.1),O[k]=0,L[k++]=0,O[k]=0,L[k++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var G=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,G=G.concat(m.generateDirectedEdgeConstraints(H,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new p.Descent([O,L],K),this._descent.locks.clear();for(k=0;k<H;++k){var X=this._nodes[k];if(X.fixed){X.px=X.x,X.py=X.y;var W=[X.x,X.y];this._descent.locks.add(k,W)}}if(this._descent.threshold=this._threshold,this.initialLayout(d,O,L),G.length>0&&(this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,G).projectFunctions()),this._descent.run(x),this.separateOverlappingComponents(Y,S,M),this.avoidOverlaps(D),D&&(this._nodes.forEach(function(q,ut){q.x=O[ut],q.y=L[ut]}),this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,G,!0).projectFunctions(),this._nodes.forEach(function(q,ut){O[ut]=q.x,L[ut]=q.y})),this._descent.G=F,this._descent.run(w),C){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=H,this._descent.scaleSnapByMaxH=H!=V;var it=p.Descent.createSquareMatrix(V,function(q,ut){return q>=H||ut>=H?F[q][ut]:0});this._descent.G=it,this._descent.run(C)}return this.updateNodePositions(),this.separateOverlappingComponents(Y,S,M),T?this.resume():this},u.prototype.initialLayout=function(d,x,w){if(this._groups.length>0&&d>0){var C=this._nodes.length,T=this._links.map(function(I){return{source:I.source.index,target:I.target.index}}),M=this._nodes.map(function(I){return{index:I.index}});this._groups.forEach(function(I,k){M.push({index:I.index=C+k})}),this._groups.forEach(function(I,k){typeof I.leaves<"u"&&I.leaves.forEach(function(P){return T.push({source:I.index,target:P.index})}),typeof I.groups<"u"&&I.groups.forEach(function(P){return T.push({source:I.index,target:P.index})})}),(new u).size(this.size()).nodes(M).links(T).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(d,0,0,0,!1),this._nodes.forEach(function(I){x[I.index]=M[I.index].x,w[I.index]=M[I.index].y})}else this._descent.run(d)},u.prototype.separateOverlappingComponents=function(d,x,w){var C=this;if(void 0===w&&(w=!0),!this._distanceMatrix&&this._handleDisconnected){var T=this._descent.x[0],M=this._descent.x[1];this._nodes.forEach(function(k,P){k.x=T[P],k.y=M[P]});var I=i.separateGraphs(this._nodes,this._links);i.applyPacking(I,d,x,this._defaultNodeSize,1,w),this._nodes.forEach(function(k,P){C._descent.x[0][P]=k.x,C._descent.x[1][P]=k.y,k.bounds&&(k.bounds.setXCentre(k.x),k.bounds.setYCentre(k.y))})}},u.prototype.resume=function(){return this.alpha(.1)},u.prototype.stop=function(){return this.alpha(0)},u.prototype.prepareEdgeRouting=function(d){void 0===d&&(d=0),this._visibilityGraph=new f.TangentVisibilityGraph(this._nodes.map(function(x){return x.bounds.inflate(-d).vertices()}))},u.prototype.routeEdge=function(d,x,w){void 0===x&&(x=5);var C=[],T=new f.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),M={x:d.source.x,y:d.source.y},I={x:d.target.x,y:d.target.y},k=T.addPoint(M,d.source.index),P=T.addPoint(I,d.target.index);T.addEdgeIfVisible(M,I,d.source.index,d.target.index),typeof w<"u"&&w(T);var S=new c.Calculator(T.V.length,T.E,function(K){return K.source.id},function(K){return K.target.id},function(K){return K.length()}).PathFromNodeToNode(k.id,P.id);if(1===S.length||S.length===T.V.length){var O=g.makeEdgeBetween(d.source.innerBounds,d.target.innerBounds,x);C=[O.sourceIntersection,O.arrowStart]}else{for(var L=S.length-2,F=T.V[S[L]].p,D=T.V[S[0]].p,z=(C=[d.source.innerBounds.rayIntersection(F.x,F.y)],L);z>=0;--z)C.push(T.V[S[z]].p);C.push(g.makeEdgeTo(D,d.target.innerBounds,x))}return C},u.getSourceIndex=function(d){return"number"==typeof d.source?d.source:d.source.index},u.getTargetIndex=function(d){return"number"==typeof d.target?d.target:d.target.index},u.linkId=function(d){return u.getSourceIndex(d)+"-"+u.getTargetIndex(d)},u.dragStart=function(d){l(d)?u.storeOffset(d,u.dragOrigin(d)):(u.stopNode(d),d.fixed|=2)},u.stopNode=function(d){d.px=d.x,d.py=d.y},u.storeOffset=function(d,x){typeof d.leaves<"u"&&d.leaves.forEach(function(w){w.fixed|=2,u.stopNode(w),w._dragGroupOffsetX=w.x-x.x,w._dragGroupOffsetY=w.y-x.y}),typeof d.groups<"u"&&d.groups.forEach(function(w){return u.storeOffset(w,x)})},u.dragOrigin=function(d){return l(d)?{x:d.bounds.cx(),y:d.bounds.cy()}:d},u.drag=function(d,x){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(w){d.bounds.setXCentre(x.x),d.bounds.setYCentre(x.y),w.px=w._dragGroupOffsetX+x.x,w.py=w._dragGroupOffsetY+x.y}),typeof d.groups<"u"&&d.groups.forEach(function(w){return u.drag(w,x)})):(d.px=x.x,d.py=x.y)},u.dragEnd=function(d){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(x){u.dragEnd(x),delete x._dragGroupOffsetX,delete x._dragGroupOffsetY}),typeof d.groups<"u"&&d.groups.forEach(u.dragEnd)):d.fixed&=-7},u.mouseOver=function(d){d.fixed|=4,d.px=d.x,d.py=d.y},u.mouseOut=function(d){d.fixed&=-5},u}();_.Layout=t},86461:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(33858),m=o(91786),p=o(4068),g=o(58802),c=function(){function l(t,u){this.source=t,this.target=u}return l.prototype.actualLength=function(t){var u=this;return Math.sqrt(t.reduce(function(d,x){var w=x[u.target]-x[u.source];return d+w*w},0))},l}();_.Link3D=c;var f=function l(t,u,d){void 0===t&&(t=0),void 0===u&&(u=0),void 0===d&&(d=0),this.x=t,this.y=u,this.z=d};_.Node3D=f;var i=function(){function l(t,u,d){var x=this;void 0===d&&(d=1),this.nodes=t,this.links=u,this.idealLinkLength=d,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(l.k);for(var w=0;w<l.k;++w)this.result[w]=new Array(t.length);t.forEach(function(C,T){for(var M=0,I=l.dims;M<I.length;M++){var k=I[M];typeof C[k]>"u"&&(C[k]=Math.random())}x.result[0][T]=C.x,x.result[1][T]=C.y,x.result[2][T]=C.z})}return l.prototype.linkLength=function(t){return t.actualLength(this.result)},l.prototype.start=function(t){var u=this;void 0===t&&(t=100);var d=this.nodes.length,x=new a;this.useJaccardLinkLengths&&g.jaccardLinkLengths(this.links,x,1.5),this.links.forEach(function(k){return k.length*=u.idealLinkLength});var w=new s.Calculator(d,this.links,function(k){return k.source},function(k){return k.target},function(k){return k.length}).DistanceMatrix(),C=m.Descent.createSquareMatrix(d,function(k,P){return w[k][P]}),T=m.Descent.createSquareMatrix(d,function(){return 2});this.links.forEach(function(k){var P=k.source,H=k.target;return T[P][H]=T[H][P]=1}),this.descent=new m.Descent(this.result,C),this.descent.threshold=.001,this.descent.G=T,this.constraints&&(this.descent.project=new p.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var M=0;M<this.nodes.length;M++){var I=this.nodes[M];I.fixed&&this.descent.locks.add(M,[I.x,I.y,I.z])}return this.descent.run(t),this},l.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var u=this.nodes[t];u.fixed&&this.descent.locks.add(t,[u.x,u.y,u.z])}return this.descent.rungeKutta()},l.dims=["x","y","z"],l.k=l.dims.length,l}();_.Layout3D=i;var a=function(){function l(){}return l.prototype.getSourceIndex=function(t){return t.source},l.prototype.getTargetIndex=function(t){return t.target},l.prototype.getLength=function(t){return t.length},l.prototype.setLength=function(t,u){t.length=u},l}()},58802:(y,_)=>{"use strict";function o(a,l){var t={};for(var u in a)t[u]={};for(var u in l)t[u]={};return Object.keys(t).length}function s(a,l){var t=0;for(var u in a)typeof l[u]<"u"&&++t;return t}function p(a,l,t,u){var d=function m(a,l){var t={},u=function(d,x){typeof t[d]>"u"&&(t[d]={}),t[d][x]={}};return a.forEach(function(d){var x=l.getSourceIndex(d),w=l.getTargetIndex(d);u(x,w),u(w,x)}),t}(a,u);a.forEach(function(x){var w=d[u.getSourceIndex(x)],C=d[u.getTargetIndex(x)];u.setLength(x,1+l*t(w,C))})}function i(a,l,t){var u=[],d=0,x=[],w=[];function C(S){S.index=S.lowlink=d++,x.push(S),S.onStack=!0;for(var O=0,L=S.out;O<L.length;O++){var F=L[O];typeof F.index>"u"?(C(F),S.lowlink=Math.min(S.lowlink,F.lowlink)):F.onStack&&(S.lowlink=Math.min(S.lowlink,F.index))}if(S.lowlink===S.index){for(var D=[];x.length&&((F=x.pop()).onStack=!1,D.push(F),F!==S););w.push(D.map(function(z){return z.id}))}}for(var T=0;T<a;T++)u.push({id:T,out:[]});for(var M=0,I=l;M<I.length;M++){var k=I[M],P=u[t.getSourceIndex(k)],H=u[t.getTargetIndex(k)];P.out.push(H)}for(var V=0,B=u;V<B.length;V++){var Y=B[V];typeof Y.index>"u"&&C(Y)}return w}Object.defineProperty(_,"__esModule",{value:!0}),_.symmetricDiffLinkLengths=function g(a,l,t){void 0===t&&(t=1),p(a,t,function(u,d){return Math.sqrt(o(u,d)-s(u,d))},l)},_.jaccardLinkLengths=function c(a,l,t){void 0===t&&(t=1),p(a,t,function(u,d){return Math.min(Object.keys(u).length,Object.keys(d).length)<1.1?0:s(u,d)/o(u,d)},l)},_.generateDirectedEdgeConstraints=function f(a,l,t,u){var d=i(a,l,u),x={};d.forEach(function(C,T){return C.forEach(function(M){return x[M]=T})});var w=[];return l.forEach(function(C){var T=u.getSourceIndex(C),M=u.getTargetIndex(C);x[T]!==x[M]&&w.push({axis:t,left:T,right:M,gap:u.getMinSeparation(C)})}),w},_.stronglyConnectedComponents=i},33900:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function l(t,u,d){this.source=t,this.target=u,this.type=d};_.PowerEdge=o;var s=function(){function l(t,u,d,x){var w=this;if(this.linkAccessor=d,this.modules=new Array(t),this.roots=[],x)this.initModulesFromGroup(x);else{this.roots.push(new c);for(var C=0;C<t;++C)this.roots[0].add(this.modules[C]=new p(C))}this.R=u.length,u.forEach(function(T){var M=w.modules[d.getSourceIndex(T)],I=w.modules[d.getTargetIndex(T)],k=d.getType(T);M.outgoing.add(k,I),I.incoming.add(k,M)})}return l.prototype.initModulesFromGroup=function(t){var u=new c;this.roots.push(u);for(var d=0;d<t.leaves.length;++d){var x=t.leaves[d],w=new p(x.id);this.modules[x.id]=w,u.add(w)}if(t.groups)for(var C=0;C<t.groups.length;++C){var T=t.groups[C],M={};for(var I in T)"leaves"!==I&&"groups"!==I&&T.hasOwnProperty(I)&&(M[I]=T[I]);u.add(new p(-1-C,new f,new f,this.initModulesFromGroup(T),M))}return u},l.prototype.merge=function(t,u,d){void 0===d&&(d=0);var x=t.incoming.intersection(u.incoming),w=t.outgoing.intersection(u.outgoing),C=new c;C.add(t),C.add(u);var T=new p(this.modules.length,w,x,C);this.modules.push(T);var M=function(I,k,P){I.forAll(function(H,V){H.forAll(function(B){var Y=B[k];Y.add(V,T),Y.remove(V,t),Y.remove(V,u),t[P].remove(V,B),u[P].remove(V,B)})})};return M(w,"incoming","outgoing"),M(x,"outgoing","incoming"),this.R-=x.count()+w.count(),this.roots[d].remove(t),this.roots[d].remove(u),this.roots[d].add(T),T},l.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var u=this.roots[t].modules(),d=u.length,x=new Array(d*(d-1)),w=0,C=0,T=d-1;C<T;++C)for(var M=C+1;M<d;++M){var I=u[C],k=u[M];x[w]={id:w,nEdges:this.nEdges(I,k),a:I,b:k},w++}return x},l.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var d=this.rootMerges(t).sort(function(x,w){return x.nEdges==w.nEdges?x.id-w.id:x.nEdges-w.nEdges})[0];if(!(d.nEdges>=this.R))return this.merge(d.a,d.b,t),!0}},l.prototype.nEdges=function(t,u){var d=t.incoming.intersection(u.incoming),x=t.outgoing.intersection(u.outgoing);return this.R-d.count()-x.count()},l.prototype.getGroupHierarchy=function(t){var u=this,d=[];return m(this.roots[0],{},d),this.allEdges().forEach(function(C){var T=u.modules[C.source],M=u.modules[C.target];t.push(new o(typeof T.gid>"u"?C.source:d[T.gid],typeof M.gid>"u"?C.target:d[M.gid],C.type))}),d},l.prototype.allEdges=function(){var t=[];return l.getEdges(this.roots[0],t),t},l.getEdges=function(t,u){t.forAll(function(d){d.getEdges(u),l.getEdges(d.children,u)})},l}();function m(l,t,u){l.forAll(function(d){if(d.isLeaf())t.leaves||(t.leaves=[]),t.leaves.push(d.id);else{var x=t;if(d.gid=u.length,!d.isIsland()||d.isPredefined()){if(x={id:d.gid},d.isPredefined())for(var w in d.definition)x[w]=d.definition[w];t.groups||(t.groups=[]),t.groups.push(d.gid),u.push(x)}m(d.children,x,u)}})}_.Configuration=s;var p=function(){function l(t,u,d,x,w){void 0===u&&(u=new f),void 0===d&&(d=new f),void 0===x&&(x=new c),this.id=t,this.outgoing=u,this.incoming=d,this.children=x,this.definition=w}return l.prototype.getEdges=function(t){var u=this;this.outgoing.forAll(function(d,x){d.forAll(function(w){t.push(new o(u.id,w.id,x))})})},l.prototype.isLeaf=function(){return 0===this.children.count()},l.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},l.prototype.isPredefined=function(){return typeof this.definition<"u"},l}();function g(l,t){var u={};for(var d in l)d in t&&(u[d]=l[d]);return u}_.Module=p;var c=function(){function l(){this.table={}}return l.prototype.count=function(){return Object.keys(this.table).length},l.prototype.intersection=function(t){var u=new l;return u.table=g(this.table,t.table),u},l.prototype.intersectionCount=function(t){return this.intersection(t).count()},l.prototype.contains=function(t){return t in this.table},l.prototype.add=function(t){this.table[t.id]=t},l.prototype.remove=function(t){delete this.table[t.id]},l.prototype.forAll=function(t){for(var u in this.table)t(this.table[u])},l.prototype.modules=function(){var t=[];return this.forAll(function(u){u.isPredefined()||t.push(u)}),t},l}();_.ModuleSet=c;var f=function(){function l(){this.sets={},this.n=0}return l.prototype.count=function(){return this.n},l.prototype.contains=function(t){var u=!1;return this.forAllModules(function(d){!u&&d.id==t&&(u=!0)}),u},l.prototype.add=function(t,u){(t in this.sets?this.sets[t]:this.sets[t]=new c).add(u),++this.n},l.prototype.remove=function(t,u){var d=this.sets[t];d.remove(u),0===d.count()&&delete this.sets[t],--this.n},l.prototype.forAll=function(t){for(var u in this.sets)t(this.sets[u],Number(u))},l.prototype.forAllModules=function(t){this.forAll(function(u,d){return u.forAll(t)})},l.prototype.intersection=function(t){var u=new l;return this.forAll(function(d,x){if(x in t.sets){var w=d.intersection(t.sets[x]),C=w.count();C>0&&(u.sets[x]=w,u.n+=C)}}),u},l}();_.LinkSets=f,_.getGroups=function a(l,t,u,d){for(var x=l.length,w=new s(x,t,u,d);w.greedyMerge(););var C=[],T=w.getGroupHierarchy(C);return C.forEach(function(M){var I=function(k){var P=M[k];"number"==typeof P&&(M[k]=l[P])};I("source"),I("target")}),{groups:T,powerEdges:C}}},88866:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function(){function m(p){this.elem=p,this.subheaps=[]}return m.prototype.toString=function(p){for(var g="",c=!1,f=0;f<this.subheaps.length;++f){var i=this.subheaps[f];i.elem?(c&&(g+=","),g+=i.toString(p),c=!0):c=!1}return""!==g&&(g="("+g+")"),(this.elem?p(this.elem):"")+g},m.prototype.forEach=function(p){this.empty()||(p(this.elem,this),this.subheaps.forEach(function(g){return g.forEach(p)}))},m.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(p,g){return p+g.count()},0)},m.prototype.min=function(){return this.elem},m.prototype.empty=function(){return null==this.elem},m.prototype.contains=function(p){if(this===p)return!0;for(var g=0;g<this.subheaps.length;g++)if(this.subheaps[g].contains(p))return!0;return!1},m.prototype.isHeap=function(p){var g=this;return this.subheaps.every(function(c){return p(g.elem,c.elem)&&c.isHeap(p)})},m.prototype.insert=function(p,g){return this.merge(new m(p),g)},m.prototype.merge=function(p,g){return this.empty()?p:p.empty()?this:g(this.elem,p.elem)?(this.subheaps.push(p),this):(p.subheaps.push(this),p)},m.prototype.removeMin=function(p){return this.empty()?null:this.mergePairs(p)},m.prototype.mergePairs=function(p){if(0==this.subheaps.length)return new m(null);if(1==this.subheaps.length)return this.subheaps[0];var g=this.subheaps.pop().merge(this.subheaps.pop(),p),c=this.mergePairs(p);return g.merge(c,p)},m.prototype.decreaseKey=function(p,g,c,f){var i=p.removeMin(f);p.elem=i.elem,p.subheaps=i.subheaps,null!==c&&null!==i.elem&&c(p.elem,p);var a=new m(g);return null!==c&&c(g,a),this.merge(a,f)},m}();_.PairingHeap=o;var s=function(){function m(p){this.lessThan=p}return m.prototype.top=function(){return this.empty()?null:this.root.elem},m.prototype.push=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];for(var c,i,f=0;i=p[f];++f)c=new o(i),this.root=this.empty()?c:this.root.merge(c,this.lessThan);return c},m.prototype.empty=function(){return!this.root||!this.root.elem},m.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},m.prototype.forEach=function(p){this.root.forEach(p)},m.prototype.pop=function(){if(this.empty())return null;var p=this.root.min();return this.root=this.root.removeMin(this.lessThan),p},m.prototype.reduceKey=function(p,g,c){void 0===c&&(c=null),this.root=this.root.decreaseKey(p,g,c,this.lessThan)},m.prototype.toString=function(p){return this.root.toString(p)},m.prototype.count=function(){return this.root.count()},m}();_.PriorityQueue=s},94655:function(y,_){"use strict";var c,o=this&&this.__extends||(c=function(f,i){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(f,i)},function(f,i){function a(){this.constructor=f}c(f,i),f.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0});var s=function(){function c(){this.findIter=function(f){for(var i=this._root,a=this.iterator();null!==i;){var l=this._comparator(f,i.data);if(0===l)return a._cursor=i,a;a._ancestors.push(i),i=i.get_child(l>0)}return null}}return c.prototype.clear=function(){this._root=null,this.size=0},c.prototype.find=function(f){for(var i=this._root;null!==i;){var a=this._comparator(f,i.data);if(0===a)return i.data;i=i.get_child(a>0)}return null},c.prototype.lowerBound=function(f){return this._bound(f,this._comparator)},c.prototype.upperBound=function(f){var i=this._comparator;return this._bound(f,function a(l,t){return i(t,l)})},c.prototype.min=function(){var f=this._root;if(null===f)return null;for(;null!==f.left;)f=f.left;return f.data},c.prototype.max=function(){var f=this._root;if(null===f)return null;for(;null!==f.right;)f=f.right;return f.data},c.prototype.iterator=function(){return new m(this)},c.prototype.each=function(f){for(var a,i=this.iterator();null!==(a=i.next());)f(a)},c.prototype.reach=function(f){for(var a,i=this.iterator();null!==(a=i.prev());)f(a)},c.prototype._bound=function(f,i){for(var a=this._root,l=this.iterator();null!==a;){var t=this._comparator(f,a.data);if(0===t)return l._cursor=a,l;l._ancestors.push(a),a=a.get_child(t>0)}for(var u=l._ancestors.length-1;u>=0;--u)if(i(f,(a=l._ancestors[u]).data)>0)return l._cursor=a,l._ancestors.length=u,l;return l._ancestors.length=0,l},c}();_.TreeBase=s;var m=function(){function c(f){this._tree=f,this._ancestors=[],this._cursor=null}return c.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},c.prototype.next=function(){if(null===this._cursor){var f=this._tree._root;null!==f&&this._minNode(f)}else if(null===this._cursor.right){var i;do{if(i=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===i)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},c.prototype.prev=function(){if(null===this._cursor){var f=this._tree._root;null!==f&&this._maxNode(f)}else if(null===this._cursor.left){var i;do{if(i=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===i)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},c.prototype._minNode=function(f){for(;null!==f.left;)this._ancestors.push(f),f=f.left;this._cursor=f},c.prototype._maxNode=function(f){for(;null!==f.right;)this._ancestors.push(f),f=f.right;this._cursor=f},c}();_.Iterator=m;var p=function(){function c(f){this.data=f,this.left=null,this.right=null,this.red=!0}return c.prototype.get_child=function(f){return f?this.right:this.left},c.prototype.set_child=function(f,i){f?this.right=i:this.left=i},c}(),g=function(c){function f(i){var a=c.call(this)||this;return a._root=null,a._comparator=i,a.size=0,a}return o(f,c),f.prototype.insert=function(i){var a=!1;if(null===this._root)this._root=new p(i),a=!0,this.size++;else{var l=new p(void 0),t=!1,u=!1,d=null,x=l,w=null,C=this._root;for(x.right=this._root;;){if(null===C?(C=new p(i),w.set_child(t,C),a=!0,this.size++):f.is_red(C.left)&&f.is_red(C.right)&&(C.red=!0,C.left.red=!1,C.right.red=!1),f.is_red(C)&&f.is_red(w)){var T=x.right===d;C===w.get_child(u)?x.set_child(T,f.single_rotate(d,!u)):x.set_child(T,f.double_rotate(d,!u))}var M=this._comparator(C.data,i);if(0===M)break;u=t,t=M<0,null!==d&&(x=d),d=w,w=C,C=C.get_child(t)}this._root=l.right}return this._root.red=!1,a},f.prototype.remove=function(i){if(null===this._root)return!1;var a=new p(void 0),l=a;l.right=this._root;for(var t=null,u=null,d=null,x=!0;null!==l.get_child(x);){var w=x;u=t,t=l,l=l.get_child(x);var C=this._comparator(i,l.data);if(x=C>0,0===C&&(d=l),!f.is_red(l)&&!f.is_red(l.get_child(x)))if(f.is_red(l.get_child(!x))){var T=f.single_rotate(l,x);t.set_child(w,T),t=T}else if(!f.is_red(l.get_child(!x))){var M=t.get_child(!w);if(null!==M)if(f.is_red(M.get_child(!w))||f.is_red(M.get_child(w))){var I=u.right===t;f.is_red(M.get_child(w))?u.set_child(I,f.double_rotate(t,w)):f.is_red(M.get_child(!w))&&u.set_child(I,f.single_rotate(t,w));var k=u.get_child(I);k.red=!0,l.red=!0,k.left.red=!1,k.right.red=!1}else t.red=!1,M.red=!0,l.red=!0}}return null!==d&&(d.data=l.data,t.set_child(t.right===l,l.get_child(null===l.left)),this.size--),this._root=a.right,null!==this._root&&(this._root.red=!1),null!==d},f.is_red=function(i){return null!==i&&i.red},f.single_rotate=function(i,a){var l=i.get_child(!a);return i.set_child(!a,l.get_child(a)),l.set_child(a,i),i.red=!0,l.red=!1,l},f.double_rotate=function(i,a){return i.set_child(!a,f.single_rotate(i.get_child(!a),!a)),f.single_rotate(i,a)},f}(s);_.RBTree=g},4068:function(y,_,o){"use strict";var S,s=this&&this.__extends||(S=function(O,L){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,D){F.__proto__=D}||function(F,D){for(var z in D)D.hasOwnProperty(z)&&(F[z]=D[z])})(O,L)},function(O,L){function F(){this.constructor=O}S(O,L),O.prototype=null===L?Object.create(L):(F.prototype=L.prototype,new F)});Object.defineProperty(_,"__esModule",{value:!0});var m=o(98237),p=o(94655);function g(S){return S.bounds=typeof S.leaves<"u"?S.leaves.reduce(function(O,L){return L.bounds.union(O)},c.empty()):c.empty(),typeof S.groups<"u"&&(S.bounds=S.groups.reduce(function(O,L){return g(L).union(O)},S.bounds)),S.bounds=S.bounds.inflate(S.padding),S.bounds}_.computeGroupBounds=g;var c=function(){function S(O,L,F,D){this.x=O,this.X=L,this.y=F,this.Y=D}return S.empty=function(){return new S(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},S.prototype.cx=function(){return(this.x+this.X)/2},S.prototype.cy=function(){return(this.y+this.Y)/2},S.prototype.overlapX=function(O){var L=this.cx(),F=O.cx();return L<=F&&O.x<this.X?this.X-O.x:F<=L&&this.x<O.X?O.X-this.x:0},S.prototype.overlapY=function(O){var L=this.cy(),F=O.cy();return L<=F&&O.y<this.Y?this.Y-O.y:F<=L&&this.y<O.Y?O.Y-this.y:0},S.prototype.setXCentre=function(O){var L=O-this.cx();this.x+=L,this.X+=L},S.prototype.setYCentre=function(O){var L=O-this.cy();this.y+=L,this.Y+=L},S.prototype.width=function(){return this.X-this.x},S.prototype.height=function(){return this.Y-this.y},S.prototype.union=function(O){return new S(Math.min(this.x,O.x),Math.max(this.X,O.X),Math.min(this.y,O.y),Math.max(this.Y,O.Y))},S.prototype.lineIntersections=function(O,L,F,D){for(var z=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],K=[],U=0;U<4;++U){var G=S.lineIntersection(O,L,F,D,z[U][0],z[U][1],z[U][2],z[U][3]);null!==G&&K.push({x:G.x,y:G.y})}return K},S.prototype.rayIntersection=function(O,L){var F=this.lineIntersections(this.cx(),this.cy(),O,L);return F.length>0?F[0]:null},S.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},S.lineIntersection=function(O,L,F,D,z,K,U,G){var X=F-O,W=U-z,it=D-L,q=G-K,ut=q*X-W*it;if(0==ut)return null;var ct=O-z,yt=L-K,Q=(W*yt-q*ct)/ut,ht=(X*yt-it*ct)/ut;return Q>=0&&Q<=1&&ht>=0&&ht<=1?{x:O+Q*X,y:L+Q*it}:null},S.prototype.inflate=function(O){return new S(this.x-O,this.X+O,this.y-O,this.Y+O)},S}();_.Rectangle=c,_.makeEdgeBetween=function f(S,O,L){var F=S.rayIntersection(O.cx(),O.cy())||{x:S.cx(),y:S.cy()},D=O.rayIntersection(S.cx(),S.cy())||{x:O.cx(),y:O.cy()},z=D.x-F.x,K=D.y-F.y,U=Math.sqrt(z*z+K*K),G=U-L;return{sourceIntersection:F,targetIntersection:D,arrowStart:{x:F.x+G*z/U,y:F.y+G*K/U}}},_.makeEdgeTo=function i(S,O,L){var F=O.rayIntersection(S.x,S.y);F||(F={x:O.cx(),y:O.cy()});var D=F.x-S.x,z=F.y-S.y,K=Math.sqrt(D*D+z*z);return{x:F.x-L*D/K,y:F.y-L*z/K}};var a=function S(O,L,F){this.v=O,this.r=L,this.pos=F,this.prev=u(),this.next=u()},l=function S(O,L,F){this.isOpen=O,this.v=L,this.pos=F};function t(S,O){return S.pos>O.pos?1:S.pos<O.pos||S.isOpen?-1:O.isOpen?1:0}function u(){return new p.RBTree(function(S,O){return S.pos-O.pos})}var d={getCentre:function(S){return S.cx()},getOpen:function(S){return S.y},getClose:function(S){return S.Y},getSize:function(S){return S.width()},makeRect:function(S,O,L,F){return new c(L-F/2,L+F/2,S,O)},findNeighbours:function T(S,O){var L=function(F,D){for(var K,z=O.findIter(S);null!==(K=z[F]());){var U=K.r.overlapX(S.r);if((U<=0||U<=K.r.overlapY(S.r))&&(S[F].insert(K),K[D].insert(S)),U<=0)break}};L("next","prev"),L("prev","next")}},x={getCentre:function(S){return S.cy()},getOpen:function(S){return S.x},getClose:function(S){return S.X},getSize:function(S){return S.height()},makeRect:function(S,O,L,F){return new c(S,O,L-F/2,L+F/2)},findNeighbours:function M(S,O){var L=function(F,D){var z=O.findIter(S)[F]();null!==z&&z.r.overlapX(S.r)>0&&(S[F].insert(z),z[D].insert(S))};L("next","prev"),L("prev","next")}};function w(S,O,L,F){void 0===F&&(F=!1);var D=S.padding,z=typeof S.groups<"u"?S.groups.length:0,K=typeof S.leaves<"u"?S.leaves.length:0,U=z?S.groups.reduce(function(dt,_t){return dt.concat(w(_t,O,L,!0))},[]):[],G=(F?2:0)+K+z,X=new Array(G),W=new Array(G),it=0,q=function(dt,_t){W[it]=dt,X[it++]=_t};if(F){var ut=S.bounds,ct=O.getCentre(ut),yt=O.getSize(ut)/2,$=O.getOpen(ut),Q=O.getClose(ut),nt=ct-yt+D/2,ht=ct+yt-D/2;S.minVar.desiredPosition=nt,q(O.makeRect($,Q,nt,D),S.minVar),S.maxVar.desiredPosition=ht,q(O.makeRect($,Q,ht,D),S.maxVar)}K&&S.leaves.forEach(function(dt){return q(dt.bounds,dt.variable)}),z&&S.groups.forEach(function(dt){var _t=dt.bounds;q(O.makeRect(O.getOpen(_t),O.getClose(_t),O.getCentre(_t),O.getSize(_t)),dt.minVar)});var mt=C(W,X,O,L);return z&&(X.forEach(function(dt){dt.cOut=[],dt.cIn=[]}),mt.forEach(function(dt){dt.left.cOut.push(dt),dt.right.cIn.push(dt)}),S.groups.forEach(function(dt){var _t=(dt.padding-O.getSize(dt.bounds))/2;dt.minVar.cIn.forEach(function(bt){return bt.gap+=_t}),dt.minVar.cOut.forEach(function(bt){bt.left=dt.maxVar,bt.gap+=_t})})),U.concat(mt)}function C(S,O,L,F){var D,z=S.length,K=2*z;console.assert(O.length>=z);var U=new Array(K);for(D=0;D<z;++D){var G=S[D],X=new a(O[D],G,L.getCentre(G));U[D]=new l(!0,X,L.getOpen(G)),U[D+z]=new l(!1,X,L.getClose(G))}U.sort(t);var W=new Array,it=u();for(D=0;D<K;++D){var q=U[D];X=q.v;if(q.isOpen)it.insert(X),L.findNeighbours(X,it);else{it.remove(X);var ut=function($,Q){var nt=(L.getSize($.r)+L.getSize(Q.r))/2+F;W.push(new m.Constraint($.v,Q.v,nt))},ct=function($,Q,nt){for(var ht,mt=X[$].iterator();null!==(ht=mt[$]());)nt(ht,X),ht[Q].remove(X)};ct("prev","next",function($,Q){return ut($,Q)}),ct("next","prev",function($,Q){return ut(Q,$)})}}return console.assert(0===it.size),W}function I(S,O){return C(S,O,d,1e-6)}function k(S,O){return C(S,O,x,1e-6)}function P(S){return w(S,d,1e-6)}function H(S){return w(S,x,1e-6)}_.generateXConstraints=I,_.generateYConstraints=k,_.generateXGroupConstraints=P,_.generateYGroupConstraints=H,_.removeOverlaps=function V(S){var O=S.map(function(D){return new m.Variable(D.cx())}),L=I(S,O),F=new m.Solver(O,L);F.solve(),O.forEach(function(D,z){return S[z].setXCentre(D.position())}),O=S.map(function(D){return new m.Variable(D.cy())}),L=k(S,O),(F=new m.Solver(O,L)).solve(),O.forEach(function(D,z){return S[z].setYCentre(D.position())})};var B=function(S){function O(L,F){var D=S.call(this,0,F)||this;return D.index=L,D}return s(O,S),O}(m.Variable);_.IndexedVariable=B;var Y=function(){function S(O,L,F,D,z){var K=this;if(void 0===F&&(F=null),void 0===D&&(D=null),void 0===z&&(z=!1),this.nodes=O,this.groups=L,this.rootGroup=F,this.avoidOverlaps=z,this.variables=O.map(function(G,X){return G.variable=new B(X,1)}),D&&this.createConstraints(D),z&&F&&typeof F.groups<"u"){O.forEach(function(G){if(G.width&&G.height){var X=G.width/2,W=G.height/2;G.bounds=new c(G.x-X,G.x+X,G.y-W,G.y+W)}else G.bounds=new c(G.x,G.x,G.y,G.y)}),g(F);var U=O.length;L.forEach(function(G){K.variables[U]=G.minVar=new B(U++,typeof G.stiffness<"u"?G.stiffness:.01),K.variables[U]=G.maxVar=new B(U++,typeof G.stiffness<"u"?G.stiffness:.01)})}}return S.prototype.createSeparation=function(O){return new m.Constraint(this.nodes[O.left].variable,this.nodes[O.right].variable,O.gap,typeof O.equality<"u"&&O.equality)},S.prototype.makeFeasible=function(O){var L=this;if(this.avoidOverlaps){var F="x",D="width";"x"===O.axis&&(F="y",D="height");var z=O.offsets.map(function(U){return L.nodes[U.node]}).sort(function(U,G){return U[F]-G[F]}),K=null;z.forEach(function(U){if(K){var G=K[F]+K[D];G>U[F]&&(U[F]=G)}K=U})}},S.prototype.createAlignment=function(O){var L=this,F=this.nodes[O.offsets[0].node].variable;this.makeFeasible(O);var D="x"===O.axis?this.xConstraints:this.yConstraints;O.offsets.slice(1).forEach(function(z){var K=L.nodes[z.node].variable;D.push(new m.Constraint(F,K,z.offset,!0))})},S.prototype.createConstraints=function(O){var L=this,F=function(D){return typeof D.type>"u"||"separation"===D.type};this.xConstraints=O.filter(function(D){return"x"===D.axis&&F(D)}).map(function(D){return L.createSeparation(D)}),this.yConstraints=O.filter(function(D){return"y"===D.axis&&F(D)}).map(function(D){return L.createSeparation(D)}),O.filter(function(D){return"alignment"===D.type}).forEach(function(D){return L.createAlignment(D)})},S.prototype.setupVariablesAndBounds=function(O,L,F,D){this.nodes.forEach(function(z,K){z.fixed?(z.variable.weight=z.fixedWeight?z.fixedWeight:1e3,F[K]=D(z)):z.variable.weight=1;var U=(z.width||0)/2,G=(z.height||0)/2,X=O[K],W=L[K];z.bounds=new c(X-U,X+U,W-G,W+G)})},S.prototype.xProject=function(O,L,F){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(O,L,O,F,function(D){return D.px},this.xConstraints,P,function(D){return D.bounds.setXCentre(F[D.variable.index]=D.variable.position())},function(D){var z=F[D.minVar.index]=D.minVar.position(),K=F[D.maxVar.index]=D.maxVar.position(),U=D.padding/2;D.bounds.x=z-U,D.bounds.X=K+U})},S.prototype.yProject=function(O,L,F){!this.rootGroup&&!this.yConstraints||this.project(O,L,L,F,function(D){return D.py},this.yConstraints,H,function(D){return D.bounds.setYCentre(F[D.variable.index]=D.variable.position())},function(D){var z=F[D.minVar.index]=D.minVar.position(),K=F[D.maxVar.index]=D.maxVar.position(),U=D.padding/2;D.bounds.y=z-U,D.bounds.Y=K+U})},S.prototype.projectFunctions=function(){var O=this;return[function(L,F,D){return O.xProject(L,F,D)},function(L,F,D){return O.yProject(L,F,D)}]},S.prototype.project=function(O,L,F,D,z,K,U,G,X){this.setupVariablesAndBounds(O,L,D,z),this.rootGroup&&this.avoidOverlaps&&(g(this.rootGroup),K=K.concat(U(this.rootGroup))),this.solve(this.variables,K,F,D),this.nodes.forEach(G),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(X),g(this.rootGroup))},S.prototype.solve=function(O,L,F,D){var z=new m.Solver(O,L);z.setStartingPositions(F),z.setDesiredPositions(D),z.solve()},S}();_.Projection=Y},33858:(y,_,o)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=o(88866),m=function f(i,a){this.id=i,this.distance=a},p=function f(i){this.id=i,this.neighbours=[]},g=function f(i,a,l){this.node=i,this.prev=a,this.d=l},c=function(){function f(i,a,l,t,u){this.n=i,this.es=a,this.neighbours=new Array(this.n);for(var d=this.n;d--;)this.neighbours[d]=new p(d);for(d=this.es.length;d--;){var x=this.es[d],w=l(x),C=t(x),T=u(x);this.neighbours[w].neighbours.push(new m(C,T)),this.neighbours[C].neighbours.push(new m(w,T))}}return f.prototype.DistanceMatrix=function(){for(var i=new Array(this.n),a=0;a<this.n;++a)i[a]=this.dijkstraNeighbours(a);return i},f.prototype.DistancesFromNode=function(i){return this.dijkstraNeighbours(i)},f.prototype.PathFromNodeToNode=function(i,a){return this.dijkstraNeighbours(i,a)},f.prototype.PathFromNodeToNodeWithPrevCost=function(i,a,l){var t=new s.PriorityQueue(function(H,V){return H.d<=V.d}),u=this.neighbours[i],d=new g(u,null,0),x={};for(t.push(d);!t.empty()&&(u=(d=t.pop()).node).id!==a;)for(var w=u.neighbours.length;w--;){var C=u.neighbours[w],T=this.neighbours[C.id];if(!d.prev||T.id!==d.prev.node.id){var M=T.id+","+u.id;if(!(M in x&&x[M]<=d.d)){var I=d.prev?l(d.prev.node.id,u.id,T.id):0,k=d.d+C.distance+I;x[M]=k,t.push(new g(T,d,k))}}}for(var P=[];d.prev;)d=d.prev,P.push(d.node.id);return P},f.prototype.dijkstraNeighbours=function(i,a){void 0===a&&(a=-1);for(var l=new s.PriorityQueue(function(I,k){return I.d<=k.d}),t=this.neighbours.length,u=new Array(t);t--;){var d=this.neighbours[t];d.d=t===i?0:Number.POSITIVE_INFINITY,d.q=l.push(d)}for(;!l.empty();){var x=l.pop();if(u[x.id]=x.d,x.id===a){for(var w=[],C=x;typeof C.prev<"u";)w.push(C.prev.id),C=C.prev;return w}for(t=x.neighbours.length;t--;){var T=x.neighbours[t],M=(C=this.neighbours[T.id],x.d+T.distance);x.d!==Number.MAX_VALUE&&C.d>M&&(C.d=M,C.prev=x,l.reduceKey(C.q,C,function(k,P){return k.q=P}))}}return u},f}();_.Calculator=c},98237:(y,_)=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var o=function(){function i(a){this.scale=a,this.AB=0,this.AD=0,this.A2=0}return i.prototype.addVariable=function(a){var l=this.scale/a.scale,t=a.offset/a.scale,u=a.weight;this.AB+=u*l*t,this.AD+=u*l*a.desiredPosition,this.A2+=u*l*l},i.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},i}();_.PositionStats=o;var s=function(){function i(a,l,t,u){void 0===u&&(u=!1),this.left=a,this.right=l,this.gap=t,this.equality=u,this.active=!1,this.unsatisfiable=!1,this.left=a,this.right=l,this.gap=t,this.equality=u}return i.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},i}();_.Constraint=s;var m=function(){function i(a,l,t){void 0===l&&(l=1),void 0===t&&(t=1),this.desiredPosition=a,this.weight=l,this.scale=t,this.offset=0}return i.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},i.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},i.prototype.visitNeighbours=function(a,l){var t=function(u,d){return u.active&&a!==d&&l(u,d)};this.cOut.forEach(function(u){return t(u,u.right)}),this.cIn.forEach(function(u){return t(u,u.left)})},i}();_.Variable=m;var p=function(){function i(a){this.vars=[],a.offset=0,this.ps=new o(a.scale),this.addVariable(a)}return i.prototype.addVariable=function(a){a.block=this,this.vars.push(a),this.ps.addVariable(a),this.posn=this.ps.getPosn()},i.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var a=0,l=this.vars.length;a<l;++a)this.ps.addVariable(this.vars[a]);this.posn=this.ps.getPosn()},i.prototype.compute_lm=function(a,l,t){var u=this,d=a.dfdv();return a.visitNeighbours(l,function(x,w){var C=u.compute_lm(w,a,t);w===x.right?(d+=C*x.left.scale,x.lm=C):(d+=C*x.right.scale,x.lm=-C),t(x)}),d/a.scale},i.prototype.populateSplitBlock=function(a,l){var t=this;a.visitNeighbours(l,function(u,d){d.offset=a.offset+(d===u.right?u.gap:-u.gap),t.addVariable(d),t.populateSplitBlock(d,a)})},i.prototype.traverse=function(a,l,t,u){var d=this;void 0===t&&(t=this.vars[0]),void 0===u&&(u=null),t.visitNeighbours(u,function(x,w){l.push(a(x)),d.traverse(a,l,w,t)})},i.prototype.findMinLM=function(){var a=null;return this.compute_lm(this.vars[0],null,function(l){!l.equality&&(null===a||l.lm<a.lm)&&(a=l)}),a},i.prototype.findMinLMBetween=function(a,l){this.compute_lm(a,null,function(){});var t=null;return this.findPath(a,null,l,function(u,d){!u.equality&&u.right===d&&(null===t||u.lm<t.lm)&&(t=u)}),t},i.prototype.findPath=function(a,l,t,u){var d=this,x=!1;return a.visitNeighbours(l,function(w,C){!x&&(C===t||d.findPath(C,a,t,u))&&(x=!0,u(w,C))}),x},i.prototype.isActiveDirectedPathBetween=function(a,l){if(a===l)return!0;for(var t=a.cOut.length;t--;){var u=a.cOut[t];if(u.active&&this.isActiveDirectedPathBetween(u.right,l))return!0}return!1},i.split=function(a){return a.active=!1,[i.createSplitBlock(a.left),i.createSplitBlock(a.right)]},i.createSplitBlock=function(a){var l=new i(a);return l.populateSplitBlock(a,null),l},i.prototype.splitBetween=function(a,l){var t=this.findMinLMBetween(a,l);if(null!==t){var u=i.split(t);return{constraint:t,lb:u[0],rb:u[1]}}return null},i.prototype.mergeAcross=function(a,l,t){l.active=!0;for(var u=0,d=a.vars.length;u<d;++u){var x=a.vars[u];x.offset+=t,this.addVariable(x)}this.posn=this.ps.getPosn()},i.prototype.cost=function(){for(var a=0,l=this.vars.length;l--;){var t=this.vars[l],u=t.position()-t.desiredPosition;a+=u*u*t.weight}return a},i}();_.Block=p;var g=function(){function i(a){this.vs=a;var l=a.length;for(this.list=new Array(l);l--;){var t=new p(a[l]);this.list[l]=t,t.blockInd=l}}return i.prototype.cost=function(){for(var a=0,l=this.list.length;l--;)a+=this.list[l].cost();return a},i.prototype.insert=function(a){a.blockInd=this.list.length,this.list.push(a)},i.prototype.remove=function(a){var l=this.list.length-1,t=this.list[l];this.list.length=l,a!==t&&(this.list[a.blockInd]=t,t.blockInd=a.blockInd)},i.prototype.merge=function(a){var l=a.left.block,t=a.right.block,u=a.right.offset-a.left.offset-a.gap;l.vars.length<t.vars.length?(t.mergeAcross(l,a,u),this.remove(l)):(l.mergeAcross(t,a,-u),this.remove(t))},i.prototype.forEach=function(a){this.list.forEach(a)},i.prototype.updateBlockPositions=function(){this.list.forEach(function(a){return a.updateWeightedPosition()})},i.prototype.split=function(a){var l=this;this.updateBlockPositions(),this.list.forEach(function(t){var u=t.findMinLM();null!==u&&u.lm<c.LAGRANGIAN_TOLERANCE&&(t=u.left.block,p.split(u).forEach(function(d){return l.insert(d)}),l.remove(t),a.push(u))})},i}();_.Blocks=g;var c=function(){function i(a,l){this.vs=a,this.cs=l,this.vs=a,a.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=l,l.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=l.map(function(t){return t.active=!1,t}),this.bs=null}return i.prototype.cost=function(){return this.bs.cost()},i.prototype.setStartingPositions=function(a){this.inactive=this.cs.map(function(l){return l.active=!1,l}),this.bs=new g(this.vs),this.bs.forEach(function(l,t){return l.posn=a[t]})},i.prototype.setDesiredPositions=function(a){this.vs.forEach(function(l,t){return l.desiredPosition=a[t]})},i.prototype.mostViolated=function(){for(var a=Number.MAX_VALUE,l=null,t=this.inactive,u=t.length,d=u,x=0;x<u;++x){var w=t[x];if(!w.unsatisfiable){var C=w.slack();if((w.equality||C<a)&&(a=C,l=w,d=x,w.equality))break}}return d!==u&&(a<i.ZERO_UPPERBOUND&&!l.active||l.equality)&&(t[d]=t[u-1],t.length=u-1),l},i.prototype.satisfy=function(){null==this.bs&&(this.bs=new g(this.vs)),this.bs.split(this.inactive);for(var a=null;(a=this.mostViolated())&&(a.equality||a.slack()<i.ZERO_UPPERBOUND&&!a.active);){var l=a.left.block;if(l!==a.right.block)this.bs.merge(a);else{if(l.isActiveDirectedPathBetween(a.right,a.left)){a.unsatisfiable=!0;continue}var u=l.splitBetween(a.left,a.right);if(null===u){a.unsatisfiable=!0;continue}this.bs.insert(u.lb),this.bs.insert(u.rb),this.bs.remove(l),this.inactive.push(u.constraint),a.slack()>=0?this.inactive.push(a):this.bs.merge(a)}}},i.prototype.solve=function(){this.satisfy();for(var a=Number.MAX_VALUE,l=this.bs.cost();Math.abs(a-l)>1e-4;)this.satisfy(),a=l,l=this.bs.cost();return l},i.LAGRANGIAN_TOLERANCE=-1e-4,i.ZERO_UPPERBOUND=-1e-10,i}();_.Solver=c,_.removeOverlapInOneDimension=function f(i,a,l){for(var t=i.map(function(B){return new m(B.desiredCenter)}),u=[],d=i.length,x=0;x<d-1;x++){var w=i[x],C=i[x+1];u.push(new s(t[x],t[x+1],(w.size+C.size)/2))}var T=t[0],M=t[d-1],I=i[0].size/2,k=i[d-1].size/2,P=null,H=null;return a&&(P=new m(a,1e3*T.weight),t.push(P),u.push(new s(P,T,I))),l&&(H=new m(l,1e3*M.weight),t.push(H),u.push(new s(M,H,k))),new c(t,u).solve(),{newCenters:t.slice(0,i.length).map(function(B){return B.position()}),lowerBound:P?P.position():T.position()-I,upperBound:H?H.position():M.position()+k}}}}]);