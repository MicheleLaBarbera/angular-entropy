(self.webpackChunkangular_entropy=self.webpackChunkangular_entropy||[]).push([[795],{1718:(y,w,i)=>{"use strict";i.d(w,{$:()=>m});var s=i(1571);class m{transform(g){const f=new Date(1e3*g);return f.toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"})+" - "+String(f.getHours()).padStart(2,"0")+":"+String(f.getMinutes()).padStart(2,"0")}}m.\u0275fac=function(g){return new(g||m)},m.\u0275pipe=s.Yjl({name:"dateLabel",type:m,pure:!0})},1795:(y,w,i)=>{"use strict";i.r(w),i.d(w,{ClassroomModule:()=>bt});var s=i(6895),m=i(3135),p=i(9181),g=i(7315),f=i(4415),c=i(7618),r=i(1571),a=i(301);class l{constructor(at,nt,gt,Tt){this._route=at,this._classroomService=nt,this._alertService=gt,this._router=Tt}ngOnInit(){this.invite_token=this._route.snapshot.paramMap.get("invite_token"),this.invite_token&&this._classroomService.joinStudentClassroom(this.invite_token).subscribe(at=>{at.hasOwnProperty("error")||this._alertService.success("Class successfully joined"),this._router.navigate(["/"])})}}l.\u0275fac=function(at){return new(at||l)(r.Y36(f.gz),r.Y36(g.u),r.Y36(a.c),r.Y36(f.F0))},l.\u0275cmp=r.Xpm({type:l,selectors:[["app-classroom-invite-link"]],decls:0,vars:0,template:function(at,nt){},encapsulation:2});var t=i(4696),h=i(433),d=(()=>{return(st=d||(d={}))[st.CREATE=0]="CREATE",st[st.UPDATE=1]="UPDATE",st[st.DELETE=2]="DELETE",d;var st})(),x=i(4937);function b(st,at){1&st&&(r.TgZ(0,"div",23),r._UZ(1,"div",24),r.TgZ(2,"div",25),r._UZ(3,"div",26),r.qZA()())}function C(st,at){if(1&st&&(r.TgZ(0,"button",27),r._uU(1,"Create"),r.qZA()),2&st){const nt=r.oxw();r.Q6J("disabled",!nt.classroomHomeworkCreateForm.valid)}}const A=st=>parseInt(st.get("node_min").value)>parseInt(st.get("node_max").value)?{inRange:!1}:null;class M{constructor(at,nt,gt){this._classroomHomeworkService=at,this._alertService=nt,this._route=gt,this.classroomHomeworkCreateForm=new h.cw({title:new h.NI(null,h.kI.required),body:new h.NI(null,h.kI.required),node_min:new h.NI(null,[h.kI.required,h.kI.min(1)]),node_max:new h.NI(null,[h.kI.required,h.kI.max(30)]),start_date:new h.NI(null,h.kI.required),expire_date:new h.NI(null,h.kI.required)},A),this.loading=!1}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id")}onSubmit(){const at=new Date(this.classroomHomeworkCreateForm.value.start_date).getTime()/1e3,nt=new Date(this.classroomHomeworkCreateForm.value.expire_date).getTime()/1e3;if(at>nt)return this._alertService.error("Enter an expiration date greater than the start date");let gt={classroom_id:this.classroom_id,title:this.classroomHomeworkCreateForm.value.title,body:this.classroomHomeworkCreateForm.value.body,node_min:this.classroomHomeworkCreateForm.value.node_min,node_max:this.classroomHomeworkCreateForm.value.node_max,start_datetime:at,expire_datetime:nt};this.loading=!0,this._classroomHomeworkService.createClassroomHomework(gt).subscribe(Tt=>{Tt.hasOwnProperty("error")||(this._alertService.success("Homework successfully created"),this._classroomHomeworkService.updatedClassroomHomeworks$.emit(d.CREATE),this.classroomHomeworkCreateForm.reset()),this.loading=!1})}}M.\u0275fac=function(at){return new(at||M)(r.Y36(x.c),r.Y36(a.c),r.Y36(f.gz))},M.\u0275cmp=r.Xpm({type:M,selectors:[["app-classroom-homework-create"]],decls:35,vars:3,consts:[[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-file-pen"],[1,"mb-3",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","name","homework_title","placeholder","Enter the homework title","formControlName","title",1,"form-control"],["for","body",1,"form-label"],["rows","3","id","body","name","homework_body","placeholder","Enter the homework text","formControlName","body",1,"form-control"],[1,"row","mb-3"],[1,"col-6"],["for","node_min",1,"form-label"],["type","text","id","node_min","name","homework_node_min","placeholder","Enter a number above 1","formControlName","node_min",1,"form-control"],["for","node_max",1,"form-label"],["type","text","id","node_max","name","homework_node_max","placeholder","Enter a number equal or below 30","formControlName","node_max",1,"form-control"],["for","start_date",1,"form-label"],["type","datetime-local","id","start_date","name","homework_start_date","formControlName","start_date",1,"form-control"],["for","expire_date",1,"form-label"],["type","datetime-local","id","expire_date","name","homework_expire_date","formControlName","expire_date",1,"form-control"],[1,"text-center"],["class","row mt-3",4,"ngIf"],["class","btn btn-primary d-grid w-100 mb-3","type","submit",3,"disabled",4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["type","submit",1,"btn","btn-primary","d-grid","w-100","mb-3",3,"disabled"]],template:function(at,nt){1&at&&(r.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),r._UZ(3,"i",3),r._uU(4," Create Homework"),r.qZA(),r.TgZ(5,"form",4),r.NdJ("ngSubmit",function(){return nt.onSubmit()}),r.TgZ(6,"div",5)(7,"label",6),r._uU(8,"Title:"),r.qZA(),r._UZ(9,"input",7),r.qZA(),r.TgZ(10,"div",5)(11,"label",8),r._uU(12,"Body:"),r.qZA(),r._UZ(13,"textarea",9),r.qZA(),r.TgZ(14,"div",10)(15,"div",11)(16,"label",12),r._uU(17,"Concept Map Minimum Nodes Count:"),r.qZA(),r._UZ(18,"input",13),r.qZA(),r.TgZ(19,"div",11)(20,"label",14),r._uU(21,"Concept Map Maximum Nodes Count:"),r.qZA(),r._UZ(22,"input",15),r.qZA()(),r.TgZ(23,"div",10)(24,"div",11)(25,"label",16),r._uU(26,"Start date:"),r.qZA(),r._UZ(27,"input",17),r.qZA(),r.TgZ(28,"div",11)(29,"label",18),r._uU(30,"Expire date:"),r.qZA(),r._UZ(31,"input",19),r.qZA()(),r.TgZ(32,"div",20),r.YNc(33,b,4,0,"div",21),r.YNc(34,C,2,1,"button",22),r.qZA()()()()),2&at&&(r.xp6(5),r.Q6J("formGroup",nt.classroomHomeworkCreateForm),r.xp6(28),r.Q6J("ngIf",nt.loading),r.xp6(1),r.Q6J("ngIf",!nt.loading))},dependencies:[s.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u],encapsulation:2});var N=i(427),k=i(1718);function D(st,at){1&st&&(r.TgZ(0,"div",6),r._UZ(1,"div",7),r.TgZ(2,"div",8),r._UZ(3,"div",9),r.qZA()())}function H(st,at){1&st&&(r.TgZ(0,"div")(1,"p",11),r._uU(2,"There are no homeworks."),r.qZA()())}function V(st,at){1&st&&(r.TgZ(0,"th"),r._uU(1,"Students Completion"),r.qZA())}function B(st,at){if(1&st&&(r.TgZ(0,"td"),r._uU(1),r.qZA()),2&st){const nt=r.oxw().$implicit,gt=r.oxw(3);r.xp6(1),r.AsE("",null==nt.maps?null:nt.maps.length," / ",gt.classroom.size,"")}}const Y=function(st){return[st]};function O(st,at){if(1&st&&(r.TgZ(0,"tr",11)(1,"td"),r._uU(2),r.qZA(),r.YNc(3,B,2,2,"td",5),r.TgZ(4,"td"),r._uU(5),r.ALo(6,"dateLabel"),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.ALo(9,"dateLabel"),r.qZA(),r.TgZ(10,"td"),r._UZ(11,"i",14),r.qZA()()),2&st){const nt=at.$implicit,gt=r.oxw(3);r.xp6(2),r.Oqu(nt.title),r.xp6(1),r.Q6J("ngIf",gt.classroom),r.xp6(2),r.Oqu(r.lcZ(6,5,nt.start_datetime)),r.xp6(3),r.Oqu(r.lcZ(9,7,nt.expire_datetime)),r.xp6(3),r.Q6J("routerLink",r.VKq(9,Y,"homeworks/"+nt._id.$oid))}}function I(st,at){if(1&st&&(r.TgZ(0,"table",12)(1,"thead")(2,"tr",11)(3,"th"),r._uU(4,"Title"),r.qZA(),r.YNc(5,V,2,0,"th",5),r.TgZ(6,"th"),r._uU(7,"Start Datetime"),r.qZA(),r.TgZ(8,"th"),r._uU(9,"Expire Datetime"),r.qZA(),r._UZ(10,"th"),r.qZA()(),r.TgZ(11,"tbody"),r.YNc(12,O,12,11,"tr",13),r.qZA()()),2&st){const nt=r.oxw(2);r.xp6(5),r.Q6J("ngIf",nt.classroom),r.xp6(7),r.Q6J("ngForOf",nt.homeworks)}}function L(st,at){if(1&st&&(r.TgZ(0,"div"),r.YNc(1,H,3,0,"div",5),r.YNc(2,I,13,2,"table",10),r.qZA()),2&st){const nt=r.oxw();r.xp6(1),r.Q6J("ngIf",nt.homeworks&&0==nt.homeworks.length),r.xp6(1),r.Q6J("ngIf",nt.homeworks&&nt.homeworks.length>0)}}class F{constructor(at,nt,gt){this._classroomHomeworkService=at,this._router=nt,this._userService=gt,this.loading=!1,this.homeworks=[];let Tt=JSON.parse(localStorage.getItem("currentUserData"));Tt||this._router.navigate(["/users/auth"]),this.user=Tt,this._classroomHomeworkService.updatedClassroomHomeworks$.subscribe(wt=>{wt==d.CREATE&&this.getClassroomHomeworks()})}ngOnInit(){this.getClassroomHomeworks()}getClassroomHomeworks(){this.loading=!0,this.classroom?this._classroomHomeworkService.getClassroomHomeworks(this.classroom._id?.$oid).subscribe(at=>{at.hasOwnProperty("error")||(this.homeworks=at,this.homeworks&&this.homeworks.sort((nt,gt)=>0==this.user.role?nt.expire_datetime-gt.expire_datetime:gt.expire_datetime-nt.expire_datetime)),this.loading=!1}):this._userService.getCurrentUserHomeworks().subscribe(at=>{at.hasOwnProperty("error")||(this.homeworks=at,this.homeworks&&this.homeworks.sort((nt,gt)=>0==this.user.role?nt.expire_datetime-gt.expire_datetime:gt.expire_datetime-nt.expire_datetime)),this.loading=!1})}}function G(st,at){if(1&st&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&st){const nt=r.oxw(2);r.xp6(1),r.AsE("(",nt.students.length," / ",nt.classroom.size,")")}}function z(st,at){1&st&&(r.TgZ(0,"div",7),r._UZ(1,"div",8),r.TgZ(2,"div",9),r._UZ(3,"div",10),r.qZA()())}function Q(st,at){1&st&&(r.TgZ(0,"div")(1,"p",12),r._uU(2,"There are no students in this class."),r.qZA()())}function U(st,at){if(1&st&&(r.TgZ(0,"tr",12)(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r._UZ(5,"td"),r.qZA()),2&st){const nt=at.$implicit;r.xp6(2),r.AsE("",nt.lastname," ",nt.firstname," "),r.xp6(2),r.Oqu(nt.email)}}function Z(st,at){if(1&st&&(r.TgZ(0,"table",13)(1,"thead")(2,"tr",12)(3,"th"),r._uU(4,"Name"),r.qZA(),r.TgZ(5,"th"),r._uU(6,"E-Mail"),r.qZA(),r._UZ(7,"th"),r.qZA()(),r.TgZ(8,"tbody"),r.YNc(9,U,6,3,"tr",14),r.qZA()()),2&st){const nt=r.oxw(3);r.xp6(9),r.Q6J("ngForOf",nt.students)}}function X(st,at){if(1&st&&(r.TgZ(0,"div"),r.YNc(1,Q,3,0,"div",5),r.YNc(2,Z,10,1,"table",11),r.qZA()),2&st){const nt=r.oxw(2);r.xp6(1),r.Q6J("ngIf",nt.students&&0==nt.students.length),r.xp6(1),r.Q6J("ngIf",nt.students&&nt.students.length>0)}}function W(st,at){if(1&st&&(r.TgZ(0,"div",1)(1,"div",2)(2,"h4",3),r._UZ(3,"i",4),r._uU(4," Students List "),r.YNc(5,G,2,2,"span",5),r.qZA(),r.YNc(6,z,4,0,"div",6),r.YNc(7,X,3,2,"div",5),r.qZA()()),2&st){const nt=r.oxw();r.xp6(5),r.Q6J("ngIf",nt.students),r.xp6(1),r.Q6J("ngIf",nt.loading),r.xp6(1),r.Q6J("ngIf",!nt.loading)}}F.\u0275fac=function(at){return new(at||F)(r.Y36(x.c),r.Y36(f.F0),r.Y36(N.K))},F.\u0275cmp=r.Xpm({type:F,selectors:[["app-classroom-homework-list"]],inputs:{classroom:"classroom"},decls:7,vars:2,consts:[[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-graduation-cap"],["class","row mt-3",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["class","table table-hover",4,"ngIf"],[1,"text-center"],[1,"table","table-hover"],["class","text-center",4,"ngFor","ngForOf"],["title","Enter homework",1,"pe-clickable","fa-solid","fa-right-to-bracket",2,"color","darkgreen",3,"routerLink"]],template:function(at,nt){1&at&&(r.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),r._UZ(3,"i",3),r._uU(4," Homeworks List"),r.qZA(),r.YNc(5,D,4,0,"div",4),r.YNc(6,L,3,2,"div",5),r.qZA()()),2&at&&(r.xp6(5),r.Q6J("ngIf",nt.loading),r.xp6(1),r.Q6J("ngIf",!nt.loading))},dependencies:[s.sg,s.O5,f.rH,k.$],encapsulation:2});class it{constructor(at,nt){this._classroomService=at,this._router=nt,this.loading=!1,this.students=[];let gt=JSON.parse(localStorage.getItem("currentUserData"));gt||this._router.navigate(["/users/auth"]),this.user=gt}ngOnInit(){this.getClassroomStudents()}getClassroomStudents(){this.loading=!0,this._classroomService.getClassroomStudents(this.classroom._id?.$oid).subscribe(at=>{at.hasOwnProperty("error")||(this.students=at,this.students&&this.students.sort((nt,gt)=>nt.lastname.localeCompare(gt.lastname)||nt.firstname.localeCompare(gt.firstname))),this.loading=!1})}}function tt(st,at){1&st&&(r.TgZ(0,"div",2),r._UZ(1,"div",3),r.TgZ(2,"div",4),r._UZ(3,"div",5),r.qZA()())}function ut(st,at){if(1&st&&(r.TgZ(0,"div",17),r._UZ(1,"app-classroom-homework-list",18),r.qZA()),2&st){const nt=r.oxw(3);r.xp6(1),r.Q6J("classroom",nt.classroom)}}function ft(st,at){if(1&st&&(r.TgZ(0,"div",12)(1,"div",13),r._UZ(2,"app-classroom-homework-create"),r.qZA(),r.TgZ(3,"div",13)(4,"div",14),r.YNc(5,ut,2,1,"div",15),r.qZA(),r.TgZ(6,"div",16)(7,"div",17),r._UZ(8,"app-classroom-student-list",18),r.qZA()()()()),2&st){const nt=r.oxw(2);r.xp6(5),r.Q6J("ngIf",nt.classroom),r.xp6(3),r.Q6J("classroom",nt.classroom)}}function xt(st,at){if(1&st&&(r.TgZ(0,"div",13),r._UZ(1,"app-classroom-homework-list",18),r.qZA()),2&st){const nt=r.oxw(3);r.xp6(1),r.Q6J("classroom",nt.classroom)}}function $(st,at){if(1&st&&(r.TgZ(0,"div",13),r._UZ(1,"app-classroom-student-list",18),r.qZA()),2&st){const nt=r.oxw(3);r.xp6(1),r.Q6J("classroom",nt.classroom)}}function K(st,at){if(1&st&&(r.TgZ(0,"div",12),r.YNc(1,xt,2,1,"div",19),r.YNc(2,$,2,1,"div",19),r.qZA()),2&st){const nt=r.oxw(2);r.xp6(1),r.Q6J("ngIf",nt.classroom),r.xp6(1),r.Q6J("ngIf",nt.classroom)}}function rt(st,at){if(1&st&&(r.TgZ(0,"div",6)(1,"div",7),r._UZ(2,"div",8),r.TgZ(3,"div",9)(4,"div",10)(5,"strong"),r._uU(6,"Class:"),r.qZA(),r._uU(7),r._UZ(8,"br"),r.TgZ(9,"strong"),r._uU(10,"Teacher:"),r.qZA(),r._uU(11),r.qZA()()(),r.YNc(12,ft,9,2,"div",11),r.YNc(13,K,3,2,"div",11),r.qZA()),2&st){const nt=r.oxw();r.xp6(7),r.hij(" ",nt.classroom.name," "),r.xp6(4),r.lnq(" ",null==nt.classroom.teacher?null:nt.classroom.teacher.firstname," ",null==nt.classroom.teacher?null:nt.classroom.teacher.lastname," (",null==nt.classroom.teacher?null:nt.classroom.teacher.email,") "),r.xp6(1),r.Q6J("ngIf",1==nt.user.role),r.xp6(1),r.Q6J("ngIf",0==nt.user.role)}}it.\u0275fac=function(at){return new(at||it)(r.Y36(g.u),r.Y36(f.F0))},it.\u0275cmp=r.Xpm({type:it,selectors:[["app-classroom-student-list"]],inputs:{classroom:"classroom"},decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"mb-4","text-center"],[1,"fa-solid","fa-graduation-cap"],[4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-5"],[1,"col-2","ms-3"],[1,"custom-loader","text-center"],["class","table table-hover",4,"ngIf"],[1,"text-center"],[1,"table","table-hover"],["class","text-center",4,"ngFor","ngForOf"]],template:function(at,nt){1&at&&r.YNc(0,W,8,3,"div",0),2&at&&r.Q6J("ngIf",nt.classroom)},dependencies:[s.sg,s.O5],encapsulation:2});class lt{constructor(at,nt,gt){this._route=at,this._classroomService=nt,this._router=gt,this.loading=!1;let Tt=JSON.parse(localStorage.getItem("currentUserData"));Tt||this._router.navigate(["/users/auth"]),this.user=Tt}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id"),this.getClassroom()}getClassroom(){this.loading=!0,this._classroomService.getClassroom(this.classroom_id).subscribe(at=>{at.hasOwnProperty("error")?this._router.navigate(["/"]):this.classroom=at,this.loading=!1})}}lt.\u0275fac=function(at){return new(at||lt)(r.Y36(f.gz),r.Y36(g.u),r.Y36(f.F0))},lt.\u0275cmp=r.Xpm({type:lt,selectors:[["app-classroom-view"]],decls:3,vars:2,consts:[["class","row mt-5 g-0",4,"ngIf"],["class","mt-4 container-fluid",4,"ngIf"],[1,"row","mt-5","g-0"],[1,"col-5"],[1,"col-2","ms-5","mt-5"],[1,"ms-3","custom-big-loader","mt-5"],[1,"mt-4","container-fluid"],[1,"row","px-2","mb-1"],[1,"col-3"],[1,"col-6","text-center"],["role","alert",1,"alert","alert-primary"],["class","row px-2",4,"ngIf"],[1,"row","px-2"],[1,"col-6"],[1,"row","mb-4"],["class","col-12",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"classroom"],["class","col-6",4,"ngIf"]],template:function(at,nt){1&at&&(r._UZ(0,"app-navbar"),r.YNc(1,tt,4,0,"div",0),r.YNc(2,rt,14,6,"div",1)),2&at&&(r.xp6(1),r.Q6J("ngIf",nt.loading),r.xp6(1),r.Q6J("ngIf",!nt.loading&&nt.classroom))},dependencies:[s.O5,t.S,M,F,it],encapsulation:2});const mt=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:"invite/:invite_token",component:l,canActivate:[c.a]},{path:":classroom_id",canActivate:[c.a],children:[{path:"",pathMatch:"full",component:lt},{path:"homeworks",loadChildren:()=>Promise.resolve().then(i.bind(i,20)).then(st=>st.ClassroomHomeworkModule)}]}];class dt{}dt.\u0275fac=function(at){return new(at||dt)},dt.\u0275mod=r.oAB({type:dt}),dt.\u0275inj=r.cJS({imports:[f.Bz.forChild(mt),f.Bz]});var _t=i(20);class bt{}bt.\u0275fac=function(at){return new(at||bt)},bt.\u0275mod=r.oAB({type:bt}),bt.\u0275inj=r.cJS({providers:[g.u],imports:[s.ez,m.m,p.UserModule,dt,_t.ClassroomHomeworkModule]})},20:(y,w,i)=>{"use strict";i.r(w),i.d(w,{ClassroomHomeworkModule:()=>xe});var s={};i.r(s),i.d(s,{forceCenter:()=>Ls,forceCollide:()=>Fr,forceLink:()=>Ur,forceManyBody:()=>Hr,forceRadial:()=>sa,forceSimulation:()=>Br,forceX:()=>aa,forceY:()=>ua});var m={};i.r(m),i.d(m,{dispatch:()=>un});var p={};i.r(p),i.d(p,{interval:()=>la,now:()=>le,timeout:()=>ln,timer:()=>je,timerFlush:()=>jn});var g=i(6895),f=i(3135),c=i(9181),r=i(4937),a=i(4415),l=i(7618),t=i(1571),h=i(655),d=i(7340);function x(){}function b(e){return null==e?x:function(){return this.querySelector(e)}}function A(){return[]}function M(e){return null==e?A:function(){return this.querySelectorAll(e)}}function k(e){return function(){return this.matches(e)}}function H(e){return new Array(e.length)}function B(e,o){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=o}function I(e,o,n,u,v,_){for(var T,E=0,S=o.length,P=_.length;E<P;++E)(T=o[E])?(T.__data__=_[E],u[E]=T):n[E]=new B(e,_[E]);for(;E<S;++E)(T=o[E])&&(v[E]=T)}function L(e,o,n,u,v,_,E){var T,S,q,P={},R=o.length,j=_.length,J=new Array(R);for(T=0;T<R;++T)(S=o[T])&&(J[T]=q="$"+E.call(S,S.__data__,T,o),q in P?v[T]=S:P[q]=S);for(T=0;T<j;++T)(S=P[q="$"+E.call(e,_[T],T,_)])?(u[T]=S,S.__data__=_[T],P[q]=null):n[T]=new B(e,_[T]);for(T=0;T<R;++T)(S=o[T])&&P[J[T]]===S&&(v[T]=S)}function X(e,o){return e<o?-1:e>o?1:e>=o?0:NaN}B.prototype={constructor:B,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,o){return this._parent.insertBefore(e,o)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var $="http://www.w3.org/1999/xhtml";const K={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rt(e){var o=e+="",n=o.indexOf(":");return n>=0&&"xmlns"!==(o=e.slice(0,n))&&(e=e.slice(n+1)),K.hasOwnProperty(o)?{space:K[o],local:e}:e}function lt(e){return function(){this.removeAttribute(e)}}function mt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dt(e,o){return function(){this.setAttribute(e,o)}}function _t(e,o){return function(){this.setAttributeNS(e.space,e.local,o)}}function bt(e,o){return function(){var n=o.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function st(e,o){return function(){var n=o.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function nt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gt(e){return function(){this.style.removeProperty(e)}}function Tt(e,o,n){return function(){this.style.setProperty(e,o,n)}}function wt(e,o,n){return function(){var u=o.apply(this,arguments);null==u?this.style.removeProperty(e):this.style.setProperty(e,u,n)}}function Ft(e,o){return e.style.getPropertyValue(o)||nt(e).getComputedStyle(e,null).getPropertyValue(o)}function nn(e){return function(){delete this[e]}}function ue(e,o){return function(){this[e]=o}}function Bt(e,o){return function(){var n=o.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function re(e){return e.trim().split(/^|\s+/)}function Kt(e){return e.classList||new De(e)}function De(e){this._node=e,this._names=re(e.getAttribute("class")||"")}function _e(e,o){for(var n=Kt(e),u=-1,v=o.length;++u<v;)n.add(o[u])}function zt(e,o){for(var n=Kt(e),u=-1,v=o.length;++u<v;)n.remove(o[u])}function Ge(e){return function(){_e(this,e)}}function Ze(e){return function(){zt(this,e)}}function rn(e,o){return function(){(o.apply(this,arguments)?_e:zt)(this,e)}}function Ht(){this.textContent=""}function Yt(e){return function(){this.textContent=e}}function Kr(e){return function(){var o=e.apply(this,arguments);this.textContent=o??""}}function qr(){this.innerHTML=""}function ti(e){return function(){this.innerHTML=e}}function ei(e){return function(){var o=e.apply(this,arguments);this.innerHTML=o??""}}function ri(){this.nextSibling&&this.parentNode.appendChild(this)}function oi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ai(e){return function(){var o=this.ownerDocument,n=this.namespaceURI;return n===$&&o.documentElement.namespaceURI===$?o.createElement(e):o.createElementNS(n,e)}}function ui(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kn(e){var o=rt(e);return(o.local?ui:ai)(o)}function li(){return null}function ci(){var e=this.parentNode;e&&e.removeChild(this)}function pi(){var e=this.cloneNode(!1),o=this.parentNode;return o?o.insertBefore(e,this.nextSibling):e}function gi(){var e=this.cloneNode(!0),o=this.parentNode;return o?o.insertBefore(e,this.nextSibling):e}De.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var o=this._names.indexOf(e);o>=0&&(this._names.splice(o,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Nn={},ie=null;function xi(e,o,n){return e=Sn(e,o,n),function(u){var v=u.relatedTarget;(!v||v!==this&&!(8&v.compareDocumentPosition(this)))&&e.call(this,u)}}function Sn(e,o,n){return function(u){var v=ie;ie=u;try{e.call(this,this.__data__,o,n)}finally{ie=v}}}function _i(e){return e.trim().split(/^|\s+/).map(function(o){var n="",u=o.indexOf(".");return u>=0&&(n=o.slice(u+1),o=o.slice(0,u)),{type:o,name:n}})}function wi(e){return function(){var o=this.__on;if(o){for(var _,n=0,u=-1,v=o.length;n<v;++n)_=o[n],e.type&&_.type!==e.type||_.name!==e.name?o[++u]=_:this.removeEventListener(_.type,_.listener,_.capture);++u?o.length=u:delete this.__on}}}function bi(e,o,n){var u=Nn.hasOwnProperty(e.type)?xi:Sn;return function(v,_,E){var S,T=this.__on,P=u(o,_,E);if(T)for(var R=0,j=T.length;R<j;++R)if((S=T[R]).type===e.type&&S.name===e.name)return this.removeEventListener(S.type,S.listener,S.capture),this.addEventListener(S.type,S.listener=P,S.capture=n),void(S.value=o);this.addEventListener(e.type,P,n),S={type:e.type,name:e.name,value:o,listener:P,capture:n},T?T.push(S):this.__on=[S]}}function On(e,o,n){var u=nt(e),v=u.CustomEvent;"function"==typeof v?v=new v(o,n):(v=u.document.createEvent("Event"),n?(v.initEvent(o,n.bubbles,n.cancelable),v.detail=n.detail):v.initEvent(o,!1,!1)),e.dispatchEvent(v)}function Ci(e,o){return function(){return On(this,e,o)}}function Ti(e,o){return function(){return On(this,e,o.apply(this,arguments))}}typeof document<"u"&&("onmouseenter"in document.documentElement||(Nn={mouseenter:"mouseover",mouseleave:"mouseout"}));var In=[null];function Pt(e,o){this._groups=e,this._parents=o}function Ln(){return new Pt([[document.documentElement]],In)}Pt.prototype=Ln.prototype={constructor:Pt,select:function C(e){"function"!=typeof e&&(e=b(e));for(var o=this._groups,n=o.length,u=new Array(n),v=0;v<n;++v)for(var S,P,_=o[v],E=_.length,T=u[v]=new Array(E),R=0;R<E;++R)(S=_[R])&&(P=e.call(S,S.__data__,R,_))&&("__data__"in S&&(P.__data__=S.__data__),T[R]=P);return new Pt(u,this._parents)},selectAll:function N(e){"function"!=typeof e&&(e=M(e));for(var o=this._groups,n=o.length,u=[],v=[],_=0;_<n;++_)for(var S,E=o[_],T=E.length,P=0;P<T;++P)(S=E[P])&&(u.push(e.call(S,S.__data__,P,E)),v.push(S));return new Pt(u,v)},filter:function D(e){"function"!=typeof e&&(e=k(e));for(var o=this._groups,n=o.length,u=new Array(n),v=0;v<n;++v)for(var S,_=o[v],E=_.length,T=u[v]=[],P=0;P<E;++P)(S=_[P])&&e.call(S,S.__data__,P,_)&&T.push(S);return new Pt(u,this._parents)},data:function F(e,o){if(!e)return q=new Array(this.size()),P=-1,this.each(function(Lt){q[++P]=Lt}),q;var n=o?L:I,u=this._parents,v=this._groups;"function"!=typeof e&&(e=function Y(e){return function(){return e}}(e));for(var _=v.length,E=new Array(_),T=new Array(_),S=new Array(_),P=0;P<_;++P){var R=u[P],j=v[P],J=j.length,q=e.call(R,R&&R.__data__,P,u),ot=q.length,et=T[P]=new Array(ot),ht=E[P]=new Array(ot);n(R,j,et,ht,S[P]=new Array(J),q,o);for(var Et,Ct,yt=0,pt=0;yt<ot;++yt)if(Et=et[yt]){for(yt>=pt&&(pt=yt+1);!(Ct=ht[pt])&&++pt<ot;);Et._next=Ct||null}}return(E=new Pt(E,u))._enter=T,E._exit=S,E},enter:function V(){return new Pt(this._enter||this._groups.map(H),this._parents)},exit:function G(){return new Pt(this._exit||this._groups.map(H),this._parents)},join:function z(e,o,n){var u=this.enter(),v=this,_=this.exit();return u="function"==typeof e?e(u):u.append(e+""),null!=o&&(v=o(v)),null==n?_.remove():n(_),u&&v?u.merge(v).order():v},merge:function Q(e){for(var o=this._groups,n=e._groups,u=o.length,_=Math.min(u,n.length),E=new Array(u),T=0;T<_;++T)for(var J,S=o[T],P=n[T],R=S.length,j=E[T]=new Array(R),q=0;q<R;++q)(J=S[q]||P[q])&&(j[q]=J);for(;T<u;++T)E[T]=o[T];return new Pt(E,this._parents)},order:function U(){for(var e=this._groups,o=-1,n=e.length;++o<n;)for(var E,u=e[o],v=u.length-1,_=u[v];--v>=0;)(E=u[v])&&(_&&4^E.compareDocumentPosition(_)&&_.parentNode.insertBefore(E,_),_=E);return this},sort:function Z(e){function o(j,J){return j&&J?e(j.__data__,J.__data__):!j-!J}e||(e=X);for(var n=this._groups,u=n.length,v=new Array(u),_=0;_<u;++_){for(var P,E=n[_],T=E.length,S=v[_]=new Array(T),R=0;R<T;++R)(P=E[R])&&(S[R]=P);S.sort(o)}return new Pt(v,this._parents).order()},call:function W(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function it(){var e=new Array(this.size()),o=-1;return this.each(function(){e[++o]=this}),e},node:function tt(){for(var e=this._groups,o=0,n=e.length;o<n;++o)for(var u=e[o],v=0,_=u.length;v<_;++v){var E=u[v];if(E)return E}return null},size:function ut(){var e=0;return this.each(function(){++e}),e},empty:function ft(){return!this.node()},each:function xt(e){for(var o=this._groups,n=0,u=o.length;n<u;++n)for(var T,v=o[n],_=0,E=v.length;_<E;++_)(T=v[_])&&e.call(T,T.__data__,_,v);return this},attr:function at(e,o){var n=rt(e);if(arguments.length<2){var u=this.node();return n.local?u.getAttributeNS(n.space,n.local):u.getAttribute(n)}return this.each((null==o?n.local?mt:lt:"function"==typeof o?n.local?st:bt:n.local?_t:dt)(n,o))},style:function Wt(e,o,n){return arguments.length>1?this.each((null==o?gt:"function"==typeof o?wt:Tt)(e,o,n??"")):Ft(this.node(),e)},property:function St(e,o){return arguments.length>1?this.each((null==o?nn:"function"==typeof o?Bt:ue)(e,o)):this.node()[e]},classed:function Ue(e,o){var n=re(e+"");if(arguments.length<2){for(var u=Kt(this.node()),v=-1,_=n.length;++v<_;)if(!u.contains(n[v]))return!1;return!0}return this.each(("function"==typeof o?rn:o?Ge:Ze)(n,o))},text:function Qr(e){return arguments.length?this.each(null==e?Ht:("function"==typeof e?Kr:Yt)(e)):this.node().textContent},html:function ni(e){return arguments.length?this.each(null==e?qr:("function"==typeof e?ei:ti)(e)):this.node().innerHTML},raise:function ii(){return this.each(ri)},lower:function si(){return this.each(oi)},append:function hi(e){var o="function"==typeof e?e:kn(e);return this.select(function(){return this.appendChild(o.apply(this,arguments))})},insert:function fi(e,o){var n="function"==typeof e?e:kn(e),u=null==o?li:"function"==typeof o?o:b(o);return this.select(function(){return this.insertBefore(n.apply(this,arguments),u.apply(this,arguments)||null)})},remove:function di(){return this.each(ci)},clone:function mi(e){return this.select(e?gi:pi)},datum:function vi(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function Ei(e,o,n){var v,E,u=_i(e+""),_=u.length;if(!(arguments.length<2)){for(T=o?bi:wi,null==n&&(n=!1),v=0;v<_;++v)this.each(T(u[v],o,n));return this}var T=this.node().__on;if(T)for(var R,S=0,P=T.length;S<P;++S)for(v=0,R=T[S];v<_;++v)if((E=u[v]).type===R.type&&E.name===R.name)return R.value},dispatch:function Ai(e,o){return this.each(("function"==typeof o?Ti:Ci)(e,o))}};const we=Ln;function Fn(e){return"string"==typeof e?new Pt([[document.querySelector(e)]],[document.documentElement]):new Pt([[e]],In)}function Pn(e,o,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+o)/6,(e._y0+4*e._y1+n)/6)}function Be(e){this._context=e}function Dn(e,o){this._basis=new Be(e),this._beta=o}Be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pn(this,e,o)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=o}},Dn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,o=this._y,n=e.length-1;if(n>0)for(var S,u=e[0],v=o[0],_=e[n]-u,E=o[n]-v,T=-1;++T<=n;)this._basis.point(this._beta*e[T]+(1-this._beta)*(u+(S=T/n)*_),this._beta*o[T]+(1-this._beta)*(v+S*E));this._x=this._y=null,this._basis.lineEnd()},point:function(e,o){this._x.push(+e),this._y.push(+o)}};const Mi=function e(o){function n(u){return 1===o?new Be(u):new Dn(u,o)}return n.beta=function(u){return e(+u)},n}(.85);var on=Math.PI,sn=2*on,oe=1e-6,ki=sn-oe;function an(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Gn(){return new an}an.prototype=Gn.prototype={constructor:an,moveTo:function(e,o){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,o){this._+="L"+(this._x1=+e)+","+(this._y1=+o)},quadraticCurveTo:function(e,o,n,u){this._+="Q"+ +e+","+ +o+","+(this._x1=+n)+","+(this._y1=+u)},bezierCurveTo:function(e,o,n,u,v,_){this._+="C"+ +e+","+ +o+","+ +n+","+ +u+","+(this._x1=+v)+","+(this._y1=+_)},arcTo:function(e,o,n,u,v){var _=this._x1,E=this._y1,T=(n=+n)-(e=+e),S=(u=+u)-(o=+o),P=_-e,R=E-o,j=P*P+R*R;if((v=+v)<0)throw new Error("negative radius: "+v);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=o);else if(j>oe)if(Math.abs(R*T-S*P)>oe&&v){var J=n-_,q=u-E,ot=T*T+S*S,et=J*J+q*q,ht=Math.sqrt(ot),ct=Math.sqrt(j),yt=v*Math.tan((on-Math.acos((ot+j-et)/(2*ht*ct)))/2),pt=yt/ct,Et=yt/ht;Math.abs(pt-1)>oe&&(this._+="L"+(e+pt*P)+","+(o+pt*R)),this._+="A"+v+","+v+",0,0,"+ +(R*J>P*q)+","+(this._x1=e+Et*T)+","+(this._y1=o+Et*S)}else this._+="L"+(this._x1=e)+","+(this._y1=o)},arc:function(e,o,n,u,v,_){e=+e,o=+o,_=!!_;var E=(n=+n)*Math.cos(u),T=n*Math.sin(u),S=e+E,P=o+T,R=1^_,j=_?u-v:v-u;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+S+","+P:(Math.abs(this._x1-S)>oe||Math.abs(this._y1-P)>oe)&&(this._+="L"+S+","+P),n&&(j<0&&(j=j%sn+sn),j>ki?this._+="A"+n+","+n+",0,1,"+R+","+(e-E)+","+(o-T)+"A"+n+","+n+",0,1,"+R+","+(this._x1=S)+","+(this._y1=P):j>oe&&(this._+="A"+n+","+n+",0,"+ +(j>=on)+","+R+","+(this._x1=e+n*Math.cos(v))+","+(this._y1=o+n*Math.sin(v))))},rect:function(e,o,n,u){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+o)+"h"+ +n+"v"+ +u+"h"+-n+"Z"},toString:function(){return this._}};const Ni=Gn;function He(e){return function(){return e}}function Zn(e){this._context=e}function Si(e){return new Zn(e)}function Oi(e){return e[0]}function Ii(e){return e[1]}Zn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2;default:this._context.lineTo(e,o)}}};var Un=Math.PI;function Hn(e){return(1-Math.cos(Un*e))/2}var Fi={value:function(){}};function Rn(){for(var u,e=0,o=arguments.length,n={};e<o;++e){if(!(u=arguments[e]+"")||u in n||/[\s.]/.test(u))throw new Error("illegal type: "+u);n[u]=[]}return new Re(n)}function Re(e){this._=e}function Pi(e,o){return e.trim().split(/^|\s+/).map(function(n){var u="",v=n.indexOf(".");if(v>=0&&(u=n.slice(v+1),n=n.slice(0,v)),n&&!o.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:u}})}function Di(e,o){for(var v,n=0,u=e.length;n<u;++n)if((v=e[n]).name===o)return v.value}function Vn(e,o,n){for(var u=0,v=e.length;u<v;++u)if(e[u].name===o){e[u]=Fi,e=e.slice(0,u).concat(e.slice(u+1));break}return null!=n&&e.push({name:o,value:n}),e}Re.prototype=Rn.prototype={constructor:Re,on:function(e,o){var v,n=this._,u=Pi(e+"",n),_=-1,E=u.length;if(!(arguments.length<2)){if(null!=o&&"function"!=typeof o)throw new Error("invalid callback: "+o);for(;++_<E;)if(v=(e=u[_]).type)n[v]=Vn(n[v],e.name,o);else if(null==o)for(v in n)n[v]=Vn(n[v],e.name,null);return this}for(;++_<E;)if((v=(e=u[_]).type)&&(v=Di(n[v],e.name)))return v},copy:function(){var e={},o=this._;for(var n in o)e[n]=o[n].slice();return new Re(e)},call:function(e,o){if((v=arguments.length-2)>0)for(var v,_,n=new Array(v),u=0;u<v;++u)n[u]=arguments[u+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=0,v=(_=this._[e]).length;u<v;++u)_[u].value.apply(o,n)},apply:function(e,o,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var u=this._[e],v=0,_=u.length;v<_;++v)u[v].value.apply(o,n)}};const un=Rn;var Ve,Ce,he=0,be=0,Ee=0,ze=0,se=0,Ye=0,Te="object"==typeof performance&&performance.now?performance:Date,Yn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function le(){return se||(Yn(Gi),se=Te.now()+Ye)}function Gi(){se=0}function Ae(){this._call=this._time=this._next=null}function je(e,o,n){var u=new Ae;return u.restart(e,o,n),u}function jn(){le(),++he;for(var o,e=Ve;e;)(o=se-e._time)>=0&&e._call.call(null,o),e=e._next;--he}function Jn(){se=(ze=Te.now())+Ye,he=be=0;try{jn()}finally{he=0,function Ui(){for(var e,n,o=Ve,u=1/0;o;)o._call?(u>o._time&&(u=o._time),e=o,o=o._next):(n=o._next,o._next=null,o=e?e._next=n:Ve=n);Ce=e,hn(u)}(),se=0}}function Zi(){var e=Te.now(),o=e-ze;o>1e3&&(Ye-=o,ze=e)}function hn(e){he||(be&&(be=clearTimeout(be)),e-se>24?(e<1/0&&(be=setTimeout(Jn,e-Te.now()-Ye)),Ee&&(Ee=clearInterval(Ee))):(Ee||(ze=Te.now(),Ee=setInterval(Zi,1e3)),he=1,Yn(Jn)))}function ln(e,o,n){var u=new Ae;return u.restart(function(v){u.stop(),e(v+o)},o=null==o?0:+o,n),u}Ae.prototype=je.prototype={constructor:Ae,restart:function(e,o,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?le():+n)+(null==o?0:+o),!this._next&&Ce!==this&&(Ce?Ce._next=this:Ve=this,Ce=this),this._call=e,this._time=n,hn()},stop:function(){this._call&&(this._call=null,this._time=1/0,hn())}};var Bi=un("start","end","cancel","interrupt"),Hi=[];function Xe(e,o,n,u,v,_){var E=e.__transition;if(E){if(n in E)return}else e.__transition={};!function Ri(e,o,n){var v,u=e.__transition;function E(P){var R,j,J,q;if(1!==n.state)return S();for(R in u)if((q=u[R]).name===n.name){if(3===q.state)return ln(E);4===q.state?(q.state=6,q.timer.stop(),q.on.call("interrupt",e,e.__data__,q.index,q.group),delete u[R]):+R<o&&(q.state=6,q.timer.stop(),q.on.call("cancel",e,e.__data__,q.index,q.group),delete u[R])}if(ln(function(){3===n.state&&(n.state=4,n.timer.restart(T,n.delay,n.time),T(P))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,v=new Array(J=n.tween.length),R=0,j=-1;R<J;++R)(q=n.tween[R].value.call(e,e.__data__,n.index,n.group))&&(v[++j]=q);v.length=j+1}}function T(P){for(var R=P<n.duration?n.ease.call(null,P/n.duration):(n.timer.restart(S),n.state=5,1),j=-1,J=v.length;++j<J;)v[j].call(e,R);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),S())}function S(){for(var P in n.state=6,n.timer.stop(),delete u[o],u)return;delete e.__transition}u[o]=n,n.timer=je(function _(P){n.state=1,n.timer.restart(E,n.delay,n.time),n.delay<=P&&E(P-n.delay)},0,n.time)}(e,n,{name:o,index:u,group:v,on:Bi,tween:Hi,time:_.time,delay:_.delay,duration:_.duration,ease:_.ease,timer:null,state:0})}function dn(e,o){var n=Zt(e,o);if(n.state>0)throw new Error("too late; already scheduled");return n}function jt(e,o){var n=Zt(e,o);if(n.state>3)throw new Error("too late; already running");return n}function Zt(e,o){var n=e.__transition;if(!n||!(n=n[o]))throw new Error("transition not found");return n}function Qt(e,o){return e=+e,o=+o,function(n){return e*(1-n)+o*n}}var Me,gn,qn,We,Kn=180/Math.PI,pn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qn(e,o,n,u,v,_){var E,T,S;return(E=Math.sqrt(e*e+o*o))&&(e/=E,o/=E),(S=e*n+o*u)&&(n-=e*S,u-=o*S),(T=Math.sqrt(n*n+u*u))&&(n/=T,u/=T,S/=T),e*u<o*n&&(e=-e,o=-o,S=-S,E=-E),{translateX:v,translateY:_,rotate:Math.atan2(o,e)*Kn,skewX:Math.atan(S)*Kn,scaleX:E,scaleY:T}}function tr(e,o,n,u){function v(P){return P.length?P.pop()+" ":""}return function(P,R){var j=[],J=[];return P=e(P),R=e(R),function _(P,R,j,J,q,ot){if(P!==j||R!==J){var et=q.push("translate(",null,o,null,n);ot.push({i:et-4,x:Qt(P,j)},{i:et-2,x:Qt(R,J)})}else(j||J)&&q.push("translate("+j+o+J+n)}(P.translateX,P.translateY,R.translateX,R.translateY,j,J),function E(P,R,j,J){P!==R?(P-R>180?R+=360:R-P>180&&(P+=360),J.push({i:j.push(v(j)+"rotate(",null,u)-2,x:Qt(P,R)})):R&&j.push(v(j)+"rotate("+R+u)}(P.rotate,R.rotate,j,J),function T(P,R,j,J){P!==R?J.push({i:j.push(v(j)+"skewX(",null,u)-2,x:Qt(P,R)}):R&&j.push(v(j)+"skewX("+R+u)}(P.skewX,R.skewX,j,J),function S(P,R,j,J,q,ot){if(P!==j||R!==J){var et=q.push(v(q)+"scale(",null,",",null,")");ot.push({i:et-4,x:Qt(P,j)},{i:et-2,x:Qt(R,J)})}else(1!==j||1!==J)&&q.push(v(q)+"scale("+j+","+J+")")}(P.scaleX,P.scaleY,R.scaleX,R.scaleY,j,J),P=R=null,function(q){for(var ht,ot=-1,et=J.length;++ot<et;)j[(ht=J[ot]).i]=ht.x(q);return j.join("")}}}var Ji=tr(function Yi(e){return"none"===e?pn:(Me||(Me=document.createElement("DIV"),gn=document.documentElement,qn=document.defaultView),Me.style.transform=e,e=qn.getComputedStyle(gn.appendChild(Me),null).getPropertyValue("transform"),gn.removeChild(Me),Qn(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),$i=tr(function ji(e){return null!=e&&(We||(We=document.createElementNS("http://www.w3.org/2000/svg","g")),We.setAttribute("transform",e),e=We.transform.baseVal.consolidate())?Qn((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):pn},", ",")",")");function Xi(e,o){var n,u;return function(){var v=jt(this,e),_=v.tween;if(_!==n)for(var E=0,T=(u=n=_).length;E<T;++E)if(u[E].name===o){(u=u.slice()).splice(E,1);break}v.tween=u}}function Wi(e,o,n){var u,v;if("function"!=typeof n)throw new Error;return function(){var _=jt(this,e),E=_.tween;if(E!==u){v=(u=E).slice();for(var T={name:o,value:n},S=0,P=v.length;S<P;++S)if(v[S].name===o){v[S]=T;break}S===P&&v.push(T)}_.tween=v}}function mn(e,o,n){var u=e._id;return e.each(function(){var v=jt(this,u);(v.value||(v.value={}))[o]=n.apply(this,arguments)}),function(v){return Zt(v,u).value[o]}}function vn(e,o,n){e.prototype=o.prototype=n,n.constructor=e}function er(e,o){var n=Object.create(e.prototype);for(var u in o)n[u]=o[u];return n}function ke(){}var Ke=1/.7,fe="\\s*([+-]?\\d+)\\s*",Se="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qi=/^#([0-9a-f]{3,8})$/,qi=new RegExp("^rgb\\("+[fe,fe,fe]+"\\)$"),to=new RegExp("^rgb\\("+[Rt,Rt,Rt]+"\\)$"),eo=new RegExp("^rgba\\("+[fe,fe,fe,Se]+"\\)$"),no=new RegExp("^rgba\\("+[Rt,Rt,Rt,Se]+"\\)$"),ro=new RegExp("^hsl\\("+[Se,Rt,Rt]+"\\)$"),io=new RegExp("^hsla\\("+[Se,Rt,Rt,Se]+"\\)$"),nr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rr(){return this.rgb().formatHex()}function ir(){return this.rgb().formatRgb()}function Oe(e){var o,n;return e=(e+"").trim().toLowerCase(),(o=Qi.exec(e))?(n=o[1].length,o=parseInt(o[1],16),6===n?or(o):3===n?new Dt(o>>8&15|o>>4&240,o>>4&15|240&o,(15&o)<<4|15&o,1):8===n?Qe(o>>24&255,o>>16&255,o>>8&255,(255&o)/255):4===n?Qe(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|240&o,((15&o)<<4|15&o)/255):null):(o=qi.exec(e))?new Dt(o[1],o[2],o[3],1):(o=to.exec(e))?new Dt(255*o[1]/100,255*o[2]/100,255*o[3]/100,1):(o=eo.exec(e))?Qe(o[1],o[2],o[3],o[4]):(o=no.exec(e))?Qe(255*o[1]/100,255*o[2]/100,255*o[3]/100,o[4]):(o=ro.exec(e))?ur(o[1],o[2]/100,o[3]/100,1):(o=io.exec(e))?ur(o[1],o[2]/100,o[3]/100,o[4]):nr.hasOwnProperty(e)?or(nr[e]):"transparent"===e?new Dt(NaN,NaN,NaN,0):null}function or(e){return new Dt(e>>16&255,e>>8&255,255&e,1)}function Qe(e,o,n,u){return u<=0&&(e=o=n=NaN),new Dt(e,o,n,u)}function so(e){return e instanceof ke||(e=Oe(e)),e?new Dt((e=e.rgb()).r,e.g,e.b,e.opacity):new Dt}function qe(e,o,n,u){return 1===arguments.length?so(e):new Dt(e,o,n,u??1)}function Dt(e,o,n,u){this.r=+e,this.g=+o,this.b=+n,this.opacity=+u}function sr(){return"#"+yn(this.r)+yn(this.g)+yn(this.b)}function ar(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function yn(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ur(e,o,n,u){return u<=0?e=o=n=NaN:n<=0||n>=1?e=o=NaN:o<=0&&(e=NaN),new Vt(e,o,n,u)}function hr(e){if(e instanceof Vt)return new Vt(e.h,e.s,e.l,e.opacity);if(e instanceof ke||(e=Oe(e)),!e)return new Vt;if(e instanceof Vt)return e;var o=(e=e.rgb()).r/255,n=e.g/255,u=e.b/255,v=Math.min(o,n,u),_=Math.max(o,n,u),E=NaN,T=_-v,S=(_+v)/2;return T?(E=o===_?(n-u)/T+6*(n<u):n===_?(u-o)/T+2:(o-n)/T+4,T/=S<.5?_+v:2-_-v,E*=60):T=S>0&&S<1?0:E,new Vt(E,T,S,e.opacity)}function Vt(e,o,n,u){this.h=+e,this.s=+o,this.l=+n,this.opacity=+u}function xn(e,o,n){return 255*(e<60?o+(n-o)*e/60:e<180?n:e<240?o+(n-o)*(240-e)/60:o)}function lr(e,o,n,u,v){var _=e*e,E=_*e;return((1-3*e+3*_-E)*o+(4-6*_+3*E)*n+(1+3*e+3*_-3*E)*u+E*v)/6}function fr(e){return function(){return e}}function dr(e,o){var n=o-e;return n?function cr(e,o){return function(n){return e+n*o}}(e,n):fr(isNaN(e)?o:e)}vn(ke,Oe,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:rr,formatHex:rr,formatHsl:function oo(){return hr(this).formatHsl()},formatRgb:ir,toString:ir}),vn(Dt,qe,er(ke,{brighter:function(e){return e=null==e?Ke:Math.pow(Ke,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sr,formatHex:sr,formatRgb:ar,toString:ar})),vn(Vt,function ao(e,o,n,u){return 1===arguments.length?hr(e):new Vt(e,o,n,u??1)},er(ke,{brighter:function(e){return e=null==e?Ke:Math.pow(Ke,e),new Vt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Vt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),o=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,u=n+(n<.5?n:1-n)*o,v=2*n-u;return new Dt(xn(e>=240?e-240:e+120,v,u),xn(e,v,u),xn(e<120?e+240:e-120,v,u),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const pr=function e(o){var n=function fo(e){return 1==(e=+e)?dr:function(o,n){return n-o?function lo(e,o,n){return e=Math.pow(e,n),o=Math.pow(o,n)-e,n=1/n,function(u){return Math.pow(e+u*o,n)}}(o,n,e):fr(isNaN(o)?n:o)}}(o);function u(v,_){var E=n((v=qe(v)).r,(_=qe(_)).r),T=n(v.g,_.g),S=n(v.b,_.b),P=dr(v.opacity,_.opacity);return function(R){return v.r=E(R),v.g=T(R),v.b=S(R),v.opacity=P(R),v+""}}return u.gamma=e,u}(1);function gr(e){return function(o){var E,T,n=o.length,u=new Array(n),v=new Array(n),_=new Array(n);for(E=0;E<n;++E)T=qe(o[E]),u[E]=T.r||0,v[E]=T.g||0,_[E]=T.b||0;return u=e(u),v=e(v),_=e(_),T.opacity=1,function(S){return T.r=u(S),T.g=v(S),T.b=_(S),T+""}}}gr(function uo(e){var o=e.length-1;return function(n){var u=n<=0?n=0:n>=1?(n=1,o-1):Math.floor(n*o),v=e[u],_=e[u+1];return lr((n-u/o)*o,u>0?e[u-1]:2*v-_,v,_,u<o-1?e[u+2]:2*_-v)}}),gr(function ho(e){var o=e.length;return function(n){var u=Math.floor(((n%=1)<0?++n:n)*o);return lr((n-u/o)*o,e[(u+o-1)%o],e[u%o],e[(u+1)%o],e[(u+2)%o])}});var _n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(_n.source,"g");function go(e,o){var u,v,_,n=_n.lastIndex=wn.lastIndex=0,E=-1,T=[],S=[];for(e+="",o+="";(u=_n.exec(e))&&(v=wn.exec(o));)(_=v.index)>n&&(_=o.slice(n,_),T[E]?T[E]+=_:T[++E]=_),(u=u[0])===(v=v[0])?T[E]?T[E]+=v:T[++E]=v:(T[++E]=null,S.push({i:E,x:Qt(u,v)})),n=wn.lastIndex;return n<o.length&&(_=o.slice(n),T[E]?T[E]+=_:T[++E]=_),T.length<2?S[0]?function po(e){return function(o){return e(o)+""}}(S[0].x):function co(e){return function(){return e}}(o):(o=S.length,function(P){for(var j,R=0;R<o;++R)T[(j=S[R]).i]=j.x(P);return T.join("")})}function mr(e,o){var n;return("number"==typeof o?Qt:o instanceof Oe?pr:(n=Oe(o))?(o=n,pr):go)(e,o)}function mo(e){return function(){this.removeAttribute(e)}}function vo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yo(e,o,n){var u,_,v=n+"";return function(){var E=this.getAttribute(e);return E===v?null:E===u?_:_=o(u=E,n)}}function xo(e,o,n){var u,_,v=n+"";return function(){var E=this.getAttributeNS(e.space,e.local);return E===v?null:E===u?_:_=o(u=E,n)}}function _o(e,o,n){var u,v,_;return function(){var E,S,T=n(this);return null==T?void this.removeAttribute(e):(E=this.getAttribute(e))===(S=T+"")?null:E===u&&S===v?_:(v=S,_=o(u=E,T))}}function wo(e,o,n){var u,v,_;return function(){var E,S,T=n(this);return null==T?void this.removeAttributeNS(e.space,e.local):(E=this.getAttributeNS(e.space,e.local))===(S=T+"")?null:E===u&&S===v?_:(v=S,_=o(u=E,T))}}function Eo(e,o){return function(n){this.setAttribute(e,o.call(this,n))}}function Co(e,o){return function(n){this.setAttributeNS(e.space,e.local,o.call(this,n))}}function To(e,o){var n,u;function v(){var _=o.apply(this,arguments);return _!==u&&(n=(u=_)&&Co(e,_)),n}return v._value=o,v}function Ao(e,o){var n,u;function v(){var _=o.apply(this,arguments);return _!==u&&(n=(u=_)&&Eo(e,_)),n}return v._value=o,v}function ko(e,o){return function(){dn(this,e).delay=+o.apply(this,arguments)}}function No(e,o){return o=+o,function(){dn(this,e).delay=o}}function Oo(e,o){return function(){jt(this,e).duration=+o.apply(this,arguments)}}function Io(e,o){return o=+o,function(){jt(this,e).duration=o}}function Fo(e,o){if("function"!=typeof o)throw new Error;return function(){jt(this,e).ease=o}}function Uo(e,o,n){var u,v,_=function Zo(e){return(e+"").trim().split(/^|\s+/).every(function(o){var n=o.indexOf(".");return n>=0&&(o=o.slice(0,n)),!o||"start"===o})}(o)?dn:jt;return function(){var E=_(this,e),T=E.on;T!==u&&(v=(u=T).copy()).on(o,n),E.on=v}}var Yo=we.prototype.constructor;function vr(e){return function(){this.style.removeProperty(e)}}function Qo(e,o,n){return function(u){this.style.setProperty(e,o.call(this,u),n)}}function qo(e,o,n){var u,v;function _(){var E=o.apply(this,arguments);return E!==v&&(u=(v=E)&&Qo(e,E,n)),u}return _._value=o,_}function is(e){return function(o){this.textContent=e.call(this,o)}}function os(e){var o,n;function u(){var v=e.apply(this,arguments);return v!==n&&(o=(n=v)&&is(v)),o}return u._value=e,u}var hs=0;function Jt(e,o,n,u){this._groups=e,this._parents=o,this._name=n,this._id=u}function yr(){return++hs}var ce=we.prototype;Jt.prototype=function ls(e){return we().transition(e)}.prototype={constructor:Jt,select:function Vo(e){var o=this._name,n=this._id;"function"!=typeof e&&(e=b(e));for(var u=this._groups,v=u.length,_=new Array(v),E=0;E<v;++E)for(var R,j,T=u[E],S=T.length,P=_[E]=new Array(S),J=0;J<S;++J)(R=T[J])&&(j=e.call(R,R.__data__,J,T))&&("__data__"in R&&(j.__data__=R.__data__),P[J]=j,Xe(P[J],o,n,J,P,Zt(R,n)));return new Jt(_,this._parents,o,n)},selectAll:function zo(e){var o=this._name,n=this._id;"function"!=typeof e&&(e=M(e));for(var u=this._groups,v=u.length,_=[],E=[],T=0;T<v;++T)for(var R,S=u[T],P=S.length,j=0;j<P;++j)if(R=S[j]){for(var q,J=e.call(R,R.__data__,j,S),ot=Zt(R,n),et=0,ht=J.length;et<ht;++et)(q=J[et])&&Xe(q,o,n,et,J,ot);_.push(J),E.push(R)}return new Jt(_,E,o,n)},filter:function Do(e){"function"!=typeof e&&(e=k(e));for(var o=this._groups,n=o.length,u=new Array(n),v=0;v<n;++v)for(var S,_=o[v],E=_.length,T=u[v]=[],P=0;P<E;++P)(S=_[P])&&e.call(S,S.__data__,P,_)&&T.push(S);return new Jt(u,this._parents,this._name,this._id)},merge:function Go(e){if(e._id!==this._id)throw new Error;for(var o=this._groups,n=e._groups,u=o.length,_=Math.min(u,n.length),E=new Array(u),T=0;T<_;++T)for(var J,S=o[T],P=n[T],R=S.length,j=E[T]=new Array(R),q=0;q<R;++q)(J=S[q]||P[q])&&(j[q]=J);for(;T<u;++T)E[T]=o[T];return new Jt(E,this._parents,this._name,this._id)},selection:function jo(){return new Yo(this._groups,this._parents)},transition:function as(){for(var e=this._name,o=this._id,n=yr(),u=this._groups,v=u.length,_=0;_<v;++_)for(var S,E=u[_],T=E.length,P=0;P<T;++P)if(S=E[P]){var R=Zt(S,o);Xe(S,e,n,P,E,{time:R.time+R.delay+R.duration,delay:0,duration:R.duration,ease:R.ease})}return new Jt(u,this._parents,e,n)},call:ce.call,nodes:ce.nodes,node:ce.node,size:ce.size,empty:ce.empty,each:ce.each,on:function Bo(e,o){var n=this._id;return arguments.length<2?Zt(this.node(),n).on.on(e):this.each(Uo(n,e,o))},attr:function bo(e,o){var n=rt(e),u="transform"===n?$i:mr;return this.attrTween(e,"function"==typeof o?(n.local?wo:_o)(n,u,mn(this,"attr."+e,o)):null==o?(n.local?vo:mo)(n):(n.local?xo:yo)(n,u,o))},attrTween:function Mo(e,o){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==o)return this.tween(n,null);if("function"!=typeof o)throw new Error;var u=rt(e);return this.tween(n,(u.local?To:Ao)(u,o))},style:function Ko(e,o,n){var u="transform"==(e+="")?Ji:mr;return null==o?this.styleTween(e,function Jo(e,o){var n,u,v;return function(){var _=Ft(this,e),E=(this.style.removeProperty(e),Ft(this,e));return _===E?null:_===n&&E===u?v:v=o(n=_,u=E)}}(e,u)).on("end.style."+e,vr(e)):"function"==typeof o?this.styleTween(e,function Xo(e,o,n){var u,v,_;return function(){var E=Ft(this,e),T=n(this),S=T+"";return null==T&&(this.style.removeProperty(e),S=T=Ft(this,e)),E===S?null:E===u&&S===v?_:(v=S,_=o(u=E,T))}}(e,u,mn(this,"style."+e,o))).each(function Wo(e,o){var n,u,v,T,_="style."+o,E="end."+_;return function(){var S=jt(this,e),P=S.on,R=null==S.value[_]?T||(T=vr(o)):void 0;(P!==n||v!==R)&&(u=(n=P).copy()).on(E,v=R),S.on=u}}(this._id,e)):this.styleTween(e,function $o(e,o,n){var u,_,v=n+"";return function(){var E=Ft(this,e);return E===v?null:E===u?_:_=o(u=E,n)}}(e,u,o),n).on("end.style."+e,null)},styleTween:function ts(e,o,n){var u="style."+(e+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==o)return this.tween(u,null);if("function"!=typeof o)throw new Error;return this.tween(u,qo(e,o,n??""))},text:function rs(e){return this.tween("text","function"==typeof e?function ns(e){return function(){var o=e(this);this.textContent=o??""}}(mn(this,"text",e)):function es(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function ss(e){var o="text";if(arguments.length<1)return(o=this.tween(o))&&o._value;if(null==e)return this.tween(o,null);if("function"!=typeof e)throw new Error;return this.tween(o,os(e))},remove:function Ro(){return this.on("end.remove",function Ho(e){return function(){var o=this.parentNode;for(var n in this.__transition)if(+n!==e)return;o&&o.removeChild(this)}}(this._id))},tween:function Ki(e,o){var n=this._id;if(e+="",arguments.length<2){for(var E,u=Zt(this.node(),n).tween,v=0,_=u.length;v<_;++v)if((E=u[v]).name===e)return E.value;return null}return this.each((null==o?Xi:Wi)(n,e,o))},delay:function So(e){var o=this._id;return arguments.length?this.each(("function"==typeof e?ko:No)(o,e)):Zt(this.node(),o).delay},duration:function Lo(e){var o=this._id;return arguments.length?this.each(("function"==typeof e?Oo:Io)(o,e)):Zt(this.node(),o).duration},ease:function Po(e){var o=this._id;return arguments.length?this.each(Fo(o,e)):Zt(this.node(),o).ease},end:function us(){var e,o,n=this,u=n._id,v=n.size();return new Promise(function(_,E){var T={value:E},S={value:function(){0==--v&&_()}};n.each(function(){var P=jt(this,u),R=P.on;R!==e&&((o=(e=R).copy())._.cancel.push(T),o._.interrupt.push(T),o._.end.push(S)),P.on=o})})}};var bn={time:null,delay:0,duration:250,ease:function fs(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function cs(e,o){for(var n;!(n=e.__transition)||!(n=n[o]);)if(!(e=e.parentNode))return bn.time=le(),bn;return n}we.prototype.interrupt=function zi(e){return this.each(function(){!function Vi(e,o){var u,v,E,n=e.__transition,_=!0;if(n){for(E in o=null==o?null:o+"",n)(u=n[E]).name===o?(v=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(v?"interrupt":"cancel",e,e.__data__,u.index,u.group),delete n[E]):_=!1;_&&delete e.__transition}}(this,e)})},we.prototype.transition=function ds(e){var o,n;e instanceof Jt?(o=e._id,e=e._name):(o=yr(),(n=bn).time=le(),e=null==e?null:e+"");for(var u=this._groups,v=u.length,_=0;_<v;++_)for(var S,E=u[_],T=E.length,P=0;P<T;++P)(S=E[P])&&Xe(S,e,o,P,E,n||cs(S,o));return new Jt(u,this._parents,e,o)};var xr=i(7579),_r=i(727),wr=i(9751),br=i(9646),gs=i(4968),ms=i(590),vs=i(8372);function Ts(e){return typeof e>"u"}function Ns(e){if(Array.isArray(e)){for(var o=0,n=Array(e.length);o<e.length;o++)n[o]=e[o];return n}return Array.from(e)}function Ss(e){return Array.isArray(e)?e:Array.from(e)}function Ie(){for(var e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];var u=function(j,J){return{a:j.a*J.a+j.c*J.b,c:j.a*J.c+j.c*J.d,e:j.a*J.e+j.c*J.f+j.e,b:j.b*J.a+j.d*J.b,d:j.b*J.c+j.d*J.d,f:j.b*J.e+j.d*J.f+j.f}};switch((o=Array.isArray(o[0])?o[0]:o).length){case 0:throw new Error("no matrices provided");case 1:return o[0];case 2:return u(o[0],o[1]);default:var v=o,_=Ss(v),E=_[0],T=_[1],S=_.slice(2),P=u(E,T);return Ie.apply(void 0,[P].concat(Ns(S)))}}function Tr(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e,b:0,d:1,f:o}}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;class Ar extends Map{constructor(o,n=Nr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=o)for(const[u,v]of o)this.set(u,v)}get(o){return super.get(En(this,o))}has(o){return super.has(En(this,o))}set(o,n){return super.set(Mr(this,o),n)}delete(o){return super.delete(kr(this,o))}}class Iu extends Set{constructor(o,n=Nr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=o)for(const u of o)this.add(u)}has(o){return super.has(En(this,o))}add(o){return super.add(Mr(this,o))}delete(o){return super.delete(kr(this,o))}}function En({_intern:e,_key:o},n){const u=o(n);return e.has(u)?e.get(u):n}function Mr({_intern:e,_key:o},n){const u=o(n);return e.has(u)?e.get(u):(e.set(u,n),n)}function kr({_intern:e,_key:o},n){const u=o(n);return e.has(u)&&(n=e.get(u),e.delete(u)),n}function Nr(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Is(e,o){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(o).domain(e)}return this}const Sr=Symbol("implicit");function Or(){var e=new Ar,o=[],n=[],u=Sr;function v(_){let E=e.get(_);if(void 0===E){if(u!==Sr)return u;e.set(_,E=o.push(_)-1)}return n[E%n.length]}return v.domain=function(_){if(!arguments.length)return o.slice();o=[],e=new Ar;for(const E of _)e.has(E)||e.set(E,o.push(E)-1);return v},v.range=function(_){return arguments.length?(n=Array.from(_),v):n.slice()},v.unknown=function(_){return arguments.length?(u=_,v):u},v.copy=function(){return Or(o,n).unknown(u)},Is.apply(v,arguments),v}var pe=i(9695);function Ls(e,o){var n;function u(){var v,E,_=n.length,T=0,S=0;for(v=0;v<_;++v)T+=(E=n[v]).x,S+=E.y;for(T=T/_-e,S=S/_-o,v=0;v<_;++v)(E=n[v]).x-=T,E.y-=S}return null==e&&(e=0),null==o&&(o=0),u.initialize=function(v){n=v},u.x=function(v){return arguments.length?(e=+v,u):e},u.y=function(v){return arguments.length?(o=+v,u):o},u}function At(e){return function(){return e}}function qt(){return 1e-6*(Math.random()-.5)}function Ir(e,o,n,u){if(isNaN(o)||isNaN(n))return e;var v,j,J,q,ot,et,ht,ct,yt,_=e._root,E={data:u},T=e._x0,S=e._y0,P=e._x1,R=e._y1;if(!_)return e._root=E,e;for(;_.length;)if((et=o>=(j=(T+P)/2))?T=j:P=j,(ht=n>=(J=(S+R)/2))?S=J:R=J,v=_,!(_=_[ct=ht<<1|et]))return v[ct]=E,e;if(q=+e._x.call(null,_.data),ot=+e._y.call(null,_.data),o===q&&n===ot)return E.next=_,v?v[ct]=E:e._root=E,e;do{v=v?v[ct]=new Array(4):e._root=new Array(4),(et=o>=(j=(T+P)/2))?T=j:P=j,(ht=n>=(J=(S+R)/2))?S=J:R=J}while((ct=ht<<1|et)==(yt=(ot>=J)<<1|q>=j));return v[yt]=_,v[ct]=E,e}function Ot(e,o,n,u,v){this.node=e,this.x0=o,this.y0=n,this.x1=u,this.y1=v}function js(e){return e[0]}function $s(e){return e[1]}function Cn(e,o,n){var u=new Tn(o??js,n??$s,NaN,NaN,NaN,NaN);return null==e?u:u.addAll(e)}function Tn(e,o,n,u,v,_){this._x=e,this._y=o,this._x0=n,this._y0=u,this._x1=v,this._y1=_,this._root=void 0}function Lr(e){for(var o={data:e.data},n=o;e=e.next;)n=n.next={data:e.data};return o}var It=Cn.prototype=Tn.prototype;function Ws(e){return e.x+e.vx}function Ks(e){return e.y+e.vy}function Fr(e){var o,n,u=1,v=1;function _(){for(var S,R,j,J,q,ot,et,P=o.length,ht=0;ht<v;++ht)for(R=Cn(o,Ws,Ks).visitAfter(E),S=0;S<P;++S)et=(ot=n[(j=o[S]).index])*ot,J=j.x+j.vx,q=j.y+j.vy,R.visit(ct);function ct(yt,pt,Et,Ct,Lt){var kt=yt.data,Ut=yt.r,Nt=ot+Ut;if(!kt)return pt>J+Nt||Ct<J-Nt||Et>q+Nt||Lt<q-Nt;if(kt.index>j.index){var ee=J-kt.x-kt.vx,ne=q-kt.y-kt.vy,Xt=ee*ee+ne*ne;Xt<Nt*Nt&&(0===ee&&(Xt+=(ee=qt())*ee),0===ne&&(Xt+=(ne=qt())*ne),Xt=(Nt-(Xt=Math.sqrt(Xt)))/Xt*u,j.vx+=(ee*=Xt)*(Nt=(Ut*=Ut)/(et+Ut)),j.vy+=(ne*=Xt)*Nt,kt.vx-=ee*(Nt=1-Nt),kt.vy-=ne*Nt)}}}function E(S){if(S.data)return S.r=n[S.data.index];for(var P=S.r=0;P<4;++P)S[P]&&S[P].r>S.r&&(S.r=S[P].r)}function T(){if(o){var S,R,P=o.length;for(n=new Array(P),S=0;S<P;++S)n[(R=o[S]).index]=+e(R,S,o)}}return"function"!=typeof e&&(e=At(null==e?1:+e)),_.initialize=function(S){o=S,T()},_.iterations=function(S){return arguments.length?(v=+S,_):v},_.strength=function(S){return arguments.length?(u=+S,_):u},_.radius=function(S){return arguments.length?(e="function"==typeof S?S:At(+S),T(),_):e},_}It.copy=function(){var n,u,e=new Tn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),o=this._root;if(!o)return e;if(!o.length)return e._root=Lr(o),e;for(n=[{source:o,target:e._root=new Array(4)}];o=n.pop();)for(var v=0;v<4;++v)(u=o.source[v])&&(u.length?n.push({source:u,target:o.target[v]=new Array(4)}):o.target[v]=Lr(u));return e},It.add=function Fs(e){var o=+this._x.call(null,e),n=+this._y.call(null,e);return Ir(this.cover(o,n),o,n,e)},It.addAll=function Ps(e){var o,n,v,_,u=e.length,E=new Array(u),T=new Array(u),S=1/0,P=1/0,R=-1/0,j=-1/0;for(n=0;n<u;++n)isNaN(v=+this._x.call(null,o=e[n]))||isNaN(_=+this._y.call(null,o))||(E[n]=v,T[n]=_,v<S&&(S=v),v>R&&(R=v),_<P&&(P=_),_>j&&(j=_));if(S>R||P>j)return this;for(this.cover(S,P).cover(R,j),n=0;n<u;++n)Ir(this,E[n],T[n],e[n]);return this},It.cover=function Ds(e,o){if(isNaN(e=+e)||isNaN(o=+o))return this;var n=this._x0,u=this._y0,v=this._x1,_=this._y1;if(isNaN(n))v=(n=Math.floor(e))+1,_=(u=Math.floor(o))+1;else{for(var S,P,E=v-n,T=this._root;n>e||e>=v||u>o||o>=_;)switch(P=(o<u)<<1|e<n,S=new Array(4),S[P]=T,T=S,E*=2,P){case 0:v=n+E,_=u+E;break;case 1:n=v-E,_=u+E;break;case 2:v=n+E,u=_-E;break;case 3:n=v-E,u=_-E}this._root&&this._root.length&&(this._root=T)}return this._x0=n,this._y0=u,this._x1=v,this._y1=_,this},It.data=function Gs(){var e=[];return this.visit(function(o){if(!o.length)do{e.push(o.data)}while(o=o.next)}),e},It.extent=function Zs(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},It.find=function Us(e,o,n){var u,E,T,S,P,ot,et,v=this._x0,_=this._y0,R=this._x1,j=this._y1,J=[],q=this._root;for(q&&J.push(new Ot(q,v,_,R,j)),null==n?n=1/0:(v=e-n,_=o-n,R=e+n,j=o+n,n*=n);ot=J.pop();)if(!(!(q=ot.node)||(E=ot.x0)>R||(T=ot.y0)>j||(S=ot.x1)<v||(P=ot.y1)<_))if(q.length){var ht=(E+S)/2,ct=(T+P)/2;J.push(new Ot(q[3],ht,ct,S,P),new Ot(q[2],E,ct,ht,P),new Ot(q[1],ht,T,S,ct),new Ot(q[0],E,T,ht,ct)),(et=(o>=ct)<<1|e>=ht)&&(ot=J[J.length-1],J[J.length-1]=J[J.length-1-et],J[J.length-1-et]=ot)}else{var yt=e-+this._x.call(null,q.data),pt=o-+this._y.call(null,q.data),Et=yt*yt+pt*pt;if(Et<n){var Ct=Math.sqrt(n=Et);v=e-Ct,_=o-Ct,R=e+Ct,j=o+Ct,u=q.data}}return u},It.remove=function Bs(e){if(isNaN(R=+this._x.call(null,e))||isNaN(j=+this._y.call(null,e)))return this;var o,u,v,_,R,j,J,q,ot,et,ht,ct,n=this._root,E=this._x0,T=this._y0,S=this._x1,P=this._y1;if(!n)return this;if(n.length)for(;;){if((ot=R>=(J=(E+S)/2))?E=J:S=J,(et=j>=(q=(T+P)/2))?T=q:P=q,o=n,!(n=n[ht=et<<1|ot]))return this;if(!n.length)break;(o[ht+1&3]||o[ht+2&3]||o[ht+3&3])&&(u=o,ct=ht)}for(;n.data!==e;)if(v=n,!(n=n.next))return this;return(_=n.next)&&delete n.next,v?(_?v.next=_:delete v.next,this):o?(_?o[ht]=_:delete o[ht],(n=o[0]||o[1]||o[2]||o[3])&&n===(o[3]||o[2]||o[1]||o[0])&&!n.length&&(u?u[ct]=n:this._root=n),this):(this._root=_,this)},It.removeAll=function Hs(e){for(var o=0,n=e.length;o<n;++o)this.remove(e[o]);return this},It.root=function Rs(){return this._root},It.size=function Vs(){var e=0;return this.visit(function(o){if(!o.length)do{++e}while(o=o.next)}),e},It.visit=function zs(e){var n,v,_,E,T,S,o=[],u=this._root;for(u&&o.push(new Ot(u,this._x0,this._y0,this._x1,this._y1));n=o.pop();)if(!e(u=n.node,_=n.x0,E=n.y0,T=n.x1,S=n.y1)&&u.length){var P=(_+T)/2,R=(E+S)/2;(v=u[3])&&o.push(new Ot(v,P,R,T,S)),(v=u[2])&&o.push(new Ot(v,_,R,P,S)),(v=u[1])&&o.push(new Ot(v,P,E,T,R)),(v=u[0])&&o.push(new Ot(v,_,E,P,R))}return this},It.visitAfter=function Ys(e){var u,o=[],n=[];for(this._root&&o.push(new Ot(this._root,this._x0,this._y0,this._x1,this._y1));u=o.pop();){var v=u.node;if(v.length){var _,E=u.x0,T=u.y0,S=u.x1,P=u.y1,R=(E+S)/2,j=(T+P)/2;(_=v[0])&&o.push(new Ot(_,E,T,R,j)),(_=v[1])&&o.push(new Ot(_,R,T,S,j)),(_=v[2])&&o.push(new Ot(_,E,j,R,P)),(_=v[3])&&o.push(new Ot(_,R,j,S,P))}n.push(u)}for(;u=n.pop();)e(u.node,u.x0,u.y0,u.x1,u.y1);return this},It.x=function Js(e){return arguments.length?(this._x=e,this):this._x},It.y=function Xs(e){return arguments.length?(this._y=e,this):this._y};var Gt="$";function tn(){}function Pr(e,o){var n=new tn;if(e instanceof tn)e.each(function(T,S){n.set(S,T)});else if(Array.isArray(e)){var _,u=-1,v=e.length;if(null==o)for(;++u<v;)n.set(u,e[u]);else for(;++u<v;)n.set(o(_=e[u],u,e),_)}else if(e)for(var E in e)n.set(E,e[E]);return n}tn.prototype=Pr.prototype={constructor:tn,has:function(e){return Gt+e in this},get:function(e){return this[Gt+e]},set:function(e,o){return this[Gt+e]=o,this},remove:function(e){var o=Gt+e;return o in this&&delete this[o]},clear:function(){for(var e in this)e[0]===Gt&&delete this[e]},keys:function(){var e=[];for(var o in this)o[0]===Gt&&e.push(o.slice(1));return e},values:function(){var e=[];for(var o in this)o[0]===Gt&&e.push(this[o]);return e},entries:function(){var e=[];for(var o in this)o[0]===Gt&&e.push({key:o.slice(1),value:this[o]});return e},size:function(){var e=0;for(var o in this)o[0]===Gt&&++e;return e},empty:function(){for(var e in this)if(e[0]===Gt)return!1;return!0},each:function(e){for(var o in this)o[0]===Gt&&e(this[o],o.slice(1),this)}};const An=Pr;function en(){}var ae=An.prototype;function ea(e){return e.index}function Zr(e,o){var n=e.get(o);if(!n)throw new Error("missing: "+o);return n}function Ur(e){var u,_,E,T,S,o=ea,n=function R(et){return 1/Math.min(T[et.source.index],T[et.target.index])},v=At(30),P=1;function j(et){for(var ht=0,ct=e.length;ht<P;++ht)for(var pt,Et,Ct,Lt,kt,Ut,Nt,yt=0;yt<ct;++yt)Lt=(Ct=(pt=e[yt]).target).x+Ct.vx-(Et=pt.source).x-Et.vx||qt(),kt=Ct.y+Ct.vy-Et.y-Et.vy||qt(),kt*=Ut=((Ut=Math.sqrt(Lt*Lt+kt*kt))-_[yt])/Ut*et*u[yt],Ct.vx-=(Lt*=Ut)*(Nt=S[yt]),Ct.vy-=kt*Nt,Et.vx+=Lt*(Nt=1-Nt),Et.vy+=kt*Nt}function J(){if(E){var et,pt,ht=E.length,ct=e.length,yt=An(E,o);for(et=0,T=new Array(ht);et<ct;++et)(pt=e[et]).index=et,"object"!=typeof pt.source&&(pt.source=Zr(yt,pt.source)),"object"!=typeof pt.target&&(pt.target=Zr(yt,pt.target)),T[pt.source.index]=(T[pt.source.index]||0)+1,T[pt.target.index]=(T[pt.target.index]||0)+1;for(et=0,S=new Array(ct);et<ct;++et)S[et]=T[(pt=e[et]).source.index]/(T[pt.source.index]+T[pt.target.index]);u=new Array(ct),q(),_=new Array(ct),ot()}}function q(){if(E)for(var et=0,ht=e.length;et<ht;++et)u[et]=+n(e[et],et,e)}function ot(){if(E)for(var et=0,ht=e.length;et<ht;++et)_[et]=+v(e[et],et,e)}return null==e&&(e=[]),j.initialize=function(et){E=et,J()},j.links=function(et){return arguments.length?(e=et,J(),j):e},j.id=function(et){return arguments.length?(o=et,j):o},j.iterations=function(et){return arguments.length?(P=+et,j):P},j.strength=function(et){return arguments.length?(n="function"==typeof et?et:At(+et),q(),j):n},j.distance=function(et){return arguments.length?(v="function"==typeof et?et:At(+et),ot(),j):v},j}function na(e){return e.x}function ra(e){return e.y}en.prototype=function ta(e,o){var n=new en;if(e instanceof en)e.each(function(_){n.add(_)});else if(e){var u=-1,v=e.length;if(null==o)for(;++u<v;)n.add(e[u]);else for(;++u<v;)n.add(o(e[u],u,e))}return n}.prototype={constructor:en,has:ae.has,add:function(e){return this[Gt+(e+="")]=e,this},remove:ae.remove,clear:ae.clear,values:ae.keys,size:ae.size,empty:ae.empty,each:ae.each};var oa=Math.PI*(3-Math.sqrt(5));function Br(e){var o,n=1,u=.001,v=1-Math.pow(u,1/300),_=0,E=.6,T=An(),S=je(R),P=un("tick","end");function R(){j(),P.call("tick",o),n<u&&(S.stop(),P.call("end",o))}function j(ot){var et,ct,ht=e.length;void 0===ot&&(ot=1);for(var yt=0;yt<ot;++yt)for(n+=(_-n)*v,T.each(function(pt){pt(n)}),et=0;et<ht;++et)null==(ct=e[et]).fx?ct.x+=ct.vx*=E:(ct.x=ct.fx,ct.vx=0),null==ct.fy?ct.y+=ct.vy*=E:(ct.y=ct.fy,ct.vy=0);return o}function J(){for(var ht,ot=0,et=e.length;ot<et;++ot){if((ht=e[ot]).index=ot,null!=ht.fx&&(ht.x=ht.fx),null!=ht.fy&&(ht.y=ht.fy),isNaN(ht.x)||isNaN(ht.y)){var ct=10*Math.sqrt(ot),yt=ot*oa;ht.x=ct*Math.cos(yt),ht.y=ct*Math.sin(yt)}(isNaN(ht.vx)||isNaN(ht.vy))&&(ht.vx=ht.vy=0)}}function q(ot){return ot.initialize&&ot.initialize(e),ot}return null==e&&(e=[]),J(),o={tick:j,restart:function(){return S.restart(R),o},stop:function(){return S.stop(),o},nodes:function(ot){return arguments.length?(e=ot,J(),T.each(q),o):e},alpha:function(ot){return arguments.length?(n=+ot,o):n},alphaMin:function(ot){return arguments.length?(u=+ot,o):u},alphaDecay:function(ot){return arguments.length?(v=+ot,o):+v},alphaTarget:function(ot){return arguments.length?(_=+ot,o):_},velocityDecay:function(ot){return arguments.length?(E=1-ot,o):1-E},force:function(ot,et){return arguments.length>1?(null==et?T.remove(ot):T.set(ot,q(et)),o):T.get(ot)},find:function(ot,et,ht){var pt,Et,Ct,Lt,kt,ct=0,yt=e.length;for(null==ht?ht=1/0:ht*=ht,ct=0;ct<yt;++ct)(Ct=(pt=ot-(Lt=e[ct]).x)*pt+(Et=et-Lt.y)*Et)<ht&&(kt=Lt,ht=Ct);return kt},on:function(ot,et){return arguments.length>1?(P.on(ot,et),o):P.on(ot)}}}function Hr(){var e,o,n,v,u=At(-30),_=1,E=1/0,T=.81;function S(J){var q,ot=e.length,et=Cn(e,na,ra).visitAfter(R);for(n=J,q=0;q<ot;++q)o=e[q],et.visit(j)}function P(){if(e){var J,ot,q=e.length;for(v=new Array(q),J=0;J<q;++J)v[(ot=e[J]).index]=+u(ot,J,e)}}function R(J){var ot,et,ct,yt,pt,q=0,ht=0;if(J.length){for(ct=yt=pt=0;pt<4;++pt)(ot=J[pt])&&(et=Math.abs(ot.value))&&(q+=ot.value,ht+=et,ct+=et*ot.x,yt+=et*ot.y);J.x=ct/ht,J.y=yt/ht}else{(ot=J).x=ot.data.x,ot.y=ot.data.y;do{q+=v[ot.data.index]}while(ot=ot.next)}J.value=q}function j(J,q,ot,et){if(!J.value)return!0;var ht=J.x-o.x,ct=J.y-o.y,yt=et-q,pt=ht*ht+ct*ct;if(yt*yt/T<pt)return pt<E&&(0===ht&&(pt+=(ht=qt())*ht),0===ct&&(pt+=(ct=qt())*ct),pt<_&&(pt=Math.sqrt(_*pt)),o.vx+=ht*J.value*n/pt,o.vy+=ct*J.value*n/pt),!0;if(!(J.length||pt>=E)){(J.data!==o||J.next)&&(0===ht&&(pt+=(ht=qt())*ht),0===ct&&(pt+=(ct=qt())*ct),pt<_&&(pt=Math.sqrt(_*pt)));do{J.data!==o&&(o.vx+=ht*(yt=v[J.data.index]*n/pt),o.vy+=ct*yt)}while(J=J.next)}}return S.initialize=function(J){e=J,P()},S.strength=function(J){return arguments.length?(u="function"==typeof J?J:At(+J),P(),S):u},S.distanceMin=function(J){return arguments.length?(_=J*J,S):Math.sqrt(_)},S.distanceMax=function(J){return arguments.length?(E=J*J,S):Math.sqrt(E)},S.theta=function(J){return arguments.length?(T=J*J,S):Math.sqrt(T)},S}function sa(e,o,n){var u,_,E,v=At(.1);function T(P){for(var R=0,j=u.length;R<j;++R){var J=u[R],q=J.x-o||1e-6,ot=J.y-n||1e-6,et=Math.sqrt(q*q+ot*ot),ht=(E[R]-et)*_[R]*P/et;J.vx+=q*ht,J.vy+=ot*ht}}function S(){if(u){var P,R=u.length;for(_=new Array(R),E=new Array(R),P=0;P<R;++P)E[P]=+e(u[P],P,u),_[P]=isNaN(E[P])?0:+v(u[P],P,u)}}return"function"!=typeof e&&(e=At(+e)),null==o&&(o=0),null==n&&(n=0),T.initialize=function(P){u=P,S()},T.strength=function(P){return arguments.length?(v="function"==typeof P?P:At(+P),S(),T):v},T.radius=function(P){return arguments.length?(e="function"==typeof P?P:At(+P),S(),T):e},T.x=function(P){return arguments.length?(o=+P,T):o},T.y=function(P){return arguments.length?(n=+P,T):n},T}function aa(e){var n,u,v,o=At(.1);function _(T){for(var R,S=0,P=n.length;S<P;++S)(R=n[S]).vx+=(v[S]-R.x)*u[S]*T}function E(){if(n){var T,S=n.length;for(u=new Array(S),v=new Array(S),T=0;T<S;++T)u[T]=isNaN(v[T]=+e(n[T],T,n))?0:+o(n[T],T,n)}}return"function"!=typeof e&&(e=At(null==e?0:+e)),_.initialize=function(T){n=T,E()},_.strength=function(T){return arguments.length?(o="function"==typeof T?T:At(+T),E(),_):o},_.x=function(T){return arguments.length?(e="function"==typeof T?T:At(+T),E(),_):e},_}function ua(e){var n,u,v,o=At(.1);function _(T){for(var R,S=0,P=n.length;S<P;++S)(R=n[S]).vy+=(v[S]-R.y)*u[S]*T}function E(){if(n){var T,S=n.length;for(u=new Array(S),v=new Array(S),T=0;T<S;++T)u[T]=isNaN(v[T]=+e(n[T],T,n))?0:+o(n[T],T,n)}}return"function"!=typeof e&&(e=At(null==e?0:+e)),_.initialize=function(T){n=T,E()},_.strength=function(T){return arguments.length?(o="function"==typeof T?T:At(+T),E(),_):o},_.y=function(T){return arguments.length?(e="function"==typeof T?T:At(+T),E(),_):e},_}var ha=i(7824);function la(e,o,n){var u=new Ae,v=o;return null==o?(u.restart(e,o,n),u):(o=+o,n=null==n?le():+n,u.restart(function _(E){E+=v,u.restart(_,v+=o,n),e(E)},o,n),u)}const fa=["linkTemplate"],ca=["nodeTemplate"],da=["clusterTemplate"],pa=["defsTemplate"],ga=["miniMapNodeTemplate"],ma=["nodeElement"],va=["linkElement"];function ya(e,o){if(1&e&&(t.O4$(),t.GkF(0,14)),2&e){const n=t.oxw(2);t.Q6J("ngTemplateOutlet",n.defsTemplate)}}function xa(e,o){if(1&e&&(t.O4$(),t._UZ(0,"path",15)),2&e){const n=o.$implicit;t.uIk("d",n.textPath)("id",n.id)}}const Le=function(e){return{$implicit:e}};function _a(e,o){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const n=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.clusterTemplate)("ngTemplateOutletContext",t.VKq(2,Le,n))}}function wa(e,o){if(1&e&&(t.O4$(),t.TgZ(0,"g",21),t._UZ(1,"rect"),t.TgZ(2,"text",22),t._uU(3),t.qZA()()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.uIk("width",n.dimension.width)("height",n.dimension.height)("fill",null==n.data?null:n.data.color),t.xp6(1),t.uIk("x",10)("y",n.dimension.height/2),t.xp6(1),t.hij(" ",n.label," ")}}function ba(e,o){if(1&e){const n=t.EpF();t.O4$(),t.TgZ(0,"g",16,17),t.NdJ("click",function(){const _=t.CHM(n).$implicit,E=t.oxw(2);return t.KtG(E.onClick(_))}),t.YNc(2,_a,1,4,"ng-container",18),t.YNc(3,wa,4,6,"g",19),t.qZA()}if(2&e){const n=o.$implicit,u=t.oxw(2);t.ekj("old-node",u.animate&&u.oldClusters.has(n.id)),t.Q6J("id",n.id),t.uIk("transform",n.transform),t.xp6(2),t.Q6J("ngIf",u.clusterTemplate),t.xp6(1),t.Q6J("ngIf",!u.clusterTemplate)}}function Ea(e,o){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const n=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.linkTemplate)("ngTemplateOutletContext",t.VKq(2,Le,n))}}function Ca(e,o){if(1&e&&(t.O4$(),t._UZ(0,"path",26)),2&e){const n=t.oxw().$implicit;t.uIk("d",n.line)}}function Ta(e,o){if(1&e&&(t.O4$(),t.TgZ(0,"g",23,24),t.YNc(2,Ea,1,4,"ng-container",18),t.YNc(3,Ca,1,1,"path",25),t.qZA()),2&e){const n=o.$implicit,u=t.oxw(2);t.Q6J("id",n.id),t.xp6(2),t.Q6J("ngIf",u.linkTemplate),t.xp6(1),t.Q6J("ngIf",!u.linkTemplate)}}function Aa(e,o){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const n=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Le,n))}}function Ma(e,o){if(1&e&&(t.O4$(),t._UZ(0,"circle",30)),2&e){const n=t.oxw().$implicit;t.uIk("cx",n.dimension.width/2)("cy",n.dimension.height/2)("fill",null==n.data?null:n.data.color)}}function ka(e,o){if(1&e){const n=t.EpF();t.O4$(),t.TgZ(0,"g",27,28),t.NdJ("click",function(){const _=t.CHM(n).$implicit,E=t.oxw(2);return t.KtG(E.onClick(_))})("mousedown",function(v){const E=t.CHM(n).$implicit,T=t.oxw(2);return t.KtG(T.onNodeMouseDown(v,E))}),t.YNc(2,Aa,1,4,"ng-container",18),t.YNc(3,Ma,1,3,"circle",29),t.qZA()}if(2&e){const n=o.$implicit,u=t.oxw(2);t.ekj("old-node",u.animate&&u.oldNodes.has(n.id)),t.Q6J("id",n.id),t.uIk("transform",n.transform),t.xp6(2),t.Q6J("ngIf",u.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!u.nodeTemplate)}}function Na(e,o){if(1&e){const n=t.EpF();t.O4$(),t.TgZ(0,"g",4),t.NdJ("touchstart",function(v){t.CHM(n);const _=t.oxw();return t.KtG(_.onTouchStart(v))})("touchend",function(v){t.CHM(n);const _=t.oxw();return t.KtG(_.onTouchEnd(v))}),t.TgZ(1,"defs"),t.YNc(2,ya,1,1,"ng-container",5),t.YNc(3,xa,1,2,"path",6),t.qZA(),t.TgZ(4,"rect",7),t.NdJ("mousedown",function(){t.CHM(n);const v=t.oxw();return t.KtG(v.isPanning=!0)}),t.qZA(),t.Hsn(5),t.TgZ(6,"g",8),t.YNc(7,ba,4,6,"g",9),t.qZA(),t.TgZ(8,"g",10),t.YNc(9,Ta,4,3,"g",11),t.qZA(),t.TgZ(10,"g",12),t.YNc(11,ka,4,6,"g",13),t.qZA()()}if(2&e){const n=t.oxw();t.uIk("transform",n.transform),t.xp6(2),t.Q6J("ngIf",n.defsTemplate),t.xp6(1),t.Q6J("ngForOf",n.graph.edges),t.xp6(1),t.uIk("width",100*n.dims.width)("height",100*n.dims.height)("transform","translate("+50*(-n.dims.width||0)+","+50*(-n.dims.height||0)+")"),t.xp6(3),t.Q6J("ngForOf",n.graph.clusters)("ngForTrackBy",n.trackNodeBy),t.xp6(2),t.Q6J("ngForOf",n.graph.edges)("ngForTrackBy",n.trackLinkBy),t.xp6(2),t.Q6J("ngForOf",n.graph.nodes)("ngForTrackBy",n.trackNodeBy)}}function Sa(e,o){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const n=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.miniMapNodeTemplate)("ngTemplateOutletContext",t.VKq(2,Le,n))}}function Oa(e,o){if(1&e&&(t.O4$(),t.GkF(0,20)),2&e){const n=t.oxw().$implicit,u=t.oxw(2);t.Q6J("ngTemplateOutlet",u.nodeTemplate)("ngTemplateOutletContext",t.VKq(2,Le,n))}}function Ia(e,o){if(1&e&&(t.O4$(),t._UZ(0,"circle",30)),2&e){const n=t.oxw().$implicit,u=t.oxw(2);t.uIk("cx",n.dimension.width/2/u.minimapScaleCoefficient)("cy",n.dimension.height/2/u.minimapScaleCoefficient)("fill",null==n.data?null:n.data.color)}}function La(e,o){if(1&e&&(t.O4$(),t.TgZ(0,"g",36,28),t.YNc(2,Sa,1,4,"ng-container",18),t.YNc(3,Oa,1,4,"ng-container",18),t.YNc(4,Ia,1,3,"circle",29),t.qZA()),2&e){const n=o.$implicit,u=t.oxw(2);t.ekj("old-node",u.animate&&u.oldNodes.has(n.id)),t.Q6J("id",n.id),t.uIk("transform",n.transform),t.xp6(2),t.Q6J("ngIf",u.miniMapNodeTemplate),t.xp6(1),t.Q6J("ngIf",!u.miniMapNodeTemplate&&u.nodeTemplate),t.xp6(1),t.Q6J("ngIf",!u.nodeTemplate&&!u.miniMapNodeTemplate)}}function Fa(e,o){if(1&e){const n=t.EpF();t.O4$(),t.TgZ(0,"g",31)(1,"rect",32),t.NdJ("mousedown",function(v){t.CHM(n);const _=t.oxw();return t.KtG(_.onMinimapPanTo(v))}),t.qZA(),t.TgZ(2,"g")(3,"g",33),t.YNc(4,La,5,7,"g",34),t.qZA(),t.TgZ(5,"rect",35),t.NdJ("mousedown",function(){t.CHM(n);const v=t.oxw();return t.KtG(v.onMinimapDragMouseDown())}),t.qZA()()()}if(2&e){const n=t.oxw();t.uIk("transform",n.minimapTransform)("clip-path","url(#"+n.minimapClipPathId+")"),t.xp6(1),t.uIk("width",n.graphDims.width/n.minimapScaleCoefficient)("height",n.graphDims.height/n.minimapScaleCoefficient),t.xp6(1),t.Udp("transform","translate("+-n.minimapOffsetX/n.minimapScaleCoefficient+"px,"+-n.minimapOffsetY/n.minimapScaleCoefficient+"px)"),t.xp6(1),t.Udp("transform","scale("+1/n.minimapScaleCoefficient+")"),t.xp6(1),t.Q6J("ngForOf",n.graph.nodes)("ngForTrackBy",n.trackNodeBy),t.xp6(1),t.ekj("panning",n.isMinimapPanning),t.uIk("transform","translate("+n.panOffsetX/n.zoomLevel/-n.minimapScaleCoefficient+","+n.panOffsetY/n.zoomLevel/-n.minimapScaleCoefficient+")")("width",n.width/n.minimapScaleCoefficient/n.zoomLevel)("height",n.height/n.minimapScaleCoefficient/n.zoomLevel)}}const Pa=["*"],Rr={};function $t(){let e=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return e=`a${e}`,Rr[e]?$t():(Rr[e]=!0,e)}var ge=(()=>{return(e=ge||(ge={})).Both="both",e.Horizontal="horizontal",e.Vertical="vertical",ge;var e})(),me=(()=>{return(e=me||(me={})).UpperLeft="UpperLeft",e.UpperRight="UpperRight",me;var e})();function Da(e,o,n){n=n||{};let u,v,_,E=null,T=0;function S(){T=!1===n.leading?0:+new Date,E=null,_=e.apply(u,v)}return function(...P){const R=+new Date;!T&&!1===n.leading&&(T=R);const j=o-(R-T);return u=this,v=P,j<=0?(clearTimeout(E),E=null,T=R,_=e.apply(u,v)):!E&&!1!==n.trailing&&(E=setTimeout(S,j)),_}}function Ga(e,o){return function(u,v,_){return{configurable:!0,enumerable:_.enumerable,get:function(){return Object.defineProperty(this,v,{configurable:!0,enumerable:_.enumerable,value:Da(_.value,e,o)}),this[v]}}}}const Vr=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class Za{constructor(o,n,u){"string"==typeof o&&(o=Vr.find(v=>v.name===o)),this.colorDomain=o.domain,this.domain=n,this.customColors=u,this.scale=this.generateColorScheme(o,this.domain)}generateColorScheme(o,n){return"string"==typeof o&&(o=Vr.find(u=>u.name===o)),Or().range(o.domain).domain(n)}getColor(o){if(null==o)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(o);const n=o.toString();let u;return this.customColors&&this.customColors.length>0&&(u=this.customColors.find(v=>v.name.toLowerCase()===n.toLowerCase())),u?u.value:this.scale(o)}}let Ba=(()=>{class e{constructor(n,u){this.element=n,this.zone=u,this.visible=new t.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const n=()=>{if(!this.element)return;const{offsetHeight:u,offsetWidth:v}=this.element.nativeElement;u&&v?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n())})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(t.R0b))},e.\u0275dir=t.lG2({type:e,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),e})();var te=(()=>{return(e=te||(te={})).LEFT_TO_RIGHT="LR",e.RIGHT_TO_LEFT="RL",e.TOP_TO_BOTTOM="TB",e.BOTTOM_TO_TOM="BT",te;var e})();function ve(e){return"string"==typeof e?{id:e,x:0,y:0}:e}function Yr(e,o){return"number"==typeof o?e[o]:o}const jr={dagre:class Ha{constructor(){this.defaultSettings={orientation:te.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(o){this.createDagreGraph(o),pe.layout(this.dagreGraph),o.edgeLabels=this.dagreGraph._edgeLabels;for(const n in this.dagreGraph._nodes){const u=this.dagreGraph._nodes[n],v=o.nodes.find(_=>_.id===u.id);v.position={x:u.x,y:u.y},v.dimension={width:u.width,height:u.height}}return o}updateEdge(o,n){const u=o.nodes.find(S=>S.id===n.source),v=o.nodes.find(S=>S.id===n.target),_=u.position.y<=v.position.y?-1:1;return n.points=[{x:u.position.x,y:u.position.y-_*(u.dimension.height/2)},{x:v.position.x,y:v.position.y+_*(v.dimension.height/2)}],o}createDagreGraph(o){const n=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new pe.graphlib.Graph({compound:n.compound,multigraph:n.multigraph}),this.dagreGraph.setGraph({rankdir:n.orientation,marginx:n.marginX,marginy:n.marginY,edgesep:n.edgePadding,ranksep:n.rankPadding,nodesep:n.nodePadding,align:n.align,acyclicer:n.acyclicer,ranker:n.ranker,multigraph:n.multigraph,compound:n.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=o.nodes.map(u=>{const v=Object.assign({},u);return v.width=u.dimension.width,v.height=u.dimension.height,v.x=u.position.x,v.y=u.position.y,v}),this.dagreEdges=o.edges.map(u=>{const v=Object.assign({},u);return v.id||(v.id=$t()),v});for(const u of this.dagreNodes)u.width||(u.width=20),u.height||(u.height=30),this.dagreGraph.setNode(u.id,u);for(const u of this.dagreEdges)n.multigraph?this.dagreGraph.setEdge(u.source,u.target,u,u.id):this.dagreGraph.setEdge(u.source,u.target);return this.dagreGraph}},dagreCluster:class Ra{constructor(){this.defaultSettings={orientation:te.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(o){this.createDagreGraph(o),pe.layout(this.dagreGraph),o.edgeLabels=this.dagreGraph._edgeLabels;const n=u=>{const v=this.dagreGraph._nodes[u.id];return{...u,position:{x:v.x,y:v.y},dimension:{width:v.width,height:v.height}}};return o.clusters=(o.clusters||[]).map(n),o.nodes=o.nodes.map(n),o}updateEdge(o,n){const u=o.nodes.find(S=>S.id===n.source),v=o.nodes.find(S=>S.id===n.target),_=u.position.y<=v.position.y?-1:1;return n.points=[{x:u.position.x,y:u.position.y-_*(u.dimension.height/2)},{x:v.position.x,y:v.position.y+_*(v.dimension.height/2)}],o}createDagreGraph(o){const n=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new pe.graphlib.Graph({compound:n.compound,multigraph:n.multigraph}),this.dagreGraph.setGraph({rankdir:n.orientation,marginx:n.marginX,marginy:n.marginY,edgesep:n.edgePadding,ranksep:n.rankPadding,nodesep:n.nodePadding,align:n.align,acyclicer:n.acyclicer,ranker:n.ranker,multigraph:n.multigraph,compound:n.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=o.nodes.map(u=>{const v=Object.assign({},u);return v.width=u.dimension.width,v.height=u.dimension.height,v.x=u.position.x,v.y=u.position.y,v}),this.dagreClusters=o.clusters||[],this.dagreEdges=o.edges.map(u=>{const v=Object.assign({},u);return v.id||(v.id=$t()),v});for(const u of this.dagreNodes)this.dagreGraph.setNode(u.id,u);for(const u of this.dagreClusters)this.dagreGraph.setNode(u.id,u),u.childNodeIds.forEach(v=>{this.dagreGraph.setParent(v,u.id)});for(const u of this.dagreEdges)n.multigraph?this.dagreGraph.setEdge(u.source,u.target,u,u.id):this.dagreGraph.setEdge(u.source,u.target);return this.dagreGraph}},dagreNodesOnly:class za{constructor(){this.defaultSettings={orientation:te.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(o){this.createDagreGraph(o),pe.layout(this.dagreGraph),o.edgeLabels=this.dagreGraph._edgeLabels;for(const n in this.dagreGraph._nodes){const u=this.dagreGraph._nodes[n],v=o.nodes.find(_=>_.id===u.id);v.position={x:u.x,y:u.y},v.dimension={width:u.width,height:u.height}}for(const n of o.edges)this.updateEdge(o,n);return o}updateEdge(o,n){const u=o.nodes.find(ot=>ot.id===n.source),v=o.nodes.find(ot=>ot.id===n.target),_="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",E="y"===_?"x":"y",T="y"===_?"height":"width",S=u.position[_]<=v.position[_]?-1:1,P={[E]:u.position[E],[_]:u.position[_]-S*(u.dimension[T]/2)},R={[E]:v.position[E],[_]:v.position[_]+S*(v.dimension[T]/2)},j=this.settings.curveDistance||this.defaultSettings.curveDistance;n.points=[P,{[E]:P[E],[_]:P[_]-S*j},{[E]:R[E],[_]:R[_]+S*j},R];const q=o.edgeLabels[`${n.source}\x01${n.target}\x01\0`];return q&&(q.points=n.points),o}createDagreGraph(o){const n=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new pe.graphlib.Graph({compound:n.compound,multigraph:n.multigraph}),this.dagreGraph.setGraph({rankdir:n.orientation,marginx:n.marginX,marginy:n.marginY,edgesep:n.edgePadding,ranksep:n.rankPadding,nodesep:n.nodePadding,align:n.align,acyclicer:n.acyclicer,ranker:n.ranker,multigraph:n.multigraph,compound:n.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=o.nodes.map(u=>{const v=Object.assign({},u);return v.width=u.dimension.width,v.height=u.dimension.height,v.x=u.position.x,v.y=u.position.y,v}),this.dagreEdges=o.edges.map(u=>{const v=Object.assign({},u);return v.id||(v.id=$t()),v});for(const u of this.dagreNodes)u.width||(u.width=20),u.height||(u.height=30),this.dagreGraph.setNode(u.id,u);for(const u of this.dagreEdges)n.multigraph?this.dagreGraph.setEdge(u.source,u.target,u,u.id):this.dagreGraph.setEdge(u.source,u.target);return this.dagreGraph}},d3ForceDirected:class Ya{constructor(){this.defaultSettings={force:Br().force("charge",Hr().strength(-150)).force("collide",Fr(5)),forceLink:Ur().id(o=>o.id).distance(()=>100)},this.settings={},this.outputGraph$=new xr.x}run(o){return this.inputGraph=o,this.d3Graph={nodes:[...this.inputGraph.nodes.map(n=>({...n}))],edges:[...this.inputGraph.edges.map(n=>({...n}))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(o,n){const u=Object.assign({},this.defaultSettings,this.settings);return u.force&&u.force.nodes(this.d3Graph.nodes).force("link",u.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(o){return this.outputGraph.nodes=this.d3Graph.nodes.map(n=>({...n,id:n.id||$t(),position:{x:n.x,y:n.y},dimension:{width:n.dimension&&n.dimension.width||20,height:n.dimension&&n.dimension.height||20},transform:`translate(${n.x-(n.dimension&&n.dimension.width||20)/2||0}, ${n.y-(n.dimension&&n.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(n=>({...n,source:ve(n.source).id,target:ve(n.target).id,points:[{x:ve(n.source).x,y:ve(n.source).y},{x:ve(n.target).x,y:ve(n.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(o,n){this.settings.force.alphaTarget(.3).restart();const u=this.d3Graph.nodes.find(v=>v.id===o.id);u&&(this.draggingStart={x:n.x-u.x,y:n.y-u.y},u.fx=n.x-this.draggingStart.x,u.fy=n.y-this.draggingStart.y)}onDrag(o,n){if(!o)return;const u=this.d3Graph.nodes.find(v=>v.id===o.id);u&&(u.fx=n.x-this.draggingStart.x,u.fy=n.y-this.draggingStart.y)}onDragEnd(o,n){if(!o)return;const u=this.d3Graph.nodes.find(v=>v.id===o.id);u&&(this.settings.force.alphaTarget(0),u.fx=void 0,u.fy=void 0)}},colaForceDirected:class ja{constructor(){this.defaultSettings={force:(0,ha.d3adaptor)({...m,...s,...p}).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new xr.x}run(o){return this.inputGraph=o,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(n=>({...n,width:n.dimension?n.dimension.width:20,height:n.dimension?n.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(n=>({padding:5,groups:n.childNodeIds.map(u=>this.inputGraph.clusters.findIndex(v=>v.id===u)).filter(u=>u>=0),leaves:n.childNodeIds.map(u=>this.inputGraph.nodes.findIndex(v=>v.id===u)).filter(u=>u>=0)}))],links:[...this.inputGraph.edges.map(n=>{const u=this.inputGraph.nodes.findIndex(_=>n.source===_.id),v=this.inputGraph.nodes.findIndex(_=>n.target===_.id);if(-1!==u&&-1!==v)return{...n,source:u,target:v}}).filter(n=>!!n)],groupLinks:[...this.inputGraph.edges.map(n=>{const u=this.inputGraph.nodes.findIndex(_=>n.source===_.id),v=this.inputGraph.nodes.findIndex(_=>n.target===_.id);if(!(u>=0&&v>=0))return n}).filter(n=>!!n)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(o,n){const u=Object.assign({},this.defaultSettings,this.settings);return u.force&&u.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(o){return this.outputGraph.nodes=o.nodes.map(n=>({...n,id:n.id||$t(),position:{x:n.x,y:n.y},dimension:{width:n.dimension&&n.dimension.width||20,height:n.dimension&&n.dimension.height||20},transform:`translate(${n.x-(n.dimension&&n.dimension.width||20)/2||0}, ${n.y-(n.dimension&&n.dimension.height||20)/2||0})`})),this.outputGraph.edges=o.links.map(n=>{const u=Yr(o.nodes,n.source),v=Yr(o.nodes,n.target);return{...n,source:u.id,target:v.id,points:[u.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(u.bounds.cx(),u.bounds.cy())]}}).concat(o.groupLinks.map(n=>{const u=o.nodes.find(T=>T.id===n.source),v=o.nodes.find(T=>T.id===n.target),_=u||o.groups.find(T=>T.id===n.source),E=v||o.groups.find(T=>T.id===n.target);return{...n,source:_.id,target:E.id,points:[_.bounds.rayIntersection(E.bounds.cx(),E.bounds.cy()),E.bounds.rayIntersection(_.bounds.cx(),_.bounds.cy())]}})),this.outputGraph.clusters=o.groups.map((n,u)=>({...this.inputGraph.clusters[u],dimension:{width:n.bounds?n.bounds.width():20,height:n.bounds?n.bounds.height():20},position:{x:n.bounds?n.bounds.x+n.bounds.width()/2:0,y:n.bounds?n.bounds.y+n.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(o,n){const u=this.outputGraph.nodes.findIndex(_=>_.id===o.id),v=this.internalGraph.nodes[u];v&&(this.draggingStart={x:v.x-n.x,y:v.y-n.y},v.fixed=1,this.settings.force.start())}onDrag(o,n){if(!o)return;const u=this.outputGraph.nodes.findIndex(_=>_.id===o.id),v=this.internalGraph.nodes[u];v&&(v.x=this.draggingStart.x+n.x,v.y=this.draggingStart.y+n.y)}onDragEnd(o,n){if(!o)return;const u=this.outputGraph.nodes.findIndex(_=>_.id===o.id),v=this.internalGraph.nodes[u];v&&(v.fixed=0)}}};let Jr=(()=>{class e{getLayout(n){if(jr[n])return new jr[n];throw new Error(`Unknown layout type '${n}'`)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Ja=(()=>{class e{constructor(){this.mouseWheelUp=new t.vpe,this.mouseWheelDown=new t.vpe}onMouseWheelChrome(n){this.mouseWheelFunc(n)}onMouseWheelFirefox(n){this.mouseWheelFunc(n)}onWheel(n){this.mouseWheelFunc(n)}onMouseWheelIE(n){this.mouseWheelFunc(n)}mouseWheelFunc(n){window.event&&(n=window.event);const u=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail||n.deltaY||n.deltaX)),_=n.wheelDelta?u<0:u>0;(n.wheelDelta?u>0:u<0)?this.mouseWheelUp.emit(n):_&&this.mouseWheelDown.emit(n),n.returnValue=!1,n.preventDefault&&n.preventDefault()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=t.lG2({type:e,selectors:[["","mouseWheel",""]],hostBindings:function(n,u){1&n&&t.NdJ("mousewheel",function(_){return u.onMouseWheelChrome(_)})("DOMMouseScroll",function(_){return u.onMouseWheelFirefox(_)})("wheel",function(_){return u.onWheel(_)})("onmousewheel",function(_){return u.onMouseWheelIE(_)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),e})(),$r=(()=>{class e{constructor(n,u,v,_){this.el=n,this.zone=u,this.cd=v,this.layoutService=_,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=ge.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=me.UpperRight,this.scheme="cool",this.animations=!0,this.select=new t.vpe,this.activate=new t.vpe,this.deactivate=new t.vpe,this.zoomChange=new t.vpe,this.clickHandler=new t.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new _r.w0,this.subscriptions=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=E=>E.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(n){this.zoomTo(Number(n))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(n){this.panTo(Number(n),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(n){this.panTo(null,Number(n))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(n=>{this.panToNodeId(n)})),this.minimapClipPathId=`minimapClip${$t()}`}ngOnChanges(n){this.basicUpdate();const{layoutSettings:v}=n;this.setLayout(this.layout),v&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(n){this.initialized=!1,n||(n="dagre"),"string"==typeof n&&(this.layout=this.layoutService.getLayout(n),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(n){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=n)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy());for(const n of this.subscriptions)n.unsubscribe();this.subscriptions=null}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new Ba(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=Mi.beta(1)),this.zone.run(()=>{this.dims=function Ua({width:e,height:o}){let n=e,u=o;return n=Math.max(0,n),u=Math.max(0,u),{width:Math.floor(n),height:Math.floor(u)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new _r.w0;const n=u=>(u.meta||(u.meta={}),u.id||(u.id=$t()),u.dimension?u.meta.forceDimensions=void 0===u.meta.forceDimensions||u.meta.forceDimensions:(u.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},u.meta.forceDimensions=!1),u.position={x:0,y:0},u.data=u.data?u.data:{},u);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(n):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(n):[],edges:this.links.length>0?[...this.links].map(u=>(u.id||(u.id=$t()),u)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const n=this.layout.run(this.graph),u=n instanceof wr.y?n:(0,br.of)(n);this.graphSubscription.add(u.subscribe(v=>{this.graph=v,this.tick()})),0!==this.graph.nodes.length&&u.pipe((0,ms.P)()).subscribe(()=>this.applyNodeDimensions())}tick(){const n=new Set;this.graph.nodes.map(_=>{_.transform=`translate(${_.position.x-_.dimension.width/2||0}, ${_.position.y-_.dimension.height/2||0})`,_.data||(_.data={}),_.data.color=this.colors.getColor(this.groupResultsBy(_)),n.add(_.id)});const u=new Set;(this.graph.clusters||[]).map(_=>{_.transform=`translate(${_.position.x-_.dimension.width/2||0}, ${_.position.y-_.dimension.height/2||0})`,_.data||(_.data={}),_.data.color=this.colors.getColor(this.groupResultsBy(_)),u.add(_.id)}),setTimeout(()=>{this.oldNodes=n,this.oldClusters=u},500);const v=[];for(const _ in this.graph.edgeLabels){const E=this.graph.edgeLabels[_],T=_.replace(/[^\w-]*/g,""),S=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let P=this._oldLinks.find(S?et=>`${et.source}${et.target}${et.id}`===T:et=>`${et.source}${et.target}`===T);const R=this.graph.edges.find(S?et=>`${et.source}${et.target}${et.id}`===T:et=>`${et.source}${et.target}`===T);P?P.data&&R&&R.data&&JSON.stringify(P.data)!==JSON.stringify(R.data)&&(P.data=R.data):P=R||E,P.oldLine=P.line;const j=E.points,J=this.generateLine(j),q=Object.assign({},P);q.line=J,q.points=j,this.updateMidpointOnEdge(q,j);const ot=j[Math.floor(j.length/2)];ot&&(q.textTransform=`translate(${ot.x||0},${ot.y||0})`),q.textAngle=0,q.oldLine||(q.oldLine=q.line),this.calcDominantBaseline(q),v.push(q)}this.graph.edges=v,this.graph.edges&&(this._oldLinks=this.graph.edges.map(_=>{const E=Object.assign({},_);return E.oldLine=_.line,E})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case me.UpperLeft:return"";case me.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let n=1/0,u=-1/0,v=1/0,_=-1/0;for(let E=0;E<this.graph.nodes.length;E++){const T=this.graph.nodes[E];n=T.position.x<n?T.position.x:n,v=T.position.y<v?T.position.y:v,u=T.position.x+T.dimension.width>u?T.position.x+T.dimension.width:u,_=T.position.y+T.dimension.height>_?T.position.y+T.dimension.height:_}n-=100,v-=100,u+=100,_+=100,this.graphDims.width=u-n,this.graphDims.height=_-v,this.minimapOffsetX=n,this.minimapOffsetY=v}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(n=>{const u=n.nativeElement,v=this.graph.nodes.find(E=>E.id===u.id);if(!v)return;let _;try{if(_=u.getBBox(),!_.width||!_.height)return}catch{return}if(v.dimension.height=this.nodeHeight?v.dimension.height&&v.meta.forceDimensions?v.dimension.height:this.nodeHeight:v.dimension.height&&v.meta.forceDimensions?v.dimension.height:_.height,this.nodeMaxHeight&&(v.dimension.height=Math.max(v.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(v.dimension.height=Math.min(v.dimension.height,this.nodeMinHeight)),this.nodeWidth)v.dimension.width=v.dimension.width&&v.meta.forceDimensions?v.dimension.width:this.nodeWidth;else if(u.getElementsByTagName("text").length){let E;try{for(const T of u.getElementsByTagName("text")){const S=T.getBBox();E?(S.width>E.width&&(E.width=S.width),S.height>E.height&&(E.height=S.height)):E=S}}catch{return}v.dimension.width=v.dimension.width&&v.meta.forceDimensions?v.dimension.width:E.width+20}else v.dimension.width=v.dimension.width&&v.meta.forceDimensions?v.dimension.width:_.width;this.nodeMaxWidth&&(v.dimension.width=Math.max(v.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(v.dimension.width=Math.min(v.dimension.width,this.nodeMinWidth))})}redrawLines(n=this.animate){this.linkElements.map(u=>{const v=this.graph.edges.find(_=>_.id===u.nativeElement.id);v&&(Fn(u.nativeElement).select(".line").attr("d",v.oldLine).transition().ease(Hn).duration(n?500:0).attr("d",v.line),Fn(this.el.nativeElement).select(`#${v.id}`).attr("d",v.oldTextPath).transition().ease(Hn).duration(n?500:0).attr("d",v.textPath),this.updateMidpointOnEdge(v,v.points))})}calcDominantBaseline(n){const u=n.points[0],v=n.points[n.points.length-1];n.oldTextPath=n.textPath,v.x<u.x?(n.dominantBaseline="text-before-edge",n.textPath=this.generateLine([...n.points].reverse())):(n.dominantBaseline="text-after-edge",n.textPath=n.line)}generateLine(n){return function Li(){var e=Oi,o=Ii,n=He(!0),u=null,v=Si,_=null;function E(T){var S,R,J,P=T.length,j=!1;for(null==u&&(_=v(J=Ni())),S=0;S<=P;++S)!(S<P&&n(R=T[S],S,T))===j&&((j=!j)?_.lineStart():_.lineEnd()),j&&_.point(+e(R,S,T),+o(R,S,T));if(J)return _=null,J+""||null}return E.x=function(T){return arguments.length?(e="function"==typeof T?T:He(+T),E):e},E.y=function(T){return arguments.length?(o="function"==typeof T?T:He(+T),E):o},E.defined=function(T){return arguments.length?(n="function"==typeof T?T:He(!!T),E):n},E.curve=function(T){return arguments.length?(v=T,null!=u&&(_=v(u)),E):v},E.context=function(T){return arguments.length?(null==T?u=_=null:_=v(u=T),E):u},E}().x(v=>v.x).y(v=>v.y).curve(this.curve)(n)}onZoom(n,u){if(this.enableTrackpadSupport&&!n.ctrlKey)return void this.pan(-1*n.deltaX,-1*n.deltaY);const v=1+("in"===u?this.zoomSpeed:-this.zoomSpeed),_=this.zoomLevel*v;if(!(_<=this.minZoomLevel||_>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&n){const E=n.clientX,T=n.clientY,S=this.el.nativeElement.querySelector("svg"),P=S.querySelector("g.chart"),R=S.createSVGPoint();R.x=E,R.y=T;const j=R.matrixTransform(P.getScreenCTM().inverse());this.pan(j.x,j.y,!0),this.zoom(v),this.pan(-j.x,-j.y,!0)}else this.zoom(v)}pan(n,u,v=!1){const _=v?1:this.zoomLevel;this.transformationMatrix=Ie(this.transformationMatrix,Tr(n/_,u/_)),this.updateTransform()}panTo(n,u){null==n||isNaN(n)||null==u||isNaN(u)||(this.transformationMatrix=Ie(this.transformationMatrix,Tr((-this.panOffsetX-n*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-u*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(n){this.transformationMatrix=Ie(this.transformationMatrix,function As(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Ts(o)&&(o=e),{a:e,c:0,e:0,b:0,d:o,f:0}}(n,n)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(n){this.transformationMatrix.a=isNaN(n)?this.transformationMatrix.a:Number(n),this.transformationMatrix.d=isNaN(n)?this.transformationMatrix.d:Number(n),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(n){if(!this.draggingEnabled)return;const u=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(u,n),u.position.x+=n.movementX/this.zoomLevel,u.position.y+=n.movementY/this.zoomLevel,u.transform=`translate(${u.position.x-u.dimension.width/2}, ${u.position.y-u.dimension.height/2})`;for(const E of this.graph.edges)if((E.target===u.id||E.source===u.id||E.target.id===u.id||E.source.id===u.id)&&this.layout&&"string"!=typeof this.layout){const T=this.layout.updateEdge(this.graph,E),S=T instanceof wr.y?T:(0,br.of)(T);this.graphSubscription.add(S.subscribe(P=>{this.graph=P,this.redrawEdge(E)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(n){const u=this.generateLine(n.points);this.calcDominantBaseline(n),n.oldLine=n.line,n.line=u}updateTransform(){this.transform=function ks(e){return function Cr(e){return"matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")"}(e)}(function Os(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(e.a*o)/o,b:Math.round(e.b*o)/o,c:Math.round(e.c*o)/o,d:Math.round(e.d*o)/o,e:Math.round(e.e*o)/o,f:Math.round(e.f*o)/o}}(this.transformationMatrix,100))}onClick(n){this.select.emit(n)}onActivate(n){this.activeEntries.indexOf(n)>-1||(this.activeEntries=[n,...this.activeEntries],this.activate.emit({value:n,entries:this.activeEntries}))}onDeactivate(n){const u=this.activeEntries.indexOf(n);this.activeEntries.splice(u,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:n,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(n=>this.groupResultsBy(n)).reduce((n,u)=>-1!==n.indexOf(u)?n:n.concat([u]),[]).sort()}trackLinkBy(n,u){return u.id}trackNodeBy(n,u){return u.id}setColors(){this.colors=new Za(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(n){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,n):this.isDragging&&this.draggingEnabled&&this.onDrag(n)}onMouseDown(n){this.isMouseMoveCalled=!1}graphClick(n){this.isMouseMoveCalled||this.clickHandler.emit(n)}onTouchStart(n){this._touchLastX=n.changedTouches[0].clientX,this._touchLastY=n.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(n){if(this.isPanning&&this.panningEnabled){const u=n.changedTouches[0].clientX,v=n.changedTouches[0].clientY,_=u-this._touchLastX,E=v-this._touchLastY;this._touchLastX=u,this._touchLastY=v,this.pan(_,E)}}onTouchEnd(n){this.isPanning=!1}onMouseUp(n){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,n)}onNodeMouseDown(n,u){this.draggingEnabled&&(this.isDragging=!0,this.draggingNode=u,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(u,n))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(n){this.panTo((n.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(n.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let v=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);v<this.minZoomLevel&&(v=this.minZoomLevel),v>this.maxZoomLevel&&(v=this.maxZoomLevel),v!==this.zoomLevel&&(this.zoomLevel=v,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(n){const u=this.graph.nodes.find(v=>v.id===n);u&&this.panTo(u.position.x,u.position.y)}panWithConstraints(n,u){let v=u.movementX,_=u.movementY;switch(this.isMinimapPanning&&(v=-this.minimapScaleCoefficient*v*this.zoomLevel,_=-this.minimapScaleCoefficient*_*this.zoomLevel),n){case ge.Horizontal:this.pan(v,0);break;case ge.Vertical:this.pan(0,_);break;default:this.pan(v,_)}}updateMidpointOnEdge(n,u){if(n&&u)if(u.length%2==1)n.midPoint=u[Math.floor(u.length/2)];else{const v=u[u.length/2],_=u[u.length/2-1];n.midPoint={x:(v.x+_.x)/2,y:(v.y+_.y)/2}}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const n=this.getContainerDims();n&&(this.width=n.width,this.height=n.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let n,u;const v=this.el.nativeElement;if(null!==v.parentNode){const _=v.parentNode.getBoundingClientRect();n=_.width,u=_.height}return n&&u?{width:n,height:u}:null}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const u=(0,gs.R)(window,"resize").pipe((0,vs.b)(200)).subscribe(v=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=u}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(Jr))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ngx-graph"]],contentQueries:function(n,u,v){if(1&n&&(t.Suo(v,fa,5),t.Suo(v,ca,5),t.Suo(v,da,5),t.Suo(v,pa,5),t.Suo(v,ga,5)),2&n){let _;t.iGM(_=t.CRH())&&(u.linkTemplate=_.first),t.iGM(_=t.CRH())&&(u.nodeTemplate=_.first),t.iGM(_=t.CRH())&&(u.clusterTemplate=_.first),t.iGM(_=t.CRH())&&(u.defsTemplate=_.first),t.iGM(_=t.CRH())&&(u.miniMapNodeTemplate=_.first)}},viewQuery:function(n,u){if(1&n&&(t.Gf(ma,5),t.Gf(va,5)),2&n){let v;t.iGM(v=t.CRH())&&(u.nodeElements=v),t.iGM(v=t.CRH())&&(u.linkElements=v)}},hostBindings:function(n,u){1&n&&t.NdJ("mousemove",function(_){return u.onMouseMove(_)},!1,t.evT)("mousedown",function(_){return u.onMouseDown(_)},!1,t.evT)("click",function(_){return u.graphClick(_)},!1,t.evT)("touchmove",function(_){return u.onTouchMove(_)},!1,t.evT)("mouseup",function(_){return u.onMouseUp(_)},!1,t.evT)},inputs:{nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[t.TTD],ngContentSelectors:Pa,decls:6,vars:11,consts:[["mouseWheel","",1,"ngx-charts-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-charts"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(n,u){1&n&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("mouseWheelUp",function(_){return u.onZoom(_,"in")})("mouseWheelDown",function(_){return u.onZoom(_,"out")}),t.O4$(),t.TgZ(1,"svg",1),t.YNc(2,Na,12,12,"g",2),t.TgZ(3,"clipPath"),t._UZ(4,"rect"),t.qZA(),t.YNc(5,Fa,6,15,"g",3),t.qZA()()),2&n&&(t.Udp("width",u.width,"px"),t.Q6J("@animationState","active")("@.disabled",!u.animations),t.xp6(1),t.uIk("width",u.width)("height",u.height),t.xp6(1),t.Q6J("ngIf",u.initialized&&u.graph),t.xp6(1),t.uIk("id",u.minimapClipPathId),t.xp6(1),t.uIk("width",u.graphDims.width/u.minimapScaleCoefficient)("height",u.graphDims.height/u.minimapScaleCoefficient),t.xp6(1),t.Q6J("ngIf",u.showMiniMap))},dependencies:[Ja,g.O5,g.tP,g.sg],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,d.X$)("animationState",[(0,d.eR)(":enter",[(0,d.oB)({opacity:0}),(0,d.jt)("500ms 100ms",(0,d.oB)({opacity:1}))])])]},changeDetection:0}),(0,h.gn)([Ga(500)],e.prototype,"updateMinimap",null),e})(),$a=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[Jr],imports:[[g.ez]]}),e})(),Xa=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez],$a]}),e})();var vt=i(433),Xr=i(9102),Wr=i(9886);function Wa(e,o){1&e&&(t.O4$(),t.TgZ(0,"marker",9),t._UZ(1,"path",10),t.qZA())}function Ka(e,o){if(1&e&&(t.O4$(),t.TgZ(0,"g",11),t._UZ(1,"rect",12),t.TgZ(2,"text",13),t._uU(3),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.uIk("width",n.dimension.width)("height",n.dimension.height)("fill",n.data.color),t.xp6(1),t.uIk("x",10)("y",n.dimension.height/2),t.xp6(1),t.hij(" ",n.label," ")}}function Qa(e,o){if(1&e&&(t.O4$(),t.TgZ(0,"g",14),t._UZ(1,"path",15),t.TgZ(2,"text",16)(3,"textPath",17),t._uU(4),t.qZA()()()),2&e){const n=o.$implicit;t.xp6(3),t.Udp("dominant-baseline",n.dominantBaseline),t.uIk("href","#"+n.id),t.xp6(1),t.hij(" ",n.label," ")}}class Fe{constructor(o){this._modalService=o,this.layoutSettings={orientation:te.TOP_TO_BOTTOM},this.nodesCount=0,this.linksCount=0,this.nodes=[],this.links=[],this.isModal=!1}ngOnInit(){for(let o of this.map.nodes_labels)this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:o}],this.nodesCount++;for(let o=0;o<this.map.adjacency_matrix.length;o++)for(let n=0;n<this.map.adjacency_matrix[o].length;n++)this.map.adjacency_matrix[o][n]&&(this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:"node"+o,target:"node"+n,label:this.map.adjacency_matrix_labels[o][n]}],this.linksCount++)}hideModal(){this._modalService.hide("ClassroomHomeworkMapViewComponent")}}Fe.\u0275fac=function(o){return new(o||Fe)(t.Y36(Wr.tT))},Fe.\u0275cmp=t.Xpm({type:Fe,selectors:[["app-classroom-homework-map-view"]],decls:14,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button",1,"btn-close","close","pull-right",3,"click"],[1,"visually-hidden"],[1,"modal-body"],[1,"chart-container",3,"showMiniMap","layoutSettings","links","nodes"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["rx","15"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Map Graph"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.hideModal()}),t.TgZ(4,"span",3),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",4)(7,"ngx-graph",5),t.YNc(8,Wa,2,0,"ng-template",null,6,t.W1O),t.YNc(10,Ka,4,6,"ng-template",null,7,t.W1O),t.YNc(12,Qa,5,4,"ng-template",null,8,t.W1O),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("showMiniMap",!1)("layoutSettings",n.layoutSettings)("links",n.links)("nodes",n.nodes))},dependencies:[$r],encapsulation:2});var qa=i(301),tu=i(3059),eu=i(4696),nu=i(1718);function ru(e,o){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"div",6),t.TgZ(2,"div",7),t._UZ(3,"div",8),t.qZA()())}function iu(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",17)(1,"button",18),t.NdJ("click",function(){t.CHM(n);const v=t.oxw(2);return t.KtG(v.submitHomework())}),t._uU(2,"Submit"),t.qZA()()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("disabled",!n.isValidGraph)}}function ou(e,o){if(1&e&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14)(6,"strong"),t._uU(7,"Start Datetime:"),t.qZA(),t._uU(8),t.ALo(9,"dateLabel"),t._UZ(10,"br"),t.TgZ(11,"strong"),t._uU(12,"Expire Datetime:"),t.qZA(),t._uU(13),t.ALo(14,"dateLabel"),t._UZ(15,"br"),t.TgZ(16,"strong"),t._uU(17,"Node Min:"),t.qZA(),t._uU(18),t._UZ(19,"br"),t.TgZ(20,"strong"),t._uU(21,"Node Max:"),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"div",15)(24,"strong"),t._uU(25,"Title:"),t.qZA(),t._uU(26),t._UZ(27,"br"),t.TgZ(28,"strong"),t._uU(29,"Description:"),t.qZA(),t._uU(30),t.qZA(),t.YNc(31,iu,3,1,"div",16),t.qZA()()()()()),2&e){const n=t.oxw();t.xp6(8),t.hij(" ",t.lcZ(9,7,n.homework.start_datetime),""),t.xp6(5),t.hij(" ",t.lcZ(14,9,n.homework.expire_datetime),""),t.xp6(5),t.hij(" ",n.homework.node_min,""),t.xp6(4),t.hij(" ",n.homework.node_max," "),t.xp6(4),t.hij(" ",n.homework.title," "),t.xp6(4),t.hij(" ",n.homework.body," "),t.xp6(1),t.Q6J("ngIf",!n.homework.student_map&&0==n.user.role)}}function su(e,o){if(1&e&&(t.TgZ(0,"div",51)(1,"p",48),t._UZ(2,"i",52),t._uU(3," Number of Maps: "),t.TgZ(4,"span",53),t._uU(5),t.qZA()(),t.TgZ(6,"p",54),t._UZ(7,"i",52),t._uU(8," Minimum Nodes Count: "),t.TgZ(9,"span",53),t._uU(10),t.qZA()(),t.TgZ(11,"p",48),t._UZ(12,"i",52),t._uU(13," Maximum Nodes Count: "),t.TgZ(14,"span",53),t._uU(15),t.qZA()(),t.TgZ(16,"p",54),t._UZ(17,"i",52),t._uU(18," Minimum Edges Count: "),t.TgZ(19,"span",53),t._uU(20),t.qZA()(),t.TgZ(21,"p",48),t._UZ(22,"i",52),t._uU(23," Maximum Edges Count: "),t.TgZ(24,"span",53),t._uU(25),t.qZA()()()),2&e){const n=t.oxw(2);t.xp6(5),t.Oqu(null==n.simulation.maps?null:n.simulation.maps.length),t.xp6(5),t.Oqu(n.simulation.node_min),t.xp6(5),t.Oqu(n.simulation.node_max),t.xp6(5),t.Oqu(n.simulation.node_min-1),t.xp6(5),t.Oqu(n.maxMapsValues.edges)}}const Mn=function(e){return{"btn-primary":e}},au=function(e){return{"d-none":e}};function uu(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"div",12),t.YNc(6,su,26,5,"div",24),t.TgZ(7,"label",25),t._uU(8,"Scatter Plot Param:"),t.qZA(),t.TgZ(9,"div")(10,"button",26),t.NdJ("click",function(){t.CHM(n);const v=t.oxw();return t.KtG(v.updateChartType(0))}),t._uU(11,"Entropy"),t.qZA(),t.TgZ(12,"button",26),t.NdJ("click",function(){t.CHM(n);const v=t.oxw();return t.KtG(v.updateChartType(1))}),t._uU(13,"Entropy Percent"),t.qZA(),t.TgZ(14,"button",27),t.NdJ("click",function(){t.CHM(n);const v=t.oxw();return t.KtG(v.updateChartType(2))}),t._uU(15,"Effort"),t.qZA()(),t.TgZ(16,"form",28),t.NdJ("ngSubmit",function(){t.CHM(n);const v=t.oxw();return t.KtG(v.renderScatterPlot(v.current_chart_type))}),t.TgZ(17,"div",13)(18,"div",15)(19,"label",29),t._uU(20,"Nodes Min:"),t.qZA(),t._UZ(21,"input",30),t.qZA(),t.TgZ(22,"div",15)(23,"label",31),t._uU(24,"Nodes Max:"),t.qZA(),t._UZ(25,"input",32),t.qZA()(),t.TgZ(26,"div",33)(27,"div",15)(28,"label",34),t._uU(29,"Edges Min:"),t.qZA(),t._UZ(30,"input",35),t.qZA(),t.TgZ(31,"div",15)(32,"label",36),t._uU(33,"Edges Max:"),t.qZA(),t._UZ(34,"input",37),t.qZA()(),t.TgZ(35,"div",33)(36,"div",15)(37,"label",38),t._uU(38),t.qZA(),t._UZ(39,"input",39),t.qZA(),t.TgZ(40,"div",15)(41,"label",40),t._uU(42),t.qZA(),t._UZ(43,"input",41),t.qZA()(),t.TgZ(44,"div",42)(45,"div",43)(46,"button",44),t._uU(47,"Filter"),t.qZA(),t.TgZ(48,"button",45),t.NdJ("click",function(){t.CHM(n);const v=t.oxw();return t.KtG(v.resetFilterForm(v.current_chart_type))}),t._uU(49,"Reset"),t.qZA()()()()()()()()(),t.TgZ(50,"div",46)(51,"div",11)(52,"div",47)(53,"h5",48),t._uU(54,"Scatter Plot: "),t.TgZ(55,"small"),t._uU(56),t.qZA()()(),t.TgZ(57,"div",49),t._UZ(58,"div",50),t.qZA()()()()}if(2&e){const n=t.oxw();t.xp6(6),t.Q6J("ngIf",n.simulation),t.xp6(4),t.Q6J("ngClass",t.VKq(10,Mn,0==n.current_chart_type)),t.xp6(2),t.Q6J("ngClass",t.VKq(12,Mn,1==n.current_chart_type)),t.xp6(2),t.Q6J("ngClass",t.VKq(14,Mn,2==n.current_chart_type)),t.xp6(2),t.Q6J("formGroup",n.simulationFilterForm),t.xp6(22),t.hij("",n.getChartTypeLabel(n.current_chart_type)," Min:"),t.xp6(4),t.hij("",n.getChartTypeLabel(n.current_chart_type)," Max:"),t.xp6(4),t.Q6J("disabled",!n.simulationFilterForm.valid),t.xp6(4),t.Q6J("ngClass",t.VKq(16,au,n.loading)),t.xp6(6),t.Oqu(n.getChartTypeLabel(n.current_chart_type))}}function hu(e,o){if(1&e&&(t.TgZ(0,"div",14)(1,"div",62)(2,"div",12)(3,"strong"),t._uU(4,"Submitted at:"),t.qZA(),t._uU(5),t.ALo(6,"dateLabel"),t._UZ(7,"br")(8,"br"),t.TgZ(9,"strong"),t._uU(10,"Entropy (H):"),t.qZA(),t._uU(11),t._UZ(12,"br"),t.TgZ(13,"strong"),t._uU(14,"Entropy Percent (Hr):"),t.qZA(),t._uU(15),t._UZ(16,"br"),t.TgZ(17,"strong"),t._uU(18,"Effort (M):"),t.qZA(),t._uU(19),t._UZ(20,"br"),t.qZA()()()),2&e){const n=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,4,n.homework.student_map.created_at),""),t.xp6(6),t.hij(" ",n.homework.student_map.entropy.toFixed(2),""),t.xp6(4),t.hij(" ",n.homework.student_map.entropy_percent.toFixed(2),""),t.xp6(4),t.hij(" ",n.homework.student_map.effort.toFixed(2),"")}}function lu(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",14)(1,"div",62)(2,"div",12)(3,"form",63),t.NdJ("ngSubmit",function(){t.CHM(n);const v=t.oxw(2);return t.KtG(v.onSubmitNode())}),t.TgZ(4,"div",64)(5,"label",65),t._uU(6,"Node Name:"),t.qZA(),t._UZ(7,"input",66),t.qZA(),t.TgZ(8,"div",67)(9,"button",68),t._uU(10,"Add"),t.qZA()()()()(),t.TgZ(11,"div",11)(12,"div",12)(13,"div",64)(14,"label",69),t._uU(15,"Source Node:"),t.qZA(),t.TgZ(16,"ng-select",70),t.NdJ("ngModelChange",function(v){t.CHM(n);const _=t.oxw(2);return t.KtG(_.sourceLinkNodeId=v)}),t.qZA()(),t.TgZ(17,"div",64)(18,"label",71),t._uU(19,"Target Node:"),t.qZA(),t.TgZ(20,"ng-select",72),t.NdJ("ngModelChange",function(v){t.CHM(n);const _=t.oxw(2);return t.KtG(_.targetLinkNodeId=v)}),t.qZA()(),t.TgZ(21,"div",64)(22,"label",73),t._uU(23,"Label:"),t.qZA(),t.TgZ(24,"input",74),t.NdJ("ngModelChange",function(v){t.CHM(n);const _=t.oxw(2);return t.KtG(_.labelLink=v)}),t.qZA()(),t.TgZ(25,"div",67)(26,"button",75),t.NdJ("click",function(){t.CHM(n);const v=t.oxw(2);return t.KtG(v.linkNodes())}),t._uU(27,"Link"),t.qZA()()()()()}if(2&e){const n=t.oxw(2);t.xp6(3),t.Q6J("formGroup",n.nodeCreateForm),t.xp6(6),t.Q6J("disabled",!n.nodeCreateForm.valid),t.xp6(7),t.Q6J("items",n.nodes)("ngModel",n.sourceLinkNodeId),t.xp6(4),t.Q6J("items",n.nodes)("ngModel",n.targetLinkNodeId),t.xp6(4),t.Q6J("ngModel",n.labelLink),t.xp6(2),t.Q6J("disabled",!n.sourceLinkNodeId||!n.targetLinkNodeId||!n.labelLink)}}function fu(e,o){1&e&&(t.O4$(),t.TgZ(0,"marker",76),t._UZ(1,"path",77),t.qZA())}function cu(e,o){if(1&e&&(t.O4$(),t.TgZ(0,"g",78),t._UZ(1,"rect",79),t.TgZ(2,"text",80),t._uU(3),t.qZA()()),2&e){const n=o.$implicit;t.xp6(1),t.uIk("width",n.dimension.width)("height",n.dimension.height)("fill",n.data.color),t.xp6(1),t.uIk("x",10)("y",n.dimension.height/2),t.xp6(1),t.hij(" ",n.label," ")}}function du(e,o){if(1&e&&(t.O4$(),t.TgZ(0,"g",81),t._UZ(1,"path",82),t.TgZ(2,"text",83)(3,"textPath",84),t._uU(4),t.qZA()()()),2&e){const n=o.$implicit;t.xp6(3),t.Udp("dominant-baseline",n.dominantBaseline),t.uIk("href","#"+n.id),t.xp6(1),t.hij(" ",n.label," ")}}function pu(e,o){if(1&e&&(t.TgZ(0,"div",55),t.YNc(1,hu,21,6,"div",56),t.YNc(2,lu,28,8,"div",56),t.TgZ(3,"div",57)(4,"ngx-graph",58),t.YNc(5,fu,2,0,"ng-template",null,59,t.W1O),t.YNc(7,cu,4,6,"ng-template",null,60,t.W1O),t.YNc(9,du,5,4,"ng-template",null,61,t.W1O),t.qZA()()()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.homework.student_map),t.xp6(1),t.Q6J("ngIf",!n.homework.student_map),t.xp6(2),t.Q6J("showMiniMap",!1)("layoutSettings",n.layoutSettings)("links",n.links)("nodes",n.nodes)}}var Mt=(()=>{return(e=Mt||(Mt={}))[e.Entropy=0]="Entropy",e[e.EntropyPercent=1]="EntropyPercent",e[e.Effort=2]="Effort",Mt;var e})();const gu=e=>{const o=parseInt(e.get("node_min").value),n=parseInt(e.get("node_max").value),u=parseInt(e.get("edge_min").value),v=parseInt(e.get("edge_max").value),_=parseInt(e.get("param_min").value),E=parseInt(e.get("param_max").value);return o>n||u>v||_>E?{inRange:!1}:null};class Pe{constructor(o,n,u,v,_){this._route=o,this._classroomHomeworkService=n,this._router=u,this._alertService=v,this._modalService=_,this.layoutSettings={orientation:te.TOP_TO_BOTTOM},this.nodeCreateForm=new vt.cw({name:new vt.NI(null,vt.kI.required)}),this.simulationFilterForm=new vt.cw({node_min:new vt.NI(0,vt.kI.required),node_max:new vt.NI(0,vt.kI.required),edge_min:new vt.NI(0,vt.kI.required),edge_max:new vt.NI(0,vt.kI.required),param_min:new vt.NI(0,vt.kI.required),param_max:new vt.NI(0,vt.kI.required)},gu),this.loading=!1,this.loadingAddNode=!1,this.nodesCount=0,this.linksCount=0,this.nodes=[],this.links=[],this.sourceLinkNodeId=null,this.targetLinkNodeId=null,this.labelLink=null,this.isValidGraph=!1,this.simulation=null,this.currentMap=null,this.current_chart_type=Mt.Entropy,this.maxMapsValues={nodes:0,edges:0,entropy:0,entropy_percent:0,effort:0};let E=JSON.parse(localStorage.getItem("currentUserData"));E||this._router.navigate(["/users/auth"]),this.user=E}ngOnInit(){this.classroom_id=this._route.snapshot.paramMap.get("classroom_id"),this.homework_id=this._route.snapshot.paramMap.get("homework_id"),0==this.user.role?this.getClassroomHomework():this._classroomHomeworkService.getClassroomHomework(this.classroom_id,this.homework_id).subscribe(o=>{if(this.loading=!1,o.hasOwnProperty("error"))return void this._router.navigate(["/not-found"]);this.homework=o;let n=[];console.log(this.homework.maps);for(let u of this.homework.maps)n=[...n,{_id:u._id,color_entropy:0,color_entropy_percent:0,color_effort:0,edges_count:u.edges_count,entropy:u.entropy,entropy_percent:u.entropy_percent,effort:u.effort,nodes_count:u.nodes_count,homework_id:u.homework_id,adjacency_matrix:u.adjacency_matrix,created_at:0,nodes_labels:u.nodes_labels,adjacency_matrix_labels:u.adjacency_matrix_labels}];if(this.simulation={classroom_id:this.homework.classroom_id,title:this.homework.title,node_min:this.homework.node_min,node_max:this.homework.node_max,maps:n,body:this.homework.body,start_datetime:this.homework.start_datetime,expire_datetime:this.homework.expire_datetime},this.simulation?.maps){this.simulationFilterForm.get("node_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min-1}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),this.simulationFilterForm.get("node_max").setValidators([vt.kI.max(this.simulation.node_max),vt.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity();for(let u of this.simulation.maps)u.nodes_count>this.maxMapsValues.nodes&&(this.maxMapsValues.nodes=u.nodes_count),u.edges_count>this.maxMapsValues.edges&&(this.maxMapsValues.edges=u.edges_count),u.entropy&&u.entropy>this.maxMapsValues.entropy&&(this.maxMapsValues.entropy=u.entropy),u.entropy_percent&&u.entropy_percent>this.maxMapsValues.entropy_percent&&(this.maxMapsValues.entropy_percent=u.entropy_percent),u.effort&&u.effort>this.maxMapsValues.effort&&(this.maxMapsValues.effort=u.effort);this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}})}getClassroomHomework(){this.loading=!0,this._classroomHomeworkService.getClassroomHomework(this.classroom_id,this.homework_id).subscribe(o=>{if(o.hasOwnProperty("error"))this._router.navigate(["/"]);else if(this.homework=o,this.homework.student_map){for(let n of this.homework.student_map.nodes_labels)this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:n}],this.nodesCount++;for(let n=0;n<this.homework.student_map.adjacency_matrix.length;n++)for(let u=0;u<this.homework.student_map.adjacency_matrix[n].length;u++)this.homework.student_map.adjacency_matrix[n][u]&&(this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:"node"+n,target:"node"+u,label:this.homework.student_map.adjacency_matrix_labels[n][u]}],this.linksCount++)}this.loading=!1})}onSubmitNode(){if(this.nodes.length==this.homework.node_max)return this._alertService.error("You have reached the maximum amount of nodes.");this.nodes=[...this.nodes,{id:"node"+this.nodesCount.toString(),label:this.nodeCreateForm.value.name}],this.nodesCount++,this.nodeCreateForm.reset(),this.isValidGraph=this.checkDAG()}linkNodes(){this.links=[...this.links,{id:"link"+this.linksCount.toString(),source:this.sourceLinkNodeId,target:this.targetLinkNodeId,label:this.labelLink}],this.linksCount++,this.sourceLinkNodeId=null,this.targetLinkNodeId=null,this.labelLink=null,this.isValidGraph=this.checkDAG()}submitHomework(){let o=[],n=Array.from(Array(this.nodes.length),v=>Array(this.nodes.length).fill(""));for(let v of this.links){let _=parseInt(v.source.replace("node","")),E=parseInt(v.target.replace("node",""));n[_][E]=v.label}for(let v of this.nodes)o.push(v.label);this._classroomHomeworkService.createClassroomHomeworkMap(this.classroom_id,this.homework_id,{homework_id:this.homework_id,nodes_count:this.nodes.length,edges_count:this.links.length,nodes_labels:o,adjacency_matrix:this.adjacencyMatrix,adjacency_matrix_labels:n}).subscribe(v=>{console.log(v)})}checkDAG(){if(this.nodes.length<this.homework.node_min)return!1;this.adjacencyMatrix=Array.from(Array(this.nodes.length),o=>Array(this.nodes.length).fill(0));for(let o of this.links){let n=parseInt(o.source.replace("node","")),u=parseInt(o.target.replace("node",""));this.adjacencyMatrix[n][u]=1}return!!this.isConnected(this.adjacencyMatrix)&&this.isDAG(this.adjacencyMatrix)}isDAG(o){const n=o.length,u=Array(n).fill(!1),v=Array(n).fill(!1);for(let _=0;_<n;_++)if(!u[_]&&this.isCyclic(_,u,v,o))return!1;return!0}isCyclic(o,n,u,v){n[o]=!0,u[o]=!0;for(let _=0;_<v[o].length;_++)if(1===v[o][_]){if(!n[_]&&this.isCyclic(_,n,u,v))return!0;if(u[_])return!0}return u[o]=!1,!1}isConnected(o){const n=o.length,u=Array(n).fill(!1),v=[];for(v.push(0),u[0]=!0;v.length>0;){const _=v.pop();for(let E=0;E<n;E++)1===o[_][E]&&!u[E]&&(v.push(E),u[E]=!0)}return u.every(_=>_)}unpack(o,n){return o.map(function(u){return u[n]})}resetFilterForm(o){this.simulationFilterForm.get("node_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({node_min:this.simulation.node_min}),this.simulationFilterForm.get("node_min").updateValueAndValidity(),this.simulationFilterForm.get("edge_min").setValidators([vt.kI.min(this.simulation.node_min),vt.kI.required]),this.simulationFilterForm.patchValue({edge_min:this.simulation.node_min-1}),this.simulationFilterForm.get("edge_min").updateValueAndValidity(),o==Mt.Entropy?(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.entropy),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):o==Mt.EntropyPercent?(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.entropy_percent),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.entropy_percent}),this.simulationFilterForm.get("param_max").updateValueAndValidity()):o==Mt.Effort&&(this.simulationFilterForm.get("param_min").setValidators([vt.kI.min(0),vt.kI.required]),this.simulationFilterForm.patchValue({param_min:0}),this.simulationFilterForm.get("param_min").updateValueAndValidity(),this.simulationFilterForm.get("param_max").setValidators([vt.kI.max(this.maxMapsValues.effort),vt.kI.required]),this.simulationFilterForm.patchValue({param_max:this.maxMapsValues.effort}),this.simulationFilterForm.get("param_max").updateValueAndValidity()),this.simulationFilterForm.get("node_max").setValidators([vt.kI.max(this.simulation.node_max),vt.kI.required]),this.simulationFilterForm.patchValue({node_max:this.simulation.node_max}),this.simulationFilterForm.get("node_max").updateValueAndValidity(),this.simulationFilterForm.get("edge_max").setValidators([vt.kI.max(this.maxMapsValues.edges),vt.kI.required]),this.simulationFilterForm.patchValue({edge_max:this.maxMapsValues.edges}),this.simulationFilterForm.get("edge_max").updateValueAndValidity()}getCoordsDatum(o,n){let u=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"edges_count"),_=this.unpack(this.simulation.maps.filter(E=>E.color_entropy==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy&&E.entropy>=this.simulationFilterForm.value.param_min&&E.entropy<=this.simulationFilterForm.value.param_max),"entropy");return o==Mt.EntropyPercent?(u=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"edges_count"),_=this.unpack(this.simulation.maps.filter(E=>E.color_entropy_percent==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.entropy_percent&&E.entropy_percent>=this.simulationFilterForm.value.param_min&&E.entropy_percent<=this.simulationFilterForm.value.param_max),"entropy_percent")):o==Mt.Effort&&(u=this.unpack(this.simulation.maps.filter(E=>E.color_effort==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"nodes_count"),v=this.unpack(this.simulation.maps.filter(E=>E.color_effort==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"edges_count"),_=this.unpack(this.simulation.maps.filter(E=>E.color_effort==n&&E.nodes_count>=this.simulationFilterForm.value.node_min&&E.nodes_count<=this.simulationFilterForm.value.node_max&&E.edges_count>=this.simulationFilterForm.value.edge_min&&E.edges_count<=this.simulationFilterForm.value.edge_max&&E.effort&&E.effort>=this.simulationFilterForm.value.param_min&&E.effort<=this.simulationFilterForm.value.param_max),"effort")),[u,v,_]}renderScatterPlot(o){Xr.purge("container");const n=["rgba(168, 50, 50, 0.95)","rgba(161, 158, 157, 0.95)","rgba(86, 199, 30, 0.95)"];let u={x:this.getCoordsDatum(o,0)[0],y:this.getCoordsDatum(o,0)[1],z:this.getCoordsDatum(o,0)[2],mode:"markers",marker:{size:5,line:{color:n[0],width:.5},opacity:.8},type:"scatter3d"};console.log(u);let E=[u,{x:this.getCoordsDatum(o,1)[0],y:this.getCoordsDatum(o,1)[1],z:this.getCoordsDatum(o,1)[2],mode:"markers",marker:{size:5,line:{color:n[1],width:.5},opacity:.8},type:"scatter3d"},{x:this.getCoordsDatum(o,2)[0],y:this.getCoordsDatum(o,2)[1],z:this.getCoordsDatum(o,2)[2],mode:"markers",marker:{size:5,line:{color:n[2],width:.5},opacity:.8},type:"scatter3d"}],T={margin:{l:0,r:0,b:0,t:50},width:window.innerWidth-window.innerWidth/2.5,height:window.innerHeight-200,colorway:n,scene:{xaxis:{title:"Nodes",range:[0,this.maxMapsValues.nodes]},yaxis:{title:"Edges",range:[0,this.maxMapsValues.edges]},zaxis:{title:this.getChartTypeLabel(this.current_chart_type)}}};Xr.newPlot("container",E,T,{responsive:!0}),document.getElementById("container").on("plotly_click",P=>{this.current_chart_type==Mt.Entropy?this.currentMap=this.simulation?.maps?.filter(R=>P.points[0].x==R.nodes_count&&P.points[0].y==R.edges_count&&P.points[0].z==R.entropy)[0]:this.current_chart_type==Mt.EntropyPercent?this.currentMap=this.simulation?.maps?.filter(R=>P.points[0].x==R.nodes_count&&P.points[0].y==R.edges_count&&P.points[0].z==R.entropy_percent)[0]:this.current_chart_type==Mt.Effort&&(this.currentMap=this.simulation?.maps?.filter(R=>P.points[0].x==R.nodes_count&&P.points[0].y==R.edges_count&&P.points[0].z==R.effort)[0]),this.showCurrentMap()})}getChartTypeLabel(o){switch(o){case Mt.Entropy:return"Entropy (H)";case Mt.EntropyPercent:return"Entropy Percent (Hr)";case Mt.Effort:return"Effort (M)"}}getChartId(o){switch(o){case Mt.Entropy:return"chartHolderEntropy";case Mt.EntropyPercent:return"chartHolderEntropyPercent";case Mt.Effort:return"chartHolderEffort"}}updateChartType(o){this.current_chart_type=o,this.resetFilterForm(this.current_chart_type),this.renderScatterPlot(this.current_chart_type)}downloadJson(){var o=JSON.stringify(this.simulation),n=document.createElement("a");n.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(o)),n.setAttribute("download",this.simulation?.title?this.simulation?.title+".json":"undefined.json"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}showCurrentMap(){this._modalService.show(Fe,{id:"ClassroomHomeworkMapViewComponent",class:"modal-lg",initialState:{map:this.currentMap,isModal:!0}})}}Pe.\u0275fac=function(o){return new(o||Pe)(t.Y36(a.gz),t.Y36(r.c),t.Y36(a.F0),t.Y36(qa.c),t.Y36(Wr.tT))},Pe.\u0275cmp=t.Xpm({type:Pe,selectors:[["app-classroom-homework-view"]],decls:6,vars:4,consts:[["class","row mt-5 g-0",4,"ngIf"],[1,"mt-4","container-fluid","h-75"],["class","row px-2 mb-4",4,"ngIf"],["class","row h-90 my-4 mx-2",4,"ngIf"],["class","row px-2 h-100",4,"ngIf"],[1,"row","mt-5","g-0"],[1,"col-5"],[1,"col-2","ms-5","mt-5"],[1,"ms-3","custom-big-loader","mt-5"],[1,"row","px-2","mb-4"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-3"],[1,"col-6"],["class","col-3 d-flex align-items-center",4,"ngIf"],[1,"col-3","d-flex","align-items-center"],[1,"btn","btn-success","d-grid","w-100",3,"disabled","click"],[1,"row","h-90","my-4","mx-2"],[1,"col-4","h-100"],[1,"row","h-100"],[1,"col-12","h-100","ps-0"],[1,"card","mb-4","h-100"],["class","alert alert-primary mb-2","role","alert",4,"ngIf"],[1,"form-label"],[1,"me-3","btn","btn-secondary",3,"ngClass","click"],[1,"btn","btn-secondary",3,"ngClass","click"],[1,"mt-3",3,"formGroup","ngSubmit"],["for","node_min",1,"form-label"],["type","text","id","node_min","name","simulation_node_min","placeholder","","formControlName","node_min",1,"form-control"],["for","node_max",1,"form-label"],["type","text","id","node_max","name","simulation_node_max","placeholder","","formControlName","node_max",1,"form-control"],[1,"row","mt-2"],["for","edge_min",1,"form-label"],["type","text","id","edge_min","name","simulation_edge_min","placeholder","","formControlName","edge_min",1,"form-control"],["for","edge_max",1,"form-label"],["type","text","id","edge_max","name","simulation_edge_max","placeholder","","formControlName","edge_max",1,"form-control"],["for","param_min",1,"form-label"],["type","text","id","param_min","name","simulation_param_min","placeholder","","formControlName","param_min",1,"form-control"],["for","param_max",1,"form-label"],["type","text","id","param_max","name","simulation_param_max","placeholder","","formControlName","param_max",1,"form-control"],[1,"row","mt-4"],[1,"col-12","text-center"],["type","submit",1,"btn","btn-primary","me-3",3,"disabled"],[1,"btn","btn-secondary",3,"click"],[1,"col-8","pe-0",3,"ngClass"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"card-body","text-center","p-0"],["id","container"],["role","alert",1,"alert","alert-primary","mb-2"],[1,"fa-solid","fa-genderless"],[1,"ms-2"],[1,"mb-0","mt-2"],[1,"row","px-2","h-100"],["class","col-3",4,"ngIf"],[1,"col-8"],[1,"chart-container",3,"showMiniMap","layoutSettings","links","nodes"],["defsTemplate",""],["nodeTemplate",""],["linkTemplate",""],[1,"card","mb-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","node_name","name","node_name","formControlName","name",1,"form-control"],[1,"text-center"],["type","submit",1,"btn","btn-primary","d-grid","w-100",3,"disabled"],["for","source_node",1,"form-label"],["id","source_node","name","source_node","bindLabel","label","bindValue","id",3,"items","ngModel","ngModelChange"],["for","target_node",1,"form-label"],["id","target_node","name","target_node","bindLabel","label","bindValue","id",3,"items","ngModel","ngModelChange"],["for","link_label",1,"form-label"],["type","text","id","link_label","name","link_label",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","d-grid","w-100",3,"disabled","click"],["id","arrow","viewBox","0 -5 10 10","refX","8","refY","0","markerWidth","4","markerHeight","4","orient","auto"],["d","M0,-5L10,0L0,5",1,"arrow-head"],[1,"node"],["rx","15"],["alignment-baseline","central"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"],["startOffset","50%",1,"text-path"]],template:function(o,n){1&o&&(t._UZ(0,"app-navbar"),t.YNc(1,ru,4,0,"div",0),t.TgZ(2,"div",1),t.YNc(3,ou,32,11,"div",2),t.YNc(4,uu,59,18,"div",3),t.YNc(5,pu,11,6,"div",4),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(2),t.Q6J("ngIf",n.homework),t.xp6(1),t.Q6J("ngIf",1==n.user.role),t.xp6(1),t.Q6J("ngIf",0==n.user.role&&n.homework))},dependencies:[g.mk,g.O5,vt._Y,vt.Fj,vt.JJ,vt.JL,vt.On,vt.sg,vt.u,tu.w9,eu.S,$r,nu.$],encapsulation:2});const mu=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:":homework_id",component:Pe,canActivate:[l.a]}];class ye{}ye.\u0275fac=function(o){return new(o||ye)},ye.\u0275mod=t.oAB({type:ye}),ye.\u0275inj=t.cJS({imports:[a.Bz.forChild(mu),a.Bz]});class xe{}xe.\u0275fac=function(o){return new(o||xe)},xe.\u0275mod=t.oAB({type:xe}),xe.\u0275inj=t.cJS({providers:[r.c],imports:[g.ez,f.m,c.UserModule,ye,Xa]})},4937:(y,w,i)=>{"use strict";i.d(w,{c:()=>c});var s=i(1571),m=i(2340),p=i(5059),g=i(529),f=i(9985);class c{constructor(a,l){this._http=a,this._httpErrorHandler=l,this._classroomEndpointUrl=m.N.apiEndpointUrl+"classrooms/",this.updatedClassroomHomeworks$=new s.vpe,this._handleError=this._httpErrorHandler.createHandleError("UserService")}createClassroomHomework(a){return this._http.post(this._classroomEndpointUrl+a.classroom_id+"/homeworks/",{title:a.title,body:a.body,node_min:a.node_min,node_max:a.node_max,start_datetime:a.start_datetime,expire_datetime:a.expire_datetime}).pipe((0,p.K)(this._handleError("createClassroomHomework",{error:!0})))}getClassroomHomeworks(a){return this._http.get(this._classroomEndpointUrl+a+"/homeworks").pipe((0,p.K)(this._handleError("getClassroomHomeworks",{error:!0})))}getClassroomHomework(a,l){return this._http.get(this._classroomEndpointUrl+a+"/homeworks/"+l).pipe((0,p.K)(this._handleError("getClassroomHomework",{error:!0})))}createClassroomHomeworkMap(a,l,t){return this._http.post(this._classroomEndpointUrl+a+"/homeworks/"+l,t).pipe((0,p.K)(this._handleError("createClassroomHomeworkMap",{error:!0})))}}c.\u0275fac=function(a){return new(a||c)(s.LFG(g.eN),s.LFG(f.G))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})},7315:(y,w,i)=>{"use strict";i.d(w,{u:()=>c});var s=i(1571),m=i(2340),p=i(5059),g=i(529),f=i(9985);class c{constructor(a,l){this._http=a,this._httpErrorHandler=l,this._classroomEndpointUrl=m.N.apiEndpointUrl+"classrooms/",this.updatedClassrooms$=new s.vpe,this._handleError=this._httpErrorHandler.createHandleError("UserService")}getClassrooms(){return this._http.get(this._classroomEndpointUrl).pipe((0,p.K)(this._handleError("getClassrooms",{error:!0})))}getClassroom(a){return this._http.get(this._classroomEndpointUrl+a).pipe((0,p.K)(this._handleError("getClassroom",{error:!0})))}joinStudentClassroom(a){return this._http.get(this._classroomEndpointUrl+"invite/"+a).pipe((0,p.K)(this._handleError("joinStudentClassroom",{error:!0})))}createClassroom(a){return this._http.post(this._classroomEndpointUrl,a).pipe((0,p.K)(this._handleError("createClassroom",{error:!0})))}getClassroomStudents(a){return this._http.get(this._classroomEndpointUrl+a+"/students").pipe((0,p.K)(this._handleError("getClassroomStudents",{error:!0})))}}c.\u0275fac=function(a){return new(a||c)(s.LFG(g.eN),s.LFG(f.G))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})},9695:(y,w,i)=>{y.exports={graphlib:i(6456),layout:i(4850),debug:i(1914),util:{time:i(1510).time,notime:i(1510).notime},version:i(8126)}},2234:(y,w,i)=>{"use strict";var s=i(5760),m=i(7365);y.exports={run:function p(c){var r="greedy"===c.graph().acyclicer?m(c,function a(l){return function(t){return l.edge(t).weight}}(c)):function g(c){var r=[],a={},l={};return s.forEach(c.nodes(),function t(h){s.has(l,h)||(l[h]=!0,a[h]=!0,s.forEach(c.outEdges(h),function(d){s.has(a,d.w)?r.push(d):t(d.w)}),delete a[h])}),r}(c);s.forEach(r,function(l){var t=c.edge(l);c.removeEdge(l),t.forwardName=l.name,t.reversed=!0,c.setEdge(l.w,l.v,t,s.uniqueId("rev"))})},undo:function f(c){s.forEach(c.edges(),function(r){var a=c.edge(r);if(a.reversed){c.removeEdge(r);var l=a.forwardName;delete a.reversed,delete a.forwardName,c.setEdge(r.w,r.v,a,l)}})}}},9999:(y,w,i)=>{var s=i(5760),m=i(1510);function g(f,c,r,a,l,t){var d=l[c][t-1],x=m.addDummyNode(f,"border",{width:0,height:0,rank:t,borderType:c},r);l[c][t]=x,f.setParent(x,a),d&&f.setEdge(d,x,{weight:1})}y.exports=function p(f){s.forEach(f.children(),function c(r){var a=f.children(r),l=f.node(r);if(a.length&&s.forEach(a,c),s.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var t=l.minRank,h=l.maxRank+1;t<h;++t)g(f,"borderLeft","_bl",r,l,t),g(f,"borderRight","_br",r,l,t)}})}},3870:(y,w,i)=>{"use strict";var s=i(5760);function g(t){s.forEach(t.nodes(),function(h){f(t.node(h))}),s.forEach(t.edges(),function(h){f(t.edge(h))})}function f(t){var h=t.width;t.width=t.height,t.height=h}function r(t){t.y=-t.y}function l(t){var h=t.x;t.x=t.y,t.y=h}y.exports={adjust:function m(t){var h=t.graph().rankdir.toLowerCase();("lr"===h||"rl"===h)&&g(t)},undo:function p(t){var h=t.graph().rankdir.toLowerCase();("bt"===h||"rl"===h)&&function c(t){s.forEach(t.nodes(),function(h){r(t.node(h))}),s.forEach(t.edges(),function(h){var d=t.edge(h);s.forEach(d.points,r),s.has(d,"y")&&r(d)})}(t),("lr"===h||"rl"===h)&&(function a(t){s.forEach(t.nodes(),function(h){l(t.node(h))}),s.forEach(t.edges(),function(h){var d=t.edge(h);s.forEach(d.points,l),s.has(d,"x")&&l(d)})}(t),g(t))}}},3226:y=>{function w(){var m={};m._next=m._prev=m,this._sentinel=m}function i(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function s(m,p){if("_next"!==m&&"_prev"!==m)return p}y.exports=w,w.prototype.dequeue=function(){var m=this._sentinel,p=m._prev;if(p!==m)return i(p),p},w.prototype.enqueue=function(m){var p=this._sentinel;m._prev&&m._next&&i(m),m._next=p._next,p._next._prev=m,p._next=m,m._prev=p},w.prototype.toString=function(){for(var m=[],p=this._sentinel,g=p._prev;g!==p;)m.push(JSON.stringify(g,s)),g=g._prev;return"["+m.join(", ")+"]"}},1914:(y,w,i)=>{var s=i(5760),m=i(1510),p=i(6456).Graph;y.exports={debugOrdering:function g(f){var c=m.buildLayerMatrix(f),r=new p({compound:!0,multigraph:!0}).setGraph({});return s.forEach(f.nodes(),function(a){r.setNode(a,{label:a}),r.setParent(a,"layer"+f.node(a).rank)}),s.forEach(f.edges(),function(a){r.setEdge(a.v,a.w,{},a.name)}),s.forEach(c,function(a,l){r.setNode("layer"+l,{rank:"same"}),s.reduce(a,function(h,d){return r.setEdge(h,d,{style:"invis"}),d})}),r}}},6456:(y,w,i)=>{var s;try{s=i(5510)}catch{}s||(s=window.graphlib),y.exports=s},7365:(y,w,i)=>{var s=i(5760),m=i(6456).Graph,p=i(3226);y.exports=function f(t,h){if(t.nodeCount()<=1)return[];var d=function a(t,h){var d=new m,x=0,b=0;s.forEach(t.nodes(),function(M){d.setNode(M,{v:M,in:0,out:0})}),s.forEach(t.edges(),function(M){var N=d.edge(M.v,M.w)||0,k=h(M);d.setEdge(M.v,M.w,N+k),b=Math.max(b,d.node(M.v).out+=k),x=Math.max(x,d.node(M.w).in+=k)});var C=s.range(b+x+3).map(function(){return new p}),A=x+1;return s.forEach(d.nodes(),function(M){l(C,A,d.node(M))}),{graph:d,buckets:C,zeroIdx:A}}(t,h||g),x=function c(t,h,d){for(var A,x=[],b=h[h.length-1],C=h[0];t.nodeCount();){for(;A=C.dequeue();)r(t,h,d,A);for(;A=b.dequeue();)r(t,h,d,A);if(t.nodeCount())for(var M=h.length-2;M>0;--M)if(A=h[M].dequeue()){x=x.concat(r(t,h,d,A,!0));break}}return x}(d.graph,d.buckets,d.zeroIdx);return s.flatten(s.map(x,function(b){return t.outEdges(b.v,b.w)}),!0)};var g=s.constant(1);function r(t,h,d,x,b){var C=b?[]:void 0;return s.forEach(t.inEdges(x.v),function(A){var M=t.edge(A),N=t.node(A.v);b&&C.push({v:A.v,w:A.w}),N.out-=M,l(h,d,N)}),s.forEach(t.outEdges(x.v),function(A){var M=t.edge(A),k=t.node(A.w);k.in-=M,l(h,d,k)}),t.removeNode(x.v),C}function l(t,h,d){d.out?d.in?t[d.out-d.in+h].enqueue(d):t[t.length-1].enqueue(d):t[0].enqueue(d)}},4850:(y,w,i)=>{"use strict";var s=i(5760),m=i(2234),p=i(1496),g=i(4124),f=i(1510).normalizeRanks,c=i(162),r=i(1510).removeEmptyRanks,a=i(1230),l=i(9999),t=i(3870),h=i(2974),d=i(8226),x=i(1510),b=i(6456).Graph;y.exports=function C($,K){var rt=K&&K.debugTiming?x.time:x.notime;rt("layout",function(){var lt=rt("  buildLayoutGraph",function(){return function I($){var K=new b({multigraph:!0,compound:!0}),rt=xt($.graph());return K.setGraph(s.merge({},k,ft(rt,N),s.pick(rt,D))),s.forEach($.nodes(),function(lt){var mt=xt($.node(lt));K.setNode(lt,s.defaults(ft(mt,H),V)),K.setParent(lt,$.parent(lt))}),s.forEach($.edges(),function(lt){var mt=xt($.edge(lt));K.setEdge(lt,s.merge({},Y,ft(mt,B),s.pick(mt,O)))}),K}($)});rt("  runLayout",function(){!function A($,K){K("    makeSpaceForEdgeLabels",function(){!function L($){var K=$.graph();K.ranksep/=2,s.forEach($.edges(),function(rt){var lt=$.edge(rt);lt.minlen*=2,"c"!==lt.labelpos.toLowerCase()&&("TB"===K.rankdir||"BT"===K.rankdir?lt.width+=lt.labeloffset:lt.height+=lt.labeloffset)})}($)}),K("    removeSelfEdges",function(){!function it($){s.forEach($.edges(),function(K){if(K.v===K.w){var rt=$.node(K.v);rt.selfEdges||(rt.selfEdges=[]),rt.selfEdges.push({e:K,label:$.edge(K)}),$.removeEdge(K)}})}($)}),K("    acyclic",function(){m.run($)}),K("    nestingGraph.run",function(){a.run($)}),K("    rank",function(){g(x.asNonCompoundGraph($))}),K("    injectEdgeLabelProxies",function(){!function F($){s.forEach($.edges(),function(K){var rt=$.edge(K);if(rt.width&&rt.height){var lt=$.node(K.v),mt=$.node(K.w);x.addDummyNode($,"edge-proxy",{rank:(mt.rank-lt.rank)/2+lt.rank,e:K},"_ep")}})}($)}),K("    removeEmptyRanks",function(){r($)}),K("    nestingGraph.cleanup",function(){a.cleanup($)}),K("    normalizeRanks",function(){f($)}),K("    assignRankMinMax",function(){!function G($){var K=0;s.forEach($.nodes(),function(rt){var lt=$.node(rt);lt.borderTop&&(lt.minRank=$.node(lt.borderTop).rank,lt.maxRank=$.node(lt.borderBottom).rank,K=s.max(K,lt.maxRank))}),$.graph().maxRank=K}($)}),K("    removeEdgeLabelProxies",function(){!function z($){s.forEach($.nodes(),function(K){var rt=$.node(K);"edge-proxy"===rt.dummy&&($.edge(rt.e).labelRank=rt.rank,$.removeNode(K))})}($)}),K("    normalize.run",function(){p.run($)}),K("    parentDummyChains",function(){c($)}),K("    addBorderSegments",function(){l($)}),K("    order",function(){h($)}),K("    insertSelfEdges",function(){!function tt($){var K=x.buildLayerMatrix($);s.forEach(K,function(rt){var lt=0;s.forEach(rt,function(mt,dt){var _t=$.node(mt);_t.order=dt+lt,s.forEach(_t.selfEdges,function(bt){x.addDummyNode($,"selfedge",{width:bt.label.width,height:bt.label.height,rank:_t.rank,order:dt+ ++lt,e:bt.e,label:bt.label},"_se")}),delete _t.selfEdges})})}($)}),K("    adjustCoordinateSystem",function(){t.adjust($)}),K("    position",function(){d($)}),K("    positionSelfEdges",function(){!function ut($){s.forEach($.nodes(),function(K){var rt=$.node(K);if("selfedge"===rt.dummy){var lt=$.node(rt.e.v),mt=lt.x+lt.width/2,dt=lt.y,_t=rt.x-mt,bt=lt.height/2;$.setEdge(rt.e,rt.label),$.removeNode(K),rt.label.points=[{x:mt+2*_t/3,y:dt-bt},{x:mt+5*_t/6,y:dt-bt},{x:mt+_t,y:dt},{x:mt+5*_t/6,y:dt+bt},{x:mt+2*_t/3,y:dt+bt}],rt.label.x=rt.x,rt.label.y=rt.y}})}($)}),K("    removeBorderNodes",function(){!function W($){s.forEach($.nodes(),function(K){if($.children(K).length){var rt=$.node(K),lt=$.node(rt.borderTop),mt=$.node(rt.borderBottom),dt=$.node(s.last(rt.borderLeft)),_t=$.node(s.last(rt.borderRight));rt.width=Math.abs(_t.x-dt.x),rt.height=Math.abs(mt.y-lt.y),rt.x=dt.x+rt.width/2,rt.y=lt.y+rt.height/2}}),s.forEach($.nodes(),function(K){"border"===$.node(K).dummy&&$.removeNode(K)})}($)}),K("    normalize.undo",function(){p.undo($)}),K("    fixupEdgeLabelCoords",function(){!function Z($){s.forEach($.edges(),function(K){var rt=$.edge(K);if(s.has(rt,"x"))switch(("l"===rt.labelpos||"r"===rt.labelpos)&&(rt.width-=rt.labeloffset),rt.labelpos){case"l":rt.x-=rt.width/2+rt.labeloffset;break;case"r":rt.x+=rt.width/2+rt.labeloffset}})}($)}),K("    undoCoordinateSystem",function(){t.undo($)}),K("    translateGraph",function(){!function Q($){var K=Number.POSITIVE_INFINITY,rt=0,lt=Number.POSITIVE_INFINITY,mt=0,dt=$.graph(),_t=dt.marginx||0,bt=dt.marginy||0;function st(at){var nt=at.x,gt=at.y,Tt=at.width,wt=at.height;K=Math.min(K,nt-Tt/2),rt=Math.max(rt,nt+Tt/2),lt=Math.min(lt,gt-wt/2),mt=Math.max(mt,gt+wt/2)}s.forEach($.nodes(),function(at){st($.node(at))}),s.forEach($.edges(),function(at){var nt=$.edge(at);s.has(nt,"x")&&st(nt)}),K-=_t,lt-=bt,s.forEach($.nodes(),function(at){var nt=$.node(at);nt.x-=K,nt.y-=lt}),s.forEach($.edges(),function(at){var nt=$.edge(at);s.forEach(nt.points,function(gt){gt.x-=K,gt.y-=lt}),s.has(nt,"x")&&(nt.x-=K),s.has(nt,"y")&&(nt.y-=lt)}),dt.width=rt-K+_t,dt.height=mt-lt+bt}($)}),K("    assignNodeIntersects",function(){!function U($){s.forEach($.edges(),function(K){var dt,_t,rt=$.edge(K),lt=$.node(K.v),mt=$.node(K.w);rt.points?(dt=rt.points[0],_t=rt.points[rt.points.length-1]):(rt.points=[],dt=mt,_t=lt),rt.points.unshift(x.intersectRect(lt,dt)),rt.points.push(x.intersectRect(mt,_t))})}($)}),K("    reversePoints",function(){!function X($){s.forEach($.edges(),function(K){var rt=$.edge(K);rt.reversed&&rt.points.reverse()})}($)}),K("    acyclic.undo",function(){m.undo($)})}(lt,rt)}),rt("  updateInputGraph",function(){!function M($,K){s.forEach($.nodes(),function(rt){var lt=$.node(rt),mt=K.node(rt);lt&&(lt.x=mt.x,lt.y=mt.y,K.children(rt).length&&(lt.width=mt.width,lt.height=mt.height))}),s.forEach($.edges(),function(rt){var lt=$.edge(rt),mt=K.edge(rt);lt.points=mt.points,s.has(mt,"x")&&(lt.x=mt.x,lt.y=mt.y)}),$.graph().width=K.graph().width,$.graph().height=K.graph().height}($,lt)})})};var N=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},D=["acyclicer","ranker","rankdir","align"],H=["width","height"],V={width:0,height:0},B=["minlen","weight","width","height","labeloffset"],Y={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function ft($,K){return s.mapValues(s.pick($,K),Number)}function xt($){var K={};return s.forEach($,function(rt,lt){K[lt.toLowerCase()]=rt}),K}},5760:(y,w,i)=>{var s;try{s={cloneDeep:i(733),constant:i(6684),defaults:i(8800),each:i(5474),filter:i(5281),find:i(2516),flatten:i(2274),forEach:i(9851),forIn:i(1176),has:i(4842),isUndefined:i(4235),last:i(5809),map:i(9984),mapValues:i(203),max:i(8176),merge:i(567),min:i(9439),minBy:i(9525),now:i(1710),pick:i(6372),range:i(361),reduce:i(1337),sortBy:i(2906),uniqueId:i(1541),values:i(377),zipObject:i(1617)}}catch{}s||(s=window._),y.exports=s},1230:(y,w,i)=>{var s=i(5760),m=i(1510);function g(a,l,t,h,d,x,b){var C=a.children(b);if(C.length){var A=m.addBorderNode(a,"_bt"),M=m.addBorderNode(a,"_bb"),N=a.node(b);a.setParent(A,b),N.borderTop=A,a.setParent(M,b),N.borderBottom=M,s.forEach(C,function(k){g(a,l,t,h,d,x,k);var D=a.node(k),H=D.borderTop?D.borderTop:k,V=D.borderBottom?D.borderBottom:k,B=D.borderTop?h:2*h,Y=H!==V?1:d-x[b]+1;a.setEdge(A,H,{weight:B,minlen:Y,nestingEdge:!0}),a.setEdge(V,M,{weight:B,minlen:Y,nestingEdge:!0})}),a.parent(b)||a.setEdge(l,A,{weight:0,minlen:d+x[b]})}else b!==l&&a.setEdge(l,b,{weight:0,minlen:t})}y.exports={run:function p(a){var l=m.addDummyNode(a,"root",{},"_root"),t=function f(a){var l={};function t(h,d){var x=a.children(h);x&&x.length&&s.forEach(x,function(b){t(b,d+1)}),l[h]=d}return s.forEach(a.children(),function(h){t(h,1)}),l}(a),h=s.max(s.values(t))-1,d=2*h+1;a.graph().nestingRoot=l,s.forEach(a.edges(),function(b){a.edge(b).minlen*=d});var x=function c(a){return s.reduce(a.edges(),function(l,t){return l+a.edge(t).weight},0)}(a)+1;s.forEach(a.children(),function(b){g(a,l,d,x,h,t,b)}),a.graph().nodeRankFactor=d},cleanup:function r(a){var l=a.graph();a.removeNode(l.nestingRoot),delete l.nestingRoot,s.forEach(a.edges(),function(t){a.edge(t).nestingEdge&&a.removeEdge(t)})}}},1496:(y,w,i)=>{"use strict";var s=i(5760),m=i(1510);y.exports={run:function p(c){c.graph().dummyChains=[],s.forEach(c.edges(),function(r){!function g(c,r){var a=r.v,l=c.node(a).rank,t=r.w,h=c.node(t).rank,d=r.name,x=c.edge(r),b=x.labelRank;if(h!==l+1){var C,A,M;for(c.removeEdge(r),M=0,++l;l<h;++M,++l)x.points=[],C=m.addDummyNode(c,"edge",A={width:0,height:0,edgeLabel:x,edgeObj:r,rank:l},"_d"),l===b&&(A.width=x.width,A.height=x.height,A.dummy="edge-label",A.labelpos=x.labelpos),c.setEdge(a,C,{weight:x.weight},d),0===M&&c.graph().dummyChains.push(C),a=C;c.setEdge(a,t,{weight:x.weight},d)}}(c,r)})},undo:function f(c){s.forEach(c.graph().dummyChains,function(r){var t,a=c.node(r),l=a.edgeLabel;for(c.setEdge(a.edgeObj,l);a.dummy;)t=c.successors(r)[0],c.removeNode(r),l.points.push({x:a.x,y:a.y}),"edge-label"===a.dummy&&(l.x=a.x,l.y=a.y,l.width=a.width,l.height=a.height),a=c.node(r=t)})}}},3034:(y,w,i)=>{var s=i(5760);y.exports=function m(p,g,f){var r,c={};s.forEach(f,function(a){for(var t,h,l=p.parent(a);l;){if((t=p.parent(l))?(h=c[t],c[t]=l):(h=r,r=l),h&&h!==l)return void g.setEdge(h,l);l=t}})}},1323:(y,w,i)=>{var s=i(5760);y.exports=function m(p,g){return s.map(g,function(f){var c=p.inEdges(f);if(c.length){var r=s.reduce(c,function(a,l){var t=p.edge(l),h=p.node(l.v);return{sum:a.sum+t.weight*h.order,weight:a.weight+t.weight}},{sum:0,weight:0});return{v:f,barycenter:r.sum/r.weight,weight:r.weight}}return{v:f}})}},1686:(y,w,i)=>{var s=i(5760),m=i(6456).Graph;y.exports=function p(f,c,r){var a=function g(f){for(var c;f.hasNode(c=s.uniqueId("_root")););return c}(f),l=new m({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(t){return f.node(t)});return s.forEach(f.nodes(),function(t){var h=f.node(t),d=f.parent(t);(h.rank===c||h.minRank<=c&&c<=h.maxRank)&&(l.setNode(t),l.setParent(t,d||a),s.forEach(f[r](t),function(x){var b=x.v===t?x.w:x.v,C=l.edge(b,t),A=s.isUndefined(C)?0:C.weight;l.setEdge(b,t,{weight:f.edge(x).weight+A})}),s.has(h,"minRank")&&l.setNode(t,{borderLeft:h.borderLeft[c],borderRight:h.borderRight[c]}))}),l}},8796:(y,w,i)=>{"use strict";var s=i(5760);function p(g,f,c){for(var r=s.zipObject(c,s.map(c,function(x,b){return b})),a=s.flatten(s.map(f,function(x){return s.sortBy(s.map(g.outEdges(x),function(b){return{pos:r[b.w],weight:g.edge(b).weight}}),"pos")}),!0),l=1;l<c.length;)l<<=1;var t=2*l-1;l-=1;var h=s.map(new Array(t),function(){return 0}),d=0;return s.forEach(a.forEach(function(x){var b=x.pos+l;h[b]+=x.weight;for(var C=0;b>0;)b%2&&(C+=h[b+1]),h[b=b-1>>1]+=x.weight;d+=x.weight*C})),d}y.exports=function m(g,f){for(var c=0,r=1;r<f.length;++r)c+=p(g,f[r-1],f[r]);return c}},2974:(y,w,i)=>{"use strict";var s=i(5760),m=i(9402),p=i(8796),g=i(1057),f=i(1686),c=i(3034),r=i(6456).Graph,a=i(1510);function t(x,b,C){return s.map(b,function(A){return f(x,A,C)})}function h(x,b){var C=new r;s.forEach(x,function(A){var M=A.graph().root,N=g(A,M,C,b);s.forEach(N.vs,function(k,D){A.node(k).order=D}),c(A,C,N.vs)})}function d(x,b){s.forEach(b,function(C){s.forEach(C,function(A,M){x.node(A).order=M})})}y.exports=function l(x){var b=a.maxRank(x),C=t(x,s.range(1,b+1),"inEdges"),A=t(x,s.range(b-1,-1,-1),"outEdges"),M=m(x);d(x,M);for(var k,N=Number.POSITIVE_INFINITY,D=0,H=0;H<4;++D,++H){h(D%2?C:A,D%4>=2),M=a.buildLayerMatrix(x);var V=p(x,M);V<N&&(H=0,k=s.cloneDeep(M),N=V)}d(x,k)}},9402:(y,w,i)=>{"use strict";var s=i(5760);y.exports=function m(p){var g={},f=s.filter(p.nodes(),function(t){return!p.children(t).length}),c=s.max(s.map(f,function(t){return p.node(t).rank})),r=s.map(s.range(c+1),function(){return[]}),l=s.sortBy(f,function(t){return p.node(t).rank});return s.forEach(l,function a(t){if(!s.has(g,t)){g[t]=!0;var h=p.node(t);r[h.rank].push(t),s.forEach(p.successors(t),a)}}),r}},3826:(y,w,i)=>{"use strict";var s=i(5760);y.exports=function m(f,c){var r={};return s.forEach(f,function(l,t){var h=r[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:t};s.isUndefined(l.barycenter)||(h.barycenter=l.barycenter,h.weight=l.weight)}),s.forEach(c.edges(),function(l){var t=r[l.v],h=r[l.w];!s.isUndefined(t)&&!s.isUndefined(h)&&(h.indegree++,t.out.push(r[l.w]))}),function p(f){var c=[];function r(t){return function(h){h.merged||(s.isUndefined(h.barycenter)||s.isUndefined(t.barycenter)||h.barycenter>=t.barycenter)&&function g(f,c){var r=0,a=0;f.weight&&(r+=f.barycenter*f.weight,a+=f.weight),c.weight&&(r+=c.barycenter*c.weight,a+=c.weight),f.vs=c.vs.concat(f.vs),f.barycenter=r/a,f.weight=a,f.i=Math.min(c.i,f.i),c.merged=!0}(t,h)}}function a(t){return function(h){h.in.push(t),0==--h.indegree&&f.push(h)}}for(;f.length;){var l=f.pop();c.push(l),s.forEach(l.in.reverse(),r(l)),s.forEach(l.out,a(l))}return s.map(s.filter(c,function(t){return!t.merged}),function(t){return s.pick(t,["vs","i","barycenter","weight"])})}(s.filter(r,function(l){return!l.indegree}))}},1057:(y,w,i)=>{var s=i(5760),m=i(1323),p=i(3826),g=i(3803);y.exports=function f(a,l,t,h){var d=a.children(l),x=a.node(l),b=x?x.borderLeft:void 0,C=x?x.borderRight:void 0,A={};b&&(d=s.filter(d,function(V){return V!==b&&V!==C}));var M=m(a,d);s.forEach(M,function(V){if(a.children(V.v).length){var B=f(a,V.v,t,h);A[V.v]=B,s.has(B,"barycenter")&&function r(a,l){s.isUndefined(a.barycenter)?(a.barycenter=l.barycenter,a.weight=l.weight):(a.barycenter=(a.barycenter*a.weight+l.barycenter*l.weight)/(a.weight+l.weight),a.weight+=l.weight)}(V,B)}});var N=p(M,t);!function c(a,l){s.forEach(a,function(t){t.vs=s.flatten(t.vs.map(function(h){return l[h]?l[h].vs:h}),!0)})}(N,A);var k=g(N,h);if(b&&(k.vs=s.flatten([b,k.vs,C],!0),a.predecessors(b).length)){var D=a.node(a.predecessors(b)[0]),H=a.node(a.predecessors(C)[0]);s.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+D.order+H.order)/(k.weight+2),k.weight+=2}return k}},3803:(y,w,i)=>{var s=i(5760),m=i(1510);function g(c,r,a){for(var l;r.length&&(l=s.last(r)).i<=a;)r.pop(),c.push(l.vs),a++;return a}y.exports=function p(c,r){var a=m.partition(c,function(A){return s.has(A,"barycenter")}),l=a.lhs,t=s.sortBy(a.rhs,function(A){return-A.i}),h=[],d=0,x=0,b=0;l.sort(function f(c){return function(r,a){return r.barycenter<a.barycenter?-1:r.barycenter>a.barycenter?1:c?a.i-r.i:r.i-a.i}}(!!r)),b=g(h,t,b),s.forEach(l,function(A){b+=A.vs.length,h.push(A.vs),d+=A.barycenter*A.weight,x+=A.weight,b=g(h,t,b)});var C={vs:s.flatten(h,!0)};return x&&(C.barycenter=d/x,C.weight=x),C}},162:(y,w,i)=>{var s=i(5760);y.exports=function m(f){var c=function g(f){var c={},r=0;return s.forEach(f.children(),function a(l){var t=r;s.forEach(f.children(l),a),c[l]={low:t,lim:r++}}),c}(f);s.forEach(f.graph().dummyChains,function(r){for(var a=f.node(r),l=a.edgeObj,t=function p(f,c,r,a){var x,b,l=[],t=[],h=Math.min(c[r].low,c[a].low),d=Math.max(c[r].lim,c[a].lim);x=r;do{x=f.parent(x),l.push(x)}while(x&&(c[x].low>h||d>c[x].lim));for(b=x,x=a;(x=f.parent(x))!==b;)t.push(x);return{path:l.concat(t.reverse()),lca:b}}(f,c,l.v,l.w),h=t.path,d=t.lca,x=0,b=h[x],C=!0;r!==l.w;){if(a=f.node(r),C){for(;(b=h[x])!==d&&f.node(b).maxRank<a.rank;)x++;b===d&&(C=!1)}if(!C){for(;x<h.length-1&&f.node(b=h[x+1]).minRank<=a.rank;)x++;b=h[x]}f.setParent(r,b),r=f.successors(r)[0]}})}},4058:(y,w,i)=>{"use strict";var s=i(5760),m=i(6456).Graph,p=i(1510);function g(N,k){var D={};return s.reduce(k,function H(V,B){var Y=0,O=0,I=V.length,L=s.last(B);return s.forEach(B,function(F,G){var z=function c(N,k){if(N.node(k).dummy)return s.find(N.predecessors(k),function(D){return N.node(D).dummy})}(N,F),Q=z?N.node(z).order:I;(z||F===L)&&(s.forEach(B.slice(O,G+1),function(U){s.forEach(N.predecessors(U),function(Z){var X=N.node(Z),W=X.order;(W<Y||Q<W)&&(!X.dummy||!N.node(U).dummy)&&r(D,Z,U)})}),O=G+1,Y=Q)}),B}),D}function f(N,k){var D={};function H(B,Y,O,I,L){var F;s.forEach(s.range(Y,O),function(G){N.node(F=B[G]).dummy&&s.forEach(N.predecessors(F),function(z){var Q=N.node(z);Q.dummy&&(Q.order<I||Q.order>L)&&r(D,z,F)})})}return s.reduce(k,function V(B,Y){var I,O=-1,L=0;return s.forEach(Y,function(F,G){if("border"===N.node(F).dummy){var z=N.predecessors(F);z.length&&(I=N.node(z[0]).order,H(Y,L,G,O,I),L=G,O=I)}H(Y,L,Y.length,I,B.length)}),Y}),D}function r(N,k,D){if(k>D){var H=k;k=D,D=H}var V=N[k];V||(N[k]=V={}),V[D]=!0}function a(N,k,D){if(k>D){var H=k;k=D,D=H}return s.has(N[k],D)}function l(N,k,D,H){var V={},B={},Y={};return s.forEach(k,function(O){s.forEach(O,function(I,L){V[I]=I,B[I]=I,Y[I]=L})}),s.forEach(k,function(O){var I=-1;s.forEach(O,function(L){var F=H(L);if(F.length)for(var G=((F=s.sortBy(F,function(Z){return Y[Z]})).length-1)/2,z=Math.floor(G),Q=Math.ceil(G);z<=Q;++z){var U=F[z];B[L]===L&&I<Y[U]&&!a(D,L,U)&&(B[U]=L,B[L]=V[L]=V[U],I=Y[U])}})}),{root:V,align:B}}function t(N,k,D,H,V){var B={},Y=function h(N,k,D,H){var V=new m,B=N.graph(),Y=function A(N,k,D){return function(H,V,B){var L,Y=H.node(V),O=H.node(B),I=0;if(I+=Y.width/2,s.has(Y,"labelpos"))switch(Y.labelpos.toLowerCase()){case"l":L=-Y.width/2;break;case"r":L=Y.width/2}if(L&&(I+=D?L:-L),L=0,I+=(Y.dummy?k:N)/2,I+=(O.dummy?k:N)/2,I+=O.width/2,s.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":L=O.width/2;break;case"r":L=-O.width/2}return L&&(I+=D?L:-L),L=0,I}}(B.nodesep,B.edgesep,H);return s.forEach(k,function(O){var I;s.forEach(O,function(L){var F=D[L];if(V.setNode(F),I){var G=D[I],z=V.edge(G,F);V.setEdge(G,F,Math.max(Y(N,L,I),z||0))}I=L})}),V}(N,k,D,V),O=V?"borderLeft":"borderRight";function I(G,z){for(var Q=Y.nodes(),U=Q.pop(),Z={};U;)Z[U]?G(U):(Z[U]=!0,Q.push(U),Q=Q.concat(z(U))),U=Q.pop()}return I(function L(G){B[G]=Y.inEdges(G).reduce(function(z,Q){return Math.max(z,B[Q.v]+Y.edge(Q))},0)},Y.predecessors.bind(Y)),I(function F(G){var z=Y.outEdges(G).reduce(function(U,Z){return Math.min(U,B[Z.w]-Y.edge(Z))},Number.POSITIVE_INFINITY),Q=N.node(G);z!==Number.POSITIVE_INFINITY&&Q.borderType!==O&&(B[G]=Math.max(B[G],z))},Y.successors.bind(Y)),s.forEach(H,function(G){B[G]=B[D[G]]}),B}function d(N,k){return s.minBy(s.values(k),function(D){var H=Number.NEGATIVE_INFINITY,V=Number.POSITIVE_INFINITY;return s.forIn(D,function(B,Y){var O=function M(N,k){return N.node(k).width}(N,Y)/2;H=Math.max(B+O,H),V=Math.min(B-O,V)}),H-V})}function x(N,k){var D=s.values(k),H=s.min(D),V=s.max(D);s.forEach(["u","d"],function(B){s.forEach(["l","r"],function(Y){var L,O=B+Y,I=N[O];if(I!==k){var F=s.values(I);(L="l"===Y?H-s.min(F):V-s.max(F))&&(N[O]=s.mapValues(I,function(G){return G+L}))}})})}function b(N,k){return s.mapValues(N.ul,function(D,H){if(k)return N[k.toLowerCase()][H];var V=s.sortBy(s.map(N,H));return(V[1]+V[2])/2})}y.exports={positionX:function C(N){var V,k=p.buildLayerMatrix(N),D=s.merge(g(N,k),f(N,k)),H={};s.forEach(["u","d"],function(Y){V="u"===Y?k:s.values(k).reverse(),s.forEach(["l","r"],function(O){"r"===O&&(V=s.map(V,function(G){return s.values(G).reverse()}));var I=("u"===Y?N.predecessors:N.successors).bind(N),L=l(0,V,D,I),F=t(N,V,L.root,L.align,"r"===O);"r"===O&&(F=s.mapValues(F,function(G){return-G})),H[Y+O]=F})});var B=d(N,H);return x(H,B),b(H,N.graph().align)},findType1Conflicts:g,findType2Conflicts:f,addConflict:r,hasConflict:a,verticalAlignment:l,horizontalCompaction:t,alignCoordinates:x,findSmallestWidthAlignment:d,balance:b}},8226:(y,w,i)=>{"use strict";var s=i(5760),m=i(1510),p=i(4058).positionX;y.exports=function g(c){(function f(c){var r=m.buildLayerMatrix(c),a=c.graph().ranksep,l=0;s.forEach(r,function(t){var h=s.max(s.map(t,function(d){return c.node(d).height}));s.forEach(t,function(d){c.node(d).y=l+h/2}),l+=h+a})})(c=m.asNonCompoundGraph(c)),s.forEach(p(c),function(r,a){c.node(a).x=r})}},6632:(y,w,i)=>{"use strict";var s=i(5760),m=i(6456).Graph,p=i(1916).slack;function f(a,l){return s.forEach(a.nodes(),function t(h){s.forEach(l.nodeEdges(h),function(d){var x=d.v,b=h===x?d.w:x;!a.hasNode(b)&&!p(l,d)&&(a.setNode(b,{}),a.setEdge(h,b,{}),t(b))})}),a.nodeCount()}function c(a,l){return s.minBy(l.edges(),function(t){if(a.hasNode(t.v)!==a.hasNode(t.w))return p(l,t)})}function r(a,l,t){s.forEach(a.nodes(),function(h){l.node(h).rank+=t})}y.exports=function g(a){var d,x,l=new m({directed:!1}),t=a.nodes()[0],h=a.nodeCount();for(l.setNode(t,{});f(l,a)<h;)d=c(l,a),x=l.hasNode(d.v)?p(a,d):-p(a,d),r(l,a,x);return l}},4124:(y,w,i)=>{"use strict";var m=i(1916).longestPath,p=i(6632),g=i(3804);y.exports=function f(l){switch(l.graph().ranker){case"network-simplex":default:!function a(l){g(l)}(l);break;case"tight-tree":!function r(l){m(l),p(l)}(l);break;case"longest-path":c(l)}};var c=m},3804:(y,w,i)=>{"use strict";var s=i(5760),m=i(6632),p=i(1916).slack,g=i(1916).longestPath,f=i(6456).alg.preorder,c=i(6456).alg.postorder,r=i(1510).simplify;function a(D){D=r(D),g(D);var V,H=m(D);for(d(H),l(H,D);V=b(H);)A(H,D,V,C(H,D,V))}function l(D,H){var V=c(D,D.nodes());V=V.slice(0,V.length-1),s.forEach(V,function(B){!function t(D,H,V){var B=D.node(V);D.edge(V,B.parent).cutvalue=h(D,H,V)}(D,H,B)})}function h(D,H,V){var Y=D.node(V).parent,O=!0,I=H.edge(V,Y),L=0;return I||(O=!1,I=H.edge(Y,V)),L=I.weight,s.forEach(H.nodeEdges(V),function(F){var G=F.v===V,z=G?F.w:F.v;if(z!==Y){var Q=G===O,U=H.edge(F).weight;if(L+=Q?U:-U,function N(D,H,V){return D.hasEdge(H,V)}(D,V,z)){var Z=D.edge(V,z).cutvalue;L+=Q?-Z:Z}}}),L}function d(D,H){arguments.length<2&&(H=D.nodes()[0]),x(D,{},1,H)}function x(D,H,V,B,Y){var O=V,I=D.node(B);return H[B]=!0,s.forEach(D.neighbors(B),function(L){s.has(H,L)||(V=x(D,H,V,L,B))}),I.low=O,I.lim=V++,Y?I.parent=Y:delete I.parent,V}function b(D){return s.find(D.edges(),function(H){return D.edge(H).cutvalue<0})}function C(D,H,V){var B=V.v,Y=V.w;H.hasEdge(B,Y)||(B=V.w,Y=V.v);var O=D.node(B),I=D.node(Y),L=O,F=!1;O.lim>I.lim&&(L=I,F=!0);var G=s.filter(H.edges(),function(z){return F===k(0,D.node(z.v),L)&&F!==k(0,D.node(z.w),L)});return s.minBy(G,function(z){return p(H,z)})}function A(D,H,V,B){D.removeEdge(V.v,V.w),D.setEdge(B.v,B.w,{}),d(D),l(D,H),function M(D,H){var V=s.find(D.nodes(),function(Y){return!H.node(Y).parent}),B=f(D,V);B=B.slice(1),s.forEach(B,function(Y){var O=D.node(Y).parent,I=H.edge(Y,O),L=!1;I||(I=H.edge(O,Y),L=!0),H.node(Y).rank=H.node(O).rank+(L?I.minlen:-I.minlen)})}(D,H)}function k(D,H,V){return V.low<=H.lim&&H.lim<=V.lim}y.exports=a,a.initLowLimValues=d,a.initCutValues=l,a.calcCutValue=h,a.leaveEdge=b,a.enterEdge=C,a.exchangeEdges=A},1916:(y,w,i)=>{"use strict";var s=i(5760);y.exports={longestPath:function m(g){var f={};s.forEach(g.sources(),function c(r){var a=g.node(r);if(s.has(f,r))return a.rank;f[r]=!0;var l=s.min(s.map(g.outEdges(r),function(t){return c(t.w)-g.edge(t).minlen}));return(l===Number.POSITIVE_INFINITY||null==l)&&(l=0),a.rank=l})},slack:function p(g,f){return g.node(f.w).rank-g.node(f.v).rank-g.edge(f).minlen}}},1510:(y,w,i)=>{"use strict";var s=i(5760),m=i(6456).Graph;function p(M,N,k,D){var H;do{H=s.uniqueId(D)}while(M.hasNode(H));return k.dummy=N,M.setNode(H,k),H}function x(M){return s.max(s.map(M.nodes(),function(N){var k=M.node(N).rank;if(!s.isUndefined(k))return k}))}y.exports={addDummyNode:p,simplify:function g(M){var N=(new m).setGraph(M.graph());return s.forEach(M.nodes(),function(k){N.setNode(k,M.node(k))}),s.forEach(M.edges(),function(k){var D=N.edge(k.v,k.w)||{weight:0,minlen:1},H=M.edge(k);N.setEdge(k.v,k.w,{weight:D.weight+H.weight,minlen:Math.max(D.minlen,H.minlen)})}),N},asNonCompoundGraph:function f(M){var N=new m({multigraph:M.isMultigraph()}).setGraph(M.graph());return s.forEach(M.nodes(),function(k){M.children(k).length||N.setNode(k,M.node(k))}),s.forEach(M.edges(),function(k){N.setEdge(k,M.edge(k))}),N},successorWeights:function c(M){var N=s.map(M.nodes(),function(k){var D={};return s.forEach(M.outEdges(k),function(H){D[H.w]=(D[H.w]||0)+M.edge(H).weight}),D});return s.zipObject(M.nodes(),N)},predecessorWeights:function r(M){var N=s.map(M.nodes(),function(k){var D={};return s.forEach(M.inEdges(k),function(H){D[H.v]=(D[H.v]||0)+M.edge(H).weight}),D});return s.zipObject(M.nodes(),N)},intersectRect:function a(M,N){var O,I,k=M.x,D=M.y,H=N.x-k,V=N.y-D,B=M.width/2,Y=M.height/2;if(!H&&!V)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(V)*B>Math.abs(H)*Y?(V<0&&(Y=-Y),O=Y*H/V,I=Y):(H<0&&(B=-B),O=B,I=B*V/H),{x:k+O,y:D+I}},buildLayerMatrix:function l(M){var N=s.map(s.range(x(M)+1),function(){return[]});return s.forEach(M.nodes(),function(k){var D=M.node(k),H=D.rank;s.isUndefined(H)||(N[H][D.order]=k)}),N},normalizeRanks:function t(M){var N=s.min(s.map(M.nodes(),function(k){return M.node(k).rank}));s.forEach(M.nodes(),function(k){var D=M.node(k);s.has(D,"rank")&&(D.rank-=N)})},removeEmptyRanks:function h(M){var N=s.min(s.map(M.nodes(),function(V){return M.node(V).rank})),k=[];s.forEach(M.nodes(),function(V){var B=M.node(V).rank-N;k[B]||(k[B]=[]),k[B].push(V)});var D=0,H=M.graph().nodeRankFactor;s.forEach(k,function(V,B){s.isUndefined(V)&&B%H!=0?--D:D&&s.forEach(V,function(Y){M.node(Y).rank+=D})})},addBorderNode:function d(M,N,k,D){var H={width:0,height:0};return arguments.length>=4&&(H.rank=k,H.order=D),p(M,"border",H,N)},maxRank:x,partition:function b(M,N){var k={lhs:[],rhs:[]};return s.forEach(M,function(D){N(D)?k.lhs.push(D):k.rhs.push(D)}),k},time:function C(M,N){var k=s.now();try{return N()}finally{console.log(M+" time: "+(s.now()-k)+"ms")}},notime:function A(M,N){return N()}}},8126:y=>{y.exports="0.8.5"},5510:(y,w,i)=>{var s=i(1838);y.exports={Graph:s.Graph,json:i(1088),alg:i(3430),version:s.version}},6730:(y,w,i)=>{var s=i(9138);y.exports=function m(p){var c,g={},f=[];function r(a){s.has(g,a)||(g[a]=!0,c.push(a),s.each(p.successors(a),r),s.each(p.predecessors(a),r))}return s.each(p.nodes(),function(a){c=[],r(a),c.length&&f.push(c)}),f}},2163:(y,w,i)=>{var s=i(9138);function p(g,f,c,r,a,l){s.has(r,f)||(r[f]=!0,c||l.push(f),s.each(a(f),function(t){p(g,t,c,r,a,l)}),c&&l.push(f))}y.exports=function m(g,f,c){s.isArray(f)||(f=[f]);var r=(g.isDirected()?g.successors:g.neighbors).bind(g),a=[],l={};return s.each(f,function(t){if(!g.hasNode(t))throw new Error("Graph does not have node: "+t);p(g,t,"post"===c,l,r,a)}),a}},5668:(y,w,i)=>{var s=i(8969),m=i(9138);y.exports=function p(g,f,c){return m.transform(g.nodes(),function(r,a){r[a]=s(g,a,f,c)},{})}},8969:(y,w,i)=>{var s=i(9138),m=i(1919);y.exports=function g(c,r,a,l){return function f(c,r,a,l){var d,x,t={},h=new m,b=function(C){var A=C.v!==d?C.v:C.w,M=t[A],N=a(C),k=x.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+C+" Weight: "+N);k<M.distance&&(M.distance=k,M.predecessor=d,h.decrease(A,k))};for(c.nodes().forEach(function(C){var A=C===r?0:Number.POSITIVE_INFINITY;t[C]={distance:A},h.add(C,A)});h.size()>0&&(d=h.removeMin(),(x=t[d]).distance!==Number.POSITIVE_INFINITY);)l(d).forEach(b);return t}(c,String(r),a||p,l||function(t){return c.outEdges(t)})};var p=s.constant(1)},9611:(y,w,i)=>{var s=i(9138),m=i(3585);y.exports=function p(g){return s.filter(m(g),function(f){return f.length>1||1===f.length&&g.hasEdge(f[0],f[0])})}},2881:(y,w,i)=>{var s=i(9138);y.exports=function p(f,c,r){return function g(f,c,r){var a={},l=f.nodes();return l.forEach(function(t){a[t]={},a[t][t]={distance:0},l.forEach(function(h){t!==h&&(a[t][h]={distance:Number.POSITIVE_INFINITY})}),r(t).forEach(function(h){var d=h.v===t?h.w:h.v,x=c(h);a[t][d]={distance:x,predecessor:t}})}),l.forEach(function(t){var h=a[t];l.forEach(function(d){var x=a[d];l.forEach(function(b){var A=h[b],M=x[b],N=x[t].distance+A.distance;N<M.distance&&(M.distance=N,M.predecessor=A.predecessor)})})}),a}(f,c||m,r||function(a){return f.outEdges(a)})};var m=s.constant(1)},3430:(y,w,i)=>{y.exports={components:i(6730),dijkstra:i(8969),dijkstraAll:i(5668),findCycles:i(9611),floydWarshall:i(2881),isAcyclic:i(6693),postorder:i(6694),preorder:i(5330),prim:i(6823),tarjan:i(3585),topsort:i(2180)}},6693:(y,w,i)=>{var s=i(2180);y.exports=function m(p){try{s(p)}catch(g){if(g instanceof s.CycleException)return!1;throw g}return!0}},6694:(y,w,i)=>{var s=i(2163);y.exports=function m(p,g){return s(p,g,"post")}},5330:(y,w,i)=>{var s=i(2163);y.exports=function m(p,g){return s(p,g,"pre")}},6823:(y,w,i)=>{var s=i(9138),m=i(6568),p=i(1919);y.exports=function g(f,c){var t,r=new m,a={},l=new p;function h(x){var b=x.v===t?x.w:x.v,C=l.priority(b);if(void 0!==C){var A=c(x);A<C&&(a[b]=t,l.decrease(b,A))}}if(0===f.nodeCount())return r;s.each(f.nodes(),function(x){l.add(x,Number.POSITIVE_INFINITY),r.setNode(x)}),l.decrease(f.nodes()[0],0);for(var d=!1;l.size()>0;){if(t=l.removeMin(),s.has(a,t))r.setEdge(t,a[t]);else{if(d)throw new Error("Input graph is not connected: "+f);d=!0}f.nodeEdges(t).forEach(h)}return r}},3585:(y,w,i)=>{var s=i(9138);y.exports=function m(p){var g=0,f=[],c={},r=[];function a(l){var t=c[l]={onStack:!0,lowlink:g,index:g++};if(f.push(l),p.successors(l).forEach(function(x){s.has(c,x)?c[x].onStack&&(t.lowlink=Math.min(t.lowlink,c[x].index)):(a(x),t.lowlink=Math.min(t.lowlink,c[x].lowlink))}),t.lowlink===t.index){var d,h=[];do{d=f.pop(),c[d].onStack=!1,h.push(d)}while(l!==d);r.push(h)}}return p.nodes().forEach(function(l){s.has(c,l)||a(l)}),r}},2180:(y,w,i)=>{var s=i(9138);function m(g){var f={},c={},r=[];if(s.each(g.sinks(),function a(l){if(s.has(c,l))throw new p;s.has(f,l)||(c[l]=!0,f[l]=!0,s.each(g.predecessors(l),a),delete c[l],r.push(l))}),s.size(f)!==g.nodeCount())throw new p;return r}function p(){}y.exports=m,m.CycleException=p,p.prototype=new Error},1919:(y,w,i)=>{var s=i(9138);function m(){this._arr=[],this._keyIndices={}}y.exports=m,m.prototype.size=function(){return this._arr.length},m.prototype.keys=function(){return this._arr.map(function(p){return p.key})},m.prototype.has=function(p){return s.has(this._keyIndices,p)},m.prototype.priority=function(p){var g=this._keyIndices[p];if(void 0!==g)return this._arr[g].priority},m.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},m.prototype.add=function(p,g){var f=this._keyIndices;if(p=String(p),!s.has(f,p)){var c=this._arr,r=c.length;return f[p]=r,c.push({key:p,priority:g}),this._decrease(r),!0}return!1},m.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var p=this._arr.pop();return delete this._keyIndices[p.key],this._heapify(0),p.key},m.prototype.decrease=function(p,g){var f=this._keyIndices[p];if(g>this._arr[f].priority)throw new Error("New priority is greater than current priority. Key: "+p+" Old: "+this._arr[f].priority+" New: "+g);this._arr[f].priority=g,this._decrease(f)},m.prototype._heapify=function(p){var g=this._arr,f=2*p,c=f+1,r=p;f<g.length&&(r=g[f].priority<g[r].priority?f:r,c<g.length&&(r=g[c].priority<g[r].priority?c:r),r!==p&&(this._swap(p,r),this._heapify(r)))},m.prototype._decrease=function(p){for(var c,g=this._arr,f=g[p].priority;0!==p&&!(g[c=p>>1].priority<f);)this._swap(p,c),p=c},m.prototype._swap=function(p,g){var f=this._arr,c=this._keyIndices,r=f[p],a=f[g];f[p]=a,f[g]=r,c[a.key]=p,c[r.key]=g}},6568:(y,w,i)=>{"use strict";var s=i(9138);y.exports=f;var p="\0";function f(h){this._isDirected=!s.has(h,"directed")||h.directed,this._isMultigraph=!!s.has(h,"multigraph")&&h.multigraph,this._isCompound=!!s.has(h,"compound")&&h.compound,this._label=void 0,this._defaultNodeLabelFn=s.constant(void 0),this._defaultEdgeLabelFn=s.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[p]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function c(h,d){h[d]?h[d]++:h[d]=1}function r(h,d){--h[d]||delete h[d]}function a(h,d,x,b){var C=""+d,A=""+x;if(!h&&C>A){var M=C;C=A,A=M}return C+"\x01"+A+"\x01"+(s.isUndefined(b)?"\0":b)}function l(h,d,x,b){var C=""+d,A=""+x;if(!h&&C>A){var M=C;C=A,A=M}var N={v:C,w:A};return b&&(N.name=b),N}function t(h,d){return a(h,d.v,d.w,d.name)}f.prototype._nodeCount=0,f.prototype._edgeCount=0,f.prototype.isDirected=function(){return this._isDirected},f.prototype.isMultigraph=function(){return this._isMultigraph},f.prototype.isCompound=function(){return this._isCompound},f.prototype.setGraph=function(h){return this._label=h,this},f.prototype.graph=function(){return this._label},f.prototype.setDefaultNodeLabel=function(h){return s.isFunction(h)||(h=s.constant(h)),this._defaultNodeLabelFn=h,this},f.prototype.nodeCount=function(){return this._nodeCount},f.prototype.nodes=function(){return s.keys(this._nodes)},f.prototype.sources=function(){var h=this;return s.filter(this.nodes(),function(d){return s.isEmpty(h._in[d])})},f.prototype.sinks=function(){var h=this;return s.filter(this.nodes(),function(d){return s.isEmpty(h._out[d])})},f.prototype.setNodes=function(h,d){var x=arguments,b=this;return s.each(h,function(C){x.length>1?b.setNode(C,d):b.setNode(C)}),this},f.prototype.setNode=function(h,d){return s.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=d),this):(this._nodes[h]=arguments.length>1?d:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=p,this._children[h]={},this._children[p][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},f.prototype.node=function(h){return this._nodes[h]},f.prototype.hasNode=function(h){return s.has(this._nodes,h)},f.prototype.removeNode=function(h){var d=this;if(s.has(this._nodes,h)){var x=function(b){d.removeEdge(d._edgeObjs[b])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],s.each(this.children(h),function(b){d.setParent(b)}),delete this._children[h]),s.each(s.keys(this._in[h]),x),delete this._in[h],delete this._preds[h],s.each(s.keys(this._out[h]),x),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},f.prototype.setParent=function(h,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(s.isUndefined(d))d=p;else{for(var x=d+="";!s.isUndefined(x);x=this.parent(x))if(x===h)throw new Error("Setting "+d+" as parent of "+h+" would create a cycle");this.setNode(d)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=d,this._children[d][h]=!0,this},f.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},f.prototype.parent=function(h){if(this._isCompound){var d=this._parent[h];if(d!==p)return d}},f.prototype.children=function(h){if(s.isUndefined(h)&&(h=p),this._isCompound){var d=this._children[h];if(d)return s.keys(d)}else{if(h===p)return this.nodes();if(this.hasNode(h))return[]}},f.prototype.predecessors=function(h){var d=this._preds[h];if(d)return s.keys(d)},f.prototype.successors=function(h){var d=this._sucs[h];if(d)return s.keys(d)},f.prototype.neighbors=function(h){var d=this.predecessors(h);if(d)return s.union(d,this.successors(h))},f.prototype.isLeaf=function(h){return 0===(this.isDirected()?this.successors(h):this.neighbors(h)).length},f.prototype.filterNodes=function(h){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var x=this;s.each(this._nodes,function(A,M){h(M)&&d.setNode(M,A)}),s.each(this._edgeObjs,function(A){d.hasNode(A.v)&&d.hasNode(A.w)&&d.setEdge(A,x.edge(A))});var b={};function C(A){var M=x.parent(A);return void 0===M||d.hasNode(M)?(b[A]=M,M):M in b?b[M]:C(M)}return this._isCompound&&s.each(d.nodes(),function(A){d.setParent(A,C(A))}),d},f.prototype.setDefaultEdgeLabel=function(h){return s.isFunction(h)||(h=s.constant(h)),this._defaultEdgeLabelFn=h,this},f.prototype.edgeCount=function(){return this._edgeCount},f.prototype.edges=function(){return s.values(this._edgeObjs)},f.prototype.setPath=function(h,d){var x=this,b=arguments;return s.reduce(h,function(C,A){return b.length>1?x.setEdge(C,A,d):x.setEdge(C,A),A}),this},f.prototype.setEdge=function(){var h,d,x,b,C=!1,A=arguments[0];"object"==typeof A&&null!==A&&"v"in A?(h=A.v,d=A.w,x=A.name,2===arguments.length&&(b=arguments[1],C=!0)):(h=A,d=arguments[1],x=arguments[3],arguments.length>2&&(b=arguments[2],C=!0)),h=""+h,d=""+d,s.isUndefined(x)||(x=""+x);var M=a(this._isDirected,h,d,x);if(s.has(this._edgeLabels,M))return C&&(this._edgeLabels[M]=b),this;if(!s.isUndefined(x)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(d),this._edgeLabels[M]=C?b:this._defaultEdgeLabelFn(h,d,x);var N=l(this._isDirected,h,d,x);return h=N.v,d=N.w,Object.freeze(N),this._edgeObjs[M]=N,c(this._preds[d],h),c(this._sucs[h],d),this._in[d][M]=N,this._out[h][M]=N,this._edgeCount++,this},f.prototype.edge=function(h,d,x){var b=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,h,d,x);return this._edgeLabels[b]},f.prototype.hasEdge=function(h,d,x){var b=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,h,d,x);return s.has(this._edgeLabels,b)},f.prototype.removeEdge=function(h,d,x){var b=1===arguments.length?t(this._isDirected,arguments[0]):a(this._isDirected,h,d,x),C=this._edgeObjs[b];return C&&(h=C.v,d=C.w,delete this._edgeLabels[b],delete this._edgeObjs[b],r(this._preds[d],h),r(this._sucs[h],d),delete this._in[d][b],delete this._out[h][b],this._edgeCount--),this},f.prototype.inEdges=function(h,d){var x=this._in[h];if(x){var b=s.values(x);return d?s.filter(b,function(C){return C.v===d}):b}},f.prototype.outEdges=function(h,d){var x=this._out[h];if(x){var b=s.values(x);return d?s.filter(b,function(C){return C.w===d}):b}},f.prototype.nodeEdges=function(h,d){var x=this.inEdges(h,d);if(x)return x.concat(this.outEdges(h,d))}},1838:(y,w,i)=>{y.exports={Graph:i(6568),version:i(5089)}},1088:(y,w,i)=>{var s=i(9138),m=i(6568);function g(r){return s.map(r.nodes(),function(a){var l=r.node(a),t=r.parent(a),h={v:a};return s.isUndefined(l)||(h.value=l),s.isUndefined(t)||(h.parent=t),h})}function f(r){return s.map(r.edges(),function(a){var l=r.edge(a),t={v:a.v,w:a.w};return s.isUndefined(a.name)||(t.name=a.name),s.isUndefined(l)||(t.value=l),t})}y.exports={write:function p(r){var a={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:g(r),edges:f(r)};return s.isUndefined(r.graph())||(a.value=s.clone(r.graph())),a},read:function c(r){var a=new m(r.options).setGraph(r.value);return s.each(r.nodes,function(l){a.setNode(l.v,l.value),l.parent&&a.setParent(l.v,l.parent)}),s.each(r.edges,function(l){a.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),a}}},9138:(y,w,i)=>{var s;try{s={clone:i(1094),constant:i(6684),each:i(5474),filter:i(5281),has:i(4842),isArray:i(1503),isEmpty:i(1973),isFunction:i(5946),isUndefined:i(4235),keys:i(118),map:i(9984),reduce:i(1337),size:i(5637),transform:i(9416),union:i(8921),values:i(377)}}catch{}s||(s=window._),y.exports=s},5089:y=>{y.exports="2.1.8"},7244:(y,w,i)=>{var p=i(3436)(i(2119),"DataView");y.exports=p},4994:(y,w,i)=>{var s=i(4312),m=i(6421),p=i(5764),g=i(8685),f=i(6676);function c(r){var a=-1,l=null==r?0:r.length;for(this.clear();++a<l;){var t=r[a];this.set(t[0],t[1])}}c.prototype.clear=s,c.prototype.delete=m,c.prototype.get=p,c.prototype.has=g,c.prototype.set=f,y.exports=c},9215:(y,w,i)=>{var s=i(1840),m=i(4378),p=i(4981),g=i(7343),f=i(8895);function c(r){var a=-1,l=null==r?0:r.length;for(this.clear();++a<l;){var t=r[a];this.set(t[0],t[1])}}c.prototype.clear=s,c.prototype.delete=m,c.prototype.get=p,c.prototype.has=g,c.prototype.set=f,y.exports=c},1501:(y,w,i)=>{var p=i(3436)(i(2119),"Map");y.exports=p},9850:(y,w,i)=>{var s=i(638),m=i(1184),p=i(866),g=i(3771),f=i(1772);function c(r){var a=-1,l=null==r?0:r.length;for(this.clear();++a<l;){var t=r[a];this.set(t[0],t[1])}}c.prototype.clear=s,c.prototype.delete=m,c.prototype.get=p,c.prototype.has=g,c.prototype.set=f,y.exports=c},4267:(y,w,i)=>{var p=i(3436)(i(2119),"Promise");y.exports=p},6323:(y,w,i)=>{var p=i(3436)(i(2119),"Set");y.exports=p},8849:(y,w,i)=>{var s=i(9850),m=i(4600),p=i(1387);function g(f){var c=-1,r=null==f?0:f.length;for(this.__data__=new s;++c<r;)this.add(f[c])}g.prototype.add=g.prototype.push=m,g.prototype.has=p,y.exports=g},2858:(y,w,i)=>{var s=i(9215),m=i(3720),p=i(4410),g=i(5576),f=i(2247),c=i(1585);function r(a){var l=this.__data__=new s(a);this.size=l.size}r.prototype.clear=m,r.prototype.delete=p,r.prototype.get=g,r.prototype.has=f,r.prototype.set=c,y.exports=r},443:(y,w,i)=>{var s=i(2119);y.exports=s.Symbol},3457:(y,w,i)=>{var s=i(2119);y.exports=s.Uint8Array},4243:(y,w,i)=>{var p=i(3436)(i(2119),"WeakMap");y.exports=p},6999:y=>{y.exports=function w(i,s,m){switch(m.length){case 0:return i.call(s);case 1:return i.call(s,m[0]);case 2:return i.call(s,m[0],m[1]);case 3:return i.call(s,m[0],m[1],m[2])}return i.apply(s,m)}},6837:y=>{y.exports=function w(i,s){for(var m=-1,p=null==i?0:i.length;++m<p&&!1!==s(i[m],m,i););return i}},9779:y=>{y.exports=function w(i,s){for(var m=-1,p=null==i?0:i.length,g=0,f=[];++m<p;){var c=i[m];s(c,m,i)&&(f[g++]=c)}return f}},1253:(y,w,i)=>{var s=i(4164);y.exports=function m(p,g){return!(null==p||!p.length)&&s(p,g,0)>-1}},177:y=>{y.exports=function w(i,s,m){for(var p=-1,g=null==i?0:i.length;++p<g;)if(m(s,i[p]))return!0;return!1}},2271:(y,w,i)=>{var s=i(5334),m=i(7151),p=i(1503),g=i(891),f=i(8442),c=i(8159),a=Object.prototype.hasOwnProperty;y.exports=function l(t,h){var d=p(t),x=!d&&m(t),b=!d&&!x&&g(t),C=!d&&!x&&!b&&c(t),A=d||x||b||C,M=A?s(t.length,String):[],N=M.length;for(var k in t)(h||a.call(t,k))&&(!A||!("length"==k||b&&("offset"==k||"parent"==k)||C&&("buffer"==k||"byteLength"==k||"byteOffset"==k)||f(k,N)))&&M.push(k);return M}},4633:y=>{y.exports=function w(i,s){for(var m=-1,p=null==i?0:i.length,g=Array(p);++m<p;)g[m]=s(i[m],m,i);return g}},4883:y=>{y.exports=function w(i,s){for(var m=-1,p=s.length,g=i.length;++m<p;)i[g+m]=s[m];return i}},8745:y=>{y.exports=function w(i,s,m,p){var g=-1,f=null==i?0:i.length;for(p&&f&&(m=i[++g]);++g<f;)m=s(m,i[g],g,i);return m}},9503:y=>{y.exports=function w(i,s){for(var m=-1,p=null==i?0:i.length;++m<p;)if(s(i[m],m,i))return!0;return!1}},5481:(y,w,i)=>{var m=i(1384)("length");y.exports=m},9276:(y,w,i)=>{var s=i(5683),m=i(217);y.exports=function p(g,f,c){(void 0!==c&&!m(g[f],c)||void 0===c&&!(f in g))&&s(g,f,c)}},9719:(y,w,i)=>{var s=i(5683),m=i(217),g=Object.prototype.hasOwnProperty;y.exports=function f(c,r,a){var l=c[r];(!g.call(c,r)||!m(l,a)||void 0===a&&!(r in c))&&s(c,r,a)}},3503:(y,w,i)=>{var s=i(217);y.exports=function m(p,g){for(var f=p.length;f--;)if(s(p[f][0],g))return f;return-1}},4121:(y,w,i)=>{var s=i(1989),m=i(118);y.exports=function p(g,f){return g&&s(f,m(f),g)}},9287:(y,w,i)=>{var s=i(1989),m=i(6555);y.exports=function p(g,f){return g&&s(f,m(f),g)}},5683:(y,w,i)=>{var s=i(6713);y.exports=function m(p,g,f){"__proto__"==g&&s?s(p,g,{configurable:!0,enumerable:!0,value:f,writable:!0}):p[g]=f}},4462:(y,w,i)=>{var s=i(2858),m=i(6837),p=i(9719),g=i(4121),f=i(9287),c=i(9292),r=i(9454),a=i(4444),l=i(9905),t=i(7597),h=i(6967),d=i(8794),x=i(6782),b=i(7878),C=i(4264),A=i(1503),M=i(891),N=i(3222),k=i(5940),D=i(799),H=i(118),V=i(6555),I="[object Arguments]",Q="[object Function]",W="[object Object]",gt={};gt[I]=gt["[object Array]"]=gt["[object ArrayBuffer]"]=gt["[object DataView]"]=gt["[object Boolean]"]=gt["[object Date]"]=gt["[object Float32Array]"]=gt["[object Float64Array]"]=gt["[object Int8Array]"]=gt["[object Int16Array]"]=gt["[object Int32Array]"]=gt["[object Map]"]=gt["[object Number]"]=gt[W]=gt["[object RegExp]"]=gt["[object Set]"]=gt["[object String]"]=gt["[object Symbol]"]=gt["[object Uint8Array]"]=gt["[object Uint8ClampedArray]"]=gt["[object Uint16Array]"]=gt["[object Uint32Array]"]=!0,gt["[object Error]"]=gt[Q]=gt["[object WeakMap]"]=!1,y.exports=function Tt(wt,Wt,Ft,nn,ue,Bt){var St,re=1&Wt,Kt=2&Wt,De=4&Wt;if(Ft&&(St=ue?Ft(wt,nn,ue,Bt):Ft(wt)),void 0!==St)return St;if(!k(wt))return wt;var _e=A(wt);if(_e){if(St=x(wt),!re)return r(wt,St)}else{var zt=d(wt),Ge=zt==Q||"[object GeneratorFunction]"==zt;if(M(wt))return c(wt,re);if(zt==W||zt==I||Ge&&!ue){if(St=Kt||Ge?{}:C(wt),!re)return Kt?l(wt,f(St,wt)):a(wt,g(St,wt))}else{if(!gt[zt])return ue?wt:{};St=b(wt,zt,re)}}Bt||(Bt=new s);var Ze=Bt.get(wt);if(Ze)return Ze;Bt.set(wt,St),D(wt)?wt.forEach(function(Ht){St.add(Tt(Ht,Wt,Ft,Ht,wt,Bt))}):N(wt)&&wt.forEach(function(Ht,Yt){St.set(Yt,Tt(Ht,Wt,Ft,Yt,wt,Bt))});var Ue=_e?void 0:(De?Kt?h:t:Kt?V:H)(wt);return m(Ue||wt,function(Ht,Yt){Ue&&(Ht=wt[Yt=Ht]),p(St,Yt,Tt(Ht,Wt,Ft,Yt,wt,Bt))}),St}},8858:(y,w,i)=>{var s=i(5940),m=Object.create,p=function(){function g(){}return function(f){if(!s(f))return{};if(m)return m(f);g.prototype=f;var c=new g;return g.prototype=void 0,c}}();y.exports=p},3132:(y,w,i)=>{var s=i(5184),p=i(6539)(s);y.exports=p},7308:(y,w,i)=>{var s=i(4129);y.exports=function m(p,g,f){for(var c=-1,r=p.length;++c<r;){var a=p[c],l=g(a);if(null!=l&&(void 0===t?l==l&&!s(l):f(l,t)))var t=l,h=a}return h}},3609:(y,w,i)=>{var s=i(3132);y.exports=function m(p,g){var f=[];return s(p,function(c,r,a){g(c,r,a)&&f.push(c)}),f}},5317:y=>{y.exports=function w(i,s,m,p){for(var g=i.length,f=m+(p?1:-1);p?f--:++f<g;)if(s(i[f],f,i))return f;return-1}},686:(y,w,i)=>{var s=i(4883),m=i(5039);y.exports=function p(g,f,c,r,a){var l=-1,t=g.length;for(c||(c=m),a||(a=[]);++l<t;){var h=g[l];f>0&&c(h)?f>1?p(h,f-1,c,r,a):s(a,h):r||(a[a.length]=h)}return a}},755:(y,w,i)=>{var m=i(456)();y.exports=m},5184:(y,w,i)=>{var s=i(755),m=i(118);y.exports=function p(g,f){return g&&s(g,f,m)}},5456:(y,w,i)=>{var s=i(6884),m=i(8533);y.exports=function p(g,f){for(var c=0,r=(f=s(f,g)).length;null!=g&&c<r;)g=g[m(f[c++])];return c&&c==r?g:void 0}},8247:(y,w,i)=>{var s=i(4883),m=i(1503);y.exports=function p(g,f,c){var r=f(g);return m(g)?r:s(r,c(g))}},3337:(y,w,i)=>{var s=i(443),m=i(1318),p=i(2902),c=s?s.toStringTag:void 0;y.exports=function r(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":c&&c in Object(a)?m(a):p(a)}},1100:y=>{y.exports=function w(i,s){return i>s}},4781:y=>{var i=Object.prototype.hasOwnProperty;y.exports=function s(m,p){return null!=m&&i.call(m,p)}},9989:y=>{y.exports=function w(i,s){return null!=i&&s in Object(i)}},4164:(y,w,i)=>{var s=i(5317),m=i(968),p=i(4977);y.exports=function g(f,c,r){return c==c?p(f,c,r):s(f,m,r)}},186:(y,w,i)=>{var s=i(3337),m=i(2671);y.exports=function g(f){return m(f)&&"[object Arguments]"==s(f)}},5740:(y,w,i)=>{var s=i(8325),m=i(2671);y.exports=function p(g,f,c,r,a){return g===f||(null==g||null==f||!m(g)&&!m(f)?g!=g&&f!=f:s(g,f,c,r,p,a))}},8325:(y,w,i)=>{var s=i(2858),m=i(3914),p=i(7058),g=i(2286),f=i(8794),c=i(1503),r=i(891),a=i(8159),t="[object Arguments]",h="[object Array]",d="[object Object]",b=Object.prototype.hasOwnProperty;y.exports=function C(A,M,N,k,D,H){var V=c(A),B=c(M),Y=V?h:f(A),O=B?h:f(M),I=(Y=Y==t?d:Y)==d,L=(O=O==t?d:O)==d,F=Y==O;if(F&&r(A)){if(!r(M))return!1;V=!0,I=!1}if(F&&!I)return H||(H=new s),V||a(A)?m(A,M,N,k,D,H):p(A,M,Y,N,k,D,H);if(!(1&N)){var G=I&&b.call(A,"__wrapped__"),z=L&&b.call(M,"__wrapped__");if(G||z){var Q=G?A.value():A,U=z?M.value():M;return H||(H=new s),D(Q,U,N,k,H)}}return!!F&&(H||(H=new s),g(A,M,N,k,D,H))}},7021:(y,w,i)=>{var s=i(8794),m=i(2671);y.exports=function g(f){return m(f)&&"[object Map]"==s(f)}},431:(y,w,i)=>{var s=i(2858),m=i(5740);y.exports=function f(c,r,a,l){var t=a.length,h=t,d=!l;if(null==c)return!h;for(c=Object(c);t--;){var x=a[t];if(d&&x[2]?x[1]!==c[x[0]]:!(x[0]in c))return!1}for(;++t<h;){var b=(x=a[t])[0],C=c[b],A=x[1];if(d&&x[2]){if(void 0===C&&!(b in c))return!1}else{var M=new s;if(l)var N=l(C,A,b,c,r,M);if(!(void 0===N?m(A,C,3,l,M):N))return!1}}return!0}},968:y=>{y.exports=function w(i){return i!=i}},7304:(y,w,i)=>{var s=i(5946),m=i(1943),p=i(5940),g=i(2827),c=/^\[object .+?Constructor\]$/,h=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");y.exports=function d(x){return!(!p(x)||m(x))&&(s(x)?h:c).test(g(x))}},771:(y,w,i)=>{var s=i(8794),m=i(2671);y.exports=function g(f){return m(f)&&"[object Set]"==s(f)}},1083:(y,w,i)=>{var s=i(3337),m=i(6231),p=i(2671),F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1,y.exports=function G(z){return p(z)&&m(z.length)&&!!F[s(z)]}},6517:(y,w,i)=>{var s=i(8133),m=i(9458),p=i(2608),g=i(1503),f=i(7495);y.exports=function c(r){return"function"==typeof r?r:null==r?p:"object"==typeof r?g(r)?m(r[0],r[1]):s(r):f(r)}},1172:(y,w,i)=>{var s=i(5488),m=i(5491),g=Object.prototype.hasOwnProperty;y.exports=function f(c){if(!s(c))return m(c);var r=[];for(var a in Object(c))g.call(c,a)&&"constructor"!=a&&r.push(a);return r}},2809:(y,w,i)=>{var s=i(5940),m=i(5488),p=i(2158),f=Object.prototype.hasOwnProperty;y.exports=function c(r){if(!s(r))return p(r);var a=m(r),l=[];for(var t in r)"constructor"==t&&(a||!f.call(r,t))||l.push(t);return l}},9069:y=>{y.exports=function w(i,s){return i<s}},2046:(y,w,i)=>{var s=i(3132),m=i(6507);y.exports=function p(g,f){var c=-1,r=m(g)?Array(g.length):[];return s(g,function(a,l,t){r[++c]=f(a,l,t)}),r}},8133:(y,w,i)=>{var s=i(431),m=i(2379),p=i(642);y.exports=function g(f){var c=m(f);return 1==c.length&&c[0][2]?p(c[0][0],c[0][1]):function(r){return r===f||s(r,f,c)}}},9458:(y,w,i)=>{var s=i(5740),m=i(8817),p=i(8492),g=i(5352),f=i(2442),c=i(642),r=i(8533);y.exports=function t(h,d){return g(h)&&f(d)?c(r(h),d):function(x){var b=m(x,h);return void 0===b&&b===d?p(x,h):s(d,b,3)}}},3842:(y,w,i)=>{var s=i(2858),m=i(9276),p=i(755),g=i(3675),f=i(5940),c=i(6555),r=i(9351);y.exports=function a(l,t,h,d,x){l!==t&&p(t,function(b,C){if(x||(x=new s),f(b))g(l,t,C,h,a,d,x);else{var A=d?d(r(l,C),b,C+"",l,t,x):void 0;void 0===A&&(A=b),m(l,C,A)}},c)}},3675:(y,w,i)=>{var s=i(9276),m=i(9292),p=i(5208),g=i(9454),f=i(4264),c=i(7151),r=i(1503),a=i(1330),l=i(891),t=i(5946),h=i(5940),d=i(7614),x=i(8159),b=i(9351),C=i(8067);y.exports=function A(M,N,k,D,H,V,B){var Y=b(M,k),O=b(N,k),I=B.get(O);if(I)s(M,k,I);else{var L=V?V(Y,O,k+"",M,N,B):void 0,F=void 0===L;if(F){var G=r(O),z=!G&&l(O),Q=!G&&!z&&x(O);L=O,G||z||Q?r(Y)?L=Y:a(Y)?L=g(Y):z?(F=!1,L=m(O,!0)):Q?(F=!1,L=p(O,!0)):L=[]:d(O)||c(O)?(L=Y,c(Y)?L=C(Y):(!h(Y)||t(Y))&&(L=f(O))):F=!1}F&&(B.set(O,L),H(L,O,D,V,B),B.delete(O)),s(M,k,L)}}},6119:(y,w,i)=>{var s=i(4633),m=i(5456),p=i(6517),g=i(2046),f=i(8750),c=i(5647),r=i(1215),a=i(2608),l=i(1503);y.exports=function t(h,d,x){d=d.length?s(d,function(A){return l(A)?function(M){return m(M,1===A.length?A[0]:A)}:A}):[a];var b=-1;d=s(d,c(p));var C=g(h,function(A,M,N){return{criteria:s(d,function(D){return D(A)}),index:++b,value:A}});return f(C,function(A,M){return r(A,M,x)})}},3021:(y,w,i)=>{var s=i(5495),m=i(8492);y.exports=function p(g,f){return s(g,f,function(c,r){return m(g,r)})}},5495:(y,w,i)=>{var s=i(5456),m=i(5963),p=i(6884);y.exports=function g(f,c,r){for(var a=-1,l=c.length,t={};++a<l;){var h=c[a],d=s(f,h);r(d,h)&&m(t,p(h,f),d)}return t}},1384:y=>{y.exports=function w(i){return function(s){return s?.[i]}}},9222:(y,w,i)=>{var s=i(5456);y.exports=function m(p){return function(g){return s(g,p)}}},6307:y=>{var w=Math.ceil,i=Math.max;y.exports=function s(m,p,g,f){for(var c=-1,r=i(w((p-m)/(g||1)),0),a=Array(r);r--;)a[f?r:++c]=m,m+=g;return a}},3570:y=>{y.exports=function w(i,s,m,p,g){return g(i,function(f,c,r){m=p?(p=!1,f):s(m,f,c,r)}),m}},6652:(y,w,i)=>{var s=i(2608),m=i(3983),p=i(2185);y.exports=function g(f,c){return p(m(f,c,s),f+"")}},5963:(y,w,i)=>{var s=i(9719),m=i(6884),p=i(8442),g=i(5940),f=i(8533);y.exports=function c(r,a,l,t){if(!g(r))return r;for(var h=-1,d=(a=m(a,r)).length,x=d-1,b=r;null!=b&&++h<d;){var C=f(a[h]),A=l;if("__proto__"===C||"constructor"===C||"prototype"===C)return r;if(h!=x){var M=b[C];void 0===(A=t?t(M,C,b):void 0)&&(A=g(M)?M:p(a[h+1])?[]:{})}s(b,C,A),b=b[C]}return r}},9510:(y,w,i)=>{var s=i(6684),m=i(6713),p=i(2608);y.exports=m?function(f,c){return m(f,"toString",{configurable:!0,enumerable:!1,value:s(c),writable:!0})}:p},8750:y=>{y.exports=function w(i,s){var m=i.length;for(i.sort(s);m--;)i[m]=i[m].value;return i}},5334:y=>{y.exports=function w(i,s){for(var m=-1,p=Array(i);++m<i;)p[m]=s(m);return p}},3935:(y,w,i)=>{var s=i(443),m=i(4633),p=i(1503),g=i(4129),c=s?s.prototype:void 0,r=c?c.toString:void 0;y.exports=function a(l){if("string"==typeof l)return l;if(p(l))return m(l,a)+"";if(g(l))return r?r.call(l):"";var t=l+"";return"0"==t&&1/l==-1/0?"-0":t}},3348:(y,w,i)=>{var s=i(2760),m=/^\s+/;y.exports=function p(g){return g&&g.slice(0,s(g)+1).replace(m,"")}},5647:y=>{y.exports=function w(i){return function(s){return i(s)}}},707:(y,w,i)=>{var s=i(8849),m=i(1253),p=i(177),g=i(5972),f=i(4575),c=i(4174);y.exports=function a(l,t,h){var d=-1,x=m,b=l.length,C=!0,A=[],M=A;if(h)C=!1,x=p;else if(b>=200){var N=t?null:f(l);if(N)return c(N);C=!1,x=g,M=new s}else M=t?[]:A;t:for(;++d<b;){var k=l[d],D=t?t(k):k;if(k=h||0!==k?k:0,C&&D==D){for(var H=M.length;H--;)if(M[H]===D)continue t;t&&M.push(D),A.push(k)}else x(M,D,h)||(M!==A&&M.push(D),A.push(k))}return A}},9179:(y,w,i)=>{var s=i(4633);y.exports=function m(p,g){return s(g,function(f){return p[f]})}},8645:y=>{y.exports=function w(i,s,m){for(var p=-1,g=i.length,f=s.length,c={};++p<g;)m(c,i[p],p<f?s[p]:void 0);return c}},5972:y=>{y.exports=function w(i,s){return i.has(s)}},2132:(y,w,i)=>{var s=i(2608);y.exports=function m(p){return"function"==typeof p?p:s}},6884:(y,w,i)=>{var s=i(1503),m=i(5352),p=i(2855),g=i(3943);y.exports=function f(c,r){return s(c)?c:m(c,r)?[c]:p(g(c))}},3362:(y,w,i)=>{var s=i(3457);y.exports=function m(p){var g=new p.constructor(p.byteLength);return new s(g).set(new s(p)),g}},9292:(y,w,i)=>{y=i.nmd(y);var s=i(2119),m=w&&!w.nodeType&&w,p=m&&y&&!y.nodeType&&y,f=p&&p.exports===m?s.Buffer:void 0,c=f?f.allocUnsafe:void 0;y.exports=function r(a,l){if(l)return a.slice();var t=a.length,h=c?c(t):new a.constructor(t);return a.copy(h),h}},7e3:(y,w,i)=>{var s=i(3362);y.exports=function m(p,g){var f=g?s(p.buffer):p.buffer;return new p.constructor(f,p.byteOffset,p.byteLength)}},4098:y=>{var w=/\w*$/;y.exports=function i(s){var m=new s.constructor(s.source,w.exec(s));return m.lastIndex=s.lastIndex,m}},2533:(y,w,i)=>{var s=i(443),m=s?s.prototype:void 0,p=m?m.valueOf:void 0;y.exports=function g(f){return p?Object(p.call(f)):{}}},5208:(y,w,i)=>{var s=i(3362);y.exports=function m(p,g){var f=g?s(p.buffer):p.buffer;return new p.constructor(f,p.byteOffset,p.length)}},3443:(y,w,i)=>{var s=i(4129);y.exports=function m(p,g){if(p!==g){var f=void 0!==p,c=null===p,r=p==p,a=s(p),l=void 0!==g,t=null===g,h=g==g,d=s(g);if(!t&&!d&&!a&&p>g||a&&l&&h&&!t&&!d||c&&l&&h||!f&&h||!r)return 1;if(!c&&!a&&!d&&p<g||d&&f&&r&&!c&&!a||t&&f&&r||!l&&r||!h)return-1}return 0}},1215:(y,w,i)=>{var s=i(3443);y.exports=function m(p,g,f){for(var c=-1,r=p.criteria,a=g.criteria,l=r.length,t=f.length;++c<l;){var h=s(r[c],a[c]);if(h)return c>=t?h:h*("desc"==f[c]?-1:1)}return p.index-g.index}},9454:y=>{y.exports=function w(i,s){var m=-1,p=i.length;for(s||(s=Array(p));++m<p;)s[m]=i[m];return s}},1989:(y,w,i)=>{var s=i(9719),m=i(5683);y.exports=function p(g,f,c,r){var a=!c;c||(c={});for(var l=-1,t=f.length;++l<t;){var h=f[l],d=r?r(c[h],g[h],h,c,g):void 0;void 0===d&&(d=g[h]),a?m(c,h,d):s(c,h,d)}return c}},4444:(y,w,i)=>{var s=i(1989),m=i(9383);y.exports=function p(g,f){return s(g,m(g),f)}},9905:(y,w,i)=>{var s=i(1989),m=i(3051);y.exports=function p(g,f){return s(g,m(g),f)}},4610:(y,w,i)=>{var s=i(2119);y.exports=s["__core-js_shared__"]},4944:(y,w,i)=>{var s=i(6652),m=i(3342);y.exports=function p(g){return s(function(f,c){var r=-1,a=c.length,l=a>1?c[a-1]:void 0,t=a>2?c[2]:void 0;for(l=g.length>3&&"function"==typeof l?(a--,l):void 0,t&&m(c[0],c[1],t)&&(l=a<3?void 0:l,a=1),f=Object(f);++r<a;){var h=c[r];h&&g(f,h,r,l)}return f})}},6539:(y,w,i)=>{var s=i(6507);y.exports=function m(p,g){return function(f,c){if(null==f)return f;if(!s(f))return p(f,c);for(var r=f.length,a=g?r:-1,l=Object(f);(g?a--:++a<r)&&!1!==c(l[a],a,l););return f}}},456:y=>{y.exports=function w(i){return function(s,m,p){for(var g=-1,f=Object(s),c=p(s),r=c.length;r--;){var a=c[i?r:++g];if(!1===m(f[a],a,f))break}return s}}},4653:(y,w,i)=>{var s=i(6517),m=i(6507),p=i(118);y.exports=function g(f){return function(c,r,a){var l=Object(c);if(!m(c)){var t=s(r,3);c=p(c),r=function(d){return t(l[d],d,l)}}var h=f(c,r,a);return h>-1?l[t?c[h]:h]:void 0}}},7509:(y,w,i)=>{var s=i(6307),m=i(3342),p=i(2232);y.exports=function g(f){return function(c,r,a){return a&&"number"!=typeof a&&m(c,r,a)&&(r=a=void 0),c=p(c),void 0===r?(r=c,c=0):r=p(r),a=void 0===a?c<r?1:-1:p(a),s(c,r,a,f)}}},4575:(y,w,i)=>{var s=i(6323),m=i(2552),p=i(4174),f=s&&1/p(new s([,-0]))[1]==1/0?function(c){return new s(c)}:m;y.exports=f},6713:(y,w,i)=>{var s=i(3436),m=function(){try{var p=s(Object,"defineProperty");return p({},"",{}),p}catch{}}();y.exports=m},3914:(y,w,i)=>{var s=i(8849),m=i(9503),p=i(5972);y.exports=function c(r,a,l,t,h,d){var x=1&l,b=r.length,C=a.length;if(b!=C&&!(x&&C>b))return!1;var A=d.get(r),M=d.get(a);if(A&&M)return A==a&&M==r;var N=-1,k=!0,D=2&l?new s:void 0;for(d.set(r,a),d.set(a,r);++N<b;){var H=r[N],V=a[N];if(t)var B=x?t(V,H,N,a,r,d):t(H,V,N,r,a,d);if(void 0!==B){if(B)continue;k=!1;break}if(D){if(!m(a,function(Y,O){if(!p(D,O)&&(H===Y||h(H,Y,l,t,d)))return D.push(O)})){k=!1;break}}else if(H!==V&&!h(H,V,l,t,d)){k=!1;break}}return d.delete(r),d.delete(a),k}},7058:(y,w,i)=>{var s=i(443),m=i(3457),p=i(217),g=i(3914),f=i(3205),c=i(4174),D=s?s.prototype:void 0,H=D?D.valueOf:void 0;y.exports=function V(B,Y,O,I,L,F,G){switch(O){case"[object DataView]":if(B.byteLength!=Y.byteLength||B.byteOffset!=Y.byteOffset)return!1;B=B.buffer,Y=Y.buffer;case"[object ArrayBuffer]":return!(B.byteLength!=Y.byteLength||!F(new m(B),new m(Y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+B,+Y);case"[object Error]":return B.name==Y.name&&B.message==Y.message;case"[object RegExp]":case"[object String]":return B==Y+"";case"[object Map]":var z=f;case"[object Set]":if(z||(z=c),B.size!=Y.size&&!(1&I))return!1;var U=G.get(B);if(U)return U==Y;I|=2,G.set(B,Y);var Z=g(z(B),z(Y),I,L,F,G);return G.delete(B),Z;case"[object Symbol]":if(H)return H.call(B)==H.call(Y)}return!1}},2286:(y,w,i)=>{var s=i(7597),g=Object.prototype.hasOwnProperty;y.exports=function f(c,r,a,l,t,h){var d=1&a,x=s(c),b=x.length;if(b!=s(r).length&&!d)return!1;for(var M=b;M--;){var N=x[M];if(!(d?N in r:g.call(r,N)))return!1}var k=h.get(c),D=h.get(r);if(k&&D)return k==r&&D==c;var H=!0;h.set(c,r),h.set(r,c);for(var V=d;++M<b;){var B=c[N=x[M]],Y=r[N];if(l)var O=d?l(Y,B,N,r,c,h):l(B,Y,N,c,r,h);if(!(void 0===O?B===Y||t(B,Y,a,l,h):O)){H=!1;break}V||(V="constructor"==N)}if(H&&!V){var I=c.constructor,L=r.constructor;I!=L&&"constructor"in c&&"constructor"in r&&!("function"==typeof I&&I instanceof I&&"function"==typeof L&&L instanceof L)&&(H=!1)}return h.delete(c),h.delete(r),H}},3975:(y,w,i)=>{var s=i(2274),m=i(3983),p=i(2185);y.exports=function g(f){return p(m(f,void 0,s),f+"")}},9122:y=>{var w="object"==typeof global&&global&&global.Object===Object&&global;y.exports=w},7597:(y,w,i)=>{var s=i(8247),m=i(9383),p=i(118);y.exports=function g(f){return s(f,p,m)}},6967:(y,w,i)=>{var s=i(8247),m=i(3051),p=i(6555);y.exports=function g(f){return s(f,p,m)}},4537:(y,w,i)=>{var s=i(3819);y.exports=function m(p,g){var f=p.__data__;return s(g)?f["string"==typeof g?"string":"hash"]:f.map}},2379:(y,w,i)=>{var s=i(2442),m=i(118);y.exports=function p(g){for(var f=m(g),c=f.length;c--;){var r=f[c],a=g[r];f[c]=[r,a,s(a)]}return f}},3436:(y,w,i)=>{var s=i(7304),m=i(1990);y.exports=function p(g,f){var c=m(g,f);return s(c)?c:void 0}},9519:(y,w,i)=>{var m=i(9385)(Object.getPrototypeOf,Object);y.exports=m},1318:(y,w,i)=>{var s=i(443),m=Object.prototype,p=m.hasOwnProperty,g=m.toString,f=s?s.toStringTag:void 0;y.exports=function c(r){var a=p.call(r,f),l=r[f];try{r[f]=void 0;var t=!0}catch{}var h=g.call(r);return t&&(a?r[f]=l:delete r[f]),h}},9383:(y,w,i)=>{var s=i(9779),m=i(9975),g=Object.prototype.propertyIsEnumerable,f=Object.getOwnPropertySymbols;y.exports=f?function(r){return null==r?[]:(r=Object(r),s(f(r),function(a){return g.call(r,a)}))}:m},3051:(y,w,i)=>{var s=i(4883),m=i(9519),p=i(9383),g=i(9975);y.exports=Object.getOwnPropertySymbols?function(r){for(var a=[];r;)s(a,p(r)),r=m(r);return a}:g},8794:(y,w,i)=>{var s=i(7244),m=i(1501),p=i(4267),g=i(6323),f=i(4243),c=i(3337),r=i(2827),a="[object Map]",t="[object Promise]",h="[object Set]",d="[object WeakMap]",x="[object DataView]",b=r(s),C=r(m),A=r(p),M=r(g),N=r(f),k=c;(s&&k(new s(new ArrayBuffer(1)))!=x||m&&k(new m)!=a||p&&k(p.resolve())!=t||g&&k(new g)!=h||f&&k(new f)!=d)&&(k=function(D){var H=c(D),V="[object Object]"==H?D.constructor:void 0,B=V?r(V):"";if(B)switch(B){case b:return x;case C:return a;case A:return t;case M:return h;case N:return d}return H}),y.exports=k},1990:y=>{y.exports=function w(i,s){return i?.[s]}},7283:(y,w,i)=>{var s=i(6884),m=i(7151),p=i(1503),g=i(8442),f=i(6231),c=i(8533);y.exports=function r(a,l,t){for(var h=-1,d=(l=s(l,a)).length,x=!1;++h<d;){var b=c(l[h]);if(!(x=null!=a&&t(a,b)))break;a=a[b]}return x||++h!=d?x:!!(d=null==a?0:a.length)&&f(d)&&g(b,d)&&(p(a)||m(a))}},7609:y=>{var c=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");y.exports=function r(a){return c.test(a)}},4312:(y,w,i)=>{var s=i(862);y.exports=function m(){this.__data__=s?s(null):{},this.size=0}},6421:y=>{y.exports=function w(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}},5764:(y,w,i)=>{var s=i(862),g=Object.prototype.hasOwnProperty;y.exports=function f(c){var r=this.__data__;if(s){var a=r[c];return"__lodash_hash_undefined__"===a?void 0:a}return g.call(r,c)?r[c]:void 0}},8685:(y,w,i)=>{var s=i(862),p=Object.prototype.hasOwnProperty;y.exports=function g(f){var c=this.__data__;return s?void 0!==c[f]:p.call(c,f)}},6676:(y,w,i)=>{var s=i(862);y.exports=function p(g,f){var c=this.__data__;return this.size+=this.has(g)?0:1,c[g]=s&&void 0===f?"__lodash_hash_undefined__":f,this}},6782:y=>{var i=Object.prototype.hasOwnProperty;y.exports=function s(m){var p=m.length,g=new m.constructor(p);return p&&"string"==typeof m[0]&&i.call(m,"index")&&(g.index=m.index,g.input=m.input),g}},7878:(y,w,i)=>{var s=i(3362),m=i(7e3),p=i(4098),g=i(2533),f=i(5208);y.exports=function O(I,L,F){var G=I.constructor;switch(L){case"[object ArrayBuffer]":return s(I);case"[object Boolean]":case"[object Date]":return new G(+I);case"[object DataView]":return m(I,F);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return f(I,F);case"[object Map]":case"[object Set]":return new G;case"[object Number]":case"[object String]":return new G(I);case"[object RegExp]":return p(I);case"[object Symbol]":return g(I)}}},4264:(y,w,i)=>{var s=i(8858),m=i(9519),p=i(5488);y.exports=function g(f){return"function"!=typeof f.constructor||p(f)?{}:s(m(f))}},5039:(y,w,i)=>{var s=i(443),m=i(7151),p=i(1503),g=s?s.isConcatSpreadable:void 0;y.exports=function f(c){return p(c)||m(c)||!!(g&&c&&c[g])}},8442:y=>{var i=/^(?:0|[1-9]\d*)$/;y.exports=function s(m,p){var g=typeof m;return!!(p=p??9007199254740991)&&("number"==g||"symbol"!=g&&i.test(m))&&m>-1&&m%1==0&&m<p}},3342:(y,w,i)=>{var s=i(217),m=i(6507),p=i(8442),g=i(5940);y.exports=function f(c,r,a){if(!g(a))return!1;var l=typeof r;return!!("number"==l?m(a)&&p(r,a.length):"string"==l&&r in a)&&s(a[r],c)}},5352:(y,w,i)=>{var s=i(1503),m=i(4129),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;y.exports=function f(c,r){if(s(c))return!1;var a=typeof c;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=c&&!m(c))||g.test(c)||!p.test(c)||null!=r&&c in Object(r)}},3819:y=>{y.exports=function w(i){var s=typeof i;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i}},1943:(y,w,i)=>{var g,s=i(4610),m=(g=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";y.exports=function p(g){return!!m&&m in g}},5488:y=>{var w=Object.prototype;y.exports=function i(s){var m=s&&s.constructor;return s===("function"==typeof m&&m.prototype||w)}},2442:(y,w,i)=>{var s=i(5940);y.exports=function m(p){return p==p&&!s(p)}},1840:y=>{y.exports=function w(){this.__data__=[],this.size=0}},4378:(y,w,i)=>{var s=i(3503),p=Array.prototype.splice;y.exports=function g(f){var c=this.__data__,r=s(c,f);return!(r<0||(r==c.length-1?c.pop():p.call(c,r,1),--this.size,0))}},4981:(y,w,i)=>{var s=i(3503);y.exports=function m(p){var g=this.__data__,f=s(g,p);return f<0?void 0:g[f][1]}},7343:(y,w,i)=>{var s=i(3503);y.exports=function m(p){return s(this.__data__,p)>-1}},8895:(y,w,i)=>{var s=i(3503);y.exports=function m(p,g){var f=this.__data__,c=s(f,p);return c<0?(++this.size,f.push([p,g])):f[c][1]=g,this}},638:(y,w,i)=>{var s=i(4994),m=i(9215),p=i(1501);y.exports=function g(){this.size=0,this.__data__={hash:new s,map:new(p||m),string:new s}}},1184:(y,w,i)=>{var s=i(4537);y.exports=function m(p){var g=s(this,p).delete(p);return this.size-=g?1:0,g}},866:(y,w,i)=>{var s=i(4537);y.exports=function m(p){return s(this,p).get(p)}},3771:(y,w,i)=>{var s=i(4537);y.exports=function m(p){return s(this,p).has(p)}},1772:(y,w,i)=>{var s=i(4537);y.exports=function m(p,g){var f=s(this,p),c=f.size;return f.set(p,g),this.size+=f.size==c?0:1,this}},3205:y=>{y.exports=function w(i){var s=-1,m=Array(i.size);return i.forEach(function(p,g){m[++s]=[g,p]}),m}},642:y=>{y.exports=function w(i,s){return function(m){return null!=m&&m[i]===s&&(void 0!==s||i in Object(m))}}},719:(y,w,i)=>{var s=i(535);y.exports=function p(g){var f=s(g,function(r){return 500===c.size&&c.clear(),r}),c=f.cache;return f}},862:(y,w,i)=>{var m=i(3436)(Object,"create");y.exports=m},5491:(y,w,i)=>{var m=i(9385)(Object.keys,Object);y.exports=m},2158:y=>{y.exports=function w(i){var s=[];if(null!=i)for(var m in Object(i))s.push(m);return s}},3597:(y,w,i)=>{y=i.nmd(y);var s=i(9122),m=w&&!w.nodeType&&w,p=m&&y&&!y.nodeType&&y,f=p&&p.exports===m&&s.process,c=function(){try{return p&&p.require&&p.require("util").types||f&&f.binding&&f.binding("util")}catch{}}();y.exports=c},2902:y=>{var i=Object.prototype.toString;y.exports=function s(m){return i.call(m)}},9385:y=>{y.exports=function w(i,s){return function(m){return i(s(m))}}},3983:(y,w,i)=>{var s=i(6999),m=Math.max;y.exports=function p(g,f,c){return f=m(void 0===f?g.length-1:f,0),function(){for(var r=arguments,a=-1,l=m(r.length-f,0),t=Array(l);++a<l;)t[a]=r[f+a];a=-1;for(var h=Array(f+1);++a<f;)h[a]=r[a];return h[f]=c(t),s(g,this,h)}}},2119:(y,w,i)=>{var s=i(9122),m="object"==typeof self&&self&&self.Object===Object&&self,p=s||m||Function("return this")();y.exports=p},9351:y=>{y.exports=function w(i,s){if(("constructor"!==s||"function"!=typeof i[s])&&"__proto__"!=s)return i[s]}},4600:y=>{y.exports=function i(s){return this.__data__.set(s,"__lodash_hash_undefined__"),this}},1387:y=>{y.exports=function w(i){return this.__data__.has(i)}},4174:y=>{y.exports=function w(i){var s=-1,m=Array(i.size);return i.forEach(function(p){m[++s]=p}),m}},2185:(y,w,i)=>{var s=i(9510),p=i(29)(s);y.exports=p},29:y=>{var s=Date.now;y.exports=function m(p){var g=0,f=0;return function(){var c=s(),r=16-(c-f);if(f=c,r>0){if(++g>=800)return arguments[0]}else g=0;return p.apply(void 0,arguments)}}},3720:(y,w,i)=>{var s=i(9215);y.exports=function m(){this.__data__=new s,this.size=0}},4410:y=>{y.exports=function w(i){var s=this.__data__,m=s.delete(i);return this.size=s.size,m}},5576:y=>{y.exports=function w(i){return this.__data__.get(i)}},2247:y=>{y.exports=function w(i){return this.__data__.has(i)}},1585:(y,w,i)=>{var s=i(9215),m=i(1501),p=i(9850);y.exports=function f(c,r){var a=this.__data__;if(a instanceof s){var l=a.__data__;if(!m||l.length<199)return l.push([c,r]),this.size=++a.size,this;a=this.__data__=new p(l)}return a.set(c,r),this.size=a.size,this}},4977:y=>{y.exports=function w(i,s,m){for(var p=m-1,g=i.length;++p<g;)if(i[p]===s)return p;return-1}},2315:(y,w,i)=>{var s=i(5481),m=i(7609),p=i(1149);y.exports=function g(f){return m(f)?p(f):s(f)}},2855:(y,w,i)=>{var s=i(719),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=s(function(f){var c=[];return 46===f.charCodeAt(0)&&c.push(""),f.replace(m,function(r,a,l,t){c.push(l?t.replace(p,"$1"):a||r)}),c});y.exports=g},8533:(y,w,i)=>{var s=i(4129);y.exports=function p(g){if("string"==typeof g||s(g))return g;var f=g+"";return"0"==f&&1/g==-1/0?"-0":f}},2827:y=>{var i=Function.prototype.toString;y.exports=function s(m){if(null!=m){try{return i.call(m)}catch{}try{return m+""}catch{}}return""}},2760:y=>{var w=/\s/;y.exports=function i(s){for(var m=s.length;m--&&w.test(s.charAt(m)););return m}},1149:y=>{var w="\\ud800-\\udfff",f="["+w+"]",c="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",l="[^"+w+"]",t="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",x="(?:"+c+"|"+r+")?",b="[\\ufe0e\\ufe0f]?",A=b+x+"(?:\\u200d(?:"+[l,t,h].join("|")+")"+b+x+")*",M="(?:"+[l+c+"?",c,t,h,f].join("|")+")",N=RegExp(r+"(?="+r+")|"+M+A,"g");y.exports=function k(D){for(var H=N.lastIndex=0;N.test(D);)++H;return H}},1094:(y,w,i)=>{var s=i(4462);y.exports=function p(g){return s(g,4)}},733:(y,w,i)=>{var s=i(4462);y.exports=function g(f){return s(f,5)}},6684:y=>{y.exports=function w(i){return function(){return i}}},8800:(y,w,i)=>{var s=i(6652),m=i(217),p=i(3342),g=i(6555),f=Object.prototype,c=f.hasOwnProperty,r=s(function(a,l){a=Object(a);var t=-1,h=l.length,d=h>2?l[2]:void 0;for(d&&p(l[0],l[1],d)&&(h=1);++t<h;)for(var x=l[t],b=g(x),C=-1,A=b.length;++C<A;){var M=b[C],N=a[M];(void 0===N||m(N,f[M])&&!c.call(a,M))&&(a[M]=x[M])}return a});y.exports=r},5474:(y,w,i)=>{y.exports=i(9851)},217:y=>{y.exports=function w(i,s){return i===s||i!=i&&s!=s}},5281:(y,w,i)=>{var s=i(9779),m=i(3609),p=i(6517),g=i(1503);y.exports=function f(c,r){return(g(c)?s:m)(c,p(r,3))}},2516:(y,w,i)=>{var p=i(4653)(i(6397));y.exports=p},6397:(y,w,i)=>{var s=i(5317),m=i(6517),p=i(4401),g=Math.max;y.exports=function f(c,r,a){var l=null==c?0:c.length;if(!l)return-1;var t=null==a?0:p(a);return t<0&&(t=g(l+t,0)),s(c,m(r,3),t)}},2274:(y,w,i)=>{var s=i(686);y.exports=function m(p){return null!=p&&p.length?s(p,1):[]}},9851:(y,w,i)=>{var s=i(6837),m=i(3132),p=i(2132),g=i(1503);y.exports=function f(c,r){return(g(c)?s:m)(c,p(r))}},1176:(y,w,i)=>{var s=i(755),m=i(2132),p=i(6555);y.exports=function g(f,c){return null==f?f:s(f,m(c),p)}},8817:(y,w,i)=>{var s=i(5456);y.exports=function m(p,g,f){var c=null==p?void 0:s(p,g);return void 0===c?f:c}},4842:(y,w,i)=>{var s=i(4781),m=i(7283);y.exports=function p(g,f){return null!=g&&m(g,f,s)}},8492:(y,w,i)=>{var s=i(9989),m=i(7283);y.exports=function p(g,f){return null!=g&&m(g,f,s)}},2608:y=>{y.exports=function w(i){return i}},7151:(y,w,i)=>{var s=i(186),m=i(2671),p=Object.prototype,g=p.hasOwnProperty,f=p.propertyIsEnumerable,c=s(function(){return arguments}())?s:function(r){return m(r)&&g.call(r,"callee")&&!f.call(r,"callee")};y.exports=c},1503:y=>{y.exports=Array.isArray},6507:(y,w,i)=>{var s=i(5946),m=i(6231);y.exports=function p(g){return null!=g&&m(g.length)&&!s(g)}},1330:(y,w,i)=>{var s=i(6507),m=i(2671);y.exports=function p(g){return m(g)&&s(g)}},891:(y,w,i)=>{y=i.nmd(y);var s=i(2119),m=i(3580),p=w&&!w.nodeType&&w,g=p&&y&&!y.nodeType&&y,c=g&&g.exports===p?s.Buffer:void 0;y.exports=(c?c.isBuffer:void 0)||m},1973:(y,w,i)=>{var s=i(1172),m=i(8794),p=i(7151),g=i(1503),f=i(6507),c=i(891),r=i(5488),a=i(8159),d=Object.prototype.hasOwnProperty;y.exports=function x(b){if(null==b)return!0;if(f(b)&&(g(b)||"string"==typeof b||"function"==typeof b.splice||c(b)||a(b)||p(b)))return!b.length;var C=m(b);if("[object Map]"==C||"[object Set]"==C)return!b.size;if(r(b))return!s(b).length;for(var A in b)if(d.call(b,A))return!1;return!0}},5946:(y,w,i)=>{var s=i(3337),m=i(5940);y.exports=function r(a){if(!m(a))return!1;var l=s(a);return"[object Function]"==l||"[object GeneratorFunction]"==l||"[object AsyncFunction]"==l||"[object Proxy]"==l}},6231:y=>{y.exports=function i(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991}},3222:(y,w,i)=>{var s=i(7021),m=i(5647),p=i(3597),g=p&&p.isMap,f=g?m(g):s;y.exports=f},5940:y=>{y.exports=function w(i){var s=typeof i;return null!=i&&("object"==s||"function"==s)}},2671:y=>{y.exports=function w(i){return null!=i&&"object"==typeof i}},7614:(y,w,i)=>{var s=i(3337),m=i(9519),p=i(2671),r=Function.prototype.toString,a=Object.prototype.hasOwnProperty,l=r.call(Object);y.exports=function t(h){if(!p(h)||"[object Object]"!=s(h))return!1;var d=m(h);if(null===d)return!0;var x=a.call(d,"constructor")&&d.constructor;return"function"==typeof x&&x instanceof x&&r.call(x)==l}},799:(y,w,i)=>{var s=i(771),m=i(5647),p=i(3597),g=p&&p.isSet,f=g?m(g):s;y.exports=f},248:(y,w,i)=>{var s=i(3337),m=i(1503),p=i(2671);y.exports=function f(c){return"string"==typeof c||!m(c)&&p(c)&&"[object String]"==s(c)}},4129:(y,w,i)=>{var s=i(3337),m=i(2671);y.exports=function g(f){return"symbol"==typeof f||m(f)&&"[object Symbol]"==s(f)}},8159:(y,w,i)=>{var s=i(1083),m=i(5647),p=i(3597),g=p&&p.isTypedArray,f=g?m(g):s;y.exports=f},4235:y=>{y.exports=function w(i){return void 0===i}},118:(y,w,i)=>{var s=i(2271),m=i(1172),p=i(6507);y.exports=function g(f){return p(f)?s(f):m(f)}},6555:(y,w,i)=>{var s=i(2271),m=i(2809),p=i(6507);y.exports=function g(f){return p(f)?s(f,!0):m(f)}},5809:y=>{y.exports=function w(i){var s=null==i?0:i.length;return s?i[s-1]:void 0}},9984:(y,w,i)=>{var s=i(4633),m=i(6517),p=i(2046),g=i(1503);y.exports=function f(c,r){return(g(c)?s:p)(c,m(r,3))}},203:(y,w,i)=>{var s=i(5683),m=i(5184),p=i(6517);y.exports=function g(f,c){var r={};return c=p(c,3),m(f,function(a,l,t){s(r,l,c(a,l,t))}),r}},8176:(y,w,i)=>{var s=i(7308),m=i(1100),p=i(2608);y.exports=function g(f){return f&&f.length?s(f,p,m):void 0}},535:(y,w,i)=>{var s=i(9850);function p(g,f){if("function"!=typeof g||null!=f&&"function"!=typeof f)throw new TypeError("Expected a function");var c=function(){var r=arguments,a=f?f.apply(this,r):r[0],l=c.cache;if(l.has(a))return l.get(a);var t=g.apply(this,r);return c.cache=l.set(a,t)||l,t};return c.cache=new(p.Cache||s),c}p.Cache=s,y.exports=p},567:(y,w,i)=>{var s=i(3842),p=i(4944)(function(g,f,c){s(g,f,c)});y.exports=p},9439:(y,w,i)=>{var s=i(7308),m=i(9069),p=i(2608);y.exports=function g(f){return f&&f.length?s(f,p,m):void 0}},9525:(y,w,i)=>{var s=i(7308),m=i(6517),p=i(9069);y.exports=function g(f,c){return f&&f.length?s(f,m(c,2),p):void 0}},2552:y=>{y.exports=function w(){}},1710:(y,w,i)=>{var s=i(2119);y.exports=function(){return s.Date.now()}},6372:(y,w,i)=>{var s=i(3021),p=i(3975)(function(g,f){return null==g?{}:s(g,f)});y.exports=p},7495:(y,w,i)=>{var s=i(1384),m=i(9222),p=i(5352),g=i(8533);y.exports=function f(c){return p(c)?s(g(c)):m(c)}},361:(y,w,i)=>{var m=i(7509)();y.exports=m},1337:(y,w,i)=>{var s=i(8745),m=i(3132),p=i(6517),g=i(3570),f=i(1503);y.exports=function c(r,a,l){var t=f(r)?s:g,h=arguments.length<3;return t(r,p(a,4),l,h,m)}},5637:(y,w,i)=>{var s=i(1172),m=i(8794),p=i(6507),g=i(248),f=i(2315);y.exports=function a(l){if(null==l)return 0;if(p(l))return g(l)?f(l):l.length;var t=m(l);return"[object Map]"==t||"[object Set]"==t?l.size:s(l).length}},2906:(y,w,i)=>{var s=i(686),m=i(6119),p=i(6652),g=i(3342),f=p(function(c,r){if(null==c)return[];var a=r.length;return a>1&&g(c,r[0],r[1])?r=[]:a>2&&g(r[0],r[1],r[2])&&(r=[r[0]]),m(c,s(r,1),[])});y.exports=f},9975:y=>{y.exports=function w(){return[]}},3580:y=>{y.exports=function w(){return!1}},2232:(y,w,i)=>{var s=i(1467),m=1/0;y.exports=function g(f){return f?(f=s(f))===m||f===-m?17976931348623157e292*(f<0?-1:1):f==f?f:0:0===f?f:0}},4401:(y,w,i)=>{var s=i(2232);y.exports=function m(p){var g=s(p),f=g%1;return g==g?f?g-f:g:0}},1467:(y,w,i)=>{var s=i(3348),m=i(5940),p=i(4129),f=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,r=/^0o[0-7]+$/i,a=parseInt;y.exports=function l(t){if("number"==typeof t)return t;if(p(t))return NaN;if(m(t)){var h="function"==typeof t.valueOf?t.valueOf():t;t=m(h)?h+"":h}if("string"!=typeof t)return 0===t?t:+t;t=s(t);var d=c.test(t);return d||r.test(t)?a(t.slice(2),d?2:8):f.test(t)?NaN:+t}},8067:(y,w,i)=>{var s=i(1989),m=i(6555);y.exports=function p(g){return s(g,m(g))}},3943:(y,w,i)=>{var s=i(3935);y.exports=function m(p){return null==p?"":s(p)}},9416:(y,w,i)=>{var s=i(6837),m=i(8858),p=i(5184),g=i(6517),f=i(9519),c=i(1503),r=i(891),a=i(5946),l=i(5940),t=i(8159);y.exports=function h(d,x,b){var C=c(d),A=C||r(d)||t(d);if(x=g(x,4),null==b){var M=d&&d.constructor;b=A?C?new M:[]:l(d)&&a(M)?m(f(d)):{}}return(A?s:p)(d,function(N,k,D){return x(b,N,k,D)}),b}},8921:(y,w,i)=>{var s=i(686),m=i(6652),p=i(707),g=i(1330),f=m(function(c){return p(s(c,1,g,!0))});y.exports=f},1541:(y,w,i)=>{var s=i(3943),m=0;y.exports=function p(g){var f=++m;return s(g)+f}},377:(y,w,i)=>{var s=i(9179),m=i(118);y.exports=function p(g){return null==g?[]:s(g,m(g))}},1617:(y,w,i)=>{var s=i(9719),m=i(8645);y.exports=function p(g,f){return m(g||[],f||[],s)}},7824:(y,w,i)=>{"use strict";function s(m){for(var p in m)w.hasOwnProperty(p)||(w[p]=m[p])}Object.defineProperty(w,"__esModule",{value:!0}),s(i(5085)),s(i(6243)),s(i(1786)),s(i(225)),s(i(6767)),s(i(345)),s(i(5675)),s(i(6461)),s(i(8802)),s(i(3900)),s(i(8866)),s(i(4655)),s(i(4068)),s(i(3858)),s(i(8237)),s(i(3292))},5085:function(y,w,i){"use strict";var f,s=this&&this.__extends||(f=function(c,r){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(c,r)},function(c,r){function a(){this.constructor=c}f(c,r),c.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(w,"__esModule",{value:!0});var m=i(5675),p=function(f){function c(r){var a=f.call(this)||this,t=r;return t.trigger&&(a.trigger=t.trigger),t.kick&&(a.kick=t.kick),t.drag&&(a.drag=t.drag),t.on&&(a.on=t.on),a.dragstart=a.dragStart=m.Layout.dragStart,a.dragend=a.dragEnd=m.Layout.dragEnd,a}return s(c,f),c.prototype.trigger=function(r){},c.prototype.kick=function(){},c.prototype.drag=function(){},c.prototype.on=function(r,a){return this},c}(m.Layout);w.LayoutAdaptor=p,w.adaptor=function g(f){return new p(f)}},3292:(y,w,i)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var s=i(5675),m=i(6767);w.gridify=function p(c,r,a,l){return c.cola.start(0,0,0,10,!1),function g(c,r,a,l){c.forEach(function(h){h.routerNode={name:h.name,bounds:h.bounds.inflate(-a)}}),r.forEach(function(h){h.routerNode={bounds:h.bounds.inflate(-l),children:(typeof h.groups<"u"?h.groups.map(function(d){return c.length+d.id}):[]).concat(typeof h.leaves<"u"?h.leaves.map(function(d){return d.index}):[])}});var t=c.concat(r).map(function(h,d){return h.routerNode.id=d,h.routerNode});return new m.GridRouter(t,{getChildren:function(h){return h.children},getBounds:function(h){return h.bounds}},a-l)}(c.cola.nodes(),c.cola.groups(),a,l).routeEdges(c.powerGraph.powerEdges,r,function(h){return h.source.routerNode.id},function(h){return h.target.routerNode.id})},w.powerGraphGridLayout=function f(c,r,a){var l;c.nodes.forEach(function(x,b){return x.index=b}),(new s.Layout).avoidOverlaps(!1).nodes(c.nodes).links(c.links).powerGraphGroups(function(x){(l=x).groups.forEach(function(b){return b.padding=a})});var t=c.nodes.length,h=[],d=c.nodes.slice(0);return d.forEach(function(x,b){return x.index=b}),l.groups.forEach(function(x){var b=x.index=x.id+t;d.push(x),typeof x.leaves<"u"&&x.leaves.forEach(function(C){return h.push({source:b,target:C.index})}),typeof x.groups<"u"&&x.groups.forEach(function(C){return h.push({source:b,target:C.id+t})})}),l.powerEdges.forEach(function(x){h.push({source:x.source.index,target:x.target.index})}),(new s.Layout).size(r).nodes(d).links(h).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new s.Layout).convergenceThreshold(.001).size(r).avoidOverlaps(!0).nodes(c.nodes).links(c.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(x){(l=x).groups.forEach(function(b){b.padding=a})}).start(50,0,100,0,!1),powerGraph:l}}},6243:(y,w,i)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var s=i(9346),m=i(2487);w.d3adaptor=function p(f){return!f||function g(f){return f.version&&null!==f.version.match(/^3\./)}(f)?new s.D3StyleLayoutAdaptor:new m.D3StyleLayoutAdaptor(f)}},9346:function(y,w,i){"use strict";var f,s=this&&this.__extends||(f=function(c,r){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(c,r)},function(c,r){function a(){this.constructor=c}f(c,r),c.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(w,"__esModule",{value:!0});var m=i(5675),p=function(f){function c(){var r=f.call(this)||this;r.event=d3.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=r;return r.drag=function(){if(!t)var t=d3.behavior.drag().origin(m.Layout.dragOrigin).on("dragstart.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(h){m.Layout.drag(h,d3.event),a.resume()}).on("dragend.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},r}return s(c,f),c.prototype.trigger=function(r){var a={type:m.EventType[r.type],alpha:r.alpha,stress:r.stress};this.event[a.type](a)},c.prototype.kick=function(){var r=this;d3.timer(function(){return f.prototype.tick.call(r)})},c.prototype.on=function(r,a){return this.event.on("string"==typeof r?r:m.EventType[r],a),this},c}(m.Layout);w.D3StyleLayoutAdaptor=p,w.d3adaptor=function g(){return new p}},2487:function(y,w,i){"use strict";var g,s=this&&this.__extends||(g=function(f,c){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])})(f,c)},function(f,c){function r(){this.constructor=f}g(f,c),f.prototype=null===c?Object.create(c):(r.prototype=c.prototype,new r)});Object.defineProperty(w,"__esModule",{value:!0});var m=i(5675),p=function(g){function f(c){var r=g.call(this)||this;r.d3Context=c,r.event=c.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=r;return r.drag=function(){if(!t)var t=c.drag().subject(m.Layout.dragOrigin).on("start.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(h){m.Layout.drag(h,c.event),a.resume()}).on("end.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},r}return s(f,g),f.prototype.trigger=function(c){var r={type:m.EventType[c.type],alpha:c.alpha,stress:c.stress};this.event.call(r.type,r)},f.prototype.kick=function(){var c=this,r=this.d3Context.timer(function(){return g.prototype.tick.call(c)&&r.stop()})},f.prototype.on=function(c,r){return this.event.on("string"==typeof c?c:m.EventType[c],r),this},f}(m.Layout);w.D3StyleLayoutAdaptor=p},1786:(y,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var i=function(){function p(){this.locks={}}return p.prototype.add=function(g,f){this.locks[g]=f},p.prototype.clear=function(){this.locks={}},p.prototype.isEmpty=function(){for(var g in this.locks)return!1;return!0},p.prototype.apply=function(g){for(var f in this.locks)g(Number(f),this.locks[f])},p}();w.Locks=i;var s=function(){function p(g,f,c){void 0===c&&(c=null),this.D=f,this.G=c,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new m,this.project=null,this.x=g,this.k=g.length;var r=this.n=g[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new i,this.minD=Number.MAX_VALUE;for(var l,a=r;a--;)for(l=r;--l>a;){var t=f[a][l];t>0&&t<this.minD&&(this.minD=t)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(r),this.H[a]=new Array(r),l=r;l--;)this.H[a][l]=new Array(r);this.Hd[a]=new Array(r),this.a[a]=new Array(r),this.b[a]=new Array(r),this.c[a]=new Array(r),this.d[a]=new Array(r),this.e[a]=new Array(r),this.ia[a]=new Array(r),this.ib[a]=new Array(r),this.xtmp[a]=new Array(r)}}return p.createSquareMatrix=function(g,f){for(var c=new Array(g),r=0;r<g;++r){c[r]=new Array(g);for(var a=0;a<g;++a)c[r][a]=f(r,a)}return c},p.prototype.offsetDir=function(){for(var g=this,f=new Array(this.k),c=0,r=0;r<this.k;++r){var a=f[r]=this.random.getNextBetween(.01,1)-.5;c+=a*a}return c=Math.sqrt(c),f.map(function(l){return l*(g.minD/c)})},p.prototype.computeDerivatives=function(g){var f=this,c=this.n;if(!(c<1)){for(var r,a=new Array(this.k),l=new Array(this.k),t=new Array(this.k),h=0,d=0;d<c;++d){for(r=0;r<this.k;++r)t[r]=this.g[r][d]=0;for(var x=0;x<c;++x)if(d!==x){for(var b=c;b--;){var C=0;for(r=0;r<this.k;++r){var A=a[r]=g[r][d]-g[r][x];C+=l[r]=A*A}if(C>1e-9)break;var M=this.offsetDir();for(r=0;r<this.k;++r)g[r][x]+=M[r]}var N=Math.sqrt(C),k=this.D[d][x],D=null!=this.G?this.G[d][x]:1;if(D>1&&N>k||!isFinite(k)){for(r=0;r<this.k;++r)this.H[r][d][x]=0;continue}D>1&&(D=1);var H=k*k,V=2*D*(N-k)/(H*N),B=N*N*N,Y=2*-D/(H*B);for(isFinite(V)||console.log(V),r=0;r<this.k;++r)this.g[r][d]+=a[r]*V,t[r]-=this.H[r][d][x]=Y*(B+k*(l[r]-C)+N*C)}for(r=0;r<this.k;++r)h=Math.max(h,this.H[r][d][d]=t[r])}var O=this.snapGridSize/2,I=this.snapGridSize,F=this.snapStrength/(O*O),G=this.numGridSnapNodes;for(d=0;d<G;++d)for(r=0;r<this.k;++r){var z=this.x[r][d],Q=z/I,U=Q%1,Z=Q-U;-O<(A=Math.abs(U)<=.5?z-Z*I:z>0?z-(Z+1)*I:z-(Z-1)*I)&&A<=O&&(this.scaleSnapByMaxH?(this.g[r][d]+=h*F*A,this.H[r][d][d]+=h*F):(this.g[r][d]+=F*A,this.H[r][d][d]+=F))}this.locks.isEmpty()||this.locks.apply(function(W,it){for(r=0;r<f.k;++r)f.H[r][W][W]+=h,f.g[r][W]-=h*(it[r]-g[r][W])})}},p.dotProd=function(g,f){for(var c=0,r=g.length;r--;)c+=g[r]*f[r];return c},p.rightMultiply=function(g,f,c){for(var r=g.length;r--;)c[r]=p.dotProd(g[r],f)},p.prototype.computeStepSize=function(g){for(var f=0,c=0,r=0;r<this.k;++r)f+=p.dotProd(this.g[r],g[r]),p.rightMultiply(this.H[r],g[r],this.Hd[r]),c+=p.dotProd(g[r],this.Hd[r]);return 0!==c&&isFinite(c)?1*f/c:0},p.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var g=this.computeStepSize(this.g),f=0;f<this.k;++f)this.takeDescentStep(this.x[f],this.g[f],g);return this.computeStress()},p.copy=function(g,f){for(var c=g.length,r=f[0].length,a=0;a<c;++a)for(var l=0;l<r;++l)f[a][l]=g[a][l]},p.prototype.stepAndProject=function(g,f,c,r){p.copy(g,f),this.takeDescentStep(f[0],c[0],r),this.project&&this.project[0](g[0],g[1],f[0]),this.takeDescentStep(f[1],c[1],r),this.project&&this.project[1](f[0],g[1],f[1]);for(var a=2;a<this.k;a++)this.takeDescentStep(f[a],c[a],r)},p.mApply=function(g,f,c){for(var r=g;r-- >0;)for(var a=f;a-- >0;)c(r,a)},p.prototype.matrixApply=function(g){p.mApply(this.k,this.n,g)},p.prototype.computeNextPosition=function(g,f){var c=this;this.computeDerivatives(g);var r=this.computeStepSize(this.g);if(this.stepAndProject(g,f,this.g,r),this.project){this.matrixApply(function(l,t){return c.e[l][t]=g[l][t]-f[l][t]});var a=this.computeStepSize(this.e);a=Math.max(.2,Math.min(a,1)),this.stepAndProject(g,f,this.e,a)}},p.prototype.run=function(g){for(var f=Number.MAX_VALUE,c=!1;!c&&g-- >0;){var r=this.rungeKutta();c=Math.abs(f/r-1)<this.threshold,f=r}return f},p.prototype.rungeKutta=function(){var g=this;this.computeNextPosition(this.x,this.a),p.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),p.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var f=0;return this.matrixApply(function(c,r){var a=(g.a[c][r]+2*g.b[c][r]+2*g.c[c][r]+g.d[c][r])/6,l=g.x[c][r]-a;f+=l*l,g.x[c][r]=a}),f},p.mid=function(g,f,c){p.mApply(g.length,g[0].length,function(r,a){return c[r][a]=g[r][a]+(f[r][a]-g[r][a])/2})},p.prototype.takeDescentStep=function(g,f,c){for(var r=0;r<this.n;++r)g[r]=g[r]-c*f[r]},p.prototype.computeStress=function(){for(var g=0,f=0,c=this.n-1;f<c;++f)for(var r=f+1,a=this.n;r<a;++r){for(var l=0,t=0;t<this.k;++t){var h=this.x[t][f]-this.x[t][r];l+=h*h}l=Math.sqrt(l);var d=this.D[f][r];if(isFinite(d)){var x=d-l;g+=x*x/(d*d)}}return g},p.zeroDistance=1e-10,p}();w.Descent=s;var m=function(){function p(g){void 0===g&&(g=1),this.seed=g,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return p.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},p.prototype.getNextBetween=function(g,f){return g+this.getNext()*(f-g)},p}();w.PseudoRandom=m},225:function(y,w,i){"use strict";var U,s=this&&this.__extends||(U=function(Z,X){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,it){W.__proto__=it}||function(W,it){for(var tt in it)it.hasOwnProperty(tt)&&(W[tt]=it[tt])})(Z,X)},function(Z,X){function W(){this.constructor=Z}U(Z,X),Z.prototype=null===X?Object.create(X):(W.prototype=X.prototype,new W)});Object.defineProperty(w,"__esModule",{value:!0});var m=i(4068),p=function U(){};w.Point=p;var g=function U(Z,X,W,it){this.x1=Z,this.y1=X,this.x2=W,this.y2=it};w.LineSegment=g;var f=function(U){function Z(){return null!==U&&U.apply(this,arguments)||this}return s(Z,U),Z}(p);function c(U,Z,X){return(Z.x-U.x)*(X.y-U.y)-(X.x-U.x)*(Z.y-U.y)}function r(U,Z,X){return c(U,Z,X)>0}function a(U,Z,X){return c(U,Z,X)<0}function x(U,Z){var X=Z.slice(0);return X.push(Z[0]),{rtan:b(U,X),ltan:C(U,X)}}function b(U,Z){var W,it,tt,ft,X=Z.length-1;if(a(U,Z[1],Z[0])&&!r(U,Z[X-1],Z[0]))return 0;for(W=0,it=X;;){if(it-W==1)return r(U,Z[W],Z[it])?W:it;if((ft=a(U,Z[(tt=Math.floor((W+it)/2))+1],Z[tt]))&&!r(U,Z[tt-1],Z[tt]))return tt;r(U,Z[W+1],Z[W])?ft||r(U,Z[W],Z[tt])?it=tt:W=tt:ft&&a(U,Z[W],Z[tt])?it=tt:W=tt}}function C(U,Z){var W,it,tt,ft,X=Z.length-1;if(r(U,Z[X-1],Z[0])&&!a(U,Z[1],Z[0]))return 0;for(W=0,it=X;;){if(it-W==1)return a(U,Z[W],Z[it])?W:it;if(ft=a(U,Z[(tt=Math.floor((W+it)/2))+1],Z[tt]),r(U,Z[tt-1],Z[tt])&&!ft)return tt;a(U,Z[W+1],Z[W])?ft?a(U,Z[W],Z[tt])?it=tt:W=tt:it=tt:ft?W=tt:r(U,Z[W],Z[tt])?it=tt:W=tt}}function A(U,Z,X,W,it,tt){var ut,ft;ft=W(U[ut=X(Z[0],U)],Z);for(var xt=!1;!xt;){for(xt=!0;ut===U.length-1&&(ut=0),!it(Z[ft],U[ut],U[ut+1]);)++ut;for(;0===ft&&(ft=Z.length-1),!tt(U[ut],Z[ft],Z[ft-1]);)--ft,xt=!1}return{t1:ut,t2:ft}}function N(U,Z){return A(U,Z,b,C,r,a)}w.PolyPoint=f,w.isLeft=c,w.ConvexHull=function l(U){var W,Z=U.slice(0).sort(function(lt,mt){return lt.x!==mt.x?mt.x-lt.x:mt.y-lt.y}),X=U.length,tt=Z[0].x;for(W=1;W<X&&Z[W].x===tt;++W);var ut=W-1,ft=[];if(ft.push(Z[0]),ut===X-1)Z[ut].y!==Z[0].y&&ft.push(Z[ut]);else{var xt,$=X-1,K=Z[X-1].x;for(W=X-2;W>=0&&Z[W].x===K;W--);for(xt=W+1,W=ut;++W<=xt;)if(!(c(Z[0],Z[xt],Z[W])>=0&&W<xt)){for(;ft.length>1&&!(c(ft[ft.length-2],ft[ft.length-1],Z[W])>0);)ft.length-=1;0!=W&&ft.push(Z[W])}$!=xt&&ft.push(Z[$]);var rt=ft.length;for(W=xt;--W>=ut;)if(!(c(Z[$],Z[ut],Z[W])>=0&&W>ut)){for(;ft.length>rt&&!(c(ft[ft.length-2],ft[ft.length-1],Z[W])>0);)ft.length-=1;0!=W&&ft.push(Z[W])}}return ft},w.clockwiseRadialSweep=function t(U,Z,X){Z.slice(0).sort(function(W,it){return Math.atan2(W.y-U.y,W.x-U.x)-Math.atan2(it.y-U.y,it.x-U.x)}).forEach(X)},w.tangent_PolyPolyC=A,w.LRtangent_PolyPolyC=function M(U,Z){var X=N(Z,U);return{t1:X.t2,t2:X.t1}},w.RLtangent_PolyPolyC=N,w.LLtangent_PolyPolyC=function k(U,Z){return A(U,Z,C,C,a,a)},w.RRtangent_PolyPolyC=function D(U,Z){return A(U,Z,b,b,r,r)};var H=function U(Z,X){this.t1=Z,this.t2=X};w.BiTangent=H;var V=function U(){};w.BiTangents=V;var B=function(U){function Z(){return null!==U&&U.apply(this,arguments)||this}return s(Z,U),Z}(p);w.TVGPoint=B;var Y=function U(Z,X,W,it){this.id=Z,this.polyid=X,this.polyvertid=W,this.p=it,it.vv=this};w.VisibilityVertex=Y;var O=function(){function U(Z,X){this.source=Z,this.target=X}return U.prototype.length=function(){var Z=this.source.p.x-this.target.p.x,X=this.source.p.y-this.target.p.y;return Math.sqrt(Z*Z+X*X)},U}();w.VisibilityEdge=O;var I=function(){function U(Z,X){if(this.P=Z,this.V=[],this.E=[],X)this.V=X.V.slice(0),this.E=X.E.slice(0);else{for(var W=Z.length,it=0;it<W;it++){for(var tt=Z[it],ut=0;ut<tt.length;++ut){var xt=new Y(this.V.length,it,ut,tt[ut]);this.V.push(xt),ut>0&&this.E.push(new O(tt[ut-1].vv,xt))}tt.length>1&&this.E.push(new O(tt[0].vv,tt[tt.length-1].vv))}for(it=0;it<W-1;it++){var $=Z[it];for(ut=it+1;ut<W;ut++){var K=Z[ut],rt=F($,K);for(var lt in rt){var mt=rt[lt];this.addEdgeIfVisible($[mt.t1],K[mt.t2],it,ut)}}}}}return U.prototype.addEdgeIfVisible=function(Z,X,W,it){this.intersectsPolys(new g(Z.x,Z.y,X.x,X.y),W,it)||this.E.push(new O(Z.vv,X.vv))},U.prototype.addPoint=function(Z,X){var W=this.P.length;this.V.push(new Y(this.V.length,W,0,Z));for(var it=0;it<W;++it)if(it!==X){var tt=this.P[it],ut=x(Z,tt);this.addEdgeIfVisible(Z,tt[ut.ltan],X,it),this.addEdgeIfVisible(Z,tt[ut.rtan],X,it)}return Z.vv},U.prototype.intersectsPolys=function(Z,X,W){for(var it=0,tt=this.P.length;it<tt;++it)if(it!=X&&it!=W&&L(Z,this.P[it]).length>0)return!0;return!1},U}();function L(U,Z){for(var X=[],W=1,it=Z.length;W<it;++W){var tt=m.Rectangle.lineIntersection(U.x1,U.y1,U.x2,U.y2,Z[W-1].x,Z[W-1].y,Z[W].x,Z[W].y);tt&&X.push(tt)}return X}function F(U,Z){for(var X=U.length-1,W=Z.length-1,it=new V,tt=0;tt<X;++tt)for(var ut=0;ut<W;++ut){var ft=U[0==tt?X-1:tt-1],xt=U[tt],$=U[tt+1],K=Z[0==ut?W-1:ut-1],rt=Z[ut],lt=Z[ut+1],mt=c(ft,xt,rt),dt=c(xt,K,rt),_t=c(xt,rt,lt),bt=c(K,rt,xt),st=c(rt,ft,xt),at=c(rt,xt,$);mt>=0&&dt>=0&&_t<0&&bt>=0&&st>=0&&at<0?it.ll=new H(tt,ut):mt<=0&&dt<=0&&_t>0&&bt<=0&&st<=0&&at>0?it.rr=new H(tt,ut):mt<=0&&dt>0&&_t<=0&&bt>=0&&st<0&&at>=0?it.rl=new H(tt,ut):mt>=0&&dt<0&&_t>=0&&bt<=0&&st>0&&at<=0&&(it.lr=new H(tt,ut))}return it}function z(U,Z){return!U.every(function(X){return!function G(U,Z){for(var X=1,W=Z.length;X<W;++X)if(a(Z[X-1],Z[X],U))return!1;return!0}(X,Z)})}w.TangentVisibilityGraph=I,w.tangents=F,w.polysOverlap=function Q(U,Z){if(z(U,Z)||z(Z,U))return!0;for(var X=1,W=U.length;X<W;++X){var it=U[X],tt=U[X-1];if(L(new g(tt.x,tt.y,it.x,it.y),Z).length>0)return!0}return!1}},6767:(y,w,i)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var s=i(4068),m=i(8237),p=i(3858),g=function a(l,t,h){this.id=l,this.rect=t,this.children=h,this.leaf=typeof h>"u"||0===h.length};w.NodeWrapper=g;var f=function a(l,t,h,d,x){void 0===d&&(d=null),void 0===x&&(x=null),this.id=l,this.x=t,this.y=h,this.node=d,this.line=x};w.Vert=f;var c=function(){function a(l,t){this.s=l,this.t=t;var h=a.findMatch(l,t),d=t.slice(0).reverse(),x=a.findMatch(l,d);h.length>=x.length?(this.length=h.length,this.si=h.si,this.ti=h.ti,this.reversed=!1):(this.length=x.length,this.si=x.si,this.ti=t.length-x.ti-x.length,this.reversed=!0)}return a.findMatch=function(l,t){for(var h=l.length,d=t.length,x={length:0,si:-1,ti:-1},b=new Array(h),C=0;C<h;C++){b[C]=new Array(d);for(var A=0;A<d;A++)if(l[C]===t[A]){var M=b[C][A]=0===C||0===A?1:b[C-1][A-1]+1;M>x.length&&(x.length=M,x.si=C-M+1,x.ti=A-M+1)}else b[C][A]=0}return x},a.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},a}();w.LongestCommonSubsequence=c;var r=function(){function a(l,t,h){var d=this;void 0===h&&(h=12),this.originalnodes=l,this.groupPadding=h,this.leaves=null,this.nodes=l.map(function(B,Y){return new g(Y,t.getBounds(B),t.getChildren(B))}),this.leaves=this.nodes.filter(function(B){return B.leaf}),this.groups=this.nodes.filter(function(B){return!B.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(B){return B.children.forEach(function(Y){return d.nodes[Y].parent=B})}),this.root={children:[]},this.nodes.forEach(function(B){typeof B.parent>"u"&&(B.parent=d.root,d.root.children.push(B.id)),B.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(B,Y){return d.getDepth(B)-d.getDepth(Y)}),this.backToFront.slice(0).reverse().filter(function(B){return!B.leaf}).forEach(function(B){var Y=s.Rectangle.empty();B.children.forEach(function(O){return Y=Y.union(d.nodes[O].rect)}),B.rect=Y.inflate(d.groupPadding)});var b=this.midPoints(this.cols.map(function(B){return B.pos})),C=this.midPoints(this.rows.map(function(B){return B.pos})),A=b[0],M=b[b.length-1],N=C[0],k=C[C.length-1],D=this.rows.map(function(B){return{x1:A,x2:M,y1:B.pos,y2:B.pos}}).concat(C.map(function(B){return{x1:A,x2:M,y1:B,y2:B}})),H=this.cols.map(function(B){return{x1:B.pos,x2:B.pos,y1:N,y2:k}}).concat(b.map(function(B){return{x1:B,x2:B,y1:N,y2:k}})),V=D.concat(H);V.forEach(function(B){return B.verts=[]}),this.verts=[],this.edges=[],D.forEach(function(B){return H.forEach(function(Y){var O=new f(d.verts.length,Y.x1,B.y1);B.verts.push(O),Y.verts.push(O),d.verts.push(O);for(var I=d.backToFront.length;I-- >0;){var L=d.backToFront[I],F=L.rect,G=Math.abs(O.x-F.cx()),z=Math.abs(O.y-F.cy());if(G<F.width()/2&&z<F.height()/2){O.node=L;break}}})}),V.forEach(function(B,Y){d.nodes.forEach(function(z,Q){z.rect.lineIntersections(B.x1,B.y1,B.x2,B.y2).forEach(function(U,Z){var X=new f(d.verts.length,U.x,U.y,z,B);d.verts.push(X),B.verts.push(X),z.ports.push(X)})});var O=Math.abs(B.y1-B.y2)<.1,I=function(z,Q){return O?Q.x-z.x:Q.y-z.y};B.verts.sort(I);for(var L=1;L<B.verts.length;L++){var F=B.verts[L-1],G=B.verts[L];F.node&&F.node===G.node&&F.node.leaf||d.edges.push({source:F.id,target:G.id,length:Math.abs(I(F,G))})}})}return a.prototype.avg=function(l){return l.reduce(function(t,h){return t+h})/l.length},a.prototype.getGridLines=function(l){for(var t=[],h=this.leaves.slice(0,this.leaves.length);h.length>0;){var d=h.filter(function(b){return b.rect["overlap"+l.toUpperCase()](h[0].rect)}),x={nodes:d,pos:this.avg(d.map(function(b){return b.rect["c"+l]()}))};t.push(x),x.nodes.forEach(function(b){return h.splice(h.indexOf(b),1)})}return t.sort(function(b,C){return b.pos-C.pos}),t},a.prototype.getDepth=function(l){for(var t=0;l.parent!==this.root;)t++,l=l.parent;return t},a.prototype.midPoints=function(l){for(var t=l[1]-l[0],h=[l[0]-t/2],d=1;d<l.length;d++)h.push((l[d]+l[d-1])/2);return h.push(l[l.length-1]+t/2),h},a.prototype.findLineage=function(l){var t=[l];do{t.push(l=l.parent)}while(l!==this.root);return t.reverse()},a.prototype.findAncestorPathBetween=function(l,t){for(var h=this.findLineage(l),d=this.findLineage(t),x=0;h[x]===d[x];)x++;return{commonAncestor:h[x-1],lineages:h.slice(x).concat(d.slice(x))}},a.prototype.siblingObstacles=function(l,t){var h=this,d=this.findAncestorPathBetween(l,t),x={};d.lineages.forEach(function(C){return x[C.id]={}});var b=d.commonAncestor.children.filter(function(C){return!(C in x)});return d.lineages.filter(function(C){return C.parent!==d.commonAncestor}).forEach(function(C){return b=b.concat(C.parent.children.filter(function(A){return A!==C.id}))}),b.map(function(C){return h.nodes[C]})},a.getSegmentSets=function(l,t,h){for(var d=[],x=0;x<l.length;x++)for(var b=l[x],C=0;C<b.length;C++)(A=b[C]).edgeid=x,A.i=C,Math.abs(A[1][t]-A[0][t])<.1&&d.push(A);d.sort(function(H,V){return H[0][t]-V[0][t]});for(var N=[],k=null,D=0;D<d.length;D++){var A=d[D];(!k||Math.abs(A[0][t]-k.pos)>.1)&&N.push(k={pos:A[0][t],segments:[]}),k.segments.push(A)}return N},a.nudgeSegs=function(l,t,h,d,x,b){var C=d.length;if(!(C<=1)){for(var A=d.map(function(L){return new m.Variable(L[0][l])}),M=[],N=0;N<C;N++)for(var k=0;k<C;k++)if(N!==k){var D=d[N],V=D.edgeid,B=d[k].edgeid,Y=-1,O=-1;"x"==l?x(V,B)&&(D[0][t]<D[1][t]?(Y=k,O=N):(Y=N,O=k)):x(V,B)&&(D[0][t]<D[1][t]?(Y=N,O=k):(Y=k,O=N)),Y>=0&&M.push(new m.Constraint(A[Y],A[O],b))}new m.Solver(A,M).solve(),A.forEach(function(L,F){var G=d[F],z=L.position();G[0][l]=G[1][l]=z;var Q=h[G.edgeid];G.i>0&&(Q[G.i-1][1][l]=z),G.i<Q.length-1&&(Q[G.i+1][0][l]=z)})}},a.nudgeSegments=function(l,t,h,d,x){for(var b=a.getSegmentSets(l,t,h),C=0;C<b.length;C++){for(var A=b[C],M=[],N=0;N<A.segments.length;N++){var k=A.segments[N];M.push({type:0,s:k,pos:Math.min(k[0][h],k[1][h])}),M.push({type:1,s:k,pos:Math.max(k[0][h],k[1][h])})}M.sort(function(V,B){return V.pos-B.pos+V.type-B.type});var D=[],H=0;M.forEach(function(V){0===V.type?(D.push(V.s),H++):H--,0==H&&(a.nudgeSegs(t,h,l,D,d,x),D=[])})}},a.prototype.routeEdges=function(l,t,h,d){var x=this,b=l.map(function(M){return x.route(h(M),d(M))}),C=a.orderEdges(b),A=b.map(function(M){return a.makeSegments(M)});return a.nudgeSegments(A,"x","y",C,t),a.nudgeSegments(A,"y","x",C,t),a.unreverseEdges(A,b),A},a.unreverseEdges=function(l,t){l.forEach(function(h,d){t[d].reversed&&(h.reverse(),h.forEach(function(b){b.reverse()}))})},a.angleBetween2Lines=function(l,t){var h=Math.atan2(l[0].y-l[1].y,l[0].x-l[1].x),d=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),x=h-d;return(x>Math.PI||x<-Math.PI)&&(x=d-h),x},a.isLeft=function(l,t,h){return(t.x-l.x)*(h.y-l.y)-(t.y-l.y)*(h.x-l.x)<=0},a.getOrder=function(l){for(var t={},h=0;h<l.length;h++){var d=l[h];typeof t[d.l]>"u"&&(t[d.l]={}),t[d.l][d.r]=!0}return function(x,b){return typeof t[x]<"u"&&t[x][b]}},a.orderEdges=function(l){for(var t=[],h=0;h<l.length-1;h++)for(var d=h+1;d<l.length;d++){var A,M,N,x=l[h],b=l[d],C=new c(x,b);if(0!==C.length){if(C.reversed&&(b.reverse(),b.reversed=!0,C=new c(x,b)),(C.si<=0||C.ti<=0)&&(C.si+C.length>=x.length||C.ti+C.length>=b.length)){t.push({l:h,r:d});continue}C.si+C.length>=x.length||C.ti+C.length>=b.length?(A=x[C.si+1],N=x[C.si-1],M=b[C.ti-1]):(A=x[C.si+C.length-2],M=x[C.si+C.length],N=b[C.ti+C.length]),a.isLeft(A,M,N)?t.push({l:d,r:h}):t.push({l:h,r:d})}}return a.getOrder(t)},a.makeSegments=function(l){function t(M){return{x:M.x,y:M.y}}for(var d=[],x=t(l[0]),b=1;b<l.length;b++){var C=t(l[b]),A=b<l.length-1?l[b+1]:null;(!A||(M=x,N=C,k=A,!(Math.abs((N.x-M.x)*(k.y-M.y)-(N.y-M.y)*(k.x-M.x))<.001)))&&(d.push([x,C]),x=C)}var M,N,k;return d},a.prototype.route=function(l,t){var h=this,d=this.nodes[l],x=this.nodes[t];this.obstacles=this.siblingObstacles(d,x);var b={};this.obstacles.forEach(function(O){return b[O.id]=O}),this.passableEdges=this.edges.filter(function(O){var I=h.verts[O.source],L=h.verts[O.target];return!(I.node&&I.node.id in b||L.node&&L.node.id in b)});for(var C=1;C<d.ports.length;C++)this.passableEdges.push({source:d.ports[0].id,target:d.ports[C].id,length:0});for(C=1;C<x.ports.length;C++)this.passableEdges.push({source:x.ports[0].id,target:x.ports[C].id,length:0});var Y=new p.Calculator(this.verts.length,this.passableEdges,function(O){return O.source},function(O){return O.target},function(O){return O.length}).PathFromNodeToNodeWithPrevCost(d.ports[0].id,x.ports[0].id,function(O,I,L){var F=h.verts[O],G=h.verts[I],z=h.verts[L],Q=Math.abs(z.x-F.x),U=Math.abs(z.y-F.y);return F.node===d&&F.node===G.node||G.node===x&&G.node===z.node?0:Q>1&&U>1?1e3:0}).reverse().map(function(O){return h.verts[O]});return Y.push(this.nodes[x.id].ports[0]),Y.filter(function(O,I){return!(I<Y.length-1&&Y[I+1].node===d&&O.node===d||I>0&&O.node===x&&Y[I-1].node===x)})},a.getRoutePath=function(l,t,h,d){var C,A,M,Q,U,x={routepath:"M "+l[0][0].x+" "+l[0][0].y+" ",arrowpath:""};if(l.length>1)for(var b=0;b<l.length;b++){var N=(A=(C=l[b])[1].x)-C[0].x,k=(M=C[1].y)-C[0].y;if(b<l.length-1){Math.abs(N)>0?A-=N/Math.abs(N)*t:M-=k/Math.abs(k)*t,x.routepath+="L "+A+" "+M+" ";var D=l[b+1],H=D[0].x,V=D[0].y;N=D[1].x-H,k=D[1].y-V;var I,L,O=a.angleBetween2Lines(C,D)<0?1:0;Math.abs(N)>0?(I=H+N/Math.abs(N)*t,L=V):(I=H,L=V+k/Math.abs(k)*t);var F=Math.abs(I-A),G=Math.abs(L-M);x.routepath+="A "+F+" "+G+" 0 0 "+O+" "+I+" "+L+" "}else{var z=[A,M];Math.abs(N)>0?(Q=[A-=N/Math.abs(N)*d,M+h],U=[A,M-h]):(Q=[A+h,M-=k/Math.abs(k)*d],U=[A-h,M]),x.routepath+="L "+A+" "+M+" ",d>0&&(x.arrowpath="M "+z[0]+" "+z[1]+" L "+Q[0]+" "+Q[1]+" L "+U[0]+" "+U[1])}}else N=(A=(C=l[0])[1].x)-C[0].x,k=(M=C[1].y)-C[0].y,z=[A,M],Math.abs(N)>0?(Q=[A-=N/Math.abs(N)*d,M+h],U=[A,M-h]):(Q=[A+h,M-=k/Math.abs(k)*d],U=[A-h,M]),x.routepath+="L "+A+" "+M+" ",d>0&&(x.arrowpath="M "+z[0]+" "+z[1]+" L "+Q[0]+" "+Q[1]+" L "+U[0]+" "+U[1]);return x},a}();w.GridRouter=r},345:(y,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var i_GOLDEN_SECTION=(1+Math.sqrt(5))/2;w.applyPacking=function s(p,g,f,b,x,a){void 0===x&&(x=1),void 0===a&&(a=!0);var h=g,d=f,C=(x=typeof x<"u"?x:1,b=typeof b<"u"?b:0,0),A=0,M=0,N=0,k=[];function B(L,F){k=[],C=0,A=0,N=0;for(var G=0;G<L.length;G++)Y(L[G],F);return Math.abs(function I(){return C/A}()-x)}function Y(L,F){for(var G=void 0,z=0;z<k.length;z++)if(k[z].space_left>=L.height&&k[z].x+k[z].width+L.width+10-F<=1e-4){G=k[z];break}k.push(L),void 0!==G?(L.x=G.x+G.width+10,L.y=G.bottom,L.space_left=L.height,L.bottom=L.y,G.space_left-=L.height+10,G.bottom+=L.height+10):(L.y=N,N+=L.height+10,L.x=0,L.bottom=L.y,L.space_left=L.height),L.y+L.height-A>-1e-4&&(A=L.y+L.height-0),L.x+L.width-C>-1e-4&&(C=L.x+L.width-0)}0!=p.length&&(function D(L){L.forEach(function(G){!function F(G){var z=Number.MAX_VALUE,Q=Number.MAX_VALUE,U=0,Z=0;G.array.forEach(function(X){var W=typeof X.width<"u"?X.width:b,it=typeof X.height<"u"?X.height:b;W/=2,it/=2,U=Math.max(X.x+W,U),z=Math.min(X.x-W,z),Z=Math.max(X.y+it,Z),Q=Math.min(X.y-it,Q)}),G.width=U-z,G.height=Z-Q}(G)})}(p),function V(L,F){var G=Number.POSITIVE_INFINITY,z=0;L.sort(function($,K){return K.height-$.height});for(var Q=ft=M=L.reduce(function($,K){return $.width<K.width?$.width:K.width}),U=xt=function O(L){var F=0;return L.forEach(function(G){return F+=G.width+10}),F}(L),Z=0,X=Number.MAX_VALUE,W=Number.MAX_VALUE,it=-1,tt=Number.MAX_VALUE,ut=Number.MAX_VALUE;tt>M||ut>1e-4;){if(1!=it){var ft=U-(U-Q)/i_GOLDEN_SECTION;X=B(L,ft)}if(0!=it){var xt=Q+(U-Q)/i_GOLDEN_SECTION;W=B(L,xt)}if(tt=Math.abs(ft-xt),ut=Math.abs(X-W),X<G&&(G=X,z=ft),W<G&&(G=W,z=xt),X>W?(Q=ft,ft=xt,X=W,it=1):(U=xt,xt=ft,W=X,it=0),Z++>100)break}B(L,z)}(p),a&&function H(L){L.forEach(function(F){var G={x:0,y:0};F.array.forEach(function(U){G.x+=U.x,G.y+=U.y}),G.x/=F.array.length,G.y/=F.array.length;var Q_x=F.x-(G.x-F.width/2)+h/2-C/2,Q_y=F.y-(G.y-F.height/2)+d/2-A/2;F.array.forEach(function(U){U.x+=Q_x,U.y+=Q_y})})}(p))},w.separateGraphs=function m(p,g){for(var f={},c={},r=[],a=0,l=0;l<g.length;l++){var t=g[l],h=t.source,d=t.target;c[h.index]?c[h.index].push(d):c[h.index]=[d],c[d.index]?c[d.index].push(h):c[d.index]=[h]}for(l=0;l<p.length;l++){var x=p[l];f[x.index]||b(x,!0)}function b(C,A){if(void 0===f[C.index]){A&&(a++,r.push({array:[]})),f[C.index]=a,r[a-1].array.push(C);var M=c[C.index];if(M)for(var N=0;N<M.length;N++)b(M[N],!1)}}return r}},5675:(y,w,i)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var a,h,s=i(3900),m=i(8802),p=i(1786),g=i(4068),f=i(3858),c=i(225),r=i(345);function l(h){return typeof h.leaves<"u"||typeof h.groups<"u"}(h=a=w.EventType||(w.EventType={}))[h.start=0]="start",h[h.tick=1]="tick",h[h.end=2]="end";var t=function(){function h(){var d=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:h.getSourceIndex,getTargetIndex:h.getTargetIndex,setLength:h.setLinkLength,getType:function(x){return"function"==typeof d._linkType?d._linkType(x):0}}}return h.prototype.on=function(d,x){return this.event||(this.event={}),"string"==typeof d?this.event[a[d]]=x:this.event[d]=x,this},h.prototype.trigger=function(d){this.event&&typeof this.event[d.type]<"u"&&this.event[d.type](d)},h.prototype.kick=function(){for(;!this.tick(););},h.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:a.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var b,C,d=this._nodes.length;for(this._descent.locks.clear(),C=0;C<d;++C)(b=this._nodes[C]).fixed&&((typeof b.px>"u"||typeof b.py>"u")&&(b.px=b.x,b.py=b.y),this._descent.locks.add(C,[b.px,b.py]));var M=this._descent.rungeKutta();return 0===M?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=M),this._lastStress=M,this.updateNodePositions(),this.trigger({type:a.tick,alpha:this._alpha,stress:this._lastStress}),!1},h.prototype.updateNodePositions=function(){for(var b,d=this._descent.x[0],x=this._descent.x[1],C=this._nodes.length;C--;)(b=this._nodes[C]).x=d[C],b.y=x[C]},h.prototype.nodes=function(d){if(!d){if(0===this._nodes.length&&this._links.length>0){var x=0;this._links.forEach(function(C){x=Math.max(x,C.source,C.target)}),this._nodes=new Array(++x);for(var b=0;b<x;++b)this._nodes[b]={}}return this._nodes}return this._nodes=d,this},h.prototype.groups=function(d){var x=this;return d?(this._groups=d,this._rootGroup={},this._groups.forEach(function(b){typeof b.padding>"u"&&(b.padding=1),typeof b.leaves<"u"&&b.leaves.forEach(function(C,A){"number"==typeof C&&((b.leaves[A]=x._nodes[C]).parent=b)}),typeof b.groups<"u"&&b.groups.forEach(function(C,A){"number"==typeof C&&((b.groups[A]=x._groups[C]).parent=b)})}),this._rootGroup.leaves=this._nodes.filter(function(b){return typeof b.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(b){return typeof b.parent>"u"}),this):this._groups},h.prototype.powerGraphGroups=function(d){var x=s.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(x.groups),d(x),this},h.prototype.avoidOverlaps=function(d){return arguments.length?(this._avoidOverlaps=d,this):this._avoidOverlaps},h.prototype.handleDisconnected=function(d){return arguments.length?(this._handleDisconnected=d,this):this._handleDisconnected},h.prototype.flowLayout=function(d,x){return arguments.length||(d="y"),this._directedLinkConstraints={axis:d,getMinSeparation:"number"==typeof x?function(){return x}:x},this},h.prototype.links=function(d){return arguments.length?(this._links=d,this):this._links},h.prototype.constraints=function(d){return arguments.length?(this._constraints=d,this):this._constraints},h.prototype.distanceMatrix=function(d){return arguments.length?(this._distanceMatrix=d,this):this._distanceMatrix},h.prototype.size=function(d){return d?(this._canvasSize=d,this):this._canvasSize},h.prototype.defaultNodeSize=function(d){return d?(this._defaultNodeSize=d,this):this._defaultNodeSize},h.prototype.groupCompactness=function(d){return d?(this._groupCompactness=d,this):this._groupCompactness},h.prototype.linkDistance=function(d){return d?(this._linkDistance="function"==typeof d?d:+d,this._linkLengthCalculator=null,this):this._linkDistance},h.prototype.linkType=function(d){return this._linkType=d,this},h.prototype.convergenceThreshold=function(d){return d?(this._threshold="function"==typeof d?d:+d,this):this._threshold},h.prototype.alpha=function(d){return arguments.length?(d=+d,this._alpha?this._alpha=d>0?d:0:d>0&&(this._running||(this._running=!0,this.trigger({type:a.start,alpha:this._alpha=d}),this.kick())),this):this._alpha},h.prototype.getLinkLength=function(d){return"function"==typeof this._linkDistance?+this._linkDistance(d):this._linkDistance},h.setLinkLength=function(d,x){d.length=x},h.prototype.getLinkType=function(d){return"function"==typeof this._linkType?this._linkType(d):0},h.prototype.symmetricDiffLinkLengths=function(d,x){var b=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.symmetricDiffLinkLengths(b._links,b.linkAccessor,x)},this},h.prototype.jaccardLinkLengths=function(d,x){var b=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.jaccardLinkLengths(b._links,b.linkAccessor,x)},this},h.prototype.start=function(d,x,b,C,A,M){var N=this;void 0===d&&(d=0),void 0===x&&(x=0),void 0===b&&(b=0),void 0===C&&(C=0),void 0===A&&(A=!0),void 0===M&&(M=!0);var z,H=this.nodes().length,V=H+2*this._groups.length,Y=this._canvasSize[0],O=this._canvasSize[1],I=new Array(V),L=new Array(V),F=null,G=this._avoidOverlaps;this._nodes.forEach(function(tt,ut){tt.index=ut,typeof tt.x>"u"&&(tt.x=Y/2,tt.y=O/2),I[ut]=tt.x,L[ut]=tt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?z=this._distanceMatrix:(z=new f.Calculator(V,this._links,h.getSourceIndex,h.getTargetIndex,function(tt){return N.getLinkLength(tt)}).DistanceMatrix(),F=p.Descent.createSquareMatrix(V,function(){return 2}),this._links.forEach(function(tt){"number"==typeof tt.source&&(tt.source=N._nodes[tt.source]),"number"==typeof tt.target&&(tt.target=N._nodes[tt.target])}),this._links.forEach(function(tt){var ut=h.getSourceIndex(tt),ft=h.getTargetIndex(tt);F[ut][ft]=F[ft][ut]=tt.weight||1}));var Q=p.Descent.createSquareMatrix(V,function(tt,ut){return z[tt][ut]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var k=H;this._groups.forEach(function(ut){(function(ut,ft,xt,$){F[ut][ft]=F[ft][ut]=xt,Q[ut][ft]=Q[ft][ut]=.1})(k,k+1,N._groupCompactness),I[k]=0,L[k++]=0,I[k]=0,L[k++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var Z=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,Z=Z.concat(m.generateDirectedEdgeConstraints(H,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new p.Descent([I,L],Q),this._descent.locks.clear(),k=0;k<H;++k){var X=this._nodes[k];X.fixed&&(X.px=X.x,X.py=X.y,this._descent.locks.add(k,[X.x,X.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(d,I,L),Z.length>0&&(this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,Z).projectFunctions()),this._descent.run(x),this.separateOverlappingComponents(Y,O,M),this.avoidOverlaps(G),G&&(this._nodes.forEach(function(tt,ut){tt.x=I[ut],tt.y=L[ut]}),this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,Z,!0).projectFunctions(),this._nodes.forEach(function(tt,ut){I[ut]=tt.x,L[ut]=tt.y})),this._descent.G=F,this._descent.run(b),C){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=H,this._descent.scaleSnapByMaxH=H!=V;var it=p.Descent.createSquareMatrix(V,function(tt,ut){return tt>=H||ut>=H?F[tt][ut]:0});this._descent.G=it,this._descent.run(C)}return this.updateNodePositions(),this.separateOverlappingComponents(Y,O,M),A?this.resume():this},h.prototype.initialLayout=function(d,x,b){if(this._groups.length>0&&d>0){var C=this._nodes.length,A=this._links.map(function(N){return{source:N.source.index,target:N.target.index}}),M=this._nodes.map(function(N){return{index:N.index}});this._groups.forEach(function(N,k){M.push({index:N.index=C+k})}),this._groups.forEach(function(N,k){typeof N.leaves<"u"&&N.leaves.forEach(function(D){return A.push({source:N.index,target:D.index})}),typeof N.groups<"u"&&N.groups.forEach(function(D){return A.push({source:N.index,target:D.index})})}),(new h).size(this.size()).nodes(M).links(A).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(d,0,0,0,!1),this._nodes.forEach(function(N){x[N.index]=M[N.index].x,b[N.index]=M[N.index].y})}else this._descent.run(d)},h.prototype.separateOverlappingComponents=function(d,x,b){var C=this;if(void 0===b&&(b=!0),!this._distanceMatrix&&this._handleDisconnected){var A=this._descent.x[0],M=this._descent.x[1];this._nodes.forEach(function(k,D){k.x=A[D],k.y=M[D]});var N=r.separateGraphs(this._nodes,this._links);r.applyPacking(N,d,x,this._defaultNodeSize,1,b),this._nodes.forEach(function(k,D){C._descent.x[0][D]=k.x,C._descent.x[1][D]=k.y,k.bounds&&(k.bounds.setXCentre(k.x),k.bounds.setYCentre(k.y))})}},h.prototype.resume=function(){return this.alpha(.1)},h.prototype.stop=function(){return this.alpha(0)},h.prototype.prepareEdgeRouting=function(d){void 0===d&&(d=0),this._visibilityGraph=new c.TangentVisibilityGraph(this._nodes.map(function(x){return x.bounds.inflate(-d).vertices()}))},h.prototype.routeEdge=function(d,x,b){void 0===x&&(x=5);var C=[],A=new c.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),M={x:d.source.x,y:d.source.y},N={x:d.target.x,y:d.target.y},k=A.addPoint(M,d.source.index),D=A.addPoint(N,d.target.index);A.addEdgeIfVisible(M,N,d.source.index,d.target.index),typeof b<"u"&&b(A);var O=new f.Calculator(A.V.length,A.E,function(Q){return Q.source.id},function(Q){return Q.target.id},function(Q){return Q.length()}).PathFromNodeToNode(k.id,D.id);if(1===O.length||O.length===A.V.length){var I=g.makeEdgeBetween(d.source.innerBounds,d.target.innerBounds,x);C=[I.sourceIntersection,I.arrowStart]}else{for(var L=O.length-2,F=A.V[O[L]].p,G=A.V[O[0]].p,z=(C=[d.source.innerBounds.rayIntersection(F.x,F.y)],L);z>=0;--z)C.push(A.V[O[z]].p);C.push(g.makeEdgeTo(G,d.target.innerBounds,x))}return C},h.getSourceIndex=function(d){return"number"==typeof d.source?d.source:d.source.index},h.getTargetIndex=function(d){return"number"==typeof d.target?d.target:d.target.index},h.linkId=function(d){return h.getSourceIndex(d)+"-"+h.getTargetIndex(d)},h.dragStart=function(d){l(d)?h.storeOffset(d,h.dragOrigin(d)):(h.stopNode(d),d.fixed|=2)},h.stopNode=function(d){d.px=d.x,d.py=d.y},h.storeOffset=function(d,x){typeof d.leaves<"u"&&d.leaves.forEach(function(b){b.fixed|=2,h.stopNode(b),b._dragGroupOffsetX=b.x-x.x,b._dragGroupOffsetY=b.y-x.y}),typeof d.groups<"u"&&d.groups.forEach(function(b){return h.storeOffset(b,x)})},h.dragOrigin=function(d){return l(d)?{x:d.bounds.cx(),y:d.bounds.cy()}:d},h.drag=function(d,x){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(b){d.bounds.setXCentre(x.x),d.bounds.setYCentre(x.y),b.px=b._dragGroupOffsetX+x.x,b.py=b._dragGroupOffsetY+x.y}),typeof d.groups<"u"&&d.groups.forEach(function(b){return h.drag(b,x)})):(d.px=x.x,d.py=x.y)},h.dragEnd=function(d){l(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(x){h.dragEnd(x),delete x._dragGroupOffsetX,delete x._dragGroupOffsetY}),typeof d.groups<"u"&&d.groups.forEach(h.dragEnd)):d.fixed&=-7},h.mouseOver=function(d){d.fixed|=4,d.px=d.x,d.py=d.y},h.mouseOut=function(d){d.fixed&=-5},h}();w.Layout=t},6461:(y,w,i)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var s=i(3858),m=i(1786),p=i(4068),g=i(8802),f=function(){function l(t,h){this.source=t,this.target=h}return l.prototype.actualLength=function(t){var h=this;return Math.sqrt(t.reduce(function(d,x){var b=x[h.target]-x[h.source];return d+b*b},0))},l}();w.Link3D=f,w.Node3D=function l(t,h,d){void 0===t&&(t=0),void 0===h&&(h=0),void 0===d&&(d=0),this.x=t,this.y=h,this.z=d};var r=function(){function l(t,h,d){var x=this;void 0===d&&(d=1),this.nodes=t,this.links=h,this.idealLinkLength=d,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(l.k);for(var b=0;b<l.k;++b)this.result[b]=new Array(t.length);t.forEach(function(C,A){for(var M=0,N=l.dims;M<N.length;M++){var k=N[M];typeof C[k]>"u"&&(C[k]=Math.random())}x.result[0][A]=C.x,x.result[1][A]=C.y,x.result[2][A]=C.z})}return l.prototype.linkLength=function(t){return t.actualLength(this.result)},l.prototype.start=function(t){var h=this;void 0===t&&(t=100);var d=this.nodes.length,x=new a;this.useJaccardLinkLengths&&g.jaccardLinkLengths(this.links,x,1.5),this.links.forEach(function(k){return k.length*=h.idealLinkLength});var b=new s.Calculator(d,this.links,function(k){return k.source},function(k){return k.target},function(k){return k.length}).DistanceMatrix(),C=m.Descent.createSquareMatrix(d,function(k,D){return b[k][D]}),A=m.Descent.createSquareMatrix(d,function(){return 2});this.links.forEach(function(k){var D=k.source,H=k.target;return A[D][H]=A[H][D]=1}),this.descent=new m.Descent(this.result,C),this.descent.threshold=.001,this.descent.G=A,this.constraints&&(this.descent.project=new p.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var M=0;M<this.nodes.length;M++){var N=this.nodes[M];N.fixed&&this.descent.locks.add(M,[N.x,N.y,N.z])}return this.descent.run(t),this},l.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var h=this.nodes[t];h.fixed&&this.descent.locks.add(t,[h.x,h.y,h.z])}return this.descent.rungeKutta()},l.k=(l.dims=["x","y","z"]).length,l}();w.Layout3D=r;var a=function(){function l(){}return l.prototype.getSourceIndex=function(t){return t.source},l.prototype.getTargetIndex=function(t){return t.target},l.prototype.getLength=function(t){return t.length},l.prototype.setLength=function(t,h){t.length=h},l}()},8802:(y,w)=>{"use strict";function i(a,l){var t={};for(var h in a)t[h]={};for(var h in l)t[h]={};return Object.keys(t).length}function s(a,l){var t=0;for(var h in a)typeof l[h]<"u"&&++t;return t}function p(a,l,t,h){var d=function m(a,l){var t={},h=function(d,x){typeof t[d]>"u"&&(t[d]={}),t[d][x]={}};return a.forEach(function(d){var x=l.getSourceIndex(d),b=l.getTargetIndex(d);h(x,b),h(b,x)}),t}(a,h);a.forEach(function(x){var b=d[h.getSourceIndex(x)],C=d[h.getTargetIndex(x)];h.setLength(x,1+l*t(b,C))})}function r(a,l,t){var h=[],d=0,x=[],b=[];function C(O){O.index=O.lowlink=d++,x.push(O),O.onStack=!0;for(var I=0,L=O.out;I<L.length;I++){var F=L[I];typeof F.index>"u"?(C(F),O.lowlink=Math.min(O.lowlink,F.lowlink)):F.onStack&&(O.lowlink=Math.min(O.lowlink,F.index))}if(O.lowlink===O.index){for(var G=[];x.length&&((F=x.pop()).onStack=!1,G.push(F),F!==O););b.push(G.map(function(z){return z.id}))}}for(var A=0;A<a;A++)h.push({id:A,out:[]});for(var M=0,N=l;M<N.length;M++){var k=N[M],D=h[t.getSourceIndex(k)],H=h[t.getTargetIndex(k)];D.out.push(H)}for(var V=0,B=h;V<B.length;V++){var Y=B[V];typeof Y.index>"u"&&C(Y)}return b}Object.defineProperty(w,"__esModule",{value:!0}),w.symmetricDiffLinkLengths=function g(a,l,t){void 0===t&&(t=1),p(a,t,function(h,d){return Math.sqrt(i(h,d)-s(h,d))},l)},w.jaccardLinkLengths=function f(a,l,t){void 0===t&&(t=1),p(a,t,function(h,d){return Math.min(Object.keys(h).length,Object.keys(d).length)<1.1?0:s(h,d)/i(h,d)},l)},w.generateDirectedEdgeConstraints=function c(a,l,t,h){var d=r(a,l,h),x={};d.forEach(function(C,A){return C.forEach(function(M){return x[M]=A})});var b=[];return l.forEach(function(C){var A=h.getSourceIndex(C),M=h.getTargetIndex(C);x[A]!==x[M]&&b.push({axis:t,left:A,right:M,gap:h.getMinSeparation(C)})}),b},w.stronglyConnectedComponents=r},3900:(y,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var i=function l(t,h,d){this.source=t,this.target=h,this.type=d};w.PowerEdge=i;var s=function(){function l(t,h,d,x){var b=this;if(this.linkAccessor=d,this.modules=new Array(t),this.roots=[],x)this.initModulesFromGroup(x);else{this.roots.push(new f);for(var C=0;C<t;++C)this.roots[0].add(this.modules[C]=new p(C))}this.R=h.length,h.forEach(function(A){var M=b.modules[d.getSourceIndex(A)],N=b.modules[d.getTargetIndex(A)],k=d.getType(A);M.outgoing.add(k,N),N.incoming.add(k,M)})}return l.prototype.initModulesFromGroup=function(t){var h=new f;this.roots.push(h);for(var d=0;d<t.leaves.length;++d){var x=t.leaves[d],b=new p(x.id);this.modules[x.id]=b,h.add(b)}if(t.groups)for(var C=0;C<t.groups.length;++C){var A=t.groups[C],M={};for(var N in A)"leaves"!==N&&"groups"!==N&&A.hasOwnProperty(N)&&(M[N]=A[N]);h.add(new p(-1-C,new c,new c,this.initModulesFromGroup(A),M))}return h},l.prototype.merge=function(t,h,d){void 0===d&&(d=0);var x=t.incoming.intersection(h.incoming),b=t.outgoing.intersection(h.outgoing),C=new f;C.add(t),C.add(h);var A=new p(this.modules.length,b,x,C);this.modules.push(A);var M=function(N,k,D){N.forAll(function(H,V){H.forAll(function(B){var Y=B[k];Y.add(V,A),Y.remove(V,t),Y.remove(V,h),t[D].remove(V,B),h[D].remove(V,B)})})};return M(b,"incoming","outgoing"),M(x,"outgoing","incoming"),this.R-=x.count()+b.count(),this.roots[d].remove(t),this.roots[d].remove(h),this.roots[d].add(A),A},l.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var h=this.roots[t].modules(),d=h.length,x=new Array(d*(d-1)),b=0,C=0,A=d-1;C<A;++C)for(var M=C+1;M<d;++M){var N=h[C],k=h[M];x[b]={id:b,nEdges:this.nEdges(N,k),a:N,b:k},b++}return x},l.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var d=this.rootMerges(t).sort(function(x,b){return x.nEdges==b.nEdges?x.id-b.id:x.nEdges-b.nEdges})[0];if(!(d.nEdges>=this.R))return this.merge(d.a,d.b,t),!0}},l.prototype.nEdges=function(t,h){var d=t.incoming.intersection(h.incoming),x=t.outgoing.intersection(h.outgoing);return this.R-d.count()-x.count()},l.prototype.getGroupHierarchy=function(t){var h=this,d=[];return m(this.roots[0],{},d),this.allEdges().forEach(function(C){var A=h.modules[C.source],M=h.modules[C.target];t.push(new i(typeof A.gid>"u"?C.source:d[A.gid],typeof M.gid>"u"?C.target:d[M.gid],C.type))}),d},l.prototype.allEdges=function(){var t=[];return l.getEdges(this.roots[0],t),t},l.getEdges=function(t,h){t.forAll(function(d){d.getEdges(h),l.getEdges(d.children,h)})},l}();function m(l,t,h){l.forAll(function(d){if(d.isLeaf())t.leaves||(t.leaves=[]),t.leaves.push(d.id);else{var x=t;if(d.gid=h.length,!d.isIsland()||d.isPredefined()){if(x={id:d.gid},d.isPredefined())for(var b in d.definition)x[b]=d.definition[b];t.groups||(t.groups=[]),t.groups.push(d.gid),h.push(x)}m(d.children,x,h)}})}w.Configuration=s;var p=function(){function l(t,h,d,x,b){void 0===h&&(h=new c),void 0===d&&(d=new c),void 0===x&&(x=new f),this.id=t,this.outgoing=h,this.incoming=d,this.children=x,this.definition=b}return l.prototype.getEdges=function(t){var h=this;this.outgoing.forAll(function(d,x){d.forAll(function(b){t.push(new i(h.id,b.id,x))})})},l.prototype.isLeaf=function(){return 0===this.children.count()},l.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},l.prototype.isPredefined=function(){return typeof this.definition<"u"},l}();w.Module=p;var f=function(){function l(){this.table={}}return l.prototype.count=function(){return Object.keys(this.table).length},l.prototype.intersection=function(t){var h=new l;return h.table=function g(l,t){var h={};for(var d in l)d in t&&(h[d]=l[d]);return h}(this.table,t.table),h},l.prototype.intersectionCount=function(t){return this.intersection(t).count()},l.prototype.contains=function(t){return t in this.table},l.prototype.add=function(t){this.table[t.id]=t},l.prototype.remove=function(t){delete this.table[t.id]},l.prototype.forAll=function(t){for(var h in this.table)t(this.table[h])},l.prototype.modules=function(){var t=[];return this.forAll(function(h){h.isPredefined()||t.push(h)}),t},l}();w.ModuleSet=f;var c=function(){function l(){this.sets={},this.n=0}return l.prototype.count=function(){return this.n},l.prototype.contains=function(t){var h=!1;return this.forAllModules(function(d){!h&&d.id==t&&(h=!0)}),h},l.prototype.add=function(t,h){(t in this.sets?this.sets[t]:this.sets[t]=new f).add(h),++this.n},l.prototype.remove=function(t,h){var d=this.sets[t];d.remove(h),0===d.count()&&delete this.sets[t],--this.n},l.prototype.forAll=function(t){for(var h in this.sets)t(this.sets[h],Number(h))},l.prototype.forAllModules=function(t){this.forAll(function(h,d){return h.forAll(t)})},l.prototype.intersection=function(t){var h=new l;return this.forAll(function(d,x){if(x in t.sets){var b=d.intersection(t.sets[x]),C=b.count();C>0&&(h.sets[x]=b,h.n+=C)}}),h},l}();w.LinkSets=c,w.getGroups=function a(l,t,h,d){for(var b=new s(l.length,t,h,d);b.greedyMerge(););var C=[],A=b.getGroupHierarchy(C);return C.forEach(function(M){var N=function(k){var D=M[k];"number"==typeof D&&(M[k]=l[D])};N("source"),N("target")}),{groups:A,powerEdges:C}}},8866:(y,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var i=function(){function m(p){this.elem=p,this.subheaps=[]}return m.prototype.toString=function(p){for(var g="",f=!1,c=0;c<this.subheaps.length;++c){var r=this.subheaps[c];r.elem?(f&&(g+=","),g+=r.toString(p),f=!0):f=!1}return""!==g&&(g="("+g+")"),(this.elem?p(this.elem):"")+g},m.prototype.forEach=function(p){this.empty()||(p(this.elem,this),this.subheaps.forEach(function(g){return g.forEach(p)}))},m.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(p,g){return p+g.count()},0)},m.prototype.min=function(){return this.elem},m.prototype.empty=function(){return null==this.elem},m.prototype.contains=function(p){if(this===p)return!0;for(var g=0;g<this.subheaps.length;g++)if(this.subheaps[g].contains(p))return!0;return!1},m.prototype.isHeap=function(p){var g=this;return this.subheaps.every(function(f){return p(g.elem,f.elem)&&f.isHeap(p)})},m.prototype.insert=function(p,g){return this.merge(new m(p),g)},m.prototype.merge=function(p,g){return this.empty()?p:p.empty()?this:g(this.elem,p.elem)?(this.subheaps.push(p),this):(p.subheaps.push(this),p)},m.prototype.removeMin=function(p){return this.empty()?null:this.mergePairs(p)},m.prototype.mergePairs=function(p){if(0==this.subheaps.length)return new m(null);if(1==this.subheaps.length)return this.subheaps[0];var g=this.subheaps.pop().merge(this.subheaps.pop(),p),f=this.mergePairs(p);return g.merge(f,p)},m.prototype.decreaseKey=function(p,g,f,c){var r=p.removeMin(c);p.elem=r.elem,p.subheaps=r.subheaps,null!==f&&null!==r.elem&&f(p.elem,p);var a=new m(g);return null!==f&&f(g,a),this.merge(a,c)},m}();w.PairingHeap=i;var s=function(){function m(p){this.lessThan=p}return m.prototype.top=function(){return this.empty()?null:this.root.elem},m.prototype.push=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];for(var f,r,c=0;r=p[c];++c)f=new i(r),this.root=this.empty()?f:this.root.merge(f,this.lessThan);return f},m.prototype.empty=function(){return!this.root||!this.root.elem},m.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},m.prototype.forEach=function(p){this.root.forEach(p)},m.prototype.pop=function(){if(this.empty())return null;var p=this.root.min();return this.root=this.root.removeMin(this.lessThan),p},m.prototype.reduceKey=function(p,g,f){void 0===f&&(f=null),this.root=this.root.decreaseKey(p,g,f,this.lessThan)},m.prototype.toString=function(p){return this.root.toString(p)},m.prototype.count=function(){return this.root.count()},m}();w.PriorityQueue=s},4655:function(y,w){"use strict";var f,i=this&&this.__extends||(f=function(c,r){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var t in l)l.hasOwnProperty(t)&&(a[t]=l[t])})(c,r)},function(c,r){function a(){this.constructor=c}f(c,r),c.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)});Object.defineProperty(w,"__esModule",{value:!0});var s=function(){function f(){this.findIter=function(c){for(var r=this._root,a=this.iterator();null!==r;){var l=this._comparator(c,r.data);if(0===l)return a._cursor=r,a;a._ancestors.push(r),r=r.get_child(l>0)}return null}}return f.prototype.clear=function(){this._root=null,this.size=0},f.prototype.find=function(c){for(var r=this._root;null!==r;){var a=this._comparator(c,r.data);if(0===a)return r.data;r=r.get_child(a>0)}return null},f.prototype.lowerBound=function(c){return this._bound(c,this._comparator)},f.prototype.upperBound=function(c){var r=this._comparator;return this._bound(c,function a(l,t){return r(t,l)})},f.prototype.min=function(){var c=this._root;if(null===c)return null;for(;null!==c.left;)c=c.left;return c.data},f.prototype.max=function(){var c=this._root;if(null===c)return null;for(;null!==c.right;)c=c.right;return c.data},f.prototype.iterator=function(){return new m(this)},f.prototype.each=function(c){for(var a,r=this.iterator();null!==(a=r.next());)c(a)},f.prototype.reach=function(c){for(var a,r=this.iterator();null!==(a=r.prev());)c(a)},f.prototype._bound=function(c,r){for(var a=this._root,l=this.iterator();null!==a;){var t=this._comparator(c,a.data);if(0===t)return l._cursor=a,l;l._ancestors.push(a),a=a.get_child(t>0)}for(var h=l._ancestors.length-1;h>=0;--h)if(r(c,(a=l._ancestors[h]).data)>0)return l._cursor=a,l._ancestors.length=h,l;return l._ancestors.length=0,l},f}();w.TreeBase=s;var m=function(){function f(c){this._tree=c,this._ancestors=[],this._cursor=null}return f.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},f.prototype.next=function(){if(null===this._cursor){var c=this._tree._root;null!==c&&this._minNode(c)}else if(null===this._cursor.right){var r;do{if(r=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===r)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},f.prototype.prev=function(){if(null===this._cursor){var c=this._tree._root;null!==c&&this._maxNode(c)}else if(null===this._cursor.left){var r;do{if(r=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===r)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},f.prototype._minNode=function(c){for(;null!==c.left;)this._ancestors.push(c),c=c.left;this._cursor=c},f.prototype._maxNode=function(c){for(;null!==c.right;)this._ancestors.push(c),c=c.right;this._cursor=c},f}();w.Iterator=m;var p=function(){function f(c){this.data=c,this.left=null,this.right=null,this.red=!0}return f.prototype.get_child=function(c){return c?this.right:this.left},f.prototype.set_child=function(c,r){c?this.right=r:this.left=r},f}(),g=function(f){function c(r){var a=f.call(this)||this;return a._root=null,a._comparator=r,a.size=0,a}return i(c,f),c.prototype.insert=function(r){var a=!1;if(null===this._root)this._root=new p(r),a=!0,this.size++;else{var l=new p(void 0),t=!1,h=!1,d=null,x=l,b=null,C=this._root;for(x.right=this._root;;){if(null===C?(C=new p(r),b.set_child(t,C),a=!0,this.size++):c.is_red(C.left)&&c.is_red(C.right)&&(C.red=!0,C.left.red=!1,C.right.red=!1),c.is_red(C)&&c.is_red(b)){var A=x.right===d;C===b.get_child(h)?x.set_child(A,c.single_rotate(d,!h)):x.set_child(A,c.double_rotate(d,!h))}var M=this._comparator(C.data,r);if(0===M)break;h=t,null!==d&&(x=d),d=b,b=C,C=C.get_child(t=M<0)}this._root=l.right}return this._root.red=!1,a},c.prototype.remove=function(r){if(null===this._root)return!1;var a=new p(void 0),l=a;l.right=this._root;for(var t=null,h=null,d=null,x=!0;null!==l.get_child(x);){var b=x;h=t,t=l,l=l.get_child(x);var C=this._comparator(r,l.data);if(x=C>0,0===C&&(d=l),!c.is_red(l)&&!c.is_red(l.get_child(x)))if(c.is_red(l.get_child(!x))){var A=c.single_rotate(l,x);t.set_child(b,A),t=A}else if(!c.is_red(l.get_child(!x))){var M=t.get_child(!b);if(null!==M)if(c.is_red(M.get_child(!b))||c.is_red(M.get_child(b))){var N=h.right===t;c.is_red(M.get_child(b))?h.set_child(N,c.double_rotate(t,b)):c.is_red(M.get_child(!b))&&h.set_child(N,c.single_rotate(t,b));var k=h.get_child(N);k.red=!0,l.red=!0,k.left.red=!1,k.right.red=!1}else t.red=!1,M.red=!0,l.red=!0}}return null!==d&&(d.data=l.data,t.set_child(t.right===l,l.get_child(null===l.left)),this.size--),this._root=a.right,null!==this._root&&(this._root.red=!1),null!==d},c.is_red=function(r){return null!==r&&r.red},c.single_rotate=function(r,a){var l=r.get_child(!a);return r.set_child(!a,l.get_child(a)),l.set_child(a,r),r.red=!0,l.red=!1,l},c.double_rotate=function(r,a){return r.set_child(!a,c.single_rotate(r.get_child(!a),!a)),c.single_rotate(r,a)},c}(s);w.RBTree=g},4068:function(y,w,i){"use strict";var O,s=this&&this.__extends||(O=function(I,L){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,G){F.__proto__=G}||function(F,G){for(var z in G)G.hasOwnProperty(z)&&(F[z]=G[z])})(I,L)},function(I,L){function F(){this.constructor=I}O(I,L),I.prototype=null===L?Object.create(L):(F.prototype=L.prototype,new F)});Object.defineProperty(w,"__esModule",{value:!0});var m=i(8237),p=i(4655);function g(O){return O.bounds=typeof O.leaves<"u"?O.leaves.reduce(function(I,L){return L.bounds.union(I)},f.empty()):f.empty(),typeof O.groups<"u"&&(O.bounds=O.groups.reduce(function(I,L){return g(L).union(I)},O.bounds)),O.bounds=O.bounds.inflate(O.padding),O.bounds}w.computeGroupBounds=g;var f=function(){function O(I,L,F,G){this.x=I,this.X=L,this.y=F,this.Y=G}return O.empty=function(){return new O(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},O.prototype.cx=function(){return(this.x+this.X)/2},O.prototype.cy=function(){return(this.y+this.Y)/2},O.prototype.overlapX=function(I){var L=this.cx(),F=I.cx();return L<=F&&I.x<this.X?this.X-I.x:F<=L&&this.x<I.X?I.X-this.x:0},O.prototype.overlapY=function(I){var L=this.cy(),F=I.cy();return L<=F&&I.y<this.Y?this.Y-I.y:F<=L&&this.y<I.Y?I.Y-this.y:0},O.prototype.setXCentre=function(I){var L=I-this.cx();this.x+=L,this.X+=L},O.prototype.setYCentre=function(I){var L=I-this.cy();this.y+=L,this.Y+=L},O.prototype.width=function(){return this.X-this.x},O.prototype.height=function(){return this.Y-this.y},O.prototype.union=function(I){return new O(Math.min(this.x,I.x),Math.max(this.X,I.X),Math.min(this.y,I.y),Math.max(this.Y,I.Y))},O.prototype.lineIntersections=function(I,L,F,G){for(var z=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],Q=[],U=0;U<4;++U){var Z=O.lineIntersection(I,L,F,G,z[U][0],z[U][1],z[U][2],z[U][3]);null!==Z&&Q.push({x:Z.x,y:Z.y})}return Q},O.prototype.rayIntersection=function(I,L){var F=this.lineIntersections(this.cx(),this.cy(),I,L);return F.length>0?F[0]:null},O.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},O.lineIntersection=function(I,L,F,G,z,Q,U,Z){var X=F-I,W=U-z,it=G-L,tt=Z-Q,ut=tt*X-W*it;if(0==ut)return null;var ft=I-z,xt=L-Q,K=(W*xt-tt*ft)/ut,lt=(X*xt-it*ft)/ut;return K>=0&&K<=1&&lt>=0&&lt<=1?{x:I+K*X,y:L+K*it}:null},O.prototype.inflate=function(I){return new O(this.x-I,this.X+I,this.y-I,this.Y+I)},O}();w.Rectangle=f,w.makeEdgeBetween=function c(O,I,L){var F=O.rayIntersection(I.cx(),I.cy())||{x:O.cx(),y:O.cy()},G=I.rayIntersection(O.cx(),O.cy())||{x:I.cx(),y:I.cy()},z=G.x-F.x,Q=G.y-F.y,U=Math.sqrt(z*z+Q*Q),Z=U-L;return{sourceIntersection:F,targetIntersection:G,arrowStart:{x:F.x+Z*z/U,y:F.y+Z*Q/U}}},w.makeEdgeTo=function r(O,I,L){var F=I.rayIntersection(O.x,O.y);F||(F={x:I.cx(),y:I.cy()});var G=F.x-O.x,z=F.y-O.y,Q=Math.sqrt(G*G+z*z);return{x:F.x-L*G/Q,y:F.y-L*z/Q}};var a=function O(I,L,F){this.v=I,this.r=L,this.pos=F,this.prev=h(),this.next=h()},l=function O(I,L,F){this.isOpen=I,this.v=L,this.pos=F};function t(O,I){return O.pos>I.pos?1:O.pos<I.pos||O.isOpen?-1:I.isOpen?1:0}function h(){return new p.RBTree(function(O,I){return O.pos-I.pos})}var d={getCentre:function(O){return O.cx()},getOpen:function(O){return O.y},getClose:function(O){return O.Y},getSize:function(O){return O.width()},makeRect:function(O,I,L,F){return new f(L-F/2,L+F/2,O,I)},findNeighbours:function A(O,I){var L=function(F,G){for(var Q,z=I.findIter(O);null!==(Q=z[F]());){var U=Q.r.overlapX(O.r);if((U<=0||U<=Q.r.overlapY(O.r))&&(O[F].insert(Q),Q[G].insert(O)),U<=0)break}};L("next","prev"),L("prev","next")}},x={getCentre:function(O){return O.cy()},getOpen:function(O){return O.x},getClose:function(O){return O.X},getSize:function(O){return O.height()},makeRect:function(O,I,L,F){return new f(O,I,L-F/2,L+F/2)},findNeighbours:function M(O,I){var L=function(F,G){var z=I.findIter(O)[F]();null!==z&&z.r.overlapX(O.r)>0&&(O[F].insert(z),z[G].insert(O))};L("next","prev"),L("prev","next")}};function b(O,I,L,F){void 0===F&&(F=!1);var G=O.padding,z=typeof O.groups<"u"?O.groups.length:0,Q=typeof O.leaves<"u"?O.leaves.length:0,U=z?O.groups.reduce(function(dt,_t){return dt.concat(b(_t,I,L,!0))},[]):[],Z=(F?2:0)+Q+z,X=new Array(Z),W=new Array(Z),it=0,tt=function(dt,_t){W[it]=dt,X[it++]=_t};if(F){var ut=O.bounds,ft=I.getCentre(ut),xt=I.getSize(ut)/2,$=I.getOpen(ut),K=I.getClose(ut),rt=ft-xt+G/2,lt=ft+xt-G/2;O.minVar.desiredPosition=rt,tt(I.makeRect($,K,rt,G),O.minVar),O.maxVar.desiredPosition=lt,tt(I.makeRect($,K,lt,G),O.maxVar)}Q&&O.leaves.forEach(function(dt){return tt(dt.bounds,dt.variable)}),z&&O.groups.forEach(function(dt){var _t=dt.bounds;tt(I.makeRect(I.getOpen(_t),I.getClose(_t),I.getCentre(_t),I.getSize(_t)),dt.minVar)});var mt=C(W,X,I,L);return z&&(X.forEach(function(dt){dt.cOut=[],dt.cIn=[]}),mt.forEach(function(dt){dt.left.cOut.push(dt),dt.right.cIn.push(dt)}),O.groups.forEach(function(dt){var _t=(dt.padding-I.getSize(dt.bounds))/2;dt.minVar.cIn.forEach(function(bt){return bt.gap+=_t}),dt.minVar.cOut.forEach(function(bt){bt.left=dt.maxVar,bt.gap+=_t})})),U.concat(mt)}function C(O,I,L,F){var G,z=O.length,Q=2*z;console.assert(I.length>=z);var U=new Array(Q);for(G=0;G<z;++G){var Z=O[G],X=new a(I[G],Z,L.getCentre(Z));U[G]=new l(!0,X,L.getOpen(Z)),U[G+z]=new l(!1,X,L.getClose(Z))}U.sort(t);var W=new Array,it=h();for(G=0;G<Q;++G){var tt=U[G];if(X=tt.v,tt.isOpen)it.insert(X),L.findNeighbours(X,it);else{it.remove(X);var ut=function($,K){var rt=(L.getSize($.r)+L.getSize(K.r))/2+F;W.push(new m.Constraint($.v,K.v,rt))},ft=function($,K,rt){for(var lt,mt=X[$].iterator();null!==(lt=mt[$]());)rt(lt,X),lt[K].remove(X)};ft("prev","next",function($,K){return ut($,K)}),ft("next","prev",function($,K){return ut(K,$)})}}return console.assert(0===it.size),W}function N(O,I){return C(O,I,d,1e-6)}function k(O,I){return C(O,I,x,1e-6)}function D(O){return b(O,d,1e-6)}function H(O){return b(O,x,1e-6)}w.generateXConstraints=N,w.generateYConstraints=k,w.generateXGroupConstraints=D,w.generateYGroupConstraints=H,w.removeOverlaps=function V(O){var I=O.map(function(G){return new m.Variable(G.cx())}),L=N(O,I),F=new m.Solver(I,L);F.solve(),I.forEach(function(G,z){return O[z].setXCentre(G.position())}),I=O.map(function(G){return new m.Variable(G.cy())}),L=k(O,I),(F=new m.Solver(I,L)).solve(),I.forEach(function(G,z){return O[z].setYCentre(G.position())})};var B=function(O){function I(L,F){var G=O.call(this,0,F)||this;return G.index=L,G}return s(I,O),I}(m.Variable);w.IndexedVariable=B;var Y=function(){function O(I,L,F,G,z){var Q=this;if(void 0===F&&(F=null),void 0===G&&(G=null),void 0===z&&(z=!1),this.nodes=I,this.groups=L,this.rootGroup=F,this.avoidOverlaps=z,this.variables=I.map(function(Z,X){return Z.variable=new B(X,1)}),G&&this.createConstraints(G),z&&F&&typeof F.groups<"u"){I.forEach(function(Z){if(Z.width&&Z.height){var X=Z.width/2,W=Z.height/2;Z.bounds=new f(Z.x-X,Z.x+X,Z.y-W,Z.y+W)}else Z.bounds=new f(Z.x,Z.x,Z.y,Z.y)}),g(F);var U=I.length;L.forEach(function(Z){Q.variables[U]=Z.minVar=new B(U++,typeof Z.stiffness<"u"?Z.stiffness:.01),Q.variables[U]=Z.maxVar=new B(U++,typeof Z.stiffness<"u"?Z.stiffness:.01)})}}return O.prototype.createSeparation=function(I){return new m.Constraint(this.nodes[I.left].variable,this.nodes[I.right].variable,I.gap,typeof I.equality<"u"&&I.equality)},O.prototype.makeFeasible=function(I){var L=this;if(this.avoidOverlaps){var F="x",G="width";"x"===I.axis&&(F="y",G="height");var z=I.offsets.map(function(U){return L.nodes[U.node]}).sort(function(U,Z){return U[F]-Z[F]}),Q=null;z.forEach(function(U){if(Q){var Z=Q[F]+Q[G];Z>U[F]&&(U[F]=Z)}Q=U})}},O.prototype.createAlignment=function(I){var L=this,F=this.nodes[I.offsets[0].node].variable;this.makeFeasible(I);var G="x"===I.axis?this.xConstraints:this.yConstraints;I.offsets.slice(1).forEach(function(z){G.push(new m.Constraint(F,L.nodes[z.node].variable,z.offset,!0))})},O.prototype.createConstraints=function(I){var L=this,F=function(G){return typeof G.type>"u"||"separation"===G.type};this.xConstraints=I.filter(function(G){return"x"===G.axis&&F(G)}).map(function(G){return L.createSeparation(G)}),this.yConstraints=I.filter(function(G){return"y"===G.axis&&F(G)}).map(function(G){return L.createSeparation(G)}),I.filter(function(G){return"alignment"===G.type}).forEach(function(G){return L.createAlignment(G)})},O.prototype.setupVariablesAndBounds=function(I,L,F,G){this.nodes.forEach(function(z,Q){z.fixed?(z.variable.weight=z.fixedWeight?z.fixedWeight:1e3,F[Q]=G(z)):z.variable.weight=1;var U=(z.width||0)/2,Z=(z.height||0)/2,X=I[Q],W=L[Q];z.bounds=new f(X-U,X+U,W-Z,W+Z)})},O.prototype.xProject=function(I,L,F){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(I,L,I,F,function(G){return G.px},this.xConstraints,D,function(G){return G.bounds.setXCentre(F[G.variable.index]=G.variable.position())},function(G){var z=F[G.minVar.index]=G.minVar.position(),Q=F[G.maxVar.index]=G.maxVar.position(),U=G.padding/2;G.bounds.x=z-U,G.bounds.X=Q+U})},O.prototype.yProject=function(I,L,F){!this.rootGroup&&!this.yConstraints||this.project(I,L,L,F,function(G){return G.py},this.yConstraints,H,function(G){return G.bounds.setYCentre(F[G.variable.index]=G.variable.position())},function(G){var z=F[G.minVar.index]=G.minVar.position(),Q=F[G.maxVar.index]=G.maxVar.position(),U=G.padding/2;G.bounds.y=z-U,G.bounds.Y=Q+U})},O.prototype.projectFunctions=function(){var I=this;return[function(L,F,G){return I.xProject(L,F,G)},function(L,F,G){return I.yProject(L,F,G)}]},O.prototype.project=function(I,L,F,G,z,Q,U,Z,X){this.setupVariablesAndBounds(I,L,G,z),this.rootGroup&&this.avoidOverlaps&&(g(this.rootGroup),Q=Q.concat(U(this.rootGroup))),this.solve(this.variables,Q,F,G),this.nodes.forEach(Z),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(X),g(this.rootGroup))},O.prototype.solve=function(I,L,F,G){var z=new m.Solver(I,L);z.setStartingPositions(F),z.setDesiredPositions(G),z.solve()},O}();w.Projection=Y},3858:(y,w,i)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var s=i(8866),m=function c(r,a){this.id=r,this.distance=a},p=function c(r){this.id=r,this.neighbours=[]},g=function c(r,a,l){this.node=r,this.prev=a,this.d=l},f=function(){function c(r,a,l,t,h){this.n=r,this.es=a,this.neighbours=new Array(this.n);for(var d=this.n;d--;)this.neighbours[d]=new p(d);for(d=this.es.length;d--;){var x=this.es[d],b=l(x),C=t(x),A=h(x);this.neighbours[b].neighbours.push(new m(C,A)),this.neighbours[C].neighbours.push(new m(b,A))}}return c.prototype.DistanceMatrix=function(){for(var r=new Array(this.n),a=0;a<this.n;++a)r[a]=this.dijkstraNeighbours(a);return r},c.prototype.DistancesFromNode=function(r){return this.dijkstraNeighbours(r)},c.prototype.PathFromNodeToNode=function(r,a){return this.dijkstraNeighbours(r,a)},c.prototype.PathFromNodeToNodeWithPrevCost=function(r,a,l){var t=new s.PriorityQueue(function(H,V){return H.d<=V.d}),h=this.neighbours[r],d=new g(h,null,0),x={};for(t.push(d);!t.empty()&&(h=(d=t.pop()).node).id!==a;)for(var b=h.neighbours.length;b--;){var C=h.neighbours[b],A=this.neighbours[C.id];if(!d.prev||A.id!==d.prev.node.id){var M=A.id+","+h.id;if(!(M in x&&x[M]<=d.d)){var N=d.prev?l(d.prev.node.id,h.id,A.id):0,k=d.d+C.distance+N;x[M]=k,t.push(new g(A,d,k))}}}for(var D=[];d.prev;)D.push((d=d.prev).node.id);return D},c.prototype.dijkstraNeighbours=function(r,a){void 0===a&&(a=-1);for(var l=new s.PriorityQueue(function(N,k){return N.d<=k.d}),t=this.neighbours.length,h=new Array(t);t--;){var d=this.neighbours[t];d.d=t===r?0:Number.POSITIVE_INFINITY,d.q=l.push(d)}for(;!l.empty();){var x=l.pop();if(h[x.id]=x.d,x.id===a){for(var b=[],C=x;typeof C.prev<"u";)b.push(C.prev.id),C=C.prev;return b}for(t=x.neighbours.length;t--;){var A=x.neighbours[t],M=(C=this.neighbours[A.id],x.d+A.distance);x.d!==Number.MAX_VALUE&&C.d>M&&(C.d=M,C.prev=x,l.reduceKey(C.q,C,function(k,D){return k.q=D}))}}return h},c}();w.Calculator=f},8237:(y,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});var i=function(){function r(a){this.scale=a,this.AB=0,this.AD=0,this.A2=0}return r.prototype.addVariable=function(a){var l=this.scale/a.scale,h=a.weight;this.AB+=h*l*(a.offset/a.scale),this.AD+=h*l*a.desiredPosition,this.A2+=h*l*l},r.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},r}();w.PositionStats=i;var s=function(){function r(a,l,t,h){void 0===h&&(h=!1),this.left=a,this.right=l,this.gap=t,this.equality=h,this.active=!1,this.unsatisfiable=!1,this.left=a,this.right=l,this.gap=t,this.equality=h}return r.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},r}();w.Constraint=s;var m=function(){function r(a,l,t){void 0===l&&(l=1),void 0===t&&(t=1),this.desiredPosition=a,this.weight=l,this.scale=t,this.offset=0}return r.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},r.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},r.prototype.visitNeighbours=function(a,l){var t=function(h,d){return h.active&&a!==d&&l(h,d)};this.cOut.forEach(function(h){return t(h,h.right)}),this.cIn.forEach(function(h){return t(h,h.left)})},r}();w.Variable=m;var p=function(){function r(a){this.vars=[],a.offset=0,this.ps=new i(a.scale),this.addVariable(a)}return r.prototype.addVariable=function(a){a.block=this,this.vars.push(a),this.ps.addVariable(a),this.posn=this.ps.getPosn()},r.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var a=0,l=this.vars.length;a<l;++a)this.ps.addVariable(this.vars[a]);this.posn=this.ps.getPosn()},r.prototype.compute_lm=function(a,l,t){var h=this,d=a.dfdv();return a.visitNeighbours(l,function(x,b){var C=h.compute_lm(b,a,t);b===x.right?(d+=C*x.left.scale,x.lm=C):(d+=C*x.right.scale,x.lm=-C),t(x)}),d/a.scale},r.prototype.populateSplitBlock=function(a,l){var t=this;a.visitNeighbours(l,function(h,d){d.offset=a.offset+(d===h.right?h.gap:-h.gap),t.addVariable(d),t.populateSplitBlock(d,a)})},r.prototype.traverse=function(a,l,t,h){var d=this;void 0===t&&(t=this.vars[0]),void 0===h&&(h=null),t.visitNeighbours(h,function(x,b){l.push(a(x)),d.traverse(a,l,b,t)})},r.prototype.findMinLM=function(){var a=null;return this.compute_lm(this.vars[0],null,function(l){!l.equality&&(null===a||l.lm<a.lm)&&(a=l)}),a},r.prototype.findMinLMBetween=function(a,l){this.compute_lm(a,null,function(){});var t=null;return this.findPath(a,null,l,function(h,d){!h.equality&&h.right===d&&(null===t||h.lm<t.lm)&&(t=h)}),t},r.prototype.findPath=function(a,l,t,h){var d=this,x=!1;return a.visitNeighbours(l,function(b,C){!x&&(C===t||d.findPath(C,a,t,h))&&(x=!0,h(b,C))}),x},r.prototype.isActiveDirectedPathBetween=function(a,l){if(a===l)return!0;for(var t=a.cOut.length;t--;){var h=a.cOut[t];if(h.active&&this.isActiveDirectedPathBetween(h.right,l))return!0}return!1},r.split=function(a){return a.active=!1,[r.createSplitBlock(a.left),r.createSplitBlock(a.right)]},r.createSplitBlock=function(a){var l=new r(a);return l.populateSplitBlock(a,null),l},r.prototype.splitBetween=function(a,l){var t=this.findMinLMBetween(a,l);if(null!==t){var h=r.split(t);return{constraint:t,lb:h[0],rb:h[1]}}return null},r.prototype.mergeAcross=function(a,l,t){l.active=!0;for(var h=0,d=a.vars.length;h<d;++h){var x=a.vars[h];x.offset+=t,this.addVariable(x)}this.posn=this.ps.getPosn()},r.prototype.cost=function(){for(var a=0,l=this.vars.length;l--;){var t=this.vars[l],h=t.position()-t.desiredPosition;a+=h*h*t.weight}return a},r}();w.Block=p;var g=function(){function r(a){this.vs=a;var l=a.length;for(this.list=new Array(l);l--;){var t=new p(a[l]);this.list[l]=t,t.blockInd=l}}return r.prototype.cost=function(){for(var a=0,l=this.list.length;l--;)a+=this.list[l].cost();return a},r.prototype.insert=function(a){a.blockInd=this.list.length,this.list.push(a)},r.prototype.remove=function(a){var l=this.list.length-1,t=this.list[l];this.list.length=l,a!==t&&(this.list[a.blockInd]=t,t.blockInd=a.blockInd)},r.prototype.merge=function(a){var l=a.left.block,t=a.right.block,h=a.right.offset-a.left.offset-a.gap;l.vars.length<t.vars.length?(t.mergeAcross(l,a,h),this.remove(l)):(l.mergeAcross(t,a,-h),this.remove(t))},r.prototype.forEach=function(a){this.list.forEach(a)},r.prototype.updateBlockPositions=function(){this.list.forEach(function(a){return a.updateWeightedPosition()})},r.prototype.split=function(a){var l=this;this.updateBlockPositions(),this.list.forEach(function(t){var h=t.findMinLM();null!==h&&h.lm<f.LAGRANGIAN_TOLERANCE&&(t=h.left.block,p.split(h).forEach(function(d){return l.insert(d)}),l.remove(t),a.push(h))})},r}();w.Blocks=g;var f=function(){function r(a,l){this.vs=a,this.cs=l,this.vs=a,a.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=l,l.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=l.map(function(t){return t.active=!1,t}),this.bs=null}return r.prototype.cost=function(){return this.bs.cost()},r.prototype.setStartingPositions=function(a){this.inactive=this.cs.map(function(l){return l.active=!1,l}),this.bs=new g(this.vs),this.bs.forEach(function(l,t){return l.posn=a[t]})},r.prototype.setDesiredPositions=function(a){this.vs.forEach(function(l,t){return l.desiredPosition=a[t]})},r.prototype.mostViolated=function(){for(var a=Number.MAX_VALUE,l=null,t=this.inactive,h=t.length,d=h,x=0;x<h;++x){var b=t[x];if(!b.unsatisfiable){var C=b.slack();if((b.equality||C<a)&&(a=C,l=b,d=x,b.equality))break}}return d!==h&&(a<r.ZERO_UPPERBOUND&&!l.active||l.equality)&&(t[d]=t[h-1],t.length=h-1),l},r.prototype.satisfy=function(){null==this.bs&&(this.bs=new g(this.vs)),this.bs.split(this.inactive);for(var a=null;(a=this.mostViolated())&&(a.equality||a.slack()<r.ZERO_UPPERBOUND&&!a.active);){var l=a.left.block;if(l!==a.right.block)this.bs.merge(a);else{if(l.isActiveDirectedPathBetween(a.right,a.left)){a.unsatisfiable=!0;continue}var h=l.splitBetween(a.left,a.right);if(null===h){a.unsatisfiable=!0;continue}this.bs.insert(h.lb),this.bs.insert(h.rb),this.bs.remove(l),this.inactive.push(h.constraint),a.slack()>=0?this.inactive.push(a):this.bs.merge(a)}}},r.prototype.solve=function(){this.satisfy();for(var a=Number.MAX_VALUE,l=this.bs.cost();Math.abs(a-l)>1e-4;)this.satisfy(),a=l,l=this.bs.cost();return l},r.LAGRANGIAN_TOLERANCE=-1e-4,r.ZERO_UPPERBOUND=-1e-10,r}();w.Solver=f,w.removeOverlapInOneDimension=function c(r,a,l){for(var t=r.map(function(B){return new m(B.desiredCenter)}),h=[],d=r.length,x=0;x<d-1;x++)h.push(new s(t[x],t[x+1],(r[x].size+r[x+1].size)/2));var A=t[0],M=t[d-1],N=r[0].size/2,k=r[d-1].size/2,D=null,H=null;return a&&(D=new m(a,1e3*A.weight),t.push(D),h.push(new s(D,A,N))),l&&(H=new m(l,1e3*M.weight),t.push(H),h.push(new s(M,H,k))),new f(t,h).solve(),{newCenters:t.slice(0,r.length).map(function(B){return B.position()}),lowerBound:D?D.position():A.position()-N,upperBound:H?H.position():M.position()+k}}}}]);